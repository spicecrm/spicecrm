/*!
 * 
 *                     aacService
 *
 *                     release: 2023.02.001
 *
 *                     date: 2023-08-15 08:39:15
 *
 *                     build: 2023.02.001.1692081555935
 *
 */
"use strict";(self.webpackChunkcore=self.webpackChunkcore||[]).push([["src_modules_currencies_modulecurrencies_ts"],{2022:(e,s,t)=>{t.r(s),t.d(s,{ModuleCurrencies:()=>R});var n=t(1180),i=t(4755),o=t(3190),r=t(4826),l=t(6490),c=t(3735),d=t(4357),a=t(5030),u=t(5710),g=t(2294),m=t(2242),h=t(4154),Z=t(5329),p=t(4505),y=t(5547),b=t(4044),v=t(3278),f=t(3463);function _(e,s){if(1&e&&(m.TgZ(0,"tr",10)(1,"td"),m._uU(2),m.qZA(),m.TgZ(3,"td"),m._uU(4),m.qZA(),m.TgZ(5,"td"),m._uU(6),m.qZA(),m.TgZ(7,"td"),m._uU(8),m.qZA()()),2&e){const e=s.$implicit;m.xp6(2),m.Oqu(e.name),m.xp6(2),m.Oqu(e.iso),m.xp6(2),m.Oqu(e.symbol),m.xp6(2),m.Oqu(e.conversion_rate)}}let C=(()=>{var e;class CurrencyList{constructor(e,s,t,i){(0,n.Z)(this,"metadata",void 0),(0,n.Z)(this,"language",void 0),(0,n.Z)(this,"backend",void 0),(0,n.Z)(this,"modal",void 0),(0,n.Z)(this,"currencies",[]),this.metadata=e,this.language=s,this.backend=t,this.modal=i}ngOnInit(){this.currencies.shift()}}return e=CurrencyList,(0,n.Z)(CurrencyList,"ɵfac",(function(s){return new(s||e)(m.Y36(h.Pu),m.Y36(Z.d),m.Y36(p.y),m.Y36(b.o))})),(0,n.Z)(CurrencyList,"ɵcmp",m.Xpm({type:e,selectors:[["currency-list"]],inputs:{currencies:"currencies"},decls:16,vars:1,consts:[[1,"slds-p-around--medium"],[1,"slds-text-title--caps"],["label","LBL_CURRENCIES"],[1,"slds-table","slds-table--bordered","slds-table--cell-buffer"],["scope","col"],["label","LBL_NAME"],["label","LBL_ISO"],["label","LBL_SYMBOL"],["label","LBL_CONVERSION_RATE"],["style","vertical-align: middle","class","slds-align-top",4,"ngFor","ngForOf"],[1,"slds-align-top",2,"vertical-align","middle"]],template:function(e,s){1&e&&(m.TgZ(0,"div",0)(1,"h2",1),m._UZ(2,"system-label",2),m.qZA()(),m.TgZ(3,"table",3)(4,"thead")(5,"tr",1)(6,"th",4),m._UZ(7,"system-label",5),m.qZA(),m.TgZ(8,"th",4),m._UZ(9,"system-label",6),m.qZA(),m.TgZ(10,"th",4),m._UZ(11,"system-label",7),m.qZA(),m.TgZ(12,"th",4),m._UZ(13,"system-label",8),m.qZA()()(),m.TgZ(14,"tbody"),m.YNc(15,_,9,4,"tr",9),m.qZA()()),2&e&&(m.xp6(15),m.Q6J("ngForOf",s.currencies))},dependencies:[i.sg,f._],encapsulation:2})),CurrencyList})();var M=t(2656);function x(e,s){if(1&e){const e=m.EpF();m.TgZ(0,"div",5)(1,"div",6),m._UZ(2,"system-label",2),m.TgZ(3,"div",7)(4,"input",8),m.NdJ("ngModelChange",(function(s){m.CHM(e);const t=m.oxw();return m.KtG(t.name=s)})),m.qZA()()(),m.TgZ(5,"div",6),m._UZ(6,"system-label",2),m.TgZ(7,"div",7)(8,"input",8),m.NdJ("ngModelChange",(function(s){m.CHM(e);const t=m.oxw();return m.KtG(t.iso=s)})),m.qZA()()(),m.TgZ(9,"div",6),m._UZ(10,"system-label",2),m.TgZ(11,"div",7)(12,"input",8),m.NdJ("ngModelChange",(function(s){m.CHM(e);const t=m.oxw();return m.KtG(t.symbol=s)})),m.qZA()()(),m.TgZ(13,"div",6),m._UZ(14,"system-label",2),m.TgZ(15,"div",7)(16,"input",9),m.NdJ("ngModelChange",(function(s){m.CHM(e);const t=m.oxw();return m.KtG(t.conversion_rate=s)})),m.qZA()()(),m.TgZ(17,"button",10),m.NdJ("click",(function(){m.CHM(e);const s=m.oxw();return m.KtG(s.addCurrencyItem())})),m._UZ(18,"system-button-icon",11),m.qZA()()}if(2&e){const e=m.oxw();m.xp6(2),m.Q6J("label","LBL_NAME"),m.xp6(2),m.Q6J("ngModel",e.name),m.xp6(2),m.Q6J("label","LBL_ISO"),m.xp6(2),m.Q6J("ngModel",e.iso),m.xp6(2),m.Q6J("label","LBL_SYMBOL"),m.xp6(2),m.Q6J("ngModel",e.symbol),m.xp6(2),m.Q6J("label","LBL_CONVERSION_RATE"),m.xp6(2),m.Q6J("ngModel",e.conversion_rate)}}let L=(()=>{var e;class AddCurrencyItem{constructor(e,s,t,i){(0,n.Z)(this,"metadata",void 0),(0,n.Z)(this,"language",void 0),(0,n.Z)(this,"backend",void 0),(0,n.Z)(this,"toast",void 0),(0,n.Z)(this,"new",new m.vpe),(0,n.Z)(this,"name",void 0),(0,n.Z)(this,"iso",void 0),(0,n.Z)(this,"symbol",void 0),(0,n.Z)(this,"conversion_rate",1),(0,n.Z)(this,"show",!1),this.metadata=e,this.language=s,this.backend=t,this.toast=i}toggleShow(){this.show=!this.show}addCurrencyItem(){let e={name:this.name,iso:this.iso,symbol:this.symbol,conversion_rate:this.conversion_rate};this.isMoreZero(this.conversion_rate)?this.backend.postRequest("module/Currencies/add",{},e).subscribe((e=>{e.status?this.new.emit(!0):this.toast.sendToast(this.language.getLabel("LBL_ERROR"),"error")})):this.toast.sendToast(this.language.getLabel("LBL_ERROR"),"error")}isMoreZero(e){return!!(0<e&&e)}}return e=AddCurrencyItem,(0,n.Z)(AddCurrencyItem,"ɵfac",(function(s){return new(s||e)(m.Y36(h.Pu),m.Y36(Z.d),m.Y36(p.y),m.Y36(v.A))})),(0,n.Z)(AddCurrencyItem,"ɵcmp",m.Xpm({type:e,selectors:[["add-currency-item"]],outputs:{new:"new"},decls:5,vars:3,consts:[[1,"slds-p-around--medium"],[1,"slds-text-title--caps"],[3,"label"],[1,"slds-p-left--small",3,"icon","click"],["class","slds-grid slds-grid--align-spread slds-p-vertical--xx-small",4,"ngIf"],[1,"slds-grid","slds-grid--align-spread","slds-p-vertical--xx-small"],[1,"slds-form-element"],[1,"slds-form-element__control"],["type","text",1,"slds-input",3,"ngModel","ngModelChange"],["type","number",1,"slds-input",3,"ngModel","ngModelChange"],[1,"slds-button","slds-button-icon","slds-m-right_x-small",3,"click"],["icon","add"]],template:function(e,s){1&e&&(m.TgZ(0,"div",0)(1,"h2",1),m._UZ(2,"system-label",2),m.TgZ(3,"system-button-icon",3),m.NdJ("click",(function(){return s.toggleShow()})),m.qZA()(),m.YNc(4,x,19,8,"div",4),m.qZA()),2&e&&(m.xp6(2),m.Q6J("label","LBL_ADD"),m.xp6(1),m.Q6J("icon",s.show?"chevrondown":"chevronright"),m.xp6(1),m.Q6J("ngIf",s.show))},dependencies:[i.O5,a.Fj,a.wV,a.JJ,a.On,M.J,f._],encapsulation:2})),AddCurrencyItem})();var w=t(4664);function J(e,s){1&e&&m._UZ(0,"system-spinner")}function A(e,s){if(1&e){const e=m.EpF();m.TgZ(0,"div"),m._uU(1),m.TgZ(2,"system-button-icon",6),m.NdJ("click",(function(){m.CHM(e);const s=m.oxw(2);return m.KtG(s.edit())})),m.qZA()()}if(2&e){const e=m.oxw(2);m.xp6(1),m.AsE(" ",e.defaultCurrency.name," (",e.defaultCurrency.symbol,") ")}}function T(e,s){if(1&e){const e=m.EpF();m.TgZ(0,"div",7)(1,"div",8),m._UZ(2,"system-label",9),m.TgZ(3,"div",10)(4,"input",11),m.NdJ("ngModelChange",(function(s){m.CHM(e);const t=m.oxw(2);return m.KtG(t.name=s)})),m.qZA()()(),m.TgZ(5,"div",8),m._UZ(6,"system-label",9),m.TgZ(7,"div",10)(8,"input",11),m.NdJ("ngModelChange",(function(s){m.CHM(e);const t=m.oxw(2);return m.KtG(t.iso=s)})),m.qZA()()(),m.TgZ(9,"div",8),m._UZ(10,"system-label",9),m.TgZ(11,"div",10)(12,"input",11),m.NdJ("ngModelChange",(function(s){m.CHM(e);const t=m.oxw(2);return m.KtG(t.symbol=s)})),m.qZA()()(),m.TgZ(13,"button",12),m.NdJ("click",(function(){m.CHM(e);const s=m.oxw(2);return m.KtG(s.cancel())})),m._UZ(14,"system-button-icon",13),m.qZA(),m.TgZ(15,"button",12),m.NdJ("click",(function(){m.CHM(e);const s=m.oxw(2);return m.KtG(s.savePreference())})),m._UZ(16,"system-button-icon",14),m.qZA()()}if(2&e){const e=m.oxw(2);m.xp6(2),m.Q6J("label","LBL_NAME"),m.xp6(2),m.Q6J("ngModel",e.name),m.xp6(2),m.Q6J("label","LBL_ISO"),m.xp6(2),m.Q6J("ngModel",e.iso),m.xp6(2),m.Q6J("label","LBL_SYMBOL"),m.xp6(2),m.Q6J("ngModel",e.symbol)}}function q(e,s){if(1&e&&(m.TgZ(0,"div",2)(1,"div")(2,"h2",3),m._UZ(3,"system-label",4),m.qZA()(),m.YNc(4,A,3,2,"div",0),m.YNc(5,T,17,6,"div",5),m.qZA()),2&e){const e=m.oxw();m.xp6(4),m.Q6J("ngIf",!e.editMode&&e.defaultCurrency),m.xp6(1),m.Q6J("ngIf",e.editMode)}}let Y=(()=>{var e;class SystemCurrency{constructor(e,s,t,i,o,r){(0,n.Z)(this,"metadata",void 0),(0,n.Z)(this,"language",void 0),(0,n.Z)(this,"backend",void 0),(0,n.Z)(this,"modal",void 0),(0,n.Z)(this,"view",void 0),(0,n.Z)(this,"toast",void 0),(0,n.Z)(this,"currencies",[]),(0,n.Z)(this,"loading",!1),(0,n.Z)(this,"defaultCurrency",{}),(0,n.Z)(this,"iso",""),(0,n.Z)(this,"name",""),(0,n.Z)(this,"symbol",""),(0,n.Z)(this,"conversion_rate",""),this.metadata=e,this.language=s,this.backend=t,this.modal=i,this.view=o,this.toast=r}ngOnInit(){for(let e of this.currencies)-99==e.id&&(this.defaultCurrency=e);this.iso=this.defaultCurrency.iso,this.name=this.defaultCurrency.name,this.symbol=this.defaultCurrency.symbol,this.conversion_rate=this.defaultCurrency.conversion_rate}get editMode(){return this.view.isEditMode()}edit(){this.view.isEditable=!0,this.view.setEditMode()}cancel(){this.view.setViewMode()}savePreference(){let e={currencies:{default_currency_iso4217:this.iso,default_currency_name:this.name,default_currency_symbol:this.symbol,default_currency_conversion_rate:this.conversion_rate}};this.backend.postRequest("configuration/settings",{},e).subscribe((e=>{e.status?this.defaultCurrency={iso:this.iso,name:this.name,symbol:this.symbol,conversion_rate:this.conversion_rate}:this.toast.sendToast(this.language.getLabel("LBL_ERROR"),"error")})),this.view.setViewMode()}}return e=SystemCurrency,(0,n.Z)(SystemCurrency,"ɵfac",(function(s){return new(s||e)(m.Y36(h.Pu),m.Y36(Z.d),m.Y36(p.y),m.Y36(b.o),m.Y36(g.e),m.Y36(v.A))})),(0,n.Z)(SystemCurrency,"ɵcmp",m.Xpm({type:e,selectors:[["system-currency"]],inputs:{currencies:"currencies"},decls:2,vars:2,consts:[[4,"ngIf"],["class","slds-p-around--medium",4,"ngIf"],[1,"slds-p-around--medium"],[1,"slds-text-title--caps"],["label","LBL_SYSTEM_CURRENCY"],["class","slds-grid slds-grid--align-spread slds-p-vertical--xx-small",4,"ngIf"],["icon","edit",1,"slds-p-left--small",3,"click"],[1,"slds-grid","slds-grid--align-spread","slds-p-vertical--xx-small"],[1,"slds-form-element"],[3,"label"],[1,"slds-form-element__control"],["type","text",1,"slds-input",3,"ngModel","ngModelChange"],[1,"slds-button","slds-button-icon","slds-m-right_x-small",3,"click"],["icon","close"],["icon","save"]],template:function(e,s){1&e&&(m.YNc(0,J,1,0,"system-spinner",0),m.YNc(1,q,6,2,"div",1)),2&e&&(m.Q6J("ngIf",s.loading),m.xp6(1),m.Q6J("ngIf",!s.loading))},dependencies:[i.O5,a.Fj,a.JJ,a.On,M.J,f._,w.W],encapsulation:2})),SystemCurrency})();function O(e,s){if(1&e){const e=m.EpF();m.TgZ(0,"div")(1,"div",1)(2,"div",2)(3,"h2",3),m._UZ(4,"system-label",4),m.qZA()()(),m.TgZ(5,"div",5),m._UZ(6,"system-currency",6),m.qZA(),m.TgZ(7,"add-currency-item",7),m.NdJ("new",(function(s){m.CHM(e);const t=m.oxw();return m.KtG(t.reload(s))})),m.qZA(),m._UZ(8,"currency-list",6),m.qZA()}if(2&e){const e=m.oxw();m.xp6(4),m.Q6J("label","LBL_CURRENCY"),m.xp6(2),m.Q6J("currencies",e.currencies),m.xp6(2),m.Q6J("currencies",e.currencies)}}let N=(()=>{var e;class CurrencyManager{constructor(e,s,t,i,o,r,l,c){(0,n.Z)(this,"metadata",void 0),(0,n.Z)(this,"language",void 0),(0,n.Z)(this,"backend",void 0),(0,n.Z)(this,"currency",void 0),(0,n.Z)(this,"model",void 0),(0,n.Z)(this,"modal",void 0),(0,n.Z)(this,"toast",void 0),(0,n.Z)(this,"view",void 0),(0,n.Z)(this,"currencies",[]),(0,n.Z)(this,"loading",!0),this.metadata=e,this.language=s,this.backend=t,this.currency=i,this.model=o,this.modal=r,this.toast=l,this.view=c}ngOnInit(){this.modal.openModal("SystemLoadingModal").subscribe((e=>{this.backend.getRequest("module/Currencies").subscribe((s=>{if(s)for(let e of s)this.currencies.push({id:e.id,name:e.name,iso:e.iso4217,symbol:e.symbol,conversion_rate:e.conversion_rate});else this.toast.sendToast(this.language.getLabel("LBL_ERROR"),"error");this.loading=!1,e.instance.self.destroy()}))}))}reload(e){e&&this.modal.openModal("SystemLoadingModal").subscribe((e=>{this.backend.getRequest("module/Currencies").subscribe((s=>{s?(this.currencies=s,this.currencies.shift()):this.toast.sendToast(this.language.getLabel("LBL_ERROR"),"error"),this.loading=!1,e.instance.self.destroy()}))}))}}return e=CurrencyManager,(0,n.Z)(CurrencyManager,"ɵfac",(function(s){return new(s||e)(m.Y36(h.Pu),m.Y36(Z.d),m.Y36(p.y),m.Y36(y.A),m.Y36(u.o),m.Y36(b.o),m.Y36(v.A),m.Y36(g.e))})),(0,n.Z)(CurrencyManager,"ɵcmp",m.Xpm({type:e,selectors:[["currency-manager"]],features:[m._Bn([g.e,u.o])],decls:1,vars:1,consts:[[4,"ngIf"],[1,"slds-p-around--medium"],[1,"slds-grid","slds-grid--align-spread"],[1,"slds-text-heading--medium"],[3,"label"],[1,"slds-p-vertical--small"],[3,"currencies"],[3,"new"]],template:function(e,s){1&e&&m.YNc(0,O,9,3,"div",0),2&e&&m.Q6J("ngIf",!s.loading)},dependencies:[i.O5,f._,C,L,Y],encapsulation:2})),CurrencyManager})(),R=(()=>{var e;class ModuleCurrencies{}return e=ModuleCurrencies,(0,n.Z)(ModuleCurrencies,"ɵfac",(function(s){return new(s||e)})),(0,n.Z)(ModuleCurrencies,"ɵmod",m.oAB({type:e})),(0,n.Z)(ModuleCurrencies,"ɵinj",m.cJS({imports:[i.ez,a.u5,o.ObjectFields,r.GlobalComponents,l.ObjectComponents,c.SystemComponents,d.o]})),ModuleCurrencies})();("undefined"==typeof ngJitMode||ngJitMode)&&m.kYT(R,{declarations:[N,C,L,Y],imports:[i.ez,a.u5,o.ObjectFields,r.GlobalComponents,l.ObjectComponents,c.SystemComponents,d.o]})}}]);