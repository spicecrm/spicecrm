/*!
 * 
 *                     aacService
 *
 *                     release: 2023.02.001
 *
 *                     date: 2023-08-15 08:39:15
 *
 *                     build: 2023.02.001.1692081555935
 *
 */
"use strict";(self.webpackChunkcore=self.webpackChunkcore||[]).push([["src_modules_scrum_modulescrum_ts"],{8836:(e,t,s)=>{s.r(t),s.d(t,{ModuleScrum:()=>$});var i=s(1180),r=s(4755),o=s(3418),c=s(3190),d=s(4826),n=s(6490),l=s(3735),u=s(4357),a=s(2242),m=s(4505);let h=(()=>{var e;class scrum{constructor(e){(0,i.Z)(this,"backend",void 0),(0,i.Z)(this,"_selectedObject",void 0),(0,i.Z)(this,"selectedObject$",new a.vpe),this.backend=e,this._selectedObject={id:void 0,type:""}}get selectedObject(){return this._selectedObject}set selectedObject(e){this._selectedObject=e,this.selectedObject$.emit(this._selectedObject)}onDrop(e,t,s){(0,o.bA)(e.container.data,e.previousIndex,e.currentIndex);const i=e.container.data.map(((e,t)=>({id:e.id,sequence:t})));this.backend.postRequest("module/"+t,{},i).subscribe((e=>{e&&e.length&&(s.items=s.items.map(((e,t)=>(e.sequence=t,e))))}))}}return e=scrum,(0,i.Z)(scrum,"ɵfac",(function(t){return new(t||e)(a.LFG(m.y))})),(0,i.Z)(scrum,"ɵprov",a.Yz7({token:e,factory:e.ɵfac})),scrum})();var p=s(5710),g=s(2656);let f=(()=>{var e;class ScrumTreeAddItem{constructor(e,t){(0,i.Z)(this,"parent",void 0),(0,i.Z)(this,"model",void 0),(0,i.Z)(this,"title",""),(0,i.Z)(this,"module",""),(0,i.Z)(this,"newitem",new a.vpe),this.parent=e,this.model=t}addItem(){this.model.id=void 0,this.model.module=this.module,this.model.addModel("",this.parent).subscribe((e=>{this.newitem.emit(e)}))}}return e=ScrumTreeAddItem,(0,i.Z)(ScrumTreeAddItem,"ɵfac",(function(t){return new(t||e)(a.Y36(p.o,4),a.Y36(p.o))})),(0,i.Z)(ScrumTreeAddItem,"ɵcmp",a.Xpm({type:e,selectors:[["scrum-tree-additem"]],inputs:{title:"title",module:"module"},outputs:{newitem:"newitem"},features:[a._Bn([p.o])],decls:2,vars:1,consts:[[1,"slds-button","slds-button-icon","slds-m-right_x-small",3,"title","click"],["icon","add"]],template:function(e,t){1&e&&(a.TgZ(0,"button",0),a.NdJ("click",(function(){return t.addItem()})),a._UZ(1,"system-button-icon",1),a.qZA()),2&e&&a.Q6J("title",t.title)},dependencies:[g.J],encapsulation:2})),ScrumTreeAddItem})();var Z=s(6040),y=s(5329),v=s(2644),b=s(4154),S=s(4664);const _=["scrum-tree-userstory",""],T=function(e){return{"slds-is-selected":e}};let D=(()=>{var e;class ScrumTreeUserStory{constructor(e,t,s,r){(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"model",void 0),(0,i.Z)(this,"modellist",void 0),(0,i.Z)(this,"scrum",void 0),(0,i.Z)(this,"userstory",{}),this.metadata=e,this.model=t,this.modellist=s,this.scrum=r}ngOnInit(){this.model.module="ScrumUserStories",this.model.initialize(),this.model.id=this.userstory.id,this.model.setData(this.userstory)}selectUserStory(e){e.stopPropagation(),this.scrum.selectedObject={id:this.userstory.id,type:"ScrumUserStories"}}ngOnDestroy(){this.scrum.selectedObject.id==this.userstory.id&&"ScrumUserStories"==this.scrum.selectedObject.type&&(this.scrum.selectedObject={id:void 0,type:""})}}return e=ScrumTreeUserStory,(0,i.Z)(ScrumTreeUserStory,"ɵfac",(function(t){return new(t||e)(a.Y36(b.Pu),a.Y36(p.o),a.Y36(v.t),a.Y36(h))})),(0,i.Z)(ScrumTreeUserStory,"ɵcmp",a.Xpm({type:e,selectors:[["","scrum-tree-userstory",""]],hostBindings:function(e,t){1&e&&a.NdJ("click",(function(e){return t.selectUserStory(e)}))},inputs:{userstory:"userstory"},features:[a._Bn([p.o])],attrs:_,decls:4,vars:4,consts:[[1,"slds-tree__item",3,"ngClass"],[1,"slds-has-flexi-truncate","slds-p-left--medium"],[1,"slds-tree__item-label","slds-truncate"]],template:function(e,t){1&e&&(a.TgZ(0,"div",0)(1,"span",1)(2,"span",2),a._uU(3),a.qZA()()()),2&e&&(a.Q6J("ngClass",a.VKq(2,T,t.userstory.id==t.scrum.selectedObject.id)),a.xp6(3),a.Oqu(t.userstory.name))},dependencies:[r.mk],encapsulation:2})),ScrumTreeUserStory})();const k=["scrum-tree-epic",""];function x(e,t){1&e&&a._UZ(0,"system-spinner",8)}function O(e,t){if(1&e&&a._UZ(0,"li",11),2&e){const e=t.$implicit;a.Q6J("userstory",e)}}function J(e,t){if(1&e){const e=a.EpF();a.TgZ(0,"ul",9),a.NdJ("cdkDropListDropped",(function(t){a.CHM(e);const s=a.oxw();return a.KtG(s.scrum.onDrop(t,"ScrumUserStories",s.userstories))})),a.YNc(1,O,1,1,"li",10),a.qZA()}if(2&e){const e=a.oxw();a.Q6J("cdkDropListData",e.userstories.items),a.xp6(1),a.Q6J("ngForOf",e.userstories.items)}}const L=function(e){return{"slds-is-selected":e}},Y=function(e){return{"slds-hidden":e}};let j=(()=>{var e;class ScrumTreeEpic{constructor(e,t,s,r,o,c){(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"model",void 0),(0,i.Z)(this,"modellist",void 0),(0,i.Z)(this,"scrum",void 0),(0,i.Z)(this,"userstories",void 0),(0,i.Z)(this,"userstoriesloaded",!1),(0,i.Z)(this,"expanded",!1),(0,i.Z)(this,"has_stories",void 0),(0,i.Z)(this,"disabled",!0),(0,i.Z)(this,"epic",{}),this.language=e,this.metadata=t,this.model=s,this.modellist=r,this.scrum=o,this.userstories=c}ngOnInit(){this.model.module="ScrumEpics",this.model.initialize(),this.model.id=this.epic.id,this.model.setData(this.epic),this.userstories.module=this.model.module,this.userstories.id=this.model.id,this.userstories.relatedModule="ScrumUserStories",this.model.module&&this.metadata.checkModuleAcl(this.model.module,"create")&&(this.disabled=!1),this.has_stories=this.model.getField("has_stories")}loadRelatedUserStories(){this.userstories.sort.sortfield="sequence",this.userstories.loaditems=-99,this.userstories.getData().subscribe((e=>{this.userstoriesloaded=!0}))}ngOnDestroy(){this.scrum.selectedObject.id==this.epic.id&&"ScrumEpics"==this.scrum.selectedObject.type&&(this.scrum.selectedObject={id:void 0,type:""})}toggleExpand(){this.userstoriesloaded||this.loadRelatedUserStories(),this.expanded=!this.expanded}selectEpic(e){e.stopPropagation(),this.scrum.selectedObject={id:this.epic.id,type:"ScrumEpics"}}loadChanges(e){this.has_stories=!0,this.loadRelatedUserStories()}get title(){return this.language.getLabel("LBL_ADD_USERSTORY")}}return e=ScrumTreeEpic,(0,i.Z)(ScrumTreeEpic,"ɵfac",(function(t){return new(t||e)(a.Y36(y.d),a.Y36(b.Pu),a.Y36(p.o),a.Y36(v.t),a.Y36(h),a.Y36(Z.j))})),(0,i.Z)(ScrumTreeEpic,"ɵcmp",a.Xpm({type:e,selectors:[["","scrum-tree-epic",""]],hostVars:1,hostBindings:function(e,t){1&e&&a.NdJ("click",(function(e){return t.selectEpic(e)})),2&e&&a.uIk("aria-expanded",t.expanded)},inputs:{epic:"epic"},features:[a._Bn([p.o,Z.j])],attrs:k,decls:9,vars:12,consts:[[1,"slds-tree__item",2,"align-items","center",3,"ngClass"],[1,"slds-button","slds-button-icon","slds-m-right_x-small",3,"disabled","ngClass","click"],[3,"icon"],[1,"slds-has-flexi-truncate"],[1,"slds-tree__item-label","slds-truncate"],["module","ScrumUserStories",3,"title","newitem"],["class","slds-p-around--xx-small",4,"ngIf"],["role","group","class","scrum-tree-epic-drop-list","cdkDropList","","cdkDropListLockAxis","y",3,"cdkDropListData","cdkDropListDropped",4,"ngIf"],[1,"slds-p-around--xx-small"],["role","group","cdkDropList","","cdkDropListLockAxis","y",1,"scrum-tree-epic-drop-list",3,"cdkDropListData","cdkDropListDropped"],["cdkDrag","","cdkDragBoundary",".scrum-tree-epic-drop-list","class","slds-drag--preview","style","list-style: none","scrum-tree-userstory","","aria-level","3","role","treeitem",3,"userstory",4,"ngFor","ngForOf"],["cdkDrag","","cdkDragBoundary",".scrum-tree-epic-drop-list","scrum-tree-userstory","","aria-level","3","role","treeitem",1,"slds-drag--preview",2,"list-style","none",3,"userstory"]],template:function(e,t){1&e&&(a.TgZ(0,"div",0)(1,"button",1),a.NdJ("click",(function(){return t.toggleExpand()})),a._UZ(2,"system-button-icon",2),a.qZA(),a.TgZ(3,"span",3)(4,"span",4),a._uU(5),a.qZA()(),a.TgZ(6,"scrum-tree-additem",5),a.NdJ("newitem",(function(e){return t.loadChanges(e)})),a.qZA()(),a.YNc(7,x,1,0,"system-spinner",6),a.YNc(8,J,2,2,"ul",7)),2&e&&(a.Q6J("ngClass",a.VKq(8,L,t.epic.id==t.scrum.selectedObject.id)),a.xp6(1),a.Q6J("disabled",!t.has_stories)("ngClass",a.VKq(10,Y,!t.has_stories)),a.xp6(1),a.Q6J("icon",t.userstories.isloading?"spinner":"chevronright"),a.xp6(3),a.Oqu(t.epic.name),a.xp6(1),a.Q6J("title",t.title),a.xp6(1),a.Q6J("ngIf",t.userstories.isloading&&t.has_stories),a.xp6(1),a.Q6J("ngIf",t.userstories.items.length>0))},dependencies:[r.mk,r.sg,r.O5,g.J,S.W,o.Wj,o.Zt,f,D],encapsulation:2})),ScrumTreeEpic})();const w=["scrum-tree-theme",""];function A(e,t){1&e&&a._UZ(0,"system-spinner",8)}function C(e,t){if(1&e&&a._UZ(0,"li",11),2&e){const e=t.$implicit;a.Q6J("epic",e)}}function U(e,t){if(1&e){const e=a.EpF();a.TgZ(0,"ul",9),a.NdJ("cdkDropListDropped",(function(t){a.CHM(e);const s=a.oxw();return a.KtG(s.scrum.onDrop(t,"ScrumEpics",s.epics))})),a.YNc(1,C,1,1,"li",10),a.qZA()}if(2&e){const e=a.oxw();a.Q6J("cdkDropListData",e.epics.items),a.xp6(1),a.Q6J("ngForOf",e.epics.items)}}const E=function(e){return{"slds-is-selected":e}},I=function(e){return{"slds-hidden":e}};let q=(()=>{var e;class ScrumTreeTheme{constructor(e,t,s,r,o,c,d){(0,i.Z)(this,"scrum",void 0),(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"modellist",void 0),(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"model",void 0),(0,i.Z)(this,"backend",void 0),(0,i.Z)(this,"epics",void 0),(0,i.Z)(this,"epicsloaded",!1),(0,i.Z)(this,"theme",{}),(0,i.Z)(this,"disabled",!0),(0,i.Z)(this,"expanded",!1),(0,i.Z)(this,"has_epics",void 0),this.scrum=e,this.language=t,this.modellist=s,this.metadata=r,this.model=o,this.backend=c,this.epics=d}get title(){return this.language.getLabel("LBL_ADD_EPIC")}ngOnInit(){this.model.module="ScrumThemes",this.model.initialize(),this.model.id=this.theme.id,this.model.setData(this.theme),this.epics.module=this.model.module,this.epics.id=this.model.id,this.epics.relatedModule="ScrumEpics",this.model.module&&this.metadata.checkModuleAcl(this.model.module,"create")&&(this.disabled=!1),this.has_epics=this.model.getField("has_epics")}ngOnDestroy(){this.scrum.selectedObject.id==this.theme.id&&"ScrumThemes"==this.scrum.selectedObject.type&&(this.scrum.selectedObject={id:void 0,type:""})}selectTheme(){this.scrum.selectedObject={id:this.theme.id,type:"ScrumThemes"}}loadRelatedEpics(){this.epics.sort.sortfield="sequence",this.epics.loaditems=-99,this.epics.getData().subscribe((e=>{this.epicsloaded=!0}))}toggleExpand(){this.epicsloaded||this.loadRelatedEpics(),this.expanded=!this.expanded}loadChanges(e){this.has_epics=!0,this.loadRelatedEpics()}}return e=ScrumTreeTheme,(0,i.Z)(ScrumTreeTheme,"ɵfac",(function(t){return new(t||e)(a.Y36(h),a.Y36(y.d),a.Y36(v.t),a.Y36(b.Pu),a.Y36(p.o),a.Y36(m.y),a.Y36(Z.j))})),(0,i.Z)(ScrumTreeTheme,"ɵcmp",a.Xpm({type:e,selectors:[["","scrum-tree-theme",""]],hostVars:1,hostBindings:function(e,t){1&e&&a.NdJ("click",(function(){return t.selectTheme()})),2&e&&a.uIk("aria-expanded",t.expanded)},inputs:{theme:"theme"},features:[a._Bn([p.o,Z.j])],attrs:w,decls:9,vars:12,consts:[[1,"slds-tree__item",2,"align-items","center",3,"ngClass"],[1,"slds-button","slds-button-icon","slds-m-right_x-small",3,"disabled","ngClass","click"],[3,"icon"],[1,"slds-has-flexi-truncate"],[1,"slds-tree__item-label","slds-truncate"],["module","ScrumEpics",3,"title","newitem"],["class","slds-p-around--xx-small",4,"ngIf"],["role","group","class","scrum-tree-theme-drop-list","cdkDropList","","cdkDropListLockAxis","y",3,"cdkDropListData","cdkDropListDropped",4,"ngIf"],[1,"slds-p-around--xx-small"],["role","group","cdkDropList","","cdkDropListLockAxis","y",1,"scrum-tree-theme-drop-list",3,"cdkDropListData","cdkDropListDropped"],["cdkDrag","","cdkDragBoundary",".scrum-tree-theme-drop-list","scrum-tree-epic","","aria-level","2","role","treeitem","class","slds-drag--preview","style","list-style: none",3,"epic",4,"ngFor","ngForOf"],["cdkDrag","","cdkDragBoundary",".scrum-tree-theme-drop-list","scrum-tree-epic","","aria-level","2","role","treeitem",1,"slds-drag--preview",2,"list-style","none",3,"epic"]],template:function(e,t){1&e&&(a.TgZ(0,"div",0)(1,"button",1),a.NdJ("click",(function(){return t.toggleExpand()})),a._UZ(2,"system-button-icon",2),a.qZA(),a.TgZ(3,"span",3)(4,"span",4),a._uU(5),a.qZA()(),a.TgZ(6,"scrum-tree-additem",5),a.NdJ("newitem",(function(e){return t.loadChanges(e)})),a.qZA()(),a.YNc(7,A,1,0,"system-spinner",6),a.YNc(8,U,2,2,"ul",7)),2&e&&(a.Q6J("ngClass",a.VKq(8,E,t.theme.id==t.scrum.selectedObject.id)),a.xp6(1),a.Q6J("disabled",!t.has_epics)("ngClass",a.VKq(10,I,!t.has_epics)),a.xp6(1),a.Q6J("icon",t.epics.isloading?"spinner":"chevronright"),a.xp6(3),a.Oqu(t.theme.name),a.xp6(1),a.Q6J("title",t.title),a.xp6(1),a.Q6J("ngIf",t.epics.isloading&&t.has_epics),a.xp6(1),a.Q6J("ngIf",t.epics.items.length>0))},dependencies:[r.mk,r.sg,r.O5,g.J,S.W,o.Wj,o.Zt,f,j],encapsulation:2})),ScrumTreeTheme})();var Q=s(2294),M=s(4044),N=s(6951);let B=(()=>{var e;class ScrumTreeDetail{constructor(e,t,s,r,o,c){(0,i.Z)(this,"scrum",void 0),(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"model",void 0),(0,i.Z)(this,"view",void 0),(0,i.Z)(this,"modal",void 0),(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"focusid",""),(0,i.Z)(this,"focustype",""),(0,i.Z)(this,"componentset",void 0),this.scrum=e,this.metadata=t,this.model=s,this.view=r,this.modal=o,this.language=c}ngOnChanges(){this.focusid&&this.focusid!=this.model.id?this.model.isDirty()?this.modal.confirm(this.language.getLabel("MSG_NAVIGATIONSTOP","","long"),this.language.getLabel("MSG_NAVIGATIONSTOP")).subscribe((e=>{e?(this.model.cancelEdit(),this.renderComponent(this.focusid)):this.scrum.selectedObject.id=this.model.id})):this.renderComponent(this.focusid):this.focusid||this.destroyContainer()}renderComponent(e){this.model.id=e,this.model.module=this.focustype,this.model.getData();let t=this.metadata.getComponentConfig("ScrumTreeDetail",this.model.module);this.componentset=t.componentset}destroyContainer(){this.componentset&&(this.componentset=null,this.model.reset())}get canEdit(){try{return this.model.checkAccess("edit")}catch(e){return!1}}}return e=ScrumTreeDetail,(0,i.Z)(ScrumTreeDetail,"ɵfac",(function(t){return new(t||e)(a.Y36(h),a.Y36(b.Pu),a.Y36(p.o),a.Y36(Q.e),a.Y36(M.o),a.Y36(y.d))})),(0,i.Z)(ScrumTreeDetail,"ɵcmp",a.Xpm({type:e,selectors:[["scrum-tree-detail"]],inputs:{focusid:"focusid",focustype:"focustype"},features:[a._Bn([p.o,Q.e]),a.TTD],decls:1,vars:1,consts:[[3,"componentset"]],template:function(e,t){1&e&&a._UZ(0,"system-componentset",0),2&e&&a.Q6J("componentset",t.componentset)},dependencies:[N.E],encapsulation:2})),ScrumTreeDetail})();var F=s(2646),G=s(1058),P=s(3194),R=s(4021);function V(e,t){if(1&e&&a._UZ(0,"li",3),2&e){const e=t.$implicit;a.Q6J("theme",e)}}let K=(()=>{var e;class ScrumTree{constructor(e,t){(0,i.Z)(this,"scrum",void 0),(0,i.Z)(this,"modellist",void 0),this.scrum=e,this.modellist=t}trackbyfn(e,t){return t.id}}return e=ScrumTree,(0,i.Z)(ScrumTree,"ɵfac",(function(t){return new(t||e)(a.Y36(h),a.Y36(v.t))})),(0,i.Z)(ScrumTree,"ɵcmp",a.Xpm({type:e,selectors:[["scrum-tree"]],decls:3,vars:2,consts:[[1,"slds-tree_container"],["role","tree",1,"slds-tree"],["role","treeitem","aria-level","1","scrum-tree-theme","",3,"theme",4,"ngFor","ngForOf","ngForTrackBy"],["role","treeitem","aria-level","1","scrum-tree-theme","",3,"theme"]],template:function(e,t){1&e&&(a.TgZ(0,"div",0)(1,"ul",1),a.YNc(2,V,1,1,"li",2),a.qZA()()),2&e&&(a.xp6(2),a.Q6J("ngForOf",t.modellist.listData.list)("ngForTrackBy",t.trackbyfn))},dependencies:[r.sg,q],encapsulation:2})),ScrumTree})();function X(e,t){if(1&e&&(a.TgZ(0,"div",6)(1,"system-illustration-no-data"),a._uU(2),a.qZA()()),2&e){const e=a.oxw();a.xp6(2),a.Oqu(e.text)}}let z=(()=>{var e;class ScrumMain{constructor(e,t,s){(0,i.Z)(this,"scrum",void 0),(0,i.Z)(this,"modellist",void 0),(0,i.Z)(this,"language",void 0),this.scrum=e,this.modellist=t,this.language=s,this.loadList()}loadList(){this.modellist.getListData()}get text(){return this.language.getLabel("LBL_SELECT_THEME")}}return e=ScrumMain,(0,i.Z)(ScrumMain,"ɵfac",(function(t){return new(t||e)(a.Y36(h),a.Y36(v.t),a.Y36(y.d))})),(0,i.Z)(ScrumMain,"ɵcmp",a.Xpm({type:e,selectors:[["scrum-main"]],features:[a._Bn([h])],decls:6,vars:4,consts:[["system-to-bottom-noscroll","",1,"slds-grid",3,"system-overlay-loading-spinner"],["system-to-bottom","",1,"slds-border--right","slds-theme_shade",2,"min-width","250px"],["role","tree"],["system-to-bottom","",1,"slds-grow"],["class","slds-align_absolute-center","system-to-bottom-noscroll","",4,"ngIf"],[3,"focusid","focustype"],["system-to-bottom-noscroll","",1,"slds-align_absolute-center"]],template:function(e,t){1&e&&(a.TgZ(0,"div",0)(1,"div",1),a._UZ(2,"scrum-tree",2),a.qZA(),a.TgZ(3,"div",3),a.YNc(4,X,3,1,"div",4),a._UZ(5,"scrum-tree-detail",5),a.qZA()()),2&e&&(a.Q6J("system-overlay-loading-spinner",t.modellist.isLoading),a.xp6(4),a.Q6J("ngIf",!t.scrum.selectedObject.id&&!t.modellist.isLoading),a.xp6(1),a.Q6J("focusid",t.scrum.selectedObject.id)("focustype",t.scrum.selectedObject.type))},dependencies:[r.O5,F.t,G.H,P.t,R._,K,B],encapsulation:2})),ScrumMain})(),$=(()=>{var e;class ModuleScrum{}return e=ModuleScrum,(0,i.Z)(ModuleScrum,"ɵfac",(function(t){return new(t||e)})),(0,i.Z)(ModuleScrum,"ɵmod",a.oAB({type:e})),(0,i.Z)(ModuleScrum,"ɵinj",a.cJS({providers:[h],imports:[r.ez,c.ObjectFields,d.GlobalComponents,n.ObjectComponents,l.SystemComponents,u.o,o._t]})),ModuleScrum})();("undefined"==typeof ngJitMode||ngJitMode)&&a.kYT($,{declarations:[z,K,f,q,j,D,B],imports:[r.ez,c.ObjectFields,d.GlobalComponents,n.ObjectComponents,l.SystemComponents,u.o,o._t]})}}]);