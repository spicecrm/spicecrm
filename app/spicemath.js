/*!
 * 
 *                     SpiceCRM
 *
 *                     release: 2024.01.001
 *
 *                     date: 2024-06-07 18:53:45
 *
 *                     build: 2024.01.001.1717779225604
 *
 */
"use strict";(self.webpackChunkcore=self.webpackChunkcore||[]).push([["src_include_spicemath_spicemath_ts"],{70338:(t,i,s)=>{s.r(i),s.d(i,{ModuleSpiceMath:()=>G});var e=s(60177),n=s(84341),l=s(71341),o=s(7745),a=s(12948),h=s(37328),r=s(70569),c=s(54438),u=s(49969),d=s(48849),p=s(25863);const f=["mainDisParent"],m=["mainDis2"],v=["subDisParent"],g=["subDis2"];function b(t,i){if(1&t){const t=c.RV6();c.j41(0,"div",36)(1,"button",37),c.bIt("click",(function(){const i=c.eBV(t).$implicit,s=c.XpG(2);return c.Njj(s.restoreHistory(s.history.indexOf(i)))})),c.j41(2,"span",38),c.EFF(3),c.k0s(),c.j41(4,"span",39),c.EFF(5),c.k0s()()()}if(2&t){const t=i.$implicit;c.R7$(3),c.JRh(t.mainDisplay),c.R7$(2),c.JRh(t.value)}}function k(t,i){if(1&t){const t=c.RV6();c.j41(0,"div",29)(1,"div",30)(2,"div",31)(3,"button",32),c.bIt("click",(function(){c.eBV(t);const i=c.XpG();return c.Njj(i.deleteHistory())})),c.nrm(4,"system-button-icon",33),c.k0s()(),c.j41(5,"div",34),c.DNE(6,b,6,2,"div",35),c.k0s()()()}if(2&t){const t=c.XpG();c.Y8G("@slideInOutHistory",t.historyState),c.R7$(6),c.Y8G("ngForOf",t.history)}}function y(t,i){if(1&t){const t=c.RV6();c.j41(0,"button",40),c.bIt("click",(function(){c.eBV(t);const i=c.XpG();return c.Njj(i.slideHistory())})),c.nrm(1,"system-button-icon",41),c.k0s()}}function S(t,i){if(1&t){const t=c.RV6();c.qSk(),c.joV(),c.j41(0,"button",42),c.bIt("click",(function(){c.eBV(t);const i=c.XpG();return c.Njj(i.slideHistory())})),c.nrm(1,"system-button-icon",41),c.k0s()}}function x(t,i){if(1&t){const t=c.RV6();c.j41(0,"button",47),c.bIt("click",(function(){const i=c.eBV(t).$implicit,s=c.XpG(2);return c.Njj(s.restoreHistory(s.history.indexOf(i)))})),c.j41(1,"span",38),c.EFF(2),c.k0s(),c.j41(3,"span",39),c.EFF(4),c.k0s()()}if(2&t){const t=i.$implicit;c.R7$(2),c.JRh(t.mainDisplay),c.R7$(2),c.JRh(t.value)}}function j(t,i){if(1&t){const t=c.RV6();c.qSk(),c.joV(),c.j41(0,"div")(1,"div",43),c.DNE(2,x,5,2,"button",44),c.k0s(),c.j41(3,"div",45)(4,"button",46),c.bIt("click",(function(){c.eBV(t);const i=c.XpG();return c.Njj(i.deleteHistory())})),c.nrm(5,"system-button-icon",33),c.k0s()()()}if(2&t){const t=c.XpG();c.Y8G("@slideInOutHistory",t.historyState),c.R7$(2),c.Y8G("ngForOf",t.history)}}const C=(t,i)=>({"slds-grid":t,"slds-grid--vertical":i,"slds-height_full":!0});let D=(()=>{class SpiceCalculator{constructor(t,i,s){this.cdRef=t,this.userPreferences=i,this.el=s,this.history=[],this.fontSizeSub="300%",this.fontSizeMain="250%",this.mainDisplayText="",this.showHistory=!1,this.fromModal=!1,this.negateCheck=!1,this.size=!1,this.check=!1,this.opCheck=!1,this.focus=!1,this.dotCheck=!1,this.numCount=0,this._value="",this.decimalSeparator=this.userPreferences.toUse.dec_sep??".",this.separator=","===this.decimalSeparator?".":","}get value(){return this._value}set value(t){"number"==typeof t&&(t=t.toString()),this._value=t,this.onChange(t)}slideHistory(t=!0){if(this.showHistory=!this.showHistory,this.size?(this.historyState=this.showHistory?"openTop":"closedTop",this.cdRef.detectChanges()):(this.historyState=this.showHistory?"openRight":"closedRight",this.cdRef.detectChanges()),t){for(let t=1;t<=10;t++)setTimeout((()=>this.sizeCheck("dynamicWidth")),40*t);setTimeout((()=>this.handleFontSize()),400)}}ngAfterViewInit(){setTimeout((()=>this.sizeCheck("all")),10),this.showHistory=!this.showHistory,this.slideHistory(),"modal"===this.el.nativeElement.parentElement.id&&(this.focus=!0,this.fromModal=!0)}sizeCheck(t){const i="0 0 "+this.subDis1.nativeElement.getBoundingClientRect().width.toString()+" "+this.subDis1.nativeElement.getBoundingClientRect().height.toString();if("dynamicWidth"===t){if(this.mainDis1.nativeElement.attributes.viewBox.value===i)return;return this.mainDis1.nativeElement.attributes.viewBox.value=i,this.subDis1.nativeElement.attributes.viewBox.value=i,this.handleFontSize(),this.sizeCheck("dynamicWidth")}this.mainDis1.nativeElement.attributes.viewBox.value=i,this.subDis1.nativeElement.attributes.viewBox.value=i,this.handleFontSize(),void 0!==this.el.nativeElement&&(this.el.nativeElement.getBoundingClientRect().width<=375&&!this.size?(this.size=!0,this.showHistory=!this.showHistory,setTimeout((()=>this.slideHistory(!1)),10)):this.el.nativeElement.getBoundingClientRect().width>375&&this.size&&(this.size=!1,this.showHistory=!this.showHistory,setTimeout((()=>this.slideHistory(!1)),10)))}deleteHistory(){this.history=[]}registerOnChange(t){this.onChange=t}registerOnTouched(t){}writeValue(t){this._value=null!=t?this.setSeparators(t):"",this.cdRef.detectChanges()}delete(){if(-1!==this.value.search(/Infinity/)||"Undefined Result"===this.value||this.check||""===this.value&&""===this.mainDisplayText)return;const t=this.value.slice(0,-1);""===this.value?(this.value=this.mainDisplayText.slice(0,-1),this.mainDisplayText="",this.negateCheck=!0,this.dotCheck=2===this.value.split(this.decimalSeparator).length,this.numCount=this.mainDisplayText.slice(0,-1).split(this.separator).join("").split(this.decimalSeparator).join("").length,this.opCheck=!1):1===this.value.length?(this.negateCheck=!1,this.value=""):(t===this.decimalSeparator&&(this.dotCheck=!1),this.value=this.setSeparators(this.value.slice(0,-1))),isNaN(parseFloat(t))||(this.numCount-=1),this.subDis2.nativeElement.attributes["font-size"].value=this.fontSizeSub,this.handleOverflow("sub")}onKeyPress(t){if(-1!==this.value.search(/Infinity/)||"Undefined Result"===this.value){if(t===this.mainDisplayText[this.opPosition-1])this.value="",this.mainDisplayText=this.mainDisplayText.slice(0,this.opPosition-1)+t,this.negateCheck=!1,this.numCount=0;else{if(isNaN(t))return;isNaN(t)||(this.value=t,this.mainDisplayText=this.mainDisplayText.slice(0,this.opPosition),this.negateCheck=!0,this.numCount=1)}return this.check=!1,this.dotCheck=!1,this.subDis2.nativeElement.attributes["font-size"].value=this.fontSizeSub,this.mainDis2.nativeElement.attributes["font-size"].value=this.fontSizeMain,void setTimeout((()=>this.handleOverflow("main")),10)}const i=this.value?this.value.slice(-1):this.mainDisplayText?this.mainDisplayText.slice(-1):"";if(t!==this.decimalSeparator||!this.check){if("-"!==t||this.negateCheck){if(-1!==["+","*","/","-"].indexOf(t)){if(this.value.slice(-1)===this.decimalSeparator)return;if(-1!==["+","*","/","-",""].indexOf(i)){if("-"===t||""===i||""!==this.value)return;return void(this.mainDisplayText=this.mainDisplayText.slice(0,-1)+t)}{this.check&&!parseFloat(t)&&(this.mainDisplayText="");const i=this.calculate("operator");return-1!==["Infinity","-Infinity","Undefined Result"].indexOf(i)?void(this.check=!0):(this.mainDisplayText=(this.opCheck?this.calculate("operator"):this.value)+t,this.value="",this.opPosition=this.mainDisplayText.length,this.opCheck=!0,this.negateCheck=!1,this.dotCheck=!1,this.check=!1,this.numCount=0,this.subDis2.nativeElement.attributes["font-size"].value=this.fontSizeSub,this.mainDis2.nativeElement.attributes["font-size"].value=this.fontSizeMain,void setTimeout((()=>this.handleOverflow("main")),10))}}if(-1!==["+","*","/","-","",this.decimalSeparator].indexOf(i)&&t===this.decimalSeparator||this.dotCheck&&t===this.decimalSeparator||this.numCount>=16)return;if(this.check)this.setSettings("default"),this.value=t,this.negateCheck=!0,this.numCount=1;else if("0"!==i||this.dotCheck||1!==this.value.length)t===this.decimalSeparator&&(this.dotCheck=!0,this.numCount-=1),this.value+=t,this.negateCheck=!0,this.numCount+=1;else{if("0"===t)return;isNaN(parseInt(t))?this.value+=t:this.value=t}}else this.value+="-",this.negateCheck=!0;0===this.history.length&&setTimeout((()=>this.handleFontSize()),10),this.value=this.setSeparators(this.value),setTimeout((()=>this.handleOverflow("sub")),10)}}calculate(t){let i,s,e,n=this.mainDisplayText[this.opPosition-1];if(""!==this.value&&""!==this.mainDisplayText&&-1===this.value.search(/Infinity/)&&"Undefined Result"!==this.value&&this.value.slice(0,-1)!==this.decimalSeparator&&!isNaN(parseInt(this.value[this.value.length-1]))){switch(this.check?(i=parseFloat(this.value.split(this.separator).join("").split(this.decimalSeparator).join(".")),s=parseFloat(this.mainDisplayText.slice(this.opPosition,-1).split(this.separator).join("").split(this.decimalSeparator).join(".")),this.mainDisplayText=this.value+n+this.mainDisplayText.substring(this.opPosition),this.opPosition=this.value.length+1):(i=parseFloat(this.mainDisplayText.slice(0,-1).split(this.separator).join("").split(this.decimalSeparator).join(".")),s=parseFloat(this.value.split(this.separator).join("").split(this.decimalSeparator).join(".")),this.mainDisplayText+=this.value+"="),n){case"+":e=i+s;break;case"-":e=i-s;break;case"*":e=i*s;break;case"/":e=i/s;break;default:console.log("calculation Error")}if(isNaN(e)||e===1/0?(e=isNaN(e)?"Undefined Result":"Infinity",this.value=e):e=this.setSeparators(this.checkZeros(e.toString()).split(".").join(this.decimalSeparator)),"operator"===t)return this.value=e,this.check=!1,this.addToHistory(),e;this.setSettings("calculation"),this.value=e,this.addToHistory(),setTimeout((()=>{this.handleOverflow("main"),this.handleOverflow("sub")}),10)}}setSettings(t){switch(t){case"default":this.mainDisplayText="",this.value="",this.opPosition=null,this.check=!1,this.negateCheck=!1,this.opCheck=!1,this.dotCheck=!1,this.numCount=0,this.subDis2.nativeElement.attributes["font-size"].value=this.fontSizeSub,this.mainDis2.nativeElement.attributes["font-size"].value=this.fontSizeMain;break;case"calculation":this.check=!0,this.negateCheck=!0,this.opCheck=!1,this.dotCheck=!1,this.numCount=0,this.subDis2.nativeElement.attributes["font-size"].value=this.fontSizeSub,this.mainDis2.nativeElement.attributes["font-size"].value=this.fontSizeMain;break;case"value":this.check&&this.setSettings("default"),this.value="",this.negateCheck=!1,this.dotCheck=!1,this.subDis2.nativeElement.attributes["font-size"].value=this.fontSizeSub}}onClick(t){this.fromModal||(this.focus=this.el.nativeElement.contains(t))}KeyEvent(t){if(!this.focus)return;if("c"===t.key&&t.ctrlKey)navigator.clipboard.writeText(this.value).then(),t.preventDefault();else if("-"===t.key&&t.ctrlKey)this.negate(),t.preventDefault();else if(t.ctrlKey&&"e"===t.key)this.setSettings("value"),t.preventDefault();else{if(t.ctrlKey)return;-1!==["1","2","3","4","5","6","7","8","9","0"].indexOf(t.key)||-1!==["+","*","/","-",this.decimalSeparator].indexOf(t.key)?(this.onKeyPress(t.key),t.preventDefault()):"Enter"===t.key?(this.calculate("enter"),t.preventDefault()):"c"===t.key||"C"===t.key?(this.setSettings("default"),t.preventDefault()):"Backspace"===t.key&&(this.delete(),t.preventDefault())}}handleOverflow(t){if("sub"===t){const i=this.subDis1.nativeElement.getBoundingClientRect().width,s=this.subDis2.nativeElement.getBoundingClientRect().width,e=parseFloat(this.subDis2.nativeElement.attributes["font-size"].value.slice(0,-1));if(i-5<=s)return this.subDis2.nativeElement.attributes["font-size"].value=(.99*e).toString()+"%",this.handleOverflow(t)}else{const i=this.mainDis1.nativeElement.getBoundingClientRect().width,s=this.mainDis2.nativeElement.getBoundingClientRect().width,e=parseFloat(this.mainDis2.nativeElement.attributes["font-size"].value.slice(0,-1));if(i-5<=s)return this.mainDis2.nativeElement.attributes["font-size"].value=(.99*e).toString()+"%",this.handleOverflow(t)}}handleFontSize(){const t=parseFloat(this.fontSizeSub.slice(0,-1));return 0!==this.subDis2.nativeElement.getBoundingClientRect().height&&this.subDis2.nativeElement.getBoundingClientRect().height<.9*this.subDis1.nativeElement.getBoundingClientRect().height?(this.fontSizeSub=(1.1*t).toString()+"%",this.subDis2.nativeElement.attributes["font-size"].value=this.fontSizeSub,this.fontSizeMain=(.8*t).toString()+"%",this.mainDis2.nativeElement.attributes["font-size"].value=(.8*t).toString()+"%",this.handleFontSize()):this.subDis2.nativeElement.getBoundingClientRect().height>1.1*this.subDis1.nativeElement.getBoundingClientRect().height?(this.fontSizeSub=(.9*t).toString()+"%",this.subDis2.nativeElement.attributes["font-size"].value=this.fontSizeSub,this.fontSizeMain=(.8*t).toString()+"%",this.mainDis2.nativeElement.attributes["font-size"].value=(.8*t).toString()+"%",this.handleFontSize()):void 0}restoreHistory(t){this.setSettings("calculation"),this.value=this.history[t].value,this.mainDisplayText=this.history[t].mainDisplay}addToHistory(){this.history.unshift({value:this.value,mainDisplay:this.mainDisplayText})}negate(){-1===this.value.search(/Infinity/)&&"Undefined Result"!==this.value&&this.check&&(this.value=this.setSeparators((-1*parseFloat(this.value.split(this.decimalSeparator).join("."))).toString().split(".").join(this.decimalSeparator)))}percent(){if(!this.opCheck||["-","+","*","/"].indexOf(this.mainDisplayText.slice(-1))&&!this.value)return;let t=parseFloat(this.value.split(this.separator).join("").split(this.decimalSeparator).join("."))/100;if("+"===this.mainDisplayText[this.opPosition-1]||"-"===this.mainDisplayText[this.opPosition-1]){const i=this.mainDisplayText.slice(0,-1).split(this.separator).join("").split(this.decimalSeparator).join(".");t=parseFloat(i)*t}this.value=this.setSeparators(t.toString().split(".").join(this.decimalSeparator)),this.dotCheck=-1!==this.value.indexOf(this.decimalSeparator),setTimeout((()=>{this.handleOverflow("sub"),this.handleOverflow("main")}),10)}setSeparators(t){if(-1!==t.search(/Infinity/)||"Undefined Result"===t)return t;let i=t.split(this.decimalSeparator);"-"===t[0]&&(i=t.substring(1).split(this.decimalSeparator)),-1!==t.search(/e[+]\d+/)&&(i=t.substring(0,t.search(/e[+]\d+/)).split(this.decimalSeparator));let s=i[0].length;i[0].split(this.separator).join("");return s>3?(i[0]=this.userPreferences.formatMoney(parseFloat(i[0].replace(this.separator,"")),0),("-"===t[0]?"-":"")+i.join(this.decimalSeparator)):t}checkZeros(t){if(-1!==t.indexOf(this.decimalSeparator)){const i=t.substring(0,t.indexOf(this.decimalSeparator)),s=t.substring(t.indexOf(this.decimalSeparator));t=-1!==t.search(/000000/)?i+s.substring(0,s.search(/000000/)):t}return t}static#t=this.ɵfac=function(t){return new(t||SpiceCalculator)(c.rXU(c.gRc),c.rXU(d.S),c.rXU(c.aKT))};static#i=this.ɵcmp=c.VBU({type:SpiceCalculator,selectors:[["spice-calculator"]],viewQuery:function(t,i){if(1&t&&(c.GBs(f,5),c.GBs(m,5),c.GBs(v,5),c.GBs(g,5)),2&t){let t;c.mGM(t=c.lsd())&&(i.mainDis1=t.first),c.mGM(t=c.lsd())&&(i.mainDis2=t.first),c.mGM(t=c.lsd())&&(i.subDis1=t.first),c.mGM(t=c.lsd())&&(i.subDis2=t.first)}},hostBindings:function(t,i){1&t&&c.bIt("click",(function(t){return i.onClick(t.target)}),!1,c.tSv)("keydown",(function(t){return i.KeyEvent(t)}),!1,c.tSv)},features:[c.Jv_([{multi:!0,provide:n.kq,useExisting:(0,c.Rfq)((()=>SpiceCalculator))}])],decls:133,vars:13,consts:[[3,"ngClass"],["class","slds-size_1-of-1 slds-grid slds-grid--vertical","style","height: 5%;overflow: hidden; display:flex",4,"ngIf"],["class","slds-button slds-button_icon slds-button_icon slds-split-view__toggle-button slds-size_1-of-1","style","height: 4%; position: unset",3,"click",4,"ngIf"],[1,"slds-grid","slds-size--1-of-1","slds-height_full"],[1,"slds-grid","slds-grid--vertical","slds-m-around--small"],[1,"slds-p-bottom--xxx-small",2,"height","30%"],[1,"slds-has-dividers_around-space","slds-height_full"],[1,"slds-grid","slds-grid--vertical","slds-item","slds-height_full"],[2,"height","50%"],["id","subDis1","preserveAspectRatio","xMidYMid meet","width","100%","height","100%","viewBox","0 0 1 1",1,"slds-p-around--none","slds-m-around--none"],["mainDisParent",""],["x","100%","y","50%","text-anchor","end","dominant-baseline","central","font-size","150%"],["mainDis2",""],["subDisParent",""],["id","subDis2","x","100%","y","50%","text-anchor","end","dominant-baseline","central","font-size","300%"],["subDis2",""],[1,"slds-grid","slds-grid--vertical","slds-gutters_direct-xxx-small",2,"height","70%"],[1,"slds-grid","slds-gutters_direct-xxx-small","slds-height_full",2,"height","20%"],[1,"slds-col","slds-size_1-of-6","slds-p-top--xxx-small","slds-p-bottom--xxx-small","slds-height_full"],[1,"slds-button","slds-button_neutral","slds-size--1-of-1","slds-height_full","slds-p-around--none",3,"click"],["preserveAspectRatio","xMidYMid meet","width","100%","height","100%","viewBox","0 0 1 1",1,"ng-tns-c1-1","slds-p-around--none","slds-m-around--none"],["x","50%","y","50%","text-anchor","middle","dominant-baseline","central","font-size","4%"],[1,"slds-button","slds-button_neutral","slds-size--1-of-1","slds-height_full","slds-p-around--none",2,"font-size","100%",3,"click"],[1,"slds-button","slds-button--icon","slds-button--icon-border","slds-size--1-of-1","slds-height_full",3,"click"],[1,"slds-col","slds-size_1-of-4","slds-p-top--xxx-small","slds-p-bottom--xxx-small","slds-height_full"],[1,"slds-button","slds-button--icon","slds-button--icon-border","slds-size--1-of-1","slds-height_full",2,"font-size","100%",3,"click"],[1,"slds-col","slds-size_1-of-4","slds-p-top--xxx-small","slds-height_full"],["class","slds-button slds-button_icon slds-button_icon slds-split-view__toggle-button slds-is-open","style","width: 3%; position: unset",3,"click",4,"ngIf"],[4,"ngIf"],[1,"slds-size_1-of-1","slds-grid","slds-grid--vertical",2,"height","5%","overflow","hidden","display","flex"],[1,"slds-grid","slds-height_full"],[1,"slds-m-around--xxx-small",2,"width","5%"],[1,"slds-button","slds-size--1-of-1","slds-height_full",3,"click"],["icon","delete",1,"slds-align--absolute-center"],[1,"slds-grid","slds-grid--vertical","slds-scrollable--y","slds-p-around--xx-small",2,"width","95%","display","flex","flex-direction","column-reverse"],["class","slds-m-around--xxx-small",4,"ngFor","ngForOf"],[1,"slds-m-around--xxx-small"],[1,"slds-button","slds-button_neutral","slds-grid","slds-grid--vertical","slds-p-around--x-small","slds-size--1-of-1",3,"click"],[1,"slds-text-heading--small","slds-size--1-of-1","slds-text-align--right",2,"overflow","hidden","font-size","0.75rem","float","right"],[1,"slds-text-heading_medium","slds-size--1-of-1","slds-text-align--right",2,"overflow","hidden","font-size","1rem","float","right"],[1,"slds-button","slds-button_icon","slds-button_icon","slds-split-view__toggle-button","slds-size_1-of-1",2,"height","4%","position","unset",3,"click"],["icon","refresh",2,"transform","scale(-0.75, 0.75)"],[1,"slds-button","slds-button_icon","slds-button_icon","slds-split-view__toggle-button","slds-is-open",2,"width","3%","position","unset",3,"click"],[1,"slds-grid","slds-grid--vertical","slds-scrollable--y","slds-p-around--xx-small",2,"height","95%","width","100%"],["class","slds-button slds-button_neutral slds-grid slds-grid--vertical slds-p-around--x-small slds-size--1-of-1 slds-m-around--xxx-small slds-m-left--none",3,"click",4,"ngFor","ngForOf"],[1,"slds-p-around--xxx-small",2,"height","5%"],[1,"slds-size--1-of-1","slds-button","slds-height_full",2,"float","right",3,"click"],[1,"slds-button","slds-button_neutral","slds-grid","slds-grid--vertical","slds-p-around--x-small","slds-size--1-of-1","slds-m-around--xxx-small","slds-m-left--none",3,"click"]],template:function(t,i){1&t&&(c.j41(0,"div",0),c.DNE(1,k,7,2,"div",1)(2,y,2,0,"button",2),c.j41(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"div",7)(8,"div",8),c.qSk(),c.j41(9,"svg",9,10)(11,"text",11,12),c.EFF(13),c.k0s()()(),c.joV(),c.j41(14,"div",8),c.qSk(),c.j41(15,"svg",9,13)(17,"text",14,15),c.EFF(19),c.k0s()()()()()(),c.joV(),c.j41(20,"div",16)(21,"div",17)(22,"div",18)(23,"button",19),c.bIt("click",(function(){return i.setSettings("value")})),c.qSk(),c.j41(24,"svg",20)(25,"text",21),c.EFF(26,"CE"),c.k0s()()()(),c.joV(),c.j41(27,"div",18)(28,"button",22),c.bIt("click",(function(){return i.setSettings("default")})),c.qSk(),c.j41(29,"svg",20)(30,"text",21),c.EFF(31,"C"),c.k0s()()()(),c.joV(),c.j41(32,"div",18)(33,"button",23),c.bIt("click",(function(){return i.percent()})),c.qSk(),c.j41(34,"svg",20)(35,"text",21),c.EFF(36,"%"),c.k0s()()()(),c.joV(),c.j41(37,"div",24)(38,"button",25),c.bIt("click",(function(){return i.delete()})),c.qSk(),c.j41(39,"svg",20)(40,"text",21),c.EFF(41,"←"),c.k0s()()()(),c.joV(),c.j41(42,"div",24)(43,"button",22),c.bIt("click",(function(){return i.onKeyPress("/")})),c.qSk(),c.j41(44,"svg",20)(45,"text",21),c.EFF(46,"/"),c.k0s()()()()(),c.joV(),c.j41(47,"div",17)(48,"div",24)(49,"button",19),c.bIt("click",(function(){return i.onKeyPress("7")})),c.qSk(),c.j41(50,"svg",20)(51,"text",21),c.EFF(52,"7"),c.k0s()()()(),c.joV(),c.j41(53,"div",24)(54,"button",19),c.bIt("click",(function(){return i.onKeyPress("8")})),c.qSk(),c.j41(55,"svg",20)(56,"text",21),c.EFF(57,"8"),c.k0s()()()(),c.joV(),c.j41(58,"div",24)(59,"button",19),c.bIt("click",(function(){return i.onKeyPress("9")})),c.qSk(),c.j41(60,"svg",20)(61,"text",21),c.EFF(62,"9"),c.k0s()()()(),c.joV(),c.j41(63,"div",24)(64,"button",19),c.bIt("click",(function(){return i.onKeyPress("*")})),c.qSk(),c.j41(65,"svg",20)(66,"text",21),c.EFF(67,"*"),c.k0s()()()()(),c.joV(),c.j41(68,"div",17)(69,"div",24)(70,"button",19),c.bIt("click",(function(){return i.onKeyPress("4")})),c.qSk(),c.j41(71,"svg",20)(72,"text",21),c.EFF(73,"4"),c.k0s()()()(),c.joV(),c.j41(74,"div",24)(75,"button",19),c.bIt("click",(function(){return i.onKeyPress("5")})),c.qSk(),c.j41(76,"svg",20)(77,"text",21),c.EFF(78,"5"),c.k0s()()()(),c.joV(),c.j41(79,"div",24)(80,"button",19),c.bIt("click",(function(){return i.onKeyPress("6")})),c.qSk(),c.j41(81,"svg",20)(82,"text",21),c.EFF(83,"6"),c.k0s()()()(),c.joV(),c.j41(84,"div",24)(85,"button",19),c.bIt("click",(function(){return i.onKeyPress("-")})),c.qSk(),c.j41(86,"svg",20)(87,"text",21),c.EFF(88,"-"),c.k0s()()()()(),c.joV(),c.j41(89,"div",17)(90,"div",24)(91,"button",19),c.bIt("click",(function(){return i.onKeyPress("1")})),c.qSk(),c.j41(92,"svg",20)(93,"text",21),c.EFF(94,"1"),c.k0s()()()(),c.joV(),c.j41(95,"div",24)(96,"button",19),c.bIt("click",(function(){return i.onKeyPress("2")})),c.qSk(),c.j41(97,"svg",20)(98,"text",21),c.EFF(99,"2"),c.k0s()()()(),c.joV(),c.j41(100,"div",24)(101,"button",19),c.bIt("click",(function(){return i.onKeyPress("3")})),c.qSk(),c.j41(102,"svg",20)(103,"text",21),c.EFF(104,"3"),c.k0s()()()(),c.joV(),c.j41(105,"div",24)(106,"button",19),c.bIt("click",(function(){return i.onKeyPress("+")})),c.qSk(),c.j41(107,"svg",20)(108,"text",21),c.EFF(109,"+"),c.k0s()()()()(),c.joV(),c.j41(110,"div",17)(111,"div",26)(112,"button",19),c.bIt("click",(function(){return i.negate()})),c.qSk(),c.j41(113,"svg",20)(114,"text",21),c.EFF(115,"(-)"),c.k0s()()()(),c.joV(),c.j41(116,"div",26)(117,"button",19),c.bIt("click",(function(){return i.onKeyPress("0")})),c.qSk(),c.j41(118,"svg",20)(119,"text",21),c.EFF(120,"0"),c.k0s()()()(),c.joV(),c.j41(121,"div",26)(122,"button",19),c.bIt("click",(function(){return i.onKeyPress(i.decimalSeparator)})),c.qSk(),c.j41(123,"svg",20)(124,"text",21),c.EFF(125),c.k0s()()()(),c.joV(),c.j41(126,"div",26)(127,"button",19),c.bIt("click",(function(){return i.calculate("enter")})),c.qSk(),c.j41(128,"svg",20)(129,"text",21),c.EFF(130,"="),c.k0s()()()()()()(),c.DNE(131,S,2,0,"button",27)(132,j,6,2,"div",28),c.k0s()()),2&t&&(c.Y8G("ngClass",c.l_i(10,C,i.size,i.size)),c.R7$(),c.Y8G("ngIf",i.size),c.R7$(),c.Y8G("ngIf",i.size),c.R7$(),c.Y8G("@slideInOutCalculatorTop",i.size?i.historyState:"ClosedCompletely"),c.R7$(),c.Y8G("@slideInOutCalculatorRight",i.size?"closedRightCompletely":i.historyState),c.R7$(9),c.JRh(i.mainDisplayText),c.R7$(6),c.SpI(" ",i.value," "),c.R7$(106),c.JRh(i.decimalSeparator),c.R7$(6),c.Y8G("ngIf",!i.size),c.R7$(),c.Y8G("ngIf",!i.size))},dependencies:[e.YU,e.Sq,e.bT,p.t],encapsulation:2,data:{animation:[(0,u.hZ)("slideInOutCalculatorRight",[(0,u.wk)("openRight",(0,u.iF)({width:"67%","margin-right":"12px"})),(0,u.wk)("closedRight",(0,u.iF)({width:"100%","margin-right":"12px"})),(0,u.wk)("closedRightCompletely",(0,u.iF)({width:"100%","margin-right":"12px"})),(0,u.kY)("openRight <=> closedRight",[(0,u.i0)("400ms")]),(0,u.kY)("openRight <=> closedRightCompletely",[(0,u.i0)("400ms")])]),(0,u.hZ)("slideInOutCalculatorTop",[(0,u.wk)("closedTop",(0,u.iF)({width:"100%",height:"95%"})),(0,u.wk)("ClosedCompletely",(0,u.iF)({height:"100%"})),(0,u.wk)("openTop",(0,u.iF)({width:"100%",height:"66%"})),(0,u.kY)("openTop <=> closedTop",[(0,u.i0)("400ms")]),(0,u.kY)("openTop <=> closedCompletely",[(0,u.i0)("400ms")])]),(0,u.hZ)("slideInOutHistory",[(0,u.wk)("openRight",(0,u.iF)({width:"30%","padding-left":"4px"})),(0,u.wk)("closedRight",(0,u.iF)({width:"0%","padding-left":"0"})),(0,u.wk)("closedRightCompletely",(0,u.iF)({width:"100%","padding-right":0})),(0,u.wk)("closedTop",(0,u.iF)({height:0})),(0,u.wk)("openTop",(0,u.iF)({height:"30%"})),(0,u.kY)("openTop <=> closedTop",[(0,u.i0)("400ms")]),(0,u.kY)("openRight <=> closedRight",[(0,u.i0)("400ms")])]),(0,u.hZ)("slideInOutHistoryPanelTop",[(0,u.wk)("closedTop",(0,u.iF)({height:"0",padding:0})),(0,u.wk)("openTop",(0,u.iF)({height:"100%",padding:"4px"})),(0,u.kY)("openTop <=> closedTop",[(0,u.i0)("400ms")])])]},changeDetection:0})}return SpiceCalculator})();var z=s(21413),F=s(32062),w=s(40713),R=s(25028),E=s(88418),_=s(10063);const T=["calculator"];function I(t,i){if(1&t){const t=c.RV6();c.j41(0,"button",7),c.bIt("click",(function(){c.eBV(t);const i=c.XpG();return c.Njj(i.cancel())})),c.nrm(1,"system-label",8),c.k0s()}}function M(t,i){if(1&t){const t=c.RV6();c.j41(0,"button",9),c.bIt("click",(function(){c.eBV(t);const i=c.XpG();return c.Njj(i.apply())})),c.nrm(1,"system-label",10),c.k0s()}}let V=(()=>{class SpiceCalculatorModal{constructor(t){this.userPreferences=t,this.trigger=!1,this.valueSubject=new z.B,this.value$=this.valueSubject.asObservable(),this.decimalSeparator=this.userPreferences.toUse.dec_sep??".",this.seperator=","===this.decimalSeparator?".":","}cancel(){this.self.destroy()}setValue(t){this.value=t}apply(){this.valueSubject.next(parseFloat(this.value.split(this.seperator).join("").split(this.decimalSeparator).join("."))),this.valueSubject.complete(),this.cancel()}static#t=this.ɵfac=function(t){return new(t||SpiceCalculatorModal)(c.rXU(d.S))};static#i=this.ɵcmp=c.VBU({type:SpiceCalculatorModal,selectors:[["spice-calculator-modal"]],viewQuery:function(t,i){if(1&t&&c.GBs(T,5),2&t){let t;c.mGM(t=c.lsd())&&(i.spicecalculator=t.first)}},decls:8,vars:3,consts:[[1,"slds-small-size_1-of-6","slds-align_absolute-center"],[3,"close"],["margin","none",2,"height","400px"],[3,"ngModel","ngModelChange"],["calculator",""],["class","slds-button slds-button--neutral",3,"click",4,"ngIf"],["class","slds-button slds-button--brand",3,"click",4,"ngIf"],[1,"slds-button","slds-button--neutral",3,"click"],["label","LBL_CANCEL"],[1,"slds-button","slds-button--brand",3,"click"],["label","LBL_APPLY"]],template:function(t,i){1&t&&(c.j41(0,"system-modal",0)(1,"system-modal-header-empty",1),c.bIt("close",(function(){return i.cancel()})),c.k0s(),c.j41(2,"system-modal-content",2)(3,"spice-calculator",3,4),c.mxI("ngModelChange",(function(t){return c.DH7(i.value,t)||(i.value=t),t})),c.k0s()(),c.j41(5,"system-modal-footer"),c.DNE(6,I,2,0,"button",5)(7,M,2,0,"button",6),c.k0s()()),2&t&&(c.R7$(3),c.R50("ngModel",i.value),c.R7$(3),c.Y8G("ngIf",i.trigger),c.R7$(),c.Y8G("ngIf",i.trigger))},dependencies:[e.bT,n.BC,n.vS,F.W,w.D,R.I,E.Q,_.b,D],encapsulation:2,changeDetection:0})}return SpiceCalculatorModal})();var B=s(41731);const O=["spiceCalculator"];let P=(()=>{class SpiceCalculatorDashlet{constructor(t,i){this.el=t,this.view=i}sizeCheck(){"edit"===this.view.getMode()?(this.spiceCalculator.sizeCheck(),setTimeout((()=>this.sizeCheck()),1e3)):this.spiceCalculator.sizeCheck()}onResize(){console.log("resize"),this.spiceCalculator.sizeCheck("all")}ngAfterViewInit(){this.sizeCheck(),this.view.mode$.subscribe((t=>{"edit"===t&&this.sizeCheck()}))}static#t=this.ɵfac=function(t){return new(t||SpiceCalculatorDashlet)(c.rXU(c.aKT),c.rXU(B.U))};static#i=this.ɵcmp=c.VBU({type:SpiceCalculatorDashlet,selectors:[["spice-calculator-dashlet"]],viewQuery:function(t,i){if(1&t&&c.GBs(O,5),2&t){let t;c.mGM(t=c.lsd())&&(i.spiceCalculator=t.first)}},hostBindings:function(t,i){1&t&&c.bIt("resize",(function(){return i.onResize()}),!1,c.tSv)},decls:3,vars:1,consts:[["id","dashlet",1,"slds-size--1-of-1","slds-height_full",2,"min-height","350px","min-width","270px"],[3,"ngModel","ngModelChange"],["spiceCalculator",""]],template:function(t,i){1&t&&(c.j41(0,"div",0)(1,"spice-calculator",1,2),c.mxI("ngModelChange",(function(t){return c.DH7(i.value,t)||(i.value=t),t})),c.k0s()()),2&t&&(c.R7$(),c.R50("ngModel",i.value))},dependencies:[n.BC,n.vS,D],encapsulation:2,changeDetection:0})}return SpiceCalculatorDashlet})(),G=(()=>{class ModuleSpiceMath{static#t=this.ɵfac=function(t){return new(t||ModuleSpiceMath)};static#i=this.ɵmod=c.$C({type:ModuleSpiceMath});static#s=this.ɵinj=c.G2t({imports:[e.MD,n.YN,o.ObjectFields,a.GlobalComponents,h.ObjectComponents,r.SystemComponents,l.h]})}return ModuleSpiceMath})();("undefined"==typeof ngJitMode||ngJitMode)&&c.Obh(G,{declarations:[V,D,P],imports:[e.MD,n.YN,o.ObjectFields,a.GlobalComponents,h.ObjectComponents,r.SystemComponents,l.h],exports:[D]})}}]);