/*!
 * 
 *                     aacService
 *
 *                     release: 2022.02.001
 *
 *                     date: 2022-09-03 11:05:02
 *
 *                     build: 2022.02.001.1662195902704
 *
 */
"use strict";(self.webpackChunkcore=self.webpackChunkcore||[]).push([["src_include_spicepagebuilder_modulespicepagebuilder_ts"],{1983:(e,t,i)=>{i.r(t),i.d(t,{ModuleSpicePageBuilder:()=>Ct});var s=i(6895),n=i(3121),l=i(5478),o=i(1571),d=i(433),r=i(3463);function c(e,t){if(1&e){const e=o.EpF();o.TgZ(0,"input",6),o.NdJ("ngModelChange",(function(t){o.CHM(e);const i=o.oxw();return o.KtG(i.value=t)}))("ngModelChange",(function(){o.CHM(e);const t=o.oxw();return o.KtG(t.emitJoinedValue())})),o.qZA()}if(2&e){const e=o.oxw();o.Q6J("ngModel",e.value)}}function a(e,t){if(1&e){const e=o.EpF();o.TgZ(0,"input",7),o.NdJ("ngModelChange",(function(t){o.CHM(e);const i=o.oxw();return o.KtG(i.value=t)}))("ngModelChange",(function(){o.CHM(e);const t=o.oxw();return o.KtG(t.emitJoinedValue())})),o.qZA(),o.TgZ(1,"span",8),o._uU(2),o.qZA()}if(2&e){const e=o.oxw();o.Q6J("ngModel",e.value),o.xp6(2),o.hij(" ",e.suffix," ")}}let u=(()=>{class SpicePageBuilderInputText{constructor(e){this.cdRef=e,this.label="",this.value=""}registerOnChange(e){this.onChange=t=>{e(t)}}registerOnTouched(e){this.onTouched=e}writeValue(e){e&&(this.value=this.suffix?parseFloat(e):e,this.cdRef.detectChanges())}emitJoinedValue(){this.onChange(this.suffix?this.value+this.suffix:this.value)}}return SpicePageBuilderInputText.ɵfac=function(e){return new(e||SpicePageBuilderInputText)(o.Y36(o.sBO))},SpicePageBuilderInputText.ɵcmp=o.Xpm({type:SpicePageBuilderInputText,selectors:[["spice-page-builder-input-text"]],inputs:{suffix:"suffix",label:"label"},features:[o._Bn([{multi:!0,provide:d.JU,useExisting:(0,o.Gpc)((()=>SpicePageBuilderInputText))}])],decls:7,vars:5,consts:[[1,"slds-form-element"],[1,"slds-form-element__label"],[3,"label"],[1,"slds-form-element__control"],["type","text","class","slds-input",3,"ngModel","ngModelChange",4,"ngIf","ngIfElse"],["inputNumberContainer",""],["type","text",1,"slds-input",3,"ngModel","ngModelChange"],["type","number",1,"slds-input",3,"ngModel","ngModelChange"],[1,"slds-form-element__addon"]],template:function(e,t){if(1&e&&(o.TgZ(0,"div",0)(1,"label",1),o._UZ(2,"system-label",2),o.qZA(),o.TgZ(3,"div",3),o.YNc(4,c,1,1,"input",4),o.YNc(5,a,3,2,"ng-template",null,5,o.W1O),o.qZA()()),2&e){const e=o.MAs(6);o.xp6(2),o.Q6J("label",t.label),o.xp6(1),o.ekj("slds-input-has-fixed-addon",!!t.suffix),o.xp6(1),o.Q6J("ngIf",!t.suffix)("ngIfElse",e)}},dependencies:[s.O5,r._,d.Fj,d.wV,d.JJ,d.On],encapsulation:2,changeDetection:0}),SpicePageBuilderInputText})();var p=i(1135),g=i(7579),m=i(4044);let f=(()=>{class SpicePageBuilderService{constructor(e){this.modal=e,this.response=new p.X(null),this.defaultPlaceholderHeight=200,this.page={tagName:"mjml",attributes:{},children:[{tagName:"body",attributes:{"background-color":"#ffffff",width:"550px"},children:[]}]},this.panelElements=[{tagName:"text",label:"LBL_TEXT",content:"Write text here...",icon:"text",attributes:{"font-size":"13px","line-height":"14px",padding:"4px","container-background-color":"#ffffff"}},{tagName:"image",label:"LBL_IMAGE",icon:"image",attributes:{align:"center",padding:"4px",target:"_blank"}},{tagName:"divider",label:"LBL_DIVIDER",icon:"dash",attributes:{padding:"8px","border-width":"2px",width:"100%","border-color":"#a2a2a2"}},{tagName:"spacer",label:"LBL_SPACER",icon:"steps",attributes:{height:"50px","vertical-align":"middle"}},{tagName:"button",label:"LBL_BUTTON",content:"New Button",icon:"link",attributes:{"border-radius":"4px","background-color":"#ca1b21",color:"#ffffff",padding:"4px","inner-padding":"4px",width:"150px",align:"center","font-size":"13px","text-align":"center","line-height":"14px",target:"_blank","vertical-align":"middle",href:"#"}},{tagName:"raw",label:"LBL_HTML_CODE",content:"Write code here...",icon:"insert_tag_field",attributes:{}}],this.panelDefaultSection={tagName:"section",children:[],attributes:{}},this.panelDefaultColumn={tagName:"column",children:[],attributes:{}},this.alignOptions=[{title:"LBL_LEFT_ALIGN",icon:"left_align_text",value:"left"},{title:"LBL_CENTER_ALIGN",icon:"center_align_text",value:"center"},{title:"LBL_RIGHT_ALIGN",icon:"right_align_text",value:"right"}],this.defaultSuffix="px",this.contentListId=_.uniqueId("panel-drop-list-")}addDropListToGroup(e){this.dropListGroup&&!this.dropListGroup._items.has(e)&&(this.dropListGroup._items.add(e),this.dropListGroup._items.forEach((e=>e._group=this.dropListGroup)))}openMediaFilePicker(){const e=new g.x;return this.modal.openModal("MediaFilePicker").subscribe((t=>{t.instance.answer.subscribe((t=>{t||(e.next(void 0),e.complete()),t.upload?this.modal.openModal("MediaFileUploader").subscribe((t=>{t.instance.answer.subscribe((t=>{e.next(t?"https://cdn.spicecrm.io/"+t:void 0),e.complete()}))})):(e.next(t.id?"https://cdn.spicecrm.io/"+t.id:void 0),e.complete())}))})),e.asObservable()}emitData(e){this.response.next(e?null:this.page),this.response.complete()}}return SpicePageBuilderService.ɵfac=function(e){return new(e||SpicePageBuilderService)(o.LFG(m.o))},SpicePageBuilderService.ɵprov=o.Yz7({token:SpicePageBuilderService,factory:SpicePageBuilderService.ɵfac}),SpicePageBuilderService})(),b=(()=>{class SpicePageBuilderInputSides{constructor(e,t){this.cdRef=e,this.spicePageBuilderService=t,this.label="",this.value={top:0,right:0,bottom:0,left:0}}registerOnChange(e){this.onChange=t=>{e(t)}}registerOnTouched(e){this.onTouched=e}writeValue(e){if(!e)return;const t=e.split(" ");this.value={top:parseFloat(t[0]),right:parseFloat(1==t.length?e:t[1]),bottom:parseFloat(1==t.length?e:t[2]),left:parseFloat(1==t.length?e:t[3])},this.cdRef.detectChanges()}emitJoinedValue(){const e=this.spicePageBuilderService.defaultSuffix;this.onChange(`${this.value.top+e} ${this.value.right+e} ${this.value.bottom+e} ${this.value.left+e}`)}}return SpicePageBuilderInputSides.ɵfac=function(e){return new(e||SpicePageBuilderInputSides)(o.Y36(o.sBO),o.Y36(f))},SpicePageBuilderInputSides.ɵcmp=o.Xpm({type:SpicePageBuilderInputSides,selectors:[["spice-page-builder-input-sides"]],inputs:{label:"label"},features:[o._Bn([{multi:!0,provide:d.JU,useExisting:(0,o.Gpc)((()=>SpicePageBuilderInputSides))}])],decls:37,vars:9,consts:[[1,"slds-form-element","slds-form-element_compound"],[1,"slds-form-element__legend","slds-form-element__label"],[1,"slds-form-element__control"],[1,"slds-form-element__row"],[1,"slds-size_1-of-4"],[1,"slds-form-element"],[1,"slds-form-element__label"],[1,"slds-form-element__control","slds-input-has-fixed-addon"],["type","number","maxlength","4","size","4",1,"slds-input",3,"ngModel","ngModelChange"],[1,"slds-form-element__addon"]],template:function(e,t){1&e&&(o.TgZ(0,"fieldset",0)(1,"legend",1),o._uU(2),o.qZA(),o.TgZ(3,"div",2)(4,"div",3)(5,"div",4)(6,"div",5)(7,"label",6),o._uU(8,"Top"),o.qZA(),o.TgZ(9,"div",7)(10,"input",8),o.NdJ("ngModelChange",(function(e){return t.value.top=e}))("ngModelChange",(function(){return t.emitJoinedValue()})),o.qZA(),o.TgZ(11,"span",9),o._uU(12),o.qZA()()()(),o.TgZ(13,"div",4)(14,"div",5)(15,"label",6),o._uU(16,"Right"),o.qZA(),o.TgZ(17,"div",7)(18,"input",8),o.NdJ("ngModelChange",(function(e){return t.value.right=e}))("ngModelChange",(function(){return t.emitJoinedValue()})),o.qZA(),o.TgZ(19,"span",9),o._uU(20),o.qZA()()()(),o.TgZ(21,"div",4)(22,"div",5)(23,"label",6),o._uU(24,"Bottom"),o.qZA(),o.TgZ(25,"div",7)(26,"input",8),o.NdJ("ngModelChange",(function(e){return t.value.bottom=e}))("ngModelChange",(function(){return t.emitJoinedValue()})),o.qZA(),o.TgZ(27,"span",9),o._uU(28),o.qZA()()()(),o.TgZ(29,"div",4)(30,"div",5)(31,"label",6),o._uU(32,"Left"),o.qZA(),o.TgZ(33,"div",7)(34,"input",8),o.NdJ("ngModelChange",(function(e){return t.value.left=e}))("ngModelChange",(function(){return t.emitJoinedValue()})),o.qZA(),o.TgZ(35,"span",9),o._uU(36),o.qZA()()()()()()()),2&e&&(o.xp6(2),o.Oqu(t.label),o.xp6(8),o.Q6J("ngModel",t.value.top),o.xp6(2),o.hij(" ",t.spicePageBuilderService.defaultSuffix," "),o.xp6(6),o.Q6J("ngModel",t.value.right),o.xp6(2),o.hij(" ",t.spicePageBuilderService.defaultSuffix," "),o.xp6(6),o.Q6J("ngModel",t.value.bottom),o.xp6(2),o.hij(" ",t.spicePageBuilderService.defaultSuffix," "),o.xp6(6),o.Q6J("ngModel",t.value.left),o.xp6(2),o.hij(" ",t.spicePageBuilderService.defaultSuffix," "))},dependencies:[d.Fj,d.wV,d.JJ,d.nD,d.On],encapsulation:2,changeDetection:0}),SpicePageBuilderInputSides})(),h=(()=>{class SpicePageBuilderInputColor{constructor(e){this.cdRef=e,this.label="",this.value=""}registerOnChange(e){this.onChange=t=>{e(t)}}registerOnTouched(e){this.onTouched=e}writeValue(e){e&&(this.value=e,this.cdRef.detectChanges())}emitValue(){this.onChange(this.value)}}return SpicePageBuilderInputColor.ɵfac=function(e){return new(e||SpicePageBuilderInputColor)(o.Y36(o.sBO))},SpicePageBuilderInputColor.ɵcmp=o.Xpm({type:SpicePageBuilderInputColor,selectors:[["spice-page-builder-input-color"]],inputs:{label:"label"},features:[o._Bn([{multi:!0,provide:d.JU,useExisting:(0,o.Gpc)((()=>SpicePageBuilderInputColor))}])],decls:6,vars:3,consts:[[1,"slds-form-element"],[1,"slds-form-element__label"],[1,"slds-form-element__control","slds-input-has-fixed-addon"],["type","color",1,"slds-input",3,"ngModel","ngModelChange"],["type","text","maxlength","8","size","8",1,"slds-input","slds-m-left--x-small",3,"ngModel","ngModelChange"]],template:function(e,t){1&e&&(o.TgZ(0,"div",0)(1,"label",1),o._uU(2),o.qZA(),o.TgZ(3,"div",2)(4,"input",3),o.NdJ("ngModelChange",(function(e){return t.value=e}))("ngModelChange",(function(){return t.emitValue()})),o.qZA(),o.TgZ(5,"input",4),o.NdJ("ngModelChange",(function(e){return t.value=e}))("ngModelChange",(function(){return t.emitValue()})),o.qZA()()()),2&e&&(o.xp6(2),o.Oqu(t.label),o.xp6(2),o.Q6J("ngModel",t.value),o.xp6(1),o.Q6J("ngModel",t.value))},dependencies:[d.Fj,d.JJ,d.nD,d.On],encapsulation:2,changeDetection:0}),SpicePageBuilderInputColor})();var x=i(1481),v=i(2656),y=i(4561),S=i(151),w=i(2563);let Z=(()=>{class SpicePageBuilderElement{constructor(e,t,i,s,n){this.domSanitizer=e,this.modal=t,this.injector=i,this.cdRef=s,this.spicePageBuilderService=n,this.delete$=new o.vpe,this.isEditMode=!1,this.attributesList=[{name:"width",type:"text"},{name:"background-color",type:"color"}],this.style={}}ngOnInit(){this.generateStyle()}handleEditResponse(e){this.element.attributes=e.attributes,this.generateStyle(),this.cdRef.detectChanges()}generateStyle(e){this.style=JSON.parse(JSON.stringify(e?_.pick(this.element.attributes,e):this.element.attributes))}setIsMouseIn(e){this.spicePageBuilderService.isMouseIn=e?"content":"section"}edit(){this.modal.openModal("SpicePageBuilderEditor",!0,this.injector).subscribe((e=>{e.instance.element=JSON.parse(JSON.stringify(this.element)),e.instance.response.subscribe((e=>{e&&this.handleEditResponse(e)}))}))}}return SpicePageBuilderElement.ɵfac=function(e){return new(e||SpicePageBuilderElement)(o.Y36(x.H7),o.Y36(m.o),o.Y36(o.zs3),o.Y36(o.sBO),o.Y36(f))},SpicePageBuilderElement.ɵcmp=o.Xpm({type:SpicePageBuilderElement,selectors:[["spice-page-builder-element"]],inputs:{element:"element",isEditMode:"isEditMode"},outputs:{delete$:"delete$"},decls:18,vars:3,consts:[["tabindex","-1",1,"spice-drop-zone",3,"mouseenter","mouseleave"],[1,"spice-drop-zone-label"],[1,"slds-media","slds-media_center"],[1,"slds-media__figure"],["icon","text","sprite","utility","size","x-small","divClass","slds-current-color"],[1,"slds-media__body"],[1,"slds-truncate"],["label","LBL_ELEMENT"],[1,"spice-drop-zone-content",3,"dblclick"],[3,"ngStyle"],[1,"spice-drop-zone-actions"],["role","group",1,"slds-button-group"],["cdkDragHandle","","system-title","LBL_MOVE",1,"slds-button","slds-button_icon","slds-button_icon-brand","slds-button_icon-x-small"],["icon","move","addclasses","slds-icon"],["system-title","LBL_CLOSE",1,"slds-button","slds-button_icon","slds-button_icon-brand","slds-button_icon-x-small",3,"click"],["icon","edit","addclasses","slds-icon"],["icon","close","addclasses","slds-icon"]],template:function(e,t){1&e&&(o.TgZ(0,"div",0),o.NdJ("mouseenter",(function(){return t.setIsMouseIn(!0)}))("mouseleave",(function(){return t.setIsMouseIn(!1)})),o.TgZ(1,"div",1)(2,"div",2)(3,"div",3),o._UZ(4,"system-icon",4),o.qZA(),o.TgZ(5,"div",5)(6,"h2",6),o._UZ(7,"system-label",7),o.qZA()()()(),o.TgZ(8,"article",8),o.NdJ("dblclick",(function(){return t.edit()})),o._UZ(9,"div",9),o.qZA(),o.TgZ(10,"div",10)(11,"div",11)(12,"button",12),o._UZ(13,"system-button-icon",13),o.qZA(),o.TgZ(14,"button",14),o.NdJ("click",(function(){return t.edit()})),o._UZ(15,"system-button-icon",15),o.qZA(),o.TgZ(16,"button",14),o.NdJ("click",(function(){return t.delete$.emit()})),o._UZ(17,"system-button-icon",16),o.qZA()()()()),2&e&&(o.ekj("slds-is-hovered","content"==t.spicePageBuilderService.isMouseIn),o.xp6(9),o.Q6J("ngStyle",t.style))},dependencies:[s.PC,v.J,y.f,r._,S.S,w.Bh],encapsulation:2,changeDetection:0}),SpicePageBuilderElement})();var C=i(2868);function M(e,t){if(1&e){const e=o.EpF();o.TgZ(0,"div",2),o.NdJ("mouseenter",(function(){o.CHM(e);const t=o.oxw();return o.KtG(t.setIsMouseIn(!0))}))("mouseleave",(function(){o.CHM(e);const t=o.oxw();return o.KtG(t.setIsMouseIn(!1))})),o.TgZ(1,"div",3)(2,"div",4)(3,"div",5),o._UZ(4,"system-icon",6),o.qZA(),o.TgZ(5,"div",7)(6,"h2",8),o._UZ(7,"system-label",9),o.qZA()()()(),o.TgZ(8,"article",10),o.NdJ("dblclick",(function(){o.CHM(e);const t=o.oxw();return o.KtG(t.edit())})),o.TgZ(9,"div"),o._UZ(10,"img",11),o.qZA()(),o.TgZ(11,"div",12)(12,"div",13)(13,"button",14),o._UZ(14,"system-button-icon",15),o.qZA(),o.TgZ(15,"button",16),o.NdJ("click",(function(){o.CHM(e);const t=o.oxw();return o.KtG(t.edit())})),o._UZ(16,"system-button-icon",17),o.qZA(),o.TgZ(17,"button",16),o.NdJ("click",(function(){o.CHM(e);const t=o.oxw();return o.KtG(t.delete$.emit())})),o._UZ(18,"system-button-icon",18),o.qZA()()()()}if(2&e){const e=o.oxw();o.ekj("slds-is-hovered","content"==e.spicePageBuilderService.isMouseIn),o.xp6(8),o.Q6J("ngStyle",e.style),o.xp6(1),o.Udp("background-color",e.element.attributes["container-background-color"]),o.xp6(1),o.Q6J("src",e.element.attributes.src,o.LSH)("ngStyle",e.style)}}function B(e,t){if(1&e&&(o.TgZ(0,"div",40)(1,"span",24),o._UZ(2,"system-label",41),o.qZA(),o.TgZ(3,"div",42),o._UZ(4,"img",43),o.qZA()()),2&e){const e=o.oxw(2);o.xp6(4),o.Q6J("src",e.element.attributes.src,o.LSH)}}function E(e,t){if(1&e){const e=o.EpF();o.TgZ(0,"spice-page-builder-input-text",47),o.NdJ("ngModelChange",(function(t){o.CHM(e);const i=o.oxw().$implicit,s=o.oxw(2);return o.KtG(s.element.attributes[i.name]=t)})),o.qZA()}if(2&e){const e=o.oxw().$implicit,t=o.oxw(2);o.Q6J("ngModel",t.element.attributes[e.name])("label",e.name)}}function J(e,t){if(1&e){const e=o.EpF();o.TgZ(0,"spice-page-builder-input-text",48),o.NdJ("ngModelChange",(function(t){o.CHM(e);const i=o.oxw().$implicit,s=o.oxw(2);return o.KtG(s.element.attributes[i.name]=t)})),o.qZA()}if(2&e){const e=o.oxw().$implicit,t=o.oxw(2);o.Q6J("ngModel",t.element.attributes[e.name])("label",e.name)("suffix",t.spicePageBuilderService.defaultSuffix)}}function L(e,t){if(1&e){const e=o.EpF();o.TgZ(0,"spice-page-builder-input-sides",47),o.NdJ("ngModelChange",(function(t){o.CHM(e);const i=o.oxw().$implicit,s=o.oxw(2);return o.KtG(s.element.attributes[i.name]=t)})),o.qZA()}if(2&e){const e=o.oxw().$implicit,t=o.oxw(2);o.Q6J("ngModel",t.element.attributes[e.name])("label",e.name)}}function P(e,t){if(1&e){const e=o.EpF();o.TgZ(0,"spice-page-builder-input-color",47),o.NdJ("ngModelChange",(function(t){o.CHM(e);const i=o.oxw().$implicit,s=o.oxw(2);return o.KtG(s.element.attributes[i.name]=t)})),o.qZA()}if(2&e){const e=o.oxw().$implicit,t=o.oxw(2);o.Q6J("ngModel",t.element.attributes[e.name])("label",e.name)}}function T(e,t){if(1&e&&(o.ynx(0,44),o.YNc(1,E,1,2,"spice-page-builder-input-text",45),o.YNc(2,J,1,3,"spice-page-builder-input-text",46),o.YNc(3,L,1,2,"spice-page-builder-input-sides",45),o.YNc(4,P,1,2,"spice-page-builder-input-color",45),o.BQk()),2&e){const e=t.$implicit;o.Q6J("ngSwitch",e.type),o.xp6(1),o.Q6J("ngSwitchCase","text"),o.xp6(1),o.Q6J("ngSwitchCase","textSuffix"),o.xp6(1),o.Q6J("ngSwitchCase","sides"),o.xp6(1),o.Q6J("ngSwitchCase","color")}}function N(e,t){if(1&e){const e=o.EpF();o.TgZ(0,"div",19)(1,"system-section",20)(2,"div",21)(3,"div",22)(4,"div",23)(5,"span",24),o._UZ(6,"system-label",25),o.qZA(),o.TgZ(7,"div",26)(8,"div",27)(9,"div",28)(10,"label",29)(11,"span",30),o.NdJ("click",(function(){o.CHM(e);const t=o.oxw();return o.KtG(t.openMediaFilePicker())})),o._UZ(12,"system-button-icon",31),o.TgZ(13,"span"),o._UZ(14,"system-label",32),o.qZA()(),o.TgZ(15,"span",33),o._UZ(16,"system-label",34),o.qZA()()()()()(),o.YNc(17,B,5,1,"div",35),o.qZA()()()(),o.TgZ(18,"div",19)(19,"system-section",36)(20,"div",37)(21,"div",38),o.YNc(22,T,5,5,"ng-container",39),o.qZA()()()()}if(2&e){const e=o.oxw();o.xp6(1),o.Q6J("alwaysExpanded",!0),o.xp6(16),o.Q6J("ngIf",!!e.element.attributes.src),o.xp6(2),o.Q6J("alwaysExpanded",!0),o.xp6(3),o.Q6J("ngForOf",e.attributesList)}}let k=(()=>{class SpicePageBuilderElementImage extends Z{constructor(e,t,i,s,n){super(e,t,i,s,n),this.domSanitizer=e,this.modal=t,this.injector=i,this.cdRef=s,this.spicePageBuilderService=n,this.attributesList=[{name:"title",type:"text"},{name:"href",type:"text"},{name:"alt",type:"text"},{name:"fluid-on-mobile",type:"text"},{name:"rel",type:"text"},{name:"srcset",type:"text"},{name:"target",type:"text"},{name:"usemap",type:"text"},{name:"border",type:"text"},{name:"border-radius",type:"textSuffix"},{name:"align",type:"text"},{name:"height",type:"textSuffix"},{name:"padding",type:"sides"},{name:"width",type:"textSuffix"},{name:"container-background-color",type:"color"},{name:"css-class",type:"text"}]}openMediaFilePicker(){this.spicePageBuilderService.openMediaFilePicker().subscribe((e=>{e&&(this.element.attributes.src=e)}))}generateStyle(){super.generateStyle(["border","border-radius","align","height","padding","width"])}}return SpicePageBuilderElementImage.ɵfac=function(e){return new(e||SpicePageBuilderElementImage)(o.Y36(x.H7),o.Y36(m.o),o.Y36(o.zs3),o.Y36(o.sBO),o.Y36(f))},SpicePageBuilderElementImage.ɵcmp=o.Xpm({type:SpicePageBuilderElementImage,selectors:[["spice-page-builder-element-image"]],inputs:{element:"element"},features:[o.qOj],decls:3,vars:2,consts:[["class","spice-drop-zone","tabindex","-1",3,"slds-is-hovered","mouseenter","mouseleave",4,"ngIf","ngIfElse"],["editContainer",""],["tabindex","-1",1,"spice-drop-zone",3,"mouseenter","mouseleave"],[1,"spice-drop-zone-label"],[1,"slds-media","slds-media_center"],[1,"slds-media__figure"],["icon","image","sprite","utility","size","x-small","divClass","slds-current-color"],[1,"slds-media__body"],[1,"slds-truncate"],["label","LBL_IMAGE"],[1,"spice-drop-zone-content",3,"ngStyle","dblclick"],["alt","SpiceCRM image",2,"max-height","100%",3,"src","ngStyle"],[1,"spice-drop-zone-actions"],["role","group",1,"slds-button-group"],["cdkDragHandle","","system-title","LBL_MOVE",1,"slds-button","slds-button_icon","slds-button_icon-brand","slds-button_icon-x-small"],["icon","move","addclasses","slds-icon"],["system-title","LBL_CLOSE",1,"slds-button","slds-button_icon","slds-button_icon-brand","slds-button_icon-x-small",3,"click"],["icon","edit","addclasses","slds-icon"],["icon","close","addclasses","slds-icon"],[2,"height","50%"],["titlelabel","LBL_ELEMENT_CONTENT",1,"spice-collapsible-tab-grow",3,"alwaysExpanded"],[1,"slds-grid","slds-size--1-of-1","slds-height_full","slds-p-around--xx-small"],[1,"slds-grid","slds-height_full","slds-size--1-of-1"],[1,"slds-form-element","slds-grid","slds-grid--vertical","slds-size--1-of-2","slds-p-right--xx-small"],[1,"slds-form-element__label"],["label","LBL_IMAGE_FILE"],[1,"slds-form-element__control","slds-grow"],[1,"slds-file-selector","slds-file-selector_images","slds-height_full"],[1,"slds-file-selector__dropzone","slds-height_full"],[1,"slds-file-selector__body"],[1,"slds-file-selector__button","slds-button","slds-button_neutral",2,"cursor","pointer",3,"click"],["icon","upload"],["label","LBL_UPLOAD_IMAGE"],[1,"slds-file-selector__text","slds-medium-show"],["label","LBL_OR_DROP_IMAGE"],["class","slds-height_full slds-size--1-of-2 slds-grid slds-grid--vertical slds-p-left--xx-small",4,"ngIf"],["titlelabel","LBL_STYLING",1,"spice-collapsible-tab-grow",3,"alwaysExpanded"],[1,"slds-size--1-of-1","slds-height_full","slds-p-horizontal--xx-small","slds-p-vertical--x-small","slds-scrollable--y"],[1,"slds-size--1-of-1","slds-grid","slds-wrap"],[3,"ngSwitch",4,"ngFor","ngForOf"],[1,"slds-height_full","slds-size--1-of-2","slds-grid","slds-grid--vertical","slds-p-left--xx-small"],["label","LBL_PREVIEW"],[1,"slds-grow","slds-p-around--x-small","slds-text-align--center",2,"min-height","0","border","1px solid #ddd","border-radius","4px"],["alt","Spice Image",2,"max-height","100%",3,"src"],[3,"ngSwitch"],["class","slds-p-horizontal--xxx-small slds-size--1-of-2",3,"ngModel","label","ngModelChange",4,"ngSwitchCase"],["class","slds-p-horizontal--xxx-small slds-size--1-of-2",3,"ngModel","label","suffix","ngModelChange",4,"ngSwitchCase"],[1,"slds-p-horizontal--xxx-small","slds-size--1-of-2",3,"ngModel","label","ngModelChange"],[1,"slds-p-horizontal--xxx-small","slds-size--1-of-2",3,"ngModel","label","suffix","ngModelChange"]],template:function(e,t){if(1&e&&(o.YNc(0,M,19,7,"div",0),o.YNc(1,N,23,4,"ng-template",null,1,o.W1O)),2&e){const e=o.MAs(2);o.Q6J("ngIf",!t.isEditMode)("ngIfElse",e)}},dependencies:[s.sg,s.O5,s.PC,s.RF,s.n9,v.J,y.f,r._,C.P,d.JJ,d.On,S.S,w.Bh,u,b,h],encapsulation:2,changeDetection:0}),SpicePageBuilderElementImage})();var z=i(1574);function D(e,t){if(1&e){const e=o.EpF();o.TgZ(0,"div",2),o.NdJ("mouseenter",(function(){o.CHM(e);const t=o.oxw();return o.KtG(t.setIsMouseIn(!0))}))("mouseleave",(function(){o.CHM(e);const t=o.oxw();return o.KtG(t.setIsMouseIn(!1))})),o.TgZ(1,"div",3)(2,"div",4)(3,"div",5),o._UZ(4,"system-icon",6),o.qZA(),o.TgZ(5,"div",7)(6,"h2",8),o._UZ(7,"system-label",9),o.qZA()()()(),o.TgZ(8,"article",10),o.NdJ("dblclick",(function(){o.CHM(e);const t=o.oxw();return o.KtG(t.edit())})),o.TgZ(9,"div"),o._UZ(10,"div",11),o.qZA()(),o.TgZ(11,"div",12)(12,"div",13)(13,"button",14),o._UZ(14,"system-button-icon",15),o.qZA(),o.TgZ(15,"button",16),o.NdJ("click",(function(){o.CHM(e);const t=o.oxw();return o.KtG(t.edit())})),o._UZ(16,"system-button-icon",17),o.qZA(),o.TgZ(17,"button",16),o.NdJ("click",(function(){o.CHM(e);const t=o.oxw();return o.KtG(t.delete$.emit())})),o._UZ(18,"system-button-icon",18),o.qZA()()()()}if(2&e){const e=o.oxw();o.ekj("slds-is-hovered","content"==e.spicePageBuilderService.isMouseIn),o.xp6(9),o.Udp("background-color",e.element.attributes["container-background-color"]),o.xp6(1),o.Q6J("innerHTML",e.sanitizedContent,o.oJD)("ngStyle",e.style)}}function A(e,t){if(1&e){const e=o.EpF();o.TgZ(0,"spice-page-builder-input-text",30),o.NdJ("ngModelChange",(function(t){o.CHM(e);const i=o.oxw().$implicit,s=o.oxw(2);return o.KtG(s.element.attributes[i.name]=t)})),o.qZA()}if(2&e){const e=o.oxw().$implicit,t=o.oxw(2);o.Q6J("ngModel",t.element.attributes[e.name])("label",e.name)}}function I(e,t){if(1&e){const e=o.EpF();o.TgZ(0,"spice-page-builder-input-text",31),o.NdJ("ngModelChange",(function(t){o.CHM(e);const i=o.oxw().$implicit,s=o.oxw(2);return o.KtG(s.element.attributes[i.name]=t)})),o.qZA()}if(2&e){const e=o.oxw().$implicit,t=o.oxw(2);o.Q6J("ngModel",t.element.attributes[e.name])("label",e.name)("suffix",t.spicePageBuilderService.defaultSuffix)}}function Q(e,t){if(1&e){const e=o.EpF();o.TgZ(0,"spice-page-builder-input-sides",30),o.NdJ("ngModelChange",(function(t){o.CHM(e);const i=o.oxw().$implicit,s=o.oxw(2);return o.KtG(s.element.attributes[i.name]=t)})),o.qZA()}if(2&e){const e=o.oxw().$implicit,t=o.oxw(2);o.Q6J("ngModel",t.element.attributes[e.name])("label",e.name)}}function O(e,t){if(1&e){const e=o.EpF();o.TgZ(0,"spice-page-builder-input-color",30),o.NdJ("ngModelChange",(function(t){o.CHM(e);const i=o.oxw().$implicit,s=o.oxw(2);return o.KtG(s.element.attributes[i.name]=t)})),o.qZA()}if(2&e){const e=o.oxw().$implicit,t=o.oxw(2);o.Q6J("ngModel",t.element.attributes[e.name])("label",e.name)}}function q(e,t){if(1&e&&(o.ynx(0,27),o.YNc(1,A,1,2,"spice-page-builder-input-text",28),o.YNc(2,I,1,3,"spice-page-builder-input-text",29),o.YNc(3,Q,1,2,"spice-page-builder-input-sides",28),o.YNc(4,O,1,2,"spice-page-builder-input-color",28),o.BQk()),2&e){const e=t.$implicit;o.Q6J("ngSwitch",e.type),o.xp6(1),o.Q6J("ngSwitchCase","text"),o.xp6(1),o.Q6J("ngSwitchCase","textSuffix"),o.xp6(1),o.Q6J("ngSwitchCase","sides"),o.xp6(1),o.Q6J("ngSwitchCase","color")}}function F(e,t){if(1&e){const e=o.EpF();o.TgZ(0,"div",19)(1,"system-section",20)(2,"div",21)(3,"system-richtext-editor",22),o.NdJ("ngModelChange",(function(t){o.CHM(e);const i=o.oxw();return o.KtG(i.element.content=t)})),o.qZA()()()(),o.TgZ(4,"div",19)(5,"system-section",23)(6,"div",24)(7,"div",25),o.YNc(8,q,5,5,"ng-container",26),o.qZA()()()()}if(2&e){const e=o.oxw();o.xp6(1),o.Q6J("alwaysExpanded",!0),o.xp6(2),o.Q6J("ngModel",e.element.content),o.xp6(2),o.Q6J("alwaysExpanded",!0),o.xp6(3),o.Q6J("ngForOf",e.attributesList)}}let Y=(()=>{class SpicePageBuilderElementText extends Z{constructor(e,t,i,s,n){super(e,t,i,s,n),this.domSanitizer=e,this.modal=t,this.injector=i,this.cdRef=s,this.spicePageBuilderService=n,this.attributesList=[{name:"color",type:"color"},{name:"container-background-color",type:"color"},{name:"font-size",type:"textSuffix"},{name:"font-style",type:"text"},{name:"font-weight",type:"text"},{name:"line-height",type:"textSuffix"},{name:"letter-spacing",type:"textSuffix"},{name:"height",type:"textSuffix"},{name:"text-decoration",type:"text"},{name:"text-transform",type:"text"},{name:"align",type:"text"},{name:"padding",type:"sides"},{name:"css-class",type:"text"}],this.sanitizedContent=""}ngOnInit(){super.ngOnInit(),this.sanitizeContent()}handleEditResponse(e){this.element.content=e.content,this.sanitizeContent(),super.handleEditResponse(e)}sanitizeContent(){this.sanitizedContent=this.domSanitizer.bypassSecurityTrustHtml(this.element.content)}generateStyle(){super.generateStyle(["color","font-size","font-style","font-weight","line-height","letter-spacing","text-decoration","text-transform","align","padding","height"])}}return SpicePageBuilderElementText.ɵfac=function(e){return new(e||SpicePageBuilderElementText)(o.Y36(x.H7),o.Y36(m.o),o.Y36(o.zs3),o.Y36(o.sBO),o.Y36(f))},SpicePageBuilderElementText.ɵcmp=o.Xpm({type:SpicePageBuilderElementText,selectors:[["spice-page-builder-element-text"]],inputs:{element:"element"},features:[o.qOj],decls:3,vars:2,consts:[["class","spice-drop-zone","tabindex","-1",3,"slds-is-hovered","mouseenter","mouseleave",4,"ngIf","ngIfElse"],["editContainer",""],["tabindex","-1",1,"spice-drop-zone",3,"mouseenter","mouseleave"],[1,"spice-drop-zone-label"],[1,"slds-media","slds-media_center"],[1,"slds-media__figure"],["icon","text","sprite","utility","size","x-small","divClass","slds-current-color"],[1,"slds-media__body"],[1,"slds-truncate"],["label","LBL_TEXT"],[1,"spice-drop-zone-content",3,"dblclick"],[3,"innerHTML","ngStyle"],[1,"spice-drop-zone-actions"],["role","group",1,"slds-button-group"],["cdkDragHandle","","system-title","LBL_MOVE",1,"slds-button","slds-button_icon","slds-button_icon-brand","slds-button_icon-x-small"],["icon","move","addclasses","slds-icon"],["system-title","LBL_CLOSE",1,"slds-button","slds-button_icon","slds-button_icon-brand","slds-button_icon-x-small",3,"click"],["icon","edit","addclasses","slds-icon"],["icon","close","addclasses","slds-icon"],[2,"height","50%"],["titlelabel","LBL_ELEMENT_CONTENT",1,"spice-collapsible-tab-grow",3,"alwaysExpanded"],[1,"slds-grid","slds-size--1-of-1","slds-height_full","slds-p-around--xx-small"],[1,"slds-size--1-of-1","spice-page-builder-text-editor",3,"ngModel","ngModelChange"],["titlelabel","LBL_STYLING",1,"spice-collapsible-tab-grow",3,"alwaysExpanded"],[1,"slds-size--1-of-1","slds-height_full","slds-p-horizontal--xx-small","slds-p-vertical--x-small","slds-scrollable--y"],[1,"slds-size--1-of-1","slds-grid","slds-wrap"],[3,"ngSwitch",4,"ngFor","ngForOf"],[3,"ngSwitch"],["class","slds-p-horizontal--xxx-small slds-size--1-of-2",3,"ngModel","label","ngModelChange",4,"ngSwitchCase"],["class","slds-p-horizontal--xxx-small slds-size--1-of-2",3,"ngModel","label","suffix","ngModelChange",4,"ngSwitchCase"],[1,"slds-p-horizontal--xxx-small","slds-size--1-of-2",3,"ngModel","label","ngModelChange"],[1,"slds-p-horizontal--xxx-small","slds-size--1-of-2",3,"ngModel","label","suffix","ngModelChange"]],template:function(e,t){if(1&e&&(o.YNc(0,D,19,6,"div",0),o.YNc(1,F,9,4,"ng-template",null,1,o.W1O)),2&e){const e=o.MAs(2);o.Q6J("ngIf",!t.isEditMode)("ngIfElse",e)}},dependencies:[s.sg,s.O5,s.PC,s.RF,s.n9,v.J,y.f,r._,z.z,C.P,d.JJ,d.On,S.S,w.Bh,u,b,h],encapsulation:2,changeDetection:0}),SpicePageBuilderElementText})();const H=function(e,t,i){return{padding:e,"background-color":t,width:i}},U=function(e,t,i){return{"border-width":e,"border-style":t,"border-color":i}};function G(e,t){if(1&e){const e=o.EpF();o.TgZ(0,"div",2),o.NdJ("mouseenter",(function(){o.CHM(e);const t=o.oxw();return o.KtG(t.setIsMouseIn(!0))}))("mouseleave",(function(){o.CHM(e);const t=o.oxw();return o.KtG(t.setIsMouseIn(!1))})),o.TgZ(1,"div",3)(2,"div",4)(3,"div",5),o._UZ(4,"system-icon",6),o.qZA(),o.TgZ(5,"div",7)(6,"h2",8),o._UZ(7,"system-label",9),o.qZA()()()(),o.TgZ(8,"article",10),o.NdJ("dblclick",(function(){o.CHM(e);const t=o.oxw();return o.KtG(t.edit())})),o.TgZ(9,"div",11),o._UZ(10,"hr",12),o.qZA()(),o.TgZ(11,"div",13)(12,"div",14)(13,"button",15),o._UZ(14,"system-button-icon",16),o.qZA(),o.TgZ(15,"button",17),o.NdJ("click",(function(){o.CHM(e);const t=o.oxw();return o.KtG(t.edit())})),o._UZ(16,"system-button-icon",18),o.qZA(),o.TgZ(17,"button",17),o.NdJ("click",(function(){o.CHM(e);const t=o.oxw();return o.KtG(t.delete$.emit())})),o._UZ(18,"system-button-icon",19),o.qZA()()()()}if(2&e){const e=o.oxw();o.ekj("slds-is-hovered","content"==e.spicePageBuilderService.isMouseIn),o.xp6(9),o.Q6J("ngStyle",o.kEZ(4,H,e.element.attributes.padding,e.element.attributes["container-background-color"],e.element.attributes.width)),o.xp6(1),o.Q6J("ngStyle",o.kEZ(8,U,e.style["border-width"],e.style["border-style"],e.style["border-color"]))}}function $(e,t){if(1&e){const e=o.EpF();o.TgZ(0,"spice-page-builder-input-text",34),o.NdJ("ngModelChange",(function(t){o.CHM(e);const i=o.oxw().$implicit,s=o.oxw(2);return o.KtG(s.element.attributes[i.name]=t)})),o.qZA()}if(2&e){const e=o.oxw().$implicit,t=o.oxw(2);o.Q6J("ngModel",t.element.attributes[e.name])("label",e.name)}}function R(e,t){if(1&e){const e=o.EpF();o.TgZ(0,"spice-page-builder-input-text",35),o.NdJ("ngModelChange",(function(t){o.CHM(e);const i=o.oxw().$implicit,s=o.oxw(2);return o.KtG(s.element.attributes[i.name]=t)})),o.qZA()}if(2&e){const e=o.oxw().$implicit,t=o.oxw(2);o.Q6J("ngModel",t.element.attributes[e.name])("label",e.name)("suffix",t.spicePageBuilderService.defaultSuffix)}}function K(e,t){if(1&e){const e=o.EpF();o.TgZ(0,"spice-page-builder-input-sides",34),o.NdJ("ngModelChange",(function(t){o.CHM(e);const i=o.oxw().$implicit,s=o.oxw(2);return o.KtG(s.element.attributes[i.name]=t)})),o.qZA()}if(2&e){const e=o.oxw().$implicit,t=o.oxw(2);o.Q6J("ngModel",t.element.attributes[e.name])("label",e.name)}}function j(e,t){if(1&e){const e=o.EpF();o.TgZ(0,"spice-page-builder-input-color",34),o.NdJ("ngModelChange",(function(t){o.CHM(e);const i=o.oxw().$implicit,s=o.oxw(2);return o.KtG(s.element.attributes[i.name]=t)})),o.qZA()}if(2&e){const e=o.oxw().$implicit,t=o.oxw(2);o.Q6J("ngModel",t.element.attributes[e.name])("label",e.name)}}function V(e,t){if(1&e&&(o.ynx(0,31),o.YNc(1,$,1,2,"spice-page-builder-input-text",32),o.YNc(2,R,1,3,"spice-page-builder-input-text",33),o.YNc(3,K,1,2,"spice-page-builder-input-sides",32),o.YNc(4,j,1,2,"spice-page-builder-input-color",32),o.BQk()),2&e){const e=t.$implicit;o.Q6J("ngSwitch",e.type),o.xp6(1),o.Q6J("ngSwitchCase","text"),o.xp6(1),o.Q6J("ngSwitchCase","textSuffix"),o.xp6(1),o.Q6J("ngSwitchCase","sides"),o.xp6(1),o.Q6J("ngSwitchCase","color")}}function X(e,t){if(1&e){const e=o.EpF();o.TgZ(0,"div",20)(1,"system-section",21)(2,"div",22)(3,"div",23)(4,"div",24)(5,"spice-page-builder-input-color",25),o.NdJ("ngModelChange",(function(t){o.CHM(e);const i=o.oxw();return o.KtG(i.element.attributes["border-color"]=t)})),o.qZA()(),o.TgZ(6,"div",24)(7,"spice-page-builder-input-text",26),o.NdJ("ngModelChange",(function(t){o.CHM(e);const i=o.oxw();return o.KtG(i.element.attributes["border-width"]=t)})),o.qZA()()()()()(),o.TgZ(8,"div",20)(9,"system-section",27)(10,"div",28)(11,"div",29),o.YNc(12,V,5,5,"ng-container",30),o.qZA()()()()}if(2&e){const e=o.oxw();o.xp6(1),o.Q6J("alwaysExpanded",!0),o.xp6(4),o.Q6J("ngModel",e.element.attributes["border-color"]),o.xp6(2),o.Q6J("ngModel",e.element.attributes["border-width"])("suffix",e.spicePageBuilderService.defaultSuffix),o.xp6(2),o.Q6J("alwaysExpanded",!0),o.xp6(3),o.Q6J("ngForOf",e.attributesList)}}let W=(()=>{class SpicePageBuilderElementDivider extends Z{constructor(e,t,i,s,n){super(e,t,i,s,n),this.domSanitizer=e,this.modal=t,this.injector=i,this.cdRef=s,this.spicePageBuilderService=n,this.attributesList=[{name:"container-background-color",type:"color"},{name:"border-style",type:"text"},{name:"padding",type:"sides"},{name:"width",type:"textSuffix"},{name:"css-class",type:"text"}]}generateStyle(){super.generateStyle(["border-color","border-style","border-width"])}}return SpicePageBuilderElementDivider.ɵfac=function(e){return new(e||SpicePageBuilderElementDivider)(o.Y36(x.H7),o.Y36(m.o),o.Y36(o.zs3),o.Y36(o.sBO),o.Y36(f))},SpicePageBuilderElementDivider.ɵcmp=o.Xpm({type:SpicePageBuilderElementDivider,selectors:[["spice-page-builder-element-divider"]],inputs:{element:"element"},features:[o.qOj],decls:3,vars:2,consts:[["class","spice-drop-zone","tabindex","-1",3,"slds-is-hovered","mouseenter","mouseleave",4,"ngIf","ngIfElse"],["editContainer",""],["tabindex","-1",1,"spice-drop-zone",3,"mouseenter","mouseleave"],[1,"spice-drop-zone-label"],[1,"slds-media","slds-media_center"],[1,"slds-media__figure"],["icon","text","sprite","utility","size","x-small","divClass","slds-current-color"],[1,"slds-media__body"],[1,"slds-truncate"],["label","LBL_DIVIDER"],[1,"spice-drop-zone-content",3,"dblclick"],[3,"ngStyle"],[2,"margin","0",3,"ngStyle"],[1,"spice-drop-zone-actions"],["role","group",1,"slds-button-group"],["cdkDragHandle","","system-title","LBL_MOVE",1,"slds-button","slds-button_icon","slds-button_icon-brand","slds-button_icon-x-small"],["icon","move","addclasses","slds-icon"],["system-title","LBL_CLOSE",1,"slds-button","slds-button_icon","slds-button_icon-brand","slds-button_icon-x-small",3,"click"],["icon","edit","addclasses","slds-icon"],["icon","close","addclasses","slds-icon"],[2,"height","50%"],["titlelabel","LBL_ELEMENT_CONTENT",1,"spice-collapsible-tab-grow",3,"alwaysExpanded"],[1,"slds-grid","slds-size--1-of-1","slds-height_full","slds-p-around--xx-small"],[1,"slds-size--1-of-1"],[1,"slds-grid"],["label","LBL_COLOR",1,"slds-p-horizontal--xxx-small","slds-size--1-of-2",3,"ngModel","ngModelChange"],["label","LBL_THICKNESS",1,"slds-p-horizontal--xxx-small","slds-size--1-of-2",3,"ngModel","suffix","ngModelChange"],["titlelabel","LBL_STYLING",1,"spice-collapsible-tab-grow",3,"alwaysExpanded"],[1,"slds-size--1-of-1","slds-height_full","slds-p-horizontal--xx-small","slds-p-vertical--x-small","slds-scrollable--y"],[1,"slds-size--1-of-1","slds-grid","slds-wrap"],[3,"ngSwitch",4,"ngFor","ngForOf"],[3,"ngSwitch"],["class","slds-p-horizontal--xxx-small slds-size--1-of-2",3,"ngModel","label","ngModelChange",4,"ngSwitchCase"],["class","slds-p-horizontal--xxx-small slds-size--1-of-2",3,"ngModel","label","suffix","ngModelChange",4,"ngSwitchCase"],[1,"slds-p-horizontal--xxx-small","slds-size--1-of-2",3,"ngModel","label","ngModelChange"],[1,"slds-p-horizontal--xxx-small","slds-size--1-of-2",3,"ngModel","label","suffix","ngModelChange"]],template:function(e,t){if(1&e&&(o.YNc(0,G,19,12,"div",0),o.YNc(1,X,13,6,"ng-template",null,1,o.W1O)),2&e){const e=o.MAs(2);o.Q6J("ngIf",!t.isEditMode)("ngIfElse",e)}},dependencies:[s.sg,s.O5,s.PC,s.RF,s.n9,v.J,y.f,r._,C.P,d.JJ,d.On,S.S,w.Bh,u,b,h],encapsulation:2,changeDetection:0}),SpicePageBuilderElementDivider})();function ee(e,t){if(1&e){const e=o.EpF();o.TgZ(0,"div",2),o.NdJ("mouseenter",(function(){o.CHM(e);const t=o.oxw();return o.KtG(t.setIsMouseIn(!0))}))("mouseleave",(function(){o.CHM(e);const t=o.oxw();return o.KtG(t.setIsMouseIn(!1))})),o.TgZ(1,"div",3)(2,"div",4)(3,"div",5),o._UZ(4,"system-icon",6),o.qZA(),o.TgZ(5,"div",7)(6,"h2",8),o._UZ(7,"system-label",9),o.qZA()()()(),o.TgZ(8,"article",10),o.NdJ("dblclick",(function(){o.CHM(e);const t=o.oxw();return o.KtG(t.edit())})),o._UZ(9,"div",11),o.qZA(),o.TgZ(10,"div",12)(11,"div",13)(12,"button",14),o._UZ(13,"system-button-icon",15),o.qZA(),o.TgZ(14,"button",16),o.NdJ("click",(function(){o.CHM(e);const t=o.oxw();return o.KtG(t.edit())})),o._UZ(15,"system-button-icon",17),o.qZA(),o.TgZ(16,"button",16),o.NdJ("click",(function(){o.CHM(e);const t=o.oxw();return o.KtG(t.delete$.emit())})),o._UZ(17,"system-button-icon",18),o.qZA()()()()}if(2&e){const e=o.oxw();o.ekj("slds-is-hovered","content"==e.spicePageBuilderService.isMouseIn),o.xp6(9),o.Udp("background-color",e.element.attributes["container-background-color"]),o.Q6J("ngStyle",e.style)}}function te(e,t){if(1&e){const e=o.EpF();o.TgZ(0,"spice-page-builder-input-text",32),o.NdJ("ngModelChange",(function(t){o.CHM(e);const i=o.oxw().$implicit,s=o.oxw(2);return o.KtG(s.element.attributes[i.name]=t)})),o.qZA()}if(2&e){const e=o.oxw().$implicit,t=o.oxw(2);o.Q6J("ngModel",t.element.attributes[e.name])("label",e.name)}}function ie(e,t){if(1&e){const e=o.EpF();o.TgZ(0,"spice-page-builder-input-text",33),o.NdJ("ngModelChange",(function(t){o.CHM(e);const i=o.oxw().$implicit,s=o.oxw(2);return o.KtG(s.element.attributes[i.name]=t)})),o.qZA()}if(2&e){const e=o.oxw().$implicit,t=o.oxw(2);o.Q6J("ngModel",t.element.attributes[e.name])("label",e.name)("suffix",t.spicePageBuilderService.defaultSuffix)}}function se(e,t){if(1&e){const e=o.EpF();o.TgZ(0,"spice-page-builder-input-sides",32),o.NdJ("ngModelChange",(function(t){o.CHM(e);const i=o.oxw().$implicit,s=o.oxw(2);return o.KtG(s.element.attributes[i.name]=t)})),o.qZA()}if(2&e){const e=o.oxw().$implicit,t=o.oxw(2);o.Q6J("ngModel",t.element.attributes[e.name])("label",e.name)}}function ne(e,t){if(1&e){const e=o.EpF();o.TgZ(0,"spice-page-builder-input-color",32),o.NdJ("ngModelChange",(function(t){o.CHM(e);const i=o.oxw().$implicit,s=o.oxw(2);return o.KtG(s.element.attributes[i.name]=t)})),o.qZA()}if(2&e){const e=o.oxw().$implicit,t=o.oxw(2);o.Q6J("ngModel",t.element.attributes[e.name])("label",e.name)}}function le(e,t){if(1&e&&(o.ynx(0,29),o.YNc(1,te,1,2,"spice-page-builder-input-text",30),o.YNc(2,ie,1,3,"spice-page-builder-input-text",31),o.YNc(3,se,1,2,"spice-page-builder-input-sides",30),o.YNc(4,ne,1,2,"spice-page-builder-input-color",30),o.BQk()),2&e){const e=t.$implicit;o.Q6J("ngSwitch",e.type),o.xp6(1),o.Q6J("ngSwitchCase","text"),o.xp6(1),o.Q6J("ngSwitchCase","textSuffix"),o.xp6(1),o.Q6J("ngSwitchCase","sides"),o.xp6(1),o.Q6J("ngSwitchCase","color")}}function oe(e,t){if(1&e){const e=o.EpF();o.TgZ(0,"div",19)(1,"system-section",20)(2,"div",21)(3,"div",22)(4,"div",23)(5,"spice-page-builder-input-text",24),o.NdJ("ngModelChange",(function(t){o.CHM(e);const i=o.oxw();return o.KtG(i.element.attributes.height=t)})),o.qZA()()()()()(),o.TgZ(6,"div",19)(7,"system-section",25)(8,"div",26)(9,"div",27),o.YNc(10,le,5,5,"ng-container",28),o.qZA()()()()}if(2&e){const e=o.oxw();o.xp6(1),o.Q6J("alwaysExpanded",!0),o.xp6(4),o.Q6J("ngModel",e.element.attributes.height),o.xp6(2),o.Q6J("alwaysExpanded",!0),o.xp6(3),o.Q6J("ngForOf",e.attributesList)}}let de=(()=>{class SpicePageBuilderElementSpacer extends Z{constructor(e,t,i,s,n){super(e,t,i,s,n),this.domSanitizer=e,this.modal=t,this.injector=i,this.cdRef=s,this.spicePageBuilderService=n,this.attributesList=[{name:"width",type:"textSuffix"},{name:"padding",type:"sides"},{name:"container-background-color",type:"color"},{name:"vertical-align",type:"text"},{name:"css-class",type:"text"}]}generateStyle(){super.generateStyle(["width","padding","vertical-align","height"])}}return SpicePageBuilderElementSpacer.ɵfac=function(e){return new(e||SpicePageBuilderElementSpacer)(o.Y36(x.H7),o.Y36(m.o),o.Y36(o.zs3),o.Y36(o.sBO),o.Y36(f))},SpicePageBuilderElementSpacer.ɵcmp=o.Xpm({type:SpicePageBuilderElementSpacer,selectors:[["spice-page-builder-element-spacer"]],inputs:{element:"element"},features:[o.qOj],decls:3,vars:2,consts:[["class","spice-drop-zone","tabindex","-1",3,"slds-is-hovered","mouseenter","mouseleave",4,"ngIf","ngIfElse"],["editContainer",""],["tabindex","-1",1,"spice-drop-zone",3,"mouseenter","mouseleave"],[1,"spice-drop-zone-label"],[1,"slds-media","slds-media_center"],[1,"slds-media__figure"],["icon","text","sprite","utility","size","x-small","divClass","slds-current-color"],[1,"slds-media__body"],[1,"slds-truncate"],["label","LBL_SPACER"],[1,"spice-drop-zone-content",3,"dblclick"],[3,"ngStyle"],[1,"spice-drop-zone-actions"],["role","group",1,"slds-button-group"],["cdkDragHandle","","system-title","LBL_MOVE",1,"slds-button","slds-button_icon","slds-button_icon-brand","slds-button_icon-x-small"],["icon","move","addclasses","slds-icon"],["system-title","LBL_CLOSE",1,"slds-button","slds-button_icon","slds-button_icon-brand","slds-button_icon-x-small",3,"click"],["icon","edit","addclasses","slds-icon"],["icon","close","addclasses","slds-icon"],[2,"height","50%"],["titlelabel","LBL_ELEMENT_CONTENT",1,"spice-collapsible-tab-grow",3,"alwaysExpanded"],[1,"slds-grid","slds-size--1-of-1","slds-height_full","slds-p-around--xx-small"],[1,"slds-size--1-of-1"],[1,"slds-grid"],["label","LBL_SPACING",1,"slds-p-horizontal--xxx-small","slds-size--1-of-2",3,"ngModel","ngModelChange"],["titlelabel","LBL_STYLING",1,"spice-collapsible-tab-grow",3,"alwaysExpanded"],[1,"slds-size--1-of-1","slds-height_full","slds-p-horizontal--xx-small","slds-p-vertical--x-small","slds-scrollable--y"],[1,"slds-size--1-of-1","slds-grid","slds-wrap"],[3,"ngSwitch",4,"ngFor","ngForOf"],[3,"ngSwitch"],["class","slds-p-horizontal--xxx-small slds-size--1-of-2",3,"ngModel","label","ngModelChange",4,"ngSwitchCase"],["class","slds-p-horizontal--xxx-small slds-size--1-of-2",3,"ngModel","label","suffix","ngModelChange",4,"ngSwitchCase"],[1,"slds-p-horizontal--xxx-small","slds-size--1-of-2",3,"ngModel","label","ngModelChange"],[1,"slds-p-horizontal--xxx-small","slds-size--1-of-2",3,"ngModel","label","suffix","ngModelChange"]],template:function(e,t){if(1&e&&(o.YNc(0,ee,18,5,"div",0),o.YNc(1,oe,11,4,"ng-template",null,1,o.W1O)),2&e){const e=o.MAs(2);o.Q6J("ngIf",!t.isEditMode)("ngIfElse",e)}},dependencies:[s.sg,s.O5,s.PC,s.RF,s.n9,v.J,y.f,r._,C.P,d.JJ,d.On,S.S,w.Bh,u,b,h],encapsulation:2,changeDetection:0}),SpicePageBuilderElementSpacer})();var re=i(6271);const ce=function(e,t){return{"background-color":e,padding:t}};function ae(e,t){if(1&e){const e=o.EpF();o.TgZ(0,"div",2),o.NdJ("mouseenter",(function(){o.CHM(e);const t=o.oxw();return o.KtG(t.setIsMouseIn(!0))}))("mouseleave",(function(){o.CHM(e);const t=o.oxw();return o.KtG(t.setIsMouseIn(!1))})),o.TgZ(1,"div",3)(2,"div",4)(3,"div",5),o._UZ(4,"system-icon",6),o.qZA(),o.TgZ(5,"div",7)(6,"h2",8),o._UZ(7,"system-label",9),o.qZA()()()(),o.TgZ(8,"article",10),o.NdJ("dblclick",(function(){o.CHM(e);const t=o.oxw();return o.KtG(t.edit())})),o.TgZ(9,"div",11)(10,"div",11),o._uU(11),o.qZA()()(),o.TgZ(12,"div",12)(13,"div",13)(14,"button",14),o._UZ(15,"system-button-icon",15),o.qZA(),o.TgZ(16,"button",16),o.NdJ("click",(function(){o.CHM(e);const t=o.oxw();return o.KtG(t.edit())})),o._UZ(17,"system-button-icon",17),o.qZA(),o.TgZ(18,"button",16),o.NdJ("click",(function(){o.CHM(e);const t=o.oxw();return o.KtG(t.delete$.emit())})),o._UZ(19,"system-button-icon",18),o.qZA()()()()}if(2&e){const e=o.oxw();o.ekj("slds-is-hovered","content"==e.spicePageBuilderService.isMouseIn),o.xp6(9),o.Q6J("ngStyle",o.WLB(7,ce,e.element.attributes["container-background-color"],e.element.attributes.padding)),o.xp6(1),o.Udp("padding",e.element.attributes["inner-padding"]),o.Q6J("ngStyle",e.style),o.xp6(1),o.hij(" ",e.element.content," ")}}function ue(e,t){if(1&e){const e=o.EpF();o.TgZ(0,"spice-page-builder-input-text",42),o.NdJ("ngModelChange",(function(t){o.CHM(e);const i=o.oxw().$implicit,s=o.oxw(2);return o.KtG(s.element.attributes[i.name]=t)})),o.qZA()}if(2&e){const e=o.oxw().$implicit,t=o.oxw(2);o.Q6J("ngModel",t.element.attributes[e.name])("label",e.name)}}function pe(e,t){if(1&e){const e=o.EpF();o.TgZ(0,"spice-page-builder-input-text",43),o.NdJ("ngModelChange",(function(t){o.CHM(e);const i=o.oxw().$implicit,s=o.oxw(2);return o.KtG(s.element.attributes[i.name]=t)})),o.qZA()}if(2&e){const e=o.oxw().$implicit,t=o.oxw(2);o.Q6J("ngModel",t.element.attributes[e.name])("label",e.name)("suffix",t.spicePageBuilderService.defaultSuffix)}}function ge(e,t){if(1&e){const e=o.EpF();o.TgZ(0,"spice-page-builder-input-sides",42),o.NdJ("ngModelChange",(function(t){o.CHM(e);const i=o.oxw().$implicit,s=o.oxw(2);return o.KtG(s.element.attributes[i.name]=t)})),o.qZA()}if(2&e){const e=o.oxw().$implicit,t=o.oxw(2);o.Q6J("ngModel",t.element.attributes[e.name])("label",e.name)}}function me(e,t){if(1&e){const e=o.EpF();o.TgZ(0,"spice-page-builder-input-color",42),o.NdJ("ngModelChange",(function(t){o.CHM(e);const i=o.oxw().$implicit,s=o.oxw(2);return o.KtG(s.element.attributes[i.name]=t)})),o.qZA()}if(2&e){const e=o.oxw().$implicit,t=o.oxw(2);o.Q6J("ngModel",t.element.attributes[e.name])("label",e.name)}}function fe(e,t){if(1&e&&(o.ynx(0,39),o.YNc(1,ue,1,2,"spice-page-builder-input-text",40),o.YNc(2,pe,1,3,"spice-page-builder-input-text",41),o.YNc(3,ge,1,2,"spice-page-builder-input-sides",40),o.YNc(4,me,1,2,"spice-page-builder-input-color",40),o.BQk()),2&e){const e=t.$implicit;o.Q6J("ngSwitch",e.type),o.xp6(1),o.Q6J("ngSwitchCase","text"),o.xp6(1),o.Q6J("ngSwitchCase","textSuffix"),o.xp6(1),o.Q6J("ngSwitchCase","sides"),o.xp6(1),o.Q6J("ngSwitchCase","color")}}function be(e,t){if(1&e){const e=o.EpF();o.TgZ(0,"div",19)(1,"system-section",20)(2,"div",21)(3,"div",22)(4,"div",23)(5,"div",24)(6,"label",25),o._UZ(7,"system-label",26),o.qZA(),o.TgZ(8,"div",27)(9,"input",28),o.NdJ("ngModelChange",(function(t){o.CHM(e);const i=o.oxw();return o.KtG(i.element.content=t)})),o.qZA()()(),o.TgZ(10,"div",24)(11,"label",25),o._UZ(12,"system-label",29),o.qZA(),o.TgZ(13,"div",27)(14,"input",28),o.NdJ("ngModelChange",(function(t){o.CHM(e);const i=o.oxw();return o.KtG(i.element.attributes.href=t)})),o.qZA()()()(),o.TgZ(15,"div",23)(16,"spice-page-builder-input-color",30),o.NdJ("ngModelChange",(function(t){o.CHM(e);const i=o.oxw();return o.KtG(i.element.attributes["background-color"]=t)})),o.qZA(),o.TgZ(17,"spice-page-builder-input-color",31),o.NdJ("ngModelChange",(function(t){o.CHM(e);const i=o.oxw();return o.KtG(i.element.attributes.color=t)})),o.qZA()(),o.TgZ(18,"div",23)(19,"spice-page-builder-input-text",32),o.NdJ("ngModelChange",(function(t){o.CHM(e);const i=o.oxw();return o.KtG(i.element.attributes["border-radius"]=t)})),o.qZA(),o.TgZ(20,"div",24)(21,"label",25),o._UZ(22,"system-label",33),o.qZA(),o.TgZ(23,"div",27)(24,"system-input-radio-button-group",34),o.NdJ("ngModelChange",(function(t){o.CHM(e);const i=o.oxw();return o.KtG(i.element.attributes["text-align"]=t)})),o.qZA()()()()()()()(),o.TgZ(25,"div",19)(26,"system-section",35)(27,"div",36)(28,"div",37),o.YNc(29,fe,5,5,"ng-container",38),o.qZA()()()()}if(2&e){const e=o.oxw();o.xp6(1),o.Q6J("alwaysExpanded",!0),o.xp6(8),o.Q6J("ngModel",e.element.content),o.xp6(5),o.Q6J("ngModel",e.element.attributes.href),o.xp6(2),o.Q6J("ngModel",e.element.attributes["background-color"]),o.xp6(1),o.Q6J("ngModel",e.element.attributes.color),o.xp6(2),o.Q6J("ngModel",e.element.attributes["border-radius"])("suffix",e.spicePageBuilderService.defaultSuffix),o.xp6(5),o.Q6J("ngModel",e.element.attributes["text-align"])("inputOptions",e.spicePageBuilderService.alignOptions),o.xp6(2),o.Q6J("alwaysExpanded",!0),o.xp6(3),o.Q6J("ngForOf",e.attributesList)}}let he=(()=>{class SpicePageBuilderElementButton extends Z{constructor(e,t,i,s,n){super(e,t,i,s,n),this.domSanitizer=e,this.modal=t,this.injector=i,this.cdRef=s,this.spicePageBuilderService=n,this.attributesList=[{name:"href",type:"text"},{name:"rel",type:"text"},{name:"target",type:"text"},{name:"align",type:"text"},{name:"width",type:"textSuffix"},{name:"container-background-color",type:"color"},{name:"border",type:"text"},{name:"border-top",type:"text"},{name:"border-right",type:"text"},{name:"border-bottom",type:"text"},{name:"border-left",type:"text"},{name:"height",type:"textSuffix"},{name:"padding",type:"sides"},{name:"inner-padding",type:"sides"},{name:"line-height",type:"textSuffix"},{name:"vertical-align",type:"text"},{name:"font-size",type:"textSuffix"},{name:"font-style",type:"text"},{name:"font-weight",type:"text"},{name:"letter-spacing",type:"textSuffix"},{name:"text-decoration",type:"text"},{name:"text-transform",type:"text"},{name:"css-class",type:"text"}]}handleEditResponse(e){this.element.content=e.content,super.handleEditResponse(e)}generateStyle(){super.generateStyle(["width","border","border-top","border-right","border-bottom","border-left","border-radius","height","line-height","vertical-align","font-size","font-style","font-weight","text-align","letter-spacing","text-decoration","text-transform","background-color","align","color"])}}return SpicePageBuilderElementButton.ɵfac=function(e){return new(e||SpicePageBuilderElementButton)(o.Y36(x.H7),o.Y36(m.o),o.Y36(o.zs3),o.Y36(o.sBO),o.Y36(f))},SpicePageBuilderElementButton.ɵcmp=o.Xpm({type:SpicePageBuilderElementButton,selectors:[["spice-page-builder-element-button"]],inputs:{element:"element"},features:[o.qOj],decls:3,vars:2,consts:[["class","spice-drop-zone","tabindex","-1",3,"slds-is-hovered","mouseenter","mouseleave",4,"ngIf","ngIfElse"],["editContainer",""],["tabindex","-1",1,"spice-drop-zone",3,"mouseenter","mouseleave"],[1,"spice-drop-zone-label"],[1,"slds-media","slds-media_center"],[1,"slds-media__figure"],["icon","text","sprite","utility","size","x-small","divClass","slds-current-color"],[1,"slds-media__body"],[1,"slds-truncate"],["label","LBL_BUTTON"],[1,"spice-drop-zone-content",3,"dblclick"],[3,"ngStyle"],[1,"spice-drop-zone-actions"],["role","group",1,"slds-button-group"],["cdkDragHandle","","system-title","LBL_MOVE",1,"slds-button","slds-button_icon","slds-button_icon-brand","slds-button_icon-x-small"],["icon","move","addclasses","slds-icon"],["system-title","LBL_CLOSE",1,"slds-button","slds-button_icon","slds-button_icon-brand","slds-button_icon-x-small",3,"click"],["icon","edit","addclasses","slds-icon"],["icon","close","addclasses","slds-icon"],[2,"height","50%"],["titlelabel","LBL_ELEMENT_CONTENT",1,"spice-collapsible-tab-grow",3,"alwaysExpanded"],[1,"slds-grid","slds-size--1-of-1","slds-height_full","slds-p-around--xx-small"],[1,"slds-size--1-of-1"],[1,"slds-grid"],[1,"slds-form-element","slds-size--1-of-2","slds-p-horizontal--xxx-small"],[1,"slds-form-element__label"],["label","LBL_TEXT"],[1,"slds-form-element__control"],["type","text",1,"slds-input",3,"ngModel","ngModelChange"],["label","LBL_URL"],["label","LBL_BACKGROUND_COLOR",1,"slds-p-horizontal--xxx-small","slds-size--1-of-2",3,"ngModel","ngModelChange"],["label","LBL_COLOR",1,"slds-p-horizontal--xxx-small","slds-size--1-of-2",3,"ngModel","ngModelChange"],["label","LBL_RADIUS",1,"slds-p-horizontal--xxx-small","slds-size--1-of-2",3,"ngModel","suffix","ngModelChange"],["label","LBL_TEXT_ALIGN"],[3,"ngModel","inputOptions","ngModelChange"],["titlelabel","LBL_STYLING",1,"spice-collapsible-tab-grow",3,"alwaysExpanded"],[1,"slds-size--1-of-1","slds-height_full","slds-p-horizontal--xx-small","slds-p-vertical--x-small","slds-scrollable--y"],[1,"slds-size--1-of-1","slds-grid","slds-wrap"],[3,"ngSwitch",4,"ngFor","ngForOf"],[3,"ngSwitch"],["class","slds-p-horizontal--xxx-small slds-size--1-of-2",3,"ngModel","label","ngModelChange",4,"ngSwitchCase"],["class","slds-p-horizontal--xxx-small slds-size--1-of-2",3,"ngModel","label","suffix","ngModelChange",4,"ngSwitchCase"],[1,"slds-p-horizontal--xxx-small","slds-size--1-of-2",3,"ngModel","label","ngModelChange"],[1,"slds-p-horizontal--xxx-small","slds-size--1-of-2",3,"ngModel","label","suffix","ngModelChange"]],template:function(e,t){if(1&e&&(o.YNc(0,ae,20,10,"div",0),o.YNc(1,be,30,11,"ng-template",null,1,o.W1O)),2&e){const e=o.MAs(2);o.Q6J("ngIf",!t.isEditMode)("ngIfElse",e)}},dependencies:[s.sg,s.O5,s.PC,s.RF,s.n9,v.J,y.f,re.p,r._,C.P,d.Fj,d.JJ,d.On,S.S,w.Bh,u,b,h],encapsulation:2,changeDetection:0}),SpicePageBuilderElementButton})();var xe=i(2067);function ve(e,t){if(1&e){const e=o.EpF();o.TgZ(0,"div",2),o.NdJ("mouseenter",(function(){o.CHM(e);const t=o.oxw();return o.KtG(t.setIsMouseIn(!0))}))("mouseleave",(function(){o.CHM(e);const t=o.oxw();return o.KtG(t.setIsMouseIn(!1))})),o.TgZ(1,"div",3)(2,"div",4)(3,"div",5),o._UZ(4,"system-icon",6),o.qZA(),o.TgZ(5,"div",7)(6,"h2",8),o._UZ(7,"system-label",9),o.qZA()()()(),o.TgZ(8,"article",10),o.NdJ("dblclick",(function(){o.CHM(e);const t=o.oxw();return o.KtG(t.edit())})),o._UZ(9,"div",11),o.qZA(),o.TgZ(10,"div",12)(11,"div",13)(12,"button",14),o._UZ(13,"system-button-icon",15),o.qZA(),o.TgZ(14,"button",16),o.NdJ("click",(function(){o.CHM(e);const t=o.oxw();return o.KtG(t.edit())})),o._UZ(15,"system-button-icon",17),o.qZA(),o.TgZ(16,"button",16),o.NdJ("click",(function(){o.CHM(e);const t=o.oxw();return o.KtG(t.delete$.emit())})),o._UZ(17,"system-button-icon",18),o.qZA()()()()}if(2&e){const e=o.oxw();o.ekj("slds-is-hovered","content"==e.spicePageBuilderService.isMouseIn),o.xp6(9),o.Q6J("innerHTML",e.sanitizedContent,o.oJD)("ngStyle",e.style)}}function ye(e,t){if(1&e){const e=o.EpF();o.TgZ(0,"div",19)(1,"system-section",20)(2,"div",21)(3,"div",22)(4,"div",23)(5,"span",24),o._UZ(6,"system-label",25),o.qZA(),o.TgZ(7,"button",26),o.NdJ("click",(function(){o.CHM(e);const t=o.oxw();return o.KtG(t.beautify())})),o._UZ(8,"system-button-icon",27),o.qZA()(),o.TgZ(9,"div",28)(10,"textarea",29),o.NdJ("ngModelChange",(function(t){o.CHM(e);const i=o.oxw();return o.KtG(i.element.content=t)})),o.qZA()()()()()()}if(2&e){const e=o.oxw();o.xp6(1),o.Q6J("alwaysExpanded",!0),o.xp6(6),o.Q6J("disabled",!e.beautifyLoaded),o.xp6(3),o.Q6J("ngModel",e.element.content)}}let Se=(()=>{class SpicePageBuilderElementCode extends Z{constructor(e,t,i,s,n,l){super(e,t,i,s,l),this.domSanitizer=e,this.modal=t,this.injector=i,this.cdRef=s,this.libloader=n,this.spicePageBuilderService=l,this.attributesList=[],this.beautifyLoaded=!1,this.sanitizedContent=""}ngOnInit(){super.ngOnInit(),this.sanitizeContent(),this.isEditMode&&this.loadBeatifyLibrary()}handleEditResponse(e){this.element.content=e.content,this.sanitizeContent(),super.handleEditResponse(e)}loadBeatifyLibrary(){this.libloader.loadLib("jsbeautify").subscribe((e=>{this.beautifyLoaded=!0,this.cdRef.detectChanges()}))}sanitizeContent(){this.sanitizedContent=this.domSanitizer.bypassSecurityTrustHtml(this.element.content)}beautify(){this.element.content=html_beautify(this.element.content,{indent_size:4,indent_char:" ",indent_with_tabs:!1,end_with_newline:!1,indent_level:0,preserve_newlines:!0,max_preserve_newlines:10,space_in_paren:!1,space_in_empty_paren:!1,unindent_chained_methods:!1,break_chained_methods:!1,keep_array_indentation:!1,unescape_strings:!1,wrap_line_length:100,e4x:!1,comma_first:!1,operator_position:"before-newline",indent_empty_lines:!1,templating:["auto"]}),this.cdRef.detectChanges()}}return SpicePageBuilderElementCode.ɵfac=function(e){return new(e||SpicePageBuilderElementCode)(o.Y36(x.H7),o.Y36(m.o),o.Y36(o.zs3),o.Y36(o.sBO),o.Y36(xe.$),o.Y36(f))},SpicePageBuilderElementCode.ɵcmp=o.Xpm({type:SpicePageBuilderElementCode,selectors:[["spice-page-builder-element-code"]],inputs:{element:"element"},features:[o.qOj],decls:3,vars:2,consts:[["class","spice-drop-zone","tabindex","-1",3,"slds-is-hovered","mouseenter","mouseleave",4,"ngIf","ngIfElse"],["editContainer",""],["tabindex","-1",1,"spice-drop-zone",3,"mouseenter","mouseleave"],[1,"spice-drop-zone-label"],[1,"slds-media","slds-media_center"],[1,"slds-media__figure"],["icon","text","sprite","utility","size","x-small","divClass","slds-current-color"],[1,"slds-media__body"],[1,"slds-truncate"],["label","LBL_HTML_CODE"],[1,"spice-drop-zone-content",3,"dblclick"],[3,"innerHTML","ngStyle"],[1,"spice-drop-zone-actions"],["role","group",1,"slds-button-group"],["cdkDragHandle","","system-title","LBL_MOVE",1,"slds-button","slds-button_icon","slds-button_icon-brand","slds-button_icon-x-small"],["icon","move","addclasses","slds-icon"],["system-title","LBL_CLOSE",1,"slds-button","slds-button_icon","slds-button_icon-brand","slds-button_icon-x-small",3,"click"],["icon","edit","addclasses","slds-icon"],["icon","close","addclasses","slds-icon"],[1,"slds-height_full"],["titlelabel","LBL_ELEMENT_CONTENT",1,"spice-collapsible-tab-grow",3,"alwaysExpanded"],[1,"slds-grid","slds-size--1-of-1","slds-height_full","slds-p-around--xx-small"],[1,"slds-form-element","slds-grid","slds-grid--vertical","slds-size--1-of-1"],[1,"slds-grid","slds-grid--align-spread","slds-m-bottom--xx-small"],[1,"slds-form-element__label"],["label","LBL_HTML"],["system-title","LBL_BEAUTIFY",1,"slds-button","slds-button--icon-border","slds-button--neutral",3,"disabled","click"],["icon","right_align_text"],[1,"slds-form-element__control","slds-grid","slds-grow"],[1,"slds-textarea",2,"resize","none",3,"ngModel","ngModelChange"]],template:function(e,t){if(1&e&&(o.YNc(0,ve,18,4,"div",0),o.YNc(1,ye,11,3,"ng-template",null,1,o.W1O)),2&e){const e=o.MAs(2);o.Q6J("ngIf",!t.isEditMode)("ngIfElse",e)}},dependencies:[s.O5,s.PC,v.J,y.f,r._,C.P,d.Fj,d.JJ,d.On,S.S,w.Bh],encapsulation:2,changeDetection:0}),SpicePageBuilderElementCode})();const _e=["dropList"];function we(e,t){if(1&e){const e=o.EpF();o.TgZ(0,"spice-page-builder-element-text",6),o.NdJ("delete$",(function(){o.CHM(e);const t=o.oxw().$implicit,i=o.oxw();return o.KtG(i.onContentDelete(t))})),o.qZA()}if(2&e){const e=o.oxw().$implicit;o.Q6J("element",e)("cdkDragData",e)}}function Ze(e,t){if(1&e){const e=o.EpF();o.TgZ(0,"spice-page-builder-element-image",6),o.NdJ("delete$",(function(){o.CHM(e);const t=o.oxw().$implicit,i=o.oxw();return o.KtG(i.onContentDelete(t))})),o.qZA()}if(2&e){const e=o.oxw().$implicit;o.Q6J("element",e)("cdkDragData",e)}}function Ce(e,t){if(1&e){const e=o.EpF();o.TgZ(0,"spice-page-builder-element-button",6),o.NdJ("delete$",(function(){o.CHM(e);const t=o.oxw().$implicit,i=o.oxw();return o.KtG(i.onContentDelete(t))})),o.qZA()}if(2&e){const e=o.oxw().$implicit;o.Q6J("element",e)("cdkDragData",e)}}function Me(e,t){if(1&e){const e=o.EpF();o.TgZ(0,"spice-page-builder-element-divider",6),o.NdJ("delete$",(function(){o.CHM(e);const t=o.oxw().$implicit,i=o.oxw();return o.KtG(i.onContentDelete(t))})),o.qZA()}if(2&e){const e=o.oxw().$implicit;o.Q6J("element",e)("cdkDragData",e)}}function Be(e,t){if(1&e){const e=o.EpF();o.TgZ(0,"spice-page-builder-element-spacer",6),o.NdJ("delete$",(function(){o.CHM(e);const t=o.oxw().$implicit,i=o.oxw();return o.KtG(i.onContentDelete(t))})),o.qZA()}if(2&e){const e=o.oxw().$implicit;o.Q6J("element",e)("cdkDragData",e)}}function Ee(e,t){if(1&e){const e=o.EpF();o.TgZ(0,"spice-page-builder-element-code",6),o.NdJ("delete$",(function(){o.CHM(e);const t=o.oxw().$implicit,i=o.oxw();return o.KtG(i.onContentDelete(t))})),o.qZA()}if(2&e){const e=o.oxw().$implicit;o.Q6J("element",e)("cdkDragData",e)}}function Je(e,t){if(1&e&&(o.ynx(0,4),o.YNc(1,we,1,2,"spice-page-builder-element-text",5),o.YNc(2,Ze,1,2,"spice-page-builder-element-image",5),o.YNc(3,Ce,1,2,"spice-page-builder-element-button",5),o.YNc(4,Me,1,2,"spice-page-builder-element-divider",5),o.YNc(5,Be,1,2,"spice-page-builder-element-spacer",5),o.YNc(6,Ee,1,2,"spice-page-builder-element-code",5),o.BQk()),2&e){const e=t.$implicit;o.Q6J("ngSwitch",e.tagName),o.xp6(1),o.Q6J("ngSwitchCase","text"),o.xp6(1),o.Q6J("ngSwitchCase","image"),o.xp6(1),o.Q6J("ngSwitchCase","button"),o.xp6(1),o.Q6J("ngSwitchCase","divider"),o.xp6(1),o.Q6J("ngSwitchCase","spacer"),o.xp6(1),o.Q6J("ngSwitchCase","raw")}}function Le(e,t){if(1&e&&(o.TgZ(0,"div",7)(1,"div",8),o._UZ(2,"system-label",9),o.qZA()()),2&e){const e=o.oxw();o.Udp("height",e.spicePageBuilderService.defaultPlaceholderHeight,"px")}}let Pe=(()=>{class SpicePageBuilderElementColumn{constructor(e,t,i){this.spicePageBuilderService=e,this.modal=t,this.cdRef=i,this.dragEntered=!1,this.style={}}ngOnInit(){this.generateStyle()}ngAfterViewInit(){this.spicePageBuilderService.addDropListToGroup(this.dropList)}trackByFn(e,t){return e}contentPredicate(e){return"section"!=e.data.tagName}generateStyle(){this.style={"background-color":this.column.attributes["background-color"],border:this.column.attributes.border,"border-top":this.column.attributes["border-top"],"border-right":this.column.attributes["border-right"],"border-bottom":this.column.attributes["border-bottom"],"border-left":this.column.attributes["border-left"],"border-radius":this.column.attributes["border-radius"],width:this.column.attributes.width,"vertical-align":this.column.attributes["vertical-align"],padding:this.column.attributes.padding}}onDrop(e){if(e.previousContainer!=e.container)if(this.spicePageBuilderService.dragPlaceholderNode&&e.previousContainer.element.nativeElement.contains(this.spicePageBuilderService.dragPlaceholderNode)&&(e.previousContainer.element.nativeElement.removeChild(this.spicePageBuilderService.dragPlaceholderNode),this.spicePageBuilderService.dragPlaceholderNode=void 0),-1==e.previousContainer.id.indexOf("panel-drop-list")&&(e.previousContainer.data.children=e.previousContainer.data.children.filter((t=>t!=e.item.data))),"image"===e.item.data.tagName)this.spicePageBuilderService.openMediaFilePicker().subscribe((t=>{if(t){const i=JSON.parse(JSON.stringify(e.item.data));i.attributes.src=t,delete i.icon,this.column.children.splice(e.currentIndex,0,i),this.cdRef.detectChanges()}}));else{const t=JSON.parse(JSON.stringify(e.item.data));delete t.icon,this.column.children.splice(e.currentIndex,0,t)}else(0,w.bA)(this.column.children,e.previousIndex,e.currentIndex);this.dragEntered=!1}onDragExit(e){this.dragEntered=!1}onDragEnter(e){this.dragEntered=!0}onContentDelete(e){this.column.children=this.column.children.filter((t=>t!=e))}}return SpicePageBuilderElementColumn.ɵfac=function(e){return new(e||SpicePageBuilderElementColumn)(o.Y36(f),o.Y36(m.o),o.Y36(o.sBO))},SpicePageBuilderElementColumn.ɵcmp=o.Xpm({type:SpicePageBuilderElementColumn,selectors:[["spice-page-builder-element-column"]],viewQuery:function(e,t){if(1&e&&o.Gf(_e,5,w.Wj),2&e){let e;o.iGM(e=o.CRH())&&(t.dropList=e.first)}},inputs:{column:"column"},decls:4,vars:6,consts:[["cdkDropList","",1,"slds-grid","slds-grid--vertical","spice-page-builder-renderer-drop-list",3,"ngStyle","cdkDropListEnterPredicate","cdkDropListData","cdkDropListEntered","cdkDropListExited","cdkDropListDropped"],["dropList","cdkDropList"],[3,"ngSwitch",4,"ngFor","ngForOf","ngForTrackBy"],["class","slds-align--absolute-center slds-size--1-of-1",3,"height",4,"ngIf"],[3,"ngSwitch"],["cdkDrag","","class","slds-grid slds-grow slds-drag--preview","style","width: 100%",3,"element","cdkDragData","delete$",4,"ngSwitchCase"],["cdkDrag","",1,"slds-grid","slds-grow","slds-drag--preview",2,"width","100%",3,"element","cdkDragData","delete$"],[1,"slds-align--absolute-center","slds-size--1-of-1"],[1,"slds-align--absolute-center","slds-height_full","slds-size--1-of-1","slds-theme--shade","slds-text-title--caps","slds-truncate"],["label","MSG_DROP_CONTENT_HERE"]],template:function(e,t){1&e&&(o.TgZ(0,"div",0,1),o.NdJ("cdkDropListEntered",(function(e){return t.onDragEnter(e)}))("cdkDropListExited",(function(e){return t.onDragExit(e)}))("cdkDropListDropped",(function(e){return t.onDrop(e)})),o.YNc(2,Je,7,7,"ng-container",2),o.YNc(3,Le,3,2,"div",3),o.qZA()),2&e&&(o.Q6J("ngStyle",t.style)("cdkDropListEnterPredicate",t.contentPredicate)("cdkDropListData",t.column),o.xp6(2),o.Q6J("ngForOf",t.column.children)("ngForTrackBy",t.trackByFn),o.xp6(1),o.Q6J("ngIf",!t.dragEntered&&0==(null==t.column.children?null:t.column.children.length)))},dependencies:[s.sg,s.O5,s.PC,s.RF,s.n9,r._,w.Wj,w.Zt,k,Y,W,de,he,Se],encapsulation:2,changeDetection:0}),SpicePageBuilderElementColumn})();function Te(e,t){if(1&e&&o._UZ(0,"spice-page-builder-element-column",16),2&e){const e=t.$implicit,i=o.oxw();o.Udp("width",100/i.section.children.length,"%"),o.Q6J("column",e)}}const Ne=function(){return["section","content"]};let ke=(()=>{class SpicePageBuilderElementSection{constructor(e){this.spicePageBuilderService=e,this.delete$=new o.vpe,this.style={}}ngOnInit(){this.generateStyle()}trackByFn(e,t){return e}generateStyle(){this.style={"background-color":this.section.attributes["background-color"],border:this.section.attributes.border,"border-top":this.section.attributes["border-top"],"border-right":this.section.attributes["border-right"],"border-bottom":this.section.attributes["border-bottom"],"border-left":this.section.attributes["border-left"],"border-radius":this.section.attributes["border-radius"],padding:this.section.attributes.padding,"text-align":this.section.attributes["text-align"]}}setIsMouseIn(e){this.spicePageBuilderService.isMouseIn=e?"section":void 0}}return SpicePageBuilderElementSection.ɵfac=function(e){return new(e||SpicePageBuilderElementSection)(o.Y36(f))},SpicePageBuilderElementSection.ɵcmp=o.Xpm({type:SpicePageBuilderElementSection,selectors:[["spice-page-builder-element-section"]],inputs:{section:"section"},outputs:{delete$:"delete$"},decls:16,vars:5,consts:[["tabindex","-1",1,"spice-drop-zone",3,"mouseenter","mouseleave"],[1,"spice-drop-zone-label"],[1,"slds-media","slds-media_center"],[1,"slds-media__figure"],["icon","full_width_view","sprite","utility","size","x-small","divClass","slds-current-color"],[1,"slds-media__body"],[1,"slds-truncate"],["label","LBL_SECTION"],[1,"spice-drop-zone-content","slds-grid"],["class","spice-display-block slds-grow slds-height_full",3,"column","width",4,"ngFor","ngForOf","ngForTrackBy"],[1,"spice-drop-zone-actions"],["role","group",1,"slds-button-group"],["cdkDragHandle","","system-title","LBL_MOVE",1,"slds-button","slds-button_icon","slds-button_icon-brand","slds-button_icon-x-small"],["icon","move","addclasses","slds-icon"],["system-title","LBL_CLOSE",1,"slds-button","slds-button_icon","slds-button_icon-brand","slds-button_icon-x-small",3,"click"],["icon","close","addclasses","slds-icon"],[1,"spice-display-block","slds-grow","slds-height_full",3,"column"]],template:function(e,t){1&e&&(o.TgZ(0,"div",0),o.NdJ("mouseenter",(function(){return t.setIsMouseIn(!0)}))("mouseleave",(function(){return t.setIsMouseIn(!1)})),o.TgZ(1,"div",1)(2,"div",2)(3,"div",3),o._UZ(4,"system-icon",4),o.qZA(),o.TgZ(5,"div",5)(6,"h2",6),o._UZ(7,"system-label",7),o.qZA()()()(),o.TgZ(8,"article",8),o.YNc(9,Te,1,3,"spice-page-builder-element-column",9),o.qZA(),o.TgZ(10,"div",10)(11,"div",11)(12,"button",12),o._UZ(13,"system-button-icon",13),o.qZA(),o.TgZ(14,"button",14),o.NdJ("click",(function(){return t.delete$.emit()})),o._UZ(15,"system-button-icon",15),o.qZA()()()()),2&e&&(o.ekj("slds-is-hovered",o.DdM(4,Ne).indexOf(t.spicePageBuilderService.isMouseIn)>-1),o.xp6(9),o.Q6J("ngForOf",t.section.children)("ngForTrackBy",t.trackByFn))},dependencies:[s.sg,v.J,y.f,r._,S.S,w.Bh,Pe],encapsulation:2,changeDetection:0}),SpicePageBuilderElementSection})();const ze=["dropList"];function De(e,t){if(1&e){const e=o.EpF();o.TgZ(0,"spice-page-builder-element-section",4),o.NdJ("delete$",(function(){const t=o.CHM(e).$implicit,i=o.oxw();return o.KtG(i.onSectionDelete(t))})),o.qZA()}if(2&e){const e=t.$implicit;o.Q6J("ngStyle",e.style)("cdkDragData",e)("section",e)}}function Ae(e,t){1&e&&(o.TgZ(0,"div",5),o._UZ(1,"system-label",6),o.qZA())}let Ie=(()=>{class SpicePageBuilderElementBody{constructor(e){this.spicePageBuilderService=e,this.dragEntered=!1,this.style={}}ngOnInit(){this.generateStyle()}ngAfterViewInit(){this.spicePageBuilderService.addDropListToGroup(this.dropList)}trackByFn(e,t){return e}sectionPredicate(e){return"section"==e.data.tagName}generateStyle(){this.style={"background-color":this.body.attributes["background-color"],width:this.body.attributes.width}}onSectionDelete(e){this.body.children=this.body.children.filter((t=>t!=e))}onDrop(e){if(e.previousContainer!=e.container){this.spicePageBuilderService.dragPlaceholderNode&&e.previousContainer.element.nativeElement.contains(this.spicePageBuilderService.dragPlaceholderNode)&&(e.previousContainer.element.nativeElement.removeChild(this.spicePageBuilderService.dragPlaceholderNode),this.spicePageBuilderService.dragPlaceholderNode=void 0);const t=JSON.parse(JSON.stringify(e.item.data));this.body.children.splice(e.currentIndex,0,t),this.dragEntered=!1}else(0,w.bA)(this.body.children,e.previousIndex,e.currentIndex)}}return SpicePageBuilderElementBody.ɵfac=function(e){return new(e||SpicePageBuilderElementBody)(o.Y36(f))},SpicePageBuilderElementBody.ɵcmp=o.Xpm({type:SpicePageBuilderElementBody,selectors:[["spice-page-builder-element-body"]],viewQuery:function(e,t){if(1&e&&o.Gf(ze,5,w.Wj),2&e){let e;o.iGM(e=o.CRH())&&(t.dropList=e.first)}},inputs:{body:"body"},decls:4,vars:6,consts:[["cdkDropList","",1,"spice-page-builder-renderer-drop-list",2,"height","100%","width","100%",3,"ngStyle","cdkDropListEnterPredicate","cdkDropListData","cdkDropListEntered","cdkDropListExited","cdkDropListDropped"],["dropList","cdkDropList"],["cdkDrag","","class","spice-display-block slds-drag--preview",3,"ngStyle","cdkDragData","section","delete$",4,"ngFor","ngForOf","ngForTrackBy"],["class","slds-align--absolute-center slds-height_full slds-size--1-of-1 slds-text-title--caps slds-truncate",4,"ngIf"],["cdkDrag","",1,"spice-display-block","slds-drag--preview",3,"ngStyle","cdkDragData","section","delete$"],[1,"slds-align--absolute-center","slds-height_full","slds-size--1-of-1","slds-text-title--caps","slds-truncate"],["label","LBL_DROP_SECTION_HERE"]],template:function(e,t){1&e&&(o.TgZ(0,"div",0,1),o.NdJ("cdkDropListEntered",(function(){return t.dragEntered=!0}))("cdkDropListExited",(function(){return t.dragEntered=!1}))("cdkDropListDropped",(function(e){return t.onDrop(e)})),o.YNc(2,De,1,3,"spice-page-builder-element-section",2),o.YNc(3,Ae,2,0,"div",3),o.qZA()),2&e&&(o.Q6J("ngStyle",t.style)("cdkDropListEnterPredicate",t.sectionPredicate)("cdkDropListData",t.body),o.xp6(2),o.Q6J("ngForOf",t.body.children)("ngForTrackBy",t.trackByFn),o.xp6(1),o.Q6J("ngIf",!t.dragEntered&&0==(null==t.body.children?null:t.body.children.length)))},dependencies:[s.sg,s.O5,s.PC,r._,w.Wj,w.Zt,ke],encapsulation:2,changeDetection:0}),SpicePageBuilderElementBody})(),Qe=(()=>{class SpicePageBuilderRenderer{constructor(e){this.spicePageBuilderService=e}ngOnInit(){this.setBodyElement()}trackByFn(e,t){return e}setBodyElement(){this.spicePageBuilderService.page&&this.spicePageBuilderService.page.children&&(this.body=this.spicePageBuilderService.page.children[0])}}return SpicePageBuilderRenderer.ɵfac=function(e){return new(e||SpicePageBuilderRenderer)(o.Y36(f))},SpicePageBuilderRenderer.ɵcmp=o.Xpm({type:SpicePageBuilderRenderer,selectors:[["spice-page-builder-renderer"]],decls:2,vars:1,consts:[[1,"slds-grid","slds-grid--align-center","slds-scrollable--y","slds-height_full","slds-p-around--large",2,"background-color","#ca1b21ea"],[2,"box-shadow","0 0 8px #666",3,"body"]],template:function(e,t){1&e&&(o.TgZ(0,"div",0),o._UZ(1,"spice-page-builder-element-body",1),o.qZA()),2&e&&(o.xp6(1),o.Q6J("body",t.body))},dependencies:[Ie],encapsulation:2,changeDetection:0}),SpicePageBuilderRenderer})();var Oe=i(8859);function qe(e,t){if(1&e&&o._UZ(0,"div",17),2&e){const e=t.last;o.Udp("border-right",e?0:"2px solid #ca1b21")}}function Fe(e,t){if(1&e&&(o.TgZ(0,"div",13)(1,"div"),o._uU(2),o._UZ(3,"system-label",14),o.qZA(),o.TgZ(4,"div",15),o.YNc(5,qe,1,2,"div",16),o.qZA()()),2&e){const e=t.$implicit,i=o.oxw();o.Q6J("cdkDragData",e),o.xp6(2),o.hij(" ",null==e.children?null:e.children.length," "),o.xp6(3),o.Q6J("ngForOf",e.children)("ngForTrackBy",i.trackByFn)}}function Ye(e,t){if(1&e&&(o.TgZ(0,"div",18)(1,"div",19),o._UZ(2,"system-utility-icon",20),o.TgZ(3,"div"),o._UZ(4,"system-label",21),o.qZA()()()),2&e){const e=t.$implicit;o.Q6J("cdkDragData",e)("title",e.tagName),o.xp6(2),o.Q6J("icon",e.icon),o.xp6(2),o.Q6J("label",e.label)}}let He=(()=>{class SpicePageBuilderPanel{constructor(e){this.spicePageBuilderService=e,this.sections=[]}ngOnInit(){this.generateSections()}generateSections(){let e=1;for(;e<=4;){let t=1,i=[];for(;t<=e;)i.push(JSON.parse(JSON.stringify(this.spicePageBuilderService.panelDefaultColumn))),t++;const s=JSON.parse(JSON.stringify(this.spicePageBuilderService.panelDefaultSection));s.children=i,this.sections.push(s),e++}}trackByFn(e,t){return e}noReturnPredicate(){return!1}onDragExit(e){const t=e.item.getPlaceholderElement().cloneNode(!0);this.spicePageBuilderService.dragPlaceholderNode=t,e.container.element.nativeElement.insertBefore(t,e.item.getPlaceholderElement())}onDragEnter(e){this.spicePageBuilderService.dragPlaceholderNode&&e.container.element.nativeElement.contains(this.spicePageBuilderService.dragPlaceholderNode)&&(e.container.element.nativeElement.removeChild(this.spicePageBuilderService.dragPlaceholderNode),this.spicePageBuilderService.dragPlaceholderNode=void 0)}save(){this.spicePageBuilderService.emitData()}cancel(){this.spicePageBuilderService.emitData(!0),this.self.destroy()}}return SpicePageBuilderPanel.ɵfac=function(e){return new(e||SpicePageBuilderPanel)(o.Y36(f))},SpicePageBuilderPanel.ɵcmp=o.Xpm({type:SpicePageBuilderPanel,selectors:[["spice-page-builder-panel"]],inputs:{self:"self"},decls:14,vars:11,consts:[[1,"slds-grid","slds-grid--vertical","slds-height_full","slds-p-around--x-small","slds-scrollable--y"],[2,"height","50%"],["titlelabel","LBL_SECTIONS",1,"spice-collapsible-tab-grow",3,"alwaysExpanded"],["cdkDropList","","cdkDropListSortingDisabled","",1,"slds-grid","slds-size--1-of-1","slds-grid--vertical","slds-height_full","slds-p-bottom--small","spice-page-builder-panel-drop-list",3,"cdkDropListEnterPredicate","cdkDropListData","cdkDropListEntered","cdkDropListExited"],["cdkDrag","","class","slds-grow slds-p-around--xx-small slds-grid slds-grid--vertical slds-drag--preview spice-drag-placeholder-visible",3,"cdkDragData",4,"ngFor","ngForOf","ngForTrackBy"],["titlelabel","LBL_CONTENT_ELEMENTS",1,"spice-collapsible-tab-grow",3,"alwaysExpanded"],["cdkDropList","","cdkDropListSortingDisabled","",1,"slds-grid","slds-size--1-of-1","slds-p-around--xx-small","slds-wrap","spice-page-builder-panel-drop-list",2,"height","fit-content",3,"id","cdkDropListEnterPredicate","cdkDropListData","cdkDropListEntered","cdkDropListExited"],["cdkDrag","","class","slds-p-around--xxx-small slds-drag--preview","style","cursor: move",3,"cdkDragData","title",4,"ngFor","ngForOf","ngForTrackBy"],[1,"slds-grid","slds-grid--align-end","slds-has-divider--top-space"],[1,"slds-button","slds-button--neutral","slds-m-left--xx-small","spice-hover-button",3,"click"],["label","LBL_CANCEL"],[1,"slds-button","slds-button--brand","slds-m-left--xx-small","spice-hover-button",3,"click"],["label","LBL_SAVE"],["cdkDrag","",1,"slds-grow","slds-p-around--xx-small","slds-grid","slds-grid--vertical","slds-drag--preview","spice-drag-placeholder-visible",3,"cdkDragData"],["label","LBL_COLUMNS"],[1,"slds-grid","slds-grow","slds-theme--default",2,"border","2px solid #ca1b21","cursor","move"],["class","slds-grow",3,"border-right",4,"ngFor","ngForOf","ngForTrackBy"],[1,"slds-grow"],["cdkDrag","",1,"slds-p-around--xxx-small","slds-drag--preview",2,"cursor","move",3,"cdkDragData","title"],[1,"slds-p-around--x-small","slds-card","slds-height_full","slds-align--absolute-center","slds-grid","slds-grid--vertical"],["size","large",3,"icon"],[3,"label"]],template:function(e,t){1&e&&(o.TgZ(0,"div",0)(1,"div",1)(2,"system-section",2)(3,"div",3),o.NdJ("cdkDropListEntered",(function(e){return t.onDragEnter(e)}))("cdkDropListExited",(function(e){return t.onDragExit(e)})),o.YNc(4,Fe,6,4,"div",4),o.qZA()()(),o.TgZ(5,"div",1)(6,"system-section",5)(7,"div",6),o.NdJ("cdkDropListEntered",(function(e){return t.onDragEnter(e)}))("cdkDropListExited",(function(e){return t.onDragExit(e)})),o.YNc(8,Ye,5,4,"div",7),o.qZA()()(),o.TgZ(9,"div",8)(10,"button",9),o.NdJ("click",(function(){return t.cancel()})),o._UZ(11,"system-label",10),o.qZA(),o.TgZ(12,"button",11),o.NdJ("click",(function(){return t.save()})),o._UZ(13,"system-label",12),o.qZA()()()),2&e&&(o.xp6(2),o.Q6J("alwaysExpanded",!0),o.xp6(1),o.Q6J("cdkDropListEnterPredicate",t.noReturnPredicate)("cdkDropListData",t.sections),o.xp6(1),o.Q6J("ngForOf",t.sections)("ngForTrackBy",t.trackByFn),o.xp6(2),o.Q6J("alwaysExpanded",!0),o.xp6(1),o.Q6J("id",t.spicePageBuilderService.contentListId)("cdkDropListEnterPredicate",t.noReturnPredicate)("cdkDropListData",t.spicePageBuilderService.panelElements),o.xp6(1),o.Q6J("ngForOf",t.spicePageBuilderService.panelElements)("ngForTrackBy",t.trackByFn))},dependencies:[s.sg,r._,C.P,Oe.r,w.Wj,w.Zt],encapsulation:2,changeDetection:0}),SpicePageBuilderPanel})();var Ue=i(9621),Ge=i(3499),$e=i(5767),Re=i(1916);const Ke=["codeContainer"];function je(e,t){if(1&e&&o._UZ(0,"spice-page-builder-element-text",10),2&e){const e=o.oxw();o.Q6J("element",e.element)("isEditMode",!0)}}function Ve(e,t){if(1&e&&o._UZ(0,"spice-page-builder-element-image",10),2&e){const e=o.oxw();o.Q6J("element",e.element)("isEditMode",!0)}}function Xe(e,t){if(1&e&&o._UZ(0,"spice-page-builder-element-button",10),2&e){const e=o.oxw();o.Q6J("element",e.element)("isEditMode",!0)}}function We(e,t){if(1&e&&o._UZ(0,"spice-page-builder-element-divider",10),2&e){const e=o.oxw();o.Q6J("element",e.element)("isEditMode",!0)}}function et(e,t){if(1&e&&o._UZ(0,"spice-page-builder-element-spacer",10),2&e){const e=o.oxw();o.Q6J("element",e.element)("isEditMode",!0)}}function tt(e,t){if(1&e&&o._UZ(0,"spice-page-builder-element-code",10),2&e){const e=o.oxw();o.Q6J("element",e.element)("isEditMode",!0)}}let it=(()=>{class SpicePageBuilderEditor{constructor(){this.response=new p.X(!1),this.self={}}trackByFn(e,t){return e}cancel(){this.response.next(!1),this.response.complete(),this.self.destroy()}confirm(){this.response.next(JSON.parse(JSON.stringify(this.element))),this.response.complete(),this.self.destroy()}}return SpicePageBuilderEditor.ɵfac=function(e){return new(e||SpicePageBuilderEditor)},SpicePageBuilderEditor.ɵcmp=o.Xpm({type:SpicePageBuilderEditor,selectors:[["spice-page-builder-editor"]],viewQuery:function(e,t){if(1&e&&o.Gf(Ke,5,o.s_b),2&e){let e;o.iGM(e=o.CRH())&&(t.codeContainer=e.first)}},decls:17,vars:9,consts:[[3,"close"],["label","LBL_EDIT"],[3,"label"],[3,"grow"],[1,"slds-height_full","slds-size--1-of-1",3,"ngSwitch"],[3,"element","isEditMode",4,"ngSwitchCase"],[1,"slds-button","slds-button--neutral",3,"click"],["label","LBL_CANCEL"],[1,"slds-button","slds-button--brand",3,"click"],["label","LBL_SAVE"],[3,"element","isEditMode"]],template:function(e,t){1&e&&(o.TgZ(0,"system-modal")(1,"system-modal-header",0),o.NdJ("close",(function(){return t.cancel()})),o._UZ(2,"system-label",1)(3,"system-label",2),o.qZA(),o.TgZ(4,"system-modal-content",3)(5,"div",4),o.YNc(6,je,1,2,"spice-page-builder-element-text",5),o.YNc(7,Ve,1,2,"spice-page-builder-element-image",5),o.YNc(8,Xe,1,2,"spice-page-builder-element-button",5),o.YNc(9,We,1,2,"spice-page-builder-element-divider",5),o.YNc(10,et,1,2,"spice-page-builder-element-spacer",5),o.YNc(11,tt,1,2,"spice-page-builder-element-code",5),o.qZA()(),o.TgZ(12,"system-modal-footer")(13,"button",6),o.NdJ("click",(function(){return t.cancel()})),o._UZ(14,"system-label",7),o.qZA(),o.TgZ(15,"button",8),o.NdJ("click",(function(){return t.confirm()})),o._UZ(16,"system-label",9),o.qZA()()()),2&e&&(o.xp6(3),o.Q6J("label",t.element.label),o.xp6(1),o.Q6J("grow",!0),o.xp6(1),o.Q6J("ngSwitch",t.element.tagName),o.xp6(1),o.Q6J("ngSwitchCase","text"),o.xp6(1),o.Q6J("ngSwitchCase","image"),o.xp6(1),o.Q6J("ngSwitchCase","button"),o.xp6(1),o.Q6J("ngSwitchCase","divider"),o.xp6(1),o.Q6J("ngSwitchCase","spacer"),o.xp6(1),o.Q6J("ngSwitchCase","raw"))},dependencies:[s.RF,s.n9,r._,Ue.j,Ge.x,$e.p,Re.y,k,Y,W,de,he,Se],encapsulation:2,changeDetection:0}),SpicePageBuilderEditor})();var st=i(3194);function nt(e,t){if(1&e&&(o.ynx(0),o._UZ(1,"spice-page-builder-panel",2)(2,"spice-page-builder-renderer",3),o.BQk()),2&e){const e=o.oxw();o.xp6(1),o.Q6J("self",e.self)}}let lt=(()=>{class SpicePageBuilder{constructor(e,t){this.spicePageBuilderService=e,this.cdRef=t,this.dropListGroupDefined=!1}ngAfterViewInit(){this.setDropListReference()}setDropListReference(){this.spicePageBuilderService.dropListGroup=this.dropListGroup,this.dropListGroupDefined=!0,this.cdRef.detectChanges()}}return SpicePageBuilder.ɵfac=function(e){return new(e||SpicePageBuilder)(o.Y36(f),o.Y36(o.sBO))},SpicePageBuilder.ɵcmp=o.Xpm({type:SpicePageBuilder,selectors:[["spice-page-builder"]],viewQuery:function(e,t){if(1&e&&o.Gf(w.Fd,5,w.Fd),2&e){let e;o.iGM(e=o.CRH())&&(t.dropListGroup=e.first)}},features:[o._Bn([f])],decls:2,vars:1,consts:[["system-to-bottom-noscroll","","cdkDropListGroup","",1,"slds-grid","spice-page-builder-main-container"],[4,"ngIf"],[1,"slds-size--1-of-4","spice-display-block","slds-height_full","slds-border--right",2,"box-shadow","10px 0 20px 0 #1b1b1b",3,"self"],[1,"slds-size--3-of-4","spice-display-block","slds-height_full"]],template:function(e,t){1&e&&(o.TgZ(0,"div",0),o.YNc(1,nt,3,1,"ng-container",1),o.qZA()),2&e&&(o.xp6(1),o.Q6J("ngIf",t.dropListGroupDefined))},dependencies:[s.O5,st.t,w.Fd,He,Qe],encapsulation:2,changeDetection:0}),SpicePageBuilder})();var ot=i(7040),dt=i(5710),rt=i(2294),ct=i(5329),at=i(4154),ut=i(4505),pt=i(3278),gt=i(7774),mt=i(6367),ft=i(3208),bt=i(5638);function ht(e,t){if(1&e&&o._UZ(0,"field-label",5),2&e){const e=o.oxw();o.Q6J("fieldname",e.fieldname)("fieldconfig",e.fieldconfig)}}function xt(e,t){if(1&e){const e=o.EpF();o.TgZ(0,"button",6),o.NdJ("click",(function(){o.CHM(e);const t=o.oxw();return o.KtG(t.setEditMode())})),o._UZ(1,"system-button-icon",7),o.qZA()}2&e&&(o.xp6(1),o.Q6J("icon","edit"))}function vt(e,t){if(1&e&&o._UZ(0,"iframe",11),2&e){const e=o.oxw(2);o.Udp("height",e.iframeHeight,"px"),o.Q6J("src",e.parsedHtml,o.uOi)}}function yt(e,t){if(1&e){const e=o.EpF();o.TgZ(0,"field-generic-display",8)(1,"div",9),o.NdJ("dblclick",(function(){o.CHM(e);const t=o.oxw();return o.KtG(t.setEditMode())})),o.YNc(2,vt,1,3,"iframe",10),o.qZA()()}if(2&e){const e=o.oxw();o.Q6J("fielddisplayclass",e.fielddisplayclass)("editable",!1)("fieldconfig",e.fieldconfig),o.xp6(1),o.Udp("min-height",e.iframeHeight,"px"),o.xp6(1),o.Q6J("ngIf",e.parsedHtml)}}function St(e,t){if(1&e&&o._UZ(0,"iframe",11),2&e){const e=o.oxw(2);o.Udp("height",e.iframeHeight,"px"),o.Q6J("src",e.parsedHtml,o.uOi)}}function _t(e,t){if(1&e){const e=o.EpF();o.TgZ(0,"div",12)(1,"div",13)(2,"div",14),o.YNc(3,St,1,3,"iframe",10),o.qZA(),o.TgZ(4,"div",15)(5,"div",16)(6,"button",17),o.NdJ("click",(function(){o.CHM(e);const t=o.oxw();return o.KtG(t.openPageBuilder())})),o._UZ(7,"system-button-icon",7),o.qZA()()()(),o._UZ(8,"field-messages",18),o.qZA()}if(2&e){const e=o.oxw();o.Q6J("ngClass",e.getFieldClass()),o.xp6(2),o.Udp("min-height",e.iframeHeight,"px"),o.xp6(1),o.Q6J("ngIf",e.parsedHtml),o.xp6(4),o.Q6J("icon","edit"),o.xp6(1),o.Q6J("fieldname",e.fieldname)}}let wt=(()=>{class fieldPageBuilder extends ot.O{constructor(e,t,i,s,n,l,o,d,r,c,a){super(e,t,i,s,o),this.model=e,this.view=t,this.language=i,this.metadata=s,this.backend=n,this.toast=l,this.router=o,this.injector=d,this.modal=r,this.cdRef=c,this.sanitizer=a,this.iframeHeight=250}ngOnInit(){super.ngOnInit(),this.setIframeHeight()}ngAfterViewInit(){super.ngAfterViewInit(),this.setHtmlValue(),this.modelChangesSubscriber()}setEditMode(){this.model.startEdit(),this.view.setEditMode(),this.cdRef.detectChanges()}modelChangesSubscriber(){this.subscriptions.add(this.model.data$.subscribe((()=>this.setHtmlValue()))),this.subscriptions.add(this.view.mode$.subscribe((()=>this.cdRef.detectChanges())))}setHtmlValue(){this.value&&(this.parsedHtml=this.sanitizer.bypassSecurityTrustResourceUrl("data:text/html;charset=UTF-8,"+encodeURIComponent(this.value)),this.cdRef.detectChanges())}openPageBuilder(){const e=this.fieldconfig.bodySPBField||"body_spb";this.modal.openModal("SpicePageBuilder",!0,this.injector).subscribe((t=>{this.value&&(t.instance.spicePageBuilderService.page=JSON.parse(JSON.stringify(this.model.getField(e)))),t.instance.spicePageBuilderService.response.subscribe((i=>{if(!i)return;this.model.setField(e,i);const s=this.modal.await("LBL_PARSING_HTML");this.backend.postRequest("common/mjml/json2html",{},{json:this.model.getField(e)}).subscribe((e=>{if(!e||!e.html)return this.toast.sendToast(this.language.getLabel("ERR_FAILED_TO_EXECUTE"),"error"),s.emit(!0),s.complete();this.parsedHtml=this.sanitizer.bypassSecurityTrustResourceUrl("data:text/html;charset=UTF-8,"+encodeURIComponent(e.html)),this.value=e.html,s.emit(!0),s.complete()})),t.instance.self.destroy()}))}))}setIframeHeight(){const e=parseInt(this.fieldconfig.initialHeight,10);e&&!isNaN(e)&&(this.iframeHeight=e)}}return fieldPageBuilder.ɵfac=function(e){return new(e||fieldPageBuilder)(o.Y36(dt.o),o.Y36(rt.e),o.Y36(ct.d),o.Y36(at.Pu),o.Y36(ut.y),o.Y36(pt.A),o.Y36(gt.F0),o.Y36(o.zs3),o.Y36(m.o),o.Y36(o.sBO),o.Y36(x.H7))},fieldPageBuilder.ɵcmp=o.Xpm({type:fieldPageBuilder,selectors:[["field-page-builder"]],features:[o.qOj],decls:6,vars:4,consts:[[1,"slds-grid","slds-grid--vertical-align-center","slds-grid--align-spread"],[3,"fieldname","fieldconfig",4,"ngIf"],["class","slds-button slds-button--icon slds-m-left--xx-small spice-hover-button",3,"click",4,"ngIf"],[3,"fielddisplayclass","editable","fieldconfig",4,"ngIf"],["class","slds-form-element__control",3,"ngClass",4,"ngIf"],[3,"fieldname","fieldconfig"],[1,"slds-button","slds-button--icon","slds-m-left--xx-small","spice-hover-button",3,"click"],[3,"icon"],[3,"fielddisplayclass","editable","fieldconfig"],[1,"slds-size--1-of-1",3,"dblclick"],["style","border: 0; resize: vertical","class","slds-size--1-of-1","sandbox","",3,"src","height",4,"ngIf"],["sandbox","",1,"slds-size--1-of-1",2,"border","0","resize","vertical",3,"src"],[1,"slds-form-element__control",3,"ngClass"],[1,"slds-size--1-of-1","spice-hover-display-children"],[1,"slds-size--1-of-1"],[1,"spice-hover-child","slds-grid",2,"position","absolute","top","0","right","0","bottom","0","left","0","background","#656565","opacity",".8","border-radius","5px"],[1,"slds-align--absolute-center","slds-p-around--x-small",2,"border","1px solid #ddd","border-radius","5px"],[1,"slds-button","slds-button--icon-border-filled","spice-hover-button",3,"click"],[3,"fieldname"]],template:function(e,t){1&e&&(o.TgZ(0,"div",0)(1,"div"),o.YNc(2,ht,1,2,"field-label",1),o.qZA(),o.YNc(3,xt,2,1,"button",2),o.qZA(),o.YNc(4,yt,3,6,"field-generic-display",3),o.YNc(5,_t,9,6,"div",4)),2&e&&(o.xp6(2),o.Q6J("ngIf",t.displayLabel),o.xp6(1),o.Q6J("ngIf",!t.isEditMode()&&t.isEditable()),o.xp6(1),o.Q6J("ngIf",!t.isEditMode()),o.xp6(1),o.Q6J("ngIf",t.isEditable()&&t.isEditMode()))},dependencies:[s.mk,s.O5,mt.q,ft.D,bt.a,v.J],encapsulation:2,changeDetection:0}),fieldPageBuilder})();var Zt=i(4357);let Ct=(()=>{class ModuleSpicePageBuilder{}return ModuleSpicePageBuilder.ɵfac=function(e){return new(e||ModuleSpicePageBuilder)},ModuleSpicePageBuilder.ɵmod=o.oAB({type:ModuleSpicePageBuilder}),ModuleSpicePageBuilder.ɵinj=o.cJS({imports:[s.ez,n.ObjectFields,l.SystemComponents,d.u5,Zt.o,w._t]}),ModuleSpicePageBuilder})();("undefined"==typeof ngJitMode||ngJitMode)&&o.kYT(Ct,{declarations:[lt,He,Qe,Z,u,b,h,it,Z,Ie,ke,Pe,k,Y,W,de,he,Se,wt],imports:[s.ez,n.ObjectFields,l.SystemComponents,d.u5,Zt.o,w._t],exports:[lt]})}}]);