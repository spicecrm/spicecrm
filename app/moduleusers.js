/*!
 * 
 *                     aacService
 *
 *                     release: 2022.02.001
 *
 *                     date: 2022-08-27 21:23:03
 *
 *                     build: 2022.02.001.1661628183471
 *
 */
"use strict";(self.webpackChunkcore=self.webpackChunkcore||[]).push([["src_modules_users_moduleusers_ts"],{3865:(e,s,t)=>{t.r(s),t.d(s,{ModuleUsers:()=>$e});var o=t(6895),i=t(433),n=t(4357),a=t(3121),l=t(3283),r=t(4518),d=t(5478),c=t(1571),u=t(5329),h=t(4044),g=t(5710);let p=(()=>{class UserChangePasswordButton{constructor(e,s,t){this.language=e,this.modal=s,this.model=t}get disabled(){return 0==this.model.getFieldValue("external_auth_only")}execute(){this.modal.openModal("UserChangePasswordModal")}}return UserChangePasswordButton.ɵfac=function(e){return new(e||UserChangePasswordButton)(c.Y36(u.d),c.Y36(h.o),c.Y36(g.o))},UserChangePasswordButton.ɵcmp=c.Xpm({type:UserChangePasswordButton,selectors:[["user-change-password-button"]],decls:2,vars:0,template:function(e,s){1&e&&(c.TgZ(0,"span"),c._uU(1,"Change Password"),c.qZA())},encapsulation:2}),UserChangePasswordButton})();var m=t(529),b=t(5920),f=t(3278),w=t(6625),Z=t(7919),U=t(3463),y=t(9621),A=t(3499),L=t(5767),x=t(1916);function v(e,s){if(1&e&&(c.TgZ(0,"div",18),c._UZ(1,"system-label",19),c._uU(2),c._UZ(3,"br"),c.qZA()),2&e){const e=c.oxw();c.xp6(2),c.hij(": ",e.pwdGuideline,"")}}function S(e,s){if(1&e&&(c.TgZ(0,"div",20),c._uU(1),c.qZA()),2&e){const e=c.oxw();c.xp6(1),c.Oqu(e.pwderror)}}function E(e,s){if(1&e&&(c.TgZ(0,"div",20),c._uU(1),c.qZA()),2&e){const e=c.oxw();c.xp6(1),c.Oqu(e.pwdreperror)}}const M=function(e){return{"slds-has-error":e}};let R=(()=>{class UserChangePasswordModal{constructor(e,s,t,o,i){this.http=e,this.language=s,this.session=t,this.toast=o,this.configuration=i,this.password="",this.newPassword="",this.repeatPassword="",this.pwdCheck=new RegExp("//"),this.pwdGuideline="",this.repFieldVisited=!1,this.self=void 0,this.posting=!1}ngOnInit(){this.getInfo()}get pwderror(){return!(!this.newPassword||this.pwdCheck.test(this.newPassword))&&this.language.getLabel("MSG_PWD_NOT_LEGAL")}get pwdreperror(){return this.newPassword!=this.repeatPassword&&this.language.getLabel("MSG_PWDS_DONT_MATCH")}close(){this.self.destroy()}canSave(){return this.password&&this.newPassword&&!1===this.pwderror&&this.newPassword!==this.password&&!1===this.pwdreperror}save(){this.canSave()&&this.http.post(this.configuration.getBackendUrl()+"/authentication/changepassword",{username:this.session.authData.userName,password:this.password,newPassword:this.newPassword}).subscribe((e=>{this.toast.sendToast(this.language.getLabel("MSG_PWD_CHANGED_SUCCESSFULLY"),"success"),this.close()}),(e=>{this.toast.sendToast(this.language.getLabel("ERR_CHANGING_PWD"),"error",null,10),this.posting=!1}))}getInfo(){let e=this.configuration.getCapabilityConfig("userpassword");this.pwdCheck=new RegExp(e.regex);let s=[];e.onelower&&s.push(this.language.getLabel("MSG_PASSWORD_ONELOWER")),e.oneupper&&s.push(this.language.getLabel("MSG_PASSWORD_ONEUPPER")),e.onenumber&&s.push(this.language.getLabel("MSG_PASSWORD_ONENUMBER")),e.onespecial&&s.push(this.language.getLabel("MSG_PASSWORD_ONESPECIAL")),e.minpwdlength&&s.push(this.language.getLabel("MSG_PASSWORD_LENGTH")+" "+e.minpwdlength),this.pwdGuideline=s.join(", ")}}return UserChangePasswordModal.ɵfac=function(e){return new(e||UserChangePasswordModal)(c.Y36(m.eN),c.Y36(u.d),c.Y36(b.n),c.Y36(f.A),c.Y36(w.C))},UserChangePasswordModal.ɵcmp=c.Xpm({type:UserChangePasswordModal,selectors:[["user-changepassword-modal"]],decls:25,vars:14,consts:[[3,"close"],["label","LBL_CHANGE_PWD"],[1,"slds-form--stacked","slds-text-align--left",3,"submit"],[1,"slds-form-element"],[1,"slds-form-element__label"],["label","LBL_OLD_PWD"],["tabindex","1","autocomplete","off",3,"disabled","ngModel","ngModelChange"],["class","slds-m-bottom--x-small slds-m-top--medium",4,"ngIf"],[1,"slds-form-element",3,"ngClass"],["label","LBL_NEW_PWD"],["tabindex","2","autocomplete","off",3,"ngModel","ngModelChange"],["class","slds-form-element__help",4,"ngIf"],["label","LBL_NEW_PWD_REPEATED"],["tabindex","3","autocomplete","off",3,"ngModel","ngModelChange"],[1,"slds-button","slds-button--neutral",3,"click"],["label","LBL_CANCEL"],[1,"slds-button","slds-button--brand",3,"disabled","click"],["label","LBL_CHANGE_PASSWORD"],[1,"slds-m-bottom--x-small","slds-m-top--medium"],["label","LBL_PWD_GUIDELINE"],[1,"slds-form-element__help"]],template:function(e,s){1&e&&(c.TgZ(0,"system-modal")(1,"system-modal-header",0),c.NdJ("close",(function(){return s.close()})),c._UZ(2,"system-label",1),c.qZA(),c.TgZ(3,"system-modal-content")(4,"div",2),c.NdJ("submit",(function(){return s.save()})),c.TgZ(5,"div",3)(6,"label",4),c._UZ(7,"system-label",5),c.qZA(),c.TgZ(8,"system-input-password",6),c.NdJ("ngModelChange",(function(e){return s.password=e})),c.qZA()(),c.YNc(9,v,4,1,"div",7),c.TgZ(10,"div",8)(11,"label",4),c._UZ(12,"system-label",9),c.qZA(),c.TgZ(13,"system-input-password",10),c.NdJ("ngModelChange",(function(e){return s.newPassword=e})),c.qZA(),c.YNc(14,S,2,1,"div",11),c.qZA(),c.TgZ(15,"div",8)(16,"label",4),c._UZ(17,"system-label",12),c.qZA(),c.TgZ(18,"system-input-password",13),c.NdJ("ngModelChange",(function(e){return s.repeatPassword=e})),c.qZA()(),c.YNc(19,E,2,1,"div",11),c.qZA()(),c.TgZ(20,"system-modal-footer")(21,"button",14),c.NdJ("click",(function(){return s.close()})),c._UZ(22,"system-label",15),c.qZA(),c.TgZ(23,"button",16),c.NdJ("click",(function(){return s.save()})),c._UZ(24,"system-label",17),c.qZA()()()),2&e&&(c.xp6(8),c.Q6J("disabled",s.posting)("ngModel",s.password),c.xp6(1),c.Q6J("ngIf",s.pwdGuideline),c.xp6(1),c.Q6J("ngClass",c.VKq(10,M,s.pwderror)),c.xp6(3),c.Q6J("ngModel",s.newPassword),c.xp6(1),c.Q6J("ngIf",s.pwderror),c.xp6(1),c.Q6J("ngClass",c.VKq(12,M,s.repFieldVisited&&s.pwdreperror)),c.xp6(3),c.Q6J("ngModel",s.repeatPassword),c.xp6(1),c.Q6J("ngIf",s.pwdreperror),c.xp6(4),c.Q6J("disabled",!s.canSave()))},dependencies:[o.mk,o.O5,i.JJ,i.On,Z.Z,U._,y.j,A.x,L.p,x.y],encapsulation:2}),UserChangePasswordModal})();var T=t(4505),P=t(3441),C=t(2656),D=t(7514),N=t(8859),J=t(4021),O=t(3398);function q(e,s){if(1&e&&(c.TgZ(0,"div"),c._UZ(1,"system-label",30),c._uU(2),c._UZ(3,"br"),c.qZA()),2&e){const e=c.oxw();c.xp6(2),c.hij(": ",e.pwdGuideline,"")}}function k(e,s){1&e&&(c.TgZ(0,"div",31),c._UZ(1,"system-label",32),c.qZA())}function B(e,s){1&e&&(c.TgZ(0,"div",31),c._UZ(1,"system-label",33),c.qZA())}let G=(()=>{class UserResetPasswordModal{constructor(e,s,t,o,i,n,a){this.model=e,this.language=s,this.toast=t,this.session=o,this.backend=i,this.configuration=n,this.helper=a,this.self=void 0,this.password=void 0,this.repeatPassword=void 0,this.pwdCheck=new RegExp("//"),this.pwdGuideline=void 0,this.autogenerate=!1,this.sendByEmail=!1,this.showPassword=!1,this.forceReset=!0,this.autocompletebreaker="",this.updating=!1,this.getInfo()}get passwordError(){return this.password&&!this.pwdCheck.test(this.password)}get repeatPasswordError(){return this.repeatPassword&&this.password!==this.repeatPassword}get autoGenerate(){return this.autogenerate}set autoGenerate(e){this.autogenerate=e,e&&(this.password=this.helper.generatePassword(this.configuration.getCapabilityConfig("userpassword")),this.repeatPassword=this.password)}toggleShowPassword(){this.showPassword=!this.showPassword}copyPassword(){if(!this.autoGenerate)return;let e=document.createElement("textarea");e.style.position="fixed",e.style.left="0",e.style.top="0",e.style.opacity="0",e.value=this.password,document.body.appendChild(e),e.focus(),e.select(),document.execCommand("copy"),document.body.removeChild(e),this.toast.sendToast("Password copied","success")}getInfo(){let e=this.configuration.getCapabilityConfig("userpassword");this.pwdCheck=new RegExp(e.regex);let s=[];e.onelower&&s.push(this.language.getLabel("MSG_PASSWORD_ONELOWER")),e.oneupper&&s.push(this.language.getLabel("MSG_PASSWORD_ONEUPPER")),e.onenumber&&s.push(this.language.getLabel("MSG_PASSWORD_ONENUMBER")),e.onespecial&&s.push(this.language.getLabel("MSG_PASSWORD_ONESPECIAL")),e.minpwdlength&&s.push(this.language.getLabel("MSG_PASSWORD_LENGTH")+" "+e.minpwdlength),this.pwdGuideline=s.join(", ")}get canSave(){return!(this.updating||this.passwordError||this.repeatPasswordError||!this.session.isAdmin)}setPassword(){this.canSave&&(this.updating=!0,this.backend.postRequest(`module/Users/${this.model.id}/password/reset`,{},{newPassword:this.password,forceReset:this.forceReset,sendEmail:this.sendByEmail}).subscribe((e=>{this.close(),this.toast.sendToast("Password Reset!","info")}),(e=>{this.updating=!1,this.toast.sendToast("Error resetting the password","error")})))}close(){this.self.destroy()}}return UserResetPasswordModal.ɵfac=function(e){return new(e||UserResetPasswordModal)(c.Y36(g.o),c.Y36(u.d),c.Y36(f.A),c.Y36(b.n),c.Y36(T.y),c.Y36(w.C),c.Y36(P._))},UserResetPasswordModal.ɵcmp=c.Xpm({type:UserResetPasswordModal,selectors:[["user-reset-password-modal"]],decls:37,vars:22,consts:[["size","small"],[3,"close"],["label","LBL_RESET_PASSWORD"],[3,"system-overlay-loading-spinner"],[1,"slds-form--stacked","slds-text-align--left"],[4,"ngIf"],[1,"slds-grid"],[1,"slds-grow"],[1,"slds-form-element","slds-m-vertical--small"],[1,"slds-form-element__control","slds-input-has-icon","slds-input-has-icon--left"],[3,"icon","addclasses"],["system-placeholder","MSG_ENTER_NEW_PASSWORD",1,"slds-input",3,"autocomplete","type","ngModel","disabled","ngModelChange"],["passField","ngModel"],["class","slds-form-element__help slds-text-color--error",4,"ngIf"],["system-placeholder","MSG_REPEAT_PASSWORD",1,"slds-input",3,"autocomplete","type","ngModel","disabled","ngModelChange"],["repPassField","ngModel"],[1,"slds-p-left--xx-small","slds-p-vertical--small"],[1,"slds-button","slds-button--icon-border","slds-button--neutral",3,"click"],["size","medium",3,"icon"],[1,"slds-button","slds-button--icon-border","slds-button--neutral",3,"disabled","click"],["icon","copy","size","medium"],[3,"ngModel","ngModelChange"],["label","LBL_AUTO_GENERATE"],[1,"slds-m-left--small",3,"ngModel","ngModelChange"],["label","LBL_SEND_BY_EMAIL"],["label","LBL_FORCE_RESET"],[1,"slds-button","slds-button--neutral",3,"click"],["label","LBL_CANCEL"],[1,"slds-button","slds-button--brand",3,"disabled","click"],["label","LBL_SET_PASSWORD"],["label","LBL_PWD_GUIDELINE",2,"display","inline-block"],[1,"slds-form-element__help","slds-text-color--error"],["label","LBL_PASSWORD_REQ_CHECK_ERR"],["label","LBL_PASSWORDS_DONT_MATCH"]],template:function(e,s){1&e&&(c.TgZ(0,"system-modal",0)(1,"system-modal-header",1),c.NdJ("close",(function(){return s.close()})),c._UZ(2,"system-label",2),c.qZA(),c.TgZ(3,"system-modal-content",3)(4,"div",4)(5,"div",4),c.YNc(6,q,4,1,"div",5),c.TgZ(7,"div",6)(8,"div",7)(9,"div",8)(10,"div",9),c._UZ(11,"system-utility-icon",10),c.TgZ(12,"input",11,12),c.NdJ("ngModelChange",(function(e){return s.password=e})),c.qZA()(),c.YNc(14,k,2,0,"div",13),c.qZA(),c.TgZ(15,"div",8)(16,"div",9),c._UZ(17,"system-utility-icon",10),c.TgZ(18,"input",14,15),c.NdJ("ngModelChange",(function(e){return s.repeatPassword=e})),c.qZA()(),c.YNc(20,B,2,0,"div",13),c.qZA()(),c.TgZ(21,"div",16)(22,"button",17),c.NdJ("click",(function(){return s.toggleShowPassword()})),c._UZ(23,"system-button-icon",18),c.qZA(),c.TgZ(24,"button",19),c.NdJ("click",(function(){return s.copyPassword()})),c._UZ(25,"system-button-icon",20),c.qZA()()()(),c.TgZ(26,"system-checkbox",21),c.NdJ("ngModelChange",(function(e){return s.autoGenerate=e})),c._UZ(27,"system-label",22),c.qZA(),c.TgZ(28,"system-checkbox",23),c.NdJ("ngModelChange",(function(e){return s.sendByEmail=e})),c._UZ(29,"system-label",24),c.qZA(),c.TgZ(30,"system-checkbox",23),c.NdJ("ngModelChange",(function(e){return s.forceReset=e})),c._UZ(31,"system-label",25),c.qZA()()(),c.TgZ(32,"system-modal-footer")(33,"button",26),c.NdJ("click",(function(){return s.close()})),c._UZ(34,"system-label",27),c.qZA(),c.TgZ(35,"button",28),c.NdJ("click",(function(){return s.setPassword()})),c._UZ(36,"system-label",29),c.qZA()()()),2&e&&(c.xp6(3),c.Q6J("system-overlay-loading-spinner",s.updating),c.xp6(3),c.Q6J("ngIf",s.pwdGuideline),c.xp6(5),c.Q6J("icon","lock")("addclasses","slds-input__icon slds-icon-text-default"),c.xp6(1),c.Q6J("autocomplete",s.autocompletebreaker)("type",s.showPassword?"text":"password")("ngModel",s.password)("disabled",s.autoGenerate),c.xp6(2),c.Q6J("ngIf",s.passwordError),c.xp6(3),c.Q6J("icon","lock")("addclasses","slds-input__icon slds-icon-text-default"),c.xp6(1),c.Q6J("autocomplete",s.autocompletebreaker)("type",s.showPassword?"text":"password")("ngModel",s.repeatPassword)("disabled",s.autoGenerate),c.xp6(2),c.Q6J("ngIf",s.repeatPasswordError),c.xp6(3),c.Q6J("icon",s.showPassword?"hide":"preview"),c.xp6(1),c.Q6J("disabled",!s.autoGenerate),c.xp6(2),c.Q6J("ngModel",s.autoGenerate),c.xp6(2),c.Q6J("ngModel",s.sendByEmail),c.xp6(2),c.Q6J("ngModel",s.forceReset),c.xp6(5),c.Q6J("disabled",!s.canSave))},dependencies:[o.O5,i.Fj,i.JJ,i.On,C.J,D.U,U._,y.j,A.x,L.p,x.y,N.r,J._,O.A],encapsulation:2}),UserResetPasswordModal})(),Y=(()=>{class UserResetPasswordButton{constructor(e,s,t,o,i){this.modal=e,this.language=s,this.model=t,this.session=o,this.injector=i}get disabled(){return!this.session.isAdmin||"Active"!=this.model.getField("status")||0!=this.model.getFieldValue("external_auth_only")}execute(){this.session.isAdmin&&this.modal.openModal("UserResetPasswordModal",!0,this.injector)}}return UserResetPasswordButton.ɵfac=function(e){return new(e||UserResetPasswordButton)(c.Y36(h.o),c.Y36(u.d),c.Y36(g.o),c.Y36(b.n),c.Y36(c.zs3))},UserResetPasswordButton.ɵcmp=c.Xpm({type:UserResetPasswordButton,selectors:[["ng-component"]],decls:2,vars:0,template:function(e,s){1&e&&(c.TgZ(0,"span"),c._uU(1,"Reset Password"),c.qZA())},encapsulation:2}),UserResetPasswordButton})();var I=t(2294),Q=t(7579),F=t(5547),j=t(2422),W=t(3369),H=t(4154),z=t(3634),$=t(1553),V=t(1819),K=t(4211),X=t(6268),ee=t(4845),se=t(7763);function te(e,s){1&e&&(c.TgZ(0,"div",2),c._uU(1," The preferences of the user are only viewable/editable by himself.\n"),c.qZA())}function oe(e,s){if(1&e&&(c.TgZ(0,"span"),c._uU(1),c.qZA()),2&e){const e=c.oxw(2);c.xp6(1),c.Oqu(e.homeDashboardData.name)}}function ie(e,s){if(1&e&&(c.TgZ(0,"option",20),c._uU(1),c.qZA()),2&e){const e=s.$implicit;c.Q6J("value",e.id),c.xp6(1),c.Oqu(e.name)}}const ne=function(e,s){return{module:"DashboardSets",id:e,data:s}},ae=function(){return{link:!0,hidelabel:!0}};function le(e,s){if(1&e&&c._UZ(0,"field-container",21),2&e){const e=c.oxw(2);c.Q6J("system-model-provider",c.WLB(2,ne,e.preferences.home_dashboardset,e.dashboardSetData))("fieldconfig",c.DdM(5,ae))}}function re(e,s){if(1&e&&(c.TgZ(0,"option",20),c._uU(1),c.qZA()),2&e){const e=s.$implicit;c.Q6J("value",e.id),c.xp6(1),c.hij(" ",e.name," ")}}function de(e,s){if(1&e){const e=c.EpF();c.TgZ(0,"div",22)(1,"button",23),c.NdJ("click",(function(){c.CHM(e);const s=c.oxw(2);return c.KtG(s.cancel())})),c._UZ(2,"system-label",24),c.qZA(),c.TgZ(3,"button",25),c.NdJ("click",(function(){c.CHM(e);const s=c.oxw(2);return c.KtG(s.save())})),c._UZ(4,"system-label",26),c.qZA()()}}function ce(e,s){if(1&e){const e=c.EpF();c.TgZ(0,"div",3),c._UZ(1,"system-preferences-panel",4),c.TgZ(2,"system-collapsable-tab",5)(3,"div",6)(4,"system-preferences-panel-item",7)(5,"system-preferences-panel-item-display"),c.YNc(6,oe,2,1,"span",8),c.qZA(),c.TgZ(7,"system-preferences-panel-item-edit")(8,"div",9)(9,"select",10),c.NdJ("ngModelChange",(function(s){c.CHM(e);const t=c.oxw();return c.KtG(t.preferences.home_dashboard=s)}))("ngModelChange",(function(s){c.CHM(e);const t=c.oxw();return c.KtG(t.setHomeDashboardData(s))})),c.YNc(10,ie,2,2,"option",11),c.qZA()()()(),c.TgZ(11,"system-preferences-panel-item",12),c.YNc(12,le,1,6,"field-container",13),c.TgZ(13,"system-preferences-panel-item-edit")(14,"div",9)(15,"select",10),c.NdJ("ngModelChange",(function(s){c.CHM(e);const t=c.oxw();return c.KtG(t.setDashboardSetData(s))})),c._UZ(16,"option"),c.YNc(17,re,2,2,"option",11),c.qZA()()()(),c.TgZ(18,"system-preferences-panel-item",14)(19,"system-preferences-panel-item-display"),c._uU(20),c.qZA(),c.TgZ(21,"system-preferences-panel-item-edit")(22,"div",9)(23,"select",10),c.NdJ("ngModelChange",(function(s){c.CHM(e);const t=c.oxw();return c.KtG(t.preferences.home_assistant=s)})),c._UZ(24,"option"),c.TgZ(25,"option",15),c._UZ(26,"system-label",16),c.qZA(),c.TgZ(27,"option",17),c._UZ(28,"system-label",18),c.qZA()()()()()()(),c.YNc(29,de,5,0,"div",19),c.qZA()}if(2&e){const e=c.oxw();c.Q6J("system-overlay-loading-spinner",e.isLoading),c.xp6(1),c.Q6J("preferences",e.preferences),c.xp6(1),c.Q6J("collapsible",!1),c.xp6(4),c.Q6J("ngIf",e.homeDashboardData&&e.homeDashboardData.name),c.xp6(3),c.Q6J("ngModel",e.preferences.home_dashboard),c.xp6(1),c.Q6J("ngForOf",e.dashboards),c.xp6(2),c.Q6J("ngIf",!!e.preferences.home_dashboardset),c.xp6(3),c.Q6J("ngModel",e.preferences.home_dashboardset),c.xp6(2),c.Q6J("ngForOf",e.dashboardSets),c.xp6(3),c.hij(" ",e.preferences.home_assistant," "),c.xp6(3),c.Q6J("ngModel",e.preferences.home_assistant),c.xp6(6),c.Q6J("ngIf",e.view.isEditMode())}}let ue=(()=>{class UserPreferences{constructor(e,s,t,o,i,n,a,l,r,d,c){this.backend=e,this.view=s,this.toast=t,this.currency=o,this.language=i,this.preferencesService=n,this.session=a,this.model=l,this.broadcast=r,this.configuration=d,this.metadata=c,this.preferences={},this.names=["export_delimiter","default_export_charset","currency","default_currency_significant_digits","datef","timef","timezone","num_grp_sep","dec_sep","default_locale_name_format","week_day_start","week_days_count","calendar_day_start_hour","calendar_day_end_hour","reminder_time","home_dashboard","home_dashboardset","home_assistant","help_icon","navigation_paradigm","distance_unit_system"],this.defaultDashboardPlaceHolder={},this.dashboardSets=[],this.dashboardSetData={},this.homeDashboardData={},this.dashboards=[],this.loadedSubscription=new Q.x,this.isLoading=!0,this.loadInitialValues()}ngOnDestroy(){this.subscriptions.unsubscribe()}loadInitialValues(){this.view.isEditable=!0,this.isCurrentUser=this.session.authData.userId==this.model.getField("id");const e=this.configuration.getSystemParamater("aclcontroller");this.canEdit=e&&"spiceacl"!=e?this.isCurrentUser||this.session.isAdmin&&this.configuration.getSystemParamater("enableSettingUserPrefsByAdmin"):this.metadata.checkModuleAcl("UserPreferences","edit"),this.loadDasboardPlaceHolder(),this.loadDashboardsLists(),this.loadPreferences()}loadDasboardPlaceHolder(){this.defaultDashboardPlaceHolder={id:"",name:this.language.getLabel("LBL_ROLE_DEFAULT_DASHBOARD")}}loadPreferences(){this.isCurrentUser?(this.subscriptions=this.loadedSubscription.subscribe((()=>{this.isLoading=!1,this.preferences=_.pick(this.preferencesService.unchangedPreferences.global,this.names),this.setDashboardSetData(this.preferences.home_dashboardset),this.setHomeDashboardData(this.preferences.home_dashboard)})),this.preferencesService.getPreferences(this.loadedSubscription)):this.canEdit&&this.backend.getRequest(`module/Users/${this.model.id}/preferences/global`,{}).subscribe((e=>{this.isLoading=!1,this.preferences=e,this.setDashboardSetData(e.home_dashboardset),this.setHomeDashboardData(this.preferences.home_dashboard)}),(e=>{this.toast.sendToast(this.language.getLabel("LBL_ERROR")+" "+e.status,"error",e.error.error.message),403===e.status&&(this.canEdit=!0)}))}loadDashboardsLists(){this.backend.getList("Dashboards",[{sortfield:"name",sortdirection:"DESC"}],{limit:-99}).subscribe((e=>{this.dashboards=[].concat(this.dashboards,this.defaultDashboardPlaceHolder,e.list),this.setHomeDashboardData(this.preferences.home_dashboard)})),this.backend.getList("DashboardSets",[{sortfield:"name",sortdirection:"DESC"}],{limit:-99}).subscribe((e=>{this.dashboardSets=e.list,this.setDashboardSetData(this.preferences.home_dashboardset)}))}setDashboardSetData(e){this.preferences.home_dashboardset=e,this.dashboardSetData=this.dashboardSets.find((s=>s.id==e))}setHomeDashboardData(e){this.homeDashboardData=this.dashboards.find((s=>s.id==e))}cancel(){this.view.setViewMode()}save(){this.isCurrentUser?(this.preferencesService.setPreferences(this.preferences).subscribe((()=>{this.toast.sendToast(this.language.getLabel("LBL_DATA_SAVED"),"success"),this.preferences=_.pick(this.preferencesService.unchangedPreferences.global,this.names),this.broadcast.broadcastMessage("userpreferences.save")})),this.view.setViewMode()):this.backend.postRequest(`module/Users/${this.model.id}/preferences/global`,{},this.preferences).subscribe((e=>{this.preferences=e,this.view.setViewMode()}),(e=>{this.toast.sendToast(this.language.getLabel("LBL_ERROR")+" "+e.status,"error",e.error.error.message)}))}}return UserPreferences.ɵfac=function(e){return new(e||UserPreferences)(c.Y36(T.y),c.Y36(I.e),c.Y36(f.A),c.Y36(F.A),c.Y36(u.d),c.Y36(j.z),c.Y36(b.n),c.Y36(g.o),c.Y36(W.f),c.Y36(w.C),c.Y36(H.Pu))},UserPreferences.ɵcmp=c.Xpm({type:UserPreferences,selectors:[["user-preferences"]],features:[c._Bn([I.e])],decls:3,vars:2,consts:[["class","slds-text-align--center slds-m-top--x-large",4,"ngIf","ngIfElse"],["preferencesContainer",""],[1,"slds-text-align--center","slds-m-top--x-large"],[3,"system-overlay-loading-spinner"],[3,"preferences"],["tabtitle","LBL_HOME_PREFERENCES",3,"collapsible"],[1,"slds-grid"],["itemlabel","LBL_HOME_DASHBOARD",1,"slds-size--1-of-3"],[4,"ngIf"],[1,"slds-select_container"],[1,"slds-select",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["itemlabel","LBL_HOME_DASHBOARDSET",1,"slds-size--1-of-3"],["field","name",3,"system-model-provider","fieldconfig",4,"ngIf"],["itemlabel","LBL_HOME_ASSISTANT",1,"slds-size--1-of-3"],["value","visible"],["label","LBL_VISIBLE"],["value","hidden"],["label","LBL_HIDDEN"],["class","slds-p-around--small slds-align--absolute-center",4,"ngIf"],[3,"value"],["field","name",3,"system-model-provider","fieldconfig"],[1,"slds-p-around--small","slds-align--absolute-center"],[1,"slds-button","slds-button--neutral",3,"click"],["label","LBL_CANCEL"],[1,"slds-button","slds-button--brand","slds-button-space-left",3,"click"],["label","LBL_SAVE"]],template:function(e,s){if(1&e&&(c.YNc(0,te,2,0,"div",0),c.YNc(1,ce,30,12,"ng-template",null,1,c.W1O)),2&e){const e=c.MAs(2);c.Q6J("ngIf",!s.canEdit)("ngIfElse",e)}},dependencies:[o.sg,o.O5,i.YN,i.Kr,i.EJ,i.JJ,i.On,z.j,$.z,U._,V.W,K.w,X.f,ee.z,se.u,J._],encapsulation:2}),UserPreferences})();var he=t(34),ge=t(1058);function pe(e,s){if(1&e&&c._UZ(0,"system-custom-icon",20),2&e){const e=c.oxw(2);c.s9C("title",e.language.getLabel("LBL_CUSTOM_ROLE"))}}function me(e,s){if(1&e){const e=c.EpF();c.TgZ(0,"td",21)(1,"button",22),c.NdJ("click",(function(){c.CHM(e);const s=c.oxw(),t=s.index,o=s.$implicit,i=c.oxw();return c.KtG(i.deleteRole(t,o.id,"1"==o.defaultrole))})),c._UZ(2,"system-button-icon",23),c.qZA()()}if(2&e){const e=c.oxw().$implicit;c.xp6(1),c.Q6J("disabled","1"==e.defaultrole),c.xp6(1),c.Q6J("icon","delete")}}function be(e,s){if(1&e){const e=c.EpF();c.TgZ(0,"tr",10),c.ynx(1),c.TgZ(2,"td",11)(3,"span",12),c._uU(4),c.ALo(5,"uppercase"),c.qZA()(),c.TgZ(6,"td",4),c.YNc(7,pe,1,1,"system-custom-icon",13),c._uU(8),c.qZA(),c.TgZ(9,"td",14)(10,"span",15)(11,"input",16),c.NdJ("change",(function(){const s=c.CHM(e).$implicit,t=c.oxw();return c.KtG(t.setDefaultRole(s.id))})),c.qZA(),c.TgZ(12,"label",17),c._UZ(13,"span",18),c.qZA()()(),c.YNc(14,me,3,2,"td",19),c.BQk(),c.qZA()}if(2&e){const e=s.$implicit,t=c.oxw();c.xp6(3),c.Gre("slds-avatar slds-avatar--small slds-align--absolute-center ",e.icon,""),c.xp6(1),c.hij(" ",e.label?t.language.getLabel(e.label,"","short"):c.lcZ(5,14,e.name.substring(0,2))," "),c.xp6(3),c.Q6J("ngIf",e.custom),c.xp6(1),c.hij(" ",t.language.getAppLanglabel(e.label)||e.name,""),c.xp6(3),c.hYB("id","",t.componentId,"-",e.id,""),c.Q6J("name",t.componentId+"-radio-default-role")("disabled",!t.session.authData.admin)("checked","1"==e.defaultrole),c.xp6(1),c.hYB("for","",t.componentId,"-",e.id,""),c.xp6(2),c.Q6J("ngIf",t.session.authData.admin)}}function fe(e,s){if(1&e){const e=c.EpF();c.TgZ(0,"div",24)(1,"button",25),c.NdJ("click",(function(s){c.CHM(e);const t=c.oxw();return c.KtG(t.addRole(s))})),c._UZ(2,"system-label",26),c._uU(3," … "),c.qZA()()}}let _e=(()=>{class UserRoles{constructor(e,s,t,o,i,n){this.backend=e,this.toast=s,this.modal=t,this.model=o,this.session=i,this.language=n,this.userRoles=[],this.noneUserRoles=[],this.loading=!0,this.componentId=_.uniqueId(),this.backend.getRequest("configuration/spiceui/core/roles/"+this.model.id).subscribe((e=>{this.userRoles=e.allRoles.filter((s=>{for(let t of e.userRoles)if(s.id==t.sysuirole_id)return s.defaultrole=t.defaultrole,!0;return!1})),this.userRoles=this.sortRoles(this.userRoles),this.noneUserRoles=e.allRoles.filter((e=>{for(let s of this.userRoles)if(e.id==s.id)return!1;return!0})),this.noneUserRoles=this.sortRoles(this.noneUserRoles),this.noneUserRoles.map((e=>e.defaultrole="0")),this.loading=!1}))}sortRoles(e){return e?e.sort(((e,s)=>this.language.getLabel(e.label??e.name).localeCompare(this.language.getLabel(s.label??s.name)))):[]}addRole(e){this.session.authData.admin&&this.modal.openModal("UserRolesAddModal").subscribe((e=>{e.instance.user_id=this.model.id,e.instance.noneUserRoles=this.noneUserRoles,e.instance.response.subscribe((e=>{e&&"object"==typeof e&&(this.userRoles.push(e),1===this.userRoles.length&&this.setDefaultRole(e.id),this.userRoles=this.sortRoles(this.userRoles)),e&&"string"==typeof e&&(this.noneUserRoles=this.noneUserRoles.filter((s=>s.id!=e)))}))}))}deleteRole(e,s,t){this.session.authData.admin&&!t&&this.modal.confirm(this.language.getLabel("MSG_DELETE_RECORD","","long"),this.language.getLabel("MSG_DELETE_RECORD")).subscribe((t=>{t&&this.backend.deleteRequest(`configuration/spiceui/core/roles/${s}/${this.model.id}`).subscribe((s=>{if("error"==s.status)return this.toast.sendToast(s.message,"error"),!1;let t=this.userRoles.splice(e,1);this.noneUserRoles.push(t[0]),this.noneUserRoles=this.sortRoles(this.noneUserRoles),this.toast.sendToast(this.language.getLabel("MSG_SUCCESSFULLY_DELETED"),"success")}),(e=>this.toast.sendToast(this.language.getLabel("ERR_CANT_DELETE"),"error")))}))}setDefaultRole(e){this.session.authData.admin&&(this.userRoles.every((s=>(s.id==e?s.defaultrole="1":s.defaultrole="0",!0))),this.backend.postRequest(`configuration/spiceui/core/roles/${e}/${this.model.id}/default`))}}return UserRoles.ɵfac=function(e){return new(e||UserRoles)(c.Y36(T.y),c.Y36(f.A),c.Y36(h.o),c.Y36(g.o),c.Y36(b.n),c.Y36(u.d))},UserRoles.ɵcmp=c.Xpm({type:UserRoles,selectors:[["user-roles"]],decls:12,vars:3,consts:[["system-to-bottom","",3,"system-overlay-loading-spinner"],[1,"slds-table","slds-table_bordered","slds-table_cell-buffer",2,"box-shadow","0px 2px 5px 0 rgba(0,0,0,.1)","border-radius",".15rem"],[1,"slds-table--bordered","slds-text-align_center"],[1,"slds-text-title--caps"],[2,"padding",".75rem 1rem"],["label","LBL_NAME"],["colspan","2"],["label","LBL_DEFAULT"],["class","slds-hint-parent",4,"ngFor","ngForOf"],["class","slds-p-around--small slds-align--absolute-center",4,"ngIf"],[1,"slds-hint-parent"],[2,"padding-left","1rem","padding-right","0","width","1.5rem"],[2,"margin","0"],["icon","custom","size","x-small","style","display:inline-block",3,"title",4,"ngIf"],[1,"slds-text-align_center",2,"width","5rem"],[1,"slds-radio"],["type","radio",3,"name","id","disabled","checked","change"],[1,"slds-radio__label",3,"for"],[1,"slds-radio_faux"],["style","padding-right: 1rem;width: 35px",4,"ngIf"],["icon","custom","size","x-small",2,"display","inline-block",3,"title"],[2,"padding-right","1rem","width","35px"],[1,"slds-button","slds-button--icon",3,"disabled","click"],[3,"icon"],[1,"slds-p-around--small","slds-align--absolute-center"],[1,"slds-button","slds-button--brand","slds-button-space-left",3,"click"],["label","LBL_ASSIGN_ROLE"]],template:function(e,s){1&e&&(c.TgZ(0,"div",0)(1,"table",1)(2,"thead",2)(3,"tr",3),c._UZ(4,"th"),c.TgZ(5,"th",4),c._UZ(6,"system-label",5),c.qZA(),c.TgZ(7,"th",6),c._UZ(8,"system-label",7),c.qZA()()(),c.TgZ(9,"tbody"),c.YNc(10,be,15,16,"tr",8),c.qZA()(),c.YNc(11,fe,4,0,"div",9),c.qZA()),2&e&&(c.Q6J("system-overlay-loading-spinner",s.loading),c.xp6(10),c.Q6J("ngForOf",s.userRoles),c.xp6(1),c.Q6J("ngIf",s.noneUserRoles.length>0&&s.session.authData.admin))},dependencies:[o.sg,o.O5,C.J,he.$,U._,ge.H,J._,o.gd],encapsulation:2}),UserRoles})();function we(e,s){if(1&e&&(c.TgZ(0,"option",18),c._uU(1),c.ALo(2,"uppercase"),c.qZA()),2&e){const e=s.$implicit,t=c.oxw(2);c.Q6J("value",e.id),c.xp6(1),c.hij(" ",(e.label?t.language.getLabel(e.label,"short"):c.lcZ(2,2,e.name.substring(0,2)))+" "+t.language.getLabel(e.label)," ")}}function Ze(e,s){if(1&e&&(c.ynx(0),c.YNc(1,we,3,4,"option",17),c.BQk()),2&e){const e=c.oxw();c.xp6(1),c.Q6J("ngForOf",e.nonUserGlobalRoles)}}function Ue(e,s){if(1&e&&(c.TgZ(0,"option",18),c._uU(1),c.ALo(2,"uppercase"),c._UZ(3,"system-label",20),c._uU(4,") "),c.qZA()),2&e){const e=s.$implicit,t=c.oxw(2);c.Q6J("value",e.id),c.xp6(1),c.hij(" ",(e.label?t.language.getLabel(e.label,"short"):c.lcZ(2,2,e.name.substring(0,2)))+" "+t.language.getLabel(e.label)," (")}}function ye(e,s){if(1&e&&(c.TgZ(0,"optgroup",19),c.YNc(1,Ue,5,4,"option",17),c.qZA()),2&e){const e=c.oxw();c.s9C("label",e.language.getLabel("LBL_CUSTOM_ROLES")),c.xp6(1),c.Q6J("ngForOf",e.nonUserCustomRoles)}}let Ae=(()=>{class UserRolesAddModal{constructor(e,s,t){this.language=e,this.toast=s,this.backend=t,this.user_id="",this.noneUserRoles=[],this.sysuirole_id="",this.response=null,this.responseSubject=null,this.responseSubject=new Q.x,this.response=this.responseSubject.asObservable()}get nonUserGlobalRoles(){let e=[];return this.noneUserRoles.forEach((s=>{s.custom||e.push(s)})),e}get nonUserCustomRoles(){let e=[];return this.noneUserRoles.forEach((s=>{s.custom&&e.push(s)})),e}setRole(e){this.sysuirole_id=e}cancel(){this.responseSubject.next(!1),this.responseSubject.complete(),this.self.destroy()}onModalEscX(){this.cancel()}canSubmit(){return this.sysuirole_id.length>0}add(){this.backend.postRequest(`configuration/spiceui/core/roles/${this.sysuirole_id}/${this.user_id}/new`).subscribe((e=>{let s;"error"==e.status&&(this.toast.sendToast(e.message,"error"),this.responseSubject.complete(),this.self.destroy()),this.noneUserRoles.every((e=>(e.id==this.sysuirole_id&&(s=e),!0))),this.responseSubject.next(s),this.responseSubject.next(this.sysuirole_id),this.responseSubject.complete(),this.self.destroy(),this.toast.sendToast(this.language.getLabel("MSG_SUCCESSFULLY_ADDED"),"success")}),(e=>{this.toast.sendToast("Error, try again later","error"),this.self.destroy()}))}}return UserRolesAddModal.ɵfac=function(e){return new(e||UserRolesAddModal)(c.Y36(u.d),c.Y36(f.A),c.Y36(T.y))},UserRolesAddModal.ɵcmp=c.Xpm({type:UserRolesAddModal,selectors:[["user-roles-add-modal"]],inputs:{user_id:"user_id",noneUserRoles:"noneUserRoles"},decls:21,vars:3,consts:[[3,"close"],["label","LBL_ASSIGN_ROLE"],[1,"slds-grid--pull-padded"],[1,"slds-form-element","slds-m-vertical--xxx-small","slds-m-horizontal--small"],[1,"slds-form-element__label"],["label","LBL_ROLES"],[1,"slds-form-element__control"],[1,"slds-select_container"],[1,"slds-select",3,"change"],["value",""],["label","LBL_SELECT"],[4,"ngIf"],[3,"label",4,"ngIf"],[1,"slds-button","slds-button--neutral",3,"click"],["label","LBL_CANCEL"],[1,"slds-button","slds-button--brand",3,"disabled","click"],["label","LBL_ASSIGN"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[3,"label"],["label","LBL_CUSTOM"]],template:function(e,s){1&e&&(c.TgZ(0,"system-modal")(1,"system-modal-header",0),c.NdJ("close",(function(){return s.cancel()})),c._UZ(2,"system-label",1),c.qZA(),c.TgZ(3,"system-modal-content")(4,"div",2)(5,"div",3)(6,"label",4),c._UZ(7,"system-label",5),c.qZA(),c.TgZ(8,"div",6)(9,"div",7)(10,"select",8),c.NdJ("change",(function(e){return s.setRole(e.srcElement.value)})),c.TgZ(11,"option",9),c._UZ(12,"system-label",10),c._uU(13," …"),c.qZA(),c.YNc(14,Ze,2,1,"ng-container",11),c.YNc(15,ye,2,2,"optgroup",12),c.qZA()()()()()(),c.TgZ(16,"system-modal-footer")(17,"button",13),c.NdJ("click",(function(){return s.cancel()})),c._UZ(18,"system-label",14),c.qZA(),c.TgZ(19,"button",15),c.NdJ("click",(function(){return s.add()})),c._UZ(20,"system-label",16),c.qZA()()()),2&e&&(c.xp6(14),c.Q6J("ngIf",s.nonUserGlobalRoles.length),c.xp6(1),c.Q6J("ngIf",s.nonUserCustomRoles.length),c.xp6(4),c.Q6J("disabled",!s.canSubmit()))},dependencies:[o.sg,o.O5,i.YN,i.Kr,U._,y.j,A.x,L.p,x.y,o.gd],encapsulation:2}),UserRolesAddModal})(),Le=(()=>{class UserAddButton{constructor(e,s,t,o,i,n,a){this.modal=e,this.language=s,this.model=t,this.session=o,this.metadata=i,this.injector=n,this.configurationService=a,this.disabled=!0;let l=this.configurationService.getSystemParamater("aclcontroller");l&&"spiceacl"!=l?this.session.isAdmin&&(this.disabled=!1):this.metadata.checkModuleAcl("Users","create")&&(this.disabled=!1)}execute(){this.modal.openModal("UserAddModal",!0,this.injector)}}return UserAddButton.ɵfac=function(e){return new(e||UserAddButton)(c.Y36(h.o),c.Y36(u.d),c.Y36(g.o),c.Y36(b.n),c.Y36(H.Pu),c.Y36(c.zs3),c.Y36(w.C))},UserAddButton.ɵcmp=c.Xpm({type:UserAddButton,selectors:[["user-add-button"]],decls:2,vars:0,consts:[["label","LBL_NEW"]],template:function(e,s){1&e&&(c.TgZ(0,"span"),c._UZ(1,"system-label",0),c.qZA())},dependencies:[U._],encapsulation:2}),UserAddButton})();var xe=t(6163),ve=t(5638),Se=t(9062),Ee=t(2868);const Me=["addcontainer"];function Re(e,s){if(1&e&&(c.TgZ(0,"div"),c._UZ(1,"system-label",33),c._uU(2),c._UZ(3,"br"),c.qZA()),2&e){const e=c.oxw();c.xp6(2),c.hij(": ",e.pwdGuideline,"")}}let Te=(()=>{class UserAddModal{constructor(e,s,t,o,i,n,a,l,r,d,c){this.language=e,this.model=s,this.parent=t,this.modelutilities=o,this.toast=i,this.backend=n,this.view=a,this.cdr=l,this.metadata=r,this.configuration=d,this.helper=c,this.informationFieldset=[],this.profileFieldset=[],this.response=null,this.responseSubject=null,this.pwdCheck=new RegExp("//"),this.userNameCheck=new RegExp("^(?![_.])(?!.*[_.]{2})[@a-zA-Z0-9._-]{1,60}$"),this.autogenerate=!1,this.sendByEmail=!1,this.forceReset=!0,this.showPassword=!1,this.saveTriggered=!1,this.canSendByEmail=!0,this.model.module="Users",this.view.isEditable=!0,this.view.setEditMode(),this.responseSubject=new Q.x,this.response=this.responseSubject.asObservable()}get PwdFieldType(){return this.showPassword?"text":"password"}get modelOptions(){return{updateOn:"blur"}}get passwordMsg(){return this.pwdFieldEmpty?[{type:"error",message:this.language.getLabel("MSG_INPUT_REQUIRED")}]:this.pwdNotMatchGuide?[{type:"error",message:this.language.getLabel("MSG_PWD_NOT_LEGAL")}]:[]}get rePasswordMsg(){return this.rePwdFieldEmpty?[{type:"error",message:this.language.getLabel("MSG_INPUT_REQUIRED")}]:this.rePwdNotSame?[{type:"error",message:this.language.getLabel("MSG_PWDS_DONT_MATCH")}]:[]}get pwdFieldEmpty(){return this.saveTriggered&&!this.password}get rePwdFieldEmpty(){return this.saveTriggered&&!this.repeatPassword}get pwdNotMatchGuide(){return!this.autoGenerate&&this.password&&!this.pwdCheck.test(this.password)}get rePwdNotSame(){return!this.autoGenerate&&this.repeatPassword&&this.password!=this.repeatPassword}get pwdFieldStyle(){return this.pwdFieldEmpty||this.pwdNotMatchGuide?"slds-has-error":""}get rePwdFieldStyle(){return this.rePwdFieldEmpty||this.rePwdNotSame?"slds-has-error":""}get hasError(){let e=!0;!this.autoGenerate&&this.pwdGuideline&&this.pwdNotMatchGuide&&(e=!1),this.autoGenerate||this.password&&!this.rePwdNotSame||(e=!1),this.model.validate()||(e=!1);let s=this.model.getField("user_name");return s&&!this.userNameCheck.test(s)&&(this.model.setFieldMessage("error",this.language.getLabel("MSG_USERNAME_NOT_LEGAL"),"user_name","validation"),e=!1),!e}get autoGenerate(){return this.autogenerate}set autoGenerate(e){this.autogenerate=e,e&&(this.password=this.helper.generatePassword(this.configuration.getCapabilityConfig("userpassword")),this.repeatPassword=this.password)}ngOnInit(){this.model.initialize(this.parent),this.model.setFields({UserType:"RegularUser",status:"Active"}),this.getFieldSets(),this.getPassInfo()}getFieldSets(){let e=this.metadata.getComponentConfig("UserAddModal","Users");this.profileFieldset=e&&e.profile?e.profile:this.profileFieldset,this.informationFieldset=e&&e.information?e.information:this.informationFieldset}toggleShowPassword(){this.showPassword=!this.showPassword}getPassInfo(){let e=this.configuration.getCapabilityConfig("userpassword");this.pwdCheck=new RegExp(e.regex);let s=[];e.onelower&&s.push(this.language.getLabel("MSG_PASSWORD_ONELOWER")),e.oneupper&&s.push(this.language.getLabel("MSG_PASSWORD_ONEUPPER")),e.onenumber&&s.push(this.language.getLabel("MSG_PASSWORD_ONENUMBER")),e.onespecial&&s.push(this.language.getLabel("MSG_PASSWORD_ONESPECIAL")),e.minpwdlength&&s.push(this.language.getLabel("MSG_PASSWORD_LENGTH")+" "+e.minpwdlength),this.pwdGuideline=s.join(", ")}copyPassword(){let e=document.createElement("textarea");e.style.position="fixed",e.style.left="0",e.style.top="0",e.style.opacity="0",e.value=this.password,document.body.appendChild(e),e.focus(),e.select(),document.execCommand("copy")&&this.toast.sendToast(this.language.getLabel("MSG_PASSWORD_COPIED"),"success"),document.body.removeChild(e)}cancel(){this.responseSubject.next(!1),this.responseSubject.complete(),this.self.destroy()}save(e=!1){if(this.saveTriggered=!0,this.hasError)return;this.model.setFields({system_generated_password:this.autoGenerate,pwd_last_changed:new moment});let s=this.modelutilities.spiceModel2backend("Users",this.model.data);this.backend.postRequest("module/Users/"+this.model.id,{},JSON.stringify(s)).subscribe((s=>{for(let e in s)s.hasOwnProperty(e)&&(s[e]=this.modelutilities.backend2spice("Users",e,s[e]));this.model.setData(s),this.model.endEdit(),this.savePassword(e)}),(e=>{e.error.error.message&&(this.addcontainer.element.nativeElement.scrollTop=0,"duplicateUsername"==e.error.error.errorCode&&this.model.setFieldMessage("error",e.error.error.message,"user_name","validation"),"duplicateEmail1"==e.error.error.errorCode&&this.model.setFieldMessage("error",e.error.error.message,"email1","validation"))}))}savePassword(e){let s={newPassword:this.password,forceReset:this.forceReset,sendEmail:!!this.canSendByEmail&&this.sendByEmail};this.backend.postRequest("module/Users/"+this.model.id+"/password/reset",{},s).subscribe((s=>{this.sendByEmail?this.toast.sendToast(this.language.getLabel("MSG_NEW_PASSWORD_EMAIL_SENT"),"success","",10):this.toast.sendToast(this.language.getLabel("LBL_DATA_SAVED"),"success"),e&&this.model.goDetail(),this.self.destroy()}),(e=>{this.sendByEmail=!1,this.canSendByEmail=!1,this.toast.sendToast(this.language.getLabel("MSG_PASSWORD_RESET_FAILED"),"error")}))}}return UserAddModal.ɵfac=function(e){return new(e||UserAddModal)(c.Y36(u.d),c.Y36(g.o),c.Y36(g.o,4),c.Y36(xe.A),c.Y36(f.A),c.Y36(T.y),c.Y36(I.e),c.Y36(c.sBO),c.Y36(H.Pu),c.Y36(w.C),c.Y36(P._))},UserAddModal.ɵcmp=c.Xpm({type:UserAddModal,selectors:[["ng-component"]],viewQuery:function(e,s){if(1&e&&c.Gf(Me,7,c.s_b),2&e){let e;c.iGM(e=c.CRH())&&(s.addcontainer=e.first)}},features:[c._Bn([g.o,I.e])],decls:44,vars:29,consts:[["size","large"],[3,"close"],["addcontainer",""],["titlelabel","LBL_USER_PROFILE"],[3,"fieldset","direction"],["titlelabel","LBL_USER_PASSWORD"],[1,"slds-small-size--1-of-1","slds-medium-size--1-of-2"],[1,"slds-p-around--x-small"],[1,"slds-form--stacked","slds-text-align--left"],[4,"ngIf"],[1,"slds-grid"],[1,"slds-size--10-of-12"],[1,"slds-form-element","slds-m-vertical--small",3,"ngClass"],[1,"slds-form-element__control","slds-input-has-icon","slds-input-has-icon--left"],[3,"icon","addclasses"],[1,"slds-input",3,"type","ngModel","placeholder","disabled","ngModelOptions","ngModelChange"],[3,"messages"],[1,"slds-size--2-of-12","slds-p-horizontal--xx-small","slds-p-vertical--small",2,"white-space","nowrap"],[1,"slds-button","slds-button--neutral","slds-p-horizontal--x-small",3,"click"],["size","medium",3,"icon"],[1,"slds-button","slds-button--neutral","slds-p-horizontal--x-small",3,"disabled","click"],["icon","copy","size","medium"],[3,"ngModel","ngModelChange"],["label","LBL_AUTO_GENERATE"],[1,"slds-m-left--small",3,"ngModel","ngModelChange"],["label","LBL_SEND_BY_EMAIL"],["label","LBL_FORCE_RESET"],["titlelabel","LBL_USER_INFORMATION"],[1,"slds-button","slds-button--neutral",3,"click"],["label","LBL_CANCEL"],[1,"slds-button","slds-button--brand",3,"click"],["label","LBL_SAVE"],["label","LBL_SAVE_AND_GO_TO_RECORD"],["label","LBL_PWD_GUIDELINE",2,"display","inline-block"]],template:function(e,s){1&e&&(c.TgZ(0,"system-modal",0)(1,"system-modal-header",1),c.NdJ("close",(function(){return s.cancel()})),c._uU(2),c.qZA(),c.TgZ(3,"system-modal-content",null,2)(5,"system-section",3),c._UZ(6,"object-record-fieldset",4),c.qZA(),c.TgZ(7,"system-section",5)(8,"div",6)(9,"div",7)(10,"div",8),c.YNc(11,Re,4,1,"div",9),c.TgZ(12,"div",10)(13,"div",11)(14,"div",12)(15,"div",13),c._UZ(16,"system-utility-icon",14),c.TgZ(17,"input",15),c.NdJ("ngModelChange",(function(e){return s.password=e})),c.qZA()(),c._UZ(18,"field-messages",16),c.qZA(),c.TgZ(19,"div",12)(20,"div",13),c._UZ(21,"system-utility-icon",14),c.TgZ(22,"input",15),c.NdJ("ngModelChange",(function(e){return s.repeatPassword=e})),c.qZA()(),c._UZ(23,"field-messages",16),c.qZA()(),c.TgZ(24,"div",17)(25,"button",18),c.NdJ("click",(function(){return s.toggleShowPassword()})),c._UZ(26,"system-button-icon",19),c.qZA(),c.TgZ(27,"button",20),c.NdJ("click",(function(){return s.copyPassword()})),c._UZ(28,"system-button-icon",21),c.qZA()()()(),c.TgZ(29,"system-checkbox",22),c.NdJ("ngModelChange",(function(e){return s.autoGenerate=e})),c._UZ(30,"system-label",23),c.qZA(),c.TgZ(31,"system-checkbox",24),c.NdJ("ngModelChange",(function(e){return s.sendByEmail=e})),c._UZ(32,"system-label",25),c.qZA(),c.TgZ(33,"system-checkbox",24),c.NdJ("ngModelChange",(function(e){return s.forceReset=e})),c._UZ(34,"system-label",26),c.qZA()()()(),c.TgZ(35,"system-section",27),c._UZ(36,"object-record-fieldset",4),c.qZA()(),c.TgZ(37,"system-modal-footer")(38,"button",28),c.NdJ("click",(function(){return s.cancel()})),c._UZ(39,"system-label",29),c.qZA(),c.TgZ(40,"button",30),c.NdJ("click",(function(){return s.save()})),c._UZ(41,"system-label",31),c.qZA(),c.TgZ(42,"button",30),c.NdJ("click",(function(){return s.save(!0)})),c._UZ(43,"system-label",32),c.qZA()()()),2&e&&(c.xp6(2),c.Oqu(s.model.module),c.xp6(4),c.Q6J("fieldset",s.profileFieldset)("direction","vertical"),c.xp6(5),c.Q6J("ngIf",s.pwdGuideline),c.xp6(3),c.Q6J("ngClass",s.pwdFieldStyle),c.xp6(2),c.Q6J("icon","lock")("addclasses","slds-input__icon slds-icon-text-default"),c.xp6(1),c.Q6J("type",s.PwdFieldType)("ngModel",s.password)("placeholder",s.language.getLabel("MSG_ENTER_NEW_PASSWORD"))("disabled",s.autoGenerate)("ngModelOptions",s.modelOptions),c.xp6(1),c.Q6J("messages",s.passwordMsg),c.xp6(1),c.Q6J("ngClass",s.rePwdFieldStyle),c.xp6(2),c.Q6J("icon","lock")("addclasses","slds-input__icon slds-icon-text-default"),c.xp6(1),c.Q6J("type",s.PwdFieldType)("ngModel",s.repeatPassword)("placeholder",s.language.getLabel("LBL_REPEAT_PWD"))("disabled",s.autoGenerate)("ngModelOptions",s.modelOptions),c.xp6(1),c.Q6J("messages",s.rePasswordMsg),c.xp6(3),c.Q6J("icon",s.showPassword?"hide":"preview"),c.xp6(1),c.Q6J("disabled",!s.autoGenerate),c.xp6(2),c.Q6J("ngModel",s.autoGenerate),c.xp6(2),c.Q6J("ngModel",s.sendByEmail),c.xp6(2),c.Q6J("ngModel",s.forceReset),c.xp6(3),c.Q6J("fieldset",s.informationFieldset)("direction","vertical"))},dependencies:[o.mk,o.O5,i.Fj,i.JJ,i.On,ve.a,Se.d,C.J,D.U,U._,y.j,A.x,L.p,x.y,Ee.P,N.r],encapsulation:2}),UserAddModal})();function Pe(e,s){1&e&&(c.TgZ(0,"span",11),c._UZ(1,"system-utility-icon",12),c.qZA())}function Ce(e,s){if(1&e&&c._UZ(0,"img",13),2&e){const e=c.oxw();c.Q6J("src",e.userimage,c.LSH)}}const De=function(){return{fieldtype:"fullname"}};let Ne=(()=>{class UserPopoverHeader{constructor(e,s,t){this.language=e,this.view=s,this.model=t,this.view.displayLabels=!1}get userimage(){return this.model.getField("user_image")}}return UserPopoverHeader.ɵfac=function(e){return new(e||UserPopoverHeader)(c.Y36(u.d),c.Y36(I.e),c.Y36(g.o))},UserPopoverHeader.ɵcmp=c.Xpm({type:UserPopoverHeader,selectors:[["ng-component"]],features:[c._Bn([I.e])],decls:12,vars:4,consts:[[1,"slds-media","slds-media_center","slds-m-bottom_small","slds-p-vertical--x-small"],[1,"slds-p-right--medium"],["class","slds-icon_container slds-icon-standard-empty slds-icon_container--circle","style","width:40px;height:40px;",4,"ngIf"],["style","height: 40px; width: 40px",3,"src",4,"ngIf"],[1,"slds-media__body"],[1,"slds-text-heading_small","slds-hyphenate"],["field","full_name","fielddisplayclass","slds-truncate",3,"fieldconfig"],[1,"slds-list_horizontal","slds-has-dividers_right"],[1,"slds-item"],["field","title","fielddisplayclass","slds-truncate"],["field","department","fielddisplayclass","slds-truncate"],[1,"slds-icon_container","slds-icon-standard-empty","slds-icon_container--circle",2,"width","40px","height","40px"],["icon","user","size","small","addclasses","slds-icon","colorclass",""],[2,"height","40px","width","40px",3,"src"]],template:function(e,s){1&e&&(c.TgZ(0,"header",0)(1,"div",1),c.YNc(2,Pe,2,0,"span",2),c.YNc(3,Ce,1,1,"img",3),c.qZA(),c.TgZ(4,"div",4)(5,"h2",5),c._UZ(6,"field-container",6),c.qZA(),c.TgZ(7,"ul",7)(8,"li",8),c._UZ(9,"field-container",9),c.qZA(),c.TgZ(10,"li",8),c._UZ(11,"field-container",10),c.qZA()()()()),2&e&&(c.xp6(2),c.Q6J("ngIf",!s.userimage),c.xp6(1),c.Q6J("ngIf",s.userimage),c.xp6(3),c.Q6J("fieldconfig",c.DdM(3,De)))},dependencies:[o.O5,z.j,N.r],encapsulation:2}),UserPopoverHeader})(),Je=(()=>{class UserDeactivateButton{constructor(e,s,t,o,i,n,a){this.language=e,this.modal=s,this.model=t,this.session=o,this.injector=i,this.backend=n,this.toast=a}get disabled(){return!this.session.isAdmin||"1"==this.model.id}execute(){"Active"==this.model.getField("status")?this.modal.openModal("UserDeactivateModal",!0,this.injector):this.modal.prompt("confirm",this.language.getLabel("MSG_ACTIVATE_USER","","long"),this.language.getLabel("MSG_ACTIVATE_USER")).subscribe((e=>{if(e){let e=this.modal.await(this.language.getLabel("LBL_ACTIVATING"));this.backend.postRequest(`module/Users/${this.model.id}/activate`).subscribe((s=>{this.model.getData(),e.emit(!0)}),(s=>{e.emit(!0),this.toast.sendToast("an Error occured deactivating the User","error")}))}}))}get actionLabel(){return"Active"==this.model.getField("status")?"LBL_DEACTIVATE":"LBL_ACTIVATE"}}return UserDeactivateButton.ɵfac=function(e){return new(e||UserDeactivateButton)(c.Y36(u.d),c.Y36(h.o),c.Y36(g.o),c.Y36(b.n),c.Y36(c.zs3),c.Y36(T.y),c.Y36(f.A))},UserDeactivateButton.ɵcmp=c.Xpm({type:UserDeactivateButton,selectors:[["ng-component"]],decls:2,vars:1,consts:[[3,"label"]],template:function(e,s){1&e&&(c.TgZ(0,"span"),c._UZ(1,"system-label",0),c.qZA()),2&e&&(c.xp6(1),c.Q6J("label",s.actionLabel))},dependencies:[U._],encapsulation:2}),UserDeactivateButton})();var Oe=t(3333),qe=t(2161),ke=t(151),Be=t(727),Ge=t(4561);function Ye(e,s){if(1&e){const e=c.EpF();c.TgZ(0,"div",1)(1,"div",7)(2,"span",8)(3,"span",9),c._UZ(4,"system-icon",10),c.qZA(),c.TgZ(5,"span",11),c._uU(6),c.qZA(),c.TgZ(7,"button",12),c.NdJ("click",(function(){c.CHM(e);const s=c.oxw();return c.KtG(s.clearField())})),c._UZ(8,"system-button-icon",13),c.qZA()()()()}if(2&e){const e=c.oxw();c.xp6(4),c.Q6J("size","small"),c.xp6(2),c.Oqu(e.selectedItem.full_name),c.xp6(2),c.Q6J("icon","close")}}function Ie(e,s){if(1&e){const e=c.EpF();c.TgZ(0,"div",14)(1,"input",15),c.NdJ("click",(function(){c.CHM(e);const s=c.oxw();return c.KtG(s.searchWithModal())})),c.qZA(),c.TgZ(2,"button",16),c.NdJ("click",(function(){c.CHM(e);const s=c.oxw();return c.KtG(s.searchWithModal())})),c._UZ(3,"system-button-icon",13),c.qZA()()}if(2&e){const e=c.oxw();c.xp6(1),c.Q6J("placeholder",e.placeholder),c.xp6(2),c.Q6J("icon","search")}}let Qe=(()=>{class UserDeactivateSelectUser{constructor(e,s,t,o){this.language=e,this.metadata=s,this.model=t,this.modal=o,this.subscriptions=new Be.w0,this.userid$=new c.vpe}ngOnDestroy(){this.subscriptions.unsubscribe()}get placeholder(){return this.language.getModuleCombinedLabel("LBL_SEARCH","Users")}searchWithModal(){this.modal.openModal("ObjectModalModuleLookup").subscribe((e=>{e.instance.module="Users",e.instance.multiselect=!1,this.subscriptions.add(e.instance.selectedItems.subscribe((e=>{e.length&&(this.selectedItem=e[0],this.userid$.emit(this.selectedItem.id))})))}))}clearField(){this.selectedItem=void 0}}return UserDeactivateSelectUser.ɵfac=function(e){return new(e||UserDeactivateSelectUser)(c.Y36(u.d),c.Y36(H.Pu),c.Y36(g.o),c.Y36(h.o))},UserDeactivateSelectUser.ɵcmp=c.Xpm({type:UserDeactivateSelectUser,selectors:[["user-deactivate-select-user"]],outputs:{userid$:"userid$"},decls:7,vars:2,consts:[[1,"slds-form-element"],[1,"slds-form-element__control"],[1,"slds-combobox_container"],["aria-expanded","false","aria-haspopup","listbox","role","combobox",1,"slds-combobox","slds-dropdown-trigger","slds-dropdown-trigger_click"],[1,"slds-form-element__control","slds-box--border"],["class","slds-form-element__control",4,"ngIf"],["class","slds-input-has-icon slds-input-has-icon--right slds-grow",4,"ngIf"],[1,"slds-pill_container"],[1,"slds-pill","slds-size--1-of-1"],[1,"slds-icon_container","slds-icon-standard-account","slds-pill__icon_container"],["module","Users",3,"size"],[1,"slds-pill__label"],[1,"slds-button","slds-button--icon","slds-pill__remove",3,"click"],[3,"icon"],[1,"slds-input-has-icon","slds-input-has-icon--right","slds-grow"],["type","text","role","combobox",1,"slds-lookup__search-input","slds-input--bare",3,"placeholder","click"],[1,"slds-button","slds-button_icon","slds-input__icon","slds-input__icon_right",3,"click"]],template:function(e,s){1&e&&(c.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4),c.YNc(5,Ye,9,3,"div",5),c.YNc(6,Ie,4,2,"div",6),c.qZA()()()()()),2&e&&(c.xp6(5),c.Q6J("ngIf",s.selectedItem),c.xp6(1),c.Q6J("ngIf",!s.selectedItem))},dependencies:[o.O5,C.J,Ge.f],encapsulation:2}),UserDeactivateSelectUser})();function Fe(e,s){if(1&e){const e=c.EpF();c.TgZ(0,"tr",23)(1,"td")(2,"system-checkbox",24),c.NdJ("ngModelChange",(function(s){const t=c.CHM(e).$implicit;return c.KtG(t.reassign=s)})),c.qZA()(),c.TgZ(3,"td")(4,"div",25),c._UZ(5,"system-label-modulename",26),c.qZA()(),c.TgZ(6,"td")(7,"div",25),c._uU(8),c.qZA()()()}if(2&e){const e=s.$implicit,t=c.oxw();c.xp6(2),c.Q6J("disabled",!t.reassignRecords||0==e.count)("ngModel",e.reassign),c.xp6(3),c.Q6J("module",e.sysmoduleid),c.xp6(3),c.Oqu(e.count)}}function je(e,s){1&e&&c._UZ(0,"tbody",27),2&e&&c.Q6J("select",!0)("tools",!1)}const We=function(e){return{"slds-hidden":e}};let He=(()=>{class UserDeactivateModal{constructor(e,s,t,o,i){this.model=e,this.modal=s,this.language=t,this.backend=o,this.toast=i,this.objects=[],this.loading=!0,this.reassignRecords=!1,this.totalrecords=0,this.newuserid="",this.getUserObjects()}getUserObjects(){this.backend.getRequest(`module/Users/${this.model.id}/deactivate`).subscribe((e=>{for(let s in e)this.objects.push({sysmoduleid:s,count:parseInt(e[s].totalcount,10),reassign:parseInt(e[s].totalcount,10)>0}),this.totalrecords+=parseInt(e[s].totalcount,10);this.totalrecords>0&&(this.reassignRecords=!0),this.loading=!1}),(e=>{this.loading=!1}))}get canReassign(){return this.totalrecords>0}get canSubmit(){return!(this.reassignRecords&&!this.newuserid)}deactivate(){let e=[],s={};if(this.newuserid){s.modules=[];for(let s of this.objects.filter((e=>e.reassign)))e.push(s.sysmoduleid);s.newuserid=this.newuserid}let t=this.modal.await(this.language.getLabel("LBL_DEACTIVATING"));this.backend.postRequest(`module/Users/${this.model.id}/deactivate`,{},s).subscribe((e=>{this.model.getData(),t.emit(!0),this.close()}),(e=>{t.emit(!0),this.toast.sendToast("an Error occured deactivating the User","error")}))}close(){this.self.destroy()}}return UserDeactivateModal.ɵfac=function(e){return new(e||UserDeactivateModal)(c.Y36(g.o),c.Y36(h.o),c.Y36(u.d),c.Y36(T.y),c.Y36(f.A))},UserDeactivateModal.ɵcmp=c.Xpm({type:UserDeactivateModal,selectors:[["ng-component"]],decls:29,vars:9,consts:[[3,"close"],["label","MSG_USER_DEACTIVATE"],["margin","none"],[1,"slds-p-around--small"],["label","MSG_USER_DEACTIVATE","length","long"],[1,"slds-p-top--small","slds-grid","slds-grid--vertical-align-center"],[1,"slds-p-right--small",3,"disabled","ngModel","ngModelChange"],["label","MSG_REASSIGN_RECORDS"],[2,"min-width","300px",3,"ngClass","userid$"],[1,"slds-table","slds-table_cell-buffer","slds-table_bordered"],[1,"slds-line-height_reset"],["scope","col",1,"slds-text-align_right",2,"width","3.25rem"],["scope","col",1,""],["system-title","LBL_MODULE",1,"slds-truncate"],["label","LBL_MODULE"],["system-title","LBL_COUNT",1,"slds-truncate"],["label","LBL_COUNT"],["class","slds-hint-parent",4,"ngFor","ngForOf"],["system-table-stencils","","columns","2","rows","5",3,"select","tools",4,"ngIf"],[1,"slds-button","slds-button--neutral",3,"click"],["label","LBL_CANCEL"],[1,"slds-button","slds-button--brand",3,"disabled","click"],["label","LBL_DEACTIVATE"],[1,"slds-hint-parent"],[3,"disabled","ngModel","ngModelChange"],[1,"slds-truncate"],[3,"module"],["system-table-stencils","","columns","2","rows","5",3,"select","tools"]],template:function(e,s){1&e&&(c.TgZ(0,"system-modal")(1,"system-modal-header",0),c.NdJ("close",(function(){return s.close()})),c._UZ(2,"system-label",1),c.qZA(),c.TgZ(3,"system-modal-content",2)(4,"div",3),c._UZ(5,"system-label",4),c.TgZ(6,"div",5)(7,"system-checkbox",6),c.NdJ("ngModelChange",(function(e){return s.reassignRecords=e})),c._UZ(8,"system-label",7),c._uU(9),c.qZA(),c.TgZ(10,"user-deactivate-select-user",8),c.NdJ("userid$",(function(e){return s.newuserid=e})),c.qZA()()(),c.TgZ(11,"table",9)(12,"thead")(13,"tr",10),c._UZ(14,"th",11),c.TgZ(15,"th",12)(16,"div",13),c._UZ(17,"system-label",14),c.qZA()(),c.TgZ(18,"th",12)(19,"div",15),c._UZ(20,"system-label",16),c.qZA()()()(),c.TgZ(21,"tbody"),c.YNc(22,Fe,9,4,"tr",17),c.qZA(),c.YNc(23,je,1,2,"tbody",18),c.qZA()(),c.TgZ(24,"system-modal-footer")(25,"button",19),c.NdJ("click",(function(){return s.close()})),c._UZ(26,"system-label",20),c.qZA(),c.TgZ(27,"button",21),c.NdJ("click",(function(){return s.deactivate()})),c._UZ(28,"system-label",22),c.qZA()()()),2&e&&(c.xp6(7),c.Q6J("disabled",!s.canReassign)("ngModel",s.reassignRecords),c.xp6(2),c.hij(" (",s.totalrecords,")"),c.xp6(1),c.Q6J("ngClass",c.VKq(7,We,!s.reassignRecords)),c.xp6(12),c.Q6J("ngForOf",s.objects),c.xp6(1),c.Q6J("ngIf",s.loading),c.xp6(4),c.Q6J("disabled",!s.canSubmit))},dependencies:[o.mk,o.sg,o.O5,i.JJ,i.On,D.U,U._,Oe.M,y.j,A.x,L.p,x.y,qe.x,ke.S,Qe],encapsulation:2}),UserDeactivateModal})(),ze=(()=>{class UserSignature{constructor(e,s,t){this.backend=e,this.view=s,this.broadcast=t,this.preferences={}}}return UserSignature.ɵfac=function(e){return new(e||UserSignature)(c.Y36(T.y),c.Y36(I.e),c.Y36(W.f))},UserSignature.ɵcmp=c.Xpm({type:UserSignature,selectors:[["user-signature"]],features:[c._Bn([I.e])],decls:29,vars:4,consts:[[1,"slds-section-title--divider"],[1,"slds-p-around--small"],[1,"slds-grid","slds-grid--align-spread"],[1,"slds-form-element","slds-size--1-of-2","slds-p-around--x-small"],[1,"slds-form-element__label"],[1,"slds-form-element__control","slds-has-divider--bottom"],[1,"slds-form-element__static"],[1,"slds-form-element","slds-size--1-of-2","slds-m-around--x-small"]],template:function(e,s){1&e&&(c.TgZ(0,"h3",0),c._uU(1,"User Signature"),c.qZA(),c.TgZ(2,"div",1)(3,"div",2)(4,"div",3)(5,"label",4),c._uU(6,"Export Delimiter"),c.qZA(),c.TgZ(7,"div",5)(8,"span",6),c._uU(9),c.qZA()()(),c.TgZ(10,"div",3)(11,"label",4),c._uU(12,"Timezone"),c.qZA(),c.TgZ(13,"div",5)(14,"span",6),c._uU(15),c.qZA()()()(),c.TgZ(16,"div",2)(17,"div",7)(18,"label",4),c._uU(19,"Date Format"),c.qZA(),c.TgZ(20,"div",5)(21,"span",6),c._uU(22),c.qZA()()(),c.TgZ(23,"div",7)(24,"label",4),c._uU(25,"Time Format"),c.qZA(),c.TgZ(26,"div",5)(27,"span",6),c._uU(28),c.qZA()()()()()),2&e&&(c.xp6(9),c.Oqu(s.preferences.export_delimiter),c.xp6(6),c.Oqu(s.preferences.timezone),c.xp6(7),c.Oqu(s.preferences.datef),c.xp6(6),c.Oqu(s.preferences.timef))},encapsulation:2}),UserSignature})(),$e=(()=>{class ModuleUsers{}return ModuleUsers.ɵfac=function(e){return new(e||ModuleUsers)},ModuleUsers.ɵmod=c.oAB({type:ModuleUsers}),ModuleUsers.ɵinj=c.cJS({imports:[o.ez,i.u5,a.ObjectFields,l.GlobalComponents,r.ObjectComponents,d.SystemComponents,n.o]}),ModuleUsers})();("undefined"==typeof ngJitMode||ngJitMode)&&c.kYT($e,{declarations:[p,R,G,Y,ue,_e,Ae,Le,Te,Ne,Je,He,Qe,ze],imports:[o.ez,i.u5,a.ObjectFields,l.GlobalComponents,r.ObjectComponents,d.SystemComponents,n.o]})}}]);