/*!
 * 
 *                     SpiceCRM
 *
 *                     release: 2024.01.001
 *
 *                     date: 2024-06-07 18:53:45
 *
 *                     build: 2024.01.001.1717779225604
 *
 */
"use strict";(self.webpackChunkcore=self.webpackChunkcore||[]).push([["src_modules_holidaycalendars_moduleholidaycalendars_ts"],{57502:(t,e,s)=>{s.r(e),s.d(e,{ModuleHolidayCalendars:()=>F});var a=s(60177),l=s(84341),i=s(71341),d=s(7745),n=s(12948),o=s(37328),r=s(70569),c=s(35911),m=s(75103),u=s(54438),y=s(69904),h=s(83935),b=s(23855),C=s(25863),g=s(32062),f=s(44985),p=s(98427),H=s(69139),L=s(37263),v=s(91107),_=s(91879),k=s(28933);let D=(()=>{class HolidayCalendarListDays{constructor(t,e,s,a){this.language=t,this.model=e,this.metadata=s,this.relatedmodels=a,this.relatedmodels.module="SystemHolidayCalendars",this.relatedmodels.relatedModule="SystemHolidayCalendarDays",this.relatedmodels.linkName="systemholidaycalendardays",this.relatedmodels.loaditems=1e3,this.componentconfig=this.metadata.getComponentConfig("HolidayCalendarListDays","SystemHolidayCalendarDays"),this.listfields=this.metadata.getFieldSetFields(this.componentconfig.fieldset)}ngOnChanges(t){this.relatedmodels.id=this.calendarid,this.relatedmodels.resetData(),this.relatedmodels.getData().subscribe((t=>{this.relatedmodels.items.sort(((t,e)=>moment(t.holiday_date).isBefore(moment(e.holiday_date))?1:-1))}))}static#t=this.ɵfac=function(t){return new(t||HolidayCalendarListDays)(u.rXU(y.B),u.rXU(c.g),u.rXU(h.yu),u.rXU(v.K))};static#e=this.ɵcmp=u.VBU({type:HolidayCalendarListDays,selectors:[["holiday-calendar-list-days"]],inputs:{calendarid:"calendarid"},features:[u.Jv_([v.K]),u.OA$],decls:2,vars:2,consts:[["system-to-bottom",""],[3,"listfields","listitemactionset"]],template:function(t,e){1&t&&(u.j41(0,"div",0),u.nrm(1,"object-relatedlist-table",1),u.k0s()),2&t&&(u.R7$(),u.Y8G("listfields",e.listfields)("listitemactionset",e.componentconfig.actionset))},dependencies:[_.r,k.b],encapsulation:2})}return HolidayCalendarListDays})();const j=t=>({"slds-theme--inverse":t}),M=t=>({module:"SystemHolidayCalendars",data:t});function B(t,e){if(1&t){const t=u.RV6();u.j41(0,"div",15),u.bIt("click",(function(){const e=u.eBV(t).$implicit,s=u.XpG();return u.Njj(s.activeCalendar=e.id)})),u.j41(1,"div",16)(2,"span"),u.EFF(3),u.k0s(),u.nrm(4,"object-action-menu",17),u.k0s()()}if(2&t){const t=e.$implicit,s=u.XpG();u.Y8G("ngClass",u.eq3(5,j,t.id==s.activeCalendar)),u.R7$(),u.Y8G("system-model-provider",u.eq3(7,M,t)),u.R7$(2),u.JRh(t.name),u.R7$(),u.Y8G("buttonsize","x-small")("actionset",s.actionset)}}function G(t,e){if(1&t&&u.nrm(0,"holiday-calendar-list-days",18),2&t){const t=u.XpG();u.Y8G("calendarid",t.activeCalendar)}}let U=(()=>{class HolidayCalendarList{constructor(t,e,s,a){this.language=t,this.modellist=e,this.model=s,this.metadata=a;let l=this.metadata.getComponentConfig("HolidayCalendarList","SystemHolidayCalendars");this.actionset=l.actionset}ngOnInit(){this.modellist.initialize("SystemHolidayCalendars"),this.modellist.getListData(),this.model.module="SystemHolidayCalendars"}refresh(){this.activeCalendar=void 0,this.modellist.reLoadList()}set activeCalendar(t){this._activeCalendarID=t}get activeCalendar(){return this._activeCalendarID}addCalendar(){this.model.module="SystemHolidayCalendars",this.model.id="",this.model.initialize(),this.model.addModel()}addDay(){this.model.module="SystemHolidayCalendarDays",this.model.id="",this.model.initialize(),this.model.addModel(null,null,{systemholidaycalendar_id:this.activeCalendar})}static#t=this.ɵfac=function(t){return new(t||HolidayCalendarList)(u.rXU(y.B),u.rXU(m.K),u.rXU(c.g),u.rXU(h.yu))};static#e=this.ɵcmp=u.VBU({type:HolidayCalendarList,selectors:[["holiday-calendar-list"]],features:[u.Jv_([m.K,c.g])],decls:17,vars:3,consts:[[1,"slds-grid","slds-grid_vertical-align-center","slds-grid--align-spread","slds-p-around--small"],[1,"slds-text-heading_medium"],["module","SystemHolidayCalendars"],[1,"slds-grid"],[1,"slds-button","slds-button--neutral",3,"click"],["icon","add"],["label","LBL_CALENDAR"],[1,"slds-button","slds-button--neutral",3,"disabled","click"],["label","LBL_DAY"],[1,"slds-button","slds-button_icon","slds-button_icon-border-filled",3,"click"],["icon","refresh"],["system-to-bottom-noscroll","","system-view-provider","",1,"slds-size--1-of-4","slds-theme--default"],["class","slds-box--border slds-m-around--xx-small",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"slds-size--3-of-4","slds-border--left","slds-theme--shade"],[3,"calendarid",4,"ngIf"],[1,"slds-box--border","slds-m-around--xx-small",3,"ngClass","click"],[1,"slds-p-around--x-small","slds-grid","slds-grid--vertical-align-center","slds-grid--align-spread",3,"system-model-provider"],[3,"buttonsize","actionset"],[3,"calendarid"]],template:function(t,e){1&t&&(u.j41(0,"div",0)(1,"h2",1),u.nrm(2,"system-label-modulename",2),u.k0s(),u.j41(3,"div",3)(4,"button",4),u.bIt("click",(function(){return e.addCalendar()})),u.nrm(5,"system-button-icon",5)(6,"system-label",6),u.k0s(),u.j41(7,"button",7),u.bIt("click",(function(){return e.addDay()})),u.nrm(8,"system-button-icon",5)(9,"system-label",8),u.k0s(),u.j41(10,"button",9),u.bIt("click",(function(){return e.refresh()})),u.nrm(11,"system-button-icon",10),u.k0s()()(),u.j41(12,"div",3)(13,"div",11),u.DNE(14,B,5,9,"div",12),u.k0s(),u.j41(15,"div",13),u.DNE(16,G,1,1,"holiday-calendar-list-days",14),u.k0s()()),2&t&&(u.R7$(7),u.Y8G("disabled",!e.activeCalendar),u.R7$(7),u.Y8G("ngForOf",e.modellist.listData.list),u.R7$(2),u.Y8G("ngIf",e.activeCalendar))},dependencies:[a.YU,a.Sq,a.bT,b.P,C.t,g.W,f.r,p.v,H.p,L.x,D],encapsulation:2})}return HolidayCalendarList})();var x=s(49722),S=s(41081),X=s(40713),I=s(25028),R=s(88418),O=s(83524);let Y=(()=>{class HolidayCalendarListGetHolidaysModal{constructor(t,e,s){this.backend=t,this.model=e,this.toast=s}close(){this.self.destroy()}load(){this.backend.getRequest(`module/SystemHolidayCalendars/${this.model.id}/calendarific/${this.country}/${this.year}`).subscribe((t=>{this.close()}),(t=>{this.toast.sendToast("Error loading Holidays","error"),console.log(t)}))}static#t=this.ɵfac=function(t){return new(t||HolidayCalendarListGetHolidaysModal)(u.rXU(x.H),u.rXU(c.g),u.rXU(S.o))};static#e=this.ɵcmp=u.VBU({type:HolidayCalendarListGetHolidaysModal,selectors:[["holiday-calendar-list-get-holidays-modal"]],decls:16,vars:2,consts:[["size","prompt"],[3,"close"],["label","LBL_LOAD_HOLIDAYS"],[1,"slds-grid","slds-grid--vertical"],[1,"slds-grid","slds-p-vertical--x-small"],["label","LBL_COUNTRY",1,"slds-size--1-of-2"],["maxlength","2","type","text",1,"slds-input","slds-size--1-of-2",3,"ngModel","ngModelChange"],["label","LBL_YEAR",1,"slds-size--1-of-2"],["maxlength","4","type","number",1,"slds-input","slds-size--1-of-2",3,"ngModel","ngModelChange"],[1,"slds-button","slds-button--neutral",3,"click"],["label","LBL_CANCEL"],[1,"slds-button","slds-button--brand",3,"click"],["label","LBL_LOAD"]],template:function(t,e){1&t&&(u.j41(0,"system-modal",0)(1,"system-modal-header",1),u.bIt("close",(function(){return e.close()})),u.nrm(2,"system-label",2),u.k0s(),u.j41(3,"system-modal-content")(4,"div",3)(5,"div",4),u.nrm(6,"system-label",5),u.j41(7,"input",6),u.mxI("ngModelChange",(function(t){return u.DH7(e.country,t)||(e.country=t),t})),u.k0s()(),u.j41(8,"div",4),u.nrm(9,"system-label",7),u.j41(10,"input",8),u.mxI("ngModelChange",(function(t){return u.DH7(e.year,t)||(e.year=t),t})),u.k0s()()()(),u.j41(11,"system-modal-footer")(12,"button",9),u.bIt("click",(function(){return e.close()})),u.nrm(13,"system-label",10),u.k0s(),u.j41(14,"button",11),u.bIt("click",(function(){return e.load()})),u.nrm(15,"system-label",12),u.k0s()()()),2&t&&(u.R7$(7),u.R50("ngModel",e.country),u.R7$(3),u.R50("ngModel",e.year))},dependencies:[l.me,l.Q0,l.BC,l.tU,l.vS,g.W,X.D,I.I,R.Q,O.C],encapsulation:2})}return HolidayCalendarListGetHolidaysModal})();var $=s(50531),z=s(53584);let A=(()=>{class HolidayCalendarListGetHolidaysButton{constructor(t,e,s,a){this.model=t,this.modal=e,this.configuration=s,this.injector=a,this.disabled=!0,this.enableButton()}enableButton(){let t=this.configuration.getCapabilityConfig("holidaycalendars");t?.calendarific&&(this.disabled=!1)}execute(){this.modal.openModal("HolidayCalendarListGetHolidaysModal",!0,this.injector)}static#t=this.ɵfac=function(t){return new(t||HolidayCalendarListGetHolidaysButton)(u.rXU(c.g),u.rXU($.y),u.rXU(z.i),u.rXU(u.zZn))};static#e=this.ɵcmp=u.VBU({type:HolidayCalendarListGetHolidaysButton,selectors:[["holiday-calendar-list-get-holidays-button"]],decls:1,vars:0,consts:[["label","LBL_LOAD_HOLIDAYS"]],template:function(t,e){1&t&&u.nrm(0,"system-label",0)},dependencies:[g.W],encapsulation:2})}return HolidayCalendarListGetHolidaysButton})(),F=(()=>{class ModuleHolidayCalendars{static#t=this.ɵfac=function(t){return new(t||ModuleHolidayCalendars)};static#e=this.ɵmod=u.$C({type:ModuleHolidayCalendars});static#s=this.ɵinj=u.G2t({imports:[a.MD,l.YN,d.ObjectFields,n.GlobalComponents,o.ObjectComponents,r.SystemComponents,i.h]})}return ModuleHolidayCalendars})();("undefined"==typeof ngJitMode||ngJitMode)&&u.Obh(F,{declarations:[U,D,Y,A],imports:[a.MD,l.YN,d.ObjectFields,n.GlobalComponents,o.ObjectComponents,r.SystemComponents,i.h],exports:[D]})}}]);