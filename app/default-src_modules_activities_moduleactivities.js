/*!
 * 
 *                     aacService
 *
 *                     release: 2023.02.001
 *
 *                     date: 2023-08-14 15:59:23
 *
 *                     build: 2023.02.001.1692021563445
 *
 */
"use strict";(self.webpackChunkcore=self.webpackChunkcore||[]).push([["default-src_modules_activities_moduleactivities_ts"],{9087:(t,e,i)=>{i.d(e,{d:()=>a});var s=i(1180),n=i(2242),l=i(4154);const o=["container"];let a=(()=>{var t;class ActivityTimelineItemContainer{constructor(t){(0,s.Z)(this,"metadata",void 0),(0,s.Z)(this,"container",void 0),(0,s.Z)(this,"activity",{}),(0,s.Z)(this,"module",void 0),this.metadata=t}ngOnInit(){let t=this.metadata.getComponentConfig("ActivityTimelineItemContainer",this.activity.module);if(t.componentset){let e=this.metadata.getComponentSetObjects(t.componentset);for(let t of e)this.metadata.addComponent(t.component,this.container).subscribe((e=>{e.instance.activity=this.activity,e.instance.module=this.module,e.instance.componentconfig=t.componentconfig}))}}}return t=ActivityTimelineItemContainer,(0,s.Z)(ActivityTimelineItemContainer,"ɵfac",(function(e){return new(e||t)(n.Y36(l.Pu))})),(0,s.Z)(ActivityTimelineItemContainer,"ɵcmp",n.Xpm({type:t,selectors:[["activitytimeline-item-container"]],viewQuery:function(t,e){if(1&t&&n.Gf(o,7,n.s_b),2&t){let t;n.iGM(t=n.CRH())&&(e.container=t.first)}},inputs:{activity:"activity",module:"module"},decls:2,vars:0,consts:[["container",""]],template:function(t,e){1&t&&n.GkF(0,null,0)},encapsulation:2})),ActivityTimelineItemContainer})()},243:(t,e,i)=>{i.d(e,{g:()=>d});var s=i(1180),n=i(2242),l=i(2656),o=i(4561),a=i(2803);let d=(()=>{var t;class ActivityTimelineStencil{}return t=ActivityTimelineStencil,(0,s.Z)(ActivityTimelineStencil,"ɵfac",(function(e){return new(e||t)})),(0,s.Z)(ActivityTimelineStencil,"ɵcmp",n.Xpm({type:t,selectors:[["activitytimeline-stencil"]],decls:18,vars:0,consts:[[1,"slds-timeline__item_expandable","slds-timeline__item_email"],[1,"slds-media"],[1,"slds-media__figure"],[1,"slds-button","slds-button_icon"],["icon","switch","addclasses","slds-timeline__details-action-icon"],["icon","generic_loading","size","small","divClass","slds-icon_container slds-icon-standard-email slds-timeline__icon"],[1,"slds-media__body"],[1,"slds-grid","slds-grid_align-spread","slds-timeline__trigger"],[1,"slds-grid","slds-grid_vertical-align-center","slds-truncate_container_75","slds-no-space"],[1,"slds-truncate"],[1,"slds-timeline__actions","slds-timeline__actions_inline"],[1,"slds-timeline__date"],["disabled","",1,"slds-button","slds-button--icon-border-filled","slds-button--icon-x-small"],["icon","down"],[1,"slds-m-horizontal_xx-small"]],template:function(t,e){1&t&&(n.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"button",3),n._UZ(4,"system-button-icon",4),n.qZA(),n._UZ(5,"system-icon",5),n.qZA(),n.TgZ(6,"div",6)(7,"div",7)(8,"div",8)(9,"h3",9),n._UZ(10,"system-stencil"),n.qZA()(),n.TgZ(11,"div",10)(12,"p",11),n._UZ(13,"system-stencil"),n.qZA(),n.TgZ(14,"button",12),n._UZ(15,"system-button-icon",13),n.qZA()()(),n.TgZ(16,"p",14),n._UZ(17,"system-stencil"),n.qZA()()()())},dependencies:[l.J,o.f,a.B],encapsulation:2})),ActivityTimelineStencil})()},8800:(t,e,i)=>{i.r(e),i.d(e,{ModuleActivities:()=>Ms});var s=i(1180),n=i(4755),l=i(5030),o=i(3190),a=i(4826),d=i(6490),c=i(3735),r=i(4357),m=i(2242),u=i(3369),h=i(2032),g=i(5710),p=i(2644),f=i(9016),v=i(5329),Z=i(4664),b=i(1058),y=i(2294),x=i(4154),A=i(6163),T=i(3634);function k(t,e){1&t&&(m.TgZ(0,"span"),m._uU(1," • "),m.qZA())}function C(t,e){if(1&t&&(m.ynx(0),m._UZ(1,"field-container",10),m.YNc(2,k,2,0,"span",11),m.BQk()),2&t){const t=m.oxw(),e=t.$implicit,i=t.index,s=m.oxw();m.xp6(1),m.Q6J("field",e.field)("fieldconfig",e.fieldconfig)("fielddisplayclass","slds-truncate"),m.xp6(1),m.Q6J("ngIf",i<s.fielsetFields.length-1)}}function w(t,e){if(1&t&&(m.ynx(0),m.YNc(1,C,3,4,"ng-container",11),m.BQk()),2&t){const t=e.$implicit,i=m.oxw();m.xp6(1),m.Q6J("ngIf",i.model.data[t.field])}}const M=function(){return{highlightpast:!0}};let J=(()=>{var t;class TasksManagerTask{constructor(t,e,i,n,l){(0,s.Z)(this,"language",void 0),(0,s.Z)(this,"metadata",void 0),(0,s.Z)(this,"model",void 0),(0,s.Z)(this,"modelutilities",void 0),(0,s.Z)(this,"view",void 0),(0,s.Z)(this,"task",{}),(0,s.Z)(this,"focus",""),(0,s.Z)(this,"taskselected",new m.vpe),(0,s.Z)(this,"fielsetFields",[]),this.language=t,this.metadata=e,this.model=i,this.modelutilities=n,this.view=l;let o=this.metadata.getComponentConfig("TasksManagerTask","Tasks");o.fieldset&&(this.fielsetFields=this.metadata.getFieldSetItems(o.fieldset)),this.view.displayLabels=!1}ngOnInit(){this.model.module="Tasks",this.model.id=this.task.id,this.model.setData(this.task)}get isCompleted(){return"Completed"==this.model.getField("status")}get canEdit(){return this.model.checkAccess("edit")}get nameStyle(){let t={};return this.isCompleted&&(t["text-decoration"]="line-through"),t}get focusClass(){return this.model.id==this.focus?"slds-theme--shade slds-border--right":""}completeTask(){this.model.setField("status","Completed"),this.model.save()}selectTask(){this.taskselected.emit(this.model.id)}}return t=TasksManagerTask,(0,s.Z)(TasksManagerTask,"ɵfac",(function(e){return new(e||t)(m.Y36(v.d),m.Y36(x.Pu),m.Y36(g.o),m.Y36(A.A),m.Y36(y.e))})),(0,s.Z)(TasksManagerTask,"ɵcmp",m.Xpm({type:t,selectors:[["tasks-manager-task"]],inputs:{task:"task",focus:"focus"},outputs:{taskselected:"taskselected"},features:[m._Bn([g.o,y.e])],decls:15,vars:12,consts:[[1,"slds-p-horizontal--medium","slds-p-vertical--medium","slds-border--bottom",3,"ngClass"],[1,"slds-grid","slds-grid--align-spread",2,"cursor","pointer",3,"click"],[1,"slds-grid"],[1,"slds-form-element"],[1,"slds-checkbox"],["type","checkbox",3,"disabled","checked","id","click"],[1,"slds-checkbox__label"],[1,"slds-checkbox_faux"],[1,"slds-text-title_caps",3,"ngStyle"],[4,"ngFor","ngForOf"],[3,"field","fieldconfig","fielddisplayclass"],[4,"ngIf"]],template:function(t,e){1&t&&(m.TgZ(0,"div",0)(1,"div",1),m.NdJ("click",(function(){return e.selectTask()})),m.TgZ(2,"div",2)(3,"div",3)(4,"span",4)(5,"input",5),m.NdJ("click",(function(){return e.completeTask()})),m.qZA(),m.TgZ(6,"label",6),m._UZ(7,"span",7),m.qZA()()(),m.TgZ(8,"div")(9,"div",8),m._uU(10),m.qZA(),m.TgZ(11,"div",2),m.YNc(12,w,2,1,"ng-container",9),m.qZA()()(),m.TgZ(13,"div"),m._UZ(14,"field-container",10),m.qZA()()()),2&t&&(m.Q6J("ngClass",e.focusClass),m.xp6(5),m.Q6J("disabled",e.isCompleted||!e.canEdit)("checked",e.isCompleted)("id",e.model.id),m.xp6(1),m.uIk("for",e.model.id),m.xp6(3),m.Q6J("ngStyle",e.nameStyle),m.xp6(1),m.Oqu(e.model.data.name),m.xp6(2),m.Q6J("ngForOf",e.fielsetFields),m.xp6(2),m.Q6J("field","date_due")("fieldconfig",m.DdM(11,M))("fielddisplayclass","slds-truncate"))},dependencies:[n.mk,n.sg,n.O5,n.PC,T.j],encapsulation:2})),TasksManagerTask})();const Y=function(t){return{"slds-theme_shade":t}};function L(t,e){if(1&t){const t=m.EpF();m.TgZ(0,"tasks-manager-task",3),m.NdJ("taskselected",(function(e){m.CHM(t);const i=m.oxw();return m.KtG(i.selectTask(e))})),m.qZA()}if(2&t){const t=e.$implicit,i=m.oxw();m.Q6J("task",t)("focus",i.focus)("ngClass",m.VKq(3,Y,i.focus==t.id))}}function F(t,e){1&t&&(m.TgZ(0,"div",4),m._UZ(1,"system-spinner"),m.qZA())}let S=(()=>{var t;class TasksManagerTasks{constructor(t,e){(0,s.Z)(this,"language",void 0),(0,s.Z)(this,"modellist",void 0),(0,s.Z)(this,"taskselected",new m.vpe),(0,s.Z)(this,"focus",""),this.language=t,this.modellist=e}selectTask(t){this.focus=t,this.taskselected.emit(t)}handleScroll(){this.modellist.loadMoreList()}}return t=TasksManagerTasks,(0,s.Z)(TasksManagerTasks,"ɵfac",(function(e){return new(e||t)(m.Y36(v.d),m.Y36(p.t))})),(0,s.Z)(TasksManagerTasks,"ɵcmp",m.Xpm({type:t,selectors:[["tasks-manager-tasks"]],outputs:{taskselected:"taskselected"},decls:3,vars:2,consts:[[3,"system-to-bottom"],[3,"task","focus","ngClass","taskselected",4,"ngFor","ngForOf"],["class","slds-p-around--medium slds-align--absolute-center",4,"ngIf"],[3,"task","focus","ngClass","taskselected"],[1,"slds-p-around--medium","slds-align--absolute-center"]],template:function(t,e){1&t&&(m.TgZ(0,"div",0),m.NdJ("system-to-bottom",(function(){return e.handleScroll()})),m.YNc(1,L,1,5,"tasks-manager-task",1),m.YNc(2,F,2,0,"div",2),m.qZA()),2&t&&(m.xp6(1),m.Q6J("ngForOf",e.modellist.listData.list),m.xp6(1),m.Q6J("ngIf",e.modellist.isLoading))},dependencies:[n.mk,n.sg,n.O5,Z.W,b.H,J],encapsulation:2})),TasksManagerTasks})();var E=i(3463);const N=["detailscontent"];function q(t,e){if(1&t){const t=m.EpF();m.TgZ(0,"div",5)(1,"div",6)(2,"span",7)(3,"input",8),m.NdJ("click",(function(){m.CHM(t);const e=m.oxw();return m.KtG(e.completeTask())})),m.qZA(),m.TgZ(4,"label",9),m._UZ(5,"span",10),m.qZA()()(),m.TgZ(6,"div",11),m._UZ(7,"field-container",12),m.qZA()()}if(2&t){const t=m.oxw();m.xp6(3),m.Q6J("disabled",t.isCompleted||!t.canEdit)("checked",t.isCompleted),m.xp6(4),m.Q6J("field","name")("fielddisplayclass","slds-text-heading--small")}}function I(t,e){1&t&&(m.TgZ(0,"div",13),m._UZ(1,"system-label",14),m.qZA())}const O=function(t){return{"slds-theme--default":t}};let Q=(()=>{var t;class TasksManagerTaskDetails{constructor(t,e,i,n,l,o){(0,s.Z)(this,"view",void 0),(0,s.Z)(this,"language",void 0),(0,s.Z)(this,"elementRef",void 0),(0,s.Z)(this,"metadata",void 0),(0,s.Z)(this,"model",void 0),(0,s.Z)(this,"broadcast",void 0),(0,s.Z)(this,"detailscontent",void 0),(0,s.Z)(this,"focusid",""),(0,s.Z)(this,"viewComponent",null),(0,s.Z)(this,"modelSubscription",null),this.view=t,this.language=e,this.elementRef=i,this.metadata=n,this.model=l,this.broadcast=o,this.model.module="Tasks",this.modelSubscription=this.broadcast.message$.subscribe((t=>{this.handleMessage(t)})),this.view.displayLabels=!1}handleMessage(t){if(t.messagedata.module===this.model.module)switch(t.messagetype){case"model.delete":break;case"model.save":this.model.id===t.messagedata.id&&this.model.setData(t.messagedata.data,!1)}}ngOnChanges(){this.focusid?this.viewComponent||this.metadata.addComponent("ObjectRecordDetails",this.detailscontent).subscribe((t=>{this.viewComponent=t})):this.viewComponent&&(this.viewComponent.destroy(),this.viewComponent=null),this.focusid&&this.focusid!=this.model.id&&(this.model.id=this.focusid,this.model.getData())}ngOnDestroy(){this.modelSubscription.unsubscribe()}get nameStyle(){let t={};return this.isCompleted&&(t["text-decoration"]="line-through"),t}get isCompleted(){return"Completed"==this.model.getField("status")}get canEdit(){try{return this.model.checkAccess("edit")}catch(t){return!1}}completeTask(){this.model.setField("status","Completed"),this.model.save()}}return t=TasksManagerTaskDetails,(0,s.Z)(TasksManagerTaskDetails,"ɵfac",(function(e){return new(e||t)(m.Y36(y.e),m.Y36(v.d),m.Y36(m.SBq),m.Y36(x.Pu),m.Y36(g.o),m.Y36(u.f))})),(0,s.Z)(TasksManagerTaskDetails,"ɵcmp",m.Xpm({type:t,selectors:[["tasks-manager-task-details"]],viewQuery:function(t,e){if(1&t&&m.Gf(N,7,m.s_b),2&t){let t;m.iGM(t=m.CRH())&&(e.detailscontent=t.first)}},hostAttrs:[1,"slds-theme--shade"],inputs:{focusid:"focusid"},features:[m._Bn([g.o,y.e]),m.TTD],decls:6,vars:5,consts:[[1,"slds-scrollable--y"],["class","slds-m-around--x-small slds-p-around--x-small slds-grid slds-grid_vertical-align-center",4,"ngIf"],[1,"slds-m-around--x-small","slds-p-around--x-small",3,"ngClass"],["detailscontent",""],["class","slds-align--absolute-center","style","height:100%",4,"ngIf"],[1,"slds-m-around--x-small","slds-p-around--x-small","slds-grid","slds-grid_vertical-align-center"],[1,"slds-form-element__control"],[1,"slds-checkbox"],["type","checkbox","id","closetask",3,"disabled","checked","click"],["for","closetask",1,"slds-checkbox__label"],[1,"slds-checkbox_faux"],[1,"slds-text-heading--small","slds-p-left--small"],[3,"field","fielddisplayclass"],[1,"slds-align--absolute-center",2,"height","100%"],["label","LBL_MAKE_SELECTION"]],template:function(t,e){1&t&&(m.TgZ(0,"div",0),m.YNc(1,q,8,4,"div",1),m.TgZ(2,"div",2),m._UZ(3,"div",null,3),m.qZA(),m.YNc(5,I,2,0,"div",4),m.qZA()),2&t&&(m.xp6(1),m.Q6J("ngIf",e.focusid),m.xp6(1),m.Q6J("ngClass",m.VKq(3,O,e.focusid)),m.xp6(3),m.Q6J("ngIf",!e.focusid))},dependencies:[n.mk,n.O5,T.j,E._],encapsulation:2})),TasksManagerTaskDetails})();function U(t,e){if(1&t){const t=m.EpF();m.ynx(0),m.TgZ(1,"tasks-manager-tasks",3),m.NdJ("taskselected",(function(e){m.CHM(t);const i=m.oxw();return m.KtG(i.taskSelected(e))})),m.qZA(),m._UZ(2,"tasks-manager-task-details",4),m.BQk()}if(2&t){const t=m.oxw();m.xp6(2),m.Q6J("focusid",t.focus)}}function D(t,e){1&t&&(m.TgZ(0,"div",5),m._UZ(1,"system-illustration-no-task"),m.qZA())}let B=(()=>{var t;class TasksManagerView{constructor(t,e,i,n,l){(0,s.Z)(this,"broadcast",void 0),(0,s.Z)(this,"navigation",void 0),(0,s.Z)(this,"elementRef",void 0),(0,s.Z)(this,"model",void 0),(0,s.Z)(this,"modellist",void 0),(0,s.Z)(this,"modellistsubscribe",{}),(0,s.Z)(this,"focus",null),this.broadcast=t,this.navigation=e,this.elementRef=i,this.model=n,this.modellist=l,this.modellistsubscribe=this.modellist.listType$.subscribe((t=>this.handleListTypeChange(t))),this.loadList()}ngOnDestroy(){this.modellistsubscribe.unsubscribe()}handleListTypeChange(t){"TasksManagerView"==t.listcomponent&&this.loadList()}loadList(){this.focus=null,this.modellist.setSortField("date_due","ASC"),this.modellist.getListData()}taskSelected(t){this.focus=t}}return t=TasksManagerView,(0,s.Z)(TasksManagerView,"ɵfac",(function(e){return new(e||t)(m.Y36(u.f),m.Y36(h.G),m.Y36(m.SBq),m.Y36(g.o),m.Y36(p.t))})),(0,s.Z)(TasksManagerView,"ɵcmp",m.Xpm({type:t,selectors:[["ng-component"]],decls:4,vars:2,consts:[[1,"slds-grid","slds-height_full"],[4,"ngIf","ngIfElse"],["noitems",""],[1,"slds-size--1-of-2",3,"taskselected"],[1,"slds-size--1-of-2",3,"focusid"],[1,"slds-height_full","slds-align--absolute-center"]],template:function(t,e){if(1&t&&(m.TgZ(0,"div",0),m.YNc(1,U,3,1,"ng-container",1),m.YNc(2,D,2,0,"ng-template",null,2,m.W1O),m.qZA()),2&t){const t=m.MAs(3);m.xp6(1),m.Q6J("ngIf",e.modellist.isLoading||e.modellist.listData.totalcount>0)("ngIfElse",t)}},dependencies:[n.O5,f.H,S,Q],encapsulation:2})),TasksManagerView})();var P=i(3441);let R=(()=>{var t;class TasksAssitantTileClose{constructor(t,e,i,n){(0,s.Z)(this,"model",void 0),(0,s.Z)(this,"language",void 0),(0,s.Z)(this,"helper",void 0),(0,s.Z)(this,"broadcast",void 0),this.model=t,this.language=e,this.helper=i,this.broadcast=n}doAction(){this.helper.confirm(this.language.getLabel("LBL_COMPLETE_TASK"),this.language.getLabel("MSG_COMPLETE_TASK")).subscribe((t=>{t&&(this.model.setField("status","Completed"),this.model.save(),this.broadcast.broadcastMessage("assistant.complete",{id:this.model.id,module:"Assistant",data:this.model.data}))}))}}return t=TasksAssitantTileClose,(0,s.Z)(TasksAssitantTileClose,"ɵfac",(function(e){return new(e||t)(m.Y36(g.o),m.Y36(v.d),m.Y36(P._),m.Y36(u.f))})),(0,s.Z)(TasksAssitantTileClose,"ɵcmp",m.Xpm({type:t,selectors:[["tasks-assistant-tile-close"]],decls:4,vars:0,consts:[["role","presentation",1,"slds-dropdown__item",3,"click"],["href","javascript:void(0);","role","menuitem"],[1,"slds-truncate"],["label","LBL_CLOSE"]],template:function(t,e){1&t&&(m.TgZ(0,"li",0),m.NdJ("click",(function(){return e.doAction()})),m.TgZ(1,"a",1)(2,"span",2),m._UZ(3,"system-label",3),m.qZA()()())},dependencies:[E._],encapsulation:2})),TasksAssitantTileClose})(),z=(()=>{var t;class ActivityTimelineSaveButton{constructor(t,e,i,n){(0,s.Z)(this,"language",void 0),(0,s.Z)(this,"metadata",void 0),(0,s.Z)(this,"model",void 0),(0,s.Z)(this,"view",void 0),(0,s.Z)(this,"actionconfig",{}),(0,s.Z)(this,"actionemitter",new m.vpe),(0,s.Z)(this,"parent",{}),(0,s.Z)(this,"module",""),(0,s.Z)(this,"saving",!1),this.language=t,this.metadata=e,this.model=i,this.view=n}get buttonLabel(){return this.actionconfig.label?this.actionconfig.label:"LBL_SAVE"}execute(){this.saving||this.model.validate()&&(this.saving=!0,this.model.save(!0).subscribe((t=>{this.actionemitter.emit("save"),this.model.endEdit()})))}}return t=ActivityTimelineSaveButton,(0,s.Z)(ActivityTimelineSaveButton,"ɵfac",(function(e){return new(e||t)(m.Y36(v.d),m.Y36(x.Pu),m.Y36(g.o),m.Y36(y.e))})),(0,s.Z)(ActivityTimelineSaveButton,"ɵcmp",m.Xpm({type:t,selectors:[["activity-timeline-save-button"]],outputs:{actionemitter:"actionemitter"},decls:2,vars:1,consts:[[3,"label"]],template:function(t,e){1&t&&(m.TgZ(0,"span"),m._UZ(1,"system-label",0),m.qZA()),2&t&&(m.xp6(1),m.Q6J("label",e.buttonLabel))},dependencies:[E._],encapsulation:2})),ActivityTimelineSaveButton})();var j=i(727),H=i(4044),G=i(2656);function K(t,e){1&t&&m._UZ(0,"system-button-icon",2)}function V(t,e){1&t&&(m.TgZ(0,"span"),m._UZ(1,"system-label",3),m.qZA())}let $=(()=>{var t;class ActionActivityCloseButton{constructor(t,e,i,n,l){(0,s.Z)(this,"language",void 0),(0,s.Z)(this,"metadata",void 0),(0,s.Z)(this,"model",void 0),(0,s.Z)(this,"modal",void 0),(0,s.Z)(this,"viewContainerRef",void 0),(0,s.Z)(this,"hidden",!1),(0,s.Z)(this,"displayasicon",!1),(0,s.Z)(this,"disabled",!0),(0,s.Z)(this,"componentconfig",void 0),(0,s.Z)(this,"subscriptions",new j.w0),this.language=t,this.metadata=e,this.model=i,this.modal=n,this.viewContainerRef=l}ngOnInit(){this.componentconfig=this.metadata.getComponentConfig("ActionActivityCloseButton",this.model.module),this.model.getField(this.componentconfig.statusField)==this.componentconfig.statusValues&&this.handleDisabled("display"),this.handleDisabled(this.model.isEditing?"edit":"display"),this.subscriptions.add(this.model.mode$.subscribe((t=>{this.handleDisabled(t)}))),this.subscriptions.add(this.model.data$.subscribe((t=>{this.handleDisabled(this.model.isEditing?"edit":"display")})))}ngOnDestroy(){this.subscriptions.unsubscribe()}execute(){let t=this.componentconfig.componentset,e=this.componentconfig.actionset;this.modal.openModal("ActivityCloseModal",!0,this.viewContainerRef.injector).subscribe((i=>{i&&(t&&""!=t&&(i.instance.componentSet=t),e&&""!=e&&(i.instance.actionSet=e),this.model.startEdit())}))}handleDisabled(t){this.model.checkAccess("edit")?this.disabled="edit"==t:this.disabled=!0}}return t=ActionActivityCloseButton,(0,s.Z)(ActionActivityCloseButton,"ɵfac",(function(e){return new(e||t)(m.Y36(v.d),m.Y36(x.Pu),m.Y36(g.o),m.Y36(H.o),m.Y36(m.s_b))})),(0,s.Z)(ActionActivityCloseButton,"ɵcmp",m.Xpm({type:t,selectors:[["action-activity-close-button"]],decls:2,vars:2,consts:[["icon","close",4,"ngIf"],[4,"ngIf"],["icon","close"],["label","LBL_CLOSE"]],template:function(t,e){1&t&&(m.YNc(0,K,1,0,"system-button-icon",0),m.YNc(1,V,2,0,"span",1)),2&t&&(m.Q6J("ngIf",e.displayasicon),m.xp6(1),m.Q6J("ngIf",!e.displayasicon))},dependencies:[n.O5,G.J,E._],encapsulation:2})),ActionActivityCloseButton})();var X=i(8032);let W=(()=>{var t;class ActionActivityCloseCreateButton{constructor(t,e,i,n,l,o){(0,s.Z)(this,"language",void 0),(0,s.Z)(this,"metadata",void 0),(0,s.Z)(this,"model",void 0),(0,s.Z)(this,"modal",void 0),(0,s.Z)(this,"injector",void 0),(0,s.Z)(this,"modalwindow",void 0),(0,s.Z)(this,"actionconfig",void 0),(0,s.Z)(this,"saving",!1),(0,s.Z)(this,"canCreate",!1),this.language=t,this.metadata=e,this.model=i,this.modal=n,this.injector=l,this.modalwindow=o}ngOnInit(){let t=this.metadata.getComponentConfig("ActivityCloseCreateModal",this.model.module).newBeanModules;if(t){let e=t.split(",");for(let t of e)if(this.metadata.checkModuleAcl(t,"create")){this.canCreate=!0;break}}}get disabled(){return!this.model.checkAccess("edit")}execute(){this.saving||(this.actionconfig.statusfield&&this.actionconfig.statusvalue&&this.model.getField(this.actionconfig.statusfield)!=this.actionconfig.statusvalue&&(this.model.isEditing||this.model.startEdit(),this.model.setField(this.actionconfig.statusfield,this.actionconfig.statusvalue)),this.model.validate()?(this.saving=!0,this.modal.openModal("SystemLoadingModal").subscribe((t=>{t.instance.messagelabel="LBL_SAVING_DATA",this.model.save().subscribe((e=>{this.saving=!1,t.instance.self.destroy(),this.modalwindow&&this.modalwindow.self.destroy(),this.modal.openModal("ActivityCloseCreateModal",!0,this.injector).subscribe((t=>{t&&(t.instance.parent=this.model)}))}))}))):this.modalwindow||this.model.edit(!1))}get actionlabel(){return this.model.getField(this.actionconfig.statusfield)!=this.actionconfig.statusvalue&&this.model.getField(this.actionconfig.statusfield)!=this.actionconfig.statusvalue?"LBL_CLOSE_AND_NEW":this.model.isEditing?"LBL_SAVE_AND_NEW":"LBL_NEW"}}return t=ActionActivityCloseCreateButton,(0,s.Z)(ActionActivityCloseCreateButton,"ɵfac",(function(e){return new(e||t)(m.Y36(v.d),m.Y36(x.Pu),m.Y36(g.o),m.Y36(H.o),m.Y36(m.zs3),m.Y36(X.S,8))})),(0,s.Z)(ActionActivityCloseCreateButton,"ɵcmp",m.Xpm({type:t,selectors:[["action-activity-close-create-button"]],decls:2,vars:1,consts:[[3,"label"]],template:function(t,e){1&t&&(m.TgZ(0,"span"),m._UZ(1,"system-label",0),m.qZA()),2&t&&(m.xp6(1),m.Q6J("label",e.actionlabel))},dependencies:[E._],encapsulation:2})),ActionActivityCloseCreateButton})();var tt=i(7579),et=i(9751),it=i(3348),st=i(3278),nt=i(8861),lt=i(4663),ot=i(9621),at=i(3499),dt=i(5767),ct=i(1916);const rt=["modalContent"];let mt=(()=>{var t;class ActivityCloseModal{constructor(t,e,i,n,l,o,a){(0,s.Z)(this,"router",void 0),(0,s.Z)(this,"language",void 0),(0,s.Z)(this,"model",void 0),(0,s.Z)(this,"view",void 0),(0,s.Z)(this,"metadata",void 0),(0,s.Z)(this,"modal",void 0),(0,s.Z)(this,"toast",void 0),(0,s.Z)(this,"modalContent",void 0),(0,s.Z)(this,"componentconfig",{}),(0,s.Z)(this,"actionSetItems",[]),(0,s.Z)(this,"newValueFields",[]),(0,s.Z)(this,"componentSet",void 0),(0,s.Z)(this,"actionSet",void 0),(0,s.Z)(this,"actionSubject",new tt.x),(0,s.Z)(this,"action$",new et.y),(0,s.Z)(this,"preventGoingToRecord",!1),(0,s.Z)(this,"self",{}),this.router=t,this.language=e,this.model=i,this.view=n,this.metadata=l,this.modal=o,this.toast=a,this.view.isEditable=!0,this.view.setEditMode(),this.action$=this.actionSubject.asObservable()}ngOnInit(){this.componentconfig=this.metadata.getComponentConfig(this.constructor.name,this.model.module),this.actionSetItems=this.metadata.getActionSetItems(this.componentconfig.actionset),this.newValueFields=this.componentconfig.newValueFields,this.setNewValues()}emitaction(t){t&&this.toast.sendToast(this.language.getLabel("LBL_DATA_SAVED")+".","success"),this.self.destroy()}closeModal(){this.model.cancelEdit(),this.actionSubject.next(!1),this.actionSubject.complete(),this.self.destroy()}setNewValues(){this.newValueFields=JSON.parse(this.newValueFields);for(let t of this.newValueFields)this.model.setField(t.name,t.value)}}return t=ActivityCloseModal,(0,s.Z)(ActivityCloseModal,"ɵfac",(function(e){return new(e||t)(m.Y36(it.F0),m.Y36(v.d),m.Y36(g.o),m.Y36(y.e),m.Y36(x.Pu),m.Y36(H.o),m.Y36(st.A))})),(0,s.Z)(ActivityCloseModal,"ɵcmp",m.Xpm({type:t,selectors:[["ng-component"]],viewQuery:function(t,e){if(1&t&&m.Gf(rt,7,m.s_b),2&t){let t;m.iGM(t=m.CRH())&&(e.modalContent=t.first)}},inputs:{preventGoingToRecord:"preventGoingToRecord"},features:[m._Bn([y.e])],decls:13,vars:2,consts:[["size","large"],[3,"close"],["label","LBL_CLOSE"],["margin","none"],["modalContent",""],[1,"slds-grid"],[1,"slds-grid--vertical","slds-grow"],[3,"componentSet"],[1,"slds-grid","slds-grid--vertical-align-center","slds-grid--align-spread"],[1,"slds-col"],[3,"actionset","actionemitter"]],template:function(t,e){1&t&&(m.TgZ(0,"system-modal",0)(1,"system-modal-header",1),m.NdJ("close",(function(){return e.closeModal()})),m._UZ(2,"system-label",2),m.qZA(),m.TgZ(3,"system-modal-content",3,4)(5,"div",5)(6,"div",6),m._UZ(7,"object-edit-modal-dialog-container",7),m.qZA()()(),m.TgZ(8,"system-modal-footer")(9,"div",8),m._UZ(10,"div",9),m.TgZ(11,"div",9)(12,"object-action-container",10),m.NdJ("actionemitter",(function(t){return e.emitaction(t)})),m.qZA()()()()()),2&t&&(m.xp6(7),m.Q6J("componentSet",e.componentSet),m.xp6(5),m.Q6J("actionset",e.actionSet))},dependencies:[nt.S,lt.Z,E._,ot.j,at.x,dt.p,ct.y],encapsulation:2})),ActivityCloseModal})();var ut=i(9901);function ht(t,e){if(1&t){const t=m.EpF();m.TgZ(0,"system-input-radio",11),m.NdJ("ngModelChange",(function(e){m.CHM(t);const i=m.oxw();return m.KtG(i.value=e)})),m._uU(1),m.qZA()}if(2&t){const t=e.$implicit,i=m.oxw();m.Q6J("value",t.module)("ngModel",i.value),m.xp6(1),m.Oqu(i.language.getLabel(t.singular_label))}}let gt=(()=>{var t;class ActivityCloseCreateModal{constructor(t,e,i){(0,s.Z)(this,"language",void 0),(0,s.Z)(this,"model",void 0),(0,s.Z)(this,"metadata",void 0),(0,s.Z)(this,"componentconfig",{}),(0,s.Z)(this,"newBeanModules",[]),(0,s.Z)(this,"parent",{}),(0,s.Z)(this,"self",{}),(0,s.Z)(this,"value",""),this.language=t,this.model=e,this.metadata=i}ngOnInit(){this.componentconfig=this.metadata.getComponentConfig(this.constructor.name,this.parent.module);let t=this.componentconfig.newBeanModules;if(t){let e=t.split(",");for(let t of e)this.metadata.checkModuleAcl(t,"create")&&this.newBeanModules.push(this.metadata.getModuleDefs(t))}}closeModal(){this.self.destroy()}create(){this.model.module=this.value,this.model.addModel("",this.parent),this.self.destroy()}}return t=ActivityCloseCreateModal,(0,s.Z)(ActivityCloseCreateModal,"ɵfac",(function(e){return new(e||t)(m.Y36(v.d),m.Y36(g.o),m.Y36(x.Pu))})),(0,s.Z)(ActivityCloseCreateModal,"ɵcmp",m.Xpm({type:t,selectors:[["ng-component"]],inputs:{parent:"parent"},features:[m._Bn([g.o])],decls:13,vars:1,consts:[["size","x-small"],[3,"close"],["label","LBL_CREATE"],["margin","none"],[1,"slds-m-left_x-small","slds-m-vertical_large"],[1,"slds-form-element"],[1,"slds-form-element__control"],["name","module",3,"value","ngModel","ngModelChange",4,"ngFor","ngForOf"],[1,"slds-button","slds-button--neutral",3,"click"],["label","LBL_CANCEL"],[1,"slds-button","slds-button--brand",3,"click"],["name","module",3,"value","ngModel","ngModelChange"]],template:function(t,e){1&t&&(m.TgZ(0,"system-modal",0)(1,"system-modal-header",1),m.NdJ("close",(function(){return e.closeModal()})),m._UZ(2,"system-label",2),m.qZA(),m.TgZ(3,"system-modal-content",3)(4,"div",4)(5,"div",5)(6,"div",6),m.YNc(7,ht,2,3,"system-input-radio",7),m.qZA()()()(),m.TgZ(8,"system-modal-footer")(9,"button",8),m.NdJ("click",(function(){return e.closeModal()})),m._UZ(10,"system-label",9),m.qZA(),m.TgZ(11,"button",10),m.NdJ("click",(function(){return e.create()})),m._UZ(12,"system-label",2),m.qZA()()()),2&t&&(m.xp6(7),m.Q6J("ngForOf",e.newBeanModules))},dependencies:[n.sg,l.JJ,l.On,ut.A,E._,ot.j,at.x,dt.p,ct.y],encapsulation:2})),ActivityCloseCreateModal})();var pt=i(6040);let ft=(()=>{var t;class ActivitiesPopoverAddBarButton{constructor(t,e,i,n){(0,s.Z)(this,"model",void 0),(0,s.Z)(this,"language",void 0),(0,s.Z)(this,"metadata",void 0),(0,s.Z)(this,"relatedmodels",void 0),(0,s.Z)(this,"module",""),(0,s.Z)(this,"parent",void 0),this.model=t,this.language=e,this.metadata=i,this.relatedmodels=n}addModel(){this.model.module=this.module;let t=[this.parent];this.relatedmodels&&this.relatedmodels.model&&t.push(this.relatedmodels.model),this.model.addModel("",t)}}return t=ActivitiesPopoverAddBarButton,(0,s.Z)(ActivitiesPopoverAddBarButton,"ɵfac",(function(e){return new(e||t)(m.Y36(g.o),m.Y36(v.d),m.Y36(x.Pu),m.Y36(pt.j,8))})),(0,s.Z)(ActivitiesPopoverAddBarButton,"ɵcmp",m.Xpm({type:t,selectors:[["activities-popover-addbar-button"]],inputs:{module:"module",parent:"parent"},features:[m._Bn([g.o])],decls:2,vars:2,consts:[[1,"slds-button","slds-button_icon","slds-button_icon-border",3,"title","click"],["size","large",3,"module"]],template:function(t,e){1&t&&(m.TgZ(0,"button",0),m.NdJ("click",(function(){return e.addModel()})),m._UZ(1,"system-button-icon",1),m.qZA()),2&t&&(m.Q6J("title",e.language.getModuleCombinedLabel("LBL_ADD",e.module)),m.xp6(1),m.Q6J("module",e.module))},dependencies:[G.J],encapsulation:2})),ActivitiesPopoverAddBarButton})();function vt(t,e){if(1&t&&(m.TgZ(0,"div",3),m._UZ(1,"activities-popover-addbar-button",4),m.qZA()),2&t){const t=e.$implicit,i=m.oxw(2);m.xp6(1),m.Q6J("module",t)("parent",i.model)}}function Zt(t,e){if(1&t&&(m.TgZ(0,"div",1),m.YNc(1,vt,2,2,"div",2),m.qZA()),2&t){const t=m.oxw();m.xp6(1),m.Q6J("ngForOf",t.modules)}}let bt=(()=>{var t;class ActivitiesPopoverAddBar{constructor(t,e,i){(0,s.Z)(this,"model",void 0),(0,s.Z)(this,"language",void 0),(0,s.Z)(this,"metadata",void 0),(0,s.Z)(this,"componentconfig",void 0),(0,s.Z)(this,"modules",[]),this.model=t,this.language=e,this.metadata=i}ngOnInit(){if(this.componentconfig.modules){let t=this.componentconfig.modules.split(",");for(let e of t)this.metadata.checkModuleAcl(e,"create")&&this.modules.push(e)}}}return t=ActivitiesPopoverAddBar,(0,s.Z)(ActivitiesPopoverAddBar,"ɵfac",(function(e){return new(e||t)(m.Y36(g.o),m.Y36(v.d),m.Y36(x.Pu))})),(0,s.Z)(ActivitiesPopoverAddBar,"ɵcmp",m.Xpm({type:t,selectors:[["ng-component"]],decls:1,vars:1,consts:[["class","slds-grid slds-p-vertical--x-small",4,"ngIf"],[1,"slds-grid","slds-p-vertical--x-small"],["class","slds-p-horizontal--xx-small",4,"ngFor","ngForOf"],[1,"slds-p-horizontal--xx-small"],[3,"module","parent"]],template:function(t,e){1&t&&m.YNc(0,Zt,2,1,"div",0),2&t&&m.Q6J("ngIf",e.modules.length>0)},dependencies:[n.sg,n.O5,ft],encapsulation:2})),ActivitiesPopoverAddBar})();const yt=["field-activities-addactions-button",""];let xt=(()=>{var t;class fieldActivitiesAddActionsButton extends ft{}return t=fieldActivitiesAddActionsButton,(0,s.Z)(fieldActivitiesAddActionsButton,"ɵfac",function(){let e;return function(i){return(e||(e=m.n5z(t)))(i||t)}}()),(0,s.Z)(fieldActivitiesAddActionsButton,"ɵcmp",m.Xpm({type:t,selectors:[["","field-activities-addactions-button",""]],hostBindings:function(t,e){1&t&&m.NdJ("click",(function(){return e.addModel()}))},features:[m._Bn([g.o]),m.qOj],attrs:yt,decls:1,vars:1,consts:[["size","large",3,"module"]],template:function(t,e){1&t&&m._UZ(0,"system-button-icon",0),2&t&&m.Q6J("module",e.module)},dependencies:[G.J],encapsulation:2})),fieldActivitiesAddActionsButton})();function _t(t,e){if(1&t&&m._UZ(0,"button",3),2&t){const t=e.$implicit,i=m.oxw(2);m.Q6J("title",i.language.getModuleCombinedLabel("LBL_ADD",t))("module",t)("parent",i.model)}}function At(t,e){if(1&t&&(m.TgZ(0,"div",1),m.YNc(1,_t,1,3,"button",2),m.qZA()),2&t){const t=m.oxw();m.xp6(1),m.Q6J("ngForOf",t.modules)}}let Tt=(()=>{var t;class fieldActivitiesAddActions{constructor(t,e,i){(0,s.Z)(this,"model",void 0),(0,s.Z)(this,"language",void 0),(0,s.Z)(this,"metadata",void 0),(0,s.Z)(this,"fieldconfig",{}),(0,s.Z)(this,"modules",[]),this.model=t,this.language=e,this.metadata=i}ngOnInit(){if(this.fieldconfig.modules){let t=this.fieldconfig.modules.split(",");for(let e of t)this.metadata.checkModuleAcl(e,"create")&&this.modules.push(e)}}}return t=fieldActivitiesAddActions,(0,s.Z)(fieldActivitiesAddActions,"ɵfac",(function(e){return new(e||t)(m.Y36(g.o),m.Y36(v.d),m.Y36(x.Pu))})),(0,s.Z)(fieldActivitiesAddActions,"ɵcmp",m.Xpm({type:t,selectors:[["ng-component"]],inputs:{fieldconfig:"fieldconfig"},decls:1,vars:1,consts:[["class","slds-button-group","role","group",4,"ngIf"],["role","group",1,"slds-button-group"],["field-activities-addactions-button","","style","height: 24px; width:24px;","class","slds-button slds-button_icon slds-button_icon-border",3,"title","module","parent",4,"ngFor","ngForOf"],["field-activities-addactions-button","",1,"slds-button","slds-button_icon","slds-button_icon-border",2,"height","24px","width","24px",3,"title","module","parent"]],template:function(t,e){1&t&&m.YNc(0,At,2,1,"div",0),2&t&&m.Q6J("ngIf",e.modules.length>0)},dependencies:[n.sg,n.O5,xt],encapsulation:2})),fieldActivitiesAddActions})();var kt=i(7040),Ct=i(6367),wt=i(3208),Mt=i(7514),Jt=i(1790);function Yt(t,e){if(1&t&&m._UZ(0,"field-label",2),2&t){const t=m.oxw();m.Q6J("fieldname",t.fieldname)("fieldconfig",t.fieldconfig)}}function Lt(t,e){if(1&t){const t=m.EpF();m.TgZ(0,"system-checkbox",7),m.NdJ("ngModelChange",(function(e){m.CHM(t);const i=m.oxw(2);return m.KtG(i.completed=e)})),m.qZA()}if(2&t){const t=m.oxw(2);m.Q6J("ngModel",t.completed)}}function Ft(t,e){if(1&t&&(m.TgZ(0,"field-generic-display",3)(1,"div",4),m.YNc(2,Lt,1,1,"system-checkbox",5),m.TgZ(3,"div",6),m._uU(4),m.qZA()()()),2&t){const t=m.oxw();m.Q6J("fielddisplayclass",t.fielddisplayclass)("editable",t.isEditable())("fieldconfig",t.fieldconfig)("fieldid",t.fieldid),m.xp6(2),m.Q6J("ngIf",t.canComplete),m.xp6(2),m.Oqu(t.value)}}let St=(()=>{var t;class fieldActivitiesTaskWithCloseCheckbox extends kt.O{constructor(t,e,i,n,l){super(t,e,i,n,l),(0,s.Z)(this,"model",void 0),(0,s.Z)(this,"view",void 0),(0,s.Z)(this,"language",void 0),(0,s.Z)(this,"metadata",void 0),(0,s.Z)(this,"router",void 0),this.model=t,this.view=e,this.language=i,this.metadata=n,this.router=l}get canComplete(){return"Completed"!==this.model.getField("status")&&"Deferred"!==this.model.getField("status")||!this.model.checkAccess("edit")}get completed(){return"Completed"==this.model.getField("status")}set completed(t){t&&this.canComplete&&(this.model.startEdit(),this.model.setField("status","Completed"),this.model.save())}}return t=fieldActivitiesTaskWithCloseCheckbox,(0,s.Z)(fieldActivitiesTaskWithCloseCheckbox,"ɵfac",(function(e){return new(e||t)(m.Y36(g.o),m.Y36(y.e),m.Y36(v.d),m.Y36(x.Pu),m.Y36(it.F0))})),(0,s.Z)(fieldActivitiesTaskWithCloseCheckbox,"ɵcmp",m.Xpm({type:t,selectors:[["ng-component"]],features:[m.qOj],decls:2,vars:2,consts:[[3,"fieldname","fieldconfig",4,"ngIf"],[3,"fielddisplayclass","editable","fieldconfig","fieldid",4,"ngIf"],[3,"fieldname","fieldconfig"],[3,"fielddisplayclass","editable","fieldconfig","fieldid"],[1,"slds-grid","slds-grid_vertical-align-center"],[3,"ngModel","ngModelChange",4,"ngIf"],["system-model-popover",""],[3,"ngModel","ngModelChange"]],template:function(t,e){1&t&&(m.YNc(0,Yt,1,2,"field-label",0),m.YNc(1,Ft,5,6,"field-generic-display",1)),2&t&&(m.Q6J("ngIf",e.displayLabel),m.xp6(1),m.Q6J("ngIf",!e.isEditMode()))},dependencies:[n.O5,l.JJ,l.On,Ct.q,wt.D,Mt.U,Jt.g],encapsulation:2})),fieldActivitiesTaskWithCloseCheckbox})();var Et=i(2422),Nt=i(5638);function qt(t,e){if(1&t&&m._UZ(0,"field-label",3),2&t){const t=m.oxw();m.Q6J("fieldname",t.fieldname)("fieldconfig",t.fieldconfig)}}function It(t,e){if(1&t&&(m.TgZ(0,"field-generic-display",4),m._UZ(1,"system-label",5),m.qZA()),2&t){const t=m.oxw();m.Q6J("fielddisplayclass",t.fielddisplayclass)("editable",t.isEditable())("fieldconfig",t.fieldconfig)("fieldid",t.fieldid),m.xp6(1),m.Q6J("label",t.display)}}function Ot(t,e){1&t&&m._UZ(0,"option")}function Qt(t,e){if(1&t&&(m.TgZ(0,"option",14),m._UZ(1,"system-label",5),m.qZA()),2&t){const t=e.$implicit;m.Q6J("value",t.value),m.xp6(1),m.Q6J("label",t.label)}}function Ut(t,e){if(1&t){const t=m.EpF();m.TgZ(0,"div",6)(1,"div",7)(2,"div",8)(3,"select",9,10),m.NdJ("ngModelChange",(function(e){m.CHM(t);const i=m.oxw();return m.KtG(i.value=e)})),m.YNc(5,Ot,1,0,"option",11),m.YNc(6,Qt,2,2,"option",12),m.qZA()(),m._UZ(7,"field-messages",13),m.qZA()()}if(2&t){const t=m.oxw();m.xp6(1),m.Q6J("ngClass",t.getFieldClass()),m.xp6(2),m.Q6J("ngModel",t.value),m.xp6(2),m.Q6J("ngIf",t.fieldconfig.showEmptyOption),m.xp6(1),m.Q6J("ngForOf",t.options),m.xp6(1),m.Q6J("fieldname",t.fieldname)}}let Dt=(()=>{var t;class fieldActivityReminder extends kt.O{constructor(t,e,i,n,l,o,a,d,c,r){super(t,e,n,l,o),(0,s.Z)(this,"model",void 0),(0,s.Z)(this,"view",void 0),(0,s.Z)(this,"broadcast",void 0),(0,s.Z)(this,"language",void 0),(0,s.Z)(this,"metadata",void 0),(0,s.Z)(this,"router",void 0),(0,s.Z)(this,"elementRef",void 0),(0,s.Z)(this,"renderer",void 0),(0,s.Z)(this,"modal",void 0),(0,s.Z)(this,"userpreferences",void 0),(0,s.Z)(this,"options",[{value:"-1",label:"LBL_REMINDER_NONE"},{value:"60",label:"LBL_REMINDER_1MINUTE"},{value:"300",label:"LBL_REMINDER_5MINUTES"},{value:"600",label:"LBL_REMINDER_10MINUTES"},{value:"900",label:"LBL_REMINDER_15MINUTES"},{value:"1800",label:"LBL_REMINDER_30MINUTES"},{value:"3600",label:"LBL_REMINDER_1HOUR"},{value:"7200",label:"LBL_REMINDER_2HOURS"},{value:"10800",label:"LBL_REMINDER_3HOURS"},{value:"18000",label:"LBL_REMINDER_5HOURS"},{value:"86400",label:"LBL_REMINDER_1DAY"}]),this.model=t,this.view=e,this.broadcast=i,this.language=n,this.metadata=l,this.router=o,this.elementRef=a,this.renderer=d,this.modal=c,this.userpreferences=r}get display(){return this.options.find((t=>t.value==this.value)).label}get value(){let t=this.model.getField(this.fieldname);return t||"-1"}set value(t){this.model.setField(this.fieldname,t)}}return t=fieldActivityReminder,(0,s.Z)(fieldActivityReminder,"ɵfac",(function(e){return new(e||t)(m.Y36(g.o),m.Y36(y.e),m.Y36(u.f),m.Y36(v.d),m.Y36(x.Pu),m.Y36(it.F0),m.Y36(m.SBq),m.Y36(m.Qsj),m.Y36(H.o),m.Y36(Et.z))})),(0,s.Z)(fieldActivityReminder,"ɵcmp",m.Xpm({type:t,selectors:[["field-activity-reminder"]],features:[m.qOj],decls:3,vars:3,consts:[[3,"fieldname","fieldconfig",4,"ngIf"],[3,"fielddisplayclass","editable","fieldconfig","fieldid",4,"ngIf"],["class","slds-form-element",4,"ngIf"],[3,"fieldname","fieldconfig"],[3,"fielddisplayclass","editable","fieldconfig","fieldid"],[3,"label"],[1,"slds-form-element"],[1,"slds-form-element__control",3,"ngClass"],[1,"slds-select_container","slds-m-vertical--xx-small"],[1,"slds-select",3,"ngModel","ngModelChange"],["focus",""],[4,"ngIf"],[3,"value",4,"ngFor","ngForOf"],[3,"fieldname"],[3,"value"]],template:function(t,e){1&t&&(m.YNc(0,qt,1,2,"field-label",0),m.YNc(1,It,2,5,"field-generic-display",1),m.YNc(2,Ut,8,5,"div",2)),2&t&&(m.Q6J("ngIf",e.displayLabel),m.xp6(1),m.Q6J("ngIf",!e.isEditMode()),m.xp6(1),m.Q6J("ngIf",e.isEditMode()))},dependencies:[n.mk,n.sg,n.O5,l.YN,l.Kr,l.EJ,l.JJ,l.On,Ct.q,wt.D,Nt.a,E._],encapsulation:2})),fieldActivityReminder})();const Bt=["activity-participation-panel-header",""];function Pt(t,e){if(1&t&&(m.TgZ(0,"th",2),m._UZ(1,"field-label",3),m.qZA()),2&t){const t=e.$implicit;m.xp6(1),m.Q6J("fieldname",t.field)("fieldconfig",t.fieldconfig)}}let Rt=(()=>{var t;class ActivityParticipationPanelHeader{constructor(t,e,i){(0,s.Z)(this,"model",void 0),(0,s.Z)(this,"metadata",void 0),(0,s.Z)(this,"view",void 0),(0,s.Z)(this,"fieldset",void 0),(0,s.Z)(this,"fieldsetfields",[]),this.model=t,this.metadata=e,this.view=i,this.model.module="Contacts"}ngOnInit(){this.fieldsetfields=this.metadata.getFieldSetFields(this.fieldset)}}return t=ActivityParticipationPanelHeader,(0,s.Z)(ActivityParticipationPanelHeader,"ɵfac",(function(e){return new(e||t)(m.Y36(g.o),m.Y36(x.Pu),m.Y36(y.e))})),(0,s.Z)(ActivityParticipationPanelHeader,"ɵcmp",m.Xpm({type:t,selectors:[["","activity-participation-panel-header",""]],inputs:{fieldset:"fieldset"},features:[m._Bn([g.o])],attrs:Bt,decls:2,vars:1,consts:[["scope","col",1,"slds-cell-shrink"],["class","","scope","col",4,"ngFor","ngForOf"],["scope","col",1,""],[3,"fieldname","fieldconfig"]],template:function(t,e){1&t&&(m._UZ(0,"th",0),m.YNc(1,Pt,2,2,"th",1)),2&t&&(m.xp6(1),m.Q6J("ngForOf",e.fieldsetfields))},dependencies:[n.sg,Ct.q],encapsulation:2})),ActivityParticipationPanelHeader})();var zt=i(4561),jt=i(8859);const Ht=["activity-participation-panel-participant",""];function Gt(t,e){if(1&t){const t=m.EpF();m.TgZ(0,"system-utility-icon",4),m.NdJ("click",(function(e){m.CHM(t);const i=m.oxw();return m.KtG(i.removeItem(e))})),m.qZA()}}function Kt(t,e){if(1&t&&(m.TgZ(0,"td"),m._UZ(1,"field-container",5),m.qZA()),2&t){const t=e.$implicit;m.xp6(1),m.Q6J("field",t.field)("fieldconfig",t.fieldconfig)}}let Vt=(()=>{var t;class ActivityParticipationPanelParticipant{constructor(t,e,i,n){(0,s.Z)(this,"model",void 0),(0,s.Z)(this,"parent",void 0),(0,s.Z)(this,"metadata",void 0),(0,s.Z)(this,"view",void 0),(0,s.Z)(this,"participant",{}),(0,s.Z)(this,"module",void 0),(0,s.Z)(this,"editmode",!1),(0,s.Z)(this,"fieldset",void 0),(0,s.Z)(this,"fieldsetfields",[]),(0,s.Z)(this,"remove",new m.vpe),this.model=t,this.parent=e,this.metadata=i,this.view=n}ngOnInit(){this.model.module=this.participant.module,this.model.id=this.participant.id,this.model.setData(this.participant.data),this.model.parentmodel=this.parent,this.fieldsetfields=this.metadata.getFieldSetFields(this.fieldset)}removeItem(t){t.stopPropagation(),this.editmode&&this.remove.emit(!0)}}return t=ActivityParticipationPanelParticipant,(0,s.Z)(ActivityParticipationPanelParticipant,"ɵfac",(function(e){return new(e||t)(m.Y36(g.o),m.Y36(g.o,4),m.Y36(x.Pu),m.Y36(y.e))})),(0,s.Z)(ActivityParticipationPanelParticipant,"ɵcmp",m.Xpm({type:t,selectors:[["","activity-participation-panel-participant",""]],inputs:{participant:"participant",module:"module",editmode:"editmode",fieldset:"fieldset"},outputs:{remove:"remove"},features:[m._Bn([g.o])],attrs:Ht,decls:5,vars:3,consts:[[1,"slds-grid","slds-grid--vertical-align-center"],["class","slds-m-right--xx-small","icon","close","size","xx-small",3,"click",4,"ngIf"],["size","xx-small",3,"module"],[4,"ngFor","ngForOf"],["icon","close","size","xx-small",1,"slds-m-right--xx-small",3,"click"],["fielddisplayclass","slds-truncate slds-p-horizontal--x-small",3,"field","fieldconfig"]],template:function(t,e){1&t&&(m.TgZ(0,"td")(1,"div",0),m.YNc(2,Gt,1,0,"system-utility-icon",1),m._UZ(3,"system-icon",2),m.qZA()(),m.YNc(4,Kt,2,2,"td",3)),2&t&&(m.xp6(2),m.Q6J("ngIf",e.editmode),m.xp6(1),m.Q6J("module",e.model.module),m.xp6(1),m.Q6J("ngForOf",e.fieldsetfields))},dependencies:[n.sg,n.O5,T.j,zt.f,jt.r],encapsulation:2})),ActivityParticipationPanelParticipant})();function $t(t,e){if(1&t){const t=m.EpF();m.TgZ(0,"tr",4),m.NdJ("remove",(function(){const e=m.CHM(t).$implicit,i=m.oxw();return m.KtG(i.removeParticipant(e))})),m.qZA()}if(2&t){const t=e.$implicit,i=m.oxw();m.Q6J("participant",t)("editmode",i.editmode)("fieldset",i.fieldset)}}let Xt=(()=>{var t;class ActivityParticipationPanel{constructor(t,e,i,n){(0,s.Z)(this,"model",void 0),(0,s.Z)(this,"metadata",void 0),(0,s.Z)(this,"view",void 0),(0,s.Z)(this,"language",void 0),(0,s.Z)(this,"participants",[]),(0,s.Z)(this,"editmode",!1),(0,s.Z)(this,"fieldset",void 0),(0,s.Z)(this,"remove",new m.vpe),this.model=t,this.metadata=e,this.view=i,this.language=n,this.view.isEditable=!1,this.view.displayLabels=!1}removeParticipant(t){this.remove.emit(t)}participantid(t,e){return e.id}}return t=ActivityParticipationPanel,(0,s.Z)(ActivityParticipationPanel,"ɵfac",(function(e){return new(e||t)(m.Y36(g.o),m.Y36(x.Pu),m.Y36(y.e),m.Y36(v.d))})),(0,s.Z)(ActivityParticipationPanel,"ɵcmp",m.Xpm({type:t,selectors:[["activity-participation-panel"]],inputs:{participants:"participants",editmode:"editmode",fieldset:"fieldset"},outputs:{remove:"remove"},features:[m._Bn([y.e])],decls:6,vars:3,consts:[[1,"slds-size--1-of-1","slds-scrollable--y"],[1,"slds-table","slds-table_bordered"],["activity-participation-panel-header","",1,"slds-line-height_reset",3,"fieldset"],["activity-participation-panel-participant","",3,"participant","editmode","fieldset","remove",4,"ngFor","ngForOf","ngForTrackBy"],["activity-participation-panel-participant","",3,"participant","editmode","fieldset","remove"]],template:function(t,e){1&t&&(m.TgZ(0,"div",0)(1,"table",1)(2,"thead"),m._UZ(3,"tr",2),m.qZA(),m.TgZ(4,"tbody"),m.YNc(5,$t,1,3,"tr",3),m.qZA()()()),2&t&&(m.xp6(3),m.Q6J("fieldset",e.fieldset),m.xp6(2),m.Q6J("ngForOf",e.participants)("ngForTrackBy",e.participantid))},dependencies:[n.sg,Rt,Vt],encapsulation:2})),ActivityParticipationPanel})();var Wt=i(4271),te=i(5957),ee=i(3333);function ie(t,e){if(1&t&&m._UZ(0,"field-label",3),2&t){const t=m.oxw();m.Q6J("fieldname",t.fieldname)("fieldconfig",t.fieldconfig)}}function se(t,e){if(1&t){const t=m.EpF();m.TgZ(0,"li",24),m.NdJ("click",(function(){const e=m.CHM(t).index,i=m.oxw(3);return m.KtG(i.setLookupType(e))})),m.TgZ(1,"div",25)(2,"div",26),m._UZ(3,"system-icon",27),m.TgZ(4,"div",28),m._UZ(5,"system-label-modulename",29),m.qZA()()()()}if(2&t){const t=e.$implicit;m.xp6(3),m.Q6J("module",t.module),m.xp6(2),m.Q6J("module",t.module)}}const ne=function(t){return{"slds-is-open":t}};function le(t,e){if(1&t){const t=m.EpF();m.TgZ(0,"div",16)(1,"div",17)(2,"div",8)(3,"div",18),m.NdJ("click",(function(){m.CHM(t);const e=m.oxw(2);return m.KtG(e.toggleLookupTypeSelect())})),m._UZ(4,"input",19)(5,"system-icon",20),m.qZA(),m.TgZ(6,"div",21)(7,"ul",22),m.YNc(8,se,6,2,"li",23),m.qZA()()()()()}if(2&t){const t=m.oxw(2);m.xp6(2),m.Q6J("ngClass",m.VKq(3,ne,t.lookuplinkSelectOpen)),m.xp6(2),m.Q6J("value",t.lookupTypeName),m.xp6(4),m.Q6J("ngForOf",t.lookuplinks)}}function oe(t,e){if(1&t){const t=m.EpF();m.TgZ(0,"field-lookup-recent",30),m.NdJ("selectedObject",(function(e){m.CHM(t);const i=m.oxw(2);return m.KtG(i.addItem(e))})),m.qZA()}if(2&t){const t=m.oxw(2);m.Q6J("module",t.lookuplinks[t.lookupType].module)}}function ae(t,e){if(1&t){const t=m.EpF();m.TgZ(0,"field-lookup-search",31),m.NdJ("selectedObject",(function(e){m.CHM(t);const i=m.oxw(2);return m.KtG(i.addItem(e))}))("searchWithModal",(function(){m.CHM(t);const e=m.oxw(2);return m.KtG(e.searchWithModal())})),m.qZA()}if(2&t){const t=m.oxw(2);m.Q6J("module",t.lookuplinks[t.lookupType].module)("relatefilter",t.relateFilter)("searchterm",t.lookupSearchTerm)}}const de=function(t){return{"slds-combobox__input":t}};function ce(t,e){if(1&t){const t=m.EpF();m.TgZ(0,"div",4)(1,"div",5),m.YNc(2,le,9,5,"div",6),m.TgZ(3,"div",7)(4,"div",8)(5,"div",9)(6,"input",10),m.NdJ("click",(function(){m.CHM(t);const e=m.oxw();return m.KtG(e.onFocus())}))("focus",(function(){m.CHM(t);const e=m.oxw();return m.KtG(e.onFocus())}))("ngModelChange",(function(e){m.CHM(t);const i=m.oxw();return m.KtG(i.lookupSearchTerm=e)})),m.qZA(),m.TgZ(7,"button",11),m.NdJ("click",(function(){m.CHM(t);const e=m.oxw();return m.KtG(e.searchWithModal())})),m._UZ(8,"system-button-icon",12),m.qZA()(),m.TgZ(9,"div",13),m.YNc(10,oe,1,1,"field-lookup-recent",14),m.YNc(11,ae,1,3,"field-lookup-search",15),m.qZA()()()()()}if(2&t){const t=m.oxw();m.xp6(2),m.Q6J("ngIf",t.lookuplinks.length>1),m.xp6(2),m.Q6J("ngClass",m.VKq(8,ne,t.lookupSearchOpen)),m.xp6(2),m.Q6J("ngClass",m.VKq(10,de,t.lookuplinks.length>1))("ngModel",t.lookupSearchTerm)("placeholder",t.language.getModuleCombinedLabel("LBL_SEARCH",null==t.lookuplinks[t.lookupType]?null:t.lookuplinks[t.lookupType].module)),m.xp6(2),m.Q6J("icon","search"),m.xp6(2),m.Q6J("ngIf",t.lookupSearchOpen&&""===t.lookupSearchTerm),m.xp6(1),m.Q6J("ngIf",t.lookupSearchOpen&&""!==t.lookupSearchTerm)}}let re=(()=>{var t;class fieldActivityParticipationPanel extends kt.O{constructor(t,e,i,n,l,o,a,d,c){super(t,e,n,l,o),(0,s.Z)(this,"model",void 0),(0,s.Z)(this,"view",void 0),(0,s.Z)(this,"broadcast",void 0),(0,s.Z)(this,"language",void 0),(0,s.Z)(this,"metadata",void 0),(0,s.Z)(this,"router",void 0),(0,s.Z)(this,"elementRef",void 0),(0,s.Z)(this,"renderer",void 0),(0,s.Z)(this,"modal",void 0),(0,s.Z)(this,"lookupType",0),(0,s.Z)(this,"clickListener",void 0),(0,s.Z)(this,"lookuplinks",[]),(0,s.Z)(this,"lookuplinkSelectOpen",!1),(0,s.Z)(this,"lookupSearchOpen",!1),(0,s.Z)(this,"lookupSearchTerm",""),(0,s.Z)(this,"participants",[]),(0,s.Z)(this,"displayAssignedUser",void 0),(0,s.Z)(this,"fieldset",void 0),(0,s.Z)(this,"relateFilter",void 0),this.model=t,this.view=e,this.broadcast=i,this.language=n,this.metadata=l,this.router=o,this.elementRef=a,this.renderer=d,this.modal=c,this.subscriptions.add(this.broadcast.message$.subscribe((t=>this.handleMessage(t)))),this.subscriptions.add(this.model.data$.subscribe((t=>{this.lookuplinks.length>0&&this.setParticipants(),this.updateRelateFilter()})))}get lookupTypeName(){return this.language.getModuleName(this.lookuplinks[this.lookupType]?.module)}get relateFilterActive(){return"Users"!=this.lookuplinks[this.lookupType]?.module}ngOnInit(){this.lookuplinks=this.getLookuplinks(),this.setParticipants(),this.fieldconfig.fieldset?this.fieldset=this.fieldconfig.fieldset:this.fieldset=this.metadata.getComponentConfig("fieldActivityParticipationPanel").fieldset,this.fieldconfig.relatefilterfield&&this.createRelateFilter()}ngOnDestroy(){this.subscriptions.unsubscribe()}onClick(t){this.elementRef.nativeElement.contains(t.target)||this.closePopups()}handleRelateFIlterField(){this.fieldconfig.relatefilterfield&&(this.createRelateFilter(),this.subscriptions.add(this.model.data$.subscribe((t=>{this.updateRelateFilter()}))))}createRelateFilter(){let t=this.metadata.getFieldDefs(this.model.module,this.fieldconfig.relatefilterfield);if(t){let e="parent"==t.type?this.model.getField(t.type_name):t.module;this.relateFilter={module:e,relationship:this.fieldconfig.relatefilterrelationship,id:this.model.getField(t.id_name),display:this.model.getField(this.fieldconfig.relatefilterfield),active:!!this.model.getField(t.id_name),required:!1}}}removeRelateFilter(){this.relateFilter=void 0}updateRelateFilter(){if(this.relateFilterActive){let t=this.metadata.getFieldDefs(this.model.module,this.fieldconfig.relatefilterfield);t&&(this.relateFilter.id=this.model.getField(t.id_name),this.relateFilter.display=this.model.getField(this.fieldconfig.relatefilterfield),this.relateFilter.active=!!this.relateFilter.id)}}getLookuplinks(){let t=[];this.fieldconfig.linknames&&(t=this.fieldconfig.linknames.split(",")),0==t.length&&(t=["contacts","users","consumers"]);let e=[];for(let i of t){i=i.trim();let t=this.metadata.getFieldDefs(this.model.module,i)?.module;t&&this.metadata.moduleDefs[t]&&e.push({name:i,module:t})}return e}setParticipants(){for(let t of this.lookuplinks)if(this.model.data[t.name]&&this.model.data[t.name].beans)for(let e in this.model.data[t.name].beans){let i=this.model.data[t.name].beans[e];("Users"!=t.module||this.displayAssignedUser||e!=this.model.data.assigned_user_id)&&(this.participants.findIndex((t=>t.id==i.id))<0&&this.participants.push({module:t.module,id:i.id,data:i,link:t.name}))}}addItem(t){this.model.data[this.lookuplinks[this.lookupType].name]||(this.model.data[this.lookuplinks[this.lookupType].name]={beans:{}}),this.model.data[this.lookuplinks[this.lookupType].name].beans[t.id]=t.data,this.lookupSearchOpen=!1,this.setParticipants()}handleMessage(t){if(t.messagedata.reference&&"model.save"===t.messagetype)this.fieldid===t.messagedata.reference&&(this.lookupSearchTerm="",this.addItem({id:t.messagedata.data.id,text:t.messagedata.data.summary_text}))}closePopups(){this.lookupSearchOpen=!1,this.lookuplinkSelectOpen=!1,this.clickListener()}toggleLookupTypeSelect(){this.lookuplinkSelectOpen=!this.lookuplinkSelectOpen,this.lookupSearchOpen=!1}setLookupType(t){this.lookupSearchTerm="",this.lookupType=t,this.lookuplinkSelectOpen=!1,this.relateFilterActive?this.createRelateFilter():this.removeRelateFilter()}removeItem(t){this.model.data[t.link].beans_relations_to_delete||(this.model.data[t.link].beans_relations_to_delete={}),this.model.data[t.link].beans_relations_to_delete[t.id]=t,delete this.model.data[t.link].beans[t.id],this.participants=this.participants.filter((e=>e.id!=t.id))}onFocus(){this.openSearchDropDown()}openSearchDropDown(){this.lookuplinkSelectOpen=!1,this.lookupSearchOpen=!0,this.clickListener=this.renderer.listen("document","click",(t=>this.onClick(t)))}searchWithModal(){this.modal.openModal("ObjectModalModuleLookup").subscribe((t=>{t.instance.module=this.lookuplinks[this.lookupType].module,t.instance.multiselect=!1,this.relateFilter&&(t.instance.relatefilter=this.relateFilter),t.instance.selectedItems.subscribe((t=>{this.addItem({id:t[0].id,text:t[0].summary_text,data:t[0]})})),t.instance.usedSearchTerm.subscribe((t=>{this.lookupSearchTerm=t})),t.instance.searchTerm=this.lookupSearchTerm}))}}return t=fieldActivityParticipationPanel,(0,s.Z)(fieldActivityParticipationPanel,"ɵfac",(function(e){return new(e||t)(m.Y36(g.o),m.Y36(y.e),m.Y36(u.f),m.Y36(v.d),m.Y36(x.Pu),m.Y36(it.F0),m.Y36(m.SBq),m.Y36(m.Qsj),m.Y36(H.o))})),(0,s.Z)(fieldActivityParticipationPanel,"ɵcmp",m.Xpm({type:t,selectors:[["ng-component"]],features:[m.qOj],decls:3,vars:5,consts:[[3,"fieldname","fieldconfig",4,"ngIf"],[3,"fieldset","participants","editmode","remove"],["class","slds-form-element__control",4,"ngIf"],[3,"fieldname","fieldconfig"],[1,"slds-form-element__control"],[1,"slds-combobox-group","slds-p-vertical--xx-small"],["class","slds-combobox_object-switcher slds-combobox-addon_start",4,"ngIf"],[1,"slds-combobox_container","slds-combobox-addon_end"],["role","combobox",1,"slds-combobox","slds-dropdown-trigger","slds-dropdown-trigger_click",3,"ngClass"],["role","none",1,"slds-combobox__form-element","slds-input-has-icon","slds-input-has-icon_right"],["type","text","aria-autocomplete","list","autoComplete","off","role","textbox",1,"slds-input",3,"ngClass","ngModel","placeholder","click","focus","ngModelChange"],[1,"slds-button","slds-button_icon","slds-input__icon","slds-input__icon_right",3,"click"],[3,"icon"],["role","listbox",1,"slds-dropdown","slds-dropdown_length-with-icon-7","slds-dropdown_fluid"],[3,"module","selectedObject",4,"ngIf"],[3,"module","relatefilter","searchterm","selectedObject","searchWithModal",4,"ngIf"],[1,"slds-combobox_object-switcher","slds-combobox-addon_start"],[1,"slds-combobox_container"],[1,"slds-combobox__form-element","slds-input-has-icon","slds-input-has-icon--right",3,"click"],["type","text","readonly","","autoComplete","off","role","textbox",1,"slds-input","slds-combobox__input","slds-combobox__input-value",3,"value"],["icon","down","sprite","utility","addclasses","slds-input__icon slds-input__icon_right"],["role","listbox",1,"slds-dropdown","slds-dropdown_length-5","slds-dropdown_x-small","slds-dropdown_left"],["role","group","aria-label","Suggested for you",1,"slds-listbox","slds-listbox_vertical"],["role","presentation","class","slds-listbox__item",3,"click",4,"ngFor","ngForOf"],["role","presentation",1,"slds-listbox__item",3,"click"],["role","option",1,"slds-media","slds-listbox__option","slds-listbox__option_plain","slds-media_small"],[1,"slds-grid","slds-grid--vertical-align-center"],["size","x-small",3,"module"],[1,"slds-truncate"],[3,"module"],[3,"module","selectedObject"],[3,"module","relatefilter","searchterm","selectedObject","searchWithModal"]],template:function(t,e){1&t&&(m.YNc(0,ie,1,2,"field-label",0),m.TgZ(1,"activity-participation-panel",1),m.NdJ("remove",(function(t){return e.removeItem(t)})),m.qZA(),m.YNc(2,ce,12,12,"div",2)),2&t&&(m.Q6J("ngIf",e.displayLabel),m.xp6(1),m.Q6J("fieldset",e.fieldset)("participants",e.participants)("editmode",e.isEditMode()),m.xp6(1),m.Q6J("ngIf",e.isEditable()&&e.isEditMode()))},dependencies:[n.mk,n.sg,n.O5,l.Fj,l.JJ,l.On,Ct.q,Wt.P,te.$,G.J,zt.f,ee.M,Xt],encapsulation:2})),fieldActivityParticipationPanel})();var me=i(5920),ue=i(4505);const he=function(t){return{"slds-is-selected":t}};let ge=(()=>{var t;class ActivityParticipationStatus{constructor(t,e,i,n,l){(0,s.Z)(this,"view",void 0),(0,s.Z)(this,"session",void 0),(0,s.Z)(this,"cdRef",void 0),(0,s.Z)(this,"backend",void 0),(0,s.Z)(this,"toast",void 0),(0,s.Z)(this,"parent",void 0),(0,s.Z)(this,"model",void 0),(0,s.Z)(this,"onChange",void 0),(0,s.Z)(this,"onTouched",void 0),(0,s.Z)(this,"status","none"),(0,s.Z)(this,"updating",!1),this.view=t,this.session=e,this.cdRef=i,this.backend=n,this.toast=l}get disabled(){return!(!this.view.isEditMode()&&!this.updating&&"Users"==this.model.module&&this.model.id==this.session.authData.userId&&this.parent&&"Planned"==this.parent.getField("status"))}accept(){this.setStatus("accept")}decline(){this.setStatus("decline")}tentative(){this.setStatus("tentative")}setStatus(t){this.updating=!0,this.backend.postRequest(`module/${this.parent.module}/${this.parent.id}/status/${this.model.id}/${t}`).subscribe((e=>{this.status=t,this.onChange(this.status),this.updating=!1}),(t=>{this.toast.sendToast("Error Updating","error"),this.updating=!1}))}registerOnChange(t){this.onChange=t}registerOnTouched(t){this.onTouched=t}writeValue(t){this.status=t||"none",this.cdRef.detectChanges()}}return t=ActivityParticipationStatus,(0,s.Z)(ActivityParticipationStatus,"ɵfac",(function(e){return new(e||t)(m.Y36(y.e),m.Y36(me.n),m.Y36(m.sBO),m.Y36(ue.y),m.Y36(st.A))})),(0,s.Z)(ActivityParticipationStatus,"ɵcmp",m.Xpm({type:t,selectors:[["activity-participation-status"]],inputs:{parent:"parent",model:"model"},features:[m._Bn([{provide:l.JU,useExisting:(0,m.Gpc)((()=>t)),multi:!0}])],decls:7,vars:12,consts:[["role","group",1,"slds-button-group"],[1,"slds-button","slds-button-icon","slds-button_icon-border-filled",2,"height","22px","width","22px",3,"disabled","ngClass","click"],["icon","check","size","xx-small"],["icon","question_mark"],["icon","error"]],template:function(t,e){1&t&&(m.TgZ(0,"div",0)(1,"button",1),m.NdJ("click",(function(){return e.accept()})),m._UZ(2,"system-button-icon",2),m.qZA(),m.TgZ(3,"button",1),m.NdJ("click",(function(){return e.tentative()})),m._UZ(4,"system-button-icon",3),m.qZA(),m.TgZ(5,"button",1),m.NdJ("click",(function(){return e.decline()})),m._UZ(6,"system-button-icon",4),m.qZA()()),2&t&&(m.xp6(1),m.Q6J("disabled",e.disabled)("ngClass",m.VKq(6,he,"accept"==e.status)),m.xp6(2),m.Q6J("disabled",e.disabled)("ngClass",m.VKq(8,he,"tentative"==e.status)),m.xp6(2),m.Q6J("disabled",e.disabled)("ngClass",m.VKq(10,he,"decline"==e.status)))},dependencies:[n.mk,G.J],encapsulation:2})),ActivityParticipationStatus})(),pe=(()=>{var t;class fieldActivityParticipationStatus extends kt.O{constructor(t,e,i,n,l,o,a,d,c,r){super(t,e,n,l,o),(0,s.Z)(this,"model",void 0),(0,s.Z)(this,"view",void 0),(0,s.Z)(this,"broadcast",void 0),(0,s.Z)(this,"language",void 0),(0,s.Z)(this,"metadata",void 0),(0,s.Z)(this,"router",void 0),(0,s.Z)(this,"elementRef",void 0),(0,s.Z)(this,"renderer",void 0),(0,s.Z)(this,"modal",void 0),(0,s.Z)(this,"session",void 0),this.model=t,this.view=e,this.broadcast=i,this.language=n,this.metadata=l,this.router=o,this.elementRef=a,this.renderer=d,this.modal=c,this.session=r}get disabled(){return"Users"!=this.model.module||this.model.getField("id")!=this.session.authData.userId||!this.model.parentmodel||"Planned"!=this.model.parentmodel.getField("status")}}return t=fieldActivityParticipationStatus,(0,s.Z)(fieldActivityParticipationStatus,"ɵfac",(function(e){return new(e||t)(m.Y36(g.o),m.Y36(y.e),m.Y36(u.f),m.Y36(v.d),m.Y36(x.Pu),m.Y36(it.F0),m.Y36(m.SBq),m.Y36(m.Qsj),m.Y36(H.o),m.Y36(me.n))})),(0,s.Z)(fieldActivityParticipationStatus,"ɵcmp",m.Xpm({type:t,selectors:[["ng-component"]],features:[m.qOj],decls:1,vars:3,consts:[[3,"model","ngModel","parent","ngModelChange"]],template:function(t,e){1&t&&(m.TgZ(0,"activity-participation-status",0),m.NdJ("ngModelChange",(function(t){return e.value=t})),m.qZA()),2&t&&m.Q6J("model",e.model)("ngModel",e.value)("parent",e.model.parentmodel)},dependencies:[l.JJ,l.On,ge],encapsulation:2})),fieldActivityParticipationStatus})();const fe=function(t){return{id:t,module:"Users"}};function ve(t,e){if(1&t){const t=m.EpF();m.TgZ(0,"activity-participation-status",1),m.NdJ("ngModelChange",(function(e){m.CHM(t);const i=m.oxw();return m.KtG(i.value=e)})),m.qZA()}if(2&t){const t=m.oxw();m.Q6J("model",m.VKq(3,fe,t.partcipationRecord.id))("ngModel",t.value)("parent",t.model)}}let Ze=(()=>{var t;class fieldActivityCurrentUserParticipationStatus extends kt.O{constructor(t,e,i,n,l,o,a,d,c,r){super(t,e,n,l,o),(0,s.Z)(this,"model",void 0),(0,s.Z)(this,"view",void 0),(0,s.Z)(this,"broadcast",void 0),(0,s.Z)(this,"language",void 0),(0,s.Z)(this,"metadata",void 0),(0,s.Z)(this,"router",void 0),(0,s.Z)(this,"elementRef",void 0),(0,s.Z)(this,"renderer",void 0),(0,s.Z)(this,"modal",void 0),(0,s.Z)(this,"session",void 0),(0,s.Z)(this,"partcipationRecord",void 0),this.model=t,this.view=e,this.broadcast=i,this.language=n,this.metadata=l,this.router=o,this.elementRef=a,this.renderer=d,this.modal=c,this.session=r,this.subscriptions.add(this.model.data$.subscribe((t=>{this.setParticipation()})))}get disabled(){return!(this.partcipationRecord&&!this.isEditMode()&&"Planned"==this.model.getField("status"))}get value(){return this.partcipationRecord?this.partcipationRecord.activity_accept_status:"none"}set value(t){this.partcipationRecord.activity_accept_status=t}setParticipation(){if(this.partcipationRecord=void 0,this.model.getField("assigned_user_id")!=this.session.authData.userId&&this.model.data.users)for(let t in this.model.data.users.beans)this.model.data.users.beans[t].id==this.session.authData.userId&&(this.partcipationRecord=this.model.data.users.beans[t])}}return t=fieldActivityCurrentUserParticipationStatus,(0,s.Z)(fieldActivityCurrentUserParticipationStatus,"ɵfac",(function(e){return new(e||t)(m.Y36(g.o),m.Y36(y.e),m.Y36(u.f),m.Y36(v.d),m.Y36(x.Pu),m.Y36(it.F0),m.Y36(m.SBq),m.Y36(m.Qsj),m.Y36(H.o),m.Y36(me.n))})),(0,s.Z)(fieldActivityCurrentUserParticipationStatus,"ɵcmp",m.Xpm({type:t,selectors:[["ng-component"]],features:[m.qOj],decls:1,vars:1,consts:[[3,"model","ngModel","parent","ngModelChange",4,"ngIf"],[3,"model","ngModel","parent","ngModelChange"]],template:function(t,e){1&t&&m.YNc(0,ve,1,5,"activity-participation-status",0),2&t&&m.Q6J("ngIf",e.partcipationRecord)},dependencies:[n.O5,l.JJ,l.On,ge],encapsulation:2})),fieldActivityCurrentUserParticipationStatus})();var be=i(1135),ye=i(9646),xe=i(6625);let _e=(()=>{var t;class activitiytimeline{constructor(t,e,i,n,l,o){(0,s.Z)(this,"metadata",void 0),(0,s.Z)(this,"backend",void 0),(0,s.Z)(this,"modelutilities",void 0),(0,s.Z)(this,"configurationService",void 0),(0,s.Z)(this,"session",void 0),(0,s.Z)(this,"broadcast",void 0),(0,s.Z)(this,"httpRequestsRefID",_.uniqueId("activity_timeline_http_ref_")),(0,s.Z)(this,"parent",void 0),(0,s.Z)(this,"serviceSubscriptions",[]),(0,s.Z)(this,"filters",{searchterm:"",objectfilters:[],own:""}),(0,s.Z)(this,"loading$",new m.vpe),(0,s.Z)(this,"defaultLimit",5),(0,s.Z)(this,"modules",["Activities","History"]),(0,s.Z)(this,"activeStates",["Planned","In Progress","Not Started","Pending Input"]),(0,s.Z)(this,"activityObjects",["Tasks","Meetings","Calls","Notes","Emails"]),(0,s.Z)(this,"sortDates",{Calls:"date_start",Meetings:"date_start",Tasks:"date_due",Emails:"date_entered",Notes:"date_entered"}),(0,s.Z)(this,"activities",{Activities:{loading:!1,loadingmore:!1,list:[],totalcount:0,aggregates:[]},History:{loading:!1,loadingmore:!1,list:[],totalcount:0,aggregates:[]}}),(0,s.Z)(this,"usefts",!1),(0,s.Z)(this,"_openness",!1),(0,s.Z)(this,"openness$",void 0),this.metadata=t,this.backend=e,this.modelutilities=i,this.configurationService=n,this.session=l,this.broadcast=o,this.serviceSubscriptions.push(this.broadcast.message$.subscribe((t=>this.handleMessage(t)))),this.openness$=new be.X(this._openness)}get openness(){return this._openness}set openness(t){this._openness=t,this.openness$.next(t)}get filterObjects(){if(this.usefts){let t=[];for(let e in this.activities)t=t.concat(this.getAggregateObjects(e));return _.uniq(t)}return this.activityObjects}getAggregateObjects(t){try{let e=[];for(let i of this.activities[t].aggregates.module)e.push(i.module);return e}catch(t){return[]}}stopSubscriptions(){for(let t of this.serviceSubscriptions)t.unsubscribe();this.backend.cancelPendingRequests([this.httpRequestsRefID])}handleMessage(t){let e=t.messagetype.split(".");if("model"===e[0])switch(e[1]){case"merge":this.parent&&t.messagedata.module==this.parent.module&&t.messagedata.id==this.parent.id&&(this.getTimeLineData("Activities",!0),this.getTimeLineData("History",!0));break;case"save":this.metadata.getModuleDefs(t.messagedata.module).ftsactivities.Activities&&this.getTimeLineData("Activities",!0),this.metadata.getModuleDefs(t.messagedata.module).ftsactivities.History&&this.getTimeLineData("History",!0);break;case"delete":for(let e of this.modules){let i=this.activities[e].list.findIndex((e=>e.module==t.messagedata.module&&e.id==t.messagedata.id));i>=0&&this.activities[e].list.splice(i,1)}}}checkModuleActive(t){return 0==this.filters.objectfilters.length||this.filters.objectfilters.indexOf(t)>=0}toggleModuleFilter(t){0==this.filters.objectfilters.length?(this.filters.objectfilters=this.filterObjects,this.filters.objectfilters.splice(this.filters.objectfilters.indexOf(t),1)):this.filters.objectfilters.indexOf(t)>=0?this.filters.objectfilters.splice(this.filters.objectfilters.indexOf(t),1):(this.filters.objectfilters.push(t),this.filters.objectfilters.length==this.filterObjects.length&&(this.filters.objectfilters=[]))}reload(t=!1){this.loading$.emit(!0);for(let e of this.modules)this.getTimeLineData(e,t)}getTimeLineData(t,e=!1){e||(this.activities[t].loading=!0);let i={count:!0,limit:this.defaultLimit,objects:JSON.stringify(this.filters.objectfilters),own:this.filters.own,searchterm:this.filters.searchterm};this.backend.postRequest("module/"+t+"/fts/"+this.parent.module+"/"+this.parent.id,{},i,this.httpRequestsRefID).subscribe({next:e=>{if(e){this.resetListData(t);for(let t of e.items)t.data=this.modelutilities.backendModel2spice(t.module,t.data);this.activities[t].list=e.items,this.activities[t].totalcount=parseInt(e.totalcount,10),this.activities[t].aggregates=e.aggregates?e.aggregates:[]}this.activities[t].loading=!1},error:e=>{this.activities[t].loading=!1}})}getMoreTimeLineData(t,e){if(!this.canLoadMore(t)||this.activities[t].loading)return(0,ye.of)(!0);let i=new tt.x,s={start:this.activities[t].list.length,limit:e||this.defaultLimit,objects:JSON.stringify(this.filters.objectfilters),own:this.filters.own,searchterm:this.filters.searchterm};return this.activities[t].loadingmore=!0,this.backend.postRequest("module/"+t+"/fts/"+this.parent.module+"/"+this.parent.id,{},s,this.httpRequestsRefID).subscribe({next:e=>{for(let i of e.items)i.data=this.modelutilities.backendModel2spice(i.module,i.data),this.activities[t].list.push(i);this.activities[t].loadingmore=!1,i.next(!0),i.complete()},error:e=>{this.activities[t].loadingmore=!1,i.error(e),i.complete()}}),i.asObservable()}resetListData(t){this.activities[t]={loading:!1,loadingmore:!1,list:[],totalcount:0}}canLoadMore(t){return this.activities[t].totalcount>this.activities[t].list.length&&!this.activities[t].loadingmore}sortListdata(t){this.activities[t].list.sort(((e,i)=>{let s=new moment(e.data[this.sortDates[e.module]]),n=new moment(i.data[this.sortDates[i.module]]);return"Activities"!==t?s.isBefore(n):s.isAfter(n)}))}}return t=activitiytimeline,(0,s.Z)(activitiytimeline,"ɵfac",(function(e){return new(e||t)(m.LFG(x.Pu),m.LFG(ue.y),m.LFG(A.A),m.LFG(xe.C),m.LFG(me.n),m.LFG(u.f))})),(0,s.Z)(activitiytimeline,"ɵprov",m.Yz7({token:t,factory:t.ɵfac})),activitiytimeline})();var Ae=i(6559),Te=i(7017),ke=i(7758),Ce=i(9774);function we(t,e){if(1&t&&(m.TgZ(0,"div",2)(1,"div",3),m._UZ(2,"system-icon",4),m.qZA(),m.TgZ(3,"div",5)(4,"div",6)(5,"h3",7)(6,"a",8),m._uU(7),m.qZA()()(),m.TgZ(8,"div",6)(9,"div",9)(10,"span",10)(11,"span",11),m._uU(12,"Progress: 25%"),m.qZA()()(),m.TgZ(13,"div",12),m._uU(14),m.qZA()()()()),2&t){const t=m.oxw();m.xp6(2),m.Q6J("icon",t.uploadData.fileIcon.icon)("sprite",t.uploadData.fileIcon.sprite),m.xp6(5),m.Oqu(t.uploadData.fileName),m.xp6(3),m.Q6J("ngStyle",t.progressBarStyle),m.xp6(4),m.hij(" ",t.uploadData.progress," % ")}}const Me=["*"];let Je=(()=>{var t;class ActivityTimelineDropZoneWrapper{constructor(t,e,i,n,l,o,a,d){(0,s.Z)(this,"language",void 0),(0,s.Z)(this,"toast",void 0),(0,s.Z)(this,"configurationService",void 0),(0,s.Z)(this,"activitiytimeline",void 0),(0,s.Z)(this,"noteModel",void 0),(0,s.Z)(this,"model",void 0),(0,s.Z)(this,"session",void 0),(0,s.Z)(this,"helper",void 0),(0,s.Z)(this,"uploadData",{fileName:"",fileIcon:{},uploading:!1,progress:void 0}),this.language=t,this.toast=e,this.configurationService=i,this.activitiytimeline=n,this.noteModel=l,this.model=o,this.session=a,this.helper=d}get maxSize(){return this.configurationService.getSystemParamater("upload_maxsize")}get progressBarStyle(){return{width:(this.uploadData.progress||0)+"%"}}handleDroppedFiles(t){let e=[],i=[],s=[];for(let n in t)t.hasOwnProperty(n)&&(this.fileSizeExceeded(t[n])?this.toast.sendToast(this.language.getLabelFormatted("LBL_EXCEEDS_MAX_UPLOADFILESIZE",[t[n].name,this.helper.humanFileSize(this.maxSize)]),"error"):".msg"==t[n].name.substring(t[n].name.length-4).toLowerCase()?e.push(t[n]):".eml"==t[n].name.substring(t[n].name.length-4).toLowerCase()?i.push(t[n]):s.push(t[n]));e.length>0&&(this.uploadData.uploading=!0,this.uploadFiles(e,this.model.module,this.model.id,"msg").subscribe((t=>{this.uploadData.fileName=t.fileName,this.uploadData.progress=t.progress,this.setFileIcon(t.fileName,t.fileType)}),(()=>{this.toast.sendToast(this.language.getLabel("ERR_UPLOAD_FAILED"),"error")}),(()=>{this.activitiytimeline.getTimeLineData("History"),this.uploadData.uploading=!1}))),i.length>0&&(this.uploadData.uploading=!0,this.uploadFiles(i,this.model.module,this.model.id,"eml").subscribe((t=>{this.uploadData.fileName=t.fileName,this.uploadData.progress=t.progress,this.setFileIcon(t.fileName,t.fileType)}),(()=>{this.toast.sendToast(this.language.getLabel("ERR_UPLOAD_FAILED"),"error")}),(()=>{this.activitiytimeline.getTimeLineData("History"),this.uploadData.uploading=!1}))),s.length>0&&this.addNotesFromFiles(s)}uploadFiles(t,e,i,s){if(0===t.length)return;let n=new tt.x;for(let l of t)this.readFile(l).subscribe((()=>{let t=new XMLHttpRequest,o={};t.onreadystatechange=(i=this)=>{if(4==t.readyState)try{if("Notes"==e){let e=JSON.parse(t.response);n.next({progress:100,fileName:l.name,fileType:l.type,fileMD5:e[0].filemd5})}n.complete()}catch(e){o={status:"error",data:"Unknown error occurred: ["+t.responseText+"]"}}},t.upload.addEventListener("progress",(t=>{n.next({progress:Math.round(t.loaded/t.total*100),fileName:l.name,fileType:l.type,fileMD5:l.filemd5})}),!1);let a=this.configurationService.getBackendUrl()+"/common/spiceattachments";"Notes"!=e&&(a=this.configurationService.getBackendUrl()+"/module/Emails/"+s),t.open("POST",a,!0),t.setRequestHeader("OAuth-Token",this.session.authData.sessionId),t.setRequestHeader("Content-Type","application/json;charset=UTF-8");let d={file:l.filecontent,filename:l.name,filemimetype:l.type?l.type:"application/octet-stream",filemd5:void 0,beanId:i,beanModule:e};t.send(JSON.stringify(d))}));return n.asObservable()}readFile(t){let e=new tt.x,i=new FileReader;return i.file=t,i.onloadend=()=>{let t=i.result.toString();t=t.substring(t.indexOf("base64,")+7);let s=i.file;s.filecontent=t,e.next(s),e.complete()},i.readAsDataURL(t),e.asObservable()}setFileIcon(t,e){if(e==this.uploadData.fileIcon.fileType)return;let i=this.helper.determineFileIcon(e);if("unknown"==i){"msg"==t.split(".").splice(-1,1)[0].toLowerCase()&&(this.uploadData.fileIcon={icon:"email",sprite:"standard",fileType:e})}this.uploadData.fileIcon={icon:i,sprite:"doctype",fileType:e}}addNotesFromFiles(t){this.addNewNote(t)}addNewNote(t,e=0){this.noteModel.reset(),this.noteModel.module="Notes",this.noteModel.initialize(this.activitiytimeline.parent),this.noteModel.startEdit(!1),this.noteModel.setField("name",t[e].name),this.noteModel.setField("file_name",t[e].name),this.noteModel.setField("file_mime_type",t[e].type?t[e].type:"application/octet-stream"),this.uploadData.uploading=!0,this.uploadFiles([t[e]],this.noteModel.module,this.noteModel.id).subscribe((t=>{this.uploadData.fileName=t.fileName,this.uploadData.progress=t.progress,this.setFileIcon(t.fileName,t.fileType),t.fileMD5&&this.noteModel.setField("file_md5",t.fileMD5)}),(()=>{this.toast.sendToast(this.language.getLabel("ERR_UPLOAD_FAILED"),"error")}),(()=>{this.noteModel.save().subscribe((i=>{e+1>=t.length?(this.activitiytimeline.getTimeLineData("History"),this.uploadData.uploading=!1):this.addNewNote(t,e+1)}))}))}fileSizeExceeded(t){return this.maxSize&&t.size>this.maxSize}}return t=ActivityTimelineDropZoneWrapper,(0,s.Z)(ActivityTimelineDropZoneWrapper,"ɵfac",(function(e){return new(e||t)(m.Y36(v.d),m.Y36(st.A),m.Y36(xe.C),m.Y36(_e),m.Y36(g.o),m.Y36(g.o,4),m.Y36(me.n),m.Y36(P._))})),(0,s.Z)(ActivityTimelineDropZoneWrapper,"ɵcmp",m.Xpm({type:t,selectors:[["activity-timeline-drop-zone-wrapper"]],features:[m._Bn([],[g.o])],ngContentSelectors:Me,decls:3,vars:1,consts:[[3,"system-drop-file"],["class","slds-m-vertical--medium slds-media",4,"ngIf"],[1,"slds-m-vertical--medium","slds-media"],[1,"slds-m-right--x-small","slds-align--absolute-center",2,"width","30px","height","30px"],["divClass","","size","'small'",3,"icon","sprite"],[1,"slds-media__body"],[1,"slds-grid","slds-grid_vertical-align-center","slds-grid--align-spread","slds-has-flexi-truncate"],[1,"slds-truncate","slds-text-heading--x-small","slds-p-right--xxx-small"],["href","javascript:void(0);"],[1,"slds-progress-bar"],[1,"slds-progress-bar__value",3,"ngStyle"],[1,"slds-assistive-text"],[1,"slds-text-align--right",2,"width","50px"]],template:function(t,e){1&t&&(m.F$t(),m.TgZ(0,"div",0),m.NdJ("system-drop-file",(function(t){return e.handleDroppedFiles(t)})),m.YNc(1,we,15,5,"div",1),m.Hsn(2),m.qZA()),2&t&&(m.xp6(1),m.Q6J("ngIf",e.uploadData.uploading))},dependencies:[n.O5,n.PC,zt.f,Ce.M],encapsulation:2})),ActivityTimelineDropZoneWrapper})();function Ye(t,e){if(1&t){const t=m.EpF();m.TgZ(0,"div",7)(1,"div",8),m.NdJ("click",(function(e){const i=m.CHM(t).$implicit,s=m.oxw();return m.KtG(s.setFilter(e,i.type))})),m.TgZ(2,"span",9),m._UZ(3,"input",36),m.TgZ(4,"label",37),m._UZ(5,"span",12),m.TgZ(6,"span",13),m._uU(7),m.qZA()()()()()}if(2&t){const t=e.$implicit,i=m.oxw();m.xp6(3),m.Q6J("id",t.type)("checked",i.getChecked(t.type)),m.xp6(1),m.uIk("for",t.type),m.xp6(3),m.Oqu(t.name)}}const Le=function(t){return{"slds-is-open":t}};let Fe=(()=>{var t;class ActivityTimelineFilter{constructor(t,e,i,n,l){(0,s.Z)(this,"renderer",void 0),(0,s.Z)(this,"elementRef",void 0),(0,s.Z)(this,"language",void 0),(0,s.Z)(this,"metadata",void 0),(0,s.Z)(this,"activitiytimeline",void 0),(0,s.Z)(this,"isOpen",!1),(0,s.Z)(this,"clickListener",void 0),(0,s.Z)(this,"activityTypes",[]),(0,s.Z)(this,"objectfilters",[]),(0,s.Z)(this,"ownerfilter",""),this.renderer=t,this.elementRef=e,this.language=i,this.metadata=n,this.activitiytimeline=l,this.setFromService()}setFromService(){this.objectfilters=JSON.parse(JSON.stringify(this.activitiytimeline.filters.objectfilters)),this.ownerfilter=this.activitiytimeline.filters.own}setToService(){this.activitiytimeline.filters.objectfilters=JSON.parse(JSON.stringify(this.objectfilters)),this.activitiytimeline.filters.own=this.ownerfilter,this.activitiytimeline.reload()}toggleOpen(t){t.stopPropagation(),this.isOpen=!this.isOpen,this.isOpen?this.clickListener=this.renderer.listen("document","click",(t=>this.onClick(t))):this.clickListener&&this.clickListener(),this.isOpen&&this.buildTypes()}onClick(t){this.elementRef.nativeElement.contains(t.target)||(this.isOpen=!1,this.clickListener())}buildTypes(){this.activityTypes=[];for(let t of this.activitiytimeline.filterObjects)this.activityTypes.push({type:t,name:this.language.getModuleName(t)});this.activityTypes.sort(((t,e)=>t.name>e.name?1:-1))}get filterColorClass(){return this.activitiytimeline.filters.objectfilters.length>0||this.activitiytimeline.filters.own?"slds-icon-text-error":"slds-icon-text-default"}setFilter(t,e){if(t.preventDefault(),"all"==e)this.objectfilters=[];else{let t=this.objectfilters.indexOf(e);t>=0?this.objectfilters.splice(t,1):this.objectfilters.push(e)}}getChecked(t){return"all"==t?0==this.objectfilters.length:this.objectfilters.indexOf(t)>=0}closeDialog(t){this.clickListener&&this.clickListener(),t?this.setToService():this.setFromService(),this.isOpen=!1}}return t=ActivityTimelineFilter,(0,s.Z)(ActivityTimelineFilter,"ɵfac",(function(e){return new(e||t)(m.Y36(m.Qsj),m.Y36(m.SBq),m.Y36(v.d),m.Y36(x.Pu),m.Y36(_e))})),(0,s.Z)(ActivityTimelineFilter,"ɵcmp",m.Xpm({type:t,selectors:[["activity-timeline-filter"]],decls:45,vars:10,consts:[[1,"slds-dropdown-trigger","slds-dropdown-trigger_click","slds-p-horizontal--xxx-small",3,"ngClass"],["icon","filterList","size","x-small",3,"colorclass","title","click"],[1,"slds-is-absolute","slds-dropdown","slds-dropdown_right","slds-nubbin_top-right",2,"right","-10px","top","25px"],[1,"slds-grid"],[1,"slds-p-horizontal--small","slds-border--right",2,"min-width","180px"],[1,"slds-p-vertical--x-small"],["label","LBL_TYPE"],[1,"slds-form-element","slds-p-vertical--xx-small"],[1,"slds-form-element__control",3,"click"],[1,"slds-checkbox"],["type","checkbox","id","alltypes",3,"checked"],["for","alltypes",1,"slds-checkbox__label"],[1,"slds-checkbox_faux"],[1,"slds-form-element__label"],["label","LBL_ALL"],["class","slds-form-element slds-p-vertical--xx-small",4,"ngFor","ngForOf"],[1,"slds-p-horizontal--small",2,"min-width","180px"],["label","LBL_FILTER"],[1,"slds-form-element"],[1,"slds-form-element__control"],[1,"slds-radio"],["type","radio","id","ownerall","name","filters","value","",3,"ngModel","ngModelChange"],["for","ownerall",1,"slds-radio__label"],[1,"slds-radio_faux"],["type","radio","id","ownerassignedtome","name","filters","value","assigned",3,"ngModel","ngModelChange"],["for","ownerassignedtome",1,"slds-radio__label"],[1,"slds-form-element__label","slds-truncate"],["label","LBL_ASSIGNEDTOME"],["type","radio","id","ownercreatedbyme","name","filters","value","created",3,"ngModel","ngModelChange"],["for","ownercreatedbyme",1,"slds-radio__label"],["label","LBL_CREATEDBYME"],[1,"slds-popover__footer"],[1,"slds-col--bump-left","slds-button","slds-button_neutral",3,"click"],["label","LBL_CANCEL"],[1,"slds-button","slds-button--brand",3,"click"],["label","LBL_APPLY"],["type","checkbox",3,"id","checked"],[1,"slds-checkbox__label"]],template:function(t,e){1&t&&(m.TgZ(0,"div",0)(1,"system-utility-icon",1),m.NdJ("click",(function(t){return e.toggleOpen(t)})),m.qZA(),m.TgZ(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5),m._UZ(6,"system-label",6),m.qZA(),m.TgZ(7,"div",7)(8,"div",8),m.NdJ("click",(function(t){return e.setFilter(t,"all")})),m.TgZ(9,"span",9),m._UZ(10,"input",10),m.TgZ(11,"label",11),m._UZ(12,"span",12),m.TgZ(13,"span",13),m._UZ(14,"system-label",14),m.qZA()()()()(),m.YNc(15,Ye,8,4,"div",15),m.qZA(),m.TgZ(16,"div",16)(17,"div",5),m._UZ(18,"system-label",17),m.qZA(),m.TgZ(19,"fieldset",18)(20,"div",19)(21,"span",20)(22,"input",21),m.NdJ("ngModelChange",(function(t){return e.ownerfilter=t})),m.qZA(),m.TgZ(23,"label",22),m._UZ(24,"span",23),m.TgZ(25,"span",13),m._UZ(26,"system-label",14),m.qZA()()(),m.TgZ(27,"span",20)(28,"input",24),m.NdJ("ngModelChange",(function(t){return e.ownerfilter=t})),m.qZA(),m.TgZ(29,"label",25),m._UZ(30,"span",23),m.TgZ(31,"span",26),m._UZ(32,"system-label",27),m.qZA()()(),m.TgZ(33,"span",20)(34,"input",28),m.NdJ("ngModelChange",(function(t){return e.ownerfilter=t})),m.qZA(),m.TgZ(35,"label",29),m._UZ(36,"span",23),m.TgZ(37,"span",26),m._UZ(38,"system-label",30),m.qZA()()()()()()(),m.TgZ(39,"footer",31)(40,"div",3)(41,"button",32),m.NdJ("click",(function(){return e.closeDialog(!1)})),m._UZ(42,"system-label",33),m.qZA(),m.TgZ(43,"button",34),m.NdJ("click",(function(){return e.closeDialog(!0)})),m._UZ(44,"system-label",35),m.qZA()()()()()),2&t&&(m.Q6J("ngClass",m.VKq(8,Le,e.isOpen)),m.xp6(1),m.Q6J("colorclass",e.filterColorClass)("title",e.language.getLabel("LBL_FILTER")),m.xp6(9),m.Q6J("checked",e.getChecked("all")),m.xp6(5),m.Q6J("ngForOf",e.activityTypes),m.xp6(7),m.Q6J("ngModel",e.ownerfilter),m.xp6(6),m.Q6J("ngModel",e.ownerfilter),m.xp6(6),m.Q6J("ngModel",e.ownerfilter))},dependencies:[n.mk,n.sg,l.Fj,l._,l.JJ,l.On,E._,jt.r],encapsulation:2})),ActivityTimelineFilter})();var Se=i(4730),Ee=i(9087),Ne=i(243);function qe(t,e){if(1&t){const t=m.EpF();m.TgZ(0,"div",5),m.NdJ("click",(function(){const e=m.CHM(t).$implicit,i=m.oxw();return m.KtG(i.toggleModuleFilter(e.module))})),m.TgZ(1,"div",6),m._UZ(2,"system-icon",7),m.qZA(),m.TgZ(3,"div",6),m._uU(4),m.qZA(),m.TgZ(5,"div"),m._UZ(6,"system-label-modulename",8),m.qZA()()}if(2&t){const t=e.$implicit,i=m.oxw();m.Q6J("ngStyle",i.getElementStyle(t.module)),m.xp6(2),m.Q6J("title",i.language.getModuleName(t.module))("module",t.module),m.xp6(2),m.hij(" ",t.count," "),m.xp6(2),m.Q6J("module",t.module)("singular",1==t.count)}}function Ie(t,e){if(1&t&&(m.TgZ(0,"div",9)(1,"div",6),m._uU(2),m.qZA(),m.TgZ(3,"div"),m._uU(4),m.qZA()()),2&t){const t=e.$implicit;m.xp6(2),m.hij(" ",t.year,": "),m.xp6(2),m.hij(" ",t.count," ")}}let Oe=(()=>{var t;class ActivityTimelineAggregates{constructor(t,e,i){(0,s.Z)(this,"metadata",void 0),(0,s.Z)(this,"language",void 0),(0,s.Z)(this,"activitiytimeline",void 0),(0,s.Z)(this,"module",void 0),(0,s.Z)(this,"labellength","default"),this.metadata=t,this.language=e,this.activitiytimeline=i}get moduleaggregates(){return this.module&&this.activitiytimeline.activities[this.module].aggregates.module?this.activitiytimeline.activities[this.module].aggregates.module:[]}get yearaggregates(){return this.module&&this.activitiytimeline.activities[this.module].aggregates.year?this.activitiytimeline.activities[this.module].aggregates.year:[]}getElementStyle(t){if(!this.activitiytimeline.checkModuleActive(t))return{filter:"grayscale(100%)",opacity:"0.5"}}toggleModuleFilter(t){this.activitiytimeline.toggleModuleFilter(t),this.metadata.getModuleDefs(t).ftsactivities.Activities&&this.activitiytimeline.getTimeLineData("Activities"),this.metadata.getModuleDefs(t).ftsactivities.History&&this.activitiytimeline.getTimeLineData("History")}}return t=ActivityTimelineAggregates,(0,s.Z)(ActivityTimelineAggregates,"ɵfac",(function(e){return new(e||t)(m.Y36(x.Pu),m.Y36(v.d),m.Y36(_e))})),(0,s.Z)(ActivityTimelineAggregates,"ɵcmp",m.Xpm({type:t,selectors:[["activity-timeline-aggregates"]],inputs:{module:"module",labellength:"labellength"},decls:5,vars:2,consts:[[1,"slds-grid","slds-box--border"],[1,"slds-size--1-of-2","slds-p-around--x-small","slds-border--right"],["class","slds-grid slds-grid--vertical-align-center slds-p-vertical--xxx-small slds-gutters_direct-xxx-small",3,"ngStyle","click",4,"ngFor","ngForOf"],[1,"slds-size--1-of-2","slds-p-around--x-small"],["class","slds-grid slds-grid--vertical-align-center slds-p-vertical--xxx-small slds-gutters_direct-xxx-small",4,"ngFor","ngForOf"],[1,"slds-grid","slds-grid--vertical-align-center","slds-p-vertical--xxx-small","slds-gutters_direct-xxx-small",3,"ngStyle","click"],[1,"slds-p-right--small"],["size","xx-small","divClass","slds-align--absolute-center",3,"title","module"],[3,"module","singular"],[1,"slds-grid","slds-grid--vertical-align-center","slds-p-vertical--xxx-small","slds-gutters_direct-xxx-small"]],template:function(t,e){1&t&&(m.TgZ(0,"div",0)(1,"div",1),m.YNc(2,qe,7,6,"div",2),m.qZA(),m.TgZ(3,"div",3),m.YNc(4,Ie,5,2,"div",4),m.qZA()()),2&t&&(m.xp6(2),m.Q6J("ngForOf",e.moduleaggregates),m.xp6(2),m.Q6J("ngForOf",e.yearaggregates))},dependencies:[n.sg,n.PC,zt.f,ee.M],encapsulation:2})),ActivityTimelineAggregates})();function Qe(t,e){if(1&t&&(m.TgZ(0,"div",4),m._UZ(1,"activity-timeline-aggregates",5),m.qZA()),2&t){const t=m.oxw();m.xp6(1),m.Q6J("module",t.module)}}function Ue(t,e){if(1&t&&(m.TgZ(0,"li"),m._UZ(1,"activitytimeline-item-container",8),m.qZA()),2&t){const t=e.$implicit,i=m.oxw(2);m.xp6(1),m.Q6J("activity",t)("module",i.module)}}const De=function(t){return{"slds-hide":t}};function Be(t,e){if(1&t&&(m.TgZ(0,"ul",6),m.YNc(1,Ue,2,2,"li",7),m.qZA()),2&t){const t=m.oxw();m.Q6J("ngClass",m.VKq(2,De,t.loading)),m.xp6(1),m.Q6J("ngForOf",t.activities)}}function Pe(t,e){1&t&&(m.TgZ(0,"ul",9)(1,"li"),m._UZ(2,"activitytimeline-stencil"),m.qZA(),m.TgZ(3,"li",10),m._UZ(4,"activitytimeline-stencil"),m.qZA(),m.TgZ(5,"li",11),m._UZ(6,"activitytimeline-stencil"),m.qZA()())}function Re(t,e){1&t&&(m.TgZ(0,"system-illustration-no-records"),m._UZ(1,"system-label",14),m.qZA())}function ze(t,e){if(1&t&&(m.TgZ(0,"div",12),m.YNc(1,Re,2,0,"system-illustration-no-records",13),m.qZA()),2&t){const t=m.oxw();m.xp6(1),m.Q6J("ngIf",!t.loading)}}let je=(()=>{var t;class ActivityTimelineContainer{constructor(t,e){(0,s.Z)(this,"activitiytimeline",void 0),(0,s.Z)(this,"language",void 0),(0,s.Z)(this,"module",void 0),(0,s.Z)(this,"displayaggregates",!1),this.activitiytimeline=t,this.language=e}ngOnInit(){this.activitiytimeline.getTimeLineData(this.module)}get activities(){return this.activitiytimeline.activities[this.module].list}get hasActivities(){return this.activitiytimeline.activities[this.module].list.length>0}get loading(){return this.activitiytimeline.activities[this.module].loading}get loadingmore(){return this.activitiytimeline.activities[this.module].loadingmore}get hasAggregates(){try{return this.activitiytimeline.activities[this.module].aggregates.module.length>0}catch(t){return!1}}trackByFn(t,e){return e.id}}return t=ActivityTimelineContainer,(0,s.Z)(ActivityTimelineContainer,"ɵfac",(function(e){return new(e||t)(m.Y36(_e),m.Y36(v.d))})),(0,s.Z)(ActivityTimelineContainer,"ɵcmp",m.Xpm({type:t,selectors:[["activitytimeline-container"]],inputs:{module:"module",displayaggregates:"displayaggregates"},decls:5,vars:4,consts:[["class","slds-p-vertical--x-small slds-m-top--x-small",4,"ngIf"],["class","slds-timeline slds-p-vertical--small",3,"ngClass",4,"ngIf","ngIfElse"],["class","slds-timeline",4,"ngIf"],["nocontent",""],[1,"slds-p-vertical--x-small","slds-m-top--x-small"],["labellength","short",3,"module"],[1,"slds-timeline","slds-p-vertical--small",3,"ngClass"],[4,"ngFor","ngForOf"],[3,"activity","module"],[1,"slds-timeline"],[2,"opacity","0.6"],[2,"opacity","0.3"],[1,"slds-p-vertical--medium"],[4,"ngIf"],["label","LBL_NO_ENTRIES"]],template:function(t,e){if(1&t&&(m.YNc(0,Qe,2,1,"div",0),m.YNc(1,Be,2,4,"ul",1),m.YNc(2,Pe,7,0,"ul",2),m.YNc(3,ze,2,1,"ng-template",null,3,m.W1O)),2&t){const t=m.MAs(4);m.Q6J("ngIf",e.displayaggregates&&e.hasAggregates),m.xp6(1),m.Q6J("ngIf",e.hasActivities)("ngIfElse",t),m.xp6(1),m.Q6J("ngIf",e.loading||e.loadingmore)}},dependencies:[n.mk,n.sg,n.O5,Se.C,E._,Ee.d,Ne.g,Oe],encapsulation:2})),ActivityTimelineContainer})();var He=i(2995);const Ge=["moretab"],Ke=["maintabs"],Ve=["moretabs"],$e=function(t){return{"slds-active":t}};function Xe(t,e){if(1&t){const t=m.EpF();m.TgZ(0,"li",13,14)(2,"a",15),m.NdJ("click",(function(){const e=m.CHM(t).$implicit,i=m.oxw();return m.KtG(i.setTab(e.module))})),m._UZ(3,"system-label-modulename",16),m.qZA()()}if(2&t){const t=e.$implicit,i=m.oxw();m.Q6J("ngClass",m.VKq(4,$e,i.checkTab(t.module))),m.uIk("data-module",t.module),m.xp6(3),m.Q6J("module",t.module)("singular",!0)}}const We=function(t){return{"slds-hidden":t}};function ti(t,e){if(1&t){const t=m.EpF();m.TgZ(0,"li",17,18),m.NdJ("click",(function(){const e=m.CHM(t).$implicit,i=m.oxw();return m.KtG(i.setTab(e.module))})),m.TgZ(2,"a",19)(3,"span",20),m._UZ(4,"system-utility-icon",21)(5,"system-label-modulename",16),m.qZA()()()}if(2&t){const t=e.$implicit,i=m.oxw();m.uIk("data-module",t.module),m.xp6(4),m.Q6J("ngClass",m.VKq(4,We,!i.checkTab(t.module))),m.xp6(1),m.Q6J("module",t.module)("singular",!0)}}function ei(t,e){if(1&t&&(m.TgZ(0,"div",22),m._UZ(1,"system-dynamic-component",23),m.qZA()),2&t){const t=e.$implicit,i=m.oxw();m.Q6J("ngClass",i.tabClass(t))("hidden",!i.checkTab(t.module)),m.xp6(1),m.Q6J("component",t.component)("componentconfig",t.componentconfig)}}function ii(t,e){1&t&&(m.TgZ(0,"div",24),m._uU(1,"no actions configured"),m.qZA())}function si(t,e){1&t&&m.YNc(0,ii,2,0,"ng-template")}const ni=function(t){return{"slds-hide":t}},li=function(t,e){return{"slds-is-open":t,"slds-active":e}};let oi=(()=>{var t;class ActivityTimelineAddContainer{constructor(t,e,i,n,l,o){(0,s.Z)(this,"model",void 0),(0,s.Z)(this,"language",void 0),(0,s.Z)(this,"activitiytimeline",void 0),(0,s.Z)(this,"metadata",void 0),(0,s.Z)(this,"elementRef",void 0),(0,s.Z)(this,"renderer",void 0),(0,s.Z)(this,"maintabs",void 0),(0,s.Z)(this,"moretabs",void 0),(0,s.Z)(this,"moretab",void 0),(0,s.Z)(this,"currenttab",""),(0,s.Z)(this,"tabs",[]),(0,s.Z)(this,"resizeListener",void 0),(0,s.Z)(this,"moreOpen",!1),(0,s.Z)(this,"moreModules",[]),this.model=t,this.language=e,this.activitiytimeline=i,this.metadata=n,this.elementRef=l,this.renderer=o,this.resizeListener=this.renderer.listen("window","resize",(t=>{this.handleOverflow()}))}ngOnInit(){let t=this.metadata.getComponentConfig("ActivityTimelineAddContainer",this.model.module);if(t&&t.componentset){let e=this.metadata.getComponentSetObjects(t.componentset);for(let t of e)t.componentconfig.module&&this.metadata.checkModuleAcl(t.componentconfig.module,"create")&&this.tabs.push({module:t.componentconfig.module,component:t.component,componentconfig:t.componentconfig});this.currenttab=this.tabs[0].module}else t&&t.tabs&&t.tabs.length>0&&(this.tabs=t.tabs,this.currenttab=t.tabs[0].module)}ngAfterViewInit(){this.handleOverflow()}ngOnDestroy(){this.resizeListener()}handleOverflow(){this.moreModules=[],this.maintabs.forEach((t=>{t.element.nativeElement.classList.remove("slds-hide"),t.element.nativeElement.classList.add("slds-hidden")})),this.moretab.element.nativeElement.classList.add("slds-hidden"),this.moretab.element.nativeElement.classList.remove("slds-hide");let t=this.elementRef.nativeElement.getBoundingClientRect().width,e=this.moretab.element.nativeElement.getBoundingClientRect().width,i=!1,s=0;this.maintabs.forEach(((n,l)=>{let o=n.element.nativeElement.getBoundingClientRect().width;s+=o,s>t-e&&(i||l+1<this.maintabs.length||o>e)&&(n.element.nativeElement.classList.add("slds-hide"),this.moreModules.push(n.element.nativeElement.attributes.getNamedItem("data-module").value),i=!0),n.element.nativeElement.classList.remove("slds-hidden")})),i?(this.moretab.element.nativeElement.classList.remove("slds-hidden"),this.moretabs.forEach((t=>{this.moreModules.indexOf(t.element.nativeElement.attributes.getNamedItem("data-module").value)>=0?t.element.nativeElement.classList.remove("slds-hide"):t.element.nativeElement.classList.add("slds-hide")}))):(this.moretab.element.nativeElement.classList.remove("slds-hidden"),this.moretab.element.nativeElement.classList.add("slds-hide"))}setTab(t){this.currenttab=t}checkTab(t){return this.currenttab==t}get moreactive(){return this.moreModules.indexOf(this.currenttab)>=0}tabClass(t){return this.currenttab==t.module?"slds-show":"slds-hide"}toggleOpen(){this.moreOpen=!this.moreOpen}}return t=ActivityTimelineAddContainer,(0,s.Z)(ActivityTimelineAddContainer,"ɵfac",(function(e){return new(e||t)(m.Y36(g.o),m.Y36(v.d),m.Y36(_e),m.Y36(x.Pu),m.Y36(m.SBq),m.Y36(m.Qsj))})),(0,s.Z)(ActivityTimelineAddContainer,"ɵcmp",m.Xpm({type:t,selectors:[["activitytimeline-add-container"]],viewQuery:function(t,e){if(1&t&&(m.Gf(Ge,5,m.s_b),m.Gf(Ke,5,m.s_b),m.Gf(Ve,5,m.s_b)),2&t){let t;m.iGM(t=m.CRH())&&(e.moretab=t.first),m.iGM(t=m.CRH())&&(e.maintabs=t),m.iGM(t=m.CRH())&&(e.moretabs=t)}},decls:13,vars:11,consts:[[1,"slds-tabs--scoped",3,"ngClass"],["role","tablist",1,"slds-tabs--scoped__nav"],["class","slds-tabs--scoped__item","role","presentation",3,"ngClass",4,"ngFor","ngForOf"],["role","presentation",1,"slds-tabs_scoped__item","slds-tabs_scoped__overflow-button","slds-dropdown-trigger","slds-dropdown-trigger_click",3,"ngClass","click"],["moretab",""],["href","javascript:void(0);","role","tab",1,"slds-tabs--scoped__link"],["label","LBL_MORE"],["icon","down","size","x-small",1,"slds-p-horizontal--xx-small"],[1,"slds-dropdown","slds-dropdown_right"],["role","menu",1,"slds-dropdown__list","slds-dropdown_length-with-icon-10"],["class","slds-dropdown__item","role","presentation",3,"click",4,"ngFor","ngForOf"],["class","slds-tabs--scoped__content slds-p-around--none","role","tabpanel",3,"ngClass","hidden",4,"ngFor","ngForOf"],[4,"ngIf"],["role","presentation",1,"slds-tabs--scoped__item",3,"ngClass"],["maintabs",""],["href","javascript:void(0);","role","tab",1,"slds-tabs--scoped__link",3,"click"],[3,"module","singular"],["role","presentation",1,"slds-dropdown__item",3,"click"],["moretabs",""],["href","javascript:void(0);","role","menuitem"],[1,"slds-truncate"],["icon","check","size","x-small",1,"slds-p-right--xx-small",3,"ngClass"],["role","tabpanel",1,"slds-tabs--scoped__content","slds-p-around--none",3,"ngClass","hidden"],[3,"component","componentconfig"],[1,"slds-box","slds-theme--shade","slds-align--absolute-center"]],template:function(t,e){1&t&&(m.TgZ(0,"div",0)(1,"ul",1),m.YNc(2,Xe,4,6,"li",2),m.TgZ(3,"li",3,4),m.NdJ("click",(function(){return e.toggleOpen()})),m.TgZ(5,"a",5),m._UZ(6,"system-label",6)(7,"system-utility-icon",7),m.qZA(),m.TgZ(8,"div",8)(9,"ul",9),m.YNc(10,ti,6,6,"li",10),m.qZA()()()(),m.YNc(11,ei,2,4,"div",11),m.qZA(),m.YNc(12,si,1,0,null,12)),2&t&&(m.Q6J("ngClass",m.VKq(6,ni,0==e.tabs.length)),m.xp6(2),m.Q6J("ngForOf",e.tabs),m.xp6(1),m.Q6J("ngClass",m.WLB(8,li,e.moreOpen,e.moreactive)),m.xp6(7),m.Q6J("ngForOf",e.tabs),m.xp6(1),m.Q6J("ngForOf",e.tabs),m.xp6(1),m.Q6J("ngIf",0==e.tabs.length))},dependencies:[n.mk,n.sg,n.O5,He.T,E._,ee.M,jt.r],encapsulation:2})),ActivityTimelineAddContainer})(),ai=(()=>{var t;class ActivityTimelineSummaryButton{constructor(t,e,i,n){(0,s.Z)(this,"model",void 0),(0,s.Z)(this,"language",void 0),(0,s.Z)(this,"router",void 0),(0,s.Z)(this,"navigationtab",void 0),this.model=t,this.language=e,this.router=i,this.navigationtab=n}displaySummary(){let t="";this.navigationtab?.tabid&&(t="/tab/"+this.navigationtab.tabid),this.router.navigate([t+"/module/"+this.model.module+"/historysummary/"+this.model.id])}}return t=ActivityTimelineSummaryButton,(0,s.Z)(ActivityTimelineSummaryButton,"ɵfac",(function(e){return new(e||t)(m.Y36(g.o),m.Y36(v.d),m.Y36(it.F0),m.Y36(Te.d,8))})),(0,s.Z)(ActivityTimelineSummaryButton,"ɵcmp",m.Xpm({type:t,selectors:[["activitytimeline-summary-button"]],decls:2,vars:0,consts:[["type","button",1,"slds-button","slds-button--neutral","slds-is-absolute",2,"right",".5rem","top","-3px",3,"click"],["label","LBL_SUMMARY"]],template:function(t,e){1&t&&(m.TgZ(0,"button",0),m.NdJ("click",(function(){return e.displaySummary()})),m._UZ(1,"system-label",1),m.qZA())},dependencies:[E._],encapsulation:2})),ActivityTimelineSummaryButton})();
/**
 * @license
 * Copyright Google LLC All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
class PendingCopy{constructor(t,e){this._document=e;const i=this._textarea=this._document.createElement("textarea"),s=i.style;s.position="fixed",s.top=s.opacity="0",s.left="-999em",i.setAttribute("aria-hidden","true"),i.value=t,i.readOnly=!0,this._document.body.appendChild(i)}copy(){const t=this._textarea;let e=!1;try{if(t){const i=this._document.activeElement;t.select(),t.setSelectionRange(0,t.value.length),e=this._document.execCommand("copy"),i&&i.focus()}}catch{}return e}destroy(){const t=this._textarea;t&&(t.remove(),this._textarea=void 0)}}
/**
 * @license
 * Copyright Google LLC All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */let di=(()=>{class Clipboard{constructor(t){this._document=t}copy(t){const e=this.beginCopy(t),i=e.copy();return e.destroy(),i}beginCopy(t){return new PendingCopy(t,this._document)}}return Clipboard.ɵfac=function(t){return new(t||Clipboard)(m.LFG(n.K0))},Clipboard.ɵprov=m.Yz7({token:Clipboard,factory:Clipboard.ɵfac,providedIn:"root"}),Clipboard})();let ci=(()=>{class ClipboardModule{}return ClipboardModule.ɵfac=function(t){return new(t||ClipboardModule)},ClipboardModule.ɵmod=m.oAB({type:ClipboardModule}),ClipboardModule.ɵinj=m.cJS({}),ClipboardModule})();function ri(t,e){1&t&&m._UZ(0,"system-spinner",2)}function mi(t,e){if(1&t){const t=m.EpF();m.TgZ(0,"div",3),m.NdJ("click",(function(e){m.CHM(t);const i=m.oxw();return m.KtG(i.getToken(e))})),m.TgZ(1,"system-utility-icon",4),m._UZ(2,"system-label",5),m.qZA()()}if(2&t){const t=m.oxw();m.Q6J("ngStyle",t.handleVisibility())}}let ui=(()=>{var t;class ActivityTimelineSpiceMailButton{constructor(t,e,i,n,l,o){(0,s.Z)(this,"backend",void 0),(0,s.Z)(this,"configuration",void 0),(0,s.Z)(this,"toast",void 0),(0,s.Z)(this,"model",void 0),(0,s.Z)(this,"language",void 0),(0,s.Z)(this,"clipboard",void 0),(0,s.Z)(this,"tokenconfig",!1),(0,s.Z)(this,"result",void 0),(0,s.Z)(this,"token",void 0),(0,s.Z)(this,"emailbean",!1),(0,s.Z)(this,"tokenLoading",!1),this.backend=t,this.configuration=e,this.toast=i,this.model=n,this.language=l,this.clipboard=o}ngOnInit(){this.checkEmailRel(),this.getMailboxToken()}checkEmailRel(){let t=this.model._fields;Object.entries(t).forEach((([t,e],i)=>{"link"==e.type&&"Emails"==e.module&&(this.emailbean=!0)}))}getMailboxToken(){this.backend.getRequest("spicemailtoken/mailboxprocessor").subscribe({next:t=>{this.tokenconfig=t.tokenConfig}})}handleVisibility(){return this.tokenconfig&&this.emailbean?{display:"block"}:{display:"none"}}getToken(t){this.tokenLoading=!0,t.preventDefault(),t.stopPropagation(),this.backend.getRequest("spicemailtoken/"+this.model.module+"/"+this.model.id).subscribe({next:t=>{this.token=t.tokenEmail,this.clipboard.copy(this.token),this.toast.sendToast(this.language.getLabel("LBL_DATA_COPIED")+": "+this.token,"success"),this.tokenLoading=!1},error:()=>{this.toast.sendToast(this.language.getLabel("LBL_ERROR_COPYING_DATA"),"error"),this.tokenLoading=!1}})}}return t=ActivityTimelineSpiceMailButton,(0,s.Z)(ActivityTimelineSpiceMailButton,"ɵfac",(function(e){return new(e||t)(m.Y36(ue.y),m.Y36(xe.C),m.Y36(st.A),m.Y36(g.o),m.Y36(v.d),m.Y36(di))})),(0,s.Z)(ActivityTimelineSpiceMailButton,"ɵcmp",m.Xpm({type:t,selectors:[["activitytimeline-spice-mail-button"]],decls:2,vars:2,consts:[["size","12",4,"ngIf"],[3,"ngStyle","click",4,"ngIf"],["size","12"],[3,"ngStyle","click"],["icon","number_input","size","x-small"],["label","LBL_COPY"]],template:function(t,e){1&t&&(m.YNc(0,ri,1,0,"system-spinner",0),m.YNc(1,mi,3,1,"div",1)),2&t&&(m.Q6J("ngIf",e.tokenLoading),m.xp6(1),m.Q6J("ngIf",!e.tokenLoading))},dependencies:[n.O5,n.PC,E._,Z.W,jt.r],encapsulation:2})),ActivityTimelineSpiceMailButton})();function hi(t,e){1&t&&m._UZ(0,"activitytimeline-add-container")}function gi(t,e){if(1&t){const t=m.EpF();m.TgZ(0,"system-input-delayed",19),m.NdJ("ngModelChange",(function(e){m.CHM(t);const i=m.oxw();return m.KtG(i.ftsSearchTerm=e)})),m.qZA()}if(2&t){const t=m.oxw();m.Q6J("placeholder",t.language.getLabel("LBL_SEARCH"))("ngModel",t.ftsSearchTerm)}}function pi(t,e){if(1&t){const t=m.EpF();m.TgZ(0,"system-utility-icon",23),m.NdJ("click",(function(e){m.CHM(t);const i=m.oxw(2);return m.KtG(i.toggleAggregates("Activities",e))})),m.qZA()}if(2&t){const t=m.oxw(2);m.Q6J("icon",t.displayaggregates.Activities?"up":"down")}}function fi(t,e){if(1&t){const t=m.EpF();m.TgZ(0,"button",24),m.NdJ("click",(function(){m.CHM(t);const e=m.oxw(2);return m.KtG(e.loadMore("Activities"))})),m.TgZ(1,"span"),m._UZ(2,"system-label",25),m.qZA()()}}function vi(t,e){if(1&t&&(m.ynx(0),m.TgZ(1,"div",11)(2,"div",12)(3,"span"),m._uU(4),m.qZA(),m.TgZ(5,"span",13),m._UZ(6,"system-label",20),m.qZA(),m.YNc(7,pi,1,1,"system-utility-icon",15),m.qZA(),m.YNc(8,fi,3,0,"button",21),m.qZA(),m._UZ(9,"activitytimeline-container",22),m.BQk()),2&t){const t=m.oxw();m.xp6(4),m.Oqu(t.activitiytimeline.activities.Activities.totalcount),m.xp6(3),m.Q6J("ngIf",t.activitiytimeline.usefts&&t.activitiytimeline.activities.Activities.totalcount>0),m.xp6(1),m.Q6J("ngIf",t.activitiytimeline.canLoadMore("Activities")),m.xp6(1),m.Q6J("displayaggregates",t.displayaggregates.Activities)}}function Zi(t,e){if(1&t){const t=m.EpF();m.TgZ(0,"system-utility-icon",23),m.NdJ("click",(function(e){m.CHM(t);const i=m.oxw();return m.KtG(i.toggleAggregates("History",e))})),m.qZA()}if(2&t){const t=m.oxw();m.Q6J("icon",t.displayaggregates.History?"up":"down")}}function bi(t,e){if(1&t){const t=m.EpF();m.TgZ(0,"button",26),m.NdJ("click",(function(){m.CHM(t);const e=m.oxw();return m.KtG(e.loadMore("History"))})),m.TgZ(1,"span"),m._UZ(2,"system-label",25),m.qZA()()}}let yi=(()=>{var t;class ActivityTimeline{constructor(t,e,i,n,l,o,a,d,c){(0,s.Z)(this,"model",void 0),(0,s.Z)(this,"router",void 0),(0,s.Z)(this,"language",void 0),(0,s.Z)(this,"activitiytimeline",void 0),(0,s.Z)(this,"metadata",void 0),(0,s.Z)(this,"utils",void 0),(0,s.Z)(this,"layout",void 0),(0,s.Z)(this,"navigationtab",void 0),(0,s.Z)(this,"injector",void 0),(0,s.Z)(this,"componentconfig",{}),(0,s.Z)(this,"displayaggregates",{Activities:!1,History:!1}),this.model=t,this.router=e,this.language=i,this.activitiytimeline=n,this.metadata=l,this.utils=o,this.layout=a,this.navigationtab=d,this.injector=c}ngOnInit(){this.activitiytimeline.parent=this.model,this.componentconfig.usefts&&(this.activitiytimeline.usefts=!0),this.componentconfig.defaultentries&&(this.activitiytimeline.defaultLimit=this.componentconfig.defaultentries)}get ftsSearchTerm(){return this.activitiytimeline.filters.searchterm}set ftsSearchTerm(t){this.activitiytimeline.filters.searchterm=t,this.activitiytimeline.reload()}get displayAddContainer(){return!this.componentconfig.hideaddcontainer}get displayActivitiesContainer(){return!this.componentconfig.hideactivitiescontainer}ngOnDestroy(){this.activitiytimeline.stopSubscriptions()}reload(){this.displayActivitiesContainer&&this.activitiytimeline.getTimeLineData("Activities"),this.activitiytimeline.getTimeLineData("History")}toggleAggregates(t,e){e.stopPropagation(),this.displayaggregates[t]=!this.displayaggregates[t]}loadMore(t){this.activitiytimeline.getMoreTimeLineData(t,this.componentconfig.defaultentries)}toggleOpen(){this.activitiytimeline.openness=!this.activitiytimeline.openness}get isSmall(){return"small"==this.layout.screenwidth}}return t=ActivityTimeline,(0,s.Z)(ActivityTimeline,"ɵfac",(function(e){return new(e||t)(m.Y36(g.o),m.Y36(it.F0),m.Y36(v.d),m.Y36(_e),m.Y36(x.Pu),m.Y36(A.A),m.Y36(Ae.b),m.Y36(Te.d,8),m.Y36(m.zs3))})),(0,s.Z)(ActivityTimeline,"ɵcmp",m.Xpm({type:t,selectors:[["activity-timeline"]],features:[m._Bn([_e])],decls:27,vars:10,consts:[[4,"ngIf"],[1,"slds-grid","slds-grid--align-spread","slds-p-top--small","slds-grid--vertical-align-center"],[1,"slds-grid","slds-grid--vertical-align-center"],[1,"slds-p-vertical--xx-small","slds-text-heading--small"],["label","LBL_ACTIVITIES"],["delay","1000","class","slds-p-horizontal--xx-small",3,"placeholder","ngModel","ngModelChange",4,"ngIf"],[1,"slds-p-horizontal--xxx-small"],[1,"slds-button","slds-button--icon",3,"title","click"],["icon","refresh",1,"slds-p-horizontal--xxx-small","slds-icon-text-default"],[1,"slds-p-horizontal--xxx-small",3,"icon"],[1,"slds-p-top--x-small","activities-activity"],[1,"slds-is-relative","spiceActivitiyTimelineHeader"],[1,"slds-p-vertical--xx-small","slds-text-heading--x-small"],[1,"slds-p-horizontal--xx-small"],["label","LBL_PAST_ACTIVITIES"],["size","x-small",3,"icon","click",4,"ngIf"],["module","History",3,"displayaggregates"],[1,"slds-grid","slds-grid_align-end"],["class","slds-button slds-button--neutral","type","button",3,"click",4,"ngIf"],["delay","1000",1,"slds-p-horizontal--xx-small",3,"placeholder","ngModel","ngModelChange"],["label","LBL_NEXT_STEPS"],["class","slds-button slds-button--neutral slds-is-absolute","style","right:.5rem; top:-3px;","type","button",3,"click",4,"ngIf"],["module","Activities",3,"displayaggregates"],["size","x-small",3,"icon","click"],["type","button",1,"slds-button","slds-button--neutral","slds-is-absolute",2,"right",".5rem","top","-3px",3,"click"],["label","LBL_MORE"],["type","button",1,"slds-button","slds-button--neutral",3,"click"]],template:function(t,e){1&t&&(m.YNc(0,hi,1,0,"activitytimeline-add-container",0),m.TgZ(1,"div",1)(2,"div",2)(3,"div",3),m._UZ(4,"system-label",4),m.qZA()(),m.TgZ(5,"div",2),m.YNc(6,gi,1,2,"system-input-delayed",5),m._UZ(7,"activitytimeline-spice-mail-button",6)(8,"activity-timeline-filter",6),m.TgZ(9,"button",7),m.NdJ("click",(function(){return e.reload()})),m._UZ(10,"system-button-icon",8),m.qZA(),m.TgZ(11,"button",7),m.NdJ("click",(function(){return e.toggleOpen()})),m._UZ(12,"system-button-icon",9),m.qZA()()(),m.TgZ(13,"div",10),m.YNc(14,vi,10,4,"ng-container",0),m.TgZ(15,"div",11)(16,"div",12)(17,"span"),m._uU(18),m.qZA(),m.TgZ(19,"span",13),m._UZ(20,"system-label",14),m.qZA(),m.YNc(21,Zi,1,1,"system-utility-icon",15),m.qZA(),m._UZ(22,"activitytimeline-summary-button"),m.qZA(),m.TgZ(23,"activity-timeline-drop-zone-wrapper"),m._UZ(24,"activitytimeline-container",16),m.qZA(),m.TgZ(25,"div",17),m.YNc(26,bi,3,0,"button",18),m.qZA()()),2&t&&(m.Q6J("ngIf",e.displayAddContainer),m.xp6(6),m.Q6J("ngIf",e.activitiytimeline.usefts),m.xp6(3),m.Q6J("title",e.language.getLabel("LBL_RELOAD")),m.xp6(2),m.Q6J("title",e.language.getLabel("LBL_OPEN_ALL")),m.xp6(1),m.Q6J("icon",e.activitiytimeline.openness?"chevronup":"chevrondown"),m.xp6(2),m.Q6J("ngIf",e.displayActivitiesContainer),m.xp6(4),m.Oqu(e.activitiytimeline.activities.History.totalcount),m.xp6(3),m.Q6J("ngIf",e.activitiytimeline.usefts&&e.activitiytimeline.activities.History.totalcount>0),m.xp6(3),m.Q6J("displayaggregates",e.displayaggregates.History),m.xp6(2),m.Q6J("ngIf",e.activitiytimeline.canLoadMore("History")))},dependencies:[n.O5,l.JJ,l.On,G.J,ke.y,E._,jt.r,Je,Fe,je,oi,ai,ui],encapsulation:2})),ActivityTimeline})();var xi=i(323);function _i(t,e){1&t&&m._UZ(0,"activitytimeline-add-container")}function Ai(t,e){if(1&t){const t=m.EpF();m.TgZ(0,"system-input-delayed",22),m.NdJ("ngModelChange",(function(e){m.CHM(t);const i=m.oxw(2);return m.KtG(i.ftsSearchTerm=e)})),m.qZA()}if(2&t){const t=m.oxw(2);m.Q6J("placeholder",t.language.getLabel("LBL_SEARCH"))("ngModel",t.ftsSearchTerm)}}function Ti(t,e){if(1&t){const t=m.EpF();m.TgZ(0,"div",15),m.YNc(1,Ai,1,2,"system-input-delayed",16),m._UZ(2,"activity-timeline-filter",17),m.TgZ(3,"button",18),m.NdJ("click",(function(){m.CHM(t);const e=m.oxw();return m.KtG(e.reload())})),m._UZ(4,"system-button-icon",19),m.qZA(),m.TgZ(5,"button",18),m.NdJ("click",(function(){m.CHM(t);const e=m.oxw();return m.KtG(e.displaySummary())})),m._UZ(6,"system-button-icon",20),m.qZA(),m.TgZ(7,"button",18),m.NdJ("click",(function(){m.CHM(t);const e=m.oxw();return m.KtG(e.toggleOpen())})),m._UZ(8,"system-button-icon",21),m.qZA()()}if(2&t){const t=m.oxw();m.xp6(1),m.Q6J("ngIf",t.activitiytimeline.usefts),m.xp6(2),m.Q6J("title",t.language.getLabel("LBL_RELOAD")),m.xp6(2),m.Q6J("title",t.language.getLabel("LBL_SUMMARY")),m.xp6(2),m.Q6J("title",t.language.getLabel("LBL_OPEN_ALL")),m.xp6(1),m.Q6J("icon",t.activitiytimeline.openness?"chevronup":"chevrondown")}}function ki(t,e){if(1&t){const t=m.EpF();m.TgZ(0,"system-input-delayed",25),m.NdJ("ngModelChange",(function(e){m.CHM(t);const i=m.oxw(2);return m.KtG(i.ftsSearchTerm=e)})),m.qZA()}if(2&t){const t=m.oxw(2);m.Q6J("placeholder",t.language.getLabel("LBL_SEARCH"))("ngModel",t.ftsSearchTerm)}}function Ci(t,e){if(1&t){const t=m.EpF();m.TgZ(0,"li",23)(1,"div",3),m.YNc(2,ki,1,2,"system-input-delayed",24),m._UZ(3,"activity-timeline-filter",17),m.TgZ(4,"button",18),m.NdJ("click",(function(){m.CHM(t);const e=m.oxw();return m.KtG(e.reload())})),m._UZ(5,"system-button-icon",19),m.qZA(),m.TgZ(6,"button",18),m.NdJ("click",(function(){m.CHM(t);const e=m.oxw();return m.KtG(e.displaySummary())})),m._UZ(7,"system-button-icon",20),m.qZA(),m.TgZ(8,"button",18),m.NdJ("click",(function(){m.CHM(t);const e=m.oxw();return m.KtG(e.toggleOpen())})),m._UZ(9,"system-button-icon",21),m.qZA()()()}if(2&t){const t=m.oxw();m.xp6(2),m.Q6J("ngIf",t.activitiytimeline.usefts),m.xp6(2),m.Q6J("title",t.language.getLabel("LBL_RELOAD")),m.xp6(2),m.Q6J("title",t.language.getLabel("LBL_SUMMARY")),m.xp6(2),m.Q6J("title",t.language.getLabel("LBL_OPEN_ALL")),m.xp6(1),m.Q6J("icon",t.activitiytimeline.openness?"chevronup":"chevrondown")}}function wi(t,e){if(1&t){const t=m.EpF();m.TgZ(0,"button",26),m.NdJ("click",(function(){m.CHM(t);const e=m.oxw();return m.KtG(e.loadMore("History"))})),m.TgZ(1,"span"),m._UZ(2,"system-label",27),m.qZA()()}}function Mi(t,e){if(1&t){const t=m.EpF();m.TgZ(0,"button",26),m.NdJ("click",(function(){m.CHM(t);const e=m.oxw();return m.KtG(e.loadMore("Activities"))})),m.TgZ(1,"span"),m._UZ(2,"system-label",27),m.qZA()()}}const Ji=function(t){return{"slds-is-active":t}},Yi=function(t){return{"slds-hide":t}};let Li=(()=>{var t;class ActivityTimelineTabbed extends yi{constructor(...t){super(...t),(0,s.Z)(this,"activetab","history")}displaySummary(){let t="";this.navigationtab?.tabid&&(t="/tab/"+this.navigationtab.tabid),this.router.navigate([t+"/module/"+this.model.module+"/historysummary/"+this.model.id])}}return t=ActivityTimelineTabbed,(0,s.Z)(ActivityTimelineTabbed,"ɵfac",function(){let e;return function(i){return(e||(e=m.n5z(t)))(i||t)}}()),(0,s.Z)(ActivityTimelineTabbed,"ɵcmp",m.Xpm({type:t,selectors:[["ng-component"]],features:[m._Bn([_e,xi.H]),m.qOj],decls:23,vars:20,consts:[[4,"ngIf"],[1,"slds-tabs_default"],["class","slds-grid slds-grid--vertical-align-center slds-p-top--x-small",4,"ngIf"],[1,"slds-grid","slds-grid--vertical-align-center"],["role","tablist",1,"slds-tabs_default__nav","slds-grow"],["role","presentation",1,"slds-tabs_default__item",3,"ngClass"],["href","javascript:void(0);","role","tab",1,"slds-tabs_default__link",3,"click"],["label","LBL_PAST_ACTIVITIES"],["label","LBL_NEXT_STEPS"],["class","slds-col--bump-left slds-p-vertical--xx-small",4,"ngIf"],["role","tabpanel",1,"slds-tabs_default__content","slds-p-top--xxx-small",3,"ngClass"],["module","History",3,"displayaggregates"],[1,"slds-align--absolute-center"],["class","slds-button slds-button--neutral","type","button",3,"click",4,"ngIf"],["module","Activities"],[1,"slds-grid","slds-grid--vertical-align-center","slds-p-top--x-small"],["delay","1000","class","slds-p-horizontal--xx-small slds-grow",3,"placeholder","ngModel","ngModelChange",4,"ngIf"],[1,"slds-p-horizontal--xxx-small"],[1,"slds-button","slds-button--icon",3,"title","click"],["icon","refresh",1,"slds-p-horizontal--xxx-small","slds-icon-text-default"],["icon","side_list",1,"slds-p-horizontal--xxx-small"],[1,"slds-p-horizontal--xxx-small",3,"icon"],["delay","1000",1,"slds-p-horizontal--xx-small","slds-grow",3,"placeholder","ngModel","ngModelChange"],[1,"slds-col--bump-left","slds-p-vertical--xx-small"],["delay","1000","class","slds-p-horizontal--xx-small",3,"placeholder","ngModel","ngModelChange",4,"ngIf"],["delay","1000",1,"slds-p-horizontal--xx-small",3,"placeholder","ngModel","ngModelChange"],["type","button",1,"slds-button","slds-button--neutral",3,"click"],["label","LBL_MORE"]],template:function(t,e){1&t&&(m.YNc(0,_i,1,0,"activitytimeline-add-container",0),m.TgZ(1,"div",1),m.YNc(2,Ti,9,5,"div",2),m.TgZ(3,"div",3)(4,"ul",4)(5,"li",5)(6,"a",6),m.NdJ("click",(function(){return e.activetab="history"})),m._UZ(7,"system-label",7),m._uU(8),m.qZA()(),m.TgZ(9,"li",5)(10,"a",6),m.NdJ("click",(function(){return e.activetab="planned"})),m._UZ(11,"system-label",8),m._uU(12),m.qZA()(),m.YNc(13,Ci,10,5,"li",9),m.qZA()(),m.TgZ(14,"div",10)(15,"activity-timeline-drop-zone-wrapper"),m._UZ(16,"activitytimeline-container",11),m.qZA(),m.TgZ(17,"div",12),m.YNc(18,wi,3,0,"button",13),m.qZA()(),m.TgZ(19,"div",10),m._UZ(20,"activitytimeline-container",14),m.TgZ(21,"div",12),m.YNc(22,Mi,3,0,"button",13),m.qZA()()()),2&t&&(m.Q6J("ngIf",e.displayAddContainer),m.xp6(2),m.Q6J("ngIf",e.isSmall),m.xp6(3),m.Q6J("ngClass",m.VKq(12,Ji,"history"==e.activetab)),m.xp6(3),m.hij(" (",e.activitiytimeline.activities.History.totalcount,")"),m.xp6(1),m.Q6J("ngClass",m.VKq(14,Ji,"planned"==e.activetab)),m.xp6(3),m.hij(" (",e.activitiytimeline.activities.Activities.totalcount,")"),m.xp6(1),m.Q6J("ngIf",!e.isSmall),m.xp6(1),m.Q6J("ngClass",m.VKq(16,Yi,"history"!=e.activetab)),m.xp6(2),m.Q6J("displayaggregates",!1),m.xp6(2),m.Q6J("ngIf",e.activitiytimeline.canLoadMore("History")),m.xp6(1),m.Q6J("ngClass",m.VKq(18,Yi,"planned"!=e.activetab)),m.xp6(3),m.Q6J("ngIf",e.activitiytimeline.canLoadMore("Activities")))},dependencies:[n.mk,n.O5,l.JJ,l.On,G.J,ke.y,E._,Je,Fe,je,oi],encapsulation:2})),ActivityTimelineTabbed})();var Fi=i(586),Si=i(9062),Ei=i(5931),Ni=i(3814);function qi(t,e){1&t&&m._UZ(0,"system-dynamic-component",23)}function Ii(t,e){if(1&t&&(m.TgZ(0,"div",21),m.YNc(1,qi,1,0,"system-dynamic-component",22),m.qZA()),2&t){const t=m.oxw();m.xp6(1),m.Q6J("ngIf",t.displayattachments)}}function Oi(t,e){if(1&t&&m._UZ(0,"object-record-fieldset-horizontal-list",24),2&t){const t=m.oxw();m.Q6J("fieldset",t.headerFieldSet)}}function Qi(t,e){if(1&t&&(m.TgZ(0,"div",25),m._uU(1),m.qZA()),2&t){const t=m.oxw();m.xp6(1),m.Oqu(t.subject)}}function Ui(t,e){if(1&t&&m._UZ(0,"object-action-menu",26),2&t){const t=m.oxw();m.Q6J("buttonsize","x-small")("actionset",t.actionset)}}function Di(t,e){if(1&t&&m._UZ(0,"object-record-fieldset-horizontal-list",24),2&t){const t=m.oxw();m.Q6J("fieldset",t.subheaderFieldSet)}}function Bi(t,e){1&t&&m._UZ(0,"system-dynamic-component",30)}function Pi(t,e){if(1&t&&(m.TgZ(0,"article",27),m._UZ(1,"object-record-fieldset",28),m.YNc(2,Bi,1,0,"system-dynamic-component",29),m.qZA()),2&t){const t=m.oxw();m.xp6(1),m.Q6J("fieldset",t.formFieldSet),m.xp6(1),m.Q6J("ngIf",t.hasattachments)}}function Ri(t,e){if(1&t){const t=m.EpF();m.TgZ(0,"object-action-menu",31),m.NdJ("actionemitter",(function(e){m.CHM(t);const i=m.oxw();return m.KtG(i.handleAction(e))})),m.qZA()}if(2&t){const t=m.oxw();m.Q6J("buttonsize","x-small")("actionset",t.actionset)}}const zi=function(t){return{"slds-is-open":t}},ji=function(t){return{"slds-hidden":t}},Hi=function(){return{displayLabels:!1}},Gi=function(t,e){return{"slds-theme--error":t,"slds-theme--warning":e}};let Ki=(()=>{var t;class ActivityTimelineItem{constructor(t,e,i,n,l,o,a,d,c,r){(0,s.Z)(this,"model",void 0),(0,s.Z)(this,"modelattachments",void 0),(0,s.Z)(this,"metadata",void 0),(0,s.Z)(this,"view",void 0),(0,s.Z)(this,"userpreferences",void 0),(0,s.Z)(this,"session",void 0),(0,s.Z)(this,"language",void 0),(0,s.Z)(this,"backend",void 0),(0,s.Z)(this,"activitiytimeline",void 0),(0,s.Z)(this,"cdref",void 0),(0,s.Z)(this,"activity",{}),(0,s.Z)(this,"showtoolset",!0),(0,s.Z)(this,"formFieldSet",""),(0,s.Z)(this,"headerFieldSet",void 0),(0,s.Z)(this,"subheaderFieldSet",void 0),(0,s.Z)(this,"isopen",!1),(0,s.Z)(this,"componentconfig",{}),(0,s.Z)(this,"module",void 0),(0,s.Z)(this,"subscriptions",new j.w0),this.model=t,this.modelattachments=e,this.metadata=i,this.view=n,this.userpreferences=l,this.session=o,this.language=a,this.backend=d,this.activitiytimeline=c,this.cdref=r,this.view.isEditable=!1,this.view.displayLabels=!0,this.isopen=!!c&&c.openness}ngOnInit(){this.model.id=this.activity.id,this.model.setData(this.activity.data),this.model.module=this.activity.module,this.displayattachments&&(this.modelattachments.module=this.model.module,this.modelattachments.id=this.model.id);let t=this.metadata.getComponentConfig("ActivityTimelineItem",this.model.module);this.headerFieldSet=this.componentconfig.headerfieldset?this.componentconfig.headerfieldset:t.headerfieldset,this.subheaderFieldSet=this.componentconfig.subheaderfieldset?this.componentconfig.subheaderfieldset:t.subheaderfieldset,this.formFieldSet=this.componentconfig.fieldset}ngAfterViewInit(){this.activitiytimeline&&this.subscriptions.add(this.activitiytimeline.openness$.subscribe((t=>{this.isopen=t,this.cdref.detectChanges()}))),this.subscriptions.add(this.modelattachments.loaded$.subscribe((t=>{this.cdref.detectChanges()})))}ngOnDestroy(){this.subscriptions.unsubscribe()}get actionset(){return this.componentconfig.actionset}get displayattachments(){return this.componentconfig.displayattachments}get hasattachments(){return this.componentconfig.displayattachments&&this.modelattachments.count>0}attachmentsloaded(){this.cdref.detectChanges()}get subject(){let t=this.model.getField("summary_text");return t||"-- no subject --"}get starttime(){let t=new moment.utc(this.activity.date_activity).tz(this.session.getSessionData("timezone")||moment.tz.guess(!0));return t?t.format(this.userpreferences.getTimeFormat()):""}get startdate(){let t=new moment.utc(this.activity.date_activity).tz(this.session.getSessionData("timezone")||moment.tz.guess(!0));return t?t.format(this.userpreferences.getDateFormat()):""}get activitiyDate(){const t=new moment.utc(this.activity.date_activity).tz(this.session.getSessionData("timezone")||moment.tz.guess(!0)),e=t.format("YYYYMMDD")==(new moment).format("YYYYMMDD"),i=t.format("YYYY")==(new moment).format("YYYY");return e?t.format(this.userpreferences.getTimeFormat()):i?t.format("MMM D"):t.format(this.userpreferences.getDateFormat())}get isToday(){let t=(new moment.utc).tz(this.session.getSessionData("timezone"));return"Activities"==this.module&&new moment.utc(this.activity.date_activity).tz(this.session.getSessionData("timezone")).isSame(t,"day")}get isPast(){let t=(new moment.utc).tz(this.session.getSessionData("timezone"));return"Activities"==this.module&&new moment.utc(this.activity.date_activity).tz(this.session.getSessionData("timezone")).isBefore(t,"day")}get cantexpand(){return!this.formFieldSet}get enableDetail(){return this.model.checkAccess("detail")}handleAction(t){this.cdref.detectChanges()}goDetail(){this.enableDetail&&this.model.goDetail()}toggleexpand(){this.isopen=!this.isopen,this.isopen&&this.componentconfig.displayattachments&&!this.modelattachments.loaded&&this.modelattachments.getAttachments(),"Emails"==this.model.module&&"unread"==this.model.getField("status")&&(this.model.setField("status","read"),this.backend.postRequest(`module/Emails/${this.model.id}/status`,{},{status:"read"}).subscribe({error:()=>{this.model.setField("status","unread")}}))}}return t=ActivityTimelineItem,(0,s.Z)(ActivityTimelineItem,"ɵfac",(function(e){return new(e||t)(m.Y36(g.o),m.Y36(xi.H),m.Y36(x.Pu),m.Y36(y.e),m.Y36(Et.z),m.Y36(me.n),m.Y36(v.d),m.Y36(ue.y),m.Y36(_e,8),m.Y36(m.sBO))})),(0,s.Z)(ActivityTimelineItem,"ɵcmp",m.Xpm({type:t,selectors:[["activitytimeline-item"]],inputs:{activity:"activity",showtoolset:"showtoolset",module:"module"},features:[m._Bn([g.o,xi.H,y.e])],decls:23,vars:26,consts:[[1,"slds-timeline__item_expandable","slds-p-vertical--none",3,"ngClass"],[1,"slds-media"],[1,"slds-media__figure"],[1,"slds-button","slds-button_icon",3,"ngClass","disabled","click"],["icon","switch","addclasses","slds-timeline__details-action-icon"],["size","small","divClass","slds-icon_container slds-timeline__icon",3,"module","title"],[1,"slds-media__body","slds-truncate"],[1,"slds-grid","slds-grid_align-spread","slds-timeline__trigger","slds-truncate"],[1,"slds-grid","slds-grid_vertical-align-center","slds-truncate_container--75","slds-size--6-of-7","slds-no-space","slds-text-title_bold",3,"system-view-provider"],[1,"slds-truncate","slds-grid","slds-grid--vertical-align-center"],["class","slds-p-horizontal--xx-small",4,"ngIf"],[3,"fieldset",4,"ngIf","ngIfElse"],["noheaderfieldset",""],[1,"slds-timeline__date","slds-p-horizontal--x-small","slds-theme--shade",2,"border-radius","10px","height","18px",3,"title","ngClass"],[1,"slds-align--absolute-center"],[1,"slds-timeline__actions","slds-timeline__actions_inline"],["class","slds-show--medium",3,"buttonsize","actionset",4,"ngIf"],[1,"slds-m-horizontal_xx-small",3,"system-view-provider"],[3,"fieldset",4,"ngIf"],["class","slds-box slds-timeline__item_details slds-theme_shade slds-m-top_x-small slds-m-horizontal_xx-small",4,"ngIf"],["class","slds-hide--medium",3,"buttonsize","actionset","actionemitter",4,"ngIf"],[1,"slds-p-horizontal--xx-small"],["component","SpiceAttachmentsCount",4,"ngIf"],["component","SpiceAttachmentsCount"],[3,"fieldset"],["system-model-popover",""],[1,"slds-show--medium",3,"buttonsize","actionset"],[1,"slds-box","slds-timeline__item_details","slds-theme_shade","slds-m-top_x-small","slds-m-horizontal_xx-small"],["direction","vertical","fielddisplayclass","slds-truncate","fieldpadding","none",3,"fieldset"],["component","SpiceAttachmentsList",4,"ngIf"],["component","SpiceAttachmentsList"],[1,"slds-hide--medium",3,"buttonsize","actionset","actionemitter"]],template:function(t,e){if(1&t&&(m.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"button",3),m.NdJ("click",(function(){return e.toggleexpand()})),m._UZ(4,"system-button-icon",4),m.qZA(),m._UZ(5,"system-icon",5),m.qZA(),m.TgZ(6,"div",6)(7,"div",7)(8,"div",8)(9,"h3",9),m.YNc(10,Ii,2,1,"div",10),m.YNc(11,Oi,1,1,"object-record-fieldset-horizontal-list",11),m.YNc(12,Qi,2,1,"ng-template",null,12,m.W1O),m.qZA()(),m.TgZ(14,"div",13)(15,"div",14),m._uU(16),m.qZA()(),m.TgZ(17,"div",15),m.YNc(18,Ui,1,2,"object-action-menu",16),m.qZA()(),m.TgZ(19,"div",17),m.YNc(20,Di,1,1,"object-record-fieldset-horizontal-list",18),m.qZA(),m.YNc(21,Pi,3,2,"article",19),m.qZA()(),m.YNc(22,Ri,1,2,"object-action-menu",20),m.qZA()),2&t){const t=m.MAs(13);m.Q6J("ngClass",m.VKq(17,zi,e.isopen)),m.xp6(3),m.Q6J("ngClass",m.VKq(19,ji,e.cantexpand))("disabled",e.cantexpand),m.xp6(2),m.Q6J("module",e.model.module)("title",e.language.getModuleName(e.model.module,!0)),m.xp6(3),m.Q6J("system-view-provider",m.DdM(21,Hi)),m.xp6(2),m.Q6J("ngIf",e.displayattachments),m.xp6(1),m.Q6J("ngIf",e.headerFieldSet)("ngIfElse",t),m.xp6(3),m.Q6J("title",e.startdate+" "+e.starttime)("ngClass",m.WLB(22,Gi,e.isPast,e.isToday)),m.xp6(2),m.Oqu(e.activitiyDate),m.xp6(2),m.Q6J("ngIf",e.showtoolset),m.xp6(1),m.Q6J("system-view-provider",m.DdM(25,Hi)),m.xp6(1),m.Q6J("ngIf",e.subheaderFieldSet),m.xp6(1),m.Q6J("ngIf",e.isopen&&!e.cantexpand),m.xp6(1),m.Q6J("ngIf",e.showtoolset)}},dependencies:[n.mk,n.O5,Fi.g,Si.d,Ei.Z,G.J,He.T,zt.f,Jt.g,Ni.V],encapsulation:2,changeDetection:0})),ActivityTimelineItem})();var Vi=i(788),$i=i(4347);function Xi(t,e){if(1&t){const t=m.EpF();m.TgZ(0,"div",5)(1,"button",6),m.NdJ("click",(function(){m.CHM(t);const e=m.oxw();return m.KtG(e.cancel())})),m._UZ(2,"system-button-icon",7),m.TgZ(3,"span",8),m._UZ(4,"system-label",9),m.qZA()(),m.TgZ(5,"button",10),m.NdJ("click",(function(){m.CHM(t);const e=m.oxw();return m.KtG(e.expand())})),m._UZ(6,"system-button-icon",11),m.TgZ(7,"span",8),m._UZ(8,"system-label",12),m.qZA()(),m.TgZ(9,"button",10),m.NdJ("click",(function(){m.CHM(t);const e=m.oxw();return m.KtG(e.dock())})),m._UZ(10,"system-button-icon",13),m.TgZ(11,"span",8),m._UZ(12,"system-label",14),m.qZA()()()}if(2&t){const t=m.oxw();m.xp6(1),m.Q6J("title",t.language.getLabel("LBL_CANCEL")),m.xp6(4),m.Q6J("disabled",!t.canExpand)("title",t.language.getLabel("LBL_EXPAND")),m.xp6(4),m.Q6J("disabled",!t.canDock)("title",t.language.getLabel("LBL_DOCK"))}}function Wi(t,e){1&t&&m._UZ(0,"system-dynamic-component",23)}function ts(t,e){if(1&t){const t=m.EpF();m.TgZ(0,"button",28),m.NdJ("click",(function(){m.CHM(t);const e=m.oxw(3);return m.KtG(e.expand())})),m._UZ(1,"system-button-icon",11),m.TgZ(2,"span",8),m._UZ(3,"system-label",12),m.qZA()()}if(2&t){const t=m.oxw(3);m.Q6J("disabled",!t.canExpand)("title",t.language.getLabel("LBL_EXPAND"))}}function es(t,e){if(1&t){const t=m.EpF();m.TgZ(0,"button",28),m.NdJ("click",(function(){m.CHM(t);const e=m.oxw(3);return m.KtG(e.dock())})),m._UZ(1,"system-button-icon",13),m.TgZ(2,"span",8),m._UZ(3,"system-label",14),m.qZA()()}if(2&t){const t=m.oxw(3);m.Q6J("disabled",!t.canDock)("title",t.language.getLabel("LBL_DOCK"))}}function is(t,e){if(1&t){const t=m.EpF();m.TgZ(0,"div",24)(1,"button",25),m.NdJ("click",(function(){m.CHM(t);const e=m.oxw(2);return m.KtG(e.cancel())})),m._UZ(2,"system-button-icon",26),m.TgZ(3,"span",8),m._UZ(4,"system-label",9),m.qZA()(),m.YNc(5,ts,4,2,"button",27),m.YNc(6,es,4,2,"button",27),m.qZA()}if(2&t){const t=m.oxw(2);m.xp6(1),m.Q6J("title",t.language.getLabel("LBL_CANCEL")),m.xp6(4),m.Q6J("ngIf",!t.componentconfig.hideutilitybuttons),m.xp6(1),m.Q6J("ngIf",!t.componentconfig.hideutilitybuttons)}}function ss(t,e){if(1&t){const t=m.EpF();m.TgZ(0,"div",15),m._UZ(1,"object-record-fieldset",16),m.YNc(2,Wi,1,0,"system-dynamic-component",17),m.TgZ(3,"div",18),m.YNc(4,is,7,3,"div",19),m.TgZ(5,"div",20),m._UZ(6,"object-record-messages-badge",21),m.TgZ(7,"object-action-container",22),m.NdJ("actionemitter",(function(e){m.CHM(t);const i=m.oxw();return m.KtG(i.handleaction(e))})),m.qZA()()()()}if(2&t){const t=m.oxw();m.xp6(1),m.Q6J("fieldset",t.bodyFieldSet)("direction","vertical"),m.xp6(1),m.Q6J("ngIf",t.allowattachments),m.xp6(2),m.Q6J("ngIf","top"!=t.utilityButtonsPosition),m.xp6(3),m.Q6J("actionset",t.actionset)}}let ns=(()=>{var t;class ActivityTimelineAddItem{constructor(t,e,i,n,l,o,a,d){(0,s.Z)(this,"metadata",void 0),(0,s.Z)(this,"activitiytimeline",void 0),(0,s.Z)(this,"model",void 0),(0,s.Z)(this,"view",void 0),(0,s.Z)(this,"language",void 0),(0,s.Z)(this,"modal",void 0),(0,s.Z)(this,"dockedComposer",void 0),(0,s.Z)(this,"ViewContainerRef",void 0),(0,s.Z)(this,"componentconfig",{}),(0,s.Z)(this,"headerFieldSet",""),(0,s.Z)(this,"bodyFieldSet",""),(0,s.Z)(this,"utilityButtonsPosition","bottom"),(0,s.Z)(this,"isExpanded",!1),(0,s.Z)(this,"canExpand",!1),(0,s.Z)(this,"canDock",!1),(0,s.Z)(this,"parentSubscription",void 0),this.metadata=t,this.activitiytimeline=e,this.model=i,this.view=n,this.language=l,this.modal=o,this.dockedComposer=a,this.ViewContainerRef=d}ngOnInit(){this.model.module=this.module,this.model.initializeModel(),this.parentSubscription=this.activitiytimeline.parent.data$.subscribe((t=>{t.id==this.model.getField("parent_id")&&this.model.setField("parent_name",t.summary_text)})),this.view.isEditable=!0,this.view.setEditMode(),this.headerFieldSet=this.componentconfig.headerfieldset,this.bodyFieldSet=this.componentconfig.bodyfieldset,this.componentconfig.utilitybuttonsposition&&(this.utilityButtonsPosition=this.componentconfig.utilitybuttonsposition),this.checkCanExpand(),this.checkCanDock()}ngOnDestroy(){this.parentSubscription&&this.parentSubscription.unsubscribe()}get module(){return this.componentconfig.module}get actionset(){return this.componentconfig.actionset}get allowattachments(){return!0===this.componentconfig.allowattachments}initializeModule(){this.model.module=this.module,this.model.id=void 0,this.model.initializeModel(this.activitiytimeline.parent)}onHeaderClick(){this.isExpanded||(this.isExpanded=!0,this.initializeModule(),this.model.startEdit(!1))}checkCanExpand(){this.canExpand=!_.isEmpty(this.metadata.getComponentConfig("GlobalDockedComposerModal",this.model.module))}expand(){this.dockedComposer.addComposer(this.model.module,this.model,!0),this.isExpanded=!1,this.initializeModule()}checkCanDock(){this.canDock=!_.isEmpty(this.metadata.getComponentConfig("GlobalDockedComposer",this.model.module))}dock(){this.dockedComposer.addComposer(this.model.module,this.model),this.isExpanded=!1,this.initializeModule()}cancel(){this.model.cancelEdit(),this.isExpanded=!1,this.initializeModule()}handleaction(t){this.initializeModule(),this.view.setEditMode(),this.isExpanded=!1}}return t=ActivityTimelineAddItem,(0,s.Z)(ActivityTimelineAddItem,"ɵfac",(function(e){return new(e||t)(m.Y36(x.Pu),m.Y36(_e),m.Y36(g.o),m.Y36(y.e),m.Y36(v.d),m.Y36(H.o),m.Y36(Vi.m),m.Y36(m.s_b))})),(0,s.Z)(ActivityTimelineAddItem,"ɵcmp",m.Xpm({type:t,selectors:[["activitytimeline-add-item"]],features:[m._Bn([g.o,y.e])],decls:5,vars:3,consts:[[1,""],["class","slds-p-horizontal--xx-small slds-float_right",4,"ngIf"],[1,"slds-p-horizontal--xx-small",3,"click"],[3,"fieldset"],["class","slds-p-horizontal--xx-small",4,"ngIf"],[1,"slds-p-horizontal--xx-small","slds-float_right"],[1,"slds-button","slds-button_icon",3,"title","click"],["icon","close","size","medium"],[1,"slds-assistive-text"],["label","LBL_CANCEL"],[1,"slds-button","slds-button_icon",3,"disabled","title","click"],["icon","expand"],["label","LBL_EXPAND"],["icon","dock_panel"],["label","LBL_DOCK"],[1,"slds-p-horizontal--xx-small"],[3,"fieldset","direction"],["component","SpiceAttachmentsPanel",4,"ngIf"],[1,"slds-p-vertical--x-small","slds-grid"],["class","slds-button-group","role","group",4,"ngIf"],[1,"slds-col--bump-left","slds-grid","slds-grid--vertical-align-center"],["side","right"],[3,"actionset","actionemitter"],["component","SpiceAttachmentsPanel"],["role","group",1,"slds-button-group"],[1,"slds-button","slds-button--icon-border","slds-button--neutral",3,"title","click"],["icon","close"],["class","slds-button slds-button--icon-border slds-button--neutral",3,"disabled","title","click",4,"ngIf"],[1,"slds-button","slds-button--icon-border","slds-button--neutral",3,"disabled","title","click"]],template:function(t,e){1&t&&(m.TgZ(0,"div",0),m.YNc(1,Xi,13,5,"div",1),m.TgZ(2,"div",2),m.NdJ("click",(function(){return e.onHeaderClick()})),m._UZ(3,"object-record-fieldset",3),m.qZA(),m.YNc(4,ss,8,5,"div",4),m.qZA()),2&t&&(m.xp6(1),m.Q6J("ngIf",e.isExpanded&&"top"==e.utilityButtonsPosition),m.xp6(2),m.Q6J("fieldset",e.headerFieldSet),m.xp6(1),m.Q6J("ngIf",e.isExpanded))},dependencies:[n.O5,nt.S,Si.d,$i.Z,G.J,He.T,E._],encapsulation:2})),ActivityTimelineAddItem})();var ls=i(4021);function os(t,e){if(1&t){const t=m.EpF();m.ynx(0),m._UZ(1,"object-record-fieldset",4)(2,"system-dynamic-component",5),m.TgZ(3,"div",6)(4,"div",7)(5,"button",8),m.NdJ("click",(function(){m.CHM(t);const e=m.oxw();return m.KtG(e.cancel())})),m._UZ(6,"system-button-icon",9),m.TgZ(7,"span",10),m._UZ(8,"system-label",11),m.qZA()(),m.TgZ(9,"button",8),m.NdJ("click",(function(){m.CHM(t);const e=m.oxw();return m.KtG(e.expand())})),m._UZ(10,"system-button-icon",12),m.TgZ(11,"span",10),m._UZ(12,"system-label",13),m.qZA()(),m.TgZ(13,"button",8),m.NdJ("click",(function(){m.CHM(t);const e=m.oxw();return m.KtG(e.dock())})),m._UZ(14,"system-button-icon",14),m.TgZ(15,"span",10),m._UZ(16,"system-label",15),m.qZA()()(),m.TgZ(17,"div",16),m._UZ(18,"object-record-messages-badge",17),m.TgZ(19,"button",18),m.NdJ("click",(function(){m.CHM(t);const e=m.oxw();return m.KtG(e.send())})),m._UZ(20,"system-label",19),m.qZA()()(),m.BQk()}if(2&t){const t=m.oxw();m.xp6(1),m.Q6J("fieldset",t.formFieldSet)("direction","vertical"),m.xp6(4),m.Q6J("title",t.language.getLabel("LBL_CANCEL")),m.xp6(4),m.Q6J("title",t.language.getLabel("LBL_EXPAND")),m.xp6(4),m.Q6J("title",t.language.getLabel("LBL_DOCK")),m.xp6(6),m.Q6J("disabled",!t.canSend)}}let as=(()=>{var t;class ActivityTimelineAddEmail extends ns{constructor(t,e,i,n,l,o,a,d,c,r){super(t,e,i,n,l,o,a,d),(0,s.Z)(this,"metadata",void 0),(0,s.Z)(this,"activitiytimeline",void 0),(0,s.Z)(this,"model",void 0),(0,s.Z)(this,"view",void 0),(0,s.Z)(this,"language",void 0),(0,s.Z)(this,"modal",void 0),(0,s.Z)(this,"dockedComposer",void 0),(0,s.Z)(this,"ViewContainerRef",void 0),(0,s.Z)(this,"backend",void 0),(0,s.Z)(this,"session",void 0),(0,s.Z)(this,"formFields",[]),(0,s.Z)(this,"formFieldSet",""),(0,s.Z)(this,"headerFieldSet",""),this.metadata=t,this.activitiytimeline=e,this.model=i,this.view=n,this.language=l,this.modal=o,this.dockedComposer=a,this.ViewContainerRef=d,this.backend=c,this.session=r}get canSend(){let t=this.model.getField("recipient_addresses");return!!t&&t.some((t=>"to"==t.address_type))}ngOnInit(){this.model.module="Emails",this.setEditMode(),this.subscribeParent(),this.getFieldsetFields()}initializeEmail(){this.model.id=this.model.generateGuid(),this.model.initializeModel(),this.model.startEdit(),this.model.setFields({parent_type:this.activitiytimeline.parent.module,parent_id:this.activitiytimeline.parent.id,parent_name:this.activitiytimeline.parent.getField("summary_text"),type:"out",status:"created",recipient_addresses:[],from_addr_name:this.session.authData.email})}onHeaderClick(){this.isExpanded||(this.isExpanded=!0,this.initializeEmail(),this.model.startEdit(!1))}subscribeParent(){this.activitiytimeline.parent.data$.subscribe((t=>{0==this.model.getField("recipient_addresses")?.length&&this.determineRecipientAddress(),t.id==this.model.getField("parent_id")&&this.model.setField("parent_name",t.summary_text)}))}setEditMode(){this.view.isEditable=!0,this.view.setEditMode()}getFieldsetFields(){let t=this.metadata.getComponentConfig("ActivityTimelineAddEmail",this.model.module);this.formFieldSet=t.fieldset,this.headerFieldSet=t.headerfieldset,this.formFields=this.metadata.getFieldSetItems(t.fieldset)}onFocus(){this.isExpanded||(this.isExpanded=!0,this.initializeEmail(),this.determineRecipientAddress(),this.setEditMode())}determineRecipientAddress(){this.activitiytimeline.parent.getField("email1")&&this.model.setField("recipient_addresses",[{parent_type:this.activitiytimeline.parent.module,parent_id:this.activitiytimeline.parent.id,email_address:this.activitiytimeline.parent.getField("email1"),id:this.model.generateGuid(),address_type:"to"}])}send(){this.canSend&&(this.model.getField("name")||this.model.getField("body")?this.save():this.modal.prompt("confirm",this.language.getLabel("LBL_EMAIL_SEND_EMPTY",null,"long"),this.language.getLabel("LBL_EMAIL_SEND_EMPTY")).subscribe((t=>{t&&this.save()})))}save(){this.model.setField("to_be_sent",!0),this.model.save().subscribe((()=>{this.isExpanded=!1,this.model.setField("to_be_sent",!1),this.initializeEmail(),this.determineRecipientAddress(),this.model.endEdit()}))}}return t=ActivityTimelineAddEmail,(0,s.Z)(ActivityTimelineAddEmail,"ɵfac",(function(e){return new(e||t)(m.Y36(x.Pu),m.Y36(_e),m.Y36(g.o),m.Y36(y.e),m.Y36(v.d),m.Y36(H.o),m.Y36(Vi.m),m.Y36(m.s_b),m.Y36(ue.y),m.Y36(me.n))})),(0,s.Z)(ActivityTimelineAddEmail,"ɵcmp",m.Xpm({type:t,selectors:[["activitytimeline-add-email"]],features:[m._Bn([g.o,y.e]),m.qOj],decls:4,vars:3,consts:[[1,"slds-p-around--xx-small",3,"system-overlay-loading-spinner"],[3,"click"],[3,"fieldset"],[4,"ngIf"],[3,"fieldset","direction"],["component","SpiceAttachmentsPanel"],[1,"slds-p-vertical--x-small","slds-grid"],["role","group",1,"slds-button-group"],[1,"slds-button","slds-button--neutral",3,"title","click"],["icon","close"],[1,"slds-assistive-text"],["label","LBL_CANCEL"],["icon","expand"],["label","LBL_EXPAND"],["icon","dock_panel"],["label","LBL_DOCK"],[1,"slds-col--bump-left","slds-grid","slds-grid--vertical-align-center"],["side","right"],[1,"slds-button","slds-button--brand",".slds-button-space-left","slds-float--right",3,"disabled","click"],["label","LBL_SEND"]],template:function(t,e){1&t&&(m.TgZ(0,"div",0)(1,"div",1),m.NdJ("click",(function(){return e.onHeaderClick()})),m._UZ(2,"object-record-fieldset",2),m.qZA(),m.YNc(3,os,21,6,"ng-container",3),m.qZA()),2&t&&(m.Q6J("system-overlay-loading-spinner",e.model.isSaving),m.xp6(2),m.Q6J("fieldset",e.headerFieldSet),m.xp6(1),m.Q6J("ngIf",e.isExpanded))},dependencies:[n.O5,Si.d,$i.Z,G.J,He.T,E._,ls._],encapsulation:2})),ActivityTimelineAddEmail})();const ds=["detailContainer"];let cs=(()=>{var t;class ActivityTimelineSummaryItemView{constructor(t,e,i,n,l,o){(0,s.Z)(this,"metadata",void 0),(0,s.Z)(this,"parent",void 0),(0,s.Z)(this,"model",void 0),(0,s.Z)(this,"language",void 0),(0,s.Z)(this,"activitiytimeline",void 0),(0,s.Z)(this,"activatedRoute",void 0),(0,s.Z)(this,"detailContainer",void 0),(0,s.Z)(this,"module",void 0),(0,s.Z)(this,"id",void 0),(0,s.Z)(this,"data",void 0),(0,s.Z)(this,"componentRefs",[]),this.metadata=t,this.parent=e,this.model=i,this.language=n,this.activitiytimeline=l,this.activatedRoute=o}ngOnChanges(){this.model.module=this.module,this.model.id=this.id,this.model.setData(this.data,!1);for(let t of this.componentRefs)t.destroy();let t=this.metadata.getComponentConfig("ActivityTimelineSummary",this.module);if(t&&t.componentsets)for(let e of t.componentsets)for(let t of this.metadata.getComponentSetObjects(e))this.metadata.addComponent(t.component,this.detailContainer).subscribe((e=>{e.instance.componentconfig=t.componentconfig,this.componentRefs.push(e)}))}}return t=ActivityTimelineSummaryItemView,(0,s.Z)(ActivityTimelineSummaryItemView,"ɵfac",(function(e){return new(e||t)(m.Y36(x.Pu),m.Y36(g.o),m.Y36(g.o),m.Y36(v.d),m.Y36(_e),m.Y36(it.gz))})),(0,s.Z)(ActivityTimelineSummaryItemView,"ɵcmp",m.Xpm({type:t,selectors:[["activity-timeline-summary-item-view"]],viewQuery:function(t,e){if(1&t&&m.Gf(ds,7,m.s_b),2&t){let t;m.iGM(t=m.CRH())&&(e.detailContainer=t.first)}},inputs:{module:"module",id:"id",data:"data"},features:[m._Bn([g.o]),m.TTD],decls:14,vars:3,consts:[[1,"slds-border_bottom","slds-p-around--medium","slds-theme--shade"],[1,"slds-grid"],[1,"slds-col","slds-has-flexi-truncate"],[1,"slds-media","slds-no-space","slds-grow"],[3,"module"],[1,"slds-media__body"],[1,"slds-text-title--caps","slds-line-height--reset"],[1,"slds-page-header__title","slds-m-right--small","slds-align-middle","slds-truncate"],[1,"slds-p-around--xx-small"],["detailContainer",""]],template:function(t,e){1&t&&(m.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),m._UZ(4,"system-icon",4),m.TgZ(5,"div",5)(6,"p",6),m._UZ(7,"system-label-modulename",4),m.qZA(),m.TgZ(8,"div")(9,"h1",7),m._uU(10),m.qZA()()()()()()(),m.TgZ(11,"div",8),m._UZ(12,"div",null,9),m.qZA()),2&t&&(m.xp6(4),m.Q6J("module",e.model.module),m.xp6(3),m.Q6J("module",e.model.module),m.xp6(3),m.hij(" ",e.model.data.name,""))},dependencies:[zt.f,ee.M],encapsulation:2})),ActivityTimelineSummaryItemView})();function rs(t,e){if(1&t){const t=m.EpF();m.TgZ(0,"li",3),m.NdJ("click",(function(){const e=m.CHM(t).$implicit,i=m.oxw();return m.KtG(i.toggleModuleFilter(e.module))})),m.TgZ(1,"div",4),m._UZ(2,"system-icon",5),m.qZA(),m.TgZ(3,"div",4),m._uU(4),m.qZA(),m.TgZ(5,"div"),m._UZ(6,"system-label-modulename",6),m.qZA()()}if(2&t){const t=e.$implicit,i=m.oxw();m.Q6J("ngStyle",i.getElementStyle(t.module)),m.xp6(2),m.Q6J("title",i.language.getModuleName(t.module))("module",t.module),m.xp6(2),m.hij(" ",t.count," "),m.xp6(2),m.Q6J("module",t.module)("singular",1==t.count)}}function ms(t,e){if(1&t&&(m.TgZ(0,"li",7)(1,"div",4),m._uU(2),m.qZA(),m.TgZ(3,"div"),m._uU(4),m.qZA()()),2&t){const t=e.$implicit;m.xp6(2),m.hij(" ",t.year,": "),m.xp6(2),m.hij(" ",t.count," ")}}let us=(()=>{var t;class ActivityTimelineSummaryAggregates extends Oe{}return t=ActivityTimelineSummaryAggregates,(0,s.Z)(ActivityTimelineSummaryAggregates,"ɵfac",function(){let e;return function(i){return(e||(e=m.n5z(t)))(i||t)}}()),(0,s.Z)(ActivityTimelineSummaryAggregates,"ɵcmp",m.Xpm({type:t,selectors:[["activity-timeline-summary-aggregates"]],features:[m.qOj],decls:3,vars:2,consts:[[1,"slds-list_horizontal","slds-has-dividers_right"],["class","slds-item slds-grid slds-grid--vertical-align-center",3,"ngStyle","click",4,"ngFor","ngForOf"],["class","slds-item slds-grid slds-grid--vertical-align-center",4,"ngFor","ngForOf"],[1,"slds-item","slds-grid","slds-grid--vertical-align-center",3,"ngStyle","click"],[1,"slds-p-right--xxx-small"],["size","xx-small","divClass","slds-align--absolute-center",3,"title","module"],[3,"module","singular"],[1,"slds-item","slds-grid","slds-grid--vertical-align-center"]],template:function(t,e){1&t&&(m.TgZ(0,"ul",0),m.YNc(1,rs,7,6,"li",1),m.YNc(2,ms,5,2,"li",2),m.qZA()),2&t&&(m.xp6(1),m.Q6J("ngForOf",e.moduleaggregates),m.xp6(1),m.Q6J("ngForOf",e.yearaggregates))},dependencies:[n.sg,n.PC,zt.f,ee.M],encapsulation:2})),ActivityTimelineSummaryAggregates})();const hs=["listContainer"];function gs(t,e){if(1&t){const t=m.EpF();m.TgZ(0,"system-input-delayed",24),m.NdJ("ngModelChange",(function(e){m.CHM(t);const i=m.oxw();return m.KtG(i.searchterm=e)})),m.qZA()}if(2&t){const t=m.oxw();m.Q6J("ngModel",t.searchterm)}}const ps=function(t){return{"slds-theme--default slds-border--bottom slds-border--top":t}};function fs(t,e){if(1&t){const t=m.EpF();m.TgZ(0,"li",25),m.NdJ("click",(function(){const e=m.CHM(t).$implicit,i=m.oxw();return m.KtG(i.setActivitiy(e))})),m._UZ(1,"activitytimeline-item-container",26),m.qZA()}if(2&t){const t=e.$implicit,i=m.oxw();m.Q6J("ngClass",m.VKq(2,ps,t.id==i.activityid)),m.xp6(1),m.Q6J("activity",t)}}function vs(t,e){1&t&&(m.TgZ(0,"ul",27)(1,"li",28),m._UZ(2,"activitytimeline-stencil"),m.qZA(),m.TgZ(3,"li",29),m._UZ(4,"activitytimeline-stencil"),m.qZA(),m.TgZ(5,"li",30),m._UZ(6,"activitytimeline-stencil"),m.qZA(),m.TgZ(7,"li",31),m._UZ(8,"activitytimeline-stencil"),m.qZA(),m.TgZ(9,"li",32),m._UZ(10,"activitytimeline-stencil"),m.qZA()())}function Zs(t,e){if(1&t&&m._UZ(0,"activity-timeline-summary-item-view",35),2&t){const t=m.oxw(2);m.Q6J("module",t.activitymodule)("id",t.activityid)("data",t.activitydata)}}function bs(t,e){if(1&t&&(m.TgZ(0,"div",33),m.YNc(1,Zs,1,3,"activity-timeline-summary-item-view",34),m.qZA()),2&t){const t=m.oxw();m.xp6(1),m.Q6J("ngIf",t.activitymodule)}}const ys=function(t){return{"slds-hide":t}};let xs=(()=>{var t;class ActivityTimelineSummary{constructor(t,e,i,n,l,o){(0,s.Z)(this,"metadata",void 0),(0,s.Z)(this,"parent",void 0),(0,s.Z)(this,"language",void 0),(0,s.Z)(this,"activitiytimeline",void 0),(0,s.Z)(this,"navigationtab",void 0),(0,s.Z)(this,"layout",void 0),(0,s.Z)(this,"listContainer",void 0),(0,s.Z)(this,"activitymodule",void 0),(0,s.Z)(this,"activityid",void 0),(0,s.Z)(this,"activitydata",void 0),(0,s.Z)(this,"subscription",void 0),(0,s.Z)(this,"componentconfig",void 0),this.metadata=t,this.parent=e,this.language=i,this.activitiytimeline=n,this.navigationtab=l,this.layout=o,this.componentconfig=this.metadata.getComponentConfig("ActivityTimelineSummary"),this.componentconfig.usefts&&(this.activitiytimeline.usefts=!0),this.subscription=this.activitiytimeline.loading$.subscribe((t=>this.clearActivitiy()))}ngOnInit(){this.initialize(this.navigationtab.activeRoute.params)}ngOnDestroy(){this.subscription.unsubscribe()}get activities(){return this.activitiytimeline.activities.History.list}get displayDetailsPane(){return"small"!=this.layout.screenwidth}get searchterm(){return this.activitiytimeline.filters.searchterm}set searchterm(t){this.activitiytimeline.filters.searchterm=t,this.activitiytimeline.reload()}reload(){this.activitiytimeline.reload()}initialize(t){this.parent.module=t.module,this.parent.id=t.id,this.parent.getData(!0,"",!0).subscribe((t=>{this.navigationtab.setTabInfo({displayname:this.parent.getField("summary_text")+" • "+this.language.getModuleName("History"),displaymodule:"History"})})),this.activitiytimeline.parent=this.parent,this.activitiytimeline.defaultLimit=25,this.activitiytimeline.modules=["History"],this.activitiytimeline.reload()}onScroll(t){let e=this.listContainer.element.nativeElement;e.scrollTop+e.clientHeight+50>e.scrollHeight&&this.activitiytimeline.canLoadMore("History")&&this.activitiytimeline.getMoreTimeLineData("History",20)}setActivitiy(t){this.activitymodule=t.module,this.activityid=t.id,this.activitydata=t.data}clearActivitiy(){this.activitymodule="",this.activityid="",this.activitydata=""}goModel(){this.parent.goDetail()}goModule(){this.parent.goModule()}}return t=ActivityTimelineSummary,(0,s.Z)(ActivityTimelineSummary,"ɵfac",(function(e){return new(e||t)(m.Y36(x.Pu),m.Y36(g.o),m.Y36(v.d),m.Y36(_e),m.Y36(Te.d),m.Y36(Ae.b))})),(0,s.Z)(ActivityTimelineSummary,"ɵcmp",m.Xpm({type:t,selectors:[["ng-component"]],viewQuery:function(t,e){if(1&t&&m.Gf(hs,7,m.s_b),2&t){let t;m.iGM(t=m.CRH())&&(e.listContainer=t.first)}},features:[m._Bn([_e,g.o])],decls:31,vars:10,consts:[[1,"slds-page-header","slds-grid","slds-grid--align-spread"],[1,"slds-col"],["role","navigation","aria-label","Breadcrumbs"],[1,"slds-breadcrumb","slds-list_horizontal","slds-wrap"],[1,"slds-breadcrumb__item","slds-text-title_caps"],["href","javascript:void(0);",3,"click"],[3,"module"],[1,"slds-p-horizontal--x-small"],[1,"slds-col","slds-align-bottom","slds-p-top--xxx-small"],["module","History"],[1,"slds-page-header__col-actions","slds-grid"],["delay","1000",3,"ngModel","ngModelChange",4,"ngIf"],[1,"slds-page-header__controls"],[1,"slds-page-header__control"],[1,"slds-align--absolute-center","slds-button","slds-button--icon","slds-button--icon-border-filled"],[1,"slds-button","slds-button--icon","slds-button--icon-border-filled"],["icon","refresh",3,"click"],[1,"slds-grid"],["system-to-bottom","",1,"slds-size--1-of-1","slds-medium-size--1-of-3","slds-border--right","slds-scrollable",3,"scroll"],["listContainer",""],[1,"slds-timeline",3,"ngClass"],["class","slds-p-around--x-small",3,"ngClass","click",4,"ngFor","ngForOf"],["class","slds-timeline",4,"ngIf"],["class","slds-size--2-of-3","system-to-bottom","",4,"ngIf"],["delay","1000",3,"ngModel","ngModelChange"],[1,"slds-p-around--x-small",3,"ngClass","click"],[3,"activity"],[1,"slds-timeline"],[1,"slds-p-around--x-small"],[1,"slds-p-around--x-small",2,"opacity","0.8"],[1,"slds-p-around--x-small",2,"opacity","0.6"],[1,"slds-p-around--x-small",2,"opacity","0.4"],[1,"slds-p-around--x-small",2,"opacity","0.2"],["system-to-bottom","",1,"slds-size--2-of-3"],[3,"module","id","data",4,"ngIf"],[3,"module","id","data"]],template:function(t,e){1&t&&(m.TgZ(0,"div",0)(1,"div",1)(2,"nav",2)(3,"ol",3)(4,"li",4)(5,"a",5),m.NdJ("click",(function(){return e.goModule()})),m._UZ(6,"system-label-modulename",6),m.qZA()(),m.TgZ(7,"li",4)(8,"a",5),m.NdJ("click",(function(){return e.goModel()})),m._uU(9),m.qZA()(),m.TgZ(10,"li",4)(11,"span",7),m._UZ(12,"system-label-modulename",6),m.qZA()()()(),m.TgZ(13,"div",8),m._UZ(14,"activity-timeline-summary-aggregates",9),m.qZA()(),m.TgZ(15,"div",10),m.YNc(16,gs,1,1,"system-input-delayed",11),m.TgZ(17,"div",12)(18,"div",13),m._UZ(19,"activity-timeline-filter",14),m.qZA()(),m.TgZ(20,"div",12)(21,"div",13)(22,"button",15)(23,"system-button-icon",16),m.NdJ("click",(function(){return e.reload()})),m.qZA()()()()()(),m.TgZ(24,"div",17)(25,"div",18,19),m.NdJ("scroll",(function(t){return e.onScroll(t)})),m.TgZ(27,"ul",20),m.YNc(28,fs,2,4,"li",21),m.qZA(),m.YNc(29,vs,11,0,"ul",22),m.qZA(),m.YNc(30,bs,2,1,"div",23),m.qZA()),2&t&&(m.xp6(6),m.Q6J("module",e.parent.module),m.xp6(3),m.Oqu(e.parent.data.summary_text),m.xp6(3),m.Q6J("module","History"),m.xp6(4),m.Q6J("ngIf",e.componentconfig.usefts),m.xp6(11),m.Q6J("ngClass",m.VKq(8,ys,e.activitiytimeline.activities.History.loading)),m.xp6(1),m.Q6J("ngForOf",e.activities),m.xp6(1),m.Q6J("ngIf",e.activitiytimeline.activities.History.loading),m.xp6(1),m.Q6J("ngIf",e.displayDetailsPane))},dependencies:[n.mk,n.sg,n.O5,l.JJ,l.On,G.J,ke.y,ee.M,b.H,Fe,Ee.d,Ne.g,cs,us],encapsulation:2})),ActivityTimelineSummary})();var _s=i(6822),As=i(2006);function Ts(t,e){if(1&t&&m._UZ(0,"field-label",3),2&t){const t=m.oxw();m.Q6J("fieldname",t.fieldname)("fieldconfig",t.fieldconfig)}}function ks(t,e){if(1&t&&(m.TgZ(0,"field-generic-display",4),m._uU(1),m.qZA()),2&t){const t=m.oxw();m.Q6J("fielddisplayclass",t.fielddisplayclass)("editable",t.isEditable())("fieldconfig",t.fieldconfig),m.xp6(1),m.hij(" ",t.cachedValue.formatted,"\n")}}function Cs(t,e){if(1&t){const t=m.EpF();m.TgZ(0,"div",5)(1,"div",6)(2,"system-input-date",7),m.NdJ("ngModelChange",(function(e){m.CHM(t);const i=m.oxw();return m.KtG(i.value=e)})),m.qZA(),m.TgZ(3,"system-input-time",8),m.NdJ("ngModelChange",(function(e){m.CHM(t);const i=m.oxw();return m.KtG(i.value=e)})),m.qZA()(),m._UZ(4,"field-messages",9),m.qZA()}if(2&t){const t=m.oxw();m.Q6J("ngClass",t.css_classes),m.xp6(2),m.Q6J("ngModel",t.value),m.xp6(1),m.Q6J("ngModel",t.value),m.xp6(1),m.Q6J("fieldname",t.fieldname)}}let ws=(()=>{var t;class fieldActivityDate extends kt.O{constructor(t,e,i,n,l,o,a,d,c,r){super(t,e,n,l,o),(0,s.Z)(this,"model",void 0),(0,s.Z)(this,"view",void 0),(0,s.Z)(this,"broadcast",void 0),(0,s.Z)(this,"language",void 0),(0,s.Z)(this,"metadata",void 0),(0,s.Z)(this,"router",void 0),(0,s.Z)(this,"elementRef",void 0),(0,s.Z)(this,"renderer",void 0),(0,s.Z)(this,"modal",void 0),(0,s.Z)(this,"userpreferences",void 0),(0,s.Z)(this,"cachedValue",void 0),this.model=t,this.view=e,this.broadcast=i,this.language=n,this.metadata=l,this.router=o,this.elementRef=a,this.renderer=d,this.modal=c,this.userpreferences=r,this.subscribeToDataChange()}ngOnInit(){super.ngOnInit(),this.setFormattedValue()}subscribeToDataChange(){this.subscriptions.add(this.model.data$.subscribe((t=>{t[this.fieldname]&&!moment(this.cachedValue?.raw).isSame(t[this.fieldname])&&this.setFormattedValue()})))}setFormattedValue(){if(!this.value)return;this.cachedValue={raw:this.value};const t=new moment(this.value),e=moment(t.format("YYYY M D")).isSame((new moment).format("YYYY M D")),i=t.isSame(new moment,"year");this.cachedValue.formatted=e?t.format(this.userpreferences.getTimeFormat()):i?t.format("MMM D"):t.format(this.userpreferences.getDateFormat())}}return t=fieldActivityDate,(0,s.Z)(fieldActivityDate,"ɵfac",(function(e){return new(e||t)(m.Y36(g.o),m.Y36(y.e),m.Y36(u.f),m.Y36(v.d),m.Y36(x.Pu),m.Y36(it.F0),m.Y36(m.SBq),m.Y36(m.Qsj),m.Y36(H.o),m.Y36(Et.z))})),(0,s.Z)(fieldActivityDate,"ɵcmp",m.Xpm({type:t,selectors:[["field-activity-date"]],features:[m.qOj],decls:3,vars:3,consts:[[3,"fieldname","fieldconfig",4,"ngIf"],[3,"fielddisplayclass","editable","fieldconfig",4,"ngIf"],["class","slds-form-element__control slds-p-around--xx-small",3,"ngClass",4,"ngIf"],[3,"fieldname","fieldconfig"],[3,"fielddisplayclass","editable","fieldconfig"],[1,"slds-form-element__control","slds-p-around--xx-small",3,"ngClass"],[1,"slds-grid"],[1,"slds-size--1-of-2","slds-p-right--xxx-small",3,"ngModel","ngModelChange"],[1,"slds-size--1-of-2","slds-p-left--xxx-small",3,"ngModel","ngModelChange"],[3,"fieldname"]],template:function(t,e){1&t&&(m.YNc(0,Ts,1,2,"field-label",0),m.YNc(1,ks,2,4,"field-generic-display",1),m.YNc(2,Cs,5,4,"div",2)),2&t&&(m.Q6J("ngIf",e.displayLabel),m.xp6(1),m.Q6J("ngIf",!e.isEditMode()),m.xp6(1),m.Q6J("ngIf",e.isEditable()&&e.isEditMode()))},dependencies:[n.mk,n.O5,l.JJ,l.On,Ct.q,wt.D,Nt.a,_s.z,As.H],encapsulation:2})),fieldActivityDate})(),Ms=(()=>{var t;class ModuleActivities{}return t=ModuleActivities,(0,s.Z)(ModuleActivities,"ɵfac",(function(e){return new(e||t)})),(0,s.Z)(ModuleActivities,"ɵmod",m.oAB({type:t})),(0,s.Z)(ModuleActivities,"ɵinj",m.cJS({imports:[n.ez,l.u5,o.ObjectFields,a.GlobalComponents,d.ObjectComponents,c.SystemComponents,r.o,ci]})),ModuleActivities})();("undefined"==typeof ngJitMode||ngJitMode)&&m.kYT(Ms,{declarations:[B,S,J,Q,R,z,$,W,mt,gt,bt,ft,Tt,xt,St,re,Dt,Xt,Rt,Vt,ge,pe,Ze,yi,Li,Je,Fe,je,Ee.d,Ki,Ne.g,oi,ns,as,xs,Oe,cs,ai,us,ui,ws],imports:[n.ez,l.u5,o.ObjectFields,a.GlobalComponents,d.ObjectComponents,c.SystemComponents,r.o,ci],exports:[Ee.d,Ne.g]})}}]);