/*!
 * 
 *                     aacService
 *
 *                     release: 2023.02.001
 *
 *                     date: 2023-08-14 15:59:23
 *
 *                     build: 2023.02.001.1692021563445
 *
 */
(self.webpackChunkcore=self.webpackChunkcore||[]).push([["main"],{3629:(e,t,s)=>{"use strict";s.d(t,{N:()=>i});const i={production:!0,buildNumber:"2023.02.001.1692021563445",copyright:"© 2015 -  2023 aac services k.s. All rights reserved."}},4357:(e,t,s)=>{"use strict";s.d(t,{o:()=>A});var i=s(1180),n=s(4755),o=s(1790),l=s(3548),a=s(7763),d=s(5982),r=s(5681),c=s(9573),u=s(4361),h=s(1058),m=s(3194),g=s(8280),p=s(3814),f=s(9774),b=s(4021),v=s(7982),Z=s(151),_=s(3398),y=s(1061),x=s(2242),w=s(4044);let T=(()=>{var e;class SystemCalculatorTriggerDirective{constructor(e,t){(0,i.Z)(this,"modal",void 0),(0,i.Z)(this,"elementRef",void 0),this.modal=e,this.elementRef=t}openCalculator(){this.elementRef.nativeElement.previousSibling&&this.elementRef.nativeElement.previousSibling.tagName in{INPUT:1,TEXTAREA:1}&&this.modal.openModal("SpiceCalculatorModal").subscribe((e=>{e.instance.value=this.elementRef.nativeElement.previousSibling.value,e.instance.trigger=!0,e.instance.value$.subscribe((e=>{isNaN(e)||(this.elementRef.nativeElement.previousSibling.value=e)}))}))}}return e=SystemCalculatorTriggerDirective,(0,i.Z)(SystemCalculatorTriggerDirective,"ɵfac",(function(t){return new(t||e)(x.Y36(w.o),x.Y36(x.SBq))})),(0,i.Z)(SystemCalculatorTriggerDirective,"ɵdir",x.lG2({type:e,selectors:[["","system-calculator-trigger",""]],hostBindings:function(e,t){1&e&&x.NdJ("click",(function(){return t.openCalculator()}))}})),SystemCalculatorTriggerDirective})(),C=(()=>{var e;class SystemStopClickPropagationDirective{onClick(e){e.stopPropagation()}}return e=SystemStopClickPropagationDirective,(0,i.Z)(SystemStopClickPropagationDirective,"ɵfac",(function(t){return new(t||e)})),(0,i.Z)(SystemStopClickPropagationDirective,"ɵdir",x.lG2({type:e,selectors:[["","system-stop-click-propagation",""]],hostBindings:function(e,t){1&e&&x.NdJ("click",(function(e){return t.onClick(e)}))}})),SystemStopClickPropagationDirective})(),A=(()=>{var e;class DirectivesModule{}return e=DirectivesModule,(0,i.Z)(DirectivesModule,"ɵfac",(function(t){return new(t||e)})),(0,i.Z)(DirectivesModule,"ɵmod",x.oAB({type:e})),(0,i.Z)(DirectivesModule,"ɵinj",x.cJS({imports:[n.ez]})),DirectivesModule})();("undefined"==typeof ngJitMode||ngJitMode)&&x.kYT(A,{declarations:[o.g,l.K,a.u,d.m,r.l,c.$,u.w,h.H,m.t,g.t,p.V,f.M,b._,v.h,_.A,Z.S,y.Q,T,C],imports:[n.ez],exports:[o.g,l.K,a.u,d.m,r.l,c.$,u.w,h.H,m.t,g.t,p.V,f.M,b._,v.h,_.A,Z.S,y.Q,T,C]})},5982:(e,t,s)=>{"use strict";s.d(t,{m:()=>o});var i=s(1180),n=s(2242);let o=(()=>{var e;class SystemAutofocusDirective{constructor(e){(0,i.Z)(this,"elementRef",void 0),this.elementRef=e}ngAfterViewInit(){setTimeout((()=>{this.elementRef.nativeElement.tabIndex||(this.elementRef.nativeElement.tabIndex="-1"),this.elementRef.nativeElement.focus()}))}}return e=SystemAutofocusDirective,(0,i.Z)(SystemAutofocusDirective,"ɵfac",(function(t){return new(t||e)(n.Y36(n.SBq))})),(0,i.Z)(SystemAutofocusDirective,"ɵdir",n.lG2({type:e,selectors:[["","system-autofocus",""]]})),SystemAutofocusDirective})()},5681:(e,t,s)=>{"use strict";s.d(t,{l:()=>a});var i=s(1180),n=s(2242),o=s(3917),l=s(6559);let a=(()=>{var e;class SystemDropdownTriggerDirective{constructor(e,t,s,n,o){(0,i.Z)(this,"renderer",void 0),(0,i.Z)(this,"elementRef",void 0),(0,i.Z)(this,"footer",void 0),(0,i.Z)(this,"layout",void 0),(0,i.Z)(this,"cdRef",void 0),(0,i.Z)(this,"dropDownOpen",!1),(0,i.Z)(this,"hasTriggerButton",!1),(0,i.Z)(this,"triggerElementButton",void 0),(0,i.Z)(this,"clickListener",void 0),(0,i.Z)(this,"triggerClickListener",void 0),(0,i.Z)(this,"previousTriggerRect",void 0),(0,i.Z)(this,"dropdownElement",void 0),(0,i.Z)(this,"stickyOnMobile",!1),(0,i.Z)(this,"dropdowntriggerdisabled",!1),(0,i.Z)(this,"scrollHandlerFn",void 0),this.renderer=e,this.elementRef=t,this.footer=s,this.layout=n,this.cdRef=o}get triggerElement(){return this.hasTriggerButton?this.triggerElementButton.nativeElement:this.elementRef.nativeElement}ngOnInit(){this.setDropdownElement()}ngOnDestroy(){this.removeScrollListener(),this.restoreDropdownFromFooter(),this.clickListener&&this.clickListener(),this.triggerClickListener&&this.triggerClickListener()}removeScrollListener(){window.removeEventListener("scroll",this.scrollHandlerFn,{capture:!0})}toggleDropdown(e){if(this.dropdownElement||this.setDropdownElement(),e&&(e.preventDefault(),e.stopPropagation()),this.dropdowntriggerdisabled||!this.dropdownElement)return!1;this.dropDownOpen=!this.dropDownOpen,this.dropDownOpen?(this.moveDropdownToFooter(),this.setDropdownElementPosition(),this.scrollHandlerFn=()=>requestAnimationFrame((()=>this.setDropdownElementPosition())),this.clickListener=this.renderer.listen("document","click",(e=>this.onClick(e))),window.addEventListener("scroll",this.scrollHandlerFn,{capture:!0})):(this.removeScrollListener(),this.restoreDropdownFromFooter(),this.clickListener())}hostClick(e){this.hasTriggerButton||this.toggleDropdown(e)}moveDropdownToFooter(){this.renderer.removeChild(this.elementRef.nativeElement,this.dropdownElement),this.renderer.appendChild(this.footer.footercontainer.element.nativeElement,this.dropdownElement)}restoreDropdownFromFooter(){this.dropdownElement&&this.footer.footercontainer.element.nativeElement.contains(this.dropdownElement)&&(this.renderer.removeChild(this.footer.footercontainer.element.nativeElement,this.dropdownElement),this.renderer.appendChild(this.elementRef.nativeElement,this.dropdownElement))}setDropdownElement(){if(!this.dropdownElement)for(let e of this.elementRef.nativeElement.children)if(e.classList.contains("slds-dropdown")){this.dropdownElement=e;break}}setDropdownElementPosition(){if(this.stickyOnMobile&&"small"==this.layout.screenwidth)return void this.renderer.addClass(this.dropdownElement,"spice-dropdown-mobile");this.renderer.removeClass(this.dropdownElement,"spice-dropdown-mobile");let e=this.triggerElement.getBoundingClientRect();this.previousTriggerRect&&JSON.stringify(this.previousTriggerRect)==JSON.stringify(e)||(this.previousTriggerRect=e,this.renderer.setStyle(this.dropdownElement,"transform","translateX(0)"),this.renderer.setStyle(this.dropdownElement,"z-index","999999"),this.renderer.addClass(this.dropdownElement,"slds-scrollable"),e.bottom>.7*window.innerHeight&&e.bottom+this.dropdownElement.clientHeight>window.innerHeight?(this.renderer.setStyle(this.dropdownElement,"bottom",window.innerHeight-e.top+"px"),this.renderer.setStyle(this.dropdownElement,"top","auto"),this.renderer.setStyle(this.dropdownElement,"max-height",e.top-10+"px")):(this.renderer.setStyle(this.dropdownElement,"top",e.bottom+"px"),this.renderer.setStyle(this.dropdownElement,"bottom","auto"),e.bottom<.7*window.innerHeight&&this.renderer.setStyle(this.dropdownElement,"max-height",window.innerHeight-e.bottom-10+"px")),e.right-this.dropdownElement.clientWidth>10||e.right>.3*window.innerWidth?(this.renderer.setStyle(this.dropdownElement,"right",window.innerWidth-e.right+"px"),this.renderer.setStyle(this.dropdownElement,"left","auto"),this.renderer.setStyle(this.dropdownElement,"max-width",e.left-10+"px")):(this.renderer.setStyle(this.dropdownElement,"left",e.left+"px"),this.renderer.setStyle(this.dropdownElement,"right","auto"),e.right<.7*window.innerWidth&&this.renderer.setStyle(this.dropdownElement,"max-width",window.innerWidth-e.right-10+"px")),this.cdRef.markForCheck())}onClick(e){this.elementRef.nativeElement.contains(e.target)||(this.dropDownOpen=!1,this.removeScrollListener(),this.restoreDropdownFromFooter(),this.clickListener(),this.cdRef.markForCheck())}}return e=SystemDropdownTriggerDirective,(0,i.Z)(SystemDropdownTriggerDirective,"ɵfac",(function(t){return new(t||e)(n.Y36(n.Qsj),n.Y36(n.SBq),n.Y36(o.M),n.Y36(l.b),n.Y36(n.sBO))})),(0,i.Z)(SystemDropdownTriggerDirective,"ɵdir",n.lG2({type:e,selectors:[["","system-dropdown-trigger",""]],hostVars:2,hostBindings:function(e,t){1&e&&n.NdJ("click",(function(e){return t.hostClick(e)})),2&e&&n.ekj("slds-is-open",t.dropDownOpen)},inputs:{stickyOnMobile:"stickyOnMobile",dropdowntriggerdisabled:["system-dropdown-trigger","dropdowntriggerdisabled"]}})),SystemDropdownTriggerDirective})()},9573:(e,t,s)=>{"use strict";s.d(t,{$:()=>l});var i=s(1180),n=s(2242),o=s(5681);let l=(()=>{var e;class SystemDropdownTriggerButtonDirective{constructor(e,t){(0,i.Z)(this,"elementRef",void 0),(0,i.Z)(this,"trigger",void 0),this.elementRef=e,this.trigger=t}ngOnInit(){this.trigger&&(this.trigger.hasTriggerButton=!0,this.trigger.triggerElementButton=this.elementRef)}onClick(e){this.trigger&&this.trigger.toggleDropdown(e)}}return e=SystemDropdownTriggerButtonDirective,(0,i.Z)(SystemDropdownTriggerButtonDirective,"ɵfac",(function(t){return new(t||e)(n.Y36(n.SBq),n.Y36(o.l,9))})),(0,i.Z)(SystemDropdownTriggerButtonDirective,"ɵdir",n.lG2({type:e,selectors:[["","system-dropdown-trigger-button",""]],hostBindings:function(e,t){1&e&&n.NdJ("click",(function(e){return t.onClick(e)}))}})),SystemDropdownTriggerButtonDirective})()},4361:(e,t,s)=>{"use strict";s.d(t,{w:()=>o});var i=s(1180),n=s(2242);let o=(()=>{var e;class SystemDropdownTriggerSimpleDirective{constructor(e,t,s){(0,i.Z)(this,"renderer",void 0),(0,i.Z)(this,"cdRef",void 0),(0,i.Z)(this,"elementRef",void 0),(0,i.Z)(this,"clickListener",void 0),(0,i.Z)(this,"dropdowntriggerdisabled",!1),(0,i.Z)(this,"dropDownOpen",!1),this.renderer=e,this.cdRef=t,this.elementRef=s}openDropdown(e){this.dropdowntriggerdisabled?(this.dropDownOpen=!1,this.clickListener&&this.clickListener(),this.cdRef.detectChanges()):(this.dropDownOpen=!this.dropDownOpen,this.dropDownOpen?(e.preventDefault(),this.clickListener=this.renderer.listen("document","click",(e=>this.onClick(e)))):this.clickListener())}onClick(e){this.elementRef.nativeElement.contains(e.target)||(this.dropDownOpen=!1,this.cdRef.detectChanges(),this.clickListener())}ngOnDestroy(){this.clickListener&&this.clickListener()}}return e=SystemDropdownTriggerSimpleDirective,(0,i.Z)(SystemDropdownTriggerSimpleDirective,"ɵfac",(function(t){return new(t||e)(n.Y36(n.Qsj),n.Y36(n.sBO),n.Y36(n.SBq))})),(0,i.Z)(SystemDropdownTriggerSimpleDirective,"ɵdir",n.lG2({type:e,selectors:[["","system-dropdown-trigger-simple",""]],hostVars:2,hostBindings:function(e,t){1&e&&n.NdJ("click",(function(e){return t.openDropdown(e)})),2&e&&n.ekj("slds-is-open",t.dropDownOpen)},inputs:{dropdowntriggerdisabled:["system-dropdown-trigger-simple","dropdowntriggerdisabled"]}})),SystemDropdownTriggerSimpleDirective})()},9774:(e,t,s)=>{"use strict";s.d(t,{M:()=>l});var i=s(1180),n=s(2242),o=s(5329);let l=(()=>{var e;class SystemDropFile{constructor(e,t,s){(0,i.Z)(this,"renderer",void 0),(0,i.Z)(this,"elementRef",void 0),(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"filesDrop",new n.vpe),(0,i.Z)(this,"dropMessage",void 0),(0,i.Z)(this,"overlayElement",void 0),(0,i.Z)(this,"dragStartListener",void 0),(0,i.Z)(this,"dragEnterListener",void 0),(0,i.Z)(this,"dragOverListener",void 0),(0,i.Z)(this,"dragLeaveListener",void 0),(0,i.Z)(this,"dragEndListener",void 0),(0,i.Z)(this,"dragDropListener",void 0),(0,i.Z)(this,"dragGlobalDropListener",void 0),(0,i.Z)(this,"dragDepth",0),this.renderer=e,this.elementRef=t,this.language=s,this.defineOverlayElement(),this.listenWindowEvents()}ngOnChanges(){this.renderer.setProperty(this.overlayElement,"textContent",this.dropMessage)}ngOnDestroy(){this.removeWindowEventsListeners()}set disabled(e){e?this.removeWindowEventsListeners():this.listenWindowEvents()}removeWindowEventsListeners(){this.dragStartListener&&(this.dragStartListener(),this.dragEnterListener(),this.dragOverListener(),this.dragLeaveListener(),this.dragEndListener(),this.dragDropListener(),this.dragGlobalDropListener())}defineOverlayElement(){this.overlayElement=this.renderer.createElement("div"),this.renderer.setStyle(this.overlayElement,"height","100%"),this.renderer.setStyle(this.overlayElement,"width","100%"),this.renderer.setStyle(this.overlayElement,"top","0"),this.renderer.setStyle(this.overlayElement,"left","0"),this.renderer.setStyle(this.overlayElement,"position","absolute"),this.renderer.setStyle(this.overlayElement,"background","rgba(135,135,135,0.8)"),this.renderer.setStyle(this.overlayElement,"color","#fff"),this.renderer.setStyle(this.overlayElement,"border","dashed 2px #fff"),this.renderer.setProperty(this.overlayElement,"textContent",this.language.getLabel("LBL_DROP_FILES")),this.renderer.addClass(this.overlayElement,"slds-align--absolute-center"),this.renderer.addClass(this.elementRef.nativeElement,"slds-is-relative")}listenWindowEvents(){this.dragStartListener=this.renderer.listen("window","dragstart",(()=>{this.dragDepth=-10})),this.dragEnterListener=this.renderer.listen("window","dragenter",(()=>{this.dragDepth++,1==this.dragDepth&&this.renderer.appendChild(this.elementRef.nativeElement,this.overlayElement)})),this.dragOverListener=this.renderer.listen(this.overlayElement,"dragover",(e=>{e.preventDefault(),e.stopPropagation(),e.dataTransfer.dropEffect="copy"})),this.dragLeaveListener=this.renderer.listen("window","dragleave",(()=>{this.dragDepth--,0==this.dragDepth&&this.renderer.removeChild(this.elementRef.nativeElement,this.overlayElement)})),this.dragEndListener=this.renderer.listen("window","dragend",(()=>{this.dragDepth=0,this.renderer.removeChild(this.elementRef.nativeElement,this.overlayElement)})),this.dragDropListener=this.renderer.listen(this.overlayElement,"drop",(e=>{this.dragDepth=0,e.dataTransfer.files.length>0&&this.filesDrop.emit(e.dataTransfer.files),this.renderer.removeChild(this.elementRef.nativeElement,this.overlayElement)})),this.dragGlobalDropListener=this.renderer.listen("window","drop",(e=>{this.dragDepth=0,this.renderer.removeChild(this.elementRef.nativeElement,this.overlayElement)}))}hasOneItemsFile(e){for(let t of e)if("file"==t.kind)return!0;return!1}}return e=SystemDropFile,(0,i.Z)(SystemDropFile,"ɵfac",(function(t){return new(t||e)(n.Y36(n.Qsj),n.Y36(n.SBq),n.Y36(o.d))})),(0,i.Z)(SystemDropFile,"ɵdir",n.lG2({type:e,selectors:[["","system-drop-file",""]],inputs:{dropMessage:"dropMessage",disabled:"disabled"},outputs:{filesDrop:"system-drop-file"},features:[n.TTD]})),SystemDropFile})()},1790:(e,t,s)=>{"use strict";s.d(t,{g:()=>h});var i=s(1180),n=s(2242),o=s(5710),l=s(4154),a=s(3917),d=s(4044),r=s(7017),c=s(2294),u=s(3348);let h=(()=>{var e;class SystemModelPopOverDirective{constructor(e,t,s,o,l,a,d,r,c,u){(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"footer",void 0),(0,i.Z)(this,"modal",void 0),(0,i.Z)(this,"model",void 0),(0,i.Z)(this,"navigationtab",void 0),(0,i.Z)(this,"popovermodel",void 0),(0,i.Z)(this,"elementRef",void 0),(0,i.Z)(this,"view",void 0),(0,i.Z)(this,"router",void 0),(0,i.Z)(this,"injector",void 0),(0,i.Z)(this,"module",void 0),(0,i.Z)(this,"id",void 0),(0,i.Z)(this,"enablelink",!0),(0,i.Z)(this,"modelPopOver",!0),(0,i.Z)(this,"clicked",new n.vpe),(0,i.Z)(this,"popoverCmp",null),(0,i.Z)(this,"showPopoverTimeout",{}),(0,i.Z)(this,"popoverModelInitialized",!1),this.metadata=e,this.footer=t,this.modal=s,this.model=o,this.navigationtab=l,this.popovermodel=a,this.elementRef=d,this.view=r,this.router=c,this.injector=u}onMouseOver(){!1!==this.modelPopOver&&(this.showPopoverTimeout=window.setTimeout((()=>this.renderPopover()),1e3))}onMouseOut(){this.showPopoverTimeout&&window.clearTimeout(this.showPopoverTimeout),this.popoverCmp&&this.popoverCmp.closePopover()}goRelated(){if(!1===this.modelPopOver||this.disableLink)return!1;if(this.popoverCmp&&this.popoverCmp.closePopover(),this.showPopoverTimeout&&window.clearTimeout(this.showPopoverTimeout),this.model&&(!this.id||this.id&&this.module&&this.model.id==this.id&&this.model.module==this.module))this.model.goDetail(this.navigationtab?.tabid);else if(this.popoverModelInitialized)this.popovermodel.goDetail(this.navigationtab?.tabid);else if(!this.popovermodel.isLoading){let e=this.modal.await("LBL_LOADING");this.popovermodel.getData(!0).subscribe({next:t=>{this.popovermodel.goDetail(this.navigationtab?.tabid),e.emit(!0)},error:()=>{e.emit(!0)}})}this.clicked.emit(!0)}get disableLink(){return this.view&&!1===this.view.displayLinks||!1===this.enablelink}renderPopover(){this.footer.footercontainer&&(this.popoverModelInitialized||(!this.model||this.model&&this.id&&(this.model.module!=this.module||this.model.id!=this.id)?this.popovermodel.getData().subscribe((()=>{this.popoverModelInitialized=!0})):(this.popovermodel.module=this.model.module,this.popovermodel.id=this.model.id,this.popovermodel.initialize(),this.popovermodel.setData(this.model.data,!1),this.popoverModelInitialized=!0)),this.metadata.addComponent("ObjectModelPopover",this.footer.footercontainer,this.injector).subscribe((e=>{e.instance.parentElementRef=this.elementRef,this.popoverCmp=e.instance})))}ngOnChanges(){this.id&&this.module&&this.id!=this.popovermodel.id&&this.module!=this.popovermodel.module&&(this.popoverModelInitialized=!1,this.popovermodel.initialize(),this.popovermodel.id=this.id,this.popovermodel.module=this.module)}ngOnDestroy(){this.showPopoverTimeout&&window.clearTimeout(this.showPopoverTimeout),this.popoverCmp&&this.popoverCmp.closePopover(!0)}}return e=SystemModelPopOverDirective,(0,i.Z)(SystemModelPopOverDirective,"ɵfac",(function(t){return new(t||e)(n.Y36(l.Pu),n.Y36(a.M),n.Y36(d.o),n.Y36(o.o,12),n.Y36(r.d,8),n.Y36(o.o),n.Y36(n.SBq),n.Y36(c.e,8),n.Y36(u.F0),n.Y36(n.zs3))})),(0,i.Z)(SystemModelPopOverDirective,"ɵdir",n.lG2({type:e,selectors:[["","system-model-popover",""]],hostVars:2,hostBindings:function(e,t){1&e&&n.NdJ("mouseenter",(function(){return t.onMouseOver()}))("mouseleave",(function(){return t.onMouseOut()}))("click",(function(){return t.goRelated()})),2&e&&n.ekj("slds-text-link_faux",!t.disableLink)},inputs:{module:"module",id:"id",enablelink:"enablelink",modelPopOver:["system-model-popover","modelPopOver"]},outputs:{clicked:"clicked"},features:[n._Bn([o.o]),n.TTD]})),SystemModelPopOverDirective})()},7763:(e,t,s)=>{"use strict";s.d(t,{u:()=>a});var i=s(1180),n=s(2242),o=s(5710),l=s(727);let a=(()=>{var e;class SystemModelProviderDirective{constructor(e){(0,i.Z)(this,"model",void 0),(0,i.Z)(this,"data$",new n.vpe),(0,i.Z)(this,"subscription",new l.w0),this.model=e,this.model.isLoading=!0}set provided_model(e){this.model.module=e.module,e.id?this.model.id=e.id:e.data&&(this.model.id=e.data.id),e.data?(this.model.initialize(),this.model.setData(!0===e.clone?{...e.data}:e.data),this.model.isLoading=!1):this.model.id?this.model.getData():this.model.initialize(),this.subscription.add(this.model.data$.subscribe((e=>this.data$.next(e))))}ngOnDestroy(){this.subscription.unsubscribe()}}return e=SystemModelProviderDirective,(0,i.Z)(SystemModelProviderDirective,"ɵfac",(function(t){return new(t||e)(n.Y36(o.o))})),(0,i.Z)(SystemModelProviderDirective,"ɵdir",n.lG2({type:e,selectors:[["","system-model-provider",""]],inputs:{provided_model:["system-model-provider","provided_model"]},outputs:{data$:"data$"},exportAs:["system-model-provider"],features:[n._Bn([o.o])]})),SystemModelProviderDirective})()},1061:(e,t,s)=>{"use strict";s.d(t,{Q:()=>o});var i=s(1180),n=s(2242);let o=(()=>{var e;class SystemMultiSelectCheckboxesDirective{constructor(e){(0,i.Z)(this,"elementRef",void 0),(0,i.Z)(this,"lastChecked",void 0),this.elementRef=e}onClick(e){let t=null;if(e.target.parentElement.classList?.contains("slds-checkbox__label")?t=e.target.parentElement:e.target.parentElement.parentElement?.classList?.contains("slds-checkbox__label")?t=e.target.parentElement.parentElement:e.target.classList.contains("slds-checkbox__label")&&(t=e.target),t){if(document.getSelection().removeAllRanges(),!this.lastChecked)return void(this.lastChecked=t);if(e.shiftKey){let s=this.getAllLabels(),i=s.indexOf(t),n=s.indexOf(this.lastChecked),o=Math.min(i,n),l=Math.max(i,n),a=this.lastChecked.parentElement.getElementsByTagName("input")[0].checked;for(let e=o;e<=l;e++)s[e].parentElement.getElementsByTagName("input")[0].checked=a,s[e].parentElement.getElementsByTagName("input")[0].dispatchEvent(new Event("change"));e.preventDefault()}this.lastChecked=t}}getAllLabels(){let e=[],t=this.elementRef.nativeElement.getElementsByTagName("label");for(let s of t)s.classList.contains("slds-checkbox__label")&&e.push(s);return e}}return e=SystemMultiSelectCheckboxesDirective,(0,i.Z)(SystemMultiSelectCheckboxesDirective,"ɵfac",(function(t){return new(t||e)(n.Y36(n.SBq))})),(0,i.Z)(SystemMultiSelectCheckboxesDirective,"ɵdir",n.lG2({type:e,selectors:[["","system-multi-select-checkboxes",""]],hostBindings:function(e,t){1&e&&n.NdJ("click",(function(e){return t.onClick(e)}))}})),SystemMultiSelectCheckboxesDirective})()},4021:(e,t,s)=>{"use strict";s.d(t,{_:()=>l});var i=s(1180),n=s(2242),o=s(4664);let l=(()=>{var e;class SystemOverlayLoadingSpinnerDirective{constructor(e,t,s){(0,i.Z)(this,"renderer",void 0),(0,i.Z)(this,"appRef",void 0),(0,i.Z)(this,"elementRef",void 0),(0,i.Z)(this,"onCancel",new n.vpe),(0,i.Z)(this,"spinnerRef",void 0),(0,i.Z)(this,"spinnerContainer",document.createElement("div")),(0,i.Z)(this,"cancellable",!1),this.renderer=e,this.appRef=t,this.elementRef=s}set isLoadingChange(e){e?this.renderSpinner():this.destroySpinner()}set cancellableChange(e){this.cancellable=e,this.spinnerRef&&(this.spinnerRef.instance.cancellable=e)}destroySpinner(){this.spinnerRef&&(this.spinnerRef.instance.onCancel$.unsubscribe(),this.spinnerRef.destroy(),this.spinnerRef=void 0,this.renderer.removeChild(this.elementRef.nativeElement,this.spinnerContainer))}renderSpinner(){this.spinnerRef||(this.renderer.appendChild(this.elementRef.nativeElement,this.spinnerContainer),this.spinnerRef=(0,n.LMc)(o.W,{environmentInjector:this.appRef.injector,hostElement:this.spinnerContainer}),this.spinnerRef.instance.asOverlay=!0,this.spinnerRef.instance.cancellable=this.cancellable,this.spinnerRef.instance.onCancel$.subscribe((()=>this.onCancel.emit())),this.appRef.attachView(this.spinnerRef.hostView),this.spinnerRef.changeDetectorRef.detectChanges())}}return e=SystemOverlayLoadingSpinnerDirective,(0,i.Z)(SystemOverlayLoadingSpinnerDirective,"ɵfac",(function(t){return new(t||e)(n.Y36(n.Qsj),n.Y36(n.z2F),n.Y36(n.SBq))})),(0,i.Z)(SystemOverlayLoadingSpinnerDirective,"ɵdir",n.lG2({type:e,selectors:[["","system-overlay-loading-spinner",""]],hostAttrs:[1,"slds-is-relative"],inputs:{isLoadingChange:["system-overlay-loading-spinner","isLoadingChange"],cancellableChange:["cancellable","cancellableChange"]},outputs:{onCancel:"onCancel"}})),SystemOverlayLoadingSpinnerDirective})()},3398:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});var i=s(1180),n=s(727),o=s(2242),l=s(5329);let a=(()=>{var e;class SystemPlaceholderDirective{constructor(e,t){(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"elementRef",void 0),(0,i.Z)(this,"label",void 0),(0,i.Z)(this,"subscription",new n.w0),this.language=e,this.elementRef=t,this.subscribeToCurrentLanguageChange()}ngOnDestroy(){this.subscription.unsubscribe()}ngOnChanges(e){e.label.previousValue!==e.label.currentValue&&e.label.currentValue&&this.setElementTitleAttribute()}subscribeToCurrentLanguageChange(){this.subscription=this.language.currentlanguage$.subscribe((()=>this.setElementTitleAttribute()))}setElementTitleAttribute(){this.label?this.elementRef.nativeElement.setAttribute("placeholder",this.language.getLabel(this.label)):this.elementRef.nativeElement.setAttribute("placeholder","")}}return e=SystemPlaceholderDirective,(0,i.Z)(SystemPlaceholderDirective,"ɵfac",(function(t){return new(t||e)(o.Y36(l.d),o.Y36(o.SBq))})),(0,i.Z)(SystemPlaceholderDirective,"ɵdir",o.lG2({type:e,selectors:[["","system-placeholder",""]],inputs:{label:["system-placeholder","label"]},features:[o.TTD]})),SystemPlaceholderDirective})()},3548:(e,t,s)=>{"use strict";s.d(t,{K:()=>a});var i=s(1180),n=s(2242),o=s(4154),l=s(3917);let a=(()=>{var e;class SystemPopOverDirective{set popoverSettings(e){this._popoverSettings.injector=e.injector,this._popoverSettings.componentset=e.componentset,this._popoverSettings.component=e.component}constructor(e,t,s){(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"footer",void 0),(0,i.Z)(this,"elementRef",void 0),(0,i.Z)(this,"popoverCmp",null),(0,i.Z)(this,"showPopoverTimeout",{}),(0,i.Z)(this,"_popoverSettings",{injector:{},componentset:{},component:""}),this.metadata=e,this.footer=t,this.elementRef=s}onMouseOver(){this.showPopoverTimeout=window.setTimeout((()=>this.renderPopover()),500)}onMouseOut(){this.showPopoverTimeout&&window.clearTimeout(this.showPopoverTimeout),this.popoverCmp&&this.popoverCmp.closePopover()}renderPopover(){this.metadata.addComponent("SystemPopover",this.footer.footercontainer,this._popoverSettings.injector).subscribe((e=>{e.instance.parentElementRef=this.elementRef,e.instance.componentset=this._popoverSettings.componentset,this.popoverCmp=e.instance}))}ngOnDestroy(){this.popoverCmp&&this.popoverCmp.closePopover(!0)}}return e=SystemPopOverDirective,(0,i.Z)(SystemPopOverDirective,"ɵfac",(function(t){return new(t||e)(n.Y36(o.Pu),n.Y36(l.M),n.Y36(n.SBq))})),(0,i.Z)(SystemPopOverDirective,"ɵdir",n.lG2({type:e,selectors:[["","system-pop-over",""]],hostBindings:function(e,t){1&e&&n.NdJ("mouseenter",(function(){return t.onMouseOver()}))("mouseleave",(function(){return t.onMouseOut()}))},inputs:{popoverSettings:["system-pop-over","popoverSettings"]}})),SystemPopOverDirective})()},7982:(e,t,s)=>{"use strict";s.d(t,{h:()=>o});var i=s(1180),n=s(2242);let o=(()=>{var e;class SystemResizeDirective{constructor(e,t){(0,i.Z)(this,"elementRef",void 0),(0,i.Z)(this,"renderer",void 0),(0,i.Z)(this,"resizeid",void 0),(0,i.Z)(this,"resizeemitter",new n.vpe),(0,i.Z)(this,"elementWidth",void 0),(0,i.Z)(this,"elementHeight",void 0),(0,i.Z)(this,"mouseListener",void 0),this.elementRef=e,this.renderer=t}ngOnDestroy(){this.mouseListener&&this.mouseListener()}onMouseDown(e){let t=this.elementRef.nativeElement.getClientRects()[0];this.elementWidth=t.width,this.elementHeight=t.height,this.mouseListener=this.renderer.listen("document","mouseup",(e=>{this.onMouseup()}))}onMouseup(){if(!this.elementWidth||!this.elementWidth)return;let e=this.elementRef.nativeElement.getClientRects()[0];(this.elementWidth&&e.width!=this.elementWidth||this.elementHeight&&e.height!=this.elementHeight)&&this.resizeemitter.emit({width:e.width,height:e.height,id:this.resizeid}),this.elementWidth=void 0,this.elementHeight=void 0,this.mouseListener(),this.mouseListener=void 0}getElementWidth(){return this.elementRef.nativeElement.getClientRects()[0].width}}return e=SystemResizeDirective,(0,i.Z)(SystemResizeDirective,"ɵfac",(function(t){return new(t||e)(n.Y36(n.SBq),n.Y36(n.Qsj))})),(0,i.Z)(SystemResizeDirective,"ɵdir",n.lG2({type:e,selectors:[["","system-resize",""]],hostBindings:function(e,t){1&e&&n.NdJ("mousedown",(function(e){return t.onMouseDown(e)}))},inputs:{resizeid:"resizeid"},outputs:{resizeemitter:"system-resize"}})),SystemResizeDirective})()},151:(e,t,s)=>{"use strict";s.d(t,{S:()=>a});var i=s(1180),n=s(727),o=s(2242),l=s(5329);let a=(()=>{var e;class SystemTitleDirective{constructor(e,t){(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"elementRef",void 0),(0,i.Z)(this,"label",void 0),(0,i.Z)(this,"subscription",new n.w0),this.language=e,this.elementRef=t,this.subscribeToCurrentLanguageChange()}ngOnDestroy(){this.subscription.unsubscribe()}ngOnChanges(e){e.label.previousValue!==e.label.currentValue&&e.label.currentValue&&this.setElementTitleAttribute()}subscribeToCurrentLanguageChange(){this.subscription=this.language.currentlanguage$.subscribe((()=>this.setElementTitleAttribute()))}setElementTitleAttribute(){this.elementRef.nativeElement.setAttribute("title",this.language.getLabel(this.label))}}return e=SystemTitleDirective,(0,i.Z)(SystemTitleDirective,"ɵfac",(function(t){return new(t||e)(o.Y36(l.d),o.Y36(o.SBq))})),(0,i.Z)(SystemTitleDirective,"ɵdir",o.lG2({type:e,selectors:[["","system-title",""]],inputs:{label:["system-title","label"]},features:[o.TTD]})),SystemTitleDirective})()},1058:(e,t,s)=>{"use strict";s.d(t,{H:()=>l});var i=s(1180),n=s(2242),o=s(3917);let l=(()=>{var e;class SystemToBottomDirective{constructor(e,t,s){(0,i.Z)(this,"element",void 0),(0,i.Z)(this,"renderer",void 0),(0,i.Z)(this,"footer",void 0),(0,i.Z)(this,"more",new n.vpe),(0,i.Z)(this,"marginBottom",0),(0,i.Z)(this,"elementClass",!0),this.element=e,this.renderer=t,this.footer=s}ngDoCheck(){let e=this.element.nativeElement.getBoundingClientRect(),t=Math.floor(window.innerHeight-e.top-this.marginBottom-parseInt(getComputedStyle(this.element.nativeElement).marginBottom,10)-parseInt(getComputedStyle(this.element.nativeElement).paddingBottom,10)-this.footer.visibleFooterHeight);this.renderer.setStyle(this.element.nativeElement,"height",t+"px")}onScroll(e){let t=this.element.nativeElement;t.scrollTop+t.clientHeight+50>t.scrollHeight&&this.more.emit(!0)}}return e=SystemToBottomDirective,(0,i.Z)(SystemToBottomDirective,"ɵfac",(function(t){return new(t||e)(n.Y36(n.SBq),n.Y36(n.Qsj),n.Y36(o.M))})),(0,i.Z)(SystemToBottomDirective,"ɵdir",n.lG2({type:e,selectors:[["","system-to-bottom",""]],hostVars:2,hostBindings:function(e,t){1&e&&n.NdJ("scroll",(function(e){return t.onScroll(e)})),2&e&&n.ekj("slds-scrollable--y",t.elementClass)},inputs:{marginBottom:"marginBottom"},outputs:{more:"system-to-bottom"}})),SystemToBottomDirective})()},3194:(e,t,s)=>{"use strict";s.d(t,{t:()=>l});var i=s(1180),n=s(2242),o=s(3917);let l=(()=>{var e;class SystemToBottomNoScrollDirective{constructor(e,t,s){(0,i.Z)(this,"element",void 0),(0,i.Z)(this,"renderer",void 0),(0,i.Z)(this,"footer",void 0),(0,i.Z)(this,"toBottomNoScroll",!0),(0,i.Z)(this,"marginBottom",0),this.element=e,this.renderer=t,this.footer=s}ngDoCheck(){if(!1===this.toBottomNoScroll)return;let e=this.element.nativeElement.getBoundingClientRect(),t=Math.floor(window.innerHeight-e.top-this.marginBottom-parseInt(getComputedStyle(this.element.nativeElement).marginBottom,10)-parseInt(getComputedStyle(this.element.nativeElement).paddingBottom,10)-this.footer.visibleFooterHeight);this.renderer.setStyle(this.element.nativeElement,"height",t+"px")}}return e=SystemToBottomNoScrollDirective,(0,i.Z)(SystemToBottomNoScrollDirective,"ɵfac",(function(t){return new(t||e)(n.Y36(n.SBq),n.Y36(n.Qsj),n.Y36(o.M))})),(0,i.Z)(SystemToBottomNoScrollDirective,"ɵdir",n.lG2({type:e,selectors:[["","system-to-bottom-noscroll",""]],inputs:{toBottomNoScroll:["system-to-bottom-noscroll","toBottomNoScroll"],marginBottom:"marginBottom"}})),SystemToBottomNoScrollDirective})()},8280:(e,t,s)=>{"use strict";s.d(t,{t:()=>o});var i=s(1180),n=s(2242);let o=(()=>{var e;class SystemTrimInputDirective{constructor(){(0,i.Z)(this,"trim",void 0)}getCaret(e){return{start:e.selectionStart,end:e.selectionEnd}}setCaret(e,t,s){e.selectionStart=t,e.selectionEnd=s,e.focus()}dispatchEvent(e,t){const s=document.createEvent("Event");s.initEvent(t,!1,!1),e.dispatchEvent(s)}trimValue(e,t){e.value=t.trim(),this.dispatchEvent(e,"input")}onBlur(e,t){!1===this.trim||this.trim&&"blur"!==this.trim||"function"!=typeof t.trim||t.trim()===t||(this.trimValue(e,t),this.dispatchEvent(e,"blur"))}onInput(e,t){if(!1!==this.trim&&!this.trim&&"function"==typeof t.trim&&t.trim()!==t){let{start:s,end:i}=this.getCaret(e);" "===t[0]&&1===s&&1===i&&(s=0,i=0),this.trimValue(e,t),this.setCaret(e,s,i)}}}return e=SystemTrimInputDirective,(0,i.Z)(SystemTrimInputDirective,"ɵfac",(function(t){return new(t||e)})),(0,i.Z)(SystemTrimInputDirective,"ɵdir",n.lG2({type:e,selectors:[["input","system-trim-input",""],["textarea","system-trim-input",""]],hostBindings:function(e,t){1&e&&n.NdJ("blur",(function(e){return t.onBlur(e.target,e.target.value)}))("input",(function(e){return t.onInput(e.target,e.target.value)}))},inputs:{trim:["system-trim-input","trim"]}})),SystemTrimInputDirective})()},3814:(e,t,s)=>{"use strict";s.d(t,{V:()=>l});var i=s(1180),n=s(2294),o=s(2242);let l=(()=>{var e;class SystemViewProviderDirective{constructor(e,t,s){(0,i.Z)(this,"renderer",void 0),(0,i.Z)(this,"elementRef",void 0),(0,i.Z)(this,"view",void 0),(0,i.Z)(this,"resizeHandler",void 0),this.renderer=e,this.elementRef=t,this.view=s}set viewSettings(e){e.editable&&(this.view.isEditable=!0),!1===e.displayLabels&&(this.view.displayLabels=!1),!1===e.displayLinks&&(this.view.displayLinks=!1)}ngAfterViewInit(){this.setviewSize(),this.resizeHandler=this.renderer.listen("window","resize",(()=>this.setviewSize()))}ngOnDestroy(){this.resizeHandler&&this.resizeHandler()}setviewSize(){this.elementRef.nativeElement.getBoundingClientRect().width<500?this.view.size="small":this.view.size="regular"}}return e=SystemViewProviderDirective,(0,i.Z)(SystemViewProviderDirective,"ɵfac",(function(t){return new(t||e)(o.Y36(o.Qsj),o.Y36(o.SBq),o.Y36(n.e))})),(0,i.Z)(SystemViewProviderDirective,"ɵdir",o.lG2({type:e,selectors:[["","system-view-provider",""]],inputs:{viewSettings:["system-view-provider","viewSettings"]},exportAs:["system-view-provider"],features:[o._Bn([n.e])]})),SystemViewProviderDirective})()},909:(e,t,s)=>{"use strict";s.d(t,{Q:()=>h});var i=s(1180),n=s(2242),o=s(4154),l=s(4044),a=s(5329),d=s(2422),r=s(3348),c=s(4755);function u(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"span",14)(1,"span",15),n.NdJ("click",(function(){n.CHM(e);const t=n.oxw();return n.KtG(t.navigateHome())})),n._uU(2),n.qZA()()}if(2&e){const e=n.oxw();n.xp6(2),n.Oqu(e.roleName)}}let h=(()=>{var e;class GlobalAppLauncher{quickLaunch(e){this.showAppLauncher()}constructor(e,t,s,n,o){(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"modal",void 0),(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"userPreferences",void 0),(0,i.Z)(this,"router",void 0),this.metadata=e,this.modal=t,this.language=s,this.userPreferences=n,this.router=o}get roleName(){let e=this.metadata.getActiveRole();return e.label&&""!=e.label?this.language.getLabel(e.label):this.metadata.getActiveRole().name}showAppLauncher(){this.modal.openModal("GlobalAppLauncherDialog")}navigateHome(){this.router.navigate(["module/Home"])}}return e=GlobalAppLauncher,(0,i.Z)(GlobalAppLauncher,"ɵfac",(function(t){return new(t||e)(n.Y36(o.Pu),n.Y36(l.o),n.Y36(a.d),n.Y36(d.z),n.Y36(r.F0))})),(0,i.Z)(GlobalAppLauncher,"ɵcmp",n.Xpm({type:e,selectors:[["global-app-launcher"]],hostAttrs:[1,"slds-context-bar__primary","slds-context-bar__item--divider-right"],hostBindings:function(e,t){1&e&&n.NdJ("keydown.control.space",(function(){return t.quickLaunch()}),!1,n.evT)},decls:14,vars:1,consts:[[1,"slds-context-bar__item","slds-context-bar__dropdown-trigger","slds-dropdown-trigger","slds-dropdown-trigger--click","slds-no-hover"],[1,"slds-context-bar__icon-action","slds-m-top_small",3,"click"],["href","javascript:void(0);",1,"slds-icon-waffle_container","slds-context-bar__button"],[1,"slds-icon-waffle"],[1,"slds-r1"],[1,"slds-r2"],[1,"slds-r3"],[1,"slds-r4"],[1,"slds-r5"],[1,"slds-r6"],[1,"slds-r7"],[1,"slds-r8"],[1,"slds-r9"],["class","slds-context-bar__label-action slds-context-bar__app-name",4,"ngIf"],[1,"slds-context-bar__label-action","slds-context-bar__app-name"],[1,"slds-truncate","slds-text-link--reset",3,"click"]],template:function(e,t){1&e&&(n.TgZ(0,"div",0)(1,"div",1),n.NdJ("click",(function(){return t.showAppLauncher()})),n.TgZ(2,"a",2)(3,"div",3),n._UZ(4,"div",4)(5,"div",5)(6,"div",6)(7,"div",7)(8,"div",8)(9,"div",9)(10,"div",10)(11,"div",11)(12,"div",12),n.qZA()()(),n.YNc(13,u,3,1,"span",13),n.qZA()),2&e&&(n.xp6(13),n.Q6J("ngIf",!t.userPreferences.toUse.globalHeaderCollapsed))},dependencies:[c.O5],encapsulation:2})),GlobalAppLauncher})()},1977:(e,t,s)=>{"use strict";s.d(t,{M:()=>l});var i=s(1180),n=s(3629),o=s(2242);let l=(()=>{var e;class GlobalCopyright{constructor(){(0,i.Z)(this,"buildNumber",""),(0,i.Z)(this,"copyright",""),this.buildNumber=n.N.buildNumber,this.copyright=n.N.copyright}}return e=GlobalCopyright,(0,i.Z)(GlobalCopyright,"ɵfac",(function(t){return new(t||e)})),(0,i.Z)(GlobalCopyright,"ɵcmp",o.Xpm({type:e,selectors:[["global-copyright"]],decls:9,vars:2,consts:[[1,"slds-align_absolute-center"],["href","https://www.spicecrm.com","target","”_blank”"]],template:function(e,t){1&e&&(o.TgZ(0,"div")(1,"div",0),o._uU(2,"SpiceCRM - "),o.TgZ(3,"a",1),o._uU(4,"www.spicecrm.com"),o.qZA()(),o.TgZ(5,"div",0),o._uU(6),o.qZA(),o.TgZ(7,"div",0),o._uU(8),o.qZA()()),2&e&&(o.xp6(6),o.Oqu(t.copyright),o.xp6(2),o.hij("version ",t.buildNumber,""))},encapsulation:2})),GlobalCopyright})()},4553:(e,t,s)=>{"use strict";s.d(t,{U:()=>Z});var i=s(1180),n=s(2242),o=s(5710),l=s(2294),a=s(4154),d=s(788),r=s(5329),c=s(4044),u=s(4755),h=s(2656),m=s(4561),g=s(8861),p=s(3428);const f=["containercontent"];function b(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"button",9),n.NdJ("click",(function(){n.CHM(e);const t=n.oxw();return n.KtG(t.expand())})),n._UZ(1,"system-button-icon",10),n.qZA()}2&e&&(n.xp6(1),n.Q6J("icon","expand_alt"))}const v=function(e,t){return{"slds-is-closed":e,"slds-is-open":t}};let Z=(()=>{var e;class GlobalDockedComposer{constructor(e,t,s,n,o,l,a){(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"dockedComposer",void 0),(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"model",void 0),(0,i.Z)(this,"view",void 0),(0,i.Z)(this,"modal",void 0),(0,i.Z)(this,"ViewContainerRef",void 0),(0,i.Z)(this,"containercontent",void 0),(0,i.Z)(this,"composerdata",{}),(0,i.Z)(this,"composerindex",void 0),(0,i.Z)(this,"isClosed",!1),(0,i.Z)(this,"actionset",void 0),this.metadata=e,this.dockedComposer=t,this.language=s,this.model=n,this.view=o,this.modal=l,this.ViewContainerRef=a,this.view.isEditable=!0,this.view.setEditMode(),this.model.isEditing=!0,this.model.isGlobal=!0}ngOnInit(){this.model.module=this.composerdata.module,this.model.id=this.composerdata.id,this.composerdata.model.data?this.model.setData(this.composerdata.model.data,!1):this.model.initializeModel(),this.dockedComposer.composers[this.composerindex].model=this.model;let e=this.metadata.getComponentConfig("GlobalDockedComposer",this.model.module);if(e.componentset){let t=this.metadata.getComponentSetObjects(e.componentset);for(let e of t)this.metadata.addComponent("ObjectRecordFieldset",this.containercontent).subscribe((t=>{t.instance.componentconfig=e.componentconfig}))}else e.fieldset&&this.metadata.addComponent("ObjectRecordFieldset",this.containercontent).subscribe((t=>{t.instance.direction="vertical",t.instance.fieldset=e.fieldset}));this.actionset=e.actionset,this.composerdata.loadexpanded&&this.canExpand&&(this.expand(),this.composerdata.loadexpanded=!1)}get displayLabel(){return this.model.getField("name")?this.model.getField("name"):this.language.getModuleName(this.model.module,!0)}toggleClosed(){this.isClosed=!this.isClosed}get toggleIcon(){return this.isClosed?"erect_window":"minimize_window"}get canExpand(){return!_.isEmpty(this.metadata.getComponentConfig("GlobalDockedComposerModal",this.model.module))}expand(){this.modal.openModal("GlobalDockedComposerModal",!0,this.ViewContainerRef.injector)}handleaction(e){if("savegodetail"===e)this.model.goDetail(),this.closeComposer();else this.closeComposer()}promptClose(){this.modal.prompt("confirm",this.language.getLabel("MSG_CANCEL","","long"),this.language.getLabel("MSG_CANCEL")).subscribe((e=>{e&&this.closeComposer()}))}closeComposer(){for(let e=0;e<this.dockedComposer.composers.length;e++)this.dockedComposer.composers[e].id===this.composerdata.id&&this.dockedComposer.composers.splice(e,1)}}return e=GlobalDockedComposer,(0,i.Z)(GlobalDockedComposer,"ɵfac",(function(t){return new(t||e)(n.Y36(a.Pu),n.Y36(d.m),n.Y36(r.d),n.Y36(o.o),n.Y36(l.e),n.Y36(c.o),n.Y36(n.s_b))})),(0,i.Z)(GlobalDockedComposer,"ɵcmp",n.Xpm({type:e,selectors:[["global-docked-composer"]],viewQuery:function(e,t){if(1&e&&n.Gf(f,7,n.s_b),2&e){let e;n.iGM(e=n.CRH())&&(t.containercontent=e.first)}},inputs:{composerdata:"composerdata",composerindex:"composerindex"},features:[n._Bn([o.o,l.e])],decls:23,vars:11,consts:[["role","dialog",1,"slds-docked-composer","slds-grid","slds-grid_vertical","slds-m-horizontal--x-small",2,"transition",".5s",3,"ngClass"],["aria-live","assertive",1,"slds-docked-composer__header","slds-grid","slds-shrink-none"],[1,"slds-media","slds-media_center","slds-no-space"],[1,"slds-media__figure","slds-m-right_x-small"],[1,"slds-icon_container"],[3,"module","size"],[1,"slds-media__body"],[1,"slds-truncate"],[1,"slds-col_bump-left","slds-shrink-none"],[1,"slds-button","slds-button_icon","slds-button_icon",3,"click"],[3,"icon"],["class","slds-button slds-button_icon slds-button_icon",3,"click",4,"ngIf"],[1,"slds-docked-composer__body","slds-theme--default","slds-scrollable",2,"height","380px"],["containercontent",""],[1,"slds-docked-composer__footer","slds-shrink-none","slds-grid","slds-grid--vertical-align-center","slds-grid--align-spread"],[1,"slds-col"],[1,"slds-col_bump-left"],[3,"actionset","actionemitter"]],template:function(e,t){1&e&&(n.TgZ(0,"section",0)(1,"header",1)(2,"div",2)(3,"div",3)(4,"span",4),n._UZ(5,"system-icon",5),n.qZA()(),n.TgZ(6,"div",6)(7,"div",7),n._uU(8),n.qZA()()(),n.TgZ(9,"div",8)(10,"button",9),n.NdJ("click",(function(){return t.toggleClosed()})),n._UZ(11,"system-button-icon",10),n.qZA(),n.YNc(12,b,2,1,"button",11),n.TgZ(13,"button",9),n.NdJ("click",(function(){return t.promptClose()})),n._UZ(14,"system-button-icon",10),n.qZA()()(),n.TgZ(15,"div",12),n._UZ(16,"div",null,13),n.qZA(),n.TgZ(18,"footer",14)(19,"div",15),n._UZ(20,"global-docked-composer-messages-badge"),n.qZA(),n.TgZ(21,"div",16)(22,"object-action-container",17),n.NdJ("actionemitter",(function(e){return t.handleaction(e)})),n.qZA()()()()),2&e&&(n.Q6J("ngClass",n.WLB(8,v,t.isClosed,!t.isClosed)),n.xp6(5),n.Q6J("module",t.model.module)("size","small"),n.xp6(3),n.Oqu(t.displayLabel),n.xp6(3),n.Q6J("icon",t.toggleIcon),n.xp6(1),n.Q6J("ngIf",t.canExpand),n.xp6(2),n.Q6J("icon","close"),n.xp6(8),n.Q6J("actionset",t.actionset))},dependencies:[u.mk,u.O5,h.J,m.f,g.S,p.U],encapsulation:2})),GlobalDockedComposer})()},7877:(e,t,s)=>{"use strict";s.d(t,{y:()=>p});var i=s(1180),n=s(2242),o=s(788),l=s(2251),a=s(4755),d=s(2995),r=s(4553),c=s(4028);function u(e,t){1&e&&n._UZ(0,"global-docked-composer-overflow")}function h(e,t){if(1&e&&n._UZ(0,"global-docked-composer",3),2&e){const e=t.$implicit,s=t.index,i=n.oxw();n.Q6J("composerindex",s)("composerdata",e)("ngStyle",i.getComposerStyle(s))}}const m=function(e){return{calldata:e}};function g(e,t){if(1&e&&(n.ynx(0),n._UZ(1,"system-dynamic-component",4),n.BQk()),2&e){const e=t.$implicit;n.xp6(1),n.Q6J("componentattributes",n.VKq(1,m,e))}}let p=(()=>{var e;class GlobalDockedComposerContainer{constructor(e,t){(0,i.Z)(this,"dockedComposer",void 0),(0,i.Z)(this,"telephony",void 0),this.dockedComposer=e,this.telephony=t}get isVisible(){return this.dockedComposer.composers.length>0||this.telephony.calls.length>0}getComposerStyle(e){if(e>=this.dockedComposer.maxComposers-this.telephony.calls.length)return{display:"none"}}get displayOverflow(){return this.dockedComposer.composers.length+this.telephony.calls.length>this.dockedComposer.maxComposers}}return e=GlobalDockedComposerContainer,(0,i.Z)(GlobalDockedComposerContainer,"ɵfac",(function(t){return new(t||e)(n.Y36(o.m),n.Y36(l.n))})),(0,i.Z)(GlobalDockedComposerContainer,"ɵcmp",n.Xpm({type:e,selectors:[["global-docked-composer-container"]],hostAttrs:[2,"z-index","9999"],hostVars:2,hostBindings:function(e,t){2&e&&n.ekj("slds-docked_container",t.isVisible)},decls:3,vars:3,consts:[[4,"ngIf"],[3,"composerindex","composerdata","ngStyle",4,"ngFor","ngForOf"],[4,"ngFor","ngForOf"],[3,"composerindex","composerdata","ngStyle"],["component","TelephonyDockedCall",3,"componentattributes"]],template:function(e,t){1&e&&(n.YNc(0,u,1,0,"global-docked-composer-overflow",0),n.YNc(1,h,1,3,"global-docked-composer",1),n.YNc(2,g,2,3,"ng-container",2)),2&e&&(n.Q6J("ngIf",t.displayOverflow),n.xp6(1),n.Q6J("ngForOf",t.dockedComposer.composers),n.xp6(1),n.Q6J("ngForOf",t.telephony.calls))},dependencies:[a.sg,a.O5,a.PC,d.T,r.U,c.G],encapsulation:2})),GlobalDockedComposerContainer})()},3428:(e,t,s)=>{"use strict";s.d(t,{U:()=>p});var i=s(1180),n=s(2242),o=s(5710),l=s(5329),a=s(4755),d=s(2656),r=s(3463),c=s(7674),u=s(8859);function h(e,t){if(1&e&&(n.TgZ(0,"tr",16)(1,"td",17)(2,"div",18),n._UZ(3,"system-utility-icon",19),n.qZA()(),n.TgZ(4,"td",20)(5,"div",18),n._UZ(6,"system-label-fieldname",21),n.qZA()(),n.TgZ(7,"td",22)(8,"div",18),n._uU(9),n.qZA()()()),2&e){const e=t.$implicit,s=n.oxw(3);n.xp6(3),n.Q6J("icon",e.type),n.xp6(3),n.Q6J("module",s.model.module)("field",e.reference),n.xp6(3),n.Oqu(e.message)}}function m(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"section",4)(1,"button",5),n.NdJ("click",(function(){n.CHM(e);const t=n.oxw(2);return n.KtG(t.showpopover=!1)})),n._UZ(2,"system-button-icon",6),n.qZA(),n.TgZ(3,"header",7)(4,"div",8),n._UZ(5,"system-utility-icon",9),n.TgZ(6,"div",10)(7,"h2",11),n._UZ(8,"system-label",12),n.qZA()()()(),n.TgZ(9,"div",13)(10,"table",14)(11,"tbody"),n.YNc(12,h,10,4,"tr",15),n.qZA()()()()}if(2&e){const e=n.oxw(2);n.Q6J("ngClass",e.nubbinClass)("ngStyle",e.popoverStyle),n.xp6(2),n.Q6J("inverse",!0),n.xp6(10),n.Q6J("ngForOf",e.messages)}}function g(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"div",1)(1,"span",2),n.NdJ("click",(function(){n.CHM(e);const t=n.oxw();return n.KtG(t.showpopover=!t.showpopover)})),n._uU(2),n.qZA(),n.YNc(3,m,13,4,"section",3),n.qZA()}if(2&e){const e=n.oxw();n.xp6(2),n.Oqu(e.messagecount),n.xp6(1),n.Q6J("ngIf",e.showpopover)}}let p=(()=>{var e;class GlobalDockedComposerMessagesBadge{constructor(e,t){(0,i.Z)(this,"model",void 0),(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"showpopover",!1),(0,i.Z)(this,"side","left"),this.model=e,this.language=t}get messagecount(){return this.model.getMessages().length}get messages(){return this.model.getMessages()}get nubbinClass(){return"right"==this.side?"slds-nubbin_bottom-right":"slds-nubbin_bottom-left"}get popoverStyle(){return"right"==this.side?{bottom:"37px",right:"-10px"}:{bottom:"37px",left:"-10px"}}}return e=GlobalDockedComposerMessagesBadge,(0,i.Z)(GlobalDockedComposerMessagesBadge,"ɵfac",(function(t){return new(t||e)(n.Y36(o.o),n.Y36(l.d))})),(0,i.Z)(GlobalDockedComposerMessagesBadge,"ɵcmp",n.Xpm({type:e,selectors:[["global-docked-composer-messages-badge"]],inputs:{side:"side"},decls:1,vars:1,consts:[["class","slds-is-relative",4,"ngIf"],[1,"slds-is-relative"],[1,"slds-badge","slds-theme_warning","slds-m-horizontal--xx-small",3,"click"],["aria-label","Model Errors","class","slds-popover slds-popover_error slds-nubbin_bottom-left slds-is-absolute","role","dialog",3,"ngClass","ngStyle",4,"ngIf"],["aria-label","Model Errors","role","dialog",1,"slds-popover","slds-popover_error","slds-nubbin_bottom-left","slds-is-absolute",3,"ngClass","ngStyle"],["title","Close dialog",1,"slds-button","slds-button_icon","slds-button_icon-small","slds-float_right","slds-popover__close",3,"click"],["icon","close",3,"inverse"],[1,"slds-popover__header"],[1,"slds-media","slds-media_center","slds-has-flexi-truncate"],["icon","error","size","x-small","colorclass","slds-icon-utility-error"],[1,"slds-media__body","slds-text-align--left","slds-p-left--x-small"],["title","Resolve error",1,"slds-truncate","slds-text-heading_medium"],["label","LBL_VALIDATION_ERRORS"],[1,"slds-popover__body","slds-p-horizontal--none"],[1,"slds-table","slds-table_cell-buffer","slds-table_bordered"],["class","slds-hint-parent",4,"ngFor","ngForOf"],[1,"slds-hint-parent"],["data-label","type"],[1,"slds-truncate"],["size","x-small",3,"icon"],["data-label","Field"],[3,"module","field"],["data-label","Message"]],template:function(e,t){1&e&&n.YNc(0,g,4,2,"div",0),2&e&&n.Q6J("ngIf",t.messagecount)},dependencies:[a.mk,a.sg,a.O5,a.PC,d.J,r._,c.h,u.r],encapsulation:2})),GlobalDockedComposerMessagesBadge})()},4028:(e,t,s)=>{"use strict";s.d(t,{G:()=>m});var i=s(1180),n=s(2242),o=s(788),l=s(2251),a=s(5329),d=s(4755),r=s(2656),c=s(4561);function u(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"li",8)(1,"a",9),n.NdJ("click",(function(){const t=n.CHM(e).$implicit,s=n.oxw(2);return n.KtG(s.focusComposer(t.id))})),n.TgZ(2,"div",10)(3,"div",11)(4,"span",12),n._UZ(5,"system-icon",13),n.qZA()(),n.TgZ(6,"div",14)(7,"h2",15),n._uU(8),n.qZA()()()()()}if(2&e){const e=t.$implicit,s=n.oxw(2);n.xp6(5),n.Q6J("module",e.module)("size","small"),n.xp6(3),n.Oqu(s.displayLabel(e))}}function h(e,t){if(1&e&&(n.TgZ(0,"div",5)(1,"ul",6),n.YNc(2,u,9,3,"li",7),n.qZA()()),2&e){const e=n.oxw();n.xp6(2),n.Q6J("ngForOf",e.overflowComposers)}}let m=(()=>{var e;class GlobalDockedComposerOverflow{constructor(e,t,s,n,o){(0,i.Z)(this,"renderer",void 0),(0,i.Z)(this,"elementRef",void 0),(0,i.Z)(this,"dockedComposer",void 0),(0,i.Z)(this,"telephony",void 0),(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"showHiddenComposers",!1),(0,i.Z)(this,"clickListener",void 0),this.renderer=e,this.elementRef=t,this.dockedComposer=s,this.telephony=n,this.language=o}ngOnDestroy(){this.clickListener&&this.clickListener()}get hiddenCount(){return this.dockedComposer.composers.length+this.telephony.calls.length-this.dockedComposer.maxComposers}toggleHiddenComoposers(){this.showHiddenComposers=!this.showHiddenComposers,this.showHiddenComposers?this.clickListener=this.renderer.listen("document","click",(e=>this.onClick(e))):this.clickListener&&this.clickListener()}onClick(e){this.elementRef.nativeElement.contains(e.target)||(this.showHiddenComposers=!1,this.clickListener())}get overflowComposers(){return this.dockedComposer.composers.slice(this.dockedComposer.maxComposers-this.telephony.calls.length)}displayLabel(e){return e.model.data.name?e.model.data.name:this.language.getModuleName(e.model.module,!0)}focusComposer(e){this.dockedComposer.focusComposer(e),this.showHiddenComposers=!1}}return e=GlobalDockedComposerOverflow,(0,i.Z)(GlobalDockedComposerOverflow,"ɵfac",(function(t){return new(t||e)(n.Y36(n.Qsj),n.Y36(n.SBq),n.Y36(o.m),n.Y36(l.n),n.Y36(a.d))})),(0,i.Z)(GlobalDockedComposerOverflow,"ɵcmp",n.Xpm({type:e,selectors:[["global-docked-composer-overflow"]],decls:6,vars:3,consts:[[1,"slds-docked-composer","slds-docked-composer_overflow","slds-m-horizontal--x-small"],[1,"slds-button","slds-button_icon","slds-docked-composer_overflow__button",3,"click"],[3,"icon"],[1,"slds-text-body_small","slds-m-left_xx-small"],["class","slds-dropdown slds-dropdown_left slds-dropdown_bottom slds-dropdown_medium slds-nubbin_bottom-left",4,"ngIf"],[1,"slds-dropdown","slds-dropdown_left","slds-dropdown_bottom","slds-dropdown_medium","slds-nubbin_bottom-left"],["role","menu",1,"slds-dropdown__list","slds-dropdown_length-with-icon-7"],["class","slds-dropdown__item","role","presentation",4,"ngFor","ngForOf"],["role","presentation",1,"slds-dropdown__item"],["href","javascript:void(0);","role","menuitem",3,"click"],[1,"slds-media","slds-media_center","slds-no-space"],[1,"slds-media__figure","slds-m-right_x-small"],[1,"slds-icon_container"],[3,"module","size"],[1,"slds-media__body"],[1,"slds-truncate"]],template:function(e,t){1&e&&(n.TgZ(0,"div",0)(1,"button",1),n.NdJ("click",(function(){return t.toggleHiddenComoposers()})),n._UZ(2,"system-button-icon",2),n.TgZ(3,"span",3),n._uU(4),n.qZA()(),n.YNc(5,h,3,1,"div",4),n.qZA()),2&e&&(n.xp6(2),n.Q6J("icon","standard_objects"),n.xp6(2),n.Oqu(t.hiddenCount),n.xp6(1),n.Q6J("ngIf",t.showHiddenComposers))},dependencies:[d.sg,d.O5,r.J,c.f],encapsulation:2})),GlobalDockedComposerOverflow})()},661:(e,t,s)=>{"use strict";s.d(t,{T:()=>v});var i=s(1180),n=s(2242),o=s(5920),l=s(3917),a=s(4044),d=s(4154),r=s(3369),c=s(4755),u=s(2403),h=s(7877);const m=["footercontainer"],g=["modalcontainer"],p=["modalbackdrop"],f=["hiddenContainer"];function b(e,t){1&e&&n._UZ(0,"global-docked-composer-container")}let v=(()=>{var e;class GlobalFooter{constructor(e,t,s,n,o){(0,i.Z)(this,"session",void 0),(0,i.Z)(this,"footer",void 0),(0,i.Z)(this,"modalservice",void 0),(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"broadcast",void 0),(0,i.Z)(this,"footercontainer",void 0),(0,i.Z)(this,"modalcontainer",void 0),(0,i.Z)(this,"modalbackdrop",void 0),(0,i.Z)(this,"hiddenContainer",void 0),(0,i.Z)(this,"loadedComponents",[]),this.session=e,this.footer=t,this.modalservice=s,this.metadata=n,this.broadcast=o}ngOnInit(){this.subscribeToLoader()}loadCustomComponentset(e){this.metadata.getComponentSetObjects(e).forEach((e=>{this.loadedComponents.some((t=>t.component==e.component&&_.isEqual(t.componentconfig,e.componentconfig)))||this.metadata.addComponent(e.component,this.hiddenContainer).subscribe((t=>{t.instance.componentconfig=e.componentconfig,this.loadedComponents.push(e)}))}))}ngAfterViewInit(){this.footer.footercontainer=this.footercontainer,this.footer.modalcontainer=this.modalcontainer,this.footer.modalbackdrop=this.modalbackdrop}subscribeToLoader(){this.broadcast.message$.subscribe((e=>{if("loader.primarycompleted"!=e.messagetype)return;const t=this.metadata.getComponentConfig("GlobalFooter");t?.componentset&&this.loadCustomComponentset(t.componentset)}))}}return e=GlobalFooter,(0,i.Z)(GlobalFooter,"ɵfac",(function(t){return new(t||e)(n.Y36(o.n),n.Y36(l.M),n.Y36(a.o),n.Y36(d.Pu),n.Y36(r.f))})),(0,i.Z)(GlobalFooter,"ɵcmp",n.Xpm({type:e,selectors:[["global-footer"]],viewQuery:function(e,t){if(1&e&&(n.Gf(m,7,n.s_b),n.Gf(g,7,n.s_b),n.Gf(p,7,n.s_b),n.Gf(f,7,n.s_b)),2&e){let e;n.iGM(e=n.CRH())&&(t.footercontainer=e.first),n.iGM(e=n.CRH())&&(t.modalcontainer=e.first),n.iGM(e=n.CRH())&&(t.modalbackdrop=e.first),n.iGM(e=n.CRH())&&(t.hiddenContainer=e.first)}},decls:12,vars:7,consts:[[4,"ngIf"],["footercontainer",""],["data-info","ModalContainer",2,"position","fixed","z-index","10000"],[1,"slds-backdrop"],["backdrop",""],["modalcontainer",""],[1,"slds-notify_container"],[2,"display","none"],["hiddenContainer",""]],template:function(e,t){1&e&&(n.TgZ(0,"footer"),n.YNc(1,b,1,0,"global-docked-composer-container",0),n._UZ(2,"div",null,1),n.TgZ(4,"div",2),n._UZ(5,"div",3,4)(7,"span",null,5),n.qZA(),n._UZ(9,"system-toast-container",6)(10,"div",7,8),n.qZA()),2&e&&(n.xp6(1),n.Q6J("ngIf",t.session.authData.sessionId&&!0===t.session.authData.loaded),n.xp6(4),n.Udp("z-index",t.modalservice.backdropZindex)("backdrop-filter",t.modalservice.backdropBlurred),n.ekj("slds-backdrop_open",t.modalservice.backdropVisible))},dependencies:[c.O5,u.t,h.y],encapsulation:2})),GlobalFooter})()},48:(e,t,s)=>{"use strict";s.d(t,{e:()=>k});var i=s(1180),n=s(2242),o=s(3348),l=s(727),a=s(5920),d=s(3278),r=s(6559),c=s(2422),u=s(2032),h=s(4505),m=s(6625),g=s(4755),p=s(2552),f=s(6558),b=s(4365),v=s(6131);const Z=["header"];function y(e,t){1&e&&n._UZ(0,"global-header-trial-bar")}function x(e,t){1&e&&n._UZ(0,"global-header-top")}function w(e,t){if(1&e&&n._UZ(0,"global-navigation-tabbed",6),2&e){const e=n.oxw(2);n.Q6J("progressWidth",e.progressWidth)("showProgressBar",e.pendingRequestsTotal>0)}}function T(e,t){1&e&&n._UZ(0,"global-navigation")}function C(e,t){if(1&e&&(n.TgZ(0,"div",7),n._UZ(1,"div",8),n.qZA()),2&e){const e=n.oxw(2);n.xp6(1),n.Udp("width",e.progressWidth,"%")}}function A(e,t){if(1&e&&(n.TgZ(0,"div"),n.YNc(1,y,1,0,"global-header-trial-bar",2),n.YNc(2,x,1,0,"global-header-top",2),n.YNc(3,w,1,2,"global-navigation-tabbed",3),n.YNc(4,T,1,0,"global-navigation",2),n.TgZ(5,"div",4),n.YNc(6,C,2,2,"div",5),n.qZA()()),2&e){const e=n.oxw();n.xp6(1),n.Q6J("ngIf",e.isTenant),n.xp6(1),n.Q6J("ngIf",!e.userPreferences.toUse.globalHeaderCollapsed||e.issmall),n.xp6(1),n.Q6J("ngIf",!e.issmall&&e.tabbed),n.xp6(1),n.Q6J("ngIf",!e.issmall&&!e.tabbed),n.xp6(2),n.Q6J("ngIf",e.issmall&&e.pendingRequestsTotal>0)}}let k=(()=>{var e;class GlobalHeader{constructor(e,t,s,n,a,d,r,c,u){(0,i.Z)(this,"session",void 0),(0,i.Z)(this,"router",void 0),(0,i.Z)(this,"toast",void 0),(0,i.Z)(this,"layout",void 0),(0,i.Z)(this,"userPreferences",void 0),(0,i.Z)(this,"navigation",void 0),(0,i.Z)(this,"backend",void 0),(0,i.Z)(this,"cdRef",void 0),(0,i.Z)(this,"configurationService",void 0),(0,i.Z)(this,"subscriptions",new l.w0),(0,i.Z)(this,"pendingRequestsTotal",0),(0,i.Z)(this,"progressWidth",0),(0,i.Z)(this,"header",void 0),this.session=e,this.router=t,this.toast=s,this.layout=n,this.userPreferences=a,this.navigation=d,this.backend=r,this.cdRef=c,this.configurationService=u,this.router.events.subscribe((e=>{if(e instanceof o.wM){let t=this.configurationService.getSystemParamater("aclcontroller");t&&"spiceacl"!=t&&"Users"===e.snapshot.params.module&&e.snapshot.params.id&&(this.session.authData.admin||e.snapshot.params.id==this.session.authData.userId||(this.toast.sendToast("You are not allowed to view or edit foreign user data.","warning",null,3),this.router.navigate(["/module/Users"])))}}))}get headerHeight(){return this.header?this.header.element.nativeElement.getBoundingClientRect().height:0}get tabbed(){return"subtabbed"==this.navigation.navigationparadigm}get issmall(){return"small"==this.layout.screenwidth}get isTenant(){return!_.isEmpty(this.configurationService.getData("tenantconfig"))}ngAfterViewInit(){this.subscribeToBackendPendingRequests()}ngOnDestroy(){this.subscriptions.unsubscribe()}subscribeToBackendPendingRequests(){this.subscriptions.add(this.backend.pendingCountChange$.subscribe((e=>{e>this.pendingRequestsTotal?this.pendingRequestsTotal=e:0==e&&(this.pendingRequestsTotal=0),this.progressWidth=0==e?100:100/this.pendingRequestsTotal*(this.pendingRequestsTotal-this.backend.pendingRequestsCount),this.cdRef.detectChanges()})))}}return e=GlobalHeader,(0,i.Z)(GlobalHeader,"ɵfac",(function(t){return new(t||e)(n.Y36(a.n),n.Y36(o.F0),n.Y36(d.A),n.Y36(r.b),n.Y36(c.z),n.Y36(u.G),n.Y36(h.y),n.Y36(n.sBO),n.Y36(m.C))})),(0,i.Z)(GlobalHeader,"ɵcmp",n.Xpm({type:e,selectors:[["global-header"]],viewQuery:function(e,t){if(1&e&&n.Gf(Z,5,n.s_b),2&e){let e;n.iGM(e=n.CRH())&&(t.header=e.first)}},decls:3,vars:1,consts:[[1,"slds-global-header_container"],["header",""],[4,"ngIf"],[3,"progressWidth","showProgressBar",4,"ngIf"],[1,"slds-hide--medium","slds-context-bar",2,"height","0"],["class","slds-context-bar-progress-bar",4,"ngIf"],[3,"progressWidth","showProgressBar"],[1,"slds-context-bar-progress-bar"],[1,"slds-height_full"]],template:function(e,t){1&e&&(n.TgZ(0,"header",0,1),n.YNc(2,A,7,5,"div",2),n.qZA()),2&e&&(n.xp6(2),n.Q6J("ngIf",t.session.authData.sessionId&&!0===t.session.authData.loaded))},dependencies:[g.O5,p.f,f.e,b.q,v.s],encapsulation:2})),GlobalHeader})()},3131:(e,t,s)=>{"use strict";s.d(t,{s:()=>a});var i=s(1180),n=s(2242),o=s(6550),l=s(6625);let a=(()=>{var e;class GlobalHeaderImage{constructor(e,t,s){(0,i.Z)(this,"sanitizer",void 0),(0,i.Z)(this,"cdref",void 0),(0,i.Z)(this,"configuration",void 0),(0,i.Z)(this,"defaultImageUrl","config/headerimage"),(0,i.Z)(this,"imageUrl",this.defaultImageUrl),(0,i.Z)(this,"subscription",void 0),this.sanitizer=e,this.cdref=t,this.configuration=s,this.configuration.hasCapabilityConfig("theme")&&this.setImageUrl(),this.subscription=this.configuration.loaded$.subscribe((e=>{e&&this.setImageUrl()}))}setImageUrl(){this.configuration.getAsset("headerimage")?this.imageUrl=this.sanitizer.bypassSecurityTrustResourceUrl(this.configuration.getAsset("headerimage")):this.configuration.getCapabilityConfig("theme").header_image?this.imageUrl=this.sanitizer.bypassSecurityTrustResourceUrl("data:"+this.configuration.getCapabilityConfig("theme").header_image):this.imageUrl=this.defaultImageUrl}ngOnDestroy(){this.subscription.unsubscribe()}}return e=GlobalHeaderImage,(0,i.Z)(GlobalHeaderImage,"ɵfac",(function(t){return new(t||e)(n.Y36(o.H7),n.Y36(n.sBO),n.Y36(l.C))})),(0,i.Z)(GlobalHeaderImage,"ɵcmp",n.Xpm({type:e,selectors:[["global-header-image"]],decls:1,vars:1,consts:[[1,"slds-show--large",2,"max-height","25px",3,"src"]],template:function(e,t){1&e&&n._UZ(0,"img",0),2&e&&n.Q6J("src",t.imageUrl,n.LSH)},encapsulation:2})),GlobalHeaderImage})()},141:(e,t,s)=>{"use strict";s.d(t,{z:()=>S});var i=s(1180),n=s(2242),o=s(2487),l=s(3348),a=s(3369),d=s(6625),r=s(2422),c=s(5329),u=s(4755),h=s(5030),m=s(5681),g=s(3398),p=s(4561),f=s(3463),b=s(3333),v=s(8859),Z=s(6115),_=s(3838);const y=["searchfield"];function x(e,t){1&e&&n._UZ(0,"system-utility-icon",30)}function w(e,t){1&e&&n._UZ(0,"system-utility-icon",30)}function T(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"li",22),n.NdJ("click",(function(){const t=n.CHM(e).$implicit,s=n.oxw(2);return n.KtG(s.searchmodule=t)})),n.TgZ(1,"div",23)(2,"div",24),n.YNc(3,w,1,0,"system-utility-icon",25),n.qZA(),n.TgZ(4,"div",26)(5,"div",27),n._UZ(6,"system-label-modulename",31),n.qZA()()()()}if(2&e){const e=t.$implicit,s=n.oxw(2);n.xp6(3),n.Q6J("ngIf",e==s._searchmodule),n.xp6(3),n.Q6J("module",e)}}function C(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"div",14)(1,"div",1)(2,"div",2)(3,"div",15)(4,"div",16)(5,"div",17)(6,"input",18),n.NdJ("ngModelChange",(function(t){n.CHM(e);const s=n.oxw();return n.KtG(s.searchmodule=t)})),n.qZA(),n._UZ(7,"system-icon",19),n.qZA(),n.TgZ(8,"div",20)(9,"ul",21)(10,"li",22),n.NdJ("click",(function(){n.CHM(e);const t=n.oxw();return n.KtG(t.searchmodule="all")})),n.TgZ(11,"div",23)(12,"div",24),n.YNc(13,x,1,0,"system-utility-icon",25),n.qZA(),n.TgZ(14,"div",26)(15,"div",27),n._UZ(16,"system-label",28),n.qZA()()()(),n.YNc(17,T,7,2,"li",29),n.qZA()()()()()()()}if(2&e){const e=n.oxw();n.xp6(6),n.Q6J("ngModel",e.searchmodule),n.xp6(7),n.Q6J("ngIf","all"==e.searchmodule),n.xp6(4),n.Q6J("ngForOf",e.fts.loadedSearchModules)}}function A(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"global-header-search-recent-items",32),n.NdJ("selected",(function(t){n.CHM(e);const s=n.oxw();return n.KtG(s.selected(t))})),n.qZA()}}function k(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"global-header-search-results-items",33),n.NdJ("selected",(function(t){n.CHM(e);const s=n.oxw();return n.KtG(s.selected(t))})),n.qZA()}if(2&e){const e=n.oxw();n.Q6J("searchTerm",e.searchTerm)("searchResults",e.searchresults)}}const L=function(e){return{"slds-combobox-group":e}},I=function(e){return{"slds-combobox-addon_end":e}},M=function(e){return{"slds-is-open":e}};let S=(()=>{var e;class GlobalHeaderSearch{quickLaunch(e){this.searchfield.element.nativeElement.focus()}get searchmodule(){return"all"==this._searchmodule?this.language.getLabel("LBL_ALL"):this.language.getModuleName(this._searchmodule)}set searchmodule(e){this._searchmodule=e,this.searchTerm&&this.showRecent&&this.executeSearch()}constructor(e,t,s,n,o,l,a,d){(0,i.Z)(this,"router",void 0),(0,i.Z)(this,"broadcast",void 0),(0,i.Z)(this,"fts",void 0),(0,i.Z)(this,"configuration",void 0),(0,i.Z)(this,"elementRef",void 0),(0,i.Z)(this,"renderer",void 0),(0,i.Z)(this,"userPreferences",void 0),(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"searchfield",void 0),(0,i.Z)(this,"isFocused",!1),(0,i.Z)(this,"showRecent",!1),(0,i.Z)(this,"searchTimeOut",void 0),(0,i.Z)(this,"searchTerm",""),(0,i.Z)(this,"searchTermUntrimmed",""),(0,i.Z)(this,"clickListener",void 0),(0,i.Z)(this,"_searchmodule","all"),(0,i.Z)(this,"searchresults",[]),this.router=e,this.broadcast=t,this.fts=s,this.configuration=n,this.elementRef=o,this.renderer=l,this.userPreferences=a,this.language=d}get showModuleSelector(){return window.innerWidth>=768&&!this.userPreferences.toUse.globalHeaderCollapsed}onFocus(){this.showRecent=!0,this.isFocused=!0,this.clickListener=this.renderer.listen("document","click",(e=>this.onClick(e)))}closePopup(){this.clickListener(),this.showRecent=!1,this.searchTerm="",this.searchTermUntrimmed=""}doSearch(){this.searchTerm=this.searchTermUntrimmed.trim(),this.searchTerm.length&&this.searchTerm!==this.fts.searchTerm&&this.executeSearch()}executeSearch(){let e=[];this.showModuleSelector&&"all"!=this._searchmodule&&e.push(this._searchmodule),this.searchresults=[],this.fts.searchByModules({searchterm:this.searchTerm,modules:e,size:10}).subscribe((e=>{let t=[];for(let e of this.fts.moduleSearchresults)t=t.concat(e.data.hits);t.sort(((e,t)=>e._score>t._score?-1:1)),this.searchresults=t.splice(0,10)}))}clearSearchTerm(){this.searchTimeOut&&window.clearTimeout(this.searchTimeOut),this.searchTerm="",this.searchTermUntrimmed="",this.fts.searchTerm=""}search(e){switch(this.showRecent=!0,e.key){case"ArrowDown":case"ArrowUp":break;case"Enter":this.searchTerm=this.searchTermUntrimmed.trim(),this.searchTerm.length&&this.searchTermsValid(this.searchTerm)&&(this.searchTimeOut&&window.clearTimeout(this.searchTimeOut),this.showRecent=!1,this.searchTerm.length>0&&this.router.navigate(["/search/"+encodeURIComponent(btoa(this.searchTerm))]));break;default:this.searchTimeOut&&window.clearTimeout(this.searchTimeOut),this.searchTermsValid(this.searchTermUntrimmed.trim())?this.searchTimeOut=window.setTimeout((()=>this.doSearch()),1e3):""==this.searchTermUntrimmed.trim()&&(this.searchTerm="")}}searchTermsValid(e){let t=this.configuration.getCapabilityConfig("search"),s=t.min_ngram?parseInt(t.min_ngram,10):3,i=t.max_ngram?parseInt(t.max_ngram,10):50;return 0==e.split(" ").filter((e=>e.length<s||e.length>i)).length}onClick(e){this.elementRef.nativeElement.contains(e.target)||this.closePopup()}selected(e){this.showRecent=!1,this.clearSearchTerm()}onBlur(){window.setTimeout((()=>this.isFocused=!1),200)}}return e=GlobalHeaderSearch,(0,i.Z)(GlobalHeaderSearch,"ɵfac",(function(t){return new(t||e)(n.Y36(l.F0),n.Y36(a.f),n.Y36(o.Q),n.Y36(d.C),n.Y36(n.SBq),n.Y36(n.Qsj),n.Y36(r.z),n.Y36(c.d))})),(0,i.Z)(GlobalHeaderSearch,"ɵcmp",n.Xpm({type:e,selectors:[["global-header-search"]],viewQuery:function(e,t){if(1&e&&n.Gf(y,5,n.s_b),2&e){let e;n.iGM(e=n.CRH())&&(t.searchfield=e.first)}},hostBindings:function(e,t){1&e&&n.NdJ("keydown.control.s",(function(){return t.quickLaunch()}),!1,n.evT)},features:[n._Bn([o.Q])],decls:14,vars:13,consts:[[1,"slds-global-header__item_search",2,"min-width","15rem"],[1,"slds-form-element"],[1,"slds-form-element__control"],[1,"",3,"ngClass"],["class","slds-combobox_object-switcher slds-combobox-addon_start",4,"ngIf"],[1,"slds-combobox_container",3,"ngClass"],["role","combobox",1,"slds-combobox","slds-dropdown-trigger","slds-dropdown-trigger_click",3,"ngClass"],["role","none",1,"slds-combobox__form-element","slds-input-has-icon","slds-input-has-icon_left","slds-global-search__form-element"],["icon","search","addclasses","slds-input__icon slds-input__icon--left"],["role","textbox","type","search","system-placeholder","LBL_SEARCH_SPICE",1,"slds-input","slds-combobox__input",3,"ngModel","focus","blur","ngModelChange","keyup"],["searchfield",""],["role","listbox",1,"slds-dropdown","slds-dropdown_fluid"],[3,"selected",4,"ngIf"],[3,"searchTerm","searchResults","selected",4,"ngIf"],[1,"slds-combobox_object-switcher","slds-combobox-addon_start"],[1,"slds-combobox_container"],["system-dropdown-trigger","","role","combobox",1,"slds-combobox","slds-dropdown-trigger","slds-dropdown-trigger_click"],["role","none",1,"slds-combobox__form-element","slds-input-has-icon","slds-input-has-icon_right"],["type","text","readonly","","role","textbox",1,"slds-input","slds-combobox__input","slds-combobox__input-value",3,"ngModel","ngModelChange"],["icon","down","sprite","utility","size","x-small","addclasses","slds-icon_container slds-icon-utility-down slds-input__icon slds-input__icon_right"],[1,"slds-dropdown","slds-dropdown_x-small","slds-dropdown_left"],["role","group",1,"slds-listbox","slds-listbox_vertical"],["role","presentation",1,"slds-listbox__item",3,"click"],["role","option",1,"slds-media","slds-listbox__option","slds-listbox__option_plain","slds-media_small"],[1,"slds-media__figure","slds-listbox__option-icon"],["icon","check","size","x-small",4,"ngIf"],[1,"slds-media__body"],[1,"slds-truncate"],["label","LBL_ALL"],["role","presentation","class","slds-listbox__item",3,"click",4,"ngFor","ngForOf"],["icon","check","size","x-small"],[3,"module"],[3,"selected"],[3,"searchTerm","searchResults","selected"]],template:function(e,t){1&e&&(n.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),n.YNc(4,C,18,3,"div",4),n.TgZ(5,"div",5)(6,"div",6)(7,"div",7),n._UZ(8,"system-utility-icon",8),n.TgZ(9,"input",9,10),n.NdJ("focus",(function(){return t.onFocus()}))("blur",(function(){return t.onBlur()}))("ngModelChange",(function(e){return t.searchTermUntrimmed=e}))("keyup",(function(e){return t.search(e)})),n.qZA()(),n.TgZ(11,"div",11),n.YNc(12,A,1,0,"global-header-search-recent-items",12),n.YNc(13,k,1,2,"global-header-search-results-items",13),n.qZA()()()()()()()),2&e&&(n.xp6(3),n.Q6J("ngClass",n.VKq(7,L,t.showModuleSelector)),n.xp6(1),n.Q6J("ngIf",t.showModuleSelector),n.xp6(1),n.Q6J("ngClass",n.VKq(9,I,t.showModuleSelector)),n.xp6(1),n.Q6J("ngClass",n.VKq(11,M,t.showRecent)),n.xp6(3),n.Q6J("ngModel",t.searchTermUntrimmed),n.xp6(3),n.Q6J("ngIf",t.showRecent&&""===t.searchTerm),n.xp6(1),n.Q6J("ngIf",""!==t.searchTerm&&t.searchTermsValid(t.searchTerm)))},dependencies:[u.mk,u.sg,u.O5,h.Fj,h.JJ,h.On,m.l,g.A,p.f,f._,b.M,v.r,Z.o,_.B],encapsulation:2})),GlobalHeaderSearch})()},4373:(e,t,s)=>{"use strict";s.d(t,{S:()=>Z});var i=s(1180),n=s(2242),o=s(5710),l=s(2294),a=s(3348),d=s(5329),r=s(4154),c=s(4755),u=s(3634),h=s(4561),m=s(3333),g=s(5931);const p=["global-header-search-recent-item",""];function f(e,t){if(1&e&&(n.TgZ(0,"span"),n._uU(1),n.qZA()),2&e){const e=n.oxw();n.xp6(1),n.Oqu(e.model.data.summary_text)}}function b(e,t){if(1&e&&(n.TgZ(0,"li",8),n._UZ(1,"field-container",12),n.qZA()),2&e){const e=n.oxw().$implicit;n.xp6(1),n.Q6J("field",e.field)("fieldconfig",e.fieldconfig)}}function v(e,t){if(1&e&&(n.ynx(0),n.YNc(1,b,2,2,"li",11),n.BQk()),2&e){const e=t.$implicit,s=n.oxw();n.xp6(1),n.Q6J("ngIf",s.model.getField(e.field))}}let Z=(()=>{var e;class GlobalHeaderSearchRecentItem{constructor(e,t,s,o,l){(0,i.Z)(this,"model",void 0),(0,i.Z)(this,"router",void 0),(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"view",void 0),(0,i.Z)(this,"item",{}),(0,i.Z)(this,"selected",new n.vpe),(0,i.Z)(this,"mainfieldset",void 0),(0,i.Z)(this,"subfieldsetfields",void 0),this.model=e,this.router=t,this.language=s,this.metadata=o,this.view=l,this.view.displayLabels=!1}navigateTo(){this.selected.emit(!0),this.router.navigate(["/module/"+this.model.module+"/"+this.model.id])}gethref(){return"#/module/"+this.model.module+"/"+this.model.id}ngOnInit(){this.model.module=this.item.module_name,this.model.id=this.item.item_id,this.model.setData(this.item.data);let e=this.metadata.getComponentConfig("GlobalHeaderSearchResultsItem",this.model.module);this.mainfieldset=e.mainfieldset,e&&e.subfieldset&&(this.subfieldsetfields=this.metadata.getFieldSetItems(e.subfieldset))}}return e=GlobalHeaderSearchRecentItem,(0,i.Z)(GlobalHeaderSearchRecentItem,"ɵfac",(function(t){return new(t||e)(n.Y36(o.o),n.Y36(a.F0),n.Y36(d.d),n.Y36(r.Pu),n.Y36(l.e))})),(0,i.Z)(GlobalHeaderSearchRecentItem,"ɵcmp",n.Xpm({type:e,selectors:[["","global-header-search-recent-item",""]],hostBindings:function(e,t){1&e&&n.NdJ("click",(function(){return t.navigateTo()}))},inputs:{item:"item"},outputs:{selected:"selected"},features:[n._Bn([o.o,l.e])],attrs:p,decls:11,vars:6,consts:[["role","option",1,"slds-lookup__item-action","slds-media","slds-media--center"],["size","small",3,"module"],[1,"slds-media__body"],[1,"slds-lookup__result-text"],[4,"ngIf"],[3,"fieldset"],[1,"slds-lookup__result-meta","slds-text-body--small"],[1,"slds-list_horizontal","slds-has-dividers_right","slds-truncate"],[1,"slds-item"],[3,"module","singular"],[4,"ngFor","ngForOf"],["class","slds-item",4,"ngIf"],["fielddisplayclass","slds-truncate",3,"field","fieldconfig"]],template:function(e,t){1&e&&(n.TgZ(0,"span",0),n._UZ(1,"system-icon",1),n.TgZ(2,"div",2)(3,"div",3),n.YNc(4,f,2,1,"span",4),n._UZ(5,"object-record-fieldset-horizontal-list",5),n.qZA(),n.TgZ(6,"span",6)(7,"ul",7)(8,"li",8),n._UZ(9,"system-label-modulename",9),n.qZA(),n.YNc(10,v,2,1,"ng-container",10),n.qZA()()()()),2&e&&(n.xp6(1),n.Q6J("module",t.model.module),n.xp6(3),n.Q6J("ngIf",!t.mainfieldset),n.xp6(1),n.Q6J("fieldset",t.mainfieldset),n.xp6(4),n.Q6J("module",t.model.module)("singular",!0),n.xp6(1),n.Q6J("ngForOf",t.subfieldsetfields))},dependencies:[c.sg,c.O5,u.j,h.f,m.M,g.Z],encapsulation:2})),GlobalHeaderSearchRecentItem})()},3838:(e,t,s)=>{"use strict";s.d(t,{B:()=>m});var i=s(1180),n=s(2242),o=s(5329),l=s(382),a=s(3348),d=s(4755),r=s(4561),c=s(3463),u=s(4373);function h(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"li",8),n.NdJ("selected",(function(){n.CHM(e);const t=n.oxw();return n.KtG(t.selected.emit(!0))})),n.qZA()}if(2&e){const e=t.$implicit;n.Q6J("item",e)}}let m=(()=>{var e;class GlobalHeaderSearchRecentItems{constructor(e,t,s){(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"recent",void 0),(0,i.Z)(this,"router",void 0),(0,i.Z)(this,"selected",new n.vpe),this.language=e,this.recent=t,this.router=s}goRecent(){this.selected.emit(!1),this.router.navigate(["/recent"])}}return e=GlobalHeaderSearchRecentItems,(0,i.Z)(GlobalHeaderSearchRecentItems,"ɵfac",(function(t){return new(t||e)(n.Y36(o.d),n.Y36(l.h),n.Y36(a.F0))})),(0,i.Z)(GlobalHeaderSearchRecentItems,"ɵcmp",n.Xpm({type:e,selectors:[["global-header-search-recent-items"]],outputs:{selected:"selected"},decls:8,vars:1,consts:[["role","listbox"],["role","presentation",3,"click"],["role","option",1,"slds-lookup__item-action","slds-media","slds-media--center"],["icon","breadcrumbs","size","small","sprite","utility"],[1,"slds-media__body"],[1,"slds-lookup__result-text"],["label","LBL_RECENTLYVIEWED"],["global-header-search-recent-item","",3,"item","selected",4,"ngFor","ngForOf"],["global-header-search-recent-item","",3,"item","selected"]],template:function(e,t){1&e&&(n.TgZ(0,"ul",0)(1,"li",1),n.NdJ("click",(function(){return t.goRecent()})),n.TgZ(2,"span",2),n._UZ(3,"system-icon",3),n.TgZ(4,"div",4)(5,"div",5),n._UZ(6,"system-label",6),n.qZA()()()(),n.YNc(7,h,1,1,"li",7),n.qZA()),2&e&&(n.xp6(7),n.Q6J("ngForOf",t.recent.items.slice(0,10)))},dependencies:[d.sg,r.f,c._,u.S],encapsulation:2})),GlobalHeaderSearchRecentItems})()},5650:(e,t,s)=>{"use strict";s.d(t,{u:()=>Z});var i=s(1180),n=s(2242),o=s(2294),l=s(5710),a=s(3348),d=s(5329),r=s(4154),c=s(4755),u=s(3634),h=s(4561),m=s(3333),g=s(5931);const p=["global-header-search-results-item",""];function f(e,t){if(1&e&&(n.TgZ(0,"span"),n._uU(1),n.qZA()),2&e){const e=n.oxw();n.xp6(1),n.Oqu(e.model.data.summary_text)}}function b(e,t){if(1&e&&(n.TgZ(0,"li",8),n._UZ(1,"field-container",12),n.qZA()),2&e){const e=n.oxw().$implicit;n.xp6(1),n.Q6J("field",e.field)("fieldconfig",e.fieldconfig)}}function v(e,t){if(1&e&&(n.ynx(0),n.YNc(1,b,2,2,"li",11),n.BQk()),2&e){const e=t.$implicit,s=n.oxw();n.xp6(1),n.Q6J("ngIf",s.model.getField(e.field))}}let Z=(()=>{var e;class GlobalHeaderSearchResultsItem{set noNavigaton(e){this._noNavigaton=!1!==e}constructor(e,t,s,o,l){(0,i.Z)(this,"model",void 0),(0,i.Z)(this,"view",void 0),(0,i.Z)(this,"router",void 0),(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"hit",{}),(0,i.Z)(this,"selected",new n.vpe),(0,i.Z)(this,"_noNavigaton",!1),(0,i.Z)(this,"mainfieldset",void 0),(0,i.Z)(this,"subfieldsetfields",void 0),this.model=e,this.view=t,this.router=s,this.language=o,this.metadata=l,this.view.displayLabels=!1,this.view.displayLinks=!1}ngOnInit(){this.model.module=this.hit._type&&"_doc"!=this.hit._type?this.hit._type:this.hit._source._module,this.model.id=this.hit._id;let e=this.metadata.getComponentConfig("GlobalHeaderSearchResultsItem",this.model.module);this.mainfieldset=e.mainfieldset,e&&e.subfieldset&&(this.subfieldsetfields=this.metadata.getFieldSetItems(e.subfieldset)),this.model.setData(this.hit._source)}navigateTo(){this._noNavigaton?this.selected.emit(this.model):(this.selected.emit(!0),this.router.navigate(["/module/"+this.model.module+"/"+this.model.id]))}}return e=GlobalHeaderSearchResultsItem,(0,i.Z)(GlobalHeaderSearchResultsItem,"ɵfac",(function(t){return new(t||e)(n.Y36(l.o),n.Y36(o.e),n.Y36(a.F0),n.Y36(d.d),n.Y36(r.Pu))})),(0,i.Z)(GlobalHeaderSearchResultsItem,"ɵcmp",n.Xpm({type:e,selectors:[["","global-header-search-results-item",""]],hostBindings:function(e,t){1&e&&n.NdJ("click",(function(){return t.navigateTo()}))},inputs:{hit:"hit",noNavigaton:["global-header-search-results-item-nonavigation","noNavigaton"]},outputs:{selected:"selected"},features:[n._Bn([l.o,o.e])],attrs:p,decls:11,vars:6,consts:[["role","option",1,"slds-lookup__item-action","slds-media","slds-media--center"],["size","small",3,"module"],[1,"slds-media__body"],[1,"slds-lookup__result-text"],[4,"ngIf"],[3,"fieldset"],[1,"slds-lookup__result-meta","slds-text-body--small"],[1,"slds-list_horizontal","slds-has-dividers_right","slds-truncate"],[1,"slds-item"],[3,"module","singular"],[4,"ngFor","ngForOf"],["class","slds-item",4,"ngIf"],["fielddisplayclass","slds-truncate",3,"field","fieldconfig"]],template:function(e,t){1&e&&(n.TgZ(0,"span",0),n._UZ(1,"system-icon",1),n.TgZ(2,"div",2)(3,"div",3),n.YNc(4,f,2,1,"span",4),n._UZ(5,"object-record-fieldset-horizontal-list",5),n.qZA(),n.TgZ(6,"div",6)(7,"ul",7)(8,"li",8),n._UZ(9,"system-label-modulename",9),n.qZA(),n.YNc(10,v,2,1,"ng-container",10),n.qZA()()()()),2&e&&(n.xp6(1),n.Q6J("module",t.model.module),n.xp6(3),n.Q6J("ngIf",!t.mainfieldset),n.xp6(1),n.Q6J("fieldset",t.mainfieldset),n.xp6(4),n.Q6J("module",t.model.module)("singular",!0),n.xp6(1),n.Q6J("ngForOf",t.subfieldsetfields))},dependencies:[c.sg,c.O5,u.j,h.f,m.M,g.Z],encapsulation:2})),GlobalHeaderSearchResultsItem})()},6115:(e,t,s)=>{"use strict";s.d(t,{o:()=>y});var i=s(1180),n=s(2242),o=s(3348),l=s(5329),a=s(2487),d=s(4755),r=s(4561),c=s(4730),u=s(3463),h=s(4664),m=s(9151),g=s(5650);function p(e,t){1&e&&n._UZ(0,"system-spinner",10),2&e&&n.Q6J("size",24)}function f(e,t){1&e&&n._UZ(0,"system-icon",11)}function b(e,t){1&e&&(n.ynx(0),n.TgZ(1,"li",12),n._UZ(2,"system-searchresult-stencil"),n.qZA(),n.TgZ(3,"li",13),n._UZ(4,"system-searchresult-stencil"),n.qZA(),n.TgZ(5,"li",14),n._UZ(6,"system-searchresult-stencil"),n.qZA(),n.BQk())}function v(e,t){1&e&&(n.TgZ(0,"div",15)(1,"system-illustration-no-records"),n._UZ(2,"system-label",16),n.qZA()())}function Z(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"li",18),n.NdJ("selected",(function(){n.CHM(e);const t=n.oxw(2);return n.KtG(t.selected.emit(!0))})),n.qZA()}if(2&e){const e=t.$implicit;n.Q6J("hit",e)}}function _(e,t){if(1&e&&(n.ynx(0),n.YNc(1,Z,1,1,"li",17),n.BQk()),2&e){const e=n.oxw();n.xp6(1),n.Q6J("ngForOf",e.searchResults)}}let y=(()=>{var e;class GlobalHeaderSearchResultsItems{constructor(e,t,s){(0,i.Z)(this,"router",void 0),(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"fts",void 0),(0,i.Z)(this,"searchTerm",""),(0,i.Z)(this,"searchModule",""),(0,i.Z)(this,"searchResults",[]),(0,i.Z)(this,"selected",new n.vpe),this.router=e,this.language=t,this.fts=s}get searchModuleName(){return this.language.getLabel("LBL_INSPICECRM")}goSearch(){this.searchTerm.length>0&&(this.selected.emit(!0),this.router.navigate(["/search/"+encodeURIComponent(btoa(this.searchTerm))]))}}return e=GlobalHeaderSearchResultsItems,(0,i.Z)(GlobalHeaderSearchResultsItems,"ɵfac",(function(t){return new(t||e)(n.Y36(o.F0),n.Y36(l.d),n.Y36(a.Q))})),(0,i.Z)(GlobalHeaderSearchResultsItems,"ɵcmp",n.Xpm({type:e,selectors:[["global-header-search-results-items"]],inputs:{searchTerm:"searchTerm",searchModule:"searchModule",searchResults:"searchResults"},outputs:{selected:"selected"},decls:12,vars:7,consts:[["role","listbox"],["role","presentation",3,"click"],["role","option",1,"slds-lookup__item-action","slds-media","slds-media--center"],["class","slds-p-right--x-small",3,"size",4,"ngIf"],["icon","search","size","small","sprite","utility",4,"ngIf"],[1,"slds-media__body"],[1,"slds-lookup__result-text"],["label","LBL_SEARCH"],[4,"ngIf"],["class","slds-align--absolute-center slds-p-around--small",4,"ngIf"],[1,"slds-p-right--x-small",3,"size"],["icon","search","size","small","sprite","utility"],[2,"opacity","1"],[2,"opacity","0.6"],[2,"opacity","0.2"],[1,"slds-align--absolute-center","slds-p-around--small"],["label","MSG_NO_RECORDS_FOUND"],["global-header-search-results-item","",3,"hit","selected",4,"ngFor","ngForOf"],["global-header-search-results-item","",3,"hit","selected"]],template:function(e,t){1&e&&(n.TgZ(0,"ul",0)(1,"li",1),n.NdJ("click",(function(){return t.goSearch()})),n.TgZ(2,"span",2),n.YNc(3,p,1,1,"system-spinner",3),n.YNc(4,f,1,0,"system-icon",4),n.TgZ(5,"div",5)(6,"div",6),n._UZ(7,"system-label",7),n._uU(8),n.qZA()()()(),n.YNc(9,b,7,0,"ng-container",8),n.YNc(10,v,3,0,"div",9),n.YNc(11,_,2,1,"ng-container",8),n.qZA()),2&e&&(n.xp6(3),n.Q6J("ngIf",t.fts.runningmodulesearch),n.xp6(1),n.Q6J("ngIf",!t.fts.runningmodulesearch),n.xp6(4),n.AsE(' "',t.searchTerm,'" ',t.searchModuleName,""),n.xp6(1),n.Q6J("ngIf",t.fts.runningmodulesearch),n.xp6(1),n.Q6J("ngIf",!t.fts.runningmodulesearch&&0==t.searchResults.length),n.xp6(1),n.Q6J("ngIf",!t.fts.runningmodulesearch))},dependencies:[d.sg,d.O5,r.f,c.C,u._,h.W,m.v,g.u],encapsulation:2})),GlobalHeaderSearchResultsItems})()},7283:(e,t,s)=>{"use strict";s.d(t,{I:()=>h});var i=s(1180),n=s(2242),o=s(4154),l=s(2422),a=s(3369),d=s(4755),r=s(2995);function c(e,t){if(1&e&&n._UZ(0,"system-dynamic-component",3),2&e){const e=n.oxw().$implicit;n.Q6J("component",e.component)("componentconfig",e.componentconfig)}}function u(e,t){if(1&e&&(n.ynx(0),n.YNc(1,c,1,2,"system-dynamic-component",2),n.BQk()),2&e){const e=t.$implicit,s=n.oxw();n.xp6(1),n.Q6J("ngIf",!s.userPreferences.toUse.globalHeaderCollapsed||!(null!=e.componentconfig&&e.componentconfig.hideInCollapsedHeader))}}let h=(()=>{var e;class GlobalHeaderTools{constructor(e,t,s){(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"userPreferences",void 0),(0,i.Z)(this,"broadcast",void 0),(0,i.Z)(this,"components",[]),this.metadata=e,this.userPreferences=t,this.broadcast=s,this.broadcast.message$.subscribe((e=>{this.handleMessage(e)}))}ngOnInit(){this.buildTools()}handleMessage(e){switch(e.messagetype){case"applauncher.setrole":case"loader.reloaded":this.buildTools()}}buildTools(){let e=this.metadata.getComponentConfig("GlobalHeaderTools");e.componentset&&(this.components=this.metadata.getComponentSetObjects(e.componentset))}}return e=GlobalHeaderTools,(0,i.Z)(GlobalHeaderTools,"ɵfac",(function(t){return new(t||e)(n.Y36(o.Pu),n.Y36(l.z),n.Y36(a.f))})),(0,i.Z)(GlobalHeaderTools,"ɵcmp",n.Xpm({type:e,selectors:[["global-header-tools"]],decls:2,vars:1,consts:[[1,"slds-grid","slds-grid--vertical-align-center"],[4,"ngFor","ngForOf"],[3,"component","componentconfig",4,"ngIf"],[3,"component","componentconfig"]],template:function(e,t){1&e&&(n.TgZ(0,"div",0),n.YNc(1,u,2,1,"ng-container",1),n.qZA()),2&e&&(n.xp6(1),n.Q6J("ngForOf",t.components))},dependencies:[d.sg,d.O5,r.T],encapsulation:2})),GlobalHeaderTools})()},6558:(e,t,s)=>{"use strict";s.d(t,{e:()=>f});var i=s(1180),n=s(2242),o=s(4154),l=s(6559),a=s(4755),d=s(141),r=s(7283),c=s(2954),u=s(2401),h=s(3131);function m(e,t){1&e&&(n.TgZ(0,"div",6)(1,"div",7),n._UZ(2,"global-navigation-compact"),n.qZA()())}function g(e,t){1&e&&(n.TgZ(0,"div",8)(1,"div",9),n._UZ(2,"global-header-search"),n.qZA()())}function p(e,t){1&e&&(n.TgZ(0,"div",10)(1,"div",11),n._UZ(2,"global-header-tools")(3,"global-user"),n.qZA()())}let f=(()=>{var e;class GlobalHeaderTop{constructor(e,t){(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"layout",void 0),this.metadata=e,this.layout=t}get showSearch(){return this.metadata.getActiveRole().showsearch&&"0"!=this.metadata.getActiveRole().showsearch}get isSmall(){return"small"==this.layout.screenwidth}}return e=GlobalHeaderTop,(0,i.Z)(GlobalHeaderTop,"ɵfac",(function(t){return new(t||e)(n.Y36(o.Pu),n.Y36(l.b))})),(0,i.Z)(GlobalHeaderTop,"ɵcmp",n.Xpm({type:e,selectors:[["global-header-top"]],decls:7,vars:3,consts:[[1,"slds-global-header","slds-grid","slds-grid--align-spread","slds-p-left--medium"],[1,"slds-show--large","slds-large-size--1-of-6"],[1,"slds-global-header__item","slds-p-left--none"],["class","slds-x-small-size--1-of-12",4,"ngIf"],["class","slds-x-small-size--11-of-12 slds-medium-size--4-of-6 slds-large-size--3-of-6",4,"ngIf"],["class","slds-medium-size--2-of-6 slds-large-size--1-of-6",4,"ngIf"],[1,"slds-x-small-size--1-of-12"],[1,"slds-global-header__item","slds-p-horizontal--none"],[1,"slds-x-small-size--11-of-12","slds-medium-size--4-of-6","slds-large-size--3-of-6"],[1,"slds-global-header__item"],[1,"slds-medium-size--2-of-6","slds-large-size--1-of-6"],[1,"slds-global-header__item","slds-grid","slds-grid--align-end","slds-grid--vertical-align-center"]],template:function(e,t){1&e&&(n.TgZ(0,"div",0)(1,"div",1)(2,"div",2),n._UZ(3,"global-header-image"),n.qZA()(),n.YNc(4,m,3,0,"div",3),n.YNc(5,g,3,0,"div",4),n.YNc(6,p,4,0,"div",5),n.qZA()),2&e&&(n.xp6(4),n.Q6J("ngIf",t.isSmall),n.xp6(1),n.Q6J("ngIf",t.showSearch),n.xp6(1),n.Q6J("ngIf",!t.isSmall))},dependencies:[a.O5,d.z,r.I,c.n,u.x,h.s],encapsulation:2})),GlobalHeaderTop})()},2552:(e,t,s)=>{"use strict";s.d(t,{f:()=>r});var i=s(1180),n=s(2242),o=s(4154),l=s(6559),a=s(2995),d=s(3463);let r=(()=>{var e;class GlobalHeaderTrialBar{constructor(e,t){(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"layout",void 0),this.metadata=e,this.layout=t}}return e=GlobalHeaderTrialBar,(0,i.Z)(GlobalHeaderTrialBar,"ɵfac",(function(t){return new(t||e)(n.Y36(o.Pu),n.Y36(l.b))})),(0,i.Z)(GlobalHeaderTrialBar,"ɵcmp",n.Xpm({type:e,selectors:[["global-header-trial-bar"]],decls:6,vars:0,consts:[[1,"slds-trial-header","slds-theme--info","slds-grid","slds-grid--vertical-align-center"],[1,"slds-grid"],[1,"slds-button","slds-m-right_small"],["label","LBL_WELCOME_TO_SPICECRM"],[1,"slds-col_bump-left"],["component","SystemTenantHeaderBarValidity"]],template:function(e,t){1&e&&(n.TgZ(0,"div",0)(1,"div",1)(2,"button",2),n._UZ(3,"system-label",3),n.qZA()(),n.TgZ(4,"div",4),n._UZ(5,"system-dynamic-component",5),n.qZA()())},dependencies:[a.T,d._],encapsulation:2})),GlobalHeaderTrialBar})()},5289:(e,t,s)=>{"use strict";s.d(t,{s:()=>R});var i=s(1180),n=s(2242),o=s(4461),l=s(3144),a=s(6625),d=s(5920),r=s(3278),c=s(3369),u=s(6550),h=s(4755),m=s(5030),g=s(4021),p=s(2656),f=s(528),b=s(8710),v=s(8859),Z=s(1977),y=s(595),x=s(3981),w=s(8764),T=s(314),C=s(4142),A=s(4481);const k=["twofactorinput"];function L(e,t){1&e&&n._UZ(0,"global-login-loading",2)}function I(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"div",30)(1,"div",31),n._UZ(2,"system-utility-icon",32),n.TgZ(3,"input",33,34),n.NdJ("ngModelChange",(function(t){n.CHM(e);const s=n.oxw(4);return n.KtG(s.code2fa=t)})),n.qZA()()()}if(2&e){const e=n.oxw(4);let t;n.xp6(3),n.Q6J("disabled",e.loggingIn)("ngModel",e.code2fa)("placeholder",null!==(t=null==e.loginLabels.LBL_ENTER_CODE?null:e.loginLabels.LBL_ENTER_CODE.default)&&void 0!==t?t:"Enter code")}}function M(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"form",17),n.NdJ("submit",(function(){n.CHM(e);const t=n.oxw(3);return n.KtG(t.login())})),n.TgZ(1,"div",18)(2,"div",19),n._UZ(3,"system-utility-icon",20),n.TgZ(4,"input",21),n.NdJ("ngModelChange",(function(t){n.CHM(e);const s=n.oxw(3);return n.KtG(s.username=t)})),n.qZA()()(),n.TgZ(5,"div",18)(6,"div",19),n._UZ(7,"system-utility-icon",22),n.TgZ(8,"input",23),n.NdJ("ngModelChange",(function(t){n.CHM(e);const s=n.oxw(3);return n.KtG(s.password=t)})),n.qZA()()(),n.YNc(9,I,5,3,"div",24),n.TgZ(10,"div",25)(11,"system-checkbox-toggle",26),n.NdJ("ngModelChange",(function(t){n.CHM(e);const s=n.oxw(3);return n.KtG(s.rememberMe=t)})),n.qZA()(),n.TgZ(12,"button",27),n._uU(13),n.qZA(),n.TgZ(14,"div",28)(15,"global-login-oauth2",29),n.NdJ("token",(function(t){n.CHM(e);const s=n.oxw(3);return n.KtG(s.login(t))})),n.qZA()()()}if(2&e){const e=n.oxw(3);let t,s,i,o;n.xp6(4),n.Q6J("disabled",e.loggingIn)("ngModel",e.username)("placeholder",null!==(t=null==e.loginLabels.LBL_USER_NAME?null:e.loginLabels.LBL_USER_NAME.default)&&void 0!==t?t:"Username"),n.xp6(4),n.Q6J("disabled",e.loggingIn)("ngModel",e.password)("placeholder",null!==(s=null==e.loginLabels.LBL_PASSWORD?null:e.loginLabels.LBL_PASSWORD.default)&&void 0!==s?s:"Password"),n.xp6(1),n.Q6J("ngIf",e.twoFactorAuthCodeRequired),n.xp6(2),n.Q6J("ngModel",e.rememberMe)("label",null!==(i=null==e.loginLabels.LBL_KEEP_ME_LOGGED_IN?null:e.loginLabels.LBL_KEEP_ME_LOGGED_IN.default)&&void 0!==i?i:"Keep me logged in"),n.xp6(1),n.Q6J("disabled",e.loggingIn),n.xp6(1),n.hij(" ",null!==(o=null==e.loginLabels.LBL_LOGIN?null:e.loginLabels.LBL_LOGIN.default)&&void 0!==o?o:"Login"," ")}}function S(e,t){1&e&&n._UZ(0,"system-button-icon",39),2&e&&n.Q6J("icon","chevrondown")("size","xx-small")}function J(e,t){1&e&&n._UZ(0,"system-button-icon",39),2&e&&n.Q6J("icon","chevronup")("size","xx-small")}function O(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"div",35)(1,"div",36),n._uU(2,"Forgot password"),n.qZA(),n.TgZ(3,"button",37),n.NdJ("click",(function(){n.CHM(e);const t=n.oxw(3);return n.KtG(t.showForgotPassword())})),n.YNc(4,S,1,2,"system-button-icon",38),n.YNc(5,J,1,2,"system-button-icon",38),n.qZA()()}if(2&e){const e=n.oxw(3);n.xp6(3),n.Q6J("disabled",e.loggingIn),n.xp6(1),n.Q6J("ngIf",!e.showForgotPass),n.xp6(1),n.Q6J("ngIf",e.showForgotPass)}}function N(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"global-login-forgot-password",40),n.NdJ("close",(function(t){n.CHM(e);const s=n.oxw(3);return n.KtG(s.showForgotPass=!t)})),n.qZA()}}function F(e,t){if(1&e&&(n.TgZ(0,"div",12)(1,"div",13),n.YNc(2,M,16,11,"form",14),n.YNc(3,O,6,3,"div",15),n.YNc(4,N,1,0,"global-login-forgot-password",16),n.qZA()()),2&e){const e=n.oxw(2);n.Q6J("system-overlay-loading-spinner",e.loggingIn),n.xp6(1),n.Q6J("system-overlay-loading-spinner",e.configuration.reloading),n.xp6(1),n.Q6J("ngIf",!e.showForgotPass),n.xp6(1),n.Q6J("ngIf",e.configuration.data.allowForgotPass),n.xp6(1),n.Q6J("ngIf",e.showForgotPass)}}function q(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"global-login-change-password",41),n.NdJ("closeDialog",(function(t){n.CHM(e);const s=n.oxw(2);return n.KtG(s.handleRenewDialogClose(t))})),n.qZA()}if(2&e){const e=n.oxw(2);n.Q6J("case",e.generateTOTP?"totp":"pwd")("username",e.username)("password",e.password)("labels",e.labels)}}function E(e,t){1&e&&(n.ynx(0),n._UZ(1,"system-loader-progress"),n.BQk())}function Y(e,t){if(1&e&&n._UZ(0,"iframe",44),2&e){const e=n.oxw(3);n.Q6J("src",e.externalSidebarUrl,n.uOi)}}function D(e,t){1&e&&(n.ynx(0),n._UZ(1,"global-newsfeed"),n.BQk())}function Q(e,t){if(1&e&&(n.TgZ(0,"div",42),n.YNc(1,Y,1,1,"iframe",43),n.YNc(2,D,2,0,"ng-container",9),n.qZA()),2&e){const e=n.oxw(2);n.ekj("slds-scrollable--y",!e.showExternalSidebar),n.xp6(1),n.Q6J("ngIf",e.showExternalSidebar),n.xp6(1),n.Q6J("ngIf",e.showNewsfeed)}}function U(e,t){if(1&e&&(n.TgZ(0,"div",3)(1,"div",4)(2,"div",5)(3,"div",6),n._UZ(4,"global-login-image"),n.qZA(),n.YNc(5,F,5,5,"div",7),n.YNc(6,q,1,4,"global-login-change-password",8),n.YNc(7,E,2,0,"ng-container",9),n.qZA(),n.TgZ(8,"div",10),n._UZ(9,"global-copyright"),n.qZA()(),n.YNc(10,Q,3,4,"div",11),n.qZA()),2&e){const e=n.oxw();n.xp6(5),n.Q6J("ngIf",!e.loginService.session.authData.sessionId&&e.promptUser),n.xp6(1),n.Q6J("ngIf",e.renewPassword||e.generateTOTP),n.xp6(1),n.Q6J("ngIf",e.loginService.session.authData.sessionId),n.xp6(3),n.Q6J("ngIf",e.promptUser&&e.showSidebar)}}let R=(()=>{var e;class GlobalLogin{constructor(e,t,s,n,o,l,a,d){(0,i.Z)(this,"loginService",void 0),(0,i.Z)(this,"http",void 0),(0,i.Z)(this,"configuration",void 0),(0,i.Z)(this,"session",void 0),(0,i.Z)(this,"toast",void 0),(0,i.Z)(this,"broadcast",void 0),(0,i.Z)(this,"sanitizer",void 0),(0,i.Z)(this,"changeDetectorRef",void 0),(0,i.Z)(this,"twofactorinput",void 0),(0,i.Z)(this,"twoFactorAuthCodeRequired",!1),(0,i.Z)(this,"promptUser",!1),(0,i.Z)(this,"username",""),(0,i.Z)(this,"password",""),(0,i.Z)(this,"rememberMe",!1),(0,i.Z)(this,"code2fa",void 0),(0,i.Z)(this,"showForgotPass",!1),(0,i.Z)(this,"externalSidebarUrl",null),(0,i.Z)(this,"messageId",void 0),(0,i.Z)(this,"renewPassword",!1),(0,i.Z)(this,"generateTOTP",!1),(0,i.Z)(this,"loggingIn",!1),(0,i.Z)(this,"labels",void 0),this.loginService=e,this.http=t,this.configuration=s,this.session=n,this.toast=o,this.broadcast=l,this.sanitizer=a,this.changeDetectorRef=d,this.session.loadFromStorage(),this.session.authData.sessionId?(this.loginService.tokenObject={access_token:this.session.authData.sessionId},this.loginService.oauthIssuer="SpiceCRM",this.loginService.login(!1).subscribe({next:()=>{this.broadcast.broadcastMessage("login")},error:e=>{this.handleError(e),this.loginService.tokenObject=null,this.loginService.oauthIssuer=null,this.promptUser=!0}})):this.promptUser=!0}get showSidebar(){return!1!==this.configuration.data.displayloginsidebar&&window.innerWidth>=1024}get showExternalSidebar(){try{let e=!_.isEmpty(this.configuration.data.loginSidebarUrl);return e&&null===this.externalSidebarUrl&&(this.externalSidebarUrl=this.sanitizer.bypassSecurityTrustResourceUrl(this.configuration.data.loginSidebarUrl)),e}catch(e){return!1}}get showNewsfeed(){try{return!!this.configuration.initialized&&_.isEmpty(this.configuration.data.loginSidebarUrl)}catch(e){return!1}}get showProgressBar(){return this.configuration.data.loginProgressBar}get loginLabels(){return this.configuration.data.languages?.required_labels??{}}handleResize(){this.changeDetectorRef.detectChanges()}login(e){(e||this.username&&this.password)&&(this.messageId&&this.toast.clearToast(this.messageId),this.toast.clearAll(),this.loggingIn=!0,e?(this.loginService.authData.userName=null,this.loginService.authData.password=null,this.loginService.tokenObject=e.tokenObject,this.loginService.oauthIssuer=e.issuer):(this.loginService.authData.code2fa=this.code2fa,this.loginService.authData.userName=this.username,this.loginService.authData.password=this.password,this.loginService.authData.rememberMe=this.rememberMe,this.loginService.tokenObject=null,this.loginService.oauthIssuer=null),this.loginService.login().subscribe({next:()=>{this.toast.clearAll(),this.loggingIn=!1},error:e=>{this.handleError(e),this.loggingIn=!1}}))}showForgotPassword(){this.showForgotPass=!this.showForgotPass}handleRenewDialogClose(e){this.renewPassword=this.generateTOTP=!1,e&&(this.password=e,this.login())}handleError(e){switch(e.errorCode){case 1:this.messageId=this.toast.sendToast("error logging on with username and password","error");break;case 2:this.labels=e.details?.labels,this.renewPassword=!0,this.generateTOTP=!1;break;case 3:this.messageId=this.toast.sendToast("invalid token","error");break;case 4:this.messageId=this.toast.sendToast(e.message,"success"),this.twoFactorAuthCodeRequired=!0,setTimeout((()=>{this.twofactorinput&&this.twofactorinput.element.nativeElement.focus()}));break;case 12:this.labels=e.details?.labels,this.renewPassword=!1,this.generateTOTP=!0;break;default:this.messageId=this.toast.sendToast("error logging on","error",e.message)}this.session.endSession()}}return e=GlobalLogin,(0,i.Z)(GlobalLogin,"ɵfac",(function(t){return new(t||e)(n.Y36(o.j),n.Y36(l.eN),n.Y36(a.C),n.Y36(d.n),n.Y36(r.A),n.Y36(c.f),n.Y36(u.H7),n.Y36(n.sBO))})),(0,i.Z)(GlobalLogin,"ɵcmp",n.Xpm({type:e,selectors:[["global-login"]],viewQuery:function(e,t){if(1&e&&n.Gf(k,5,n.s_b),2&e){let e;n.iGM(e=n.CRH())&&(t.twofactorinput=e.first)}},hostBindings:function(e,t){1&e&&n.NdJ("resize",(function(){return t.handleResize()}),!1,n.Jf7)},decls:2,vars:2,consts:[["class","slds-size--1-of-1",4,"ngIf"],["class","slds-grid slds-wrap slds-is-absolute slds-size--1-of-1 slds-theme--default","style","height:100vh; top: 0px;",4,"ngIf"],[1,"slds-size--1-of-1"],[1,"slds-grid","slds-wrap","slds-is-absolute","slds-size--1-of-1","slds-theme--default",2,"height","100vh","top","0px"],[1,"slds-align--absolute-center","slds-size--1-of-1","slds-large-size--1-of-2"],[1,"slds-size--1-of-1","slds-medium-size--2-of-3","slds-p-around--medium",2,"max-width","500px"],[1,"slds-align--absolute-center","slds-p-vertical--medium"],["class","slds-box--border slds-theme--shade",3,"system-overlay-loading-spinner",4,"ngIf"],["class","slds-is-absolute",3,"case","username","password","labels","closeDialog",4,"ngIf"],[4,"ngIf"],[1,"slds-is-absolute",2,"bottom","10px"],["class","slds-size--1-of-1 slds-large-size--1-of-2 slds-height_full",3,"slds-scrollable--y",4,"ngIf"],[1,"slds-box--border","slds-theme--shade",3,"system-overlay-loading-spinner"],[1,"slds-p-around--medium",3,"system-overlay-loading-spinner"],[3,"submit",4,"ngIf"],["class","slds-p-vertical--x-small slds-grid slds-grid--align-spread slds-grid_vertical-align-center",4,"ngIf"],["class","slds-col",3,"close",4,"ngIf"],[3,"submit"],[1,"slds-form-element","slds-m-vertical--small"],[1,"slds-form-element__control","slds-input-has-icon","slds-input-has-icon_left"],["icon","user","addclasses","slds-input__icon slds-icon-text-default"],["type","text","name","username","autocomplete","","tabindex","1",1,"slds-input","slds-p-vertical--xx-small",3,"disabled","ngModel","placeholder","ngModelChange"],["icon","lock","addclasses","slds-icon slds-input__icon slds-input__icon_left slds-icon-text-default"],["type","password","name","password","autocomplete","","tabindex","2",1,"slds-input","slds-p-vertical--xx-small",3,"disabled","ngModel","placeholder","ngModelChange"],["class","slds-form-element slds-m-vertical--small slds-grid slds-grid--vertical-align-center",4,"ngIf"],[1,"slds-m-bottom--small"],["name","remember-me",3,"ngModel","label","ngModelChange"],["type","submit","value","Submit","tabindex","0",1,"slds-button","slds-button--brand","slds-button_stretch",3,"disabled"],[1,"slds-p-top--small"],[1,"slds-size--1-of-1",3,"token"],[1,"slds-form-element","slds-m-vertical--small","slds-grid","slds-grid--vertical-align-center"],[1,"slds-form-element__control","slds-input-has-icon","slds-input-has-icon_left","slds-grow"],["icon","scan","addclasses","slds-icon slds-input__icon slds-input__icon_left slds-icon-text-default"],["type","text","name","code2fa","autocomplete","off","tabindex","2",1,"slds-input","slds-p-vertical--xx-small",3,"disabled","ngModel","placeholder","ngModelChange"],["twofactorinput",""],[1,"slds-p-vertical--x-small","slds-grid","slds-grid--align-spread","slds-grid_vertical-align-center"],["title","Forgot password",1,"slds-truncate","slds-text-body_small"],[1,"slds-button",3,"disabled","click"],[3,"icon","size",4,"ngIf"],[3,"icon","size"],[1,"slds-col",3,"close"],[1,"slds-is-absolute",3,"case","username","password","labels","closeDialog"],[1,"slds-size--1-of-1","slds-large-size--1-of-2","slds-height_full"],["style","border:none;width:100%;height:100%",3,"src",4,"ngIf"],[2,"border","none","width","100%","height","100%",3,"src"]],template:function(e,t){1&e&&(n.YNc(0,L,1,0,"global-login-loading",0),n.YNc(1,U,11,4,"div",1)),2&e&&(n.Q6J("ngIf",!t.configuration.initialized),n.xp6(1),n.Q6J("ngIf",t.configuration.initialized))},dependencies:[h.O5,m._Y,m.Fj,m.JJ,m.JL,m.On,m.F,g._,p.J,f.v,b.e,v.r,Z.M,y.T,x.N,w.X,T.r,C.p,A.Q],encapsulation:2})),GlobalLogin})()},8764:(e,t,s)=>{"use strict";s.d(t,{X:()=>J});var i=s(1180),n=s(2242),o=s(3144),l=s(5698),a=s(727),d=s(4461),r=s(6625),c=s(3278),u=s(5920),h=s(5329),m=s(4755),g=s(5030),p=s(4021),f=s(2656),b=s(7919);function v(e,t){if(1&e&&(n.TgZ(0,"h2",16),n._uU(1),n.qZA()),2&e){const e=n.oxw();n.xp6(1),n.Oqu(e.getLabel("LBL_CHANGE_PASSWORD"))}}function Z(e,t){if(1&e&&(n.TgZ(0,"h2",16),n._uU(1),n.qZA()),2&e){const e=n.oxw();n.xp6(1),n.Oqu(e.getLabel("LBL_TOTP_AUTHENTICATION"))}}function _(e,t){if(1&e&&(n.TgZ(0,"div",23),n._uU(1),n._UZ(2,"br"),n._uU(3),n.qZA()),2&e){const e=n.oxw(2);n.xp6(1),n.hij(" ",e.getLabel("LBL_PWD_GUIDELINE"),":"),n.xp6(2),n.hij("",e.pwdGuideline," ")}}function y(e,t){if(1&e&&(n.TgZ(0,"div",24),n._uU(1),n.qZA()),2&e){const e=n.oxw(2);n.xp6(1),n.Oqu(e.pwderror)}}function x(e,t){if(1&e&&(n.TgZ(0,"div",24),n._uU(1),n.qZA()),2&e){const e=n.oxw(2);n.xp6(1),n.Oqu(e.oldPwError)}}function w(e,t){if(1&e&&(n.TgZ(0,"div",24),n._uU(1),n.qZA()),2&e){const e=n.oxw(2);n.xp6(1),n.Oqu(e.pwdreperror)}}const T=function(e){return{"slds-has-error":e}};function C(e,t){if(1&e){const e=n.EpF();n.ynx(0),n.YNc(1,_,4,2,"div",17),n.TgZ(2,"div",18)(3,"label",19),n._uU(4),n.qZA(),n.TgZ(5,"system-input-password",20),n.NdJ("ngModelChange",(function(t){n.CHM(e);const s=n.oxw();return n.KtG(s.newPassword=t)})),n.qZA(),n.YNc(6,y,2,1,"div",21),n.YNc(7,x,2,1,"div",21),n.qZA(),n.TgZ(8,"div",22)(9,"label",19),n._uU(10),n.qZA(),n.TgZ(11,"system-input-password",20),n.NdJ("ngModelChange",(function(t){n.CHM(e);const s=n.oxw();return n.KtG(s.repeatPassword=t)})),n.qZA(),n.YNc(12,w,2,1,"div",21),n.qZA(),n.BQk()}if(2&e){const e=n.oxw();n.xp6(1),n.Q6J("ngIf",e.pwdGuideline),n.xp6(1),n.Q6J("ngClass",n.VKq(10,T,e.pwderror||e.oldPwError)),n.xp6(2),n.Oqu(e.getLabel("LBL_NEW_PWD")),n.xp6(1),n.Q6J("ngModel",e.newPassword),n.xp6(1),n.Q6J("ngIf",""!=e.newPassword&&e.pwderror),n.xp6(1),n.Q6J("ngIf",""!=e.newPassword&&e.oldPwError),n.xp6(1),n.Q6J("ngClass",n.VKq(12,T,e.pwdreperror)),n.xp6(2),n.Oqu(e.getLabel("LBL_NEW_PWD_REPEATED")),n.xp6(1),n.Q6J("ngModel",e.repeatPassword),n.xp6(1),n.Q6J("ngIf",""!=e.repeatPassword&&e.pwdreperror)}}function A(e,t){if(1&e&&n._UZ(0,"img",31),2&e){const e=n.oxw(2);n.Q6J("src",e.totpQRCode,n.LSH)}}function k(e,t){if(1&e&&(n.TgZ(0,"div",25)(1,"div",26),n._uU(2),n.qZA(),n.TgZ(3,"div",27)(4,"div",28),n._uU(5),n.qZA(),n.YNc(6,A,1,1,"img",29),n.TgZ(7,"div",30),n._uU(8),n.qZA()()()),2&e){const e=n.oxw();n.xp6(2),n.Oqu(e.getLabel("MSG_AUTHENTICATOR_INSTRUCTIONS","long")),n.xp6(3),n.Oqu(e.totpName),n.xp6(1),n.Q6J("ngIf",e.totpQRCode),n.xp6(2),n.Oqu(e.secret)}}function L(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"div",25),n._uU(1),n.TgZ(2,"input",32),n.NdJ("ngModelChange",(function(t){n.CHM(e);const s=n.oxw();return n.KtG(s.totpCode=t)})),n.qZA()()}if(2&e){const e=n.oxw();n.xp6(1),n.hij(" ",e.getLabel("LBL_CODE")," "),n.xp6(1),n.Q6J("ngModel",e.totpCode)}}function I(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"button",34),n.NdJ("click",(function(){n.CHM(e);const t=n.oxw(2);return n.KtG(t.setPassword())})),n._uU(1),n.qZA()}if(2&e){const e=n.oxw(2);n.Q6J("disabled",!e.canSavePwd),n.xp6(1),n.Oqu(e.getLabel("LBL_SET_PASSWORD"))}}function M(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"button",34),n.NdJ("click",(function(){n.CHM(e);const t=n.oxw(2);return n.KtG(t.saveTOTP())})),n._uU(1),n.qZA()}if(2&e){const e=n.oxw(2);n.Q6J("disabled",!e.canSaveTOTP),n.xp6(1),n.Oqu(e.getLabel("LBL_SAVE"))}}function S(e,t){if(1&e&&(n.ynx(0),n.YNc(1,I,2,2,"button",33),n.YNc(2,M,2,2,"button",33),n.BQk()),2&e){const e=n.oxw();n.xp6(1),n.Q6J("ngIf","pwd"===e.case),n.xp6(1),n.Q6J("ngIf","totp"===e.case)}}let J=(()=>{var e;class GlobalLoginChangePassword{constructor(e,t,s,o,l,d){(0,i.Z)(this,"loginService",void 0),(0,i.Z)(this,"http",void 0),(0,i.Z)(this,"configuration",void 0),(0,i.Z)(this,"toast",void 0),(0,i.Z)(this,"session",void 0),(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"case",void 0),(0,i.Z)(this,"password",void 0),(0,i.Z)(this,"username",void 0),(0,i.Z)(this,"closeDialog",new n.vpe),(0,i.Z)(this,"newPassword",void 0),(0,i.Z)(this,"repeatPassword",void 0),(0,i.Z)(this,"pwdCheck",new RegExp("//")),(0,i.Z)(this,"pwdGuideline",void 0),(0,i.Z)(this,"isPosting",!1),(0,i.Z)(this,"totpQRCode",void 0),(0,i.Z)(this,"secret",void 0),(0,i.Z)(this,"totpName",void 0),(0,i.Z)(this,"totpCode",""),(0,i.Z)(this,"labels",void 0),(0,i.Z)(this,"isLoading",!1),(0,i.Z)(this,"toastErrorID",void 0),(0,i.Z)(this,"subscriptions",new a.w0),this.loginService=e,this.http=t,this.configuration=s,this.toast=o,this.session=l,this.language=d}ngOnInit(){if("totp"===this.case){this.isLoading=!0;let e=new o.WM;e=e.set("Accept","application/json"),this.subscriptions.add(this.http.post(this.configuration.getBackendUrl()+"/authentication/totp/generate",{username:this.username,password:this.password},{headers:e}).pipe((0,l.q)(1)).subscribe({next:e=>{e.secret?(this.totpQRCode="data:image/png;base64,"+e.qrcode,this.secret=e.secret,this.totpName=e.name):(this.toast.sendToast("Error generating Code","error"),this.close()),this.isLoading=!1},error:()=>{this.toast.sendToast("Error generating Code","error"),this.close(),this.isLoading=!1}}))}else this.buildGuidelineText()}get oldPwError(){return this.password==this.newPassword&&this.getLabel("MSG_OLD_PWD_NOT_AS_NEW")}get pwderror(){return!(!this.newPassword||this.pwdCheck.test(this.newPassword))&&this.getLabel("MSG_PWD_NOT_LEGAL")}get pwdreperror(){return this.newPassword!=this.repeatPassword&&this.getLabel("MSG_PWDS_DONT_MATCH")}close(e){this.closeDialog.emit(e)}buildGuidelineText(){let e=this.configuration.getCapabilityConfig("userpassword");this.pwdCheck=new RegExp(e.regex);let t=[];e.onelower&&t.push(this.getLabel("LBL_ONE_LOWERCASE")),e.oneupper&&t.push(this.getLabel("LBL_ONE_UPPERCASE")),e.onenumber&&t.push(this.getLabel("LBL_ONE_DIGIT")),e.onespecial&&t.push(this.getLabel("LBL_ONE_SPECIALCHAR")),e.minpwdlength&&t.push(this.getLabel("LBL_MIN_LENGTH")+" "+e.minpwdlength),this.pwdGuideline=t.join(", ")}get canSavePwd(){return this.newPassword&&0==this.oldPwError&&0==this.pwderror&&0==this.pwdreperror&&!this.isPosting}get canSaveTOTP(){return!this.isPosting&&6===this.totpCode.length}setPassword(){this.canSavePwd&&(this.isPosting=!0,this.subscriptions.add(this.http.post(this.configuration.getBackendUrl()+"/authentication/changepassword",{username:this.username,password:this.password,newPassword:this.newPassword}).pipe((0,l.q)(1)).subscribe({next:e=>{this.toast.sendToast(this.getLabel("MSG_PWD_CHANGED_SUCCESSFULLY"),"success","",5),this.close(this.newPassword)},error:e=>{this.isPosting=!1}})))}saveTOTP(){let e=new o.WM;this.toastErrorID&&(this.toast.clearToast(this.toastErrorID),this.toastErrorID=null),this.isPosting=!0,this.subscriptions.add(this.http.put(this.configuration.getBackendUrl()+`/authentication/totp/validate/${this.totpCode}`,{username:this.username,password:this.password},{headers:e}).pipe((0,l.q)(1)).subscribe({next:e=>{this.isPosting=!1,e.validated?this.close():this.toastErrorID=this.toast.sendToast("Error validating your code","error","The code you entered is not valid, please try again. If you entered the code correctly, make sure your computer's time is set correctly.",!1,"asdfasdf"),this.totpCode=""},error:()=>{this.isPosting=!1,this.toastErrorID=this.toast.sendToast("Error validating your code","error","There as an internal error validating your request.",!1),this.totpCode=""}}))}getLabel(e,t="default"){return this.labels&&this.labels[e]&&this.labels[e][t]?this.labels[e][t]:e}ngOnDestroy(){this.subscriptions.unsubscribe()}}return e=GlobalLoginChangePassword,(0,i.Z)(GlobalLoginChangePassword,"ɵfac",(function(t){return new(t||e)(n.Y36(d.j),n.Y36(o.eN),n.Y36(r.C),n.Y36(c.A),n.Y36(u.n),n.Y36(h.d))})),(0,i.Z)(GlobalLoginChangePassword,"ɵcmp",n.Xpm({type:e,selectors:[["global-login-change-password"]],inputs:{case:"case",password:"password",username:"username",labels:"labels"},outputs:{closeDialog:"closeDialog"},decls:21,vars:9,consts:[[2,"height","640px"],["role","dialog","tabindex","-1",1,"slds-modal","slds-fade-in-open"],[1,"slds-modal__container"],[1,"slds-modal__header"],["title","Close",1,"slds-button","slds-button_icon","slds-modal__close","slds-button_icon-inverse",3,"click"],[3,"icon"],[1,"slds-assistive-text"],["class","slds-text-heading_medium slds-hyphenate",4,"ngIf"],[1,"slds-modal__content","slds-p-around_medium",2,"min-height","150px",3,"system-overlay-loading-spinner"],[4,"ngIf"],["class","slds-grid slds-grid--vertical-align-center",4,"ngIf"],[1,"slds-modal__footer"],[1,"slds-grid","slds-grid--vertical-align-center","slds-grid--align-spread"],[1,"slds-grid","slds-col--bump-left"],[1,"slds-button","slds-button--neutral",3,"click"],[1,"slds-backdrop","slds-backdrop_open"],[1,"slds-text-heading_medium","slds-hyphenate"],["class","slds-m-top--xx-small",4,"ngIf"],[1,"slds-form-element","slds-m-vertical--small",3,"ngClass"],[1,"slds-form-element__label"],[3,"ngModel","ngModelChange"],["class","slds-form-element__help slds-text-color--error",4,"ngIf"],[1,"slds-form-element","slds-m-bottom--x-small",3,"ngClass"],[1,"slds-m-top--xx-small"],[1,"slds-form-element__help","slds-text-color--error"],[1,"slds-grid","slds-grid--vertical-align-center"],[1,"slds-size--1-of-2"],[1,"slds-size--1-of-2","slds-align--absolute-center","slds-grid","slds-grid--vertical"],[1,"slds-p-bottom--small"],["style","width: 200px; height: 200px;",3,"src",4,"ngIf"],[1,"slds-p-top--small"],[2,"width","200px","height","200px",3,"src"],["maxlength","6",1,"slds-m-left--x-small","slds-input",2,"width","6rem",3,"ngModel","ngModelChange"],["class","slds-button slds-button--brand","tabindex","3",3,"disabled","click",4,"ngIf"],["tabindex","3",1,"slds-button","slds-button--brand",3,"disabled","click"]],template:function(e,t){1&e&&(n.TgZ(0,"div",0)(1,"section",1)(2,"div",2)(3,"header",3)(4,"button",4),n.NdJ("click",(function(){return t.close()})),n._UZ(5,"system-button-icon",5),n.TgZ(6,"span",6),n._uU(7,"Close"),n.qZA()(),n.YNc(8,v,2,1,"h2",7),n.YNc(9,Z,2,1,"h2",7),n.qZA(),n.TgZ(10,"div",8),n.YNc(11,C,13,14,"ng-container",9),n.YNc(12,k,9,4,"div",10),n.qZA(),n.TgZ(13,"footer",11)(14,"div",12),n.YNc(15,L,3,2,"div",10),n.TgZ(16,"div",13)(17,"button",14),n.NdJ("click",(function(){return t.close()})),n._uU(18),n.qZA(),n.YNc(19,S,3,2,"ng-container",9),n.qZA()()()()(),n._UZ(20,"div",15),n.qZA()),2&e&&(n.xp6(5),n.Q6J("icon","close"),n.xp6(3),n.Q6J("ngIf","pwd"===t.case),n.xp6(1),n.Q6J("ngIf","totp"===t.case),n.xp6(1),n.Q6J("system-overlay-loading-spinner",t.isLoading),n.xp6(1),n.Q6J("ngIf","pwd"===t.case),n.xp6(1),n.Q6J("ngIf","totp"===t.case&&!t.isLoading),n.xp6(3),n.Q6J("ngIf","totp"===t.case&&!t.isLoading),n.xp6(3),n.Oqu(t.getLabel("LBL_CANCEL")),n.xp6(1),n.Q6J("ngIf",!t.isLoading))},dependencies:[m.mk,m.O5,g.Fj,g.JJ,g.nD,g.On,p._,f.J,b.Z],encapsulation:2})),GlobalLoginChangePassword})()},314:(e,t,s)=>{"use strict";s.d(t,{r:()=>v});var i=s(1180),n=s(2242),o=s(3144),l=s(6625),a=s(3278),d=s(4755),r=s(5030),c=s(4021),u=s(8859);function h(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"div",1)(1,"div",2)(2,"div",3),n._UZ(3,"system-utility-icon",4),n.TgZ(4,"input",5),n.NdJ("ngModelChange",(function(t){n.CHM(e);const s=n.oxw();return n.KtG(s.emailOrUsername=t)})),n.qZA()()(),n.TgZ(5,"button",6),n.NdJ("click",(function(){n.CHM(e);const t=n.oxw();return n.KtG(t.sendEmail())})),n._uU(6,"Send"),n.qZA()()}if(2&e){const e=n.oxw();n.Q6J("system-overlay-loading-spinner",e.sending),n.xp6(3),n.Q6J("icon","email")("addclasses","slds-input__icon slds-icon-text-default"),n.xp6(1),n.Q6J("disabled",e.sending)("ngModel",e.emailOrUsername),n.xp6(1),n.Q6J("disabled",!e.emailOrUsernameValid||e.sending)}}function m(e,t){if(1&e&&(n.TgZ(0,"div",14),n._uU(1," Password Guideline:"),n._UZ(2,"br"),n._uU(3),n.qZA()),2&e){const e=n.oxw(2);n.xp6(3),n.hij(" ",e.pwdGuideline," ")}}function g(e,t){if(1&e&&(n.TgZ(0,"div",15),n._uU(1),n.qZA()),2&e){const e=n.oxw(2);n.xp6(1),n.Oqu(e.pwderror)}}function p(e,t){if(1&e&&(n.TgZ(0,"div",15),n._uU(1),n.qZA()),2&e){const e=n.oxw(2);n.xp6(1),n.Oqu(e.pwdreperror)}}const f=function(e){return{"slds-has-error":e}};function b(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"div",1)(1,"form",7)(2,"div",2)(3,"div",3),n._UZ(4,"system-utility-icon",4),n.TgZ(5,"input",8),n.NdJ("ngModelChange",(function(t){n.CHM(e);const s=n.oxw();return n.KtG(s.token=t)})),n.qZA()()(),n.YNc(6,m,4,1,"div",9),n.qZA(),n.TgZ(7,"form",7)(8,"div",10)(9,"div",3),n._UZ(10,"system-utility-icon",4),n.TgZ(11,"input",11),n.NdJ("ngModelChange",(function(t){n.CHM(e);const s=n.oxw();return n.KtG(s.password=t)})),n.qZA()(),n.YNc(12,g,2,1,"div",12),n.qZA(),n.TgZ(13,"div",10)(14,"div",3),n._UZ(15,"system-utility-icon",4),n.TgZ(16,"input",13),n.NdJ("ngModelChange",(function(t){n.CHM(e);const s=n.oxw();return n.KtG(s.repeatPassword=t)})),n.qZA()(),n.YNc(17,p,2,1,"div",12),n.qZA(),n.TgZ(18,"button",6),n.NdJ("click",(function(){n.CHM(e);const t=n.oxw();return n.KtG(t.resetPassword())})),n._uU(19,"Reset Password"),n.qZA()()()}if(2&e){const e=n.oxw();n.Q6J("system-overlay-loading-spinner",e.sending),n.xp6(4),n.Q6J("icon","shield")("addclasses","slds-input__icon slds-icon-text-default"),n.xp6(1),n.Q6J("disabled",e.sending)("ngModel",e.token),n.xp6(1),n.Q6J("ngIf",e.pwdGuideline),n.xp6(2),n.Q6J("ngClass",n.VKq(19,f,e.pwderror)),n.xp6(2),n.Q6J("icon","lock")("addclasses","slds-input__icon slds-icon-text-default"),n.xp6(1),n.Q6J("disabled",e.sending)("ngModel",e.password),n.xp6(1),n.Q6J("ngIf",e.password&&e.pwderror),n.xp6(1),n.Q6J("ngClass",n.VKq(21,f,e.pwdreperror)),n.xp6(2),n.Q6J("icon","lock")("addclasses","slds-input__icon slds-icon-text-default"),n.xp6(1),n.Q6J("disabled",e.sending)("ngModel",e.repeatPassword),n.xp6(1),n.Q6J("ngIf",e.repeatPassword&&e.pwdreperror),n.xp6(1),n.Q6J("disabled",!e.canSendToken||e.sending)}}let v=(()=>{var e;class GlobalLoginForgotPassword{constructor(e,t,s){(0,i.Z)(this,"http",void 0),(0,i.Z)(this,"configuration",void 0),(0,i.Z)(this,"toast",void 0),(0,i.Z)(this,"emailOrUsername",""),(0,i.Z)(this,"token",""),(0,i.Z)(this,"password",void 0),(0,i.Z)(this,"repeatPassword",void 0),(0,i.Z)(this,"pwdCheck",new RegExp("//")),(0,i.Z)(this,"pwdGuideline",void 0),(0,i.Z)(this,"tokenLength",6),(0,i.Z)(this,"sending",!1),(0,i.Z)(this,"display","email"),(0,i.Z)(this,"close",new n.vpe),(0,i.Z)(this,"activeToast",void 0),this.http=e,this.configuration=t,this.toast=s,this.getInfo()}getInfo(){let e=this.configuration.getCapabilityConfig("userpassword");this.pwdCheck=new RegExp(e.regex);let t=[];e.onelower&&t.push("one lower case"),e.oneupper&&t.push("one upper case"),e.onenumber&&t.push("one number"),e.onespecial&&t.push("one special"),e.minpwdlength&&(t.push("minimum length "+e.minpwdlength),this.tokenLength=parseInt(e.minpwdlength,10)),this.pwdGuideline=t.join(", ")}get pwderror(){return!(!this.password||this.pwdCheck.test(this.password))&&"Password does not match the Guideline."}get pwdreperror(){return this.password!=this.repeatPassword&&"Inputs for the new Password does not match."}get emailOrUsernameValid(){return this.emailOrUsername&&this.emailOrUsername.length>0}sendEmail(){this.emailOrUsernameValid&&(this.activeToast&&this.toast.clearToast(this.activeToast),this.sending=!0,this.http.get(this.configuration.getBackendUrl()+`/authentication/passwordtoken/email/${this.emailOrUsername}`).subscribe((e=>{this.display="token",this.toast.sendToast("Successfully sent, check your inbox to get the token code","success"),this.sending=!1}),(e=>{this.activeToast=this.toast.sendToast("There was an error sending the token.","error","Please verify that the mail address or user name is correct - or contact a system administrator."),this.sending=!1})))}get canSendToken(){return this.token.length==this.tokenLength&&this.password&&!this.pwderror&&!this.pwdreperror}resetPassword(){this.canSendToken&&(this.activeToast&&this.toast.clearToast(this.activeToast),this.sending=!0,this.http.post(this.configuration.getBackendUrl()+`/authentication/passwordtoken/token/${this.token}`,{newPassword:this.password}).subscribe((e=>{this.close.emit(!0),this.sending=!1}),(e=>{this.activeToast=this.toast.sendToast("there was an error resetting your password","error","please contact a system administrator"),this.sending=!1})))}}return e=GlobalLoginForgotPassword,(0,i.Z)(GlobalLoginForgotPassword,"ɵfac",(function(t){return new(t||e)(n.Y36(o.eN),n.Y36(l.C),n.Y36(a.A))})),(0,i.Z)(GlobalLoginForgotPassword,"ɵcmp",n.Xpm({type:e,selectors:[["global-login-forgot-password"]],outputs:{close:"close"},decls:2,vars:2,consts:[[3,"system-overlay-loading-spinner",4,"ngIf"],[3,"system-overlay-loading-spinner"],[1,"slds-form-element","slds-m-vertical--small"],[1,"slds-form-element__control","slds-input-has-icon","slds-input-has-icon--left"],[3,"icon","addclasses"],["type","email","placeholder","Email address of your user account or your user name",1,"slds-input","slds-p-vertical--xx-small",3,"disabled","ngModel","ngModelChange"],[1,"slds-button","slds-button--brand","slds-button_stretch",3,"disabled","click"],["autocomplete","off"],["type","text","name","token","placeholder","Token that was sent via email",1,"slds-input","slds-p-vertical--xx-small",3,"disabled","ngModel","ngModelChange"],["class","slds-m-vertical--medium",4,"ngIf"],[1,"slds-form-element","slds-m-vertical--small",3,"ngClass"],["type","password","name","password","placeholder","enter new password",1,"slds-input","slds-p-vertical--xx-small",3,"disabled","ngModel","ngModelChange"],["class","slds-form-element__help slds-text-color--error",4,"ngIf"],["type","password","name","resetPassword","placeholder","repeat new password",1,"slds-input","slds-p-vertical--xx-small",3,"disabled","ngModel","ngModelChange"],[1,"slds-m-vertical--medium"],[1,"slds-form-element__help","slds-text-color--error"]],template:function(e,t){1&e&&(n.YNc(0,h,7,6,"div",0),n.YNc(1,b,20,23,"div",0)),2&e&&(n.Q6J("ngIf","email"==t.display),n.xp6(1),n.Q6J("ngIf","token"==t.display))},dependencies:[d.mk,d.O5,r._Y,r.Fj,r.JJ,r.JL,r.On,r.F,c._,u.r],encapsulation:2})),GlobalLoginForgotPassword})()},4142:(e,t,s)=>{"use strict";s.d(t,{p:()=>d});var i=s(1180),n=s(727),o=s(2242),l=s(6550),a=s(6625);let d=(()=>{var e;class GlobalLoginImage{constructor(e,t,s){(0,i.Z)(this,"sanitizer",void 0),(0,i.Z)(this,"configuration",void 0),(0,i.Z)(this,"cdRef",void 0),(0,i.Z)(this,"defaultImageUrl","config/loginimage"),(0,i.Z)(this,"imageUrl",this.defaultImageUrl),(0,i.Z)(this,"subscriptions",new n.w0),this.sanitizer=e,this.configuration=t,this.cdRef=s}ngAfterViewInit(){this.configuration.hasCapabilityConfig("theme")&&this.setImageUrl(),this.subscriptions.add(this.configuration.loaded$.subscribe((e=>{e&&this.setImageUrl()})))}ngOnDestroy(){this.subscriptions.unsubscribe()}setImageUrl(){this.configuration.getAsset("loginimage")?this.imageUrl=this.sanitizer.bypassSecurityTrustResourceUrl(this.configuration.getAsset("loginimage")):this.configuration.getCapabilityConfig("theme").login_image?this.imageUrl=this.sanitizer.bypassSecurityTrustResourceUrl("data:"+this.configuration.getCapabilityConfig("theme").login_image):this.imageUrl=this.defaultImageUrl,this.cdRef.detectChanges()}}return e=GlobalLoginImage,(0,i.Z)(GlobalLoginImage,"ɵfac",(function(t){return new(t||e)(o.Y36(l.H7),o.Y36(a.C),o.Y36(o.sBO))})),(0,i.Z)(GlobalLoginImage,"ɵcmp",o.Xpm({type:e,selectors:[["global-login-image"]],decls:1,vars:1,consts:[[2,"max-height","25vh",3,"src"]],template:function(e,t){1&e&&o._UZ(0,"img",0),2&e&&o.Q6J("src",t.imageUrl,o.LSH)},encapsulation:2})),GlobalLoginImage})()},3981:(e,t,s)=>{"use strict";s.d(t,{N:()=>l});var i=s(1180),n=s(2242),o=s(1977);let l=(()=>{var e;class GlobalLoginLoading{}return e=GlobalLoginLoading,(0,i.Z)(GlobalLoginLoading,"ɵfac",(function(t){return new(t||e)})),(0,i.Z)(GlobalLoginLoading,"ɵcmp",n.Xpm({type:e,selectors:[["global-login-loading"]],decls:15,vars:0,consts:[[1,"slds-align--absolute-center","slds-size--1-of-1","slds-theme--default",2,"height","100vh"],[1,"slds-grid--vertical"],[1,"slds-text-align_center","slds-is-relative","slds-p-around--medium",2,"height","400px"],[1,"slds-p-around--small","slds-align--absolute-center","loader-logo-image"],["width","100%","height","auto","src","./config/loginimage"],[1,"loaderspinner"],["height","400","width","400",1,"bag"],["cx","200","cy","200","r","100","stroke-width","5","fill","none"],["height","400","width","400",1,"over"],["cx","200","cy","200","r","100","stroke-width","6","fill","none"],["id","loadstatus",1,"slds-text-align_center","slds-is-relative","slds-p-around--medium",2,"margin-top","-80px"],["id","loadermessage",1,"slds-text-align_center","slds-is-relative","slds-p-around--medium","slds-text-heading--medium","slds-text-color--error"],[1,"slds-is-absolute",2,"bottom","10px"]],template:function(e,t){1&e&&(n.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),n._UZ(4,"img",4),n.qZA(),n.TgZ(5,"div",5),n.O4$(),n.TgZ(6,"svg",6),n._UZ(7,"circle",7),n.qZA(),n.TgZ(8,"svg",8),n._UZ(9,"circle",9),n.qZA()()(),n.kcU(),n.TgZ(10,"div",10),n._uU(11,"...connecting..."),n.qZA(),n._UZ(12,"div",11),n.qZA(),n.TgZ(13,"div",12),n._UZ(14,"global-copyright"),n.qZA()())},dependencies:[o.M],encapsulation:2})),GlobalLoginLoading})()},4481:(e,t,s)=>{"use strict";s.d(t,{Q:()=>c});var i=s(1180),n=s(2242),o=s(727),l=s(6625),a=s(3369),d=s(4461);function r(e,t){if(1&e&&n._UZ(0,"global-login-oauth2-button",1),2&e){const e=t.$implicit,s=n.oxw();n.Q6J("service",e)("authenticatedUser",s.authenticatedUser)}}let c=(()=>{var e;class GlobalLoginOAuth2{constructor(e,t,s){(0,i.Z)(this,"configuration",void 0),(0,i.Z)(this,"broadcast",void 0),(0,i.Z)(this,"loginService",void 0),(0,i.Z)(this,"authenticatedUser",void 0),(0,i.Z)(this,"services",[]),(0,i.Z)(this,"subscription",new o.w0),(0,i.Z)(this,"token",new n.vpe),this.configuration=e,this.broadcast=t,this.loginService=s,this.subscribeToBroadcast()}set setSingleIssuer(e){e&&(this.services=[this.services.find((t=>e==t.issuer))])}ngOnDestroy(){this.subscription.unsubscribe()}loadServices(){const e=this.configuration.getCapabilityConfig("oauth2");Array.isArray(e)&&(this.services=e.map((e=>{const t={...e};return t.config=JSON.parse(t.config),t})))}subscribeToBroadcast(){this.subscription.add(this.configuration.loaded$.subscribe((e=>{e&&this.loadServices()})))}}return e=GlobalLoginOAuth2,(0,i.Z)(GlobalLoginOAuth2,"ɵfac",(function(t){return new(t||e)(n.Y36(l.C),n.Y36(a.f),n.Y36(d.j))})),(0,i.Z)(GlobalLoginOAuth2,"ɵcmp",n.Xpm({type:e,selectors:[["global-login-oauth2"]],inputs:{authenticatedUser:"authenticatedUser",setSingleIssuer:["issuer","setSingleIssuer"]},outputs:{token:"token"},decls:1,vars:1,consts:[[3,"service","authenticatedUser",4,"ngFor","ngForOf"],[3,"service","authenticatedUser"]],template:function(e,t){1&e&&n.YNc(0,r,1,2,"global-login-oauth2-button",0),2&e&&n.Q6J("ngForOf",t.services)},encapsulation:2})),GlobalLoginOAuth2})()},4365:(e,t,s)=>{"use strict";s.d(t,{q:()=>d});var i=s(1180),n=s(2242),o=s(4154),l=s(6119),a=s(909);let d=(()=>{var e;class GlobalNavigation{constructor(e){(0,i.Z)(this,"metadata",void 0),this.metadata=e}}return e=GlobalNavigation,(0,i.Z)(GlobalNavigation,"ɵfac",(function(t){return new(t||e)(n.Y36(o.Pu))})),(0,i.Z)(GlobalNavigation,"ɵcmp",n.Xpm({type:e,selectors:[["global-navigation"]],decls:3,vars:0,consts:[[1,"slds-context-bar"],["role","navigation",1,"slds-context-bar__secondary"]],template:function(e,t){1&e&&(n.TgZ(0,"div",0),n._UZ(1,"global-app-launcher")(2,"global-navigation-menu",1),n.qZA())},dependencies:[l.i,a.Q],encapsulation:2})),GlobalNavigation})()},2954:(e,t,s)=>{"use strict";s.d(t,{n:()=>M});var i=s(1180),n=s(2242),o=s(5710),l=s(727),a=s(5698),d=s(4154),r=s(5329),c=s(4461),u=s(2032),h=s(4376),m=s(382),g=s(5920),p=s(4044),f=s(3369),b=s(3348),v=s(4755),Z=s(5030),_=s(2656),y=s(4561),x=s(3333),w=s(8859);const T=["containermiddle"],C=["containerbottom"],A=["menucontainer"];function k(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"div",33)(1,"div",34),n._UZ(2,"system-icon",35),n.TgZ(3,"a",36)(4,"span",37),n._UZ(5,"system-label-modulename",38),n.qZA()()(),n.TgZ(6,"ul",39),n.NdJ("click",(function(){n.CHM(e);const t=n.oxw();return n.KtG(t.closeMenu())})),n.GkF(7,null,40),n.qZA()()}if(2&e){const e=n.oxw();n.xp6(2),n.Q6J("module",e.activeItem),n.xp6(3),n.Q6J("module",e.activeItem)}}function L(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"div",41),n.NdJ("click",(function(){const t=n.CHM(e).$implicit,s=n.oxw();return n.KtG(s.navigateTo(t))})),n._UZ(1,"system-icon",35),n.TgZ(2,"a",36)(3,"span",42),n._UZ(4,"system-label-modulename",38),n.qZA()()()}if(2&e){const e=t.$implicit;n.xp6(1),n.Q6J("module",e),n.xp6(3),n.Q6J("module",e)}}function I(e,t){if(1&e&&(n.TgZ(0,"option",43),n._uU(1),n.qZA()),2&e){const e=t.$implicit;n.Q6J("value",e.language),n.xp6(1),n.hij(" ",e.text," ")}}let M=(()=>{var e;class GlobalNavigationCompact{constructor(e,t,s,n,o,a,d,r,c,u,h,m){(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"loginService",void 0),(0,i.Z)(this,"navigation",void 0),(0,i.Z)(this,"favorite",void 0),(0,i.Z)(this,"model",void 0),(0,i.Z)(this,"recent",void 0),(0,i.Z)(this,"session",void 0),(0,i.Z)(this,"modal",void 0),(0,i.Z)(this,"cdr",void 0),(0,i.Z)(this,"broadcast",void 0),(0,i.Z)(this,"router",void 0),(0,i.Z)(this,"containermiddle",void 0),(0,i.Z)(this,"containerbottom",void 0),(0,i.Z)(this,"menucontainer",void 0),(0,i.Z)(this,"showmenu",!1),(0,i.Z)(this,"menuitems",[]),(0,i.Z)(this,"activeItem",""),(0,i.Z)(this,"activeItemMenu",[]),(0,i.Z)(this,"activeItemMenucomponents",[]),(0,i.Z)(this,"subscriptions",new l.w0),this.metadata=e,this.language=t,this.loginService=s,this.navigation=n,this.favorite=o,this.model=a,this.recent=d,this.session=r,this.modal=c,this.cdr=u,this.broadcast=h,this.router=m,this.buildMenuItems();let g=this.navigation.activeModule$.subscribe((e=>this.buildModuleMenuItems()));this.subscriptions.add(g);let p=this.broadcast.message$.subscribe((e=>{this.handleMessage(e)}));this.subscriptions.add(p)}get activeItemIsModule(){return!!this.metadata.getModuleDefs(this.activeItem)}set currentlanguage(e){this.language.currentlanguage=e,this.language.loadLanguage()}get currentlanguage(){return this.language.currentlanguage}get menuItems(){return this.menuitems.filter((e=>e!=this.activeItem))}get activeRoleName(){let e=this.metadata.getActiveRole();return e.label&&""!=e.label?this.language.getLabel(e.label):this.metadata.getActiveRole().name}get containerMiddleStyle(){return{height:`calc(100vh - ${this.containermiddle.element.nativeElement.offsetTop+this.containerbottom.element.nativeElement.offsetHeight}px)`}}get menuStyle(){return{left:this.showmenu?"0px":"-250px","box-shadow":this.showmenu?"5px 0 15px #888":"none"}}ngAfterViewInit(){this.buildModuleMenuItems(),this.cdr.detectChanges()}handleMessage(e){switch(e.messagetype){case"applauncher.setrole":case"loader.reloaded":this.buildMenuItems()}}navigateTo(e){this.router.navigate(["/module/"+e]),this.showmenu=!1}buildMenuItems(){this.menuitems=[];let e=this.metadata.getRoleModules(!0);for(let t of e)this.menuitems.push(t)}buildModuleMenuItems(){this.activeItem=this.navigation.activeModule,this.destroyActiveItemMenu(),this.activeItemMenu=[],this.activeItemIsModule&&this.menucontainer&&(this.model.module=this.activeItem,this.activeItemMenu=this.metadata.getModuleMenu(this.activeItem),this.buildActiveItemMenu())}showAppLauncher(){this.showmenu=!1,this.modal.openModal("GlobalAppLauncherDialog")}getAvialableLanguages(){return this.language.getAvialableLanguages(!0)}toggleMenu(){this.showmenu=!this.showmenu}closeMenu(){this.showmenu=!1}logout(){this.loginService.logout()}trackByFn(e,t){return t.id}buildActiveItemMenu(){for(let e of this.activeItemMenu)switch(e.action){case"NEW":this.metadata.checkModuleAcl(this.activeItem,"create")&&this.metadata.addComponent("GlobalNavigationMenuItemNew",this.menucontainer).pipe((0,a.q)(1)).subscribe((e=>{this.activeItemMenucomponents.push(e)}));break;case"ROUTE":this.metadata.addComponent("GlobalNavigationMenuItemRoute",this.menucontainer).pipe((0,a.q)(1)).subscribe((t=>{t.instance.actionconfig=e.actionconfig,this.activeItemMenucomponents.push(t)}))}}destroyActiveItemMenu(){for(let e of this.activeItemMenucomponents)e.destroy()}ngOnDestroy(){this.subscriptions.unsubscribe(),this.destroyActiveItemMenu(),this.cdr.detach()}}return e=GlobalNavigationCompact,(0,i.Z)(GlobalNavigationCompact,"ɵfac",(function(t){return new(t||e)(n.Y36(d.Pu),n.Y36(r.d),n.Y36(c.j),n.Y36(u.G),n.Y36(h.G),n.Y36(o.o),n.Y36(m.h),n.Y36(g.n),n.Y36(p.o),n.Y36(n.sBO),n.Y36(f.f),n.Y36(b.F0))})),(0,i.Z)(GlobalNavigationCompact,"ɵcmp",n.Xpm({type:e,selectors:[["global-navigation-compact"]],viewQuery:function(e,t){if(1&e&&(n.Gf(T,7,n.s_b),n.Gf(C,7,n.s_b),n.Gf(A,7,n.s_b)),2&e){let e;n.iGM(e=n.CRH())&&(t.containermiddle=e.first),n.iGM(e=n.CRH())&&(t.containerbottom=e.first),n.iGM(e=n.CRH())&&(t.menucontainer=e.first)}},features:[n._Bn([o.o])],decls:35,vars:10,consts:[[1,"slds-button","slds-button--icon",3,"click"],["icon","rows","size","small"],[1,"slds-is-absolute","slds-theme--shade",2,"width","250px","top","0","z-index","998","height","100vh","transition","left 1s",3,"ngStyle"],[1,"slds-grid","slds-grid--align-spread","slds-grid--vertical-align-start","slds-p-around--x-small"],[1,"slds-grid","slds-grid--vertical-align-center"],[2,"transform","scale(0.8)",3,"click"],["href","javascript:void(0);",1,"slds-icon-waffle_container"],[1,"slds-icon-waffle"],[1,"slds-r1"],[1,"slds-r2"],[1,"slds-r3"],[1,"slds-r4"],[1,"slds-r5"],[1,"slds-r6"],[1,"slds-r7"],[1,"slds-r8"],[1,"slds-r9"],[1,"slds-truncate","slds-p-left--xx-small","slds-text-heading_small"],["icon","close"],["class","slds-theme--default slds-p-vertical--x-small",4,"ngIf"],[1,"slds-grid",3,"ngStyle"],["containermiddle",""],[1,"slds-has-divider--bottom-space","slds-scrollable--y","spice-scrollbar",2,"width","100%"],["class","slds-grid slds-grid--vertical-align-center slds-p-vertical--x-small  slds-p-left--small",3,"click",4,"ngFor","ngForOf","ngForTrackBy"],[1,"slds-grid","slds-grid--vertical-align-center","slds-p-around--xx-small"],["containerbottom",""],[1,"slds-form-element","slds-grow"],[1,"slds-form-element__control"],[1,"slds-select_container"],[1,"slds-select",3,"disabled","ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[1,"slds-grid","slds-grid--align-end","slds-p-horizontal--small","slds-col--bump-left"],["icon","logout","size","x-small",3,"title","click"],[1,"slds-theme--default","slds-p-vertical--x-small"],[1,"slds-grid","slds-grid--vertical-align-center","slds-p-left--small","slds-p-vertical--xx-small"],["size","x-small","divClass","",3,"module"],["href","javascript:void(0);",1,"slds-p-left--small","slds-text-heading_small"],[1,"slds-truncate",2,"font-weight","bold"],[3,"module"],["role","menu",3,"click"],["menucontainer",""],[1,"slds-grid","slds-grid--vertical-align-center","slds-p-vertical--x-small","slds-p-left--small",3,"click"],[1,"slds-truncate"],[3,"value"]],template:function(e,t){1&e&&(n.TgZ(0,"button",0),n.NdJ("click",(function(){return t.toggleMenu()})),n._UZ(1,"system-utility-icon",1),n.qZA(),n.TgZ(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5),n.NdJ("click",(function(){return t.showAppLauncher()})),n.TgZ(6,"a",6)(7,"div",7),n._UZ(8,"div",8)(9,"div",9)(10,"div",10)(11,"div",11)(12,"div",12)(13,"div",13)(14,"div",14)(15,"div",15)(16,"div",16),n.qZA()()(),n.TgZ(17,"div",17),n._uU(18),n.qZA()(),n.TgZ(19,"button",0),n.NdJ("click",(function(){return t.closeMenu()})),n._UZ(20,"system-button-icon",18),n.qZA()(),n.YNc(21,k,9,2,"div",19),n.TgZ(22,"div",20,21)(24,"div",22),n.YNc(25,L,5,2,"div",23),n.qZA()(),n.TgZ(26,"div",24,25)(28,"div",26)(29,"div",27)(30,"div",28)(31,"select",29),n.NdJ("ngModelChange",(function(e){return t.currentlanguage=e})),n.YNc(32,I,2,2,"option",30),n.qZA()()()(),n.TgZ(33,"div",31)(34,"system-utility-icon",32),n.NdJ("click",(function(){return t.logout()})),n.qZA()()()()),2&e&&(n.xp6(2),n.Q6J("ngStyle",t.menuStyle),n.xp6(16),n.Oqu(t.activeRoleName),n.xp6(3),n.Q6J("ngIf",t.activeItemIsModule),n.xp6(1),n.Q6J("ngStyle",t.containerMiddleStyle),n.xp6(3),n.Q6J("ngForOf",t.menuItems)("ngForTrackBy",t.trackByFn),n.xp6(6),n.Q6J("disabled",t.getAvialableLanguages().length<=1)("ngModel",t.currentlanguage),n.xp6(1),n.Q6J("ngForOf",t.getAvialableLanguages()),n.xp6(2),n.Q6J("title",t.language.getLabel("LBL_LOGOFF")))},dependencies:[v.sg,v.O5,v.PC,Z.YN,Z.Kr,Z.EJ,Z.JJ,Z.On,_.J,y.f,x.M,w.r],encapsulation:2})),GlobalNavigationCompact})()},6119:(e,t,s)=>{"use strict";s.d(t,{i:()=>c});var i=s(1180),n=s(2242),o=s(4154),l=s(3369),a=s(2032);const d=["menucontainer"],r=["morecontainer"];let c=(()=>{var e;class GlobalNavigationMenu{constructor(e,t,s,n){(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"elementRef",void 0),(0,i.Z)(this,"broadcast",void 0),(0,i.Z)(this,"navigation",void 0),(0,i.Z)(this,"menucontainer",void 0),(0,i.Z)(this,"morecontainer",void 0),(0,i.Z)(this,"moreComponentRef",void 0),(0,i.Z)(this,"menuItems",[]),(0,i.Z)(this,"renderedItems",[]),(0,i.Z)(this,"moreItems",[]),(0,i.Z)(this,"movingActive",!1),(0,i.Z)(this,"rendering",!1),(0,i.Z)(this,"resizeTimeOut",void 0),this.metadata=e,this.elementRef=t,this.broadcast=s,this.navigation=n,this.broadcast.message$.subscribe((e=>{this.handleMessage(e)})),this.navigation.activeModule$.subscribe((e=>this.checkActiveModule()))}ngAfterViewInit(){this.buildMenuItems(),this.renderMenu()}buildMenuItems(){this.menuItems=[];let e=this.metadata.getRoleModules(!0);for(let t of e)this.menuItems.push(t)}handleResize(){this.buildMenuItems(),this.resizeTimeOut&&window.clearTimeout(this.resizeTimeOut),this.resizeTimeOut=window.setTimeout((()=>this.renderMenu()),250)}checkActiveModule(){if(this.movingActive||this.rendering)return!1;let e=this.menuItems.indexOf(this.navigation.activeModule),t=!1;for(let e of this.renderedItems)if(e.module==this.navigation.activeModule){t=!0;break}if(!t&&0!=e&&e+1>this.renderedItems.length){let t=this.menuItems.splice(e,1),s=this.renderedItems.pop();return s&&(s.componentRef.destroy(),this.menuItems.splice(this.renderedItems.length,0,t[0]),this.movingActive=!0,this.destroyMoreItem(),this.addMenuItem(this.menuItems[this.renderedItems.length],this.menuItems[this.renderedItems.length])),!1}return!0}destroyMenu(){for(let e of this.renderedItems)e.componentRef.destroy();this.renderedItems=[],this.destroyMoreItem(),this.movingActive=!1}renderMenu(){this.destroyMenu(),this.rendering=!0,this.addMenuItem(this.menuItems[0],this.menuItems[0])}addMenuItem(e,t){this.metadata.addComponentDirect("GlobalNavigationMenuItem",this.menucontainer).subscribe((s=>{s.instance.item={module:e,name:t},this.renderedItems.push({module:e,componentRef:s})}))}addMoreItem(){this.destroyMoreItem(),this.metadata.addComponentDirect("GlobalNavigationMenuMore",this.menucontainer).subscribe((e=>{this.moreItems=[];let t=this.renderedItems.length;for(;t<this.menuItems.length;)this.moreItems.push(this.menuItems[t]),t++;e.instance.moreMenuItems=this.moreItems,this.moreComponentRef={componentRef:e}}))}destroyMoreItem(){this.moreComponentRef&&(this.moreComponentRef.componentRef.destroy(),this.moreComponentRef=void 0)}getRenderedWidth(){let e=0;for(let t of this.renderedItems)e+=t.width;return e}handleMessage(e){switch(e.messagetype){case"applauncher.setrole":case"loader.reloaded":this.buildMenuItems(),this.renderMenu();break;case"navigation.itemadded":for(let t of this.renderedItems)t.module===e.messagedata.module&&(t.width=e.messagedata.width);let t=this.getRenderedWidth();if(this.movingActive)this.elementRef.nativeElement.offsetWidth,this.movingActive=!1,this.addMoreItem();else if(t>this.elementRef.nativeElement.offsetWidth){this.renderedItems.pop().componentRef.destroy(),this.menuItems.length>this.renderedItems.length?this.addMoreItem():this.rendering=!1}else this.menuItems.length>this.renderedItems.length&&this.addMenuItem(this.menuItems[this.renderedItems.length],this.menuItems[this.renderedItems.length]);break;case"navigation.moreadded":if(this.moreComponentRef.width=e.messagedata.width,this.renderedItems.length>0&&this.getRenderedWidth()+e.messagedata.width>this.elementRef.nativeElement.offsetWidth){this.renderedItems.pop().componentRef.destroy(),this.checkActiveModule()&&this.addMoreItem()}}}}return e=GlobalNavigationMenu,(0,i.Z)(GlobalNavigationMenu,"ɵfac",(function(t){return new(t||e)(n.Y36(o.Pu),n.Y36(n.SBq),n.Y36(l.f),n.Y36(a.G))})),(0,i.Z)(GlobalNavigationMenu,"ɵcmp",n.Xpm({type:e,selectors:[["global-navigation-menu"]],viewQuery:function(e,t){if(1&e&&(n.Gf(d,7,n.s_b),n.Gf(r,7,n.s_b)),2&e){let e;n.iGM(e=n.CRH())&&(t.menucontainer=e.first),n.iGM(e=n.CRH())&&(t.morecontainer=e.first)}},hostBindings:function(e,t){1&e&&n.NdJ("resize",(function(){return t.handleResize()}),!1,n.Jf7)},decls:5,vars:0,consts:[[1,"slds-grid"],["menucontainer",""],["morecontainer",""]],template:function(e,t){1&e&&(n.TgZ(0,"ul",0),n._UZ(1,"div",null,1)(3,"div",null,2),n.qZA())},encapsulation:2})),GlobalNavigationMenu})()},5853:(e,t,s)=>{"use strict";s.d(t,{r:()=>r});var i=s(1180),n=s(2242),o=s(5329),l=s(4154),a=s(5710);const d=["actioncontainer"];let r=(()=>{var e;class GlobalNavigationMenuItemActionContainer{constructor(e,t,s,o,l){(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"model",void 0),(0,i.Z)(this,"ngZone",void 0),(0,i.Z)(this,"cdr",void 0),(0,i.Z)(this,"actioncontainer",void 0),(0,i.Z)(this,"actionitem",void 0),(0,i.Z)(this,"actionemitter",new n.vpe),(0,i.Z)(this,"componentref",void 0),(0,i.Z)(this,"standardActions",{NEW:"GlobalNavigationMenuItemActionNew",ROUTE:"GlobalNavigationMenuItemActionRoute"}),(0,i.Z)(this,"stable",!1),(0,i.Z)(this,"stableSub",void 0),this.language=e,this.metadata=t,this.model=s,this.ngZone=o,this.cdr=l}get id(){return this.actionitem.id}get disabled(){return!this.componentref||!!this.componentref.instance.disabled}get hidden(){return!this.componentref||!!this.componentref.instance.hidden}ngAfterViewInit(){this.metadata.addComponent(this.actionitem.action?this.standardActions[this.actionitem.action]:this.actionitem.component,this.actioncontainer).subscribe((e=>{e.instance.parent=this.model,e.instance.actionconfig=this.actionitem.actionconfig,e.instance.actionemitter&&e.instance.actionemitter.subscribe((e=>{this.actionemitter.emit(e)})),this.componentref=e,this.cdr.detectChanges()}))}execute(){this.componentref&&this.componentref.instance.execute&&this.componentref.instance.execute()}}return e=GlobalNavigationMenuItemActionContainer,(0,i.Z)(GlobalNavigationMenuItemActionContainer,"ɵfac",(function(t){return new(t||e)(n.Y36(o.d),n.Y36(l.Pu),n.Y36(a.o),n.Y36(n.R0b),n.Y36(n.sBO))})),(0,i.Z)(GlobalNavigationMenuItemActionContainer,"ɵcmp",n.Xpm({type:e,selectors:[["global-navigation-menu-item-action-container"]],viewQuery:function(e,t){if(1&e&&n.Gf(d,7,n.s_b),2&e){let e;n.iGM(e=n.CRH())&&(t.actioncontainer=e.first)}},inputs:{actionitem:"actionitem"},outputs:{actionemitter:"actionemitter"},decls:2,vars:0,consts:[["actioncontainer",""]],template:function(e,t){1&e&&n._UZ(0,"div",null,0)},encapsulation:2})),GlobalNavigationMenuItemActionContainer})()},6131:(e,t,s)=>{"use strict";s.d(t,{s:()=>x});var i=s(1180),n=s(727),o=s(1591),l=s(9183),a=s(2242),d=s(4154),r=s(2032),c=s(2422),u=s(4755),h=s(2656),m=s(141),g=s(7283),p=s(2401),f=s(909),b=s(3861);function v(e,t){if(1&e&&(a.TgZ(0,"div",8)(1,"div",9),a._UZ(2,"global-header-search",10,11),a.qZA(),a._UZ(4,"global-header-tools")(5,"global-user"),a.qZA()),2&e){const e=a.MAs(3);a.xp6(2),a.Q6J("@isFocused",e.isFocused?"expand":"collapse")}}function Z(e,t){if(1&e&&(a.TgZ(0,"div",12),a._UZ(1,"div",13),a.qZA()),2&e){const e=a.oxw();a.xp6(1),a.Udp("width",e.progressWidth,"%")}}function _(e,t){if(1&e&&(a.TgZ(0,"div",14),a._UZ(1,"global-navigation-tabbed-subtabs",15),a.qZA()),2&e){const e=a.oxw();a.xp6(1),a.Q6J("parenttab",e.parentTab)}}const y=[(0,o.X$)("isFocused",[(0,o.SB)("expand",(0,o.oB)({position:"absolute",width:"calc(100vw / 2)","box-shadow":"#565555 -2px 0px 9px 0px","z-index":10})),(0,o.SB)("collapse",(0,o.oB)({position:"initial",width:"15rem"})),(0,o.eR)("collapse <=> expand",[(0,o.jt)("200ms")])])];let x=(()=>{var e;class GlobalNavigationTabbed{constructor(e,t,s,o){(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"navigation",void 0),(0,i.Z)(this,"userPreferences",void 0),(0,i.Z)(this,"cdRef",void 0),(0,i.Z)(this,"parentTab",void 0),(0,i.Z)(this,"displaySubTabs",!1),(0,i.Z)(this,"subscriptions",new n.w0),(0,i.Z)(this,"progressWidth",0),(0,i.Z)(this,"showProgressBar",!1),(0,i.Z)(this,"menuContainer",void 0),this.metadata=e,this.navigation=t,this.userPreferences=s,this.cdRef=o}ngAfterViewInit(){this.subscribeToNavigationChanges()}ngOnDestroy(){this.subscriptions.unsubscribe()}get contextbarStyle(){return this.userPreferences.toUse.globalHeaderCollapsed?{"border-top":"0px"}:{}}setDisplaySubTabs(e){this.displaySubTabs="subtabbed"==this.navigation.navigationparadigm&&!!e&&(!!e.parentid||this.navigation.getSubTabs(e.id).length>0),this.cdRef.detectChanges()}setParentTab(e){this.parentTab=e&&e.parentid?this.navigation.getTabById(e.parentid):e}subscribeToNavigationChanges(){this.subscriptions.add(this.navigation.activeTab$.subscribe((e=>{this.handleNavigationChanges(e)}))),this.subscriptions.add(this.navigation.objectTabsChange$.subscribe((()=>{this.handleNavigationChanges(this.navigation.activeTab)})))}handleNavigationChanges(e){const t=this.navigation.getTabById(e);this.setParentTab(t),this.setDisplaySubTabs(t)}toggleCollapse(){this.userPreferences.toUse.globalHeaderCollapsed=!this.userPreferences.toUse.globalHeaderCollapsed,this.userPreferences.setPreference("globalHeaderCollapsed",this.userPreferences.toUse.globalHeaderCollapsed),setTimeout((()=>this.menuContainer.handleResize()),200)}}return e=GlobalNavigationTabbed,(0,i.Z)(GlobalNavigationTabbed,"ɵfac",(function(t){return new(t||e)(a.Y36(d.Pu),a.Y36(r.G),a.Y36(c.z),a.Y36(a.sBO))})),(0,i.Z)(GlobalNavigationTabbed,"ɵcmp",a.Xpm({type:e,selectors:[["global-navigation-tabbed"]],viewQuery:function(e,t){if(1&e&&a.Gf(l.O,5),2&e){let e;a.iGM(e=a.CRH())&&(t.menuContainer=e.first)}},inputs:{progressWidth:"progressWidth",showProgressBar:"showProgressBar"},decls:8,vars:5,consts:[[1,"slds-context-bar","slds-context-bar_tabs","slds-p-left--xx-small",3,"ngStyle"],[1,"slds-context-bar__primary"],["role","navigation",1,"slds-context-bar__secondary"],[1,"slds-button","slds-button--icon","slds-m-right--xx-small",3,"click"],[3,"icon"],["class","slds-global-header__item slds-p-horizontal--xx-small slds-grid slds-grid--align-end slds-grid--vertical-align-center",4,"ngIf"],["class","slds-context-bar-progress-bar",4,"ngIf"],["class","slds-tabs_default slds-sub-tabs",4,"ngIf"],[1,"slds-global-header__item","slds-p-horizontal--xx-small","slds-grid","slds-grid--align-end","slds-grid--vertical-align-center"],[1,"slds-global-header__item","slds-is-relative","slds-height_full","slds-p-top--xxx-small","slds-p-horizontal--none",2,"min-width","15rem"],[1,"spice-display-block",2,"right","0","z-index","1"],["searchContainer",""],[1,"slds-context-bar-progress-bar"],[1,"slds-height_full"],[1,"slds-tabs_default","slds-sub-tabs"],[3,"parenttab"]],template:function(e,t){1&e&&(a.TgZ(0,"div",0),a._UZ(1,"global-app-launcher",1)(2,"global-navigation-tabbed-menu",2),a.TgZ(3,"button",3),a.NdJ("click",(function(){return t.toggleCollapse()})),a._UZ(4,"system-button-icon",4),a.qZA(),a.YNc(5,v,6,1,"div",5),a.YNc(6,Z,2,2,"div",6),a.qZA(),a.YNc(7,_,2,1,"div",7)),2&e&&(a.Q6J("ngStyle",t.contextbarStyle),a.xp6(4),a.Q6J("icon",t.userPreferences.toUse.globalHeaderCollapsed?"chevrondown":"chevronup"),a.xp6(1),a.Q6J("ngIf",t.userPreferences.toUse.globalHeaderCollapsed),a.xp6(1),a.Q6J("ngIf",t.showProgressBar),a.xp6(1),a.Q6J("ngIf",t.displaySubTabs))},dependencies:[u.O5,u.PC,h.J,m.z,g.I,p.x,f.Q,l.O,b._],encapsulation:2,data:{animation:y}})),GlobalNavigationTabbed})()},8313:(e,t,s)=>{"use strict";s.d(t,{P:()=>u});var i=s(1180),n=s(1591),o=s(2242),l=s(2032),a=s(4044),d=s(4755),r=s(8859);function c(e,t){if(1&e){const e=o.EpF();o.TgZ(0,"system-utility-icon",1),o.NdJ("click",(function(){o.CHM(e);const t=o.oxw();return o.KtG(t.openModal())})),o.qZA()}2&e&&o.Q6J("@browsertabbutton",void 0)}let u=(()=>{var e;class GlobalNavigationTabbedBrowser{constructor(e,t,s){(0,i.Z)(this,"navigation",void 0),(0,i.Z)(this,"modal",void 0),(0,i.Z)(this,"elementRef",void 0),this.navigation=e,this.modal=t,this.elementRef=s}get tabWidth(){return this.elementRef.nativeElement.getBoundingClientRect().width}get hasTabs(){return this.navigation.objectTabs.length>0}openModal(){this.modal.openModal("GlobalNavigationTabbedBrowserModal")}}return e=GlobalNavigationTabbedBrowser,(0,i.Z)(GlobalNavigationTabbedBrowser,"ɵfac",(function(t){return new(t||e)(o.Y36(l.G),o.Y36(a.o),o.Y36(o.SBq))})),(0,i.Z)(GlobalNavigationTabbedBrowser,"ɵcmp",o.Xpm({type:e,selectors:[["global-navigation-tabbed-browser"]],hostVars:2,hostBindings:function(e,t){1&e&&o.NdJ("click",(function(){return t.openModal()})),2&e&&o.ekj("slds-context-bar__item",1)},decls:1,vars:1,consts:[["icon","tabset","size","x-small","class","slds-p-around--x-small slds-border--left",3,"click",4,"ngIf"],["icon","tabset","size","x-small",1,"slds-p-around--x-small","slds-border--left",3,"click"]],template:function(e,t){1&e&&o.YNc(0,c,1,1,"system-utility-icon",0),2&e&&o.Q6J("ngIf",t.hasTabs)},dependencies:[d.O5,r.r],encapsulation:2,data:{animation:[(0,n.X$)("browsertabbutton",[(0,n.eR)(":enter",[(0,n.oB)({opacity:0}),(0,n.jt)(".5s",(0,n.oB)({opacity:1}))]),(0,n.eR)(":leave",[(0,n.jt)(".5s",(0,n.oB)({opacity:0}))])])]}})),GlobalNavigationTabbedBrowser})()},9183:(e,t,s)=>{"use strict";s.d(t,{O:()=>p});var i=s(1180),n=s(6962),o=s(26),l=s(2429),a=s(8313),d=s(727),r=s(2242),c=s(4154),u=s(3369),h=s(2032),m=s(4755);function g(e,t){if(1&e&&r._UZ(0,"global-navigation-tabbed-menu-tab",3),2&e){const e=t.$implicit;r.Q6J("object",e)}}let p=(()=>{var e;class GlobalNavigationTabbedMenu{constructor(e,t,s,n){(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"elementRef",void 0),(0,i.Z)(this,"broadcast",void 0),(0,i.Z)(this,"navigation",void 0),(0,i.Z)(this,"menuModules",void 0),(0,i.Z)(this,"menuTabs",void 0),(0,i.Z)(this,"menuMore",void 0),(0,i.Z)(this,"menuBrowser",void 0),(0,i.Z)(this,"resizeTimeOut",void 0),(0,i.Z)(this,"subscriptions",new d.w0),this.metadata=e,this.elementRef=t,this.broadcast=s,this.navigation=n,this.subscriptions.add(this.navigation.objectTabsChange$.subscribe((e=>{window.setTimeout((()=>{this.handleResize()}))})))}ngAfterViewInit(){setTimeout((()=>this.handleResize()))}ngOnDestroy(){this.subscriptions.unsubscribe()}get objectTabs(){return this.navigation.objectTabs.filter((e=>!e.parentid)).sort(((e,t)=>e.pinned&&t.pinned||!e.pinned&&!t.pinned?0:e.pinned?-1:1))}trackByFn(e,t){return t.id}handleResize(){let e=this.elementRef.nativeElement.getBoundingClientRect().width-this.menuModules.tabWidth-this.menuBrowser.tabWidth;this.menuMore.elementRef.nativeElement.classList.remove("slds-hide"),this.menuMore.elementRef.nativeElement.classList.add("slds-hidden"),this.menuMore.moreObjects=[];let t=this.menuMore.tabWidth;this.menuTabs.forEach((e=>{e.elementRef.nativeElement.classList.remove("slds-hide"),e.elementRef.nativeElement.classList.add("slds-hidden")}));let s=0,i=!1;return this.menuTabs.forEach(((n,o)=>{let l=n.elementRef.nativeElement.getBoundingClientRect().width;s+=l,(i||o+1==this.menuTabs.length&&s>e||o+1<this.menuTabs.length&&s>e-t)&&(n.elementRef.nativeElement.classList.add("slds-hide"),i=!0,this.menuMore.moreObjects.push(n.object)),n.elementRef.nativeElement.classList.remove("slds-hidden")})),i?this.menuMore.elementRef.nativeElement.classList.remove("slds-hidden"):this.menuMore.elementRef.nativeElement.classList.add("slds-hide"),!0}}return e=GlobalNavigationTabbedMenu,(0,i.Z)(GlobalNavigationTabbedMenu,"ɵfac",(function(t){return new(t||e)(r.Y36(c.Pu),r.Y36(r.SBq),r.Y36(u.f),r.Y36(h.G))})),(0,i.Z)(GlobalNavigationTabbedMenu,"ɵcmp",r.Xpm({type:e,selectors:[["global-navigation-tabbed-menu"]],viewQuery:function(e,t){if(1&e&&(r.Gf(n.Q,5),r.Gf(o.K,5),r.Gf(a.P,5),r.Gf(l.y,5)),2&e){let e;r.iGM(e=r.CRH())&&(t.menuModules=e.first),r.iGM(e=r.CRH())&&(t.menuMore=e.first),r.iGM(e=r.CRH())&&(t.menuBrowser=e.first),r.iGM(e=r.CRH())&&(t.menuTabs=e)}},hostBindings:function(e,t){1&e&&r.NdJ("resize",(function(){return t.handleResize()}),!1,r.Jf7)},decls:4,vars:2,consts:[[3,"object",4,"ngFor","ngForOf","ngForTrackBy"],[1,"slds-hidden"],[1,"slds-col--bump-left"],[3,"object"]],template:function(e,t){1&e&&(r._UZ(0,"global-navigation-tabbed-menu-modules"),r.YNc(1,g,1,1,"global-navigation-tabbed-menu-tab",0),r._UZ(2,"global-navigation-tabbed-more-tab",1)(3,"global-navigation-tabbed-browser",2)),2&e&&(r.xp6(1),r.Q6J("ngForOf",t.objectTabs)("ngForTrackBy",t.trackByFn))},dependencies:[m.sg,n.Q,l.y,o.K,a.P],encapsulation:2})),GlobalNavigationTabbedMenu})()},9570:(e,t,s)=>{"use strict";s.d(t,{L:()=>F});var i=s(1180),n=s(2242),o=s(5710),l=s(2294),a=s(5853),d=s(4154),r=s(3369),c=s(2032),u=s(3348),h=s(5329),m=s(382),g=s(4376),p=s(4755),f=s(7763),b=s(3463),v=s(4664),Z=s(5931);const _=function(e){return{"slds-hide":e}},y=function(e){return{"slds-disabled-text":e}};function x(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"li",5),n.NdJ("click",(function(){const t=n.CHM(e).$implicit,s=n.oxw(2);return n.KtG(s.propagateclick(t.id))})),n.TgZ(1,"a",6),n._UZ(2,"global-navigation-menu-item-action-container",7),n.qZA()()}if(2&e){const e=t.$implicit,s=n.oxw(2);n.Q6J("ngClass",n.VKq(3,_,s.isHidden(e.id))),n.xp6(2),n.Q6J("ngClass",n.VKq(5,y,s.isDisabled(e.id)))("actionitem",e)}}function w(e,t){if(1&e&&(n.ynx(0),n.YNc(1,x,3,7,"li",4),n.BQk()),2&e){const e=n.oxw();n.xp6(1),n.Q6J("ngForOf",e.itemMenu)}}function T(e,t){if(1&e&&(n.TgZ(0,"span",15),n._uU(1),n.qZA()),2&e){const e=n.oxw().$implicit;n.xp6(1),n.Oqu(e.item_summary)}}function C(e,t){if(1&e&&n._UZ(0,"object-record-fieldset-horizontal-list",16),2&e){const e=n.oxw(3);n.Q6J("fieldset",e.displayfieldset)}}const A=function(e,t,s){return{module:e,id:t,data:s}};function k(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"li",12),n.NdJ("click",(function(){const t=n.CHM(e).$implicit,s=n.oxw(2);return n.KtG(s.openRecord(t.item_id))})),n.TgZ(1,"a",6),n.YNc(2,T,2,1,"span",13),n.YNc(3,C,1,1,"object-record-fieldset-horizontal-list",14),n.qZA()()}if(2&e){const e=t.$implicit,s=n.oxw(2);n.Q6J("system-model-provider",n.kEZ(3,A,s.module,e.id,e.data)),n.xp6(2),n.Q6J("ngIf",!s.displayfieldset),n.xp6(1),n.Q6J("ngIf",s.displayfieldset)}}function L(e,t){if(1&e&&(n.ynx(0),n.TgZ(1,"li",8)(2,"span",9),n._UZ(3,"system-label",10),n.qZA()(),n.YNc(4,k,4,7,"li",11),n.BQk()),2&e){const e=n.oxw();n.xp6(4),n.Q6J("ngForOf",e.favorites)}}function I(e,t){if(1&e&&(n.TgZ(0,"span",15),n._uU(1),n.qZA()),2&e){const e=n.oxw().$implicit;n.xp6(1),n.Oqu(e.data.summary_text)}}function M(e,t){if(1&e&&n._UZ(0,"object-record-fieldset-horizontal-list",16),2&e){const e=n.oxw(3);n.Q6J("fieldset",e.displayfieldset)}}function S(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"li",12),n.NdJ("click",(function(){const t=n.CHM(e).$implicit,s=n.oxw(2);return n.KtG(s.openRecord(t.item_id))})),n.TgZ(1,"a",6),n.YNc(2,I,2,1,"span",13),n.YNc(3,M,1,1,"object-record-fieldset-horizontal-list",14),n.qZA()()}if(2&e){const e=t.$implicit,s=n.oxw(2);n.Q6J("system-model-provider",n.kEZ(3,A,s.module,e.id,e.data)),n.xp6(2),n.Q6J("ngIf",!s.displayfieldset),n.xp6(1),n.Q6J("ngIf",s.displayfieldset)}}function J(e,t){1&e&&(n.TgZ(0,"li",20),n._UZ(1,"system-label",21),n.qZA())}function O(e,t){1&e&&n._UZ(0,"system-spinner",22)}function N(e,t){if(1&e&&(n.ynx(0),n.TgZ(1,"li",8)(2,"span",9),n._UZ(3,"system-label",17),n.qZA()(),n.YNc(4,S,4,7,"li",11),n.YNc(5,J,2,0,"li",18),n.YNc(6,O,1,0,"system-spinner",19),n.BQk()),2&e){const e=n.oxw();n.xp6(4),n.Q6J("ngForOf",e.recentitems),n.xp6(1),n.Q6J("ngIf",!e.loadingRecent&&0==e.recentitems.length),n.xp6(1),n.Q6J("ngIf",e.loadingRecent)}}let F=(()=>{var e;class GlobalNavigationTabbedMenuModuleMenu{constructor(e,t,s,o,l,a,d,r,c,u){(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"model",void 0),(0,i.Z)(this,"view",void 0),(0,i.Z)(this,"broadcast",void 0),(0,i.Z)(this,"navigation",void 0),(0,i.Z)(this,"router",void 0),(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"recent",void 0),(0,i.Z)(this,"favorite",void 0),(0,i.Z)(this,"cdRef",void 0),(0,i.Z)(this,"menuItemlist",void 0),(0,i.Z)(this,"module",void 0),(0,i.Z)(this,"actionTriggered",new n.vpe),(0,i.Z)(this,"itemMenu",[]),(0,i.Z)(this,"loadingRecent",!1),(0,i.Z)(this,"recentitems",[]),(0,i.Z)(this,"favorites",[]),(0,i.Z)(this,"displayfieldset",void 0),this.metadata=e,this.model=t,this.view=s,this.broadcast=o,this.navigation=l,this.router=a,this.language=d,this.recent=r,this.favorite=c,this.cdRef=u,this.view.displayLabels=!1}get trackRecent(){return!!this.module&&"1"==this.metadata.getModuleDefs(this.module)?.track}ngOnChanges(){this.model.reset(),this.model.module=this.module;let e=this.metadata.getComponentConfig("GlobalNavigationMenuItem",this.module);if(e.actionset?this.itemMenu=this.metadata.getActionSetItems(e.actionset):this.itemMenu=this.metadata.getModuleMenu(this.module),e.displayfieldset)this.displayfieldset=e.displayfieldset;else{let e=this.metadata.getComponentConfig("GlobalHeaderSearchResultsItem",this.module);this.displayfieldset=e.mainfieldset}this.recentitems=[],this.trackRecent?this.recent.moduleItems[this.module]?this.recentitems=this.recent.moduleItems[this.module]:(this.loadingRecent=!0,this.recent.getModuleRecent(this.module).subscribe((e=>{this.loadingRecent=!1;let t=this.recent.moduleItems[this.module];this.recentitems=t||[],this.cdRef.detectChanges()}),(e=>{this.loadingRecent=!1}))):this.recentitems=[],this.favorites=this.favorite.getFavorites(this.module)}propagateclick(e){this.menuItemlist.find((t=>t.id==e))?.execute(),this.actionTriggered.emit(!0)}isDisabled(e){return!!this.menuItemlist&&this.menuItemlist.find((t=>t.id==e))?.disabled}isHidden(e){return!!this.menuItemlist&&this.menuItemlist.find((t=>t.id==e))?.hidden}openRecord(e){this.router.navigate(["/module/"+this.module+"/"+e]),this.actionTriggered.emit(!0)}}return e=GlobalNavigationTabbedMenuModuleMenu,(0,i.Z)(GlobalNavigationTabbedMenuModuleMenu,"ɵfac",(function(t){return new(t||e)(n.Y36(d.Pu),n.Y36(o.o),n.Y36(l.e),n.Y36(r.f),n.Y36(c.G),n.Y36(u.F0),n.Y36(h.d),n.Y36(m.h),n.Y36(g.G),n.Y36(n.sBO))})),(0,i.Z)(GlobalNavigationTabbedMenuModuleMenu,"ɵcmp",n.Xpm({type:e,selectors:[["global-navigation-tabbed-module-menu"]],viewQuery:function(e,t){if(1&e&&n.Gf(a.r,5),2&e){let e;n.iGM(e=n.CRH())&&(t.menuItemlist=e)}},inputs:{module:"module"},outputs:{actionTriggered:"actionTriggered"},features:[n._Bn([o.o,l.e]),n.TTD],decls:7,vars:3,consts:[["role","menu",1,"slds-dropdown__list"],["menulist",""],["menucontainer",""],[4,"ngIf"],["class","slds-dropdown__item","role","presentation",3,"ngClass","click",4,"ngFor","ngForOf"],["role","presentation",1,"slds-dropdown__item",3,"ngClass","click"],["href","javascript:void(0);","role","menuitem"],[1,"slds-truncate",3,"ngClass","actionitem"],["role","separator",1,"slds-dropdown__header"],[1,"slds-text-title--caps"],["label","LBL_FAVORITES"],["class","slds-dropdown__item","role","presentation",3,"system-model-provider","click",4,"ngFor","ngForOf"],["role","presentation",1,"slds-dropdown__item",3,"system-model-provider","click"],["class","slds-truncate",4,"ngIf"],[3,"fieldset",4,"ngIf"],[1,"slds-truncate"],[3,"fieldset"],["label","LBL_RECENTLYVIEWED"],["class","slds-dropdown__item slds-align--absolute-center slds-text-color_inverse-weak slds-p-around--xx-small",4,"ngIf"],["size","16",4,"ngIf"],[1,"slds-dropdown__item","slds-align--absolute-center","slds-text-color_inverse-weak","slds-p-around--xx-small"],["label","LBL_NO_ENTRIES"],["size","16"]],template:function(e,t){1&e&&(n.TgZ(0,"ul",0,1),n._UZ(2,"div",null,2),n.YNc(4,w,2,1,"ng-container",3),n.YNc(5,L,5,1,"ng-container",3),n.YNc(6,N,7,3,"ng-container",3),n.qZA()),2&e&&(n.xp6(4),n.Q6J("ngIf",t.itemMenu.length>0),n.xp6(1),n.Q6J("ngIf",t.favorites.length>0),n.xp6(1),n.Q6J("ngIf",t.trackRecent))},dependencies:[p.mk,p.sg,p.O5,f.u,b._,v.W,Z.Z,a.r],encapsulation:2,changeDetection:0})),GlobalNavigationTabbedMenuModuleMenu})()},6962:(e,t,s)=>{"use strict";s.d(t,{Q:()=>w});var i=s(1180),n=s(2242),o=s(4154),l=s(3369),a=s(2032),d=s(3348),r=s(5329),c=s(382),u=s(4376),h=s(4755),m=s(151),g=s(2656),p=s(4561),f=s(3463),b=s(3333),v=s(9570);const Z=function(e){return{"slds-is-active":e}};function _(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"li",17),n.NdJ("click",(function(){n.CHM(e);const t=n.oxw();return n.KtG(t.navigateTo(t.navModule))})),n.TgZ(1,"a",18)(2,"div",19),n._UZ(3,"system-icon",3),n.TgZ(4,"span"),n._UZ(5,"system-label-modulename",4),n.qZA(),n.TgZ(6,"button",20),n.NdJ("click",(function(t){n.CHM(e);const s=n.oxw();return n.KtG(s.setActiveModule(t,s.navModule))})),n._UZ(7,"system-button-icon",21),n.qZA()()()()}if(2&e){const e=n.oxw();n.Q6J("ngClass",n.VKq(4,Z,e.navModule==e.activeModule)),n.xp6(2),n.Q6J("title",e.navModule),n.xp6(1),n.Q6J("module",e.navModule),n.xp6(2),n.Q6J("module",e.navModule)}}function y(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"li",22),n.NdJ("click",(function(){const t=n.CHM(e).$implicit,s=n.oxw();return n.KtG(s.navigateTo(t))})),n.TgZ(1,"a",18)(2,"div",19),n._UZ(3,"system-icon",3),n.TgZ(4,"span"),n._UZ(5,"system-label-modulename",4),n.qZA(),n.TgZ(6,"button",20),n.NdJ("click",(function(t){const s=n.CHM(e).$implicit,i=n.oxw();return n.KtG(i.setActiveModule(t,s))})),n._UZ(7,"system-button-icon",21),n.qZA()()()()}if(2&e){const e=t.$implicit,s=n.oxw();n.Q6J("ngClass",n.VKq(4,Z,e==s.activeModule)),n.xp6(2),n.Q6J("title",e),n.xp6(1),n.Q6J("module",e),n.xp6(2),n.Q6J("module",e)}}const x=function(e){return{"slds-is-open":e}};let w=(()=>{var e;class GlobalNavigationTabbedMenuModules{quickLaunch(e){this.toggleMenu()}constructor(e,t,s,n,o,l,a,d,r){(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"broadcast",void 0),(0,i.Z)(this,"navigation",void 0),(0,i.Z)(this,"router",void 0),(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"recent",void 0),(0,i.Z)(this,"favorite",void 0),(0,i.Z)(this,"elementRef",void 0),(0,i.Z)(this,"renderer",void 0),(0,i.Z)(this,"menuItems",[]),(0,i.Z)(this,"isopen",!1),(0,i.Z)(this,"activeModule",""),(0,i.Z)(this,"initialized",!1),(0,i.Z)(this,"keyboardListener",void 0),this.metadata=e,this.broadcast=t,this.navigation=s,this.router=n,this.language=o,this.recent=l,this.favorite=a,this.elementRef=d,this.renderer=r,this.broadcast.message$.subscribe((e=>{this.handleMessage(e)}))}buildMenuItems(){this.menuItems=[];let e=this.metadata.getRoleModules(!0);for(let t of e)this.menuItems.push(t)}get isActive(){return"main"==this.navigation.activeTab}get tabWidth(){return this.elementRef.nativeElement.getBoundingClientRect().width}setActive(){this.navigation.setActiveTab("main")}get activeModuleVisible(){return this.menuItems.find((e=>e==this.navModule))}handleMessage(e){if("applauncher.setrole"===e.messagetype)this.buildMenuItems()}get navModule(){return this.navigation.activeModule}toggleMenu(){this.isopen?this.closeMenu():(this.openMenu(),this.elementRef.nativeElement.focus())}openMenu(){this.isopen=!0,this.initialized||(this.buildMenuItems(),this.initialized=!0),this.activeModule=this.navigation.activeModule,this.keyboardListener||(this.keyboardListener=this.renderer.listen("document","keyup",(e=>this.handleKeyBoardEvent(e))))}setActiveModule(e,t){e.stopPropagation(),this.activeModule=t}closeMenu(){this.isopen=!1,this.keyboardListener&&(this.keyboardListener(),this.keyboardListener=null)}handleKeyBoardEvent(e){let t=this.menuItems.indexOf(this.activeModule);switch(console.log(e),e.key){case"ArrowDown":this.activeModule=this.menuItems[t+1>=this.menuItems.length?0:t+1];break;case"ArrowUp":this.activeModule=this.menuItems[t-1<0?this.menuItems.length-1:t-1];break;case"Enter":this.navigateTo(this.activeModule)}}navigateTo(e){this.closeMenu(),this.router.navigate(["/module/"+e])}}return e=GlobalNavigationTabbedMenuModules,(0,i.Z)(GlobalNavigationTabbedMenuModules,"ɵfac",(function(t){return new(t||e)(n.Y36(o.Pu),n.Y36(l.f),n.Y36(a.G),n.Y36(d.F0),n.Y36(r.d),n.Y36(c.h),n.Y36(u.G),n.Y36(n.SBq),n.Y36(n.Qsj))})),(0,i.Z)(GlobalNavigationTabbedMenuModules,"ɵcmp",n.Xpm({type:e,selectors:[["global-navigation-tabbed-menu-modules"]],hostVars:4,hostBindings:function(e,t){1&e&&n.NdJ("mouseenter",(function(){return t.openMenu()}))("mouseleave",(function(){return t.closeMenu()}))("keydown.control.m",(function(){return t.quickLaunch()}),!1,n.evT),2&e&&n.ekj("slds-context-bar__item",1)("slds-is-active",t.isActive)},decls:18,vars:9,consts:[[1,"slds-context-bar__item","slds-context-bar__item_divider-right","slds-dropdown-trigger","slds-dropdown-trigger_click",3,"ngClass"],["href","javascript:void(0);",1,"slds-context-bar__label-action",3,"click"],[1,"slds-truncate","slds-grid","slds-grid--vertical-align-center",3,"title"],["size","x-small",3,"module"],[3,"module"],[1,"slds-context-bar__icon-action"],["system-title","LBL_MAIN_MENU","aria-haspopup","true",1,"slds-button","slds-button_icon","slds-button_icon-container","slds-button_icon-x-small"],["icon","chevrondown"],[1,"slds-assistive-text"],["label","LBL_MAIN_MENU"],[1,"slds-dropdown","slds-dropdown_left","slds-dropdown--large"],[1,"slds-grid"],["role","menu",1,"slds-dropdown__list","slds-size--1-of-2","slds-border--right"],["class","slds-dropdown__item slds-nav-vertical__item slds-has-divider--bottom",3,"ngClass","click",4,"ngIf"],["class","slds-dropdown__item slds-nav-vertical__item","role","presentation",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"slds-size--1-of-2"],[3,"module","actionTriggered"],[1,"slds-dropdown__item","slds-nav-vertical__item","slds-has-divider--bottom",3,"ngClass","click"],["href","javascript:void(0);","role","menuitem","tabindex","-1"],[1,"slds-truncate","slds-size--1-of-1","slds-grid","slds-grid--vertical-align-center",3,"title"],[1,"slds-button","slds-button--icon","slds-col--bump-left",3,"click"],["icon","chevronright","addclasses","slds-icon-text-light"],["role","presentation",1,"slds-dropdown__item","slds-nav-vertical__item",3,"ngClass","click"]],template:function(e,t){1&e&&(n.TgZ(0,"div",0)(1,"a",1),n.NdJ("click",(function(){return t.setActive()})),n.TgZ(2,"div",2),n._UZ(3,"system-icon",3),n.TgZ(4,"span"),n._UZ(5,"system-label-modulename",4),n.qZA()()(),n.TgZ(6,"div",5)(7,"button",6),n._UZ(8,"system-button-icon",7),n.TgZ(9,"span",8),n._UZ(10,"system-label",9),n.qZA()()(),n.TgZ(11,"div",10)(12,"div",11)(13,"ul",12),n.YNc(14,_,8,6,"li",13),n.YNc(15,y,8,6,"li",14),n.qZA(),n.TgZ(16,"div",15)(17,"global-navigation-tabbed-module-menu",16),n.NdJ("actionTriggered",(function(){return t.closeMenu()})),n.qZA()()()()()),2&e&&(n.Q6J("ngClass",n.VKq(7,x,t.isopen)),n.xp6(2),n.Q6J("title",t.navModule),n.xp6(1),n.Q6J("module",t.navModule),n.xp6(2),n.Q6J("module",t.navModule),n.xp6(9),n.Q6J("ngIf",!t.activeModuleVisible),n.xp6(1),n.Q6J("ngForOf",t.menuItems),n.xp6(2),n.Q6J("module",t.activeModule))},dependencies:[h.mk,h.sg,h.O5,m.S,g.J,p.f,f._,b.M,v.L],encapsulation:2})),GlobalNavigationTabbedMenuModules})()},2429:(e,t,s)=>{"use strict";s.d(t,{y:()=>v});var i=s(1180),n=s(2242),o=s(2032),l=s(5329),a=s(4755),d=s(151),r=s(2656),c=s(4561),u=s(3463),h=s(4664),m=s(8859);function g(e,t){if(1&e&&n._UZ(0,"system-utility-icon",14),2&e){const e=n.oxw(2);n.Q6J("icon",e.tabicon)}}function p(e,t){if(1&e&&n._UZ(0,"system-icon",15),2&e){const e=n.oxw(2);n.Q6J("module",e.tabmodule)}}function f(e,t){if(1&e&&(n.ynx(0),n.YNc(1,g,1,1,"system-utility-icon",10),n.YNc(2,p,1,1,"system-icon",11),n.TgZ(3,"div",12),n._UZ(4,"system-label",13),n.qZA(),n.BQk()),2&e){const e=n.oxw();n.xp6(1),n.Q6J("ngIf",e.tabicon),n.xp6(1),n.Q6J("ngIf",e.tabmodule),n.xp6(2),n.Q6J("label",e.tabname)}}function b(e,t){1&e&&(n._UZ(0,"system-spinner",16),n.TgZ(1,"div"),n._UZ(2,"system-label",17),n.qZA())}let v=(()=>{var e;class GlobalNavigationTabbedMenuTab{constructor(e,t,s){(0,i.Z)(this,"navigation",void 0),(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"elementRef",void 0),(0,i.Z)(this,"object",void 0),this.navigation=e,this.language=t,this.elementRef=s}get isActive(){if(this.object.id==this.navigation.activeTab)return!0;let e=this.navigation.getTabById(this.navigation.activeTab);return!(!e||!e.parentid||this.object.id!=e.parentid)}setActive(){this.navigation.setActiveTab(this.object.id)}closetab(){this.navigation.closeObjectTab(this.object.id)}get pinned(){return this.object.pinned}pintab(){this.object.pinned=!this.object.pinned}get tabname(){return this.object.displayname?this.object.displayname:void 0}get tabmodule(){return this.object.displaymodule?this.object.displaymodule:void 0}get tabicon(){return this.object.displayicon?this.object.displayicon:void 0}}return e=GlobalNavigationTabbedMenuTab,(0,i.Z)(GlobalNavigationTabbedMenuTab,"ɵfac",(function(t){return new(t||e)(n.Y36(o.G),n.Y36(l.d),n.Y36(n.SBq))})),(0,i.Z)(GlobalNavigationTabbedMenuTab,"ɵcmp",n.Xpm({type:e,selectors:[["global-navigation-tabbed-menu-tab"]],hostVars:6,hostBindings:function(e,t){2&e&&n.ekj("slds-context-bar__item",1)("slds-context-bar__item_tab",1)("slds-is-active",t.isActive)},inputs:{object:"object"},decls:11,vars:3,consts:[[1,"slds-context-bar__item"],["href","javascript:void(0);",1,"slds-context-bar__label-action","slds-scrollable--none",3,"click"],[1,"slds-grid","slds-grid--vertical-align-center"],[4,"ngIf","ngIfElse"],["tabloading",""],[1,"slds-context-bar__icon-action"],["system-title","LBL_PIN_TAB",1,"slds-button","slds-button_icon","slds-button_icon-container","slds-button_icon-x-small","slds-m-around--none",3,"click"],[3,"icon"],["aria-haspopup","true","system-title","LBL_CLOSE_TAB",1,"slds-button","slds-button_icon","slds-button_icon-container","slds-button_icon-x-small","slds-m-around--none",3,"click"],["icon","close"],["size","x-small","class","slds-p-right--x-small",3,"icon",4,"ngIf"],["size","x-small","divClass","slds-p-right--x-small",3,"module",4,"ngIf"],[1,"slds-truncate",2,"white-space","nowrap"],[3,"label"],["size","x-small",1,"slds-p-right--x-small",3,"icon"],["size","x-small","divClass","slds-p-right--x-small",3,"module"],["size","10",1,"slds-p-right--x-small"],["label","LBL_LOADING"]],template:function(e,t){if(1&e&&(n.TgZ(0,"div",0)(1,"a",1),n.NdJ("click",(function(){return t.setActive()})),n.TgZ(2,"div",2),n.YNc(3,f,5,3,"ng-container",3),n.YNc(4,b,3,0,"ng-template",null,4,n.W1O),n.qZA()(),n.TgZ(6,"div",5)(7,"button",6),n.NdJ("click",(function(){return t.pintab()})),n._UZ(8,"system-button-icon",7),n.qZA(),n.TgZ(9,"button",8),n.NdJ("click",(function(){return t.closetab()})),n._UZ(10,"system-button-icon",9),n.qZA()()()),2&e){const e=n.MAs(5);n.xp6(3),n.Q6J("ngIf",t.tabname)("ngIfElse",e),n.xp6(5),n.Q6J("icon",t.pinned?"pinned":"pin")}},dependencies:[a.O5,d.S,r.J,c.f,u._,h.W,m.r],encapsulation:2})),GlobalNavigationTabbedMenuTab})()},26:(e,t,s)=>{"use strict";s.d(t,{K:()=>b});var i=s(1180),n=s(2242),o=s(2032),l=s(5329),a=s(4755),d=s(5681),r=s(2656),c=s(4561),u=s(3463),h=s(8859);function m(e,t){if(1&e&&n._UZ(0,"system-utility-icon",16),2&e){const e=n.oxw().$implicit;n.Q6J("icon",e.displayicon)}}function g(e,t){if(1&e&&n._UZ(0,"system-icon",17),2&e){const e=n.oxw().$implicit;n.Q6J("module",e.displaymodule)}}const p=function(e){return{"slds-is-active":e}};function f(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"li",8)(1,"a",9),n.YNc(2,m,1,1,"system-utility-icon",10),n.YNc(3,g,1,1,"system-icon",11),n.TgZ(4,"div",12),n.NdJ("click",(function(){const t=n.CHM(e).$implicit,s=n.oxw();return n.KtG(s.setActiveTab(t.id))})),n._UZ(5,"system-label",13),n.qZA(),n.TgZ(6,"button",14),n.NdJ("click",(function(){const t=n.CHM(e).$implicit,s=n.oxw();return n.KtG(s.closeObjectTab(t.id))})),n._UZ(7,"system-button-icon",15),n.qZA()()()}if(2&e){const e=t.$implicit,s=n.oxw();n.Q6J("ngClass",n.VKq(4,p,s.isActive(e.id))),n.xp6(2),n.Q6J("ngIf",e.displayicon),n.xp6(1),n.Q6J("ngIf",e.displaymodule),n.xp6(2),n.Q6J("label",e.displayname)}}let b=(()=>{var e;class GlobalNavigationTabbedMoreTab{constructor(e,t,s){(0,i.Z)(this,"navigation",void 0),(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"elementRef",void 0),(0,i.Z)(this,"moreObjects",[]),this.navigation=e,this.language=t,this.elementRef=s}get tabWidth(){return this.elementRef.nativeElement.getBoundingClientRect().width}setActiveTab(e){this.navigation.setActiveTab(e)}closeObjectTab(e){this.navigation.closeObjectTab(e)}isActive(e){if(e==this.navigation.activeTab)return!0;let t=this.navigation.getTabById(this.navigation.activeTab);return!(!t||!t.parentid||e!=t.parentid)}get activeItem(){let e=this.navigation.activeTabObject;return!!this.moreObjects.find((t=>t.active||e&&e?.parentid==t.id))}}return e=GlobalNavigationTabbedMoreTab,(0,i.Z)(GlobalNavigationTabbedMoreTab,"ɵfac",(function(t){return new(t||e)(n.Y36(o.G),n.Y36(l.d),n.Y36(n.SBq))})),(0,i.Z)(GlobalNavigationTabbedMoreTab,"ɵcmp",n.Xpm({type:e,selectors:[["global-navigation-tabbed-more-tab"]],hostVars:4,hostBindings:function(e,t){2&e&&n.ekj("slds-context-bar__item",1)("slds-is-active",t.activeItem)},decls:9,vars:2,consts:[["system-dropdown-trigger","",1,"slds-context-bar__item","slds-context-bar__dropdown-trigger","slds-dropdown-trigger","slds-dropdown-trigger_click"],["aria-haspopup","true",1,"slds-context-bar__label-action"],["title","More Tabs",1,"slds-truncate"],["label","LBL_MORE"],["icon","chevrondown",1,"slds-p-left--x-small"],[1,"slds-dropdown","slds-dropdown_right"],["role","menu",1,"slds-dropdown__list"],["class","slds-dropdown__item slds-nav-vertical__item","role","presentation",3,"ngClass",4,"ngFor","ngForOf"],["role","presentation",1,"slds-dropdown__item","slds-nav-vertical__item",3,"ngClass"],["href","javascript:void(0);","role","menuitem"],["size","x-small","class","slds-p-right--x-small",3,"icon",4,"ngIf"],["size","x-small","divClass","slds-p-right--x-small",3,"module",4,"ngIf"],[1,"slds-grow",3,"click"],[3,"label"],["aria-haspopup","true",1,"slds-button","slds-button_icon","slds-button_icon-container","slds-button_icon-x-small","slds-m-around--none",3,"click"],["icon","close"],["size","x-small",1,"slds-p-right--x-small",3,"icon"],["size","x-small","divClass","slds-p-right--x-small",3,"module"]],template:function(e,t){1&e&&(n.TgZ(0,"div",0)(1,"div",1)(2,"span",2),n._UZ(3,"system-label",3),n._uU(4),n.qZA(),n._UZ(5,"system-button-icon",4),n.qZA(),n.TgZ(6,"div",5)(7,"ul",6),n.YNc(8,f,8,6,"li",7),n.qZA()()()),2&e&&(n.xp6(4),n.hij(" (",t.moreObjects.length,")"),n.xp6(4),n.Q6J("ngForOf",t.moreObjects))},dependencies:[a.mk,a.sg,a.O5,d.l,r.J,c.f,u._,h.r],encapsulation:2})),GlobalNavigationTabbedMoreTab})()},8208:(e,t,s)=>{"use strict";s.d(t,{T:()=>y});var i=s(1180),n=s(2242),o=s(4154),l=s(5329),a=s(2032),d=s(4755),r=s(151),c=s(2656),u=s(4561),h=s(3463),m=s(4664),g=s(8859);function p(e,t){if(1&e&&n._UZ(0,"system-utility-icon",8),2&e){const e=n.oxw(2);n.Q6J("icon",e.tabicon)}}function f(e,t){if(1&e&&n._UZ(0,"system-icon",9),2&e){const e=n.oxw(2);n.Q6J("module",e.tabmodule)}}function b(e,t){if(1&e&&(n.ynx(0),n.YNc(1,p,1,1,"system-utility-icon",6),n.YNc(2,f,1,1,"system-icon",7),n.TgZ(3,"div"),n._uU(4),n.qZA(),n.BQk()),2&e){const e=n.oxw();n.xp6(1),n.Q6J("ngIf",e.tabicon),n.xp6(1),n.Q6J("ngIf",e.tabmodule),n.xp6(2),n.Oqu(e.tabname)}}function v(e,t){1&e&&(n._UZ(0,"system-spinner",10),n.TgZ(1,"div"),n._UZ(2,"system-label",11),n.qZA())}function Z(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"div",12)(1,"button",13),n.NdJ("click",(function(){n.CHM(e);const t=n.oxw();return n.KtG(t.pintab())})),n._UZ(2,"system-button-icon",14),n.qZA(),n.TgZ(3,"button",15),n.NdJ("click",(function(){n.CHM(e);const t=n.oxw();return n.KtG(t.closeSubTab())})),n._UZ(4,"system-button-icon",16),n.qZA()()}if(2&e){const e=n.oxw();n.xp6(2),n.Q6J("icon",e.pinned?"pinned":"pin")}}const _=function(e,t){return{"slds-active":e,"slds-border--left":t}};let y=(()=>{var e;class GlobalNavigationTabbedSubtabItem{constructor(e,t,s,n){(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"navigation",void 0),(0,i.Z)(this,"elementRef",void 0),(0,i.Z)(this,"object",void 0),(0,i.Z)(this,"ismain",!1),this.metadata=e,this.language=t,this.navigation=s,this.elementRef=n}get tabname(){return this.object?.displayname?this.object.displayname:void 0}get tabmodule(){return this.object?.displaymodule?this.object.displaymodule:void 0}get tabicon(){return this.object?.displayicon?this.object.displayicon:void 0}get isActive(){return this.object&&this.object.id==this.navigation.activeTab}setActive(){this.navigation.setActiveTab(this.object.id)}closeSubTab(){this.navigation.closeObjectTab(this.object.id)}get pinned(){return this.object.pinned}pintab(){this.object.pinned=!this.object.pinned}}return e=GlobalNavigationTabbedSubtabItem,(0,i.Z)(GlobalNavigationTabbedSubtabItem,"ɵfac",(function(t){return new(t||e)(n.Y36(o.Pu),n.Y36(l.d),n.Y36(a.G),n.Y36(n.SBq))})),(0,i.Z)(GlobalNavigationTabbedSubtabItem,"ɵcmp",n.Xpm({type:e,selectors:[["global-navigation-tabbed-subtab-item"]],inputs:{object:"object",ismain:"ismain"},decls:7,vars:7,consts:[["role","presentation",1,"slds-tabs_default__item","slds-sub-tabs__item","slds-grid","slds-grid_vertical-align-center",3,"ngClass"],["href","javascript:void(0);","role","tab",1,"slds-tabs_default__link","slds-p-horizontal_xx-small",3,"click"],[1,"slds-truncate","slds-grid","slds-grid--vertical-align-center"],[4,"ngIf","ngIfElse"],["tabloading",""],["class","slds-col_bump-left slds-p-left_none slds-p-right_none slds-grid",4,"ngIf"],["size","x-small","class","slds-p-right--x-small",3,"icon",4,"ngIf"],["size","x-small","divClass","slds-p-right--x-small",3,"module",4,"ngIf"],["size","x-small",1,"slds-p-right--x-small",3,"icon"],["size","x-small","divClass","slds-p-right--x-small",3,"module"],["size","10",1,"slds-p-right--x-small"],["label","LBL_LOADING"],[1,"slds-col_bump-left","slds-p-left_none","slds-p-right_none","slds-grid"],["system-title","LBL_PIN_TAB",1,"slds-button","slds-button_icon","slds-button_icon-container","slds-button_icon-x-small","slds-m-around--none",3,"click"],[3,"icon"],["tabindex","0","system-title","LBL_CLOSE_TAB",1,"slds-button","slds-button_icon","slds-button_icon-container","slds-button_icon-x-small",3,"click"],["icon","close"]],template:function(e,t){if(1&e&&(n.TgZ(0,"li",0)(1,"a",1),n.NdJ("click",(function(){return t.setActive()})),n.TgZ(2,"div",2),n.YNc(3,b,5,3,"ng-container",3),n.YNc(4,v,3,0,"ng-template",null,4,n.W1O),n.qZA()(),n.YNc(6,Z,5,1,"div",5),n.qZA()),2&e){const e=n.MAs(5);n.Q6J("ngClass",n.WLB(4,_,t.isActive,!t.ismain)),n.xp6(3),n.Q6J("ngIf",t.tabname)("ngIfElse",e),n.xp6(3),n.Q6J("ngIf",!t.ismain)}},dependencies:[d.mk,d.O5,r.S,c.J,u.f,h._,m.W,g.r],encapsulation:2})),GlobalNavigationTabbedSubtabItem})()},3850:(e,t,s)=>{"use strict";s.d(t,{_:()=>g});var i=s(1180),n=s(26),o=s(2242),l=s(4755),a=s(5681),d=s(2656),r=s(4561),c=s(3463);function u(e,t){if(1&e&&o._UZ(0,"system-icon",15),2&e){const e=o.oxw().$implicit;o.Q6J("module",e.displaymodule)}}const h=function(e){return{"slds-is-active":e}};function m(e,t){if(1&e){const e=o.EpF();o.TgZ(0,"li",9)(1,"a",10),o.YNc(2,u,1,1,"system-icon",11),o.TgZ(3,"div",12),o.NdJ("click",(function(){const t=o.CHM(e).$implicit,s=o.oxw();return o.KtG(s.setActiveTab(t.id))})),o._uU(4),o.qZA(),o.TgZ(5,"button",13),o.NdJ("click",(function(){const t=o.CHM(e).$implicit,s=o.oxw();return o.KtG(s.closeObjectTab(t.id))})),o._UZ(6,"system-button-icon",14),o.qZA()()()}if(2&e){const e=t.$implicit,s=o.oxw();o.Q6J("ngClass",o.VKq(3,h,s.isActive(e.id))),o.xp6(2),o.Q6J("ngIf",e.displaymodule),o.xp6(2),o.Oqu(e.displayname)}}let g=(()=>{var e;class GlobalNavigationTabbedSubTabMoreTab extends n.K{get moreActive(){let e=!1;return this.moreObjects.some((t=>{if(t.active)return e=!0,!0})),e}}return e=GlobalNavigationTabbedSubTabMoreTab,(0,i.Z)(GlobalNavigationTabbedSubTabMoreTab,"ɵfac",function(){let t;return function(s){return(t||(t=o.n5z(e)))(s||e)}}()),(0,i.Z)(GlobalNavigationTabbedSubTabMoreTab,"ɵcmp",o.Xpm({type:e,selectors:[["global-navigation-tabbed-sub-tab-more-tab"]],features:[o.qOj],decls:11,vars:5,consts:[["role","presentation","system-dropdown-trigger","",1,"slds-tabs_default__item","slds-sub-tabs__item","slds-grid","slds-grid_vertical-align-center","slds-dropdown-trigger","slds-dropdown-trigger_click","slds-border--left",3,"ngClass"],["href","javascript:void(0);","role","tab",1,"slds-tabs_default__link","slds-p-horizontal_xx-small"],["label","LBL_MORE"],[1,"slds-col_bump-left","slds-p-left_none","slds-p-right_none"],["tabindex","0",1,"slds-button","slds-button_icon","slds-button_icon-container","slds-button_icon-x-small"],["icon","chevrondown"],[1,"slds-dropdown","slds-dropdown_right"],["role","menu",1,"slds-dropdown__list"],["class","slds-dropdown__item slds-nav-vertical__item","role","presentation",3,"ngClass",4,"ngFor","ngForOf"],["role","presentation",1,"slds-dropdown__item","slds-nav-vertical__item",3,"ngClass"],["href","javascript:void(0);","role","menuitem"],["size","x-small","divClass","slds-p-right--x-small",3,"module",4,"ngIf"],[1,"slds-grow",3,"click"],["aria-haspopup","true",1,"slds-button","slds-button_icon","slds-button_icon-container","slds-button_icon-x-small","slds-m-around--none",3,"click"],["icon","close"],["size","x-small","divClass","slds-p-right--x-small",3,"module"]],template:function(e,t){1&e&&(o.TgZ(0,"li",0)(1,"a",1)(2,"div"),o._UZ(3,"system-label",2),o._uU(4),o.qZA()(),o.TgZ(5,"div",3)(6,"button",4),o._UZ(7,"system-button-icon",5),o.qZA()(),o.TgZ(8,"div",6)(9,"ul",7),o.YNc(10,m,7,5,"li",8),o.qZA()()()),2&e&&(o.Q6J("ngClass",o.VKq(3,h,t.moreActive)),o.xp6(4),o.hij(" (",t.moreObjects.length,")"),o.xp6(6),o.Q6J("ngForOf",t.moreObjects))},dependencies:[l.mk,l.sg,l.O5,a.l,d.J,r.f,c._],encapsulation:2})),GlobalNavigationTabbedSubTabMoreTab})()},3861:(e,t,s)=>{"use strict";s.d(t,{_:()=>m});var i=s(1180),n=s(8208),o=s(3850),l=s(727),a=s(2242),d=s(4154),r=s(5329),c=s(2032),u=s(4755);function h(e,t){if(1&e&&a._UZ(0,"global-navigation-tabbed-subtab-item",3),2&e){const e=t.$implicit;a.Q6J("object",e)}}let m=(()=>{var e;class GlobalNavigationTabbedSubtabs{constructor(e,t,s,n,o){(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"navigation",void 0),(0,i.Z)(this,"elementRef",void 0),(0,i.Z)(this,"ngZone",void 0),(0,i.Z)(this,"parenttab",void 0),(0,i.Z)(this,"subMenuTabs",void 0),(0,i.Z)(this,"subMenuMore",void 0),(0,i.Z)(this,"subscriptions",new l.w0),(0,i.Z)(this,"stable",!0),this.metadata=e,this.language=t,this.navigation=s,this.elementRef=n,this.ngZone=o,this.subscriptions.add(this.navigation.objectTabsChange$.subscribe((e=>{window.setTimeout((()=>{this.handleResize()}))})))}ngOnDestroy(){this.subscriptions.unsubscribe()}get subtabs(){return this.navigation.getSubTabs(this.parenttab?.id).sort(((e,t)=>e.pinned&&t.pinned||!e.pinned&&!t.pinned?0:e.pinned?-1:t.pinned?1:void 0))}trackByFn(e,t){return t.id}handleResize(){let e=this.elementRef.nativeElement.getBoundingClientRect().left,t=window.innerWidth-e;this.subMenuMore.elementRef.nativeElement.classList.remove("slds-hide"),this.subMenuMore.elementRef.nativeElement.classList.add("slds-hidden"),this.subMenuMore.moreObjects=[];let s=this.subMenuMore.tabWidth;this.subMenuTabs.forEach((e=>{e.elementRef.nativeElement.classList.remove("slds-hide"),e.elementRef.nativeElement.classList.add("slds-hidden")}));let i=0,n=!1;return this.subMenuTabs.forEach(((e,o)=>{let l=e.elementRef.nativeElement.getBoundingClientRect().width;i+=l,(n||o+1==this.subMenuTabs.length&&i>t||o+1<this.subMenuTabs.length&&i>t-s)&&(e.elementRef.nativeElement.classList.add("slds-hide"),n=!0,this.subMenuMore.moreObjects.push(e.object)),e.elementRef.nativeElement.classList.remove("slds-hidden")})),n?this.subMenuMore.elementRef.nativeElement.classList.remove("slds-hidden"):this.subMenuMore.elementRef.nativeElement.classList.add("slds-hide"),!0}}return e=GlobalNavigationTabbedSubtabs,(0,i.Z)(GlobalNavigationTabbedSubtabs,"ɵfac",(function(t){return new(t||e)(a.Y36(d.Pu),a.Y36(r.d),a.Y36(c.G),a.Y36(a.SBq),a.Y36(a.R0b))})),(0,i.Z)(GlobalNavigationTabbedSubtabs,"ɵcmp",a.Xpm({type:e,selectors:[["global-navigation-tabbed-subtabs"]],viewQuery:function(e,t){if(1&e&&(a.Gf(o._,5),a.Gf(n.T,5)),2&e){let e;a.iGM(e=a.CRH())&&(t.subMenuMore=e.first),a.iGM(e=a.CRH())&&(t.subMenuTabs=e)}},hostBindings:function(e,t){1&e&&a.NdJ("resize",(function(){return t.handleResize()}),!1,a.Jf7)},inputs:{parenttab:"parenttab"},decls:4,vars:4,consts:[["role","tablist",1,"slds-tabs_default__nav"],[3,"object","ismain"],[3,"object",4,"ngFor","ngForOf","ngForTrackBy"],[3,"object"]],template:function(e,t){1&e&&(a.TgZ(0,"ul",0),a._UZ(1,"global-navigation-tabbed-subtab-item",1),a.YNc(2,h,1,1,"global-navigation-tabbed-subtab-item",2),a._UZ(3,"global-navigation-tabbed-sub-tab-more-tab"),a.qZA()),2&e&&(a.xp6(1),a.Q6J("object",t.parenttab)("ismain",!0),a.xp6(1),a.Q6J("ngForOf",t.subtabs)("ngForTrackBy",t.trackByFn))},dependencies:[u.sg,n.T,o._],encapsulation:2})),GlobalNavigationTabbedSubtabs})()},595:(e,t,s)=>{"use strict";s.d(t,{T:()=>u});var i=s(1180),n=s(2242),o=s(3144),l=s(4755),a=s(4664),d=s(2790);function r(e,t){1&e&&(n.TgZ(0,"div",3),n._UZ(1,"system-spinner"),n.qZA())}function c(e,t){if(1&e&&n._UZ(0,"global-newsfeed-item",4),2&e){const e=t.$implicit;n.Q6J("item",e)}}let u=(()=>{var e;class GlobalNewsFeed{constructor(e){(0,i.Z)(this,"http",void 0),(0,i.Z)(this,"news",[]),(0,i.Z)(this,"isLoading",!0),this.http=e,this.loadNewsFeed()}loadNewsFeed(){let e=btoa("https://www.spicecrm.com/wp-json/wp/v2/posts?context=embed");this.http.get("proxy?useurl="+e).subscribe((e=>{this.news=e,this.isLoading=!1}))}}return e=GlobalNewsFeed,(0,i.Z)(GlobalNewsFeed,"ɵfac",(function(t){return new(t||e)(n.Y36(o.eN))})),(0,i.Z)(GlobalNewsFeed,"ɵcmp",n.Xpm({type:e,selectors:[["global-newsfeed"]],decls:3,vars:2,consts:[[1,"slds-p-around--medium","slds-theme--shade","slds-scrollable--y",2,"height","100vh"],["class","slds-align--absolute-center slds-height_full",4,"ngIf"],[3,"item",4,"ngFor","ngForOf"],[1,"slds-align--absolute-center","slds-height_full"],[3,"item"]],template:function(e,t){1&e&&(n.TgZ(0,"div",0),n.YNc(1,r,2,0,"div",1),n.YNc(2,c,1,1,"global-newsfeed-item",2),n.qZA()),2&e&&(n.xp6(1),n.Q6J("ngIf",t.isLoading),n.xp6(1),n.Q6J("ngForOf",t.news))},dependencies:[l.sg,l.O5,a.W,d.c],encapsulation:2})),GlobalNewsFeed})()},2790:(e,t,s)=>{"use strict";s.d(t,{c:()=>l});var i=s(1180),n=s(2242),o=s(34);let l=(()=>{var e;class GlobalNewsFeedItem{constructor(){(0,i.Z)(this,"item",{})}getDate(){return moment(this.item.date).fromNow()}getExcerpt(){return this.item.excerpt.rendered.replace("<a",'<a target="_blank"')}}return e=GlobalNewsFeedItem,(0,i.Z)(GlobalNewsFeedItem,"ɵfac",(function(t){return new(t||e)})),(0,i.Z)(GlobalNewsFeedItem,"ɵcmp",n.Xpm({type:e,selectors:[["global-newsfeed-item"]],inputs:{item:"item"},decls:10,vars:4,consts:[[1,"slds-card","slds-m-bottom--medium"],[1,"slds-card__header"],[1,"slds-grid","slds-grid_vertical-align-center"],["icon","wordpress","size","small"],[1,"slds-text-heading--medium","slds-truncate"],["target","_blank",3,"innerHTML"],[1,"slds-card__body","slds-p-vertical--xx-small","slds-p-horizontal--small"],[1,"slds-card__body--inner","slds-grid","slds-wrap","slds-grid--pull-padded",2,"text-align","justify",3,"innerHTML"],[1,"slds-card__footer"]],template:function(e,t){1&e&&(n.TgZ(0,"article",0)(1,"div",1)(2,"div",2),n._UZ(3,"system-custom-icon",3),n.TgZ(4,"h2",4),n._UZ(5,"a",5),n.qZA()()(),n.TgZ(6,"div",6),n._UZ(7,"div",7),n.qZA(),n.TgZ(8,"div",8),n._uU(9),n.qZA()()),2&e&&(n.xp6(5),n.Q6J("innerHTML",t.item.title.rendered,n.oJD),n.uIk("href",t.item.link,n.LSH),n.xp6(2),n.Q6J("innerHTML",t.getExcerpt(),n.oJD),n.xp6(2),n.Oqu(t.getDate()))},dependencies:[o.$],encapsulation:2})),GlobalNewsFeedItem})()},2401:(e,t,s)=>{"use strict";s.d(t,{x:()=>p});var i=s(1180),n=s(2242),o=s(4461),l=s(3348),a=s(5920),d=s(2422),r=s(4755),c=s(8859),u=s(5651);function h(e,t){1&e&&(n.TgZ(0,"span",4),n._UZ(1,"system-utility-icon",5),n.qZA())}function m(e,t){if(1&e&&n._UZ(0,"img",6),2&e){const e=n.oxw();n.Q6J("src",e.userimage,n.LSH)}}function g(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"global-user-panel",7),n.NdJ("closepopup",(function(){n.CHM(e);const t=n.oxw();return n.KtG(t.closepopup())})),n.qZA()}}let p=(()=>{var e;class GlobalUser{constructor(e,t,s,n,o,l){(0,i.Z)(this,"loginService",void 0),(0,i.Z)(this,"router",void 0),(0,i.Z)(this,"elementRef",void 0),(0,i.Z)(this,"renderer",void 0),(0,i.Z)(this,"session",void 0),(0,i.Z)(this,"userpreferences",void 0),(0,i.Z)(this,"clickListener",void 0),(0,i.Z)(this,"hideUserDetails",!0),this.loginService=e,this.router=t,this.elementRef=s,this.renderer=n,this.session=o,this.userpreferences=l}toggleUserDetails(){this.hideUserDetails=!this.hideUserDetails,this.hideUserDetails?this.clickListener&&this.clickListener():this.clickListener=this.renderer.listen("document","click",(e=>this.onClick(e)))}closepopup(){this.hideUserDetails=!0}onClick(e){this.elementRef.nativeElement.contains(e.target)||(this.hideUserDetails=!0,this.clickListener())}get userimage(){return this.session.authData.user.user_image}}return e=GlobalUser,(0,i.Z)(GlobalUser,"ɵfac",(function(t){return new(t||e)(n.Y36(o.j),n.Y36(l.F0),n.Y36(n.SBq),n.Y36(n.Qsj),n.Y36(a.n),n.Y36(d.z))})),(0,i.Z)(GlobalUser,"ɵcmp",n.Xpm({type:e,selectors:[["global-user"]],decls:4,vars:3,consts:[["aria-haspopup","true",1,"slds-button",2,"min-width","32px",3,"click"],["class","slds-icon_container slds-icon-standard-empty slds-icon_container--circle",4,"ngIf"],["style","height: 32px; width: 32px",3,"src",4,"ngIf"],["class","slds-is-absolute",3,"closepopup",4,"ngIf"],[1,"slds-icon_container","slds-icon-standard-empty","slds-icon_container--circle"],["icon","user","size","x-small","addclasses","slds-icon","colorclass",""],[2,"height","32px","width","32px",3,"src"],[1,"slds-is-absolute",3,"closepopup"]],template:function(e,t){1&e&&(n.TgZ(0,"button",0),n.NdJ("click",(function(){return t.toggleUserDetails()})),n.YNc(1,h,2,0,"span",1),n.YNc(2,m,1,1,"img",2),n.qZA(),n.YNc(3,g,1,0,"global-user-panel",3)),2&e&&(n.xp6(1),n.Q6J("ngIf",!t.userimage),n.xp6(1),n.Q6J("ngIf",t.userimage),n.xp6(1),n.Q6J("ngIf",!t.hideUserDetails))},dependencies:[r.O5,c.r,u.Y],encapsulation:2})),GlobalUser})()},5651:(e,t,s)=>{"use strict";s.d(t,{Y:()=>M});var i=s(1180),n=s(2242),o=s(4461),l=s(5920),a=s(3348),d=s(4154),r=s(4505),c=s(6625),u=s(4044),h=s(2422),m=s(3278),g=s(2222),p=s(5329),f=s(4411),b=s(4755),v=s(5030),Z=s(151),_=s(2656),y=s(7514),x=s(3463),w=s(2892),T=s(8859),C=s(6449),A=s(7723);function k(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"li",6)(1,"a",7),n.NdJ("click",(function(){n.CHM(e);const t=n.oxw();return n.KtG(t.changePassword())})),n._UZ(2,"system-label",24),n.qZA()()}}function L(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"div",25)(1,"system-checkbox",26),n.NdJ("ngModelChange",(function(t){n.CHM(e);const s=n.oxw();return n.KtG(s.developermode=t)})),n._UZ(2,"system-label",27),n.qZA(),n.TgZ(3,"button",28),n.NdJ("click",(function(){n.CHM(e);const t=n.oxw();return n.KtG(t.clearCache())})),n._UZ(4,"system-label",29),n.qZA()()}if(2&e){const e=n.oxw();n.xp6(1),n.Q6J("disabled",!e.canSetDeveloperMode)("ngModel",e.developermode)}}function I(e,t){1&e&&n._UZ(0,"system-utility-icon",30)}let M=(()=>{var e;class GlobaUserPanel{constructor(e,t,s,o,l,a,d,r,c,u,h,m){(0,i.Z)(this,"loginService",void 0),(0,i.Z)(this,"session",void 0),(0,i.Z)(this,"router",void 0),(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"backend",void 0),(0,i.Z)(this,"config",void 0),(0,i.Z)(this,"modal",void 0),(0,i.Z)(this,"userprefs",void 0),(0,i.Z)(this,"toast",void 0),(0,i.Z)(this,"socket",void 0),(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"loader",void 0),(0,i.Z)(this,"closepopup",new n.vpe),this.loginService=e,this.session=t,this.router=s,this.metadata=o,this.backend=l,this.config=a,this.modal=d,this.userprefs=r,this.toast=c,this.socket=u,this.language=h,this.loader=m}logoff(){this.loginService.logout()}changeImage(){this.modal.openModal("SystemUploadImage").subscribe((e=>{e.instance.cropheight=150,e.instance.cropwidth=150,e.instance.imagedata.subscribe((e=>{if(!1!==e){let t=this.session.authData.user.user_image;this.session.authData.user.user_image="",this.backend.postRequest("module/Users/"+this.session.authData.userId+"/image",{},{imagedata:e}).subscribe((t=>{this.session.authData.user.user_image=e}),(e=>{this.session.authData.user.user_image=t}))}}))}))}get displayName(){return this.session.authData.user.full_name?this.session.authData.user.full_name:this.session.authData.userName}get userName(){return this.session.authData.userName}get systemName(){return this.session.authData.tenant_name?this.session.authData.tenant_name:this.config.systemName}get canChangePassword(){return this.session.authData.canchangepassword}goDetails(){this.router.navigate(["/module/Users/"+this.session.authData.userId]),this.close()}changePassword(){this.canChangePassword&&this.modal.openModal("UserChangePasswordModal")}get userimage(){return this.session.authData.user.user_image}get displayDeveloperMode(){return this.session.authData.admin}get canSetDeveloperMode(){return"2"==this.config.data.systemparameters.developermode}get developermode(){return"1"==this.config.data.systemparameters.developermode||!0===this.config.data.systemparameters.developermode||this.canSetDeveloperMode&&this.session.developerMode}set developermode(e){this.canSetDeveloperMode&&(this.session.developerMode=e)}set currentTz(e){this.userprefs.unchangedPreferences.global&&this.userprefs.unchangedPreferences.global.timezone===e||(this.userprefs.setPreference("timezone",e,!0).subscribe((e=>{this.toast.sendToast(this.language.getLabel("LBL_TIMEZONE_WAS_SET_TO")+": "+e.timezone,"success")}),(e=>{this.toast.sendToast("Error setting timezone.","error")})),this.session.setTimezone(e),this.close())}get currentTz(){return this.userprefs.unchangedPreferences&&this.userprefs.unchangedPreferences.global?this.userprefs.unchangedPreferences.global.timezone:""}clearCache(){this.modal.confirm("MSG_RESET_CACHE","MSG_RESET_CACHE").subscribe({next:e=>{if(e){let e=this.modal.await("LBL_LOADING");this.backend.deleteRequest("system/cache").subscribe((t=>{e.emit(!0),t?this.modal.openModal("GlobalHeaderReloadModal",!1).subscribe((e=>{this.loader.load().subscribe((t=>{!0===t?(this.toast.sendToast("LBL_DATA_RELOADED"),e.instance.self.destroy()):(this.toast.sendToast("error","error","Reload failed"),e.instance.self.destroy())}))})):this.toast.sendToast("LBL_ERROR","error")}))}}})}close(){this.closepopup.emit(!0)}}return e=GlobaUserPanel,(0,i.Z)(GlobaUserPanel,"ɵfac",(function(t){return new(t||e)(n.Y36(o.j),n.Y36(l.n),n.Y36(a.F0),n.Y36(d.Pu),n.Y36(r.y),n.Y36(c.C),n.Y36(u.o),n.Y36(h.z),n.Y36(m.A),n.Y36(g.W),n.Y36(p.d),n.Y36(f._))})),(0,i.Z)(GlobaUserPanel,"ɵcmp",n.Xpm({type:e,selectors:[["global-user-panel"]],outputs:{closepopup:"closepopup"},decls:27,vars:7,consts:[[1,"slds-is-fixed","slds-box--border","slds-dropdown","slds-dropdown--right","slds-m-right--small","slds-m-top--medium"],[1,"slds-grid","slds-p-around--small","slds-grid--vertical-align-center"],[1,"slds-m-left--small"],[1,"slds-text-heading--medium",3,"title"],[1,"slds-theme--shade","slds-p-around--small","slds-border--top","slds-border--bottom"],[1,"slds-list--horizontal","slds-has-dividers--left"],[1,"slds-item"],["href","javascript:void(0);",1,"slds-text-link--reset",3,"click"],["label","LBL_DETAILS"],["class","slds-item",4,"ngIf"],[1,"slds-p-around--small","slds-form--stacked"],[3,"selected"],[1,"slds-form-element"],[1,"slds-form-element__label"],["label","LBL_SELECT_TIMEZONE"],["denyEmpty","true",3,"ngModel","ngModelChange"],["class","slds-p-top--small slds-grid slds-grid_vertical-align-center slds-grid--align-spread",4,"ngIf"],[1,"slds-theme--shade","slds-p-around--x-small","slds-grid"],[1,"slds-grid","slds-grid--vertical-align-center"],["class","slds-p-right--xx-small","size","xx-small","icon","omni_channel",4,"ngIf"],["label","LBL_LOGGED_ON_SYSTEM"],[1,"slds-col--bump-left"],["system-title","LBL_LOGOFF",1,"slds-button","slds-button--icon",3,"click"],["icon","logout"],["label","LBL_CHANGE_PASSWORD"],[1,"slds-p-top--small","slds-grid","slds-grid_vertical-align-center","slds-grid--align-spread"],[3,"disabled","ngModel","ngModelChange"],["label","LBL_DEVELOPER_MODE"],[1,"slds-button","slds-button--neutral","slds-truncate",3,"click"],["label","LBL_RESET_AND_RELOAD"],["size","xx-small","icon","omni_channel",1,"slds-p-right--xx-small"]],template:function(e,t){1&e&&(n.TgZ(0,"div",0)(1,"div",1),n._UZ(2,"global-user-panel-icon"),n.TgZ(3,"div",2)(4,"h1",3),n._uU(5),n.qZA()()(),n.TgZ(6,"div",4)(7,"ul",5)(8,"li",6)(9,"a",7),n.NdJ("click",(function(){return t.goDetails()})),n._UZ(10,"system-label",8),n.qZA()(),n.YNc(11,k,3,0,"li",9),n.qZA()(),n.TgZ(12,"div",10)(13,"system-language-selector",11),n.NdJ("selected",(function(){return t.close()})),n.qZA(),n.TgZ(14,"div",12)(15,"label",13),n._UZ(16,"system-label",14),n.qZA(),n.TgZ(17,"system-input-timezone",15),n.NdJ("ngModelChange",(function(e){return t.currentTz=e})),n.qZA()(),n.YNc(18,L,5,2,"div",16),n.qZA(),n.TgZ(19,"div",17)(20,"div",18),n.YNc(21,I,1,0,"system-utility-icon",19),n._UZ(22,"system-label",20),n._uU(23),n.qZA(),n.TgZ(24,"div",21)(25,"button",22),n.NdJ("click",(function(){return t.logoff()})),n._UZ(26,"system-button-icon",23),n.qZA()()()()),2&e&&(n.xp6(4),n.Q6J("title",t.userName),n.xp6(1),n.Oqu(t.displayName),n.xp6(6),n.Q6J("ngIf",t.canChangePassword),n.xp6(6),n.Q6J("ngModel",t.currentTz),n.xp6(1),n.Q6J("ngIf",t.displayDeveloperMode),n.xp6(3),n.Q6J("ngIf",t.socket.connected),n.xp6(2),n.hij(": ",t.systemName," "))},dependencies:[b.O5,v.JJ,v.On,Z.S,_.J,y.U,x._,w.M,T.r,C.R,A.V],encapsulation:2})),GlobaUserPanel})()},7723:(e,t,s)=>{"use strict";s.d(t,{V:()=>h});var i=s(1180),n=s(2242),o=s(5920),l=s(4044),a=s(4505),d=s(4755),r=s(8859);function c(e,t){1&e&&(n.TgZ(0,"span",6),n._UZ(1,"system-utility-icon",7),n.qZA())}function u(e,t){if(1&e&&n._UZ(0,"img",8),2&e){const e=n.oxw();n.Q6J("src",e.userimage,n.LSH)}}let h=(()=>{var e;class GlobaUserPanelIcon{constructor(e,t,s){(0,i.Z)(this,"session",void 0),(0,i.Z)(this,"modalservice",void 0),(0,i.Z)(this,"backend",void 0),(0,i.Z)(this,"showEdit",!1),this.session=e,this.modalservice=t,this.backend=s}changeImage(){this.modalservice.openModal("SystemUploadImage").subscribe((e=>{e.instance.cropheight=150,e.instance.cropwidth=150,e.instance.imagedata.subscribe((e=>{if(!1!==e){let t=this.session.authData.user.user_image;this.session.authData.user.user_image="",this.backend.postRequest("module/Users/"+this.session.authData.userId+"/image",{},{imagedata:e}).subscribe((t=>{this.session.authData.user.user_image=e}),(e=>{this.session.authData.user.user_image=t}))}}))}))}get editstyle(){return{opacity:this.showEdit?1:0}}get userimage(){return this.session.authData.user.user_image}onMouseEnter(){this.showEdit=!0}onMouseLeave(){this.showEdit=!1}}return e=GlobaUserPanelIcon,(0,i.Z)(GlobaUserPanelIcon,"ɵfac",(function(t){return new(t||e)(n.Y36(o.n),n.Y36(l.o),n.Y36(a.y))})),(0,i.Z)(GlobaUserPanelIcon,"ɵcmp",n.Xpm({type:e,selectors:[["global-user-panel-icon"]],decls:7,vars:3,consts:[[1,"slds-is-relative",3,"mouseenter","mouseleave"],["class","slds-icon_container slds-icon-standard-empty slds-icon_container--circle","style","width:40px;height:40px;",4,"ngIf"],["style","height: 40px; width: 40px",3,"src",4,"ngIf"],[1,"slds-is-absolute__top","slds-align--absolute-center",2,"transition",".5s","height","40px","width","40px",3,"ngStyle","click"],[1,"slds-is-absolute__top",2,"background","white","height","40px","width","40px","opacity",".7"],["icon","edit","size","x-small",2,"z-index","1"],[1,"slds-icon_container","slds-icon-standard-empty","slds-icon_container--circle",2,"width","40px","height","40px"],["icon","user","size","small","addclasses","slds-icon","colorclass",""],[2,"height","40px","width","40px",3,"src"]],template:function(e,t){1&e&&(n.TgZ(0,"div",0),n.NdJ("mouseenter",(function(){return t.onMouseEnter()}))("mouseleave",(function(){return t.onMouseLeave()})),n.TgZ(1,"div"),n.YNc(2,c,2,0,"span",1),n.YNc(3,u,1,1,"img",2),n.qZA(),n.TgZ(4,"div",3),n.NdJ("click",(function(){return t.changeImage()})),n._UZ(5,"div",4)(6,"system-utility-icon",5),n.qZA()()),2&e&&(n.xp6(2),n.Q6J("ngIf",!t.userimage),n.xp6(1),n.Q6J("ngIf",t.userimage),n.xp6(1),n.Q6J("ngStyle",t.editstyle))},dependencies:[d.O5,d.PC,r.r],encapsulation:2})),GlobaUserPanelIcon})()},4826:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalComponents:()=>eo});var i=s(1180),n=s(4755),o=s(5030),l=s(4357),a=s(3190),d=s(6490),r=s(3735),c=s(1977),u=s(48),h=s(2552),m=s(6558),g=s(141),p=s(6115),f=s(5650),b=s(3838),v=s(4373),Z=s(7283),y=s(2242),x=s(5920),w=s(4154),T=s(5329),C=s(151),A=s(3463),k=s(8859);const L=["actioncontainerheader"],I=function(e){return{"slds-is-open":e}};let M=(()=>{var e;class GlobalHeaderActions{constructor(e,t,s,n,o){(0,i.Z)(this,"renderer",void 0),(0,i.Z)(this,"elementRef",void 0),(0,i.Z)(this,"session",void 0),(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"actioncontainerheader",void 0),(0,i.Z)(this,"isOpen",!1),(0,i.Z)(this,"clickListener",void 0),(0,i.Z)(this,"isVisible",!1),(0,i.Z)(this,"isInitialized",!1),this.renderer=e,this.elementRef=t,this.session=s,this.metadata=n,this.language=o}initialize(){let e=this.metadata.getComponentConfig("GlobalHeaderActions");if(e&&e.actionset){let t=this.metadata.getActionSetItems(e.actionset);for(let e of t)e.actionconfig?.module&&!this.metadata.checkModuleAcl(e.actionconfig?.module,"create")||(this.isVisible=!0,this.metadata.addComponent(e.component,this.actioncontainerheader).subscribe((t=>{t.instance.actionconfig=e.actionconfig,t.instance.closemenu&&t.instance.closemenu.subscribe((e=>{this.isOpen=!1}))})))}this.isInitialized=!0}toggleOpen(){this.isOpen=!this.isOpen,this.isOpen?(this.isInitialized||this.initialize(),this.clickListener=this.renderer.listen("document","click",(e=>this.onClick(e)))):this.clickListener&&this.clickListener()}onClick(e){this.elementRef.nativeElement.contains(e.target)||(this.isOpen=!1,this.clickListener())}}return e=GlobalHeaderActions,(0,i.Z)(GlobalHeaderActions,"ɵfac",(function(t){return new(t||e)(y.Y36(y.Qsj),y.Y36(y.SBq),y.Y36(x.n),y.Y36(w.Pu),y.Y36(T.d))})),(0,i.Z)(GlobalHeaderActions,"ɵcmp",y.Xpm({type:e,selectors:[["global-header-actions"]],viewQuery:function(e,t){if(1&e&&y.Gf(L,7,y.s_b),2&e){let e;y.iGM(e=y.CRH())&&(t.actioncontainerheader=e.first)}},decls:9,vars:5,consts:[[1,"slds-show--medium","slds-dropdown-trigger","slds-dropdown-trigger_click","slds-p-horizontal--xxx-small",3,"ngClass"],[1,"slds-p-around--xx-small",3,"click"],["system-title","LBL_ADD",3,"icon","size"],[1,"slds-is-absolute","slds-dropdown--medium","slds-dropdown","slds-dropdown_right","slds-nubbin_top-right",2,"right","-11px","top","29px"],["role","menu",1,"slds-dropdown__list"],["role","separator",1,"slds-dropdown__header"],["actioncontainerheader",""],[1,"slds-text-title_caps"],["label","LBL_CREATE"]],template:function(e,t){1&e&&(y.TgZ(0,"div",0)(1,"div",1),y.NdJ("click",(function(){return t.toggleOpen()})),y._UZ(2,"system-utility-icon",2),y.qZA(),y.TgZ(3,"div",3)(4,"ul",4)(5,"li",5,6)(7,"span",7),y._UZ(8,"system-label",8),y.qZA()()()()()),2&e&&(y.Q6J("ngClass",y.VKq(3,I,t.isOpen)),y.xp6(2),y.Q6J("icon","add")("size","x-small"))},dependencies:[n.mk,C.S,A._,k.r],encapsulation:2})),GlobalHeaderActions})();var S=s(5710),J=s(788),O=s(4561);let N=(()=>{var e;class GlobalHeaderActionItem{constructor(e,t,s,n,o){(0,i.Z)(this,"session",void 0),(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"model",void 0),(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"dockedComposer",void 0),(0,i.Z)(this,"actionconfig",{}),(0,i.Z)(this,"closemenu",new y.vpe),this.session=e,this.metadata=t,this.model=s,this.language=n,this.dockedComposer=o}ngOnInit(){this.actionconfig.module&&(this.model.module=this.actionconfig.module)}click(){this.dockedComposer.addComposer(this.model.module),this.closemenu.emit(!0)}get label(){return this.actionconfig.label?this.language.getLabel(this.actionconfig.label):this.language.getLabel(this.model.module,"LBL_NEW_FORM_TITLE")}}return e=GlobalHeaderActionItem,(0,i.Z)(GlobalHeaderActionItem,"ɵfac",(function(t){return new(t||e)(y.Y36(x.n),y.Y36(w.Pu),y.Y36(S.o),y.Y36(T.d),y.Y36(J.m))})),(0,i.Z)(GlobalHeaderActionItem,"ɵcmp",y.Xpm({type:e,selectors:[["global-header-action-item"]],features:[y._Bn([S.o])],decls:5,vars:2,consts:[["role","presentation",1,"slds-dropdown__item"],["href","javascript:void(0)",1,"slds-grid","slds-grid_vertical-align-center","slds-p-horizontal--x-small","slds-p-vertical--xx-small",3,"click"],["addclasses","'slds-icon slds-icon_small",3,"module"],[1,"slds-truncate","slds-size--1-of-1"]],template:function(e,t){1&e&&(y.TgZ(0,"li",0)(1,"a",1),y.NdJ("click",(function(){return t.click()})),y._UZ(2,"system-icon",2),y.TgZ(3,"div",3),y._uU(4),y.qZA()()()),2&e&&(y.xp6(2),y.Q6J("module",t.model.module),y.xp6(2),y.Oqu(t.label))},dependencies:[O.f],encapsulation:2})),GlobalHeaderActionItem})();var F=s(4376),q=s(2032),E=s(3348),Y=s(4044),D=s(2656);const Q=["favbutton"];function U(e,t){if(1&e){const e=y.EpF();y.TgZ(0,"li",20),y.NdJ("selected",(function(){y.CHM(e);const t=y.oxw(2);return y.KtG(t.closeFavorites())})),y.qZA()}if(2&e){const e=t.$implicit;y.Q6J("item",e)}}function R(e,t){if(1&e){const e=y.EpF();y.TgZ(0,"section",8)(1,"div",9)(2,"ul",10)(3,"li",11)(4,"div",12)(5,"h3",13),y._UZ(6,"system-label",14),y.qZA()()(),y.YNc(7,U,1,1,"li",15),y.qZA()(),y.TgZ(8,"footer",16)(9,"ul")(10,"li")(11,"button",17),y.NdJ("click",(function(){y.CHM(e);const t=y.oxw();return y.KtG(t.openEditModal())})),y._UZ(12,"system-button-icon",18)(13,"system-label",19),y.qZA()()()()()}if(2&e){const e=y.oxw();y.xp6(7),y.Q6J("ngForOf",e.favorite.favorites)}}const j=function(e){return{"slds-is-selected":e}};let B=(()=>{var e;class GlobalHeaderFavorite{constructor(e,t,s,n,o,l,a,d){(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"favorite",void 0),(0,i.Z)(this,"navigation",void 0),(0,i.Z)(this,"router",void 0),(0,i.Z)(this,"renderer",void 0),(0,i.Z)(this,"elementRef",void 0),(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"modal",void 0),(0,i.Z)(this,"favbutton",void 0),(0,i.Z)(this,"clickListener",void 0),(0,i.Z)(this,"showFavorites",!1),this.metadata=e,this.favorite=t,this.navigation=s,this.router=n,this.renderer=o,this.elementRef=l,this.language=a,this.modal=d,this.navigation.activeTab$.subscribe((e=>this.handleNavigationChange()))}get canShowFavorites(){return this.metadata.getActiveRole().showfavorites&&"0"!=this.metadata.getActiveRole().showfavorites}get nofavorites(){return 0==this.favorite.favorites.length}handleNavigationChange(){let e=this.navigation.activeTabObject;if("main"==e.id)return this.favorite.disable();"module/:module/:id"==this.metadata.getRouteDetails(e.path.replace("tab/:tabid/","")).path?this.favorite.enable(e.params.module,e.params.id):this.favorite.disable()}toggleFavorite(){this.favorite.isFavorite?this.favorite.deleteFavorite():this.favorite.setFavorite(),this.favbutton.element.nativeElement.blur()}closeFavorites(){this.showFavorites=!1}toggleFavorites(){this.showFavorites=!this.showFavorites,this.showFavorites?this.clickListener=this.renderer.listen("document","click",(e=>this.onClick(e))):this.clickListener&&this.clickListener()}onClick(e){this.elementRef.nativeElement.contains(e.target)||(this.showFavorites=!1,this.clickListener())}openEditModal(){this.modal.openModal("SpiceFavoritesEditModal")}}return e=GlobalHeaderFavorite,(0,i.Z)(GlobalHeaderFavorite,"ɵfac",(function(t){return new(t||e)(y.Y36(w.Pu),y.Y36(F.G),y.Y36(q.G),y.Y36(E.F0),y.Y36(y.Qsj),y.Y36(y.SBq),y.Y36(T.d),y.Y36(Y.o))})),(0,i.Z)(GlobalHeaderFavorite,"ɵcmp",y.Xpm({type:e,selectors:[["global-header-favorite"]],viewQuery:function(e,t){if(1&e&&y.Gf(Q,5,y.s_b),2&e){let e;y.iGM(e=y.CRH())&&(t.favbutton=e.first)}},decls:8,vars:6,consts:[[1,"slds-global-actions__favorites","slds-m-around--none","slds-dropdown-trigger","slds-dropdown-trigger_click"],[1,"slds-button-group"],["system-title","LBL_MARK_FAVORITE",1,"slds-button","slds-button_icon","slds-global-actions__favorites-action","slds-button_icon","slds-button_icon-border","slds-button_icon-small",3,"disabled","ngClass","click"],["favbutton",""],["icon","favorite"],["system-title","LBL_ALL_FAVORITES",1,"slds-button","slds-button_icon","slds-global-actions__favorites-more","slds-button_icon","slds-button_icon-border","slds-button_icon-small",3,"disabled","click"],["icon","down"],["class","slds-popover slds-nubbin--top-right slds-dynamic-menu","role","dialog","style","position:absolute;right:-15px;top:37px",4,"ngIf"],["role","dialog",1,"slds-popover","slds-nubbin--top-right","slds-dynamic-menu",2,"position","absolute","right","-15px","top","37px"],[1,"slds-popover__body","slds-p-horizontal_none"],[1,"slds-listbox","slds-listbox_vertical","slds-dropdown_length-10"],["role","presentation",1,"slds-listbox__item"],["role","presentation",1,"slds-media","slds-listbox__option","slds-listbox__option_plain"],["role","presentation",1,"slds-listbox__option-header"],["label","LBL_FAVORITES"],["global-header-search-recent-item","","role","presentation","class","slds-listbox__item",3,"item","selected",4,"ngFor","ngForOf"],[1,"slds-popover__footer"],[1,"slds-button","slds-button_reset","slds-p-vertical_xx-small","slds-size_1-of-1",3,"click"],["icon","edit",1,"slds-p-right--xx-small"],["label","LBL_EDIT_FAVORITES"],["global-header-search-recent-item","","role","presentation",1,"slds-listbox__item",3,"item","selected"]],template:function(e,t){1&e&&(y.TgZ(0,"div",0)(1,"div",1)(2,"button",2,3),y.NdJ("click",(function(){return t.toggleFavorite()})),y._UZ(4,"system-button-icon",4),y.qZA(),y.TgZ(5,"button",5),y.NdJ("click",(function(){return t.toggleFavorites()})),y._UZ(6,"system-button-icon",6),y.qZA()(),y.YNc(7,R,14,1,"section",7),y.qZA()),2&e&&(y.xp6(2),y.Q6J("disabled",!t.favorite.isEnabled)("ngClass",y.VKq(4,j,t.favorite.isFavorite)),y.xp6(3),y.Q6J("disabled",t.nofavorites),y.xp6(2),y.Q6J("ngIf",t.showFavorites))},dependencies:[n.mk,n.sg,n.O5,C.S,D.J,A._,v.S],encapsulation:2})),GlobalHeaderFavorite})();function G(e,t){if(1&e){const e=y.EpF();y.TgZ(0,"button",1),y.NdJ("click",(function(){y.CHM(e);const t=y.oxw();return y.KtG(t.toggleEnabled())})),y._UZ(1,"system-button-icon",2),y.qZA()}if(2&e){const e=y.oxw();y.ekj("slds-is-selected",e.language.inlineEditEnabled),y.xp6(1),y.Q6J("addclasses","slds-button--icon-xx-small "+(e.language.inlineEditEnabled?"slds-text-color_success":"slds-text-color--inverse-weak"))}}let P=(()=>{var e;class GlobalHeaderLabelInlineEdit{constructor(e,t){(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"session",void 0),this.language=e,this.session=t}toggleEnabled(){this.language.inlineEditEnabled=!this.language.inlineEditEnabled,this.language.currentlanguage$.emit(this.language.currentlanguage)}}return e=GlobalHeaderLabelInlineEdit,(0,i.Z)(GlobalHeaderLabelInlineEdit,"ɵfac",(function(t){return new(t||e)(y.Y36(T.d),y.Y36(x.n))})),(0,i.Z)(GlobalHeaderLabelInlineEdit,"ɵcmp",y.Xpm({type:e,selectors:[["global-header-label-inline-edit"]],decls:1,vars:1,consts:[["system-title","LBL_ENABLE_INLINE_EDIT","class","slds-button slds-button_icon slds-button_icon slds-button_icon-small",3,"slds-is-selected","click",4,"ngIf"],["system-title","LBL_ENABLE_INLINE_EDIT",1,"slds-button","slds-button_icon","slds-button_icon","slds-button_icon-small",3,"click"],["icon","text",3,"addclasses"]],template:function(e,t){1&e&&y.YNc(0,G,2,3,"button",0),2&e&&y.Q6J("ngIf",t.session.isAdmin)},dependencies:[n.O5,C.S,D.J],encapsulation:2})),GlobalHeaderLabelInlineEdit})();function H(e,t){if(1&e){const e=y.EpF();y.TgZ(0,"div",1),y.NdJ("click",(function(){y.CHM(e);const t=y.oxw();return y.KtG(t.goAdmin())})),y._UZ(1,"system-utility-icon",2),y.qZA()}if(2&e){const e=y.oxw();y.Q6J("title",e.language.getLabel("LBL_WORKBENCH")),y.xp6(1),y.Q6J("icon","setup")("size","x-small")}}let z=(()=>{var e;class GlobalHeaderWorkbench{constructor(e,t,s){(0,i.Z)(this,"session",void 0),(0,i.Z)(this,"router",void 0),(0,i.Z)(this,"language",void 0),this.session=e,this.router=t,this.language=s}isAdmin(){return this.session.isAdmin}goAdmin(){this.router.navigate(["/admin"])}}return e=GlobalHeaderWorkbench,(0,i.Z)(GlobalHeaderWorkbench,"ɵfac",(function(t){return new(t||e)(y.Y36(x.n),y.Y36(E.F0),y.Y36(T.d))})),(0,i.Z)(GlobalHeaderWorkbench,"ɵcmp",y.Xpm({type:e,selectors:[["global-header-workbench"]],decls:1,vars:1,consts:[["class","slds-p-around--xx-small",3,"title","click",4,"ngIf"],[1,"slds-p-around--xx-small",3,"title","click"],[3,"icon","size"]],template:function(e,t){1&e&&y.YNc(0,H,2,3,"div",0),2&e&&y.Q6J("ngIf",t.isAdmin())},dependencies:[n.O5,k.r],encapsulation:2})),GlobalHeaderWorkbench})();var V=s(4411),K=s(6625),$=s(3278),X=s(4664);function W(e,t){if(1&e){const e=y.EpF();y.TgZ(0,"div",2),y.NdJ("click",(function(){y.CHM(e);const t=y.oxw();return y.KtG(t.reloadConf())})),y._UZ(1,"system-utility-icon",3),y.qZA()}2&e&&(y.xp6(1),y.Q6J("icon","sync")("size","x-small"))}function ee(e,t){1&e&&(y.TgZ(0,"div",4),y._UZ(1,"system-spinner",5),y.qZA())}let te=(()=>{var e;class GlobalHeaderReload{constructor(e,t,s,n,o,l){(0,i.Z)(this,"session",void 0),(0,i.Z)(this,"router",void 0),(0,i.Z)(this,"loader",void 0),(0,i.Z)(this,"modal",void 0),(0,i.Z)(this,"configuration",void 0),(0,i.Z)(this,"toast",void 0),(0,i.Z)(this,"loadTasks",!1),(0,i.Z)(this,"loadermodal",void 0),this.session=e,this.router=t,this.loader=s,this.modal=n,this.configuration=o,this.toast=l}isAdmin(){return this.session.isAdmin}reloadConf(){this.loadTasks=!0,this.modal.openModal("GlobalHeaderReloadModal",!1).subscribe((e=>{this.loadermodal=e})),this.loader.load().subscribe((e=>{!0===e?(this.toast.sendToast("LBL_DATA_RELOADED"),this.loadTasks=!1,this.loadermodal.instance.self.destroy()):(this.toast.sendToast("error","error","Reload failed"),this.loadTasks=!1,this.loadermodal.instance.self.destroy())}))}}return e=GlobalHeaderReload,(0,i.Z)(GlobalHeaderReload,"ɵfac",(function(t){return new(t||e)(y.Y36(x.n),y.Y36(E.F0),y.Y36(V._),y.Y36(Y.o),y.Y36(K.C),y.Y36($.A))})),(0,i.Z)(GlobalHeaderReload,"ɵcmp",y.Xpm({type:e,selectors:[["global-header-reload"]],decls:2,vars:2,consts:[["class","slds-p-around--xx-small","system-title","LBL_RELOAD_CONFIGURATION",3,"click",4,"ngIf"],["class","slds-p-around--xx-small","system-title","LBL_RELOAD_CONFIGURATION",4,"ngIf"],["system-title","LBL_RELOAD_CONFIGURATION",1,"slds-p-around--xx-small",3,"click"],[3,"icon","size"],["system-title","LBL_RELOAD_CONFIGURATION",1,"slds-p-around--xx-small"],["size","12"]],template:function(e,t){1&e&&(y.YNc(0,W,2,2,"div",0),y.YNc(1,ee,2,0,"div",1)),2&e&&(y.Q6J("ngIf",t.isAdmin()&&!t.loadTasks),y.xp6(1),y.Q6J("ngIf",t.isAdmin()&&t.loadTasks))},dependencies:[n.O5,C.S,X.W,k.r],encapsulation:2})),GlobalHeaderReload})();var se=s(661);let ie=(()=>{var e;class GlobalSetup{}return e=GlobalSetup,(0,i.Z)(GlobalSetup,"ɵfac",(function(t){return new(t||e)})),(0,i.Z)(GlobalSetup,"ɵcmp",y.Xpm({type:e,selectors:[["global-setup"]],decls:0,vars:0,template:function(e,t){},encapsulation:2})),GlobalSetup})();var ne=s(5289),oe=s(3981),le=s(8764),ae=s(314),de=s(3144),re=s(4461),ce=s(7919);function ue(e,t){if(1&e&&(y.TgZ(0,"div",17),y._uU(1),y._UZ(2,"br"),y.qZA()),2&e){const e=y.oxw();y.xp6(1),y.hij(" password Requirements: ",e.pwdGuideline,"")}}function he(e,t){if(1&e&&(y.TgZ(0,"div",18),y._uU(1),y.qZA()),2&e){const e=y.oxw();y.xp6(1),y.Oqu(e.pwderror)}}function me(e,t){if(1&e&&(y.TgZ(0,"div",18),y._uU(1),y.qZA()),2&e){const e=y.oxw();y.xp6(1),y.Oqu(e.oldPwError)}}function ge(e,t){if(1&e&&(y.TgZ(0,"div",18),y._uU(1),y.qZA()),2&e){const e=y.oxw();y.xp6(1),y.Oqu(e.pwdreperror)}}const pe=function(e){return{"slds-has-error":e}};let fe=(()=>{var e;class GlobalLoginResetPassword{constructor(e,t,s,n,o,l){(0,i.Z)(this,"loginService",void 0),(0,i.Z)(this,"http",void 0),(0,i.Z)(this,"configuration",void 0),(0,i.Z)(this,"toast",void 0),(0,i.Z)(this,"session",void 0),(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"oldPassword",void 0),(0,i.Z)(this,"closeRenewDialog",new y.vpe),(0,i.Z)(this,"password",void 0),(0,i.Z)(this,"repeatPassword",void 0),(0,i.Z)(this,"pwdCheck",new RegExp("//")),(0,i.Z)(this,"pwdGuideline",void 0),(0,i.Z)(this,"posting",!1),this.loginService=e,this.http=t,this.configuration=s,this.toast=n,this.session=o,this.language=l,this.getInfo()}get oldPwError(){return this.oldPassword==this.password&&"Old password is not allowed to be used as a new password"}get pwderror(){return!(!this.password||this.pwdCheck.test(this.password))&&"Password does not match the Guideline."}get pwdreperror(){return this.password!=this.repeatPassword&&"Inputs for the new Password does not match."}closeDialog(){this.closeRenewDialog.emit(!0)}keypressed(e){"Enter"===e.key&&this.sendNewPass(),"Escape"===e.key&&this.closeDialog()}getInfo(){let e=this.configuration.getCapabilityConfig("userpassword");this.pwdCheck=new RegExp(e.regex);let t=[];e.onelower&&t.push("one lower case"),e.oneupper&&t.push("one upper case"),e.onespecial&&t.push("one special"),e.onenumber&&t.push("one number"),e.minpwdlength&&t.push("minimum length "+e.minpwdlength),this.pwdGuideline=t.join(", ")}get canSave(){return this.password&&0==this.oldPwError&&0==this.pwderror&&0==this.pwdreperror&&!this.posting}sendNewPass(){if(this.canSave){let e=new de.WM;e=e.set("OAuth-Token",this.session.authData.sessionId),this.posting=!0,this.http.post(this.configuration.getBackendUrl()+"/resetTempPass",{password:this.password},{headers:e}).subscribe((e=>{this.toast.sendToast("Password was successfully changed","success","",5),this.loginService.load()}),(e=>{this.posting=!1}))}}}return e=GlobalLoginResetPassword,(0,i.Z)(GlobalLoginResetPassword,"ɵfac",(function(t){return new(t||e)(y.Y36(re.j),y.Y36(de.eN),y.Y36(K.C),y.Y36($.A),y.Y36(x.n),y.Y36(T.d))})),(0,i.Z)(GlobalLoginResetPassword,"ɵcmp",y.Xpm({type:e,selectors:[["global-login-reset-password"]],hostBindings:function(e,t){1&e&&y.NdJ("keyup",(function(e){return t.keypressed(e)}),!1,y.Jf7)},inputs:{oldPassword:["oldpassword","oldPassword"]},outputs:{closeRenewDialog:"closeRenewDialog"},decls:24,vars:14,consts:[["id","reset-password"],[2,"height","640px"],["role","dialog","tabindex","-1","aria-labelledby","modal-heading-01","aria-describedby","modal-content-id-1",1,"slds-modal","slds-fade-in-open"],[1,"slds-modal__container"],[1,"slds-modal__header"],["title","Close",1,"slds-button","slds-button_icon","slds-modal__close","slds-button_icon-inverse",3,"click"],[3,"icon"],[1,"slds-assistive-text"],["id","modal-heading-01",1,"slds-text-heading_medium","slds-hyphenate"],["id","modal-content-id-1",1,"slds-modal__content","slds-p-around_medium"],["class","slds-m-vertical--medium",4,"ngIf"],[1,"slds-form-element","slds-m-vertical--small",3,"ngClass"],[3,"ngModel","ngModelChange"],["class","slds-form-element__help slds-text-color--error",4,"ngIf"],[1,"slds-modal__footer"],["tabindex","3",1,"slds-button","slds-button--brand",3,"disabled","click"],[1,"slds-backdrop","slds-backdrop_open"],[1,"slds-m-vertical--medium"],[1,"slds-form-element__help","slds-text-color--error"]],template:function(e,t){1&e&&(y.TgZ(0,"div",0)(1,"div",1)(2,"section",2)(3,"div",3)(4,"header",4)(5,"button",5),y.NdJ("click",(function(){return t.closeDialog()})),y._UZ(6,"system-button-icon",6),y.TgZ(7,"span",7),y._uU(8,"Close"),y.qZA()(),y.TgZ(9,"h2",8),y._uU(10,"New password"),y.qZA()(),y.TgZ(11,"div",9),y.YNc(12,ue,3,1,"div",10),y.TgZ(13,"div",11)(14,"system-input-password",12),y.NdJ("ngModelChange",(function(e){return t.password=e})),y.qZA(),y.YNc(15,he,2,1,"div",13),y.YNc(16,me,2,1,"div",13),y.qZA(),y.TgZ(17,"div",11)(18,"system-input-password",12),y.NdJ("ngModelChange",(function(e){return t.repeatPassword=e})),y.qZA(),y.YNc(19,ge,2,1,"div",13),y.qZA()(),y.TgZ(20,"footer",14)(21,"button",15),y.NdJ("click",(function(){return t.sendNewPass()})),y._uU(22,"Save"),y.qZA()()()(),y._UZ(23,"div",16),y.qZA()()),2&e&&(y.xp6(6),y.Q6J("icon","close"),y.xp6(6),y.Q6J("ngIf",t.pwdGuideline),y.xp6(1),y.Q6J("ngClass",y.VKq(10,pe,t.pwderror||t.oldPwError)),y.xp6(1),y.Q6J("ngModel",t.password),y.xp6(1),y.Q6J("ngIf",""!=t.password&&t.pwderror),y.xp6(1),y.Q6J("ngIf",""!=t.password&&t.oldPwError),y.xp6(1),y.Q6J("ngClass",y.VKq(12,pe,t.pwdreperror)),y.xp6(1),y.Q6J("ngModel",t.repeatPassword),y.xp6(1),y.Q6J("ngIf",""!=t.repeatPassword&&t.pwdreperror),y.xp6(2),y.Q6J("disabled",!t.canSave))},dependencies:[n.mk,n.O5,o.JJ,o.On,D.J,ce.Z],encapsulation:2})),GlobalLoginResetPassword})();var be=s(4505),ve=s(2067);function Ze(e,t){if(1&e){const e=y.EpF();y.TgZ(0,"button",1),y.NdJ("click",(function(t){y.CHM(e);const s=y.oxw();return y.KtG(s.signIn(t))})),y.TgZ(1,"div",2),y._UZ(2,"img",3),y.TgZ(3,"div"),y._uU(4,"Sign in with Google"),y.qZA()()()}}let _e=(()=>{var e;class GlobalLoginGoogle{constructor(e,t,s,n,o,l,a){(0,i.Z)(this,"backend",void 0),(0,i.Z)(this,"configuration",void 0),(0,i.Z)(this,"http",void 0),(0,i.Z)(this,"loginService",void 0),(0,i.Z)(this,"session",void 0),(0,i.Z)(this,"libloader",void 0),(0,i.Z)(this,"toast",void 0),(0,i.Z)(this,"authenticatedUser",void 0),(0,i.Z)(this,"visible",!1),(0,i.Z)(this,"disabled",!0),(0,i.Z)(this,"auth2",void 0),(0,i.Z)(this,"token",new y.vpe),this.backend=e,this.configuration=t,this.http=s,this.loginService=n,this.session=o,this.libloader=l,this.toast=a,this.configuration.loaded$.subscribe((e=>{e&&this.googleInit()}))}googleInit(){let e=this.configuration.getCapabilityConfig("google_oauth");e?.clientid&&(this.visible=!0,this.libloader.loadFromSource(["https://apis.google.com/js/platform.js"]).subscribe((t=>{gapi.load("auth2",(()=>{this.auth2=gapi.auth2.init({client_id:e.clientid,cookiepolicy:"single_host_origin"}),this.disabled=!1}))}),(e=>{this.disabled=!0})))}signIn(e){e.preventDefault(),e.stopPropagation(),Promise.resolve(this.auth2.signIn()).then((e=>{let t=this.auth2.currentUser.get().getBasicProfile().getEmail();!this.authenticatedUser||this.authenticatedUser&&this.authenticatedUser==t?this.token.emit(e.getAuthResponse().id_token):this.authenticatedUser&&this.authenticatedUser!=t&&this.toast.sendToast("Wrong username","warning","usernames do not match, pleas elogin with the proper user")})).catch((e=>{this.toast.sendToast("Error with Google Login","error")}))}}return e=GlobalLoginGoogle,(0,i.Z)(GlobalLoginGoogle,"ɵfac",(function(t){return new(t||e)(y.Y36(be.y),y.Y36(K.C),y.Y36(de.eN),y.Y36(re.j),y.Y36(x.n),y.Y36(ve.$),y.Y36($.A))})),(0,i.Z)(GlobalLoginGoogle,"ɵcmp",y.Xpm({type:e,selectors:[["global-login-google"]],inputs:{authenticatedUser:"authenticatedUser"},outputs:{token:"token"},decls:1,vars:1,consts:[["class","slds-button slds-button_neutral slds-size--1-of-1",3,"click",4,"ngIf"],[1,"slds-button","slds-button_neutral","slds-size--1-of-1",3,"click"],[1,"slds-align--absolute-center","slds-grid","slds-grid--vertical-align-center"],["src","https://developers.google.com/identity/images/g-logo.png",2,"height","18px","width","18px","margin-right","24px"]],template:function(e,t){1&e&&y.YNc(0,Ze,5,0,"button",0),2&e&&y.Q6J("ngIf",t.visible)},dependencies:[n.O5],encapsulation:2})),GlobalLoginGoogle})();var ye=s(4142),xe=s(4021),we=s(9621),Te=s(3499),Ce=s(1916),Ae=s(4481);const ke=["twofactorinput"];function Le(e,t){if(1&e){const e=y.EpF();y.TgZ(0,"div",22)(1,"div",23),y._UZ(2,"system-utility-icon",24),y.TgZ(3,"input",25,26),y.NdJ("ngModelChange",(function(t){y.CHM(e);const s=y.oxw(2);return y.KtG(s.code2fa=t)})),y.qZA()()()}if(2&e){const e=y.oxw(2);let t;y.xp6(3),y.Q6J("disabled",e.loggingIn)("ngModel",e.code2fa)("placeholder",null!==(t=null==e.loginLabels.LBL_ENTER_CODE?null:e.loginLabels.LBL_ENTER_CODE.default)&&void 0!==t?t:"Enter code")}}function Ie(e,t){if(1&e){const e=y.EpF();y.ynx(0),y.TgZ(1,"div",7)(2,"div",8),y._UZ(3,"system-utility-icon",16),y.TgZ(4,"input",17),y.NdJ("ngModelChange",(function(t){y.CHM(e);const s=y.oxw();return y.KtG(s.password=t)})),y.qZA()(),y.YNc(5,Le,5,3,"div",18),y.qZA(),y.TgZ(6,"div",19)(7,"button",20),y.NdJ("click",(function(){y.CHM(e);const t=y.oxw();return y.KtG(t.relogin())})),y._UZ(8,"system-label",21),y.qZA()(),y.BQk()}if(2&e){const e=y.oxw();y.xp6(4),y.Q6J("disabled",e.loggingIn)("ngModel",e.password),y.xp6(1),y.Q6J("ngIf",e.twoFactorAuthCodeRequired),y.xp6(2),y.Q6J("disabled",!e.password)}}function Me(e,t){if(1&e){const e=y.EpF();y.TgZ(0,"div",27)(1,"global-login-oauth2",28),y.NdJ("token",(function(t){y.CHM(e);const s=y.oxw();return y.KtG(s.tokenLogin(t))})),y.qZA()()}if(2&e){const e=y.oxw();y.xp6(1),y.Q6J("authenticatedUser",e.session.authData.userName)("issuer",e.login.oauthIssuer)}}let Se=(()=>{var e;class GlobalReLogin{constructor(e,t,s,n){(0,i.Z)(this,"login",void 0),(0,i.Z)(this,"toast",void 0),(0,i.Z)(this,"session",void 0),(0,i.Z)(this,"configuration",void 0),(0,i.Z)(this,"twofactorinput",void 0),(0,i.Z)(this,"self",void 0),(0,i.Z)(this,"password",void 0),(0,i.Z)(this,"loggedin",new y.vpe),(0,i.Z)(this,"loggingIn",!1),(0,i.Z)(this,"twoFactorAuthCodeRequired",!1),(0,i.Z)(this,"code2fa",void 0),this.login=e,this.toast=t,this.session=s,this.configuration=n}get loginLabels(){return this.configuration.data.languages?.required_labels??{}}tokenLogin(e){this.loggingIn=!0,this.login.relogin(null,e.tokenObject).subscribe({next:e=>{this.loggedin.emit(!0),this.close()},error:()=>{this.loggingIn=!1}})}relogin(){this.loggingIn=!0,this.login.authData.code2fa=this.code2fa,this.login.relogin(this.password,null).subscribe({next:e=>{this.loggedin.emit(!0),this.close()},error:e=>{4==e.errorCode&&(this.toast.sendToast(e.message,"success"),this.twoFactorAuthCodeRequired=!0,setTimeout((()=>{this.twofactorinput&&this.twofactorinput.element.nativeElement.focus()}))),this.loggingIn=!1}})}logout(){this.login.logout(!0),this.close()}close(){this.self.destroy()}}return e=GlobalReLogin,(0,i.Z)(GlobalReLogin,"ɵfac",(function(t){return new(t||e)(y.Y36(re.j),y.Y36($.A),y.Y36(x.n),y.Y36(K.C))})),(0,i.Z)(GlobalReLogin,"ɵcmp",y.Xpm({type:e,selectors:[["global-re-login"]],viewQuery:function(e,t){if(1&e&&y.Gf(ke,5,y.s_b),2&e){let e;y.iGM(e=y.CRH())&&(t.twofactorinput=e.first)}},outputs:{loggedin:"loggedin"},decls:16,vars:5,consts:[["size","prompt"],[3,"hiddenCloseButton"],["label","MSG_SESSIONEXPIRED"],["margin","medium",3,"system-overlay-loading-spinner"],[1,"slds-grid","slds-grid--vertical"],[1,"slds-p-vertical--small","slds-align--absolute-center"],["label","MSG_SESSIONEXPIRED","length","long"],[1,"slds-form-element","slds-m-vertical--small"],[1,"slds-form-element__control","slds-input-has-icon","slds-input-has-icon_left"],["icon","user","addclasses","slds-input__icon slds-icon-text-default"],["disabled","","type","text","name","username",1,"slds-input","slds-p-vertical--xx-small",3,"ngModel","ngModelChange"],[4,"ngIf"],["class","slds-p-top--small",4,"ngIf"],[1,"slds-p-top--small","slds-m-top--small","slds-border--top"],[1,"slds-button","slds-button--neutral","slds-button_stretch",3,"click"],["label","LBL_LOGOUT"],["icon","lock","addclasses","slds-icon slds-input__icon slds-input__icon_left slds-icon-text-default"],["type","password","name","password","autocomplete","","tabindex","2","placeholder","Password",1,"slds-input","slds-p-vertical--xx-small",3,"disabled","ngModel","ngModelChange"],["class","slds-form-element slds-m-vertical--small slds-grid slds-grid--vertical-align-center",4,"ngIf"],[1,"slds-p-vertical--xx-small"],[1,"slds-button","slds-button--brand","slds-button_stretch",3,"disabled","click"],["label","LBL_LOGIN"],[1,"slds-form-element","slds-m-vertical--small","slds-grid","slds-grid--vertical-align-center"],[1,"slds-form-element__control","slds-input-has-icon","slds-input-has-icon_left","slds-grow"],["icon","scan","addclasses","slds-icon slds-input__icon slds-input__icon_left slds-icon-text-default"],["type","text","name","code2fa","autocomplete","off","tabindex","2",1,"slds-input","slds-p-vertical--xx-small",3,"disabled","ngModel","placeholder","ngModelChange"],["twofactorinput",""],[1,"slds-p-top--small"],[3,"authenticatedUser","issuer","token"]],template:function(e,t){1&e&&(y.TgZ(0,"system-modal",0)(1,"system-modal-header",1),y._UZ(2,"system-label",2),y.qZA(),y.TgZ(3,"system-modal-content",3)(4,"div",4)(5,"div",5),y._UZ(6,"system-label",6),y.qZA(),y.TgZ(7,"div",7)(8,"div",8),y._UZ(9,"system-utility-icon",9),y.TgZ(10,"input",10),y.NdJ("ngModelChange",(function(e){return t.session.authData.userName=e})),y.qZA()()(),y.YNc(11,Ie,9,4,"ng-container",11),y.YNc(12,Me,2,2,"div",12),y.TgZ(13,"div",13)(14,"button",14),y.NdJ("click",(function(){return t.logout()})),y._UZ(15,"system-label",15),y.qZA()()()()()),2&e&&(y.xp6(1),y.Q6J("hiddenCloseButton",!0),y.xp6(2),y.Q6J("system-overlay-loading-spinner",t.loggingIn),y.xp6(7),y.Q6J("ngModel",t.session.authData.userName),y.xp6(1),y.Q6J("ngIf",!t.login.oauthIssuer||"SpiceCRM"==t.login.oauthIssuer),y.xp6(1),y.Q6J("ngIf","SpiceCRM"!=t.login.oauthIssuer))},dependencies:[n.O5,o.Fj,o.JJ,o.On,xe._,A._,we.j,Te.x,Ce.y,k.r,Ae.Q],encapsulation:2})),GlobalReLogin})();var Je=s(7445),Oe=s(5767),Ne=s(8026);function Fe(e,t){1&e&&(y.TgZ(0,"div",6),y._UZ(1,"system-spinner",14)(2,"system-label",15),y.qZA())}function qe(e,t){if(1&e&&y._UZ(0,"system-progress-bar",16),2&e){const e=y.oxw();y.Q6J("progress",e.progress)("hideText",!0)}}let Ee=(()=>{var e;class GlobalReConnect{constructor(e,t,s){(0,i.Z)(this,"http",void 0),(0,i.Z)(this,"configuration",void 0),(0,i.Z)(this,"login",void 0),(0,i.Z)(this,"self",void 0),(0,i.Z)(this,"password",void 0),(0,i.Z)(this,"connected",new y.vpe),(0,i.Z)(this,"timeToNextCheck",1e3),(0,i.Z)(this,"timerSubscription",void 0),this.http=e,this.configuration=t,this.login=s}ngOnInit(){this.timerSubscription=(0,Je.F)(10).subscribe((e=>{this.timeToNextCheck--,this.checkReconnect()}))}ngOnDestroy(){this.timerSubscription.unsubscribe()}checkReconnect(){0==this.timeToNextCheck&&this.reconnect()}get progress(){return this.timeToNextCheck/10}reconnect(){let e=this.configuration.getBackendUrl()+"/sysinfo";this.http.get(e).subscribe((e=>{this.connected.emit(!0),this.close()}),(e=>{console.log(e),this.timeToNextCheck=1e3}))}logout(){this.login.logout(!0),this.close()}close(){this.self.destroy()}}return e=GlobalReConnect,(0,i.Z)(GlobalReConnect,"ɵfac",(function(t){return new(t||e)(y.Y36(de.eN),y.Y36(K.C),y.Y36(re.j))})),(0,i.Z)(GlobalReConnect,"ɵcmp",y.Xpm({type:e,selectors:[["global-re-connect"]],outputs:{connected:"connected"},decls:15,vars:3,consts:[["size","prompt"],[3,"hiddenCloseButton"],["label","MSG_CONNECTION_LOST"],["margin","large"],[1,"slds-grid","slds-grid_vertical","slds-size--1-of-1","slds-align_absolute-center"],["label","MSG_CONNECTION_LOST","length","long"],[1,"slds-grid","slds-grid_vertical-align-center"],[1,"slds-grow","slds-p-right--small"],["class","slds-grid slds-grid_vertical-align-center",4,"ngIf"],[3,"progress","hideText",4,"ngIf"],[1,"slds-button","slds-button--neutral",3,"click"],["label","LBL_LOGOUT"],[1,"slds-button","slds-button--brand",3,"click"],["label","LBL_RECONNECT_NOW"],["size","16"],["label","LBL_RECONNECTING",1,"slds-p-left--small"],[3,"progress","hideText"]],template:function(e,t){1&e&&(y.TgZ(0,"system-modal",0)(1,"system-modal-header",1),y._UZ(2,"system-label",2),y.qZA(),y.TgZ(3,"system-modal-content",3)(4,"div",4),y._UZ(5,"system-label",5),y.qZA()(),y.TgZ(6,"system-modal-footer")(7,"div",6)(8,"div",7),y.YNc(9,Fe,3,0,"div",8),y.YNc(10,qe,1,2,"system-progress-bar",9),y.qZA(),y.TgZ(11,"button",10),y.NdJ("click",(function(){return t.logout()})),y._UZ(12,"system-label",11),y.qZA(),y.TgZ(13,"button",12),y.NdJ("click",(function(){return t.reconnect()})),y._UZ(14,"system-label",13),y.qZA()()()()),2&e&&(y.xp6(1),y.Q6J("hiddenCloseButton",!0),y.xp6(8),y.Q6J("ngIf",t.timeToNextCheck<0),y.xp6(1),y.Q6J("ngIf",t.timeToNextCheck>0))},dependencies:[n.O5,A._,we.j,Te.x,Oe.p,Ce.y,Ne.J,X.W],encapsulation:2})),GlobalReConnect})();var Ye=s(4365),De=s(6119),Qe=s(5853),Ue=s(2294),Re=s(3369),je=s(382),Be=s(7763),Ge=s(3333);const Pe=["menulist"],He=["menucontainer"];function ze(e,t){if(1&e){const e=y.EpF();y.TgZ(0,"div",11)(1,"button",12),y.NdJ("click",(function(){y.CHM(e);const t=y.oxw();return y.KtG(t.toggleOpen())})),y._UZ(2,"system-button-icon",13),y.qZA()()}2&e&&(y.xp6(2),y.Q6J("icon","chevrondown"))}const Ve=function(e){return{"slds-hide":e}},Ke=function(e){return{"slds-disabled-text":e}};function $e(e,t){if(1&e){const e=y.EpF();y.TgZ(0,"li",15),y.NdJ("click",(function(){const t=y.CHM(e).$implicit,s=y.oxw(2);return y.KtG(s.propagateclick(t.id))})),y.TgZ(1,"a",16),y._UZ(2,"global-navigation-menu-item-action-container",17),y.qZA()()}if(2&e){const e=t.$implicit,s=y.oxw(2);y.Q6J("ngClass",y.VKq(3,Ve,s.isHidden(e.id))),y.xp6(2),y.Q6J("ngClass",y.VKq(5,Ke,s.isDisabled(e.id)))("actionitem",e)}}function Xe(e,t){if(1&e&&(y.ynx(0),y.YNc(1,$e,3,7,"li",14),y.BQk()),2&e){const e=y.oxw();y.xp6(1),y.Q6J("ngForOf",e.itemMenu)}}function We(e,t){if(1&e){const e=y.EpF();y.TgZ(0,"li",23),y.NdJ("click",(function(){const t=y.CHM(e).$implicit,s=y.oxw(2);return y.KtG(s.navigateRecent(t.item_id))})),y.TgZ(1,"a",16)(2,"span",2),y._uU(3),y.qZA()()()}if(2&e){const e=t.$implicit;y.xp6(3),y.Oqu(e.item_summary)}}function et(e,t){if(1&e&&(y.ynx(0),y._UZ(1,"li",18),y.TgZ(2,"li",19)(3,"span",20),y._UZ(4,"system-label",21),y.qZA()(),y.YNc(5,We,4,1,"li",22),y.BQk()),2&e){const e=y.oxw();y.xp6(5),y.Q6J("ngForOf",e.favorites)}}const tt=function(e,t,s){return{module:e,data:t,id:s}};function st(e,t){if(1&e){const e=y.EpF();y.TgZ(0,"li",27),y.NdJ("click",(function(){const t=y.CHM(e).$implicit,s=y.oxw(2);return y.KtG(s.navigateRecent(t.item_id))})),y.TgZ(1,"a",16)(2,"span",2),y._uU(3),y.qZA()()()}if(2&e){const e=t.$implicit,s=y.oxw(2);y.Q6J("system-model-provider",y.kEZ(2,tt,s.model.module,e.data,e.id)),y.xp6(3),y.Oqu(e.data.summary_text)}}function it(e,t){1&e&&(y.TgZ(0,"li",28),y._UZ(1,"system-label",29),y.qZA())}function nt(e,t){if(1&e&&(y.ynx(0),y._UZ(1,"li",18),y.TgZ(2,"li",19)(3,"span",20),y._UZ(4,"system-label",24),y.qZA()(),y.YNc(5,st,4,6,"li",25),y.YNc(6,it,2,0,"li",26),y.BQk()),2&e){const e=y.oxw();y.xp6(5),y.Q6J("ngForOf",e.recentitems),y.xp6(1),y.Q6J("ngIf",0==e.recentitems.length&&e.isInitialized)}}function ot(e,t){1&e&&y._UZ(0,"system-spinner",30)}const lt=function(e){return{"slds-is-open":e}};let at=(()=>{var e;class GlobalNavigationMenuItem{constructor(e,t,s,n,o,l,a,d,r,c,u){(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"router",void 0),(0,i.Z)(this,"elementRef",void 0),(0,i.Z)(this,"broadcast",void 0),(0,i.Z)(this,"navigation",void 0),(0,i.Z)(this,"model",void 0),(0,i.Z)(this,"view",void 0),(0,i.Z)(this,"recent",void 0),(0,i.Z)(this,"favorite",void 0),(0,i.Z)(this,"renderer",void 0),(0,i.Z)(this,"menulist",void 0),(0,i.Z)(this,"menucontainer",void 0),(0,i.Z)(this,"menuItemlist",void 0),(0,i.Z)(this,"clickListener",void 0),(0,i.Z)(this,"itemtext","test"),(0,i.Z)(this,"item",{module:null,name:null}),(0,i.Z)(this,"isOpen",!1),(0,i.Z)(this,"isInitialized",!1),(0,i.Z)(this,"itemMenu",[]),(0,i.Z)(this,"favorites",[]),(0,i.Z)(this,"menucomponents",[]),this.metadata=e,this.language=t,this.router=s,this.elementRef=n,this.broadcast=o,this.navigation=l,this.model=a,this.view=d,this.recent=r,this.favorite=c,this.renderer=u,this.view.displayLabels=!1}executeMenuItem(e){this.itemMenu.some(((t,s)=>{if(t.id===e){if("add"===t.action)this.isOpen=!1,this.model.addModel();return!0}}))}navigateTo(){this.isOpen=!1,this.router.navigate(["/module/"+this.item.module])}navigateRecent(e){this.isOpen=!1,this.router.navigate(["/module/"+this.item.module+"/"+e])}ngOnInit(){let e=this.metadata.getComponentConfig("GlobalNavigationMenuItem",this.item.module);e.actionset?this.itemMenu=this.metadata.getActionSetItems(e.actionset):this.itemMenu=this.metadata.getModuleMenu(this.item.module),this.model.module=this.item.module}toggleOpen(){this.isInitialized||this.initialize(),this.isOpen=!this.isOpen,this.isOpen?(this.favorites=this.getFavorites(),this.buildMenu(),this.clickListener=this.renderer.listen("document","click",(e=>this.onClick(e)))):this.clickListener&&this.clickListener()}initialize(){"Home"!=this.item.module?this.recent.getModuleRecent(this.item.module).subscribe((e=>{this.isInitialized=!0})):this.isInitialized=!0}get recentitems(){return this.recent.moduleItems[this.item.module]?this.recent.moduleItems[this.item.module]:[]}getFavorites(){return this.favorite.getFavorites(this.item.module)}onClick(e){(!this.elementRef.nativeElement.contains(e.target)||this.elementRef.nativeElement.contains(e.target)&&this.menulist.element.nativeElement.contains(e.target))&&(this.isOpen=!1)}hasMenu(){return this.itemMenu.length>0||this.metadata.getModuleTrackflag(this.item.module)}getMenuLabel(e){return this.language.getLabel(this.item.module,e)}isActive(){return this.navigation.activeModule==this.item.module}ngAfterViewInit(){this.broadcast.broadcastMessage("navigation.itemadded",{module:this.item.module,width:this.elementRef.nativeElement.offsetWidth}),this.model.module=this.item.module}buildMenu(){return!0}ngOnDestroy(){this.destroyMenu()}destroyMenu(){for(let e of this.menucomponents)e.destroy()}isDisabled(e){return!!this.menuItemlist&&this.menuItemlist.find((t=>t.id==e))?.disabled}isHidden(e){return!!this.menuItemlist&&this.menuItemlist.find((t=>t.id==e))?.hidden}propagateclick(e){this.menuItemlist.some((t=>{if(t.id==e)return t.disabled||t.execute(),!0}))}}return e=GlobalNavigationMenuItem,(0,i.Z)(GlobalNavigationMenuItem,"ɵfac",(function(t){return new(t||e)(y.Y36(w.Pu),y.Y36(T.d),y.Y36(E.F0),y.Y36(y.SBq),y.Y36(Re.f),y.Y36(q.G),y.Y36(S.o),y.Y36(Ue.e),y.Y36(je.h),y.Y36(F.G),y.Y36(y.Qsj))})),(0,i.Z)(GlobalNavigationMenuItem,"ɵcmp",y.Xpm({type:e,selectors:[["global-navigation-menu-item"]],viewQuery:function(e,t){if(1&e&&(y.Gf(Pe,7,y.s_b),y.Gf(He,7,y.s_b),y.Gf(Qe.r,5)),2&e){let e;y.iGM(e=y.CRH())&&(t.menulist=e.first),y.iGM(e=y.CRH())&&(t.menucontainer=e.first),y.iGM(e=y.CRH())&&(t.menuItemlist=e)}},hostVars:4,hostBindings:function(e,t){2&e&&y.ekj("slds-context-bar__item",!0)("slds-is-active",t.isActive())},inputs:{itemtext:"itemtext",item:"item"},features:[y._Bn([S.o,Ue.e])],decls:14,vars:9,consts:[["aria-haspopup","true",1,"slds-context-bar__dropdown-trigger","slds-dropdown-trigger","slds-dropdown-trigger--click",3,"ngClass"],["href","javascript:void(0);",1,"slds-context-bar__label-action",3,"click"],[1,"slds-truncate"],[3,"module"],["class","slds-context-bar__icon-action slds-p-left--none",4,"ngIf"],[1,"slds-dropdown","slds-nubbin--top"],["role","menu",1,"slds-dropdown__list"],["menulist",""],["menucontainer",""],[4,"ngIf"],["size","16",4,"ngIf"],[1,"slds-context-bar__icon-action","slds-p-left--none"],[1,"slds-button","slds-button--icon","slds-context-bar__button",3,"click"],[3,"icon"],["class","slds-dropdown__item","role","presentation",3,"ngClass","click",4,"ngFor","ngForOf"],["role","presentation",1,"slds-dropdown__item",3,"ngClass","click"],["href","javascript:void(0);","role","menuitem"],[1,"slds-truncate",3,"ngClass","actionitem"],["role","separator",1,"slds-has-divider--top-space"],["role","separator",1,"slds-dropdown__header"],[1,"slds-text-title--caps"],["label","LBL_FAVORITES"],["class","slds-dropdown__item","role","presentation",3,"click",4,"ngFor","ngForOf"],["role","presentation",1,"slds-dropdown__item",3,"click"],["label","LBL_RECENTLYVIEWED"],["class","slds-dropdown__item","role","presentation",3,"system-model-provider","click",4,"ngFor","ngForOf"],["class","slds-dropdown__item slds-align--absolute-center slds-text-color_inverse-weak slds-p-around--xx-small",4,"ngIf"],["role","presentation",1,"slds-dropdown__item",3,"system-model-provider","click"],[1,"slds-dropdown__item","slds-align--absolute-center","slds-text-color_inverse-weak","slds-p-around--xx-small"],["label","LBL_NO_ENTRIES"],["size","16"]],template:function(e,t){1&e&&(y.TgZ(0,"li",0)(1,"a",1),y.NdJ("click",(function(){return t.navigateTo()})),y.TgZ(2,"span",2),y._UZ(3,"system-label-modulename",3),y.qZA()(),y.YNc(4,ze,3,1,"div",4),y.TgZ(5,"div",5)(6,"ul",6,7),y._UZ(8,"div",null,8),y.YNc(10,Xe,2,1,"ng-container",9),y.YNc(11,et,6,1,"ng-container",9),y.YNc(12,nt,7,2,"ng-container",9),y.qZA(),y.YNc(13,ot,1,0,"system-spinner",10),y.qZA()()),2&e&&(y.Q6J("ngClass",y.VKq(7,lt,t.isOpen)),y.xp6(3),y.Q6J("module",t.item.name),y.xp6(1),y.Q6J("ngIf",t.hasMenu()),y.xp6(6),y.Q6J("ngIf",t.itemMenu.length>0),y.xp6(1),y.Q6J("ngIf",t.favorites.length>0),y.xp6(1),y.Q6J("ngIf","Home"!=t.item.module),y.xp6(1),y.Q6J("ngIf",!t.isInitialized))},dependencies:[n.mk,n.sg,n.O5,Be.u,D.J,A._,Ge.M,X.W,Qe.r],encapsulation:2})),GlobalNavigationMenuItem})(),dt=(()=>{var e;class GlobalNavigationMenuItemIcon{constructor(){(0,i.Z)(this,"icon","")}getSvgHRef(){return"./vendor/sldassets/icons/utility-sprite/svg/symbols.svg#"+this.icon}}return e=GlobalNavigationMenuItemIcon,(0,i.Z)(GlobalNavigationMenuItemIcon,"ɵfac",(function(t){return new(t||e)})),(0,i.Z)(GlobalNavigationMenuItemIcon,"ɵcmp",y.Xpm({type:e,selectors:[["global-nevigation-menu-item-icon"]],inputs:{icon:"icon"},decls:2,vars:1,consts:[["aria-hidden","true",1,"slds-icon","slds-icon--x-small","slds-icon-text-default","slds-m-right--x-small"]],template:function(e,t){1&e&&(y.O4$(),y.TgZ(0,"svg",0),y._UZ(1,"use"),y.qZA()),2&e&&(y.xp6(1),y.uIk("href",t.getSvgHRef(),null,"xlink"))},encapsulation:2})),GlobalNavigationMenuItemIcon})(),rt=(()=>{var e;class GlobalNavigationMenuItemNew{constructor(e,t){(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"model",void 0),this.language=e,this.model=t}exceuteItem(){this.model.id="",this.model.addModel()}}return e=GlobalNavigationMenuItemNew,(0,i.Z)(GlobalNavigationMenuItemNew,"ɵfac",(function(t){return new(t||e)(y.Y36(T.d),y.Y36(S.o))})),(0,i.Z)(GlobalNavigationMenuItemNew,"ɵcmp",y.Xpm({type:e,selectors:[["global-navigation-menu-item-new"]],decls:5,vars:3,consts:[["role","presentation",1,"slds-dropdown__item",3,"click"],["href","javascript:void(0);","role","menuitem"],[1,"slds-truncate"],[3,"icon"],[3,"module","singular"]],template:function(e,t){1&e&&(y.TgZ(0,"li",0),y.NdJ("click",(function(){return t.exceuteItem()})),y.TgZ(1,"a",1)(2,"span",2),y._UZ(3,"global-nevigation-menu-item-icon",3)(4,"system-label-modulename",4),y.qZA()()()),2&e&&(y.xp6(3),y.Q6J("icon","add"),y.xp6(1),y.Q6J("module",t.model.module)("singular",!0))},dependencies:[Ge.M,dt],encapsulation:2})),GlobalNavigationMenuItemNew})(),ct=(()=>{var e;class GlobalNavigationMenuItemActionNew{constructor(e,t,s){(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"model",void 0),(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"disabled",!0),this.language=e,this.model=t,this.metadata=s}execute(){this.model.id="",this.model.addModel()}ngOnInit(){this.model.module&&this.metadata.checkModuleAcl(this.model.module,"create")&&(this.disabled=!1)}}return e=GlobalNavigationMenuItemActionNew,(0,i.Z)(GlobalNavigationMenuItemActionNew,"ɵfac",(function(t){return new(t||e)(y.Y36(T.d),y.Y36(S.o),y.Y36(w.Pu))})),(0,i.Z)(GlobalNavigationMenuItemActionNew,"ɵcmp",y.Xpm({type:e,selectors:[["global-navigation-menu-item-action-new"]],decls:3,vars:2,consts:[[1,"slds-truncate","slds-grid","slds-grid--vertical-align-center"],["icon","add","size","x-small",1,"slds-p-right--x-small"],[3,"module","singular"]],template:function(e,t){1&e&&(y.TgZ(0,"div",0),y._UZ(1,"system-utility-icon",1)(2,"system-label-modulename",2),y.qZA()),2&e&&(y.xp6(2),y.Q6J("module",t.model.module)("singular",!0))},dependencies:[Ge.M,k.r],encapsulation:2})),GlobalNavigationMenuItemActionNew})(),ut=(()=>{var e;class GlobalNavigationMenuItemRoute{constructor(e,t,s,n){(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"model",void 0),(0,i.Z)(this,"router",void 0),(0,i.Z)(this,"clickListener",void 0),(0,i.Z)(this,"actionconfig",{}),this.metadata=e,this.language=t,this.model=s,this.router=n}get actionicon(){return this.actionconfig.icon?this.actionconfig.icon:"chevronright"}get actionlabel(){if(this.actionconfig.label&&this.actionconfig.label.indexOf(":")>-1){let e=this.actionconfig.label.split(":");return this.language.getLabel(e[0],e[1])}return this.language.getLabel(this.actionconfig.label)}exceuteItem(){this.router.navigate([this.actionconfig.route])}}return e=GlobalNavigationMenuItemRoute,(0,i.Z)(GlobalNavigationMenuItemRoute,"ɵfac",(function(t){return new(t||e)(y.Y36(w.Pu),y.Y36(T.d),y.Y36(S.o),y.Y36(E.F0))})),(0,i.Z)(GlobalNavigationMenuItemRoute,"ɵcmp",y.Xpm({type:e,selectors:[["global-navigation-menu-item-route"]],decls:5,vars:2,consts:[["role","presentation",1,"slds-dropdown__item",3,"click"],["href","javascript:void(0);","role","menuitem"],[1,"slds-truncate"],[3,"icon"]],template:function(e,t){1&e&&(y.TgZ(0,"li",0),y.NdJ("click",(function(){return t.exceuteItem()})),y.TgZ(1,"a",1)(2,"span",2),y._UZ(3,"global-nevigation-menu-item-icon",3),y._uU(4),y.qZA()()()),2&e&&(y.xp6(3),y.Q6J("icon",t.actionicon),y.xp6(1),y.hij(" ",t.actionlabel," "))},dependencies:[dt],encapsulation:2})),GlobalNavigationMenuItemRoute})(),ht=(()=>{var e;class GlobalNavigationMenuItemActionRoute{constructor(e,t,s,n){(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"model",void 0),(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"router",void 0),(0,i.Z)(this,"actionconfig",{}),this.language=e,this.model=t,this.metadata=s,this.router=n}get actionicon(){return this.actionconfig.icon?this.actionconfig.icon:"chevronright"}get disabled(){return this.actionconfig.acl&&!this.metadata.checkModuleAcl(this.model.module,this.actionconfig.acl)}get hidden(){return this.actionconfig.acl&&!this.metadata.checkModuleAcl(this.model.module,this.actionconfig.acl)}get actionlabel(){if(this.actionconfig.label&&this.actionconfig.label.indexOf(":")>-1){let e=this.actionconfig.label.split(":");return this.language.getLabel(e[0],e[1])}return this.language.getLabel(this.actionconfig.label)}execute(){this.disabled||this.router.navigate([this.actionconfig.route])}}return e=GlobalNavigationMenuItemActionRoute,(0,i.Z)(GlobalNavigationMenuItemActionRoute,"ɵfac",(function(t){return new(t||e)(y.Y36(T.d),y.Y36(S.o),y.Y36(w.Pu),y.Y36(E.F0))})),(0,i.Z)(GlobalNavigationMenuItemActionRoute,"ɵcmp",y.Xpm({type:e,selectors:[["ng-component"]],decls:3,vars:2,consts:[[1,"slds-truncate","slds-grid","slds-grid--vertical-align-center"],["size","x-small",1,"slds-p-right--x-small",3,"icon"]],template:function(e,t){1&e&&(y.TgZ(0,"div",0),y._UZ(1,"system-utility-icon",1),y._uU(2),y.qZA()),2&e&&(y.xp6(1),y.Q6J("icon",t.actionicon),y.xp6(1),y.hij(" ",t.actionlabel,"\n"))},dependencies:[k.r],encapsulation:2})),GlobalNavigationMenuItemActionRoute})();function mt(e,t){if(1&e){const e=y.EpF();y.TgZ(0,"li",10),y.NdJ("click",(function(){const t=y.CHM(e).$implicit,s=y.oxw();return y.KtG(s.navigateTo(t))})),y.TgZ(1,"a",11)(2,"span",2),y._UZ(3,"system-label-modulename",12),y.qZA()()()}if(2&e){const e=t.$implicit;y.xp6(3),y.Q6J("module",e)}}let gt=(()=>{var e;class GlobalNavigationMenuMore{constructor(e,t,s,n){(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"router",void 0),(0,i.Z)(this,"elementRef",void 0),(0,i.Z)(this,"broadcast",void 0),(0,i.Z)(this,"moreMenuItems",[]),this.language=e,this.router=t,this.elementRef=s,this.broadcast=n}navigateTo(e){this.router.navigate(["/module/"+e])}ngAfterViewInit(){this.broadcast.broadcastMessage("navigation.moreadded",{module:"more",width:this.elementRef.nativeElement.offsetWidth})}}return e=GlobalNavigationMenuMore,(0,i.Z)(GlobalNavigationMenuMore,"ɵfac",(function(t){return new(t||e)(y.Y36(T.d),y.Y36(E.F0),y.Y36(y.SBq),y.Y36(Re.f))})),(0,i.Z)(GlobalNavigationMenuMore,"ɵcmp",y.Xpm({type:e,selectors:[["global-navigation-menu-more"]],hostVars:2,hostBindings:function(e,t){2&e&&y.ekj("slds-context-bar__item",!0)},decls:10,vars:2,consts:[["aria-haspopup","true",1,"slds-context-bar__dropdown-trigger","slds-dropdown-trigger","slds-dropdown-trigger--hover"],["href","javascript:void(0);",1,"slds-context-bar__label-action"],[1,"slds-truncate"],["label","LBL_MORE"],[1,"slds-context-bar__icon-action","slds-p-left--none"],[1,"slds-button","slds-button--icon","slds-context-bar__button"],[3,"icon"],[1,"slds-dropdown","slds-dropdown--right"],["role","menu",1,"slds-dropdown__list"],["class","slds-dropdown__item","role","presentation",3,"click",4,"ngFor","ngForOf"],["role","presentation",1,"slds-dropdown__item",3,"click"],["href","javascript:void(0);","role","menuitem"],[3,"module"]],template:function(e,t){1&e&&(y.TgZ(0,"li",0)(1,"a",1)(2,"span",2),y._UZ(3,"system-label",3),y.qZA()(),y.TgZ(4,"div",4)(5,"button",5),y._UZ(6,"system-button-icon",6),y.qZA()(),y.TgZ(7,"div",7)(8,"ul",8),y.YNc(9,mt,4,1,"li",9),y.qZA()()()),2&e&&(y.xp6(6),y.Q6J("icon","down"),y.xp6(3),y.Q6J("ngForOf",t.moreMenuItems))},dependencies:[n.sg,D.J,A._,Ge.M],encapsulation:2})),GlobalNavigationMenuMore})();var pt=s(2954),ft=s(7877),bt=s(4553),vt=s(2251),Zt=s(2995);const _t=["containercontent"],yt=function(e,t){return{"slds-is-closed":e,"slds-is-open":t}},xt=function(e){return{calldata:e}};let wt=(()=>{var e;class GlobalDockedComposerCall{constructor(e,t,s,n,o){(0,i.Z)(this,"backend",void 0),(0,i.Z)(this,"dockedComposer",void 0),(0,i.Z)(this,"telephony",void 0),(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"ViewContainerRef",void 0),(0,i.Z)(this,"containercontent",void 0),(0,i.Z)(this,"calldata",void 0),(0,i.Z)(this,"isClosed",!1),this.backend=e,this.dockedComposer=t,this.telephony=s,this.language=n,this.ViewContainerRef=o}get callicon(){if("disconnected"==this.calldata.status)return"end_call";switch(this.calldata.direction){case"inbound":return"incoming_call";case"outbound":return"outbound_call"}return"call"}closeComposer(){this.telephony.removeCallById(this.calldata.id)}endCall(){this.telephony.terminateCall(this.calldata.id)}toggleClosed(){this.isClosed=!this.isClosed}get toggleIcon(){return this.isClosed?"erect_window":"minimize_window"}get canEndCall(){return this.calldata.callid&&"disconnected"!=this.calldata.status&&"error"!=this.calldata.status}}return e=GlobalDockedComposerCall,(0,i.Z)(GlobalDockedComposerCall,"ɵfac",(function(t){return new(t||e)(y.Y36(be.y),y.Y36(J.m),y.Y36(vt.n),y.Y36(T.d),y.Y36(y.s_b))})),(0,i.Z)(GlobalDockedComposerCall,"ɵcmp",y.Xpm({type:e,selectors:[["global-docked-composer-call"]],viewQuery:function(e,t){if(1&e&&y.Gf(_t,7,y.s_b),2&e){let e;y.iGM(e=y.CRH())&&(t.containercontent=e.first)}},inputs:{calldata:"calldata"},decls:22,vars:13,consts:[["role","dialog",1,"slds-docked-composer","slds-grid","slds-grid_vertical","slds-m-horizontal--x-small",3,"ngClass"],["aria-live","assertive",1,"slds-docked-composer__header","slds-grid","slds-shrink-none"],[1,"slds-media","slds-media_center","slds-no-space"],[1,"slds-media__figure","slds-m-right_x-small"],[1,"slds-icon_container"],["sprite","utility","size","x-small",3,"icon"],[1,"slds-media__body"],[1,"slds-truncate"],[1,"slds-col_bump-left","slds-shrink-none"],[1,"slds-button","slds-button_icon","slds-button_icon",3,"click"],[3,"icon"],[1,"slds-grow"],["component","TelephonyCallPanel",3,"componentattributes"],[1,"slds-docked-composer__footer","slds-shrink-none"],[1,"slds-button","slds-button--neutral","slds-col_bump-left",3,"disabled","click"],["icon","end_call"],["label","LBL_END"],[1,"slds-button","slds-button--brand","slds-col_bump-left",3,"click"],["label","LBL_CLOSE"]],template:function(e,t){1&e&&(y.TgZ(0,"section",0)(1,"header",1)(2,"div",2)(3,"div",3)(4,"span",4),y._UZ(5,"system-icon",5),y.qZA()(),y.TgZ(6,"div",6)(7,"h2",7),y._uU(8),y.qZA()()(),y.TgZ(9,"div",8)(10,"button",9),y.NdJ("click",(function(){return t.toggleClosed()})),y._UZ(11,"system-button-icon",10),y.qZA(),y.TgZ(12,"button",9),y.NdJ("click",(function(){return t.closeComposer()})),y._UZ(13,"system-button-icon",10),y.qZA()()(),y.TgZ(14,"div",11),y._UZ(15,"system-dynamic-component",12),y.qZA(),y.TgZ(16,"footer",13)(17,"button",14),y.NdJ("click",(function(){return t.endCall()})),y._UZ(18,"system-button-icon",15)(19,"system-label",16),y.qZA(),y.TgZ(20,"button",17),y.NdJ("click",(function(){return t.closeComposer()})),y._UZ(21,"system-label",18),y.qZA()()()),2&e&&(y.Q6J("ngClass",y.WLB(8,yt,t.isClosed,!t.isClosed)),y.xp6(5),y.Q6J("icon",t.callicon),y.xp6(3),y.AsE("",t.calldata.direction," Call ",t.calldata.status,""),y.xp6(3),y.Q6J("icon",t.toggleIcon),y.xp6(2),y.Q6J("icon","close"),y.xp6(2),y.Q6J("componentattributes",y.VKq(11,xt,t.calldata)),y.xp6(2),y.Q6J("disabled",!t.canEndCall))},dependencies:[n.mk,D.J,Zt.T,O.f,A._],encapsulation:2})),GlobalDockedComposerCall})();var Tt=s(6951),Ct=s(1604),At=s(8861),kt=s(3428);let Lt=(()=>{var e;class GlobalDockedComposerModal{constructor(e,t,s,n,o,l){(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"dockedComposer",void 0),(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"modal",void 0),(0,i.Z)(this,"model",void 0),(0,i.Z)(this,"view",void 0),(0,i.Z)(this,"self",{}),(0,i.Z)(this,"componentconfig",void 0),this.metadata=e,this.dockedComposer=t,this.language=s,this.modal=n,this.model=o,this.view=l,this.view.isEditable=!0,this.view.setEditMode()}ngOnInit(){this.loadConfig()}loadConfig(){this.componentconfig=this.metadata.getComponentConfig("GlobalDockedComposerModal",this.model.module)}get displayLabel(){return this.model.getField("name")?this.model.getField("name"):this.language.getModuleName(this.model.module,!0)}minimize(){this.dockedComposer.composers.find((e=>e.id==this.model.id))||this.dockedComposer.addComposer(this.model.module,this.model),this.self.destroy()}promptClose(){this.modal.prompt("confirm",this.language.getLabel("MSG_CANCEL","","long"),this.language.getLabel("MSG_CANCEL")).subscribe((e=>{e&&this.closeComposer()}))}closeComposer(){for(let e=0;e<this.dockedComposer.composers.length;e++)this.dockedComposer.composers[e].id===this.model.id&&this.dockedComposer.composers.splice(e,1);this.self.destroy()}handleaction(e){if("savegodetail"===e)this.model.goDetail(),this.closeComposer();else this.closeComposer()}}return e=GlobalDockedComposerModal,(0,i.Z)(GlobalDockedComposerModal,"ɵfac",(function(t){return new(t||e)(y.Y36(w.Pu),y.Y36(J.m),y.Y36(T.d),y.Y36(Y.o),y.Y36(S.o),y.Y36(Ue.e))})),(0,i.Z)(GlobalDockedComposerModal,"ɵcmp",y.Xpm({type:e,selectors:[["global-docked-composer-modal"]],decls:18,vars:5,consts:[["size","medium"],[3,"module","close"],[1,"slds-button","slds-button_icon",3,"title","click"],["icon","dock_panel"],[1,"slds-assistive-text"],["label","LBL_DOCK"],["margin","none"],["containercontent",""],[3,"componentset"],[1,"slds-grid","slds-grid--vertical-align-center","slds-grid--align-spread"],[1,"slds-text-align_right"],["containerclass","",3,"actionset","actionemitter"]],template:function(e,t){1&e&&(y.TgZ(0,"system-modal",0)(1,"system-modal-header",1),y.NdJ("close",(function(){return t.promptClose()})),y._uU(2),y.TgZ(3,"system-modal-header-right")(4,"button",2),y.NdJ("click",(function(){return t.minimize()})),y._UZ(5,"system-button-icon",3),y.TgZ(6,"span",4),y._UZ(7,"system-label",5),y.qZA()()()(),y.TgZ(8,"system-modal-content",6),y._UZ(9,"div",null,7)(11,"system-componentset",8),y.qZA(),y.TgZ(12,"system-modal-footer")(13,"div",9)(14,"div"),y._UZ(15,"global-docked-composer-messages-badge"),y.qZA(),y.TgZ(16,"div",10)(17,"object-action-container",11),y.NdJ("actionemitter",(function(e){return t.handleaction(e)})),y.qZA()()()()()),2&e&&(y.xp6(1),y.Q6J("module",t.model.module),y.xp6(1),y.hij(" ",t.displayLabel," "),y.xp6(2),y.Q6J("title",t.language.getLabel("LBL_DOCK")),y.xp6(7),y.Q6J("componentset",t.componentconfig.componentset),y.xp6(6),y.Q6J("actionset",t.componentconfig.actionset))},dependencies:[D.J,Tt.E,A._,we.j,Te.x,Oe.p,Ce.y,Ct.O,At.S,kt.U],encapsulation:2})),GlobalDockedComposerModal})();var It=s(4028);let Mt=(()=>{var e;class GlobalComposeButton{constructor(e){(0,i.Z)(this,"dockedComposer",void 0),(0,i.Z)(this,"module",""),this.dockedComposer=e}showComposer(){this.dockedComposer.addComposer(this.module)}}return e=GlobalComposeButton,(0,i.Z)(GlobalComposeButton,"ɵfac",(function(t){return new(t||e)(y.Y36(J.m))})),(0,i.Z)(GlobalComposeButton,"ɵcmp",y.Xpm({type:e,selectors:[["global-compose-button"]],inputs:{module:"module"},decls:3,vars:0,consts:[[1,"slds-no-flex"],[1,"slds-button","slds-button--neutral",3,"click"]],template:function(e,t){1&e&&(y.TgZ(0,"div",0)(1,"button",1),y.NdJ("click",(function(){return t.showComposer()})),y._uU(2,"New"),y.qZA()())},encapsulation:2})),GlobalComposeButton})();var St=s(909),Jt=s(2422),Ot=s(5982);function Nt(e,t){if(1&e&&(y.TgZ(0,"div",8)(1,"div",9),y._uU(2),y.qZA()()),2&e){const e=y.oxw();y.xp6(2),y.Oqu(e.descriptionfull)}}const Ft=function(e){return{"slds-hide":e}};let qt=(()=>{var e;class GlobalAppLauncherDialogRoleTile{constructor(e,t){(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"role",void 0),(0,i.Z)(this,"name",void 0),(0,i.Z)(this,"identifier",void 0),(0,i.Z)(this,"description",void 0),(0,i.Z)(this,"descriptionfull",void 0),this.language=e,this.metadata=t}ngOnInit(){this.buildRoleLabels()}buildRoleLabels(){this.metadata.getRoles().some((e=>{if(e.id==this.role.id)return this.identifier=this.language.getAppLanglabel(e.label,"short"),this.name=this.language.getAppLanglabel(e.label),this.description=this.language.getAppLanglabel(e.label,"long"),this.name===this.description&&(this.description=null),this.description&&this.description.length>75&&(this.descriptionfull=this.description,this.description=this.description.substring(0,75)+"..."),!0}))}}return e=GlobalAppLauncherDialogRoleTile,(0,i.Z)(GlobalAppLauncherDialogRoleTile,"ɵfac",(function(t){return new(t||e)(y.Y36(T.d),y.Y36(w.Pu))})),(0,i.Z)(GlobalAppLauncherDialogRoleTile,"ɵcmp",y.Xpm({type:e,selectors:[["global-app-launcher-dialog-role-tile"]],inputs:{role:"role"},decls:13,vars:13,consts:[[1,"slds-app-launcher__tile","slds-text-link_reset","slds-is-relative"],[1,"slds-app-launcher__tile-figure"],[1,"slds-app-launcher__tile-body"],["href","javascript:void(0);"],[1,"slds-button","slds-button_reset","slds-text-link",3,"ngClass","title"],["morebutton",""],["label","LBL_MORE"],["class","slds-popover slds-popover_tooltip slds-nubbin_top slds-hide","role","tooltip","style","position:absolute;top:100px;left:165px",4,"ngIf"],["role","tooltip",1,"slds-popover","slds-popover_tooltip","slds-nubbin_top","slds-hide",2,"position","absolute","top","100px","left","165px"],[1,"slds-popover__body"]],template:function(e,t){1&e&&(y.TgZ(0,"div",0)(1,"div",1)(2,"span"),y._uU(3),y.qZA()(),y.TgZ(4,"div",2)(5,"a",3),y._uU(6),y.qZA(),y.TgZ(7,"p"),y._uU(8),y.TgZ(9,"button",4,5),y._UZ(11,"system-label",6),y.qZA()(),y.YNc(12,Nt,3,1,"div",7),y.qZA()()),2&e&&(y.Udp("box-shadow",t.metadata.role!=t.role.id?null:"0 0 2px 2px var(--brand-primary-active)"),y.xp6(2),y.Gre("slds-avatar slds-avatar--large slds-align--absolute-center ",t.role.icon,""),y.xp6(1),y.Oqu(t.identifier),y.xp6(3),y.Oqu(t.name),y.xp6(2),y.hij(" ",t.description," "),y.xp6(1),y.Q6J("ngClass",y.VKq(11,Ft,!t.descriptionfull))("title",t.descriptionfull),y.xp6(3),y.Q6J("ngIf",t.descriptionfull))},dependencies:[n.mk,n.O5,A._],encapsulation:2})),GlobalAppLauncherDialogRoleTile})();function Et(e,t){if(1&e){const e=y.EpF();y.TgZ(0,"li",21),y.NdJ("click",(function(){const t=y.CHM(e).$implicit,s=y.oxw(2);return y.KtG(s.setRole(t.id))})),y._UZ(1,"global-app-launcher-dialog-role-tile",22),y.qZA()}if(2&e){const e=t.$implicit;y.xp6(1),y.Q6J("role",e)}}function Yt(e,t){if(1&e&&(y.TgZ(0,"div")(1,"ul",18),y.YNc(2,Et,2,1,"li",20),y.qZA()()),2&e){const e=y.oxw();y.xp6(2),y.Q6J("ngForOf",e.getRoles())}}function Dt(e,t){if(1&e){const e=y.EpF();y.TgZ(0,"li",23),y.NdJ("click",(function(){const t=y.CHM(e).$implicit,s=y.oxw();return y.KtG(s.gotoModule(t))})),y.TgZ(1,"div",24),y._UZ(2,"system-icon",25),y.qZA(),y.TgZ(3,"div",26)(4,"p",27),y._UZ(5,"system-label-modulename",28),y.qZA()()()}if(2&e){const e=t.$implicit,s=y.oxw();y.Q6J("title",s.language.getModuleName(e,!1,"long")),y.xp6(2),y.Q6J("module",e)("size","large"),y.xp6(3),y.Q6J("module",e)}}let Qt=(()=>{var e;class GlobalAppLauncherDialog{constructor(e,t,s,n,o){(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"router",void 0),(0,i.Z)(this,"broadcast",void 0),(0,i.Z)(this,"userpreferences",void 0),(0,i.Z)(this,"searchTerm",""),(0,i.Z)(this,"self",void 0),this.metadata=e,this.language=t,this.router=s,this.broadcast=n,this.userpreferences=o}get showRoles(){return this.metadata.getRoles().length>1}close(){this.self.destroy()}getRoles(){return this.metadata.getRoles()}setRole(e){this.metadata.setActiveRole(e),this.userpreferences.setPreference("userrole",e),this.broadcast.broadcastMessage("applauncher.setrole",e),this.close()}getModules(){let e=[];for(let t of this.metadata.getModules()){let s=this.metadata.getModuleDefs(t);s.visible&&(!s.visibleaclaction||s.visibleaclaction&&this.metadata.checkModuleAcl(t,s.visibleaclaction))&&this.metadata.checkModuleAcl(t,"list")&&(""===this.searchTerm||""!==this.searchTerm&&this.language.getModuleName(t)&&this.language.getModuleName(t).toLowerCase().indexOf(this.searchTerm.toLowerCase())>=0)&&e.push(t)}return e.sort(((e,t)=>this.language.getModuleName(e)>this.language.getModuleName(t)?1:-1)),e}gotoModule(e){this.router.navigate(["/module/"+e]),this.close()}}return e=GlobalAppLauncherDialog,(0,i.Z)(GlobalAppLauncherDialog,"ɵfac",(function(t){return new(t||e)(y.Y36(w.Pu),y.Y36(T.d),y.Y36(E.F0),y.Y36(Re.f),y.Y36(Jt.z))})),(0,i.Z)(GlobalAppLauncherDialog,"ɵcmp",y.Xpm({type:e,selectors:[["global-app-launcher-dialog"]],decls:22,vars:9,consts:[["role","dialog","tabindex","-1","aria-modal","true",1,"slds-modal","slds-fade-in-open","slds-modal_large","slds-app-launcher__content"],[1,"slds-modal__container"],[1,"slds-modal__header","slds-theme--shade"],[1,"slds-button","slds-button_icon","slds-modal__close","slds-button--icon-inverse",2,"color","#fff",3,"click"],[3,"icon","size"],[1,"slds-assistive-text"],["label","LBL_CLOSE"],[1,"slds-grid","slds-grid--align-spread","slds-grid--vertical-align-center"],[1,"slds-text-heading--medium","slds-show--medium"],["label","LBL_APP_LAUNCHER"],[1,"slds-app-launcher__header-search"],[1,"slds-form-element"],[1,"slds-form-element__control","slds-input-has-icon","slds-input-has-icon--left"],[3,"icon","addclasses"],["system-autofocus","","type","search",1,"slds-input",3,"ngModel","placeholder","ngModelChange"],["disabled","",1,"slds-button","slds-button--neutral","slds-show--medium"],["margin","small",3,"grow"],[4,"ngIf"],[1,"slds-grid","slds-grid--pull-padded","slds-wrap"],["class","slds-p-around--small slds-size--xx-small",3,"title","click",4,"ngFor","ngForOf"],["class","slds-p-horizontal--small slds-size--1-of-1 slds-medium-size--1-of-3",3,"click",4,"ngFor","ngForOf"],[1,"slds-p-horizontal--small","slds-size--1-of-1","slds-medium-size--1-of-3",3,"click"],[3,"role"],[1,"slds-p-around--small","slds-size--xx-small",3,"title","click"],[1,"slds-app-launcher__tile-figure","slds-app-launcher__tile-figure--small","slds-text-link_reset"],[3,"module","size"],[1,"slds-align_absolute-center","slds-p-top--xx-small"],[1,"slds-truncate","slds-text-link_reset"],[3,"module"]],template:function(e,t){1&e&&(y.TgZ(0,"section",0)(1,"div",1)(2,"header",2)(3,"button",3),y.NdJ("click",(function(){return t.close()})),y._UZ(4,"system-button-icon",4),y.TgZ(5,"span",5),y._UZ(6,"system-label",6),y.qZA()(),y.TgZ(7,"div",7)(8,"h2",8),y._UZ(9,"system-label",9),y.qZA(),y.TgZ(10,"div",10)(11,"div",11)(12,"div",12),y._UZ(13,"system-utility-icon",13),y.TgZ(14,"input",14),y.NdJ("ngModelChange",(function(e){return t.searchTerm=e})),y.qZA()()()(),y.TgZ(15,"button",15),y._uU(16,"App Store"),y.qZA()()(),y.TgZ(17,"system-modal-content",16),y.YNc(18,Yt,3,1,"div",17),y.TgZ(19,"div")(20,"ul",18),y.YNc(21,Dt,6,4,"li",19),y.qZA()()()()()),2&e&&(y.xp6(4),y.Q6J("icon","close")("size","large"),y.xp6(9),y.Q6J("icon","search")("addclasses","slds-input__icon slds-input__icon--left"),y.xp6(1),y.Q6J("ngModel",t.searchTerm)("placeholder",t.language.getLabel("LBL_FIND_CONFMODULE")),y.xp6(3),y.Q6J("grow",!0),y.xp6(1),y.Q6J("ngIf",t.showRoles),y.xp6(3),y.Q6J("ngForOf",t.getModules()))},dependencies:[n.sg,n.O5,o.Fj,o.JJ,o.On,Ot.m,D.J,O.f,A._,Ge.M,Te.x,k.r,qt],encapsulation:2})),GlobalAppLauncherDialog})();var Ut=s(6131),Rt=s(8313);function jt(e,t){if(1&e&&y._UZ(0,"system-utility-icon",7),2&e){const e=y.oxw();y.Q6J("icon",e.tab.displayicon)("title",e.modelCount()+" "+e.language.getLabel("LBL_MODELS"))}}function Bt(e,t){if(1&e&&y._UZ(0,"system-icon",8),2&e){const e=y.oxw();y.Q6J("module",e.tab.displaymodule)}}function Gt(e,t){1&e&&y._UZ(0,"system-utility-icon",9)}const Pt=function(e){return{"slds-p-left--medium":e}};let Ht=(()=>{var e;class GlobalNavigationTabbedBrowserModalTab{constructor(e,t){(0,i.Z)(this,"navigation",void 0),(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"tab",void 0),(0,i.Z)(this,"subtab",!1),(0,i.Z)(this,"activate",new y.vpe),this.navigation=e,this.language=t}modelCount(){return this.navigation.modelregister.filter((e=>e.tabid==this.tab.id)).length}activateTab(){this.activate.emit(this.tab.id)}}return e=GlobalNavigationTabbedBrowserModalTab,(0,i.Z)(GlobalNavigationTabbedBrowserModalTab,"ɵfac",(function(t){return new(t||e)(y.Y36(q.G),y.Y36(T.d))})),(0,i.Z)(GlobalNavigationTabbedBrowserModalTab,"ɵcmp",y.Xpm({type:e,selectors:[["global-navigation-tabbed-browser-modal-tab"]],inputs:{tab:"tab",subtab:"subtab"},outputs:{activate:"activate"},decls:7,vars:8,consts:[[1,"slds-grid","slds-grid--vertical-align-center",3,"ngClass"],[3,"title"],["size","x-small","class","slds-p-right--x-small",3,"icon","title",4,"ngIf"],["size","x-small","divClass","slds-p-right--x-small",3,"module",4,"ngIf"],[1,"slds-truncate","slds-text-link_faux",3,"click"],[3,"label"],["class","slds-p-left--x-small","size","x-small","icon","warning","addclasses","slds-icon-text-error",4,"ngIf"],["size","x-small",1,"slds-p-right--x-small",3,"icon","title"],["size","x-small","divClass","slds-p-right--x-small",3,"module"],["size","x-small","icon","warning","addclasses","slds-icon-text-error",1,"slds-p-left--x-small"]],template:function(e,t){1&e&&(y.TgZ(0,"div",0)(1,"div",1),y.YNc(2,jt,1,2,"system-utility-icon",2),y.YNc(3,Bt,1,1,"system-icon",3),y.qZA(),y.TgZ(4,"div",4),y.NdJ("click",(function(){return t.activateTab()})),y._UZ(5,"system-label",5),y.qZA(),y.YNc(6,Gt,1,0,"system-utility-icon",6),y.qZA()),2&e&&(y.Q6J("ngClass",y.VKq(6,Pt,t.subtab)),y.xp6(1),y.Q6J("title",t.modelCount()+" "+t.language.getLabel("LBL_MODELS")),y.xp6(1),y.Q6J("ngIf",t.tab.displayicon),y.xp6(1),y.Q6J("ngIf",t.tab.displaymodule),y.xp6(2),y.s9C("label",t.tab.displayname),y.xp6(1),y.Q6J("ngIf",t.navigation.anyDirtyModel(t.tab.id)))},dependencies:[n.mk,n.O5,O.f,A._,k.r],encapsulation:2})),GlobalNavigationTabbedBrowserModalTab})(),zt=(()=>{var e;class GlobalNavigationTabbedBrowserModalTabActions{constructor(e,t){(0,i.Z)(this,"navigation",void 0),(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"tab",void 0),this.navigation=e,this.language=t}closetab(e){this.navigation.closeObjectTab(e)}pintab(e){e.pinned=!e.pinned}clonetab(e){this.navigation.cloneTab(e.id)}}return e=GlobalNavigationTabbedBrowserModalTabActions,(0,i.Z)(GlobalNavigationTabbedBrowserModalTabActions,"ɵfac",(function(t){return new(t||e)(y.Y36(q.G),y.Y36(T.d))})),(0,i.Z)(GlobalNavigationTabbedBrowserModalTabActions,"ɵcmp",y.Xpm({type:e,selectors:[["global-navigation-tabbed-browser-modal-tab-actions"]],inputs:{tab:"tab"},decls:6,vars:1,consts:[["system-title","LBL_CLONE_TAB",1,"slds-button","slds-button_icon","slds-button_icon-container","slds-button_icon-x-small","slds-m-around--none",3,"click"],["icon","copy"],["system-title","LBL_PIN_TAB",1,"slds-button","slds-button_icon","slds-button_icon-container","slds-button_icon-x-small","slds-m-around--none",3,"click"],[3,"icon"],["system-title","LBL_CLOSE_TAB",1,"slds-button","slds-button--icon","slds-col--bump-left",3,"click"],["icon","close"]],template:function(e,t){1&e&&(y.TgZ(0,"button",0),y.NdJ("click",(function(){return t.clonetab(t.tab)})),y._UZ(1,"system-button-icon",1),y.qZA(),y.TgZ(2,"button",2),y.NdJ("click",(function(){return t.pintab(t.tab)})),y._UZ(3,"system-button-icon",3),y.qZA(),y.TgZ(4,"button",4),y.NdJ("click",(function(){return t.closetab(t.tab.id)})),y._UZ(5,"system-button-icon",5),y.qZA()),2&e&&(y.xp6(3),y.Q6J("icon",t.tab.pinned?"pinned":"pin"))},dependencies:[C.S,D.J],encapsulation:2})),GlobalNavigationTabbedBrowserModalTabActions})();function Vt(e,t){if(1&e){const e=y.EpF();y.ynx(0),y.TgZ(1,"tr",14)(2,"td")(3,"global-navigation-tabbed-browser-modal-tab",18),y.NdJ("activate",(function(t){y.CHM(e);const s=y.oxw(2);return y.KtG(s.activateTab(t))})),y.qZA()(),y.TgZ(4,"td",16),y._UZ(5,"global-navigation-tabbed-browser-modal-tab-actions",17),y.qZA()(),y.BQk()}if(2&e){const e=t.$implicit;y.xp6(3),y.Q6J("tab",e)("subtab",!0),y.xp6(2),y.Q6J("tab",e)}}function Kt(e,t){if(1&e){const e=y.EpF();y.ynx(0),y.TgZ(1,"tr",14)(2,"td")(3,"global-navigation-tabbed-browser-modal-tab",15),y.NdJ("activate",(function(t){y.CHM(e);const s=y.oxw();return y.KtG(s.activateTab(t))})),y.qZA()(),y.TgZ(4,"td",16),y._UZ(5,"global-navigation-tabbed-browser-modal-tab-actions",17),y.qZA()(),y.YNc(6,Vt,6,3,"ng-container",9),y.BQk()}if(2&e){const e=t.$implicit,s=y.oxw();y.xp6(3),y.Q6J("tab",e),y.xp6(2),y.Q6J("tab",e),y.xp6(1),y.Q6J("ngForOf",s.subtabs(e.id))}}let $t=(()=>{var e;class GlobalNavigationTabbedBrowserModal{constructor(e,t){(0,i.Z)(this,"navigation",void 0),(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"self",void 0),this.navigation=e,this.language=t}get tabs(){return this.navigation.objectTabs.length}get models(){return this.navigation.modelregister.length}get maintabs(){return this.navigation.objectTabs.filter((e=>!e.parentid))}subtabs(e){return this.navigation.objectTabs.filter((t=>t.parentid==e))}closetab(e){this.navigation.closeObjectTab(e)}activateTab(e){this.navigation.setActiveTab(e),this.close()}pintab(e){e.pinned=!e.pinned}clonetab(e){this.navigation.cloneTab(e.id)}close(){this.self.destroy()}}return e=GlobalNavigationTabbedBrowserModal,(0,i.Z)(GlobalNavigationTabbedBrowserModal,"ɵfac",(function(t){return new(t||e)(y.Y36(q.G),y.Y36(T.d))})),(0,i.Z)(GlobalNavigationTabbedBrowserModal,"ɵcmp",y.Xpm({type:e,selectors:[["ng-component"]],decls:22,vars:3,consts:[[3,"close"],["label","LBL_TABS"],["margin","none"],[1,"slds-table","slds-table--header-fixed","slds-table_cell-buffer"],[1,"slds-line-height_reset"],["scope","col"],[1,"slds-truncate","slds-p-vertical--xx-small"],["label","LBL_TAB"],["scope","col",2,"width","5.5rem"],[4,"ngFor","ngForOf"],[1,"slds-grid","slds-grid--vertical-align-center"],["label","LBL_MODELS"],[1,"slds-col--bump-left","slds-button","slds-button--neutral",3,"click"],["label","LBL_OK"],[1,"slds-hint-parent"],[3,"tab","activate"],[1,"slds-p-horizontal--none","slds-text-align--center"],[3,"tab"],[3,"tab","subtab","activate"]],template:function(e,t){1&e&&(y.TgZ(0,"system-modal")(1,"system-modal-header",0),y.NdJ("close",(function(){return t.close()})),y._UZ(2,"system-label",1),y.qZA(),y.TgZ(3,"system-modal-content",2)(4,"table",3)(5,"thead")(6,"tr",4)(7,"th",5)(8,"div",6),y._UZ(9,"system-label",7),y.qZA()(),y._UZ(10,"th",8),y.qZA()(),y.TgZ(11,"tbody"),y.YNc(12,Kt,7,3,"ng-container",9),y.qZA()()(),y.TgZ(13,"system-modal-footer")(14,"div",10)(15,"div"),y._uU(16),y._UZ(17,"system-label",1),y._uU(18),y._UZ(19,"system-label",11),y.qZA(),y.TgZ(20,"button",12),y.NdJ("click",(function(){return t.close()})),y._UZ(21,"system-label",13),y.qZA()()()()),2&e&&(y.xp6(12),y.Q6J("ngForOf",t.maintabs),y.xp6(4),y.hij("",t.tabs," "),y.xp6(2),y.hij(" / ",t.models," "))},dependencies:[n.sg,A._,we.j,Te.x,Oe.p,Ce.y,Ht,zt],encapsulation:2})),GlobalNavigationTabbedBrowserModal})();var Xt=s(6962),Wt=s(9570),es=s(2429),ts=s(26),ss=s(9183),is=s(8208),ns=s(3850),os=s(3861),ls=s(2401),as=s(5651),ds=s(7723),rs=s(7017),cs=s(1790),us=s(1058);const hs=function(e,t){return{module:e,data:t}};function ms(e,t){if(1&e){const e=y.EpF();y.TgZ(0,"tr",20)(1,"td",21),y._UZ(2,"system-icon",22),y.qZA(),y.TgZ(3,"td",23)(4,"a",24),y.NdJ("click",(function(){const t=y.CHM(e).$implicit,s=y.oxw();return y.KtG(s.goRecent(t.module_name,t.item_id))})),y.TgZ(5,"div",25),y._uU(6),y.qZA()()(),y.TgZ(7,"td",23)(8,"div",26),y._UZ(9,"system-label-modulename",27),y.qZA()()()}if(2&e){const e=t.$implicit;y.Q6J("system-model-provider",y.WLB(7,hs,e.module_name,e.data)),y.xp6(2),y.Q6J("module",e.module_name),y.xp6(3),y.Q6J("module",e.module_name)("id",e.item_id),y.xp6(1),y.Oqu(e.item_summary),y.xp6(3),y.Q6J("module",e.module_name)("singular",!0)}}let gs=(()=>{var e;class GlobalRecentItems{constructor(e,t,s,n){(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"router",void 0),(0,i.Z)(this,"recent",void 0),this.language=e,this.router=s,this.recent=n,t.setTabInfo({displayname:this.language.getLabel("LBL_RECENTLYVIEWED"),displayicon:"breadcrumbs"})}goRecent(e,t){this.router.navigate(["/module/"+e+"/"+t])}}return e=GlobalRecentItems,(0,i.Z)(GlobalRecentItems,"ɵfac",(function(t){return new(t||e)(y.Y36(T.d),y.Y36(rs.d),y.Y36(E.F0),y.Y36(je.h))})),(0,i.Z)(GlobalRecentItems,"ɵcmp",y.Xpm({type:e,selectors:[["global-recent-items"]],decls:26,vars:2,consts:[[1,"slds-page-header"],[1,"slds-page-header__row"],[1,"slds-page-header__col-title"],[1,"slds-media"],[1,"slds-media__body"],[1,"slds-page-header__name"],[1,"slds-page-header__name-title"],[1,"slds-page-header__title","slds-truncate"],["label","LBL_RECENT_ITEMS"],[1,"slds-page-header__name-meta"],["label","LBL_ITEMS"],["system-to-bottom",""],["role","grid",1,"slds-table","slds-table--bordered","slds-table--fixed-layout","slds-table--header-fixed"],[1,"slds-text-title--caps"],["scope","col",1,"slds-cell-shrink"],["scope","col",1,"slds-is-sortable","slds-is-resizable"],[1,"slds-truncate","slds-th__action"],["label","LBL_NAME"],["label","LBL_MODULE"],["class","slds-hint-parent",3,"system-model-provider",4,"ngFor","ngForOf"],[1,"slds-hint-parent",3,"system-model-provider"],["role","gridcell",1,"slds-cell-shrink"],["size","small","divClass","",3,"module"],["scope","row"],["href","javascript:void(0);",1,"slds-text-link--reset",3,"click"],["system-model-popover","",1,"slds-truncate",3,"module","id"],[1,"slds-truncate"],[3,"module","singular"]],template:function(e,t){1&e&&(y.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"h1")(8,"span",7),y._UZ(9,"system-label",8),y.qZA()()()(),y.TgZ(10,"p",9),y._uU(11),y._UZ(12,"system-label",10),y.qZA()()()()()(),y.TgZ(13,"div",11)(14,"table",12)(15,"thead")(16,"tr",13),y._UZ(17,"th",14),y.TgZ(18,"th",15)(19,"span",16),y._UZ(20,"system-label",17),y.qZA()(),y.TgZ(21,"th",15)(22,"span",16),y._UZ(23,"system-label",18),y.qZA()()()(),y.TgZ(24,"tbody"),y.YNc(25,ms,10,10,"tr",19),y.qZA()()()),2&e&&(y.xp6(11),y.hij("",t.recent.items.length," "),y.xp6(14),y.Q6J("ngForOf",t.recent.items))},dependencies:[n.sg,cs.g,Be.u,us.H,O.f,A._,Ge.M],encapsulation:2})),GlobalRecentItems})();var ps=s(2487),fs=s(4730),bs=s(2161),vs=s(6559),Zs=s(7674),_s=s(3634);const ys=["global-search-module-item",""];function xs(e,t){if(1&e){const e=y.EpF();y.TgZ(0,"td",7),y.NdJ("click",(function(t){y.CHM(e);const s=y.oxw(2);return y.KtG(s.navigateDetail(t))})),y._UZ(1,"field-container",8),y.qZA()}if(2&e){const e=t.$implicit,s=y.oxw(2);y.uIk("data-label",s.language.getFieldDisplayName(s.module,e.field)),y.xp6(1),y.Q6J("field",e.field)("fieldconfig",e.fieldconfig)("fielddisplayclass","slds-truncate")}}function ws(e,t){if(1&e&&(y.ynx(0),y.YNc(1,xs,2,4,"td",6),y.BQk()),2&e){const e=y.oxw();y.xp6(1),y.Q6J("ngForOf",e.listfields)}}let Ts=(()=>{var e;class GlobalSearchModuleItem{constructor(e,t,s,n,o,l){(0,i.Z)(this,"elementref",void 0),(0,i.Z)(this,"router",void 0),(0,i.Z)(this,"view",void 0),(0,i.Z)(this,"model",void 0),(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"layout",void 0),(0,i.Z)(this,"module",""),(0,i.Z)(this,"listfields",""),(0,i.Z)(this,"listitem",{}),(0,i.Z)(this,"expanded",!1),this.elementref=e,this.router=t,this.view=s,this.model=n,this.language=o,this.layout=l,this.view.isEditable=!1,this.view.displayLabels=!1}ngOnInit(){this.model.module=this.listitem._source._module,this.model.id=this.listitem._id,this.model.setData(this.listitem._source),this.model.acl=this.listitem.acl,this.model.acl_fieldcontrol=this.listitem.acl_fieldcontrol}navigateDetail(e){e.stopPropagation(),this.model.checkAccess("detail")&&this.model.goDetail()}toggleexpanded(){this.expanded=!this.expanded}get isexpanded(){return"small"!=this.layout.screenwidth||this.expanded}get expandicon(){return this.expanded?"chevronup":"chevrondown"}}return e=GlobalSearchModuleItem,(0,i.Z)(GlobalSearchModuleItem,"ɵfac",(function(t){return new(t||e)(y.Y36(y.SBq),y.Y36(E.F0),y.Y36(Ue.e),y.Y36(S.o),y.Y36(T.d),y.Y36(vs.b))})),(0,i.Z)(GlobalSearchModuleItem,"ɵcmp",y.Xpm({type:e,selectors:[["","global-search-module-item",""]],inputs:{module:"module",listfields:"listfields",listitem:"listitem"},features:[y._Bn([Ue.e,S.o])],attrs:ys,decls:7,vars:4,consts:[[1,"slds-hide--medium"],[1,"slds-grid","slds-grid--vertical-align-center","slds-p-around--xx-small"],["size","xx-small","divClass","slds-p-right--xx-small",3,"module"],[1,"slds-text-align--left","slds-truncate","slds-grow",3,"click"],["size","xx-small",3,"icon","click"],[4,"ngIf"],["scope","row",3,"click",4,"ngFor","ngForOf"],["scope","row",3,"click"],[3,"field","fieldconfig","fielddisplayclass"]],template:function(e,t){1&e&&(y.TgZ(0,"td",0)(1,"div",1),y._UZ(2,"system-icon",2),y.TgZ(3,"div",3),y.NdJ("click",(function(e){return t.navigateDetail(e)})),y._uU(4),y.qZA(),y.TgZ(5,"system-utility-icon",4),y.NdJ("click",(function(){return t.toggleexpanded()})),y.qZA()()(),y.YNc(6,ws,2,1,"ng-container",5)),2&e&&(y.xp6(2),y.Q6J("module",t.model.module),y.xp6(2),y.Oqu(t.model.data.summary_text),y.xp6(1),y.Q6J("icon",t.expandicon),y.xp6(1),y.Q6J("ngIf",t.isexpanded))},dependencies:[n.sg,n.O5,_s.j,O.f,k.r],encapsulation:2})),GlobalSearchModuleItem})();function Cs(e,t){if(1&e){const e=y.EpF();y.TgZ(0,"li",21),y.NdJ("click",(function(){y.CHM(e);const t=y.oxw();return y.KtG(t.setSearchScope())})),y._UZ(1,"system-label",22),y.qZA()}}function As(e,t){if(1&e&&(y.TgZ(0,"th",23)(1,"div",24),y._UZ(2,"system-label-fieldname",25),y.qZA()()),2&e){const e=t.$implicit,s=y.oxw();y.xp6(2),y.Q6J("module",s.module)("field",e.field)}}function ks(e,t){if(1&e&&y._UZ(0,"tr",26),2&e){const e=t.$implicit,s=y.oxw();y.Q6J("module",s.module)("listfields",s.listfields)("listitem",e)}}function Ls(e,t){1&e&&y._UZ(0,"system-spinner")}const Is=function(e){return{"slds-hide":e}},Ms=function(e){return{"slds-table--bordered":e}};let Ss=(()=>{var e;class GlobalSearchModule{constructor(e,t,s,n,o,l){(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"elementref",void 0),(0,i.Z)(this,"fts",void 0),(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"layout",void 0),(0,i.Z)(this,"module",""),(0,i.Z)(this,"scope",new y.vpe),(0,i.Z)(this,"listfields",[]),this.metadata=e,this.elementref=t,this.fts=n,this.language=o,this.layout=l}get issmall(){return"small"==this.layout.screenwidth}ngOnInit(){this.listfields=[];let e=this.metadata.getComponentConfig("GlobalSearchModule",this.module);_.isEmpty(e)&&(e=this.metadata.getModuleDefaultComponentConfigByUsage(this.module,"list"));for(let t of this.metadata.getFieldSetFields(e.fieldset))t.fieldconfig.hidden||this.listfields.push(t)}getCount(){let e={};return this.fts.moduleSearchresults.some((t=>{if(t.module===this.module)return e={total:_.isNumber(t.data.total)?t.data.total:t.data.total.value,hits:t.data.hits.length},!0})),e}get hidepanel(){return!(!this.fts.runningmodulesearch&&this.getCount().total>0)}canViewMore(){return this.getCount().total>5}getItems(){let e=[];return this.fts.moduleSearchresults.some((t=>{if(t.module===this.module)return e=t.data.hits,!0})),e}setSearchScope(){this.scope.emit(this.module)}}return e=GlobalSearchModule,(0,i.Z)(GlobalSearchModule,"ɵfac",(function(t){return new(t||e)(y.Y36(w.Pu),y.Y36(y.SBq),y.Y36(E.F0),y.Y36(ps.Q),y.Y36(T.d),y.Y36(vs.b))})),(0,i.Z)(GlobalSearchModule,"ɵcmp",y.Xpm({type:e,selectors:[["global-search-module"]],inputs:{module:"module"},outputs:{scope:"scope"},decls:27,vars:14,consts:[[3,"ngClass"],[1,"slds-grid","slds-grid--vertical-align-center","slds-theme--default"],[1,"slds-p-left--small","slds-show--medium"],["divClass","",3,"module"],[1,"slds-p-around--small","slds-theme--default","slds-grow"],[1,"slds-grid"],[1,"slds-col","slds-has-flexi-truncate"],[1,"slds-page-header__title","slds-truncate"],[3,"module"],[1,"slds-col","slds-align-bottom"],[1,"slds-list--horizontal","slds-has-dividers--left"],[1,"slds-item"],["label","LBL_OF"],["label","LBL_ITEMS"],["class","slds-item slds-text-link--reset",3,"click",4,"ngIf"],["role","grid",1,"slds-table","slds-table--fixed-layout","slds-max-medium-table--stacked-horizontal",3,"ngClass"],[1,"slds-show--medium"],[1,"slds-text-title--caps"],["scope","col",4,"ngFor","ngForOf"],["global-search-module-item","",3,"module","listfields","listitem",4,"ngFor","ngForOf"],[4,"ngIf"],[1,"slds-item","slds-text-link--reset",3,"click"],["label","LBL_VIEWALL"],["scope","col"],[1,"slds-truncate","slds-p-around--x-small"],[3,"module","field"],["global-search-module-item","",3,"module","listfields","listitem"]],template:function(e,t){1&e&&(y.TgZ(0,"div",0)(1,"div",1)(2,"div",2),y._UZ(3,"system-icon",3),y.qZA(),y.TgZ(4,"div",4)(5,"div",5)(6,"div",6)(7,"h1",7),y._UZ(8,"system-label-modulename",8),y.qZA()()(),y.TgZ(9,"div",5)(10,"div",9)(11,"ul",10)(12,"li",11)(13,"span"),y._uU(14),y._UZ(15,"system-label",12),y._uU(16),y._UZ(17,"system-label",13),y.qZA()(),y.YNc(18,Cs,2,0,"li",14),y.qZA()()()()(),y.TgZ(19,"div")(20,"table",15)(21,"thead",16)(22,"tr",17),y.YNc(23,As,3,2,"th",18),y.qZA()(),y.TgZ(24,"tbody"),y.YNc(25,ks,1,3,"tr",19),y.qZA()(),y.YNc(26,Ls,1,0,"system-spinner",20),y.qZA()()),2&e&&(y.Q6J("ngClass",y.VKq(10,Is,t.hidepanel)),y.xp6(3),y.Q6J("module",t.module),y.xp6(5),y.Q6J("module",t.module),y.xp6(6),y.hij("",t.getCount().hits," "),y.xp6(2),y.hij(" ",t.getCount().total," "),y.xp6(2),y.Q6J("ngIf",t.canViewMore()),y.xp6(2),y.Q6J("ngClass",y.VKq(12,Ms,!t.issmall)),y.xp6(3),y.Q6J("ngForOf",t.listfields),y.xp6(2),y.Q6J("ngForOf",t.getItems()),y.xp6(1),y.Q6J("ngIf",t.fts.runningmodulesearch))},dependencies:[n.mk,n.sg,n.O5,O.f,A._,Zs.h,Ge.M,X.W,Ts],encapsulation:2})),GlobalSearchModule})();const Js=["tablecontent"];function Os(e,t){if(1&e&&(y.TgZ(0,"th",22)(1,"div",23),y._UZ(2,"system-label-fieldname",24),y.qZA()()),2&e){const e=t.$implicit,s=y.oxw();y.xp6(2),y.Q6J("module",s.module)("field",e.field)}}function Ns(e,t){if(1&e&&y._UZ(0,"tr",25),2&e){const e=t.$implicit,s=y.oxw();y.Q6J("module",s.module)("listfields",s.listfields)("listitem",e)}}function Fs(e,t){if(1&e&&y._UZ(0,"tbody",26),2&e){const e=y.oxw();y.Q6J("columns",null==e.listfields?null:e.listfields.length)("select",!1)("tools",!1)("rows",5)}}function qs(e,t){1&e&&(y.TgZ(0,"div",27)(1,"system-illustration-no-records"),y._UZ(2,"system-label",28),y.qZA()())}const Es=function(e){return{"slds-table--bordered":e}};let Ys=(()=>{var e;class GlobalSearchModuleOnly{constructor(e,t,s,n,o,l,a){(0,i.Z)(this,"broadcast",void 0),(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"elementref",void 0),(0,i.Z)(this,"fts",void 0),(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"layout",void 0),(0,i.Z)(this,"tablecontent",void 0),(0,i.Z)(this,"module",""),(0,i.Z)(this,"listfields",[]),this.broadcast=e,this.metadata=t,this.elementref=s,this.fts=o,this.language=l,this.layout=a}get issmall(){return"small"==this.layout.screenwidth}ngOnChanges(){this.listfields=[];let e=this.metadata.getComponentConfig("GlobalSearchModule",this.module);_.isEmpty(e)&&(e=this.metadata.getModuleDefaultComponentConfigByUsage(this.module,"list"));for(let t of this.metadata.getFieldSetFields(e.fieldset))t.fieldconfig.hidden||this.listfields.push(t)}getCount(){let e={};return this.fts.moduleSearchresults.some((t=>{if(t.module===this.module)return e={total:t.data.total,hits:t.data.hits.length},!0})),e}getItems(){let e=[];return this.fts.moduleSearchresults.some((t=>{if(t.module===this.module)return e=t.data.hits,!0})),e}onScroll(e){let t=this.tablecontent.element.nativeElement;t.scrollTop+t.clientHeight+50>t.scrollHeight&&this.fts.loadMore()}}return e=GlobalSearchModuleOnly,(0,i.Z)(GlobalSearchModuleOnly,"ɵfac",(function(t){return new(t||e)(y.Y36(Re.f),y.Y36(w.Pu),y.Y36(y.SBq),y.Y36(E.F0),y.Y36(ps.Q),y.Y36(T.d),y.Y36(vs.b))})),(0,i.Z)(GlobalSearchModuleOnly,"ɵcmp",y.Xpm({type:e,selectors:[["global-search-module-only"]],viewQuery:function(e,t){if(1&e&&y.Gf(Js,7,y.s_b),2&e){let e;y.iGM(e=y.CRH())&&(t.tablecontent=e.first)}},inputs:{module:"module"},features:[y.TTD],decls:29,vars:11,consts:[[1,"slds-theme--default","slds-border--top","slds-grid","slds-grid--vertical-align-center"],[1,"slds-p-left--small","slds-show--medium"],["divClass","",3,"module"],[1,"slds-p-around--small"],[1,"slds-grid"],[1,"slds-col","slds-has-flexi-truncate"],[1,"slds-page-header__title","slds-truncate"],[3,"module"],[1,"slds-col","slds-align-bottom"],[1,"slds-list--horizontal","slds-has-dividers--left"],[1,"slds-item"],["label","LBL_OF"],["label","LBL_ITEMS"],["role","grid",1,"slds-show--medium","slds-table","slds-table--bordered","slds-table--fixed-layout"],[1,"slds-text-title--caps"],["scope","col",4,"ngFor","ngForOf"],["system-to-bottom","",3,"scroll"],["role","grid",1,"slds-table","slds-table--fixed-layout","slds-max-medium-table--stacked-horizontal",3,"ngClass"],["tablecontent",""],["global-search-module-item","",3,"module","listfields","listitem",4,"ngFor","ngForOf"],["system-table-stencils","",3,"columns","select","tools","rows",4,"ngIf"],["class","slds-align--absolute-center slds-height_full",4,"ngIf"],["scope","col"],[1,"slds-truncate","slds-p-around--x-small"],[3,"module","field"],["global-search-module-item","",3,"module","listfields","listitem"],["system-table-stencils","",3,"columns","select","tools","rows"],[1,"slds-align--absolute-center","slds-height_full"],["label","MSG_NO_RECORDS_FOUND"]],template:function(e,t){1&e&&(y.TgZ(0,"div",0)(1,"div",1),y._UZ(2,"system-icon",2),y.qZA(),y.TgZ(3,"div",3)(4,"div",4)(5,"div",5)(6,"h1",6),y._UZ(7,"system-label-modulename",7),y.qZA()()(),y.TgZ(8,"div",4)(9,"div",8)(10,"ul",9)(11,"li",10)(12,"span"),y._uU(13),y._UZ(14,"system-label",11),y._uU(15),y._UZ(16,"system-label",12),y.qZA()()()()()()(),y.TgZ(17,"div")(18,"table",13)(19,"thead")(20,"tr",14),y.YNc(21,Os,3,2,"th",15),y.qZA()()(),y.TgZ(22,"div",16),y.NdJ("scroll",(function(e){return t.onScroll(e)})),y.TgZ(23,"table",17,18)(25,"tbody"),y.YNc(26,Ns,1,3,"tr",19),y.qZA(),y.YNc(27,Fs,1,4,"tbody",20),y.qZA(),y.YNc(28,qs,3,0,"div",21),y.qZA()()),2&e&&(y.xp6(2),y.Q6J("module",t.module),y.xp6(5),y.Q6J("module",t.module),y.xp6(6),y.hij("",t.getCount().hits," "),y.xp6(2),y.hij(" ",null==t.getCount().total?null:t.getCount().total.value," "),y.xp6(6),y.Q6J("ngForOf",t.listfields),y.xp6(2),y.Q6J("ngClass",y.VKq(9,Es,!t.issmall)),y.xp6(3),y.Q6J("ngForOf",t.getItems()),y.xp6(1),y.Q6J("ngIf",t.fts.runningmodulesearch),y.xp6(1),y.Q6J("ngIf",!t.fts.runningmodulesearch&&0==t.getCount().total))},dependencies:[n.mk,n.sg,n.O5,us.H,O.f,fs.C,A._,Zs.h,Ge.M,bs.x,Ts],encapsulation:2})),GlobalSearchModuleOnly})();function Ds(e,t){if(1&e){const e=y.EpF();y.TgZ(0,"li",4)(1,"a",5),y.NdJ("click",(function(){const t=y.CHM(e).$implicit,s=y.oxw();return y.KtG(s.setSearchScope(t))})),y._UZ(2,"system-label-modulename",22),y.qZA()()}if(2&e){const e=t.$implicit,s=y.oxw();y.Q6J("ngClass",s.getScopeClass(e)),y.xp6(2),y.Q6J("module",e)}}function Qs(e,t){1&e&&(y.TgZ(0,"table",27),y._UZ(1,"tbody",28),y.qZA()),2&e&&(y.xp6(1),y.Q6J("columns",7)("select",!1)("tools",!1)("rows",15))}function Us(e,t){if(1&e){const e=y.EpF();y.TgZ(0,"global-search-module",29),y.NdJ("scope",(function(t){y.CHM(e);const s=y.oxw(2);return y.KtG(s.setSearchScope(t))})),y.qZA()}if(2&e){const e=t.$implicit;y.Q6J("module",e.module)}}function Rs(e,t){1&e&&(y.TgZ(0,"div",30)(1,"system-illustration-no-records"),y._UZ(2,"system-label",31),y.qZA()())}function js(e,t){if(1&e&&(y.TgZ(0,"div",23),y.YNc(1,Qs,2,4,"table",24),y.YNc(2,Us,1,1,"global-search-module",25),y.YNc(3,Rs,3,0,"div",26),y.qZA()),2&e){const e=y.oxw();y.xp6(1),y.Q6J("ngIf",e.fts.runningmodulesearch),y.xp6(1),y.Q6J("ngForOf",e.fts.moduleSearchresults),y.xp6(1),y.Q6J("ngIf",!e.fts.runningmodulesearch&&0==e.totalcount)}}function Bs(e,t){if(1&e&&(y.TgZ(0,"div"),y._UZ(1,"global-search-module-only",22),y.qZA()),2&e){const e=y.oxw();y.xp6(1),y.Q6J("module",e.searchScope)}}let Gs=(()=>{var e;class GlobalSearch{constructor(e,t,s,n,o,l,a){(0,i.Z)(this,"navigation",void 0),(0,i.Z)(this,"navigationtab",void 0),(0,i.Z)(this,"elementref",void 0),(0,i.Z)(this,"activatedRoute",void 0),(0,i.Z)(this,"fts",void 0),(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"searchScope","*"),(0,i.Z)(this,"searchTimeOut",void 0),(0,i.Z)(this,"searchTerm",""),(0,i.Z)(this,"routeSubscription",void 0),this.navigation=e,this.navigationtab=t,this.elementref=s,this.activatedRoute=o,this.fts=l,this.language=a}ngOnInit(){this.routeSubscription=this.navigationtab.activeRoute$.subscribe((e=>{const t=e.params;if(t.searchterm){try{this.searchTerm=atob(decodeURIComponent(t.searchterm))}catch(e){this.searchTerm=t.searchterm}this.doSearch()}else this.navigationtab.setTabInfo({displayname:"global search",displayicon:"search"})}))}ngOnDestroy(){this.routeSubscription.unsubscribe()}search(e){if("Enter"===e.key)this.searchTimeOut&&window.clearTimeout(this.searchTimeOut),this.fts.searchTerm=this.searchTerm,this.doSearch();else this.searchTimeOut&&window.clearTimeout(this.searchTimeOut),this.searchTimeOut=window.setTimeout((()=>this.doSearch()),1e3)}get totalcount(){let e=0;for(let t of this.fts.moduleSearchresults)e+=_.isNumber(t.data.total)?t.data.total:t.data.total.value;return e}get totalmodules(){let e=0;for(let t of this.fts.moduleSearchresults)(_.isNumber(t.data.total)?t.data.total:t.data.total.value)>0&&e++;return e}doSearch(){"*"===this.searchScope?this.fts.searchByModules({searchterm:this.searchTerm}).subscribe((e=>{let t=0;for(let e of this.fts.moduleSearchresults)t+=_.isNumber(e.data.total)?e.data.total:e.data.total.value;this.setTabName(t)})):this.fts.searchByModules({searchterm:this.searchTerm,modules:[this.searchScope],size:50}).subscribe((e=>{let t=0;for(let e of this.fts.moduleSearchresults)t+=_.isNumber(e.data.total)?e.data.total:e.data.total.value;this.setTabName(t)})),this.setTabName()}setTabName(e){this.navigationtab.setTabInfo({displayname:"search "+this.searchTerm+(e?" ("+e+")":""),displayicon:"search"})}getScopeClass(e){if(e===this.searchScope)return"slds-is-active"}setSearchScope(e){e!==this.searchScope&&(this.searchScope=e,this.doSearch())}infiniteScroll(){return"*"!==this.searchScope}}return e=GlobalSearch,(0,i.Z)(GlobalSearch,"ɵfac",(function(t){return new(t||e)(y.Y36(q.G),y.Y36(rs.d),y.Y36(y.SBq),y.Y36(E.F0),y.Y36(E.gz),y.Y36(ps.Q),y.Y36(T.d))})),(0,i.Z)(GlobalSearch,"ɵcmp",y.Xpm({type:e,selectors:[["global-search"]],features:[y._Bn([ps.Q])],decls:23,vars:5,consts:[[1,"slds-grid"],["system-to-bottom","",1,"slds-show--large","slds-size--1-of-5","slds-grid","slds-grid--vertical","slds-navigation-list--vertical","slds-navigation-list--vertical-inverse"],[1,"slds-text-title--caps","slds-p-around--medium"],["label","LBL_SEARCHRESULTS"],[3,"ngClass"],["href","javascript:void(0);",1,"slds-navigation-list--vertical__action","slds-text-link--reset",3,"click"],["label","LBL_TOPRESULTS"],[3,"ngClass",4,"ngFor","ngForOf"],[1,"slds-size--1-of-1","slds-large-size--4-of-5","slds-border--left"],[1,"slds-p-around--medium","slds-theme--shade","slds-border--bottom"],[1,"slds-page-header__row"],[1,"slds-page-header__col-title"],[1,"slds-media"],[1,"slds-media__figure"],["icon","search",3,"click"],[1,"slds-media__body"],[1,"slds-grid","slds-grid--vertical-align-center"],[1,"slds-form-element","slds-size--1-of-1"],[1,"slds-form-element__control"],["system-autofocus","","type","text","spellcheck","false",1,"slds-input",3,"ngModel","ngModelChange","keyup"],["system-to-bottom","",4,"ngIf"],[4,"ngIf"],[3,"module"],["system-to-bottom",""],["class","slds-table slds-table--bordered slds-table--fixed-layout","role","grid",4,"ngIf"],["class","slds-m-bottom--medium",3,"module","scope",4,"ngFor","ngForOf"],["class","slds-align--absolute-center slds-height_full",4,"ngIf"],["role","grid",1,"slds-table","slds-table--bordered","slds-table--fixed-layout"],["system-table-stencils","",3,"columns","select","tools","rows"],[1,"slds-m-bottom--medium",3,"module","scope"],[1,"slds-align--absolute-center","slds-height_full"],["label","MSG_NO_RECORDS_FOUND"]],template:function(e,t){1&e&&(y.TgZ(0,"div",0)(1,"div",1)(2,"h2",2),y._UZ(3,"system-label",3),y.qZA(),y.TgZ(4,"ul")(5,"li",4)(6,"a",5),y.NdJ("click",(function(){return t.setSearchScope("*")})),y._UZ(7,"system-label",6),y.qZA()(),y.YNc(8,Ds,3,2,"li",7),y.qZA()(),y.TgZ(9,"div",8)(10,"div",9)(11,"div",10)(12,"div",11)(13,"div",12)(14,"div",13)(15,"system-icon",14),y.NdJ("click",(function(){return t.setSearchScope("*")})),y.qZA()(),y.TgZ(16,"div",15)(17,"h1",16)(18,"div",17)(19,"div",18)(20,"input",19),y.NdJ("ngModelChange",(function(e){return t.searchTerm=e}))("keyup",(function(e){return t.search(e)})),y.qZA()()()()()()()()(),y.YNc(21,js,4,3,"div",20),y.YNc(22,Bs,2,1,"div",21),y.qZA()()),2&e&&(y.xp6(5),y.Q6J("ngClass",t.getScopeClass("*")),y.xp6(3),y.Q6J("ngForOf",t.fts.searchModules),y.xp6(12),y.Q6J("ngModel",t.searchTerm),y.xp6(1),y.Q6J("ngIf","*"==t.searchScope),y.xp6(1),y.Q6J("ngIf","*"!=t.searchScope))},dependencies:[n.mk,n.sg,n.O5,o.Fj,o.JJ,o.On,Ot.m,us.H,O.f,fs.C,A._,Ge.M,bs.x,Ss,Ys],encapsulation:2})),GlobalSearch})();var Ps=s(595),Hs=s(2790),zs=s(6449);function Vs(e,t){if(1&e){const e=y.EpF();y.TgZ(0,"div",12)(1,"label",13),y._uU(2),y.qZA(),y.TgZ(3,"system-input-timezone",14),y.NdJ("ngModelChange",(function(t){y.CHM(e);const s=y.oxw(2);return y.KtG(s.preferences.timezone=t)})),y.qZA()()}if(2&e){const e=y.oxw(2);y.xp6(1),y.MGl("for","",e.componentId,"-timezone"),y.xp6(1),y.Oqu(e.lang.getLabel("LBL_TIMEZONE")),y.xp6(1),y.Q6J("ngModel",e.preferences.timezone)}}function Ks(e,t){if(1&e&&(y.TgZ(0,"option",18),y._uU(1),y.qZA()),2&e){const e=t.$implicit;y.Q6J("value",e.value),y.xp6(1),y.Oqu(e.name)}}function $s(e,t){if(1&e){const e=y.EpF();y.TgZ(0,"div",12)(1,"label",13),y._uU(2),y.qZA(),y.TgZ(3,"div",15)(4,"select",16),y.NdJ("ngModelChange",(function(t){y.CHM(e);const s=y.oxw(2);return y.KtG(s.preferences.datef=t)})),y.YNc(5,Ks,2,2,"option",17),y.qZA()()()}if(2&e){const e=y.oxw(2);y.xp6(1),y.MGl("for","",e.componentId,"-datef"),y.xp6(1),y.Oqu(e.lang.getLabel("LBL_DATE_FORMAT")),y.xp6(2),y.MGl("id","",e.componentId,"-datef"),y.Q6J("ngModel",e.preferences.datef),y.xp6(1),y.Q6J("ngForOf",e.dateFormatList)}}function Xs(e,t){if(1&e&&(y.TgZ(0,"option",18),y._uU(1),y.qZA()),2&e){const e=t.$implicit;y.Q6J("value",e.value),y.xp6(1),y.Oqu(e.name)}}function Ws(e,t){if(1&e){const e=y.EpF();y.TgZ(0,"div",12)(1,"label",13),y._uU(2),y.qZA(),y.TgZ(3,"div",15)(4,"select",16),y.NdJ("ngModelChange",(function(t){y.CHM(e);const s=y.oxw(2);return y.KtG(s.preferences.timef=t)})),y.YNc(5,Xs,2,2,"option",17),y.qZA()()()}if(2&e){const e=y.oxw(2);y.xp6(1),y.MGl("for","",e.componentId,"-timef"),y.xp6(1),y.Oqu(e.lang.getLabel("LBL_TIME_FORMAT")),y.xp6(2),y.MGl("id","",e.componentId,"-timef"),y.Q6J("ngModel",e.preferences.timef),y.xp6(1),y.Q6J("ngForOf",e.timeFormatList)}}function ei(e,t){if(1&e&&(y.TgZ(0,"div",5)(1,"h3",6)(2,"span",7),y._uU(3),y.qZA()(),y.TgZ(4,"div",8)(5,"p",9),y._uU(6),y.qZA(),y.TgZ(7,"div",10),y.YNc(8,Vs,4,3,"div",11),y.YNc(9,$s,6,5,"div",11),y.YNc(10,Ws,6,5,"div",11),y.qZA()()()),2&e){const e=y.oxw();y.xp6(3),y.hij("",e.lang.getLabel("LBL_SOME_SETTINGS_ARE_MISSING")," …"),y.xp6(3),y.Oqu(e.lang.getLabel("MSG_NOT_CONFIGURED_USER_SETTINGS")),y.xp6(2),y.Q6J("ngIf",e.isPrefMissing("timezone")),y.xp6(1),y.Q6J("ngIf",e.isPrefMissing("datef")),y.xp6(1),y.Q6J("ngIf",e.isPrefMissing("timef"))}}function ti(e,t){if(1&e&&(y.TgZ(0,"option",18),y._uU(1),y.qZA()),2&e){const e=t.$implicit,s=y.oxw(2);y.s9C("value",e),y.xp6(1),y.Oqu(s.timezones[e])}}const si=function(e){return[e]};function ii(e,t){if(1&e){const e=y.EpF();y.TgZ(0,"div",5)(1,"h3",6)(2,"span",7),y._uU(3),y.qZA()(),y.TgZ(4,"div",8)(5,"p",19),y._uU(6),y.qZA(),y.TgZ(7,"div",20)(8,"span",21)(9,"input",22),y.NdJ("ngModelChange",(function(t){y.CHM(e);const s=y.oxw();return y.KtG(s.timeshiftAction=t)})),y.qZA(),y.TgZ(10,"label",23),y._UZ(11,"span",24),y.qZA()(),y.TgZ(12,"div",25)(13,"div",15)(14,"select",26),y.NdJ("ngModelChange",(function(t){y.CHM(e);const s=y.oxw();return y.KtG(s.selectedTimezone=t)}))("change",(function(){y.CHM(e);const t=y.oxw();return y.KtG(t.timeshiftAction="takeSelected")})),y.YNc(15,ti,2,2,"option",17),y.qZA()()(),y.TgZ(16,"span",27)(17,"input",28),y.NdJ("ngModelChange",(function(t){y.CHM(e);const s=y.oxw();return y.KtG(s.timeshiftAction=t)})),y.qZA(),y.TgZ(18,"label",23),y._UZ(19,"span",24),y.TgZ(20,"span",29),y._uU(21),y.qZA()()()()()()}if(2&e){const e=y.oxw();y.xp6(3),y.Oqu(e.lang.getLabel("LBL_TIME_SHIFT")),y.xp6(3),y.Oqu(e.lang.getLabelFormatted("MSG_TIME_SHIFT",y.VKq(12,si,e.timeshift))),y.xp6(3),y.MGl("id","",e.componentId,"-timeshift-radio-2"),y.Q6J("ngModel",e.timeshiftAction),y.xp6(1),y.MGl("for","",e.componentId,"-timeshift-radio-2"),y.xp6(4),y.Q6J("ngModel",e.selectedTimezone),y.xp6(1),y.Q6J("ngForOf",e.timezoneKeys),y.xp6(2),y.MGl("id","",e.componentId,"-timeshift-radio-1"),y.Q6J("ngModel",e.timeshiftAction),y.xp6(1),y.MGl("for","",e.componentId,"-timeshift-radio-1"),y.xp6(3),y.AsE("",e.guessedTimezone," (GMT",e.guessedTimezoneGmtDiff,")")}}function ni(e,t){if(1&e){const e=y.EpF();y.TgZ(0,"div",30)(1,"div",31)(2,"div",32)(3,"input",33),y.NdJ("ngModelChange",(function(t){y.CHM(e);const s=y.oxw();return y.KtG(s.navigateToUserPrefs=t)})),y.qZA(),y.TgZ(4,"label",34),y._UZ(5,"span",35),y.TgZ(6,"span",29),y._uU(7),y.qZA()()()()()}if(2&e){const e=y.oxw();y.xp6(3),y.Q6J("ngModel",e.navigateToUserPrefs),y.xp6(4),y.Oqu(e.lang.getLabel("MSG_AFTER_SAVING_NAVIGATE_USERPREFS"))}}let oi=(()=>{var e;class GlobalObtainImportantPreferences{constructor(e,t,s,n,o,l){(0,i.Z)(this,"backend",void 0),(0,i.Z)(this,"lang",void 0),(0,i.Z)(this,"prefservice",void 0),(0,i.Z)(this,"session",void 0),(0,i.Z)(this,"router",void 0),(0,i.Z)(this,"toastservice",void 0),(0,i.Z)(this,"self",void 0),(0,i.Z)(this,"componentId",_.uniqueId()),(0,i.Z)(this,"namesOfMissingPrefs",[]),(0,i.Z)(this,"timeshift",0),(0,i.Z)(this,"preferences",{}),(0,i.Z)(this,"timezones",void 0),(0,i.Z)(this,"timezoneKeys",void 0),(0,i.Z)(this,"navigateToUserPrefs",!1),(0,i.Z)(this,"guessedTimezone",moment.tz.guess()),(0,i.Z)(this,"guessedTimezoneGmtDiff",moment.tz(this.guessedTimezone).format("Z")),(0,i.Z)(this,"configuredTimezone",void 0),(0,i.Z)(this,"timeshiftAction","takeSelected"),(0,i.Z)(this,"selectedTimezone",void 0),(0,i.Z)(this,"dateFormatList",[{name:moment().format(this.prefservice.jsDateFormat2momentDateFormat("Y-m-d")),value:"Y-m-d"},{name:moment().format(this.prefservice.jsDateFormat2momentDateFormat("m-d-Y")),value:"m-d-Y"},{name:moment().format(this.prefservice.jsDateFormat2momentDateFormat("d-m-Y")),value:"d-m-Y"},{name:moment().format(this.prefservice.jsDateFormat2momentDateFormat("Y/m/d")),value:"Y/m/d"},{name:moment().format(this.prefservice.jsDateFormat2momentDateFormat("m/d/Y")),value:"m/d/Y"},{name:moment().format(this.prefservice.jsDateFormat2momentDateFormat("d/m/Y")),value:"d/m/Y"},{name:moment().format(this.prefservice.jsDateFormat2momentDateFormat("Y.m.d")),value:"Y.m.d"},{name:moment().format(this.prefservice.jsDateFormat2momentDateFormat("d.m.Y")),value:"d.m.Y"},{name:moment().format(this.prefservice.jsDateFormat2momentDateFormat("m.d.Y")),value:"m.d.Y"}]),(0,i.Z)(this,"timeFormatList",[{name:moment().format(this.prefservice.jsTimeFormat2momentTimeFormat("H:i")),value:"H:i"},{name:moment().format(this.prefservice.jsTimeFormat2momentTimeFormat("h:ia")),value:"h:ia"},{name:moment().format(this.prefservice.jsTimeFormat2momentTimeFormat("h:iA")),value:"h:iA"},{name:moment().format(this.prefservice.jsTimeFormat2momentTimeFormat("h:i a")),value:"h:i a"},{name:moment().format(this.prefservice.jsTimeFormat2momentTimeFormat("h:i A")),value:"h:i A"},{name:moment().format(this.prefservice.jsTimeFormat2momentTimeFormat("H.i")),value:"H.i"},{name:moment().format(this.prefservice.jsTimeFormat2momentTimeFormat("h.ia")),value:"h.ia"},{name:moment().format(this.prefservice.jsTimeFormat2momentTimeFormat("h.iA")),value:"h.iA"},{name:moment().format(this.prefservice.jsTimeFormat2momentTimeFormat("h.i a")),value:"h.i a"},{name:moment().format(this.prefservice.jsTimeFormat2momentTimeFormat("h.i A")),value:"h.i A"}]),this.backend=e,this.lang=t,this.prefservice=s,this.session=n,this.router=o,this.toastservice=l}ngOnInit(){this.timeshift&&(this.selectedTimezone=this.configuredTimezone=this.prefservice.unchangedPreferences.global.timezone);for(let e of this.namesOfMissingPrefs)this.preferences[e]=this.prefservice.defaults[e]}save(){this.timeshift&&("takeSelected"===this.timeshiftAction&&this.configuredTimezone!==this.selectedTimezone&&(this.preferences.timezone=this.selectedTimezone),"takeGuessed"===this.timeshiftAction&&(this.preferences.timezone=this.guessedTimezone)),_.isEmpty(this.preferences)||this.prefservice.setPreferences(this.preferences).subscribe((()=>{this.toastservice.sendToast(this.lang.getLabel("LBL_DATA_SAVED"),"success")})),this.navigateToUserPrefs&&this.router.navigate(["/module/Users/"+this.session.authData.userId]),this.self.destroy()}canSave(){if(this.namesOfMissingPrefs)for(let e of this.namesOfMissingPrefs)if(!this.preferences[e])return!1;return!0}isPrefMissing(e){return-1!==this.namesOfMissingPrefs.indexOf(e)}onModalEscX(){return!1}}return e=GlobalObtainImportantPreferences,(0,i.Z)(GlobalObtainImportantPreferences,"ɵfac",(function(t){return new(t||e)(y.Y36(be.y),y.Y36(T.d),y.Y36(Jt.z),y.Y36(x.n),y.Y36(E.F0),y.Y36($.A))})),(0,i.Z)(GlobalObtainImportantPreferences,"ɵcmp",y.Xpm({type:e,selectors:[["global-obtain-important-preferences"]],inputs:{namesOfMissingPrefs:"namesOfMissingPrefs",timeshift:"timeshift"},decls:11,vars:6,consts:[["hiddenCloseButton","true"],["class","slds-section slds-is-open",4,"ngIf"],[1,"slds-grid","slds-grid--align-spread","slds-grid--align-center","slds-grid--align-end"],["class","slds-form-element slds-p-horizontal--medium slds-p-vertical--x-small slds-col--bump-right",4,"ngIf"],[1,"slds-button","slds-button--brand",3,"disabled","click"],[1,"slds-section","slds-is-open"],[1,"slds-section__title","slds-theme_shade"],["title","Section Title",1,"slds-truncate","slds-p-horizontal_small"],[1,"slds-section__content"],[1,"slds-p-horizontal--medium","slds-p-vertical--x-small"],[1,"slds-grid","slds-p-horizontal--x-small"],["class","slds-form-element slds-p-horizontal--x-small slds-p-bottom--x-small slds-size--1-of-3",4,"ngIf"],[1,"slds-form-element","slds-p-horizontal--x-small","slds-p-bottom--x-small","slds-size--1-of-3"],[1,"slds-form-element__label",3,"for"],[3,"ngModel","ngModelChange"],[1,"slds-select_container"],[1,"slds-select",3,"id","ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[1,"slds-p-horizontal--medium","slds-p-vertical--x-small","slds-m-bottom--x-small"],[1,"slds-grid","slds-p-horizontal--medium","slds-grid--vertical-align-center"],[1,"slds-radio"],["type","radio","checked","true","name","timeshift","value","takeSelected",3,"id","ngModel","ngModelChange"],[1,"slds-radio__label",3,"for"],[1,"slds-radio_faux"],[1,"slds-form-element"],["name","timezone",1,"slds-select",3,"ngModel","ngModelChange","change"],[1,"slds-radio","slds-m-left--medium"],["type","radio","name","timeshift","value","takeGuessed",3,"id","ngModel","ngModelChange"],[1,"slds-form-element__label"],[1,"slds-form-element","slds-p-horizontal--medium","slds-p-vertical--x-small","slds-col--bump-right"],[1,"slds-form-element__control"],[1,"slds-checkbox"],["type","checkbox","id","ask-userprefs-navigate",3,"ngModel","ngModelChange"],["for","ask-userprefs-navigate",1,"slds-checkbox__label"],[1,"slds-checkbox_faux"]],template:function(e,t){1&e&&(y.TgZ(0,"system-modal")(1,"system-modal-header",0),y._uU(2),y.qZA(),y.TgZ(3,"system-modal-content"),y.YNc(4,ei,11,5,"div",1),y.YNc(5,ii,22,14,"div",1),y.qZA(),y.TgZ(6,"system-modal-footer")(7,"div",2),y.YNc(8,ni,8,2,"div",3),y.TgZ(9,"button",4),y.NdJ("click",(function(){return t.save()})),y._uU(10),y.qZA()()()()),2&e&&(y.xp6(2),y.hij(" ",t.lang.getLabel("LBL_IMPORTANT_USER_SETTINGS")," "),y.xp6(2),y.Q6J("ngIf",t.namesOfMissingPrefs.length),y.xp6(1),y.Q6J("ngIf",t.timeshift),y.xp6(3),y.Q6J("ngIf",t.namesOfMissingPrefs.length),y.xp6(1),y.Q6J("disabled",!t.canSave()),y.xp6(1),y.Oqu(t.lang.getLabel("LBL_OK")))},dependencies:[n.sg,n.O5,o.YN,o.Kr,o.Fj,o.Wl,o.EJ,o._,o.JJ,o.On,we.j,Te.x,Oe.p,Ce.y,zs.R],encapsulation:2})),GlobalObtainImportantPreferences})();var li=s(6550);function ai(e,t){if(1&e&&y._UZ(0,"div",2),2&e){const e=y.oxw();y.Q6J("innerHTML",e.sanitizer.bypassSecurityTrustHtml(e.consentText),y.oJD)}}let di=(()=>{var e;class GlobalObtainGDPRConsent{constructor(e,t,s,n,o,l,a,d,r){(0,i.Z)(this,"sanitizer",void 0),(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"backend",void 0),(0,i.Z)(this,"loginService",void 0),(0,i.Z)(this,"http",void 0),(0,i.Z)(this,"configuration",void 0),(0,i.Z)(this,"session",void 0),(0,i.Z)(this,"toast",void 0),(0,i.Z)(this,"consentText",void 0),(0,i.Z)(this,"isSaving",!1),this.sanitizer=e,this.metadata=t,this.language=s,this.backend=n,this.loginService=o,this.http=l,this.configuration=a,this.session=d,this.toast=r,this.retrieveConsentText()}retrieveConsentText(){let e=new de.WM;e=e.set("OAuth-Token",this.session.authData.sessionId),this.http.get(this.configuration.getBackendUrl()+"/common/gdpr/portalGDPRconsentText",{headers:e}).subscribe((e=>{this.consentText=e.portalGDPRconsentText}))}save(){this.isSaving||(this.isSaving=!0,this.backend.postRequest("common/gdpr/portalGDPRconsent",null,{consentText:this.consentText}).subscribe((e=>{this.loginService.session.authData.obtainGDPRconsent=!1}),(e=>{this.isSaving=!1,"wrongConsentText"===e.error.error.errorCode?this.consentText=e.error.error.details.properConsentText:this.toast.sendToast("Error saving the GDPR consent.","error","Try again or consult the administrator.")})))}canSave(){return this.consentText&&!this.isSaving}}return e=GlobalObtainGDPRConsent,(0,i.Z)(GlobalObtainGDPRConsent,"ɵfac",(function(t){return new(t||e)(y.Y36(li.H7),y.Y36(w.Pu),y.Y36(T.d),y.Y36(be.y),y.Y36(re.j),y.Y36(de.eN),y.Y36(K.C),y.Y36(x.n),y.Y36($.A))})),(0,i.Z)(GlobalObtainGDPRConsent,"ɵcmp",y.Xpm({type:e,selectors:[["global-obtain-gdpr-consent"]],decls:2,vars:2,consts:[[2,"min-height","80px",3,"system-overlay-loading-spinner"],[3,"innerHTML",4,"ngIf"],[3,"innerHTML"]],template:function(e,t){1&e&&(y.TgZ(0,"div",0),y.YNc(1,ai,1,1,"div",1),y.qZA()),2&e&&(y.Q6J("system-overlay-loading-spinner",!t.consentText),y.xp6(1),y.Q6J("ngIf",t.consentText))},dependencies:[n.O5,xe._],encapsulation:2})),GlobalObtainGDPRConsent})();var ri=s(6933);const ci=["container"];function ui(e,t){1&e&&y._UZ(0,"global-obtain-gdpr-consent")}let hi=(()=>{var e;class GlobalObtainGDPRConsentContainer{constructor(e,t,s){(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"login",void 0),(0,i.Z)(this,"componentConfig",void 0),(0,i.Z)(this,"nameOfCustomComponent",void 0),(0,i.Z)(this,"container",void 0),(0,i.Z)(this,"childComponent",void 0),(0,i.Z)(this,"showDefault",!1),(0,i.Z)(this,"headerLabel","LBL_GDPR_DATA_AGREEMENT"),(0,i.Z)(this,"taglineLabel","MSG_TO_CONTINUE_AGREE_TO_GDPR_CONSENT"),(0,i.Z)(this,"saveButtonLabel","LBL_I_AGREE"),(0,i.Z)(this,"canSave",(()=>!!this.childComponent&&this.childComponent.canSave())),(0,i.Z)(this,"isSaving",(()=>!!this.childComponent&&this.childComponent.isSaving)),(0,i.Z)(this,"self",void 0),this.metadata=e,this.language=t,this.login=s}ngAfterViewInit(){this.displayComponent()}displayComponent(){this.componentConfig=this.metadata.getComponentConfig("GlobalObtainGDPRConsentContainer"),this.componentConfig&&this.componentConfig.customComponent?(this.nameOfCustomComponent=this.componentConfig.customComponent,this.metadata.addComponent(this.nameOfCustomComponent,this.container).subscribe((e=>{e.instance.headerLabel&&(this.headerLabel=e.instance.headerLabel),e.instance.taglineLabel&&(this.taglineLabel=e.instance.taglineLabel),e.instance.saveButtonLabel&&(this.saveButtonLabel=e.instance.saveButtonLabel),e.instance.finished.subscribe((e=>this.finished(e))),this.childComponent=e.instance}))):this.showDefault=!0}save(){this.childComponent.save()}finished(e){e||this.login.logout(),this.self.destroy()}}return e=GlobalObtainGDPRConsentContainer,(0,i.Z)(GlobalObtainGDPRConsentContainer,"ɵfac",(function(t){return new(t||e)(y.Y36(w.Pu),y.Y36(T.d),y.Y36(re.j))})),(0,i.Z)(GlobalObtainGDPRConsentContainer,"ɵcmp",y.Xpm({type:e,selectors:[["global-obtain-gdpr-consent-container"]],viewQuery:function(e,t){if(1&e&&(y.Gf(ci,5,y.s_b),y.Gf(di,5)),2&e){let e;y.iGM(e=y.CRH())&&(t.container=e.first),y.iGM(e=y.CRH())&&(t.childComponent=e.first)}},decls:14,vars:7,consts:[["size","small"],["hiddenCloseButton","true"],[3,"system-overlay-loading-spinner"],["container",""],[4,"ngIf"],[1,"slds-button","slds-button--neutral",3,"click"],[1,"slds-button","slds-button--brand",3,"disabled","click"]],template:function(e,t){1&e&&(y.TgZ(0,"system-modal",0)(1,"system-modal-header",1),y._uU(2),y.TgZ(3,"system-modal-header-tagline"),y._uU(4),y.qZA()(),y.TgZ(5,"system-modal-content",2),y._UZ(6,"div",null,3),y.YNc(8,ui,1,0,"global-obtain-gdpr-consent",4),y.qZA(),y.TgZ(9,"system-modal-footer")(10,"button",5),y.NdJ("click",(function(){return t.finished(!1)})),y._uU(11),y.qZA(),y.TgZ(12,"button",6),y.NdJ("click",(function(){return t.save()})),y._uU(13),y.qZA()()()),2&e&&(y.xp6(2),y.hij(" ",t.language.getLabel(t.headerLabel)," "),y.xp6(2),y.Oqu(t.language.getLabel(t.taglineLabel)),y.xp6(1),y.Q6J("system-overlay-loading-spinner",t.isSaving()),y.xp6(3),y.Q6J("ngIf",t.showDefault),y.xp6(3),y.Oqu(t.language.getLabel("LBL_CANCEL")),y.xp6(1),y.Q6J("disabled",!t.canSave()),y.xp6(1),y.Oqu(t.language.getLabel(t.saveButtonLabel)))},dependencies:[n.O5,xe._,we.j,Te.x,Oe.p,Ce.y,ri.J,di],encapsulation:2})),GlobalObtainGDPRConsentContainer})();var mi=s(3131),gi=s(3298);function pi(e,t){1&e&&(y.TgZ(0,"span",15),y._UZ(1,"system-icon",16),y.qZA())}function fi(e,t){1&e&&(y.TgZ(0,"abbr",17),y._uU(1,"●"),y.qZA())}function bi(e,t){if(1&e&&(y.TgZ(0,"div",2)(1,"div",3),y.YNc(2,pi,2,0,"span",4),y.qZA(),y.TgZ(3,"div",5)(4,"div",6)(5,"a",7)(6,"h3",8)(7,"span",9),y._uU(8),y.qZA(),y.TgZ(9,"span",10),y._UZ(10,"system-label",11),y.qZA(),y.TgZ(11,"span",12),y._uU(12),y.qZA()(),y.TgZ(13,"p",13),y._uU(14),y.YNc(15,fi,2,0,"abbr",14),y.qZA()()()()()),2&e){const e=y.oxw();y.xp6(2),y.Q6J("ngIf",e.notification.bean_module),y.xp6(2),y.ekj("slds-text-title_bold",1!=e.notification.notification_read),y.xp6(3),y.Q6J("id",e.notification.bean_id)("module",e.notification.bean_module)("system-title",e.notification.bean_name),y.xp6(1),y.hij(" ",e.notification.bean_name," "),y.xp6(3),y.Q6J("id",e.notification.created_by)("system-title",e.notification.created_by_name),y.xp6(1),y.hij(" ",e.notification.created_by_name," "),y.xp6(2),y.hij(" ",e.notification.notification_date," "),y.xp6(1),y.Q6J("ngIf",1!=e.notification.notification_read)}}function vi(e,t){if(1&e){const e=y.EpF();y.TgZ(0,"section",18)(1,"div",19)(2,"a",20),y._UZ(3,"system-icon",16),y.TgZ(4,"div",5)(5,"h2",21)(6,"span",22),y._uU(7),y.qZA(),y.TgZ(8,"span",10),y._UZ(9,"system-label",11),y.qZA(),y.TgZ(10,"span",23),y._uU(11),y.qZA()(),y.TgZ(12,"p"),y._uU(13),y.qZA()()(),y.TgZ(14,"button",24),y.NdJ("click",(function(){y.CHM(e);const t=y.oxw();return y.KtG(t.notificationService.clearTempNotification(t.notification))})),y._UZ(15,"system-button-icon",25),y.qZA()()()}if(2&e){const e=y.oxw();y.xp6(6),y.Q6J("id",e.notification.bean_id)("module",e.notification.bean_module)("system-title",e.notification.bean_name),y.xp6(1),y.hij(" ",e.notification.bean_name," "),y.xp6(3),y.Q6J("id",e.notification.created_by)("system-title",e.notification.created_by_name),y.xp6(1),y.hij(" ",e.notification.created_by_name," "),y.xp6(2),y.hij(" ",e.notification.notification_date," ")}}let Zi=(()=>{var e;class GlobalHeaderNotificationsItemGeneric{constructor(e){(0,i.Z)(this,"notificationService",void 0),(0,i.Z)(this,"notification",void 0),(0,i.Z)(this,"asBox",!1),this.notificationService=e}}return e=GlobalHeaderNotificationsItemGeneric,(0,i.Z)(GlobalHeaderNotificationsItemGeneric,"ɵfac",(function(t){return new(t||e)(y.Y36(gi.t))})),(0,i.Z)(GlobalHeaderNotificationsItemGeneric,"ɵcmp",y.Xpm({type:e,selectors:[["global-header-notifications-item-generic"]],inputs:{notification:"notification",asBox:"asBox"},decls:3,vars:2,consts:[["class","slds-media slds-has-flexi-truncate slds-p-around_x-small",4,"ngIf","ngIfElse"],["boxContainer",""],[1,"slds-media","slds-has-flexi-truncate","slds-p-around_x-small"],[1,"slds-media__figure"],["class","slds-icon_container","style","width:40px;height:40px;",4,"ngIf"],[1,"slds-media__body"],[1,"slds-grid","slds-grid_align-spread"],["href","javascript:void(0);",1,"slds-text-link_reset","slds-has-flexi-truncate"],[1,"slds-truncate"],["system-model-popover","",1,"slds-m-right--xxx-small",3,"id","module","system-title"],["system-title","MSG_NOTIFICATION_GENERIC"],["label","MSG_NOTIFICATION_GENERIC"],["system-model-popover","","module","Users",1,"slds-m-right--xxx-small",3,"id","system-title"],[1,"slds-text-color_weak"],["system-title","LBL_UNREAD","class","slds-text-link slds-m-horizontal_xxx-small slds-text-color_success",4,"ngIf"],[1,"slds-icon_container",2,"width","40px","height","40px"],["icon","all"],["system-title","LBL_UNREAD",1,"slds-text-link","slds-m-horizontal_xxx-small","slds-text-color_success"],["role","dialog",1,"slds-notification","slds-m-vertical--xxx-small"],[1,"slds-notification__body"],[1,"slds-notification__target","slds-media"],[1,"slds-text-heading_small","slds-m-bottom_xx-small"],["system-model-popover","",1,"slds-m-right--xxx-small",2,"text-decoration","underline",3,"id","module","system-title"],["system-model-popover","","module","Users",1,"slds-m-right--xxx-small",2,"text-decoration","underline",3,"id","system-title"],["system-title","LBL_CLOSE",1,"slds-button","slds-button_icon","slds-button_icon-container","slds-notification__close",3,"click"],["icon","close"]],template:function(e,t){if(1&e&&(y.YNc(0,bi,16,12,"div",0),y.YNc(1,vi,16,8,"ng-template",null,1,y.W1O)),2&e){const e=y.MAs(2);y.Q6J("ngIf",!t.asBox)("ngIfElse",e)}},dependencies:[n.O5,cs.g,C.S,D.J,O.f,A._],encapsulation:2})),GlobalHeaderNotificationsItemGeneric})();function _i(e,t){1&e&&(y.TgZ(0,"div",15),y._UZ(1,"system-icon",16),y.qZA())}function yi(e,t){1&e&&(y.TgZ(0,"abbr",17),y._uU(1,"●"),y.qZA())}function xi(e,t){if(1&e&&(y.TgZ(0,"div",2)(1,"div",3),y.YNc(2,_i,2,0,"div",4),y.qZA(),y.TgZ(3,"div",5)(4,"div",6)(5,"h3",7)(6,"span",8),y._UZ(7,"system-label",9),y.qZA(),y.TgZ(8,"span",10),y._uU(9),y.qZA(),y._UZ(10,"system-label",11),y.TgZ(11,"span",12),y._uU(12),y.qZA()(),y.TgZ(13,"p",13),y._uU(14),y.YNc(15,yi,2,0,"abbr",14),y.qZA()()()()),2&e){const e=y.oxw();y.xp6(2),y.Q6J("ngIf",e.notification.bean_module),y.xp6(2),y.ekj("slds-text-title_bold",1!=e.notification.notification_read),y.xp6(4),y.Q6J("id",e.notification.bean_id)("module",e.notification.bean_module)("system-title",e.notification.bean_name),y.xp6(1),y.hij(" ",e.notification.bean_name," "),y.xp6(2),y.Q6J("id",e.notification.created_by)("system-title",e.notification.created_by_name),y.xp6(1),y.hij(" ",e.notification.created_by_name," "),y.xp6(2),y.hij(" ",e.notification.notification_date," "),y.xp6(1),y.Q6J("ngIf",1!=e.notification.notification_read)}}function wi(e,t){if(1&e){const e=y.EpF();y.TgZ(0,"section",18)(1,"div",19)(2,"a",20),y._UZ(3,"system-icon",16),y.TgZ(4,"div",5)(5,"h2",21)(6,"span",22),y._UZ(7,"system-label",23),y.qZA(),y.TgZ(8,"span",24),y._uU(9),y.qZA(),y._UZ(10,"system-label",25),y.TgZ(11,"span",26),y._uU(12),y.qZA()(),y.TgZ(13,"p"),y._uU(14),y.qZA()()(),y.TgZ(15,"button",27),y.NdJ("click",(function(){y.CHM(e);const t=y.oxw();return y.KtG(t.notificationService.clearTempNotification(t.notification))})),y._UZ(16,"system-button-icon",28),y.qZA()()()}if(2&e){const e=y.oxw();y.xp6(8),y.Q6J("id",e.notification.bean_id)("module",e.notification.bean_module)("system-title",e.notification.bean_name),y.xp6(1),y.hij(" ",e.notification.bean_name," "),y.xp6(2),y.Q6J("id",e.notification.created_by)("system-title",e.notification.created_by_name),y.xp6(1),y.hij(" ",e.notification.created_by_name," "),y.xp6(2),y.hij(" ",e.notification.notification_date," ")}}let Ti=(()=>{var e;class GlobalHeaderNotificationsItemChange{constructor(e){(0,i.Z)(this,"notificationService",void 0),(0,i.Z)(this,"notification",void 0),(0,i.Z)(this,"asBox",!1),this.notificationService=e}}return e=GlobalHeaderNotificationsItemChange,(0,i.Z)(GlobalHeaderNotificationsItemChange,"ɵfac",(function(t){return new(t||e)(y.Y36(gi.t))})),(0,i.Z)(GlobalHeaderNotificationsItemChange,"ɵcmp",y.Xpm({type:e,selectors:[["global-header-notifications-item-change"]],inputs:{notification:"notification",asBox:"asBox"},decls:3,vars:2,consts:[["class","slds-media slds-has-flexi-truncate slds-p-around_x-small",4,"ngIf","ngIfElse"],["boxContainer",""],[1,"slds-media","slds-has-flexi-truncate","slds-p-around_x-small"],[1,"slds-media__figure"],["class","slds-icon_container","style","width:40px;height:40px;",4,"ngIf"],[1,"slds-media__body"],[1,"slds-grid","slds-grid_align-spread"],[1,"slds-truncate"],["system-title","LBL_CHANGED",1,"slds-m-right--xx-small"],["label","LBL_CHANGED"],["system-model-popover","",1,"slds-m-right--xxx-small",3,"id","module","system-title"],["label","LBL_BY",1,"slds-m-right--xxx-small","slds-m-left--xxx-small"],["system-model-popover","","module","Users",1,"slds-m-right--xxx-small",3,"id","system-title"],[1,"slds-text-color_weak"],["system-title","LBL_UNREAD","class","slds-text-link slds-m-horizontal_xxx-small slds-text-color_success",4,"ngIf"],[1,"slds-icon_container",2,"width","40px","height","40px"],["icon","custom18","sprite","custom"],["system-title","LBL_UNREAD",1,"slds-text-link","slds-m-horizontal_xxx-small","slds-text-color_success"],["role","dialog",1,"slds-notification","slds-m-vertical--xxx-small"],[1,"slds-notification__body"],[1,"slds-notification__target","slds-media"],[1,"slds-text-heading_small","slds-m-bottom_xx-small"],["system-title","LBL_CHANGED"],["label","LBL_ASSIGNED"],["system-model-popover","",1,"slds-m-right--xxx-small",2,"text-decoration","underline",3,"id","module","system-title"],["label","LBL_BY"],["system-model-popover","","module","Users",1,"slds-m-right--xxx-small",2,"text-decoration","underline",3,"id","system-title"],["system-title","LBL_CLOSE",1,"slds-button","slds-button_icon","slds-button_icon-container","slds-notification__close",3,"click"],["icon","close"]],template:function(e,t){if(1&e&&(y.YNc(0,xi,16,12,"div",0),y.YNc(1,wi,17,8,"ng-template",null,1,y.W1O)),2&e){const e=y.MAs(2);y.Q6J("ngIf",!t.asBox)("ngIfElse",e)}},dependencies:[n.O5,cs.g,C.S,D.J,O.f,A._],encapsulation:2})),GlobalHeaderNotificationsItemChange})();function Ci(e,t){1&e&&(y.TgZ(0,"span",16),y._UZ(1,"system-icon",17),y.qZA())}function Ai(e,t){1&e&&(y.TgZ(0,"abbr",18),y._uU(1,"●"),y.qZA())}function ki(e,t){if(1&e&&(y.TgZ(0,"div",2)(1,"div",3),y.YNc(2,Ci,2,0,"span",4),y.qZA(),y.TgZ(3,"div",5)(4,"div",6)(5,"a",7)(6,"h3",8)(7,"span",9),y._UZ(8,"system-label",10),y.qZA(),y.TgZ(9,"span",11),y._uU(10),y.qZA(),y._UZ(11,"system-label",12),y.TgZ(12,"span",13),y._uU(13),y.qZA()(),y.TgZ(14,"p",14),y._uU(15),y.YNc(16,Ai,2,0,"abbr",15),y.qZA()()()()()),2&e){const e=y.oxw();y.xp6(2),y.Q6J("ngIf",e.notification.bean_module),y.xp6(2),y.ekj("slds-text-title_bold",1!=e.notification.notification_read),y.xp6(5),y.Q6J("id",e.notification.bean_id)("module",e.notification.bean_module)("system-title",e.notification.bean_name),y.xp6(1),y.hij(" ",e.notification.bean_name," "),y.xp6(2),y.Q6J("id",e.notification.created_by)("system-title",e.notification.created_by_name),y.xp6(1),y.hij(" ",e.notification.created_by_name," "),y.xp6(2),y.hij(" ",e.notification.notification_date," "),y.xp6(1),y.Q6J("ngIf",1!=e.notification.notification_read)}}function Li(e,t){if(1&e){const e=y.EpF();y.TgZ(0,"section",19)(1,"div",20)(2,"a",21),y._UZ(3,"system-icon",17),y.TgZ(4,"div",5)(5,"h2",22)(6,"span",23),y._UZ(7,"system-label",10),y.qZA(),y.TgZ(8,"span",24),y._uU(9),y.qZA(),y._UZ(10,"system-label",12),y.TgZ(11,"span",25),y._uU(12),y.qZA()(),y.TgZ(13,"p"),y._uU(14),y.qZA()()(),y.TgZ(15,"button",26),y.NdJ("click",(function(){y.CHM(e);const t=y.oxw();return y.KtG(t.notificationService.clearTempNotification(t.notification))})),y._UZ(16,"system-button-icon",27),y.qZA()()()}if(2&e){const e=y.oxw();y.xp6(8),y.Q6J("id",e.notification.bean_id)("module",e.notification.bean_module)("system-title",e.notification.bean_name),y.xp6(1),y.hij(" ",e.notification.bean_name," "),y.xp6(2),y.Q6J("id",e.notification.created_by)("system-title",e.notification.created_by_name),y.xp6(1),y.hij(" ",e.notification.created_by_name," "),y.xp6(2),y.hij(" ",e.notification.notification_date," ")}}let Ii=(()=>{var e;class GlobalHeaderNotificationsItemAssign{constructor(e){(0,i.Z)(this,"notificationService",void 0),(0,i.Z)(this,"notification",void 0),(0,i.Z)(this,"asBox",!1),this.notificationService=e}}return e=GlobalHeaderNotificationsItemAssign,(0,i.Z)(GlobalHeaderNotificationsItemAssign,"ɵfac",(function(t){return new(t||e)(y.Y36(gi.t))})),(0,i.Z)(GlobalHeaderNotificationsItemAssign,"ɵcmp",y.Xpm({type:e,selectors:[["global-header-notifications-item-assign"]],inputs:{notification:"notification",asBox:"asBox"},decls:3,vars:2,consts:[["class","slds-media slds-has-flexi-truncate slds-p-around_x-small",4,"ngIf","ngIfElse"],["boxContainer",""],[1,"slds-media","slds-has-flexi-truncate","slds-p-around_x-small"],[1,"slds-media__figure"],["class","slds-icon_container","style","width:40px;height:40px;",4,"ngIf"],[1,"slds-media__body"],[1,"slds-grid","slds-grid_align-spread"],["href","javascript:void(0);",1,"slds-text-link_reset","slds-has-flexi-truncate"],[1,"slds-truncate"],["system-title","LBL_ASSIGNED",1,"slds-m-right--xx-small"],["label","LBL_ASSIGNED"],["system-model-popover","",1,"slds-m-right--xxx-small",3,"id","module","system-title"],["label","LBL_BY"],["system-model-popover","","module","Users",1,"slds-m-right--xxx-small",3,"id","system-title"],[1,"slds-text-color_weak"],["system-title","LBL_UNREAD","class","slds-text-link slds-m-horizontal_xxx-small slds-text-color_success",4,"ngIf"],[1,"slds-icon_container",2,"width","40px","height","40px"],["icon","individual"],["system-title","LBL_UNREAD",1,"slds-text-link","slds-m-horizontal_xxx-small","slds-text-color_success"],["role","dialog",1,"slds-notification","slds-m-vertical--xxx-small"],[1,"slds-notification__body"],[1,"slds-notification__target","slds-media"],[1,"slds-text-heading_small","slds-m-bottom_xx-small"],["system-title","LBL_ASSIGNED"],["system-model-popover","",1,"slds-m-right--xxx-small",2,"text-decoration","underline",3,"id","module","system-title"],["system-model-popover","","module","Users",1,"slds-m-right--xxx-small",2,"text-decoration","underline",3,"id","system-title"],["system-title","LBL_CLOSE",1,"slds-button","slds-button_icon","slds-button_icon-container","slds-notification__close",3,"click"],["icon","close"]],template:function(e,t){if(1&e&&(y.YNc(0,ki,17,12,"div",0),y.YNc(1,Li,17,8,"ng-template",null,1,y.W1O)),2&e){const e=y.MAs(2);y.Q6J("ngIf",!t.asBox)("ngIfElse",e)}},dependencies:[n.O5,cs.g,C.S,D.J,O.f,A._],encapsulation:2})),GlobalHeaderNotificationsItemAssign})();function Mi(e,t){1&e&&(y.TgZ(0,"span",16),y._UZ(1,"system-icon",17),y.qZA())}function Si(e,t){1&e&&(y.TgZ(0,"abbr",18),y._uU(1,"●"),y.qZA())}function Ji(e,t){if(1&e&&(y.TgZ(0,"div",2)(1,"div",3),y.YNc(2,Mi,2,0,"span",4),y.qZA(),y.TgZ(3,"div",5)(4,"div",6)(5,"a",7)(6,"h3",8)(7,"span",9),y._UZ(8,"system-label",10),y.qZA(),y.TgZ(9,"span",11),y._uU(10),y.qZA(),y._UZ(11,"system-label",12),y.TgZ(12,"span",13),y._uU(13),y.qZA()(),y.TgZ(14,"p",14),y._uU(15),y.YNc(16,Si,2,0,"abbr",15),y.qZA()()()()()),2&e){const e=y.oxw();y.xp6(2),y.Q6J("ngIf",e.notification.bean_module),y.xp6(2),y.ekj("slds-text-title_bold",1!=e.notification.notification_read),y.xp6(5),y.Q6J("system-title",e.notification.bean_name),y.xp6(1),y.hij(" ",e.notification.bean_name," "),y.xp6(2),y.Q6J("id",e.notification.created_by)("system-title",e.notification.created_by_name),y.xp6(1),y.hij(" ",e.notification.created_by_name," "),y.xp6(2),y.hij(" ",e.notification.notification_date," "),y.xp6(1),y.Q6J("ngIf",1!=e.notification.notification_read)}}function Oi(e,t){if(1&e){const e=y.EpF();y.TgZ(0,"section",19)(1,"div",20)(2,"a",21),y._UZ(3,"system-icon",17),y.TgZ(4,"div",5)(5,"h2",22)(6,"span",23),y._UZ(7,"system-label",24),y.qZA(),y.TgZ(8,"span",25),y._uU(9),y.qZA(),y._UZ(10,"system-label",12),y.TgZ(11,"span",26),y._uU(12),y.qZA()(),y.TgZ(13,"p"),y._uU(14),y.qZA()()(),y.TgZ(15,"button",27),y.NdJ("click",(function(){y.CHM(e);const t=y.oxw();return y.KtG(t.notificationService.clearTempNotification(t.notification))})),y._UZ(16,"system-button-icon",28),y.qZA()()()}if(2&e){const e=y.oxw();y.xp6(8),y.Q6J("id",e.notification.bean_id)("module",e.notification.bean_module)("system-title",e.notification.bean_name),y.xp6(1),y.hij(" ",e.notification.bean_name," "),y.xp6(2),y.Q6J("id",e.notification.created_by)("system-title",e.notification.created_by_name),y.xp6(1),y.hij(" ",e.notification.created_by_name," "),y.xp6(2),y.hij(" ",e.notification.notification_date," ")}}let Ni=(()=>{var e;class GlobalHeaderNotificationsItemDelete{constructor(e){(0,i.Z)(this,"notificationService",void 0),(0,i.Z)(this,"notification",void 0),(0,i.Z)(this,"asBox",!1),this.notificationService=e}}return e=GlobalHeaderNotificationsItemDelete,(0,i.Z)(GlobalHeaderNotificationsItemDelete,"ɵfac",(function(t){return new(t||e)(y.Y36(gi.t))})),(0,i.Z)(GlobalHeaderNotificationsItemDelete,"ɵcmp",y.Xpm({type:e,selectors:[["global-header-notifications-item-delete"]],inputs:{notification:"notification",asBox:"asBox"},decls:3,vars:2,consts:[["class","slds-media slds-has-flexi-truncate slds-p-around_x-small",4,"ngIf","ngIfElse"],["boxContainer",""],[1,"slds-media","slds-has-flexi-truncate","slds-p-around_x-small"],[1,"slds-media__figure"],["class","slds-icon_container","style","width:40px;height:40px;",4,"ngIf"],[1,"slds-media__body"],[1,"slds-grid","slds-grid_align-spread"],["href","javascript:void(0);",1,"slds-text-link_reset","slds-has-flexi-truncate"],[1,"slds-truncate"],["system-title","LBL_DELETED",1,"slds-m-right--xx-small"],["label","LBL_DELETED"],[1,"slds-m-right--xxx-small",3,"system-title"],["label","LBL_BY"],["system-model-popover","","module","Users",1,"slds-m-right--xxx-small",3,"id","system-title"],[1,"slds-text-color_weak"],["system-title","LBL_UNREAD","class","slds-text-link slds-m-horizontal_xxx-small slds-text-color_success",4,"ngIf"],[1,"slds-icon_container",2,"width","40px","height","40px"],["icon","record_delete"],["system-title","LBL_UNREAD",1,"slds-text-link","slds-m-horizontal_xxx-small","slds-text-color_success"],["role","dialog",1,"slds-notification","slds-m-vertical--xxx-small"],[1,"slds-notification__body"],[1,"slds-notification__target","slds-media"],[1,"slds-text-heading_small","slds-m-bottom_xx-small"],["system-title","LBL_ASSIGNED"],["label","LBL_ASSIGNED"],["system-model-popover","",1,"slds-m-right--xxx-small",2,"text-decoration","underline",3,"id","module","system-title"],["system-model-popover","","module","Users",1,"slds-m-right--xxx-small",2,"text-decoration","underline",3,"id","system-title"],["system-title","LBL_CLOSE",1,"slds-button","slds-button_icon","slds-button_icon-container","slds-notification__close",3,"click"],["icon","close"]],template:function(e,t){if(1&e&&(y.YNc(0,Ji,17,10,"div",0),y.YNc(1,Oi,17,8,"ng-template",null,1,y.W1O)),2&e){const e=y.MAs(2);y.Q6J("ngIf",!t.asBox)("ngIfElse",e)}},dependencies:[n.O5,cs.g,C.S,D.J,O.f,A._],encapsulation:2})),GlobalHeaderNotificationsItemDelete})();var Fi=s(6538);function qi(e,t){if(1&e&&y._UZ(0,"system-icon",12),2&e){const e=y.oxw();y.Q6J("module",e.notification.bean_module)}}let Ei=(()=>{var e;class GlobalHeaderNotificationsItemReminder{constructor(e){(0,i.Z)(this,"notificationService",void 0),(0,i.Z)(this,"notification",void 0),(0,i.Z)(this,"asBox",!1),this.notificationService=e}}return e=GlobalHeaderNotificationsItemReminder,(0,i.Z)(GlobalHeaderNotificationsItemReminder,"ɵfac",(function(t){return new(t||e)(y.Y36(gi.t))})),(0,i.Z)(GlobalHeaderNotificationsItemReminder,"ɵcmp",y.Xpm({type:e,selectors:[["global-header-notifications-item-reminder"]],inputs:{notification:"notification",asBox:"asBox"},decls:14,vars:6,consts:[["role","dialog",1,"slds-notification","slds-m-vertical--xxx-small"],[1,"slds-notification__body"],[1,"slds-notification__target","slds-media"],[3,"module",4,"ngIf"],[1,"slds-media__body"],[1,"slds-text-color_weak","slds-text-body_small"],["icon","custom25","sprite","custom"],[1,"slds-truncate"],["system-model-popover","",1,"slds-m-right--xxx-small",3,"id","module","system-title"],[3,"date"],["system-title","LBL_CLOSE",1,"slds-button","slds-button_icon","slds-button_icon-container","slds-notification__close",3,"click"],["icon","close"],[3,"module"]],template:function(e,t){1&e&&(y.TgZ(0,"section",0)(1,"div",1)(2,"a",2),y.YNc(3,qi,1,1,"system-icon",3),y.TgZ(4,"div",4)(5,"div",5),y._UZ(6,"system-icon",6),y.qZA(),y.TgZ(7,"h3",7)(8,"span",8),y._uU(9),y.qZA()(),y.TgZ(10,"p",5),y._UZ(11,"system-display-datetime",9),y.qZA()()(),y.TgZ(12,"button",10),y.NdJ("click",(function(){return t.notificationService.clearTempNotification(t.notification)})),y._UZ(13,"system-button-icon",11),y.qZA()()()),2&e&&(y.xp6(3),y.Q6J("ngIf",t.notification.bean_module),y.xp6(5),y.Q6J("id",t.notification.bean_id)("module",t.notification.bean_module)("system-title",t.notification.bean_name),y.xp6(1),y.hij(" ",t.notification.bean_name," "),y.xp6(2),y.Q6J("date",t.notification.notification_date))},dependencies:[n.O5,cs.g,C.S,D.J,Fi.a,O.f],encapsulation:2})),GlobalHeaderNotificationsItemReminder})();var Yi=s(2355),Di=s(528);function Qi(e,t){if(1&e&&(y.TgZ(0,"div",7),y._uU(1),y.qZA()),2&e){const e=y.oxw();y.xp6(1),y.hij(" ",e.notificationService.unreadCount," ")}}function Ui(e,t){if(1&e){const e=y.EpF();y.TgZ(0,"a",20),y.NdJ("click",(function(){y.CHM(e);const t=y.oxw(2);return y.KtG(t.markAllAsRead())})),y._UZ(1,"system-label",21),y.qZA()}}function Ri(e,t){1&e&&(y.TgZ(0,"div",32),y._UZ(1,"system-label",33),y.qZA())}function ji(e,t){if(1&e&&y._UZ(0,"global-header-notifications-item-assign",41),2&e){const e=y.oxw(2).$implicit;y.Q6J("notification",e)}}function Bi(e,t){if(1&e&&y._UZ(0,"global-header-notifications-item-change",41),2&e){const e=y.oxw(2).$implicit;y.Q6J("notification",e)}}function Gi(e,t){if(1&e&&y._UZ(0,"global-header-notifications-item-delete",41),2&e){const e=y.oxw(2).$implicit;y.Q6J("notification",e)}}function Pi(e,t){if(1&e&&y._UZ(0,"global-header-notifications-item-generic",41),2&e){const e=y.oxw(2).$implicit;y.Q6J("notification",e)}}function Hi(e,t){if(1&e){const e=y.EpF();y.TgZ(0,"li",35),y.YNc(1,ji,1,1,"global-header-notifications-item-assign",36),y.YNc(2,Bi,1,1,"global-header-notifications-item-change",36),y.YNc(3,Gi,1,1,"global-header-notifications-item-delete",36),y.YNc(4,Pi,1,1,"global-header-notifications-item-generic",37),y.TgZ(5,"div",38),y.NdJ("click",(function(t){y.CHM(e);const s=y.oxw().$implicit;return y.oxw(3).markAsRead(s.id),y.KtG(t.stopPropagation())})),y.TgZ(6,"button",39),y._UZ(7,"system-button-icon",40),y.qZA()()()}if(2&e){const e=y.oxw().$implicit;y.Q6J("ngSwitch",e.notification_type),y.xp6(1),y.Q6J("ngSwitchCase","assign"),y.xp6(1),y.Q6J("ngSwitchCase","change"),y.xp6(1),y.Q6J("ngSwitchCase","delete")}}function zi(e,t){if(1&e&&(y.ynx(0),y.YNc(1,Hi,8,4,"li",34),y.BQk()),2&e){const e=t.$implicit;y.xp6(1),y.Q6J("ngIf","reminder"!=e.notification_type)}}function Vi(e,t){1&e&&(y.TgZ(0,"div",42),y._UZ(1,"system-spinner"),y.qZA())}function Ki(e,t){if(1&e){const e=y.EpF();y.TgZ(0,"li",29)(1,"a",20),y.NdJ("click",(function(){y.CHM(e);const t=y.oxw(3);return y.KtG(t.manageSubscriptions())})),y._UZ(2,"system-label",43),y.qZA()()}}function $i(e,t){if(1&e){const e=y.EpF();y.TgZ(0,"div",22),y.YNc(1,Ri,2,0,"div",23),y.TgZ(2,"ul",24),y.YNc(3,zi,2,1,"ng-container",25),y.qZA(),y.YNc(4,Vi,2,0,"div",26),y.TgZ(5,"div",27)(6,"ul",28)(7,"li",29)(8,"a",20),y.NdJ("click",(function(){y.CHM(e);const t=y.oxw(2);return y.KtG(t.showAllNotifications())})),y._UZ(9,"system-label",30),y.qZA()(),y.YNc(10,Ki,3,0,"li",31),y.qZA()()()}if(2&e){const e=y.oxw(2);y.xp6(1),y.Q6J("ngIf",0===(null==e.notificationService.unreadNotifications?null:e.notificationService.unreadNotifications.length)),y.xp6(2),y.Q6J("ngForOf",e.notificationService.unreadNotifications),y.xp6(1),y.Q6J("ngIf",e.notificationService.isLoading),y.xp6(6),y.Q6J("ngIf",e.hasSubscriptions)}}function Xi(e,t){if(1&e){const e=y.EpF();y.TgZ(0,"system-checkbox-toggle",47),y.NdJ("ngModelChange",(function(t){y.CHM(e);const s=y.oxw(3);return y.KtG(s.setDisplayDesktopNotification(t))})),y.qZA()}if(2&e){const e=y.oxw(3);y.Q6J("ngModel",e.userPreferences.toUse.displayDesktopNotifications)}}function Wi(e,t){1&e&&(y.TgZ(0,"div",48)(1,"span",49),y._UZ(2,"system-label",50),y.qZA(),y.TgZ(3,"span",51),y._UZ(4,"system-label",52),y.qZA()())}function en(e,t){if(1&e){const e=y.EpF();y.TgZ(0,"div",32)(1,"system-checkbox-toggle",44),y.NdJ("ngModelChange",(function(t){y.CHM(e);const s=y.oxw(2);return y.KtG(s.setSetting("showRealtimeNotifications",t))})),y.qZA(),y.YNc(2,Xi,1,1,"system-checkbox-toggle",45),y.YNc(3,Wi,5,0,"ng-template",null,46,y.W1O),y.qZA()}if(2&e){const e=y.MAs(4),t=y.oxw(2);y.xp6(1),y.Q6J("ngModel",t.userPreferences.toUse.showRealtimeNotifications),y.xp6(1),y.Q6J("ngIf","denied"!==t.desktopNotificationsStatus&&!t.desktopNotificationsDisabled)("ngIfElse",e)}}function tn(e,t){if(1&e){const e=y.EpF();y.TgZ(0,"section",8)(1,"div",9)(2,"header",10)(3,"h2",11),y._UZ(4,"system-label",12),y.qZA(),y.YNc(5,Ui,2,0,"a",13),y.qZA(),y.TgZ(6,"button",14),y.NdJ("click",(function(){y.CHM(e);const t=y.oxw();return y.KtG(t.toggleShowSettings())})),y._UZ(7,"system-button-icon",15),y.qZA(),y.TgZ(8,"button",16),y.NdJ("click",(function(){y.CHM(e);const t=y.oxw();return y.KtG(t.closePopover())})),y._UZ(9,"system-button-icon",17),y.qZA()(),y.YNc(10,$i,11,4,"div",18),y.YNc(11,en,5,3,"ng-template",null,19,y.W1O),y.qZA()}if(2&e){const e=y.MAs(12),t=y.oxw();y.Q6J("ngStyle",t.popoverStyle),y.xp6(5),y.Q6J("ngIf",t.notificationService.unreadNotifications.length>0),y.xp6(2),y.Q6J("addclasses",t.showSettings?"slds-text-color--error":""),y.xp6(3),y.Q6J("ngIf",!t.showSettings)("ngIfElse",e)}}function sn(e,t){if(1&e&&y._UZ(0,"global-header-notifications-item-assign",56),2&e){const e=y.oxw().$implicit;y.Q6J("asBox",!0)("notification",e)}}function nn(e,t){if(1&e&&y._UZ(0,"global-header-notifications-item-change",56),2&e){const e=y.oxw().$implicit;y.Q6J("asBox",!0)("notification",e)}}function on(e,t){if(1&e&&y._UZ(0,"global-header-notifications-item-delete",56),2&e){const e=y.oxw().$implicit;y.Q6J("asBox",!0)("notification",e)}}function ln(e,t){if(1&e&&y._UZ(0,"global-header-notifications-item-reminder",56),2&e){const e=y.oxw().$implicit;y.Q6J("asBox",!0)("notification",e)}}function an(e,t){if(1&e&&y._UZ(0,"global-header-notifications-item-generic",56),2&e){const e=y.oxw().$implicit;y.Q6J("asBox",!0)("notification",e)}}function dn(e,t){if(1&e&&(y.ynx(0,53),y.YNc(1,sn,1,2,"global-header-notifications-item-assign",54),y.YNc(2,nn,1,2,"global-header-notifications-item-change",54),y.YNc(3,on,1,2,"global-header-notifications-item-delete",54),y.YNc(4,ln,1,2,"global-header-notifications-item-reminder",54),y.YNc(5,an,1,2,"global-header-notifications-item-generic",55),y.BQk()),2&e){const e=t.$implicit;y.Q6J("ngSwitch",e.notification_type),y.xp6(1),y.Q6J("ngSwitchCase","assign"),y.xp6(1),y.Q6J("ngSwitchCase","change"),y.xp6(1),y.Q6J("ngSwitchCase","delete"),y.xp6(1),y.Q6J("ngSwitchCase","reminder")}}const rn=function(e){return{"slds-p-right--x-small":e}};let cn=(()=>{var e;class GlobalHeaderNotifications{constructor(e,t,s,n,o,l,a,d){(0,i.Z)(this,"notificationService",void 0),(0,i.Z)(this,"elementRef",void 0),(0,i.Z)(this,"modal",void 0),(0,i.Z)(this,"subscription",void 0),(0,i.Z)(this,"userPreferences",void 0),(0,i.Z)(this,"cdRef",void 0),(0,i.Z)(this,"router",void 0),(0,i.Z)(this,"renderer",void 0),(0,i.Z)(this,"isOpen",!1),(0,i.Z)(this,"showSettings",!1),(0,i.Z)(this,"clickListener",void 0),(0,i.Z)(this,"right",0),this.notificationService=e,this.elementRef=t,this.modal=s,this.subscription=n,this.userPreferences=o,this.cdRef=l,this.router=a,this.renderer=d}ngOnInit(){this.notificationService.reloadNotifications()}get desktopNotificationsDisabled(){return!("Notification"in window)}get desktopNotificationsStatus(){return Notification.permission}markAsRead(e){this.notificationService.markAsRead(e)}markAllAsRead(){this.notificationService.markAllAsRead()}toggleOpenPopover(){let e=this.elementRef.nativeElement.getBoundingClientRect();this.right=window.innerWidth-e.right+(e.left-e.right)/2-3,this.isOpen=!this.isOpen,this.isOpen?(this.showSettings=!1,this.clickListener=this.renderer.listen("document","click",(e=>{this.elementRef.nativeElement.contains(e.target)||(this.isOpen=!1,this.clickListener())}))):this.clickListener&&this.clickListener()}get popoverStyle(){return{right:this.right+"px"}}closePopover(){this.isOpen=!1,this.clickListener&&this.clickListener()}toggleShowSettings(){this.showSettings=!this.showSettings}setSetting(e,t){this.userPreferences.setPreference(e,t)}setDisplayDesktopNotification(e){"default"===this.desktopNotificationsStatus?Notification.requestPermission().then((t=>{"granted"==t&&this.setSetting("displayDesktopNotifications",e),this.cdRef.detectChanges()})):this.setSetting("displayDesktopNotifications",e)}showAllNotifications(){this.closePopover(),this.router.navigate(["notifications"])}get hasSubscriptions(){return this.subscription.subscriptions.length>0}manageSubscriptions(){this.closePopover(),this.modal.openModal("GlobalSubscriptionsManager")}}return e=GlobalHeaderNotifications,(0,i.Z)(GlobalHeaderNotifications,"ɵfac",(function(t){return new(t||e)(y.Y36(gi.t),y.Y36(y.SBq),y.Y36(Y.o),y.Y36(Yi.J),y.Y36(Jt.z),y.Y36(y.sBO),y.Y36(E.F0),y.Y36(y.Qsj))})),(0,i.Z)(GlobalHeaderNotifications,"ɵcmp",y.Xpm({type:e,selectors:[["global-header-notifications"]],decls:7,vars:8,consts:[[1,"slds-dropdown-trigger","slds-dropdown-trigger_click","slds-m-right--xx-small",3,"ngClass"],["system-title","LBL_NOTIFICATIONS",1,"slds-global-actions__notifications","slds-global-actions__item-action","slds-incoming-notification",3,"click"],["icon","notification","size","x-small"],["style","top:-5px; right:0px;","class","slds-notification-badge slds-incoming-notification slds-show-notification",4,"ngIf"],["class","slds-popover slds-popover_large slds-nubbin_top-right slds-is-absolute slds-grid slds-grid--vertical","role","dialog","style","top: 48px; max-height: calc(100vh - 55px);",3,"ngStyle",4,"ngIf"],[1,"slds-notification-container"],[3,"ngSwitch",4,"ngFor","ngForOf"],[1,"slds-notification-badge","slds-incoming-notification","slds-show-notification",2,"top","-5px","right","0px"],["role","dialog",1,"slds-popover","slds-popover_large","slds-nubbin_top-right","slds-is-absolute","slds-grid","slds-grid--vertical",2,"top","48px","max-height","calc(100vh - 55px)",3,"ngStyle"],[1,"slds-grid","slds-border--bottom"],[1,"slds-popover__header","slds-grow","slds-grid","slds-grid--align-spread",2,"border-bottom","0"],[1,"slds-text-heading_small"],["label","LBL_UNREAD_NOTIFICATIONS"],["class","slds-text-link",3,"click",4,"ngIf"],["system-title","LBL_SETTINGS",1,"slds-button","slds-button--icon","slds-float_right","slds-popover__close",3,"click"],["icon","settings",3,"addclasses"],["system-title","LBL_CLOSE",1,"slds-button","slds-button--icon","slds-float_right","slds-m-right--x-small",3,"click"],["icon","close"],["class","slds-popover__body slds-p-around_none slds-grow slds-grid slds-grid--vertical","style","min-height: 0",4,"ngIf","ngIfElse"],["showSettingsContainer",""],[1,"slds-text-link",3,"click"],["label","LBL_MARK_ALL_READ"],[1,"slds-popover__body","slds-p-around_none","slds-grow","slds-grid","slds-grid--vertical",2,"min-height","0"],["class","slds-p-around--small",4,"ngIf"],[1,"slds-scrollable--y","slds-grow",2,"min-height","0"],[4,"ngFor","ngForOf"],["class","slds-align--absolute-center slds-p-around--small",4,"ngIf"],[1,"slds-has-divider--top","slds-p-around--x-small","slds-size--1-of-1","slds-align--absolute-center"],[1,"slds-list_horizontal","slds-has-dividers_right","slds-has-block-links"],[1,"slds-item"],["label","LBL_SHOW_ALL"],["class","slds-item",4,"ngIf"],[1,"slds-p-around--small"],["label","LBL_NO_ENTRIES"],["class","slds-global-header__notification spice-hover-display-children slds-is-relative",3,"ngSwitch",4,"ngIf"],[1,"slds-global-header__notification","spice-hover-display-children","slds-is-relative",3,"ngSwitch"],[3,"notification",4,"ngSwitchCase"],[3,"notification",4,"ngSwitchDefault"],[1,"slds-is-absolute","slds-height_full","spice-hover-child","slds-grid","slds-grid--vertical-align-center","slds-p-right--x-small",2,"right","0","top","0",3,"click"],["system-title","LBL_MARK_AS_READ",1,"slds-theme--default","slds-button","slds-button_icon","slds-button_icon-small","slds-float_right","slds-popover__close","slds-button--icon-border"],["icon","check","size","small"],[3,"notification"],[1,"slds-align--absolute-center","slds-p-around--small"],["label","LBL_MANAGE_MODEL_SUBSCRIPTIONS"],["label","LBL_REALTIME_NOTIFICATIONS",1,"slds-m-bottom--xx-small","spice-display-block",3,"ngModel","ngModelChange"],["label","LBL_DESKTOP_NOTIFICATIONS","class","slds-m-bottom--xx-small spice-display-block",3,"ngModel","ngModelChange",4,"ngIf","ngIfElse"],["desktopNotificationDeniedContainer",""],["label","LBL_DESKTOP_NOTIFICATIONS",1,"slds-m-bottom--xx-small","spice-display-block",3,"ngModel","ngModelChange"],[1,"slds-grid","slds-grid--align-spread"],[1,"slds-grow","slds-text-body--small"],["label","LBL_DESKTOP_NOTIFICATIONS"],[1,"slds-text-color_error"],["label","LBL_DENIED"],[3,"ngSwitch"],[3,"asBox","notification",4,"ngSwitchCase"],[3,"asBox","notification",4,"ngSwitchDefault"],[3,"asBox","notification"]],template:function(e,t){1&e&&(y.TgZ(0,"div",0)(1,"div",1),y.NdJ("click",(function(){return t.toggleOpenPopover()})),y._UZ(2,"system-utility-icon",2),y.qZA(),y.YNc(3,Qi,2,1,"div",3),y.qZA(),y.YNc(4,tn,13,5,"section",4),y.TgZ(5,"div",5),y.YNc(6,dn,6,5,"ng-container",6),y.qZA()),2&e&&(y.Q6J("ngClass",y.VKq(6,rn,t.notificationService.unreadCount>0)),y.xp6(3),y.Q6J("ngIf",t.notificationService.unreadCount>0),y.xp6(1),y.Q6J("ngIf",t.isOpen),y.xp6(1),y.ekj("slds-hidden",0===t.notificationService.newNotifications.length),y.xp6(1),y.Q6J("ngForOf",t.notificationService.newNotifications))},dependencies:[n.mk,n.sg,n.O5,n.PC,n.RF,n.n9,n.ED,o.JJ,o.On,C.S,D.J,Di.v,A._,X.W,k.r,Zi,Ei,Ti,Ii,Ni],encapsulation:2})),GlobalHeaderNotifications})();var un=s(5681),hn=s(3194);function mn(e,t){if(1&e){const e=y.EpF();y.TgZ(0,"system-checkbox-toggle",39),y.NdJ("ngModelChange",(function(t){y.CHM(e);const s=y.oxw();return y.KtG(s.setDisplayDesktopNotification(t))})),y.qZA()}if(2&e){const e=y.oxw();y.Q6J("ngModel",e.userPreferences.toUse.displayDesktopNotifications)}}function gn(e,t){1&e&&(y.TgZ(0,"div",40)(1,"span",41),y._UZ(2,"system-label",42),y.qZA(),y.TgZ(3,"span",43),y._UZ(4,"system-label",44),y.qZA()())}function pn(e,t){1&e&&(y.TgZ(0,"div",20),y._UZ(1,"system-label",45),y.qZA())}function fn(e,t){1&e&&y._UZ(0,"system-icon",68)}function bn(e,t){1&e&&y._UZ(0,"system-icon",69)}function vn(e,t){1&e&&y._UZ(0,"system-icon",70)}function Zn(e,t){1&e&&y._UZ(0,"system-icon",71)}function _n(e,t){1&e&&y._UZ(0,"system-icon",72)}function yn(e,t){1&e&&y._UZ(0,"system-label",73)}function xn(e,t){1&e&&y._UZ(0,"system-label",74)}function wn(e,t){1&e&&y._UZ(0,"system-label",75)}function Tn(e,t){1&e&&y._UZ(0,"system-label",76)}function Cn(e,t){1&e&&y._UZ(0,"system-label",77)}function An(e,t){if(1&e){const e=y.EpF();y.TgZ(0,"tr",46)(1,"td",47)(2,"div",48),y.YNc(3,fn,1,0,"system-icon",49),y.YNc(4,bn,1,0,"system-icon",50),y.YNc(5,vn,1,0,"system-icon",51),y.YNc(6,Zn,1,0,"system-icon",52),y.YNc(7,_n,1,0,"system-icon",53),y.qZA()(),y.TgZ(8,"td")(9,"div",54),y.YNc(10,yn,1,0,"system-label",55),y.YNc(11,xn,1,0,"system-label",56),y.YNc(12,wn,1,0,"system-label",57),y.YNc(13,Tn,1,0,"system-label",58),y.YNc(14,Cn,1,0,"system-label",59),y.qZA()(),y.TgZ(15,"td",60)(16,"div",61),y._UZ(17,"system-label-modulename",62),y.qZA()(),y.TgZ(18,"td",60)(19,"div",61),y._uU(20),y.qZA()(),y.TgZ(21,"td",63)(22,"div",61),y._uU(23),y.qZA()(),y.TgZ(24,"td",64)(25,"div",61),y._uU(26),y.qZA()(),y.TgZ(27,"td",65)(28,"button",66),y.NdJ("click",(function(){const t=y.CHM(e).$implicit,s=y.oxw();return y.KtG(s.markAsRead(t.id))})),y._UZ(29,"system-button-icon",67),y.qZA()()()}if(2&e){const e=t.$implicit;y.ekj("slds-text-title_bold",1!=e.notification_read),y.xp6(2),y.Q6J("ngSwitch",e.notification_type),y.xp6(1),y.Q6J("ngSwitchCase","assign"),y.xp6(1),y.Q6J("ngSwitchCase","change"),y.xp6(1),y.Q6J("ngSwitchCase","delete"),y.xp6(1),y.Q6J("ngSwitchCase","reminder"),y.xp6(3),y.Q6J("ngSwitch",e.notification_type),y.xp6(1),y.Q6J("ngSwitchCase","assign"),y.xp6(1),y.Q6J("ngSwitchCase","change"),y.xp6(1),y.Q6J("ngSwitchCase","delete"),y.xp6(1),y.Q6J("ngSwitchCase","reminder"),y.xp6(2),y.Q6J("id",e.bean_id)("module",e.bean_module)("system-title",e.bean_module),y.xp6(2),y.Q6J("module",e.bean_module),y.xp6(1),y.Q6J("id",e.bean_id)("module",e.bean_module)("system-title",e.bean_name),y.xp6(2),y.hij(" ",e.bean_name," "),y.xp6(1),y.Q6J("id",e.created_by_name)("system-title",e.created_by_name),y.xp6(2),y.hij(" ",e.created_by_name," "),y.xp6(1),y.Q6J("system-title",e.notification_date),y.xp6(2),y.hij(" ",e.notification_date," "),y.xp6(2),y.Q6J("disabled",1==e.notification_read)}}function kn(e,t){1&e&&(y.TgZ(0,"div",78),y._UZ(1,"system-spinner"),y.qZA())}let Ln=(()=>{var e;class GlobalNotificationsListView{constructor(e,t,s,n,o){(0,i.Z)(this,"notificationService",void 0),(0,i.Z)(this,"navigationTab",void 0),(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"cdRef",void 0),(0,i.Z)(this,"userPreferences",void 0),this.notificationService=e,this.navigationTab=t,this.language=s,this.cdRef=n,this.userPreferences=o,this.setTabInfo()}get desktopNotificationsDisabled(){return!("Notification"in window)}get desktopNotificationsStatus(){return Notification.permission}setTabInfo(){this.navigationTab.setTabInfo({displayname:this.language.getLabel("LBL_NOTIFICATIONS"),displayicon:"notification"})}reload(){this.notificationService.reloadNotifications()}markAsRead(e){this.notificationService.markAsRead(e)}markAllAsRead(){this.notificationService.markAllAsRead()}onScroll(e){e.scrollTop+e.clientHeight+50>e.scrollHeight&&this.notificationService.loadMoreNotifications()}setSetting(e,t){this.userPreferences.setPreference(e,t)}setDisplayDesktopNotification(e){"default"===this.desktopNotificationsStatus?Notification.requestPermission().then((t=>{"granted"==t&&this.setSetting("displayDesktopNotifications",e),this.cdRef.detectChanges()})):this.setSetting("displayDesktopNotifications",e)}}return e=GlobalNotificationsListView,(0,i.Z)(GlobalNotificationsListView,"ɵfac",(function(t){return new(t||e)(y.Y36(gi.t),y.Y36(rs.d),y.Y36(T.d),y.Y36(y.sBO),y.Y36(Jt.z))})),(0,i.Z)(GlobalNotificationsListView,"ɵcmp",y.Xpm({type:e,selectors:[["global-notifications-list-view"]],decls:54,vars:8,consts:[["system-to-bottom-noscroll","",1,"slds-grid","slds-grid--vertical"],[1,"slds-grid","slds-border--bottom","slds-p-around--medium"],[1,"slds-grow","slds-grid","slds-grid--align-spread",2,"border-bottom","0"],[1,"slds-page-header__title"],["icon","notification","size","x-small"],["label","LBL_NOTIFICATIONS"],[1,"slds-text-body--small","slds-m-left--large"],["label","LBL_OF"],["label","LBL_ITEMS"],[1,"slds-grid","slds-grid--vertical-align-center"],[1,"slds-text-link",3,"click"],["label","LBL_MARK_ALL_READ"],["system-title","LBL_RELOAD",1,"slds-button","slds-button--icon","slds-m-left--xx-small","slds-button--icon-border-filled",3,"click"],["icon","refresh"],["system-dropdown-trigger","","role","combobox",1,"slds-dropdown-trigger","slds-dropdown-trigger_click"],["system-title","LBL_SETTINGS",1,"slds-button","slds-button--icon","slds-m-left--xx-small","slds-button--icon-border-filled"],["icon","settings"],[1,"slds-dropdown","slds-dropdown_x-small","slds-dropdown_left",3,"click"],[1,"slds-has-divider--bottom-space","slds-p-horizontal--small","slds-p-top--xx-small","slds-text-title--caps"],["label","LBL_SETTINGS"],[1,"slds-p-around--small"],["label","LBL_REALTIME_NOTIFICATIONS",1,"slds-m-bottom--xx-small","spice-display-block",3,"ngModel","ngModelChange"],["label","LBL_DESKTOP_NOTIFICATIONS","class","slds-m-bottom--xx-small spice-display-block",3,"ngModel","ngModelChange",4,"ngIf","ngIfElse"],["desktopNotificationDeniedContainer",""],[1,"slds-scrollable--y","slds-theme--default","slds-height_full",3,"scroll"],["scrollContainer",""],["class","slds-p-around--small",4,"ngIf"],[1,"slds-table","slds-table_bordered","slds-max-medium-table_stacked-horizontal","slds-table--header-fixed"],[1,"slds-text-title--caps"],["scope","col",1,"slds-cell-shrink"],["scope","col"],[1,"slds-truncate","slds-p-around--x-small"],["label","LBL_TYPE"],["label","LBL_MODULE"],["label","LBL_RECORD"],["label","LBL_CREATED_BY"],["label","LBL_DATE"],["class","spice-hover-display-children",3,"slds-text-title_bold",4,"ngFor","ngForOf"],["class","slds-align--absolute-center slds-p-around--small slds-height_full",4,"ngIf"],["label","LBL_DESKTOP_NOTIFICATIONS",1,"slds-m-bottom--xx-small","spice-display-block",3,"ngModel","ngModelChange"],[1,"slds-grid","slds-grid--align-spread"],[1,"slds-grow","slds-text-body--small"],["label","LBL_DESKTOP_NOTIFICATIONS"],[1,"slds-text-color_error"],["label","LBL_DENIED"],["label","LBL_NO_ENTRIES"],[1,"spice-hover-display-children"],[1,"slds-cell-shrink"],[3,"ngSwitch"],["icon","individual",4,"ngSwitchCase"],["icon","custom18","sprite","custom",4,"ngSwitchCase"],["icon","record_delete",4,"ngSwitchCase"],["icon","custom25","sprite","custom",4,"ngSwitchCase"],["icon","all",4,"ngSwitchDefault"],[1,"slds-truncate",3,"ngSwitch"],["label","LBL_ASSIGNMENT",4,"ngSwitchCase"],["label","LBL_CHANGE",4,"ngSwitchCase"],["label","LBL_DELETION",4,"ngSwitchCase"],["label","LBL_REMINDER",4,"ngSwitchCase"],["label","LBL_NOT_SET",4,"ngSwitchDefault"],["system-model-popover","",3,"id","module","system-title"],[1,"slds-truncate"],[3,"module"],["system-model-popover","","module","Users",3,"id","system-title"],[3,"system-title"],["system-title","LBL_MARK_AS_READ",1,"slds-cell-shrink"],[1,"slds-button","slds-button_icon","slds-button--icon-border","spice-hover-child",3,"disabled","click"],["icon","check","size","small"],["icon","individual"],["icon","custom18","sprite","custom"],["icon","record_delete"],["icon","custom25","sprite","custom"],["icon","all"],["label","LBL_ASSIGNMENT"],["label","LBL_CHANGE"],["label","LBL_DELETION"],["label","LBL_REMINDER"],["label","LBL_NOT_SET"],[1,"slds-align--absolute-center","slds-p-around--small","slds-height_full"]],template:function(e,t){if(1&e){const e=y.EpF();y.TgZ(0,"div",0)(1,"div",1)(2,"header",2)(3,"div")(4,"h2",3),y._UZ(5,"system-utility-icon",4)(6,"system-label",5),y.qZA(),y.TgZ(7,"p",6),y._uU(8),y._UZ(9,"system-label",7),y._uU(10),y._UZ(11,"system-label",8),y.qZA()(),y.TgZ(12,"div",9)(13,"a",10),y.NdJ("click",(function(){return t.markAllAsRead()})),y._UZ(14,"system-label",11),y.qZA(),y.TgZ(15,"button",12),y.NdJ("click",(function(){return t.reload()})),y._UZ(16,"system-button-icon",13),y.qZA(),y.TgZ(17,"div",14)(18,"button",15),y._UZ(19,"system-button-icon",16),y.qZA(),y.TgZ(20,"div",17),y.NdJ("click",(function(e){return e.stopPropagation()})),y.TgZ(21,"div",18),y._UZ(22,"system-label",19),y.qZA(),y.TgZ(23,"div",20)(24,"system-checkbox-toggle",21),y.NdJ("ngModelChange",(function(e){return t.setSetting("showRealtimeNotifications",e)})),y.qZA(),y.YNc(25,mn,1,1,"system-checkbox-toggle",22),y.YNc(26,gn,5,0,"ng-template",null,23,y.W1O),y.qZA()()()()()(),y.TgZ(28,"div",24,25),y.NdJ("scroll",(function(){y.CHM(e);const s=y.MAs(29);return y.KtG(t.onScroll(s))})),y.YNc(30,pn,2,0,"div",26),y.TgZ(31,"table",27)(32,"thead")(33,"tr",28),y._UZ(34,"th",29),y.TgZ(35,"th",30)(36,"div",31),y._UZ(37,"system-label",32),y.qZA()(),y.TgZ(38,"th",30)(39,"div",31),y._UZ(40,"system-label",33),y.qZA()(),y.TgZ(41,"th",30)(42,"div",31),y._UZ(43,"system-label",34),y.qZA()(),y.TgZ(44,"th",30)(45,"div",31),y._UZ(46,"system-label",35),y.qZA()(),y.TgZ(47,"th",30)(48,"div",31),y._UZ(49,"system-label",36),y.qZA()(),y._UZ(50,"th",29),y.qZA()(),y.TgZ(51,"tbody"),y.YNc(52,An,30,26,"tr",37),y.qZA()(),y.YNc(53,kn,2,0,"div",38),y.qZA()()}if(2&e){const e=y.MAs(27);y.xp6(8),y.hij(" ",t.notificationService.notifications.length," "),y.xp6(2),y.hij(" ",t.notificationService.totalCount," "),y.xp6(14),y.Q6J("ngModel",t.userPreferences.toUse.showRealtimeNotifications),y.xp6(1),y.Q6J("ngIf","denied"!==t.desktopNotificationsStatus&&!t.desktopNotificationsDisabled)("ngIfElse",e),y.xp6(5),y.Q6J("ngIf",0===(null==t.notificationService.notifications?null:t.notificationService.notifications.length)&&!t.notificationService.isLoading),y.xp6(22),y.Q6J("ngForOf",t.notificationService.notifications),y.xp6(1),y.Q6J("ngIf",t.notificationService.isLoading)}},dependencies:[n.sg,n.O5,n.RF,n.n9,n.ED,o.JJ,o.On,cs.g,un.l,hn.t,C.S,D.J,Di.v,O.f,A._,Ge.M,X.W,k.r],encapsulation:2})),GlobalNotificationsListView})();function In(e,t){if(1&e&&(y.TgZ(0,"div",1)(1,"div"),y._uU(2),y.qZA(),y.TgZ(3,"div",2)(4,"div",3),y._uU(5),y.qZA(),y.TgZ(6,"div",3),y._uU(7),y.qZA(),y.TgZ(8,"div",3),y._uU(9),y.qZA(),y.TgZ(10,"div"),y._uU(11),y.qZA()()()),2&e){const e=y.oxw();y.xp6(2),y.Oqu(e.event),y.xp6(3),y.hij("",e.timeleft.daysToDday,"d"),y.xp6(2),y.hij("",e.timeleft.hoursToDday,"h"),y.xp6(2),y.hij("",e.timeleft.minutesToDday,"m"),y.xp6(2),y.hij("",e.timeleft.secondsToDday,"s")}}let Mn=(()=>{var e;class GlobalCountdown{constructor(e,t){(0,i.Z)(this,"zone",void 0),(0,i.Z)(this,"cdref",void 0),(0,i.Z)(this,"timer",void 0),(0,i.Z)(this,"timeleft",void 0),(0,i.Z)(this,"event",void 0),(0,i.Z)(this,"visible",!1),(0,i.Z)(this,"targetdate",void 0),this.zone=e,this.cdref=t}ngOnInit(){let e=new moment(this.targetdate);this.visible=moment().isBefore(e),this.visible&&this.zone.runOutsideAngular((()=>{this.timer=setInterval((()=>{this.update()}),1e3)}))}update(){this.timeleft=this.calcDateDiff(),this.cdref.detectChanges()}calcDateDiff(){let e=new moment(this.targetdate),t=moment.duration(e.diff(new moment));return{secondsToDday:t.get("seconds").toString().padStart(2,"0"),minutesToDday:t.get("minutes").toString().padStart(2,"0"),hoursToDday:t.get("hours").toString().padStart(2,"0"),daysToDday:Math.floor(t.as("days")).toString()}}}return e=GlobalCountdown,(0,i.Z)(GlobalCountdown,"ɵfac",(function(t){return new(t||e)(y.Y36(y.R0b),y.Y36(y.sBO))})),(0,i.Z)(GlobalCountdown,"ɵcmp",y.Xpm({type:e,selectors:[["global-countdown"]],inputs:{event:"event",targetdate:"targetdate"},decls:1,vars:1,consts:[["class","slds-grid--vertical slds-text-body--small slds-p-horizontal--small slds-m-left--small slds-border--left",4,"ngIf"],[1,"slds-grid--vertical","slds-text-body--small","slds-p-horizontal--small","slds-m-left--small","slds-border--left"],[1,"slds-grid"],[1,"slds-p-right--xxx-small"]],template:function(e,t){1&e&&y.YNc(0,In,12,5,"div",0),2&e&&y.Q6J("ngIf",t.timeleft&&t.visible)},dependencies:[n.O5],encapsulation:2,changeDetection:0})),GlobalCountdown})();var Sn=s(2057);function Jn(e,t){1&e&&(y.TgZ(0,"div",17),y._UZ(1,"system-label",18),y.qZA())}const On=function(e,t,s){return{module:e,id:t,data:s}};function Nn(e,t){if(1&e){const e=y.EpF();y.TgZ(0,"li",19)(1,"div",20),y._UZ(2,"system-icon",21),y.TgZ(3,"div",22),y.NdJ("clicked",(function(){y.CHM(e);const t=y.oxw(3);return y.KtG(t.closePopover())})),y._uU(4),y.qZA(),y._UZ(5,"system-display-datetime",23),y.TgZ(6,"button",24),y.NdJ("click",(function(){const t=y.CHM(e).$implicit,s=y.oxw(3);return y.KtG(s.deleteReminder(t))})),y._UZ(7,"system-button-icon",25),y.qZA()()()}if(2&e){const e=t.$implicit;y.xp6(1),y.Q6J("system-model-provider",y.kEZ(5,On,e.module_name,e.item_id,e.data)),y.xp6(1),y.Q6J("module",e.module_name),y.xp6(2),y.Oqu(e.data.summary_text),y.xp6(1),y.Q6J("date",e.reminder_date)("displayTime",!1)}}function Fn(e,t){if(1&e){const e=y.EpF();y.TgZ(0,"section",6)(1,"div",7)(2,"header",8)(3,"h2",9),y._UZ(4,"system-label",10),y.qZA()(),y.TgZ(5,"button",11),y.NdJ("click",(function(){y.CHM(e);const t=y.oxw(2);return y.KtG(t.closePopover())})),y._UZ(6,"system-button-icon",12),y.qZA()(),y.TgZ(7,"div",13),y.YNc(8,Jn,2,0,"div",14),y.TgZ(9,"ul",15),y.YNc(10,Nn,8,9,"li",16),y.qZA()()()}if(2&e){const e=y.oxw(2);y.Q6J("ngStyle",e.popoverStyle),y.xp6(8),y.Q6J("ngIf",0===e.currentReminders.length),y.xp6(2),y.Q6J("ngForOf",e.currentReminders)}}function qn(e,t){if(1&e){const e=y.EpF();y.TgZ(0,"div")(1,"div",1)(2,"div",2),y.NdJ("click",(function(){y.CHM(e);const t=y.oxw();return y.KtG(t.toggleOpenPopover())})),y._UZ(3,"system-utility-icon",3),y.qZA(),y.TgZ(4,"div",4),y._uU(5),y.qZA()(),y.YNc(6,Fn,11,3,"section",5),y.qZA()}if(2&e){const e=y.oxw();y.xp6(5),y.hij(" ",e.currentReminders.length," "),y.xp6(1),y.Q6J("ngIf",e.isOpen)}}let En=(()=>{var e;class GlobalHeaderReminders{constructor(e,t,s,n,o,l){(0,i.Z)(this,"reminder",void 0),(0,i.Z)(this,"elementRef",void 0),(0,i.Z)(this,"userPreferences",void 0),(0,i.Z)(this,"cdRef",void 0),(0,i.Z)(this,"router",void 0),(0,i.Z)(this,"renderer",void 0),(0,i.Z)(this,"isOpen",!1),(0,i.Z)(this,"clickListener",void 0),(0,i.Z)(this,"right",0),this.reminder=e,this.elementRef=t,this.userPreferences=s,this.cdRef=n,this.router=o,this.renderer=l}get currentReminders(){return this.reminder.reminders?this.reminder.reminders.filter((e=>moment(e.reminder_date).isSameOrBefore(new moment,"day"))).sort(((e,t)=>moment(e.reminder_date).isBefore(moment(t.reminder_date))?-1:1)):[]}toggleOpenPopover(){let e=this.elementRef.nativeElement.getBoundingClientRect();this.right=window.innerWidth-e.right+(e.left-e.right)/2+10,this.isOpen=!this.isOpen,this.isOpen?this.clickListener=this.renderer.listen("window","click",(e=>{this.elementRef.nativeElement.contains(e.target)||(this.isOpen=!1,this.clickListener())})):this.clickListener&&this.clickListener()}deleteReminder(e){this.reminder.deleteReminder(e.module_name,e.item_id)}get popoverStyle(){return{right:this.right+"px"}}closePopover(){this.isOpen=!1,this.clickListener&&this.clickListener()}}return e=GlobalHeaderReminders,(0,i.Z)(GlobalHeaderReminders,"ɵfac",(function(t){return new(t||e)(y.Y36(Sn.U),y.Y36(y.SBq),y.Y36(Jt.z),y.Y36(y.sBO),y.Y36(E.F0),y.Y36(y.Qsj))})),(0,i.Z)(GlobalHeaderReminders,"ɵcmp",y.Xpm({type:e,selectors:[["global-header-reminders"]],decls:1,vars:1,consts:[[4,"ngIf"],[1,"slds-dropdown-trigger","slds-dropdown-trigger_click","slds-m-right--xx-small","slds-p-right--x-small"],["system-title","LBL_NOTIFICATIONS",1,"slds-global-actions__notifications","slds-global-actions__item-action","slds-incoming-notification",3,"click"],["icon","reminder","size","x-small"],[1,"slds-notification-badge","slds-incoming-notification","slds-show-notification",2,"top","-5px","right","0px"],["class","slds-popover slds-popover_large slds-nubbin_top-right slds-is-absolute slds-grid slds-grid--vertical","role","dialog","style","top: 48px; max-height: calc(100vh - 55px);",3,"ngStyle",4,"ngIf"],["role","dialog",1,"slds-popover","slds-popover_large","slds-nubbin_top-right","slds-is-absolute","slds-grid","slds-grid--vertical",2,"top","48px","max-height","calc(100vh - 55px)",3,"ngStyle"],[1,"slds-grid","slds-border--bottom"],[1,"slds-popover__header","slds-grow","slds-grid","slds-grid--align-spread",2,"border-bottom","0"],[1,"slds-text-heading_small"],["label","LBL_CURRENT_REMINDERS"],["system-title","LBL_CLOSE",1,"slds-button","slds-button--icon","slds-float_right","slds-m-right--x-small",3,"click"],["icon","close"],[1,"slds-popover__body","slds-p-around_none","slds-grow","slds-grid","slds-grid--vertical",2,"min-height","0"],["class","slds-p-around--small",4,"ngIf"],[1,"slds-scrollable--y","slds-grow",2,"min-height","0"],["class","slds-global-header__notification spice-hover-display-children slds-is-relative",4,"ngFor","ngForOf"],[1,"slds-p-around--small"],["label","LBL_NO_ENTRIES"],[1,"slds-global-header__notification","spice-hover-display-children","slds-is-relative"],[1,"slds-grid","slds-p-around--xx-small","slds-grid--vertical-align-center",3,"system-model-provider"],["size","xx-small",3,"module"],["system-model-popover","",1,"slds-grow","slds-p-right--xx-small",3,"clicked"],[3,"date","displayTime"],[1,"slds-m-left--x-small","slds-button","slds-button--icon",3,"click"],["icon","clear"]],template:function(e,t){1&e&&y.YNc(0,qn,7,2,"div",0),2&e&&y.Q6J("ngIf",t.currentReminders.length>0)},dependencies:[n.sg,n.O5,n.PC,cs.g,Be.u,C.S,D.J,Fi.a,O.f,A._,k.r],encapsulation:2})),GlobalHeaderReminders})();const Yn=function(e,t,s){return{module:e,id:t,data:s}};function Dn(e,t){if(1&e){const e=y.EpF();y.TgZ(0,"div",7),y._UZ(1,"system-icon",8),y.TgZ(2,"div",9),y.NdJ("clicked",(function(){y.CHM(e);const t=y.oxw();return y.KtG(t.close())})),y._uU(3),y.qZA(),y.TgZ(4,"button",10),y.NdJ("click",(function(){const t=y.CHM(e).$implicit,s=y.oxw();return y.KtG(s.deleteSubscription(t))})),y._UZ(5,"system-button-icon",11),y.qZA()()}if(2&e){const e=t.$implicit;y.Q6J("system-model-provider",y.kEZ(3,Yn,e.bean_module,e.bean_id,e.data)),y.xp6(1),y.Q6J("module",e.bean_module),y.xp6(2),y.Oqu(e.data.summary_text)}}let Qn=(()=>{var e;class GlobalSubscriptionsManager{constructor(e){(0,i.Z)(this,"subscriptions",void 0),(0,i.Z)(this,"self",void 0),(0,i.Z)(this,"loading",!1),this.subscriptions=e}deleteSubscription(e){this.loading=!0,this.subscriptions.unsubscribeBean(e.bean_id,e.bean_module).subscribe((()=>{this.loading=!1,0==this.subscriptions.subscriptions.length&&this.close()}),(()=>{this.loading=!1}))}close(){this.self.destroy()}}return e=GlobalSubscriptionsManager,(0,i.Z)(GlobalSubscriptionsManager,"ɵfac",(function(t){return new(t||e)(y.Y36(Yi.J))})),(0,i.Z)(GlobalSubscriptionsManager,"ɵcmp",y.Xpm({type:e,selectors:[["global-subscriptions-manager"]],decls:8,vars:2,consts:[["size","small"],[3,"close"],["label","LBL_MANAGE_MODEL_SUBSCRIPTIONS"],["system-modal-content-grow","","margin","none",3,"system-overlay-loading-spinner"],["class","slds-p-around--x-small slds-grid slds-grid--vertical-align-center slds-border--bottom",3,"system-model-provider",4,"ngFor","ngForOf"],[1,"slds-button","slds-button--brand"],["label","LBL_CLOSE"],[1,"slds-p-around--x-small","slds-grid","slds-grid--vertical-align-center","slds-border--bottom",3,"system-model-provider"],["size","xx-small",3,"module"],["system-model-popover","",1,"slds-grow",3,"clicked"],[1,"slds-button","slds-button--icon",3,"click"],["icon","clear"]],template:function(e,t){1&e&&(y.TgZ(0,"system-modal",0)(1,"system-modal-header",1),y.NdJ("close",(function(){return t.close()})),y._UZ(2,"system-label",2),y.qZA(),y.TgZ(3,"system-modal-content",3),y.YNc(4,Dn,6,7,"div",4),y.qZA(),y.TgZ(5,"system-modal-footer")(6,"button",5),y._UZ(7,"system-label",6),y.qZA()()()),2&e&&(y.xp6(3),y.Q6J("system-overlay-loading-spinner",t.loading),y.xp6(1),y.Q6J("ngForOf",t.subscriptions.subscriptions))},dependencies:[n.sg,cs.g,Be.u,xe._,D.J,O.f,A._,we.j,Te.x,Oe.p,Ce.y],encapsulation:2})),GlobalSubscriptionsManager})();var Un=s(7579);let Rn=(()=>{var e;class OAuth2Service{constructor(e,t){(0,i.Z)(this,"renderer",void 0),(0,i.Z)(this,"http",void 0),(0,i.Z)(this,"config",void 0),this.renderer=e,this.http=t}codeFlowLogin(){const e=new Un.x;let t;const s=this.generateState(),i=this.generateLoginUrl(s),n=window.open(i,"SpiceCRM OAuth2 login",this.popupWindowRect());n?t=window.setInterval((()=>{n?.closed&&(l(),e.error("window closed"))}),500):e.error("window blocked");const o=this.renderer.listen("window","message",(t=>{if(l(),!t.data)return;const i=this.parseRedirectQueryString(t.data);i.error?e.error(i.error):i.state!==s?e.error("Invalid state"):i?(e.next(i.code),e.complete()):e.error("invalid redirect uri data")})),l=()=>{window.clearInterval(t),o(),n&&n.close()};return e.asObservable()}generateState(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";let t=new Uint8Array(40);window.crypto.getRandomValues(t),t=t.map((t=>e.charCodeAt(t%62)));const s=String.fromCharCode.apply(null,t);return btoa(s)}generateLoginUrl(e){const t=new URLSearchParams({state:e,response_type:"code",client_id:this.config.client_id,redirect_uri:this.config.redirect_uri,scope:this.config.scope});return`${this.config.login_url}?${t.toString()}`}popupWindowRect(){const e=window.screenLeft+(window.outerWidth-500)/2;return`width=500,height=600,top=${window.screenTop+(window.outerHeight-600)/2},left=${e}`}parseRedirectQueryString(e){const t=e.substring(1).split("&"),s={};return t.forEach((e=>{const t=e.split("=");s[t[0]]=decodeURIComponent(t[1])})),s}}return e=OAuth2Service,(0,i.Z)(OAuth2Service,"ɵfac",(function(t){return new(t||e)(y.LFG(y.Qsj),y.LFG(de.eN))})),(0,i.Z)(OAuth2Service,"ɵprov",y.Yz7({token:e,factory:e.ɵfac})),OAuth2Service})();function jn(e,t){if(1&e&&y._UZ(0,"img",2),2&e){const e=y.oxw();y.Q6J("src",e.service.icon,y.LSH)("alt",e.service.name)}}let Bn=(()=>{var e;class GlobalLoginOAuth2Button{constructor(e,t,s,n,o){(0,i.Z)(this,"http",void 0),(0,i.Z)(this,"oauth2Service",void 0),(0,i.Z)(this,"configurationService",void 0),(0,i.Z)(this,"parent",void 0),(0,i.Z)(this,"toast",void 0),(0,i.Z)(this,"authenticatedUser",void 0),(0,i.Z)(this,"visible",!1),(0,i.Z)(this,"disabled",!0),(0,i.Z)(this,"_service",void 0),this.http=e,this.oauth2Service=t,this.configurationService=s,this.parent=n,this.toast=o}get service(){return this._service}set service(e){e&&(this._service=e,this.initialize(e.config))}initialize(e){if(!(e?.client_id&&e.login_url&&e.userinfo_endpoint&&e.token_endpoint))return this.disabled=!0;this.visible=!0,this.oauth2Service.config={client_id:e.client_id,scope:e.scope,token_endpoint:e.token_endpoint,userinfo_endpoint:e.userinfo_endpoint,login_url:e.login_url,redirect_uri:e.redirect_uri,client_secret:e.client_secret},this.disabled=!1}signIn(e){e.preventDefault(),e.stopPropagation();const t=this.configurationService.getBackendUrl()+"/authentication/oauth2/accessToken";this.oauth2Service.codeFlowLogin().subscribe((e=>{this.http.post(t,{issuer:this.service.issuer,code:e}).subscribe((e=>{this.authenticatedUser?this.authenticatedUser==e.profile.email?this.parent.token.emit({issuer:this.service.issuer,tokenObject:e.tokenObject}):this.toast.sendToast("Wrong username","warning","usernames do not match, please relogin with the proper user"):this.parent.token.emit({issuer:this.service.issuer,tokenObject:e.tokenObject})}))}))}}return e=GlobalLoginOAuth2Button,(0,i.Z)(GlobalLoginOAuth2Button,"ɵfac",(function(t){return new(t||e)(y.Y36(de.eN),y.Y36(Rn),y.Y36(K.C),y.Y36(Ae.Q,1),y.Y36($.A))})),(0,i.Z)(GlobalLoginOAuth2Button,"ɵcmp",y.Xpm({type:e,selectors:[["global-login-oauth2-button"]],inputs:{authenticatedUser:"authenticatedUser",service:"service"},features:[y._Bn([Rn])],decls:3,vars:2,consts:[[1,"slds-button","slds-button_neutral","slds-size--1-of-1","slds-m-bottom--xx-small",3,"click"],["class","slds-m-right--x-small","style","height: 16px; width: 16px",3,"src","alt",4,"ngIf"],[1,"slds-m-right--x-small",2,"height","16px","width","16px",3,"src","alt"]],template:function(e,t){1&e&&(y.TgZ(0,"button",0),y.NdJ("click",(function(e){return t.signIn(e)})),y.YNc(1,jn,1,2,"img",1),y._uU(2),y.qZA()),2&e&&(y.xp6(1),y.Q6J("ngIf",!!t.service.icon),y.xp6(1),y.hij(" ",t.service.name,"\n"))},dependencies:[n.O5],encapsulation:2})),GlobalLoginOAuth2Button})();var Gn=s(8710);let Pn=(()=>{var e;class GlobalHeaderReloadModal{}return e=GlobalHeaderReloadModal,(0,i.Z)(GlobalHeaderReloadModal,"ɵfac",(function(t){return new(t||e)})),(0,i.Z)(GlobalHeaderReloadModal,"ɵcmp",y.Xpm({type:e,selectors:[["global-header-reload-modal"]],decls:5,vars:0,consts:[["size","prompt"],["system-modal-header-noclose",""],["label","LBL_RELOAD_CONFIGURATION"]],template:function(e,t){1&e&&(y.TgZ(0,"system-modal",0)(1,"system-modal-header",1),y._UZ(2,"system-label",2),y.qZA(),y.TgZ(3,"system-modal-content"),y._UZ(4,"system-loader-progress"),y.qZA()())},dependencies:[A._,Gn.e,we.j,Te.x,Ce.y],encapsulation:2})),GlobalHeaderReloadModal})();function Hn(e,t){if(1&e&&(y.TgZ(0,"div",4),y._uU(1),y.qZA()),2&e){const e=y.oxw();y.xp6(1),y.hij(" ",e.relatedRevisions.length," ")}}const zn=function(e){return{"slds-p-right--x-small":e}},Vn=function(e){return{"slds-hide":e}};let Kn=(()=>{var e;class GlobalHeaderDocumentRevisions{constructor(e,t,s,n,o,l,a,d,r,c,u){(0,i.Z)(this,"notificationService",void 0),(0,i.Z)(this,"elementRef",void 0),(0,i.Z)(this,"modal",void 0),(0,i.Z)(this,"viewContainerRef",void 0),(0,i.Z)(this,"model",void 0),(0,i.Z)(this,"subscription",void 0),(0,i.Z)(this,"cdRef",void 0),(0,i.Z)(this,"renderer",void 0),(0,i.Z)(this,"backend",void 0),(0,i.Z)(this,"session",void 0),(0,i.Z)(this,"injector",void 0),(0,i.Z)(this,"relatedRevisions",[]),this.notificationService=e,this.elementRef=t,this.modal=s,this.viewContainerRef=n,this.model=o,this.subscription=l,this.cdRef=a,this.renderer=d,this.backend=r,this.session=c,this.injector=u}ngOnInit(){this.model.module="DocumentRevisions",this.model.initialize(),this.loadRelated()}loadRelated(){this.backend.getRequest(`module/documentrevisions/${this.session.authData.userId}/relateduserrevisions`).subscribe((e=>{this.relatedRevisions=e}))}openModal(){this.modal.openModal("GlobalHeaderDocumentRevisionsModal",!0,this.injector).subscribe((e=>{e.instance.relatedRevisions=this.relatedRevisions}))}get hasSubscriptions(){return this.subscription.subscriptions.length>0}}return e=GlobalHeaderDocumentRevisions,(0,i.Z)(GlobalHeaderDocumentRevisions,"ɵfac",(function(t){return new(t||e)(y.Y36(gi.t),y.Y36(y.SBq),y.Y36(Y.o),y.Y36(y.s_b),y.Y36(S.o),y.Y36(Yi.J),y.Y36(y.sBO),y.Y36(y.Qsj),y.Y36(be.y),y.Y36(x.n),y.Y36(y.zs3))})),(0,i.Z)(GlobalHeaderDocumentRevisions,"ɵcmp",y.Xpm({type:e,selectors:[["global-header-document-revisions"]],features:[y._Bn([S.o])],decls:4,vars:7,consts:[[1,"slds-dropdown-trigger","slds-dropdown-trigger_click","slds-m-right--xx-small",3,"ngClass"],["system-title","LBL_NOTIFICATIONS",1,"slds-global-actions__notifications","slds-global-actions__item-action","slds-incoming-notification",3,"ngClass","click"],["icon","approval","size","x-small"],["style","top:-5px; right:0px;","class","slds-notification-badge slds-incoming-notification slds-show-notification",4,"ngIf"],[1,"slds-notification-badge","slds-incoming-notification","slds-show-notification",2,"top","-5px","right","0px"]],template:function(e,t){1&e&&(y.TgZ(0,"div",0)(1,"div",1),y.NdJ("click",(function(){return t.openModal()})),y._UZ(2,"system-utility-icon",2),y.qZA(),y.YNc(3,Hn,2,1,"div",3),y.qZA()),2&e&&(y.Q6J("ngClass",y.VKq(3,zn,t.notificationService.unreadCount>0)),y.xp6(1),y.Q6J("ngClass",y.VKq(5,Vn,0==t.relatedRevisions.length)),y.xp6(2),y.Q6J("ngIf",t.relatedRevisions.length>0))},dependencies:[n.mk,n.O5,C.S,k.r],encapsulation:2})),GlobalHeaderDocumentRevisions})();var $n=s(323);function Xn(e,t){if(1&e){const e=y.EpF();y.TgZ(0,"div",8)(1,"a",9),y.NdJ("click",(function(){const t=y.CHM(e).$implicit,s=y.oxw();return y.KtG(s.process(t.id))})),y.TgZ(2,"div",10)(3,"div",11)(4,"h3",12),y._UZ(5,"system-label",13),y._uU(6,": "),y._UZ(7,"system-label",14),y.qZA(),y.TgZ(8,"p",15),y._UZ(9,"system-label",16),y._uU(10,": "),y._UZ(11,"system-label",14),y.qZA(),y.TgZ(12,"p",15),y._UZ(13,"system-label",17),y._uU(14,": "),y._UZ(15,"system-label",14),y.qZA(),y.TgZ(16,"p",15),y._UZ(17,"system-label",18),y._uU(18,": "),y._UZ(19,"system-label",14),y.qZA()()()(),y.TgZ(20,"a",19),y.NdJ("click",(function(){const t=y.CHM(e).$implicit,s=y.oxw();return y.KtG(s.acceptance(t.id))})),y._UZ(21,"system-utility-icon",20),y.qZA()()}if(2&e){const e=t.$implicit;y.xp6(7),y.Q6J("label",e.document_name),y.xp6(4),y.Q6J("label",e.name),y.xp6(4),y.Q6J("label",e.revision),y.xp6(4),y.Q6J("label",e.date_entered)}}let Wn=(()=>{var e;class GlobalHeaderDocumentRevisionsModal{constructor(e,t,s,n,o,l,a){(0,i.Z)(this,"backend",void 0),(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"model",void 0),(0,i.Z)(this,"modal",void 0),(0,i.Z)(this,"modelattachments",void 0),(0,i.Z)(this,"session",void 0),(0,i.Z)(this,"toast",void 0),(0,i.Z)(this,"self",void 0),(0,i.Z)(this,"fieldset",""),(0,i.Z)(this,"relatedRevisions",void 0),(0,i.Z)(this,"componentconfig",void 0),this.backend=e,this.metadata=t,this.model=s,this.modal=n,this.modelattachments=o,this.session=l,this.toast=a,this.model.module="DocumentRevisions",this.model.initialize()}ngOnInit(){this.relatedRevisions;let e=this.metadata.getComponentConfig("GlobalHeaderDocumentRevisionsModal","DocumentRevisions");this.fieldset=e.fieldset}process(e){let t=new Un.x,s=this.relatedRevisions.find((t=>t.id==e));return this.backend.getRequest(`common/spiceattachments/module/${this.model.module}/${s.id}/byfield/file`).subscribe((e=>{t.next(e.file);let i=e.file_mime_type.toLowerCase().split("/");switch(i[0].trim()){case"image":this.modal.openModal("SystemImagePreviewModal").subscribe((t=>{t.instance.imgname=e.file_name,t.instance.imgtype=e.file_mime_type.toLowerCase(),t.instance.imgsrc="data:"+e.file_mime_type.toLowerCase()+";base64,"+e}));break;case"text":case"audio":case"video":this.modal.openModal("SystemObjectPreviewModal").subscribe((t=>{t.instance.name=e.file_name,t.instance.type=e.file_mime_type.toLowerCase(),t.instance.data=atob(e.file)}));break;case"application":if("pdf"===i[1])this.modal.openModal("SystemObjectPreviewModal").subscribe((t=>{t.instance.name=e.file_name,t.instance.type=e.file_mime_type.toLowerCase(),t.instance.data=atob(e.file)}));else this.modelattachments.downloadAttachmentForField(this.model.module,s.id,"file");break;default:this.modelattachments.downloadAttachmentForField(this.model.module,s.id,"file")}t.complete()}),(e=>{t.error(e),t.complete()})),t}acceptance(e){this.relatedRevisions.splice(this.relatedRevisions.findIndex((t=>t.id===e)),1);let t={userid:this.session.authData.userId};this.backend.postRequest(`module/documentrevisions/${e}/revisionaccepted`,"",t),this.toast.sendToast("revision accepted")}closeModal(){this.self.destroy()}}return e=GlobalHeaderDocumentRevisionsModal,(0,i.Z)(GlobalHeaderDocumentRevisionsModal,"ɵfac",(function(t){return new(t||e)(y.Y36(be.y),y.Y36(w.Pu),y.Y36(S.o),y.Y36(Y.o),y.Y36($n.H),y.Y36(x.n),y.Y36($.A))})),(0,i.Z)(GlobalHeaderDocumentRevisionsModal,"ɵcmp",y.Xpm({type:e,selectors:[["global-header-document-revisions-modal"]],inputs:{relatedRevisions:"relatedRevisions"},features:[y._Bn([S.o,$n.H])],decls:10,vars:2,consts:[[3,"close"],["label","LBL_UNAPPROVED_REVISIONS"],[1,"slds-scrollable_none",3,"system-modal-content-grow"],[1,"slds-scrollable--y"],[1,"slds-scrollable--y","slds-height_full"],["class","slds-cell slds-grid",4,"ngFor","ngForOf"],[1,"slds-button","slds-button--neutral",3,"click"],["label","LBL_CLOSE"],[1,"slds-cell","slds-grid"],["href","javascript:void(0);",1,"slds-box_link","slds-media","slds-size_11-of-12",3,"click"],[1,"slds-media__body"],[1,"slds-welcome-mat__tile-body"],[1,"slds-welcome-mat__tile-title"],["label","LBL_DOCUMENT_NAME"],[3,"label"],[1,"slds-welcome-mat__tile-description"],["label","LBL_REVISION_NAME"],["label","LBL_REVISION_NUMBER"],["label","LBL_DATE"],["href","javascript:void(0);",1,"slds-box_link","slds-media","slds-size_1-of-12",3,"click"],["icon","check","size","medium",1,"slds-align--absolute-center"]],template:function(e,t){1&e&&(y.TgZ(0,"system-modal")(1,"system-modal-header",0),y.NdJ("close",(function(){return t.closeModal()})),y._UZ(2,"system-label",1),y.qZA(),y.TgZ(3,"system-modal-content",2)(4,"div",3)(5,"div",4),y.YNc(6,Xn,22,4,"div",5),y.qZA()()(),y.TgZ(7,"system-modal-footer")(8,"button",6),y.NdJ("click",(function(){return t.closeModal()})),y._UZ(9,"system-label",7),y.qZA()()()),2&e&&(y.xp6(3),y.Q6J("system-modal-content-grow",!1),y.xp6(3),y.Q6J("ngForOf",t.relatedRevisions))},dependencies:[n.sg,A._,we.j,Te.x,Oe.p,Ce.y,k.r],encapsulation:2})),GlobalHeaderDocumentRevisionsModal})(),eo=(()=>{var e;class GlobalComponents{}return e=GlobalComponents,(0,i.Z)(GlobalComponents,"ɵfac",(function(t){return new(t||e)})),(0,i.Z)(GlobalComponents,"ɵmod",y.oAB({type:e})),(0,i.Z)(GlobalComponents,"ɵinj",y.cJS({imports:[n.ez,o.u5,a.ObjectFields,l.o,r.SystemComponents,d.ObjectComponents]})),GlobalComponents})();("undefined"==typeof ngJitMode||ngJitMode)&&y.kYT(eo,{declarations:[c.M,Ps.T,Hs.c,u.e,h.f,m.e,g.z,p.o,f.u,b.B,v.S,Z.I,M,N,B,P,z,te,Pn,En,se.T,Ye.q,De.i,at,Qe.r,rt,ct,ut,ht,dt,gt,pt.n,ne.s,oe.N,le.X,Se,Ee,ie,ae.r,fe,ls.x,as.Y,ds.V,St.Q,Qt,qt,ft.y,bt.U,wt,Lt,It.G,kt.U,Mt,gs,Gs,Ss,Ys,Ts,_e,oi,di,hi,Ut.s,ss.O,Xt.Q,Wt.L,es.y,ts.K,Rt.P,$t,Ht,zt,os._,is.T,ns._,mi.s,ye.p,cn,Zi,Ei,Ti,Ii,Ni,Ln,Mn,Qn,Ae.Q,Bn,Kn,Wn],imports:[n.ez,o.u5,a.ObjectFields,l.o,r.SystemComponents,d.ObjectComponents],exports:[c.M,Ps.T,u.e,se.T,ft.y,bt.U,It.G,Mt,f.u,Wn]}),y.B6R(Ae.Q,[n.sg,Bn],[])},4338:(e,t,s)=>{"use strict";s.d(t,{s:()=>d});var i=s(1180),n=s(8427),o=s(2242),l=s(6625),a=s(3348);let d=(()=>{var e;class SpiceInstaller{constructor(e,t,s){(0,i.Z)(this,"spiceinstaller",void 0),(0,i.Z)(this,"configuration",void 0),(0,i.Z)(this,"router",void 0),this.spiceinstaller=e,this.configuration=t,this.router=s,this.configuration.enableinstall||s.navigate([""])}}return e=SpiceInstaller,(0,i.Z)(SpiceInstaller,"ɵfac",(function(t){return new(t||e)(o.Y36(n.f),o.Y36(l.C),o.Y36(a.F0))})),(0,i.Z)(SpiceInstaller,"ɵcmp",o.Xpm({type:e,selectors:[["spice-installer"]],features:[o._Bn([n.f])],decls:5,vars:0,consts:[["system-to-bottom-noscroll","","system-to-bottom-noscroll","",1,"slds-grid"],[1,"slds-border--right","slds-size--1-of-6","slds-p-horizontal--small"],[1,"slds-size--5-of-6","slds-m-vertical--medium"]],template:function(e,t){1&e&&(o.TgZ(0,"div",0)(1,"div",1),o._UZ(2,"spice-installer-progress-indicator"),o.qZA(),o.TgZ(3,"div",2),o._UZ(4,"spice-installer-detail-container"),o.qZA()())},encapsulation:2})),SpiceInstaller})()},8427:(e,t,s)=>{"use strict";s.d(t,{f:()=>l});var i=s(1180),n=s(7579),o=s(2242);let l=(()=>{var e;class spiceinstaller{constructor(){let e;(0,i.Z)(this,"steps",[]),(0,i.Z)(this,"systemid","000"),(0,i.Z)(this,"systemname","SpiceCRM"),(0,i.Z)(this,"systemurl",window.location.href.split("#")[0]+"api"),(0,i.Z)(this,"systemproxy",0),(0,i.Z)(this,"systemdevmode",!1),(0,i.Z)(this,"systemloginprogressbar",0),(0,i.Z)(this,"systemloginsidebar",0),(0,i.Z)(this,"systemallowforgotpass",0),(0,i.Z)(this,"frontendUrl",window.location.href.split("#")[0]),(0,i.Z)(this,"rpPassword",""),(0,i.Z)(this,"dbdrivers",[]),(0,i.Z)(this,"db_host_name",""),(0,i.Z)(this,"db_host_instance",""),(0,i.Z)(this,"db_user_name",""),(0,i.Z)(this,"db_password",""),(0,i.Z)(this,"db_name",""),(0,i.Z)(this,"db_type",""),(0,i.Z)(this,"db_port",""),(0,i.Z)(this,"db_manager",""),(0,i.Z)(this,"persistent",!0),(0,i.Z)(this,"autofree",!1),(0,i.Z)(this,"debug",0),(0,i.Z)(this,"ssl",!1),(0,i.Z)(this,"collation",""),(0,i.Z)(this,"lc_collate","en_US.UTF-8"),(0,i.Z)(this,"lc_ctype","en_US.UTF-8"),(0,i.Z)(this,"db_schema","SpiceCRM"),(0,i.Z)(this,"server",""),(0,i.Z)(this,"port","9200"),(0,i.Z)(this,"prefix",""),(0,i.Z)(this,"transferProtocol","http"),(0,i.Z)(this,"elasticUser",""),(0,i.Z)(this,"elasticpassword",""),(0,i.Z)(this,"elastichttps",!1),(0,i.Z)(this,"elasticSSLVerify",!1),(0,i.Z)(this,"username","admin"),(0,i.Z)(this,"password",""),(0,i.Z)(this,"firstname",""),(0,i.Z)(this,"surname","Administrator"),(0,i.Z)(this,"email",""),(0,i.Z)(this,"language",{language_code:"en_us",language_name:"English (US)"}),(0,i.Z)(this,"configObject",{}),(0,i.Z)(this,"selectedStep",void 0),(0,i.Z)(this,"jumpSubject",new n.x),(0,i.Z)(this,"nameFormats",{"s f l":"Mr. David Livingstone","f l":"David Livingstone","s l":"Mr. Livingstone","l, s f":"Livingstone, Mr. David","l, f":"Livingstone, David","s l, f":"Mr. Livingstone, David","l s f":"Livingstone Mr. David","l f s":"Livingstone David Mr."}),this.configObject={backendconfig:{},database:{},dboptions:{},fts:{},credentials:{},preferences:{},language:""},this.steps=[{id:"setbackend",name:"Set Backend",completed:!1},{id:"systemcheck",name:"System Requirements",completed:!1},{id:"licence",name:"Licence",completed:!1},{id:"database",name:"Database",completed:!1},{id:"fts",name:"FTS",completed:!1},{id:"credentials",name:"Credentials",completed:!1},{id:"preferences",name:"Output & Export",completed:!1},{id:"review",name:"Review & Install",completed:!1}],this.selectedStep=this.steps[0],this.steps.forEach(((t,s)=>{t.pos=s,t.prev=e||void 0,t.prev&&(t.prev.next=t),e=t}))}keyToLabel(e){let t=e.charAt(0).toUpperCase()+e.slice(1);return e.includes("dir")&&(t=t.replace("dir","directory")),e.includes("_")&&(t=t.split("_").join(" ")),e.match(/(?=[A-Z])/)&&(t=t.split(/(?=[A-Z])/).join(" ")),e.includes("db")&&(t=t.replace("Db","Database")),t}jump(e){e&&(this.selectedStep=e)}}return e=spiceinstaller,(0,i.Z)(spiceinstaller,"ɵfac",(function(t){return new(t||e)})),(0,i.Z)(spiceinstaller,"ɵprov",o.Yz7({token:e,factory:e.ɵfac})),spiceinstaller})()},2956:(e,t,s)=>{"use strict";s.r(t),s.d(t,{SpiceInstallerModule:()=>ze});var i=s(1180),n=s(4755),o=s(5030),l=s(4357),a=s(8427),d=s(3735),r=s(4338),c=s(2242);function u(e,t){1&e&&(c.TgZ(0,"span",10),c.O4$(),c.TgZ(1,"svg",11),c._UZ(2,"use",12),c.qZA(),c.kcU(),c.TgZ(3,"span",13),c._uU(4,"Complete"),c.qZA()())}function h(e,t){1&e&&c._UZ(0,"div",14)}function m(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"a",15),c.NdJ("click",(function(){c.CHM(e);const t=c.oxw().$implicit,s=c.oxw();return c.KtG(s.jump(t))})),c._uU(1),c.qZA()}if(2&e){const e=c.oxw().$implicit;c.xp6(1),c.Oqu(e.name)}}function g(e,t){if(1&e&&c._uU(0),2&e){const e=c.oxw().$implicit;c.Oqu(e.name)}}const p=function(e,t){return{"slds-is-active":e,"slds-is-completed":t}};function f(e,t){if(1&e&&(c.TgZ(0,"li",4),c.YNc(1,u,5,0,"span",5),c.YNc(2,h,1,0,"ng-template",null,6,c.W1O),c.TgZ(4,"div",7),c.YNc(5,m,2,1,"a",8),c.YNc(6,g,1,1,"ng-template",null,9,c.W1O),c.qZA()()),2&e){const e=t.$implicit,s=c.MAs(3),i=c.MAs(7),n=c.oxw();c.Q6J("ngClass",c.WLB(5,p,n.isCurrentStep(e),e.completed)),c.xp6(1),c.Q6J("ngIf",e.completed&&e!=n.spiceinstaller.selectedStep)("ngIfElse",s),c.xp6(4),c.Q6J("ngIf",(e.completed||(null==e.prev?null:e.prev.completed))&&!n.isCurrentStep(e))("ngIfElse",i)}}let b=(()=>{var e;class SpiceInstallerProgressIndicator{constructor(e){(0,i.Z)(this,"spiceinstaller",void 0),this.spiceinstaller=e}jump(e){e!==this.spiceinstaller.selectedStep&&(!this.spiceinstaller.selectedStep.completed&&e.pos>this.spiceinstaller.selectedStep.pos||this.spiceinstaller.jumpSubject.next({from:this.spiceinstaller.selectedStep,to:e}))}isCurrentStep(e){return e===this.spiceinstaller.selectedStep}}return e=SpiceInstallerProgressIndicator,(0,i.Z)(SpiceInstallerProgressIndicator,"ɵfac",(function(t){return new(t||e)(c.Y36(a.f))})),(0,i.Z)(SpiceInstallerProgressIndicator,"ɵcmp",c.Xpm({type:e,selectors:[["spice-installer-progress-indicator"]],decls:4,vars:1,consts:[[1,"slds-progress","slds-progress_vertical","slds-align_absolute-center","slds-p-horizontal--large","slds-m-vertical--x-small"],[1,"slds-progress__list"],["class","slds-progress__item",3,"ngClass",4,"ngFor","ngForOf"],["aria-valuemin","0","aria-valuemax","100","aria-valuenow","100","role","progressbar"],[1,"slds-progress__item",3,"ngClass"],["class","slds-icon_container slds-icon-utility-success slds-progress__marker slds-progress__marker_icon","title","Complete",4,"ngIf","ngIfElse"],["notCompleted",""],[1,"slds-progress__item_content","slds-grid","slds-grid_align-spread"],["href","javascript:void(0)",3,"click",4,"ngIf","ngIfElse"],["noLink",""],["title","Complete",1,"slds-icon_container","slds-icon-utility-success","slds-progress__marker","slds-progress__marker_icon"],["aria-hidden","true",1,"slds-icon","slds-icon_xx-small"],[0,"xlink","href","./vendor/sldassets/icons/utility-sprite/svg/symbols.svg#success"],[1,"slds-assistive-text"],[1,"slds-progress__marker"],["href","javascript:void(0)",3,"click"]],template:function(e,t){1&e&&(c.TgZ(0,"div",0)(1,"ol",1),c.YNc(2,f,8,8,"li",2),c.qZA(),c._UZ(3,"div",3),c.qZA()),2&e&&(c.xp6(2),c.Q6J("ngForOf",t.spiceinstaller.steps))},dependencies:[n.mk,n.sg,n.O5],encapsulation:2})),SpiceInstallerProgressIndicator})();var v=s(2294),Z=s(3278),_=s(3144),y=s(3348),x=s(6625),w=s(4505),T=s(8280);function C(e,t){1&e&&(c.TgZ(0,"div",15),c._uU(1,"Input required."),c.qZA())}const A=function(e){return{"slds-has-error":e}},k=function(e){return{"slds-hide":e}};let L=(()=>{var e;class SpiceInstallerSetBackEnd{constructor(e,t,s,n,o){(0,i.Z)(this,"toast",void 0),(0,i.Z)(this,"http",void 0),(0,i.Z)(this,"router",void 0),(0,i.Z)(this,"configurationService",void 0),(0,i.Z)(this,"spiceinstaller",void 0),(0,i.Z)(this,"selfStep",void 0),(0,i.Z)(this,"checking",!1),(0,i.Z)(this,"apiurl",""),(0,i.Z)(this,"apiFound",!1),(0,i.Z)(this,"systemNameCondition",!0),this.toast=e,this.http=t,this.router=s,this.configurationService=n,this.spiceinstaller=o,this.spiceinstaller.jumpSubject.subscribe((e=>{e.to&&e.from===this.selfStep&&(this.selfStep.completed||e.to.pos<this.selfStep.pos||this.tryComplete())&&this.spiceinstaller.jump(e.to)}))}ngOnInit(){let e=window.location.href;this.apiurl=e.replace("#/install","api")}tryComplete(){return this.systemNameCondition=this.spiceinstaller.systemname?.length>0,!!this.systemNameCondition&&(this.spiceinstaller.systemurl=this.apiurl,this.spiceinstaller.configObject.backendconfig={backendUrl:this.spiceinstaller.systemurl,frontendUrl:this.spiceinstaller.frontendUrl},this.selfStep.completed=!0,!0)}}return e=SpiceInstallerSetBackEnd,(0,i.Z)(SpiceInstallerSetBackEnd,"ɵfac",(function(t){return new(t||e)(c.Y36(Z.A),c.Y36(_.eN),c.Y36(y.F0),c.Y36(x.C),c.Y36(a.f))})),(0,i.Z)(SpiceInstallerSetBackEnd,"ɵcmp",c.Xpm({type:e,selectors:[["spice-installer-set-backend"]],inputs:{selfStep:"selfStep"},decls:41,vars:16,consts:[[1,"slds-m-horizontal--medium"],[1,"slds-text-heading--medium","slds-m-bottom_medium"],[1,"slds-text-body--regular","slds-p-bottom--xx-small"],[1,"slds-form-element","slds-p-vertical--xx-small",3,"ngClass"],[1,"slds-form-element__label"],[1,"slds-required"],[1,"slds-form-element__control"],["type","text","system-trim-input","blur",1,"slds-input",3,"disabled","ngModel","ngModelChange","change"],["class","slds-form-element__help",4,"ngIf"],[1,"slds-select_container"],[1,"slds-select",3,"disabled","ngModel","ngModelChange"],["value","1"],["value","0"],[1,"slds-p-vertical--small","slds-text-align--right"],[1,"slds-button","slds-button--brand",3,"click"],[1,"slds-form-element__help"]],template:function(e,t){1&e&&(c.TgZ(0,"div",0)(1,"h2",1)(2,"div",2),c._uU(3,"Welcome to SpiceCRM"),c._UZ(4,"br"),c.qZA(),c._uU(5," Set Backend "),c.qZA(),c.TgZ(6,"div",3)(7,"label",4)(8,"abbr",5),c._uU(9,"*"),c.qZA(),c._uU(10,"Name"),c.qZA(),c.TgZ(11,"div",6)(12,"input",7),c.NdJ("ngModelChange",(function(e){return t.spiceinstaller.systemname=e}))("change",(function(){return t.selfStep.completed=!1})),c.qZA(),c.YNc(13,C,2,0,"div",8),c.qZA()(),c.TgZ(14,"div",3)(15,"label",4)(16,"abbr",5),c._uU(17,"*"),c.qZA(),c._uU(18,"Show Forgot Password on Login Screen"),c.qZA(),c.TgZ(19,"div",6)(20,"div",9)(21,"select",10),c.NdJ("ngModelChange",(function(e){return t.spiceinstaller.systemallowforgotpass=e})),c.TgZ(22,"option",11),c._uU(23,"Yes"),c.qZA(),c.TgZ(24,"option",12),c._uU(25,"No"),c.qZA()()()()(),c.TgZ(26,"div",3)(27,"label",4)(28,"abbr",5),c._uU(29,"*"),c.qZA(),c._uU(30,"Show LoginSidebar"),c.qZA(),c.TgZ(31,"div",6)(32,"div",9)(33,"select",10),c.NdJ("ngModelChange",(function(e){return t.spiceinstaller.systemloginsidebar=e})),c.TgZ(34,"option",12),c._uU(35,"No"),c.qZA(),c.TgZ(36,"option",11),c._uU(37,"Yes"),c.qZA()()()()(),c.TgZ(38,"div",13)(39,"button",14),c.NdJ("click",(function(){return t.spiceinstaller.jumpSubject.next({from:t.selfStep,to:t.selfStep.next})})),c._uU(40,"next"),c.qZA()()()),2&e&&(c.xp6(6),c.Q6J("ngClass",c.VKq(10,A,!t.systemNameCondition)),c.xp6(6),c.Q6J("disabled",t.checking)("ngModel",t.spiceinstaller.systemname),c.xp6(1),c.Q6J("ngIf",!t.systemNameCondition),c.xp6(1),c.Q6J("ngClass",c.VKq(12,k,t.apiFound)),c.xp6(7),c.Q6J("disabled",t.checking)("ngModel",t.spiceinstaller.systemallowforgotpass),c.xp6(5),c.Q6J("ngClass",c.VKq(14,k,t.apiFound)),c.xp6(7),c.Q6J("disabled",t.checking)("ngModel",t.spiceinstaller.systemloginsidebar))},dependencies:[n.mk,n.O5,o.YN,o.Kr,o.Fj,o.EJ,o.JJ,o.On,T.t],encapsulation:2})),SpiceInstallerSetBackEnd})();var I=s(4021),M=s(8859);const S=function(e){return{"slds-theme--error":e}};function J(e,t){if(1&e&&(c.TgZ(0,"tr",8)(1,"td")(2,"div",9),c._UZ(3,"system-utility-icon",10),c.qZA()(),c.TgZ(4,"td")(5,"div",9),c._uU(6),c.qZA()()()),2&e){const e=t.$implicit,s=c.oxw();c.Q6J("ngClass",c.VKq(4,S,!e.value)),c.xp6(3),c.Q6J("size","x-small")("icon",e.value?"check":"error"),c.xp6(3),c.hij(" ",s.spiceinstaller.keyToLabel(e.key),"")}}let O=(()=>{var e;class SpiceInstallerSystemCheck{constructor(e,t,s){(0,i.Z)(this,"toast",void 0),(0,i.Z)(this,"http",void 0),(0,i.Z)(this,"spiceinstaller",void 0),(0,i.Z)(this,"selfStep",void 0),(0,i.Z)(this,"loading",!1),(0,i.Z)(this,"requirements",[]),this.toast=e,this.http=t,this.spiceinstaller=s,this.spiceinstaller.jumpSubject.subscribe((e=>{e.to&&e.from===this.selfStep&&(this.selfStep.completed||e.to?.pos<this.selfStep.pos)&&this.spiceinstaller.jump(e.to)})),this.checkSystem()}get checkFailed(){for(let e of Object.values(this.requirements))if(!e)return!0;return!1}checkSystem(){this.loading=!0,this.http.get(`${this.spiceinstaller.systemurl}/install/check`).subscribe((e=>{this.loading=!1;let t=e;this.requirements=t.requirements,t.success?(this.selfStep.completed=!0,this.spiceinstaller.dbdrivers=this.requirements.dbdrivers):this.toast.sendToast("error, missing requirements","error")}),(e=>{if(this.loading=!1,500===e.status)this.toast.sendAlert(e.message,"error")}))}}return e=SpiceInstallerSystemCheck,(0,i.Z)(SpiceInstallerSystemCheck,"ɵfac",(function(t){return new(t||e)(c.Y36(Z.A),c.Y36(_.eN),c.Y36(a.f))})),(0,i.Z)(SpiceInstallerSystemCheck,"ɵcmp",c.Xpm({type:e,selectors:[["spice-installer-systemcheck"]],inputs:{selfStep:"selfStep"},decls:20,vars:5,consts:[[3,"system-overlay-loading-spinner"],[1,"slds-text-heading--medium","slds-m-bottom_medium","slds-m-horizontal_medium"],[1,"slds-table","slds-table_cell-buffer","slds-table_bordered","slds-table_col-bordered"],[3,"ngClass",4,"ngFor","ngForOf"],[1,"slds-text-align--right","slds-m-top--medium","slds-m-horizontal--medium"],[1,"slds-button","slds-button--neutral","slds-col_bump-left",3,"click"],[1,"slds-button","slds-m-right--xx-small","slds-button--neutral",3,"click"],[1,"slds-button","slds-button--brand",3,"disabled","click"],[3,"ngClass"],[1,"slds-truncate"],[3,"size","icon"]],template:function(e,t){1&e&&(c.TgZ(0,"div",0)(1,"h2",1),c._uU(2," System Requirements "),c.qZA(),c.TgZ(3,"table",2)(4,"thead")(5,"tr")(6,"th"),c._uU(7,"Status"),c.qZA(),c.TgZ(8,"th"),c._uU(9,"Extension"),c.qZA()()(),c.TgZ(10,"tbody"),c.YNc(11,J,7,6,"tr",3),c.ALo(12,"keyvalue"),c.qZA()(),c.TgZ(13,"div",4)(14,"button",5),c.NdJ("click",(function(){return t.spiceinstaller.jumpSubject.next({from:t.selfStep,to:t.selfStep.prev})})),c._uU(15,"back"),c.qZA(),c.TgZ(16,"button",6),c.NdJ("click",(function(){return t.checkSystem()})),c._uU(17,"recheck"),c.qZA(),c.TgZ(18,"button",7),c.NdJ("click",(function(){return t.spiceinstaller.jumpSubject.next({from:t.selfStep,to:t.selfStep.next})})),c._uU(19,"next"),c.qZA()()()),2&e&&(c.Q6J("system-overlay-loading-spinner",t.loading),c.xp6(11),c.Q6J("ngForOf",c.lcZ(12,3,t.requirements)),c.xp6(7),c.Q6J("disabled",t.checkFailed))},dependencies:[n.mk,n.sg,I._,M.r,n.Nd],encapsulation:2})),SpiceInstallerSystemCheck})();var N=s(1058),F=s(7514);let q=(()=>{var e;class SpiceInstallerLicence{constructor(e){(0,i.Z)(this,"spiceinstaller",void 0),(0,i.Z)(this,"selfStep",void 0),(0,i.Z)(this,"year",new Date),(0,i.Z)(this,"author",""),this.spiceinstaller=e,this.author="SpiceCRM",this.year=this.year.getFullYear(),this.spiceinstaller.jumpSubject.subscribe((e=>{e.to&&e.from===this.selfStep&&(this.selfStep.completed||e.to?.pos<this.selfStep.pos)&&this.spiceinstaller.jump(e.to)}))}}return e=SpiceInstallerLicence,(0,i.Z)(SpiceInstallerLicence,"ɵfac",(function(t){return new(t||e)(c.Y36(a.f))})),(0,i.Z)(SpiceInstallerLicence,"ɵcmp",c.Xpm({type:e,selectors:[["spice-installer-licence"]],inputs:{selfStep:"selfStep"},decls:257,vars:4,consts:[[1,"slds-text-heading--medium","slds-p-bottom_medium","slds-border--bottom","slds-p-horizontal--medium"],["system-to-bottom",""],[1,"slds-p-around--medium","slds-theme--default"],["href","http://fsf.org/"],[1,"slds-text-longform"],["href","http://www.gnu.org/licenses/"],[1,"slds-grid","slds-p-around--medium","slds-border--top"],[3,"ngModel","ngModelChange"],[1,"slds-button","slds-button--neutral","slds-col_bump-left",3,"click"],[1,"slds-button","slds-button--brand",3,"disabled","click"]],template:function(e,t){1&e&&(c.TgZ(0,"h2",0),c._uU(1," License Agreement\n"),c.qZA(),c.TgZ(2,"div",1)(3,"div",2)(4,"p"),c._uU(5,"GNU AFFERO GENERAL PUBLIC LICENSE Version 3, 19 November 2007"),c.qZA(),c.TgZ(6,"p"),c._uU(7," Copyright (C) 2007 Free Software Foundation, Inc. "),c.TgZ(8,"a",3),c._uU(9,"fsf.org"),c.qZA(),c._uU(10," Everyone is permitted to copy and distribute verbatim copies of this license document, but changing it is not allowed."),c.qZA(),c.TgZ(11,"p"),c._uU(12," Preamble"),c.qZA(),c.TgZ(13,"p"),c._uU(14," The GNU Affero General Public License is a free, copyleft license for software and other kinds of works, specifically designed to ensure cooperation with the community in the case of network server software."),c.qZA(),c.TgZ(15,"p"),c._uU(16," The licenses for most software and other practical works are designed to take away your freedom to share and change the works. By contrast, our General Public Licenses are intended to guarantee your freedom to share and change all versions of a program--to make sure it remains free software for all its users."),c.qZA(),c.TgZ(17,"p"),c._uU(18," When we speak of free software, we are referring to freedom, not price. Our General Public Licenses are designed to make sure that you have the freedom to distribute copies of free software (and charge for them if you wish), that you receive source code or can get it if you want it, that you can change the software or use pieces of it in new free programs, and that you know you can do these things."),c.qZA(),c.TgZ(19,"div",4)(20,"p"),c._uU(21," Developers that use our General Public Licenses protect your rights with two steps: (1) assert copyright on the software, and (2) offer you this License which gives you legal permission to copy, distribute and/or modify the software."),c.qZA(),c.TgZ(22,"p"),c._uU(23," A secondary benefit of defending all users' freedom is that improvements made in alternate versions of the program, if they receive widespread use, become available for other developers to incorporate. Many developers of free software are heartened and encouraged by the resulting cooperation. However, in the case of software used on network servers, this result may fail to come about. The GNU General Public License permits making a modified version and letting the public access it on a server without ever releasing its source code to the public."),c.qZA(),c.TgZ(24,"p"),c._uU(25," The GNU Affero General Public License is designed specifically to ensure that, in such cases, the modified source code becomes available to the community. It requires the operator of a network server to provide the source code of the modified version running there to the users of that server. Therefore, public use of a modified version, on a publicly accessible server, gives the public access to the source code of the modified version."),c.qZA(),c.TgZ(26,"p"),c._uU(27," An older license, called the Affero General Public License and published by Affero, was designed to accomplish similar goals. This is a different license, not a version of the Affero GPL, but Affero has released a new version of the Affero GPL which permits relicensing under this license."),c.qZA(),c.TgZ(28,"p"),c._uU(29," The precise terms and conditions for copying, distribution and modification follow."),c.qZA(),c.TgZ(30,"p"),c._uU(31," TERMS AND CONDITIONS"),c.qZA(),c.TgZ(32,"p"),c._uU(33," 0. Definitions."),c.qZA(),c.TgZ(34,"p"),c._uU(35,' "This License" refers to version 3 of the GNU Affero General Public License.'),c.qZA(),c.TgZ(36,"p"),c._uU(37,' "Copyright" also means copyright-like laws that apply to other kinds of works, such as semiconductor masks.'),c.qZA(),c.TgZ(38,"p"),c._uU(39,' "The Program" refers to any copyrightable work licensed under this License. Each licensee is addressed as "you". "Licensees" and "recipients" may be individuals or organizations.'),c.qZA(),c.TgZ(40,"p"),c._uU(41,' To "modify" a work means to copy from or adapt all or part of the work in a fashion requiring copyright permission, other than the making of an exact copy. The resulting work is called a "modified version" of the earlier work or a work "based on" the earlier work.'),c.qZA(),c.TgZ(42,"p"),c._uU(43,' A "covered work" means either the unmodified Program or a work based on the Program.'),c.qZA(),c.TgZ(44,"p"),c._uU(45,' To "propagate" a work means to do anything with it that, without permission, would make you directly or secondarily liable for infringement under applicable copyright law, except executing it on a computer or modifying a public copy. Propagation includes copying, distribution (with or without modification), making available to the public, and in some countries other activities as well.'),c.qZA(),c.TgZ(46,"p"),c._uU(47,' To "convey" a work means any kind of propagation that enables other parties to make or receive copies. Mere interaction with a user through a computer network, with no transfer of a copy, is not conveying.'),c.qZA(),c.TgZ(48,"p"),c._uU(49,' An interactive user interface displays "Appropriate Legal Notices" to the extent that it includes a convenient and prominently visible feature that (1) displays an appropriate copyright notice, and (2) tells the user that there is no warranty for the work (except to the extent that warranties are provided), that licensees may convey the work under this License, and how to view a copy of this License. If the interface presents a list of user commands or options, such as a menu, a prominent item in the list meets this criterion.'),c.qZA(),c.TgZ(50,"p"),c._uU(51," 1. Source Code."),c.qZA(),c.TgZ(52,"p"),c._uU(53,' The "source code" for a work means the preferred form of the work for making modifications to it. "Object code" means any non-source form of a work.'),c.qZA(),c.TgZ(54,"p"),c._uU(55,' A "Standard Interface" means an interface that either is an official standard defined by a recognized standards body, or, in the case of interfaces specified for a particular programming language, one that is widely used among developers working in that language.'),c.qZA(),c.TgZ(56,"p"),c._uU(57,' The "System Libraries" of an executable work include anything, other than the work as a whole, that (a) is included in the normal form of packaging a Major Component, but which is not part of that Major Component, and (b) serves only to enable use of the work with that Major Component, or to implement a Standard Interface for which an implementation is available to the public in source code form. A "Major Component", in this context, means a major essential component (kernel, window system, and so on) of the specific operating system (if any) on which the executable work runs, or a compiler used to produce the work, or an object code interpreter used to run it.'),c.qZA(),c.TgZ(58,"p"),c._uU(59,' The "Corresponding Source" for a work in object code form means all the source code needed to generate, install, and (for an executable work) run the object code and to modify the work, including scripts to control those activities. However, it does not include the work\'s System Libraries, or general-purpose tools or generally available free programs which are used unmodified in performing those activities but which are not part of the work. For example, Corresponding Source includes interface definition files associated with source files for the work, and the source code for shared libraries and dynamically linked subprograms that the work is specifically designed to require, such as by intimate data communication or control flow between those subprograms and other parts of the work.'),c.qZA(),c.TgZ(60,"p"),c._uU(61," The Corresponding Source need not include anything that users can regenerate automatically from other parts of the Corresponding Source."),c.qZA(),c.TgZ(62,"p"),c._uU(63," The Corresponding Source for a work in source code form is that same work."),c.qZA(),c.TgZ(64,"p"),c._uU(65," 2. Basic Permissions."),c.qZA(),c.TgZ(66,"p"),c._uU(67," All rights granted under this License are granted for the term of copyright on the Program, and are irrevocable provided the stated conditions are met. This License explicitly affirms your unlimited permission to run the unmodified Program. The output from running a covered work is covered by this License only if the output, given its content, constitutes a covered work. This License acknowledges your rights of fair use or other equivalent, as provided by copyright law."),c.qZA(),c.TgZ(68,"p"),c._uU(69," You may make, run and propagate covered works that you do not convey, without conditions so long as your license otherwise remains in force. You may convey covered works to others for the sole purpose of having them make modifications exclusively for you, or provide you with facilities for running those works, provided that you comply with the terms of this License in conveying all material for which you do not control copyright. Those thus making or running the covered works for you must do so exclusively on your behalf, under your direction and control, on terms that prohibit them from making any copies of your copyrighted material outside their relationship with you."),c.qZA(),c.TgZ(70,"p"),c._uU(71," Conveying under any other circumstances is permitted solely under the conditions stated below. Sublicensing is not allowed; section 10 makes it unnecessary."),c.qZA(),c.TgZ(72,"p"),c._uU(73," 3. Protecting Users' Legal Rights From Anti-Circumvention Law."),c.qZA(),c.TgZ(74,"p"),c._uU(75," No covered work shall be deemed part of an effective technological measure under any applicable law fulfilling obligations under article 11 of the WIPO copyright treaty adopted on 20 December 1996, or similar laws prohibiting or restricting circumvention of such measures."),c.qZA(),c.TgZ(76,"p"),c._uU(77," When you convey a covered work, you waive any legal power to forbid circumvention of technological measures to the extent such circumvention is effected by exercising rights under this License with respect to the covered work, and you disclaim any intention to limit operation or modification of the work as a means of enforcing, against the work's users, your or third parties' legal rights to forbid circumvention of technological measures."),c.qZA(),c.TgZ(78,"p"),c._uU(79," 4. Conveying Verbatim Copies."),c.qZA(),c.TgZ(80,"p"),c._uU(81," You may convey verbatim copies of the Program's source code as you receive it, in any medium, provided that you conspicuously and appropriately publish on each copy an appropriate copyright notice; keep intact all notices stating that this License and any non-permissive terms added in accord with section 7 apply to the code; keep intact all notices of the absence of any warranty; and give all recipients a copy of this License along with the Program."),c.qZA(),c.TgZ(82,"p"),c._uU(83," You may charge any price or no price for each copy that you convey, and you may offer support or warranty protection for a fee."),c.qZA(),c.TgZ(84,"p"),c._uU(85," 5. Conveying Modified Source Versions."),c.qZA(),c.TgZ(86,"p"),c._uU(87," You may convey a work based on the Program, or the modifications to produce it from the Program, in the form of source code under the terms of section 4, provided that you also meet all of these conditions:"),c.qZA(),c.TgZ(88,"p"),c._uU(89," a) The work must carry prominent notices stating that you modified it, and giving a relevant date."),c.qZA(),c.TgZ(90,"p"),c._uU(91,' b) The work must carry prominent notices stating that it is released under this License and any conditions added under section 7. This requirement modifies the requirement in section 4 to "keep intact all notices".'),c.qZA(),c.TgZ(92,"p"),c._uU(93," c) You must license the entire work, as a whole, under this License to anyone who comes into possession of a copy. This License will therefore apply, along with any applicable section 7 additional terms, to the whole of the work, and all its parts, regardless of how they are packaged. This License gives no permission to license the work in any other way, but it does not invalidate such permission if you have separately received it."),c.qZA(),c.TgZ(94,"p"),c._uU(95," d) If the work has interactive user interfaces, each must display Appropriate Legal Notices; however, if the Program has interactive interfaces that do not display Appropriate Legal Notices, your work need not make them do so."),c.qZA(),c.TgZ(96,"p"),c._uU(97,' A compilation of a covered work with other separate and independent works, which are not by their nature extensions of the covered work, and which are not combined with it such as to form a larger program, in or on a volume of a storage or distribution medium, is called an "aggregate" if the compilation and its resulting copyright are not used to limit the access or legal rights of the compilation\'s users beyond what the individual works permit. Inclusion of a covered work in an aggregate does not cause this License to apply to the other parts of the aggregate.'),c.qZA(),c.TgZ(98,"p"),c._uU(99," 6. Conveying Non-Source Forms."),c.qZA(),c.TgZ(100,"p"),c._uU(101," You may convey a covered work in object code form under the terms of sections 4 and 5, provided that you also convey the machine-readable Corresponding Source under the terms of this License, in one of these ways:"),c.qZA(),c.TgZ(102,"p"),c._uU(103," a) Convey the object code in, or embodied in, a physical product (including a physical distribution medium), accompanied by the Corresponding Source fixed on a durable physical medium customarily used for software interchange."),c.qZA(),c.TgZ(104,"p"),c._uU(105," b) Convey the object code in, or embodied in, a physical product (including a physical distribution medium), accompanied by a written offer, valid for at least three years and valid for as long as you offer spare parts or customer support for that product model, to give anyone who possesses the object code either (1) a copy of the Corresponding Source for all the software in the product that is covered by this License, on a durable physical medium customarily used for software interchange, for a price no more than your reasonable cost of physically performing this conveying of source, or (2) access to copy the Corresponding Source from a network server at no charge."),c.qZA(),c.TgZ(106,"p"),c._uU(107," c) Convey individual copies of the object code with a copy of the written offer to provide the Corresponding Source. This alternative is allowed only occasionally and noncommercially, and only if you received the object code with such an offer, in accord with subsection 6b."),c.qZA(),c.TgZ(108,"p"),c._uU(109," d) Convey the object code by offering access from a designated place (gratis or for a charge), and offer equivalent access to the Corresponding Source in the same way through the same place at no further charge. You need not require recipients to copy the Corresponding Source along with the object code. If the place to copy the object code is a network server, the Corresponding Source may be on a different server (operated by you or a third party) that supports equivalent copying facilities, provided you maintain clear directions next to the object code saying where to find the Corresponding Source. Regardless of what server hosts the Corresponding Source, you remain obligated to ensure that it is available for as long as needed to satisfy these requirements."),c.qZA(),c.TgZ(110,"p"),c._uU(111," e) Convey the object code using peer-to-peer transmission, provided you inform other peers where the object code and Corresponding Source of the work are being offered to the general public at no charge under subsection 6d."),c.qZA(),c.TgZ(112,"p"),c._uU(113," A separable portion of the object code, whose source code is excluded from the Corresponding Source as a System Library, need not be included in conveying the object code work."),c.qZA(),c.TgZ(114,"p"),c._uU(115,' A "User Product" is either (1) a "consumer product", which means any tangible personal property which is normally used for personal, family, or household purposes, or (2) anything designed or sold for incorporation into a dwelling. In determining whether a product is a consumer product, doubtful cases shall be resolved in favor of coverage. For a particular product received by a particular user, "normally used" refers to a typical or common use of that class of product, regardless of the status of the particular user or of the way in which the particular user actually uses, or expects or is expected to use, the product. A product is a consumer product regardless of whether the product has substantial commercial, industrial or non-consumer uses, unless such uses represent the only significant mode of use of the product.'),c.qZA(),c.TgZ(116,"p"),c._uU(117,' "Installation Information" for a User Product means any methods, procedures, authorization keys, or other information required to install and execute modified versions of a covered work in that User Product from a modified version of its Corresponding Source. The information must suffice to ensure that the continued functioning of the modified object code is in no case prevented or interfered with solely because modification has been made.'),c.qZA(),c.TgZ(118,"p"),c._uU(119," If you convey an object code work under this section in, or with, or specifically for use in, a User Product, and the conveying occurs as part of a transaction in which the right of possession and use of the User Product is transferred to the recipient in perpetuity or for a fixed term (regardless of how the transaction is characterized), the Corresponding Source conveyed under this section must be accompanied by the Installation Information. But this requirement does not apply if neither you nor any third party retains the ability to install modified object code on the User Product (for example, the work has been installed in ROM)."),c.qZA(),c.TgZ(120,"p"),c._uU(121," The requirement to provide Installation Information does not include a requirement to continue to provide support service, warranty, or updates for a work that has been modified or installed by the recipient, or for the User Product in which it has been modified or installed. Access to a network may be denied when the modification itself materially and adversely affects the operation of the network or violates the rules and protocols for communication across the network."),c.qZA(),c.TgZ(122,"p"),c._uU(123," Corresponding Source conveyed, and Installation Information provided, in accord with this section must be in a format that is publicly documented (and with an implementation available to the public in source code form), and must require no special password or key for unpacking, reading or copying."),c.qZA(),c.TgZ(124,"p"),c._uU(125," 7. Additional Terms."),c.qZA(),c.TgZ(126,"p"),c._uU(127,' "Additional permissions" are terms that supplement the terms of this License by making exceptions from one or more of its conditions. Additional permissions that are applicable to the entire Program shall be treated as though they were included in this License, to the extent that they are valid under applicable law. If additional permissions apply only to part of the Program, that part may be used separately under those permissions, but the entire Program remains governed by this License without regard to the additional permissions.'),c.qZA(),c.TgZ(128,"p"),c._uU(129," When you convey a copy of a covered work, you may at your option remove any additional permissions from that copy, or from any part of it. (Additional permissions may be written to require their own removal in certain cases when you modify the work.) You may place additional permissions on material, added by you to a covered work, for which you have or can give appropriate copyright permission."),c.qZA(),c.TgZ(130,"p"),c._uU(131," Notwithstanding any other provision of this License, for material you add to a covered work, you may (if authorized by the copyright holders of that material) supplement the terms of this License with terms:"),c.qZA(),c.TgZ(132,"p"),c._uU(133," a) Disclaiming warranty or limiting liability differently from the terms of sections 15 and 16 of this License; or"),c.qZA(),c.TgZ(134,"p"),c._uU(135," b) Requiring preservation of specified reasonable legal notices or author attributions in that material or in the Appropriate Legal Notices displayed by works containing it; or"),c.qZA(),c.TgZ(136,"p"),c._uU(137," c) Prohibiting misrepresentation of the origin of that material, or requiring that modified versions of such material be marked in reasonable ways as different from the original version; or"),c.qZA(),c.TgZ(138,"p"),c._uU(139," d) Limiting the use for publicity purposes of names of licensors or authors of the material; or"),c.qZA(),c.TgZ(140,"p"),c._uU(141," e) Declining to grant rights under trademark law for use of some trade names, trademarks, or service marks; or"),c.qZA(),c.TgZ(142,"p"),c._uU(143," f) Requiring indemnification of licensors and authors of that material by anyone who conveys the material (or modified versions of it) with contractual assumptions of liability to the recipient, for any liability that these contractual assumptions directly impose on those licensors and authors."),c.qZA(),c.TgZ(144,"p"),c._uU(145,' All other non-permissive additional terms are considered "further restrictions" within the meaning of section 10. If the Program as you received it, or any part of it, contains a notice stating that it is governed by this License along with a term that is a further restriction, you may remove that term. If a license document contains a further restriction but permits relicensing or conveying under this License, you may add to a covered work material governed by the terms of that license document, provided that the further restriction does not survive such relicensing or conveying.'),c.qZA(),c.TgZ(146,"p"),c._uU(147," If you add terms to a covered work in accord with this section, you must place, in the relevant source files, a statement of the additional terms that apply to those files, or a notice indicating where to find the applicable terms."),c.qZA(),c.TgZ(148,"p"),c._uU(149," Additional terms, permissive or non-permissive, may be stated in the form of a separately written license, or stated as exceptions; the above requirements apply either way."),c.qZA(),c.TgZ(150,"p"),c._uU(151," 8. Termination."),c.qZA(),c.TgZ(152,"p"),c._uU(153," You may not propagate or modify a covered work except as expressly provided under this License. Any attempt otherwise to propagate or modify it is void, and will automatically terminate your rights under this License (including any patent licenses granted under the third paragraph of section 11)."),c.qZA(),c.TgZ(154,"p"),c._uU(155," However, if you cease all violation of this License, then your license from a particular copyright holder is reinstated (a) provisionally, unless and until the copyright holder explicitly and finally terminates your license, and (b) permanently, if the copyright holder fails to notify you of the violation by some reasonable means prior to 60 days after the cessation."),c.qZA(),c.TgZ(156,"p"),c._uU(157," Moreover, your license from a particular copyright holder is reinstated permanently if the copyright holder notifies you of the violation by some reasonable means, this is the first time you have received notice of violation of this License (for any work) from that copyright holder, and you cure the violation prior to 30 days after your receipt of the notice."),c.qZA(),c.TgZ(158,"p"),c._uU(159," Termination of your rights under this section does not terminate the licenses of parties who have received copies or rights from you under this License. If your rights have been terminated and not permanently reinstated, you do not qualify to receive new licenses for the same material under section 10."),c.qZA(),c.TgZ(160,"p"),c._uU(161," 9. Acceptance Not Required for Having Copies."),c.qZA(),c.TgZ(162,"p"),c._uU(163," You are not required to accept this License in order to receive or run a copy of the Program. Ancillary propagation of a covered work occurring solely as a consequence of using peer-to-peer transmission to receive a copy likewise does not require acceptance. However, nothing other than this License grants you permission to propagate or modify any covered work. These actions infringe copyright if you do not accept this License. Therefore, by modifying or propagating a covered work, you indicate your acceptance of this License to do so."),c.qZA(),c.TgZ(164,"p"),c._uU(165," 10. Automatic Licensing of Downstream Recipients."),c.qZA(),c.TgZ(166,"p"),c._uU(167," Each time you convey a covered work, the recipient automatically receives a license from the original licensors, to run, modify and propagate that work, subject to this License. You are not responsible for enforcing compliance by third parties with this License."),c.qZA(),c.TgZ(168,"p"),c._uU(169,' An "entity transaction" is a transaction transferring control of an organization, or substantially all assets of one, or subdividing an organization, or merging organizations. If propagation of a covered work results from an entity transaction, each party to that transaction who receives a copy of the work also receives whatever licenses to the work the party\'s predecessor in interest had or could give under the previous paragraph, plus a right to possession of the Corresponding Source of the work from the predecessor in interest, if the predecessor has it or can get it with reasonable efforts.'),c.qZA(),c.TgZ(170,"p"),c._uU(171," You may not impose any further restrictions on the exercise of the rights granted or affirmed under this License. For example, you may not impose a license fee, royalty, or other charge for exercise of rights granted under this License, and you may not initiate litigation (including a cross-claim or counterclaim in a lawsuit) alleging that any patent claim is infringed by making, using, selling, offering for sale, or importing the Program or any portion of it."),c.qZA(),c.TgZ(172,"p"),c._uU(173," 11. Patents."),c.qZA(),c.TgZ(174,"p"),c._uU(175,' A "contributor" is a copyright holder who authorizes use under this License of the Program or a work on which the Program is based. The work thus licensed is called the contributor\'s "contributor version".'),c.qZA(),c.TgZ(176,"p"),c._uU(177,' A contributor\'s "essential patent claims" are all patent claims owned or controlled by the contributor, whether already acquired or hereafter acquired, that would be infringed by some manner, permitted by this License, of making, using, or selling its contributor version, but do not include claims that would be infringed only as a consequence of further modification of the contributor version. For purposes of this definition, "control" includes the right to grant patent sublicenses in a manner consistent with the requirements of this License.'),c.qZA(),c.TgZ(178,"p"),c._uU(179," Each contributor grants you a non-exclusive, worldwide, royalty-free patent license under the contributor's essential patent claims, to make, use, sell, offer for sale, import and otherwise run, modify and propagate the contents of its contributor version."),c.qZA(),c.TgZ(180,"p"),c._uU(181,' In the following three paragraphs, a "patent license" is any express agreement or commitment, however denominated, not to enforce a patent (such as an express permission to practice a patent or covenant not to sue for patent infringement). To "grant" such a patent license to a party means to make such an agreement or commitment not to enforce a patent against the party.'),c.qZA(),c.TgZ(182,"p"),c._uU(183,' If you convey a covered work, knowingly relying on a patent license, and the Corresponding Source of the work is not available for anyone to copy, free of charge and under the terms of this License, through a publicly available network server or other readily accessible means, then you must either (1) cause the Corresponding Source to be so available, or (2) arrange to deprive yourself of the benefit of the patent license for this particular work, or (3) arrange, in a manner consistent with the requirements of this License, to extend the patent license to downstream recipients. "Knowingly relying" means you have actual knowledge that, but for the patent license, your conveying the covered work in a country, or your recipient\'s use of the covered work in a country, would infringe one or more identifiable patents in that country that you have reason to believe are valid.'),c.qZA(),c.TgZ(184,"p"),c._uU(185," If, pursuant to or in connection with a single transaction or arrangement, you convey, or propagate by procuring conveyance of, a covered work, and grant a patent license to some of the parties receiving the covered work authorizing them to use, propagate, modify or convey a specific copy of the covered work, then the patent license you grant is automatically extended to all recipients of the covered work and works based on it."),c.qZA(),c.TgZ(186,"p"),c._uU(187,' A patent license is "discriminatory" if it does not include within the scope of its coverage, prohibits the exercise of, or is conditioned on the non-exercise of one or more of the rights that are specifically granted under this License. You may not convey a covered work if you are a party to an arrangement with a third party that is in the business of distributing software, under which you make payment to the third party based on the extent of your activity of conveying the work, and under which the third party grants, to any of the parties who would receive the covered work from you, a discriminatory patent license (a) in connection with copies of the covered work conveyed by you (or copies made from those copies), or (b) primarily for and in connection with specific products or compilations that contain the covered work, unless you entered into that arrangement, or that patent license was granted, prior to 28 March 2007.'),c.qZA(),c.TgZ(188,"p"),c._uU(189," Nothing in this License shall be construed as excluding or limiting any implied license or other defenses to infringement that may otherwise be available to you under applicable patent law."),c.qZA(),c.TgZ(190,"p"),c._uU(191," 12. No Surrender of Others' Freedom."),c.qZA(),c.TgZ(192,"p"),c._uU(193," If conditions are imposed on you (whether by court order, agreement or otherwise) that contradict the conditions of this License, they do not excuse you from the conditions of this License. If you cannot convey a covered work so as to satisfy simultaneously your obligations under this License and any other pertinent obligations, then as a consequence you may not convey it at all. For example, if you agree to terms that obligate you to collect a royalty for further conveying from those to whom you convey the Program, the only way you could satisfy both those terms and this License would be to refrain entirely from conveying the Program."),c.qZA(),c.TgZ(194,"p"),c._uU(195," 13. Remote Network Interaction; Use with the GNU General Public License."),c.qZA(),c.TgZ(196,"p"),c._uU(197," Notwithstanding any other provision of this License, if you modify the Program, your modified version must prominently offer all users interacting with it remotely through a computer network (if your version supports such interaction) an opportunity to receive the Corresponding Source of your version by providing access to the Corresponding Source from a network server at no charge, through some standard or customary means of facilitating copying of software. This Corresponding Source shall include the Corresponding Source for any work covered by version 3 of the GNU General Public License that is incorporated pursuant to the following paragraph."),c.qZA(),c.TgZ(198,"p"),c._uU(199," Notwithstanding any other provision of this License, you have permission to link or combine any covered work with a work licensed under version 3 of the GNU General Public License into a single combined work, and to convey the resulting work. The terms of this License will continue to apply to the part which is the covered work, but the work with which it is combined will remain governed by version 3 of the GNU General Public License."),c.qZA(),c.TgZ(200,"p"),c._uU(201," 14. Revised Versions of this License."),c.qZA(),c.TgZ(202,"p"),c._uU(203," The Free Software Foundation may publish revised and/or new versions of the GNU Affero General Public License from time to time. Such new versions will be similar in spirit to the present version, but may differ in detail to address new problems or concerns."),c.qZA(),c.TgZ(204,"p"),c._uU(205,' Each version is given a distinguishing version number. If the Program specifies that a certain numbered version of the GNU Affero General Public License "or any later version" applies to it, you have the option of following the terms and conditions either of that numbered version or of any later version published by the Free Software Foundation. If the Program does not specify a version number of the GNU Affero General Public License, you may choose any version ever published by the Free Software Foundation.'),c.qZA(),c.TgZ(206,"p"),c._uU(207," If the Program specifies that a proxy can decide which future versions of the GNU Affero General Public License can be used, that proxy's public statement of acceptance of a version permanently authorizes you to choose that version for the Program."),c.qZA(),c.TgZ(208,"p"),c._uU(209," Later license versions may give you additional or different permissions. However, no additional obligations are imposed on any author or copyright holder as a result of your choosing to follow a later version."),c.qZA(),c.TgZ(210,"p"),c._uU(211," 15. Disclaimer of Warranty."),c.qZA(),c.TgZ(212,"p"),c._uU(213,' THERE IS NO WARRANTY FOR THE PROGRAM, TO THE EXTENT PERMITTED BY APPLICABLE LAW. EXCEPT WHEN OTHERWISE STATED IN WRITING THE COPYRIGHT HOLDERS AND/OR OTHER PARTIES PROVIDE THE PROGRAM "AS IS" WITHOUT WARRANTY OF ANY KIND, EITHER EXPRESSED OR IMPLIED, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE. THE ENTIRE RISK AS TO THE QUALITY AND PERFORMANCE OF THE PROGRAM IS WITH YOU. SHOULD THE PROGRAM PROVE DEFECTIVE, YOU ASSUME THE COST OF ALL NECESSARY SERVICING, REPAIR OR CORRECTION.'),c.qZA(),c.TgZ(214,"p"),c._uU(215," 16. Limitation of Liability."),c.qZA(),c.TgZ(216,"p"),c._uU(217," IN NO EVENT UNLESS REQUIRED BY APPLICABLE LAW OR AGREED TO IN WRITING WILL ANY COPYRIGHT HOLDER, OR ANY OTHER PARTY WHO MODIFIES AND/OR CONVEYS THE PROGRAM AS PERMITTED ABOVE, BE LIABLE TO YOU FOR DAMAGES, INCLUDING ANY GENERAL, SPECIAL, INCIDENTAL OR CONSEQUENTIAL DAMAGES ARISING OUT OF THE USE OR INABILITY TO USE THE PROGRAM (INCLUDING BUT NOT LIMITED TO LOSS OF DATA OR DATA BEING RENDERED INACCURATE OR LOSSES SUSTAINED BY YOU OR THIRD PARTIES OR A FAILURE OF THE PROGRAM TO OPERATE WITH ANY OTHER PROGRAMS), EVEN IF SUCH HOLDER OR OTHER PARTY HAS BEEN ADVISED OF THE POSSIBILITY OF SUCH DAMAGES."),c.qZA(),c.TgZ(218,"p"),c._uU(219," 17. Interpretation of Sections 15 and 16."),c.qZA(),c.TgZ(220,"p"),c._uU(221," If the disclaimer of warranty and limitation of liability provided above cannot be given local legal effect according to their terms, reviewing courts shall apply local law that most closely approximates an absolute waiver of all civil liability in connection with the Program, unless a warranty or assumption of liability accompanies a copy of the Program in return for a fee."),c.qZA(),c.TgZ(222,"p"),c._uU(223," END OF TERMS AND CONDITIONS"),c.qZA(),c.TgZ(224,"p"),c._uU(225," How to Apply These Terms to Your New Programs"),c.qZA(),c.TgZ(226,"p"),c._uU(227," If you develop a new program, and you want it to be of the greatest possible use to the public, the best way to achieve this is to make it free software which everyone can redistribute and change under these terms."),c.qZA(),c.TgZ(228,"p"),c._uU(229,' To do so, attach the following notices to the program. It is safest to attach them to the start of each source file to most effectively state the exclusion of warranty; and each file should have at least the "copyright" line and a pointer to where the full notice is found.'),c.qZA(),c.TgZ(230,"p"),c._uU(231),c.qZA(),c.TgZ(232,"p"),c._uU(233," This program is free software: you can redistribute it and/or modify it under the terms of the GNU Affero General Public License as published by the Free Software Foundation, either version 3 of the License, or (at your option) any later version."),c.qZA(),c.TgZ(234,"p"),c._uU(235," This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero General Public License for more details."),c.qZA(),c.TgZ(236,"p"),c._uU(237," You should have received a copy of the GNU Affero General Public License along with this program. If not, see "),c.TgZ(238,"a",5),c._uU(239,"gnu.org/licenses"),c.qZA(),c._uU(240,"."),c.qZA(),c.TgZ(241,"p"),c._uU(242,"Also add information on how to contact you by electronic and paper mail."),c.qZA(),c.TgZ(243,"p"),c._uU(244,' If your software can interact with users remotely through a computer network, you should also make sure that it provides a way for users to get its source. For example, if your program is a web application, its interface could display a "Source" link that leads users to an archive of the code. There are many ways you could offer source, and different solutions will be better for different programs; see section 13 for the specific requirements.'),c.qZA(),c.TgZ(245,"p"),c._uU(246,' You should also get your employer (if you work as a programmer) or school, if any, to sign a "copyright disclaimer" for the program, if necessary. For more information on this, and how to apply and follow the GNU AGPL, see '),c.TgZ(247,"a",5),c._uU(248,"gnu.org/licenses"),c.qZA(),c._uU(249,"."),c.qZA()()(),c.TgZ(250,"div",6)(251,"system-checkbox",7),c.NdJ("ngModelChange",(function(e){return t.spiceinstaller.selectedStep.completed=e})),c._uU(252,"agree to Terms & Conditions"),c.qZA(),c.TgZ(253,"button",8),c.NdJ("click",(function(){return t.spiceinstaller.jumpSubject.next({from:t.selfStep,to:t.selfStep.prev})})),c._uU(254,"back"),c.qZA(),c.TgZ(255,"button",9),c.NdJ("click",(function(){return t.spiceinstaller.jumpSubject.next({from:t.selfStep,to:t.selfStep.next})})),c._uU(256,"next"),c.qZA()()()),2&e&&(c.xp6(231),c.AsE(" one line to give the programs name and a brief idea of what it does Copyright (C) ",t.year," ",t.author,""),c.xp6(20),c.Q6J("ngModel",t.spiceinstaller.selectedStep.completed),c.xp6(4),c.Q6J("disabled",!t.spiceinstaller.selectedStep.completed))},dependencies:[o.JJ,o.On,N.H,F.U],encapsulation:2})),SpiceInstallerLicence})();function E(e,t){1&e&&(c.TgZ(0,"div",12),c._uU(1,"Input required."),c.qZA())}function Y(e,t){1&e&&(c.TgZ(0,"div",12),c._uU(1,"Input required."),c.qZA())}function D(e,t){1&e&&(c.TgZ(0,"div",12),c._uU(1,"Input required."),c.qZA())}const Q=function(e){return{"slds-has-error":e}};let U=(()=>{var e;class SpiceinstallerMySQLi{constructor(e){(0,i.Z)(this,"spiceinstaller",void 0),(0,i.Z)(this,"selfStep",void 0),(0,i.Z)(this,"hostNameCondition",void 0),(0,i.Z)(this,"userNameCondition",void 0),(0,i.Z)(this,"dbNameCondition",void 0),this.spiceinstaller=e,this.spiceinstaller.db_port||(this.spiceinstaller.db_port="3306"),this.spiceinstaller.collation||(this.spiceinstaller.collation="utf8mb4_general_ci"),this.spiceinstaller.db_name||(this.spiceinstaller.db_name=this.spiceinstaller.systemname.toLowerCase().replace(/\s/g,""))}}return e=SpiceinstallerMySQLi,(0,i.Z)(SpiceinstallerMySQLi,"ɵfac",(function(t){return new(t||e)(c.Y36(a.f))})),(0,i.Z)(SpiceinstallerMySQLi,"ɵcmp",c.Xpm({type:e,selectors:[["spice-installer-mysqli"]],inputs:{selfStep:"selfStep",hostNameCondition:"hostNameCondition",userNameCondition:"userNameCondition",dbNameCondition:"dbNameCondition"},decls:46,vars:18,consts:[[1,"slds-form-element","slds-p-vertical--small",3,"ngClass"],[1,"slds-form-element__label"],[1,"slds-required"],[1,"slds-form-element__control"],["type","text","system-trim-input","",1,"slds-input",3,"ngModel","ngModelChange","change"],["class","slds-form-element__help",4,"ngIf"],[1,"slds-form-element","slds-p-vertical--small"],["type","password","system-trim-input","",1,"slds-input",3,"ngModel","ngModelChange","change"],[1,"slds-select_container"],[1,"slds-select",3,"ngModel","ngModelChange"],["value","utf8mb4_general_ci"],["value","utf8_general_ci"],[1,"slds-form-element__help"]],template:function(e,t){1&e&&(c.TgZ(0,"div",0)(1,"label",1)(2,"abbr",2),c._uU(3,"*"),c.qZA(),c._uU(4,"Host Name"),c.qZA(),c.TgZ(5,"div",3)(6,"input",4),c.NdJ("ngModelChange",(function(e){return t.spiceinstaller.db_host_name=e}))("change",(function(){return t.selfStep.completed=!1})),c.qZA(),c.YNc(7,E,2,0,"div",5),c.qZA()(),c.TgZ(8,"div",0)(9,"label",1)(10,"abbr",2),c._uU(11,"*"),c.qZA(),c._uU(12,"Administrator User Name"),c.qZA(),c.TgZ(13,"div",3)(14,"input",4),c.NdJ("ngModelChange",(function(e){return t.spiceinstaller.db_user_name=e}))("change",(function(){return t.selfStep.completed=!1})),c.qZA(),c.YNc(15,Y,2,0,"div",5),c.qZA()(),c.TgZ(16,"div",6)(17,"label",1),c._UZ(18,"abbr",2),c._uU(19,"Administrator Password"),c.qZA(),c.TgZ(20,"div",3)(21,"input",7),c.NdJ("ngModelChange",(function(e){return t.spiceinstaller.db_password=e}))("change",(function(){return t.selfStep.completed=!1})),c.qZA()()(),c.TgZ(22,"div",6)(23,"label",1),c._UZ(24,"abbr",2),c._uU(25,"Port"),c.qZA(),c.TgZ(26,"div",3)(27,"input",4),c.NdJ("ngModelChange",(function(e){return t.spiceinstaller.db_port=e}))("change",(function(){return t.selfStep.completed=!1})),c.qZA()()(),c.TgZ(28,"div",0)(29,"label",1)(30,"abbr",2),c._uU(31,"*"),c.qZA(),c._uU(32,"Database Name"),c.qZA(),c.TgZ(33,"div",3)(34,"input",4),c.NdJ("ngModelChange",(function(e){return t.spiceinstaller.db_name=e}))("change",(function(){return t.selfStep.completed=!1})),c.qZA(),c.YNc(35,D,2,0,"div",5),c.qZA()(),c.TgZ(36,"div",6)(37,"label",1),c._uU(38,"Collation"),c.qZA(),c.TgZ(39,"div",3)(40,"div",8)(41,"select",9),c.NdJ("ngModelChange",(function(e){return t.spiceinstaller.collation=e})),c.TgZ(42,"option",10),c._uU(43,"utf8mb4"),c.qZA(),c.TgZ(44,"option",11),c._uU(45,"utf8"),c.qZA()()()()()),2&e&&(c.Q6J("ngClass",c.VKq(12,Q,!t.hostNameCondition)),c.xp6(6),c.Q6J("ngModel",t.spiceinstaller.db_host_name),c.xp6(1),c.Q6J("ngIf",!t.hostNameCondition),c.xp6(1),c.Q6J("ngClass",c.VKq(14,Q,!t.userNameCondition)),c.xp6(6),c.Q6J("ngModel",t.spiceinstaller.db_user_name),c.xp6(1),c.Q6J("ngIf",!t.userNameCondition),c.xp6(6),c.Q6J("ngModel",t.spiceinstaller.db_password),c.xp6(6),c.Q6J("ngModel",t.spiceinstaller.db_port),c.xp6(1),c.Q6J("ngClass",c.VKq(16,Q,!t.dbNameCondition)),c.xp6(6),c.Q6J("ngModel",t.spiceinstaller.db_name),c.xp6(1),c.Q6J("ngIf",!t.dbNameCondition),c.xp6(6),c.Q6J("ngModel",t.spiceinstaller.collation))},dependencies:[n.mk,n.O5,o.YN,o.Kr,o.Fj,o.EJ,o.JJ,o.On,T.t],encapsulation:2})),SpiceinstallerMySQLi})();function R(e,t){1&e&&(c.TgZ(0,"div",8),c._uU(1,"Input required."),c.qZA())}function j(e,t){1&e&&(c.TgZ(0,"div",8),c._uU(1,"Input required."),c.qZA())}function B(e,t){1&e&&(c.TgZ(0,"div",8),c._uU(1,"Input required."),c.qZA())}const G=function(e){return{"slds-has-error":e}};let P=(()=>{var e;class SpiceinstallerPostgreSQL{constructor(e){(0,i.Z)(this,"spiceinstaller",void 0),(0,i.Z)(this,"selfStep",void 0),(0,i.Z)(this,"hostNameCondition",void 0),(0,i.Z)(this,"userNameCondition",void 0),(0,i.Z)(this,"dbNameCondition",void 0),this.spiceinstaller=e}}return e=SpiceinstallerPostgreSQL,(0,i.Z)(SpiceinstallerPostgreSQL,"ɵfac",(function(t){return new(t||e)(c.Y36(a.f))})),(0,i.Z)(SpiceinstallerPostgreSQL,"ɵcmp",c.Xpm({type:e,selectors:[["spice-installer-pgsql"]],inputs:{selfStep:"selfStep",hostNameCondition:"hostNameCondition",userNameCondition:"userNameCondition",dbNameCondition:"dbNameCondition"},decls:50,vars:19,consts:[[1,"slds-form-element","slds-p-vertical--small",3,"ngClass"],[1,"slds-form-element__label"],[1,"slds-required"],[1,"slds-form-element__control"],["type","text","system-trim-input","",1,"slds-input",3,"ngModel","ngModelChange","change"],["class","slds-form-element__help",4,"ngIf"],[1,"slds-form-element","slds-p-vertical--small"],["type","password","system-trim-input","",1,"slds-input",3,"ngModel","ngModelChange","change"],[1,"slds-form-element__help"]],template:function(e,t){1&e&&(c.TgZ(0,"div",0)(1,"label",1)(2,"abbr",2),c._uU(3,"*"),c.qZA(),c._uU(4,"Host Name"),c.qZA(),c.TgZ(5,"div",3)(6,"input",4),c.NdJ("ngModelChange",(function(e){return t.spiceinstaller.db_host_name=e}))("change",(function(){return t.selfStep.completed=!1})),c.qZA(),c.YNc(7,R,2,0,"div",5),c.qZA()(),c.TgZ(8,"div",0)(9,"label",1)(10,"abbr",2),c._uU(11,"*"),c.qZA(),c._uU(12,"Administrator User Name"),c.qZA(),c.TgZ(13,"div",3)(14,"input",4),c.NdJ("ngModelChange",(function(e){return t.spiceinstaller.db_user_name=e}))("change",(function(){return t.selfStep.completed=!1})),c.qZA(),c.YNc(15,j,2,0,"div",5),c.qZA()(),c.TgZ(16,"div",6)(17,"label",1),c._UZ(18,"abbr",2),c._uU(19,"Administrator Password"),c.qZA(),c.TgZ(20,"div",3)(21,"input",7),c.NdJ("ngModelChange",(function(e){return t.spiceinstaller.db_password=e}))("change",(function(){return t.selfStep.completed=!1})),c.qZA()()(),c.TgZ(22,"div",6)(23,"label",1),c._UZ(24,"abbr",2),c._uU(25,"Port"),c.qZA(),c.TgZ(26,"div",3)(27,"input",4),c.NdJ("ngModelChange",(function(e){return t.spiceinstaller.db_port=e}))("change",(function(){return t.selfStep.completed=!1})),c.qZA()()(),c.TgZ(28,"div",0)(29,"label",1)(30,"abbr",2),c._uU(31,"*"),c.qZA(),c._uU(32,"Database Name"),c.qZA(),c.TgZ(33,"div",3)(34,"input",4),c.NdJ("ngModelChange",(function(e){return t.spiceinstaller.db_name=e}))("change",(function(){return t.selfStep.completed=!1})),c.qZA(),c.YNc(35,B,2,0,"div",5),c.qZA()(),c.TgZ(36,"div",6)(37,"label",1)(38,"abbr",2),c._uU(39,"*"),c.qZA(),c._uU(40,"Collation"),c.qZA(),c.TgZ(41,"div",3)(42,"input",4),c.NdJ("ngModelChange",(function(e){return t.spiceinstaller.lc_collate=e}))("change",(function(){return t.selfStep.completed=!1})),c.qZA()()(),c.TgZ(43,"div",6)(44,"label",1)(45,"abbr",2),c._uU(46,"*"),c.qZA(),c._uU(47,"Character Classification"),c.qZA(),c.TgZ(48,"div",3)(49,"input",4),c.NdJ("ngModelChange",(function(e){return t.spiceinstaller.lc_ctype=e}))("change",(function(){return t.selfStep.completed=!1})),c.qZA()()()),2&e&&(c.Q6J("ngClass",c.VKq(13,G,!t.hostNameCondition)),c.xp6(6),c.Q6J("ngModel",t.spiceinstaller.db_host_name),c.xp6(1),c.Q6J("ngIf",!t.hostNameCondition),c.xp6(1),c.Q6J("ngClass",c.VKq(15,G,!t.userNameCondition)),c.xp6(6),c.Q6J("ngModel",t.spiceinstaller.db_user_name),c.xp6(1),c.Q6J("ngIf",!t.userNameCondition),c.xp6(6),c.Q6J("ngModel",t.spiceinstaller.db_password),c.xp6(6),c.Q6J("ngModel",t.spiceinstaller.db_port),c.xp6(1),c.Q6J("ngClass",c.VKq(17,G,!t.dbNameCondition)),c.xp6(6),c.Q6J("ngModel",t.spiceinstaller.db_name),c.xp6(1),c.Q6J("ngIf",!t.dbNameCondition),c.xp6(7),c.Q6J("ngModel",t.spiceinstaller.lc_collate),c.xp6(7),c.Q6J("ngModel",t.spiceinstaller.lc_ctype))},dependencies:[n.mk,n.O5,o.Fj,o.JJ,o.On,T.t],encapsulation:2})),SpiceinstallerPostgreSQL})();function H(e,t){1&e&&(c.TgZ(0,"div",12),c._uU(1,"Input required."),c.qZA())}function z(e,t){1&e&&(c.TgZ(0,"div",12),c._uU(1,"Input required."),c.qZA())}function V(e,t){1&e&&(c.TgZ(0,"div",12),c._uU(1,"Input required."),c.qZA())}const K=function(e){return{"slds-has-error":e}};let $=(()=>{var e;class SpiceinstallerOCI8{constructor(e){(0,i.Z)(this,"spiceinstaller",void 0),(0,i.Z)(this,"selfStep",void 0),(0,i.Z)(this,"hostNameCondition",void 0),(0,i.Z)(this,"userNameCondition",void 0),(0,i.Z)(this,"dbNameCondition",void 0),this.spiceinstaller=e}}return e=SpiceinstallerOCI8,(0,i.Z)(SpiceinstallerOCI8,"ɵfac",(function(t){return new(t||e)(c.Y36(a.f))})),(0,i.Z)(SpiceinstallerOCI8,"ɵcmp",c.Xpm({type:e,selectors:[["spice-installer-oci8"]],inputs:{selfStep:"selfStep",hostNameCondition:"hostNameCondition",userNameCondition:"userNameCondition",dbNameCondition:"dbNameCondition"},decls:53,vars:19,consts:[[1,"slds-form-element","slds-p-vertical--small",3,"ngClass"],[1,"slds-form-element__label"],[1,"slds-required"],[1,"slds-form-element__control"],["type","text","system-trim-input","",1,"slds-input",3,"ngModel","ngModelChange","change"],["class","slds-form-element__help",4,"ngIf"],[1,"slds-form-element","slds-p-vertical--small"],["type","password","system-trim-input","",1,"slds-input",3,"ngModel","ngModelChange","change"],[1,"slds-select_container"],[1,"slds-select",3,"ngModel","ngModelChange","change"],["value","utf8mb4_general_ci"],["value","utf8_general_ci"],[1,"slds-form-element__help"]],template:function(e,t){1&e&&(c.TgZ(0,"div",0)(1,"label",1)(2,"abbr",2),c._uU(3,"*"),c.qZA(),c._uU(4,"Host Name"),c.qZA(),c.TgZ(5,"div",3)(6,"input",4),c.NdJ("ngModelChange",(function(e){return t.spiceinstaller.db_host_name=e}))("change",(function(){return t.selfStep.completed=!1})),c.qZA(),c.YNc(7,H,2,0,"div",5),c.qZA()(),c.TgZ(8,"div",0)(9,"label",1)(10,"abbr",2),c._uU(11,"*"),c.qZA(),c._uU(12,"Administrator User Name"),c.qZA(),c.TgZ(13,"div",3)(14,"input",4),c.NdJ("ngModelChange",(function(e){return t.spiceinstaller.db_user_name=e}))("change",(function(){return t.selfStep.completed=!1})),c.qZA(),c.YNc(15,z,2,0,"div",5),c.qZA()(),c.TgZ(16,"div",6)(17,"label",1),c._UZ(18,"abbr",2),c._uU(19,"Administrator Password"),c.qZA(),c.TgZ(20,"div",3)(21,"input",7),c.NdJ("ngModelChange",(function(e){return t.spiceinstaller.db_password=e}))("change",(function(){return t.selfStep.completed=!1})),c.qZA()()(),c.TgZ(22,"div",6)(23,"label",1),c._UZ(24,"abbr",2),c._uU(25,"Port"),c.qZA(),c.TgZ(26,"div",3)(27,"input",4),c.NdJ("ngModelChange",(function(e){return t.spiceinstaller.db_port=e}))("change",(function(){return t.selfStep.completed=!1})),c.qZA()()(),c.TgZ(28,"div",0)(29,"label",1)(30,"abbr",2),c._uU(31,"*"),c.qZA(),c._uU(32,"Database Name"),c.qZA(),c.TgZ(33,"div",3)(34,"input",4),c.NdJ("ngModelChange",(function(e){return t.spiceinstaller.db_name=e}))("change",(function(){return t.selfStep.completed=!1})),c.qZA(),c.YNc(35,V,2,0,"div",5),c.qZA()(),c.TgZ(36,"div",6)(37,"label",1)(38,"abbr",2),c._uU(39,"*"),c.qZA(),c._uU(40,"Database Schema"),c.qZA(),c.TgZ(41,"div",3)(42,"input",4),c.NdJ("ngModelChange",(function(e){return t.spiceinstaller.db_schema=e}))("change",(function(){return t.selfStep.completed=!1})),c.qZA()()(),c.TgZ(43,"div",6)(44,"label",1),c._uU(45,"Collation"),c.qZA(),c.TgZ(46,"div",3)(47,"div",8)(48,"select",9),c.NdJ("ngModelChange",(function(e){return t.spiceinstaller.collation=e}))("change",(function(){return t.selfStep.completed=!1})),c.TgZ(49,"option",10),c._uU(50,"utf8mb4"),c.qZA(),c.TgZ(51,"option",11),c._uU(52,"utf8"),c.qZA()()()()()),2&e&&(c.Q6J("ngClass",c.VKq(13,K,!t.hostNameCondition)),c.xp6(6),c.Q6J("ngModel",t.spiceinstaller.db_host_name),c.xp6(1),c.Q6J("ngIf",!t.hostNameCondition),c.xp6(1),c.Q6J("ngClass",c.VKq(15,K,!t.userNameCondition)),c.xp6(6),c.Q6J("ngModel",t.spiceinstaller.db_user_name),c.xp6(1),c.Q6J("ngIf",!t.userNameCondition),c.xp6(6),c.Q6J("ngModel",t.spiceinstaller.db_password),c.xp6(6),c.Q6J("ngModel",t.spiceinstaller.db_port),c.xp6(1),c.Q6J("ngClass",c.VKq(17,K,!t.dbNameCondition)),c.xp6(6),c.Q6J("ngModel",t.spiceinstaller.db_name),c.xp6(1),c.Q6J("ngIf",!t.dbNameCondition),c.xp6(7),c.Q6J("ngModel",t.spiceinstaller.db_schema),c.xp6(6),c.Q6J("ngModel",t.spiceinstaller.collation))},dependencies:[n.mk,n.O5,o.YN,o.Kr,o.Fj,o.EJ,o.JJ,o.On,T.t],encapsulation:2})),SpiceinstallerOCI8})();function X(e,t){if(1&e&&(c.TgZ(0,"option",12),c._uU(1),c.qZA()),2&e){const e=t.$implicit;c.s9C("value",e.extension),c.xp6(1),c.Oqu(e.name)}}function W(e,t){if(1&e&&(c.TgZ(0,"div"),c._UZ(1,"spice-installer-mysqli",13),c.qZA()),2&e){const e=c.oxw();c.xp6(1),c.Q6J("selfStep",e.selfStep)("dbNameCondition",e.dbNameCondition)("hostNameCondition",e.hostNameCondition)("userNameCondition",e.userNameCondition)}}function ee(e,t){if(1&e&&(c.TgZ(0,"div"),c._UZ(1,"spice-installer-mysqli",13),c.qZA()),2&e){const e=c.oxw();c.xp6(1),c.Q6J("selfStep",e.selfStep)("dbNameCondition",e.dbNameCondition)("hostNameCondition",e.hostNameCondition)("userNameCondition",e.userNameCondition)}}function te(e,t){if(1&e&&(c.TgZ(0,"div"),c._UZ(1,"spice-installer-pgsql",13),c.qZA()),2&e){const e=c.oxw();c.xp6(1),c.Q6J("selfStep",e.selfStep)("dbNameCondition",e.dbNameCondition)("hostNameCondition",e.hostNameCondition)("userNameCondition",e.userNameCondition)}}function se(e,t){if(1&e&&(c.TgZ(0,"div"),c._UZ(1,"spice-installer-oci8",13),c.qZA()),2&e){const e=c.oxw();c.xp6(1),c.Q6J("selfStep",e.selfStep)("dbNameCondition",e.dbNameCondition)("hostNameCondition",e.hostNameCondition)("userNameCondition",e.userNameCondition)}}let ie=(()=>{var e;class SpiceInstallerDatabase{constructor(e,t,s){(0,i.Z)(this,"toast",void 0),(0,i.Z)(this,"http",void 0),(0,i.Z)(this,"spiceinstaller",void 0),(0,i.Z)(this,"selfStep",void 0),(0,i.Z)(this,"hostNameCondition",!0),(0,i.Z)(this,"userNameCondition",!0),(0,i.Z)(this,"dbNameCondition",!0),(0,i.Z)(this,"loading",!1),(0,i.Z)(this,"charset",""),this.toast=e,this.http=t,this.spiceinstaller=s,1==s.dbdrivers.length&&(s.db_type=s.dbdrivers[0].extension),this.spiceinstaller.jumpSubject.subscribe((e=>{e.from===this.selfStep&&(this.selfStep.completed||e.to?.pos<this.selfStep.pos?this.spiceinstaller.jump(e.to):this.checkDB())}))}checkDB(){switch(this.spiceinstaller.db_type){case"mysql":case"mysqli":this.spiceinstaller.db_host_instance="SQLEXPRESS",this.spiceinstaller.db_manager="MysqliManager";break;case"pgsql":this.spiceinstaller.db_manager="PostgreSQLManager";break;case"mssql":this.spiceinstaller.db_manager="SqlsrvManager";break;case"oci8":this.spiceinstaller.db_host_instance="SQLEXPRESS",this.spiceinstaller.db_manager="OCI8Manager"}switch(this.spiceinstaller.collation){case"utf8mb4_general_ci":this.charset="utf8mb4";break;case"utf8_general_ci":this.charset="utf8"}let e={db_host_name:this.spiceinstaller.db_host_name,db_host_instance:this.spiceinstaller.db_host_instance,db_user_name:this.spiceinstaller.db_user_name,db_password:this.spiceinstaller.db_password,db_name:this.spiceinstaller.db_name,db_type:this.spiceinstaller.db_type,db_port:this.spiceinstaller.db_port,db_manager:this.spiceinstaller.db_manager,db_schema:this.spiceinstaller.db_schema,lc_collate:this.spiceinstaller.lc_collate,lc_ctype:this.spiceinstaller.lc_ctype};this.hostNameCondition=this.spiceinstaller.db_host_name.length>0,this.userNameCondition=this.spiceinstaller.db_user_name.length>0,this.dbNameCondition=this.spiceinstaller.db_name.length>0,this.hostNameCondition&&this.userNameCondition&&this.dbNameCondition&&(this.loading=!0,this.http.post(`${this.spiceinstaller.systemurl}/install/checkdb`,e).subscribe((e=>{this.loading=!1;let t=e;if(t.success)this.spiceinstaller.configObject.database=t.config,this.spiceinstaller.configObject.dboptions={persistance:this.spiceinstaller.persistent,autofree:this.spiceinstaller.autofree,debug:this.spiceinstaller.debug,ssl:this.spiceinstaller.ssl,collation:this.spiceinstaller.collation,charset:this.charset},this.selfStep.completed=!0,this.spiceinstaller.jumpSubject.next({from:this.selfStep,to:this.selfStep.next});else for(let e in t.errors)this.toast.sendAlert("Error: "+t.errors[e],"error")}),(e=>{if(this.loading=!1,500===e.status)this.toast.sendAlert(e.message,"error")})))}}return e=SpiceInstallerDatabase,(0,i.Z)(SpiceInstallerDatabase,"ɵfac",(function(t){return new(t||e)(c.Y36(Z.A),c.Y36(_.eN),c.Y36(a.f))})),(0,i.Z)(SpiceInstallerDatabase,"ɵcmp",c.Xpm({type:e,selectors:[["spice-installer-database"]],inputs:{selfStep:"selfStep"},decls:19,vars:8,consts:[[1,"slds-p-horizontal_medium",3,"system-overlay-loading-spinner"],[1,"slds-text-heading--medium","slds-m-bottom_medium"],[1,"slds-form-element","slds-p-vertical--small"],[1,"slds-form-element__label"],[1,"slds-form-element__control"],[1,"slds-select_container"],[1,"slds-select",3,"disabled","ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[4,"ngIf"],[1,"slds-p-vertical--small","slds-text-align--right"],[1,"slds-button","slds-button--neutral","slds-col_bump-left",3,"click"],[1,"slds-button","slds-button--brand",3,"click"],[3,"value"],[3,"selfStep","dbNameCondition","hostNameCondition","userNameCondition"]],template:function(e,t){1&e&&(c.TgZ(0,"div",0)(1,"h2",1),c._uU(2," Database Configuration "),c.qZA(),c.TgZ(3,"div",2)(4,"label",3),c._uU(5,"Database Type"),c.qZA(),c.TgZ(6,"div",4)(7,"div",5)(8,"select",6),c.NdJ("ngModelChange",(function(e){return t.spiceinstaller.db_type=e})),c.YNc(9,X,2,2,"option",7),c.qZA()()()(),c.YNc(10,W,2,4,"div",8),c.YNc(11,ee,2,4,"div",8),c.YNc(12,te,2,4,"div",8),c.YNc(13,se,2,4,"div",8),c.TgZ(14,"div",9)(15,"button",10),c.NdJ("click",(function(){return t.spiceinstaller.jumpSubject.next({from:t.selfStep,to:t.selfStep.prev})})),c._uU(16,"back"),c.qZA(),c.TgZ(17,"button",11),c.NdJ("click",(function(){return t.checkDB()})),c._uU(18,"next"),c.qZA()()()),2&e&&(c.Q6J("system-overlay-loading-spinner",t.loading),c.xp6(8),c.Q6J("disabled",t.spiceinstaller.dbdrivers.length<2)("ngModel",t.spiceinstaller.db_type),c.xp6(1),c.Q6J("ngForOf",t.spiceinstaller.dbdrivers),c.xp6(1),c.Q6J("ngIf","mysql"==t.spiceinstaller.db_type),c.xp6(1),c.Q6J("ngIf","mssql"==t.spiceinstaller.db_type),c.xp6(1),c.Q6J("ngIf","pgsql"==t.spiceinstaller.db_type),c.xp6(1),c.Q6J("ngIf","oci8"==t.spiceinstaller.db_type))},dependencies:[n.sg,n.O5,o.YN,o.Kr,o.EJ,o.JJ,o.On,I._,U,P,$],encapsulation:2})),SpiceInstallerDatabase})();function ne(e,t){1&e&&(c.TgZ(0,"div",15),c._uU(1,"Input required."),c.qZA())}function oe(e,t){1&e&&(c.TgZ(0,"div",15),c._uU(1,"Input required."),c.qZA())}function le(e,t){1&e&&(c.TgZ(0,"div",15),c._uU(1,"Input required."),c.qZA())}const ae=function(e){return{"slds-has-error":e}};let de=(()=>{var e;class SpiceInstallerFTS{constructor(e,t,s){(0,i.Z)(this,"toast",void 0),(0,i.Z)(this,"http",void 0),(0,i.Z)(this,"spiceinstaller",void 0),(0,i.Z)(this,"selfStep",void 0),(0,i.Z)(this,"serverCondition",!0),(0,i.Z)(this,"portCondition",!0),(0,i.Z)(this,"prefixCondition",!0),(0,i.Z)(this,"loading",!1),(0,i.Z)(this,"protocolOptions",[{type:"http",name:"HTTP"},{type:"https",name:"HTTPS"}]),this.toast=e,this.http=t,this.spiceinstaller=s,this.spiceinstaller.prefix||(this.spiceinstaller.prefix=this.spiceinstaller.db_name+"_"),this.spiceinstaller.jumpSubject.subscribe((e=>{e.from===this.selfStep&&(this.selfStep.completed||e.to?.pos<this.selfStep.pos?this.spiceinstaller.jump(e.to):this.checkFTS())}))}checkFTS(){let e={server:this.spiceinstaller.server,port:this.spiceinstaller.port,prefix:this.spiceinstaller.prefix,username:this.spiceinstaller.elasticUser,password:this.spiceinstaller.elasticpassword,https:this.spiceinstaller.elastichttps,sslverify:this.spiceinstaller.elasticSSLVerify,loglevel:1,schedulerpackagesize:2500,protocol:this.spiceinstaller.transferProtocol};this.serverCondition=this.spiceinstaller.server.length>0,this.portCondition=this.spiceinstaller.port.length>0,this.prefixCondition=this.spiceinstaller.prefix.length>0,this.serverCondition&&this.portCondition&&this.prefixCondition&&(this.loading=!0,this.http.post(`${this.spiceinstaller.systemurl}/install/checkfts`,e).subscribe((e=>{this.loading=!1;let t=e;if(t.success)this.selfStep.completed=!0,this.spiceinstaller.configObject.fts=t.config,this.spiceinstaller.jumpSubject.next({from:this.selfStep,to:this.selfStep.next});else for(let e in t.errors)this.toast.sendAlert("Error with: "+t.errors[e],"error")})))}}return e=SpiceInstallerFTS,(0,i.Z)(SpiceInstallerFTS,"ɵfac",(function(t){return new(t||e)(c.Y36(Z.A),c.Y36(_.eN),c.Y36(a.f))})),(0,i.Z)(SpiceInstallerFTS,"ɵcmp",c.Xpm({type:e,selectors:[["spice-installer-fts"]],inputs:{selfStep:"selfStep"},decls:50,vars:20,consts:[[1,"slds-p-horizontal_medium",3,"system-overlay-loading-spinner"],[1,"slds-text-heading--medium","slds-m-bottom_medium"],[1,"slds-form-element","slds-p-vertical--small"],[1,"slds-form-element__control"],[3,"ngModel","ngModelChange"],[3,"disabled","ngModel","ngModelChange"],[1,"slds-form-element","slds-p-vertical--small",3,"ngClass"],[1,"slds-form-element__label"],[1,"slds-required"],["type","text","system-trim-input","",1,"slds-input",3,"ngModel","ngModelChange"],["class","slds-form-element__help",4,"ngIf"],["type","password","system-trim-input","",1,"slds-input",3,"ngModel","ngModelChange"],[1,"slds-p-vertical--small","slds-text-align--right"],[1,"slds-button","slds-button--neutral","slds-col_bump-left",3,"click"],[1,"slds-button","slds-button--brand",3,"click"],[1,"slds-form-element__help"]],template:function(e,t){1&e&&(c.TgZ(0,"div",0)(1,"h2",1),c._uU(2," FTS Configuration "),c.qZA(),c.TgZ(3,"div",2)(4,"div",3)(5,"system-checkbox",4),c.NdJ("ngModelChange",(function(e){return t.spiceinstaller.elastichttps=e})),c._uU(6,"use https"),c.qZA()()(),c.TgZ(7,"div",2)(8,"div",3)(9,"system-checkbox",5),c.NdJ("ngModelChange",(function(e){return t.spiceinstaller.elasticSSLVerify=e})),c._uU(10,"SSL verify"),c.qZA()()(),c.TgZ(11,"div",6)(12,"label",7)(13,"abbr",8),c._uU(14,"*"),c.qZA(),c._uU(15,"Server"),c.qZA(),c.TgZ(16,"div",3)(17,"input",9),c.NdJ("ngModelChange",(function(e){return t.spiceinstaller.server=e})),c.qZA(),c.YNc(18,ne,2,0,"div",10),c.qZA()(),c.TgZ(19,"div",6)(20,"label",7)(21,"abbr",8),c._uU(22,"*"),c.qZA(),c._uU(23,"Port"),c.qZA(),c.TgZ(24,"div",3)(25,"input",9),c.NdJ("ngModelChange",(function(e){return t.spiceinstaller.port=e})),c.qZA(),c.YNc(26,oe,2,0,"div",10),c.qZA()(),c.TgZ(27,"div",6)(28,"label",7)(29,"abbr",8),c._uU(30,"*"),c.qZA(),c._uU(31,"Prefix"),c.qZA(),c.TgZ(32,"div",3)(33,"input",9),c.NdJ("ngModelChange",(function(e){return t.spiceinstaller.prefix=e})),c.qZA(),c.YNc(34,le,2,0,"div",10),c.qZA()(),c.TgZ(35,"div",2)(36,"label",7),c._uU(37,"User"),c.qZA(),c.TgZ(38,"div",3)(39,"input",9),c.NdJ("ngModelChange",(function(e){return t.spiceinstaller.elasticUser=e})),c.qZA()()(),c.TgZ(40,"div",2)(41,"label",7),c._uU(42,"Password"),c.qZA(),c.TgZ(43,"div",3)(44,"input",11),c.NdJ("ngModelChange",(function(e){return t.spiceinstaller.elasticpassword=e})),c.qZA()()(),c.TgZ(45,"div",12)(46,"button",13),c.NdJ("click",(function(){return t.spiceinstaller.jumpSubject.next({from:t.selfStep,to:t.selfStep.prev})})),c._uU(47,"back"),c.qZA(),c.TgZ(48,"button",14),c.NdJ("click",(function(){return t.checkFTS()})),c._uU(49,"next"),c.qZA()()()),2&e&&(c.Q6J("system-overlay-loading-spinner",t.loading),c.xp6(5),c.Q6J("ngModel",t.spiceinstaller.elastichttps),c.xp6(4),c.Q6J("ngModel",t.spiceinstaller.elasticSSLVerify),c.xp6(2),c.Q6J("ngClass",c.VKq(14,ae,!t.serverCondition)),c.xp6(6),c.Q6J("ngModel",t.spiceinstaller.server),c.xp6(1),c.Q6J("ngIf",!t.serverCondition),c.xp6(1),c.Q6J("ngClass",c.VKq(16,ae,!t.portCondition)),c.xp6(6),c.Q6J("ngModel",t.spiceinstaller.port),c.xp6(1),c.Q6J("ngIf",!t.portCondition),c.xp6(1),c.Q6J("ngClass",c.VKq(18,ae,!t.prefixCondition)),c.xp6(6),c.Q6J("ngModel",t.spiceinstaller.prefix),c.xp6(1),c.Q6J("ngIf",!t.prefixCondition),c.xp6(5),c.Q6J("ngModel",t.spiceinstaller.elasticUser),c.xp6(5),c.Q6J("ngModel",t.spiceinstaller.elasticpassword))},dependencies:[n.mk,n.O5,o.Fj,o.JJ,o.On,T.t,I._,F.U],encapsulation:2})),SpiceInstallerFTS})();function re(e,t){1&e&&(c.TgZ(0,"div",14),c._uU(1,"Input required."),c.qZA())}function ce(e,t){1&e&&(c.TgZ(0,"div",14),c._uU(1,"Password guideline: One uppercase character, one lowercase character, one digit, 6 characters."),c.qZA())}function ue(e,t){1&e&&(c.TgZ(0,"div",14),c._uU(1,"Repeated Password doesn´t match."),c.qZA())}function he(e,t){1&e&&(c.TgZ(0,"div",14),c._uU(1,"Input required."),c.qZA())}function me(e,t){1&e&&(c.TgZ(0,"div",14),c._uU(1,"Input required."),c.qZA())}const ge=function(e){return{"slds-has-error":e}};let pe=(()=>{var e;class SpiceInstallerCredentials{constructor(e){(0,i.Z)(this,"spiceinstaller",void 0),(0,i.Z)(this,"selfStep",void 0),(0,i.Z)(this,"usernameCondition",!0),(0,i.Z)(this,"passwordCondition",!0),(0,i.Z)(this,"rpPasswordCondition",!0),(0,i.Z)(this,"surnameCondition",!0),(0,i.Z)(this,"emailCondition",!0),(0,i.Z)(this,"pwRegexp",new RegExp("(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.{6,})")),this.spiceinstaller=e,this.spiceinstaller.jumpSubject.subscribe((e=>{e.from===this.selfStep&&(this.selfStep.completed||e.to?.pos<this.selfStep.pos?this.spiceinstaller.jump(e.to):this.saveUser())}))}saveUser(){this.usernameCondition=this.spiceinstaller.username.length>0,this.passwordCondition=this.spiceinstaller.password.length>0&&this.pwRegexp.test(this.spiceinstaller.password),this.rpPasswordCondition=this.spiceinstaller.rpPassword==this.spiceinstaller.password,this.surnameCondition=this.spiceinstaller.surname.length>0,this.emailCondition=this.spiceinstaller.email.length>0,this.usernameCondition&&this.passwordCondition&&this.rpPasswordCondition&&this.surnameCondition&&this.emailCondition&&(this.spiceinstaller.configObject.credentials={username:this.spiceinstaller.username,password:this.spiceinstaller.password,firstname:this.spiceinstaller.firstname,surname:this.spiceinstaller.surname,email:this.spiceinstaller.email},this.spiceinstaller.selectedStep.completed=!0,this.spiceinstaller.jumpSubject.next({from:this.selfStep,to:this.selfStep.next}))}}return e=SpiceInstallerCredentials,(0,i.Z)(SpiceInstallerCredentials,"ɵfac",(function(t){return new(t||e)(c.Y36(a.f))})),(0,i.Z)(SpiceInstallerCredentials,"ɵcmp",c.Xpm({type:e,selectors:[["spice-installer-credentials"]],inputs:{selfStep:"selfStep"},decls:54,vars:26,consts:[[1,"slds-p-horizontal--medium"],[1,"slds-text-heading--medium","slds-m-bottom_medium"],[1,"slds-form-element","slds-p-vertical--small",3,"ngClass"],[1,"slds-form-element__label"],[1,"slds-required"],[1,"slds-form-element__control"],["type","text","system-trim-input","",1,"slds-input",3,"ngModel","ngModelChange","change"],["class","slds-form-element__help",4,"ngIf"],["type","password","system-trim-input","",1,"slds-input",3,"ngModel","ngModelChange","change"],["type","password","system-trim-input","",1,"slds-input",3,"ngModel","ngModelChange"],[1,"slds-form-element","slds-p-vertical--small"],[1,"slds-p-vertical--small","slds-text-align--right"],[1,"slds-button","slds-button--neutral","slds-col_bump-left",3,"click"],[1,"slds-button","slds-button--brand",3,"click"],[1,"slds-form-element__help"]],template:function(e,t){1&e&&(c.TgZ(0,"div",0)(1,"h2",1),c._uU(2," CRM User Credentials "),c.qZA(),c.TgZ(3,"div",2)(4,"label",3)(5,"abbr",4),c._uU(6,"*"),c.qZA(),c._uU(7,"User Name"),c.qZA(),c.TgZ(8,"div",5)(9,"input",6),c.NdJ("ngModelChange",(function(e){return t.spiceinstaller.username=e}))("change",(function(){return t.selfStep.completed=!1})),c.qZA(),c.YNc(10,re,2,0,"div",7),c.qZA()(),c.TgZ(11,"div",2)(12,"label",3)(13,"abbr",4),c._uU(14,"*"),c.qZA(),c._uU(15,"Password"),c.qZA(),c.TgZ(16,"div",5)(17,"input",8),c.NdJ("ngModelChange",(function(e){return t.spiceinstaller.password=e}))("change",(function(){return t.selfStep.completed=!1,t.spiceinstaller.rpPassword=""})),c.qZA(),c.YNc(18,ce,2,0,"div",7),c.qZA()(),c.TgZ(19,"div",2)(20,"label",3)(21,"abbr",4),c._uU(22,"*"),c.qZA(),c._uU(23,"Repeat Password"),c.qZA(),c.TgZ(24,"div",5)(25,"input",9),c.NdJ("ngModelChange",(function(e){return t.spiceinstaller.rpPassword=e})),c.qZA(),c.YNc(26,ue,2,0,"div",7),c.qZA()(),c.TgZ(27,"div",10)(28,"label",3),c._UZ(29,"abbr",4),c._uU(30,"First Name"),c.qZA(),c.TgZ(31,"div",5)(32,"input",6),c.NdJ("ngModelChange",(function(e){return t.spiceinstaller.firstname=e}))("change",(function(){return t.selfStep.completed=!1})),c.qZA()()(),c.TgZ(33,"div",2)(34,"label",3)(35,"abbr",4),c._uU(36,"*"),c.qZA(),c._uU(37,"Last Name"),c.qZA(),c.TgZ(38,"div",5)(39,"input",6),c.NdJ("ngModelChange",(function(e){return t.spiceinstaller.surname=e}))("change",(function(){return t.selfStep.completed=!1})),c.qZA(),c.YNc(40,he,2,0,"div",7),c.qZA()(),c.TgZ(41,"div",2)(42,"label",3)(43,"abbr",4),c._uU(44,"*"),c.qZA(),c._uU(45,"Email"),c.qZA(),c.TgZ(46,"div",5)(47,"input",6),c.NdJ("ngModelChange",(function(e){return t.spiceinstaller.email=e}))("change",(function(){return t.selfStep.completed=!1})),c.qZA(),c.YNc(48,me,2,0,"div",7),c.qZA()(),c.TgZ(49,"div",11)(50,"button",12),c.NdJ("click",(function(){return t.spiceinstaller.jumpSubject.next({from:t.selfStep,to:t.selfStep.prev})})),c._uU(51,"back"),c.qZA(),c.TgZ(52,"button",13),c.NdJ("click",(function(){return t.saveUser()})),c._uU(53,"next"),c.qZA()()()),2&e&&(c.xp6(3),c.Q6J("ngClass",c.VKq(16,ge,!t.usernameCondition)),c.xp6(6),c.Q6J("ngModel",t.spiceinstaller.username),c.xp6(1),c.Q6J("ngIf",!t.usernameCondition),c.xp6(1),c.Q6J("ngClass",c.VKq(18,ge,!t.passwordCondition)),c.xp6(6),c.Q6J("ngModel",t.spiceinstaller.password),c.xp6(1),c.Q6J("ngIf",!t.passwordCondition),c.xp6(1),c.Q6J("ngClass",c.VKq(20,ge,!t.rpPasswordCondition)),c.xp6(6),c.Q6J("ngModel",t.spiceinstaller.rpPassword),c.xp6(1),c.Q6J("ngIf",!t.rpPasswordCondition),c.xp6(6),c.Q6J("ngModel",t.spiceinstaller.firstname),c.xp6(1),c.Q6J("ngClass",c.VKq(22,ge,!t.surnameCondition)),c.xp6(6),c.Q6J("ngModel",t.spiceinstaller.surname),c.xp6(1),c.Q6J("ngIf",!t.surnameCondition),c.xp6(1),c.Q6J("ngClass",c.VKq(24,ge,!t.emailCondition)),c.xp6(6),c.Q6J("ngModel",t.spiceinstaller.email),c.xp6(1),c.Q6J("ngIf",!t.emailCondition))},dependencies:[n.mk,n.O5,o.Fj,o.JJ,o.On,T.t],encapsulation:2})),SpiceInstallerCredentials})();var fe=s(6449);function be(e,t){if(1&e&&(c.TgZ(0,"option",21),c._uU(1),c.qZA()),2&e){const e=t.$implicit;c.Q6J("ngValue",e.language_code),c.xp6(1),c.Oqu(e.language_name)}}function ve(e,t){if(1&e&&(c.TgZ(0,"option",22),c._uU(1),c.qZA()),2&e){const e=t.$implicit;c.Q6J("value",e.value),c.xp6(1),c.hij(" ",e.name," ")}}function Ze(e,t){if(1&e&&(c.TgZ(0,"option",22),c._uU(1),c.qZA()),2&e){const e=t.$implicit;c.Q6J("value",e.value),c.xp6(1),c.hij(" ",e.name," ")}}function _e(e,t){if(1&e&&(c.TgZ(0,"option",23),c._uU(1),c.qZA()),2&e){const e=t.$implicit;c.Q6J("value",e)("selected",2==e),c.xp6(1),c.hij(" ",e," ")}}function ye(e,t){if(1&e&&(c.TgZ(0,"option",21),c._uU(1),c.qZA()),2&e){const e=t.$implicit;c.Q6J("ngValue",e),c.xp6(1),c.hij(" ",e.show," ")}}function xe(e,t){if(1&e&&(c.TgZ(0,"option",22),c._uU(1),c.qZA()),2&e){const e=t.$implicit;c.Q6J("value",e.key),c.xp6(1),c.hij(" ",e.value," ")}}function we(e,t){if(1&e&&(c.TgZ(0,"option",22),c._uU(1),c.qZA()),2&e){const e=t.$implicit;c.Q6J("value",e),c.xp6(1),c.hij(" ",e," ")}}function Te(e,t){if(1&e&&(c.TgZ(0,"option",22),c._uU(1),c.qZA()),2&e){const e=t.$implicit;c.Q6J("value",e),c.xp6(1),c.hij(" ",e," ")}}function Ce(e,t){if(1&e&&(c.TgZ(0,"option",22),c._uU(1),c.qZA()),2&e){const e=t.$implicit;c.Q6J("value",e),c.xp6(1),c.hij(" ",e," ")}}function Ae(e,t){if(1&e&&(c.TgZ(0,"option",22),c._uU(1),c.qZA()),2&e){const e=t.$implicit;c.Q6J("value",e),c.xp6(1),c.hij(" ",e," ")}}let ke=(()=>{var e;class SpiceInstallerSetPreferences{get numberDelimitation(){const e=this.numberDelimitationsList.find((e=>e.dec_sep==this.spiceinstaller.configObject.preferences.dec_sep&&e.num_grp_sep==this.spiceinstaller.configObject.preferences.num_grp_sep));return e||void 0}set numberDelimitation(e){this.spiceinstaller.configObject.preferences.dec_sep=e.dec_sep,this.spiceinstaller.configObject.preferences.num_grp_sep=e.num_grp_sep}updateNumberDelimitationsList(){for(let e of this.numberDelimitationsList)e.show="1"+e.num_grp_sep+"000"+e.num_grp_sep+"000"+e.dec_sep+"0".repeat(void 0!==this.spiceinstaller.configObject.preferences.currency_significant_digits?this.spiceinstaller.configObject.preferences.currency_significant_digits:2)}constructor(e,t,s,n,o,l){(0,i.Z)(this,"toast",void 0),(0,i.Z)(this,"http",void 0),(0,i.Z)(this,"router",void 0),(0,i.Z)(this,"configurationService",void 0),(0,i.Z)(this,"backend",void 0),(0,i.Z)(this,"spiceinstaller",void 0),(0,i.Z)(this,"selfStep",void 0),(0,i.Z)(this,"languages",[]),(0,i.Z)(this,"loading",!1),(0,i.Z)(this,"currencySignificantDigitsList",[1,2,3,4,5,6]),(0,i.Z)(this,"thousandDelimiterList",[",","."]),(0,i.Z)(this,"now",moment()),(0,i.Z)(this,"timeFormatList",void 0),(0,i.Z)(this,"dateFormatList",void 0),(0,i.Z)(this,"currencyList",[]),(0,i.Z)(this,"weekDayStartList",["Sunday","Monday"]),(0,i.Z)(this,"weekDaysCountList",[5,6,7]),(0,i.Z)(this,"exportDelimiterList",[",",";"]),(0,i.Z)(this,"charsetList",["BIG-5","CP1251","CP1252","EUC-CN","EUC-JP","EUC-KR","EUC-TW","ISO-2022-JP","ISO-2022-KR","ISO-8859-1","ISO-8859-2","ISO-8859-3","ISO-8859-4","ISO-8859-5","ISO-8859-6","ISO-8859-7","ISO-8859-8","ISO-8859-9","ISO-8859-10","ISO-8859-13","ISO-8859-14","ISO-8859-15","KOI8-R","KOI8-U","SJIS","UTF-8"]),(0,i.Z)(this,"numberDelimitationsList",[{show:"1.000.000,00",num_grp_sep:".",dec_sep:","},{show:"1,000,000.00",num_grp_sep:",",dec_sep:"."},{show:"1 000 000,00",num_grp_sep:" ",dec_sep:","}]),(0,i.Z)(this,"browserLanguages",{de:"de_DE",en:"en_us"}),this.toast=e,this.http=t,this.router=s,this.configurationService=n,this.backend=o,this.spiceinstaller=l,this.setDateTimeExamples();let a=navigator.language;this.browserLanguages[a]&&(this.spiceinstaller.configObject.language=this.browserLanguages[a]),this.spiceinstaller.configObject.preferences.timezone=moment.tz.guess(),"de"===a&&this.preSetPreferences(),this.checkReference(),this.http.get(`${this.spiceinstaller.systemurl}/install/getlanguages`).subscribe((e=>{this.languages=e.languages})),this.spiceinstaller.jumpSubject.subscribe((e=>{e.from===this.selfStep&&(this.selfStep.completed||e.to?.pos<this.selfStep.pos?this.spiceinstaller.jump(e.to):this.setPreferences())}))}checkReference(){this.loading=!0,this.http.get(`${this.spiceinstaller.systemurl}/install/checkreference`).subscribe((e=>{this.loading=!1,e||this.toast.sendToast("cannot connect to reference server","error")}))}setPreferences(){this.spiceinstaller.selectedStep.completed=!0,this.spiceinstaller.jumpSubject.next({from:this.selfStep,to:this.selfStep.next})}preSetPreferences(){this.spiceinstaller.configObject.preferences.datef="d.m.Y",this.spiceinstaller.configObject.preferences.timef="H:i",this.spiceinstaller.configObject.preferences.export_charset="UTF-8",this.spiceinstaller.configObject.preferences.currency_significant_digits=2,this.spiceinstaller.configObject.preferences.dec_sep=",",this.spiceinstaller.configObject.preferences.num_grp_sep=".",this.spiceinstaller.configObject.preferences.distance_unit_system="METRIC",this.spiceinstaller.configObject.preferences.week_day_start="Monday",this.spiceinstaller.configObject.preferences.week_days_count=5}setDateTimeExamples(){this.now.format("MM-DD")===this.now.format("DD-MM")&&(this.now=moment(moment().format("YYYY-12-31"))),this.dateFormatList=[{name:this.now.format("YYYY-MM-DD"),value:"Y-m-d"},{name:this.now.format("MM-DD-YYYY"),value:"m-d-Y"},{name:this.now.format("DD-MM-YYYY"),value:"d-m-Y"},{name:this.now.format("Y/MM/DD"),value:"Y/m/d"},{name:this.now.format("MM/DD/YYYY"),value:"m/d/Y"},{name:this.now.format("DD/MM/YYYY"),value:"d/m/Y"},{name:this.now.format("YYYY.MM.DD"),value:"Y.m.d"},{name:this.now.format("DD.MM.YYYY"),value:"d.m.Y"},{name:this.now.format("MM.DD.YYYY"),value:"m.d.Y"}],this.timeFormatList=[{name:this.now.format("HH:mm"),value:"H:i"},{name:this.now.format("hh:mma"),value:"h:ia"},{name:this.now.format("hh:mmA"),value:"h:iA"},{name:this.now.format("hh:mm a"),value:"h:i a"},{name:this.now.format("hh:mm A"),value:"h:i A"},{name:this.now.format("HH.mm"),value:"H.i"},{name:this.now.format("hh.mma"),value:"h.ia"},{name:this.now.format("hh.mmA"),value:"h.iA"},{name:this.now.format("hh.mm a"),value:"h.i a"},{name:this.now.format("hh.mm A"),value:"h.i A"}]}}return e=SpiceInstallerSetPreferences,(0,i.Z)(SpiceInstallerSetPreferences,"ɵfac",(function(t){return new(t||e)(c.Y36(Z.A),c.Y36(_.eN),c.Y36(y.F0),c.Y36(x.C),c.Y36(w.y),c.Y36(a.f))})),(0,i.Z)(SpiceInstallerSetPreferences,"ɵcmp",c.Xpm({type:e,selectors:[["spice-installer-set-preferences"]],inputs:{selfStep:"selfStep"},decls:121,vars:24,consts:[[1,"slds-m-horizontal--medium"],[1,"slds-text-heading--medium"],[1,"slds-m-top_medium","slds-m-bottom_small"],[2,"width","fit-content"],[1,"slds-form-element","slds-m-top_xx-small"],[1,"slds-form-element__label"],[1,"slds-required"],[1,"slds-form-element__control"],[1,"slds-select_container"],[1,"slds-select",3,"ngModel","ngModelChange"],[3,"ngValue",4,"ngFor","ngForOf"],[1,"slds-form-element"],["denyEmpty","true",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["value","METRIC","selected",""],["value","IMPERIAL"],[1,"slds-select",3,"ngModel","ngModelChange","change"],[3,"value","selected",4,"ngFor","ngForOf"],[1,"slds-m-top--medium","slds-text-align_right"],[1,"slds-button","slds-button--neutral","slds-col_bump-left",3,"click"],[1,"slds-button","slds-button--brand",3,"click"],[3,"ngValue"],[3,"value"],[3,"value","selected"]],template:function(e,t){1&e&&(c.TgZ(0,"div",0)(1,"h2",1),c._uU(2,"Screen Output & Data Export"),c.qZA(),c.TgZ(3,"div",2),c._uU(4,"Set the most important settings for screen output and data export. These settings also apply automatically to each user as long as a user does not make any individual settings."),c.qZA(),c.TgZ(5,"div",3)(6,"div",4)(7,"label",5)(8,"abbr",6),c._uU(9,"*"),c.qZA(),c._uU(10,"Language"),c.qZA(),c.TgZ(11,"div",7)(12,"div",8)(13,"select",9),c.NdJ("ngModelChange",(function(e){return t.spiceinstaller.configObject.language=e})),c.YNc(14,be,2,2,"option",10),c.qZA()()()(),c.TgZ(15,"div",4)(16,"label",5)(17,"abbr",6),c._uU(18,"*"),c.qZA(),c._uU(19,"Timezone"),c.qZA(),c.TgZ(20,"div",11)(21,"system-input-timezone",12),c.NdJ("ngModelChange",(function(e){return t.spiceinstaller.configObject.preferences.timezone=e})),c.qZA()()(),c.TgZ(22,"div",4)(23,"label",5)(24,"abbr",6),c._uU(25,"*"),c.qZA(),c._uU(26,"Date Format"),c.qZA(),c.TgZ(27,"div",11)(28,"div",8)(29,"select",9),c.NdJ("ngModelChange",(function(e){return t.spiceinstaller.configObject.preferences.datef=e})),c.YNc(30,ve,2,2,"option",13),c.qZA()()()(),c.TgZ(31,"div",4)(32,"label",5)(33,"abbr",6),c._uU(34,"*"),c.qZA(),c._uU(35,"Time Format"),c.qZA(),c.TgZ(36,"div",11)(37,"div",8)(38,"select",9),c.NdJ("ngModelChange",(function(e){return t.spiceinstaller.configObject.preferences.timef=e})),c.YNc(39,Ze,2,2,"option",13),c.qZA()()()(),c.TgZ(40,"div",4)(41,"label",5)(42,"abbr",6),c._uU(43,"*"),c.qZA(),c._uU(44,"Distance Unit System"),c.qZA(),c.TgZ(45,"div",11)(46,"div",8)(47,"select",9),c.NdJ("ngModelChange",(function(e){return t.spiceinstaller.configObject.preferences.distance_unit_system=e})),c.TgZ(48,"option",14),c._uU(49,"metric"),c.qZA(),c.TgZ(50,"option",15),c._uU(51,"imperial"),c.qZA()()()()(),c.TgZ(52,"div",4)(53,"label",5)(54,"abbr",6),c._uU(55,"*"),c.qZA(),c._uU(56,"Decimal Digits"),c.qZA(),c.TgZ(57,"div",11)(58,"div",8)(59,"select",16),c.NdJ("ngModelChange",(function(e){return t.spiceinstaller.configObject.preferences.currency_significant_digits=e}))("change",(function(){return t.updateNumberDelimitationsList()})),c.YNc(60,_e,2,3,"option",17),c.qZA()()()(),c.TgZ(61,"div",4)(62,"label",5)(63,"abbr",6),c._uU(64,"*"),c.qZA(),c._uU(65,"Number Format"),c.qZA(),c.TgZ(66,"div",11)(67,"div",8)(68,"select",9),c.NdJ("ngModelChange",(function(e){return t.numberDelimitation=e})),c.YNc(69,ye,2,2,"option",10),c.qZA()()()(),c.TgZ(70,"div",4)(71,"label",5)(72,"abbr",6),c._uU(73,"*"),c.qZA(),c._uU(74,"Name Format"),c.qZA(),c.TgZ(75,"div",11)(76,"div",8)(77,"select",9),c.NdJ("ngModelChange",(function(e){return t.spiceinstaller.configObject.preferences.locale_name_format=e})),c.YNc(78,xe,2,2,"option",13),c.ALo(79,"keyvalue"),c.qZA()()()(),c.TgZ(80,"div",4)(81,"label",5)(82,"abbr",6),c._uU(83,"*"),c.qZA(),c._uU(84,"Week Start Day"),c.qZA(),c.TgZ(85,"div",11)(86,"div",8)(87,"select",9),c.NdJ("ngModelChange",(function(e){return t.spiceinstaller.configObject.preferences.week_day_start=e})),c.YNc(88,we,2,2,"option",13),c.qZA()()()(),c.TgZ(89,"div",4)(90,"label",5)(91,"abbr",6),c._uU(92,"*"),c.qZA(),c._uU(93,"Week Days Count"),c.qZA(),c.TgZ(94,"div",11)(95,"div",8)(96,"select",9),c.NdJ("ngModelChange",(function(e){return t.spiceinstaller.configObject.preferences.week_days_count=e})),c.YNc(97,Te,2,2,"option",13),c.qZA()()()(),c.TgZ(98,"div",4)(99,"label",5)(100,"abbr",6),c._uU(101,"*"),c.qZA(),c._uU(102,"Export Delimiter"),c.qZA(),c.TgZ(103,"div",11)(104,"div",8)(105,"select",9),c.NdJ("ngModelChange",(function(e){return t.spiceinstaller.configObject.preferences.export_delimiter=e})),c.YNc(106,Ce,2,2,"option",13),c.qZA()()()(),c.TgZ(107,"div",4)(108,"label",5)(109,"abbr",6),c._uU(110,"*"),c.qZA(),c._uU(111,"Export Charset"),c.qZA(),c.TgZ(112,"div",11)(113,"div",8)(114,"select",9),c.NdJ("ngModelChange",(function(e){return t.spiceinstaller.configObject.preferences.export_charset=e})),c.YNc(115,Ae,2,2,"option",13),c.qZA()()()()(),c.TgZ(116,"div",18)(117,"button",19),c.NdJ("click",(function(){return t.spiceinstaller.jumpSubject.next({from:t.selfStep,to:t.selfStep.prev})})),c._uU(118,"back"),c.qZA(),c.TgZ(119,"button",20),c.NdJ("click",(function(){return t.setPreferences()})),c._uU(120,"next"),c.qZA()()()),2&e&&(c.xp6(13),c.Q6J("ngModel",t.spiceinstaller.configObject.language),c.xp6(1),c.Q6J("ngForOf",t.languages),c.xp6(7),c.Q6J("ngModel",t.spiceinstaller.configObject.preferences.timezone),c.xp6(8),c.Q6J("ngModel",t.spiceinstaller.configObject.preferences.datef),c.xp6(1),c.Q6J("ngForOf",t.dateFormatList),c.xp6(8),c.Q6J("ngModel",t.spiceinstaller.configObject.preferences.timef),c.xp6(1),c.Q6J("ngForOf",t.timeFormatList),c.xp6(8),c.Q6J("ngModel",t.spiceinstaller.configObject.preferences.distance_unit_system),c.xp6(12),c.Q6J("ngModel",t.spiceinstaller.configObject.preferences.currency_significant_digits),c.xp6(1),c.Q6J("ngForOf",t.currencySignificantDigitsList),c.xp6(8),c.Q6J("ngModel",t.numberDelimitation),c.xp6(1),c.Q6J("ngForOf",t.numberDelimitationsList),c.xp6(8),c.Q6J("ngModel",t.spiceinstaller.configObject.preferences.locale_name_format),c.xp6(1),c.Q6J("ngForOf",c.lcZ(79,22,t.spiceinstaller.nameFormats)),c.xp6(9),c.Q6J("ngModel",t.spiceinstaller.configObject.preferences.week_day_start),c.xp6(1),c.Q6J("ngForOf",t.weekDayStartList),c.xp6(8),c.Q6J("ngModel",t.spiceinstaller.configObject.preferences.week_days_count),c.xp6(1),c.Q6J("ngForOf",t.weekDaysCountList),c.xp6(8),c.Q6J("ngModel",t.spiceinstaller.configObject.preferences.export_delimiter),c.xp6(1),c.Q6J("ngForOf",t.exportDelimiterList),c.xp6(8),c.Q6J("ngModel",t.spiceinstaller.configObject.preferences.export_charset),c.xp6(1),c.Q6J("ngForOf",t.charsetList))},dependencies:[n.sg,o.YN,o.Kr,o.EJ,o.JJ,o.On,fe.R,n.Nd],encapsulation:2})),SpiceInstallerSetPreferences})();var Le=s(4044);function Ie(e,t){if(1&e&&(c.TgZ(0,"tr",5)(1,"td")(2,"div",6),c._uU(3),c.qZA()(),c.TgZ(4,"td")(5,"div",6),c._uU(6),c.qZA()()()),2&e){const e=t.$implicit,s=c.oxw();c.xp6(3),c.Oqu(s.spiceinstaller.keyToLabel(e.key)),c.xp6(3),c.Oqu(e.value)}}function Me(e,t){if(1&e&&(c.TgZ(0,"tr",5)(1,"td")(2,"div",6),c._uU(3),c.qZA()(),c.TgZ(4,"td")(5,"div",6),c._uU(6),c.qZA()()()),2&e){const e=t.$implicit,s=c.oxw();c.xp6(3),c.Oqu(s.spiceinstaller.keyToLabel(e.key)),c.xp6(3),c.Oqu(e.value)}}function Se(e,t){if(1&e&&(c.TgZ(0,"tr",5)(1,"td")(2,"div",6),c._uU(3),c.qZA()(),c.TgZ(4,"td")(5,"div",6),c._uU(6),c.qZA()()()),2&e){const e=t.$implicit,s=c.oxw();c.xp6(3),c.Oqu(s.spiceinstaller.keyToLabel(e.key)),c.xp6(3),c.Oqu(e.value)}}function Je(e,t){if(1&e&&(c.TgZ(0,"tr",5)(1,"td")(2,"div",6),c._uU(3),c.qZA()(),c.TgZ(4,"td")(5,"div",6),c._uU(6),c.qZA()()()),2&e){const e=t.$implicit,s=c.oxw();c.xp6(3),c.Oqu(s.spiceinstaller.keyToLabel(e.key)),c.xp6(3),c.Oqu(e.value)}}function Oe(e,t){if(1&e&&(c.TgZ(0,"tr",5)(1,"td")(2,"div",6),c._uU(3),c.qZA()(),c.TgZ(4,"td")(5,"div",6),c._uU(6),c.qZA()()()),2&e){const e=t.$implicit,s=c.oxw();c.xp6(3),c.Oqu(s.spiceinstaller.keyToLabel(e.key)),c.xp6(3),c.Oqu(e.value)}}function Ne(e,t){if(1&e&&(c.TgZ(0,"tr",5)(1,"td")(2,"div",6),c._uU(3),c.qZA()(),c.TgZ(4,"td")(5,"div",6),c._uU(6),c.qZA()()()),2&e){const e=t.$implicit,s=c.oxw();c.xp6(3),c.Oqu(e.key),c.xp6(3),c.Oqu(s.showPreference(e.key))}}function Fe(e,t){1&e&&(c.ynx(0),c.TgZ(1,"section",12)(2,"div",13),c._UZ(3,"div",14),c.TgZ(4,"div",15)(5,"div",16),c._UZ(6,"div",17),c.TgZ(7,"div",18),c._uU(8,"Installing"),c.qZA()()()()(),c._UZ(9,"div",19),c.BQk())}let qe=(()=>{var e;class SpiceInstallerReview{constructor(e,t,s,n,o,l){(0,i.Z)(this,"toast",void 0),(0,i.Z)(this,"modal",void 0),(0,i.Z)(this,"http",void 0),(0,i.Z)(this,"router",void 0),(0,i.Z)(this,"configurationService",void 0),(0,i.Z)(this,"spiceinstaller",void 0),(0,i.Z)(this,"selfStep",void 0),(0,i.Z)(this,"installing",!1),(0,i.Z)(this,"prefsToReview",{Timezone:"timezone","Date Format":"datef","Time Format":"timef","Distance Unit System":"distance_unit_system","Name Format":"locale_name_format","Week Start Day":"week_day_start","Week Days Count":"week_days_count","Export Delimiter":"export_delimiter","Export Charset":"export_charset"}),this.toast=e,this.modal=t,this.http=s,this.router=n,this.configurationService=o,this.spiceinstaller=l,this.spiceinstaller.jumpSubject.subscribe((e=>{e.from===this.selfStep&&(this.selfStep.completed||e.to?.pos<this.selfStep.pos)&&this.spiceinstaller.jump(e.to)}))}ngAfterViewInit(){this.spiceinstaller.selectedStep.completed=!0,this.spiceinstaller.steps[7]=this.spiceinstaller.selectedStep}install(){this.installing=!0,this.http.post(`${this.spiceinstaller.systemurl}/install/process`,this.spiceinstaller.configObject).subscribe((e=>{let t=e;if(this.installing=!1,t.success)window.location.href=window.location.href.replace("#/install","");else for(let e in t.errors)this.toast.sendAlert("Error with: "+e,"error")}),(e=>{if(500===e.status)this.toast.sendAlert(e.message,"error");this.installing=!1}))}showPreference(e){return"function"==typeof this.prefsToReview[e]?this.prefsToReview[e]():this.spiceinstaller.configObject.preferences[this.prefsToReview[e]]}getNumberFormat(){return"1"+this.spiceinstaller.configObject.preferences.num_grp_sep+"000"+this.spiceinstaller.configObject.preferences.num_grp_sep+"000"+this.spiceinstaller.configObject.preferences.dec_sep+"0".repeat(this.spiceinstaller.configObject.preferences.currency_significant_digits)}}return e=SpiceInstallerReview,(0,i.Z)(SpiceInstallerReview,"ɵfac",(function(t){return new(t||e)(c.Y36(Z.A),c.Y36(Le.o),c.Y36(_.eN),c.Y36(y.F0),c.Y36(x.C),c.Y36(a.f))})),(0,i.Z)(SpiceInstallerReview,"ɵcmp",c.Xpm({type:e,selectors:[["spice-installer-review"]],inputs:{selfStep:"selfStep"},decls:54,vars:20,consts:[[1,"slds-text-heading_medium","slds-m-horizontal--medium","slds-m-bottom_medium"],[1,"slds-table","slds-table_cell-buffer","slds-table_bordered","slds-table_col-bordered"],["colspan","2",1,"slds-text-heading_small"],["class","slds-hint-parent",4,"ngFor","ngForOf"],["colspan","2",1,"slds-text-heading_small","slds-border_top"],[1,"slds-hint-parent"],[1,"slds-truncate"],[1,"slds-text-align_right","slds-align-bottom","slds-grid","slds-grid--vertical-align-center","slds-p-vertical--small","slds-p-horizontal_medium"],[1,"slds-size--1-of-1"],[1,"slds-button","slds-button--neutral","slds-col_bump-left",3,"click"],[1,"slds-button","slds-button--brand",3,"click"],[4,"ngIf"],["role","dialog","aria-modal","true",1,"slds-modal","slds-fade-in-open"],[1,"slds-modal__container"],[1,"slds-modal__header","slds-modal__header_empty"],[1,"slds-modal__content","slds-p-around_medium","slds-align--absolute-center"],[1,"slds-p-horizontal--x-large","slds-grid","slds-grid--vertical-align-center"],[1,"cssload-double-torus",2,"width","16px","height","16px"],[1,"slds-p-left--medium"],[1,"slds-backdrop","slds-backdrop_open"]],template:function(e,t){1&e&&(c.TgZ(0,"h2",0),c._uU(1,"Review & Install"),c.qZA(),c.TgZ(2,"table",1)(3,"thead")(4,"tr")(5,"th",2),c._uU(6,"Backend Configuration Settings"),c.qZA()()(),c.TgZ(7,"tbody"),c.YNc(8,Ie,7,2,"tr",3),c.ALo(9,"keyvalue"),c.qZA(),c.TgZ(10,"thead")(11,"tr")(12,"th",4),c._uU(13,"Database Configuration Settings"),c.qZA()()(),c.TgZ(14,"tbody"),c.YNc(15,Me,7,2,"tr",3),c.ALo(16,"keyvalue"),c.YNc(17,Se,7,2,"tr",3),c.ALo(18,"keyvalue"),c.qZA(),c.TgZ(19,"thead")(20,"tr")(21,"th",4),c._uU(22,"FTS Configuration Settings"),c.qZA()()(),c.TgZ(23,"tbody"),c.YNc(24,Je,7,2,"tr",3),c.ALo(25,"keyvalue"),c.qZA(),c.TgZ(26,"thead")(27,"tr")(28,"th",4),c._uU(29,"Credentials"),c.qZA()()(),c.TgZ(30,"tbody"),c.YNc(31,Oe,7,2,"tr",3),c.ALo(32,"keyvalue"),c.qZA(),c.TgZ(33,"thead")(34,"tr")(35,"th",4),c._uU(36,"Output & Export Settings"),c.qZA()()(),c.TgZ(37,"tbody")(38,"tr",5)(39,"td")(40,"div",6),c._uU(41,"Language"),c.qZA()(),c.TgZ(42,"td")(43,"div",6),c._uU(44),c.qZA()()(),c.YNc(45,Ne,7,2,"tr",3),c.ALo(46,"keyvalue"),c.qZA()(),c.TgZ(47,"div",7)(48,"div",8)(49,"button",9),c.NdJ("click",(function(){return t.spiceinstaller.jumpSubject.next({from:t.selfStep,to:t.selfStep.prev})})),c._uU(50,"back"),c.qZA(),c.TgZ(51,"button",10),c.NdJ("click",(function(){return t.install()})),c._uU(52,"Begin Installation"),c.qZA()()(),c.YNc(53,Fe,10,0,"ng-container",11)),2&e&&(c.xp6(8),c.Q6J("ngForOf",c.lcZ(9,8,t.spiceinstaller.configObject.backendconfig)),c.xp6(7),c.Q6J("ngForOf",c.lcZ(16,10,t.spiceinstaller.configObject.database)),c.xp6(2),c.Q6J("ngForOf",c.lcZ(18,12,t.spiceinstaller.configObject.dboptions)),c.xp6(7),c.Q6J("ngForOf",c.lcZ(25,14,t.spiceinstaller.configObject.fts)),c.xp6(7),c.Q6J("ngForOf",c.lcZ(32,16,t.spiceinstaller.configObject.credentials)),c.xp6(13),c.Oqu(t.spiceinstaller.configObject.language),c.xp6(1),c.Q6J("ngForOf",c.lcZ(46,18,t.prefsToReview)),c.xp6(8),c.Q6J("ngIf",t.installing))},dependencies:[n.sg,n.O5,n.Nd],encapsulation:2})),SpiceInstallerReview})();function Ee(e,t){if(1&e&&(c.TgZ(0,"div",2),c._UZ(1,"spice-installer-set-backend",3),c.qZA()),2&e){const e=c.oxw(2);c.xp6(1),c.Q6J("selfStep",e.spiceinstaller.selectedStep)}}function Ye(e,t){if(1&e&&(c.TgZ(0,"div",2),c._UZ(1,"spice-installer-systemcheck",3),c.qZA()),2&e){const e=c.oxw(2);c.xp6(1),c.Q6J("selfStep",e.spiceinstaller.selectedStep)}}function De(e,t){if(1&e&&(c.TgZ(0,"div",2),c._UZ(1,"spice-installer-licence",3),c.qZA()),2&e){const e=c.oxw(2);c.xp6(1),c.Q6J("selfStep",e.spiceinstaller.selectedStep)}}function Qe(e,t){if(1&e&&(c.TgZ(0,"div",2),c._UZ(1,"spice-installer-database",3),c.qZA()),2&e){const e=c.oxw(2);c.xp6(1),c.Q6J("selfStep",e.spiceinstaller.selectedStep)}}function Ue(e,t){if(1&e&&(c.TgZ(0,"div",2),c._UZ(1,"spice-installer-fts",3),c.qZA()),2&e){const e=c.oxw(2);c.xp6(1),c.Q6J("selfStep",e.spiceinstaller.selectedStep)}}function Re(e,t){if(1&e&&(c.TgZ(0,"div",2),c._UZ(1,"spice-installer-credentials",3),c.qZA()),2&e){const e=c.oxw(2);c.xp6(1),c.Q6J("selfStep",e.spiceinstaller.selectedStep)}}function je(e,t){if(1&e&&(c.TgZ(0,"div",2),c._UZ(1,"spice-installer-set-preferences",3),c.qZA()),2&e){const e=c.oxw(2);c.xp6(1),c.Q6J("selfStep",e.spiceinstaller.selectedStep)}}function Be(e,t){if(1&e&&(c.TgZ(0,"div",2),c._UZ(1,"spice-installer-review",3),c.qZA()),2&e){const e=c.oxw(2);c.xp6(1),c.Q6J("selfStep",e.spiceinstaller.selectedStep)}}function Ge(e,t){if(1&e&&(c.TgZ(0,"div"),c.YNc(1,Ee,2,1,"div",1),c.YNc(2,Ye,2,1,"div",1),c.YNc(3,De,2,1,"div",1),c.YNc(4,Qe,2,1,"div",1),c.YNc(5,Ue,2,1,"div",1),c.YNc(6,Re,2,1,"div",1),c.YNc(7,je,2,1,"div",1),c.YNc(8,Be,2,1,"div",1),c.qZA()),2&e){const e=t.$implicit,s=c.oxw();c.xp6(1),c.Q6J("ngIf","setbackend"==e.id&&"setbackend"==s.spiceinstaller.selectedStep.id),c.xp6(1),c.Q6J("ngIf","systemcheck"==e.id&&"systemcheck"==s.spiceinstaller.selectedStep.id),c.xp6(1),c.Q6J("ngIf","licence"==e.id&&"licence"==s.spiceinstaller.selectedStep.id),c.xp6(1),c.Q6J("ngIf","database"==e.id&&"database"==s.spiceinstaller.selectedStep.id),c.xp6(1),c.Q6J("ngIf","fts"==e.id&&"fts"==s.spiceinstaller.selectedStep.id),c.xp6(1),c.Q6J("ngIf","credentials"==e.id&&"credentials"==s.spiceinstaller.selectedStep.id),c.xp6(1),c.Q6J("ngIf","preferences"==e.id&&"preferences"==s.spiceinstaller.selectedStep.id),c.xp6(1),c.Q6J("ngIf","review"==e.id&&"review"==s.spiceinstaller.selectedStep.id)}}let Pe=(()=>{var e;class SpiceInstallerDetailContainer{constructor(e,t,s,n,o,l,a){(0,i.Z)(this,"toast",void 0),(0,i.Z)(this,"http",void 0),(0,i.Z)(this,"router",void 0),(0,i.Z)(this,"configurationService",void 0),(0,i.Z)(this,"backend",void 0),(0,i.Z)(this,"spiceinstaller",void 0),(0,i.Z)(this,"view",void 0),this.toast=e,this.http=t,this.router=s,this.configurationService=n,this.backend=o,this.spiceinstaller=l,this.view=a,this.view.setEditMode()}}return e=SpiceInstallerDetailContainer,(0,i.Z)(SpiceInstallerDetailContainer,"ɵfac",(function(t){return new(t||e)(c.Y36(Z.A),c.Y36(_.eN),c.Y36(y.F0),c.Y36(x.C),c.Y36(w.y),c.Y36(a.f),c.Y36(v.e))})),(0,i.Z)(SpiceInstallerDetailContainer,"ɵcmp",c.Xpm({type:e,selectors:[["spice-installer-detail-container"]],features:[c._Bn([v.e])],decls:1,vars:1,consts:[[4,"ngFor","ngForOf"],["class","slds-grid slds-grid_vertical",4,"ngIf"],[1,"slds-grid","slds-grid_vertical"],[3,"selfStep"]],template:function(e,t){1&e&&c.YNc(0,Ge,9,8,"div",0),2&e&&c.Q6J("ngForOf",t.spiceinstaller.steps)},dependencies:[n.sg,n.O5,L,O,q,ie,de,pe,ke,qe],encapsulation:2})),SpiceInstallerDetailContainer})();var He=s(3194);let ze=(()=>{var e;class SpiceInstallerModule{}return e=SpiceInstallerModule,(0,i.Z)(SpiceInstallerModule,"ɵfac",(function(t){return new(t||e)})),(0,i.Z)(SpiceInstallerModule,"ɵmod",c.oAB({type:e})),(0,i.Z)(SpiceInstallerModule,"ɵinj",c.cJS({providers:[a.f],imports:[n.ez,o.u5,l.o,d.SystemComponents]})),SpiceInstallerModule})();("undefined"==typeof ngJitMode||ngJitMode)&&c.kYT(ze,{declarations:[r.s,b,Pe,L,O,q,ie,U,P,$,de,pe,ke,qe],imports:[n.ez,o.u5,l.o,d.SystemComponents],exports:[r.s]}),c.B6R(r.s,[He.t,b,Pe],[])},8861:(e,t,s)=>{"use strict";s.d(t,{S:()=>y});var i=s(1180),n=s(2242),o=s(2667),l=s(5329),a=s(4154),d=s(5710),r=s(4755),c=s(2656),u=s(3463),h=s(5681),m=s(151);function g(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"button",3),n.NdJ("click",(function(){const t=n.CHM(e).$implicit,s=n.oxw();return n.KtG(s.propagateclick(t.id))})),n.TgZ(1,"object-action-container-item",4),n.NdJ("actionemitter",(function(t){n.CHM(e);const s=n.oxw();return n.KtG(s.emitaction(t))})),n.qZA()()}if(2&e){const e=t.$implicit,s=n.oxw();n.Q6J("ngClass",s.addclasses(e))("disabled",s.isDisabled(e.id)),n.xp6(1),n.Q6J("actionitem",e)("displayasicon",s.displayasicon)}}function p(e,t){if(1&e&&(n.TgZ(0,"div",15),n._UZ(1,"system-label",16),n.qZA()),2&e){const e=n.oxw().$implicit;n.xp6(1),n.Q6J("label","undefined"==e.name?"LBL_DEFAULT":e.name)}}const f=function(e){return{"slds-hide":e}},b=function(e){return{"slds-disabled-text":e}};function v(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"li",17),n.NdJ("click",(function(){const t=n.CHM(e).$implicit,s=n.oxw(3);return n.KtG(s.propagateclick(t.id))})),n.TgZ(1,"a",18)(2,"object-action-container-item",19),n.NdJ("actionemitter",(function(t){n.CHM(e);const s=n.oxw(3);return n.KtG(s.emitaction(t))})),n.qZA()()()}if(2&e){const e=t.$implicit,s=n.oxw(3);n.Q6J("ngClass",n.VKq(3,f,s.isHidden(e.id))),n.xp6(2),n.Q6J("ngClass",n.VKq(5,b,s.isDisabled(e.id)))("actionitem",e)}}function Z(e,t){if(1&e&&(n.TgZ(0,"div"),n.YNc(1,p,2,1,"div",12),n.TgZ(2,"ul",13),n.YNc(3,v,3,7,"li",14),n.qZA()()),2&e){const e=t.$implicit,s=t.last,i=n.oxw(2);n.Udp("width","horizontal"==i.grouped?"160px":"initial")("min-width","horizontal"==i.grouped?"160px":"initial"),n.ekj("slds-hide",e.hidden)("slds-border--right",!s&&"horizontal"==i.grouped),n.xp6(1),n.Q6J("ngIf",i.groups.length>1),n.xp6(1),n.ekj("slds-hide",e.hidden),n.xp6(1),n.Q6J("ngForOf",e.items)}}function _(e,t){if(1&e&&(n.TgZ(0,"div",5)(1,"button",6),n._UZ(2,"system-button-icon",7),n.TgZ(3,"span",8),n._UZ(4,"system-label",9),n.qZA()(),n.TgZ(5,"div",10),n.YNc(6,Z,4,12,"div",11),n.qZA()()),2&e){const e=n.oxw();n.xp6(1),n.Q6J("disabled",e.opendisabled),n.xp6(4),n.ekj("slds-grid","horizontal"==e.grouped),n.xp6(1),n.Q6J("ngForOf",e.groups)}}let y=(()=>{var e;class ObjectActionContainer{constructor(e,t,s,o,l){(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"model",void 0),(0,i.Z)(this,"ngZone",void 0),(0,i.Z)(this,"cdRef",void 0),(0,i.Z)(this,"actionitemlist",void 0),(0,i.Z)(this,"disabled",!1),(0,i.Z)(this,"containerclass","slds-button-group"),(0,i.Z)(this,"displayasicon",!1),(0,i.Z)(this,"actionset",""),(0,i.Z)(this,"mainactionitems",[]),(0,i.Z)(this,"actionemitter",new n.vpe),(0,i.Z)(this,"stable",!1),(0,i.Z)(this,"horizontalView",!1),(0,i.Z)(this,"stableSub",void 0),(0,i.Z)(this,"groups",[]),(0,i.Z)(this,"grouped",void 0),this.language=e,this.metadata=t,this.model=s,this.ngZone=o,this.cdRef=l}ngDoCheck(){this.stable&&this.groups.forEach((e=>{e.hidden=0==this.actionitemlist.filter((t=>(t.actionitem.actionconfig?.group==e.name||!t.actionitem.actionconfig?.group&&"undefined"==e.name)&&!t.hidden)).length}))}buildItems(){const e=this.metadata.getActionSetItems(this.actionset).sort(((e,t)=>e.sequence>t.sequence?1:-1));this.mainactionitems=[];let t=!0;this.groups=[];const s={};for(const i of e){const e={disabled:!0,id:i.id,sequence:i.sequence,action:i.action,component:i.component,actionconfig:i.actionconfig};if(t||"1"==i.singlebutton)this.mainactionitems.push(e),t=!1;else if(!this.isHidden(i.id)){const t=["horizontal","vertical"].indexOf(this.grouped)>-1&&i.actionconfig?.group?i.actionconfig?.group:"undefined";s[t]?s[t].items.push(e):s[t]={name:t,sequence:"undefined"==t?1e3:Object.keys(s).length+1,items:[e],hidden:!1}}}this.groups=Object.values(s).sort(((e,t)=>e.sequence>t.sequence?1:-1))}ngOnChanges(){this.grouped=this.metadata.getActionSet(this.actionset)?.grouped,this.buildItems()}ngAfterViewInit(){this.stableSub=this.ngZone.onStable.subscribe((e=>{this.stable=!0,this.stableSub.unsubscribe(),this.cdRef.detectChanges()}))}get opendisabled(){let e=!0;return this.groups.some((t=>t.items.some((t=>{if(!1===this.isDisabled(t.id))return e=!1,!0})))),e}get hasAddItems(){return this.groups.some((e=>e.items.length>0))}addclasses(e){let t=e.actionconfig.addclasses;return this.isHidden(e.id)&&(t+=" slds-hide"),t}isDisabled(e){if(this.disabled)return!0;let t=!0;return this.actionitemlist&&this.actionitemlist.some((s=>{if(s.id==e)return t=s.disabled,!0})),t}isHidden(e){if(!this.stable)return!1;let t=!1;if(this.actionitemlist){let s=this.actionitemlist.find((t=>t.id==e));s&&(t=s.hidden)}return t}isGroupHidden(e,t){return!!this.stable&&0==Array.from(t.children).filter((e=>!e.classList.contains("slds-hide"))).length}propagateclick(e){this.actionitemlist.some((t=>{if(t.id==e)return t.disabled||t.execute(),!0}))}emitaction(e){this.actionemitter.emit(e)}}return e=ObjectActionContainer,(0,i.Z)(ObjectActionContainer,"ɵfac",(function(t){return new(t||e)(n.Y36(l.d),n.Y36(a.Pu),n.Y36(d.o),n.Y36(n.R0b),n.Y36(n.sBO))})),(0,i.Z)(ObjectActionContainer,"ɵcmp",n.Xpm({type:e,selectors:[["object-action-container"]],viewQuery:function(e,t){if(1&e&&n.Gf(o.s,5),2&e){let e;n.iGM(e=n.CRH())&&(t.actionitemlist=e)}},inputs:{disabled:"disabled",containerclass:"containerclass",displayasicon:"displayasicon",actionset:"actionset"},outputs:{actionemitter:"actionemitter"},features:[n.TTD],decls:3,vars:3,consts:[["role","group",3,"ngClass"],["class","slds-button slds-button_neutral",3,"ngClass","disabled","click",4,"ngFor","ngForOf"],["class","slds-dropdown-trigger slds-dropdown-trigger_click slds-button_last","system-dropdown-trigger","",4,"ngIf"],[1,"slds-button","slds-button_neutral",3,"ngClass","disabled","click"],[3,"actionitem","displayasicon","actionemitter"],["system-dropdown-trigger","",1,"slds-dropdown-trigger","slds-dropdown-trigger_click","slds-button_last"],["aria-haspopup","true","system-title","LBL_MORE",1,"slds-button","slds-button_icon","slds-button_icon-border-filled",3,"disabled"],["icon","down"],[1,"slds-assistive-text"],["label","LBL_MORE"],[1,"slds-dropdown","slds-dropdown_right","slds-dropdown_actions","slds-p-around--none",2,"max-width","initial"],[3,"slds-hide","slds-border--right","width","min-width",4,"ngFor","ngForOf"],["class","slds-p-around--x-small slds-theme--shade slds-text-title--caps",4,"ngIf"],["role","menu",1,"slds-dropdown__list"],["class","slds-dropdown__item","role","presentation",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"slds-p-around--x-small","slds-theme--shade","slds-text-title--caps"],[3,"label"],["role","presentation",1,"slds-dropdown__item",3,"ngClass","click"],["href","javascript:void(0);","role","menuitem","tabindex","0"],[1,"slds-truncate",3,"ngClass","actionitem","actionemitter"]],template:function(e,t){1&e&&(n.TgZ(0,"div",0),n.YNc(1,g,2,4,"button",1),n.YNc(2,_,7,4,"div",2),n.qZA()),2&e&&(n.Q6J("ngClass",t.containerclass),n.xp6(1),n.Q6J("ngForOf",t.mainactionitems),n.xp6(1),n.Q6J("ngIf",t.hasAddItems))},dependencies:[r.mk,r.sg,r.O5,c.J,u._,h.l,m.S,o.s],encapsulation:2})),ObjectActionContainer})()},2667:(e,t,s)=>{"use strict";s.d(t,{s:()=>c});var i=s(1180),n=s(2242),o=s(727),l=s(5329),a=s(4154),d=s(5710);const r=["actioncontainer"];let c=(()=>{var e;class ObjectActionContainerItem{constructor(e,t,s,l,a,d){(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"model",void 0),(0,i.Z)(this,"ngZone",void 0),(0,i.Z)(this,"injector",void 0),(0,i.Z)(this,"cdr",void 0),(0,i.Z)(this,"actionitem",void 0),(0,i.Z)(this,"displayasicon",!1),(0,i.Z)(this,"actionemitter",new n.vpe),(0,i.Z)(this,"actioncontainer",void 0),(0,i.Z)(this,"componentref",void 0),(0,i.Z)(this,"subscriptions",new o.w0),(0,i.Z)(this,"standardActions",{NEW:"ObjectActionNewButton",DUPLICATE:"ObjectActionDuplicateButton",NEWRELATED:"ObjectActionNewrelatedButton",EDIT:"ObjectActionEditButton",DELETE:"ObjectActionDeleteButton",AUDIT:"ObjectActionAuditlogButton",IMPORT:"SpiceImporterImportButton",MAIL:"ObjectActionBeanToMailButton",PRINT:"ObjectActionOutputBeanButton",SELECT:"ObjectActionSelectButton",OPEN:"ObjectActionOpenButton",CANCEL:"ObjectActionCancelButton",SAVE:"ObjectActionSaveButton",SAVERELATED:"ObjectActionSaveRelatedButton"}),(0,i.Z)(this,"stable",!1),(0,i.Z)(this,"stableSub",void 0),this.language=e,this.metadata=t,this.model=s,this.ngZone=l,this.injector=a,this.cdr=d}get id(){return this.actionitem.id}get disabled(){return!this.stable||!this.componentref||!!this.componentref.instance.disabled}get hidden(){return!this.stable||!this.componentref||!!this.componentref.instance.hidden}ngAfterViewInit(){this.metadata.addComponent(this.actionitem.action?this.standardActions[this.actionitem.action]:this.actionitem.component,this.actioncontainer,this.injector).subscribe((e=>{e.instance.parent=this.model,e.instance.actionconfig=this.actionitem.actionconfig,e.instance.displayasicon=this.displayasicon,e.instance.actionemitter&&this.subscriptions.add(e.instance.actionemitter.subscribe((e=>{this.actionemitter.emit(e)}))),this.componentref=e,this.cdr.detectChanges()})),this.stableSub=this.ngZone.onStable.subscribe((e=>{this.stable=!0,this.stableSub.unsubscribe()}))}ngOnDestroy(){this.subscriptions.unsubscribe()}execute(){this.componentref&&this.componentref.instance.execute&&this.componentref.instance.execute()}}return e=ObjectActionContainerItem,(0,i.Z)(ObjectActionContainerItem,"ɵfac",(function(t){return new(t||e)(n.Y36(l.d),n.Y36(a.Pu),n.Y36(d.o),n.Y36(n.R0b),n.Y36(n.zs3),n.Y36(n.sBO))})),(0,i.Z)(ObjectActionContainerItem,"ɵcmp",n.Xpm({type:e,selectors:[["object-action-container-item"]],viewQuery:function(e,t){if(1&e&&n.Gf(r,7,n.s_b),2&e){let e;n.iGM(e=n.CRH())&&(t.actioncontainer=e.first)}},inputs:{actionitem:"actionitem",displayasicon:"displayasicon"},outputs:{actionemitter:"actionemitter"},decls:2,vars:0,consts:[["actioncontainer",""]],template:function(e,t){1&e&&n._UZ(0,"div",null,0)},encapsulation:2})),ObjectActionContainerItem})()},586:(e,t,s)=>{"use strict";s.d(t,{g:()=>C});var i=s(1180),n=s(3441),o=s(8861),l=s(2242),a=s(5329),d=s(3369),r=s(5710),c=s(2294),u=s(4154),h=s(6559),m=s(4755),g=s(2656),p=s(5681),f=s(2667);const b=function(e){return{"slds-hide":e}},v=function(e){return{"slds-disabled-text":e}};function Z(e,t){if(1&e){const e=l.EpF();l.TgZ(0,"li",9),l.NdJ("click",(function(){const t=l.CHM(e).$implicit,s=l.oxw(3);return l.KtG(s.propagateclick(t.id))})),l.TgZ(1,"a",10)(2,"object-action-container-item",11),l.NdJ("actionemitter",(function(t){l.CHM(e);const s=l.oxw(3);return l.KtG(s.emitaction(t))})),l.qZA()()()}if(2&e){const e=t.$implicit,s=l.oxw(3);l.Q6J("ngClass",l.VKq(3,b,s.isHidden(e.id))),l.xp6(2),l.Q6J("ngClass",l.VKq(5,v,s.isDisabled(e.id)))("actionitem",e)}}function _(e,t){if(1&e&&(l.ynx(0),l.YNc(1,Z,3,7,"li",8),l.BQk()),2&e){const e=l.oxw(2);l.xp6(1),l.Q6J("ngForOf",e.actionitems)}}function y(e,t){if(1&e&&(l.TgZ(0,"div",2)(1,"button",3),l._UZ(2,"system-button-icon",4),l.qZA(),l.TgZ(3,"div",5)(4,"ul",6),l.YNc(5,_,2,1,"ng-container",7),l.qZA()()()),2&e){const e=l.oxw();l.xp6(1),l.Q6J("ngClass",e.getButtonSizeClass())("disabled",e.hasNoActions),l.xp6(1),l.Q6J("icon","down"),l.xp6(3),l.Q6J("ngIf",e.actionitems.length>0)}}function x(e,t){if(1&e){const e=l.EpF();l.TgZ(0,"button",16),l.NdJ("click",(function(){const t=l.CHM(e).$implicit,s=l.oxw(3);return l.KtG(s.propagateclick(t.id))})),l.TgZ(1,"object-action-container-item",17),l.NdJ("actionemitter",(function(t){l.CHM(e);const s=l.oxw(3);return l.KtG(s.emitaction(t))})),l.qZA()()}if(2&e){const e=t.$implicit,s=l.oxw(3);l.Q6J("ngClass",l.VKq(4,b,s.isHidden(e.id))),l.xp6(1),l.Q6J("displayasicon",!0)("ngClass",l.VKq(6,v,s.isDisabled(e.id)))("actionitem",e)}}function w(e,t){if(1&e&&(l.TgZ(0,"div",14),l.YNc(1,x,2,8,"button",15),l.qZA()),2&e){const e=l.oxw(2);l.xp6(1),l.Q6J("ngForOf",e.actionitems)}}function T(e,t){if(1&e&&(l.TgZ(0,"div",12),l.YNc(1,w,2,1,"div",13),l.qZA()),2&e){const e=l.oxw();l.xp6(1),l.Q6J("ngIf",e.actionitems.length>0)}}let C=(()=>{var e;class ObjectActionMenu extends o.S{constructor(e,t,s,n,o,l,a,d,r,c,u){super(e,o,s,u,c),(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"broadcast",void 0),(0,i.Z)(this,"model",void 0),(0,i.Z)(this,"view",void 0),(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"elementRef",void 0),(0,i.Z)(this,"renderer",void 0),(0,i.Z)(this,"helper",void 0),(0,i.Z)(this,"layout",void 0),(0,i.Z)(this,"cdRef",void 0),(0,i.Z)(this,"ngZone",void 0),(0,i.Z)(this,"buttonsize",""),(0,i.Z)(this,"actionset",""),(0,i.Z)(this,"actionitems",[]),(0,i.Z)(this,"componentconfig",{}),this.language=e,this.broadcast=t,this.model=s,this.view=n,this.metadata=o,this.elementRef=l,this.renderer=a,this.helper=d,this.layout=r,this.cdRef=c,this.ngZone=u}ngOnInit(){""==this.actionset&&(this.componentconfig=this.metadata.getComponentConfig("ObjectActionMenu",this.model.module),this.actionset=this.componentconfig.actionset_default,this.setActionsets())}ngOnChanges(){this.setActionsets()}setActionsets(){let e=this.metadata.getActionSetItems(this.actionset);this.actionitems=[];for(let t of e)this.actionitems.push({disabled:!0,id:t.id,sequence:t.sequence,action:t.action,component:t.component,actionconfig:t.actionconfig});this.cdRef.detectChanges()}get isSmall(){return"small"==this.layout.screenwidth}get hasNoActions(){return!(this.actionitems.length>0)}getButtonSizeClass(){if(""!==this.buttonsize)return"slds-button--icon-"+this.buttonsize}}return e=ObjectActionMenu,(0,i.Z)(ObjectActionMenu,"ɵfac",(function(t){return new(t||e)(l.Y36(a.d),l.Y36(d.f),l.Y36(r.o),l.Y36(c.e),l.Y36(u.Pu),l.Y36(l.SBq),l.Y36(l.Qsj),l.Y36(n._),l.Y36(h.b),l.Y36(l.sBO),l.Y36(l.R0b))})),(0,i.Z)(ObjectActionMenu,"ɵcmp",l.Xpm({type:e,selectors:[["object-action-menu"]],inputs:{buttonsize:"buttonsize",actionset:"actionset"},features:[l._Bn([n._]),l.qOj,l.TTD],decls:3,vars:2,consts:[["class","slds-dropdown-trigger slds-dropdown-trigger--click","system-dropdown-trigger","",4,"ngIf","ngIfElse"],["smallformfactor",""],["system-dropdown-trigger","",1,"slds-dropdown-trigger","slds-dropdown-trigger--click"],["aria-haspopup","true",1,"slds-button","slds-button--icon-border-filled",3,"ngClass","disabled"],[3,"icon"],[1,"slds-dropdown"],["role","menu",1,"slds-dropdown__list"],[4,"ngIf"],["class","slds-dropdown__item","role","presentation",3,"ngClass","click",4,"ngFor","ngForOf"],["role","presentation",1,"slds-dropdown__item",3,"ngClass","click"],["href","javascript:void(0);","role","menuitem","tabindex","-1"],[1,"slds-truncate",3,"ngClass","actionitem","actionemitter"],[1,"slds-size--1-of-1","slds-text-align--right"],["class"," slds-p-top--xx-small slds-p-horizontal--x-small slds-button-group",4,"ngIf"],[1,"slds-p-top--xx-small","slds-p-horizontal--x-small","slds-button-group"],["class","slds-button slds-button_neutral",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"slds-button","slds-button_neutral",3,"ngClass","click"],[1,"slds-truncate",3,"displayasicon","ngClass","actionitem","actionemitter"]],template:function(e,t){if(1&e&&(l.YNc(0,y,6,4,"div",0),l.YNc(1,T,2,1,"ng-template",null,1,l.W1O)),2&e){const e=l.MAs(2);l.Q6J("ngIf",!t.isSmall)("ngIfElse",e)}},dependencies:[m.mk,m.sg,m.O5,g.J,p.l,f.s],encapsulation:2})),ObjectActionMenu})()},699:(e,t,s)=>{"use strict";s.d(t,{H:()=>f});var i=s(1180),n=s(2242),o=s(9637),l=s(3441),a=s(5329),d=s(5710),r=s(4154),c=s(4755),u=s(2656),h=s(6094);const m=["acionsetcontainer"];function g(e,t){if(1&e&&(n.TgZ(0,"div",4),n._UZ(1,"object-actionset-menu-container",5),n.qZA()),2&e){const e=n.oxw();n.Q6J("ngClass",e.getDropdownLocationClass()),n.xp6(1),n.Q6J("actionset",e.actionset)}}const p=function(e){return{"slds-is-open":e}};let f=(()=>{var e;class ObjectActionsetMenu{constructor(e,t,s,o,l,a,d){(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"model",void 0),(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"elementRef",void 0),(0,i.Z)(this,"renderer",void 0),(0,i.Z)(this,"popup",void 0),(0,i.Z)(this,"helper",void 0),(0,i.Z)(this,"acionsetcontainer",void 0),(0,i.Z)(this,"actionset",""),(0,i.Z)(this,"buttonsize",""),(0,i.Z)(this,"action",new n.vpe),(0,i.Z)(this,"isOpen",!1),(0,i.Z)(this,"popupSubscription",void 0),(0,i.Z)(this,"clickListener",void 0),this.language=e,this.model=t,this.metadata=s,this.elementRef=o,this.renderer=l,this.popup=a,this.helper=d,this.popupSubscription=this.popup.closePopup$.subscribe((e=>{this.isOpen=!1}))}ngOnDestroy(){this.popupSubscription.unsubscribe()}hasNoActions(){return!1}toggleOpen(){this.isOpen=!this.isOpen,this.isOpen?this.clickListener=this.renderer.listen("document","click",(e=>this.onClick(e))):this.clickListener&&this.clickListener()}onClick(e){this.elementRef.nativeElement.contains(e.target)||(this.isOpen=!1)}getButtonSizeClass(){if(""!==this.buttonsize)return"slds-button--icon-"+this.buttonsize}getDropdownLocationClass(){let e=this.elementRef.nativeElement.getBoundingClientRect();if(window.innerHeight-e.bottom<100)return"slds-dropdown--bottom"}}return e=ObjectActionsetMenu,(0,i.Z)(ObjectActionsetMenu,"ɵfac",(function(t){return new(t||e)(n.Y36(a.d),n.Y36(d.o),n.Y36(r.Pu),n.Y36(n.SBq),n.Y36(n.Qsj),n.Y36(o.g),n.Y36(l._))})),(0,i.Z)(ObjectActionsetMenu,"ɵcmp",n.Xpm({type:e,selectors:[["object-actionset-menu"]],viewQuery:function(e,t){if(1&e&&n.Gf(m,7,n.s_b),2&e){let e;n.iGM(e=n.CRH())&&(t.acionsetcontainer=e.first)}},inputs:{actionset:"actionset",buttonsize:"buttonsize"},outputs:{action:"action"},features:[n._Bn([o.g,l._])],decls:4,vars:7,consts:[[1,"slds-dropdown-trigger","slds-dropdown-trigger--click",3,"ngClass"],["aria-haspopup","true",1,"slds-button","slds-button--icon-border-filled",3,"ngClass","disabled","click"],[3,"icon"],["class","slds-dropdown slds-dropdown--right",3,"ngClass",4,"ngIf"],[1,"slds-dropdown","slds-dropdown--right",3,"ngClass"],[3,"actionset"]],template:function(e,t){1&e&&(n.TgZ(0,"div",0)(1,"button",1),n.NdJ("click",(function(){return t.toggleOpen()})),n._UZ(2,"system-button-icon",2),n.qZA(),n.YNc(3,g,2,2,"div",3),n.qZA()),2&e&&(n.Q6J("ngClass",n.VKq(5,p,t.isOpen)),n.xp6(1),n.Q6J("ngClass",t.getButtonSizeClass())("disabled",t.hasNoActions()),n.xp6(1),n.Q6J("icon","down"),n.xp6(1),n.Q6J("ngIf",t.isOpen))},dependencies:[c.mk,c.O5,u.J,h.z],encapsulation:2})),ObjectActionsetMenu})()},6094:(e,t,s)=>{"use strict";s.d(t,{z:()=>u});var i=s(1180),n=s(2242),o=s(9637),l=s(3441),a=s(5329),d=s(5710),r=s(4154);const c=["acionsetcontainer"];let u=(()=>{var e;class ObjectActionsetMenuContainer{constructor(e,t,s,o,l,a){(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"model",void 0),(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"elementRef",void 0),(0,i.Z)(this,"popup",void 0),(0,i.Z)(this,"helper",void 0),(0,i.Z)(this,"acionsetcontainer",void 0),(0,i.Z)(this,"actionset",""),(0,i.Z)(this,"action",new n.vpe),this.language=e,this.model=t,this.metadata=s,this.elementRef=o,this.popup=l,this.helper=a}ngAfterViewInit(){if(""!=this.actionset){let e=this.metadata.getActionSetItems(this.actionset);for(let t of e)if(t.component)this.metadata.addComponent(t.component,this.acionsetcontainer);else switch(t.action){case"EDIT":this.metadata.addComponent("ObjectActionsetMenuContainerEdit",this.acionsetcontainer);break;case"DELETE":this.metadata.addComponent("ObjectActionsetMenuContainerDelete",this.acionsetcontainer)}}}}return e=ObjectActionsetMenuContainer,(0,i.Z)(ObjectActionsetMenuContainer,"ɵfac",(function(t){return new(t||e)(n.Y36(a.d),n.Y36(d.o),n.Y36(r.Pu),n.Y36(n.SBq),n.Y36(o.g),n.Y36(l._))})),(0,i.Z)(ObjectActionsetMenuContainer,"ɵcmp",n.Xpm({type:e,selectors:[["object-actionset-menu-container"]],viewQuery:function(e,t){if(1&e&&n.Gf(c,7,n.s_b),2&e){let e;n.iGM(e=n.CRH())&&(t.acionsetcontainer=e.first)}},inputs:{actionset:"actionset"},outputs:{action:"action"},features:[n._Bn([o.g,l._])],decls:3,vars:0,consts:[["role","menu",1,"slds-dropdown__list"],["acionsetcontainer",""]],template:function(e,t){1&e&&(n.TgZ(0,"ul",0),n._UZ(1,"div",null,1),n.qZA())},encapsulation:2})),ObjectActionsetMenuContainer})()},4663:(e,t,s)=>{"use strict";s.d(t,{Z:()=>d});var i=s(1180),n=s(2242),o=s(5710),l=s(4154),a=s(6951);let d=(()=>{var e;class ObjectEditModalDialogContainer{constructor(e,t){(0,i.Z)(this,"model",void 0),(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"componentSet",""),this.model=e,this.metadata=t}ngOnInit(){if(!this.componentSet||""==this.componentSet){let e=this.metadata.getComponentConfig("ObjectRecordDetails",this.model.module);this.componentSet=e.componentset}}}return e=ObjectEditModalDialogContainer,(0,i.Z)(ObjectEditModalDialogContainer,"ɵfac",(function(t){return new(t||e)(n.Y36(o.o),n.Y36(l.Pu))})),(0,i.Z)(ObjectEditModalDialogContainer,"ɵcmp",n.Xpm({type:e,selectors:[["object-edit-modal-dialog-container"]],inputs:{componentSet:"componentSet"},decls:1,vars:1,consts:[[3,"componentset"]],template:function(e,t){1&e&&n._UZ(0,"system-componentset",0),2&e&&n.Q6J("componentset",t.componentSet)},dependencies:[a.E],encapsulation:2})),ObjectEditModalDialogContainer})()},7228:(e,t,s)=>{"use strict";s.d(t,{s:()=>M});var i=s(1180),n=s(727),o=s(5684),l=s(2242),a=s(3348),d=s(4154),r=s(2644),c=s(5329),u=s(4044),h=s(6559),m=s(4755),g=s(3418),p=s(2656),f=s(4730),b=s(3463),v=s(2161),Z=s(1058),_=s(6059),y=s(6857);function x(e,t){if(1&e&&l._UZ(0,"tr",8),2&e){const e=t.$implicit,s=t.index,i=l.oxw(2);l.Q6J("rownumbers",i.rowNumbers)("rowNumber",s+1)("listItem",e)("inlineedit",i.inlineedit)("rowselect",!0)}}function w(e,t){if(1&e&&(l.ynx(0),l.YNc(1,x,1,5,"tr",7),l.BQk()),2&e){const e=l.oxw();l.xp6(1),l.Q6J("ngForOf",e.modellist.listData.list)}}function T(e,t){if(1&e&&l._UZ(0,"tr",10),2&e){const e=t.$implicit,s=t.index,i=l.oxw(2);l.Q6J("cdkDragData",e)("rownumbers",i.rowNumbers)("dragHandles",i.dragAndDrop)("rowNumber",s+1)("listItem",e)("inlineedit",i.inlineedit)("rowselect",!0)}}function C(e,t){if(1&e&&(l.ynx(0),l.YNc(1,T,1,7,"tr",9),l.BQk()),2&e){const e=l.oxw();l.xp6(1),l.Q6J("ngForOf",e.modellist.listData.list)}}function A(e,t){if(1&e&&l._UZ(0,"tbody",11),2&e){const e=l.oxw();l.Q6J("columns",e.modellist.listfields.length)("select",!0)("rownumbers",e.rowNumbers)("dragHandles",e.dragAndDrop)("tools",!0)("rows",20)}}function k(e,t){if(1&e){const e=l.EpF();l.TgZ(0,"div",12)(1,"button",13),l.NdJ("click",(function(){l.CHM(e);const t=l.oxw();return l.KtG(t.loadMore())})),l._UZ(2,"system-button-icon",14)(3,"system-label",15),l.qZA()()}}function L(e,t){1&e&&(l.TgZ(0,"div",16)(1,"system-illustration-no-records"),l._UZ(2,"system-label",17),l.qZA()())}const I=function(e){return{"slds-table--bordered":e}};let M=(()=>{var e;class ObjectList{constructor(e,t,s,o,l,a,d,r){(0,i.Z)(this,"router",void 0),(0,i.Z)(this,"cdRef",void 0),(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"modellist",void 0),(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"injector",void 0),(0,i.Z)(this,"modal",void 0),(0,i.Z)(this,"layout",void 0),(0,i.Z)(this,"subscriptions",new n.w0),(0,i.Z)(this,"componentconfig",{}),(0,i.Z)(this,"dragAndDrop",!1),this.router=e,this.cdRef=t,this.metadata=s,this.modellist=o,this.language=l,this.injector=a,this.modal=d,this.layout=r}get actionset(){return this.componentconfig.actionset}get isloading(){return this.modellist.isLoading}get inlineedit(){return this.componentconfig.inlineedit}get issmall(){return"small"==this.layout.screenwidth}get sortfield(){return this.componentconfig.sortfield}get sortdirection(){return this.componentconfig.sortdirection?this.componentconfig.sortdirection:"ASC"}get rowNumbers(){return!0===this.componentconfig.rownumbers}get noAutoLoad(){return!0===this.componentconfig.noautoload}get canLoadMore(){return this.modellist.canLoadMore()}ngOnInit(){this.initialize()}ngOnDestroy(){this.subscriptions.unsubscribe(),this.modellist.useCache=!1}loadMore(){this.modellist.loadMoreList()}onScroll(){this.noAutoLoad||this.modellist.loadMoreList()}trackbyfn(e,t){return t.id}initialize(){this.loadComponentConfig(),this.chooseFields(),this.modellist.loadlimit=50,this.modellist.buckets={},this.modellist.loadFromSession()||(this.componentconfig.sortfield&&(this.modellist.sortArray=[{sortfield:this.componentconfig.sortfield,sortdirection:this.componentconfig.sortdirection??"ASC"}]),this.getListData()),this.subscriptions.add(this.modellist.listType$.pipe((0,o.T)(1)).subscribe((e=>this.handleListTypeChange(e)))),this.subscriptions.add(this.modellist.listDataChanged$.subscribe((()=>{this.cdRef.detectChanges()})))}handleListTypeChange(e){this.cdRef.detectChanges(),"ObjectList"==e.listcomponent&&(this.chooseFields(),this.getListData())}loadComponentConfig(){this.componentconfig=this.metadata.getComponentConfig("ObjectList",this.modellist.module),"disableAutoloadListAll"in this.componentconfig||(this.componentconfig.disableAutoloadListAll=this.modellist.disableAutoloadListAll)}getListData(){"all"==this.modellist.currentList.id&&this.componentconfig?.disableAutoloadListAll?this.modellist.resetListData():this.modellist.getListData().subscribe((()=>this.cdRef.detectChanges()))}chooseFields(){this.modellist.isCustomList()&&0==this.modellist.listfields.length&&0==this.modellist.getFieldDefs()?.length&&this.modellist.checkAccess("edit")&&this.modal.openModal("ObjectListViewSettingsSetfieldsModal",!0,this.injector)}}return e=ObjectList,(0,i.Z)(ObjectList,"ɵfac",(function(t){return new(t||e)(l.Y36(a.F0),l.Y36(l.sBO),l.Y36(d.Pu),l.Y36(r.t),l.Y36(c.d),l.Y36(l.zs3),l.Y36(u.o),l.Y36(h.b))})),(0,i.Z)(ObjectList,"ɵcmp",l.Xpm({type:e,selectors:[["object-list"]],inputs:{dragAndDrop:"dragAndDrop"},decls:11,vars:11,consts:[[1,"slds-theme--default",2,"min-height","100px",3,"system-to-bottom"],["cdkDropList","","cdkDropListSortingDisabled","","role","grid",1,"slds-table","slds-table--fixed-layout","slds-max-medium-table--stacked-horizontal","slds-table--header-fixed",3,"ngClass"],["object-list-header","",1,"slds-text-title--caps",3,"actionset","showRowNumber","showDragHandle"],[4,"ngIf"],["system-table-stencils","",3,"columns","select","rownumbers","dragHandles","tools","rows",4,"ngIf"],["class","slds-size--1-of-1 slds-p-around--small slds-align--absolute-center",4,"ngIf"],["class","slds-align--absolute-center","style","height: calc(100% - 35px)",4,"ngIf"],["object-list-item","","class","slds-hint-parent",3,"rownumbers","rowNumber","listItem","inlineedit","rowselect",4,"ngFor","ngForOf"],["object-list-item","",1,"slds-hint-parent",3,"rownumbers","rowNumber","listItem","inlineedit","rowselect"],["object-list-item","","cdkDrag","","class","slds-hint-parent slds-drag--preview",3,"cdkDragData","rownumbers","dragHandles","rowNumber","listItem","inlineedit","rowselect",4,"ngFor","ngForOf"],["object-list-item","","cdkDrag","",1,"slds-hint-parent","slds-drag--preview",3,"cdkDragData","rownumbers","dragHandles","rowNumber","listItem","inlineedit","rowselect"],["system-table-stencils","",3,"columns","select","rownumbers","dragHandles","tools","rows"],[1,"slds-size--1-of-1","slds-p-around--small","slds-align--absolute-center"],[1,"slds-button","slds-button--neutral",3,"click"],["icon","skip_forward",1,"slds-p-right--x-small"],["label","LBL_LOAD_MORE"],[1,"slds-align--absolute-center",2,"height","calc(100% - 35px)"],["label","MSG_NO_RECORDS_FOUND"]],template:function(e,t){1&e&&(l.ynx(0),l.TgZ(1,"div",0),l.NdJ("system-to-bottom",(function(){return t.onScroll()})),l.TgZ(2,"table",1)(3,"thead"),l._UZ(4,"tr",2),l.qZA(),l.TgZ(5,"tbody"),l.YNc(6,w,2,1,"ng-container",3),l.YNc(7,C,2,1,"ng-container",3),l.qZA(),l.YNc(8,A,1,6,"tbody",4),l.qZA(),l.YNc(9,k,4,0,"div",5),l.YNc(10,L,3,0,"div",6),l.qZA(),l.BQk()),2&e&&(l.xp6(2),l.Q6J("ngClass",l.VKq(9,I,!t.issmall)),l.xp6(2),l.Q6J("actionset",t.actionset)("showRowNumber",t.rowNumbers)("showDragHandle",t.dragAndDrop),l.xp6(2),l.Q6J("ngIf",!t.dragAndDrop),l.xp6(1),l.Q6J("ngIf",t.dragAndDrop),l.xp6(1),l.Q6J("ngIf",t.isloading),l.xp6(1),l.Q6J("ngIf",t.noAutoLoad&&t.canLoadMore),l.xp6(1),l.Q6J("ngIf",!t.modellist.isLoading&&0==t.modellist.listData.totalcount))},dependencies:[m.mk,m.sg,m.O5,g.Wj,g.Zt,p.J,f.C,b._,v.x,Z.H,_.p,y.B],encapsulation:2,changeDetection:0})),ObjectList})()},6059:(e,t,s)=>{"use strict";s.d(t,{p:()=>T});var i=s(1180),n=s(2294),o=s(7982),l=s(727),a=s(2242),d=s(2644),r=s(5329),c=s(6559),u=s(4755),h=s(6367),m=s(201),g=s(1802);const p=["object-list-header",""];function f(e,t){1&e&&a._UZ(0,"th",5)}function b(e,t){1&e&&(a.TgZ(0,"th",6)(1,"div",7),a._uU(2,"#"),a.qZA()())}function v(e,t){if(1&e&&a._UZ(0,"object-list-header-actionmenu",10),2&e){const e=a.oxw(2);a.Q6J("actionset",e.actionset)("displayasicon",e.isSmall)}}function Z(e,t){if(1&e&&(a.TgZ(0,"th",8),a.YNc(1,v,1,2,"object-list-header-actionmenu",9),a.qZA()),2&e){const e=a.oxw();a.xp6(1),a.Q6J("ngIf",e.actionset)}}function _(e,t){if(1&e){const e=a.EpF();a.ynx(0),a.TgZ(1,"a",14),a.NdJ("click",(function(){a.CHM(e);const t=a.oxw().$implicit,s=a.oxw();return a.KtG(s.setSortField(t))})),a._UZ(2,"field-label",15)(3,"object-list-header-sort",16),a.qZA(),a.BQk()}if(2&e){const e=a.oxw().$implicit;a.xp6(2),a.Q6J("fieldname",e.field)("fieldconfig",e.fieldconfig),a.xp6(1),a.Q6J("field",e)}}function y(e,t){if(1&e&&a._UZ(0,"field-label",17),2&e){const e=a.oxw().$implicit;a.Q6J("fieldname",e.field)("fieldconfig",e.fieldconfig)}}function x(e,t){if(1&e){const e=a.EpF();a.TgZ(0,"th",11),a.NdJ("system-resize",(function(t){a.CHM(e);const s=a.oxw();return a.KtG(s.onresize(t))})),a.YNc(1,_,4,3,"ng-container",12),a.YNc(2,y,1,2,"ng-template",null,13,a.W1O),a.qZA()}if(2&e){const e=t.$implicit,s=a.MAs(3),i=a.oxw();a.Q6J("resizeid",e.id)("width",i.columnWidth(e.id)),a.xp6(1),a.Q6J("ngIf",i.isSortable(e))("ngIfElse",s)}}function w(e,t){1&e&&a._UZ(0,"th",18)}let T=(()=>{var e;class ObjectListHeader{constructor(e,t,s,n,o,a){(0,i.Z)(this,"modellist",void 0),(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"view",void 0),(0,i.Z)(this,"elementRef",void 0),(0,i.Z)(this,"layout",void 0),(0,i.Z)(this,"cdref",void 0),(0,i.Z)(this,"resizeElements",void 0),(0,i.Z)(this,"reloadTimeOut",void 0),(0,i.Z)(this,"actionset",""),(0,i.Z)(this,"showSelectColumn",!0),(0,i.Z)(this,"showRowNumber",!1),(0,i.Z)(this,"showDragHandle",!1),(0,i.Z)(this,"showRowActionMenu",!0),(0,i.Z)(this,"subscriptions",new l.w0),this.modellist=e,this.language=t,this.view=s,this.elementRef=n,this.layout=o,this.cdref=a,this.view.labels="short",this.subscriptions.add(this.modellist.listfield$.subscribe((e=>this.cdref.detectChanges())))}ngOnDestroy(){this.subscriptions.unsubscribe()}get isSmall(){return"small"==this.layout.screenwidth}get listfields(){return this.modellist.listfields}get module(){return this.modellist.module}columnWidth(e){let t=this.listfields.find((t=>t.id==e));return t.width?t.width+"%":100/this.listfields.length+"%"}isSortable(e){return!0===e.fieldconfig.sortable}setSortField(e){this.isSortable(e)&&(this.modellist.setSortField(e.field),this.reloadTimeOut&&window.clearTimeout(this.reloadTimeOut),this.reloadTimeOut=window.setTimeout((()=>this.modellist.reLoadList()),500))}onresize(e){let t={},s=0;this.resizeElements.forEach((e=>{let i=e.getElementWidth();s+=i,t[e.resizeid]=e.getElementWidth()}));for(let e of this.listfields)e.width=Math.round(t[e.id]/s*100)}}return e=ObjectListHeader,(0,i.Z)(ObjectListHeader,"ɵfac",(function(t){return new(t||e)(a.Y36(d.t),a.Y36(r.d),a.Y36(n.e),a.Y36(a.SBq),a.Y36(c.b),a.Y36(a.sBO))})),(0,i.Z)(ObjectListHeader,"ɵcmp",a.Xpm({type:e,selectors:[["","object-list-header",""]],viewQuery:function(e,t){if(1&e&&a.Gf(o.h,5),2&e){let e;a.iGM(e=a.CRH())&&(t.resizeElements=e)}},inputs:{actionset:"actionset",showSelectColumn:"showSelectColumn",showRowNumber:"showRowNumber",showDragHandle:"showDragHandle",showRowActionMenu:"showRowActionMenu"},features:[a._Bn([n.e])],attrs:p,decls:5,vars:5,consts:[["scope","col","style","width:1.5rem",4,"ngIf"],["style","width:4rem","scope","col",4,"ngIf"],["style","width:2rem","scope","col",4,"ngIf"],["scope","col","class","slds-resizable",3,"resizeid","width","system-resize",4,"ngFor","ngForOf"],["class","slds-cell-shrink","scope","col",4,"ngIf"],["scope","col",2,"width","1.5rem"],["scope","col",2,"width","4rem"],[1,"slds-text-align--center","slds-text-body--small","slds-text-color--inverse-weak"],["scope","col",2,"width","2rem"],["class","slds-p-left--x-small",3,"actionset","displayasicon",4,"ngIf"],[1,"slds-p-left--x-small",3,"actionset","displayasicon"],["scope","col",1,"slds-resizable",3,"resizeid","width","system-resize"],[4,"ngIf","ngIfElse"],["nosort",""],["href","javascript:void(0);",1,"slds-th__action","slds-text-link--reset",3,"click"],["addclasses","slds-truncate",1,"slds-truncate",3,"fieldname","fieldconfig"],[3,"field"],["addclasses","slds-truncate slds-p-vertical--xx-small slds-p-horizontal--x-small",3,"fieldname","fieldconfig"],["scope","col",1,"slds-cell-shrink"]],template:function(e,t){1&e&&(a.YNc(0,f,1,0,"th",0),a.YNc(1,b,3,0,"th",1),a.YNc(2,Z,2,1,"th",2),a.YNc(3,x,4,4,"th",3),a.YNc(4,w,1,0,"th",4)),2&e&&(a.Q6J("ngIf",t.showDragHandle),a.xp6(1),a.Q6J("ngIf",t.showRowNumber),a.xp6(1),a.Q6J("ngIf",t.showSelectColumn),a.xp6(1),a.Q6J("ngForOf",t.listfields),a.xp6(1),a.Q6J("ngIf",t.showRowActionMenu))},dependencies:[u.sg,u.O5,h.q,o.h,m._,g.g],encapsulation:2})),ObjectListHeader})()},1802:(e,t,s)=>{"use strict";s.d(t,{g:()=>y});var i=s(1180),n=s(8861),o=s(2242),l=s(2644),a=s(5329),d=s(4154),r=s(5710),c=s(4044),u=s(4755),h=s(2656),m=s(3463),g=s(4361),p=s(151),f=s(2667);const b=function(e){return{"slds-hide":e}},v=function(e){return{"slds-disabled-text":e}};function Z(e,t){if(1&e){const e=o.EpF();o.TgZ(0,"li",12),o.NdJ("click",(function(){const t=o.CHM(e).$implicit,s=o.oxw(2);return o.KtG(s.propagateclick(t.id))})),o.TgZ(1,"a",7)(2,"object-action-container-item",13),o.NdJ("actionemitter",(function(t){o.CHM(e);const s=o.oxw(2);return o.KtG(s.emitaction(t))})),o.qZA()()()}if(2&e){const e=t.$implicit,s=o.oxw(2);o.Q6J("ngClass",o.VKq(4,b,s.isHidden(e.id))),o.xp6(2),o.Q6J("displayasicon",s.displayasicon)("ngClass",o.VKq(6,v,s.isDisabled(e.id)))("actionitem",e)}}function _(e,t){if(1&e&&(o.ynx(0),o.YNc(1,Z,3,8,"li",10),o._UZ(2,"li",11),o.BQk()),2&e){const e=o.oxw();o.xp6(1),o.Q6J("ngForOf",e.actionitems)}}let y=(()=>{var e;class ObjectListHeaderActionMenu extends n.S{constructor(e,t,s,n,o,l,a,d){super(t,s,n,o,l),(0,i.Z)(this,"modellist",void 0),(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"model",void 0),(0,i.Z)(this,"ngZone",void 0),(0,i.Z)(this,"cdRef",void 0),(0,i.Z)(this,"modal",void 0),(0,i.Z)(this,"injector",void 0),(0,i.Z)(this,"actionitems",[]),this.modellist=e,this.language=t,this.metadata=s,this.model=n,this.ngZone=o,this.cdRef=l,this.modal=a,this.injector=d}ngOnChanges(){let e=this.metadata.getActionSetItems(this.actionset);this.actionitems=[];for(let t of e)this.actionitems.push({disabled:!0,id:t.id,sequence:t.sequence,action:t.action,component:t.component,actionconfig:t.actionconfig})}get selectAll(){return"all"===this.modellist.listSelected.type}get hasSelection(){return this.modellist.getSelectedCount()>0}chooseFields(){if(!this.canChooseFields)return!1;this.modal.openModal("ObjectListViewSettingsSetfieldsModal",!0,this.injector)}get canChooseFields(){return"all"!=this.modellist.currentList.id&&"owner"!=this.modellist.currentList.id&&this.modellist.checkAccess("edit")}}return e=ObjectListHeaderActionMenu,(0,i.Z)(ObjectListHeaderActionMenu,"ɵfac",(function(t){return new(t||e)(o.Y36(l.t),o.Y36(a.d),o.Y36(d.Pu),o.Y36(r.o),o.Y36(o.R0b),o.Y36(o.sBO),o.Y36(c.o),o.Y36(o.zs3))})),(0,i.Z)(ObjectListHeaderActionMenu,"ɵcmp",o.Xpm({type:e,selectors:[["object-list-header-actionmenu"]],features:[o.qOj,o.TTD],decls:10,vars:5,consts:[["system-dropdown-trigger-simple","",1,"slds-dropdown-trigger","slds-dropdown-trigger--click"],["system-title","LBL_SETTINGS",1,"slds-button","slds-button--icon"],[3,"icon"],[1,"slds-dropdown","slds-dropdown--left","slds-m-top--x-small"],["role","menu",1,"slds-dropdown__list"],[4,"ngIf"],["role","presentation",1,"slds-dropdown__item",3,"click"],["href","javascript:void(0);","role","menuitem","tabindex","-1"],[3,"ngClass"],["label","LBL_SETFIELDS"],["class","slds-dropdown__item","role","presentation",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"slds-has-divider--bottom-space"],["role","presentation",1,"slds-dropdown__item",3,"ngClass","click"],[1,"slds-truncate",3,"displayasicon","ngClass","actionitem","actionemitter"]],template:function(e,t){1&e&&(o.TgZ(0,"div",0)(1,"button",1),o._UZ(2,"system-button-icon",2),o.qZA(),o.TgZ(3,"div",3)(4,"ul",4),o.YNc(5,_,3,1,"ng-container",5),o.TgZ(6,"li",6),o.NdJ("click",(function(){return t.chooseFields()})),o.TgZ(7,"a",7)(8,"span",8),o._UZ(9,"system-label",9),o.qZA()()()()()()),2&e&&(o.xp6(2),o.Q6J("icon","down"),o.xp6(3),o.Q6J("ngIf",t.actionitems.length>0),o.xp6(3),o.Q6J("ngClass",o.VKq(3,v,!t.canChooseFields)))},dependencies:[u.mk,u.sg,u.O5,h.J,m._,g.w,p.S,f.s],encapsulation:2})),ObjectListHeaderActionMenu})()},201:(e,t,s)=>{"use strict";s.d(t,{_:()=>h});var i=s(1180),n=s(2242),o=s(2644),l=s(4755),a=s(8859);function d(e,t){1&e&&n._UZ(0,"system-utility-icon",5)}function r(e,t){if(1&e&&n._UZ(0,"system-utility-icon",6),2&e){const e=n.oxw(2);n.Q6J("icon",e.sortIcon)}}function c(e,t){if(1&e&&(n.TgZ(0,"div",7),n._uU(1),n.qZA()),2&e){const e=n.oxw(2);n.xp6(1),n.Oqu(e.sortindex)}}function u(e,t){if(1&e&&(n.TgZ(0,"div",1),n.YNc(1,d,1,0,"system-utility-icon",2),n.YNc(2,r,1,1,"system-utility-icon",3),n.YNc(3,c,2,1,"div",4),n.qZA()),2&e){const e=n.oxw();n.xp6(1),n.Q6J("ngIf",!e.sortIcon),n.xp6(1),n.Q6J("ngIf",e.sortIcon),n.xp6(1),n.Q6J("ngIf",e.sortindex>0)}}let h=(()=>{var e;class ObjectListHeaderSort{constructor(e){(0,i.Z)(this,"modellist",void 0),(0,i.Z)(this,"field",void 0),this.modellist=e}get module(){return this.modellist.module}get isSortable(){return!0===this.field.fieldconfig.sortable}get sortIcon(){let e=this.modellist.getSortField(this.field.field);return e?"ASC"==e.sortdirection?"arrowdown":"arrowup":""}get sortindex(){let e=this.modellist.getSortField(this.field.field);return e&&e.sortitems>1?e.sortindex+1:""}}return e=ObjectListHeaderSort,(0,i.Z)(ObjectListHeaderSort,"ɵfac",(function(t){return new(t||e)(n.Y36(o.t))})),(0,i.Z)(ObjectListHeaderSort,"ɵcmp",n.Xpm({type:e,selectors:[["object-list-header-sort"]],inputs:{field:"field"},decls:1,vars:1,consts:[["class","slds-grid slds-grid--vertical-align-center slds-p-horizontal--xx-small",4,"ngIf"],[1,"slds-grid","slds-grid--vertical-align-center","slds-p-horizontal--xx-small"],["icon","sort","size","xx-small","colorclass","slds-icon-text-light",4,"ngIf"],["size","xx-small",3,"icon",4,"ngIf"],["class","slds-align--absolute-center slds-theme--info","style","height: 18px; width: 18px; border-radius: 9px",4,"ngIf"],["icon","sort","size","xx-small","colorclass","slds-icon-text-light"],["size","xx-small",3,"icon"],[1,"slds-align--absolute-center","slds-theme--info",2,"height","18px","width","18px","border-radius","9px"]],template:function(e,t){1&e&&n.YNc(0,u,4,3,"div",0),2&e&&n.Q6J("ngIf",t.isSortable)},dependencies:[l.O5,a.r],encapsulation:2})),ObjectListHeaderSort})()},6857:(e,t,s)=>{"use strict";s.d(t,{B:()=>T});var i=s(1180),n=s(5710),o=s(2294),l=s(2242),a=s(6163),d=s(2644),r=s(3348),c=s(5329),u=s(4755),h=s(3418),m=s(5030),g=s(3634),p=s(7514),f=s(8859),b=s(586);const v=["object-list-item",""];function Z(e,t){if(1&e&&(l.TgZ(0,"td",4)(1,"div",5),l._uU(2),l.qZA()()),2&e){const e=l.oxw();l.xp6(2),l.Oqu(e.rowNumber)}}function _(e,t){1&e&&(l.TgZ(0,"td",6),l._UZ(1,"system-utility-icon",7),l.qZA()),2&e&&(l.xp6(1),l.Q6J("icon","drag_and_drop")("size","x-small"))}function y(e,t){if(1&e){const e=l.EpF();l.TgZ(0,"td",6)(1,"system-checkbox",8),l.NdJ("ngModelChange",(function(t){l.CHM(e);const s=l.oxw();return l.KtG(s.listItem.selected=t)})),l.qZA()()}if(2&e){const e=l.oxw();l.xp6(1),l.Q6J("disabled",e.rowselectdisabled)("ngModel",e.listItem.selected)}}function x(e,t){if(1&e&&(l.TgZ(0,"td",9),l._UZ(1,"field-container",10),l.qZA()),2&e){const e=t.$implicit,s=l.oxw();l.uIk("data-label",s.language.getFieldDisplayName(s.model.module,e.field)),l.xp6(1),l.Q6J("field",e.field)("fieldconfig",e.fieldconfig)("fielddisplayclass","slds-truncate slds-p-horizontal--x-small")}}function w(e,t){1&e&&(l.TgZ(0,"td",11),l._UZ(1,"object-action-menu",12),l.qZA()),2&e&&(l.xp6(1),l.Q6J("buttonsize","small"))}let T=(()=>{var e;class ObjectListItem{constructor(e,t,s,n,o,l,a){(0,i.Z)(this,"model",void 0),(0,i.Z)(this,"modelutilities",void 0),(0,i.Z)(this,"modellist",void 0),(0,i.Z)(this,"view",void 0),(0,i.Z)(this,"router",void 0),(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"cdref",void 0),(0,i.Z)(this,"_listFields",void 0),(0,i.Z)(this,"rowselect",!1),(0,i.Z)(this,"rownumbers",!1),(0,i.Z)(this,"dragHandles",!1),(0,i.Z)(this,"rowselectdisabled",!1),(0,i.Z)(this,"listItem",{}),(0,i.Z)(this,"inlineedit",!1),(0,i.Z)(this,"displaylinks",!0),(0,i.Z)(this,"rowNumber",void 0),(0,i.Z)(this,"showActionMenu",!0),(0,i.Z)(this,"subscriptions",[]),this.model=e,this.modelutilities=t,this.modellist=s,this.view=n,this.router=o,this.language=l,this.cdref=a,this.view.displayLabels=!1}get listFields(){return this._listFields??this.modellist.listfields}ngOnInit(){this.model.module=this.modellist.module,this.model.id=this.listItem.id,this.model.setData(this.listItem),this.model.validate("change"),this.model.initializeFieldsStati(),this.view.isEditable=this.inlineedit&&this.model.checkAccess("edit"),this.view.displayLinks=this.displaylinks,this.subscriptions.push(this.model.data$.subscribe((e=>this.cdref.detectChanges()))),this.subscriptions.push(this.modellist.listfield$.subscribe((e=>this.cdref.detectChanges()))),this.subscriptions.push(this.modellist.selectionChanged$.subscribe((e=>this.cdref.detectChanges())))}ngOnDestroy(){for(let e of this.subscriptions)e.unsubscribe()}navigateDetail(){this.router.navigate(["/module/"+this.model.module+"/"+this.model.id])}}return e=ObjectListItem,(0,i.Z)(ObjectListItem,"ɵfac",(function(t){return new(t||e)(l.Y36(n.o),l.Y36(a.A),l.Y36(d.t),l.Y36(o.e),l.Y36(r.F0),l.Y36(c.d),l.Y36(l.sBO))})),(0,i.Z)(ObjectListItem,"ɵcmp",l.Xpm({type:e,selectors:[["","object-list-item",""]],inputs:{_listFields:["listFields","_listFields"],rowselect:"rowselect",rownumbers:"rownumbers",dragHandles:"dragHandles",rowselectdisabled:"rowselectdisabled",listItem:"listItem",inlineedit:"inlineedit",displaylinks:"displaylinks",rowNumber:"rowNumber",showActionMenu:"showActionMenu"},features:[l._Bn([n.o,o.e])],attrs:v,decls:5,vars:5,consts:[["role","gridcell","class","slds-show--medium","style","min-width: 3rem",4,"ngIf"],["role","gridcell","class","slds-show--medium",4,"ngIf"],["style","min-width: 2rem","scope","row",4,"ngFor","ngForOf"],["role","gridcell","class","slds-cell-shrink",4,"ngIf"],["role","gridcell",1,"slds-show--medium",2,"min-width","3rem"],[1,"slds-text-align--center","slds-text-body--small","slds-text-color--inverse-weak"],["role","gridcell",1,"slds-show--medium"],["cdkDragHandle","",2,"cursor","move",3,"icon","size"],[3,"disabled","ngModel","ngModelChange"],["scope","row",2,"min-width","2rem"],[3,"field","fieldconfig","fielddisplayclass"],["role","gridcell",1,"slds-cell-shrink"],[3,"buttonsize"]],template:function(e,t){1&e&&(l.YNc(0,Z,3,1,"td",0),l.YNc(1,_,2,2,"td",1),l.YNc(2,y,2,2,"td",1),l.YNc(3,x,2,4,"td",2),l.YNc(4,w,2,1,"td",3)),2&e&&(l.Q6J("ngIf",t.rownumbers),l.xp6(1),l.Q6J("ngIf",t.dragHandles),l.xp6(1),l.Q6J("ngIf",t.rowselect),l.xp6(1),l.Q6J("ngForOf",t.listFields),l.xp6(1),l.Q6J("ngIf",t.showActionMenu))},dependencies:[u.sg,u.O5,h.Bh,m.JJ,m.On,g.j,p.U,f.r,b.g],styles:["[_nghost-%COMP%]   field-container[_ngcontent-%COMP%]   global-button-icon[_ngcontent-%COMP%]{display:none}","[_nghost-%COMP%]:hover   field-container[_ngcontent-%COMP%]   global-button-icon[_ngcontent-%COMP%]{display:inline}"],changeDetection:0})),ObjectListItem})()},7102:(e,t,s)=>{"use strict";s.d(t,{l:()=>f});var i=s(1180),n=s(727),o=s(2242),l=s(2644),a=s(5329),d=s(4755),r=s(2656),c=s(3463),u=s(8859),h=s(4361);const m=function(e){return{"slds-is-selected":e}};function g(e,t){if(1&e){const e=o.EpF();o.TgZ(0,"li",11),o.NdJ("click",(function(){const t=o.CHM(e).$implicit,s=o.oxw();return o.KtG(s.setListType(t.id))})),o.TgZ(1,"a",12)(2,"span",13),o._UZ(3,"system-utility-icon",14),o._uU(4),o.qZA()()()}if(2&e){const e=t.$implicit,s=o.oxw();o.Q6J("ngClass",o.VKq(2,m,s.modellist.currentList.id==e.id)),o.xp6(4),o.hij(" ",e.name," ")}}function p(e,t){if(1&e){const e=o.EpF();o.TgZ(0,"li",11),o.NdJ("click",(function(){const t=o.CHM(e).$implicit,s=o.oxw();return o.KtG(s.setListType(t.id))})),o.TgZ(1,"a",12)(2,"span",13),o._UZ(3,"system-utility-icon",14),o._uU(4),o.qZA(),o._UZ(5,"system-utility-icon",15),o.qZA()()}if(2&e){const e=t.$implicit,s=o.oxw();o.Q6J("ngClass",o.VKq(3,m,e.id==s.modellist.currentList.id)),o.xp6(4),o.hij(" ",e.name," "),o.xp6(1),o.Q6J("icon",e.icon)}}let f=(()=>{var e;class ObjectListTypes{constructor(e,t,s,o){(0,i.Z)(this,"modellist",void 0),(0,i.Z)(this,"elementRef",void 0),(0,i.Z)(this,"renderer",void 0),(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"listTypes",[]),(0,i.Z)(this,"subscription",new n.w0),(0,i.Z)(this,"showMenu",!1),this.modellist=e,this.elementRef=t,this.renderer=s,this.language=o,this.initialize()}get disabled(){return this.modellist.standardLists.length+this.listTypes.length<=1}initialize(){this.setListTypes(),this.subscription=this.modellist.listType$.subscribe((()=>{this.setListTypes()}))}setListTypes(){this.listTypes=this.modellist.getListTypes(!1).map((e=>({...e,icon:e.global&&"0"!=e.global?"world":"user"}))).sort(((e,t)=>e.name.toLowerCase()>t.name.toLowerCase()?1:-1))}setListType(e="all"){this.modellist.setListType(e),this.showMenu=!1}onClick(e){if(!e.target)return;this.elementRef.nativeElement.contains(e.target)||(this.showMenu=!1)}getListtypeIcon(e){return e.global&&"0"!=e.global?"world":"user"}}return e=ObjectListTypes,(0,i.Z)(ObjectListTypes,"ɵfac",(function(t){return new(t||e)(o.Y36(l.t),o.Y36(o.SBq),o.Y36(o.Qsj),o.Y36(a.d))})),(0,i.Z)(ObjectListTypes,"ɵcmp",o.Xpm({type:e,selectors:[["object-list-types"]],decls:13,vars:5,consts:[[1,"slds-media__body","slds-dropdown-trigger","slds-dropdown-trigger--click",3,"system-dropdown-trigger-simple"],[1,"slds-grid","slds-grid--vertical-align-center","slds-truncate","slds-p-right--small"],[1,"slds-page-header__title","slds-show--medium","slds-p-right--xx-small"],[1,"slds-button",3,"disabled"],["icon","down","size","small"],[1,"slds-dropdown","slds-dropdown--left","slds-dropdown--medium"],["role","menu",1,"slds-dropdown__list"],["role","separator",1,"slds-dropdown__header","slds-has-divider--bottom"],[1,"slds-text-title--caps"],["label","LBL_LIST_TYPES"],["class","slds-dropdown__item","role","presentation",3,"ngClass","click",4,"ngFor","ngForOf"],["role","presentation",1,"slds-dropdown__item",3,"ngClass","click"],["href","javascript:void(0);","role","menuitemcheckbox"],[1,"slds-truncate"],["size","x-small","icon","check","addclasses","slds-icon slds-icon_selected slds-icon_x-small slds-icon-text-default slds-m-right_x-small"],["size","x-small",3,"icon"]],template:function(e,t){1&e&&(o.TgZ(0,"div",0)(1,"div",1)(2,"h1",2),o._uU(3),o.qZA(),o.TgZ(4,"button",3),o._UZ(5,"system-button-icon",4),o.qZA()(),o.TgZ(6,"div",5)(7,"ul",6)(8,"li",7)(9,"span",8),o._UZ(10,"system-label",9),o.qZA()(),o.YNc(11,g,5,4,"li",10),o.YNc(12,p,6,5,"li",10),o.qZA()()()),2&e&&(o.Q6J("system-dropdown-trigger-simple",t.disabled),o.xp6(3),o.Oqu(t.modellist.currentList.name),o.xp6(1),o.Q6J("disabled",t.disabled),o.xp6(7),o.Q6J("ngForOf",t.modellist.standardLists),o.xp6(1),o.Q6J("ngForOf",t.listTypes))},dependencies:[d.mk,d.sg,r.J,c._,u.r,h.w],encapsulation:2})),ObjectListTypes})()},7954:(e,t,s)=>{"use strict";s.d(t,{i:()=>_});var i=s(1180),n=s(2242),o=s(5329),l=s(2644),a=s(5710),d=s(4755),r=s(3463),c=s(8859),u=s(79);function h(e,t){if(1&e&&(n.TgZ(0,"li",8),n._uU(1),n.qZA()),2&e){const e=t.$implicit;n.xp6(1),n.Oqu(e)}}function m(e,t){if(1&e&&(n.TgZ(0,"div",9),n._uU(1),n._UZ(2,"system-label",10),n._uU(3,")"),n.qZA()),2&e){const e=n.oxw();n.xp6(1),n.hij("(",e.checkdCount," ")}}function g(e,t){if(1&e&&(n.TgZ(0,"div",13),n._UZ(1,"object-listview-aggregate-item",14),n.qZA()),2&e){const e=t.$implicit,s=n.oxw(2);n.xp6(1),n.Q6J("bucketitem",e)("aggregate",s.aggregate)}}function p(e,t){if(1&e&&(n.TgZ(0,"span"),n._uU(1),n.qZA()),2&e){const e=n.oxw(4);n.xp6(1),n.hij(" (+",e.aggregateBucketCount-5,")")}}function f(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"a",18),n.NdJ("click",(function(){n.CHM(e);const t=n.oxw(3);return n.KtG(t.showall=!t.showall)})),n._UZ(1,"system-label",19),n.YNc(2,p,2,1,"span",7),n.qZA()}if(2&e){const e=n.oxw(3);n.xp6(1),n.Q6J("label",e.showall?"LBL_LESS":"LBL_MORE"),n.xp6(1),n.Q6J("ngIf",!e.showall)}}function b(e,t){if(1&e&&(n.TgZ(0,"p",20),n._uU(1),n._UZ(2,"system-label",21),n._uU(3,"..."),n.qZA()),2&e){const e=n.oxw(3);n.xp6(1),n.hij("",e.otherDocCount," ")}}function v(e,t){if(1&e&&(n.TgZ(0,"div",15)(1,"div"),n.YNc(2,f,3,2,"a",16),n.qZA(),n.TgZ(3,"div"),n.YNc(4,b,4,1,"p",17),n.qZA()()),2&e){const e=n.oxw(2);n.xp6(2),n.Q6J("ngIf",e.aggregateBucketCount>e.aggregateDefaultItems),n.xp6(2),n.Q6J("ngIf",e.otherDocCount>0)}}function Z(e,t){if(1&e&&(n.ynx(0),n.YNc(1,g,2,2,"div",11),n.YNc(2,v,5,2,"div",12),n.BQk()),2&e){const e=n.oxw();n.xp6(1),n.Q6J("ngForOf",e.aggregateBuckets),n.xp6(1),n.Q6J("ngIf",e.aggregateBucketCount>e.aggregateDefaultItems||e.otherDocCount>0)}}let _=(()=>{var e;class ObjectListViewAggregate{constructor(e,t,s){(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"modellist",void 0),(0,i.Z)(this,"model",void 0),(0,i.Z)(this,"aggregate",{}),(0,i.Z)(this,"aggregateDefaultItems",5),(0,i.Z)(this,"showall",!1),this.language=e,this.modellist=t,this.model=s}get aggregateNameItems(){let e=[];return this.aggregate.fielddetails&&(this.model.module!=this.aggregate.fielddetails.module&&e.push(this.language.getModuleName(this.aggregate.fielddetails.module,!0)),e.push(this.language.getFieldDisplayName(this.aggregate.fielddetails.module,this.aggregate.fielddetails.field))),e}get aggregatename(){return this.aggregate.indexfieldname?.replace(/>/g,"")}get aggregateBucketCount(){return this.aggregatename&&this.modellist.searchAggregates?.[this.aggregatename]?this.modellist.searchAggregates?.[this.aggregatename].buckets.length:0}get aggregateBuckets(){return this.aggregatename&&this.modellist.searchAggregates?.[this.aggregatename]?this.modellist.searchAggregates?.[this.aggregatename].buckets.filter(((e,t)=>this.showall||t<this.aggregateDefaultItems||this.modellist.checkAggregate(this.aggregatename,e.aggdata))):[]}get otherDocCount(){return this.aggregatename&&this.modellist.searchAggregates?.[this.aggregatename]?this.modellist.searchAggregates?.[this.aggregatename].sum_other_doc_count:0}get checkdCount(){return this.modellist.getCheckedAggregateCount(this.aggregatename)}get collapsed(){return!!this.aggregate.collapsed}toggleCollapsed(){this.aggregate.collapsed=!this.aggregate.collapsed}}return e=ObjectListViewAggregate,(0,i.Z)(ObjectListViewAggregate,"ɵfac",(function(t){return new(t||e)(n.Y36(o.d),n.Y36(l.t),n.Y36(a.o))})),(0,i.Z)(ObjectListViewAggregate,"ɵcmp",n.Xpm({type:e,selectors:[["object-listview-aggregate"]],inputs:{aggregate:"aggregate"},decls:8,vars:4,consts:[[1,"slds-filters__item","slds-p-horizontal--small","slds-p-vertical--xx-small"],[1,"slds-p-vertical--xx-small","slds-grid","slds-grid--vertical-align-center","slds-grid--align-spread",3,"click"],[1,"slds-grid"],[1,"slds-list_horizontal","slds-has-dividers_right"],["class","slds-item",4,"ngFor","ngForOf"],["class","slds-p-left--xx-small",4,"ngIf"],["size","x-small",3,"icon"],[4,"ngIf"],[1,"slds-item"],[1,"slds-p-left--xx-small"],["label","LBL_SELECTED"],["class","slds-form-element",4,"ngFor","ngForOf"],["class","slds-grid slds-grid--vertical-align-center slds-grid--align-spread slds-p-top--xx-small",4,"ngIf"],[1,"slds-form-element"],[1,"slds-form-element__control",3,"bucketitem","aggregate"],[1,"slds-grid","slds-grid--vertical-align-center","slds-grid--align-spread","slds-p-top--xx-small"],["class","slds-text-body--small","href","javascript:void(0);",3,"click",4,"ngIf"],["class","slds-text-body--small slds-text-color--weak",4,"ngIf"],["href","javascript:void(0);",1,"slds-text-body--small",3,"click"],[3,"label"],[1,"slds-text-body--small","slds-text-color--weak"],["label","LBL_ARE_NOT_INCLUDED"]],template:function(e,t){1&e&&(n.TgZ(0,"div",0)(1,"div",1),n.NdJ("click",(function(){return t.toggleCollapsed()})),n.TgZ(2,"div",2)(3,"ul",3),n.YNc(4,h,2,1,"li",4),n.qZA(),n.YNc(5,m,4,1,"div",5),n.qZA(),n._UZ(6,"system-utility-icon",6),n.qZA(),n.YNc(7,Z,3,2,"ng-container",7),n.qZA()),2&e&&(n.xp6(4),n.Q6J("ngForOf",t.aggregateNameItems),n.xp6(1),n.Q6J("ngIf",t.collapsed&&t.checkdCount>0),n.xp6(1),n.Q6J("icon",t.collapsed?"down":"up"),n.xp6(1),n.Q6J("ngIf",!t.collapsed))},dependencies:[d.sg,d.O5,r._,c.r,u.Q],encapsulation:2})),ObjectListViewAggregate})()},79:(e,t,s)=>{"use strict";s.d(t,{Q:()=>b});var i=s(1180),n=s(2242),o=s(5329),l=s(4154),a=s(2644),d=s(4755),r=s(5030),c=s(7514),u=s(4270),h=s(5232),m=s(115);function g(e,t){if(1&e&&n._UZ(0,"object-listview-aggregate-item-range",7),2&e){const e=n.oxw();n.Q6J("aggregate",e.aggregate)("item",e.bucketitem)}}function p(e,t){if(1&e&&n._UZ(0,"object-listview-aggregate-item-term",7),2&e){const e=n.oxw();n.Q6J("aggregate",e.aggregate)("item",e.bucketitem)}}function f(e,t){if(1&e&&(n.TgZ(0,"div"),n._uU(1),n.qZA()),2&e){const e=n.oxw();n.xp6(1),n.Oqu(e.bucketitem.displayName)}}let b=(()=>{var e;class ObjectListViewAggregateItem{constructor(e,t,s,n){(0,i.Z)(this,"elementRef",void 0),(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"modellist",void 0),(0,i.Z)(this,"bucketitem",{}),(0,i.Z)(this,"aggregate",{}),(0,i.Z)(this,"isChecked",!1),this.elementRef=e,this.language=t,this.metadata=s,this.modellist=n}get aggregatename(){return this.aggregate.indexfieldname?.replace(/>/g,"")}get disabled(){return this.modellist.isLoading||!this.modellist.canChangeAggegate(this.aggregatename)}set checked(e){if(this.isChecked=e,e)this.modellist.setAggregate(this.aggregatename,this.bucketitem.aggdata),this.modellist.scheduleReloadList();else{this.modellist.removeAggregate(this.aggregatename,this.bucketitem.aggdata)&&this.modellist.scheduleReloadList()}}get checked(){return this.modellist.checkAggregate(this.aggregatename,this.bucketitem.aggdata)}}return e=ObjectListViewAggregateItem,(0,i.Z)(ObjectListViewAggregateItem,"ɵfac",(function(t){return new(t||e)(n.Y36(n.SBq),n.Y36(o.d),n.Y36(l.Pu),n.Y36(a.t))})),(0,i.Z)(ObjectListViewAggregateItem,"ɵcmp",n.Xpm({type:e,selectors:[["object-listview-aggregate-item"]],inputs:{bucketitem:"bucketitem",aggregate:"aggregate"},decls:10,vars:8,consts:[[1,"slds-grid","slds-grid--vertical-align-center"],[3,"disabled","ngModel","hidelabel","ngModelChange"],[1,"slds-grow","slds-truncate",3,"ngSwitch"],[3,"aggregate","item",4,"ngSwitchCase"],[4,"ngSwitchDefault"],[1,"slds-p-left--xx-small","slds-text-align--right",2,"min-width","45px"],[3,"number","noDigits"],[3,"aggregate","item"]],template:function(e,t){1&e&&(n.TgZ(0,"div",0)(1,"system-checkbox",1),n.NdJ("ngModelChange",(function(e){return t.checked=e})),n.qZA(),n.TgZ(2,"div",2),n.YNc(3,g,1,2,"object-listview-aggregate-item-range",3),n.YNc(4,p,1,2,"object-listview-aggregate-item-term",3),n.YNc(5,f,2,1,"div",4),n.qZA(),n.TgZ(6,"div",5),n._uU(7,"("),n._UZ(8,"system-display-number",6),n._uU(9,")"),n.qZA()()),2&e&&(n.xp6(1),n.Q6J("disabled",t.disabled)("ngModel",t.checked)("hidelabel",!0),n.xp6(1),n.Q6J("ngSwitch",t.aggregate.type),n.xp6(1),n.Q6J("ngSwitchCase","range"),n.xp6(1),n.Q6J("ngSwitchCase","term"),n.xp6(4),n.Q6J("number",t.bucketitem.doc_count)("noDigits",!0))},dependencies:[d.RF,d.n9,d.ED,r.JJ,r.On,c.U,u.G,h.C,m.V],encapsulation:2})),ObjectListViewAggregateItem})()},115:(e,t,s)=>{"use strict";s.d(t,{V:()=>f});var i=s(1180),n=s(2242),o=s(5710),l=s(4755),a=s(3463),d=s(5232);function r(e,t){if(1&e&&(n.TgZ(0,"div"),n._UZ(1,"system-label",3),n.qZA()),2&e){const e=n.oxw();n.xp6(1),n.Q6J("label",e.item.displayName)}}const c=function(e){return{key:e}};function u(e,t){if(1&e&&n._UZ(0,"object-listview-aggregate-item-term",7),2&e){const e=n.oxw(2);n.Q6J("aggregate",e.aggregate)("item",n.VKq(2,c,e.item.from))}}function h(e,t){1&e&&(n.TgZ(0,"span"),n._uU(1,"*"),n.qZA())}function m(e,t){if(1&e&&n._UZ(0,"object-listview-aggregate-item-term",7),2&e){const e=n.oxw(2);n.Q6J("aggregate",e.aggregate)("item",n.VKq(2,c,e.item.to))}}function g(e,t){1&e&&(n.TgZ(0,"span"),n._uU(1,"*"),n.qZA())}function p(e,t){if(1&e&&(n.TgZ(0,"div"),n.YNc(1,u,1,4,"object-listview-aggregate-item-term",4),n.YNc(2,h,2,0,"span",5),n.qZA(),n.TgZ(3,"div",6),n._uU(4," - "),n.qZA(),n.TgZ(5,"div"),n.YNc(6,m,1,4,"object-listview-aggregate-item-term",4),n.YNc(7,g,2,0,"span",5),n.qZA()),2&e){const e=n.oxw();n.xp6(1),n.Q6J("ngIf",e.item.from),n.xp6(1),n.Q6J("ngIf",!e.item.from),n.xp6(4),n.Q6J("ngIf",e.item.to),n.xp6(1),n.Q6J("ngIf",!e.item.to)}}let f=(()=>{var e;class ObjectListViewAggregateItemRange{constructor(e){(0,i.Z)(this,"model",void 0),(0,i.Z)(this,"item",{}),(0,i.Z)(this,"aggregate",{}),this.model=e}}return e=ObjectListViewAggregateItemRange,(0,i.Z)(ObjectListViewAggregateItemRange,"ɵfac",(function(t){return new(t||e)(n.Y36(o.o))})),(0,i.Z)(ObjectListViewAggregateItemRange,"ɵcmp",n.Xpm({type:e,selectors:[["object-listview-aggregate-item-range"]],inputs:{item:"item",aggregate:"aggregate"},decls:4,vars:2,consts:[[1,"slds-grid","slds-grid--vertical-align-center"],[4,"ngIf","ngIfElse"],["noDisplayname",""],[3,"label"],[3,"aggregate","item",4,"ngIf"],[4,"ngIf"],[1,"slds-p-horizontal--xx-small"],[3,"aggregate","item"]],template:function(e,t){if(1&e&&(n.TgZ(0,"div",0),n.YNc(1,r,2,1,"div",1),n.YNc(2,p,8,4,"ng-template",null,2,n.W1O),n.qZA()),2&e){const e=n.MAs(3);n.xp6(1),n.Q6J("ngIf",t.item.displayName)("ngIfElse",e)}},dependencies:[l.O5,a._,d.C],encapsulation:2})),ObjectListViewAggregateItemRange})()},5232:(e,t,s)=>{"use strict";s.d(t,{C:()=>h});var i=s(1180),n=s(5710),o=s(2294),l=s(2242),a=s(4755),d=s(3634),r=s(3463);function c(e,t){1&e&&(l.TgZ(0,"span",2),l._UZ(1,"system-label",3),l.qZA())}function u(e,t){if(1&e&&l._UZ(0,"field-container",4),2&e){const e=l.oxw();l.Q6J("fieldname",e.aggregate.fielddetails.field)}}let h=(()=>{var e;class ObjectListViewAggregateItemTerm{constructor(e,t){(0,i.Z)(this,"model",void 0),(0,i.Z)(this,"view",void 0),(0,i.Z)(this,"item",{}),(0,i.Z)(this,"aggregate",{}),this.model=e,this.view=t,this.view.displayLabels=!1}ngOnInit(){this.model.module=this.aggregate.fielddetails.module,this.model.setField(this.aggregate.fielddetails.field,this.model.utils.backend2spice(this.model.module,this.aggregate.fielddetails.field,this.item.key))}}return e=ObjectListViewAggregateItemTerm,(0,i.Z)(ObjectListViewAggregateItemTerm,"ɵfac",(function(t){return new(t||e)(l.Y36(n.o),l.Y36(o.e))})),(0,i.Z)(ObjectListViewAggregateItemTerm,"ɵcmp",l.Xpm({type:e,selectors:[["object-listview-aggregate-item-term"]],inputs:{item:"item",aggregate:"aggregate"},features:[l._Bn([o.e,n.o])],decls:2,vars:2,consts:[["style","font-style: italic;",4,"ngIf"],["fielddisplayclass","slds-truncate",3,"fieldname",4,"ngIf"],[2,"font-style","italic"],["label","LBL_NOT_SET"],["fielddisplayclass","slds-truncate",3,"fieldname"]],template:function(e,t){1&e&&(l.YNc(0,c,2,0,"span",0),l.YNc(1,u,1,1,"field-container",1)),2&e&&(l.Q6J("ngIf","#not#set#"==t.item.key),l.xp6(1),l.Q6J("ngIf","#not#set#"!=t.item.key))},dependencies:[a.O5,d.j,r._],encapsulation:2})),ObjectListViewAggregateItemTerm})()},4822:(e,t,s)=>{"use strict";s.d(t,{X:()=>r});var i=s(1180),n=s(2242),o=s(2644),l=s(4755),a=s(2656),d=s(151);let r=(()=>{var e;class ObjectListViewAggregatesButton{constructor(e){(0,i.Z)(this,"modellist",void 0),this.modellist=e}toggleaggregates(){this.modellist.displayFilters=!1,this.modellist.displayAggregates=!this.modellist.displayAggregates}get enabled(){return this.modellist.aggregatesEnabled()}get buttonclasses(){return this.modellist.displayAggregates?"slds-is-selected":""}}return e=ObjectListViewAggregatesButton,(0,i.Z)(ObjectListViewAggregatesButton,"ɵfac",(function(t){return new(t||e)(n.Y36(o.t))})),(0,i.Z)(ObjectListViewAggregatesButton,"ɵcmp",n.Xpm({type:e,selectors:[["object-listview-aggregates-button"]],decls:2,vars:2,consts:[["system-title","LBL_AGGREGATES",1,"slds-button","slds-button--neutral","slds-button--icon-border","slds-m-horizontal--xxx-small",3,"disabled","ngClass","click"],["icon","bucket"]],template:function(e,t){1&e&&(n.TgZ(0,"button",0),n.NdJ("click",(function(){return t.toggleaggregates()})),n._UZ(1,"system-button-icon",1),n.qZA()),2&e&&n.Q6J("disabled",!t.enabled)("ngClass",t.buttonclasses)},dependencies:[l.mk,a.J,d.S],encapsulation:2})),ObjectListViewAggregatesButton})()},2348:(e,t,s)=>{"use strict";s.d(t,{M:()=>g});var i=s(1180),n=s(2242),o=s(2644),l=s(5329),a=s(6559),d=s(4755),r=s(4270),c=s(3463),u=s(8859);function h(e,t){1&e&&n._UZ(0,"system-label",9)}function m(e,t){if(1&e&&(n.TgZ(0,"li",10)(1,"span"),n._uU(2),n._UZ(3,"system-label",11),n.qZA()()),2&e){const e=n.oxw();n.xp6(2),n.hij("",e.modellist.getSelectedCount()," ")}}let g=(()=>{var e;class ObjectListViewHeaderDetails{constructor(e,t,s){(0,i.Z)(this,"modellist",void 0),(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"layout",void 0),this.modellist=e,this.language=t,this.layout=s}}return e=ObjectListViewHeaderDetails,(0,i.Z)(ObjectListViewHeaderDetails,"ɵfac",(function(t){return new(t||e)(n.Y36(o.t),n.Y36(l.d),n.Y36(a.b))})),(0,i.Z)(ObjectListViewHeaderDetails,"ɵcmp",n.Xpm({type:e,selectors:[["object-listview-header-details"]],decls:10,vars:9,consts:[[1,"slds-list_horizontal","slds-has-dividers_left","slds-has-block-links_space"],[1,"slds-item",3,"title"],[1,"slds-p-right--xxx-small",3,"number","noDigits"],["label","LBL_OF"],[1,"slds-p-horizontal--xxx-small",3,"number","noDigits"],["label","LBL_ITEMS",4,"ngIf"],["class","slds-item slds-show--medium",4,"ngIf"],[1,"slds-item"],["size","xx-small",3,"icon","title"],["label","LBL_ITEMS"],[1,"slds-item","slds-show--medium"],["label","LBL_SELECTED"]],template:function(e,t){1&e&&(n.TgZ(0,"ul",0)(1,"li",1)(2,"span"),n._UZ(3,"system-display-number",2)(4,"system-label",3)(5,"system-display-number",4),n.YNc(6,h,1,0,"system-label",5),n.qZA()(),n.YNc(7,m,4,1,"li",6),n.TgZ(8,"li",7),n._UZ(9,"system-utility-icon",8),n.qZA()()),2&e&&(n.xp6(1),n.Q6J("title",t.language.getLabel("LBL_SORTEDBY")+" "+t.modellist.getSortFields()+"\n"+t.language.getLabel("LBL_LASTUPDATE")+" "+t.modellist.getLastLoadTime()),n.xp6(2),n.Q6J("number",t.modellist.listData.list.length)("noDigits",!0),n.xp6(2),n.Q6J("number",t.modellist.listData.totalcount)("noDigits",!0),n.xp6(1),n.Q6J("ngIf","small"!=t.layout.screenwidth),n.xp6(1),n.Q6J("ngIf",t.modellist.getSelectedCount()>0),n.xp6(2),n.Q6J("icon","db"==t.modellist.listData.source?"database":"feed")("title","db"==t.modellist.listData.source?"Database":"Search Engine"))},dependencies:[d.O5,r.G,c._,u.r],encapsulation:2})),ObjectListViewHeaderDetails})()},2685:(e,t,s)=>{"use strict";s.d(t,{w:()=>p});var i=s(1180),n=s(7954),o=s(2242),l=s(5329),a=s(2644),d=s(5710),r=s(4755),c=s(3463);const u=function(e){return{"slds-badge_inverse":e}};function h(e,t){if(1&e){const e=o.EpF();o.TgZ(0,"div",4)(1,"div",5),o.NdJ("click",(function(){const t=o.CHM(e).$implicit,s=o.oxw(2);return o.KtG(s.toggle(t))})),o.TgZ(2,"div",6)(3,"div",7),o._uU(4),o.qZA(),o.TgZ(5,"div",8),o._uU(6),o.qZA()()()()}if(2&e){const e=t.$implicit,s=o.oxw(2);o.xp6(1),o.Q6J("title",e.displayName)("ngClass",o.VKq(4,u,s.isactive(e))),o.xp6(3),o.Oqu(e.displayName),o.xp6(2),o.hij("(",e.doc_count,")")}}function m(e,t){if(1&e&&(o.ynx(0),o.YNc(1,h,7,6,"div",3),o.BQk()),2&e){const e=o.oxw();o.xp6(1),o.Q6J("ngForOf",e.aggregateBuckets)}}function g(e,t){1&e&&(o.TgZ(0,"div",9),o._UZ(1,"system-label",10),o.qZA())}let p=(()=>{var e;class ObjectListViewTagsAggregate extends n.i{constructor(e,t,s){super(e,t,s),(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"modellist",void 0),(0,i.Z)(this,"model",void 0),(0,i.Z)(this,"aggregate",{indexfieldname:"tags"}),this.language=e,this.modellist=t,this.model=s}get hasItems(){try{return this.aggregateBuckets.length>0}catch(e){return!1}}isactive(e){return this.modellist.checkAggregate("tags",e.aggdata)}toggle(e){if(this.isactive(e)){this.modellist.removeAggregate("tags",e.aggdata)&&this.modellist.scheduleReloadList()}else this.modellist.setAggregate("tags",e.aggdata),this.modellist.scheduleReloadList()}}return e=ObjectListViewTagsAggregate,(0,i.Z)(ObjectListViewTagsAggregate,"ɵfac",(function(t){return new(t||e)(o.Y36(l.d),o.Y36(a.t),o.Y36(d.o))})),(0,i.Z)(ObjectListViewTagsAggregate,"ɵcmp",o.Xpm({type:e,selectors:[["object-listview-tags-aggregate"]],features:[o.qOj],decls:3,vars:2,consts:[[1,"slds-filters__item","slds-grid","slds-wrap","slds-grid--align-cente"],[4,"ngIf"],["class","slds-align--absolute-center",4,"ngIf"],["class","slds-p-around--xxx-small slds-truncate","style","max-width: 50%;",4,"ngFor","ngForOf"],[1,"slds-p-around--xxx-small","slds-truncate",2,"max-width","50%"],[1,"slds-badge","slds-truncate",3,"title","ngClass","click"],[1,"slds-grid"],[1,"slds-truncate","slds-text-link_reset"],[1,"slds-p-left--xxx-small"],[1,"slds-align--absolute-center"],["label","MSG_NO_RECORDS_TAGGED"]],template:function(e,t){1&e&&(o.TgZ(0,"div",0),o.YNc(1,m,2,1,"ng-container",1),o.YNc(2,g,2,0,"div",2),o.qZA()),2&e&&(o.xp6(1),o.Q6J("ngIf",t.hasItems),o.xp6(1),o.Q6J("ngIf",!t.hasItems))},dependencies:[r.mk,r.sg,r.O5,c._],encapsulation:2})),ObjectListViewTagsAggregate})()},9533:(e,t,s)=>{"use strict";s.d(t,{X:()=>M});var i=s(1180),n=s(2242),o=s(5710),l=s(2644),a=s(2294),d=s(727),r=s(9866),c=s(5329),u=s(4154),h=s(6163),m=s(6559),g=s(4755),p=s(3463),f=s(9621),b=s(3499),v=s(5767),Z=s(1916),_=s(2161),y=s(6059),x=s(6857),w=s(9624);const T=["tablecontent"];function C(e,t){if(1&e&&(n.TgZ(0,"thead"),n._UZ(1,"tr",14),n.qZA()),2&e){const e=n.oxw();n.xp6(1),n.Q6J("showSelectColumn",e.multiselect)("showRowActionMenu",!1)}}function A(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"tr",15),n.NdJ("click",(function(t){const s=n.CHM(e).$implicit,i=n.oxw();return n.KtG(i.clickRow(t,s))})),n.qZA()}if(2&e){const e=t.$implicit,s=n.oxw();n.Q6J("listItem",e)("showActionMenu",!1)("rowselect",s.multiselect)("displaylinks",!1)}}function k(e,t){if(1&e&&n._UZ(0,"tbody",16),2&e){const e=n.oxw();n.Q6J("columns",null==e.modellist.listfields?null:e.modellist.listfields.length)("select",e.multiselect)("tools",!1)("rows",10)}}function L(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"button",17),n.NdJ("click",(function(){n.CHM(e);const t=n.oxw();return n.KtG(t.selectItems())})),n._UZ(1,"system-label",18),n.qZA()}if(2&e){const e=n.oxw();n.Q6J("disabled",0==e.selectedCount)}}const I=function(e,t,s){return{"slds-no-row-hover":e,singleselect:t,"slds-table--header-fixed":s}};let M=(()=>{var e;class ObjectModalModuleLookup{constructor(e,t,s,o,l,a){(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"modellist",void 0),(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"modelutilities",void 0),(0,i.Z)(this,"model",void 0),(0,i.Z)(this,"layout",void 0),(0,i.Z)(this,"tablecontent",void 0),(0,i.Z)(this,"headercontent",void 0),(0,i.Z)(this,"searchTerm",""),(0,i.Z)(this,"self",{}),(0,i.Z)(this,"multiselect",!1),(0,i.Z)(this,"module",""),(0,i.Z)(this,"modulefilter",""),(0,i.Z)(this,"relatefilter",void 0),(0,i.Z)(this,"subscriptions",new d.w0),(0,i.Z)(this,"selectedItems",new n.vpe),(0,i.Z)(this,"usedSearchTerm",new n.vpe),this.language=e,this.modellist=t,this.metadata=s,this.modelutilities=o,this.model=l,this.layout=a,this.subscriptions.add(this.modellist.listType$.subscribe((e=>this.switchListtype())))}contentStyle(){if(this.headercontent){return{height:`calc(100% - ${this.headercontent.element.nativeElement.getBoundingClientRect().height}px)`}}return{height:"100%"}}get smallView(){return"small"==this.layout.screenwidth}ngOnInit(){this.modellist.modulefilter=this.modulefilter,this.modellist.relatefilter=this.relatefilter,this.modellist.useCache=!1,this.modellist.initialize(this.module),this.modellist.getListData(),this.model.module=this.module,""!=this.searchTerm&&this.doSearch()}ngOnDestroy(){this.subscriptions.unsubscribe()}switchListtype(){}doSearch(){this.modellist.searchTerm=this.searchTerm,this.modellist.getListData()}onScroll(e){let t=this.tablecontent.element.nativeElement;t.scrollTop+t.clientHeight+50>t.scrollHeight&&this.modellist.loadMoreList()}closePopup(){this.usedSearchTerm.emit(this.modellist.searchTerm),this.self.destroy()}get selectedCount(){return this.modellist.getSelectedCount()}selectItems(){this.selectedItems.emit(this.modellist.getSelectedItems()),this.usedSearchTerm.emit(this.searchTerm),this.self.destroy()}clickRow(e,t){this.multiselect||(this.selectedItems.emit([t]),this.usedSearchTerm.emit(this.searchTerm),this.self.destroy())}}return e=ObjectModalModuleLookup,(0,i.Z)(ObjectModalModuleLookup,"ɵfac",(function(t){return new(t||e)(n.Y36(c.d),n.Y36(l.t),n.Y36(u.Pu),n.Y36(h.A),n.Y36(o.o),n.Y36(m.b))})),(0,i.Z)(ObjectModalModuleLookup,"ɵcmp",n.Xpm({type:e,selectors:[["object-modal-module-lookup"]],viewQuery:function(e,t){if(1&e&&(n.Gf(T,7,n.s_b),n.Gf(r.x,5)),2&e){let e;n.iGM(e=n.CRH())&&(t.tablecontent=e.first),n.iGM(e=n.CRH())&&(t.headercontent=e.first)}},inputs:{relatefilter:"relatefilter"},outputs:{selectedItems:"selectedItems",usedSearchTerm:"usedSearchTerm"},features:[n._Bn([a.e,l.t,o.o])],decls:19,vars:12,consts:[["size","large"],[3,"close"],["margin","none",3,"grow"],[1,"slds-height_full"],[1,"slds-is-relative",3,"ngStyle"],[1,"slds-scrollable--y","slds-height_full",3,"scroll"],["tablecontent",""],["role","listbox",1,"slds-table","slds-table--fixed-layout","slds-table--bordered","slds-max-medium-table--stacked-horizontal",3,"ngClass"],[4,"ngIf"],["object-list-item","","class","slds-hint-parent slds-p-horizontal--x-small",3,"listItem","showActionMenu","rowselect","displaylinks","click",4,"ngFor","ngForOf"],["system-table-stencils","",3,"columns","select","tools","rows",4,"ngIf"],[1,"slds-button","slds-button--neutral",3,"click"],["label","LBL_CANCEL"],["class","slds-button slds-button--brand",3,"disabled","click",4,"ngIf"],["object-list-header","",3,"showSelectColumn","showRowActionMenu"],["object-list-item","",1,"slds-hint-parent","slds-p-horizontal--x-small",3,"listItem","showActionMenu","rowselect","displaylinks","click"],["system-table-stencils","",3,"columns","select","tools","rows"],[1,"slds-button","slds-button--brand",3,"disabled","click"],["label","LBL_SELECT"]],template:function(e,t){1&e&&(n.TgZ(0,"system-modal",0)(1,"system-modal-header",1),n.NdJ("close",(function(){return t.closePopup()})),n._uU(2),n.qZA(),n.TgZ(3,"system-modal-content",2)(4,"div",3),n._UZ(5,"object-modal-module-lookup-header"),n.TgZ(6,"div",4)(7,"div",5,6),n.NdJ("scroll",(function(e){return t.onScroll(e)})),n.TgZ(9,"table",7),n.YNc(10,C,2,2,"thead",8),n.TgZ(11,"tbody"),n.YNc(12,A,1,4,"tr",9),n.qZA(),n.YNc(13,k,1,4,"tbody",10),n.qZA()(),n._UZ(14,"object-modal-module-lookup-aggregates"),n.qZA()()(),n.TgZ(15,"system-modal-footer")(16,"button",11),n.NdJ("click",(function(){return t.closePopup()})),n._UZ(17,"system-label",12),n.qZA(),n.YNc(18,L,2,1,"button",13),n.qZA()()),2&e&&(n.xp6(2),n.Oqu(t.language.getModuleCombinedLabel("LBL_SEARCH",t.modellist.module)),n.xp6(1),n.Q6J("grow",!0),n.xp6(3),n.Q6J("ngStyle",t.contentStyle()),n.xp6(3),n.Q6J("ngClass",n.kEZ(8,I,t.multiselect,!t.multiselect,!t.smallView)),n.xp6(1),n.Q6J("ngIf",!t.smallView),n.xp6(2),n.Q6J("ngForOf",t.modellist.listData.list),n.xp6(1),n.Q6J("ngIf",t.modellist.isLoading),n.xp6(5),n.Q6J("ngIf",t.multiselect))},dependencies:[g.mk,g.sg,g.O5,g.PC,p._,f.j,b.x,v.p,Z.y,_.x,y.p,x.B,r.x,w.D],styles:["table.singleselect tr:hover td{cursor:pointer}"]})),ObjectModalModuleLookup})()},9624:(e,t,s)=>{"use strict";s.d(t,{D:()=>f});var i=s(1180),n=s(1591),o=s(2242),l=s(2644),a=s(4154),d=s(4755),r=s(7763),c=s(7954),u=s(2685);function h(e,t){1&e&&o._UZ(0,"object-listview-tags-aggregate")}function m(e,t){if(1&e&&(o.TgZ(0,"div",5),o._UZ(1,"object-listview-aggregate",6),o.qZA()),2&e){const e=t.$implicit;o.xp6(1),o.Q6J("aggregate",e)}}const g=function(e){return{module:e}};function p(e,t){if(1&e&&(o.TgZ(0,"div",1)(1,"div",2),o.YNc(2,h,1,0,"object-listview-tags-aggregate",3),o.YNc(3,m,2,1,"div",4),o.qZA()()),2&e){const e=o.oxw();o.Q6J("@animatepanel",void 0)("system-model-provider",o.VKq(4,g,e.modellist.module)),o.xp6(2),o.Q6J("ngIf",e.hasTags),o.xp6(1),o.Q6J("ngForOf",e.getAggregates())}}let f=(()=>{var e;class ObjectModalModuleLookupAggregates{constructor(e,t){(0,i.Z)(this,"modellist",void 0),(0,i.Z)(this,"metadata",void 0),this.modellist=e,this.metadata=t}get hasTags(){return this.metadata.checkTagging(this.modellist.module)}getAggregates(){return this.modellist.moduleAggregates}}return e=ObjectModalModuleLookupAggregates,(0,i.Z)(ObjectModalModuleLookupAggregates,"ɵfac",(function(t){return new(t||e)(o.Y36(l.t),o.Y36(a.Pu))})),(0,i.Z)(ObjectModalModuleLookupAggregates,"ɵcmp",o.Xpm({type:e,selectors:[["object-modal-module-lookup-aggregates"]],decls:1,vars:1,consts:[["class","slds-is-absolute slds-panel slds-panel--filters slds-filters__body slds-nowrap  slds-scrollable--y","style","width: 320px; height: 100%; top:0px; right: 0px;z-index: 99;",3,"system-model-provider",4,"ngIf"],[1,"slds-is-absolute","slds-panel","slds-panel--filters","slds-filters__body","slds-nowrap","slds-scrollable--y",2,"width","320px","height","100%","top","0px","right","0px","z-index","99",3,"system-model-provider"],[1,"slds-filters__body","slds-grid_vertical"],[4,"ngIf"],["class","slds-m-vertical--xx-small",4,"ngFor","ngForOf"],[1,"slds-m-vertical--xx-small"],[3,"aggregate"]],template:function(e,t){1&e&&o.YNc(0,p,4,6,"div",0),2&e&&o.Q6J("ngIf",t.modellist.displayAggregates)},dependencies:[d.sg,d.O5,r.u,c.i,u.w],encapsulation:2,data:{animation:[(0,n.X$)("animatepanel",[(0,n.eR)(":enter",[(0,n.oB)({right:"-320px",overflow:"hidden"}),(0,n.jt)(".5s",(0,n.oB)({right:"0px"})),(0,n.oB)({overflow:"unset"})]),(0,n.eR)(":leave",[(0,n.oB)({overflow:"hidden"}),(0,n.jt)(".5s",(0,n.oB)({right:"-320px"}))])])]}})),ObjectModalModuleLookupAggregates})()},9866:(e,t,s)=>{"use strict";s.d(t,{x:()=>y});var i=s(1180),n=s(2242),o=s(727),l=s(5329),a=s(2644),d=s(6163),r=s(4154),c=s(4755),u=s(5030),h=s(2656),m=s(7514),g=s(3463),p=s(3333),f=s(8859),b=s(7102),v=s(2348),Z=s(4822);function _(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"system-checkbox",8),n.NdJ("ngModelChange",(function(t){n.CHM(e);const s=n.oxw();return n.KtG(s.relatefilterActive=t)})),n._UZ(1,"system-label",9)(2,"system-label-modulename",10),n._uU(3),n.qZA()}if(2&e){const e=n.oxw();n.Q6J("disabled",e.relatefilter.required)("ngModel",e.relatefilterActive),n.xp6(2),n.Q6J("module",e.relatefilter.module)("singular",!0),n.xp6(1),n.hij(" ",e.relatefilter.display,"")}}let y=(()=>{var e;class ObjectModalModuleLookupHeader{constructor(e,t,s,l,a){(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"modellist",void 0),(0,i.Z)(this,"modelutilities",void 0),(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"element",void 0),(0,i.Z)(this,"searchTerm",""),(0,i.Z)(this,"searchTermOld",""),(0,i.Z)(this,"searchTimeOut",void 0),(0,i.Z)(this,"autoCompleteKiller",void 0),(0,i.Z)(this,"subscriptions",new o.w0),(0,i.Z)(this,"usedSearchTerm",new n.vpe),this.language=e,this.modellist=t,this.modelutilities=s,this.metadata=l,this.element=a,this.autoCompleteKiller=this.modelutilities.generateGuid()}get relatefilter(){return this.modellist.relatefilter}get relatefilterActive(){return this.relatefilter?.active}set relatefilterActive(e){this.relatefilter.active=e,this.modellist.relatefilter.active=e,this.modellist.reLoadList()}ngOnInit(){this.searchTerm=this.modellist.searchTerm,this.searchTermOld=this.modellist.searchTerm}ngOnDestroy(){this.subscriptions.unsubscribe()}doSearch(){this.searchTermOld=this.searchTerm,this.modellist.searchTerm=this.searchTerm,this.modellist.getListData()}triggerSearch(e){if(this.searchTerm!==this.searchTermOld)if("Enter"===e.key)this.searchTerm.length>0&&(this.searchTimeOut&&window.clearTimeout(this.searchTimeOut),this.doSearch());else this.searchTimeOut&&window.clearTimeout(this.searchTimeOut),this.searchTimeOut=window.setTimeout((()=>this.doSearch()),1e3)}}return e=ObjectModalModuleLookupHeader,(0,i.Z)(ObjectModalModuleLookupHeader,"ɵfac",(function(t){return new(t||e)(n.Y36(l.d),n.Y36(a.t),n.Y36(d.A),n.Y36(r.Pu),n.Y36(n.SBq))})),(0,i.Z)(ObjectModalModuleLookupHeader,"ɵcmp",n.Xpm({type:e,selectors:[["object-modal-module-lookup-header"]],outputs:{usedSearchTerm:"usedSearchTerm"},decls:11,vars:5,consts:[[1,"slds-form-element","slds-p-top--medium","slds-p-horizontal--medium","slds-m-bottom--small","slds-grid","slds-grid--vertical-align-center"],[1,"slds-form-element__control","slds-input-has-icon","slds-input-has-icon--right","slds-grow"],["icon","search","size","x-small","addclasses","slds-input__icon"],["type","text","id","lookup",1,"slds-input",3,"ngModel","autocomplete","placeholder","ngModelChange","keyup"],[1,"slds-button","slds-button--neutral","slds-button--icon-border","slds-m-horizontal--xxx-small",3,"click"],[3,"icon"],[1,"slds-theme--shade","slds-p-around--x-small","slds-border--top","slds-grid","slds-grid--vertical-align-center","slds","slds-grid--align-spread"],[3,"disabled","ngModel","ngModelChange",4,"ngIf"],[3,"disabled","ngModel","ngModelChange"],["label","LBL_RELATED_TO"],[3,"module","singular"]],template:function(e,t){1&e&&(n.TgZ(0,"div",0),n._UZ(1,"object-list-types"),n.TgZ(2,"div",1),n._UZ(3,"system-utility-icon",2),n.TgZ(4,"input",3),n.NdJ("ngModelChange",(function(e){return t.searchTerm=e}))("keyup",(function(e){return t.triggerSearch(e)})),n.qZA()(),n.TgZ(5,"button",4),n.NdJ("click",(function(){return t.modellist.reLoadList()})),n._UZ(6,"system-button-icon",5),n.qZA(),n._UZ(7,"object-listview-aggregates-button"),n.qZA(),n.TgZ(8,"div",6),n._UZ(9,"object-listview-header-details"),n.YNc(10,_,4,5,"system-checkbox",7),n.qZA()),2&e&&(n.xp6(4),n.Q6J("ngModel",t.searchTerm)("autocomplete",t.autoCompleteKiller)("placeholder",t.language.getModuleName(t.modellist.module)),n.xp6(2),n.Q6J("icon","refresh"),n.xp6(4),n.Q6J("ngIf",t.relatefilter&&t.relatefilter.id))},dependencies:[c.O5,u.Fj,u.JJ,u.On,h.J,m.U,g._,p.M,f.r,b.l,v.M,Z.X],encapsulation:2})),ObjectModalModuleLookupHeader})()},2613:(e,t,s)=>{"use strict";s.d(t,{Y:()=>A});var i=s(1180),n=s(2294),o=s(2242),l=s(5329),a=s(3348),d=s(5710),r=s(4154),c=s(4755),u=s(4561),h=s(3333),m=s(3814),g=s(8861),p=s(4778),f=s(8709),b=s(4652),v=s(5931),Z=s(6409);function y(e,t){if(1&e&&o._UZ(0,"system-label-modulename",15),2&e){const e=o.oxw();o.Q6J("module",e.moduleName)}}function x(e,t){if(1&e){const e=o.EpF();o.TgZ(0,"a",16),o.NdJ("click",(function(){o.CHM(e);const t=o.oxw();return o.KtG(t.goToModule())})),o._UZ(1,"system-label-modulename",15),o.qZA()}if(2&e){const e=o.oxw();o.xp6(1),o.Q6J("module",e.moduleName)}}function w(e,t){if(1&e&&(o.ynx(0),o._uU(1),o.BQk()),2&e){const e=o.oxw();o.xp6(1),o.Oqu(e.model.data.summary_text)}}const T=function(){return{displayLabels:!1}};function C(e,t){if(1&e&&o._UZ(0,"object-record-fieldset-horizontal-list",17),2&e){const e=o.oxw();o.Q6J("fieldset",e.fieldset)("system-view-provider",o.DdM(2,T))}}let A=(()=>{var e;class ObjectPageHeader{get moduleName(){return this.model.module}constructor(e,t,s,n){(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"router",void 0),(0,i.Z)(this,"model",void 0),(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"componentconfig",{}),(0,i.Z)(this,"actionSet",""),(0,i.Z)(this,"fieldset",""),this.language=e,this.router=t,this.model=s,this.metadata=n}ngOnInit(){let e=this.componentconfig&&!_.isEmpty(this.componentconfig)?this.componentconfig:this.metadata.getComponentConfig("ObjectPageHeader",this.model.module);this.actionSet=e.actionset,this.fieldset=e.fieldset}get canGoToModule(){return this.metadata.getModuleDefs(this.moduleName).visible&&this.metadata.checkModuleAcl(this.moduleName,"list")}goToModule(){this.canGoToModule&&this.router.navigate(["/module/"+this.moduleName])}}return e=ObjectPageHeader,(0,i.Z)(ObjectPageHeader,"ɵfac",(function(t){return new(t||e)(o.Y36(l.d),o.Y36(a.F0),o.Y36(d.o),o.Y36(r.Pu))})),(0,i.Z)(ObjectPageHeader,"ɵcmp",o.Xpm({type:e,selectors:[["object-page-header"]],features:[o._Bn([n.e])],decls:19,vars:6,consts:[[1,"slds-page-header"],[1,"slds-grid"],[1,"slds-col","slds-has-flexi-truncate"],[1,"slds-media","slds-no-space","slds-grow"],[3,"module","click"],[1,"slds-media__body"],[1,"slds-text-title--caps","slds-line-height--reset"],[3,"module",4,"ngIf"],["href","javascript:void(0);",3,"click",4,"ngIf"],[1,"slds-grid","slds-grid--vertical-align-center"],[1,"slds-page-header__title","slds-m-right--small","slds-align-middle","slds-truncate"],[4,"ngIf"],[3,"fieldset","system-view-provider",4,"ngIf"],[1,"slds-m-horizontal--x-small","slds-show--medium","slds-align--absolute-center"],[3,"actionset"],[3,"module"],["href","javascript:void(0);",3,"click"],[3,"fieldset","system-view-provider"]],template:function(e,t){1&e&&(o.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"system-icon",4),o.NdJ("click",(function(){return t.goToModule()})),o.qZA(),o.TgZ(5,"div",5)(6,"p",6),o.YNc(7,y,1,1,"system-label-modulename",7),o.YNc(8,x,2,1,"a",8),o.qZA(),o.TgZ(9,"div",9)(10,"h1",10),o.YNc(11,w,2,1,"ng-container",11),o.YNc(12,C,1,3,"object-record-fieldset-horizontal-list",12),o.qZA(),o._UZ(13,"object-page-header-tags"),o.qZA()()()(),o.TgZ(14,"div",13),o._UZ(15,"object-subscription-button")(16,"object-reminder-button")(17,"object-status-network-button")(18,"object-action-container",14),o.qZA()()()),2&e&&(o.xp6(4),o.Q6J("module",t.moduleName),o.xp6(3),o.Q6J("ngIf",!t.canGoToModule),o.xp6(1),o.Q6J("ngIf",t.canGoToModule),o.xp6(3),o.Q6J("ngIf",!t.fieldset),o.xp6(1),o.Q6J("ngIf",t.fieldset),o.xp6(6),o.Q6J("actionset",t.actionSet))},dependencies:[c.O5,u.f,h.M,m.V,g.S,p.d,f.T,b.U,v.Z,Z.n],encapsulation:2})),ObjectPageHeader})()},4778:(e,t,s)=>{"use strict";s.d(t,{d:()=>T});var i=s(1180),n=s(2242),o=s(5710),l=s(4154),a=s(5329),d=s(3278),r=s(4755),c=s(2656),u=s(1078),h=s(3463),m=s(2803),g=s(8859);function p(e,t){1&e&&n._UZ(0,"system-stencil")}function f(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"span",14),n.NdJ("click",(function(){n.CHM(e);const t=n.oxw().index,s=n.oxw(4);return n.KtG(s.removeByIndex(t))})),n._UZ(1,"system-utility-icon",15),n.qZA()}}function b(e,t){if(1&e&&(n.TgZ(0,"div",11)(1,"span",12),n._uU(2),n.YNc(3,f,2,0,"span",13),n.qZA()()),2&e){const e=t.$implicit,s=n.oxw(4);n.xp6(2),n.hij(" ",e," "),n.xp6(1),n.Q6J("ngIf",s.isEditing)}}function v(e,t){if(1&e&&(n.TgZ(0,"div",9),n.YNc(1,b,4,2,"div",10),n.qZA()),2&e){const e=n.oxw(3);n.xp6(1),n.Q6J("ngForOf",e.objecttags)}}function Z(e,t){1&e&&(n.TgZ(0,"div",16)(1,"div",17),n._UZ(2,"system-label",18),n.qZA()())}function _(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"div")(1,"button",19),n.NdJ("click",(function(){n.CHM(e);const t=n.oxw(3);return n.KtG(t.editTags())})),n._UZ(2,"system-button-icon",20),n.qZA()()}2&e&&(n.xp6(2),n.Q6J("icon","edit"))}function y(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"div",21)(1,"div",22)(2,"system-input-tags",23),n.NdJ("tagemitter",(function(t){n.CHM(e);const s=n.oxw(3);return n.KtG(s.addTag(t))})),n.qZA()(),n.TgZ(3,"button",24),n.NdJ("click",(function(){n.CHM(e);const t=n.oxw(3);return n.KtG(t.cancelEdit())})),n._UZ(4,"system-button-icon",20),n.qZA(),n.TgZ(5,"button",19),n.NdJ("click",(function(){n.CHM(e);const t=n.oxw(3);return n.KtG(t.saveTags())})),n._UZ(6,"system-button-icon",20),n.qZA()()}2&e&&(n.xp6(4),n.Q6J("icon","close"),n.xp6(2),n.Q6J("icon","check"))}function x(e,t){if(1&e&&(n.TgZ(0,"div",4),n.YNc(1,v,2,1,"div",5),n.YNc(2,Z,3,0,"div",6),n.YNc(3,_,3,1,"div",7),n.YNc(4,y,7,2,"div",8),n.qZA()),2&e){const e=n.oxw(2);n.xp6(1),n.Q6J("ngIf",e.objecttags.length),n.xp6(1),n.Q6J("ngIf",0==e.objecttags.length&&!e.isEditing),n.xp6(1),n.Q6J("ngIf",!e.isEditing),n.xp6(1),n.Q6J("ngIf",e.isEditing)}}function w(e,t){if(1&e&&(n.TgZ(0,"div",1),n.YNc(1,p,1,0,"system-stencil",2),n.YNc(2,x,5,4,"ng-template",null,3,n.W1O),n.qZA()),2&e){const e=n.MAs(3),t=n.oxw();n.xp6(1),n.Q6J("ngIf",t.model.isLoading)("ngIfElse",e)}}let T=(()=>{var e;class ObjectPageHeaderTags{constructor(e,t,s,n){(0,i.Z)(this,"model",void 0),(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"toast",void 0),(0,i.Z)(this,"isEditing",!1),(0,i.Z)(this,"taggingEnabled",!1),this.model=e,this.metadata=t,this.language=s,this.toast=n,this.taggingEnabled=this.checkTaggingEnabled()}get objecttags(){let e=this.model.getField("tags");if(!e||""===e)return[];try{return JSON.parse(e)}catch(e){return[]}}checkTaggingEnabled(){return this.metadata.checkTagging(this.model.module)}editTags(){this.isEditing=!0,this.model.startEdit()}cancelEdit(){this.isEditing=!1,this.model.cancelEdit()}saveTags(){this.model.save(),this.isEditing=!1}removeByIndex(e){let t=this.objecttags;t.splice(e,1),this.model.setField("tags",JSON.stringify(t))}addTag(e){let t=this.objecttags.map((e=>e.toLowerCase()));t.includes(e.toLowerCase())?this.toast.sendToast(this.language.getLabel("LBL_TAG_EXISTS","","short"),"warning"):(this.objecttags.indexOf(e),t.push(e),this.model.setField("tags",JSON.stringify(t)))}}return e=ObjectPageHeaderTags,(0,i.Z)(ObjectPageHeaderTags,"ɵfac",(function(t){return new(t||e)(n.Y36(o.o),n.Y36(l.Pu),n.Y36(a.d),n.Y36(d.A))})),(0,i.Z)(ObjectPageHeaderTags,"ɵcmp",n.Xpm({type:e,selectors:[["object-page-header-tags"]],decls:1,vars:1,consts:[["class","slds-show--medium slds-p-top--xx-small",4,"ngIf"],[1,"slds-show--medium","slds-p-top--xx-small"],[4,"ngIf","ngIfElse"],["displayContent",""],[1,"slds-grid","slds-grid--vertical-align-center"],["class","slds-p-right--xx-small slds-grid slds-gutters_direct-xxx-small",4,"ngIf"],["class","slds-p-right--xx-small",4,"ngIf"],[4,"ngIf"],["class","slds-grid slds-grow",4,"ngIf"],[1,"slds-p-right--xx-small","slds-grid","slds-gutters_direct-xxx-small"],["class","slds-col",4,"ngFor","ngForOf"],[1,"slds-col"],[1,"slds-badge","slds-badge_lightest"],["class","slds-badge__icon slds-badge__icon_right",3,"click",4,"ngIf"],[1,"slds-badge__icon","slds-badge__icon_right",3,"click"],["icon","close","size","xx-small"],[1,"slds-p-right--xx-small"],[2,"font-style","italic"],["label","LBL_NO_TAGS_ASSIGNED"],[1,"slds-button","slds-button_icon",3,"click"],[3,"icon"],[1,"slds-grid","slds-grow"],[1,"slds-form-element","slds-grow"],[3,"tagemitter"],[1,"slds-p-left--xx-small","slds-button","slds-button_icon",3,"click"]],template:function(e,t){1&e&&n.YNc(0,w,4,2,"div",0),2&e&&n.Q6J("ngIf",t.taggingEnabled)},dependencies:[r.sg,r.O5,c.J,u.C,h._,m.B,g.r],encapsulation:2})),ObjectPageHeaderTags})()},6438:(e,t,s)=>{"use strict";s.d(t,{F:()=>p});var i=s(1180),n=s(2294),o=s(727),l=s(2242),a=s(4154),d=s(5710),r=s(5329),c=s(4755),u=s(6951),h=s(4021),m=s(6194);function g(e,t){if(1&e&&(l.TgZ(0,"h3",3),l._uU(1),l.qZA()),2&e){const e=l.oxw();l.xp6(1),l.Oqu(e.header)}}let p=(()=>{var e;class ObjectRecordDetails{constructor(e,t,s,n,l,a){(0,i.Z)(this,"view",void 0),(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"componentFactoryResolver",void 0),(0,i.Z)(this,"model",void 0),(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"renderer",void 0),(0,i.Z)(this,"componentSet",void 0),(0,i.Z)(this,"readonly",void 0),(0,i.Z)(this,"componentconfig",{}),(0,i.Z)(this,"subscriptions",new o.w0),this.view=e,this.metadata=t,this.componentFactoryResolver=s,this.model=n,this.language=l,this.renderer=a}ngOnInit(){this.buildContainer(),!0===this.readonly||this.componentconfig.readonly?this.view.isEditable=!1:(this.view.isEditable=!0,this.view.linkedToModel=!0,this.subscriptions.add(this.view.mode$.subscribe((e=>{"edit"!=e||this.model.isEditing||this.model.startEdit()}))))}ngOnDestroy(){this.subscriptions.unsubscribe()}buildContainer(){this.componentSet||(this.componentconfig.componentset||(this.componentconfig=this.metadata.getComponentConfig("ObjectRecordDetails",this.model.module)),this.componentSet=this.componentconfig.componentset)}getBoxStyle(){return this.view.isEditMode()?{"box-shadow":"0 2px 4px 4px rgba(0,0,0,.16)"}:{}}get showHeader(){return!!this.componentconfig.header}get header(){return this.language.getLabel(this.componentconfig.header,this.model.module)}}return e=ObjectRecordDetails,(0,i.Z)(ObjectRecordDetails,"ɵfac",(function(t){return new(t||e)(l.Y36(n.e),l.Y36(a.Pu),l.Y36(l._Vd),l.Y36(d.o),l.Y36(r.d),l.Y36(l.Qsj))})),(0,i.Z)(ObjectRecordDetails,"ɵcmp",l.Xpm({type:e,selectors:[["object-record-details"]],inputs:{componentSet:"componentSet",readonly:"readonly"},features:[l._Bn([n.e])],decls:4,vars:4,consts:[["class","slds-text-heading_small slds-theme_shade slds-p-around--x-small",4,"ngIf"],[1,"slds-is-relative",3,"ngStyle","system-overlay-loading-spinner"],[3,"componentset"],[1,"slds-text-heading_small","slds-theme_shade","slds-p-around--x-small"]],template:function(e,t){1&e&&(l.YNc(0,g,2,1,"h3",0),l.TgZ(1,"div",1),l._UZ(2,"system-componentset",2)(3,"object-record-details-footer"),l.qZA()),2&e&&(l.Q6J("ngIf",t.showHeader),l.xp6(1),l.Q6J("ngStyle",t.getBoxStyle())("system-overlay-loading-spinner",t.model.isSaving),l.xp6(1),l.Q6J("componentset",t.componentSet))},dependencies:[c.O5,c.PC,u.E,h._,m.b],encapsulation:2})),ObjectRecordDetails})()},6194:(e,t,s)=>{"use strict";s.d(t,{b:()=>m});var i=s(1180),n=s(2242),o=s(2294),l=s(5710),a=s(5329),d=s(4154),r=s(4755),c=s(8861),u=s(4347);function h(e,t){if(1&e&&(n.TgZ(0,"div",1),n._UZ(1,"object-action-container",2)(2,"object-record-messages-badge"),n.qZA()),2&e){const e=n.oxw();n.xp6(1),n.Q6J("actionset",e.actionset)}}let m=(()=>{var e;class ObjectRecordDetailsFooter{constructor(e,t,s,n){(0,i.Z)(this,"view",void 0),(0,i.Z)(this,"model",void 0),(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"actionset",void 0),this.view=e,this.model=t,this.language=s,this.metadata=n}ngOnInit(){let e=this.metadata.getComponentConfig("ObjectRecordDetailsFooter",this.model.module);this.actionset=e.actionset}cancel(){this.model.cancelEdit(),this.view.setViewMode()}save(){this.model.validate()&&(this.model.save(!0),this.view.setViewMode())}}return e=ObjectRecordDetailsFooter,(0,i.Z)(ObjectRecordDetailsFooter,"ɵfac",(function(t){return new(t||e)(n.Y36(o.e),n.Y36(l.o),n.Y36(a.d),n.Y36(d.Pu))})),(0,i.Z)(ObjectRecordDetailsFooter,"ɵcmp",n.Xpm({type:e,selectors:[["object-record-details-footer"]],decls:1,vars:1,consts:[["class","slds-text-align--center slds-p-bottom--small slds-grid slds-grid--align-center slds-grid--vertical-align-center",4,"ngIf"],[1,"slds-text-align--center","slds-p-bottom--small","slds-grid","slds-grid--align-center","slds-grid--vertical-align-center"],[3,"actionset"]],template:function(e,t){1&e&&n.YNc(0,h,3,1,"div",0),2&e&&n.Q6J("ngIf",t.view.isEditMode())},dependencies:[r.O5,c.S,u.Z],encapsulation:2})),ObjectRecordDetailsFooter})()},9062:(e,t,s)=>{"use strict";s.d(t,{d:()=>v});var i=s(1180),n=s(2242),o=s(4154),l=s(5710),a=s(2294),d=s(4755),r=s(7165);function c(e,t){if(1&e&&n._UZ(0,"object-record-fieldset-field",5),2&e){const e=n.oxw().$implicit,t=n.oxw(2);n.Q6J("fieldsetitem",e)("fielddisplayclass",t.fielddisplayclass)("fieldpadding",t.fieldpadding)}}function u(e,t){if(1&e&&n._UZ(0,"object-record-fieldset",6),2&e){const e=n.oxw().$implicit,t=n.oxw(2);n.Q6J("fieldset",e.fieldset)("fielddisplayclass",t.fielddisplayclass)("fieldpadding",t.fieldpadding)("direction",e.fieldconfig.direction)}}function h(e,t){if(1&e&&(n.TgZ(0,"div"),n.YNc(1,c,1,3,"object-record-fieldset-field",3),n.YNc(2,u,1,4,"object-record-fieldset",4),n.qZA()),2&e){const e=t.$implicit,s=n.oxw(2);n.xp6(1),n.Q6J("ngIf",s.isField(e)),n.xp6(1),n.Q6J("ngIf",!s.isField(e))}}function m(e,t){if(1&e&&(n.TgZ(0,"div"),n.YNc(1,h,3,2,"div",2),n.qZA()),2&e){const e=n.oxw();n.xp6(1),n.Q6J("ngForOf",e.fieldsetitems)}}function g(e,t){if(1&e&&n._UZ(0,"object-record-fieldset-field",5),2&e){const e=n.oxw().$implicit,t=n.oxw(2);n.Q6J("fieldsetitem",e)("fielddisplayclass",t.fielddisplayclass)("fieldpadding",t.fieldpadding)}}function p(e,t){if(1&e&&n._UZ(0,"object-record-fieldset",6),2&e){const e=n.oxw().$implicit,t=n.oxw(2);n.Q6J("fieldset",e.fieldset)("fielddisplayclass",t.fielddisplayclass)("fieldpadding",t.fieldpadding)("direction",e.fieldconfig.direction)}}function f(e,t){if(1&e&&(n.TgZ(0,"div",9),n.YNc(1,g,1,3,"object-record-fieldset-field",3),n.YNc(2,p,1,4,"object-record-fieldset",4),n.qZA()),2&e){const e=t.$implicit,s=t.index,i=n.oxw(2);n.Q6J("ngClass",i.sizeClass(s)),n.xp6(1),n.Q6J("ngIf",i.isField(e)),n.xp6(1),n.Q6J("ngIf",!i.isField(e))}}function b(e,t){if(1&e&&(n.TgZ(0,"div",7),n.YNc(1,f,3,3,"div",8),n.qZA()),2&e){const e=n.oxw();n.xp6(1),n.Q6J("ngForOf",e.fieldsetitems)}}let v=(()=>{var e;class ObjectRecordFieldset{constructor(e,t,s){(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"model",void 0),(0,i.Z)(this,"view",void 0),(0,i.Z)(this,"fieldset",""),(0,i.Z)(this,"direction","horizontal"),(0,i.Z)(this,"fieldpadding","xx-small"),(0,i.Z)(this,"fielddisplayclass","slds-has-divider--bottom slds-p-vertical--x-small spice-fieldminheight"),(0,i.Z)(this,"fieldsetitems",[]),(0,i.Z)(this,"numberOfColumns",0),this.metadata=e,this.model=t,this.view=s}ngOnInit(){this.fieldsetitems=this.metadata.getFieldSetItems(this.fieldset);for(let e of this.fieldsetitems)this.numberOfColumns=this.numberOfColumns+(e.fieldconfig.width?1*e.fieldconfig.width:e.fieldconfig.width=1);!this.renderVertical&&this.numberOfColumns>8&&12!==this.numberOfColumns&&console.warn("wrong fieldset grid ("+this.fieldset+")")}get renderVertical(){return"vertical"==this.direction}isField(e){return!!e.field}sizeClass(e){return this.renderVertical?"":"small"==this.view.size?"slds-size--1-of-1":"slds-size--"+this.fieldsetitems[e].fieldconfig.width+"-of-"+this.numberOfColumns}}return e=ObjectRecordFieldset,(0,i.Z)(ObjectRecordFieldset,"ɵfac",(function(t){return new(t||e)(n.Y36(o.Pu),n.Y36(l.o),n.Y36(a.e))})),(0,i.Z)(ObjectRecordFieldset,"ɵcmp",n.Xpm({type:e,selectors:[["object-record-fieldset"]],inputs:{fieldset:"fieldset",direction:"direction",fieldpadding:"fieldpadding",fielddisplayclass:"fielddisplayclass"},decls:2,vars:2,consts:[[4,"ngIf"],["class","slds-grid slds-wrap",4,"ngIf"],[4,"ngFor","ngForOf"],[3,"fieldsetitem","fielddisplayclass","fieldpadding",4,"ngIf"],[3,"fieldset","fielddisplayclass","fieldpadding","direction",4,"ngIf"],[3,"fieldsetitem","fielddisplayclass","fieldpadding"],[3,"fieldset","fielddisplayclass","fieldpadding","direction"],[1,"slds-grid","slds-wrap"],[3,"ngClass",4,"ngFor","ngForOf"],[3,"ngClass"]],template:function(e,t){1&e&&(n.YNc(0,m,2,1,"div",0),n.YNc(1,b,2,1,"div",1)),2&e&&(n.Q6J("ngIf",t.renderVertical),n.xp6(1),n.Q6J("ngIf",!t.renderVertical))},dependencies:[d.mk,d.sg,d.O5,e,r.f],encapsulation:2})),ObjectRecordFieldset})()},7165:(e,t,s)=>{"use strict";s.d(t,{f:()=>a});var i=s(1180),n=s(2242),o=s(4755),l=s(3634);let a=(()=>{var e;class ObjectRecordFieldsetField{constructor(){(0,i.Z)(this,"fieldsetitem",void 0),(0,i.Z)(this,"fieldpadding","x-small"),(0,i.Z)(this,"fielddisplayclass","slds-has-divider--bottom slds-p-vertical--x-small spice-fieldminheight")}showLabel(e){return!0!==e.hidelabel}get padding(){return this.fieldpadding?"slds-p-around--"+this.fieldpadding:""}}return e=ObjectRecordFieldsetField,(0,i.Z)(ObjectRecordFieldsetField,"ɵfac",(function(t){return new(t||e)})),(0,i.Z)(ObjectRecordFieldsetField,"ɵcmp",n.Xpm({type:e,selectors:[["object-record-fieldset-field"]],inputs:{fieldsetitem:"fieldsetitem",fieldpadding:"fieldpadding",fielddisplayclass:"fielddisplayclass"},decls:2,vars:4,consts:[[3,"ngClass"],[3,"field","fieldconfig","fielddisplayclass"]],template:function(e,t){1&e&&(n.TgZ(0,"div",0),n._UZ(1,"field-container",1),n.qZA()),2&e&&(n.Q6J("ngClass",t.padding),n.xp6(1),n.Q6J("field",t.fieldsetitem.field)("fieldconfig",t.fieldsetitem.fieldconfig)("fielddisplayclass",t.fielddisplayclass))},dependencies:[o.mk,l.j],encapsulation:2})),ObjectRecordFieldsetField})()},5931:(e,t,s)=>{"use strict";s.d(t,{Z:()=>u});var i=s(1180),n=s(2242),o=s(4154),l=s(5710),a=s(4755),d=s(3634);function r(e,t){if(1&e&&(n.TgZ(0,"li",3),n._UZ(1,"field-container",4),n.qZA()),2&e){const e=n.oxw().$implicit;n.xp6(1),n.Q6J("field",e.field)("fieldconfig",e.fieldconfig)}}function c(e,t){if(1&e&&(n.ynx(0),n.YNc(1,r,2,2,"li",2),n.BQk()),2&e){const e=t.$implicit,s=n.oxw();n.xp6(1),n.Q6J("ngIf",s.model.getField(e.field))}}let u=(()=>{var e;class ObjectRecordFieldsetHorizontalList{constructor(e,t){(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"model",void 0),(0,i.Z)(this,"fieldset",""),(0,i.Z)(this,"fieldsetitems",[]),this.metadata=e,this.model=t}ngOnInit(){this.fieldsetitems=this.metadata.getFieldSetItems(this.fieldset)}}return e=ObjectRecordFieldsetHorizontalList,(0,i.Z)(ObjectRecordFieldsetHorizontalList,"ɵfac",(function(t){return new(t||e)(n.Y36(o.Pu),n.Y36(l.o))})),(0,i.Z)(ObjectRecordFieldsetHorizontalList,"ɵcmp",n.Xpm({type:e,selectors:[["object-record-fieldset-horizontal-list"]],inputs:{fieldset:"fieldset"},decls:2,vars:1,consts:[[1,"slds-list_horizontal","slds-has-dividers_left"],[4,"ngFor","ngForOf"],["class","slds-item",4,"ngIf"],[1,"slds-item"],["fielddisplayclass","slds-align_absolute-center",3,"field","fieldconfig"]],template:function(e,t){1&e&&(n.TgZ(0,"ul",0),n.YNc(1,c,2,1,"ng-container",1),n.qZA()),2&e&&(n.xp6(1),n.Q6J("ngForOf",t.fieldsetitems))},dependencies:[a.sg,a.O5,d.j],encapsulation:2})),ObjectRecordFieldsetHorizontalList})()},4347:(e,t,s)=>{"use strict";s.d(t,{Z:()=>p});var i=s(1180),n=s(2242),o=s(5710),l=s(5329),a=s(4755),d=s(2656),r=s(3463),c=s(7674),u=s(8859);function h(e,t){if(1&e&&(n.TgZ(0,"tr",17)(1,"td",18)(2,"div",19),n._UZ(3,"system-utility-icon",20),n.qZA()(),n.TgZ(4,"td",21)(5,"div",19),n._UZ(6,"system-label-fieldname",22),n.qZA()(),n.TgZ(7,"td",23)(8,"div",19),n._uU(9),n.qZA()()()),2&e){const e=t.$implicit,s=n.oxw(3);n.xp6(3),n.Q6J("icon",e.type),n.xp6(3),n.Q6J("module",s.model.module)("field",e.reference),n.xp6(3),n.Oqu(e.message)}}function m(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"section",5)(1,"button",6),n.NdJ("click",(function(){n.CHM(e);const t=n.oxw(2);return n.KtG(t.showpopover=!1)})),n._UZ(2,"system-button-icon",7),n.qZA(),n.TgZ(3,"header",8)(4,"div",9),n._UZ(5,"system-utility-icon",10),n.TgZ(6,"div",11)(7,"h2",12),n._UZ(8,"system-label",13),n.qZA()()()(),n.TgZ(9,"div",14)(10,"table",15)(11,"tbody"),n.YNc(12,h,10,4,"tr",16),n.qZA()()()()}if(2&e){const e=n.oxw(2);n.Q6J("ngClass",e.nubbinClass)("ngStyle",e.popoverStyle),n.xp6(2),n.Q6J("inverse",!0),n.xp6(10),n.Q6J("ngForOf",e.messages)}}function g(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"div",1)(1,"span",2),n.NdJ("click",(function(){n.CHM(e);const t=n.oxw();return n.KtG(t.showpopover=!t.showpopover)})),n._uU(2),n._UZ(3,"system-label",3),n.qZA(),n.YNc(4,m,13,4,"section",4),n.qZA()}if(2&e){const e=n.oxw();n.xp6(2),n.hij("",e.messagecount," "),n.xp6(2),n.Q6J("ngIf",e.showpopover)}}let p=(()=>{var e;class ObjectRecordMessagesBadge{constructor(e,t){(0,i.Z)(this,"model",void 0),(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"side","left"),(0,i.Z)(this,"showpopover",!1),this.model=e,this.language=t}get messagecount(){return this.model.getMessages().length}get messages(){return this.model.getMessages()}get nubbinClass(){return"right"==this.side?"slds-nubbin_bottom-right":"slds-nubbin_bottom-left"}get popoverStyle(){return"right"==this.side?{bottom:"37px",right:"-10px"}:{bottom:"37px",left:"-10px"}}}return e=ObjectRecordMessagesBadge,(0,i.Z)(ObjectRecordMessagesBadge,"ɵfac",(function(t){return new(t||e)(n.Y36(o.o),n.Y36(l.d))})),(0,i.Z)(ObjectRecordMessagesBadge,"ɵcmp",n.Xpm({type:e,selectors:[["object-record-messages-badge"]],inputs:{side:"side"},decls:1,vars:1,consts:[["class","slds-is-relative",4,"ngIf"],[1,"slds-is-relative"],[1,"slds-badge","slds-theme--error","slds-m-horizontal--xx-small",3,"click"],["label","LBL_ERRORS"],["aria-label","Model Errors","class","slds-popover slds-popover_error slds-nubbin_bottom-left slds-is-absolute","role","dialog",3,"ngClass","ngStyle",4,"ngIf"],["aria-label","Model Errors","role","dialog",1,"slds-popover","slds-popover_error","slds-nubbin_bottom-left","slds-is-absolute",3,"ngClass","ngStyle"],["title","Close dialog",1,"slds-button","slds-button_icon","slds-button_icon-small","slds-float_right","slds-popover__close",3,"click"],["icon","close",3,"inverse"],[1,"slds-popover__header"],[1,"slds-media","slds-media_center","slds-has-flexi-truncate"],["icon","error","size","x-small","colorclass","slds-icon-utility-error"],[1,"slds-media__body","slds-text-align--left","slds-p-left--x-small"],["title","Resolve error",1,"slds-truncate","slds-text-heading_small"],["label","LBL_VALIDATION_ERRORS"],[1,"slds-popover__body","slds-p-horizontal--none"],[1,"slds-table","slds-table_cell-buffer","slds-table_bordered"],["class","slds-hint-parent",4,"ngFor","ngForOf"],[1,"slds-hint-parent"],["data-label","type"],[1,"slds-truncate"],["size","x-small",3,"icon"],["data-label","Field"],[3,"module","field"],["data-label","Message"]],template:function(e,t){1&e&&n.YNc(0,g,5,2,"div",0),2&e&&n.Q6J("ngIf",t.messagecount)},dependencies:[a.mk,a.sg,a.O5,a.PC,d.J,r._,c.h,u.r],encapsulation:2})),ObjectRecordMessagesBadge})()},8652:(e,t,s)=>{"use strict";s.d(t,{E:()=>b});var i=s(1180),n=s(1591),o=s(1360),l=s(767),a=s(2242),d=s(5329),r=s(4154),c=s(6040),u=s(5710),h=s(4755),m=s(4021);function g(e,t){if(1&e&&(a.TgZ(0,"div")(1,"div",4),a.Hsn(2),a.qZA(),a._UZ(3,"object-related-card-footer",2),a.qZA()),2&e){const e=a.oxw(2);a.Q6J("@displaycard",void 0),a.xp6(1),a.Q6J("system-overlay-loading-spinner",e.paginating),a.xp6(2),a.Q6J("componentconfig",e.componentconfig)}}function p(e,t){if(1&e&&(a.TgZ(0,"div",1),a._UZ(1,"object-related-card-header",2),a.YNc(2,g,4,3,"div",3),a.qZA()),2&e){const e=a.oxw();a.xp6(1),a.Q6J("componentconfig",e.componentconfig),a.xp6(1),a.Q6J("ngIf",e.isopen)}}const f=["*"];let b=(()=>{var e;class ObjectRelatedCard{constructor(e,t,s,n){(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"relatedmodels",void 0),(0,i.Z)(this,"model",void 0),(0,i.Z)(this,"cardheader",void 0),(0,i.Z)(this,"cardfooter",void 0),(0,i.Z)(this,"componentconfig",void 0),this.language=e,this.metadata=t,this.relatedmodels=s,this.model=n}get module(){return this.componentconfig.object}get hidden(){return!this.checkModelState()||!this.aclAccess()}get isloading(){return this.relatedmodels.isloading}get isopen(){return!(this.cardheader&&!this.cardheader.isopen)&&(this.relatedmodels.count>0||this.isloading)}get paginating(){return!(this.relatedmodels.isloading||!this.cardfooter||!this.cardfooter.paginating)}checkModelState(){return!(this.componentconfig.requiredmodelstate&&!this.model.checkModelState(this.componentconfig.requiredmodelstate))}aclAccess(){if(this.module){let e=""!=this.relatedmodels.linkName?this.relatedmodels.linkName:this.relatedmodels.relatedModule?.toLowerCase();return(this.metadata.checkModuleAcl(this.module,"list")||this.metadata.checkModuleAcl(this.module,"listrelated"))&&this.model.checkAccess("detail")&&this.model.checkFieldAccess(e)}return!1}}return e=ObjectRelatedCard,(0,i.Z)(ObjectRelatedCard,"ɵfac",(function(t){return new(t||e)(a.Y36(d.d),a.Y36(r.Pu),a.Y36(c.j),a.Y36(u.o))})),(0,i.Z)(ObjectRelatedCard,"ɵcmp",a.Xpm({type:e,selectors:[["object-related-card"]],viewQuery:function(e,t){if(1&e&&(a.Gf(o.g,5),a.Gf(l.C,5)),2&e){let e;a.iGM(e=a.CRH())&&(t.cardheader=e.first),a.iGM(e=a.CRH())&&(t.cardfooter=e.first)}},inputs:{componentconfig:"componentconfig"},ngContentSelectors:f,decls:1,vars:1,consts:[["class","slds-card slds-card_boundary slds-m-bottom--medium",4,"ngIf"],[1,"slds-card","slds-card_boundary","slds-m-bottom--medium"],[3,"componentconfig"],[4,"ngIf"],[1,"slds-card__body","slds-size--1-of-1",3,"system-overlay-loading-spinner"]],template:function(e,t){1&e&&(a.F$t(),a.YNc(0,p,3,2,"div",0)),2&e&&a.Q6J("ngIf",!t.hidden)},dependencies:[h.O5,m._,o.g,l.C],encapsulation:2,data:{animation:[(0,n.X$)("displaycard",[(0,n.eR)(":enter",[(0,n.oB)({opacity:0,height:"0px",overflow:"hidden"}),(0,n.jt)(".5s",(0,n.oB)({height:"*",opacity:1})),(0,n.oB)({overflow:"unset"})]),(0,n.eR)(":leave",[(0,n.oB)({overflow:"hidden"}),(0,n.jt)(".5s",(0,n.oB)({height:"0px",opacity:0}))])])]}})),ObjectRelatedCard})()},767:(e,t,s)=>{"use strict";s.d(t,{C:()=>p});var i=s(1180),n=s(2242),o=s(5329),l=s(6040),a=s(5710),d=s(3348),r=s(7017),c=s(4755),u=s(2656),h=s(3463);function m(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"div",10)(1,"button",8),n.NdJ("click",(function(){n.CHM(e);const t=n.oxw();return n.KtG(t.firstPage())})),n._UZ(2,"system-button-icon",11),n.qZA(),n.TgZ(3,"button",8),n.NdJ("click",(function(){n.CHM(e);const t=n.oxw();return n.KtG(t.previousPage())})),n._UZ(4,"system-button-icon",12),n.qZA(),n.TgZ(5,"div",13),n._UZ(6,"system-label",14),n.TgZ(7,"div",15),n._uU(8),n.qZA(),n._UZ(9,"system-label",16),n.TgZ(10,"div",15),n._uU(11),n.qZA()(),n.TgZ(12,"button",8),n.NdJ("click",(function(){n.CHM(e);const t=n.oxw();return n.KtG(t.nextPage())})),n._UZ(13,"system-button-icon",17),n.qZA(),n.TgZ(14,"button",8),n.NdJ("click",(function(){n.CHM(e);const t=n.oxw();return n.KtG(t.lastPage())})),n._UZ(15,"system-button-icon",18),n.qZA()()}if(2&e){const e=n.oxw();n.xp6(1),n.Q6J("disabled",e.previousDisabled||e.paginating),n.xp6(2),n.Q6J("disabled",e.previousDisabled||e.paginating),n.xp6(5),n.Oqu(e.page),n.xp6(3),n.Oqu(e.pages),n.xp6(1),n.Q6J("disabled",e.nextDisabled||e.paginating),n.xp6(2),n.Q6J("disabled",e.nextDisabled||e.paginating)}}function g(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"a",19),n.NdJ("click",(function(){n.CHM(e);const t=n.oxw();return n.KtG(t.showAll())})),n._UZ(1,"system-label",20),n.qZA()}}let p=(()=>{var e;class ObjectRelatedCardFooter{constructor(e,t,s,n,o){(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"relatedmodels",void 0),(0,i.Z)(this,"model",void 0),(0,i.Z)(this,"router",void 0),(0,i.Z)(this,"navigationtab",void 0),(0,i.Z)(this,"componentconfig",void 0),(0,i.Z)(this,"module",""),(0,i.Z)(this,"fieldset",void 0),(0,i.Z)(this,"_displayitems",5),(0,i.Z)(this,"componentid",void 0),(0,i.Z)(this,"paginating",!1),this.language=e,this.relatedmodels=t,this.model=s,this.router=n,this.navigationtab=o,this.componentid=this.model.utils.generateGuid()}ngOnInit(){this.fieldset=this.componentconfig.fieldset,this.module=this.componentconfig.object}get displayitems(){return this._displayitems}set displayitems(e){e!==this.displayitems&&(this.displayitems=e,this.relatedmodels.loaditems=e,this.relatedmodels.getData())}get canViewAll(){return this.relatedmodels.count>0&&this.relatedmodels.count>this.relatedmodels.items.length}canSetCount(){return this.relatedmodels.count>this.relatedmodels.items.length}showAll(){let e="";this.navigationtab?.tabid&&(e="/tab/"+this.navigationtab.tabid),this.fieldset&&""!=this.fieldset?this.router.navigate([e+"/module/"+this.model.module+"/"+this.model.id+"/"+this.relatedmodels.relatedModule+"/"+this.relatedmodels._linkName+"/"+this.fieldset]):this.router.navigate([e+"/module/"+this.model.module+"/"+this.model.id+"/"+this.relatedmodels.relatedModule+"/"+this.relatedmodels._linkName])}reload(){this.relatedmodels.offset=0,this.paginating=!0,this.relatedmodels.getData().subscribe((()=>this.paginating=!1))}get nextDisabled(){return this.relatedmodels.offset+this.relatedmodels.loaditems>=this.relatedmodels.count}nextPage(){this.nextDisabled||(this.relatedmodels.offset=this.relatedmodels.offset+this.relatedmodels.loaditems,this.paginating=!0,this.relatedmodels.getData(!0).subscribe((()=>this.paginating=!1)))}lastPage(){if(!this.nextDisabled){let e=Math.floor(this.relatedmodels.count/this.relatedmodels.loaditems)*this.relatedmodels.loaditems;this.relatedmodels.offset=e,this.paginating=!0,this.relatedmodels.getData(!0).subscribe((()=>this.paginating=!1))}}get previousDisabled(){return 0==this.relatedmodels.offset}previousPage(){this.previousDisabled||(this.relatedmodels.offset=this.relatedmodels.offset-this.relatedmodels.loaditems,this.relatedmodels.offset<0&&(this.relatedmodels.offset=0),this.paginating=!0,this.relatedmodels.getData(!0).subscribe((()=>this.paginating=!1)))}firstPage(){this.previousDisabled||(this.relatedmodels.offset=0,this.paginating=!0,this.relatedmodels.getData(!0).subscribe((()=>this.paginating=!1)))}get page(){return this.relatedmodels.offset/this.relatedmodels.loaditems+1}get pages(){return Math.floor(this.relatedmodels.count/this.relatedmodels.loaditems)+1}}return e=ObjectRelatedCardFooter,(0,i.Z)(ObjectRelatedCardFooter,"ɵfac",(function(t){return new(t||e)(n.Y36(o.d),n.Y36(l.j),n.Y36(a.o),n.Y36(d.F0),n.Y36(r.d))})),(0,i.Z)(ObjectRelatedCardFooter,"ɵcmp",n.Xpm({type:e,selectors:[["object-related-card-footer"]],inputs:{componentconfig:"componentconfig"},decls:10,vars:3,consts:[[1,"slds-card__footer"],[1,"slds-grid","slds-grid_vertical-align-center"],[1,"slds-size--1-of-3","slds-text-align--left",2,"min-width","140px"],["class","slds-grid slds-grid--vertical-align-center",4,"ngIf"],[1,"slds-grid","slds-grow"],[1,"slds-grow","slds-text-align_center",2,"min-width","75px"],["href","javascript:void(0);",3,"click",4,"ngIf"],[1,"slds-text-align--right","slds-grow"],[1,"slds-button","slds-button_icon",3,"disabled","click"],["icon","refresh"],[1,"slds-grid","slds-grid--vertical-align-center"],["icon","jump_to_left"],["icon","chevronleft"],[1,"slds-p-horizontal--xx-small","slds-grid","slds-grid--vertical-align-center","slds-gutters_direct-xxx-small"],["label","LBL_PAGE",1,"slds-col"],[1,"slds-col"],["label","LBL_OF",1,"slds-col"],["icon","chevronright"],["icon","jump_to_right"],["href","javascript:void(0);",3,"click"],["label","LBL_VIEWALL"]],template:function(e,t){1&e&&(n.TgZ(0,"footer",0)(1,"div",1)(2,"div",2),n.YNc(3,m,16,6,"div",3),n.qZA(),n.TgZ(4,"div",4)(5,"div",5),n.YNc(6,g,2,0,"a",6),n.qZA(),n.TgZ(7,"div",7)(8,"button",8),n.NdJ("click",(function(){return t.reload()})),n._UZ(9,"system-button-icon",9),n.qZA()()()()()),2&e&&(n.xp6(3),n.Q6J("ngIf",t.relatedmodels.count>t.relatedmodels.loaditems&&t.canViewAll),n.xp6(3),n.Q6J("ngIf",t.canViewAll),n.xp6(2),n.Q6J("disabled",t.paginating))},dependencies:[c.O5,u.J,h._],encapsulation:2})),ObjectRelatedCardFooter})()},1360:(e,t,s)=>{"use strict";s.d(t,{g:()=>_});var i=s(1180),n=s(1591),o=s(2242),l=s(5329),a=s(6040),d=s(5710),r=s(4154),c=s(4755),u=s(2656),h=s(4561),m=s(8859),g=s(8861);function p(e,t){if(1&e&&(o.TgZ(0,"span",12),o._uU(1),o.qZA()),2&e){const e=o.oxw();o.xp6(1),o.hij("(",e.relatedmodels.count,")")}}function f(e,t){if(1&e){const e=o.EpF();o.TgZ(0,"system-utility-icon",13),o.NdJ("click",(function(t){o.CHM(e);const s=o.oxw();return o.KtG(s.toggleOpen(t))})),o.qZA()}if(2&e){const e=o.oxw();o.Q6J("@animateicon",e.isopen?"open":"closed")}}function b(e,t){if(1&e&&o._UZ(0,"object-action-container",14),2&e){const e=o.oxw();o.Q6J("actionset",e.actionset)}}function v(e,t){if(1&e){const e=o.EpF();o.TgZ(0,"div",8)(1,"button",15),o.NdJ("click",(function(){o.CHM(e);const t=o.oxw();return o.KtG(t.reload())})),o._UZ(2,"system-button-icon",16),o.qZA()()}}const Z=["*"];let _=(()=>{var e;class ObjectRelatedCardHeader{constructor(e,t,s,n){(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"relatedmodels",void 0),(0,i.Z)(this,"model",void 0),(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"componentconfig",{}),(0,i.Z)(this,"isopen",!0),this.language=e,this.relatedmodels=t,this.model=s,this.metadata=n}ngOnInit(){this.componentconfig.collapsed&&setTimeout((()=>this.isopen=!this.componentconfig.collapsed))}get panelTitle(){return this.componentconfig.title?this.language.getLabel(this.componentconfig.title):this.relatedmodels._linkName&&this.metadata.fieldDefs[this.relatedmodels.module][this.relatedmodels._linkName]&&this.metadata.fieldDefs[this.relatedmodels.module][this.relatedmodels._linkName].vname?this.language.getLabel(this.metadata.fieldDefs[this.relatedmodels.module][this.relatedmodels._linkName].vname):this.language.getModuleName(this.module)}get actionset(){return this.componentconfig.actionset}get module(){return this.componentconfig.object}toggleOpen(e){e.stopPropagation(),this.isopen=!this.isopen}reload(){this.relatedmodels.getData()}get isEditable(){let e=""!=this.relatedmodels.linkName?this.relatedmodels.linkName:this.relatedmodels.relatedModule?.toLowerCase(),t=this.model.getFieldAccess(e);return!t||t>2}}return e=ObjectRelatedCardHeader,(0,i.Z)(ObjectRelatedCardHeader,"ɵfac",(function(t){return new(t||e)(o.Y36(l.d),o.Y36(a.j),o.Y36(d.o),o.Y36(r.Pu))})),(0,i.Z)(ObjectRelatedCardHeader,"ɵcmp",o.Xpm({type:e,selectors:[["object-related-card-header"]],inputs:{componentconfig:"componentconfig"},ngContentSelectors:Z,decls:15,vars:7,consts:[[1,"slds-card__header","slds-grid","slds-grid--vertical-align-center"],[1,"slds-media","slds-media--center","slds-has-flexi-truncate"],[3,"module","size"],[1,"slds-media__body","slds-truncate","slds-grid","slds-grid--vertical-align-center"],["href","javascript:void(0);",1,"slds-text-link--reset"],[1,"slds-text-heading--small"],["class","slds-p-left--xx-small",4,"ngIf"],["class","slds-m-horizontal--xx-small","icon","up","size","x-small",3,"click",4,"ngIf"],[1,"slds-m-left--x-small"],["ngContent",""],["class","slds-m-left--x-small",3,"actionset",4,"ngIf"],["class","slds-m-left--x-small",4,"ngIf"],[1,"slds-p-left--xx-small"],["icon","up","size","x-small",1,"slds-m-horizontal--xx-small",3,"click"],[1,"slds-m-left--x-small",3,"actionset"],[1,"slds-button","slds-button_icon","x-slds-m-right--medium",3,"click"],["icon","refresh"]],template:function(e,t){1&e&&(o.F$t(),o.TgZ(0,"div",0)(1,"header",1),o._UZ(2,"system-icon",2),o.TgZ(3,"div",3)(4,"h2")(5,"a",4)(6,"span",5),o._uU(7),o.YNc(8,p,2,1,"span",6),o.qZA()()(),o.YNc(9,f,1,1,"system-utility-icon",7),o.qZA()(),o.TgZ(10,"div",8,9),o.Hsn(12),o.qZA(),o.YNc(13,b,1,1,"object-action-container",10),o.YNc(14,v,3,0,"div",11),o.qZA()),2&e&&(o.xp6(2),o.Q6J("module",t.module)("size","small"),o.xp6(5),o.hij(" ",t.panelTitle,""),o.xp6(1),o.Q6J("ngIf",!t.relatedmodels.isloading),o.xp6(1),o.Q6J("ngIf",t.relatedmodels.count>0),o.xp6(4),o.Q6J("ngIf",t.actionset&&t.isEditable),o.xp6(1),o.Q6J("ngIf",!t.relatedmodels.isloading&&0===t.relatedmodels.count))},dependencies:[c.O5,u.J,h.f,m.r,g.S],encapsulation:2,data:{animation:[(0,n.X$)("animateicon",[(0,n.SB)("open",(0,n.oB)({transform:"scale(1, 1)"})),(0,n.SB)("closed",(0,n.oB)({transform:"scale(1, -1)"})),(0,n.eR)("open => closed",[(0,n.jt)(".5s")]),(0,n.eR)("closed => open",[(0,n.jt)(".5s")])])]}})),ObjectRelatedCardHeader})()},3249:(e,t,s)=>{"use strict";s.d(t,{s:()=>p});var i=s(1180),n=s(6040),o=s(727),l=s(2242),a=s(5329),d=s(4154),r=s(5710),c=s(4755),u=s(4567),h=s(7588);function m(e,t){if(1&e&&(l.TgZ(0,"div",2),l._UZ(1,"object-relatedlist-table",3),l.qZA()),2&e){const e=l.oxw();l.xp6(1),l.Q6J("listfields",e.listfields)("editable",e.editable)("editcomponentset",e.editcomponentset)("hideActions",e.hideactions)}}function g(e,t){1&e&&l._UZ(0,"system-illustration-no-access")}let p=(()=>{var e;class ObjectRelatedList{constructor(e,t,s,n,l){(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"relatedmodels",void 0),(0,i.Z)(this,"model",void 0),(0,i.Z)(this,"cdref",void 0),(0,i.Z)(this,"componentconfig",{}),(0,i.Z)(this,"listfields",[]),(0,i.Z)(this,"editcomponentset",""),(0,i.Z)(this,"hideactions",!1),(0,i.Z)(this,"loadsubscription",new o.w0),(0,i.Z)(this,"loaded",!1),this.language=e,this.metadata=t,this.relatedmodels=s,this.model=n,this.cdref=l}get aclAccess(){let e=""!=this.relatedmodels.linkName?this.relatedmodels.linkName:this.relatedmodels.relatedModule?.toLowerCase();return(this.metadata.checkModuleAcl(this.relatedmodels.relatedModule,"listrelated")||this.metadata.checkModuleAcl(this.relatedmodels.relatedModule,"list"))&&this.model.checkAccess("detail")&&this.model.checkFieldAccess(e)}ngOnInit(){this.loadConfig(),this.initializeRelatedModelService(),this.loadsubscription=this.model.data$.subscribe((e=>{this.loadRelated()}))}loadConfig(){let e=this.componentconfig.fieldset;this.listfields=this.metadata.getFieldSetFields(e),this.componentconfig.editcomponentset&&(this.editcomponentset=this.componentconfig.editcomponentset),this.hideactions=!!this.componentconfig.hideactions}initializeRelatedModelService(){this.relatedmodels.module=this.model.module,this.relatedmodels.id=this.model.id,this.relatedmodels.model=this.model,this.relatedmodels.relatedModule=this.componentconfig.object,this.componentconfig.linkEndPoint?this.relatedmodels.linkEndPoint=this.componentconfig.linkEndPoint:this.componentconfig.link&&(this.relatedmodels.linkName=this.componentconfig.link),this.componentconfig.sequencefield?this.relatedmodels.sequencefield=this.componentconfig.sequencefield:this.relatedmodels._linkName&&this.model.fields[this.relatedmodels._linkName]&&this.model.fields[this.relatedmodels._linkName].sequence_field&&(this.relatedmodels.sequencefield=this.model.fields[this.relatedmodels._linkName].sequence_field),this.componentconfig.sortfield&&(this.relatedmodels.sort.sortfield=this.componentconfig.sortfield,this.relatedmodels.sort.sortdirection=this.componentconfig.sortdirection?this.componentconfig.sortdirection:"ASC"),this.componentconfig.items&&(this.relatedmodels.loaditems=this.componentconfig.items),this.componentconfig.modulefilter&&(this.relatedmodels.modulefilter=this.componentconfig.modulefilter),this.relatedmodels.saveToLinkOnly=!!this.componentconfig.saveToLinkOnly}checkModelState(){return!(this.componentconfig.requiredmodelstate&&(_.isEmpty(this.model.data)||!this.model.checkModelState(this.componentconfig.requiredmodelstate)))}loadRelated(){this.loaded||!this.aclAccess||this.componentconfig.requiredmodelstate&&!this.checkModelState()||(this.loaded=!0,this.loadsubscription.unsubscribe(),this.relatedmodels.getData())}get editable(){try{return this.componentconfig.editable&&this.model.checkAccess("edit")}catch(e){return!1}}addSelectedItems(e){this.relatedmodels.addItems(e)}get listitemactionset(){return this.componentconfig&&this.componentconfig.listitemactionset?this.componentconfig.listitemactionset:""}}return e=ObjectRelatedList,(0,i.Z)(ObjectRelatedList,"ɵfac",(function(t){return new(t||e)(l.Y36(a.d),l.Y36(d.Pu),l.Y36(n.j),l.Y36(r.o),l.Y36(l.sBO))})),(0,i.Z)(ObjectRelatedList,"ɵcmp",l.Xpm({type:e,selectors:[["object-related-list"]],inputs:{componentconfig:"componentconfig"},features:[l._Bn([n.j])],decls:3,vars:2,consts:[["class","slds-scrollable",4,"ngIf","ngIfElse"],["noaccess",""],[1,"slds-scrollable"],[3,"listfields","editable","editcomponentset","hideActions"]],template:function(e,t){if(1&e&&(l.YNc(0,m,2,4,"div",0),l.YNc(1,g,1,0,"ng-template",null,1,l.W1O)),2&e){const e=l.MAs(2);l.Q6J("ngIf",t.aclAccess)("ngIfElse",e)}},dependencies:[c.O5,u.s,h.K],encapsulation:2})),ObjectRelatedList})()},423:(e,t,s)=>{"use strict";s.d(t,{X:()=>x});var i=s(1180),n=s(5710),o=s(2294),l=s(2242),a=s(4154),d=s(3917),r=s(6040),c=s(3348),u=s(5329),h=s(6559),m=s(4044),g=s(4755),p=s(3634),f=s(8859),b=s(586);const v=["object-related-list-item",""];function Z(e,t){if(1&e&&(l.TgZ(0,"td",7),l._UZ(1,"field-container",8),l.qZA()),2&e){const e=t.$implicit,s=l.oxw(2);l.uIk("data-label",s.language.getFieldDisplayName(s.model.module,e.field)),l.xp6(1),l.Q6J("field",e.field)("fieldconfig",e.fieldconfig)("fielddisplayclass","slds-truncate")}}function _(e,t){if(1&e&&(l.TgZ(0,"td",9),l._UZ(1,"object-action-menu",10),l.qZA()),2&e){const e=l.oxw(2);l.xp6(1),l.Q6J("buttonsize","x-small")("actionset",e.actionset)}}function y(e,t){if(1&e&&(l.ynx(0),l.YNc(1,Z,2,4,"td",5),l.YNc(2,_,2,2,"td",6),l.BQk()),2&e){const e=l.oxw();l.xp6(1),l.Q6J("ngForOf",e.listfields),l.xp6(1),l.Q6J("ngIf",!e.hideActions)}}let x=(()=>{var e;class ObjectRelatedListItem{constructor(e,t,s,n,o,l,a,d,r){(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"footer",void 0),(0,i.Z)(this,"model",void 0),(0,i.Z)(this,"relatedmodels",void 0),(0,i.Z)(this,"view",void 0),(0,i.Z)(this,"router",void 0),(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"layout",void 0),(0,i.Z)(this,"modalservice",void 0),(0,i.Z)(this,"listfields",[]),(0,i.Z)(this,"listitem",{}),(0,i.Z)(this,"module",""),(0,i.Z)(this,"editable",!1),(0,i.Z)(this,"editcomponentset",""),(0,i.Z)(this,"listitemactionset",void 0),(0,i.Z)(this,"hideActions",!1),(0,i.Z)(this,"customEditActions",[]),(0,i.Z)(this,"customActions",[]),(0,i.Z)(this,"expanded",!1),(0,i.Z)(this,"componentconfig",{}),this.metadata=e,this.footer=t,this.model=s,this.relatedmodels=n,this.view=o,this.router=l,this.language=a,this.layout=d,this.modalservice=r}ngOnInit(){this.view.displayLabels=!1,this.view.isEditable=this.editable,this.model.module=this.module,this.model.id=this.listitem.id,this.model.setData(this.listitem),this.componentconfig=this.metadata.getComponentConfig("ObjectRelatedListItem",this.model.module)}get actionset(){return this.listitemactionset?this.listitemactionset:this.componentconfig.actionset}navigateDetail(){this.router.navigate(["/module/"+this.model.module+"/"+this.model.id])}handleAction(e){switch(e){case"canceledit":this.model.cancelEdit(),this.view.setViewMode();break;case"edit":this.metadata.addComponentDirect("ObjectEditModalWReference",this.footer.footercontainer).subscribe((e=>{e.instance.model.module=this.module,e.instance.model.id=this.model.id,e.instance.model.setData(this.model.data,!1),this.editcomponentset&&""!=this.editcomponentset&&(e.instance.componentSet=this.editcomponentset),this.model.startEdit(),e.instance.modalAction$.subscribe((t=>{!1===t?(e.destroy(),this.model.cancelEdit()):(this.relatedmodels.setItem(this.model.data),this.model.endEdit(),e.destroy())}))}));break;case"remove":this.modalservice.confirm(this.language.getLabel("QST_REMOVE_ENTRY"),this.language.getLabel("QST_REMOVE_ENTRY",null,"short")).subscribe((e=>{e&&this.relatedmodels.deleteItem(this.model.id)}));break;case"saverelated":if(this.model.validate()){let e=this.model.getDirtyFields();e.date_modified=this.model.getField("date_modified"),e.id=this.model.id,this.relatedmodels.setItem(e),this.model.endEdit(),this.view.setViewMode()}}}toggleexpanded(e){e.stopPropagation(),this.expanded=!this.expanded}get isexpanded(){return"small"!=this.layout.screenwidth||this.expanded}get expandicon(){return this.expanded?"chevronup":"chevrondown"}}return e=ObjectRelatedListItem,(0,i.Z)(ObjectRelatedListItem,"ɵfac",(function(t){return new(t||e)(l.Y36(a.Pu),l.Y36(d.M),l.Y36(n.o),l.Y36(r.j),l.Y36(o.e),l.Y36(c.F0),l.Y36(u.d),l.Y36(h.b),l.Y36(m.o))})),(0,i.Z)(ObjectRelatedListItem,"ɵcmp",l.Xpm({type:e,selectors:[["","object-related-list-item",""]],inputs:{listfields:"listfields",listitem:"listitem",module:"module",editable:"editable",editcomponentset:"editcomponentset",listitemactionset:"listitemactionset",hideActions:"hideActions"},features:[l._Bn([n.o,o.e])],attrs:v,decls:6,vars:3,consts:[[1,"slds-hide--medium"],[1,"slds-grid","slds-grid--vertical-align-center","slds-p-around--xx-small"],[1,"slds-text-align--left","slds-truncate","slds-grow",3,"click"],["size","xx-small",3,"icon","click"],[4,"ngIf"],["scope","row",4,"ngFor","ngForOf"],["role","gridcell","class","slds-cell-shrink",4,"ngIf"],["scope","row"],[3,"field","fieldconfig","fielddisplayclass"],["role","gridcell",1,"slds-cell-shrink"],[3,"buttonsize","actionset"]],template:function(e,t){1&e&&(l.TgZ(0,"td",0)(1,"div",1)(2,"div",2),l.NdJ("click",(function(){return t.navigateDetail()})),l._uU(3),l.qZA(),l.TgZ(4,"system-utility-icon",3),l.NdJ("click",(function(e){return t.toggleexpanded(e)})),l.qZA()()(),l.YNc(5,y,3,2,"ng-container",4)),2&e&&(l.xp6(3),l.Oqu(t.model.data.summary_text),l.xp6(1),l.Q6J("icon",t.expandicon),l.xp6(1),l.Q6J("ngIf",t.isexpanded))},dependencies:[g.sg,g.O5,p.j,f.r,b.g],encapsulation:2})),ObjectRelatedListItem})()},3129:(e,t,s)=>{"use strict";s.d(t,{Q:()=>b});var i=s(1180),n=s(5710),o=s(2294),l=s(2242),a=s(3348),d=s(5329),r=s(4154),c=s(4755),u=s(3418),h=s(3634),m=s(8859),g=s(586);const p=["object-related-list-sequenced-item",""];function f(e,t){if(1&e&&(l.TgZ(0,"td",0),l._UZ(1,"field-container",5),l.qZA()),2&e){const e=t.$implicit;l.xp6(1),l.Q6J("field",e.field)("fieldconfig",e.fieldconfig)("fielddisplayclass","slds-truncate")}}let b=(()=>{var e;class ObjectRelatedListSequencedItem{constructor(e,t,s,n,o){(0,i.Z)(this,"model",void 0),(0,i.Z)(this,"view",void 0),(0,i.Z)(this,"router",void 0),(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"listfields",[]),(0,i.Z)(this,"listitem",{}),(0,i.Z)(this,"module",""),(0,i.Z)(this,"listItemActionset",void 0),(0,i.Z)(this,"componentconfig",{}),this.model=e,this.view=t,this.router=s,this.language=n,this.metadata=o,this.view.isEditable=!1}get actionset(){return this.listItemActionset?this.listItemActionset:this.componentconfig.actionset}ngOnInit(){this.view.displayLabels=!1,this.model.module=this.module,this.model.id=this.listitem.id,this.model.setData(this.listitem),this.componentconfig=this.metadata.getComponentConfig("ObjectRelatedListSequencedItem",this.model.module)}navigateDetail(){this.router.navigate(["/module/"+this.model.module+"/"+this.model.id])}}return e=ObjectRelatedListSequencedItem,(0,i.Z)(ObjectRelatedListSequencedItem,"ɵfac",(function(t){return new(t||e)(l.Y36(n.o),l.Y36(o.e),l.Y36(a.F0),l.Y36(d.d),l.Y36(r.Pu))})),(0,i.Z)(ObjectRelatedListSequencedItem,"ɵcmp",l.Xpm({type:e,selectors:[["","object-related-list-sequenced-item",""]],inputs:{listfields:"listfields",listitem:"listitem",module:"module",listItemActionset:"listItemActionset"},features:[l._Bn([n.o,o.e])],attrs:p,decls:5,vars:5,consts:[["scope","row"],["cdkDragHandle","",2,"cursor","move",3,"icon","size"],["scope","row",4,"ngFor","ngForOf"],["role","gridcell","data-label","Actions",1,"slds-cell-shrink"],[3,"buttonsize","actionset"],[3,"field","fieldconfig","fielddisplayclass"]],template:function(e,t){1&e&&(l.TgZ(0,"td",0),l._UZ(1,"system-utility-icon",1),l.qZA(),l.YNc(2,f,2,3,"td",2),l.TgZ(3,"td",3),l._UZ(4,"object-action-menu",4),l.qZA()),2&e&&(l.xp6(1),l.Q6J("icon","rows")("size","x-small"),l.xp6(1),l.Q6J("ngForOf",t.listfields),l.xp6(2),l.Q6J("buttonsize","x-small")("actionset",t.actionset))},dependencies:[c.sg,u.Bh,h.j,m.r,g.g],encapsulation:2})),ObjectRelatedListSequencedItem})()},7588:(e,t,s)=>{"use strict";s.d(t,{K:()=>F});var i=s(1180),n=s(2242),o=s(5329),l=s(4154),a=s(6040),d=s(5710),r=s(6559),c=s(4505),u=s(2349),h=s(4755),m=s(3418),g=s(4567),p=s(7674),f=s(2161),b=s(8859),v=s(423),Z=s(3129);function _(e,t){1&e&&n._UZ(0,"th",7)}function y(e,t){if(1&e&&(n.TgZ(0,"th",9)(1,"span",10),n._UZ(2,"system-label-fieldname",11),n.qZA()()),2&e){const e=t.$implicit,s=n.oxw(3);n.Q6J("ngStyle",s.getColumnStyle(e)),n.xp6(2),n.Q6J("module",s.module)("field",e.field)("fieldconfig",e.fieldconfig)}}function x(e,t){if(1&e&&(n.ynx(0),n.YNc(1,y,3,4,"th",8),n.BQk()),2&e){const e=n.oxw(2);n.xp6(1),n.Q6J("ngForOf",e.listfields)}}function w(e,t){if(1&e&&n._UZ(0,"system-utility-icon",17),2&e){const e=n.oxw().$implicit,t=n.oxw(3);n.Q6J("icon",t.getSortIcon(e))("colorclass","sort"==t.getSortIcon(e)?"slds-icon-text-light":"slds-icon-text-default")}}function T(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"th",13)(1,"a",14),n.NdJ("click",(function(){const t=n.CHM(e).$implicit,s=n.oxw(3);return n.KtG(s.setSortField(t))})),n.TgZ(2,"span",15),n._UZ(3,"system-label-fieldname",11),n.qZA(),n.YNc(4,w,1,2,"system-utility-icon",16),n.qZA()()}if(2&e){const e=t.$implicit,s=n.oxw(3);n.Q6J("ngStyle",s.getColumnStyle(e)),n.xp6(3),n.Q6J("module",s.module)("field",e.field)("fieldconfig",e.fieldconfig),n.xp6(1),n.Q6J("ngIf",s.isSortable(e))}}function C(e,t){if(1&e&&(n.ynx(0),n.YNc(1,T,5,5,"th",12),n.BQk()),2&e){const e=n.oxw(2);n.xp6(1),n.Q6J("ngForOf",e.listfields)}}function A(e,t){1&e&&n._UZ(0,"th",7)}function k(e,t){if(1&e&&n._UZ(0,"tr",19),2&e){const e=t.$implicit,s=n.oxw(3);n.Q6J("module",s.module)("editable",s.editable)("editcomponentset",s.editcomponentset)("listfields",s.listfields)("listitem",e)("hideActions",s.hideActions)("listitemactionset",s.listitemactionset)}}function L(e,t){if(1&e&&(n.ynx(0),n.TgZ(1,"tbody"),n.YNc(2,k,1,7,"tr",18),n.qZA(),n.BQk()),2&e){const e=n.oxw(2);n.xp6(2),n.Q6J("ngForOf",e.relatedmodels.items)}}function I(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"tr",22),n.NdJ("cdkDragStarted",(function(t){n.CHM(e);const s=n.oxw(3);return n.KtG(s.dragStarted(t))}))("cdkDragEnded",(function(t){n.CHM(e);const s=n.oxw(3);return n.KtG(s.dragEnded(t))})),n.qZA()}if(2&e){const e=t.$implicit,s=n.oxw(3);n.Q6J("module",s.module)("listfields",s.listfields)("listitem",e)("listItemActionset",s.listitemactionset)}}function M(e,t){if(1&e){const e=n.EpF();n.ynx(0),n.TgZ(1,"tbody",20),n.NdJ("cdkDropListDropped",(function(t){n.CHM(e);const s=n.oxw(2);return n.KtG(s.drop(t))})),n.YNc(2,I,1,4,"tr",21),n.qZA(),n.BQk()}if(2&e){const e=n.oxw(2);n.xp6(2),n.Q6J("ngForOf",e.relatedmodels.items)("ngForTrackBy",e.getIdOfRow)}}function S(e,t){if(1&e&&n._UZ(0,"tbody",23),2&e){const e=n.oxw(2);n.Q6J("columns",e.listfields.length)("select",e.isSequenced)("tools",!e.hideActions)}}const J=function(e,t){return{"slds-table--bordered":e,"slds-no-row-hover":t}};function O(e,t){if(1&e&&(n.TgZ(0,"table",2)(1,"thead")(2,"tr",3),n.YNc(3,_,1,0,"th",4),n.YNc(4,x,2,1,"ng-container",5),n.YNc(5,C,2,1,"ng-container",5),n.YNc(6,A,1,0,"th",4),n.qZA()(),n.YNc(7,L,3,1,"ng-container",5),n.YNc(8,M,3,2,"ng-container",5),n.YNc(9,S,1,3,"tbody",6),n.qZA()),2&e){const e=n.oxw();n.Q6J("ngClass",n.WLB(8,J,!e.isSmall,e.nowDragging)),n.xp6(3),n.Q6J("ngIf",e.isSequenced),n.xp6(1),n.Q6J("ngIf",e.isSequenced),n.xp6(1),n.Q6J("ngIf",!e.isSequenced),n.xp6(1),n.Q6J("ngIf",!e.hideActions),n.xp6(1),n.Q6J("ngIf",!e.isSequenced),n.xp6(1),n.Q6J("ngIf",e.isSequenced),n.xp6(1),n.Q6J("ngIf",e.isloading)}}function N(e,t){1&e&&n._UZ(0,"system-illustration-no-access")}let F=(()=>{var e;class ObjectRelatedlistTable{constructor(e,t,s,n,o,l,a){(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"relatedmodels",void 0),(0,i.Z)(this,"model",void 0),(0,i.Z)(this,"layout",void 0),(0,i.Z)(this,"backend",void 0),(0,i.Z)(this,"logger",void 0),(0,i.Z)(this,"listfields",[]),(0,i.Z)(this,"editable",!1),(0,i.Z)(this,"editcomponentset",""),(0,i.Z)(this,"sequencefield",null),(0,i.Z)(this,"hideActions",!1),(0,i.Z)(this,"listitemactionset",void 0),(0,i.Z)(this,"noAccess",!1),(0,i.Z)(this,"nowDragging",!1),(0,i.Z)(this,"isSequenced",!1),this.language=e,this.metadata=t,this.relatedmodels=s,this.model=n,this.layout=o,this.backend=l,this.logger=a}ngOnInit(){this.metadata.checkModuleAcl(this.relatedmodels.relatedModule,"listrelated")||this.metadata.checkModuleAcl(this.relatedmodels.relatedModule,"list")?(this.metadata.fieldDefs[this.model.module][this.relatedmodels._linkName]||this.relatedmodels.linkEndPoint?!this.sequencefield&&this.metadata.fieldDefs[this.model.module][this.relatedmodels._linkName]?.sequence_field&&(this.sequencefield=this.metadata.fieldDefs[this.model.module][this.relatedmodels._linkName].sequence_field):this.logger.error('Missing link or wrong link name ("'+this.relatedmodels._linkName+'")!'),this.sequencefield&&(this.isSequenced=!0)):this.noAccess=!0}get isloading(){return this.relatedmodels.isloading}get isSmall(){return"small"===this.layout.screenwidth}get module(){return this.relatedmodels.relatedModule}getColumnStyle(e){return e.fieldconfig?.widthdimension&&e.fieldconfig?.width?{width:e.fieldconfig?.width+e.fieldconfig.widthdimension}:{}}isSortable(e){return!this.relatedmodels.sortBySequencefield&&!0===e.fieldconfig.sortable}setSortField(e){this.relatedmodels.sortBySequencefield||this.isSortable(e)&&(this.relatedmodels.sortfield=e.fieldconfig&&e.fieldconfig.sortfield?e.fieldconfig.sortfield:e.field)}getSortIcon(e){return this.relatedmodels.sortfield==(e.fieldconfig&&e.fieldconfig.sortfield?e.fieldconfig.sortfield:e.field)?"ASC"===this.relatedmodels.sort.sortdirection?"arrowdown":"arrowup":"sort"}getIdOfRow(e,t){return t.id}drop(e){let t=this.relatedmodels.items.splice(e.previousIndex,1);this.relatedmodels.items.splice(e.currentIndex,0,t[0]);let s=[],i=0;for(let e of this.relatedmodels.items)e[this.sequencefield]=i,s.push({id:e.id,[this.sequencefield]:i}),i++;this.relatedmodels.updateItems(s)}dragStarted(e){this.nowDragging=!0,e.source.element.nativeElement.classList.add("slds-is-selected")}dragEnded(e){this.nowDragging=!1,e.source.element.nativeElement.classList.remove("slds-is-selected")}}return e=ObjectRelatedlistTable,(0,i.Z)(ObjectRelatedlistTable,"ɵfac",(function(t){return new(t||e)(n.Y36(o.d),n.Y36(l.Pu),n.Y36(a.j),n.Y36(d.o),n.Y36(r.b),n.Y36(c.y),n.Y36(u.M))})),(0,i.Z)(ObjectRelatedlistTable,"ɵcmp",n.Xpm({type:e,selectors:[["object-relatedlist-table"]],inputs:{listfields:"listfields",editable:"editable",editcomponentset:"editcomponentset",sequencefield:"sequencefield",hideActions:"hideActions",listitemactionset:"listitemactionset"},decls:3,vars:2,consts:[["class","slds-table slds-table--fixed-layout slds-table--header-fixed slds-max-medium-table_stacked-horizontal",3,"ngClass",4,"ngIf","ngIfElse"],["noaccess",""],[1,"slds-table","slds-table--fixed-layout","slds-table--header-fixed","slds-max-medium-table_stacked-horizontal",3,"ngClass"],[1,"slds-text-title--caps"],["class","slds-cell-shrink","scope","col",4,"ngIf"],[4,"ngIf"],["system-table-stencils","",3,"columns","select","tools",4,"ngIf"],["scope","col",1,"slds-cell-shrink"],["class","slds-resizable","scope","col",3,"ngStyle",4,"ngFor","ngForOf"],["scope","col",1,"slds-resizable",3,"ngStyle"],[1,"slds-th__action","slds-truncate"],["length","short",3,"module","field","fieldconfig"],["class","slds-is-sortable slds-resizable","scope","col",3,"ngStyle",4,"ngFor","ngForOf"],["scope","col",1,"slds-is-sortable","slds-resizable",3,"ngStyle"],["href","javascript:void(0);",1,"slds-th__action","slds-text-link--reset",3,"click"],[1,"slds-truncate"],["size","xx-small",3,"icon","colorclass",4,"ngIf"],["size","xx-small",3,"icon","colorclass"],["object-related-list-item","","class","slds-hint-parent",3,"module","editable","editcomponentset","listfields","listitem","hideActions","listitemactionset",4,"ngFor","ngForOf"],["object-related-list-item","",1,"slds-hint-parent",3,"module","editable","editcomponentset","listfields","listitem","hideActions","listitemactionset"],["cdkDropList","",1,"dragboundary",3,"cdkDropListDropped"],["object-related-list-sequenced-item","","cdkDrag","","cdkDragBoundary",".dragboundary","class","slds-hint-parent",3,"module","listfields","listitem","listItemActionset","cdkDragStarted","cdkDragEnded",4,"ngFor","ngForOf","ngForTrackBy"],["object-related-list-sequenced-item","","cdkDrag","","cdkDragBoundary",".dragboundary",1,"slds-hint-parent",3,"module","listfields","listitem","listItemActionset","cdkDragStarted","cdkDragEnded"],["system-table-stencils","",3,"columns","select","tools"]],template:function(e,t){if(1&e&&(n.YNc(0,O,10,11,"table",0),n.YNc(1,N,1,0,"ng-template",null,1,n.W1O)),2&e){const e=n.MAs(2);n.Q6J("ngIf",!t.noAccess)("ngIfElse",e)}},dependencies:[h.mk,h.sg,h.O5,h.PC,m.Wj,m.Zt,g.s,p.h,f.x,b.r,v.X,Z.Q],encapsulation:2})),ObjectRelatedlistTable})()},8709:(e,t,s)=>{"use strict";s.d(t,{T:()=>v});var i=s(1180),n=s(727),o=s(2242),l=s(5329),a=s(4154),d=s(5710),r=s(2057),c=s(2422),u=s(4755),h=s(2656),m=s(4114),g=s(3463);function p(e,t){if(1&e){const e=o.EpF();o.TgZ(0,"system-input-date-picker",12),o.NdJ("datePicked",(function(t){o.CHM(e);const s=o.oxw();return o.KtG(s.setReminder(t))})),o.qZA()}if(2&e){const e=o.oxw();o.Q6J("setDate",e.reminderDate)}}const f=function(e){return{"slds-is-open":e}},b=function(e,t){return{"slds-not-selected":e,"slds-is-selected":t}};let v=(()=>{var e;class ObjectReminderButton{constructor(e,t,s,o,l,a,d){(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"model",void 0),(0,i.Z)(this,"renderer",void 0),(0,i.Z)(this,"elementRef",void 0),(0,i.Z)(this,"reminder",void 0),(0,i.Z)(this,"userpreferences",void 0),(0,i.Z)(this,"showDialog",!1),(0,i.Z)(this,"reminderDate",new moment),(0,i.Z)(this,"hasReminder",!1),(0,i.Z)(this,"clickListener",void 0),(0,i.Z)(this,"subscriptions",new n.w0),this.language=e,this.metadata=t,this.model=s,this.renderer=o,this.elementRef=l,this.reminder=a,this.userpreferences=d,this.subscriptions.add(this.reminder.changed$.subscribe((e=>{this.loadReminder()}))),this.loadReminder()}ngOnDestroy(){this.subscriptions.unsubscribe()}loadReminder(){let e=this.reminder.getReminder(this.model.module,this.model.id);!1!==e?(this.hasReminder=!0,this.reminderDate=new moment(e)):this.hasReminder=!1}toggleDatePicker(){this.showDialog=!this.showDialog,this.showDialog?this.clickListener=this.renderer.listen("document","click",(e=>this.onClick(e))):this.clickListener&&this.clickListener()}onClick(e){this.elementRef.nativeElement.contains(e.target)||(this.showDialog=!1)}get isEditing(){return this.model.isEditing}clearReminder(){this.reminder.deleteReminder(this.model.module,this.model.id),this.hasReminder=!1}setReminder(e){this.showDialog=!1,this.hasReminder=!0,this.reminderDate=new moment(e),this.reminder.setReminder(this.model,this.reminderDate)}getReminderDate(){return this.reminderDate.format(this.userpreferences.getDateFormat())}}return e=ObjectReminderButton,(0,i.Z)(ObjectReminderButton,"ɵfac",(function(t){return new(t||e)(o.Y36(l.d),o.Y36(a.Pu),o.Y36(d.o),o.Y36(o.Qsj),o.Y36(o.SBq),o.Y36(r.U),o.Y36(c.z))})),(0,i.Z)(ObjectReminderButton,"ɵcmp",o.Xpm({type:e,selectors:[["object-reminder-button"]],decls:14,vars:10,consts:[[1,"slds-form-element","slds-dropdown-trigger","slds-dropdown-trigger_click",3,"ngClass"],[1,"slds-button","slds-button_stateful","slds-button--neutral","slds-m-horizontal--xxx-small",3,"ngClass"],[1,"slds-text-not-selected",3,"click"],["icon","add",1,"slds-p-right--xx-small"],["label","LBL_REMINDER"],[1,"slds-text-selected"],["icon","check",1,"slds-p-right--xx-small"],[1,"slds-text-selected-focus"],["icon","close",1,"slds-p-right--xx-small",3,"click"],[3,"click"],["role","dialog",1,"slds-datepicker","slds-dropdown","slds-dropdown_right"],[3,"setDate","datePicked",4,"ngIf"],[3,"setDate","datePicked"]],template:function(e,t){1&e&&(o.TgZ(0,"div",0)(1,"a",1)(2,"span",2),o.NdJ("click",(function(){return t.toggleDatePicker()})),o._UZ(3,"system-button-icon",3)(4,"system-label",4),o.qZA(),o.TgZ(5,"span",5),o._UZ(6,"system-button-icon",6),o._uU(7),o.qZA(),o.TgZ(8,"span",7)(9,"system-button-icon",8),o.NdJ("click",(function(){return t.clearReminder()})),o.qZA(),o.TgZ(10,"span",9),o.NdJ("click",(function(){return t.toggleDatePicker()})),o._uU(11),o.qZA()()(),o.TgZ(12,"div",10),o.YNc(13,p,1,1,"system-input-date-picker",11),o.qZA()()),2&e&&(o.Q6J("ngClass",o.VKq(5,f,t.showDialog)),o.xp6(1),o.Q6J("ngClass",o.WLB(7,b,!t.hasReminder,t.hasReminder)),o.xp6(6),o.hij("",t.getReminderDate()," "),o.xp6(4),o.Oqu(t.getReminderDate()),o.xp6(2),o.Q6J("ngIf",t.showDialog))},dependencies:[u.mk,u.O5,h.J,m.e,g._],encapsulation:2})),ObjectReminderButton})()},6409:(e,t,s)=>{"use strict";s.d(t,{n:()=>f});var i=s(1180),n=s(8017),o=s(2242),l=s(5329),a=s(4154),d=s(5710),r=s(4044),c=s(3348),u=s(4755),h=s(2656),m=s(5681);function g(e,t){if(1&e){const e=o.EpF();o.TgZ(0,"li",10),o.NdJ("click",(function(){const t=o.CHM(e).$implicit,s=o.oxw(2);return o.KtG(s.propagateclick(t.id))})),o.TgZ(1,"a",11),o._UZ(2,"object-status-network-button-item",3),o.qZA()()}if(2&e){const e=t.$implicit;o.xp6(2),o.Q6J("item",e)}}function p(e,t){if(1&e){const e=o.EpF();o.TgZ(0,"div",1)(1,"button",2),o.NdJ("click",(function(){o.CHM(e);const t=o.oxw();return o.KtG(t.propagateclick(t.primaryItem.id))})),o._UZ(2,"object-status-network-button-item",3),o.qZA(),o.TgZ(3,"div",4)(4,"button",5),o._UZ(5,"system-button-icon",6),o.qZA(),o.TgZ(6,"div",7)(7,"ul",8),o.YNc(8,g,3,1,"li",9),o.qZA()()()()}if(2&e){const e=o.oxw();o.xp6(1),o.Q6J("disabled",e.isDisabled),o.xp6(1),o.Q6J("item",e.primaryItem),o.xp6(2),o.Q6J("disabled",e.isDisabled||0==e.secondaryItems.length),o.xp6(4),o.Q6J("ngForOf",e.secondaryItems)}}let f=(()=>{var e;class ObjectStatusNetworkButton{constructor(e,t,s,n,o,l,a){(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"model",void 0),(0,i.Z)(this,"modal",void 0),(0,i.Z)(this,"router",void 0),(0,i.Z)(this,"renderer",void 0),(0,i.Z)(this,"elementRef",void 0),(0,i.Z)(this,"buttonitemlist",void 0),(0,i.Z)(this,"statusField",""),(0,i.Z)(this,"statusNetwork",[]),this.language=e,this.metadata=t,this.model=s,this.modal=n,this.router=o,this.renderer=l,this.elementRef=a}get isDisabled(){return this.model.isEditing||!this.model.checkAccess("edit")}get isManaged(){return""!=this.statusField&&!1!==this.primaryItem&&!this.isDisabled}get primaryItem(){for(let e of this.statusNetwork)if(e.status_from==this.model.getField(this.statusField)&&(!e.required_model_state||this.model.checkModelState(e.required_model_state)))return e;return!1}get secondaryItems(){let e=[],t=!1;for(let s of this.statusNetwork)s.status_from!=this.model.getField(this.statusField)||s.required_model_state&&!this.model.checkModelState(s.required_model_state)||(t&&e.push(s),t||(t=!0));return e}ngOnInit(){let e=this.metadata.checkStatusManaged(this.model.module);0!=e&&(this.statusField=e.statusField,this.statusNetwork=e.statusNetwork)}propagateclick(e){this.buttonitemlist.some((t=>{if(t.id==e)return t.setStatus(this.statusField),!0}))}}return e=ObjectStatusNetworkButton,(0,i.Z)(ObjectStatusNetworkButton,"ɵfac",(function(t){return new(t||e)(o.Y36(l.d),o.Y36(a.Pu),o.Y36(d.o),o.Y36(r.o),o.Y36(c.F0),o.Y36(o.Qsj),o.Y36(o.SBq))})),(0,i.Z)(ObjectStatusNetworkButton,"ɵcmp",o.Xpm({type:e,selectors:[["object-status-network-button"]],viewQuery:function(e,t){if(1&e&&o.Gf(n.Y,5),2&e){let e;o.iGM(e=o.CRH())&&(t.buttonitemlist=e)}},decls:1,vars:1,consts:[["class","slds-button-group slds-m-horizontal--xxx-small",4,"ngIf"],[1,"slds-button-group","slds-m-horizontal--xxx-small"],[1,"slds-button","slds-button_neutral",3,"disabled","click"],[3,"item"],["system-dropdown-trigger","",1,"slds-dropdown-trigger","slds-dropdown-trigger_click","slds-button_last"],[1,"slds-button","slds-button_icon","slds-button_icon-border-filled",3,"disabled"],["icon","down"],[1,"slds-dropdown","slds-dropdown_right","slds-dropdown_actions"],["role","menu",1,"slds-dropdown__list"],["class","slds-dropdown__item","role","presentation",3,"click",4,"ngFor","ngForOf"],["role","presentation",1,"slds-dropdown__item",3,"click"],["href","javascript:void(0);","role","menuitem",1,"slds-truncate"]],template:function(e,t){1&e&&o.YNc(0,p,9,4,"div",0),2&e&&o.Q6J("ngIf",t.isManaged)},dependencies:[u.sg,u.O5,h.J,m.l,n.Y],encapsulation:2})),ObjectStatusNetworkButton})()},8017:(e,t,s)=>{"use strict";s.d(t,{Y:()=>h});var i=s(1180),n=s(2242),o=s(5329),l=s(4154),a=s(4044),d=s(5710),r=s(4755);const c=["componentcontainer"];function u(e,t){if(1&e&&(n.TgZ(0,"span",2),n._uU(1),n.qZA()),2&e){const e=n.oxw();n.xp6(1),n.Oqu(e.language.getLabel(e.item.action_label))}}let h=(()=>{var e;class ObjectStatusNetworkButtonItem{constructor(e,t,s,n,o){(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"modal",void 0),(0,i.Z)(this,"model",void 0),(0,i.Z)(this,"injector",void 0),(0,i.Z)(this,"componentcontainer",void 0),(0,i.Z)(this,"item",{}),(0,i.Z)(this,"actioncomponent",void 0),(0,i.Z)(this,"initialized",!1),this.language=e,this.metadata=t,this.modal=s,this.model=n,this.injector=o}get id(){return this.item.id}get hasComponent(){return this.item.status_component&&""!=this.item.status_component}ngAfterViewInit(){this.hasComponent&&this.metadata.addComponent(this.item.status_component,this.componentcontainer,this.injector).subscribe((e=>{this.actioncomponent=e.instance,e.instance.item=this.item})),this.initialized=!0}ngOnChanges(){this.actioncomponent&&(this.actioncomponent.self.destroy(),this.actioncomponent=null),this.initialized&&this.hasComponent&&this.metadata.addComponent(this.item.status_component,this.componentcontainer,this.injector).subscribe((e=>{this.actioncomponent=e.instance,e.instance.item=this.item}))}setStatus(e){this.item.prompt_label?this.modal.confirm(this.language.getLabel(this.item.prompt_label,"","long"),this.language.getLabel(this.item.prompt_label,"")).subscribe((t=>{t&&this.executeChange(e)})):this.executeChange(e)}executeChange(e){this.actioncomponent&&this.actioncomponent.execute?this.actioncomponent.execute():(this.model.startEdit(!0,!1),this.model.setField(e,this.item.status_to),this.model.validate()?this.model.save():this.model.edit())}}return e=ObjectStatusNetworkButtonItem,(0,i.Z)(ObjectStatusNetworkButtonItem,"ɵfac",(function(t){return new(t||e)(n.Y36(o.d),n.Y36(l.Pu),n.Y36(a.o),n.Y36(d.o),n.Y36(n.zs3))})),(0,i.Z)(ObjectStatusNetworkButtonItem,"ɵcmp",n.Xpm({type:e,selectors:[["object-status-network-button-item"]],viewQuery:function(e,t){if(1&e&&n.Gf(c,7,n.s_b),2&e){let e;n.iGM(e=n.CRH())&&(t.componentcontainer=e.first)}},inputs:{item:"item"},features:[n.TTD],decls:3,vars:1,consts:[["class","slds-text-color_default",4,"ngIf"],["componentcontainer",""],[1,"slds-text-color_default"]],template:function(e,t){1&e&&(n.YNc(0,u,2,1,"span",0),n._UZ(1,"div",null,1)),2&e&&n.Q6J("ngIf",!t.hasComponent)},dependencies:[r.O5],encapsulation:2})),ObjectStatusNetworkButtonItem})()},4652:(e,t,s)=>{"use strict";s.d(t,{U:()=>h});var i=s(1180),n=s(2242),o=s(2355),l=s(4154),a=s(5710),d=s(4755),r=s(2656),c=s(3463);const u=function(e,t){return{"slds-is-selected":e,"slds-not-selected":t}};let h=(()=>{var e;class ObjectSubscriptionButton{constructor(e,t,s){(0,i.Z)(this,"subscriptionService",void 0),(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"model",void 0),(0,i.Z)(this,"inProcess",!1),this.subscriptionService=e,this.metadata=t,this.model=s}toggleSubscribe(){this.inProcess=!0,this.subscriptionService.hasSubscription(this.model.id)?this.subscriptionService.unsubscribeBean(this.model.id,this.model.module).subscribe((e=>this.inProcess=!1),(e=>this.inProcess=!1)):this.subscriptionService.subscribeBean(this.model).subscribe((e=>this.inProcess=!1),(e=>this.inProcess=!1))}}return e=ObjectSubscriptionButton,(0,i.Z)(ObjectSubscriptionButton,"ɵfac",(function(t){return new(t||e)(n.Y36(o.J),n.Y36(l.Pu),n.Y36(a.o))})),(0,i.Z)(ObjectSubscriptionButton,"ɵcmp",n.Xpm({type:e,selectors:[["object-subscription-button"]],decls:10,vars:5,consts:[[1,"slds-button","slds-button_neutral","slds-button_stateful",2,"text-transform","capitalize",3,"disabled","ngClass","click"],[1,"slds-text-not-selected"],["icon","add",1,"slds-p-right--xx-small"],["label","LBL_FOLLOW"],[1,"slds-text-selected"],["icon","check",1,"slds-p-right--xx-small"],["label","LBL_FOLLOWING"],[1,"slds-text-selected-focus"],["icon","close",1,"slds-p-right--xx-small"],["label","LBL_UNFOLLOW"]],template:function(e,t){1&e&&(n.TgZ(0,"button",0),n.NdJ("click",(function(){return t.toggleSubscribe()})),n.TgZ(1,"span",1),n._UZ(2,"system-button-icon",2)(3,"system-label",3),n.qZA(),n.TgZ(4,"span",4),n._UZ(5,"system-button-icon",5)(6,"system-label",6),n.qZA(),n.TgZ(7,"span",7),n._UZ(8,"system-button-icon",8)(9,"system-label",9),n.qZA()()),2&e&&n.Q6J("disabled",t.inProcess)("ngClass",n.WLB(2,u,t.subscriptionService.hasSubscription(t.model.id),!t.subscriptionService.hasSubscription(t.model.id)))},dependencies:[d.mk,r.J,c._],encapsulation:2})),ObjectSubscriptionButton})()},6490:(e,t,s)=>{"use strict";s.r(t),s.d(t,{ObjectComponents:()=>Kr});var i=s(1180),n=s(4755),o=s(3418),l=s(5030),a=s(3348),d=s(4357),r=s(3190),c=s(3735),u=s(1273),h=s(7443),m=s(2242),g=s(5329),p=s(5710);let f=(()=>{var e;class ObjectFieldFilterPipe{constructor(e,t){(0,i.Z)(this,"languange",void 0),(0,i.Z)(this,"model",void 0),this.languange=e,this.model=t}transform(e,t){let s=[];for(let i of e)(i.toLowerCase().indexOf(t.toLowerCase())>=0||this.languange.getFieldDisplayName(this.model.module,i).toLowerCase().indexOf(t.toLowerCase())>0)&&s.push(i);return s}}return e=ObjectFieldFilterPipe,(0,i.Z)(ObjectFieldFilterPipe,"ɵfac",(function(t){return new(t||e)(m.Y36(g.d,16),m.Y36(p.o,16))})),(0,i.Z)(ObjectFieldFilterPipe,"ɵpipe",m.Yjl({name:"objectfieldfilter",type:e,pure:!1})),ObjectFieldFilterPipe})();var b=s(1591),v=s(4154),Z=s(6625),y=s(2644),x=s(6559),w=s(2656),T=s(4561),C=s(8859),A=s(5982),k=s(151),L=s(7102),I=s(2348),M=s(2422),S=s(3463),J=s(4361);function O(e,t){if(1&e){const e=m.EpF();m.TgZ(0,"li",10),m.NdJ("click",(function(){const t=m.CHM(e).$implicit,s=m.oxw();return m.KtG(s.setListComponent(t.component))})),m.TgZ(1,"a",11)(2,"span",12),m._UZ(3,"system-label",13),m.qZA(),m._UZ(4,"system-utility-icon",14),m.qZA()()}if(2&e){const e=t.$implicit;m.xp6(3),m.Q6J("label",e.label),m.xp6(1),m.Q6J("icon",e.icon)}}let N=(()=>{var e;class ObjectListViewHeaderListSelector{constructor(e,t,s,n,o,l,a){(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"userpreferences",void 0),(0,i.Z)(this,"modellist",void 0),(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"model",void 0),(0,i.Z)(this,"elementRef",void 0),(0,i.Z)(this,"renderer",void 0),(0,i.Z)(this,"componentconfig",void 0),this.metadata=e,this.userpreferences=t,this.modellist=s,this.language=n,this.model=o,this.elementRef=l,this.renderer=a}ngOnInit(){this.initialize()}initialize(){this.loadComponentConfig(),this.modellist.currentList&&-1!=["all","owner"].indexOf(this.modellist.currentList.id)&&this.modellist.updateStandardListsComponent(this.modellist.currentList.id,this.getDefaultComponent())}getDefaultComponent(){return this.userpreferences.getPreference("defaultlisttype",this.modellist.module)||this.componentconfig.lists[0].component}loadComponentConfig(){let e=this.metadata.getComponentConfig("ObjectListView",this.model.module),t=this.metadata.getComponentSetObjects(e.componentset);this.componentconfig={lists:t.map((e=>({component:e.component,icon:e.componentconfig.icon?e.componentconfig.icon:"list",label:e.componentconfig.name})))}}get currentListIcon(){let e="";if(this.componentconfig.lists){let t=this.componentconfig.lists.find((e=>e.component==this.modellist.currentList.listcomponent));e=t?.icon}return e}get disabled(){return this.componentconfig.lists.length<=1}setListComponent(e){this.modellist.currentList&&(-1!=["all","owner"].indexOf(this.modellist.currentList.id)?this.modellist.updateStandardListsComponent(this.modellist.currentList.id,e):this.modellist.updateListTypeComponent(e))}}return e=ObjectListViewHeaderListSelector,(0,i.Z)(ObjectListViewHeaderListSelector,"ɵfac",(function(t){return new(t||e)(m.Y36(v.Pu),m.Y36(M.z),m.Y36(y.t),m.Y36(g.d),m.Y36(p.o),m.Y36(m.SBq),m.Y36(m.Qsj))})),(0,i.Z)(ObjectListViewHeaderListSelector,"ɵcmp",m.Xpm({type:e,selectors:[["object-listview-header-list-selector"]],decls:10,vars:3,consts:[["aria-expanded","false","system-dropdown-trigger-simple","",1,"slds-dropdown-trigger","slds-dropdown-trigger--click","slds-m-horizontal--xxx-small"],["aria-haspopup","true","system-title","LBL_CHANGE_VIEW",1,"slds-button","slds-button--icon","slds-button--icon-border","slds-button--neutral",3,"disabled"],["size","small",3,"icon"],["icon","down","size","x-small",1,"slds-p-left--xxx-small"],[1,"slds-dropdown","slds-dropdown--right","slds-dropdown--small"],["role","menu",1,"slds-dropdown__list"],["role","separator",1,"slds-dropdown__header"],[1,"slds-text-title--caps"],["label","LBL_DISPLAYAS"],["class","slds-dropdown__item slds-is-selected","role","presentation",3,"click",4,"ngFor","ngForOf"],["role","presentation",1,"slds-dropdown__item","slds-is-selected",3,"click"],["href","javascript:void(0);","role","menuitemcheckbox","aria-checked","true","tabindex","0"],[1,"slds-truncate"],[3,"label"],["size","x-small",3,"icon"]],template:function(e,t){1&e&&(m.TgZ(0,"div",0)(1,"button",1),m._UZ(2,"system-button-icon",2)(3,"system-button-icon",3),m.qZA(),m.TgZ(4,"div",4)(5,"ul",5)(6,"li",6)(7,"span",7),m._UZ(8,"system-label",8),m.qZA()(),m.YNc(9,O,5,2,"li",9),m.qZA()()()),2&e&&(m.xp6(1),m.Q6J("disabled",t.disabled),m.xp6(1),m.Q6J("icon",t.currentListIcon),m.xp6(7),m.Q6J("ngForOf",t.componentconfig.lists))},dependencies:[n.sg,w.J,S._,C.r,J.w,k.S],encapsulation:2})),ObjectListViewHeaderListSelector})();var F=s(8861),q=s(4822),E=s(1058),Y=s(7954),D=s(2685);function Q(e,t){1&e&&m._UZ(0,"object-listview-tags-aggregate")}function U(e,t){if(1&e&&m._UZ(0,"object-listview-aggregate",14),2&e){const e=m.oxw().$implicit;m.Q6J("aggregate",e)}}function R(e,t){if(1&e&&(m.TgZ(0,"div",12),m.YNc(1,U,1,1,"object-listview-aggregate",13),m.qZA()),2&e){const e=t.$implicit;m.xp6(1),m.Q6J("ngIf",!e.system)}}let j=(()=>{var e;class ObjectListViewAggregatesPanel{constructor(e,t,s,n){(0,i.Z)(this,"elementRef",void 0),(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"modellist",void 0),this.elementRef=e,this.language=t,this.metadata=s,this.modellist=n}get aggregates(){return this.modellist.moduleAggregates}get hasTags(){return this.metadata.checkTagging(this.modellist.module)}clearAggregates(){this.modellist.removeAllAggregates(!0),this.modellist.reLoadList()}}return e=ObjectListViewAggregatesPanel,(0,i.Z)(ObjectListViewAggregatesPanel,"ɵfac",(function(t){return new(t||e)(m.Y36(m.SBq),m.Y36(g.d),m.Y36(v.Pu),m.Y36(y.t))})),(0,i.Z)(ObjectListViewAggregatesPanel,"ɵcmp",m.Xpm({type:e,selectors:[["object-listview-aggregates-panel"]],hostAttrs:[1,"slds-is-fixed"],decls:12,vars:3,consts:[[1,"slds-panel","slds-size--medium","slds-grid","slds-grid--vertical","slds-nowrap","slds-panel--filters"],[1,"slds-form--stacked","slds-grow","slds-scrollable--y","slds-grid","slds-grid--vertical"],[1,"slds-filters"],[1,"slds-filters__header","slds-grid","slds-grid--align-spread","slds-has-divider--bottom"],[1,"slds-align-middle","slds-text-heading--small"],["label","LBL_AGGREGATES"],[1,"slds-button","slds-button--brand",3,"disabled","click"],["label","LBL_CLEARALL"],["system-to-bottom","",1,"slds-filters__body"],[1,"slds-grid_vertical"],[4,"ngIf"],["class","slds-m-vertical--xx-small",4,"ngFor","ngForOf"],[1,"slds-m-vertical--xx-small"],[3,"aggregate",4,"ngIf"],[3,"aggregate"]],template:function(e,t){1&e&&(m.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h4",4),m._UZ(5,"system-label",5),m.qZA(),m.TgZ(6,"button",6),m.NdJ("click",(function(){return t.clearAggregates()})),m._UZ(7,"system-label",7),m.qZA()(),m.TgZ(8,"div",8)(9,"div",9),m.YNc(10,Q,1,0,"object-listview-tags-aggregate",10),m.YNc(11,R,2,1,"div",11),m.qZA()()()()()),2&e&&(m.xp6(6),m.Q6J("disabled",!t.modellist.hasNonSysAggregates),m.xp6(4),m.Q6J("ngIf",t.hasTags),m.xp6(1),m.Q6J("ngForOf",t.aggregates))},dependencies:[n.sg,n.O5,S._,E.H,Y.i,D.w],encapsulation:2})),ObjectListViewAggregatesPanel})(),B=(()=>{var e;class ObjectListViewFilterButton{constructor(e){(0,i.Z)(this,"modellist",void 0),this.modellist=e}togglefilters(){this.modellist.displayAggregates=!1,this.modellist.displayFilters=!this.modellist.displayFilters}get enabled(){return this.modellist.filterEnabled()}get buttonclasses(){return this.modellist.displayFilters?"slds-is-selected":""}}return e=ObjectListViewFilterButton,(0,i.Z)(ObjectListViewFilterButton,"ɵfac",(function(t){return new(t||e)(m.Y36(y.t))})),(0,i.Z)(ObjectListViewFilterButton,"ɵcmp",m.Xpm({type:e,selectors:[["object-listview-filter-button"]],decls:2,vars:2,consts:[["system-title","LBL_FILTER",1,"slds-button","slds-button--neutral","slds-button--icon-border","slds-m-horizontal--xxx-small",3,"disabled","ngClass","click"],["icon","filterList"]],template:function(e,t){1&e&&(m.TgZ(0,"button",0),m.NdJ("click",(function(){return t.togglefilters()})),m._UZ(1,"system-button-icon",1),m.qZA()),2&e&&m.Q6J("disabled",!t.enabled)("ngClass",t.buttonclasses)},dependencies:[n.mk,w.J,k.S],encapsulation:2})),ObjectListViewFilterButton})();var G=s(727),P=s(9901);const H=["popover"];function z(e,t){if(1&e){const e=m.EpF();m.TgZ(0,"div",9)(1,"div",10)(2,"fieldset",11)(3,"legend",12),m._UZ(4,"system-label",5),m.qZA(),m.TgZ(5,"div",13)(6,"span",14)(7,"input",15),m.NdJ("ngModelChange",(function(t){m.CHM(e);const s=m.oxw();return m.KtG(s.filterValue=t)})),m.qZA(),m.TgZ(8,"label",16),m._UZ(9,"span",17),m.TgZ(10,"span",18),m._UZ(11,"system-label",19),m.qZA()()(),m.TgZ(12,"span",14)(13,"input",20),m.NdJ("ngModelChange",(function(t){m.CHM(e);const s=m.oxw();return m.KtG(s.filterValue=t)})),m.qZA(),m.TgZ(14,"label",21),m._UZ(15,"span",17),m.TgZ(16,"span",18),m._UZ(17,"system-label",22),m.qZA()()(),m.TgZ(18,"span",14)(19,"input",23),m.NdJ("ngModelChange",(function(t){m.CHM(e);const s=m.oxw();return m.KtG(s.filterValue=t)})),m.qZA(),m.TgZ(20,"label",24),m._UZ(21,"span",17),m.TgZ(22,"span",18),m._UZ(23,"system-label",25),m.qZA()()()()(),m.TgZ(24,"div",26)(25,"button",27),m.NdJ("click",(function(){m.CHM(e);const t=m.oxw();return m.KtG(t.closePopover())})),m._UZ(26,"system-label",28),m.qZA()()()()}if(2&e){const e=m.oxw();m.Q6J("@animatepopover",void 0),m.xp6(7),m.Q6J("ngModel",e.filterValue),m.xp6(6),m.Q6J("ngModel",e.filterValue),m.xp6(6),m.Q6J("ngModel",e.filterValue)}}let V=(()=>{var e;class ObjectListViewFilterPanelFilterMyItems{constructor(e,t,s,n){(0,i.Z)(this,"renderer",void 0),(0,i.Z)(this,"elementRef",void 0),(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"modellist",void 0),(0,i.Z)(this,"onChange",void 0),(0,i.Z)(this,"onTouched",void 0),(0,i.Z)(this,"popover",void 0),(0,i.Z)(this,"showPopover",!1),(0,i.Z)(this,"_filterValue","all"),(0,i.Z)(this,"clickListener",null),this.renderer=e,this.elementRef=t,this.language=s,this.modellist=n}onClick(){if(!this.showPopover)return this.showPopover=!0,void(this.clickListener=this.renderer.listen("document","click",(e=>this.onDocumentClick(e))))}get filterValue(){return this._filterValue}set filterValue(e){this._filterValue=e,this.onChange(e)}closePopover(){this.showPopover=!1,this.clickListener&&this.clickListener()}onDocumentClick(e){if(this.showPopover){this.elementRef.nativeElement.contains(e.target)||this.closePopover()}}getPopoverStyle(){let e=this.elementRef.nativeElement.getBoundingClientRect(),t=this.popover.element.nativeElement.getBoundingClientRect();return{position:"fixed",top:e.top+(e.height-t.height)/2+"px",left:e.left-t.width-15+"px"}}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}writeValue(e){this._filterValue=e||""}}return e=ObjectListViewFilterPanelFilterMyItems,(0,i.Z)(ObjectListViewFilterPanelFilterMyItems,"ɵfac",(function(t){return new(t||e)(m.Y36(m.Qsj),m.Y36(m.SBq),m.Y36(g.d),m.Y36(y.t))})),(0,i.Z)(ObjectListViewFilterPanelFilterMyItems,"ɵcmp",m.Xpm({type:e,selectors:[["object-listview-filter-panel-filter-myitems"]],viewQuery:function(e,t){if(1&e&&m.Gf(H,7,m.s_b),2&e){let e;m.iGM(e=m.CRH())&&(t.popover=e.first)}},features:[m._Bn([{provide:l.JU,useExisting:(0,m.Gpc)((()=>e)),multi:!0}])],decls:10,vars:3,consts:[[1,"slds-list--vertical","slds-list--vertical-space"],[1,"slds-item","slds-hint-parent",3,"click"],[1,"slds-filters__item","slds-grid","slds-grid--vertical-align-center"],["href","javascript:void(0);",1,"slds-grow","slds-has-blur-focus"],[1,"slds-text-body--small"],["label","LBL_DISPLAY"],[3,"ngStyle"],["popover",""],["class","slds-popover slds-nubbin--right","role","dialog",4,"ngIf"],["role","dialog",1,"slds-popover","slds-nubbin--right"],[1,"slds-popover__body"],[1,"slds-form-element"],[1,"slds-form-element__legend","slds-form-element__label"],[1,"slds-form-element__control"],[1,"slds-radio"],["type","radio","id","radioall","name","scope","value","all",3,"ngModel","ngModelChange"],["for","radioall",1,"slds-radio__label"],[1,"slds-radio--faux"],[1,"slds-form-element__label"],["label","LBL_ALL"],["type","radio","id","radioown","name","scope","value","own",3,"ngModel","ngModelChange"],["for","radioown",1,"slds-radio__label"],["label","LBL_OWN"],["type","radio","id","radiocre","name","scope","value","creator",3,"ngModel","ngModelChange"],["for","radiocre",1,"slds-radio__label"],["label","LBL_CREATOR"],[1,"slds-text-align--right","slds-p-top--x-small"],["type","button",1,"slds-button","slds-button--brand","slds-button-space-left",3,"click"],["label","LBL_OK"]],template:function(e,t){1&e&&(m.TgZ(0,"ol",0)(1,"li",1),m.NdJ("click",(function(){return t.onClick()})),m.TgZ(2,"div",2)(3,"a",3)(4,"p",4),m._UZ(5,"system-label",5),m._uU(6),m.qZA()()()(),m.TgZ(7,"div",6,7),m.YNc(9,z,27,4,"div",8),m.qZA()()),2&e&&(m.xp6(6),m.hij(": ",t.language.getLabel("LBL_"+t.filterValue.toUpperCase()),""),m.xp6(1),m.Q6J("ngStyle",t.getPopoverStyle()),m.xp6(2),m.Q6J("ngIf",t.showPopover))},dependencies:[n.O5,n.PC,l.Fj,l._,l.JJ,l.On,S._],encapsulation:2,data:{animation:[(0,b.X$)("animatepopover",[(0,b.eR)(":enter",[(0,b.oB)({opacity:0}),(0,b.jt)(".25s",(0,b.oB)({opacity:1}))]),(0,b.eR)(":leave",[(0,b.oB)({opacity:"1"}),(0,b.jt)(".25s",(0,b.oB)({opacity:0}))])])]}})),ObjectListViewFilterPanelFilterMyItems})();var K=s(4044);function $(e,t){if(1&e){const e=m.EpF();m.TgZ(0,"ol",1)(1,"li",2),m.NdJ("click",(function(){m.CHM(e);const t=m.oxw();return m.KtG(t.onClick())})),m.TgZ(2,"div",3),m._UZ(3,"system-button-icon",4),m.TgZ(4,"p",5),m._uU(5),m.qZA()()()()}if(2&e){const e=m.oxw();m.xp6(5),m.hij(" ",e.geodata," ")}}let X=(()=>{var e;class ObjectListViewFilterPanelFilterGeo{constructor(e,t,s,n){(0,i.Z)(this,"model",void 0),(0,i.Z)(this,"modal",void 0),(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"geography",{}),(0,i.Z)(this,"geographyChange",new m.vpe),this.model=e,this.modal=t,this.language=s,this.metadata=n}get geoEnabled(){return!(!this.model||!this.model.module)&&this.metadata.getModuleDefs(this.model.module).ftsgeo}onClick(){this.modal.openModal("SpiceMapSelector").subscribe((e=>{this.hasGeogrpahy&&(e.instance.lat=this.geography.lat,e.instance.lng=this.geography.lng,e.instance._radius=this.geography.radius,e.instance.address=this.geography.address),e.instance.geoSearchemitter.subscribe((e=>{e?(this.geography.radius=e.radius,this.geography.lat=e.lat,this.geography.lng=e.lng,this.geography.address=e.address):this.geography={},this.geographyChange.emit(this.geography)}))}))}get hasGeogrpahy(){return!_.isEmpty(this.geography)}get geodata(){return this.hasGeogrpahy?this.geography.radius+"km around "+this.geography.address:"no geodata set"}}return e=ObjectListViewFilterPanelFilterGeo,(0,i.Z)(ObjectListViewFilterPanelFilterGeo,"ɵfac",(function(t){return new(t||e)(m.Y36(p.o),m.Y36(K.o),m.Y36(g.d),m.Y36(v.Pu))})),(0,i.Z)(ObjectListViewFilterPanelFilterGeo,"ɵcmp",m.Xpm({type:e,selectors:[["object-listview-filter-panel-filter-geo"]],inputs:{geography:"geography"},outputs:{geographyChange:"geographyChange"},decls:1,vars:1,consts:[["class","slds-list--vertical slds-list--vertical-space slds-p-vertical--x-small",4,"ngIf"],[1,"slds-list--vertical","slds-list--vertical-space","slds-p-vertical--x-small"],[1,"slds-item","slds-hint-parent","slds-text-link--reset",3,"click"],[1,"slds-filters__item","slds-grid"],["icon","world",1,"slds-p-right--x-small"],[1,"slds-text-body--small","slds-p-vertical--xxx-small"]],template:function(e,t){1&e&&m.YNc(0,$,6,1,"ol",0),2&e&&m.Q6J("ngIf",t.geoEnabled)},dependencies:[n.O5,w.J],encapsulation:2})),ObjectListViewFilterPanelFilterGeo})();var W=s(7720),ee=s(4505),te=s(1230),se=s(7617);const ie=["popover"];function ne(e,t){if(1&e&&(m.TgZ(0,"span"),m._UZ(1,"system-label",16),m._uU(2),m.qZA()),2&e){const e=m.oxw();m.xp6(2),m.hij(" ",e.interpretvalue(e.filterexpression.filtervalueto),"")}}function oe(e,t){if(1&e&&(m.TgZ(0,"option",30),m._UZ(1,"system-label",3),m.qZA()),2&e){const e=t.$implicit;m.Q6J("value",e.operator),m.xp6(1),m.Q6J("label",e.name)}}function le(e,t){if(1&e){const e=m.EpF();m.TgZ(0,"div",17)(1,"div",18)(2,"fieldset",19)(3,"system-filter-builder-expression-fields",20),m.NdJ("ngModelChange",(function(t){m.CHM(e);const s=m.oxw();return m.KtG(s.field=t)})),m.qZA(),m.TgZ(4,"div",5)(5,"label",21),m._UZ(6,"system-label",22),m.qZA(),m.TgZ(7,"div",6)(8,"div",23)(9,"select",24),m.NdJ("ngModelChange",(function(t){m.CHM(e);const s=m.oxw();return m.KtG(s.operator=t)})),m.YNc(10,oe,2,2,"option",25),m.qZA()()()(),m._UZ(11,"system-filter-builder-expression-values",26),m.qZA(),m.TgZ(12,"div",27)(13,"button",28),m.NdJ("click",(function(){m.CHM(e);const t=m.oxw();return m.KtG(t.closePopover())})),m._UZ(14,"system-label",29),m.qZA()()()()}if(2&e){const e=m.oxw();m.Q6J("@animatepopover",void 0),m.xp6(3),m.Q6J("module",e.module)("ngModel",e.field),m.xp6(6),m.Q6J("disabled",!e.filterexpression.field)("ngModel",e.operator),m.xp6(1),m.Q6J("ngForOf",e.operators[e.operatortype]),m.xp6(1),m.Q6J("operators",e.operators[e.operatortype])("operator",e.filterexpression.operator)("filterexpression",e.filterexpression)("module",e.module)("field",e.field)}}let ae=(()=>{var e;class ObjectListViewFilterPanelFilterItem extends W.H{constructor(e,t,s,n,o,l,a){super(e,t,s),(0,i.Z)(this,"backend",void 0),(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"elementRef",void 0),(0,i.Z)(this,"modellist",void 0),(0,i.Z)(this,"renderer",void 0),(0,i.Z)(this,"userpreferences",void 0),(0,i.Z)(this,"popover",void 0),(0,i.Z)(this,"showPopover",!1),(0,i.Z)(this,"clickListener",null),(0,i.Z)(this,"excludedFieldtypes",["link","relate","email"]),(0,i.Z)(this,"deleteItem",new m.vpe),this.backend=e,this.language=t,this.metadata=s,this.elementRef=n,this.modellist=o,this.renderer=l,this.userpreferences=a,this.module=this.modellist.module}get operatorLabel(){return this.operator?this.operators[this.operatortype].find((e=>e.operator==this.operator)).name:""}ngAfterViewInit(){this.field&&""!=this.field||this.openPopover()}ngOnDestroy(){this.clickListener&&this.clickListener()}onClick(){this.openPopover()}openPopover(){this.showPopover||(this.showPopover=!0)}onFocus(e){window.setTimeout((()=>{e.target.blur()}),250)}closePopover(){this.showPopover=!1}onDocumentClick(e){this.showPopover&&(this.elementRef.nativeElement.contains(e.target)||(this.showPopover=!1,this.clickListener()))}getPopoverStyle(){let e=this.elementRef.nativeElement.getBoundingClientRect(),t=this.popover.element.nativeElement.getBoundingClientRect();return{position:"fixed",top:e.top+(e.height-t.height)/2+"px",left:e.left-t.width-15+"px"}}getDisplayName(){return this.field?this.language.getFieldDisplayName(this.modellist.module,this.field):this.language.getLabel("LBL_NEW_FILTER")}deleteFilter(){this.deleteItem.emit(!0)}interpretvalue(e){try{switch(this.operators[this.operatortype].find((e=>e.operator==this.operator)).value1){case"date":return this.userpreferences.formatDate(e);case"integer":return this.userpreferences.formatMoney(parseInt(e,10));case"enum":return this.language.getFieldDisplayOptionValue(this.module,this.field,e);case"relate":if(!e)return"";let t=e.split("::");return t.length<2?e:t[1];case"multienum":let s=[],i=_.isArray(e)?e:e.split(",");for(let e of i)s.push(this.language.getFieldDisplayOptionValue(this.module,this.field,e));return s.join(", ");default:return e}}catch(t){return e}}}return e=ObjectListViewFilterPanelFilterItem,(0,i.Z)(ObjectListViewFilterPanelFilterItem,"ɵfac",(function(t){return new(t||e)(m.Y36(ee.y),m.Y36(g.d),m.Y36(v.Pu),m.Y36(m.SBq),m.Y36(y.t),m.Y36(m.Qsj),m.Y36(M.z))})),(0,i.Z)(ObjectListViewFilterPanelFilterItem,"ɵcmp",m.Xpm({type:e,selectors:[["object-listview-filter-panel-filter-item"]],viewQuery:function(e,t){if(1&e&&m.Gf(ie,7,m.s_b),2&e){let e;m.iGM(e=m.CRH())&&(t.popover=e.first)}},outputs:{deleteItem:"deleteItem"},features:[m.qOj],decls:18,vars:7,consts:[[1,"slds-filters__item","slds-m-vertical--xx-small","slds-grid","slds-grid--vertical-align-center"],["href","javascript:void(0);",1,"slds-grow","slds-has-blur-focus",3,"click","focus"],[1,"slds-text-body--small"],[3,"label"],[4,"ngIf"],[1,"slds-form-element"],[1,"slds-form-element__control"],[1,"slds-checkbox"],["type","checkbox","name","options","checked",""],[1,"slds-button","slds-button--icon","slds-button--icon-small",3,"click"],[3,"icon"],[1,"slds-assistive-text"],["label","LBL_REMOVE"],[3,"ngStyle"],["popover",""],["class","slds-popover slds-nubbin--right","role","dialog",4,"ngIf"],["label","LBL_AND"],["role","dialog",1,"slds-popover","slds-nubbin--right"],[1,"slds-popover__body"],[1,"slds-form--stacked"],[3,"module","ngModel","ngModelChange"],[1,"slds-form-element__label"],["label","LBL_OPERATOR"],[1,"slds-select_container"],[1,"slds-select",3,"disabled","ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[3,"operators","operator","filterexpression","module","field"],[1,"slds-text-align--right","slds-p-top--x-small","slds-has-divider--top"],["type","button",1,"slds-button","slds-button--brand","slds-button-space-left",3,"click"],["label","LBL_OK"],[3,"value"]],template:function(e,t){1&e&&(m.TgZ(0,"div",0)(1,"a",1),m.NdJ("click",(function(){return t.onClick()}))("focus",(function(e){return t.onFocus(e)})),m.TgZ(2,"p",2),m._uU(3),m._UZ(4,"system-label",3),m._uU(5),m.YNc(6,ne,3,1,"span",4),m.qZA()(),m.TgZ(7,"div",5)(8,"div",6)(9,"span",7),m._UZ(10,"input",8),m.qZA()()(),m.TgZ(11,"button",9),m.NdJ("click",(function(){return t.deleteFilter()})),m._UZ(12,"system-button-icon",10),m.TgZ(13,"span",11),m._UZ(14,"system-label",12),m.qZA()()(),m.TgZ(15,"div",13,14),m.YNc(17,le,15,11,"div",15),m.qZA()),2&e&&(m.xp6(3),m.hij("",t.getDisplayName()," "),m.xp6(1),m.Q6J("label",t.operatorLabel),m.xp6(1),m.hij(" ",t.interpretvalue(t.filterexpression.filtervalue)," "),m.xp6(1),m.Q6J("ngIf",t.filterexpression.filtervalueto),m.xp6(6),m.Q6J("icon","close"),m.xp6(3),m.Q6J("ngStyle",t.getPopoverStyle()),m.xp6(2),m.Q6J("ngIf",t.showPopover))},dependencies:[n.sg,n.O5,n.PC,l.YN,l.Kr,l.EJ,l.JJ,l.On,w.J,te.Y,se.w,S._],encapsulation:2,data:{animation:[(0,b.X$)("animatepopover",[(0,b.eR)(":enter",[(0,b.oB)({opacity:0}),(0,b.jt)(".25s",(0,b.oB)({opacity:1}))]),(0,b.eR)(":leave",[(0,b.oB)({opacity:"1"}),(0,b.jt)(".25s",(0,b.oB)({opacity:0}))])])]}})),ObjectListViewFilterPanelFilterItem})();function de(e,t){if(1&e){const e=m.EpF();m.TgZ(0,"object-listview-filter-panel-filter-item",26),m.NdJ("deleteItem",(function(){const t=m.CHM(e).index,s=m.oxw(2);return m.KtG(s.deleteItem(t))})),m.qZA()}if(2&e){const e=t.$implicit;m.Q6J("filterexpression",e)}}function re(e,t){if(1&e){const e=m.EpF();m.TgZ(0,"div",27)(1,"a",28),m.NdJ("click",(function(t){m.CHM(e);const s=m.oxw(2);return m.KtG(s.addExpression(t))})),m._UZ(2,"system-label",29),m.qZA(),m.TgZ(3,"a",30),m.NdJ("click",(function(){m.CHM(e);const t=m.oxw(2);return m.KtG(t.removeAllFilters())})),m._UZ(4,"system-label",31),m.qZA()()}}function ce(e,t){if(1&e&&(m.ynx(0),m.TgZ(1,"div",23),m.YNc(2,de,1,1,"object-listview-filter-panel-filter-item",24),m.qZA(),m.YNc(3,re,5,0,"div",25),m.BQk()),2&e){const e=m.oxw();m.xp6(2),m.Q6J("ngForOf",e.filter.conditions),m.xp6(1),m.Q6J("ngIf",e.canEdit)}}function ue(e,t){if(1&e){const e=m.EpF();m.TgZ(0,"div",33)(1,"a",28),m.NdJ("click",(function(t){m.CHM(e);const s=m.oxw(2);return m.KtG(s.addExpression(t))})),m._UZ(2,"system-label",29),m.qZA()()}}function he(e,t){if(1&e&&m.YNc(0,ue,3,0,"div",32),2&e){const e=m.oxw();m.Q6J("ngIf",e.canEdit)}}const me=function(e){return{"slds-hidden":e}};let ge=(()=>{var e;class ObjectListViewFilterPanel{constructor(e,t,s,n,o,l){(0,i.Z)(this,"elementRef",void 0),(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"modellist",void 0),(0,i.Z)(this,"model",void 0),(0,i.Z)(this,"renderer",void 0),(0,i.Z)(this,"filter",{logicaloperator:"and",groupscope:"all",geography:{},conditions:[]}),(0,i.Z)(this,"subcriptions",new G.w0),this.elementRef=e,this.language=t,this.metadata=s,this.modellist=n,this.model=o,this.renderer=l,this.subcriptions.add(this.modellist.listType$.subscribe((e=>{this.setFilter()})))}ngOnDestroy(){this.subcriptions.unsubscribe()}setFilter(){this.filter={...this.modellist.getFilterDefs()},this.filter&&!_.isEmpty(this.filter)||(this.filter={logicaloperator:"and",groupscope:"all",geography:{},conditions:[]})}get geography(){return this.filter.geography?this.filter.geography:{}}set geography(e){this.filter.geography=e}get isChanged(){return!_.isEqual(this.filter,this.modellist.getFilterDefs())}get canEdit(){return this.modellist.checkAccess("edit")}save(){this.isChanged&&(this.modellist.updateListType({filterdefs:JSON.stringify(this.filter)}).subscribe((()=>{this.modellist.reLoadList()})),this.modellist.displayFilters=!1)}cancel(){this.filter={...this.modellist.getFilterDefs()},this.modellist.displayFilters=!1}removeAllFilters(){this.filter.conditions=[]}addExpression(e){e.preventDefault(),e.stopPropagation();this.filter.conditions.push({field:"",operator:"",filtervalue:""})}deleteItem(e){this.filter.conditions.splice(e,1)}}return e=ObjectListViewFilterPanel,(0,i.Z)(ObjectListViewFilterPanel,"ɵfac",(function(t){return new(t||e)(m.Y36(m.SBq),m.Y36(g.d),m.Y36(v.Pu),m.Y36(y.t),m.Y36(p.o),m.Y36(m.Qsj))})),(0,i.Z)(ObjectListViewFilterPanel,"ɵcmp",m.Xpm({type:e,selectors:[["object-listview-filter-panel"]],hostAttrs:[1,"slds-is-fixed"],decls:24,vars:11,consts:[["system-to-bottom","",1,"slds-panel","slds-size--medium","slds-grid","slds-grid--vertical","slds-nowrap","slds-panel--filters","slds-size_medium"],[1,"slds-form--stacked","slds-grow","slds-scrollable--y","slds-grid","slds-grid--vertical"],[1,"slds-filters"],[1,"slds-filters__header","slds-grid","slds-grid--align-spread","slds-has-divider--bottom-space"],[1,"slds-align-middle","slds-text-heading--small"],["label","LBL_FILTER"],[1,"slds-button-group",3,"ngClass"],[1,"slds-button","slds-button--icon","slds-button_icon-border-filled",3,"click"],["icon","close"],[1,"slds-button","slds-button--icon","slds-button_icon-border-filled","slds-is-selected",3,"click"],["icon","check"],[1,"slds-p-around--xx-small"],[3,"ngModel","ngModelChange"],[3,"geography","geographyChange"],[1,"slds-grid","slds-p-around--xx-small"],[1,"slds-form-element__label"],["label","LBL_MATCHING"],["name","operator","value","and",3,"disabled","ngModel","ngModelChange"],["label","LBL_ALL"],["name","operator","value","or",3,"disabled","ngModel","ngModelChange"],["label","LBL_ANY"],[4,"ngIf","ngIfElse"],["nofilter",""],[1,"slds-grid_vertical"],[3,"filterexpression","deleteItem",4,"ngFor","ngForOf"],["class","slds-filters__footer slds-grid slds-shrink-none",4,"ngIf"],[3,"filterexpression","deleteItem"],[1,"slds-filters__footer","slds-grid","slds-shrink-none"],["href","javascript:void(0);",3,"click"],["label","LBL_ADDFILTER"],["href","javascript:void(0);",1,"slds-col--bump-left",3,"click"],["label","LBL_REMOVEALL"],["class","slds-p-around--small slds-align--absolute-center",4,"ngIf"],[1,"slds-p-around--small","slds-align--absolute-center"]],template:function(e,t){if(1&e&&(m.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h4",4),m._UZ(5,"system-label",5),m.qZA(),m.TgZ(6,"div",6)(7,"button",7),m.NdJ("click",(function(){return t.cancel()})),m._UZ(8,"system-button-icon",8),m.qZA(),m.TgZ(9,"button",9),m.NdJ("click",(function(){return t.save()})),m._UZ(10,"system-button-icon",10),m.qZA()()(),m.TgZ(11,"div",11)(12,"object-listview-filter-panel-filter-myitems",12),m.NdJ("ngModelChange",(function(e){return t.filter.groupscope=e})),m.qZA(),m.TgZ(13,"object-listview-filter-panel-filter-geo",13),m.NdJ("geographyChange",(function(e){return t.geography=e})),m.qZA(),m.TgZ(14,"div",14)(15,"label",15),m._UZ(16,"system-label",16),m.qZA(),m.TgZ(17,"system-input-radio",17),m.NdJ("ngModelChange",(function(e){return t.filter.logicaloperator=e})),m._UZ(18,"system-label",18),m.qZA(),m.TgZ(19,"system-input-radio",19),m.NdJ("ngModelChange",(function(e){return t.filter.logicaloperator=e})),m._UZ(20,"system-label",20),m.qZA()(),m.YNc(21,ce,4,2,"ng-container",21),m.YNc(22,he,1,1,"ng-template",null,22,m.W1O),m.qZA()()()()),2&e){const e=m.MAs(23);m.xp6(6),m.Q6J("ngClass",m.VKq(9,me,!t.isChanged)),m.xp6(6),m.Q6J("ngModel",t.filter.groupscope),m.xp6(1),m.Q6J("geography",t.geography),m.xp6(4),m.Q6J("disabled",!t.canEdit)("ngModel",t.filter.logicaloperator),m.xp6(2),m.Q6J("disabled",!t.canEdit)("ngModel",t.filter.logicaloperator),m.xp6(2),m.Q6J("ngIf",t.filter.conditions.length>0)("ngIfElse",e)}},dependencies:[n.mk,n.sg,n.O5,l.JJ,l.On,w.J,P.A,S._,E.H,V,X,ae],encapsulation:2})),ObjectListViewFilterPanel})();var pe=s(3278);let fe=(()=>{var e;class ObjectListViewSettings{constructor(e,t,s,n,o,l,a){(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"elementRef",void 0),(0,i.Z)(this,"modal",void 0),(0,i.Z)(this,"modellist",void 0),(0,i.Z)(this,"renderer",void 0),(0,i.Z)(this,"injector",void 0),(0,i.Z)(this,"toast",void 0),this.language=e,this.elementRef=t,this.modal=s,this.modellist=n,this.renderer=o,this.injector=l,this.toast=a}add(){this.modal.openModal("ObjectListViewSettingsAddlistModal",!0,this.injector).subscribe((e=>{e.instance.modalmode="add"}))}edit(){if(!this.modellist.checkAccess("edit"))return!1;this.modal.openModal("ObjectListViewSettingsAddlistModal",!0,this.injector).subscribe((e=>{e.instance.modalmode="edit"}))}save(){this.modellist.updateListType().subscribe((e=>{this.toast.sendToast("List Saved")}))}setfields(){if(!this.modellist.checkAccess("edit"))return!1;this.modal.openModal("ObjectListViewSettingsSetfieldsModal",!0,this.injector)}delete(){if(!this.modellist.checkAccess("delete"))return!1;this.modal.prompt("confirm",this.language.getLabel("MSG_DELETE_RECORD",void 0,"long"),this.language.getLabel("MSG_DELETE_RECORD")).subscribe((e=>{e&&this.modellist.deleteListType()}))}}return e=ObjectListViewSettings,(0,i.Z)(ObjectListViewSettings,"ɵfac",(function(t){return new(t||e)(m.Y36(g.d),m.Y36(m.SBq),m.Y36(K.o),m.Y36(y.t),m.Y36(m.Qsj),m.Y36(m.zs3),m.Y36(pe.A))})),(0,i.Z)(ObjectListViewSettings,"ɵcmp",m.Xpm({type:e,selectors:[["object-listview-settings"]],decls:29,vars:4,consts:[[1,"slds-dropdown-trigger","slds-dropdown-trigger--click","slds-m-horizontal--xxx-small",3,"system-dropdown-trigger-simple"],["system-title","LBL_SETTING",1,"slds-button","slds-button--icon","slds-button--icon-border","slds-button--neutral"],["icon","settings"],["icon","down","size","x-small"],[1,"slds-dropdown","slds-dropdown--right"],["role","menu",1,"slds-dropdown__list"],["role","separator",1,"slds-dropdown__header"],[1,"slds-text-title--caps"],["label","LBL_SETTINGS"],["role","presentation",1,"slds-dropdown__item"],["role","menuitem",3,"click"],[1,"slds-truncate"],["icon","add","size","x-small",1,"slds-p-right--xx-small"],["label","LBL_NEW"],["icon","edit","size","x-small",1,"slds-p-right--xx-small"],["label","LBL_EDIT"],["icon","save","size","x-small",1,"slds-p-right--xx-small"],["label","LBL_SAVE"],["icon","delete","size","x-small",1,"slds-p-right--xx-small"],["label","LBL_DELETE"]],template:function(e,t){1&e&&(m.TgZ(0,"div",0)(1,"button",1),m._UZ(2,"system-button-icon",2)(3,"system-button-icon",3),m.qZA(),m.TgZ(4,"div",4)(5,"ul",5)(6,"li",6)(7,"span",7),m._UZ(8,"system-label",8),m.qZA()(),m.TgZ(9,"li",9)(10,"a",10),m.NdJ("click",(function(){return t.add()})),m.TgZ(11,"span",11),m._UZ(12,"system-utility-icon",12)(13,"system-label",13),m.qZA()()(),m.TgZ(14,"li",9)(15,"a",10),m.NdJ("click",(function(){return t.edit()})),m.TgZ(16,"span",11),m._UZ(17,"system-utility-icon",14)(18,"system-label",15),m.qZA()()(),m.TgZ(19,"li",9)(20,"a",10),m.NdJ("click",(function(){return t.save()})),m.TgZ(21,"span",11),m._UZ(22,"system-utility-icon",16)(23,"system-label",17),m.qZA()()(),m.TgZ(24,"li",9)(25,"a",10),m.NdJ("click",(function(){return t.delete()})),m.TgZ(26,"span",11),m._UZ(27,"system-utility-icon",18)(28,"system-label",19),m.qZA()()()()()()),2&e&&(m.Q6J("system-dropdown-trigger-simple",t.modellist.isLoading),m.xp6(15),m.uIk("aria-disabled",!t.modellist.checkAccess("edit")),m.xp6(5),m.uIk("aria-disabled",!t.modellist.checkAccess("edit")),m.xp6(5),m.uIk("aria-disabled",!t.modellist.checkAccess("delete")))},dependencies:[w.J,S._,C.r,J.w,k.S],encapsulation:2})),ObjectListViewSettings})();function be(e,t){1&e&&m._UZ(0,"object-listview-filter-panel"),2&e&&m.Q6J("@animatepanel",void 0)}function ve(e,t){1&e&&m._UZ(0,"object-listview-aggregates-panel"),2&e&&m.Q6J("@animatepanel",void 0)}const Ze=function(e){return{"slds-has-error":e}};let _e=(()=>{var e;class ObjectListViewHeader{constructor(e,t,s,n,o,l){(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"configuration",void 0),(0,i.Z)(this,"modellist",void 0),(0,i.Z)(this,"layout",void 0),(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"model",void 0),(0,i.Z)(this,"actionSet",{}),(0,i.Z)(this,"searchTimeOut",void 0),(0,i.Z)(this,"searchTermError",!1),this.metadata=e,this.configuration=t,this.modellist=s,this.layout=n,this.language=o,this.model=l;let a=this.metadata.getComponentConfig("ObjectListViewHeader",this.model.module);this.actionSet=a.actionset}set searchTerm(e){e!=this.modellist.searchTerm&&(this.modellist.searchTerm=e,""==e||this.searchTermsValid(e)?(this.searchTermError=!1,this.reloadList()):(this.searchTimeOut&&window.clearTimeout(this.searchTimeOut),this.searchTermError=!0))}get searchTerm(){return this.modellist.searchTerm}searchTermsValid(e){let t=this.configuration.getCapabilityConfig("search"),s=t.min_ngram?parseInt(t.min_ngram,10):3,i=t.max_ngram?parseInt(t.max_ngram,10):20;return 0==e.split(" ").filter((e=>e.length<s||e.length>i)).length}clearSearchTerm(){this.searchTerm=""}reloadList(){this.searchTimeOut&&window.clearTimeout(this.searchTimeOut),this.searchTimeOut=window.setTimeout((()=>this.modellist.reLoadList()),1e3)}}return e=ObjectListViewHeader,(0,i.Z)(ObjectListViewHeader,"ɵfac",(function(t){return new(t||e)(m.Y36(v.Pu),m.Y36(Z.C),m.Y36(y.t),m.Y36(x.b),m.Y36(g.d),m.Y36(p.o))})),(0,i.Z)(ObjectListViewHeader,"ɵcmp",m.Xpm({type:e,selectors:[["object-listview-header"]],decls:24,vars:13,consts:[["role","banner",1,"slds-page-header","slds-page-header--object-home"],[1,"slds-grid","slds-grid--align-spread","slds-p-bottom--xx-small","slds-wrap"],[1,"slds-grid","slds-grid--vertical-align-center","slds-grow"],[1,"slds-grid","slds-grid--vertical-align-center","slds-no-space"],[3,"module"],[1,"slds-form-element","slds-grow",3,"ngClass"],[1,"slds-form-element__control","slds-input-has-icon","slds-input-has-icon--left-right"],["icon","search","size","x-small","addclasses","slds-icon slds-input__icon slds-input__icon_left"],["system-autofocus","","type","search",1,"slds-input","slds-lookup__search-input",3,"placeholder","ngModel","ngModelChange","keyup.enter"],[1,"slds-button","slds-button_icon","slds-input__icon","slds-input__icon_right",3,"disabled","click"],["icon","clear"],[1,"slds-grid","slds-grid--vertical-align-center","slds-grow","slds-grid--align-end","slds-p-left--small"],[1,"slds-col","slds-no-flex","slds-grid","slds-align-bottom","slds-p-left--small"],[1,"slds-show--medium"],["system-title","LBL_RELOAD",1,"slds-button","slds-button--neutral","slds-button--icon-border","slds-m-horizontal--xxx-small",3,"click"],[3,"icon"],[1,"slds-m-left--xx-small",3,"actionset"],[4,"ngIf"]],template:function(e,t){1&e&&(m.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),m._UZ(4,"system-icon",4)(5,"object-list-types"),m.qZA(),m.TgZ(6,"div",5)(7,"div",6),m._UZ(8,"system-utility-icon",7),m.TgZ(9,"input",8),m.NdJ("ngModelChange",(function(e){return t.searchTerm=e}))("keyup.enter",(function(){return t.reloadList()})),m.qZA(),m.TgZ(10,"button",9),m.NdJ("click",(function(){return t.clearSearchTerm()})),m._UZ(11,"system-button-icon",10),m.qZA()()()(),m.TgZ(12,"div",11),m._UZ(13,"object-listview-header-details"),m.TgZ(14,"div",12),m._UZ(15,"object-listview-settings",13)(16,"object-listview-header-list-selector"),m.TgZ(17,"button",14),m.NdJ("click",(function(){return t.modellist.reLoadList()})),m._UZ(18,"system-button-icon",15),m.qZA(),m._UZ(19,"object-listview-aggregates-button",13)(20,"object-listview-filter-button",13),m.qZA(),m._UZ(21,"object-action-container",16),m.qZA()()(),m.YNc(22,be,1,1,"object-listview-filter-panel",17),m.YNc(23,ve,1,1,"object-listview-aggregates-panel",17)),2&e&&(m.xp6(4),m.Q6J("module",t.model.module),m.xp6(2),m.Q6J("ngClass",m.VKq(11,Ze,t.searchTermError)),m.xp6(3),m.Q6J("placeholder",t.language.getModuleCombinedLabel("LBL_SEARCH",t.model.module))("ngModel",t.searchTerm),m.xp6(1),m.Q6J("disabled",!t.searchTerm),m.xp6(2),m.ekj("slds-m-top--x-small","small"==t.layout.screenwidth),m.xp6(6),m.Q6J("icon",t.modellist.isLoading?"close":"refresh"),m.xp6(3),m.Q6J("actionset",t.actionSet),m.xp6(1),m.Q6J("ngIf",t.modellist.displayFilters),m.xp6(1),m.Q6J("ngIf",t.modellist.displayAggregates))},dependencies:[n.mk,n.O5,l.Fj,l.JJ,l.On,w.J,T.f,C.r,A.m,k.S,L.l,I.M,N,F.S,q.X,j,B,ge,fe],encapsulation:2,data:{animation:[(0,b.X$)("animatepanel",[(0,b.eR)(":enter",[(0,b.oB)({right:"-320px",overflow:"hidden"}),(0,b.jt)(".5s",(0,b.oB)({right:"0px"})),(0,b.oB)({overflow:"unset"})]),(0,b.eR)(":leave",[(0,b.oB)({overflow:"hidden"}),(0,b.jt)(".5s",(0,b.oB)({right:"-320px"}))])])]}})),ObjectListViewHeader})();var ye=s(7228),xe=s(3369),we=s(2032),Te=s(7017);const Ce=["container"];let Ae=(()=>{var e;class ObjectListViewContainer{constructor(e,t,s,n,o){(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"broadcast",void 0),(0,i.Z)(this,"navigation",void 0),(0,i.Z)(this,"navigationtab",void 0),(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"container",void 0),(0,i.Z)(this,"moduleName",""),(0,i.Z)(this,"initialized",!1),(0,i.Z)(this,"componentRefs",[]),(0,i.Z)(this,"componentSubscriptions",new G.w0),this.metadata=e,this.broadcast=t,this.navigation=s,this.navigationtab=n,this.language=o,this.componentSubscriptions.add(this.navigationtab.activeRoute$.subscribe((e=>{this.moduleName=e.params.module,this.moduleName||(this.moduleName=e.path.split("/").pop(),this.navigationtab.activeRoute.params.module=this.moduleName),this.navigationtab.setTabInfo({displaymodule:this.moduleName,displayname:this.metadata.getModuleDefs(this.moduleName).module_label}),this.initialized&&this.buildContainer()}))),this.componentSubscriptions.add(this.broadcast.message$.subscribe((e=>{this.handleMessage(e)})))}ngAfterViewInit(){this.initialized=!0,this.buildContainer()}ngOnDestroy(){for(let e of this.componentRefs)e.destroy();this.componentSubscriptions.unsubscribe()}buildContainer(){for(let e of this.componentRefs)e.destroy();this.componentRefs=[];let e=this.metadata.getComponentConfig("ObjectListViewContainer",this.moduleName);for(let t of this.metadata.getComponentSetObjects(e.componentset))this.metadata.addComponent(t.component,this.container).subscribe((e=>{t.componentconfig&&Object.keys(t.componentconfig).length>0?e.instance.componentconfig=t.componentconfig:e.instance.componentconfig=this.metadata.getComponentConfig(t.component,this.moduleName),this.componentRefs.push(e)}))}handleMessage(e){if("applauncher.setrole"===e.messagetype)this.buildContainer()}}return e=ObjectListViewContainer,(0,i.Z)(ObjectListViewContainer,"ɵfac",(function(t){return new(t||e)(m.Y36(v.Pu),m.Y36(xe.f),m.Y36(we.G),m.Y36(Te.d),m.Y36(g.d))})),(0,i.Z)(ObjectListViewContainer,"ɵcmp",m.Xpm({type:e,selectors:[["object-listview-container"]],viewQuery:function(e,t){if(1&e&&m.Gf(Ce,7,m.s_b),2&e){let e;m.iGM(e=m.CRH())&&(t.container=e.first)}},decls:2,vars:0,consts:[["container",""]],template:function(e,t){1&e&&m._UZ(0,"div",null,0)},encapsulation:2})),ObjectListViewContainer})();var ke=s(3194);const Le=["container"];let Ie=(()=>{var e;class ObjectListView{constructor(e,t,s,n,o,l,a){(0,i.Z)(this,"navigation",void 0),(0,i.Z)(this,"navigationtab",void 0),(0,i.Z)(this,"activatedRoute",void 0),(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"modellist",void 0),(0,i.Z)(this,"model",void 0),(0,i.Z)(this,"userpreferences",void 0),(0,i.Z)(this,"container",void 0),(0,i.Z)(this,"componentRefs",[]),(0,i.Z)(this,"viewInitialized",!1),(0,i.Z)(this,"modellistSubscription",new G.w0),this.navigation=e,this.navigationtab=t,this.activatedRoute=s,this.metadata=n,this.modellist=o,this.model=l,this.userpreferences=a,this.initialize()}initialize(){this.model.module=this.navigationtab.activeRoute.params.module,this.modellist.initialize(this.model.module),this.modellistSubscription=this.modellist.listTypeComponent$.subscribe((()=>this.handleListTypeChange()))}handleListTypeChange(){this.viewInitialized&&this.buildContainer()}ngAfterViewInit(){this.viewInitialized=!0,this.buildContainer()}ngOnDestroy(){this.modellistSubscription.unsubscribe()}buildContainer(){if(this.modellist.currentList?.listcomponent){for(let e of this.componentRefs)e.destroy();this.metadata.addComponent(this.modellist.currentList?.listcomponent,this.container).subscribe((e=>{this.componentRefs.push(e)}))}}}return e=ObjectListView,(0,i.Z)(ObjectListView,"ɵfac",(function(t){return new(t||e)(m.Y36(we.G),m.Y36(Te.d),m.Y36(a.gz),m.Y36(v.Pu),m.Y36(y.t),m.Y36(p.o),m.Y36(M.z))})),(0,i.Z)(ObjectListView,"ɵcmp",m.Xpm({type:e,selectors:[["object-listview"]],viewQuery:function(e,t){if(1&e&&m.Gf(Le,7,m.s_b),2&e){let e;m.iGM(e=m.CRH())&&(t.container=e.first)}},features:[m._Bn([y.t,p.o])],decls:4,vars:0,consts:[["system-to-bottom-noscroll",""],["container",""]],template:function(e,t){1&e&&(m._UZ(0,"object-listview-header"),m.TgZ(1,"div",0),m._UZ(2,"div",null,1),m.qZA())},dependencies:[ke.t,_e],encapsulation:2})),ObjectListView})();var Me=s(2667),Se=s(6059),Je=s(201),Oe=s(1802);let Ne=(()=>{var e;class ObjectListHeaderActionsAssignButton{constructor(e,t,s,n,o,l){(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"model",void 0),(0,i.Z)(this,"modellist",void 0),(0,i.Z)(this,"modal",void 0),(0,i.Z)(this,"injector",void 0),(0,i.Z)(this,"actionconfig",{}),(0,i.Z)(this,"hidden",!1),this.language=e,this.metadata=t,this.model=s,this.modellist=n,this.modal=o,this.injector=l}get disabled(){return!this.metadata.checkModuleAcl(this.model.module,"edit")||this.modellist.getSelectedCount()<1||this.modellist.getSelectedCount()>this.maxAllowed}get selectedCount(){return this.modellist.getSelectedCount()}get maxAllowed(){return this.actionconfig.maxAllowed?parseInt(this.actionconfig.maxAllowed,10):50}execute(){if(!this.disabled){this.modellist.getSelectedItems().filter((e=>!e.acl?.edit)).length>0?this.modal.info(this.language.getLabel("MSG_NO_EDIT_RIGHTS",null,"long"),this.language.getLabel("MSG_NO_EDIT_RIGHTS")):this.modal.openModal("ObjectListHeaderActionsAssignModal",!0,this.injector)}}}return e=ObjectListHeaderActionsAssignButton,(0,i.Z)(ObjectListHeaderActionsAssignButton,"ɵfac",(function(t){return new(t||e)(m.Y36(g.d),m.Y36(v.Pu),m.Y36(p.o),m.Y36(y.t),m.Y36(K.o),m.Y36(m.zs3))})),(0,i.Z)(ObjectListHeaderActionsAssignButton,"ɵcmp",m.Xpm({type:e,selectors:[["object-list-header-actions-assign-button"]],decls:3,vars:1,consts:[["label","LBL_ASSIGN"]],template:function(e,t){1&e&&(m.TgZ(0,"span"),m._UZ(1,"system-label",0),m._uU(2),m.qZA()),2&e&&(m.xp6(2),m.hij(" (",t.selectedCount,")"))},dependencies:[S._],encapsulation:2})),ObjectListHeaderActionsAssignButton})();var Fe=s(2294),qe=s(3634),Ee=s(9621),Ye=s(3499),De=s(5767),Qe=s(1916);let Ue=(()=>{var e;class ObjectListHeaderActionsAssignModal{constructor(e,t,s,n,o,l,a){(0,i.Z)(this,"view",void 0),(0,i.Z)(this,"broadcast",void 0),(0,i.Z)(this,"backend",void 0),(0,i.Z)(this,"toast",void 0),(0,i.Z)(this,"modal",void 0),(0,i.Z)(this,"model",void 0),(0,i.Z)(this,"modellist",void 0),(0,i.Z)(this,"self",{}),(0,i.Z)(this,"submitting",!1),this.view=e,this.broadcast=t,this.backend=s,this.toast=n,this.modal=o,this.model=l,this.modellist=a}ngOnInit(){this.model.module=this.modellist.module,this.model.initialize(),this.view.isEditable=!0,this.view.setEditMode()}close(){this.self.destroy()}get canSubmit(){return!this.submitting&&this.model.getField("assigned_user_id")}reassign(){this.submitting=!0;let e=this.modellist.getSelectedIDs(),t={assigned_user_id:this.model.getField("assigned_user_id"),ids:e},s=this.modal.await("updating");this.backend.postRequest(`module/${this.model.module}/massupdate/assign`,{},t).subscribe((e=>{if(e.success){for(let t of e.data)this.broadcast.broadcastMessage("model.save",{id:t.id,module:this.model.module,data:t});this.close()}else this.toast.sendToast("ERROR reassigning records","error"),this.submitting=!1;s.emit(!0)}),(e=>{this.toast.sendToast("ERROR reassigning records","error"),this.submitting=!1,s.emit(!0)}))}}return e=ObjectListHeaderActionsAssignModal,(0,i.Z)(ObjectListHeaderActionsAssignModal,"ɵfac",(function(t){return new(t||e)(m.Y36(Fe.e),m.Y36(xe.f),m.Y36(ee.y),m.Y36(pe.A),m.Y36(K.o),m.Y36(p.o),m.Y36(y.t))})),(0,i.Z)(ObjectListHeaderActionsAssignModal,"ɵcmp",m.Xpm({type:e,selectors:[["object-list-header-actions-assign-modal"]],features:[m._Bn([p.o,Fe.e])],decls:10,vars:1,consts:[["size","small"],[3,"close"],["label","LBL_ASSIGN"],["system-modal-overvlow-visible","",2,"overflow","visible"],["field","assigned_user_name"],[1,"slds-button","slds-button--neutral",3,"click"],["label","LBL_CANCEL"],[1,"slds-button","slds-button--brand",3,"disabled","click"]],template:function(e,t){1&e&&(m.TgZ(0,"system-modal",0)(1,"system-modal-header",1),m.NdJ("close",(function(){return t.close()})),m._UZ(2,"system-label",2),m.qZA(),m.TgZ(3,"system-modal-content",3),m._UZ(4,"field-container",4),m.qZA(),m.TgZ(5,"system-modal-footer")(6,"button",5),m.NdJ("click",(function(){return t.close()})),m._UZ(7,"system-label",6),m.qZA(),m.TgZ(8,"button",7),m.NdJ("click",(function(){return t.reassign()})),m._UZ(9,"system-label",2),m.qZA()()()),2&e&&(m.xp6(8),m.Q6J("disabled",!t.canSubmit))},dependencies:[qe.j,S._,Ee.j,Ye.x,De.p,Qe.y],encapsulation:2})),ObjectListHeaderActionsAssignModal})(),Re=(()=>{var e;class ObjectListHeaderActionsDeleteButton{constructor(e,t,s,n,o,l,a,d){(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"model",void 0),(0,i.Z)(this,"modellist",void 0),(0,i.Z)(this,"modal",void 0),(0,i.Z)(this,"backend",void 0),(0,i.Z)(this,"broadcast",void 0),(0,i.Z)(this,"toast",void 0),(0,i.Z)(this,"actionconfig",{}),(0,i.Z)(this,"hidden",!0),this.language=e,this.metadata=t,this.model=s,this.modellist=n,this.modal=o,this.backend=l,this.broadcast=a,this.toast=d,this.metadata.checkModuleAcl(this.model.module,"delete")&&(this.hidden=!1)}get disabled(){return!this.metadata.checkModuleAcl(this.model.module,"delete")||this.modellist.getSelectedCount()<1||this.modellist.getSelectedCount()>this.maxAllowed}get selectedCount(){return this.modellist.getSelectedCount()}get maxAllowed(){return this.actionconfig.maxAllowed?parseInt(this.actionconfig.maxAllowed,10):100}execute(){if(!this.disabled){this.modellist.getSelectedItems().filter((e=>!e.acl?.delete)).length>0?this.modal.info(this.language.getLabel("MSG_NO_EDIT_RIGHTS",null,"long"),this.language.getLabel("MSG_NO_EDIT_RIGHTS")):this.modal.confirm(this.language.getLabelFormatted("MSG_DELETE_RECORDS",[this.modellist.getSelectedCount()],"long"),this.language.getLabel("MSG_DELETE_RECORDS")).subscribe((e=>{if(e){let e=this.modal.await("... processing ..."),t={ids:this.modellist.getSelectedIDs(),action:"DELETE"};this.backend.patchRequest(`module/${this.model.module}`,{},t).subscribe((t=>{for(let e of this.modellist.getSelectedIDs())this.broadcast.broadcastMessage("model.delete",{id:e,module:this.model.module});e.emit(!0)}),(()=>{this.toast.sendToast("ERROR deleting records","error"),e.emit(!0)}))}}))}}}return e=ObjectListHeaderActionsDeleteButton,(0,i.Z)(ObjectListHeaderActionsDeleteButton,"ɵfac",(function(t){return new(t||e)(m.Y36(g.d),m.Y36(v.Pu),m.Y36(p.o),m.Y36(y.t),m.Y36(K.o),m.Y36(ee.y),m.Y36(xe.f),m.Y36(pe.A))})),(0,i.Z)(ObjectListHeaderActionsDeleteButton,"ɵcmp",m.Xpm({type:e,selectors:[["object-list-header-actions-delete-button"]],decls:3,vars:1,consts:[["label","LBL_DELETE"]],template:function(e,t){1&e&&(m.TgZ(0,"span"),m._UZ(1,"system-label",0),m._uU(2),m.qZA()),2&e&&(m.xp6(2),m.hij(" (",t.selectedCount,")"))},dependencies:[S._],encapsulation:2})),ObjectListHeaderActionsDeleteButton})(),je=(()=>{var e;class ObjectListHeaderActionsMergeButton{constructor(e,t,s,n,o,l){(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"model",void 0),(0,i.Z)(this,"modellist",void 0),(0,i.Z)(this,"modal",void 0),(0,i.Z)(this,"injector",void 0),(0,i.Z)(this,"actionconfig",{}),(0,i.Z)(this,"hidden",!1),this.language=e,this.metadata=t,this.model=s,this.modellist=n,this.modal=o,this.injector=l}get disabled(){return!this.metadata.checkModuleAcl(this.model.module,"delete")||this.modellist.getSelectedCount()<1||this.modellist.getSelectedCount()>this.maxAllowed}get maxAllowed(){return this.actionconfig.maxAllowed?parseInt(this.actionconfig.maxAllowed,10):3}get mergeCount(){return this.modellist.getSelectedCount()}execute(){if(!this.disabled){this.modellist.getSelectedItems().filter((e=>e.acl?.delete)).length<this.modellist.getSelectedCount()-1?this.modal.info(this.language.getLabel("MSG_NO_MERGE_DELETE",null,"long"),this.language.getLabel("MSG_NO_MERGE_DELETE")):this.modal.openModal("ObjectMergeModal",!0,this.injector).subscribe((e=>{e.instance.mergemodels=this.modellist.getSelectedItems()}))}}}return e=ObjectListHeaderActionsMergeButton,(0,i.Z)(ObjectListHeaderActionsMergeButton,"ɵfac",(function(t){return new(t||e)(m.Y36(g.d),m.Y36(v.Pu),m.Y36(p.o),m.Y36(y.t),m.Y36(K.o),m.Y36(m.zs3))})),(0,i.Z)(ObjectListHeaderActionsMergeButton,"ɵcmp",m.Xpm({type:e,selectors:[["object-list-header-actions-merge-button"]],decls:3,vars:1,consts:[["label","LBL_MERGE"]],template:function(e,t){1&e&&(m.TgZ(0,"span"),m._UZ(1,"system-label",0),m._uU(2),m.qZA()),2&e&&(m.xp6(2),m.hij(" (",t.mergeCount,")"))},dependencies:[S._],encapsulation:2})),ObjectListHeaderActionsMergeButton})(),Be=(()=>{var e;class ObjectListHeaderActionsExportCSVButton{constructor(e,t,s,n,o,l){(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"model",void 0),(0,i.Z)(this,"modellist",void 0),(0,i.Z)(this,"modal",void 0),(0,i.Z)(this,"injector",void 0),(0,i.Z)(this,"hidden",!1),this.language=e,this.metadata=t,this.model=s,this.modellist=n,this.modal=o,this.injector=l}get disabled(){return!this.metadata.checkModuleAcl(this.model.module,"export")||0==this.modellist.getSelectedCount()}get exportcount(){let e=this.modellist.getSelectedCount();return e||this.modellist.listData.totalcount}execute(){this.disabled||this.modal.openModal("ObjectListHeaderActionsExportCSVSelectFields",!0,this.injector)}}return e=ObjectListHeaderActionsExportCSVButton,(0,i.Z)(ObjectListHeaderActionsExportCSVButton,"ɵfac",(function(t){return new(t||e)(m.Y36(g.d),m.Y36(v.Pu),m.Y36(p.o),m.Y36(y.t),m.Y36(K.o),m.Y36(m.zs3))})),(0,i.Z)(ObjectListHeaderActionsExportCSVButton,"ɵcmp",m.Xpm({type:e,selectors:[["object-list-header-actions-export-csv-button"]],decls:3,vars:1,consts:[["label","LBL_EXPORT"]],template:function(e,t){1&e&&(m.TgZ(0,"span"),m._UZ(1,"system-label",0),m._uU(2),m.qZA()),2&e&&(m.xp6(2),m.hij(" (",t.exportcount,")"))},dependencies:[S._],encapsulation:2})),ObjectListHeaderActionsExportCSVButton})();var Ge=s(7674);function Pe(e,t){if(1&e){const e=m.EpF();m.TgZ(0,"div",15),m.NdJ("click",(function(){const t=m.CHM(e).$implicit,s=m.oxw();return m.KtG(s.selectField("available",t))})),m.TgZ(1,"span",16),m._UZ(2,"system-label-fieldname",17),m._uU(3),m.qZA()()}if(2&e){const e=t.$implicit,s=m.oxw();m.Q6J("cdkDragData",e),m.uIk("aria-selected",s.isSelected("available",e)),m.xp6(2),m.Q6J("module",s.model.module)("field",e),m.xp6(1),m.hij(" (",e,")")}}function He(e,t){if(1&e){const e=m.EpF();m.TgZ(0,"div",15),m.NdJ("click",(function(){const t=m.CHM(e).$implicit,s=m.oxw();return m.KtG(s.selectField("list",t))})),m.TgZ(1,"span",16),m._UZ(2,"system-label-fieldname",17),m._uU(3),m.qZA()()}if(2&e){const e=t.$implicit,s=m.oxw();m.Q6J("cdkDragData",e),m.uIk("aria-selected",s.isSelected("list",e)),m.xp6(2),m.Q6J("module",s.model.module)("field",e),m.xp6(1),m.hij(" (",e,")")}}const ze=function(e){return[e]};let Ve=(()=>{var e;class ObjectListHeaderActionsExportCSVSelectFields{constructor(e,t,s,n,o){(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"model",void 0),(0,i.Z)(this,"modellist",void 0),(0,i.Z)(this,"modal",void 0),(0,i.Z)(this,"self",void 0),(0,i.Z)(this,"multiselect",!0),(0,i.Z)(this,"selectedAvailableFields",[]),(0,i.Z)(this,"selectedListFields",[]),(0,i.Z)(this,"availableFields",[]),(0,i.Z)(this,"exportFields",[]),this.language=e,this.metadata=t,this.model=s,this.modellist=n,this.modal=o,this.exportFields=[];for(let e of this.modellist.listfields)this.exportFields.push(e.field);let l=this.metadata.getComponentConfig("ObjectListHeaderActionsExportCSVSelectFields",this.model.module);if(l.enableall){let e=this.metadata.getModuleFields(this.model.module);for(let t in e)this.isExportable(e[t])&&-1==this.exportFields.indexOf(t)&&this.availableFields.push(t)}else if(l.fieldset){let e=this.metadata.getFieldSetFields(l.fieldset);for(let t of e)this.isExportable(t)&&-1==this.exportFields.indexOf(t.field)&&this.availableFields.push(t.field)}else{let e=this.metadata.getComponentConfig("ObjectList",this.modellist.module),t=this.metadata.getFieldSetFields(e.fieldset);for(let e of t)this.isExportable(e)&&-1==this.exportFields.indexOf(e.field)&&this.availableFields.push(e.field)}this.sortAvailableFields()}isExportable(e){return"link"!=e.type}onFieldDrop(e){let t=e.previousContainer.data.splice(e.previousIndex,1);e.container.data.splice(e.currentIndex,0,t[0])}selectField(e,t){switch(e){case"available":!1===this.multiselect?this.selectedAvailableFields=[t]:this.selectedAvailableFields.indexOf(t)>=0?this.selectedAvailableFields.splice(this.selectedAvailableFields.indexOf(t),1):this.selectedAvailableFields.push(t);break;case"list":!1===this.multiselect?this.selectedListFields=[t]:this.selectedListFields.indexOf(t)>=0?this.selectedListFields.splice(this.selectedListFields.indexOf(t),1):this.selectedListFields.push(t)}}isSelected(e,t){switch(e){case"available":return this.selectedAvailableFields.indexOf(t)>=0;case"list":return this.selectedListFields.indexOf(t)>=0}}moveFields(e){switch(e){case"available":this.selectedAvailableFields.forEach((e=>{this.availableFields.some(((t,s)=>{if(e==t)return this.exportFields.push(this.availableFields.splice(s,1)[0]),!0}))})),this.selectedAvailableFields=[];break;case"list":this.selectedListFields.forEach((e=>{this.exportFields.some(((t,s)=>{if(e==t)return this.availableFields.push(this.exportFields.splice(s,1)[0]),!0}))})),this.selectedListFields=[],this.sortAvailableFields()}}sortAvailableFields(){this.availableFields=this.availableFields.sort(((e,t)=>this.language.getFieldDisplayName(this.model.module,e).toLowerCase()>this.language.getFieldDisplayName(this.model.module,t).toLowerCase()?1:-1))}cancel(){this.self.destroy()}export(){this.modal.openModal("SystemLoadingModal").subscribe((e=>{e.instance.messagelabel="LBL_EXPORTING",this.modellist.exportList(this.exportFields).subscribe((t=>{e.instance.self.destroy();let s=document.createElement("a");document.body.appendChild(s),s.href=t,s.download=this.model.module+"_"+(new moment).format("YYYY_MM_DD_HH_mm")+".csv",s.click(),s.remove(),this.self.destroy()}))}))}}return e=ObjectListHeaderActionsExportCSVSelectFields,(0,i.Z)(ObjectListHeaderActionsExportCSVSelectFields,"ɵfac",(function(t){return new(t||e)(m.Y36(g.d),m.Y36(v.Pu),m.Y36(p.o),m.Y36(y.t),m.Y36(K.o))})),(0,i.Z)(ObjectListHeaderActionsExportCSVSelectFields,"ɵcmp",m.Xpm({type:e,selectors:[["ng-component"]],decls:22,vars:10,consts:[[3,"close"],["label","LBL_EXPORT"],[1,"slds-grid","slds-p-horizontal--x-small"],[1,"slds-form-element","slds-m-horizontal--small","slds-size--1-of-2"],[1,"slds-form-element__label"],["label","LBL_AVAILABLE_FIELDS"],["cdkDropList","",1,"slds-picklist","slds-picklist__options","slds-size--1-of-1",2,"height","50vh",3,"cdkDropListData","cdkDropListConnectedTo","cdkDropListDropped"],["listOne","cdkDropList"],["cdkDrag","","class","slds-drag--preview slds-picklist__item","role","option",3,"cdkDragData","click",4,"ngFor","ngForOf"],["label","LBL_EXPORT_FIELDS"],["cdkDropList","",1,"slds-picklist","slds-picklist__options","slds-size--1-of-1","cdk-drag",2,"height","50vh",3,"cdkDropListData","cdkDropListConnectedTo","cdkDropListDropped"],["listTwo","cdkDropList"],[1,"slds-button","slds-button--neutral",3,"click"],["label","LBL_CANCEL"],[1,"slds-button","slds-button--brand",3,"click"],["cdkDrag","","role","option",1,"slds-drag--preview","slds-picklist__item",3,"cdkDragData","click"],[1,"slds-truncate"],[3,"module","field"]],template:function(e,t){if(1&e&&(m.TgZ(0,"system-modal")(1,"system-modal-header",0),m.NdJ("close",(function(){return t.cancel()})),m._UZ(2,"system-label",1),m.qZA(),m.TgZ(3,"system-modal-content")(4,"div",2)(5,"div",3)(6,"span",4),m._UZ(7,"system-label",5),m.qZA(),m.TgZ(8,"div",6,7),m.NdJ("cdkDropListDropped",(function(e){return t.onFieldDrop(e)})),m.YNc(10,Pe,4,5,"div",8),m.qZA()(),m.TgZ(11,"div",3)(12,"span",4),m._UZ(13,"system-label",9),m.qZA(),m.TgZ(14,"div",10,11),m.NdJ("cdkDropListDropped",(function(e){return t.onFieldDrop(e)})),m.YNc(16,He,4,5,"div",8),m.qZA()()()(),m.TgZ(17,"system-modal-footer")(18,"button",12),m.NdJ("click",(function(){return t.cancel()})),m._UZ(19,"system-label",13),m.qZA(),m.TgZ(20,"button",14),m.NdJ("click",(function(){return t.export()})),m._UZ(21,"system-label",1),m.qZA()()()),2&e){const e=m.MAs(9),s=m.MAs(15);m.xp6(8),m.Q6J("cdkDropListData",t.availableFields)("cdkDropListConnectedTo",m.VKq(6,ze,s)),m.xp6(2),m.Q6J("ngForOf",t.availableFields),m.xp6(4),m.Q6J("cdkDropListData",t.exportFields)("cdkDropListConnectedTo",m.VKq(8,ze,e)),m.xp6(2),m.Q6J("ngForOf",t.exportFields)}},dependencies:[n.sg,o.Wj,o.Zt,S._,Ge.h,Ee.j,Ye.x,De.p,Qe.y],encapsulation:2})),ObjectListHeaderActionsExportCSVSelectFields})(),Ke=(()=>{var e;class ObjectListHeaderActionsExportTargetlistButton{constructor(e,t,s,n,o,l){(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"model",void 0),(0,i.Z)(this,"modellist",void 0),(0,i.Z)(this,"modal",void 0),(0,i.Z)(this,"injector",void 0),this.language=e,this.metadata=t,this.model=s,this.modellist=n,this.modal=o,this.injector=l}get hidden(){if(!this.metadata.checkModuleAcl("ProspectLists","create"))return!0;let e=!1,t=this.metadata.getModuleFields(this.modellist.module);for(let s in t){let i=t[s];if("link"==i.type&&"ProspectLists"==i.module){e=!0;break}}return!e||!this.metadata.checkModuleAcl(this.model.module,"export")}get disabled(){return 0==this.modellist.getSelectedCount()}get exportcount(){let e=this.modellist.getSelectedCount();return e||this.modellist.listData.totalcount}execute(){this.modal.openModal("ObjectListHeaderActionsExportTargetlistModal",!0,this.injector)}}return e=ObjectListHeaderActionsExportTargetlistButton,(0,i.Z)(ObjectListHeaderActionsExportTargetlistButton,"ɵfac",(function(t){return new(t||e)(m.Y36(g.d),m.Y36(v.Pu),m.Y36(p.o),m.Y36(y.t),m.Y36(K.o),m.Y36(m.zs3))})),(0,i.Z)(ObjectListHeaderActionsExportTargetlistButton,"ɵcmp",m.Xpm({type:e,selectors:[["object-list-header-actions-export-targetlist-button"]],decls:3,vars:1,consts:[["label","LBL_EXPORT_PROSPECTLIST"]],template:function(e,t){1&e&&(m.TgZ(0,"span"),m._UZ(1,"system-label",0),m._uU(2),m.qZA()),2&e&&(m.xp6(2),m.hij(" (",t.exportcount,")"))},dependencies:[S._],encapsulation:2})),ObjectListHeaderActionsExportTargetlistButton})(),$e=(()=>{var e;class ObjectListHeaderActionsExportTargetlistModal{constructor(e,t,s,n,o,l,a){(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"router",void 0),(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"backend",void 0),(0,i.Z)(this,"toast",void 0),(0,i.Z)(this,"modal",void 0),(0,i.Z)(this,"modellist",void 0),(0,i.Z)(this,"self",{}),(0,i.Z)(this,"targetlistname",""),this.language=e,this.router=t,this.metadata=s,this.backend=n,this.toast=o,this.modal=l,this.modellist=a}close(){this.self.destroy()}get itemcount(){let e=this.modellist.getSelectedCount();return e||this.modellist.listData.totalcount}export(){this.modal.openModal("SystemLoadingModal").subscribe((e=>{e.instance.messagelabel="LBL_EXPORTING";let t=this.modellist.getSelectedIDs(),s={listtype:this.modellist.currentList.id,targetlistname:this.targetlistname,owner:"owner"==this.modellist.currentList.id,module:this.modellist.module,modulefilter:this.modellist.modulefilter,searchterm:this.modellist.searchTerm,aggregates:this.modellist.selectedAggregates,listid:this.modellist.currentList.id,ids:t};this.backend.postRequest("module/ProspectLists/exportfromlist",{},s).subscribe((t=>{e.instance.self.destroy(),"success"==t.status?(this.router.navigate(["/module/ProspectLists/"+t.id]),this.close()):this.toast.sendToast(t.msg,"error")}))}))}}return e=ObjectListHeaderActionsExportTargetlistModal,(0,i.Z)(ObjectListHeaderActionsExportTargetlistModal,"ɵfac",(function(t){return new(t||e)(m.Y36(g.d),m.Y36(a.F0),m.Y36(v.Pu),m.Y36(ee.y),m.Y36(pe.A),m.Y36(K.o),m.Y36(y.t))})),(0,i.Z)(ObjectListHeaderActionsExportTargetlistModal,"ɵcmp",m.Xpm({type:e,selectors:[["object-list-header-actions-export-targetlist-modal"]],features:[m._Bn([p.o])],decls:19,vars:3,consts:[[3,"close"],["label","LBL_EXPORT_PROSPECTLIST"],["label","LBL_RECORDS"],[1,"slds-form-element"],[1,"slds-form-element__label"],["title","required",1,"slds-required"],["label","LBL_PROSPECTLIST"],[1,"slds-form-element__control"],["type","text",1,"slds-input",3,"ngModel","ngModelChange"],[1,"slds-button","slds-button--neutral",3,"click"],["label","LBL_CANCEL"],[1,"slds-button","slds-button--brand",3,"disabled","click"],["label","LBL_EXPORT"]],template:function(e,t){1&e&&(m.TgZ(0,"system-modal")(1,"system-modal-header",0),m.NdJ("close",(function(){return t.close()})),m._UZ(2,"system-label",1),m._uU(3),m._UZ(4,"system-label",2),m._uU(5,")"),m.qZA(),m.TgZ(6,"system-modal-content")(7,"div",3)(8,"label",4)(9,"abbr",5),m._uU(10,"*"),m.qZA(),m._UZ(11,"system-label",6),m.qZA(),m.TgZ(12,"div",7)(13,"input",8),m.NdJ("ngModelChange",(function(e){return t.targetlistname=e})),m.qZA()()()(),m.TgZ(14,"system-modal-footer")(15,"button",9),m.NdJ("click",(function(){return t.close()})),m._UZ(16,"system-label",10),m.qZA(),m.TgZ(17,"button",11),m.NdJ("click",(function(){return t.export()})),m._UZ(18,"system-label",12),m.qZA()()()),2&e&&(m.xp6(3),m.hij(" (",t.itemcount," "),m.xp6(10),m.Q6J("ngModel",t.targetlistname),m.xp6(4),m.Q6J("disabled",!t.targetlistname))},dependencies:[l.Fj,l.JJ,l.On,S._,Ee.j,Ye.x,De.p,Qe.y],encapsulation:2})),ObjectListHeaderActionsExportTargetlistModal})(),Xe=(()=>{var e;class ObjectListHeaderActionsSelectAllButton{constructor(e,t,s,n,o){(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"model",void 0),(0,i.Z)(this,"modellist",void 0),(0,i.Z)(this,"modal",void 0),(0,i.Z)(this,"hidden",!1),this.language=e,this.metadata=t,this.model=s,this.modellist=n,this.modal=o}get disabled(){return 0==this.modellist.listData.list.length}execute(){this.modellist.setAllSelected()}}return e=ObjectListHeaderActionsSelectAllButton,(0,i.Z)(ObjectListHeaderActionsSelectAllButton,"ɵfac",(function(t){return new(t||e)(m.Y36(g.d),m.Y36(v.Pu),m.Y36(p.o),m.Y36(y.t),m.Y36(K.o))})),(0,i.Z)(ObjectListHeaderActionsSelectAllButton,"ɵcmp",m.Xpm({type:e,selectors:[["object-list-header-actions-select-all-button"]],decls:2,vars:0,consts:[[1,"slds-truncate"],["label","LBL_SELECT_ALL"]],template:function(e,t){1&e&&(m.TgZ(0,"span",0),m._UZ(1,"system-label",1),m.qZA())},dependencies:[S._],encapsulation:2})),ObjectListHeaderActionsSelectAllButton})(),We=(()=>{var e;class ObjectListHeaderActionsUnselectAllButton{constructor(e,t,s,n,o){(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"model",void 0),(0,i.Z)(this,"modellist",void 0),(0,i.Z)(this,"modal",void 0),(0,i.Z)(this,"disabled",!1),this.language=e,this.metadata=t,this.model=s,this.modellist=n,this.modal=o}get hasSelection(){return this.modellist.getSelectedCount()>0}get hidden(){return!this.hasSelection}execute(){this.modellist.setAllUnselected()}}return e=ObjectListHeaderActionsUnselectAllButton,(0,i.Z)(ObjectListHeaderActionsUnselectAllButton,"ɵfac",(function(t){return new(t||e)(m.Y36(g.d),m.Y36(v.Pu),m.Y36(p.o),m.Y36(y.t),m.Y36(K.o))})),(0,i.Z)(ObjectListHeaderActionsUnselectAllButton,"ɵcmp",m.Xpm({type:e,selectors:[["object-list-header-actions-unselect-all-button"]],decls:2,vars:0,consts:[[1,"slds-truncate"],["label","LBL_UNSELECT_ALL"]],template:function(e,t){1&e&&(m.TgZ(0,"span",0),m._UZ(1,"system-label",1),m.qZA())},dependencies:[S._],encapsulation:2})),ObjectListHeaderActionsUnselectAllButton})(),et=(()=>{var e;class ObjectListHeaderActionsSelectRangeButton{constructor(e,t,s,n){(0,i.Z)(this,"model",void 0),(0,i.Z)(this,"modellist",void 0),(0,i.Z)(this,"modal",void 0),(0,i.Z)(this,"injector",void 0),(0,i.Z)(this,"hidden",!1),this.model=e,this.modellist=t,this.modal=s,this.injector=n}get disabled(){return 0==this.modellist.listData.list.length}execute(){this.modal.openModal("ObjectListHeaderActionsSelectRangeModal",!0,this.injector)}}return e=ObjectListHeaderActionsSelectRangeButton,(0,i.Z)(ObjectListHeaderActionsSelectRangeButton,"ɵfac",(function(t){return new(t||e)(m.Y36(p.o),m.Y36(y.t),m.Y36(K.o),m.Y36(m.zs3))})),(0,i.Z)(ObjectListHeaderActionsSelectRangeButton,"ɵcmp",m.Xpm({type:e,selectors:[["object-list-header-actions-select-range-button"]],decls:2,vars:0,consts:[[1,"slds-truncate"],["label","LBL_SELECT_RANGE"]],template:function(e,t){1&e&&(m.TgZ(0,"span",0),m._UZ(1,"system-label",1),m.qZA())},dependencies:[S._],encapsulation:2})),ObjectListHeaderActionsSelectRangeButton})(),tt=(()=>{var e;class ObjectListHeaderActionsSelectRangeModal{constructor(e,t){(0,i.Z)(this,"model",void 0),(0,i.Z)(this,"modellist",void 0),(0,i.Z)(this,"self",void 0),(0,i.Z)(this,"from",1),(0,i.Z)(this,"to",void 0),this.model=e,this.modellist=t}ngOnInit(){this.to=this.modellist.listData.list.length}close(){this.self.destroy()}get canSelect(){return!(!this.from||!this.to)&&(!(this.from<1||this.to<1)&&(!(this.to<=this.from)&&!(this.to>this.modellist.listData.list.length)))}select(){this.canSelect&&(this.modellist.setRangeSelected(this.from,this.to),this.close())}}return e=ObjectListHeaderActionsSelectRangeModal,(0,i.Z)(ObjectListHeaderActionsSelectRangeModal,"ɵfac",(function(t){return new(t||e)(m.Y36(p.o),m.Y36(y.t))})),(0,i.Z)(ObjectListHeaderActionsSelectRangeModal,"ɵcmp",m.Xpm({type:e,selectors:[["object-list-header-actions-select-range-modal"]],decls:18,vars:3,consts:[["size","small"],[3,"close"],["label","LBL_SELECT_RANGE"],[1,"slds-grid","slds-grid--vertical-align-center","slds-gutters_direct-small"],[1,"slds-col","slds-size--1-of-2","slds-grid","slds-grid--vertical-align-center"],[1,"slds-size--1-of-3","slds-text-align--center"],["label","LBL_FROM"],["type","number",1,"slds-input","slds-size--2-of-3",3,"ngModel","ngModelChange"],["label","LBL_TO"],[1,"slds-button","slds-button--neutral",3,"click"],["label","LBL_CLOSE"],[1,"slds-button","slds-button--brand",3,"disabled","click"],["label","LBL_SELECT"]],template:function(e,t){1&e&&(m.TgZ(0,"system-modal",0)(1,"system-modal-header",1),m.NdJ("close",(function(){return t.close()})),m._UZ(2,"system-label",2),m.qZA(),m.TgZ(3,"system-modal-content")(4,"div",3)(5,"div",4)(6,"div",5),m._UZ(7,"system-label",6),m.qZA(),m.TgZ(8,"input",7),m.NdJ("ngModelChange",(function(e){return t.from=e})),m.qZA()(),m.TgZ(9,"div",4)(10,"div",5),m._UZ(11,"system-label",8),m.qZA(),m.TgZ(12,"input",7),m.NdJ("ngModelChange",(function(e){return t.to=e})),m.qZA()()()(),m.TgZ(13,"system-modal-footer")(14,"button",9),m.NdJ("click",(function(){return t.close()})),m._UZ(15,"system-label",10),m.qZA(),m.TgZ(16,"button",11),m.NdJ("click",(function(){return t.select()})),m._UZ(17,"system-label",12),m.qZA()()()),2&e&&(m.xp6(8),m.Q6J("ngModel",t.from),m.xp6(4),m.Q6J("ngModel",t.to),m.xp6(4),m.Q6J("disabled",!t.canSelect))},dependencies:[l.Fj,l.wV,l.JJ,l.On,S._,Ee.j,Ye.x,De.p,Qe.y],encapsulation:2})),ObjectListHeaderActionsSelectRangeModal})();var st=s(6857);const it=["fieldcontainer"];let nt=(()=>{var e;class ObjectListItemField{constructor(e,t,s){(0,i.Z)(this,"model",void 0),(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"fieldcontainer",void 0),(0,i.Z)(this,"field",""),this.model=e,this.language=t,this.metadata=s}ngAfterViewInit(){this.buildContainer()}buildContainer(){this.metadata.addComponent("fieldGeneric",this.fieldcontainer).subscribe((e=>{e.instance.fieldname=this.field}))}}return e=ObjectListItemField,(0,i.Z)(ObjectListItemField,"ɵfac",(function(t){return new(t||e)(m.Y36(p.o),m.Y36(g.d),m.Y36(v.Pu))})),(0,i.Z)(ObjectListItemField,"ɵcmp",m.Xpm({type:e,selectors:[["object-list-item--field"]],viewQuery:function(e,t){if(1&e&&m.Gf(it,7,m.s_b),2&e){let e;m.iGM(e=m.CRH())&&(t.fieldcontainer=e.first)}},inputs:{field:"field"},decls:3,vars:1,consts:[[1,"slds-truncate",3,"title"],["fieldcontainer",""]],template:function(e,t){1&e&&(m.TgZ(0,"div",0),m._UZ(1,"div",null,1),m.qZA()),2&e&&m.s9C("title",t.field)},encapsulation:2})),ObjectListItemField})();var ot=s(586),lt=s(699),at=s(6094);let dt=(()=>{var e;class ObjectActionsetMenuContainerEdit{constructor(e,t){(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"model",void 0),this.language=e,this.model=t}doAction(){this.model.checkAccess("edit")&&this.model.edit(!0)}}return e=ObjectActionsetMenuContainerEdit,(0,i.Z)(ObjectActionsetMenuContainerEdit,"ɵfac",(function(t){return new(t||e)(m.Y36(g.d),m.Y36(p.o))})),(0,i.Z)(ObjectActionsetMenuContainerEdit,"ɵcmp",m.Xpm({type:e,selectors:[["object-actionset-menu-container-edit"]],decls:4,vars:0,consts:[["role","presentation",1,"slds-dropdown__item",3,"click"],["href","javascript:void(0);","role","menuitem"],[1,"slds-truncate"],["label","LBL_EDIT"]],template:function(e,t){1&e&&(m.TgZ(0,"li",0),m.NdJ("click",(function(){return t.doAction()})),m.TgZ(1,"a",1)(2,"span",2),m._UZ(3,"system-label",3),m.qZA()()())},dependencies:[S._],encapsulation:2})),ObjectActionsetMenuContainerEdit})();var rt=s(3441);let ct=(()=>{var e;class ObjectActionsetMenuContainerDelete{constructor(e,t,s){(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"model",void 0),(0,i.Z)(this,"helper",void 0),this.language=e,this.model=t,this.helper=s}doAction(){this.model.checkAccess("delete")&&this.helper.confirm(this.language.getLabel("LBL_DELETE_RECORD"),this.language.getLabel("MSG_DELETE_CONFIRM")).subscribe((e=>{e&&this.model.delete()}))}}return e=ObjectActionsetMenuContainerDelete,(0,i.Z)(ObjectActionsetMenuContainerDelete,"ɵfac",(function(t){return new(t||e)(m.Y36(g.d),m.Y36(p.o),m.Y36(rt._))})),(0,i.Z)(ObjectActionsetMenuContainerDelete,"ɵcmp",m.Xpm({type:e,selectors:[["ng-component"]],decls:4,vars:0,consts:[["role","presentation",1,"slds-dropdown__item",3,"click"],["href","javascript:void(0);","role","menuitem"],[1,"slds-truncate"],["label","LBL_DELETE"]],template:function(e,t){1&e&&(m.TgZ(0,"li",0),m.NdJ("click",(function(){return t.doAction()})),m.TgZ(1,"a",1)(2,"span",2),m._UZ(3,"system-label",3),m.qZA()()())},dependencies:[S._],encapsulation:2})),ObjectActionsetMenuContainerDelete})();function ut(e,t){1&e&&m._UZ(0,"system-button-icon",2)}function ht(e,t){1&e&&(m.TgZ(0,"span"),m._UZ(1,"system-label",3),m.qZA())}let mt=(()=>{var e;class ObjectActionEditButton{constructor(e,t,s){(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"model",void 0),(0,i.Z)(this,"displayasicon",!1),this.language=e,this.metadata=t,this.model=s}get hidden(){return this.model.isEditing}get disabled(){return!this.model.checkAccess("edit")||(this.model.isEditing||this.model.isSaving)}execute(){this.model.edit()}}return e=ObjectActionEditButton,(0,i.Z)(ObjectActionEditButton,"ɵfac",(function(t){return new(t||e)(m.Y36(g.d),m.Y36(v.Pu),m.Y36(p.o))})),(0,i.Z)(ObjectActionEditButton,"ɵcmp",m.Xpm({type:e,selectors:[["object-action-edit-button"]],decls:2,vars:2,consts:[["icon","edit",4,"ngIf"],[4,"ngIf"],["icon","edit"],["label","LBL_EDIT"]],template:function(e,t){1&e&&(m.YNc(0,ut,1,0,"system-button-icon",0),m.YNc(1,ht,2,0,"span",1)),2&e&&(m.Q6J("ngIf",t.displayasicon),m.xp6(1),m.Q6J("ngIf",!t.displayasicon))},dependencies:[n.O5,w.J,S._],encapsulation:2})),ObjectActionEditButton})(),gt=(()=>{var e;class ObjectActionEditRelatedButton{constructor(e,t,s,n){(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"parent",void 0),(0,i.Z)(this,"model",void 0),(0,i.Z)(this,"disabled",!0),(0,i.Z)(this,"actionconfig",{}),(0,i.Z)(this,"subscriptions",new G.w0),this.language=e,this.metadata=t,this.parent=s,this.model=n}ngOnInit(){this.handleDisabled(this.parent.isEditing?"edit":"display"),this.subscriptions.add(this.parent.mode$.subscribe((e=>{this.handleDisabled(e)}))),this.subscriptions.add(this.parent.data$.subscribe((e=>{this.model.module=this.actionconfig.module,this.model.id=this.parent.getFieldValue(this.actionconfig.parent_field),this.handleDisabled(this.parent.isEditing?"edit":"display")})))}get hidden(){return!this.model.id}execute(){this.model.edit(!0)}ngOnDestroy(){this.subscriptions.unsubscribe()}handleDisabled(e){this.parent.checkAccess("edit")?this.disabled="edit"==e:this.disabled=!0}}return e=ObjectActionEditRelatedButton,(0,i.Z)(ObjectActionEditRelatedButton,"ɵfac",(function(t){return new(t||e)(m.Y36(g.d),m.Y36(v.Pu),m.Y36(p.o,4),m.Y36(p.o))})),(0,i.Z)(ObjectActionEditRelatedButton,"ɵcmp",m.Xpm({type:e,selectors:[["object-action-edit-related-button"]],features:[m._Bn([p.o])],decls:2,vars:0,consts:[["label","LBL_EDIT_RELATED"]],template:function(e,t){1&e&&(m.TgZ(0,"span"),m._UZ(1,"system-label",0),m.qZA())},dependencies:[S._],encapsulation:2})),ObjectActionEditRelatedButton})();function pt(e,t){1&e&&m._UZ(0,"system-button-icon",2)}function ft(e,t){1&e&&(m.TgZ(0,"span"),m._UZ(1,"system-label",3),m.qZA())}let bt=(()=>{var e;class ObjectActionDeleteButton{constructor(e,t,s,n,o,l,a){(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"model",void 0),(0,i.Z)(this,"navigationtab",void 0),(0,i.Z)(this,"router",void 0),(0,i.Z)(this,"modal",void 0),(0,i.Z)(this,"toast",void 0),(0,i.Z)(this,"injector",void 0),(0,i.Z)(this,"displayasicon",!1),(0,i.Z)(this,"actionconfig",{}),this.metadata=e,this.model=t,this.navigationtab=s,this.router=n,this.modal=o,this.toast=l,this.injector=a}get disabled(){return!this.canDelete}get canDelete(){try{return this.model.checkAccess("delete")&&!this.model.isEditing}catch(e){return!1}}execute(){this.modal.confirm("MSG_DELETE_RECORD","MSG_DELETE_RECORD").subscribe((e=>{e&&this.delete()}))}delete(){this.model.delete().subscribe((e=>{this.completeAction()}),(()=>{this.toast.sendToast("LBL_ERROR_DELETING_RECORD","error")}))}completeAction(){1!=this.actionconfig.noredirectoncomplete&&(this.navigationtab&&"main"!=this.navigationtab.tabid?this.navigationtab.closeTab():this.router.navigate(["/module/"+this.model.module]))}}return e=ObjectActionDeleteButton,(0,i.Z)(ObjectActionDeleteButton,"ɵfac",(function(t){return new(t||e)(m.Y36(v.Pu),m.Y36(p.o),m.Y36(Te.d,8),m.Y36(a.F0),m.Y36(K.o),m.Y36(pe.A),m.Y36(m.zs3))})),(0,i.Z)(ObjectActionDeleteButton,"ɵcmp",m.Xpm({type:e,selectors:[["object-action-delete-button"]],decls:2,vars:2,consts:[["icon","delete",4,"ngIf"],[4,"ngIf"],["icon","delete"],["label","LBL_DELETE"]],template:function(e,t){1&e&&(m.YNc(0,pt,1,0,"system-button-icon",0),m.YNc(1,ft,2,0,"span",1)),2&e&&(m.Q6J("ngIf",t.displayasicon),m.xp6(1),m.Q6J("ngIf",!t.displayasicon))},dependencies:[n.O5,w.J,S._],encapsulation:2})),ObjectActionDeleteButton})(),vt=(()=>{var e;class ObjectActionAuditlogButton{constructor(e,t,s,n,o){(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"model",void 0),(0,i.Z)(this,"modal",void 0),(0,i.Z)(this,"ViewContainerRef",void 0),(0,i.Z)(this,"disabled",!0),(0,i.Z)(this,"hidden",!0),this.language=e,this.metadata=t,this.model=s,this.modal=n,this.ViewContainerRef=o}ngOnInit(){this.metadata.getModuleDefs(this.model.module).audited&&(this.disabled=!1,this.hidden=!1)}execute(){this.modal.openModal("ObjectActionAuditlogModal",!0,this.ViewContainerRef.injector)}}return e=ObjectActionAuditlogButton,(0,i.Z)(ObjectActionAuditlogButton,"ɵfac",(function(t){return new(t||e)(m.Y36(g.d),m.Y36(v.Pu),m.Y36(p.o),m.Y36(K.o),m.Y36(m.s_b))})),(0,i.Z)(ObjectActionAuditlogButton,"ɵcmp",m.Xpm({type:e,selectors:[["object-action-auditlog-button"]],decls:2,vars:0,consts:[["label","LBL_AUDITLOG"]],template:function(e,t){1&e&&(m.TgZ(0,"span"),m._UZ(1,"system-label",0),m.qZA())},dependencies:[S._],encapsulation:2})),ObjectActionAuditlogButton})();function Zt(e,t){1&e&&m._UZ(0,"system-button-icon",2)}function _t(e,t){1&e&&(m.TgZ(0,"span"),m._UZ(1,"system-label",3),m.qZA())}let yt=(()=>{var e;class ObjectActionOpenButton{constructor(e,t,s,n,o,l,a){(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"model",void 0),(0,i.Z)(this,"router",void 0),(0,i.Z)(this,"helper",void 0),(0,i.Z)(this,"view",void 0),(0,i.Z)(this,"navigationtab",void 0),(0,i.Z)(this,"displayasicon",!1),this.language=e,this.metadata=t,this.model=s,this.router=n,this.helper=o,this.view=l,this.navigationtab=a}get disabled(){return!this.model.checkAccess("detail")||this.view.isEditMode()}execute(){this.model.goDetail(this.navigationtab.tabid)}}return e=ObjectActionOpenButton,(0,i.Z)(ObjectActionOpenButton,"ɵfac",(function(t){return new(t||e)(m.Y36(g.d),m.Y36(v.Pu),m.Y36(p.o),m.Y36(a.F0),m.Y36(rt._),m.Y36(Fe.e),m.Y36(Te.d))})),(0,i.Z)(ObjectActionOpenButton,"ɵcmp",m.Xpm({type:e,selectors:[["object-action-open-button"]],features:[m._Bn([rt._])],decls:2,vars:2,consts:[["icon","open",4,"ngIf"],[4,"ngIf"],["icon","open"],["label","LBL_OPEN"]],template:function(e,t){1&e&&(m.YNc(0,Zt,1,0,"system-button-icon",0),m.YNc(1,_t,2,0,"span",1)),2&e&&(m.Q6J("ngIf",t.displayasicon),m.xp6(1),m.Q6J("ngIf",!t.displayasicon))},dependencies:[n.O5,w.J,S._],encapsulation:2})),ObjectActionOpenButton})();var xt=s(8032);function wt(e,t){if(1&e&&m._UZ(0,"system-button-icon",2),2&e){const e=m.oxw();m.Q6J("title",e.language.getLabel("LBL_CANCEL"))}}function Tt(e,t){1&e&&(m.TgZ(0,"span"),m._UZ(1,"system-label",3),m.qZA())}let Ct=(()=>{var e;class ObjectActionCancelButton{constructor(e,t,s,n,o,l,a){(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"model",void 0),(0,i.Z)(this,"router",void 0),(0,i.Z)(this,"helper",void 0),(0,i.Z)(this,"view",void 0),(0,i.Z)(this,"modalwindow",void 0),(0,i.Z)(this,"actionemitter",new m.vpe),(0,i.Z)(this,"displayasicon",!1),this.language=e,this.metadata=t,this.model=s,this.router=n,this.helper=o,this.view=l,this.modalwindow=a}get disabled(){return this.model.isSaving}get hidden(){return!this.model.isEditing}execute(){this.model.cancelEdit(),this.view.setViewMode(),this.actionemitter.emit("cancel"),this.modalwindow&&this.modalwindow.self.destroy()}}return e=ObjectActionCancelButton,(0,i.Z)(ObjectActionCancelButton,"ɵfac",(function(t){return new(t||e)(m.Y36(g.d),m.Y36(v.Pu),m.Y36(p.o),m.Y36(a.F0),m.Y36(rt._),m.Y36(Fe.e),m.Y36(xt.S,8))})),(0,i.Z)(ObjectActionCancelButton,"ɵcmp",m.Xpm({type:e,selectors:[["object-action-cancel-button"]],outputs:{actionemitter:"actionemitter"},features:[m._Bn([rt._])],decls:2,vars:2,consts:[["icon","close",3,"title",4,"ngIf"],[4,"ngIf"],["icon","close",3,"title"],["label","LBL_CANCEL"]],template:function(e,t){1&e&&(m.YNc(0,wt,1,1,"system-button-icon",0),m.YNc(1,Tt,2,0,"span",1)),2&e&&(m.Q6J("ngIf",t.displayasicon),m.xp6(1),m.Q6J("ngIf",!t.displayasicon))},dependencies:[n.O5,w.J,S._],encapsulation:2})),ObjectActionCancelButton})(),At=(()=>{var e;class ObjectActionModalSaveButton{constructor(e,t,s,n,o){(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"model",void 0),(0,i.Z)(this,"modal",void 0),(0,i.Z)(this,"modalwindow",void 0),(0,i.Z)(this,"actionemitter",new m.vpe),(0,i.Z)(this,"actionconfig",{}),this.language=e,this.metadata=t,this.model=s,this.modal=n,this.modalwindow=o}get displayLabel(){return this.actionconfig.label?this.actionconfig.label:this.actionconfig.gorelated?"LBL_SAVE_AND_GO_TO_RECORD":"LBL_SAVE"}execute(){this.model.validate()&&(this.model.isNew&&this.metadata.getModuleDuplicatecheck(this.model.module)?this.modal.openModal("SystemLoadingModal").subscribe((e=>{e.instance.messagelabel="LBL_CHECKING_DUPLICATES",this.model.duplicateCheck(!0).subscribe((t=>{e.instance.self.destroy(),t.count>0?(this.model.duplicates=t.records,this.model.duplicatecount=t.count,this.modal.confirm(this.language.getLabel("MSG_DUPLICATES_FOUND",null,"long"),this.language.getLabel("MSG_DUPLICATES_FOUND")).subscribe((e=>{e&&this.saveModel()}))):this.saveModel()}))})):this.saveModel())}saveModel(){this.modal.openModal("SystemLoadingModal").subscribe((e=>{e.instance.messagelabel="LBL_SAVING_DATA",this.model.save(!0).subscribe((t=>{this.model.endEdit(),t&&this.actionconfig.gorelated&&this.actionemitter.emit("savegodetail"),e.instance.self.destroy(),this.actionemitter.emit("save")}),(t=>{e.instance.self.destroy()}))}))}}return e=ObjectActionModalSaveButton,(0,i.Z)(ObjectActionModalSaveButton,"ɵfac",(function(t){return new(t||e)(m.Y36(g.d),m.Y36(v.Pu),m.Y36(p.o),m.Y36(K.o),m.Y36(xt.S,8))})),(0,i.Z)(ObjectActionModalSaveButton,"ɵcmp",m.Xpm({type:e,selectors:[["object-action-modal-save-button"]],outputs:{actionemitter:"actionemitter"},features:[m._Bn([rt._])],decls:2,vars:1,consts:[[3,"label"]],template:function(e,t){1&e&&(m.TgZ(0,"span"),m._UZ(1,"system-label",0),m.qZA()),2&e&&(m.xp6(1),m.Q6J("label",t.displayLabel))},dependencies:[S._],encapsulation:2})),ObjectActionModalSaveButton})();var kt=s(6040);function Lt(e,t){1&e&&m._UZ(0,"system-button-icon",2)}function It(e,t){1&e&&(m.TgZ(0,"span"),m._UZ(1,"system-label",3),m.qZA())}let Mt=(()=>{var e;class ObjectActionRemoveButton{constructor(e,t,s,n,o,l){(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"model",void 0),(0,i.Z)(this,"view",void 0),(0,i.Z)(this,"relatedmodels",void 0),(0,i.Z)(this,"modalservice",void 0),(0,i.Z)(this,"actionemitter",new m.vpe),(0,i.Z)(this,"disabled",!0),(0,i.Z)(this,"displayasicon",!1),(0,i.Z)(this,"subscriptions",new G.w0),this.language=e,this.metadata=t,this.model=s,this.view=n,this.relatedmodels=o,this.modalservice=l,this.subscriptions.add(this.model.mode$.subscribe((e=>{this.handleDisabled(e)}))),this.subscriptions.add(this.model.data$.subscribe((e=>{this.handleDisabled(this.model.isEditing?"edit":"display")})))}get canDelete(){try{let e=this.model.checkAccess("deleterelated");return e||(e=this.model.checkAccess("delete")),e}catch(e){return!1}}ngAfterViewInit(){this.handleDisabled(this.model.isEditing?"edit":"display")}execute(){this.modalservice.confirm(this.language.getLabel("QST_REMOVE_ENTRY"),this.language.getLabel("QST_REMOVE_ENTRY",null,"short")).subscribe((e=>{e&&this.relatedmodels.deleteItem(this.model.id)}))}handleDisabled(e){this.canDelete?this.disabled="edit"==e:this.disabled=!0}ngOnDestroy(){this.subscriptions.unsubscribe()}}return e=ObjectActionRemoveButton,(0,i.Z)(ObjectActionRemoveButton,"ɵfac",(function(t){return new(t||e)(m.Y36(g.d),m.Y36(v.Pu),m.Y36(p.o),m.Y36(Fe.e),m.Y36(kt.j),m.Y36(K.o))})),(0,i.Z)(ObjectActionRemoveButton,"ɵcmp",m.Xpm({type:e,selectors:[["object-action-remove-button"]],outputs:{actionemitter:"actionemitter"},decls:2,vars:2,consts:[["icon","remove_link",4,"ngIf"],[4,"ngIf"],["icon","remove_link"],["label","LBL_REMOVE"]],template:function(e,t){1&e&&(m.YNc(0,Lt,1,0,"system-button-icon",0),m.YNc(1,It,2,0,"span",1)),2&e&&(m.Q6J("ngIf",t.displayasicon),m.xp6(1),m.Q6J("ngIf",!t.displayasicon))},dependencies:[n.O5,w.J,S._],encapsulation:2})),ObjectActionRemoveButton})();var St=s(6538),Jt=s(4664);function Ot(e,t){1&e&&m._UZ(0,"system-spinner",9)}function Nt(e,t){if(1&e&&(m.TgZ(0,"tr")(1,"td",21)(2,"div",13),m._uU(3),m.qZA()(),m.TgZ(4,"td",22)(5,"div",23),m._uU(6),m.qZA()(),m.TgZ(7,"td",21)(8,"div",23),m._uU(9),m.qZA()()()),2&e){const e=t.$implicit,s=m.oxw(3);m.xp6(3),m.hij("",s.language.getFieldDisplayName(s.model.module,e.field_name)," "),m.xp6(3),m.Oqu(e.before_value_string),m.xp6(3),m.Oqu(e.after_value_string)}}function Ft(e,t){if(1&e&&(m.ynx(0),m.TgZ(1,"tr")(2,"td",18)(3,"div",19),m._uU(4),m._UZ(5,"system-display-datetime",20),m.qZA()()(),m.YNc(6,Nt,10,3,"tr",17),m.BQk()),2&e){const e=t.$implicit;m.xp6(4),m.hij(" ",e.user_name," / "),m.xp6(1),m.Q6J("date",e.date_created),m.xp6(1),m.Q6J("ngForOf",e.audit_log)}}function qt(e,t){if(1&e&&(m.TgZ(0,"table",10)(1,"thead")(2,"tr",11)(3,"th",12)(4,"div",13),m._UZ(5,"system-label",14),m.qZA()(),m.TgZ(6,"th",12)(7,"div",13),m._UZ(8,"system-label",15),m.qZA()(),m.TgZ(9,"th",12)(10,"div",13),m._UZ(11,"system-label",16),m.qZA()()()(),m.TgZ(12,"tbody"),m.YNc(13,Ft,7,3,"ng-container",17),m.qZA()()),2&e){const e=m.oxw();m.xp6(13),m.Q6J("ngForOf",e.auditLog)}}function Et(e,t){1&e&&(m.TgZ(0,"div",24),m._UZ(1,"system-label",25),m._uU(2,". "),m.qZA())}let Yt=(()=>{var e;class ObjectActionAuditlogModal{constructor(e,t,s){(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"model",void 0),(0,i.Z)(this,"self",null),(0,i.Z)(this,"auditLog",[]),(0,i.Z)(this,"auditTransactions",[]),(0,i.Z)(this,"loading",!0),(0,i.Z)(this,"moduleFields",[]),(0,i.Z)(this,"_userfilter",""),(0,i.Z)(this,"_fieldfilter",""),this.language=e,this.metadata=t,this.model=s}get userfilter(){return this._userfilter}set userfilter(e){this._userfilter=e,this.loadAuditLog()}get fieldfilter(){return this._fieldfilter}set fieldfilter(e){this._fieldfilter=e,this.loadAuditLog()}ngOnInit(){this.loadAuditLog();for(let e in this.metadata.getModuleFields(this.model.module))this.moduleFields.push({name:e,display:this.language.getFieldDisplayName(this.model.module,e)});this.moduleFields.sort(((e,t)=>e.display.toLowerCase()>t.display.toLowerCase()?1:-1))}hideAuditLog(){this.self.destroy()}loadAuditLog(){this.model&&(this.auditLog=[],this.auditTransactions=[],this.loading=!0,this.model.getAuditLog({user:this._userfilter,field:this._fieldfilter,grouped:!0}).subscribe((e=>{this.auditLog=e;for(let e of this.auditLog)-1==this.auditTransactions.indexOf(e.transaction_id)&&this.auditTransactions.push({transaction_id:e.transaction_id,created_by:e.created_by,user_name:e.user_name,date_created:e.date_created});this.loading=!1}),(e=>{this.loading=!1})))}}return e=ObjectActionAuditlogModal,(0,i.Z)(ObjectActionAuditlogModal,"ɵfac",(function(t){return new(t||e)(m.Y36(g.d),m.Y36(v.Pu),m.Y36(p.o,8))})),(0,i.Z)(ObjectActionAuditlogModal,"ɵcmp",m.Xpm({type:e,selectors:[["object-action-auditlog-modal"]],decls:10,vars:3,consts:[["size","large"],[3,"close"],["label","LBL_LOGGED_CHANGES"],["margin","none"],["class","slds-p-around--medium",4,"ngIf"],["class","slds-table slds-table--bordered slds-table--cell-buffer",4,"ngIf"],["class","slds-text-heading--small slds-p-around--medium",4,"ngIf"],[1,"slds-button","slds-button--brand",3,"click"],["label","LBL_CLOSE"],[1,"slds-p-around--medium"],[1,"slds-table","slds-table--bordered","slds-table--cell-buffer"],[1,"slds-text-title--caps"],["scope","col"],[1,"slds-truncate"],["label","LBL_FIELD"],["label","LBL_BEFOREVALUE"],["label","LBL_AFTERVALUE"],[4,"ngFor","ngForOf"],["colspan","3",1,"slds-theme--shade"],[1,"slds-text-heading--label"],[3,"date"],["scope","row"],["scope","row",1,"slds-cell-wrap"],[1,"slds-line-clamp"],[1,"slds-text-heading--small","slds-p-around--medium"],["label","MSG_NOAUDITRECORDS_FOUND"]],template:function(e,t){1&e&&(m.TgZ(0,"system-modal",0)(1,"system-modal-header",1),m.NdJ("close",(function(){return t.hideAuditLog()})),m._UZ(2,"system-label",2),m.qZA(),m.TgZ(3,"system-modal-content",3),m.YNc(4,Ot,1,0,"system-spinner",4),m.YNc(5,qt,14,1,"table",5),m.YNc(6,Et,3,0,"div",6),m.qZA(),m.TgZ(7,"system-modal-footer")(8,"button",7),m.NdJ("click",(function(){return t.hideAuditLog()})),m._UZ(9,"system-label",8),m.qZA()()()),2&e&&(m.xp6(4),m.Q6J("ngIf",t.loading),m.xp6(1),m.Q6J("ngIf",!t.loading),m.xp6(1),m.Q6J("ngIf",!t.loading&&0===t.auditLog.length))},dependencies:[n.sg,n.O5,St.a,S._,Ee.j,Ye.x,De.p,Qe.y,Jt.W],encapsulation:2})),ObjectActionAuditlogModal})();function Dt(e,t){1&e&&m._UZ(0,"system-button-icon",2)}function Qt(e,t){1&e&&(m.TgZ(0,"span"),m._UZ(1,"system-label",3),m.qZA())}let Ut=(()=>{var e;class ObjectActionNewButton{constructor(e,t,s,n){(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"model",void 0),(0,i.Z)(this,"parentmodel",void 0),(0,i.Z)(this,"disabled",!0),(0,i.Z)(this,"displayasicon",!1),this.language=e,this.metadata=t,this.model=s,this.parentmodel=n}execute(){this.model.module=this.parentmodel.module,this.model.id=void 0,this.model.initialize(),this.model.addModel("",this.parentmodel)}ngOnInit(){this.parentmodel.module&&this.metadata.checkModuleAcl(this.parentmodel.module,"create")&&(this.disabled=!1)}}return e=ObjectActionNewButton,(0,i.Z)(ObjectActionNewButton,"ɵfac",(function(t){return new(t||e)(m.Y36(g.d),m.Y36(v.Pu),m.Y36(p.o),m.Y36(p.o,4))})),(0,i.Z)(ObjectActionNewButton,"ɵcmp",m.Xpm({type:e,selectors:[["object-action-new-button"]],features:[m._Bn([p.o])],decls:2,vars:2,consts:[["icon","add",4,"ngIf"],[4,"ngIf"],["icon","add"],["label","LBL_NEW"]],template:function(e,t){1&e&&(m.YNc(0,Dt,1,0,"system-button-icon",0),m.YNc(1,Qt,2,0,"span",1)),2&e&&(m.Q6J("ngIf",t.displayasicon),m.xp6(1),m.Q6J("ngIf",!t.displayasicon))},dependencies:[n.O5,w.J,S._],encapsulation:2})),ObjectActionNewButton})();var Rt=s(5920);let jt=(()=>{var e;class ObjectActionDuplicateButton{constructor(e,t,s,n,o){(0,i.Z)(this,"parent",void 0),(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"model",void 0),(0,i.Z)(this,"session",void 0),this.parent=e,this.language=t,this.metadata=s,this.model=n,this.session=o}get hidden(){return this.parent.isEditing}get disabled(){return!this.metadata.checkModuleAcl(this.parent.module,"create")||(this.parent.isEditing||this.parent.isSaving)}execute(){let e=this.model.utils.generateGuid();this.model.module=this.parent.module,this.model.initializeModel();let t=JSON.parse(JSON.stringify(this.parent.data));t.id=this.model.id,t.assigned_user_id=this.session.authData.userId,t.assigned_user_name=this.session.authData.userName,t.modified_by_id=this.session.authData.userId,t.modified_by_name=this.session.authData.userName,t.date_entered=new Date,t.date_modified=new Date,this.model.setData(t,!1);for(let t in this.parent.fields)if("link"==this.parent.fields[t].type&&this.model.data[t]&&this.model.data[t].beans)for(let s in this.model.data[t].beans){for(let i in this.model.data[t].beans[s])this.model.data[t].beans[s][i]==this.parent.id&&(this.model.data[t].beans[s][i]=e,this.model.data[t].beans[s].id=this.model.utils.generateGuid()),this.model.data[t].beans[s][i].beans&&(this.model.data[t].beans[s][i].beans={});this.model.data[t].beans[s].id!=s&&(this.model.data[t].beans[this.model.data[t].beans[s].id]=this.model.data[t].beans[s],delete this.model.data[t].beans[s])}this.model.duplicate=!0,this.model.templateId=this.parent.id,this.model.edit()}}return e=ObjectActionDuplicateButton,(0,i.Z)(ObjectActionDuplicateButton,"ɵfac",(function(t){return new(t||e)(m.Y36(p.o,4),m.Y36(g.d),m.Y36(v.Pu),m.Y36(p.o),m.Y36(Rt.n))})),(0,i.Z)(ObjectActionDuplicateButton,"ɵcmp",m.Xpm({type:e,selectors:[["object-action-duplicate-button"]],features:[m._Bn([p.o])],decls:2,vars:0,consts:[["label","LBL_DUPLICATE"]],template:function(e,t){1&e&&(m.TgZ(0,"span"),m._UZ(1,"system-label",0),m.qZA())},dependencies:[S._],encapsulation:2})),ObjectActionDuplicateButton})();function Bt(e,t){if(1&e&&m._UZ(0,"system-button-icon",2),2&e){const e=m.oxw();m.Q6J("title",e.language.getLabel(e.label))}}function Gt(e,t){if(1&e&&(m.TgZ(0,"span"),m._UZ(1,"system-label",3),m.qZA()),2&e){const e=m.oxw();m.xp6(1),m.Q6J("label",e.label)}}let Pt=(()=>{var e;class ObjectActionSaveSendButton{constructor(e,t,s,n){(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"model",void 0),(0,i.Z)(this,"view",void 0),(0,i.Z)(this,"actionemitter",new m.vpe),(0,i.Z)(this,"displayasicon",!1),(0,i.Z)(this,"actionconfig",{}),this.language=e,this.metadata=t,this.model=s,this.view=n}get disabled(){return this.model.isSaving}get hidden(){return!this.model.isEditing}get label(){return this.actionconfig.label&&""!==this.actionconfig.label?this.actionconfig.label:"LBL_SEND"}get toastLabel(){return this.actionconfig.toastlabel&&""!==this.actionconfig.toastlabel?this.actionconfig.toastlabel:"LBL_DATA_SENT"}execute(){this.model.isSaving||this.model.validate()&&this.model.saveAndSend(!0,this.toastLabel).subscribe((e=>{this.model.endEdit(),this.view.setViewMode(),this.actionemitter.emit("save")}))}}return e=ObjectActionSaveSendButton,(0,i.Z)(ObjectActionSaveSendButton,"ɵfac",(function(t){return new(t||e)(m.Y36(g.d),m.Y36(v.Pu),m.Y36(p.o),m.Y36(Fe.e))})),(0,i.Z)(ObjectActionSaveSendButton,"ɵcmp",m.Xpm({type:e,selectors:[["object-action-save-send-button"]],outputs:{actionemitter:"actionemitter"},decls:2,vars:2,consts:[["icon","email",3,"title",4,"ngIf"],[4,"ngIf"],["icon","email",3,"title"],[3,"label"]],template:function(e,t){1&e&&(m.YNc(0,Bt,1,1,"system-button-icon",0),m.YNc(1,Gt,2,1,"span",1)),2&e&&(m.Q6J("ngIf",t.displayasicon),m.xp6(1),m.Q6J("ngIf",!t.displayasicon))},dependencies:[n.O5,w.J,S._],encapsulation:2})),ObjectActionSaveSendButton})();function Ht(e,t){1&e&&m._UZ(0,"system-button-icon",2)}function zt(e,t){1&e&&(m.TgZ(0,"span"),m._UZ(1,"system-label",3),m.qZA())}let Vt=(()=>{var e;class ObjectActionSaveButton{constructor(e,t,s,n){(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"model",void 0),(0,i.Z)(this,"view",void 0),(0,i.Z)(this,"actionemitter",new m.vpe),(0,i.Z)(this,"displayasicon",!1),this.language=e,this.metadata=t,this.model=s,this.view=n}get disabled(){return this.model.isSaving}get hidden(){return!this.model.isEditing}execute(){this.model.isSaving||this.model.validate()&&this.model.save(!0).subscribe((e=>{this.model.endEdit(),this.view.setViewMode(),this.actionemitter.emit("save")}))}}return e=ObjectActionSaveButton,(0,i.Z)(ObjectActionSaveButton,"ɵfac",(function(t){return new(t||e)(m.Y36(g.d),m.Y36(v.Pu),m.Y36(p.o),m.Y36(Fe.e))})),(0,i.Z)(ObjectActionSaveButton,"ɵcmp",m.Xpm({type:e,selectors:[["object-action-save-button"]],outputs:{actionemitter:"actionemitter"},decls:2,vars:2,consts:[["system-title","LBL_SAVE","icon","save",4,"ngIf"],[4,"ngIf"],["system-title","LBL_SAVE","icon","save"],["label","LBL_SAVE"]],template:function(e,t){1&e&&(m.YNc(0,Ht,1,0,"system-button-icon",0),m.YNc(1,zt,2,0,"span",1)),2&e&&(m.Q6J("ngIf",t.displayasicon),m.xp6(1),m.Q6J("ngIf",!t.displayasicon))},dependencies:[n.O5,w.J,S._,k.S],encapsulation:2})),ObjectActionSaveButton})(),Kt=(()=>{var e;class ObjectActionSaveRelatedButton{constructor(e,t,s,n,o){(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"model",void 0),(0,i.Z)(this,"view",void 0),(0,i.Z)(this,"relatedmodels",void 0),(0,i.Z)(this,"actionemitter",new m.vpe),(0,i.Z)(this,"module",""),(0,i.Z)(this,"saving",!1),this.language=e,this.metadata=t,this.model=s,this.view=n,this.relatedmodels=o}get hidden(){return!this.view.isEditMode()}execute(){if(!this.saving)if(this.model.validate()){this.saving=!0;let e=this.model.getDirtyFields();e.date_modified=this.model.getField("date_modified"),e.id=this.model.id,this.actionemitter.emit(!0),this.view.setViewMode(),this.relatedmodels.setItem(e).subscribe((e=>{this.model.endEdit(),this.saving=!1}),(e=>{this.view.setEditMode(),this.saving=!1}))}else this.saving=!1,this.model.edit().subscribe((e=>{e?this.execute():(this.model.cancelEdit(),this.view.setViewMode())}))}}return e=ObjectActionSaveRelatedButton,(0,i.Z)(ObjectActionSaveRelatedButton,"ɵfac",(function(t){return new(t||e)(m.Y36(g.d),m.Y36(v.Pu),m.Y36(p.o),m.Y36(Fe.e),m.Y36(kt.j))})),(0,i.Z)(ObjectActionSaveRelatedButton,"ɵcmp",m.Xpm({type:e,selectors:[["object-action-save-related-button"]],outputs:{actionemitter:"actionemitter"},decls:2,vars:0,consts:[["label","LBL_SAVE"]],template:function(e,t){1&e&&(m.TgZ(0,"span"),m._UZ(1,"system-label",0),m.qZA())},dependencies:[S._],encapsulation:2})),ObjectActionSaveRelatedButton})();function $t(e,t){1&e&&m._UZ(0,"system-button-icon",2)}function Xt(e,t){1&e&&(m.TgZ(0,"span"),m._UZ(1,"system-label",3),m.qZA())}let Wt=(()=>{var e;class ObjectActionNewrelatedButton{constructor(e,t,s,n,o){(0,i.Z)(this,"parent",void 0),(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"model",void 0),(0,i.Z)(this,"relatedmodels",void 0),(0,i.Z)(this,"disabled",!0),(0,i.Z)(this,"actionconfig",void 0),(0,i.Z)(this,"displayasicon",!1),this.parent=e,this.language=t,this.metadata=s,this.model=n,this.relatedmodels=o}ngOnInit(){this.model.module=this.relatedmodels.relatedModule,this.model.module&&this.metadata.checkModuleAcl(this.model.module,"create")&&(!this.actionconfig?.required_model_state||this.model.checkModelState(this.actionconfig.required_model_state))&&(this.disabled=!1)}execute(){this.parent.getField("id")||this.parent.setField("id",this.parent.id),this.model.id="",this.model.addModel("",this.parent).subscribe((e=>{0!=e&&this.relatedmodels.addItems([e])}))}}return e=ObjectActionNewrelatedButton,(0,i.Z)(ObjectActionNewrelatedButton,"ɵfac",(function(t){return new(t||e)(m.Y36(p.o,4),m.Y36(g.d),m.Y36(v.Pu),m.Y36(p.o),m.Y36(kt.j))})),(0,i.Z)(ObjectActionNewrelatedButton,"ɵcmp",m.Xpm({type:e,selectors:[["object-action-newrelated-button"]],features:[m._Bn([p.o])],decls:2,vars:2,consts:[["icon","add",4,"ngIf"],[4,"ngIf"],["icon","add"],["label","LBL_NEW"]],template:function(e,t){1&e&&(m.YNc(0,$t,1,0,"system-button-icon",0),m.YNc(1,Xt,2,0,"span",1)),2&e&&(m.Q6J("ngIf",t.displayasicon),m.xp6(1),m.Q6J("ngIf",!t.displayasicon))},dependencies:[n.O5,w.J,S._],encapsulation:2})),ObjectActionNewrelatedButton})(),es=(()=>{var e;class ObjectActionNewCopyRuleBeanButtonModelHelper{constructor(e){(0,i.Z)(this,"model",void 0),this.model=e}}return e=ObjectActionNewCopyRuleBeanButtonModelHelper,(0,i.Z)(ObjectActionNewCopyRuleBeanButtonModelHelper,"ɵfac",(function(t){return new(t||e)(m.Y36(p.o))})),(0,i.Z)(ObjectActionNewCopyRuleBeanButtonModelHelper,"ɵdir",m.lG2({type:e,selectors:[["object-action-new-copy-rule-bean-button-model-helper"]],features:[m._Bn([p.o])]})),ObjectActionNewCopyRuleBeanButtonModelHelper})(),ts=(()=>{var e;class ObjectActionNewCopyRuleBeanButton{constructor(e,t,s,n){(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"model",void 0),(0,i.Z)(this,"relatedmodels",void 0),(0,i.Z)(this,"child",void 0),(0,i.Z)(this,"parent",{}),(0,i.Z)(this,"disabled",!0),(0,i.Z)(this,"actionconfig",{}),this.language=e,this.metadata=t,this.model=s,this.relatedmodels=n}ngOnInit(){this.actionconfig.module&&this.metadata.checkModuleAcl(this.actionconfig.module,"create")&&(this.disabled=!1)}execute(){this.child.model.module=this.actionconfig.module;let e=[this.parent];this.relatedmodels&&this.relatedmodels.model&&e.push(this.relatedmodels.model),this.child.model.addModel("",e)}}return e=ObjectActionNewCopyRuleBeanButton,(0,i.Z)(ObjectActionNewCopyRuleBeanButton,"ɵfac",(function(t){return new(t||e)(m.Y36(g.d),m.Y36(v.Pu),m.Y36(p.o),m.Y36(kt.j,8))})),(0,i.Z)(ObjectActionNewCopyRuleBeanButton,"ɵcmp",m.Xpm({type:e,selectors:[["object-action-new-copy-rule-bean-button"]],viewQuery:function(e,t){if(1&e&&m.Gf(es,7),2&e){let e;m.iGM(e=m.CRH())&&(t.child=e.first)}},decls:3,vars:1,consts:[[3,"label"]],template:function(e,t){1&e&&(m.TgZ(0,"span"),m._UZ(1,"system-label",0),m.qZA(),m._UZ(2,"object-action-new-copy-rule-bean-button-model-helper")),2&e&&(m.xp6(1),m.Q6J("label",t.actionconfig.label))},dependencies:[S._,es],encapsulation:2})),ObjectActionNewCopyRuleBeanButton})();var ss=s(8709),is=s(4652);let ns=(()=>{var e;class ObjectActionSelectButton{constructor(e,t,s,n,o,l){(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"modal",void 0),(0,i.Z)(this,"model",void 0),(0,i.Z)(this,"parent",void 0),(0,i.Z)(this,"relatedmodels",void 0),(0,i.Z)(this,"actionconfig",{}),(0,i.Z)(this,"disabled",!0),(0,i.Z)(this,"subscriptions",new G.w0),this.metadata=e,this.language=t,this.modal=s,this.model=n,this.parent=o,this.relatedmodels=l}ngOnInit(){this.model.module=this.relatedmodels.relatedModule,this.model.module&&this.metadata.checkModuleAcl(this.model.module,"list")&&(this.disabled=!1)}execute(){this.modal.openModal("ObjectModalModuleLookup").subscribe((e=>{if(e.instance.module=this.model.module,e.instance.multiselect=!0,e.instance.modulefilter=this.actionconfig.modulefilter,this.actionconfig.relatefilterfield){let t=this.metadata.getFieldDefs(this.model.module,this.actionconfig.relatefilterfield);t&&(e.instance.relatefilter={module:t.module,relationship:this.actionconfig.relatefilterrelationship,id:this.parent.getField(t.id_name),display:this.parent.getField(this.actionconfig.relatefilterfield),active:!!this.parent.getField(t.id_name),required:this.actionconfig.relatedfilterrequired})}e.instance.selectedItems.subscribe((e=>{this.addSelectedItems(e)}))}))}ngOnDestroy(){this.subscriptions.unsubscribe()}addSelectedItems(e){this.relatedmodels.addItems(e)}}return e=ObjectActionSelectButton,(0,i.Z)(ObjectActionSelectButton,"ɵfac",(function(t){return new(t||e)(m.Y36(v.Pu),m.Y36(g.d),m.Y36(K.o),m.Y36(p.o),m.Y36(p.o,4),m.Y36(kt.j))})),(0,i.Z)(ObjectActionSelectButton,"ɵcmp",m.Xpm({type:e,selectors:[["object-action-select-button"]],features:[m._Bn([p.o])],decls:2,vars:0,consts:[["label","LBL_SELECT"]],template:function(e,t){1&e&&(m.TgZ(0,"span"),m._UZ(1,"system-label",0),m.qZA())},dependencies:[S._],encapsulation:2})),ObjectActionSelectButton})(),os=(()=>{var e;class ObjectActionBeanToMailButton{constructor(e,t,s,n){(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"modal",void 0),(0,i.Z)(this,"model",void 0),(0,i.Z)(this,"viewContainerRef",void 0),this.language=e,this.modal=t,this.model=s,this.viewContainerRef=n}execute(){this.modal.openModal("ObjectActionMailModal",!0,this.viewContainerRef.injector).subscribe((e=>e.instance.parent=this.model))}}return e=ObjectActionBeanToMailButton,(0,i.Z)(ObjectActionBeanToMailButton,"ɵfac",(function(t){return new(t||e)(m.Y36(g.d),m.Y36(K.o),m.Y36(p.o),m.Y36(m.s_b))})),(0,i.Z)(ObjectActionBeanToMailButton,"ɵcmp",m.Xpm({type:e,selectors:[["object-action-beantomail-button"]],decls:2,vars:0,consts:[["label","LBL_EMAIL"]],template:function(e,t){1&e&&(m.TgZ(0,"span"),m._UZ(1,"system-label",0),m.qZA())},dependencies:[S._],encapsulation:2})),ObjectActionBeanToMailButton})();var ls=s(323),as=s(3917),ds=s(9774),rs=s(7693),cs=s(5681);let us=(()=>{var e;class ObjectFileActionMenu{constructor(e,t,s,n,o,l){(0,i.Z)(this,"broadcast",void 0),(0,i.Z)(this,"modelattachments",void 0),(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"elementRef",void 0),(0,i.Z)(this,"modalservice",void 0),(0,i.Z)(this,"injector",void 0),(0,i.Z)(this,"file",void 0),this.broadcast=e,this.modelattachments=t,this.language=s,this.elementRef=n,this.modalservice=o,this.injector=l}getDropdownLocationClass(){let e=this.elementRef.nativeElement.getBoundingClientRect();if(window.innerHeight-e.bottom<100)return"slds-dropdown--bottom"}deleteFile(){this.modalservice.confirm(this.language.getLabel("QST_DELETE_FILE"),this.language.getLabel("QST_DELETE_FILE",null,"short")).subscribe((e=>{e&&this.modelattachments.deleteAttachment(this.file.id)}))}downloadFile(){this.modelattachments.downloadAttachment(this.file.id,this.file.name)}edit(){this.modalservice.openModal("SpiceAttachmentsEditModal",!0,this.injector).subscribe((e=>{e.instance.attachment=this.file,e.instance.inputData={text:this.file.text,display_name:this.file.display_name,category_ids:this.file.category_ids?this.file.category_ids.split(","):[]}}))}}return e=ObjectFileActionMenu,(0,i.Z)(ObjectFileActionMenu,"ɵfac",(function(t){return new(t||e)(m.Y36(xe.f),m.Y36(ls.H),m.Y36(g.d),m.Y36(m.SBq),m.Y36(K.o),m.Y36(m.zs3))})),(0,i.Z)(ObjectFileActionMenu,"ɵcmp",m.Xpm({type:e,selectors:[["object-file-action-menu"]],inputs:{file:"file"},decls:17,vars:2,consts:[["system-dropdown-trigger","",1,"slds-dropdown-trigger","slds-dropdown-trigger--click"],["aria-haspopup","true",1,"slds-button","slds-button--icon-border-filled","slds-button--icon-x-small"],[3,"icon"],[1,"slds-dropdown","slds-dropdown--right",3,"ngClass"],["role","menu",1,"slds-dropdown__list"],["role","presentation",1,"slds-dropdown__item",3,"click"],["href","javascript:void(0);","role","menuitem","tabindex","0"],[1,"slds-truncate"],["label","LBL_EDIT"],["label","LBL_DOWNLOAD"],["href","javascript:void(0);","role","menuitem","tabindex","-1"],["label","LBL_DELETE"]],template:function(e,t){1&e&&(m.TgZ(0,"div",0)(1,"button",1),m._UZ(2,"system-button-icon",2),m.qZA(),m.TgZ(3,"div",3)(4,"ul",4)(5,"li",5),m.NdJ("click",(function(){return t.edit()})),m.TgZ(6,"a",6)(7,"span",7),m._UZ(8,"system-label",8),m.qZA()()(),m.TgZ(9,"li",5),m.NdJ("click",(function(){return t.downloadFile()})),m.TgZ(10,"a",6)(11,"span",7),m._UZ(12,"system-label",9),m.qZA()()(),m.TgZ(13,"li",5),m.NdJ("click",(function(){return t.deleteFile()})),m.TgZ(14,"a",10)(15,"span",7),m._UZ(16,"system-label",11),m.qZA()()()()()()),2&e&&(m.xp6(2),m.Q6J("icon","down"),m.xp6(1),m.Q6J("ngClass",t.getDropdownLocationClass()))},dependencies:[n.mk,w.J,S._,cs.l],encapsulation:2})),ObjectFileActionMenu})();const hs=["object-related-card-file",""];function ms(e,t){if(1&e&&m._UZ(0,"img",15),2&e){const e=m.oxw(2);m.Q6J("src","data:image/jpg;base64,"+e.file.thumbnail,m.LSH)}}function gs(e,t){if(1&e){const e=m.EpF();m.TgZ(0,"div",16),m.NdJ("click",(function(){m.CHM(e);const t=m.oxw(2);return m.KtG(t.previewFile())})),m._uU(1),m.qZA()}if(2&e){const e=m.oxw(2);m.Q6J("system-title",e.file.display_name),m.xp6(1),m.hij(" ",e.file.display_name," ")}}function ps(e,t){if(1&e){const e=m.EpF();m.TgZ(0,"div",16),m.NdJ("click",(function(){m.CHM(e);const t=m.oxw(2);return m.KtG(t.previewFile())})),m._uU(1),m.qZA()}if(2&e){const e=m.oxw(2);m.Q6J("system-title",e.file.filename),m.xp6(1),m.hij(" ",e.file.filename," ")}}function fs(e,t){if(1&e&&(m.TgZ(0,"div",21),m._uU(1),m.qZA()),2&e){const e=m.oxw(3);m.Q6J("system-title",e.file.filename),m.xp6(1),m.hij(" ",e.file.filename," ")}}function bs(e,t){if(1&e&&(m.TgZ(0,"div",17)(1,"ul",18)(2,"li",19),m._uU(3),m.qZA(),m.TgZ(4,"li",19),m._uU(5),m.qZA()(),m.YNc(6,fs,2,2,"div",20),m.qZA()),2&e){const e=m.oxw(2);m.xp6(2),m.Q6J("system-title",e.filedate),m.xp6(1),m.Oqu(e.filedate),m.xp6(1),m.Q6J("system-title",e.humanFileSize),m.xp6(1),m.Oqu(e.humanFileSize),m.xp6(1),m.Q6J("ngIf",!!e.file.display_name)}}function vs(e,t){if(1&e&&(m.TgZ(0,"div",22)(1,"div",23)(2,"span",24)(3,"span",25),m._uU(4,"Progress: 25%"),m.qZA()()(),m.TgZ(5,"div",26),m._uU(6),m.qZA()()),2&e){const e=m.oxw(2);m.xp6(2),m.Q6J("ngStyle",e.progressbarstyle),m.xp6(4),m.hij(" ",e.file.uploadprogress," % ")}}function Zs(e,t){if(1&e&&(m.TgZ(0,"div",27),m._UZ(1,"object-file-action-menu",28),m.qZA()),2&e){const e=m.oxw(2);m.xp6(1),m.Q6J("file",e.file)}}function _s(e,t){if(1&e){const e=m.EpF();m.TgZ(0,"div",2)(1,"figure",3)(2,"a",4),m.NdJ("click",(function(){m.CHM(e);const t=m.oxw();return m.KtG(t.previewFile())})),m.YNc(3,ms,1,1,"img",5),m.qZA(),m.TgZ(4,"figcaption",6)(5,"div",7)(6,"div",8),m._UZ(7,"system-file-icon",9),m.qZA(),m.TgZ(8,"div",10),m.YNc(9,gs,2,2,"div",11),m.YNc(10,ps,2,2,"div",11),m.YNc(11,bs,7,5,"div",12),m.YNc(12,vs,7,2,"div",13),m.qZA()()()(),m.YNc(13,Zs,2,1,"div",14),m.qZA()}if(2&e){const e=m.oxw();m.xp6(3),m.Q6J("ngIf",e.file.thumbnail),m.xp6(4),m.Q6J("filename",e.file.filename)("filemimetype",e.file.file_mime_type),m.xp6(2),m.Q6J("ngIf",!!e.file.display_name),m.xp6(1),m.Q6J("ngIf",!e.file.display_name),m.xp6(1),m.Q6J("ngIf",!e.uploading),m.xp6(1),m.Q6J("ngIf",e.uploading),m.xp6(1),m.Q6J("ngIf",!e.uploading)}}function ys(e,t){if(1&e&&m._UZ(0,"system-file-icon",9),2&e){const e=m.oxw(2);m.Q6J("filename",e.file.filename)("filemimetype",e.file.file_mime_type)}}function xs(e,t){if(1&e&&(m.TgZ(0,"div"),m._UZ(1,"img",15),m.qZA()),2&e){const e=m.oxw(2);m.xp6(1),m.Q6J("src","data:image/jpg;base64,"+e.file.thumbnail,m.LSH)}}function ws(e,t){if(1&e&&(m.TgZ(0,"a",39),m._uU(1),m.qZA()),2&e){const e=m.oxw(2);m.xp6(1),m.hij(" ",e.file.display_name," ")}}function Ts(e,t){if(1&e&&(m.TgZ(0,"a",39),m._uU(1),m.qZA()),2&e){const e=m.oxw(2);m.xp6(1),m.hij(" ",e.file.filename," ")}}function Cs(e,t){if(1&e&&(m.TgZ(0,"div",40),m._UZ(1,"object-file-action-menu",28),m.qZA()),2&e){const e=m.oxw(2);m.xp6(1),m.Q6J("file",e.file)}}function As(e,t){if(1&e&&(m.TgZ(0,"div",21),m._uU(1),m.qZA()),2&e){const e=m.oxw(3);m.Q6J("system-title",e.file.filename),m.xp6(1),m.hij(" ",e.file.filename," ")}}function ks(e,t){if(1&e&&(m.TgZ(0,"div",41)(1,"ul",18)(2,"li",19),m._uU(3),m.qZA(),m.TgZ(4,"li",19),m._uU(5),m.qZA()(),m.YNc(6,As,2,2,"div",20),m.qZA()),2&e){const e=m.oxw(2);m.xp6(2),m.Q6J("system-title",e.filedate),m.xp6(1),m.Oqu(e.filedate),m.xp6(1),m.Q6J("system-title",e.humanFileSize),m.xp6(1),m.Oqu(e.humanFileSize),m.xp6(1),m.Q6J("ngIf",!!e.file.display_name)}}function Ls(e,t){if(1&e&&(m.TgZ(0,"div",22)(1,"div",23)(2,"span",24)(3,"span",25),m._uU(4,"Progress: 25%"),m.qZA()()(),m.TgZ(5,"div",26),m._uU(6),m.qZA()()),2&e){const e=m.oxw(2);m.xp6(2),m.Q6J("ngStyle",e.progressbarstyle),m.xp6(4),m.hij(" ",e.file.uploadprogress," % ")}}function Is(e,t){if(1&e){const e=m.EpF();m.TgZ(0,"div",29)(1,"div",30),m.YNc(2,ys,1,2,"system-file-icon",31),m.YNc(3,xs,2,1,"div",32),m.qZA(),m.TgZ(4,"div",33)(5,"div",22)(6,"h3",34),m.NdJ("click",(function(){m.CHM(e);const t=m.oxw();return m.KtG(t.previewFile())})),m.YNc(7,ws,2,1,"a",35),m.YNc(8,Ts,2,1,"ng-template",null,36,m.W1O),m.qZA(),m.YNc(10,Cs,2,1,"div",37),m.qZA(),m.YNc(11,ks,7,5,"div",38),m.YNc(12,Ls,7,2,"div",13),m.qZA()()}if(2&e){const e=m.MAs(9),t=m.oxw();m.xp6(2),m.Q6J("ngIf",!t.file.thumbnail),m.xp6(1),m.Q6J("ngIf",t.file.thumbnail),m.xp6(3),m.Q6J("system-title",t.file.text),m.xp6(1),m.Q6J("ngIf",!!t.file.display_name)("ngIfElse",e),m.xp6(3),m.Q6J("ngIf",!t.uploading),m.xp6(1),m.Q6J("ngIf",!t.uploading),m.xp6(1),m.Q6J("ngIf",t.uploading)}}let Ms=(()=>{var e;class ObjectRelatedCardFile{constructor(e,t,s,n,o,l){(0,i.Z)(this,"modelattachments",void 0),(0,i.Z)(this,"userpreferences",void 0),(0,i.Z)(this,"modal",void 0),(0,i.Z)(this,"toast",void 0),(0,i.Z)(this,"helper",void 0),(0,i.Z)(this,"injector",void 0),(0,i.Z)(this,"file",{}),(0,i.Z)(this,"bigThumbnail",!1),this.modelattachments=e,this.userpreferences=t,this.modal=s,this.toast=n,this.helper=o,this.injector=l}get humanFileSize(){return this.modelattachments.humanFileSize(this.file.filesize)}get filedate(){return this.file.date?this.file.date.format(this.userpreferences.getDateFormat()):""}get uploading(){return this.file.hasOwnProperty("uploadprogress")}get progressbarstyle(){return{width:this.file.uploadprogress+"%"}}downloadFile(){this.uploading||this.modelattachments.downloadAttachment(this.file.id,this.file.filename)}previewFile(){if(this.uploading)this.toast.sendToast("upload still in progress","info");else if(this.file.file_mime_type){let e=this.file.file_mime_type.toLowerCase().split("/");switch(e[0].trim()){case"image":if("svg+xml"===e[1])this.modal.openModal("SystemObjectPreviewModal").subscribe((e=>{e.instance.name=this.file.filename,e.instance.type=this.file.file_mime_type.toLowerCase(),this.modelattachments.getAttachment(this.file.id).subscribe({next:t=>{e.instance.data=atob(t)},error:t=>{e.instance.loadingerror=!0}})}));else this.modal.openModal("SystemImagePreviewModal").subscribe((e=>{e.instance.imgname=this.file.filename,e.instance.imgtype=this.file.file_mime_type.toLowerCase(),this.modelattachments.getAttachment(this.file.id).subscribe({next:t=>{e.instance.imgsrc="data:"+this.file.file_mime_type.toLowerCase()+";base64,"+t},error:t=>{e.instance.loadingerror=!0}})}));break;case"text":case"audio":case"video":this.modal.openModal("SystemObjectPreviewModal").subscribe((e=>{e.instance.name=this.file.filename,e.instance.type=this.file.file_mime_type.toLowerCase(),this.modelattachments.getAttachment(this.file.id).subscribe({next:t=>{e.instance.data=atob(t)},error:t=>{e.instance.loadingerror=!0}})}));break;case"application":if("pdf"===e[1])this.modal.openModal("SystemObjectPreviewModal").subscribe((e=>{e.instance.name=this.file.filename,e.instance.type=this.file.file_mime_type.toLowerCase(),this.modelattachments.getAttachment(this.file.id).subscribe({next:t=>{e.instance.data=atob(t)},error:t=>{e.instance.loadingerror=!0}})}));else{if("msg"===this.file.filename.split(".").splice(-1,1)[0].toLowerCase())this.modal.openModal("EmailPreviewModal",!0,this.injector).subscribe((e=>{e.instance.name=this.file.filename,e.instance.type=this.file.file_mime_type.toLowerCase(),e.instance.file=this.file}));else this.downloadFile()}break;default:this.downloadFile()}}}}return e=ObjectRelatedCardFile,(0,i.Z)(ObjectRelatedCardFile,"ɵfac",(function(t){return new(t||e)(m.Y36(ls.H),m.Y36(M.z),m.Y36(K.o),m.Y36(pe.A),m.Y36(rt._),m.Y36(m.zs3))})),(0,i.Z)(ObjectRelatedCardFile,"ɵcmp",m.Xpm({type:e,selectors:[["","object-related-card-file",""]],inputs:{file:"file",bigThumbnail:"bigThumbnail"},attrs:hs,decls:3,vars:2,consts:[["class","slds-file slds-file_card slds-has-title slds-m-left--small","style","width: 300px",4,"ngIf","ngIfElse"],["smallThumbnailContainer",""],[1,"slds-file","slds-file_card","slds-has-title","slds-m-left--small",2,"width","300px"],[2,"height","300px"],["href","javascript:void(0)",1,"slds-file__crop",2,"padding-top","245px",3,"click"],[3,"src",4,"ngIf"],[1,"slds-file__title","slds-file__title_card","slds-file-has-actions",2,"height","55px"],[1,"slds-media","slds-media_small","slds-media_center","slds-size--1-of-1"],[1,"slds-media__figure","slds-line-height_reset"],["divClass","","size","'small'",3,"filename","filemimetype"],[1,"slds-media__body"],["class","slds-file__text slds-truncate",3,"system-title","click",4,"ngIf"],["class","slds-tile__detail slds-text-body--small slds-truncate",4,"ngIf"],["class","slds-grid slds-grid_vertical-align-center slds-grid--align-spread slds-has-flexi-truncate",4,"ngIf"],["class","slds-file__actions-menu",4,"ngIf"],[3,"src"],[1,"slds-file__text","slds-truncate",3,"system-title","click"],[1,"slds-tile__detail","slds-text-body--small","slds-truncate"],[1,"slds-list--horizontal","slds-has-dividers--left"],[1,"slds-item",3,"system-title"],["class","slds-text-color--inverse-weak slds-truncate",3,"system-title",4,"ngIf"],[1,"slds-text-color--inverse-weak","slds-truncate",3,"system-title"],[1,"slds-grid","slds-grid_vertical-align-center","slds-grid--align-spread","slds-has-flexi-truncate"],[1,"slds-progress-bar"],[1,"slds-progress-bar__value",3,"ngStyle"],[1,"slds-assistive-text"],[1,"slds-text-align--right",2,"width","50px"],[1,"slds-file__actions-menu"],[3,"file"],[1,"slds-media","slds-truncate",2,"width","300px"],[1,"slds-m-right--x-small","slds-align--absolute-center",2,"width","30px","height","30px"],["divClass","","size","'small'",3,"filename","filemimetype",4,"ngIf"],[4,"ngIf"],[1,"slds-media__body",2,"width","260px"],[1,"slds-truncate","slds-text-heading--x-small","slds-p-right--xxx-small",3,"system-title","click"],["href","javascript:void(0);",4,"ngIf","ngIfElse"],["fileNameContainer",""],["class","slds-shrink-none",4,"ngIf"],["class","slds-tile__detail slds-text-body--small",4,"ngIf"],["href","javascript:void(0);"],[1,"slds-shrink-none"],[1,"slds-tile__detail","slds-text-body--small"]],template:function(e,t){if(1&e&&(m.YNc(0,_s,14,8,"div",0),m.YNc(1,Is,13,8,"ng-template",null,1,m.W1O)),2&e){const e=m.MAs(2);m.Q6J("ngIf",t.bigThumbnail)("ngIfElse",e)}},dependencies:[n.O5,n.PC,rs.T,k.S,us],encapsulation:2})),ObjectRelatedCardFile})();const Ss=["fileupload"];function Js(e,t){if(1&e&&(m.TgZ(0,"a",16)(1,"span",17),m._UZ(2,"system-label",18),m._uU(3),m.qZA()()),2&e){const e=m.oxw();m.xp6(2),m.Q6J("label",e.componentconfig.label?e.componentconfig.label+"":"LBL_FILES"),m.xp6(1),m.AsE(" (",e.filteredFiles.length,"/",e.modelattachments.files.length,")")}}function Os(e,t){if(1&e&&(m.TgZ(0,"span",17),m._UZ(1,"system-label",18),m._uU(2),m.qZA()),2&e){const e=m.oxw();m.xp6(1),m.Q6J("label",e.componentconfig.label?e.componentconfig.label+"":"LBL_FILES"),m.xp6(1),m.AsE(" (",e.filteredFiles.length,"/",e.modelattachments.files.length,")")}}function Ns(e,t){if(1&e){const e=m.EpF();m.TgZ(0,"system-utility-icon",19),m.NdJ("click",(function(t){m.CHM(e);const s=m.oxw();return m.KtG(s.toggleOpen(t))})),m.qZA()}if(2&e){const e=m.oxw();m.Q6J("@animateicon",e.isopen?"open":"closed")}}function Fs(e,t){if(1&e){const e=m.EpF();m.TgZ(0,"div",20)(1,"div",21),m._UZ(2,"system-utility-icon",22),m.TgZ(3,"input",23),m.NdJ("ngModelChange",(function(t){m.CHM(e);const s=m.oxw();return m.KtG(s.setFilteredFiles("input",t))})),m.qZA()()()}if(2&e){const e=m.oxw();m.xp6(3),m.Q6J("ngModel",e.filterTerm)}}function qs(e,t){1&e&&(m.TgZ(0,"div",31),m._UZ(1,"system-utility-icon",32),m.qZA())}function Es(e,t){if(1&e&&(m.TgZ(0,"option",33),m._UZ(1,"system-label",18),m.qZA()),2&e){const e=t.$implicit;m.Q6J("value",e.id),m.xp6(1),m.Q6J("label",e.label)}}function Ys(e,t){if(1&e){const e=m.EpF();m.TgZ(0,"div",24),m.YNc(1,qs,2,0,"div",25),m.TgZ(2,"div",26)(3,"select",27),m.NdJ("ngModelChange",(function(t){m.CHM(e);const s=m.oxw();return m.KtG(s.setFilteredFiles("category",t))})),m.TgZ(4,"option",28),m._UZ(5,"system-label",29),m.qZA(),m.YNc(6,Es,2,2,"option",30),m.qZA()()()}if(2&e){const e=m.oxw();m.xp6(1),m.Q6J("ngIf",e.width>600),m.xp6(2),m.Q6J("ngModel",e.selectedCategoryId),m.xp6(3),m.Q6J("ngForOf",e.categories)}}function Ds(e,t){if(1&e){const e=m.EpF();m.TgZ(0,"button",34),m.NdJ("click",(function(){m.CHM(e);const t=m.oxw();return m.KtG(t.selectFile())})),m._UZ(1,"system-utility-icon",35),m.qZA()}}function Qs(e,t){if(1&e&&m._UZ(0,"div",40),2&e){const e=t.$implicit,s=m.oxw(2);m.Q6J("file",e)("bigThumbnail",null==s.componentconfig?null:s.componentconfig.bigThumbnail)}}function Us(e,t){1&e&&(m.TgZ(0,"div",41),m._UZ(1,"system-spinner"),m.qZA())}function Rs(e,t){if(1&e&&(m.TgZ(0,"div",36)(1,"div",37),m.YNc(2,Qs,1,2,"div",38),m.qZA(),m.YNc(3,Us,2,0,"div",39),m.qZA()),2&e){const e=m.oxw();m.Q6J("@displaycard",void 0),m.xp6(2),m.Q6J("ngForOf",e.filteredFiles),m.xp6(1),m.Q6J("ngIf",e.modelattachments.loading)}}let js=(()=>{var e;class ObjectRelatedlistFiles{constructor(e,t,s,n,o,l,a,d,r,c,u,h,m){(0,i.Z)(this,"modelattachments",void 0),(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"model",void 0),(0,i.Z)(this,"renderer",void 0),(0,i.Z)(this,"toast",void 0),(0,i.Z)(this,"footer",void 0),(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"backend",void 0),(0,i.Z)(this,"broadcast",void 0),(0,i.Z)(this,"elementRef",void 0),(0,i.Z)(this,"configurationService",void 0),(0,i.Z)(this,"modal",void 0),(0,i.Z)(this,"injector",void 0),(0,i.Z)(this,"files",[]),(0,i.Z)(this,"filteredFiles",[]),(0,i.Z)(this,"fileupload",void 0),(0,i.Z)(this,"componentconfig",{}),(0,i.Z)(this,"isopen",!0),(0,i.Z)(this,"selectedCategoryId",""),(0,i.Z)(this,"defaultCategoryId",""),(0,i.Z)(this,"broadcastSubscription",{}),(0,i.Z)(this,"filterTerm",""),(0,i.Z)(this,"categories",[]),(0,i.Z)(this,"filterTimeout",void 0),(0,i.Z)(this,"subscriptions",new G.w0),this.modelattachments=e,this.language=t,this.model=s,this.renderer=n,this.toast=o,this.footer=l,this.metadata=a,this.backend=d,this.broadcast=r,this.elementRef=c,this.configurationService=u,this.modal=h,this.injector=m,this.broadcastSubscription=this.broadcast.message$.subscribe((e=>{this.handleMessage(e)}))}ngAfterViewInit(){this.setModelData(),this.componentconfig.hasOwnProperty("defaultcategory")&&this.componentconfig.defaultcategory&&(this.defaultCategoryId=this.componentconfig.defaultcategory),this.defaultCategoryId||this.selectedCategoryId||(this.selectedCategoryId="*"),setTimeout((()=>this.loadFiles()),10),this.subscriptions.add(this.broadcast.message$.subscribe((e=>this.handleMessage(e))))}ngOnChanges(e){this.componentconfig.hasOwnProperty("defaultcategory")&&this.componentconfig.defaultcategory&&(this.defaultCategoryId=this.componentconfig.defaultcategory),this.defaultCategoryId||this.selectedCategoryId||(this.selectedCategoryId="*")}loadCategories(){if(!this.selectedCategoryId&&this.defaultCategoryId&&(this.selectedCategoryId=this.defaultCategoryId),this.configurationService.getData("spiceattachments_categories"))return this.categories=this.configurationService.getData("spiceattachments_categories");this.backend.getRequest("common/spiceattachments/categories/"+this.model.module).subscribe((e=>{e&&Array.isArray(e)&&(this.categories=e,this.configurationService.setData("spiceattachments_categories",e))}))}handleMessage(e){if("model.merge"==e.messagetype&&e.messagedata.module==this.model.module&&e.messagedata.id==this.model.id&&this.loadFiles(),"attachments.loaded"===e.messagetype)e.messagedata.reload&&this.setFilteredFiles("category",this.selectedCategoryId)}loadFiles(){this.files.length>0&&this.doupload(this.files),this.modelattachments.getAttachments().subscribe((e=>{this.filteredFiles=e,this.loadCategories(),this.setFilteredFiles("category",this.selectedCategoryId)}))}setModelData(){this.modelattachments.module=this.model.module,this.modelattachments.id=this.model.id}toggleOpen(e){e.stopPropagation(),this.isopen=!this.isopen}get width(){return this.elementRef.nativeElement.getBoundingClientRect().width}preventdefault(e){(e.dataTransfer.items.length>=1&&this.hasOneItemsFile(e.dataTransfer.items)||e.dataTransfer.files.length>0)&&(e.preventDefault(),e.stopPropagation(),e.dataTransfer.dropEffect="copy")}hasOneItemsFile(e){for(let t of e)if("file"==t.kind)return!0;return!1}onDrop(e){this.preventdefault(e);let t=e.dataTransfer.files;t&&t.length>=1&&this.doupload(t)}fileDrop(e){if(this.componentconfig.disableupload&&!0===this.componentconfig.disableupload)return this.toast.sendToast(this.language.getLabel("LBL_UPLOAD_IS_DISABLED"),"error"),!1;e&&e.length>=1&&this.doupload(e)}selectFile(){let e=new MouseEvent("click",{bubbles:!0});this.fileupload.element.nativeElement.dispatchEvent(e)}uploadFile(){let e=this.fileupload.element.nativeElement.files;this.doupload(e)}doupload(e){if(this.componentconfig.revComponent&&1!=e.length)return this.toast.sendToast(this.language.getLabel("LBL_ONE_FILE_ONLY"),"error"),!1;!this.selectedCategoryId&&this.defaultCategoryId&&(this.selectedCategoryId=this.defaultCategoryId),this.modelattachments.uploadAttachmentsBase64(e,"*"==this.selectedCategoryId?this.defaultCategoryId:this.selectedCategoryId).subscribe({next:t=>{this.componentconfig.revComponent&&this.openRevisionModal(e)},error:()=>{this.toast.sendToast(this.language.getLabel("LBL_ERROR"),"error")}})}openRevisionModal(e){let t=this.modal.await(this.language.getLabel("LBL_LOADING"));this.backend.getRequest("common/spiceattachments/module/"+this.model.module+"/"+this.model.id).subscribe((s=>{t.emit(!0),s?this.modal.openModal("AgreementsAddRevisionModal",!0,this.injector).subscribe((t=>{t.instance.files=e,t.instance.revComponent=this.componentconfig,t.instance.spiceattachment=s[0],t.instance.responseSubject.subscribe({next:e=>{e&&(this.toast.sendToast("MSG_REVISION_CREATED","success"),this.setModelData())}})})):this.toast.sendToast(this.language.getLabel("LBL_ERROR"),"error")}))}setFilteredFiles(e,t){switch(e){case"category":this.selectedCategoryId=t,this.filteredFiles="*"!=t&&t?this.modelattachments.files.filter((e=>!!e.category_ids&&e.category_ids.includes(t))):this.modelattachments.files;break;case"input":const e=t.toLowerCase();this.filterTerm=t,window.clearTimeout(this.filterTimeout),this.filterTimeout=window.setTimeout((()=>{this.filteredFiles=0==t.length?this.modelattachments.files:this.modelattachments.files.filter((t=>t.filename.toLowerCase().includes(e)||!!t.display_name&&t.display_name.toLowerCase().includes(e)||!!t.text&&t.text.toLowerCase().includes(e)))}),600)}}toggleBigThumbnail(){this.componentconfig||(this.componentconfig={}),this.componentconfig.bigThumbnail=!this.componentconfig.bigThumbnail}ngOnDestroy(){this.broadcastSubscription.unsubscribe()}}return e=ObjectRelatedlistFiles,(0,i.Z)(ObjectRelatedlistFiles,"ɵfac",(function(t){return new(t||e)(m.Y36(ls.H),m.Y36(g.d),m.Y36(p.o),m.Y36(m.Qsj),m.Y36(pe.A),m.Y36(as.M),m.Y36(v.Pu),m.Y36(ee.y),m.Y36(xe.f),m.Y36(m.SBq),m.Y36(Z.C),m.Y36(K.o),m.Y36(m.zs3))})),(0,i.Z)(ObjectRelatedlistFiles,"ɵcmp",m.Xpm({type:e,selectors:[["object-relatedlist-files"]],viewQuery:function(e,t){if(1&e&&m.Gf(Ss,7,m.s_b),2&e){let e;m.iGM(e=m.CRH())&&(t.fileupload=e.first)}},inputs:{files:"files",componentconfig:"componentconfig"},features:[m._Bn([ls.H]),m.TTD],decls:17,vars:10,consts:[[1,"slds-card","slds-card_boundary","slds-m-bottom--medium",3,"system-drop-file"],[1,"slds-card__header","slds-grid"],[1,"slds-size--1-of-1","slds-grid","slds-grid--vertical-align-center"],[3,"icon","size"],[1,"slds-media__body","slds-truncate","slds-grid","slds-grid--vertical-align-center"],["href","javascript:void(0);","class","slds-text-link--reset",4,"ngIf"],["class","slds-text-heading--small",4,"ngIf"],["class","slds-m-horizontal--xx-small","icon","up","size","x-small",3,"click",4,"ngIf"],["system-title","LBL_TOGGLE_BIG_THUMBNAIL",1,"slds-col--bump-left","slds-button","slds-button--icon-border","slds-m-right--xxx-small",3,"click"],["size","x-small",3,"icon"],["class","slds-form-element slds-m-horizontal--xxx-small",4,"ngIf"],["class","slds-form-element slds-m-horizontal--xxx-small slds-grid slds-grid--vertical-align-center",4,"ngIf"],["class","slds-m-left--xxx-small slds-button slds-button--icon-border","system-title","LBL_UPLOAD",3,"click",4,"ngIf"],["type","file","multiple","",2,"display","none",3,"click","change"],["fileupload",""],["class","slds-card__body slds-card__body_inner",4,"ngIf"],["href","javascript:void(0);",1,"slds-text-link--reset"],[1,"slds-text-heading--small"],[3,"label"],["icon","up","size","x-small",1,"slds-m-horizontal--xx-small",3,"click"],[1,"slds-form-element","slds-m-horizontal--xxx-small"],[1,"slds-form-element__control","slds-input-has-icon","slds-input-has-icon_left-right"],["icon","search","addclasses","slds-input__icon slds-input__icon--left"],["type","text",1,"slds-input",3,"ngModel","ngModelChange"],[1,"slds-form-element","slds-m-horizontal--xxx-small","slds-grid","slds-grid--vertical-align-center"],["system-title","LBL_CATEGORIES","class","slds-m-horizontal--xxx-small",4,"ngIf"],[1,"slds-select_container","slds-m-horizontal--xxx-small"],[1,"slds-select",2,"min-width","70px",3,"ngModel","ngModelChange"],["value","*"],["label","LBL_ALL"],[3,"value",4,"ngFor","ngForOf"],["system-title","LBL_CATEGORIES",1,"slds-m-horizontal--xxx-small"],["icon","tile_card_list","size","x-small"],[3,"value"],["system-title","LBL_UPLOAD",1,"slds-m-left--xxx-small","slds-button","slds-button--icon-border",3,"click"],["size","x-small","icon","upload"],[1,"slds-card__body","slds-card__body_inner"],[1,"slds-card__body--inner","slds-grid","slds-wrap","slds-grid--pull-padded"],["object-related-card-file","","class","slds-tile slds-card__tile slds-p-horizontal--small slds-hint-parent",3,"file","bigThumbnail",4,"ngFor","ngForOf"],["class","slds-p-around--large slds-align--absolute-center",4,"ngIf"],["object-related-card-file","",1,"slds-tile","slds-card__tile","slds-p-horizontal--small","slds-hint-parent",3,"file","bigThumbnail"],[1,"slds-p-around--large","slds-align--absolute-center"]],template:function(e,t){if(1&e){const e=m.EpF();m.TgZ(0,"div",0),m.NdJ("system-drop-file",(function(e){return t.fileDrop(e)})),m.TgZ(1,"div",1)(2,"header",2),m._UZ(3,"system-icon",3),m.TgZ(4,"div",4)(5,"h2"),m.YNc(6,Js,4,3,"a",5),m.YNc(7,Os,3,3,"span",6),m.qZA(),m.YNc(8,Ns,1,1,"system-utility-icon",7),m.qZA(),m.TgZ(9,"button",8),m.NdJ("click",(function(){return t.toggleBigThumbnail()})),m._UZ(10,"system-utility-icon",9),m.qZA(),m.YNc(11,Fs,4,1,"div",10),m.YNc(12,Ys,7,3,"div",11),m.YNc(13,Ds,2,0,"button",12),m.qZA(),m.TgZ(14,"input",13,14),m.NdJ("click",(function(){m.CHM(e);const t=m.MAs(15);return m.KtG(t.value=null)}))("change",(function(){return t.uploadFile()})),m.qZA()(),m.YNc(16,Rs,4,3,"div",15),m.qZA()}2&e&&(m.xp6(3),m.Q6J("icon","file")("size","small"),m.xp6(3),m.Q6J("ngIf",!t.componentconfig.alwaysExpanded),m.xp6(1),m.Q6J("ngIf",t.componentconfig.alwaysExpanded),m.xp6(1),m.Q6J("ngIf",t.modelattachments.files.length>0&&!t.componentconfig.alwaysExpanded),m.xp6(2),m.Q6J("icon",null!=t.componentconfig&&t.componentconfig.bigThumbnail?"file":"ad_set"),m.xp6(1),m.Q6J("ngIf",!t.componentconfig.disableFilter&&t.width>500),m.xp6(1),m.Q6J("ngIf",!t.componentconfig.disableCategories),m.xp6(1),m.Q6J("ngIf",!t.componentconfig.disableupload),m.xp6(3),m.Q6J("ngIf",t.isopen))},dependencies:[n.sg,n.O5,l.YN,l.Kr,l.Fj,l.EJ,l.JJ,l.On,T.f,S._,Jt.W,C.r,ds.M,k.S,Ms],encapsulation:2,data:{animation:[(0,b.X$)("animateicon",[(0,b.SB)("open",(0,b.oB)({transform:"scale(1, 1)"})),(0,b.SB)("closed",(0,b.oB)({transform:"scale(1, -1)"})),(0,b.eR)("open => closed",[(0,b.jt)(".5s")]),(0,b.eR)("closed => open",[(0,b.jt)(".5s")])]),(0,b.X$)("displaycard",[(0,b.eR)(":enter",[(0,b.oB)({opacity:0,height:"0px",overflow:"hidden"}),(0,b.jt)(".5s",(0,b.oB)({height:"*",opacity:1})),(0,b.oB)({overflow:"unset"})]),(0,b.eR)(":leave",[(0,b.oB)({overflow:"hidden"}),(0,b.jt)(".5s",(0,b.oB)({height:"0px",opacity:0}))])])]}})),ObjectRelatedlistFiles})();var Bs=s(9062);let Gs=(()=>{var e;class ObjectActionMailModal{constructor(e,t,s,n,o,l,a){(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"model",void 0),(0,i.Z)(this,"view",void 0),(0,i.Z)(this,"backend",void 0),(0,i.Z)(this,"prefs",void 0),(0,i.Z)(this,"modal",void 0),(0,i.Z)(this,"parent",null),(0,i.Z)(this,"self",null),(0,i.Z)(this,"sending",!1),(0,i.Z)(this,"titlelabel","LBL_BEANTOMAIL"),(0,i.Z)(this,"mailsent",new m.vpe),(0,i.Z)(this,"fieldset",void 0),this.language=e,this.metadata=t,this.model=s,this.view=n,this.backend=o,this.prefs=l,this.modal=a,this.model.module="Emails",this.view.isEditable=!0,this.view.setEditMode();let d=this.metadata.getComponentConfig("ObjectActionMailModal");this.fieldset=d.fieldset}ngOnInit(){this.model.initializeModel(this.parent),this.setParentData()}get isDisabled(){let e=this.model.getFieldValue("recipient_addresses"),t=this.model.getFieldValue("mailbox_id"),s=this.model.getFieldValue("name"),i=this.model.getFieldValue("body"),n=e?e.find((e=>"to"==e.address_type)):void 0;return!(s&&i&&t&&e&&n)||this.sending}setParentData(){this.model.setField("parent_type",this.parent.module),this.model.setField("parent_id",this.parent.id),this.model.setField("parent_name",this.parent.data.summary_text)}close(){this.self.destroy()}sendEmail(){this.modal.openModal("SystemLoadingModal",!1).subscribe((e=>{e.instance.messagelabel="LBL_SENDING",this.sending=!0,this.model.setFields({type:"out",to_be_sent:"1",from_addr:this.model.getField("from_addr_name"),to_addrs:this.model.getField("to_addrs_names")}),this.model.save().subscribe((t=>{e.instance.self.destroy(),this.mailsent.emit(!0),this.close()}),(t=>{e.instance.self.destroy(),this.sending=!1}))}))}}return e=ObjectActionMailModal,(0,i.Z)(ObjectActionMailModal,"ɵfac",(function(t){return new(t||e)(m.Y36(g.d),m.Y36(v.Pu),m.Y36(p.o),m.Y36(Fe.e),m.Y36(ee.y),m.Y36(M.z),m.Y36(K.o))})),(0,i.Z)(ObjectActionMailModal,"ɵcmp",m.Xpm({type:e,selectors:[["object-action-mail-modal"]],inputs:{parent:"parent",titlelabel:"titlelabel"},outputs:{mailsent:"mailsent"},features:[m._Bn([Fe.e,p.o])],decls:11,vars:3,consts:[["size","large"],[3,"close"],[3,"label"],["direction","vertical",3,"fieldset"],[1,"slds-p-around_xx-small"],[1,"slds-button","slds-button--neutral",3,"click"],["label","LBL_CANCEL"],[1,"slds-button","slds-button--brand",3,"disabled","click"],["label","LBL_SEND"]],template:function(e,t){1&e&&(m.TgZ(0,"system-modal",0)(1,"system-modal-header",1),m.NdJ("close",(function(){return t.close()})),m._UZ(2,"system-label",2),m.qZA(),m.TgZ(3,"system-modal-content"),m._UZ(4,"object-record-fieldset",3)(5,"object-relatedlist-files",4),m.qZA(),m.TgZ(6,"system-modal-footer")(7,"button",5),m.NdJ("click",(function(){return t.close()})),m._UZ(8,"system-label",6),m.qZA(),m.TgZ(9,"button",7),m.NdJ("click",(function(){return t.sendEmail()})),m._UZ(10,"system-label",8),m.qZA()()()),2&e&&(m.xp6(2),m.Q6J("label",t.titlelabel),m.xp6(2),m.Q6J("fieldset",t.fieldset),m.xp6(5),m.Q6J("disabled",t.isDisabled))},dependencies:[S._,Ee.j,Ye.x,De.p,Qe.y,js,Bs.d],encapsulation:2})),ObjectActionMailModal})();var Ps=s(7579),Hs=s(9751),zs=s(1604),Vs=s(4663),Ks=s(7763);function $s(e,t){if(1&e){const e=m.EpF();m.TgZ(0,"button",9),m.NdJ("click",(function(){m.CHM(e);const t=m.oxw();return m.KtG(t.navigateDetails())})),m._UZ(1,"system-button-icon",10),m.qZA()}}function Xs(e,t){if(1&e&&(m.ynx(0),m.TgZ(1,"dt",11)(2,"span",12),m._UZ(3,"system-label-fieldname",13),m.qZA()(),m.TgZ(4,"dd",14),m._UZ(5,"field-container",15),m.qZA(),m.BQk()),2&e){const e=t.$implicit,s=m.oxw();m.xp6(3),m.Q6J("module",s.model.module)("field",e.field),m.xp6(2),m.Q6J("field",e.field)("fieldconfig",e.fieldconfig)("fielddisplayclass","slds-truncate")}}let Ws=(()=>{var e;class ObjectRelatedDuplicateTile{constructor(e,t,s,n,o){(0,i.Z)(this,"model",void 0),(0,i.Z)(this,"modal",void 0),(0,i.Z)(this,"view",void 0),(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"enableLink",!0),(0,i.Z)(this,"enableButtonLink",!1),(0,i.Z)(this,"fieldset",""),this.model=e,this.modal=t,this.view=s,this.language=n,this.metadata=o,this.view.displayLabels=!1}ngOnInit(){let e=this.metadata.getComponentConfig("ObjectRelatedDuplicateTile",this.model.module);this.fieldset=e.fieldset}getFields(){return this.metadata.getFieldSetFields(this.fieldset)}navigateDetails(){this.modal.closeAllModals(),this.model.goDetail()}}return e=ObjectRelatedDuplicateTile,(0,i.Z)(ObjectRelatedDuplicateTile,"ɵfac",(function(t){return new(t||e)(m.Y36(p.o),m.Y36(K.o),m.Y36(Fe.e),m.Y36(g.d),m.Y36(v.Pu))})),(0,i.Z)(ObjectRelatedDuplicateTile,"ɵcmp",m.Xpm({type:e,selectors:[["object-related-duplicate-tile"]],inputs:{enableLink:"enableLink",enableButtonLink:"enableButtonLink"},features:[m._Bn([Fe.e])],decls:11,vars:5,consts:[[1,"slds-tile","slds-box","slds-media","slds-card__tile","slds-p-vertical--small","slds-p-horizontal--small","slds-hint-parent"],[3,"module","size"],[1,"slds-media__body"],[1,"slds-grid","slds-grid--align-spread","slds-has-flexi-truncate"],[1,"slds-truncate","slds-text-heading--small","slds-m-bottom--small"],["class","slds-button slds-button--icon-border",3,"click",4,"ngIf"],[1,"slds-tile__detail","slds-text-body--small"],[1,"slds-dl--horizontal"],[4,"ngFor","ngForOf"],[1,"slds-button","slds-button--icon-border",3,"click"],["icon","open"],[1,"slds-dl--horizontal__label","slds-truncate"],[1,"slds-truncate"],[3,"module","field"],[1,"slds-dl--horizontal__detail","slds-tile__meta"],[3,"field","fieldconfig","fielddisplayclass"]],template:function(e,t){1&e&&(m.TgZ(0,"div",0),m._UZ(1,"system-icon",1),m.TgZ(2,"div",2)(3,"div",3)(4,"h3",4)(5,"span"),m._uU(6),m.qZA()(),m.YNc(7,$s,2,0,"button",5),m.qZA(),m.TgZ(8,"div",6)(9,"dl",7),m.YNc(10,Xs,6,5,"ng-container",8),m.qZA()()()()),2&e&&(m.xp6(1),m.Q6J("module",t.model.module)("size","small"),m.xp6(5),m.Oqu(t.model.data.summary_text),m.xp6(1),m.Q6J("ngIf",t.enableButtonLink),m.xp6(3),m.Q6J("ngForOf",t.getFields()))},dependencies:[n.sg,n.O5,qe.j,w.J,T.f,Ge.h],encapsulation:2})),ObjectRelatedDuplicateTile})();const ei=function(e,t){return{module:e,data:t}};function ti(e,t){if(1&e&&m._UZ(0,"object-related-duplicate-tile",10),2&e){const e=t.$implicit,s=m.oxw();m.Q6J("system-model-provider",m.WLB(3,ei,s.model.module,e))("enableLink",!1)("enableButtonLink",!0)}}let si=(()=>{var e;class ObjectEditModalDialogDuplicatesPanel{constructor(e,t,s,n){(0,i.Z)(this,"model",void 0),(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"view",void 0),(0,i.Z)(this,"close",new m.vpe),(0,i.Z)(this,"fieldset",""),this.model=e,this.metadata=t,this.language=s,this.view=n,this.view.isEditable=!1}ngOnInit(){let e=this.metadata.getComponentConfig("GlobalModalDialogDuplicates",this.model.module);this.fieldset=e.fieldset}hidePanel(){this.close.emit(!0)}}return e=ObjectEditModalDialogDuplicatesPanel,(0,i.Z)(ObjectEditModalDialogDuplicatesPanel,"ɵfac",(function(t){return new(t||e)(m.Y36(p.o),m.Y36(v.Pu),m.Y36(g.d),m.Y36(Fe.e))})),(0,i.Z)(ObjectEditModalDialogDuplicatesPanel,"ɵcmp",m.Xpm({type:e,selectors:[["object-edit-modal-dialog-duplicates-panel"]],outputs:{close:"close"},features:[m._Bn([Fe.e])],decls:12,vars:3,consts:[[1,"slds-card"],[1,"slds-card__header","slds-p-around--small","slds-theme--info","slds-grid","slds-grid_vertical-align-center","slds-grid--align-spread"],[1,"slds-text-heading--small"],["label","LBL_DUPLICATES"],["label","LBL_OF"],[1,"slds-button","slds-button--icon","slds-button--icon-border-filled",3,"click"],["icon","close"],[1,"slds-card__body","slds-card__body_inner"],[1,"slds-grid","slds-wrap","slds-grid_pull-padded"],["class","slds-size--1-of-1",3,"system-model-provider","enableLink","enableButtonLink",4,"ngFor","ngForOf"],[1,"slds-size--1-of-1",3,"system-model-provider","enableLink","enableButtonLink"]],template:function(e,t){1&e&&(m.TgZ(0,"div",0)(1,"div",1)(2,"h2",2),m._UZ(3,"system-label",3),m._uU(4),m._UZ(5,"system-label",4),m._uU(6),m.qZA(),m.TgZ(7,"button",5),m.NdJ("click",(function(){return t.hidePanel()})),m._UZ(8,"system-button-icon",6),m.qZA()(),m.TgZ(9,"div",7)(10,"ul",8),m.YNc(11,ti,1,6,"object-related-duplicate-tile",9),m.qZA()()()),2&e&&(m.xp6(4),m.hij(" (",t.model.duplicates.length," "),m.xp6(2),m.hij(" ",t.model.duplicatecount,")"),m.xp6(5),m.Q6J("ngForOf",t.model.duplicates))},dependencies:[n.sg,w.J,S._,Ks.u,Ws],encapsulation:2})),ObjectEditModalDialogDuplicatesPanel})();var ii=s(4347);const ni=["modalContent"],oi=function(e){return{"slds-hidden":e}};function li(e,t){if(1&e){const e=m.EpF();m.TgZ(0,"button",9),m.NdJ("click",(function(){m.CHM(e);const t=m.oxw();return m.KtG(t.showDuplicates=!t.showDuplicates)})),m.TgZ(1,"span",10),m._uU(2),m.qZA(),m._UZ(3,"system-label",11),m.qZA()}if(2&e){const e=m.oxw();m.Q6J("disabled",0==e.model.duplicates.length)("ngClass",m.VKq(3,oi,e.showDuplicatesTable)),m.xp6(2),m.Oqu(e.model.duplicateChecking?"":e.model.duplicatecount)}}function ai(e,t){if(1&e){const e=m.EpF();m.TgZ(0,"div",16)(1,"object-edit-modal-dialog-duplicates-panel",1),m.NdJ("close",(function(){m.CHM(e);const t=m.oxw(2);return m.KtG(t.showDuplicates=!1)})),m.qZA()()}}function di(e,t){if(1&e&&(m.TgZ(0,"div",12)(1,"div",13),m._UZ(2,"object-edit-modal-dialog-container",14),m.qZA(),m.YNc(3,ai,2,0,"div",15),m.qZA()),2&e){const e=m.oxw();m.xp6(2),m.Q6J("componentSet",e.componentconfig.componentset),m.xp6(1),m.Q6J("ngIf",e.showDuplicates)}}let ri=(()=>{var e;class ObjectEditModal{constructor(e,t,s,n,o,l,a,d){(0,i.Z)(this,"router",void 0),(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"model",void 0),(0,i.Z)(this,"view",void 0),(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"modal",void 0),(0,i.Z)(this,"modalwindow",void 0),(0,i.Z)(this,"navigationtab",void 0),(0,i.Z)(this,"modalContent",void 0),(0,i.Z)(this,"componentconfig",void 0),(0,i.Z)(this,"actionSetItems",[]),(0,i.Z)(this,"actionSubject",new Ps.x),(0,i.Z)(this,"action$",new Hs.y),(0,i.Z)(this,"duplicates",[]),(0,i.Z)(this,"showDuplicates",!1),(0,i.Z)(this,"showDuplicatesTable",!1),(0,i.Z)(this,"preventGoingToRecord",!1),(0,i.Z)(this,"self",{}),this.router=e,this.language=t,this.model=s,this.view=n,this.metadata=o,this.modal=l,this.modalwindow=a,this.navigationtab=d,this.view.isEditable=!0,this.view.displayLinks=!1,this.view.setEditMode(),this.model.startEdit(),this.action$=this.actionSubject.asObservable()}ngOnInit(){this.componentconfig||(this.componentconfig=this.metadata.getComponentConfig(this.constructor.name,this.model.module)),this.actionSetItems=this.metadata.getActionSetItems(this.componentconfig.actionset),this.modalwindow.self=this.self}get actionset(){return this.componentconfig.actionset}closeModal(){this.model.cancelEdit(),this.actionSubject.next(!1),this.actionSubject.complete(),this.self.destroy()}get modalHeader(){return""!=this.model.module?this.language.getModuleName(this.model.module,!0):""}get grow(){return this.componentconfig.grow}handleAction(e){switch(e){case"savegodetail":this.actionSubject.next(e),this.model.goDetail(this.navigationtab?.tabid);break;case"save":this.actionSubject.next(e);break;default:this.actionSubject.next(!1)}this.actionSubject.complete(),this.self.destroy()}get duplicateCheckEnabled(){return this.model.isNew&&this.metadata.getModuleDuplicatecheck(this.model.module)}}return e=ObjectEditModal,(0,i.Z)(ObjectEditModal,"ɵfac",(function(t){return new(t||e)(m.Y36(a.F0),m.Y36(g.d),m.Y36(p.o),m.Y36(Fe.e),m.Y36(v.Pu),m.Y36(K.o),m.Y36(xt.S),m.Y36(Te.d,8))})),(0,i.Z)(ObjectEditModal,"ɵcmp",m.Xpm({type:e,selectors:[["ng-component"]],viewQuery:function(e,t){if(1&e&&m.Gf(ni,7,m.s_b),2&e){let e;m.iGM(e=m.CRH())&&(t.modalContent=e.first)}},inputs:{preventGoingToRecord:"preventGoingToRecord"},features:[m._Bn([Fe.e,xt.S])],decls:14,vars:5,consts:[["size","large"],[3,"close"],["class","slds-button slds-button--brand",3,"disabled","ngClass","click",4,"ngIf"],["margin","none",3,"grow"],["modalContent",""],["class","slds-grid",4,"ngIf"],[1,"slds-grid","slds-grid--vertical-align-center","slds-grid--align-spread"],[1,"slds-col"],["containerclass","slds-button-group-row",3,"actionset","actionemitter"],[1,"slds-button","slds-button--brand",3,"disabled","ngClass","click"],[1,"slds-p-right--xx-small"],["label","LBL_DUPLICATES"],[1,"slds-grid"],[1,"slds-grid--vertical","slds-grow"],[3,"componentSet"],["class","slds-size--1-of-3 slds-border--left",4,"ngIf"],[1,"slds-size--1-of-3","slds-border--left"]],template:function(e,t){1&e&&(m.TgZ(0,"system-modal",0)(1,"system-modal-header",1),m.NdJ("close",(function(){return t.closeModal()})),m._uU(2),m.TgZ(3,"system-modal-header-right"),m.YNc(4,li,4,5,"button",2),m.qZA()(),m.TgZ(5,"system-modal-content",3,4),m.YNc(7,di,4,2,"div",5),m.qZA(),m.TgZ(8,"system-modal-footer")(9,"div",6)(10,"div",7),m._UZ(11,"object-record-messages-badge"),m.qZA(),m.TgZ(12,"div",7)(13,"object-action-container",8),m.NdJ("actionemitter",(function(e){return t.handleAction(e)})),m.qZA()()()()()),2&e&&(m.xp6(2),m.hij(" ",t.modalHeader," "),m.xp6(2),m.Q6J("ngIf",t.duplicateCheckEnabled),m.xp6(1),m.Q6J("grow",t.grow),m.xp6(2),m.Q6J("ngIf",!t.showDuplicatesTable),m.xp6(6),m.Q6J("actionset",t.componentconfig.actionset))},dependencies:[n.mk,n.O5,S._,Ee.j,Ye.x,De.p,Qe.y,zs.O,F.S,Vs.Z,si,ii.Z],encapsulation:2})),ObjectEditModal})();var ci=s(7514);const ui=["object-table-row",""];function hi(e,t){if(1&e){const e=m.EpF();m.TgZ(0,"td",2)(1,"system-checkbox",3),m.NdJ("ngModelChange",(function(){m.CHM(e);const t=m.oxw();return m.KtG(t.toggleSelection())})),m.qZA()()}if(2&e){const e=m.oxw();m.xp6(1),m.Q6J("ngModel",e.selected)}}function mi(e,t){if(1&e&&(m.TgZ(0,"td")(1,"div",4),m._UZ(2,"field-container",5),m.qZA()()),2&e){const e=t.$implicit,s=m.oxw();m.uIk("data-label",s.language.getFieldDisplayName(s.model.module,e.field,e.fieldconfig)),m.xp6(2),m.Q6J("fieldname",e.field)("fieldconfig",e.fieldconfig)("fielddisplayclass","slds-truncate")}}let gi=(()=>{var e;class ObjectTableRow{constructor(e,t,s){(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"model",void 0),(0,i.Z)(this,"view",void 0),(0,i.Z)(this,"fields",[]),(0,i.Z)(this,"selected",!1),(0,i.Z)(this,"select$",new m.vpe),(0,i.Z)(this,"unselect$",new m.vpe),(0,i.Z)(this,"selectable",!1),(0,i.Z)(this,"attr_selectable",void 0),this.language=e,this.model=t,this.view=s,this.view.isEditable=!1,this.view.displayLabels=!1}ngOnInit(){this.selectable=null!==this.attr_selectable}toggleSelection(){if(!this.selectable)return!1;this.selected=!this.selected,this.selected?this.select$.emit(this.model.data):this.unselect$.emit(this.model.data)}}return e=ObjectTableRow,(0,i.Z)(ObjectTableRow,"ɵfac",(function(t){return new(t||e)(m.Y36(g.d),m.Y36(p.o),m.Y36(Fe.e))})),(0,i.Z)(ObjectTableRow,"ɵcmp",m.Xpm({type:e,selectors:[["","object-table-row",""]],hostAttrs:[1,"slds-hint-parent"],inputs:{fields:"fields",selected:"selected",attr_selectable:["selectable","attr_selectable"]},outputs:{select$:"select",unselect$:"unselect"},features:[m._Bn([Fe.e])],attrs:ui,decls:2,vars:2,consts:[["class","slds-cell-shrink","system-title","LBL_SELECT_ROW",4,"ngIf"],[4,"ngFor","ngForOf"],["system-title","LBL_SELECT_ROW",1,"slds-cell-shrink"],[3,"ngModel","ngModelChange"],[1,"slds-truncate"],[3,"fieldname","fieldconfig","fielddisplayclass"]],template:function(e,t){1&e&&(m.YNc(0,hi,2,1,"td",0),m.YNc(1,mi,3,4,"td",1)),2&e&&(m.Q6J("ngIf",t.selectable),m.xp6(1),m.Q6J("ngForOf",t.fields))},dependencies:[n.sg,n.O5,l.JJ,l.On,qe.j,ci.U,k.S],encapsulation:2})),ObjectTableRow})();function pi(e,t){if(1&e){const e=m.EpF();m.TgZ(0,"th",5)(1,"span",6),m._UZ(2,"system-label",7),m.qZA(),m.TgZ(3,"system-checkbox",8),m.NdJ("ngModelChange",(function(){m.CHM(e);const t=m.oxw();return m.KtG(t.toggleAll())})),m.qZA()()}if(2&e){const e=m.oxw();m.xp6(3),m.Q6J("ngModel",e.areAllObjectsSelected())("disabled",e.objects.length>e.max_selections)}}function fi(e,t){if(1&e&&(m.TgZ(0,"div",11),m._UZ(1,"system-label-fieldname",12),m.qZA()),2&e){const e=m.oxw().$implicit,t=m.oxw();m.xp6(1),m.Q6J("module",t.module)("field",e.field)("fieldconfig",e.fieldconfig)}}function bi(e,t){if(1&e&&(m.TgZ(0,"th",9),m.YNc(1,fi,2,3,"div",10),m.qZA()),2&e){const e=t.$implicit;m.xp6(1),m.Q6J("ngIf",!e.fieldconfig||!e.fieldconfig.hidelabel)}}const vi=function(e,t){return{module:e,data:t}};function Zi(e,t){if(1&e){const e=m.EpF();m.TgZ(0,"tr",13),m.NdJ("select",(function(t){m.CHM(e);const s=m.oxw();return m.KtG(s.select(t))}))("unselect",(function(t){m.CHM(e);const s=m.oxw();return m.KtG(s.unselect(t))})),m.qZA()}if(2&e){const e=t.$implicit,s=m.oxw();m.Q6J("fields",s.fields)("system-model-provider",m.WLB(4,vi,s.module,e))("selectable",!!s.selectable||null)("selected",s.isObjectSelected(e))}}let _i=(()=>{var e;class ObjectTable{constructor(e,t,s,n){(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"fields",[]),(0,i.Z)(this,"objects",[]),(0,i.Z)(this,"selected_objects",[]),(0,i.Z)(this,"fieldset_id",void 0),(0,i.Z)(this,"module",void 0),(0,i.Z)(this,"selected_objects$",new m.vpe),(0,i.Z)(this,"max_selections",0),(0,i.Z)(this,"select$",new m.vpe),(0,i.Z)(this,"selectable",!1),(0,i.Z)(this,"multiselect",!1),this.language=e,this.metadata=t,this.selectable=null!==s,this.multiselect=null!==n}ngOnInit(){if(!this.fields||0==this.fields.length)if(this.fieldset_id)this.fields=this.metadata.getFieldSetFields(this.fieldset_id);else{let e=this.metadata.getComponentConfig("ObjectList",this.module);this.fields=this.metadata.getFieldSetFields(e.fieldset)}if(!this.fields||0==this.fields.length)throw new Error(`No fields given, nor found for module ${this.module}`);this.selectable&&this.max_selections<1&&(this.max_selections=1),this.multiselect&&this.max_selections<2&&(this.max_selections=99)}toggleAll(){this.selected_objects.length<this.objects.length?this.selected_objects=[...this.objects]:this.selected_objects=[],this.selected_objects$.emit(this.selected_objects),this.select$.emit(this.selected_objects)}select(e){!this.findSelectedObject(e)&&this.selected_objects.length<this.max_selections&&(this.selected_objects.push(e),this.selected_objects$.emit(this.selected_objects),this.select$.emit(this.selected_objects))}unselect(e){let t=this.selected_objects.findIndex((t=>t.id==e.id));t>-1&&(this.selected_objects.splice(t,1),this.selected_objects$.emit(this.selected_objects),this.select$.emit(this.selected_objects))}isObjectSelected(e){return!!this.findSelectedObject(e)}areAllObjectsSelected(){return this.selected_objects.length==this.objects.length}findSelectedObject(e){return this.selected_objects.find((t=>t.id==e.id))}}return e=ObjectTable,(0,i.Z)(ObjectTable,"ɵfac",(function(t){return new(t||e)(m.Y36(g.d),m.Y36(v.Pu),m.$8M("selectable"),m.$8M("multiselect"))})),(0,i.Z)(ObjectTable,"ɵcmp",m.Xpm({type:e,selectors:[["object-table"]],inputs:{fields:"fields",objects:"objects",selected_objects:"selected_objects",fieldset_id:"fieldset_id",module:"module",max_selections:["max-selections","max_selections"]},outputs:{selected_objects$:"selected_objectsChange",select$:"select"},decls:7,vars:3,consts:[[1,"slds-table","slds-table_bordered","slds-max-medium-table_stacked-horizontal","slds-table_fixed-layout"],[1,"slds-text-title--caps"],["class","slds-cell-shrink","scope","col",4,"ngIf"],["scope","col",4,"ngFor","ngForOf"],["object-table-row","",3,"fields","system-model-provider","selectable","selected","select","unselect",4,"ngFor","ngForOf"],["scope","col",1,"slds-cell-shrink"],["id","check-group-header",1,"slds-assistive-text"],["label","LBL_CHOOSE_ROWS_TO_SELECT"],[3,"ngModel","disabled","ngModelChange"],["scope","col"],["class","slds-truncate",4,"ngIf"],[1,"slds-truncate"],[3,"module","field","fieldconfig"],["object-table-row","",3,"fields","system-model-provider","selectable","selected","select","unselect"]],template:function(e,t){1&e&&(m.TgZ(0,"table",0)(1,"thead")(2,"tr",1),m.YNc(3,pi,4,2,"th",2),m.YNc(4,bi,2,1,"th",3),m.qZA()(),m.TgZ(5,"tbody"),m.YNc(6,Zi,1,7,"tr",4),m.qZA()()),2&e&&(m.xp6(3),m.Q6J("ngIf",t.selectable),m.xp6(1),m.Q6J("ngForOf",t.fields),m.xp6(2),m.Q6J("ngForOf",t.objects))},dependencies:[n.sg,n.O5,l.JJ,l.On,ci.U,S._,Ge.h,Ks.u,gi],encapsulation:2})),ObjectTable})(),yi=(()=>{var e;class ObjectEditModalDialogDuplicates{constructor(e,t,s){(0,i.Z)(this,"model",void 0),(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"module",""),(0,i.Z)(this,"duplicates",[]),(0,i.Z)(this,"fieldset",""),this.model=e,this.metadata=t,this.language=s}ngOnInit(){let e=this.metadata.getComponentConfig("GlobalModalDialogDuplicates",this.model.module);this.fieldset=e.fieldset}}return e=ObjectEditModalDialogDuplicates,(0,i.Z)(ObjectEditModalDialogDuplicates,"ɵfac",(function(t){return new(t||e)(m.Y36(p.o),m.Y36(v.Pu),m.Y36(g.d))})),(0,i.Z)(ObjectEditModalDialogDuplicates,"ɵcmp",m.Xpm({type:e,selectors:[["object-edit-modal-dialog-duplicates"]],inputs:{module:"module",duplicates:"duplicates"},decls:1,vars:3,consts:[[3,"module","fieldset_id","objects"]],template:function(e,t){1&e&&m._UZ(0,"object-table",0),2&e&&m.Q6J("module",t.model.module)("fieldset_id",t.fieldset)("objects",t.duplicates)},dependencies:[_i],encapsulation:2})),ObjectEditModalDialogDuplicates})();const xi=["modalContent"];function wi(e,t){if(1&e&&m._UZ(0,"object-edit-modal-dialog-duplicates",16),2&e){const e=m.oxw();m.Q6J("duplicates",e.duplicates)}}let Ti=(()=>{var e;class ObjectEditModalWReference{constructor(e,t,s,n,o,l){(0,i.Z)(this,"router",void 0),(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"model",void 0),(0,i.Z)(this,"view",void 0),(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"elementref",void 0),(0,i.Z)(this,"modalContent",void 0),(0,i.Z)(this,"componentRefs",[]),(0,i.Z)(this,"componentSet",""),(0,i.Z)(this,"module",""),(0,i.Z)(this,"reference",""),(0,i.Z)(this,"showDuplicates",!1),(0,i.Z)(this,"doDuplicateCheck",!0),(0,i.Z)(this,"duplicates",[]),(0,i.Z)(this,"modalAction$",new m.vpe),(0,i.Z)(this,"self",{}),this.router=e,this.language=t,this.model=s,this.view=n,this.metadata=o,this.elementref=l,this.view.isEditable=!0,this.view.setEditMode()}closeModal(){this.modalAction$.emit(!1)}get modalHeader(){return""!=this.model.module?this.language.getModuleName(this.model.module,!0):""}save(e=!1){this.model.validate()&&this.modalAction$.emit(this.model.data)}get contentStyle(){if(this.showDuplicates)return{"overflow-y":"hidden"}}}return e=ObjectEditModalWReference,(0,i.Z)(ObjectEditModalWReference,"ɵfac",(function(t){return new(t||e)(m.Y36(a.F0),m.Y36(g.d),m.Y36(p.o),m.Y36(Fe.e),m.Y36(v.Pu),m.Y36(m.SBq))})),(0,i.Z)(ObjectEditModalWReference,"ɵcmp",m.Xpm({type:e,selectors:[["ng-component"]],viewQuery:function(e,t){if(1&e&&m.Gf(xi,7,m.s_b),2&e){let e;m.iGM(e=m.CRH())&&(t.modalContent=e.first)}},features:[m._Bn([p.o,Fe.e])],decls:17,vars:6,consts:[["role","dialog",1,"slds-modal","slds-fade-in-open","slds-modal--large"],[1,"slds-modal__container"],[1,"slds-modal__header"],[1,"slds-button","slds-modal__close","slds-button--icon-inverse",3,"click"],[3,"icon","size"],[1,"slds-text-heading--medium"],[1,"slds-modal__content","slds-is-relative",3,"ngStyle"],["modalContent",""],[3,"componentSet"],["class","slds-is-absolute slds-theme--shade",3,"duplicates",4,"ngIf"],[1,"slds-modal__footer"],[1,"slds-button","slds-button--neutral",3,"click"],["label","LBL_CANCEL"],[1,"slds-button","slds-button--brand",3,"click"],["label","LBL_SAVE"],[1,"slds-backdrop","slds-backdrop--open"],[1,"slds-is-absolute","slds-theme--shade",3,"duplicates"]],template:function(e,t){1&e&&(m.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"button",3),m.NdJ("click",(function(){return t.closeModal()})),m._UZ(4,"system-button-icon",4),m.qZA(),m.TgZ(5,"h2",5),m._uU(6),m.qZA()(),m.TgZ(7,"div",6,7),m._UZ(9,"object-edit-modal-dialog-container",8),m.YNc(10,wi,1,1,"object-edit-modal-dialog-duplicates",9),m.qZA(),m.TgZ(11,"div",10)(12,"button",11),m.NdJ("click",(function(){return t.closeModal()})),m._UZ(13,"system-label",12),m.qZA(),m.TgZ(14,"button",13),m.NdJ("click",(function(){return t.save()})),m._UZ(15,"system-label",14),m.qZA()()()(),m._UZ(16,"div",15)),2&e&&(m.xp6(4),m.Q6J("icon","close")("size","large"),m.xp6(2),m.Oqu(t.modalHeader),m.xp6(1),m.Q6J("ngStyle",t.contentStyle),m.xp6(2),m.Q6J("componentSet",t.componentSet),m.xp6(1),m.Q6J("ngIf",t.showDuplicates))},dependencies:[n.O5,n.PC,w.J,S._,Vs.Z,yi],encapsulation:2})),ObjectEditModalWReference})();var Ci=s(6367);let Ai=(()=>{var e;class ObjectOptimisticLockingModalDataField{constructor(e){(0,i.Z)(this,"model",void 0),(0,i.Z)(this,"fieldname",""),(0,i.Z)(this,"fieldmodule",""),(0,i.Z)(this,"fieldvalue",void 0),this.model=e}ngOnInit(){this.model.module=this.fieldmodule,this.model.setField(this.fieldname,this.fieldvalue)}}return e=ObjectOptimisticLockingModalDataField,(0,i.Z)(ObjectOptimisticLockingModalDataField,"ɵfac",(function(t){return new(t||e)(m.Y36(p.o))})),(0,i.Z)(ObjectOptimisticLockingModalDataField,"ɵcmp",m.Xpm({type:e,selectors:[["object-optimisitclocking-modal-data-field"]],inputs:{fieldname:"fieldname",fieldmodule:"fieldmodule",fieldvalue:"fieldvalue"},features:[m._Bn([p.o])],decls:1,vars:2,consts:[[3,"field","fielddisplayclass"]],template:function(e,t){1&e&&m._UZ(0,"field-container",0),2&e&&m.Q6J("field",t.fieldname)("fielddisplayclass","slds-truncate")},dependencies:[qe.j],encapsulation:2})),ObjectOptimisticLockingModalDataField})();var ki=s(34);let Li=(()=>{var e;class ObjectOptimisticLockingModalChange{constructor(e,t,s){(0,i.Z)(this,"model",void 0),(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"userpreferences",void 0),(0,i.Z)(this,"change",{}),this.model=e,this.language=t,this.userpreferences=s}get changeDate(){let e=moment(this.change.date_created).tz(this.userpreferences.toUse.timezone);return e.add(e.utcOffset(),"m"),e.format(this.userpreferences.getDateFormat()+" "+this.userpreferences.getTimeFormat())}}return e=ObjectOptimisticLockingModalChange,(0,i.Z)(ObjectOptimisticLockingModalChange,"ɵfac",(function(t){return new(t||e)(m.Y36(p.o),m.Y36(g.d),m.Y36(M.z))})),(0,i.Z)(ObjectOptimisticLockingModalChange,"ɵcmp",m.Xpm({type:e,selectors:[["object-optimisitclocking-modal-change"]],inputs:{change:"change"},features:[m._Bn([Fe.e])],decls:15,vars:4,consts:[[1,"slds-p-vertical--xx-small"],[1,"slds-box--border"],[1,"slds-p-around--x-small"],[1,"slds-grid"],[1,"slds-m-top--xx-small"],["icon","history","size","x-small"],[1,"slds-col_bump-right","slds-m-left--xx-small"],["label","LBL_BY"],["icon","forward","size","xx-small"]],template:function(e,t){1&e&&(m.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4),m._UZ(5,"system-custom-icon",5),m.qZA(),m.TgZ(6,"div",6)(7,"div"),m._uU(8),m._UZ(9,"system-label",7),m._uU(10),m.qZA(),m.TgZ(11,"div"),m._uU(12),m._UZ(13,"system-utility-icon",8),m._uU(14),m.qZA()()()()()()),2&e&&(m.xp6(8),m.hij("",t.changeDate,", "),m.xp6(2),m.hij(" ",t.change.user_name,""),m.xp6(2),m.hij("",t.change.before_value_string,"   "),m.xp6(2),m.hij("   ",t.change.after_value_string,""))},dependencies:[ki.$,S._,C.r],encapsulation:2})),ObjectOptimisticLockingModalChange})();function Ii(e,t){if(1&e&&m._UZ(0,"object-optimisitclocking-modal-change",42),2&e){const e=t.$implicit;m.Q6J("change",e)}}function Mi(e,t){if(1&e&&(m.TgZ(0,"tr")(1,"td",40),m.YNc(2,Ii,1,1,"object-optimisitclocking-modal-change",41),m.qZA()()),2&e){const e=m.oxw().$implicit;m.xp6(2),m.Q6J("ngForOf",e.changes)}}function Si(e,t){if(1&e){const e=m.EpF();m.ynx(0),m.TgZ(1,"tr",23)(2,"td")(3,"div",24),m._UZ(4,"field-label",25),m.TgZ(5,"div",26),m.NdJ("click",(function(){const t=m.CHM(e).$implicit,s=m.oxw();return m.KtG(s.toggleChangeDetails(t.field))})),m._UZ(6,"system-utility-icon",27),m.qZA()()(),m.TgZ(7,"td")(8,"div",28)(9,"div",29)(10,"input",30),m.NdJ("click",(function(){const t=m.CHM(e).$implicit,s=m.oxw();return m.KtG(s.unselect(t.field))})),m.qZA(),m.TgZ(11,"label",31),m._UZ(12,"span",32),m.qZA()(),m.TgZ(13,"div",33),m._UZ(14,"object-optimisitclocking-modal-data-field",34),m.qZA()()(),m.TgZ(15,"td",35),m._UZ(16,"system-utility-icon",36),m.qZA(),m.TgZ(17,"td")(18,"div",28)(19,"div",29)(20,"input",37),m.NdJ("click",(function(){const t=m.CHM(e).$implicit,s=m.oxw();return m.KtG(s.select(t.field))})),m.qZA(),m.TgZ(21,"label",31),m._UZ(22,"span",32),m.qZA()(),m.TgZ(23,"div",33),m._UZ(24,"field-container",38),m.qZA()()()(),m.YNc(25,Mi,3,1,"tr",39),m.BQk()}if(2&e){const e=t.$implicit,s=t.index,i=m.oxw();m.xp6(4),m.Q6J("fieldname",e.field),m.xp6(6),m.MGl("id","radio",s,"1"),m.s9C("name",s),m.xp6(1),m.MGl("for","radio",s,"1"),m.xp6(3),m.Q6J("fieldmodule",i.model.module)("fieldname",e.field)("fieldvalue",e.value),m.xp6(6),m.MGl("id","radio",s,"2"),m.s9C("name",s),m.xp6(1),m.MGl("for","radio",s,"2"),m.xp6(3),m.Q6J("fieldname",e.field)("fielddisplayclass","slds-truncate"),m.xp6(1),m.Q6J("ngIf",i.channgeOpen(e.field))}}let Ji=(()=>{var e;class ObjectOptimisticLockingModal{constructor(e,t,s,n,o){(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"model",void 0),(0,i.Z)(this,"view",void 0),(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"modal",void 0),(0,i.Z)(this,"self",{}),(0,i.Z)(this,"conflicts",{}),(0,i.Z)(this,"_conflicts",[]),(0,i.Z)(this,"originaldata",{}),(0,i.Z)(this,"fieldsToCopy",{}),(0,i.Z)(this,"responseSubject",void 0),this.language=e,this.model=t,this.view=s,this.metadata=n,this.modal=o,this.view.displayLabels=!1}ngOnInit(){for(let e in this.conflicts)this._conflicts.push({field:e,value:this.conflicts[e].value,changes:this.conflicts[e].changes}),this.originaldata[e]=this.conflicts[e].value}cancel(){this.responseSubject.error(!0),this.responseSubject.complete(),this.self.destroy()}edit(){this.model.edit(),this.self.destroy()}save(e=!1){this.copyFields(),this.modal.openModal("SystemLoadingModal").subscribe((t=>{t.instance.messagelabel="LBL_SAVING_DATA",this.model.setField("date_modified",new moment),this.model.save().subscribe((s=>{s&&(e&&this.model.goDetail(),this.self.destroy()),t.instance.self.destroy()})),this.responseSubject.next(!0),this.responseSubject.complete()}))}copyFields(){for(let e in this.conflicts)this.fieldsToCopy[e]||this.model.setField(e,this.conflicts[e].value)}toggleChangeDetails(e){this.conflicts[e].open=!this.conflicts[e].open}select(e){this.fieldsToCopy[e]=!0}unselect(e){delete this.fieldsToCopy[e]}changeDetailsIcon(e){return this.conflicts[e].open?"chevronup":"chevrondown"}channgeOpen(e){return!!this.conflicts[e].open}}return e=ObjectOptimisticLockingModal,(0,i.Z)(ObjectOptimisticLockingModal,"ɵfac",(function(t){return new(t||e)(m.Y36(g.d),m.Y36(p.o),m.Y36(Fe.e),m.Y36(v.Pu),m.Y36(K.o))})),(0,i.Z)(ObjectOptimisticLockingModal,"ɵcmp",m.Xpm({type:e,selectors:[["ng-component"]],features:[m._Bn([Fe.e])],decls:29,vars:2,consts:[["size","large"],[3,"hiddenCloseButton"],["label","LBL_OPTIMISTICLOCKING_CONFLICT"],["margin","none"],[1,"slds-p-around--small"],[1,"slds-text-heading--label"],["label","MSG_OPTIMISTIC_LOCKING"],[1,"slds-p-vertical--xx-small"],["label","MSG_OPTIMISTIC_LOCKING","length","long"],[1,"slds-table","slds-table_cell-buffer","slds-table_bordered","slds-no-row-hover"],[1,"slds-line-height_reset"],["scope","col",1,"slds-text-title_caps"],[1,"slds-truncate"],["label","LBL_FIELD"],["scope","col",1,"slds-text-title_caps",2,"width","33%"],["label","LBL_CURRENT_VALUE"],["scope","col",1,"slds-text-title_caps",2,"width","3.25rem"],["label","LBL_NEW_VALUE"],[4,"ngFor","ngForOf"],[1,"slds-button","slds-button--neutral",3,"click"],["label","LBL_CANCEL"],[1,"slds-button","slds-button--brand",3,"click"],["label","LBL_SAVE"],[1,"slds-hint-parent"],[1,"slds-grid","slds-grid--align-spread","slds-grid--vertical-align-center"],[2,"margin-right","0",3,"fieldname"],[3,"click"],["icon","clock","size","x-small"],[1,"slds-grid","slds-grid--vertical-align-center"],[1,"slds-radio","slds-p-right--x-small"],["type","radio","checked","",3,"id","name","click"],[1,"slds-radio__label",3,"for"],[1,"slds-radio_faux"],[1,"slds-box","slds-box--xx-small","slds-p-vertical--x-small",2,"width","100%"],[3,"fieldmodule","fieldname","fieldvalue"],[1,"slds-text-align--center"],["icon","forward","size","x-small"],["type","radio",3,"id","name","click"],[3,"fieldname","fielddisplayclass"],[4,"ngIf"],["colspan","4",2,"border-top","none"],[3,"change",4,"ngFor","ngForOf"],[3,"change"]],template:function(e,t){1&e&&(m.TgZ(0,"system-modal",0)(1,"system-modal-header",1),m._UZ(2,"system-label",2),m.qZA(),m.TgZ(3,"system-modal-content",3)(4,"div",4)(5,"div",5),m._UZ(6,"system-label",6),m.qZA(),m.TgZ(7,"div",7),m._UZ(8,"system-label",8),m.qZA()(),m.TgZ(9,"table",9)(10,"thead")(11,"tr",10)(12,"th",11)(13,"div",12),m._UZ(14,"system-label",13),m.qZA()(),m.TgZ(15,"th",14)(16,"div",12),m._UZ(17,"system-label",15),m.qZA()(),m._UZ(18,"th",16),m.TgZ(19,"th",14)(20,"div",12),m._UZ(21,"system-label",17),m.qZA()()()(),m.TgZ(22,"tbody"),m.YNc(23,Si,26,13,"ng-container",18),m.qZA()()(),m.TgZ(24,"system-modal-footer")(25,"button",19),m.NdJ("click",(function(){return t.cancel()})),m._UZ(26,"system-label",20),m.qZA(),m.TgZ(27,"button",21),m.NdJ("click",(function(){return t.save()})),m._UZ(28,"system-label",22),m.qZA()()()),2&e&&(m.xp6(1),m.Q6J("hiddenCloseButton",!0),m.xp6(22),m.Q6J("ngForOf",t._conflicts))},dependencies:[n.sg,n.O5,Ci.q,qe.j,S._,Ee.j,Ye.x,De.p,Qe.y,C.r,Ai,Li],styles:["table[_ngcontent-%COMP%]{border-bottom:none}","table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:last-child   td[_ngcontent-%COMP%]{border-bottom:none}"]})),ObjectOptimisticLockingModal})();var Oi=s(79),Ni=s(5232),Fi=s(115);function qi(e,t){if(1&e&&(m.TgZ(0,"option",19),m._UZ(1,"system-label",1),m.qZA()),2&e){const e=t.$implicit;m.Q6J("value",e.component),m.xp6(1),m.Q6J("label",e.label)}}function Ei(e,t){if(1&e){const e=m.EpF();m.TgZ(0,"div",20)(1,"div",7)(2,"system-checkbox",21),m.NdJ("ngModelChange",(function(t){m.CHM(e);const s=m.oxw();return m.KtG(s.globallist=t)})),m._UZ(3,"system-label",22),m.qZA()()()}if(2&e){const e=m.oxw();m.xp6(2),m.Q6J("ngModel",e.globallist)}}let Yi=(()=>{var e;class ObjectListViewSettingsAddlistModal{constructor(e,t,s,n){(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"session",void 0),(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"modellist",void 0),(0,i.Z)(this,"modalmode","add"),(0,i.Z)(this,"listname",""),(0,i.Z)(this,"globallist",!1),(0,i.Z)(this,"listcomponent",void 0),(0,i.Z)(this,"self",{}),(0,i.Z)(this,"componentListOptions",[]),this.language=e,this.session=t,this.metadata=s,this.modellist=n}ngOnInit(){this.loadComponentListOptions(),"edit"===this.modalmode&&(this.listname=this.modellist.currentList.name,this.globallist=this.modellist.getGlobal(),this.listcomponent=this.modellist.currentList.listcomponent)}loadComponentListOptions(){let e=this.modellist.metadata.getComponentConfig("ObjectListView",this.modellist.module),t=this.modellist.metadata.getComponentSetObjects(e.componentset);this.componentListOptions=t.map((e=>({component:e.component,label:e.componentconfig.name}))),this.listcomponent=this.componentListOptions[0].component}close(){this.self.destroy()}canSave(){return!(this.listname.length>0)}get isadmin(){return this.session.isAdmin||this.metadata.checkModuleAcl(this.modellist.module,"moduleadmin")}save(){if(this.listname.length>0){const e={name:this.listname,listcomponent:this.listcomponent,global:this.globallist?"1":"0"};switch(this.modalmode){case"add":this.modellist.addListType(e).subscribe((e=>{this.close()}));break;case"edit":this.modellist.updateListType(e).subscribe((e=>{this.close()}))}}}}return e=ObjectListViewSettingsAddlistModal,(0,i.Z)(ObjectListViewSettingsAddlistModal,"ɵfac",(function(t){return new(t||e)(m.Y36(g.d),m.Y36(Rt.n),m.Y36(v.Pu),m.Y36(y.t))})),(0,i.Z)(ObjectListViewSettingsAddlistModal,"ɵcmp",m.Xpm({type:e,selectors:[["object-listview-settings-addlistmodal"]],inputs:{modalmode:"modalmode"},decls:25,vars:6,consts:[[3,"close"],[3,"label"],[1,"slds-form--stacked"],[1,"slds-form-element"],[1,"slds-form-element__label"],[1,"slds-required"],["label","LBL_NEWLISTNAME"],[1,"slds-form-element__control"],["type","text","autofocus","",1,"slds-input",3,"ngModel","ngModelChange"],[1,"slds-form-element","slds-p-vertical--small"],["label","LBL_TYPE"],[1,"slds-select_container"],[1,"slds-select",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["class","slds-form-element slds-m-vertical--x-small",4,"ngIf"],[1,"slds-button","slds-button--neutral",3,"click"],["label","LBL_CANCEL"],[1,"slds-button","slds-button--brand",3,"disabled","click"],["label","LBL_SAVE"],[3,"value"],[1,"slds-form-element","slds-m-vertical--x-small"],[3,"ngModel","ngModelChange"],["label","LBL_GLOBALVISIBLE"]],template:function(e,t){1&e&&(m.TgZ(0,"system-modal")(1,"system-modal-header",0),m.NdJ("close",(function(){return t.close()})),m._UZ(2,"system-label",1),m.qZA(),m.TgZ(3,"system-modal-content")(4,"div",2)(5,"div",3)(6,"label",4)(7,"abbr",5),m._uU(8,"*"),m.qZA(),m._UZ(9,"system-label",6),m.qZA(),m.TgZ(10,"div",7)(11,"input",8),m.NdJ("ngModelChange",(function(e){return t.listname=e})),m.qZA()()(),m.TgZ(12,"div",9)(13,"label",4),m._UZ(14,"system-label",10),m.qZA(),m.TgZ(15,"div",7)(16,"div",11)(17,"select",12),m.NdJ("ngModelChange",(function(e){return t.listcomponent=e})),m.YNc(18,qi,2,2,"option",13),m.qZA()()()(),m.YNc(19,Ei,4,1,"div",14),m.qZA()(),m.TgZ(20,"system-modal-footer")(21,"button",15),m.NdJ("click",(function(){return t.close()})),m._UZ(22,"system-label",16),m.qZA(),m.TgZ(23,"button",17),m.NdJ("click",(function(){return t.save()})),m._UZ(24,"system-label",18),m.qZA()()()),2&e&&(m.xp6(2),m.Q6J("label","LBL_"+t.modalmode.toUpperCase()+"LIST"),m.xp6(9),m.Q6J("ngModel",t.listname),m.xp6(6),m.Q6J("ngModel",t.listcomponent),m.xp6(1),m.Q6J("ngForOf",t.componentListOptions),m.xp6(1),m.Q6J("ngIf",t.isadmin),m.xp6(4),m.Q6J("disabled",t.canSave()))},dependencies:[n.sg,n.O5,l.YN,l.Kr,l.Fj,l.EJ,l.JJ,l.On,ci.U,S._,Ee.j,Ye.x,De.p,Qe.y],encapsulation:2})),ObjectListViewSettingsAddlistModal})();function Di(e,t){if(1&e){const e=m.EpF();m.TgZ(0,"div",18),m.NdJ("click",(function(){const t=m.CHM(e).$implicit,s=m.oxw();return m.KtG(s.selectField("available",t.id))})),m.TgZ(1,"span",19),m._UZ(2,"system-label-fieldname",20),m.TgZ(3,"span",21),m._uU(4),m.qZA()()()}if(2&e){const e=t.$implicit,s=m.oxw();m.Q6J("cdkDragData",e),m.uIk("aria-selected",s.isSelected("available",e.id)),m.xp6(2),m.Q6J("module",s.modellist.module)("field",e.field)("fieldconfig",e.fieldconfig),m.xp6(2),m.hij("(",e.field,")")}}function Qi(e,t){if(1&e){const e=m.EpF();m.TgZ(0,"div",18),m.NdJ("click",(function(){const t=m.CHM(e).$implicit,s=m.oxw();return m.KtG(s.selectField("list",t.id))})),m.TgZ(1,"span",19),m._UZ(2,"system-label-fieldname",20),m.TgZ(3,"span",21),m._uU(4),m.qZA()()()}if(2&e){const e=t.$implicit,s=m.oxw();m.Q6J("cdkDragData",e),m.uIk("aria-selected",s.isSelected("list",e.id)),m.xp6(2),m.Q6J("module",s.modellist.module)("field",e.field)("fieldconfig",e.fieldconfig),m.xp6(2),m.hij("(",e.field,")")}}const Ui=function(e){return[e]};let Ri=(()=>{var e;class ObjectListViewSettingsSetfieldsModal{constructor(e,t,s){(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"modellist",void 0),(0,i.Z)(this,"self",{}),(0,i.Z)(this,"listFields",[]),(0,i.Z)(this,"availableFields",[]),(0,i.Z)(this,"selectedAvailableFields",[]),(0,i.Z)(this,"selectedListFields",[]),this.metadata=e,this.language=t,this.modellist=s,this.listFields=_.clone(this.modellist.listfields);let n=this.metadata.getComponentConfig("ObjectList",this.modellist.module),o=this.metadata.getFieldSetFields(n.fieldset);for(let e of o)this.listFields.find((t=>t.id==e.id))||this.availableFields.push({id:e.id,field:e.field,fieldconfig:e.fieldconfig});this.availableFields.length>0&&this.sortAvailableFields()}sortAvailableFields(){this.availableFields=this.availableFields.sort(((e,t)=>this.language.getFieldDisplayName(this.modellist.module,e.field,e.fieldconfig).toLowerCase()>this.language.getFieldDisplayName(this.modellist.module,t.field,t.fieldconfig).toLowerCase()?1:-1))}close(){this.self.destroy()}canSet(){return this.listFields.length>0}set(){this.canSet()&&(this.modellist.listfields=this.listFields,this.close())}saveAndSet(){this.canSet()&&(this.modellist.listfields=this.listFields,this.modellist.updateListType().subscribe((()=>this.close())))}onFieldDrop(e){let t=e.previousContainer.data.splice(e.previousIndex,1);e.container.data.splice(e.currentIndex,0,t[0])}selectField(e,t){switch(e){case"available":this.selectedAvailableFields=[t];break;case"list":this.selectedListFields=[t]}}isSelected(e,t){switch(e){case"available":return this.selectedAvailableFields.indexOf(t)>=0;case"list":return this.selectedListFields.indexOf(t)>=0}}moveFields(e){switch(e){case"available":this.selectedAvailableFields.forEach((e=>{this.availableFields.some(((t,s)=>{if(e==t.field)return this.listFields.push(this.availableFields.splice(s,1)[0]),!0}))})),this.selectedAvailableFields=[];break;case"list":this.selectedListFields.forEach((e=>{this.listFields.some(((t,s)=>{if(e==t.field)return this.availableFields.push(this.listFields.splice(s,1)[0]),!0}))})),this.selectedListFields=[],this.sortAvailableFields()}}}return e=ObjectListViewSettingsSetfieldsModal,(0,i.Z)(ObjectListViewSettingsSetfieldsModal,"ɵfac",(function(t){return new(t||e)(m.Y36(v.Pu),m.Y36(g.d),m.Y36(y.t))})),(0,i.Z)(ObjectListViewSettingsSetfieldsModal,"ɵcmp",m.Xpm({type:e,selectors:[["object-listview-settings-setfields-modal"]],decls:24,vars:12,consts:[[3,"close"],["label","LBL_SETFIELDS"],[1,"slds-grid"],[1,"slds-form-element","slds-p-horizontal--small","slds-size--1-of-2"],[1,"slds-form-element__label"],["label","LBL_AVAILABLE_FIELDS"],["cdkDropList","",1,"slds-picklist","slds-picklist__options","slds-size--1-of-1",2,"height","50vh",3,"cdkDropListData","cdkDropListConnectedTo","cdkDropListDropped"],["listOne","cdkDropList"],["cdkDrag","","class","slds-drag--preview slds-picklist__item","role","option",3,"cdkDragData","click",4,"ngFor","ngForOf"],["label","LBL_SELECTED_FIELDS"],["cdkDropList","",1,"slds-picklist","slds-picklist__options","slds-size--1-of-1","cdk-drag",2,"height","50vh",3,"cdkDropListData","cdkDropListConnectedTo","cdkDropListDropped"],["listTwo","cdkDropList"],[1,"slds-button","slds-button--neutral",3,"click"],["label","LBL_CANCEL"],[1,"slds-button","slds-button--neutral",3,"disabled","click"],["label","LBL_SAVE_AND_SET"],[1,"slds-button","slds-button--brand",3,"disabled","click"],["label","LBL_SET"],["cdkDrag","","role","option",1,"slds-drag--preview","slds-picklist__item",3,"cdkDragData","click"],[1,"slds-truncate"],[3,"module","field","fieldconfig"],[1,"slds-text-color--inverse-weak"]],template:function(e,t){if(1&e&&(m.TgZ(0,"system-modal")(1,"system-modal-header",0),m.NdJ("close",(function(){return t.close()})),m._UZ(2,"system-label",1),m.qZA(),m.TgZ(3,"system-modal-content")(4,"div",2)(5,"div",3)(6,"span",4),m._UZ(7,"system-label",5),m.qZA(),m.TgZ(8,"div",6,7),m.NdJ("cdkDropListDropped",(function(e){return t.onFieldDrop(e)})),m.YNc(10,Di,5,6,"div",8),m.qZA()(),m.TgZ(11,"div",3)(12,"span",4),m._UZ(13,"system-label",9),m.qZA(),m.TgZ(14,"div",10,11),m.NdJ("cdkDropListDropped",(function(e){return t.onFieldDrop(e)})),m.YNc(16,Qi,5,6,"div",8),m.qZA()()()(),m.TgZ(17,"system-modal-footer")(18,"button",12),m.NdJ("click",(function(){return t.close()})),m._UZ(19,"system-label",13),m.qZA(),m.TgZ(20,"button",14),m.NdJ("click",(function(){return t.saveAndSet()})),m._UZ(21,"system-label",15),m.qZA(),m.TgZ(22,"button",16),m.NdJ("click",(function(){return t.set()})),m._UZ(23,"system-label",17),m.qZA()()()),2&e){const e=m.MAs(9),s=m.MAs(15);m.xp6(8),m.Q6J("cdkDropListData",t.availableFields)("cdkDropListConnectedTo",m.VKq(8,Ui,s)),m.xp6(2),m.Q6J("ngForOf",t.availableFields),m.xp6(4),m.Q6J("cdkDropListData",t.listFields)("cdkDropListConnectedTo",m.VKq(10,Ui,e)),m.xp6(2),m.Q6J("ngForOf",t.listFields),m.xp6(4),m.Q6J("disabled",!t.canSet()),m.xp6(2),m.Q6J("disabled",!t.canSet())}},dependencies:[n.sg,o.Wj,o.Zt,S._,Ge.h,Ee.j,Ye.x,De.p,Qe.y],encapsulation:2})),ObjectListViewSettingsSetfieldsModal})();const ji=["container"];let Bi=(()=>{var e;class ObjectRecordViewContainer{constructor(e,t,s,n,o,l,a){(0,i.Z)(this,"navigation",void 0),(0,i.Z)(this,"navigationtab",void 0),(0,i.Z)(this,"activatedRoute",void 0),(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"model",void 0),(0,i.Z)(this,"broadcast",void 0),(0,i.Z)(this,"elementref",void 0),(0,i.Z)(this,"container",void 0),(0,i.Z)(this,"module",""),(0,i.Z)(this,"id",""),(0,i.Z)(this,"initialized",!1),(0,i.Z)(this,"componentset",""),(0,i.Z)(this,"componentRefs",[]),(0,i.Z)(this,"componentSubscriptions",new G.w0),this.navigation=e,this.navigationtab=t,this.activatedRoute=s,this.metadata=n,this.model=o,this.broadcast=l,this.elementref=a,this.componentSubscriptions.add(this.navigationtab.activeRoute$.subscribe((e=>{this.module==e.params.module&&this.id==e.params.id||(this.module=e.params.module,this.id=e.params.id,this.initialized&&this.buildContainer())}))),this.componentSubscriptions.add(this.broadcast.message$.subscribe((e=>{this.handleMessage(e)})))}handleMessage(e){if("applauncher.setrole"===e.messagetype)this.buildContainer()}ngAfterViewInit(){this.initialized=!0,this.buildContainer()}ngOnDestroy(){this.componentSubscriptions.unsubscribe()}buildContainer(){for(let e of this.componentRefs)e.destroy();let e=this.metadata.getComponentConfig("ObjectRecordViewContainer",this.module);this.componentset=e.componentset;for(let e of this.metadata.getComponentSetObjects(this.componentset))this.metadata.addComponent(e.component,this.container).subscribe((t=>{t.instance.componentconfig=e.componentconfig,this.componentRefs.push(t)}))}}return e=ObjectRecordViewContainer,(0,i.Z)(ObjectRecordViewContainer,"ɵfac",(function(t){return new(t||e)(m.Y36(we.G),m.Y36(Te.d),m.Y36(a.gz),m.Y36(v.Pu),m.Y36(p.o),m.Y36(xe.f),m.Y36(m.SBq))})),(0,i.Z)(ObjectRecordViewContainer,"ɵcmp",m.Xpm({type:e,selectors:[["object-recordview-container"]],viewQuery:function(e,t){if(1&e&&m.Gf(ji,7,m.s_b),2&e){let e;m.iGM(e=m.CRH())&&(t.container=e.first)}},features:[m._Bn([p.o])],decls:2,vars:0,consts:[["container",""]],template:function(e,t){1&e&&m._UZ(0,"div",null,0)},encapsulation:2})),ObjectRecordViewContainer})();var Gi=s(4376),Pi=s(6951);let Hi=(()=>{var e;class ObjectRecordView{constructor(e,t,s,n,o,l,a){(0,i.Z)(this,"broadcast",void 0),(0,i.Z)(this,"navigation",void 0),(0,i.Z)(this,"navigationtab",void 0),(0,i.Z)(this,"activatedRoute",void 0),(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"model",void 0),(0,i.Z)(this,"favorite",void 0),(0,i.Z)(this,"moduleName",""),(0,i.Z)(this,"componentconfig",{}),(0,i.Z)(this,"componentSubscriptions",new G.w0),(0,i.Z)(this,"modelloaded",!1),this.broadcast=e,this.navigation=t,this.navigationtab=s,this.activatedRoute=n,this.metadata=o,this.model=l,this.favorite=a}ngOnInit(){this.moduleName=this.navigationtab.activeRoute.params.module,this.model.module=this.moduleName,this.model.id=this.navigationtab.activeRoute.params.id,this.model.getData(!0,"detailview",!0,!0).subscribe({next:e=>{this.modelloaded=!0},error:()=>{this.navigationtab.closeTab()}}),this.componentconfig=this.metadata.getComponentConfig("ObjectRecordView",this.moduleName),this.componentSubscriptions.add(this.broadcast.message$.subscribe((e=>{this.handleMessage(e)}))),this.componentSubscriptions.add(this.model.data$.subscribe((()=>this.setTabTitle())))}ngOnDestroy(){this.componentSubscriptions.unsubscribe()}handleMessage(e){if("model.save"===e.messagetype)this.model.module===e.messagedata.module&&this.model.id===e.messagedata.id&&(this.model.setData(e.messagedata.data),this.navigationtab.setTabInfo({displayname:e.messagedata.data.summary_text,displaymodule:this.model.module}))}setTabTitle(){this.navigationtab.setTabInfo({displayname:this.model.getField("summary_text"),displaymodule:this.model.module})}}return e=ObjectRecordView,(0,i.Z)(ObjectRecordView,"ɵfac",(function(t){return new(t||e)(m.Y36(xe.f),m.Y36(we.G),m.Y36(Te.d),m.Y36(a.gz),m.Y36(v.Pu),m.Y36(p.o),m.Y36(Gi.G))})),(0,i.Z)(ObjectRecordView,"ɵcmp",m.Xpm({type:e,selectors:[["object-recordview"]],features:[m._Bn([p.o])],decls:3,vars:2,consts:[[3,"componentset"],["system-to-bottom","",1,"slds-theme--default"]],template:function(e,t){1&e&&(m._UZ(0,"system-componentset",0),m.TgZ(1,"div",1),m._UZ(2,"system-componentset",0),m.qZA()),2&e&&(m.Q6J("componentset",t.componentconfig.header),m.xp6(2),m.Q6J("componentset",t.componentconfig.main))},dependencies:[Pi.E,E.H],encapsulation:2})),ObjectRecordView})();const zi=["contentcontainer"];let Vi=(()=>{var e;class ObjectRecordViewDetail1{constructor(e,t,s){(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"model",void 0),(0,i.Z)(this,"elementRef",void 0),(0,i.Z)(this,"contentcontainer",void 0),(0,i.Z)(this,"initialized",!1),(0,i.Z)(this,"componentconfig",{}),this.metadata=e,this.model=t,this.elementRef=s}ngOnInit(){this.getComponentconfig()}getComponentconfig(){_.isEmpty(this.componentconfig)&&(this.componentconfig=this.metadata.getComponentConfig("ObjectRecordViewDetail1",this.model.module))}}return e=ObjectRecordViewDetail1,(0,i.Z)(ObjectRecordViewDetail1,"ɵfac",(function(t){return new(t||e)(m.Y36(v.Pu),m.Y36(p.o),m.Y36(m.SBq))})),(0,i.Z)(ObjectRecordViewDetail1,"ɵcmp",m.Xpm({type:e,selectors:[["object-recordview-detail-1"]],viewQuery:function(e,t){if(1&e&&m.Gf(zi,7,m.s_b),2&e){let e;m.iGM(e=m.CRH())&&(t.contentcontainer=e.first)}},decls:2,vars:1,consts:[[1,"slds-p-around--small","slds-height_full"],[3,"componentset"]],template:function(e,t){1&e&&(m.TgZ(0,"div",0),m._UZ(1,"system-componentset",1),m.qZA()),2&e&&(m.xp6(1),m.Q6J("componentset",t.componentconfig.main))},dependencies:[Pi.E],encapsulation:2})),ObjectRecordViewDetail1})(),Ki=(()=>{var e;class ObjectRecordViewDetail2and1{constructor(e,t){(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"model",void 0),(0,i.Z)(this,"initialized",!1),(0,i.Z)(this,"componentconfig",{}),this.metadata=e,this.model=t}ngOnInit(){this.getComponentconfig()}getComponentconfig(){_.isEmpty(this.componentconfig)&&(this.componentconfig=this.metadata.getComponentConfig("ObjectRecordViewDetail2and1",this.model.module))}}return e=ObjectRecordViewDetail2and1,(0,i.Z)(ObjectRecordViewDetail2and1,"ɵfac",(function(t){return new(t||e)(m.Y36(v.Pu),m.Y36(p.o))})),(0,i.Z)(ObjectRecordViewDetail2and1,"ɵcmp",m.Xpm({type:e,selectors:[["object-recordview-detail-2and1"]],decls:5,vars:2,consts:[[1,"slds-grid","slds-wrap","slds-p-top--small","slds-height_full"],[1,"slds-col","slds-p-horizontal--small","slds-size--1-of-1","slds-medium-size--1-of-2","slds-large-size--2-of-3","slds-height_full"],[3,"componentset"],[1,"slds-col","slds-p-horizontal--small","slds-size--1-of-1","slds-medium-size--1-of-2","slds-large-size--1-of-3","slds-height_full"]],template:function(e,t){1&e&&(m.TgZ(0,"div",0)(1,"div",1),m._UZ(2,"system-componentset",2),m.qZA(),m.TgZ(3,"div",3),m._UZ(4,"system-componentset",2),m.qZA()()),2&e&&(m.xp6(2),m.Q6J("componentset",t.componentconfig.main),m.xp6(2),m.Q6J("componentset",t.componentconfig.sidebar))},dependencies:[Pi.E],encapsulation:2})),ObjectRecordViewDetail2and1})(),$i=(()=>{var e;class ObjectRecordViewDetailsplit{constructor(e,t){(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"model",void 0),(0,i.Z)(this,"componentconfig",{}),this.metadata=e,this.model=t}ngOnInit(){this.getComponentconfig()}getComponentconfig(){(_.isEmpty(this.componentconfig)||!this.componentconfig.left&&!this.componentconfig.right)&&(this.componentconfig=this.metadata.getComponentConfig("ObjectRecordViewDetailsplit",this.model.module))}}return e=ObjectRecordViewDetailsplit,(0,i.Z)(ObjectRecordViewDetailsplit,"ɵfac",(function(t){return new(t||e)(m.Y36(v.Pu),m.Y36(p.o))})),(0,i.Z)(ObjectRecordViewDetailsplit,"ɵcmp",m.Xpm({type:e,selectors:[["object-recordview-detail-split"]],decls:5,vars:2,consts:[[1,"slds-grid","slds-wrap","slds-p-top--small","slds-height_full"],[1,"slds-col","slds-p-horizontal--small","slds-size--1-of-1","slds-medium-size--1-of-2","slds-large-size--1-of-2","slds-height_full"],[3,"componentset"]],template:function(e,t){1&e&&(m.TgZ(0,"div",0)(1,"div",1),m._UZ(2,"system-componentset",2),m.qZA(),m.TgZ(3,"div",1),m._UZ(4,"system-componentset",2),m.qZA()()),2&e&&(m.xp6(2),m.Q6J("componentset",t.componentconfig.left),m.xp6(2),m.Q6J("componentset",t.componentconfig.right))},dependencies:[Pi.E],encapsulation:2})),ObjectRecordViewDetailsplit})();var Xi=s(3333),Wi=s(4021);function en(e,t){if(1&e&&(m.TgZ(0,"span"),m._uU(1),m.qZA()),2&e){const e=m.oxw();m.xp6(1),m.Oqu(e.model.data.summary_text)}}function tn(e,t){1&e&&(m.TgZ(0,"span"),m._UZ(1,"system-label",16),m.qZA())}function sn(e,t){if(1&e){const e=m.EpF();m.TgZ(0,"div",17)(1,"object-edit-modal-dialog-duplicates-panel",18),m.NdJ("close",(function(){m.CHM(e);const t=m.oxw();return m.KtG(t.showDuplicates=!1)})),m.qZA()()}}let nn=(()=>{var e;class ObjectRecordCreateContainer{constructor(e,t,s,n,o,l,a){(0,i.Z)(this,"router",void 0),(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"model",void 0),(0,i.Z)(this,"view",void 0),(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"modal",void 0),(0,i.Z)(this,"navigationtab",void 0),(0,i.Z)(this,"componentconfig",void 0),(0,i.Z)(this,"duplicates",[]),(0,i.Z)(this,"showDuplicates",!1),(0,i.Z)(this,"showDuplicatesTable",!1),(0,i.Z)(this,"preventGoingToRecord",!1),this.router=e,this.language=t,this.model=s,this.view=n,this.metadata=o,this.modal=l,this.navigationtab=a,this.view.isEditable=!0,this.view.displayLinks=!1,this.view.setEditMode(),this.model.startEdit()}ngOnInit(){let e=this.navigationtab.activeRoute.params;this.model.module=e.module,this.model.id=e.id,this.model.initialize(),this.navigationtab.tabdata?.data&&this.model.setData(this.navigationtab.tabdata.data),this.componentconfig||(this.componentconfig=this.metadata.getComponentConfig(this.constructor.name,this.model.module)),this.metadata.getActionSetItems(this.componentconfig.actionset),this.setHeader()}setHeader(){this.navigationtab.setTabInfo({displaymodule:this.model.module,displayname:""!=this.model.module?this.language.getModuleName(this.model.module,!0):"",displayicon:"new"})}get duplicateCheckEnabled(){return this.model.isNew&&this.metadata.getModuleDuplicatecheck(this.model.module)}handleAction(e){switch(console.log(e),e){case"cancel":this.navigationtab.closeTab();break;case"save":this.navigationtab.closeTab(),this.model.goDetail()}}}return e=ObjectRecordCreateContainer,(0,i.Z)(ObjectRecordCreateContainer,"ɵfac",(function(t){return new(t||e)(m.Y36(a.F0),m.Y36(g.d),m.Y36(p.o),m.Y36(Fe.e),m.Y36(v.Pu),m.Y36(K.o),m.Y36(Te.d,8))})),(0,i.Z)(ObjectRecordCreateContainer,"ɵcmp",m.Xpm({type:e,selectors:[["object-record-create-container"]],inputs:{preventGoingToRecord:"preventGoingToRecord"},features:[m._Bn([p.o,Fe.e])],decls:18,vars:8,consts:[[1,"slds-page-header"],[1,"slds-grid"],[1,"slds-col","slds-has-flexi-truncate"],[1,"slds-media","slds-no-space","slds-grow"],[3,"module"],[1,"slds-media__body"],[1,"slds-text-title--caps","slds-line-height--reset"],[1,"slds-grid","slds-grid--vertical-align-center"],[1,"slds-page-header__title","slds-m-right--small","slds-align-middle","slds-truncate"],[4,"ngIf"],[1,"slds-m-horizontal--x-small","slds-show--medium","slds-align--absolute-center"],[3,"actionset","actionemitter"],["system-to-bottom","",1,"slds-grid",3,"system-overlay-loading-spinner"],[1,"slds-grid--vertical","slds-grow"],[3,"componentSet"],["class","slds-size--1-of-3 slds-border--left",4,"ngIf"],["label","LBL_NEW"],[1,"slds-size--1-of-3","slds-border--left"],[3,"close"]],template:function(e,t){1&e&&(m.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),m._UZ(4,"system-icon",4),m.TgZ(5,"div",5)(6,"p",6),m._UZ(7,"system-label-modulename",4),m.qZA(),m.TgZ(8,"div",7)(9,"h1",8),m.YNc(10,en,2,1,"span",9),m.YNc(11,tn,2,0,"span",9),m.qZA()()()()(),m.TgZ(12,"div",10)(13,"object-action-container",11),m.NdJ("actionemitter",(function(e){return t.handleAction(e)})),m.qZA()()()(),m.TgZ(14,"div",12)(15,"div",13),m._UZ(16,"object-edit-modal-dialog-container",14),m.qZA(),m.YNc(17,sn,2,0,"div",15),m.qZA()),2&e&&(m.xp6(4),m.Q6J("module",t.model.module),m.xp6(3),m.Q6J("module",t.model.module),m.xp6(3),m.Q6J("ngIf",t.model.data.summary_text),m.xp6(1),m.Q6J("ngIf",!t.model.data.summary_text),m.xp6(2),m.Q6J("actionset",t.componentconfig.actionset),m.xp6(1),m.Q6J("system-overlay-loading-spinner",t.model.isSaving),m.xp6(2),m.Q6J("componentSet",t.componentconfig.componentset),m.xp6(1),m.Q6J("ngIf",t.showDuplicates))},dependencies:[n.O5,T.f,S._,Xi.M,E.H,Wi._,F.S,Vs.Z,si],encapsulation:2})),ObjectRecordCreateContainer})();var on=s(2613),ln=s(4778);function an(e,t){if(1&e){const e=m.EpF();m.TgZ(0,"li")(1,"span",19),m.NdJ("click",(function(){const t=m.CHM(e).index,s=m.oxw(3);return m.KtG(s.removeTag(t))})),m._uU(2),m.qZA()()}if(2&e){const e=t.$implicit;m.xp6(2),m.hij(" ",e," ")}}function dn(e,t){if(1&e&&(m.ynx(0),m.TgZ(1,"ul",17),m.YNc(2,an,3,1,"li",18),m.qZA(),m.BQk()),2&e){const e=m.oxw(2);m.xp6(2),m.Q6J("ngForOf",e.tags)}}function rn(e,t){1&e&&(m.TgZ(0,"div",20),m._UZ(1,"system-label",21),m.qZA())}function cn(e,t){if(1&e){const e=m.EpF();m.TgZ(0,"li",25),m.NdJ("click",(function(){const t=m.CHM(e).index,s=m.oxw(3);return m.KtG(s.addTag(t))})),m.TgZ(1,"span",26),m._uU(2),m.qZA()()}if(2&e){const e=t.$implicit;m.xp6(2),m.hij(" ",e,"")}}const un=function(e,t){return[e,t]};function hn(e,t){if(1&e&&(m.TgZ(0,"div",27),m._uU(1),m.qZA()),2&e){const e=m.oxw(3);m.xp6(1),m.Oqu(e.language.getLabelFormatted("LBL_NUMBER_OF_SHOWN_TAGS",m.WLB(1,un,e.offeredTags.length,e.numberFilteredTags)))}}function mn(e,t){if(1&e&&(m.ynx(0),m.TgZ(1,"ul",22),m.YNc(2,cn,3,1,"li",23),m.qZA(),m.YNc(3,hn,2,4,"div",24),m.BQk()),2&e){const e=m.oxw(2);m.xp6(2),m.Q6J("ngForOf",e.offeredTags),m.xp6(1),m.Q6J("ngIf",e.numberFilteredTags-e.offeredTagsMaxLength>0)}}function gn(e,t){1&e&&(m.TgZ(0,"div",28),m._UZ(1,"system-label",29),m.qZA())}function pn(e,t){if(1&e){const e=m.EpF();m.ynx(0),m.TgZ(1,"div",8),m.YNc(2,dn,3,1,"ng-container",2),m.YNc(3,rn,2,0,"ng-template",null,9,m.W1O),m.qZA(),m.TgZ(5,"div",10)(6,"div",11)(7,"system-utility-icon",12),m.NdJ("click",(function(){m.CHM(e);const t=m.oxw();return m.KtG(t.clearFilter())})),m.qZA(),m.TgZ(8,"input",13,14),m.NdJ("ngModelChange",(function(t){m.CHM(e);const s=m.oxw();return m.KtG(s.filter=t)}))("keyup",(function(){m.CHM(e);const t=m.oxw();return m.KtG(t.changeFilter())})),m.qZA()()(),m.TgZ(10,"div",15),m.YNc(11,mn,4,2,"ng-container",2),m.YNc(12,gn,2,0,"ng-template",null,16,m.W1O),m.qZA(),m.BQk()}if(2&e){const e=m.MAs(4),t=m.MAs(13),s=m.oxw();m.xp6(2),m.Q6J("ngIf",s.tags.length)("ngIfElse",e),m.xp6(5),m.Q6J("icon","clear")("size","x-small")("addclasses","slds-input__icon slds-input__icon_right slds-icon-text-default"),m.xp6(1),m.s9C("placeholder",s.language.getLabel("LBL_ENTER_TAGS_FOR_TAGS")),m.Q6J("ngModel",s.filter),m.xp6(3),m.Q6J("ngIf",s.offeredTags.length)("ngIfElse",t)}}function fn(e,t){1&e&&m._UZ(0,"system-spinner")}let bn=(()=>{var e;class ObjectPageHeaderTagPicker{constructor(e,t,s){(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"backend",void 0),(0,i.Z)(this,"toast",void 0),(0,i.Z)(this,"model",{}),(0,i.Z)(this,"self",{}),(0,i.Z)(this,"tags",[]),(0,i.Z)(this,"allTags",[]),(0,i.Z)(this,"offeredTags",[]),(0,i.Z)(this,"offeredTagsMaxLength",20),(0,i.Z)(this,"numberFilteredTags",void 0),(0,i.Z)(this,"filter",""),(0,i.Z)(this,"tagsAreParsed",!1),(0,i.Z)(this,"allTagsAreLoaded",!1),this.language=e,this.backend=t,this.toast=s}ngOnInit(){this.backend.getRequest("systags").subscribe((e=>{e.systags&&(this.allTags=e.systags),this.allTagsAreLoaded=!0,this.doFilter()}),(e=>{this.toast.sendToast("Error loading list of available tags.","error",null),this.closeModal()})),this.model.isLoading?this.model.data$.subscribe((()=>{window.setTimeout((()=>{this.parseTags()}),5e3)})):this.parseTags()}parseTags(){try{this.tags=JSON.parse(this.model.data.tags)}catch(e){this.tags=[]}this.tagsAreParsed=!0,this.doFilter()}changeFilter(){this.doFilter()}clearFilter(){this.filter="",this.doFilter()}doFilter(){if(this.tagsAreParsed&&this.allTagsAreLoaded){this.offeredTags.length=0,this.numberFilteredTags=0;for(let e of this.allTags)(0===this.filter.length||e.toLowerCase().indexOf(this.filter.toLowerCase())>=0)&&-1===this.tags.indexOf(e)&&this.numberFilteredTags++<this.offeredTagsMaxLength&&this.offeredTags.push(e)}}addTag(e){-1===this.tags.indexOf(this.offeredTags[e])&&(this.tags.push(this.offeredTags[e]),this.tags.sort(),this.offeredTags.splice(e,1))}removeTag(e){this.tags.splice(e,1),this.doFilter()}saveAndClose(){this.model.setField("tags",JSON.stringify(this.tags)),this.model.save(),this.closeModal()}closeModal(){this.self.destroy()}onModalEscX(){this.closeModal()}}return e=ObjectPageHeaderTagPicker,(0,i.Z)(ObjectPageHeaderTagPicker,"ɵfac",(function(t){return new(t||e)(m.Y36(g.d),m.Y36(ee.y),m.Y36(pe.A))})),(0,i.Z)(ObjectPageHeaderTagPicker,"ɵcmp",m.Xpm({type:e,selectors:[["object-page-header-tag-picker"]],decls:12,vars:2,consts:[[3,"close"],["label","LBL_ASSIGN_TAGS"],[4,"ngIf","ngIfElse"],["notReady",""],[1,"slds-button","slds-button--neutral",3,"click"],["label","LBL_CANCEL"],[1,"slds-button","slds-button--brand",3,"click"],["label","LBL_SAVE"],[1,"slds-m-bottom--medium"],["noAssignedTags",""],[1,"slds-form-element"],[1,"slds-form-element__control","slds-input-has-icon","slds-input-has-icon_right"],[3,"icon","size","addclasses","click"],["type","text",1,"slds-input",3,"placeholder","ngModel","ngModelChange","keyup"],["fieldFilter",""],[1,"slds-m-top--small"],["noOfferedTags",""],["role","presentation",1,"selectedTags","slds-listbox","slds-listbox_horizontal",2,"line-height","1.7rem"],[4,"ngFor","ngForOf"],[1,"slds-badge",3,"click"],[2,"font-style","italic"],["label","LBL_NO_TAGS_ASSIGNED"],["role","listbox",1,"slds-listbox","slds-listbox_horizontal","offeredTags",2,"line-height","1.5rem"],["role","presentation","style","margin-top:0.2rem",3,"click",4,"ngFor","ngForOf"],["class","slds-m-top--xx-small","style","font-style:italic;text-align:right",4,"ngIf"],["role","presentation",2,"margin-top","0.2rem",3,"click"],[1,"slds-badge","slds-badge_inverse"],[1,"slds-m-top--xx-small",2,"font-style","italic","text-align","right"],[1,"slds-m-top--xx-small",2,"font-style","italic"],["label","LBL_NO_TAGS_FOUND"]],template:function(e,t){if(1&e&&(m.TgZ(0,"system-modal")(1,"system-modal-header",0),m.NdJ("close",(function(){return t.closeModal()})),m._UZ(2,"system-label",1),m.qZA(),m.TgZ(3,"system-modal-content"),m.YNc(4,pn,14,9,"ng-container",2),m.YNc(5,fn,1,0,"ng-template",null,3,m.W1O),m.qZA(),m.TgZ(7,"system-modal-footer")(8,"button",4),m.NdJ("click",(function(){return t.closeModal()})),m._UZ(9,"system-label",5),m.qZA(),m.TgZ(10,"button",6),m.NdJ("click",(function(){return t.saveAndClose()})),m._UZ(11,"system-label",7),m.qZA()()()),2&e){const e=m.MAs(6);m.xp6(4),m.Q6J("ngIf",t.allTagsAreLoaded&&t.tagsAreParsed)("ngIfElse",e)}},dependencies:[n.sg,n.O5,l.Fj,l.JJ,l.On,S._,Ee.j,Ye.x,De.p,Qe.y,Jt.W,C.r],styles:[".offeredTags[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{cursor:pointer}",".selectedTags[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-bottom:.125rem}",".selectedTags[_ngcontent-%COMP%]{margin-bottom:-.125rem}","[_ngcontent-%COMP%]::placeholder{font-style:italic}",".slds-badge[_ngcontent-%COMP%]{font-size:.75rem;line-height:2;padding-top:.1875rem;text-transform:none}",".slds-badge[_ngcontent-%COMP%]:hover{cursor:pointer;filter:brightness(90%)}",".slds-badge.slds-badge_inverse[_ngcontent-%COMP%]:hover{filter:brightness(133%)}"]})),ObjectPageHeaderTagPicker})();const vn=["object-page-header-detail-row-field",""];let Zn=(()=>{var e;class ObjectPageHeaderDetailRowField{constructor(){(0,i.Z)(this,"moduleName",""),(0,i.Z)(this,"field",{})}}return e=ObjectPageHeaderDetailRowField,(0,i.Z)(ObjectPageHeaderDetailRowField,"ɵfac",(function(t){return new(t||e)})),(0,i.Z)(ObjectPageHeaderDetailRowField,"ɵcmp",m.Xpm({type:e,selectors:[["","object-page-header-detail-row-field",""]],inputs:{moduleName:"moduleName",field:"field"},attrs:vn,decls:2,vars:3,consts:[[1,""],[3,"field","fieldconfig","fielddisplayclass"]],template:function(e,t){1&e&&(m.TgZ(0,"div",0),m._UZ(1,"field-container",1),m.qZA()),2&e&&(m.xp6(1),m.Q6J("field",t.field.field)("fieldconfig",t.field.fieldconfig)("fielddisplayclass","slds-text-body--regular slds-truncate slds-m-vertical--xx-small"))},dependencies:[qe.j],encapsulation:2})),ObjectPageHeaderDetailRowField})();function _n(e,t){if(1&e&&m._UZ(0,"li",9),2&e){const e=m.oxw().$implicit;m.Q6J("field",e)}}function yn(e,t){if(1&e&&(m.ynx(0),m.YNc(1,_n,1,1,"li",8),m.BQk()),2&e){const e=t.$implicit,s=m.oxw(2);m.xp6(1),m.Q6J("ngIf",s.displayField(e))}}function xn(e,t){if(1&e&&(m.TgZ(0,"ul",6),m.YNc(1,yn,2,1,"ng-container",7),m.qZA()),2&e){const e=m.oxw();m.xp6(1),m.Q6J("ngForOf",e.getFields())}}function wn(e,t){if(1&e&&m._UZ(0,"field-label",16),2&e){const e=m.oxw(2).$implicit;m.Q6J("fieldname",e.field)("fieldconfig",e.fieldconfig)("addclasses","slds-truncate")}}function Tn(e,t){1&e&&(m.TgZ(0,"span",17),m._uU(1,":"),m.qZA())}function Cn(e,t){if(1&e&&(m.TgZ(0,"li",12),m.YNc(1,wn,1,3,"field-label",13),m.YNc(2,Tn,2,0,"span",14),m._UZ(3,"field-container",15),m.qZA()),2&e){const e=m.oxw().$implicit,t=m.oxw(2);m.xp6(1),m.Q6J("ngIf",t.showLabel(e.fieldconfig)),m.xp6(1),m.Q6J("ngIf",!e.fieldconfig.hidelabel),m.xp6(1),m.Q6J("field",e.field)("fieldconfig",e.fieldconfig)("fielddisplayclass","slds-truncate")}}function An(e,t){if(1&e&&(m.ynx(0),m.YNc(1,Cn,4,5,"li",11),m.BQk()),2&e){const e=t.$implicit,s=m.oxw(2);m.xp6(1),m.Q6J("ngIf",s.model.data[e.field]&&s.displayField(e))}}function kn(e,t){if(1&e&&(m.TgZ(0,"ul",10),m.YNc(1,An,2,1,"ng-container",7),m.qZA()),2&e){const e=m.oxw();m.xp6(1),m.Q6J("ngForOf",e.fields)}}let Ln=(()=>{var e;class ObjectPageHeaderDetailRow{constructor(e,t,s){(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"model",void 0),(0,i.Z)(this,"view",void 0),(0,i.Z)(this,"fieldSet",""),(0,i.Z)(this,"collapsed",!0),(0,i.Z)(this,"fields",[]),this.metadata=e,this.model=t,this.view=s}ngOnInit(){this.setLabelLength(),this.fields=this.getFields()}getFields(){let e=this.metadata.getFieldSetFields(this.fieldSet);if(this.model.acl_fieldcontrol){let t=[];for(let s in e)this.metadata.hasField(this.model.module,e[s].field)&&(this.model.acl_fieldcontrol[e[s].field]&&"1"===this.model.acl_fieldcontrol[e[s].field]||t.push(e[s]));return t}return e}displayField(e){return!e.fieldconfig?.requiredmodelstate||this.model.checkModelState(e.fieldconfig.requiredmodelstate)}toggleCollapsed(){this.collapsed=!this.collapsed,this.setLabelLength()}get toggleIcon(){return this.collapsed?"chevrondown":"chevronup"}setLabelLength(){this.collapsed?(this.view.displayLabels=!1,this.view.labels="short"):(this.view.displayLabels=!0,this.view.labels="default")}showLabel(e){return!0!==e.hidelabel}}return e=ObjectPageHeaderDetailRow,(0,i.Z)(ObjectPageHeaderDetailRow,"ɵfac",(function(t){return new(t||e)(m.Y36(v.Pu),m.Y36(p.o),m.Y36(Fe.e))})),(0,i.Z)(ObjectPageHeaderDetailRow,"ɵcmp",m.Xpm({type:e,selectors:[["object-page-header-detail-row"]],inputs:{fieldSet:"fieldSet",collapsed:"collapsed"},features:[m._Bn([Fe.e])],decls:7,vars:3,consts:[[1,"slds-grid","slds-grid--vertical-align-start"],["class","slds-grid",4,"ngIf"],["class","slds-list--horizontal slds-has-dividers--left",4,"ngIf"],[1,"slds-col--bump-left"],[1,"slds-button","slds-button--icon",3,"click"],[3,"icon"],[1,"slds-grid"],[4,"ngFor","ngForOf"],["object-page-header-detail-row-field","","class","slds-m-right--medium",3,"field",4,"ngIf"],["object-page-header-detail-row-field","",1,"slds-m-right--medium",3,"field"],[1,"slds-list--horizontal","slds-has-dividers--left"],["class","slds-item slds-grid slds-grid--vertical-align-center",4,"ngIf"],[1,"slds-item","slds-grid","slds-grid--vertical-align-center"],[3,"fieldname","fieldconfig","addclasses",4,"ngIf"],["class","slds-p-right--xx-small",4,"ngIf"],[3,"field","fieldconfig","fielddisplayclass"],[3,"fieldname","fieldconfig","addclasses"],[1,"slds-p-right--xx-small"]],template:function(e,t){1&e&&(m.TgZ(0,"div",0)(1,"div"),m.YNc(2,xn,2,1,"ul",1),m.YNc(3,kn,2,1,"ul",2),m.qZA(),m.TgZ(4,"div",3)(5,"button",4),m.NdJ("click",(function(){return t.toggleCollapsed()})),m._UZ(6,"system-button-icon",5),m.qZA()()()),2&e&&(m.xp6(2),m.Q6J("ngIf",!t.collapsed),m.xp6(1),m.Q6J("ngIf",t.collapsed),m.xp6(3),m.Q6J("icon",t.toggleIcon))},dependencies:[n.sg,n.O5,Ci.q,qe.j,w.J,Zn],encapsulation:2})),ObjectPageHeaderDetailRow})(),In=(()=>{var e;class ObjectPageHeaderDetails{constructor(e,t,s,n,o){(0,i.Z)(this,"elementref",void 0),(0,i.Z)(this,"activatedRoute",void 0),(0,i.Z)(this,"router",void 0),(0,i.Z)(this,"model",void 0),(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"componentconfig",{}),(0,i.Z)(this,"collapsed",!1),(0,i.Z)(this,"fieldset",void 0),this.elementref=e,this.activatedRoute=t,this.router=s,this.model=n,this.metadata=o}ngOnInit(){"{}"==JSON.stringify(this.componentconfig)&&(this.componentconfig=this.metadata.getComponentConfig("ObjectPageHeaderDetails",this.model.module),this.collapsed=!!this.componentconfig.collapsed&&this.componentconfig.collapsed,this.fieldset=this.componentconfig.fieldset?this.componentconfig.fieldset:"")}}return e=ObjectPageHeaderDetails,(0,i.Z)(ObjectPageHeaderDetails,"ɵfac",(function(t){return new(t||e)(m.Y36(m.SBq),m.Y36(a.gz),m.Y36(a.F0),m.Y36(p.o),m.Y36(v.Pu))})),(0,i.Z)(ObjectPageHeaderDetails,"ɵcmp",m.Xpm({type:e,selectors:[["object-page-header-details"]],decls:2,vars:2,consts:[[1,"slds-p-horizontal--medium","slds-p-vertical--xx-small","slds-border--bottom","slds-scrollable--x"],[3,"fieldSet","collapsed"]],template:function(e,t){1&e&&(m.TgZ(0,"div",0),m._UZ(1,"object-page-header-detail-row",1),m.qZA()),2&e&&(m.xp6(1),m.Q6J("fieldSet",t.fieldset)("collapsed",t.collapsed))},dependencies:[Ln],encapsulation:2})),ObjectPageHeaderDetails})();var Mn=s(6701);let Sn=(()=>{var e;class ObjectTabContainerItem{constructor(e,t,s){(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"fielderrorgroup",void 0),(0,i.Z)(this,"model",void 0),(0,i.Z)(this,"componentRefs",[]),(0,i.Z)(this,"initialized",!1),(0,i.Z)(this,"componentset",void 0),(0,i.Z)(this,"taberrors",new m.vpe),this.metadata=e,this.fielderrorgroup=t,this.model=s}ngOnInit(){this.fielderrorgroup.change$.subscribe((e=>{this.taberrors.emit(e)}))}ngAfterViewInit(){this.initialized=!0}ngOnDestroy(){for(let e of this.componentRefs)e.destroy()}}return e=ObjectTabContainerItem,(0,i.Z)(ObjectTabContainerItem,"ɵfac",(function(t){return new(t||e)(m.Y36(v.Pu),m.Y36(Mn.O),m.Y36(p.o))})),(0,i.Z)(ObjectTabContainerItem,"ɵcmp",m.Xpm({type:e,selectors:[["object-tab-container-item"]],inputs:{componentset:"componentset"},outputs:{taberrors:"taberrors"},features:[m._Bn([Mn.O])],decls:1,vars:1,consts:[[3,"componentset"]],template:function(e,t){1&e&&m._UZ(0,"system-componentset",0),2&e&&m.Q6J("componentset",t.componentset)},dependencies:[Pi.E],encapsulation:2})),ObjectTabContainerItem})();var Jn=s(2995);function On(e,t){if(1&e&&(m.ynx(0),m._UZ(1,"system-label",2),m.BQk()),2&e){const e=m.oxw();m.xp6(1),m.Q6J("label",e.tab.name)}}let Nn=(()=>{var e;class ObjectTabContainerItemHeader{constructor(e,t){(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"tab",[]),this.metadata=e,this.language=t}get displayName(){return!this.tab.headercomponent&&this.tab.name&&""!=this.tab.name}}return e=ObjectTabContainerItemHeader,(0,i.Z)(ObjectTabContainerItemHeader,"ɵfac",(function(t){return new(t||e)(m.Y36(v.Pu),m.Y36(g.d))})),(0,i.Z)(ObjectTabContainerItemHeader,"ɵcmp",m.Xpm({type:e,selectors:[["object-tab-container-item-header"]],inputs:{tab:"tab"},decls:2,vars:2,consts:[[4,"ngIf"],[3,"component"],[3,"label"]],template:function(e,t){1&e&&(m.YNc(0,On,2,1,"ng-container",0),m._UZ(1,"system-dynamic-component",1)),2&e&&(m.Q6J("ngIf",t.displayName),m.xp6(1),m.Q6J("component",t.tab.headercomponent))},dependencies:[n.O5,Jn.T,S._],encapsulation:2})),ObjectTabContainerItemHeader})();const Fn=function(e,t){return{"slds-active":e,"slds-hide":t}};function qn(e,t){if(1&e){const e=m.EpF();m.TgZ(0,"li",4),m.NdJ("click",(function(){const t=m.CHM(e).index,s=m.oxw();return m.KtG(s.setActiveTab(t))})),m.TgZ(1,"a",5),m._UZ(2,"object-tab-container-item-header",6),m.qZA()()}if(2&e){const e=t.$implicit,s=t.index,i=m.oxw();m.Q6J("ngClass",m.WLB(2,Fn,s===i.activeTab,i.isHidden(e))),m.xp6(2),m.Q6J("tab",e)}}function En(e,t){if(1&e&&m._UZ(0,"object-tab-container-item",10),2&e){const e=m.oxw(2).$implicit;m.Q6J("componentset",e.componentset)}}const Yn=function(e,t,s){return{"slds-show":e,"slds-hide":t,"slds-p-bottom--none":s}};function Dn(e,t){if(1&e&&(m.TgZ(0,"div",8),m.YNc(1,En,1,1,"object-tab-container-item",9),m.qZA()),2&e){const e=m.oxw(),t=e.index,s=e.$implicit,i=m.oxw();m.Q6J("ngClass",m.kEZ(2,Yn,t==i.activeTab,t!=i.activeTab,null==i.componentconfig?null:i.componentconfig.noBottomPadding)),m.xp6(1),m.Q6J("ngIf",s.componentset)}}function Qn(e,t){if(1&e&&(m.ynx(0),m.YNc(1,Dn,2,6,"div",7),m.BQk()),2&e){const e=t.index,s=m.oxw();m.xp6(1),m.Q6J("ngIf",s.checkRenderTab(e))}}let Un=(()=>{var e;class ObjectTabContainer{constructor(e,t,s,n){(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"model",void 0),(0,i.Z)(this,"session",void 0),(0,i.Z)(this,"activeTab",0),(0,i.Z)(this,"activatedTabs",[0]),(0,i.Z)(this,"componentconfig",void 0),(0,i.Z)(this,"tabs",[]),this.language=e,this.metadata=t,this.model=s,this.session=n}ngOnInit(){if(this.componentconfig&&this.componentconfig.componentset){let e=this.metadata.getComponentSetObjects(this.componentconfig.componentset);this.tabs=[];for(let t of e)t.componentconfig.adminonly&&!this.session.isAdmin||this.tabs.push(t.componentconfig)}else{let e=this.metadata.getComponentConfig("ObjectTabContainer",this.model.module),t=this.metadata.getComponentSetObjects(e.componentset);this.tabs=[];for(let e of t)e.componentconfig.adminonly&&!this.session.isAdmin||this.tabs.push(e.componentconfig)}}isHidden(e){return!(!e.acl||this.model.checkAccess(e.acl))||!(!e.requiredmodelstate||this.model.checkModelState(e.requiredmodelstate))}setActiveTab(e){this.activatedTabs.push(e),this.activeTab=e}checkRenderTab(e){return e==this.activeTab||this.activatedTabs.indexOf(e)>-1||this.tabs&&this.tabs[e].forcerender}}return e=ObjectTabContainer,(0,i.Z)(ObjectTabContainer,"ɵfac",(function(t){return new(t||e)(m.Y36(g.d),m.Y36(v.Pu),m.Y36(p.o),m.Y36(Rt.n))})),(0,i.Z)(ObjectTabContainer,"ɵcmp",m.Xpm({type:e,selectors:[["object-tab-container"]],decls:4,vars:2,consts:[[1,"slds-tabs--default","slds-height_full","slds-grid","slds-grid--vertical"],["role","tablist",1,"slds-tabs--default__nav"],["class","slds-tabs--default__item slds-text-title--caps","role","presentation",3,"ngClass","click",4,"ngFor","ngForOf"],[4,"ngFor","ngForOf"],["role","presentation",1,"slds-tabs--default__item","slds-text-title--caps",3,"ngClass","click"],["href","javascript:void(0);","role","tab","aria-selected","false",1,"slds-tabs--default__link"],[3,"tab"],["class","slds-tabs--default__content slds-grow","style","min-height: 0","role","tabpanel",3,"ngClass",4,"ngIf"],["role","tabpanel",1,"slds-tabs--default__content","slds-grow",2,"min-height","0",3,"ngClass"],[3,"componentset",4,"ngIf"],[3,"componentset"]],template:function(e,t){1&e&&(m.TgZ(0,"div",0)(1,"ul",1),m.YNc(2,qn,3,5,"li",2),m.qZA(),m.YNc(3,Qn,2,1,"ng-container",3),m.qZA()),2&e&&(m.xp6(2),m.Q6J("ngForOf",t.tabs),m.xp6(1),m.Q6J("ngForOf",t.tabs))},dependencies:[n.mk,n.sg,n.O5,Sn,Nn],encapsulation:2})),ObjectTabContainer})();const Rn=["container"];let jn=(()=>{var e;class ObjectVerticalTabContainerItem{constructor(e,t){(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"fielderrorgroup",void 0),(0,i.Z)(this,"container",void 0),(0,i.Z)(this,"componentset",void 0),(0,i.Z)(this,"taberrors",new m.vpe),this.metadata=e,this.fielderrorgroup=t}ngOnInit(){this.fielderrorgroup.change$.subscribe((e=>{this.taberrors.emit(e)}))}ngAfterViewInit(){for(let e of this.metadata.getComponentSetObjects(this.componentset))this.metadata.addComponent(e.component,this.container).subscribe((t=>{t.instance.componentconfig=e.componentconfig}))}}return e=ObjectVerticalTabContainerItem,(0,i.Z)(ObjectVerticalTabContainerItem,"ɵfac",(function(t){return new(t||e)(m.Y36(v.Pu),m.Y36(Mn.O))})),(0,i.Z)(ObjectVerticalTabContainerItem,"ɵcmp",m.Xpm({type:e,selectors:[["object-vertical-tab-container-item"]],viewQuery:function(e,t){if(1&e&&m.Gf(Rn,7,m.s_b),2&e){let e;m.iGM(e=m.CRH())&&(t.container=e.first)}},inputs:{componentset:"componentset"},outputs:{taberrors:"taberrors"},features:[m._Bn([Mn.O])],decls:2,vars:0,consts:[["container",""]],template:function(e,t){1&e&&m._UZ(0,"div",null,0)},encapsulation:2})),ObjectVerticalTabContainerItem})();function Bn(e,t){if(1&e&&(m.ynx(0),m._UZ(1,"system-label",1),m.BQk()),2&e){const e=m.oxw();m.xp6(1),m.Q6J("label",e.tab.name)}}let Gn=(()=>{var e;class ObjectVerticalTabContainerItemHeader{constructor(e){(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"tab",[]),this.language=e}get displayName(){return this.tab.name&&""!=this.tab.name}}return e=ObjectVerticalTabContainerItemHeader,(0,i.Z)(ObjectVerticalTabContainerItemHeader,"ɵfac",(function(t){return new(t||e)(m.Y36(g.d))})),(0,i.Z)(ObjectVerticalTabContainerItemHeader,"ɵcmp",m.Xpm({type:e,selectors:[["object-vertical-tab-container-item-header"]],inputs:{tab:"tab"},decls:1,vars:1,consts:[[4,"ngIf"],[3,"label"]],template:function(e,t){1&e&&m.YNc(0,Bn,2,1,"ng-container",0),2&e&&m.Q6J("ngIf",t.displayName)},dependencies:[n.O5,S._],encapsulation:2})),ObjectVerticalTabContainerItemHeader})();const Pn=["tabscontainer"];function Hn(e,t){if(1&e&&(m.TgZ(0,"span",9),m._uU(1),m.qZA()),2&e){const e=m.oxw().$implicit;m.xp6(1),m.Oqu(e.hasErrors)}}const zn=function(e,t){return{"slds-is-active":e,"slds-hide":t}};function Vn(e,t){if(1&e){const e=m.EpF();m.TgZ(0,"li",5),m.NdJ("click",(function(){const t=m.CHM(e).index,s=m.oxw();return m.KtG(s.setActiveTab(t))})),m.TgZ(1,"a",6),m.YNc(2,Hn,2,1,"span",7),m._UZ(3,"object-vertical-tab-container-item-header",8),m.qZA()()}if(2&e){const e=t.$implicit,s=t.index,i=m.oxw();m.Q6J("ngClass",m.WLB(3,zn,s===i.activeTab,i.isHidden(e))),m.xp6(2),m.Q6J("ngIf",e.hasErrors),m.xp6(1),m.Q6J("tab",e)}}function Kn(e,t){if(1&e){const e=m.EpF();m.TgZ(0,"object-vertical-tab-container-item",13),m.NdJ("taberrors",(function(t){m.CHM(e);const s=m.oxw(2).index,i=m.oxw();return m.KtG(i.showErrorsOnTab(s,t))})),m.qZA()}if(2&e){const e=m.oxw(2).$implicit;m.Q6J("componentset",e.componentset)}}function $n(e,t){if(1&e&&(m.TgZ(0,"div",11),m.YNc(1,Kn,1,1,"object-vertical-tab-container-item",12),m.qZA()),2&e){const e=m.oxw(),t=e.index,s=e.$implicit,i=m.oxw();m.Q6J("ngStyle",i.getDisplay(t)),m.xp6(1),m.Q6J("ngIf",s.componentset)}}function Xn(e,t){if(1&e&&(m.ynx(0),m.YNc(1,$n,2,2,"div",10),m.BQk()),2&e){const e=t.index,s=m.oxw();m.xp6(1),m.Q6J("ngIf",s.checkRenderTab(e))}}let Wn=(()=>{var e;class ObjectVerticalTabContainer{constructor(e,t,s,n){(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"session",void 0),(0,i.Z)(this,"model",void 0),(0,i.Z)(this,"tabscontainer",void 0),(0,i.Z)(this,"activeTab",0),(0,i.Z)(this,"activatedTabs",[0]),(0,i.Z)(this,"componentconfig",void 0),(0,i.Z)(this,"tabs",[]),this.language=e,this.metadata=t,this.session=s,this.model=n}ngOnInit(){if(this.componentconfig&&this.componentconfig.componentset){let e=this.metadata.getComponentSetObjects(this.componentconfig.componentset);this.componentconfig=[];for(let t of e)t.componentconfig.adminonly&&!this.session.isAdmin||this.tabs.push(t.componentconfig)}}isHidden(e){return!(!e.acl||this.model.checkAccess(e.acl))||!(!e.requiredmodelstate||this.model.checkModelState(e.requiredmodelstate))}setActiveTab(e){this.activatedTabs.push(e),this.activeTab=e}checkRenderTab(e){return e==this.activeTab||this.activatedTabs.indexOf(e)>-1||this.tabs&&this.tabs[e].forcerender}getDisplay(e){let t=this.tabscontainer.element.nativeElement.getBoundingClientRect();return e!==this.activeTab?{display:"none"}:{height:"calc(99.9vh - "+t.top+"px)"}}getTabsStyle(){return{height:"calc(99.9vh - "+this.tabscontainer.element.nativeElement.getBoundingClientRect().top+"px)",overflow:"auto","overflow-x":"hidden"}}showErrorsOnTab(e,t){this.componentconfig[e].hasErrors=t}}return e=ObjectVerticalTabContainer,(0,i.Z)(ObjectVerticalTabContainer,"ɵfac",(function(t){return new(t||e)(m.Y36(g.d),m.Y36(v.Pu),m.Y36(Rt.n),m.Y36(p.o))})),(0,i.Z)(ObjectVerticalTabContainer,"ɵcmp",m.Xpm({type:e,selectors:[["object-vertical-tab-container"]],viewQuery:function(e,t){if(1&e&&m.Gf(Pn,7,m.s_b),2&e){let e;m.iGM(e=m.CRH())&&(t.tabscontainer=e.first)}},decls:5,vars:3,consts:[[1,"slds-vertical-tabs",2,"border","none"],["role","tablist","aria-orientation","vertical",1,"slds-vertical-tabs__nav","slds-scrollable--y",3,"ngStyle"],["tabscontainer",""],["class","slds-vertical-tabs__nav-item slds-text-title--caps","role","presentation",3,"ngClass","click",4,"ngFor","ngForOf"],[4,"ngFor","ngForOf"],["role","presentation",1,"slds-vertical-tabs__nav-item","slds-text-title--caps",3,"ngClass","click"],["href","javascript:void(0)","role","tab","tabindex","-1","aria-selected","false",1,"slds-vertical-tabs__link"],["class","slds-badge","title","Invalid fields!",4,"ngIf"],[3,"tab"],["title","Invalid fields!",1,"slds-badge"],["class","slds-vertical-tabs__content slds-scrollable--y slds-p-around--xx-small slds-show","role","tabpanel",3,"ngStyle",4,"ngIf"],["role","tabpanel",1,"slds-vertical-tabs__content","slds-scrollable--y","slds-p-around--xx-small","slds-show",3,"ngStyle"],[3,"componentset","taberrors",4,"ngIf"],[3,"componentset","taberrors"]],template:function(e,t){1&e&&(m.TgZ(0,"div",0)(1,"ul",1,2),m.YNc(3,Vn,4,6,"li",3),m.qZA(),m.YNc(4,Xn,2,1,"ng-container",4),m.qZA()),2&e&&(m.xp6(1),m.Q6J("ngStyle",t.getTabsStyle()),m.xp6(2),m.Q6J("ngForOf",t.tabs),m.xp6(1),m.Q6J("ngForOf",t.tabs))},dependencies:[n.mk,n.sg,n.O5,n.PC,jn,Gn],styles:[".slds-is-active[_ngcontent-%COMP%]{border-left:6px solid #ca1b21;border-right:1px solid #dddbda;color:#3e3e3c;font-weight:600}.slds-is-active[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none!important}",".slds-badge[_ngcontent-%COMP%]{background-color:#c00;color:#fff;font-weight:700;padding:.125rem .4rem}"]})),ObjectVerticalTabContainer})();var eo=s(2646),to=s(701);function so(e,t){1&e&&(m.TgZ(0,"div",4),m._UZ(1,"system-card-stencil")(2,"system-card-stencil")(3,"system-card-stencil"),m.qZA())}function io(e,t){if(1&e&&m._UZ(0,"system-componentset",5),2&e){const e=m.oxw(2);m.Q6J("componentset",e.componentset)}}function no(e,t){if(1&e&&(m.ynx(0),m.YNc(1,so,4,0,"div",2),m.YNc(2,io,1,1,"ng-template",null,3,m.W1O),m.BQk()),2&e){const e=m.MAs(3),t=m.oxw();m.xp6(1),m.Q6J("ngIf",!t.hasAccess||t.model.isLoading)("ngIfElse",e)}}function oo(e,t){1&e&&(m.TgZ(0,"div",6)(1,"system-illustration-no-data",7),m._UZ(2,"system-label",8),m.qZA()())}let lo=(()=>{var e;class ObjectRelateContainer{constructor(e,t){(0,i.Z)(this,"model",void 0),(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"componentconfig",{}),(0,i.Z)(this,"componentset",void 0),this.model=e,this.metadata=t}ngOnInit(){if(this.componentconfig.componentset)this.componentset=this.componentconfig.componentset;else{let e=this.metadata.getComponentConfig("ObjectRelateContainer",this.model.module);this.componentset=e.componentset}}get hasAccess(){return this.model.checkAccess("detail")}}return e=ObjectRelateContainer,(0,i.Z)(ObjectRelateContainer,"ɵfac",(function(t){return new(t||e)(m.Y36(p.o),m.Y36(v.Pu))})),(0,i.Z)(ObjectRelateContainer,"ɵcmp",m.Xpm({type:e,selectors:[["ng-component"]],decls:3,vars:2,consts:[[4,"ngIf","ngIfElse"],["nocomponentset",""],["class","slds-grid slds-grid--vertical",4,"ngIf","ngIfElse"],["content",""],[1,"slds-grid","slds-grid--vertical"],[3,"componentset"],[1,"slds-box","slds-box--border","slds-align--absolute-center"],[1,"slds-m-around--medium"],["label","LBL_NO_RELATED_ITEMS"]],template:function(e,t){if(1&e&&(m.YNc(0,no,4,2,"ng-container",0),m.YNc(1,oo,3,0,"ng-template",null,1,m.W1O)),2&e){const e=m.MAs(2);m.Q6J("ngIf",t.componentset)("ngIfElse",e)}},dependencies:[n.O5,Pi.E,eo.t,S._,to.r],encapsulation:2})),ObjectRelateContainer})();var ao=s(1360),ro=s(767),co=s(8652),uo=s(3249),ho=s(4567),mo=s(7588);function go(e,t){if(1&e&&(m.ynx(0),m.TgZ(1,"div",3),m._UZ(2,"object-relatedlist-table",4),m.qZA(),m.BQk()),2&e){const e=m.oxw();m.xp6(2),m.Q6J("listfields",e.listfields)("editable",e.editable)("editcomponentset",e.editcomponentset)("sequencefield",e.componentconfig.sequencefield)("listitemactionset",e.listitemactionset)}}function po(e,t){1&e&&m._UZ(0,"system-illustration-no-access")}const fo=function(e){return{"slds-hide":e}};let bo=(()=>{var e;class ObjectRelatedlistList extends uo.s{get hide(){return this.componentconfig.hideempty&&0==this.relatedmodels.count}get panelTitle(){return this.componentconfig.title?this.language.getLabel(this.componentconfig.title):this.relatedmodels._linkName&&this.metadata.fieldDefs[this.relatedmodels.module][this.relatedmodels._linkName]&&this.metadata.fieldDefs[this.relatedmodels.module][this.relatedmodels._linkName].vname?this.language.getLabel(this.metadata.fieldDefs[this.relatedmodels.module][this.relatedmodels._linkName].vname):this.language.getModuleName(this.relatedmodels.module)}}return e=ObjectRelatedlistList,(0,i.Z)(ObjectRelatedlistList,"ɵfac",function(){let t;return function(s){return(t||(t=m.n5z(e)))(s||e)}}()),(0,i.Z)(ObjectRelatedlistList,"ɵcmp",m.Xpm({type:e,selectors:[["object-relatedlist-list"]],features:[m._Bn([kt.j]),m.qOj],decls:4,vars:6,consts:[[3,"ngClass","componentconfig"],[4,"ngIf","ngIfElse"],["noaccess",""],[1,"slds-border--top"],[3,"listfields","editable","editcomponentset","sequencefield","listitemactionset"]],template:function(e,t){if(1&e&&(m.TgZ(0,"object-related-card",0),m.YNc(1,go,3,5,"ng-container",1),m.YNc(2,po,1,0,"ng-template",null,2,m.W1O),m.qZA()),2&e){const e=m.MAs(3);m.Q6J("ngClass",m.VKq(4,fo,t.hide))("componentconfig",t.componentconfig),m.xp6(1),m.Q6J("ngIf",t.aclAccess)("ngIfElse",e)}},dependencies:[n.mk,n.O5,ho.s,co.E,mo.K],encapsulation:2})),ObjectRelatedlistList})();var vo=s(423),Zo=s(1790);const _o=["object-related-card-tile",""];function yo(e,t){if(1&e&&(m.ynx(0),m.TgZ(1,"dt",10),m._UZ(2,"system-label-fieldname",11),m.qZA(),m.TgZ(3,"dd",12),m._UZ(4,"field-container",13),m.qZA(),m.BQk()),2&e){const e=t.$implicit,s=m.oxw();m.xp6(2),m.Q6J("module",s.model.module)("field",e.field),m.xp6(2),m.Q6J("field",e.field)("fieldconfig",e.fieldconfig)("fielddisplayclass","slds-truncate")}}let xo=(()=>{var e;class ObjectRelatedCardTile{constructor(e,t,s,n,o,l){(0,i.Z)(this,"model",void 0),(0,i.Z)(this,"relatedmodels",void 0),(0,i.Z)(this,"view",void 0),(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"router",void 0),(0,i.Z)(this,"data",{}),(0,i.Z)(this,"fieldset",""),(0,i.Z)(this,"actionset",void 0),(0,i.Z)(this,"fields",[]),this.model=e,this.relatedmodels=t,this.view=s,this.language=n,this.metadata=o,this.router=l,this.view.displayLabels=!1}ngOnInit(){this.initalizeModel(),this.loadConfig()}initalizeModel(){this.model.module=this.relatedmodels.relatedModule,this.model.id=this.data.id,this.model.setData(this.data)}loadConfig(){let e=this.metadata.getComponentConfig("ObjectRelatedCardTile",this.model.module);this.actionset=e.actionset,this.fields=this.metadata.getFieldSetFields(this.fieldset)}}return e=ObjectRelatedCardTile,(0,i.Z)(ObjectRelatedCardTile,"ɵfac",(function(t){return new(t||e)(m.Y36(p.o),m.Y36(kt.j),m.Y36(Fe.e),m.Y36(g.d),m.Y36(v.Pu),m.Y36(a.F0))})),(0,i.Z)(ObjectRelatedCardTile,"ɵcmp",m.Xpm({type:e,selectors:[["","object-related-card-tile",""]],inputs:{data:"data",fieldset:"fieldset"},features:[m._Bn([p.o,Fe.e])],attrs:_o,decls:11,vars:8,consts:[[3,"module","size"],[1,"slds-media__body","slds-grow",2,"min-width","0 !important"],[1,"slds-grid","slds-grid--align-spread","slds-has-flexi-truncate"],["system-model-popover","",1,"slds-truncate","slds-text-heading--small","slds-p-top--xxx-small","slds-m-bottom--small"],[1,"slds-shrink-none","slds-show--medium"],[3,"buttonsize","actionset"],[1,"slds-tile__detail","slds-text-body--small"],[1,"slds-dl--horizontal"],[4,"ngFor","ngForOf"],[1,"slds-hide--medium",3,"buttonsize","actionset"],[1,"slds-dl--horizontal__label","slds-truncate"],[3,"module","field"],[1,"slds-dl--horizontal__detail","slds-tile__meta"],[3,"field","fieldconfig","fielddisplayclass"]],template:function(e,t){1&e&&(m._UZ(0,"system-icon",0),m.TgZ(1,"div",1)(2,"div",2)(3,"h3",3),m._uU(4),m.qZA(),m.TgZ(5,"div",4),m._UZ(6,"object-action-menu",5),m.qZA()(),m.TgZ(7,"div",6)(8,"dl",7),m.YNc(9,yo,5,5,"ng-container",8),m.qZA()(),m._UZ(10,"object-action-menu",9),m.qZA()),2&e&&(m.Q6J("module",t.model.module)("size","small"),m.xp6(4),m.Oqu(t.data.summary_text),m.xp6(2),m.Q6J("buttonsize","x-small")("actionset",t.actionset),m.xp6(3),m.Q6J("ngForOf",t.fields),m.xp6(1),m.Q6J("buttonsize","x-small")("actionset",t.actionset))},dependencies:[n.sg,qe.j,T.f,Ge.h,Zo.g,ot.g],encapsulation:2})),ObjectRelatedCardTile})();const wo=["mainContainer"];function To(e,t){if(1&e&&(m.TgZ(0,"div",6),m._UZ(1,"div",7),m.qZA()),2&e){const e=t.$implicit,s=m.oxw(2);m.Q6J("ngClass",s.getTileWidthClass),m.xp6(1),m.Q6J("fieldset",s.componentconfig.fieldset)("data",e)}}function Co(e,t){if(1&e&&(m.ynx(0),m.YNc(1,To,2,3,"div",5),m.BQk()),2&e){const e=m.oxw();m.xp6(1),m.Q6J("ngForOf",e.relatedmodels.items)}}function Ao(e,t){1&e&&m._UZ(0,"system-illustration-no-access")}let ko=(()=>{var e;class ObjectRelatedlistTiles extends uo.s{constructor(e,t,s,n,o,l){super(e,t,s,n,o),(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"relatedmodels",void 0),(0,i.Z)(this,"model",void 0),(0,i.Z)(this,"cdref",void 0),(0,i.Z)(this,"el",void 0),(0,i.Z)(this,"mainContainer",void 0),this.language=e,this.metadata=t,this.relatedmodels=s,this.model=n,this.cdref=o,this.el=l}get getTileWidthClass(){return this.mainContainer?.element.nativeElement.clientWidth<=550?"slds-size--1-of-1":this.mainContainer?.element.nativeElement.clientWidth<=730?"slds-size--1-of-2":"slds-size--1-of-3"}}return e=ObjectRelatedlistTiles,(0,i.Z)(ObjectRelatedlistTiles,"ɵfac",(function(t){return new(t||e)(m.Y36(g.d),m.Y36(v.Pu),m.Y36(kt.j),m.Y36(p.o),m.Y36(m.sBO),m.Y36(m.SBq))})),(0,i.Z)(ObjectRelatedlistTiles,"ɵcmp",m.Xpm({type:e,selectors:[["object-relatedlist-tiles"]],viewQuery:function(e,t){if(1&e&&m.Gf(wo,7,m.s_b),2&e){let e;m.iGM(e=m.CRH())&&(t.mainContainer=e.first)}},features:[m._Bn([kt.j]),m.qOj],decls:6,vars:3,consts:[[3,"componentconfig"],[1,"slds-card__body","slds-card__body_inner","slds-grid","slds-wrap","slds-grid--pull-padded"],["mainContainer",""],[4,"ngIf","ngIfElse"],["noaccess",""],["class","slds-p-around--xx-small",3,"ngClass",4,"ngFor","ngForOf"],[1,"slds-p-around--xx-small",3,"ngClass"],["object-related-card-tile","",1,"slds-box","slds-box--x-small","slds-media","slds-card__tile","slds-grid",3,"fieldset","data"]],template:function(e,t){if(1&e&&(m.TgZ(0,"object-related-card",0)(1,"div",1,2),m.YNc(3,Co,2,1,"ng-container",3),m.qZA(),m.YNc(4,Ao,1,0,"ng-template",null,4,m.W1O),m.qZA()),2&e){const e=m.MAs(5);m.Q6J("componentconfig",t.componentconfig),m.xp6(3),m.Q6J("ngIf",t.aclAccess)("ngIfElse",e)}},dependencies:[n.mk,n.sg,n.O5,ho.s,co.E,xo],encapsulation:2})),ObjectRelatedlistTiles})(),Lo=(()=>{var e;class ObjectMergeButton{constructor(e,t,s,n,o){(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"model",void 0),(0,i.Z)(this,"modal",void 0),(0,i.Z)(this,"injector",void 0),(0,i.Z)(this,"mergemodels",void 0),(0,i.Z)(this,"merged",new m.vpe),this.language=e,this.metadata=t,this.model=s,this.modal=n,this.injector=o}get enabled(){return this.mergemodels?.length>0&&this.model.checkAccess("edit")&&this.mergemodels.filter((e=>1==e.acl?.delete)).length>0}doMerge(){this.modal.openModal("ObjectMergeModal",!0,this.injector).subscribe((e=>{e.instance.mergemodels=this.mergemodels}))}}return e=ObjectMergeButton,(0,i.Z)(ObjectMergeButton,"ɵfac",(function(t){return new(t||e)(m.Y36(g.d),m.Y36(v.Pu),m.Y36(p.o),m.Y36(K.o),m.Y36(m.zs3))})),(0,i.Z)(ObjectMergeButton,"ɵcmp",m.Xpm({type:e,selectors:[["object-merge-button"]],inputs:{mergemodels:"mergemodels"},outputs:{merged:"merged"},decls:3,vars:1,consts:[[1,"slds-button","slds-button--neutral","slds-show--large",3,"disabled","click"],["label","LBL_MERGE"]],template:function(e,t){1&e&&(m.TgZ(0,"button",0),m.NdJ("click",(function(){return t.doMerge()})),m.TgZ(1,"span"),m._UZ(2,"system-label",1),m.qZA()()),2&e&&m.Q6J("disabled",!t.enabled)},dependencies:[S._],encapsulation:2})),ObjectMergeButton})();function Io(e,t){if(1&e){const e=m.EpF();m.TgZ(0,"system-utility-icon",17),m.NdJ("click",(function(t){m.CHM(e);const s=m.oxw(2);return m.KtG(s.toggleDuplicates(t))})),m.qZA()}if(2&e){const e=m.oxw(2);m.Q6J("ngStyle",e.iconStyle)}}const Mo=function(e,t){return{module:e,data:t}};function So(e,t){if(1&e&&m._UZ(0,"object-related-duplicate-tile",18),2&e){const e=t.$implicit,s=m.oxw(2);m.Q6J("system-model-provider",m.WLB(1,Mo,s.model.module,e))}}function Jo(e,t){if(1&e){const e=m.EpF();m.TgZ(0,"article",1)(1,"div",2)(2,"header",3),m._UZ(3,"system-icon",4),m.TgZ(4,"div",5)(5,"h2")(6,"a",6)(7,"span",7),m._UZ(8,"system-label",8),m._uU(9),m.qZA()()(),m.YNc(10,Io,1,1,"system-utility-icon",9),m.qZA()(),m._UZ(11,"object-merge-button",10),m.TgZ(12,"div",11)(13,"button",12),m.NdJ("click",(function(){m.CHM(e);const t=m.oxw();return m.KtG(t.checkDuplicates())})),m._UZ(14,"system-button-icon",13),m.qZA()()(),m.TgZ(15,"div",14)(16,"div",15),m.YNc(17,So,1,4,"object-related-duplicate-tile",16),m.qZA()()()}if(2&e){const e=m.oxw();m.xp6(3),m.Q6J("icon","merge")("size","small")("sprite","standard"),m.xp6(6),m.hij(" (",e.duplicatecount,")"),m.xp6(1),m.Q6J("ngIf",e.duplicatecount>0),m.xp6(1),m.Q6J("mergemodels",e.duplicates),m.xp6(2),m.Q6J("disabled",e.isLoading),m.xp6(2),m.Q6J("hidden",e.hideDuplicates),m.xp6(2),m.Q6J("ngForOf",e.duplicates)}}let Oo=(()=>{var e;class ObjectRelatedDuplicates{constructor(e,t,s){(0,i.Z)(this,"model",void 0),(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"broadcast",void 0),(0,i.Z)(this,"componentconfig",{}),(0,i.Z)(this,"showPanel",!1),(0,i.Z)(this,"duplicates",[]),(0,i.Z)(this,"duplicatecount",0),(0,i.Z)(this,"hideDuplicates",!0),(0,i.Z)(this,"isLoading",!1),(0,i.Z)(this,"subscriptions",new G.w0),this.model=e,this.metadata=t,this.broadcast=s}ngOnInit(){this.metadata.getModuleDuplicatecheck(this.model.module)&&(this.checkDuplicates(),this.subscriptions.add(this.broadcast.message$.subscribe((e=>this.handleMessage(e)))))}ngOnDestroy(){this.subscriptions.unsubscribe()}handleMessage(e){if("model.delete"===e.messagetype)if(e.messagedata.module==this.model.module){let t=this.duplicates.findIndex((t=>t.id==e.messagedata.id));t>=0&&(this.duplicates.splice(t,1),this.duplicatecount--)}}toggleDuplicates(e){e.stopPropagation(),this.hideDuplicates=!this.hideDuplicates}checkDuplicates(){this.isLoading=!0,this.model.duplicateCheck().subscribe((e=>{this.duplicates=e.records,this.duplicatecount=e.count,this.isLoading=!1,this.duplicatecount>0&&(this.showPanel=!0)}),(e=>{this.isLoading=!1}))}get iconStyle(){return this.hideDuplicates?{transform:"scale(1, -1)"}:{}}}return e=ObjectRelatedDuplicates,(0,i.Z)(ObjectRelatedDuplicates,"ɵfac",(function(t){return new(t||e)(m.Y36(p.o),m.Y36(v.Pu),m.Y36(xe.f))})),(0,i.Z)(ObjectRelatedDuplicates,"ɵcmp",m.Xpm({type:e,selectors:[["object-relatedlist-duplicates"]],decls:1,vars:1,consts:[["class","slds-card slds-card_boundary slds-m-bottom--medium",4,"ngIf"],[1,"slds-card","slds-card_boundary","slds-m-bottom--medium"],[1,"slds-card__header","slds-grid","slds-grid--vertical-align-center"],[1,"slds-media","slds-media--center","slds-has-flexi-truncate"],[3,"icon","size","sprite"],[1,"slds-grid","slds-grid--vertical-align-center","slds-media__body","slds-truncate"],["href","javascript:void(0);",1,"slds-text-link--reset"],[1,"slds-text-heading--small"],["label","LBL_DUPLICATES"],["class","slds-m-horizontal--xx-small","icon","up","style","transition: .5s;","size","x-small",3,"ngStyle","click",4,"ngIf"],[3,"mergemodels"],[1,"slds-m-left--x-small"],[1,"slds-button","slds-button_icon","x-slds-m-right--medium",3,"disabled","click"],["icon","refresh"],[1,"slds-card__body",3,"hidden"],[1,"slds-card__body--inner","slds-grid","slds-wrap","slds-gutters_direct-xx-small"],["class","slds-size--1-of-1 slds-large-size--1-of-3 slds-col",3,"system-model-provider",4,"ngFor","ngForOf"],["icon","up","size","x-small",1,"slds-m-horizontal--xx-small",2,"transition",".5s",3,"ngStyle","click"],[1,"slds-size--1-of-1","slds-large-size--1-of-3","slds-col",3,"system-model-provider"]],template:function(e,t){1&e&&m.YNc(0,Jo,18,9,"article",0),2&e&&m.Q6J("ngIf",t.showPanel)},dependencies:[n.sg,n.O5,n.PC,w.J,T.f,S._,C.r,Ks.u,Ws,Lo],encapsulation:2})),ObjectRelatedDuplicates})();const No=["tablecontent"];let Fo=(()=>{var e;class ObjectRelatedlistAll{constructor(e,t,s,n,o){(0,i.Z)(this,"navigationtab",void 0),(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"model",void 0),(0,i.Z)(this,"relatedmodels",void 0),(0,i.Z)(this,"tablecontent",void 0),(0,i.Z)(this,"module",""),(0,i.Z)(this,"id",""),(0,i.Z)(this,"link",""),(0,i.Z)(this,"related",""),(0,i.Z)(this,"fieldset",void 0),(0,i.Z)(this,"componentconfig",{}),(0,i.Z)(this,"listfields",[]),this.navigationtab=e,this.language=t,this.metadata=s,this.model=n,this.relatedmodels=o}ngOnInit(){this.module=this.navigationtab.activeRoute.params.module,this.link=this.navigationtab.activeRoute.params.link,this.related=this.navigationtab.activeRoute.params.related,this.fieldset=this.navigationtab.activeRoute.params.fieldset,this.model.module=this.module,this.model.id=this.navigationtab.activeRoute.params.id,this.model.getData(!0,"detailview").subscribe((e=>{this.navigationtab.setTabInfo({displaymodule:this.module,displayname:e.summary_text+" • "+this.language.getModuleName(this.related)})})),this.componentconfig=this.metadata.getComponentConfig("ObjectRelatedlistAll",this.related),this.componentconfig.fieldset||(this.componentconfig=this.metadata.getModuleDefaultComponentConfigByUsage(this.related,"list")),_.isEmpty(this.componentconfig)&&console.warn(`no componentconfig found for ObjectRelatedlistAll nor ObjectList with module ${this.related}`),this.listfields=this.metadata.getFieldSetFields(this.fieldset?this.fieldset:this.componentconfig.fieldset),_.isEmpty(this.listfields)&&console.warn("no fieldset to use!"),this.relatedmodels.module=this.model.module,this.relatedmodels.id=this.model.id,this.relatedmodels.relatedModule=this.related,this.relatedmodels.linkName=this.link,this.relatedmodels.loaditems=50,this.componentconfig.sequencefield?this.relatedmodels.sequencefield=this.componentconfig.sequencefield:this.model.fields[this.relatedmodels._linkName]?.sequence_field&&(this.relatedmodels.sequencefield=this.model.fields[this.relatedmodels._linkName].sequence_field),this.relatedmodels.getData()}goModule(){this.model.goModule()}goModel(){this.model.goDetail()}get listingTitle(){return this.metadata.fieldDefs[this.model.module][this.link].vname?this.language.getLabel(this.metadata.fieldDefs[this.model.module][this.link].vname):this.language.getModuleName(this.related)}onScroll(e){if(this.relatedmodels.canloadmore){let e=this.tablecontent.element.nativeElement;e.scrollTop+e.clientHeight+50>e.scrollHeight&&this.relatedmodels.getMoreData(25)}}}return e=ObjectRelatedlistAll,(0,i.Z)(ObjectRelatedlistAll,"ɵfac",(function(t){return new(t||e)(m.Y36(Te.d),m.Y36(g.d),m.Y36(v.Pu),m.Y36(p.o),m.Y36(kt.j))})),(0,i.Z)(ObjectRelatedlistAll,"ɵcmp",m.Xpm({type:e,selectors:[["object-relatedlist-all"]],viewQuery:function(e,t){if(1&e&&m.Gf(No,7,m.s_b),2&e){let e;m.iGM(e=m.CRH())&&(t.tablecontent=e.first)}},features:[m._Bn([p.o,kt.j])],decls:28,vars:9,consts:[[1,"slds-page-header"],["role","navigation","aria-label","Breadcrumbs"],[1,"slds-breadcrumb","slds-list_horizontal","slds-wrap"],[1,"slds-breadcrumb__item","slds-text-title_caps"],["href","javascript:void(0);",3,"click"],[3,"module"],[1,"slds-media"],[1,"slds-media__body"],[1,"slds-page-header__title","slds-truncate","slds-align-middle","slds-p-vertical--xx-small"],[1,"slds-col","slds-align-bottom"],[1,"slds-text-body--small"],["label","LBL_OF"],["label","LBL_ITEMS"],["label","LBL_SORTEDBY"],[3,"module","field"],["label","LBL_LASTUPDATE"],["system-to-bottom","",3,"scroll"],["tablecontent",""],[3,"listfields"]],template:function(e,t){1&e&&(m.TgZ(0,"div",0)(1,"nav",1)(2,"ol",2)(3,"li",3)(4,"a",4),m.NdJ("click",(function(){return t.goModule()})),m._UZ(5,"system-label-modulename",5),m.qZA()(),m.TgZ(6,"li",3)(7,"a",4),m.NdJ("click",(function(){return t.goModel()})),m._uU(8),m.qZA()()()(),m.TgZ(9,"div",6)(10,"div",7)(11,"h1",8),m._uU(12),m.qZA()()(),m.TgZ(13,"div",9)(14,"p",10),m._uU(15),m._UZ(16,"system-label",11),m._uU(17),m._UZ(18,"system-label",12),m._uU(19," • "),m._UZ(20,"system-label",13)(21,"system-label-fieldname",14),m._uU(22," • "),m._UZ(23,"system-label",15),m._uU(24),m.qZA()()(),m.TgZ(25,"div",16,17),m.NdJ("scroll",(function(e){return t.onScroll(e)})),m._UZ(27,"object-relatedlist-table",18),m.qZA()),2&e&&(m.xp6(5),m.Q6J("module",t.module),m.xp6(3),m.Oqu(t.model.data.summary_text),m.xp6(4),m.Oqu(t.listingTitle),m.xp6(3),m.hij("",t.relatedmodels.items.length," "),m.xp6(2),m.hij(" ",t.relatedmodels.count," "),m.xp6(4),m.Q6J("module",t.related)("field",t.relatedmodels.sortfield),m.xp6(3),m.hij(" ",t.relatedmodels.getLastLoadTime(),""),m.xp6(3),m.Q6J("listfields",t.listfields))},dependencies:[S._,Ge.h,Xi.M,E.H,mo.K],encapsulation:2})),ObjectRelatedlistAll})(),qo=(()=>{var e;class ObjectRelatedlistSequenced{constructor(){(0,i.Z)(this,"componentconfig",{})}}return e=ObjectRelatedlistSequenced,(0,i.Z)(ObjectRelatedlistSequenced,"ɵfac",(function(t){return new(t||e)})),(0,i.Z)(ObjectRelatedlistSequenced,"ɵcmp",m.Xpm({type:e,selectors:[["object-relatedlist-sequenced"]],inputs:{componentconfig:"componentconfig"},decls:1,vars:1,consts:[[3,"componentconfig"]],template:function(e,t){1&e&&m._UZ(0,"object-relatedlist-list",0),2&e&&m.Q6J("componentconfig",t.componentconfig)},dependencies:[bo],encapsulation:2})),ObjectRelatedlistSequenced})();var Eo=s(3129),Yo=s(8017),Do=s(6409),Qo=s(7165),Uo=s(5931);function Ro(e,t){if(1&e&&(m.TgZ(0,"legend",6),m._UZ(1,"system-label",7),m.qZA()),2&e){const e=m.oxw(2);m.xp6(1),m.Q6J("label",e.componentconfig.name)}}function jo(e,t){if(1&e&&(m.TgZ(0,"fieldset",2),m.YNc(1,Ro,2,1,"legend",3),m.TgZ(2,"div",4),m._UZ(3,"object-record-fieldset",5),m.qZA()()),2&e){const e=m.oxw();m.xp6(1),m.Q6J("ngIf",e.componentconfig.name),m.xp6(2),m.Q6J("fieldset",e.fieldset)("direction",e.direction)}}const Bo=function(e){return{"slds-theme--shade slds-p-around--small":e}};let Go=(()=>{var e;class ObjectRecordFieldsetContainer{get fieldset(){return this.componentconfig.fieldset}get direction(){return this.componentconfig.direction}constructor(e,t,s){(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"model",void 0),(0,i.Z)(this,"view",void 0),(0,i.Z)(this,"componentconfig",{}),this.metadata=e,this.model=t,this.view=s}get hidden(){return this.componentconfig.requiredmodelstate&&!this.model.checkModelState(this.componentconfig.requiredmodelstate)}}return e=ObjectRecordFieldsetContainer,(0,i.Z)(ObjectRecordFieldsetContainer,"ɵfac",(function(t){return new(t||e)(m.Y36(v.Pu),m.Y36(p.o),m.Y36(Fe.e))})),(0,i.Z)(ObjectRecordFieldsetContainer,"ɵcmp",m.Xpm({type:e,selectors:[["object-record-fieldset-container"]],inputs:{componentconfig:"componentconfig"},decls:2,vars:4,consts:[[3,"ngClass"],["class","slds-form-element slds-form-element_compound",4,"ngIf"],[1,"slds-form-element","slds-form-element_compound"],["class","slds-form-element__legend slds-form-element__label slds-p-horizontal--xx-small",4,"ngIf"],[1,"slds-form-element__control"],[3,"fieldset","direction"],[1,"slds-form-element__legend","slds-form-element__label","slds-p-horizontal--xx-small"],[3,"label"]],template:function(e,t){1&e&&(m.TgZ(0,"div",0),m.YNc(1,jo,4,3,"fieldset",1),m.qZA()),2&e&&(m.Q6J("ngClass",m.VKq(2,Bo,t.componentconfig.embedded)),m.xp6(1),m.Q6J("ngIf",!t.hidden))},dependencies:[n.mk,n.O5,S._,Bs.d],encapsulation:2})),ObjectRecordFieldsetContainer})();var Po=s(6163);let Ho=(()=>{var e;class ObjectRecordChecklistItem{constructor(e,t,s,n,o){(0,i.Z)(this,"view",void 0),(0,i.Z)(this,"model",void 0),(0,i.Z)(this,"modelutilities",void 0),(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"backend",void 0),(0,i.Z)(this,"checkitem",{}),(0,i.Z)(this,"checkfield",""),(0,i.Z)(this,"checkid",""),this.view=e,this.model=t,this.modelutilities=s,this.language=n,this.backend=o,this.checkid=this.modelutilities.generateGuid()}get checked(){try{return JSON.parse(this.model.getField(this.checkfield))[this.checkitem.item]}catch(e){return!1}}checkItem(e){let t={};try{t=JSON.parse(this.model.getField(this.checkfield))}catch(e){t={}}t[this.checkitem.item]=e.target.checked,this.model.setField(this.checkfield,JSON.stringify(t)),e.target.checked?this.backend.postRequest("module/"+this.model.module+"/"+this.model.id+"/checklist/"+this.checkfield+"/"+this.checkitem.item):this.backend.deleteRequest("module/"+this.model.module+"/"+this.model.id+"/checklist/"+this.checkfield+"/"+this.checkitem.item)}get disabled(){return!this.model.checkAccess("edit")||this.model.isEditing||this.model.isLoading}}return e=ObjectRecordChecklistItem,(0,i.Z)(ObjectRecordChecklistItem,"ɵfac",(function(t){return new(t||e)(m.Y36(Fe.e),m.Y36(p.o),m.Y36(Po.A),m.Y36(g.d),m.Y36(ee.y))})),(0,i.Z)(ObjectRecordChecklistItem,"ɵcmp",m.Xpm({type:e,selectors:[["object-record-checklist-item"]],inputs:{checkitem:"checkitem",checkfield:"checkfield"},features:[m._Bn([Fe.e])],decls:8,vars:5,consts:[[1,"slds-form-element","slds-p-vertical--xx-small"],[1,"slds-form-element__control"],[1,"slds-checkbox"],["type","checkbox","name","options",3,"id","ngModel","disabled","change"],[1,"slds-checkbox__label"],[1,"slds-checkbox_faux"],[1,"slds-form-element__label"],[3,"label"]],template:function(e,t){1&e&&(m.TgZ(0,"div",0)(1,"div",1)(2,"span",2)(3,"input",3),m.NdJ("change",(function(e){return t.checkItem(e)})),m.qZA(),m.TgZ(4,"label",4),m._UZ(5,"span",5),m.TgZ(6,"span",6),m._UZ(7,"system-label",7),m.qZA()()()()()),2&e&&(m.xp6(3),m.Q6J("id",t.checkid)("ngModel",t.checked)("disabled",t.disabled),m.xp6(1),m.uIk("for",t.checkid),m.xp6(3),m.Q6J("label",t.checkitem.name))},dependencies:[l.Wl,l.JJ,l.On,S._],encapsulation:2})),ObjectRecordChecklistItem})();function zo(e,t){if(1&e&&m._UZ(0,"object-record-checklist-item",4),2&e){const e=t.$implicit,s=m.oxw();m.Q6J("checkfield",s.modelfield)("checkitem",e)}}let Vo=(()=>{var e;class ObjectRecordChecklist{constructor(e){(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"componentconfig",{}),this.language=e}get checkitems(){return this.componentconfig.checkitems?this.componentconfig.checkitems:[]}get modelfield(){return this.componentconfig.field}}return e=ObjectRecordChecklist,(0,i.Z)(ObjectRecordChecklist,"ɵfac",(function(t){return new(t||e)(m.Y36(g.d))})),(0,i.Z)(ObjectRecordChecklist,"ɵcmp",m.Xpm({type:e,selectors:[["object-record-checklist"]],features:[m._Bn([Fe.e])],decls:4,vars:1,consts:[[1,"slds-box","slds-m-bottom--small"],[1,"slds-text-heading_small","slds-p-vertical--xx-small"],["label","LBL_CHECKLIST"],[3,"checkfield","checkitem",4,"ngFor","ngForOf"],[3,"checkfield","checkitem"]],template:function(e,t){1&e&&(m.TgZ(0,"div",0)(1,"h3",1),m._UZ(2,"system-label",2),m.qZA(),m.YNc(3,zo,1,2,"object-record-checklist-item",3),m.qZA()),2&e&&(m.xp6(3),m.Q6J("ngForOf",t.checkitems))},dependencies:[n.sg,S._,Ho],encapsulation:2})),ObjectRecordChecklist})();var Ko=s(6438),$o=s(1553);function Xo(e,t){if(1&e&&(m.TgZ(0,"system-collapsable-tab",3)(1,"div",4),m._UZ(2,"object-record-fieldset",5),m.qZA()()),2&e){const e=m.oxw(2);m.Q6J("title",e.componentconfig.name)("expanded",e.expanded),m.xp6(2),m.Q6J("fieldset",e.fieldSet)("direction","vertical")}}function Wo(e,t){if(1&e&&(m.TgZ(0,"div",6)(1,"div",4),m._UZ(2,"object-record-fieldset",5),m.qZA()()),2&e){const e=m.oxw(2);m.xp6(2),m.Q6J("fieldset",e.fieldSet)("direction","vertical")}}function el(e,t){if(1&e&&(m.TgZ(0,"div"),m.YNc(1,Xo,3,4,"system-collapsable-tab",1),m.YNc(2,Wo,3,2,"div",2),m.qZA()),2&e){const e=m.oxw();m.xp6(1),m.Q6J("ngIf",e.showTitle),m.xp6(1),m.Q6J("ngIf",!e.showTitle)}}let tl=(()=>{var e;class ObjectRecordDetailsTab{constructor(e,t,s){(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"model",void 0),(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"componentconfig",{}),(0,i.Z)(this,"expanded",!0),this.metadata=e,this.model=t,this.language=s}ngOnInit(){this.componentconfig.collapsed&&(this.expanded=!1)}get fieldSet(){try{return this.componentconfig.fieldset}catch(e){return""}}get showTitle(){try{return!this.componentconfig.hidelabel}catch(e){return!1}}get hidden(){return this.componentconfig.requiredmodelstate&&!this.model.checkModelState(this.componentconfig.requiredmodelstate)}}return e=ObjectRecordDetailsTab,(0,i.Z)(ObjectRecordDetailsTab,"ɵfac",(function(t){return new(t||e)(m.Y36(v.Pu),m.Y36(p.o),m.Y36(g.d))})),(0,i.Z)(ObjectRecordDetailsTab,"ɵcmp",m.Xpm({type:e,selectors:[["object-record-details-tab"]],decls:1,vars:1,consts:[[4,"ngIf"],[3,"title","expanded",4,"ngIf"],["class","slds-section",4,"ngIf"],[3,"title","expanded"],[1,"slds-p-horizontal--xx-small"],[3,"fieldset","direction"],[1,"slds-section"]],template:function(e,t){1&e&&m.YNc(0,el,3,2,"div",0),2&e&&m.Q6J("ngIf",!t.hidden)},dependencies:[n.O5,$o.z,Bs.d],encapsulation:2})),ObjectRecordDetailsTab})();function sl(e,t){if(1&e&&(m.TgZ(0,"system-collapsable-tab",3)(1,"div",4),m._UZ(2,"object-record-fieldset",5),m.qZA()()),2&e){const e=m.oxw(2);m.Q6J("title",e.componentconfig.name)("expanded",e.expanded),m.xp6(2),m.Q6J("fieldset",e.fieldSet)("direction","vertical")}}function il(e,t){if(1&e&&(m.TgZ(0,"div",6)(1,"div",4),m._UZ(2,"object-record-fieldset",5),m.qZA()()),2&e){const e=m.oxw(2);m.xp6(2),m.Q6J("fieldset",e.fieldSet)("direction","vertical")}}function nl(e,t){if(1&e&&(m.TgZ(0,"div"),m.YNc(1,sl,3,4,"system-collapsable-tab",1),m.YNc(2,il,3,2,"div",2),m.qZA()),2&e){const e=m.oxw();m.Q6J("@displayanimation",void 0),m.xp6(1),m.Q6J("ngIf",e.showTitle),m.xp6(1),m.Q6J("ngIf",!e.showTitle)}}let ol=(()=>{var e;class ObjectRecordDetailsModelstateTab extends tl{}return e=ObjectRecordDetailsModelstateTab,(0,i.Z)(ObjectRecordDetailsModelstateTab,"ɵfac",function(){let t;return function(s){return(t||(t=m.n5z(e)))(s||e)}}()),(0,i.Z)(ObjectRecordDetailsModelstateTab,"ɵcmp",m.Xpm({type:e,selectors:[["object-record-details-modelstate-tab"]],features:[m.qOj],decls:1,vars:1,consts:[[4,"ngIf"],[3,"title","expanded",4,"ngIf"],["class","slds-section",4,"ngIf"],[3,"title","expanded"],[1,"slds-p-horizontal--xx-small"],[3,"fieldset","direction"],[1,"slds-section"]],template:function(e,t){1&e&&m.YNc(0,nl,3,3,"div",0),2&e&&m.Q6J("ngIf",!t.hidden)},dependencies:[n.O5,$o.z,Bs.d],encapsulation:2,data:{animation:[(0,b.X$)("displayanimation",[(0,b.eR)(":enter",[(0,b.oB)({opacity:0,height:"0px",overflow:"hidden"}),(0,b.jt)(".5s",(0,b.oB)({height:"*",opacity:1})),(0,b.oB)({overflow:"unset"})]),(0,b.eR)(":leave",[(0,b.oB)({overflow:"hidden"}),(0,b.jt)(".5s",(0,b.oB)({height:"0px",opacity:0}))])])]}})),ObjectRecordDetailsModelstateTab})();var ll=s(6194),al=s(5385);function dl(e,t){if(1&e&&(m.TgZ(0,"div",8),m._UZ(1,"object-record-fieldset-field",7),m.qZA()),2&e){const e=m.oxw(2);m.xp6(1),m.Q6J("fieldsetitem",e.fields.spiceacl_territories_hash)}}function rl(e,t){if(1&e&&(m.TgZ(0,"div",3)(1,"div",8),m._UZ(2,"object-record-fieldset-field",7),m.qZA(),m.YNc(3,dl,2,1,"div",9),m.qZA()),2&e){const e=m.oxw();m.xp6(2),m.Q6J("fieldsetitem",e.fields.spiceacl_primary_territory),m.xp6(1),m.Q6J("ngIf",e.multipleterritories)}}function cl(e,t){if(1&e&&(m.TgZ(0,"div"),m._UZ(1,"object-record-fieldset-field",7),m.qZA()),2&e){const e=m.oxw();m.xp6(1),m.Q6J("fieldsetitem",e.fields.spiceacl_users_hash)}}const ul=function(e,t){return{"slds-size--1-of-1":e,"slds-size--1-of-2":t}};function hl(e,t){if(1&e&&(m.TgZ(0,"div",12),m._UZ(1,"object-record-fieldset-field",7),m.qZA()),2&e){const e=m.oxw(2);m.Q6J("ngClass",m.WLB(2,ul,!e.hasFieldAssignedOrgunit,e.hasFieldAssignedOrgunit)),m.xp6(1),m.Q6J("fieldsetitem",e.fields.assigned_user)}}function ml(e,t){if(1&e&&(m.TgZ(0,"div",12),m._UZ(1,"object-record-fieldset-field",7),m.qZA()),2&e){const e=m.oxw(2);m.Q6J("ngClass",m.WLB(2,ul,!e.hasFieldAssignedUser,e.hasFieldAssignedUser)),m.xp6(1),m.Q6J("fieldsetitem",e.fields.assigned_orgunit)}}function gl(e,t){if(1&e&&(m.TgZ(0,"div",10),m.YNc(1,hl,2,5,"div",11),m.YNc(2,ml,2,5,"div",11),m.qZA()),2&e){const e=m.oxw();m.xp6(1),m.Q6J("ngIf",e.hasFieldAssignedUser),m.xp6(1),m.Q6J("ngIf",e.hasFieldAssignedOrgunit)}}const pl=function(e,t){return{"slds-size--1-of-1":e,"slds-size--1-of-1 slds-medium-size--1-of-2":t}};let fl=(()=>{var e;class ObjectRecordAdministrationTab{constructor(e,t,s){(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"model",void 0),(0,i.Z)(this,"territories",void 0),(0,i.Z)(this,"componentconfig",{}),(0,i.Z)(this,"expanded",!0),(0,i.Z)(this,"hasFieldAssignedUser",!1),(0,i.Z)(this,"hasFieldAssignedOrgunit",!1),(0,i.Z)(this,"linkOrgunitToAssignedUser",!0),(0,i.Z)(this,"fields",{spiceacl_primary_territory:{field:"spiceacl_primary_territory",fieldconfig:{}},spiceacl_territories_hash:{field:"spiceacl_territories_hash",fieldconfig:{}},spiceacl_users_hash:{field:"spiceacl_users_hash",fieldconfig:{}},assigned_user:{field:"assigned_user",fieldconfig:{fieldtype:"linked"}},assigned_orgunit:{field:"assigned_orgunit",fieldconfig:{}},created_by_user:{field:"created_by_user",fieldconfig:{fieldtype:"modifiedby",field_date:"date_entered"}},modified_by_user:{field:"modified_by_user",fieldconfig:{fieldtype:"modifiedby",field_date:"date_modified"}}}),this.metadata=e,this.model=t,this.territories=s}ngOnInit(){this.componentconfig.collapsed&&(this.expanded=!1),this.componentconfig.unlinkorgunit&&(this.linkOrgunitToAssignedUser=!this.componentconfig.unlinkorgunit),this.hasFieldAssignedUser=this.metadata.hasField(this.model.module,"assigned_user_id"),this.hasFieldAssignedOrgunit=this.metadata.hasField(this.model.module,"assigned_orgunit_id"),this.hasFieldAssignedOrgunit&&this.linkOrgunitToAssignedUser&&this.model.data$.subscribe({next:e=>{this.model.getField("assigned_user_id")?(this.model._fields_stati.assigned_orgunit.readonly=!0,this.model.getField("assigned_orgunit_id")!=this.model.getField("assigned_user").orgunit_id&&this.model.setFields({assigned_orgunit_id:this.model.getField("assigned_user").orgunit_id,assigned_orgunit:this.model.getField("assigned_user").orgunit},!0)):this.model._fields_stati.assigned_orgunit.readonly=!1}})}getTypeParameters(){return this.territories.getModuleParamaters(this.model.module)}get territorymanaged(){return this.territories.checkModuleManaged(this.model.module)}get multipleterritories(){return 1==this.getTypeParameters().multipleobjects}get multipleusers(){return 1==this.metadata.getModuleDefs(this.model.module).acl_multipleusers}get hidden(){return this.componentconfig.requiredmodelstate&&!this.model.checkModelState(this.componentconfig.requiredmodelstate)}}return e=ObjectRecordAdministrationTab,(0,i.Z)(ObjectRecordAdministrationTab,"ɵfac",(function(t){return new(t||e)(m.Y36(v.Pu),m.Y36(p.o),m.Y36(al.b))})),(0,i.Z)(ObjectRecordAdministrationTab,"ɵcmp",m.Xpm({type:e,selectors:[["object-record-details-tab"]],decls:10,vars:11,consts:[[3,"title","expanded"],["class","slds-grid slds-wrap",4,"ngIf"],[4,"ngIf"],[1,"slds-grid","slds-wrap"],["class","slds-grid slds-size--1-of-1 slds-medium-size--1-of-2",4,"ngIf"],[1,"slds-grid",3,"ngClass"],[1,"slds-size--1-of-2"],[3,"fieldsetitem"],[1,"slds-size--1-of-1","slds-medium-size--1-of-2"],["class","slds-size--1-of-1 slds-medium-size--1-of-2",4,"ngIf"],[1,"slds-grid","slds-size--1-of-1","slds-medium-size--1-of-2"],[3,"ngClass",4,"ngIf"],[3,"ngClass"]],template:function(e,t){1&e&&(m.TgZ(0,"system-collapsable-tab",0),m.YNc(1,rl,4,2,"div",1),m.YNc(2,cl,2,1,"div",2),m.TgZ(3,"div",3),m.YNc(4,gl,3,2,"div",4),m.TgZ(5,"div",5)(6,"div",6),m._UZ(7,"object-record-fieldset-field",7),m.qZA(),m.TgZ(8,"div",6),m._UZ(9,"object-record-fieldset-field",7),m.qZA()()()()),2&e&&(m.Q6J("title",t.componentconfig.name)("expanded",t.expanded),m.xp6(1),m.Q6J("ngIf",t.territorymanaged),m.xp6(1),m.Q6J("ngIf",t.multipleusers),m.xp6(2),m.Q6J("ngIf",t.hasFieldAssignedUser||t.hasFieldAssignedOrgunit),m.xp6(1),m.Q6J("ngClass",m.WLB(8,pl,!t.hasFieldAssignedUser&&!t.hasFieldAssignedOrgunit,t.hasFieldAssignedUser||!t.hasFieldAssignedOrgunit)),m.xp6(2),m.Q6J("fieldsetitem",t.fields.created_by_user),m.xp6(2),m.Q6J("fieldsetitem",t.fields.modified_by_user))},dependencies:[n.mk,n.O5,$o.z,Qo.f],encapsulation:2})),ObjectRecordAdministrationTab})();function bl(e,t){if(1&e&&m._UZ(0,"field-label",4),2&e){const e=m.oxw().$implicit;m.Q6J("fieldname",e.field)("fieldconfig",e.fieldconfig)}}function vl(e,t){if(1&e&&(m.TgZ(0,"div",1),m.YNc(1,bl,1,2,"field-label",2),m._UZ(2,"field-container",3),m.qZA()),2&e){const e=t.$implicit,s=m.oxw();m.Q6J("ngClass",s.getFieldSizeClass()),m.xp6(1),m.Q6J("ngIf",s.showLabel(e.fieldconfig)&&"blank"!==e.field),m.xp6(1),m.Q6J("field",e.field)("fieldconfig",e.fieldconfig)("fielddisplayclass","slds-has-divider--bottom slds-p-vertical--x-small spice-fieldminheight")}}let Zl=(()=>{var e;class ObjectRecordDetailsTabRow{constructor(e,t,s,n){(0,i.Z)(this,"activatedRoute",void 0),(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"componentFactoryResolver",void 0),(0,i.Z)(this,"model",void 0),(0,i.Z)(this,"initialized",!1),(0,i.Z)(this,"componentconfig",{}),(0,i.Z)(this,"componentRefs",[]),(0,i.Z)(this,"rowFields",[]),(0,i.Z)(this,"fieldset",""),this.activatedRoute=e,this.metadata=t,this.componentFactoryResolver=s,this.model=n}ngOnInit(){this.rowFields=this.metadata.getFieldSetFields(this.fieldset.fieldset)}getFieldSizeClass(){return"slds-size--1-of-"+this.rowFields.length}getFieldWidth(){return{width:Math.round(1/this.rowFields.length*100)+"%"}}showLabel(e){return!0!==e.hidelabel}}return e=ObjectRecordDetailsTabRow,(0,i.Z)(ObjectRecordDetailsTabRow,"ɵfac",(function(t){return new(t||e)(m.Y36(a.gz),m.Y36(v.Pu),m.Y36(m._Vd),m.Y36(p.o))})),(0,i.Z)(ObjectRecordDetailsTabRow,"ɵcmp",m.Xpm({type:e,selectors:[["object-record-details-tab-row"]],inputs:{fieldset:"fieldset"},decls:1,vars:1,consts:[["class","slds-p-around--x-small",3,"ngClass",4,"ngFor","ngForOf"],[1,"slds-p-around--x-small",3,"ngClass"],[3,"fieldname","fieldconfig",4,"ngIf"],[3,"field","fieldconfig","fielddisplayclass"],[3,"fieldname","fieldconfig"]],template:function(e,t){1&e&&m.YNc(0,vl,3,5,"div",0),2&e&&m.Q6J("ngForOf",t.rowFields)},dependencies:[n.mk,n.sg,n.O5,Ci.q,qe.j],encapsulation:2})),ObjectRecordDetailsTabRow})(),_l=(()=>{var e;class ObjectRecordDetailsTabRowField{constructor(){(0,i.Z)(this,"field",{})}}return e=ObjectRecordDetailsTabRowField,(0,i.Z)(ObjectRecordDetailsTabRowField,"ɵfac",(function(t){return new(t||e)})),(0,i.Z)(ObjectRecordDetailsTabRowField,"ɵcmp",m.Xpm({type:e,selectors:[["object-record-details-tab-row-field"]],inputs:{field:"field"},decls:2,vars:5,consts:[[3,"fieldname","fieldconfig"],[3,"field","fieldconfig","fielddisplayclass"]],template:function(e,t){1&e&&m._UZ(0,"field-label",0)(1,"field-container",1),2&e&&(m.Q6J("fieldname",t.field.field)("fieldconfig",t.field.fieldconfig),m.xp6(1),m.Q6J("field",t.field.field)("fieldconfig",t.field.fieldconfig)("fielddisplayclass","slds-text-body--regular slds-truncate slds-m-vertical--x-small"))},dependencies:[Ci.q,qe.j],encapsulation:2})),ObjectRecordDetailsTabRowField})();function yl(e,t){if(1&e&&(m.TgZ(0,"span",7),m._uU(1),m.qZA()),2&e){const e=m.oxw().$implicit;m.xp6(1),m.Oqu(e.hasErrors)}}const xl=function(e){return{"slds-active":e}};function wl(e,t){if(1&e){const e=m.EpF();m.TgZ(0,"li",4),m.NdJ("click",(function(){const t=m.CHM(e).index,s=m.oxw();return m.KtG(s.setActiveTab(t))})),m.TgZ(1,"a",5),m.YNc(2,yl,2,1,"span",6),m._uU(3),m.qZA()()}if(2&e){const e=t.$implicit,s=t.index,i=m.oxw();m.Q6J("ngClass",m.VKq(3,xl,s===i.activeTab)),m.xp6(2),m.Q6J("ngIf",e.hasErrors),m.xp6(1),m.hij(" ",i.language.getLabel(e.name,i.model.module),"")}}function Tl(e,t){if(1&e){const e=m.EpF();m.TgZ(0,"object-tab-container-item",11),m.NdJ("taberrors",(function(t){m.CHM(e);const s=m.oxw(2).index,i=m.oxw();return m.KtG(i.showErrorsOnTab(s,t))})),m.qZA()}if(2&e){const e=m.oxw(2).$implicit;m.Q6J("componentset",e.componentset)}}function Cl(e,t){if(1&e&&(m.TgZ(0,"div",9),m.YNc(1,Tl,1,1,"object-tab-container-item",10),m.qZA()),2&e){const e=m.oxw(),t=e.index,s=e.$implicit,i=m.oxw();m.Q6J("ngClass",m.VKq(3,xl,i.showTab(t)))("hidden",!i.showTab(t)),m.xp6(1),m.Q6J("ngIf",s.componentset)}}function Al(e,t){if(1&e&&(m.ynx(0),m.YNc(1,Cl,2,5,"div",8),m.BQk()),2&e){const e=t.index,s=m.oxw();m.xp6(1),m.Q6J("ngIf",s.checkRenderTab(e))}}const kl=function(e){return{"slds-p-around--small":e}};let Ll=(()=>{var e;class ObjectRecordTabbedDetails{constructor(e,t,s,n,o){(0,i.Z)(this,"view",void 0),(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"componentFactoryResolver",void 0),(0,i.Z)(this,"model",void 0),(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"componentconfig",{}),(0,i.Z)(this,"activeTab",0),(0,i.Z)(this,"activatedTabs",[0]),(0,i.Z)(this,"componentTabs",[]),this.view=e,this.metadata=t,this.componentFactoryResolver=s,this.model=n,this.language=o,this.view.isEditable=!0}get tabs(){return this.componentTabs?this.componentTabs:[]}ngOnInit(){if(0==this.getTabs().length)if(this.componentconfig&&this.componentconfig.componentset){let e=this.metadata.getComponentSetObjects(this.componentconfig.componentset);this.componentTabs=[];for(let t of e)this.componentTabs.push(t.componentconfig)}else if(this.componentconfig.tabs)this.componentTabs=this.componentconfig.tabs;else{let e=this.metadata.getComponentConfig("ObjectRecordTabbedDetails",this.model.module);this.componentTabs=e.tabs}else this.componentTabs=this.getTabs()}getTabs(){try{return this.componentconfig.tabs?this.componentconfig.tabs:[]}catch(e){return[]}}setActiveTab(e){this.activatedTabs.push(e),this.activeTab=e}checkRenderTab(e){return e==this.activeTab||this.activatedTabs.indexOf(e)>-1}showTab(e){return e===this.activeTab}getDisplay(e){if(e!==this.activeTab)return{display:"none"}}cancel(){this.model.cancelEdit(),this.view.setViewMode()}save(){this.model.validate()&&(this.model.save(!0),this.view.setViewMode())}showErrorsOnTab(e,t){this.componentTabs[e].hasErrors=t}}return e=ObjectRecordTabbedDetails,(0,i.Z)(ObjectRecordTabbedDetails,"ɵfac",(function(t){return new(t||e)(m.Y36(Fe.e),m.Y36(v.Pu),m.Y36(m._Vd),m.Y36(p.o),m.Y36(g.d))})),(0,i.Z)(ObjectRecordTabbedDetails,"ɵcmp",m.Xpm({type:e,selectors:[["object-record-tabbed-details"]],decls:4,vars:5,consts:[[1,"slds-tabs--scoped","slds-p-bottom--small","slds-p-around--xx-small",3,"ngClass"],["role","tablist",1,"slds-tabs--scoped__nav"],["class","slds-tabs--scoped__item slds-text-title--caps slds-active","role","presentation",3,"ngClass","click",4,"ngFor","ngForOf"],[4,"ngFor","ngForOf"],["role","presentation",1,"slds-tabs--scoped__item","slds-text-title--caps","slds-active",3,"ngClass","click"],["href","javascript:void(0);","role","tab","aria-selected","false",1,"slds-tabs--scoped__link"],["class","slds-badge","title","Invalid fields!",4,"ngIf"],["title","Invalid fields!",1,"slds-badge"],["class","slds-tabs--scoped__content slds-p-vertical--xxx-small slds-p-horizontal--none","role","tabpanel",3,"ngClass","hidden",4,"ngIf"],["role","tabpanel",1,"slds-tabs--scoped__content","slds-p-vertical--xxx-small","slds-p-horizontal--none",3,"ngClass","hidden"],[3,"componentset","taberrors",4,"ngIf"],[3,"componentset","taberrors"]],template:function(e,t){1&e&&(m.TgZ(0,"div",0)(1,"ul",1),m.YNc(2,wl,4,5,"li",2),m.qZA(),m.YNc(3,Al,2,1,"ng-container",3),m.qZA()),2&e&&(m.Q6J("ngClass",m.VKq(3,kl,t.componentconfig.inModal)),m.xp6(2),m.Q6J("ngForOf",t.tabs),m.xp6(1),m.Q6J("ngForOf",t.tabs))},dependencies:[n.mk,n.sg,n.O5,Sn],styles:[".slds-badge[_ngcontent-%COMP%]{background-color:#c00;color:#fff;font-weight:700;padding:.125rem .4rem}"]})),ObjectRecordTabbedDetails})();const Il=["panelcontainer"];let Ml=(()=>{var e;class ObjectRecordTabbedDetailsTab{constructor(e,t,s,n,o){(0,i.Z)(this,"view",void 0),(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"componentFactoryResolver",void 0),(0,i.Z)(this,"model",void 0),(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"panelcontainer",void 0),(0,i.Z)(this,"componentset",""),(0,i.Z)(this,"componentRefs",[]),this.view=e,this.metadata=t,this.componentFactoryResolver=s,this.model=n,this.language=o}ngAfterViewInit(){this.buildContainer()}buildContainer(){for(let e of this.componentRefs)e.destroy();for(let e of this.metadata.getComponentSetObjects(this.componentset))this.metadata.addComponent(e.component,this.panelcontainer).subscribe((t=>{t.instance.componentconfig=e.componentconfig,this.componentRefs.push(t)}))}}return e=ObjectRecordTabbedDetailsTab,(0,i.Z)(ObjectRecordTabbedDetailsTab,"ɵfac",(function(t){return new(t||e)(m.Y36(Fe.e),m.Y36(v.Pu),m.Y36(m._Vd),m.Y36(p.o),m.Y36(g.d))})),(0,i.Z)(ObjectRecordTabbedDetailsTab,"ɵcmp",m.Xpm({type:e,selectors:[["object-record-tabbed-details-tab"]],viewQuery:function(e,t){if(1&e&&m.Gf(Il,7,m.s_b),2&e){let e;m.iGM(e=m.CRH())&&(t.panelcontainer=e.first)}},inputs:{componentset:"componentset"},decls:2,vars:0,consts:[["panelcontainer",""]],template:function(e,t){1&e&&m._UZ(0,"div",null,0)},encapsulation:2})),ObjectRecordTabbedDetailsTab})(),Sl=(()=>{var e;class ObjectRecordDetailsRelatedListTab{constructor(e){(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"componentconfig",{}),this.language=e}}return e=ObjectRecordDetailsRelatedListTab,(0,i.Z)(ObjectRecordDetailsRelatedListTab,"ɵfac",(function(t){return new(t||e)(m.Y36(g.d))})),(0,i.Z)(ObjectRecordDetailsRelatedListTab,"ɵcmp",m.Xpm({type:e,selectors:[["object-record-details-related-list-tab"]],decls:3,vars:2,consts:[[3,"title"],[1,"slds-p-horizontal--xx-small"],[3,"componentconfig"]],template:function(e,t){1&e&&(m.TgZ(0,"system-collapsable-tab",0)(1,"div",1),m._UZ(2,"object-related-list",2),m.qZA()()),2&e&&(m.Q6J("title",t.componentconfig.name),m.xp6(2),m.Q6J("componentconfig",t.componentconfig))},dependencies:[$o.z,uo.s],encapsulation:2})),ObjectRecordDetailsRelatedListTab})();var Jl=s(9866),Ol=s(9624),Nl=s(9533);function Fl(e,t){if(1&e){const e=m.EpF();m.TgZ(0,"object-modal-module-lookup",3),m.NdJ("selectedItems",(function(t){m.CHM(e);const s=m.oxw();return m.KtG(s.emitSelectedItems(t))})),m.qZA()}}let ql=(()=>{var e;class ObjectSelectButton{constructor(e,t){(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"model",void 0),(0,i.Z)(this,"module",""),(0,i.Z)(this,"displaymodulename",!0),(0,i.Z)(this,"selectedItems",new m.vpe),(0,i.Z)(this,"displayModal",!1),(0,i.Z)(this,"popupSubscribe",void 0),this.metadata=e,this.model=t}ngOnInit(){this.model.module=this.module}openModal(){}emitSelectedItems(e){this.selectedItems.emit(e)}}return e=ObjectSelectButton,(0,i.Z)(ObjectSelectButton,"ɵfac",(function(t){return new(t||e)(m.Y36(v.Pu),m.Y36(p.o))})),(0,i.Z)(ObjectSelectButton,"ɵcmp",m.Xpm({type:e,selectors:[["object-select-button"]],inputs:{module:"module",displaymodulename:"displaymodulename"},outputs:{selectedItems:"selectedItems"},features:[m._Bn([p.o])],decls:3,vars:1,consts:[[1,"slds-button","slds-button--neutral",3,"click"],["label","LBL_SELECT"],[3,"selectedItems",4,"ngIf"],[3,"selectedItems"]],template:function(e,t){1&e&&(m.TgZ(0,"button",0),m.NdJ("click",(function(){return t.openModal()})),m._UZ(1,"system-label",1),m.qZA(),m.YNc(2,Fl,1,0,"object-modal-module-lookup",2)),2&e&&(m.xp6(2),m.Q6J("ngIf",t.displayModal))},dependencies:[n.O5,S._,Nl.X],encapsulation:2})),ObjectSelectButton})();function El(e,t){if(1&e){const e=m.EpF();m.TgZ(0,"div",3)(1,"a",4),m.NdJ("click",(function(){m.CHM(e);const t=m.oxw();return m.KtG(t.deleteAddress())})),m._UZ(2,"system-label",5),m.qZA()()}}let Yl=(()=>{var e;class ObjectAddress{constructor(e,t,s,n,o,l){(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"model",void 0),(0,i.Z)(this,"view",void 0),(0,i.Z)(this,"modelutilities",void 0),(0,i.Z)(this,"footer",void 0),(0,i.Z)(this,"componentconfig",{}),(0,i.Z)(this,"address",{}),(0,i.Z)(this,"parent",{}),(0,i.Z)(this,"fieldset",""),this.language=e,this.metadata=t,this.model=s,this.view=n,this.modelutilities=o,this.footer=l,this.model.module="Addresses"}ngOnInit(){if(this.model.id=this.address.id,this.model.setData(this.address),null==this.fieldset||""==this.fieldset){let e=this.metadata.getComponentConfig("ObjectAddress",this.parent.module);null==e.fieldset&&""==e.fieldset||(this.fieldset=e.fieldset)}}deleteAddress(){this.metadata.addComponent("SystemConfirmDialog",this.footer.footercontainer).subscribe((e=>{e.instance.title=this.language.getLabel("LBL_DELETE_ADDRESS_TITLE","Addresses"),e.instance.message=this.language.getLabel("LBL_DELETE_ADDRESS_TEXT","Addresses"),e.instance.answer.subscribe((e=>{e&&this.model.setField("deleted",!0)}))}))}}return e=ObjectAddress,(0,i.Z)(ObjectAddress,"ɵfac",(function(t){return new(t||e)(m.Y36(g.d),m.Y36(v.Pu),m.Y36(p.o),m.Y36(Fe.e),m.Y36(Po.A),m.Y36(as.M))})),(0,i.Z)(ObjectAddress,"ɵcmp",m.Xpm({type:e,selectors:[["object-address"]],inputs:{address:"address",parent:"parent",fieldset:"fieldset"},features:[m._Bn([p.o])],decls:3,vars:3,consts:[[1,"slds-box","slds-m-around--x-small",2,"padding","0px"],[3,"fieldset","direction"],["class","slds-text-align_right slds-m-around--x-small",4,"ngIf"],[1,"slds-text-align_right","slds-m-around--x-small"],["href","javascript:void(0);",1,"slds-text-link_reset",3,"click"],["label","LBL_DELETE"]],template:function(e,t){1&e&&(m.TgZ(0,"div",0),m._UZ(1,"object-record-fieldset",1),m.YNc(2,El,3,0,"div",2),m.qZA()),2&e&&(m.xp6(1),m.Q6J("fieldset",t.fieldset)("direction","vertical"),m.xp6(1),m.Q6J("ngIf",t.view.isEditMode()))},dependencies:[n.O5,S._,Bs.d],encapsulation:2})),ObjectAddress})();function Dl(e,t){if(1&e&&m._UZ(0,"object-address",10),2&e){const e=t.$implicit,s=m.oxw(2);m.Q6J("address",e)("parent",s.model)("fieldset",s.componentconfig.fieldset)}}function Ql(e,t){if(1&e&&(m.ynx(0),m.YNc(1,Dl,1,3,"object-address",9),m.BQk()),2&e){const e=m.oxw();m.xp6(1),m.Q6J("ngForOf",e.addresses)}}function Ul(e,t){if(1&e){const e=m.EpF();m.TgZ(0,"div",11)(1,"a",12),m.NdJ("click",(function(){m.CHM(e);const t=m.oxw();return m.KtG(t.addAddress())})),m._UZ(2,"system-label",13),m.qZA()()}}const Rl=function(e,t){return{"slds-is-open":e,"slds-hide":t}};let jl=(()=>{var e;class ObjectAddressesPipe{transform(e){let t=[];for(let s in e)t.push(e[s]);return t}}return e=ObjectAddressesPipe,(0,i.Z)(ObjectAddressesPipe,"ɵfac",(function(t){return new(t||e)})),(0,i.Z)(ObjectAddressesPipe,"ɵpipe",m.Yjl({name:"objectaddressespipe",type:e,pure:!1})),ObjectAddressesPipe})(),Bl=(()=>{var e;class ObjectAddresses{constructor(e,t,s,n,o){(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"model",void 0),(0,i.Z)(this,"view",void 0),(0,i.Z)(this,"modelutilities",void 0),(0,i.Z)(this,"componentconfig",{}),(0,i.Z)(this,"expanded",!0),this.language=e,this.metadata=t,this.model=s,this.view=n,this.modelutilities=o}get hasAddresses(){try{return null!=this.model.data.addresses.beans}catch(e){return!1}}ngOnInit(){this.componentconfig.collapsed&&(this.expanded=!1)}get hidden(){return this.componentconfig.requiredmodelstate&&!this.model.checkModelState(this.componentconfig.requiredmodelstate)}getDisplay(){return this.addresses.length>0||this.view.isEditMode()?"inherit":"none"}get addresses(){let e=[];try{for(let t in this.model.data.addresses.beans)0==this.model.data.addresses.beans[t].deleted&&e.push(this.model.data.addresses.beans[t])}catch(e){}return e}togglePanel(){this.expanded=!this.expanded}getChevronStyle(){if(!this.expanded)return{transform:"rotate(45deg)","margin-top":"4px"}}getTabStyle(){if(!this.expanded)return{height:"0px",transform:"rotateX(90deg)"}}addAddress(){let e=this.modelutilities.generateGuid();null==this.model.data.addresses&&(this.model.data.addresses={beans:[]}),this.model.data.addresses.beans[e]={id:e,deleted:!1}}}return e=ObjectAddresses,(0,i.Z)(ObjectAddresses,"ɵfac",(function(t){return new(t||e)(m.Y36(g.d),m.Y36(v.Pu),m.Y36(p.o),m.Y36(Fe.e),m.Y36(Po.A))})),(0,i.Z)(ObjectAddresses,"ɵcmp",m.Xpm({type:e,selectors:[["object-addresses"]],hostVars:2,hostBindings:function(e,t){2&e&&m.Udp("display",t.getDisplay())},decls:10,vars:10,consts:[[1,"slds-section",3,"ngClass"],[1,"slds-section__title"],["aria-controls","expando-unique-id","aria-expanded","true",1,"slds-button","slds-section__title-action",3,"click"],[3,"icon","size","addclasses"],[1,"slds-truncate"],["label","LBL_ADDRESSES"],[3,"ngStyle"],[4,"ngIf"],["class","slds-box slds-m-around--x-small slds-align--absolute-center","style","padding:0.5rem;",4,"ngIf"],[3,"address","parent","fieldset",4,"ngFor","ngForOf"],[3,"address","parent","fieldset"],[1,"slds-box","slds-m-around--x-small","slds-align--absolute-center",2,"padding","0.5rem"],["href","javascript:void(0);",1,"slds-text-link_reset",3,"click"],["label","LBL_ADD_ADDRESS"]],template:function(e,t){1&e&&(m.TgZ(0,"div",0)(1,"h3",1)(2,"button",2),m.NdJ("click",(function(){return t.togglePanel()})),m._UZ(3,"system-utility-icon",3),m.TgZ(4,"span",4),m._UZ(5,"system-label",5),m.qZA()()(),m.TgZ(6,"div")(7,"div",6),m.YNc(8,Ql,2,1,"ng-container",7),m.YNc(9,Ul,3,0,"div",8),m.qZA()()()),2&e&&(m.Q6J("ngClass",m.WLB(7,Rl,t.expanded,t.hidden)),m.xp6(3),m.Q6J("icon","switch")("size","x-small")("addclasses","slds-section__title-action-icon slds-button__icon slds-button__icon_left"),m.xp6(4),m.Q6J("ngStyle",t.getTabStyle()),m.xp6(1),m.Q6J("ngIf",t.hasAddresses),m.xp6(1),m.Q6J("ngIf",t.view.isEditMode()))},dependencies:[n.mk,n.sg,n.O5,n.PC,S._,C.r,Yl],encapsulation:2})),ObjectAddresses})();var Gl=s(3814);function Pl(e,t){if(1&e&&(m.TgZ(0,"system-collapsable-tab",27),m._UZ(1,"object-record-fieldset",28),m.qZA()),2&e){const e=m.oxw();m.Q6J("title",e.language.getLabel("LBL_DETAILS")),m.xp6(1),m.Q6J("fieldset",e.fieldset)}}function Hl(e,t){if(1&e&&(m.TgZ(0,"tr")(1,"td",29),m._UZ(2,"system-display-datetime",30),m.qZA(),m.TgZ(3,"td",29)(4,"div",9),m._uU(5),m.qZA()(),m.TgZ(6,"td",29)(7,"div",31),m._UZ(8,"system-icon",32),m.TgZ(9,"div",9),m._uU(10),m.qZA()()(),m.TgZ(11,"td",29)(12,"div",9),m._uU(13),m.qZA()(),m.TgZ(14,"td",29),m._UZ(15,"system-checkbox",33),m.qZA(),m.TgZ(16,"td",29),m._UZ(17,"system-checkbox",33),m.qZA()()),2&e){const e=t.$implicit;m.xp6(2),m.Q6J("date",e.date_entered),m.xp6(3),m.Oqu(e.created_by_name),m.xp6(3),m.Q6J("module",e.module),m.xp6(2),m.Oqu(e.module),m.xp6(3),m.Oqu(e.summary_text),m.xp6(2),m.Q6J("ngModel",1==e.gdpr_data_agreement)("disabled",!0),m.xp6(2),m.Q6J("ngModel",1==e.gdpr_marketing_agreement||"g"==e.gdpr_marketing_agreement)("disabled",!0)}}function zl(e,t){1&e&&(m.TgZ(0,"div",34),m._UZ(1,"system-label",35),m.qZA())}const Vl=function(e,t){return{id:null,module:e,data:t}};function Kl(e,t){if(1&e&&(m.TgZ(0,"tr",36)(1,"td",29),m._UZ(2,"system-display-datetime",30),m.qZA(),m.TgZ(3,"td",29)(4,"div",9),m._uU(5),m.qZA()(),m.TgZ(6,"td",29)(7,"div",9),m._UZ(8,"field-label",37),m.qZA()(),m.TgZ(9,"td",29)(10,"div",9),m._UZ(11,"field-container",38),m.qZA()()()),2&e){const e=t.$implicit,s=m.oxw();m.Q6J("system-model-provider",m.WLB(5,Vl,s.model.module,e.model)),m.xp6(2),m.Q6J("date",e.date_created),m.xp6(3),m.Oqu(e.created_by_name),m.xp6(3),m.Q6J("fieldname",e.field_name),m.xp6(3),m.Q6J("field",e.field_name)}}function $l(e,t){1&e&&(m.TgZ(0,"div",34),m._UZ(1,"system-label",39),m.qZA())}const Xl=function(){return{displayLabels:!1,displayLinks:!0,editable:!1}};let Wl=(()=>{var e;class ObjectGDPRModal{constructor(e,t,s,n){(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"model",void 0),(0,i.Z)(this,"view",void 0),(0,i.Z)(this,"componentconfig",{}),(0,i.Z)(this,"self",{}),(0,i.Z)(this,"gdprRelatedLog",[]),(0,i.Z)(this,"gdprAuditLog",[]),this.language=e,this.metadata=t,this.model=s,this.view=n,this.view.isEditable=!1}ngOnInit(){this.componentconfig=this.metadata.getComponentConfig("ObjectGDPRModal",this.model.module)}get fieldset(){return this.componentconfig.fieldset}closeModal(){this.self.destroy()}}return e=ObjectGDPRModal,(0,i.Z)(ObjectGDPRModal,"ɵfac",(function(t){return new(t||e)(m.Y36(g.d),m.Y36(v.Pu),m.Y36(p.o),m.Y36(Fe.e))})),(0,i.Z)(ObjectGDPRModal,"ɵcmp",m.Xpm({type:e,selectors:[["ng-component"]],features:[m._Bn([Fe.e])],decls:52,vars:9,consts:[["size","large"],[3,"close"],["label","LBL_GDPR"],["margin","none",3,"grow"],[3,"title",4,"ngIf"],["margin","none",3,"title"],[1,"slds-table","slds-table--bordered","slds-table--cell-buffer"],[1,"slds-text-title--caps"],["scope","col"],[1,"slds-truncate"],["label","LBL_DATE_ENTERED"],["label","LBL_CREATED_BY"],["label","LBL_MODULE"],["label","LBL_NAME"],["label","LBL_DATA"],["label","LBL_MARKETING"],[4,"ngFor","ngForOf"],["class","slds-text-heading--small slds-p-around--medium slds-align--absolute-center",4,"ngIf"],["system-title","LBL_AUDITLOG","margin","none"],["label","LBL_DATE_MODIFIED"],["label","LBL_MODIFIED_BY"],["label","LBL_FIELD"],["label","LBL_VALUE"],[3,"system-view-provider"],[3,"system-model-provider",4,"ngFor","ngForOf"],[1,"slds-button","slds-button--neutral",3,"click"],["label","LBL_CLOSE"],[3,"title"],["direction","vertical",3,"fieldset"],["scope","row"],[3,"date"],[1,"slds-grid","slds-grid--vertical-align-center"],["size","xx-small",3,"module"],[3,"ngModel","disabled"],[1,"slds-text-heading--small","slds-p-around--medium","slds-align--absolute-center"],["label","MSG_NO_GDPRRECORDS_FOUND"],[3,"system-model-provider"],[3,"fieldname"],["fielddisplayclass","slds-truncate",3,"field"],["label","MSG_NOAUDITRECORDS_FOUND"]],template:function(e,t){1&e&&(m.TgZ(0,"system-modal",0)(1,"system-modal-header",1),m.NdJ("close",(function(){return t.closeModal()})),m._UZ(2,"system-label",2),m.qZA(),m.TgZ(3,"system-modal-content",3),m.YNc(4,Pl,2,2,"system-collapsable-tab",4),m.TgZ(5,"system-collapsable-tab",5)(6,"table",6)(7,"thead")(8,"tr",7)(9,"th",8)(10,"div",9),m._UZ(11,"system-label",10),m.qZA()(),m.TgZ(12,"th",8)(13,"div",9),m._UZ(14,"system-label",11),m.qZA()(),m.TgZ(15,"th",8)(16,"div",9),m._UZ(17,"system-label",12),m.qZA()(),m.TgZ(18,"th",8)(19,"div",9),m._UZ(20,"system-label",13),m.qZA()(),m.TgZ(21,"th",8)(22,"div",9),m._UZ(23,"system-label",14),m.qZA()(),m.TgZ(24,"th",8)(25,"div",9),m._UZ(26,"system-label",15),m.qZA()()()(),m.TgZ(27,"tbody"),m.YNc(28,Hl,18,9,"tr",16),m.qZA()(),m.YNc(29,zl,2,0,"div",17),m.qZA(),m.TgZ(30,"system-collapsable-tab",18)(31,"table",6)(32,"thead")(33,"tr",7)(34,"th",8)(35,"div",9),m._UZ(36,"system-label",19),m.qZA()(),m.TgZ(37,"th",8)(38,"div",9),m._UZ(39,"system-label",20),m.qZA()(),m.TgZ(40,"th",8)(41,"div",9),m._UZ(42,"system-label",21),m.qZA()(),m.TgZ(43,"th",8)(44,"div",9),m._UZ(45,"system-label",22),m.qZA()()()(),m.TgZ(46,"tbody",23),m.YNc(47,Kl,12,8,"tr",24),m.qZA()(),m.YNc(48,$l,2,0,"div",17),m.qZA()(),m.TgZ(49,"system-modal-footer")(50,"button",25),m.NdJ("click",(function(){return t.closeModal()})),m._UZ(51,"system-label",26),m.qZA()()()),2&e&&(m.xp6(3),m.Q6J("grow",!0),m.xp6(1),m.Q6J("ngIf",t.fieldset),m.xp6(1),m.Q6J("title",t.language.getLabel("LBL_GDPR_RECORDS")),m.xp6(23),m.Q6J("ngForOf",t.gdprRelatedLog),m.xp6(1),m.Q6J("ngIf",0===t.gdprRelatedLog.length),m.xp6(17),m.Q6J("system-view-provider",m.DdM(8,Xl)),m.xp6(1),m.Q6J("ngForOf",t.gdprAuditLog),m.xp6(1),m.Q6J("ngIf",0===t.gdprAuditLog.length))},dependencies:[n.sg,n.O5,l.JJ,l.On,Ci.q,qe.j,ci.U,$o.z,St.a,T.f,S._,Ee.j,Ye.x,De.p,Qe.y,Ks.u,Gl.V,k.S,Bs.d],encapsulation:2})),ObjectGDPRModal})();const ea=["object-row-item",""];function ta(e,t){if(1&e){const e=m.EpF();m.TgZ(0,"td",2)(1,"label",3)(2,"input",4),m.NdJ("ngModelChange",(function(t){m.CHM(e);const s=m.oxw();return m.KtG(s.selected=t)})),m.qZA(),m._UZ(3,"span",5),m.qZA()()}if(2&e){const e=m.oxw();m.xp6(2),m.Q6J("ngModel",e.selected)}}function sa(e,t){if(1&e&&(m.TgZ(0,"td",6),m._UZ(1,"field-container",7),m.qZA()),2&e){const e=t.$implicit;m.xp6(1),m.Q6J("field",e.field)("fieldconfig",e.fieldconfig)("fielddisplayclass","slds-truncate slds-p-horizontal--x-small")}}function ia(e,t){1&e&&(m.TgZ(0,"td",2),m._UZ(1,"object-action-menu",8),m.qZA()),2&e&&(m.xp6(1),m.Q6J("buttonsize","small"))}let na=(()=>{var e;class ObjectRowItemComponent{constructor(e,t,s,n){(0,i.Z)(this,"model",void 0),(0,i.Z)(this,"view",void 0),(0,i.Z)(this,"router",void 0),(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"rowselect",!1),(0,i.Z)(this,"listFields",[]),(0,i.Z)(this,"listItem",{}),(0,i.Z)(this,"module",void 0),(0,i.Z)(this,"inlineedit",!1),(0,i.Z)(this,"showActionMenu",!0),(0,i.Z)(this,"_selected",!1),(0,i.Z)(this,"select",new m.vpe),this.model=e,this.view=t,this.router=s,this.language=n}ngOnInit(){this.model.module=this.module,this.model.id=this.listItem.id,this.model.setData(this.listItem),this.view.isEditable=this.inlineedit&&this.model.checkAccess("edit")}set selected(e){this._selected=e,this.select.emit(e)}get selected(){return this._selected}navigateDetail(){this.router.navigate(["/module/"+this.model.module+"/"+this.model.id])}}return e=ObjectRowItemComponent,(0,i.Z)(ObjectRowItemComponent,"ɵfac",(function(t){return new(t||e)(m.Y36(p.o),m.Y36(Fe.e),m.Y36(a.F0),m.Y36(g.d))})),(0,i.Z)(ObjectRowItemComponent,"ɵcmp",m.Xpm({type:e,selectors:[["","object-row-item",""]],hostVars:4,hostBindings:function(e,t){2&e&&m.ekj("slds-is-active",t._selected)("slds-is-selected",t._selected)},inputs:{rowselect:["rowselection","rowselect"],listFields:["fields","listFields"],listItem:["itemdata","listItem"],module:"module",inlineedit:"inlineedit",showActionMenu:"showActionMenu",_selected:["selected","_selected"]},outputs:{select:"select"},features:[m._Bn([p.o,Fe.e])],attrs:ea,decls:3,vars:3,consts:[["role","gridcell","class","slds-cell-shrink",4,"ngIf"],["scope","row",4,"ngFor","ngForOf"],["role","gridcell",1,"slds-cell-shrink"],[1,"slds-checkbox"],["type","checkbox",3,"ngModel","ngModelChange"],[1,"slds-checkbox--faux"],["scope","row"],[3,"field","fieldconfig","fielddisplayclass"],[3,"buttonsize"]],template:function(e,t){1&e&&(m.YNc(0,ta,4,1,"td",0),m.YNc(1,sa,2,3,"td",1),m.YNc(2,ia,2,1,"td",0)),2&e&&(m.Q6J("ngIf",t.rowselect),m.xp6(1),m.Q6J("ngForOf",t.listFields),m.xp6(1),m.Q6J("ngIf",t.showActionMenu))},dependencies:[n.sg,n.O5,l.Wl,l.JJ,l.On,qe.j,ot.g],encapsulation:2})),ObjectRowItemComponent})(),oa=(()=>{var e;class ObjectActionVCardButton{constructor(e,t,s,n){(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"model",void 0),(0,i.Z)(this,"modal",void 0),(0,i.Z)(this,"backend",void 0),this.language=e,this.model=t,this.modal=s,this.backend=n}execute(){let e=this.model.module+"_"+this.model.getField("summary_text")+".vcf";this.modal.openModal("SystemLoadingModal").subscribe((t=>{t.instance.messagelabel="MSG_GENERATING_VCARD",this.backend.downloadFile({route:`/module/${this.model.module}/${this.model.id}/vcard`},e,"text/bin").subscribe((e=>{t.instance.self.destroy()}),(e=>{t.instance.self.destroy()}))}))}}return e=ObjectActionVCardButton,(0,i.Z)(ObjectActionVCardButton,"ɵfac",(function(t){return new(t||e)(m.Y36(g.d),m.Y36(p.o),m.Y36(K.o),m.Y36(ee.y))})),(0,i.Z)(ObjectActionVCardButton,"ɵcmp",m.Xpm({type:e,selectors:[["object-action-output-bean-button"]],decls:2,vars:0,template:function(e,t){1&e&&(m.TgZ(0,"span"),m._uU(1,"VCARD"),m.qZA())},encapsulation:2})),ObjectActionVCardButton})();var la=s(2803);function aa(e,t){1&e&&m._UZ(0,"system-stencil")}let da=(()=>{var e;class ObjectModelPopoverHeader{constructor(e){(0,i.Z)(this,"model",void 0),this.model=e}}return e=ObjectModelPopoverHeader,(0,i.Z)(ObjectModelPopoverHeader,"ɵfac",(function(t){return new(t||e)(m.Y36(p.o))})),(0,i.Z)(ObjectModelPopoverHeader,"ɵcmp",m.Xpm({type:e,selectors:[["object-model-popover-header"]],decls:7,vars:3,consts:[[1,"slds-media","slds-media_center","slds-m-bottom_small","slds-p-right--large"],["size","small",3,"module"],[1,"slds-media__body"],[4,"ngIf"],[1,"slds-text-heading_small","slds-hyphenate"],["href","javascript:void(0);",3,"click"]],template:function(e,t){1&e&&(m.TgZ(0,"header",0),m._UZ(1,"system-icon",1),m.TgZ(2,"div",2),m.YNc(3,aa,1,0,"system-stencil",3),m.TgZ(4,"h2",4)(5,"a",5),m.NdJ("click",(function(){return t.model.goDetail()})),m._uU(6),m.qZA()()()()),2&e&&(m.xp6(1),m.Q6J("module",t.model.module),m.xp6(2),m.Q6J("ngIf",t.model.isLoading),m.xp6(3),m.Oqu(t.model.data.summary_text))},dependencies:[n.O5,T.f,la.B],encapsulation:2})),ObjectModelPopoverHeader})();const ra=["popover"],ca=["relatedcontainer"];function ua(e,t){if(1&e&&m._UZ(0,"system-componentset",11),2&e){const e=m.oxw();m.Q6J("componentset",e.headercomponentset)}}function ha(e,t){1&e&&m._UZ(0,"object-model-popover-header")}const ma=function(e,t){return{"slds-size--1-of-2":e,"slds-size--1-of-1":t}};function ga(e,t){if(1&e&&(m.TgZ(0,"div",12)(1,"dl")(2,"dd"),m._UZ(3,"field-container",13),m.qZA()()()),2&e){const e=t.$implicit,s=m.oxw();m.Q6J("ngClass",m.WLB(4,ma,s.fields.length>1,1==s.fields.length)),m.xp6(3),m.Q6J("field",e.field)("fieldconfig",e.fieldconfig)("fielddisplayclass","slds-truncate")}}let pa=(()=>{var e;class ObjectModelPopover{constructor(e,t,s){(0,i.Z)(this,"model",void 0),(0,i.Z)(this,"view",void 0),(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"popoverside","right"),(0,i.Z)(this,"popoverpos","top"),(0,i.Z)(this,"styles",null),(0,i.Z)(this,"hidePopoverTimeout",{}),(0,i.Z)(this,"popover",void 0),(0,i.Z)(this,"relatedContainer",void 0),(0,i.Z)(this,"parentElementRef",null),(0,i.Z)(this,"self",null),(0,i.Z)(this,"fields",[]),(0,i.Z)(this,"fieldset",""),(0,i.Z)(this,"componentset",""),(0,i.Z)(this,"headercomponentset",""),(0,i.Z)(this,"heightcorrection",30),(0,i.Z)(this,"widthcorrection",30),this.model=e,this.view=t,this.metadata=s,this.view.displayLinks=!1}get relatedStyle(){return{"max-height":`calc(100vh - ${this.relatedContainer.element.nativeElement.getBoundingClientRect().top+5}px)`}}onMouseOver(){this.hidePopoverTimeout&&window.clearTimeout(this.hidePopoverTimeout)}onMouseOut(){this.closePopover()}get popoverStyle(){let e=this.parentElementRef.nativeElement.getBoundingClientRect(),t=this.popover.element.nativeElement.getBoundingClientRect();return window.innerWidth-e.left>t.width?this.popoverside="right":this.popoverside="left",e.top-30+t.height>window.innerHeight&&e.top-t.height+this.heightcorrection>0?(this.popoverpos="bottom",{top:e.top-t.height+this.heightcorrection+"px",left:"right"==this.popoverside?e.left+100+"px":e.left-t.width-this.widthcorrection+"px"}):(this.popoverpos="top",{top:e.top-this.heightcorrection+"px",left:"right"==this.popoverside?e.left+100+"px":e.left-t.width-this.widthcorrection+"px"})}ngOnInit(){let e=this.metadata.getComponentConfig("ObjectModelPopover",this.model.module);e.fieldset||e.componentset?(this.fields=this.metadata.getFieldSetFields(e.fieldset),this.fieldset=e.fieldset,this.componentset=e.componentset,this.headercomponentset=e.headercomponentset):(e=this.metadata.getComponentConfig("ObjectPageHeaderDetails",this.model.module),e.fieldset&&(this.fields=this.metadata.getFieldSetFields(e.fieldset),this.fieldset=e.fieldset)),e.forcereload&&this.model.getData(!1),this.styles=this.popoverStyle}getNubbinClass(){return("left"==this.popoverside?"slds-nubbin--right-":"slds-nubbin--left-")+this.popoverpos}closePopover(e=!1){e?this.self.destroy():this.hidePopoverTimeout=window.setTimeout((()=>this.self.destroy()),500)}}return e=ObjectModelPopover,(0,i.Z)(ObjectModelPopover,"ɵfac",(function(t){return new(t||e)(m.Y36(p.o),m.Y36(Fe.e),m.Y36(v.Pu))})),(0,i.Z)(ObjectModelPopover,"ɵcmp",m.Xpm({type:e,selectors:[["object-model-popover"]],viewQuery:function(e,t){if(1&e&&(m.Gf(ra,7,m.s_b),m.Gf(ca,7,m.s_b)),2&e){let e;m.iGM(e=m.CRH())&&(t.popover=e.first),m.iGM(e=m.CRH())&&(t.relatedContainer=e.first)}},features:[m._Bn([Fe.e])],decls:13,vars:7,consts:[["role","dialog",1,"slds-popover","slds-popover_large","slds-popover--panel","slds-is-fixed",2,"transition",".5s","z-index","11000",3,"ngStyle","ngClass","mouseenter","mouseleave"],[1,"slds-button","slds-button_icon","slds-button_icon","slds-button_icon-small","slds-float_right","slds-popover__close",3,"click"],["icon","close"],["popover",""],[1,"slds-popover__header"],[3,"componentset",4,"ngIf"],[4,"ngIf"],[1,"slds-grid","slds-wrap","slds-p-right--large"],["class","slds-p-horizontal--small slds-size--1-of-2 slds-p-bottom--x-small",3,"ngClass",4,"ngFor","ngForOf"],[1,"slds-popover__body","slds-scrollable--y","spice-scrollbar",3,"ngStyle"],["relatedcontainer",""],[3,"componentset"],[1,"slds-p-horizontal--small","slds-size--1-of-2","slds-p-bottom--x-small",3,"ngClass"],[3,"field","fieldconfig","fielddisplayclass"]],template:function(e,t){1&e&&(m.TgZ(0,"div",0),m.NdJ("mouseenter",(function(){return t.onMouseOver()}))("mouseleave",(function(){return t.onMouseOut()})),m.TgZ(1,"button",1),m.NdJ("click",(function(){return t.closePopover(!0)})),m._UZ(2,"system-button-icon",2),m.qZA(),m.TgZ(3,"div",null,3)(5,"div",4),m.YNc(6,ua,1,1,"system-componentset",5),m.YNc(7,ha,1,0,"object-model-popover-header",6),m.TgZ(8,"footer",7),m.YNc(9,ga,4,7,"div",8),m.qZA()(),m.TgZ(10,"div",9,10),m._UZ(12,"system-componentset",11),m.qZA()()()),2&e&&(m.Q6J("ngStyle",t.popoverStyle)("ngClass",t.getNubbinClass()),m.xp6(6),m.Q6J("ngIf",t.headercomponentset),m.xp6(1),m.Q6J("ngIf",!t.headercomponentset),m.xp6(2),m.Q6J("ngForOf",t.fields),m.xp6(1),m.Q6J("ngStyle",t.relatedStyle),m.xp6(2),m.Q6J("componentset",t.componentset))},dependencies:[n.mk,n.sg,n.O5,n.PC,qe.j,w.J,Pi.E,da],encapsulation:2})),ObjectModelPopover})();const fa=function(e){return{"slds-hide":e}};function ba(e,t){if(1&e&&(m.TgZ(0,"div",1),m._UZ(1,"field-label",2)(2,"field-container",2),m.qZA()),2&e){const e=m.oxw();m.Q6J("ngClass",m.VKq(3,fa,e.hidden)),m.xp6(1),m.Q6J("fieldname",e.fieldname),m.xp6(1),m.Q6J("fieldname",e.fieldname)}}let va=(()=>{var e;class ObjectModelPopoverField{constructor(e,t){(0,i.Z)(this,"model",void 0),(0,i.Z)(this,"view",void 0),(0,i.Z)(this,"componentconfig",{}),this.model=e,this.view=t}get hidden(){return this.componentconfig.hideempty&&!this.model.getFieldValue(this.componentconfig.field)}get fieldname(){return this.componentconfig.field?this.componentconfig.field:""}}return e=ObjectModelPopoverField,(0,i.Z)(ObjectModelPopoverField,"ɵfac",(function(t){return new(t||e)(m.Y36(p.o),m.Y36(Fe.e))})),(0,i.Z)(ObjectModelPopoverField,"ɵcmp",m.Xpm({type:e,selectors:[["ng-component"]],features:[m._Bn([Fe.e])],decls:1,vars:1,consts:[["class","slds-p-vertical--xx-small slds-p-horizontal--large",3,"ngClass",4,"ngIf"],[1,"slds-p-vertical--xx-small","slds-p-horizontal--large",3,"ngClass"],[3,"fieldname"]],template:function(e,t){1&e&&m.YNc(0,ba,3,5,"div",0),2&e&&m.Q6J("ngIf",t.fieldname)},dependencies:[n.mk,n.O5,Ci.q,qe.j],encapsulation:2})),ObjectModelPopoverField})();function Za(e,t){if(1&e&&(m.ynx(0),m.TgZ(1,"dt",5),m._UZ(2,"field-label",6),m.qZA(),m.TgZ(3,"dd",7),m._UZ(4,"field-container",8),m.qZA(),m.BQk()),2&e){const e=t.$implicit;m.xp6(2),m.Q6J("fieldname",e.field)("fieldconfig",e.fieldconfig),m.xp6(2),m.Q6J("field",e.field)("fieldconfig",e.fieldconfig)("fielddisplayclass","slds-truncate")}}let _a=(()=>{var e;class ObjectModelPopoverRelatedItem{constructor(e,t,s,n){(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"model",void 0),(0,i.Z)(this,"view",void 0),(0,i.Z)(this,"module",""),(0,i.Z)(this,"item",{}),(0,i.Z)(this,"fields",[]),this.language=e,this.metadata=t,this.model=s,this.view=n,this.view.displayLabels=!1}ngOnInit(){this.model.module=this.module,this.model.id=this.item.id,this.model.setData(this.item)}goDetail(){this.model.goDetail()}}return e=ObjectModelPopoverRelatedItem,(0,i.Z)(ObjectModelPopoverRelatedItem,"ɵfac",(function(t){return new(t||e)(m.Y36(g.d),m.Y36(v.Pu),m.Y36(p.o),m.Y36(Fe.e))})),(0,i.Z)(ObjectModelPopoverRelatedItem,"ɵcmp",m.Xpm({type:e,selectors:[["object-model-popover-related-item"]],inputs:{module:"module",item:"item",fields:"fields"},features:[m._Bn([p.o,Fe.e])],decls:6,vars:3,consts:[[1,"slds-m-top_x-small"],[1,"slds-truncate",3,"title"],["href","javascript:void(0);",3,"click"],[1,"slds-list_horizontal","slds-wrap","slds-text-body_small"],[4,"ngFor","ngForOf"],[1,"slds-item_label","slds-text-color_weak","slds-truncate"],[3,"fieldname","fieldconfig"],["title","$500,000",1,"slds-item_detail","slds-text-color_weak","slds-truncate"],[3,"field","fieldconfig","fielddisplayclass"]],template:function(e,t){1&e&&(m.TgZ(0,"dd",0)(1,"p",1)(2,"a",2),m.NdJ("click",(function(){return t.goDetail()})),m._uU(3),m.qZA()(),m.TgZ(4,"dl",3),m.YNc(5,Za,5,5,"ng-container",4),m.qZA()()),2&e&&(m.xp6(1),m.Q6J("title",t.model.displayname),m.xp6(2),m.Oqu(t.model.displayname),m.xp6(2),m.Q6J("ngForOf",t.fields))},dependencies:[n.sg,Ci.q,qe.j],encapsulation:2})),ObjectModelPopoverRelatedItem})();function ya(e,t){if(1&e&&(m.ynx(0),m._uU(1),m.BQk()),2&e){const e=m.oxw(2);m.xp6(1),m.hij(" (",e.relatedmodels.count,")")}}function xa(e,t){1&e&&(m.TgZ(0,"div",13),m._UZ(1,"system-spinner",14),m.qZA())}function wa(e,t){if(1&e&&m._UZ(0,"object-model-popover-related-item",15),2&e){const e=t.$implicit,s=m.oxw(2);m.Q6J("module",s.relatedmodels.relatedModule)("item",e)("fields",s.listfields)}}function Ta(e,t){if(1&e){const e=m.EpF();m.TgZ(0,"dd",16)(1,"a",17),m.NdJ("click",(function(){m.CHM(e);const t=m.oxw(2);return m.KtG(t.showAll())})),m._UZ(2,"system-label",18),m.qZA()()}}function Ca(e,t){if(1&e&&(m.TgZ(0,"dl",1)(1,"dt",2)(2,"div",3)(3,"div",4),m._UZ(4,"system-icon",5),m.qZA(),m.TgZ(5,"div",6)(6,"p",7),m._UZ(7,"system-label",8),m.YNc(8,ya,2,1,"ng-container",9),m.qZA()()()(),m.YNc(9,xa,2,0,"div",10),m.YNc(10,wa,1,3,"object-model-popover-related-item",11),m.YNc(11,Ta,3,0,"dd",12),m.qZA()),2&e){const e=m.oxw();m.xp6(4),m.Q6J("module",e.relatedmodels.relatedModule),m.xp6(3),m.Q6J("label",e.panelTitle),m.xp6(1),m.Q6J("ngIf",!e.relatedmodels.isloading),m.xp6(1),m.Q6J("ngIf",e.relatedmodels.isloading),m.xp6(1),m.Q6J("ngForOf",e.relatedmodels.items),m.xp6(1),m.Q6J("ngIf",e.canViewAll)}}let Aa=(()=>{var e;class ObjectModelPopoverRelated extends bo{constructor(e,t,s,n,o,l){super(e,t,s,n,o),(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"relatedmodels",void 0),(0,i.Z)(this,"model",void 0),(0,i.Z)(this,"cdref",void 0),(0,i.Z)(this,"router",void 0),this.language=e,this.metadata=t,this.relatedmodels=s,this.model=n,this.cdref=o,this.router=l}get canViewAll(){return this.relatedmodels.count>0&&this.relatedmodels.count>this.relatedmodels.loaditems}showAll(){this.router.navigate(["/module/"+this.model.module+"/"+this.model.id+"/"+this.relatedmodels.relatedModule+"/"+this.relatedmodels._linkName])}}return e=ObjectModelPopoverRelated,(0,i.Z)(ObjectModelPopoverRelated,"ɵfac",(function(t){return new(t||e)(m.Y36(g.d),m.Y36(v.Pu),m.Y36(kt.j),m.Y36(p.o),m.Y36(m.sBO),m.Y36(a.F0))})),(0,i.Z)(ObjectModelPopoverRelated,"ɵcmp",m.Xpm({type:e,selectors:[["object-model-popover-related"]],features:[m._Bn([kt.j]),m.qOj],decls:1,vars:1,consts:[["class","slds-popover__body-list",4,"ngIf"],[1,"slds-popover__body-list"],[1,"slds-m-bottom_small"],[1,"slds-media","slds-media_center"],[1,"slds-media__figure"],["size","small",3,"module"],[1,"slds-media__body"],[1,"slds-text-heading_small","slds-hyphenate"],[3,"label"],[4,"ngIf"],["class","slds-align_absolute-center",4,"ngIf"],[3,"module","item","fields",4,"ngFor","ngForOf"],["class","slds-m-top_x-small slds-text-align_right",4,"ngIf"],[1,"slds-align_absolute-center"],["size","12"],[3,"module","item","fields"],[1,"slds-m-top_x-small","slds-text-align_right"],["href","javascript:void(0);",3,"click"],["label","LBL_VIEWALL"]],template:function(e,t){1&e&&m.YNc(0,Ca,12,6,"dl",0),2&e&&m.Q6J("ngIf",t.aclAccess)},dependencies:[n.sg,n.O5,T.f,S._,Jt.W,_a],encapsulation:2})),ObjectModelPopoverRelated})(),ka=(()=>{var e;class ObjectActionDeactivateBeansButton{constructor(e,t,s,n,o,l){(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"modal",void 0),(0,i.Z)(this,"injector",void 0),(0,i.Z)(this,"modellist",void 0),(0,i.Z)(this,"modalwindow",void 0),(0,i.Z)(this,"actionconfig",void 0),(0,i.Z)(this,"saving",!1),(0,i.Z)(this,"selectedItems",[]),this.language=e,this.metadata=t,this.modal=s,this.injector=n,this.modellist=o,this.modalwindow=l}get disabled(){return!1}get hasSelection(){return this.modellist.getSelectedCount()>1}get hidden(){return!this.hasSelection}execute(){this.saving||(this.selectedItems=this.modellist.getSelectedItems(),this.modal.openModal("ObjectActionDeactivateBeansModal",!0,this.injector).subscribe((e=>{e&&(e.instance.selectedItems=this.selectedItems,e.instance.module=this.modellist.module)})))}}return e=ObjectActionDeactivateBeansButton,(0,i.Z)(ObjectActionDeactivateBeansButton,"ɵfac",(function(t){return new(t||e)(m.Y36(g.d),m.Y36(v.Pu),m.Y36(K.o),m.Y36(m.zs3),m.Y36(y.t),m.Y36(xt.S,8))})),(0,i.Z)(ObjectActionDeactivateBeansButton,"ɵcmp",m.Xpm({type:e,selectors:[["object-action-deactivate-beans-button"]],decls:2,vars:0,consts:[["label","LBL_DEACTIVATE_BEANS"]],template:function(e,t){1&e&&(m.TgZ(0,"span"),m._UZ(1,"system-label",0),m.qZA())},dependencies:[S._],encapsulation:2})),ObjectActionDeactivateBeansButton})();function La(e,t){1&e&&(m.TgZ(0,"div",12),m._UZ(1,"system-label",13)(2,"system-button-icon",14),m.qZA()),2&e&&(m.xp6(2),m.Q6J("icon","check"))}function Ia(e,t){1&e&&(m.TgZ(0,"div",12),m._UZ(1,"system-label",15)(2,"system-button-icon",14),m.qZA()),2&e&&(m.xp6(2),m.Q6J("icon","close"))}function Ma(e,t){if(1&e){const e=m.EpF();m.TgZ(0,"system-input-radio",10),m.NdJ("ngModelChange",(function(t){m.CHM(e);const s=m.oxw();return m.KtG(s.value=t)})),m._uU(1),m.YNc(2,La,3,1,"div",11),m.YNc(3,Ia,3,1,"div",11),m.qZA()}if(2&e){const e=t.$implicit,s=m.oxw();m.Q6J("value",e.id)("ngModel",s.value),m.xp6(1),m.hij("",s.fieldname(e)," "),m.xp6(1),m.Q6J("ngIf","deactivated"==e.itemsaved),m.xp6(1),m.Q6J("ngIf","error"==e.itemsaved)}}function Sa(e,t){if(1&e){const e=m.EpF();m.TgZ(0,"button",16),m.NdJ("click",(function(){m.CHM(e);const t=m.oxw();return m.KtG(t.closeModal())})),m._UZ(1,"system-label",17),m.qZA()}}function Ja(e,t){if(1&e){const e=m.EpF();m.TgZ(0,"button",18),m.NdJ("click",(function(){m.CHM(e);const t=m.oxw();return m.KtG(t.select())})),m._UZ(1,"system-label",19),m.qZA()}}function Oa(e,t){if(1&e){const e=m.EpF();m.TgZ(0,"button",18),m.NdJ("click",(function(){m.CHM(e);const t=m.oxw();return m.KtG(t.closeModal())})),m._UZ(1,"system-label",20),m.qZA()}}let Na=(()=>{var e;class ObjectActionDeactivateBeansModal{constructor(e,t,s){(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"model",void 0),(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"componentconfig",{}),(0,i.Z)(this,"selectedItems",[]),(0,i.Z)(this,"module",[]),(0,i.Z)(this,"showfinish",!1),(0,i.Z)(this,"self",{}),(0,i.Z)(this,"value",""),this.language=e,this.model=t,this.metadata=s}ngOnInit(){this.componentconfig=this.metadata.getComponentConfig("ObjectActionDeactivateBeansModal",this.model.module),this.value=this.selectedItems[0].id}fieldname(e){return e[this.componentconfig.fieldname]}closeModal(){this.self.destroy()}select(){let e=0;for(let t of this.selectedItems)t.id!=this.value?(t.successor_id=this.value,t.is_inactive=1,this.model.reset(),this.model.id=t.id,this.model.initialize(),this.model.module=this.module,this.model.setData(t),this.model.validate()?this.model.save().subscribe((s=>{e++,t.itemsaved="deactivated",e==this.selectedItems.length-1&&(this.showfinish=!0)}),(s=>{e++,t.itemsaved="error",e==this.selectedItems.length-1&&(this.showfinish=!0)})):e++):e++}}return e=ObjectActionDeactivateBeansModal,(0,i.Z)(ObjectActionDeactivateBeansModal,"ɵfac",(function(t){return new(t||e)(m.Y36(g.d),m.Y36(p.o),m.Y36(v.Pu))})),(0,i.Z)(ObjectActionDeactivateBeansModal,"ɵcmp",m.Xpm({type:e,selectors:[["ng-component"]],inputs:{selectedItems:"selectedItems",module:"module"},features:[m._Bn([p.o])],decls:12,vars:4,consts:[["size","x-small"],[3,"close"],["label","LBL_SELECT_ACTIVE"],["margin","none"],[1,"slds-m-left_x-small","slds-m-vertical_large"],[1,"slds-form-element"],[1,"slds-form-element__control"],["name","module",3,"value","ngModel","ngModelChange",4,"ngFor","ngForOf"],["class","slds-button slds-button--neutral",3,"click",4,"ngIf"],["class","slds-button slds-button--brand",3,"click",4,"ngIf"],["name","module",3,"value","ngModel","ngModelChange"],["class","slds-float--right slds-m-right_small",4,"ngIf"],[1,"slds-float--right","slds-m-right_small"],["label","LBL_DEACTIVATED"],[1,"slds-m-left_small",3,"icon"],["label","LBL_ERROR"],[1,"slds-button","slds-button--neutral",3,"click"],["label","LBL_CANCEL"],[1,"slds-button","slds-button--brand",3,"click"],["label","LBL_EXECUTE"],["label","LBL_FINISH"]],template:function(e,t){1&e&&(m.TgZ(0,"system-modal",0)(1,"system-modal-header",1),m.NdJ("close",(function(){return t.closeModal()})),m._UZ(2,"system-label",2),m.qZA(),m.TgZ(3,"system-modal-content",3)(4,"div",4)(5,"div",5)(6,"div",6),m.YNc(7,Ma,4,5,"system-input-radio",7),m.qZA()()()(),m.TgZ(8,"system-modal-footer"),m.YNc(9,Sa,2,0,"button",8),m.YNc(10,Ja,2,0,"button",9),m.YNc(11,Oa,2,0,"button",9),m.qZA()()),2&e&&(m.xp6(7),m.Q6J("ngForOf",t.selectedItems),m.xp6(2),m.Q6J("ngIf",!t.showfinish),m.xp6(1),m.Q6J("ngIf",!t.showfinish),m.xp6(1),m.Q6J("ngIf",t.showfinish))},dependencies:[n.sg,n.O5,l.JJ,l.On,w.J,P.A,S._,Ee.j,Ye.x,De.p,Qe.y],encapsulation:2})),ObjectActionDeactivateBeansModal})();function Fa(e,t){if(1&e){const e=m.EpF();m.TgZ(0,"div",13)(1,"input",14,15),m.NdJ("keyup.enter",(function(){m.CHM(e);const t=m.MAs(2),s=m.oxw();return m.KtG(s.addChecklist(t.value))})),m.qZA(),m.TgZ(3,"button",16),m.NdJ("click",(function(){m.CHM(e);const t=m.MAs(2),s=m.oxw();return m.KtG(s.addChecklist(t.value))})),m._UZ(4,"system-button-icon",17),m.qZA(),m.TgZ(5,"button",18),m.NdJ("click",(function(){m.CHM(e);const t=m.oxw();return m.KtG(t.setShowAddChecklist(!1))})),m._UZ(6,"system-button-icon",19),m.qZA()()}if(2&e){const e=m.MAs(2);m.xp6(3),m.Q6J("disabled",!e.value)}}function qa(e,t){if(1&e){const e=m.EpF();m.TgZ(0,"div",38)(1,"span",39),m.NdJ("click",(function(t){m.CHM(e);const s=m.oxw().$implicit;return m.oxw(2).setCurrentEditingChecklist(s),m.KtG(t.stopPropagation())})),m._uU(2),m.qZA()()}if(2&e){const e=m.oxw().$implicit;m.xp6(1),m.Q6J("system-title",e.name),m.xp6(1),m.Oqu(e.name)}}function Ea(e,t){if(1&e){const e=m.EpF();m.TgZ(0,"input",40),m.NdJ("click",(function(e){return e.stopPropagation()}))("ngModelChange",(function(t){m.CHM(e);const s=m.oxw().$implicit,i=m.oxw(2);return m.KtG(i.setChecklistName(t,s))}))("keyup.enter",(function(){m.CHM(e);const t=m.oxw().$implicit,s=m.oxw(2);return m.KtG(s.save(t))}))("blur",(function(){m.CHM(e);const t=m.oxw().$implicit,s=m.oxw(2);return m.KtG(s.save(t))})),m.qZA()}if(2&e){const e=m.oxw().$implicit;m.Q6J("ngModel",e.name)}}function Ya(e,t){if(1&e){const e=m.EpF();m.TgZ(0,"button",41),m.NdJ("click",(function(){m.CHM(e);const t=m.oxw().$implicit,s=m.oxw(2);return m.KtG(s.setShowAddButton(t,!1))})),m._UZ(1,"system-button-icon",9),m.qZA()}if(2&e){const e=m.oxw().$implicit,t=m.oxw(2);m.ekj("spice-hover-child",e!=t.activeChecklist)}}function Da(e,t){if(1&e){const e=m.EpF();m.TgZ(0,"div",51)(1,"input",52),m.NdJ("ngModelChange",(function(t){m.CHM(e);const s=m.oxw().$implicit,i=m.oxw(3);return m.KtG(i.setItemTextValue(t,s))}))("keyup.enter",(function(){m.CHM(e);const t=m.oxw().$implicit,s=m.oxw(3);return m.KtG(s.save(t))}))("blur",(function(t){m.CHM(e),m.oxw();const s=m.MAs(1),i=m.oxw(3);return m.KtG(i.onItemBlur(t,s))})),m.qZA(),m.TgZ(2,"button",53),m.NdJ("click",(function(t){m.CHM(e);const s=m.oxw().$implicit;return m.oxw(3).save(s),m.KtG(t.stopPropagation())})),m._UZ(3,"system-button-icon",17),m.qZA(),m.TgZ(4,"button",54),m.NdJ("click",(function(t){m.CHM(e);const s=m.oxw().$implicit,i=m.oxw(3);return m.KtG(i.cancelItemChanges(s,t))})),m._UZ(5,"system-button-icon",19),m.qZA()()}if(2&e){const e=m.oxw().$implicit;m.xp6(1),m.Q6J("ngModel",e.text),m.xp6(1),m.Q6J("disabled",!e.isChanged)}}function Qa(e,t){if(1&e&&(m.TgZ(0,"div",55),m._uU(1),m.qZA()),2&e){const e=m.oxw().$implicit;m.Udp("text-decoration",e.isCompleted?"line-through":"initial"),m.Q6J("system-title",e.text),m.xp6(1),m.hij(" ",e.text," ")}}function Ua(e,t){if(1&e){const e=m.EpF();m.TgZ(0,"div",56),m.NdJ("click",(function(){m.CHM(e);const t=m.oxw().$implicit,s=m.oxw(3);return m.KtG(s.setCurrentEditingItem(t))})),m._UZ(1,"system-label",57),m.qZA()}}function Ra(e,t){if(1&e){const e=m.EpF();m.TgZ(0,"div",42,43)(2,"div",44),m.NdJ("click",(function(t){const s=m.CHM(e).$implicit;return m.oxw(3).setCurrentEditingItem(s),m.KtG(t.stopPropagation())})),m.TgZ(3,"div",25),m._UZ(4,"system-utility-icon",26),m.qZA(),m.TgZ(5,"system-checkbox",45),m.NdJ("ngModelChange",(function(t){const s=m.CHM(e).$implicit;return m.KtG(s.isCompleted=t)}))("ngModelChange",(function(){const t=m.CHM(e).$implicit,s=m.oxw(3);return m.KtG(s.save(t))})),m.qZA(),m.YNc(6,Da,6,2,"div",46),m.YNc(7,Qa,2,4,"ng-template",null,47,m.W1O),m.TgZ(9,"div",48)(10,"button",49),m.NdJ("click",(function(){const t=m.CHM(e).$implicit,s=m.oxw().$implicit,i=m.oxw(2);return m.KtG(i.deleteChecklistItem(t,s))})),m._UZ(11,"system-button-icon",31),m.qZA()()(),m.YNc(12,Ua,2,0,"div",50),m.qZA()}if(2&e){const e=t.$implicit,s=m.MAs(8),i=m.oxw().$implicit,n=m.oxw(2);m.ekj("slds-hide",!i.showCompleted&&e.isCompleted)("slds-theme--warning",n.currentEditingItem!=e&&e.isChanged),m.xp6(2),m.Q6J("cdkDragData",e),m.xp6(2),m.ekj("spice-hover-child",e!=n.currentEditingItem),m.xp6(1),m.Q6J("ngModel",e.isCompleted),m.xp6(1),m.Q6J("ngIf",e==n.currentEditingItem)("ngIfElse",s),m.xp6(4),m.ekj("spice-hover-child",e!=n.currentEditingItem),m.xp6(2),m.Q6J("ngIf",n.currentEditingItem!=e&&e.isChanged)}}function ja(e,t){if(1&e){const e=m.EpF();m.TgZ(0,"div",58)(1,"div",59,60)(3,"input",61,62),m.NdJ("keyup.enter",(function(){m.CHM(e);const t=m.MAs(4),s=m.oxw().$implicit,i=m.oxw(2);return m.KtG(i.addChecklistItem(s,t))}))("blur",(function(t){m.CHM(e);const s=m.MAs(2),i=m.MAs(4),n=m.oxw().$implicit,o=m.oxw(2);return m.KtG(o.onChecklistBlur(n,t,s,i))})),m.qZA(),m.TgZ(5,"button",63),m.NdJ("click",(function(){m.CHM(e);const t=m.MAs(4),s=m.oxw().$implicit,i=m.oxw(2);return m.KtG(i.addChecklistItem(s,t))})),m._UZ(6,"system-button-icon",64),m.qZA(),m.TgZ(7,"button",65),m.NdJ("click",(function(){m.CHM(e);const t=m.oxw().$implicit,s=m.oxw(2);return m.KtG(s.setShowAddButton(t,!0))})),m._UZ(8,"system-button-icon",66),m.qZA()()()}if(2&e){const e=m.MAs(4);m.xp6(5),m.Q6J("disabled",!e.value)}}function Ba(e,t){if(1&e){const e=m.EpF();m.TgZ(0,"div",23),m.NdJ("click",(function(){const t=m.CHM(e).$implicit,s=m.oxw(2);return m.KtG(s.setActiveChecklist(t))})),m.TgZ(1,"div",24)(2,"div",25),m._UZ(3,"system-utility-icon",26),m.qZA(),m.YNc(4,qa,3,2,"div",27),m.YNc(5,Ea,1,1,"input",28),m.YNc(6,Ya,2,2,"button",29),m.TgZ(7,"button",30),m.NdJ("click",(function(){const t=m.CHM(e).$implicit,s=m.oxw(2);return m.KtG(s.deleteChecklist(t))})),m._UZ(8,"system-button-icon",31),m.qZA(),m.TgZ(9,"button",32),m.NdJ("click",(function(){const t=m.CHM(e).$implicit,s=m.oxw(2);return m.KtG(s.toggleShowCompleted(t))})),m._UZ(10,"system-button-icon",33)(11,"system-label",34),m.qZA()(),m.TgZ(12,"div",35),m.NdJ("cdkDropListDropped",(function(t){m.CHM(e);const s=m.oxw(2);return m.KtG(s.onDrop(t))})),m.YNc(13,Ra,13,13,"div",36),m.qZA(),m.YNc(14,ja,9,1,"div",37),m.qZA()}if(2&e){const e=t.$implicit,s=m.oxw(2);m.Q6J("cdkDragData",e),m.xp6(3),m.ekj("spice-hover-child",e!=s.activeChecklist),m.xp6(1),m.Q6J("ngIf",s.currentEditingChecklist!=e),m.xp6(1),m.Q6J("ngIf",s.currentEditingChecklist==e),m.xp6(1),m.Q6J("ngIf",e.showAddButton),m.xp6(1),m.ekj("spice-hover-child",e!=s.activeChecklist),m.xp6(2),m.ekj("spice-hover-child",e!=s.activeChecklist),m.Q6J("system-title",e.showCompleted?"LBL_HIDE_COMPLETED":"LBL_SHOW_COMPLETED"),m.xp6(2),m.Q6J("label",e.showCompleted?"LBL_HIDE_COMPLETED":"LBL_SHOW_COMPLETED"),m.xp6(1),m.Q6J("cdkDropListData",e.items),m.xp6(1),m.Q6J("ngForOf",e.items),m.xp6(1),m.Q6J("ngIf",!e.showAddButton)}}function Ga(e,t){if(1&e){const e=m.EpF();m.TgZ(0,"div",20)(1,"div",21),m.NdJ("cdkDropListDropped",(function(t){m.CHM(e);const s=m.oxw();return m.KtG(s.onDrop(t))})),m.YNc(2,Ba,15,15,"div",22),m.qZA()()}if(2&e){const e=m.oxw();m.Q6J("system-overlay-loading-spinner",e.model.isLoading||e.isSaving),m.xp6(1),m.Q6J("cdkDropListData",e.checklists),m.xp6(1),m.Q6J("ngForOf",e.checklists)}}function Pa(e,t){if(1&e&&(m.TgZ(0,"div",67)(1,"system-illustration-no-data"),m._UZ(2,"system-label",68),m.qZA()()),2&e){const e=m.oxw();m.Q6J("system-overlay-loading-spinner",e.model.isLoading)}}let Ha=(()=>{var e;class ObjectChecklists{constructor(e,t,s){(0,i.Z)(this,"model",void 0),(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"currentEditingChecklist",void 0),(0,i.Z)(this,"isAddingChecklist",!1),(0,i.Z)(this,"isSaving",!1),(0,i.Z)(this,"checklists",[]),(0,i.Z)(this,"currentEditingItem",void 0),(0,i.Z)(this,"activeChecklist",void 0),(0,i.Z)(this,"subscriptions",new G.w0),(0,i.Z)(this,"fieldName","checklists"),(0,i.Z)(this,"panelExpanded",!0),this.model=e,this.language=t,this.metadata=s}ngOnInit(){this.setFieldName(),this.loadData()}ngOnDestroy(){this.subscriptions.unsubscribe()}addChecklist(e){if(this.checklists||(this.checklists=[]),!e)return;const t={id:this.model.generateGuid(),name:e,showCompleted:!0,items:[]};this.checklists=[t,...this.checklists],this.isAddingChecklist=!1,this.setActiveChecklist(t),this.save(t)}addChecklistItem(e,t){if(!t.value)return;const s={id:this.model.generateGuid(),isCompleted:!1,text:t.value,isChanged:!0};e.items.push(s),t.value="",this.save(s)}deleteChecklist(e){this.checklists=this.checklists.filter((t=>t!=e)),this.save(e)}deleteChecklistItem(e,t){t.items=t.items.filter((t=>t!=e)),e.isChanged=!0,this.save(e)}setCurrentEditingItem(e){e.isChanged||(e.textBackup=e.text),this.currentEditingItem=e}onItemBlur(e,t){t.contains(e.relatedTarget)||(this.currentEditingItem=void 0)}onChecklistBlur(e,t,s,i){s.contains(t.relatedTarget)||!s.contains(t.relatedTarget)&&i.value||(e.showAddButton=!0)}setShowAddChecklist(e){this.isAddingChecklist=e}setCurrentEditingChecklist(e){this.currentEditingChecklist=e}save(e){if("isChanged"in e&&!1===e?.isChanged||"items"in e&&!e.name)return;this.isSaving=!0,"items"in e&&this.setCurrentEditingChecklist(void 0);const t=this.checklists.map((t=>{const s={...t};return s.items=s.items.map((t=>{const s={...t};return e!=t&&s.isChanged&&(s.text=t.textBackup),delete s.isChanged,delete s.textBackup,s})),s}));"isChanged"in e&&delete e.isChanged,"textBackup"in e&&delete e.textBackup,this.model.backend.save(this.model.module,this.model.id,{[this.fieldName]:t}).subscribe((()=>this.isSaving=!1)),this.currentEditingItem=void 0}cancelItemChanges(e,t){t.stopPropagation(),e.text=e.textBackup,e.isChanged=!1,this.currentEditingItem=void 0}setActiveChecklist(e){e!=this.activeChecklist&&(this.activeChecklist&&(this.activeChecklist.showAddButton=!0),e&&this.setShowAddButton(e,!1),this.activeChecklist=e)}setShowAddButton(e,t){e.showAddButton=t}setItemTextValue(e,t){t.isChanged=e!=t.text,t.text=e}setChecklistName(e,t){t.name=e}toggleShowCompleted(e){e.showCompleted=!e.showCompleted,this.currentEditingItem=void 0,this.save(e)}setFieldName(){let e=this.metadata.getComponentConfig("ObjectChecklists",this.model.module)?.fieldName;e&&(this.fieldName=e)}loadData(){this.model.backend.get(this.model.module,this.model.id).subscribe((e=>{Array.isArray(e?.[this.fieldName])&&(this.checklists=e[this.fieldName])}))}onDrop(e){e.previousContainer===e.container?(0,o.bA)(e.container.data,e.container.data.indexOf(e.item.data),e.currentIndex):(0,o.EA)(e.previousContainer.data,e.container.data,e.previousContainer.data.indexOf(e.item.data),e.currentIndex),e.item.data.isChanged=!0,this.save(e.item.data)}toggleExpansion(){this.panelExpanded=!this.panelExpanded}}return e=ObjectChecklists,(0,i.Z)(ObjectChecklists,"ɵfac",(function(t){return new(t||e)(m.Y36(p.o),m.Y36(g.d),m.Y36(v.Pu))})),(0,i.Z)(ObjectChecklists,"ɵcmp",m.Xpm({type:e,selectors:[["object-checklists"]],decls:14,vars:10,consts:[[1,"slds-section"],[1,"slds-section__title","slds-m-bottom--small"],["aria-expanded","true",1,"slds-section__title-action","slds-grid",3,"click"],["icon","switch","size","x-small","addclasses","slds-section__title-action-icon slds-button__icon slds-button__icon_left"],[1,"slds-grid","slds-grid--vertical-align-center","slds-grow"],[1,"slds-truncate"],["label","LBL_CHECKLISTS"],[1,"slds-grid","slds-grid--align-end",3,"click"],["system-title","LBL_ADD_CHECKLIST",1,"slds-button","slds-button--icon","slds-button--icon-border","slds-button","slds-align--absolute-center",2,"height","1.4rem","width","1.6rem",3,"click"],["icon","add","size","medium"],["class","slds-grid slds-grid--vertical-align-center",4,"ngIf"],["class","slds-form-element__control objectchecklistdragboundary",3,"system-overlay-loading-spinner",4,"ngIf"],["class","slds-box slds-align--absolute-center","style","min-height: 250px",3,"system-overlay-loading-spinner",4,"ngIf"],[1,"slds-grid","slds-grid--vertical-align-center"],["system-autofocus","","type","text",1,"slds-input","slds-grow","slds-truncate","slds-m-right--xx-small",2,"min-height","0","height","1.6rem",3,"keyup.enter"],["addChecklistInput",""],["system-title","LBL_CHECK",1,"slds-button","slds-button--icon","slds-button--icon-border-filled",2,"height","1.4rem","width","1.6rem",3,"disabled","click"],["icon","check"],["system-title","LBL_CANCEL",1,"slds-button","slds-button--icon","slds-button--icon-border-filled",2,"height","1.4rem","width","1.6rem",3,"click"],["icon","close","size","medium"],[1,"slds-form-element__control","objectchecklistdragboundary",3,"system-overlay-loading-spinner"],["cdkDropList","","cdkDropListLockAxis","y","cdkDropListGroup","",3,"cdkDropListData","cdkDropListDropped"],["cdkDrag","","cdkDragBoundary",".objectchecklistdragboundary","class","slds-box slds-p-around--none slds-m-bottom--small slds-drag--preview",3,"cdkDragData","click",4,"ngFor","ngForOf"],["cdkDrag","","cdkDragBoundary",".objectchecklistdragboundary",1,"slds-box","slds-p-around--none","slds-m-bottom--small","slds-drag--preview",3,"cdkDragData","click"],[1,"slds-grid","slds-grid--vertical-align-center","slds-m-bottom--large","slds-border--bottom","slds-p-around--small","slds-theme--shade","spice-hover-display-children",2,"min-height","58px"],[2,"min-width","32px"],["cdkDragHandle","","icon","drag_and_drop","size","x-small",1,"slds-p-horizontal--x-small",2,"cursor","move"],["class","slds-grow slds-truncate",4,"ngIf"],["system-autofocus","","type","text","class","slds-input slds-m-right--xx-small",3,"ngModel","click","ngModelChange","keyup.enter","blur",4,"ngIf"],["system-title","LBL_ADD_ITEM","class","slds-button slds-button--icon slds-button--icon-border-filled slds-button slds-align--absolute-center",3,"spice-hover-child","click",4,"ngIf"],["system-title","LBL_DELETE",1,"slds-button","slds-button--icon","slds-button--icon-border-filled",3,"click"],["icon","delete","size","medium"],[1,"slds-button","slds-button--neutral",3,"system-title","click"],["icon","toggle","size","medium","addclasses","slds-button__icon_left"],[1,"slds-truncate",3,"label"],["cdkDropList","","cdkDropListLockAxis","y",2,"min-height","20px",3,"cdkDropListData","cdkDropListDropped"],["class","slds-p-vertical--xx-small spice-hover-display-children",3,"slds-hide","slds-theme--warning",4,"ngFor","ngForOf"],["class","slds-box slds-m-top--large slds-m-around--small",4,"ngIf"],[1,"slds-grow","slds-truncate"],[2,"min-width","20px",3,"system-title","click"],["system-autofocus","","type","text",1,"slds-input","slds-m-right--xx-small",3,"ngModel","click","ngModelChange","keyup.enter","blur"],["system-title","LBL_ADD_ITEM",1,"slds-button","slds-button--icon","slds-button--icon-border-filled","slds-button","slds-align--absolute-center",3,"click"],[1,"slds-p-vertical--xx-small","spice-hover-display-children"],["itemContainer",""],["cdkDrag","","cdkDragBoundary",".objectchecklistdragboundary",1,"slds-grid","slds-grid--vertical-align-center","slds-drag--preview","slds-p-right--x-small",3,"cdkDragData","click"],[3,"ngModel","ngModelChange"],["class","slds-grid slds-grow slds-p-right--xx-small",4,"ngIf","ngIfElse"],["itemTextContainer",""],[2,"width","32px","height","32px"],[1,"slds-button","slds-button--icon","slds-button--icon-border-filled",3,"click"],["class","slds-p-horizontal--small slds-p-bottom--xx-small",3,"click",4,"ngIf"],[1,"slds-grid","slds-grow","slds-p-right--xx-small"],["type","text","system-autofocus","",1,"slds-input","slds-m-right--xx-small",3,"ngModel","ngModelChange","keyup.enter","blur"],["system-title","LBL_CHECK",1,"slds-button","slds-button--icon","slds-button--icon-border-filled",3,"disabled","click"],["system-title","LBL_CANCEL",1,"slds-button","slds-button--icon","slds-button--icon-border-filled",3,"click"],[1,"slds-grow","slds-p-right--xx-small","slds-truncate",3,"system-title"],[1,"slds-p-horizontal--small","slds-p-bottom--xx-small",3,"click"],["label","MSG_HAS_UNSAVED"],[1,"slds-box","slds-m-top--large","slds-m-around--small"],[1,"slds-grid"],["addItemContainer",""],["system-autofocus","","type","text",1,"slds-input","slds-m-right--x-small",3,"keyup.enter","blur"],["addItemInput",""],["system-title","LBL_SAVE",1,"slds-button","slds-button--icon","slds-button--icon-border-filled","slds-button","slds-align--absolute-center",3,"disabled","click"],["icon","check","size","medium"],["system-title","LBL_CANCEL",1,"slds-button","slds-button--icon","slds-button--icon-border-filled","slds-button","slds-align--absolute-center",3,"click"],["icon","clear","size","medium"],[1,"slds-box","slds-align--absolute-center",2,"min-height","250px",3,"system-overlay-loading-spinner"],["label","LBL_NO_CHECKLISTS"]],template:function(e,t){1&e&&(m.TgZ(0,"div",0)(1,"div",1)(2,"div",2),m.NdJ("click",(function(){return t.toggleExpansion()})),m._UZ(3,"system-utility-icon",3),m.TgZ(4,"div",4)(5,"span",5),m._UZ(6,"system-label",6),m.qZA()(),m.TgZ(7,"div",7),m.NdJ("click",(function(e){return e.stopPropagation()})),m.TgZ(8,"button",8),m.NdJ("click",(function(){return t.setShowAddChecklist(!0)})),m._UZ(9,"system-button-icon",9),m.qZA(),m.YNc(10,Fa,7,1,"div",10),m.qZA()()(),m.TgZ(11,"div"),m.YNc(12,Ga,3,3,"div",11),m.YNc(13,Pa,3,1,"div",12),m.qZA()()),2&e&&(m.ekj("slds-is-open",t.panelExpanded),m.xp6(8),m.ekj("slds-hide",t.isAddingChecklist),m.xp6(2),m.Q6J("ngIf",t.isAddingChecklist),m.xp6(1),m.Udp("display",t.panelExpanded?"block":"none"),m.Q6J("@tabAnimation",t.panelExpanded),m.xp6(1),m.Q6J("ngIf",t.checklists.length>0),m.xp6(1),m.Q6J("ngIf",0==t.checklists.length))},dependencies:[n.sg,n.O5,o.Wj,o.Fd,o.Zt,o.Bh,l.Fj,l.JJ,l.On,w.J,ci.U,eo.t,S._,C.r,A.m,Wi._,k.S],encapsulation:2,data:{animation:[(0,b.X$)("tabAnimation",[(0,b.SB)("true",(0,b.oB)({height:"*",opacity:1})),(0,b.SB)("false",(0,b.oB)({height:"0px",opacity:0})),(0,b.eR)("true => false",[(0,b.oB)({overflow:"hidden"}),(0,b.jt)(".5s")]),(0,b.eR)("false => true",[(0,b.jt)(".5s"),(0,b.oB)({overflow:"inherit"})])])]}})),ObjectChecklists})(),za=(()=>{var e;class timeline{constructor(e,t,s,n,o){(0,i.Z)(this,"modelutilities",void 0),(0,i.Z)(this,"backend",void 0),(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"broadcast",void 0),(0,i.Z)(this,"model",void 0),(0,i.Z)(this,"parent",void 0),(0,i.Z)(this,"smartView",!1),(0,i.Z)(this,"smartFontSize",!1),(0,i.Z)(this,"records",[]),(0,i.Z)(this,"checking",!1),(0,i.Z)(this,"newRecords",void 0),(0,i.Z)(this,"loading",!1),(0,i.Z)(this,"loadingMore",!1),(0,i.Z)(this,"startDate",null),(0,i.Z)(this,"timeRangeStart",new moment),(0,i.Z)(this,"record",void 0),(0,i.Z)(this,"timelineModules",[]),(0,i.Z)(this,"onlyAudits",!1),(0,i.Z)(this,"filters",{searchterm:"",objectfilters:["auditLog","Modules"],own:""}),(0,i.Z)(this,"searchTerm",""),(0,i.Z)(this,"auditLogEnabled",!1),(0,i.Z)(this,"recordModule",void 0),(0,i.Z)(this,"recordId",void 0),(0,i.Z)(this,"recordData",void 0),(0,i.Z)(this,"initial",!0),(0,i.Z)(this,"totalModuleRecords",0),(0,i.Z)(this,"loadedAuditRecords",0),(0,i.Z)(this,"totalAuditRecords",0),(0,i.Z)(this,"loadedModuleRecords",0),(0,i.Z)(this,"moduleSearch",!0),(0,i.Z)(this,"auditSearch",!0),this.modelutilities=e,this.backend=t,this.metadata=s,this.broadcast=n,this.model=o,this.broadcast.message$.subscribe((e=>this.handleMessage(e)))}get rangeStart(){return console.log(this.timeRangeStart.format()),this.timeRangeStart.format()}get getModuleSearch(){return this.totalModuleRecords!==this.loadedModuleRecords}get getAuditSearch(){return this.totalAuditRecords!==this.loadedAuditRecords}get totalRecords(){return this.totalAuditRecords+this.totalModuleRecords}reload(e=!1,t=""){this.initial=!0,this.startDate=this.rangeStart,this.loadedModuleRecords=0,this.loadedAuditRecords=0,this.totalAuditRecords=0,this.totalModuleRecords=0,this.moduleSearch=!0,this.auditSearch=!0,e||(this.records=[]),this.getTimelineData(e,t)}getTimelineData(e=!1,t=""){e||(this.loading=!0);let s={endDate:t,startDate:this.startDate,searchTerm:this.filters.searchterm,moduleSearch:this.moduleSearch,auditSearch:this.auditSearch,own:this.filters.own,objects:JSON.stringify(this.filters.objectfilters),timeRangeStart:this.rangeStart};console.log(s),this.backend.postRequest("module/Timeline/"+this.parent.module+"/"+this.parent.id,{},s).subscribe((t=>{console.log(t);for(let e of t.records)e.hasOwnProperty("module")&&(e.data=this.modelutilities.backendModel2spice(e.module,e.data));this.getBody(t,this.initial),this.addRecords(t.records,e),this.loading=!1}))}loadMore(){this.loadingMore=!0;let e={endDate:"",startDate:this.startDate,searchTerm:this.filters.searchterm,moduleSearch:this.getModuleSearch,auditSearch:this.getAuditSearch,own:this.filters.own,objects:JSON.stringify(this.filters.objectfilters),timeRangeStart:this.rangeStart};this.backend.postRequest("module/Timeline/"+this.parent.module+"/"+this.parent.id,{},e).subscribe((e=>{console.log(e);for(let t of e.records)t.data=this.modelutilities.backendModel2spice(t.module,t.data);this.getBody(e,this.initial),this.addRecords(e.records),this.loadingMore=!1}))}setRecord(e){if(!e.hasOwnProperty("data"))return this.recordModule=this.parent.module,this.recordId=this.parent.id,void(this.recordData=e);this.recordModule=e.hasOwnProperty("module")?e.module:"Audit",this.recordId=e.id,this.recordData=e.hasOwnProperty("module")?e.data:e}clearRecord(){this.recordModule="",this.recordId="",this.recordData=""}canLoadMore(){return!(this.loading||this.loadingMore||this.totalAuditRecords===this.loadedAuditRecords&&this.totalModuleRecords===this.loadedModuleRecords||!this.moduleSearch&&!this.auditSearch)}handleMessage(e){let t=e.messagetype.split(".");if("model"===t[0])switch(t[1]){case"merge":this.reload(!0,this.startDate),console.log(1);break;case"save":this.reload(!0,this.startDate),console.log(2);break;case"delete":console.log(3);let t=!1;this.timelineModules.indexOf(e.messagedata.module)>=0&&this.records.some(((s,i)=>{if(s.hasOwnProperty("date")&&(s.module,e.messagedata.module,s.id===e.messagedata.id))return this.records.splice(i,1),this.reload(!0,this.startDate),t=!0,!0}))}}addRecords(e,t=!1){if(this.totalAuditRecords===this.loadedAuditRecords&&this.totalModuleRecords===this.loadedModuleRecords&&""===this.searchTerm&&""===this.filters.own&&this.filters.objectfilters.indexOf("Modules")>=0&&this.timeRangeStart.isAfter(this.parent.getField("date_entered"))){let t=this.parent.data;0!==e.length&&t.date_entered.format("YYYY-MM")!==e.slice(-1)[0].date.substring(0,7)&&(t.divider=t.date_entered.format("YYYY-MM")),e.push(t)}this.records=t?e:this.records.concat(e)}getBody(e,t){t&&(this.totalModuleRecords=e.counts.totalModules,this.totalAuditRecords=e.counts.totalAudits,this.timelineModules=e.timelineModules,this.auditLogEnabled=!1,e.timelineModules.indexOf("auditLog")>=0&&(this.timelineModules.splice(e.timelineModules.indexOf("auditLog"),1),this.auditLogEnabled=!0),this.initial=!1),this.startDate=e.endDate,this.loadedModuleRecords+=e.counts.modulesTook,this.loadedAuditRecords+=e.counts.auditsTook,this.auditSearch=e.auditSearch,this.moduleSearch=e.moduleSearch}}return e=timeline,(0,i.Z)(timeline,"ɵfac",(function(t){return new(t||e)(m.LFG(Po.A),m.LFG(ee.y),m.LFG(v.Pu),m.LFG(xe.f),m.LFG(p.o))})),(0,i.Z)(timeline,"ɵprov",m.Yz7({token:e,factory:e.ɵfac})),timeline})();function Va(e,t){if(1&e&&(m.TgZ(0,"div",18)(1,"p"),m._uU(2),m.qZA()()),2&e){const e=m.oxw();m.xp6(2),m.Oqu(e.date)}}function Ka(e,t){1&e&&m._UZ(0,"div",19)}function $a(e,t){if(1&e){const e=m.EpF();m.TgZ(0,"div",20)(1,"button",21),m.NdJ("click",(function(){m.CHM(e);const t=m.oxw();return m.KtG(t.openModal())})),m._UZ(2,"system-button-icon",22),m.qZA()()}}function Xa(e,t){if(1&e){const e=m.EpF();m.TgZ(0,"button",21),m.NdJ("click",(function(){m.CHM(e);const t=m.oxw();return m.KtG(t.openModal())})),m._UZ(1,"system-button-icon",22),m.qZA()}}function Wa(e,t){1&e&&m._UZ(0,"div",23)}function ed(e,t){if(1&e&&(m.TgZ(0,"div",18)(1,"p"),m._uU(2),m.qZA()()),2&e){const e=m.oxw();m.xp6(2),m.Oqu(e.date)}}const td=function(e){return{"slds-grid--align-spread":e}},sd=function(e,t){return{"slds-text-heading--medium":e,"slds-text-heading--small":t}};let id=(()=>{var e;class ObjectTimelineItemAudit{constructor(e,t,s,n,o,l,a){(0,i.Z)(this,"timeline",void 0),(0,i.Z)(this,"model",void 0),(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"userpreferences",void 0),(0,i.Z)(this,"modal",void 0),(0,i.Z)(this,"ViewContainerRef",void 0),(0,i.Z)(this,"record",void 0),(0,i.Z)(this,"side",void 0),(0,i.Z)(this,"nubbin",void 0),(0,i.Z)(this,"auditCount",void 0),(0,i.Z)(this,"itemside",void 0),(0,i.Z)(this,"date",""),this.timeline=e,this.model=t,this.language=s,this.metadata=n,this.userpreferences=o,this.modal=l,this.ViewContainerRef=a}get fieldCount(){return this.auditCount>1?this.auditCount+" changes":this.auditCount+" change"}get user_name(){let e=this.record.user_name;return e.charAt(0).toUpperCase()+e.substring(1)}get description(){let e="";for(let t of this.record.data)e+=this.record.data.length>1?this.language.getFieldDisplayName(this.model.module,t.field_name)+", ":this.language.getFieldDisplayName(this.model.module,t.field_name);return e}get module(){return this.model.module.slice(0,-1)}ngOnInit(){this.side?this.itemside={"slds-m-right--xx-small":!0,"slds-grid--align-end":!0}:this.itemside={"slds-m-left--xx-small":!0},this.calculateDate(),this.auditCount=this.record.data.length}openModal(){this.modal.openModal("ObjectTimelineAuditlogModal",!0,this.ViewContainerRef.injector).subscribe((e=>{e.instance.auditLog=this.record}))}calculateDate(){const e=moment.utc(this.record.date),t=moment.utc(e.format("YYYY M D")).isSame((new moment).format("YYYY M D")),s=e.isSame(new moment,"year");this.date=t?e.format(this.userpreferences.getTimeFormat()):s?e.format("MMM D"):e.format(this.userpreferences.getDateFormat())}}return e=ObjectTimelineItemAudit,(0,i.Z)(ObjectTimelineItemAudit,"ɵfac",(function(t){return new(t||e)(m.Y36(za),m.Y36(p.o),m.Y36(g.d),m.Y36(v.Pu),m.Y36(M.z),m.Y36(K.o),m.Y36(m.s_b))})),(0,i.Z)(ObjectTimelineItemAudit,"ɵcmp",m.Xpm({type:e,selectors:[["object-timeline-item-audit"]],inputs:{record:"record",side:"side"},decls:23,vars:19,consts:[[1,"slds-grid",3,"ngClass"],["style","width: 70px","class","slds-align--absolute-center slds-m-horizontal--none",4,"ngIf"],["class","objecttimeline-item-nubbin-right slds-align--absolute-center",4,"ngIf"],[1,"objecttimeline-item","slds-m-vertical--medium","slds-height_full",3,"click"],[1,"slds-popover__body","slds-grid",2,"height","90px",3,"ngClass"],[1,"slds-grid","slds-grid--vertical","slds-grid--vertical-align-center",2,"width","32px"],[1,"slds-m-horizontal--xx-small",2,"width","32px"],["icon","record_update"],["class","slds-height_full slds-align--absolute-center",4,"ngIf"],[1,"slds-grid","slds-grid--align-spread",2,"width","calc(100% - 32px)"],[1,"slds-grid--vertical","slds-size--1-of-1","slds-p-left--small"],[1,"slds-grid","slds-grid--align-spread","slds-size--1-of-1",2,"min-height","32px"],[1,"slds-popover__header","slds-p-around--none",2,"border","0"],[3,"ngClass"],["system-model-popover","",3,"module","id"],["class","slds-button slds-button--icon-border-filled slds-p-horizontal--medium slds-button--icon slds-button--icon-small",3,"click",4,"ngIf"],[1,"slds-truncate","slds-p-top--xxx-small",2,"width","calc(100% - 12px)"],["class","objecttimeline-item-nubbin-left slds-align--absolute-center",4,"ngIf"],[1,"slds-align--absolute-center","slds-m-horizontal--none",2,"width","70px"],[1,"objecttimeline-item-nubbin-right","slds-align--absolute-center"],[1,"slds-height_full","slds-align--absolute-center"],[1,"slds-button","slds-button--icon-border-filled","slds-p-horizontal--medium","slds-button--icon","slds-button--icon-small",3,"click"],["icon","search"],[1,"objecttimeline-item-nubbin-left","slds-align--absolute-center"]],template:function(e,t){1&e&&(m.TgZ(0,"div",0),m.YNc(1,Va,3,1,"div",1),m.YNc(2,Ka,1,0,"div",2),m.TgZ(3,"section",3),m.NdJ("click",(function(){return t.timeline.setRecord(t.record)})),m.TgZ(4,"div",4)(5,"div",5)(6,"div",6),m._UZ(7,"system-icon",7),m.qZA(),m.YNc(8,$a,3,0,"div",8),m.qZA(),m.TgZ(9,"div",9)(10,"div",10)(11,"div",11)(12,"header",12)(13,"h2",13)(14,"span",14),m._uU(15),m.qZA(),m._uU(16),m.qZA()(),m.YNc(17,Xa,2,0,"button",15),m.qZA(),m.TgZ(18,"div",16)(19,"span"),m._uU(20),m.qZA()()()()()(),m.YNc(21,Wa,1,0,"div",17),m.YNc(22,ed,3,1,"div",1),m.qZA()),2&e&&(m.Q6J("ngClass",t.itemside),m.xp6(1),m.Q6J("ngIf",!t.side),m.xp6(1),m.Q6J("ngIf",!t.side),m.xp6(2),m.Q6J("ngClass",m.VKq(14,td,t.side)),m.xp6(4),m.Q6J("ngIf",t.timeline.smartFontSize),m.xp6(5),m.Q6J("ngClass",m.WLB(16,sd,!t.timeline.smartFontSize,t.timeline.smartFontSize)),m.xp6(1),m.Q6J("module","Users")("id",t.record.created_by),m.xp6(1),m.Oqu(t.user_name),m.xp6(1),m.hij(" - ",t.fieldCount,""),m.xp6(1),m.Q6J("ngIf",!t.timeline.smartFontSize),m.xp6(3),m.Oqu(t.description),m.xp6(1),m.Q6J("ngIf",t.side),m.xp6(1),m.Q6J("ngIf",t.side))},dependencies:[n.mk,n.O5,w.J,T.f,Zo.g],styles:[".objecttimeline-item[_ngcontent-%COMP%]{background-color:var(--color-white);border:1px solid var(--color-grey-5);border-radius:.25rem;box-shadow:0 2px 3px 0 rgb(0 0 16%);width:calc(100% - 86px)}",".objecttimeline-item-nubbin-right[_ngcontent-%COMP%]{background-color:var(--color-white);border-bottom:1px solid var(--color-grey-5);border-left:1px solid var(--color-grey-5);height:20px;margin-right:-10px;transform:rotate(45deg);width:20px}",".objecttimeline-item-nubbin-left[_ngcontent-%COMP%]{background-color:var(--color-white);border-bottom:1px solid var(--color-grey-5);border-left:1px solid var(--color-grey-5);height:20px;margin-left:-10px;transform:rotate(-135deg);width:20px}"]})),ObjectTimelineItemAudit})();function nd(e,t){if(1&e&&(m.TgZ(0,"div",14)(1,"span"),m._uU(2),m.qZA()()),2&e){const e=m.oxw();m.xp6(2),m.Oqu(e.recordDate)}}function od(e,t){1&e&&m._UZ(0,"div",15)}function ld(e,t){1&e&&m._UZ(0,"div",16)}function ad(e,t){if(1&e&&(m.TgZ(0,"div",14)(1,"span"),m._uU(2),m.qZA()()),2&e){const e=m.oxw();m.xp6(2),m.Oqu(e.recordDate)}}const dd=function(e){return{"slds-grid--align-spread":e}},rd=function(e){return{"slds-m-left--small":e}},cd=function(e,t){return{"slds-text-heading--medium":e,"slds-text-heading--small":t}};let ud=(()=>{var e;class ObjectTimelineItemCreated{constructor(e,t,s,n,o,l){(0,i.Z)(this,"timeline",void 0),(0,i.Z)(this,"model",void 0),(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"userpreferences",void 0),(0,i.Z)(this,"session",void 0),(0,i.Z)(this,"record",void 0),(0,i.Z)(this,"side",void 0),(0,i.Z)(this,"nubbin",void 0),(0,i.Z)(this,"itemside",void 0),(0,i.Z)(this,"date",""),this.timeline=e,this.model=t,this.language=s,this.metadata=n,this.userpreferences=o,this.session=l}get user_name(){let e=this.record.user_name;return e.charAt(0).toUpperCase()+e.substring(1)}get module(){return this.model.module.slice(0,-1)}get recordDate(){const e=new moment.utc(this.record.date_entered).tz(this.session.getSessionData("timezone")||moment.tz.guess(!0)),t=e.format("YYYYMMDD")==(new moment).format("YYYYMMDD"),s=e.format("YYYY")==(new moment).format("YYYY");return t?e.format(this.userpreferences.getTimeFormat()):s?e.format("MMM D"):e.format(this.userpreferences.getDateFormat())}ngOnInit(){this.side?this.itemside={"slds-m-right--xx-small":!0,"slds-grid--align-end":!0}:this.itemside={"slds-m-left--xx-small":!0}}}return e=ObjectTimelineItemCreated,(0,i.Z)(ObjectTimelineItemCreated,"ɵfac",(function(t){return new(t||e)(m.Y36(za),m.Y36(p.o),m.Y36(g.d),m.Y36(v.Pu),m.Y36(M.z),m.Y36(Rt.n))})),(0,i.Z)(ObjectTimelineItemCreated,"ɵcmp",m.Xpm({type:e,selectors:[["object-timeline-item-created"]],inputs:{record:"record",side:"side"},decls:16,vars:17,consts:[[1,"slds-grid","slds-grid",3,"ngClass"],["style","width: 70px","class","slds-align--absolute-center slds-m-horizontal--none",4,"ngIf"],["class","objecttimeline-item-nubbin-right slds-align--absolute-center",4,"ngIf"],[1,"objecttimeline-item","slds-m-vertical--medium","slds-height_full",3,"click"],[1,"slds-popover__body","slds-grid",2,"height","90px",3,"ngClass"],[1,"slds-grid","slds-grid--vertical","slds-grid--vertical-align-center",2,"width","32px"],[1,"slds-m-horizontal--xx-small",2,"width","32px"],[3,"module"],[1,"slds-grid","slds-grid--align-spread","slds-size--7-of-8",2,"width","calc(100% - 32px)"],[1,"slds-m-horizontal--small","slds-media",3,"ngClass"],[1,"slds-media__body",2,"height","45%"],[1,"slds-p-left--none","slds-popover__header","slds-p-top--none",2,"border","0"],[3,"ngClass"],["class","objecttimeline-item-nubbin-left slds-align--absolute-center",4,"ngIf"],[1,"slds-align--absolute-center","slds-m-horizontal--none",2,"width","70px"],[1,"objecttimeline-item-nubbin-right","slds-align--absolute-center"],[1,"objecttimeline-item-nubbin-left","slds-align--absolute-center"]],template:function(e,t){1&e&&(m.TgZ(0,"div",0),m.YNc(1,nd,3,1,"div",1),m.YNc(2,od,1,0,"div",2),m.TgZ(3,"section",3),m.NdJ("click",(function(){return t.timeline.setRecord(t.record)})),m.TgZ(4,"div",4)(5,"div",5)(6,"div",6),m._UZ(7,"system-icon",7),m.qZA()(),m.TgZ(8,"div",8)(9,"div",9)(10,"div",10)(11,"header",11)(12,"h2",12),m._uU(13),m.qZA()()()()()()(),m.YNc(14,ld,1,0,"div",13),m.YNc(15,ad,3,1,"div",1),m.qZA()),2&e&&(m.Q6J("ngClass",t.itemside),m.xp6(1),m.Q6J("ngIf",!t.side),m.xp6(1),m.Q6J("ngIf",!t.side),m.xp6(2),m.Q6J("ngClass",m.VKq(10,dd,t.side)),m.xp6(3),m.Q6J("module",t.model.module),m.xp6(2),m.Q6J("ngClass",m.VKq(12,rd,!t.side)),m.xp6(3),m.Q6J("ngClass",m.WLB(14,cd,!t.timeline.smartFontSize,t.timeline.smartFontSize)),m.xp6(1),m.hij("This ",t.module," was created"),m.xp6(1),m.Q6J("ngIf",t.side),m.xp6(1),m.Q6J("ngIf",t.side))},dependencies:[n.mk,n.O5,T.f],styles:[".objecttimeline-item[_ngcontent-%COMP%]{background-color:var(--color-white);border:1px solid var(--color-grey-5);border-radius:.25rem;box-shadow:0 2px 3px 0 rgb(0 0 16%);width:calc(100% - 86px)}",".objecttimeline-item-nubbin-right[_ngcontent-%COMP%]{background-color:var(--color-white);border-bottom:1px solid var(--color-grey-5);border-left:1px solid var(--color-grey-5);height:20px;margin-right:-10px;transform:rotate(45deg);width:20px}",".objecttimeline-item-nubbin-left[_ngcontent-%COMP%]{background-color:var(--color-white);border-bottom:1px solid var(--color-grey-5);border-left:1px solid var(--color-grey-5);height:20px;margin-left:-10px;transform:rotate(-135deg);width:20px}"]})),ObjectTimelineItemCreated})();function hd(e,t){if(1&e){const e=m.EpF();m.TgZ(0,"div",7)(1,"div",8),m.NdJ("click",(function(t){const s=m.CHM(e).$implicit,i=m.oxw();return m.KtG(i.setFilter(t,s))})),m.TgZ(2,"span",9),m._UZ(3,"input",38),m.TgZ(4,"label",39),m._UZ(5,"span",12),m.TgZ(6,"span",13),m._uU(7),m.qZA()()()()()}if(2&e){const e=t.$implicit,s=m.oxw();m.xp6(3),m.Q6J("id",e)("checked",s.getChecked(e)),m.xp6(1),m.uIk("for",e),m.xp6(3),m.Oqu(e)}}function md(e,t){if(1&e){const e=m.EpF();m.TgZ(0,"div",7)(1,"div",8),m.NdJ("click",(function(t){m.CHM(e);const s=m.oxw();return m.KtG(s.setFilter(t,"auditLog"))})),m.TgZ(2,"span",9),m._UZ(3,"input",38),m.TgZ(4,"label",39),m._UZ(5,"span",12),m.TgZ(6,"span",13),m._UZ(7,"system-label",40),m.qZA()()()()()}if(2&e){const e=m.oxw();m.xp6(3),m.Q6J("id","auditLog")("checked",e.getChecked("auditLog")),m.xp6(1),m.uIk("for","auditLog")}}const gd=function(e){return{"slds-is-open":e}};let pd=(()=>{var e;class ObjectTimelineFilter{constructor(e,t,s,n,o){(0,i.Z)(this,"renderer",void 0),(0,i.Z)(this,"elementRef",void 0),(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"timeline",void 0),(0,i.Z)(this,"isOpen",!1),(0,i.Z)(this,"clickListener",void 0),(0,i.Z)(this,"moduleTypes",[]),(0,i.Z)(this,"objectfilters",[]),(0,i.Z)(this,"ownerfilter",void 0),(0,i.Z)(this,"onlyAuditObjects",!1),this.renderer=e,this.elementRef=t,this.language=s,this.metadata=n,this.timeline=o,this.setFromService()}get filterColorClass(){return this.timeline.filters.objectfilters.indexOf("Modules")>=0&&this.timeline.filters.objectfilters.indexOf("auditLog")>=0&&!this.timeline.filters.own?"slds-icon-text-default":"slds-icon-text-error"}onClick(e){this.elementRef.nativeElement.contains(e.target)||(this.isOpen=!1,this.clickListener())}setFromService(){this.objectfilters=JSON.parse(JSON.stringify(this.timeline.filters.objectfilters)),this.ownerfilter=this.timeline.filters.own}setToService(){this.timeline.filters.objectfilters=JSON.parse(JSON.stringify(this.objectfilters)),this.timeline.filters.own=this.ownerfilter,this.timeline.onlyAudits=this.onlyAuditObjects,this.timeline.reload()}toggleOpen(e){e.stopPropagation(),this.isOpen=!this.isOpen,this.isOpen?this.clickListener=this.renderer.listen("document","click",(e=>this.onClick(e))):this.clickListener&&this.clickListener(),this.isOpen&&(this.moduleTypes=this.timeline.timelineModules)}setFilter(e,t){if(e.preventDefault(),"Modules"==t){let e=this.objectfilters.indexOf(t);if(e>=0){if(this.objectfilters.length<=1)return;this.objectfilters.splice(e,1)}else this.objectfilters=this.objectfilters.indexOf("auditLog")>=0?["auditLog","Modules"]:["Modules"]}else if("auditLog"==t){let e=this.objectfilters.indexOf(t);if(e>=0){if(this.objectfilters.length<=1)return;this.objectfilters.splice(e,1)}else this.objectfilters.push(t)}else{this.objectfilters.indexOf("Modules")>=0&&this.objectfilters.splice(this.objectfilters.indexOf("Modules"),1);let e=this.objectfilters.indexOf(t);if(e>=0){if(this.objectfilters.length<=1)return;this.objectfilters.splice(e,1)}else this.objectfilters.push(t)}}getChecked(e){return"Modules"==e?1===this.objectfilters.length&&this.objectfilters.indexOf("Modules")>=0||2===this.objectfilters.length&&this.objectfilters.indexOf("Modules")>=0&&this.objectfilters.indexOf("auditLog")>=0:"auditLog"==e?this.objectfilters.indexOf("auditLog")>=0:this.objectfilters.indexOf(e)>=0}closeDialog(e){this.clickListener&&this.clickListener(),e?this.setToService():this.setFromService(),this.isOpen=!1}}return e=ObjectTimelineFilter,(0,i.Z)(ObjectTimelineFilter,"ɵfac",(function(t){return new(t||e)(m.Y36(m.Qsj),m.Y36(m.SBq),m.Y36(g.d),m.Y36(v.Pu),m.Y36(za))})),(0,i.Z)(ObjectTimelineFilter,"ɵcmp",m.Xpm({type:e,selectors:[["object-timeline-filter"]],decls:47,vars:11,consts:[[1,"slds-dropdown-trigger","slds-dropdown-trigger_click","slds-p-horizontal--xxx-small",3,"ngClass"],["icon","filterList","size","x-small",3,"colorclass","title","click"],[1,"slds-is-absolute","slds-dropdown","slds-dropdown_right","slds-nubbin_top-right",2,"right","-10px","top","25px"],[1,"slds-grid"],[1,"slds-p-horizontal--small","slds-border--right",2,"min-width","180px"],[1,"slds-p-vertical--x-small"],["label","LBL_TYPE"],[1,"slds-form-element","slds-p-vertical--xx-small"],[1,"slds-form-element__control",3,"click"],[1,"slds-checkbox"],["type","checkbox","id","alltypes",3,"checked"],["for","alltypes",1,"slds-checkbox__label"],[1,"slds-checkbox_faux"],[1,"slds-form-element__label"],["label","LBL_ALL"],["class","slds-form-element slds-p-vertical--xx-small",4,"ngFor","ngForOf"],[1,"slds-size--1-of-1","slds-border-top"],["class","slds-form-element slds-p-vertical--xx-small",4,"ngIf"],[1,"slds-p-horizontal--small",2,"min-width","180px"],["label","LBL_FILTER"],[1,"slds-form-element"],[1,"slds-form-element__control"],[1,"slds-radio"],["type","radio","id","timelineownerall","name","filter","value","",3,"ngModel","ngModelChange"],["for","timelineownerall",1,"slds-radio__label"],[1,"slds-radio_faux"],["type","radio","id","timelineownerassignedtome","name","filter","value","assigned",3,"ngModel","ngModelChange"],["for","timelineownerassignedtome",1,"slds-radio__label"],[1,"slds-form-element__label","slds-truncate"],["label","LBL_ASSIGNEDTOME"],["type","radio","id","timelineownercreatedbyme","name","filter","value","created",3,"ngModel","ngModelChange"],["for","timelineownercreatedbyme",1,"slds-radio__label"],["label","LBL_CREATEDBYME"],[1,"slds-popover__footer"],[1,"slds-col--bump-left","slds-button","slds-button_neutral",3,"click"],["label","LBL_CANCEL"],[1,"slds-button","slds-button--brand",3,"click"],["label","LBL_APPLY"],["type","checkbox",3,"id","checked"],[1,"slds-checkbox__label"],["label","LBL_AUDIT_LOG"]],template:function(e,t){1&e&&(m.TgZ(0,"div",0)(1,"system-utility-icon",1),m.NdJ("click",(function(e){return t.toggleOpen(e)})),m.qZA(),m.TgZ(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5),m._UZ(6,"system-label",6),m.qZA(),m.TgZ(7,"div",7)(8,"div",8),m.NdJ("click",(function(e){return t.setFilter(e,"Modules")})),m.TgZ(9,"span",9),m._UZ(10,"input",10),m.TgZ(11,"label",11),m._UZ(12,"span",12),m.TgZ(13,"span",13),m._UZ(14,"system-label",14),m.qZA()()()()(),m.YNc(15,hd,8,4,"div",15),m._UZ(16,"div",16),m.YNc(17,md,8,3,"div",17),m.qZA(),m.TgZ(18,"div",18)(19,"div",5),m._UZ(20,"system-label",19),m.qZA(),m.TgZ(21,"fieldset",20)(22,"div",21)(23,"span",22)(24,"input",23),m.NdJ("ngModelChange",(function(e){return t.ownerfilter=e})),m.qZA(),m.TgZ(25,"label",24),m._UZ(26,"span",25),m.TgZ(27,"span",13),m._UZ(28,"system-label",14),m.qZA()()(),m.TgZ(29,"span",22)(30,"input",26),m.NdJ("ngModelChange",(function(e){return t.ownerfilter=e})),m.qZA(),m.TgZ(31,"label",27),m._UZ(32,"span",25),m.TgZ(33,"span",28),m._UZ(34,"system-label",29),m.qZA()()(),m.TgZ(35,"span",22)(36,"input",30),m.NdJ("ngModelChange",(function(e){return t.ownerfilter=e})),m.qZA(),m.TgZ(37,"label",31),m._UZ(38,"span",25),m.TgZ(39,"span",28),m._UZ(40,"system-label",32),m.qZA()()()()()()(),m.TgZ(41,"footer",33)(42,"div",3)(43,"button",34),m.NdJ("click",(function(){return t.closeDialog(!1)})),m._UZ(44,"system-label",35),m.qZA(),m.TgZ(45,"button",36),m.NdJ("click",(function(){return t.closeDialog(!0)})),m._UZ(46,"system-label",37),m.qZA()()()()()),2&e&&(m.Q6J("ngClass",m.VKq(9,gd,t.isOpen)),m.xp6(1),m.Q6J("colorclass",t.filterColorClass)("title",t.language.getLabel("LBL_FILTER")),m.xp6(9),m.Q6J("checked",t.getChecked("Modules")),m.xp6(5),m.Q6J("ngForOf",t.moduleTypes),m.xp6(2),m.Q6J("ngIf",t.timeline.auditLogEnabled),m.xp6(7),m.Q6J("ngModel",t.ownerfilter),m.xp6(6),m.Q6J("ngModel",t.ownerfilter),m.xp6(6),m.Q6J("ngModel",t.ownerfilter))},dependencies:[n.mk,n.sg,n.O5,l.Fj,l._,l.JJ,l.On,S._,C.r],encapsulation:2})),ObjectTimelineFilter})();var fd=s(4730),bd=s(6822),vd=s(7758);function Zd(e,t){if(1&e&&(m.TgZ(0,"div",7)(1,"span"),m._uU(2),m.qZA()()),2&e){const e=m.oxw();m.xp6(2),m.Oqu(e.recordDate)}}function _d(e,t){1&e&&m._UZ(0,"div",8)}const yd=function(e){return{"slds-grid--align-spread":e}},xd=function(e){return{"slds-m-left--small":e}},wd=function(e,t){return{"slds-text-heading--medium":e,"slds-text-heading--small":t}},Td=function(){return{displayLabels:!1}},Cd=function(e,t){return{"slds-text-heading--small":e,"slds-text-heading--x-small":t}};function Ad(e,t){if(1&e&&(m.TgZ(0,"div",9)(1,"div",10)(2,"div",11),m._UZ(3,"system-icon",12),m.qZA()(),m.TgZ(4,"div",13)(5,"div",14)(6,"div",15),m._UZ(7,"object-record-fieldset-horizontal-list",16),m.qZA(),m.TgZ(8,"article",17),m._UZ(9,"object-record-fieldset-horizontal-list",16),m.qZA()(),m._UZ(10,"object-action-menu",18),m.qZA()()),2&e){const e=m.oxw();m.Q6J("ngClass",m.VKq(11,yd,e.side)),m.xp6(3),m.Q6J("module",e.model.module),m.xp6(2),m.Q6J("ngClass",m.VKq(13,xd,!e.side)),m.xp6(1),m.Q6J("ngClass",m.WLB(15,wd,!e.timeline.smartFontSize,e.timeline.smartFontSize))("system-view-provider",m.DdM(18,Td)),m.xp6(1),m.Q6J("fieldset",e.headerFieldSet),m.xp6(1),m.Q6J("ngClass",m.WLB(19,Cd,!e.timeline.smartFontSize,e.timeline.smartFontSize))("system-view-provider",m.DdM(22,Td)),m.xp6(1),m.Q6J("fieldset",e.subHeaderFieldSet),m.xp6(1),m.Q6J("buttonsize","small")("actionset",e.actionset)}}function kd(e,t){1&e&&m._UZ(0,"div",19)}function Ld(e,t){if(1&e&&(m.TgZ(0,"div",7)(1,"span"),m._uU(2),m.qZA()()),2&e){const e=m.oxw();m.xp6(2),m.Oqu(e.recordDate)}}function Id(e,t){if(1&e&&(m.TgZ(0,"div",20)(1,"div",21)(2,"div",10)(3,"div",11),m._UZ(4,"system-icon",12),m.qZA()(),m.TgZ(5,"div",13)(6,"div",14)(7,"div",15),m._UZ(8,"object-record-fieldset-horizontal-list",16),m.qZA(),m.TgZ(9,"article",17),m._UZ(10,"object-record-fieldset-horizontal-list",16),m.qZA()()()(),m.TgZ(11,"div",22),m._UZ(12,"object-action-menu",18),m.qZA()()),2&e){const e=m.oxw();m.xp6(4),m.Q6J("module",e.model.module),m.xp6(2),m.Q6J("ngClass",m.VKq(10,xd,!e.side)),m.xp6(1),m.Q6J("ngClass",m.WLB(12,wd,!e.timeline.smartFontSize,e.timeline.smartFontSize))("system-view-provider",m.DdM(15,Td)),m.xp6(1),m.Q6J("fieldset",e.headerFieldSet),m.xp6(1),m.Q6J("ngClass",m.WLB(16,Cd,!e.timeline.smartFontSize,e.timeline.smartFontSize))("system-view-provider",m.DdM(19,Td)),m.xp6(1),m.Q6J("fieldset",e.subHeaderFieldSet),m.xp6(2),m.Q6J("buttonsize","xx-small")("actionset",e.actionset)}}let Md=(()=>{var e;class ObjectTimelineItemModule{constructor(e,t,s,n,o,l,a,d){(0,i.Z)(this,"timeline",void 0),(0,i.Z)(this,"view",void 0),(0,i.Z)(this,"modelattachments",void 0),(0,i.Z)(this,"model",void 0),(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"userpreferences",void 0),(0,i.Z)(this,"session",void 0),(0,i.Z)(this,"record",void 0),(0,i.Z)(this,"side",void 0),(0,i.Z)(this,"itemside",void 0),(0,i.Z)(this,"componentconfig",void 0),(0,i.Z)(this,"date",""),(0,i.Z)(this,"dateFieldSet",void 0),(0,i.Z)(this,"headerFieldSet",void 0),(0,i.Z)(this,"subHeaderFieldSet",void 0),(0,i.Z)(this,"headerDescription","Someone edited this"),this.timeline=e,this.view=t,this.modelattachments=s,this.model=n,this.language=o,this.metadata=l,this.userpreferences=a,this.session=d}get data(){return this.record.data}get actionset(){return this.componentconfig.actionset}get user_name(){let e=this.record.user_name;return e.charAt(0).toUpperCase()+e.substring(1)}get module(){return this.model.module}get recordDate(){const e=new moment.utc(this.record.date).tz(this.session.getSessionData("timezone")||moment.tz.guess(!0)),t=e.format("YYYYMMDD")==(new moment).format("YYYYMMDD"),s=e.format("YYYY")==(new moment).format("YYYY");return t?e.format(this.userpreferences.getTimeFormat()):s?e.format("MMM D"):e.format(this.userpreferences.getDateFormat())}ngOnInit(){this.model.module=this.record.module,this.model.id=this.record.id,this.model.setData(this.record.data),this.modelattachments.module=this.model.module,this.modelattachments.id=this.model.id,this.side?this.itemside={"slds-m-right--xx-small":!0,"slds-grid--align-end":!0}:this.itemside={"slds-m-left--xx-small":!0},this.componentconfig=this.metadata.getComponentConfig("ObjectTimelineItemModule","Accounts"),this.headerFieldSet=this.componentconfig.headerFieldSet,this.subHeaderFieldSet=this.componentconfig.subHeaderFieldSet}}return e=ObjectTimelineItemModule,(0,i.Z)(ObjectTimelineItemModule,"ɵfac",(function(t){return new(t||e)(m.Y36(za),m.Y36(Fe.e),m.Y36(ls.H),m.Y36(p.o),m.Y36(g.d),m.Y36(v.Pu),m.Y36(M.z),m.Y36(Rt.n))})),(0,i.Z)(ObjectTimelineItemModule,"ɵcmp",m.Xpm({type:e,selectors:[["object-timeline-item-module"]],inputs:{record:"record",side:"side"},features:[m._Bn([p.o,ls.H,Fe.e])],decls:9,vars:7,consts:[[1,"slds-grid",3,"ngClass"],["style","width: 70px","class","slds-align--absolute-center slds-m-horizontal--none",4,"ngIf"],["class","objecttimeline-item-nubbin-right slds-align--absolute-center",4,"ngIf"],[1,"objecttimeline-item","slds-m-vertical--medium","slds-height_full",3,"click"],["class","slds-popover__body slds-grid","style","height: 90px",3,"ngClass",4,"ngIf","ngIfElse"],["class","objecttimeline-item-nubbin-left slds-align--absolute-center",4,"ngIf"],["smallview",""],[1,"slds-align--absolute-center","slds-m-horizontal--none",2,"width","70px"],[1,"objecttimeline-item-nubbin-right","slds-align--absolute-center"],[1,"slds-popover__body","slds-grid",2,"height","90px",3,"ngClass"],[1,"slds-grid","slds-grid--vertical","slds-grid--vertical-align-center",2,"width","32px"],[1,"slds-m-horizontal--xx-small",2,"width","32px"],[3,"module"],[1,"slds-grid","slds-grid--align-spread","slds-size--7-of-8",2,"width","calc(100% - 32px)"],[1,"slds-m-horizontal--small","slds-media","slds-grid--vertical",3,"ngClass"],[1,"slds-media__body",2,"height","45%",3,"ngClass","system-view-provider"],[3,"fieldset"],[2,"height","55%",3,"ngClass","system-view-provider"],[3,"buttonsize","actionset"],[1,"objecttimeline-item-nubbin-left","slds-align--absolute-center"],[1,"slds-popover__body","slds-grid--vertical",2,"height","90px"],[1,"slds-grid"],[1,"slds-align--absolute-center"]],template:function(e,t){if(1&e&&(m.TgZ(0,"div",0),m.YNc(1,Zd,3,1,"div",1),m.YNc(2,_d,1,0,"div",2),m.TgZ(3,"section",3),m.NdJ("click",(function(){return t.timeline.setRecord(t.record)})),m.YNc(4,Ad,11,23,"div",4),m.qZA(),m.YNc(5,kd,1,0,"div",5),m.YNc(6,Ld,3,1,"div",1),m.qZA(),m.YNc(7,Id,13,20,"ng-template",null,6,m.W1O)),2&e){const e=m.MAs(8);m.Q6J("ngClass",t.itemside),m.xp6(1),m.Q6J("ngIf",!t.side),m.xp6(1),m.Q6J("ngIf",!t.side),m.xp6(2),m.Q6J("ngIf",!t.timeline.smartFontSize)("ngIfElse",e),m.xp6(1),m.Q6J("ngIf",t.side),m.xp6(1),m.Q6J("ngIf",t.side)}},dependencies:[n.mk,n.O5,T.f,Gl.V,ot.g,Uo.Z],styles:[".objecttimeline-item[_ngcontent-%COMP%]{background-color:var(--color-white);border:1px solid var(--color-grey-5);border-radius:.25rem;box-shadow:0 2px 3px 0 rgb(0 0 16%);width:calc(100% - 86px)}",".objecttimeline-item-nubbin-right[_ngcontent-%COMP%]{background-color:var(--color-white);border-bottom:1px solid var(--color-grey-5);border-left:1px solid var(--color-grey-5);height:20px;margin-right:-10px;transform:rotate(45deg);width:20px}",".objecttimeline-item-nubbin-left[_ngcontent-%COMP%]{background-color:var(--color-white);border-bottom:1px solid var(--color-grey-5);border-left:1px solid var(--color-grey-5);height:20px;margin-left:-10px;transform:rotate(-135deg);width:20px}"]})),ObjectTimelineItemModule})();function Sd(e,t){if(1&e&&(m.TgZ(0,"div",11)(1,"span",12),m._uU(2),m.qZA()()),2&e){const e=m.oxw(3);m.xp6(2),m.hij(" ",e.record.divider," ")}}function Jd(e,t){if(1&e&&m._UZ(0,"object-timeline-item-module",13),2&e){const e=m.oxw(3);m.Q6J("record",e.record)("side",!1)}}function Od(e,t){if(1&e&&m._UZ(0,"object-timeline-item-audit",13),2&e){const e=m.oxw(3);m.Q6J("record",e.record)("side",!1)}}function Nd(e,t){if(1&e&&m._UZ(0,"object-timeline-item-created",13),2&e){const e=m.oxw(3);m.Q6J("record",e.record)("side",!1)}}function Fd(e,t){if(1&e&&(m.TgZ(0,"div",3),m._UZ(1,"div",4),m.TgZ(2,"div",5),m.YNc(3,Sd,3,1,"div",6),m._UZ(4,"div",7),m.qZA(),m.TgZ(5,"div",8),m.YNc(6,Jd,1,2,"object-timeline-item-module",9),m.YNc(7,Od,1,2,"object-timeline-item-audit",9),m.YNc(8,Nd,1,2,"object-timeline-item-created",10),m.qZA()()),2&e){const e=m.oxw(2);m.xp6(3),m.Q6J("ngIf",e.divider),m.xp6(2),m.Q6J("ngSwitch",e.record.record_Type),m.xp6(1),m.Q6J("ngSwitchCase","module"),m.xp6(1),m.Q6J("ngSwitchCase","audit")}}function qd(e,t){if(1&e&&m._UZ(0,"object-timeline-item-module",13),2&e){const e=m.oxw(3);m.Q6J("record",e.record)("side",!0)}}function Ed(e,t){if(1&e&&m._UZ(0,"object-timeline-item-audit",13),2&e){const e=m.oxw(3);m.Q6J("record",e.record)("side",!0)}}function Yd(e,t){if(1&e&&m._UZ(0,"object-timeline-item-created",13),2&e){const e=m.oxw(3);m.Q6J("record",e.record)("side",!0)}}function Dd(e,t){if(1&e&&(m.TgZ(0,"div",11)(1,"span",12),m._uU(2),m.qZA()()),2&e){const e=m.oxw(3);m.xp6(2),m.hij(" ",e.record.divider," ")}}function Qd(e,t){if(1&e&&(m.TgZ(0,"div",3)(1,"div",8),m.YNc(2,qd,1,2,"object-timeline-item-module",9),m.YNc(3,Ed,1,2,"object-timeline-item-audit",9),m.YNc(4,Yd,1,2,"object-timeline-item-created",10),m.qZA(),m.TgZ(5,"div",5),m.YNc(6,Dd,3,1,"div",6),m._UZ(7,"div",14),m.qZA(),m._UZ(8,"div",4),m.qZA()),2&e){const e=m.oxw(2);m.xp6(1),m.Q6J("ngSwitch",e.record.record_Type),m.xp6(1),m.Q6J("ngSwitchCase","module"),m.xp6(1),m.Q6J("ngSwitchCase","audit"),m.xp6(3),m.Q6J("ngIf",e.divider)}}function Ud(e,t){if(1&e&&(m.TgZ(0,"div"),m.YNc(1,Fd,9,4,"div",2),m.YNc(2,Qd,9,4,"div",2),m.qZA()),2&e){const e=m.oxw();m.xp6(1),m.Q6J("ngIf",e.side),m.xp6(1),m.Q6J("ngIf",!e.side)}}function Rd(e,t){if(1&e&&(m.TgZ(0,"div",21)(1,"span",12),m._uU(2),m.qZA()()),2&e){const e=m.oxw(2);m.xp6(2),m.hij(" ",e.record.divider," ")}}function jd(e,t){if(1&e&&m._UZ(0,"object-timeline-item-module",13),2&e){const e=m.oxw(2);m.Q6J("record",e.record)("side",!1)}}function Bd(e,t){if(1&e&&m._UZ(0,"object-timeline-item-audit",13),2&e){const e=m.oxw(2);m.Q6J("record",e.record)("side",!1)}}function Gd(e,t){if(1&e&&m._UZ(0,"object-timeline-item-created",13),2&e){const e=m.oxw(2);m.Q6J("record",e.record)("side",!1)}}function Pd(e,t){if(1&e&&(m.TgZ(0,"div",15)(1,"div",16)(2,"div",17),m._UZ(3,"div",14),m.qZA(),m.YNc(4,Rd,3,1,"div",18),m.qZA(),m.TgZ(5,"div",19)(6,"div",17),m._UZ(7,"div",14),m.qZA(),m.TgZ(8,"div",20),m.YNc(9,jd,1,2,"object-timeline-item-module",9),m.YNc(10,Bd,1,2,"object-timeline-item-audit",9),m.YNc(11,Gd,1,2,"object-timeline-item-created",10),m.qZA()()()),2&e){const e=m.oxw();m.xp6(4),m.Q6J("ngIf",e.divider),m.xp6(4),m.Q6J("ngSwitch",e.record.record_Type),m.xp6(1),m.Q6J("ngSwitchCase","module"),m.xp6(1),m.Q6J("ngSwitchCase","audit")}}let Hd=(()=>{var e;class ObjectTimelineItemLine{constructor(e){(0,i.Z)(this,"timeline",void 0),(0,i.Z)(this,"Record",void 0),(0,i.Z)(this,"index",void 0),(0,i.Z)(this,"buttons",!0),this.timeline=e}get side(){return this.index%2==0}get divider(){return this.record.hasOwnProperty("divider")}get record(){return this.Record}get recordType(){return this.Record.hasOwnProperty("audit_log")?"audit":this.Record.hasOwnProperty("module")?"moduleRecord":"moduleCreated"}}return e=ObjectTimelineItemLine,(0,i.Z)(ObjectTimelineItemLine,"ɵfac",(function(t){return new(t||e)(m.Y36(za))})),(0,i.Z)(ObjectTimelineItemLine,"ɵcmp",m.Xpm({type:e,selectors:[["object-timeline-item-line"]],inputs:{Record:"Record",index:"index",buttons:"buttons"},decls:3,vars:2,consts:[[4,"ngIf","ngIfElse"],["thinView",""],["class","slds-grid","style","height: 70px",4,"ngIf"],[1,"slds-grid",2,"height","70px"],[2,"width","calc(50% - 2px)"],[1,"slds-grid--vertical","slds-align--absolute-center",2,"width","4px","height","85px"],["style","width: 60px","class","slds-m-top--medium",4,"ngIf"],[1,"slds-color__background_gray-9","slds-height_full","slds-align--absolute-center",2,"width","2px","height","85px"],[2,"width","calc(50% - 2px)",3,"ngSwitch"],[3,"record","side",4,"ngSwitchCase"],[3,"record","side",4,"ngSwitchDefault"],[1,"slds-m-top--medium",2,"width","60px"],[1,"slds-color__text_gray-6","slds-align--absolute-center",2,"font-size","14px"],[3,"record","side"],[1,"slds-color__background_gray-9","slds-height_full","slds-align--absolute-center",2,"width","2px"],[1,"slds-grid--vertical"],[1,"slds-grid"],[1,"slds-grid--vertical",2,"width","4px"],["style","width: 60px","class","slds-m-left--xx-small",4,"ngIf"],[1,"slds-grid","slds-m-right--small"],[2,"width","calc(100% - 4px)",3,"ngSwitch"],[1,"slds-m-left--xx-small",2,"width","60px"]],template:function(e,t){if(1&e&&(m.YNc(0,Ud,3,2,"div",0),m.YNc(1,Pd,12,4,"ng-template",null,1,m.W1O)),2&e){const e=m.MAs(2);m.Q6J("ngIf",!t.timeline.smartView)("ngIfElse",e)}},dependencies:[n.O5,n.RF,n.n9,n.ED,Md,id,ud],encapsulation:2})),ObjectTimelineItemLine})();function zd(e,t){1&e&&(m.TgZ(0,"div")(1,"div",2),m._UZ(2,"div",3),m.TgZ(3,"div",4),m._UZ(4,"div",5),m.qZA(),m.TgZ(5,"div",3)(6,"div",6)(7,"div",7)(8,"span",8),m._UZ(9,"system-stencil"),m.qZA()(),m.TgZ(10,"section",9)(11,"div",10)(12,"div",11)(13,"div",12),m._UZ(14,"system-icon",13),m.qZA()(),m.TgZ(15,"div",14)(16,"div",15)(17,"div",16)(18,"header",17)(19,"h2",18),m._UZ(20,"system-stencil"),m.qZA()(),m.TgZ(21,"p",19),m._UZ(22,"system-stencil"),m.qZA()()(),m._UZ(23,"system-icon",20),m.qZA()()()()()(),m.TgZ(24,"div",21)(25,"div",3)(26,"div",22)(27,"section",23)(28,"div",24)(29,"div",11)(30,"div",12),m._UZ(31,"system-icon",13),m.qZA()(),m.TgZ(32,"div",14)(33,"div",15)(34,"div",16)(35,"header",17)(36,"h2",18),m._UZ(37,"system-stencil"),m.qZA()(),m.TgZ(38,"p",19),m._UZ(39,"system-stencil"),m.qZA()()(),m._UZ(40,"system-icon",20),m.qZA()()(),m.TgZ(41,"div",7)(42,"span",8),m._UZ(43,"system-stencil"),m.qZA()()()(),m.TgZ(44,"div",25),m._UZ(45,"div",5),m.qZA(),m._UZ(46,"div",3),m.qZA(),m.TgZ(47,"div",26),m._UZ(48,"div",3),m.TgZ(49,"div",4),m._UZ(50,"div",5),m.qZA(),m.TgZ(51,"div",3)(52,"div",6)(53,"div",7)(54,"span",8),m._UZ(55,"system-stencil"),m.qZA()(),m.TgZ(56,"section",9)(57,"div",10)(58,"div",11)(59,"div",12),m._UZ(60,"system-icon",13),m.qZA()(),m.TgZ(61,"div",14)(62,"div",15)(63,"div",16)(64,"header",17)(65,"h2",18),m._UZ(66,"system-stencil"),m.qZA()(),m.TgZ(67,"p",19),m._UZ(68,"system-stencil"),m.qZA()()(),m._UZ(69,"system-icon",27),m.qZA()()()()()(),m.TgZ(70,"div",28)(71,"div",3)(72,"div",22)(73,"section",23)(74,"div",24)(75,"div",11)(76,"div",12),m._UZ(77,"system-icon",13),m.qZA()(),m.TgZ(78,"div",14)(79,"div",15)(80,"div",16)(81,"header",17)(82,"h2",18),m._UZ(83,"system-stencil"),m.qZA()(),m.TgZ(84,"p",19),m._UZ(85,"system-stencil"),m.qZA()()(),m._UZ(86,"system-icon",20),m.qZA()()(),m.TgZ(87,"div",7)(88,"span",8),m._UZ(89,"system-stencil"),m.qZA()()()(),m.TgZ(90,"div",25),m._UZ(91,"div",5),m.qZA(),m._UZ(92,"div",3),m.qZA(),m.TgZ(93,"div",29),m._UZ(94,"div",3),m.TgZ(95,"div",4),m._UZ(96,"div",5),m.qZA(),m.TgZ(97,"div",3)(98,"div",6)(99,"div",7)(100,"span",8),m._UZ(101,"system-stencil"),m.qZA()(),m.TgZ(102,"section",9)(103,"div",30)(104,"div",11)(105,"div",12),m._UZ(106,"system-icon",13),m.qZA()(),m.TgZ(107,"div",14)(108,"div",15)(109,"div",16)(110,"header",17)(111,"h2",18),m._UZ(112,"system-stencil"),m.qZA()(),m.TgZ(113,"p",19),m._UZ(114,"system-stencil"),m.qZA()()(),m.TgZ(115,"button",31),m._UZ(116,"system-button-icon",13),m.qZA()()()()()()()()),2&e&&(m.xp6(23),m.Q6J("icon","down"),m.xp6(17),m.Q6J("icon","down"),m.xp6(46),m.Q6J("icon","down"))}function Vd(e,t){1&e&&(m.TgZ(0,"div",2)(1,"div",4),m._UZ(2,"div",5),m.qZA(),m.TgZ(3,"div",32)(4,"div",6)(5,"div",7)(6,"span",8),m._UZ(7,"system-stencil"),m.qZA()(),m.TgZ(8,"section",9)(9,"div",10)(10,"div",11)(11,"div",12),m._UZ(12,"system-icon",13),m.qZA()(),m.TgZ(13,"div",14)(14,"div",15)(15,"div",16)(16,"header",17)(17,"h2",18),m._UZ(18,"system-stencil"),m.qZA()(),m.TgZ(19,"p",19),m._UZ(20,"system-stencil"),m.qZA()()(),m._UZ(21,"system-icon",20),m.qZA()()()()()(),m.TgZ(22,"div",2)(23,"div",4),m._UZ(24,"div",5),m.qZA(),m.TgZ(25,"div",32)(26,"div",6)(27,"div",7)(28,"span",8),m._UZ(29,"system-stencil"),m.qZA()(),m.TgZ(30,"section",9)(31,"div",10)(32,"div",11)(33,"div",12),m._UZ(34,"system-icon",13),m.qZA()(),m.TgZ(35,"div",14)(36,"div",15)(37,"div",16)(38,"header",17)(39,"h2",18),m._UZ(40,"system-stencil"),m.qZA()(),m.TgZ(41,"p",19),m._UZ(42,"system-stencil"),m.qZA()()(),m._UZ(43,"system-icon",20),m.qZA()()()()()(),m.TgZ(44,"div",2)(45,"div",4),m._UZ(46,"div",5),m.qZA(),m.TgZ(47,"div",32)(48,"div",6)(49,"div",7)(50,"span",8),m._UZ(51,"system-stencil"),m.qZA()(),m.TgZ(52,"section",9)(53,"div",10)(54,"div",11)(55,"div",12),m._UZ(56,"system-icon",13),m.qZA()(),m.TgZ(57,"div",14)(58,"div",15)(59,"div",16)(60,"header",17)(61,"h2",18),m._UZ(62,"system-stencil"),m.qZA()(),m.TgZ(63,"p",19),m._UZ(64,"system-stencil"),m.qZA()()(),m._UZ(65,"system-icon",20),m.qZA()()()()()(),m.TgZ(66,"div",2)(67,"div",4),m._UZ(68,"div",5),m.qZA(),m.TgZ(69,"div",32)(70,"div",6)(71,"div",7)(72,"span",8),m._UZ(73,"system-stencil"),m.qZA()(),m.TgZ(74,"section",9)(75,"div",10)(76,"div",11)(77,"div",12),m._UZ(78,"system-icon",13),m.qZA()(),m.TgZ(79,"div",14)(80,"div",15)(81,"div",16)(82,"header",17)(83,"h2",18),m._UZ(84,"system-stencil"),m.qZA()(),m.TgZ(85,"p",19),m._UZ(86,"system-stencil"),m.qZA()()(),m._UZ(87,"system-icon",20),m.qZA()()()()()(),m.TgZ(88,"div",2)(89,"div",4),m._UZ(90,"div",5),m.qZA(),m.TgZ(91,"div",32)(92,"div",6)(93,"div",7)(94,"span",8),m._UZ(95,"system-stencil"),m.qZA()(),m.TgZ(96,"section",9)(97,"div",10)(98,"div",11)(99,"div",12),m._UZ(100,"system-icon",13),m.qZA()(),m.TgZ(101,"div",14)(102,"div",15)(103,"div",16)(104,"header",17)(105,"h2",18),m._UZ(106,"system-stencil"),m.qZA()(),m.TgZ(107,"p",19),m._UZ(108,"system-stencil"),m.qZA()()(),m._UZ(109,"system-icon",20),m.qZA()()()()()()),2&e&&(m.xp6(21),m.Q6J("icon","down"),m.xp6(22),m.Q6J("icon","down"),m.xp6(22),m.Q6J("icon","down"),m.xp6(22),m.Q6J("icon","down"),m.xp6(22),m.Q6J("icon","down"))}let Kd=(()=>{var e;class ObjectTimelineStencil{constructor(e){(0,i.Z)(this,"timeline",void 0),this.timeline=e}}return e=ObjectTimelineStencil,(0,i.Z)(ObjectTimelineStencil,"ɵfac",(function(t){return new(t||e)(m.Y36(za))})),(0,i.Z)(ObjectTimelineStencil,"ɵcmp",m.Xpm({type:e,selectors:[["object-timeline-stencil"]],decls:3,vars:2,consts:[[4,"ngIf","ngIfElse"],["smallview",""],[1,"slds-grid","slds-m-right--small",2,"height","125px"],[2,"width","calc(50% - 2px)"],[1,"slds-height_full","slds-size--2-of-12",2,"width","4px"],[1,"slds-color__background_gray-9","slds-height_full","slds-align--absolute-center",2,"width","2px"],[1,"slds-grid","slds-grid"],[1,"slds-align--absolute-center","slds-m-horizontal--none",2,"width","70px"],[2,"width","30px","overflow","hidden"],[1,"slds-m-vertical--medium","slds-popover","slds-height_full","slds-nubbin--left",2,"width","calc(100% - 70px)"],[1,"slds-popover__body","slds-grid",2,"height","90px"],[1,"slds-grid","slds-grid--vertical","slds-grid--vertical-align-center",2,"width","32px"],[1,"slds-m-horizontal--xx-small",2,"width","32px"],["icon","generic_loading"],[1,"slds-grid","slds-grid--align-spread","slds-size--7-of-8",2,"width","calc(100% - 32px)"],[1,"slds-m-horizontal--small","slds-media","slds-left--small","slds-size--1-of-1"],[1,"slds-media__body","slds-size--1-of-1"],[1,"slds-p-left--none","slds-popover__header","slds-p-top--none","slds-size--3-of-5",2,"border","0"],[1,"slds-text-heading_medium"],[1,"slds-size--2-of-5"],[3,"icon"],[1,"slds-grid","slds-m-right--small",2,"height","125px","opacity","0.8"],[1,"slds-grid","slds-grid","slds-grid--align-end"],[1,"slds-m-vertical--medium","slds-popover","slds-height_full","slds-nubbin--right",2,"width","calc(100% - 70px)"],[1,"slds-popover__body","slds-grid","slds-grid--align-spread",2,"height","90px"],[1,"slds-height_full",2,"width","4px"],[1,"slds-grid","slds-m-right--small",2,"height","125px","opacity","0.6"],["icon","down"],[1,"slds-grid","slds-m-right--small",2,"height","125px","opacity","0.4"],[1,"slds-grid","slds-m-right--small",2,"height","125px","opacity","0.2"],[1,"slds-popover__body","slds-grid","slds-size--1-of-1",2,"height","90px"],[1,"slds-button","slds-button--icon-border-filled","slds-button--icon-x-small"],[2,"width","calc(100% - 2px)"]],template:function(e,t){if(1&e&&(m.YNc(0,zd,117,3,"div",0),m.YNc(1,Vd,110,5,"ng-template",null,1,m.W1O)),2&e){const e=m.MAs(2);m.Q6J("ngIf",!t.timeline.smartView)("ngIfElse",e)}},dependencies:[n.O5,w.J,T.f,la.B],encapsulation:2})),ObjectTimelineStencil})();const $d=["detailContainer"];let Xd=(()=>{var e;class ObjecttimelineFullScreenDetail{constructor(e,t,s,n,o,l){(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"parent",void 0),(0,i.Z)(this,"model",void 0),(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"timeline",void 0),(0,i.Z)(this,"activatedRoute",void 0),(0,i.Z)(this,"detailContainer",void 0),(0,i.Z)(this,"module",void 0),(0,i.Z)(this,"id",void 0),(0,i.Z)(this,"data",void 0),(0,i.Z)(this,"componentRefs",[]),this.metadata=e,this.parent=t,this.model=s,this.language=n,this.timeline=o,this.activatedRoute=l}ngOnChanges(){this.model.module=this.module,this.model.id=this.id,this.model.setData(this.data);for(let e of this.componentRefs)e.destroy();let e=this.metadata.getComponentConfig("ObjectTimelineFullScreen",this.module);if(e&&e.componentset)for(let t of e.componentset)for(let e of this.metadata.getComponentSetObjects(t))this.metadata.addComponent(e.component,this.detailContainer).subscribe((t=>{t.instance.componentconfig=e.componentconfig,this.componentRefs.push(t)}))}}return e=ObjecttimelineFullScreenDetail,(0,i.Z)(ObjecttimelineFullScreenDetail,"ɵfac",(function(t){return new(t||e)(m.Y36(v.Pu),m.Y36(p.o),m.Y36(p.o),m.Y36(g.d),m.Y36(za),m.Y36(a.gz))})),(0,i.Z)(ObjecttimelineFullScreenDetail,"ɵcmp",m.Xpm({type:e,selectors:[["object-timeline-full-screen-detail"]],viewQuery:function(e,t){if(1&e&&m.Gf($d,7,m.s_b),2&e){let e;m.iGM(e=m.CRH())&&(t.detailContainer=e.first)}},inputs:{module:"module",id:"id",data:"data"},features:[m._Bn([p.o]),m.TTD],decls:14,vars:3,consts:[[1,"slds-border_bottom","slds-p-around--medium","slds-theme--shade"],[1,"slds-grid"],[1,"slds-col","slds-has-flexi-truncate"],[1,"slds-media","slds-no-space","slds-grow"],[3,"module"],[1,"slds-media__body"],[1,"slds-text-title--caps","slds-line-height--reset"],[1,"slds-page-header__title","slds-m-right--small","slds-align-middle","slds-truncate"],[1,"slds-p-around--xx-small"],["detailContainer",""]],template:function(e,t){1&e&&(m.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),m._UZ(4,"system-icon",4),m.TgZ(5,"div",5)(6,"p",6),m._UZ(7,"system-label-modulename",4),m.qZA(),m.TgZ(8,"div")(9,"h1",7),m._uU(10),m.qZA()()()()()()(),m.TgZ(11,"div",8),m._UZ(12,"div",null,9),m.qZA()),2&e&&(m.xp6(4),m.Q6J("module",t.model.module),m.xp6(3),m.Q6J("module",t.model.module),m.xp6(3),m.hij(" ",t.model.data.name,""))},dependencies:[T.f,Xi.M],encapsulation:2})),ObjecttimelineFullScreenDetail})();function Wd(e,t){if(1&e&&(m.TgZ(0,"tr")(1,"td",11)(2,"div",6),m._uU(3),m.qZA()(),m.TgZ(4,"td",11)(5,"div",6),m._uU(6),m.qZA()(),m.TgZ(7,"td",11)(8,"div",6),m._uU(9),m.qZA()()()),2&e){const e=t.$implicit,s=m.oxw(2);m.xp6(3),m.hij("",s.language.getFieldDisplayName(s.model.module,e.field_name)," "),m.xp6(3),m.Oqu(e.before_value_string),m.xp6(3),m.Oqu(e.after_value_string)}}function er(e,t){if(1&e&&(m.TgZ(0,"table",1)(1,"thead")(2,"tr")(3,"td",2)(4,"div",3),m._uU(5),m.qZA()()(),m.TgZ(6,"tr",4)(7,"th",5)(8,"div",6),m._UZ(9,"system-label",7),m.qZA()(),m.TgZ(10,"th",5)(11,"div",6),m._UZ(12,"system-label",8),m.qZA()(),m.TgZ(13,"th",5)(14,"div",6),m._UZ(15,"system-label",9),m.qZA()()()(),m.TgZ(16,"tbody"),m.YNc(17,Wd,10,3,"tr",10),m.qZA()()),2&e){const e=m.oxw();m.xp6(5),m.AsE(" ",e.auditLog.user_name," / ",e.auditLog.date," "),m.xp6(12),m.Q6J("ngForOf",e.auditLog.data)}}let tr=(()=>{var e;class ObjectTimelineAuditDetail{constructor(e,t,s){(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"model",void 0),(0,i.Z)(this,"auditLog",void 0),(0,i.Z)(this,"loading",!0),this.language=e,this.metadata=t,this.model=s}ngOnChanges(){this.loading=!1}}return e=ObjectTimelineAuditDetail,(0,i.Z)(ObjectTimelineAuditDetail,"ɵfac",(function(t){return new(t||e)(m.Y36(g.d),m.Y36(v.Pu),m.Y36(p.o,8))})),(0,i.Z)(ObjectTimelineAuditDetail,"ɵcmp",m.Xpm({type:e,selectors:[["object-timeline-audit-detail"]],inputs:{auditLog:"auditLog"},features:[m.TTD],decls:2,vars:1,consts:[["class","slds-table slds-table--bordered slds-table--cell-buffer",4,"ngIf"],[1,"slds-table","slds-table--bordered","slds-table--cell-buffer"],["colspan","3",1,"slds-theme--shade"],[1,"slds-text-heading--label"],[1,"slds-text-title--caps"],["scope","col"],[1,"slds-truncate"],["label","LBL_FIELD"],["label","LBL_BEFOREVALUE"],["label","LBL_AFTERVALUE"],[4,"ngFor","ngForOf"],["scope","row"]],template:function(e,t){1&e&&(m.TgZ(0,"div"),m.YNc(1,er,18,3,"table",0),m.qZA()),2&e&&(m.xp6(1),m.Q6J("ngIf",!t.loading))},dependencies:[n.sg,n.O5,S._],encapsulation:2})),ObjectTimelineAuditDetail})();const sr=["listContainer"];function ir(e,t){if(1&e){const e=m.EpF();m.TgZ(0,"system-input-delayed",27),m.NdJ("ngModelChange",(function(t){m.CHM(e);const s=m.oxw();return m.KtG(s.ftsSearchTerm=t)})),m.qZA()}if(2&e){const e=m.oxw();m.Q6J("placeholder",e.language.getLabel("LBL_SEARCH"))("ngModel",e.ftsSearchTerm)}}function nr(e,t){if(1&e&&(m.TgZ(0,"li"),m._UZ(1,"object-timeline-item-line",32),m.qZA()),2&e){const e=t.$implicit,s=t.index;m.xp6(1),m.Q6J("Record",e)("index",s)}}function or(e,t){1&e&&(m.TgZ(0,"li",33),m._UZ(1,"system-spinner"),m.qZA())}function lr(e,t){if(1&e&&(m.TgZ(0,"ul"),m.YNc(1,nr,2,2,"li",30),m.YNc(2,or,2,0,"li",31),m.qZA()),2&e){const e=m.oxw(2);m.xp6(1),m.Q6J("ngForOf",e.timeline.records)("ngForTrackBy",e.trackByFunction),m.xp6(1),m.Q6J("ngIf",e.timeline.loadingMore)}}function ar(e,t){if(1&e&&(m.TgZ(0,"div",28),m.YNc(1,lr,3,3,"ul",29),m.qZA()),2&e){const e=m.oxw(),t=m.MAs(42);m.xp6(1),m.Q6J("ngIf",0!==e.timeline.records.length)("ngIfElse",t)}}function dr(e,t){if(1&e&&m._UZ(0,"object-timeline-full-screen-detail",36),2&e){const e=m.oxw(2);m.Q6J("module",e.timeline.recordModule)("id",e.timeline.recordId)("data",e.timeline.recordData)}}function rr(e,t){if(1&e&&(m.TgZ(0,"div",34),m.YNc(1,dr,1,3,"object-timeline-full-screen-detail",35),m.qZA()),2&e){const e=m.oxw(),t=m.MAs(38);m.xp6(1),m.Q6J("ngIf","Audit"!==e.timeline.recordModule)("ngIfElse",t)}}function cr(e,t){if(1&e&&m._UZ(0,"object-timeline-audit-detail",37),2&e){const e=m.oxw();m.Q6J("auditLog",e.timeline.recordData)}}function ur(e,t){1&e&&m._UZ(0,"object-timeline-stencil")}function hr(e,t){1&e&&(m.TgZ(0,"div",38),m._UZ(1,"system-illustration-no-records",39),m.qZA())}const mr=function(e,t){return{"slds-p-horizontal--small":e,"slds-p-left--small":t}};let gr=(()=>{var e;class ObjectTimelineFullScreen{constructor(e,t,s,n,o){(0,i.Z)(this,"timeline",void 0),(0,i.Z)(this,"parent",void 0),(0,i.Z)(this,"navigationTab",void 0),(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"layout",void 0),(0,i.Z)(this,"listContainer",void 0),(0,i.Z)(this,"dateInput",void 0),this.timeline=e,this.parent=t,this.navigationTab=s,this.language=n,this.layout=o}get parentName(){return this.parent.getField("name")}get displayDetailsPanel(){return"small"!=this.layout.screenwidth}get ftsSearchTerm(){return this.timeline.filters.searchterm}set ftsSearchTerm(e){this.timeline.filters.searchterm=e,this.timeline.reload()}get date(){return this.timeline.timeRangeStart}set date(e){this.timeline.timeRangeStart=e,this.timeline.reload()}trackByFunction(e,t){return t.id}ngOnInit(){this.onResize(),this.dateInput=this.timeline.startDate,this.initialize(this.navigationTab.activeRoute.params),this.timeline.getTimelineData()}ngAfterViewInit(){this.onResize()}goModule(){this.parent.goModule()}goModel(){this.parent.goDetail()}initialize(e){this.parent.module=e.module,this.parent.id=e.id,this.timeline.parent=this.parent,this.parent.getData(!0,"",!0).subscribe((e=>{this.timeline.parent.setData(e),this.navigationTab.setTabInfo({displayname:this.parent.getField("summary_text")+" • timeline"})}))}onScroll(e){let t=this.listContainer.element.nativeElement;t.scrollTop+t.clientHeight+50>t.scrollHeight&&this.timeline.canLoadMore()&&this.timeline.loadMore()}reload(){this.timeline.reload(),this.timeline.clearRecord()}onResize(){this.timeline.smartView=this.listContainer.element.nativeElement.clientWidth<742,this.timeline.smartFontSize=this.listContainer.element.nativeElement.clientWidth<413}}return e=ObjectTimelineFullScreen,(0,i.Z)(ObjectTimelineFullScreen,"ɵfac",(function(t){return new(t||e)(m.Y36(za),m.Y36(p.o),m.Y36(Te.d),m.Y36(g.d),m.Y36(x.b))})),(0,i.Z)(ObjectTimelineFullScreen,"ɵcmp",m.Xpm({type:e,selectors:[["object-timeline-full-screen"]],viewQuery:function(e,t){if(1&e&&m.Gf(sr,7,m.s_b),2&e){let e;m.iGM(e=m.CRH())&&(t.listContainer=e.first)}},hostBindings:function(e,t){1&e&&m.NdJ("resize",(function(e){return t.onResize(e)}),!1,m.Jf7)},features:[m._Bn([za,p.o])],decls:43,vars:13,consts:[[1,"slds-page-header","slds-grid","slds-grid--align-spread"],[1,"slds-col"],["role","navigation","aria-label","Breadcrumbs"],[1,"slds-breadcrumb","slds-list_horizontal","slds-wrap"],[1,"slds-breadcrumb__item","slds-text-title_caps"],["href","javascript:void(0);",3,"click"],[3,"module"],[1,"slds-p-horizontal--x-small"],["label","LBL_TIMELINE"],[1,"slds-p-vertical--xx-small","slds-text-heading--x-small"],[1,"slds-p-horizontal--xx-small"],[1,"slds-page-header__col-actions","slds-grid"],["delay","1000",3,"placeholder","ngModel","ngModelChange",4,"ngIf"],[1,"slds-page-header__controls"],[1,"slds-page-header__control"],[3,"disabled","ngModel","ngModelChange"],[1,"slds-align--absolute-center","slds-button","slds-button--icon","slds-button--icon-border-filled"],[1,"slds-button","slds-button--icon","slds-button--icon-border-filled"],["icon","refresh",3,"click"],[1,"slds-grid"],["system-to-bottom","",1,"slds-size--1-of-1","slds-medium-size--5-of-12","slds-border--right","slds-scrollable",3,"ngClass","scroll"],["listContainer",""],["class","slds-height_full",4,"ngIf","ngIfElse"],["class","slds-size--7-of-12","system-to-bottom","",4,"ngIf"],["auditpanel",""],["currentlyloading",""],["nocontent",""],["delay","1000",3,"placeholder","ngModel","ngModelChange"],[1,"slds-height_full"],[4,"ngIf","ngIfElse"],[4,"ngFor","ngForOf","ngForTrackBy"],["class","slds-p-top--large",4,"ngIf"],[3,"Record","index"],[1,"slds-p-top--large"],["system-to-bottom","",1,"slds-size--7-of-12"],[3,"module","id","data",4,"ngIf","ngIfElse"],[3,"module","id","data"],[3,"auditLog"],[1,"slds-p-top_large"],[1,"slds-m-top_large"]],template:function(e,t){if(1&e&&(m.TgZ(0,"div",0)(1,"div",1)(2,"nav",2)(3,"ol",3)(4,"li",4)(5,"a",5),m.NdJ("click",(function(){return t.goModule()})),m._UZ(6,"system-label-modulename",6),m.qZA()(),m.TgZ(7,"li",4)(8,"a",5),m.NdJ("click",(function(){return t.goModel()})),m._uU(9),m.qZA()(),m.TgZ(10,"li",4)(11,"span",7),m._UZ(12,"system-label",8),m.qZA()()()(),m.TgZ(13,"div",9)(14,"span"),m._uU(15),m.qZA(),m.TgZ(16,"span",10),m._uU(17,"records found "),m.qZA()()(),m.TgZ(18,"div",11),m.YNc(19,ir,1,2,"system-input-delayed",12),m.TgZ(20,"div",13),m._UZ(21,"div",14),m.qZA(),m.TgZ(22,"div",13)(23,"div",14)(24,"system-input-date",15),m.NdJ("ngModelChange",(function(e){return t.date=e})),m.qZA()()(),m.TgZ(25,"div",13)(26,"div",14),m._UZ(27,"object-timeline-filter",16),m.qZA()(),m.TgZ(28,"div",13)(29,"div",14)(30,"button",17)(31,"system-button-icon",18),m.NdJ("click",(function(){return t.reload()})),m.qZA()()()()()(),m.TgZ(32,"div",19)(33,"div",20,21),m.NdJ("scroll",(function(e){return t.onScroll(e)})),m.YNc(35,ar,2,2,"div",22),m.qZA(),m.YNc(36,rr,2,2,"div",23),m.qZA(),m.YNc(37,cr,1,1,"ng-template",null,24,m.W1O),m.YNc(39,ur,1,0,"ng-template",null,25,m.W1O),m.YNc(41,hr,2,0,"ng-template",null,26,m.W1O)),2&e){const e=m.MAs(40);m.xp6(6),m.Q6J("module",t.parent.module),m.xp6(3),m.Oqu(t.parent.data.summary_text),m.xp6(6),m.Oqu(t.timeline.totalRecords),m.xp6(4),m.Q6J("ngIf",!t.timeline.onlyAudits),m.xp6(5),m.Q6J("disabled",t.timeline.loading)("ngModel",t.date),m.xp6(9),m.Q6J("ngClass",m.WLB(10,mr,!t.timeline.smartView,t.timeline.smartView)),m.xp6(2),m.Q6J("ngIf",!t.timeline.loading)("ngIfElse",e),m.xp6(1),m.Q6J("ngIf",t.displayDetailsPanel&&!!t.timeline.recordModule)}},dependencies:[n.mk,n.sg,n.O5,l.JJ,l.On,w.J,fd.C,bd.z,vd.y,S._,Xi.M,Jt.W,E.H,Hd,Kd,pd,Xd,tr],encapsulation:2})),ObjectTimelineFullScreen})();const pr=["timelinecontent"];function fr(e,t){if(1&e&&(m.TgZ(0,"li"),m._UZ(1,"object-timeline-item-line",19),m.qZA()),2&e){const e=t.$implicit,s=t.index;m.xp6(1),m.Q6J("Record",e)("index",s)}}function br(e,t){1&e&&(m.TgZ(0,"li",20),m._UZ(1,"system-spinner"),m.qZA())}function vr(e,t){if(1&e&&(m.TgZ(0,"ul"),m.YNc(1,fr,2,2,"li",17),m.YNc(2,br,2,0,"li",18),m.qZA()),2&e){const e=m.oxw(2);m.xp6(1),m.Q6J("ngForOf",e.timeline.records)("ngForTrackBy",e.trackByFunction),m.xp6(1),m.Q6J("ngIf",e.timeline.loadingMore)}}function Zr(e,t){if(1&e&&(m.TgZ(0,"div",15),m.YNc(1,vr,3,3,"ul",16),m.qZA()),2&e){const e=m.oxw(),t=m.MAs(18);m.xp6(1),m.Q6J("ngIf",0!==e.timeline.records.length)("ngIfElse",t)}}function _r(e,t){if(1&e){const e=m.EpF();m.TgZ(0,"button",21),m.NdJ("click",(function(){m.CHM(e);const t=m.oxw();return m.KtG(t.timeline.loadMore())})),m.TgZ(1,"span"),m._UZ(2,"system-label",22),m.qZA()()}}function yr(e,t){1&e&&(m.TgZ(0,"div",23),m._UZ(1,"system-illustration-no-records"),m.qZA())}function xr(e,t){1&e&&m._UZ(0,"object-timeline-stencil")}const wr=function(e,t){return{"slds-p-horizontal--small":e,"slds-p-left--small":t}};let Tr=(()=>{var e;class ObjectTimeline{constructor(e,t,s,n,o){(0,i.Z)(this,"element",void 0),(0,i.Z)(this,"timeline",void 0),(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"model",void 0),(0,i.Z)(this,"el",void 0),(0,i.Z)(this,"content",void 0),(0,i.Z)(this,"loading",void 0),(0,i.Z)(this,"loadingMore",void 0),(0,i.Z)(this,"hasRecords",void 0),this.element=e,this.timeline=t,this.language=s,this.model=n,this.el=o}ngOnInit(){this.timeline.parent=this.model,this.timeline.getTimelineData()}ngAfterViewInit(){this.onResize()}reload(){this.timeline.reload()}trackByFunction(e,t){return t.id}get ftsSearchTerm(){return this.timeline.filters.searchterm}set ftsSearchTerm(e){this.timeline.filters.searchterm=e,this.timeline.reload()}closeDialog(){this.timeline.reload()}get date(){return this.timeline.timeRangeStart}set date(e){this.timeline.timeRangeStart=e,this.timeline.reload()}onResize(){this.timeline.smartView=this.el.nativeElement.getBoundingClientRect().width<730,this.timeline.smartFontSize=this.el.nativeElement.getBoundingClientRect().width<380}}return e=ObjectTimeline,(0,i.Z)(ObjectTimeline,"ɵfac",(function(t){return new(t||e)(m.Y36(m.SBq),m.Y36(za),m.Y36(g.d),m.Y36(p.o),m.Y36(m.SBq))})),(0,i.Z)(ObjectTimeline,"ɵcmp",m.Xpm({type:e,selectors:[["object-timeline"]],viewQuery:function(e,t){if(1&e&&m.Gf(pr,5),2&e){let e;m.iGM(e=m.CRH())&&(t.content=e.first)}},hostBindings:function(e,t){1&e&&m.NdJ("resize",(function(e){return t.onResize(e)}),!1,m.Jf7)},features:[m._Bn([Fe.e,za])],decls:21,vars:13,consts:[[1,"slds-grid","slds-grid--vertical-align-center","slds-grid--align-end"],["timelineheader",""],[3,"disabled","ngModel","ngModelChange"],["delay","1000",1,"slds-p-horizontal--xx-small",3,"placeholder","ngModel","ngModelChange"],[1,"slds-button","slds-button--icon",3,"title","click"],["icon","refresh",1,"slds-p-horizontal--xxx-small","slds-icon-text-default"],[1,"slds-is-relative","spiceActivitiyTimelineHeader"],[1,"slds-p-vertical--xx-small","slds-text-heading--x-small"],[1,"slds-p-horizontal--xx-small"],[1,"slds-size--1-of-1","slds-border--right",3,"ngClass"],["class","slds-height_full",4,"ngIf","ngIfElse"],[1,"slds-align--absolute-center","slds-m-top--x-large","slds-m-right--small"],["class","slds-button slds-button--neutral","type","button",3,"click",4,"ngIf"],["norecords",""],["loading",""],[1,"slds-height_full"],[4,"ngIf","ngIfElse"],[4,"ngFor","ngForOf","ngForTrackBy"],["class","slds-m-top--xx-large slds-p-top--medium",4,"ngIf"],[3,"Record","index"],[1,"slds-m-top--xx-large","slds-p-top--medium"],["type","button",1,"slds-button","slds-button--neutral",3,"click"],["label","LBL_MORE"],[1,"slds-p-top--large"]],template:function(e,t){if(1&e&&(m.TgZ(0,"div",0,1)(2,"system-input-date",2),m.NdJ("ngModelChange",(function(e){return t.date=e})),m.qZA(),m.TgZ(3,"system-input-delayed",3),m.NdJ("ngModelChange",(function(e){return t.ftsSearchTerm=e})),m.qZA(),m.TgZ(4,"button",4),m.NdJ("click",(function(){return t.reload()})),m._UZ(5,"system-button-icon",5),m.qZA(),m._UZ(6,"object-timeline-filter"),m.qZA(),m.TgZ(7,"div",6)(8,"div",7)(9,"span"),m._uU(10),m.qZA(),m.TgZ(11,"span",8),m._uU(12,"records found "),m.qZA()()(),m.TgZ(13,"div",9),m.YNc(14,Zr,2,2,"div",10),m.qZA(),m.TgZ(15,"div",11),m.YNc(16,_r,3,0,"button",12),m.qZA(),m.YNc(17,yr,2,0,"ng-template",null,13,m.W1O),m.YNc(19,xr,1,0,"ng-template",null,14,m.W1O)),2&e){const e=m.MAs(20);m.xp6(2),m.Q6J("disabled",t.timeline.loading)("ngModel",t.date),m.xp6(1),m.Q6J("placeholder",t.language.getLabel("LBL_SEARCH"))("ngModel",t.ftsSearchTerm),m.xp6(1),m.Q6J("title",t.language.getLabel("LBL_RELOAD")),m.xp6(6),m.Oqu(t.timeline.totalRecords),m.xp6(3),m.Q6J("ngClass",m.WLB(10,wr,!t.timeline.smartView,t.timeline.smartView)),m.xp6(1),m.Q6J("ngIf",!t.timeline.loading)("ngIfElse",e),m.xp6(2),m.Q6J("ngIf",t.timeline.canLoadMore()&&!t.timeline.loadingMore)}},dependencies:[n.mk,n.sg,n.O5,l.JJ,l.On,w.J,fd.C,bd.z,vd.y,S._,Jt.W,Hd,Kd,pd],encapsulation:2})),ObjectTimeline})();function Cr(e,t){1&e&&m._UZ(0,"system-spinner",8)}function Ar(e,t){if(1&e&&(m.TgZ(0,"tr")(1,"td",19)(2,"div",14),m._uU(3),m.qZA()(),m.TgZ(4,"td",19)(5,"div",14),m._uU(6),m.qZA()(),m.TgZ(7,"td",19)(8,"div",14),m._uU(9),m.qZA()()()),2&e){const e=t.$implicit,s=m.oxw(2);m.xp6(3),m.hij("",s.language.getFieldDisplayName(s.model.module,e.field_name)," "),m.xp6(3),m.Oqu(e.before_value_string),m.xp6(3),m.Oqu(e.after_value_string)}}function kr(e,t){if(1&e&&(m.TgZ(0,"table",9)(1,"thead")(2,"tr")(3,"td",10)(4,"div",11),m._uU(5),m.qZA()()(),m.TgZ(6,"tr",12)(7,"th",13)(8,"div",14),m._UZ(9,"system-label",15),m.qZA()(),m.TgZ(10,"th",13)(11,"div",14),m._UZ(12,"system-label",16),m.qZA()(),m.TgZ(13,"th",13)(14,"div",14),m._UZ(15,"system-label",17),m.qZA()()()(),m.TgZ(16,"tbody"),m.YNc(17,Ar,10,3,"tr",18),m.qZA()()),2&e){const e=m.oxw();m.xp6(5),m.AsE(" ",e.auditLog.user_name," / ",e.auditLog.date," "),m.xp6(12),m.Q6J("ngForOf",e.auditLog.data)}}let Lr=(()=>{var e;class ObjectTimelineAuditlogModal{constructor(e,t,s){(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"model",void 0),(0,i.Z)(this,"self",null),(0,i.Z)(this,"auditLog",void 0),(0,i.Z)(this,"loading",!0),(0,i.Z)(this,"moduleFields",[]),this.language=e,this.metadata=t,this.model=s}ngOnInit(){for(let e in this.metadata.getModuleFields(this.model.module))this.moduleFields.push({name:e,display:this.language.getFieldDisplayName(this.model.module,e)});this.moduleFields.sort(((e,t)=>e.display.toLowerCase()>t.display.toLowerCase()?1:-1)),this.loading=!1}hideAuditLog(){this.self.destroy()}}return e=ObjectTimelineAuditlogModal,(0,i.Z)(ObjectTimelineAuditlogModal,"ɵfac",(function(t){return new(t||e)(m.Y36(g.d),m.Y36(v.Pu),m.Y36(p.o,8))})),(0,i.Z)(ObjectTimelineAuditlogModal,"ɵcmp",m.Xpm({type:e,selectors:[["object-timeline-auditlog-modal"]],decls:9,vars:2,consts:[["size","large"],[3,"close"],["label","LBL_LOGGED_CHANGES"],["margin","none"],["class","slds-p-around--medium",4,"ngIf"],["class","slds-table slds-table--bordered slds-table--cell-buffer",4,"ngIf"],[1,"slds-button","slds-button--brand",3,"click"],["label","LBL_CLOSE"],[1,"slds-p-around--medium"],[1,"slds-table","slds-table--bordered","slds-table--cell-buffer"],["colspan","3",1,"slds-theme--shade"],[1,"slds-text-heading--label"],[1,"slds-text-title--caps"],["scope","col"],[1,"slds-truncate"],["label","LBL_FIELD"],["label","LBL_BEFOREVALUE"],["label","LBL_AFTERVALUE"],[4,"ngFor","ngForOf"],["scope","row"]],template:function(e,t){1&e&&(m.TgZ(0,"system-modal",0)(1,"system-modal-header",1),m.NdJ("close",(function(){return t.hideAuditLog()})),m._UZ(2,"system-label",2),m.qZA(),m.TgZ(3,"system-modal-content",3),m.YNc(4,Cr,1,0,"system-spinner",4),m.YNc(5,kr,18,3,"table",5),m.qZA(),m.TgZ(6,"system-modal-footer")(7,"button",6),m.NdJ("click",(function(){return t.hideAuditLog()})),m._UZ(8,"system-label",7),m.qZA()()()),2&e&&(m.xp6(4),m.Q6J("ngIf",t.loading),m.xp6(1),m.Q6J("ngIf",!t.loading))},dependencies:[n.sg,n.O5,S._,Ee.j,Ye.x,De.p,Qe.y,Jt.W],encapsulation:2})),ObjectTimelineAuditlogModal})();const Ir=["object-popover-body-item",""];function Mr(e,t){1&e&&m._UZ(0,"system-spinner")}function Sr(e,t){if(1&e&&(m.TgZ(0,"div",10)(1,"dl")(2,"dt"),m._UZ(3,"field-label",11),m.qZA(),m.TgZ(4,"dd"),m._UZ(5,"field-container",12),m.qZA()()()),2&e){const e=t.$implicit;m.xp6(3),m.Q6J("fieldname",e.field)("fieldconfig",e.fieldconfig),m.xp6(2),m.Q6J("field",e.field)("fieldconfig",e.fieldconfig)("fielddisplayclass","slds-truncate")}}function Jr(e,t){if(1&e&&(m.TgZ(0,"div",8),m.YNc(1,Sr,6,5,"div",9),m.qZA()),2&e){const e=m.oxw();m.xp6(1),m.Q6J("ngForOf",e.fields)}}let Or=(()=>{var e;class ObjectPopoverBodyItem{constructor(e,t,s){(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"model",void 0),(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"module",""),(0,i.Z)(this,"id",""),(0,i.Z)(this,"modelIsLoading",!0),(0,i.Z)(this,"fields",[]),this.language=e,this.model=t,this.metadata=s}ngOnInit(){this.model.module=this.module,this.model.id=this.id,this.modelIsLoading=!0,this.model.getData(!0).subscribe((e=>{this.modelIsLoading=!1}));let e=this.metadata.getComponentConfig("ObjectPopoverBodyItem",this.model.module);e.fieldset&&(this.fields=this.metadata.getFieldSetFields(e.fieldset))}}return e=ObjectPopoverBodyItem,(0,i.Z)(ObjectPopoverBodyItem,"ɵfac",(function(t){return new(t||e)(m.Y36(g.d),m.Y36(p.o),m.Y36(v.Pu))})),(0,i.Z)(ObjectPopoverBodyItem,"ɵcmp",m.Xpm({type:e,selectors:[["","object-popover-body-item",""]],hostAttrs:[1,"slds-popover__body-list"],inputs:{module:"module",id:"id"},features:[m._Bn([p.o,Fe.e])],attrs:Ir,decls:9,vars:4,consts:[[1,"slds-media","slds-m-bottom--small","slds-media--center"],[1,"slds-media__figure"],[3,"module"],[1,"slds-media__body"],[4,"ngIf"],[1,"slds-text-heading--medium","slds-truncate"],["href","javascript:void(0);",3,"click"],["class","slds-grid slds-wrap slds-grid--pull-padded",4,"ngIf"],[1,"slds-grid","slds-wrap","slds-grid--pull-padded"],["class","slds-p-horizontal--small slds-size--1-of-2 slds-p-bottom--x-small",4,"ngFor","ngForOf"],[1,"slds-p-horizontal--small","slds-size--1-of-2","slds-p-bottom--x-small"],[3,"fieldname","fieldconfig"],[3,"field","fieldconfig","fielddisplayclass"]],template:function(e,t){1&e&&(m.TgZ(0,"div",0)(1,"div",1),m._UZ(2,"system-icon",2),m.qZA(),m.TgZ(3,"div",3),m.YNc(4,Mr,1,0,"system-spinner",4),m.TgZ(5,"p",5)(6,"a",6),m.NdJ("click",(function(){return t.model.goDetail()})),m._uU(7),m.qZA()()()(),m.YNc(8,Jr,2,1,"div",7)),2&e&&(m.xp6(2),m.Q6J("module",t.model.module),m.xp6(2),m.Q6J("ngIf",t.modelIsLoading),m.xp6(3),m.Oqu(t.model.data.summary_text),m.xp6(1),m.Q6J("ngIf",!t.modelIsLoading))},dependencies:[n.sg,n.O5,Ci.q,qe.j,T.f,Jt.W],encapsulation:2})),ObjectPopoverBodyItem})();const Nr=["object-popover-header",""];function Fr(e,t){if(1&e&&(m.TgZ(0,"div",8)(1,"dl")(2,"dt"),m._UZ(3,"field-label",9),m.qZA(),m.TgZ(4,"dd"),m._UZ(5,"field-container",10),m.qZA()()()),2&e){const e=t.$implicit;m.xp6(3),m.Q6J("fieldname",e.field)("fieldconfig",e.fieldconfig),m.xp6(2),m.Q6J("field",e.field)("fieldconfig",e.fieldconfig)("fielddisplayclass","slds-truncate")}}let qr=(()=>{var e;class ObjectPopoverHeader{constructor(e,t,s){(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"model",void 0),(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"fields",[]),this.language=e,this.model=t,this.metadata=s}ngOnInit(){let e=this.metadata.getComponentConfig("ObjectPopoverHeader",this.model.module);e.fieldset&&(this.fields=this.metadata.getFieldSetFields(e.fieldset))}}return e=ObjectPopoverHeader,(0,i.Z)(ObjectPopoverHeader,"ɵfac",(function(t){return new(t||e)(m.Y36(g.d),m.Y36(p.o),m.Y36(v.Pu))})),(0,i.Z)(ObjectPopoverHeader,"ɵcmp",m.Xpm({type:e,selectors:[["","object-popover-header",""]],hostAttrs:[1,"slds-popover__header"],features:[m._Bn([Fe.e])],attrs:Nr,decls:9,vars:3,consts:[[1,"slds-media","slds-m-bottom--small","slds-media--center"],[1,"slds-media__figure"],[3,"module"],[1,"slds-media__body"],[1,"slds-text-heading--medium","slds-hyphenate"],["href","javascript:void(0);",3,"click"],[1,"slds-grid","slds-wrap","slds-grid--pull-padded"],["class","slds-p-horizontal--small slds-size--1-of-2 slds-p-bottom--x-small",4,"ngFor","ngForOf"],[1,"slds-p-horizontal--small","slds-size--1-of-2","slds-p-bottom--x-small"],[3,"fieldname","fieldconfig"],[3,"field","fieldconfig","fielddisplayclass"]],template:function(e,t){1&e&&(m.TgZ(0,"div",0)(1,"div",1),m._UZ(2,"system-icon",2),m.qZA(),m.TgZ(3,"div",3)(4,"p",4)(5,"a",5),m.NdJ("click",(function(){return t.model.goDetail()})),m._uU(6),m.qZA()()()(),m.TgZ(7,"div",6),m.YNc(8,Fr,6,5,"div",7),m.qZA()),2&e&&(m.xp6(2),m.Q6J("module",t.model.module),m.xp6(4),m.Oqu(t.model.data.summary_text),m.xp6(2),m.Q6J("ngForOf",t.fields))},dependencies:[n.sg,Ci.q,qe.j,T.f],encapsulation:2})),ObjectPopoverHeader})();const Er=function(e){return{module:e,id:null,data:null}};function Yr(e,t){if(1&e&&(m.TgZ(0,"th",15),m._UZ(1,"field-label",16),m.qZA()),2&e){const e=t.$implicit,s=m.oxw(2);m.Q6J("system-model-provider",m.VKq(3,Er,s.module)),m.xp6(1),m.Q6J("fieldname",e.field)("fieldconfig",e.fieldconfig)}}function Dr(e,t){1&e&&(m.TgZ(0,"th"),m._UZ(1,"field-label",17),m.qZA())}function Qr(e,t){if(1&e&&(m.TgZ(0,"thead")(1,"tr"),m.YNc(2,Yr,2,5,"th",14),m.YNc(3,Dr,2,0,"th",8),m.qZA()()),2&e){const e=m.oxw();m.xp6(2),m.Q6J("ngForOf",e.listFields),m.xp6(1),m.Q6J("ngIf",0==e.listFields.length)}}function Ur(e,t){if(1&e){const e=m.EpF();m.TgZ(0,"td",22)(1,"system-checkbox",23),m.NdJ("ngModelChange",(function(t){m.CHM(e);const s=m.oxw().$implicit;return m.KtG(s.selected=t)})),m.qZA()()}if(2&e){const e=m.oxw().$implicit;m.xp6(1),m.Q6J("ngModel",e.selected)}}function Rr(e,t){if(1&e&&(m.TgZ(0,"td",24),m._UZ(1,"field-container",25),m.qZA()),2&e){const e=t.$implicit;m.xp6(1),m.Q6J("field",e.field)("fieldconfig",e.fieldconfig)}}function jr(e,t){1&e&&(m.TgZ(0,"td",24),m._UZ(1,"field-container",26),m.qZA())}const Br=function(e,t,s){return{module:e,id:t,data:s}};function Gr(e,t){if(1&e){const e=m.EpF();m.TgZ(0,"tr",18),m.NdJ("click",(function(){const t=m.CHM(e).$implicit,s=m.oxw();return m.KtG(s.onRowClick(t))})),m.YNc(1,Ur,2,1,"td",19),m.YNc(2,Rr,2,2,"td",20),m.YNc(3,jr,2,0,"td",21),m.qZA()}if(2&e){const e=t.$implicit,s=m.oxw();m.Udp("cursor",s.multiselect?"initial":"pointer"),m.Q6J("system-model-provider",m.kEZ(6,Br,s.module,e.id,e)),m.xp6(1),m.Q6J("ngIf",s.multiselect),m.xp6(1),m.Q6J("ngForOf",s.listFields),m.xp6(1),m.Q6J("ngIf",0==s.listFields.length)}}const Pr=function(e,t,s){return{"slds-no-row-hover":e,singleselect:t,"slds-table--header-fixed":s}};let Hr=(()=>{var e;class ObjectSelectBeanListModal{constructor(e,t,s,n){(0,i.Z)(this,"layout",void 0),(0,i.Z)(this,"model",void 0),(0,i.Z)(this,"view",void 0),(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"module",void 0),(0,i.Z)(this,"multiselect",!1),(0,i.Z)(this,"listFields",[]),(0,i.Z)(this,"listData",void 0),(0,i.Z)(this,"selectedIds$",new Ps.x),(0,i.Z)(this,"selectedIds",[]),(0,i.Z)(this,"self",void 0),this.layout=e,this.model=t,this.view=s,this.metadata=n}get smallView(){return"small"==this.layout.screenwidth}ngOnInit(){this.view.displayLabels=!1;const e=this.metadata.getComponentConfig("ObjectSelectBeanListModal",this.model.module);e&&(this.listFields=this.metadata.getFieldSetItems(e))}close(){this.selectedIds$.next(void 0),this.selectedIds$.complete(),this.self.destroy()}onRowClick(e){this.multiselect||(this.selectedIds=[e.id],this.confirmSelection())}confirmSelection(){this.selectedIds$.next(this.selectedIds),this.selectedIds$.complete(),this.self.destroy()}}return e=ObjectSelectBeanListModal,(0,i.Z)(ObjectSelectBeanListModal,"ɵfac",(function(t){return new(t||e)(m.Y36(x.b),m.Y36(p.o),m.Y36(Fe.e),m.Y36(v.Pu))})),(0,i.Z)(ObjectSelectBeanListModal,"ɵcmp",m.Xpm({type:e,selectors:[["object-select-bean-list-modal"]],features:[m._Bn([Fe.e])],decls:16,vars:9,consts:[["size","large"],[3,"close"],["label","LBL_MAKE_SELECTION"],["margin","none",3,"grow"],[1,"slds-height_full"],[1,"slds-is-relative"],[1,"slds-scrollable--y","slds-height_full"],["role","listbox",1,"slds-table","slds-table--fixed-layout","slds-table--bordered","slds-max-medium-table--stacked-horizontal",3,"ngClass"],[4,"ngIf"],["class","slds-hint-parent slds-p-horizontal--x-small",3,"system-model-provider","cursor","click",4,"ngFor","ngForOf"],[1,"slds-button","slds-button--neutral",3,"click"],["label","LBL_CANCEL"],[1,"slds-button","slds-button--brand",3,"disabled","click"],["label","LBL_SELECT"],["scope","col","class","slds-resizable",3,"system-model-provider",4,"ngFor","ngForOf"],["scope","col",1,"slds-resizable",3,"system-model-provider"],["addclasses","slds-truncate slds-p-vertical--xx-small slds-p-horizontal--x-small",3,"fieldname","fieldconfig"],["fieldname","name","addclasses","slds-truncate slds-p-vertical--xx-small slds-p-horizontal--x-small"],[1,"slds-hint-parent","slds-p-horizontal--x-small",3,"system-model-provider","click"],["role","gridcell","class","slds-show--medium",4,"ngIf"],["style","min-width: 2rem",4,"ngFor","ngForOf"],["style","min-width: 2rem",4,"ngIf"],["role","gridcell",1,"slds-show--medium"],[3,"ngModel","ngModelChange"],[2,"min-width","2rem"],["fielddisplayclass","slds-truncate slds-p-horizontal--x-small",3,"field","fieldconfig"],["field","name","fielddisplayclass","slds-truncate slds-p-horizontal--x-small"]],template:function(e,t){1&e&&(m.TgZ(0,"system-modal",0)(1,"system-modal-header",1),m.NdJ("close",(function(){return t.close()})),m._UZ(2,"system-label",2),m.qZA(),m.TgZ(3,"system-modal-content",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"table",7),m.YNc(8,Qr,4,2,"thead",8),m.TgZ(9,"tbody"),m.YNc(10,Gr,4,10,"tr",9),m.qZA()()()()()(),m.TgZ(11,"system-modal-footer")(12,"button",10),m.NdJ("click",(function(){return t.close()})),m._UZ(13,"system-label",11),m.qZA(),m.TgZ(14,"button",12),m.NdJ("click",(function(){return t.confirmSelection()})),m._UZ(15,"system-label",13),m.qZA()()()),2&e&&(m.xp6(3),m.Q6J("grow",!0),m.xp6(4),m.Q6J("ngClass",m.kEZ(5,Pr,t.multiselect,!t.multiselect,!t.smallView)),m.xp6(1),m.Q6J("ngIf",!t.smallView),m.xp6(2),m.Q6J("ngForOf",t.listData),m.xp6(4),m.Q6J("disabled",0==t.selectedIds.length))},dependencies:[n.mk,n.sg,n.O5,l.JJ,l.On,Ci.q,qe.j,ci.U,S._,Ee.j,Ye.x,De.p,Qe.y,Ks.u],encapsulation:2})),ObjectSelectBeanListModal})(),zr=(()=>{var e;class ObjectActionHelpTextButton{constructor(e,t,s,n){(0,i.Z)(this,"modal",void 0),(0,i.Z)(this,"injector",void 0),(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"toast",void 0),(0,i.Z)(this,"actionconfig",""),this.modal=e,this.injector=t,this.language=s,this.toast=n}execute(){this.actionconfig.helpLabel?this.modal.openModal("ObjectHelpTextModal",!0,this.injector).subscribe((e=>{""!=this.actionconfig&&(e.instance.helpLabel=this.actionconfig.helpLabel)})):this.toast.sendToast("LBL_HELP_LABEL_MISSING","error")}}return e=ObjectActionHelpTextButton,(0,i.Z)(ObjectActionHelpTextButton,"ɵfac",(function(t){return new(t||e)(m.Y36(K.o),m.Y36(m.zs3),m.Y36(g.d),m.Y36(pe.A))})),(0,i.Z)(ObjectActionHelpTextButton,"ɵcmp",m.Xpm({type:e,selectors:[["object-action-help-button"]],decls:2,vars:2,consts:[["size","small",3,"icon","title"]],template:function(e,t){1&e&&(m.TgZ(0,"span"),m._UZ(1,"system-utility-icon",0),m.qZA()),2&e&&(m.xp6(1),m.Q6J("icon","in_app_assistant")("title",t.language.getLabel("LBL_HELP_BUTTON")))},dependencies:[C.r],encapsulation:2})),ObjectActionHelpTextButton})(),Vr=(()=>{var e;class ObjectHelpTextModal{constructor(e,t){(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"model",void 0),(0,i.Z)(this,"self",void 0),(0,i.Z)(this,"translation",""),(0,i.Z)(this,"helpLabel",""),this.language=e,this.model=t}ngOnInit(){this.initialize()}initialize(){this.translation=this.language.getLabel(this.helpLabel,this.model.module,"long")}close(){this.self.destroy()}}return e=ObjectHelpTextModal,(0,i.Z)(ObjectHelpTextModal,"ɵfac",(function(t){return new(t||e)(m.Y36(g.d),m.Y36(p.o))})),(0,i.Z)(ObjectHelpTextModal,"ɵcmp",m.Xpm({type:e,selectors:[["object-help-text-modal"]],decls:9,vars:2,consts:[["size","medium"],[3,"close"],["label","LBL_HELPTEXT"],["length","long",3,"label"],[1,"slds-button","slds-button--neutral",3,"click"],["label","LBL_CANCEL"]],template:function(e,t){1&e&&(m.TgZ(0,"system-modal",0)(1,"system-modal-header",1),m.NdJ("close",(function(){return t.close()})),m._uU(2),m._UZ(3,"system-label",2),m.qZA(),m.TgZ(4,"system-modal-content"),m._UZ(5,"system-label",3),m.qZA(),m.TgZ(6,"system-modal-footer")(7,"button",4),m.NdJ("click",(function(){return t.close()})),m._UZ(8,"system-label",5),m.qZA()()()),2&e&&(m.xp6(2),m.hij("",t.model.module," "),m.xp6(3),m.s9C("label",t.translation))},dependencies:[S._,Ee.j,Ye.x,De.p,Qe.y],encapsulation:2})),ObjectHelpTextModal})(),Kr=(()=>{var e;class ObjectComponents{}return e=ObjectComponents,(0,i.Z)(ObjectComponents,"ɵfac",(function(t){return new(t||e)})),(0,i.Z)(ObjectComponents,"ɵmod",m.oAB({type:e})),(0,i.Z)(ObjectComponents,"ɵinj",m.cJS({imports:[n.ez,o._t,l.u5,r.ObjectFields,c.SystemComponents,d.o,u.Cl,a.Bz]})),ObjectComponents})();("undefined"==typeof ngJitMode||ngJitMode)&&m.kYT(Kr,{declarations:[Hr,Ae,Ie,L.l,_e,I.M,N,ye.s,Se.p,Je._,F.S,Me.s,Oe.g,Ne,Ue,Re,je,Be,f,Ve,Ke,$e,Xe,We,et,tt,st.B,nt,ot.g,lt.H,at.z,dt,ct,q.X,j,Y.i,Oi.Q,Ni.C,Fi.V,D.w,B,ge,V,X,ae,fe,Yi,Ri,mt,gt,Pt,Vt,Kt,bt,vt,yt,Ct,At,Mt,Yt,Wl,Ut,jt,Wt,ts,es,ns,nn,ri,Ti,Vs.Z,yi,si,Ji,Ai,Li,Bi,Hi,Vi,Ki,$i,on.Y,ln.d,bn,In,Ln,Zn,Un,Sn,Nn,Wn,jn,Gn,lo,co.E,ao.g,ro.C,uo.s,bo,vo.X,ko,xo,js,Ms,Oo,Ws,Fo,mo.K,qo,Eo.Q,us,Ko.F,tl,ol,ll.b,fl,Zl,_l,Vo,Ho,Ll,Ml,Sl,Nl.X,Jl.x,Ol.D,ql,ss.T,is.U,os,Gs,Lo,Bl,jl,Yl,Bs.d,Qo.f,Uo.Z,Go,na,oa,Do.n,Yo.Y,h.E,gi,_i,Tr,Md,Hd,id,ud,Kd,pd,gr,Xd,Lr,tr,pa,da,va,Aa,_a,ii.Z,ka,Na,Ha,Or,qr,zr,Vr],imports:[n.ez,o._t,l.u5,r.ObjectFields,c.SystemComponents,d.o,u.Cl,a.Bz],exports:[_e,ye.s,st.B,on.Y,In,Ln,F.S,ot.g,lt.H,ql,uo.s,mo.K,vo.X,Bs.d,Qo.f,Uo.Z,na,Nn,gi,_i,co.E,ao.g,ro.C,xo,Ko.F,ll.b,Vs.Z,Se.p,Oe.g,ii.Z,js,L.l,Y.i,q.X,I.M,Je._,js,h.E,ln.d,Nl.X,Jl.x,Ol.D,da,Ha]})},7443:(e,t,s)=>{"use strict";s.d(t,{E:()=>o});var i=s(1180),n=s(2242);let o=(()=>{var e;class ObjectKeyValuesPipe{transform(e){let t=[];for(let s in e)t.push({key:s,value:e[s]});return t}}return e=ObjectKeyValuesPipe,(0,i.Z)(ObjectKeyValuesPipe,"ɵfac",(function(t){return new(t||e)})),(0,i.Z)(ObjectKeyValuesPipe,"ɵpipe",n.Yjl({name:"objectkeyvalues",type:e,pure:!0})),ObjectKeyValuesPipe})()},3634:(e,t,s)=>{"use strict";s.d(t,{j:()=>h});var i=s(1180),n=s(2242),o=s(5710),l=s(5329),a=s(4154),d=s(2294),r=s(4755);const c=["fieldcontainer"],u=function(e){return{"slds-hidden":e}};let h=(()=>{var e;class fieldContainer{constructor(e,t,s,n){(0,i.Z)(this,"model",void 0),(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"view",void 0),(0,i.Z)(this,"fieldcontainer",void 0),(0,i.Z)(this,"field",void 0),(0,i.Z)(this,"fieldconfig",{}),(0,i.Z)(this,"fielddisplayclass","slds-text-body--regular slds-truncate slds-m-vertical--small spice-fieldbody"),this.model=e,this.language=t,this.metadata=s,this.view=n}set fieldname(e){this.field=e}get fieldname(){return this.field}get stati(){return this.model.getFieldStati(this.field)}ngAfterViewInit(){this.buildContainer()}buildContainer(){this.metadata.addComponent(this.getFieldType(),this.fieldcontainer).subscribe((e=>{e.instance.fieldname=this.field,e.instance.fieldconfig=this.fieldconfig,e.instance.fielddisplayclass=this.fielddisplayclass}))}getFieldType(){let e="";if(!this.model.checkFieldAccess(this.field))return"fieldNotAuthorized";e="blank"===this.field?"blank":this.fieldconfig.fieldtype?this.fieldconfig.fieldtype:this.metadata.getFieldType(this.model.module,this.field);let t=this.metadata.getFieldTypeComponent(e);return t||"fieldGeneric"}}return e=fieldContainer,(0,i.Z)(fieldContainer,"ɵfac",(function(t){return new(t||e)(n.Y36(o.o),n.Y36(l.d),n.Y36(a.Pu),n.Y36(d.e))})),(0,i.Z)(fieldContainer,"ɵcmp",n.Xpm({type:e,selectors:[["field-container"]],viewQuery:function(e,t){if(1&e&&n.Gf(c,7,n.s_b),2&e){let e;n.iGM(e=n.CRH())&&(t.fieldcontainer=e.first)}},inputs:{field:"field",fieldconfig:"fieldconfig",fielddisplayclass:"fielddisplayclass",fieldname:"fieldname"},decls:3,vars:3,consts:[[3,"ngClass"],["fieldcontainer",""]],template:function(e,t){1&e&&(n.TgZ(0,"div",0),n._UZ(1,"div",null,1),n.qZA()),2&e&&n.Q6J("ngClass",n.VKq(1,u,t.stati.hidden))},dependencies:[r.mk],encapsulation:2})),fieldContainer})()},7040:(e,t,s)=>{"use strict";s.d(t,{O:()=>_});var i=s(1180),n=s(2242),o=s(727),l=s(5710),a=s(2294),d=s(5329),r=s(4154),c=s(3348),u=s(4755),h=s(5030),m=s(6367),g=s(3208),p=s(5638);const f=["focus"];function b(e,t){if(1&e&&n._UZ(0,"field-label",3),2&e){const e=n.oxw();n.Q6J("fieldname",e.fieldname)("fieldconfig",e.fieldconfig)}}function v(e,t){if(1&e&&(n.TgZ(0,"field-generic-display",4),n._uU(1),n.qZA()),2&e){const e=n.oxw();n.Q6J("fielddisplayclass",e.fielddisplayclass)("editable",e.isEditable())("fieldconfig",e.fieldconfig)("title",e.value)("fieldid",e.fieldid),n.xp6(1),n.hij(" ",e.value,"\n")}}function Z(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"div",5)(1,"input",6,7),n.NdJ("ngModelChange",(function(t){n.CHM(e);const s=n.oxw();return n.KtG(s.value=t)})),n.qZA(),n._UZ(3,"field-messages",8),n.qZA()}if(2&e){const e=n.oxw();n.Q6J("ngClass",e.css_classes),n.xp6(1),n.Q6J("placeholder",e.displayLabel?"":e.language.getFieldDisplayName(e.model.module,e.fieldname))("ngModel",e.value)("maxlength",e.fieldlength)("autocomplete",e.fieldid)("ngModelOptions",e.modelOptions),n.xp6(2),n.Q6J("fieldname",e.fieldname)}}let _=(()=>{var e;class fieldGeneric{constructor(e,t,s,n,l){(0,i.Z)(this,"model",void 0),(0,i.Z)(this,"view",void 0),(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"router",void 0),(0,i.Z)(this,"focuselement",void 0),(0,i.Z)(this,"fieldname",""),(0,i.Z)(this,"fieldconfig",{}),(0,i.Z)(this,"fielddisplayclass",""),(0,i.Z)(this,"fieldid",""),(0,i.Z)(this,"fielddefs",{}),(0,i.Z)(this,"fieldlength",999),(0,i.Z)(this,"subscriptions",new o.w0),(0,i.Z)(this,"_field_defs",void 0),(0,i.Z)(this,"_css_classes",[]),this.model=e,this.view=t,this.language=s,this.metadata=n,this.router=l,this.fieldid=this.model.generateGuid()}handleViewModeChange(e){"edit"==e&&this.view.editfieldid&&this.view.editfieldid==this.fieldid&&this.setFocus()}get field_defs(){return this._field_defs||(this._field_defs=this.metadata.getFieldDefs(this.model.module,this.fieldname)),this._field_defs}get css_classes(){return this.getStati().invalid?this.addCssClass("slds-has-error"):this.removeCssClass("slds-has-error"),this._css_classes}get modelOptions(){return{updateOn:"blur"}}get value(){return this.model.getField(this.fieldname)}set value(e){this.model.setField(this.fieldname,e)}get errors(){return this.model.getFieldMessages(this.fieldname,"error")}get displayLabel(){return this.view.displayLabels&&!0!==this.fieldconfig.hidelabel}ngOnInit(){this.fielddefs=this.metadata.getFieldDefs(this.model.module,this.fieldname),this.fielddefs&&this.fielddefs.len&&(this.fieldlength=this.fielddefs.len),this.subscriptions.add(this.view.mode$.subscribe((e=>this.handleViewModeChange(e))))}ngAfterViewInit(){this.view.isEditMode()&&this.view.editfieldname&&this.view.editfieldname==this.fieldname&&this.setFocus()}setFocus(){setTimeout((()=>{this.focuselement&&this.focuselement.element.nativeElement.focus()}))}getStati(e=this.fieldname){let t=this.model.getFieldStati(e);return t.editable&&(!this.view.isEditable||t.readonly||this.fieldconfig.readonly)&&(t.editable=!1),t}isEditable(e=this.fieldname){return(this.model.checkAccess("edit")||this.model.checkAccess("create"))&&this.getStati(e).editable&&!this.getStati(e).readonly&&!this.getStati(e).disabled&&!this.getStati(e).hidden}isEditMode(){return this.view.isEditMode()&&this.isEditable()}displayLink(){try{return this.view.displayLinks&&this.fieldconfig.link&&this.model.checkAccess("detail")}catch(e){return!1}}setEditMode(){this.model.startEdit(),this.view.setEditMode()}getFieldClass(){return this.css_classes}fieldHasError(e){return this.hasFieldErrors(e)}hasFieldErrors(e=this.fieldname){return!(!this.getStati(e).invalid&&!this.errors)}goRecord(){this.router.navigate(["/module/"+this.model.module+"/"+this.model.id])}addCssClass(e){return this._css_classes.includes(e)||this._css_classes.push(e),!0}removeCssClass(e){return this._css_classes.includes(e)&&this._css_classes.splice(this._css_classes.indexOf(e),1),!0}toggleCssClass(e){return this._css_classes.includes(e)?this.removeCssClass(e):this.addCssClass(e),!0}setFieldError(e){return this.model.setFieldMessage("error",e,this.fieldname,this.fieldid)}clearFieldError(){return this.model.resetFieldMessages(this.fieldname,"error",this.fieldid)}ngOnDestroy(){this.subscriptions.unsubscribe()}}return e=fieldGeneric,(0,i.Z)(fieldGeneric,"ɵfac",(function(t){return new(t||e)(n.Y36(l.o),n.Y36(a.e),n.Y36(d.d),n.Y36(r.Pu),n.Y36(c.F0))})),(0,i.Z)(fieldGeneric,"ɵcmp",n.Xpm({type:e,selectors:[["field-generic"]],viewQuery:function(e,t){if(1&e&&n.Gf(f,5,n.s_b),2&e){let e;n.iGM(e=n.CRH())&&(t.focuselement=e.first)}},inputs:{fieldname:"fieldname",fieldconfig:"fieldconfig",fielddisplayclass:"fielddisplayclass"},decls:3,vars:3,consts:[[3,"fieldname","fieldconfig",4,"ngIf"],[3,"fielddisplayclass","editable","fieldconfig","title","fieldid",4,"ngIf"],["class","slds-form-element__control slds-m-vertical--xx-small",3,"ngClass",4,"ngIf"],[3,"fieldname","fieldconfig"],[3,"fielddisplayclass","editable","fieldconfig","title","fieldid"],[1,"slds-form-element__control","slds-m-vertical--xx-small",3,"ngClass"],["type","text",1,"slds-input",3,"placeholder","ngModel","maxlength","autocomplete","ngModelOptions","ngModelChange"],["focus",""],[3,"fieldname"]],template:function(e,t){1&e&&(n.YNc(0,b,1,2,"field-label",0),n.YNc(1,v,2,6,"field-generic-display",1),n.YNc(2,Z,4,7,"div",2)),2&e&&(n.Q6J("ngIf",t.displayLabel),n.xp6(1),n.Q6J("ngIf",!t.isEditMode()),n.xp6(1),n.Q6J("ngIf",t.isEditable()&&t.isEditMode()))},dependencies:[u.mk,u.O5,h.Fj,h.JJ,h.nD,h.On,m.q,g.D,p.a],encapsulation:2})),fieldGeneric})()},3208:(e,t,s)=>{"use strict";s.d(t,{D:()=>w});var i=s(1180),n=s(2242),o=s(5710),l=s(2294),a=s(5329),d=s(7017),r=s(4755),c=s(2656),u=s(2803),h=s(1790);function m(e,t){1&e&&n._UZ(0,"system-stencil")}function g(e,t){1&e&&n.GkF(0)}function p(e,t){if(1&e&&(n.TgZ(0,"span",9),n.YNc(1,g,1,0,"ng-container",10),n.qZA()),2&e){n.oxw(2);const e=n.MAs(5);n.xp6(1),n.Q6J("ngTemplateOutlet",e)}}function f(e,t){1&e&&n.GkF(0)}function b(e,t){if(1&e&&n.YNc(0,f,1,0,"ng-container",10),2&e){n.oxw(2);const e=n.MAs(5);n.Q6J("ngTemplateOutlet",e)}}function v(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"button",11),n.NdJ("click",(function(){n.CHM(e);const t=n.oxw(2);return n.KtG(t.setEditMode())})),n._UZ(1,"system-button-icon",12),n.qZA()}2&e&&(n.xp6(1),n.Q6J("icon","edit"))}const Z=function(e){return{"slds-truncate":e}};function _(e,t){if(1&e&&(n.TgZ(0,"div",4)(1,"div",5),n.YNc(2,p,2,1,"span",6),n.YNc(3,b,1,1,"ng-template",null,7,n.W1O),n.qZA(),n.YNc(5,v,2,1,"button",8),n.qZA()),2&e){const e=n.MAs(4),t=n.oxw();n.xp6(1),n.Q6J("ngClass",n.VKq(5,Z,t._truncate))("ngStyle",t.fieldMaxWidth),n.xp6(1),n.Q6J("ngIf",t.link)("ngIfElse",e),n.xp6(3),n.Q6J("ngIf",t.editable)}}function y(e,t){1&e&&n.Hsn(0)}const x=["*"];let w=(()=>{var e;class fieldGenericDisplay{set truncate(e){this._truncate=!1}constructor(e,t,s,n){(0,i.Z)(this,"model",void 0),(0,i.Z)(this,"view",void 0),(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"navigationtab",void 0),(0,i.Z)(this,"editable",!1),(0,i.Z)(this,"fieldconfig",{}),(0,i.Z)(this,"fielddisplayclass",""),(0,i.Z)(this,"fieldid",""),(0,i.Z)(this,"_truncate",!0),this.model=e,this.view=t,this.language=s,this.navigationtab=n}isEditMode(){return!(!this.view.isEditMode()||!this.editable)}get fieldMaxWidth(){if(this.editable)return{"max-width":"calc(100% - 20px)"}}get link(){try{return this.fieldconfig.link&&this.model.checkAccess("detail")}catch(e){return!1}}setEditMode(){this.editable&&(this.model.startEdit(),this.view.setEditMode(this.fieldid))}goRecord(){this.link&&this.model.goDetail(this.navigationtab?.tabid)}}return e=fieldGenericDisplay,(0,i.Z)(fieldGenericDisplay,"ɵfac",(function(t){return new(t||e)(n.Y36(o.o),n.Y36(l.e),n.Y36(a.d),n.Y36(d.d,8))})),(0,i.Z)(fieldGenericDisplay,"ɵcmp",n.Xpm({type:e,selectors:[["field-generic-display"]],inputs:{editable:"editable",fieldconfig:"fieldconfig",fielddisplayclass:"fielddisplayclass",fieldid:"fieldid",truncate:["field-generic-display-notruncate","truncate"]},ngContentSelectors:x,decls:6,vars:3,consts:[[3,"ngClass","dblclick"],[4,"ngIf","ngIfElse"],["displaycontent",""],["content",""],[1,"slds-size--1-of-1","slds-grid","slds-grid--vertical-align-center","slds-grid--align-spread",2,"min-height","19px"],[1,"slds-grow",3,"ngClass","ngStyle"],["system-model-popover","",4,"ngIf","ngIfElse"],["nolink",""],["class","slds-button slds-button--icon spice-button-icon-light slds-m-left--xx-small",3,"click",4,"ngIf"],["system-model-popover",""],[4,"ngTemplateOutlet"],[1,"slds-button","slds-button--icon","spice-button-icon-light","slds-m-left--xx-small",3,"click"],[3,"icon"]],template:function(e,t){if(1&e&&(n.F$t(),n.TgZ(0,"div",0),n.NdJ("dblclick",(function(){return t.setEditMode()})),n.YNc(1,m,1,0,"system-stencil",1),n.YNc(2,_,6,7,"ng-template",null,2,n.W1O),n.YNc(4,y,1,0,"ng-template",null,3,n.W1O),n.qZA()),2&e){const e=n.MAs(3);n.Q6J("ngClass",t.fielddisplayclass),n.xp6(1),n.Q6J("ngIf",t.model.isLoading||t.view.isLoading)("ngIfElse",e)}},dependencies:[r.mk,r.O5,r.tP,r.PC,c.J,u.B,h.g],encapsulation:2})),fieldGenericDisplay})()},6367:(e,t,s)=>{"use strict";s.d(t,{q:()=>Z});var i=s(1180),n=s(2242),o=s(5710),l=s(4154),a=s(2294),d=s(2422),r=s(5329),c=s(3917),u=s(4755),h=s(3463),m=s(7674),g=s(8594);function p(e,t){1&e&&(n.TgZ(0,"abbr",6),n._uU(1,"*"),n.qZA())}function f(e,t){if(1&e&&n._UZ(0,"system-label-fieldname",7),2&e){const e=n.oxw();n.Q6J("field",e.fieldname)("fieldconfig",e.fieldconfig)("module",e.model.module)("length",e.view.labels)}}function b(e,t){if(1&e&&n._UZ(0,"system-label",8),2&e){const e=n.oxw();n.Q6J("label",e.fieldconfig.label)("length",e.view.labels)}}function v(e,t){if(1&e&&n._UZ(0,"system-icon-help-text",9),2&e){const e=n.oxw();n.Q6J("helpText",e.helpText)}}let Z=(()=>{var e;class fieldLabel{constructor(e,t,s,n,o,l,a){(0,i.Z)(this,"model",void 0),(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"view",void 0),(0,i.Z)(this,"userPreferences",void 0),(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"footer",void 0),(0,i.Z)(this,"injector",void 0),(0,i.Z)(this,"fieldname",""),(0,i.Z)(this,"fieldconfig",{}),(0,i.Z)(this,"addclasses","slds-form-element__label"),(0,i.Z)(this,"showHelp",!1),this.model=e,this.metadata=t,this.view=s,this.userPreferences=n,this.language=o,this.footer=l,this.injector=a}get stati(){let e=this.model.getFieldStati(this.fieldname);return!e.editable||this.view.isEditable&&!this.fieldconfig.readonly||(e.editable=!1),this.fieldconfig.required&&(e.required=!0),e}isRequired(){return this.stati.editable&&this.stati.required}isEditable(){return this.stati.editable}isEditMode(){return!(!this.view.isEditMode()||!this.isEditable())}get hidden(){return!!this.fieldconfig.hidelabel}get label(){if(this.fieldconfig.label){if(this.fieldconfig.label.indexOf(":")>0){let e=this.fieldconfig.label.split(":");return this.language.getLabel(e[1],e[0],this.view.labels)}return this.language.getLabel(this.fieldconfig.label,this.model.module,this.view.labels)}return this.language.getFieldDisplayName(this.model.module,this.fieldname,this.fieldconfig,this.view.labels)}get helpText(){if(this.userPreferences.toUse.help_icon&&"hidden"==this.userPreferences.toUse.help_icon)return!1;if(this.fieldconfig.helpText){if(this.fieldconfig.helpText.indexOf(":")>0){let e=this.fieldconfig.helpText.split(":");return this.language.getLabel(e[1],e[0],this.view.labels)}return this.language.getLabel(this.fieldconfig.helpText,this.model.module,this.view.labels)}return this.language.getFieldHelpText(this.model.module,this.fieldname,this.fieldconfig)}showContext(e){}}return e=fieldLabel,(0,i.Z)(fieldLabel,"ɵfac",(function(t){return new(t||e)(n.Y36(o.o),n.Y36(l.Pu),n.Y36(a.e),n.Y36(d.z),n.Y36(r.d),n.Y36(c.M),n.Y36(n.zs3))})),(0,i.Z)(fieldLabel,"ɵcmp",n.Xpm({type:e,selectors:[["field-label"]],inputs:{fieldname:"fieldname",fieldconfig:"fieldconfig",addclasses:"addclasses"},decls:6,vars:5,consts:[[2,"display","flow-root",3,"contextmenu"],[1,"slds-truncate","slds-float_left",3,"ngClass"],["class","slds-required",4,"ngIf"],[3,"field","fieldconfig","module","length",4,"ngIf"],[3,"label","length",4,"ngIf"],[3,"helpText",4,"ngIf"],[1,"slds-required"],[3,"field","fieldconfig","module","length"],[3,"label","length"],[3,"helpText"]],template:function(e,t){1&e&&(n.TgZ(0,"div",0),n.NdJ("contextmenu",(function(e){return t.showContext(e)})),n.TgZ(1,"label",1),n.YNc(2,p,2,0,"abbr",2),n.YNc(3,f,1,4,"system-label-fieldname",3),n.YNc(4,b,1,2,"system-label",4),n.qZA(),n.YNc(5,v,1,1,"system-icon-help-text",5),n.qZA()),2&e&&(n.xp6(1),n.Q6J("ngClass",t.addclasses),n.xp6(1),n.Q6J("ngIf",t.stati.editable&&t.stati.required),n.xp6(1),n.Q6J("ngIf",!t.fieldconfig.label),n.xp6(1),n.Q6J("ngIf",t.fieldconfig.label),n.xp6(1),n.Q6J("ngIf",t.helpText))},dependencies:[u.mk,u.O5,h._,m.h,g.h],encapsulation:2})),fieldLabel})()},4271:(e,t,s)=>{"use strict";s.d(t,{P:()=>_});var i=s(1180),n=s(2242),o=s(5710),l=s(382),a=s(5329),d=s(5920),r=s(4755),c=s(2656),u=s(4730),h=s(3463),m=s(9151),g=s(151),p=s(3026);function f(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"button",6),n.NdJ("mousedown",(function(t){n.CHM(e);const s=n.oxw();return n.KtG(s.setCurrentUser(t))})),n._UZ(1,"system-button-icon",7),n.qZA()}}function b(e,t){1&e&&(n.TgZ(0,"div",8)(1,"system-illustration-no-records"),n._UZ(2,"system-label",9),n.qZA()())}function v(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"li",10),n.NdJ("mousedown",(function(t){const s=n.CHM(e).$implicit,i=n.oxw();return n.KtG(i.setParent(t,s))})),n._UZ(1,"field-lookup-recent-item",11),n.qZA()}if(2&e){const e=t.$implicit;n.xp6(1),n.Q6J("item",e)}}function Z(e,t){1&e&&(n.ynx(0),n.TgZ(1,"li",12),n._UZ(2,"system-searchresult-stencil"),n.qZA(),n.TgZ(3,"li",13),n._UZ(4,"system-searchresult-stencil"),n.qZA(),n.TgZ(5,"li",14),n._UZ(6,"system-searchresult-stencil"),n.qZA(),n.BQk())}let _=(()=>{var e;class fieldLookupRecent{constructor(e,t,s,o){(0,i.Z)(this,"model",void 0),(0,i.Z)(this,"recent",void 0),(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"session",void 0),(0,i.Z)(this,"module",""),(0,i.Z)(this,"selectedObject",new n.vpe),(0,i.Z)(this,"recentItems",[]),(0,i.Z)(this,"loading",!1),this.model=e,this.recent=t,this.language=s,this.session=o}ngOnChanges(){this.getRecent()}setCurrentUser(e){e.preventDefault(),this.selectedObject.emit({id:this.session.authData.userId,text:this.session.authData.user.full_name,data:this.session.authData.user})}setParent(e,t){e.preventDefault(),this.selectedObject.emit({id:t.data.id,text:t.data.summary_text,data:t.data})}getRecent(){this.loading=!0,this.recentItems=[];this.recent.getModuleRecent(this.module).subscribe((e=>{this.recentItems=e,this.loading=!1}))}}return e=fieldLookupRecent,(0,i.Z)(fieldLookupRecent,"ɵfac",(function(t){return new(t||e)(n.Y36(o.o),n.Y36(l.h),n.Y36(a.d),n.Y36(d.n))})),(0,i.Z)(fieldLookupRecent,"ɵcmp",n.Xpm({type:e,selectors:[["field-lookup-recent"]],inputs:{module:"module"},outputs:{selectedObject:"selectedObject"},features:[n.TTD],decls:7,vars:5,consts:[[1,"slds-lookup__item--label","slds-text-body--small","slds-grid","slds-grid--vertical-align-center","slds-grid--align-spread","slds-border--bottom"],["system-title","LBL_SET_CURRENT_USER","class","slds-button slds-button--icon","size","xx-small",3,"mousedown",4,"ngIf"],["class","slds-align--absolute-center slds-p-around--small",4,"ngIf"],["role","listbox",1,"slds-lookup__list"],["role","presentation",3,"mousedown",4,"ngFor","ngForOf"],[4,"ngIf"],["system-title","LBL_SET_CURRENT_USER","size","xx-small",1,"slds-button","slds-button--icon",3,"mousedown"],["icon","user"],[1,"slds-align--absolute-center","slds-p-around--small"],["label","MSG_NO_RECORDS_FOUND"],["role","presentation",3,"mousedown"],[3,"item"],[2,"opacity","1"],[2,"opacity","0.6"],[2,"opacity","0.2"]],template:function(e,t){1&e&&(n.TgZ(0,"div",0),n._uU(1),n.YNc(2,f,2,0,"button",1),n.qZA(),n.YNc(3,b,3,0,"div",2),n.TgZ(4,"ul",3),n.YNc(5,v,2,1,"li",4),n.YNc(6,Z,7,0,"ng-container",5),n.qZA()),2&e&&(n.xp6(1),n.hij(" ",t.language.getModuleCombinedLabel("LBL_RECENTLYVIEWED",t.module)," "),n.xp6(1),n.Q6J("ngIf","Users"==t.module),n.xp6(1),n.Q6J("ngIf",!t.loading&&0==t.recentItems.length),n.xp6(2),n.Q6J("ngForOf",t.recentItems),n.xp6(1),n.Q6J("ngIf",t.loading))},dependencies:[r.sg,r.O5,c.J,u.C,h._,m.v,g.S,p.E],encapsulation:2})),fieldLookupRecent})()},3026:(e,t,s)=>{"use strict";s.d(t,{E:()=>_});var i=s(1180),n=s(5710),o=s(2294),l=s(2242),a=s(3348),d=s(5329),r=s(4154),c=s(4755),u=s(4561),h=s(3333),m=s(3634);function g(e,t){if(1&e&&(l.TgZ(0,"span"),l._uU(1),l.qZA()),2&e){const e=l.oxw();l.xp6(1),l.Oqu(e.model.data.summary_text)}}function p(e,t){if(1&e&&(l.TgZ(0,"li",8),l._UZ(1,"field-container",12),l.qZA()),2&e){const e=l.oxw().$implicit;l.xp6(1),l.Q6J("field",e.field)("fieldconfig",e.fieldconfig)}}function f(e,t){if(1&e&&(l.ynx(0),l.YNc(1,p,2,2,"li",11),l.BQk()),2&e){const e=t.$implicit,s=l.oxw(2);l.xp6(1),l.Q6J("ngIf",s.model.getField(e.field))}}function b(e,t){if(1&e&&(l.TgZ(0,"ul",7),l.YNc(1,f,2,1,"ng-container",10),l.qZA()),2&e){const e=l.oxw();l.xp6(1),l.Q6J("ngForOf",e.mainfieldsetfields)}}function v(e,t){if(1&e&&(l.TgZ(0,"li",8),l._UZ(1,"field-container",12),l.qZA()),2&e){const e=l.oxw().$implicit;l.xp6(1),l.Q6J("field",e.field)("fieldconfig",e.fieldconfig)}}function Z(e,t){if(1&e&&(l.ynx(0),l.YNc(1,v,2,2,"li",11),l.BQk()),2&e){const e=t.$implicit,s=l.oxw();l.xp6(1),l.Q6J("ngIf",s.model.getField(e.field))}}let _=(()=>{var e;class fieldLookupRecentItem{constructor(e,t,s,n,o){(0,i.Z)(this,"model",void 0),(0,i.Z)(this,"router",void 0),(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"view",void 0),(0,i.Z)(this,"item",{}),(0,i.Z)(this,"mainfieldsetfields",void 0),(0,i.Z)(this,"subfieldsetfields",void 0),this.model=e,this.router=t,this.language=s,this.metadata=n,this.view=o,this.view.displayLabels=!1}ngOnInit(){this.model.module=this.item.module_name,this.model.id=this.item.item_id,this.model.setData(this.item.data);let e=this.metadata.getComponentConfig("GlobalHeaderSearchResultsItem",this.model.module);e&&e.mainfieldset&&(this.mainfieldsetfields=this.metadata.getFieldSetItems(e.mainfieldset)),e&&e.subfieldset&&(this.subfieldsetfields=this.metadata.getFieldSetItems(e.subfieldset))}}return e=fieldLookupRecentItem,(0,i.Z)(fieldLookupRecentItem,"ɵfac",(function(t){return new(t||e)(l.Y36(n.o),l.Y36(a.F0),l.Y36(d.d),l.Y36(r.Pu),l.Y36(o.e))})),(0,i.Z)(fieldLookupRecentItem,"ɵcmp",l.Xpm({type:e,selectors:[["field-lookup-recent-item"]],inputs:{item:"item"},features:[l._Bn([n.o,o.e])],decls:11,vars:6,consts:[["role","option",1,"slds-lookup__item-action","slds-media","slds-media--center"],["size","small",3,"module"],[1,"slds-media__body"],[1,"slds-lookup__result-text"],[4,"ngIf"],["class","slds-list_horizontal slds-has-dividers_right slds-truncate",4,"ngIf"],[1,"slds-lookup__result-meta","slds-text-body--small"],[1,"slds-list_horizontal","slds-has-dividers_right","slds-truncate"],[1,"slds-item"],[3,"module","singular"],[4,"ngFor","ngForOf"],["class","slds-item",4,"ngIf"],["fielddisplayclass","slds-truncate",3,"field","fieldconfig"]],template:function(e,t){1&e&&(l.TgZ(0,"span",0),l._UZ(1,"system-icon",1),l.TgZ(2,"div",2)(3,"div",3),l.YNc(4,g,2,1,"span",4),l.YNc(5,b,2,1,"ul",5),l.qZA(),l.TgZ(6,"span",6)(7,"ul",7)(8,"li",8),l._UZ(9,"system-label-modulename",9),l.qZA(),l.YNc(10,Z,2,1,"ng-container",10),l.qZA()()()()),2&e&&(l.xp6(1),l.Q6J("module",t.model.module),l.xp6(3),l.Q6J("ngIf",!t.mainfieldsetfields),l.xp6(1),l.Q6J("ngIf",t.mainfieldsetfields),l.xp6(4),l.Q6J("module",t.model.module)("singular",!0),l.xp6(1),l.Q6J("ngForOf",t.subfieldsetfields))},dependencies:[c.sg,c.O5,u.f,h.M,m.j],encapsulation:2})),fieldLookupRecentItem})()},5957:(e,t,s)=>{"use strict";s.d(t,{$:()=>T});var i=s(1180),n=s(2242),o=s(2644),l=s(727),a=s(4154),d=s(5710),r=s(5329),c=s(4044),u=s(4755),h=s(4561),m=s(4730),g=s(3463),p=s(3333),f=s(9151),b=s(6930),v=s(8016);function Z(e,t){if(1&e&&(n.TgZ(0,"span",12),n._UZ(1,"system-label",13),n._uU(2),n.qZA()),2&e){const e=n.oxw();n.xp6(2),n.hij(" ",e.relatefilter.display,"")}}function _(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"li",14),n.NdJ("mousedown",(function(){const t=n.CHM(e).$implicit,s=n.oxw();return n.KtG(s.setItem(t))})),n.qZA()}if(2&e){const e=t.$implicit,s=n.oxw();n.Q6J("module",s.module)("item",e)}}function y(e,t){1&e&&(n.ynx(0),n.TgZ(1,"li",15),n._UZ(2,"system-searchresult-stencil"),n.qZA(),n.TgZ(3,"li",16),n._UZ(4,"system-searchresult-stencil"),n.qZA(),n.TgZ(5,"li",17),n._UZ(6,"system-searchresult-stencil"),n.qZA(),n.BQk())}function x(e,t){1&e&&(n.TgZ(0,"div",18)(1,"system-illustration-no-records"),n._UZ(2,"system-label",19),n.qZA()())}function w(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"li",20),n.NdJ("added",(function(t){n.CHM(e);const s=n.oxw();return n.KtG(s.recordAdded(t))})),n.qZA()}if(2&e){const e=n.oxw();n.Q6J("module",e.module)("parent",e.model)}}let T=(()=>{var e;class fieldLookupSearch{set searchterm(e){this.searchTerm=e,this.searchTimeout&&window.clearTimeout(this.searchTimeout),this.searchTimeout=window.setTimeout((()=>this.doSearch()),500)}constructor(e,t,s,o,a){(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"model",void 0),(0,i.Z)(this,"modellist",void 0),(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"modal",void 0),(0,i.Z)(this,"searchTerm",""),(0,i.Z)(this,"searchTimeout",{}),(0,i.Z)(this,"module",""),(0,i.Z)(this,"modulefilter",""),(0,i.Z)(this,"disableadd",!1),(0,i.Z)(this,"relatefilter",void 0),(0,i.Z)(this,"relateId",void 0),(0,i.Z)(this,"selectedObject",new n.vpe),(0,i.Z)(this,"searchWithModal",new n.vpe),(0,i.Z)(this,"searchtermChange",new n.vpe),(0,i.Z)(this,"subscriptions",new l.w0),this.metadata=e,this.model=t,this.modellist=s,this.language=o,this.modal=a}ngOnInit(){this.modellist.modulefilter=this.modulefilter,this.relatefilter&&(this.modellist.relatefilter=this.relatefilter),this.modellist.loadlimit=5,this.modellist.initialize(this.module),this.modellist.getListData()}ngOnChanges(e){e.relateId&&this.modellist.currentList&&this.modellist.getListData()}get canAdd(){return!this.disableadd&&this.metadata.checkModuleAcl(this.module,"edit")}doSearch(){""!==this.searchTerm&&this.searchTerm!==this.modellist.searchTerm&&(this.modellist.searchTerm=this.searchTerm,this.modellist.getListData())}setItem(e){this.searchTerm="",this.searchtermChange.emit(this.searchTerm),this.selectedObject.emit({id:e.id,text:e.summary_text,data:e})}recordAdded(e){this.setItem(e.data)}}return e=fieldLookupSearch,(0,i.Z)(fieldLookupSearch,"ɵfac",(function(t){return new(t||e)(n.Y36(a.Pu),n.Y36(d.o),n.Y36(o.t),n.Y36(r.d),n.Y36(c.o))})),(0,i.Z)(fieldLookupSearch,"ɵcmp",n.Xpm({type:e,selectors:[["field-lookup-search"]],inputs:{module:"module",modulefilter:"modulefilter",disableadd:"disableadd",relatefilter:"relatefilter",relateId:"relateId",searchterm:"searchterm"},outputs:{selectedObject:"selectedObject",searchWithModal:"searchWithModal",searchtermChange:"searchtermChange"},features:[n._Bn([o.t]),n.TTD],decls:12,vars:10,consts:[["role","listbox",1,"slds-lookup__list"],["role","presentation"],["role","option",1,"slds-p-horizontal--small","slds-p-vertical--xx-small","slds-grid","slds-grid--vertical-align-center","slds-border--bottom",3,"mousedown"],[3,"icon","sprite","size","addclasses"],[1,"slds-media__body"],[1,"slds-lookup__result-text"],[3,"module"],["class","slds-p-horizontal--xx-small",4,"ngIf"],["field-lookup-search-item","",3,"module","item","mousedown",4,"ngFor","ngForOf"],[4,"ngIf"],["class","slds-align--absolute-center slds-p-around--small",4,"ngIf"],["field-lookup-search-add","","role","presentation",3,"module","parent","added",4,"ngIf"],[1,"slds-p-horizontal--xx-small"],["label","LBL_RELATED_TO"],["field-lookup-search-item","",3,"module","item","mousedown"],[2,"opacity","1"],[2,"opacity","0.6"],[2,"opacity","0.2"],[1,"slds-align--absolute-center","slds-p-around--small"],["label","MSG_NO_RECORDS_FOUND"],["field-lookup-search-add","","role","presentation",3,"module","parent","added"]],template:function(e,t){1&e&&(n.TgZ(0,"ul",0)(1,"li",1)(2,"div",2),n.NdJ("mousedown",(function(){return t.searchWithModal.emit()})),n._UZ(3,"system-icon",3),n.TgZ(4,"div",4)(5,"div",5),n._UZ(6,"system-label-modulename",6),n.YNc(7,Z,3,1,"span",7),n.qZA()()()(),n.YNc(8,_,1,2,"li",8),n.YNc(9,y,7,0,"ng-container",9),n.YNc(10,x,3,0,"div",10),n.YNc(11,w,1,2,"li",11),n.qZA()),2&e&&(n.xp6(3),n.Q6J("icon","search")("sprite","utility")("size","x-small")("addclasses","slds-m-vertical--xxx-small slds-m-horizontal--xx-small"),n.xp6(3),n.Q6J("module",t.module),n.xp6(1),n.Q6J("ngIf",null==t.relatefilter?null:t.relatefilter.active),n.xp6(1),n.Q6J("ngForOf",t.modellist.listData.list),n.xp6(1),n.Q6J("ngIf",t.modellist.isLoading),n.xp6(1),n.Q6J("ngIf",!t.modellist.isLoading&&0==t.modellist.listData.totalcount),n.xp6(1),n.Q6J("ngIf",t.canAdd))},dependencies:[u.sg,u.O5,h.f,m.C,g._,p.M,f.v,b.R,v.I],encapsulation:2})),fieldLookupSearch})()},8016:(e,t,s)=>{"use strict";s.d(t,{I:()=>u});var i=s(1180),n=s(2242),o=s(5710),l=s(5329),a=s(4561),d=s(3463),r=s(3333);const c=["field-lookup-search-add",""];let u=(()=>{var e;class fieldLookupSearchAdd{constructor(e,t){(0,i.Z)(this,"model",void 0),(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"module",""),(0,i.Z)(this,"parent",void 0),(0,i.Z)(this,"added$",new n.vpe),this.model=e,this.language=t}ngOnInit(){this.model.module=this.module}addParent(){this.model.addModel("",this.parent,null,!0).subscribe((e=>{this.added$.emit({id:e.id,text:e.summary_text,data:e})}))}}return e=fieldLookupSearchAdd,(0,i.Z)(fieldLookupSearchAdd,"ɵfac",(function(t){return new(t||e)(n.Y36(o.o),n.Y36(l.d))})),(0,i.Z)(fieldLookupSearchAdd,"ɵcmp",n.Xpm({type:e,selectors:[["","field-lookup-search-add",""]],inputs:{module:"module",parent:"parent"},outputs:{added$:"added"},features:[n._Bn([o.o])],attrs:c,decls:7,vars:6,consts:[["role","option",1,"slds-grid","slds-grid--vertical-align-center","slds-p-horizontal--small","slds-p-vertical--xx-small","slds-border--top",3,"mousedown"],[3,"icon","sprite","size","addclasses"],[1,"slds-media__body"],[1,"slds-lookup__result-text"],["label","LBL_CREATE"],[3,"module","singular"]],template:function(e,t){1&e&&(n.TgZ(0,"div",0),n.NdJ("mousedown",(function(){return t.addParent()})),n._UZ(1,"system-icon",1),n.TgZ(2,"div",2)(3,"div",3),n._UZ(4,"system-label",4),n._uU(5,": "),n._UZ(6,"system-label-modulename",5),n.qZA()()()),2&e&&(n.xp6(1),n.Q6J("icon","add")("sprite","utility")("size","x-small")("addclasses","slds-m-vertical--xxx-small slds-m-horizontal--xx-small"),n.xp6(5),n.Q6J("module",t.module)("singular",!0))},dependencies:[a.f,d._,r.M],encapsulation:2})),fieldLookupSearchAdd})()},6930:(e,t,s)=>{"use strict";s.d(t,{R:()=>Z});var i=s(1180),n=s(5710),o=s(2294),l=s(2242),a=s(5329),d=s(4154),r=s(4755),c=s(4561),u=s(3634);const h=["field-lookup-search-item",""];function m(e,t){if(1&e&&(l.TgZ(0,"span"),l._uU(1),l.qZA()),2&e){const e=l.oxw();l.xp6(1),l.Oqu(e.model.data.summary_text)}}function g(e,t){if(1&e&&(l.TgZ(0,"li",10),l._UZ(1,"field-container",11),l.qZA()),2&e){const e=l.oxw().$implicit;l.xp6(1),l.Q6J("field",e.field)("fieldconfig",e.fieldconfig)}}function p(e,t){if(1&e&&(l.ynx(0),l.YNc(1,g,2,2,"li",9),l.BQk()),2&e){const e=t.$implicit,s=l.oxw(2);l.xp6(1),l.Q6J("ngIf",s.model.getField(e.field))}}function f(e,t){if(1&e&&(l.TgZ(0,"ul",7),l.YNc(1,p,2,1,"ng-container",8),l.qZA()),2&e){const e=l.oxw();l.xp6(1),l.Q6J("ngForOf",e.mainfieldsetfields)}}function b(e,t){if(1&e&&(l.TgZ(0,"li",10),l._UZ(1,"field-container",11),l.qZA()),2&e){const e=l.oxw().$implicit;l.xp6(1),l.Q6J("field",e.field)("fieldconfig",e.fieldconfig)}}function v(e,t){if(1&e&&(l.ynx(0),l.YNc(1,b,2,2,"li",9),l.BQk()),2&e){const e=t.$implicit,s=l.oxw();l.xp6(1),l.Q6J("ngIf",s.model.getField(e.field))}}let Z=(()=>{var e;class fieldLookupSearchItem{constructor(e,t,s,n){(0,i.Z)(this,"model",void 0),(0,i.Z)(this,"view",void 0),(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"item",{}),(0,i.Z)(this,"module",void 0),(0,i.Z)(this,"mainfieldsetfields",void 0),(0,i.Z)(this,"subfieldsetfields",void 0),this.model=e,this.view=t,this.language=s,this.metadata=n,this.view.displayLabels=!1}ngOnInit(){this.model.module=this.module,this.model.id=this.item.id,this.model.setData(this.item);let e=this.metadata.getComponentConfig("GlobalHeaderSearchResultsItem",this.model.module);e&&e.mainfieldset&&(this.mainfieldsetfields=this.metadata.getFieldSetItems(e.mainfieldset)),e&&e.subfieldset&&(this.subfieldsetfields=this.metadata.getFieldSetItems(e.subfieldset))}}return e=fieldLookupSearchItem,(0,i.Z)(fieldLookupSearchItem,"ɵfac",(function(t){return new(t||e)(l.Y36(n.o),l.Y36(o.e),l.Y36(a.d),l.Y36(d.Pu))})),(0,i.Z)(fieldLookupSearchItem,"ɵcmp",l.Xpm({type:e,selectors:[["","field-lookup-search-item",""]],inputs:{item:"item",module:"module"},features:[l._Bn([n.o,o.e])],attrs:h,decls:9,vars:4,consts:[["role","option",1,"slds-lookup__item-action","slds-media","slds-media--center"],["size","small",3,"module"],[1,"slds-media__body"],[1,"slds-lookup__result-text"],[4,"ngIf"],["class","slds-list_horizontal slds-has-dividers_right slds-truncate",4,"ngIf"],[1,"slds-lookup__result-meta","slds-text-body--small"],[1,"slds-list_horizontal","slds-has-dividers_right","slds-truncate"],[4,"ngFor","ngForOf"],["class","slds-item",4,"ngIf"],[1,"slds-item"],["fielddisplayclass","slds-truncate",3,"field","fieldconfig"]],template:function(e,t){1&e&&(l.TgZ(0,"span",0),l._UZ(1,"system-icon",1),l.TgZ(2,"div",2)(3,"div",3),l.YNc(4,m,2,1,"span",4),l.YNc(5,f,2,1,"ul",5),l.qZA(),l.TgZ(6,"div",6)(7,"ul",7),l.YNc(8,v,2,1,"ng-container",8),l.qZA()()()()),2&e&&(l.xp6(1),l.Q6J("module",t.model.module),l.xp6(3),l.Q6J("ngIf",!t.mainfieldsetfields),l.xp6(1),l.Q6J("ngIf",t.mainfieldsetfields),l.xp6(3),l.Q6J("ngForOf",t.subfieldsetfields))},dependencies:[r.sg,r.O5,c.f,u.j],encapsulation:2})),fieldLookupSearchItem})()},5638:(e,t,s)=>{"use strict";s.d(t,{a:()=>v});var i=s(1180),n=s(2242),o=s(5710),l=s(2294),a=s(5329),d=s(6701),r=s(4755),c=s(3463),u=s(8859);function h(e,t){if(1&e&&(n.TgZ(0,"div",8),n._UZ(1,"system-label",9),n.qZA()),2&e){const e=t.$implicit;n.xp6(1),n.Q6J("label",e.message)}}function m(e,t){if(1&e&&(n.TgZ(0,"div",3)(1,"div",4)(2,"span",5),n._UZ(3,"system-utility-icon",6),n.qZA()(),n.YNc(4,h,2,1,"div",7),n.qZA()),2&e){const e=n.oxw();n.xp6(3),n.Q6J("icon","error")("size","x-small")("colorclass","slds-icon-text-error"),n.xp6(1),n.Q6J("ngForOf",e.errors)}}function g(e,t){if(1&e&&(n.TgZ(0,"div",8),n._UZ(1,"system-label",9),n.qZA()),2&e){const e=t.$implicit;n.xp6(1),n.Q6J("label",e.message)}}function p(e,t){if(1&e&&(n.TgZ(0,"div",10)(1,"div",4)(2,"span",5),n._UZ(3,"system-utility-icon",6),n.qZA()(),n.YNc(4,g,2,1,"div",7),n.qZA()),2&e){const e=n.oxw();n.xp6(3),n.Q6J("icon","warning")("size","x-small")("colorclass","slds-icon-text-warning"),n.xp6(1),n.Q6J("ngForOf",e.warnings)}}function f(e,t){if(1&e&&(n.TgZ(0,"div",8),n._UZ(1,"system-label",9),n.qZA()),2&e){const e=t.$implicit;n.xp6(1),n.Q6J("label",e.message)}}function b(e,t){if(1&e&&(n.TgZ(0,"div",11)(1,"div",4)(2,"span",5),n._UZ(3,"system-utility-icon",12),n.qZA()(),n.YNc(4,f,2,1,"div",7),n.qZA()),2&e){const e=n.oxw();n.xp6(3),n.Q6J("icon","info")("size","x-small"),n.xp6(1),n.Q6J("ngForOf",e.notices)}}let v=(()=>{var e;class FieldMessagesComponent{constructor(e,t,s,n){(0,i.Z)(this,"model",void 0),(0,i.Z)(this,"view",void 0),(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"fielderrorgroup",void 0),(0,i.Z)(this,"fieldname",""),(0,i.Z)(this,"_messages",[]),(0,i.Z)(this,"errors",[]),(0,i.Z)(this,"warnings",[]),(0,i.Z)(this,"notices",[]),this.model=e,this.view=t,this.language=s,this.fielderrorgroup=n}ngOnInit(){this.model.messageChange$.subscribe((()=>{this.updateMessages()}))}ngOnChanges(){this.updateMessages()}ngOnDestroy(){this.fielderrorgroup&&this.fielderrorgroup.setError(this.fieldname,!1)}updateMessages(){let e;e=0==this._messages.length&&this.fieldname?this.model.getFieldMessages(this.fieldname)||[]:this._messages,this.errors=this.filterMessages(e,"error"),this.warnings=this.filterMessages(e,"warning"),this.notices=this.filterMessages(e,"notice"),this.fielderrorgroup&&this.fielderrorgroup.setError(this.fieldname,0!==this.errors.length)}filterMessages(e,t){return e.filter((e=>!t||e.type==t))}}return e=FieldMessagesComponent,(0,i.Z)(FieldMessagesComponent,"ɵfac",(function(t){return new(t||e)(n.Y36(o.o),n.Y36(l.e),n.Y36(a.d),n.Y36(d.O,8))})),(0,i.Z)(FieldMessagesComponent,"ɵcmp",n.Xpm({type:e,selectors:[["field-messages"]],inputs:{fieldname:"fieldname",_messages:["messages","_messages"]},features:[n.TTD],decls:3,vars:3,consts:[["class","slds-media slds-media-center slds-inline_icon_text slds-form-element__help",4,"ngIf"],["class","slds-media slds-media-center slds-inline_icon_text slds-inline_icon_text--warning",4,"ngIf"],["class","slds-media slds-media-center slds-inline_icon_text",4,"ngIf"],[1,"slds-media","slds-media-center","slds-inline_icon_text","slds-form-element__help"],[1,"slds-media__figure"],[1,"slds-icon_container"],[3,"icon","size","colorclass"],["class","slds-media__body",4,"ngFor","ngForOf"],[1,"slds-media__body"],[3,"label"],[1,"slds-media","slds-media-center","slds-inline_icon_text","slds-inline_icon_text--warning"],[1,"slds-media","slds-media-center","slds-inline_icon_text"],[3,"icon","size"]],template:function(e,t){1&e&&(n.YNc(0,m,5,4,"div",0),n.YNc(1,p,5,4,"div",1),n.YNc(2,b,5,3,"div",2)),2&e&&(n.Q6J("ngIf",t.errors.length>0),n.xp6(1),n.Q6J("ngIf",t.warnings.length>0),n.xp6(1),n.Q6J("ngIf",t.notices.length>0))},dependencies:[r.sg,r.O5,c._,u.r],encapsulation:2})),FieldMessagesComponent})()},3190:(e,t,s)=>{"use strict";s.r(t),s.d(t,{ObjectFields:()=>fm});var i=s(1180),n=s(4755),o=s(5030),l=s(3418),a=s(3735),d=s(4357),r=s(7040),c=s(2242),u=s(4154),h=s(6367),m=s(3634);function g(e,t){if(1&e&&c._UZ(0,"field-label",4),2&e){const e=c.oxw();c.Q6J("fieldname",e.field.field)("fieldconfig",e.field.fieldconfig)}}let p=(()=>{var e;class field{constructor(){(0,i.Z)(this,"field",{})}}return e=field,(0,i.Z)(field,"ɵfac",(function(t){return new(t||e)})),(0,i.Z)(field,"ɵcmp",c.Xpm({type:e,selectors:[["field"]],hostVars:2,hostBindings:function(e,t){2&e&&c.ekj("slds-form-element",!0)},inputs:{field:"field"},decls:4,vars:3,consts:[[1,"slds-form-element"],[3,"fieldname","fieldconfig",4,"ngIf"],[1,"slds-form-element__control"],[3,"field","fieldconfig"],[3,"fieldname","fieldconfig"]],template:function(e,t){1&e&&(c.TgZ(0,"div",0),c.YNc(1,g,1,2,"field-label",1),c.TgZ(2,"div",2),c._UZ(3,"field-container",3),c.qZA()()),2&e&&(c.xp6(1),c.Q6J("ngIf",!0!==t.field.fieldconfig.hidelabel),c.xp6(2),c.Q6J("field",t.field.field)("fieldconfig",t.field.fieldconfig))},dependencies:[n.O5,h.q,m.j],encapsulation:2})),field})();function f(e,t){if(1&e&&c._UZ(0,"field",4),2&e){const e=c.oxw().$implicit;c.Q6J("field",e)}}function b(e,t){if(1&e&&c._UZ(0,"field-set",5),2&e){const e=c.oxw().$implicit;c.Q6J("fieldset",e.fieldset)("fieldsetconfig",e.fieldconfig)}}function v(e,t){if(1&e&&(c.ynx(0),c.YNc(1,f,1,1,"field",2),c.YNc(2,b,1,2,"field-set",3),c.BQk()),2&e){const e=t.$implicit;c.xp6(1),c.Q6J("ngIf",e.field),c.xp6(1),c.Q6J("ngIf",!e.field)}}let Z=(()=>{var e;class fieldSet{constructor(e){(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"fieldset",""),(0,i.Z)(this,"fieldsetconfig",{}),(0,i.Z)(this,"fieldsetItems",[]),this.metadata=e}ngOnInit(){this.fieldsetItems=this.metadata.getFieldSetItems(this.fieldset)}getFormClass(){if(this.fieldsetconfig.formclass)return this.fieldsetconfig.formclass}}return e=fieldSet,(0,i.Z)(fieldSet,"ɵfac",(function(t){return new(t||e)(c.Y36(u.Pu))})),(0,i.Z)(fieldSet,"ɵcmp",c.Xpm({type:e,selectors:[["field-set"]],hostVars:2,hostBindings:function(e,t){2&e&&c.ekj("slds-form-element",!0)},inputs:{fieldset:"fieldset",fieldsetconfig:"fieldsetconfig"},decls:2,vars:2,consts:[[3,"ngClass"],[4,"ngFor","ngForOf"],[3,"field",4,"ngIf"],[3,"fieldset","fieldsetconfig",4,"ngIf"],[3,"field"],[3,"fieldset","fieldsetconfig"]],template:function(e,t){1&e&&(c.TgZ(0,"div",0),c.YNc(1,v,3,2,"ng-container",1),c.qZA()),2&e&&(c.Q6J("ngClass",t.getFormClass()),c.xp6(1),c.Q6J("ngForOf",t.fieldsetItems))},dependencies:[n.mk,n.sg,n.O5,e,p],encapsulation:2})),fieldSet})(),y=(()=>{var e;class fieldBlank{}return e=fieldBlank,(0,i.Z)(fieldBlank,"ɵfac",(function(t){return new(t||e)})),(0,i.Z)(fieldBlank,"ɵcmp",c.Xpm({type:e,selectors:[["field-blank"]],decls:1,vars:0,consts:[[1,"slds-truncate"]],template:function(e,t){1&e&&c._UZ(0,"div",0)},encapsulation:2})),fieldBlank})();var x=s(5329),w=s(5710),T=s(2656);let C=(()=>{var e;class fieldLabelPopover{constructor(e,t,s,n){(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"elementRef",void 0),(0,i.Z)(this,"renderer",void 0),(0,i.Z)(this,"model",void 0),(0,i.Z)(this,"self",void 0),(0,i.Z)(this,"event",void 0),(0,i.Z)(this,"clickListener",void 0),(0,i.Z)(this,"contextmenulistener",void 0),(0,i.Z)(this,"fieldlabel",""),(0,i.Z)(this,"fieldname",""),(0,i.Z)(this,"fieldconfig",{}),(0,i.Z)(this,"top","0px"),(0,i.Z)(this,"left","0px"),this.language=e,this.elementRef=t,this.renderer=s,this.model=n}ngOnInit(){this.top=this.event.pageY-22+"px",this.left=this.event.pageX+8+"px",this.clickListener=this.renderer.listen("document","click",(e=>this.onClick(e)))}ngOnDestroy(){this.clickListener&&this.clickListener(),this.contextmenulistener&&this.contextmenulistener()}onClick(e){this.elementRef.nativeElement.contains(e.target)||(this.clickListener&&this.clickListener(),this.contextmenulistener&&this.contextmenulistener(),this.close())}get popoverStyle(){return{top:this.top,left:this.left}}close(){this.self.destroy()}}return e=fieldLabelPopover,(0,i.Z)(fieldLabelPopover,"ɵfac",(function(t){return new(t||e)(c.Y36(x.d),c.Y36(c.SBq),c.Y36(c.Qsj),c.Y36(w.o,8))})),(0,i.Z)(fieldLabelPopover,"ɵcmp",c.Xpm({type:e,selectors:[["ng-component"]],decls:8,vars:3,consts:[["role","dialog",1,"slds-is-fixed","slds-popover","slds-nubbin_left-top",3,"ngStyle"],[1,"slds-button","slds-button_icon","slds-button_icon-small","slds-float_right","slds-popover__close",3,"click"],["icon","close"],[1,"slds-popover__header"],[1,"slds-text-heading_small"],[1,"slds-popover__body"]],template:function(e,t){1&e&&(c.TgZ(0,"div",0)(1,"button",1),c.NdJ("click",(function(){return t.close()})),c._UZ(2,"system-button-icon",2),c.qZA(),c.TgZ(3,"header",3)(4,"h2",4),c._uU(5),c.qZA()(),c.TgZ(6,"div",5),c._uU(7),c.qZA()()),2&e&&(c.Q6J("ngStyle",t.popoverStyle),c.xp6(5),c.Oqu(t.fieldlabel),c.xp6(2),c.hij(" fieldname: ",t.fieldname," fieldtype: "))},dependencies:[n.PC,T.J],encapsulation:2})),fieldLabelPopover})();var A=s(3208),k=s(2294),L=s(3348),I=s(4044),M=s(8859),S=s(7982),J=s(5638),O=s(5572);const N=["textField"];function F(e,t){if(1&e&&c._UZ(0,"field-label",5),2&e){const e=c.oxw();c.Q6J("fieldname",e.fieldname)("fieldconfig",e.fieldconfig)}}function q(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"div",6),c.NdJ("click",(function(){c.CHM(e);const t=c.oxw();return c.KtG(t.toSpeech())})),c._UZ(1,"system-utility-icon",7),c.qZA()}}function E(e,t){if(1&e&&(c.TgZ(0,"div",11),c._uU(1),c.qZA()),2&e){const e=c.oxw(2);c.xp6(1),c.Oqu(e.value)}}function Y(e,t){if(1&e&&(c.TgZ(0,"div",13),c._uU(1),c.qZA()),2&e){const e=c.oxw(3);c.Q6J("title",e.value),c.xp6(1),c.hij(" ",e.value," ")}}function D(e,t){if(1&e&&(c.TgZ(0,"div",13),c.ALo(1,"systemstriphtmltagspipe"),c._uU(2),c.ALo(3,"systemstriphtmltagspipe"),c.qZA()),2&e){const e=c.oxw(3);c.Q6J("title",c.lcZ(1,2,e.value)),c.xp6(2),c.hij(" ",c.lcZ(3,4,e.value)," ")}}function Q(e,t){if(1&e&&(c.YNc(0,Y,2,2,"div",12),c.YNc(1,D,4,6,"div",12)),2&e){const e=c.oxw(2);c.Q6J("ngIf",!e.striphtml),c.xp6(1),c.Q6J("ngIf",e.striphtml)}}function U(e,t){if(1&e&&(c.TgZ(0,"field-generic-display",8),c.YNc(1,E,2,1,"div",9),c.YNc(2,Q,2,2,"ng-template",null,10,c.W1O),c.qZA()),2&e){const e=c.MAs(3),t=c.oxw();c.Q6J("fielddisplayclass",t.fielddisplayclass)("editable",t.isEditable())("fieldconfig",t.fieldconfig)("fieldid",t.fieldid),c.xp6(1),c.Q6J("ngIf",!t.truncated)("ngIfElse",e)}}function R(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"button",21),c.NdJ("click",(function(){c.CHM(e);const t=c.oxw(2);return c.KtG(t.speechRecognitionStart())})),c._UZ(1,"system-button-icon",22),c.qZA()}2&e&&(c.xp6(1),c.Q6J("size","small")("icon","unmuted"))}function j(e,t){if(1&e&&(c.TgZ(0,"span"),c._uU(1),c.qZA()),2&e){const e=c.oxw(2);c.xp6(1),c.AsE("",e.textLength,"/",e.fieldlength,"")}}function B(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"div",14)(1,"textarea",15,16),c.NdJ("ngModelChange",(function(t){c.CHM(e);const s=c.oxw();return c.KtG(s.value=t)}))("system-resize",(function(t){c.CHM(e);const s=c.oxw();return c.KtG(s.resize(t))}))("change",(function(t){c.CHM(e);const s=c.oxw();return c.KtG(s.change(t))})),c.qZA(),c.YNc(4,R,2,2,"button",17),c.TgZ(5,"div",18),c._UZ(6,"field-messages",19),c.YNc(7,j,2,2,"span",20),c.qZA()()}if(2&e){const e=c.oxw();c.Q6J("ngClass",e.getFieldClass()),c.xp6(1),c.Q6J("maxlength",e.maxLength)("ngModel",e.value)("ngStyle",e.getTextAreaStyle()),c.xp6(3),c.Q6J("ngIf",e.speechRecognition),c.xp6(2),c.Q6J("fieldname",e.fieldname),c.xp6(1),c.Q6J("ngIf",e.fieldlength>0)}}let G=(()=>{var e;class fieldText extends r.O{constructor(e,t,s,n,o,l){super(e,t,s,n,o),(0,i.Z)(this,"model",void 0),(0,i.Z)(this,"view",void 0),(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"router",void 0),(0,i.Z)(this,"modalservice",void 0),(0,i.Z)(this,"speechRecognition",!1),(0,i.Z)(this,"fixedHeight",void 0),(0,i.Z)(this,"fieldlength",0),(0,i.Z)(this,"striphtml",!1),(0,i.Z)(this,"textField",void 0),this.model=e,this.view=t,this.language=s,this.metadata=n,this.router=o,this.modalservice=l}ngOnInit(){super.ngOnInit(),(window.SpeechRecognition||window.webkitSpeechRecognition)&&(this.speechRecognition=this.fieldconfig.speechRecognition),this.getFieldLength(),this.setStripHtml()}setStripHtml(){this.fieldconfig.striphtml&&(this.striphtml=this.fieldconfig.striphtml)}getFieldLength(){let e=this.metadata.getFieldDefs(this.model.module,this.fieldname);e.len&&(this.fieldlength=parseInt(e.len,10)),this.fieldconfig.maxlength&&(!this.fieldlength||parseInt(this.fieldconfig.maxlength,10)<this.fieldlength)&&(this.fieldlength=this.fieldconfig.maxlength)}get maxLength(){return this.fieldlength>0?this.fieldlength:65e3}resize(e){this.fixedHeight=e.height}getTextAreaStyle(){let e=this.fieldconfig.minheight?this.fieldconfig.minheight.replace("px",""):80,t={"min-height":e+"px","max-height":(this.fieldconfig.maxheight?this.fieldconfig.maxheight.replace("px",""):300)+"px",height:this.fixedHeight?this.fixedHeight+"px":e+"px"};return!this.fixedHeight&&this.textField&&this.fieldconfig.maxheight&&(t.height=(this.textField.element.nativeElement.scrollHeight+2<this.fieldconfig.maxheight?this.textField.element.nativeElement.scrollHeight+2:this.fieldconfig.maxheight)+"px"),t}toSpeech(){let e=new SpeechSynthesisUtterance;e.text=this.value,e.lang=this.getSpeechLanguage(),speechSynthesis.speak(e)}getSpeechLanguage(){let e=this.language.currentlanguage.split("_");return 2!=e.length?"en-US":e[0]+"-"+e[1].toUpperCase()}get truncated(){return!!this.fieldconfig.truncate}speechRecognitionStart(){this.modalservice.openModal("SpeechRecognition",!1).subscribe((e=>{e.instance.textfield=this.textField}))}change(e){e.target.value&&(this.value=e.target.value)}get textLength(){return this.value?this.value.length:0}}return e=fieldText,(0,i.Z)(fieldText,"ɵfac",(function(t){return new(t||e)(c.Y36(w.o),c.Y36(k.e),c.Y36(x.d),c.Y36(u.Pu),c.Y36(L.F0),c.Y36(I.o))})),(0,i.Z)(fieldText,"ɵcmp",c.Xpm({type:e,selectors:[["field-text"]],viewQuery:function(e,t){if(1&e&&c.Gf(N,5,c.s_b),2&e){let e;c.iGM(e=c.CRH())&&(t.textField=e.first)}},features:[c.qOj],decls:5,vars:4,consts:[[1,"slds-grid","slds-grid--vertical-align-center"],[3,"fieldname","fieldconfig",4,"ngIf"],["class","slds-col--bump-left",3,"click",4,"ngIf"],[3,"fielddisplayclass","editable","fieldconfig","fieldid",4,"ngIf"],["class","slds-form-element__control slds-is-relative","style","position:relative;",3,"ngClass",4,"ngIf"],[3,"fieldname","fieldconfig"],[1,"slds-col--bump-left",3,"click"],["icon","volume_high","size","xx-small"],[3,"fielddisplayclass","editable","fieldconfig","fieldid"],["style","white-space: pre-line;",4,"ngIf","ngIfElse"],["truncateddisplay",""],[2,"white-space","pre-line"],["style","max-width: 200px; text-overflow: ellipsis","class","slds-truncate",3,"title",4,"ngIf"],[1,"slds-truncate",2,"max-width","200px","text-overflow","ellipsis",3,"title"],[1,"slds-form-element__control","slds-is-relative",2,"position","relative",3,"ngClass"],[1,"slds-textarea","slds-scrollable--y","slds-m-vertical--xx-small",3,"maxlength","ngModel","ngStyle","ngModelChange","system-resize","change"],["focus","","textField",""],["class","slds-button slds-button_small slds-button_icon slds-is-absolute","style","right:8px;",3,"click",4,"ngIf"],[1,"slds-grid","slds-grid--vertical-align-center","slds-grid--align-spread"],[1,"slds-grow",3,"fieldname"],[4,"ngIf"],[1,"slds-button","slds-button_small","slds-button_icon","slds-is-absolute",2,"right","8px",3,"click"],[3,"size","icon"]],template:function(e,t){1&e&&(c.TgZ(0,"div",0),c.YNc(1,F,1,2,"field-label",1),c.YNc(2,q,2,0,"div",2),c.qZA(),c.YNc(3,U,4,6,"field-generic-display",3),c.YNc(4,B,8,7,"div",4)),2&e&&(c.xp6(1),c.Q6J("ngIf",t.displayLabel),c.xp6(1),c.Q6J("ngIf",t.value),c.xp6(1),c.Q6J("ngIf",!t.isEditMode()),c.xp6(1),c.Q6J("ngIf",t.isEditable()&&t.isEditMode()))},dependencies:[n.mk,n.O5,n.PC,o.Fj,o.JJ,o.nD,o.On,T.J,M.r,S.h,h.q,A.D,J.a,O.u],encapsulation:2})),fieldText})();function P(e,t){if(1&e&&c._UZ(0,"field-label",3),2&e){const e=c.oxw();c.Q6J("fieldname",e.fieldname)("fieldconfig",e.fieldconfig)}}function H(e,t){if(1&e&&(c.TgZ(0,"field-generic-display",4)(1,"div",5),c._uU(2),c.qZA()()),2&e){const e=c.oxw();c.Q6J("fielddisplayclass",e.fielddisplayclass)("editable",e.isEditable())("fieldconfig",e.fieldconfig),c.xp6(2),c.hij(" ",e.value," ")}}function z(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"div",6)(1,"input",7),c.NdJ("ngModelChange",(function(t){c.CHM(e);const s=c.oxw();return c.KtG(s.value=t)})),c.qZA(),c._UZ(2,"field-messages",8),c.qZA()}if(2&e){const e=c.oxw();c.Q6J("ngClass",e.getFieldClass()),c.xp6(1),c.Q6J("min",e.min)("max",e.max)("ngModel",e.value),c.xp6(1),c.Q6J("fieldname",e.fieldname)}}let V=(()=>{var e;class fieldNumber extends r.O{constructor(e,t,s,n,o){super(e,t,s,n,o),(0,i.Z)(this,"model",void 0),(0,i.Z)(this,"view",void 0),(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"router",void 0),this.model=e,this.view=t,this.language=s,this.metadata=n,this.router=o}get min(){return 0}get max(){return 120}}return e=fieldNumber,(0,i.Z)(fieldNumber,"ɵfac",(function(t){return new(t||e)(c.Y36(w.o),c.Y36(k.e),c.Y36(x.d),c.Y36(u.Pu),c.Y36(L.F0))})),(0,i.Z)(fieldNumber,"ɵcmp",c.Xpm({type:e,selectors:[["field-number"]],features:[c.qOj],decls:3,vars:3,consts:[[3,"fieldname","fieldconfig",4,"ngIf"],[3,"fielddisplayclass","editable","fieldconfig",4,"ngIf"],["class","slds-form-element__control slds-grid slds-grid--align-spread slds-p-around--xx-small",3,"ngClass",4,"ngIf"],[3,"fieldname","fieldconfig"],[3,"fielddisplayclass","editable","fieldconfig"],[1,"slds-text-align_right"],[1,"slds-form-element__control","slds-grid","slds-grid--align-spread","slds-p-around--xx-small",3,"ngClass"],["type","number",1,"slds-input","slds-text-align_right",3,"min","max","ngModel","ngModelChange"],[3,"fieldname"]],template:function(e,t){1&e&&(c.YNc(0,P,1,2,"field-label",0),c.YNc(1,H,3,4,"field-generic-display",1),c.YNc(2,z,3,5,"div",2)),2&e&&(c.Q6J("ngIf",t.displayLabel),c.xp6(1),c.Q6J("ngIf",!t.isEditMode()),c.xp6(1),c.Q6J("ngIf",t.isEditable()&&t.isEditMode()))},dependencies:[n.mk,n.O5,o.Fj,o.wV,o.JJ,o.qQ,o.Fd,o.On,h.q,A.D,J.a],encapsulation:2})),fieldNumber})();var K=s(5861),$=s(4505),X=s(3278),W=s(3369),ee=s(6625),te=s(6550),se=s(3463),ie=s(3091);function ne(e,t){if(1&e&&c._UZ(0,"field-label",5),2&e){const e=c.oxw();c.Q6J("fieldname",e.fieldname)("fieldconfig",e.fieldconfig)}}function oe(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"button",6),c.NdJ("click",(function(){c.CHM(e);const t=c.oxw();return c.KtG(t.setEditMode())})),c._UZ(1,"system-button-icon",7),c.qZA()}2&e&&(c.xp6(1),c.Q6J("icon","edit"))}function le(e,t){if(1&e&&(c.TgZ(0,"div",11),c.NdJ("click",(function(e){return e.preventDefault()})),c.qZA()),2&e){const e=c.oxw(2);c.Q6J("innerHTML",e.parsedHtml,c.oJD)}}function ae(e,t){if(1&e&&c._UZ(0,"iframe",12),2&e){const e=c.oxw(2);c.Q6J("src",e.sanitizedValue,c.uOi)("ngStyle",e.heightStyle)}}function de(e,t){if(1&e&&(c.TgZ(0,"field-generic-display",8),c.YNc(1,le,1,1,"div",9),c.YNc(2,ae,1,2,"iframe",10),c.qZA()),2&e){const e=c.oxw();c.Q6J("fielddisplayclass",e.fielddisplayclass)("editable",!1)("fieldconfig",e.fieldconfig),c.xp6(1),c.Q6J("ngIf",!e.fieldconfig.asiframe),c.xp6(1),c.Q6J("ngIf",e.fieldconfig.asiframe)}}function re(e,t){if(1&e&&(c.TgZ(0,"option",26),c._UZ(1,"system-label",27),c.qZA()),2&e){const e=t.$implicit;c.Q6J("value",e.id),c.xp6(1),c.Q6J("label",e.label)}}function ce(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"li")(1,"div",17)(2,"label",18),c._UZ(3,"system-label",19),c._uU(4,": "),c.qZA(),c.TgZ(5,"div",20)(6,"div",21)(7,"select",22),c.NdJ("ngModelChange",(function(t){c.CHM(e);const s=c.oxw(2);return c.KtG(s.selectedSignatureId=t)}))("ngModelChange",(function(){c.CHM(e);const t=c.oxw(2);return c.KtG(t.renderSelectedSignature())})),c.TgZ(8,"option",23),c._UZ(9,"system-label",24),c.qZA(),c.YNc(10,re,2,2,"option",25),c.qZA()()()()()}if(2&e){const e=c.oxw(2);c.xp6(7),c.Q6J("ngModel",e.selectedSignatureId)("disabled",0==(null==e.signatures?null:e.signatures.length)),c.xp6(3),c.Q6J("ngForOf",e.signatures)}}function ue(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"div",13)(1,"system-html-editor",14),c.NdJ("ngModelChange",(function(t){c.CHM(e);const s=c.oxw();return c.KtG(s.value=t)}))("save$",(function(t){c.CHM(e);const s=c.oxw();return c.KtG(s.save(t))})),c.YNc(2,ce,11,3,"li",15),c.qZA(),c._UZ(3,"field-messages",16),c.qZA()}if(2&e){const e=c.oxw();c.Q6J("ngClass",e.getFieldClass()),c.xp6(1),c.Q6J("ngModel",e.value)("extendedmode",!e.fieldconfig.simplemode)("innerheight",e.fieldconfig.innerheight)("useMedialFile",e.metadata.checkModuleAcl("MediaFiles","list")&&e.metadata.checkModuleAcl("MediaFiles","view")),c.xp6(1),c.Q6J("ngIf",null==e.fieldconfig?null:e.fieldconfig.useSignature),c.xp6(1),c.Q6J("fieldname",e.fieldname)}}let he=(()=>{var e;class fieldHtml extends r.O{constructor(e,t,s,n,o,l,a,d,r,c,u,h,m){super(e,t,s,n,a),(0,i.Z)(this,"model",void 0),(0,i.Z)(this,"view",void 0),(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"backend",void 0),(0,i.Z)(this,"toast",void 0),(0,i.Z)(this,"router",void 0),(0,i.Z)(this,"injector",void 0),(0,i.Z)(this,"broadcast",void 0),(0,i.Z)(this,"configurationService",void 0),(0,i.Z)(this,"modal",void 0),(0,i.Z)(this,"cdRef",void 0),(0,i.Z)(this,"sanitized",void 0),(0,i.Z)(this,"selectedSignatureId",""),(0,i.Z)(this,"signatures",[]),(0,i.Z)(this,"parsedHtml",""),(0,i.Z)(this,"sanitizedValue",void 0),(0,i.Z)(this,"fullValue_cached",void 0),(0,i.Z)(this,"fullValue",""),(0,i.Z)(this,"stylesheetField",""),(0,i.Z)(this,"stylesheetToUse",""),(0,i.Z)(this,"stylesheets",void 0),(0,i.Z)(this,"useStylesheets",void 0),(0,i.Z)(this,"signaturePreviousPosition",-1),this.model=e,this.view=t,this.language=s,this.metadata=n,this.backend=o,this.toast=l,this.router=a,this.injector=d,this.broadcast=r,this.configurationService=c,this.modal=u,this.cdRef=h,this.sanitized=m,this.stylesheets=this.metadata.getHtmlStylesheetNames()}get heightStyle(){return{height:this.fieldconfig.height?this.fieldconfig.height:"500px"}}get styleTag(){return this.stylesheetId?"<style>"+this.metadata.getHtmlStylesheetCode(this.stylesheetId)+"</style>":""}get stylesheetId(){return _.isEmpty(this.model.getField(this.stylesheetField))?this.stylesheetId=this.stylesheetToUse:this.model.getField(this.stylesheetField)}set stylesheetId(e){e&&this.model.setField(this.stylesheetField,e)}get value(){return this.model.getField(this.fieldname)}set value(e){this.model.setField(this.fieldname,e),this.setHtmlValue()}ngOnInit(){var e=this;return(0,K.Z)((function*(){e.setStylesheetField(),e.setStylesheetsToUse(),e.setHtmlValue(),e.fieldconfig?.useSignature&&(e.model.getField("mailbox_id")&&(yield e.loadMailboxSignature()),e.loadUserSignature()),e.modelChangesSubscriber()}))()}renderSelectedSignature(){if(this.clearSignature(),!this.selectedSignatureId)return;this.value||(this.value="");const e=`<div data-signature="" style="margin: 10px 0">${this.signatures.find((e=>e.id==this.selectedSignatureId)).content}</div>`;this.signaturePreviousPosition>-1?this.value=`${this.value.slice(0,this.signaturePreviousPosition)} ${e} ${this.value.slice(e.length+this.signaturePreviousPosition)}`:this.value=`<p><br></p> ${e} ${this.value}`}setEditMode(){this.model.startEdit(),this.view.setEditMode(),this.cdRef.detectChanges()}encodeHtml(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}loadMailboxSignature(){if(!this.isEditMode())return;const e=this.model.getField("mailbox_id");if(!e)return;const t=this.configurationService.getData("mailbox_signature_"+e);if(!t)return this.backend.get("Mailboxes",e).subscribe({next:t=>{t.email_signature&&(this.configurationService.setData("mailbox_signature_"+e,t.email_signature),this.addSignature(e,t.email_signature,"LBL_MAILBOX"),this.selectedSignatureId=e,this.renderSelectedSignature())}});this.addSignature(e,t,"LBL_MAILBOX"),this.selectedSignatureId=e,this.renderSelectedSignature()}addSignature(e,t,s){const i=this.signatures.find((t=>t.id==e));i?i.content=t:this.signatures.push({id:e,content:t,label:s})}loadUserSignature(){if(!this.isEditMode())return;const e=this.configurationService.getData("usersignature");if(!e)return;this.signatures.length;this.addSignature("user",e,"LBL_MY_SIGNATURE")}clearSignature(){if(!this.value)return;const e=document.createElement("div");e.innerHTML=this.value,Array.from(e.querySelectorAll("div[data-signature]")).forEach((t=>{this.signaturePreviousPosition=e.innerHTML.indexOf(t.outerHTML),t.parentNode.removeChild(t)})),this.value=e.innerHTML}setStylesheetField(){let e=this.metadata.getFieldDefs(this.model.module,this.fieldname);_.isEmpty(e.stylesheet_id_field)||(this.stylesheetField=e.stylesheet_id_field)}setStylesheetsToUse(){this.useStylesheets=!_.isEmpty(this.stylesheetField)&&!_.isEmpty(this.stylesheets),this.useStylesheets&&(1===this.stylesheets.length?this.stylesheetToUse=this.stylesheets[0].id:_.isEmpty(this.fieldconfig.stylesheetId)?this.stylesheetToUse=this.metadata.getHtmlStylesheetToUse(this.model.module,this.fieldname):this.stylesheetToUse=this.fieldconfig.stylesheetId)}setSanitizedValue(){return this.value&&(this.value.includes("</html>")?this.fullValue=this.value:this.fullValue=`<html><head><base target="_blank">${this.styleTag}</head><body class="spice">${this.value}</body></html>`),this.fullValue!=this.fullValue_cached&&(this.sanitizedValue=this.sanitized.bypassSecurityTrustResourceUrl(this.fullValue?"data:text/html;charset=UTF-8,"+encodeURIComponent(this.fullValue):""),this.fullValue_cached=this.fullValue),this.sanitizedValue}modelChangesSubscriber(){this.subscriptions.add(this.model.observeFieldChanges(this.fieldname).subscribe({next:e=>{this.setHtmlValue()}})),this.subscriptions.add(this.model.observeFieldChanges("mailbox_id").subscribe({next:e=>{this.fieldconfig?.useSignature&&e&&!this.signatures.some((t=>t.id==e))&&this.loadMailboxSignature()}}))}setHtmlValue(){let e=/<code>[\s\S]*?<\/code>/g,t=e.exec(this.value);for(;null!=t;)this.value=this.value.replace(t,this.encodeHtml(t)).replace("&lt;code&gt;","<code>").replace("&lt;/code&gt;","</code>"),t=e.exec(this.value);this.parsedHtml=this.sanitized.bypassSecurityTrustHtml(this.value),this.setSanitizedValue()}save(e){let t={date_modified:this.model.getField("date_modified"),[this.fieldname]:e};this.backend.save(this.model.module,this.model.id,t).subscribe({next:e=>{this.model.endEdit(),this.model.setField("date_modified",e.date_modified,!0),this.value=e[this.fieldname],this.model.startEdit(),this.toast.sendToast(this.language.getLabel("LBL_DATA_SAVED")+".","success")},error:e=>{this.toast.sendToast(this.language.getLabel("LBL_ERROR")+" "+e.status,"error",e.error.error.message)}})}}return e=fieldHtml,(0,i.Z)(fieldHtml,"ɵfac",(function(t){return new(t||e)(c.Y36(w.o),c.Y36(k.e),c.Y36(x.d),c.Y36(u.Pu),c.Y36($.y),c.Y36(X.A),c.Y36(L.F0),c.Y36(c.zs3),c.Y36(W.f),c.Y36(ee.C),c.Y36(I.o),c.Y36(c.sBO),c.Y36(te.H7))})),(0,i.Z)(fieldHtml,"ɵcmp",c.Xpm({type:e,selectors:[["field-html"]],features:[c.qOj],decls:6,vars:4,consts:[[1,"slds-grid","slds-grid--vertical-align-center","slds-grid--align-spread"],[3,"fieldname","fieldconfig",4,"ngIf"],["class","slds-button slds-button--icon slds-m-left--xx-small spice-hover-button",3,"click",4,"ngIf"],[3,"fielddisplayclass","editable","fieldconfig",4,"ngIf"],["class","slds-form-element__control",3,"ngClass",4,"ngIf"],[3,"fieldname","fieldconfig"],[1,"slds-button","slds-button--icon","slds-m-left--xx-small","spice-hover-button",3,"click"],[3,"icon"],[3,"fielddisplayclass","editable","fieldconfig"],["class","slds-size--1-of-1 slds-rich-text-editor__output","style","white-space: normal; resize: vertical; overflow-y: auto;",3,"innerHTML","click",4,"ngIf"],["style","resize: vertical;","width","100%","frameborder","0","seamless","true","sandbox","",3,"src","ngStyle",4,"ngIf"],[1,"slds-size--1-of-1","slds-rich-text-editor__output",2,"white-space","normal","resize","vertical","overflow-y","auto",3,"innerHTML","click"],["width","100%","frameborder","0","seamless","true","sandbox","",2,"resize","vertical",3,"src","ngStyle"],[1,"slds-form-element__control",3,"ngClass"],[3,"ngModel","extendedmode","innerheight","useMedialFile","ngModelChange","save$"],[4,"ngIf"],[3,"fieldname"],[1,"slds-form-element","slds-grid"],[1,"slds-form-element__label"],["label","LBL_SIGNATURE"],[1,"slds-form-element__control"],[1,"slds-select_container"],[1,"slds-select",3,"ngModel","disabled","ngModelChange"],["value",""],["label","LBL_NONE"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[3,"label"]],template:function(e,t){1&e&&(c.TgZ(0,"div",0)(1,"div"),c.YNc(2,ne,1,2,"field-label",1),c.qZA(),c.YNc(3,oe,2,1,"button",2),c.qZA(),c.YNc(4,de,3,5,"field-generic-display",3),c.YNc(5,ue,4,7,"div",4)),2&e&&(c.xp6(2),c.Q6J("ngIf",t.displayLabel),c.xp6(1),c.Q6J("ngIf",!t.isEditMode()&&t.isEditable()),c.xp6(1),c.Q6J("ngIf",!t.isEditMode()),c.xp6(1),c.Q6J("ngIf",t.isEditable()&&t.isEditMode()))},dependencies:[n.mk,n.sg,n.O5,n.PC,o.YN,o.Kr,o.EJ,o.JJ,o.On,T.J,se._,ie.e,h.q,A.D,J.a],encapsulation:2})),fieldHtml})();var me=s(3917);function ge(e,t){if(1&e&&(c.TgZ(0,"option",6),c._uU(1),c.qZA()),2&e){const e=t.$implicit;c.s9C("value",e.id),c.xp6(1),c.Oqu(e.name)}}function pe(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"select",3),c.NdJ("ngModelChange",(function(t){c.CHM(e);const s=c.oxw();return c.KtG(s.stylesheetId=t)}))("change",(function(){c.CHM(e);const t=c.oxw();return c.KtG(t.changeStylesheet())})),c._UZ(1,"option",4),c.YNc(2,ge,2,2,"option",5),c.qZA()}if(2&e){const e=c.oxw();c.Q6J("ngModel",e.stylesheetId),c.xp6(2),c.Q6J("ngForOf",e.stylesheets)}}let fe=(()=>{var e;class fieldHtmlEditor{get content(){return this.fieldvalue}set content(e){this.fieldvalue=e,this.contentchange.emit(e)}set input_stylesheetId(e){this.stylesheetIdValue=e}set stylesheetId(e){this.stylesheetIdValue=e,this.stylesheetIdChange.emit(e)}get stylesheetId(){return this.stylesheetIdValue}constructor(e,t,s,n){(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"footer",void 0),(0,i.Z)(this,"configurationService",void 0),(0,i.Z)(this,"modal",void 0),(0,i.Z)(this,"fieldvalue",""),(0,i.Z)(this,"fieldid",""),(0,i.Z)(this,"fieldconfig",{}),(0,i.Z)(this,"useStylesheetSwitcher",void 0),(0,i.Z)(this,"useStylesheets",void 0),(0,i.Z)(this,"editor",null),(0,i.Z)(this,"stylesheets",[]),(0,i.Z)(this,"stylesheetIdValue",""),(0,i.Z)(this,"tinymceConfig",{remove_script_host:!0,relative_urls:!1,menubar:!1,statusbar:!0,resize:!0,browser_spellcheck:!0,image_advtab:!0,paste_as_text:!0,paste_filter_drop:!0,plugins:["link","code","image","lists","paste","table"],toolbar:"undo redo | formatselect | styleselect bold italic removeformat | bullist numlist | link image table | code",skin_url:"vendor/tinymce/skins/lightgray",setup:e=>{this.editor=e,e.on("change",(()=>{const t=e.getContent();this.content=t})),e.on("init",(()=>{this.fieldvalue&&this.editor.setContent(this.fieldvalue)}))},formats:{alignleft:{selector:"p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li,table,img",classes:"align-left"},aligncenter:{selector:"p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li,table,img",classes:"align-center"},alignright:{selector:"p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li,table,img",classes:"align-right"},alignjustify:{selector:"p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li,table,img",classes:"align-justify"},strikethrough:{inline:"del"}},style_formats:[{title:"Inline",items:[{title:"fett",icon:"bold",format:"bold"},{title:"kursiv",icon:"italic",format:"italic"},{title:"unterstrichen",icon:"underline",format:"underline"},{title:"strikethrough",icon:"strikethrough",format:"strikethrough"},{title:"hochgestellt",icon:"superscript",format:"superscript"},{title:"tiefgestellt",icon:"subscript",format:"subscript"}]},{title:"Ausrichtung",items:[{title:"links",icon:"alignleft",format:"alignleft"},{title:"mittig",icon:"aligncenter",format:"aligncenter"},{title:"rechts",icon:"alignright",format:"alignright"},{title:"Blocksatz",icon:"alignjustify",format:"alignjustify"}]}],style_formats_merge:!1,body_class:"spice"}),(0,i.Z)(this,"oldStylesheetId",""),(0,i.Z)(this,"contentchange",new c.vpe),(0,i.Z)(this,"stylesheetIdChange",new c.vpe),this.metadata=e,this.footer=t,this.configurationService=s,this.modal=n,this.stylesheets=this.metadata.getHtmlStylesheetNames()}ngOnInit(){this.tinymceConfig.selector="#"+this.fieldid,this.tinymceConfig.document_base_url=this.configurationService.getFrontendUrl()}ngAfterViewInit(){this.metadata.loadLibs("tinymce").subscribe((e=>{this.useStylesheets&&this.setStylesheet(),tinymce.init(this.tinymceConfig)}))}changeStylesheet(){this.editor&&tinymce.remove(this.editor),this.setStylesheet(),tinymce.init(this.tinymceConfig)}setStylesheet(){let e=[];if(this.oldStylesheetId=this.stylesheetId,_.isEmpty(this.stylesheetId))delete this.tinymceConfig.content_style;else{if(e=this.metadata.getHtmlFormats(this.stylesheetId),e.length){let t=0;this.tinymceConfig.block_formats="",this.tinymceConfig.extended_valid_elements=[],this.tinymceConfig.custom_elements=[],this.tinymceConfig.block_formats+="Absatz=p;",this.tinymceConfig.style_formats.push({title:"Weiteres",items:[]});for(let s of e)if(_.isEmpty(s.block))this.tinymceConfig.style_formats[2].items.push({title:s.name,inline:s.inline,classes:s.classes,styles:s.styles});else{let e;t++,this.tinymceConfig.formats[e="custom_format_"+t]={title:s.name,inline:s.inline,block:s.block,classes:s.classes,styles:s.styles,wrapper:Boolean(Number(s.wrapper))},this.tinymceConfig.block_formats+=s.name+"="+e+";",this.tinymceConfig.extended_valid_elements.indexOf(s.block)&&this.tinymceConfig.extended_valid_elements.push(s.block),this.tinymceConfig.custom_elements.indexOf(s.block)&&this.tinymceConfig.custom_elements.push(s.block)}0===this.tinymceConfig.style_formats[2].items.length&&this.tinymceConfig.style_formats.splice(2,1)}this.tinymceConfig.content_style=this.metadata.getHtmlStylesheetCode(this.stylesheetId)}}fullScreen(){this.modal.openModal("SystemTinyMCEModal").subscribe((e=>{e.instance.content=this.fieldvalue,e.instance.updateContent.subscribe((e=>{this.fieldvalue=e,this.editor.setContent(e)}))}))}ngOnDestroy(){tinymce.remove(this.editor)}ngOnChanges(){this.editor&&this.fieldvalue&&this.editor.getContent()!==this.fieldvalue&&this.editor.setContent(this.fieldvalue),this.oldStylesheetId.length&&this.oldStylesheetId!=this.stylesheetId&&this.changeStylesheet()}}return e=fieldHtmlEditor,(0,i.Z)(fieldHtmlEditor,"ɵfac",(function(t){return new(t||e)(c.Y36(u.Pu),c.Y36(me.M),c.Y36(ee.C),c.Y36(I.o))})),(0,i.Z)(fieldHtmlEditor,"ɵcmp",c.Xpm({type:e,selectors:[["field-html-editor"]],inputs:{fieldvalue:"fieldvalue",fieldid:"fieldid",fieldconfig:"fieldconfig",useStylesheetSwitcher:"useStylesheetSwitcher",useStylesheets:"useStylesheets",input_stylesheetId:["stylesheetId","input_stylesheetId"]},outputs:{contentchange:"contentchange",stylesheetIdChange:"stylesheetIdChange"},features:[c.TTD],decls:3,vars:2,consts:[[1,"slds-m-vertical--xx-small"],[1,"slds-textarea","slds-scrollable--y","slds-m-vertical--xx-small",2,"height","250px",3,"id"],["class","slds-select slds-m-top--x-small",3,"ngModel","ngModelChange","change",4,"ngIf"],[1,"slds-select","slds-m-top--x-small",3,"ngModel","ngModelChange","change"],["value",""],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(e,t){1&e&&(c.TgZ(0,"div",0),c._UZ(1,"textarea",1),c.YNc(2,pe,3,2,"select",2),c.qZA()),2&e&&(c.xp6(1),c.Q6J("id",t.fieldid),c.xp6(1),c.Q6J("ngIf",t.useStylesheetSwitcher))},dependencies:[n.sg,n.O5,o.YN,o.Kr,o.EJ,o.JJ,o.On],styles:["[_nghost-%COMP%]   .mce-ico[_ngcontent-%COMP%]{color:#54698d;font-size:12px}","[_nghost-%COMP%]   .mce-text[_ngcontent-%COMP%]{color:#54698d;font-size:12px}","[_nghost-%COMP%]   .mce-btn[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{color:#54698d;font-size:12px}","[_nghost-%COMP%]   .mce-tinymce[_ngcontent-%COMP%]{border-radius:4px}","[_nghost-%COMP%]   .mce-widget[_ngcontent-%COMP%]{font-family:Titillium Web,sans-serif}"]})),fieldHtmlEditor})();const be=["editor"];let ve=(()=>{var e;class fieldWYSIWYGEditor{constructor(e,t,s){(0,i.Z)(this,"model",void 0),(0,i.Z)(this,"view",void 0),(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"editor",void 0),(0,i.Z)(this,"fieldname",""),(0,i.Z)(this,"fieldSelection",void 0),this.model=e,this.view=t,this.language=s}get fieldcontent(){return this.model.getField(this.fieldname)}ngAfterViewInit(){this.editor.element.nativeElement.innerHTML=this.model.getField(this.fieldname)}eventHandler(e){this.fieldSelection=window.getSelection(),this.model.setField(this.fieldname,e.srcElement.innerHTML)}}return e=fieldWYSIWYGEditor,(0,i.Z)(fieldWYSIWYGEditor,"ɵfac",(function(t){return new(t||e)(c.Y36(w.o),c.Y36(k.e),c.Y36(x.d))})),(0,i.Z)(fieldWYSIWYGEditor,"ɵcmp",c.Xpm({type:e,selectors:[["field-wysiwyg-editor"]],viewQuery:function(e,t){if(1&e&&c.Gf(be,7,c.s_b),2&e){let e;c.iGM(e=c.CRH())&&(t.editor=e.first)}},inputs:{fieldname:"fieldname"},decls:54,vars:9,consts:[[1,"demo-only",2,"min-height","180px"],[1,"slds-rich-text-editor","slds-form-element","slds-grid","slds-grid_vertical","slds-nowrap"],["role","toolbar",1,"slds-rich-text-editor__toolbar","slds-shrink-none"],["aria-label","Format text",1,"slds-button-group-list"],["tabindex","0","title","Provide description of action",1,"slds-button","slds-button_icon","slds-button_icon-border-filled"],[3,"icon"],[1,"slds-assistive-text"],["tabindex","-1","title","Provide description of action",1,"slds-button","slds-button_icon","slds-button_icon-border-filled"],["aria-label","Format body",1,"slds-button-group-list"],["aria-label","Remove Formatting",1,"slds-button-group-list"],[1,"slds-rich-text-editor__textarea","slds-grid"],["aria-label","Compose text","contenteditable","true",1,"slds-rich-text-area__content","slds-text-color_weak","slds-grow",3,"input"],["editor",""]],template:function(e,t){1&e&&(c.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"ul",3)(4,"li")(5,"button",4),c._UZ(6,"system-button-icon",5),c.TgZ(7,"span",6),c._uU(8,"Bold"),c.qZA()()(),c.TgZ(9,"li")(10,"button",7),c._UZ(11,"system-button-icon",5),c.TgZ(12,"span",6),c._uU(13,"Italic"),c.qZA()()(),c.TgZ(14,"li")(15,"button",7),c._UZ(16,"system-button-icon",5),c.TgZ(17,"span",6),c._uU(18,"Underline"),c.qZA()()(),c.TgZ(19,"li")(20,"button",7),c._UZ(21,"system-button-icon",5),c.TgZ(22,"span",6),c._uU(23,"Strike Through"),c.qZA()()()(),c.TgZ(24,"ul",8)(25,"li")(26,"button",7),c._UZ(27,"system-button-icon",5),c.TgZ(28,"span",6),c._uU(29,"Bulleted List"),c.qZA()()(),c.TgZ(30,"li")(31,"button",7),c._UZ(32,"system-button-icon",5),c.TgZ(33,"span",6),c._uU(34,"Numbered List"),c.qZA()()(),c.TgZ(35,"li")(36,"button",7),c._UZ(37,"system-button-icon",5),c.TgZ(38,"span",6),c._uU(39,"Indent"),c.qZA()()(),c.TgZ(40,"li")(41,"button",7),c._UZ(42,"system-button-icon",5),c.TgZ(43,"span",6),c._uU(44,"Outdent"),c.qZA()()()(),c.TgZ(45,"ul",9)(46,"li")(47,"button",7),c._UZ(48,"system-button-icon",5),c.TgZ(49,"span",6),c._uU(50,"Remove Formatting"),c.qZA()()()()(),c.TgZ(51,"div",10)(52,"div",11,12),c.NdJ("input",(function(e){return t.eventHandler(e)})),c.qZA()()()()),2&e&&(c.xp6(6),c.Q6J("icon","bold"),c.xp6(5),c.Q6J("icon","italic"),c.xp6(5),c.Q6J("icon","underline"),c.xp6(5),c.Q6J("icon","strikethrough"),c.xp6(6),c.Q6J("icon","richtextbulletedlist"),c.xp6(5),c.Q6J("icon","richtextnumberedlist"),c.xp6(5),c.Q6J("icon","richtextindent"),c.xp6(5),c.Q6J("icon","richtextoutdent"),c.xp6(6),c.Q6J("icon","remove_formatting"))},dependencies:[T.J],encapsulation:2})),fieldWYSIWYGEditor})();var Ze=s(2422),_e=s(4270),ye=s(5621);function xe(e,t){if(1&e&&c._UZ(0,"field-label",3),2&e){const e=c.oxw();c.Q6J("fieldname",e.fieldname)("fieldconfig",e.fieldconfig)}}function we(e,t){if(1&e&&(c.TgZ(0,"field-generic-display",4)(1,"div",5),c._UZ(2,"system-display-number",6),c.qZA()()),2&e){const e=c.oxw();c.Q6J("fielddisplayclass",e.fielddisplayclass)("fieldconfig",e.fieldconfig)("editable",e.isEditable()),c.xp6(2),c.Q6J("number",e.value)("precision",e.precision)}}function Te(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"div",7)(1,"div",8)(2,"system-input-number",9),c.NdJ("ngModelChange",(function(t){c.CHM(e);const s=c.oxw();return c.KtG(s.value=t)})),c.qZA()(),c._UZ(3,"field-messages",10),c.qZA()}if(2&e){const e=c.oxw();c.Q6J("ngClass",e.getFieldClass()),c.xp6(2),c.Q6J("ngModel",e.value)("asNumber",!0)("precision",e.precision),c.xp6(1),c.Q6J("fieldname",e.fieldname)}}let Ce=(()=>{var e;class fieldFloat extends r.O{constructor(e,t,s,n,o,l){super(e,t,s,n,o),(0,i.Z)(this,"model",void 0),(0,i.Z)(this,"view",void 0),(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"router",void 0),(0,i.Z)(this,"userpreferences",void 0),(0,i.Z)(this,"precision",0),this.model=e,this.view=t,this.language=s,this.metadata=n,this.router=o,this.userpreferences=l}ngOnInit(){this.precision=void 0===this.fieldconfig.precision||""===this.fieldconfig.precision?parseInt(this.userpreferences.toUse.currency_significant_digits,10):parseInt(this.fieldconfig.precision,10)}}return e=fieldFloat,(0,i.Z)(fieldFloat,"ɵfac",(function(t){return new(t||e)(c.Y36(w.o),c.Y36(k.e),c.Y36(x.d),c.Y36(u.Pu),c.Y36(L.F0),c.Y36(Ze.z))})),(0,i.Z)(fieldFloat,"ɵcmp",c.Xpm({type:e,selectors:[["field-float"]],features:[c.qOj],decls:3,vars:3,consts:[[3,"fieldname","fieldconfig",4,"ngIf"],[3,"fielddisplayclass","fieldconfig","editable",4,"ngIf"],["class","slds-form-element__control",3,"ngClass",4,"ngIf"],[3,"fieldname","fieldconfig"],[3,"fielddisplayclass","fieldconfig","editable"],[1,"slds-text-align_right"],[3,"number","precision"],[1,"slds-form-element__control",3,"ngClass"],[1,"slds-form-element","slds-m-vertical--xx-small"],[3,"ngModel","asNumber","precision","ngModelChange"],[3,"fieldname"]],template:function(e,t){1&e&&(c.YNc(0,xe,1,2,"field-label",0),c.YNc(1,we,3,5,"field-generic-display",1),c.YNc(2,Te,4,5,"div",2)),2&e&&(c.Q6J("ngIf",t.displayLabel),c.xp6(1),c.Q6J("ngIf",!t.isEditMode()),c.xp6(1),c.Q6J("ngIf",t.isEditable()&&t.isEditMode()))},dependencies:[n.mk,n.O5,o.JJ,o.On,_e.G,ye.i,h.q,A.D,J.a],encapsulation:2})),fieldFloat})();var Ae=s(5547);function ke(e,t){if(1&e&&c._UZ(0,"field-label",3),2&e){const e=c.oxw();c.Q6J("fieldname",e.fieldname)("fieldconfig",e.fieldconfig)}}function Le(e,t){if(1&e&&(c.TgZ(0,"field-generic-display",4)(1,"div",5),c._UZ(2,"system-display-number",6),c.qZA()()),2&e){const e=c.oxw();c.Q6J("fielddisplayclass",e.fielddisplayclass)("fieldconfig",e.fieldconfig)("editable",e.isEditable()),c.xp6(2),c.Q6J("number",e.value)("currency_id",e.currencyId)("precision",e.precision)}}function Ie(e,t){if(1&e&&(c.TgZ(0,"div",16),c._uU(1),c.qZA()),2&e){const e=c.oxw(3);c.xp6(1),c.hij(" ",e.getCurrencySymbol(),"  ")}}function Me(e,t){if(1&e&&(c.TgZ(0,"option",21),c._uU(1),c.qZA()),2&e){const e=t.$implicit;c.Q6J("value",e.id),c.xp6(1),c.AsE("",e.iso," (",e.symbol,") ")}}function Se(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"div",17)(1,"div",18)(2,"select",19),c.NdJ("ngModelChange",(function(t){c.CHM(e);const s=c.oxw(3);return c.KtG(s.currencyId=t)})),c.YNc(3,Me,2,3,"option",20),c.qZA()()()}if(2&e){const e=c.oxw(3);c.xp6(2),c.Q6J("ngModel",e.currencyId),c.xp6(1),c.Q6J("ngForOf",e.currencies)}}const Je=function(e){return{"slds-size--1-of-4":e}};function Oe(e,t){if(1&e&&(c.TgZ(0,"div",13),c.YNc(1,Ie,2,1,"div",14),c.YNc(2,Se,4,2,"div",15),c.qZA()),2&e){const e=c.oxw(2);c.Q6J("ngClass",c.VKq(3,Je,!e.fieldconfig.currencyReadonly)),c.xp6(1),c.Q6J("ngIf",e.fieldconfig.currencyReadonly),c.xp6(1),c.Q6J("ngIf",!e.fieldconfig.currencyReadonly)}}function Ne(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"div",7)(1,"div",8),c.YNc(2,Oe,3,5,"div",9),c.TgZ(3,"div",10)(4,"system-input-number",11),c.NdJ("ngModelChange",(function(t){c.CHM(e);const s=c.oxw();return c.KtG(s.value=t)})),c.qZA()()(),c._UZ(5,"field-messages",12),c.qZA()}if(2&e){const e=c.oxw();c.Q6J("ngClass",e.getFieldClass()),c.xp6(2),c.Q6J("ngIf",e.currencyidfield),c.xp6(2),c.Q6J("ngModel",e.value)("asNumber",!0)("precision",e.precision),c.xp6(1),c.Q6J("fieldname",e.fieldname)}}let Fe=(()=>{var e;class fieldCurrency extends r.O{constructor(e,t,s,n,o,l,a){super(e,t,s,n,o),(0,i.Z)(this,"model",void 0),(0,i.Z)(this,"view",void 0),(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"router",void 0),(0,i.Z)(this,"currency",void 0),(0,i.Z)(this,"userpreferences",void 0),(0,i.Z)(this,"currencies",[]),(0,i.Z)(this,"precision",0),(0,i.Z)(this,"currencyFormat",!0),(0,i.Z)(this,"currencyidfield",""),this.model=e,this.view=t,this.language=s,this.metadata=n,this.router=o,this.currency=l,this.userpreferences=a,this.currencies=this.currency.getCurrencies()}ngOnInit(){if(this.precision=void 0===this.fieldconfig.precision||""===this.fieldconfig.precision?parseInt(this.userpreferences.toUse.currency_significant_digits,10):parseInt(this.fieldconfig.precision,10),this.currencyidfield=this.fieldconfig.field_currencyid,!this.currencyidfield){this.metadata.getModuleFields(this.model.module).currency_id&&(this.currencyidfield="currency_id")}this.setDefaultCurrencyId(),this.setCurrencyFromPreferences()}setDefaultCurrencyId(){if(this.currencyidfield&&!this.model.getField(this.currencyidfield)){let e=this.userpreferences.getPreference("currency");this.currencyId=e||"-99"}}set currencyId(e){this.currencyidfield&&this.model.setField(this.currencyidfield,e)}get currencyId(){return this.currencyidfield?this.model.getField(this.currencyidfield):-99}getCurrencySymbol(){let e,t=-99;if(this.currencyidfield){if(!this.model.getField(this.currencyidfield))return"";t=this.model.getField(this.currencyidfield)}return this.currencies.some((s=>{if(s.id==t)return e=s.symbol,!0})),e}handleViewModeChange(e){"edit"==e&&this.setCurrencyFromPreferences(),super.handleViewModeChange(e)}setCurrencyFromPreferences(){this.currencyidfield&&!this.model.getField(this.currencyidfield)&&this.model.setField(this.currencyidfield,this.userpreferences.toUse.currency)}}return e=fieldCurrency,(0,i.Z)(fieldCurrency,"ɵfac",(function(t){return new(t||e)(c.Y36(w.o),c.Y36(k.e),c.Y36(x.d),c.Y36(u.Pu),c.Y36(L.F0),c.Y36(Ae.A),c.Y36(Ze.z))})),(0,i.Z)(fieldCurrency,"ɵcmp",c.Xpm({type:e,selectors:[["field-currency"]],features:[c.qOj],decls:3,vars:3,consts:[[3,"fieldname","fieldconfig",4,"ngIf"],[3,"fielddisplayclass","fieldconfig","editable",4,"ngIf"],["class","slds-form-element__control",3,"ngClass",4,"ngIf"],[3,"fieldname","fieldconfig"],[3,"fielddisplayclass","fieldconfig","editable"],[1,"slds-grid","slds-grid--align-end"],[3,"number","currency_id","precision"],[1,"slds-form-element__control",3,"ngClass"],[1,"slds-grid","slds-m-vertical--xx-small"],["class","slds-form-element slds-p-right--x-small",3,"ngClass",4,"ngIf"],[1,"slds-form-element","slds-grow"],[3,"ngModel","asNumber","precision","ngModelChange"],[3,"fieldname"],[1,"slds-form-element","slds-p-right--x-small",3,"ngClass"],["class","slds-height_full slds-align--absolute-center slds-p-around--none","style","border-color:transparent",4,"ngIf"],["class","slds-form-element__control",4,"ngIf"],[1,"slds-height_full","slds-align--absolute-center","slds-p-around--none",2,"border-color","transparent"],[1,"slds-form-element__control"],[1,"slds-select_container"],[1,"slds-select",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(e,t){1&e&&(c.YNc(0,ke,1,2,"field-label",0),c.YNc(1,Le,3,6,"field-generic-display",1),c.YNc(2,Ne,6,6,"div",2)),2&e&&(c.Q6J("ngIf",t.displayLabel),c.xp6(1),c.Q6J("ngIf",!t.isEditMode()),c.xp6(1),c.Q6J("ngIf",t.isEditable()&&t.isEditMode()))},dependencies:[n.mk,n.sg,n.O5,o.YN,o.Kr,o.EJ,o.JJ,o.On,_e.G,ye.i,h.q,A.D,J.a],encapsulation:2})),fieldCurrency})();function qe(e,t){if(1&e&&c._UZ(0,"field-label",4),2&e){const e=c.oxw();c.Q6J("fieldname",e.fieldname)("fieldconfig",e.fieldconfig)}}let Ee=(()=>{var e;class fieldWeightedAmount extends Fe{constructor(e,t,s,n,o,l,a){super(e,t,s,n,o,l,a),(0,i.Z)(this,"model",void 0),(0,i.Z)(this,"view",void 0),(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"router",void 0),(0,i.Z)(this,"currency",void 0),(0,i.Z)(this,"userpreferences",void 0),this.model=e,this.view=t,this.language=s,this.metadata=n,this.router=o,this.currency=l,this.userpreferences=a,this.currencies=this.currency.getCurrencies()}get amountfield(){return this.fieldconfig.field_amount?this.fieldconfig.field_amount:"amount"}get probabilityfield(){return this.fieldconfig.field_probability?this.fieldconfig.field_probability:"probability"}getValue(){try{let e=this.model.getFieldValue("amount")?parseFloat(this.model.getFieldValue(this.amountfield)):0,t=this.model.getFieldValue("amount")?parseFloat(this.model.getFieldValue(this.probabilityfield)):0;return this.userpreferences.formatMoney(e*t/100)}catch(e){return 0}}}return e=fieldWeightedAmount,(0,i.Z)(fieldWeightedAmount,"ɵfac",(function(t){return new(t||e)(c.Y36(w.o),c.Y36(k.e),c.Y36(x.d),c.Y36(u.Pu),c.Y36(L.F0),c.Y36(Ae.A),c.Y36(Ze.z))})),(0,i.Z)(fieldWeightedAmount,"ɵcmp",c.Xpm({type:e,selectors:[["field-currency"]],features:[c.qOj],decls:8,vars:6,consts:[[3,"fieldname","fieldconfig",4,"ngIf"],[3,"fielddisplayclass","fieldconfig","editable"],[1,"slds-grid","slds-grid--align-spread"],["cass","slds-text-align--right"],[3,"fieldname","fieldconfig"]],template:function(e,t){1&e&&(c.YNc(0,qe,1,2,"field-label",0),c.TgZ(1,"field-generic-display",1)(2,"div",2)(3,"div"),c._uU(4),c.qZA(),c.TgZ(5,"div",3)(6,"span"),c._uU(7),c.qZA()()()()),2&e&&(c.Q6J("ngIf",t.displayLabel),c.xp6(1),c.Q6J("fielddisplayclass",t.fielddisplayclass)("fieldconfig",t.fieldconfig)("editable",!1),c.xp6(3),c.hij(" ",t.getCurrencySymbol()," "),c.xp6(3),c.Oqu(t.getValue()))},dependencies:[n.O5,h.q,A.D],encapsulation:2})),fieldWeightedAmount})();function Ye(e,t){if(1&e&&c._UZ(0,"field-label",4),2&e){const e=c.oxw();c.Q6J("fieldname",e.fieldname)("fieldconfig",e.fieldconfig)}}let De=(()=>{var e;class fieldTotalAmount extends Fe{constructor(e,t,s,n,o,l,a){super(e,t,s,n,o,l,a),(0,i.Z)(this,"model",void 0),(0,i.Z)(this,"view",void 0),(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"router",void 0),(0,i.Z)(this,"currency",void 0),(0,i.Z)(this,"userpreferences",void 0),(0,i.Z)(this,"currencies",[]),this.model=e,this.view=t,this.language=s,this.metadata=n,this.router=o,this.currency=l,this.userpreferences=a,this.currencies=this.currency.getCurrencies()}get sumfields(){let e=[];if(this.fieldconfig.sumfields){let t=this.fieldconfig.sumfields.split(",");for(let s of t)e.push(s.trim())}return e}getValue(){let e=0;for(let t of this.sumfields){let s=this.model.getFieldValue(t);s&&(e+=parseFloat(s))}return this.model.setField(this.fieldname,e),this.userpreferences.formatMoney(e)}}return e=fieldTotalAmount,(0,i.Z)(fieldTotalAmount,"ɵfac",(function(t){return new(t||e)(c.Y36(w.o),c.Y36(k.e),c.Y36(x.d),c.Y36(u.Pu),c.Y36(L.F0),c.Y36(Ae.A),c.Y36(Ze.z))})),(0,i.Z)(fieldTotalAmount,"ɵcmp",c.Xpm({type:e,selectors:[["field-currency"]],features:[c.qOj],decls:8,vars:6,consts:[[3,"fieldname","fieldconfig",4,"ngIf"],[3,"fielddisplayclass","fieldconfig","editable"],[1,"slds-grid","slds-grid--align-spread"],["cass","slds-text-align--right"],[3,"fieldname","fieldconfig"]],template:function(e,t){1&e&&(c.YNc(0,Ye,1,2,"field-label",0),c.TgZ(1,"field-generic-display",1)(2,"div",2)(3,"div"),c._uU(4),c.qZA(),c.TgZ(5,"div",3)(6,"span"),c._uU(7),c.qZA()()()()),2&e&&(c.Q6J("ngIf",t.displayLabel),c.xp6(1),c.Q6J("fielddisplayclass",t.fielddisplayclass)("fieldconfig",t.fieldconfig)("editable",!1),c.xp6(3),c.hij(" ",t.getCurrencySymbol()," "),c.xp6(3),c.Oqu(t.getValue()))},dependencies:[n.O5,h.q,A.D],encapsulation:2})),fieldTotalAmount})();function Qe(e,t){if(1&e&&c._UZ(0,"field-label",3),2&e){const e=c.oxw();c.Q6J("fieldname",e.fieldname)("fieldconfig",e.fieldconfig)}}function Ue(e,t){if(1&e&&(c.TgZ(0,"field-generic-display",4),c._uU(1),c.qZA()),2&e){const e=c.oxw();c.Q6J("fielddisplayclass",e.fielddisplayclass)("editable",e.isEditable())("fieldconfig",e.fieldconfig)("fieldid",e.fieldid),c.xp6(1),c.hij(" ",e.getValue(),"\n")}}function Re(e,t){if(1&e&&(c.TgZ(0,"option",12),c._uU(1),c.qZA()),2&e){const e=t.$implicit;c.Q6J("ngValue",e.value),c.xp6(1),c.Oqu(e.display)}}function je(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"div",5)(1,"div",6)(2,"div",7)(3,"select",8,9),c.NdJ("ngModelChange",(function(t){c.CHM(e);const s=c.oxw();return c.KtG(s.value=t)})),c.YNc(5,Re,2,2,"option",10),c.qZA()(),c._UZ(6,"field-messages",11),c.qZA()()}if(2&e){const e=c.oxw();c.xp6(1),c.Q6J("ngClass",e.getFieldClass()),c.xp6(2),c.Q6J("ngModel",e.value),c.xp6(2),c.Q6J("ngForOf",e.options),c.xp6(1),c.Q6J("fieldname",e.fieldname)}}let Be=(()=>{var e;class fieldEnum extends r.O{constructor(e,t,s,n,o){super(e,t,s,n,o),(0,i.Z)(this,"model",void 0),(0,i.Z)(this,"view",void 0),(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"router",void 0),(0,i.Z)(this,"options",[]),this.model=e,this.view=t,this.language=s,this.metadata=n,this.router=o,this.subscriptions.add(this.language.currentlanguage$.subscribe((e=>{this.getOptions()})))}ngOnInit(){super.ngOnInit(),this.getOptions()}getValue(){return this.language.getFieldDisplayOptionValue(this.model.module,this.fieldname,this.value)}getOptions(){let e=[],t=this.language.getFieldDisplayOptions(this.model.module,this.fieldname);for(let s in t)e.push({value:s,display:t[s]});if(this.options=e,this.fieldconfig.sortdirection)switch(this.fieldconfig.sortdirection.toLowerCase()){case"desc":this.options.sort(((e,t)=>e.display.toLowerCase()<t.display.toLowerCase()?1:-1));break;case"asc":this.options.sort(((e,t)=>e.display.toLowerCase()>t.display.toLowerCase()?1:-1))}}}return e=fieldEnum,(0,i.Z)(fieldEnum,"ɵfac",(function(t){return new(t||e)(c.Y36(w.o),c.Y36(k.e),c.Y36(x.d),c.Y36(u.Pu),c.Y36(L.F0))})),(0,i.Z)(fieldEnum,"ɵcmp",c.Xpm({type:e,selectors:[["field-enum"]],features:[c.qOj],decls:3,vars:3,consts:[[3,"fieldname","fieldconfig",4,"ngIf"],[3,"fielddisplayclass","editable","fieldconfig","fieldid",4,"ngIf"],["class","slds-form-element",4,"ngIf"],[3,"fieldname","fieldconfig"],[3,"fielddisplayclass","editable","fieldconfig","fieldid"],[1,"slds-form-element"],[1,"slds-form-element__control",3,"ngClass"],[1,"slds-select_container","slds-m-vertical--xx-small"],[1,"slds-select",3,"ngModel","ngModelChange"],["focus",""],[3,"ngValue",4,"ngFor","ngForOf"],[3,"fieldname"],[3,"ngValue"]],template:function(e,t){1&e&&(c.YNc(0,Qe,1,2,"field-label",0),c.YNc(1,Ue,2,5,"field-generic-display",1),c.YNc(2,je,7,4,"div",2)),2&e&&(c.Q6J("ngIf",t.displayLabel),c.xp6(1),c.Q6J("ngIf",!t.isEditMode()),c.xp6(1),c.Q6J("ngIf",t.isEditMode()))},dependencies:[n.mk,n.sg,n.O5,o.YN,o.Kr,o.EJ,o.JJ,o.On,h.q,A.D,J.a],encapsulation:2})),fieldEnum})();function Ge(e,t){if(1&e&&c._UZ(0,"field-label",3),2&e){const e=c.oxw();c.Q6J("fieldname",e.fieldname)("fieldconfig",e.fieldconfig)}}function Pe(e,t){if(1&e&&(c.TgZ(0,"field-generic-display",4),c._uU(1),c.qZA()),2&e){const e=c.oxw();c.Q6J("fielddisplayclass",e.fielddisplayclass)("editable",e.isEditable())("fieldconfig",e.fieldconfig),c.xp6(1),c.hij(" ",e.displayValue,"\n")}}function He(e,t){if(1&e&&(c.TgZ(0,"option",11),c._uU(1),c.qZA()),2&e){const e=t.$implicit;c.Q6J("value",e.value),c.xp6(1),c.Oqu(e.display)}}function ze(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"div",5)(1,"div",6)(2,"div",7)(3,"select",8),c.NdJ("ngModelChange",(function(t){c.CHM(e);const s=c.oxw();return c.KtG(s.value=t)})),c.YNc(4,He,2,2,"option",9),c.qZA()(),c._UZ(5,"field-messages",10),c.qZA()()}if(2&e){const e=c.oxw();c.xp6(1),c.Q6J("ngClass",e.getFieldClass()),c.xp6(2),c.Q6J("ngModel",e.value),c.xp6(1),c.Q6J("ngForOf",e.options),c.xp6(1),c.Q6J("fieldname",e.fieldname)}}let Ve=(()=>{var e;class fieldLanguage extends r.O{constructor(e,t,s,n,o){super(e,t,s,n,o),(0,i.Z)(this,"model",void 0),(0,i.Z)(this,"view",void 0),(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"router",void 0),(0,i.Z)(this,"displayValue",""),(0,i.Z)(this,"options",[]),this.model=e,this.view=t,this.language=s,this.metadata=n,this.router=o}ngOnInit(){super.ngOnInit(),this.getOptions(),this.subscribeToDataChanges()}getOptions(){this.options=this.language.getAvialableLanguages().map((e=>({value:e.language,display:this.language.getLabel("LANG_"+e.language.toUpperCase())}))),this.fieldconfig.canBeEmpty&&this.options.unshift({value:"",display:""}),this.options.sort(((e,t)=>e.display.localeCompare(t.display)))}subscribeToDataChanges(){this.subscriptions.add(this.model.data$.subscribe((e=>{e[this.fieldname]&&this.value!=e[this.fieldname]&&(this.value=e[this.fieldname]),this.displayValue!=this.value&&this.setDisplayValue()})))}setDisplayValue(){const e=this.options.find((e=>e.value==this.model.getField(this.fieldname)));this.displayValue=e?.display||""}}return e=fieldLanguage,(0,i.Z)(fieldLanguage,"ɵfac",(function(t){return new(t||e)(c.Y36(w.o),c.Y36(k.e),c.Y36(x.d),c.Y36(u.Pu),c.Y36(L.F0))})),(0,i.Z)(fieldLanguage,"ɵcmp",c.Xpm({type:e,selectors:[["field-enum"]],features:[c.qOj],decls:3,vars:3,consts:[[3,"fieldname","fieldconfig",4,"ngIf"],[3,"fielddisplayclass","editable","fieldconfig",4,"ngIf"],["class","slds-form-element",4,"ngIf"],[3,"fieldname","fieldconfig"],[3,"fielddisplayclass","editable","fieldconfig"],[1,"slds-form-element"],[1,"slds-form-element__control",3,"ngClass"],[1,"slds-select_container","slds-m-vertical--xx-small"],[1,"slds-select",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[3,"fieldname"],[3,"value"]],template:function(e,t){1&e&&(c.YNc(0,Ge,1,2,"field-label",0),c.YNc(1,Pe,2,4,"field-generic-display",1),c.YNc(2,ze,6,4,"div",2)),2&e&&(c.Q6J("ngIf",t.displayLabel),c.xp6(1),c.Q6J("ngIf",!t.isEditMode()),c.xp6(1),c.Q6J("ngIf",t.isEditMode()))},dependencies:[n.mk,n.sg,n.O5,o.YN,o.Kr,o.EJ,o.JJ,o.On,h.q,A.D,J.a],encapsulation:2})),fieldLanguage})();function Ke(e,t){if(1&e&&(c.TgZ(0,"div",4)(1,"span",5)(2,"a",6),c._uU(3),c.qZA(),c.TgZ(4,"button",7),c._UZ(5,"system-button-icon",8),c.qZA()()()),2&e){const e=t.$implicit;c.xp6(3),c.Oqu(e.displayname),c.xp6(2),c.Q6J("icon","close")}}let $e=(()=>{var e;class fieldEmailTo extends r.O{constructor(e,t,s,n,o,l){super(e,t,s,n,o),(0,i.Z)(this,"model",void 0),(0,i.Z)(this,"view",void 0),(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"router",void 0),(0,i.Z)(this,"backend",void 0),(0,i.Z)(this,"loadingOptions",!1),this.model=e,this.view=t,this.language=s,this.metadata=n,this.router=o,this.backend=l}}return e=fieldEmailTo,(0,i.Z)(fieldEmailTo,"ɵfac",(function(t){return new(t||e)(c.Y36(w.o),c.Y36(k.e),c.Y36(x.d),c.Y36(u.Pu),c.Y36(L.F0),c.Y36($.y))})),(0,i.Z)(fieldEmailTo,"ɵcmp",c.Xpm({type:e,selectors:[["field-email-to"]],features:[c.qOj],decls:4,vars:2,consts:[[1,"slds-form-element"],[3,"fieldname"],[1,"slds-form-element__control"],["class","slds-pill_container",4,"ngFor","ngForOf"],[1,"slds-pill_container"],[1,"slds-pill"],["href","javascript:void(0);",1,"slds-pill__label"],[1,"slds-button","slds-button--icon","slds-pill__remove"],[3,"icon"]],template:function(e,t){1&e&&(c.TgZ(0,"div",0),c._UZ(1,"field-label",1),c.TgZ(2,"div",2),c.YNc(3,Ke,6,2,"div",3),c.qZA()()),2&e&&(c.xp6(1),c.Q6J("fieldname","to_addrs_names"),c.xp6(2),c.Q6J("ngForOf",t.model.data.to_addrs_names))},dependencies:[n.sg,T.J,h.q],encapsulation:2})),fieldEmailTo})();var Xe=s(2803);function We(e,t){if(1&e&&c._UZ(0,"field-label",3),2&e){const e=c.oxw();c.Q6J("fieldname",e.fieldname)("fieldconfig",e.fieldconfig)}}function et(e,t){1&e&&c._UZ(0,"system-stencil")}function tt(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"button",9),c.NdJ("click",(function(){c.CHM(e);const t=c.oxw(3);return c.KtG(t.setEditMode())})),c._UZ(1,"system-button-icon",10),c.qZA()}2&e&&(c.xp6(1),c.Q6J("icon","edit"))}function st(e,t){if(1&e&&(c.TgZ(0,"div",6)(1,"div",7),c._uU(2),c.qZA(),c.YNc(3,tt,2,1,"button",8),c.qZA()),2&e){const e=c.oxw(2);c.Q6J("ngClass",e.fielddisplayclass),c.xp6(2),c.Oqu(e.getValue()),c.xp6(1),c.Q6J("ngIf",e.isEditable())}}function it(e,t){if(1&e&&(c.TgZ(0,"div"),c.YNc(1,et,1,0,"system-stencil",4),c.YNc(2,st,4,3,"ng-template",null,5,c.W1O),c.qZA()),2&e){const e=c.MAs(3),t=c.oxw();c.xp6(1),c.Q6J("ngIf",t.model.isLoading)("ngIfElse",e)}}function nt(e,t){if(1&e&&(c.TgZ(0,"option",18),c._uU(1),c.qZA()),2&e){const e=t.$implicit;c.Q6J("ngValue",e.id),c.xp6(1),c.Oqu(e.summary_text)}}function ot(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"div",11)(1,"div",12)(2,"div",13)(3,"select",14),c.NdJ("ngModelChange",(function(t){c.CHM(e);const s=c.oxw();return c.KtG(s.value=t)}))("change",(function(t){c.CHM(e);const s=c.oxw();return c.KtG(s.chooseTemplate(t))})),c._UZ(4,"option",15),c.YNc(5,nt,2,2,"option",16),c.qZA()(),c._UZ(6,"field-messages",17),c.qZA()()}if(2&e){const e=c.oxw();c.xp6(1),c.Q6J("ngClass",e.getFieldClass()),c.xp6(2),c.Q6J("disabled",e.isDisabled)("ngModel",e.value),c.xp6(2),c.Q6J("ngForOf",e.availableTemplates),c.xp6(1),c.Q6J("fieldname",e.fieldname)}}let lt=(()=>{var e;class fieldEmailTemplates extends r.O{constructor(e,t,s,n,o,l,a,d){super(e,t,s,n,o),(0,i.Z)(this,"model",void 0),(0,i.Z)(this,"view",void 0),(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"router",void 0),(0,i.Z)(this,"backend",void 0),(0,i.Z)(this,"modal",void 0),(0,i.Z)(this,"configuration",void 0),(0,i.Z)(this,"isLoaded",!1),(0,i.Z)(this,"availableTemplates",[]),this.model=e,this.view=t,this.language=s,this.metadata=n,this.router=o,this.backend=l,this.modal=a,this.configuration=d}get subjectField(){return this.fieldconfig.subject?this.fieldconfig.subject:"name"}get bodyField(){return this.fieldconfig.body?this.fieldconfig.body:"body"}get addtocurrentquote(){return 1==this.fieldconfig.addtocurrentquote}get isDisabled(){return!this.model.getFieldValue("parent_type")||""==this.model.getFieldValue("parent_type")||!this.isLoaded||0==this.availableTemplates.length}getValue(){for(let e of this.availableTemplates)if(e.id==this.value)return e.name}ngOnInit(){let e=this.configuration.getData("EmailTemplates");if(e)this.availableTemplates=e.filter((e=>"email"==e.type&&("*"==e.for_bean||e.for_bean==this.model.getFieldValue("parent_type")))),this.availableTemplates.sort(((e,t)=>e.name.localeCompare(t.name))),this.isLoaded=!0;else{let e={start:0,limit:500,listid:"all"};this.backend.getRequest("module/EmailTemplates",e).subscribe((e=>{this.configuration.setData("EmailTemplates",e.list),this.availableTemplates=e.list.filter((e=>"email"==e.type&&("*"==e.for_bean||e.for_bean==this.model.getFieldValue("parent_type")))),this.availableTemplates.sort(((e,t)=>e.name.localeCompare(t.name))),this.isLoaded=!0}))}}chooseTemplate(e){""!=this.value?this.modal.openModal("SystemLoadingModal",!1).subscribe((e=>{this.backend.getRequest("module/EmailTemplates/"+this.value+"/parse/"+this.model.getFieldValue("parent_type")+"/"+this.model.getFieldValue("parent_id")).subscribe((t=>{this.model.getField(this.subjectField)||this.model.setField(this.subjectField,t.subject);let s=document.implementation.createHTMLDocument("Virtual Document");s.documentElement.innerHTML=this.model.getFieldValue(this.bodyField);let i=s.querySelectorAll("div[data-spice-temp-quote]"),n=s.querySelectorAll("div[data-signature]"),o=s.querySelectorAll("div[data-spice-reply-quote]");i[0]?.parentNode.removeChild(i[0]);let l=['<div class="spicecrm_temp_quote">'+t.body_html+"</div>",n[0]?.outerHTML,o[0]?.outerHTML].join("<p><br></p>");this.model.setField(this.bodyField,l),e.instance.self.destroy()}))})):this.model.setField(this.bodyField,"")}}return e=fieldEmailTemplates,(0,i.Z)(fieldEmailTemplates,"ɵfac",(function(t){return new(t||e)(c.Y36(w.o),c.Y36(k.e),c.Y36(x.d),c.Y36(u.Pu),c.Y36(L.F0),c.Y36($.y),c.Y36(I.o),c.Y36(ee.C))})),(0,i.Z)(fieldEmailTemplates,"ɵcmp",c.Xpm({type:e,selectors:[["field-email-templates"]],features:[c.qOj],decls:3,vars:3,consts:[[3,"fieldname","fieldconfig",4,"ngIf"],[4,"ngIf"],["class","slds-form-element",4,"ngIf"],[3,"fieldname","fieldconfig"],[4,"ngIf","ngIfElse"],["displaycontent",""],[1,"slds-grid",3,"ngClass"],[1,"slds-truncate"],["class","slds-button slds-button--icon slds-col_bump-left slds-p-left--xx-small",3,"click",4,"ngIf"],[1,"slds-button","slds-button--icon","slds-col_bump-left","slds-p-left--xx-small",3,"click"],[3,"icon"],[1,"slds-form-element"],[1,"slds-form-element__control",3,"ngClass"],[1,"slds-select_container","slds-m-vertical--xx-small"],[1,"slds-select",3,"disabled","ngModel","ngModelChange","change"],["value",""],[3,"ngValue",4,"ngFor","ngForOf"],[3,"fieldname"],[3,"ngValue"]],template:function(e,t){1&e&&(c.YNc(0,We,1,2,"field-label",0),c.YNc(1,it,4,2,"div",1),c.YNc(2,ot,7,5,"div",2)),2&e&&(c.Q6J("ngIf",t.displayLabel),c.xp6(1),c.Q6J("ngIf",!t.isEditMode()),c.xp6(1),c.Q6J("ngIf",t.isEditMode()))},dependencies:[n.mk,n.sg,n.O5,o.YN,o.Kr,o.EJ,o.JJ,o.On,T.J,Xe.B,h.q,J.a],encapsulation:2})),fieldEmailTemplates})();function at(e,t){if(1&e&&c._UZ(0,"field-label",3),2&e){const e=c.oxw();c.Q6J("fieldname",e.fieldname)("fieldconfig",e.fieldconfig)}}function dt(e,t){1&e&&c._UZ(0,"system-stencil")}function rt(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"button",9),c.NdJ("click",(function(){c.CHM(e);const t=c.oxw(3);return c.KtG(t.setEditMode())})),c._UZ(1,"system-button-icon",10),c.qZA()}2&e&&(c.xp6(1),c.Q6J("icon","edit"))}function ct(e,t){if(1&e&&(c.TgZ(0,"div",6)(1,"div",7),c._uU(2),c.qZA(),c.YNc(3,rt,2,1,"button",8),c.qZA()),2&e){const e=c.oxw(2);c.Q6J("ngClass",e.fielddisplayclass),c.xp6(2),c.Oqu(e.getValue()),c.xp6(1),c.Q6J("ngIf",e.isEditable())}}function ut(e,t){if(1&e&&(c.TgZ(0,"div"),c.YNc(1,dt,1,0,"system-stencil",4),c.YNc(2,ct,4,3,"ng-template",null,5,c.W1O),c.qZA()),2&e){const e=c.MAs(3),t=c.oxw();c.xp6(1),c.Q6J("ngIf",t.model.isLoading)("ngIfElse",e)}}function ht(e,t){if(1&e&&(c.TgZ(0,"option",17),c._uU(1),c.qZA()),2&e){const e=t.$implicit;c.Q6J("ngValue",e.id),c.xp6(1),c.Oqu(e.name)}}function mt(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"div",11)(1,"div",12)(2,"div",13)(3,"select",14),c.NdJ("ngModelChange",(function(t){c.CHM(e);const s=c.oxw();return c.KtG(s.value=t)}))("change",(function(t){c.CHM(e);const s=c.oxw();return c.KtG(s.chooseTemplate(t))})),c.YNc(4,ht,2,2,"option",15),c.qZA()(),c._UZ(5,"field-messages",16),c.qZA()()}if(2&e){const e=c.oxw();c.xp6(1),c.Q6J("ngClass",e.getFieldClass()),c.xp6(2),c.Q6J("disabled",e.isDisabled)("ngModel",e.value),c.xp6(1),c.Q6J("ngForOf",e.availableTemplates),c.xp6(1),c.Q6J("fieldname",e.fieldname)}}let gt=(()=>{var e;class fieldTextMessageTemplates extends r.O{constructor(e,t,s,n,o,l,a,d){super(e,t,s,n,o),(0,i.Z)(this,"model",void 0),(0,i.Z)(this,"view",void 0),(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"router",void 0),(0,i.Z)(this,"backend",void 0),(0,i.Z)(this,"modal",void 0),(0,i.Z)(this,"configuration",void 0),(0,i.Z)(this,"isLoaded",!1),(0,i.Z)(this,"availableTemplates",[]),this.model=e,this.view=t,this.language=s,this.metadata=n,this.router=o,this.backend=l,this.modal=a,this.configuration=d}get bodyField(){return this.fieldconfig.body?this.fieldconfig.body:"description"}get isDisabled(){return!this.model.getFieldValue("parent_type")||""==this.model.getFieldValue("parent_type")||!this.isLoaded||0==this.availableTemplates.length}getValue(){for(let e of this.availableTemplates)if(e.id==this.value)return e.name}ngOnInit(){let e=this.configuration.getData("TextMessageTemplates");if(e)this.availableTemplates=e.filter((e=>"*"==e.parent_type||e.parent_type==this.model.getFieldValue("parent_type"))),this.isLoaded=!0;else{let e={start:0,limit:500,listid:"all"};this.backend.getRequest("module/TextMessageTemplates",e).subscribe((e=>{this.configuration.setData("TextMessageTemplates",e.list),this.availableTemplates=e.list.filter((e=>"*"==e.parent_type||e.parent_type==this.model.getFieldValue("parent_type"))),this.isLoaded=!0}))}}chooseTemplate(e){""!=this.value&&this.modal.openModal("SystemLoadingModal",!1).subscribe((e=>{this.backend.getRequest("module/TextMessageTemplates/"+this.value+"/parse/"+this.model.getFieldValue("parent_type")+"/"+this.model.getFieldValue("parent_id")).subscribe((t=>{this.model.setField(this.bodyField,t.description),e.instance.self.destroy()}))}))}}return e=fieldTextMessageTemplates,(0,i.Z)(fieldTextMessageTemplates,"ɵfac",(function(t){return new(t||e)(c.Y36(w.o),c.Y36(k.e),c.Y36(x.d),c.Y36(u.Pu),c.Y36(L.F0),c.Y36($.y),c.Y36(I.o),c.Y36(ee.C))})),(0,i.Z)(fieldTextMessageTemplates,"ɵcmp",c.Xpm({type:e,selectors:[["field-textmessage-templates"]],features:[c.qOj],decls:3,vars:3,consts:[[3,"fieldname","fieldconfig",4,"ngIf"],[4,"ngIf"],["class","slds-form-element",4,"ngIf"],[3,"fieldname","fieldconfig"],[4,"ngIf","ngIfElse"],["displaycontent",""],[1,"slds-grid",3,"ngClass"],[1,"slds-truncate"],["class","slds-button slds-button--icon slds-col_bump-left slds-p-left--xx-small",3,"click",4,"ngIf"],[1,"slds-button","slds-button--icon","slds-col_bump-left","slds-p-left--xx-small",3,"click"],[3,"icon"],[1,"slds-form-element"],[1,"slds-form-element__control",3,"ngClass"],[1,"slds-select_container","slds-m-vertical--xx-small"],[1,"slds-select",3,"disabled","ngModel","ngModelChange","change"],[3,"ngValue",4,"ngFor","ngForOf"],[3,"fieldname"],[3,"ngValue"]],template:function(e,t){1&e&&(c.YNc(0,at,1,2,"field-label",0),c.YNc(1,ut,4,2,"div",1),c.YNc(2,mt,6,5,"div",2)),2&e&&(c.Q6J("ngIf",t.displayLabel),c.xp6(1),c.Q6J("ngIf",!t.isEditMode()),c.xp6(1),c.Q6J("ngIf",t.isEditMode()))},dependencies:[n.mk,n.sg,n.O5,o.YN,o.Kr,o.EJ,o.JJ,o.On,T.J,Xe.B,h.q,J.a],encapsulation:2})),fieldTextMessageTemplates})();var pt=s(7514);let ft=(()=>{var e;class fieldMultienumCheckBox{constructor(e,t,s,n){(0,i.Z)(this,"model",void 0),(0,i.Z)(this,"view",void 0),(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"fieldname",""),(0,i.Z)(this,"option",""),(0,i.Z)(this,"disabled",!1),(0,i.Z)(this,"fieldid",""),this.model=e,this.view=t,this.language=s,this.metadata=n,this.fieldid=this.model.generateGuid()}getValueArray(){return this.model.getField(this.fieldname)?this.model.getField(this.fieldname).substring(1,this.model.getField(this.fieldname).length-1).split("^,^"):[]}get checked(){if(this.model.getField(this.fieldname)){let e=!1;return this.model.getField(this.fieldname)==this.option.value&&(e=!0),this.model.getField(this.fieldname).indexOf("^"+this.option.value+"^")>-1&&(e=!0),e}return!1}set checked(e){let t=this.getValueArray(),s=t.indexOf(this.option.value);-1===s?t.push(this.option.value):t.splice(s,1),this.model.setField(this.fieldname,"^"+t.join("^,^")+"^")}}return e=fieldMultienumCheckBox,(0,i.Z)(fieldMultienumCheckBox,"ɵfac",(function(t){return new(t||e)(c.Y36(w.o),c.Y36(k.e),c.Y36(x.d),c.Y36(u.Pu))})),(0,i.Z)(fieldMultienumCheckBox,"ɵcmp",c.Xpm({type:e,selectors:[["field-multienum-checkbox"]],inputs:{fieldname:"fieldname",option:"option",disabled:"disabled"},decls:2,vars:3,consts:[[3,"disabled","ngModel","ngModelChange"]],template:function(e,t){1&e&&(c.TgZ(0,"system-checkbox",0),c.NdJ("ngModelChange",(function(e){return t.checked=e})),c._uU(1),c.qZA()),2&e&&(c.Q6J("disabled",t.disabled)("ngModel",t.checked),c.xp6(1),c.Oqu(t.option.display))},dependencies:[o.JJ,o.On,pt.U],encapsulation:2})),fieldMultienumCheckBox})();function bt(e,t){if(1&e&&c._UZ(0,"field-label",3),2&e){const e=c.oxw();c.Q6J("fieldname",e.fieldname)("fieldconfig",e.fieldconfig)}}function vt(e,t){if(1&e&&(c.TgZ(0,"span"),c._uU(1),c.qZA()),2&e){const e=c.oxw(2);c.xp6(1),c.Oqu(e.getValue())}}function Zt(e,t){if(1&e&&c._UZ(0,"field-multienum-checkbox",11),2&e){const e=t.$implicit,s=c.oxw(4);c.Q6J("fieldname",s.fieldname)("option",e)}}function _t(e,t){if(1&e&&(c.TgZ(0,"div",9),c.YNc(1,Zt,1,2,"field-multienum-checkbox",10),c.qZA()),2&e){const e=t.$implicit,s=c.oxw(3);c.Q6J("ngClass",s.getFieldClass()),c.xp6(1),c.Q6J("ngForOf",e)}}function yt(e,t){if(1&e&&(c.TgZ(0,"div",7),c.YNc(1,_t,2,2,"div",8),c.qZA()),2&e){const e=c.oxw(2);c.xp6(1),c.Q6J("ngForOf",e.options)}}function xt(e,t){if(1&e&&(c.TgZ(0,"field-generic-display",4),c.YNc(1,vt,2,1,"span",5),c.YNc(2,yt,2,1,"div",6),c.qZA()),2&e){const e=c.oxw();c.Q6J("fielddisplayclass",e.fielddisplayclass)("editable",e.isEditable())("fieldconfig",e.fieldconfig),c.xp6(1),c.Q6J("ngIf",!e.displayCheckboxes),c.xp6(1),c.Q6J("ngIf",e.displayCheckboxes)}}function wt(e,t){if(1&e&&c._UZ(0,"field-multienum-checkbox",15),2&e){const e=t.$implicit,s=c.oxw(3);c.Q6J("fieldname",s.fieldname)("option",e)}}function Tt(e,t){if(1&e&&(c.TgZ(0,"div",9),c.YNc(1,wt,1,2,"field-multienum-checkbox",14),c.qZA()),2&e){const e=t.$implicit,s=c.oxw(2);c.Q6J("ngClass",s.getFieldClass()),c.xp6(1),c.Q6J("ngForOf",e)}}function Ct(e,t){if(1&e&&(c.TgZ(0,"div",12)(1,"div",7),c.YNc(2,Tt,2,2,"div",8),c.qZA(),c._UZ(3,"field-messages",13),c.qZA()),2&e){const e=c.oxw();c.xp6(2),c.Q6J("ngForOf",e.options),c.xp6(1),c.Q6J("fieldname",e.fieldname)}}let At=(()=>{var e;class fieldMultienum extends r.O{constructor(e,t,s,n,o){super(e,t,s,n,o),(0,i.Z)(this,"model",void 0),(0,i.Z)(this,"view",void 0),(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"router",void 0),(0,i.Z)(this,"options",[]),this.model=e,this.view=t,this.language=s,this.metadata=n,this.router=o,this.subscriptions.add(this.language.currentlanguage$.subscribe((e=>{this.buildOptions()})))}ngOnInit(){this.buildOptions()}get columns(){return this.fieldconfig.columns?parseInt(this.fieldconfig.columns,10):4}get displayCheckboxes(){return!!this.fieldconfig.displaycheckboxes}getValue(){let e=[],t=this.getValueArray();for(let s of t){let t=this.language.getFieldDisplayOptionValue(this.model.module,this.fieldname,s);t&&e.push(t)}if(this.fieldconfig.sortdirection)switch(this.fieldconfig.sortdirection.toLowerCase()){case"desc":e.sort(((e,t)=>e.toLowerCase()<t.toLowerCase()?1:-1));break;case"asc":e.sort(((e,t)=>e.toLowerCase()>t.toLowerCase()?1:-1))}return e.join(", ")}getValueArray(){try{let e=this.model.getFieldValue(this.fieldname);return"^"==e.substring(0,1)&&(e=e.substring(1,e.length-1)),e.split("^,^")}catch(e){return[]}}buildOptions(){let e=[],t=this.language.getFieldDisplayOptions(this.model.module,this.fieldname);for(let s in t)e.push({id:this.model.generateGuid(),value:s,display:t[s]});if(this.options=e,this.fieldconfig.sortdirection)switch(this.fieldconfig.sortdirection.toLowerCase()){case"desc":this.options.sort(((e,t)=>e.display.toLowerCase()<t.display.toLowerCase()?1:-1));break;case"asc":this.options.sort(((e,t)=>e.display.toLowerCase()>t.display.toLowerCase()?1:-1))}let s=0;for(let e in this.options)s++;this.options=[];let i=Math.round(s/this.columns),n=0,o=[];for(let t of e)o.push(t),o.length>=i&&n!=this.columns-1&&(this.options.push(o),n++,o=[]);(n==this.columns||o.length>0)&&this.options.push(o)}}return e=fieldMultienum,(0,i.Z)(fieldMultienum,"ɵfac",(function(t){return new(t||e)(c.Y36(w.o),c.Y36(k.e),c.Y36(x.d),c.Y36(u.Pu),c.Y36(L.F0))})),(0,i.Z)(fieldMultienum,"ɵcmp",c.Xpm({type:e,selectors:[["field-multienum"]],features:[c.qOj],decls:3,vars:3,consts:[[3,"fieldname","fieldconfig",4,"ngIf"],[3,"fielddisplayclass","editable","fieldconfig",4,"ngIf"],["class","slds-form-element",4,"ngIf"],[3,"fieldname","fieldconfig"],[3,"fielddisplayclass","editable","fieldconfig"],[4,"ngIf"],["class","slds-grid slds-grid--align-spread",4,"ngIf"],[1,"slds-grid","slds-grid--align-spread"],["class","slds-form-element__control",3,"ngClass",4,"ngFor","ngForOf"],[1,"slds-form-element__control",3,"ngClass"],["disabled","true","class","slds-checkbox",3,"fieldname","option",4,"ngFor","ngForOf"],["disabled","true",1,"slds-checkbox",3,"fieldname","option"],[1,"slds-form-element"],[3,"fieldname"],["class","slds-checkbox",3,"fieldname","option",4,"ngFor","ngForOf"],[1,"slds-checkbox",3,"fieldname","option"]],template:function(e,t){1&e&&(c.YNc(0,bt,1,2,"field-label",0),c.YNc(1,xt,3,5,"field-generic-display",1),c.YNc(2,Ct,4,2,"div",2)),2&e&&(c.Q6J("ngIf",t.displayLabel),c.xp6(1),c.Q6J("ngIf",!t.isEditMode()),c.xp6(1),c.Q6J("ngIf",t.isEditMode()))},dependencies:[n.mk,n.sg,n.O5,h.q,A.D,ft,J.a],encapsulation:2})),fieldMultienum})();var kt=s(9503),Lt=s(8658);function It(e,t){if(1&e&&c._UZ(0,"field-label",3),2&e){const e=c.oxw();c.Q6J("fieldname",e.fieldname)("fieldconfig",e.fieldconfig)}}function Mt(e,t){if(1&e&&(c.TgZ(0,"span"),c._uU(1),c.qZA()),2&e){const e=c.oxw(2);c.xp6(1),c.Oqu(e.localValue.valueDisplay)}}function St(e,t){if(1&e&&(c.TgZ(0,"div",13)(1,"system-checkbox-group-checkbox",14),c._uU(2),c.qZA()()),2&e){const e=t.$implicit,s=c.oxw(4);c.Q6J("ngClass",s.columnsClass),c.xp6(1),c.Q6J("value",e.value)("disabled",!0),c.xp6(1),c.hij(" ",e.display,"")}}function Jt(e,t){if(1&e&&(c.TgZ(0,"div",7)(1,"div",8)(2,"system-checkbox",9),c._uU(3),c.qZA()(),c.TgZ(4,"div",10)(5,"system-checkbox-group",11),c.YNc(6,St,3,4,"div",12),c.qZA()()()),2&e){const e=t.$implicit,s=c.oxw(3);c.xp6(2),c.Q6J("ngModel",e.value)("disabled",!0),c.xp6(1),c.Oqu(e.display),c.xp6(1),c.Q6J("ngClass",s.css_classes),c.xp6(1),c.Q6J("ngModel",s.localValue.valueArray),c.xp6(1),c.Q6J("ngForOf",e.options)("ngForTrackBy",s.trackByFn)}}function Ot(e,t){if(1&e&&(c.TgZ(0,"div"),c.YNc(1,Jt,7,7,"div",6),c.qZA()),2&e){const e=c.oxw(2);c.xp6(1),c.Q6J("ngForOf",e.groups)("ngForTrackBy",e.trackByFn)}}function Nt(e,t){if(1&e&&(c.TgZ(0,"field-generic-display",4),c.YNc(1,Mt,2,1,"span",5),c.YNc(2,Ot,2,2,"div",5),c.qZA()),2&e){const e=c.oxw();c.Q6J("fielddisplayclass",e.fielddisplayclass)("editable",e.isEditable())("fieldconfig",e.fieldconfig),c.xp6(1),c.Q6J("ngIf",!e.fieldconfig.displayCheckboxes),c.xp6(1),c.Q6J("ngIf",!!e.fieldconfig.displayCheckboxes)}}function Ft(e,t){if(1&e&&(c.TgZ(0,"div",13)(1,"system-checkbox-group-checkbox",19),c._uU(2),c.qZA()()),2&e){const e=t.$implicit,s=c.oxw(3);c.Q6J("ngClass",s.columnsClass),c.xp6(1),c.Q6J("value",e.value),c.xp6(1),c.hij(" ",e.display," ")}}function qt(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"div",7)(1,"div",8)(2,"system-checkbox",17),c.NdJ("ngModelChange",(function(t){const s=c.CHM(e).$implicit,i=c.oxw(2);return c.KtG(i.setGroupValue(t,s))})),c._uU(3),c.qZA()(),c.TgZ(4,"div",10)(5,"system-checkbox-group",18),c.NdJ("ngModelChange",(function(t){const s=c.CHM(e).$implicit,i=c.oxw(2);return c.KtG(i.setItemValue(t,s.value))})),c.YNc(6,Ft,3,3,"div",12),c.qZA()()()}if(2&e){const e=t.$implicit,s=c.oxw(2);c.xp6(2),c.Q6J("ngModel",s.localValue.valueGroups[e.value]),c.xp6(1),c.hij(" ",e.display," "),c.xp6(1),c.Q6J("ngClass",s.css_classes),c.xp6(1),c.Q6J("ngModel",s.localValue.valueArray),c.xp6(1),c.Q6J("ngForOf",e.options)("ngForTrackBy",s.trackByFn)}}function Et(e,t){if(1&e&&(c.TgZ(0,"div",15),c.YNc(1,qt,7,6,"div",6),c._UZ(2,"field-messages",16),c.qZA()),2&e){const e=c.oxw();c.xp6(1),c.Q6J("ngForOf",e.groups)("ngForTrackBy",e.trackByFn),c.xp6(1),c.Q6J("fieldname",e.fieldname)}}let Yt=(()=>{var e;class fieldGroupedEnum extends r.O{constructor(...e){super(...e),(0,i.Z)(this,"groups",[]),(0,i.Z)(this,"fieldconfig",{}),(0,i.Z)(this,"localValue",{valueText:"",valueArray:[],valueDisplay:"",valueGroups:{}}),(0,i.Z)(this,"columnsClass","slds-size--1-of-4")}ngOnInit(){this.setColumnsClass(),this.buildOptionGroups(),this.setLocalValues(this.value),this.subscribeToLanguage(),this.subscribeToModelChanges()}setColumnsClass(){const e=+this.fieldconfig.columns<13&&+this.fieldconfig.columns>0?this.fieldconfig.columns:"4";this.columnsClass=`slds-size--1-of-${e}`}subscribeToLanguage(){this.subscriptions.add(this.language.currentlanguage$.subscribe((()=>this.buildOptionGroups())))}setLocalValues(e){if(!e)return this.localValue={valueText:"",valueArray:[],valueDisplay:"",valueGroups:{}};const t=this.language.getFieldDisplayOptions(this.model.module,this.fieldname),s=e.replace(/\^/g,"").split(",").map((e=>e.trim()));this.localValue={valueText:e,valueArray:s,valueDisplay:s.map((e=>t[e]??e)).join(", "),valueGroups:{}};const i=this.fieldconfig.groupSeparator??"_";this.localValue.valueArray.forEach((e=>{this.localValue.valueGroups[e]=!e.includes(i)}))}subscribeToModelChanges(){this.subscriptions.add(this.model.data$.subscribe((e=>{this.localValue.valueText!==e[this.fieldname]&&this.setLocalValues(e[this.fieldname])})))}setItemValue(e,t){e.some((e=>e!==t&&e.startsWith(t)))&&!e.some((e=>e==t))?e.push(t):e.some((e=>e!==t&&e.startsWith(t)))||(e=e.filter((e=>e!==t)));const s=e.map((e=>`^${e}^`)).join(",");this.setLocalValues(s),this.value=s}setGroupValue(e,t){let s=this.value;e?e&&-1==this.localValue.valueArray.indexOf(t.value)&&(s=`${this.localValue.valueText},^${t.value}^`):s=this.localValue.valueArray.filter((e=>e!==t.value)).map((e=>`^${e}^`)).join(","),this.setLocalValues(s),this.value=s}trackByFn(e,t){return t.value}buildOptionGroups(){this.groups=[];const e=this.language.getFieldDisplayOptions(this.model.module,this.fieldname,!0),t=this.fieldconfig.groupSeparator??"_",s=e.filter((e=>e.value.includes(t)));this.groups=e.filter((e=>!e.value.includes(t))).map((e=>({...e,options:s.filter((t=>t.value.startsWith(e.value)))})))}}return e=fieldGroupedEnum,(0,i.Z)(fieldGroupedEnum,"ɵfac",function(){let t;return function(s){return(t||(t=c.n5z(e)))(s||e)}}()),(0,i.Z)(fieldGroupedEnum,"ɵcmp",c.Xpm({type:e,selectors:[["field-grouped-enum"]],inputs:{fieldconfig:"fieldconfig"},features:[c.qOj],decls:3,vars:3,consts:[[3,"fieldname","fieldconfig",4,"ngIf"],[3,"fielddisplayclass","editable","fieldconfig",4,"ngIf"],["class","slds-form-element",4,"ngIf"],[3,"fieldname","fieldconfig"],[3,"fielddisplayclass","editable","fieldconfig"],[4,"ngIf"],["class","slds-m-bottom--medium",4,"ngFor","ngForOf","ngForTrackBy"],[1,"slds-m-bottom--medium"],[1,"slds-p-vertical--xx-small","slds-text-title_bold"],[3,"ngModel","disabled"],[1,"slds-form-element__control",3,"ngClass"],[1,"slds-grid","slds-wrap","slds-p-vertical--xxx-small",3,"ngModel"],["class","slds-truncate",3,"ngClass",4,"ngFor","ngForOf","ngForTrackBy"],[1,"slds-truncate",3,"ngClass"],[3,"value","disabled"],[1,"slds-form-element"],[3,"fieldname"],[3,"ngModel","ngModelChange"],[1,"slds-grid","slds-wrap","slds-p-vertical--xxx-small",3,"ngModel","ngModelChange"],[3,"value"]],template:function(e,t){1&e&&(c.YNc(0,It,1,2,"field-label",0),c.YNc(1,Nt,3,5,"field-generic-display",1),c.YNc(2,Et,3,3,"div",2)),2&e&&(c.Q6J("ngIf",t.displayLabel),c.xp6(1),c.Q6J("ngIf",!t.isEditMode()),c.xp6(1),c.Q6J("ngIf",t.isEditMode()))},dependencies:[n.mk,n.sg,n.O5,o.JJ,o.On,pt.U,kt.L,Lt.m,h.q,A.D,J.a],encapsulation:2})),fieldGroupedEnum})();var Dt=s(116);function Qt(e,t){if(1&e&&c._UZ(0,"field-label",3),2&e){const e=c.oxw();c.Q6J("fieldname",e.fieldname)("fieldconfig",e.fieldconfig)}}function Ut(e,t){if(1&e&&(c.TgZ(0,"field-generic-display",4)(1,"span"),c._uU(2),c.qZA()()),2&e){const e=c.oxw();c.Q6J("fielddisplayclass",e.fielddisplayclass)("editable",e.isEditable())("fieldconfig",e.fieldconfig),c.xp6(2),c.Oqu(e.viewModeValueText)}}function Rt(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"system-multiple-select",5),c.NdJ("ngModelChange",(function(t){c.CHM(e);const s=c.oxw();return c.KtG(s.setFieldValue(t))})),c.qZA()}if(2&e){const e=c.oxw();c.Q6J("ngModel",e.valueArray)("listItems",e.listItems)("groupSeparator",e.fieldconfig.groupSeparator)("grouped",e.fieldconfig.grouped)("showPills",e.fieldconfig.showPills)("listHeight",e.fieldconfig.listHeight)}}let jt=(()=>{var e;class fieldMultipleEnumDropdown extends r.O{constructor(e,t,s,n,o){super(e,t,s,n,o),(0,i.Z)(this,"model",void 0),(0,i.Z)(this,"view",void 0),(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"router",void 0),(0,i.Z)(this,"valueArray",[]),(0,i.Z)(this,"viewModeValueText",""),this.model=e,this.view=t,this.language=s,this.metadata=n,this.router=o}ngOnInit(){this.setSubscriptions()}setSubscriptions(){this.subscriptions.add(this.model.data$.subscribe((()=>{this.createValueArray(),this.createViewModeValueText()}))),this.subscriptions.add(this.language.currentlanguage$.subscribe((()=>{this.createViewModeValueText()})))}get listItems(){return this.language.getFieldDisplayOptions(this.model.module,this.fieldname)}setFieldValue(e){this.value=e.map((e=>`^${e}^`)).join(","),this.createValueArray(),this.createViewModeValueText()}createValueArray(){this.valueArray=this.value?this.value.replace(/\^/g,"").split(","):[]}createViewModeValueText(){let e=this.language.getFieldDisplayOptions(this.model.module,this.fieldname);this.viewModeValueText=this.valueArray.map((t=>e[t])).join(", ")}get grouped(){return void 0===this.fieldconfig.grouped||!0===this.fieldconfig.grouped}ngOnDestroy(){this.subscriptions.unsubscribe()}}return e=fieldMultipleEnumDropdown,(0,i.Z)(fieldMultipleEnumDropdown,"ɵfac",(function(t){return new(t||e)(c.Y36(w.o),c.Y36(k.e),c.Y36(x.d),c.Y36(u.Pu),c.Y36(L.F0))})),(0,i.Z)(fieldMultipleEnumDropdown,"ɵcmp",c.Xpm({type:e,selectors:[["field-multiple-enum-dropdown"]],features:[c.qOj],decls:3,vars:3,consts:[[3,"fieldname","fieldconfig",4,"ngIf"],[3,"fielddisplayclass","editable","fieldconfig",4,"ngIf"],[3,"ngModel","listItems","groupSeparator","grouped","showPills","listHeight","ngModelChange",4,"ngIf"],[3,"fieldname","fieldconfig"],[3,"fielddisplayclass","editable","fieldconfig"],[3,"ngModel","listItems","groupSeparator","grouped","showPills","listHeight","ngModelChange"]],template:function(e,t){1&e&&(c.YNc(0,Qt,1,2,"field-label",0),c.YNc(1,Ut,3,4,"field-generic-display",1),c.YNc(2,Rt,1,6,"system-multiple-select",2)),2&e&&(c.Q6J("ngIf",t.displayLabel),c.xp6(1),c.Q6J("ngIf",!t.isEditMode()),c.xp6(1),c.Q6J("ngIf",t.isEditMode()))},dependencies:[n.O5,o.JJ,o.On,Dt.I,h.q,A.D],encapsulation:2})),fieldMultipleEnumDropdown})();var Bt=s(9901);function Gt(e,t){if(1&e&&c._UZ(0,"field-label",3),2&e){const e=c.oxw();c.Q6J("fieldname",e.fieldname)("fieldconfig",e.fieldconfig)}}function Pt(e,t){1&e&&c._UZ(0,"system-stencil")}function Ht(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"button",8),c.NdJ("click",(function(){c.CHM(e);const t=c.oxw(3);return c.KtG(t.setEditMode())})),c._UZ(1,"system-button-icon",9),c.qZA()}2&e&&(c.xp6(1),c.Q6J("icon","edit"))}function zt(e,t){if(1&e&&(c.TgZ(0,"span"),c._uU(1),c.qZA(),c.YNc(2,Ht,2,1,"button",7)),2&e){const e=c.oxw(2);c.xp6(1),c.Oqu(e.getValue()),c.xp6(1),c.Q6J("ngIf",e.view.isEditable)}}function Vt(e,t){if(1&e&&(c.TgZ(0,"div",4),c.YNc(1,Pt,1,0,"system-stencil",5),c.YNc(2,zt,3,2,"ng-template",null,6,c.W1O),c.qZA()),2&e){const e=c.MAs(3),t=c.oxw();c.xp6(1),c.Q6J("ngIf",t.model.isLoading)("ngIfElse",e)}}function Kt(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"system-input-radio",14),c.NdJ("ngModelChange",(function(t){c.CHM(e);const s=c.oxw(2);return c.KtG(s.value=t)})),c._uU(1),c.qZA()}if(2&e){const e=t.$implicit,s=c.oxw(2);c.Q6J("name",s.fieldid)("value",e.value)("ngModel",s.value),c.xp6(1),c.Oqu(e.display)}}function $t(e,t){if(1&e&&(c.TgZ(0,"div",10)(1,"div",11)(2,"div",12),c.YNc(3,Kt,2,4,"system-input-radio",13),c.qZA()()()),2&e){const e=c.oxw();c.xp6(3),c.Q6J("ngForOf",e.options)}}let Xt=(()=>{var e;class fieldEnumAlternate extends Be{setValue(e){this.value=e}}return e=fieldEnumAlternate,(0,i.Z)(fieldEnumAlternate,"ɵfac",function(){let t;return function(s){return(t||(t=c.n5z(e)))(s||e)}}()),(0,i.Z)(fieldEnumAlternate,"ɵcmp",c.Xpm({type:e,selectors:[["field-enum-alternate"]],features:[c.qOj],decls:3,vars:3,consts:[[3,"fieldname","fieldconfig",4,"ngIf"],["class","slds-text-body--regular slds-truncate slds-m-vertical--small spice-fieldbody",4,"ngIf"],["class","slds-form-element",4,"ngIf"],[3,"fieldname","fieldconfig"],[1,"slds-text-body--regular","slds-truncate","slds-m-vertical--small","spice-fieldbody"],[4,"ngIf","ngIfElse"],["displaycontent",""],["style","float: right","class","slds-button slds-button--icon",3,"click",4,"ngIf"],[1,"slds-button","slds-button--icon",2,"float","right",3,"click"],[3,"icon"],[1,"slds-form-element"],[1,"slds-form-element__control"],[1,"slds-grid--vertical"],[3,"name","value","ngModel","ngModelChange",4,"ngFor","ngForOf"],[3,"name","value","ngModel","ngModelChange"]],template:function(e,t){1&e&&(c.YNc(0,Gt,1,2,"field-label",0),c.YNc(1,Vt,4,2,"div",1),c.YNc(2,$t,4,1,"div",2)),2&e&&(c.Q6J("ngIf",t.displayLabel),c.xp6(1),c.Q6J("ngIf",!t.isEditMode()),c.xp6(1),c.Q6J("ngIf",t.isEditMode()))},dependencies:[n.sg,n.O5,o.JJ,o.On,T.J,Bt.A,Xe.B,h.q],encapsulation:2})),fieldEnumAlternate})();function Wt(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"div",6)(1,"input",7),c.NdJ("ngModelChange",(function(t){c.CHM(e);const s=c.oxw(2);return c.KtG(s.value=t)})),c.qZA(),c.TgZ(2,"label",8),c._UZ(3,"span",9),c.TgZ(4,"span",10),c._uU(5),c.qZA()()()}if(2&e){const e=t.$implicit,s=c.oxw(2);c.xp6(1),c.Q6J("id",s.fieldid+e.value)("value",e.value)("ngModel",s.value),c.xp6(1),c.uIk("for",s.fieldid+e.value),c.xp6(3),c.Oqu(e.display)}}function es(e,t){if(1&e&&(c.TgZ(0,"field-generic-display",2)(1,"div",3),c.YNc(2,Wt,6,5,"div",4),c._UZ(3,"field-messages",5),c.qZA()()),2&e){const e=c.oxw();c.Q6J("fielddisplayclass",e.fielddisplayclass)("editable",e.isEditable())("fieldconfig",e.fieldconfig)("fieldid",e.fieldid),c.xp6(1),c.Q6J("ngClass",e.getFieldClass()),c.xp6(1),c.Q6J("ngForOf",e.options),c.xp6(1),c.Q6J("fieldname",e.fieldname)}}function ts(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"div",6)(1,"input",12),c.NdJ("ngModelChange",(function(t){c.CHM(e);const s=c.oxw(2);return c.KtG(s.value=t)})),c.qZA(),c.TgZ(2,"label",8),c._UZ(3,"span",9),c.TgZ(4,"span",10),c._uU(5),c.qZA()()()}if(2&e){const e=t.$implicit,s=c.oxw(2);c.xp6(1),c.Q6J("id",s.fieldid+e.value)("value",e.value)("ngModel",s.value),c.xp6(1),c.uIk("for",s.fieldid+e.value),c.xp6(3),c.Oqu(e.display)}}function ss(e,t){if(1&e&&(c.TgZ(0,"div",11)(1,"div",3),c.YNc(2,ts,6,5,"div",4),c._UZ(3,"field-messages",5),c.qZA()()),2&e){const e=c.oxw();c.xp6(1),c.Q6J("ngClass",e.getFieldClass()),c.xp6(1),c.Q6J("ngForOf",e.options),c.xp6(1),c.Q6J("fieldname",e.fieldname)}}let is=(()=>{var e;class fieldEnumRadio extends r.O{constructor(e,t,s,n,o){super(e,t,s,n,o),(0,i.Z)(this,"model",void 0),(0,i.Z)(this,"view",void 0),(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"router",void 0),(0,i.Z)(this,"options",[]),this.model=e,this.view=t,this.language=s,this.metadata=n,this.router=o,this.subscriptions.add(this.language.currentlanguage$.subscribe((e=>{this.getOptions()})))}ngOnInit(){this.getOptions()}getValue(){return this.language.getFieldDisplayOptionValue(this.model.module,this.fieldname,this.value)}getOptions(){let e=[],t=this.language.getFieldDisplayOptions(this.model.module,this.fieldname);for(let s in t)e.push({value:s,display:t[s]});this.options=e}}return e=fieldEnumRadio,(0,i.Z)(fieldEnumRadio,"ɵfac",(function(t){return new(t||e)(c.Y36(w.o),c.Y36(k.e),c.Y36(x.d),c.Y36(u.Pu),c.Y36(L.F0))})),(0,i.Z)(fieldEnumRadio,"ɵcmp",c.Xpm({type:e,selectors:[["field-enum-radio"]],features:[c.qOj],decls:2,vars:2,consts:[[3,"fielddisplayclass","editable","fieldconfig","fieldid",4,"ngIf"],["class","slds-form-element",4,"ngIf"],[3,"fielddisplayclass","editable","fieldconfig","fieldid"],[1,"slds-form-element__control","slds-grid",3,"ngClass"],["class","slds-radio",4,"ngFor","ngForOf"],[3,"fieldname"],[1,"slds-radio"],["disabled","","type","radio","name","options",3,"id","value","ngModel","ngModelChange"],[1,"slds-radio__label"],[1,"slds-radio_faux"],[1,"slds-form-element__label"],[1,"slds-form-element"],["type","radio","name","options",3,"id","value","ngModel","ngModelChange"]],template:function(e,t){1&e&&(c.YNc(0,es,4,7,"field-generic-display",0),c.YNc(1,ss,4,3,"div",1)),2&e&&(c.Q6J("ngIf",!t.isEditMode()),c.xp6(1),c.Q6J("ngIf",t.isEditMode()))},dependencies:[n.mk,n.sg,n.O5,o.Fj,o._,o.JJ,o.On,A.D,J.a],encapsulation:2})),fieldEnumRadio})();function ns(e,t){if(1&e&&c._UZ(0,"field-label",3),2&e){const e=c.oxw();c.Q6J("fieldname",e.fieldname)("fieldconfig",e.fieldconfig)}}function os(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"field-generic-display",4)(1,"system-checkbox",5),c.NdJ("ngModelChange",(function(t){c.CHM(e);const s=c.oxw();return c.KtG(s.value=t)})),c.qZA()()}if(2&e){const e=c.oxw();c.Q6J("fielddisplayclass",e.fieldbooldisplayclass)("fieldconfig",e.fieldconfig)("editable",e.isEditable()),c.xp6(1),c.Q6J("ngModel",e.value)}}function ls(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"div",6)(1,"div",7)(2,"system-checkbox",8),c.NdJ("ngModelChange",(function(t){c.CHM(e);const s=c.oxw();return c.KtG(s.value=t)})),c.qZA()(),c._UZ(3,"field-messages",9),c.qZA()}if(2&e){const e=c.oxw();c.Q6J("ngClass",e.getFieldClass()),c.xp6(2),c.Q6J("ngModel",e.value),c.xp6(1),c.Q6J("fieldname",e.fieldname)}}let as=(()=>{var e;class fieldBool extends r.O{get fieldbooldisplayclass(){return this.fielddisplayclass.replace("slds-p-vertical--x-small","slds-p-bottom--xxx-small slds-p-top--x-small")}}return e=fieldBool,(0,i.Z)(fieldBool,"ɵfac",function(){let t;return function(s){return(t||(t=c.n5z(e)))(s||e)}}()),(0,i.Z)(fieldBool,"ɵcmp",c.Xpm({type:e,selectors:[["field-bool"]],features:[c.qOj],decls:3,vars:3,consts:[[3,"fieldname","fieldconfig",4,"ngIf"],[3,"fielddisplayclass","fieldconfig","editable",4,"ngIf"],["class","slds-form-element__control",3,"ngClass",4,"ngIf"],[3,"fieldname","fieldconfig"],[3,"fielddisplayclass","fieldconfig","editable"],["disabled","",3,"ngModel","ngModelChange"],[1,"slds-form-element__control",3,"ngClass"],[1,"slds-p-vertical--x-small"],[3,"ngModel","ngModelChange"],[3,"fieldname"]],template:function(e,t){1&e&&(c.YNc(0,ns,1,2,"field-label",0),c.YNc(1,os,2,4,"field-generic-display",1),c.YNc(2,ls,4,3,"div",2)),2&e&&(c.Q6J("ngIf",t.displayLabel),c.xp6(1),c.Q6J("ngIf",!t.isEditMode()),c.xp6(1),c.Q6J("ngIf",t.isEditable()&&t.isEditMode()))},dependencies:[n.mk,n.O5,o.JJ,o.On,pt.U,h.q,A.D,J.a],encapsulation:2})),fieldBool})();var ds=s(7674);function rs(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"field-generic-display",2)(1,"system-checkbox",3),c.NdJ("ngModelChange",(function(t){c.CHM(e);const s=c.oxw();return c.KtG(s.value=t)})),c._UZ(2,"system-label-fieldname",4),c.qZA()()}if(2&e){const e=c.oxw();c.Q6J("fielddisplayclass",e.fieldbooldisplayclass)("fieldconfig",e.fieldconfig)("editable",e.isEditable()),c.xp6(1),c.Q6J("ngModel",e.value),c.xp6(1),c.Q6J("module",e.model.module)("field",e.fieldname)("fieldconfig",e.fieldconfig)}}function cs(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"div",5)(1,"div",6)(2,"system-checkbox",7),c.NdJ("ngModelChange",(function(t){c.CHM(e);const s=c.oxw();return c.KtG(s.value=t)})),c._UZ(3,"system-label-fieldname",4),c.qZA()(),c._UZ(4,"field-messages",8),c.qZA()}if(2&e){const e=c.oxw();c.Q6J("ngClass",e.getFieldClass()),c.xp6(2),c.Q6J("ngModel",e.value),c.xp6(1),c.Q6J("module",e.model.module)("field",e.fieldname)("fieldconfig",e.fieldconfig),c.xp6(1),c.Q6J("fieldname",e.fieldname)}}let us=(()=>{var e;class fieldBoolLabelAligned extends r.O{get fieldbooldisplayclass(){return this.fielddisplayclass.replace("slds-p-vertical--x-small","slds-p-bottom--xxx-small slds-p-top--x-small")}}return e=fieldBoolLabelAligned,(0,i.Z)(fieldBoolLabelAligned,"ɵfac",function(){let t;return function(s){return(t||(t=c.n5z(e)))(s||e)}}()),(0,i.Z)(fieldBoolLabelAligned,"ɵcmp",c.Xpm({type:e,selectors:[["ng-component"]],features:[c.qOj],decls:2,vars:2,consts:[[3,"fielddisplayclass","fieldconfig","editable",4,"ngIf"],["class","slds-form-element__control",3,"ngClass",4,"ngIf"],[3,"fielddisplayclass","fieldconfig","editable"],["disabled","",3,"ngModel","ngModelChange"],[3,"module","field","fieldconfig"],[1,"slds-form-element__control",3,"ngClass"],[1,"slds-p-vertical--x-small"],[3,"ngModel","ngModelChange"],[3,"fieldname"]],template:function(e,t){1&e&&(c.YNc(0,rs,3,7,"field-generic-display",0),c.YNc(1,cs,5,6,"div",1)),2&e&&(c.Q6J("ngIf",!t.isEditMode()),c.xp6(1),c.Q6J("ngIf",t.isEditable()&&t.isEditMode()))},dependencies:[n.mk,n.O5,o.JJ,o.On,pt.U,ds.h,A.D,J.a],encapsulation:2})),fieldBoolLabelAligned})();var hs=s(4561),ms=s(3333),gs=s(1790),ps=s(4271),fs=s(5957);function bs(e,t){if(1&e&&c._UZ(0,"field-label",3),2&e){const e=c.oxw();c.Q6J("fieldname",e.fieldname)("fieldconfig",e.fieldconfig)}}function vs(e,t){if(1&e&&c._UZ(0,"system-icon",9),2&e){const e=c.oxw(3);c.Q6J("module",e.model.data[e.parentTypeField])("size","x-small")}}function Zs(e,t){if(1&e&&(c.TgZ(0,"div",6),c.YNc(1,vs,1,2,"system-icon",7),c.TgZ(2,"span",8),c._uU(3),c.qZA()()),2&e){const e=c.oxw(2);c.xp6(1),c.Q6J("ngIf",e.displayModuleIcon),c.xp6(1),c.Q6J("module",e.parentType)("id",e.parentId),c.xp6(1),c.Oqu(e.value)}}function _s(e,t){if(1&e&&(c.TgZ(0,"field-generic-display",4),c.YNc(1,Zs,4,4,"div",5),c.qZA()),2&e){const e=c.oxw();c.Q6J("fielddisplayclass",e.fielddisplayclass)("editable",e.isEditable())("fieldconfig",e.fieldconfig)("fieldid",e.fieldid),c.xp6(1),c.Q6J("ngIf",e.parentId)}}function ys(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"div",15)(1,"div",16)(2,"span",17)(3,"span",18),c._UZ(4,"system-icon",9),c.qZA(),c.TgZ(5,"span",19),c._uU(6),c.qZA(),c.TgZ(7,"button",20),c.NdJ("click",(function(){c.CHM(e);const t=c.oxw(2);return c.KtG(t.clearParent())})),c._UZ(8,"system-button-icon",21),c.qZA()()()()}if(2&e){const e=c.oxw(2);c.xp6(4),c.Q6J("module",e.model.data[e.parentTypeField])("size","small"),c.xp6(2),c.Oqu(e.parentName),c.xp6(2),c.Q6J("icon","close")}}function xs(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"li",42),c.NdJ("click",(function(){const t=c.CHM(e).$implicit,s=c.oxw(4);return c.KtG(s.setParentType(t))})),c.TgZ(1,"div",43)(2,"div",44),c._UZ(3,"system-icon",45),c.TgZ(4,"div",46),c._UZ(5,"system-label-modulename",47),c.qZA()()()()}if(2&e){const e=t.$implicit;c.xp6(3),c.Q6J("module",e),c.xp6(2),c.Q6J("module",e)}}const ws=function(e){return{"slds-is-open":e}};function Ts(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"div",33)(1,"div",11)(2,"div",34)(3,"div",35)(4,"div",25)(5,"div",36),c.NdJ("click",(function(){c.CHM(e);const t=c.oxw(3);return c.KtG(t.openParentTypes())})),c._UZ(6,"input",37)(7,"system-icon",38),c.qZA(),c.TgZ(8,"div",39)(9,"ul",40),c.YNc(10,xs,6,2,"li",41),c.qZA()()()()()()()}if(2&e){const e=c.oxw(3);c.xp6(4),c.Q6J("ngClass",c.VKq(3,ws,e.parentTypeSelectOpen)),c.xp6(2),c.Q6J("value",e.language.getModuleName(e.parentType)),c.xp6(4),c.Q6J("ngForOf",e.parentTypes)}}function Cs(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"field-lookup-recent",48),c.NdJ("selectedObject",(function(t){c.CHM(e);const s=c.oxw(3);return c.KtG(s.setParent(t))})),c.qZA()}if(2&e){const e=c.oxw(3);c.Q6J("module",e.parentType)}}function As(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"field-lookup-search",49),c.NdJ("selectedObject",(function(t){c.CHM(e);const s=c.oxw(3);return c.KtG(s.setParent(t))}))("searchWithModal",(function(){c.CHM(e);const t=c.oxw(3);return c.KtG(t.searchWithModal())})),c.qZA()}if(2&e){const e=c.oxw(3);c.Q6J("module",e.parentType)("searchterm",e.parentSearchTerm)}}function ks(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"div",22),c.YNc(1,Ts,11,5,"div",23),c.TgZ(2,"div",24)(3,"div",25)(4,"div",26)(5,"input",27,28),c.NdJ("focus",(function(){c.CHM(e);const t=c.oxw(2);return c.KtG(t.onFocusParent())}))("ngModelChange",(function(t){c.CHM(e);const s=c.oxw(2);return c.KtG(s.parentSearchTerm=t)})),c.qZA(),c.TgZ(7,"button",29),c.NdJ("click",(function(){c.CHM(e);const t=c.oxw(2);return c.KtG(t.searchWithModal())})),c._UZ(8,"system-button-icon",21),c.qZA()(),c.TgZ(9,"div",30),c.YNc(10,Cs,1,1,"field-lookup-recent",31),c.YNc(11,As,1,2,"field-lookup-search",32),c.qZA()()()()}if(2&e){const e=c.oxw(2);c.xp6(1),c.Q6J("ngIf",e.parentTypes.length>0),c.xp6(2),c.Q6J("ngClass",c.VKq(8,ws,e.parentSearchOpen)),c.xp6(2),c.Q6J("ngModel",e.parentSearchTerm)("placeholder",e.language.getModuleCombinedLabel("LBL_SEARCH",e.parentType)),c.xp6(3),c.Q6J("icon","search"),c.xp6(1),c.Q6J("ngStyle",e.dropdownStyle),c.xp6(1),c.Q6J("ngIf",""===e.parentSearchTerm),c.xp6(1),c.Q6J("ngIf",""!==e.parentSearchTerm)}}function Ls(e,t){if(1&e&&(c.TgZ(0,"div",10)(1,"div",11),c.YNc(2,ys,9,4,"div",12),c.YNc(3,ks,12,10,"div",13),c.qZA(),c._UZ(4,"field-messages",14),c.qZA()),2&e){const e=c.oxw();c.Q6J("ngClass",e.getFieldClass()),c.xp6(2),c.Q6J("ngIf",e.model.data[e.parentIdField]),c.xp6(1),c.Q6J("ngIf",!e.model.data[e.parentIdField]),c.xp6(1),c.Q6J("fieldname",e.fieldname)}}let Is=(()=>{var e;class fieldParent extends r.O{constructor(e,t,s,n,o,l,a,d,r,c,u){super(e,t,l,a,d),(0,i.Z)(this,"model",void 0),(0,i.Z)(this,"view",void 0),(0,i.Z)(this,"backend",void 0),(0,i.Z)(this,"toast",void 0),(0,i.Z)(this,"broadcast",void 0),(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"router",void 0),(0,i.Z)(this,"elementRef",void 0),(0,i.Z)(this,"renderer",void 0),(0,i.Z)(this,"modal",void 0),(0,i.Z)(this,"clickListener",void 0),(0,i.Z)(this,"parentTypeSelectOpen",!1),(0,i.Z)(this,"parentSearchOpen",!1),(0,i.Z)(this,"parentSearchTerm",""),(0,i.Z)(this,"recentItems",[]),(0,i.Z)(this,"parentTypes",[]),this.model=e,this.view=t,this.backend=s,this.toast=n,this.broadcast=o,this.language=l,this.metadata=a,this.router=d,this.elementRef=r,this.renderer=c,this.modal=u,this.broadcast.message$.subscribe((e=>this.handleMessage(e)))}get parentIdField(){let e=this.metadata.getFieldDefs(this.model.module,this.fieldname);return this.fieldconfig.parentIdField?this.fieldconfig.parentIdField:e?.id_name?e.id_name:"parent_id"}get parentTypeField(){let e=this.metadata.getFieldDefs(this.model.module,this.fieldname);return this.fieldconfig.parentTypeField?this.fieldconfig.parentTypeField:e?.type_name?e.type_name:"parent_type"}get parentName(){return this.model.getField(this.fieldname)}get parentType(){return this.model.getField(this.parentTypeField)}get parentId(){return this.model.getField(this.parentIdField)}get displayModuleIcon(){return!this.fieldconfig.hidemoduleicon}ngOnInit(){super.ngOnInit(),this.determineParentTypes(),!this.view.isEditMode()||this.model.getField(this.parentTypeField)&&""!=this.model.getField(this.parentTypeField)||this.model.setField(this.parentTypeField,this.parentTypes[0])}get dropdownStyle(){let e=this.elementRef.nativeElement.getBoundingClientRect();return{"max-width":"initial",left:"initial",width:e.width-5+"px",right:"-"+(e.width/2-5)+"px"}}handleViewModeChange(e){"edit"==e&&this.view.editfieldid&&this.view.editfieldid==this.fieldid&&this.setFocus(),"edit"!=e||this.model.getField(this.parentTypeField)&&""!=this.model.getField(this.parentTypeField)||this.model.setField(this.parentTypeField,this.parentTypes[0])}determineParentTypes(){let e=[];this.fieldconfig.parenttypes?e=this.fieldconfig.parenttypes.replace(/\s/g,"").split(","):this.field_defs.parent_modules&&(e=this.field_defs.parent_modules),this.fieldconfig.sortbyparenttypes||e.sort(((e,t)=>this.language.getModuleName(e).toLowerCase()>this.language.getModuleName(t).toLowerCase()?1:-1)),this.parentTypes=e}handleMessage(e){if(e.messagedata.reference&&"model.save"===e.messagetype)if(this.fieldid===e.messagedata.reference){this.parentSearchTerm="";let t={};t[this.parentIdField]=e.messagedata.data.id,t[this.fieldname]=e.messagedata.data.summary_text,this.model.setFields(t,!0)}}onClick(e){this.elementRef.nativeElement.contains(e.target)||this.closePopups()}closePopups(){this.model.getField(this.parentIdField)&&(this.parentSearchTerm=""),this.parentSearchOpen=!1,this.parentTypeSelectOpen=!1,this.clickListener()}setParent(e){this.model.setField(this.fieldname,e.text),this.model.setField(this.parentIdField,e.id),2==this.fieldconfig.executeCopyRules?this.executeCopyRules(e.id):1==this.fieldconfig.executeCopyRules&&this.modal.confirm(this.language.getLabel("MSG_COPY_DATA","","long"),this.language.getLabel("MSG_COPY_DATA")).subscribe((t=>t&&this.executeCopyRules(e.id)))}executeCopyRules(e){let t=this.modal.await("LBL_LOADING");this.backend.get(this.parentType,e).subscribe((e=>{let s={module:this.parentType,id:e.id,data:e};this.model.executeCopyRulesParent(s),t.emit()}),(()=>{this.toast.sendToast("ERR_LOADING_RECORD","error"),t.emit()}))}toggleParentTypeSelect(){this.parentTypeSelectOpen=!this.parentTypeSelectOpen,this.parentSearchOpen=!1}setParentType(e){this.parentSearchTerm="",this.model.setField(this.parentTypeField,e),this.parentTypeSelectOpen=!1}clearParent(){this.fieldconfig.promptondelete?this.modal.confirm(this.language.getLabelFormatted("LBL_PROMPT_DELETE_RELATIONSHIP",[this.language.getFieldDisplayName(this.model.module,this.fieldname,this.fieldconfig)],"long"),this.language.getLabelFormatted("LBL_PROMPT_DELETE_RELATIONSHIP",[this.language.getFieldDisplayName(this.model.module,this.fieldname,this.fieldconfig)])).subscribe((e=>{e&&this.removeRelated()})):this.removeRelated()}removeRelated(){this.model.setField(this.fieldname,""),this.model.setField(this.parentIdField,"")}openParentTypes(){this.parentTypeSelectOpen=!0,this.parentSearchOpen=!1,this.clickListener=this.renderer.listen("document","click",(e=>this.onClick(e)))}onFocusParent(){this.parentTypeSelectOpen=!1,this.parentSearchOpen=!0,this.clickListener=this.renderer.listen("document","click",(e=>this.onClick(e)))}searchWithModal(){this.parentSearchOpen=!1,this.modal.openModal("ObjectModalModuleLookup").subscribe((e=>{e.instance.module=this.parentType,e.instance.multiselect=!1,e.instance.selectedItems.subscribe((e=>{e.length&&this.setParent({id:e[0].id,text:e[0].summary_text,data:e[0]})})),e.instance.searchTerm=this.parentSearchTerm}))}}return e=fieldParent,(0,i.Z)(fieldParent,"ɵfac",(function(t){return new(t||e)(c.Y36(w.o),c.Y36(k.e),c.Y36($.y),c.Y36(X.A),c.Y36(W.f),c.Y36(x.d),c.Y36(u.Pu),c.Y36(L.F0),c.Y36(c.SBq),c.Y36(c.Qsj),c.Y36(I.o))})),(0,i.Z)(fieldParent,"ɵcmp",c.Xpm({type:e,selectors:[["field-parent"]],features:[c.qOj],decls:3,vars:3,consts:[[3,"fieldname","fieldconfig",4,"ngIf"],[3,"fielddisplayclass","editable","fieldconfig","fieldid",4,"ngIf"],["class","slds-form-element__control",3,"ngClass",4,"ngIf"],[3,"fieldname","fieldconfig"],[3,"fielddisplayclass","editable","fieldconfig","fieldid"],["class","slds-grid slds-grid_vertical-align-center",4,"ngIf"],[1,"slds-grid","slds-grid_vertical-align-center"],[3,"module","size",4,"ngIf"],["system-model-popover","",3,"module","id"],[3,"module","size"],[1,"slds-form-element__control",3,"ngClass"],[1,"slds-form-element"],["class","slds-form-element__control slds-p-around--xx-small",4,"ngIf"],["class","slds-combobox-group slds-p-around--xx-small",4,"ngIf"],[3,"fieldname"],[1,"slds-form-element__control","slds-p-around--xx-small"],[1,"slds-pill_container"],[1,"slds-pill","slds-size--1-of-1"],[1,"slds-icon_container","slds-icon-standard-account","slds-pill__icon_container"],[1,"slds-pill__label"],[1,"slds-button","slds-button--icon","slds-pill__remove",3,"click"],[3,"icon"],[1,"slds-combobox-group","slds-p-around--xx-small"],["class","slds-combobox_object-switcher slds-combobox-addon_start",4,"ngIf"],[1,"slds-combobox_container","slds-combobox-addon_end"],["role","combobox",1,"slds-combobox","slds-dropdown-trigger","slds-dropdown-trigger_click",3,"ngClass"],["role","none",1,"slds-combobox__form-element","slds-input-has-icon","slds-input-has-icon_right"],["type","text","aria-autocomplete","list","autoComplete","off","role","textbox",1,"slds-input","slds-combobox__input",3,"ngModel","placeholder","focus","ngModelChange"],["focus",""],[1,"slds-button","slds-button_icon","slds-input__icon","slds-input__icon_right",3,"click"],["role","listbox",1,"slds-dropdown","slds-dropdown_fluid",3,"ngStyle"],[3,"module","selectedObject",4,"ngIf"],[3,"module","searchterm","selectedObject","searchWithModal",4,"ngIf"],[1,"slds-combobox_object-switcher","slds-combobox-addon_start"],[1,"slds-form-element__control"],[1,"slds-combobox_container"],[1,"slds-combobox__form-element","slds-input-has-icon","slds-input-has-icon--right",3,"click"],["type","text","readonly","","autoComplete","off","role","textbox",1,"slds-input","slds-combobox__input","slds-combobox__input-value",3,"value"],["icon","down","sprite","utility","addclasses","slds-input__icon slds-input__icon_right"],["role","listbox",1,"slds-dropdown","slds-dropdown_length-5","slds-dropdown_x-small","slds-dropdown_left"],["role","group","aria-label","Suggested for you",1,"slds-listbox","slds-listbox_vertical"],["role","presentation","class","slds-listbox__item",3,"click",4,"ngFor","ngForOf"],["role","presentation",1,"slds-listbox__item",3,"click"],["role","option",1,"slds-media","slds-listbox__option","slds-listbox__option_plain","slds-media_small"],[1,"slds-grid","slds-grid--vertical-align-center"],["size","x-small",3,"module"],[1,"slds-truncate"],[3,"module"],[3,"module","selectedObject"],[3,"module","searchterm","selectedObject","searchWithModal"]],template:function(e,t){1&e&&(c.YNc(0,bs,1,2,"field-label",0),c.YNc(1,_s,2,5,"field-generic-display",1),c.YNc(2,Ls,5,4,"div",2)),2&e&&(c.Q6J("ngIf",t.displayLabel),c.xp6(1),c.Q6J("ngIf",!t.isEditMode()),c.xp6(1),c.Q6J("ngIf",t.isEditable()&&t.isEditMode()))},dependencies:[n.mk,n.sg,n.O5,n.PC,o.Fj,o.JJ,o.On,T.J,hs.f,ms.M,gs.g,h.q,A.D,ps.P,fs.$,J.a],encapsulation:2})),fieldParent})();var Ms=s(9637);function Ss(e,t){if(1&e&&c._UZ(0,"field-label",3),2&e){const e=c.oxw();c.Q6J("fieldname",e.fieldname)("fieldconfig",e.fieldconfig)}}function Js(e,t){if(1&e&&(c.TgZ(0,"field-generic-display",4)(1,"a",5),c._uU(2),c.qZA()()),2&e){const e=c.oxw();c.Q6J("fielddisplayclass",e.fielddisplayclass)("editable",e.isEditable())("fieldconfig",e.fieldconfig),c.xp6(2),c.Oqu(e.value)}}function Os(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"div",11)(1,"div",12)(2,"span",13)(3,"span",14),c._UZ(4,"system-icon",15),c.qZA(),c.TgZ(5,"span",16),c._uU(6),c.qZA(),c.TgZ(7,"button",17),c.NdJ("click",(function(){c.CHM(e);const t=c.oxw(2);return c.KtG(t.clearFilter())})),c._UZ(8,"system-button-icon",18),c.qZA()()()()}if(2&e){const e=c.oxw(2);c.xp6(4),c.Q6J("module",e.model.data.module)("size","small"),c.xp6(2),c.Oqu(e.moduleFilterName),c.xp6(2),c.Q6J("icon","close")}}function Ns(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"li",35),c.NdJ("click",(function(){const t=c.CHM(e).$implicit,s=c.oxw(4);return c.KtG(s.setModule(t))})),c.TgZ(1,"div",36)(2,"div",37),c._UZ(3,"system-icon",38),c.TgZ(4,"div",39),c._UZ(5,"system-label-modulename",40),c.qZA()()()()}if(2&e){const e=t.$implicit;c.xp6(3),c.Q6J("module",e),c.xp6(2),c.Q6J("module",e)}}const Fs=function(e){return{"slds-is-open":e}};function qs(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"div",26)(1,"div",7)(2,"div",22)(3,"div",27)(4,"div",28)(5,"div",29),c.NdJ("click",(function(){c.CHM(e);const t=c.oxw(3);return c.KtG(t.openModules())})),c._UZ(6,"input",30)(7,"system-icon",31),c.qZA(),c.TgZ(8,"div",32)(9,"ul",33),c.YNc(10,Ns,6,2,"li",34),c.qZA()()()()()()()}if(2&e){const e=c.oxw(3);c.xp6(4),c.Q6J("ngClass",c.VKq(3,Fs,e.moduleSelectOpen)),c.xp6(2),c.Q6J("value",e.language.getModuleName(e.module)),c.xp6(4),c.Q6J("ngForOf",e.modules)}}function Es(e,t){if(1&e&&(c.TgZ(0,"option",41),c._uU(1),c.qZA()),2&e){const e=t.$implicit;c.Q6J("value",e.id),c.xp6(1),c.Oqu(e.name)}}function Ys(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"div",19),c.YNc(1,qs,11,5,"div",20),c.TgZ(2,"div",21)(3,"div",22)(4,"div",23)(5,"select",24),c.NdJ("click",(function(){c.CHM(e);const t=c.oxw(2);return c.KtG(t.moduleSelectOpen=!1)}))("ngModelChange",(function(t){c.CHM(e);const s=c.oxw(2);return c.KtG(s.moduleFilter=t)})),c.YNc(6,Es,2,2,"option",25),c.qZA()()()()()}if(2&e){const e=c.oxw(2);c.xp6(1),c.Q6J("ngIf",e.modules.length>1),c.xp6(4),c.Q6J("disabled",!e.module||0==e.moduleFilters.length)("ngModel",e.moduleFilter),c.xp6(1),c.Q6J("ngForOf",e.moduleFilters)}}function Ds(e,t){if(1&e&&(c.TgZ(0,"div",6)(1,"div",7),c.YNc(2,Os,9,4,"div",8),c.YNc(3,Ys,7,4,"div",9),c.qZA(),c._UZ(4,"field-messages",10),c.qZA()),2&e){const e=c.oxw();c.Q6J("ngClass",e.getFieldClass()),c.xp6(2),c.Q6J("ngIf",e.model.data.module_filter),c.xp6(1),c.Q6J("ngIf",!e.model.data.module_filter),c.xp6(1),c.Q6J("fieldname",e.fieldname)}}let Qs=(()=>{var e;class fieldModuleFilter extends r.O{constructor(e,t,s,n,o,l,a,d,r,c){super(e,t,o,l,a),(0,i.Z)(this,"model",void 0),(0,i.Z)(this,"view",void 0),(0,i.Z)(this,"popup",void 0),(0,i.Z)(this,"broadcast",void 0),(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"router",void 0),(0,i.Z)(this,"elementRef",void 0),(0,i.Z)(this,"renderer",void 0),(0,i.Z)(this,"modal",void 0),(0,i.Z)(this,"clickListener",void 0),(0,i.Z)(this,"moduleSelectOpen",!1),(0,i.Z)(this,"modules",[]),this.model=e,this.view=t,this.popup=s,this.broadcast=n,this.language=o,this.metadata=l,this.router=a,this.elementRef=d,this.renderer=r,this.modal=c,this.popup.closePopup$.subscribe((()=>this.closePopups())),this.broadcast.message$.subscribe((e=>this.handleMessage(e)))}get moduleFilterName(){let e=this.metadata.getModuleFilter(this.moduleFilter);return e?e.name:""}get module(){return this.model.getField("module")||this.modules[0]}get value(){return this.moduleFilterName}get moduleFilters(){return this.metadata.getModuleFilters(this.module)}set moduleFilter(e){this.model.setField("module_filter",e)}get moduleFilter(){return this.model.getField("module_filter")}ngOnInit(){this.modules=this.parentTypes,this.setModule(this.module)}get parentTypes(){let e=["Contacts","Accounts","Leads","Users"];return this.fieldconfig.parenttypes&&(e=this.fieldconfig.parenttypes.replace(/\s/g,"").split(",")),e}setModule(e){this.model.setField("module",e),this.moduleSelectOpen=!1}clearFilter(){this.model.setField("module_filter","")}handleMessage(e){if(e.messagedata.reference&&"model.save"===e.messagetype)if(this.fieldid===e.messagedata.reference){let t={module_filter:e.messagedata.data.id};t[this.fieldname]=e.messagedata.data.summary_text,this.model.setFields(t)}}onClick(e){this.elementRef.nativeElement.contains(e.target)||this.closePopups()}openModules(){this.moduleSelectOpen=!0,this.clickListener=this.renderer.listen("document","click",(e=>this.onClick(e)))}closePopups(){this.moduleSelectOpen=!1,this.clickListener()}}return e=fieldModuleFilter,(0,i.Z)(fieldModuleFilter,"ɵfac",(function(t){return new(t||e)(c.Y36(w.o),c.Y36(k.e),c.Y36(Ms.g),c.Y36(W.f),c.Y36(x.d),c.Y36(u.Pu),c.Y36(L.F0),c.Y36(c.SBq),c.Y36(c.Qsj),c.Y36(I.o))})),(0,i.Z)(fieldModuleFilter,"ɵcmp",c.Xpm({type:e,selectors:[["field-modulefilter"]],features:[c._Bn([Ms.g]),c.qOj],decls:3,vars:3,consts:[[3,"fieldname","fieldconfig",4,"ngIf"],[3,"fielddisplayclass","editable","fieldconfig",4,"ngIf"],["class","slds-form-element__control",3,"ngClass",4,"ngIf"],[3,"fieldname","fieldconfig"],[3,"fielddisplayclass","editable","fieldconfig"],["href","javascript:void(0)"],[1,"slds-form-element__control",3,"ngClass"],[1,"slds-form-element"],["class","slds-form-element__control slds-p-around--xx-small",4,"ngIf"],["class","slds-combobox-group slds-p-around--xx-small",4,"ngIf"],[3,"fieldname"],[1,"slds-form-element__control","slds-p-around--xx-small"],[1,"slds-pill_container"],[1,"slds-pill","slds-size--1-of-1"],[1,"slds-icon_container","slds-icon-standard-account","slds-pill__icon_container"],[3,"module","size"],[1,"slds-pill__label"],[1,"slds-button","slds-button--icon","slds-pill__remove",3,"click"],[3,"icon"],[1,"slds-combobox-group","slds-p-around--xx-small"],["class","slds-combobox_object-switcher slds-combobox-addon_start",4,"ngIf"],[1,"slds-form-element","slds-grow","slds-m-left--small"],[1,"slds-form-element__control"],[1,"slds-select_container"],[1,"slds-select",3,"disabled","ngModel","click","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[1,"slds-combobox_object-switcher","slds-combobox-addon_start"],[1,"slds-combobox_container"],["role","combobox",1,"slds-combobox","slds-dropdown-trigger","slds-dropdown-trigger_click",3,"ngClass"],[1,"slds-combobox__form-element","slds-input-has-icon","slds-input-has-icon--right",3,"click"],["type","text","readonly","","autoComplete","off","role","textbox",1,"slds-input","slds-combobox__input","slds-combobox__input-value",3,"value"],["icon","down","sprite","utility","addclasses","slds-input__icon slds-input__icon_right"],["role","listbox",1,"slds-dropdown","slds-dropdown_length-5","slds-dropdown_x-small","slds-dropdown_left"],["role","group","aria-label","Suggested for you",1,"slds-listbox","slds-listbox_vertical"],["role","presentation","class","slds-listbox__item",3,"click",4,"ngFor","ngForOf"],["role","presentation",1,"slds-listbox__item",3,"click"],["role","option",1,"slds-media","slds-listbox__option","slds-listbox__option_plain","slds-media_small"],[1,"slds-grid","slds-grid--vertical-align-center"],["size","x-small",3,"module"],[1,"slds-truncate"],[3,"module"],[3,"value"]],template:function(e,t){1&e&&(c.YNc(0,Ss,1,2,"field-label",0),c.YNc(1,Js,3,4,"field-generic-display",1),c.YNc(2,Ds,5,4,"div",2)),2&e&&(c.Q6J("ngIf",t.displayLabel),c.xp6(1),c.Q6J("ngIf",!t.isEditMode()),c.xp6(1),c.Q6J("ngIf",t.isEditable()&&t.isEditMode()))},dependencies:[n.mk,n.sg,n.O5,o.YN,o.Kr,o.EJ,o.JJ,o.On,T.J,hs.f,ms.M,h.q,A.D,J.a],encapsulation:2})),fieldModuleFilter})();function Us(e,t){if(1&e&&c._UZ(0,"field-label",4),2&e){const e=c.oxw();c.Q6J("fieldname",e.fieldname)("fieldconfig",e.fieldconfig)}}let Rs=(()=>{var e;class fieldNotAuthorized extends r.O{constructor(e,t,s,n,o){super(e,t,s,n,o),(0,i.Z)(this,"model",void 0),(0,i.Z)(this,"view",void 0),(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"router",void 0),this.model=e,this.view=t,this.language=s,this.metadata=n,this.router=o}}return e=fieldNotAuthorized,(0,i.Z)(fieldNotAuthorized,"ɵfac",(function(t){return new(t||e)(c.Y36(w.o),c.Y36(k.e),c.Y36(x.d),c.Y36(u.Pu),c.Y36(L.F0))})),(0,i.Z)(fieldNotAuthorized,"ɵcmp",c.Xpm({type:e,selectors:[["field-not-authorized"]],features:[c.qOj],decls:4,vars:2,consts:[[3,"fieldname","fieldconfig",4,"ngIf"],[3,"fielddisplayclass"],[1,"slds-text-color_inverse-weak"],["label","LBL_NOTAUTHORIZED"],[3,"fieldname","fieldconfig"]],template:function(e,t){1&e&&(c.YNc(0,Us,1,2,"field-label",0),c.TgZ(1,"field-generic-display",1)(2,"span",2),c._UZ(3,"system-label",3),c.qZA()()),2&e&&(c.Q6J("ngIf",t.displayLabel),c.xp6(1),c.Q6J("fielddisplayclass",t.fielddisplayclass))},dependencies:[n.O5,se._,h.q,A.D],encapsulation:2})),fieldNotAuthorized})();function js(e,t){if(1&e&&c._UZ(0,"field-label",3),2&e){const e=c.oxw();c.Q6J("fieldname",e.fieldname)("fieldconfig",e.fieldconfig)}}function Bs(e,t){1&e&&c._UZ(0,"field-not-authorized")}function Gs(e,t){if(1&e&&c._UZ(0,"system-icon",10),2&e){const e=c.oxw(3);c.Q6J("module",e.relateType)}}function Ps(e,t){if(1&e&&(c.TgZ(0,"field-generic-display",6)(1,"div",7),c.YNc(2,Gs,1,1,"system-icon",8),c.TgZ(3,"span",9),c._uU(4),c.qZA()()()),2&e){const e=c.oxw(2);c.Q6J("fielddisplayclass",e.fielddisplayclass)("editable",e.isEditable())("fieldconfig",e.fieldconfig)("fieldid",e.fieldid),c.xp6(2),c.Q6J("ngIf",e.displayicon),c.xp6(1),c.Q6J("module",e.relateType)("id",e.id),c.xp6(1),c.Oqu(e.value)}}function Hs(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"div",19)(1,"div",20)(2,"span",21)(3,"span",22),c._UZ(4,"system-icon",23),c.qZA(),c.TgZ(5,"span",24),c._uU(6),c.qZA(),c.TgZ(7,"button",25),c.NdJ("click",(function(){c.CHM(e);const t=c.oxw(3);return c.KtG(t.clearField())})),c._UZ(8,"system-button-icon",26),c.qZA()()()()}if(2&e){const e=c.oxw(3);c.xp6(4),c.Q6J("module",e.relateType)("size","small"),c.xp6(2),c.Oqu(e.model.data[e.relateNameField]),c.xp6(2),c.Q6J("icon","close")}}function zs(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"div",27)(1,"input",28,29),c.NdJ("ngModelChange",(function(t){c.CHM(e);const s=c.oxw(3);return c.KtG(s.relateSearchTerm=t)}))("blur",(function(){c.CHM(e);const t=c.oxw(3);return c.KtG(t.closePopups())}))("focus",(function(){c.CHM(e);const t=c.oxw(3);return c.KtG(t.onFocus())})),c.qZA(),c.TgZ(3,"button",30),c.NdJ("click",(function(){c.CHM(e);const t=c.oxw(3);return c.KtG(t.searchWithModal())})),c._UZ(4,"system-button-icon",31),c.qZA()()}if(2&e){const e=c.oxw(3);c.Q6J("ngClass",e.getFieldClass()),c.xp6(1),c.Q6J("disabled",e.disabled)("ngModel",e.relateSearchTerm)("placeholder",e.placeholder)("autocomplete",e.fieldid)}}function Vs(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"field-lookup-recent",35),c.NdJ("selectedObject",(function(t){c.CHM(e);const s=c.oxw(4);return c.KtG(s.setRelated(t))})),c.qZA()}if(2&e){const e=c.oxw(4);c.Q6J("module",e.relateType)}}function Ks(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"field-lookup-search",36),c.NdJ("selectedObject",(function(t){c.CHM(e);const s=c.oxw(4);return c.KtG(s.setRelated(t))}))("searchWithModal",(function(){c.CHM(e);const t=c.oxw(4);return c.KtG(t.searchWithModal())})),c.qZA()}if(2&e){const e=c.oxw(4);c.Q6J("module",e.relateType)("modulefilter",e.fieldconfig.modulefilter)("relatefilter",e.relateFilter)("relateId",null==e.relateFilter?null:e.relateFilter.id)("disableadd",e.disableadd)("searchterm",e.relateSearchTerm)}}function $s(e,t){if(1&e&&(c.TgZ(0,"div",32),c.YNc(1,Vs,1,1,"field-lookup-recent",33),c.YNc(2,Ks,1,6,"field-lookup-search",34),c.qZA()),2&e){const e=c.oxw(3);c.xp6(1),c.Q6J("ngIf",!e.disablerecent&&""===e.relateSearchTerm&&!e.fieldconfig.modulefilter&&!e.relatedfilterrequired),c.xp6(1),c.Q6J("ngIf",!e.disablesearch&&(""!==e.relateSearchTerm||e.fieldconfig.modulefilter||e.relatedfilterrequired))}}const Xs=function(e){return{"slds-is-open":e}};function Ws(e,t){if(1&e&&(c.TgZ(0,"div",11)(1,"div",12)(2,"div",13)(3,"div",14),c.YNc(4,Hs,9,4,"div",15),c.YNc(5,zs,5,5,"div",16),c.YNc(6,$s,3,2,"div",17),c.qZA()()(),c._UZ(7,"field-messages",18),c.qZA()),2&e){const e=c.oxw(2);c.Q6J("ngClass",e.getFieldClass()),c.xp6(3),c.Q6J("ngClass",c.VKq(6,Xs,e.relateSearchOpen)),c.xp6(1),c.Q6J("ngIf",e.id),c.xp6(1),c.Q6J("ngIf",!e.model.data[e.relateIdField]),c.xp6(1),c.Q6J("ngIf",!e.disablerecent||!e.disablesearch),c.xp6(1),c.Q6J("fieldname",e.fieldname)}}function ei(e,t){if(1&e&&(c.YNc(0,Ps,5,8,"field-generic-display",4),c.YNc(1,Ws,8,8,"div",5)),2&e){const e=c.oxw();c.Q6J("ngIf",!e.isEditMode()),c.xp6(1),c.Q6J("ngIf",e.isEditable()&&e.isEditMode())}}let ti=(()=>{var e;class fieldRelate extends r.O{constructor(e,t,s,n,o,l,a,d,r){super(e,t,s,n,o),(0,i.Z)(this,"model",void 0),(0,i.Z)(this,"view",void 0),(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"router",void 0),(0,i.Z)(this,"elementRef",void 0),(0,i.Z)(this,"modal",void 0),(0,i.Z)(this,"backend",void 0),(0,i.Z)(this,"toast",void 0),(0,i.Z)(this,"relateIdField",""),(0,i.Z)(this,"relateNameField",""),(0,i.Z)(this,"relateType",""),(0,i.Z)(this,"relateSearchOpen",!1),(0,i.Z)(this,"relateSearchTerm",""),(0,i.Z)(this,"isAuthorized",!0),(0,i.Z)(this,"relateFilter",void 0),this.model=e,this.view=t,this.language=s,this.metadata=n,this.router=o,this.elementRef=l,this.modal=a,this.backend=d,this.toast=r}get displayicon(){return!!this.fieldconfig.displayicon}get disableadd(){return this.fieldconfig.disableadd}get disablerecent(){return!!this.fieldconfig.disablerecent}get disablesearch(){return!!this.fieldconfig.disablesearch}get id(){return this.model.getField(this.relateIdField)}ngOnInit(){const e=this.metadata.getFieldDefs(this.model.module,this.fieldname);this.relateIdField=e.id_name,this.relateNameField=this.fieldname,this.relateType=e.module,this.isAuthorized=this.metadata.checkModuleAcl(e.module,"list")||this.metadata.checkModuleAcl(e.module,"listrelated"),this.handleRelateFIlterField()}handleRelateFIlterField(){this.fieldconfig.relatefilterfield&&(this.createRelateFilter(),this.subscriptions.add(this.model.data$.subscribe((e=>{this.updateRelateFilter()}))))}createRelateFilter(){let e=this.metadata.getFieldDefs(this.model.module,this.fieldconfig.relatefilterfield);e&&(this.relateFilter={module:e.module,relationship:this.fieldconfig.relatefilterrelationship,id:this.model.getField(e.id_name),display:this.model.getField(this.fieldconfig.relatefilterfield),active:!!this.model.getField(e.id_name),required:!!this.fieldconfig.relatedfilterrequired})}get placeholder(){if(this.relateFilter&&this.fieldconfig.relatedfilterrequired){let e=this.metadata.getFieldDefs(this.model.module,this.fieldconfig.relatefilterfield);if(!this.model.getField(e.id_name))return this.language.getLabelFormatted("LBL_SELECT_FIELD_FIRST",[this.language.getFieldDisplayName(this.model.module,this.fieldconfig.relatefilterfield)])}return this.language.getModuleCombinedLabel("LBL_SEARCH",this.relateType)}get relatedfilterrequired(){return this.fieldconfig.relatedfilterrequired}get disabled(){if(this.relateFilter&&this.relatedfilterrequired){let e=this.metadata.getFieldDefs(this.model.module,this.fieldconfig.relatefilterfield);if(!this.model.getField(e.id_name))return!0}return!1}updateRelateFilter(){let e=this.metadata.getFieldDefs(this.model.module,this.fieldconfig.relatefilterfield);this.relateFilter.id=this.model.getField(e.id_name),this.relateFilter.display=this.model.getField(this.fieldconfig.relatefilterfield),this.fieldconfig.relatedfilterrequired&&!this.relateFilter.id&&this.id&&this.removeRelated(),this.relateFilter.active=!!this.relateFilter.id}closePopups(){this.model.getField(this.relateIdField)&&(this.relateSearchTerm=""),this.relateSearchOpen=!1}clearField(){this.fieldconfig.promptondelete?this.modal.confirm(this.language.getLabelFormatted("LBL_PROMPT_DELETE_RELATIONSHIP",[this.language.getFieldDisplayName(this.model.module,this.fieldname,this.fieldconfig)],"long"),this.language.getLabelFormatted("LBL_PROMPT_DELETE_RELATIONSHIP",[this.language.getFieldDisplayName(this.model.module,this.fieldname,this.fieldconfig)])).subscribe((e=>{e&&this.removeRelated()})):this.removeRelated()}removeRelated(){let e={};e[this.relateNameField]="",e[this.relateIdField]="",this.model.setFields(e)}onFocus(){this.relateSearchOpen=!0}setRelated(e){let t={};t[this.relateIdField]=e.id,t[this.relateNameField]=e.text,this.model.setFields(t),2==this.fieldconfig.executeCopyRules?this.executeCopyRules(e.id):1==this.fieldconfig.executeCopyRules&&this.modal.confirm(this.language.getLabel("MSG_COPY_DATA","","long"),this.language.getLabel("MSG_COPY_DATA")).subscribe((t=>t&&this.executeCopyRules(e.id))),this.closePopups()}executeCopyRules(e){let t=this.modal.await("LBL_LOADING");this.backend.get(this.relateType,e).subscribe((e=>{let s={module:this.relateType,id:e.id,data:e};this.model.executeCopyRulesParent(s),t.emit()}),(()=>{this.toast.sendToast("ERR_LOADING_RECORD","error"),t.emit()}))}goRelated(){this.router.navigate(["/module/"+this.relateType+"/"+this.model.getField(this.relateIdField)])}searchWithModal(){this.relateSearchOpen=!1,this.modal.openModal("ObjectModalModuleLookup").subscribe((e=>{e.instance.module=this.relateType,e.instance.modulefilter=this.fieldconfig.modulefilter,e.instance.multiselect=!1,e.instance.relatefilter=this.relateFilter,this.subscriptions.add(e.instance.selectedItems.subscribe((e=>{e.length&&this.setRelated({id:e[0].id,text:e[0].summary_text,data:e[0]})}))),e.instance.searchTerm=this.relateSearchTerm}))}}return e=fieldRelate,(0,i.Z)(fieldRelate,"ɵfac",(function(t){return new(t||e)(c.Y36(w.o),c.Y36(k.e),c.Y36(x.d),c.Y36(u.Pu),c.Y36(L.F0),c.Y36(c.SBq),c.Y36(I.o),c.Y36($.y),c.Y36(X.A))})),(0,i.Z)(fieldRelate,"ɵcmp",c.Xpm({type:e,selectors:[["field-relate"]],features:[c._Bn([Ms.g]),c.qOj],decls:4,vars:3,consts:[[3,"fieldname","fieldconfig",4,"ngIf"],[4,"ngIf","ngIfElse"],["fieldContainer",""],[3,"fieldname","fieldconfig"],[3,"fielddisplayclass","editable","fieldconfig","fieldid",4,"ngIf"],["class","slds-form-element__control slds-m-vertical--xx-small",3,"ngClass",4,"ngIf"],[3,"fielddisplayclass","editable","fieldconfig","fieldid"],[1,"slds-grid","slds-grid--vertical-align-center"],["size","x-small","divClass","slds-align--absolute-center slds-p-right--xx-small",3,"module",4,"ngIf"],["system-model-popover","",3,"module","id"],["size","x-small","divClass","slds-align--absolute-center slds-p-right--xx-small",3,"module"],[1,"slds-form-element__control","slds-m-vertical--xx-small",3,"ngClass"],[1,"slds-combobox_container"],[1,"slds-form-element","slds-lookup"],["role","combobox",1,"slds-combobox","slds-dropdown-trigger","slds-dropdown-trigger_click",3,"ngClass"],["class","slds-form-element__control",4,"ngIf"],["class","slds-combobox__form-element slds-input-has-icon slds-input-has-icon_right",3,"ngClass",4,"ngIf"],["class","slds-dropdown slds-dropdown_fluid","role","listbox",4,"ngIf"],[3,"fieldname"],[1,"slds-form-element__control"],[1,"slds-pill_container"],[1,"slds-pill","slds-size--1-of-1"],[1,"slds-icon_container","slds-icon-standard-account","slds-pill__icon_container"],[3,"module","size"],[1,"slds-pill__label"],[1,"slds-button","slds-button--icon","slds-pill__remove",3,"click"],[3,"icon"],[1,"slds-combobox__form-element","slds-input-has-icon","slds-input-has-icon_right",3,"ngClass"],["type","text","role","combobox",1,"slds-input","slds-combobox__input",3,"disabled","ngModel","placeholder","autocomplete","ngModelChange","blur","focus"],["focus",""],[1,"slds-button","slds-button_icon","slds-input__icon","slds-input__icon_right",3,"click"],["icon","search"],["role","listbox",1,"slds-dropdown","slds-dropdown_fluid"],[3,"module","selectedObject",4,"ngIf"],[3,"module","modulefilter","relatefilter","relateId","disableadd","searchterm","selectedObject","searchWithModal",4,"ngIf"],[3,"module","selectedObject"],[3,"module","modulefilter","relatefilter","relateId","disableadd","searchterm","selectedObject","searchWithModal"]],template:function(e,t){if(1&e&&(c.YNc(0,js,1,2,"field-label",0),c.YNc(1,Bs,1,0,"field-not-authorized",1),c.YNc(2,ei,2,2,"ng-template",null,2,c.W1O)),2&e){const e=c.MAs(3);c.Q6J("ngIf",t.displayLabel),c.xp6(1),c.Q6J("ngIf",!t.isAuthorized)("ngIfElse",e)}},dependencies:[n.mk,n.O5,o.Fj,o.JJ,o.On,T.J,hs.f,gs.g,Rs,h.q,A.D,ps.P,fs.$,J.a],encapsulation:2})),fieldRelate})();function si(e,t){if(1&e&&(c.TgZ(0,"field-generic-display",2)(1,"a",3),c._uU(2),c.qZA()()),2&e){const e=c.oxw();c.Q6J("fielddisplayclass",e.fielddisplayclass)("editable",e.isEditable())("fieldconfig",e.fieldconfig)("fieldid",e.fieldid),c.xp6(1),c.Q6J("module",e.relateType)("id",e.relatedFieldId),c.xp6(1),c.Oqu(e.value)}}function ii(e,t){if(1&e&&(c.TgZ(0,"option",10),c._uU(1),c.qZA()),2&e){const e=t.$implicit,s=c.oxw(2);c.Q6J("value",e.id),c.xp6(1),c.hij(" ",s.language.getLabel(e.summary_text)," ")}}function ni(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"div",4)(1,"div",5)(2,"div",6)(3,"select",7),c.NdJ("ngModelChange",(function(t){c.CHM(e);const s=c.oxw();return c.KtG(s.relatedFieldId=t)})),c._UZ(4,"option"),c.YNc(5,ii,2,2,"option",8),c.qZA()()(),c._UZ(6,"field-messages",9),c.qZA()}if(2&e){const e=c.oxw();c.xp6(3),c.Q6J("ngModel",e.relatedFieldId),c.xp6(2),c.Q6J("ngForOf",e.relatedList)("ngForTrackBy",e.trackByFn),c.xp6(1),c.Q6J("fieldname",e.fieldname)}}let oi=(()=>{var e;class fieldRelateList extends r.O{constructor(e,t,s,n,o,l,a,d,r){super(e,t,s,n,o),(0,i.Z)(this,"model",void 0),(0,i.Z)(this,"view",void 0),(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"router",void 0),(0,i.Z)(this,"elementRef",void 0),(0,i.Z)(this,"modal",void 0),(0,i.Z)(this,"backend",void 0),(0,i.Z)(this,"toast",void 0),(0,i.Z)(this,"relatedList",[]),(0,i.Z)(this,"relateIdField",""),(0,i.Z)(this,"relateNameField",""),(0,i.Z)(this,"relateType",""),this.model=e,this.view=t,this.language=s,this.metadata=n,this.router=o,this.elementRef=l,this.modal=a,this.backend=d,this.toast=r}get relatedFieldId(){return this.model.getField(this.relateIdField)}set relatedFieldId(e){let t=this.relatedList.find((t=>t.id==e));t&&(this.model.setField(this.relateIdField,t.id),this.model.setField(this.relateNameField,t.summary_text),this.relateType&&(2==this.fieldconfig.executeCopyRules?this.executeCopyRules(t.id):1==this.fieldconfig.executeCopyRules&&this.modal.confirm("Copy the data from related record?","Copy data?").subscribe((e=>e&&this.executeCopyRules(t.id)))))}ngOnInit(){this.setFieldDefs(),this.getRelatedList()}setFieldDefs(){const e=this.metadata.getFieldDefs(this.model.module,this.fieldname);this.relateIdField=e.id_name,this.relateNameField=this.fieldname,this.relateType=e.module}getRelatedList(){if(!this.relateType)return;let e={limit:this.fieldconfig.limit||-1,modulefilter:this.fieldconfig.modulefilter};this.backend.getList(this.relateType,[{sortfield:"name",sortirection:"ASC"}],e).subscribe((e=>{e&&e.list&&(this.relatedList=e.list)}))}executeCopyRules(e){let t=this.modal.await("LBL_LOADING");this.backend.get(this.relateType,e).subscribe((e=>{let s={module:this.relateType,id:e.id,data:e};this.model.executeCopyRulesParent(s),t.emit()}),(()=>{this.toast.sendToast("ERR_LOADING_RECORD","error"),t.emit()}))}trackByFn(e,t){return t.id}}return e=fieldRelateList,(0,i.Z)(fieldRelateList,"ɵfac",(function(t){return new(t||e)(c.Y36(w.o),c.Y36(k.e),c.Y36(x.d),c.Y36(u.Pu),c.Y36(L.F0),c.Y36(c.SBq),c.Y36(I.o),c.Y36($.y),c.Y36(X.A))})),(0,i.Z)(fieldRelateList,"ɵcmp",c.Xpm({type:e,selectors:[["field-relate-list"]],features:[c.qOj],decls:2,vars:2,consts:[[3,"fielddisplayclass","editable","fieldconfig","fieldid",4,"ngIf"],["class","slds-form-element",4,"ngIf"],[3,"fielddisplayclass","editable","fieldconfig","fieldid"],["href","javascript:void(0);","system-model-popover","",3,"module","id"],[1,"slds-form-element"],[1,"slds-form-element__control"],[1,"slds-select_container"],[1,"slds-select",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf","ngForTrackBy"],[3,"fieldname"],[3,"value"]],template:function(e,t){1&e&&(c.YNc(0,si,3,7,"field-generic-display",0),c.YNc(1,ni,7,4,"div",1)),2&e&&(c.Q6J("ngIf",!t.isEditMode()),c.xp6(1),c.Q6J("ngIf",t.isEditable()&&t.isEditMode()))},dependencies:[n.sg,n.O5,o.YN,o.Kr,o.EJ,o.JJ,o.On,gs.g,A.D,J.a],encapsulation:2})),fieldRelateList})();function li(e,t){if(1&e&&(c.TgZ(0,"li",3),c._UZ(1,"field-container",4),c.qZA()),2&e){const e=c.oxw().$implicit;c.xp6(1),c.Q6J("field",e.field)("fieldconfig",e.fieldconfig)}}function ai(e,t){if(1&e&&(c.ynx(0),c.YNc(1,li,2,2,"li",2),c.BQk()),2&e){const e=t.$implicit,s=c.oxw();c.xp6(1),c.Q6J("ngIf",s.model.getField(e.field))}}let di=(()=>{var e;class fieldLinkedDetails{constructor(e,t,s){(0,i.Z)(this,"model",void 0),(0,i.Z)(this,"view",void 0),(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"data",void 0),(0,i.Z)(this,"module",void 0),(0,i.Z)(this,"fieldset",void 0),(0,i.Z)(this,"fieldsetitems",[]),this.model=e,this.view=t,this.metadata=s}ngOnInit(){this.fieldsetitems=this.metadata.getFieldSetFields(this.fieldset,this.module),this.view.isEditable=!1,this.view.displayLabels=!1}ngOnChanges(e){this.model.module=this.module,this.model.id=this.data.id,this.model.setData(this.data)}}return e=fieldLinkedDetails,(0,i.Z)(fieldLinkedDetails,"ɵfac",(function(t){return new(t||e)(c.Y36(w.o),c.Y36(k.e),c.Y36(u.Pu))})),(0,i.Z)(fieldLinkedDetails,"ɵcmp",c.Xpm({type:e,selectors:[["field-linked-details"]],inputs:{data:"data",module:"module",fieldset:"fieldset"},features:[c._Bn([w.o,k.e]),c.TTD],decls:2,vars:1,consts:[[1,"slds-list_horizontal","slds-has-dividers_left"],[4,"ngFor","ngForOf"],["class","slds-item",4,"ngIf"],[1,"slds-item"],["fielddisplayclass","slds-align_absolute-center",3,"field","fieldconfig"]],template:function(e,t){1&e&&(c.TgZ(0,"ul",0),c.YNc(1,ai,2,1,"ng-container",1),c.qZA()),2&e&&(c.xp6(1),c.Q6J("ngForOf",t.fieldsetitems))},dependencies:[n.sg,n.O5,m.j],encapsulation:2})),fieldLinkedDetails})();function ri(e,t){if(1&e&&c._UZ(0,"field-label",3),2&e){const e=c.oxw();c.Q6J("fieldname",e.fieldname)("fieldconfig",e.fieldconfig)}}function ci(e,t){1&e&&c._UZ(0,"field-not-authorized")}function ui(e,t){if(1&e&&c._UZ(0,"system-icon",11),2&e){const e=c.oxw(3);c.Q6J("module",e.relateType)}}function hi(e,t){if(1&e&&(c.TgZ(0,"span",12),c._uU(1),c.qZA()),2&e){const e=c.oxw(3);c.Q6J("module",e.relateType)("id",e.id),c.xp6(1),c.Oqu(e.value)}}function mi(e,t){if(1&e&&(c.TgZ(0,"span"),c._UZ(1,"field-linked-details",13),c.qZA()),2&e){const e=c.oxw(3);c.xp6(1),c.Q6J("fieldset",e.fieldconfig.fieldset)("module",e.fielddefs.module)("data",e.relData)}}function gi(e,t){if(1&e&&(c.TgZ(0,"field-generic-display",6)(1,"div",7),c.YNc(2,ui,1,1,"system-icon",8),c.YNc(3,hi,2,3,"span",9),c.YNc(4,mi,2,3,"span",10),c.qZA()()),2&e){const e=c.oxw(2);c.Q6J("fielddisplayclass",e.fielddisplayclass)("editable",e.isEditable())("fieldconfig",e.fieldconfig)("fieldid",e.fieldid),c.xp6(2),c.Q6J("ngIf",e.displayicon),c.xp6(1),c.Q6J("ngIf",!e.fieldconfig.fieldset),c.xp6(1),c.Q6J("ngIf",e.fieldconfig.fieldset&&e.relData)}}function pi(e,t){if(1&e&&(c.TgZ(0,"span",32),c._uU(1),c.qZA()),2&e){const e=c.oxw(4);c.xp6(1),c.Oqu(e.value)}}function fi(e,t){if(1&e&&(c.TgZ(0,"span",32),c._UZ(1,"field-linked-details",13),c.qZA()),2&e){const e=c.oxw(4);c.xp6(1),c.Q6J("fieldset",e.fieldconfig.fieldset)("module",e.fielddefs.module)("data",e.relData)}}function bi(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"div",24)(1,"div",25)(2,"span",26)(3,"span",27),c._UZ(4,"system-icon",28),c.qZA(),c.YNc(5,pi,2,1,"span",29),c.YNc(6,fi,2,3,"span",29),c.TgZ(7,"button",30),c.NdJ("click",(function(){c.CHM(e);const t=c.oxw(3);return c.KtG(t.clearField())})),c._UZ(8,"system-button-icon",31),c.qZA()()()()}if(2&e){const e=c.oxw(3);c.xp6(4),c.Q6J("module",e.relateType)("size","small"),c.xp6(1),c.Q6J("ngIf",!e.fieldconfig.fieldset),c.xp6(1),c.Q6J("ngIf",e.fieldconfig.fieldset&&e.relData),c.xp6(2),c.Q6J("icon","close")}}function vi(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"div",33)(1,"input",34,35),c.NdJ("ngModelChange",(function(t){c.CHM(e);const s=c.oxw(3);return c.KtG(s.relateSearchTerm=t)}))("blur",(function(){c.CHM(e);const t=c.oxw(3);return c.KtG(t.closePopups())}))("focus",(function(){c.CHM(e);const t=c.oxw(3);return c.KtG(t.onFocus())})),c.qZA(),c.TgZ(3,"button",36),c.NdJ("click",(function(){c.CHM(e);const t=c.oxw(3);return c.KtG(t.searchWithModal())})),c._UZ(4,"system-button-icon",37),c.qZA()()}if(2&e){const e=c.oxw(3);c.Q6J("ngClass",e.getFieldClass()),c.xp6(1),c.Q6J("disabled",e.disabled)("ngModel",e.relateSearchTerm)("placeholder",e.placeholder)("autocomplete",e.fieldid)}}function Zi(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"field-lookup-recent",38),c.NdJ("selectedObject",(function(t){c.CHM(e);const s=c.oxw(3);return c.KtG(s.setRelated(t))})),c.qZA()}if(2&e){const e=c.oxw(3);c.Q6J("module",e.relateType)}}function _i(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"field-lookup-search",39),c.NdJ("selectedObject",(function(t){c.CHM(e);const s=c.oxw(3);return c.KtG(s.setRelated(t))}))("searchWithModal",(function(){c.CHM(e);const t=c.oxw(3);return c.KtG(t.searchWithModal())})),c.qZA()}if(2&e){const e=c.oxw(3);c.Q6J("module",e.relateType)("modulefilter",e.fieldconfig.modulefilter)("relatefilter",e.relateFilter)("relateId",null==e.relateFilter?null:e.relateFilter.id)("disableadd",e.disableadd)("searchterm",e.relateSearchTerm)}}const yi=function(e){return{"slds-is-open":e}};function xi(e,t){if(1&e&&(c.TgZ(0,"div",14)(1,"div",15)(2,"div",16)(3,"div",17),c.YNc(4,bi,9,5,"div",18),c.YNc(5,vi,5,5,"div",19),c.TgZ(6,"div",20),c.YNc(7,Zi,1,1,"field-lookup-recent",21),c.YNc(8,_i,1,6,"field-lookup-search",22),c.qZA()()()(),c._UZ(9,"field-messages",23),c.qZA()),2&e){const e=c.oxw(2);c.Q6J("ngClass",e.getFieldClass()),c.xp6(3),c.Q6J("ngClass",c.VKq(7,yi,e.relateSearchOpen)),c.xp6(1),c.Q6J("ngIf",e.id),c.xp6(1),c.Q6J("ngIf",!e.model.data[e.relateIdField]),c.xp6(2),c.Q6J("ngIf",""===e.relateSearchTerm&&!e.fieldconfig.modulefilter&&!e.relatedfilterrequired),c.xp6(1),c.Q6J("ngIf",""!==e.relateSearchTerm||e.fieldconfig.modulefilter||e.relatedfilterrequired),c.xp6(1),c.Q6J("fieldname",e.fieldname)}}function wi(e,t){if(1&e&&(c.YNc(0,gi,5,7,"field-generic-display",4),c.YNc(1,xi,10,9,"div",5)),2&e){const e=c.oxw();c.Q6J("ngIf",!e.isEditMode()),c.xp6(1),c.Q6J("ngIf",e.isEditable()&&e.isEditMode())}}let Ti=(()=>{var e;class fieldLinked extends r.O{constructor(e,t,s,n,o,l,a,d,r){super(e,t,s,n,o),(0,i.Z)(this,"model",void 0),(0,i.Z)(this,"view",void 0),(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"router",void 0),(0,i.Z)(this,"elementRef",void 0),(0,i.Z)(this,"modal",void 0),(0,i.Z)(this,"backend",void 0),(0,i.Z)(this,"toast",void 0),(0,i.Z)(this,"relateIdField",""),(0,i.Z)(this,"relateNameField",""),(0,i.Z)(this,"relateType",""),(0,i.Z)(this,"relateSearchOpen",!1),(0,i.Z)(this,"relateSearchTerm",""),(0,i.Z)(this,"isAuthorized",!0),(0,i.Z)(this,"relateFilter",void 0),this.model=e,this.view=t,this.language=s,this.metadata=n,this.router=o,this.elementRef=l,this.modal=a,this.backend=d,this.toast=r}get displayicon(){return!!this.fieldconfig.displayicon}get disableadd(){return this.fieldconfig.disableadd}get id(){return this.model.getField(this.relateIdField)}get value(){let e=this.model.getField(this.fieldname);return this.fielddefs?.rname&&e&&e[this.fielddefs.rname]?e[this.fielddefs.rname]:""}set value(e){}get relData(){return this.model.getField(this.fieldname)??{}}ngOnInit(){if(super.ngOnInit(),this.relateIdField=this.fielddefs.id_name,this.relateNameField=this.fieldname,this.relateType=this.fielddefs.module,this.isAuthorized=this.metadata.checkModuleAcl(this.fielddefs.module,"list")||this.metadata.checkModuleAcl(this.fielddefs.module,"listrelated"),!this.fieldconfig.fieldset){let e=this.metadata.getComponentConfig("fieldLinked",this.fielddefs.module);e.fieldset&&(this.fieldconfig.fieldset=e.fieldset)}this.handleRelateFilterField()}handleRelateFilterField(){this.fieldconfig.relatefilterfield&&(this.createRelateFilter(),this.subscriptions.add(this.model.data$.subscribe((e=>{this.updateRelateFilter()}))))}createRelateFilter(){let e=this.metadata.getFieldDefs(this.model.module,this.fieldconfig.relatefilterfield);e&&(this.relateFilter={module:e.module,relationship:this.fieldconfig.relatefilterrelationship,id:this.model.getField(e.id_name),display:this.model.getField(this.fieldconfig.relatefilterfield),active:!!this.model.getField(e.id_name),required:!!this.fieldconfig.relatedfilterrequired})}get placeholder(){if(this.relateFilter&&this.fieldconfig.relatedfilterrequired){let e=this.metadata.getFieldDefs(this.model.module,this.fieldconfig.relatefilterfield);if(!this.model.getField(e.id_name))return this.language.getLabelFormatted("LBL_SELECT_FIELD_FIRST",[this.language.getFieldDisplayName(this.model.module,this.fieldconfig.relatefilterfield)])}return this.language.getModuleCombinedLabel("LBL_SEARCH",this.relateType)}get relatedfilterrequired(){return this.fieldconfig.relatedfilterrequired}get disabled(){if(this.relateFilter&&this.relatedfilterrequired){let e=this.metadata.getFieldDefs(this.model.module,this.fieldconfig.relatefilterfield);if(!this.model.getField(e.id_name))return!0}return!1}updateRelateFilter(){let e=this.metadata.getFieldDefs(this.model.module,this.fieldconfig.relatefilterfield);this.relateFilter.id=this.model.getField(e.id_name),this.relateFilter.display=this.model.getField(this.fieldconfig.relatefilterfield),this.fieldconfig.relatedfilterrequired&&!this.relateFilter.id&&this.id&&this.removeRelated(),this.relateFilter.active=!!this.relateFilter.id}closePopups(){this.model.getField(this.relateIdField)&&(this.relateSearchTerm=""),this.relateSearchOpen=!1}clearField(){this.fieldconfig.promptondelete?this.modal.confirm(this.language.getLabelFormatted("LBL_PROMPT_DELETE_RELATIONSHIP",[this.language.getFieldDisplayName(this.model.module,this.fieldname,this.fieldconfig)],"long"),this.language.getLabelFormatted("LBL_PROMPT_DELETE_RELATIONSHIP",[this.language.getFieldDisplayName(this.model.module,this.fieldname,this.fieldconfig)])).subscribe((e=>{e&&this.removeRelated()})):this.removeRelated()}removeRelated(){let e={};e[this.relateNameField]="",e[this.relateIdField]="",this.model.setFields(e)}onFocus(){this.relateSearchOpen=!0}setRelated(e){let t={};t[this.relateIdField]=e.id,t[this.relateNameField]=e.data,this.model.setFields(t),2==this.fieldconfig.executeCopyRules?this.executeCopyRules(e.id):1==this.fieldconfig.executeCopyRules&&this.modal.confirm(this.language.getLabel("MSG_COPY_DATA","","long"),this.language.getLabel("MSG_COPY_DATA")).subscribe((t=>t&&this.executeCopyRules(e.id))),this.closePopups()}executeCopyRules(e){let t=this.modal.await("LBL_LOADING");this.backend.get(this.relateType,e).subscribe((e=>{let s={module:this.relateType,id:e.id,data:e};this.model.executeCopyRulesParent(s),t.emit()}),(()=>{this.toast.sendToast("ERR_LOADING_RECORD","error"),t.emit()}))}goRelated(){this.router.navigate(["/module/"+this.relateType+"/"+this.model.getField(this.relateIdField)])}searchWithModal(){this.relateSearchOpen=!1,this.modal.openModal("ObjectModalModuleLookup").subscribe((e=>{e.instance.module=this.relateType,e.instance.modulefilter=this.fieldconfig.modulefilter,e.instance.multiselect=!1,e.instance.relatefilter=this.relateFilter,this.subscriptions.add(e.instance.selectedItems.subscribe((e=>{e.length&&this.setRelated({id:e[0].id,text:e[0].summary_text,data:e[0]})}))),e.instance.searchTerm=this.relateSearchTerm}))}}return e=fieldLinked,(0,i.Z)(fieldLinked,"ɵfac",(function(t){return new(t||e)(c.Y36(w.o),c.Y36(k.e),c.Y36(x.d),c.Y36(u.Pu),c.Y36(L.F0),c.Y36(c.SBq),c.Y36(I.o),c.Y36($.y),c.Y36(X.A))})),(0,i.Z)(fieldLinked,"ɵcmp",c.Xpm({type:e,selectors:[["field-linked"]],features:[c.qOj],decls:4,vars:3,consts:[[3,"fieldname","fieldconfig",4,"ngIf"],[4,"ngIf","ngIfElse"],["fieldContainer",""],[3,"fieldname","fieldconfig"],[3,"fielddisplayclass","editable","fieldconfig","fieldid",4,"ngIf"],["class","slds-form-element__control slds-m-vertical--xx-small",3,"ngClass",4,"ngIf"],[3,"fielddisplayclass","editable","fieldconfig","fieldid"],[1,"slds-grid","slds-grid--vertical-align-center"],["size","x-small","divClass","slds-align--absolute-center slds-p-right--xx-small",3,"module",4,"ngIf"],["system-model-popover","",3,"module","id",4,"ngIf"],[4,"ngIf"],["size","x-small","divClass","slds-align--absolute-center slds-p-right--xx-small",3,"module"],["system-model-popover","",3,"module","id"],[3,"fieldset","module","data"],[1,"slds-form-element__control","slds-m-vertical--xx-small",3,"ngClass"],[1,"slds-combobox_container"],[1,"slds-form-element","slds-lookup"],["role","combobox",1,"slds-combobox","slds-dropdown-trigger","slds-dropdown-trigger_click",3,"ngClass"],["class","slds-form-element__control",4,"ngIf"],["class","slds-combobox__form-element slds-input-has-icon slds-input-has-icon_right",3,"ngClass",4,"ngIf"],["role","listbox",1,"slds-dropdown","slds-dropdown_fluid"],[3,"module","selectedObject",4,"ngIf"],[3,"module","modulefilter","relatefilter","relateId","disableadd","searchterm","selectedObject","searchWithModal",4,"ngIf"],[3,"fieldname"],[1,"slds-form-element__control"],[1,"slds-pill_container"],[1,"slds-pill","slds-size--1-of-1"],[1,"slds-icon_container","slds-icon-standard-account","slds-pill__icon_container"],[3,"module","size"],["class","slds-pill__label",4,"ngIf"],[1,"slds-button","slds-button--icon","slds-pill__remove",3,"click"],[3,"icon"],[1,"slds-pill__label"],[1,"slds-combobox__form-element","slds-input-has-icon","slds-input-has-icon_right",3,"ngClass"],["type","text","role","combobox",1,"slds-input","slds-combobox__input",3,"disabled","ngModel","placeholder","autocomplete","ngModelChange","blur","focus"],["focus",""],[1,"slds-button","slds-button_icon","slds-input__icon","slds-input__icon_right",3,"click"],["icon","search"],[3,"module","selectedObject"],[3,"module","modulefilter","relatefilter","relateId","disableadd","searchterm","selectedObject","searchWithModal"]],template:function(e,t){if(1&e&&(c.YNc(0,ri,1,2,"field-label",0),c.YNc(1,ci,1,0,"field-not-authorized",1),c.YNc(2,wi,2,2,"ng-template",null,2,c.W1O)),2&e){const e=c.MAs(3);c.Q6J("ngIf",t.displayLabel),c.xp6(1),c.Q6J("ngIf",!t.isAuthorized)("ngIfElse",e)}},dependencies:[n.mk,n.O5,o.Fj,o.JJ,o.On,T.J,hs.f,gs.g,Rs,h.q,A.D,di,ps.P,fs.$,J.a],encapsulation:2})),fieldLinked})();function Ci(e,t){if(1&e&&c._UZ(0,"field-label",6),2&e){const e=c.oxw();c.Q6J("fieldname",e.fieldname)("fieldconfig",e.fieldconfig)}}let Ai=(()=>{var e;class fieldModifiedBy extends Ti{constructor(e,t,s,n,o,l,a,d,r,c){super(e,t,s,n,o,l,a,d,r),(0,i.Z)(this,"model",void 0),(0,i.Z)(this,"view",void 0),(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"router",void 0),(0,i.Z)(this,"elementRef",void 0),(0,i.Z)(this,"modal",void 0),(0,i.Z)(this,"backend",void 0),(0,i.Z)(this,"toast",void 0),(0,i.Z)(this,"userpreferences",void 0),this.model=e,this.view=t,this.language=s,this.metadata=n,this.router=o,this.elementRef=l,this.modal=a,this.backend=d,this.toast=r,this.userpreferences=c}get userid(){return this.relData?.id}get datefield(){return this.fieldconfig.field_date?this.fieldconfig.field_date:"date_modified"}get displayDate(){try{if(this.model.getField(this.fieldname)){let e=this.model.getFieldValue(this.datefield);return e.isValid()?e.format(this.userpreferences.getDateFormat()):""}return""}catch(e){return""}}get displayTime(){try{if(this.model.getField(this.fieldname)){let e=this.model.getFieldValue(this.datefield);return e.isValid()?e.format(this.userpreferences.getTimeFormat()):""}return""}catch(e){return""}}}return e=fieldModifiedBy,(0,i.Z)(fieldModifiedBy,"ɵfac",(function(t){return new(t||e)(c.Y36(w.o),c.Y36(k.e),c.Y36(x.d),c.Y36(u.Pu),c.Y36(L.F0),c.Y36(c.SBq),c.Y36(I.o),c.Y36($.y),c.Y36(X.A),c.Y36(Ze.z))})),(0,i.Z)(fieldModifiedBy,"ɵcmp",c.Xpm({type:e,selectors:[["field-generic"]],features:[c.qOj],decls:11,vars:8,consts:[[3,"fieldname","fieldconfig",4,"ngIf"],[3,"fielddisplayclass","editable","fieldconfig"],[1,"slds-grid","slds-grid--vertical-align-center"],["href","javascript:void(0);","system-model-popover","","module","Users",3,"id"],[1,"slds-p-right--xx-small"],[1,"slds-p-left--xxx-small"],[3,"fieldname","fieldconfig"]],template:function(e,t){1&e&&(c.YNc(0,Ci,1,2,"field-label",0),c.TgZ(1,"field-generic-display",1)(2,"div",2)(3,"a",3),c._uU(4),c.qZA(),c.TgZ(5,"span",4),c._uU(6,","),c.qZA(),c.TgZ(7,"span"),c._uU(8),c.qZA(),c.TgZ(9,"span",5),c._uU(10),c.qZA()()()),2&e&&(c.Q6J("ngIf",t.displayLabel),c.xp6(1),c.Q6J("fielddisplayclass",t.fielddisplayclass)("editable",!1)("fieldconfig",t.fieldconfig),c.xp6(2),c.Q6J("id",t.userid),c.xp6(1),c.Oqu(t.value),c.xp6(4),c.Oqu(t.displayDate),c.xp6(2),c.Oqu(t.displayTime))},dependencies:[n.O5,gs.g,h.q,A.D],encapsulation:2})),fieldModifiedBy})();function ki(e,t){if(1&e&&c._UZ(0,"field-label",3),2&e){const e=c.oxw();c.Q6J("fieldname",e.fieldname)("fieldconfig",e.fieldconfig)}}function Li(e,t){if(1&e&&(c.TgZ(0,"span",6)(1,"span",7),c._UZ(2,"system-icon",8),c.qZA(),c.TgZ(3,"span",9),c._uU(4),c.qZA()()),2&e){const e=t.$implicit;c.xp6(2),c.Q6J("module",e.module)("size","small"),c.xp6(2),c.Oqu(e.summary_text)}}function Ii(e,t){if(1&e&&(c.TgZ(0,"field-generic-display",4),c.YNc(1,Li,5,3,"span",5),c.qZA()),2&e){const e=c.oxw();c.Q6J("fielddisplayclass",e.fielddisplayclass)("editable",e.isEditable())("fieldconfig",e.fieldconfig)("fieldid",e.fieldid),c.xp6(1),c.Q6J("ngForOf",e.pills)}}function Mi(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"li",34),c.NdJ("click",(function(){const t=c.CHM(e).index,s=c.oxw(3);return c.KtG(s.setLookupType(t))})),c.TgZ(1,"div",35)(2,"div",36),c._UZ(3,"system-icon",37),c.TgZ(4,"div",38),c._UZ(5,"system-label-modulename",39),c.qZA()()()()}if(2&e){const e=t.$implicit;c.xp6(3),c.Q6J("module",e.module),c.xp6(2),c.Q6J("module",e.module)}}const Si=function(e){return{"slds-is-open":e}};function Ji(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"div",24)(1,"div",25)(2,"div",26)(3,"div",27)(4,"div",14)(5,"div",28),c.NdJ("click",(function(){c.CHM(e);const t=c.oxw(2);return c.KtG(t.toggleLookupTypeSelect())})),c._UZ(6,"input",29)(7,"system-icon",30),c.qZA(),c.TgZ(8,"div",31)(9,"ul",32),c.YNc(10,Mi,6,2,"li",33),c.qZA()()()()()()()}if(2&e){const e=c.oxw(2);c.xp6(4),c.Q6J("ngClass",c.VKq(3,Si,e.lookuplinkSelectOpen)),c.xp6(2),c.Q6J("value",e.lookupTypeName),c.xp6(4),c.Q6J("ngForOf",e.lookuplinks)}}function Oi(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"field-lookup-recent",40),c.NdJ("selectedObject",(function(t){c.CHM(e);const s=c.oxw(2);return c.KtG(s.addItem(t))})),c.qZA()}if(2&e){const e=c.oxw(2);c.Q6J("module",e.lookuplinks[e.lookupType].module)}}function Ni(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"field-lookup-search",41),c.NdJ("selectedObject",(function(t){c.CHM(e);const s=c.oxw(2);return c.KtG(s.addItem(t))}))("searchWithModal",(function(){c.CHM(e);const t=c.oxw(2);return c.KtG(t.searchWithModal())})),c.qZA()}if(2&e){const e=c.oxw(2);c.Q6J("module",e.lookuplinks[e.lookupType].module)("searchterm",e.lookupSearchTerm)}}function Fi(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"li",44)(1,"span",45)(2,"span",7),c._UZ(3,"system-icon",8),c.qZA(),c.TgZ(4,"span",9),c._uU(5),c.qZA(),c.TgZ(6,"button",46),c.NdJ("click",(function(){const t=c.CHM(e).$implicit,s=c.oxw(3);return c.KtG(s.removeItem(t))})),c._UZ(7,"system-button-icon",18),c.qZA()()()}if(2&e){const e=t.$implicit;c.xp6(3),c.Q6J("module",e.module)("size","small"),c.xp6(2),c.Oqu(e.summary_text),c.xp6(2),c.Q6J("icon","close")}}function qi(e,t){if(1&e&&(c.TgZ(0,"ul",42),c.YNc(1,Fi,8,4,"li",43),c.qZA()),2&e){const e=c.oxw(2);c.xp6(1),c.Q6J("ngForOf",e.pills)("ngForTrackBy",e.pillid)}}const Ei=function(e){return{"slds-combobox__input":e}};function Yi(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"div",10)(1,"div",11),c.YNc(2,Ji,11,5,"div",12),c.TgZ(3,"div",13)(4,"div",14)(5,"div",15)(6,"input",16),c.NdJ("focus",(function(){c.CHM(e);const t=c.oxw();return c.KtG(t.onFocus())}))("ngModelChange",(function(t){c.CHM(e);const s=c.oxw();return c.KtG(s.lookupSearchTerm=t)})),c.qZA(),c.TgZ(7,"button",17),c.NdJ("click",(function(){c.CHM(e);const t=c.oxw();return c.KtG(t.searchWithModal())})),c._UZ(8,"system-button-icon",18),c.qZA()(),c.TgZ(9,"div",19),c.YNc(10,Oi,1,1,"field-lookup-recent",20),c.YNc(11,Ni,1,2,"field-lookup-search",21),c.qZA()()()(),c.YNc(12,qi,2,2,"ul",22),c._UZ(13,"field-messages",23),c.qZA()}if(2&e){const e=c.oxw();c.Q6J("ngClass",e.getFieldClass()),c.xp6(2),c.Q6J("ngIf",e.lookuplinks.length>1),c.xp6(2),c.Q6J("ngClass",c.VKq(11,Si,e.lookupSearchOpen)),c.xp6(2),c.Q6J("ngClass",c.VKq(13,Ei,e.lookuplinks.length>1))("ngModel",e.lookupSearchTerm)("placeholder",e.language.getModuleCombinedLabel("LBL_SEARCH",e.lookuplinks[e.lookupType].module)),c.xp6(2),c.Q6J("icon","search"),c.xp6(2),c.Q6J("ngIf",e.lookupSearchOpen&&""===e.lookupSearchTerm),c.xp6(1),c.Q6J("ngIf",e.lookupSearchOpen&&""!==e.lookupSearchTerm),c.xp6(1),c.Q6J("ngIf",e.pills.length>0),c.xp6(1),c.Q6J("fieldname",e.fieldname)}}let Di=(()=>{var e;class fieldLookup extends r.O{constructor(e,t,s,n,o,l,a,d,r){super(e,t,n,o,l),(0,i.Z)(this,"model",void 0),(0,i.Z)(this,"view",void 0),(0,i.Z)(this,"broadcast",void 0),(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"router",void 0),(0,i.Z)(this,"elementRef",void 0),(0,i.Z)(this,"renderer",void 0),(0,i.Z)(this,"modal",void 0),(0,i.Z)(this,"clickListener",void 0),(0,i.Z)(this,"lookuplinks",[]),(0,i.Z)(this,"lookupType",0),(0,i.Z)(this,"lookuplinkSelectOpen",!1),(0,i.Z)(this,"lookupSearchOpen",!1),(0,i.Z)(this,"lookupSearchTerm",""),(0,i.Z)(this,"pills",[]),this.model=e,this.view=t,this.broadcast=s,this.language=n,this.metadata=o,this.router=l,this.elementRef=a,this.renderer=d,this.modal=r,this.broadcast.message$.subscribe((e=>this.handleMessage(e))),this.model.data$.subscribe((e=>{this.setPills()}))}ngOnInit(){this.lookuplinks=this.getLookuplinks()}get displayAssignedUser(){return this.fieldconfig.displayassigneduser}get lookupTypeName(){return this.language.getModuleName(this.lookuplinks[this.lookupType].module)}getLookupmodules(){let e;return this.fieldconfig.lookupmodules&&(e=this.fieldconfig.lookupmodules.replace(/\s/g,"").split(",")),e||(e=["Contacts","Users"]),e}getLookuplinks(){let e;if(this.fieldconfig.lookuplinks&&(e=this.fieldconfig.lookuplinks.replace(/\s/g,"").split(",")),!e){e=[];for(let t of this.getLookupmodules())e.push(t.toLowerCase())}let t=[];for(let s of e)t.push({name:s,module:this.metadata.getFieldDefs(this.model.module,s).module});return t}setPills(){for(let e of this.lookuplinks)if(this.model.data[e.name]&&this.model.data[e.name].beans)for(let t in this.model.data[e.name].beans){let s=this.model.data[e.name].beans[t];("Users"!=e.module||this.displayAssignedUser||t!=this.model.data.assigned_user_id)&&(this.pills.findIndex((e=>e.id==s.id))<0&&this.pills.push({module:e.module,id:s.id,summary_text:s.summary_text,link:e.name}))}}addItem(e){this.model.data[this.lookuplinks[this.lookupType].name]||(this.model.data[this.lookuplinks[this.lookupType].name]={beans:{}}),this.model.data[this.lookuplinks[this.lookupType].name].beans[e.id]={id:e.id,summary_text:e.text},this.lookupSearchOpen=!1,this.setPills()}handleMessage(e){if(e.messagedata.reference&&"model.save"===e.messagetype)this.fieldid===e.messagedata.reference&&(this.lookupSearchTerm="",this.addItem({id:e.messagedata.data.id,text:e.messagedata.data.summary_text}))}onClick(e){this.elementRef.nativeElement.contains(e.target)||this.closePopups()}closePopups(){this.lookupSearchOpen=!1,this.lookuplinkSelectOpen=!1,this.clickListener()}toggleLookupTypeSelect(){this.lookuplinkSelectOpen=!this.lookuplinkSelectOpen,this.lookupSearchOpen=!1}setLookupType(e){this.lookupSearchTerm="",this.lookupType=e,this.lookuplinkSelectOpen=!1}removeItem(e){this.model.data[e.link].beans_relations_to_delete||(this.model.data[e.link].beans_relations_to_delete={}),this.model.data[e.link].beans_relations_to_delete[e.id]=e,delete this.model.data[e.link].beans[e.id];let t=this.pills.findIndex((t=>t.id==e.id));this.pills.splice(t,1)}onFocus(){this.openSearchDropDown()}openSearchDropDown(){this.lookuplinkSelectOpen=!1,this.lookupSearchOpen=!0,this.clickListener=this.renderer.listen("document","click",(e=>this.onClick(e)))}searchWithModal(){this.modal.openModal("ObjectModalModuleLookup").subscribe((e=>{e.instance.module=this.lookuplinks[this.lookupType].module,e.instance.multiselect=!1,e.instance.selectedItems.subscribe((e=>{this.addItem({id:e[0].id,text:e[0].summary_text,data:e[0]})})),e.instance.usedSearchTerm.subscribe((e=>{this.lookupSearchTerm=e})),e.instance.searchTerm=this.lookupSearchTerm}))}pillid(e){return e.id}}return e=fieldLookup,(0,i.Z)(fieldLookup,"ɵfac",(function(t){return new(t||e)(c.Y36(w.o),c.Y36(k.e),c.Y36(W.f),c.Y36(x.d),c.Y36(u.Pu),c.Y36(L.F0),c.Y36(c.SBq),c.Y36(c.Qsj),c.Y36(I.o))})),(0,i.Z)(fieldLookup,"ɵcmp",c.Xpm({type:e,selectors:[["field-lookup"]],features:[c.qOj],decls:3,vars:3,consts:[[3,"fieldname","fieldconfig",4,"ngIf"],[3,"fielddisplayclass","editable","fieldconfig","fieldid",4,"ngIf"],["class","slds-form-element__control",3,"ngClass",4,"ngIf"],[3,"fieldname","fieldconfig"],[3,"fielddisplayclass","editable","fieldconfig","fieldid"],["class","slds-pill slds-m-right--xx-small slds-p-around--xx-small",4,"ngFor","ngForOf"],[1,"slds-pill","slds-m-right--xx-small","slds-p-around--xx-small"],[1,"slds-icon_container","slds-icon-standard-account","slds-pill__icon_container"],[3,"module","size"],[1,"slds-pill__label"],[1,"slds-form-element__control",3,"ngClass"],[1,"slds-combobox-group","slds-p-vertical--xx-small"],["class","slds-combobox_object-switcher slds-combobox-addon_start",4,"ngIf"],[1,"slds-combobox_container","slds-combobox-addon_end"],["role","combobox",1,"slds-combobox","slds-dropdown-trigger","slds-dropdown-trigger_click",3,"ngClass"],["role","none",1,"slds-combobox__form-element","slds-input-has-icon","slds-input-has-icon_right"],["type","text","aria-autocomplete","list","autoComplete","off","role","textbox",1,"slds-input",3,"ngClass","ngModel","placeholder","focus","ngModelChange"],[1,"slds-button","slds-button_icon","slds-input__icon","slds-input__icon_right",3,"click"],[3,"icon"],["role","listbox",1,"slds-dropdown","slds-dropdown_length-with-icon-7","slds-dropdown_fluid"],[3,"module","selectedObject",4,"ngIf"],[3,"module","searchterm","selectedObject","searchWithModal",4,"ngIf"],["class","slds-listbox slds-listbox_horizontal","role","group",4,"ngIf"],[3,"fieldname"],[1,"slds-combobox_object-switcher","slds-combobox-addon_start"],[1,"slds-form-element"],[1,"slds-form-element__control"],[1,"slds-combobox_container"],[1,"slds-combobox__form-element","slds-input-has-icon","slds-input-has-icon--right",3,"click"],["type","text","readonly","","autoComplete","off","role","textbox",1,"slds-input","slds-combobox__input","slds-combobox__input-value",3,"value"],["icon","down","sprite","utility","addclasses","slds-input__icon slds-input__icon_right"],["role","listbox",1,"slds-dropdown","slds-dropdown_length-5","slds-dropdown_x-small","slds-dropdown_left"],["role","group","aria-label","Suggested for you",1,"slds-listbox","slds-listbox_vertical"],["role","presentation","class","slds-listbox__item",3,"click",4,"ngFor","ngForOf"],["role","presentation",1,"slds-listbox__item",3,"click"],["role","option",1,"slds-media","slds-listbox__option","slds-listbox__option_plain","slds-media_small"],[1,"slds-grid","slds-grid--vertical-align-center"],["size","x-small",3,"module"],[1,"slds-truncate"],[3,"module"],[3,"module","selectedObject"],[3,"module","searchterm","selectedObject","searchWithModal"],["role","group",1,"slds-listbox","slds-listbox_horizontal"],["role","presentation","class","slds-listbox__item slds-p-top_xxx-small",4,"ngFor","ngForOf","ngForTrackBy"],["role","presentation",1,"slds-listbox__item","slds-p-top_xxx-small"],[1,"slds-pill"],[1,"slds-button","slds-button--icon","slds-pill__remove",3,"click"]],template:function(e,t){1&e&&(c.YNc(0,ki,1,2,"field-label",0),c.YNc(1,Ii,2,5,"field-generic-display",1),c.YNc(2,Yi,14,15,"div",2)),2&e&&(c.Q6J("ngIf",t.displayLabel),c.xp6(1),c.Q6J("ngIf",!t.isEditMode()),c.xp6(1),c.Q6J("ngIf",t.isEditable()&&t.isEditMode()))},dependencies:[n.mk,n.sg,n.O5,o.Fj,o.JJ,o.On,T.J,hs.f,ms.M,h.q,A.D,ps.P,fs.$,J.a],encapsulation:2})),fieldLookup})();var Qi=s(6538),Ui=s(6822);function Ri(e,t){if(1&e&&c._UZ(0,"field-label",3),2&e){const e=c.oxw();c.Q6J("fieldname",e.fieldname)("fieldconfig",e.fieldconfig)}}const ji=function(e){return{"slds-text-color_error":e}};function Bi(e,t){if(1&e&&(c.TgZ(0,"div",6)(1,"span",7),c._UZ(2,"system-display-datetime",8),c.qZA()()),2&e){const e=c.oxw(2);c.xp6(1),c.Q6J("ngClass",c.VKq(3,ji,e.highlightdate)),c.xp6(1),c.Q6J("date",e.value)("displayTime",!1)}}function Gi(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"div",6)(1,"a",9),c.NdJ("click",(function(){c.CHM(e);const t=c.oxw(2);return c.KtG(t.goRecord())})),c.TgZ(2,"span",7),c._UZ(3,"system-display-datetime",8),c.qZA()()()}if(2&e){const e=c.oxw(2);c.xp6(2),c.Q6J("ngClass",c.VKq(3,ji,e.highlightdate)),c.xp6(1),c.Q6J("date",e.value)("displayTime",!1)}}function Pi(e,t){if(1&e&&(c.TgZ(0,"field-generic-display",4),c.YNc(1,Bi,3,5,"div",5),c.YNc(2,Gi,4,5,"div",5),c.qZA()),2&e){const e=c.oxw();c.Q6J("fielddisplayclass",e.fielddisplayclass)("editable",e.isEditable())("fieldconfig",e.fieldconfig),c.xp6(1),c.Q6J("ngIf",!e.displayLink()),c.xp6(1),c.Q6J("ngIf",e.displayLink())}}function Hi(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"div",10)(1,"system-input-date",11),c.NdJ("ngModelChange",(function(t){c.CHM(e);const s=c.oxw();return c.KtG(s.value=t)}))("valid",(function(t){c.CHM(e);const s=c.oxw();return c.KtG(s.setValid(t))})),c.qZA(),c._UZ(2,"field-messages",12),c.qZA()}if(2&e){const e=c.oxw();c.Q6J("ngClass",e.css_classes),c.xp6(1),c.Q6J("ngModel",e.value),c.xp6(1),c.Q6J("fieldname",e.fieldname)}}let zi=(()=>{var e;class fieldDate extends r.O{constructor(e,t,s,n,o){super(e,t,s,n,o),(0,i.Z)(this,"model",void 0),(0,i.Z)(this,"view",void 0),(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"router",void 0),this.model=e,this.view=t,this.language=s,this.metadata=n,this.router=o}setValid(e){e?this.clearFieldError():this.setFieldError(this.language.getLabel("LBL_INPUT_INVALID"))}get highlightdate(){return!!(this.fieldconfig.highlightpast&&this.value&&new moment>new moment(this.model.getField(this.fieldname)))}}return e=fieldDate,(0,i.Z)(fieldDate,"ɵfac",(function(t){return new(t||e)(c.Y36(w.o),c.Y36(k.e),c.Y36(x.d),c.Y36(u.Pu),c.Y36(L.F0))})),(0,i.Z)(fieldDate,"ɵcmp",c.Xpm({type:e,selectors:[["field-date"]],features:[c.qOj],decls:3,vars:3,consts:[[3,"fieldname","fieldconfig",4,"ngIf"],[3,"fielddisplayclass","editable","fieldconfig",4,"ngIf"],["class","slds-form-element__control slds-p-around--xx-small",3,"ngClass",4,"ngIf"],[3,"fieldname","fieldconfig"],[3,"fielddisplayclass","editable","fieldconfig"],["class","slds-truncate",4,"ngIf"],[1,"slds-truncate"],[3,"ngClass"],[3,"date","displayTime"],["href","javascript:void(0);",3,"click"],[1,"slds-form-element__control","slds-p-around--xx-small",3,"ngClass"],["system-input-date-hide-error","",3,"ngModel","ngModelChange","valid"],[3,"fieldname"]],template:function(e,t){1&e&&(c.YNc(0,Ri,1,2,"field-label",0),c.YNc(1,Pi,3,5,"field-generic-display",1),c.YNc(2,Hi,3,3,"div",2)),2&e&&(c.Q6J("ngIf",t.displayLabel),c.xp6(1),c.Q6J("ngIf",!t.isEditMode()),c.xp6(1),c.Q6J("ngIf",t.isEditable()&&t.isEditMode()))},dependencies:[n.mk,n.O5,o.JJ,o.On,Qi.a,Ui.z,h.q,A.D,J.a],encapsulation:2})),fieldDate})();var Vi=s(2006);function Ki(e,t){if(1&e&&c._UZ(0,"field-label",3),2&e){const e=c.oxw();c.Q6J("fieldname",e.fieldname)("fieldconfig",e.fieldconfig)}}function $i(e,t){if(1&e&&(c.TgZ(0,"div",6)(1,"span",7),c._uU(2),c.qZA()()),2&e){const e=c.oxw(2);c.xp6(2),c.Oqu(e.displayTime)}}function Xi(e,t){if(1&e&&(c.TgZ(0,"field-generic-display",4),c.YNc(1,$i,3,1,"div",5),c.qZA()),2&e){const e=c.oxw();c.Q6J("fielddisplayclass",e.fielddisplayclass)("editable",e.isEditable())("fieldconfig",e.fieldconfig),c.xp6(1),c.Q6J("ngIf",!e.displayLink())}}function Wi(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"div",8)(1,"system-input-time",9),c.NdJ("ngModelChange",(function(t){c.CHM(e);const s=c.oxw();return c.KtG(s.value=t)})),c.qZA(),c._UZ(2,"field-messages",10),c.qZA()}if(2&e){const e=c.oxw();c.Q6J("ngClass",e.getFieldClass()),c.xp6(1),c.Q6J("ngModel",e.value),c.xp6(1),c.s9C("fieldname",e.fieldname)}}let en=(()=>{var e;class fieldTime extends r.O{constructor(e,t,s,n,o,l){super(e,t,s,n,o),(0,i.Z)(this,"model",void 0),(0,i.Z)(this,"view",void 0),(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"router",void 0),(0,i.Z)(this,"userpreferences",void 0),this.model=e,this.view=t,this.language=s,this.metadata=n,this.router=o,this.userpreferences=l}get displayTime(){return this.value.format(this.userpreferences.getTimeFormat())}}return e=fieldTime,(0,i.Z)(fieldTime,"ɵfac",(function(t){return new(t||e)(c.Y36(w.o),c.Y36(k.e),c.Y36(x.d),c.Y36(u.Pu),c.Y36(L.F0),c.Y36(Ze.z))})),(0,i.Z)(fieldTime,"ɵcmp",c.Xpm({type:e,selectors:[["field-time"]],features:[c.qOj],decls:3,vars:3,consts:[[3,"fieldname","fieldconfig",4,"ngIf"],[3,"fielddisplayclass","editable","fieldconfig",4,"ngIf"],["class","slds-form-element__control slds-p-around--xx-small",3,"ngClass",4,"ngIf"],[3,"fieldname","fieldconfig"],[3,"fielddisplayclass","editable","fieldconfig"],["class","slds-truncate",4,"ngIf"],[1,"slds-truncate"],[1,"slds-p-left--x-small",2,"font-style","italic"],[1,"slds-form-element__control","slds-p-around--xx-small",3,"ngClass"],[3,"ngModel","ngModelChange"],[3,"fieldname"]],template:function(e,t){1&e&&(c.YNc(0,Ki,1,2,"field-label",0),c.YNc(1,Xi,2,4,"field-generic-display",1),c.YNc(2,Wi,3,3,"div",2)),2&e&&(c.Q6J("ngIf",t.displayLabel),c.xp6(1),c.Q6J("ngIf",!t.isEditMode()),c.xp6(1),c.Q6J("ngIf",t.isEditable()&&t.isEditMode()))},dependencies:[n.mk,n.O5,o.JJ,o.On,Vi.H,h.q,A.D,J.a],encapsulation:2})),fieldTime})();function tn(e,t){if(1&e&&c._UZ(0,"field-label",3),2&e){const e=c.oxw();c.Q6J("fieldname",e.fieldname)("fieldconfig",e.fieldconfig)}}function sn(e,t){if(1&e&&(c.TgZ(0,"span"),c._uU(1),c.qZA()),2&e){const e=c.oxw(2);c.xp6(1),c.Oqu(e.displaySpan)}}function nn(e,t){if(1&e&&(c.TgZ(0,"span"),c._uU(1),c.qZA()),2&e){const e=c.oxw(2);c.xp6(1),c.Oqu(e.displayDate)}}function on(e,t){if(1&e&&(c.TgZ(0,"span",7),c._uU(1),c.qZA()),2&e){const e=c.oxw(2);c.xp6(1),c.Oqu(e.displayTime)}}function ln(e,t){if(1&e&&(c.TgZ(0,"field-generic-display",4),c.YNc(1,sn,2,1,"span",5),c.YNc(2,nn,2,1,"span",5),c.YNc(3,on,2,1,"span",6),c.qZA()),2&e){const e=c.oxw();c.Q6J("fielddisplayclass",e.fielddisplayclass)("editable",e.isEditable())("fieldconfig",e.fieldconfig),c.xp6(1),c.Q6J("ngIf",e.fieldconfig.displayfromnow),c.xp6(1),c.Q6J("ngIf",!e.fieldconfig.displayfromnow),c.xp6(1),c.Q6J("ngIf",!e.fieldconfig.displayfromnow)}}function an(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"div",8)(1,"div",9)(2,"system-input-date",10),c.NdJ("ngModelChange",(function(t){c.CHM(e);const s=c.oxw();return c.KtG(s.value=t)}))("valid",(function(t){c.CHM(e);const s=c.oxw();return c.KtG(s.setValid(t))})),c.qZA(),c.TgZ(3,"system-input-time",11),c.NdJ("ngModelChange",(function(t){c.CHM(e);const s=c.oxw();return c.KtG(s.value=t)}))("valid",(function(t){c.CHM(e);const s=c.oxw();return c.KtG(s.setValid(t))})),c.qZA()(),c._UZ(4,"field-messages",12),c.qZA()}if(2&e){const e=c.oxw();c.Q6J("ngClass",e.css_classes),c.xp6(2),c.Q6J("ngModel",e.value),c.xp6(1),c.Q6J("ngModel",e.value),c.xp6(1),c.Q6J("fieldname",e.fieldname)}}let dn=(()=>{var e;class fieldDateTime extends r.O{constructor(e,t,s,n,o,l){super(e,t,s,n,o),(0,i.Z)(this,"model",void 0),(0,i.Z)(this,"view",void 0),(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"router",void 0),(0,i.Z)(this,"userpreferences",void 0),this.model=e,this.view=t,this.language=s,this.metadata=n,this.router=o,this.userpreferences=l}get displayValue(){try{if(this.model.getField(this.fieldname)){let e=this.model.getField(this.fieldname);return e.isValid()?this.fieldconfig.displayfromnow?e.fromNow():e.format(this.userpreferences.getDateFormat()+" "+this.userpreferences.getTimeFormat()):""}return""}catch(e){return""}}get displaySpan(){try{if(this.model.getField(this.fieldname)){let e=this.model.getField(this.fieldname);return e.isValid()?e.fromNow():""}return""}catch(e){return""}}get displayDate(){try{if(this.model.getField(this.fieldname)){let e=this.model.getField(this.fieldname);return e.isValid()?e.format(this.userpreferences.getDateFormat()):""}return""}catch(e){return""}}get displayTime(){try{if(this.model.getField(this.fieldname)){let e=this.model.getField(this.fieldname);return e.isValid()?e.format(this.userpreferences.getTimeFormat()):""}return""}catch(e){return""}}setValid(e){e?this.clearFieldError():this.setFieldError(this.language.getLabel("LBL_INPUT_INVALID"))}get highlightdate(){return(1==this.fieldconfig.highlightpast||!0===this.fieldconfig.highlightpast)&&new moment>new moment(this.model.getField(this.fieldname))}}return e=fieldDateTime,(0,i.Z)(fieldDateTime,"ɵfac",(function(t){return new(t||e)(c.Y36(w.o),c.Y36(k.e),c.Y36(x.d),c.Y36(u.Pu),c.Y36(L.F0),c.Y36(Ze.z))})),(0,i.Z)(fieldDateTime,"ɵcmp",c.Xpm({type:e,selectors:[["field-date-time"]],features:[c.qOj],decls:3,vars:3,consts:[[3,"fieldname","fieldconfig",4,"ngIf"],[3,"fielddisplayclass","editable","fieldconfig",4,"ngIf"],["class","slds-form-element__control slds-p-around--xx-small",3,"ngClass",4,"ngIf"],[3,"fieldname","fieldconfig"],[3,"fielddisplayclass","editable","fieldconfig"],[4,"ngIf"],["class","slds-p-left--x-small","style","font-style: italic",4,"ngIf"],[1,"slds-p-left--x-small",2,"font-style","italic"],[1,"slds-form-element__control","slds-p-around--xx-small",3,"ngClass"],[1,"slds-grid"],["system-input-date-hide-error","",1,"slds-size--1-of-2","slds-p-right--xxx-small",3,"ngModel","ngModelChange","valid"],["system-input-time-hide-error","",1,"slds-size--1-of-2","slds-p-left--xxx-small",3,"ngModel","ngModelChange","valid"],[3,"fieldname"]],template:function(e,t){1&e&&(c.YNc(0,tn,1,2,"field-label",0),c.YNc(1,ln,4,6,"field-generic-display",1),c.YNc(2,an,5,4,"div",2)),2&e&&(c.Q6J("ngIf",t.displayLabel),c.xp6(1),c.Q6J("ngIf",!t.isEditMode()),c.xp6(1),c.Q6J("ngIf",t.isEditable()&&t.isEditMode()))},dependencies:[n.mk,n.O5,o.JJ,o.On,Ui.z,Vi.H,h.q,A.D,J.a],encapsulation:2})),fieldDateTime})();function rn(e,t){if(1&e&&c._UZ(0,"field-label",3),2&e){const e=c.oxw();c.Q6J("fieldname",e.fieldname)("fieldconfig",e.fieldconfig)}}function cn(e,t){if(1&e&&(c.TgZ(0,"span"),c._uU(1," - "),c._UZ(2,"system-display-datetime",7),c.qZA()),2&e){const e=c.oxw(2);c.xp6(2),c.Q6J("date",e.dateEnd)("displayDate",!1)}}function un(e,t){if(1&e&&(c.TgZ(0,"field-generic-display",4),c._UZ(1,"system-display-datetime",5),c.YNc(2,cn,3,2,"span",6),c.qZA()),2&e){const e=c.oxw();c.Q6J("fielddisplayclass",e.fielddisplayclass)("editable",e.isEditable())("fieldconfig",e.fieldconfig),c.xp6(1),c.Q6J("date",e.value),c.xp6(1),c.Q6J("ngIf",e.dateEnd)}}function hn(e,t){if(1&e&&(c.TgZ(0,"option"),c._uU(1),c.qZA()),2&e){const e=t.$implicit;c.xp6(1),c.Oqu(e)}}function mn(e,t){if(1&e&&(c.TgZ(0,"option"),c._uU(1),c.qZA()),2&e){const e=t.$implicit;c.xp6(1),c.Oqu(e)}}function gn(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"div",8)(1,"div",9)(2,"system-input-date",10),c.NdJ("ngModelChange",(function(t){c.CHM(e);const s=c.oxw();return c.KtG(s.value=t)})),c.qZA(),c.TgZ(3,"system-input-time",11),c.NdJ("ngModelChange",(function(t){c.CHM(e);const s=c.oxw();return c.KtG(s.value=t)})),c.qZA(),c.TgZ(4,"div",12)(5,"div",13)(6,"select",14),c.NdJ("ngModelChange",(function(t){c.CHM(e);const s=c.oxw();return c.KtG(s.editDurationHours=t)})),c.YNc(7,hn,2,1,"option",15),c.qZA()()(),c.TgZ(8,"div",12)(9,"div",13)(10,"select",14),c.NdJ("ngModelChange",(function(t){c.CHM(e);const s=c.oxw();return c.KtG(s.editDurationMinutes=t)})),c.YNc(11,mn,2,1,"option",15),c.qZA()()()(),c._UZ(12,"field-messages",16),c.qZA()}if(2&e){const e=c.oxw();c.Q6J("ngClass",e.css_classes),c.xp6(2),c.Q6J("ngModel",e.value),c.xp6(1),c.Q6J("ngModel",e.value),c.xp6(3),c.Q6J("ngModel",e.editDurationHours),c.xp6(1),c.Q6J("ngForOf",e.durationHours),c.xp6(3),c.Q6J("ngModel",e.editDurationMinutes),c.xp6(1),c.Q6J("ngForOf",e.durationMinutes),c.xp6(1),c.Q6J("fieldname",e.fieldname)}}let pn=(()=>{var e;class fieldDateTimeDuration extends r.O{constructor(e,t,s,n,o,l){super(e,t,s,n,o),(0,i.Z)(this,"model",void 0),(0,i.Z)(this,"view",void 0),(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"router",void 0),(0,i.Z)(this,"userpreferences",void 0),(0,i.Z)(this,"durationHours",["0","1","2","3","4","5","6","7","8","9","10","11","12"]),(0,i.Z)(this,"durationMinutes",["0","5","10","15","20","25","30","35","40","45","50","55"]),(0,i.Z)(this,"duration",void 0),this.model=e,this.view=t,this.language=s,this.metadata=n,this.router=o,this.userpreferences=l}ngOnInit(){super.ngOnInit(),this.subscriptions.add(this.model.data$.subscribe((e=>{if(this.value&&this.dateEnd){let e=0;e="string"==typeof this.dateEnd?moment(this.dateEnd).diff(this.value):this.dateEnd.diff(this.value),this.duration=moment.duration(e)}})))}get fieldend(){return this.fieldconfig.field_end?this.fieldconfig.field_end:"date_end"}get value(){return this.model.getField(this.fieldname)}set value(e){let t={};if(t[this.fieldname]=e,this.duration){let s=new moment(e).add(this.duration.asSeconds(),"s");t[this.fieldend]=s}this.model.setFields(t)}get dateEnd(){return this.model.getField(this.fieldend)}get currentHours(){return this.duration?this.duration.get("hours"):0}get currentMinutes(){return this.duration?this.duration.get("minutes"):0}get editDurationHours(){return this.currentHours}set editDurationHours(e){let t=this.currentMinutes,s=new moment(this.value);s.add(e,"h").add(t,"m"),this.model.setField(this.fieldend,s)}get editDurationMinutes(){return this.currentMinutes}set editDurationMinutes(e){let t=this.currentHours,s=new moment(this.value);s.add(t,"h").add(e,"m"),this.model.setField(this.fieldend,s)}}return e=fieldDateTimeDuration,(0,i.Z)(fieldDateTimeDuration,"ɵfac",(function(t){return new(t||e)(c.Y36(w.o),c.Y36(k.e),c.Y36(x.d),c.Y36(u.Pu),c.Y36(L.F0),c.Y36(Ze.z))})),(0,i.Z)(fieldDateTimeDuration,"ɵcmp",c.Xpm({type:e,selectors:[["field-date-time-duration"]],features:[c.qOj],decls:3,vars:3,consts:[[3,"fieldname","fieldconfig",4,"ngIf"],[3,"fielddisplayclass","editable","fieldconfig",4,"ngIf"],["class","slds-form-element__control slds-p-around--xx-small",3,"ngClass",4,"ngIf"],[3,"fieldname","fieldconfig"],[3,"fielddisplayclass","editable","fieldconfig"],[3,"date"],[4,"ngIf"],[3,"date","displayDate"],[1,"slds-form-element__control","slds-p-around--xx-small",3,"ngClass"],[1,"slds-grid"],[3,"ngModel","ngModelChange"],[1,"slds-p-left--x-small",3,"ngModel","ngModelChange"],[1,"slds-form-element__control","slds-p-left--x-small","slds-size--1-of-6"],[1,"slds-select_container"],[1,"slds-select",3,"ngModel","ngModelChange"],[4,"ngFor","ngForOf"],[3,"fieldname"]],template:function(e,t){1&e&&(c.YNc(0,rn,1,2,"field-label",0),c.YNc(1,un,3,5,"field-generic-display",1),c.YNc(2,gn,13,8,"div",2)),2&e&&(c.Q6J("ngIf",t.displayLabel),c.xp6(1),c.Q6J("ngIf",!t.isEditMode()),c.xp6(1),c.Q6J("ngIf",t.isEditable()&&t.isEditMode()))},dependencies:[n.mk,n.sg,n.O5,o.YN,o.Kr,o.EJ,o.JJ,o.On,Qi.a,Ui.z,Vi.H,h.q,A.D,J.a],encapsulation:2})),fieldDateTimeDuration})();function fn(e,t){if(1&e&&c._UZ(0,"field-label",3),2&e){const e=c.oxw();c.Q6J("fieldname",e.fieldname)("fieldconfig",e.fieldconfig)}}function bn(e,t){if(1&e&&(c.TgZ(0,"field-generic-display",4),c._uU(1),c.qZA()),2&e){const e=c.oxw();c.Q6J("fielddisplayclass",e.fielddisplayclass)("editable",e.isEditable())("fieldconfig",e.fieldconfig),c.xp6(1),c.hij(" ",e.getDisplay(),"\n")}}function vn(e,t){if(1&e&&(c.TgZ(0,"option"),c._uU(1),c.qZA()),2&e){const e=t.$implicit;c.xp6(1),c.Oqu(e)}}function Zn(e,t){if(1&e&&(c.TgZ(0,"option"),c._uU(1),c.qZA()),2&e){const e=t.$implicit;c.xp6(1),c.Oqu(e)}}function _n(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"div",8)(1,"div",9)(2,"div",10)(3,"select",11),c.NdJ("ngModelChange",(function(t){c.CHM(e);const s=c.oxw(2);return c.KtG(s.editDurationHours=t)})),c.YNc(4,vn,2,1,"option",12),c.qZA()()(),c.TgZ(5,"div",13)(6,"div",10)(7,"select",11),c.NdJ("ngModelChange",(function(t){c.CHM(e);const s=c.oxw(2);return c.KtG(s.editDurationMinutes=t)})),c.YNc(8,Zn,2,1,"option",12),c.qZA()()()()}if(2&e){const e=c.oxw(2);c.xp6(3),c.Q6J("ngModel",e.editDurationHours),c.xp6(1),c.Q6J("ngForOf",e.durationHours),c.xp6(3),c.Q6J("ngModel",e.editDurationMinutes),c.xp6(1),c.Q6J("ngForOf",e.durationMinutes)}}function yn(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"div",8)(1,"div",14)(2,"div",15)(3,"input",16),c.NdJ("ngModelChange",(function(t){c.CHM(e);const s=c.oxw(2);return c.KtG(s.editDurationHours=t)})),c.qZA(),c.TgZ(4,"span",17),c._uU(5,"h"),c.qZA()()(),c.TgZ(6,"div",18)(7,"div",15)(8,"input",19),c.NdJ("ngModelChange",(function(t){c.CHM(e);const s=c.oxw(2);return c.KtG(s.editDurationMinutes=t)})),c.qZA(),c.TgZ(9,"span",20),c._uU(10,"min"),c.qZA()()()()}if(2&e){const e=c.oxw(2);c.xp6(3),c.Q6J("ngModel",e.editDurationHours)("ngModelOptions",e.modelOptions),c.xp6(5),c.Q6J("ngModel",e.editDurationMinutes)("ngModelOptions",e.modelOptions)}}function xn(e,t){if(1&e&&(c.TgZ(0,"div",5),c.YNc(1,_n,9,4,"div",6),c.YNc(2,yn,11,4,"div",6),c._UZ(3,"field-messages",7),c.qZA()),2&e){const e=c.oxw();c.Q6J("ngClass",e.css_classes),c.xp6(1),c.Q6J("ngIf",!e.fieldconfig.freeentry),c.xp6(1),c.Q6J("ngIf",e.fieldconfig.freeentry),c.xp6(1),c.s9C("fieldname",e.fieldname)}}let wn=(()=>{var e;class fieldDuration extends r.O{get fieldminutes(){return this.fieldconfig.field_minutes?this.fieldconfig.field_minutes:"duration_minutes"}get fieldhours(){return this.fieldconfig.field_hours?this.fieldconfig.field_hours:"duration_hours"}constructor(e,t,s,n,o){super(e,t,s,n,o),(0,i.Z)(this,"model",void 0),(0,i.Z)(this,"view",void 0),(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"router",void 0),(0,i.Z)(this,"isValid",!0),(0,i.Z)(this,"durationHours",["00","01","02","03","04","05","06","07","08","09","10","11","12"]),(0,i.Z)(this,"durationMinutes",["00","15","30","45"]),this.model=e,this.view=t,this.language=s,this.metadata=n,this.router=o}getDisplay(){if(this.model.getField(this.fieldminutes)||this.model.getField(this.fieldhours))return("00"+this.model.getField(this.fieldhours)).slice(-2)+":"+("00"+this.model.getField(this.fieldminutes)).slice(-2)}get editDurationHours(){return this.model.getField(this.fieldhours)}set editDurationHours(e){this.model.setField(this.fieldhours,e)}get editDurationMinutes(){return this.model.getField(this.fieldminutes)}set editDurationMinutes(e){this.model.setField(this.fieldminutes,e)}}return e=fieldDuration,(0,i.Z)(fieldDuration,"ɵfac",(function(t){return new(t||e)(c.Y36(w.o),c.Y36(k.e),c.Y36(x.d),c.Y36(u.Pu),c.Y36(L.F0))})),(0,i.Z)(fieldDuration,"ɵcmp",c.Xpm({type:e,selectors:[["field-duration"]],features:[c.qOj],decls:3,vars:3,consts:[[3,"fieldname","fieldconfig",4,"ngIf"],[3,"fielddisplayclass","editable","fieldconfig",4,"ngIf"],["class","slds-form-element__control slds-p-around--xx-small",3,"ngClass",4,"ngIf"],[3,"fieldname","fieldconfig"],[3,"fielddisplayclass","editable","fieldconfig"],[1,"slds-form-element__control","slds-p-around--xx-small",3,"ngClass"],["class","slds-grid",4,"ngIf"],[3,"fieldname"],[1,"slds-grid"],[1,"slds-form-element__control","slds-size--1-of-2"],[1,"slds-select_container"],[1,"slds-select",3,"ngModel","ngModelChange"],[4,"ngFor","ngForOf"],[1,"slds-form-element__control","slds-m-left--x-small","slds-size--1-of-2"],[1,"slds-form-element","slds-size--1-of-2"],[1,"slds-form-element__control","slds-input-has-fixed-addon"],["type","number","min","0","title","hours",1,"slds-input",2,"padding","0 0.25rem 0 0.25rem",3,"ngModel","ngModelOptions","ngModelChange"],["id","fixed-text-addon-post",1,"slds-form-element__addon"],[1,"slds-form-element","slds-m-left--x-small","slds-size--1-of-2"],["type","number","min","0","max","59","title","minutes",1,"slds-input",2,"padding","0 0.25rem 0 0.25rem",3,"ngModel","ngModelOptions","ngModelChange"],["id","fixed-text-addon-post2",1,"slds-form-element__addon"]],template:function(e,t){1&e&&(c.YNc(0,fn,1,2,"field-label",0),c.YNc(1,bn,2,4,"field-generic-display",1),c.YNc(2,xn,4,4,"div",2)),2&e&&(c.Q6J("ngIf",t.displayLabel),c.xp6(1),c.Q6J("ngIf",!t.isEditMode()),c.xp6(1),c.Q6J("ngIf",t.isEditable()&&t.isEditMode()))},dependencies:[n.mk,n.sg,n.O5,o.YN,o.Kr,o.Fj,o.wV,o.EJ,o.JJ,o.qQ,o.Fd,o.On,h.q,A.D,J.a],encapsulation:2})),fieldDuration})();function Tn(e,t){if(1&e&&c._UZ(0,"field-label",6),2&e){const e=c.oxw(2);c.Q6J("fieldname",e.fieldname)("fieldconfig",e.fieldconfig)}}function Cn(e,t){if(1&e&&(c.ynx(0),c.YNc(1,Tn,1,2,"field-label",2),c.TgZ(2,"field-generic-display",3),c._UZ(3,"system-display-datetime",4),c._uU(4," - "),c._UZ(5,"system-display-datetime",5),c.qZA(),c.BQk()),2&e){const e=c.oxw();c.xp6(1),c.Q6J("ngIf",e.displayLabel),c.xp6(1),c.Q6J("fielddisplayclass",e.fielddisplayclass)("editable",e.isEditable())("fieldconfig",e.fieldconfig),c.xp6(1),c.Q6J("date",e.startDate),c.xp6(2),c.Q6J("date",e.endDate)("displayDate",e.showToDate)}}function An(e,t){1&e&&(c.TgZ(0,"abbr",23),c._uU(1,"*"),c.qZA())}function kn(e,t){1&e&&(c.TgZ(0,"abbr",23),c._uU(1,"*"),c.qZA())}function Ln(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"div",11)(1,"div",12)(2,"div",13)(3,"label",14),c.YNc(4,An,2,0,"abbr",15),c._UZ(5,"system-label",16),c.qZA(),c.TgZ(6,"system-input-date",17),c.NdJ("ngModelChange",(function(t){c.CHM(e);const s=c.oxw(2);return c.KtG(s.startDate=t)}))("valid",(function(t){c.CHM(e);const s=c.oxw(2);return c.KtG(s.setDateValid("start",t))})),c.qZA()(),c.TgZ(7,"div",18)(8,"label",14),c._UZ(9,"system-label",19),c.qZA(),c.TgZ(10,"system-input-time",20),c.NdJ("ngModelChange",(function(t){c.CHM(e);const s=c.oxw(2);return c.KtG(s.startDate=t)}))("valid",(function(t){c.CHM(e);const s=c.oxw(2);return c.KtG(s.setDateValid("start",t))})),c.qZA()()(),c.TgZ(11,"div",12)(12,"div",13)(13,"label",14),c.YNc(14,kn,2,0,"abbr",15),c._UZ(15,"system-label",21),c.qZA(),c.TgZ(16,"system-input-date",17),c.NdJ("ngModelChange",(function(t){c.CHM(e);const s=c.oxw(2);return c.KtG(s.endDate=t)}))("valid",(function(t){c.CHM(e);const s=c.oxw(2);return c.KtG(s.setDateValid("end",t))})),c.qZA()(),c.TgZ(17,"div",18)(18,"label",14),c._UZ(19,"system-label",22),c.qZA(),c.TgZ(20,"system-input-time",20),c.NdJ("ngModelChange",(function(t){c.CHM(e);const s=c.oxw(2);return c.KtG(s.endDate=t)}))("valid",(function(t){c.CHM(e);const s=c.oxw(2);return c.KtG(s.setDateValid("end",t))})),c.qZA()()()()}if(2&e){const e=c.oxw(2);c.xp6(4),c.Q6J("ngIf",e.stati.editable&&e.stati.required),c.xp6(2),c.Q6J("ngModel",e.startDate),c.xp6(4),c.Q6J("ngModel",e.startDate),c.xp6(4),c.Q6J("ngIf",e.stati.editable&&e.stati.required),c.xp6(2),c.Q6J("ngModel",e.endDate),c.xp6(4),c.Q6J("ngModel",e.endDate)}}function In(e,t){1&e&&(c.TgZ(0,"abbr",23),c._uU(1,"*"),c.qZA())}function Mn(e,t){1&e&&(c.TgZ(0,"abbr",23),c._uU(1,"*"),c.qZA())}function Sn(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"div",24)(1,"div",25)(2,"div",13)(3,"label",14),c.YNc(4,In,2,0,"abbr",15),c._UZ(5,"system-label",16),c.qZA(),c.TgZ(6,"system-input-date",17),c.NdJ("ngModelChange",(function(t){c.CHM(e);const s=c.oxw(2);return c.KtG(s.startDate=t)}))("valid",(function(t){c.CHM(e);const s=c.oxw(2);return c.KtG(s.setDateValid("start",t))})),c.qZA()(),c.TgZ(7,"div",18)(8,"label",14),c._UZ(9,"system-label",19),c.qZA(),c.TgZ(10,"system-input-time",20),c.NdJ("ngModelChange",(function(t){c.CHM(e);const s=c.oxw(2);return c.KtG(s.startDate=t)}))("valid",(function(t){c.CHM(e);const s=c.oxw(2);return c.KtG(s.setDateValid("start",t))})),c.qZA()()(),c.TgZ(11,"div",25)(12,"div",13)(13,"label",14),c.YNc(14,Mn,2,0,"abbr",15),c._UZ(15,"system-label",21),c.qZA(),c.TgZ(16,"system-input-date",17),c.NdJ("ngModelChange",(function(t){c.CHM(e);const s=c.oxw(2);return c.KtG(s.endDate=t)}))("valid",(function(t){c.CHM(e);const s=c.oxw(2);return c.KtG(s.setDateValid("end",t))})),c.qZA()(),c.TgZ(17,"div",18)(18,"label",14),c._UZ(19,"system-label",22),c.qZA(),c.TgZ(20,"system-input-time",20),c.NdJ("ngModelChange",(function(t){c.CHM(e);const s=c.oxw(2);return c.KtG(s.endDate=t)}))("valid",(function(t){c.CHM(e);const s=c.oxw(2);return c.KtG(s.setDateValid("end",t))})),c.qZA()()()()}if(2&e){const e=c.oxw(2);c.xp6(4),c.Q6J("ngIf",e.stati.editable&&e.stati.required),c.xp6(2),c.Q6J("ngModel",e.startDate),c.xp6(4),c.Q6J("ngModel",e.startDate),c.xp6(4),c.Q6J("ngIf",e.stati.editable&&e.stati.required),c.xp6(2),c.Q6J("ngModel",e.endDate),c.xp6(4),c.Q6J("ngModel",e.endDate)}}function Jn(e,t){if(1&e&&(c.TgZ(0,"div",7),c.YNc(1,Ln,21,6,"div",8),c.YNc(2,Sn,21,6,"ng-template",null,9,c.W1O),c._UZ(4,"field-messages",10),c.qZA()),2&e){const e=c.MAs(3),t=c.oxw();c.Q6J("ngClass",t.css_classes),c.xp6(1),c.Q6J("ngIf",t.vertical)("ngIfElse",e),c.xp6(3),c.Q6J("fieldname",t.fieldname)}}let On=(()=>{var e;class fieldDateTimeSpan extends r.O{constructor(e,t,s,n,o){super(e,t,s,n,o),(0,i.Z)(this,"model",void 0),(0,i.Z)(this,"view",void 0),(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"router",void 0),(0,i.Z)(this,"isValid",!0),(0,i.Z)(this,"errorMessage",""),(0,i.Z)(this,"duration",void 0),(0,i.Z)(this,"startDateValid",!0),(0,i.Z)(this,"endDateValid",!0),this.model=e,this.view=t,this.language=s,this.metadata=n,this.router=o}ngOnInit(){super.ngOnInit(),this.subscriptions.add(this.model.data$.subscribe((e=>{if(this.startDate&&this.endDate){let e=0;e="string"==typeof this.endDate?moment(this.endDate).diff(this.startDate):this.endDate.diff(this.startDate),this.duration=moment.duration(e)}})))}get vertical(){return!0!==this.fieldconfig.horizontal}get showToDate(){return!this.startDate||!this.endDate||!this.startDate.isSame(this.endDate,"day")}get fieldstart(){return this.fieldconfig.date_start?this.fieldconfig.date_start:"date_start"}get fieldend(){return this.fieldconfig.date_end?this.fieldconfig.date_end:"date_end"}get startDate(){return this.model.getField(this.fieldstart)}set startDate(e){let t={};if(t[this.fieldstart]=e,this.duration){let s=new moment(e).add(this.duration.asSeconds(),"s");t[this.fieldend]=s}else this.model.getField(this.fieldend)||(t[this.fieldend]=new moment(e));this.model.setFields(t)}get endDate(){return this.model.getField(this.fieldend)}set endDate(e){this.model.getFieldValue(this.fieldstart)||(this.startDate=new moment(e)),e.isBefore(this.model.getFieldValue(this.fieldstart))?(this.isValid=!1,this.errorMessage="enddate cannot be before startdate",this.model.setFieldMessage("error","enddate cannot be before startdate",this.fieldname,"sequencecheck")):(this.model.resetFieldMessages(this.fieldname,"error","sequencecheck"),this.model.setField(this.fieldend,e),this.isValid=!0)}setDateValid(e,t){switch(e){case"start":this.startDateValid=t;break;case"end":this.endDateValid=t}this.endDateValid&&this.startDateValid?this.model.resetFieldMessages(this.fieldname,"error","validitycheck"):this.model.setFieldMessage("error",this.language.getLabel("LBL_INPUT_INVALID"),this.fieldname,"validitycheck")}get stati(){let e=this.model.getFieldStati(this.fieldname);return!e.editable||this.view.isEditable&&!this.fieldconfig.readonly||(e.editable=!1),this.fieldconfig.required&&(e.required=!0),e}}return e=fieldDateTimeSpan,(0,i.Z)(fieldDateTimeSpan,"ɵfac",(function(t){return new(t||e)(c.Y36(w.o),c.Y36(k.e),c.Y36(x.d),c.Y36(u.Pu),c.Y36(L.F0))})),(0,i.Z)(fieldDateTimeSpan,"ɵcmp",c.Xpm({type:e,selectors:[["field-date-time-span"]],features:[c.qOj],decls:2,vars:2,consts:[[4,"ngIf"],["class","slds-form-element__control slds-p-around--xx-small",3,"ngClass",4,"ngIf"],[3,"fieldname","fieldconfig",4,"ngIf"],[3,"fielddisplayclass","editable","fieldconfig"],[3,"date"],[3,"date","displayDate"],[3,"fieldname","fieldconfig"],[1,"slds-form-element__control","slds-p-around--xx-small",3,"ngClass"],["class","slds-grid slds-grid--vertical",4,"ngIf","ngIfElse"],["horizontal",""],[3,"fieldname"],[1,"slds-grid","slds-grid--vertical"],[1,"slds-grid","slds-gutters_xx-small"],[1,"slds-form-element","slds-col","slds-size--1-of-2"],[1,"slds-form-element__label"],["class","slds-required",4,"ngIf"],["label","LBL_DATE_START"],["system-input-date-hide-error","",3,"ngModel","ngModelChange","valid"],[1,"slds-form-element","slds-col","slds-size--1-of-2","slds-m-top--none"],["label","LBL_TIME_START"],["system-input-time-hide-error","",3,"ngModel","ngModelChange","valid"],["label","LBL_DATE_END"],["label","LBL_TIME_END"],[1,"slds-required"],[1,"slds-grid","slds-wrap","slds-gutters_xx-small"],[1,"slds-grid","slds-col","slds-gutters_xx-small","slds-size--1-of-1","slds-large-size--1-of-2"]],template:function(e,t){1&e&&(c.YNc(0,Cn,6,7,"ng-container",0),c.YNc(1,Jn,5,4,"div",1)),2&e&&(c.Q6J("ngIf",!t.isEditMode()),c.xp6(1),c.Q6J("ngIf",t.isEditable()&&t.isEditMode()))},dependencies:[n.mk,n.O5,o.JJ,o.On,Qi.a,Ui.z,Vi.H,se._,h.q,A.D,J.a],encapsulation:2})),fieldDateTimeSpan})();function Nn(e,t){if(1&e&&c._UZ(0,"field-label",5),2&e){const e=c.oxw(2);c.Q6J("fieldname",e.fieldname)("fieldconfig",e.fieldconfig)}}function Fn(e,t){if(1&e&&(c.ynx(0),c.YNc(1,Nn,1,2,"field-label",2),c.TgZ(2,"field-generic-display",3),c._UZ(3,"system-display-datetime",4),c._uU(4,"  - "),c._UZ(5,"system-display-datetime",4),c.qZA(),c.BQk()),2&e){const e=c.oxw();c.xp6(1),c.Q6J("ngIf",e.displayLabel),c.xp6(1),c.Q6J("fielddisplayclass",e.fielddisplayclass)("editable",e.isEditable())("fieldconfig",e.fieldconfig),c.xp6(1),c.Q6J("date",e.startDate)("displayTime",!1),c.xp6(2),c.Q6J("date",e.endDate)("displayTime",!1)}}function qn(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"div",6)(1,"div",7)(2,"div",8)(3,"div",9)(4,"label",10),c._UZ(5,"system-label",11),c.qZA(),c.TgZ(6,"system-input-date",12),c.NdJ("ngModelChange",(function(t){c.CHM(e);const s=c.oxw();return c.KtG(s.startDate=t)}))("valid",(function(t){c.CHM(e);const s=c.oxw();return c.KtG(s.setDateValid("start",t))})),c.qZA()()(),c.TgZ(7,"div",8)(8,"div",9)(9,"label",10),c._UZ(10,"system-label",13),c.qZA(),c.TgZ(11,"system-input-date",12),c.NdJ("ngModelChange",(function(t){c.CHM(e);const s=c.oxw();return c.KtG(s.endDate=t)}))("valid",(function(t){c.CHM(e);const s=c.oxw();return c.KtG(s.setDateValid("end",t))})),c.qZA()()()(),c._UZ(12,"field-messages",14),c.qZA()}if(2&e){const e=c.oxw();c.Q6J("ngClass",e.css_classes),c.xp6(6),c.Q6J("ngModel",e.startDate),c.xp6(5),c.Q6J("ngModel",e.endDate),c.xp6(1),c.Q6J("fieldname",e.fieldname)}}let En=(()=>{var e;class fieldDateSpan extends r.O{constructor(e,t,s,n,o){super(e,t,s,n,o),(0,i.Z)(this,"model",void 0),(0,i.Z)(this,"view",void 0),(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"router",void 0),(0,i.Z)(this,"isValid",!0),(0,i.Z)(this,"errorMessage",""),(0,i.Z)(this,"duration",void 0),(0,i.Z)(this,"startDateValid",!0),(0,i.Z)(this,"endDateValid",!0),this.model=e,this.view=t,this.language=s,this.metadata=n,this.router=o}ngOnInit(){super.ngOnInit(),this.subscriptions.add(this.model.data$.subscribe((e=>{this.startDate&&this.endDate&&(this.duration=moment.duration(this.endDate.diff(this.startDate)))})))}get fieldstart(){return this.fieldconfig.date_start?this.fieldconfig.date_start:"date_start"}get fieldend(){return this.fieldconfig.date_end?this.fieldconfig.date_end:"date_end"}get startDate(){return this.model.getField(this.fieldstart)}set startDate(e){let t={};if(t[this.fieldstart]=e,this.duration){let s=new moment(e).add(this.duration.asSeconds(),"s");t[this.fieldend]=s}this.model.setFields(t)}get endDate(){return this.model.getField(this.fieldend)}set endDate(e){this.model.getFieldValue(this.fieldstart)||(this.startDate=new moment(e)),e.isBefore(this.model.getFieldValue(this.fieldstart))?(this.isValid=!1,this.errorMessage="enddate cannot be before startdate",this.model.setFieldMessage("error","enddate cannot be before startdate",this.fieldname,"sequencecheck")):(this.model.resetFieldMessages(this.fieldname,"error","sequencecheck"),this.model.setField(this.fieldend,e),this.isValid=!0)}setDateValid(e,t){switch(e){case"start":this.startDateValid=t;break;case"end":this.endDateValid=t}this.endDateValid&&this.startDateValid?this.model.resetFieldMessages(this.fieldname,"error","validitycheck"):this.model.setFieldMessage("error",this.language.getLabel("LBL_INPUT_INVALID"),this.fieldname,"validitycheck")}}return e=fieldDateSpan,(0,i.Z)(fieldDateSpan,"ɵfac",(function(t){return new(t||e)(c.Y36(w.o),c.Y36(k.e),c.Y36(x.d),c.Y36(u.Pu),c.Y36(L.F0))})),(0,i.Z)(fieldDateSpan,"ɵcmp",c.Xpm({type:e,selectors:[["field-date-span"]],features:[c.qOj],decls:2,vars:2,consts:[[4,"ngIf"],["class","slds-form-element__control slds-p-around--xx-small",3,"ngClass",4,"ngIf"],[3,"fieldname","fieldconfig",4,"ngIf"],[3,"fielddisplayclass","editable","fieldconfig"],[3,"date","displayTime"],[3,"fieldname","fieldconfig"],[1,"slds-form-element__control","slds-p-around--xx-small",3,"ngClass"],[1,"slds-grid","slds-gutters_direct-xx-small"],[1,"slds-size--1-of-2","slds-col"],[1,"slds-form-element"],[1,"slds-form-element__label"],["label","LBL_DATE_START"],["system-input-date-hide-error","",3,"ngModel","ngModelChange","valid"],["label","LBL_DATE_END"],[3,"fieldname"]],template:function(e,t){1&e&&(c.YNc(0,Fn,6,8,"ng-container",0),c.YNc(1,qn,13,4,"div",1)),2&e&&(c.Q6J("ngIf",!t.isEditMode()),c.xp6(1),c.Q6J("ngIf",t.isEditable()&&t.isEditMode()))},dependencies:[n.mk,n.O5,o.JJ,o.On,Qi.a,Ui.z,se._,h.q,A.D,J.a],encapsulation:2})),fieldDateSpan})();var Yn=s(5659),Dn=s(9422),Qn=s(3805),Un=s(4021),Rn=s(151);function jn(e,t){if(1&e&&c._UZ(0,"field-label",3),2&e){const e=c.oxw();c.Q6J("fieldname",e.fieldname)("fieldconfig",e.fieldconfig)}}function Bn(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"system-checkbox",7),c.NdJ("ngModelChange",(function(t){c.CHM(e);const s=c.oxw(2);return c.KtG(s.isReferenced=t)})),c._UZ(1,"system-label",8),c.qZA()}if(2&e){const e=c.oxw(2);c.Q6J("ngModel",e.isReferenced)("disabled",!0)}}function Gn(e,t){if(1&e&&(c.TgZ(0,"div")(1,"field-generic-display",4)(2,"div",5)(3,"span"),c._uU(4),c.qZA(),c.YNc(5,Bn,2,2,"system-checkbox",6),c.qZA()()()),2&e){const e=c.oxw();c.xp6(1),c.Q6J("fielddisplayclass",e.fielddisplayclass)("fieldconfig",e.fieldconfig)("editable",e.isEditable())("fieldid",e.fieldid),c.xp6(3),c.Oqu(e.value),c.xp6(1),c.Q6J("ngIf",!!e.referenceMetadata&&!e.fieldconfig.referenceCheckboxDisplayNone)}}function Pn(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"div",30),c._UZ(1,"field-label",15),c.TgZ(2,"div",16)(3,"input",17,18),c.NdJ("ngModelChange",(function(t){c.CHM(e);const s=c.oxw(2);return c.KtG(s.street_number=t)})),c.qZA()(),c._UZ(5,"field-messages",19),c.qZA()}if(2&e){const e=c.oxw(2);c.xp6(1),c.Q6J("fieldname",e.fieldName("street_number")),c.xp6(2),c.Q6J("ngModel",e.street_number)("disabled",e.isReferenced)("ngModelOptions",e.modelOptions),c.xp6(2),c.Q6J("fieldname",e.fieldName("street_number"))}}function Hn(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"div",30),c._UZ(1,"field-label",15),c.TgZ(2,"div",16)(3,"input",17,18),c.NdJ("ngModelChange",(function(t){c.CHM(e);const s=c.oxw(2);return c.KtG(s.street_number_suffix=t)})),c.qZA()(),c._UZ(5,"field-messages",19),c.qZA()}if(2&e){const e=c.oxw(2);c.xp6(1),c.Q6J("fieldname",e.fieldName("street_number_suffix")),c.xp6(2),c.Q6J("ngModel",e.street_number_suffix)("disabled",e.isReferenced)("ngModelOptions",e.modelOptions),c.xp6(2),c.Q6J("fieldname",e.fieldName("street_number_suffix"))}}function zn(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"div",30)(1,"label",31),c._UZ(2,"system-label",32),c.qZA(),c.TgZ(3,"system-checkbox",33),c.NdJ("ngModelChange",(function(t){c.CHM(e);const s=c.oxw(2);return c.KtG(s.isReferenced=t)})),c.qZA()()}if(2&e){const e=c.oxw(2);c.xp6(3),c.Q6J("ngModel",e.isReferenced)("disabled",e.model.isNew&&!e.isReferenced)}}function Vn(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"div",34),c._UZ(1,"field-label",15),c.TgZ(2,"div",16)(3,"input",17),c.NdJ("ngModelChange",(function(t){c.CHM(e);const s=c.oxw(2);return c.KtG(s.attn=t)})),c.qZA()(),c._UZ(4,"field-messages",19),c.qZA()}if(2&e){const e=c.oxw(2);c.xp6(1),c.Q6J("fieldname",e.fieldName("attn")),c.xp6(2),c.Q6J("ngModel",e.attn)("disabled",e.isReferenced)("ngModelOptions",e.modelOptions),c.xp6(1),c.Q6J("fieldname",e.fieldName("attn"))}}function Kn(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"div",35),c._UZ(1,"field-label",15),c.TgZ(2,"div",16)(3,"input",17),c.NdJ("ngModelChange",(function(t){c.CHM(e);const s=c.oxw(2);return c.KtG(s.district=t)})),c.qZA()(),c._UZ(4,"field-messages",19),c.qZA()}if(2&e){const e=c.oxw(2);c.xp6(1),c.Q6J("fieldname",e.fieldName("district")),c.xp6(2),c.Q6J("ngModel",e.district)("disabled",e.isReferenced)("ngModelOptions",e.modelOptions),c.xp6(1),c.Q6J("fieldname",e.fieldName("district"))}}function $n(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"div",36),c._UZ(1,"field-label",15),c.TgZ(2,"system-input-state",37),c.NdJ("ngModelChange",(function(t){c.CHM(e);const s=c.oxw(2);return c.KtG(s.state=t)})),c.qZA(),c._UZ(3,"field-messages",19),c.qZA()}if(2&e){const e=c.oxw(2);c.xp6(1),c.Q6J("fieldname",e.fieldName("state")),c.xp6(1),c.Q6J("ngModel",e.state)("disabled",e.isReferenced)("country",e.country),c.xp6(1),c.Q6J("fieldname",e.fieldName("state"))}}function Xn(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"div",9)(1,"fieldset")(2,"div",10)(3,"div",11)(4,"system-googleplaces-autocomplete",12),c.NdJ("address",(function(t){c.CHM(e);const s=c.oxw();return c.KtG(s.addressSelected(t))})),c.qZA()(),c.TgZ(5,"div",13)(6,"div",14),c._UZ(7,"field-label",15),c.TgZ(8,"div",16)(9,"input",17,18),c.NdJ("ngModelChange",(function(t){c.CHM(e);const s=c.oxw();return c.KtG(s.street=t)})),c.qZA()(),c._UZ(11,"field-messages",19),c.qZA(),c.YNc(12,Pn,6,5,"div",20),c.YNc(13,Hn,6,5,"div",20),c.YNc(14,zn,4,2,"div",20),c.qZA(),c.YNc(15,Vn,5,5,"div",21),c.TgZ(16,"div",22)(17,"div",23),c._UZ(18,"field-label",15),c.TgZ(19,"div",16)(20,"input",17),c.NdJ("ngModelChange",(function(t){c.CHM(e);const s=c.oxw();return c.KtG(s.postalcode=t)})),c.qZA()(),c._UZ(21,"field-messages",19),c.qZA(),c.TgZ(22,"div",24),c._UZ(23,"field-label",15),c.TgZ(24,"div",16)(25,"input",17),c.NdJ("ngModelChange",(function(t){c.CHM(e);const s=c.oxw();return c.KtG(s.city=t)})),c.qZA()(),c._UZ(26,"field-messages",19),c.qZA(),c.YNc(27,Kn,5,5,"div",25),c.qZA(),c.TgZ(28,"div",22),c.YNc(29,$n,4,5,"div",26),c.TgZ(30,"div",24)(31,"label",27),c._UZ(32,"system-label",28),c.qZA(),c.TgZ(33,"system-input-country",29),c.NdJ("ngModelChange",(function(t){c.CHM(e);const s=c.oxw();return c.KtG(s.country=t)})),c.qZA(),c._UZ(34,"field-messages",19),c.qZA()()()()()}if(2&e){const e=c.oxw();c.Q6J("system-overlay-loading-spinner",e.isLoading)("ngClass",e.getFieldClass()),c.xp6(4),c.Q6J("disabled",e.isReferenced),c.xp6(3),c.Q6J("fieldname",e.fieldName("street")),c.xp6(2),c.Q6J("ngModel",e.street)("disabled",e.isReferenced)("ngModelOptions",e.modelOptions),c.xp6(2),c.Q6J("fieldname",e.fieldName("street")),c.xp6(1),c.Q6J("ngIf",!e.hidestreetnumber),c.xp6(1),c.Q6J("ngIf",!e.hidenumbersuffix),c.xp6(1),c.Q6J("ngIf",!!e.referenceMetadata),c.xp6(1),c.Q6J("ngIf",!e.hideattn),c.xp6(3),c.Q6J("fieldname",e.fieldName("postalcode")),c.xp6(2),c.Q6J("ngModel",e.postalcode)("disabled",e.isReferenced)("ngModelOptions",e.modelOptions),c.xp6(1),c.Q6J("fieldname",e.fieldName("postalcode")),c.xp6(2),c.Q6J("fieldname",e.fieldName("city")),c.xp6(2),c.Q6J("ngModel",e.city)("disabled",e.isReferenced)("ngModelOptions",e.modelOptions),c.xp6(1),c.Q6J("fieldname",e.fieldName("city")),c.xp6(1),c.Q6J("ngIf",!e.hidedistrict),c.xp6(2),c.Q6J("ngIf",!e.hidestate),c.xp6(4),c.Q6J("ngModel",e.country)("disabled",e.isReferenced),c.xp6(1),c.Q6J("fieldname",e.fieldName("country"))}}let Wn=(()=>{var e;class fieldAddress extends r.O{constructor(e,t,s,n,o,l,a,d,r,c){super(e,t,s,n,o),(0,i.Z)(this,"model",void 0),(0,i.Z)(this,"view",void 0),(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"router",void 0),(0,i.Z)(this,"configuration",void 0),(0,i.Z)(this,"backend",void 0),(0,i.Z)(this,"toast",void 0),(0,i.Z)(this,"modal",void 0),(0,i.Z)(this,"injector",void 0),(0,i.Z)(this,"referenceMetadata",void 0),(0,i.Z)(this,"strict",!1),(0,i.Z)(this,"isLoading",!1),(0,i.Z)(this,"config_address_format",{}),(0,i.Z)(this,"addressFormat","{street} {street_number}, {postalcode} {city}, {statename}, {countryname}"),(0,i.Z)(this,"_isReferenced",!1),this.model=e,this.view=t,this.language=s,this.metadata=n,this.router=o,this.configuration=l,this.backend=a,this.toast=d,this.modal=r,this.injector=c;let u=this.configuration.data.backendextensions.spiceui.config.format;"strict"==u&&(this.strict=!0),u.addressformat&&(this.addressFormat=u.addressformat),this.getAddressConfig()}ngOnInit(){super.ngOnInit(),this.handleReferenceAddress()}ngAfterViewInit(){super.ngAfterViewInit(),this.referenceMetadata&&(this._isReferenced=this.model.getField(this.addresskey+"address_reference_id"))}handleReferenceAddress(){const e=this.configuration.getData("spice_address_references");if(!Array.isArray(e))return;const t=e.find((e=>e.child_module==this.model.module&&e.child_address_key==this.fieldconfig.key));t&&(this.referenceMetadata=t,this.subscriptions.add(this.model.observeFieldChanges(t.child_address_key+"_address_reference_id").subscribe((e=>{this._isReferenced=!!e}))))}set isReferenced(e){e!=this._isReferenced&&(this._isReferenced=e,this.model.isNew||(e?this.handleReferenceActivation():this.model.setField(this.addresskey+"address_reference_id","")))}get isReferenced(){return this._isReferenced}handleReferenceActivation(){this.isLoading=!0;const e=`module/${this.model.module}/${this.model.id}/related/${this.referenceMetadata.child_link_name}`;this.backend.getRequest(e).subscribe({next:e=>{this.isLoading=!1,this.handleReferenceResponse(_.toArray(e))},error:()=>{this.isLoading=!1,this._isReferenced=!1,this.toast.sendToast("MSG_NO_RECORDS_FOUND","warning")}})}handleReferenceResponse(e){e.length>1?this.modal.openModal("ObjectSelectBeanListModal",!0,this.injector).subscribe((t=>{t.instance.listData=e,t.instance.selectedIds$.subscribe({next:t=>{t?this.model.copyReferencedAddress(this.referenceMetadata,e.find((e=>e.id==t[0]))):this._isReferenced=!1}})})):1==e.length?this.model.copyReferencedAddress(this.referenceMetadata,e[0]):(this._isReferenced=!1,this.toast.sendToast("MSG_NO_RECORDS_FOUND","warning"))}getAddressConfig(){this.config_address_format=JSON.parse(this.configuration.data?.backendextensions?.address_format?.config?.format??"{}")}get value(){return this.buildAddress()}get addresskey(){return this.fieldconfig.key?this.fieldconfig.key+"_":""}buildAddress(){let e=this.addressFormat;if(this.strict&&this.country){let t=this.configuration.getData("countries");if(t){let s=t.countries.find((e=>e.cc==this.country));s&&s.addressformat&&(e=s.addressformat)}}let t=e.match(/\{(.*?)\}/g);for(let s of t){let t=this[s.slice(1,-1)];e=e.replace(s,t||"")}return e.replace(new RegExp(/^([\s,]*)|(,[\s,]*,)|$([\s,]*)/gm),"").trim()}get countryname(){if(this.strict){let e=this.country;if(e){let t=this.configuration.getData("countries");if(t){let s=t.countries.find((t=>t.cc==e));s&&(e=this.language.getLabel(s.label))}}return e}return this.country}get statename(){if(this.strict){let e=this.country,t=this.state;if(t){let s=this.configuration.getData("countries");if(s){let i=s.states.find((s=>s.cc==e&&s.sc==t));i&&(t=this.language.getLabel(i.label))}}return t}return this.state}addressSelected(e){this.hidestreetnumber?this.street=e.street:(this.street=e.street_name,this.street_number=e.street_number),this.city=e.city,this.district=e.district,this.postalcode=e.postalcode,this.country=e.country,this.state=e.state,this.latitude=e.latitude,this.longitude=e.longitude}getAddressLabel(){return this.language.getLabel(this.fieldconfig.label)}fieldName(e){return this.addresskey+"address_"+e}get street(){return this.model.getField(this.addresskey+"address_street")}set street(e){this.model.setField(this.addresskey+"address_street",e)}get street_number(){return this.model.getField(this.addresskey+"address_street_number")}set street_number(e){this.model.setField(this.addresskey+"address_street_number",e)}get street_number_suffix(){return this.model.getField(this.addresskey+"address_street_number_suffix")}set street_number_suffix(e){this.model.setField(this.addresskey+"address_street_number_suffix",e)}get attn(){return this.model.getField(this.addresskey+"address_attn")}set attn(e){this.model.setField(this.addresskey+"address_attn",e)}get city(){return this.model.getField(this.addresskey+"address_city")}set city(e){this.model.setField(this.addresskey+"address_city",e)}set district(e){this.model.setField(this.addresskey+"address_district",e)}get district(){return this.model.getField(this.addresskey+"address_district")}get postalcode(){return this.model.getField(this.addresskey+"address_postalcode")}set postalcode(e){this.model.setField(this.addresskey+"address_postalcode",e)}get state(){return this.model.getField(this.addresskey+"address_state")}set state(e){this.model.setField(this.addresskey+"address_state",e)}get country(){return this.model.getField(this.addresskey+"address_country")}set country(e){this.model.setField(this.addresskey+"address_country",e)}get latitude(){return this.model.getField(this.addresskey+"address_latitude")}set latitude(e){this.model.setField(this.addresskey+"address_latitude",e)}get longitude(){return this.model.getField(this.addresskey+"address_longitude")}set longitude(e){this.model.setField(this.addresskey+"address_longitude",e)}get hideattn(){return!!this.fieldconfig.hideattn||!!this.config_address_format?.hideattn}get hidestate(){return!!this.fieldconfig.hidestate||!!this.config_address_format?.hidestate}get hidestreetnumber(){return!!this.fieldconfig.hidestreetnumber||!!this.config_address_format?.hidestreetnumber}get hidedistrict(){return!!this.fieldconfig.hidedistrict||!!this.config_address_format?.hidedistrict}get hidenumbersuffix(){return!!this.fieldconfig.hidenumbersuffix||!!this.config_address_format?.hidenumbersuffix}}return e=fieldAddress,(0,i.Z)(fieldAddress,"ɵfac",(function(t){return new(t||e)(c.Y36(w.o),c.Y36(k.e),c.Y36(x.d),c.Y36(u.Pu),c.Y36(L.F0),c.Y36(ee.C),c.Y36($.y),c.Y36(X.A),c.Y36(I.o),c.Y36(c.zs3))})),(0,i.Z)(fieldAddress,"ɵcmp",c.Xpm({type:e,selectors:[["field-address"]],features:[c.qOj],decls:3,vars:3,consts:[[3,"fieldname","fieldconfig",4,"ngIf"],[4,"ngIf"],["class","slds-form-element__control",3,"system-overlay-loading-spinner","ngClass",4,"ngIf"],[3,"fieldname","fieldconfig"],[3,"fielddisplayclass","fieldconfig","editable","fieldid"],[1,"slds-grid","slds-grid--align-spread"],["class","slds-m-left--xx-small",3,"ngModel","disabled","ngModelChange",4,"ngIf"],[1,"slds-m-left--xx-small",3,"ngModel","disabled","ngModelChange"],["system-title","LBL_REFERENCE","label","LBL_REFERENCE"],[1,"slds-form-element__control",3,"system-overlay-loading-spinner","ngClass"],[1,"slds-form-element__group"],[1,"slds-grid","slds-grid--vertical-align-center"],[1,"slds-grow",3,"disabled","address"],[1,"slds-grid","slds-gutters_direct-xx-small"],[1,"slds-form-element","slds-col"],["labellength","short",3,"fieldname"],[1,"slds-form-element__control"],["type","text",1,"slds-input",3,"ngModel","disabled","ngModelOptions","ngModelChange"],["focus",""],[3,"fieldname"],["class","slds-form-element slds-col slds-size--1-of-6 ",4,"ngIf"],["class","slds-form-element slds-col slds-size--1-of-1",4,"ngIf"],[1,"slds-grid"],[1,"slds-form-element","slds-size--1-of-5","slds-col","slds-p-right--xx-small"],[1,"slds-form-element","slds-p-left--xx-small","slds-col"],["class","slds-form-element slds-col slds-size--2-of-5 slds-p-left--xx-small",4,"ngIf"],["class","slds-form-element slds-col slds-size--1-of-2 slds-p-right--xx-small",4,"ngIf"],[1,"slds-form-element__label"],["label","LBL_COUNTRY"],[3,"ngModel","disabled","ngModelChange"],[1,"slds-form-element","slds-col","slds-size--1-of-6"],["system-title","LBL_REFERENCE",1,"slds-truncate","slds-form-element__label"],["label","LBL_REFERENCE"],["hidelabel","",1,"slds-m-left--xx-small","spice-display-block",3,"ngModel","disabled","ngModelChange"],[1,"slds-form-element","slds-col","slds-size--1-of-1"],[1,"slds-form-element","slds-col","slds-size--2-of-5","slds-p-left--xx-small"],[1,"slds-form-element","slds-col","slds-size--1-of-2","slds-p-right--xx-small"],[3,"ngModel","disabled","country","ngModelChange"]],template:function(e,t){1&e&&(c.YNc(0,jn,1,2,"field-label",0),c.YNc(1,Gn,6,6,"div",1),c.YNc(2,Xn,35,27,"div",2)),2&e&&(c.Q6J("ngIf",t.displayLabel),c.xp6(1),c.Q6J("ngIf",!t.isEditMode()),c.xp6(1),c.Q6J("ngIf",t.isEditable()&&t.isEditMode()))},dependencies:[n.mk,n.O5,o.Fj,o.JJ,o.On,pt.U,Yn.t,Dn.y,Qn.H,se._,Un._,Rn.S,h.q,A.D,J.a],encapsulation:2})),fieldAddress})();function eo(e,t){if(1&e&&c._UZ(0,"field-label",3),2&e){const e=c.oxw(2);c.Q6J("fieldname",e.fieldname)("fieldconfig",e.fieldconfig)}}function to(e,t){if(1&e&&(c.ynx(0),c.YNc(1,eo,1,2,"field-label",1),c.TgZ(2,"field-generic-display",2),c._uU(3),c.qZA(),c.BQk()),2&e){const e=c.oxw();c.xp6(1),c.Q6J("ngIf",e.displayLabel),c.xp6(1),c.Q6J("fielddisplayclass",e.fielddisplayclass)("editable",e.isEditable())("fieldconfig",e.fieldconfig)("title",e.value)("fieldid",e.fieldid),c.xp6(1),c.hij(" ",e.value," ")}}function so(e,t){if(1&e&&c._UZ(0,"field-label",10),2&e){const e=c.oxw(2);c.Q6J("fieldname",e.fieldsalutation)}}function io(e,t){if(1&e&&(c.TgZ(0,"option",15),c._uU(1),c.qZA()),2&e){const e=t.$implicit;c.Q6J("ngValue",e.value),c.xp6(1),c.Oqu(e.display)}}function no(e,t){if(1&e&&c._UZ(0,"field-label",10),2&e){const e=c.oxw(3);c.Q6J("fieldname",e.fielddegree)}}function oo(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"div",13),c.YNc(1,no,1,1,"field-label",6),c.TgZ(2,"input",16),c.NdJ("ngModelChange",(function(t){c.CHM(e);const s=c.oxw(2);return c.KtG(s.degree1=t)})),c.qZA(),c._UZ(3,"field-messages",10),c.qZA()}if(2&e){const e=c.oxw(2);c.Q6J("ngClass",e.getClassesForSubField(e.fielddegree)),c.xp6(1),c.Q6J("ngIf",e.displayLabel),c.xp6(1),c.Q6J("ngModel",e.degree1),c.xp6(1),c.Q6J("fieldname",e.fielddegree)}}function lo(e,t){if(1&e&&c._UZ(0,"field-label",10),2&e){const e=c.oxw(2);c.Q6J("fieldname",e.fieldfirstname)}}function ao(e,t){if(1&e&&c._UZ(0,"field-label",10),2&e){const e=c.oxw(2);c.Q6J("fieldname",e.fieldlastname)}}function ro(e,t){if(1&e&&c._UZ(0,"field-label",10),2&e){const e=c.oxw(3);c.Q6J("fieldname",e.fieldlasttitle)}}function co(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"div",13),c.YNc(1,ro,1,1,"field-label",6),c.TgZ(2,"input",16),c.NdJ("ngModelChange",(function(t){c.CHM(e);const s=c.oxw(2);return c.KtG(s.degree2=t)})),c.qZA(),c._UZ(3,"field-messages",10),c.qZA()}if(2&e){const e=c.oxw(2);c.Q6J("ngClass",e.getClassesForSubField(e.fieldlasttitle)),c.xp6(1),c.Q6J("ngIf",e.displayLabel),c.xp6(1),c.Q6J("ngModel",e.degree2),c.xp6(1),c.Q6J("fieldname",e.fieldlasttitle)}}const uo=function(){return{updateOn:"blur"}};function ho(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"div")(1,"div",4)(2,"div",5),c.YNc(3,so,1,1,"field-label",6),c.TgZ(4,"div",7)(5,"select",8),c.NdJ("ngModelChange",(function(t){c.CHM(e);const s=c.oxw();return c.KtG(s.salutation=t)})),c.YNc(6,io,2,2,"option",9),c.qZA()(),c._UZ(7,"field-messages",10),c.qZA(),c.YNc(8,oo,4,4,"div",11),c.TgZ(9,"div",5),c.YNc(10,lo,1,1,"field-label",6),c.TgZ(11,"input",12),c.NdJ("ngModelChange",(function(t){c.CHM(e);const s=c.oxw();return c.KtG(s.first_name=t)})),c.qZA(),c._UZ(12,"field-messages",10),c.qZA(),c.TgZ(13,"div",13),c.YNc(14,ao,1,1,"field-label",6),c.TgZ(15,"input",12,14),c.NdJ("ngModelChange",(function(t){c.CHM(e);const s=c.oxw();return c.KtG(s.last_name=t)})),c.qZA(),c._UZ(17,"field-messages",10),c.qZA(),c.YNc(18,co,4,4,"div",11),c.qZA()()}if(2&e){const e=c.oxw();c.xp6(2),c.Q6J("ngClass",e.getClassesForSubField(e.fieldsalutation)),c.xp6(1),c.Q6J("ngIf",e.displayLabel),c.xp6(2),c.Q6J("ngModel",e.salutation),c.xp6(1),c.Q6J("ngForOf",e.getSalutations()),c.xp6(1),c.Q6J("fieldname",e.fieldsalutation),c.xp6(1),c.Q6J("ngIf",!e.isSimple),c.xp6(1),c.Q6J("ngClass",e.getClassesForSubField(e.fieldfirstname)),c.xp6(1),c.Q6J("ngIf",e.displayLabel),c.xp6(1),c.Q6J("ngModel",e.first_name)("ngModelOptions",c.DdM(17,uo)),c.xp6(1),c.Q6J("fieldname",e.fieldfirstname),c.xp6(1),c.Q6J("ngClass",e.getClassesForSubField(e.fieldlastname)),c.xp6(1),c.Q6J("ngIf",e.displayLabel),c.xp6(1),c.Q6J("ngModel",e.last_name)("ngModelOptions",c.DdM(18,uo)),c.xp6(2),c.Q6J("fieldname",e.fieldlastname),c.xp6(1),c.Q6J("ngIf",!e.isSimple)}}let mo=(()=>{var e;class fieldFullName extends r.O{get fieldsalutation(){return this.fieldconfig.field_salutation?this.fieldconfig.field_salutation:"salutation"}get fielddegree(){return this.fieldconfig.field_degree?this.fieldconfig.field_degree:"degree1"}get fieldfirstname(){return this.fieldconfig.field_firstname?this.fieldconfig.field_firstname:"first_name"}get fieldlastname(){return this.fieldconfig.field_lastname?this.fieldconfig.field_lastname:"last_name"}get fieldlasttitle(){return this.fieldconfig.field_lasttitle?this.fieldconfig.field_lasttitle:"degree2"}get salutationdisplay(){return this.language.getFieldDisplayOptionValue(this.model.module,this.fieldsalutation,this.model.getField(this.fieldsalutation))}get value(){return this.filterUndefined(this.getNameFormat())}get salutation(){return this.model.getField(this.fieldsalutation)}set salutation(e){this.model.setField(this.fieldsalutation,e)}get degree1(){return this.model.getField(this.fielddegree)}set degree1(e){this.model.setField(this.fielddegree,e)}get first_name(){return this.model.getField(this.fieldfirstname)}set first_name(e){this.model.setField(this.fieldfirstname,e)}get last_name(){return this.model.getField(this.fieldlastname)}set last_name(e){this.model.setField(this.fieldlastname,e)}get degree2(){return this.model.getField(this.fieldlasttitle)}set degree2(e){this.model.setField(this.fieldlasttitle,e)}filterUndefined(e){return e||""}constructor(e,t,s,n,o,l){super(e,t,s,n,o),(0,i.Z)(this,"model",void 0),(0,i.Z)(this,"view",void 0),(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"router",void 0),(0,i.Z)(this,"userpreferences",void 0),(0,i.Z)(this,"isValid",!0),(0,i.Z)(this,"errorMessage",""),this.model=e,this.view=t,this.language=s,this.metadata=n,this.router=o,this.userpreferences=l}getNameFormat(){const e=this.userpreferences.toUse.locale_name_format,t=this.model.getField(this.fieldsalutation),s=this.model.getField(this.fieldfirstname),i=this.model.getField(this.fieldlastname),n=this.model.getField(this.fielddegree),o=this.model.getField(this.fieldlasttitle);return"s f l"===this.userpreferences.toUse.locale_name_format?this.language.getFieldDisplayOptionValue(this.model.module,this.fieldsalutation,t+" "+this.filterUndefined(s)+" "+this.filterUndefined(i)):"f l"===e?this.language.getFieldDisplayOptionValue(this.model.module,this.fieldfirstname,s+" "+this.filterUndefined(i)):"s l"===e?this.language.getFieldDisplayOptionValue(this.model.module,this.fieldsalutation,t+" "+this.filterUndefined(i)):"l, s f"===e?this.language.getFieldDisplayOptionValue(this.model.module,this.fieldlastname,i+", "+this.filterUndefined(t)+" "+this.filterUndefined(s)):"l, f"===e?this.language.getFieldDisplayOptionValue(this.model.module,this.fieldlastname,i+", "+this.filterUndefined(s)):"s l, f"===e?this.language.getFieldDisplayOptionValue(this.model.module,this.fieldsalutation,t+" "+this.filterUndefined(i)+", "+this.filterUndefined(s)):"l s f"===e?this.language.getFieldDisplayOptionValue(this.model.module,this.fieldlastname,i+" "+this.filterUndefined(t)+" "+this.filterUndefined(s)):"l f s"===e?this.language.getFieldDisplayOptionValue(this.model.module,this.fieldlastname,i+" "+this.filterUndefined(s)+" "+this.filterUndefined(t)):"s d f l a"===e?this.language.getFieldDisplayOptionValue(this.model.module,this.fieldsalutation,t+" "+this.filterUndefined(n)+" "+this.filterUndefined(s)+" "+this.filterUndefined(i)+" "+this.filterUndefined(o)):void 0}get isSimple(){return this.fieldconfig.simple}getClassesForSubField(e){let t="";switch(e){case this.fieldsalutation:t="small"==this.view.size?"slds-size--1-of-3 slds-order--1":this.isSimple?"slds-size--1-of-5":"slds-size--1-of-7";break;case this.fielddegree:t="small"==this.view.size?"slds-size--1-of-3 slds-order--2":"slds-size--1-of-7";break;case this.fieldlasttitle:t="small"==this.view.size?"slds-size--1-of-3 slds-order--3":"slds-size--1-of-7";break;case this.fieldfirstname:t="small"==this.view.size?"slds-size--1-of-2 slds-order--4":this.isSimple?"slds-p-left--xx-small slds-size--2-of-5":"slds-p-left--xx-small slds-size--2-of-7";break;case this.fieldlastname:t="small"==this.view.size?"slds-size--1-of-2 slds-order--5":this.isSimple?"slds-size--2-of-5":"slds-size--2-of-7"}return this.getStati(e).invalid&&(t+=" slds-has-error"),t}getSalutations(){let e=[],t=this.language.getFieldDisplayOptions(this.model.module,this.fieldconfig.field_salutation?this.fieldconfig.field_salutation:"salutation");for(let s in t)e.push({value:s,display:t[s]});return e}}return e=fieldFullName,(0,i.Z)(fieldFullName,"ɵfac",(function(t){return new(t||e)(c.Y36(w.o),c.Y36(k.e),c.Y36(x.d),c.Y36(u.Pu),c.Y36(L.F0),c.Y36(Ze.z))})),(0,i.Z)(fieldFullName,"ɵcmp",c.Xpm({type:e,selectors:[["field-full-name"]],features:[c.qOj],decls:2,vars:2,consts:[[4,"ngIf"],[3,"fieldname","fieldconfig",4,"ngIf"],[3,"fielddisplayclass","editable","fieldconfig","title","fieldid"],[3,"fieldname","fieldconfig"],[1,"slds-grid","slds-grid_vertical-align-center","slds-wrap"],[1,"slds-col","slds-form-element__control","slds-align-top",3,"ngClass"],[3,"fieldname",4,"ngIf"],[1,"slds-select_container","slds-p-vertical--xxx-small"],[1,"slds-select",3,"ngModel","ngModelChange"],[3,"ngValue",4,"ngFor","ngForOf"],[3,"fieldname"],["class","slds-col slds-form-element__control slds-p-left--xx-small slds-align-top",3,"ngClass",4,"ngIf"],["type","text",1,"slds-input","slds-p-vertical--xxx-small",3,"ngModel","ngModelOptions","ngModelChange"],[1,"slds-col","slds-form-element__control","slds-p-left--xx-small","slds-align-top",3,"ngClass"],["focus",""],[3,"ngValue"],["type","text",1,"slds-input","slds-p-vertical--xxx-small",3,"ngModel","ngModelChange"]],template:function(e,t){1&e&&(c.YNc(0,to,4,7,"ng-container",0),c.YNc(1,ho,19,19,"div",0)),2&e&&(c.Q6J("ngIf",!t.isEditMode()),c.xp6(1),c.Q6J("ngIf",t.isEditable()&&t.isEditMode()))},dependencies:[n.mk,n.sg,n.O5,o.YN,o.Kr,o.Fj,o.EJ,o.JJ,o.On,h.q,A.D,J.a],encapsulation:2})),fieldFullName})();function go(e,t){if(1&e&&c._UZ(0,"field-label",3),2&e){const e=c.oxw();c.Q6J("fieldname",e.fieldname)("fieldconfig",e.fieldconfig)}}function po(e,t){if(1&e&&(c.TgZ(0,"field-generic-display",4),c._uU(1),c.qZA()),2&e){const e=c.oxw();c.Q6J("fielddisplayclass",e.fielddisplayclass)("editable",e.isEditable())("fieldconfig",e.fieldconfig),c.xp6(1),c.hij(" ",e.value,"\n")}}function fo(e,t){if(1&e&&(c.TgZ(0,"option",13),c._uU(1),c.qZA()),2&e){const e=t.$implicit;c.Q6J("ngValue",e.value),c.xp6(1),c.Oqu(e.display)}}function bo(e,t){if(1&e&&(c.TgZ(0,"div",14),c._uU(1),c.qZA()),2&e){const e=c.oxw(2);c.xp6(1),c.Oqu(e.errorMessage)}}function vo(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"div")(1,"div",5)(2,"div",6)(3,"div",7)(4,"select",8),c.NdJ("ngModelChange",(function(t){c.CHM(e);const s=c.oxw();return c.KtG(s.model.data[s.fielddd]=t)})),c.YNc(5,fo,2,2,"option",9),c.qZA()()(),c.TgZ(6,"div",10)(7,"input",11),c.NdJ("ngModelChange",(function(t){c.CHM(e);const s=c.oxw();return c.KtG(s.model.data[s.fieldtxt]=t)})),c.qZA()()(),c.YNc(8,bo,2,1,"div",12),c.qZA()}if(2&e){const e=c.oxw();c.xp6(2),c.Q6J("ngClass",e.getFieldClass()),c.xp6(2),c.Q6J("ngModel",e.model.data[e.fielddd]),c.xp6(1),c.Q6J("ngForOf",e.getTitles()),c.xp6(1),c.Q6J("ngClass",e.getFieldClass()),c.xp6(1),c.Q6J("ngModel",e.model.data[e.fieldtxt]),c.xp6(1),c.Q6J("ngIf",""!==e.errorMessage)}}let Zo=(()=>{var e;class fieldTitle extends r.O{get fielddd(){return this.fieldconfig.field_dd?this.fieldconfig.field_dd:"title_dd"}get fieldtxt(){return this.fieldconfig.field_txt?this.fieldconfig.field_txt:"title"}get titledddisplay(){return this.language.getFieldDisplayOptionValue(this.model.module,this.fielddd,this.model.getField(this.fielddd))}get value(){return(this.model.getField(this.fielddd)?this.language.getFieldDisplayOptionValue(this.model.module,this.fielddd,this.model.getField(this.fielddd)):"")+(this.model.getField(this.fieldtxt)?" "+this.model.getField(this.fieldtxt):"")}constructor(e,t,s,n,o){super(e,t,s,n,o),(0,i.Z)(this,"model",void 0),(0,i.Z)(this,"view",void 0),(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"router",void 0),(0,i.Z)(this,"isValid",!0),(0,i.Z)(this,"errorMessage",""),this.model=e,this.view=t,this.language=s,this.metadata=n,this.router=o}getFieldClass(){let e=[];return this.isValid||e.push("slds-has-error"),e}getTitles(){let e=[],t=this.language.getFieldDisplayOptions(this.model.module,this.fieldconfig.field_dd?this.fieldconfig.field_dd:"title_dd");for(let s in t)e.push({value:s,display:t[s]});return e}}return e=fieldTitle,(0,i.Z)(fieldTitle,"ɵfac",(function(t){return new(t||e)(c.Y36(w.o),c.Y36(k.e),c.Y36(x.d),c.Y36(u.Pu),c.Y36(L.F0))})),(0,i.Z)(fieldTitle,"ɵcmp",c.Xpm({type:e,selectors:[["field-title"]],features:[c.qOj],decls:3,vars:3,consts:[[3,"fieldname","fieldconfig",4,"ngIf"],[3,"fielddisplayclass","editable","fieldconfig",4,"ngIf"],[4,"ngIf"],[3,"fieldname","fieldconfig"],[3,"fielddisplayclass","editable","fieldconfig"],[1,"slds-grid","slds-p-around--xx-small"],[1,"slds-col","slds-form-element__control","slds-size--1-of-2",3,"ngClass"],[1,"slds-select_container"],[1,"slds-select",3,"ngModel","ngModelChange"],[3,"ngValue",4,"ngFor","ngForOf"],[1,"slds-col","slds-form-element__control","slds-size--1-of-2","slds-p-left--xx-small",3,"ngClass"],["type","text",1,"slds-input",3,"ngModel","ngModelChange"],["class","slds-form-element__help",4,"ngIf"],[3,"ngValue"],[1,"slds-form-element__help"]],template:function(e,t){1&e&&(c.YNc(0,go,1,2,"field-label",0),c.YNc(1,po,2,4,"field-generic-display",1),c.YNc(2,vo,9,6,"div",2)),2&e&&(c.Q6J("ngIf",t.displayLabel),c.xp6(1),c.Q6J("ngIf",!t.isEditMode()),c.xp6(1),c.Q6J("ngIf",t.isEditable()&&t.isEditMode()))},dependencies:[n.mk,n.sg,n.O5,o.YN,o.Kr,o.Fj,o.EJ,o.JJ,o.On,h.q,A.D],encapsulation:2})),fieldTitle})();var _o=s(7579),yo=s(5920),xo=s(3441),wo=s(7693),To=s(9774);const Co=["fileupload"];function Ao(e,t){if(1&e&&c._UZ(0,"field-label",5),2&e){const e=c.oxw();c.Q6J("fieldname",e.fieldname)("fieldconfig",e.fieldconfig)}}function ko(e,t){if(1&e&&c._UZ(0,"system-file-icon",11),2&e){const e=c.oxw(2);c.Q6J("filemimetype",e.model.getField("file_mime_type"))("filename",e.value)}}function Lo(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"field-generic-display",6)(1,"div",7),c.YNc(2,ko,1,2,"system-file-icon",8),c.TgZ(3,"div",9)(4,"a",10),c.NdJ("click",(function(){c.CHM(e);const t=c.oxw();return c.KtG(t.previewFile())})),c._uU(5),c.qZA()()()()}if(2&e){const e=c.oxw();c.Q6J("fielddisplayclass",e.fielddisplayclass)("editable",e.isEditable())("fieldconfig",e.fieldconfig)("title",e.value)("fieldid",e.fieldid),c.xp6(2),c.Q6J("ngIf",e.value),c.xp6(3),c.Oqu(e.value)}}function Io(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"div",16)(1,"span",17)(2,"span",18),c._UZ(3,"system-icon",19),c.qZA()(),c.TgZ(4,"a",20)(5,"span",21),c._uU(6),c.qZA()(),c.TgZ(7,"button",22),c.NdJ("click",(function(){c.CHM(e);const t=c.oxw(2);return c.KtG(t.removeFile())})),c._UZ(8,"system-button-icon",23),c.qZA()()}if(2&e){const e=c.oxw(2);c.xp6(3),c.Q6J("icon",e.helper.determineFileIcon(e.model.getField("file_mime_type"))),c.xp6(3),c.Oqu(e.value)}}function Mo(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"div",24)(1,"div",25),c.NdJ("system-drop-file",(function(t){c.CHM(e);const s=c.oxw(2);return c.KtG(s.onDrop(t))})),c.TgZ(2,"input",26,27),c.NdJ("click",(function(){c.CHM(e);const t=c.MAs(3);return c.KtG(t.value=null)}))("change",(function(){c.CHM(e);const t=c.oxw(2);return c.KtG(t.uploadFile())})),c.qZA(),c.TgZ(4,"label",28)(5,"span",29),c._UZ(6,"system-button-icon",30)(7,"system-label",31),c.qZA(),c.TgZ(8,"span",32),c._UZ(9,"system-label",33)(10,"system-label",34),c.qZA()()()()}if(2&e){const e=c.oxw(2);c.xp6(2),c.Q6J("id",e.fieldid),c.xp6(2),c.uIk("for",e.fieldid),c.xp6(2),c.Q6J("icon","upload")}}function So(e,t){if(1&e&&(c.TgZ(0,"div",12),c.YNc(1,Io,9,2,"div",13),c.YNc(2,Mo,11,3,"div",14),c._UZ(3,"field-messages",15),c.qZA()),2&e){const e=c.oxw();c.Q6J("ngClass",e.getFieldClass()),c.xp6(1),c.Q6J("ngIf",e.value),c.xp6(1),c.Q6J("ngIf",!e.value),c.xp6(1),c.Q6J("fieldname",e.fieldname)}}function Jo(e,t){if(1&e&&(c.TgZ(0,"div",35)(1,"div",36),c._UZ(2,"div",37),c.TgZ(3,"div",38),c._uU(4),c.TgZ(5,"div",39),c._UZ(6,"div",40),c.qZA()()()()),2&e){const e=c.oxw();c.xp6(4),c.hij(" uploading ",e.theFile," ... "),c.xp6(2),c.Q6J("ngStyle",e.getBarStyle())}}function Oo(e,t){1&e&&c._UZ(0,"div",41)}let No=(()=>{var e;class fieldFile extends r.O{constructor(e,t,s,n,o,l,a,d,r,c,u){super(e,t,s,n,o),(0,i.Z)(this,"model",void 0),(0,i.Z)(this,"view",void 0),(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"router",void 0),(0,i.Z)(this,"configurationService",void 0),(0,i.Z)(this,"session",void 0),(0,i.Z)(this,"toast",void 0),(0,i.Z)(this,"modal",void 0),(0,i.Z)(this,"backend",void 0),(0,i.Z)(this,"helper",void 0),(0,i.Z)(this,"fileupload",void 0),(0,i.Z)(this,"showUploadModal",!1),(0,i.Z)(this,"theFile",""),(0,i.Z)(this,"theProgress",0),this.model=e,this.view=t,this.language=s,this.metadata=n,this.router=o,this.configurationService=l,this.session=a,this.toast=d,this.modal=r,this.backend=c,this.helper=u}humanFileSize(e){let t=1024,s=e;if(Math.abs(e)<t)return s+" B";let i=["kB","MB","GB","TB","PB","EB","ZB","YB"],n=-1;do{s/=t,++n}while(Math.abs(s)>=t&&n<i.length-1);return s.toFixed(1)+" "+i[n]}uploadFile(){let e=this.fileupload.element.nativeElement.files;this.doupload(e)}doupload(e){this.showUploadModal=!0,this.theFile=e[0].name,this.uploadAttachmentsBase64(e).subscribe((e=>{e.progress?this.theProgress=e.progress.loaded/e.progress.total*100:e.complete&&(this.value=e.filename?e.filename:this.theFile,this.model.setField("file_mime_type",e.filetype))}),(e=>{this.closeUploadPopup()}),(()=>this.closeUploadPopup()))}removeFile(){this.value="",this.model.setField("file_mime_type","")}closeUploadPopup(){this.showUploadModal=!1}uploadAttachmentsBase64(e){if(0===e.length)return;let t=new _o.x,s=this.configurationService.getSystemParamater("upload_maxsize");for(let i of e)s&&i.size>s?(this.toast.sendToast(this.language.getLabelFormatted("LBL_EXCEEDS_MAX_UPLOADFILESIZE",[i.name,this.humanFileSize(s)]),"error"),t.error(!0)):this.readFile(i).subscribe((e=>{let s=new XMLHttpRequest,n={};s.onreadystatechange=(e=this)=>{if(4==s.readyState)try{let e=JSON.parse(s.response);t.next({complete:!0,filename:e.filename,filetype:e.filetype}),t.complete()}catch(e){n={status:"error",data:"Unknown error occurred: ["+s.responseText+"]"}}},s.upload.addEventListener("progress",(e=>{t.next({progress:{total:e.total,loaded:e.loaded}})}),!1),s.open("POST",this.configurationService.getBackendUrl()+"/module/"+this.model.module+"/"+this.model.id+"/noteattachment",!0),s.setRequestHeader("OAuth-Token",this.session.authData.sessionId),s.setRequestHeader("Content-Type","application/json;charset=UTF-8");let o={file:i.filecontent,filename:i.name,filemimetype:i.type};s.send(JSON.stringify(o))}));return t.asObservable()}readFile(e){let t=new _o.x,s=new FileReader;return s.file=e,s.onloadend=e=>{let i=s.result.toString();i=i.substring(i.indexOf("base64,")+7);let n=s.file;n.filecontent=i,t.next(n),t.complete()},s.readAsDataURL(e),t.asObservable()}getBarStyle(){return{width:this.theProgress+"%"}}b64toBlob(e,t="",s=512){let i=atob(e),n=[];for(let e=0;e<i.length;e+=s){let t=i.slice(e,e+s),o=new Array(t.length);for(let e=0;e<t.length;e++)o[e]=t.charCodeAt(e);let l=new Uint8Array(o);n.push(l)}return new Blob(n,{type:t})}downloadAttachment(){this.backend.getRequest("module/"+this.model.module+"/"+this.model.id+"/noteattachment").subscribe((e=>{let t=this.b64toBlob(e.file,e.file_mime_type),s=URL.createObjectURL(t),i=document.createElement("a");document.body.appendChild(i),i.href=s,i.download=e.filename,i.type=e.file_mime_type,i.click(),i.remove()}))}previewFile(){if(this.model.getFieldValue("file_mime_type")){let e=this.model.getFieldValue("file_mime_type").split("/");switch(e[0]){case"image":this.modal.openModal("SystemImagePreviewModal").subscribe((e=>{e.instance.imgname=this.value,e.instance.imgtype=this.model.getFieldValue("file_mime_type"),this.backend.getRequest("module/"+this.model.module+"/"+this.model.id+"/noteattachment").subscribe((t=>{e.instance.imgsrc="data:"+this.model.getFieldValue("file_mime_type")+";base64,"+t.file}))}));break;case"text":case"audio":case"video":this.modal.openModal("SystemObjectPreviewModal").subscribe((e=>{e.instance.name=this.value,e.instance.type=this.model.getFieldValue("file_mime_type"),this.backend.getRequest("module/"+this.model.module+"/"+this.model.id+"/noteattachment").subscribe((t=>{e.instance.data=atob(t.file)}))}));break;case"application":if("pdf"===e[1])this.modal.openModal("SystemObjectPreviewModal").subscribe((e=>{e.instance.name=this.value,e.instance.type=this.model.getFieldValue("file_mime_type"),this.backend.getRequest("module/"+this.model.module+"/"+this.model.id+"/noteattachment").subscribe((t=>{e.instance.data=atob(t.file)}))}));else this.downloadAttachment();break;default:this.downloadAttachment()}}else this.downloadAttachment()}preventdefault(e){(1==e.dataTransfer.items.length&&"file"===e.dataTransfer.items[0].kind||e.dataTransfer.files.length>0)&&(e.preventDefault(),e.stopPropagation())}onDrop(e){this.doupload(e)}}return e=fieldFile,(0,i.Z)(fieldFile,"ɵfac",(function(t){return new(t||e)(c.Y36(w.o),c.Y36(k.e),c.Y36(x.d),c.Y36(u.Pu),c.Y36(L.F0),c.Y36(ee.C),c.Y36(yo.n),c.Y36(X.A),c.Y36(I.o),c.Y36($.y),c.Y36(xo._))})),(0,i.Z)(fieldFile,"ɵcmp",c.Xpm({type:e,selectors:[["field-file"]],viewQuery:function(e,t){if(1&e&&c.Gf(Co,5,c.s_b),2&e){let e;c.iGM(e=c.CRH())&&(t.fileupload=e.first)}},features:[c.qOj],decls:5,vars:5,consts:[[3,"fieldname","fieldconfig",4,"ngIf"],[3,"fielddisplayclass","editable","fieldconfig","title","fieldid",4,"ngIf"],["class","slds-form-element__control slds-grid slds-grid--align-spread slds-p-vertical--xx-small",3,"ngClass",4,"ngIf"],["role","dialog","class","slds-modal slds-fade-in-open",4,"ngIf"],["class","slds-backdrop slds-backdrop--open",4,"ngIf"],[3,"fieldname","fieldconfig"],[3,"fielddisplayclass","editable","fieldconfig","title","fieldid"],[1,"slds-grid","slds-grid--vertical-align-center"],["divClass","slds-p-right--xx-small","size","x-small",3,"filemimetype","filename",4,"ngIf"],[1,"slds-truncate","slds-grow"],["href","javascript:void(0);",3,"click"],["divClass","slds-p-right--xx-small","size","x-small",3,"filemimetype","filename"],[1,"slds-form-element__control","slds-grid","slds-grid--align-spread","slds-p-vertical--xx-small",3,"ngClass"],["class","slds-pill slds-pill_link slds-size--1-of-1",4,"ngIf"],["class","slds-file-selector slds-file-selector_files",4,"ngIf"],[3,"fieldname"],[1,"slds-pill","slds-pill_link","slds-size--1-of-1"],[1,"slds-pill__icon_container"],["title","Account",1,"slds-icon_container","slds-icon-standard-account"],["divClass","","sprite","doctype","size","x-small",3,"icon"],["href","javascript:void(0);",1,"slds-pill__action"],[1,"slds-pill__label"],["title","Remove",1,"slds-button","slds-button_icon","slds-button_icon","slds-pill__remove",3,"click"],["icon","close"],[1,"slds-file-selector","slds-file-selector_files"],[1,"slds-file-selector__dropzone",3,"system-drop-file"],["type","file",1,"slds-file-selector__input","slds-assistive-text",3,"id","click","change"],["fileupload",""],[1,"slds-file-selector__body"],[1,"slds-file-selector__button","slds-button","slds-button_neutral"],[3,"icon"],["label","LBL_UPLOAD_FILES"],[1,"slds-file-selector__text","slds-medium-show"],["label","LBL_OR"],["label","LBL_DROP_FILES"],["role","dialog",1,"slds-modal","slds-fade-in-open"],[1,"slds-modal__container"],[1,"slds-modal__header","slds-modal__header--empty"],[1,"slds-modal__content","slds-p-around--medium"],[1,"uploadbar"],[1,"uploadprogress",3,"ngStyle"],[1,"slds-backdrop","slds-backdrop--open"]],template:function(e,t){1&e&&(c.YNc(0,Ao,1,2,"field-label",0),c.YNc(1,Lo,6,7,"field-generic-display",1),c.YNc(2,So,4,4,"div",2),c.YNc(3,Jo,7,2,"div",3),c.YNc(4,Oo,1,0,"div",4)),2&e&&(c.Q6J("ngIf",t.displayLabel),c.xp6(1),c.Q6J("ngIf",!t.isEditMode()),c.xp6(1),c.Q6J("ngIf",t.isEditable()&&t.isEditMode()),c.xp6(1),c.Q6J("ngIf",t.showUploadModal),c.xp6(1),c.Q6J("ngIf",t.showUploadModal))},dependencies:[n.mk,n.O5,n.PC,T.J,hs.f,wo.T,se._,To.M,h.q,A.D,J.a],encapsulation:2})),fieldFile})();function Fo(e,t){if(1&e&&c._UZ(0,"field-label",3),2&e){const e=c.oxw();c.Q6J("fieldname",e.fieldname)("fieldconfig",e.fieldconfig)}}function qo(e,t){1&e&&c._UZ(0,"system-utility-icon",8)}function Eo(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"field-generic-display",4)(1,"div",5),c.NdJ("click",(function(){c.CHM(e);const t=c.oxw();return c.KtG(t.navigateTo())})),c.YNc(2,qo,1,0,"system-utility-icon",6),c.TgZ(3,"div",7),c._uU(4),c.qZA()()()}if(2&e){const e=c.oxw();c.Q6J("fielddisplayclass",e.fielddisplayclass)("editable",e.isEditable())("fieldconfig",e.fieldconfig)("fieldid",e.fieldid),c.xp6(2),c.Q6J("ngIf",e.url),c.xp6(2),c.Oqu(e.url)}}function Yo(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"div",9)(1,"input",10,11),c.NdJ("ngModelChange",(function(t){c.CHM(e);const s=c.oxw();return c.KtG(s.value=t)})),c.qZA(),c._UZ(3,"field-messages",12),c.qZA()}if(2&e){const e=c.oxw();c.Q6J("ngClass",e.getFieldClass()),c.xp6(1),c.Q6J("ngModel",e.value)("ngModelOptions",e.modelOptions),c.xp6(2),c.Q6J("fieldname",e.fieldname)}}let Do=(()=>{var e;class fieldUrl extends r.O{constructor(e,t,s,n,o){super(e,t,s,n,o),(0,i.Z)(this,"model",void 0),(0,i.Z)(this,"view",void 0),(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"router",void 0),this.model=e,this.view=t,this.language=s,this.metadata=n,this.router=o}get url(){return this.model.getField(this.fieldname)?this.model.getField(this.fieldname).replace(/https?\:\/\//,""):""}navigateTo(){""!=this.url&&window.open("//"+this.url,"_blank")}}return e=fieldUrl,(0,i.Z)(fieldUrl,"ɵfac",(function(t){return new(t||e)(c.Y36(w.o),c.Y36(k.e),c.Y36(x.d),c.Y36(u.Pu),c.Y36(L.F0))})),(0,i.Z)(fieldUrl,"ɵcmp",c.Xpm({type:e,selectors:[["field-url"]],features:[c.qOj],decls:3,vars:3,consts:[[3,"fieldname","fieldconfig",4,"ngIf"],[3,"fielddisplayclass","editable","fieldconfig","fieldid",4,"ngIf"],["class","slds-form-element__control slds-grid slds-grid--align-spread",3,"ngClass",4,"ngIf"],[3,"fieldname","fieldconfig"],[3,"fielddisplayclass","editable","fieldconfig","fieldid"],[1,"slds-grid","slds-grid--vertical-align-center","slds-text-link_reset",3,"click"],["class","slds-m-right--xx-small","icon","world","size","x-small",4,"ngIf"],[1,"slds-truncate"],["icon","world","size","x-small",1,"slds-m-right--xx-small"],[1,"slds-form-element__control","slds-grid","slds-grid--align-spread",3,"ngClass"],["type","text",1,"slds-input",3,"ngModel","ngModelOptions","ngModelChange"],["focus",""],[3,"fieldname"]],template:function(e,t){1&e&&(c.YNc(0,Fo,1,2,"field-label",0),c.YNc(1,Eo,5,6,"field-generic-display",1),c.YNc(2,Yo,4,4,"div",2)),2&e&&(c.Q6J("ngIf",t.displayLabel),c.xp6(1),c.Q6J("ngIf",!t.isEditMode()),c.xp6(1),c.Q6J("ngIf",t.isEditable()&&t.isEditMode()))},dependencies:[n.mk,n.O5,o.Fj,o.JJ,o.On,M.r,h.q,A.D,J.a],encapsulation:2})),fieldUrl})();function Qo(e,t){if(1&e&&c._UZ(0,"field-label",3),2&e){const e=c.oxw();c.Q6J("fieldname",e.fieldname)("fieldconfig",e.fieldconfig)}}function Uo(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"system-utility-icon",8),c.NdJ("click",(function(t){c.CHM(e);const s=c.oxw(2);return c.KtG(s.sendEmail(t))})),c.qZA()}}function Ro(e,t){if(1&e&&(c.TgZ(0,"field-generic-display",4)(1,"div",5)(2,"div",6),c._uU(3),c.qZA(),c.YNc(4,Uo,1,0,"system-utility-icon",7),c.qZA()()),2&e){const e=c.oxw();c.Q6J("fielddisplayclass",e.fielddisplayclass)("fieldconfig",e.fieldconfig)("editable",e.isEditable())("title",e.value),c.xp6(3),c.Oqu(e.value),c.xp6(1),c.Q6J("ngIf",e.value)}}function jo(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"div",9)(1,"input",10),c.NdJ("ngModelChange",(function(t){c.CHM(e);const s=c.oxw();return c.KtG(s.value=t)})),c.qZA(),c._UZ(2,"field-messages",11),c.qZA()}if(2&e){const e=c.oxw();c.Q6J("ngClass",e.fieldClass),c.xp6(1),c.Q6J("ngModel",e.value)("ngModelOptions",e.modelOptions),c.xp6(1),c.Q6J("fieldname",e.fieldname)}}let Bo=(()=>{var e;class fieldEmail extends r.O{constructor(e,t,s,n,o){super(e,t,s,n,o),(0,i.Z)(this,"model",void 0),(0,i.Z)(this,"view",void 0),(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"router",void 0),(0,i.Z)(this,"invalid",!1),(0,i.Z)(this,"mark",void 0),(0,i.Z)(this,"validation",new RegExp('^(([^<>()\\[\\]\\\\.,;:\\s@"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@"]+)*)|(".+"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$')),(0,i.Z)(this,"_value",""),this.model=e,this.view=t,this.language=s,this.metadata=n,this.router=o,this.mark=this.model.generateGuid(),this.subscriptions.add(this.model.data$.subscribe((e=>{(!this.value||this.value&&this.value!=e.email1)&&this.setInitialFieldValue()}))),this.model.observeFieldChanges("email_addresses").subscribe((()=>{this.setInitialFieldValue()}))}get value(){return this._value}set value(e){this._value=e,e&&e.length>0&&!this.validation.test(e)?(this.model.setFieldMessage("error",this.language.getLabel("LBL_INPUT_INVALID"),this.fieldname,this.mark),this.invalid=!0):(this.model.setField(this.fieldname,e||""),this.setPrimaryEmail(e),this.model.resetFieldMessages(this.fieldname,"error",this.mark),this.invalid=!1)}get fieldClass(){return this.invalid?[...this.css_classes,"slds-has-error"]:this.css_classes}ngOnInit(){this.setInitialFieldValue(),super.ngOnInit()}setInitialFieldValue(){this._value=this.model.getField(this.fieldname);const e=this.model.getRelatedRecords("email_addresses"),t=e?e.find((e=>1==e.primary_address)):void 0;this._value||(this._value=t?t.email_address:void 0)}setPrimaryEmail(e){let t=e?{id:this.model.generateGuid(),primary_address:"1",email_address:e.toLowerCase(),email_address_caps:e.toUpperCase()}:void 0,s=this.model.getRelatedRecords("email_addresses");if(s&&0!=s.length||!t)if(t){let e=!1;s.forEach((s=>{t.email_address_caps==s.email_address_caps?(e=!0,s.primary_address=1):s.primary_address=0})),e||s.push(t)}else s=s.filter((e=>1!=e.primary_address));else s=[t];this.model.setRelatedRecords("email_addresses",s)}sendEmail(e){e.stopPropagation(),e.preventDefault(),this.value.length>0&&window.open("mailto:"+this.value)}}return e=fieldEmail,(0,i.Z)(fieldEmail,"ɵfac",(function(t){return new(t||e)(c.Y36(w.o),c.Y36(k.e),c.Y36(x.d),c.Y36(u.Pu),c.Y36(L.F0))})),(0,i.Z)(fieldEmail,"ɵcmp",c.Xpm({type:e,selectors:[["field-email"]],features:[c.qOj],decls:3,vars:3,consts:[[3,"fieldname","fieldconfig",4,"ngIf"],[3,"fielddisplayclass","fieldconfig","editable","title",4,"ngIf"],["class","slds-form-element__control slds-p-around--xx-small",3,"ngClass",4,"ngIf"],[3,"fieldname","fieldconfig"],[3,"fielddisplayclass","fieldconfig","editable","title"],[1,"slds-grid","slds-grid--vertical-align-center"],[1,"slds-truncate"],["icon","email","size","x-small","class","slds-text-link_reset slds-p-left--x-small",3,"click",4,"ngIf"],["icon","email","size","x-small",1,"slds-text-link_reset","slds-p-left--x-small",3,"click"],[1,"slds-form-element__control","slds-p-around--xx-small",3,"ngClass"],["type","text",1,"slds-input",3,"ngModel","ngModelOptions","ngModelChange"],[3,"fieldname"]],template:function(e,t){1&e&&(c.YNc(0,Qo,1,2,"field-label",0),c.YNc(1,Ro,5,6,"field-generic-display",1),c.YNc(2,jo,3,4,"div",2)),2&e&&(c.Q6J("ngIf",t.displayLabel),c.xp6(1),c.Q6J("ngIf",!t.isEditMode()),c.xp6(1),c.Q6J("ngIf",t.isEditable()&&t.isEditMode()))},dependencies:[n.mk,n.O5,o.Fj,o.JJ,o.On,M.r,h.q,A.D,J.a],encapsulation:2})),fieldEmail})();var Go=s(4664),Po=s(5982);function Ho(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"input",6),c.NdJ("ngModelChange",(function(t){c.CHM(e);const s=c.oxw();return c.KtG(s.emailAddressText=t)}))("blur",(function(){c.CHM(e);const t=c.oxw();return c.KtG(t.validateDomain())})),c.qZA()}if(2&e){const e=c.oxw();c.Q6J("ngModel",e.emailAddressText)}}function zo(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"input",7),c.NdJ("ngModelChange",(function(t){c.CHM(e);const s=c.oxw();return c.KtG(s.emailAddressText=t)}))("blur",(function(){c.CHM(e);const t=c.oxw();return c.KtG(t.validateDomain())})),c.qZA()}if(2&e){const e=c.oxw();c.Q6J("ngModel",e.emailAddressText)}}function Vo(e,t){1&e&&(c.TgZ(0,"div",8),c._UZ(1,"system-label",9),c.qZA())}function Ko(e,t){1&e&&(c.TgZ(0,"div",8),c._UZ(1,"system-label",10),c.qZA())}function $o(e,t){1&e&&(c.TgZ(0,"div",11),c._UZ(1,"system-spinner",12)(2,"system-label",13),c.qZA())}let Xo=(()=>{var e;class fieldEmailEmailAddress{constructor(e,t,s){(0,i.Z)(this,"zone",void 0),(0,i.Z)(this,"backend",void 0),(0,i.Z)(this,"configurationService",void 0),(0,i.Z)(this,"onBlur",new c.vpe),(0,i.Z)(this,"emailAddress",{}),(0,i.Z)(this,"typingTimeout",void 0),(0,i.Z)(this,"invalid_domain",!1),(0,i.Z)(this,"checkingDomain",!1),this.zone=e,this.backend=t,this.configurationService=s}get emailAddressText(){return this.emailAddress.email_address}set emailAddressText(e){this.emailAddress.email_address=e,this.emailAddress.email_address_caps=e.toUpperCase(),this.zone.runOutsideAngular((()=>{window.clearTimeout(this.typingTimeout),this.typingTimeout=window.setTimeout((()=>this.zone.run((()=>{this.validateEmailAddress(),this.onBlur.emit()}))),500)}))}validateEmailAddress(){let e=new RegExp("^(?:[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*|\"(?:[-\b\v\f-!#-[]-]|\\\\[-\t\v\f-])*\")@(?:(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?|\\[(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?|[a-z0-9-]*[a-z0-9]:(?:[-\b\v\f-!-ZS-]|\\\\[-\t\v\f-])+)\\])$");this.configurationService.data.systemparameters.international_email_addresses&&(e=new RegExp("(?:[ -퟿-￿-a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\\.[ -퟿-￿-a-z0-9!#$%&'*+/=?^_`{|}~-]+)*|\"(?:[-\b\v\f-!#-[]-]|\\\\[-\t\v\f-])*\")@(?:(?:[ -퟿-￿-a-z0-9](?:[ -퟿-￿-a-z0-9-]*[ -퟿-￿-a-z0-9])?\\.)+[ -퟿-￿-a-z0-9](?:[ -퟿-￿-a-z0-9-]*[ -퟿-￿-a-z0-9])?|\\[(?:(?:(2(5[0-5]|[0-4][0-9])|1[0-9][0-9]|[1-9]?[0-9]))\\.){3}(?:(2(5[0-5]|[0-4][0-9])|1[0-9][0-9]|[1-9]?[0-9])|[a-z0-9-]*[a-z0-9]:(?:[-\b\v\f-!-ZS-]|\\\\[-\t\v\f-])+)\\])")),this.emailAddress.invalid_email=e.test(this.emailAddress.email_address)?0:1}validateDomain(){this.emailAddress.email_address&&1!=this.emailAddress.invalid_email&&(this.checkingDomain=!0,this.backend.postRequest("module/EmailAddresses/validate",null,{text:this.emailAddress.email_address}).subscribe((e=>{this.checkingDomain=!1,this.emailAddress.invalid_email=e.invalid_email||e.invalid_domain?1:0,this.invalid_domain=e.invalid_domain})))}}return e=fieldEmailEmailAddress,(0,i.Z)(fieldEmailEmailAddress,"ɵfac",(function(t){return new(t||e)(c.Y36(c.R0b),c.Y36($.y),c.Y36(ee.C))})),(0,i.Z)(fieldEmailEmailAddress,"ɵcmp",c.Xpm({type:e,selectors:[["field-email-emailaddress"]],inputs:{emailAddress:"emailAddress"},outputs:{onBlur:"onBlur"},decls:8,vars:7,consts:[[1,"slds-form-element","slds-truncate","slds-size--1-of-1"],[1,"slds-form-element__control"],["type","text","class","slds-input",3,"ngModel","ngModelChange","blur",4,"ngIf","ngIfElse"],["hasFocusContainer",""],["class","slds-form-element__help",4,"ngIf"],["class","slds-form-element__help slds-grid",4,"ngIf"],["type","text",1,"slds-input",3,"ngModel","ngModelChange","blur"],["type","text","system-autofocus","",1,"slds-input",3,"ngModel","ngModelChange","blur"],[1,"slds-form-element__help"],["label","LBL_INPUT_INVALID"],["label","LBL_DOMAIN_INVALID"],[1,"slds-form-element__help","slds-grid"],["size","14",1,"slds-m-right--xx-small","slds-p-top--xxx-small"],["label","LBL_CHECKING_DOMAIN"]],template:function(e,t){if(1&e&&(c.TgZ(0,"div",0)(1,"div",1),c.YNc(2,Ho,1,1,"input",2),c.YNc(3,zo,1,1,"ng-template",null,3,c.W1O),c.qZA(),c.YNc(5,Vo,2,0,"div",4),c.YNc(6,Ko,2,0,"div",4),c.YNc(7,$o,3,0,"div",5),c.qZA()),2&e){const e=c.MAs(4);c.ekj("slds-has-error",1==t.emailAddress.invalid_email),c.xp6(2),c.Q6J("ngIf",!t.emailAddress.hasFocus)("ngIfElse",e),c.xp6(3),c.Q6J("ngIf",1==t.emailAddress.invalid_email&&!t.invalid_domain),c.xp6(1),c.Q6J("ngIf",t.invalid_domain&&!t.checkingDomain),c.xp6(1),c.Q6J("ngIf",t.checkingDomain)}},dependencies:[n.O5,o.Fj,o.JJ,o.On,se._,Go.W,Po.m],encapsulation:2})),fieldEmailEmailAddress})(),Wo=(()=>{var e;class fieldEmailEmailAddressStatus{constructor(){(0,i.Z)(this,"status",void 0)}get statusColor(){switch(this.status){case"opted_in":return"slds-icon-text-success";case"pending":return"slds-icon-text-warning";case"opted_out":return"slds-icon-text-error";default:return"slds-icon-text-light"}}get statusIcon(){switch(this.status){case"opted_in":return"success";case"pending":return"warning";case"opted_out":return"error";default:return"routing_offline"}}get statusLabel(){switch(this.status){case"opted_in":return"LBL_OPTED_IN";case"pending":return"LBL_PENDING";case"opted_out":return"LBL_OPTED_OUT";default:return"LBL_OPT_IN_STATUS"}}}return e=fieldEmailEmailAddressStatus,(0,i.Z)(fieldEmailEmailAddressStatus,"ɵfac",(function(t){return new(t||e)})),(0,i.Z)(fieldEmailEmailAddressStatus,"ɵcmp",c.Xpm({type:e,selectors:[["field-email-emailaddress-status"]],inputs:{status:"status"},decls:1,vars:3,consts:[["size","x-small",3,"icon","colorclass","title"]],template:function(e,t){1&e&&c._UZ(0,"system-utility-icon",0),2&e&&c.Q6J("icon",t.statusIcon)("colorclass",t.statusColor)("title",t.statusLabel)},dependencies:[M.r],encapsulation:2,changeDetection:0})),fieldEmailEmailAddressStatus})();function el(e,t){if(1&e&&c._UZ(0,"field-label",3),2&e){const e=c.oxw();c.Q6J("fieldname",e.fieldname)("fieldconfig",e.fieldconfig)}}function tl(e,t){if(1&e&&c._UZ(0,"system-input-radio",14),2&e){const e=c.oxw().$implicit;c.Q6J("ngModel",e.primary_address)("disabled",!0)}}function sl(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"button",15),c.NdJ("click",(function(){c.CHM(e);const t=c.oxw().$implicit,s=c.oxw(2);return c.KtG(s.sendEmail(t))})),c._UZ(1,"system-button-icon",16),c.qZA()}if(2&e){const e=c.oxw().$implicit;c.Q6J("disabled","1"==e.invalid_email)}}function il(e,t){if(1&e&&(c.TgZ(0,"div",6),c.YNc(1,tl,1,2,"system-input-radio",7),c.TgZ(2,"div",8)(3,"div",9),c.YNc(4,sl,2,1,"button",10),c.TgZ(5,"div",11),c._uU(6),c.qZA()()(),c.TgZ(7,"div",12),c._UZ(8,"field-email-emailaddress-status",13),c.qZA()()),2&e){const e=t.$implicit,s=c.oxw(2);c.xp6(1),c.Q6J("ngIf",!s.fieldconfig.singleMode),c.xp6(3),c.Q6J("ngIf",!!e.email_address),c.xp6(1),c.Udp("text-decoration","1"==e.invalid_email?"line-through":"initial"),c.xp6(1),c.Oqu(e.email_address),c.xp6(2),c.Q6J("status",e.opt_in_status)}}function nl(e,t){if(1&e&&(c.TgZ(0,"field-generic-display",4),c.YNc(1,il,9,6,"div",5),c.qZA()),2&e){const e=c.oxw();c.Q6J("fieldconfig",e.fieldconfig)("editable",e.isEditable()),c.xp6(1),c.Q6J("ngForOf",e.emailAddresses)("ngForTrackBy",e.trackByFn)}}function ol(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"system-input-radio",27),c.NdJ("ngModelChange",(function(){c.CHM(e);const t=c.oxw().$implicit,s=c.oxw(2);return c.KtG(s.setPrimary(t))})),c.qZA()}if(2&e){const e=c.oxw().$implicit,t=c.oxw(2);c.Q6J("name",t.primaryInputRadioName)("ngModel","1"==e.primary_address)("disabled",1==e.invalid_email||!e.email_address)}}function ll(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"div",21),c.YNc(1,ol,1,3,"system-input-radio",22),c.TgZ(2,"field-email-emailaddress",23),c.NdJ("keyup.enter",(function(){c.CHM(e);const t=c.oxw(2);return c.KtG(t.startAdding())}))("onBlur",(function(){c.CHM(e);const t=c.oxw(2);return c.KtG(t.setEmailAddressesField())})),c.qZA(),c._UZ(3,"field-email-emailaddress-status",24),c.TgZ(4,"button",25),c.NdJ("click",(function(){const t=c.CHM(e).$implicit,s=c.oxw(2);return c.KtG(s.handleOnDelete(t))})),c._UZ(5,"system-button-icon",26),c.qZA()()}if(2&e){const e=t.$implicit,s=c.oxw(2);c.ekj("slds-m-bottom--x-small",s.emailAddresses.length>0),c.xp6(1),c.Q6J("ngIf",!s.fieldconfig.singleMode),c.xp6(1),c.Q6J("emailAddress",e),c.xp6(1),c.Q6J("status",e.opt_in_status),c.xp6(1),c.Q6J("disabled","1"==e.primary_address&&s.emailAddresses.length>1)}}function al(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"system-input-radio",29),c.NdJ("ngModelChange",(function(){c.CHM(e);const t=c.oxw(3);return c.KtG(t.setPrimary(t.inputNewEmailAddress))})),c.qZA()}if(2&e){const e=c.oxw(3);c.Q6J("name",e.primaryInputRadioName)("ngModel","1"==e.inputNewEmailAddress.primary_address)("disabled",1==e.inputNewEmailAddress.invalid_email||!e.inputNewEmailAddress.email_address)}}function dl(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"div",21),c.YNc(1,al,1,3,"system-input-radio",28),c.TgZ(2,"field-email-emailaddress",23),c.NdJ("keyup.enter",(function(){c.CHM(e);const t=c.oxw(2);return c.KtG(t.startAdding())}))("onBlur",(function(){c.CHM(e);const t=c.oxw(2);return c.KtG(t.setEmailAddressesField())})),c.qZA(),c._UZ(3,"field-email-emailaddress-status",24),c.TgZ(4,"button",25),c.NdJ("click",(function(){c.CHM(e);const t=c.oxw(2);return c.KtG(t.cancelAdding())})),c._UZ(5,"system-button-icon",26),c.qZA()()}if(2&e){const e=c.oxw(2);c.xp6(1),c.Q6J("ngIf",!e.fieldconfig.singleMode),c.xp6(1),c.Q6J("emailAddress",e.inputNewEmailAddress),c.xp6(1),c.Q6J("status",e.inputNewEmailAddress.opt_in_status),c.xp6(1),c.Q6J("disabled","1"==e.inputNewEmailAddress.primary_address&&e.emailAddresses.length>1)}}function rl(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"div",30)(1,"button",31),c.NdJ("click",(function(){c.CHM(e);const t=c.oxw(2);return c.KtG(t.startAdding())})),c._UZ(2,"system-button-icon",32),c.qZA()()}}function cl(e,t){if(1&e&&(c.TgZ(0,"div",17),c.YNc(1,ll,6,6,"div",18),c.YNc(2,dl,6,4,"div",19),c.YNc(3,rl,3,0,"div",20),c.qZA()),2&e){const e=c.oxw();c.xp6(1),c.Q6J("ngForOf",e.emailAddresses)("ngForTrackBy",e.trackByFn),c.xp6(1),c.Q6J("ngIf",e.isAdding),c.xp6(1),c.Q6J("ngIf",e.canAdd)}}let ul=(()=>{var e;class fieldEmailAddresses extends r.O{constructor(e,t,s,n,o,l){super(e,t,s,n,l),(0,i.Z)(this,"model",void 0),(0,i.Z)(this,"view",void 0),(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"broadcast",void 0),(0,i.Z)(this,"router",void 0),(0,i.Z)(this,"primaryInputRadioName",_.uniqueId("field-email-address-")),(0,i.Z)(this,"canAdd",!1),(0,i.Z)(this,"isAdding",!1),(0,i.Z)(this,"emailAddresses",[]),(0,i.Z)(this,"inputNewEmailAddress",{primary_address:"",invalid_email:0,email_address:"",hasFocus:!0}),this.model=e,this.view=t,this.language=s,this.metadata=n,this.broadcast=o,this.router=l,this.subscribeToDataChange()}ngOnInit(){this.initialize(),this.subscribeToModeChange()}handleOnDelete(e){this.emailAddresses=this.emailAddresses.filter((t=>t.id!==e.id)),e.isNew?this.model.setRelatedRecords("email_addresses",this.emailAddresses):this.model.removeRelatedRecords("email_addresses",[e.id]),0==this.emailAddresses.length&&this.setEmail1Field(void 0),this.fieldconfig.singleMode&&(this.canAdd=!0,this.startAdding()),this.model.duplicateCheckOnChange([],!0),this.handleFieldInvalid()}sendEmail(e){1!=e.invalid_email&&window.location.assign("mailto:"+e.email_address)}trackByFn(e,t){return t.id}setPrimary(e){1!=e.invalid_email&&(this.emailAddresses.forEach((t=>{t.id==e.id?(t.primary_address="1",this.setEmail1Field(e)):t.primary_address="0"})),this.model.addRelatedRecords("email_addresses",this.emailAddresses))}startAdding(){this.canAdd&&(this.isAdding=!0,this.canAdd=!1)}subscribeToDataChange(){this.subscriptions.add(this.broadcast.message$.subscribe((e=>{"model.loaded"==e.messagetype&&this.initialize()}))),this.subscriptions.add(this.model.observeFieldChanges("email_addresses").subscribe((()=>{const e=this.model.getRelatedRecords("email_addresses");this.emailAddresses=this.fieldconfig.singleMode?e.filter((e=>1==e.primary_address)):e,e.length>0&&this.isAdding&&(this.inputNewEmailAddress.email_address||(this.isAdding=!1))})))}setEmail1Field(e){1!=e?.invalid_email&&e?.email_address!=this.model.getField("email1")&&this.model.setField("email1",e?.email_address)}subscribeToModeChange(){this.subscriptions.add(this.view.mode$.subscribe((()=>this.initialize())))}initialize(){const e=this.model.getRelatedRecords("email_addresses");this.emailAddresses=this.fieldconfig.singleMode?e.filter((e=>1==e.primary_address)):e,this.isEditMode()&&(Array.isArray(this.emailAddresses)&&0!=this.emailAddresses.length?this.setCanAdd():(this.model.initializeField("email_addresses",{beans:{},beans_relations_to_delete:{}}),this.emailAddresses=[],this.canAdd=!0,this.startAdding()),this.handleFieldInvalid())}setEmailAddressesField(){this.pushNewEmailAddress();const e=this.getUniqueCleanEmailAddresses();this.model.addRelatedRecords("email_addresses",e.unique),this.model.removeRelatedRecords("email_addresses",e.deletedIds);let t=this.handleFieldInvalid();this.setEmail1Field(e.unique.find((e=>"1"==e.primary_address))),0==t&&this.model.duplicateCheckOnChange([],!0),this.setCanAdd()}pushNewEmailAddress(){this.isAdding&&1!=this.inputNewEmailAddress.invalid_email&&!this.emailAddresses.some((e=>e.email_address==this.inputNewEmailAddress.email_address))&&(0==this.emailAddresses.length&&(this.inputNewEmailAddress.primary_address=1),this.inputNewEmailAddress.id=this.model.generateGuid(),this.inputNewEmailAddress.isNew=!0,this.emailAddresses.push({...this.inputNewEmailAddress}),this.cancelAdding())}handleFieldInvalid(){return(1==this.emailAddresses.length&&this.emailAddresses[0].email_address||this.emailAddresses.length>1)&&this.emailAddresses.some((e=>1==e.invalid_email))?(this.setFieldError(this.language.getLabel("LBL_INPUT_INVALID")),!0):(1==this.emailAddresses.length&&(this.emailAddresses[0].invalid_email=0),this.clearFieldError(),!1)}setCanAdd(){this.canAdd=this.fieldconfig.singleMode?0==this.emailAddresses.length:!this.emailAddresses.some((e=>1==e.invalid_email))}getUniqueCleanEmailAddresses(){const e=[],t=this.emailAddresses.filter((e=>!e.email_address)).map((e=>e.id));return this.emailAddresses.filter((e=>!!e.email_address)).forEach((s=>{e.some((e=>e.email_address==s.email_address))?s.isNew||t.push(s.id):(delete s.hasFocus,e.push(s))})),{deletedIds:t,unique:e}}cancelAdding(){this.inputNewEmailAddress={id:"",primary_address:"",invalid_email:0,email_address:"",hasFocus:!0},this.emailAddresses.length>0&&(this.isAdding=!1,this.setCanAdd())}}return e=fieldEmailAddresses,(0,i.Z)(fieldEmailAddresses,"ɵfac",(function(t){return new(t||e)(c.Y36(w.o),c.Y36(k.e),c.Y36(x.d),c.Y36(u.Pu),c.Y36(W.f),c.Y36(L.F0))})),(0,i.Z)(fieldEmailAddresses,"ɵcmp",c.Xpm({type:e,selectors:[["field-email-addresses"]],features:[c.qOj],decls:3,vars:3,consts:[[3,"fieldname","fieldconfig",4,"ngIf"],["fielddisplayclass","slds-has-divider--bottom slds-p-vertical--xx-small spice-fieldminheight",3,"fieldconfig","editable",4,"ngIf"],["class","slds-m-top--xx-small",4,"ngIf"],[3,"fieldname","fieldconfig"],["fielddisplayclass","slds-has-divider--bottom slds-p-vertical--xx-small spice-fieldminheight",3,"fieldconfig","editable"],["class","slds-grid slds-grid--vertical-align-center slds-size--1-of-1",4,"ngFor","ngForOf","ngForTrackBy"],[1,"slds-grid","slds-grid--vertical-align-center","slds-size--1-of-1"],["value","1","system-title","LBL_PRIMARY","class","slds-truncate",3,"ngModel","disabled",4,"ngIf"],[1,"slds-m-bottom--xx-small","slds-grow"],[1,"slds-grid","slds-grid--vertical-align-center"],["class","slds-button slds-button_icon slds-m-right--xx-small",3,"disabled","click",4,"ngIf"],[1,"slds-truncate"],[1,"slds-p-left--x-small","slds-m-bottom--x-small"],[1,"slds-m-bottom--x-small","slds-p-right--xx-small",3,"status"],["value","1","system-title","LBL_PRIMARY",1,"slds-truncate",3,"ngModel","disabled"],[1,"slds-button","slds-button_icon","slds-m-right--xx-small",3,"disabled","click"],["icon","email","sprite","action"],[1,"slds-m-top--xx-small"],["class","slds-grid",3,"slds-m-bottom--x-small",4,"ngFor","ngForOf","ngForTrackBy"],["class","slds-grid",4,"ngIf"],["class","slds-grid slds-align-content-center slds-p-vertical--x-small",4,"ngIf"],[1,"slds-grid"],["value","1","system-title","LBL_PRIMARY","class","slds-m-top--xx-small","style","max-width: 1.4rem",3,"name","ngModel","disabled","ngModelChange",4,"ngIf"],[1,"slds-grow",3,"emailAddress","keyup.enter","onBlur"],[1,"slds-p-right--xx-small","slds-p-left--x-small","slds-m-top--xx-small",3,"status"],[1,"slds-button","slds-button--icon","slds-m-top--xxx-small",2,"max-height","1.6rem",3,"disabled","click"],["icon","clear"],["value","1","system-title","LBL_PRIMARY",1,"slds-m-top--xx-small",2,"max-width","1.4rem",3,"name","ngModel","disabled","ngModelChange"],["value","1","class","slds-m-top--xx-small","style","max-width: 1.4rem",3,"name","ngModel","disabled","ngModelChange",4,"ngIf"],["value","1",1,"slds-m-top--xx-small",2,"max-width","1.4rem",3,"name","ngModel","disabled","ngModelChange"],[1,"slds-grid","slds-align-content-center","slds-p-vertical--x-small"],["system-title","LBL_NEW",1,"slds-button","slds-button--icon-small","slds-button--icon-border",3,"click"],["icon","add"]],template:function(e,t){1&e&&(c.YNc(0,el,1,2,"field-label",0),c.YNc(1,nl,2,4,"field-generic-display",1),c.YNc(2,cl,4,4,"div",2)),2&e&&(c.Q6J("ngIf",t.displayLabel),c.xp6(1),c.Q6J("ngIf",!t.isEditMode()),c.xp6(1),c.Q6J("ngIf",t.isEditMode()))},dependencies:[n.sg,n.O5,o.JJ,o.On,T.J,Bt.A,Rn.S,h.q,A.D,Xo,Wo],encapsulation:2})),fieldEmailAddresses})();var hl=s(2032);function ml(e,t){if(1&e&&c._UZ(0,"field-label",3),2&e){const e=c.oxw();c.Q6J("fieldname",e.fieldname)("fieldconfig",e.fieldconfig)}}function gl(e,t){if(1&e&&(c.TgZ(0,"li",8)(1,"a",9)(2,"span",10),c._uU(3),c.qZA()()()),2&e){const e=t.$implicit;c.xp6(3),c.hij(" ",e.email_address," ")}}function pl(e,t){if(1&e&&(c.TgZ(0,"field-generic-display",4)(1,"div",5)(2,"ul",6),c.YNc(3,gl,4,1,"li",7),c.qZA()()()),2&e){const e=c.oxw();c.Q6J("fielddisplayclass",e.fielddisplayclass)("fieldconfig",e.fieldconfig)("editable",e.isEditable()),c.xp6(3),c.Q6J("ngForOf",e.displayValue)}}function fl(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"a",18),c.NdJ("click",(function(t){c.CHM(e);const s=c.oxw(2);return c.KtG(s.showField("cc",t))})),c._uU(1,"Cc"),c.qZA()}}function bl(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"a",19),c.NdJ("click",(function(t){c.CHM(e);const s=c.oxw(2);return c.KtG(s.showField("bcc",t))})),c._uU(1,"Bcc"),c.qZA()}}function vl(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"field-email-recipients-input",20),c.NdJ("drop$",(function(t){c.CHM(e);const s=c.oxw(2);return c.KtG(s.handleDrop(t))})),c.qZA()}if(2&e){const e=c.oxw(2);c.Q6J("displayValue",e.displayValue)}}function Zl(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"field-email-recipients-input",21),c.NdJ("drop$",(function(t){c.CHM(e);const s=c.oxw(2);return c.KtG(s.handleDrop(t))})),c.qZA()}if(2&e){const e=c.oxw(2);c.Q6J("displayValue",e.displayValue)}}function _l(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"div",11),c.NdJ("click",(function(){c.CHM(e);const t=c.oxw();return c.KtG(t.setFocused())})),c.TgZ(1,"field-email-recipients-input",12),c.NdJ("drop$",(function(t){c.CHM(e);const s=c.oxw();return c.KtG(s.handleDrop(t))})),c.YNc(2,fl,2,0,"a",13),c.YNc(3,bl,2,0,"a",14),c.qZA(),c.YNc(4,vl,1,1,"field-email-recipients-input",15),c.YNc(5,Zl,1,1,"field-email-recipients-input",16),c._UZ(6,"field-messages",17),c.qZA()}if(2&e){const e=c.oxw();c.Q6J("ngClass",e.css_classes),c.xp6(1),c.Q6J("addressType",e.fieldconfig.addresstype||"from")("displayValue",e.displayValue),c.xp6(1),c.Q6J("ngIf","to"==e.fieldconfig.addresstype&&!e.showCCField),c.xp6(1),c.Q6J("ngIf","to"==e.fieldconfig.addresstype&&!e.showBCCField),c.xp6(1),c.Q6J("ngIf",e.focused&&e.showCCField),c.xp6(1),c.Q6J("ngIf",e.focused&&e.showBCCField),c.xp6(1),c.Q6J("fieldname",e.fieldname)}}let yl=(()=>{var e;class fieldEmailRecipients extends r.O{constructor(e,t,s,n,o,l,a,d,r,c,u,h){super(e,s,n,o,l),(0,i.Z)(this,"model",void 0),(0,i.Z)(this,"navigation",void 0),(0,i.Z)(this,"view",void 0),(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"router",void 0),(0,i.Z)(this,"modal",void 0),(0,i.Z)(this,"injector",void 0),(0,i.Z)(this,"backend",void 0),(0,i.Z)(this,"renderer",void 0),(0,i.Z)(this,"elementRef",void 0),(0,i.Z)(this,"zone",void 0),(0,i.Z)(this,"displayValue",[]),(0,i.Z)(this,"showCCField",!1),(0,i.Z)(this,"showBCCField",!1),(0,i.Z)(this,"focused",!1),(0,i.Z)(this,"dragging",!1),(0,i.Z)(this,"clickListener",void 0),this.model=e,this.navigation=t,this.view=s,this.language=n,this.metadata=o,this.router=l,this.modal=a,this.injector=d,this.backend=r,this.renderer=c,this.elementRef=u,this.zone=h}ngOnInit(){super.ngOnInit(),this.subscribeToDataChanges(),this.setInitialFieldValue()}get value(){return this.model.getField("recipient_addresses")}set value(e){this.model.setField("recipient_addresses",e)}subscribeToDataChanges(){this.subscriptions.add(this.model.observeFieldChanges("recipient_addresses").subscribe((()=>{Array.isArray(this.model.getField("recipient_addresses"))&&this.setDisplayValue()})))}setInitialFieldValue(){if(this.value||(this.value=[]),this.setDisplayValue(),this.model.getField("recipient_addresses").length>0||!0===this.fieldconfig.nodetermination||"to"!=this.fieldconfig.addresstype||!this.model.getField("parent_type")||!this.model.getField("parent_id"))return;let e=this.navigation.getRegisteredModel(this.model.getField("parent_id"),this.model.getField("parent_type"));if(e){let t=e.getField("email1");t&&(this.value.push({parent_type:e.module,parent_id:e.id,email_address:t,id:this.model.generateGuid(),address_type:"to"}),this.setDisplayValue())}else this.backend.getRequest(`module/${this.model.getField("parent_type")}/${this.model.getField("parent_id")}`).subscribe((e=>{e.email1&&(this.value.push({parent_type:this.model.getField("parent_type"),parent_id:this.model.getField("parent_id"),email_address:e.email1,id:this.model.generateGuid(),address_type:"to"}),this.setDisplayValue())}))}setDisplayValue(){const e=this.model.getField("recipient_addresses");e.forEach((e=>{"cc"==e.address_type&&(this.showCCField=!0),"bcc"==e.address_type&&(this.showBCCField=!0)}));const t=this.fieldconfig.addresstype??"from";this.displayValue=e.filter((e=>"to"==t?e.address_type in{to:!0,cc:!0,bcc:!0}:e.address_type==t))}showField(e,t){t.stopPropagation(),"cc"==e?this.showCCField=!0:this.showBCCField=!0,this.setFocused()}addDocumentClickListener(){this.clickListener=this.renderer.listen("document","click",(e=>{this.elementRef.nativeElement.contains(e.target)||(this.setDisplayValue(),this.focused=!1,this.clickListener(),this.clickListener=void 0)}))}setFocused(){this.setDisplayValue(),this.focused=!0,this.clickListener||this.addDocumentClickListener()}handleDrop(e){const t=this.value.findIndex((t=>t==e.item.data));e.previousContainer.data!=e.container.data&&this.value.some((t=>{if(e.item.data==t)return t.address_type=e.container.data,!0})),(0,l.bA)(this.value,t,e.currentIndex),this.setDisplayValue()}}return e=fieldEmailRecipients,(0,i.Z)(fieldEmailRecipients,"ɵfac",(function(t){return new(t||e)(c.Y36(w.o),c.Y36(hl.G),c.Y36(k.e),c.Y36(x.d),c.Y36(u.Pu),c.Y36(L.F0),c.Y36(I.o),c.Y36(c.zs3),c.Y36($.y),c.Y36(c.Qsj),c.Y36(c.SBq),c.Y36(c.R0b))})),(0,i.Z)(fieldEmailRecipients,"ɵcmp",c.Xpm({type:e,selectors:[["field-email-recipients"]],features:[c.qOj],decls:3,vars:3,consts:[[3,"fieldname","fieldconfig",4,"ngIf"],[3,"fielddisplayclass","fieldconfig","editable",4,"ngIf"],["cdkDropListGroup","","class","slds-form-element__control",3,"ngClass","click",4,"ngIf"],[3,"fieldname","fieldconfig"],[3,"fielddisplayclass","fieldconfig","editable"],[1,"slds-pill_container",2,"border","none"],["role","listbox",1,"slds-listbox","slds-listbox_horizontal","slds-size--1-of-1"],["class","slds-pill slds-pill_link",4,"ngFor","ngForOf"],[1,"slds-pill","slds-pill_link"],["href","javascript:void(0);",1,"slds-pill__action","slds-p-horizontal--xx-small"],[1,"slds-pill__label"],["cdkDropListGroup","",1,"slds-form-element__control",3,"ngClass","click"],[3,"addressType","displayValue","drop$"],["href","javascript:void(0)","class","slds-m-right--xx-small slds-input__icon slds-input__icon_right",3,"click",4,"ngIf"],["href","javascript:void(0)","class","slds-input__icon_right slds-input__icon",3,"click",4,"ngIf"],["addressType","cc",3,"displayValue","drop$",4,"ngIf"],["addressType","bcc",3,"displayValue","drop$",4,"ngIf"],[3,"fieldname"],["href","javascript:void(0)",1,"slds-m-right--xx-small","slds-input__icon","slds-input__icon_right",3,"click"],["href","javascript:void(0)",1,"slds-input__icon_right","slds-input__icon",3,"click"],["addressType","cc",3,"displayValue","drop$"],["addressType","bcc",3,"displayValue","drop$"]],template:function(e,t){1&e&&(c.YNc(0,ml,1,2,"field-label",0),c.YNc(1,pl,4,4,"field-generic-display",1),c.YNc(2,_l,7,8,"div",2)),2&e&&(c.Q6J("ngIf",t.displayLabel),c.xp6(1),c.Q6J("ngIf",!t.isEditMode()),c.xp6(1),c.Q6J("ngIf",t.isEditable()&&t.isEditMode()))},encapsulation:2})),fieldEmailRecipients})();const xl=["addAddressInput"];function wl(e,t){if(1&e&&c._UZ(0,"field-label",3),2&e){const e=c.oxw();c.Q6J("fieldname",e.fieldname)("fieldconfig",e.fieldconfig)}}function Tl(e,t){if(1&e&&(c.TgZ(0,"field-generic-display",4)(1,"span"),c._uU(2),c.qZA()()),2&e){const e=c.oxw();c.Q6J("fielddisplayclass",e.fielddisplayclass)("fieldconfig",e.fieldconfig)("editable",e.isEditable()),c.xp6(2),c.Oqu(e.firstAddress)}}function Cl(e,t){if(1&e&&(c.TgZ(0,"span",25),c._UZ(1,"system-icon",26),c.qZA()),2&e){const e=c.oxw().$implicit;c.xp6(1),c.Q6J("module",e.parent_type)}}function Al(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"li",13)(1,"span",20),c.YNc(2,Cl,2,1,"span",21),c.TgZ(3,"span",22),c._uU(4),c.qZA(),c.TgZ(5,"span",23)(6,"system-button-icon",24),c.NdJ("click",(function(t){const s=c.CHM(e).$implicit,i=c.oxw(2);return c.KtG(i.removeAddress(t,s.id))})),c.qZA()()()()}if(2&e){const e=t.$implicit;c.xp6(2),c.Q6J("ngIf",e.parent_id),c.xp6(2),c.Oqu(e.email_address),c.xp6(2),c.Q6J("icon","close")}}function kl(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"input",27),c.NdJ("ngModelChange",(function(t){c.CHM(e);const s=c.oxw(2);return c.KtG(s.addAddress=t)}))("blur",(function(){c.CHM(e);const t=c.oxw(2);return c.KtG(t.onBlur())}))("keyup",(function(t){c.CHM(e);const s=c.oxw(2);return c.KtG(s.onKeyUp(t))})),c.qZA()}if(2&e){const e=c.oxw(2);c.Q6J("ngModel",e.addAddress)("title",e.language.getLabel("LBL_ADD_EMAILADDRESS"))("placeholder",e.language.getLabel("LBL_ADD_EMAILADDRESS"))}}function Ll(e,t){1&e&&c._UZ(0,"system-spinner",28)}function Il(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"li",29),c.NdJ("click",(function(){const t=c.CHM(e).$implicit,s=c.oxw(2);return c.KtG(s.selectAddress(t))})),c.TgZ(1,"div",30),c._UZ(2,"system-icon",31),c.TgZ(3,"div",32)(4,"span",33),c._uU(5),c.qZA()()()()}if(2&e){const e=t.$implicit;c.xp6(2),c.Q6J("module",e.module),c.xp6(3),c.AsE("",e.email_address," • ",e.summary_text,"")}}const Ml=function(e){return{"slds-is-open":e}};function Sl(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"div",5)(1,"div",6)(2,"div",7)(3,"div",8)(4,"div",9)(5,"div",10),c.NdJ("click",(function(){c.CHM(e);const t=c.oxw();return c.KtG(t.onClick())})),c.TgZ(6,"ul",11),c.YNc(7,Al,7,3,"li",12),c.TgZ(8,"li",13),c.YNc(9,kl,1,3,"input",14),c.qZA()()()(),c.TgZ(10,"div",15),c.YNc(11,Ll,1,0,"system-spinner",16),c.TgZ(12,"ul",17),c.YNc(13,Il,6,3,"li",18),c.qZA()()()()(),c._UZ(14,"field-messages",19),c.qZA()}if(2&e){const e=c.oxw();c.Q6J("ngClass",e.css_classes),c.xp6(3),c.Q6J("ngClass",c.VKq(7,Ml,e.showSearchResults)),c.xp6(4),c.Q6J("ngForOf",e.addrArray),c.xp6(2),c.Q6J("ngIf",e.isAdding),c.xp6(2),c.Q6J("ngIf",e.searchResultsLoading),c.xp6(2),c.Q6J("ngForOf",e.searchResults),c.xp6(1),c.Q6J("fieldname",e.fieldname)}}let Jl=(()=>{var e;class fieldEmailRecipientsShort extends r.O{constructor(e,t,s,n,o,l,a,d){super(e,t,s,n,o),(0,i.Z)(this,"model",void 0),(0,i.Z)(this,"view",void 0),(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"router",void 0),(0,i.Z)(this,"backend",void 0),(0,i.Z)(this,"renderer",void 0),(0,i.Z)(this,"elementRef",void 0),(0,i.Z)(this,"isAdding",!1),(0,i.Z)(this,"addAddress",""),(0,i.Z)(this,"searchTimeOut",void 0),(0,i.Z)(this,"showSearchResults",!1),(0,i.Z)(this,"searchResults",[]),(0,i.Z)(this,"searchResultsLoading",!1),(0,i.Z)(this,"clickListener",void 0),(0,i.Z)(this,"addAddressInput",void 0),this.model=e,this.view=t,this.language=s,this.metadata=n,this.router=o,this.backend=l,this.renderer=a,this.elementRef=d}get firstAddress(){return this.addrArray&&this.addrArray.length>0?this.addrArray[0].email_address:""}get addresstype(){return this.fieldconfig.addresstype?this.fieldconfig.addresstype:"from"}get addrArray(){let e=[];if(this.model.getField("recipient_addresses"))for(let t of this.model.getField("recipient_addresses"))t.address_type==this.addresstype&&"1"!=t.deleted&&e.push(t);return e}onClick(){this.isAdding=!0}onBlur(){""==this.addAddress&&(this.isAdding=!1)}removeAddress(e,t){e.preventDefault(),e.stopPropagation();for(let e of this.model.getField("recipient_addresses"))if(e.id==t)return void(e.deleted="1")}onKeyUp(e){switch(e.key){case"ArrowDown":case"ArrowUp":break;case"Enter":this.searchTimeOut&&window.clearTimeout(this.searchTimeOut),this.validateEmail(this.addAddress)?(this.model.getField("recipient_addresses")||this.model.setField("recipient_addresses",[]),this.model.getField("recipient_addresses").push({id:this.model.generateGuid(),address_type:this.addresstype,email_address:this.addAddress}),this.addAddress="",this.closeSearchDialog()):this.doSearch();break;default:this.searchTimeOut&&window.clearTimeout(this.searchTimeOut),this.searchTimeOut=window.setTimeout((()=>this.doSearch()),1e3)}}closeSearchDialog(){this.clickListener(),this.searchResults=[],this.showSearchResults=!1}doSearch(){""!==this.addAddress&&(this.searchResults=[],this.showSearchResults=!0,this.searchResultsLoading=!0,this.clickListener=this.renderer.listen("document","click",(e=>this.handleClick(e))),this.backend.getRequest("module/EmailAddresses/"+this.addAddress).subscribe((e=>{e.length>0?this.searchResults=e:this.closeSearchDialog(),this.searchResultsLoading=!1})))}handleClick(e){this.elementRef.nativeElement.contains(e.target)||(this.closeSearchDialog(),this.addAddress="",this.isAdding=!1)}selectAddress(e){this.model.getField("recipient_addresses")||this.model.setField("recipient_addresses",[]),this.model.getField("recipient_addresses").push({id:this.model.generateGuid(),address_type:this.addresstype,email_address:e.email_address,email_address_id:e.email_address_id,parent_type:e.module,parent_id:e.id}),this.addAddress="",this.isAdding=!1,this.closeSearchDialog()}validateEmail(e){return/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(String(e).toLowerCase())}}return e=fieldEmailRecipientsShort,(0,i.Z)(fieldEmailRecipientsShort,"ɵfac",(function(t){return new(t||e)(c.Y36(w.o),c.Y36(k.e),c.Y36(x.d),c.Y36(u.Pu),c.Y36(L.F0),c.Y36($.y),c.Y36(c.Qsj),c.Y36(c.SBq))})),(0,i.Z)(fieldEmailRecipientsShort,"ɵcmp",c.Xpm({type:e,selectors:[["ng-component"]],viewQuery:function(e,t){if(1&e&&c.Gf(xl,7,c.s_b),2&e){let e;c.iGM(e=c.CRH())&&(t.addAddressInput=e.first)}},features:[c.qOj],decls:3,vars:3,consts:[[3,"fieldname","fieldconfig",4,"ngIf"],[3,"fielddisplayclass","fieldconfig","editable",4,"ngIf"],["class","slds-form-element__control slds-grid slds-grid--align-spread slds-p-around--xx-small",3,"ngClass",4,"ngIf"],[3,"fieldname","fieldconfig"],[3,"fielddisplayclass","fieldconfig","editable"],[1,"slds-form-element__control","slds-grid","slds-grid--align-spread","slds-p-around--xx-small",3,"ngClass"],[1,"slds-form-element__control","slds-size--1-of-1"],[1,"slds-combobox_container"],["role","combobox",1,"slds-combobox","slds-dropdown-trigger","slds-dropdown-trigger_click",3,"ngClass"],["role","none",1,"slds-combobox__form-element","slds-input-has-icon","slds-input-has-icon_right"],[1,"slds-pill_container",3,"click"],["role","listbox",1,"slds-listbox","slds-listbox_horizontal"],["class","slds-listbox-item","role","presentation",4,"ngFor","ngForOf"],["role","presentation",1,"slds-listbox-item"],["system-autofocus","","type","text","style","min-width: 12rem;","class","slds-p-horizontal--x-small",3,"ngModel","title","placeholder","ngModelChange","blur","keyup",4,"ngIf"],["role","listbox",1,"slds-dropdown","slds-dropdown_fluid"],["size","12",4,"ngIf"],["role","presentation",1,"slds-listbox","slds-listbox_vertical"],["role","presentation","class","slds-listbox__item",3,"click",4,"ngFor","ngForOf"],[3,"fieldname"],["role","option",1,"slds-pill"],["class","slds-icon_container",4,"ngIf"],[1,"slds-pill__label"],[1,"slds-icon_container","slds-pill__remove"],[3,"icon","click"],[1,"slds-icon_container"],["size","x-small","divClass","slds-p-right--x-small",3,"module"],["system-autofocus","","type","text",1,"slds-p-horizontal--x-small",2,"min-width","12rem",3,"ngModel","title","placeholder","ngModelChange","blur","keyup"],["size","12"],["role","presentation",1,"slds-listbox__item",3,"click"],[1,"slds-listbox__option","slds-grid","slds-grid--vertical-align-center","slds-p-around--x-small"],["size","x-small",1,"slds-p-right--x-small",3,"module"],[1,"slds-media__body"],[1,"slds-listbox__option-text","slds-listbox__option-text_entity"]],template:function(e,t){1&e&&(c.YNc(0,wl,1,2,"field-label",0),c.YNc(1,Tl,3,4,"field-generic-display",1),c.YNc(2,Sl,15,9,"div",2)),2&e&&(c.Q6J("ngIf",t.displayLabel),c.xp6(1),c.Q6J("ngIf",!t.isEditMode()),c.xp6(1),c.Q6J("ngIf",t.isEditable()&&t.isEditMode()))},dependencies:[n.mk,n.sg,n.O5,o.Fj,o.JJ,o.On,T.J,hs.f,Go.W,Po.m,h.q,A.D,J.a],styles:["input[_ngcontent-%COMP%], input[_ngcontent-%COMP%]:focus{border:none;outline:none}"]})),fieldEmailRecipientsShort})();function Ol(e,t){if(1&e&&c._UZ(0,"field-label",3),2&e){const e=c.oxw();c.Q6J("fieldname",e.fieldname)("fieldconfig",e.fieldconfig)}}function Nl(e,t){if(1&e&&(c.TgZ(0,"field-generic-display",4),c._uU(1),c.qZA()),2&e){const e=c.oxw();c.Q6J("fielddisplayclass",e.fielddisplayclass)("fieldconfig",e.fieldconfig)("editable",e.isEditable()),c.xp6(1),c.hij(" ",e.getCurrencySymbol(),"\n")}}function Fl(e,t){if(1&e&&(c.TgZ(0,"option",10),c._uU(1),c.qZA()),2&e){const e=t.$implicit;c.Q6J("value",e.id),c.xp6(1),c.AsE("",e.iso," (",e.symbol,") ")}}function ql(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"div",5)(1,"div",6)(2,"select",7),c.NdJ("ngModelChange",(function(t){c.CHM(e);const s=c.oxw();return c.KtG(s.value=t)})),c.YNc(3,Fl,2,3,"option",8),c.qZA()(),c._UZ(4,"field-messages",9),c.qZA()}if(2&e){const e=c.oxw();c.Q6J("ngClass",e.getFieldClass()),c.xp6(2),c.Q6J("ngModel",e.value),c.xp6(1),c.Q6J("ngForOf",e.currencies),c.xp6(1),c.Q6J("fieldname",e.fieldname)}}let El=(()=>{var e;class fieldCurrencies extends r.O{constructor(e,t,s,n,o,l){super(e,t,s,n,o),(0,i.Z)(this,"model",void 0),(0,i.Z)(this,"view",void 0),(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"router",void 0),(0,i.Z)(this,"currency",void 0),(0,i.Z)(this,"currencies",[]),this.model=e,this.view=t,this.language=s,this.metadata=n,this.router=o,this.currency=l,this.currencies=this.currency.getCurrencies()}getCurrencySymbol(){let e=-99;return this.model.getField(this.fieldname)&&(e=this.model.getField(this.fieldname)),this.currency.getCurrencySmbol(e)}}return e=fieldCurrencies,(0,i.Z)(fieldCurrencies,"ɵfac",(function(t){return new(t||e)(c.Y36(w.o),c.Y36(k.e),c.Y36(x.d),c.Y36(u.Pu),c.Y36(L.F0),c.Y36(Ae.A))})),(0,i.Z)(fieldCurrencies,"ɵcmp",c.Xpm({type:e,selectors:[["field-currencies"]],features:[c.qOj],decls:3,vars:3,consts:[[3,"fieldname","fieldconfig",4,"ngIf"],[3,"fielddisplayclass","fieldconfig","editable",4,"ngIf"],["class","slds-form-element__control",3,"ngClass",4,"ngIf"],[3,"fieldname","fieldconfig"],[3,"fielddisplayclass","fieldconfig","editable"],[1,"slds-form-element__control",3,"ngClass"],[1,"slds-select_container","slds-m-vertical--xx-small"],[1,"slds-select",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[3,"fieldname"],[3,"value"]],template:function(e,t){1&e&&(c.YNc(0,Ol,1,2,"field-label",0),c.YNc(1,Nl,2,4,"field-generic-display",1),c.YNc(2,ql,5,4,"div",2)),2&e&&(c.Q6J("ngIf",t.displayLabel),c.xp6(1),c.Q6J("ngIf",!t.isEditMode()),c.xp6(1),c.Q6J("ngIf",t.isEditable()&&t.isEditMode()))},dependencies:[n.mk,n.sg,n.O5,o.YN,o.Kr,o.EJ,o.JJ,o.On,h.q,A.D,J.a],encapsulation:2})),fieldCurrencies})();var Yl=s(1e3);function Dl(e,t){if(1&e&&c._UZ(0,"field-label",3),2&e){const e=c.oxw();c.Q6J("fieldname",e.fieldname)("fieldconfig",e.fieldconfig)}}function Ql(e,t){if(1&e&&(c.TgZ(0,"field-generic-display",4)(1,"div",5),c._uU(2),c.qZA()()),2&e){const e=c.oxw();c.Q6J("fielddisplayclass",e.fielddisplayclass)("fieldconfig",e.fieldconfig)("editable",e.isEditable()),c.xp6(1),c.Q6J("id",e.value),c.xp6(1),c.Oqu(e.companyName)}}function Ul(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"div",6)(1,"system-input-companycodes",7),c.NdJ("ngModelChange",(function(t){c.CHM(e);const s=c.oxw();return c.KtG(s.value=t)})),c.qZA(),c._UZ(2,"field-messages",8),c.qZA()}if(2&e){const e=c.oxw();c.Q6J("ngClass",e.getFieldClass()),c.xp6(1),c.Q6J("ngModel",e.value),c.xp6(1),c.Q6J("fieldname",e.fieldname)}}let Rl=(()=>{var e;class fieldCompanies extends r.O{constructor(e,t,s,n,o,l,a,d){super(e,t,s,n,o),(0,i.Z)(this,"model",void 0),(0,i.Z)(this,"view",void 0),(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"router",void 0),(0,i.Z)(this,"backend",void 0),(0,i.Z)(this,"configuration",void 0),(0,i.Z)(this,"userpreferences",void 0),this.model=e,this.view=t,this.language=s,this.metadata=n,this.router=o,this.backend=l,this.configuration=a,this.userpreferences=d}ngOnInit(){this.setDefault()}setDefault(){if(this.view.isEditMode()&&!this.model.getField(this.fieldname))if(this.userpreferences.companyCodeId)this.value=this.userpreferences.companyCodeId;else{let e=this.configuration.getData("companycodes");e&&e.length>0&&(e.sort(((e,t)=>e.name>t.name?-1:1)),this.value=e[0].id)}}get companyName(){let e="";return this.configuration.getData("companycodes").some((t=>{if(t.id==this.model.getField(this.fieldname))return e=t.name,!0})),e}}return e=fieldCompanies,(0,i.Z)(fieldCompanies,"ɵfac",(function(t){return new(t||e)(c.Y36(w.o),c.Y36(k.e),c.Y36(x.d),c.Y36(u.Pu),c.Y36(L.F0),c.Y36($.y),c.Y36(ee.C),c.Y36(Ze.z))})),(0,i.Z)(fieldCompanies,"ɵcmp",c.Xpm({type:e,selectors:[["field-companies"]],features:[c.qOj],decls:3,vars:3,consts:[[3,"fieldname","fieldconfig",4,"ngIf"],[3,"fielddisplayclass","fieldconfig","editable",4,"ngIf"],["class","slds-p-vertical--xx-small",3,"ngClass",4,"ngIf"],[3,"fieldname","fieldconfig"],[3,"fielddisplayclass","fieldconfig","editable"],["system-model-popover","","module","CompanyCodes",3,"id"],[1,"slds-p-vertical--xx-small",3,"ngClass"],[3,"ngModel","ngModelChange"],[3,"fieldname"]],template:function(e,t){1&e&&(c.YNc(0,Dl,1,2,"field-label",0),c.YNc(1,Ql,3,5,"field-generic-display",1),c.YNc(2,Ul,3,3,"div",2)),2&e&&(c.Q6J("ngIf",t.displayLabel),c.xp6(1),c.Q6J("ngIf",!t.isEditMode()),c.xp6(1),c.Q6J("ngIf",t.isEditable()&&t.isEditMode()))},dependencies:[n.mk,n.O5,o.JJ,o.On,Yl.x,gs.g,h.q,A.D,J.a],encapsulation:2})),fieldCompanies})();var jl=s(494);function Bl(e,t){if(1&e&&c._UZ(0,"field-label",3),2&e){const e=c.oxw();c.Q6J("fieldname",e.fieldname)("fieldconfig",e.fieldconfig)}}function Gl(e,t){if(1&e&&c._UZ(0,"system-tooltip",8),2&e){const e=c.oxw(2);c.Q6J("tooltiptext",e.vatInfo)}}function Pl(e,t){if(1&e&&(c.TgZ(0,"field-generic-display",4)(1,"div",5)(2,"div",6)(3,"span"),c._uU(4),c.qZA()(),c.YNc(5,Gl,1,1,"system-tooltip",7),c.qZA()()),2&e){const e=c.oxw();c.Q6J("fielddisplayclass",e.fielddisplayclass)("editable",e.isEditable())("fieldconfig",e.fieldconfig)("fieldid",e.fieldid),c.xp6(4),c.Oqu(e.value),c.xp6(1),c.Q6J("ngIf",e.isvalid)}}function Hl(e,t){if(1&e&&c._UZ(0,"system-tooltip",8),2&e){const e=c.oxw(3);c.Q6J("tooltiptext",e.vatInfo)}}function zl(e,t){if(1&e){const e=c.EpF();c.ynx(0),c.TgZ(1,"input",14,15),c.NdJ("ngModelChange",(function(t){c.CHM(e);const s=c.oxw(2);return c.KtG(s.value=t)})),c.qZA(),c.TgZ(3,"div",16),c.YNc(4,Hl,1,1,"system-tooltip",7),c.TgZ(5,"button",17),c.NdJ("click",(function(){c.CHM(e);const t=c.oxw(2);return c.KtG(t.validate())})),c._UZ(6,"system-label",18),c.qZA()(),c.BQk()}if(2&e){const e=c.oxw(2);c.xp6(1),c.Q6J("ngModel",e.value),c.xp6(3),c.Q6J("ngIf",e.isvalid),c.xp6(1),c.Q6J("disabled",!e.cancheck)}}function Vl(e,t){if(1&e&&c._UZ(0,"input",19,15),2&e){const e=c.oxw(2);c.s9C("value",e.language.getLabel("LBL_VALIDATING"))}}function Kl(e,t){if(1&e&&(c.TgZ(0,"div",9)(1,"div",10),c.YNc(2,zl,7,3,"ng-container",11),c.YNc(3,Vl,2,1,"ng-template",null,12,c.W1O),c.qZA(),c._UZ(5,"field-messages",13),c.qZA()),2&e){const e=c.MAs(4),t=c.oxw();c.Q6J("ngClass",t.getFieldClass()),c.xp6(2),c.Q6J("ngIf",!t.isvalidating)("ngIfElse",e),c.xp6(3),c.Q6J("fieldname",t.fieldname)}}let $l=(()=>{var e;class fieldVat extends r.O{constructor(e,t,s,n,o,l,a){super(e,t,s,n,o),(0,i.Z)(this,"model",void 0),(0,i.Z)(this,"view",void 0),(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"router",void 0),(0,i.Z)(this,"backend",void 0),(0,i.Z)(this,"toast",void 0),(0,i.Z)(this,"isvalidating",!1),this.model=e,this.view=t,this.language=s,this.metadata=n,this.router=o,this.backend=l,this.toast=a}get vatDetailsField(){return this.fieldconfig.vatdetails?this.fieldconfig.vatdetails:"vat_details"}validate(){this.isvalidating=!0,this.backend.getRequest(`common/VIES/${this.value}`).subscribe((e=>{"success"==e.status?(!0!==e.data.valid&&this.toast.sendToast(this.language.getLabel("ERR_INVALID_VAT"),"error"),this.model.setField("vat_details",JSON.stringify(e.data))):this.toast.sendToast(this.language.getLabel("ERR_CHECK_VAT"),"error"),this.isvalidating=!1}),(()=>{this.isvalidating=!1,this.toast.sendToast(this.language.getLabel("ERR_CHECK_VAT"),"error")}))}get cancheck(){return this.value&&this.value.length>3}get isvalid(){if(!this.model.getField(this.vatDetailsField))return!1;return JSON.parse(this.model.getField(this.vatDetailsField)).valid}get vatInfo(){let e=JSON.parse(this.model.getField(this.vatDetailsField));return e.name+"\n"+e.address}}return e=fieldVat,(0,i.Z)(fieldVat,"ɵfac",(function(t){return new(t||e)(c.Y36(w.o),c.Y36(k.e),c.Y36(x.d),c.Y36(u.Pu),c.Y36(L.F0),c.Y36($.y),c.Y36(X.A))})),(0,i.Z)(fieldVat,"ɵcmp",c.Xpm({type:e,selectors:[["field-vat"]],features:[c.qOj],decls:3,vars:3,consts:[[3,"fieldname","fieldconfig",4,"ngIf"],["field-generic-display-notruncate","",3,"fielddisplayclass","editable","fieldconfig","fieldid",4,"ngIf"],["class","slds-form-element__control slds-grid slds-grid--align-spread",3,"ngClass",4,"ngIf"],[3,"fieldname","fieldconfig"],["field-generic-display-notruncate","",3,"fielddisplayclass","editable","fieldconfig","fieldid"],[1,"slds-size--1-of-1","slds-grid","slds-grid--vertical-align-center","slds-grid--align-spread"],[1,"slds-grow","slds-truncate"],["class","slds-m-left--x-small",3,"tooltiptext",4,"ngIf"],[1,"slds-m-left--x-small",3,"tooltiptext"],[1,"slds-form-element__control","slds-grid","slds-grid--align-spread",3,"ngClass"],[1,"slds-grid","slds-size--1-of-1"],[4,"ngIf","ngIfElse"],["validating",""],[3,"fieldname"],["type","text",1,"slds-input",3,"ngModel","ngModelChange"],["focus",""],[1,"slds-col_bump-left","slds-grid","slds-grid--vertical-align-center"],[1,"slds-button","slds-button--neutral","slds-m-left--x-small",3,"disabled","click"],["label","LBL_CHECK"],["type","text","disabled","",1,"slds-input","slds-size--1-of-1",3,"value"]],template:function(e,t){1&e&&(c.YNc(0,Bl,1,2,"field-label",0),c.YNc(1,Pl,6,6,"field-generic-display",1),c.YNc(2,Kl,6,4,"div",2)),2&e&&(c.Q6J("ngIf",t.displayLabel),c.xp6(1),c.Q6J("ngIf",!t.isEditMode()),c.xp6(1),c.Q6J("ngIf",t.isEditable()&&t.isEditMode()))},dependencies:[n.mk,n.O5,o.Fj,o.JJ,o.On,se._,jl.S,h.q,A.D,J.a],encapsulation:2})),fieldVat})();var Xl=s(2067);let Wl=(()=>{var e;class fieldBarcodeRenderer{constructor(e,t){(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"libloader",void 0),(0,i.Z)(this,"code",""),(0,i.Z)(this,"fieldId",""),this.metadata=e,this.libloader=t,this.libloader.loadLib("js-barcode").subscribe((e=>{JsBarcode("#"+this.fieldId,this.code,{width:1,height:15,displayValue:!1})}))}ngOnChanges(){if(!this.metadata.isLibLoaded("js-barcode"))return!1;document.getElementById(this.fieldId)&&JsBarcode("#"+this.fieldId,this.code,{width:1,height:15,displayValue:!1})}}return e=fieldBarcodeRenderer,(0,i.Z)(fieldBarcodeRenderer,"ɵfac",(function(t){return new(t||e)(c.Y36(u.Pu),c.Y36(Xl.$))})),(0,i.Z)(fieldBarcodeRenderer,"ɵcmp",c.Xpm({type:e,selectors:[["field-barcode-renderer"]],inputs:{code:"code",fieldId:"fieldId"},features:[c.TTD],decls:1,vars:1,consts:[[3,"id"]],template:function(e,t){1&e&&(c.O4$(),c._UZ(0,"svg",0)),2&e&&c.Q6J("id",t.fieldId)},encapsulation:2})),fieldBarcodeRenderer})();function ea(e,t){if(1&e&&c._UZ(0,"field-label",8),2&e){const e=c.oxw();c.Q6J("fieldname",e.fieldname)("fieldconfig",e.fieldconfig)}}function ta(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"input",9),c.NdJ("ngModelChange",(function(t){c.CHM(e);const s=c.oxw();return c.KtG(s.value=t)})),c.qZA()}if(2&e){const e=c.oxw();c.Q6J("ngModel",e.value)}}function sa(e,t){if(1&e&&(c.TgZ(0,"div",10),c._uU(1),c.qZA()),2&e){const e=c.oxw();c.xp6(1),c.Oqu(e.value)}}let ia=(()=>{var e;class fieldBarcode extends r.O{constructor(e,t,s,n,o){super(e,t,s,n,o),(0,i.Z)(this,"model",void 0),(0,i.Z)(this,"view",void 0),(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"router",void 0),this.model=e,this.view=t,this.language=s,this.metadata=n,this.router=o}isEditMode(){return this.view.isEditMode()&&this.isEditable()}isEditable(){return this.view.isEditable&&!this.fieldconfig.readonly}}return e=fieldBarcode,(0,i.Z)(fieldBarcode,"ɵfac",(function(t){return new(t||e)(c.Y36(w.o),c.Y36(k.e),c.Y36(x.d),c.Y36(u.Pu),c.Y36(L.F0))})),(0,i.Z)(fieldBarcode,"ɵcmp",c.Xpm({type:e,selectors:[["field-barcode"]],features:[c.qOj],decls:8,vars:5,consts:[[3,"fieldname","fieldconfig",4,"ngIf"],[1,"slds-form-element__control","slds-p-top--xx-small"],[1,"slds-grid","slds-grid--align-spread","slds-grid_vertical-align-center"],[1,"slds-size--1-of-2"],["class","slds-input","type","text",3,"ngModel","ngModelChange",4,"ngIf"],["class","slds-truncate",4,"ngIf"],[1,"slds-size--1-of-2","slds-text-align--right"],[3,"code","fieldId"],[3,"fieldname","fieldconfig"],["type","text",1,"slds-input",3,"ngModel","ngModelChange"],[1,"slds-truncate"]],template:function(e,t){1&e&&(c.YNc(0,ea,1,2,"field-label",0),c.TgZ(1,"div",1)(2,"div",2)(3,"div",3),c.YNc(4,ta,1,1,"input",4),c.YNc(5,sa,2,1,"div",5),c.qZA(),c.TgZ(6,"div",6),c._UZ(7,"field-barcode-renderer",7),c.qZA()()()),2&e&&(c.Q6J("ngIf",t.displayLabel),c.xp6(4),c.Q6J("ngIf",t.isEditMode()),c.xp6(1),c.Q6J("ngIf",!t.isEditMode()),c.xp6(2),c.Q6J("code",t.value)("fieldId","id_"+t.fieldid))},dependencies:[n.O5,o.Fj,o.JJ,o.On,h.q,Wl],encapsulation:2})),fieldBarcode})();function na(e,t){if(1&e&&c._UZ(0,"field-label",3),2&e){const e=c.oxw();c.Q6J("fieldname",e.fieldname)("fieldconfig",e.fieldconfig)}}function oa(e,t){1&e&&c._UZ(0,"system-stencil")}function la(e,t){if(1&e&&c._UZ(0,"system-utility-icon",13),2&e){const e=c.oxw(4);c.Q6J("icon",e.ratingIcon)("size","x-small")}}function aa(e,t){if(1&e&&(c.TgZ(0,"span"),c._uU(1),c.qZA()),2&e){const e=c.oxw(4);c.xp6(1),c.hij(" (",e.value,")")}}function da(e,t){if(1&e&&(c.TgZ(0,"div",10),c.YNc(1,la,1,2,"system-utility-icon",11),c.YNc(2,aa,2,1,"span",12),c.qZA()),2&e){const e=c.oxw(3);c.xp6(1),c.Q6J("ngIf",e.value),c.xp6(1),c.Q6J("ngIf",e.value)}}function ra(e,t){if(1&e&&(c.TgZ(0,"span"),c._uU(1),c.qZA()),2&e){const e=c.oxw(4);c.xp6(1),c.hij(" (",e.value,")")}}function ca(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"div",10)(1,"a",14),c.NdJ("click",(function(){c.CHM(e);const t=c.oxw(3);return c.KtG(t.goRecord())})),c._UZ(2,"system-utility-icon",13),c.YNc(3,ra,2,1,"span",12),c.qZA()()}if(2&e){const e=c.oxw(3);c.xp6(2),c.Q6J("icon",e.ratingIcon)("size","x-small"),c.xp6(1),c.Q6J("ngIf",e.value)}}function ua(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"button",15),c.NdJ("click",(function(){c.CHM(e);const t=c.oxw(3);return c.KtG(t.setEditMode())})),c._UZ(1,"system-button-icon",16),c.qZA()}2&e&&(c.xp6(1),c.Q6J("icon","edit"))}function ha(e,t){if(1&e&&(c.TgZ(0,"div",7),c.YNc(1,da,3,2,"div",8),c.YNc(2,ca,4,3,"div",8),c.YNc(3,ua,2,1,"button",9),c.qZA()),2&e){const e=c.oxw(2);c.xp6(1),c.Q6J("ngIf",!e.displayLink()),c.xp6(1),c.Q6J("ngIf",e.displayLink()),c.xp6(1),c.Q6J("ngIf",e.isEditable())}}function ma(e,t){if(1&e&&(c.TgZ(0,"div",4),c.YNc(1,oa,1,0,"system-stencil",5),c.YNc(2,ha,4,3,"ng-template",null,6,c.W1O),c.qZA()),2&e){const e=c.MAs(3),t=c.oxw();c.Q6J("ngClass",t.fielddisplayclass),c.xp6(1),c.Q6J("ngIf",t.model.isLoading)("ngIfElse",e)}}function ga(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"div",22)(1,"div",23),c.NdJ("click",(function(){const t=c.CHM(e).$implicit,s=c.oxw(2);return c.KtG(s.setRatingValue(t))})),c._UZ(2,"input",24),c.TgZ(3,"label",25),c._UZ(4,"span",26),c.qZA()()()}if(2&e){const e=t.$implicit,s=c.oxw(2);c.xp6(2),c.Q6J("checked",e==s.value),c.xp6(1),c.uIk("for",s.fieldid+e)}}function pa(e,t){if(1&e&&(c.TgZ(0,"div",17)(1,"div",18),c._UZ(2,"system-utility-icon",19),c.YNc(3,ga,5,2,"div",20),c._UZ(4,"system-utility-icon",13),c.qZA(),c._UZ(5,"field-messages",21),c.qZA()),2&e){const e=c.oxw();c.Q6J("ngClass",e.css_classes),c.xp6(2),c.Q6J("icon","sentiment_negative")("size","xx-small"),c.xp6(1),c.Q6J("ngForOf",e.options),c.xp6(1),c.Q6J("icon","smiley_and_people")("size","xx-small"),c.xp6(1),c.Q6J("fieldname",e.fieldname)}}let fa=(()=>{var e;class fieldRating extends r.O{constructor(e,t,s,n,o){super(e,t,s,n,o),(0,i.Z)(this,"model",void 0),(0,i.Z)(this,"view",void 0),(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"router",void 0),(0,i.Z)(this,"options",["1","2","3","4","5"]),this.model=e,this.view=t,this.language=s,this.metadata=n,this.router=o}setRatingValue(e){this.value==e?this.value="":this.value=e}get ratingIcon(){return 3==parseInt(this.value,10)?"sentiment_neutral":parseInt(this.value,10)>3?"smiley_and_people":parseInt(this.value,10)<3?"sentiment_negative":void 0}}return e=fieldRating,(0,i.Z)(fieldRating,"ɵfac",(function(t){return new(t||e)(c.Y36(w.o),c.Y36(k.e),c.Y36(x.d),c.Y36(u.Pu),c.Y36(L.F0))})),(0,i.Z)(fieldRating,"ɵcmp",c.Xpm({type:e,selectors:[["field-rating"]],features:[c.qOj],decls:3,vars:3,consts:[[3,"fieldname","fieldconfig",4,"ngIf"],[3,"ngClass",4,"ngIf"],["class","slds-form-element__control slds-grid slds-grid--align-spread slds-p-around--xx-small",3,"ngClass",4,"ngIf"],[3,"fieldname","fieldconfig"],[3,"ngClass"],[4,"ngIf","ngIfElse"],["displaycontent",""],[1,"slds-grid","slds-grid--vertical-align-center","slds-grid--align-spread"],["class","slds-truncate",4,"ngIf"],["style","float: right","class","slds-button slds-button--icon slds-m-left--xx-small",3,"click",4,"ngIf"],[1,"slds-truncate"],[3,"icon","size",4,"ngIf"],[4,"ngIf"],[3,"icon","size"],["href","javascript:void(0);",3,"click"],[1,"slds-button","slds-button--icon","slds-m-left--xx-small",2,"float","right",3,"click"],[3,"icon"],[1,"slds-form-element__control","slds-grid","slds-grid--align-spread","slds-p-around--xx-small",3,"ngClass"],[1,"slds-grid","slds-grid--vertical-align-center"],[1,"slds-p-right--x-small",3,"icon","size"],["class","slds-form-element__control",4,"ngFor","ngForOf"],[3,"fieldname"],[1,"slds-form-element__control"],[1,"slds-radio",3,"click"],["type","radio","id","fieldid + option",3,"checked"],[1,"slds-radio__label"],[1,"slds-radio_faux"]],template:function(e,t){1&e&&(c.YNc(0,na,1,2,"field-label",0),c.YNc(1,ma,4,3,"div",1),c.YNc(2,pa,6,7,"div",2)),2&e&&(c.Q6J("ngIf",t.displayLabel),c.xp6(1),c.Q6J("ngIf",!t.isEditMode()),c.xp6(1),c.Q6J("ngIf",t.isEditable()&&t.isEditMode()))},dependencies:[n.mk,n.sg,n.O5,T.J,Xe.B,M.r,h.q,J.a],encapsulation:2})),fieldRating})();var ba=s(3026),va=s(6930),Za=s(8016);const _a=["popover"];function ya(e,t){1&e&&c._UZ(0,"system-spinner")}function xa(e,t){if(1&e&&(c.TgZ(0,"div",14)(1,"dl")(2,"dt"),c._UZ(3,"field-label",15),c.qZA(),c.TgZ(4,"dd"),c._UZ(5,"field-container",16),c.qZA()()()),2&e){const e=t.$implicit;c.xp6(3),c.Q6J("fieldname",e.field)("fieldconfig",e.fieldconfig),c.xp6(2),c.Q6J("field",e.field)("fieldconfig",e.fieldconfig)("fielddisplayclass","slds-truncate")}}let wa=(()=>{var e;class fieldModelFooterPopover{constructor(e,t,s){(0,i.Z)(this,"model",void 0),(0,i.Z)(this,"view",void 0),(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"popovermodule",""),(0,i.Z)(this,"popoverid",""),(0,i.Z)(this,"popoverside","right"),(0,i.Z)(this,"styles",null),(0,i.Z)(this,"mouseover",!1),(0,i.Z)(this,"hidePopoverTimeout",{}),(0,i.Z)(this,"popover",void 0),(0,i.Z)(this,"parentElementRef",null),(0,i.Z)(this,"self",null),(0,i.Z)(this,"modelIsLoading",!1),(0,i.Z)(this,"fields",[]),this.model=e,this.view=t,this.metadata=s}goDetail(){this.model.goDetail()}onMouseOver(){this.mouseover=!0,this.hidePopoverTimeout&&window.clearTimeout(this.hidePopoverTimeout)}onMouseOut(){this.mouseover=!1,this.self.destroy()}get popoverStyle(){let e=this.parentElementRef.nativeElement.getBoundingClientRect(),t=this.popover.element.nativeElement.getBoundingClientRect();return e.left<t.width?this.popoverside="right":this.popoverside="left",{top:e.top+(e.height-t.height)/2+"px",left:e.left<t.width?e.left+100+"px":e.left-t.width-15+"px"}}ngOnInit(){let e=this.metadata.getComponentConfig("fieldModelFooterPopover",this.popovermodule);e.fieldset?this.fields=this.metadata.getFieldSetFields(e.fieldset):(e=this.metadata.getComponentConfig("ObjectPageHeaderDetails",this.popovermodule),e.fieldset&&(this.fields=this.metadata.getFieldSetFields(e.fieldset))),this.modelIsLoading=!0,this.model.module=this.popovermodule,this.model.id=this.popoverid,this.model.getData().subscribe((()=>{this.modelIsLoading=!1})),this.styles=this.popoverStyle}getNubbinClass(){return"left"==this.popoverside?"slds-nubbin--right":"slds-nubbin--left"}closePopover(e=!1){e?this.self.destroy():this.hidePopoverTimeout=window.setTimeout((()=>this.self.destroy()),500)}}return e=fieldModelFooterPopover,(0,i.Z)(fieldModelFooterPopover,"ɵfac",(function(t){return new(t||e)(c.Y36(w.o),c.Y36(k.e),c.Y36(u.Pu))})),(0,i.Z)(fieldModelFooterPopover,"ɵcmp",c.Xpm({type:e,selectors:[["field-model-footer-popover"]],viewQuery:function(e,t){if(1&e&&c.Gf(_a,7,c.s_b),2&e){let e;c.iGM(e=c.CRH())&&(t.popover=e.first)}},features:[c._Bn([w.o,k.e])],decls:15,vars:6,consts:[["role","dialog",1,"slds-popover","slds-popover_large","slds-popover--panel","slds-is-fixed",3,"ngStyle","ngClass","mouseenter","mouseleave"],[1,"slds-button","slds-button_icon","slds-button_icon","slds-button_icon-small","slds-float_right","slds-popover__close",3,"click"],["icon","close"],[1,"slds-popover__header"],["popover",""],[1,"slds-media","slds-m-bottom--small","slds-media--center"],[1,"slds-media__figure"],[3,"module"],[1,"slds-media__body","slds-truncate"],[4,"ngIf"],[1,"slds-text-heading--medium","slds-hyphenate"],["href","javascript:void(0);",3,"click"],[1,"slds-grid","slds-wrap","slds-grid--pull-padded"],["class","slds-p-horizontal--small slds-size--1-of-2 slds-p-bottom--x-small",4,"ngFor","ngForOf"],[1,"slds-p-horizontal--small","slds-size--1-of-2","slds-p-bottom--x-small"],[3,"fieldname","fieldconfig"],[3,"field","fieldconfig","fielddisplayclass"]],template:function(e,t){1&e&&(c.TgZ(0,"div",0),c.NdJ("mouseenter",(function(){return t.onMouseOver()}))("mouseleave",(function(){return t.onMouseOut()})),c.TgZ(1,"button",1),c.NdJ("click",(function(){return t.closePopover(!0)})),c._UZ(2,"system-button-icon",2),c.qZA(),c.TgZ(3,"div",3,4)(5,"div",5)(6,"div",6),c._UZ(7,"system-icon",7),c.qZA(),c.TgZ(8,"div",8),c.YNc(9,ya,1,0,"system-spinner",9),c.TgZ(10,"p",10)(11,"a",11),c.NdJ("click",(function(){return t.goDetail()})),c._uU(12),c.qZA()()()(),c.TgZ(13,"div",12),c.YNc(14,xa,6,5,"div",13),c.qZA()()()),2&e&&(c.Q6J("ngStyle",t.popoverStyle)("ngClass",t.getNubbinClass()),c.xp6(7),c.Q6J("module",t.popovermodule),c.xp6(2),c.Q6J("ngIf",t.modelIsLoading),c.xp6(3),c.Oqu(t.model.data.summary_text),c.xp6(2),c.Q6J("ngForOf",t.fields))},dependencies:[n.mk,n.sg,n.O5,n.PC,T.J,hs.f,Go.W,h.q,m.j],encapsulation:2})),fieldModelFooterPopover})();function Ta(e,t){1&e&&c._UZ(0,"system-stencil")}function Ca(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"button",8),c.NdJ("click",(function(){c.CHM(e);const t=c.oxw(3);return c.KtG(t.setEditMode())})),c._UZ(1,"system-button-icon",9),c.qZA()}2&e&&(c.xp6(1),c.Q6J("icon","edit"))}function Aa(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"span")(1,"a",6),c.NdJ("click",(function(){c.CHM(e);const t=c.oxw(2);return c.KtG(t.goToDetail())})),c._uU(2),c.qZA()(),c.YNc(3,Ca,2,1,"button",7)}if(2&e){const e=c.oxw(2);c.xp6(1),c.Q6J("module",e.module)("id",e.id),c.xp6(1),c.Oqu(e.value),c.xp6(1),c.Q6J("ngIf",e.isEditable())}}function ka(e,t){if(1&e&&(c.TgZ(0,"div",3),c.YNc(1,Ta,1,0,"system-stencil",4),c.YNc(2,Aa,4,4,"ng-template",null,5,c.W1O),c.qZA()),2&e){const e=c.MAs(3),t=c.oxw();c.Q6J("ngClass",t.fielddisplayclass),c.xp6(1),c.Q6J("ngIf",t.model.isLoading)("ngIfElse",e)}}function La(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"div",16)(1,"div",17)(2,"span",18)(3,"span",19),c._UZ(4,"system-icon",20),c.qZA(),c.TgZ(5,"span",21),c._uU(6),c.qZA(),c.TgZ(7,"button",22),c.NdJ("click",(function(){c.CHM(e);const t=c.oxw(2);return c.KtG(t.clear())})),c._UZ(8,"system-button-icon",9),c.qZA()()()()}if(2&e){const e=c.oxw(2);c.xp6(4),c.Q6J("module",e.module)("size","small"),c.xp6(2),c.Oqu(e.item_summary_text),c.xp6(2),c.Q6J("icon","close")}}function Ia(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"div",23)(1,"div",24),c._UZ(2,"system-utility-icon",25),c.TgZ(3,"input",26),c.NdJ("ngModelChange",(function(t){c.CHM(e);const s=c.oxw(2);return c.KtG(s.search_term=t)}))("blur",(function(){c.CHM(e);const t=c.oxw(2);return c.KtG(t.closePopups())}))("focus",(function(){c.CHM(e);const t=c.oxw(2);return c.KtG(t.onFocus())})),c.qZA()()()}if(2&e){const e=c.oxw(2);c.Q6J("ngClass",e.getFieldClass()),c.xp6(2),c.Q6J("icon","search")("addclasses","slds-input__icon"),c.xp6(1),c.Q6J("ngModel",e.search_term)("placeholder","Search "+e.language.getModuleName(e.module))}}function Ma(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"field-lookup-recent",30),c.NdJ("selectedObject",(function(t){c.CHM(e);const s=c.oxw(3);return c.KtG(s.selected_item=t)})),c.qZA()}if(2&e){const e=c.oxw(3);c.Q6J("module",e.module)}}function Sa(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"field-lookup-search",31),c.NdJ("searchtermChange",(function(t){c.CHM(e);const s=c.oxw(3);return c.KtG(s.search_term=t)}))("selectedObject",(function(t){c.CHM(e);const s=c.oxw(3);return c.KtG(s.selected_item=t)})),c.qZA()}if(2&e){const e=c.oxw(3);c.Q6J("module",e.module)("searchterm",e.search_term)}}function Ja(e,t){if(1&e&&(c.TgZ(0,"div",27),c.YNc(1,Ma,1,1,"field-lookup-recent",28),c.YNc(2,Sa,1,2,"field-lookup-search",29),c.qZA()),2&e){const e=c.oxw(2);c.Q6J("ngStyle",e.getSearchStyle()),c.xp6(1),c.Q6J("ngIf",!e.search_term),c.xp6(1),c.Q6J("ngIf",e.search_term)}}function Oa(e,t){if(1&e&&(c.TgZ(0,"div",10)(1,"div",11),c.YNc(2,La,9,4,"div",12),c.YNc(3,Ia,4,5,"div",13),c.qZA(),c.YNc(4,Ja,3,3,"div",14),c._UZ(5,"field-messages",15),c.qZA()),2&e){const e=c.oxw();c.Q6J("ngClass",e.getFieldClass()),c.xp6(2),c.Q6J("ngIf",e.id),c.xp6(1),c.Q6J("ngIf",!e.id),c.xp6(1),c.Q6J("ngIf",e.show_search_results),c.xp6(1),c.Q6J("fieldname",e.fieldname)}}let Na=(()=>{var e;class FieldModuleLookupComponent extends r.O{constructor(e,t,s,n,o,l,a,d){super(e,t,n,o,l),(0,i.Z)(this,"model",void 0),(0,i.Z)(this,"view",void 0),(0,i.Z)(this,"popup",void 0),(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"router",void 0),(0,i.Z)(this,"elementRef",void 0),(0,i.Z)(this,"renderer",void 0),(0,i.Z)(this,"relateIdField",""),(0,i.Z)(this,"relateNameField",""),(0,i.Z)(this,"module",""),(0,i.Z)(this,"_selected_item",null),(0,i.Z)(this,"clickListener",void 0),(0,i.Z)(this,"show_search_results",!1),(0,i.Z)(this,"search_term",""),(0,i.Z)(this,"select",new c.vpe),this.model=e,this.view=t,this.popup=s,this.language=n,this.metadata=o,this.router=l,this.elementRef=a,this.renderer=d,this.popup.closePopup$.subscribe((()=>this.closePopups()))}ngOnInit(){let e=this.metadata.getFieldDefs(this.model.module,this.fieldname);this.relateIdField=e.id_name,this.relateNameField=this.fieldname,this.module||(this.module=e.module)}onClick(e){this.elementRef.nativeElement.contains(e.target)||this.closePopups()}closePopups(){this.clickListener(),this.model.getField(this.relateIdField)&&(this.search_term=""),this.show_search_results=!1}onFocus(){this.show_search_results=!0,this.clickListener=this.renderer.listen("document","click",(e=>this.onClick(e)))}set selected_item(e){e?(this._selected_item=e.data,this.relateNameField&&this.model.setField(this.relateNameField,e.text),this.relateIdField&&this.model.setField(this.relateIdField,e.id)):(this._selected_item=null,this.relateIdField&&this.model.setField(this.relateIdField,""),this.relateNameField&&this.model.setField(this.relateNameField,"")),this.select.emit(this.selected_item)}get selected_item(){return this._selected_item}get id(){return this.selected_item&&this.selected_item.id?this.selected_item.id:this.relateIdField?this.model.getField(this.relateIdField):""}get item_summary_text(){return this.selected_item&&this.selected_item.summary_text?this.selected_item.summary_text:this.relateNameField?this.model.getField(this.relateNameField):""}goToDetail(){this.router.navigate(["/module/"+this.module+"/"+this.selected_item.id])}getSearchStyle(){if(this.show_search_results){return{width:this.elementRef.nativeElement.getBoundingClientRect().width+"px",display:"block"}}}clear(){this.search_term="",this.selected_item=null}}return e=FieldModuleLookupComponent,(0,i.Z)(FieldModuleLookupComponent,"ɵfac",(function(t){return new(t||e)(c.Y36(w.o),c.Y36(k.e),c.Y36(Ms.g),c.Y36(x.d),c.Y36(u.Pu),c.Y36(L.F0),c.Y36(c.SBq),c.Y36(c.Qsj))})),(0,i.Z)(FieldModuleLookupComponent,"ɵcmp",c.Xpm({type:e,selectors:[["field-module-lookup"]],inputs:{module:"module"},outputs:{select:"select"},features:[c._Bn([Ms.g]),c.qOj],decls:3,vars:2,consts:[[1,"slds-truncate"],[3,"ngClass",4,"ngIf"],["class","slds-form-element__control slds-m-vertical--xx-small",3,"ngClass",4,"ngIf"],[3,"ngClass"],[4,"ngIf","ngIfElse"],["displaycontent",""],["href","javascript:void(0);","system-model-popover","",3,"module","id","click"],["style","float: right","class","slds-button slds-button--icon",3,"click",4,"ngIf"],[1,"slds-button","slds-button--icon",2,"float","right",3,"click"],[3,"icon"],[1,"slds-form-element__control","slds-m-vertical--xx-small",3,"ngClass"],[1,"slds-form-element","slds-lookup"],["class","slds-form-element__control",4,"ngIf"],["class","slds-form-element__control slds-grid slds-box--border",3,"ngClass",4,"ngIf"],["class","slds-lookup__menu",3,"ngStyle",4,"ngIf"],[3,"fieldname"],[1,"slds-form-element__control"],[1,"slds-pill_container"],[1,"slds-pill","slds-size--1-of-1"],[1,"slds-icon_container","slds-icon-standard-account","slds-pill__icon_container"],[3,"module","size"],[1,"slds-pill__label"],[1,"slds-button","slds-button--icon","slds-pill__remove",3,"click"],[1,"slds-form-element__control","slds-grid","slds-box--border",3,"ngClass"],[1,"slds-input-has-icon","slds-input-has-icon--right","slds-grow"],[3,"icon","addclasses"],["type","search","role","combobox",1,"slds-lookup__search-input","slds-input--bare",3,"ngModel","placeholder","ngModelChange","blur","focus"],[1,"slds-lookup__menu",3,"ngStyle"],[3,"module","selectedObject",4,"ngIf"],[3,"module","searchterm","searchtermChange","selectedObject",4,"ngIf"],[3,"module","selectedObject"],[3,"module","searchterm","searchtermChange","selectedObject"]],template:function(e,t){1&e&&(c.TgZ(0,"div",0),c.YNc(1,ka,4,3,"div",1),c.YNc(2,Oa,6,5,"div",2),c.qZA()),2&e&&(c.xp6(1),c.Q6J("ngIf",!t.isEditMode()),c.xp6(1),c.Q6J("ngIf",t.isEditable()&&t.isEditMode()))},dependencies:[n.mk,n.O5,n.PC,o.Fj,o.JJ,o.On,T.J,hs.f,Xe.B,M.r,gs.g,ps.P,fs.$,J.a],encapsulation:2})),FieldModuleLookupComponent})();const Fa=["canvas"];function qa(e,t){if(1&e&&c._UZ(0,"field-label",12),2&e){const e=c.oxw();c.Q6J("fieldname",e.fieldname)("fieldconfig",e.fieldconfig)}}function Ea(e,t){if(1&e&&c._UZ(0,"img",17),2&e){const e=c.oxw(2);c.Q6J("src",e.src,c.LSH)}}function Ya(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"button",18),c.NdJ("click",(function(){c.CHM(e);const t=c.oxw(2);return c.KtG(t.setEditMode())})),c._UZ(1,"system-button-icon",9),c.qZA()}2&e&&(c.xp6(1),c.Q6J("icon","edit"))}const Da=function(e){return{width:e}};function Qa(e,t){if(1&e&&(c.TgZ(0,"div")(1,"div",13),c.YNc(2,Ea,1,1,"img",14),c.TgZ(3,"div",15),c.YNc(4,Ya,2,1,"button",16),c.qZA()()()),2&e){const e=c.oxw();c.xp6(1),c.Q6J("ngStyle",c.VKq(3,Da,e.signature_width+"px")),c.xp6(1),c.Q6J("ngIf",e.value),c.xp6(2),c.Q6J("ngIf",e.isEditable())}}function Ua(e,t){if(1&e&&(c.TgZ(0,"div",19),c._uU(1),c.qZA()),2&e){const e=c.oxw();c.xp6(1),c.hij(" ",e.model.data[e.display_name_field]," ")}}const Ra=function(e){return{"slds-hide":e}};let ja=(()=>{var e;class FieldSignatureComponent extends r.O{constructor(e,t,s,n,o,l){super(e,t,s,n,l),(0,i.Z)(this,"model",void 0),(0,i.Z)(this,"view",void 0),(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"libloader",void 0),(0,i.Z)(this,"router",void 0),(0,i.Z)(this,"canvas",void 0),(0,i.Z)(this,"pad",void 0),(0,i.Z)(this,"display_name_field",void 0),(0,i.Z)(this,"signature_height",200),(0,i.Z)(this,"signature_width",400),this.model=e,this.view=t,this.language=s,this.metadata=n,this.libloader=o,this.router=l}ngAfterViewInit(){this.config&&(this.config.signature_width>0&&(this.signature_width=this.config.signature_width),this.config.signature_height>0&&(this.signature_height=this.config.signature_height),this.display_name_field=this.config.display_name_field),this.libloader.loadLib("signature_pad").subscribe((e=>{this.pad=new SignaturePad(this.canvas.nativeElement,{backgroundColor:"rgb(255, 255, 255)"}),this.model.isLoading||!this.model.id?this.model.data$.subscribe((e=>{this.pad.fromDataURL(this.src)})):this.pad.fromDataURL(this.src)}))}get config(){return this.fieldconfig}get src(){return this.value?"data:image/jpeg;base64,"+this.value:""}undo(){let e=this.pad.toData();e&&(e.pop(),this.pad.fromData(e),this.convert())}clear(){this.pad.clear(),this.convert()}convert(){let e=this.pad.toDataURL("image/jpeg"),t=e.split("base64,");this.pad.isEmpty()?this.value="":2!=t.length?(console.warn("Failed to parse base64 code from data:",e),this.value=""):(e=t[1],this.value=e)}}return e=FieldSignatureComponent,(0,i.Z)(FieldSignatureComponent,"ɵfac",(function(t){return new(t||e)(c.Y36(w.o),c.Y36(k.e),c.Y36(x.d),c.Y36(u.Pu),c.Y36(Xl.$),c.Y36(L.F0))})),(0,i.Z)(FieldSignatureComponent,"ɵcmp",c.Xpm({type:e,selectors:[["field-signature"]],viewQuery:function(e,t){if(1&e&&c.Gf(Fa,7),2&e){let e;c.iGM(e=c.CRH())&&(t.canvas=e.first)}},features:[c.qOj],decls:13,vars:13,consts:[[3,"fieldname","fieldconfig",4,"ngIf"],[4,"ngIf"],[3,"ngClass"],[3,"ngStyle"],[1,"slds-float_left"],[2,"border","1px solid",3,"width","height","mouseup","touchend"],["canvas",""],[2,"position","relative","bottom","3px","right","3px"],["title","undo",1,"slds-button","slds-button--icon",3,"click"],[3,"icon"],["title","clear",1,"slds-button","slds-button--icon",3,"click"],["class","slds-text-align--center",4,"ngIf"],[3,"fieldname","fieldconfig"],[1,"slds-float_left",3,"ngStyle"],[3,"src",4,"ngIf"],[2,"position","absolute","top","1px","right","1px"],["class","slds-button slds-button--icon",3,"click",4,"ngIf"],[3,"src"],[1,"slds-button","slds-button--icon",3,"click"],[1,"slds-text-align--center"]],template:function(e,t){1&e&&(c.YNc(0,qa,1,2,"field-label",0),c.YNc(1,Qa,5,5,"div",1),c.TgZ(2,"div",2)(3,"div",3)(4,"div",4)(5,"canvas",5,6),c.NdJ("mouseup",(function(){return t.convert()}))("touchend",(function(){return t.convert()})),c.qZA(),c.TgZ(7,"div",7)(8,"button",8),c.NdJ("click",(function(){return t.undo()})),c._UZ(9,"system-button-icon",9),c.qZA(),c.TgZ(10,"button",10),c.NdJ("click",(function(){return t.clear()})),c._UZ(11,"system-button-icon",9),c.qZA()()(),c.YNc(12,Ua,2,1,"div",11),c.qZA()()),2&e&&(c.Q6J("ngIf",t.displayLabel),c.xp6(1),c.Q6J("ngIf",!t.isEditMode()),c.xp6(1),c.Q6J("ngClass",c.VKq(9,Ra,!t.isEditMode())),c.xp6(1),c.Q6J("ngStyle",c.VKq(11,Da,t.signature_width+"px")),c.xp6(2),c.Q6J("width",t.signature_width)("height",t.signature_height),c.xp6(4),c.Q6J("icon","back"),c.xp6(2),c.Q6J("icon","close"),c.xp6(1),c.Q6J("ngIf",t.display_name_field))},dependencies:[n.mk,n.O5,n.PC,T.J,h.q],encapsulation:2})),FieldSignatureComponent})();var Ba=s(1591),Ga=s(4730);const Pa=function(e){return{"slds-theme--shade":e}};function Ha(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"div",7)(1,"div",8),c.NdJ("mouseenter",(function(){const t=c.CHM(e).$implicit,s=c.oxw(2);return c.KtG(s.select(0,t))}))("click",(function(){const t=c.CHM(e).$implicit,s=c.oxw(2);return c.KtG(s.choose(0,t))})),c.TgZ(2,"span",9),c._UZ(3,"system-label",10),c.qZA()()()}if(2&e){const e=t.$implicit,s=c.oxw(2);let i;c.Q6J("ngClass",c.VKq(4,Pa,s.isCategorySelected(0,e))),c.xp6(1),c.Q6J("title",null!==(i=e.node_description)&&void 0!==i?i:e.node_name),c.xp6(1),c.Q6J("ngStyle",s.nodeStyle(e)),c.xp6(1),c.Q6J("label",e.node_name)}}function za(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"div",7)(1,"div",8),c.NdJ("mouseenter",(function(){const t=c.CHM(e).$implicit,s=c.oxw(2);return c.KtG(s.select(1,t))}))("click",(function(){const t=c.CHM(e).$implicit,s=c.oxw(2);return c.KtG(s.choose(1,t))})),c.TgZ(2,"span",9),c._UZ(3,"system-label",10),c.qZA()()()}if(2&e){const e=t.$implicit,s=c.oxw(2);let i;c.Q6J("ngClass",c.VKq(4,Pa,s.isCategorySelected(1,e))),c.xp6(1),c.Q6J("title",null!==(i=e.node_description)&&void 0!==i?i:e.node_name),c.xp6(1),c.Q6J("ngStyle",s.nodeStyle(e)),c.xp6(1),c.Q6J("label",e.node_name)}}function Va(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"div",7)(1,"div",8),c.NdJ("mouseenter",(function(){const t=c.CHM(e).$implicit,s=c.oxw(2);return c.KtG(s.select(2,t))}))("click",(function(){const t=c.CHM(e).$implicit,s=c.oxw(2);return c.KtG(s.choose(2,t))})),c.TgZ(2,"span",9),c._UZ(3,"system-label",10),c.qZA()()()}if(2&e){const e=t.$implicit,s=c.oxw(2);let i;c.Q6J("ngClass",c.VKq(4,Pa,s.isCategorySelected(2,e))),c.xp6(1),c.Q6J("title",null!==(i=e.node_description)&&void 0!==i?i:e.node_name),c.xp6(1),c.Q6J("ngStyle",s.nodeStyle(e)),c.xp6(1),c.Q6J("label",e.node_name)}}function Ka(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"div",7)(1,"div",8),c.NdJ("mouseenter",(function(){const t=c.CHM(e).$implicit,s=c.oxw(2);return c.KtG(s.select(3,t))}))("click",(function(){const t=c.CHM(e).$implicit,s=c.oxw(2);return c.KtG(s.choose(3,t))})),c.TgZ(2,"span",9),c._UZ(3,"system-label",10),c.qZA()()()}if(2&e){const e=t.$implicit,s=c.oxw(2);let i;c.Q6J("ngClass",c.VKq(4,Pa,s.isCategorySelected(3,e))),c.xp6(1),c.Q6J("title",null!==(i=e.node_description)&&void 0!==i?i:e.node_name),c.xp6(1),c.Q6J("ngStyle",s.nodeStyle(e)),c.xp6(1),c.Q6J("label",e.node_name)}}function $a(e,t){if(1&e&&(c.TgZ(0,"div",2)(1,"div",3)(2,"div",4),c.YNc(3,Ha,4,6,"div",5),c.qZA(),c.TgZ(4,"div",4),c.YNc(5,za,4,6,"div",5),c.qZA(),c.TgZ(6,"div",4),c.YNc(7,Va,4,6,"div",5),c.qZA(),c.TgZ(8,"div",6),c.YNc(9,Ka,4,6,"div",5),c.qZA()()()),2&e){const e=c.oxw();c.xp6(1),c.Q6J("@treeanimation",e.shifttree)("ngStyle",e.boxStyle),c.xp6(2),c.Q6J("ngForOf",e.levelCategories(0))("ngForTrackBy",e.trackByFn),c.xp6(2),c.Q6J("ngForOf",e.levelCategories(1))("ngForTrackBy",e.trackByFn),c.xp6(2),c.Q6J("ngForOf",e.levelCategories(2))("ngForTrackBy",e.trackByFn),c.xp6(2),c.Q6J("ngForOf",e.levelCategories(3))("ngForTrackBy",e.trackByFn)}}function Xa(e,t){if(1&e&&(c.TgZ(0,"li",17),c._UZ(1,"system-label",10),c.qZA()),2&e){const e=t.$implicit;let s;c.Q6J("title",null!==(s=e.node_description)&&void 0!==s?s:e.node_name),c.xp6(1),c.Q6J("label",e.node_name)}}function Wa(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"div",14)(1,"ul",15),c.NdJ("click",(function(){const t=c.CHM(e).$implicit,s=c.oxw(2);return c.KtG(s.selectNode(t))})),c.YNc(2,Xa,2,2,"li",16),c.qZA()()}if(2&e){const e=t.$implicit;c.xp6(2),c.Q6J("ngForOf",e.levels)}}function ed(e,t){1&e&&(c.TgZ(0,"div",18)(1,"system-illustration-no-records"),c._UZ(2,"system-label",19),c.qZA()())}function td(e,t){if(1&e&&(c.TgZ(0,"div",11),c.YNc(1,Wa,3,1,"div",12),c.YNc(2,ed,3,0,"div",13),c.qZA()),2&e){const e=c.oxw();c.xp6(1),c.Q6J("ngForOf",e.getMatchedNodes())("ngForTrackBy",e.trackByCatId),c.xp6(1),c.Q6J("ngIf",0==e.getMatchedNodes().length)}}function sd(e,t){if(1&e&&(c.TgZ(0,"li",17),c._UZ(1,"system-label",10),c.qZA()),2&e){const e=t.$implicit;let s;c.Q6J("title",null!==(s=e.node_description)&&void 0!==s?s:e.node_name),c.xp6(1),c.Q6J("label",e.node_name)}}function id(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"div",14)(1,"ul",15),c.NdJ("click",(function(){const t=c.CHM(e).$implicit,s=c.oxw(2);return c.KtG(s.selectNode(t))})),c.YNc(2,sd,2,2,"li",16),c.qZA()()}if(2&e){const e=t.$implicit;c.xp6(2),c.Q6J("ngForOf",e.levels)}}function nd(e,t){1&e&&(c.TgZ(0,"div",18)(1,"system-illustration-no-records"),c._UZ(2,"system-label",19),c.qZA()())}function od(e,t){if(1&e&&(c.TgZ(0,"div",11),c.YNc(1,id,3,1,"div",12),c.YNc(2,nd,3,0,"div",13),c.qZA()),2&e){const e=c.oxw();c.xp6(1),c.Q6J("ngForOf",e.getFavoriteNodes())("ngForTrackBy",e.trackByCatId),c.xp6(1),c.Q6J("ngIf",0==e.getFavoriteNodes().length)}}let ld=(()=>{var e;class fieldCategoriesTree{constructor(e,t,s,n,o){(0,i.Z)(this,"model",void 0),(0,i.Z)(this,"backend",void 0),(0,i.Z)(this,"config",void 0),(0,i.Z)(this,"elementref",void 0),(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"levels",[void 0,void 0,void 0,void 0]),(0,i.Z)(this,"category",new c.vpe),(0,i.Z)(this,"loading",!0),(0,i.Z)(this,"categories",[]),(0,i.Z)(this,"sortby","node_key"),(0,i.Z)(this,"searchTerm",void 0),(0,i.Z)(this,"searchFavorites",!1),this.model=e,this.backend=t,this.config=s,this.elementref=n,this.language=o}get shifttree(){return!!this.levels[1]&&this.has4Levels(this.levels[1])}has4Levels(e){for(let t of this.categories.filter((t=>t.parent_id==e)))if(this.categories.filter((e=>e.parent_id==t.id)).length>0)return!0;return!1}get boxStyle(){let e=this.elementref.nativeElement.getBoundingClientRect();return{height:window.innerHeight-e.top-30+"px"}}nodeStyle(e){return e.selectable?{cursor:"pointer","text-decoration":"underline"}:{cursor:"default"}}hasChildren(e){return this.categories.filter((t=>t.parent_id==e.id)).length>0}levelCategories(e){return 0===e?this.sortCategories(this.categories.filter((e=>!e.parent_id||""==e.parent_id)),this.sortby):this.levels[e-1]?this.sortCategories(this.categories.filter((t=>t.parent_id==this.levels[e-1])),this.sortby):[]}sortCategories(e=[],t="node_key"){return"node_name"==t?this.sortCategoriesByTranslation(e):this.sortCategoriesByKey(e)}sortCategoriesByTranslation(e=[]){return e.sort(((e,t)=>this.language.getLabel(e.node_name).localeCompare(this.language.getLabel(t.node_name))))}sortCategoriesByKey(e=[]){return e.sort(((e,t)=>parseFloat(e.node_key)>parseFloat(t.node_key)?1:-1))}getMatchedNodes(){return this.buildSelectableCategories().filter((e=>this.matchTerms(e.levels.map((e=>this.language.getLabel(e.node_name))).join(),this.searchTerm))).sort(((e,t)=>this.compareFullCategories(e.levels,t.levels)))}matchTerms(e,t){let s=t.split(" ").map((e=>e.trim()));for(let t of s)if(e.toLowerCase().indexOf(t.toLowerCase())<0)return!1;return!0}getFavoriteNodes(){let e=this.buildSelectableCategories(!0);return this.searchTerm?e.filter((e=>this.matchTerms(e.levels.map((e=>e.node_name)).join(),this.searchTerm))):e.sort(((e,t)=>this.compareFullCategories(e.levels,t.levels)))}buildSelectableCategories(e=!1){let t=[];for(let s of this.categories.filter((e=>e.selectable))){let i=this.buildFullCategories(s);(!0!==e||i.filter((e=>e.favorite)).length>0)&&t.push({levels:i,cat:s})}return t}buildFullCategories(e){let t=e,s=[{id:t.id,node_name:t.node_name,favorite:t.favorite,node_key:t.node_key}];for(;t.parent_id&&(t=this.categories.find((e=>e.id==t.parent_id)),t);)s.unshift({id:t.id,node_name:t.node_name,favorite:t.favorite,node_key:t.node_key});return s}compareFullCategories(e,t,s="node_name"){return e.map((e=>e.node_name)).join().localeCompare(t.map((e=>e.node_name)).join())}compareFullCategorylevels(e,t,s,i="node_key"){}compareNodes(e,t,s="node_key"){switch(s){case"node_name":return e.node_name.localeCompare(t.node_name);case"node_key":return e.node_key==t.node_key?0:parseFloat(e.node_key)>parseFloat(t.node_key)?1:-1}}select(e,t){for(this.levels[e]=t.id,e++;e<3;)this.levels[e]=void 0,e++}isCategorySelected(e,t){return this.levels[e]==t.id}choose(e,t){t.selectable&&(this.select(e,t),this.category.emit({levels:[...this.levels],category:t}),this.levels=[void 0,void 0,void 0,void 0])}selectNode(e){let t=[];for(let s of e.levels)t.push(s.id);this.category.emit({levels:[...t],category:e.cat}),this.searchTerm="",this.searchFavorites=!1}trackByFn(e,t){return t.id}trackByCatId(e,t){return t.cat.id}}return e=fieldCategoriesTree,(0,i.Z)(fieldCategoriesTree,"ɵfac",(function(t){return new(t||e)(c.Y36(w.o),c.Y36($.y),c.Y36(ee.C),c.Y36(c.SBq),c.Y36(x.d))})),(0,i.Z)(fieldCategoriesTree,"ɵcmp",c.Xpm({type:e,selectors:[["field-categories-tree"]],inputs:{categories:"categories",sortby:"sortby",searchTerm:"searchTerm",searchFavorites:"searchFavorites"},outputs:{category:"category"},decls:3,vars:3,consts:[["style","overflow: hidden",4,"ngIf"],["class","slds-dropdown_length-10",4,"ngIf"],[2,"overflow","hidden"],[1,"slds-grid",3,"ngStyle"],[1,"slds-col","slds-size--1-of-3","slds-border--right","slds-height_full","slds-scrollable--y"],[3,"ngClass",4,"ngFor","ngForOf","ngForTrackBy"],[1,"slds-col","slds-size--1-of-3","slds-height_full","slds-scrollable--y"],[3,"ngClass"],[1,"slds-truncate","slds-p-around--xx-small",3,"title","mouseenter","click"],[3,"ngStyle"],[3,"label"],[1,"slds-dropdown_length-10"],["class","slds-truncate slds-p-around--xx-small","style","cursor: pointer",4,"ngFor","ngForOf","ngForTrackBy"],["class","slds-height_full slds-align--absolute-center slds-p-around--x-large",4,"ngIf"],[1,"slds-truncate","slds-p-around--xx-small",2,"cursor","pointer"],[1,"slds-list_horizontal","slds-has-dividers_left","slds-has-block-links",3,"click"],["class","slds-item",3,"title",4,"ngFor","ngForOf"],[1,"slds-item",3,"title"],[1,"slds-height_full","slds-align--absolute-center","slds-p-around--x-large"],["label","LBL_NO_RECORDS_FOUND"]],template:function(e,t){1&e&&(c.YNc(0,$a,10,10,"div",0),c.YNc(1,td,3,3,"div",1),c.YNc(2,od,3,3,"div",1)),2&e&&(c.Q6J("ngIf",!t.searchTerm&&!t.searchFavorites),c.xp6(1),c.Q6J("ngIf",t.searchTerm&&!t.searchFavorites),c.xp6(1),c.Q6J("ngIf",t.searchFavorites))},dependencies:[n.mk,n.sg,n.O5,n.PC,Ga.C,se._],encapsulation:2,data:{animation:[(0,Ba.X$)("treeanimation",[(0,Ba.SB)("true",(0,Ba.oB)({"margin-left":"-34%","margin-right":"34%"})),(0,Ba.SB)("false",(0,Ba.oB)({"margin-left":"0px","margin-right":"0px"})),(0,Ba.eR)("true => false",[(0,Ba.jt)(".2s")]),(0,Ba.eR)("false => true",[(0,Ba.jt)(".2s")])])]}})),fieldCategoriesTree})();const ad=["focusEl"],dd=["categoryTree"];function rd(e,t){if(1&e&&c._UZ(0,"field-label",3),2&e){const e=c.oxw();c.Q6J("fieldname",e.fieldname)("fieldconfig",e.fieldconfig)}}function cd(e,t){if(1&e&&(c.TgZ(0,"div",7),c._uU(1),c.qZA()),2&e){const e=c.oxw(2);c.Q6J("title",e.display_value),c.xp6(1),c.Oqu(e.display_value)}}function ud(e,t){1&e&&c._UZ(0,"system-stencil")}function hd(e,t){if(1&e&&(c.TgZ(0,"field-generic-display",4),c.YNc(1,cd,2,2,"div",5),c.YNc(2,ud,1,0,"ng-template",null,6,c.W1O),c.qZA()),2&e){const e=c.MAs(3),t=c.oxw();c.Q6J("fielddisplayclass",t.fielddisplayclass)("fieldconfig",t.fieldconfig)("editable",t.isEditable()),c.xp6(1),c.Q6J("ngIf",t.categories.length>0)("ngIfElse",e)}}function md(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"button",19),c.NdJ("click",(function(t){c.CHM(e);const s=c.oxw(3);return c.KtG(s.setFavorites(t))})),c._UZ(1,"system-button-icon",20),c.qZA()}if(2&e){const e=c.oxw(3);c.xp6(1),c.Q6J("addclasses",e.searchfavorites?"":"slds-icon-text-light")}}function gd(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"div",15)(1,"input",16,17),c.NdJ("focus",(function(){c.CHM(e);const t=c.oxw(2);return c.KtG(t.openDropDown())}))("click",(function(){c.CHM(e);const t=c.oxw(2);return c.KtG(t.openDropDown())}))("ngModelChange",(function(t){c.CHM(e);const s=c.oxw(2);return c.KtG(s.tempsearchterm=t)}))("keyup",(function(t){c.CHM(e);const s=c.oxw(2);return c.KtG(s.search(t))})),c.qZA(),c.YNc(3,md,2,1,"button",18),c.qZA()}if(2&e){const e=c.oxw(2);c.xp6(1),c.s9C("placeholder",e.language.getLabel("LBL_SEARCH")),c.Q6J("disabled",0==e.categories.length)("ngModel",e.tempsearchterm),c.xp6(2),c.Q6J("ngIf",e.hasFavorites)}}function pd(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"div",15)(1,"div",21)(2,"span",22),c.NdJ("dblclick",(function(){c.CHM(e);const t=c.oxw(2);return t.clearCategories(),c.KtG(t.focusInputField())})),c.TgZ(3,"span",23),c._uU(4),c.qZA(),c.TgZ(5,"button",24),c.NdJ("click",(function(){c.CHM(e);const t=c.oxw(2);return c.KtG(t.clearCategories())})),c._UZ(6,"system-button-icon",25),c.qZA()()()()}if(2&e){const e=c.oxw(2);c.xp6(4),c.Oqu(e.display_value),c.xp6(2),c.Q6J("icon","close")}}function fd(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"field-categories-tree",26),c.NdJ("category",(function(t){c.CHM(e);const s=c.oxw(2);return c.KtG(s.chooseCategories(t))})),c.qZA()}if(2&e){const e=c.oxw(2);c.Q6J("categories",e.categories)("sortby",e.sortby)("searchTerm",e.searchterm)("searchFavorites",e.searchfavorites)}}const bd=function(e){return{"slds-is-open":e}};function vd(e,t){if(1&e&&(c.TgZ(0,"div",8)(1,"div",9)(2,"div",10)(3,"div",11),c.YNc(4,gd,4,4,"div",12),c.YNc(5,pd,7,2,"div",12),c.TgZ(6,"div",13),c.YNc(7,fd,1,4,"field-categories-tree",14),c.qZA()()()()()),2&e){const e=c.oxw();c.Q6J("ngClass",e.getFieldClass()),c.xp6(3),c.Q6J("ngClass",c.VKq(5,bd,e.dropDownOpen)),c.xp6(1),c.Q6J("ngIf",!e.display_value),c.xp6(1),c.Q6J("ngIf",e.display_value),c.xp6(2),c.Q6J("ngIf",e.categories.length>0)}}let Zd=(()=>{var e;class fieldCategories extends r.O{constructor(e,t,s,n,o,l,a,d,r){super(e,t,s,n,o),(0,i.Z)(this,"model",void 0),(0,i.Z)(this,"view",void 0),(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"router",void 0),(0,i.Z)(this,"backend",void 0),(0,i.Z)(this,"config",void 0),(0,i.Z)(this,"elementRef",void 0),(0,i.Z)(this,"renderer",void 0),(0,i.Z)(this,"searchterm",void 0),(0,i.Z)(this,"tempsearchterm",void 0),(0,i.Z)(this,"searchfavorites",!1),(0,i.Z)(this,"clickListener",void 0),(0,i.Z)(this,"dropDownOpen",!1),(0,i.Z)(this,"searchTimeOut",void 0),(0,i.Z)(this,"treeid",void 0),(0,i.Z)(this,"categoryFields",[]),(0,i.Z)(this,"setFieldName",!1),(0,i.Z)(this,"escKeyListener",void 0),(0,i.Z)(this,"focusElement",void 0),(0,i.Z)(this,"categoryTree",void 0),this.model=e,this.view=t,this.language=s,this.metadata=n,this.router=o,this.backend=l,this.config=a,this.elementRef=d,this.renderer=r}ngOnInit(){super.ngOnInit();let e=this.config.getData("categories"),t=this.metadata.getModuleDefs(this.model.module);if(t.categorytrees){let e=t.categorytrees.find((e=>e.module_field==this.fieldname));e&&(this.treeid=e.syscategorytree_id,e.module_field_c1&&this.categoryFields.push(e.module_field_c1),e.module_field_c2&&this.categoryFields.push(e.module_field_c2),e.module_field_c3&&this.categoryFields.push(e.module_field_c3),e.module_field_c4&&this.categoryFields.push(e.module_field_c4),this.setFieldName=!0)}this.treeid||(this.treeid=this.fieldconfig.treeid,this.fieldconfig.category1&&this.categoryFields.push(this.fieldconfig.category1),this.fieldconfig.category2&&this.categoryFields.push(this.fieldconfig.category2),this.fieldconfig.category3&&this.categoryFields.push(this.fieldconfig.category3),this.fieldconfig.category4&&this.categoryFields.push(this.fieldconfig.category4)),!this.treeid||e&&e[this.treeid]||(e||(e={}),e[this.treeid]=[],this.config.setData("categories",e),this.backend.getRequest(`configuration/spiceui/core/categorytrees/${this.treeid}/categorytreenodes`).subscribe((t=>{e[this.treeid]=t,this.config.setData("categories",e)})))}ngOnDestroy(){super.ngOnDestroy(),this.escKeyListener&&this.escKeyListener(),this.clickListener&&this.clickListener()}get categories(){let e=this.config.getData("categories");return e?e[this.treeid]:[]}get sortby(){return this.fieldconfig.sortby}get hasFavorites(){return this.categories.filter((e=>e.favorite)).length>0}openDropDown(){this.dropDownOpen||(this.dropDownOpen=!0,this.subscribeToESCKeyUp())}subscribeToESCKeyUp(){this.escKeyListener=this.renderer.listen("document","keyup",(e=>{"Escape"==e.key&&(this.dropDownOpen=!1,this.resetTmpSearchTerm())}))}onClick(e){this.elementRef.nativeElement.contains(e.target)||(this.dropDownOpen=!1,this.clickListener())}get display_value(){let e,t=[],s=0;for(;s<this.categoryFields.length;){let i=this.model.getField(this.categoryFields[s]);if(!i)break;let n=this.categories.find((t=>t.node_key==i&&(!(!e&&""!=t.parent_id&&t.parent_id)&&(!e||t.parent_id==e))));if(!n)break;t.push(this.language.getLabel(n.node_name)),e=n.id,s++}let i=0==t.length?void 0:t.join("/");return i!=this.value&&this.model.setField(this.fieldname,i,!0),i}setFavorites(e){e.stopPropagation(),e.preventDefault(),this.searchfavorites=!this.searchfavorites,this.dropDownOpen||(this.dropDownOpen=!0)}chooseCategories(e){let t={},s=0,i=e.levels;for(;s<this.categoryFields.length;)i[s]?t[this.categoryFields[s]]=this.categories.find((e=>e.id==i[s])).node_key:t[this.categoryFields[s]]=void 0,s++;this.fieldconfig.addparams&&e.category?.add_params&&(t[this.fieldconfig.addparams]=e.category.add_params),this.model.setFields(t,!0),t=[],this.setFieldName&&(t[this.fieldname]=this.display_value),this.fieldconfig.setname&&(t.name=this.display_value),Object.getOwnPropertyNames(t).length>0&&this.model.setFields(t),this.dropDownOpen=!1,this.searchterm=void 0,this.searchfavorites=!1,this.escKeyListener&&this.escKeyListener(),this.clickListener&&this.clickListener()}clearCategories(){let e=0,t={};for(;e<this.categoryFields.length;)t[this.categoryFields[e]]="",e++;t[this.fieldname]=void 0,this.model.setFields(t),this.resetTmpSearchTerm()}focusInputField(){setTimeout((()=>{this.renderer.selectRootElement(this.focusElement.nativeElement).focus()}),200)}onPageClick(e){this.elementRef.nativeElement.contains(e)||(this.dropDownOpen=!1)}search(e){this.searchTimeOut&&window.clearTimeout(this.searchTimeOut),this.searchTimeOut=window.setTimeout((()=>{this.searchterm=this.tempsearchterm}),1e3),""!=this.tempsearchterm&&this.openDropDown()}resetTmpSearchTerm(){this.tempsearchterm=""}}return e=fieldCategories,(0,i.Z)(fieldCategories,"ɵfac",(function(t){return new(t||e)(c.Y36(w.o),c.Y36(k.e),c.Y36(x.d),c.Y36(u.Pu),c.Y36(L.F0),c.Y36($.y),c.Y36(ee.C),c.Y36(c.SBq),c.Y36(c.Qsj))})),(0,i.Z)(fieldCategories,"ɵcmp",c.Xpm({type:e,selectors:[["field-categories"]],viewQuery:function(e,t){if(1&e&&(c.Gf(ad,5),c.Gf(dd,5)),2&e){let e;c.iGM(e=c.CRH())&&(t.focusElement=e.first),c.iGM(e=c.CRH())&&(t.categoryTree=e.first)}},hostBindings:function(e,t){1&e&&c.NdJ("click",(function(e){return t.onPageClick(e.target)}),!1,c.evT)},features:[c.qOj],decls:3,vars:3,consts:[[3,"fieldname","fieldconfig",4,"ngIf"],[3,"fielddisplayclass","fieldconfig","editable",4,"ngIf"],["class","slds-form-element__control slds-m-vertical--xx-small",3,"ngClass",4,"ngIf"],[3,"fieldname","fieldconfig"],[3,"fielddisplayclass","fieldconfig","editable"],[3,"title",4,"ngIf","ngIfElse"],["nocategories",""],[3,"title"],[1,"slds-form-element__control","slds-m-vertical--xx-small",3,"ngClass"],[1,"slds-form-element__control"],[1,"slds-combobox_container"],[1,"slds-combobox","slds-dropdown-trigger","slds-dropdown-trigger_click",3,"ngClass"],["class","slds-combobox__form-element slds-input-has-icon slds-input-has-icon_right",4,"ngIf"],["role","listbox",1,"slds-dropdown","slds-dropdown_fluid"],[3,"categories","sortby","searchTerm","searchFavorites","category",4,"ngIf"],[1,"slds-combobox__form-element","slds-input-has-icon","slds-input-has-icon_right"],[1,"slds-input","slds-combobox__input",3,"disabled","placeholder","ngModel","focus","click","ngModelChange","keyup"],["focusEl",""],["class","slds-button slds-button--icon slds-input__icon slds-input__icon_right",3,"click",4,"ngIf"],[1,"slds-button","slds-button--icon","slds-input__icon","slds-input__icon_right",3,"click"],["icon","favorite",3,"addclasses"],[1,"slds-pill_container"],[1,"slds-pill","slds-size--1-of-1",3,"dblclick"],[1,"slds-pill__label"],[1,"slds-button","slds-button--icon","slds-pill__remove",3,"click"],[3,"icon"],[3,"categories","sortby","searchTerm","searchFavorites","category"]],template:function(e,t){1&e&&(c.YNc(0,rd,1,2,"field-label",0),c.YNc(1,hd,4,5,"field-generic-display",1),c.YNc(2,vd,8,7,"div",2)),2&e&&(c.Q6J("ngIf",t.displayLabel),c.xp6(1),c.Q6J("ngIf",!t.isEditMode()),c.xp6(1),c.Q6J("ngIf",t.isEditable()&&t.isEditMode()))},dependencies:[n.mk,n.O5,o.Fj,o.JJ,o.On,T.J,Xe.B,h.q,A.D,ld],encapsulation:2})),fieldCategories})();function _d(e,t){if(1&e&&c._UZ(0,"field-label",4),2&e){const e=c.oxw();c.Q6J("fieldname",e.fieldname)("fieldconfig",e.fieldconfig)}}function yd(e,t){if(1&e&&(c.TgZ(0,"span",5),c._uU(1),c.qZA()),2&e){const e=c.oxw();c.Q6J("title",e.display_value),c.xp6(1),c.Oqu(e.display_value)}}function xd(e,t){1&e&&c._UZ(0,"system-stencil")}let wd=(()=>{var e;class fieldCategory extends r.O{constructor(e,t,s,n,o,l,a,d,r){super(e,t,s,n,o),(0,i.Z)(this,"model",void 0),(0,i.Z)(this,"view",void 0),(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"router",void 0),(0,i.Z)(this,"backend",void 0),(0,i.Z)(this,"config",void 0),(0,i.Z)(this,"elementRef",void 0),(0,i.Z)(this,"renderer",void 0),(0,i.Z)(this,"treeid",void 0),(0,i.Z)(this,"categoryFields",[]),this.model=e,this.view=t,this.language=s,this.metadata=n,this.router=o,this.backend=l,this.config=a,this.elementRef=d,this.renderer=r}ngOnInit(){super.ngOnInit();let e=this.config.getData("categories"),t=this.metadata.getModuleDefs(this.model.module);if(t.categorytrees){let e=t.categorytrees.find((e=>e.module_field_c1==this.fieldname||e.module_field_c2==this.fieldname||e.module_field_c3==this.fieldname||e.module_field_c4==this.fieldname));e&&(this.treeid=e.syscategorytree_id)}!this.treeid||e&&e[this.treeid]||(e||(e={}),e[this.treeid]=[],this.config.setData("categories",e),this.backend.getRequest(`configuration/spiceui/core/categorytrees/${this.treeid}/categorytreenodes`).subscribe((t=>{e[this.treeid]=t,this.config.setData("categories",e)})))}get categories(){let e=this.config.getData("categories");return e?e[this.treeid]:[]}get display_value(){let e=this.categories.find((e=>e.node_key==this.value));return e?e.node_name:this.value}}return e=fieldCategory,(0,i.Z)(fieldCategory,"ɵfac",(function(t){return new(t||e)(c.Y36(w.o),c.Y36(k.e),c.Y36(x.d),c.Y36(u.Pu),c.Y36(L.F0),c.Y36($.y),c.Y36(ee.C),c.Y36(c.SBq),c.Y36(c.Qsj))})),(0,i.Z)(fieldCategory,"ɵcmp",c.Xpm({type:e,selectors:[["field-category"]],features:[c.qOj],decls:5,vars:6,consts:[[3,"fieldname","fieldconfig",4,"ngIf"],[3,"fielddisplayclass","fieldconfig","editable"],[3,"title",4,"ngIf","ngIfElse"],["nocategories",""],[3,"fieldname","fieldconfig"],[3,"title"]],template:function(e,t){if(1&e&&(c.YNc(0,_d,1,2,"field-label",0),c.TgZ(1,"field-generic-display",1),c.YNc(2,yd,2,2,"span",2),c.YNc(3,xd,1,0,"ng-template",null,3,c.W1O),c.qZA()),2&e){const e=c.MAs(4);c.Q6J("ngIf",t.displayLabel),c.xp6(1),c.Q6J("fielddisplayclass",t.fielddisplayclass)("fieldconfig",t.fieldconfig)("editable",!1),c.xp6(1),c.Q6J("ngIf",t.categories.length>0)("ngIfElse",e)}},dependencies:[n.O5,Xe.B,h.q,A.D],encapsulation:2})),fieldCategory})();function Td(e,t){1&e&&(c.TgZ(0,"div",3),c._UZ(1,"system-spinner"),c.qZA())}function Cd(e,t){if(1&e&&(c.TgZ(0,"span",11),c._UZ(1,"system-label",12),c.qZA()),2&e){const e=c.oxw().$implicit;c.xp6(1),c.Q6J("label",e.name)}}function Ad(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"span",13),c.NdJ("click",(function(){c.CHM(e);const t=c.oxw().$implicit,s=c.oxw(2);return c.KtG(s.choose(t))})),c._UZ(1,"system-label",12),c.qZA()}if(2&e){const e=c.oxw().$implicit;c.xp6(1),c.Q6J("label",e.name)}}function kd(e,t){1&e&&c._UZ(0,"system-utility-icon",14),2&e&&c.Q6J("icon","favorite")("size","xx-small")}function Ld(e,t){1&e&&c._UZ(0,"system-utility-icon",15),2&e&&c.Q6J("icon","chevronright")("size","xx-small")}const Id=function(e){return{"slds-theme--shade":e}};function Md(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"div",5)(1,"div",6),c.NdJ("mouseenter",(function(){const t=c.CHM(e).$implicit,s=c.oxw(2);return c.KtG(s.select(t))})),c.YNc(2,Cd,2,1,"span",7),c.YNc(3,Ad,2,1,"span",8),c.YNc(4,kd,1,2,"system-utility-icon",9),c.YNc(5,Ld,1,2,"system-utility-icon",10),c.qZA()()}if(2&e){const e=t.$implicit,s=c.oxw(2);c.Q6J("ngClass",c.VKq(5,Id,s.isCategorySelected(e))),c.xp6(2),c.Q6J("ngIf",0==e.selectable&&e.categories),c.xp6(1),c.Q6J("ngIf",1==e.selectable||!e.categories),c.xp6(1),c.Q6J("ngIf",1==e.favorite),c.xp6(1),c.Q6J("ngIf",e.categories)}}function Sd(e,t){if(1&e&&(c.TgZ(0,"div"),c.YNc(1,Md,6,7,"div",4),c.qZA()),2&e){const e=t.$implicit,s=c.oxw();c.Gre("slds-col slds-size--1-of-",s.maxlevels,""),c.xp6(1),c.Q6J("ngForOf",e)}}let Jd=(()=>{var e;class fieldServiceCategoryTree{constructor(e,t,s,n){(0,i.Z)(this,"model",void 0),(0,i.Z)(this,"backend",void 0),(0,i.Z)(this,"config",void 0),(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"category_tree",[]),(0,i.Z)(this,"maxlevels",4),(0,i.Z)(this,"levels",[]),(0,i.Z)(this,"selected_categorys",[]),(0,i.Z)(this,"choose_emitter",new c.vpe),(0,i.Z)(this,"loading",!0),this.model=e,this.backend=t,this.config=s,this.language=n,this.resetLevels(),this.config.getData("service_category_tree")?(this.category_tree=this.config.getData("service_category_tree"),this.levels[0]=this.category_tree,this.loading=!1):this.backend.getRequest("configuration/spiceui/core/servicecategories/tree").subscribe((e=>{this.config.setData("service_category_tree",e),this.category_tree=e,this.levels[0]=this.category_tree,this.loading=!1}))}resetLevels(e=0){for(let t=e;t<this.maxlevels;t++)this.levels[t]=[];this.selected_categorys.splice(e,this.maxlevels-e)}select(e){this.selected_categorys[e.level]=e,e.categories?(this.levels[e.level+1]=e.categories,this.resetLevels(e.level+2)):this.resetLevels(e.level+1)}choose(e){this.selected_categorys[e.level]=e,this.choose_emitter.emit(this.selected_categorys)}isCategorySelected(e){for(let t of this.selected_categorys)if(t.id==e.id)return!0;return!1}}return e=fieldServiceCategoryTree,(0,i.Z)(fieldServiceCategoryTree,"ɵfac",(function(t){return new(t||e)(c.Y36(w.o),c.Y36($.y),c.Y36(ee.C),c.Y36(x.d))})),(0,i.Z)(fieldServiceCategoryTree,"ɵcmp",c.Xpm({type:e,selectors:[["field-service-category-tree"]],inputs:{maxlevels:"maxlevels"},outputs:{choose_emitter:"choose"},decls:3,vars:2,consts:[["role","listbox",1,"slds-listbox","slds-listbox_vertical","slds-dropdown_fluid","slds-grid"],["class","slds-p-around--small slds-align--absolute-center",4,"ngIf"],[3,"class",4,"ngFor","ngForOf"],[1,"slds-p-around--small","slds-align--absolute-center"],[3,"ngClass",4,"ngFor","ngForOf"],[3,"ngClass"],[1,"slds-grid","slds-grid--vertical-align-center","slds-p-around--xx-small",3,"mouseenter"],["class","slds-truncate","style","cursor: default;",4,"ngIf"],["class","slds-truncate","style","cursor: pointer; text-decoration: underline;",3,"click",4,"ngIf"],["class","slds-m-left--small",3,"icon","size",4,"ngIf"],["class","slds-col--bump-left",3,"icon","size",4,"ngIf"],[1,"slds-truncate",2,"cursor","default"],[3,"label"],[1,"slds-truncate",2,"cursor","pointer","text-decoration","underline",3,"click"],[1,"slds-m-left--small",3,"icon","size"],[1,"slds-col--bump-left",3,"icon","size"]],template:function(e,t){1&e&&(c.TgZ(0,"div",0),c.YNc(1,Td,2,0,"div",1),c.YNc(2,Sd,2,4,"div",2),c.qZA()),2&e&&(c.xp6(1),c.Q6J("ngIf",t.loading),c.xp6(1),c.Q6J("ngForOf",t.levels))},dependencies:[n.mk,n.sg,n.O5,se._,Go.W,M.r],encapsulation:2})),fieldServiceCategoryTree})();function Od(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"li",4)(1,"span",5),c.NdJ("click",(function(){const t=c.CHM(e).$implicit,s=c.oxw();return c.KtG(s.choose(t))})),c.TgZ(2,"span",6),c._uU(3),c.qZA()()()}if(2&e){const e=t.$implicit,s=c.oxw();c.xp6(3),c.Oqu(s.language.getLabel(e.display_name))}}function Nd(e,t){1&e&&(c.TgZ(0,"li",7)(1,"span",8),c._uU(2,"No Matches found."),c.qZA()())}let Fd=(()=>{var e;class fieldServiceCategorySearch{constructor(e,t,s,n){(0,i.Z)(this,"model",void 0),(0,i.Z)(this,"backend",void 0),(0,i.Z)(this,"config",void 0),(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"search",void 0),(0,i.Z)(this,"categories",[]),(0,i.Z)(this,"selected_categorys",[]),(0,i.Z)(this,"choose_emitter",new c.vpe),this.model=e,this.backend=t,this.config=s,this.language=n,this.config.getData("service_category_tree")?this.flatteningOutCategoryTree(this.config.getData("service_category_tree")):this.backend.getRequest("configuration/spiceui/core/servicecategories/tree").subscribe((e=>{this.config.setData("service_category_tree",e),this.flatteningOutCategoryTree(e)}))}get results(){return this.categories.filter((e=>e.display_name.toLowerCase().includes(this.search.toLowerCase())))}flatteningOutCategoryTree(e){for(let t of e)t.parents=[],this.loopThroughTree(t)}loopThroughTree(e){if(e.display_name="",e.parents.length>0)for(let t of e.parents)e.display_name+=this.language.getLabel(t.name)+"\\";if(e.display_name+=this.language.getLabel(e.name),this.categories.push(e),e.categories)for(let t of e.categories)t.parents=[...e.parents],t.parents.push(e),this.loopThroughTree(t)}choose(e){let t=[...e.parents];t.push(e),this.choose_emitter.emit(t)}}return e=fieldServiceCategorySearch,(0,i.Z)(fieldServiceCategorySearch,"ɵfac",(function(t){return new(t||e)(c.Y36(w.o),c.Y36($.y),c.Y36(ee.C),c.Y36(x.d))})),(0,i.Z)(fieldServiceCategorySearch,"ɵcmp",c.Xpm({type:e,selectors:[["field-service-category-search"]],inputs:{search:"search"},outputs:{choose_emitter:"choose"},decls:4,vars:2,consts:[["role","listbox"],["role","presentation",1,"slds-listbox","slds-dropdown_fluid"],["class","slds-listbox__item","role","presentation",4,"ngFor","ngForOf"],["class","slds-listbox__item",4,"ngIf"],["role","presentation",1,"slds-listbox__item"],["role","option",1,"slds-listbox__option","slds-listbox__option_entity",3,"click"],[1,"slds-p-left--medium","slds-listbox__option-text","slds-listbox__option-text_entity"],[1,"slds-listbox__item"],[1,"slds-p-left--medium"]],template:function(e,t){1&e&&(c.TgZ(0,"div",0)(1,"ul",1),c.YNc(2,Od,4,1,"li",2),c.YNc(3,Nd,3,0,"li",3),c.qZA()()),2&e&&(c.xp6(2),c.Q6J("ngForOf",t.results),c.xp6(1),c.Q6J("ngIf",0==t.results.length))},dependencies:[n.sg,n.O5],encapsulation:2})),fieldServiceCategorySearch})();function qd(e,t){if(1&e&&c._UZ(0,"field-label",3),2&e){const e=c.oxw();c.Q6J("fieldname",e.fieldname)("fieldconfig",e.fieldconfig)}}function Ed(e,t){if(1&e&&(c.TgZ(0,"field-generic-display",4),c._uU(1),c.qZA()),2&e){const e=c.oxw();c.Q6J("fielddisplayclass",e.fielddisplayclass)("fieldconfig",e.fieldconfig)("editable",e.isEditable()),c.xp6(1),c.hij(" ",e.display_value,"\n")}}function Yd(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"div",11)(1,"div",12)(2,"span",13)(3,"span",14),c._uU(4),c.qZA(),c.TgZ(5,"button",15),c.NdJ("click",(function(){c.CHM(e);const t=c.oxw(2);return c.KtG(t.unchooseCategories())})),c._UZ(6,"system-button-icon",16),c.qZA()()()()}if(2&e){const e=c.oxw(2);c.xp6(4),c.Oqu(e.display_value),c.xp6(2),c.Q6J("icon","close")}}function Dd(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"div",11)(1,"input",17),c.NdJ("ngModelChange",(function(t){c.CHM(e);const s=c.oxw(2);return c.KtG(s.search=t)}))("click",(function(t){c.CHM(e);const s=c.oxw(2);return c.KtG(s.checkUserAction(t))}))("keyup",(function(t){c.CHM(e);const s=c.oxw(2);return c.KtG(s.checkUserAction(t))})),c.qZA()()}if(2&e){const e=c.oxw(2);c.xp6(1),c.s9C("placeholder",e.language.getLabel("LBL_SEARCH")),c.Q6J("ngModel",e.search)}}function Qd(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"div")(1,"field-service-category-tree",18),c.NdJ("choose",(function(t){c.CHM(e);const s=c.oxw(2);return c.KtG(s.chooseCategories(t))})),c.qZA()()}if(2&e){const e=c.oxw(2);c.xp6(1),c.Q6J("maxlevels",e.maxlevels)}}function Ud(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"div")(1,"field-service-category-search",19),c.NdJ("choose",(function(t){c.CHM(e);const s=c.oxw(2);return c.KtG(s.chooseCategories(t))})),c.qZA()()}if(2&e){const e=c.oxw(2);c.xp6(1),c.Q6J("search",e.search)}}function Rd(e,t){if(1&e&&(c.TgZ(0,"div",5)(1,"div",6)(2,"div",7)(3,"div",8),c.YNc(4,Yd,7,2,"div",9),c.YNc(5,Dd,2,2,"div",9),c.YNc(6,Qd,2,1,"div",10),c.YNc(7,Ud,2,1,"div",10),c.qZA()()()()),2&e){const e=c.oxw();c.Q6J("ngClass",e.getFieldClass()),c.xp6(4),c.Q6J("ngIf",e.display_value),c.xp6(1),c.Q6J("ngIf",!e.display_value),c.xp6(1),c.Q6J("ngIf",e.show_tree),c.xp6(1),c.Q6J("ngIf",e.show_search)}}let jd=(()=>{var e;class fieldServiceCategories extends r.O{constructor(e,t,s,n,o,l,a){super(e,t,s,n,o),(0,i.Z)(this,"model",void 0),(0,i.Z)(this,"view",void 0),(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"router",void 0),(0,i.Z)(this,"backend",void 0),(0,i.Z)(this,"config",void 0),(0,i.Z)(this,"fields",["sysservicecategory_id1","sysservicecategory_id2","sysservicecategory_id3","sysservicecategory_id4"]),(0,i.Z)(this,"show_tree",!1),(0,i.Z)(this,"show_search",!1),(0,i.Z)(this,"search",void 0),(0,i.Z)(this,"categories",[]),this.model=e,this.view=t,this.language=s,this.metadata=n,this.router=o,this.backend=l,this.config=a,this.config.getData("service_categories")?this.categories=this.config.getData("service_categories"):(this.config.setData("service_categories",[]),this.backend.getRequest("configuration/spiceui/core/servicecategories").subscribe((e=>{this.categories=e,this.config.setData("service_categories",e)})))}get display_value(){let e="";for(let t of this.fields){if(!this.model.getField(t)||!this.categories[this.model.getField(t)])break;e+=this.language.getLabel(this.categories[this.model.getField(t)].name)+"\\"}return e=e.substring(0,e.length-1),e}get maxlevels(){return this.fieldconfig.maxlevels?this.fieldconfig.maxlevels:3}checkUserAction(e){this.search?(this.show_tree=!1,this.show_search=!0):(this.show_tree=!0,this.show_search=!1)}chooseCategories(e){this.show_search=!1,this.show_tree=!1;for(let t=0;t<this.fields.length;t++)e[t]?this.model.setField(this.fields[t],e[t].id):this.model.setField(this.fields[t],"");this.search=null;for(let t=e.length-1;t>=0;t--){let s=e[t];if(s.servicequeue_id){this.model.setField("servicequeue_id",s.servicequeue_id),this.model.setField("servicequeue_name",s.servicequeue_name);break}}}unchooseCategories(){let e={};for(let t of this.fields)e[t]="";this.model.setFields(e)}}return e=fieldServiceCategories,(0,i.Z)(fieldServiceCategories,"ɵfac",(function(t){return new(t||e)(c.Y36(w.o),c.Y36(k.e),c.Y36(x.d),c.Y36(u.Pu),c.Y36(L.F0),c.Y36($.y),c.Y36(ee.C))})),(0,i.Z)(fieldServiceCategories,"ɵcmp",c.Xpm({type:e,selectors:[["field-service-categories"]],features:[c.qOj],decls:3,vars:3,consts:[[3,"fieldname","fieldconfig",4,"ngIf"],[3,"fielddisplayclass","fieldconfig","editable",4,"ngIf"],["class","slds-form-element__control slds-m-vertical--xx-small",3,"ngClass",4,"ngIf"],[3,"fieldname","fieldconfig"],[3,"fielddisplayclass","fieldconfig","editable"],[1,"slds-form-element__control","slds-m-vertical--xx-small",3,"ngClass"],[1,"slds-form-element__control"],[1,"slds-combobox_container","slds-has-inline-listbox"],[1,"slds-combobox","slds-dropdown-trigger","slds-dropdown-trigger_click","slds-combobox-lookup"],["class","slds-combobox__form-element slds-input-has-icon slds-input-has-icon_right",4,"ngIf"],[4,"ngIf"],[1,"slds-combobox__form-element","slds-input-has-icon","slds-input-has-icon_right"],[1,"slds-pill_container"],[1,"slds-pill","slds-size--1-of-1"],[1,"slds-pill__label"],[1,"slds-button","slds-button--icon","slds-pill__remove",3,"click"],[3,"icon"],["type","search",1,"slds-input","slds-combobox__input",3,"placeholder","ngModel","ngModelChange","click","keyup"],[3,"maxlevels","choose"],[3,"search","choose"]],template:function(e,t){1&e&&(c.YNc(0,qd,1,2,"field-label",0),c.YNc(1,Ed,2,4,"field-generic-display",1),c.YNc(2,Rd,8,5,"div",2)),2&e&&(c.Q6J("ngIf",t.displayLabel),c.xp6(1),c.Q6J("ngIf",!t.isEditMode()),c.xp6(1),c.Q6J("ngIf",t.isEditable()&&t.isEditMode()))},dependencies:[n.mk,n.O5,o.Fj,o.JJ,o.On,T.J,h.q,A.D,Jd,Fd],encapsulation:2})),fieldServiceCategories})();const Bd=["componentcontainer"];function Gd(e,t){if(1&e&&(c.TgZ(0,"span",2),c._uU(1),c.qZA()),2&e){const e=c.oxw();c.xp6(1),c.Oqu(e.language.getLabel(e.item.action_label))}}let Pd=(()=>{var e;class fieldStatusNetworkItem{constructor(e,t,s,n,o){(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"modal",void 0),(0,i.Z)(this,"model",void 0),(0,i.Z)(this,"injector",void 0),(0,i.Z)(this,"componentcontainer",void 0),(0,i.Z)(this,"item",{}),(0,i.Z)(this,"actioncomponent",void 0),(0,i.Z)(this,"initialized",!1),this.language=e,this.metadata=t,this.modal=s,this.model=n,this.injector=o}get id(){return this.item.id}get hasComponent(){return this.item.status_component&&""!=this.item.status_component}ngAfterViewInit(){this.hasComponent&&this.metadata.addComponent(this.item.status_component,this.componentcontainer,this.injector).subscribe((e=>{this.actioncomponent=e.instance,e.instance.item=this.item})),this.initialized=!0}ngOnChanges(){this.actioncomponent&&(this.actioncomponent.self.destroy(),this.actioncomponent=null),this.initialized&&this.hasComponent&&this.metadata.addComponent(this.item.status_component,this.componentcontainer,this.injector).subscribe((e=>{this.actioncomponent=e.instance,e.instance.item=this.item}))}setStatus(e){this.item.prompt_label?this.modal.confirm(this.language.getLabel(this.item.prompt_label,"","long"),this.language.getLabel(this.item.prompt_label,"")).subscribe((t=>{t&&this.executeChange(e)})):this.executeChange(e)}executeChange(e){this.actioncomponent&&this.actioncomponent.execute?this.actioncomponent.execute():(this.model.startEdit(!0,!1),this.model.setField(e,this.item.status_to),this.model.validate()?this.model.save():this.model.edit())}}return e=fieldStatusNetworkItem,(0,i.Z)(fieldStatusNetworkItem,"ɵfac",(function(t){return new(t||e)(c.Y36(x.d),c.Y36(u.Pu),c.Y36(I.o),c.Y36(w.o),c.Y36(c.zs3))})),(0,i.Z)(fieldStatusNetworkItem,"ɵcmp",c.Xpm({type:e,selectors:[["field-statusnetwork-item"]],viewQuery:function(e,t){if(1&e&&c.Gf(Bd,7,c.s_b),2&e){let e;c.iGM(e=c.CRH())&&(t.componentcontainer=e.first)}},inputs:{item:"item"},features:[c.TTD],decls:3,vars:1,consts:[["class","slds-text-color_default",4,"ngIf"],["componentcontainer",""],[1,"slds-text-color_default"]],template:function(e,t){1&e&&(c.YNc(0,Gd,2,1,"span",0),c._UZ(1,"div",null,1)),2&e&&c.Q6J("ngIf",!t.hasComponent)},dependencies:[n.O5],encapsulation:2})),fieldStatusNetworkItem})();var Hd=s(5681);function zd(e,t){if(1&e&&c._UZ(0,"field-label",5),2&e){const e=c.oxw();c.Q6J("fieldname",e.fieldname)("fieldconfig",e.fieldconfig)}}function Vd(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"li",12),c.NdJ("click",(function(){const t=c.CHM(e).$implicit,s=c.oxw(2);return c.KtG(s.propagateclick(t.id))})),c.TgZ(1,"a",13),c._UZ(2,"field-statusnetwork-item",14),c.qZA()()}if(2&e){const e=t.$implicit;c.xp6(2),c.Q6J("item",e)}}function Kd(e,t){if(1&e&&(c.TgZ(0,"div",6)(1,"button",7),c._UZ(2,"system-button-icon",8),c.qZA(),c.TgZ(3,"div",9)(4,"ul",10),c.YNc(5,Vd,3,1,"li",11),c.qZA()()()),2&e){const e=c.oxw();c.xp6(1),c.Q6J("disabled",e.model.isEditing),c.xp6(4),c.Q6J("ngForOf",e.networkItems)}}let $d=(()=>{var e;class fieldStatusNetwork extends Be{constructor(e,t,s,n,o){super(e,t,s,n,o),(0,i.Z)(this,"model",void 0),(0,i.Z)(this,"view",void 0),(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"router",void 0),(0,i.Z)(this,"buttonitemlist",void 0),(0,i.Z)(this,"options",[]),(0,i.Z)(this,"statusNetwork",[]),this.model=e,this.view=t,this.language=s,this.metadata=n,this.router=o,this.subscriptions.add(this.language.currentlanguage$.subscribe((e=>{this.getOptions()})))}ngOnInit(){super.ngOnInit(),this.initializeNetwork(),this.getOptions()}getValue(){return this.language.getFieldDisplayOptionValue(this.model.module,this.fieldname,this.value)}initializeNetwork(){let e=this.metadata.checkStatusManaged(this.model.module);0!=e&&e.statusField==this.fieldname&&(this.statusNetwork=e.statusNetwork)}get networkItems(){let e=[];for(let t of this.statusNetwork)t.status_from!=this.value||t.required_model_state&&!this.model.checkModelState(t.required_model_state)||e.push(t);return e}getOptions(){let e=[],t=this.language.getFieldDisplayOptions(this.model.module,this.fieldname);for(let s in t)e.push({value:s,display:t[s]});this.options=e}propagateclick(e){this.buttonitemlist.some((t=>{if(t.id==e)return t.setStatus(this.fieldname),!0}))}}return e=fieldStatusNetwork,(0,i.Z)(fieldStatusNetwork,"ɵfac",(function(t){return new(t||e)(c.Y36(w.o),c.Y36(k.e),c.Y36(x.d),c.Y36(u.Pu),c.Y36(L.F0))})),(0,i.Z)(fieldStatusNetwork,"ɵcmp",c.Xpm({type:e,selectors:[["field-statusnetwork"]],viewQuery:function(e,t){if(1&e&&c.Gf(Pd,5),2&e){let e;c.iGM(e=c.CRH())&&(t.buttonitemlist=e)}},features:[c.qOj],decls:7,vars:7,consts:[[3,"fieldname","fieldconfig",4,"ngIf"],[3,"fielddisplayclass","editable","fieldconfig","fieldid"],[1,"slds-grid","slds-grid--vertical-align-center","slds-grid--align-spread"],[1,"slds-truncate"],["class","slds-dropdown-trigger slds-dropdown-trigger_click slds-button_last","system-dropdown-trigger","",4,"ngIf"],[3,"fieldname","fieldconfig"],["system-dropdown-trigger","",1,"slds-dropdown-trigger","slds-dropdown-trigger_click","slds-button_last"],["system-title","LBL_SET_STATUS",1,"slds-button","slds-button--icon-small","slds-button_icon-border-filled",3,"disabled"],["icon","stage"],[1,"slds-dropdown","slds-dropdown_right","slds-dropdown_actions"],["role","menu",1,"slds-dropdown__list"],["class","slds-dropdown__item","role","presentation",3,"click",4,"ngFor","ngForOf"],["role","presentation",1,"slds-dropdown__item",3,"click"],["href","javascript:void(0);","role","menuitem",1,"slds-truncate"],[3,"item"]],template:function(e,t){1&e&&(c.YNc(0,zd,1,2,"field-label",0),c.TgZ(1,"field-generic-display",1)(2,"div",2)(3,"div",3)(4,"span"),c._uU(5),c.qZA()(),c.YNc(6,Kd,6,2,"div",4),c.qZA()()),2&e&&(c.Q6J("ngIf",t.displayLabel),c.xp6(1),c.Q6J("fielddisplayclass",t.fielddisplayclass)("editable",!1)("fieldconfig",t.fieldconfig)("fieldid",t.fieldid),c.xp6(4),c.Oqu(t.getValue()),c.xp6(1),c.Q6J("ngIf",t.networkItems.length>0))},dependencies:[n.sg,n.O5,T.J,Hd.l,Rn.S,h.q,A.D,Pd],encapsulation:2})),fieldStatusNetwork})();function Xd(e,t){if(1&e&&c._UZ(0,"field-label",2),2&e){const e=c.oxw();c.Q6J("fieldname",e.fieldname)("fieldconfig",e.fieldconfig)}}function Wd(e,t){if(1&e&&(c.TgZ(0,"div",5)(1,"div",6),c._uU(2),c.qZA(),c.TgZ(3,"div",7),c._uU(4),c.qZA()()),2&e){const e=t.$implicit,s=c.oxw(2);c.xp6(2),c.AsE("",e.user_name," • ",s.formatTimestamp(e.timestamp),""),c.xp6(2),c.Oqu(e.text)}}function er(e,t){if(1&e&&(c.TgZ(0,"div")(1,"div",3),c.YNc(2,Wd,5,3,"div",4),c.qZA()()),2&e){const e=c.oxw();c.xp6(1),c.Q6J("ngStyle",e.styles),c.xp6(1),c.Q6J("ngForOf",e.logs)}}function tr(e,t){if(1&e&&(c.TgZ(0,"div",5)(1,"div",6),c._uU(2),c.qZA(),c.TgZ(3,"div",13),c._uU(4),c.qZA()()),2&e){const e=t.$implicit,s=c.oxw(2);c.xp6(2),c.AsE("",e.user_name," • ",s.formatTimestamp(e.timestamp),""),c.xp6(2),c.Oqu(e.text)}}function sr(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"div")(1,"div",8)(2,"div",9)(3,"div",10)(4,"textarea",11),c.NdJ("ngModelChange",(function(t){c.CHM(e);const s=c.oxw();return c.KtG(s.new_log_entry=t)})),c.qZA()()(),c.TgZ(5,"div",12),c.YNc(6,tr,5,3,"div",4),c.qZA()()()}if(2&e){const e=c.oxw();c.xp6(4),c.Q6J("ngModel",e.new_log_entry)("ngStyle",e.styles),c.xp6(1),c.Q6J("ngStyle",e.styles),c.xp6(1),c.Q6J("ngForOf",e.logs)}}let ir=(()=>{var e;class fieldWorklog extends r.O{constructor(e,t,s,n,o,l,a){super(e,t,s,n,o),(0,i.Z)(this,"model",void 0),(0,i.Z)(this,"view",void 0),(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"router",void 0),(0,i.Z)(this,"session",void 0),(0,i.Z)(this,"userpreferences",void 0),(0,i.Z)(this,"_new_log_entry",void 0),(0,i.Z)(this,"origin_logs",[]),(0,i.Z)(this,"initialized",!1),this.model=e,this.view=t,this.language=s,this.metadata=n,this.router=o,this.session=l,this.userpreferences=a,this.view.isEditMode()&&this.view.mode$.subscribe((e=>{"edit"==e&&(this.origin_logs=this.logs)}))}ngOnInit(){super.ngOnInit(),this.view.isEditMode()&&(this.view.mode$.subscribe((e=>{"edit"==e&&(this.origin_logs=this.logs)})),this.initialized=!0)}get logs(){return this.value?"string"==typeof this.value?JSON.parse(this.value):this.value:[]}set logs(e){"json"!=this.field_defs.type?this.value=JSON.stringify(e):this.value=e}set new_log_entry(e){this._new_log_entry=e,this.initialized||this.ngOnInit();let t=[...this.origin_logs];t.unshift({timestamp:+new Date,user_name:this.session.authData.userName,user_id:this.session.authData.userId,text:e}),this.logs=t}get styles(){return{height:this.fieldconfig.height?this.fieldconfig.height+"px":"200px"}}formatTimestamp(e){let t=moment(e);return this.userpreferences.formatDateTime(t)}}return e=fieldWorklog,(0,i.Z)(fieldWorklog,"ɵfac",(function(t){return new(t||e)(c.Y36(w.o),c.Y36(k.e),c.Y36(x.d),c.Y36(u.Pu),c.Y36(L.F0),c.Y36(yo.n),c.Y36(Ze.z))})),(0,i.Z)(fieldWorklog,"ɵcmp",c.Xpm({type:e,selectors:[["field-worklog"]],features:[c.qOj],decls:3,vars:3,consts:[[3,"fieldname","fieldconfig",4,"ngIf"],[4,"ngIf"],[3,"fieldname","fieldconfig"],[1,"slds-scrollable--y",3,"ngStyle"],["class","slds-p-around--x-small slds-border--bottom",4,"ngFor","ngForOf"],[1,"slds-p-around--x-small","slds-border--bottom"],[1,"slds-p-around--x-small","slds-theme--shade"],[1,"slds-p-around--x-small",2,"white-space","pre-line"],[1,"slds-grid"],[1,"slds-form-element","slds-size--1-of-2","slds-m-right--xx-small"],[1,"slds-form-element__control"],["placeholder","Write your log here...",1,"slds-textarea",3,"ngModel","ngStyle","ngModelChange"],[1,"slds-size--1-of-2","slds-scrollable--y","slds-m-left--xx-small",3,"ngStyle"],[1,"slds-p-around--x-small"]],template:function(e,t){1&e&&(c.YNc(0,Xd,1,2,"field-label",0),c.YNc(1,er,3,2,"div",1),c.YNc(2,sr,7,4,"div",1)),2&e&&(c.Q6J("ngIf",t.displayLabel),c.xp6(1),c.Q6J("ngIf",!t.isEditMode()),c.xp6(1),c.Q6J("ngIf",t.isEditMode()))},dependencies:[n.sg,n.O5,n.PC,o.Fj,o.JJ,o.On,h.q],encapsulation:2})),fieldWorklog})(),nr=(()=>{var e;class FieldModelInfoComponent{constructor(e,t){(0,i.Z)(this,"model",void 0),(0,i.Z)(this,"language",void 0),this.model=e,this.language=t}}return e=FieldModelInfoComponent,(0,i.Z)(FieldModelInfoComponent,"ɵfac",(function(t){return new(t||e)(c.Y36(w.o),c.Y36(x.d))})),(0,i.Z)(FieldModelInfoComponent,"ɵcmp",c.Xpm({type:e,selectors:[["field-model-info"]],decls:2,vars:2,consts:[["system-model-popover","",1,"slds-icon_container"],[3,"icon","size"]],template:function(e,t){1&e&&(c.TgZ(0,"div",0),c._UZ(1,"system-utility-icon",1),c.qZA()),2&e&&(c.xp6(1),c.Q6J("icon","info")("size","x-small"))},dependencies:[M.r,gs.g],encapsulation:2})),FieldModelInfoComponent})();var or=s(6898);function lr(e,t){if(1&e&&c._UZ(0,"field-label",3),2&e){const e=c.oxw();c.Q6J("fieldname",e.fieldname)("fieldconfig",e.fieldconfig)}}function ar(e,t){if(1&e&&(c.TgZ(0,"field-generic-display",4),c._uU(1),c.qZA()),2&e){const e=c.oxw();c.Q6J("fielddisplayclass",e.fielddisplayclass)("editable",e.isEditable())("fieldconfig",e.fieldconfig)("fieldid",e.fieldid),c.xp6(1),c.hij(" ",e.getValue(),"\n")}}function dr(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"div",5)(1,"div",6)(2,"system-input-module",7),c.NdJ("ngModelChange",(function(t){c.CHM(e);const s=c.oxw();return c.KtG(s.value=t)})),c.qZA(),c._UZ(3,"field-messages",8),c.qZA()()}if(2&e){const e=c.oxw();c.xp6(1),c.Q6J("ngClass",e.getFieldClass()),c.xp6(1),c.Q6J("ngModel",e.value)("displaytechnicalname",!1)("displayAsterisk",e.displayAsterisk),c.xp6(1),c.Q6J("fieldname",e.fieldname)}}let rr=(()=>{var e;class FieldEnumModulesComponent extends Be{constructor(e,t,s,n,o){super(e,t,s,n,o),(0,i.Z)(this,"model",void 0),(0,i.Z)(this,"view",void 0),(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"router",void 0),this.model=e,this.view=t,this.language=s,this.metadata=n,this.router=o}get displayAsterisk(){return!!this.fieldconfig.displayAsterisk}}return e=FieldEnumModulesComponent,(0,i.Z)(FieldEnumModulesComponent,"ɵfac",(function(t){return new(t||e)(c.Y36(w.o),c.Y36(k.e),c.Y36(x.d),c.Y36(u.Pu),c.Y36(L.F0))})),(0,i.Z)(FieldEnumModulesComponent,"ɵcmp",c.Xpm({type:e,selectors:[["field-enum-modules"]],features:[c.qOj],decls:3,vars:3,consts:[[3,"fieldname","fieldconfig",4,"ngIf"],[3,"fielddisplayclass","editable","fieldconfig","fieldid",4,"ngIf"],["class","slds-form-element",4,"ngIf"],[3,"fieldname","fieldconfig"],[3,"fielddisplayclass","editable","fieldconfig","fieldid"],[1,"slds-form-element"],[1,"slds-form-element__control",3,"ngClass"],[3,"ngModel","displaytechnicalname","displayAsterisk","ngModelChange"],[3,"fieldname"]],template:function(e,t){1&e&&(c.YNc(0,lr,1,2,"field-label",0),c.YNc(1,ar,2,5,"field-generic-display",1),c.YNc(2,dr,4,5,"div",2)),2&e&&(c.Q6J("ngIf",t.displayLabel),c.xp6(1),c.Q6J("ngIf",!t.isEditMode()),c.xp6(1),c.Q6J("ngIf",t.isEditMode()))},dependencies:[n.mk,n.O5,o.JJ,o.On,or.a,h.q,A.D,J.a],encapsulation:2})),FieldEnumModulesComponent})();function cr(e,t){if(1&e&&c._UZ(0,"field-label",5),2&e){const e=c.oxw();c.Q6J("fieldname",e.fieldname)("fieldconfig",e.fieldconfig)}}let ur=(()=>{var e;class fieldGDPR extends r.O{constructor(e,t,s,n,o,l,a,d){super(e,t,s,n,o),(0,i.Z)(this,"model",void 0),(0,i.Z)(this,"view",void 0),(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"router",void 0),(0,i.Z)(this,"backend",void 0),(0,i.Z)(this,"modal",void 0),(0,i.Z)(this,"injector",void 0),(0,i.Z)(this,"gdprData",{}),(0,i.Z)(this,"loaded",!1),(0,i.Z)(this,"marketingStyle",void 0),(0,i.Z)(this,"dataStyle",void 0),this.model=e,this.view=t,this.language=s,this.metadata=n,this.router=o,this.backend=l,this.modal=a,this.injector=d}ngOnInit(){this.backend.getRequest("common/gdpr/"+this.model.module+"/"+this.model.id).subscribe((e=>{this.gdprData=e,this.loaded=!0,this.setMarketingStyle(),this.setDataStyle()})),this.subscriptions.add(this.model.data$.subscribe((()=>{this.setMarketingStyle(),this.setDataStyle()})))}setDataStyle(){if(!this.loaded)return{};let e="#cc0000";("1"==this.model.data.gdpr_data_agreement||this.gdprData?.related?.some((e=>"1"==e.gdpr_data_agreement)))&&(e="#009900"),this.dataStyle={"background-color":e,color:"white",cursor:"pointer"}}setMarketingStyle(){if(!this.loaded)return{};const e=this.metadata.getModuleFields(this.model.module)?.gdpr_marketing_agreement;let t="#cc0000";("enum"==e?.type&&"g"==this.model.data.gdpr_marketing_agreement||e?.type?.startsWith("bool")&&1==this.model.data.gdpr_marketing_agreement||this.gdprData?.related?.some((e=>"1"==e.gdpr_marketing_agreement)))&&(t="#009900"),this.marketingStyle={"background-color":t,color:"white",cursor:"pointer"}}showDetails(){this.modal.openModal("ObjectGDPRModal",!0,this.injector).subscribe((e=>{e.instance.gdprRelatedLog=this.gdprData.related,e.instance.gdprAuditLog=this.gdprData.audit.map((e=>({...e,model:{module:this.model.module,id:this.model.id,[e.field_name]:this.model.utils.backend2spice(this.model.module,e.field_name,e.value)}})))}))}}return e=fieldGDPR,(0,i.Z)(fieldGDPR,"ɵfac",(function(t){return new(t||e)(c.Y36(w.o),c.Y36(k.e),c.Y36(x.d),c.Y36(u.Pu),c.Y36(L.F0),c.Y36($.y),c.Y36(I.o),c.Y36(c.zs3))})),(0,i.Z)(fieldGDPR,"ɵcmp",c.Xpm({type:e,selectors:[["field-gdpr"]],features:[c.qOj],decls:6,vars:3,consts:[[3,"fieldname","fieldconfig",4,"ngIf"],[1,"slds-grid","slds-grid--vertical-align-center","slds-p-vertical--xxx-small"],[1,"slds-badge","slds-badge__icon",3,"ngStyle","click"],["label","LBL_DATA"],["label","LBL_MARKETING"],[3,"fieldname","fieldconfig"]],template:function(e,t){1&e&&(c.YNc(0,cr,1,2,"field-label",0),c.TgZ(1,"div",1)(2,"span",2),c.NdJ("click",(function(){return t.showDetails()})),c._UZ(3,"system-label",3),c.qZA(),c.TgZ(4,"span",2),c.NdJ("click",(function(){return t.showDetails()})),c._UZ(5,"system-label",4),c.qZA()()),2&e&&(c.Q6J("ngIf",t.displayLabel),c.xp6(2),c.Q6J("ngStyle",t.dataStyle),c.xp6(2),c.Q6J("ngStyle",t.marketingStyle))},dependencies:[n.O5,n.PC,se._,h.q],encapsulation:2})),fieldGDPR})();function hr(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"li",4)(1,"span",5),c.NdJ("click",(function(){const t=c.CHM(e).$implicit,s=c.oxw();return c.KtG(s.choose(t))})),c.TgZ(2,"span",6),c._uU(3),c.qZA()()()}if(2&e){const e=t.$implicit,s=c.oxw();c.xp6(3),c.Oqu(s.language.getLabel(e.display_name))}}function mr(e,t){1&e&&(c.TgZ(0,"li",7)(1,"span",8),c._uU(2,"No Matches found."),c.qZA()())}let gr=(()=>{var e;class fieldSelectTreeSearch{constructor(e,t,s,n){(0,i.Z)(this,"model",void 0),(0,i.Z)(this,"backend",void 0),(0,i.Z)(this,"config",void 0),(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"search",void 0),(0,i.Z)(this,"treekey",void 0),(0,i.Z)(this,"sel_fields",[]),(0,i.Z)(this,"selected_categorys",[]),(0,i.Z)(this,"choose_emitter",new c.vpe),this.model=e,this.backend=t,this.config=s,this.language=n}ngOnInit(){this.config.getData("select_tree_tree")?this.flatteningOutCategoryTree(this.config.getData("select_tree_tree")):this.backend.getRequest("configuration/spiceui/core/selecttree/tree/"+this.treekey).subscribe((e=>{this.config.setData("select_tree_tree",e),this.flatteningOutCategoryTree(e)}))}get results(){return this.sel_fields.filter((e=>e.display_name.toLowerCase().includes(this.search.toLowerCase())))}flatteningOutCategoryTree(e){for(let t of e)t.parents=[],this.loopThroughTree(t)}loopThroughTree(e){if(e.display_name="",e.parents.length>0)for(let t of e.parents)e.display_name+=this.language.getLabel(t.name)+"\\";if(e.display_name+=this.language.getLabel(e.name),this.sel_fields.push(e),e.childs)for(let t of e.childs)t.parents=[...e.parents],t.parents.push(e),this.loopThroughTree(t)}choose(e){let t=[...e.parents];t.push(e),this.choose_emitter.emit(t)}}return e=fieldSelectTreeSearch,(0,i.Z)(fieldSelectTreeSearch,"ɵfac",(function(t){return new(t||e)(c.Y36(w.o),c.Y36($.y),c.Y36(ee.C),c.Y36(x.d))})),(0,i.Z)(fieldSelectTreeSearch,"ɵcmp",c.Xpm({type:e,selectors:[["select-tree-search"]],inputs:{search:"search",treekey:"treekey"},outputs:{choose_emitter:"choose"},decls:4,vars:2,consts:[["role","listbox",1,"slds-dropdown_fluid"],["role","presentation",1,"slds-listbox","slds-dropdown_fluid"],["class","slds-listbox__item","role","presentation",4,"ngFor","ngForOf"],["class","slds-listbox__item",4,"ngIf"],["role","presentation",1,"slds-listbox__item"],["role","option",1,"slds-listbox__option","slds-listbox__option_entity",3,"click"],[1,"slds-p-left--medium","slds-listbox__option-text","slds-listbox__option-text_entity"],[1,"slds-listbox__item"],[1,"slds-p-left--medium"]],template:function(e,t){1&e&&(c.TgZ(0,"div",0)(1,"ul",1),c.YNc(2,hr,4,1,"li",2),c.YNc(3,mr,3,0,"li",3),c.qZA()()),2&e&&(c.xp6(2),c.Q6J("ngForOf",t.results),c.xp6(1),c.Q6J("ngIf",0==t.results.length))},dependencies:[n.sg,n.O5],encapsulation:2})),fieldSelectTreeSearch})();function pr(e,t){1&e&&(c.TgZ(0,"div",3),c._UZ(1,"system-spinner"),c.qZA())}function fr(e,t){if(1&e&&(c.TgZ(0,"span",11),c._UZ(1,"system-label",12),c.qZA()),2&e){const e=c.oxw().$implicit;c.xp6(1),c.Q6J("label",e.name)}}function br(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"span",13),c.NdJ("click",(function(){c.CHM(e);const t=c.oxw().$implicit,s=c.oxw(2);return c.KtG(s.choose(t))})),c._UZ(1,"system-label",12),c.qZA()}if(2&e){const e=c.oxw().$implicit;c.xp6(1),c.Q6J("label",e.name)}}function vr(e,t){1&e&&c._UZ(0,"system-utility-icon",14),2&e&&c.Q6J("icon","favorite")("size","xx-small")}function Zr(e,t){1&e&&c._UZ(0,"system-utility-icon",15),2&e&&c.Q6J("icon","chevronright")("size","xx-small")}const _r=function(e){return{"slds-theme--shade":e}};function yr(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"div",4)(1,"div",6),c.NdJ("mouseenter",(function(){const t=c.CHM(e).$implicit,s=c.oxw(2);return c.KtG(s.select(t))})),c.YNc(2,fr,2,1,"span",7),c.YNc(3,br,2,1,"span",8),c.YNc(4,vr,1,2,"system-utility-icon",9),c.YNc(5,Zr,1,2,"system-utility-icon",10),c.qZA()()}if(2&e){const e=t.$implicit,s=c.oxw(2);c.Q6J("ngClass",c.VKq(5,_r,s.isCategorySelected(e))),c.xp6(2),c.Q6J("ngIf",0==e.selectable&&e.childs),c.xp6(1),c.Q6J("ngIf",1==e.selectable||!e.childs),c.xp6(1),c.Q6J("ngIf",1==e.favorite),c.xp6(1),c.Q6J("ngIf",e.childs)}}const xr=function(e){return{"slds-border--right":e}};function wr(e,t){if(1&e&&(c.TgZ(0,"div",4),c.YNc(1,yr,6,7,"div",5),c.qZA()),2&e){const e=t.$implicit,s=t.index,i=c.oxw();c.Gre("slds-col slds-size--1-of-",i.maxlevels,""),c.Q6J("ngClass",c.VKq(5,xr,s<i.maxlevels-1)),c.xp6(1),c.Q6J("ngForOf",e)}}let Tr=(()=>{var e;class fieldSelectTreeTree{constructor(e,t,s,n){(0,i.Z)(this,"model",void 0),(0,i.Z)(this,"backend",void 0),(0,i.Z)(this,"config",void 0),(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"select_tree",[]),(0,i.Z)(this,"maxlevels",4),(0,i.Z)(this,"treekey",void 0),(0,i.Z)(this,"levels",[]),(0,i.Z)(this,"selected_fields",[]),(0,i.Z)(this,"choose_emitter",new c.vpe),(0,i.Z)(this,"loading",!0),this.model=e,this.backend=t,this.config=s,this.language=n,this.resetLevels()}ngOnInit(){if(this.config.getData("select_tree_tree")){var e=this.config.getData("select_tree_tree");e.sort((function(e,t){var s=e.name.toLowerCase(),i=t.name.toLowerCase();return s<i?-1:s>i?1:0})),this.levels[0]=e,this.loading=!1}else this.backend.getRequest("configuration/spiceui/core/selecttree/tree/"+this.treekey).subscribe((e=>{this.config.setData("select_tree_tree",e),this.select_tree=e,this.select_tree.sort((function(e,t){var s=e.name.toLowerCase(),i=t.name.toLowerCase();return s<i?-1:s>i?1:0})),this.levels[0]=this.select_tree,this.loading=!1}))}resetLevels(e=0){for(let t=e;t<this.maxlevels;t++)this.levels[t]=[];this.selected_fields.splice(e,this.maxlevels-e)}select(e){this.selected_fields[e.level]=e,e.childs?(this.levels[e.level+1]=e.childs,this.resetLevels(e.level+2)):this.resetLevels(e.level+1)}choose(e){this.selected_fields[e.level]=e,this.choose_emitter.emit(this.selected_fields)}isCategorySelected(e){for(let t of this.selected_fields)if(t.id==e.id)return!0;return!1}}return e=fieldSelectTreeTree,(0,i.Z)(fieldSelectTreeTree,"ɵfac",(function(t){return new(t||e)(c.Y36(w.o),c.Y36($.y),c.Y36(ee.C),c.Y36(x.d))})),(0,i.Z)(fieldSelectTreeTree,"ɵcmp",c.Xpm({type:e,selectors:[["select-tree-tree"]],inputs:{maxlevels:"maxlevels",treekey:"treekey"},outputs:{choose_emitter:"choose"},decls:3,vars:2,consts:[["role","listbox",1,"slds-dropdown_fluid"],["class","slds-p-around--small slds-align--absolute-center",4,"ngIf"],[3,"class","ngClass",4,"ngFor","ngForOf"],[1,"slds-p-around--small","slds-align--absolute-center"],[3,"ngClass"],[3,"ngClass",4,"ngFor","ngForOf"],[1,"slds-grid","slds-grid--vertical-align-center","slds-p-around--xx-small",3,"mouseenter"],["class","slds-truncate","style","cursor: default;",4,"ngIf"],["class","slds-truncate","style","cursor: pointer; text-decoration: underline;",3,"click",4,"ngIf"],["class","slds-m-left--small",3,"icon","size",4,"ngIf"],["class","slds-col--bump-left",3,"icon","size",4,"ngIf"],[1,"slds-truncate",2,"cursor","default"],[3,"label"],[1,"slds-truncate",2,"cursor","pointer","text-decoration","underline",3,"click"],[1,"slds-m-left--small",3,"icon","size"],[1,"slds-col--bump-left",3,"icon","size"]],template:function(e,t){1&e&&(c.TgZ(0,"div",0),c.YNc(1,pr,2,0,"div",1),c.YNc(2,wr,2,7,"div",2),c.qZA()),2&e&&(c.xp6(1),c.Q6J("ngIf",t.loading),c.xp6(1),c.Q6J("ngForOf",t.levels))},dependencies:[n.mk,n.sg,n.O5,se._,Go.W,M.r],encapsulation:2})),fieldSelectTreeTree})();function Cr(e,t){if(1&e&&c._UZ(0,"field-label",3),2&e){const e=c.oxw();c.Q6J("fieldname",e.fieldname)("fieldconfig",e.fieldconfig)}}function Ar(e,t){if(1&e&&(c.TgZ(0,"field-generic-display",4),c._uU(1),c.qZA()),2&e){const e=c.oxw();c.Q6J("fielddisplayclass",e.fielddisplayclass)("fieldconfig",e.fieldconfig)("editable",e.isEditable()),c.xp6(1),c.hij(" ",e.display_value,"\n")}}function kr(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"div",11)(1,"div",12)(2,"span",13)(3,"span",14),c._uU(4),c.qZA(),c.TgZ(5,"button",15),c.NdJ("click",(function(){c.CHM(e);const t=c.oxw(2);return c.KtG(t.unchooseSelField())})),c._UZ(6,"system-button-icon",16),c.qZA()()()()}if(2&e){const e=c.oxw(2);c.xp6(4),c.Oqu(e.display_value),c.xp6(2),c.Q6J("icon","close")}}function Lr(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"div",11)(1,"input",17),c.NdJ("focus",(function(){c.CHM(e);const t=c.oxw(2);return c.KtG(t.onFocus())}))("ngModelChange",(function(t){c.CHM(e);const s=c.oxw(2);return c.KtG(s.search=t)}))("click",(function(t){c.CHM(e);const s=c.oxw(2);return c.KtG(s.checkUserAction(t))}))("keyup",(function(t){c.CHM(e);const s=c.oxw(2);return c.KtG(s.checkUserAction(t))})),c.qZA()()}if(2&e){const e=c.oxw(2);c.xp6(1),c.s9C("placeholder",e.language.getLabel("LBL_SEARCH")),c.Q6J("ngModel",e.search)}}function Ir(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"div",18)(1,"select-tree-tree",19),c.NdJ("choose",(function(t){c.CHM(e);const s=c.oxw(2);return c.KtG(s.chooseSelField(t))})),c.qZA()()}if(2&e){const e=c.oxw(2);c.xp6(1),c.Q6J("treekey",e.fieldconfig.key)("maxlevels",e.maxlevels)}}function Mr(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"div",18)(1,"select-tree-search",20),c.NdJ("choose",(function(t){c.CHM(e);const s=c.oxw(2);return c.KtG(s.chooseSelField(t))})),c.qZA()()}if(2&e){const e=c.oxw(2);c.xp6(1),c.Q6J("treekey",e.fieldconfig.key)("search",e.search)}}function Sr(e,t){if(1&e&&(c.TgZ(0,"div",5)(1,"div",6)(2,"div",7)(3,"div",8),c.YNc(4,kr,7,2,"div",9),c.YNc(5,Lr,2,2,"div",9),c.YNc(6,Ir,2,2,"div",10),c.YNc(7,Mr,2,2,"div",10),c.qZA()()()()),2&e){const e=c.oxw();c.Q6J("ngClass",e.getFieldClass()),c.xp6(4),c.Q6J("ngIf",e.display_value),c.xp6(1),c.Q6J("ngIf",!e.display_value),c.xp6(1),c.Q6J("ngIf",e.show_tree),c.xp6(1),c.Q6J("ngIf",e.show_search)}}let Jr=(()=>{var e;class fieldSelectTree extends r.O{constructor(e,t,s,n,o,l,a,d,r){super(e,t,s,n,o),(0,i.Z)(this,"model",void 0),(0,i.Z)(this,"view",void 0),(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"router",void 0),(0,i.Z)(this,"backend",void 0),(0,i.Z)(this,"config",void 0),(0,i.Z)(this,"elementRef",void 0),(0,i.Z)(this,"renderer",void 0),(0,i.Z)(this,"fields",[]),(0,i.Z)(this,"show_tree",!1),(0,i.Z)(this,"show_search",!1),(0,i.Z)(this,"search",void 0),(0,i.Z)(this,"sel_fields",[]),(0,i.Z)(this,"clickListener",void 0),this.model=e,this.view=t,this.language=s,this.metadata=n,this.router=o,this.backend=l,this.config=a,this.elementRef=d,this.renderer=r}ngOnInit(){this.fields.length<1&&(this.fields.push(this.fieldconfig.value1),this.fields.push(this.fieldconfig.value2),this.fields.push(this.fieldconfig.value3),this.fields.push(this.fieldconfig.value4)),this.config.getData("select_tree")?this.sel_fields=this.config.getData("select_tree"):(this.config.setData("select_tree",[]),this.backend.getRequest("configuration/spiceui/core/selecttree/list/"+this.fieldconfig.key).subscribe((e=>{this.sel_fields=e,this.config.setData("select_tree",e)})))}get display_value(){let e="";for(let t of this.fields){if(!this.model.getField(t))break;{let s="";for(let e in this.sel_fields)this.sel_fields[e].keyname===this.model.getField(t)&&(s=this.sel_fields[e].name);e+=this.language.getLabel(s)+" \\ "}}return e=e.substring(0,e.length-2),e}get maxlevels(){return this.fieldconfig.maxlevels?this.fieldconfig.maxlevels:4}checkUserAction(e){this.search?(this.show_tree=!1,this.show_search=!0):(this.show_tree=!0,this.show_search=!1)}chooseSelField(e){this.show_search=!1,this.show_tree=!1;for(let t=0;t<this.fields.length;t++)if(e[t]){let s=""!=e[t].keyname?e[t].keyname:e[t].name;this.model.setField(this.fields[t],s)}else this.model.setField(this.fields[t],"");this.search=null}unchooseSelField(){let e={};for(let t of this.fields)e[t]="";this.model.setFields(e)}onClick(e){this.elementRef.nativeElement.contains(e.target)||(this.show_tree=!1)}onFocus(){this.show_tree=!0,this.clickListener=this.renderer.listen("document","click",(e=>this.onClick(e)))}}return e=fieldSelectTree,(0,i.Z)(fieldSelectTree,"ɵfac",(function(t){return new(t||e)(c.Y36(w.o),c.Y36(k.e),c.Y36(x.d),c.Y36(u.Pu),c.Y36(L.F0),c.Y36($.y),c.Y36(ee.C),c.Y36(c.SBq),c.Y36(c.Qsj))})),(0,i.Z)(fieldSelectTree,"ɵcmp",c.Xpm({type:e,selectors:[["select-tree"]],features:[c.qOj],decls:3,vars:3,consts:[[3,"fieldname","fieldconfig",4,"ngIf"],[3,"fielddisplayclass","fieldconfig","editable",4,"ngIf"],["class","slds-form-element__control slds-m-vertical--xx-small",3,"ngClass",4,"ngIf"],[3,"fieldname","fieldconfig"],[3,"fielddisplayclass","fieldconfig","editable"],[1,"slds-form-element__control","slds-m-vertical--xx-small",3,"ngClass"],[1,"slds-form-element__control"],[1,"slds-combobox_container","slds-has-inline-listbox"],["aria-expanded","false","aria-haspopup","listbox","role","combobox",1,"slds-combobox","slds-dropdown-trigger","slds-dropdown-trigger_click","slds-combobox-lookup","slds-size_2-of-2"],["class","slds-combobox__form-element slds-input-has-icon slds-input-has-icon_right",4,"ngIf"],["class","slds-dropdown dropdown-trigger_click slds-dropdown_length-with-icon-1 slds-dropdown_fluid","style","display: block",4,"ngIf"],[1,"slds-combobox__form-element","slds-input-has-icon","slds-input-has-icon_right"],[1,"slds-pill_container"],[1,"slds-pill","slds-size--1-of-1"],[1,"slds-pill__label"],[1,"slds-button","slds-button--icon","slds-pill__remove",3,"click"],[3,"icon"],["type","search",1,"slds-input","slds-combobox__input",3,"placeholder","ngModel","focus","ngModelChange","click","keyup"],[1,"slds-dropdown","dropdown-trigger_click","slds-dropdown_length-with-icon-1","slds-dropdown_fluid",2,"display","block"],[3,"treekey","maxlevels","choose"],[3,"treekey","search","choose"]],template:function(e,t){1&e&&(c.YNc(0,Cr,1,2,"field-label",0),c.YNc(1,Ar,2,4,"field-generic-display",1),c.YNc(2,Sr,8,5,"div",2)),2&e&&(c.Q6J("ngIf",t.displayLabel),c.xp6(1),c.Q6J("ngIf",!t.isEditMode()),c.xp6(1),c.Q6J("ngIf",t.isEditable()&&t.isEditMode()))},dependencies:[n.mk,n.O5,o.Fj,o.JJ,o.On,T.J,h.q,A.D,gr,Tr],encapsulation:2})),fieldSelectTree})();function Or(e,t){if(1&e&&c._UZ(0,"field-label",3),2&e){const e=c.oxw();c.Q6J("fieldname",e.fieldname)("fieldconfig",e.fieldconfig)}}function Nr(e,t){if(1&e&&(c.TgZ(0,"field-generic-display",4),c._UZ(1,"div",5),c._uU(2),c.qZA()),2&e){const e=c.oxw();c.Q6J("fielddisplayclass",e.fielddisplayclass)("editable",e.isEditable())("fieldconfig",e.fieldconfig),c.xp6(1),c.Q6J("ngStyle",e.getColor),c.xp6(1),c.hij(" ",e.getValue(),"\n")}}function Fr(e,t){if(1&e&&(c.ynx(0),c.TgZ(1,"option",12),c._uU(2),c.qZA(),c.BQk()),2&e){const e=t.$implicit;c.xp6(1),c.Q6J("value",e.value),c.xp6(1),c.hij(" ",e.long,"")}}function qr(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"div",6)(1,"div",7)(2,"div",8)(3,"select",9),c.NdJ("ngModelChange",(function(t){c.CHM(e);const s=c.oxw();return c.KtG(s.value=t)}))("change",(function(){c.CHM(e);const t=c.oxw();return c.KtG(t.changed())})),c.YNc(4,Fr,3,2,"ng-container",10),c.qZA()(),c._UZ(5,"field-messages",11),c.qZA()()}if(2&e){const e=c.oxw();c.xp6(1),c.Q6J("ngClass",e.getFieldClass()),c.xp6(2),c.Q6J("ngModel",e.value),c.xp6(1),c.Q6J("ngForOf",e.options),c.xp6(1),c.Q6J("fieldname",e.fieldname)}}let Er=(()=>{var e;class fieldColorEnum extends r.O{constructor(e,t,s,n,o){super(e,t,s,n,o),(0,i.Z)(this,"model",void 0),(0,i.Z)(this,"view",void 0),(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"router",void 0),(0,i.Z)(this,"longOptions",[]),(0,i.Z)(this,"options",[]),(0,i.Z)(this,"colors",[]),(0,i.Z)(this,"acolor",{"background-color":""}),this.model=e,this.view=t,this.language=s,this.metadata=n,this.router=o}ngOnInit(){this.getOptions()}getOptions(){this.longOptions=this.language.getFieldDisplayOptions(this.model.module,this.fieldname);let e=this.longOptions;if(e&&!this.fieldconfig.useShort||(e=this.language.getDisplayOptions(this.fieldconfig.shortEnum)),this.colors=this.language.getDisplayOptions(this.fieldconfig.colorEnum),void 0!==this.colors){let e="";e=this.colors[this.value],void 0!==e&&"#"!=e.substring(0,1)&&(e="#"+e),this.acolor["background-color"]=e}let t=[];for(let s in e){let i=void 0!==this.colors&&void 0!==this.colors[s]?"#"!=this.colors[s].substring(0,1)?"#"+this.colors[s]:this.colors[s]:"",n=void 0!==this.longOptions?this.longOptions[s]:"";t.push({value:s,color:i,display:e[s],long:n})}this.options=t}get getColor(){let e="";return void 0!==this.colors&&(e=this.colors[this.value],e&&"#"!=e.substring(0,1)&&(e="#"+e),this.acolor["background-color"]=e),this.acolor}getValue(){for(let e of this.options)if(e.value==this.value)return e.display}changed(){let e="";e=this.colors[this.value],void 0!==e&&"#"!=e.substring(0,1)&&(e="#"+e),this.acolor["background-color"]=e}}return e=fieldColorEnum,(0,i.Z)(fieldColorEnum,"ɵfac",(function(t){return new(t||e)(c.Y36(w.o),c.Y36(k.e),c.Y36(x.d),c.Y36(u.Pu),c.Y36(L.F0))})),(0,i.Z)(fieldColorEnum,"ɵcmp",c.Xpm({type:e,selectors:[["field-enum"]],features:[c.qOj],decls:3,vars:3,consts:[[3,"fieldname","fieldconfig",4,"ngIf"],[3,"fielddisplayclass","editable","fieldconfig",4,"ngIf"],["class","slds-form-element",4,"ngIf"],[3,"fieldname","fieldconfig"],[3,"fielddisplayclass","editable","fieldconfig"],[2,"float","left","width","10px","height","10px","border-radius","5px","margin-top","5px","margin-right","5px",3,"ngStyle"],[1,"slds-form-element"],[1,"slds-form-element__control",3,"ngClass"],[1,"slds-select_container","slds-m-vertical--xx-small"],[1,"slds-select",3,"ngModel","ngModelChange","change"],[4,"ngFor","ngForOf"],[3,"fieldname"],[3,"value"]],template:function(e,t){1&e&&(c.YNc(0,Or,1,2,"field-label",0),c.YNc(1,Nr,3,5,"field-generic-display",1),c.YNc(2,qr,6,4,"div",2)),2&e&&(c.Q6J("ngIf",t.displayLabel),c.xp6(1),c.Q6J("ngIf",!t.isEditMode()),c.xp6(1),c.Q6J("ngIf",t.isEditMode()))},dependencies:[n.mk,n.sg,n.O5,n.PC,o.YN,o.Kr,o.EJ,o.JJ,o.On,h.q,A.D,J.a],encapsulation:2})),fieldColorEnum})();var Yr=s(6991);function Dr(e,t){if(1&e&&c._UZ(0,"field-label",3),2&e){const e=c.oxw();c.Q6J("fieldname",e.fieldname)("fieldconfig",e.fieldconfig)}}function Qr(e,t){if(1&e&&(c.TgZ(0,"div",7),c._uU(1),c.qZA()),2&e){const e=c.oxw(2);c.xp6(1),c.hij(" ",e.displayValue," ")}}function Ur(e,t){if(1&e&&(c.TgZ(0,"div",8),c._uU(1),c.qZA()),2&e){const e=c.oxw(2);c.Q6J("title",e.displayValue),c.xp6(1),c.hij(" ",e.displayValue," ")}}function Rr(e,t){if(1&e&&(c.TgZ(0,"field-generic-display",4),c.YNc(1,Qr,2,1,"div",5),c.YNc(2,Ur,2,2,"ng-template",null,6,c.W1O),c.qZA()),2&e){const e=c.MAs(3),t=c.oxw();c.Q6J("fielddisplayclass",t.fielddisplayclass)("editable",t.isEditable())("fieldconfig",t.fieldconfig)("fieldid",t.fieldid),c.xp6(1),c.Q6J("ngIf",!t.truncated)("ngIfElse",e)}}function jr(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"div",9)(1,"system-input-base64",10),c.NdJ("ngModelChange",(function(t){c.CHM(e);const s=c.oxw();return c.KtG(s.value=t)})),c.qZA(),c._UZ(2,"field-messages",11),c.qZA()}if(2&e){const e=c.oxw();c.Q6J("ngClass",e.getFieldClass()),c.xp6(1),c.Q6J("ngModel",e.value)("minHeight",e.minHeight)("maxHeight",e.maxHeight),c.xp6(1),c.Q6J("fieldname",e.fieldname)}}let Br=(()=>{var e;class fieldBase64 extends r.O{constructor(e,t,s,n,o,l){super(e,t,s,n,o),(0,i.Z)(this,"model",void 0),(0,i.Z)(this,"view",void 0),(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"router",void 0),(0,i.Z)(this,"footer",void 0),this.model=e,this.view=t,this.language=s,this.metadata=n,this.router=o,this.footer=l}get minHeight(){return this.fieldconfig.minheight?this.fieldconfig.minheight:150}get maxHeight(){return this.fieldconfig.maxheight?this.fieldconfig.maxheight:500}get truncated(){return!!this.fieldconfig.truncate}get displayValue(){try{return decodeURIComponent(window.atob(this.value))}catch(e){return""}}}return e=fieldBase64,(0,i.Z)(fieldBase64,"ɵfac",(function(t){return new(t||e)(c.Y36(w.o),c.Y36(k.e),c.Y36(x.d),c.Y36(u.Pu),c.Y36(L.F0),c.Y36(me.M))})),(0,i.Z)(fieldBase64,"ɵcmp",c.Xpm({type:e,selectors:[["field-base64"]],features:[c.qOj],decls:3,vars:3,consts:[[3,"fieldname","fieldconfig",4,"ngIf"],[3,"fielddisplayclass","editable","fieldconfig","fieldid",4,"ngIf"],["class","slds-form-element__control","style","position:relative;",3,"ngClass",4,"ngIf"],[3,"fieldname","fieldconfig"],[3,"fielddisplayclass","editable","fieldconfig","fieldid"],["style","white-space: pre-line;",4,"ngIf","ngIfElse"],["truncatedDisplay",""],[2,"white-space","pre-line"],[1,"slds-truncate",2,"max-width","200px","text-overflow","ellipsis",3,"title"],[1,"slds-form-element__control",2,"position","relative",3,"ngClass"],[3,"ngModel","minHeight","maxHeight","ngModelChange"],[3,"fieldname"]],template:function(e,t){1&e&&(c.YNc(0,Dr,1,2,"field-label",0),c.YNc(1,Rr,4,6,"field-generic-display",1),c.YNc(2,jr,3,5,"div",2)),2&e&&(c.Q6J("ngIf",t.displayLabel),c.xp6(1),c.Q6J("ngIf",!t.isEditMode()),c.xp6(1),c.Q6J("ngIf",t.isEditable()&&t.isEditMode()))},dependencies:[n.mk,n.O5,o.JJ,o.On,Yr.V,h.q,A.D,J.a],encapsulation:2})),fieldBase64})();function Gr(e,t){1&e&&c._UZ(0,"system-stencil")}function Pr(e,t){if(1&e&&c._UZ(0,"system-icon",3),2&e){const e=c.oxw();c.Q6J("module",e.value)}}let Hr=(()=>{var e;class fieldModuleIcon extends r.O{constructor(e,t,s,n,o){super(e,t,s,n,o),(0,i.Z)(this,"model",void 0),(0,i.Z)(this,"view",void 0),(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"router",void 0),this.model=e,this.view=t,this.language=s,this.metadata=n,this.router=o}}return e=fieldModuleIcon,(0,i.Z)(fieldModuleIcon,"ɵfac",(function(t){return new(t||e)(c.Y36(w.o),c.Y36(k.e),c.Y36(x.d),c.Y36(u.Pu),c.Y36(L.F0))})),(0,i.Z)(fieldModuleIcon,"ɵcmp",c.Xpm({type:e,selectors:[["field-module-icon"]],features:[c.qOj],decls:4,vars:3,consts:[[3,"ngClass"],[4,"ngIf","ngIfElse"],["displaycontent",""],["size","xx-small",3,"module"]],template:function(e,t){if(1&e&&(c.TgZ(0,"div",0),c.YNc(1,Gr,1,0,"system-stencil",1),c.YNc(2,Pr,1,1,"ng-template",null,2,c.W1O),c.qZA()),2&e){const e=c.MAs(3);c.Q6J("ngClass",t.fielddisplayclass),c.xp6(1),c.Q6J("ngIf",t.model.isLoading)("ngIfElse",e)}},dependencies:[n.mk,n.O5,hs.f,Xe.B],encapsulation:2})),fieldModuleIcon})();var zr=s(9808),Vr=s(1574);function Kr(e,t){if(1&e&&c._UZ(0,"field-label",5),2&e){const e=c.oxw();c.Q6J("fieldname",e.fieldname)("fieldconfig",e.fieldconfig)}}function $r(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"button",6),c.NdJ("click",(function(){c.CHM(e);const t=c.oxw();return c.KtG(t.setEditMode())})),c._UZ(1,"system-button-icon",7),c.qZA()}2&e&&(c.xp6(1),c.Q6J("icon","edit"))}function Xr(e,t){if(1&e&&c._UZ(0,"system-richtext-editor",11),2&e){const e=c.oxw(2);c.Q6J("readOnly",!0)("ngModel",e.value)("css",e.styleTag)("stylesheetId",e.stylesheetId)("innerheight",e.fieldconfig.innerheight)}}function Wr(e,t){if(1&e&&c._UZ(0,"iframe",12),2&e){const e=c.oxw(2);c.Q6J("src",e.sanitizedValue,c.uOi)("ngStyle",e.heightStyle)}}function ec(e,t){if(1&e&&(c.TgZ(0,"field-generic-display",8),c.YNc(1,Xr,1,5,"system-richtext-editor",9),c.YNc(2,Wr,1,2,"iframe",10),c.qZA()),2&e){const e=c.oxw();c.Q6J("fielddisplayclass",e.fielddisplayclass)("editable",!1)("fieldconfig",e.fieldconfig),c.xp6(1),c.Q6J("ngIf",!e.fieldconfig.asiframe),c.xp6(1),c.Q6J("ngIf",e.fieldconfig.asiframe)}}function tc(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"li",29),c.NdJ("click",(function(){const t=c.CHM(e).$implicit,s=c.oxw(3);return s.selectedSignatureId=t.id,c.KtG(s.changeSignature())})),c.TgZ(1,"a",30)(2,"span",26),c._UZ(3,"system-label",31),c.qZA()()()}if(2&e){const e=t.$implicit;c.Q6J("value",e.id),c.xp6(3),c.Q6J("label",e.label)}}function sc(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"li",18)(1,"div",19)(2,"button",20),c._UZ(3,"system-button-icon",21),c.qZA(),c.TgZ(4,"div",22)(5,"ul",23)(6,"li",24),c.NdJ("click",(function(){c.CHM(e);const t=c.oxw(2);return t.selectedSignatureId="",c.KtG(t.changeSignature())})),c.TgZ(7,"a",25)(8,"span",26),c._UZ(9,"system-label",27),c.qZA()()(),c.YNc(10,tc,4,2,"li",28),c.qZA()()()()}if(2&e){const e=c.oxw(2);c.xp6(10),c.Q6J("ngForOf",e.signatures)}}function ic(e,t){if(1&e&&(c.TgZ(0,"option",41),c._UZ(1,"system-label",42),c.qZA()),2&e){const e=t.$implicit;c.Q6J("value",e.id),c.xp6(1),c.Q6J("label",e.label)}}function nc(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"li",32)(1,"div",33)(2,"label",34),c._UZ(3,"system-label",35),c._uU(4,": "),c.qZA(),c.TgZ(5,"div",36)(6,"div",37)(7,"select",38),c.NdJ("ngModelChange",(function(t){c.CHM(e);const s=c.oxw(2);return c.KtG(s.selectedSignatureId=t)}))("ngModelChange",(function(){c.CHM(e);const t=c.oxw(2);return c.KtG(t.changeSignature())})),c.TgZ(8,"option",39),c._UZ(9,"system-label",27),c.qZA(),c.YNc(10,ic,2,2,"option",40),c.qZA()()()()()}if(2&e){const e=c.oxw(2);c.xp6(7),c.Q6J("ngModel",e.selectedSignatureId)("disabled",0==(null==e.signatures?null:e.signatures.length)),c.xp6(3),c.Q6J("ngForOf",e.signatures)}}function oc(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"div",13)(1,"system-richtext-editor",14),c.NdJ("ngModelChange",(function(t){c.CHM(e);const s=c.oxw();return c.KtG(s.value=t)}))("save$",(function(t){c.CHM(e);const s=c.oxw();return c.KtG(s.save(t))})),c.YNc(2,sc,11,1,"li",15),c.YNc(3,nc,11,3,"li",16),c.qZA(),c._UZ(4,"field-messages",17),c.qZA()}if(2&e){const e=c.oxw();c.Q6J("ngClass",e.getFieldClass()),c.xp6(1),c.Q6J("ngModel",e.value)("css",e.styleTag)("stylesheetId",e.stylesheetId)("extendedmode",!e.fieldconfig.simplemode)("innerheight",e.fieldconfig.innerheight)("useMedialFile",e.metadata.checkModuleAcl("MediaFiles","list")&&e.metadata.checkModuleAcl("MediaFiles","view")),c.xp6(1),c.Q6J("ngIf",null==e.fieldconfig?null:e.fieldconfig.useSignature),c.xp6(1),c.Q6J("ngIf",null==e.fieldconfig?null:e.fieldconfig.useSignature),c.xp6(1),c.Q6J("fieldname",e.fieldname)}}let lc=(()=>{var e;class fieldRichText extends r.O{constructor(e,t,s,n,o,l,a,d,r,c,u,h,m){super(e,t,s,n,a),(0,i.Z)(this,"model",void 0),(0,i.Z)(this,"view",void 0),(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"backend",void 0),(0,i.Z)(this,"toast",void 0),(0,i.Z)(this,"router",void 0),(0,i.Z)(this,"injector",void 0),(0,i.Z)(this,"broadcast",void 0),(0,i.Z)(this,"configurationService",void 0),(0,i.Z)(this,"modal",void 0),(0,i.Z)(this,"cdRef",void 0),(0,i.Z)(this,"sanitized",void 0),(0,i.Z)(this,"selectedSignatureId",""),(0,i.Z)(this,"signatures",[]),(0,i.Z)(this,"sanitizedValue",void 0),(0,i.Z)(this,"fullValue_cached",void 0),(0,i.Z)(this,"fullValue",""),(0,i.Z)(this,"stylesheetField",""),(0,i.Z)(this,"stylesheetToUse",""),(0,i.Z)(this,"stylesheets",void 0),(0,i.Z)(this,"useStylesheets",void 0),(0,i.Z)(this,"signaturePosition",-1),(0,i.Z)(this,"_styleTag",""),this.model=e,this.view=t,this.language=s,this.metadata=n,this.backend=o,this.toast=l,this.router=a,this.injector=d,this.broadcast=r,this.configurationService=c,this.modal=u,this.cdRef=h,this.sanitized=m,this.stylesheets=this.metadata.getHtmlStylesheetNames()}get heightStyle(){return{height:this.fieldconfig.height?this.fieldconfig.height:"500px"}}get styleTag(){return this._styleTag}get stylesheetId(){return _.isEmpty(this.model.getField(this.stylesheetField))?this.stylesheetId=this.stylesheetToUse:this.model.getField(this.stylesheetField)}set stylesheetId(e){e&&this.model.setField(this.stylesheetField,e)}get value(){return this.model.getField(this.fieldname)}set value(e){this.model.setField(this.fieldname,e)}ngOnInit(){this.setStylesheetField(),this.setStylesheetsToUse(),this.setHtmlValue(),this.modelChangesSubscriber(),this.fieldconfig?.useSignature&&(this.addSignature("mailbox","","LBL_MAILBOX_SIGNATURE"),this.selectedSignatureId=this.model.getFieldValue("signature"),this.loadUserSignature("user"==this.selectedSignatureId),this.loadMailboxSignature(this.model.getField("mailbox_id"),"mailbox"==this.selectedSignatureId))}changeSignature(){"mailbox"==this.selectedSignatureId&&this.loadMailboxSignature(this.model.getField("mailbox_id"),!0),this.renderSelectedSignature()}renderSelectedSignature(){this.value||(this.value="");const e=document.createElement("div");e.innerHTML=this.value;let t=e.querySelectorAll("div[data-signature]"),s=e.querySelectorAll("div[data-spice-reply-quote]");if(this.signaturePosition=e.innerHTML.indexOf(s[0]?.outerHTML),t.length>0&&(this.signaturePosition=e.innerHTML.indexOf(t[0]?.outerHTML)),t[0]?.parentNode.removeChild(t[0]),this.value=e.innerHTML,this.model.setField("signature",this.selectedSignatureId),!this.selectedSignatureId)return;const i=`<div data-signature="" class="data-signature" style="margin: 10px 0">${this.signatures.find((e=>e.id==this.selectedSignatureId)).content}</div>`;this.value=[this.value.slice(0,this.signaturePosition),i,s[0]?.outerHTML].join("<p><br></p>")}setEditMode(){this.model.startEdit(),this.view.setEditMode(),this.cdRef.detectChanges()}encodeHtml(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}loadMailboxSignature(e,t){if(!this.isEditMode())return;if(!e)return;const s=this.configurationService.getData("mailbox_signature_"+e);if(!s)return(0,zr.n)(this.backend.get("Mailboxes",e)).then((s=>{this.configurationService.setData("mailbox_signature_"+e,s.email_signature),this.addSignature("mailbox",s.email_signature,"LBL_MAILBOX_SIGNATURE"),t&&this.renderSelectedSignature()}));this.addSignature("mailbox",s,"LBL_MAILBOX"),t&&this.renderSelectedSignature()}addSignature(e,t,s){const i=this.signatures.find((t=>t.id==e));i?i.content=t:this.signatures.push({id:e,content:t,label:s})}loadUserSignature(e){if(!this.isEditMode())return;const t=this.configurationService.getData("usersignature");if(!t)return;this.signatures.length;this.addSignature("user",t,"LBL_MY_SIGNATURE"),e&&this.renderSelectedSignature()}setStylesheetField(){let e=this.metadata.getFieldDefs(this.model.module,this.fieldname);_.isEmpty(e.stylesheet_id_field)||(this.stylesheetField=e.stylesheet_id_field)}setStylesheetsToUse(){this.useStylesheets=!_.isEmpty(this.stylesheetField)&&!_.isEmpty(this.stylesheets),this.useStylesheets&&(1===this.stylesheets.length?this.stylesheetToUse=this.stylesheets[0].id:_.isEmpty(this.fieldconfig.stylesheetId)?this.stylesheetToUse=this.metadata.getHtmlStylesheetToUse(this.model.module,this.fieldname):this.stylesheetToUse=this.fieldconfig.stylesheetId)}setSanitizedValue(){return this.value&&(this.value.includes("</html>")?this.fullValue=this.value:this.fullValue=`<html><head><base target="_blank"><style>${this.styleTag}</style></head><body class="spice">${this.value.replace(/\r?\n|\r/g,"<br>")}</body></html>`),this.fullValue!=this.fullValue_cached&&(this.sanitizedValue=this.sanitized.bypassSecurityTrustResourceUrl(this.fullValue?"data:text/html;charset=UTF-8,"+encodeURIComponent(this.fullValue):""),this.fullValue_cached=this.fullValue),this.sanitizedValue}modelChangesSubscriber(){this.subscriptions.add(this.model.observeFieldChanges(this.fieldname).subscribe({next:()=>this.setHtmlValue()})),this.subscriptions.add(this.model.observeFieldChanges("mailbox_id").subscribe((e=>{this.fieldconfig?.useSignature&&e&&"mailbox"==this.model.getField("signature")&&this.loadMailboxSignature(e,!0)})))}setHtmlValue(){if(!this.value?.includes("</html>"))return this.setSanitizedValue();let e=this.stylesheetId?this.metadata.getHtmlStylesheetCode(this.stylesheetId):"";const t=document.createElement("div");t.innerHTML=this.value;const s=t.getElementsByTagName("style")[0];e+=s?.innerHTML??"",s?.remove(),this.model.setField(this.fieldname,t.innerHTML,!0),this._styleTag=e,this.setSanitizedValue()}save(e){let t={date_modified:this.model.getField("date_modified"),[this.fieldname]:e};this.backend.save(this.model.module,this.model.id,t).subscribe({next:e=>{this.model.setField("date_modified",e.date_modified,!0),this.value=e[this.fieldname],this.toast.sendToast(this.language.getLabel("LBL_DATA_SAVED")+".","success")},error:e=>{this.toast.sendToast(this.language.getLabel("LBL_ERROR")+" "+e.status,"error",e.error.error.message)}})}}return e=fieldRichText,(0,i.Z)(fieldRichText,"ɵfac",(function(t){return new(t||e)(c.Y36(w.o),c.Y36(k.e),c.Y36(x.d),c.Y36(u.Pu),c.Y36($.y),c.Y36(X.A),c.Y36(L.F0),c.Y36(c.zs3),c.Y36(W.f),c.Y36(ee.C),c.Y36(I.o),c.Y36(c.sBO),c.Y36(te.H7))})),(0,i.Z)(fieldRichText,"ɵcmp",c.Xpm({type:e,selectors:[["field-richtext"]],features:[c.qOj],decls:6,vars:4,consts:[[1,"slds-grid","slds-grid--vertical-align-center","slds-grid--align-spread"],[3,"fieldname","fieldconfig",4,"ngIf"],["class","slds-button slds-button--icon slds-m-left--xx-small spice-hover-button",3,"click",4,"ngIf"],[3,"fielddisplayclass","editable","fieldconfig",4,"ngIf"],["class","slds-form-element__control",3,"ngClass",4,"ngIf"],[3,"fieldname","fieldconfig"],[1,"slds-button","slds-button--icon","slds-m-left--xx-small","spice-hover-button",3,"click"],[3,"icon"],[3,"fielddisplayclass","editable","fieldconfig"],[3,"readOnly","ngModel","css","stylesheetId","innerheight",4,"ngIf"],["style","resize: vertical;","width","100%","frameborder","0","seamless","true","sandbox","",3,"src","ngStyle",4,"ngIf"],[3,"readOnly","ngModel","css","stylesheetId","innerheight"],["width","100%","frameborder","0","seamless","true","sandbox","",2,"resize","vertical",3,"src","ngStyle"],[1,"slds-form-element__control",3,"ngClass"],[3,"ngModel","css","stylesheetId","extendedmode","innerheight","useMedialFile","ngModelChange","save$"],["id","signatureIcon",4,"ngIf"],["id","signatureSelector",4,"ngIf"],[3,"fieldname"],["id","signatureIcon"],["system-dropdown-trigger","",1,"slds-dropdown-trigger","slds-dropdown-trigger_click"],["aria-haspopup","true","aria-expanded","true",1,"slds-button","slds-button_icon","slds-button_icon-border-filled"],["icon","signature","aria-hidden","true",1,"slds-button__icon"],[1,"slds-dropdown","slds-dropdown_left","slds-dropdown_small"],["role","menu",1,"slds-dropdown__list"],[1,"slds-dropdown__item",3,"click"],["aria-checked","true","role","menuitemcheckbox","tabindex","0"],["title","Menu Item One",1,"slds-truncate"],["label","LBL_NONE"],["class","slds-dropdown__item slds-is-selected","role","presentation",3,"value","click",4,"ngFor","ngForOf"],["role","presentation",1,"slds-dropdown__item","slds-is-selected",3,"value","click"],["aria-checked","true","role","menuitemcheckbox","tabindex","-1"],[1,"slds-truncate",3,"label"],["id","signatureSelector"],[1,"slds-form-element","slds-grid"],[1,"slds-form-element__label"],["label","LBL_SIGNATURE"],[1,"slds-form-element__control"],[1,"slds-select_container"],[1,"slds-select",3,"ngModel","disabled","ngModelChange"],["value",""],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[3,"label"]],template:function(e,t){1&e&&(c.TgZ(0,"div",0)(1,"div"),c.YNc(2,Kr,1,2,"field-label",1),c.qZA(),c.YNc(3,$r,2,1,"button",2),c.qZA(),c.YNc(4,ec,3,5,"field-generic-display",3),c.YNc(5,oc,5,10,"div",4)),2&e&&(c.xp6(2),c.Q6J("ngIf",t.displayLabel),c.xp6(1),c.Q6J("ngIf",!t.isEditMode()&&t.isEditable()),c.xp6(1),c.Q6J("ngIf",!t.isEditMode()),c.xp6(1),c.Q6J("ngIf",t.isEditable()&&t.isEditMode()))},dependencies:[n.mk,n.sg,n.O5,n.PC,o.YN,o.Kr,o.EJ,o.JJ,o.On,T.J,se._,Vr.z,Hd.l,h.q,A.D,J.a],encapsulation:2})),fieldRichText})();function ac(e,t){if(1&e&&c._UZ(0,"field-label",3),2&e){const e=c.oxw();c.Q6J("fieldname",e.fieldname)("fieldconfig",e.fieldconfig)}}function dc(e,t){if(1&e&&(c.TgZ(0,"field-generic-display",4)(1,"span"),c._uU(2),c.qZA()()),2&e){const e=c.oxw();c.Q6J("fielddisplayclass",e.fielddisplayclass)("editable",e.isEditable())("fieldconfig",e.fieldconfig),c.xp6(2),c.Oqu(e.getValue())}}function rc(e,t){1&e&&(c.TgZ(0,"span",21)(1,"span",22),c._UZ(2,"system-icon",23),c.qZA()())}function cc(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"li",15),c.NdJ("click",(function(t){const s=c.CHM(e).$implicit,i=c.oxw(2);return c.KtG(i.clickedItem(s,t))})),c.TgZ(1,"div",16),c.YNc(2,rc,3,0,"span",17),c.TgZ(3,"span",18)(4,"span",19),c._UZ(5,"span",20),c._uU(6),c.qZA()()()()}if(2&e){const e=t.$implicit;c.xp6(2),c.Q6J("ngIf",e.selected),c.xp6(4),c.hij(" ",e.display," ")}}function uc(e,t){if(1&e&&(c.TgZ(0,"div",5)(1,"div",6)(2,"div",7)(3,"div",8)(4,"div",9),c._UZ(5,"input",10)(6,"system-icon",11),c.qZA(),c.TgZ(7,"div",12)(8,"ul",13),c.YNc(9,cc,7,2,"li",14),c.qZA()()()()()()),2&e){const e=c.oxw();c.xp6(5),c.Q6J("value",e.getValue()),c.xp6(4),c.Q6J("ngForOf",e.getValues())}}let hc=(()=>{var e;class fieldEnumMulti extends r.O{constructor(e,t,s,n,o,l,a){super(e,t,s,n,o),(0,i.Z)(this,"model",void 0),(0,i.Z)(this,"view",void 0),(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"router",void 0),(0,i.Z)(this,"elementRef",void 0),(0,i.Z)(this,"renderer",void 0),(0,i.Z)(this,"options",[]),(0,i.Z)(this,"selectedValues",[]),(0,i.Z)(this,"showSelect",!1),(0,i.Z)(this,"clickListener",void 0),this.model=e,this.view=t,this.language=s,this.metadata=n,this.router=o,this.elementRef=l,this.renderer=a}ngOnInit(){this.model.data$.subscribe((e=>{this.buildOptions()}))}getValue(){let e=[];for(let t of this.selectedValues)e.push(this.options[t]);return e.join(", ")}getValues(){let e=[];this.getValueArray();for(let t in this.options){let s=!1;for(let e of this.selectedValues)t==e&&(s=!0);e.push({id:this.model.generateGuid(),value:t,display:this.options[t],selected:s})}return e}getValueArray(){try{return this.model.getField(this.fieldname).substring(1,this.model.getField(this.fieldname).length-1).split("^,^")}catch(e){return[]}}buildOptions(){this.options=[],this.selectedValues=this.getValueArray(),this.options=this.language.getFieldDisplayOptions(this.model.module,this.fieldname)}clickedItem(e,t){t.stopPropagation(),""==this.selectedValues[0]&&(this.selectedValues=[]);var s=this.selectedValues.indexOf(e.value);-1==s?this.selectedValues.length>0?this.selectedValues.push(e.value):this.selectedValues=[e.value]:this.selectedValues.splice(s,1);let i=Object.assign([],this.selectedValues),n="";i.length>0&&(n="^"+i.join("^,^")+"^"),this.model.setField(this.fieldname,n)}}return e=fieldEnumMulti,(0,i.Z)(fieldEnumMulti,"ɵfac",(function(t){return new(t||e)(c.Y36(w.o),c.Y36(k.e),c.Y36(x.d),c.Y36(u.Pu),c.Y36(L.F0),c.Y36(c.SBq),c.Y36(c.Qsj))})),(0,i.Z)(fieldEnumMulti,"ɵcmp",c.Xpm({type:e,selectors:[["field-enummulti"]],features:[c.qOj],decls:3,vars:3,consts:[[3,"fieldname","fieldconfig",4,"ngIf"],[3,"fielddisplayclass","editable","fieldconfig",4,"ngIf"],["class","slds-form-element",4,"ngIf"],[3,"fieldname","fieldconfig"],[3,"fielddisplayclass","editable","fieldconfig"],[1,"slds-form-element"],[1,"slds-form-element__control"],[1,"slds-combobox_container"],["tabindex","-1","system-dropdown-trigger","","aria-expanded","true","aria-haspopup","listbox","role","combobox",1,"slds-combobox","slds-dropdown-trigger","slds-dropdown-trigger_click"],["role","none",1,"slds-combobox__form-element","slds-input-has-icon","slds-input-has-icon_right"],["type","text","role","textbox","placeholder","Select an Option",1,"slds-input","slds-combobox__input-value",3,"value"],["icon","down","sprite","utility","addclasses","slds-input__icon slds-input__icon_right"],["role","listbox",1,"slds-dropdown","slds-dropdown_length-5","slds-dropdown_fluid"],["role","presentation",1,"slds-listbox","slds-listbox_vertical"],["role","presentation","class","slds-listbox__item",3,"click",4,"ngFor","ngForOf"],["role","presentation",1,"slds-listbox__item",3,"click"],["id","option1","role","option",1,"slds-media","slds-listbox__option","slds-listbox__option_plain","slds-media_small","slds-is-selected"],["class","slds-media__figure slds-listbox__option-icon",4,"ngIf"],[1,"slds-media__body"],["title","Accounts",1,"slds-truncate"],[1,"slds-assistive-text"],[1,"slds-media__figure","slds-listbox__option-icon"],[1,"slds-icon_container","slds-icon-utility-check","slds-current-color"],["icon","check","size","xx-small","sprite","utility","addclasses","slds-input__icon slds-input__icon_right"]],template:function(e,t){1&e&&(c.YNc(0,ac,1,2,"field-label",0),c.YNc(1,dc,3,4,"field-generic-display",1),c.YNc(2,uc,10,2,"div",2)),2&e&&(c.Q6J("ngIf",t.displayLabel),c.xp6(1),c.Q6J("ngIf",!t.isEditMode()),c.xp6(1),c.Q6J("ngIf",t.isEditMode()))},dependencies:[n.sg,n.O5,hs.f,Hd.l,h.q,A.D],encapsulation:2})),fieldEnumMulti})();var mc=s(3398);function gc(e,t){if(1&e&&c._UZ(0,"field-label",3),2&e){const e=c.oxw();c.Q6J("fieldname",e.fieldname)("fieldconfig",e.fieldconfig)}}function pc(e,t){if(1&e&&(c.TgZ(0,"span"),c._uU(1),c.qZA()),2&e){const e=c.oxw(2);c.xp6(1),c.hij(" ",e.expression.displayValue," ")}}function fc(e,t){if(1&e&&(c.TgZ(0,"field-generic-display",4),c.YNc(1,pc,2,1,"span",5),c.qZA()),2&e){const e=c.oxw();c.Q6J("fielddisplayclass",e.fielddisplayclass)("editable",e.isEditable())("fieldconfig",e.fieldconfig),c.xp6(1),c.Q6J("ngIf",null==e.expression?null:e.expression.displayValue)}}function bc(e,t){1&e&&c._UZ(0,"system-label",31)}function vc(e,t){1&e&&c._UZ(0,"system-label",32)}function Zc(e,t){if(1&e&&(c.TgZ(0,"label",28),c.YNc(1,bc,1,0,"system-label",29),c.YNc(2,vc,1,0,"system-label",30),c.qZA()),2&e){const e=c.oxw(2);c.xp6(1),c.Q6J("ngIf","daily"==e.expression.recurrence),c.xp6(1),c.Q6J("ngIf","daily"!=e.expression.recurrence)}}function _c(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"div",37)(1,"label",8),c._UZ(2,"system-label",38),c.qZA(),c.TgZ(3,"div",10)(4,"input",39),c.NdJ("ngModelChange",(function(t){c.CHM(e);const s=c.oxw(3);return c.KtG(s.expression.everyQuantity=t)}))("ngModelChange",(function(){c.CHM(e);const t=c.oxw(3);return c.KtG(t.setFieldValue())})),c.qZA()()()}if(2&e){const e=c.oxw(3);c.xp6(4),c.Q6J("ngModel",e.expression.everyQuantity)}}function yc(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"div",40)(1,"div",10)(2,"div",11)(3,"select",12),c.NdJ("ngModelChange",(function(t){c.CHM(e);const s=c.oxw(3);return c.KtG(s.expression.every=t)}))("ngModelChange",(function(){c.CHM(e);const t=c.oxw(3);return c.KtG(t.onEverySet())})),c.TgZ(4,"option",41),c._UZ(5,"system-label",42),c.qZA(),c.TgZ(6,"option",43),c._UZ(7,"system-label",42),c.qZA(),c.TgZ(8,"option",44),c._UZ(9,"system-label",42),c.qZA(),c.TgZ(10,"option",45),c._UZ(11,"system-label",42),c.qZA(),c.TgZ(12,"option",46),c._UZ(13,"system-label",42),c.qZA(),c.TgZ(14,"option",47),c._UZ(15,"system-label",42),c.qZA(),c.TgZ(16,"option",48),c._UZ(17,"system-label",49),c.qZA()()()()()}if(2&e){const e=c.oxw(3);c.xp6(3),c.Q6J("ngModel",e.expression.every),c.xp6(2),c.Q6J("label",e.expression.everyQuantity>1?"LBL_MINUTES":"LBL_MINUTE"),c.xp6(2),c.Q6J("label",e.expression.everyQuantity>1?"LBL_HOURS":"LBL_HOUR"),c.xp6(2),c.Q6J("label",e.expression.everyQuantity>1?"LBL_DAYS":"LBL_DAY"),c.xp6(2),c.Q6J("label",e.expression.everyQuantity>1?"LBL_DAYS_AT":"LBL_DAY_AT"),c.xp6(2),c.Q6J("label",e.expression.everyQuantity>1?"LBL_MONTHS":"LBL_MONTH"),c.xp6(2),c.Q6J("label",e.expression.everyQuantity>1?"LBL_MONTHS_AT":"LBL_MONTH_AT")}}function xc(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"div",50)(1,"div",51)(2,"system-input-time",52),c.NdJ("ngModelChange",(function(t){c.CHM(e);const s=c.oxw(3);return c.KtG(s.expression.everyAtValue=t)}))("ngModelChange",(function(){c.CHM(e);const t=c.oxw(3);return c.KtG(t.setFieldValue())})),c.qZA(),c.TgZ(3,"span",53),c._UZ(4,"system-label",54),c.qZA()()()}if(2&e){const e=c.oxw(3);c.xp6(2),c.Q6J("ngModel",e.expression.everyAtValue)}}function wc(e,t){1&e&&c._UZ(0,"system-label",62)}function Tc(e,t){1&e&&c._UZ(0,"system-label",63)}function Cc(e,t){1&e&&c._UZ(0,"system-label",64)}function Ac(e,t){1&e&&c._UZ(0,"system-label",65)}function kc(e,t){if(1&e&&(c.ynx(0,57),c.YNc(1,wc,1,0,"system-label",58),c.YNc(2,Tc,1,0,"system-label",59),c.YNc(3,Cc,1,0,"system-label",60),c.YNc(4,Ac,1,0,"system-label",61),c.BQk()),2&e){const e=c.oxw(4);c.Q6J("ngSwitch",e.expression.everyAtValue),c.xp6(1),c.Q6J("ngSwitchCase",1==e.expression.everyAtValue||21==e.expression.everyAtValue||31==e.expression.everyAtValue?e.expression.everyAtValue:"1"),c.xp6(1),c.Q6J("ngSwitchCase",2==e.expression.everyAtValue||22==e.expression.everyAtValue?e.expression.everyAtValue:"2"),c.xp6(1),c.Q6J("ngSwitchCase",3==e.expression.everyAtValue||23==e.expression.everyAtValue?e.expression.everyAtValue:"3")}}function Lc(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"div",50)(1,"div",51)(2,"input",55),c.NdJ("ngModelChange",(function(t){c.CHM(e);const s=c.oxw(3);return c.KtG(s.expression.everyAtValue=t)}))("ngModelChange",(function(){c.CHM(e);const t=c.oxw(3);return c.KtG(t.setFieldValue())})),c.qZA(),c.TgZ(3,"span",53),c.YNc(4,kc,5,4,"ng-container",56),c.qZA()()()}if(2&e){const e=c.oxw(3);c.xp6(2),c.Q6J("ngModel",e.expression.everyAtValue),c.xp6(2),c.Q6J("ngIf",!!e.expression.everyAtValue)}}const Ic=function(e,t,s,i,n,o,l){return{0:e,1:t,2:s,3:i,4:n,5:o,6:l}};function Mc(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"div",66)(1,"div",10)(2,"system-multiple-select",67),c.NdJ("ngModelChange",(function(t){c.CHM(e);const s=c.oxw(3);return c.KtG(s.expression.everyAtValue=t)}))("ngModelChange",(function(){c.CHM(e);const t=c.oxw(3);return c.KtG(t.setFieldValue())})),c.qZA()()()}if(2&e){const e=c.oxw(3);c.xp6(2),c.Q6J("showPills",!1)("ngModel",e.expression.everyAtValue)("listItems",c.Hh0(3,Ic,e.weekdays[0],e.weekdays[1],e.weekdays[2],e.weekdays[3],e.weekdays[4],e.weekdays[5],e.weekdays[6]))}}function Sc(e,t){if(1&e&&(c.TgZ(0,"option",69),c._uU(1),c.qZA()),2&e){const e=t.$implicit,s=t.index;c.Q6J("value",s),c.xp6(1),c.hij(" ",e," ")}}function Jc(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"div",66)(1,"div",10)(2,"div",11)(3,"select",12),c.NdJ("ngModelChange",(function(t){c.CHM(e);const s=c.oxw(3);return c.KtG(s.expression.everyAtValue=t)}))("ngModelChange",(function(){c.CHM(e);const t=c.oxw(3);return c.KtG(t.setFieldValue())})),c.YNc(4,Sc,2,2,"option",68),c.qZA()()()()}if(2&e){const e=c.oxw(3);c.xp6(3),c.Q6J("ngModel",e.expression.everyAtValue),c.xp6(1),c.Q6J("ngForOf",e.weekdays)}}function Oc(e,t){if(1&e&&(c.TgZ(0,"option",69),c._uU(1),c.qZA()),2&e){const e=t.$implicit,s=t.index;c.Q6J("value",s+1),c.xp6(1),c.hij(" ",e," ")}}function Nc(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"div",66)(1,"div",10)(2,"div",11)(3,"select",12),c.NdJ("ngModelChange",(function(t){c.CHM(e);const s=c.oxw(3);return c.KtG(s.expression.everyAtValue=t)}))("ngModelChange",(function(){c.CHM(e);const t=c.oxw(3);return c.KtG(t.setFieldValue())})),c.YNc(4,Oc,2,2,"option",68),c.qZA()()()()}if(2&e){const e=c.oxw(3);c.xp6(3),c.Q6J("ngModel",e.expression.everyAtValue),c.xp6(1),c.Q6J("ngForOf",e.months)}}function Fc(e,t){if(1&e&&(c.ynx(0),c.YNc(1,_c,5,1,"div",33),c.YNc(2,yc,18,7,"div",34),c.YNc(3,xc,5,1,"div",35),c.YNc(4,Lc,5,2,"div",35),c.YNc(5,Mc,3,11,"div",36),c.YNc(6,Jc,5,2,"div",36),c.YNc(7,Nc,5,2,"div",36),c.BQk()),2&e){const e=c.oxw(2);c.xp6(1),c.Q6J("ngIf","weekdays"!=e.expression.every&&"custom"==e.expression.recurrence),c.xp6(1),c.Q6J("ngIf","custom"==e.expression.recurrence),c.xp6(1),c.Q6J("ngIf","daysAt"==e.expression.every||"daily"==e.expression.recurrence),c.xp6(1),c.Q6J("ngIf","monthsAt"==e.expression.every||"monthly"==e.expression.recurrence),c.xp6(1),c.Q6J("ngIf","weekdays"==e.expression.every),c.xp6(1),c.Q6J("ngIf","weekly"==e.expression.recurrence),c.xp6(1),c.Q6J("ngIf","annually"==e.expression.recurrence)}}function qc(e,t){if(1&e){const e=c.EpF();c.ynx(0),c.TgZ(1,"div",70)(2,"div",71)(3,"div",10)(4,"input",72),c.NdJ("ngModelChange",(function(t){c.CHM(e);const s=c.oxw(2);return c.KtG(s.expression.minutes=t)}))("ngModelChange",(function(){c.CHM(e);const t=c.oxw(2);return c.KtG(t.setFieldValue())})),c.qZA()()(),c.TgZ(5,"div",73),c._uU(6,"::"),c.qZA(),c.TgZ(7,"div",71)(8,"div",10)(9,"input",74),c.NdJ("ngModelChange",(function(t){c.CHM(e);const s=c.oxw(2);return c.KtG(s.expression.hours=t)}))("ngModelChange",(function(){c.CHM(e);const t=c.oxw(2);return c.KtG(t.setFieldValue())})),c.qZA()()(),c.TgZ(10,"div",73),c._uU(11,"::"),c.qZA(),c.TgZ(12,"div",71)(13,"div",10)(14,"input",75),c.NdJ("ngModelChange",(function(t){c.CHM(e);const s=c.oxw(2);return c.KtG(s.expression.monthDay=t)}))("ngModelChange",(function(){c.CHM(e);const t=c.oxw(2);return c.KtG(t.setFieldValue())})),c.qZA()()(),c.TgZ(15,"div",73),c._uU(16,"::"),c.qZA(),c.TgZ(17,"div",71)(18,"div",10)(19,"input",76),c.NdJ("ngModelChange",(function(t){c.CHM(e);const s=c.oxw(2);return c.KtG(s.expression.month=t)}))("ngModelChange",(function(){c.CHM(e);const t=c.oxw(2);return c.KtG(t.setFieldValue())})),c.qZA()()(),c.TgZ(20,"div",73),c._uU(21,"::"),c.qZA(),c.TgZ(22,"div",71)(23,"div",10)(24,"input",77),c.NdJ("ngModelChange",(function(t){c.CHM(e);const s=c.oxw(2);return c.KtG(s.expression.weekDay=t)}))("ngModelChange",(function(){c.CHM(e);const t=c.oxw(2);return c.KtG(t.setFieldValue())})),c.qZA()()()(),c.BQk()}if(2&e){const e=c.oxw(2);c.xp6(4),c.Q6J("ngModel",e.expression.minutes),c.xp6(5),c.Q6J("ngModel",e.expression.hours),c.xp6(5),c.Q6J("ngModel",e.expression.monthDay),c.xp6(5),c.Q6J("ngModel",e.expression.month),c.xp6(5),c.Q6J("ngModel",e.expression.weekDay)}}function Ec(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"div",6)(1,"div",7)(2,"label",8),c._UZ(3,"system-label",9),c.qZA(),c.TgZ(4,"div",10)(5,"div",11)(6,"select",12),c.NdJ("ngModelChange",(function(t){c.CHM(e);const s=c.oxw();return c.KtG(s.expression.recurrence=t)}))("ngModelChange",(function(){c.CHM(e);const t=c.oxw();return c.KtG(t.onRecurrenceSet())})),c.TgZ(7,"option",13),c._UZ(8,"system-label",14),c.qZA(),c.TgZ(9,"option",15),c._UZ(10,"system-label",16),c.qZA(),c.TgZ(11,"option",17),c._UZ(12,"system-label",18),c.qZA(),c.TgZ(13,"option",19),c._UZ(14,"system-label",20),c.qZA(),c.TgZ(15,"option",21),c._UZ(16,"system-label",22),c.qZA(),c.TgZ(17,"option",23),c._UZ(18,"system-label",24),c.qZA(),c.TgZ(19,"option",25),c._UZ(20,"system-label",26),c.qZA()()()()(),c.YNc(21,Zc,3,2,"label",27),c.YNc(22,Fc,8,7,"ng-container",5),c.YNc(23,qc,25,5,"ng-container",5),c.qZA()}if(2&e){const e=c.oxw();c.xp6(6),c.Q6J("ngModel",e.expression.recurrence),c.xp6(15),c.Q6J("ngIf","custom"!=e.expression.recurrence&&"cron"!=e.expression.recurrence&&"everyWeekday"!=e.expression.recurrence),c.xp6(1),c.Q6J("ngIf","cron"!=e.expression.recurrence),c.xp6(1),c.Q6J("ngIf","cron"==e.expression.recurrence)}}let Yc=(()=>{var e;class fieldCronInterval extends r.O{constructor(e,t,s,n,o,l){super(e,t,s,o,l),(0,i.Z)(this,"model",void 0),(0,i.Z)(this,"view",void 0),(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"userPreferences",void 0),(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"router",void 0),(0,i.Z)(this,"expression",void 0),(0,i.Z)(this,"weekdays",[]),(0,i.Z)(this,"months",[]),(0,i.Z)(this,"everyLabels",{minutes:"LBL_MINUTE{s}",hours:"LBL_HOUR{s}",days:"LBL_DAY{s}",months:"LBL_MONTH{s}",weekdays:"LBL_WEEKDAY{s}",daysAt:"LBL_DAY{s}_AT",monthsAt:"LBL_MONTH{s}_AT"}),(0,i.Z)(this,"recurrenceLabels",{daily:"LBL_DAILY",weekly:"LBL_WEEKLY",monthly:"LBL_MONTHLY",annually:"LBL_ANNUALLY",everyWeekday:"LBL_EVERY_WEEKDAY"}),this.model=e,this.view=t,this.language=s,this.userPreferences=n,this.metadata=o,this.router=l}ngOnInit(){this.setSelectOptionsFromMoment(),this.initializeValue(),this.setLocalValue(this.value),this.subscribeToFieldChanges(),this.subscribeToLanguageChanges()}resetEveryAtValue(){this.expression.everyAtValue=void 0}resetEveryQuantity(){this.expression.everyQuantity=void 0}onRecurrenceSet(){"custom"!=this.expression.recurrence&&"cron"!=this.expression.recurrence?(this.setDefaultRecurrenceEveryAtValue(),this.setFieldValue()):this.expression.every="minutes",this.resetEveryQuantity()}onEverySet(){this.resetEveryAtValue(),"weekdays"==this.expression.every&&(this.resetEveryQuantity(),this.expression.everyAtValue||(this.expression.everyAtValue={})),"daysAt"==this.expression.every&&(this.expression.everyAtValue=moment().hour(0).minute(0).tz(this.userPreferences.toUse.timezone)),null!=this.expression.everyQuantity&&"daysAt"!=this.expression.every&&"monthsAt"!=this.expression.every&&this.setFieldValue()}setDefaultRecurrenceEveryAtValue(){switch(this.expression.recurrence){case"daily":this.expression.everyAtValue=moment(moment().utc().hour(0).minute(0));break;case"weekly":this.expression.everyAtValue="0";break;case"monthly":case"annually":this.expression.everyAtValue="1"}}subscribeToLanguageChanges(){this.subscriptions.add(this.language.currentlanguage$.subscribe((()=>{this.setSelectOptionsFromMoment(),this.setDisplayValue()})))}setSelectOptionsFromMoment(){this.weekdays=moment.weekdays(),this.months=moment.months()}subscribeToFieldChanges(){this.subscriptions.add(this.model.observeFieldChanges(this.fieldname).subscribe((e=>this.setLocalValue(e)))),this.subscriptions.add(this.model.canceledit$.subscribe((()=>this.setLocalValue(this.value))))}setFieldValue(){switch(this.resetExpressionProperties(),this.expression.recurrence){case"custom":this.setCustomExpression();break;case"cron":break;default:this.setExpressionByRecurrenceUnit()}this.expression.stringValue=`${this.expression.minutes}::`,this.expression.stringValue+=`${this.expression.hours}::`,this.expression.stringValue+=`${this.expression.monthDay}::`,this.expression.stringValue+=`${this.expression.month}::`,this.expression.stringValue+=`${this.expression.weekDay}`,this.value=this.expression.stringValue,this.setDisplayValue()}setCustomExpression(){if(!isNaN(this.expression.everyQuantity)||"weekdays"==this.expression.every)switch(this.expression.everyQuantity<1&&(this.expression.everyQuantity=1),this.expression.every){case"minutes":this.expression.everyQuantity>59&&(this.expression.everyQuantity=59),this.expression.minutes=`*/${this.expression.everyQuantity}`;break;case"hours":this.expression.everyQuantity>23&&(this.expression.everyQuantity=23),this.expression.minutes="0",this.expression.hours=`*/${this.expression.everyQuantity}`;break;case"days":this.expression.everyQuantity>31&&(this.expression.everyQuantity=31),this.expression.minutes="0",this.expression.hours="0",this.expression.monthDay=`*/${this.expression.everyQuantity}`;break;case"daysAt":if(!moment.isMoment(this.expression.everyAtValue))break;this.expression.everyQuantity>31&&(this.expression.everyQuantity=31),this.expression.hours=`${this.expression.everyAtValue.utc().hour()}`,this.expression.minutes=`${this.expression.everyAtValue.utc().minute()}`,this.expression.monthDay=`*/${this.expression.everyQuantity}`;break;case"months":this.expression.everyQuantity>12&&(this.expression.everyQuantity=12),this.expression.minutes="0",this.expression.hours="0",this.expression.month=`*/${this.expression.everyQuantity}`;break;case"monthsAt":this.expression.everyAtValue<1&&(this.expression.everyAtValue=1),this.expression.everyAtValue>31&&(this.expression.everyAtValue=31),this.expression.everyQuantity>12&&(this.expression.everyQuantity=12),this.expression.minutes="0",this.expression.hours="0",this.expression.monthDay=`${this.expression.everyAtValue}`,this.expression.month=`*/${this.expression.everyQuantity}`;break;case"weekdays":this.expression.minutes="0",this.expression.hours="0",this.expression.weekDay=this.expression.everyAtValue.join(",")}}resetExpressionProperties(){this.expression.minutes="*",this.expression.hours="*",this.expression.monthDay="*",this.expression.month="*",this.expression.weekDay="*"}setExpressionByRecurrenceUnit(){switch(this.expression.recurrence){case"daily":this.expression.minutes=`${this.expression.everyAtValue.utc().minute()}`,this.expression.hours=`${this.expression.everyAtValue.utc().hour()}`;break;case"weekly":this.expression.minutes="0",this.expression.hours="0",this.expression.weekDay=this.expression.everyAtValue;break;case"everyWeekday":this.expression.minutes="0",this.expression.hours="0",this.expression.weekDay="1-5";break;case"monthly":this.expression.minutes="0",this.expression.hours="0",this.expression.monthDay=this.expression.everyAtValue;break;case"annually":this.expression.minutes="0",this.expression.hours="0",this.expression.month=this.expression.everyAtValue,this.expression.monthDay="1"}}initializeValue(){this.model.isNew&&(this.value="*::*::*::*::*")}setLocalValue(e){if(!e||e==this.expression?.stringValue)return;5==e.split("::").length&&(this.parseExpressionFromString(e),this.setDisplayValue())}parseExpressionFromString(e){this.expression&&(this.expression.every=void 0,this.resetEveryAtValue(),this.resetEveryQuantity());const t=e.split("::");this.expression={minutes:t[0],hours:t[1],monthDay:t[2],month:t[3],weekDay:t[4],stringValue:e},this.setRecurrenceAtFromInput(e),"custom"==this.expression.recurrence&&this.setEveryValueFromExpression()}setRecurrenceAtFromInput(e){const t=!isNaN(+(this.expression.minutes+this.expression.hours))&&e.endsWith("::*::*::*"),s=!isNaN(+(this.expression.minutes+this.expression.hours+this.expression.weekDay))&&"*"==this.expression.month&&"*"==this.expression.monthDay,i="0::0::*::*::1-5"==e,n=!isNaN(+(this.expression.minutes+this.expression.hours+this.expression.monthDay))&&e.endsWith("::*::*"),o=!isNaN(+(this.expression.minutes+this.expression.hours+this.expression.monthDay+this.expression.monthDay))&&e.endsWith("::*");t?(this.expression.recurrence="daily",this.expression.everyAtValue=moment(moment.utc().hour(+this.expression.hours).minute(+this.expression.minutes)).tz(this.userPreferences.toUse.timezone)):s?(this.expression.recurrence="weekly",this.expression.everyAtValue=this.expression.weekDay):i?this.expression.recurrence="everyWeekday":n?(this.expression.recurrence="monthly",this.expression.everyAtValue=this.expression.monthDay):o?(this.expression.recurrence="annually",this.expression.everyAtValue=this.expression.month):this.expression.recurrence="custom"}setEveryValueFromExpression(){const e=this.expression.minutes,t=this.expression.hours,s=this.expression.monthDay,i=this.expression.month,n=this.expression.weekDay;"*"==i&&"*"==n?(e.startsWith("*")&&"*"==t&&"*"==s&&(this.expression.every="minutes",this.expression.everyQuantity="*"==e?1:+e.substring(2)),t.startsWith("*/")&&0==+e&&"*"==s&&(this.expression.every="hours",this.expression.everyQuantity=+t.substring(2)),s.startsWith("*/")&&0==+e&&0==+t&&(this.expression.every="days",this.expression.everyQuantity=+s.substring(2)),s.startsWith("*/")&&+t>-1&&+e>-1&&(this.expression.every="daysAt",this.expression.everyQuantity=+s.substring(2),this.expression.everyAtValue=moment(moment.utc().hour(+t).minute(+e)).tz(this.userPreferences.toUse.timezone))):(i.startsWith("*/")&&0==+e&&0==+t&&"*"==n&&("*"==s&&(this.expression.every="months"),+s>0&&(this.expression.every="monthsAt",this.expression.everyAtValue=+s),this.expression.everyQuantity=+i.substring(2)),isNaN(+n.split(",")[0])||0!=+e||0!=+t||"*"!=i||"*"!=s||(this.expression.every="weekdays",this.expression.everyAtValue=n.split(","))),null==this.expression.every&&(this.expression.recurrence="cron")}setDisplayValue(){if("cron"==this.expression.recurrence)return this.expression.displayValue=this.expression.stringValue;if("custom"!=this.expression.recurrence){switch(this.expression.displayValue=`${this.language.getLabel(this.recurrenceLabels[this.expression.recurrence])} `,this.expression.displayValue+=`${this.language.getLabel("daily"==this.expression.recurrence?"LBL_AT_HOUR":"LBL_ON_DATE","","short")} `,this.expression.recurrence){case"daily":if(!moment.isMoment(this.expression.everyAtValue))break;this.expression.displayValue+=`${this.expression.everyAtValue.tz(this.userPreferences.toUse.timezone).format(this.userPreferences.getTimeFormat())} ${this.language.getLabel("LBL_O_CLOCK")}`;break;case"monthly":this.expression.displayValue+=` ${this.expression.everyAtValue}${this.language.getLabel(1==this.expression.everyAtValue||21==this.expression.everyAtValue||31==this.expression.everyAtValue?"LBL_ST_DAY":2==this.expression.everyAtValue||22==this.expression.everyAtValue?"LBL_ND_DAY":3==this.expression.everyAtValue||23==this.expression.everyAtValue?"LBL_RD_DAY":"")}`;break;case"weekly":this.expression.displayValue+=` ${this.weekdays[this.expression.everyAtValue]}`;break;case"annually":this.expression.displayValue+=` ${this.months[this.expression.everyAtValue-1]}`;break;default:this.expression.displayValue+=`${this.expression.everyAtValue}`}return}this.expression.displayValue=`${this.language.getLabel("LBL_EVERY")} `;const e=this.expression.everyAtValue;if(this.expression.every&&"weekdays"!=this.expression.every){const e=this.language.getLabel(this.everyLabels[this.expression.every].replace("{s}",this.expression.everyQuantity>1?"S":""));this.expression.displayValue+=`${this.expression.everyQuantity} ${e}`}this.expression.everyAtValue&&("monthsAt"==this.expression.every?this.expression.displayValue+=` ${this.expression.everyAtValue}${this.language.getLabel(1==e||21==e||31==e?"LBL_ST_DAY":2==e||22==e?"LBL_ND_DAY":3==e||23==e?"LBL_RD_DAY":"")}`:"daysAt"==this.expression.every&&moment.isMoment(this.expression.everyAtValue)?this.expression.displayValue+=` ${e.tz(this.userPreferences.toUse.timezone).format(this.userPreferences.getTimeFormat())} ${this.language.getLabel("LBL_O_CLOCK")}`:"weekdays"==this.expression.every&&(this.expression.displayValue+=` ${this.expression.everyAtValue.map((e=>this.weekdays[e])).join(", ")}`))}}return e=fieldCronInterval,(0,i.Z)(fieldCronInterval,"ɵfac",(function(t){return new(t||e)(c.Y36(w.o),c.Y36(k.e),c.Y36(x.d),c.Y36(Ze.z),c.Y36(u.Pu),c.Y36(L.F0))})),(0,i.Z)(fieldCronInterval,"ɵcmp",c.Xpm({type:e,selectors:[["field-cron-interval"]],features:[c.qOj],decls:3,vars:3,consts:[[3,"fieldname","fieldconfig",4,"ngIf"],[3,"fielddisplayclass","editable","fieldconfig",4,"ngIf"],["class","slds-grid",4,"ngIf"],[3,"fieldname","fieldconfig"],[3,"fielddisplayclass","editable","fieldconfig"],[4,"ngIf"],[1,"slds-grid"],[1,"slds-form-element","slds-grid","slds-grid--vertical-align-center","slds-grow"],[1,"slds-form-element__label"],["label","LBL_REPEAT"],[1,"slds-form-element__control","slds-grow"],[1,"slds-select_container"],[1,"slds-select",3,"ngModel","ngModelChange"],["value","daily"],["label","LBL_DAILY"],["value","weekly"],["label","LBL_WEEKLY"],["value","monthly"],["label","LBL_MONTHLY"],["value","annually"],["label","LBL_ANNUALLY"],["value","everyWeekday"],["label","LBL_EVERY_WEEKDAY"],["value","custom"],["label","LBL_CUSTOM"],["value","cron"],["label","LBL_CRON_EXPRESSION"],["class","slds-form-element__label slds-align-middle slds-m-left--small",4,"ngIf"],[1,"slds-form-element__label","slds-align-middle","slds-m-left--small"],["label","LBL_AT_HOUR","length","short",4,"ngIf"],["label","LBL_ON_DATE","length","short",4,"ngIf"],["label","LBL_AT_HOUR","length","short"],["label","LBL_ON_DATE","length","short"],["class","slds-form-element slds-grid slds-grid--vertical-align-center slds-m-left--xx-small slds-grow",4,"ngIf"],["class","slds-form-element slds-grid slds-m-left--xx-small slds-grow",4,"ngIf"],["class","slds-form-element slds-m-left--xx-small slds-grow",4,"ngIf"],["class","slds-form-element slds-m-left--xx-small slds-grid slds-grid--vertical-align-center slds-grow",4,"ngIf"],[1,"slds-form-element","slds-grid","slds-grid--vertical-align-center","slds-m-left--xx-small","slds-grow"],["label","LBL_EVERY"],["type","text","size","3","maxlength","3",1,"slds-input",3,"ngModel","ngModelChange"],[1,"slds-form-element","slds-grid","slds-m-left--xx-small","slds-grow"],["value","minutes"],[3,"label"],["value","hours"],["value","days"],["value","daysAt"],["value","months"],["value","monthsAt"],["value","weekdays"],["label","LBL_WEEK_ON"],[1,"slds-form-element","slds-m-left--xx-small","slds-grow"],[1,"slds-form-element__control","slds-input-has-fixed-addon","slds-grow"],[1,"slds-grow","slds-p-left--xxx-small",3,"ngModel","ngModelChange"],[1,"slds-form-element__addon",2,"white-space","nowrap"],["label","LBL_O_CLOCK"],["type","text","size","3","maxlength","6",1,"slds-input",3,"ngModel","ngModelChange"],[3,"ngSwitch",4,"ngIf"],[3,"ngSwitch"],["label","LBL_ST_DAY",4,"ngSwitchCase"],["label","LBL_ND_DAY",4,"ngSwitchCase"],["label","LBL_RD_DAY",4,"ngSwitchCase"],["label","LBL_TH_DAY",4,"ngSwitchDefault"],["label","LBL_ST_DAY"],["label","LBL_ND_DAY"],["label","LBL_RD_DAY"],["label","LBL_TH_DAY"],[1,"slds-form-element","slds-m-left--xx-small","slds-grid","slds-grid--vertical-align-center","slds-grow"],[3,"showPills","ngModel","listItems","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[1,"slds-m-left--xx-small","slds-grid","slds-grid--vertical-align-center","slds-grow"],[1,"slds-form-element","slds-grow"],["type","text","system-placeholder","LBL_MINUTES","size","3","maxlength","6",1,"slds-input",3,"ngModel","ngModelChange"],[1,"slds-m-horizontal--xx-small"],["type","text","system-placeholder","LBL_HOURS","size","3","maxlength","6",1,"slds-input",3,"ngModel","ngModelChange"],["type","text","system-placeholder","LBL_MONTH_DAY","size","3","maxlength","6",1,"slds-input",3,"ngModel","ngModelChange"],["type","text","system-placeholder","LBL_MONTH","size","3","maxlength","6",1,"slds-input",3,"ngModel","ngModelChange"],["type","text","system-placeholder","LBL_WEEK_DAY","size","3","maxlength","6",1,"slds-input",3,"ngModel","ngModelChange"]],template:function(e,t){1&e&&(c.YNc(0,gc,1,2,"field-label",0),c.YNc(1,fc,2,4,"field-generic-display",1),c.YNc(2,Ec,24,4,"div",2)),2&e&&(c.Q6J("ngIf",t.displayLabel),c.xp6(1),c.Q6J("ngIf",!t.isEditMode()),c.xp6(1),c.Q6J("ngIf",t.isEditMode()&&!!t.expression))},dependencies:[n.sg,n.O5,n.RF,n.n9,n.ED,o.YN,o.Kr,o.Fj,o.EJ,o.JJ,o.nD,o.On,Vi.H,se._,Dt.I,mc.A,h.q,A.D],encapsulation:2})),fieldCronInterval})();var Dc=s(3845);function Qc(e,t){if(1&e&&c._UZ(0,"field-label",3),2&e){const e=c.oxw();c.Q6J("fieldname",e.fieldname)("fieldconfig",e.fieldconfig)}}function Uc(e,t){if(1&e&&(c.TgZ(0,"field-generic-display",4),c._uU(1),c.qZA()),2&e){const e=c.oxw();c.Q6J("fielddisplayclass",e.fielddisplayclass)("editable",e.isEditable())("fieldconfig",e.fieldconfig)("title",e.value)("fieldid",e.fieldid),c.xp6(1),c.hij(" ",e.value,"\n")}}function Rc(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"div",5)(1,"system-googleplaces-search",6,7),c.NdJ("ngModelChange",(function(t){c.CHM(e);const s=c.oxw();return c.KtG(s.value=t)}))("details",(function(t){c.CHM(e);const s=c.oxw();return c.KtG(s.setDetails(t))})),c.qZA(),c._UZ(3,"field-messages",8),c.qZA()}if(2&e){const e=c.oxw();c.Q6J("ngClass",e.css_classes),c.xp6(1),c.Q6J("ngModel",e.value),c.xp6(2),c.Q6J("fieldname",e.fieldname)}}let jc=(()=>{var e;class fieldGooglePlacesSearch extends r.O{constructor(e,t,s,n,o,l){super(e,t,s,n,l),(0,i.Z)(this,"model",void 0),(0,i.Z)(this,"view",void 0),(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"configurationService",void 0),(0,i.Z)(this,"router",void 0),(0,i.Z)(this,"options",[]),this.model=e,this.view=t,this.language=s,this.metadata=n,this.configurationService=o,this.router=l}setDetails(e){let t={};this.fieldconfig.formatted_phone_number&&e.formatted_phone_number&&(t[this.fieldconfig.formatted_phone_number]=e.formatted_phone_number),this.fieldconfig.international_phone_number&&e.international_phone_number&&(t[this.fieldconfig.international_phone_number]=e.international_phone_number),this.fieldconfig.website&&e.website&&(t[this.fieldconfig.website]=e.website),e.address&&(this.fieldconfig.city&&e.address.city&&(t[this.fieldconfig.city]=e.address.city),this.fieldconfig.country&&e.address.country&&(t[this.fieldconfig.country]=e.address.country),this.fieldconfig.postalcode&&e.address.postalcode&&(t[this.fieldconfig.postalcode]=e.address.postalcode),this.fieldconfig.state&&e.address.state&&(t[this.fieldconfig.state]=e.address.state),this.fieldconfig.street&&e.address.street_name&&(t[this.fieldconfig.street]=e.address.street_name),!this.hideStreetNumber&&this.fieldconfig.street_number&&e.address.street_number?t[this.fieldconfig.street_number]=e.address.street_number:this.hideStreetNumber&&this.fieldconfig.street&&e.address.street_name&&e.address.street_number&&(t[this.fieldconfig.street]+=" "+e.address.street_number),this.fieldconfig.latitude&&e.address.latitude&&(t[this.fieldconfig.latitude]=e.address.latitude),this.fieldconfig.longitude&&e.address.longitude&&(t[this.fieldconfig.longitude]=e.address.longitude)),_.isEmpty(t)||this.model.setFields(t)}get hideStreetNumber(){const e=JSON.parse(this.configurationService.data.backendextensions.address_format?.config?.format||"{}");return!!e?.hidestreetnumber}}return e=fieldGooglePlacesSearch,(0,i.Z)(fieldGooglePlacesSearch,"ɵfac",(function(t){return new(t||e)(c.Y36(w.o),c.Y36(k.e),c.Y36(x.d),c.Y36(u.Pu),c.Y36(ee.C),c.Y36(L.F0))})),(0,i.Z)(fieldGooglePlacesSearch,"ɵcmp",c.Xpm({type:e,selectors:[["field-google-places-search"]],features:[c.qOj],decls:3,vars:3,consts:[[3,"fieldname","fieldconfig",4,"ngIf"],[3,"fielddisplayclass","editable","fieldconfig","title","fieldid",4,"ngIf"],["class","slds-form-element__control",3,"ngClass",4,"ngIf"],[3,"fieldname","fieldconfig"],[3,"fielddisplayclass","editable","fieldconfig","title","fieldid"],[1,"slds-form-element__control",3,"ngClass"],[3,"ngModel","ngModelChange","details"],["focus",""],[3,"fieldname"]],template:function(e,t){1&e&&(c.YNc(0,Qc,1,2,"field-label",0),c.YNc(1,Uc,2,6,"field-generic-display",1),c.YNc(2,Rc,4,3,"div",2)),2&e&&(c.Q6J("ngIf",t.displayLabel),c.xp6(1),c.Q6J("ngIf",!t.isEditMode()),c.xp6(1),c.Q6J("ngIf",t.isEditable()&&t.isEditMode()))},dependencies:[n.mk,n.O5,o.JJ,o.On,Dc.l,h.q,A.D,J.a],encapsulation:2})),fieldGooglePlacesSearch})();function Bc(e,t){if(1&e&&c._UZ(0,"field-label",2),2&e){const e=c.oxw();c.Q6J("fieldname",e.fieldname)("fieldconfig",e.fieldconfig)}}let Gc=(()=>{var e;class fieldTextID extends r.O{constructor(e,t,s,n,o,l){super(e,t,s,n,l),(0,i.Z)(this,"model",void 0),(0,i.Z)(this,"view",void 0),(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"configurationService",void 0),(0,i.Z)(this,"router",void 0),this.model=e,this.view=t,this.language=s,this.metadata=n,this.configurationService=o,this.router=l}get textName(){let e=this.configurationService.getData("systextids"),t=e?e[this.value]:void 0;return t&&t.label?this.language.getLabel(t.label):this.value}}return e=fieldTextID,(0,i.Z)(fieldTextID,"ɵfac",(function(t){return new(t||e)(c.Y36(w.o),c.Y36(k.e),c.Y36(x.d),c.Y36(u.Pu),c.Y36(ee.C),c.Y36(L.F0))})),(0,i.Z)(fieldTextID,"ɵcmp",c.Xpm({type:e,selectors:[["field-textid"]],features:[c.qOj],decls:3,vars:7,consts:[[3,"fieldname","fieldconfig",4,"ngIf"],[3,"editable","fielddisplayclass","fieldconfig","title","fieldid"],[3,"fieldname","fieldconfig"]],template:function(e,t){1&e&&(c.YNc(0,Bc,1,2,"field-label",0),c.TgZ(1,"field-generic-display",1),c._uU(2),c.qZA()),2&e&&(c.Q6J("ngIf",t.displayLabel),c.xp6(1),c.Q6J("editable",!1)("fielddisplayclass",t.fielddisplayclass)("fieldconfig",t.fieldconfig)("title",t.value)("fieldid",t.fieldid),c.xp6(1),c.hij(" ",t.textName,"\n"))},dependencies:[n.O5,h.q,A.D],encapsulation:2})),fieldTextID})();var Pc=s(8973);function Hc(e,t){if(1&e&&(c.TgZ(0,"field-generic-display",2),c._uU(1),c.qZA()),2&e){const e=c.oxw();c.Q6J("fielddisplayclass",e.fielddisplayclass)("editable",e.isEditable())("fieldconfig",e.fieldconfig)("title",e.value)("fieldid",e.fieldid),c.xp6(1),c.AsE(" ",e.className,"->",e.methodName,"\n")}}function zc(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"div",3)(1,"system-input-backend-method",4),c.NdJ("ngModelChange",(function(t){c.CHM(e);const s=c.oxw();return c.KtG(s.value=t)})),c.qZA(),c._UZ(2,"field-messages",5),c.qZA()}if(2&e){const e=c.oxw();c.Q6J("ngClass",e.css_classes),c.xp6(1),c.Q6J("ngModel",e.value),c.xp6(1),c.Q6J("fieldname",e.fieldname)}}let Vc=(()=>{var e;class fieldBackendMethod extends r.O{constructor(e,t,s,n,o){super(e,t,s,n,o),(0,i.Z)(this,"model",void 0),(0,i.Z)(this,"view",void 0),(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"router",void 0),(0,i.Z)(this,"classexists",!1),(0,i.Z)(this,"publicMethods",[]),this.model=e,this.view=t,this.language=s,this.metadata=n,this.router=o}get className(){return this.value?this.value.split("->")[0]:""}set className(e){this.value=e,this.validateNamespace()}get methodName(){if(this.value){if(2==this.value.split("->").length)return this.value.split("->")[1]}return""}set methodName(e){let t=this.value.split("->");this.value=t[0]+"->"+e}validateNamespace(){this.model.backend.getRequest("system/checkclass/"+btoa(this.className)).subscribe((e=>{this.classexists=e.classexists,this.publicMethods=e.methods}))}}return e=fieldBackendMethod,(0,i.Z)(fieldBackendMethod,"ɵfac",(function(t){return new(t||e)(c.Y36(w.o),c.Y36(k.e),c.Y36(x.d),c.Y36(u.Pu),c.Y36(L.F0))})),(0,i.Z)(fieldBackendMethod,"ɵcmp",c.Xpm({type:e,selectors:[["field-backend-method"]],features:[c.qOj],decls:2,vars:2,consts:[[3,"fielddisplayclass","editable","fieldconfig","title","fieldid",4,"ngIf"],["class","slds-form-element__control slds-p-around--xx-small",3,"ngClass",4,"ngIf"],[3,"fielddisplayclass","editable","fieldconfig","title","fieldid"],[1,"slds-form-element__control","slds-p-around--xx-small",3,"ngClass"],[3,"ngModel","ngModelChange"],[3,"fieldname"]],template:function(e,t){1&e&&(c.YNc(0,Hc,2,7,"field-generic-display",0),c.YNc(1,zc,3,3,"div",1)),2&e&&(c.Q6J("ngIf",!t.isEditMode()),c.xp6(1),c.Q6J("ngIf",t.isEditable()&&t.isEditMode()))},dependencies:[n.mk,n.O5,o.JJ,o.On,Pc.N,A.D,J.a],encapsulation:2})),fieldBackendMethod})();var Kc=s(3497);function $c(e,t){if(1&e&&(c.TgZ(0,"field-generic-display",2),c._uU(1),c.qZA()),2&e){const e=c.oxw();c.Q6J("fielddisplayclass",e.fielddisplayclass)("editable",e.isEditable())("fieldconfig",e.fieldconfig)("title",e.value)("fieldid",e.fieldid),c.xp6(1),c.hij(" ",e.value,"\n")}}function Xc(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"div",3)(1,"system-input-label",4),c.NdJ("ngModelChange",(function(t){c.CHM(e);const s=c.oxw();return c.KtG(s.value=t)})),c.qZA(),c._UZ(2,"field-messages",5),c.qZA()}if(2&e){const e=c.oxw();c.Q6J("ngClass",e.css_classes),c.xp6(1),c.Q6J("ngModel",e.value),c.xp6(1),c.Q6J("fieldname",e.fieldname)}}let Wc=(()=>{var e;class fieldSystemLabel extends r.O{}return e=fieldSystemLabel,(0,i.Z)(fieldSystemLabel,"ɵfac",function(){let t;return function(s){return(t||(t=c.n5z(e)))(s||e)}}()),(0,i.Z)(fieldSystemLabel,"ɵcmp",c.Xpm({type:e,selectors:[["field-system-label"]],features:[c.qOj],decls:2,vars:2,consts:[[3,"fielddisplayclass","editable","fieldconfig","title","fieldid",4,"ngIf"],["class","slds-form-element__control",3,"ngClass",4,"ngIf"],[3,"fielddisplayclass","editable","fieldconfig","title","fieldid"],[1,"slds-form-element__control",3,"ngClass"],[3,"ngModel","ngModelChange"],[3,"fieldname"]],template:function(e,t){1&e&&(c.YNc(0,$c,2,6,"field-generic-display",0),c.YNc(1,Xc,3,3,"div",1)),2&e&&(c.Q6J("ngIf",!t.isEditMode()),c.xp6(1),c.Q6J("ngIf",t.isEditable()&&t.isEditMode()))},dependencies:[n.mk,n.O5,o.JJ,o.On,Kc.$,A.D,J.a],encapsulation:2})),fieldSystemLabel})();function eu(e,t){if(1&e&&(c.TgZ(0,"field-generic-display",2),c._uU(1),c.qZA()),2&e){const e=c.oxw();c.Q6J("fielddisplayclass",e.fielddisplayclass)("editable",e.isEditable())("fieldconfig",e.fieldconfig)("title",e.value)("fieldid",e.fieldid),c.xp6(1),c.hij(" ",e.value,"\n")}}function tu(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"div",3)(1,"div",4)(2,"input",5,6),c.NdJ("ngModelChange",(function(t){c.CHM(e);const s=c.oxw();return c.KtG(s.timedifferencespan=t)})),c.qZA(),c.TgZ(4,"div",7)(5,"select",8),c.NdJ("ngModelChange",(function(t){c.CHM(e);const s=c.oxw();return c.KtG(s.timedifferenceunit=t)})),c.TgZ(6,"option",9),c._UZ(7,"system-label",10),c.qZA(),c.TgZ(8,"option",11),c._UZ(9,"system-label",12),c.qZA(),c.TgZ(10,"option",13),c._UZ(11,"system-label",14),c.qZA(),c.TgZ(12,"option",15),c._UZ(13,"system-label",16),c.qZA(),c.TgZ(14,"option",17),c._UZ(15,"system-label",18),c.qZA(),c.TgZ(16,"option",19),c._UZ(17,"system-label",20),c.qZA(),c.TgZ(18,"option",21),c._UZ(19,"system-label",22),c.qZA(),c.TgZ(20,"option",23),c._UZ(21,"system-label",24),c.qZA()()()(),c._UZ(22,"field-messages",25),c.qZA()}if(2&e){const e=c.oxw();c.Q6J("ngClass",e.css_classes),c.xp6(2),c.Q6J("ngModel",e.timedifferencespan)("maxlength",e.fieldlength)("ngModelOptions",e.modelOptions),c.xp6(3),c.Q6J("ngModel",e.timedifferenceunit),c.xp6(17),c.Q6J("fieldname",e.fieldname)}}let su=(()=>{var e;class fieldTimeDifference extends r.O{constructor(e,t,s,n,o){super(e,t,s,n,o),(0,i.Z)(this,"model",void 0),(0,i.Z)(this,"view",void 0),(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"router",void 0),(0,i.Z)(this,"_timedifferenceunit",void 0),(0,i.Z)(this,"_timedifferencespan",void 0),this.model=e,this.view=t,this.language=s,this.metadata=n,this.router=o}get timedifferenceunit(){return this._timedifferenceunit?this._timedifferenceunit:this.value?this.value.split(" ")[1]:"h"}set timedifferenceunit(e){this._timedifferenceunit=e,this.updateModel()}get timedifferencespan(){return this._timedifferencespan?this._timedifferencespan:this.value?this.value.split(" ")[0]:""}set timedifferencespan(e){this._timedifferencespan=e,this.updateModel()}updateModel(){this._timedifferencespan>0&&this.timedifferenceunit?this.value=this.timedifferencespan+" "+this._timedifferenceunit:this.value=""}}return e=fieldTimeDifference,(0,i.Z)(fieldTimeDifference,"ɵfac",(function(t){return new(t||e)(c.Y36(w.o),c.Y36(k.e),c.Y36(x.d),c.Y36(u.Pu),c.Y36(L.F0))})),(0,i.Z)(fieldTimeDifference,"ɵcmp",c.Xpm({type:e,selectors:[["field-time-difference"]],features:[c.qOj],decls:2,vars:2,consts:[[3,"fielddisplayclass","editable","fieldconfig","title","fieldid",4,"ngIf"],["class","slds-form-element__control slds-p-around--xx-small",3,"ngClass",4,"ngIf"],[3,"fielddisplayclass","editable","fieldconfig","title","fieldid"],[1,"slds-form-element__control","slds-p-around--xx-small",3,"ngClass"],[1,"slds-grid","slds-grid--vertical-align-center","slds-gutters_direct-xx-small"],["type","number",1,"slds-col","slds-size--1-of-2","slds-input","slds-text-align--right",3,"ngModel","maxlength","ngModelOptions","ngModelChange"],["focus",""],[1,"slds-col","slds-size--1-of-2","slds-select_container"],[1,"slds-select",3,"ngModel","ngModelChange"],["value","i"],["label","LBL_MINUTES"],["value","h"],["label","LBL_HOURS"],["value","H"],["label","LBL_WORKINGHOURS"],["value","d"],["label","LBL_DAYS"],["value","D"],["label","LBL_WORKINGDAYS"],["value","w"],["label","LBL_WEEKS"],["value","M"],["label","LBL_MONTHS"],["value","y"],["label","LBL_YEARS"],[3,"fieldname"]],template:function(e,t){1&e&&(c.YNc(0,eu,2,6,"field-generic-display",0),c.YNc(1,tu,23,6,"div",1)),2&e&&(c.Q6J("ngIf",!t.isEditMode()),c.xp6(1),c.Q6J("ngIf",t.isEditable()&&t.isEditMode()))},dependencies:[n.mk,n.O5,o.YN,o.Kr,o.Fj,o.wV,o.EJ,o.JJ,o.nD,o.On,se._,A.D,J.a],encapsulation:2})),fieldTimeDifference})(),iu=(()=>{var e;class fieldIconPopover extends r.O{constructor(e,t,s,n,o,l,a){super(e,t,n,o,l),(0,i.Z)(this,"model",void 0),(0,i.Z)(this,"view",void 0),(0,i.Z)(this,"broadcast",void 0),(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"router",void 0),(0,i.Z)(this,"elementRef",void 0),(0,i.Z)(this,"clickListener",void 0),(0,i.Z)(this,"parentTypeSelectOpen",!1),(0,i.Z)(this,"parentSearchOpen",!1),(0,i.Z)(this,"parentSearchTerm",""),(0,i.Z)(this,"recentItems",[]),this.model=e,this.view=t,this.broadcast=s,this.language=n,this.metadata=o,this.router=l,this.elementRef=a,this.broadcast.message$.subscribe((e=>this.handleMessage(e)))}get parentField(){return this.model.getField("grpaccount_id")}get parentIdField(){return this.fieldconfig.parentIdField?this.fieldconfig.parentIdField:"parent_id"}get memberCount(){return this.model.getField("grp_member_count")}get parentTypes(){let e=["Contacts","Accounts","Leads"];return this.fieldconfig.parenttypes&&(e=this.fieldconfig.parenttypes.replace(/\s/g,"").split(",")),e}handleMessage(e){if(e.messagedata.reference&&"model.save"===e.messagetype)if(this.fieldid===e.messagedata.reference){this.parentSearchTerm="";let t={};t[this.parentIdField]=e.messagedata.data.id,t[this.fieldname]=e.messagedata.data.summary_text,this.model.setFields(t)}}onClick(e){this.elementRef.nativeElement.contains(e.target)||this.closePopups()}closePopups(){this.model.getField(this.parentIdField)&&(this.parentSearchTerm=""),this.parentSearchOpen=!1,this.parentTypeSelectOpen=!1,this.clickListener()}}return e=fieldIconPopover,(0,i.Z)(fieldIconPopover,"ɵfac",(function(t){return new(t||e)(c.Y36(w.o),c.Y36(k.e),c.Y36(W.f),c.Y36(x.d),c.Y36(u.Pu),c.Y36(L.F0),c.Y36(c.SBq))})),(0,i.Z)(fieldIconPopover,"ɵcmp",c.Xpm({type:e,selectors:[["field-icon-popover"]],features:[c.qOj],decls:3,vars:3,consts:[[3,"fielddisplayclass","editable","fieldconfig"],["system-model-popover",""],["size","x-small","icon","info"]],template:function(e,t){1&e&&(c.TgZ(0,"field-generic-display",0)(1,"div",1),c._UZ(2,"system-utility-icon",2),c.qZA()()),2&e&&c.Q6J("fielddisplayclass",t.fielddisplayclass)("editable",!1)("fieldconfig",t.fieldconfig)},dependencies:[M.r,gs.g,A.D],encapsulation:2})),fieldIconPopover})();function nu(e,t){if(1&e&&c._UZ(0,"field-label",3),2&e){const e=c.oxw();c.Q6J("fieldname",e.fieldname)("fieldconfig",e.fieldconfig)}}function ou(e,t){if(1&e&&(c.TgZ(0,"field-generic-display",4),c._uU(1),c.qZA()),2&e){const e=c.oxw();c.Q6J("fielddisplayclass",e.fielddisplayclass)("editable",e.isEditable())("fieldconfig",e.fieldconfig)("fieldid",e.fieldid),c.xp6(1),c.hij(" ",e.getValue(),"\n")}}function lu(e,t){if(1&e&&(c.TgZ(0,"option",13),c._uU(1),c.qZA()),2&e){const e=t.$implicit;c.s9C("value",e.id),c.xp6(1),c.Oqu(e.name)}}function au(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"div",5)(1,"div",6)(2,"div",7)(3,"select",8,9),c.NdJ("ngModelChange",(function(t){c.CHM(e);const s=c.oxw();return c.KtG(s.value=t)})),c._UZ(5,"option",10),c.YNc(6,lu,2,2,"option",11),c.qZA()(),c._UZ(7,"field-messages",12),c.qZA()()}if(2&e){const e=c.oxw();c.xp6(1),c.Q6J("ngClass",e.getFieldClass()),c.xp6(2),c.Q6J("ngModel",e.value),c.xp6(3),c.Q6J("ngForOf",e.stylesheets),c.xp6(1),c.Q6J("fieldname",e.fieldname)}}let du=(()=>{var e;class fieldStylesheetID extends r.O{constructor(e,t,s,n,o){super(e,t,s,n,o),(0,i.Z)(this,"model",void 0),(0,i.Z)(this,"view",void 0),(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"router",void 0),(0,i.Z)(this,"stylesheets",[]),this.model=e,this.view=t,this.language=s,this.metadata=n,this.router=o,this.stylesheets=this.metadata.getHtmlStylesheetNames()}getValue(){if(this.value){let e=this.stylesheets.find((e=>e.id==this.value));if(e)return e.name}return this.value}}return e=fieldStylesheetID,(0,i.Z)(fieldStylesheetID,"ɵfac",(function(t){return new(t||e)(c.Y36(w.o),c.Y36(k.e),c.Y36(x.d),c.Y36(u.Pu),c.Y36(L.F0))})),(0,i.Z)(fieldStylesheetID,"ɵcmp",c.Xpm({type:e,selectors:[["field-stylesheetid"]],features:[c.qOj],decls:3,vars:3,consts:[[3,"fieldname","fieldconfig",4,"ngIf"],[3,"fielddisplayclass","editable","fieldconfig","fieldid",4,"ngIf"],["class","slds-form-element",4,"ngIf"],[3,"fieldname","fieldconfig"],[3,"fielddisplayclass","editable","fieldconfig","fieldid"],[1,"slds-form-element"],[1,"slds-form-element__control",3,"ngClass"],[1,"slds-select_container","slds-m-vertical--xx-small"],[1,"slds-select",3,"ngModel","ngModelChange"],["focus",""],["value",""],[3,"value",4,"ngFor","ngForOf"],[3,"fieldname"],[3,"value"]],template:function(e,t){1&e&&(c.YNc(0,nu,1,2,"field-label",0),c.YNc(1,ou,2,5,"field-generic-display",1),c.YNc(2,au,8,4,"div",2)),2&e&&(c.Q6J("ngIf",t.displayLabel),c.xp6(1),c.Q6J("ngIf",!t.isEditMode()),c.xp6(1),c.Q6J("ngIf",t.isEditMode()))},dependencies:[n.mk,n.sg,n.O5,o.YN,o.Kr,o.EJ,o.JJ,o.On,h.q,A.D,J.a],encapsulation:2})),fieldStylesheetID})();var ru=s(1691);function cu(e,t){if(1&e&&c._UZ(0,"field-label",3),2&e){const e=c.oxw();c.Q6J("fieldname",e.fieldname)("fieldconfig",e.fieldconfig)}}function uu(e,t){if(1&e&&(c.TgZ(0,"field-generic-display",4),c._uU(1),c.qZA()),2&e){const e=c.oxw();c.Q6J("fielddisplayclass",e.fielddisplayclass)("fieldconfig",e.fieldconfig)("editable",e.isEditable()),c.xp6(1),c.hij(" ",e.getUOMLabel(),"\n")}}function hu(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"div",5)(1,"system-select-uom",6),c.NdJ("ngModelChange",(function(t){c.CHM(e);const s=c.oxw();return c.KtG(s.value=t)})),c.qZA(),c._UZ(2,"field-messages",7),c.qZA()}if(2&e){const e=c.oxw();c.Q6J("ngClass",e.getFieldClass()),c.xp6(1),c.Q6J("ngModel",e.value),c.xp6(1),c.Q6J("fieldname",e.fieldname)}}let mu=(()=>{var e;class fieldUnitsOfMeasure extends r.O{constructor(e,t,s,n,o,l){super(e,t,s,n,o),(0,i.Z)(this,"model",void 0),(0,i.Z)(this,"view",void 0),(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"router",void 0),(0,i.Z)(this,"configuration",void 0),(0,i.Z)(this,"uoms",[]),this.model=e,this.view=t,this.language=s,this.metadata=n,this.router=o,this.configuration=l,this.uoms=this.configuration.getData("uomunits")}getUOMLabel(){if(this.value){let e=this.uoms.find((e=>e.id==this.value));if(e)return this.language.getLabel(e.label)}return this.value}}return e=fieldUnitsOfMeasure,(0,i.Z)(fieldUnitsOfMeasure,"ɵfac",(function(t){return new(t||e)(c.Y36(w.o),c.Y36(k.e),c.Y36(x.d),c.Y36(u.Pu),c.Y36(L.F0),c.Y36(ee.C))})),(0,i.Z)(fieldUnitsOfMeasure,"ɵcmp",c.Xpm({type:e,selectors:[["field-units-of-measure"]],features:[c.qOj],decls:3,vars:3,consts:[[3,"fieldname","fieldconfig",4,"ngIf"],[3,"fielddisplayclass","fieldconfig","editable",4,"ngIf"],["class","slds-form-element__control",3,"ngClass",4,"ngIf"],[3,"fieldname","fieldconfig"],[3,"fielddisplayclass","fieldconfig","editable"],[1,"slds-form-element__control",3,"ngClass"],[3,"ngModel","ngModelChange"],[3,"fieldname"]],template:function(e,t){1&e&&(c.YNc(0,cu,1,2,"field-label",0),c.YNc(1,uu,2,4,"field-generic-display",1),c.YNc(2,hu,3,3,"div",2)),2&e&&(c.Q6J("ngIf",t.displayLabel),c.xp6(1),c.Q6J("ngIf",!t.isEditMode()),c.xp6(1),c.Q6J("ngIf",t.isEditable()&&t.isEditMode()))},dependencies:[n.mk,n.O5,o.JJ,o.On,ru.E,h.q,A.D,J.a],encapsulation:2})),fieldUnitsOfMeasure})();function gu(e,t){if(1&e&&c._UZ(0,"field-label",3),2&e){const e=c.oxw();c.Q6J("fieldname",e.fieldname)("fieldconfig",e.fieldconfig)}}function pu(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"field-generic-display",4)(1,"div",5)(2,"div",6),c._UZ(3,"system-display-number",7),c.qZA(),c.TgZ(4,"system-select-uom",8),c.NdJ("ngModelChange",(function(t){c.CHM(e);const s=c.oxw();return c.KtG(s.uomid=t)})),c.qZA()()()}if(2&e){const e=c.oxw();c.Q6J("fielddisplayclass",e.fielddisplayclass)("fieldconfig",e.fieldconfig)("editable",e.isEditable()),c.xp6(3),c.Q6J("number",e.value)("precision",e.precision),c.xp6(1),c.Q6J("disabled",!0)("ngModel",e.uomid)}}function fu(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"div",9)(1,"div",10)(2,"div",11)(3,"system-input-number",12),c.NdJ("ngModelChange",(function(t){c.CHM(e);const s=c.oxw();return c.KtG(s.value=t)})),c.qZA()(),c.TgZ(4,"system-select-uom",13),c.NdJ("ngModelChange",(function(t){c.CHM(e);const s=c.oxw();return c.KtG(s.uomid=t)})),c.qZA()(),c._UZ(5,"field-messages",14),c.qZA()}if(2&e){const e=c.oxw();c.Q6J("ngClass",e.getFieldClass()),c.xp6(3),c.Q6J("ngModel",e.value)("asNumber",!0)("precision",e.precision),c.xp6(1),c.Q6J("ngModel",e.uomid),c.xp6(1),c.Q6J("fieldname",e.fieldname)}}let bu=(()=>{var e;class fieldQuantity extends Ce{constructor(e,t,s,n,o,l,a){super(e,t,s,n,o,l),(0,i.Z)(this,"model",void 0),(0,i.Z)(this,"view",void 0),(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"router",void 0),(0,i.Z)(this,"userpreferences",void 0),(0,i.Z)(this,"configuration",void 0),(0,i.Z)(this,"uoms",[]),this.model=e,this.view=t,this.language=s,this.metadata=n,this.router=o,this.userpreferences=l,this.configuration=a,this.uoms=this.configuration.getData("uomunits")}get uomidfield(){return this.fieldconfig.uomid_field?this.fieldconfig.uomid_field:this.metadata.getModuleFields(this.model.module).uom_id?"uom_id":void 0}get uomid(){return this.model.getField(this.uomidfield)}set uomid(e){this.model.setField(this.uomidfield,e)}get uomLabel(){if(this.value){let e=this.uoms.find((e=>e.id==this.uomid));return e?this.language.getLabel(e.label):this.uomid}return""}}return e=fieldQuantity,(0,i.Z)(fieldQuantity,"ɵfac",(function(t){return new(t||e)(c.Y36(w.o),c.Y36(k.e),c.Y36(x.d),c.Y36(u.Pu),c.Y36(L.F0),c.Y36(Ze.z),c.Y36(ee.C))})),(0,i.Z)(fieldQuantity,"ɵcmp",c.Xpm({type:e,selectors:[["field-quantity"]],features:[c.qOj],decls:3,vars:3,consts:[[3,"fieldname","fieldconfig",4,"ngIf"],[3,"fielddisplayclass","fieldconfig","editable",4,"ngIf"],["class","slds-form-element__control",3,"ngClass",4,"ngIf"],[3,"fieldname","fieldconfig"],[3,"fielddisplayclass","fieldconfig","editable"],[1,"slds-grid","slds-grid_vertical-align-center","slds-text-align_right"],[1,"slds-form-element","slds-size--1-of-2"],[3,"number","precision"],[1,"slds-size--1-of-2","slds-p-left--x-small",3,"disabled","ngModel","ngModelChange"],[1,"slds-form-element__control",3,"ngClass"],[1,"slds-grid","slds-grid--align-spread","slds-grid--vertical-align-center"],[1,"slds-form-element","slds-size--2-of-3"],[3,"ngModel","asNumber","precision","ngModelChange"],[1,"slds-size--1-of-3","slds-p-left--x-small",3,"ngModel","ngModelChange"],[3,"fieldname"]],template:function(e,t){1&e&&(c.YNc(0,gu,1,2,"field-label",0),c.YNc(1,pu,5,7,"field-generic-display",1),c.YNc(2,fu,6,6,"div",2)),2&e&&(c.Q6J("ngIf",t.displayLabel),c.xp6(1),c.Q6J("ngIf",!t.isEditMode()),c.xp6(1),c.Q6J("ngIf",t.isEditable()&&t.isEditMode()))},dependencies:[n.mk,n.O5,o.JJ,o.On,_e.G,ye.i,ru.E,h.q,A.D,J.a],encapsulation:2})),fieldQuantity})();function vu(e,t){if(1&e&&c._UZ(0,"field-label",3),2&e){const e=c.oxw();c.Q6J("fieldname",e.fieldname)("fieldconfig",e.fieldconfig)}}function Zu(e,t){1&e&&(c.TgZ(0,"span"),c._uU(1," • "),c.qZA())}function _u(e,t){if(1&e&&(c.TgZ(0,"span"),c._uU(1),c.YNc(2,Zu,2,0,"span",2),c.qZA()),2&e){const e=t.$implicit,s=t.last;c.xp6(1),c.AsE("",e.name,": ",e.value,""),c.xp6(1),c.Q6J("ngIf",!s)}}function yu(e,t){if(1&e&&(c.TgZ(0,"span"),c.YNc(1,_u,3,3,"span",4),c.qZA()),2&e){const e=c.oxw();c.xp6(1),c.Q6J("ngForOf",e.categories)}}function xu(e,t){1&e&&(c.TgZ(0,"span")(1,"i"),c._UZ(2,"system-label",5),c.qZA()())}let wu=(()=>{var e;class fieldQuestionnaireEvaluation extends r.O{constructor(e,t,s,n,o,l){super(e,t,s,n,o),(0,i.Z)(this,"model",void 0),(0,i.Z)(this,"view",void 0),(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"router",void 0),(0,i.Z)(this,"backend",void 0),(0,i.Z)(this,"categories",[]),(0,i.Z)(this,"isEvaluationAvailable",!1),this.model=e,this.view=t,this.language=s,this.metadata=n,this.router=o,this.backend=l}ngOnInit(){super.ngOnInit();let e=this.model.getRelatedRecords("questionnaireevaluation");if(e&&e[0]&&e[0].questionnaireevaluationitems&&e[0].questionnaireevaluationitems.beans){e[0].questionnaireevaluationitems.beans;for(let t in e[0].questionnaireevaluationitems.beans)this.categories.push(e[0].questionnaireevaluationitems.beans[t]);this.isEvaluationAvailable=!0}}}return e=fieldQuestionnaireEvaluation,(0,i.Z)(fieldQuestionnaireEvaluation,"ɵfac",(function(t){return new(t||e)(c.Y36(w.o),c.Y36(k.e),c.Y36(x.d),c.Y36(u.Pu),c.Y36(L.F0),c.Y36($.y))})),(0,i.Z)(fieldQuestionnaireEvaluation,"ɵcmp",c.Xpm({type:e,selectors:[["field-questionnaire-evaluation"]],features:[c.qOj],decls:4,vars:7,consts:[[3,"fieldname","fieldconfig",4,"ngIf"],[3,"fielddisplayclass","editable","fieldconfig","fieldid"],[4,"ngIf"],[3,"fieldname","fieldconfig"],[4,"ngFor","ngForOf"],["label","LBL_NO_EVALUATION_AVAILABLE"]],template:function(e,t){1&e&&(c.YNc(0,vu,1,2,"field-label",0),c.TgZ(1,"field-generic-display",1),c.YNc(2,yu,2,1,"span",2),c.YNc(3,xu,3,0,"span",2),c.qZA()),2&e&&(c.Q6J("ngIf",t.displayLabel),c.xp6(1),c.Q6J("fielddisplayclass",t.fielddisplayclass)("editable",!1)("fieldconfig",t.fieldconfig)("fieldid",t.fieldid),c.xp6(1),c.Q6J("ngIf",t.isEvaluationAvailable),c.xp6(1),c.Q6J("ngIf",!t.isEvaluationAvailable))},dependencies:[n.sg,n.O5,se._,h.q,A.D],encapsulation:2})),fieldQuestionnaireEvaluation})();var Tu=s(1078);function Cu(e,t){if(1&e&&c._UZ(0,"field-label",3),2&e){const e=c.oxw();c.Q6J("fieldname",e.fieldname)("fieldconfig",e.fieldconfig)}}function Au(e,t){if(1&e&&(c.TgZ(0,"field-generic-display",4),c._uU(1),c.qZA()),2&e){const e=c.oxw();c.Q6J("fielddisplayclass",e.fielddisplayclass)("editable",e.isEditable())("fieldconfig",e.fieldconfig),c.xp6(1),c.hij(" ",e.displayTags,"\n")}}function ku(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"li")(1,"span",15),c._uU(2),c.TgZ(3,"span",16),c.NdJ("click",(function(){const t=c.CHM(e).index,s=c.oxw(3);return c.KtG(s.removeByIndex(t))})),c._UZ(4,"system-utility-icon",17),c.qZA()()()}if(2&e){const e=t.$implicit;c.xp6(2),c.hij(" ",e," ")}}function Lu(e,t){if(1&e&&(c.TgZ(0,"ul",13),c.YNc(1,ku,5,1,"li",14),c.qZA()),2&e){const e=c.oxw(2);c.xp6(1),c.Q6J("ngForOf",e.objecttags)}}function Iu(e,t){1&e&&(c.TgZ(0,"div",18),c._UZ(1,"system-label",19),c.qZA())}function Mu(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"div",5)(1,"div",6)(2,"div",7),c.YNc(3,Lu,2,1,"ul",8),c.YNc(4,Iu,2,0,"div",9),c.qZA(),c.TgZ(5,"div",10)(6,"system-input-tags",11),c.NdJ("tagemitter",(function(t){c.CHM(e);const s=c.oxw();return c.KtG(s.addTag(t))})),c.qZA()()(),c._UZ(7,"field-messages",12),c.qZA()}if(2&e){const e=c.oxw();c.Q6J("ngClass",e.css_classes),c.xp6(3),c.Q6J("ngIf",e.objecttags.length),c.xp6(1),c.Q6J("ngIf",!e.objecttags.length),c.xp6(3),c.Q6J("fieldname",e.fieldname)}}let Su=(()=>{var e;class fieldTags extends r.O{constructor(e,t,s,n,o){super(e,t,s,n,o),(0,i.Z)(this,"model",void 0),(0,i.Z)(this,"view",void 0),(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"router",void 0),this.model=e,this.view=t,this.language=s,this.metadata=n,this.router=o}get displayTags(){let e,t=this.model.getField(this.fieldname);if(!t)return"";try{e=JSON.parse(t)}catch(e){return""}return e.join(", ")}get objecttags(){let e=this.model.getField("tags");if(!e||""===e)return[];try{return JSON.parse(e)}catch(e){return[]}}removeByIndex(e){let t=this.objecttags;t.splice(e,1),this.model.setField("tags",JSON.stringify(t))}addTag(e){if(""!==e){let t=this.objecttags;t.push(e),this.model.setField("tags",JSON.stringify(t))}}}return e=fieldTags,(0,i.Z)(fieldTags,"ɵfac",(function(t){return new(t||e)(c.Y36(w.o),c.Y36(k.e),c.Y36(x.d),c.Y36(u.Pu),c.Y36(L.F0))})),(0,i.Z)(fieldTags,"ɵcmp",c.Xpm({type:e,selectors:[["field-tags"]],features:[c.qOj],decls:3,vars:3,consts:[[3,"fieldname","fieldconfig",4,"ngIf"],[3,"fielddisplayclass","editable","fieldconfig",4,"ngIf"],["class","slds-form-element__control slds-p-around--xx-small",3,"ngClass",4,"ngIf"],[3,"fieldname","fieldconfig"],[3,"fielddisplayclass","editable","fieldconfig"],[1,"slds-form-element__control","slds-p-around--xx-small",3,"ngClass"],[1,"slds-grid","slds-grid--vertical-align-end"],[1,"slds-size--2-of-3"],["class","spice-taglist",4,"ngIf"],["style","font-style:italic",4,"ngIf"],[1,"slds-size--1-of-3","slds-p-left--x-small"],[3,"tagemitter"],[3,"fieldname"],[1,"spice-taglist"],[4,"ngFor","ngForOf"],[1,"slds-badge"],[1,"slds-badge__icon","slds-badge__icon_right",3,"click"],["icon","close","size","xx-small"],[2,"font-style","italic"],["label","LBL_NO_TAGS_ASSIGNED"]],template:function(e,t){1&e&&(c.YNc(0,Cu,1,2,"field-label",0),c.YNc(1,Au,2,4,"field-generic-display",1),c.YNc(2,Mu,8,4,"div",2)),2&e&&(c.Q6J("ngIf",t.displayLabel),c.xp6(1),c.Q6J("ngIf",!t.isEditMode()),c.xp6(1),c.Q6J("ngIf",t.isEditable()&&t.isEditMode()))},dependencies:[n.mk,n.sg,n.O5,Tu.C,se._,M.r,h.q,A.D,J.a],encapsulation:2})),fieldTags})();var Ju=s(6951);let Ou=(()=>{var e;class fieldRelatedDetailsContainer{constructor(e,t){(0,i.Z)(this,"model",void 0),(0,i.Z)(this,"view",void 0),(0,i.Z)(this,"module",void 0),(0,i.Z)(this,"id",void 0),(0,i.Z)(this,"componentset",void 0),this.model=e,this.view=t}ngOnChanges(e){this.module==this.model.module&&this.id==this.model.id||(this.model.module=this.module,this.model.id=this.id,this.model.getData(!0))}}return e=fieldRelatedDetailsContainer,(0,i.Z)(fieldRelatedDetailsContainer,"ɵfac",(function(t){return new(t||e)(c.Y36(w.o),c.Y36(k.e))})),(0,i.Z)(fieldRelatedDetailsContainer,"ɵcmp",c.Xpm({type:e,selectors:[["field-related-details-container"]],inputs:{module:"module",id:"id",componentset:"componentset"},features:[c._Bn([w.o,k.e]),c.TTD],decls:1,vars:1,consts:[[3,"componentset"]],template:function(e,t){1&e&&c._UZ(0,"system-componentset",0),2&e&&c.Q6J("componentset",t.componentset)},dependencies:[Ju.E],encapsulation:2})),fieldRelatedDetailsContainer})();function Nu(e,t){if(1&e&&c._UZ(0,"field-label",5),2&e){const e=c.oxw(2);c.Q6J("fieldname",e.fieldname)("fieldconfig",e.fieldconfig)}}function Fu(e,t){if(1&e&&c._UZ(0,"field-related-details-container",6),2&e){const e=c.oxw(2);c.Q6J("module",e.module)("componentset",e.componentset)("id",e.parentId)}}function qu(e,t){if(1&e&&(c.TgZ(0,"div",1)(1,"div",2),c.YNc(2,Nu,1,2,"field-label",3),c.qZA(),c.YNc(3,Fu,1,3,"field-related-details-container",4),c.qZA()),2&e){const e=c.oxw();c.Q6J("ngClass",e.getClass()),c.xp6(2),c.Q6J("ngIf",e.displayLabel),c.xp6(1),c.Q6J("ngIf",e.parentId)}}let Eu=(()=>{var e;class fieldParentDetails extends r.O{constructor(e,t,s,n,o){super(e,t,s,n,o),(0,i.Z)(this,"model",void 0),(0,i.Z)(this,"view",void 0),(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"router",void 0),(0,i.Z)(this,"parentDefs",{}),this.model=e,this.view=t,this.language=s,this.metadata=n,this.router=o}ngOnInit(){super.ngOnInit(),this.getParentDefinition()}get module(){return this.fieldconfig.module}get componentset(){return this.fieldconfig.componentset}get display(){return this.parentId&&this.module==this.parentModule}get parentModule(){return this.parentDefs?.type_name?this.model.getField(this.parentDefs.type_name):void 0}get parentId(){return this.parentDefs?.id_name?this.model.getField(this.parentDefs.id_name):void 0}getParentDefinition(){this.parentDefs=this.metadata.getFieldDefs(this.model.module,this.fieldname)}getClass(){let e=[];return this.fieldconfig.cssclass?e.push(this.fieldconfig.cssclass):e.push("slds-box--border"),e}}return e=fieldParentDetails,(0,i.Z)(fieldParentDetails,"ɵfac",(function(t){return new(t||e)(c.Y36(w.o),c.Y36(k.e),c.Y36(x.d),c.Y36(u.Pu),c.Y36(L.F0))})),(0,i.Z)(fieldParentDetails,"ɵcmp",c.Xpm({type:e,selectors:[["ng-component"]],features:[c.qOj],decls:1,vars:1,consts:[[3,"ngClass",4,"ngIf"],[3,"ngClass"],[1,"slds-p-around--xx-small","slds-text-heading--label"],[3,"fieldname","fieldconfig",4,"ngIf"],[3,"module","componentset","id",4,"ngIf"],[3,"fieldname","fieldconfig"],[3,"module","componentset","id"]],template:function(e,t){1&e&&c.YNc(0,qu,4,3,"div",0),2&e&&c.Q6J("ngIf",t.display)},dependencies:[n.mk,n.O5,h.q,Ou],encapsulation:2})),fieldParentDetails})();function Yu(e,t){if(1&e&&c._UZ(0,"field-label",3),2&e){const e=c.oxw();c.Q6J("fieldname",e.fieldname)("fieldconfig",e.fieldconfig)}}function Du(e,t){if(1&e&&c._UZ(0,"field-related-details-container",4),2&e){const e=c.oxw();c.Q6J("module",e.module)("componentset",e.componentset)("id",e.value)}}let Qu=(()=>{var e;class fieldRelatedDetails extends r.O{constructor(e,t,s,n,o){super(e,t,s,n,o),(0,i.Z)(this,"model",void 0),(0,i.Z)(this,"view",void 0),(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"router",void 0),this.model=e,this.view=t,this.language=s,this.metadata=n,this.router=o}get module(){return this.fieldconfig.module}get componentset(){return this.fieldconfig.componentset}}return e=fieldRelatedDetails,(0,i.Z)(fieldRelatedDetails,"ɵfac",(function(t){return new(t||e)(c.Y36(w.o),c.Y36(k.e),c.Y36(x.d),c.Y36(u.Pu),c.Y36(L.F0))})),(0,i.Z)(fieldRelatedDetails,"ɵcmp",c.Xpm({type:e,selectors:[["ng-component"]],features:[c.qOj],decls:3,vars:2,consts:[[1,"slds-box--border"],[3,"fieldname","fieldconfig",4,"ngIf"],[3,"module","componentset","id",4,"ngIf"],[3,"fieldname","fieldconfig"],[3,"module","componentset","id"]],template:function(e,t){1&e&&(c.TgZ(0,"div",0),c.YNc(1,Yu,1,2,"field-label",1),c.YNc(2,Du,1,3,"field-related-details-container",2),c.qZA()),2&e&&(c.xp6(1),c.Q6J("ngIf",t.displayLabel),c.xp6(1),c.Q6J("ngIf",t.value))},dependencies:[n.O5,h.q,Ou],encapsulation:2})),fieldRelatedDetails})();var Uu=s(2251);function Ru(e,t){if(1&e&&c._UZ(0,"field-label",3),2&e){const e=c.oxw();c.Q6J("fieldname",e.fieldname)("fieldconfig",e.fieldconfig)}}function ju(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"div",10),c.NdJ("click",(function(t){c.CHM(e);const s=c.oxw(2);return c.KtG(s.initiateCall(t))})),c._UZ(1,"system-utility-icon",11),c.qZA()}}function Bu(e,t){if(1&e&&(c.TgZ(0,"a",12),c._uU(1),c.qZA()),2&e){const e=c.oxw(2);c.Q6J("href","tel:"+e.value,c.LSH),c.xp6(1),c.Oqu(e.value)}}function Gu(e,t){if(1&e&&(c.TgZ(0,"span"),c._uU(1),c.qZA()),2&e){const e=c.oxw(2);c.xp6(1),c.Oqu(e.value)}}function Pu(e,t){if(1&e&&(c.TgZ(0,"field-generic-display",4)(1,"div",5),c.YNc(2,ju,2,0,"div",6),c.TgZ(3,"div",7),c.YNc(4,Bu,2,2,"a",8),c.YNc(5,Gu,2,1,"span",9),c.qZA()()()),2&e){const e=c.oxw();c.Q6J("fielddisplayclass",e.fielddisplayclass)("editable",e.isEditable())("fieldconfig",e.fieldconfig)("title",e.value)("fieldid",e.fieldid),c.xp6(2),c.Q6J("ngIf",e.telehonyActive&&e.value),c.xp6(2),c.Q6J("ngIf",e.value&&!e.telehonyActive),c.xp6(1),c.Q6J("ngIf",e.value&&e.telehonyActive)}}function Hu(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"div",13)(1,"input",14,15),c.NdJ("ngModelChange",(function(t){c.CHM(e);const s=c.oxw();return c.KtG(s.value=t)})),c.qZA(),c._UZ(3,"field-messages",16),c.qZA()}if(2&e){const e=c.oxw();c.Q6J("ngClass",e.css_classes),c.xp6(1),c.Q6J("ngModel",e.value)("maxlength",e.fieldlength)("autocomplete",e.fieldid)("ngModelOptions",e.modelOptions),c.xp6(2),c.Q6J("fieldname",e.fieldname)}}let zu=(()=>{var e;class fieldPhone extends r.O{constructor(e,t,s,n,o,l,a){super(e,t,s,n,o),(0,i.Z)(this,"model",void 0),(0,i.Z)(this,"view",void 0),(0,i.Z)(this,"l",void 0),(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"router",void 0),(0,i.Z)(this,"backend",void 0),(0,i.Z)(this,"telephony",void 0),this.model=e,this.view=t,this.l=s,this.metadata=n,this.router=o,this.backend=l,this.telephony=a}get telehonyActive(){return this.telephony.isActive}initiateCall(e){e.stopPropagation(),this.telephony.initiateCall(this.value,{relatedid:this.model.id,relatedmodule:this.model.module,relateddata:this.model.data})}}return e=fieldPhone,(0,i.Z)(fieldPhone,"ɵfac",(function(t){return new(t||e)(c.Y36(w.o),c.Y36(k.e),c.Y36(x.d),c.Y36(u.Pu),c.Y36(L.F0),c.Y36($.y),c.Y36(Uu.n))})),(0,i.Z)(fieldPhone,"ɵcmp",c.Xpm({type:e,selectors:[["field-phone"]],features:[c.qOj],decls:3,vars:3,consts:[[3,"fieldname","fieldconfig",4,"ngIf"],[3,"fielddisplayclass","editable","fieldconfig","title","fieldid",4,"ngIf"],["class","slds-form-element__control slds-p-around--xx-small",3,"ngClass",4,"ngIf"],[3,"fieldname","fieldconfig"],[3,"fielddisplayclass","editable","fieldconfig","title","fieldid"],[1,"slds-grid","slds-grid--vertical-align-center"],["class","slds-p-right--x-small slds-text-link--reset",3,"click",4,"ngIf"],[1,"slds-truncate"],[3,"href",4,"ngIf"],[4,"ngIf"],[1,"slds-p-right--x-small","slds-text-link--reset",3,"click"],["icon","outbound_call","size","xx-small"],[3,"href"],[1,"slds-form-element__control","slds-p-around--xx-small",3,"ngClass"],["type","text",1,"slds-input",3,"ngModel","maxlength","autocomplete","ngModelOptions","ngModelChange"],["focus",""],[3,"fieldname"]],template:function(e,t){1&e&&(c.YNc(0,Ru,1,2,"field-label",0),c.YNc(1,Pu,6,8,"field-generic-display",1),c.YNc(2,Hu,4,6,"div",2)),2&e&&(c.Q6J("ngIf",t.displayLabel),c.xp6(1),c.Q6J("ngIf",!t.isEditMode()),c.xp6(1),c.Q6J("ngIf",t.isEditable()&&t.isEditMode()))},dependencies:[n.mk,n.O5,o.Fj,o.JJ,o.nD,o.On,M.r,h.q,A.D,J.a],encapsulation:2})),fieldPhone})();var Vu=s(4728);function Ku(e,t){if(1&e&&c._UZ(0,"field-label",3),2&e){const e=c.oxw();c.Q6J("fieldname",e.fieldname)("fieldconfig",e.fieldconfig)}}function $u(e,t){if(1&e&&(c.TgZ(0,"field-generic-display",4),c._uU(1),c.qZA()),2&e){const e=c.oxw();c.Q6J("fielddisplayclass",e.fielddisplayclass)("editable",e.isEditable())("fieldconfig",e.fieldconfig)("fieldid",e.fieldid),c.xp6(1),c.hij(" ",e.displayValue,"\n")}}function Xu(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"div",5)(1,"div",6)(2,"system-input-actionset",7),c.NdJ("ngModelChange",(function(t){c.CHM(e);const s=c.oxw();return c.KtG(s.value=t)})),c.qZA(),c._UZ(3,"field-messages",8),c.qZA()()}if(2&e){const e=c.oxw();c.xp6(1),c.Q6J("ngClass",e.getFieldClass()),c.xp6(1),c.Q6J("ngModel",e.value),c.xp6(1),c.Q6J("fieldname",e.fieldname)}}let Wu=(()=>{var e;class fieldActionset extends r.O{constructor(e,t,s,n,o){super(e,t,s,n,o),(0,i.Z)(this,"model",void 0),(0,i.Z)(this,"view",void 0),(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"router",void 0),this.model=e,this.view=t,this.language=s,this.metadata=n,this.router=o}get displayValue(){if(!this.value)return"";let e=this.metadata.getActionSet(this.value);return e?e.name:""}}return e=fieldActionset,(0,i.Z)(fieldActionset,"ɵfac",(function(t){return new(t||e)(c.Y36(w.o),c.Y36(k.e),c.Y36(x.d),c.Y36(u.Pu),c.Y36(L.F0))})),(0,i.Z)(fieldActionset,"ɵcmp",c.Xpm({type:e,selectors:[["ng-component"]],features:[c.qOj],decls:3,vars:3,consts:[[3,"fieldname","fieldconfig",4,"ngIf"],[3,"fielddisplayclass","editable","fieldconfig","fieldid",4,"ngIf"],["class","slds-form-element",4,"ngIf"],[3,"fieldname","fieldconfig"],[3,"fielddisplayclass","editable","fieldconfig","fieldid"],[1,"slds-form-element"],[1,"slds-form-element__control","slds-m-vertical--xx-small",3,"ngClass"],[3,"ngModel","ngModelChange"],[3,"fieldname"]],template:function(e,t){1&e&&(c.YNc(0,Ku,1,2,"field-label",0),c.YNc(1,$u,2,5,"field-generic-display",1),c.YNc(2,Xu,4,3,"div",2)),2&e&&(c.Q6J("ngIf",t.displayLabel),c.xp6(1),c.Q6J("ngIf",!t.isEditMode()),c.xp6(1),c.Q6J("ngIf",t.isEditMode()))},dependencies:[n.mk,n.O5,o.JJ,o.On,Vu.Q,h.q,A.D,J.a],encapsulation:2})),fieldActionset})();var eh=s(8026),th=s(6274);function sh(e,t){if(1&e&&c._UZ(0,"field-label",3),2&e){const e=c.oxw();c.Q6J("fieldname",e.fieldname)("fieldconfig",e.fieldconfig)}}function ih(e,t){if(1&e&&(c.TgZ(0,"field-generic-display",4)(1,"div",5),c._UZ(2,"system-progress-bar",6),c.TgZ(3,"div",7),c._uU(4),c.qZA()()()),2&e){const e=c.oxw();c.Q6J("fielddisplayclass",e.fielddisplayclass)("editable",e.isEditable())("fieldconfig",e.fieldconfig),c.xp6(2),c.Q6J("progress",e.completion)("hideText",!0),c.xp6(2),c.Oqu(e.value)}}function nh(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"div",8)(1,"system-slider",9),c.NdJ("ngModelChange",(function(t){c.CHM(e);const s=c.oxw();return c.KtG(s.value=t)})),c.qZA(),c._UZ(2,"field-messages",10),c.qZA()}if(2&e){const e=c.oxw();c.Q6J("ngClass",e.getFieldClass()),c.xp6(1),c.Q6J("min",e.min)("max",e.max)("step",e.step)("ngModel",e.value),c.xp6(1),c.Q6J("fieldname",e.fieldname)}}let oh=(()=>{var e;class fieldSlider extends r.O{constructor(e,t,s,n,o){super(e,t,s,n,o),(0,i.Z)(this,"model",void 0),(0,i.Z)(this,"view",void 0),(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"router",void 0),this.model=e,this.view=t,this.language=s,this.metadata=n,this.router=o}get min(){return this.fieldconfig.min?parseInt(this.fieldconfig.min,10):0}get max(){return this.fieldconfig.max?parseInt(this.fieldconfig.max,10):100}get step(){return this.fieldconfig.step?parseInt(this.fieldconfig.step,10):10}get value(){let e=this.model.getField(this.fieldname);return e?"number"==typeof e?e:parseInt(e,10):0}set value(e){this.model.setField(this.fieldname,e)}get completion(){return(this.value-this.min)/(this.max-this.min)*100}}return e=fieldSlider,(0,i.Z)(fieldSlider,"ɵfac",(function(t){return new(t||e)(c.Y36(w.o),c.Y36(k.e),c.Y36(x.d),c.Y36(u.Pu),c.Y36(L.F0))})),(0,i.Z)(fieldSlider,"ɵcmp",c.Xpm({type:e,selectors:[["field-slider"]],features:[c.qOj],decls:3,vars:3,consts:[[3,"fieldname","fieldconfig",4,"ngIf"],[3,"fielddisplayclass","editable","fieldconfig",4,"ngIf"],["class","slds-form-element__control slds-p-top--small",3,"ngClass",4,"ngIf"],[3,"fieldname","fieldconfig"],[3,"fielddisplayclass","editable","fieldconfig"],[1,"slds-grid","slds-grid_vertical-align-center"],[1,"slds-grow",3,"progress","hideText"],[1,"slds-p-left--x-small"],[1,"slds-form-element__control","slds-p-top--small",3,"ngClass"],[3,"min","max","step","ngModel","ngModelChange"],[3,"fieldname"]],template:function(e,t){1&e&&(c.YNc(0,sh,1,2,"field-label",0),c.YNc(1,ih,5,6,"field-generic-display",1),c.YNc(2,nh,3,6,"div",2)),2&e&&(c.Q6J("ngIf",t.displayLabel),c.xp6(1),c.Q6J("ngIf",!t.isEditMode()),c.xp6(1),c.Q6J("ngIf",t.isEditable()&&t.isEditMode()))},dependencies:[n.mk,n.O5,o.JJ,o.On,eh.J,th.f,h.q,A.D,J.a],encapsulation:2})),fieldSlider})();function lh(e,t){if(1&e&&c._UZ(0,"field-label",4),2&e){const e=c.oxw();c.Q6J("fieldname",e.fieldname)("fieldconfig",e.fieldconfig)}}function ah(e,t){if(1&e&&c._UZ(0,"img",5),2&e){const e=c.oxw();c.Q6J("src",e.imageUrl,c.LSH)}}function dh(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"button",8),c.NdJ("click",(function(){c.CHM(e);const t=c.oxw(3);return c.KtG(t.editImage())})),c._UZ(1,"system-button-icon",9),c.qZA()}if(2&e){const e=c.oxw(3);c.Q6J("disabled",!e.isEditMode()),c.xp6(1),c.Q6J("icon","image")}}function rh(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"div",10)(1,"button",11),c.NdJ("click",(function(){c.CHM(e);const t=c.oxw(3);return c.KtG(t.editImage())})),c._UZ(2,"system-button-icon",9),c.qZA(),c.TgZ(3,"button",12),c.NdJ("click",(function(){c.CHM(e);const t=c.oxw(3);return c.KtG(t.deleteImage())})),c._UZ(4,"system-button-icon",9),c.qZA()()}2&e&&(c.xp6(2),c.Q6J("icon","edit"),c.xp6(2),c.Q6J("icon","delete"))}function ch(e,t){if(1&e&&(c.ynx(0),c.YNc(1,dh,2,2,"button",6),c.YNc(2,rh,5,2,"div",7),c.BQk()),2&e){const e=c.oxw(2);c.xp6(1),c.Q6J("ngIf",e.fieldIsEmpty),c.xp6(1),c.Q6J("ngIf",!e.fieldIsEmpty)}}function uh(e,t){if(1&e){const e=c.EpF();c.ynx(0),c.TgZ(1,"button",13),c.NdJ("click",(function(){c.CHM(e);const t=c.oxw(2);return c.KtG(t.setEditMode())})),c._UZ(2,"system-button-icon",9),c.qZA(),c.BQk()}2&e&&(c.xp6(2),c.Q6J("icon","edit"))}function hh(e,t){if(1&e&&(c.ynx(0),c.YNc(1,ch,3,2,"ng-container",3),c.YNc(2,uh,3,1,"ng-container",3),c.BQk()),2&e){const e=c.oxw();c.xp6(1),c.Q6J("ngIf",e.isEditMode()),c.xp6(1),c.Q6J("ngIf",!e.isEditMode())}}let mh=(()=>{var e;class fieldImage extends r.O{get fieldIsEmpty(){return!this.value}constructor(e,t,s,n,o,l,a,d,r,c,u,h){super(e,t,s,n,o),(0,i.Z)(this,"model",void 0),(0,i.Z)(this,"view",void 0),(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"router",void 0),(0,i.Z)(this,"elementRef",void 0),(0,i.Z)(this,"renderer",void 0),(0,i.Z)(this,"backend",void 0),(0,i.Z)(this,"elRef",void 0),(0,i.Z)(this,"changeDetRef",void 0),(0,i.Z)(this,"modalservice",void 0),(0,i.Z)(this,"sanitizer",void 0),(0,i.Z)(this,"labelComponent",void 0),(0,i.Z)(this,"height",""),this.model=e,this.view=t,this.language=s,this.metadata=n,this.router=o,this.elementRef=l,this.renderer=a,this.backend=d,this.elRef=r,this.changeDetRef=c,this.modalservice=u,this.sanitizer=h}ngAfterViewInit(){this.fieldconfig.height&&(this.height="calc("+this.fieldconfig.height+" - 2px - 0.5rem )")}get imageUrl(){return this.sanitizer.bypassSecurityTrustResourceUrl("data:"+this.value)}get style(){return{height:this.height}}deleteImage(){this.value=""}editImage(e=null){this.modalservice.openModal("SystemImageModal").subscribe((t=>{this.field_defs.maxWidth&&(t.instance.maxWidth=this.field_defs.maxWidth),this.field_defs.maxHeight&&(t.instance.maxHeight=this.field_defs.maxHeight);let s=this.labelComponent.label;s||(s=this.language.getLabel("LBL_IMAGE")),t.instance.title=s,this.value&&(t.instance.imageData=this.value),t.instance.answer.subscribe((e=>{!1!==e&&(this.value=e)})),e&&(t.instance.droppedFiles=e)}))}onDrop(e){this.view.setEditMode(),this.editImage(e)}}return e=fieldImage,(0,i.Z)(fieldImage,"ɵfac",(function(t){return new(t||e)(c.Y36(w.o),c.Y36(k.e),c.Y36(x.d),c.Y36(u.Pu),c.Y36(L.F0),c.Y36(c.SBq),c.Y36(c.Qsj),c.Y36($.y),c.Y36(c.SBq),c.Y36(c.sBO),c.Y36(I.o),c.Y36(te.H7))})),(0,i.Z)(fieldImage,"ɵcmp",c.Xpm({type:e,selectors:[["field-image"]],viewQuery:function(e,t){if(1&e&&c.Gf(h.q,5),2&e){let e;c.iGM(e=c.CRH())&&(t.labelComponent=e.first)}},features:[c.qOj],decls:4,vars:5,consts:[[3,"fieldname","fieldconfig",4,"ngIf"],[1,"slds-is-relative","slds-box--border","slds-align_absolute-center",3,"ngClass","ngStyle","system-drop-file"],["style","max-height:100%;padding:0.25rem",3,"src",4,"ngIf"],[4,"ngIf"],[3,"fieldname","fieldconfig"],[2,"max-height","100%","padding","0.25rem",3,"src"],["class","slds-button slds-button_icon slds-button_icon-container slds-button_icon-border-filled slds-align--absolute-center slds-m-around--medium",3,"disabled","click",4,"ngIf"],["class","slds-is-absolute spice-button-group-vertical slds-is-absolute","style","bottom:0.5rem;right:0.5rem;",4,"ngIf"],[1,"slds-button","slds-button_icon","slds-button_icon-container","slds-button_icon-border-filled","slds-align--absolute-center","slds-m-around--medium",3,"disabled","click"],[3,"icon"],[1,"slds-is-absolute","spice-button-group-vertical","slds-is-absolute",2,"bottom","0.5rem","right","0.5rem"],[1,"slds-button","slds-button_icon-container","slds-button_icon-border-filled","slds-button--icon-small",3,"click"],["title","Delete",1,"slds-button","slds-button_icon-container","slds-button_icon-border-filled","slds-button--icon-small",3,"click"],[1,"slds-button","slds-button_icon","slds-is-absolute",2,"bottom","0.75rem","right","0.75rem","background-color","#fff","box-shadow","0px 0px 2px 3px rgba(255,255,255,1)",3,"click"]],template:function(e,t){1&e&&(c.YNc(0,lh,1,2,"field-label",0),c.TgZ(1,"div",1),c.NdJ("system-drop-file",(function(e){return t.onDrop(e)})),c.YNc(2,ah,1,1,"img",2),c.YNc(3,hh,3,2,"ng-container",3),c.qZA()),2&e&&(c.Q6J("ngIf",t.displayLabel),c.xp6(1),c.Q6J("ngClass",t.fielddisplayclass)("ngStyle",t.style),c.xp6(1),c.Q6J("ngIf",!t.fieldIsEmpty),c.xp6(1),c.Q6J("ngIf",!t.model.isLoading))},dependencies:[n.mk,n.O5,n.PC,T.J,To.M,h.q],encapsulation:2})),fieldImage})();const gh=["compound"];function ph(e,t){if(1&e&&(c.TgZ(0,"legend",4),c._uU(1),c.qZA()),2&e){const e=c.oxw();c.xp6(1),c.Oqu(e.label)}}let fh=(()=>{var e;class fieldCompound extends r.O{constructor(...e){super(...e),(0,i.Z)(this,"compound",void 0)}ngOnInit(){super.ngOnInit(),this.metadata.addComponent("ObjectRecordFieldset",this.compound).subscribe((e=>{e.instance.fieldset=this.fieldconfig.fieldset,e.instance.direction="horizontal",e.instance.fieldpadding="xxx-small"}))}get label(){if(this.fieldconfig.label){if(this.fieldconfig.label.indexOf(":")>0){let e=this.fieldconfig.label.split(":");return this.language.getLabel(e[1],e[0],this.view.labels)}return this.language.getLabel(this.fieldconfig.label,this.model.module,this.view.labels)}return this.language.getFieldDisplayName(this.model.module,this.fieldname,this.fieldconfig,this.view.labels)}}return e=fieldCompound,(0,i.Z)(fieldCompound,"ɵfac",function(){let t;return function(s){return(t||(t=c.n5z(e)))(s||e)}}()),(0,i.Z)(fieldCompound,"ɵcmp",c.Xpm({type:e,selectors:[["field-compound"]],viewQuery:function(e,t){if(1&e&&c.Gf(gh,7,c.s_b),2&e){let e;c.iGM(e=c.CRH())&&(t.compound=e.first)}},features:[c.qOj],decls:5,vars:1,consts:[[1,"slds-form-element","slds-form-element_compound","slds-box","slds-box_x-small","slds-p-top_none"],["class","slds-form-element__legend slds-form-element__label slds-p-left_xx-small","style","float:none",4,"ngIf"],[1,"slds-form-element__control"],["compound",""],[1,"slds-form-element__legend","slds-form-element__label","slds-p-left_xx-small",2,"float","none"]],template:function(e,t){1&e&&(c.TgZ(0,"fieldset",0),c.YNc(1,ph,2,1,"legend",1),c.TgZ(2,"div",2),c._UZ(3,"div",null,3),c.qZA()()),2&e&&(c.xp6(1),c.Q6J("ngIf",t.displayLabel))},dependencies:[n.O5],encapsulation:2})),fieldCompound})();function bh(e,t){if(1&e&&c._UZ(0,"field-label",3),2&e){const e=c.oxw();c.Q6J("fieldname",e.fieldname)("fieldconfig",e.fieldconfig)}}function vh(e,t){if(1&e&&c._UZ(0,"system-utility-icon",4),2&e){const e=c.oxw();c.Q6J("size",e.fieldconfig.size)("icon",e.icon)("title",e.label)("colorclass",e.colorClass)}}let Zh=(()=>{var e;class fieldIconCondition extends r.O{constructor(e,t,s,n,o,l,a){super(e,t,s,n,l),(0,i.Z)(this,"model",void 0),(0,i.Z)(this,"view",void 0),(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"backend",void 0),(0,i.Z)(this,"router",void 0),(0,i.Z)(this,"cdRef",void 0),(0,i.Z)(this,"setterTimeout",void 0),(0,i.Z)(this,"icon",void 0),(0,i.Z)(this,"label",void 0),(0,i.Z)(this,"colorClass","slds-icon-text-default"),(0,i.Z)(this,"fieldconfig",{}),this.model=e,this.view=t,this.language=s,this.metadata=n,this.backend=o,this.router=l,this.cdRef=a,this.subscriptions.add(this.subscribeToModelChanges())}ngOnInit(){super.ngOnInit(),this.setValues()}subscribeToModelChanges(){return this.model.data$.subscribe((()=>{this.setValues()}))}setValues(){window.clearTimeout(this.setterTimeout),this.setterTimeout=window.setTimeout((()=>{this.fieldconfig.modulefilter?this.model.checkModuleFilterMatch(this.fieldconfig.modulefilter)?(this.icon=this.fieldconfig.matchIcon,this.label=this.fieldconfig.matchLabel,this.fieldconfig.matchColorTheme&&(this.colorClass="slds-icon-text-"+this.fieldconfig.matchColorTheme)):(this.icon=this.fieldconfig.mismatchIcon,this.label=this.fieldconfig.mismatchLabel,this.fieldconfig.mismatchColorTheme&&(this.colorClass="slds-icon-text-"+this.fieldconfig.mismatchColorTheme)):(this.icon=this.fieldconfig.icon,this.label=this.fieldconfig.label,this.fieldconfig.colorTheme&&(this.colorClass="slds-icon-text-"+this.fieldconfig.colorTheme)),this.cdRef.detectChanges()}),1e3)}}return e=fieldIconCondition,(0,i.Z)(fieldIconCondition,"ɵfac",(function(t){return new(t||e)(c.Y36(w.o),c.Y36(k.e),c.Y36(x.d),c.Y36(u.Pu),c.Y36($.y),c.Y36(L.F0),c.Y36(c.sBO))})),(0,i.Z)(fieldIconCondition,"ɵcmp",c.Xpm({type:e,selectors:[["field-icon-condition"]],inputs:{fieldconfig:"fieldconfig"},features:[c.qOj],decls:3,vars:4,consts:[[3,"fieldname","fieldconfig",4,"ngIf"],[3,"fielddisplayclass","fieldconfig"],[3,"size","icon","title","colorclass",4,"ngIf"],[3,"fieldname","fieldconfig"],[3,"size","icon","title","colorclass"]],template:function(e,t){1&e&&(c.YNc(0,bh,1,2,"field-label",0),c.TgZ(1,"field-generic-display",1),c.YNc(2,vh,1,4,"system-utility-icon",2),c.qZA()),2&e&&(c.Q6J("ngIf",t.displayLabel),c.xp6(1),c.Q6J("fielddisplayclass",t.fielddisplayclass)("fieldconfig",t.fieldconfig),c.xp6(1),c.Q6J("ngIf",!!t.icon))},dependencies:[n.O5,M.r,h.q,A.D],encapsulation:2,changeDetection:0})),fieldIconCondition})();var _h=s(8322);function yh(e,t){if(1&e&&c._UZ(0,"field-label",3),2&e){const e=c.oxw();c.Q6J("fieldname",e.fieldname)("fieldconfig",e.fieldconfig)}}let xh=(()=>{var e;class fieldIndicator extends r.O{constructor(e,t,s,n,o){super(e,t,s,n,o),(0,i.Z)(this,"model",void 0),(0,i.Z)(this,"view",void 0),(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"router",void 0),this.model=e,this.view=t,this.language=s,this.metadata=n,this.router=o}get indicatorValue(){return this.fieldconfig.up&&this.value==this.fieldconfig.up?"up":this.fieldconfig.down&&this.value==this.fieldconfig.down?"down":"neutral"}}return e=fieldIndicator,(0,i.Z)(fieldIndicator,"ɵfac",(function(t){return new(t||e)(c.Y36(w.o),c.Y36(k.e),c.Y36(x.d),c.Y36(u.Pu),c.Y36(L.F0))})),(0,i.Z)(fieldIndicator,"ɵcmp",c.Xpm({type:e,selectors:[["field-indicator"]],features:[c.qOj],decls:3,vars:7,consts:[[3,"fieldname","fieldconfig",4,"ngIf"],[3,"fielddisplayclass","editable","fieldconfig","title","fieldid"],[3,"trend"],[3,"fieldname","fieldconfig"]],template:function(e,t){1&e&&(c.YNc(0,yh,1,2,"field-label",0),c.TgZ(1,"field-generic-display",1),c._UZ(2,"system-trend-indicator",2),c.qZA()),2&e&&(c.Q6J("ngIf",t.displayLabel),c.xp6(1),c.Q6J("fielddisplayclass",t.fielddisplayclass)("editable",!1)("fieldconfig",t.fieldconfig)("title",t.value)("fieldid",t.fieldid),c.xp6(1),c.Q6J("trend",t.indicatorValue))},dependencies:[n.O5,_h.E,h.q,A.D],encapsulation:2})),fieldIndicator})();const wh=function(e){return{label:e}};function Th(e,t){if(1&e&&c._UZ(0,"field-label",13),2&e){const e=c.oxw();c.Q6J("fieldconfig",c.VKq(1,wh,"LBL_"+e.addressType.toUpperCase()))}}function Ch(e,t){if(1&e&&(c.TgZ(0,"span",20),c._UZ(1,"system-icon",21),c.qZA()),2&e){const e=c.oxw().$implicit;c.xp6(1),c.Q6J("module",e.parent_type)}}function Ah(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"li",14),c.NdJ("cdkDragStarted",(function(){c.CHM(e);const t=c.oxw();return c.KtG(t.parent.dragging=!0)}))("cdkDragEnded",(function(){c.CHM(e);const t=c.oxw();return c.KtG(t.parent.dragging=!1)})),c.TgZ(1,"span",15),c.YNc(2,Ch,2,1,"span",16),c.TgZ(3,"span",17),c._uU(4),c.qZA(),c.TgZ(5,"span",18)(6,"system-button-icon",19),c.NdJ("click",(function(t){const s=c.CHM(e).$implicit,i=c.oxw();return c.KtG(i.removeEmailAddress(t,s.email_address_id))})),c.qZA()()()()}if(2&e){const e=t.$implicit,s=c.oxw();c.Q6J("cdkDragData",e)("cdkDragBoundary",s.parent.elementRef),c.xp6(2),c.Q6J("ngIf",!!e.parent_id&&!!e.parent_type),c.xp6(2),c.hij(" ",e.email_address," "),c.xp6(2),c.Q6J("icon","close")}}function kh(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"li",22)(1,"div",23)(2,"div",24),c.Hsn(3),c.qZA(),c.TgZ(4,"input",25),c.NdJ("ngModelChange",(function(t){c.CHM(e);const s=c.oxw();return c.KtG(s.inputTextValue=t)}))("blur",(function(){c.CHM(e);const t=c.oxw();return c.KtG(t.onBlur())}))("keyup",(function(t){c.CHM(e);const s=c.oxw();return c.KtG(s.onKeyUp(t))}))("keydown.,",(function(e){return e.preventDefault()})),c.qZA()()()}if(2&e){const e=c.oxw();c.xp6(4),c.Q6J("ngModel",e.inputTextValue),c.uIk("system-autofocus","to"==e.addressType)}}function Lh(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"div",28),c.NdJ("click",(function(){c.CHM(e);const t=c.oxw(2);return t.addEmailAddressFromInput(),c.KtG(t.hideDropdown())})),c._UZ(1,"system-label",29),c.TgZ(2,"div",30),c._uU(3),c.qZA()()}if(2&e){const e=c.oxw(2);c.xp6(2),c.Q6J("title",e.inputTextValue),c.xp6(1),c.hij(" ",e.inputTextValue," ")}}function Ih(e,t){if(1&e&&(c.TgZ(0,"div",31),c._UZ(1,"system-utility-icon",32),c.TgZ(2,"div",33),c._UZ(3,"system-label",34),c.TgZ(4,"div",35),c._uU(5),c.qZA()()()),2&e){const e=c.oxw(2);c.xp6(2),c.Q6J("title",e.inputTextValue),c.xp6(3),c.hij(' "',e.inputTextValue,'" ')}}function Mh(e,t){if(1&e&&(c.TgZ(0,"div"),c.YNc(1,Lh,4,2,"div",26),c.YNc(2,Ih,6,2,"ng-template",null,27,c.W1O),c.qZA()),2&e){const e=c.MAs(3),t=c.oxw();c.xp6(1),c.Q6J("ngIf",t.isValidEmailAddress)("ngIfElse",e)}}function Sh(e,t){1&e&&c._UZ(0,"system-spinner",39)}function Jh(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"li",42),c.NdJ("click",(function(){const t=c.CHM(e).$implicit,s=c.oxw(3);return c.KtG(s.selectEmailAddress(t))})),c.TgZ(1,"div",43),c._UZ(2,"system-icon",44),c.TgZ(3,"div",45)(4,"span",46),c._uU(5),c.qZA()()()()}if(2&e){const e=t.$implicit;c.xp6(2),c.Q6J("module",e.module),c.xp6(3),c.AsE(" ",e.email_address," • ",e.summary_text," ")}}function Oh(e,t){if(1&e&&(c.TgZ(0,"ul",40),c.YNc(1,Jh,6,3,"li",41),c.qZA()),2&e){const e=c.oxw(2);c.xp6(1),c.Q6J("ngForOf",e.searchResults)}}function Nh(e,t){1&e&&(c.TgZ(0,"div",47),c._UZ(1,"system-label",48),c.qZA())}function Fh(e,t){if(1&e&&(c.YNc(0,Sh,1,0,"system-spinner",36),c.YNc(1,Oh,2,1,"ul",37),c.YNc(2,Nh,2,0,"div",38)),2&e){const e=c.oxw();c.Q6J("ngIf",e.searchResultsLoading),c.xp6(1),c.Q6J("ngIf",(null==e.searchResults?null:e.searchResults.length)>0),c.xp6(1),c.Q6J("ngIf",0==(null==e.searchResults?null:e.searchResults.length)&&!e.searchResultsLoading)}}function qh(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"button",49),c.NdJ("click",(function(){c.CHM(e);const t=c.oxw();return c.KtG(t.searchParentEmailAddresses())})),c._UZ(1,"system-button-icon",50),c.qZA()}}const Eh=["*"];let Yh=(()=>{var e;class fieldEmailRecipientsInput{constructor(e,t,s,n,o,l,a,d,r){(0,i.Z)(this,"model",void 0),(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"modal",void 0),(0,i.Z)(this,"injector",void 0),(0,i.Z)(this,"backend",void 0),(0,i.Z)(this,"renderer",void 0),(0,i.Z)(this,"elementRef",void 0),(0,i.Z)(this,"parent",void 0),(0,i.Z)(this,"zone",void 0),(0,i.Z)(this,"searchResults",[]),(0,i.Z)(this,"isInputTextVisible",!1),(0,i.Z)(this,"isDropdownVisible",!1),(0,i.Z)(this,"inputTextValue",""),(0,i.Z)(this,"inputCCTextValue",""),(0,i.Z)(this,"previousInputTextValue",""),(0,i.Z)(this,"searchTimeOut",void 0),(0,i.Z)(this,"searchResultsLoading",!1),(0,i.Z)(this,"searchAllowed",!1),(0,i.Z)(this,"isValidEmailAddress",!1),(0,i.Z)(this,"clickListener",void 0),(0,i.Z)(this,"addressType",void 0),(0,i.Z)(this,"displayValue",[]),(0,i.Z)(this,"drop$",new c.vpe),this.model=e,this.language=t,this.modal=s,this.injector=n,this.backend=o,this.renderer=l,this.elementRef=a,this.parent=d,this.zone=r}get value(){return this.model.getField("recipient_addresses")}set value(e){this.model.setField("recipient_addresses",e),this.parent.setDisplayValue()}get hasParent(){return!!this.model.getField("parent_id")}ngOnChanges(){(["cc","bcc"].indexOf(this.addressType)>-1||"to"==this.addressType&&this.parent.focused)&&(this.displayValue=this.displayValue.filter((e=>e.address_type==this.addressType)))}searchParentEmailAddresses(){this.modal.openModal("EmailParentAddressesModal",!0,this.injector).subscribe((e=>{this.parent.clickListener&&(this.parent.clickListener(),this.parent.clickListener=void 0),e.instance.addAddresses.subscribe((e=>{for(let t of e){const e={id:this.model.generateGuid(),address_type:this.addressType,email_address:t.email_address,email_address_id:t.email_address_id,parent_type:t.module,parent_id:t.id};this.value=[...this.model.getField("recipient_addresses"),e],this.isInputTextVisible=!0,this.parent.focused=!0}}))}))}validateEmail(e){this.isValidEmailAddress=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(String(e).toLowerCase())}onBlur(){this.inputTextValue||(this.isInputTextVisible=!1)}onFieldClick(){this.isInputTextVisible=!0,this.showDropdown()}removeEmailAddress(e,t){this.model.getField("recipient_addresses")&&0!=this.model.getField("recipient_addresses").length&&(this.value=this.model.getField("recipient_addresses").filter((e=>e.email_address_id!=t)),e.preventDefault(),e.stopPropagation())}onKeyUp(e){switch(this.searchAllowed=this.inputTextValue.length>2&&-1==this.inputTextValue.indexOf("@"),this.validateEmail(this.inputTextValue),this.inputTextValue.length<3&&this.hideDropdown(),e.key){case"Enter":case",":this.searchAllowed=!1,this.addEmailAddressFromInput();break;case"Backspace":this.inputTextValue||this.previousInputTextValue||this.removeLastEmailAddress(),this.showDropdown(),this.doSearch();break;default:this.showDropdown(),this.doSearch()}this.previousInputTextValue=this.inputTextValue}removeLastEmailAddress(){this.value&&0!=this.value.length&&(this.value=this.model.getField("recipient_addresses").slice(0,this.model.getField("recipient_addresses").length-1))}addEmailAddressFromInput(){if(!this.isValidEmailAddress)return;this.searchTimeOut&&window.clearTimeout(this.searchTimeOut);const e={id:this.model.generateGuid(),address_type:this.addressType,email_address:this.inputTextValue};this.value=[...this.model.getField("recipient_addresses"),e],this.hideDropdown(),this.resetInputTextValue()}doSearch(){this.searchAllowed&&this.previousInputTextValue!=this.inputTextValue&&this.zone.runOutsideAngular((()=>{this.searchTimeOut&&window.clearTimeout(this.searchTimeOut),this.searchTimeOut=window.setTimeout((()=>{this.inputTextValue&&(this.zone.run((()=>{this.searchResults=[],this.searchResultsLoading=!0})),this.backend.getRequest("module/EmailAddresses/"+this.inputTextValue).subscribe((e=>{this.zone.run((()=>{e&&e.length>0&&(this.searchResults=e),this.searchResultsLoading=!1}))})))}),1e3)}))}selectEmailAddress(e){const t={id:this.model.generateGuid(),address_type:this.addressType,email_address:e.email_address,email_address_id:e.email_address_id,parent_type:e.module,parent_id:e.id};this.value=[...this.model.getField("recipient_addresses"),t],this.resetInputTextValue(),this.hideDropdown()}resetInputTextValue(){this.inputTextValue="",this.previousInputTextValue=""}addDocumentClickListener(){this.clickListener=this.renderer.listen("document","click",(e=>{this.elementRef.nativeElement.contains(e.target)||this.hideDropdown()}))}showDropdown(){this.inputTextValue.length<3||(this.isDropdownVisible=!0,this.clickListener||this.addDocumentClickListener())}hideDropdown(){this.isDropdownVisible=!1,(!this.inputTextValue||this.inputTextValue.length<3)&&(this.searchResults=[]),this.clickListener&&(this.clickListener(),this.clickListener=!1)}}return e=fieldEmailRecipientsInput,(0,i.Z)(fieldEmailRecipientsInput,"ɵfac",(function(t){return new(t||e)(c.Y36(w.o),c.Y36(x.d),c.Y36(I.o),c.Y36(c.zs3),c.Y36($.y),c.Y36(c.Qsj),c.Y36(c.SBq),c.Y36(yl,1),c.Y36(c.R0b))})),(0,i.Z)(fieldEmailRecipientsInput,"ɵcmp",c.Xpm({type:e,selectors:[["field-email-recipients-input"]],inputs:{addressType:"addressType",displayValue:"displayValue"},outputs:{drop$:"drop$"},features:[c.TTD],ngContentSelectors:Eh,decls:14,vars:9,consts:[[3,"fieldconfig",4,"ngIf"],[1,"slds-grid","slds-grid--vertical-align-center"],[1,"slds-combobox_container","slds-grow"],["role","combobox",1,"slds-combobox","slds-dropdown-trigger","slds-dropdown-trigger_click"],["role","none",1,"slds-combobox__form-element"],[1,"slds-pill_container",3,"click"],["cdkDropList","","cdkDropListOrientation","horizontal","role","listbox",1,"slds-listbox","slds-listbox_horizontal","slds-size--1-of-1",3,"cdkDropListData","cdkDropListDropped"],["cdkDrag","","class","slds-listbox-item slds-drag--preview","role","presentation","style","cursor: grab; list-style: none;",3,"cdkDragData","cdkDragBoundary","cdkDragStarted","cdkDragEnded",4,"ngFor","ngForOf"],["class","slds-listbox-item slds-grow","role","presentation",4,"ngIf"],["role","listbox",1,"slds-dropdown","slds-dropdown_fluid"],[4,"ngIf","ngIfElse"],["searchContainer",""],["system-title","LBL_SELECT_PARENT_EMAIL","class","slds-button--icon slds-button--icon-border-filled slds-m-left--xx-small",3,"click",4,"ngIf"],[3,"fieldconfig"],["cdkDrag","","role","presentation",1,"slds-listbox-item","slds-drag--preview",2,"cursor","grab","list-style","none",3,"cdkDragData","cdkDragBoundary","cdkDragStarted","cdkDragEnded"],["role","option",1,"slds-pill"],["class","slds-icon_container",4,"ngIf"],[1,"slds-pill__label"],[1,"slds-icon_container","slds-pill__remove",2,"cursor","pointer"],[3,"icon","click"],[1,"slds-icon_container"],["size","x-small","divClass","slds-p-right--x-small",3,"module"],["role","presentation",1,"slds-listbox-item","slds-grow"],[1,"slds-form-element__control","slds-input-has-icon--right","slds-input-has-icon_group-right","slds-grow"],[1,"slds-input__icon-group","slds-input__icon-group_right","slds-m-right--xx-small"],["type","text","autocomplete","new-email-address","system-title","LBL_ADD_EMAILADDRESS","system-placeholder","LBL_ADD_EMAILADDRESS",1,"slds-p-horizontal--x-small","slds-size--1-of-1",3,"ngModel","ngModelChange","blur","keyup","keydown.,"],["class","slds-size--1-of-1 slds-grid slds-grid--vertical-align-center slds-p-around--x-small","style","cursor:pointer;",3,"click",4,"ngIf","ngIfElse"],["invalidEmailAddressContainer",""],[1,"slds-size--1-of-1","slds-grid","slds-grid--vertical-align-center","slds-p-around--x-small",2,"cursor","pointer",3,"click"],["label","LBL_USE",2,"display","block"],[1,"slds-truncate","slds-grow","slds-m-left--xx-small",2,"font-family","sans-serif","font-weight","bold",3,"title"],[1,"slds-grid","slds-grid--vertical-align-center","slds-p-around--x-small"],["icon","warning","size","x-small","colorclass","slds-icon-text-warning",1,"slds-m-right--xx-small",2,"display","block"],[1,"slds-grow","slds-grid","slds-grid--vertical-align-center","slds-truncate",3,"title"],["label","LBL_INPUT_INVALID",2,"display","block","white-space","nowrap"],[1,"slds-truncate","slds-grow","slds-m-left--xx-small",2,"font-style","italic"],["size","12","class","slds-grid slds-p-around--small",4,"ngIf"],["class","slds-listbox slds-listbox_vertical","role","presentation",4,"ngIf"],["class","slds-p-around--x-small",4,"ngIf"],["size","12",1,"slds-grid","slds-p-around--small"],["role","presentation",1,"slds-listbox","slds-listbox_vertical"],["role","presentation","class","slds-listbox__item",3,"click",4,"ngFor","ngForOf"],["role","presentation",1,"slds-listbox__item",3,"click"],[1,"slds-listbox__option","slds-grid","slds-grid--vertical-align-center","slds-p-around--x-small"],["size","x-small",1,"slds-p-right--x-small",3,"module"],[1,"slds-media__body"],[1,"slds-listbox__option-text","slds-listbox__option-text_entity"],[1,"slds-p-around--x-small"],["label","MSG_NO_RECORDS_FOUND"],["system-title","LBL_SELECT_PARENT_EMAIL",1,"slds-button--icon","slds-button--icon-border-filled","slds-m-left--xx-small",3,"click"],["icon","record_lookup"]],template:function(e,t){if(1&e&&(c.F$t(),c.YNc(0,Th,1,3,"field-label",0),c.TgZ(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5),c.NdJ("click",(function(){return t.onFieldClick()})),c.TgZ(6,"ul",6),c.NdJ("cdkDropListDropped",(function(e){return t.drop$.emit(e)})),c.YNc(7,Ah,7,5,"li",7),c.YNc(8,kh,5,2,"li",8),c.qZA()()(),c.TgZ(9,"div",9),c.YNc(10,Mh,4,2,"div",10),c.YNc(11,Fh,3,3,"ng-template",null,11,c.W1O),c.qZA()()(),c.YNc(13,qh,2,0,"button",12),c.qZA()),2&e){const e=c.MAs(12);c.Q6J("ngIf","cc"==t.addressType||"bcc"==t.addressType),c.xp6(3),c.ekj("slds-is-open",t.isDropdownVisible),c.xp6(3),c.Q6J("cdkDropListData",t.addressType),c.xp6(1),c.Q6J("ngForOf",t.displayValue),c.xp6(1),c.Q6J("ngIf",!t.parent.dragging),c.xp6(2),c.Q6J("ngIf",!t.searchAllowed)("ngIfElse",e),c.xp6(3),c.Q6J("ngIf",t.hasParent)}},dependencies:[n.sg,n.O5,o.Fj,o.JJ,o.On,T.J,hs.f,se._,Go.W,M.r,mc.A,Rn.S,l.Wj,l.Zt,h.q],styles:["input[_ngcontent-%COMP%], input[_ngcontent-%COMP%]:focus{border:none;outline:none}"]})),fieldEmailRecipientsInput})();function Dh(e,t){if(1&e&&c._UZ(0,"field-label",3),2&e){const e=c.oxw();c.Q6J("fieldname",e.fieldname)("fieldconfig",e.fieldconfig)}}let Qh=(()=>{var e;class fieldJson extends r.O{constructor(e,t,s,n,o){super(e,t,s,n,o),(0,i.Z)(this,"model",void 0),(0,i.Z)(this,"view",void 0),(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"router",void 0),this.model=e,this.view=t,this.language=s,this.metadata=n,this.router=o}get value(){return JSON.stringify(JSON.parse(this.model.getField(this.fieldname)),null,"\t")}set value(e){this.model.setField(this.fieldname,e)}}return e=fieldJson,(0,i.Z)(fieldJson,"ɵfac",(function(t){return new(t||e)(c.Y36(w.o),c.Y36(k.e),c.Y36(x.d),c.Y36(u.Pu),c.Y36(L.F0))})),(0,i.Z)(fieldJson,"ɵcmp",c.Xpm({type:e,selectors:[["field-json"]],features:[c.qOj],decls:4,vars:7,consts:[[3,"fieldname","fieldconfig",4,"ngIf"],[3,"fielddisplayclass","editable","fieldconfig","title","fieldid"],[2,"overflow-wrap","break-word","white-space","pre-wrap"],[3,"fieldname","fieldconfig"]],template:function(e,t){1&e&&(c.YNc(0,Dh,1,2,"field-label",0),c.TgZ(1,"field-generic-display",1)(2,"div",2),c._uU(3),c.qZA()()),2&e&&(c.Q6J("ngIf",t.displayLabel),c.xp6(1),c.Q6J("fielddisplayclass",t.fielddisplayclass)("editable",!1)("fieldconfig",t.fieldconfig)("title",t.value)("fieldid",t.fieldid),c.xp6(2),c.Oqu(t.value))},dependencies:[n.O5,h.q,A.D],encapsulation:2})),fieldJson})();function Uh(e,t){if(1&e&&c._UZ(0,"field-label",3),2&e){const e=c.oxw();c.Q6J("fieldname",e.fieldname)("fieldconfig",e.fieldconfig)}}function Rh(e,t){if(1&e&&c._UZ(0,"system-icon",10),2&e){const e=c.oxw(3);c.Q6J("module",e.model.data[e.parentTypeField])("size","x-small")}}function jh(e,t){if(1&e&&(c.TgZ(0,"span",11),c._uU(1),c.qZA()),2&e){const e=c.oxw(3);c.Q6J("module",e.parentType)("id",e.parentId),c.xp6(1),c.Oqu(e.value)}}function Bh(e,t){if(1&e&&(c.TgZ(0,"span"),c._UZ(1,"field-linked-details",12),c.qZA()),2&e){const e=c.oxw(3);c.xp6(1),c.Q6J("fieldset",e.fieldconfig.fieldset)("module",e.parentType)("data",e.relData)}}function Gh(e,t){if(1&e&&(c.TgZ(0,"div",6),c.YNc(1,Rh,1,2,"system-icon",7),c.YNc(2,jh,2,3,"span",8),c.YNc(3,Bh,2,3,"span",9),c.qZA()),2&e){const e=c.oxw(2);c.xp6(1),c.Q6J("ngIf",e.displayModuleIcon),c.xp6(1),c.Q6J("ngIf",!e.fieldconfig.fieldset),c.xp6(1),c.Q6J("ngIf",e.fieldconfig.fieldset&&e.relData)}}function Ph(e,t){if(1&e&&(c.TgZ(0,"field-generic-display",4),c.YNc(1,Gh,4,3,"div",5),c.qZA()),2&e){const e=c.oxw();c.Q6J("fielddisplayclass",e.fielddisplayclass)("editable",e.isEditable())("fieldconfig",e.fieldconfig)("fieldid",e.fieldid),c.xp6(1),c.Q6J("ngIf",e.parentId)}}function Hh(e,t){if(1&e&&(c.ynx(0),c._uU(1),c.BQk()),2&e){const e=c.oxw(3);c.xp6(1),c.Oqu(e.value)}}function zh(e,t){if(1&e&&(c.ynx(0),c._UZ(1,"field-linked-details",12),c.BQk()),2&e){const e=c.oxw(3);c.xp6(1),c.Q6J("fieldset",e.fieldconfig.fieldset)("module",e.parentType)("data",e.relData)}}function Vh(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"div",18)(1,"div",19)(2,"span",20)(3,"span",21),c._UZ(4,"system-icon",10),c.qZA(),c.TgZ(5,"span",22),c.YNc(6,Hh,2,1,"ng-container",9),c.YNc(7,zh,2,3,"ng-container",9),c.qZA(),c.TgZ(8,"button",23),c.NdJ("click",(function(){c.CHM(e);const t=c.oxw(2);return c.KtG(t.clearParent())})),c._UZ(9,"system-button-icon",24),c.qZA()()()()}if(2&e){const e=c.oxw(2);c.xp6(4),c.Q6J("module",e.model.data[e.parentTypeField])("size","small"),c.xp6(2),c.Q6J("ngIf",!e.fieldconfig.fieldset),c.xp6(1),c.Q6J("ngIf",e.fieldconfig.fieldset),c.xp6(2),c.Q6J("icon","close")}}function Kh(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"li",45),c.NdJ("click",(function(){const t=c.CHM(e).$implicit,s=c.oxw(4);return c.KtG(s.setParentType(t))})),c.TgZ(1,"div",46)(2,"div",47),c._UZ(3,"system-icon",48),c.TgZ(4,"div",49),c._UZ(5,"system-label-modulename",50),c.qZA()()()()}if(2&e){const e=t.$implicit;c.xp6(3),c.Q6J("module",e),c.xp6(2),c.Q6J("module",e)}}const $h=function(e){return{"slds-is-open":e}};function Xh(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"div",36)(1,"div",14)(2,"div",37)(3,"div",38)(4,"div",28)(5,"div",39),c.NdJ("click",(function(){c.CHM(e);const t=c.oxw(3);return c.KtG(t.openParentTypes())})),c._UZ(6,"input",40)(7,"system-icon",41),c.qZA(),c.TgZ(8,"div",42)(9,"ul",43),c.YNc(10,Kh,6,2,"li",44),c.qZA()()()()()()()}if(2&e){const e=c.oxw(3);c.xp6(4),c.Q6J("ngClass",c.VKq(3,$h,e.parentTypeSelectOpen)),c.xp6(2),c.Q6J("value",e.language.getModuleName(e.parentType)),c.xp6(4),c.Q6J("ngForOf",e.parentTypes)}}function Wh(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"field-lookup-recent",51),c.NdJ("selectedObject",(function(t){c.CHM(e);const s=c.oxw(3);return c.KtG(s.setParent(t))})),c.qZA()}if(2&e){const e=c.oxw(3);c.Q6J("module",e.parentType)}}function em(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"field-lookup-search",52),c.NdJ("selectedObject",(function(t){c.CHM(e);const s=c.oxw(3);return c.KtG(s.setParent(t))}))("searchWithModal",(function(){c.CHM(e);const t=c.oxw(3);return c.KtG(t.searchWithModal())})),c.qZA()}if(2&e){const e=c.oxw(3);c.Q6J("module",e.parentType)("searchterm",e.parentSearchTerm)}}function tm(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"div",25),c.YNc(1,Xh,11,5,"div",26),c.TgZ(2,"div",27)(3,"div",28)(4,"div",29)(5,"input",30,31),c.NdJ("focus",(function(){c.CHM(e);const t=c.oxw(2);return c.KtG(t.onFocusParent())}))("ngModelChange",(function(t){c.CHM(e);const s=c.oxw(2);return c.KtG(s.parentSearchTerm=t)})),c.qZA(),c.TgZ(7,"button",32),c.NdJ("click",(function(){c.CHM(e);const t=c.oxw(2);return c.KtG(t.searchWithModal())})),c._UZ(8,"system-button-icon",24),c.qZA()(),c.TgZ(9,"div",33),c.YNc(10,Wh,1,1,"field-lookup-recent",34),c.YNc(11,em,1,2,"field-lookup-search",35),c.qZA()()()()}if(2&e){const e=c.oxw(2);c.xp6(1),c.Q6J("ngIf",e.parentTypes.length>0),c.xp6(2),c.Q6J("ngClass",c.VKq(7,$h,e.parentSearchOpen)),c.xp6(2),c.Q6J("ngModel",e.parentSearchTerm)("placeholder",e.language.getModuleCombinedLabel("LBL_SEARCH",e.parentType)),c.xp6(3),c.Q6J("icon","search"),c.xp6(2),c.Q6J("ngIf",""===e.parentSearchTerm),c.xp6(1),c.Q6J("ngIf",""!==e.parentSearchTerm)}}function sm(e,t){if(1&e&&(c.TgZ(0,"div",13)(1,"div",14),c.YNc(2,Vh,10,5,"div",15),c.YNc(3,tm,12,9,"div",16),c.qZA(),c._UZ(4,"field-messages",17),c.qZA()),2&e){const e=c.oxw();c.Q6J("ngClass",e.getFieldClass()),c.xp6(2),c.Q6J("ngIf",e.model.data[e.parentIdField]),c.xp6(1),c.Q6J("ngIf",!e.model.data[e.parentIdField]),c.xp6(1),c.Q6J("fieldname",e.fieldname)}}let im=(()=>{var e;class fieldLinkedParent extends r.O{constructor(e,t,s,n,o,l,a,d,r){super(e,t,n,o,l),(0,i.Z)(this,"model",void 0),(0,i.Z)(this,"view",void 0),(0,i.Z)(this,"broadcast",void 0),(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"router",void 0),(0,i.Z)(this,"elementRef",void 0),(0,i.Z)(this,"renderer",void 0),(0,i.Z)(this,"modal",void 0),(0,i.Z)(this,"clickListener",void 0),(0,i.Z)(this,"parentTypeSelectOpen",!1),(0,i.Z)(this,"parentSearchOpen",!1),(0,i.Z)(this,"parentSearchTerm",""),(0,i.Z)(this,"recentItems",[]),(0,i.Z)(this,"parentTypes",[]),this.model=e,this.view=t,this.broadcast=s,this.language=n,this.metadata=o,this.router=l,this.elementRef=a,this.renderer=d,this.modal=r,this.subscriptions.add(this.broadcast.message$.subscribe({next:e=>this.handleMessage(e)})),this.subscriptions.add(this.model.data$.subscribe({next:()=>{this.getFieldSet()}}))}get parentIdField(){return this.fieldconfig.parentIdField?this.fieldconfig.parentIdField:"parent_id"}get parentTypeField(){return this.fieldconfig.parentTypeField?this.fieldconfig.parentTypeField:"parent_type"}get parentName(){return this.model.getField(this.fielddefs.rname??"summary_text")}get parentType(){return this.model.getField(this.parentTypeField)}get parentId(){return this.model.getField(this.parentIdField)}get displayModuleIcon(){return!this.fieldconfig.hidemoduleicon}get value(){let e=this.model.getField(this.fieldname);return e?this.fielddefs?.rname?e[this.fielddefs?.rname]:e.summary_text:""}set value(e){}get relData(){return this.model.getField(this.fieldname)??{}}ngOnInit(){this.determineParentTypes(),this.model.getField(this.parentTypeField)&&""!=this.model.getField(this.parentTypeField)||this.model.setField(this.parentTypeField,this.parentTypes[0])}getFieldSet(){this.fieldconfig.fieldset=void 0;let e=this.metadata.getComponentConfig("fieldLinkedParent",this.parentType);e.fieldset?this.fieldconfig.fieldset=e.fieldset:(e=this.metadata.getComponentConfig("fieldLinked",this.parentType),e.fieldset&&(this.fieldconfig.fieldset=e.fieldset))}determineParentTypes(){let e=[];this.fieldconfig.parenttypes?e=this.fieldconfig.parenttypes.replace(/\s/g,"").split(","):this.field_defs.parent_modules&&(e=this.field_defs.parent_modules),this.fieldconfig.sortbyparenttypes||e.sort(((e,t)=>this.language.getModuleName(e).toLowerCase()>this.language.getModuleName(t).toLowerCase()?1:-1)),this.parentTypes=e}handleMessage(e){if(e.messagedata.reference&&"model.save"===e.messagetype)if(this.fieldid===e.messagedata.reference){this.parentSearchTerm="";let t={};t[this.parentIdField]=e.messagedata.data.id,t[this.fieldname]=e.messagedata.data.summary_text,this.model.setFields(t,!0)}}onClick(e){this.elementRef.nativeElement.contains(e.target)||this.closePopups()}closePopups(){this.model.getField(this.parentIdField)&&(this.parentSearchTerm=""),this.parentSearchOpen=!1,this.parentTypeSelectOpen=!1,this.clickListener()}setParent(e){this.model.setField(this.fieldname,e.data),this.model.setField(this.parentIdField,e.id)}toggleParentTypeSelect(){this.parentTypeSelectOpen=!this.parentTypeSelectOpen,this.parentSearchOpen=!1}setParentType(e){this.parentSearchTerm="",this.model.setField(this.parentTypeField,e),this.parentTypeSelectOpen=!1}clearParent(){this.fieldconfig.promptondelete?this.modal.confirm(this.language.getLabelFormatted("LBL_PROMPT_DELETE_RELATIONSHIP",[this.language.getFieldDisplayName(this.model.module,this.fieldname,this.fieldconfig)],"long"),this.language.getLabelFormatted("LBL_PROMPT_DELETE_RELATIONSHIP",[this.language.getFieldDisplayName(this.model.module,this.fieldname,this.fieldconfig)])).subscribe((e=>{e&&this.removeRelated()})):this.removeRelated()}removeRelated(){this.model.setField(this.fieldname,""),this.model.setField(this.parentIdField,"")}openParentTypes(){this.parentTypeSelectOpen=!0,this.parentSearchOpen=!1,this.clickListener=this.renderer.listen("document","click",(e=>this.onClick(e)))}onFocusParent(){this.parentTypeSelectOpen=!1,this.parentSearchOpen=!0,this.clickListener=this.renderer.listen("document","click",(e=>this.onClick(e)))}searchWithModal(){this.parentSearchOpen=!1,this.modal.openModal("ObjectModalModuleLookup").subscribe((e=>{e.instance.module=this.parentType,e.instance.multiselect=!1,e.instance.selectedItems.subscribe((e=>{e.length&&this.setParent({id:e[0].id,text:e[0].summary_text,data:e[0]})})),e.instance.searchTerm=this.parentSearchTerm}))}}return e=fieldLinkedParent,(0,i.Z)(fieldLinkedParent,"ɵfac",(function(t){return new(t||e)(c.Y36(w.o),c.Y36(k.e),c.Y36(W.f),c.Y36(x.d),c.Y36(u.Pu),c.Y36(L.F0),c.Y36(c.SBq),c.Y36(c.Qsj),c.Y36(I.o))})),(0,i.Z)(fieldLinkedParent,"ɵcmp",c.Xpm({type:e,selectors:[["field-linked-parent"]],features:[c.qOj],decls:3,vars:3,consts:[[3,"fieldname","fieldconfig",4,"ngIf"],[3,"fielddisplayclass","editable","fieldconfig","fieldid",4,"ngIf"],["class","slds-form-element__control",3,"ngClass",4,"ngIf"],[3,"fieldname","fieldconfig"],[3,"fielddisplayclass","editable","fieldconfig","fieldid"],["class","slds-grid slds-grid_vertical-align-center",4,"ngIf"],[1,"slds-grid","slds-grid_vertical-align-center"],[3,"module","size",4,"ngIf"],["system-model-popover","",3,"module","id",4,"ngIf"],[4,"ngIf"],[3,"module","size"],["system-model-popover","",3,"module","id"],[3,"fieldset","module","data"],[1,"slds-form-element__control",3,"ngClass"],[1,"slds-form-element"],["class","slds-form-element__control slds-p-around--xx-small",4,"ngIf"],["class","slds-combobox-group slds-p-around--xx-small",4,"ngIf"],[3,"fieldname"],[1,"slds-form-element__control","slds-p-around--xx-small"],[1,"slds-pill_container"],[1,"slds-pill","slds-size--1-of-1"],[1,"slds-icon_container","slds-icon-standard-account","slds-pill__icon_container"],[1,"slds-pill__label"],[1,"slds-button","slds-button--icon","slds-pill__remove",3,"click"],[3,"icon"],[1,"slds-combobox-group","slds-p-around--xx-small"],["class","slds-combobox_object-switcher slds-combobox-addon_start",4,"ngIf"],[1,"slds-combobox_container","slds-combobox-addon_end"],["role","combobox",1,"slds-combobox","slds-dropdown-trigger","slds-dropdown-trigger_click",3,"ngClass"],["role","none",1,"slds-combobox__form-element","slds-input-has-icon","slds-input-has-icon_right"],["type","text","aria-autocomplete","list","autoComplete","off","role","textbox",1,"slds-input","slds-combobox__input",3,"ngModel","placeholder","focus","ngModelChange"],["focus",""],[1,"slds-button","slds-button_icon","slds-input__icon","slds-input__icon_right",3,"click"],["role","listbox",1,"slds-dropdown","slds-dropdown_length-with-icon-7","slds-dropdown_fluid"],[3,"module","selectedObject",4,"ngIf"],[3,"module","searchterm","selectedObject","searchWithModal",4,"ngIf"],[1,"slds-combobox_object-switcher","slds-combobox-addon_start"],[1,"slds-form-element__control"],[1,"slds-combobox_container"],[1,"slds-combobox__form-element","slds-input-has-icon","slds-input-has-icon--right",3,"click"],["type","text","readonly","","autoComplete","off","role","textbox",1,"slds-input","slds-combobox__input","slds-combobox__input-value",3,"value"],["icon","down","sprite","utility","addclasses","slds-input__icon slds-input__icon_right"],["role","listbox",1,"slds-dropdown","slds-dropdown_length-5","slds-dropdown_x-small","slds-dropdown_left"],["role","group","aria-label","Suggested for you",1,"slds-listbox","slds-listbox_vertical"],["role","presentation","class","slds-listbox__item",3,"click",4,"ngFor","ngForOf"],["role","presentation",1,"slds-listbox__item",3,"click"],["role","option",1,"slds-media","slds-listbox__option","slds-listbox__option_plain","slds-media_small"],[1,"slds-grid","slds-grid--vertical-align-center"],["size","x-small",3,"module"],[1,"slds-truncate"],[3,"module"],[3,"module","selectedObject"],[3,"module","searchterm","selectedObject","searchWithModal"]],template:function(e,t){1&e&&(c.YNc(0,Uh,1,2,"field-label",0),c.YNc(1,Ph,2,5,"field-generic-display",1),c.YNc(2,sm,5,4,"div",2)),2&e&&(c.Q6J("ngIf",t.displayLabel),c.xp6(1),c.Q6J("ngIf",!t.isEditMode()),c.xp6(1),c.Q6J("ngIf",t.isEditable()&&t.isEditMode()))},dependencies:[n.mk,n.sg,n.O5,o.Fj,o.JJ,o.On,T.J,hs.f,ms.M,gs.g,h.q,A.D,di,ps.P,fs.$,J.a],encapsulation:2})),fieldLinkedParent})();function nm(e,t){if(1&e&&c._UZ(0,"field-label",3),2&e){const e=c.oxw();c.Q6J("fieldname",e.fieldname)("fieldconfig",e.fieldconfig)}}function om(e,t){if(1&e&&(c.TgZ(0,"field-generic-display",4),c._uU(1),c.qZA()),2&e){const e=c.oxw();c.Q6J("fielddisplayclass",e.fielddisplayclass)("fieldconfig",e.fieldconfig)("editable",e.isEditable()),c.xp6(1),c.hij(" ",e.getSelectedCountry(),"\n")}}function lm(e,t){if(1&e&&(c.TgZ(0,"option",10),c._uU(1),c.qZA()),2&e){const e=t.$implicit;c.Q6J("value",e.cc),c.xp6(1),c.hij(" ",e.name," ")}}function am(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"div",5)(1,"div",6)(2,"select",7),c.NdJ("ngModelChange",(function(t){c.CHM(e);const s=c.oxw();return c.KtG(s.value=t)})),c.YNc(3,lm,2,2,"option",8),c.qZA()(),c._UZ(4,"field-messages",9),c.qZA()}if(2&e){const e=c.oxw();c.Q6J("ngClass",e.getFieldClass()),c.xp6(2),c.Q6J("ngModel",e.value),c.xp6(1),c.Q6J("ngForOf",e.countries),c.xp6(1),c.Q6J("fieldname",e.fieldname)}}let dm=(()=>{var e;class fieldCountries extends r.O{constructor(e,t,s,n,o,l){super(e,t,s,n,o),(0,i.Z)(this,"model",void 0),(0,i.Z)(this,"view",void 0),(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"router",void 0),(0,i.Z)(this,"currency",void 0),(0,i.Z)(this,"countries",[]),this.model=e,this.view=t,this.language=s,this.metadata=n,this.router=o,this.currency=l;let a=this.metadata.getCountries();a.countries&&a.countries.forEach((e=>{this.countries.push({cc:e.cc,name:this.language.getLabel(e.label)})})),this.countries.sort(((e,t)=>e.name.localeCompare(t.name)))}getSelectedCountry(){if(!this.value)return"";let e=this.countries.filter((e=>e.cc==this.value));return e[0]?.name}}return e=fieldCountries,(0,i.Z)(fieldCountries,"ɵfac",(function(t){return new(t||e)(c.Y36(w.o),c.Y36(k.e),c.Y36(x.d),c.Y36(u.Pu),c.Y36(L.F0),c.Y36(Ae.A))})),(0,i.Z)(fieldCountries,"ɵcmp",c.Xpm({type:e,selectors:[["field-countries"]],features:[c.qOj],decls:3,vars:3,consts:[[3,"fieldname","fieldconfig",4,"ngIf"],[3,"fielddisplayclass","fieldconfig","editable",4,"ngIf"],["class","slds-form-element__control",3,"ngClass",4,"ngIf"],[3,"fieldname","fieldconfig"],[3,"fielddisplayclass","fieldconfig","editable"],[1,"slds-form-element__control",3,"ngClass"],[1,"slds-select_container","slds-m-vertical--xx-small"],[1,"slds-select",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[3,"fieldname"],[3,"value"]],template:function(e,t){1&e&&(c.YNc(0,nm,1,2,"field-label",0),c.YNc(1,om,2,4,"field-generic-display",1),c.YNc(2,am,5,4,"div",2)),2&e&&(c.Q6J("ngIf",t.displayLabel),c.xp6(1),c.Q6J("ngIf",!t.isEditMode()),c.xp6(1),c.Q6J("ngIf",t.isEditable()&&t.isEditMode()))},dependencies:[n.mk,n.sg,n.O5,o.YN,o.Kr,o.EJ,o.JJ,o.On,h.q,A.D,J.a],encapsulation:2})),fieldCountries})();var rm=s(528);function cm(e,t){if(1&e&&c._UZ(0,"field-label",3),2&e){const e=c.oxw(2);c.Q6J("fieldname",e.fieldname)("fieldconfig",e.fieldconfig)}}function um(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"div"),c.YNc(1,cm,1,2,"field-label",1),c.TgZ(2,"system-checkbox-toggle",2),c.NdJ("ngModelChange",(function(t){c.CHM(e);const s=c.oxw();return c.KtG(s.value=t)}))("ngModelChange",(function(){c.CHM(e);const t=c.oxw();return c.KtG(t.setValue(t.value))})),c.qZA()()}if(2&e){const e=c.oxw();c.xp6(1),c.Q6J("ngIf",e.displayLabel),c.xp6(1),c.Q6J("disabled",e.disabled)("ngModel",e.value)}}let hm=(()=>{var e;class fieldToggle extends r.O{constructor(e,t,s,n,o,l){super(e,t,s,n,o),(0,i.Z)(this,"model",void 0),(0,i.Z)(this,"view",void 0),(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"router",void 0),(0,i.Z)(this,"modal",void 0),(0,i.Z)(this,"hidden",!1),this.model=e,this.view=t,this.language=s,this.metadata=n,this.router=o,this.modal=l}ngOnInit(){this.fieldconfig.acl&&!this.metadata.checkModuleAcl(this.model.module,this.fieldconfig.acl)&&(this.hidden=!0)}get disabled(){return!this.metadata.checkModuleAcl(this.model.module,"edit")||!this.hasAccess()}hasAccess(){return this.metadata.session.authData.user.id===this.model.data.created_by}setValue(e){let t=this.modal.await("LBL_UPDATING");this.model.setField(this.fieldname,e),this.model.save(!0).subscribe({next:e=>{t.emit(!0)},error:()=>{t.emit(!0)},complete:()=>{t.emit(!0)}})}}return e=fieldToggle,(0,i.Z)(fieldToggle,"ɵfac",(function(t){return new(t||e)(c.Y36(w.o),c.Y36(k.e),c.Y36(x.d),c.Y36(u.Pu),c.Y36(L.F0),c.Y36(I.o))})),(0,i.Z)(fieldToggle,"ɵcmp",c.Xpm({type:e,selectors:[["field-toggle"]],features:[c.qOj],decls:1,vars:1,consts:[[4,"ngIf"],[3,"fieldname","fieldconfig",4,"ngIf"],[3,"disabled","ngModel","ngModelChange"],[3,"fieldname","fieldconfig"]],template:function(e,t){1&e&&c.YNc(0,um,3,3,"div",0),2&e&&c.Q6J("ngIf",!t.hidden)},dependencies:[n.O5,o.JJ,o.On,rm.v,h.q],encapsulation:2})),fieldToggle})();function mm(e,t){if(1&e&&c._UZ(0,"field-label",3),2&e){const e=c.oxw();c.Q6J("fieldname",e.fieldname)("fieldconfig",e.fieldconfig)}}function gm(e,t){1&e&&c._UZ(0,"system-utility-icon",4)}let pm=(()=>{var e;class fieldNotificationIndicator extends r.O{constructor(e,t,s,n,o){super(e,t,s,n,o),(0,i.Z)(this,"model",void 0),(0,i.Z)(this,"view",void 0),(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"router",void 0),this.model=e,this.view=t,this.language=s,this.metadata=n,this.router=o}get hasNotification(){return!!this.model.getField("has_notification")}}return e=fieldNotificationIndicator,(0,i.Z)(fieldNotificationIndicator,"ɵfac",(function(t){return new(t||e)(c.Y36(w.o),c.Y36(k.e),c.Y36(x.d),c.Y36(u.Pu),c.Y36(L.F0))})),(0,i.Z)(fieldNotificationIndicator,"ɵcmp",c.Xpm({type:e,selectors:[["field-notification-indicator"]],features:[c.qOj],decls:3,vars:3,consts:[[3,"fieldname","fieldconfig",4,"ngIf"],[3,"fielddisplayclass"],["icon","warning","size","x-small","colorclass","slds-icon-text-warning",4,"ngIf"],[3,"fieldname","fieldconfig"],["icon","warning","size","x-small","colorclass","slds-icon-text-warning"]],template:function(e,t){1&e&&(c.YNc(0,mm,1,2,"field-label",0),c.TgZ(1,"field-generic-display",1),c.YNc(2,gm,1,0,"system-utility-icon",2),c.qZA()),2&e&&(c.Q6J("ngIf",t.displayLabel),c.xp6(1),c.Q6J("fielddisplayclass",t.fielddisplayclass),c.xp6(1),c.Q6J("ngIf",t.hasNotification))},dependencies:[n.O5,M.r,h.q,A.D],encapsulation:2})),fieldNotificationIndicator})(),fm=(()=>{var e;class ObjectFields{}return e=ObjectFields,(0,i.Z)(ObjectFields,"ɵfac",(function(t){return new(t||e)})),(0,i.Z)(ObjectFields,"ɵmod",c.oAB({type:e})),(0,i.Z)(ObjectFields,"ɵinj",c.cJS({imports:[n.ez,o.u5,a.SystemComponents,d.o,l._t]})),ObjectFields})();("undefined"==typeof ngJitMode||ngJitMode)&&c.kYT(fm,{declarations:[Z,p,y,Rs,h.q,C,m.j,r.O,A.D,G,V,he,fe,ve,Ce,Fe,Ee,De,El,Rl,Be,Ve,$e,lt,gt,At,Yt,ft,jt,Xt,is,as,us,zi,en,dn,pn,wn,En,On,Is,Qs,ti,oi,Ai,Ti,di,im,Di,ps.P,ba.E,fs.$,va.R,Za.I,Wn,wa,mo,Zo,No,Do,Bo,ul,yl,Jl,Xo,Wo,$l,ia,Wl,fa,J.a,Na,ja,Zd,wd,ld,jd,Jd,Fd,$d,Pd,ir,nr,rr,nr,ur,Jr,gr,Tr,Er,Br,Hr,lc,hc,Yc,jc,Gc,Vc,Wc,su,iu,du,mu,bu,wu,Su,Eu,Qu,Ou,zu,Wu,mh,Wu,oh,fh,Zh,xh,Yh,Qh,dm,hm,pm],imports:[n.ez,o.u5,a.SystemComponents,d.o,l._t],exports:[Z,p,h.q,m.j,r.O,A.D,he,J.a,Na,Rs,Di,ps.P,fs.$,Za.I,Su,Zd,ld,Yh,ft]}),c.B6R(yl,[n.mk,n.sg,n.O5,l.Fd,h.q,A.D,J.a,Yh],[])},5504:(e,t,s)=>{"use strict";s.d(t,{R:()=>u});var i=s(1180),n=s(7579),o=s(2242),l=s(6163),a=s(4505),d=s(3369),r=s(5920),c=s(3298);let u=(()=>{var e;class assistant{constructor(e,t,s,n,o){(0,i.Z)(this,"modelutilities",void 0),(0,i.Z)(this,"backend",void 0),(0,i.Z)(this,"broadcast",void 0),(0,i.Z)(this,"session",void 0),(0,i.Z)(this,"notification",void 0),(0,i.Z)(this,"assistantModules",[]),(0,i.Z)(this,"assitantItems",[]),(0,i.Z)(this,"assistantFilters",{objectfilters:[],timefilter:"all"}),(0,i.Z)(this,"initialized",!1),(0,i.Z)(this,"loading",!0),(0,i.Z)(this,"reminder",null),this.modelutilities=e,this.backend=t,this.broadcast=s,this.session=n,this.notification=o,this.broadcast.message$.subscribe((e=>{this.handleMessage(e)})),this.session.authData.sessionId&&this.initialize()}handleMessage(e){switch(e.messagetype){case"logout":this.assitantItems=[],this.initialized=!1,this.reminder&&clearInterval(this.reminder);break;case"login":this.initialize();break;case"model.delete":case"model.save":this.assistantModules.indexOf(e.messagedata.module)>=0&&this.loadItems(!0)}}initialize(){this.initialized||(this.initialized=!0,this.loadItems(),this.reminder=setInterval((()=>{this.remind()}),6e4))}remind(){let e=moment.utc();for(let t of this.assitantItems)if(t.data.reminder_time&&"-1"!=t.data.reminder_time){let s=new moment.utc(t.date_activity).subtract(parseInt(t.data.reminder_time,10),"seconds");if(e.format("YYYYMMDDHHmm")==s.format("YYYYMMDDHHmm")){let e={id:this.modelutilities.generateGuid(),bean_module:t.module,bean_id:t.data.id,created_by:t.data.created_by,created_by_name:t.data.created_by,user_id:t.data.created_by,notification_date:t.date_activity,notification_type:"reminder",notification_read:0,additional_infos:{},bean_name:t.data.summary_text};this.notification.displayRealtimeNotification(e,!1)}}}loadItems(e=!0){e||(this.loading=!0,this.assitantItems=[]);let t=new n.x;return this.backend.getRequest("module/Activities/assistant/list").subscribe({next:e=>{let s=[];for(let t of e.items)s.push({id:t.id,module:t.module,date_activity:t.date_activity,data:this.modelutilities.backendModel2spice(t.module,t.data)});this.assitantItems=s,this.assistantModules=e.modules?e.modules:[],t.next(this.assitantItems),t.complete(),this.loading=!1},error:()=>{this.loading=!1}}),t.asObservable()}get filteredItems(){return"all"!=this.assistantFilters.timefilter||this.assistantFilters.objectfilters.length>0?this.assitantItems.filter((e=>{if(this.assistantFilters.objectfilters.length>0&&-1==this.assistantFilters.objectfilters.indexOf(e.module))return!1;if("all"!=this.assistantFilters.timefilter){let t=new moment.utc(e.date_activity);if("today"==this.assistantFilters.timefilter&&!t.isSame(moment.utc(),"day"))return!1;if("overdue"==this.assistantFilters.timefilter&&!t.isBefore(moment.utc(),"day"))return!1}return!0})):this.assitantItems}get activityTypes(){let e=[];for(let t of this.assitantItems)-1==e.indexOf(t.module)&&e.push(t.module);return e}}return e=assistant,(0,i.Z)(assistant,"ɵfac",(function(t){return new(t||e)(o.LFG(l.A),o.LFG(a.y),o.LFG(d.f),o.LFG(r.n),o.LFG(c.t))})),(0,i.Z)(assistant,"ɵprov",o.Yz7({token:e,factory:e.ɵfac,providedIn:"root"})),assistant})()},4505:(e,t,s)=>{"use strict";s.d(t,{y:()=>g});var i=s(1180),n=s(3144),o=s(7579),l=s(8505),a=s(4004),d=s(2242),r=s(3369),c=s(6625),u=s(5920),h=s(6163),m=s(4044);let g=(()=>{var e;class backend{constructor(e,t,s,n,l,a){(0,i.Z)(this,"http",void 0),(0,i.Z)(this,"broadcast",void 0),(0,i.Z)(this,"configurationService",void 0),(0,i.Z)(this,"session",void 0),(0,i.Z)(this,"modelutilities",void 0),(0,i.Z)(this,"modalservice",void 0),(0,i.Z)(this,"pendingRequestsCount",0),(0,i.Z)(this,"pendingCountChange$",new o.x),(0,i.Z)(this,"autoLogout",{}),(0,i.Z)(this,"reLogin",!1),(0,i.Z)(this,"reConnecting",!1),(0,i.Z)(this,"stageRequests",!1),(0,i.Z)(this,"stagedRequests",[]),(0,i.Z)(this,"httpErrorsToReport",[]),(0,i.Z)(this,"httpErrorReporting",!1),(0,i.Z)(this,"httpErrorReportingRetryTime",1e4),(0,i.Z)(this,"pendingRequests",{}),this.http=e,this.broadcast=t,this.configurationService=s,this.session=n,this.modelutilities=l,this.modalservice=a}getHeaders(){let e=this.session.getSessionHeader();return e=e.set("Accept","application/json"),e}prepareParams(e){let t=new n.LE;return e&&Object.keys(e).forEach((s=>{let i=e[s];null!=i&&(t="object"==typeof i?t.append(s,JSON.stringify(i)):"boolean"==typeof i?t.append(s,!0===i?"1":"0"):"number"==typeof i?t.append(s,i+""):t.append(s,i.toString()))})),t}getRequest(e="",t={},s){const i=new o.x;if(this.stageRequests)this.stageRequest("GET",e,{getParams:t},i);else{this.increasePendingCount();const n=this.http.get(this.configurationService.getBackendUrl()+"/"+encodeURI(e),{headers:this.getHeaders(),observe:"response",params:this.prepareParams(t)}).subscribe({next:e=>{this.decreasePendingCount(),delete this.pendingRequests[s],i.next(e.body),i.complete()},error:n=>{this.decreasePendingCount(),delete this.pendingRequests[s],0==this.handleError(n,e,"GET",{getParams:t},i)&&i.error(n)}});s&&(this.pendingRequests[s]=n)}return i.asObservable()}cancelPendingRequests(e){e.forEach((e=>{this.pendingRequests[e]&&(this.decreasePendingCount(),this.pendingRequests[e].unsubscribe(),delete this.pendingRequests[e])}))}getRawRequest(e="",t={},s="blob",i={}){let n=this.session.getSessionHeader();for(let e in i)n=n.set(e,i[e]);return this.increasePendingCount(),this.http.get(this.configurationService.getBackendUrl()+"/"+e,{headers:n,params:this.prepareParams(t),responseType:"blob"}).pipe((0,l.b)({next:()=>this.decreasePendingCount(),error:()=>this.decreasePendingCount()}))}postRequest(e="",t={},s={},i){const n=new o.x;if(this.stageRequests)this.stageRequest("GET",e,{getParams:t,body:s},n);else{this.increasePendingCount();let o=this.getHeaders();o=s?o.set("Content-Type","application/json"):o.set("Content-Type","application/x-www-form-urlencoded");const l=this.http.post(this.configurationService.getBackendUrl()+"/"+encodeURI(e),s,{headers:o,observe:"response",params:this.prepareParams(t)}).subscribe({next:e=>{this.decreasePendingCount(),delete this.pendingRequests[i],n.next(e.body),n.complete()},error:o=>{this.decreasePendingCount(),delete this.pendingRequests[i],this.handleError(o,e,"POST",{getParams:t,body:s},n)||n.error(o)}});i&&(this.pendingRequests[i]=l)}return n.asObservable()}patchRequest(e="",t={},s={},i){const n=new o.x;if(this.stageRequests)this.stageRequest("PATCH",e,{getParams:t,body:s},n);else{let o=this.getHeaders();o=s?o.set("Content-Type","application/json"):o.set("Content-Type","application/x-www-form-urlencoded"),this.increasePendingCount();const l=this.http.patch(this.configurationService.getBackendUrl()+"/"+encodeURI(e),s,{headers:o,observe:"response",params:this.prepareParams(t)}).subscribe({next:e=>{this.decreasePendingCount(),delete this.pendingRequests[i],n.next(e.body),n.complete()},error:o=>{this.decreasePendingCount(),delete this.pendingRequests[i],this.handleError(o,e,"POST",{getParams:t,body:s},n)||n.error(o)}});i&&(this.pendingRequests[i]=l)}return n.asObservable()}postRequestWithProgress(e="",t={},s={},i=null,l){const a=new o.x;if(this.stageRequests)this.stageRequest("POSTWITHPROGRESS",e,{getParams:t,body:s,progress:i},a);else{let o=this.getHeaders();o=s?o.set("Content-Type","application/json"):o.set("Content-Type","application/x-www-form-urlencoded"),null!==i&&i.next(0),this.increasePendingCount();const d=this.http.post(this.configurationService.getBackendUrl()+"/"+encodeURI(e),s,{headers:o,observe:"events",params:this.prepareParams(t),reportProgress:!!i}).subscribe({next:e=>{e.type===n.dt.UploadProgress?i.next(100*e.loaded/e.total):e.type===n.dt.Response&&(this.decreasePendingCount(),delete this.pendingRequests[l],a.next(e.body),a.complete())},error:n=>{this.decreasePendingCount(),delete this.pendingRequests[l],this.handleError(n,e,"POSTWITHPROGRESS",{getParams:t,body:s,progress:i},a)||a.error(n)}});l&&(this.pendingRequests[l]=d)}return a.asObservable()}getDownloadPostRequestFile(e="",t={},s={},i){let n=new o.x,l=this.getHeaders();l=l.set("Accept","*/*");const a=this.http.post(this.configurationService.getBackendUrl()+"/"+e,s,{headers:l,observe:"response",params:this.prepareParams(t),responseType:"blob"}).subscribe({next:e=>{delete this.pendingRequests[i];let t=window.URL.createObjectURL(e.body);n.next(t),n.complete()},error:o=>{delete this.pendingRequests[i],this.handleError(o,e,"POST",{getParams:t,body:s});let l=new FileReader;l.readAsText(o.error),l.onloadend=e=>{n.error(JSON.parse(l.result.toString()))}}});return i&&(this.pendingRequests[i]=a),n.asObservable()}getLinkToDownload(e,t="GET",s=null,i=null,n=null,l){let a=new o.x,d=this.getHeaders();d=d.set("Accept","*/*"),this.increasePendingCount();const r=this.http.request(t,this.configurationService.getBackendUrl()+"/"+e,{body:i,headers:d,observe:"response",params:this.prepareParams(s),responseType:"blob"}).subscribe({next:e=>{if(this.decreasePendingCount(),delete this.pendingRequests[l],200==e.status){let t=window.URL.createObjectURL(e.body);a.next(t),a.complete()}else a.error(e.statusText)},error:n=>{this.decreasePendingCount(),delete this.pendingRequests[l],this.handleError(n,e,t,{getParams:s,body:i}),a.error(n)}});return l&&(this.pendingRequests[l]=r),a.asObservable()}downloadFile(e,t=null,s=null){let i=new o.x;return this.getLinkToDownload(e.route,e.method,e.params,e.body,e.headers).subscribe({next:e=>{let n=e,o=document.createElement("a");document.body.appendChild(o),o.href=n,s&&(o.type=s),o.download=t,o.click(),o.remove(),i.next(),i.complete()},error:e=>i.error(e)}),i.asObservable()}putRequest(e="",t={},s={},i){const n=new o.x;if(this.stageRequests)this.stageRequest("PUT",e,{getParams:t,body:s},n);else{this.increasePendingCount();const o=this.http.put(this.configurationService.getBackendUrl()+"/"+e,s,{headers:this.getHeaders(),observe:"response",params:this.prepareParams(t)}).subscribe({next:e=>{this.decreasePendingCount(),delete this.pendingRequests[i],n.next(e.body),n.complete()},error:o=>{this.decreasePendingCount(),delete this.pendingRequests[i],this.handleError(o,e,"PUT",{getParams:t,body:s},n)||n.error(o)}});i&&(this.pendingRequests[i]=o)}return n.asObservable()}deleteRequest(e="",t={},s){const i=new o.x;if(this.stageRequests)this.stageRequest("DELETE",e,{getParams:t},i);else{this.increasePendingCount();const n=this.http.delete(this.configurationService.getBackendUrl()+"/"+e,{headers:this.getHeaders(),params:this.prepareParams(t)}).subscribe({next:e=>{this.decreasePendingCount(),delete this.pendingRequests[s],i.next(e||!0),i.complete()},error:n=>{this.decreasePendingCount(),delete this.pendingRequests[s],this.handleError(n,e,"DELETE",{getParams:t},i),i.error(n)}});s&&(this.pendingRequests[s]=n)}return i.asObservable()}handleError(e,t,s,i=null,n){switch(e.status){case 401:return this.stageRequest(s,t,i,n),this.stageRequests=!0,this.reLogin||(this.reLogin=!0,this.modalservice.openModal("GlobalReLogin",!1,null,!0).subscribe((e=>{e.instance.loggedin.subscribe((e=>{e&&(this.reLogin=!1,this.stageRequests=!1,this.processStagedRequests())}))}))),!0;case 0:return this.stageRequest(s,t,i,n),this.stageRequests=!0,this.reConnecting||(this.reConnecting=!0,this.modalservice.openModal("GlobalReConnect",!1,null,!0).subscribe((e=>{e.instance.connected.subscribe((e=>{e&&(this.reConnecting=!1,this.stageRequests=!1,this.processStagedRequests())}))}))),!0;case 403:return"noLegalNoticeAccepted"===e.error?.error?.errorCode&&(this.broadcast.broadcastMessage("backend.response.error","noLegalNoticeAccepted"),!0)}return!1}stageRequest(e,t,s,i,n){this.stagedRequests.push({method:e,route:t,data:s,responseSubject:i,refID:n})}processStagedRequests(){for(let e of this.stagedRequests)switch(e.method){case"GET":this.getRequest(e.route,e.data.getParams,e.refID).subscribe({next:t=>e.responseSubject.next(t),error:t=>e.responseSubject.error(t)});break;case"POST":this.postRequest(e.route,e.data.getParams,e.data.body,e.refID).subscribe({next:t=>e.responseSubject.next(t),error:t=>e.responseSubject.error(t)});break;case"PATCH":this.patchRequest(e.route,e.data.getParams,e.data.body,e.refID).subscribe({next:t=>e.responseSubject.next(t),error:t=>e.responseSubject.error(t)});break;case"POSTWITHPROGRESS":this.postRequestWithProgress(e.route,e.data.getParams,e.data.body,e.data.progress,e.refID).subscribe({next:t=>e.responseSubject.next(t),error:t=>e.responseSubject.error(t)});break;case"PUT":this.putRequest(e.route,e.data.getParams,e.data.body,e.refID).subscribe({next:t=>e.responseSubject.next(t),error:t=>e.responseSubject.error(t)});break;case"DELETE":this.deleteRequest(e.route,e.data.getParams,e.refID).subscribe({next:t=>e.responseSubject.next(t),error:t=>e.responseSubject.error(t)})}this.stagedRequests=[]}reportError(e,t,s,i){this.httpErrorsToReport.push({clientTime:(new Date).toISOString(),clientInfo:{sessionId:this.session.authData.sessionId,userId:this.session.authData.userId,userName:this.session.authData.userName},route:t,method:s,getParams:i.getParams?i.getParams:null,error:e,body:i.body?i.body:null}),this.httpErrorReporting||(this.httpErrorReporting=!0,window.setTimeout((()=>this.errorsToBackend()),this.httpErrorReportingRetryTime))}errorsToBackend(){this.httpErrorsToReport.length&&this.postRequest("system/httperrors",null,{errors:this.httpErrorsToReport}).subscribe({next:()=>{this.httpErrorsToReport.length=0,this.httpErrorReporting=!1},error:e=>{this.httpErrorReporting=!0,window.setTimeout((()=>this.errorsToBackend()),this.httpErrorReportingRetryTime)}})}increasePendingCount(){this.pendingRequestsCount++,this.pendingCountChange$.next(this.pendingRequestsCount)}decreasePendingCount(){this.pendingRequestsCount--,this.pendingCountChange$.next(this.pendingRequestsCount)}get(e,t,s="",i){let n={};return s&&(n.trackaction=s),this.getRequest("module/"+e+"/"+t,n).pipe((0,a.U)((t=>{for(let s in t)t[s]=this.backend2spice(e,s,t[s]);return t})))}getDuplicates(e,t,s){return this.getRequest("module/"+e+"/"+t+"/duplicates",null,s)}checkDuplicates(e,t,s){return this.postRequest("module/"+e+"/duplicates",{},t,s)}getList(e,t=[],s={},i){s.start&&s.start,s.limit&&s.limit;let n=s;return n.searchfields=s.searchfields,n.offset=s.start?s.start:0,n.limit=s.limit?s.limit:25,s.listid&&(n.listid=s.listid),t.length>0&&(n.sortfields=t),this.getRequest("module/"+e,n,i).pipe((0,a.U)((t=>{try{for(let s in t.list)for(let i in t.list[s])t.list[s][i]=this.backend2spice(e,i,t.list[s][i]);return t}catch(e){return{aggregations:[],buckets:[],source:[],totalcount:[],list:[]}}})))}save(e,t,s,i=null,n=null,o){return this.postRequestWithProgress("module/"+e+"/"+t,{templateId:n},this.modelutilities.spiceModel2backend(e,s),i,o).pipe((0,a.U)((t=>this.modelutilities.backendModel2spice(e,t))))}backend2spice(e,t,s){return this.modelutilities.backend2spice(e,t,s)}spice2backend(e,t,s){return this.modelutilities.spice2backend(e,t,s)}}return e=backend,(0,i.Z)(backend,"ɵfac",(function(t){return new(t||e)(d.LFG(n.eN),d.LFG(r.f),d.LFG(c.C),d.LFG(u.n),d.LFG(h.A),d.LFG(m.o))})),(0,i.Z)(backend,"ɵprov",d.Yz7({token:e,factory:e.ɵfac,providedIn:"root"})),backend})()},3369:(e,t,s)=>{"use strict";s.d(t,{f:()=>o});var i=s(1180),n=s(2242);let o=(()=>{var e;class broadcast{constructor(){(0,i.Z)(this,"message$",new n.vpe)}broadcastMessage(e,t={}){this.message$.emit({messagetype:e,messagedata:t})}}return e=broadcast,(0,i.Z)(broadcast,"ɵfac",(function(t){return new(t||e)})),(0,i.Z)(broadcast,"ɵprov",n.Yz7({token:e,factory:e.ɵfac,providedIn:"root"})),broadcast})()},6625:(e,t,s)=>{"use strict";s.d(t,{C:()=>m});var i=s(1180),n=s(2242),o=s(1135),l=s(4338),a=s(3144),d=s(5920),r=s(3369),c=s(6550),u=s(9086),h=s(3348);let m=(()=>{var e;class configurationService{constructor(e,t,s,l,a,d){(0,i.Z)(this,"http",void 0),(0,i.Z)(this,"session",void 0),(0,i.Z)(this,"broadcast",void 0),(0,i.Z)(this,"title",void 0),(0,i.Z)(this,"storeService",void 0),(0,i.Z)(this,"router",void 0),(0,i.Z)(this,"enableinstall",!1),(0,i.Z)(this,"initialized",!1),(0,i.Z)(this,"reloading",!1),(0,i.Z)(this,"data",{backendUrl:"api",backendextensions:{},systemparameters:{},theme:{},name:"SpiceCRM",displayloginsidebar:!1}),(0,i.Z)(this,"assets",[]),(0,i.Z)(this,"appdata",{}),(0,i.Z)(this,"loaded$",void 0),(0,i.Z)(this,"datachanged$",new n.vpe),(0,i.Z)(this,"keysLoaderTaskID",{}),(0,i.Z)(this,"storeDBName","config"),this.http=e,this.session=t,this.broadcast=s,this.title=l,this.storeService=a,this.router=d,this.loaded$=new o.X(!1),this.getSysinfo(),this.storeService.initializeStores(this.storeDBName,["appdata"],"id").then((()=>this.storeService.readStoreAll(this.storeDBName,"appdata"))).then((e=>{e.forEach((e=>this.appdata[e.id]=e.data))})),this.broadcast.message$.subscribe((e=>this.handleLogout(e)))}get systemName(){return this.data.name?this.data.name:"SpiceCRM"}handleLogout(e){"logout"==e.messagetype&&this.reset()}clearDB(){this.storeService.clearDB(this.storeDBName,["appdata"])}reset(){this.appdata={},this.clearDB()}getBackendUrl(){return this.data.backendUrl}getFrontendUrl(){return void 0!==this.data.frontendUrl?this.data.frontendUrl:""}getUser(){return this.data.user}getPassword(){return this.data.password}getSysinfo(){this.reloading=!0;let e=this.http.get(this.getBackendUrl()+"/sysinfo");return e.subscribe({next:e=>{e&&(this.data.languages=e.languages,this.data.backendextensions=e.extensions,this.data.systemparameters=e.systemsettings,this.data.socket_frontend=e.socket_frontend,this.data.unique_key=e.unique_key,this.data.displayloginsidebar=e.displayloginsidebar,this.data.loginSidebarUrl=e.loginSidebarUrl,this.data.allowForgotPass=e.allowForgotPass,this.data.name=e.name?e.name:"SpiceCRM",this.loaded$.next(!0)),this.initialized=!0,this.reloading=!1,e.assets&&this.setAssets(e.assets),this.setFavIcon(),this.title.setTitle(this.systemName)},error:e=>{"503"==e.status&&"crmNotInstalled"==e.error.error.errorCode&&(this.enableinstall=!0,this.router.config.unshift({path:"install",component:l.s}),this.router.navigate(["/install"]))}}),e}getAsset(e){if(this.assets&&this.assets.find((t=>t.assetkey==e))?.assetvalue)return this.assets.find((t=>t.assetkey==e)).assetvalue}setAsset(e,t){let s=this.assets.findIndex((t=>t.assetkey==e));s>=0?this.assets[s].assetvalue=t:this.assets.push({assetkey:e,assetvalue:t}),this.loaded$.next(!0)}setAssets(e,t=!1){this.assets=e,this.setColors(),t&&this.loaded$.next(!0)}getSystemParamater(e){try{return this.data.systemparameters[e]}catch(e){return!1}}checkCapability(e){return this.data.backendextensions&&this.data.backendextensions.hasOwnProperty(e)}getCapabilityConfig(e){try{return this.data.backendextensions[e]&&this.data.backendextensions[e].config?this.data.backendextensions[e].config:{}}catch(e){return{}}}hasCapabilityConfig(e){return this.data.backendextensions[e]&&this.data.backendextensions[e].config&&Object.keys(this.data.backendextensions[e].config).length>0}setData(e,t,s=!0){this.appdata[e]=t,this.storeService.writeStore(this.storeDBName,"appdata",{id:e,data:t}),this.datachanged$.emit(e),s&&this.keysLoaderTaskID[e]&&this.storeService.readStore("loaddata","loadtaskdata",this.keysLoaderTaskID[e]).subscribe({next:t=>{t[e]=this.appdata[e],this.storeService.writeStore("loaddata","loadtaskdata",{id:this.keysLoaderTaskID[e],data:t})}})}setDataFromStore(e,t,s){this.keysLoaderTaskID[t]=e,this.setData(t,s,!1)}getData(e){return!!this.appdata[e]&&this.appdata[e]}updateThemeColors(){let e,t=["color-white","color-grey-3","color-grey-9","color-grey-13","brand-background-primary","brand-primary","brand-primary-active","brand-accessible","brand-accessible-active","brand-header-contrast-cool","brand-text-link","color-background-inverse","color-border-inverse","color-background-success","color-background-success-dark","color-text-link-active","color-progressbar_item-completed","brand-primary-transparent","color-background-alt-inverse","color-border-brand","sds-c-button-brand-color-background","sds-c-button-neutral-color-background-hover","sds-c-button-brand-color-border-hover","sds-c-button-brand-color-background-active","sds-c-button-brand-color-border-active","sds-c-button-brand-color-background-hover","sds-c-input-shadow-focus","sds-c-textarea-shadow-focus","sds-c-select-shadow-focus","sds-c-button-text-color-hover","sds-c-icon-color-foreground"],s=this.getCapabilityConfig("theme");try{e=JSON.parse(s.colors)}catch(t){e={}}for(let s of t)document.documentElement.style.setProperty("--"+s,e[s]?e[s]:null);let i=getComputedStyle(document.documentElement).getPropertyValue("--brand-primary");i&&document.querySelector('meta[name="theme-color"]').setAttribute("content",i)}setFavIcon(){let e=document.querySelectorAll("link[ rel ~= 'icon' i]")[0];if(e){let t=this.getCapabilityConfig("theme");t.icon_image?e.setAttribute("href","data:"+t.icon_image):e.setAttribute("href","./config/favicon")}}setColors(){if(!this.getAsset("colors"))return;let e=JSON.parse(this.getAsset("colors"));for(let t in e)document.documentElement.style.setProperty("--"+t,e[t])}}return e=configurationService,(0,i.Z)(configurationService,"ɵfac",(function(t){return new(t||e)(n.LFG(a.eN),n.LFG(d.n),n.LFG(r.f),n.LFG(c.Dx),n.LFG(u.d),n.LFG(h.F0))})),(0,i.Z)(configurationService,"ɵprov",n.Yz7({token:e,factory:e.ɵfac,providedIn:"root"})),configurationService})()},5547:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});var i=s(1180),n=s(2242),o=s(6625),l=s(4505);let a=(()=>{var e;class currency{constructor(e,t){(0,i.Z)(this,"configuration",void 0),(0,i.Z)(this,"backend",void 0),(0,i.Z)(this,"currenciesFromBackend",[]),this.configuration=e,this.backend=t}get currencies(){return this.configuration.getData("currencies")??[]}getCurrencies(){let e=[];for(let t of this.currencies)e.push({id:t.id,name:t.name,iso:t.iso,symbol:t.symbol});return e}getCurrencySmbol(e){let t=this.currencies.find((t=>t.id==e));return t?t.symbol:""}}return e=currency,(0,i.Z)(currency,"ɵfac",(function(t){return new(t||e)(n.LFG(o.C),n.LFG(l.y))})),(0,i.Z)(currency,"ɵprov",n.Yz7({token:e,factory:e.ɵfac,providedIn:"root"})),currency})()},788:(e,t,s)=>{"use strict";s.d(t,{m:()=>a});var i=s(1180),n=s(2242),o=s(6163),l=s(3369);let a=(()=>{var e;class dockedComposer{constructor(e,t){(0,i.Z)(this,"modelutilities",void 0),(0,i.Z)(this,"broadcast",void 0),(0,i.Z)(this,"composers",[]),(0,i.Z)(this,"hiddenComposers",[]),this.modelutilities=e,this.broadcast=t,this.broadcast.message$.subscribe((e=>this.handleLogout(e)))}handleLogout(e){"logout"==e.messagetype&&(this.composers=[],this.hiddenComposers=[])}addComposer(e,t,s){t?(t.data.acl=t.acl,this.composers.splice(0,0,{module:e,id:t.id,name:t.getField("summary_text"),model:{module:e,id:t.id,data:t.data},loadexpanded:s})):this.composers.splice(0,0,{module:e,id:this.modelutilities.generateGuid(),name:"",model:{},loadexpanded:s})}focusComposer(e){this.composers.some(((t,s)=>{if(t.id==e){let e=this.composers.splice(s,1);return this.composers.unshift(e.shift()),!0}}))}get maxComposers(){return Math.floor((window.innerWidth-70)/500)}}return e=dockedComposer,(0,i.Z)(dockedComposer,"ɵfac",(function(t){return new(t||e)(n.LFG(o.A),n.LFG(l.f))})),(0,i.Z)(dockedComposer,"ɵprov",n.Yz7({token:e,factory:e.ɵfac,providedIn:"root"})),dockedComposer})()},4376:(e,t,s)=>{"use strict";s.d(t,{G:()=>r});var i=s(1180),n=s(2242),o=s(4505),l=s(3369),a=s(6625),d=s(5920);let r=(()=>{var e;class favorite{constructor(e,t,s,n){(0,i.Z)(this,"backend",void 0),(0,i.Z)(this,"broadcast",void 0),(0,i.Z)(this,"configuration",void 0),(0,i.Z)(this,"session",void 0),(0,i.Z)(this,"isEnabled",!1),(0,i.Z)(this,"module",""),(0,i.Z)(this,"id",""),this.backend=e,this.broadcast=t,this.configuration=s,this.session=n,this.broadcast.message$.subscribe((e=>this.handleMessage(e)))}get favorites(){let e=this.configuration.getData("favorites");return e||[]}get isFavorite(){return!!this.favorites.find((e=>e.module_name==this.module&&e.item_id==this.id))}handleMessage(e){if("model.save"===e.messagetype)this.favorites.some(((t,s)=>{if(t.module_name===e.messagedata.module&&t.item_id==e.messagedata.id)return this.favorites[s].item_summary=e.messagedata.data.summary_text,!0}))}enable(e,t){this.isEnabled=!0,this.module=e,this.id=t}disable(){this.isEnabled=!1,this.module=void 0,this.id=void 0}getFavorites(e){return this.favorites.filter((t=>t.module_name===e))}setFavorite(){this.backend.postRequest("common/spicefavorites/"+this.module+"/"+this.id).subscribe((e=>{this.favorites.splice(0,0,{item_id:e.id,module_name:e.module,item_summary:e.summary_text,data:e.data})}))}deleteFavorite(e,t){e||(e=this.module),t||(t=this.id),this.backend.deleteRequest("common/spicefavorites/"+e+"/"+t).subscribe((s=>{this.favorites.some(((s,i)=>{if(s.module_name===e&&s.item_id===t)return this.favorites.splice(i,1),!0}))}))}}return e=favorite,(0,i.Z)(favorite,"ɵfac",(function(t){return new(t||e)(n.LFG(o.y),n.LFG(l.f),n.LFG(a.C),n.LFG(d.n))})),(0,i.Z)(favorite,"ɵprov",n.Yz7({token:e,factory:e.ɵfac,providedIn:"root"})),favorite})()},6701:(e,t,s)=>{"use strict";s.d(t,{O:()=>o});var i=s(1180),n=s(2242);let o=(()=>{var e;class fielderrorgrouping{constructor(){(0,i.Z)(this,"fieldsWithErrors",{}),(0,i.Z)(this,"nrErrorsFields",0),(0,i.Z)(this,"change$",new n.vpe)}setError(e,t){let s=!1;t?this.fieldsWithErrors[e]||(this.fieldsWithErrors[e]=!0,this.nrErrorsFields++,s=!0):this.fieldsWithErrors[e]&&(delete this.fieldsWithErrors[e],this.nrErrorsFields--,s=!0),s&&this.change$.emit(this.nrErrorsFields)}hasErrors(){return this.nrErrorsFields||!1}}return e=fielderrorgrouping,(0,i.Z)(fielderrorgrouping,"ɵfac",(function(t){return new(t||e)})),(0,i.Z)(fielderrorgrouping,"ɵprov",n.Yz7({token:e,factory:e.ɵfac})),fielderrorgrouping})()},3917:(e,t,s)=>{"use strict";s.d(t,{M:()=>o});var i=s(1180),n=s(2242);let o=(()=>{var e;class footer{constructor(){(0,i.Z)(this,"footercontainer",null),(0,i.Z)(this,"modalcontainer",null),(0,i.Z)(this,"modalbackdrop",null),(0,i.Z)(this,"visibleFooterHeight",0)}}return e=footer,(0,i.Z)(footer,"ɵfac",(function(t){return new(t||e)})),(0,i.Z)(footer,"ɵprov",n.Yz7({token:e,factory:e.ɵfac,providedIn:"root"})),footer})()},2487:(e,t,s)=>{"use strict";s.d(t,{Q:()=>h});var i=s(1180),n=s(7579),o=s(2242),l=s(4505),a=s(6625),d=s(5920),r=s(6163),c=s(4154),u=s(5329);let h=(()=>{var e;class fts{constructor(e,t,s,n,o,l){(0,i.Z)(this,"backend",void 0),(0,i.Z)(this,"configurationService",void 0),(0,i.Z)(this,"session",void 0),(0,i.Z)(this,"modelutilities",void 0),(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"httpRequestsRefID",window._.uniqueId("fts_http_ref_")),(0,i.Z)(this,"hits",[]),(0,i.Z)(this,"found",0),(0,i.Z)(this,"runningsearch",void 0),(0,i.Z)(this,"runningmodulesearch",void 0),(0,i.Z)(this,"searchTerm",""),(0,i.Z)(this,"searchSort",{}),(0,i.Z)(this,"searchOwner",!1),(0,i.Z)(this,"searchGeo",{}),(0,i.Z)(this,"searchAggregates",{}),(0,i.Z)(this,"searchModules",[]),(0,i.Z)(this,"modulefilter",""),(0,i.Z)(this,"buckets",{}),(0,i.Z)(this,"moduleSearchresults",[]),(0,i.Z)(this,"lastSearchParams",{}),(0,i.Z)(this,"gloablSearchResults",{}),this.backend=e,this.configurationService=t,this.session=s,this.modelutilities=n,this.metadata=o,this.language=l,this.getSearchModules()}get loadedSearchModules(){return this.searchModules.filter((e=>this.metadata.checkModuleAcl(e,"list")))}transformHits(e){let t=[];for(let s of e)t.push(this.tranformHit(s));return t}tranformHit(e){for(let t in e._source)e._source.hasOwnProperty(t)&&"string"==typeof e._source[t]&&(e._source[t]=e._source[t]);return e}search(e,t=5){this.searchTerm=e,this.runningsearch&&this.runningsearch.unsubscribe(),this.resetData();const s=this.httpRequestsRefID+"_search";this.backend.cancelPendingRequests([s]),this.runningsearch=this.backend.postRequest("search",{},{size:t,searchterm:e,modules:this.loadedSearchModules.join(",")},s).subscribe((e=>{this.hits=e.hits.hits,this.found=e.hits.total,this.runningsearch=void 0}))}searchByModules(e){let t=new n.x;e.modules&&0!==e.modules.length||(e.modules=this.loadedSearchModules),e.searchterm&&-1!=e.searchterm.indexOf("%")&&(e.searchterm=e.searchterm.replace(/%/g,"*")),e.searchterm=e.searchterm.trim(),this.searchTerm=e.searchterm,this.searchAggregates=e.aggregates,this.searchSort=e.sortparams,this.searchGeo=e.searchgeo,this.searchOwner=e.owner,this.modulefilter=e.modulefilter,this.buckets=e.buckets,this.runningmodulesearch&&this.runningmodulesearch.unsubscribe();const s=this.httpRequestsRefID+"_search_by_modules";return this.backend.cancelPendingRequests([s]),this.runningmodulesearch=this.backend.postRequest("search",{},{modules:e.modules.length>0?e.modules.join(","):"",searchterm:e.searchterm,searchgeo:e.searchgeo,records:e.size,owner:e.owner,aggregates:this.searchAggregates,sort:this.searchSort,modulefilter:e.modulefilter,buckets:e.buckets},s).subscribe((s=>{this.moduleSearchresults=[];for(let e in s)s.hasOwnProperty(e)&&this.moduleSearchresults.push({module:e,data:{hits:this.transformHits(s[e].hits),max_score:s[e].max_score,total:s[e].total}});this.moduleSearchresults.sort(((e,t)=>{let s=parseFloat(e.data.max_score),i=parseFloat(t.data.max_score);return isNaN(s)&&isNaN(i)?1:isNaN(i)?-1:isNaN(s)||i>s?1:-1})),this.lastSearchParams=e,this.runningmodulesearch=void 0,t.next(s),t.complete()})),t.asObservable()}export(e,t,s,i={},o={},l=!1){let a=new n.x;return-1!=e.indexOf("%")&&(e=e.replace(/%/g,"*")),e=e.trim(),this.searchTerm=e,this.searchAggregates=i,this.searchSort=o,this.runningmodulesearch=this.backend.getDownloadPostRequestFile("search/export",{},{module:t,searchterm:e,fields:s,owner:l,aggregates:i,sort:this.searchSort},this.httpRequestsRefID).subscribe((e=>{a.next(e),a.complete()})),a.asObservable()}loadMore(e){let t=new n.x;if(!this.runningmodulesearch){if(e){let t=!1;for(let s of e.bucketitems)(!s.total||s.total>s.items)&&(t=!0);if(!t)return}else if(this.moduleSearchresults[0].data.hits.length>=this.moduleSearchresults[0].data.total)return;return this.runningmodulesearch=this.backend.postRequest("search",{},{modules:this.lastSearchParams.modules.length>0?this.lastSearchParams.modules.join(","):"",searchterm:this.lastSearchParams.searchterm,aggregates:this.searchAggregates,sort:this.searchSort,owner:this.searchOwner,records:this.lastSearchParams.size,start:this.moduleSearchresults[0].data.hits.length,modulefilter:this.modulefilter,buckets:e},this.httpRequestsRefID).subscribe((e=>{for(let t of this.lastSearchParams.modules)for(let s of e[t].hits)this.moduleSearchresults[0].data.hits.push(this.tranformHit(s));this.runningmodulesearch=void 0,t.next(e),t.complete()})),t.asObservable()}}getSearchModules(){this.searchModules=this.metadata.getGlobalSearchModules().sort(((e,t)=>this.language.getModuleName(e).localeCompare(this.language.getModuleName(t))))}resetData(){this.found=0,this.hits=[]}}return e=fts,(0,i.Z)(fts,"ɵfac",(function(t){return new(t||e)(o.LFG(l.y),o.LFG(a.C),o.LFG(d.n),o.LFG(r.A),o.LFG(c.Pu),o.LFG(u.d))})),(0,i.Z)(fts,"ɵprov",o.Yz7({token:e,factory:e.ɵfac,providedIn:"root"})),fts})()},3441:(e,t,s)=>{"use strict";s.d(t,{_:()=>a});var i=s(1180),n=s(7579),o=s(2242),l=s(4044);let a=(()=>{var e;class helper{constructor(e){(0,i.Z)(this,"modalservice",void 0),(0,i.Z)(this,"dialog",null),(0,i.Z)(this,"_base64_keyStr","ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="),this.modalservice=e}getRand(){return Math.random()}S4(){return(65536*(1+this.getRand())|0).toString(16).substring(1)}generateGuid(){return this.S4()+this.S4()+"-"+this.S4()+"-"+this.S4()+"-"+this.S4()+"-"+this.S4()+this.S4()+this.S4()}confirm(e,t){let s=new n.x;return this.modalservice.confirm(t,e).subscribe((e=>{s.next(e),s.complete()})),s.asObservable()}shuffle(e){let t,s,i=e.length;for(;i;)s=Math.floor(Math.random()*i--),t=e[i],e[i]=e[s],e[s]=t;return e}encodeBase64(e){let t,s,i,n,o,l,a,d="",r=0;for(e=this._utf8_encodeBase64(e);r<e.length;)t=e.charCodeAt(r++),s=e.charCodeAt(r++),i=e.charCodeAt(r++),n=t>>2,o=(3&t)<<4|s>>4,l=(15&s)<<2|i>>6,a=63&i,isNaN(s)?l=a=64:isNaN(i)&&(a=64),d=d+this._base64_keyStr.charAt(n)+this._base64_keyStr.charAt(o)+this._base64_keyStr.charAt(l)+this._base64_keyStr.charAt(a);return d}decodeBase64(e){let t,s,i,n,o,l,a,d="",r=0;for(e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");r<e.length;)n=this._base64_keyStr.indexOf(e.charAt(r++)),o=this._base64_keyStr.indexOf(e.charAt(r++)),l=this._base64_keyStr.indexOf(e.charAt(r++)),a=this._base64_keyStr.indexOf(e.charAt(r++)),t=n<<2|o>>4,s=(15&o)<<4|l>>2,i=(3&l)<<6|a,d+=String.fromCharCode(t),64!=l&&(d+=String.fromCharCode(s)),64!=a&&(d+=String.fromCharCode(i));return d=this._utf8_decodeBase64(d),d}_utf8_encodeBase64(e){let t="";e=e.replace(/\r\n/g,"\n");for(let s=0;s<e.length;s++){let i=e.charCodeAt(s);i<128?t+=String.fromCharCode(i):i>127&&i<2048?(t+=String.fromCharCode(i>>6|192),t+=String.fromCharCode(63&i|128)):(t+=String.fromCharCode(i>>12|224),t+=String.fromCharCode(i>>6&63|128),t+=String.fromCharCode(63&i|128))}return t}_utf8_decodeBase64(e){let t="",s=0,i=0,n=0,o=0;for(;s<e.length;)i=e.charCodeAt(s),i<128?(t+=String.fromCharCode(i),s++):i>191&&i<224?(n=e.charCodeAt(s+1),t+=String.fromCharCode((31&i)<<6|63&n),s+=2):(n=e.charCodeAt(s+1),o=e.charCodeAt(s+2),t+=String.fromCharCode((15&i)<<12|(63&n)<<6|63&o),s+=3);return t}determineFileIcon(e){if(e){let t,s;if([t,s]=e.split("/"),!t)return"unknown";switch(t){case"image":case"png":case"jpeg":return"image";case"text":return"html"===s?"html":"txt";case"audio":return"audio";case"video":return"video"}switch(s){case"xml":return"xml";case"pdf":return"pdf";case"vnd.ms-excel":case"vnd.openxmlformats-officedocument.spreadsheetml.sheet":return"excel";case"vnd.openxmlformats-officedocument.wordprocessingml.document":case"vnd.oasis.opendocument.text":return"word";case"vnd.oasis.opendocument.presentation":case"vnd.openxmlformats-officedocument.presentationml.presentation":return"ppt";case"x-zip-compressed":return"zip";case"x-msdownload":return"exe"}}return"unknown"}humanFileSize(e,t=1024){let s=e;if(Math.abs(e)<t)return s+" B";let i=["kB","MB","GB","TB","PB","EB","ZB","YB"],n=-1;do{s/=t,++n}while(Math.abs(s)>=t&&n<i.length-1);return s.toFixed(1)+" "+i[n]}generatePassword(e){let t=[],s=[];["upper","number","special","lower"].forEach((t=>{e["one"+t]&&s.push(t)}));let i=e.minpwdlength;return s.forEach(((e,n)=>{let o;o=n===s.length-1?i:Math.floor(Math.random()*(i-(s.length-n-1)))+1;for(let s=0;s<o;s++)t.push(this.pwRandomChar(e));i-=o})),this.shuffle(t).join("")}pwRandomChar(e){let t="!\"#$%&'()*+,-./:;<=>?@[\\]^_{|}~";switch(e){case"upper":return String.fromCharCode(Math.floor(26*Math.random())+65);case"lower":return String.fromCharCode(Math.floor(26*Math.random())+97);case"special":return t.charAt(Math.floor(31*Math.random()));case"number":return String.fromCharCode(Math.floor(10*Math.random())+48)}}}return e=helper,(0,i.Z)(helper,"ɵfac",(function(t){return new(t||e)(o.LFG(l.o))})),(0,i.Z)(helper,"ɵprov",o.Yz7({token:e,factory:e.ɵfac,providedIn:"root"})),helper})()},5329:(e,t,s)=>{"use strict";s.d(t,{d:()=>h});var i=s(1180),n=s(2242),o=s(7579),l=s(3144),a=s(6625),d=s(5920),r=s(3369),c=s(9086),u=s(4154);let h=(()=>{var e;class language{constructor(e,t,s,o,l,a){(0,i.Z)(this,"http",void 0),(0,i.Z)(this,"configurationService",void 0),(0,i.Z)(this,"session",void 0),(0,i.Z)(this,"broadcast",void 0),(0,i.Z)(this,"storeService",void 0),(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"languagedata",{}),(0,i.Z)(this,"_currentlanguage",""),(0,i.Z)(this,"currentlanguage$",new n.vpe),(0,i.Z)(this,"inlineEditEnabled",!1),(0,i.Z)(this,"storeDBName","language"),this.http=e,this.configurationService=t,this.session=s,this.broadcast=o,this.storeService=l,this.metadata=a,this.storeService.initializeStores(this.storeDBName,["languages","applang","applist"],"language_code"),this.broadcast.message$.subscribe((e=>this.handleLogout(e)))}set currentlanguage(e){e||(e=this.getDefaultLanguage()),this._currentlanguage=e,this.storeService.readStoreAll(this.storeDBName,"languages").then((t=>{t.forEach((t=>{t.isCurrent=e==t.language_code,this.storeService.writeStore(this.storeDBName,"languages",{language_code:t.language_code,data:t})}))}))}get currentlanguage(){return this._currentlanguage}handleLogout(e){"logout"==e.messagetype&&this.clearDB()}clearDB(){this.storeService.clearDB(this.storeDBName,["languages","applang","applist"])}getLanguage(e){this.storeService.readStoreAll(this.storeDBName,"languages").then((t=>{this.languagedata.languages={available:t},this._currentlanguage=t.find((e=>e.isCurrent))?.language_code,this.storeService.readStore(this.storeDBName,"applang",this.currentlanguage).subscribe({next:e=>this.languagedata.applang=e,error:()=>!1}),this.storeService.readStore(this.storeDBName,"applist",this.currentlanguage).subscribe({next:e=>this.languagedata.applist=e,error:()=>!1}),e.next("getLanguage")})).catch((()=>{this.loadLanguage().subscribe((()=>{this.languagedata.languages.available.forEach((e=>{e.isCurrent=e.language_code==this.currentlanguage,this.storeService.writeStore(this.storeDBName,"languages",{language_code:e.language_code,data:e})})),e.next("getLanguage")}))}))}switchLanguage(e){let t=new o.x;return this.currentlanguage=e,this.storeService.readStore(this.storeDBName,"applang",e).subscribe({next:s=>{this.languagedata.applang=s,this.storeService.readStore(this.storeService,"applist",e).subscribe({next:e=>{this.languagedata.applist=e,this.currentlanguage$.emit(this.currentlanguage),t.next(!0),t.complete()},error:()=>{this.currentlanguage$.emit(this.currentlanguage),t.next(!0),t.complete()}})},error:()=>{this.loadLanguage().subscribe({next:()=>{t.next(!0),t.complete()}})}}),t.asObservable()}loadLanguage(){let e=new o.x,t=this.configurationService.getBackendUrl()+"/system/language";return this.currentlanguage&&(t+="/"+this.currentlanguage),this.http.get(t,{headers:this.session.getSessionHeader(),observe:"response"}).subscribe({next:t=>{let s=t.body;this.languagedata=s,this.currentlanguage||(this.currentlanguage=s.language),this.storeService.writeStore(this.storeDBName,"applang",{language_code:this.currentlanguage,data:this.languagedata.applang}),this.storeService.writeStore(this.storeDBName,"applist",{language_code:this.currentlanguage,data:this.languagedata.applist}),this.currentlanguage$.emit(this.currentlanguage),e.next(!0),e.complete()}}),e.asObservable()}getLabel(e,t="",s="default"){try{return""!=t&&void 0!==this.languagedata.mod&&null!=this.languagedata.mod[t]&&this.languagedata.mod[t][e]?this.languagedata.mod[t][e]||e:this.getAppLanglabel(e,s)}catch(t){return e}}getAppLanglabel(e,t="default"){return this.languagedata.applang[e]?"object"==typeof this.languagedata.applang[e]&&this.languagedata.applang[e][t]?this.getNestedLabel(e,t):this.getNestedLabel(e):e}getNestedLabel(e,t="default"){let s;if(this.languagedata.applang[e]&&(_.isObject(this.languagedata.applang[e])?s=this.languagedata.applang[e][t]?this.languagedata.applang[e][t]:this.languagedata.applang[e].default:_.isString(this.languagedata.applang[e])&&(s=this.languagedata.applang[e])),s){let e=this.getNestedTags(s);if(e)for(let i of e)s=s.replace("{LABEL:"+i+"}",this.getNestedLabel(i,t))}return s||e}getNestedTags(e){let t=e.indexOf("{LABEL:"),s=[];for(;t>=0;)if(t>=0){let i=e.indexOf("}",t);i>=0?(s.push(e.substring(t+7,i)),t=e.indexOf("{LABEL:",i)):t=-1}return s}getLabelFormatted(e,t,s="default"){let i;i=Array.isArray(t)?t:new Array(t);let n=0;return this.getLabel(e,"",s).replace(/%(s|%)/g,((...e)=>"s"===e[1]?i[n++]:"%"===e[1]?"%":e[0]))}getModuleName(e,t=!1,s="default"){try{let i=this.metadata.getModuleDefs(e);if(t){if(i.singular_label)return this.getLabel(i.singular_label,"",s);if(this.languagedata.applist.moduleListSingular[e])return this.languagedata.applist.moduleListSingular[e]||e}else if(i.module_label)return this.getLabel(i.module_label,"",s);return this.languagedata.applist.moduleList[e]||e}catch(t){return e}}getModuleCombinedLabel(e,t){return t?this.languagedata.applang[e+"_"+t.toUpperCase()]?this.getLabel(e+"_"+t.toUpperCase()):this.getLabel(e)+" "+this.getModuleName(t):"no module defined"}getFieldDisplayName(e,t,s={},i="default"){let n="";if(s.label)if(s.label.indexOf(":")>0){let e=s.label.split(":");n=this.getLabel(e[1],e[0])}else n=this.getLabel(s.label,e,i);else n=this.getLabel(this.metadata.getFieldlabel(e,t),e,i);return""===n?s.label?s.label:t:n}getFieldHelpText(e,t,s={}){let i="";if(s.popupHelp)if(s.popupHelp.indexOf(":")>0){let e=s.popupHelp.split(":");i=this.getLabel(e[1],e[0],"default")}else i=this.getLabel(s.popupHelp,e,"default");else i=this.getLabel(this.metadata.getFieldHelpText(e,t),e,"default");return""===i?s.popupHelp?s.popupHelp:t:i}getFieldDisplayOptions(e,t,s=!1){let i=this.metadata.getFieldOptions(e,t);if(!1===i)return[];try{let e=this.languagedata.applist[i];if(s){let t=e;e=[];for(let s in t)e.push({value:s,display:t[s]})}return e}catch(e){return[]}}getDisplayOptions(e,t=!1){let s=this.languagedata.applist[e];if(t){let e=s;s=[];for(let t in e)s.push({value:t,display:e[t]})}return s}getFieldDisplayOptionValue(e,t,s){let i=this.metadata.getFieldOptions(e,t);if(!1===i)return s;try{return this.languagedata.applist[i][s]?this.languagedata.applist[i][s]:s}catch(e){return s}}getAvialableLanguages(e=!1){let t=[];for(let s of this.languagedata.languages.available)(!e||s.system_language&&0!=s.system_language)&&t.push({language:s.language_code,text:s.language_name,system_language:s.system_language,communication_language:s.communication_language,default_language:s.language_code==this.languagedata.languages.default});return t}addAvailableLanguage(e){let t=!1;this.languagedata.languages.available.some((s=>{if(s.language_code==e.language_code)return s.system_language=e.system_language,s.default_language=e.default_language,e.default_language&&this.setDefaultLanguage(e.language_code),t=!0,!0})),t||(this.languagedata.languages.available.push(e),this.storeService.writeStore(this.storeDBName,"languages",{language_code:e.language_code,data:e}))}removeAvailableLanguage(e){this.languagedata.languages.available.some((e=>{if(e.language_code==e)return e.system_language=!1,!0}))}getDefaultLanguage(){return this.languagedata.languages.default}setDefaultLanguage(e){this.http.post(this.configurationService.getBackendUrl()+"/configuration/syslanguages/setdefault/"+e,{},{headers:this.session.getSessionHeader(),observe:"response"}).subscribe((t=>{t.body.success&&(this.languagedata.languages.default=e)}))}getLangText(e){let t=e;return this.languagedata.languages.available.some((s=>{if(s.language_code==e)return t=s.language_name,!0})),t}searchLabel(e,t=10){let s=[],i=e.toLowerCase().split(" ");for(let e in this.languagedata.applang){let n=!0;for(let t of i)if(e.toLocaleLowerCase().indexOf(t)<0){n=!1;break}if(n&&s.push({label:e,translation:this.getAppLanglabel(e)}),s.length>=t)break}return s}addLabel(e,t="",s="",i=""){this.languagedata.applang[e]={default:t,long:i,short:s}}compareStrings(e,t){return e.localeCompare(t,this._currentlanguage.slice(0,2))}sortArray(e,t=!1){e.sort(((e,s)=>this.compareStrings(e,s)*(t?-1:1)))}sortObjects(e,t,s=!1){e.sort(((e,i)=>this.compareStrings(e[t],i[t])*(s?-1:1)))}ucFirst(e){return e.charAt(0).toLocaleUpperCase(this._currentlanguage.slice(0,2))+e.slice(1)}lcFirst(e){return e.charAt(0).toLocaleLowerCase(this._currentlanguage.slice(0,2))+e.slice(1)}}return e=language,(0,i.Z)(language,"ɵfac",(function(t){return new(t||e)(n.LFG(l.eN),n.LFG(a.C),n.LFG(d.n),n.LFG(r.f),n.LFG(c.d),n.LFG(u.Pu))})),(0,i.Z)(language,"ɵprov",n.Yz7({token:e,factory:e.ɵfac,providedIn:"root"})),language})()},6559:(e,t,s)=>{"use strict";s.d(t,{b:()=>o});var i=s(1180),n=s(2242);let o=(()=>{var e;class layout{constructor(){(0,i.Z)(this,"headerheight",90)}get screenwidth(){let e=window.innerWidth;return e>=1024?"large":e>=768?"medium":"small"}}return e=layout,(0,i.Z)(layout,"ɵfac",(function(t){return new(t||e)})),(0,i.Z)(layout,"ɵprov",n.Yz7({token:e,factory:e.ɵfac,providedIn:"root"})),layout})()},2067:(e,t,s)=>{"use strict";s.d(t,{$:()=>r});var i=s(5861),n=s(1180),o=s(2242),l=s(7579),a=s(9646),d=s(6625);let r=(()=>{var e;class libloader{constructor(e){(0,n.Z)(this,"configuration",void 0),(0,n.Z)(this,"loadedLibs",[]),(0,n.Z)(this,"loadedLibs$",new o.vpe),(0,n.Z)(this,"loadedDirect",[]),this.configuration=e}get scripts(){return this.configuration.getData("scripts")}loadLibs(...e){let t=[];e.forEach((e=>{t.push(this.loadLib(e))}));let s=new l.x,i=0;for(let e of t)e.subscribe((e=>{i++,i==t.length&&(s.next(!0),s.complete())}),(e=>{i++,s.error(e)}));return i==t.length?(0,a.of)(s):s.asObservable()}loadLib(e){if(this.scripts[e]){if(this.isLibLoaded(e))return(0,a.of)({script:e,loaded:!0,status:"Already Loaded"});if(this.isLibLoading(e))return this.loadedLibs$;{this.loadedLibs.push({name:e,status:"loading"});let t=new l.x;return this.loadScriptsDirect(this.scripts[e]).then((s=>{t.next({script:e,loaded:!0,status:"Loaded"}),t.complete(),this.loadedLibs.find((t=>t.name==e)).status="loaded",this.loadedLibs$.emit({script:e,loaded:!0,status:"Loaded"})}),(s=>{t.error({script:e,loaded:!1,status:"error"}),t.complete(),this.loadedLibs.find((t=>t.name==e)).status="error",this.loadedLibs$.emit({script:e,loaded:!0,status:"error"})})),t.asObservable()}}return(0,a.of)({script:e,loaded:!1,status:"Unknown"})}loadScriptsDirect(e){var t=this;return(0,i.Z)((function*(){return new Promise(function(){var s=(0,i.Z)((function*(s,i){let n=0;for(let o of e)yield t.loadScriptDirect(o.src).then((t=>{n++,n==e.length&&s({script:o.name,loaded:!0,status:"Loaded"})}),(e=>{i({script:o.name,loaded:!1,status:"error"})}))}));return function(e,t){return s.apply(this,arguments)}}())}))()}loadFromSource(e){let t=new l.x,s=0;for(let i of e)this.loadScriptDirect(i).then((i=>{s++,s==e.length&&(t.next(!0),t.complete())}),(e=>{t.error(!1),t.complete()}));return t.asObservable()}loadScriptDirect(e){var t=this;return(0,i.Z)((function*(){return-1!=t.loadedDirect.indexOf(e)?Promise.resolve(!0):new Promise(((t,s)=>{let i={};e.endsWith(".css")?(i=document.createElement("link"),i.rel="stylesheet",i.href=e):(i=document.createElement("script"),i.type="text/javascript",i.src=e),i.readyState?i.onreadystatechange=()=>{"loaded"!==i.readyState&&"complete"!==i.readyState||(i.onreadystatechange=null,t(!0))}:i.onload=()=>{t(!0)},i.onerror=e=>{s(!1)},document.getElementsByTagName("head")[0].appendChild(i)}))}))()}isLibLoaded(e){return!!this.loadedLibs.find((t=>t.name==e&&"loaded"==t.status))}isLibLoading(e){return!!this.loadedLibs.find((t=>t.name==e&&"loading"==t.status))}}return e=libloader,(0,n.Z)(libloader,"ɵfac",(function(t){return new(t||e)(o.LFG(d.C))})),(0,n.Z)(libloader,"ɵprov",o.Yz7({token:e,factory:e.ɵfac,providedIn:"root"})),libloader})()},4411:(e,t,s)=>{"use strict";s.d(t,{_:()=>h});var i=s(1180),n=s(7579),o=s(2242),l=s(3144),a=s(3369),d=s(6625),r=s(5920),c=s(5329),u=s(9086);let h=(()=>{var e;class loader{constructor(e,t,s,o,l,a){(0,i.Z)(this,"http",void 0),(0,i.Z)(this,"broadcast",void 0),(0,i.Z)(this,"configuration",void 0),(0,i.Z)(this,"session",void 0),(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"storeService",void 0),(0,i.Z)(this,"module",""),(0,i.Z)(this,"id",""),(0,i.Z)(this,"data",{}),(0,i.Z)(this,"loaderHandler",new n.x),(0,i.Z)(this,"loadComplete",void 0),(0,i.Z)(this,"start",""),(0,i.Z)(this,"counterCompleted",0),(0,i.Z)(this,"progress",0),(0,i.Z)(this,"activeLoader",""),(0,i.Z)(this,"loadPhase","system"),(0,i.Z)(this,"loadElements",{system:[{name:"getLanguage",display:"Language",status:"initial",sequence:35,action:e=>{e.language.getLanguage(e.loaderHandler)}}],primary:[],secondary:[]}),(0,i.Z)(this,"storeDBName","loaddata"),this.http=e,this.broadcast=t,this.configuration=s,this.session=o,this.language=l,this.storeService=a,this.loaderHandler.subscribe((e=>this.handleLoaderHandler())),this.storeService.initializeStores(this.storeDBName,["loadtaskdata","loadtasks"],"id"),this.broadcast.message$.subscribe((e=>this.handleLogout(e)))}getLoadTasks(){let e=new n.x;return this.storeService.readStoreAll(this.storeDBName,"loadtasks").then((t=>{this.processLoadTasks(t,!1),e.next(!0),e.complete()})).catch((()=>{this.getLoadTasksFromBackend(e)})),e.asObservable()}getLoadTasksFromBackend(e){this.http.get(this.configuration.getBackendUrl()+"/system/spiceui/core/loadtasks",{headers:this.session.getSessionHeader()}).subscribe((t=>{this.processLoadTasks(t),e.next(!0),e.complete()}))}processLoadTasks(e,t=!0){this.loadElements.primary=[],this.loadElements.secondary=[];for(let s of e)s.status="initial",this.loadElements[s.phase].push(s),t&&this.storeService.writeStore(this.storeDBName,"loadtasks",{id:s.id,data:s});this.loadElements.primary.sort(((e,t)=>parseInt(e.sequence,10)>parseInt(t.sequence,10)?1:-1)),this.loadElements.secondary.sort(((e,t)=>parseInt(e.sequence,10)>parseInt(t.sequence,10)?1:-1))}clearDB(){this.storeService.clearDB(this.storeDBName,["loadtaskdata","loadtasks"])}handleLogout(e){"logout"==e.messagetype&&this.clearDB()}load(e=!0){return e&&(this.clearDB(),this.language.clearDB(),this.configuration.clearDB()),this.loadComplete=new n.x,this.getLoadTasks().subscribe((e=>{this.resetLoader(),this.start=performance.now(),this.handleLoaderHandler()})),this.loadComplete.asObservable()}reloadPrimary(){this.loadComplete=new n.x,this.loadPhase="primary",this.progress=0,this.counterCompleted=0;for(let e of this.loadElements.primary)e.status="initial";return this.start=performance.now(),this.handleLoaderHandler(),this.loadComplete.asObservable()}resetLoader(){this.counterCompleted=0,this.progress=0,this.loadPhase="system";for(let e of this.loadElements.system)e.status="initial";for(let e of this.loadElements.primary)e.status="initial";for(let e of this.loadElements.secondary)e.status="initial"}reset(){this.counterCompleted=0,this.progress=0;for(let e of this.loadElements.system)e.status="initial";for(let e of this.loadElements.primary)e.status="initial";for(let e of this.loadElements.secondary)e.status="initial"}setComplete(){performance.now()-this.start>500?this.complete():setTimeout((()=>this.complete()),500)}complete(){this.loadComplete.next(!0),this.loadComplete.complete()}handleLoaderHandler(){let e=!1;for(let t of this.loadElements[this.loadPhase])if("active"===t.status){t.status="completed";let e=++this.counterCompleted/(this.loadElements.primary.length+this.loadElements.system.length)*100;this.progress=e}else if("initial"===t.status){t.status="active",t.action?t.action(this):this.handleRouteElement(t),e=!0,this.activeLoader=t.display;break}!1===e&&"system"==this.loadPhase?(this.loadPhase="primary",this.handleLoaderHandler()):!1===e&&"primary"==this.loadPhase&&(this.setComplete(),this.loadPhase="secondary",this.broadcast.broadcastMessage("loader.primarycompleted"),this.handleLoaderHandler())}handleRouteElement(e){this.storeService.readStore(this.storeDBName,"loadtaskdata",e.id).subscribe({next:t=>{this.processLoadElementData(e.id,t),this.broadcast.broadcastMessage("loader.completed",e.name),this.loaderHandler.next(e.name)},error:()=>{this.loadRouteElementFromBackend(e)}})}loadRouteElementFromBackend(e){let t=e.route?e.route:"/system/spiceui/core/loadtasks/"+e.id;this.http.get(this.configuration.getBackendUrl()+t,{headers:this.session.getSessionHeader()}).subscribe({next:t=>{this.storeService.writeStore(this.storeDBName,"loadtaskdata",{id:e.id,data:t}),this.processLoadElementData(e.id,t),this.broadcast.broadcastMessage("loader.completed",e.name),this.loaderHandler.next(e.name)}})}processLoadElementData(e,t){for(let s in t)this.configuration.setDataFromStore(e,s,t[s])}}return e=loader,(0,i.Z)(loader,"ɵfac",(function(t){return new(t||e)(o.LFG(l.eN),o.LFG(a.f),o.LFG(d.C),o.LFG(r.n),o.LFG(c.d),o.LFG(u.d))})),(0,i.Z)(loader,"ɵprov",o.Yz7({token:e,factory:e.ɵfac,providedIn:"root"})),loader})()},2349:(e,t,s)=>{"use strict";s.d(t,{M:()=>l});var i=s(1180),n=s(2242);const o=()=>{};let l=(()=>{var e;class loggerService{constructor(){(0,i.Z)(this,"sessionService",void 0)}get info(){return this.isDev()?console.info.bind(console):o}get warn(){return this.isDev()?console.warn.bind(console):o}get log(){return this.isDev()?console.log.bind(console):o}get error(){return this.isDev()?console.error.bind(console):o}isDev(){return(0,n.X6Q)()||this.sessionService&&this.sessionService.isDev}setSession(e){this.sessionService=e}}return e=loggerService,(0,i.Z)(loggerService,"ɵfac",(function(t){return new(t||e)})),(0,i.Z)(loggerService,"ɵprov",n.Yz7({token:e,factory:e.ɵfac,providedIn:"root"})),loggerService})()},4461:(e,t,s)=>{"use strict";s.d(t,{j:()=>v,q:()=>Z});var i=s(1180),n=s(3144),o=s(7579),l=s(2242),a=s(6625),d=s(3348),r=s(4411),c=s(3278),u=s(3441),h=s(5920),m=s(3369),g=s(6163),p=s(4044),f=s(4154),b=s(4505);let v=(()=>{var e;class loginService{constructor(e,t,s,n,o,l,a,d,r,c,u,h){(0,i.Z)(this,"configurationService",void 0),(0,i.Z)(this,"http",void 0),(0,i.Z)(this,"router",void 0),(0,i.Z)(this,"loader",void 0),(0,i.Z)(this,"toast",void 0),(0,i.Z)(this,"helper",void 0),(0,i.Z)(this,"session",void 0),(0,i.Z)(this,"broadcast",void 0),(0,i.Z)(this,"modelutilities",void 0),(0,i.Z)(this,"modal",void 0),(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"backend",void 0),(0,i.Z)(this,"redirectUrl",""),(0,i.Z)(this,"authData",{userName:"",password:"",rememberMe:!1}),(0,i.Z)(this,"tokenObject",void 0),(0,i.Z)(this,"oauthIssuer",""),this.configurationService=e,this.http=t,this.router=s,this.loader=n,this.toast=o,this.helper=l,this.session=a,this.broadcast=d,this.modelutilities=r,this.modal=c,this.metadata=u,this.backend=h,this.broadcast.message$.subscribe((e=>{"loader.completed"===e.messagetype&&"loadUserData"===e.messagedata&&this.session.authData.obtainGDPRconsent&&this.modal.openModal("GlobalObtainGDPRConsentContainer")}))}login(e=!0){let t,s=new o.x,i=this.configurationService.getBackendUrl()+"/authentication/login",l=new n.WM;if(this.authData.userName&&this.authData.password){let e=this.authData.userName.indexOf("#as#");e>-1&&(t=this.authData.userName.slice(0,e),this.authData.userName=this.authData.userName.slice(e+4)),l=l.set("Authorization","Basic "+this.helper.encodeBase64(this.authData.userName+":"+this.authData.password)),this.authData.code2fa&&(l=l.set("code2fa",this.authData.code2fa)),this.session.deviceID&&(l=l.set("device-id",this.session.deviceID))}else{if(!this.tokenObject)throw new Error("Cannot Log In");l=l.set("OAuth-Token",this.tokenObject.access_token).set("OAuth-Issuer",this.oauthIssuer).set("OAuth-Refresh-Token",this.tokenObject.refresh_token??"").set("OAuth-Token-Valid-Until",this.tokenObject.valid_until??"")}let a={};return t&&(a.impersonationuser=encodeURIComponent(t)),this.http.get(i,{headers:l,params:a}).subscribe({next:t=>{0==t.result&&this.toast.sendToast("error authenticating","error",t.error);let i=t;this.session.authData.sessionId=i.id,this.session.authData.userId=i.userid,this.session.authData.companycode_id=i.companycode_id,this.session.authData.tenant_id=i.tenant_id,this.session.authData.tenant_name=i.tenant_name,this.session.authData.tenant_accepted_legal_notice=i.tenant_accepted_legal_notice,this.session.authData.tenant_wizard_completed=i.tenant_wizard_completed,this.session.authData.userName=i.user_name,this.session.authData.email=i.email,this.session.authData.admin=i.admin,this.session.authData.dev=i.dev,this.session.authData.portalOnly=i.portal_only,this.session.authData.googleToken=i.access_token,this.session.authData.obtainGDPRconsent=i.obtainGDPRconsent,this.session.authData.canchangepassword=i.canchangepassword,this.session.authData.user=this.modelutilities.backendModel2spice("Users",i.user),this.session.storeToken(this.authData.rememberMe),sessionStorage[btoa(this.session.authData.sessionId+":backendurl")]=btoa(this.configurationService.getBackendUrl()),this.broadcast.broadcastMessage("login"),this.load(e),s.next(!0),s.complete()},error:e=>{if(401===e.status)s.error(e.error.error);else this.toast.sendToast("Application Error","error","Error Authenticating"),s.error(e.statusText);s.complete()}}),s.asObservable()}relogin(e,t){let s=this.configurationService.getBackendUrl()+"/authentication/login",i=new o.x,l=new n.WM;return e?(l=l.set("Authorization","Basic "+this.helper.encodeBase64(this.session.authData.userName+":"+e)),this.authData.code2fa&&(l=l.set("code2fa",this.authData.code2fa))):t&&(l=l.set("OAuth-Token",t.access_token).set("OAuth-Issuer",this.oauthIssuer).set("OAuth-Refresh-Token",this.tokenObject.refresh_token??"").set("OAuth-Token-Valid-Until",this.tokenObject.valid_until??"")),this.http.get(s,{headers:l}).subscribe({next:e=>{let t=e;this.session.authData.sessionId=t.id,this.session.storeToken(this.authData.rememberMe),i.next(!0),i.complete(),this.broadcast.broadcastMessage("relogin")},error:e=>{if(401===e.status)i.error(e.error.error);else this.toast.sendToast("Application Error","error","Error Authenticating"),i.error(e.statusText);i.complete()}}),i.asObservable()}renewPassword(e){let t=this.configurationService.getBackendUrl()+"/user/password/change";if(this.authData.userName&&this.authData.password){let s=new n.WM;s=s.set("Authorization","Basic "+this.helper.encodeBase64(this.authData.userName+":"+this.authData.password)),this.http.post(t,{newpwd:e},{headers:s}).subscribe({next:e=>{}})}}load(e=!0){this.loader.load(e).subscribe((e=>{this.redirect(e)}))}redirect(e){!0===e&&(this.session.authData.loaded=!0,this.toast.clearAll(),this.redirectUrl?(this.router.navigate([this.redirectUrl]),this.redirectUrl=""):this.router.navigate(["/"]))}logout(e=!1){e||this.backend.deleteRequest("authentication/login",{session_id:this.session.authData.sessionId}),this.session.endSession(),this.loader.reset(),this.broadcast.broadcastMessage("logout"),this.router.navigate(["/login"])}}return e=loginService,(0,i.Z)(loginService,"ɵfac",(function(t){return new(t||e)(l.LFG(a.C),l.LFG(n.eN),l.LFG(d.F0),l.LFG(r._),l.LFG(c.A),l.LFG(u._),l.LFG(h.n),l.LFG(m.f),l.LFG(g.A),l.LFG(p.o),l.LFG(f.Pu),l.LFG(b.y))})),(0,i.Z)(loginService,"ɵprov",l.Yz7({token:e,factory:e.ɵfac,providedIn:"root"})),loginService})(),Z=(()=>{var e;class loginCheck{constructor(e,t,s,n,o){(0,i.Z)(this,"login",void 0),(0,i.Z)(this,"session",void 0),(0,i.Z)(this,"modal",void 0),(0,i.Z)(this,"router",void 0),(0,i.Z)(this,"loader",void 0),this.login=e,this.session=t,this.modal=s,this.router=n,this.loader=o}canActivate(e,t){return!(!this.session||!this.session.authData.sessionId)||("/"!=t.url&&(this.login.redirectUrl=t.url),this.router.navigate(["/login"]),!1)}}return e=loginCheck,(0,i.Z)(loginCheck,"ɵfac",(function(t){return new(t||e)(l.LFG(v),l.LFG(h.n),l.LFG(p.o),l.LFG(d.F0),l.LFG(r._))})),(0,i.Z)(loginCheck,"ɵprov",l.Yz7({token:e,factory:e.ɵfac,providedIn:"root"})),loginCheck})()},5322:(e,t,s)=>{"use strict";s.d(t,{Y:()=>o});var i=s(1180),n=s(2242);let o=(()=>{var e;class MathExpressionCompilerService{do(e){return this.evaluate(this.parse(this.lex(e)))}lex(e){let t,s=e=>/[+\-*\/\^%=(),]/.test(e),i=e=>/[0-9]/.test(e),n=e=>/\s/.test(e),o=e=>"string"==typeof e&&!s(e)&&!i(e)&&!n(e),l=[],a=0,d=()=>t=e[++a],r=(e,t)=>{l.push({type:e,value:t})};for(;a<e.length;){let t=e[a];if(n(t))d();else if(s(t))r(t),d();else if(i(t)){let e="";do{e+=t,t=d()}while(i(t));if("."===t)do{e+=t,t=d()}while(i(t));let s=parseFloat(e);if(!isFinite(s))throw"Number is too large or too small for a 64-bit double.";r("number",s)}else{if(!o(t))throw"Unrecognized token: "+t+" at "+a;{let e=t;for(;o(d());)e+=t;r("identifier",e)}}}return r("(end)"),l}parse(e){let t={},s=(e,s,i,n)=>{let o=t[e]||{};t[e]={lbp:o.lbp||i,nud:o.nud||s,led:o.led||n}};s("(",(()=>{let e=l(2);if(")"!==n().type)throw"Expected closing parenthesis ')'";return o(),e})),s("number",(e=>e)),s("identifier",(t=>{if("("===n().type){let s=[];if(")"===e[i+1].type)o();else{do{o(),s.push(l(2))}while(","===n().type);if(")"!==n().type)throw"Expected closing parenthesis ')'"}return o(),{type:"call",args:s,name:t.value}}return t})),s(","),s(")"),s("(end)");let i=0,n=()=>(e=>{let s=Object.create(t[e.type]);return s.type=e.type,s.value=e.value,s})(e[i]),o=()=>(i++,n()),l=e=>{let t,s=n();if(o(),!s.nud)throw"Unexpected token: "+s.type;for(t=s.nud(s);e<n().lbp;){if(s=n(),o(),!s.led)throw"Unexpected token: "+s.type;t=s.led(t)}return t},a=(e,t,i,n)=>{i=i||t,s(e,null,t,n||function(t){return{type:e,left:t,right:l(i)}})};var d,r;r=7,s(d="-",(()=>({type:d,right:l(r)}))),a("^",6,5),a("*",4),a("/",4),a("%",4),a("+",3),a("-",3),a("=",1,2,(e=>{if("call"===e.type){for(let t=0;t<e.args.length;t++)if("identifier"!==e.args[t].type)throw"Invalid argument name";return{type:"function",name:e.name,args:e.args,value:l(2)}}if("identifier"===e.type)return{type:"assign",name:e.value,value:l(2)};throw"Invalid lvalue"}));let c=[];for(;"(end)"!==n().type;)c.push(l(0));return c}evaluate(e){let t={"+":(e,t)=>e+t,"-":(e,t)=>e-t,"*":(e,t)=>e*t,"/":(e,t)=>e/t,"%":(e,t)=>e%t,"^":(e,t)=>Math.pow(e,t)},s={pi:Math.PI,e:Math.E},i={sin:Math.sin,cos:Math.cos,tan:Math.cos,asin:Math.asin,acos:Math.acos,atan:Math.atan,abs:Math.abs,round:Math.round,ceil:Math.ceil,floor:Math.floor,log:Math.log,exp:Math.exp,sqrt:Math.sqrt,max:Math.max,min:Math.min,random:Math.random},n={},o=e=>{if("number"===e.type)return e.value;if(t[e.type])return e.left?t[e.type](o(e.left),o(e.right)):t[e.type](o(e.right));if("identifier"===e.type){let t=n.hasOwnProperty(e.value)?n[e.value]:s[e.value];if(void 0===t)throw e.value+" is undefined";return t}if("assign"===e.type)s[e.name]=o(e.value);else{if("call"===e.type){for(let t=0;t<e.args.length;t++)e.args[t]=o(e.args[t]);return i[e.name].apply(null,e.args)}"function"===e.type&&(i[e.name]=function(){for(let t=0;t<e.args.length;t++)n[e.args[t].value]=arguments[t];let t=o(e.value);return n={},t})}},l="";for(let t=0;t<e.length;t++){let s=o(e[t]);void 0!==s&&(l+=s+"\n")}return l}}return e=MathExpressionCompilerService,(0,i.Z)(MathExpressionCompilerService,"ɵfac",(function(t){return new(t||e)})),(0,i.Z)(MathExpressionCompilerService,"ɵprov",n.Yz7({token:e,factory:e.ɵfac,providedIn:"root"})),MathExpressionCompilerService})()},4154:(e,t,s)=>{"use strict";s.d(t,{Pu:()=>w,bi:()=>C,en:()=>T});var i=s(5861),n=s(1180),o=s(2843),l=s(7579),a=s(2076),d=s(262),r=s(3900),c=s(9646),u=s(2242),h=s(7516),m=s(4004),g=s(4988),p=s(51),f=s(3144),b=s(5920),v=s(6625),Z=s(3348),y=s(3369),x=s(4755);let w=(()=>{var e;class metadata{constructor(e,t,s,i,o,l){(0,n.Z)(this,"http",void 0),(0,n.Z)(this,"session",void 0),(0,n.Z)(this,"configuration",void 0),(0,n.Z)(this,"router",void 0),(0,n.Z)(this,"broadcast",void 0),(0,n.Z)(this,"Injector",void 0),(0,n.Z)(this,"role",""),this.http=e,this.session=t,this.configuration=s,this.router=i,this.broadcast=o,this.Injector=l,this.broadcast.message$.subscribe((e=>this.handleMessage(e)))}get actionSets(){return this.configuration.getData("actionsets")}get componentDefaultConfigs(){return this.configuration.getData("componentdefaultconfigs")}get componentModuleConfigs(){return this.configuration.getData("componentmoduleconfigs")}get moduleDirectory(){return this.configuration.getData("modules")?this.configuration.getData("modules"):{}}get componentDirectory(){return this.configuration.getData("components")?this.configuration.getData("components"):{}}get componentSets(){return this.configuration.getData("componentsets")}get routes(){return this.configuration.getData("routes")}get scripts(){return this.configuration.getData("scripts")}get fieldSets(){return this.configuration.getData("fieldsets")}get validationRules(){return this.configuration.getData("validationrules")}get fieldDefs(){return this.configuration.getData("fielddefs")}get fieldTypeMappings(){return this.configuration.getData("fieldtypemappings")}get fieldStatusNetworks(){return this.configuration.getData("fieldstatusnetworks")}get moduleDefs(){return this.configuration.getData("moduledefs")}get moduleFilters(){return this.configuration.getData("modulefilters")}get sysroles(){return this.configuration.getData("sysroles")}get roles(){return this.configuration.getData("roles")}get rolemodules(){return this.configuration.getData("rolemodules")}get copyrules(){return this.configuration.getData("copyrules")}get htmlStyleData(){return this.configuration.getData("htmlstyles")}get countries(){return this.configuration.getData("countries")}addRoutes(){this.routes.forEach((e=>{this.router.config.unshift({path:e.path,component:g.y,canActivate:[T]}),this.router.config.unshift({path:"tab/:tabid/"+e.path,component:g.y,canActivate:[T]})}))}addComponentDirect(e,t,s){const i=this.hasRenderError(e,t);if(i)return this.renderMissingComponent(t,e),console.error(i),(0,o._)((()=>i));const n=new l.x,a=this.componentDirectory[e].module,d={name:this.moduleDirectory[a].module,path:this.moduleDirectory[a].path.replace("app/","")};return this.renderComponent(d,e,t,[],s).subscribe({next:e=>{e.instance.self=e,n.next(e),n.complete()},error:s=>{this.renderMissingComponent(t,e),n.error(s)}}),n.asObservable()}checkComponent(e){return!!this.componentDirectory[e]}importModule(e){return(0,i.Z)((function*(){return s(9456)(`./${e.path}.ts`).then((t=>t[e.name]))}))()}renderMissingComponent(e,t){e.createComponent(p.K).instance.component=t}loadComponentType(e,t){return(0,a.D)(this.importModule(e)).pipe((0,d.K)((()=>(0,o._)((()=>`Could not find the module file for path ${e.path}. Check if the module file exists or use a correct module path.`)))),(0,r.w)((s=>{if(!s)return(0,o._)((()=>`Module name ${e.name} in the config does not match the class name in the module file.`));let i;return Object.keys(s).some((e=>!!s[e].hasOwnProperty("declarations")&&(i=s[e].declarations.find((e=>e.name==t)),!0))),(0,c.of)(i)})))}renderComponent(e,t,s,i,n){return this.loadComponentType(e,t).pipe((0,m.U)((e=>{const t=s.createComponent(e,{injector:n});return i.forEach((e=>t.instance[e.property]=e.value)),t.changeDetectorRef.markForCheck(),t})))}hasRenderError(e,t){return t?this.componentDirectory[e]&&this.componentDirectory[e].module?void 0:`misconfiguration for component ${e} in object repository`:"ViewContainerRef was passed is undefined"}loadComponentContainer(e,t,s){const i=t.createComponent(h.m,{injector:s});return i.instance.containerComponent=e,i}addComponent(e,t,s){const i=this.hasRenderError(e,t);if(i)return this.renderMissingComponent(t,e),(0,o._)((()=>i));const n=new l.x,a=this.loadComponentContainer(e,t,s);return a.instance.containerRef.subscribe((t=>{a.changeDetectorRef.detectChanges(),this.addComponentDirect(e,t).subscribe((e=>{n.next(e),n.complete()}))})),a.instance.loaded=!0,a.changeDetectorRef.detectChanges(),a.changeDetectorRef.markForCheck(),n.asObservable()}getComponentSet(e){return this.componentSets[e]}getAllComponentsets(){try{return this.componentSets}catch(e){return""}}addComponentSet(e,t,s,i="custom"){this.componentSets[e]={name:s,module:t,type:i,items:[]}}getRawComponentSets(){return this.componentSets}getComponentSets(e=""){let t=[];for(let s in this.componentSets)""!==e&&this.componentSets[s].module!==e||t.push({id:s,name:this.componentSets[s].name,module:this.componentSets[s].module,type:this.componentSets[s].type});return t.sort(((e,t)=>e.name?e.name.localeCompare(t.name):1)),t}getComponentSetObjects(e){try{return this.componentSets[e].items}catch(e){return[]}}addComponentToComponentset(e,t,s,i={}){this.componentSets[t].items.push({id:e,component:s,componentconfig:i,sequence:0});let n=0;for(let e of this.componentSets[t].items)e.sequence=n,n++}getRawFieldSets(){return this.fieldSets}getFieldSets(e="",t=""){let s=[];for(let t in this.fieldSets)""!==e&&this.fieldSets[t].module!==e||s.push({id:t,name:this.fieldSets[t].name,module:this.fieldSets[t].module,type:this.fieldSets[t].type});return s.sort(((e,t)=>e.name>t.name?1:-1)),s}getFieldset(e){try{return this.fieldSets[e]}catch(e){return""}}getAllFieldsets(){try{return this.fieldSets}catch(e){return""}}setFieldset(e,t){this.fieldSets[e].name=t.name,this.fieldSets[e].package=t.package}addFieldset(e,t,s,i="custom",n=[]){this.fieldSets[e]={items:n,module:t,name:s,type:i}}addFieldsetToFieldset(e,t,s,i={}){this.fieldSets[t].items.push({id:e,fieldset:s,fieldconfig:i,sequence:0});let n=0;for(let e of this.fieldSets[t].items)e.sequence=n,n++}addFieldToFieldset(e,t,s,i={}){this.fieldSets[t].items.push({id:e,field:s,fieldconfig:i,sequence:0});let n=0;for(let e of this.fieldSets[t].items)e.sequence=n,n++}removeFieldsetItem(e,t){let s=!1;if(this.fieldSets[e].items.some(((e,i)=>{if(e.id==t.id)return s=i,!0})),!1!==s){this.fieldSets[e].items.splice(s,1);let t=0;for(let s of this.fieldSets[e].items)s.sequence=t,t++;return!0}return!1}getFieldsetName(e){try{return this.fieldSets[e].name}catch(e){return""}}getFieldSetFields(e,t=""){if(this.fieldSets[e]){let s=[];for(let i of this.fieldSets[e].items)i.field?s.push(i):i.fieldset&&t.indexOf(e)<0&&(s=s.concat(this.getFieldSetFields(i.fieldset,t+":"+e)));return s}return[]}getFieldSetItems(e){return this.fieldSets[e]?this.fieldSets[e].items:[]}getFieldlabel(e,t){try{return this.fieldDefs[e][t].vname?this.fieldDefs[e][t].vname:t}catch(e){return t}}getFieldHelpText(e,t){try{return this.fieldDefs[e][t].popupHelp}catch(e){return null}}hasField(e,t){return this.fieldDefs[e]&&this.fieldDefs[e][t]}getAppModules(){let e=[];for(let t in this.moduleDirectory)this.moduleDirectory.hasOwnProperty(t)&&e.push(this.moduleDirectory[t]);return e}getModuleDefs(e){return this.moduleDefs[e]?this.moduleDefs[e]:this.moduleDefs[this.getModuleById(e)]}getModuleDuplicatecheck(e){try{return"1"===this.moduleDefs[e].duplicatecheck||"2"===this.moduleDefs[e].duplicatecheck}catch(e){return!1}}getModuleDuplicatecheckOnChange(e){try{return"1"===this.moduleDefs[e].duplicatecheck}catch(e){return!1}}getModules(){let e=[];for(let t in this.moduleDefs)e.push(t);return e}getGlobalSearchModules(){let e=[];for(let t in this.moduleDefs)this.moduleDefs[t].ftsglobalsearch&&e.push(t);return e}getPhoneSearchModules(){let e=[];for(let t in this.moduleDefs)this.moduleDefs[t].ftsphonesearch&&e.push(t);return e}getModuleById(e){for(let t in this.moduleDefs)if(this.moduleDefs[t].id==e)return t;return""}getModuleIcon(e){try{return this.moduleDefs[e].icon}catch(e){return!1}}getModuleSingular(e){try{return this.moduleDefs[e].singular}catch(t){return e}}getModuleFromSingular(e){let t="";for(let s in this.moduleDefs)this.moduleDefs[s].singular==e&&(t=s);return t}getModuleTrackflag(e){try{return!!parseInt(this.moduleDefs[e].track,10)}catch(e){return!1}}getModuleFields(e){try{return this.fieldDefs[e]?this.fieldDefs[e]:{}}catch(e){return{}}}getModuleDuplicateCheckFields(e){let t=[],s=this.getModuleFields(e);for(let e in s)s[e].duplicatecheck&&t.push(e);return t}getModuleValidations(e){try{return this.validationRules[e].validations}catch(e){return[]}}getModuleMenu(e){try{let t=[];return this.moduleDefs[e].actionset&&(t=this.getActionSetItems(this.moduleDefs[e].actionset)),t}catch(e){return[]}}getModuleListTypes(e){try{return this.moduleDefs[e].listtypes}catch(e){return[]}}addModuleListType(e,t){this.moduleDefs[e].listtypes.push(t),this.configuration.setData("moduledefs",this.moduleDefs)}updateModuleListType(e,t){this.moduleDefs[e].listtypes.some((e=>{if(e.id==t.id){for(let s in t)t.hasOwnProperty(s)&&(e[s]=t[s]);return this.configuration.setData("moduledefs",this.moduleDefs),!0}}))}deleteModuleListType(e,t){let s=this.moduleDefs[e].listtypes.findIndex((e=>e.id==t));return s>=0&&this.moduleDefs[e].listtypes.splice(s,1),this.configuration.setData("moduledefs",this.moduleDefs),this.moduleDefs[e].listtypes}getModuleAggregates(e){return this.moduleDefs[e].ftsaggregates}getFieldDefs(e,t){try{return this.fieldDefs[e][t]}catch(e){return"varchar"}}checkStatusManaged(e){for(let t in this.fieldDefs[e])if(this.getFieldDefs(e,t).options&&this.fieldStatusNetworks[this.getFieldDefs(e,t).options])return{statusField:this.getFieldDefs(e,t).name,statusNetwork:this.fieldStatusNetworks[this.getFieldDefs(e,t).options]};return!1}getFieldType(e,t){try{return this.fieldDefs[e][t].type}catch(e){return"varchar"}}getFieldSource(e,t){try{return this.fieldDefs[e][t].source}catch(e){return""}}getFieldOptions(e,t){try{return this.fieldDefs[e][t].options}catch(e){return!1}}getFieldRequired(e,t){try{return this.fieldDefs[e][t].required}catch(e){return!1}}getSystemModules(){let e=[];for(let t in this.moduleDirectory)e.push(this.moduleDirectory[t]);return e.sort(((e,t)=>e.module>t.module?1:-1)),e}getSystemModuleByComponent(e){for(let t in this.componentDirectory)if(t==e)return this.componentDirectory[t].module;return null}getSystemComponents(e){let t=[];for(let s in this.componentDirectory)e&&e!=this.componentDirectory[s].module||t.push(this.componentDirectory[s]);return t.sort(((e,t)=>e.component>t.component?1:-1)),t}getComponentConfigOptions(e){try{return this.componentDirectory[e].componentconfig}catch(e){return{}}}getComponentConfigurations(e="*"){return"*"===e?this.componentDefaultConfigs:this.componentModuleConfigs[e]?this.componentModuleConfigs[e]:{}}getComponentConfig(e="",t="",s=""){return""===s&&(s=this.role?this.role:"*"),""!=t&&this.componentModuleConfigs[t]&&this.componentModuleConfigs[t][e]&&this.componentModuleConfigs[t][e][s]?this.componentModuleConfigs[t][e][s]:""!=t&&this.componentModuleConfigs[t]&&this.componentModuleConfigs[t][e]&&this.componentModuleConfigs[t][e]["*"]?this.componentModuleConfigs[t][e]["*"]:this.componentDefaultConfigs[e]&&this.componentDefaultConfigs[e][s]?this.componentDefaultConfigs[e][s]:this.componentDefaultConfigs[e]&&this.componentDefaultConfigs[e]["*"]?this.componentDefaultConfigs[e]["*"]:{}}getModuleDefaultComponentConfigByUsage(e,t){let s="";switch(t){case"list":s="ObjectList";break;case"details":s="ObjectRecordDetails"}return this.getComponentConfig(s,e)}getRawActionSets(){return this.actionSets}getActionSets(e=""){let t=[];for(let s in this.actionSets)""!==e&&this.actionSets[s].module!==e||t.push({id:s,name:this.actionSets[s].name,module:this.actionSets[s].module,type:this.actionSets[s].type,package:this.actionSets[s].package,actions:this.actionSets[s].actions});return t.sort(((e,t)=>e.name>t.name?1:-1)),t}getActionSet(e){return this.actionSets[e]}getActionSetItems(e){try{return this.actionSets[e].actions}catch(e){return[]}}setActionset(e,t){this.actionSets[e].name=t.name,this.actionSets[e].package=t.package}setActionSet(e,t){this.actionSets[e]={id:e,module:t.module,name:t.name,package:t.package,version:t.version,actions:t.actions,type:t.type}}setActionSetItems(e,t){this.actionSets[e].actions=t}addActionset(e,t,s,i="custom",n=[]){this.actionSets[e]={items:n,module:t,name:s,type:i}}removeActionset(e){delete this.actionSets[e]}removeActionsetItem(e,t){let s=!1;if(this.actionSets[e].items.some(((e,i)=>{if(e.id==t.id)return s=i,!0})),!1!==s){this.actionSets[e].items.splice(s,1);let t=0;for(let s of this.actionSets[e].items)s.sequence=t,t++;return!0}return!1}getActionsetName(e){try{return this.actionSets[e].name}catch(e){return""}}getModuleFilters(e=""){let t=[];for(let s in this.moduleFilters)if(this.moduleFilters.hasOwnProperty(s)){if(""!==e&&this.moduleFilters[s].module!==e)continue;t.push(this.moduleFilters[s])}return t.sort(((e,t)=>e.name-t.name)),t}getModuleFilter(e){try{return this.moduleFilters[e]}catch(e){return""}}setModuleFilter(e,t,s,i="custom"){this.moduleFilters||this.configuration.setData("moduleFilters",{}),this.moduleFilters[e]={id:e,name:t,module:s,type:i}}removeModuleFilter(e){delete this.moduleFilters[e]}checkModuleAcl(e,t){try{return t?this.moduleDefs[e].acl[t]:!!this.moduleDefs[e]}catch(e){return!1}}getRoles(){return this.roles}getSysRoles(){return this.sysroles}getActiveRole(){let e={};return this.roles&&this.roles.some((t=>{if(this.role==t.id)return e=t,!0})),e}setActiveRole(e){return!!this.roles.find((t=>t.id==e))&&(this.role=e,!0)}getRoleModules(e=!1){let t=[];if(this.rolemodules[this.role])for(let s of this.rolemodules[this.role])(!1===e||null!==s.sequence)&&this.moduleDefs[s.module]&&this.moduleDefs[s.module].visible&&(!this.moduleDefs[s.module].visibleaclaction||this.moduleDefs[s.module].visibleaclaction&&this.checkModuleAcl(s.module,this.moduleDefs[s.module].visibleaclaction))&&this.moduleDefs[s.module].acl.list&&t.push(s.module);return t}getCopyRules(e,t){const s=this.copyrules[e]&&this.copyrules[e][t]?this.copyrules[e][t]:[];return s.forEach((e=>{if(e.params&&!_.isObject(e.params))try{e.params=JSON.parse(e.params)}catch(t){e.params={}}})),s}getFieldTypes(){let e=[];for(let t in this.fieldTypeMappings)e.push(t);return e}getFieldTypeComponent(e){return this.fieldTypeMappings[e]}getRouteDetails(e){return this.routes?.sort(((e,t)=>e.path.split(":").length>t.path.split(":").length?1:-1)).find((t=>{if(t.path==e)return!0;if(e.split("/").length==t.path.split("/").length){let s=e.split("/"),i=t.path.split("/"),n=!0,o=0;for(;o<s.length&&n;)":"!==i[o].substring(0,1)&&i[o]!==s[o]&&(n=!1),o++;if(n)return!0}}))}getRouteComponent(e){return!!this.routes&&this.routes.find((t=>{if(t.path==e)return!0;if(e.split("/").length==t.path.split("/").length){let s=e.split("/"),i=t.path.split("/"),n=!0,o=0;for(;o<s.length&&n;)":"!==i[o].substring(0,1)&&i[o]!==s[o]&&(n=!1),o++;if(n)return!0}}))?.component}checkTagging(e){try{return!!this.moduleDefs[e].tagging}catch(e){return!1}}loadLibs(...e){let t=[];e.forEach((e=>{t.push(this.loadLib(e))}));let s=new l.x,i=0;for(let e of t)e.subscribe((e=>{i++}),(e=>{i++,console.error(e),s.error(e)}),(()=>{i==t.length&&(s.next(),s.complete())}));return i==t.length?(0,c.of)(s):s.asObservable()}isLibLoaded(e){if(this.scripts[e]){for(let t of this.scripts[e])if(!t.loaded)return!1;return!0}return!1}getHtmlStylesheetCode(e){return e&&this.htmlStyleData&&this.htmlStyleData.stylesheets&&_.isObject(this.htmlStyleData.stylesheets[e])&&_.isString(this.htmlStyleData.stylesheets[e].csscode)?this.htmlStyleData.stylesheets[e].csscode:""}getHtmlFormats(e){return _.isObject(this.htmlStyleData.stylesheets[e])?(_.isArray(this.htmlStyleData.stylesheets[e].formats)||(this.htmlStyleData.stylesheets[e].formats=[]),this.htmlStyleData.stylesheets[e].stylesDecoded||this.htmlStylesToObjects(e),this.htmlStyleData.stylesheets[e].formats):(console.log("HTML Styling: Unknown style sheet with ID "+e+"."),[])}getHtmlStylesheetNames(){let e=[];for(let t in this.htmlStyleData.stylesheets)e.push({id:this.htmlStyleData.stylesheets[t].id,name:this.htmlStyleData.stylesheets[t].name});return _.sortBy(e,"name")}getHtmlStylesheetToUse(e,t){return _.isObject(this.htmlStyleData.stylesheetsToUse[e])&&this.htmlStyleData.stylesheetsToUse[e][t]?this.htmlStyleData.stylesheetsToUse[e][t]:""}getCountries(){return this.countries}handleMessage(e){switch(e.messagetype){case"loader.completed":"loadRepository"==e.messagedata&&this.addRoutes(),"loadModules"==e.messagedata&&(this.roles.some((e=>{if(1==e.defaultrole)return this.role=e.id,!0})),""===this.role&&this.roles.length>0&&(this.role=this.roles[0].id));break;case"metadata.updatefieldsets":for(let t in e.messagedata.add)this.fieldSets[t]=e.messagedata.add[t];for(let t in e.messagedata.update)this.fieldSets[t]=e.messagedata.update[t];for(let t in e.messagedata.delete)delete this.fieldSets[t];break;case"metadata.updatecomponentsets":for(let t in e.messagedata.add)this.componentSets[t]=e.messagedata.add[t];for(let t in e.messagedata.update)this.componentSets[t]=e.messagedata.update[t];for(let t in e.messagedata.delete)delete this.componentSets[t]}}loadLib(e){let t=new l.x;if(!this.scripts[e])return(0,c.of)({script:e,loaded:!1,status:"Unknown"});if(this.isLibLoaded(e))return(0,c.of)({script:e,loaded:!0,status:"Already Loaded"});if(this.isLibLoading(e)){for(let s of this.scripts[e])if(s.loading)return s.loading$.subscribe((s=>this.loadLib(e).subscribe((e=>{t.next(e),t.complete()})))),t.asObservable()}else{for(let s of this.scripts[e])if(!s.loaded)return this.loadScript(s).subscribe((s=>{this.loadLib(e).subscribe((e=>{t.next(e),t.complete()}))})),t.asObservable();t.next({script:e,loaded:!0,status:"Loaded"}),t.complete()}return t.asObservable()}loadScript(e){let t=new l.x;e.loading=!0,e.loading$=new u.vpe;let s={};return e.src.endsWith(".css")?(s=document.createElement("link"),s.rel="stylesheet",s.href=e.src):(s=document.createElement("script"),s.type="text/javascript",s.src=e.src),s.readyState?s.onreadystatechange=()=>{"loaded"!==s.readyState&&"complete"!==s.readyState||(s.onreadystatechange=null,e.loaded=!0,e.loading=!1,t.next({script:e.src,loaded:!0,status:"Loaded"}),t.complete(),e.loading$.emit("loaded"))}:s.onload=()=>{e.loaded=!0,e.loading=!1,t.next({script:e.src,loaded:!0,status:"Loaded"}),t.complete(),e.loading$.emit("loaded")},s.onerror=s=>{e.loading=!1,t.error({script:e.src,loaded:!1,status:"Failed"}),e.loading$.emit("failed")},document.getElementsByTagName("head")[0].appendChild(s),t.asObservable()}isLibLoading(e){if(this.scripts[e]){for(let t of this.scripts[e])if(t.loading)return!0;return!1}return!1}htmlStylesToObjects(e){for(let t of this.htmlStyleData.stylesheets[e].formats){let e;if(_.isEmpty(t.styles))t.styles=null;else{try{e=JSON.parse(t.styles)}catch(s){console.log("HTML Styling: Malformed style specification in table sysuihtmlformats (format id: "+t.id+")."),e={}}t.styles=e}}this.htmlStyleData.stylesheets[e].stylesDecoded=!0}}return e=metadata,(0,n.Z)(metadata,"ɵfac",(function(t){return new(t||e)(u.LFG(f.eN),u.LFG(b.n),u.LFG(v.C),u.LFG(Z.F0),u.LFG(y.f),u.LFG(u.zs3))})),(0,n.Z)(metadata,"ɵprov",u.Yz7({token:e,factory:e.ɵfac,providedIn:"root"})),metadata})(),T=(()=>{var e;class aclCheck{constructor(e,t,s,i){(0,n.Z)(this,"metadata",void 0),(0,n.Z)(this,"router",void 0),(0,n.Z)(this,"session",void 0),(0,n.Z)(this,"configurationService",void 0),this.metadata=e,this.router=t,this.session=s,this.configurationService=i}canActivate(e,t){if(!this.session||!this.session.authData.sessionId)return!1;let s=this.configurationService.getSystemParamater("aclcontroller");return!(s&&"spiceacl"!=s&&!("Users"!==e.params.module||e.params.id&&e.params.id==this.session.authData.userId||this.session.authData.admin))&&(!(e.params.module&&"Home"!=e.params.module&&!this.metadata.checkModuleAcl(e.params.module,e.data.aclaction))||(this.router.navigate(["/modules/Home"]),!1))}}return e=aclCheck,(0,n.Z)(aclCheck,"ɵfac",(function(t){return new(t||e)(u.LFG(w),u.LFG(Z.F0),u.LFG(b.n),u.LFG(v.C))})),(0,n.Z)(aclCheck,"ɵprov",u.Yz7({token:e,factory:e.ɵfac,providedIn:"root"})),aclCheck})(),C=(()=>{var e;class noBack{constructor(e,t){(0,n.Z)(this,"location",void 0),(0,n.Z)(this,"broadcast",void 0),(0,n.Z)(this,"navigatingBack",!1),this.location=e,this.broadcast=t,this.location.onPopState((()=>{this.navigatingBack=!0}))}canDeactivate(){return!this.navigatingBack||(this.navigatingBack=!1,history.pushState(null,document.title,location.href),!1)}}return e=noBack,(0,n.Z)(noBack,"ɵfac",(function(t){return new(t||e)(u.LFG(x.S$),u.LFG(y.f))})),(0,n.Z)(noBack,"ɵprov",u.Yz7({token:e,factory:e.ɵfac,providedIn:"root"})),noBack})()},4044:(e,t,s)=>{"use strict";s.d(t,{o:()=>u});var i=s(1180),n=s(2242),o=s(7579),l=s(9646),a=s(4154),d=s(3917),r=s(3278),c=s(5329);let u=(()=>{var e;class modal{constructor(e,t,s,n){(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"footer",void 0),(0,i.Z)(this,"toast",void 0),(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"modalsArray",[]),(0,i.Z)(this,"modalsObject",{}),this.metadata=e,this.footer=t,this.toast=s,this.language=n,window.addEventListener("keyup",(e=>{if(27===e.keyCode&&this.modalsArray.length){e.stopImmediatePropagation();let t=this.modalsArray[this.modalsArray.length-1].wrapper;!t.instance.escKey||t.instance.childComponent.instance.onModalEscX&&!1===t.instance.childComponent.instance.onModalEscX()||t.destroy()}}))}openModal(e,t=!0,s,i){if(this.metadata.checkComponent(e)){let n=new o.x;return this.metadata.addComponentDirect("SystemModalWrapper",this.footer.modalcontainer).subscribe((o=>{let l={};l.wrapper=o,l.blurBackdrop=i,o.instance.escKey=t,this.modalsArray.push(l),this.modalsObject[l.modalId]=l,this.metadata.addComponentDirect(e,o.instance.target,s).subscribe((e=>{e.instance.self=o,l.component=e,o.instance.childComponent=e,n.next(e),n.complete()}),(t=>{this.removeModal(o),this.sendError(e),n.error(t),n.complete()})),o.instance.zIndex=2*this.modalsArray.length+1})),n.asObservable()}return this.sendError(e),(0,l.of)(!1)}sendError(e){this.toast.sendToast('Component "'+e+'" not found.',"error","Misconfiguration on the system as the component should have been opened in a modal but is not avilable. Please contact your system administrator.")}removeModal(e){for(let t=0;t<this.modalsArray.length;t++)if(this.modalsArray[t].wrapper===e){this.modalsArray.splice(t,1);break}}closeModal(e){if("number"==typeof e)this.modalsArray[e]&&this.modalsArray[e].wrapper.destroy();else for(let t=0;t<this.modalsArray.length;t++)if(this.modalsArray[t].wrapper===e){this.modalsArray.splice(t,1);break}}closeAllModals(){for(let e=this.modalsArray.length-1;e>=0;e--)this.modalsArray[e].wrapper.destroy()}get backdropVisible(){return 0!==this.modalsArray.length}get backdropZindex(){return 2*this.modalsArray.length}get backdropBlurred(){return this.modalsArray.length>0&&!0===this.modalsArray[this.modalsArray.length-1].blurBackdrop?"blur(4px)":"none"}prompt(e,t,s=null,i="shade",n=null,l=null,a="select",d){let r=new o.x;return this.openModal("SystemPrompt").subscribe((o=>{o.instance.type=e,o.instance.text=t,o.instance.headertext=s,o.instance.theme=i,o.instance.value=n,o.instance.options=l,o.instance.regex=d,o.instance.optionsAs=!0===a?"radio":a,o.instance.answer.subscribe((e=>{r.next(e),r.complete()}))})),r.asObservable()}confirm(e,t=null,s=null){return this.prompt("confirm",e,t,s)}confirmDeleteRecord(){return this.prompt("confirm",this.language.getLabel("LBL_DELETE_RECORD","","long"),this.language.getLabel("LBL_DELETE_RECORD"))}input(e,t=null,s=null,i=null){return this.prompt("input",e,t,s,i)}info(e,t=null,s=null){return this.prompt("info",e,t,s)}await(e=null){let t=new n.vpe;return this.openModal("SystemLoadingModal",!1).subscribe((s=>{s.instance.messagelabel=e,t.subscribe((()=>{s.instance.self.destroy()}))})),t}}return e=modal,(0,i.Z)(modal,"ɵfac",(function(t){return new(t||e)(n.LFG(a.Pu),n.LFG(d.M),n.LFG(r.A),n.LFG(c.d))})),(0,i.Z)(modal,"ɵprov",n.Yz7({token:e,factory:e.ɵfac,providedIn:"root"})),modal})()},8032:(e,t,s)=>{"use strict";s.d(t,{S:()=>o});var i=s(1180),n=s(2242);let o=(()=>{var e;class modalwindow{constructor(){(0,i.Z)(this,"self",void 0)}}return e=modalwindow,(0,i.Z)(modalwindow,"ɵfac",(function(t){return new(t||e)})),(0,i.Z)(modalwindow,"ɵprov",n.Yz7({token:e,factory:e.ɵfac})),modalwindow})()},5710:(e,t,s)=>{"use strict";s.d(t,{o:()=>A});var i=s(1180),n=s(2242),o=s(1135),l=s(727),a=s(7579),d=s(9646),r=s(6163),c=s(9300),u=s(4004),h=s(4505),m=s(3369),g=s(4154),p=s(5920),f=s(382),b=s(3348),v=s(3278),Z=s(5329),y=s(4044),x=s(2032),w=s(6625),T=s(2222),C=s(2422);let A=(()=>{var e;class model{constructor(e,t,s,a,d,r,c,u,h,m,g,p,f,b,v){(0,i.Z)(this,"backend",void 0),(0,i.Z)(this,"broadcast",void 0),(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"utils",void 0),(0,i.Z)(this,"session",void 0),(0,i.Z)(this,"recent",void 0),(0,i.Z)(this,"router",void 0),(0,i.Z)(this,"toast",void 0),(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"modal",void 0),(0,i.Z)(this,"navigation",void 0),(0,i.Z)(this,"configuration",void 0),(0,i.Z)(this,"injector",void 0),(0,i.Z)(this,"socket",void 0),(0,i.Z)(this,"userpreferences",void 0),(0,i.Z)(this,"httpRequestsRefID",_.uniqueId("model_http_ref_")),(0,i.Z)(this,"_module",""),(0,i.Z)(this,"_id",""),(0,i.Z)(this,"acl",{}),(0,i.Z)(this,"acl_fieldcontrol",{}),(0,i.Z)(this,"data",{}),(0,i.Z)(this,"backupData",{}),(0,i.Z)(this,"data$",void 0),(0,i.Z)(this,"field$",new o.X({field:null,value:null})),(0,i.Z)(this,"isSaving",!1),(0,i.Z)(this,"saved$",new n.vpe),(0,i.Z)(this,"mode$",new n.vpe),(0,i.Z)(this,"canceledit$",new n.vpe),(0,i.Z)(this,"isValid",!1),(0,i.Z)(this,"isLoading",!1),(0,i.Z)(this,"isEditing",!1),(0,i.Z)(this,"isGlobal",!1),(0,i.Z)(this,"isNew",!1),(0,i.Z)(this,"_fields_stati",[]),(0,i.Z)(this,"_fields_stati_tmp",[]),(0,i.Z)(this,"_model_stati_tmp",[]),(0,i.Z)(this,"_messages",[]),(0,i.Z)(this,"reference",""),(0,i.Z)(this,"_fields",[]),(0,i.Z)(this,"messageChange$",new n.vpe),(0,i.Z)(this,"duplicate",!1),(0,i.Z)(this,"templateId",null),(0,i.Z)(this,"duplicateChecking",!1),(0,i.Z)(this,"duplicates",[]),(0,i.Z)(this,"parentmodel",void 0),(0,i.Z)(this,"duplicatecount",0),(0,i.Z)(this,"modelRegisterId",void 0),(0,i.Z)(this,"savingProgress",new o.X(1)),(0,i.Z)(this,"subscriptions",new l.w0),(0,i.Z)(this,"loadingError",!1),(0,i.Z)(this,"validated$",new n.vpe),(0,i.Z)(this,"public",void 0),this.backend=e,this.broadcast=t,this.metadata=s,this.utils=a,this.session=d,this.recent=r,this.router=c,this.toast=u,this.language=h,this.modal=m,this.navigation=g,this.configuration=p,this.injector=f,this.socket=b,this.userpreferences=v,this.data$=new o.X(this.data),this.subscriptions.add(this.broadcast.message$.subscribe((e=>{"timezone.changed"===e.messagetype&&(this.utils.timezoneChanged(this.data,e.messagedata),this.utils.timezoneChanged(this.backupData,e.messagedata))})))}registerModel(){this.module&&this._id&&!this.navigation.modelregister.find((e=>e.model._id==this._id&&e.model.module==this.module))&&(this.modelRegisterId=this.navigation.registerModel(this))}get messages(){return this._messages}get module(){return this._module}set module(e){this._module=e,this.initializeFieldsStati(),this.registerModel()}get backendData(){return this.utils.spiceModel2backend(this.module,this.data)}get id(){return this._id}set id(e){this._id=e,this.registerModel()}get displayname(){return this.getFieldValue("summary_text")}get fields(){return this.module&&_.isEmpty(this._fields)&&(this._fields=this.metadata.getModuleFields(this.module)),this._fields}generateGuid(){return this.utils.generateGuid()}isFieldRequired(e){switch(e){case"date_entered":case"date_modified":return!0;default:return this.metadata.getFieldRequired(this.module,e)}}isRequired(e){return this.isFieldRequired(e)}checkAccess(e){return"detail"==e||"view"==e?this.acl.detail||this.acl.view:this.acl[e]}checkFieldAccess(e){return!(this.acl_fieldcontrol&&this.acl_fieldcontrol[e]&&"1"==this.acl_fieldcontrol[e])}getFieldAccess(e){return this.acl_fieldcontrol&&this.acl_fieldcontrol[e]?parseInt(this.acl_fieldcontrol[e],10):void 0}goDetail(e){if(!this.checkAccess("detail"))return!1;{let t="/module/"+this.module+"/"+this.id;e&&(t="/tab/"+e+"/"+t),this.router.navigate([t])}}goModule(){this.router.navigate(["/module/"+this.module])}getData(e=!0,t="",s=!0,i=!1){let n=new a.x;return e&&this.resetData(),this.isLoading=s,this.backend.get(this.module,this.id,t,this.httpRequestsRefID).subscribe({next:e=>{this.isLoading=!1,this.data=e,this.acl=e.acl,this.acl_fieldcontrol=e.acl_fieldcontrol,""!=t&&this.recent.trackItem(this.module,this.id,this.data),this.initializeFieldsStati(),this.evaluateValidationRules(null,"initialize"),this.emitFieldsChanges(e),this.data$.next(e),this.broadcast.broadcastMessage("model.loaded",{id:this.id,module:this.module,data:this.data}),n.next(e),n.complete()},error:e=>{i&&401!=e.status&&(this.toast.sendToast(this.language.getLabel("LBL_ERROR_LOADING_RECORD"),"error"),this.router.navigate(["/module/"+this.module])),401==e.status&&(this.loadingError=!0),n.error(e)}}),n.asObservable()}validate(e){this.resetMessages(),this.isValid=!0,this.evaluateValidationRules(null,"change");for(let e in this.fields)"id"!==e&&this.getFieldStati(e).required&&(!this.data[e]&&0!==this.data[e]||0===String(this.data[e]).length)&&(this.isValid=!1,this.addMessage("error",this.language.getLabel("MSG_INPUT_REQUIRED")+"!",e)),this.getFieldStati(e).invalid&&(this.isValid=!1);return this.isValid,this.validated$.next(),this.isValid}initializeFieldsStati(){let e=[];for(let t in this.fields)e[t]=this.evaluateFieldStati(t);this._fields_stati=e}getDefaultStati(){return{editable:this.checkAccess("edit"),invalid:!1,required:!1,incomplete:!1,disabled:!1,hidden:!1,readonly:!1}}evaluateFieldStati(e){let t=this.getDefaultStati();return this.acl_fieldcontrol&&this.acl_fieldcontrol[e]&&parseInt(this.acl_fieldcontrol[e],10)<3&&(t.editable=!1),this.isRequired(e)&&(t.required=!0),t}resetFieldStati(e){this._fields_stati[e]=this.evaluateFieldStati(e),this._fields_stati_tmp[e]={...this._fields_stati[e]},this.getFieldMessages(e,"error")&&(this._fields_stati_tmp[e].invalid=!0)}setFieldStatus(e,t,s=!0){try{let i=this._fields_stati[e];return i[t]&&!s?(console.warn("could not set status "+t+" to "+s+" because it has to be: "+i[t]),!1):(this._fields_stati_tmp[e]||(this._fields_stati_tmp[e]={...i}),this._fields_stati_tmp[e][t]=s,!0)}catch(e){return console.warn(e),!1}}setFieldStati(e,t){for(let s in t){if(!this.setFieldStatus(e,s,t[s]))return!1}return!0}getFieldStati(e){let t=this._fields_stati_tmp[e];return t||(t=this._fields_stati[e],t||(t=this.getDefaultStati(),this._fields_stati[e]=t)),t={...t},!t.invalid&&this.getFieldMessages(e,"error")&&(t.invalid=!0),t}evaluateValidationRules(e,t){let s=this.metadata.getModuleValidations(this.module);if(!s)return!0;this._fields_stati_tmp=[],this._model_stati_tmp=[],this.resetMessages();for(let e of s){if(!e.active)continue;let s=0,i=!0;if(e.onevents instanceof Array||(e.onevents=e.onevents.split(",")),!(e.onevents instanceof Array)||e.onevents.includes(t)){if(e.conditions instanceof Array)for(let t of e.conditions){let n=!1;if(n=this.evaluateCondition(t),s+=n?1:0,s>0&&"or"==e.logicoperator){i=!0;break}}if(e.conditions&&e.conditions.length>1&&"and"==e.logicoperator?s<e.conditions.length&&(i=!1):0==s&&e.conditions&&(i=!1),i)for(let t of e.actions){this.executeValidationAction(t)||console.warn("Action "+t.action+" for "+t.fieldname+" failed!")}}}}evaluateCondition(e){let t=!1;if("empty"!=e.comparator&&null==typeof this.data[e.fieldname])return!1;let s,i=this.data[e.fieldname];return s=e.comparator.match(/regex/g)?e.valuations:this.evaluateValidationParams(e.valuations),t=r.A.compare(i,e.comparator,s),t}executeValidationAction(e){let t=this.evaluateValidationParams(e.params);switch(e.action){case"set_value":return this.data[e.fieldname]=t,!0;case"set_value_from_field":return this.data[e.fieldname]=this.data[t],!0;case"set_value_from_user":return this.session.authData.user[t]?this.data[e.fieldname]=this.session.authData.user[t]:this.userpreferences.toUse[t]&&(this.data[e.fieldname]=this.userpreferences.toUse[t]),!0;case"set_message":return t instanceof Object&&(this._messages.push(t),this.messageChange$.emit(!0),!0);case"error":return this.addMessage("error",t,e.fieldname);case"warning":return this.addMessage("warning",t,e.fieldname);case"notice":return this.addMessage("notice",t,e.fieldname);case"hide":return t="string"==typeof t?r.A.strtobool(t):t,this.setFieldStatus(e.fieldname,"hidden",t);case"show":return t=!("string"==typeof t?r.A.strtobool(t):t),this.setFieldStatus(e.fieldname,"hidden",t);case"require":return t="string"==typeof t?r.A.strtobool(t):t,this.setFieldStatus(e.fieldname,"required",t);case"set_stati":return t="string"==typeof t?JSON.parse(t):t,this.setFieldStati(e.fieldname,t);case"set_model_state":if(t instanceof Array)for(let e of t)this.checkModelState(e)||this._model_stati_tmp.push(e);else this.checkModelState(t)||this._model_stati_tmp.push(t);return!0;default:return console.warn("action: "+e.action+" is not defined!"),!1}}evaluateValidationParams(e){if("string"==typeof e){if(/(\<[a-z\_]+\>)/.test(e))for(let t of e.match(/(\<[a-z\_]+\>)/g)){let s=t.replace("<","").replace(">",""),i=this.data[s]?this.data[s]:0;switch(this.metadata.getFieldDefs(this.module,s).type){case"datetimecombo":case"datetime":case"date":i&&(i=i.format("YYYY-MM-DD HH:mm:ss"))}e=e.replace(t,i)}if(/\d+[\.\-]\d+[\.\-]\d+/.test(e)&&/[\+\-]/.test(e)){let t=r.A.strtomoment(e);e=t||e}else if(/\d+\s*[\+\-\*\/\^]\s*\d+/.test(e)){let t=this.utils.compileMathExpression(e);e=t||e}}return e}checkModelState(e){return this._model_stati_tmp.includes(e)}startEdit(e=!0,t=!1){this.isEditing||(e&&!this.duplicate&&(this.backupData=this.buildBackup(this.data)),t||(this.isEditing=!0,this.mode$.emit("edit")),this.navigation.addModelEditing(this.id,this.module,this,this.getFieldValue("summary_text")))}getFieldValue(e){return this.data[e]}getField(e){return this.getFieldValue(e)}setFieldValue(e,t){return this.setField(e,t)}initializeField(e,t){if(!e)return!1;this.data[e]=t}setField(e,t,s=!1){if(!e)return!1;const i=this.data[e];this.data[e]=t,this.evaluateValidationRules(e,"change"),i===t||s||this.field$.next({field:e,value:t}),s||this.data$.next(this.data),this.duplicateCheckOnChange([e])}observeFieldChanges(e){return this.fields[e]?this.field$.pipe((0,c.h)((t=>t.field==e)),(0,u.U)((e=>e.value))):(0,d.of)(null)}setFields(e,t=!1){let s=[];for(let t in e){if(!e.hasOwnProperty(t))continue;let i=e[t];_.isString(i)&&(i=i.trim()),this.data[t]!=i&&this.field$.next({field:t,value:i}),this.data[t]=i,s.push(t)}!0!==t&&this.data$.next(this.data),this.evaluateValidationRules(null,"change"),this.duplicateCheckOnChange(s)}emitFieldsChanges(e){for(let t in e)e.hasOwnProperty(t)&&this.field$.next({field:t,value:e[t]})}cancelEdit(){this.isEditing=!1,this.mode$.emit("display"),this.navigation.removeModelEditing(this.module,this.id),this.backupData&&(this.data=this.backupData,this.data$.next(this.data),this.backupData=null,this.resetMessages()),this.canceledit$.emit(!0)}endEdit(){this.backupData=null,this.isEditing=!1,this.mode$.emit("display"),this.navigation.removeModelEditing(this.module,this.id)}getDirtyFields(){let e={};for(let t in this.data)!t||this.backupData&&_.isEqual(this.data[t],this.backupData[t])||(e[t]=this.data[t]);return e}save(e=!1){let t,s=new a.x;this.isSaving=!0;for(let e in this.data)_.isString(this.data[e])&&(this.data[e]=this.data[e].trim());return!this.isEditing&&_.isEmpty(this.backupData)||this.isNew?t=this.data:(t=this.getDirtyFields(),t.date_modified=this.data.date_modified),this.backend.save(this.module,this.id,t,this.savingProgress,this.templateId,this.httpRequestsRefID).subscribe({next:t=>{this.data=t,this.isNew=!1,this.data$.next(t),this.broadcast.broadcastMessage("model.save",{id:this.id,reference:this.reference,module:this.module,data:this.data,changed:this.getDirtyFields(),backupdata:this.backupData}),this.isSaving=!1,e&&this.toast.sendToast(this.language.getLabel("LBL_DATA_SAVED")+".","success"),this.saved$.emit({changed:this.getDirtyFields(),backupdata:this.backupData}),this.endEdit(),this.initializeFieldsStati(),s.next(!0),s.complete()},error:t=>{if(409===t.status)this.modal.openModal("ObjectOptimisticLockingModal",!1,this.injector).subscribe((e=>{e.instance.conflicts=t.error.error.conflicts,e.instance.responseSubject=s}));else e&&this.toast.sendToast(this.language.getLabel("LBL_ERROR")+" "+t.status,"error",t.error.error.lbl?this.language.getLabel(t.error.error.lbl):t.error.error.message),s.error(t),s.complete();this.isSaving=!1}}),s.asObservable()}delete(){let e=new a.x;return this.backend.deleteRequest(`module/${this.module}/${this.id}`,null,this.httpRequestsRefID).subscribe({next:()=>{this.broadcast.broadcastMessage("model.delete",{id:this.id,module:this.module,data:_.clone(this.data)}),e.next(!0),e.complete()},error:()=>{e.error("unable to delete record")}}),e.asObservable()}saveAndSend(e=!1,t="LBL_DATA_SENT"){let s=e,i=this.save(!1);return s&&this.toast.sendToast(this.language.getLabel(t)+".","success"),i}reset(){this.id=null,this.module=null,this._fields_stati_tmp=this._fields_stati=[],this._fields=[],this.isLoading=!1,this.isEditing=!1,this.mode$.emit("display"),this.resetMessages(),this.resetData()}clone(){return{module:this.module,id:this.id,data:{...this.data}}}getAuditLog(e={}){let t=new a.x;return this.backend.getRequest(`module/${this.module}/${this.id}/auditlog`,e,this.httpRequestsRefID).subscribe({next:e=>{t.next(e),t.complete()},error:e=>{t.next(e),t.complete()}}),t.asObservable()}resetData(){this.isValid=!0,this.data={}}initialize(e=null){return this.initializeModel(e)}initializeModel(e=null){this.id||(this.id=this.generateGuid(),this.isNew=!0),this.duplicates=[],this.data={};let t=this.metadata.getModuleFields(this.module);t.assigned_user_id&&(this.data.assigned_user_id=this.session.authData.userId,this.data.assigned_user_name=this.session.authData.userName,this.data.assigned_user=this.session.authData.user),t.assigned_orgunit_id&&this.session.authData.user.orgunit&&(this.data.assigned_orgunit_id=this.session.authData.user.orgunit.id,this.data.assigned_orgunit_name=this.session.authData.user.orgunit.name,this.data.assigned_orgunit=this.session.authData.user.orgunit),this.data.modified_by_id=this.session.authData.userId,this.data.modified_by_name=this.session.authData.userName,this.data.modified_by_user=this.session.authData.user,this.data.created_by_id=this.session.authData.userId,this.data.created_by_name=this.session.authData.userName,this.data.created_by_user=this.session.authData.user,this.data.date_entered=new moment,this.data.date_modified=new moment,this.executeCopyRules(e),this.setFieldsDefaultValues(),this.evaluateValidationRules(null,"initialize"),this.acl={create:!0,edit:!0,detail:!0},this.acl_fieldcontrol=this.metadata.moduleDefs[this.module]?.acl_fieldcontrol??[],this.initializeFieldsStati(),this.evaluateValidationRules(null,"initialize"),this.parentmodel=e}setData(e,t=!0,s){e.acl&&(this.acl=e.acl),e.acl_fieldcontrol&&(this.acl_fieldcontrol=e.acl_fieldcontrol,delete e.acl_fieldcontrol),this.data=t?this.utils.backendModel2spice(this.module,e):e,!0!==s&&this.data$.next(this.data),this.initializeFieldsStati()}addModel(e="",t=null,s={},i=!1,n){let o=new a.x;if(this.metadata.checkModuleAcl(this.module,"create")){this.initializeModel(t),this.reference=e;for(let e in s)this.data[e]=s[e];this.evaluateValidationRules(null,"initialize"),this.modal.openModal("ObjectEditModal",!1,this.injector).subscribe((e=>{e&&(e.instance.model.isNew=!0,e.instance.reference=this.reference,e.instance.preventGoingToRecord=i,n&&(e.instance.componentconfig=n),e.instance.action$.subscribe((e=>{"save"!=e&&"savegodetail"!=e||(o.next(this.data),this.recent.trackItem(this.module,this.id,this.data)),o.complete()})))}))}else this.toast.sendToast(this.language.getLabel("MSG_NOT_AUTHORIZED_TO_CREATE")+" "+this.language.getModuleName(this.module),"error"),window.setTimeout((()=>{o.complete()}),100);return o.asObservable()}executeCopyRules(e){if(this.copyParentReferenceAddresses(e),this.executeCopyRulesGeneric(),e)if(_.isArray(e))for(let t of e)t.data&&this.executeCopyRulesParent(t);else e.data&&this.executeCopyRulesParent(e)}copyParentReferenceAddresses(e){if(!e)return;const t=this.configuration.getData("spice_address_references");Array.isArray(t)&&t.forEach((t=>{t.child_module==this.module&&e.module==t.parent_module&&this.copyReferencedAddress(t,e.data)}))}copyReferencedAddress(e,t){const s={};["address_street","address_street_number","address_street_number_suffix","address_attn","address_city","address_district","address_postalcode","address_state","address_country","address_latitude","address_longitude"].forEach((i=>s[`${e.child_address_key}_${i}`]=t[`${e.parent_address_key}_${i}`])),s[e.child_address_key+"_address_reference_id"]=t.id,this.setFields(s)}setFieldsDefaultValues(){const e=this.metadata.getModuleFields(this.module);e&&_.each(e,(e=>{"default"in e&&null==this.data[e.name]&&"link"!=e.type&&"non-db"!=e.source&&this.setFixedValue(e.name,e.default)}))}executeCopyRulesGeneric(){let e=this.metadata.getCopyRules("*",this.module);for(let t of e)t.tofield&&t.fixedvalue?this.setFixedValue(t.tofield,t.fixedvalue):t.tofield&&t.calculatedvalue&&this.setField(t.tofield,this.getCalculatedValue(t))}executeCopyRulesParent(e){e.data.id||(e.data.id=e.id);let t=this.metadata.getCopyRules(e.module,this.module);for(let s of t)s.tofield&&(s.fromfield?this.copyValue(s.tofield,e.data[s.fromfield],s.params):s.fixedvalue&&this.setFixedValue(s.tofield,s.fixedvalue),s.calculatedvalue&&this.setField(s.tofield,this.getCalculatedValue(s,e.data[s.fromfield])))}copyValue(e,t,s={}){let i=this.metadata.getFieldDefs(this.module,e);if(i)switch(i.type){case"json":this.setField(e,JSON.parse(JSON.stringify(t)));break;case"link":if(_.isObject(t)&&t.beans){const i={beans:{}};for(let n in t.beans){if(!t.beans.hasOwnProperty(n))continue;let o=n;s?.generatenewid&&(o=this.utils.generateGuid()),i.beans[o]={...t.beans[n]},i.beans[o].id=o,this.setField(e,i)}}break;default:this.setField(e,t)}else this.setField(e,t)}setFixedValue(e,t){let s=this.metadata.getFieldDefs(this.module,e);if((!s||s&&!s.type)&&this.setField(e,t),s&&s.type)if("bool"===s.type)this.setField(e,"true"===t||"1"===t||"false"!==t&&"0"!==t&&null);else"(NULL)"==t&&(t=null),this.setField(e,t)}getCalculatedValue(e,t){let s=this.session.getSessionData("timezone",!1)||moment.tz.guess(!0);switch(e.calculatedvalue){case"now":return(new moment.utc).tz(s);case"nextfullhour":let i=(new moment.utc).tz(s);return 0!=i.minute()&&(i.minute(0),i.add(1,"h")),e.params?.number&&e.params?.unit&&i.add(e.params.number,e.params.unit),i;case"addDate":const n=moment.isMoment(t)?new moment(t):(new moment.utc).tz(s);return e.params?.number&&e.params?.unit?n.add(e.params.number,e.params.unit):n;case"currentYear":return i=(new moment.utc).tz(s),i.year()}return""}edit(e=!1,t=""){if(!this.checkAccess("edit"))return(0,d.of)(!1);let s=new a.x;return this.modal.openModal("ObjectEditModal",!1,this.injector).subscribe((i=>{i&&(t&&""!=t&&(i.instance.componentSet=t),e&&i.instance.model.getData(!1,"editview",!1),i.instance.actionSubject.subscribe((e=>{s.next(e),s.complete()})))})),s.asObservable()}duplicateCheckOnChange(e,t=!1){if(this.isNew&&this.metadata.getModuleDuplicatecheckOnChange(this.module)){let s=this.metadata.getModuleDuplicateCheckFields(this.module);if(0==s.length)return;let i=!1,n=!1;for(let t of s)n||(n=e.indexOf(t)>=0),i||(i=this.getField(t));if(i&&n||t){let e=new a.x;return this.duplicateCheck(!0).subscribe({next:t=>{this.duplicates=t.records,this.duplicatecount=t.count,e.next(!0),e.complete()},error:()=>{e.next(!1),e.complete()}}),e.asObservable()}n&&!i&&(this.duplicates=[])}return(0,d.of)(!1)}duplicateCheck(e=!1){if(this.metadata.getModuleDuplicatecheck(this.module)){this.duplicateChecking=!0;let t=new a.x;if(e){let e=this.data;e.id=this.id,this.backend.checkDuplicates(this.module,e,this.httpRequestsRefID).subscribe({next:e=>{t.next(e),t.complete(),this.duplicateChecking=!1},error:()=>{t.next([]),t.complete(),this.duplicateChecking=!1}})}else this.backend.getDuplicates(this.module,this.id,this.httpRequestsRefID).subscribe({next:e=>{t.next(e),t.complete(),this.duplicateChecking=!1},error:()=>{t.next([]),t.complete(),this.duplicateChecking=!1}});return t.asObservable()}return(0,d.of)([])}addMessage(e,t,s=null,i="validation"){return this._messages.push({type:e,message:t,reference:s,source:i}),"error"==e&&s&&this.setFieldStatus(s,"invalid",!0),this.messageChange$.emit(!0),!0}getMessages(){return this.messages}setFieldMessage(e,t,s,i){return this.resetFieldMessages(s,e,i),"error"==e&&this.setFieldStatus(s,"invalid",!0),this.addMessage(e,t,s,i)}getFieldMessages(e,t){let s=this._messages.filter((s=>s.reference==e&&(!t||s.type==t)));return s.length>0&&s}resetFieldMessages(e,t,s){if(0==this._messages.length)return!0;for(let i=this._messages.length-1;i>=0;i--){let n=this._messages[i];n.reference!=e||t&&n.type!=t||s&&n.source!=s||(this._messages.splice(i,1),this.messageChange$.emit(!0))}return this.resetFieldStati(e),!0}resetMessages(e,t="validation"){if(0==this._messages.length)return!0;for(let s=this._messages.length-1;s>=0;s--){let i=this._messages[s];e&&i.type!=e||t&&i.source!=t||(this._messages.splice(s,1),this.messageChange$.emit(!0)),this.resetFieldStati(i.reference)}return!0}isFieldARelationLink(e){try{return"link"==this.fields[e].type}catch(e){return!1}}getRelatedRecords(e){let t=[];if(!this.isFieldARelationLink(e))return t;if(!this.data[e])return t;for(let s in this.data[e].beans)t.push(this.data[e].beans[s]);return t}setRelatedRecords(e,t=null){return!!this.isFieldARelationLink(e)&&(this.data[e]={beans:{}},t?this.addRelatedRecords(e,t):void this.field$.next({field:e,value:this.getRelatedRecords(e)}))}addRelatedRecords(e,t,s=!0){if(!this.isFieldARelationLink(e))return!1;this.data[e]||(this.data[e]={beans:{}});for(let i of t)!s&&this.data[e].beans[i.id]||(this.data[e].beans[i.id]=i);return this.field$.next({field:e,value:this.getRelatedRecords(e)}),!0}removeRelatedRecords(e,t){if(!this.isFieldARelationLink(e))return!1;this.data[e]||(this.data[e]={beans:[]}),this.data[e].beans_relations_to_delete||(this.data[e].beans_relations_to_delete={});for(let s of t)for(let t in this.data[e].beans)s==t&&(delete this.data[e].beans[t],this.data[e].beans_relations_to_delete[t]=s);return!0}ngOnDestroy(){this.isEditing&&this.navigation.removeModelEditing(this.module,this.id),this.modelRegisterId&&this.navigation.unregisterModel(this.modelRegisterId),this.subscriptions.unsubscribe(),this.backend.cancelPendingRequests([this.httpRequestsRefID])}isDirty(){return this.isEditing&&_.values(this.getDirtyFields()).length}checkModuleFilterMatch(e){let t=this.configuration.getData("modulefilters");if(!t[e]||!t[e].filterdefs)return!1;let s=t[e].filterdefs;return s="string"==typeof s?JSON.parse(s):s,!!t&&this.checkModuleFilterGroupMatch(s)}checkModuleFilterGroupMatch(e){if("own"==e.groupscope&&this.data.assigned_user_id!=this.session.authData.userId)return!1;let t=!1;return!(!e||!e.conditions)&&(e.conditions.forEach((s=>(t=s.conditions?this.checkModuleFilterGroupMatch(s):this.checkModuleFilterConditionMatch(s),!("AND"==e.logicaloperator&&!t)&&(!!t||void 0)))),t)}checkModuleFilterConditionMatch(e){switch(e.operator){case"empty":return""==this.getFieldValue(e.field)||null==this.getFieldValue(e.field);case"equals":return this.getFieldValue(e.field)==e.filtervalue;case"oneof":return(e.filtervalue instanceof Array?e.filtervalue:e.filtervalue.split(",")).indexOf(this.getFieldValue(e.field))>-1;case"true":return 1==this.getFieldValue(e.field);case"false":return 0==this.getFieldValue(e.field);case"starts":return 0==this.getFieldValue(e.field).indexOf(e.filtervalue);case"contains":return this.getFieldValue(e.field).includes(e.filtervalue);case"ncontains":return!this.getFieldValue(e.field).includes(e.filtervalue);case"greater":return this.getFieldValue(e.field)>e.filtervalue;case"gequal":return this.getFieldValue(e.field)>=e.filtervalue;case"less":return this.getFieldValue(e.field)<e.filtervalue;case"lequal":return this.getFieldValue(e.field)<=e.filtervalue;case"today":return moment(this.getFieldValue(e.field)).isSame(new moment,"days");case"past":return moment(this.getFieldValue(e.field)).isBefore(new moment);case"future":return moment(this.getFieldValue(e.field)).isAfter(new moment);case"thismonth":return moment(this.getFieldValue(e.field)).isSame(new moment,"month");case"nextmonth":return moment(this.getFieldValue(e.field)).isAfter(new moment,"month");case"thisyear":return moment(this.getFieldValue(e.field)).isSame(new moment,"year");case"nextyear":return moment(this.getFieldValue(e.field)).isAfter(new moment,"year");case"inndays":return moment(this.getFieldValue(e.field)).isSame((new moment).add(+e.filtervalue,"d"),"days");case"ndaysago":return moment(this.getFieldValue(e.field)).isSame((new moment).subtract(+e.filtervalue,"d"),"days");case"inlessthandays":return moment(this.getFieldValue(e.field)).isBefore((new moment).add(+e.filtervalue,"d"),"days");case"inmorethandays":return moment(this.getFieldValue(e.field)).isAfter((new moment).add(+e.filtervalue,"d"),"days")}}buildBackup(e){let t={};return _.each(e,((s,i)=>{_.isObject(s)?_.isArray(s)?t[i]=s.map((e=>this.buildBackup(e))):moment.isMoment(s)?t[i]=moment(s):t[i]=this.buildBackup(s):t[i]=e[i]})),t}}return e=model,(0,i.Z)(model,"ɵfac",(function(t){return new(t||e)(n.LFG(h.y),n.LFG(m.f),n.LFG(g.Pu),n.LFG(r.A),n.LFG(p.n),n.LFG(f.h),n.LFG(b.F0),n.LFG(v.A),n.LFG(Z.d),n.LFG(y.o),n.LFG(x.G),n.LFG(w.C),n.LFG(n.zs3),n.LFG(T.W),n.LFG(C.z))})),(0,i.Z)(model,"ɵprov",n.Yz7({token:e,factory:e.ɵfac})),model})()},323:(e,t,s)=>{"use strict";s.d(t,{H:()=>m});var i=s(1180),n=s(1135),o=s(7579),l=s(2242),a=s(4505),d=s(6625),r=s(5920),c=s(3278),u=s(3369),h=s(5329);let m=(()=>{var e;class modelattachments{constructor(e,t,s,o,l,a){(0,i.Z)(this,"backend",void 0),(0,i.Z)(this,"configurationService",void 0),(0,i.Z)(this,"session",void 0),(0,i.Z)(this,"toast",void 0),(0,i.Z)(this,"broadcast",void 0),(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"httpRequestsRefID",window._.uniqueId("model_attachments_http_ref_")),(0,i.Z)(this,"module",void 0),(0,i.Z)(this,"id",void 0),(0,i.Z)(this,"count",0),(0,i.Z)(this,"files",[]),(0,i.Z)(this,"loading",!1),(0,i.Z)(this,"loaded",!1),(0,i.Z)(this,"loaded$",void 0),this.backend=e,this.configurationService=t,this.session=s,this.toast=o,this.broadcast=l,this.language=a,this.loaded$=new n.X(!1)}getCount(e){let t=new o.x;return this.backend.getRequest(`common/spiceattachments/module/${this.module}/${this.id}/count`,{categoryId:e},this.httpRequestsRefID).subscribe({next:e=>{this.count=e.count,t.next(this.count),t.complete()},error:()=>{t.complete()}}),t.asObservable()}broadcastAttachmentCount(){this.broadcast.broadcastMessage("attachments.loaded",{module:this.module,id:this.id,attachmentcount:this.count,reload:!0})}getAttachments(e){let t=new o.x;return this.files=[],this.loading=!0,this.backend.getRequest(`common/spiceattachments/module/${this.module}/${this.id}`,{categoryId:e},this.httpRequestsRefID).subscribe({next:e=>{for(let t in e)this.files.find((e=>e.id==t))||(e[t].date=new moment(e[t].date),this.files.push(e[t]));this.count=this.files.length,this.broadcastAttachmentCount(),this.loading=!1,t.next(this.files),t.complete(),this.loaded=!0,this.loaded$.next(!0)},error:e=>{this.loading=!1,t.error(e),t.complete()}}),t.asObservable()}cloneAttachments(e,t){let s=new o.x;return this.backend.postRequest(`common/spiceattachments/module/${this.module}/${this.id}/clone/${e.module}/${e.id}`,{},{categoryId:t},this.httpRequestsRefID).subscribe({next:e=>{for(let t in e)this.files.find((e=>e.id==t))||(e[t].date=new moment(e[t].date),this.files.push(e[t]));this.count=this.files.length,this.broadcastAttachmentCount(),s.next(this.files),s.complete()},error:e=>{this.loading=!1,s.error(e),s.complete()}}),s.asObservable()}humanFileSize(e){let t=1024,s=e;if(Math.abs(e)<t)return s+" B";let i=["kB","MB","GB","TB","PB","EB","ZB","YB"],n=-1;do{s/=t,++n}while(Math.abs(s)>=t&&n<i.length-1);return s.toFixed(1)+" "+i[n]}uploadAttachmentsBase64(e,t){if(0===e.length)return;let s=new o.x,i=this.configurationService.getSystemParamater("upload_maxsize");for(let n of e){if(i&&n.size>i){this.toast.sendToast(this.language.getLabelFormatted("LBL_EXCEEDS_MAX_UPLOADFILESIZE",[n.name,this.humanFileSize(i)]),"error");continue}let e={date:new moment,file:"",file_mime_type:n.type?n.type:"application/octet-stream",filesize:n.size,filename:n.name,category_ids:t,filemd5:void 0,id:"",text:"",thumbnail:"",user_id:"1",user_name:"admin",uploadprogress:0};this.files.unshift(e),this.count++,this.broadcastAttachmentCount(),this.readFile(n).subscribe((()=>{this.uploadForUploadAttachmentsBase64(e,s,n)}))}return s.asObservable()}uploadAttachmentsBase64FromArray(e){if(0===e.length)return;let t=new o.x,s=this.configurationService.getSystemParamater("upload_maxsize");for(let i of e){if(s&&i.size>s){this.toast.sendToast(this.language.getLabelFormatted("LBL_EXCEEDS_MAX_UPLOADFILESIZE",[i.name,this.humanFileSize(s)]),"error");continue}let e={date:new moment,file:"",file_mime_type:i.type?i.type:"application/octet-stream",filesize:i.size,filename:i.name,filemd5:void 0,id:"",text:"",thumbnail:"",user_id:"1",user_name:"admin",uploadprogress:0};this.files.unshift(e),this.count++,this.broadcastAttachmentCount(),this.uploadForUploadAttachmentsBase64(e,t,i)}return t.asObservable()}uploadForUploadAttachmentsBase64(e,t,s){let i=new n.X(0);i.subscribe((t=>{e.uploadprogress=Math.floor(t)}));let o={file:s.filecontent,filename:s.name,filemimetype:s.type?s.type:"application/octet-stream",category_ids:e.category_ids},l="common/spiceattachments";this.module&&this.id&&(l+=`/module/${this.module}/${this.id}`),this.backend.postRequestWithProgress(l,null,o,i,this.httpRequestsRefID).subscribe((s=>{e.id=s[0].id,e.thumbnail=s[0].thumbnail,e.filemd5=s[0].filemd5,e.user_id=s[0].user_id,e.user_name=s[0].user_name,delete e.uploadprogress,t.next({files:s}),t.complete()}))}uploadFileBase64(e,t,s){let i=new o.x,l=this.configurationService.getSystemParamater("upload_maxsize");if(l&&atob(e).length>l)return void this.toast.sendToast(this.language.getLabelFormatted("LBL_EXCEEDS_MAX_UPLOADFILESIZE",[t,this.humanFileSize(l)]),"error");let a={date:new moment,file:"",file_mime_type:s||"application/octet-stream",filesize:atob(e).length,filename:t,filemd5:void 0,id:"",text:"",thumbnail:"",user_id:"1",user_name:"admin",uploadprogress:0};this.files.unshift(a),this.count++,this.broadcastAttachmentCount();let d=new n.X(0);d.subscribe((e=>{a.uploadprogress=Math.floor(e)}));let r={file:e,filename:t,filemimetype:s||"application/octet-stream"},c="common/spiceattachments";return this.module&&this.id&&(c+=`/module/${this.module}/${this.id}`),this.backend.postRequestWithProgress(c,null,r,d,this.httpRequestsRefID).subscribe((e=>{a.id=e[0].id,a.thumbnail=e[0].thumbnail,a.filemd5=e[0].filemd5,a.user_id=e[0].user_id,a.user_name=e[0].user_name,delete a.uploadprogress,i.next({files:e}),i.complete()})),i.asObservable()}readFile(e){let t=new o.x,s=new FileReader;return s.file=e,s.onloadend=e=>{let i=s.result.toString();i=i.substring(i.indexOf("base64,")+7);let n=s.file;n.filecontent=i,t.next(n),t.complete()},s.readAsDataURL(e),t.asObservable()}deleteAttachment(e){this.backend.deleteRequest(`common/spiceattachments/module/${this.module}/${this.id}/${e}`,null,this.httpRequestsRefID).subscribe((t=>{let s=this.files.findIndex((t=>t.id==e));this.files.splice(s,1),this.count--,this.broadcastAttachmentCount()}),(e=>{this.toast.sendToast("Cannot delete attachment.","error",e.error.error.message,!1)}))}downloadAttachment(e,t){this.backend.getRequest(`common/spiceattachments/module/${this.module}/${this.id}/${e}`,null,this.httpRequestsRefID).subscribe((e=>{let t=this.b64toBlob(e.file,e.file_mime_type),s=URL.createObjectURL(t),i=document.createElement("a");document.body.appendChild(i),i.href=s,i.download=e.filename,i.type=e.file_mime_type,i.click(),i.remove()}))}downloadAttachmentForField(e,t,s,i){this.backend.getRequest(`common/spiceattachments/module/${e}/${t}/byfield/${s}`,null,this.httpRequestsRefID).subscribe((e=>{let t=this.b64toBlob(e.file,e.file_mime_type),s=URL.createObjectURL(t),i=document.createElement("a");document.body.appendChild(i),i.href=s,i.download=e.filename,i.type=e.file_mime_type,i.click(),i.remove()}))}getAttachment(e){let t=new o.x;return this.backend.getRequest(`common/spiceattachments/module/${this.module}/${this.id}/${e}`,null,this.httpRequestsRefID).subscribe({next:e=>{t.next(e.file),t.complete()},error:e=>{t.error(e),t.complete()}}),t.asObservable()}b64toBlob(e,t="",s=512){let i=atob(e),n=[];for(let e=0;e<i.length;e+=s){let t=i.slice(e,e+s),o=new Array(t.length);for(let e=0;e<t.length;e++)o[e]=t.charCodeAt(e);let l=new Uint8Array(o);n.push(l)}return new Blob(n,{type:t})}openAttachment(e,t){this.backend.getRequest(`common/spiceattachments/module/${this.module}/${this.id}/${e}`,null,this.httpRequestsRefID).subscribe((e=>{let t=this.b64toBlob(e.file,e.file_mime_type),s=URL.createObjectURL(t);window.open(s,"_blank")}))}ngOnDestroy(){this.backend.cancelPendingRequests([this.httpRequestsRefID])}}return e=modelattachments,(0,i.Z)(modelattachments,"ɵfac",(function(t){return new(t||e)(l.LFG(a.y),l.LFG(d.C),l.LFG(r.n),l.LFG(c.A),l.LFG(u.f),l.LFG(h.d))})),(0,i.Z)(modelattachments,"ɵprov",l.Yz7({token:e,factory:e.ɵfac})),modelattachments})()},2644:(e,t,s)=>{"use strict";s.d(t,{t:()=>b});var i=s(1180),n=s(2242),o=s(727),l=s(1135),a=s(7579),d=s(9646),r=s(3369),c=s(4505),u=s(4154),h=s(5329),m=s(2422),g=s(5920),p=s(6625),f=s(3278);let b=(()=>{var e;class modellist{constructor(e,t,s,a,d,r,c,u){(0,i.Z)(this,"broadcast",void 0),(0,i.Z)(this,"backend",void 0),(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"userpreferences",void 0),(0,i.Z)(this,"session",void 0),(0,i.Z)(this,"configuration",void 0),(0,i.Z)(this,"toast",void 0),(0,i.Z)(this,"httpRequestsRefID",_.uniqueId("model_list_http_ref_")),(0,i.Z)(this,"module",""),(0,i.Z)(this,"modulefilter",void 0),(0,i.Z)(this,"relatefilter",void 0),(0,i.Z)(this,"listDataChanged$",new n.vpe),(0,i.Z)(this,"filtercontextbeanid",void 0),(0,i.Z)(this,"listType$",void 0),(0,i.Z)(this,"listTypeComponent$",new n.vpe),(0,i.Z)(this,"listData",{list:[],totalcount:0}),(0,i.Z)(this,"offset",0),(0,i.Z)(this,"listSelected",{type:"",items:[]}),(0,i.Z)(this,"selectionChanged$",new n.vpe),(0,i.Z)(this,"sortArray",[]),(0,i.Z)(this,"lastLoad",new moment),(0,i.Z)(this,"loadlimit",50),(0,i.Z)(this,"isLoading",!1),(0,i.Z)(this,"cancelPendingRequests",!0),(0,i.Z)(this,"searchTerm",""),(0,i.Z)(this,"moduleAggregates",[]),(0,i.Z)(this,"moduleAggregatesByFieldname",{}),(0,i.Z)(this,"searchAggregates",void 0),(0,i.Z)(this,"selectedAggregates",[]),(0,i.Z)(this,"reloadTimeOut",void 0),(0,i.Z)(this,"changedAggregates",{added:[],deleted:[]}),(0,i.Z)(this,"searchGeo",void 0),(0,i.Z)(this,"buckets",{}),(0,i.Z)(this,"useCache",!0),(0,i.Z)(this,"standardLists",[]),(0,i.Z)(this,"currentList",void 0),(0,i.Z)(this,"serviceSubscriptions",new o.w0),(0,i.Z)(this,"displayAggregates",!1),(0,i.Z)(this,"displayFilters",!1),(0,i.Z)(this,"_listfields",[]),(0,i.Z)(this,"listfield$",new n.vpe),(0,i.Z)(this,"embeddedByComponent",void 0),(0,i.Z)(this,"disableAutoloadListAll",!1),this.broadcast=e,this.backend=t,this.metadata=s,this.language=a,this.userpreferences=d,this.session=r,this.configuration=c,this.toast=u,this.setDisableAutoloadListAll(),this.subscribeToBroadcast(),this.generateStandardLists(),this.listType$=new l.X(this.standardLists[0])}subscribeToBroadcast(){this.serviceSubscriptions.add(this.broadcast.message$.subscribe((e=>{this.handleMessage(e)})))}setDisableAutoloadListAll(){this.disableAutoloadListAll=!!this.configuration.getCapabilityConfig("module").disableAutoloadListAll}initialize(e,t){this.module=e,this.generateStandardLists(),this.embeddedByComponent=t,this.resetListData(),this.loadModuleAggregates();let s="all",i=this.userpreferences.getPreference(e);i?.lastListTypeId&&this.listTypeExists(i.lastListTypeId)&&(s=i.lastListTypeId),this.setListType(s,!1)}loadModuleAggregates(){this.moduleAggregates=[];for(let e of this.metadata.getModuleAggregates(this.module))this.moduleAggregates.push({...e});this.moduleAggregates.forEach((e=>this.moduleAggregatesByFieldname[e.fieldname]=e)),this.moduleAggregates.sort(((e,t)=>e.priority||t.priority?!e.priority||e.priority>t.priority?1:-1:0))}handleMessage(e){if(e.messagedata.module===this.module)switch(e.messagetype){case"model.delete":let t=this.listData.list.findIndex((t=>t.id==e.messagedata.id));if(t>=0){if(this.listData.list.splice(t,1),this.listData.totalcount--,this.bucketfield){let t=[];if(this.bucketamountfield)for(let s of this.bucketamountfield)t.push({fieldname:s.name,value:e.messagedata.data[s.name]});this.removeItemFromBucket(e.messagedata.data[this.bucketfield],t)}this.listDataChanged$.next(!0)}break;case"model.save":let s=this.listData.list.findIndex((t=>t.id==e.messagedata.id));if(s>=0){let t=this.listData.list[s].selected;if(this.listData.list[s]=e.messagedata.data,t&&(this.listData.list[s].selected=!0),this.bucketfield){if(e.messagedata.changed&&e.messagedata.changed[this.bucketfield]){let t=[];for(let s of this.bucketamountfield)t.push({fieldname:s.name,valuefrom:e.messagedata.backupdata[s.name],valueto:e.messagedata.data[s.name]});this.updateBuckets(e.messagedata.backupdata[this.bucketfield],e.messagedata.data[this.bucketfield],t)}else if(this.bucketamountfield){let t=this.buckets.bucketitems.find((t=>t.bucket==e.messagedata.data[this.bucketfield]));for(let s of this.bucketamountfield)e.messagedata.changed&&e.messagedata.changed[s.name]&&(t.values["_bucket_agg_"+s.name]+=e.messagedata.data[s.name]-e.messagedata.backupdata[s.name])}this.listDataChanged$.next(!0)}}else this.reLoadList()}}ngOnDestroy(){this.serviceSubscriptions.unsubscribe(),this.backend.cancelPendingRequests([this.httpRequestsRefID,this.httpRequestsRefID+"_get_list_data"])}setSortField(e,t,s=!0){if(!e||this.isLoading)return;let i=this.sortArray.findIndex((t=>t.sortfield==e));if(i>=0){let e=this.sortArray[i];"ASC"==e.sortdirection?e.sortdirection="DESC":this.sortArray.splice(i,1)}else this.sortArray.push({sortfield:e,sortdirection:t||"ASC"})}getSortField(e){let t=this.sortArray.findIndex((t=>t.sortfield==e));if(t>=0){return{sortdirection:this.sortArray[t].sortdirection,sortindex:t,sortitems:this.sortArray.length}}return!1}getSortFields(){let e=[];for(let t of this.sortArray)e.push(this.language.getFieldDisplayName(this.module,t.sortfield));return e.join(", ")}get isSorted(){return this.sortArray.length>0}addCustomListType(e){this.metadata.addModuleListType(this.module,e)}listTypeExists(e){return!!this.getListTypes().find((t=>t.id==e))}setListType(e,t=!0,s=[]){if(e==this.currentList?.id)return;const i=this.currentList?.listcomponent;if(this.displayAggregates=!1,this.displayFilters=!1,this.currentList=this.getListTypes().find((t=>t.id===e)),this.currentList){if(this.determineListFields(),t){let t=this.userpreferences.getPreference(this.module);t||(t={}),t.lastListTypeId=e,this.userpreferences.setPreference(this.module,t)}this.currentList.aggregates?this.selectedAggregates=JSON.parse(atob(this.currentList.aggregates)):this.selectedAggregates=[],this.currentList.sortfields?this.sortArray=JSON.parse(atob(this.currentList.sortfields)):this.sortArray=s,this.emitListTypeChange(),this.currentList.listcomponent!=i&&this.emitListTypeComponentChange()}}determineListFields(){this._listfields=[];let e=this.getFieldDefs();const t=this.embeddedByComponent||this.currentList.listcomponent;let s=this.metadata.getComponentConfig(t,this.module),i=this.metadata.getFieldSetFields(s.fieldset);for(let t of i){let s=e?e.find((e=>e.id==t.id)):void 0;e&&s?this._listfields.push({id:t.id,field:t.field,fieldconfig:t.fieldconfig,sort:s.sort,width:s.width}):e||t.fieldconfig.hidden||this._listfields.push({id:t.id,field:t.field,fieldconfig:t.fieldconfig})}e&&this._listfields.sort(((t,s)=>e.findIndex((e=>e.id==t.id))>e.findIndex((e=>e.id==s.id))?1:-1))}isCustomList(e){return e||(e=this.currentList.id),!this.standardLists.some((t=>t.id==e))}set listfields(e){this._listfields=e;for(let e in this.sortArray)this._listfields.find((t=>t.field==this.sortArray[e].sortfield))||this.sortArray.splice(parseInt(e,10),1);this.listfield$.emit(this._listfields)}get listfields(){return this._listfields}canDelete(){try{return"all"!=this.currentList.id&&"owner"!=this.currentList.id}catch(e){return!1}}filterEnabled(){try{return"all"!=this.currentList.id&&"owner"!=this.currentList.id}catch(e){return!1}}aggregatesEnabled(){try{return!(!this.searchAggregates||_.isEmpty(this.searchAggregates))}catch(e){return!1}}setToSession(){this.useCache&&this.configuration.setData("lastlist"+this.module,JSON.stringify({listdata:this.listData,sortarray:this.sortArray,searchterm:this.searchTerm,searchaggregates:this.searchAggregates,selectedaggregates:this.selectedAggregates,buckets:this.buckets}))}loadFromSession(){if(!this.useCache)return!1;let e=JSON.parse(this.configuration.getData("lastlist"+this.module));return!(!e||e.buckets?.bucketfield!=this.buckets?.bucketfield)&&(this.listData=e.listdata,this.searchTerm=e.searchterm,this.searchAggregates=e.searchaggregates,this.selectedAggregates=e.selectedaggregates,this.sortArray=e.sortarray,this.buckets=e.buckets,!0)}getGlobal(){return"1"==this.currentList.global}getFieldDefs(){try{return JSON.parse(atob(this.currentList.fielddefs))}catch(e){return}}getFilterDefs(){try{return JSON.parse(this.currentList.filterdefs)}catch(e){return{logicaloperator:"and",groupscope:"all",conditions:[]}}}addListType(e){let t=new a.x;return this.backend.postRequest("configuration/spiceui/core/modules/"+this.module+"/listtypes",{},JSON.stringify(e),this.httpRequestsRefID).subscribe((e=>{this.addCustomListType(e),this.setListType(e.id),t.next(!0),t.complete()})),t.asObservable()}updateStandardListsComponent(e,t){this.standardLists[0].listcomponent!=t&&(this.standardLists.forEach((e=>{e.listcomponent=t})),this.determineListFields(),this.userpreferences.setPreference("defaultlisttype",t,!0,this.module),this.emitListTypeComponentChange())}updateListTypeComponent(e){this.currentList?.listcomponent!=e&&(this.metadata.updateModuleListType(this.module,{id:this.currentList.id,listcomponent:e}),this.currentList.listcomponent=e,this.determineListFields(),this.emitListTypeComponentChange())}emitListTypeComponentChange(){this.listTypeComponent$.next(this.currentList.listcomponent)}updateListType(e){let t=new a.x;e||(e={});const s=this.currentList?.listcomponent;return e.aggregates=btoa(JSON.stringify(this.selectedAggregates)),e.sortfields=btoa(JSON.stringify(this.sortArray)),e.fielddefs=btoa(JSON.stringify(this.listfields.map((e=>({id:e.id,width:e.width}))))),e.listcomponent||(e.listcomponent=this.currentList.listcomponent),this.backend.postRequest(`configuration/spiceui/core/modules/${this.module}/listtypes/${this.currentList.id}`,{},e,this.httpRequestsRefID).subscribe((i=>{this.metadata.getModuleListTypes(this.module).some((t=>{if(t.id==this.currentList.id){for(let s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);return this.currentList=t,!0}})),e.id=this.currentList.id,this.metadata.updateModuleListType(this.module,e),this.emitListTypeChange(),this.currentList.listcomponent!=s&&this.emitListTypeComponentChange(),t.next(!0),t.complete()})),t.asObservable()}emitListTypeChange(){this.listType$.next(this.currentList)}deleteListType(e=""){""===e&&(e=this.currentList.id),this.backend.deleteRequest("configuration/spiceui/core/modules/"+this.module+"/listtypes/"+e,null,this.httpRequestsRefID).subscribe({next:t=>{this.metadata.deleteModuleListType(this.module,e),this.setListType("all")},error:e=>{this.toast.sendToast(this.language.getLabel("LBL_ERROR"),"error")}})}getLastLoadTime(){return this.lastLoad.format(this.userpreferences.getTimeFormat())}scheduleReloadList(){this.reloadTimeOut&&(window.clearTimeout(this.reloadTimeOut),this.reloadTimeOut=void 0),this.reloadTimeOut=window.setTimeout((()=>{this.exceuteReload()}),1e3)}exceuteReload(){(this.changedAggregates.added.length>0||this.changedAggregates.deleted.length>0)&&this.reLoadList()}reLoadList(e=!1){if(this.isLoading){const e=this.httpRequestsRefID+"_get_list_data";return this.cancelPendingRequests&&this.backend.cancelPendingRequests([e]),this.isLoading=!1,(0,d.of)(!1)}return this.changedAggregates.added=[],this.changedAggregates.deleted=[],this.getListData(e)}resetListData(){if(this.buckets&&this.buckets.bucketitems)for(let e of this.buckets.bucketitems)e.count=0,e.items=0;this.listData={list:[],totalcount:0},this.listDataChanged$.next(!0)}getListTypes(e=!0){return e?this.standardLists.concat(this.metadata.getModuleListTypes(this.module)):this.metadata.getModuleListTypes(this.module)}generateStandardLists(){this.standardLists=[{id:"all",global:"1",name:`${this.language.getModuleCombinedLabel("LBL_ALL",this.module)}`,listcomponent:"ObjectList"}],this.metadata.getFieldDefs(this.module,"assigned_user_id")&&this.standardLists.push({id:"owner",global:"1",name:`${this.language.getModuleCombinedLabel("LBL_MY",this.module)}`,listcomponent:"ObjectList"})}get hasAggregates(){return this.selectedAggregates.length>0}get hasNonSysAggregates(){return this.selectedAggregates.some((e=>{let t=e.split("::",1)[0];if(!this.moduleAggregatesByFieldname[t]?.system)return!0}))}hasAggregate(e,t){let s=e+"::"+t;return this.selectedAggregates.some((e=>e===s))}setAggregate(e,t){this.selectedAggregates.push(e+"::"+t);let s=this.changedAggregates.deleted.indexOf(e+"::"+t);s>=0?this.changedAggregates.deleted.splice(s,1):this.changedAggregates.added.push(e+"::"+t)}getCheckedAggregateCount(e){return this.selectedAggregates.filter((t=>t.indexOf(e+"::")>-1)).length}checkAggregate(e,t){return this.selectedAggregates.indexOf(e+"::"+t.trim())>-1}removeAggregate(e,t){let s=this.selectedAggregates.indexOf(e+"::"+t);if(s<0)return!1;this.selectedAggregates.splice(s,1);let i=this.changedAggregates.added.indexOf(e+"::"+t);return i>=0?this.changedAggregates.added.splice(i,1):this.changedAggregates.deleted.push(e+"::"+t),!0}canChangeAggegate(e){return 0==this.changedAggregates.added.length&&0==this.changedAggregates.deleted.length||!(this.changedAggregates.added.filter((t=>0!=t.indexOf(e+"::"))).length>0)&&!(this.changedAggregates.deleted.filter((t=>0!=t.indexOf(e+"::"))).length>0)}removeAllAggregates(e=!1){this.selectedAggregates=e?this.selectedAggregates.filter((e=>{let t=e.split("::",1)[0];return!!this.moduleAggregatesByFieldname[t]?.system})):[]}removeAggregatesOfField(e){this.selectedAggregates=this.selectedAggregates.filter((t=>t.split("::",1)[0]!==e))}setAllSelected(){this.listSelected.type="all";for(let e of this.listData.list)e.selected=!0;this.selectionChanged$.emit(!0)}setAllUnselected(){this.listSelected.type="none";for(let e of this.listData.list.filter((e=>1==e.selected)))e.selected=!1;this.selectionChanged$.emit(!0)}setRangeSelected(e,t){for(let s=e;s<=t;s++)this.listData.list[s-1].selected=!0;this.selectionChanged$.emit(!0)}getSelectedCount(){return this.listData.list.filter((e=>1==e.selected)).length}getSelectedIDs(){let e=[];for(let t of this.listData.list)t.selected&&e.push(t.id);return e}getSelectedItems(){return this.listData.list.filter((e=>e.selected))}checkAccess(e){if(!("edit"!=e&&"delete"!=e||"all"!=this.currentList.id&&"owner"!=this.currentList.id))return!1;if(!this.getGlobal())return!0;switch(e){case"delete":return this.canDelete()&&(this.session.authData.admin||this.metadata.checkModuleAcl(this.module,"moduleadmin"));case"edit":return this.session.authData.admin||this.metadata.checkModuleAcl(this.module,"moduleadmin");default:return!1}}getListData(e=!1){let t=new a.x;if(e){if(this.buckets&&this.buckets.bucketitems)for(let e of this.buckets.bucketitems)e.items=0}else this.isLoading=!0,this.resetListData();let s={};s[this.module]=this.selectedAggregates;const i={modulefilter:this.modulefilter,filtercontextbeanid:this.filtercontextbeanid,start:0,limit:this.loadlimit,listid:this.currentList.id,searchterm:this.searchTerm,searchgeo:this.searchGeo,aggregates:s,buckets:this.buckets,relatefilter:this.relatefilter?.active?this.relatefilter:null},n=this.httpRequestsRefID+"_get_list_data";return this.cancelPendingRequests&&this.backend.cancelPendingRequests([n]),this.backend.getList(this.module,this.sortArray,i,n).subscribe({next:e=>{this.listData=e,this.lastLoad=new moment,this.isLoading=!1,this.searchAggregates=e.aggregations,this.buckets=e.buckets,this.setToSession(),t.next(!0),t.complete(),this.listDataChanged$.next(!0)},error:e=>{this.toast.sendToast("error loading list"),this.isLoading=!1,t.error(e),t.complete()}}),t.asObservable()}canLoadMore(){return!this.isLoading&&this.listData.list.length<this.listData.totalcount}loadMoreList(){if(this.isLoading||this.listData.list.length>=this.listData.totalcount)return!1;this.isLoading=!0;let e={};e[this.module]=this.selectedAggregates,this.backend.getList(this.module,this.sortArray,{modulefilter:this.modulefilter,filtercontextbeanid:this.filtercontextbeanid,start:this.listData.list.length,limit:this.loadlimit,listid:this.currentList.id,searchterm:this.searchTerm,searchgeo:this.searchGeo,aggregates:e,buckets:this.buckets,relatefilter:this.relatefilter?.active?this.relatefilter:null},this.httpRequestsRefID).subscribe((e=>{this.listData.list=this.listData.list.concat(e.list),this.lastLoad=new moment,this.isLoading=!1,this.listDataChanged$.next(!0)}))}loadMoreBucketList(e){const t=this.buckets.bucketitems.find((t=>t.bucket==e));if(!t||this.isLoading||t.items>=t.items.total)return!1;this.isLoading=!0;let s={};s[this.module]=this.selectedAggregates,this.backend.getList(this.module,this.sortArray,{modulefilter:this.modulefilter,filtercontextbeanid:this.filtercontextbeanid,start:this.listData.list.length,limit:this.loadlimit,listid:this.currentList.id,searchterm:this.searchTerm,searchgeo:this.searchGeo,aggregates:s,buckets:{bucketfield:this.buckets.bucketfield,bucketitems:[t]},relatefilter:this.relatefilter?.active?this.relatefilter:null},this.httpRequestsRefID).subscribe((e=>{t.items=e.buckets.bucketitems[0].items,this.listData.list=this.listData.list.concat(e.list),this.lastLoad=new moment,this.listDataChanged$.next(!0),this.isLoading=!1}))}exportList(e){let t=new a.x,s=this.getSelectedIDs();if(s.length>0)this.backend.getLinkToDownload(`module/${this.module}/export`,"POST",{},{ids:s,fields:e},{},this.httpRequestsRefID).subscribe((e=>{t.next(e),t.complete()}));else{let s={};s[this.module]=this.selectedAggregates,this.backend.getLinkToDownload(`module/${this.module}/export`,"POST",{},{listid:this.currentList.id,modulefilter:this.modulefilter,sortfields:this.sortArray,fields:e,searchterm:this.searchTerm,searchgeo:this.searchGeo,aggregates:s},null,this.httpRequestsRefID).subscribe((e=>{t.next(e),t.complete()}))}return t.asObservable()}get bucketfield(){return this.buckets?this.buckets.bucketfield:""}get bucketamountfield(){return this.buckets?this.buckets.buckettotal:""}updateBuckets(e,t,s=[]){let i=this.buckets.bucketitems.find((t=>t.bucket==e));i.items--,i.total--;let n=this.buckets.bucketitems.find((e=>e.bucket==t));n.items++,n.total++;for(let e of this.buckets.buckettotal)for(let t of s)"sum"==e.function&&e.name==t.fieldname&&(i.values["_bucket_agg_"+t.fieldname]-=t.valuefrom,n.values["_bucket_agg_"+t.fieldname]+=t.valueto)}removeItemFromBucket(e,t=[]){let s=this.buckets.bucketitems.find((t=>t.bucket==e));s.items--,s.total--;for(let e of t)s.values["_bucket_agg_"+e.fieldname]-=e.value}}return e=modellist,(0,i.Z)(modellist,"ɵfac",(function(t){return new(t||e)(n.LFG(r.f),n.LFG(c.y),n.LFG(u.Pu),n.LFG(h.d),n.LFG(m.z),n.LFG(g.n),n.LFG(p.C),n.LFG(f.A))})),(0,i.Z)(modellist,"ɵprov",n.Yz7({token:e,factory:e.ɵfac})),modellist})()},6163:(e,t,s)=>{"use strict";s.d(t,{A:()=>d});var i=s(1180),n=s(2242),o=s(4154),l=s(5322),a=s(5920);moment.defaultFormat="YYYY-MM-DD HH:mm:ss";let d=(()=>{var e;class modelutilities{constructor(e,t,s){(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"mathcomp",void 0),(0,i.Z)(this,"session",void 0),this.metadata=e,this.mathcomp=t,this.session=s}getRand(){return Math.random()}S4(){return(65536*(1+this.getRand())|0).toString(16).substring(1)}generateGuid(){return this.S4()+this.S4()+"-"+this.S4()+"-"+this.S4()+"-"+this.S4()+"-"+this.S4()+this.S4()+this.S4()}backendModel2spice(e,t){let s=this.metadata.getModuleFields(e);for(let i in s)t[i]&&(t[i]=this.backend2spice(e,i,t[i]));return t}backend2spice(e,t,s){let i=this.metadata.getFieldDefs(e,t);if(!i||!i.type)return s;switch(i.type){case"date":if(moment.isMoment(s))return s;let e=moment(s);return e.isValid()?e:null;case"datetime":case"datetimecombo":if(moment.isMoment(s))return s;let t=this.session.getSessionData("timezone")||moment.tz.guess(!0),n="string"==typeof t&&t.length>0?moment.utc(s).tz(t):moment(s);return n.isValid()?n:null;case"double":case"currency":return s?parseFloat(s):0;case"int":return s?parseInt(s,10):0;case"bool":case"boolean":return"1"==s||s>0||1==s;case"json":try{return _.isObject(s)?s:s?JSON.parse(s):{}}catch(e){return{}}case"link":if(_.isObject(s)&&s.beans&&i.module)for(let e in s.beans)s.beans[e]=this.backendModel2spice(i.module,s.beans[e]);return s;default:return s}}spiceModel2backend(e,t){let s={...t},i=this.metadata.getModuleFields(e);for(let n in i)t.hasOwnProperty(n)&&(s[n]=this.spice2backend(e,n,t[n]));return s}spice2backend(e,t,s){let i=this.metadata.getFieldDefs(e,t);if(!i||!i.type)return s;switch(i.type){case"relate":case"parent":case"linked":case"linkedparent":return null;case"date":if("string"==typeof s){let e=moment(s);return e.isValid()?e.format("YYYY-MM-DD"):""}return s&&s._isAMomentObject&&s.isValid()?s.format("YYYY-MM-DD"):"";case"datetime":case"datetimecombo":if("string"==typeof s){let e=this.session.getSessionData("timezone")||moment.tz.guess(!0),t="string"==typeof e&&e.length>0?moment(s).tz(e):moment(s);return t.isValid()?t.utc().format("YYYY-MM-DD HH:mm:ss"):""}return s&&s._isAMomentObject&&s.isValid()?moment(s).utc().format("YYYY-MM-DD HH:mm:ss"):"";case"json":return s?JSON.stringify(s):"";case"link":if(_.isObject(s)&&s.beans&&i.module)for(let e in s.beans)s.beans[e]=this.spiceModel2backend(i.module,s.beans[e]);return s;case"bool":case"boolean":return s&&("1"==s||s>0||!0===s)?"1":"0";default:return s}}formatDate(e){return moment(e).format("YYYY-MM-DD")}cleanAccountName(e){let t=["ag","gmbh","gesmbh","corp","inc"],s=e.toLowerCase();s=s.replace(/[^\w\s]/gi,"");let i=s.split(" ");for(let e of t){let t=i.indexOf(e);t>=0&&i.splice(t,1)}return i.join(" ")}static compare(e,t,s){switch(t){case"in":case"between":break;case"empty":return!e;case"nempty":return!!e;case"notnull":return null!==e;case"null":return null===e;case"contain":return!!e&&-1!==e.indexOf(s);case"ncontain":return!e||-1==e.indexOf(s);case"greaterequal":return e>=s;case"greater":return e>s;case"lessequal":case"lesserequal":return e<=s;case"less":case"lesser":return e<s;case"unequal":return e!=s;case"regex":return new RegExp(s).test(e);case"notregex":return!new RegExp(s).test(e);default:return e==s}}static strtobool(e){if("string"!=typeof e)return!1;switch(e.toLowerCase().trim()){case"false":case"no":case"0":case"":return!1;default:return!0}}static strtomoment(e,t){return moment(modelutilities.strtotime(e,t),"X")}static strtotime(e,t){let s,i,n,o,l,a,d,r,c,u,h,m=!1;if(!e)return m;e=e.replace(/^\s+|\s+$/g,"").replace(/\s{2,}/g," ").replace(/[\t\r\n]/g,"").toLowerCase();let g=new RegExp(["^(\\d{1,4})","([\\-\\.\\/:])","(\\d{1,2})","([\\-\\.\\/:])","(\\d{1,4})","(?:\\s(\\d{1,2}):(\\d{2})?:?(\\d{2})?)?","(?:\\s([A-Z]+)?)?$"].join(""));if(i=e.match(g),i&&i[2]===i[4])if(i[1]>1901)switch(i[2]){case"-":case"/":return i[3]>12||i[5]>31?m:new Date(i[1],parseInt(i[3],10)-1,i[5],i[6]||0,i[7]||0,i[8]||0,i[9]||0).getTime()/1e3;case".":return m}else if(i[5]>1901)switch(i[2]){case"-":case".":return i[3]>12||i[1]>31?m:new Date(i[5],parseInt(i[3],10)-1,i[1],i[6]||0,i[7]||0,i[8]||0,i[9]||0).getTime()/1e3;case"/":return i[1]>12||i[3]>31?m:new Date(i[5],parseInt(i[1],10)-1,i[3],i[6]||0,i[7]||0,i[8]||0,i[9]||0).getTime()/1e3}else switch(i[2]){case"-":return i[3]>12||i[5]>31||i[1]<70&&i[1]>38?m:(o=i[1]>=0&&i[1]<=38?+i[1]+2e3:i[1],new Date(o,parseInt(i[3],10)-1,i[5],i[6]||0,i[7]||0,i[8]||0,i[9]||0).getTime()/1e3);case".":return i[5]>=70?i[3]>12||i[1]>31?m:new Date(i[5],parseInt(i[3],10)-1,i[1],i[6]||0,i[7]||0,i[8]||0,i[9]||0).getTime()/1e3:i[5]<60&&!i[6]?i[1]>23||i[3]>59?m:(n=new Date,new Date(n.getFullYear(),n.getMonth(),n.getDate(),i[1]||0,i[3]||0,i[5]||0,i[9]||0).getTime()/1e3):m;case"/":return i[1]>12||i[3]>31||i[5]<70&&i[5]>38?m:(o=i[5]>=0&&i[5]<=38?+i[5]+2e3:i[5],new Date(o,parseInt(i[1],10)-1,i[3],i[6]||0,i[7]||0,i[8]||0,i[9]||0).getTime()/1e3);case":":return i[1]>23||i[3]>59||i[5]>59?m:(n=new Date,new Date(n.getFullYear(),n.getMonth(),n.getDate(),i[1]||0,i[3]||0,i[5]||0).getTime()/1e3)}if("now"===e)return null===t||isNaN(t)?(new Date).getTime()/1e3|0:0|t;if(!isNaN(s=Date.parse(e)))return s/1e3|0;if(g=new RegExp(["^([0-9]{4}-[0-9]{2}-[0-9]{2})","[ t]","([0-9]{2}:[0-9]{2}:[0-9]{2}(\\.[0-9]+)?)","([\\+-][0-9]{2}(:[0-9]{2})?|z)"].join("")),i=e.match(g),i&&("z"===i[4]?i[4]="Z":i[4].match(/^([+-][0-9]{2})$/)&&(i[4]=i[4]+":00"),!isNaN(s=Date.parse(i[1]+"T"+i[2]+i[4]))))return s/1e3|0;function p(e){let t=e.split(" "),s=t[0],i=t[1].substring(0,3),n=/\d+/.test(s),o=("last"===s?-1:1)*("ago"===t[2]?-1:1);if(n&&(o*=parseInt(s,10)),d.hasOwnProperty(i)&&!t[1].match(/^mon(day|\.)?$/i))return l["set"+d[i]](l["get"+d[i]]()+o);if("wee"===i)return l.setDate(l.getDate()+7*o);if("next"===s||"last"===s)!function(e,t,s){let i,n=a[t];void 0!==n&&(i=n-l.getDay(),0===i?i=7*s:i>0&&"last"===e?i-=7:i<0&&"next"===e&&(i+=7),l.setDate(l.getDate()+i))}(s,i,o);else if(!n)return!1;return!0}if(l=t?new Date(1e3*t):new Date,a={sun:0,mon:1,tue:2,wed:3,thu:4,fri:5,sat:6},d={yea:"FullYear",mon:"Month",day:"Date",hou:"Hours",min:"Minutes",sec:"Seconds"},c="(years?|months?|weeks?|days?|hours?|minutes?|min|seconds?|sec|sunday|sun\\.?|monday|mon\\.?|tuesday|tue\\.?|wednesday|wed\\.?|thursday|thu\\.?|friday|fri\\.?|saturday|sat\\.?)",u="([+-]?\\d+\\s"+c+"|(last|next)\\s"+c+")(\\sago)?",i=e.match(new RegExp(u,"gi")),!i)return m;for(h=0,r=i.length;h<r;h++)if(!p(i[h]))return m;return l.getTime()/1e3}http_build_query(e,t="",s="&"){let i=[],n=(e,t,s)=>{let i=[];if(!0===t?t="1":!1===t&&(t="0"),null!==t){if("object"==typeof t){for(let o in t)null!==t[o]&&i.push(n(e+"["+o+"]",t[o],s));return i.join(s)}if("function"!=typeof t)return encodeURIComponent(e)+"="+encodeURIComponent(t);throw new Error("There was an error processing for http_build_query().")}return""};s||(s="&");for(let o in e){let l=e[o];t&&!isNaN(parseFloat(o))&&(o=String(t)+o);let a=n(o,l,s);""!==a&&i.push(a)}return i.join(s)}compileMathExpression(e){try{return this.mathcomp.do(e)}catch(e){return console.warn(e),!1}}timezoneChanged(e,t){for(let s in e)if(_.isObject(e[s]))if(e[s]&&e[s]._isAMomentObject)e[s]._isUTC&&e[s].tz(t);else if(e[s].beans&&_.isObject(e[s].beans))for(let i in e[s].beans)this.timezoneChanged(e[s].beans[i],t)}}return e=modelutilities,(0,i.Z)(modelutilities,"ɵfac",(function(t){return new(t||e)(n.LFG(o.Pu),n.LFG(l.Y),n.LFG(a.n))})),(0,i.Z)(modelutilities,"ɵprov",n.Yz7({token:e,factory:e.ɵfac,providedIn:"root"})),modelutilities})()},2032:(e,t,s)=>{"use strict";s.d(t,{G:()=>w,H:()=>T});var i=s(1180),n=s(2242),o=s(6204),l=s(727),a=s(1135),d=s(7579),r=s(9646),c=s(6550),u=s(5920),h=s(4044),m=s(5329),g=s(3369),p=s(6625),f=s(4154),b=s(3441),v=s(2222),Z=s(4505),y=s(2422),x=s(3348);let w=(()=>{var e;class navigation{constructor(e,t,s,o,d,r,c,u,h,m,g,p){(0,i.Z)(this,"title",void 0),(0,i.Z)(this,"session",void 0),(0,i.Z)(this,"modal",void 0),(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"broadcast",void 0),(0,i.Z)(this,"configurationService",void 0),(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"helper",void 0),(0,i.Z)(this,"socket",void 0),(0,i.Z)(this,"backend",void 0),(0,i.Z)(this,"userpreferences",void 0),(0,i.Z)(this,"router",void 0),(0,i.Z)(this,"navigationparadigm","subtabbed"),(0,i.Z)(this,"enforcednavigationparadigm",!1),(0,i.Z)(this,"activeModule","Home"),(0,i.Z)(this,"activeModule$",void 0),(0,i.Z)(this,"modelsEditing",[]),(0,i.Z)(this,"modelregister",[]),(0,i.Z)(this,"modelregisterCounter",0),(0,i.Z)(this,"activeRoute",void 0),(0,i.Z)(this,"activeTab$",void 0),(0,i.Z)(this,"activeObject",""),(0,i.Z)(this,"maintab",{path:void 0,params:void 0,id:"main",active:!0,pinned:!1,enablesubtabs:!1,url:"module/Home"}),(0,i.Z)(this,"objectTabs",[]),(0,i.Z)(this,"objectTabsChange$",new n.vpe),(0,i.Z)(this,"subscriptions",new l.w0),this.title=e,this.session=t,this.modal=s,this.language=o,this.broadcast=d,this.configurationService=r,this.metadata=c,this.helper=u,this.socket=h,this.backend=m,this.userpreferences=g,this.router=p,this.activeModule$=new n.vpe,this.broadcast.message$.subscribe((e=>this.handleMessage(e))),window.setTimeout((()=>{addEventListener("beforeunload",(e=>{this.anyDirtyModel()&&(e.preventDefault(),e.returnValue="")}))}),1),this.activeTab$=new a.X("main"),this.setTabTitle()}setSessionData(){this.session.setSessionData("navigation",{main:this.maintab,tabs:this.objectTabs})}get activeTabObject(){return this.maintab.active?this.maintab:this.objectTabs.find((e=>e.active))}get activeTab(){return this.maintab.active?"main":this.objectTabs.find((e=>e.active))?.id}set activeTab(e){if(this.maintab.active)this.maintab.active=!1;else{let e=this.objectTabs.find((e=>e.active));e&&(e.active=!1)}if("main"==e)this.maintab.active=!0,this.activeTab$.next("main"),this.router.navigate([this.maintab.url]);else{let t=this.objectTabs.find((t=>t.id==e));t&&this.setTabActive(t)}this.setSessionData()}setTabActive(e){e.active=!0,this.activeTab$.next(e.id),this.setTabTitle(),this.router.navigate([e.url])}getSubTabs(e){return e?this.objectTabs.filter((t=>t.parentid==e)):[]}get displayTab(){if(this.maintab.active)return"main";let e=this.objectTabs.find((e=>e.active));return e?.id}setActiveModule(e,t="",s=""){this.activeModule=e,this.activeModule$.emit(e),this.title.setTitle(this.systemName+" / "+(""!==s?s:e))}get systemName(){return this.configurationService.systemName}enforceNavigationParadigm(e){this.enforcednavigationparadigm=!0,this.navigationparadigm=e}handleMessage(e){switch(e.messagetype){case"loader.completed":if(!this.enforcednavigationparadigm&&"loadUserData"==e.messagedata){this.userpreferences.getPreference("navigation_paradigm");this.navigationparadigm="subtabbed",this.session.setSessionData("navigation_paradigm",this.navigationparadigm)}break;case"userpreferences.save":let t=this.userpreferences.getPreference("navigation_paradigm");t="subtabbed",!this.enforcednavigationparadigm&&t&&this.navigationparadigm!=t&&("simple"==t&&this.navigationparadigm!=t?(this.objectTabs=[],this.router.navigate(["module/Home"])):"simple"!=t&&this.navigationparadigm!=t&&this.router.navigate(["module/Home"]),this.navigationparadigm=t,this.session.setSessionData("navigation_paradigm",this.navigationparadigm));break;case"logout":this.objectTabs=[],this.maintab={path:void 0,params:void 0,id:"main",pinned:!1,active:!0,enablesubtabs:!1,url:"module/Home"},this.subscriptions.unsubscribe();break;case"login":let s=this.session.getSessionData("navigation_paradigm");s&&(this.navigationparadigm=s);let i=this.session.getSessionData("navigation");_.isEmpty(i)||(this.maintab=i.main,this.objectTabs=i.tabs,this.maintab.params?.module&&(this.activeModule=this.maintab.params.module),this.activeTab$.next(this.activeTab),this.setTabTitle()),this.subscriptions.add(this.socket.initializeNamespace("module").subscribe((e=>this.handleSocketEvents(e))));break;case"model.delete":for(let t of this.objectTabs.filter((t=>t.params.module==e.messagedata.module&&t.params.id==e.messagedata.id)))this.closeObjectTab(t.id,!0)}}handleSocketEvents(e){switch(e.type){case"update":case"systemupdate":"systemupdate"!=e.type&&e.data.sessionId==o.V8.hashStr(this.session.authData.sessionId)||!this.modelregister.find((t=>t.model.module==e.data.module&&t.model.id==e.data.id&&!t.model.isEditing))||this.backend.get(e.data.module,e.data.id).subscribe((t=>{let s=this.modelregister.filter((t=>t.model.module==e.data.module&&t.model.id==e.data.id&&!t.model.isEditing));for(let e of s)e.model.setData({...t},!1),e.model.data$.next(e.model.data);this.broadcast.broadcastMessage("model.save",{id:e.data.id,module:e.data.module,data:t})}))}}addModelEditing(e,t,s,i){e&&t&&this.modelsEditing.push({id:e,module:t,model:s,summary_text:i,tabid:this.activeTab})}removeModelEditing(e,t){t&&e&&this.modelsEditing.some(((s,i)=>{if(s.id==t&&s.module==e)return this.modelsEditing.splice(i,1),!0}))}get editing(){return this.modelsEditing.length>0}discardAllChanges(){this.modelsEditing=[]}registerModel(e){let t=++this.modelregisterCounter;return this.modelregister.push({id:t,model:e,tabid:this.activeTab}),this.socket.joinRoom("module",o.V8.hashStr(`${e.module}:${e.id}`).toString()),t}unregisterModel(e){let t=this.modelregister.findIndex((t=>t.id==e));if(t>=0){let e=this.modelregister[t].model.module,s=this.modelregister[t].model.id;0==this.modelregister.filter((t=>t.id!=s&&t.model.module==e&&t.model.id==s)).length&&this.socket.leaveRoom("module",o.V8.hashStr(`${e}:${s}`).toString()),this.modelregister.splice(t,1)}}getRegisteredModel(e,t){return this.modelregister.find((s=>s.model.id==e&&s.model.module==t))?.model}anyDirtyModel(e){return this.modelsEditing.some((t=>{if(t.model.isDirty()&&(!e||e&&(t.tabid==e||this.parentTabId(e)==e)))return!0}))}parentTabId(e){return"main"==e?null:this.objectTabs.find((t=>t.id==e)).parentid}matchPath(e,t){if(e.path.replace("tab/:tabid/","")==t.path)return!0;if(e.path.replace("tab/:tabid/","")==t.referencepath)return!0;let s=this.metadata.getRouteDetails(e.path.replace("tab/:tabid/",""));return!(!s.referencepath||s.referencepath!=t.path)||!(!s.referencepath||s.referencepath!=t.referencepath)}buildUrl(e){let t="";return e.forEach((e=>{""!=t&&(t+="/"),t+=e.path})),t}matchRouteParams(e,t){if(1==e.path.split(":").length||_.isEqual(e.params,t))return!0;if(t.tabid&&t.tabid==e.id){let s={...t};return delete s.tabid,_.isEqual(e.params,s)}return!1}handleNavigation(e,t,s){let i=this.metadata.getRouteDetails(t.path.replace("tab/:tabid/",""));if("M"==i?.target||"Home"==e.module){if(this.maintab.path==t.path&&_.isEqual(this.maintab.params,e))return void(this.activeTab="main");this.mainTabChangeCheck().subscribe((i=>{i?(this.maintab.path=t.path,this.maintab.params={...e},this.maintab.url=this.buildUrl(s.url),this.activeTab="main",this.maintab.params?.module&&(this.activeModule=this.maintab.params.module)):this.router.navigate([this.maintab.url])}))}else{for(let n of this.objectTabs)if(this.matchPath(n,i)&&this.matchRouteParams(n,e))return n.path!=t.path.replace("tab/:tabid/","")&&(n.path=t.path,n.url=this.buildUrl(s.url)),void(this.activeTab=n.id);let n;e.tabid&&(n=this.objectTabs.find((t=>t.id==e.tabid)));let o=this.helper.generateGuid();this.objectTabs.unshift({id:o,parentid:n&&n.enablesubtabs?n.id:void 0,path:t.path,url:this.buildUrl(s.url),params:{...e},active:!1,pinned:!1,enablesubtabs:"1"==i.subtabs}),this.activeTab=o,this.objectTabsChange$.emit(!0)}}addObjectTab(e){this.objectTabs.unshift(e),this.activeTab=e.id}setActiveTab(e){this.activeTab=e,this.activeTab$.next(this.activeTab),this.setTabTitle()}setTabTitle(){let e=this.getTabById(this.activeTab),t="";e.displayname?t=e.displayname:e.displaymodule?t=this.language.getModuleName(e.displaymodule):this.activeModule&&(t=this.language.getModuleName(this.activeModule)),this.title.setTitle(this.systemName+(t?` / ${t}`:""))}cloneTab(e){let t=this.getTabById(e),s=this.helper.generateGuid();this.objectTabs.unshift({id:s,parentid:void 0,path:t.path,url:t.url,params:{...t.params},active:!1,pinned:!1,enablesubtabs:t.enablesubtabs}),this.activeTab=s}settabinfo(e,t){if("main"==e)t.displaymodule&&this.setActiveModule(t.displaymodule);else{let s=this.getTabById(e);s&&(s.displayname=t.displayname,s.displaymodule=t.displaymodule,s.displayicon=t.displayicon,this.objectTabsChange$.emit(!0))}}getTabById(e){return"main"==e?this.maintab:this.objectTabs.find((t=>t.id==e))}mainTabChangeCheck(){if(this.anyDirtyModel("main")){let e=new d.x;return this.modal.confirm(this.language.getLabel("MSG_NAVIGATIONSTOP","","long"),this.language.getLabel("MSG_NAVIGATIONSTOP")).subscribe((t=>{t?e.next(!0):e.next(!1),e.complete()})),e.asObservable()}return(0,r.of)(!0)}closeObjectTab(e,t=!1){"main"!=e&&(!t&&this.anyDirtyModel(e)?this.modal.confirm(this.language.getLabel("MSG_CLOSETAB","","long"),this.language.getLabel("MSG_CLOSETAB")).subscribe((t=>{t&&this.unsetObjectTab(e)})):this.unsetObjectTab(e))}unsetObjectTab(e){let t=this.objectTabs.findIndex((t=>t.id==e));if(t>=0){if(this.objectTabs[t].active||this.objectTabs.find((e=>e.active))?.parentid==e)if(this.objectTabs[t].parentid)this.setActiveTab(this.objectTabs[t].parentid);else if(0!=t){const e=t-1;this.setActiveTab(this.objectTabs[e].id)}else this.setActiveTab("main");this.objectTabs.splice(t,1);let s=-1;for(;(s=this.modelregister.findIndex((t=>t.tabid==e)))>=0;)this.modelregister.splice(s,1);for(t=this.objectTabs.length-1;t>=0;){if(this.objectTabs[t].parentid==e){this.objectTabs.splice(t,1);let s=-1;for(;(s=this.modelregister.findIndex((t=>t.tabid==e)))>=0;)this.modelregister.splice(s,1)}t--}this.objectTabsChange$.emit(!0),this.setSessionData()}}checkActiveRoute(e){return _.isEqual(e,this.activeRoute)}}return e=navigation,(0,i.Z)(navigation,"ɵfac",(function(t){return new(t||e)(n.LFG(c.Dx),n.LFG(u.n),n.LFG(h.o),n.LFG(m.d),n.LFG(g.f),n.LFG(p.C),n.LFG(f.Pu),n.LFG(b._),n.LFG(v.W),n.LFG(Z.y),n.LFG(y.z),n.LFG(x.F0))})),(0,i.Z)(navigation,"ɵprov",n.Yz7({token:e,factory:e.ɵfac,providedIn:"root"})),navigation})(),T=(()=>{var e;class canNavigateAway{constructor(e,t,s){(0,i.Z)(this,"navigation",void 0),(0,i.Z)(this,"modal",void 0),(0,i.Z)(this,"language",void 0),this.navigation=e,this.modal=t,this.language=s}canActivate(e,t){let s=!1;for(let e of this.navigation.modelregister)if(!e.model.isGlobal&&e.model.isDirty()){s=!0;break}if(s){let e=new d.x;return this.modal.confirm(this.language.getLabel("MSG_NAVIGATIONSTOP","","long"),this.language.getLabel("MSG_NAVIGATIONSTOP")).subscribe((t=>{t&&this.navigation.discardAllChanges(),e.next(t),e.complete()})),e.asObservable()}return(0,r.of)(!0)}}return e=canNavigateAway,(0,i.Z)(canNavigateAway,"ɵfac",(function(t){return new(t||e)(n.LFG(w),n.LFG(h.o),n.LFG(m.d))})),(0,i.Z)(canNavigateAway,"ɵprov",n.Yz7({token:e,factory:e.ɵfac,providedIn:"root"})),canNavigateAway})()},7017:(e,t,s)=>{"use strict";s.d(t,{d:()=>a});var i=s(1180),n=s(2242),o=s(1135),l=s(2032);let a=(()=>{var e;class navigationtab{constructor(e){(0,i.Z)(this,"navigation",void 0),(0,i.Z)(this,"activeRoute",{params:void 0,path:void 0}),(0,i.Z)(this,"activeRoute$",void 0),(0,i.Z)(this,"tabid",void 0),(0,i.Z)(this,"objecttab",void 0),(0,i.Z)(this,"tabinfo$",new n.vpe),(0,i.Z)(this,"close$",new n.vpe),this.navigation=e,this.activeRoute$=new o.X(this.activeRoute)}setTabInfo(e){this.tabinfo$.emit(e)}get tabdata(){return this.objecttab?.tabdata}set tabdata(e){this.objecttab.tabdata=e,this.navigation.setSessionData()}closeTab(){this.close$.emit(!0)}}return e=navigationtab,(0,i.Z)(navigationtab,"ɵfac",(function(t){return new(t||e)(n.LFG(l.G))})),(0,i.Z)(navigationtab,"ɵprov",n.Yz7({token:e,factory:e.ɵfac})),navigationtab})()},3298:(e,t,s)=>{"use strict";s.d(t,{t:()=>m});var i=s(1180),n=s(2242),o=s(4505),l=s(3369),a=s(6625),d=s(2422),r=s(5329),c=s(6550),u=s(2222),h=s(5920);let m=(()=>{var e;class notification{constructor(e,t,s,n,o,l,a,d){(0,i.Z)(this,"backend",void 0),(0,i.Z)(this,"broadcast",void 0),(0,i.Z)(this,"configuration",void 0),(0,i.Z)(this,"preferences",void 0),(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"sanitizer",void 0),(0,i.Z)(this,"socket",void 0),(0,i.Z)(this,"session",void 0),(0,i.Z)(this,"unreadCount",0),(0,i.Z)(this,"totalCount",0),(0,i.Z)(this,"notifications",[]),(0,i.Z)(this,"unreadNotifications",[]),(0,i.Z)(this,"desktopNotifications",[]),(0,i.Z)(this,"isLoading",!1),(0,i.Z)(this,"newNotifications",[]),this.backend=e,this.broadcast=t,this.configuration=s,this.preferences=n,this.language=o,this.sanitizer=l,this.socket=a,this.session=d,this.initializeDesktopNotification().then((()=>this.loadNotifications())),this.initializeSocket(),this.subscribeToBroadcast()}initializeDesktopNotification(){return"Notification"in window?"default"===Notification.permission?Notification.requestPermission().then((e=>{this.preferences.setPreference("displayDesktopNotifications","granted"==e,!0)})):Promise.resolve(null):(console.error("This browser does not support desktop notification"),Promise.resolve(null))}markAsRead(e){this.notifications.some((t=>{if(t.id==e)return t.notification_read=1,this.unreadCount--,!0})),this.unreadNotifications=this.unreadNotifications.filter((t=>t.id!==e)),this.backend.postRequest(`common/SpiceNotifications/${e}/markasread`)}markAllAsRead(){this.notifications.forEach((e=>{e.notification_read=1})),this.unreadNotifications=[],this.unreadCount=0,this.backend.postRequest("common/SpiceNotifications/all/read")}loadNotifications(){this.setInitialValues(this.configuration.getData("spicenotifications")),this.broadcast.message$.subscribe((e=>{"loader.completed"===e.messagetype&&"loadUserData"===e.messagedata&&this.setInitialValues(this.configuration.getData("spicenotifications"))}))}reloadNotifications(){this.notifications=[],this.unreadNotifications=[],this.desktopNotifications=[],this.loadNotificationsFromBackend()}loadMoreNotifications(){this.isLoading||this.notifications.length>=this.totalCount||this.loadNotificationsFromBackend()}loadNotificationsFromBackend(){this.isLoading=!0,this.backend.getRequest("common/SpiceNotifications",{offset:this.notifications.length}).subscribe({next:e=>{this.isLoading=!1,this.notifications=this.notifications.concat(e.records.map((e=>this.parseNotification(e)))),this.unreadNotifications=this.notifications.filter((e=>1!=e.notification_read)),this.setUnreadCount()},error:e=>{this.isLoading=!1}})}pushNotification(e){e=this.parseNotification(e),this.notifications.unshift(e),this.unreadNotifications.unshift(e),this.pushDesktopNotification(e),this.preferences.toUse.showRealtimeNotifications&&this.displayRealtimeNotification(e),this.unreadCount++}displayRealtimeNotification(e,t=!0){this.newNotifications.push(e),this.pushDesktopNotification(e),t&&window.setTimeout((()=>this.clearTempNotification(e)),1e4)}clearTempNotification(e){this.newNotifications=this.newNotifications.filter((t=>t!=e))}pushDesktopNotification(e){if(!this.preferences.toUse.displayDesktopNotifications)return;const t=e?this.generateDesktopNotificationTitle(e):this.language.getLabel("MSG_NEW_NOTIFICATIONS");this.desktopNotifications.unshift(new Notification(this.configuration.systemName,{body:t,icon:"config/headerimage"}))}setUnreadCount(){this.unreadCount=this.unreadNotifications.length}setInitialValues(e){e&&Array.isArray(e.records)&&(this.totalCount=e.count,this.notifications=e.records.map((e=>this.parseNotification(e))),this.unreadNotifications=this.notifications.filter((e=>1!=e.notification_read)),this.setUnreadCount(),this.unreadCount>0&&this.pushDesktopNotification())}initializeSocket(){this.socket.initializeNamespace("notifications").subscribe((e=>this.handleSocketEvents(e))),this.socket.joinRoom("notifications",this.session.authData.userId)}generateDesktopNotificationTitle(e){switch(e.notification_type){case"reminder":return`${this.language.getLabel("LBL_REMINDER")} ${e.bean_name}\n${e.notification_date}`;case"assign":return`${this.language.getLabel("LBL_ASSIGNED")} ${e.bean_name} ${this.language.getLabel("LBL_BY")} ${e.created_by_name}`;case"change":return`${this.language.getLabel("LBL_CHANGED")} ${e.bean_name} ${this.language.getLabel("LBL_BY")} ${e.created_by_name}`;case"delete":return`${this.language.getLabel("LBL_DELETED")} ${e.bean_name} ${this.language.getLabel("LBL_BY")} ${e.created_by_name}`}}subscribeToBroadcast(){this.broadcast.message$.subscribe((e=>{"login"===e.messagetype&&this.initializeSocket(),"logout"===e.messagetype&&this.socket.disconnect("notifications")}))}handleSocketEvents(e){if("new"===e.type)e.data&&this.pushNotification(e.data)}parseNotification(e){const t=this.session.getSessionData("timezone")||moment.tz.guess(!0),s=`${this.preferences.getDateFormat()} ${this.preferences.getTimeFormat()}`;let i="string"==typeof t&&t.length>0?moment.utc(e.notification_date).tz(t):moment(e.notification_date);return e.notification_date=i.isValid()?i.format(s):null,e.additional_infos&&"string"==typeof e.additional_infos&&(e.additional_infos=JSON.parse(e.additional_infos)),e}}return e=notification,(0,i.Z)(notification,"ɵfac",(function(t){return new(t||e)(n.LFG(o.y),n.LFG(l.f),n.LFG(a.C),n.LFG(d.z),n.LFG(r.d),n.LFG(c.H7),n.LFG(u.W),n.LFG(h.n))})),(0,i.Z)(notification,"ɵprov",n.Yz7({token:e,factory:e.ɵfac,providedIn:"root"})),notification})()},9637:(e,t,s)=>{"use strict";s.d(t,{g:()=>o});var i=s(1180),n=s(2242);let o=(()=>{var e;class popup{constructor(){(0,i.Z)(this,"closePopup$",void 0),this.closePopup$=new n.vpe}close(){this.closePopup$.emit(!0)}}return e=popup,(0,i.Z)(popup,"ɵfac",(function(t){return new(t||e)})),(0,i.Z)(popup,"ɵprov",n.Yz7({token:e,factory:e.ɵfac})),popup})()},382:(e,t,s)=>{"use strict";s.d(t,{h:()=>u});var i=s(1180),n=s(9646),o=s(7579),l=s(2242),a=s(4505),d=s(3369),r=s(6625),c=s(5920);let u=(()=>{var e;class recent{constructor(e,t,s,n){(0,i.Z)(this,"backend",void 0),(0,i.Z)(this,"broadcast",void 0),(0,i.Z)(this,"configuration",void 0),(0,i.Z)(this,"session",void 0),(0,i.Z)(this,"moduleItems",{}),this.backend=e,this.broadcast=t,this.configuration=s,this.session=n,this.broadcast.message$.subscribe((e=>this.handleMessage(e)))}get items(){let e=this.configuration.getData("recentitmes");return e||[]}handleMessage(e){switch(e.messagetype){case"model.save":let t=this.items.find((t=>t.module_name==e.messagedata.module&&t.item_id==e.messagedata.id));if(t&&(t.data=e.messagedata.data,t.item_summary=e.messagedata.data.summary_text),this.moduleItems[e.messagedata.module]){let t=this.moduleItems[e.messagedata.module].find((t=>t.module_name==e.messagedata.module&&t.item_id==e.messagedata.id));t&&(t.data=e.messagedata.data,t.item_summary=e.messagedata.data.summary_text)}break;case"model.delete":let s=this.items.findIndex((t=>t.module_name==e.messagedata.module&&t.item_id==e.messagedata.id));if(s&&this.items.splice(s,1),this.moduleItems[e.messagedata.module]){let t=this.moduleItems[e.messagedata.module].findIndex((t=>t.module_name==e.messagedata.module&&t.item_id==e.messagedata.id));t&&this.items.splice(t,1)}}}trackItem(e,t,s){for(this.items.some(((s,i)=>{if(s.module_name===e&&s.item_id==t)return this.items.splice(i,1),!0})),this.items.splice(0,0,{item_id:t,module_name:e,item_summary:s.summary_text,data:s});this.items.length>50;)this.items.pop();if(this.moduleItems[e])for(this.moduleItems[e].some(((s,i)=>{if(s.item_id==t)return this.moduleItems[e].splice(i,1),!0})),this.moduleItems[e].splice(0,0,{item_id:t,module_name:e,item_summary:s.summary_text,data:s});this.moduleItems[e].length>5;)this.moduleItems[e].pop()}getModuleRecent(e){if("Home"==e)return(0,n.of)(this.items.slice(0,5));if(this.moduleItems[e])return(0,n.of)(this.moduleItems[e]);{let t=new o.x;return this.moduleItems[e]||this.backend.getRequest("module/Trackers/recent",{module:e,limit:5}).subscribe((s=>{this.moduleItems[e]=[];for(let t of s)this.moduleItems[e].push(t);t.next(this.moduleItems[e]),t.complete()})),t.asObservable()}}}return e=recent,(0,i.Z)(recent,"ɵfac",(function(t){return new(t||e)(l.LFG(a.y),l.LFG(d.f),l.LFG(r.C),l.LFG(c.n))})),(0,i.Z)(recent,"ɵprov",l.Yz7({token:e,factory:e.ɵfac,providedIn:"root"})),recent})()},6040:(e,t,s)=>{"use strict";s.d(t,{j:()=>m});var i=s(1180),n=s(7579),o=s(9646),l=s(2242),a=s(4154),d=s(4505),r=s(3369),c=s(6163),u=s(3278),h=s(5329);let m=(()=>{var e;class relatedmodels{constructor(e,t,s,n,o,l){(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"backend",void 0),(0,i.Z)(this,"broadcast",void 0),(0,i.Z)(this,"modelutilities",void 0),(0,i.Z)(this,"toast",void 0),(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"module",""),(0,i.Z)(this,"id",""),(0,i.Z)(this,"httpRequestsRefID",_.uniqueId("related_models_http_ref_")),(0,i.Z)(this,"model",void 0),(0,i.Z)(this,"relatedModule",""),(0,i.Z)(this,"linkName",""),(0,i.Z)(this,"linkEndPoint",void 0),(0,i.Z)(this,"modulefilter",""),(0,i.Z)(this,"fieldfilters",{}),(0,i.Z)(this,"items",[]),(0,i.Z)(this,"offset",0),(0,i.Z)(this,"count",0),(0,i.Z)(this,"loaditems",5),(0,i.Z)(this,"isloading",!1),(0,i.Z)(this,"isonlyfiltered",!1),(0,i.Z)(this,"saveToLinkOnly",!1),(0,i.Z)(this,"sort",{sortfield:"",sortdirection:"ASC"}),(0,i.Z)(this,"lastLoad",new moment),(0,i.Z)(this,"sequencefield",null),(0,i.Z)(this,"serviceSubscriptions",[]),this.metadata=e,this.backend=t,this.broadcast=s,this.modelutilities=n,this.toast=o,this.language=l,this.serviceSubscriptions.push(this.broadcast.message$.subscribe((e=>{this.handleMessage(e)})))}ngOnDestroy(){this.stopSubscriptions()}stopSubscriptions(){for(let e of this.serviceSubscriptions)e.unsubscribe();this.serviceSubscriptions=[],this.backend.cancelPendingRequests([this.httpRequestsRefID])}get sortfield(){return this.sort.sortfield}set sortfield(e){this.sort.sortfield==e?this.sort.sortdirection="ASC"==this.sort.sortdirection?"DESC":"ASC":(this.sort.sortfield=e,this.sort.sortdirection="ASC"),this.getData()}get _linkName(){return""!=this.linkName?this.linkName:this.relatedModule.toLowerCase()}get sortBySequencefield(){return this.sequencefield&&!this.modulefilter&&!this.sort.sortfield}handleMessage(e){if(-1!==e.messagetype.indexOf("model")&&e.messagedata.module===this.relatedModule)switch(e.messagetype){case"model.delete":this.items.some(((t,s)=>{if(t.id===e.messagedata.id)return this.items.splice(s,1),this.count--,!0}));break;case"model.save":let t=!1;for(let s of this.items)if(s.id===e.messagedata.id){for(let t in s)s.hasOwnProperty(t)&&e.messagedata.data.hasOwnProperty(t)&&(s[t]=e.messagedata.data[t]);t=!0,this.sortItems()}!t||this.modulefilter?this.getData(!0):this.sortItems()}}getLastLoadTime(){return this.lastLoad.format("HH:mm")}getData(e=!1){let t=new n.x;if(!1===this.metadata.checkModuleAcl(this.relatedModule,"list")&&!1===this.metadata.checkModuleAcl(this.relatedModule,"listrelated"))return(0,o.of)(!1);e||(this.resetData(),this.isloading=!0);let s={module:this.relatedModule,getcount:!0,offset:this.offset,limit:this.loaditems,fieldfilters:this.fieldfilters};this.modulefilter&&(s.modulefilter=this.modulefilter),this.sort.sortfield&&(s.sort=JSON.stringify(this.sort));let i=`module/${this.module}/${this.id}/`+(this.linkEndPoint?this.linkEndPoint:`related/${this._linkName}`);return this.backend.getRequest(i,s,this.httpRequestsRefID).subscribe({next:e=>{this.items=[],this.count=parseInt(e.count,10);for(let t in e.list)e.list.hasOwnProperty(t)&&(e.list[t].relid=t,e.list[t]=this.modelutilities.backendModel2spice(this.relatedModule,e.list[t]),this.items.push(e.list[t]));this.isloading=!1,this.sortItems(),this.lastLoad=new moment,t.next(!0),t.complete()},error:()=>{this.isloading=!1}}),t.asObservable()}get canloadmore(){return!this.isloading&&this.count&&this.count-this.items.length>0}getMoreData(e=5){if(!1===this.metadata.checkModuleAcl(this.relatedModule,"list"))return(0,o.of)(!0);this.isloading=!0;let t={module:this.relatedModule,getcount:!0,offset:this.items.length,limit:this.items.length+e};this.modulefilter&&(t.modulefilter=this.modulefilter),this.sort.sortfield&&(t.sort=JSON.stringify(this.sort));let s=new n.x,i=`module/${this.module}/${this.id}/`+(this.linkEndPoint?this.linkEndPoint:`related/${this._linkName}`);return this.backend.getRequest(i,t,this.httpRequestsRefID).subscribe((e=>{this.count=parseInt(e.count,10);for(let t in e.list)e.list.hasOwnProperty(t)&&(e.list[t].relid=t,e.list[t]=this.modelutilities.backendModel2spice(this.relatedModule,e.list[t]),this.items.push(e.list[t]));this.sortItems(),this.lastLoad=new moment,this.isloading=!1,s.next(!0),s.complete()})),s.asObservable()}sortItems(){let e,t;this.sort.sortfield?(e=this.sort.sortfield,t=this.sort.sortdirection):this.sortBySequencefield&&(e=this.sequencefield,t="ASC"),e&&this.items.sort(((s,i)=>{let n;return n=isNaN(parseInt(s[e],10))||isNaN(parseInt(i[e],10))?s[e]>i[e]?1:-1:parseInt(s[e],10)>parseInt(i[e],10)?1:-1,"ASC"==t?n:-1*n}))}resetData(){this.items=[]}addItems(e){let t=new n.x;if(this.saveToLinkOnly)return this.model.addRelatedRecords(this._linkName,e),this.items=this.items.concat(e),this.count=this.count+e.length,(0,o.of)(!1);let s=[];for(let t of e)s.push(t.id);return this.backend.postRequest("module/"+this.module+"/"+this.id+"/related/"+this._linkName,[],s,this.httpRequestsRefID).subscribe({next:()=>{for(let t of e){let e=!1;this.items.some((s=>{if(s.id==t.id)return e=!0,!0})),e||(this.items.push(t),this.count++)}t.next(!0),t.complete()},error:()=>{t.error("error adding items")}}),t.asObservable()}setItem(e){if(this.isonlyfiltered)return this.toast.sendToast(this.language.getLabel("LBL_NOT_POSSIBLE_TO_SET"),"error"),(0,o.of)(!0);{let t=new n.x;return this.backend.putRequest("module/"+this.module+"/"+this.id+"/related/"+this._linkName,[],this.modelutilities.spiceModel2backend(this.relatedModule,e),this.httpRequestsRefID).subscribe({next:()=>{t.next(!0),t.complete()},error:e=>{t.error(e),t.complete()}}),t.asObservable()}}updateItems(e){if(this.isonlyfiltered)return this.toast.sendToast(this.language.getLabel("LBL_NOT_POSSIBLE_TO_SET"),"error"),(0,o.of)(!0);{const t=new n.x;return e=e.map((e=>this.modelutilities.spiceModel2backend(this.relatedModule,e))),this.backend.putRequest(`module/${this.module}/${this.id}/related/beans/${this._linkName}`,[],{beans:e},this.httpRequestsRefID).subscribe({next:()=>{t.next(!0),t.complete()},error:e=>{t.error(e),t.complete()}}),t.asObservable()}}deleteItem(e){if(this.isonlyfiltered)this.toast.sendToast(this.language.getLabel("LBL_NOT_POSSIBLE_TO_SET"),"error");else{let t=[];t.push(e);let s={relatedids:t};this.backend.deleteRequest("module/"+this.module+"/"+this.id+"/related/"+this._linkName,s,this.httpRequestsRefID).subscribe((()=>{this.items.some(((t,s)=>{if(t.id==e)return this.items.splice(s,1),this.count--,!0}))}))}}}return e=relatedmodels,(0,i.Z)(relatedmodels,"ɵfac",(function(t){return new(t||e)(l.LFG(a.Pu),l.LFG(d.y),l.LFG(r.f),l.LFG(c.A),l.LFG(u.A),l.LFG(h.d))})),(0,i.Z)(relatedmodels,"ɵprov",l.Yz7({token:e,factory:e.ɵfac})),relatedmodels})()},2057:(e,t,s)=>{"use strict";s.d(t,{U:()=>u});var i=s(1180),n=s(2242),o=s(7579),l=s(4505),a=s(3369),d=s(6625),r=s(5920),c=s(6163);let u=(()=>{var e;class reminder{constructor(e,t,s,o,l){(0,i.Z)(this,"backend",void 0),(0,i.Z)(this,"broadcast",void 0),(0,i.Z)(this,"configuration",void 0),(0,i.Z)(this,"session",void 0),(0,i.Z)(this,"modelutilities",void 0),(0,i.Z)(this,"reminders",[]),(0,i.Z)(this,"loaded",!1),(0,i.Z)(this,"changed$",new n.vpe),this.backend=e,this.broadcast=t,this.configuration=s,this.session=o,this.modelutilities=l,this.broadcast.message$.subscribe((e=>this.handleMessage(e)))}handleMessage(e){switch(e.messagetype){case"loader.completed":if("loadUserDataStep2"==e.messagedata){this.reminders=[];for(let e of this.configuration.getData("reminders"))e.reminder_date=moment.utc(e.reminder_date),this.reminders.push(e);this.loaded=!0,this.changed$.emit(!0)}break;case"model.save":let t=this.reminders.findIndex((t=>t.module_name==e.messagedata.module&&t.item_id==e.messagedata.id));if(t>=0)return this.reminders[t].item_summary=e.messagedata.data.summary_text,this.reminders[t].data=e.messagedata.data,!0}}getReminder(e,t){let s=!1;return this.reminders.some((i=>{if(i.module_name===e&&i.item_id===t)return s=i.reminder_date,!0})),s}getReminders(e){let t=[];for(let s of this.reminders)s.module_name===e&&t.push({item_id:s.item_id,item_summary:s.item_summary});return t}setReminder(e,t){this.backend.postRequest("common/spicereminders/"+e.module+"/"+e.id+"/"+t.format("YYYY-MM-DD")).subscribe((s=>{let i=this.reminders.findIndex((t=>t.item_id==e.id&&t.module_name==e.module));i>=0?(this.reminders[i].reminder_date=t,this.reminders[i].data=e.backendData):this.reminders.splice(0,0,{item_id:e.id,module_name:e.module,item_summary:e.data.summary_text,reminder_date:t,data:e.backendData}),this.changed$.emit(!0)}))}deleteReminder(e,t){let s=new o.x;return this.backend.deleteRequest("common/spicereminders/"+e+"/"+t).subscribe((i=>{this.reminders.some(((s,i)=>{if(s.module_name===e&&s.item_id===t)return this.reminders.splice(i,1),!0})),s.next(!0),s.complete(),this.changed$.emit(!0)})),s.asObservable()}}return e=reminder,(0,i.Z)(reminder,"ɵfac",(function(t){return new(t||e)(n.LFG(l.y),n.LFG(a.f),n.LFG(d.C),n.LFG(r.n),n.LFG(c.A))})),(0,i.Z)(reminder,"ɵprov",n.Yz7({token:e,factory:e.ɵfac,providedIn:"root"})),reminder})()},5920:(e,t,s)=>{"use strict";s.d(t,{n:()=>d});var i=s(1180),n=s(3144),o=s(2242),l=s(2349),a=s(3369);let d=(()=>{var e;class session{constructor(e,t){(0,i.Z)(this,"logger",void 0),(0,i.Z)(this,"broadcast",void 0),(0,i.Z)(this,"authData",{tenant_wizard_completed:!1,tenant_accepted_legal_notice:!1,sessionId:null,loaded:!1,userId:null,userName:"",email:"",admin:!1,dev:!1,portalOnly:!1,googleToken:"",companycode_id:"",tenant_id:"",tenant_name:"",obtainGDPRconsent:!1,canchangepassword:!1,expiringPasswordValidityDays:!1,user:{}}),(0,i.Z)(this,"deviceID",void 0),(0,i.Z)(this,"sessionData",{}),(0,i.Z)(this,"developerMode",!1),this.logger=e,this.broadcast=t,this.logger.setSession(this),this.generateDeviceID()}getRand(){return Math.random()}S4(){return(65536*(1+this.getRand())|0).toString(16).substring(1)}generateGuid(){return this.S4()+this.S4()+"-"+this.S4()+"-"+this.S4()+"-"+this.S4()+"-"+this.S4()+this.S4()+this.S4()}generateDeviceID(){const e=localStorage.getItem("Device-ID");e?this.deviceID=e:(this.deviceID=this.generateGuid(),localStorage.setItem("Device-ID",this.deviceID))}loadFromStorage(){this.authData.sessionId=sessionStorage.getItem("OAuth-Token")??localStorage.getItem("OAuth-Token")}storeToken(e){e?localStorage.setItem("OAuth-Token",this.authData.sessionId):sessionStorage.setItem("OAuth-Token",this.authData.sessionId)}getSessionHeader(){let e=new n.WM;return e=e.set("OAuth-Token",this.authData.sessionId),e=e.set("OAuth-Issuer","SpiceCRM"),this.developerMode&&(e=e.set("developermode","1")),e}setSessionData(e,t,s=!0){this.sessionData[e]=t,s&&sessionStorage.setItem(window.btoa(e+this.authData.sessionId),window.btoa(encodeURIComponent(JSON.stringify(t))))}clearSessionData(e){sessionStorage.removeItem(e)}getSessionData(e,t=!0){if(this.sessionData[e])return this.sessionData[e];try{return JSON.parse(decodeURIComponent(window.atob(sessionStorage.getItem(window.btoa(e+this.authData.sessionId)))))}catch(e){return!!t&&{}}}existsData(e){try{return sessionStorage[window.btoa(e+this.authData.sessionId)]&&sessionStorage[window.btoa(e+this.authData.sessionId)].length>0}catch(e){return!1}}endSession(){this.authData.tenant_id="",this.authData.tenant_name="",this.authData.tenant_accepted_legal_notice=!1,this.authData.tenant_wizard_completed=!1,this.authData.sessionId=null,this.authData.userId=null,this.authData.loaded=!1,this.authData.userName="",this.authData.email="",this.authData.admin=!1,this.authData.dev=!1,this.authData.companycode_id="",this.authData.tenant_id="",this.authData.tenant_name="",this.authData.obtainGDPRconsent=!1,this.authData.canchangepassword=!1,this.authData.expiringPasswordValidityDays=!1,this.authData.user={},this.sessionData={},localStorage.removeItem("OAuth-Token"),sessionStorage.clear()}get isAdmin(){return this.authData.admin}get isDev(){return this.authData.dev}setTimezone(e){this.getSessionData("timezone")!==e&&(this.setSessionData("timezone",e,!1),moment.tz.setDefault(e),this.broadcast.broadcastMessage("timezone.changed",e))}}return e=session,(0,i.Z)(session,"ɵfac",(function(t){return new(t||e)(o.LFG(l.M),o.LFG(a.f))})),(0,i.Z)(session,"ɵprov",o.Yz7({token:e,factory:e.ɵfac,providedIn:"root"})),session})()},2222:(e,t,s)=>{"use strict";s.d(t,{W:()=>c});var i=s(1180),n=s(9646),o=s(7579),l=s(2242),a=s(6625),d=s(3369),r=s(5920);let c=(()=>{var e;class socket{constructor(e,t,s){(0,i.Z)(this,"configuration",void 0),(0,i.Z)(this,"broadcast",void 0),(0,i.Z)(this,"session",void 0),(0,i.Z)(this,"socketUrl",void 0),(0,i.Z)(this,"socketId",void 0),(0,i.Z)(this,"sockets",{}),this.configuration=e,this.broadcast=t,this.session=s}socketObject(e){return this.sockets[e]}get connected(){return!_.isEmpty(this.sockets)}disconnect(e){this.sockets[e]&&(this.sockets[e].instance.disconnect(),this.sockets[e].instance.destroy(),delete this.sockets[e])}initializeNamespace(e){return this.sockets[e]?this.sockets[e].event$:(this.setSocketData(),this.socketUrl&&this.socketId?(this.sockets[e]=this.initializeSocket(e),this.sockets[e].event$):(0,n.of)({type:null,data:null}))}joinRoom(e,t){e&&t&&this.sockets[e]&&(t in this.sockets[e].rooms?this.sockets[e].rooms[t]++:(this.sockets[e].instance.emit("join:room",t),this.sockets[e].rooms[t]=1))}leaveRoom(e,t){e&&t&&this.sockets[e]&&this.sockets[e].rooms[t]&&(this.sockets[e].rooms[t]--,this.sockets[e].rooms[t]<1&&(this.sockets[e].instance.emit("leave:room",t),delete this.sockets[e].rooms[t]))}setSocketData(){let e=this.configuration.getCapabilityConfig("socket");this.socketUrl=e.socket_frontend,this.socketId=e.socket_id}initializeSocket(e){const t=new o.x,s=e?`/ns-${e}`:"/",i=io(this.socketUrl+s,{query:{token:this.session.authData.sessionId,sysId:this.socketId}});return i.on("connect",(()=>this.handleConnectEvent(e,t))),i.onAny(((e,s)=>{s.token!=this.session.authData.sessionId&&this.handleCustomEvent(t,e,s.data)})),{instance:i,isConnected:()=>i.connected,event$:t.asObservable(),rooms:{}}}handleConnectEvent(e,t){this.sockets[e]?.rooms&&Object.keys(this.sockets[e].rooms).forEach((t=>{this.sockets[e].rooms[t]<1||this.sockets[e].instance.emit("join:room",t)}))}handleCustomEvent(e,t,s){e.next({type:t,data:s})}}return e=socket,(0,i.Z)(socket,"ɵfac",(function(t){return new(t||e)(l.LFG(a.C),l.LFG(d.f),l.LFG(r.n))})),(0,i.Z)(socket,"ɵprov",l.Yz7({token:e,factory:e.ɵfac,providedIn:"root"})),socket})()},9086:(e,t,s)=>{"use strict";s.d(t,{d:()=>a});var i=s(1180),n=s(2843),o=s(7579),l=s(2242);let a=(()=>{var e;class StoreService{constructor(){(0,i.Z)(this,"databases",{})}openDB(e){return new Promise(((t,s)=>{indexedDB||s("IndexedDB not available");const i=indexedDB.open(e,2);i.onsuccess=()=>{this.databases[e]=i.result,t({event:"success",db:i.result})},i.onerror=()=>{s(`IndexedDB error: ${i.error}`)},i.onupgradeneeded=()=>{this.databases[e]=i.result,t({event:"upgrade",db:i.result})}}))}initializeStores(e,t,s){return new Promise((i=>{if(this.databases[e])return t.forEach((t=>this.databases[e].createObjectStore(t,{keyPath:"id"}))),void i(!0);this.openDB(e).then((e=>{"upgrade"==e.event&&t.forEach((t=>e.db.createObjectStore(t,{keyPath:s}))),i(!0)}))}))}readStore(e,t,s){if(!this.databases[e]){const e=indexedDB?"Database with the given name does not exist":"no indexedDB Support";return(0,n._)((()=>new Error(e)))}const i=new o.x,l=this.databases[e].transaction([t],"readwrite").objectStore(t).get(s);return l.onerror=()=>i.error(!1),l.onsuccess=e=>{const t=e.target.result?.data;t?(i.next(t),i.complete()):i.error(!1)},i.asObservable()}readStoreAll(e,t){return new Promise(((s,i)=>{if(!this.databases[e])return i("no indexedDB Support");const n=this.databases[e].transaction([t],"readwrite").objectStore(t).getAll();n.onerror=()=>i(),n.onsuccess=e=>{const t=e.target.result;t?.length>0?s(t):i()}}))}writeStore(e,t,s){this.databases[e]&&this.databases[e].transaction([t],"readwrite").objectStore(t).put(s)}clearDB(e,t){if(!this.databases[e])return;const s=this.databases[e].transaction(t,"readwrite");t.forEach((e=>{s.objectStore(e).clear()}))}}return e=StoreService,(0,i.Z)(StoreService,"ɵfac",(function(t){return new(t||e)})),(0,i.Z)(StoreService,"ɵprov",l.Yz7({token:e,factory:e.ɵfac,providedIn:"root"})),StoreService})()},2355:(e,t,s)=>{"use strict";s.d(t,{J:()=>m});var i=s(1180),n=s(7579),o=s(2242),l=s(4505),a=s(3369),d=s(6625),r=s(3278),c=s(5920),u=s(4154),h=s(5329);let m=(()=>{var e;class subscription{constructor(e,t,s,n,o,l,a){(0,i.Z)(this,"backend",void 0),(0,i.Z)(this,"broadcast",void 0),(0,i.Z)(this,"configuration",void 0),(0,i.Z)(this,"toast",void 0),(0,i.Z)(this,"session",void 0),(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"_subscriptions",{}),(0,i.Z)(this,"auditedModules",void 0),this.backend=e,this.broadcast=t,this.configuration=s,this.toast=n,this.session=o,this.metadata=l,this.language=a,this.loadSubscriptions()}get subscriptions(){return Object.keys(this._subscriptions).map((e=>this._subscriptions[e]))}hasSubscription(e){return this._subscriptions?.[e]}subscribeBean(e){let t=new n.x;return this.backend.postRequest(`common/SpiceSubscriptions/${e.module}/${e.id}`).subscribe((()=>{this._subscriptions[e.id]={bean_id:e.id,bean_module:e.module,user_id:this.session.authData.userId,data:e.backendData},t.next(!0),t.complete()}),(()=>{this.toast.sendToast(this.language.getLabel("MSG_FAILED_TO_SUBSCRIBE"),"error"),t.error("subscribe failed"),t.complete()})),t.asObservable()}unsubscribeBean(e,t){let s=new n.x;return this.backend.deleteRequest(`common/SpiceSubscriptions/${t}/${e}`).subscribe((()=>{delete this._subscriptions[e],s.next(!0),s.complete()}),(()=>{this.toast.sendToast(this.language.getLabel("MSG_FAILED_TO_UNSUBSCRIBE"),"error"),s.error("subscribe failed"),s.complete()})),s.asObservable()}loadSubscriptions(){this._subscriptions=this.configuration.getData("spicesubscriptions"),this.broadcast.message$.subscribe((e=>{"loader.completed"===e.messagetype&&"loadUserData"===e.messagedata&&(this._subscriptions=this.configuration.getData("spicesubscriptions"))}))}}return e=subscription,(0,i.Z)(subscription,"ɵfac",(function(t){return new(t||e)(o.LFG(l.y),o.LFG(a.f),o.LFG(d.C),o.LFG(r.A),o.LFG(c.n),o.LFG(u.Pu),o.LFG(h.d))})),(0,i.Z)(subscription,"ɵprov",o.Yz7({token:e,factory:e.ɵfac,providedIn:"root"})),subscription})()},2251:(e,t,s)=>{"use strict";s.d(t,{n:()=>l});var i=s(1180),n=s(2242),o=s(3369);let l=(()=>{var e;class telephony{constructor(e){(0,i.Z)(this,"broadcast",void 0),(0,i.Z)(this,"isActive",!1),(0,i.Z)(this,"calls",[]),(0,i.Z)(this,"initiateCall$",new n.vpe),(0,i.Z)(this,"terminateCall$",new n.vpe),(0,i.Z)(this,"actions",{hangup:!1,transfer:!1}),this.broadcast=e,this.broadcast.message$.subscribe((e=>this.handleLogout(e)))}handleLogout(e){"logout"==e.messagetype&&(this.calls=[],this.isActive=!1)}initiateCall(e,t){this.initiateCall$.emit({msisdn:e,relatedid:t.relatedid,relatedmodule:t.relatedmodule,relateddata:t.relateddata})}terminateCall(e){let t=this.calls.find((t=>t.id==e||t.callid==e));t&&this.terminateCall$.emit(t)}removeCallById(e){let t=this.calls.findIndex((t=>t.id==e||t.callid==e));t>=0&&this.calls.splice(t,1)}}return e=telephony,(0,i.Z)(telephony,"ɵfac",(function(t){return new(t||e)(n.LFG(o.f))})),(0,i.Z)(telephony,"ɵprov",n.Yz7({token:e,factory:e.ɵfac,providedIn:"root"})),telephony})()},5385:(e,t,s)=>{"use strict";s.d(t,{b:()=>r});var i=s(1180),n=s(2242),o=s(4505),l=s(4154),a=s(6625),d=s(5920);let r=(()=>{var e;class territories{constructor(e,t,s,n){(0,i.Z)(this,"backend",void 0),(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"configurationService",void 0),(0,i.Z)(this,"session",void 0),(0,i.Z)(this,"addTerritories",{}),this.backend=e,this.metadata=t,this.configurationService=s,this.session=n}checkModuleManaged(e){return!!this.getModuleParamaters(e)}getModuleParamaters(e){let t=this.configurationService.getData("aclterritorymoduletypes");if(t){return t.find((t=>t.module==e))}return!1}get userTerritories(){return this.configurationService.getData("aclterritoryuserterritories")}getRecentTerritories(e,t=5,s){let i=this.userTerritories;if(s&&!this.session.isAdmin){let n=i[e]&&i[e].length>0?i[e].filter((e=>-1!=e.actions.indexOf(s))):[];return n&&n.length>0?n.slice(0,t):[]}return i[e]&&i[e].length>0?i[e].slice(0,t):[]}loadTerritoryName(e){this.addTerritories[e]="...",this.backend.getRequest("module/SpiceACLTerritories/"+e).subscribe((t=>{t.id===e?this.addTerritories[e]=t.name:this.addTerritories[e]="error"}))}searchTerritories(e,t,s=5,i=[],n){let o=[];for(let l of this.userTerritories[e])if(l.name.toLowerCase().indexOf(t.toLowerCase())>=0&&i.indexOf(l.id)<0&&(this.session.isAdmin||!n||n&&-1!=l.actions.indexOf(n))&&o.push(l),o.length>=s)return o;return o}isUserTerritory(e,t){let s=!1;return this.userTerritories[e].some((e=>{if(e.id===t)return s=!0,!0})),s}getTerritoryName(e,t){let s="";return this.userTerritories[e].some((e=>{if(e.id===t)return s=e.name,!0})),""===s&&(this.addTerritories[t]||this.loadTerritoryName(t),s=this.addTerritories[t]),s}}return e=territories,(0,i.Z)(territories,"ɵfac",(function(t){return new(t||e)(n.LFG(o.y),n.LFG(l.Pu),n.LFG(a.C),n.LFG(d.n))})),(0,i.Z)(territories,"ɵprov",n.Yz7({token:e,factory:e.ɵfac,providedIn:"root"})),territories})()},3278:(e,t,s)=>{"use strict";s.d(t,{A:()=>l});var i=s(1180),n=s(2242),o=s(6163);let l=(()=>{var e;class toast{constructor(e,t){(0,i.Z)(this,"modelutilities",void 0),(0,i.Z)(this,"appref",void 0),(0,i.Z)(this,"activeToasts",[]),this.modelutilities=e,this.appref=t}sendToast(e,t="default",s="",i=!0,n){return this.addToast(e,"toast",t,s,i,n)}sendAlert(e,t="default",s="",i=!0,n){return this.addToast(e,"alert",t,s,i,n)}addToast(e,t="toast",s="default",i="",n=!0,o){if(o&&this.activeToasts.filter((e=>e.code==o)).length>0)return"";"error"===s&&(n=!1),!0===n&&(n=5);let l=this.modelutilities.generateGuid();return this.activeToasts.push({id:l,type:s,theme:t,text:e,description:i,code:o}),this.appref.tick(),n&&window.setTimeout((()=>this.clearToast(l)),1e3*n),l}clearToast(e){e&&this.activeToasts.some(((t,s)=>{if(t.id===e)return this.activeToasts.splice(s,1),this.appref.tick(),!0}))}clearAll(){this.activeToasts=[],this.appref.tick()}}return e=toast,(0,i.Z)(toast,"ɵfac",(function(t){return new(t||e)(n.LFG(o.A),n.LFG(n.z2F))})),(0,i.Z)(toast,"ɵprov",n.Yz7({token:e,factory:e.ɵfac,providedIn:"root"})),toast})()},2422:(e,t,s)=>{"use strict";s.d(t,{z:()=>p});var i=s(1180),n=s(2242),o=s(9646),l=s(7579),a=s(4505),d=s(3278),r=s(6625),c=s(5329),u=s(3369),h=s(4044),m=s(5920),g=s(4154);let p=(()=>{var e;class userpreferences{constructor(e,t,s,o,l,a,d,r){(0,i.Z)(this,"backend",void 0),(0,i.Z)(this,"toast",void 0),(0,i.Z)(this,"configuration",void 0),(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"broadcast",void 0),(0,i.Z)(this,"modalservice",void 0),(0,i.Z)(this,"session",void 0),(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"preferences",{global:{}}),(0,i.Z)(this,"toUse",void 0),(0,i.Z)(this,"unchangedPreferences",{global:{}}),(0,i.Z)(this,"preferencesComplete",!0),(0,i.Z)(this,"defaults",{calendar_day_start_hour:"7",calendar_day_end_hour:"22",currency:-99,datef:"m/d/Y",currency_significant_digits:2,export_charset:"UTF-8",locale_name_format:"s f l",dec_sep:".",distance_unit_system:"METRIC",export_delimiter:",",help_icon:"visible",home_assistant:"visible",num_grp_sep:",",reminder_time:-1,timef:"H:i",timezone:"Europe/Vienna",week_day_start:0,week_days_count:5}),(0,i.Z)(this,"formats",{nameFormats:[],loaded:!1}),(0,i.Z)(this,"preferences$",new n.vpe),this.backend=e,this.toast=t,this.configuration=s,this.language=o,this.broadcast=l,this.modalservice=a,this.session=d,this.metadata=r,this.toUse=this.preferences.global,this.broadcast.message$.subscribe((e=>{"loader.completed"===e.messagetype&&"loadUserData"===e.messagedata&&this.retrievePrefsFromConfigService()}))}retrievePrefsFromConfigService(){let e=this.configuration.getData("globaluserpreferences").global;if(this.preferences.global=_.extendOwn(this.preferences.global,e),this.unchangedPreferences.global=_.clone(e),this.defaults=_.extendOwn(this.defaults,this.configuration.getData("defaultuserpreferences")),!this.unchangedPreferences.global.timezone){let e=moment.tz.guess();this.setPreference("timezone",e,!0).subscribe((t=>{this.toast.sendToast(this.language.getLabel("LBL_TIMEZONE_WAS_SET_TO")+": "+t.timezone,"success",null,10),this.session.setTimezone(e)}))}this.completePreferencesWithDefaults(),this.session.setTimezone(this.toUse.timezone),this.preferences.global.userrole&&this.metadata.setActiveRole(this.preferences.global.userrole)}getPreferences(e){this.loadPreferences().subscribe((t=>{e.next("getPreferences")}))}loadPreferences(e="global"){return(0,o.of)(this.configuration.getData("globaluserpreferences")[e])}completePreferencesWithDefaults(){let e=!1;_.each(this.defaults,((t,s)=>{"string"==typeof this.preferences.global[s]?this.preferences.global[s]||(this.preferences.global[s]=t,e=!0):void 0!==this.preferences.global[s]&&null!==this.preferences.global[s]||(this.preferences.global[s]=t,e=!0)})),this.preferencesComplete=!e}getPreference(e,t="global"){try{return this.preferences[t][e]}catch(e){return!1}}setPreference(e,t,s=!0,i="global"){if(s){let s={};s[e]=t;const n=new l.x;return this.backend.postRequest("module/Users/"+this.session.authData.userId+"/preferences/"+i,{},s).subscribe((o=>{this.preferences[i]||(this.preferences[i]={}),this.preferences[i][e]=t,this.configuration.setData("globaluserpreferences",this.preferences),this.unchangedPreferences[i]||(this.unchangedPreferences[i]={}),this.unchangedPreferences[i][e]=t,this.completePreferencesWithDefaults(),"global"===i&&"timezone"===e&&this.session.setTimezone(this.toUse.timezone),n.next(o),this.preferences$.emit(s)}),(e=>{n.error(e)})),n}return this.preferences[i]||(this.preferences[i]={}),this.preferences[i][e]=t,this.completePreferencesWithDefaults(),"global"===i&&"timezone"===e&&this.session.setTimezone(this.toUse.timezone),null}setPreferences(e,t="global"){const s=new l.x;return this.backend.postRequest("module/Users/"+this.session.authData.userId+"/preferences/"+t,{},e).subscribe((i=>{for(let e in this.preferences[t])i.hasOwnProperty(e)?this.preferences[t][e]=i[e]:delete this.preferences[t][e];this.configuration.setData("globaluserpreferences",this.preferences),this.unchangedPreferences[t]=i,this.completePreferencesWithDefaults(),this.session.setTimezone(this.toUse.timezone),s.next(!0),this.preferences$.emit(e)}),(e=>{s.error(e)})),s}getDateFormat(){if(this.toUse.datef){let e=this.toUse.datef;return this.jsDateFormat2momentDateFormat(e)}return"YYYY-MM-DD"}jsDateFormat2momentDateFormat(e){return e.replace("Y","YYYY").replace("m","MM").replace("d","DD")}getTimeFormat(){if(this.toUse.timef){let e=this.toUse.timef;return this.jsTimeFormat2momentTimeFormat(e)}return"hh:mm"}jsTimeFormat2momentTimeFormat(e){return e.replace("H","HH").replace("h","hh").replace("i","mm")}needFormats(){this.formats.loaded||this.loadFormats()}loadFormats(){let e=new l.x;return this.formats.nameFormats.length=0,this.formats.loaded=!1,this.backend.getRequest("module/Users/preferencesformats").subscribe((t=>{if(Array.isArray(t.nameFormats))for(let e of t.nameFormats)this.formats.nameFormats.push({name:e,example:this.translateNameFormat(e)});this.formats.loaded=!0,e.next(!0)})),e.asObservable()}translateNameFormat(e){let t="";for(let s=0;s<e.length;s++)switch(e.charAt(s)){case"t":t+=this.language.getLabel("LBL_LOCALE_NAME_EXAMPLE_TITLE");break;case"f":t+=this.language.getLabel("LBL_LOCALE_NAME_EXAMPLE_FIRST");break;case"l":t+=this.language.getLabel("LBL_LOCALE_NAME_EXAMPLE_LAST");break;case"s":t+=this.language.getLabel("LBL_LOCALE_NAME_EXAMPLE_SALUTATION");break;default:t+=e.charAt(s)}return t}formatMoney(e,t=this.toUse.currency_significant_digits,s=3,i=this.toUse.num_grp_sep,n=this.toUse.dec_sep){let o="\\d(?=(\\d{"+s+"})+"+(t>0?"\\D":"$")+")";return e.toFixed(Math.max(0,~~t)).replace(".",n).replace(new RegExp(o,"g"),"$&"+i)}formatDate(e){if(moment.isMoment(e))return e.format(this.getDateFormat());let t=moment(e);return t.isValid()?t.format(this.getDateFormat()):e}formatDateTime(e){return moment.isMoment(e)?e.format(this.getDateFormat())+" "+e.format(this.getTimeFormat()):moment.utc(e).format(this.getDateFormat())+" "+moment.utc(e).format(this.getTimeFormat())}getPossibleDateFormats(){return[{name:moment().format(this.jsDateFormat2momentDateFormat("Y-m-d")),value:"Y-m-d"},{name:moment().format(this.jsDateFormat2momentDateFormat("m-d-Y")),value:"m-d-Y"},{name:moment().format(this.jsDateFormat2momentDateFormat("d-m-Y")),value:"d-m-Y"},{name:moment().format(this.jsDateFormat2momentDateFormat("Y/m/d")),value:"Y/m/d"},{name:moment().format(this.jsDateFormat2momentDateFormat("m/d/Y")),value:"m/d/Y"},{name:moment().format(this.jsDateFormat2momentDateFormat("d/m/Y")),value:"d/m/Y"},{name:moment().format(this.jsDateFormat2momentDateFormat("Y.m.d")),value:"Y.m.d"},{name:moment().format(this.jsDateFormat2momentDateFormat("d.m.Y")),value:"d.m.Y"},{name:moment().format(this.jsDateFormat2momentDateFormat("m.d.Y")),value:"m.d.Y"}]}getPossibleTimeFormats(){return[{name:moment().format(this.jsTimeFormat2momentTimeFormat("H:i")),value:"H:i"},{name:moment().format(this.jsTimeFormat2momentTimeFormat("h:ia")),value:"h:ia"},{name:moment().format(this.jsTimeFormat2momentTimeFormat("h:iA")),value:"h:iA"},{name:moment().format(this.jsTimeFormat2momentTimeFormat("h:i a")),value:"h:i a"},{name:moment().format(this.jsTimeFormat2momentTimeFormat("h:i A")),value:"h:i A"},{name:moment().format(this.jsTimeFormat2momentTimeFormat("H.i")),value:"H.i"},{name:moment().format(this.jsTimeFormat2momentTimeFormat("h.ia")),value:"h.ia"},{name:moment().format(this.jsTimeFormat2momentTimeFormat("h.iA")),value:"h.iA"},{name:moment().format(this.jsTimeFormat2momentTimeFormat("h.i a")),value:"h.i a"},{name:moment().format(this.jsTimeFormat2momentTimeFormat("h.i A")),value:"h.i A"}]}get companyCodeId(){return this.session.authData.companycode_id}}return e=userpreferences,(0,i.Z)(userpreferences,"ɵfac",(function(t){return new(t||e)(n.LFG(a.y),n.LFG(d.A),n.LFG(r.C),n.LFG(c.d),n.LFG(u.f),n.LFG(h.o),n.LFG(m.n),n.LFG(g.Pu))})),(0,i.Z)(userpreferences,"ɵprov",n.Yz7({token:e,factory:e.ɵfac,providedIn:"root"})),userpreferences})()},2294:(e,t,s)=>{"use strict";s.d(t,{e:()=>d});var i=s(1180),n=s(1135),o=s(2242),l=s(5710),a=s(6559);let d=(()=>{var e;class view{constructor(e,t){(0,i.Z)(this,"model",void 0),(0,i.Z)(this,"layout",void 0),(0,i.Z)(this,"mode","view"),(0,i.Z)(this,"mode$",void 0),(0,i.Z)(this,"isEditable",!1),(0,i.Z)(this,"displayLinks",!0),(0,i.Z)(this,"displayLabels",!0),(0,i.Z)(this,"editfieldid",""),(0,i.Z)(this,"editfieldname",""),(0,i.Z)(this,"labels","default"),(0,i.Z)(this,"_size","regular"),(0,i.Z)(this,"linkedToModel",!1),(0,i.Z)(this,"isLoading",!1),this.model=e,this.layout=t,this.mode$=new n.X(this.mode),this.model&&this.model.mode$.subscribe((e=>{this.linkedToModel&&"display"==e&&this.setViewMode()}))}set size(e){this._size=e}get size(){return"small"==this.layout.screenwidth?"small":this._size}getMode(){return this.mode}isEditMode(){return"edit"===this.mode}setEditMode(e=""){this.mode="edit",this.editfieldid=e,this.mode$.next(this.mode)}setViewMode(){this.mode="view",this.mode$.next(this.mode)}}return e=view,(0,i.Z)(view,"ɵfac",(function(t){return new(t||e)(o.LFG(l.o,8),o.LFG(a.b))})),(0,i.Z)(view,"ɵprov",o.Yz7({token:e,factory:e.ɵfac})),view})()},3101:(e,t,s)=>{"use strict";var i=s(1180),n=s(6550),o=s(4275),l=s(3629),a=s(2242),d=s(5030),r=s(3348),c=s(3144),u=s(4755),h=s(3735),m=s(4826),g=s(6490),p=s(2349),f=s(6625),b=s(3441),v=s(4461),Z=s(2355),_=s(3298),y=s(5920),x=s(4154),w=s(5322),T=s(5329),C=s(382),A=s(2422),k=s(2487),L=s(4411),I=s(3369),M=s(788),S=s(4505),J=s(2032),O=s(6163),N=s(3278),F=s(4376),q=s(2057),E=s(5385),Y=s(5547),D=s(3917),Q=s(5504),U=s(4044),R=s(6559),j=s(2067),B=s(2251),G=s(2222),P=s(5289),H=s(512),z=s(48),V=s(2956),K=s(8070),$=s(661);moment.defaultFormat="YYYY-MM-DD HH:mm:ss";const X=document.querySelector('meta[name="bootstrap"]')?.content;let W=(()=>{var e;class SpiceUI{constructor(e){(0,i.Z)(this,"render",void 0),(0,i.Z)(this,"globalHeader",void 0),this.render=e,this.render.listen("window","dragover",(e=>{e.preventDefault(),e.dataTransfer.effectAllowed="none",e.dataTransfer.dropEffect="none"})),this.render.listen("window","drop",(e=>{e.preventDefault()}))}get outletstyle(){return{"margin-top":(this.globalHeader?this.globalHeader.headerHeight:0)+"px"}}}return e=SpiceUI,(0,i.Z)(SpiceUI,"ɵfac",(function(t){return new(t||e)(a.Y36(a.Qsj))})),(0,i.Z)(SpiceUI,"ɵcmp",a.Xpm({type:e,selectors:[["spicecrm"]],viewQuery:function(e,t){if(1&e&&a.Gf(z.e,5),2&e){let e;a.iGM(e=a.CRH())&&(t.globalHeader=e.first)}},decls:5,vars:1,consts:[[3,"ngStyle"]],template:function(e,t){1&e&&(a._UZ(0,"global-header"),a.TgZ(1,"div",0),a._UZ(2,"router-outlet")(3,"system-navigation-manager"),a.qZA(),a._UZ(4,"global-footer")),2&e&&(a.xp6(1),a.Q6J("ngStyle",t.outletstyle))},dependencies:[u.PC,K.M,z.e,$.T,r.lC],encapsulation:2})),SpiceUI})(),ee=(()=>{var e;class SpiceUIModule{constructor(e,t,s){(0,i.Z)(this,"socket",void 0),(0,i.Z)(this,"assistant",void 0),(0,i.Z)(this,"reminder",void 0),this.socket=e,this.assistant=t,this.reminder=s}ngDoBootstrap(e){let t=W;e.bootstrap(t)}}return e=SpiceUIModule,(0,i.Z)(SpiceUIModule,"ɵfac",(function(t){return new(t||e)(a.LFG(G.W),a.LFG(Q.R),a.LFG(q.U))})),(0,i.Z)(SpiceUIModule,"ɵmod",a.oAB({type:e})),(0,i.Z)(SpiceUIModule,"ɵinj",a.cJS({providers:[x.en,Q.R,S.y,I.f,J.H,f.C,Y.A,M.m,F.G,D.M,k.Q,b._,T.d,R.b,j.$,L._,{provide:u.S$,useClass:u.Do},p.M,v.q,v.j,w.Y,x.Pu,U.o,O.A,x.bi,J.G,C.h,q.U,y.n,G.W,B.n,E.b,n.Dx,p.M,j.$,N.A,A.z,_.t,Z.J],imports:[n.b2,o.PW,c.JF,d.u5,h.SystemComponents,m.GlobalComponents,g.ObjectComponents,V.SpiceInstallerModule,r.Bz.forRoot([{path:"login",component:P.s},{path:"",redirectTo:"/module/Home",pathMatch:"full"},{path:"**",component:H.Y,canActivate:[v.q]}])]})),SpiceUIModule})();("undefined"==typeof ngJitMode||ngJitMode)&&a.kYT(ee,{declarations:[W],imports:[n.b2,o.PW,c.JF,d.u5,h.SystemComponents,m.GlobalComponents,g.ObjectComponents,V.SpiceInstallerModule,r.Bz]}),l.N.production&&((0,a.G48)(),console.log("production mode enabled")),document.documentMode?(document.getElementsByClassName("loaderspinner")[0].setAttribute("style","display:none"),document.getElementById("loadstatus").innerHTML="",document.getElementById("loadermessage").innerHTML="Internet Explorer is not supported. Please use a supported Browser like Chrome, Safari, Edge, etc."):(document.getElementById("loadstatus").innerHTML="...preparing..","outlook"==X?window.Office.onReady().then((()=>{n.q6().bootstrapModule(ee).catch((e=>console.error(e)))})):n.q6().bootstrapModule(ee).catch((e=>console.error(e)))),window.name="SpiceCRM",(()=>{if(window.hasOwnProperty("BroadcastChannel")){let e=new BroadcastChannel("spiceCRM_channel");e.onmessage=t=>{t.data.url&&t.data.url.startsWith(window.location.origin+window.location.pathname)&&(window.location=t.data.url,e.postMessage({urlReceived:!0}))}}})()},6010:(e,t,s)=>{"use strict";s.d(t,{L:()=>h,s:()=>m});var i=s(1180),n=s(2242),o=s(4755),l=s(4610),a=s(2656),d=s(3463);function r(e,t){if(1&e&&(n.ynx(0),n._uU(1),n._UZ(2,"system-label",11),n._uU(3," "),n.BQk()),2&e){const e=n.oxw(2);n.xp6(1),n.hij("",e.page," ")}}function c(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"div",3)(1,"span",4)(2,"button",5),n.NdJ("click",(function(){n.CHM(e);const t=n.oxw();return n.KtG(t.page=1)})),n._UZ(3,"system-button-custom-icon",6),n.qZA(),n.TgZ(4,"button",7),n.NdJ("click",(function(){n.CHM(e);const t=n.oxw();return n.KtG(t.pageDown())})),n._UZ(5,"system-button-icon",8),n.qZA()(),n.TgZ(6,"span"),n.YNc(7,r,4,1,"ng-container",9),n._uU(8),n._UZ(9,"system-label",10),n._uU(10),n._UZ(11,"system-label",11),n._uU(12),n._UZ(13,"system-label",12),n._uU(14,")"),n.qZA(),n.TgZ(15,"span",13)(16,"button",14),n.NdJ("click",(function(){n.CHM(e);const t=n.oxw();return n.KtG(t.pageUp())})),n._UZ(17,"system-button-icon",8),n.qZA(),n.TgZ(18,"button",5),n.NdJ("click",(function(){n.CHM(e);const t=n.oxw();return n.KtG(t.page=t.max_page)})),n._UZ(19,"system-button-custom-icon",15),n.qZA()()()}if(2&e){const e=n.oxw();n.xp6(2),n.Q6J("disabled",!e.canSwitch||e.page<2),n.xp6(1),n.Q6J("icon","chevrondoubleleft"),n.xp6(1),n.Q6J("disabled",!e.canSwitch||e.page<=1),n.xp6(1),n.Q6J("icon","chevronleft"),n.xp6(2),n.Q6J("ngIf",e.page),n.xp6(1),n.hij("",e.max_page," "),n.xp6(2),n.hij(" (",e.range," "),n.xp6(2),n.hij(" ",e.total_records," "),n.xp6(4),n.Q6J("disabled",!e.canSwitch||e.page>=e.max_page),n.xp6(1),n.Q6J("icon","chevronright"),n.xp6(1),n.Q6J("disabled",!e.canSwitch||e.page>=e.max_page-1),n.xp6(1),n.Q6J("icon","chevrondoubleright")}}function u(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"div",3)(1,"button",5),n.NdJ("click",(function(){n.CHM(e);const t=n.oxw();return n.KtG(t.pageDown())})),n._UZ(2,"system-button-icon",16),n.qZA(),n.TgZ(3,"div",17),n._uU(4),n._UZ(5,"system-label",11),n._uU(6),n._UZ(7,"system-label",10),n.qZA(),n.TgZ(8,"button",5),n.NdJ("click",(function(){n.CHM(e);const t=n.oxw();return n.KtG(t.pageUp())})),n._UZ(9,"system-button-icon",18),n.qZA()()}if(2&e){const e=n.oxw();n.xp6(1),n.Q6J("disabled",e.page<=1),n.xp6(1),n.Q6J("icon","chevronleft"),n.xp6(2),n.hij("",e.page," "),n.xp6(2),n.hij(" ",e.max_page," "),n.xp6(2),n.Q6J("disabled",e.page>=e.max_page),n.xp6(1),n.Q6J("icon","chevronright")}}let h=(()=>{var e;class PaginationControlsComponent{constructor(){(0,i.Z)(this,"_page",1),(0,i.Z)(this,"limit",1),(0,i.Z)(this,"total_records",0),(0,i.Z)(this,"variation","default"),(0,i.Z)(this,"page$",new n.vpe),(0,i.Z)(this,"oldPage$",new n.vpe),(0,i.Z)(this,"canSwitch",!0),(0,i.Z)(this,"offset",0),(0,i.Z)(this,"max_page",0),(0,i.Z)(this,"range","0 - 0")}get page(){return this._page}set page(e){this._page!==e&&(this.oldPage$.emit(this._page),this._page=e,this.page$.emit(this._page))}ngOnChanges(){this.total_records>0?this.max_page=Math.ceil(this.total_records/this.limit):this.max_page=0;const e=this._page*this.limit;this.range=`${e-this.limit} - ${e>this.total_records?this.total_records:e}`}pageUp(){if(!this.canSwitch||this.page>=this.max_page)return!1;this.page+=1}pageDown(){if(!this.canSwitch||this.page<=1)return!1;this.page-=1}}return e=PaginationControlsComponent,(0,i.Z)(PaginationControlsComponent,"ɵfac",(function(t){return new(t||e)})),(0,i.Z)(PaginationControlsComponent,"ɵcmp",n.Xpm({type:e,selectors:[["pagination-controls"]],inputs:{_page:["page","_page"],limit:"limit",total_records:"total_records",variation:"variation",canSwitch:"canSwitch"},outputs:{page$:"pageChange",oldPage$:"leftPage"},features:[n.TTD],decls:3,vars:2,consts:[[1,"slds-grid_align-center",3,"ngSwitch"],["class","slds-grid slds-grid--vertical-align-center",4,"ngSwitchDefault"],["class","slds-grid slds-grid--vertical-align-center",4,"ngSwitchCase"],[1,"slds-grid","slds-grid--vertical-align-center"],[1,"slds-m-right--x-small"],[1,"slds-button","slds-button_icon","slds-button--icon-small",3,"disabled","click"],["title","go to first page",3,"icon"],["title","go to previous page",1,"slds-button","slds-button_icon","slds-button--icon-small",3,"disabled","click"],[3,"icon"],[4,"ngIf"],["label","LBL_PAGES"],["label","LBL_OF"],["label","LBL_RECORDS"],[1,"slds-m-left--x-small"],["title","go to next page",1,"slds-button","slds-button_icon","slds-button--icon-small",3,"disabled","click"],["title","go to last page",3,"icon"],["title","go to previous page",3,"icon"],[1,"slds-p-horizontal--x-small"],["title","go to next page",3,"icon"]],template:function(e,t){1&e&&(n.TgZ(0,"div",0),n.YNc(1,c,20,12,"div",1),n.YNc(2,u,10,6,"div",2),n.qZA()),2&e&&(n.Q6J("ngSwitch",t.variation),n.xp6(2),n.Q6J("ngSwitchCase","short"))},dependencies:[o.O5,o.RF,o.n9,o.ED,l.O,a.J,d._],encapsulation:2})),PaginationControlsComponent})(),m=(()=>{var e;class PaginationPipe{transform(e,t){let s=(t.page-1)*t.limit,i=s+t.limit;return e.slice(s,i)}}return e=PaginationPipe,(0,i.Z)(PaginationPipe,"ɵfac",(function(t){return new(t||e)})),(0,i.Z)(PaginationPipe,"ɵpipe",n.Yjl({name:"paginate",type:e,pure:!1})),PaginationPipe})()},4994:(e,t,s)=>{"use strict";s.d(t,{g:()=>a});var i=s(1180),n=s(2242),o=s(4154),l=s(4755);let a=(()=>{var e;class SystemActionIcon{constructor(e){(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"icon",""),(0,i.Z)(this,"size",""),(0,i.Z)(this,"title",void 0),this.metadata=e}get svgHRef(){return"./vendor/sldassets/icons/action-sprite/svg/symbols.svg#"+this.icon}get iconClass(){return this.icon?"slds-icon-action-"+this.icon.replace("_","-"):""}get sizeClass(){return"slds-icon--"+this.size}}return e=SystemActionIcon,(0,i.Z)(SystemActionIcon,"ɵfac",(function(t){return new(t||e)(n.Y36(o.Pu))})),(0,i.Z)(SystemActionIcon,"ɵcmp",n.Xpm({type:e,selectors:[["system-action-icon"]],inputs:{icon:"icon",size:"size",title:"title"},decls:3,vars:3,consts:[[1,"slds-icon_container","slds-icon-action-change-record-type","slds-icon_container--circle",3,"ngClass"],["aria-hidden","true",1,"slds-icon",3,"ngClass"]],template:function(e,t){1&e&&(n.TgZ(0,"span",0),n.O4$(),n.TgZ(1,"svg",1),n._UZ(2,"use"),n.qZA()()),2&e&&(n.Q6J("ngClass",t.iconClass),n.xp6(1),n.Q6J("ngClass",t.sizeClass),n.xp6(1),n.uIk("href",t.svgHRef,null,"xlink"))},dependencies:[l.mk],encapsulation:2})),SystemActionIcon})()},4610:(e,t,s)=>{"use strict";s.d(t,{O:()=>a});var i=s(1180),n=s(2242),o=s(4154),l=s(4755);let a=(()=>{var e;class SystemButtonCustomIcon{constructor(e){(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"icon",void 0),(0,i.Z)(this,"size",void 0),(0,i.Z)(this,"position",void 0),(0,i.Z)(this,"inverse",!1),(0,i.Z)(this,"title",""),(0,i.Z)(this,"file","./assets/icons/spicecrm.svg"),this.metadata=e}getSvgHRef(){return this.file+"#"+this.icon}getClass(){let e=[];return this.size?e.push("slds-button__icon--"+this.size):e.push("slds-button__icon"),this.position&&e.push("slds-button__icon_"+this.position),this.inverse&&e.push("slds-button_icon-inverse"),e}}return e=SystemButtonCustomIcon,(0,i.Z)(SystemButtonCustomIcon,"ɵfac",(function(t){return new(t||e)(n.Y36(o.Pu))})),(0,i.Z)(SystemButtonCustomIcon,"ɵcmp",n.Xpm({type:e,selectors:[["system-button-custom-icon"]],inputs:{icon:"icon",size:"size",position:"position",inverse:"inverse",title:"title",file:"file"},decls:4,vars:3,consts:[["aria-hidden","true",1,"slds-button__icon",3,"ngClass"]],template:function(e,t){1&e&&(n.O4$(),n.TgZ(0,"svg",0)(1,"title"),n._uU(2),n.qZA(),n._UZ(3,"use"),n.qZA()),2&e&&(n.Q6J("ngClass",t.getClass()),n.xp6(2),n.Oqu(t.title),n.xp6(1),n.uIk("href",t.getSvgHRef(),null,"xlink"))},dependencies:[l.mk],encapsulation:2})),SystemButtonCustomIcon})()},2656:(e,t,s)=>{"use strict";s.d(t,{J:()=>a});var i=s(1180),n=s(2242),o=s(4154),l=s(4755);let a=(()=>{var e;class SystemButtonIcon{constructor(e,t){(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"cdref",void 0),(0,i.Z)(this,"icon",""),(0,i.Z)(this,"sprite","utility"),(0,i.Z)(this,"size",""),(0,i.Z)(this,"module",""),(0,i.Z)(this,"position",""),(0,i.Z)(this,"inverse",!1),(0,i.Z)(this,"title",void 0),(0,i.Z)(this,"addclasses",""),this.metadata=e,this.cdref=t}ngOnChanges(e){this.cdref.detectChanges()}getSvgHRef(){return"./vendor/sldassets/icons/"+this.getSprite()+"-sprite/svg/symbols.svg#"+this.getIcon()}getIcon(){if(this.icon)return this.icon.indexOf(":")>0?this.icon.split(":")[1]:this.icon;if(this.module&&this.metadata.getModuleIcon(this.module)){let e=this.metadata.getModuleIcon(this.module);return e.indexOf(":")>0?e.split(":")[1]:e}return"empty"}getSprite(){return this.icon&&this.icon.indexOf(":")>0?this.icon.split(":")[0]:this.module&&this.metadata.getModuleIcon(this.module)&&this.metadata.getModuleIcon(this.module).indexOf(":")>0?this.metadata.getModuleIcon(this.module).split(":")[0]:this.module?"standard":this.sprite}getClass(){let e=[];return""!=this.size?e.push("slds-button__icon--"+this.size):e.push("slds-button__icon"),""!=this.position&&e.push("slds-button__icon_"+this.position),this.inverse&&e.push("slds-button_icon-inverse"),this.addclasses?this.addclasses+" "+e:e}}return e=SystemButtonIcon,(0,i.Z)(SystemButtonIcon,"ɵfac",(function(t){return new(t||e)(n.Y36(o.Pu),n.Y36(n.sBO))})),(0,i.Z)(SystemButtonIcon,"ɵcmp",n.Xpm({type:e,selectors:[["system-button-icon"]],inputs:{icon:"icon",sprite:"sprite",size:"size",module:"module",position:"position",inverse:"inverse",title:"title",addclasses:"addclasses"},features:[n.TTD],decls:4,vars:3,consts:[["aria-hidden","true",1,"slds-button__icon",3,"ngClass"]],template:function(e,t){1&e&&(n.O4$(),n.TgZ(0,"svg",0)(1,"title"),n._uU(2),n.qZA(),n._UZ(3,"use"),n.qZA()),2&e&&(n.Q6J("ngClass",t.getClass()),n.xp6(2),n.Oqu(t.title),n.xp6(1),n.uIk("href",t.getSvgHRef(),null,"xlink"))},dependencies:[l.mk],encapsulation:2,changeDetection:0})),SystemButtonIcon})()},5399:(e,t,s)=>{"use strict";s.d(t,{x:()=>a});var i=s(1180),n=s(2242);const o=[[["system-card-header"]],[["system-card-body"]],[["system-card-footer"]]],l=["system-card-header","system-card-body","system-card-footer"];let a=(()=>{var e;class SystemCard{}return e=SystemCard,(0,i.Z)(SystemCard,"ɵfac",(function(t){return new(t||e)})),(0,i.Z)(SystemCard,"ɵcmp",n.Xpm({type:e,selectors:[["system-card"]],ngContentSelectors:l,decls:4,vars:0,consts:[[1,"slds-card","slds-card_boundary"]],template:function(e,t){1&e&&(n.F$t(o),n.TgZ(0,"article",0),n.Hsn(1),n.Hsn(2,1),n.Hsn(3,2),n.qZA())},encapsulation:2})),SystemCard})()},8807:(e,t,s)=>{"use strict";s.d(t,{I:()=>l});var i=s(1180),n=s(2242);const o=["*"];let l=(()=>{var e;class SystemCardBody{}return e=SystemCardBody,(0,i.Z)(SystemCardBody,"ɵfac",(function(t){return new(t||e)})),(0,i.Z)(SystemCardBody,"ɵcmp",n.Xpm({type:e,selectors:[["system-card-body"]],ngContentSelectors:o,decls:2,vars:0,consts:[[1,"slds-card__body","slds-card__body_inner"]],template:function(e,t){1&e&&(n.F$t(),n.TgZ(0,"div",0),n.Hsn(1),n.qZA())},encapsulation:2})),SystemCardBody})()},2400:(e,t,s)=>{"use strict";s.d(t,{Q:()=>a});var i=s(1180),n=s(2242),o=s(4561);const l=["*"];let a=(()=>{var e;class SystemCardHeader{constructor(){(0,i.Z)(this,"icon",void 0),(0,i.Z)(this,"module",void 0),(0,i.Z)(this,"cardtitel",void 0)}}return e=SystemCardHeader,(0,i.Z)(SystemCardHeader,"ɵfac",(function(t){return new(t||e)})),(0,i.Z)(SystemCardHeader,"ɵcmp",n.Xpm({type:e,selectors:[["system-card-header"]],inputs:{icon:"icon",module:"module",cardtitel:"cardtitel"},ngContentSelectors:l,decls:10,vars:3,consts:[[1,"slds-card__header","slds-grid"],[1,"slds-media","slds-media_center","slds-has-flexi-truncate"],[1,"slds-media__figure"],[3,"module","icon"],[1,"slds-media__body"],[1,"slds-card__header-title"],[1,"slds-text-heading_small"],[1,"slds-no-flex"]],template:function(e,t){1&e&&(n.F$t(),n.TgZ(0,"div",0)(1,"header",1)(2,"div",2),n._UZ(3,"system-icon",3),n.qZA(),n.TgZ(4,"div",4)(5,"h2",5)(6,"span",6),n._uU(7),n.qZA()()(),n.TgZ(8,"div",7),n.Hsn(9),n.qZA()()()),2&e&&(n.xp6(3),n.Q6J("module",t.module)("icon",t.icon),n.xp6(4),n.hij(" ",t.cardtitel," "))},dependencies:[o.f],encapsulation:2})),SystemCardHeader})()},701:(e,t,s)=>{"use strict";s.d(t,{r:()=>d});var i=s(1180),n=s(2242),o=s(4561),l=s(2803),a=s(2161);let d=(()=>{var e;class SystemCardStencil{}return e=SystemCardStencil,(0,i.Z)(SystemCardStencil,"ɵfac",(function(t){return new(t||e)})),(0,i.Z)(SystemCardStencil,"ɵcmp",n.Xpm({type:e,selectors:[["system-card-stencil"]],decls:23,vars:0,consts:[[1,"slds-card","slds-card_boundary","slds-m-bottom--medium"],[1,"slds-card__header","slds-grid"],[1,"slds-media","slds-media_center","slds-has-flexi-truncate"],[1,"slds-media__figure"],[1,"slds-media__body"],[1,"slds-card__header-title"],[1,"slds-card__header-link","slds-truncate"],[1,"slds-card__body"],["role","grid",1,"slds-table","slds-table_cell-buffer","slds-no-row-hover","slds-table_bordered","slds-table_fixed-layout"],[1,"slds-line-height_reset"],["scope","col",1,""],["system-table-stencils","","rows","3","columns","4"]],template:function(e,t){1&e&&(n.TgZ(0,"div",0)(1,"div",1)(2,"header",2)(3,"div",3),n._UZ(4,"system-icon"),n.qZA(),n.TgZ(5,"div",4)(6,"h2",5)(7,"div",6)(8,"span"),n._UZ(9,"system-stencil"),n.qZA()()()()()(),n.TgZ(10,"div",7)(11,"table",8)(12,"thead")(13,"tr",9)(14,"th",10),n._UZ(15,"system-stencil"),n.qZA(),n.TgZ(16,"th",10),n._UZ(17,"system-stencil"),n.qZA(),n.TgZ(18,"th",10),n._UZ(19,"system-stencil"),n.qZA(),n.TgZ(20,"th",10),n._UZ(21,"system-stencil"),n.qZA()()(),n._UZ(22,"tbody",11),n.qZA()()())},dependencies:[o.f,l.B,a.x],encapsulation:2})),SystemCardStencil})()},7514:(e,t,s)=>{"use strict";s.d(t,{U:()=>u});var i=s(1180),n=s(2242),o=s(5030),l=s(5329),a=s(4755);const d=["inputCheckbox"];function r(e,t){1&e&&(n.TgZ(0,"span",6),n.Hsn(1),n.qZA())}const c=["*"];let u=(()=>{var e;class SystemCheckbox{set disabled(e){this._disabled=!1!==e}get value(){return this._value}set value(e){this._value=e}get model_value(){return this.asinteger?1==this._model_value:this._model_value}set model_value(e){let t=this.asinteger?e?1:0:e;t!=this._model_value&&this.onChange(t),this.writeValue(t)}constructor(e,t){(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"cdRef",void 0),(0,i.Z)(this,"inputCheckbox",void 0),(0,i.Z)(this,"hidelabel",!1),(0,i.Z)(this,"indeterminate",!1),(0,i.Z)(this,"asinteger",!1),(0,i.Z)(this,"_disabled",!1),(0,i.Z)(this,"click$",new n.vpe),(0,i.Z)(this,"change$",new n.vpe),(0,i.Z)(this,"id",_.uniqueId()),(0,i.Z)(this,"_model_value",void 0),(0,i.Z)(this,"_value","1"),this.language=e,this.cdRef=t}ngAfterViewInit(){this.setCheckboxIndeterminate()}ngOnChanges(e){e.indeterminate&&this.setCheckboxIndeterminate()}setCheckboxIndeterminate(){this.inputCheckbox&&(this.inputCheckbox.nativeElement.indeterminate=this.indeterminate)}click(e){if(e.stopPropagation(),this.disabled)return!1;this.onTouched(),this.click$.emit(this.value)}onChange(e){}registerOnChange(e){this.onChange=t=>{e(t)}}onTouched(){}registerOnTouched(e){this.onTouched=e}setDisabledState(e){this.disabled=e}writeValue(e){this._model_value=e,this.cdRef.detectChanges()}}return e=SystemCheckbox,(0,i.Z)(SystemCheckbox,"ɵfac",(function(t){return new(t||e)(n.Y36(l.d),n.Y36(n.sBO))})),(0,i.Z)(SystemCheckbox,"ɵcmp",n.Xpm({type:e,selectors:[["system-checkbox"]],viewQuery:function(e,t){if(1&e&&n.Gf(d,5),2&e){let e;n.iGM(e=n.CRH())&&(t.inputCheckbox=e.first)}},inputs:{hidelabel:"hidelabel",indeterminate:"indeterminate",asinteger:"asinteger",disabled:"disabled",value:"value"},outputs:{click$:"click",change$:"change"},features:[n._Bn([{provide:o.JU,useExisting:(0,n.Gpc)((()=>e)),multi:!0}]),n.TTD],ngContentSelectors:c,decls:6,vars:8,consts:[[1,"slds-checkbox"],["type","checkbox",3,"id","disabled","value","ngModel","click","ngModelChange"],["inputCheckbox",""],[1,"slds-checkbox__label","slds-truncate",3,"for","id"],[1,"slds-checkbox_faux","slds-m-horizontal--xxx-small"],["class","slds-form-element__label slds-p-left--xx-small",4,"ngIf"],[1,"slds-form-element__label","slds-p-left--xx-small"]],template:function(e,t){1&e&&(n.F$t(),n.TgZ(0,"span",0)(1,"input",1,2),n.NdJ("click",(function(e){return t.click(e)}))("ngModelChange",(function(e){return t.model_value=e})),n.qZA(),n.TgZ(3,"label",3),n._UZ(4,"span",4),n.YNc(5,r,2,0,"span",5),n.qZA()()),2&e&&(n.xp6(1),n.MGl("id","checkbox-",t.id,""),n.Q6J("disabled",t._disabled)("value",t.value)("ngModel",t.model_value),n.uIk("aria-labelledby","checkbox-button-label-"+t.id+" check-group-header"),n.xp6(2),n.MGl("for","checkbox-",t.id,"")("id","checkbox-button-label-",t.id,""),n.xp6(2),n.Q6J("ngIf",!t.hidelabel))},dependencies:[a.O5,o.Wl,o.JJ,o.On],encapsulation:2})),SystemCheckbox})()},9503:(e,t,s)=>{"use strict";s.d(t,{L:()=>a});var i=s(1180),n=s(2242),o=s(5030);const l=["*"];let a=(()=>{var e;class SystemCheckboxGroup{constructor(e){(0,i.Z)(this,"cdRef",void 0),(0,i.Z)(this,"valueEmitter",new n.vpe),(0,i.Z)(this,"onChange",void 0),(0,i.Z)(this,"onTouched",void 0),(0,i.Z)(this,"_value",[]),this.cdRef=e}get value(){return this._value}set value(e){this.onChange(e),this.writeValue(e)}writeValue(e){e&&!_.isEqual(e,this._value)&&(this._value=_.clone(e),this.cdRef.detectChanges(),this.valueEmitter.emit())}registerOnChange(e){this.onChange=t=>e(t)}registerOnTouched(e){this.onTouched=e}ngAfterViewInit(){this.cdRef.detach()}ngOnDestroy(){this.cdRef.reattach()}}return e=SystemCheckboxGroup,(0,i.Z)(SystemCheckboxGroup,"ɵfac",(function(t){return new(t||e)(n.Y36(n.sBO))})),(0,i.Z)(SystemCheckboxGroup,"ɵcmp",n.Xpm({type:e,selectors:[["system-checkbox-group"]],features:[n._Bn([{provide:o.JU,useExisting:(0,n.Gpc)((()=>e)),multi:!0}])],ngContentSelectors:l,decls:1,vars:0,template:function(e,t){1&e&&(n.F$t(),n.Hsn(0))},encapsulation:2,changeDetection:0})),SystemCheckboxGroup})()},8658:(e,t,s)=>{"use strict";s.d(t,{m:()=>d});var i=s(1180),n=s(2242),o=s(9503),l=s(5030);const a=["*"];let d=(()=>{var e;class SystemCheckboxGroupCheckbox{constructor(e,t){(0,i.Z)(this,"systemCheckboxGroup",void 0),(0,i.Z)(this,"cdRef",void 0),(0,i.Z)(this,"id",_.uniqueId("checkbox-group-checkbox-")),(0,i.Z)(this,"value",void 0),(0,i.Z)(this,"disabled",!1),(0,i.Z)(this,"_checked",!1),this.systemCheckboxGroup=e,this.cdRef=t,this.systemCheckboxGroup.valueEmitter.subscribe((()=>this.setCheckedValueFromGroup()))}get checked(){return this._checked}set checked(e){this._checked=e,this.setGroupValue()}ngAfterViewInit(){this.cdRef.detectChanges(),this.cdRef.detach()}ngOnChanges(e){this.setCheckedValueFromGroup()}ngOnDestroy(){this.cdRef.reattach(),this.systemCheckboxGroup.valueEmitter.unsubscribe()}setCheckedValueFromGroup(){this._checked=(this.systemCheckboxGroup.value||[]).indexOf(this.value)>-1,this.cdRef.detectChanges()}setGroupValue(){!this.checked&&this.systemCheckboxGroup.value.indexOf(this.value)>-1?this.systemCheckboxGroup.value=this.systemCheckboxGroup.value.filter((e=>e!=this.value)):this.checked&&-1==this.systemCheckboxGroup.value.indexOf(this.value)&&(this.systemCheckboxGroup.value=[...this.systemCheckboxGroup.value,this.value])}}return e=SystemCheckboxGroupCheckbox,(0,i.Z)(SystemCheckboxGroupCheckbox,"ɵfac",(function(t){return new(t||e)(n.Y36(o.L,1),n.Y36(n.sBO))})),(0,i.Z)(SystemCheckboxGroupCheckbox,"ɵcmp",n.Xpm({type:e,selectors:[["system-checkbox-group-checkbox"]],inputs:{value:"value",disabled:"disabled"},features:[n.TTD],ngContentSelectors:a,decls:6,vars:4,consts:[[1,"slds-checkbox","slds-truncate"],["type","checkbox",3,"id","disabled","ngModel","ngModelChange"],[1,"slds-checkbox__label",3,"for"],[1,"slds-checkbox_faux"],[1,"slds-form-element__label","slds-p-left--x-small"]],template:function(e,t){1&e&&(n.F$t(),n.TgZ(0,"span",0)(1,"input",1),n.NdJ("ngModelChange",(function(e){return t.checked=e})),n.qZA(),n.TgZ(2,"label",2),n._UZ(3,"span",3),n.TgZ(4,"span",4),n.Hsn(5),n.qZA()()()),2&e&&(n.xp6(1),n.Q6J("id",t.id)("disabled",t.disabled)("ngModel",t.checked),n.xp6(1),n.Q6J("for",t.id))},dependencies:[l.Wl,l.JJ,l.On],encapsulation:2,changeDetection:0})),SystemCheckboxGroupCheckbox})()},528:(e,t,s)=>{"use strict";s.d(t,{v:()=>a});var i=s(1180),n=s(2242),o=s(5030),l=s(3463);let a=(()=>{var e;class SystemCheckboxToggle{constructor(e){(0,i.Z)(this,"cdRef",void 0),(0,i.Z)(this,"name",void 0),(0,i.Z)(this,"label",""),(0,i.Z)(this,"disabled",!1),(0,i.Z)(this,"localValue",void 0),(0,i.Z)(this,"onChange",void 0),(0,i.Z)(this,"onTouched",void 0),this.cdRef=e}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}writeValue(e){this.localValue=e,this.cdRef.detectChanges()}}return e=SystemCheckboxToggle,(0,i.Z)(SystemCheckboxToggle,"ɵfac",(function(t){return new(t||e)(n.Y36(n.sBO))})),(0,i.Z)(SystemCheckboxToggle,"ɵcmp",n.Xpm({type:e,selectors:[["system-checkbox-toggle"]],inputs:{name:"name",label:"label",disabled:"disabled"},features:[n._Bn([{provide:o.JU,useExisting:(0,n.Gpc)((()=>e)),multi:!0}])],decls:7,vars:4,consts:[[1,"slds-form-element"],[1,"slds-checkbox_toggle","slds-grid"],[1,"slds-form-element__label","slds-m-bottom_none","slds-grow"],[3,"label"],["type","checkbox",3,"ngModel","disabled","name","ngModelChange"],["aria-live","assertive",1,"slds-checkbox_faux_container"],[1,"slds-checkbox_faux"]],template:function(e,t){1&e&&(n.TgZ(0,"div",0)(1,"label",1)(2,"span",2),n._UZ(3,"system-label",3),n.qZA(),n.TgZ(4,"input",4),n.NdJ("ngModelChange",(function(e){return t.localValue=e}))("ngModelChange",(function(e){return t.onChange(e)})),n.qZA(),n.TgZ(5,"span",5),n._UZ(6,"span",6),n.qZA()()()),2&e&&(n.xp6(3),n.Q6J("label",t.label),n.xp6(1),n.Q6J("ngModel",t.localValue)("disabled",t.disabled)("name",t.name))},dependencies:[o.Wl,o.JJ,o.On,l._],encapsulation:2,changeDetection:0})),SystemCheckboxToggle})()},1553:(e,t,s)=>{"use strict";s.d(t,{z:()=>y});var i=s(1180),n=s(1591),o=s(2242),l=s(5329),a=s(4755),d=s(4561),r=s(3463),c=s(8859),u=s(8594);function h(e,t){if(1&e&&o._UZ(0,"system-icon",12),2&e){const e=o.oxw(3);o.Q6J("module",e.moduleicon)}}function m(e,t){if(1&e&&o._UZ(0,"system-icon-help-text",13),2&e){const e=o.oxw(3);o.Q6J("helpText",e._helpText)}}function g(e,t){if(1&e){const e=o.EpF();o.ynx(0),o.TgZ(1,"button",5),o.NdJ("click",(function(){o.CHM(e);const t=o.oxw(2);return o.KtG(t.togglePanel())})),o._UZ(2,"system-utility-icon",6),o.TgZ(3,"div",7),o.YNc(4,h,1,1,"system-icon",8),o.TgZ(5,"span",9),o._UZ(6,"system-label",10),o.qZA(),o.YNc(7,m,1,1,"system-icon-help-text",11),o.qZA()(),o.BQk()}if(2&e){const e=o.oxw(2);o.xp6(4),o.Q6J("ngIf",e.moduleicon),o.xp6(2),o.Q6J("label",e._title),o.xp6(1),o.Q6J("ngIf",e._helpText)}}function p(e,t){if(1&e&&o._UZ(0,"system-icon",12),2&e){const e=o.oxw(3);o.Q6J("module",e.moduleicon)}}function f(e,t){if(1&e&&o._UZ(0,"system-icon-help-text",13),2&e){const e=o.oxw(3);o.Q6J("helpText",e._helpText)}}function b(e,t){if(1&e&&(o.TgZ(0,"div",14),o.YNc(1,p,1,1,"system-icon",8),o.TgZ(2,"span",9),o._UZ(3,"system-label",10),o.qZA(),o.YNc(4,f,1,1,"system-icon-help-text",11),o.qZA()),2&e){const e=o.oxw(2);o.xp6(1),o.Q6J("ngIf",e.moduleicon),o.xp6(2),o.Q6J("label",e._title),o.xp6(1),o.Q6J("ngIf",e._helpText)}}function v(e,t){if(1&e&&(o.TgZ(0,"h3",2),o.YNc(1,g,8,3,"ng-container",3),o.YNc(2,b,5,3,"ng-template",null,4,o.W1O),o.qZA()),2&e){const e=o.MAs(3),t=o.oxw();o.xp6(1),o.Q6J("ngIf",t.collapsible)("ngIfElse",e)}}const Z=function(e,t){return{"slds-is-open":e,"slds-m-around--none":t}},_=["*"];let y=(()=>{var e;class SystemCollabsableTab{constructor(e){(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"collapsible",!0),(0,i.Z)(this,"expanded",!0),(0,i.Z)(this,"margin","default"),(0,i.Z)(this,"title",""),(0,i.Z)(this,"moduleicon",""),(0,i.Z)(this,"tabtitle",""),(0,i.Z)(this,"tabhelptext",""),this.language=e}togglePanel(){this.expanded=!this.expanded}get _title(){return this.tabtitle?this.tabtitle:!!this.title&&this.title}get _helpText(){return!!this.tabhelptext&&this.language.getLabel(this.tabhelptext)}}return e=SystemCollabsableTab,(0,i.Z)(SystemCollabsableTab,"ɵfac",(function(t){return new(t||e)(o.Y36(l.d))})),(0,i.Z)(SystemCollabsableTab,"ɵcmp",o.Xpm({type:e,selectors:[["system-collapsable-tab"]],inputs:{collapsible:"collapsible",expanded:"expanded",margin:"margin",title:"title",moduleicon:"moduleicon",tabtitle:"tabtitle",tabhelptext:"tabhelptext"},ngContentSelectors:_,decls:4,vars:8,consts:[[1,"slds-section",3,"ngClass"],["class","slds-section__title",4,"ngIf"],[1,"slds-section__title"],[4,"ngIf","ngIfElse"],["simpleheader",""],["aria-expanded","true",1,"slds-button","slds-section__title-action",3,"click"],["icon","switch","size","x-small","addclasses","slds-section__title-action-icon slds-button__icon slds-button__icon_left"],[1,"slds-grid","slds-grid--vertical-align-center"],["size","x-small",3,"module",4,"ngIf"],[1,"slds-truncate"],[3,"label"],[3,"helpText",4,"ngIf"],["size","x-small",3,"module"],[3,"helpText"],[1,"slds-grid","slds-grid--vertical-align-center","slds-section__title-action",2,"cursor","default"]],template:function(e,t){1&e&&(o.F$t(),o.TgZ(0,"div",0),o.YNc(1,v,4,2,"h3",1),o.TgZ(2,"div"),o.Hsn(3),o.qZA()()),2&e&&(o.Q6J("ngClass",o.WLB(5,Z,t.expanded,"none"==t.margin)),o.xp6(1),o.Q6J("ngIf",""!=t._title),o.xp6(1),o.Udp("display",t.expanded?"block":"none"),o.Q6J("@tabanimation",t.expanded))},dependencies:[a.mk,a.O5,d.f,r._,c.r,u.h],encapsulation:2,data:{animation:[(0,n.X$)("tabanimation",[(0,n.SB)("true",(0,n.oB)({height:"*",opacity:1})),(0,n.SB)("false",(0,n.oB)({height:"0px",opacity:0})),(0,n.eR)("true => false",[(0,n.oB)({overflow:"hidden"}),(0,n.jt)(".5s")]),(0,n.eR)("false => true",[(0,n.jt)(".5s"),(0,n.oB)({overflow:"inherit"})])])]}})),SystemCollabsableTab})()},7516:(e,t,s)=>{"use strict";s.d(t,{m:()=>c});var i=s(1180),n=s(2242),o=s(4755),l=s(4664);const a=["container"];function d(e,t){if(1&e&&(n.TgZ(0,"div",2),n._UZ(1,"system-spinner",3),n.qZA()),2&e){const e=n.oxw();n.Q6J("title",e.containerComponent)}}function r(e,t){}let c=(()=>{var e;class SystemComponentContainer{constructor(){(0,i.Z)(this,"container",void 0),(0,i.Z)(this,"containerRef",new n.vpe),(0,i.Z)(this,"loaded",!1),(0,i.Z)(this,"containerComponent","")}ngAfterViewInit(){this.containerRef.emit(this.container),this.containerRef.complete()}}return e=SystemComponentContainer,(0,i.Z)(SystemComponentContainer,"ɵfac",(function(t){return new(t||e)})),(0,i.Z)(SystemComponentContainer,"ɵcmp",n.Xpm({type:e,selectors:[["system-component-container"]],viewQuery:function(e,t){if(1&e&&n.Gf(a,7,n.s_b),2&e){let e;n.iGM(e=n.CRH())&&(t.container=e.first)}},decls:3,vars:1,consts:[["style","width:100%;","class","slds-align--absolute-center slds-p-around--xx-small",3,"title",4,"ngIf"],["container",""],[1,"slds-align--absolute-center","slds-p-around--xx-small",2,"width","100%",3,"title"],["size","12"]],template:function(e,t){1&e&&(n.YNc(0,d,2,1,"div",0),n.YNc(1,r,0,0,"ng-template",null,1,n.W1O)),2&e&&n.Q6J("ngIf",!t.loaded)},dependencies:[o.O5,l.W],encapsulation:2})),SystemComponentContainer})()},51:(e,t,s)=>{"use strict";s.d(t,{K:()=>o});var i=s(1180),n=s(2242);let o=(()=>{var e;class SystemComponentMissing{constructor(){(0,i.Z)(this,"component","")}}return e=SystemComponentMissing,(0,i.Z)(SystemComponentMissing,"ɵfac",(function(t){return new(t||e)})),(0,i.Z)(SystemComponentMissing,"ɵcmp",n.Xpm({type:e,selectors:[["system-component-missing"]],decls:5,vars:1,consts:[[1,"slds-box","slds-align_absolute-center","slds-theme_alert-texture","slds-theme_error"]],template:function(e,t){1&e&&(n.TgZ(0,"div",0),n._uU(1," Component "),n.TgZ(2,"b"),n._uU(3),n.qZA(),n._uU(4," Missing\n"),n.qZA()),2&e&&(n.xp6(3),n.Oqu(t.component))},encapsulation:2})),SystemComponentMissing})()},6951:(e,t,s)=>{"use strict";s.d(t,{E:()=>r});var i=s(1180),n=s(2242),o=s(4154),l=s(4755),a=s(2995);function d(e,t){if(1&e&&n._UZ(0,"system-dynamic-component",1),2&e){const e=t.$implicit;n.Q6J("component",e.component)("componentconfig",e.componentconfig)}}let r=(()=>{var e;class SystemComponentSet{constructor(e){(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"componentset",""),(0,i.Z)(this,"_componentset",""),(0,i.Z)(this,"components",[]),this.metadata=e}ngOnChanges(){this.renderComnponentset()}renderComnponentset(){this.componentset!=this._componentset&&(this.componentset?this.components=this.metadata.getComponentSetObjects(this.componentset):this.components=[],this._componentset=this.componentset)}}return e=SystemComponentSet,(0,i.Z)(SystemComponentSet,"ɵfac",(function(t){return new(t||e)(n.Y36(o.Pu))})),(0,i.Z)(SystemComponentSet,"ɵcmp",n.Xpm({type:e,selectors:[["system-componentset"]],inputs:{componentset:"componentset"},features:[n.TTD],decls:1,vars:1,consts:[[3,"component","componentconfig",4,"ngFor","ngForOf"],[3,"component","componentconfig"]],template:function(e,t){1&e&&n.YNc(0,d,1,2,"system-dynamic-component",0),2&e&&n.Q6J("ngForOf",t.components)},dependencies:[l.sg,a.T],encapsulation:2})),SystemComponentSet})()},34:(e,t,s)=>{"use strict";s.d(t,{$:()=>a});var i=s(1180),n=s(2242),o=s(4154),l=s(4755);let a=(()=>{var e;class SystemCustomIcon{constructor(e){(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"icon","info"),(0,i.Z)(this,"file","./assets/icons/spicecrm.svg"),(0,i.Z)(this,"size",""),(0,i.Z)(this,"color",""),(0,i.Z)(this,"desaturate",!1),(0,i.Z)(this,"addclasses",""),(0,i.Z)(this,"divClass","slds-media__figure"),this.metadata=e}getSizeClass(){return this.size?"slds-icon--"+this.size:""}getSvg(){return this.file+"#"+this.icon}get iconClass(){return"slds-icon"+(this.size?" slds-icon--"+this.size:"")+" slds-icon-text-default "+this.addclasses}get iconStyle(){let e={};return this.color&&(e.color=this.color),this.desaturate&&(e.filter="saturate(0)"),e}}return e=SystemCustomIcon,(0,i.Z)(SystemCustomIcon,"ɵfac",(function(t){return new(t||e)(n.Y36(o.Pu))})),(0,i.Z)(SystemCustomIcon,"ɵcmp",n.Xpm({type:e,selectors:[["system-custom-icon"]],inputs:{icon:"icon",file:"file",size:"size",color:"color",desaturate:"desaturate",addclasses:"addclasses",divClass:"divClass"},decls:3,vars:3,consts:[[1,"slds-p-horizontal--xxx-small","slds-current-color"],["aria-hidden","true",3,"ngClass","ngStyle"]],template:function(e,t){1&e&&(n.TgZ(0,"div",0),n.O4$(),n.TgZ(1,"svg",1),n._UZ(2,"use"),n.qZA()()),2&e&&(n.xp6(1),n.Q6J("ngClass",t.iconClass)("ngStyle",t.iconStyle),n.xp6(1),n.uIk("href",t.getSvg(),null,"xlink"))},dependencies:[l.mk,l.PC],encapsulation:2})),SystemCustomIcon})()},7060:(e,t,s)=>{"use strict";s.d(t,{G:()=>l});var i=s(1180),n=s(2242),o=s(5547);let l=(()=>{var e;class SystemDisplayCurrencySymbol{constructor(e,t){(0,i.Z)(this,"cdRef",void 0),(0,i.Z)(this,"currency",void 0),(0,i.Z)(this,"currencyid",void 0),this.cdRef=e,this.currency=t}ngOnChanges(e){this.cdRef.detectChanges()}get currencySymbol(){if(!this.currencyid)return"";let e=this.currency.getCurrencies().find((e=>e.id==this.currencyid));return e?e.symbol:""}}return e=SystemDisplayCurrencySymbol,(0,i.Z)(SystemDisplayCurrencySymbol,"ɵfac",(function(t){return new(t||e)(n.Y36(n.sBO),n.Y36(o.A))})),(0,i.Z)(SystemDisplayCurrencySymbol,"ɵcmp",n.Xpm({type:e,selectors:[["system-display-currency-symbol"]],inputs:{currencyid:"currencyid"},features:[n.TTD],decls:1,vars:1,template:function(e,t){1&e&&n._uU(0),2&e&&n.Oqu(t.currencySymbol)},encapsulation:2})),SystemDisplayCurrencySymbol})()},6538:(e,t,s)=>{"use strict";s.d(t,{a:()=>r});var i=s(1180),n=s(727),o=s(2242),l=s(5329),a=s(5920),d=s(2422);let r=(()=>{var e;class SystemDisplayDatetime{constructor(e,t,s,o){(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"cdRef",void 0),(0,i.Z)(this,"session",void 0),(0,i.Z)(this,"userpreferences",void 0),(0,i.Z)(this,"date",void 0),(0,i.Z)(this,"displayDate",!0),(0,i.Z)(this,"displayTime",!0),(0,i.Z)(this,"subscriptions",new n.w0),this.language=e,this.cdRef=t,this.session=s,this.userpreferences=o}ngOnChanges(e){this.detectChanges()}ngOnDestroy(){this.subscriptions.unsubscribe()}ngAfterViewInit(){this.subscribeToPrefs()}subscribeToPrefs(){this.subscriptions.add(this.userpreferences.preferences$.subscribe((e=>{this.prefChanges(e)})))}prefChanges(e){this.detectChanges()}detectChanges(){this.cdRef.detectChanges()}get displayValue(){if(!this.date||!this.displayDate&&!this.displayTime)return"";let e=[];if(this.displayDate&&e.push(this.userpreferences.getDateFormat()),this.displayTime&&e.push(this.userpreferences.getTimeFormat()),moment.isMoment(this.date))return this.date.format(e.join(" "));{let t=this.userpreferences.toUse.timezone||this.session.getSessionData("timezone")||moment.tz.guess(!0);return moment.utc(this.date).tz(t).format(e.join(" "))}}}return e=SystemDisplayDatetime,(0,i.Z)(SystemDisplayDatetime,"ɵfac",(function(t){return new(t||e)(o.Y36(l.d),o.Y36(o.sBO),o.Y36(a.n),o.Y36(d.z))})),(0,i.Z)(SystemDisplayDatetime,"ɵcmp",o.Xpm({type:e,selectors:[["system-display-datetime"]],inputs:{date:"date",displayDate:"displayDate",displayTime:"displayTime"},features:[o.TTD],decls:1,vars:1,template:function(e,t){1&e&&o._uU(0),2&e&&o.hij("",t.displayValue,"\n")},encapsulation:2,changeDetection:0})),SystemDisplayDatetime})()},4270:(e,t,s)=>{"use strict";s.d(t,{G:()=>u});var i=s(1180),n=s(2242),o=s(5329),l=s(5547),a=s(2422),d=s(4755),r=s(7060);function c(e,t){if(1&e&&(n.ynx(0),n._UZ(1,"system-display-currency-symbol",1),n.BQk()),2&e){const e=n.oxw();n.xp6(1),n.Q6J("currencyid",e.currency_id)}}let u=(()=>{var e;class SystemDisplayNumber{set onPrecisionChange(e){this.precision=e}set inputGrow(e){this.noDigits=!1!==e}constructor(e,t,s,n){(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"cdRef",void 0),(0,i.Z)(this,"currency",void 0),(0,i.Z)(this,"userpreferences",void 0),(0,i.Z)(this,"number",void 0),(0,i.Z)(this,"precision",void 0),(0,i.Z)(this,"currency_id",void 0),(0,i.Z)(this,"noDigits",!1),this.language=e,this.cdRef=t,this.currency=s,this.userpreferences=n}get currencySymbol(){if(!this.currency_id)return"";let e=this.currency.getCurrencies().find((e=>e.id==this.currency_id));return e?e.symbol:""}get value(){if(this.number&&""!=this.number||0===this.number)return"string"==typeof this.number&&(this.number=parseFloat(this.number)),void 0===this.precision&&(this.precision=this.userpreferences.toUse.currency_significant_digits),this.noDigits?this.userpreferences.formatMoney(this.number,0):this.userpreferences.formatMoney(this.number,this.precision)}ngOnChanges(e){this.detectChanges()}detectChanges(){this.cdRef.detectChanges()}}return e=SystemDisplayNumber,(0,i.Z)(SystemDisplayNumber,"ɵfac",(function(t){return new(t||e)(n.Y36(o.d),n.Y36(n.sBO),n.Y36(l.A),n.Y36(a.z))})),(0,i.Z)(SystemDisplayNumber,"ɵcmp",n.Xpm({type:e,selectors:[["system-display-number"]],inputs:{number:"number",onPrecisionChange:["precision","onPrecisionChange"],currency_id:"currency_id",noDigits:"noDigits",inputGrow:["system-display-number-nodigits","inputGrow"]},features:[n.TTD],decls:2,vars:2,consts:[[4,"ngIf"],[1,"slds-p-right--xx-small",3,"currencyid"]],template:function(e,t){1&e&&(n.YNc(0,c,2,1,"ng-container",0),n._uU(1)),2&e&&(n.Q6J("ngIf",t.currency_id),n.xp6(1),n.hij("",t.value,"\n"))},dependencies:[d.O5,r.G],encapsulation:2,changeDetection:0})),SystemDisplayNumber})()},2995:(e,t,s)=>{"use strict";s.d(t,{T:()=>a});var i=s(1180),n=s(2242),o=s(4154);const l=["container"];let a=(()=>{var e;class SystemDynamicComponent{constructor(e){(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"container",void 0),(0,i.Z)(this,"component",""),(0,i.Z)(this,"componentconfig",void 0),(0,i.Z)(this,"componentattributes",void 0),(0,i.Z)(this,"componentref",new n.vpe),(0,i.Z)(this,"_component",void 0),(0,i.Z)(this,"initialized",!1),this.metadata=e}ngAfterViewInit(){this.initialized||this.renderComponent()}ngOnChanges(e){this.container&&e.component&&(this._component&&(this._component.destroy(),this._component=void 0),this.renderComponent(),this.initialized=!0)}renderComponent(){this.component&&this.metadata.addComponent(this.component,this.container).subscribe((e=>{if(this.componentref.emit(e),this.componentconfig&&(e.instance.componentconfig=this.componentconfig),this.componentattributes)for(let t in this.componentattributes)e.instance[t]=this.componentattributes[t];this._component=e}))}}return e=SystemDynamicComponent,(0,i.Z)(SystemDynamicComponent,"ɵfac",(function(t){return new(t||e)(n.Y36(o.Pu))})),(0,i.Z)(SystemDynamicComponent,"ɵcmp",n.Xpm({type:e,selectors:[["system-dynamic-component"]],viewQuery:function(e,t){if(1&e&&n.Gf(l,7,n.s_b),2&e){let e;n.iGM(e=n.CRH())&&(t.container=e.first)}},inputs:{component:"component",componentconfig:"componentconfig",componentattributes:"componentattributes"},outputs:{componentref:"componentref"},features:[n.TTD],decls:2,vars:0,consts:[["container",""]],template:function(e,t){1&e&&n._UZ(0,"div",null,0)},encapsulation:2})),SystemDynamicComponent})()},512:(e,t,s)=>{"use strict";s.d(t,{Y:()=>d});var i=s(1180),n=s(2242),o=s(4154),l=s(3348);const a=["componentcontainer"];let d=(()=>{var e;class SystemDynamicRouteInterceptor{constructor(e,t,s){(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"route",void 0),(0,i.Z)(this,"router",void 0),(0,i.Z)(this,"componentcontainer",void 0),(0,i.Z)(this,"routercomponent",null),this.metadata=e,this.route=t,this.router=s}ngOnInit(){this.router.navigate(["/module/Home"])}}return e=SystemDynamicRouteInterceptor,(0,i.Z)(SystemDynamicRouteInterceptor,"ɵfac",(function(t){return new(t||e)(n.Y36(o.Pu),n.Y36(l.gz),n.Y36(l.F0))})),(0,i.Z)(SystemDynamicRouteInterceptor,"ɵcmp",n.Xpm({type:e,selectors:[["system-dynamicroute-container"]],viewQuery:function(e,t){if(1&e&&n.Gf(a,7,n.s_b),2&e){let e;n.iGM(e=n.CRH())&&(t.componentcontainer=e.first)}},decls:2,vars:0,consts:[["componentcontainer",""]],template:function(e,t){1&e&&n._UZ(0,"div",null,0)},encapsulation:2})),SystemDynamicRouteInterceptor})()},7693:(e,t,s)=>{"use strict";s.d(t,{T:()=>d});var i=s(1180),n=s(2242),o=s(4154),l=s(3441),a=s(4561);let d=(()=>{var e;class SystemFileIcon{constructor(e,t){(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"helper",void 0),(0,i.Z)(this,"filemimetype",""),(0,i.Z)(this,"filename",""),(0,i.Z)(this,"size",""),(0,i.Z)(this,"addclasses",""),(0,i.Z)(this,"divClass","slds-media__figure"),(0,i.Z)(this,"fileicon",{icon:"unknown",sprite:"doctype"}),this.metadata=e,this.helper=t}ngOnInit(){this.determineIcon()}determineIcon(){let e=this.helper.determineFileIcon(this.filemimetype);if("unknown"==e){if("msg"===this.filename.split(".").splice(-1,1)[0].toLowerCase())return void(this.fileicon={icon:"email",sprite:"standard"})}this.fileicon={icon:e,sprite:"doctype"}}}return e=SystemFileIcon,(0,i.Z)(SystemFileIcon,"ɵfac",(function(t){return new(t||e)(n.Y36(o.Pu),n.Y36(l._))})),(0,i.Z)(SystemFileIcon,"ɵcmp",n.Xpm({type:e,selectors:[["system-file-icon"]],inputs:{filemimetype:"filemimetype",filename:"filename",size:"size",addclasses:"addclasses",divClass:"divClass"},decls:1,vars:4,consts:[[3,"icon","divClass","sprite","size"]],template:function(e,t){1&e&&n._UZ(0,"system-icon",0),2&e&&n.Q6J("icon",t.fileicon.icon)("divClass",t.divClass)("sprite",t.fileicon.sprite)("size",t.size)},dependencies:[a.f],encapsulation:2})),SystemFileIcon})()},7720:(e,t,s)=>{"use strict";s.d(t,{H:()=>p});var i=s(1180),n=s(2242),o=s(4505),l=s(5329),a=s(4154),d=s(4755),r=s(5030),c=s(2656),u=s(3463),h=s(1230),m=s(7617);function g(e,t){if(1&e&&(n.TgZ(0,"option",15),n._UZ(1,"system-label",16),n.qZA()),2&e){const e=t.$implicit;n.Q6J("value",e.operator),n.xp6(1),n.Q6J("label",e.name)}}let p=(()=>{var e;class SystemFilterBuilderFilterExpression{constructor(e,t,s){(0,i.Z)(this,"backend",void 0),(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"module",void 0),(0,i.Z)(this,"filterexpression",{}),(0,i.Z)(this,"operatortype","default"),(0,i.Z)(this,"expressionDeleted",new n.vpe),(0,i.Z)(this,"operators",{default:[{operator:"equals",name:"LBL_OP_EQUALS",value1:"text"},{operator:"notequals",name:"LBL_OP_NOTEQUAL",value1:"text"},{operator:"starts",name:"LBL_STARTS",value1:"text"},{operator:"contains",name:"LBL_OP_CONTAINS",value1:"text"},{operator:"ncontains",name:"LBL_OP_NOTCONTAINS",value1:"text"},{operator:"greater",name:"LBL_OP_GREATER",value1:"text"},{operator:"gequal",name:"LBL_OP_GREATEREQUAL",value1:"text"},{operator:"less",name:"LBL_OP_LESS",value1:"text"},{operator:"lequal",name:"LBL_OP_LESSEQUAL",value1:"text"},{operator:"between",name:"LBL_OP_BETWEEN",value1:"text",value2:"text"},{operator:"empty",name:"LBL_OP_EMPTY"},{operator:"notempty",name:"LBL_OP_NOTEMPTY"}],numeric:[{operator:"equals",name:"LBL_OP_EQUALS",value1:"integer"},{operator:"notequals",name:"LBL_OP_NOTEQUAL",value1:"text"},{operator:"greater",name:"LBL_OP_GREATER",value1:"integer"},{operator:"gequal",name:"LBL_OP_GREATEREQUAL",value1:"integer"},{operator:"less",name:"LBL_OP_LESS",value1:"integer"},{operator:"lequal",name:"LBL_OP_LESSEQUAL",value1:"integer"},{operator:"between",name:"LBL_OP_BETWEEN",value1:"integer",value2:"integer"}],date:[{operator:"today",name:"LBL_TODAY"},{operator:"past",name:"LBL_PAST"},{operator:"future",name:"LBL_FUTURE"},{operator:"thismonth",name:"LBL_THIS_MONTH"},{operator:"thisyear",name:"LBL_THIS_YEAR"},{operator:"nextmonth",name:"LBL_NEXT_MONTH"},{operator:"nextyear",name:"LBL_NEXT_YEAR"},{operator:"ndaysago",name:"LBL_N_DAYS_AGO",value1:"integer"},{operator:"inlessthanndays",name:"LBL_IN_LESS_THAN_N_DAYS",value1:"integer"},{operator:"inlastndays",name:"LBL_IN_THE_LAST_N_DAYS",value1:"integer"},{operator:"inmorethanndays",name:"LBL_IN_MORE_THAN_N_DAYS",value1:"integer"},{operator:"inndays",name:"LBL_IN_N_DAYS",value1:"integer"},{operator:"thisday",name:"LBL_THIS_DAY"},{operator:"empty",name:"LBL_OP_ISEMPTY"},{operator:"greater",name:"LBL_OP_AFTER",value1:"date"},{operator:"less",name:"LBL_OP_BEFORE",value1:"date"},{operator:"betweend",name:"LBL_OP_BETWEEN",value1:"date",value2:"date"},{operator:"empty",name:"LBL_OP_ISEMPTY"},{operator:"notempty",name:"LBL_OP_NOTEMPTY"},{operator:"lastndays",name:"LBL_OP_LASTNDAYS",value1:"integer"},{operator:"lastnmonths",name:"LBL_OP_LASTNMONTHS",value1:"integer"},{operator:"untilyesterday",name:"LBL_OP_UNTILYESTERDAY"},{operator:"fromtomorrow",name:"LBL_OP_FROMTOMORROW"}],bool:[{operator:"true",name:"LBL_TRUE"},{operator:"false",name:"LBL_FALSE"}],enum:[{operator:"equals",name:"LBL_OP_EQUALS",value1:"enum"},{operator:"notequals",name:"LBL_OP_NOTEQUAL",value1:"enum"},{operator:"oneof",name:"LBL_ONEOF",value1:"multienum"},{operator:"empty",name:"LBL_OP_ISEMPTY"},{operator:"notempty",name:"LBL_OP_NOTEMPTY"}],relate:[{operator:"equalr",name:"LBL_OP_EQUALS",value1:"relate"},{operator:"emptyr",name:"LBL_OP_ISEMPTY"},{operator:"notemptyr",name:"LBL_OP_NOTEMPTY"}]}),this.backend=e,this.language=t,this.metadata=s}get field(){return this.filterexpression.field}set field(e){e!=this.filterexpression.field&&(this.filterexpression.field=e,this.determineOperatorType(e),this.operator=this.operators[this.operatortype][0].operator,this.filterexpression.filtervalue="")}get operator(){return this.filterexpression.operator}set operator(e){e!=this.filterexpression.operator&&(this.filterexpression.operator=e,this.filterexpression.filtervalue="",this.filterexpression.filtervalueto="")}determineOperatorType(e){let t=this.metadata.getFieldDefs(this.module,e);if(t)switch(t.type){case"date":case"datetime":case"datetimecombo":this.operatortype="date";break;case"bool":case"boolean":this.operatortype="bool";break;case"enum":case"multienum":this.operatortype="enum";break;case"int":case"double":case"currency":this.operatortype="numeric";break;case"relate":this.operatortype="relate";break;default:this.operatortype="default"}else this.operatortype="default"}ngOnInit(){this.determineOperatorType(this.field)}delete(){this.filterexpression.deleted=!0,this.expressionDeleted.emit(!0)}trackByFn(e,t){return t.value}}return e=SystemFilterBuilderFilterExpression,(0,i.Z)(SystemFilterBuilderFilterExpression,"ɵfac",(function(t){return new(t||e)(n.Y36(o.y),n.Y36(l.d),n.Y36(a.Pu))})),(0,i.Z)(SystemFilterBuilderFilterExpression,"ɵcmp",n.Xpm({type:e,selectors:[["system-filter-builder-expression"]],inputs:{module:"module",filterexpression:"filterexpression"},outputs:{expressionDeleted:"expressionDeleted"},decls:19,vars:10,consts:[[1,"slds-grid","slds-gutters_xx-small","slds-grid--vertical-align-start"],[1,"slds-col","slds-size--1-of-4",3,"module","ngModel","ngModelChange"],[1,"slds-col","slds-size--1-of-4"],[1,"slds-form-element"],[1,"slds-form-element__label"],["label","LBL_OPERATOR"],[1,"slds-form-element__control"],[1,"slds-select_container"],[1,"slds-select",3,"disabled","ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[1,"slds-col",3,"operators","operator","filterexpression","module","field"],[1,"slds-col","slds-grow-none"],["aria-hidden","true",1,"slds-form-element__label","slds-hidden"],[1,"slds-button","slds-button_icon","slds-button_icon-border-filled",3,"click"],["icon","delete"],[3,"value"],[3,"label"]],template:function(e,t){1&e&&(n.TgZ(0,"div",0)(1,"system-filter-builder-expression-fields",1),n.NdJ("ngModelChange",(function(e){return t.field=e})),n.qZA(),n.TgZ(2,"div",2)(3,"div",3)(4,"label",4),n._UZ(5,"system-label",5),n.qZA(),n.TgZ(6,"div",6)(7,"div",7)(8,"select",8),n.NdJ("ngModelChange",(function(e){return t.operator=e})),n._UZ(9,"option"),n.YNc(10,g,2,2,"option",9),n.qZA()()()()(),n._UZ(11,"system-filter-builder-expression-values",10),n.TgZ(12,"div",11)(13,"div",3)(14,"span",12),n._uU(15,"delete"),n.qZA(),n.TgZ(16,"div",6)(17,"button",13),n.NdJ("click",(function(){return t.delete()})),n._UZ(18,"system-button-icon",14),n.qZA()()()()()),2&e&&(n.xp6(1),n.Q6J("module",t.module)("ngModel",t.field),n.xp6(7),n.Q6J("disabled",!t.filterexpression.field)("ngModel",t.operator),n.xp6(2),n.Q6J("ngForOf",t.operators[t.operatortype]),n.xp6(1),n.Q6J("operators",t.operators[t.operatortype])("operator",t.filterexpression.operator)("filterexpression",t.filterexpression)("module",t.module)("field",t.field))},dependencies:[d.sg,r.YN,r.Kr,r.EJ,r.JJ,r.On,c.J,u._,h.Y,m.w],encapsulation:2})),SystemFilterBuilderFilterExpression})()},1230:(e,t,s)=>{"use strict";s.d(t,{Y:()=>m});var i=s(1180),n=s(2242),o=s(5030),l=s(4505),a=s(5329),d=s(4154),r=s(4755),c=s(3463),u=s(7674);function h(e,t){if(1&e&&(n.TgZ(0,"option",7),n._UZ(1,"system-label-fieldname",8),n._uU(2),n.qZA()),2&e){const e=t.$implicit,s=n.oxw();n.Q6J("value",e.name),n.xp6(1),n.Q6J("module",s.module)("field",e.name),n.xp6(1),n.hij(" (",e.name,")")}}let m=(()=>{var e;class SystemFilterBuilderFilterExpressionFields{constructor(e,t,s){(0,i.Z)(this,"backend",void 0),(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"onChange",void 0),(0,i.Z)(this,"onTouched",void 0),(0,i.Z)(this,"module",void 0),(0,i.Z)(this,"fields",[]),(0,i.Z)(this,"_field",void 0),this.backend=e,this.language=t,this.metadata=s}get field(){return this._field}set field(e){e!=this._field&&(this._field=e,this.onChange(e))}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}writeValue(e){this._field=e}getFieldDisplayOptions(){let e=[],t=this.language.getFieldDisplayOptions(this.module,this.field);for(let s in t)e.push({value:s,display:t[s]});return e.filter((e=>e.value.length>0))}ngOnInit(){let e=this.metadata.getModuleFields(this.module);for(let t in e)if("link"!=e[t].type){if("relate"==e[t].type){if(!e[t].module)continue;if(e[t].id_name&&e[e[t].id_name]&&"non-db"==e[e[t].id_name].source)continue}"id"!=e[t].type&&("non-db"==e[t].source&&"relate"!=e[t].type||this.fields.push(e[t]))}this.fields.sort(((e,t)=>this.language.getFieldDisplayName(this.module,e.name).toLowerCase()>this.language.getFieldDisplayName(this.module,t.name).toLowerCase()?1:-1))}}return e=SystemFilterBuilderFilterExpressionFields,(0,i.Z)(SystemFilterBuilderFilterExpressionFields,"ɵfac",(function(t){return new(t||e)(n.Y36(l.y),n.Y36(a.d),n.Y36(d.Pu))})),(0,i.Z)(SystemFilterBuilderFilterExpressionFields,"ɵcmp",n.Xpm({type:e,selectors:[["system-filter-builder-expression-fields"]],inputs:{module:"module"},features:[n._Bn([{provide:o.JU,useExisting:(0,n.Gpc)((()=>e)),multi:!0}])],decls:7,vars:2,consts:[[1,"slds-form-element"],[1,"slds-form-element__label"],["label","LBL_FIELD"],[1,"slds-form-element__control"],[1,"slds-select_container"],[1,"slds-select",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[3,"module","field"]],template:function(e,t){1&e&&(n.TgZ(0,"div",0)(1,"label",1),n._UZ(2,"system-label",2),n.qZA(),n.TgZ(3,"div",3)(4,"div",4)(5,"select",5),n.NdJ("ngModelChange",(function(e){return t.field=e})),n.YNc(6,h,3,4,"option",6),n.qZA()()()()),2&e&&(n.xp6(5),n.Q6J("ngModel",t.field),n.xp6(1),n.Q6J("ngForOf",t.fields))},dependencies:[r.sg,o.YN,o.Kr,o.EJ,o.JJ,o.On,c._,u.h],encapsulation:2})),SystemFilterBuilderFilterExpressionFields})()},3617:(e,t,s)=>{"use strict";s.d(t,{s:()=>v});var i=s(1180),n=s(2242),o=s(4505),l=s(5329),a=s(4154),d=s(4755),r=s(5030),c=s(2656),u=s(3463),h=s(7720);function m(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"button",31),n.NdJ("click",(function(){n.CHM(e);const t=n.oxw();return n.KtG(t.delete())})),n._UZ(1,"system-button-icon",32),n.qZA()}}function g(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"fieldset")(1,"system-filter-builder-expression",35),n.NdJ("expressionDeleted",(function(){n.CHM(e);const t=n.oxw(2);return n.KtG(t.filterchanged())})),n.qZA()()}if(2&e){const e=n.oxw().$implicit,t=n.oxw();n.xp6(1),n.Q6J("module",t.module)("filterexpression",e)}}function p(e,t){if(1&e&&(n.TgZ(0,"li",33),n.YNc(1,g,2,2,"fieldset",34),n.qZA()),2&e){const e=t.$implicit;n.xp6(1),n.Q6J("ngIf",!e.deleted)}}function f(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"system-filter-builder-expression-group",37),n.NdJ("expressionChanged",(function(){n.CHM(e);const t=n.oxw(2);return n.KtG(t.filterchanged())})),n.qZA()}if(2&e){const e=n.oxw().$implicit,t=n.oxw();n.Q6J("module",t.module)("filtergroup",e)("candelete",!0)}}function b(e,t){if(1&e&&(n.ynx(0),n.YNc(1,f,1,3,"system-filter-builder-expression-group",36),n.BQk()),2&e){const e=t.$implicit;n.xp6(1),n.Q6J("ngIf",!e.deleted)}}let v=(()=>{var e;class SystemFilterBuilderFilterExpressionGroup{constructor(e,t,s){(0,i.Z)(this,"backend",void 0),(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"module",void 0),(0,i.Z)(this,"filtergroup",void 0),(0,i.Z)(this,"candelete",!1),(0,i.Z)(this,"expressionChanged",new n.vpe),(0,i.Z)(this,"expressions",[]),(0,i.Z)(this,"groups",[]),this.backend=e,this.language=t,this.metadata=s}ngOnChanges(e){this.groups=[],this.expressions=[];for(let e of this.filtergroup.conditions)e.logicaloperator?this.groups.push(e):this.expressions.push(e)}addExpression(){let e={field:"",operator:"",filtervalue:""};this.filtergroup.conditions.push(e),this.expressions.push(e),this.expressionChanged.emit(!0)}addGroup(){let e={logicaloperator:"and",groupscope:"all",conditions:[]};this.filtergroup.conditions.push(e),this.groups.push(e)}delete(){this.filtergroup.deleted=!0,this.expressionChanged.emit(!0)}filterchanged(){this.cleanDeleted(),this.expressionChanged.emit(!0)}cleanDeleted(){let e=[];for(let t of this.filtergroup.conditions)!0!==t.deleted&&e.push(t);this.filtergroup.conditions=e}}return e=SystemFilterBuilderFilterExpressionGroup,(0,i.Z)(SystemFilterBuilderFilterExpressionGroup,"ɵfac",(function(t){return new(t||e)(n.Y36(o.y),n.Y36(l.d),n.Y36(a.Pu))})),(0,i.Z)(SystemFilterBuilderFilterExpressionGroup,"ɵcmp",n.Xpm({type:e,selectors:[["system-filter-builder-expression-group"]],inputs:{module:"module",filtergroup:"filtergroup",candelete:"candelete"},outputs:{expressionChanged:"expressionChanged"},features:[n.TTD],decls:40,vars:5,consts:[[1,"slds-expression__group"],[1,"slds-grid","slds-gutters_direct-xx-small","slds-grid--vertical-align-end","slds-size--1-of-1"],[1,"slds-form-element","slds-col","slds-grow-none"],[1,"slds-form-element__label"],["label","LBL_GROUP_OPERATOR"],[1,"slds-form-element__control"],[1,"slds-select_container"],[1,"slds-select",3,"ngModel","ngModelChange"],["value","and"],["label","LBL_AND"],["value","or"],["label","LBL_OR"],["label","LBL_GROUP_SCOPE"],["value","all"],["label","LBL_ALL"],["value","own"],["label","LBL_OWN"],["value","ownorgunit"],["label","LBL_OWN_ORGUNIT"],["value","not_own"],["label","LBL_NOT_OWN"],["value","creator"],["label","LBL_CREATOR"],["class","slds-button slds-button_icon slds-button_icon-border-filled slds-col--bump-left",3,"click",4,"ngIf"],["class","slds-expression__row_group",4,"ngFor","ngForOf"],[4,"ngFor","ngForOf"],[1,"slds-expression__buttons"],[1,"slds-button","slds-button_neutral",3,"click"],["icon","add"],["label","LBL_ADD_CONDITION"],["label","LBL_ADD_GROUP"],[1,"slds-button","slds-button_icon","slds-button_icon-border-filled","slds-col--bump-left",3,"click"],["icon","delete"],[1,"slds-expression__row_group"],[4,"ngIf"],[3,"module","filterexpression","expressionDeleted"],[3,"module","filtergroup","candelete","expressionChanged",4,"ngIf"],[3,"module","filtergroup","candelete","expressionChanged"]],template:function(e,t){1&e&&(n.TgZ(0,"li",0)(1,"fieldset")(2,"div",1)(3,"div",2)(4,"label",3),n._UZ(5,"system-label",4),n.qZA(),n.TgZ(6,"div",5)(7,"div",6)(8,"select",7),n.NdJ("ngModelChange",(function(e){return t.filtergroup.logicaloperator=e})),n.TgZ(9,"option",8),n._UZ(10,"system-label",9),n.qZA(),n.TgZ(11,"option",10),n._UZ(12,"system-label",11),n.qZA()()()()(),n.TgZ(13,"div",2)(14,"label",3),n._UZ(15,"system-label",12),n.qZA(),n.TgZ(16,"div",5)(17,"div",6)(18,"select",7),n.NdJ("ngModelChange",(function(e){return t.filtergroup.groupscope=e})),n.TgZ(19,"option",13),n._UZ(20,"system-label",14),n.qZA(),n.TgZ(21,"option",15),n._UZ(22,"system-label",16),n.qZA(),n.TgZ(23,"option",17),n._UZ(24,"system-label",18),n.qZA(),n.TgZ(25,"option",19),n._UZ(26,"system-label",20),n.qZA(),n.TgZ(27,"option",21),n._UZ(28,"system-label",22),n.qZA()()()()(),n.YNc(29,m,2,0,"button",23),n.qZA(),n.TgZ(30,"ul"),n.YNc(31,p,2,1,"li",24),n.YNc(32,b,2,1,"ng-container",25),n.qZA(),n.TgZ(33,"div",26)(34,"button",27),n.NdJ("click",(function(){return t.addExpression()})),n._UZ(35,"system-button-icon",28)(36,"system-label",29),n.qZA(),n.TgZ(37,"button",27),n.NdJ("click",(function(){return t.addGroup()})),n._UZ(38,"system-button-icon",28)(39,"system-label",30),n.qZA()()()()),2&e&&(n.xp6(8),n.Q6J("ngModel",t.filtergroup.logicaloperator),n.xp6(10),n.Q6J("ngModel",t.filtergroup.groupscope),n.xp6(11),n.Q6J("ngIf",t.candelete),n.xp6(2),n.Q6J("ngForOf",t.expressions),n.xp6(1),n.Q6J("ngForOf",t.groups))},dependencies:[d.sg,d.O5,r.YN,r.Kr,r.EJ,r.JJ,r.On,c.J,u._,e,h.H],encapsulation:2})),SystemFilterBuilderFilterExpressionGroup})()},7706:(e,t,s)=>{"use strict";s.d(t,{U:()=>_});var i=s(1180),n=s(2242),o=s(5030),l=s(4154),a=s(4755),d=s(3772),r=s(638),c=s(5147),u=s(1555),h=s(6822),m=s(4846);function g(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"system-input-integer",5),n.NdJ("ngModelChange",(function(t){n.CHM(e);const s=n.oxw();return n.KtG(s.value=t)})),n.qZA()}if(2&e){const e=n.oxw();n.Q6J("ngModel",e.value)}}function p(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"system-input-date",5),n.NdJ("ngModelChange",(function(t){n.CHM(e);const s=n.oxw();return n.KtG(s.value=t)})),n.qZA()}if(2&e){const e=n.oxw();n.Q6J("ngModel",e.value)}}function f(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"system-input-enum",6),n.NdJ("ngModelChange",(function(t){n.CHM(e);const s=n.oxw();return n.KtG(s.value=t)})),n.qZA()}if(2&e){const e=n.oxw();n.Q6J("module",e.module)("field",e.field)("ngModel",e.value)}}function b(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"system-input-multienum",6),n.NdJ("ngModelChange",(function(t){n.CHM(e);const s=n.oxw();return n.KtG(s.value=t)})),n.qZA()}if(2&e){const e=n.oxw();n.Q6J("module",e.module)("field",e.field)("ngModel",e.value)}}function v(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"system-input-relate",7),n.NdJ("ngModelChange",(function(t){n.CHM(e);const s=n.oxw();return n.KtG(s.value=t)})),n.qZA()}if(2&e){const e=n.oxw();n.Q6J("module",e.relatedmodule)("ngModel",e.value)}}function Z(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"system-input-text",5),n.NdJ("ngModelChange",(function(t){n.CHM(e);const s=n.oxw();return n.KtG(s.value=t)})),n.qZA()}if(2&e){const e=n.oxw();n.Q6J("ngModel",e.value)}}let _=(()=>{var e;class SystemFilterBuilderFilterExpressionValue{constructor(e){(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"module",void 0),(0,i.Z)(this,"field",void 0),(0,i.Z)(this,"onChange",void 0),(0,i.Z)(this,"onTouched",void 0),(0,i.Z)(this,"valueType",void 0),(0,i.Z)(this,"_value",void 0),this.metadata=e}get value(){return this._value}set value(e){switch(this._value=e,this.valueType){case"date":this.onChange(e.format("YYYY-MM-DD"));break;case"multienum":this.onChange(e.join(","));break;default:this.onChange(e)}}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}writeValue(e){switch(this._value=e,this.valueType){case"date":this._value=new moment(e);break;case"multienum":this._value=e?e.split(","):[];break;default:this._value=e}}get relatedmodule(){return this.metadata.getFieldDefs(this.module,this.field).module}}return e=SystemFilterBuilderFilterExpressionValue,(0,i.Z)(SystemFilterBuilderFilterExpressionValue,"ɵfac",(function(t){return new(t||e)(n.Y36(l.Pu))})),(0,i.Z)(SystemFilterBuilderFilterExpressionValue,"ɵcmp",n.Xpm({type:e,selectors:[["system-filter-builder-expression-value"]],inputs:{module:"module",field:"field",valueType:"valueType"},features:[n._Bn([{provide:o.JU,useExisting:(0,n.Gpc)((()=>e)),multi:!0}])],decls:7,vars:6,consts:[[3,"ngSwitch"],[3,"ngModel","ngModelChange",4,"ngSwitchCase"],[3,"module","field","ngModel","ngModelChange",4,"ngSwitchCase"],[3,"module","ngModel","ngModelChange",4,"ngSwitchCase"],[3,"ngModel","ngModelChange",4,"ngSwitchDefault"],[3,"ngModel","ngModelChange"],[3,"module","field","ngModel","ngModelChange"],[3,"module","ngModel","ngModelChange"]],template:function(e,t){1&e&&(n.ynx(0,0),n.YNc(1,g,1,1,"system-input-integer",1),n.YNc(2,p,1,1,"system-input-date",1),n.YNc(3,f,1,3,"system-input-enum",2),n.YNc(4,b,1,3,"system-input-multienum",2),n.YNc(5,v,1,2,"system-input-relate",3),n.YNc(6,Z,1,1,"system-input-text",4),n.BQk()),2&e&&(n.Q6J("ngSwitch",t.valueType),n.xp6(1),n.Q6J("ngSwitchCase","integer"),n.xp6(1),n.Q6J("ngSwitchCase","date"),n.xp6(1),n.Q6J("ngSwitchCase","enum"),n.xp6(1),n.Q6J("ngSwitchCase","multienum"),n.xp6(1),n.Q6J("ngSwitchCase","relate"))},dependencies:[a.RF,a.n9,a.ED,o.JJ,o.On,d.Z,r.n,c.r,u.u,h.z,m.z],encapsulation:2})),SystemFilterBuilderFilterExpressionValue})()},7617:(e,t,s)=>{"use strict";s.d(t,{w:()=>p});var i=s(1180),n=s(2242),o=s(4505),l=s(5329),a=s(4154),d=s(4755),r=s(5030),c=s(3463),u=s(7706);function h(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"div",3)(1,"label",4),n._UZ(2,"system-label",5),n.qZA(),n.TgZ(3,"system-filter-builder-expression-value",6),n.NdJ("ngModelChange",(function(t){n.CHM(e);const s=n.oxw(2);return n.KtG(s.filterexpression.filtervalue=t)})),n.qZA()()}if(2&e){const e=n.oxw(2);n.xp6(3),n.Q6J("ngModel",e.filterexpression.filtervalue)("valueType",e.value1)("module",e.module)("field",e.field)}}function m(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"div",3)(1,"label",4),n._UZ(2,"system-label",5),n.qZA(),n.TgZ(3,"system-filter-builder-expression-value",6),n.NdJ("ngModelChange",(function(t){n.CHM(e);const s=n.oxw(2);return n.KtG(s.filterexpression.filtervalueto=t)})),n.qZA()()}if(2&e){const e=n.oxw(2);n.xp6(3),n.Q6J("ngModel",e.filterexpression.filtervalueto)("valueType",e.value2)("module",e.module)("field",e.field)}}function g(e,t){if(1&e&&(n.TgZ(0,"div",1),n.YNc(1,h,4,4,"div",2),n.YNc(2,m,4,4,"div",2),n.qZA()),2&e){const e=n.oxw();n.xp6(1),n.Q6J("ngIf",e.value1),n.xp6(1),n.Q6J("ngIf",e.value2)}}let p=(()=>{var e;class SystemFilterBuilderFilterExpressionValues{constructor(e,t,s){(0,i.Z)(this,"backend",void 0),(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"module",void 0),(0,i.Z)(this,"field",void 0),(0,i.Z)(this,"operator",void 0),(0,i.Z)(this,"operators",void 0),(0,i.Z)(this,"filterexpression",{}),this.backend=e,this.language=t,this.metadata=s}ngOnChanges(e){}get value1(){return this.operators.find((e=>e.operator==this.operator)).value1}get value2(){return this.operators.find((e=>e.operator==this.operator)).value2}showValues(){return this.operator.value1||this.operator.value2}}return e=SystemFilterBuilderFilterExpressionValues,(0,i.Z)(SystemFilterBuilderFilterExpressionValues,"ɵfac",(function(t){return new(t||e)(n.Y36(o.y),n.Y36(l.d),n.Y36(a.Pu))})),(0,i.Z)(SystemFilterBuilderFilterExpressionValues,"ɵcmp",n.Xpm({type:e,selectors:[["system-filter-builder-expression-values"]],inputs:{module:"module",field:"field",operator:"operator",operators:"operators",filterexpression:"filterexpression"},features:[n.TTD],decls:1,vars:1,consts:[["class","slds-col",4,"ngIf"],[1,"slds-col"],["class","slds-form-element",4,"ngIf"],[1,"slds-form-element"],[1,"slds-form-element__label"],["label","LBL_VALUE"],[3,"ngModel","valueType","module","field","ngModelChange"]],template:function(e,t){1&e&&n.YNc(0,g,3,2,"div",0),2&e&&n.Q6J("ngIf",""!=t.operator&&t.value1)},dependencies:[d.O5,r.JJ,r.On,c._,u.U],encapsulation:2})),SystemFilterBuilderFilterExpressionValues})()},5659:(e,t,s)=>{"use strict";s.d(t,{t:()=>g});var i=s(1180),n=s(2242),o=s(5329),l=s(4505),a=s(6625),d=s(4755),r=s(5030),c=s(34);function u(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"li",11),n.NdJ("click",(function(){const t=n.CHM(e).$implicit,s=n.oxw(2);return n.KtG(s.getAddressDetail(t.place_id))})),n.TgZ(1,"div",12)(2,"a",13),n._uU(3),n.qZA()()()}if(2&e){const e=t.$implicit;n.xp6(3),n.Oqu(e.description)}}const h=function(e){return{"slds-is-open":e}};function m(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"div",1)(1,"div",2)(2,"div",3)(3,"div",4)(4,"div",5)(5,"input",6),n.NdJ("ngModelChange",(function(t){n.CHM(e);const s=n.oxw();return n.KtG(s.searchterm=t)}))("focus",(function(){n.CHM(e);const t=n.oxw();return n.KtG(t.onSearchFocus())})),n.qZA(),n._UZ(6,"system-custom-icon",7),n.qZA(),n.TgZ(7,"div",8)(8,"ul",9),n.YNc(9,u,4,1,"li",10),n.qZA()()()()()()}if(2&e){const e=n.oxw();n.xp6(3),n.Q6J("ngClass",n.VKq(6,h,e.displayAutocompleteResults)),n.xp6(2),n.Q6J("placeholder",e.language.getLabel("LBL_SEARCH_ADDRESS"))("ngModel",e.searchterm)("disabled",e.disabled),n.xp6(1),n.Q6J("desaturate",!e.isSearching),n.xp6(3),n.Q6J("ngForOf",e.autocompleteResults)}}let g=(()=>{var e;class SystemGooglePlacesAutocomplete{constructor(e,t,s,o,l,a){(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"backend",void 0),(0,i.Z)(this,"configuration",void 0),(0,i.Z)(this,"elementref",void 0),(0,i.Z)(this,"cdRef",void 0),(0,i.Z)(this,"renderer",void 0),(0,i.Z)(this,"address",new n.vpe),(0,i.Z)(this,"disabled",!1),(0,i.Z)(this,"isenabled",!1),(0,i.Z)(this,"autocompletesearchterm",""),(0,i.Z)(this,"autocompleteTimeout",void 0),(0,i.Z)(this,"autocompleteResults",[]),(0,i.Z)(this,"autocompleteClickListener",void 0),(0,i.Z)(this,"displayAutocompleteResults",!1),(0,i.Z)(this,"isSearching",!1),this.language=e,this.backend=t,this.configuration=s,this.elementref=o,this.cdRef=l,this.renderer=a;let d=this.configuration.getCapabilityConfig("google_api");d.key&&""!=d.key&&(this.isenabled=!0)}get searchterm(){return this.autocompletesearchterm}set searchterm(e){this.autocompletesearchterm=e,this.autocompleteTimeout&&window.clearTimeout(this.autocompleteTimeout),this.autocompleteTimeout=window.setTimeout((()=>this.doAutocomplete()),500)}ngOnDestroy(){this.autocompleteClickListener&&this.autocompleteClickListener()}onSearchFocus(){this.autocompletesearchterm.length>1&&this.autocompleteResults.length>0&&this.openSearchResults()}openSearchResults(){this.displayAutocompleteResults=!0,this.autocompleteClickListener=this.renderer.listen("document","click",(e=>this.onClick(e))),this.cdRef.detectChanges()}onClick(e){this.elementref.nativeElement.contains(e.target)||this.closeSearchResutls()}closeSearchResutls(){this.autocompleteClickListener&&this.autocompleteClickListener(),this.displayAutocompleteResults=!1,this.cdRef.detectChanges()}doAutocomplete(){if(this.autocompletesearchterm.length>5){this.isSearching=!0;const e=encodeURIComponent(this.autocompletesearchterm);this.backend.getRequest("channels/groupware/gsuite/places/autocomplete/"+e).subscribe((e=>{e.predictions&&e.predictions.length>0?(this.autocompleteResults=e.predictions,this.openSearchResults(),this.isSearching=!1):(this.autocompleteResults=[],this.closeSearchResutls(),this.isSearching=!1)}),(e=>{this.isSearching=!1}))}else this.closeSearchResutls()}getAddressDetail(e){this.displayAutocompleteResults=!1,this.autocompletesearchterm="",this.backend.getRequest("channels/groupware/gsuite/places/"+e).subscribe((e=>{let t={street:e.address.street,street_name:e.address.street_name,street_number:e.address.street_number,city:e.address.city,district:e.address.district,postalcode:e.address.postalcode,state:e.address.state,country:e.address.country,latitude:parseFloat(e.address.location.lat),longitude:parseFloat(e.address.location.lng)};this.address.emit(t),this.autocompletesearchterm=e.formatted_address,this.cdRef.detectChanges()}))}}return e=SystemGooglePlacesAutocomplete,(0,i.Z)(SystemGooglePlacesAutocomplete,"ɵfac",(function(t){return new(t||e)(n.Y36(o.d),n.Y36(l.y),n.Y36(a.C),n.Y36(n.SBq),n.Y36(n.sBO),n.Y36(n.Qsj))})),(0,i.Z)(SystemGooglePlacesAutocomplete,"ɵcmp",n.Xpm({type:e,selectors:[["system-googleplaces-autocomplete"]],inputs:{disabled:"disabled"},outputs:{address:"address"},decls:1,vars:1,consts:[["class","slds-form-element",4,"ngIf"],[1,"slds-form-element"],[1,"slds-form-element__control"],[1,"slds-combobox_container"],["role","combobox",1,"slds-combobox","slds-dropdown-trigger","slds-dropdown-trigger_click",3,"ngClass"],["role","none",1,"slds-combobox__form-element","slds-input-has-icon","slds-input-has-icon_right"],["type","text","autocomplete","new-password",1,"slds-input","slds-combobox__input",3,"placeholder","ngModel","disabled","ngModelChange","focus"],["icon","google","addclasses","slds-input__icon slds-input__icon--left",3,"desaturate"],["role","listbox",1,"slds-dropdown","slds-dropdown_length-with-icon-7","slds-dropdown_fluid"],["role","presentation",1,"slds-listbox","slds-listbox_vertical"],["class","slds-listbox__item","role","presentation",3,"click",4,"ngFor","ngForOf"],["role","presentation",1,"slds-listbox__item",3,"click"],[1,"slds-lookup__result-text","slds-p-around--x-small"],["href","javascript:void(0)"]],template:function(e,t){1&e&&n.YNc(0,m,10,8,"div",0),2&e&&n.Q6J("ngIf",t.isenabled)},dependencies:[d.mk,d.sg,d.O5,r.Fj,r.JJ,r.On,c.$],encapsulation:2})),SystemGooglePlacesAutocomplete})()},3845:(e,t,s)=>{"use strict";s.d(t,{l:()=>p});var i=s(1180),n=s(2242),o=s(5030),l=s(5329),a=s(4505),d=s(6625),r=s(4755),c=s(34);const u=["inputfield"];function h(e,t){if(1&e&&n._UZ(0,"system-custom-icon",11),2&e){const e=n.oxw();n.Q6J("desaturate",!e.isSearching)}}function m(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"li",12),n.NdJ("click",(function(){const t=n.CHM(e).$implicit,s=n.oxw();return n.KtG(s.getDetails(t))})),n.TgZ(1,"div",13)(2,"a",14),n._uU(3),n.qZA()()()}if(2&e){const e=t.$implicit;n.xp6(3),n.AsE("",e.name,", ",e.formatted_address,"")}}const g=function(e){return{"slds-is-open":e}};let p=(()=>{var e;class SystemGooglePlacesSearch{constructor(e,t,s,o,l){(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"backend",void 0),(0,i.Z)(this,"configuration",void 0),(0,i.Z)(this,"elementref",void 0),(0,i.Z)(this,"renderer",void 0),(0,i.Z)(this,"inputfield",void 0),(0,i.Z)(this,"details",new n.vpe),(0,i.Z)(this,"onChange",void 0),(0,i.Z)(this,"onTouched",void 0),(0,i.Z)(this,"isenabled",!1),(0,i.Z)(this,"autocompletesearchterm",""),(0,i.Z)(this,"autocompleteTimeout",void 0),(0,i.Z)(this,"autocompleteResults",[]),(0,i.Z)(this,"autocompleteClickListener",void 0),(0,i.Z)(this,"displayAutocompleteResults",!1),(0,i.Z)(this,"isSearching",!1),(0,i.Z)(this,"locationbias","ipbias "),this.language=e,this.backend=t,this.configuration=s,this.elementref=o,this.renderer=l;let a=this.configuration.getCapabilityConfig("google_api");a.key&&""!=a.key&&(this.isenabled=!0),navigator.geolocation.getCurrentPosition((e=>{this.locationbias=`point:${e.coords.latitude},${e.coords.longitude}`})),this.elementref.nativeElement.focus=()=>{this.focus()}}focus(){setTimeout((()=>{this.inputfield.element.nativeElement.tabIndex||this.renderer.setAttribute(this.inputfield.element.nativeElement,"tabIndex","-1"),this.inputfield.element.nativeElement.focus()}))}get searchterm(){return this.autocompletesearchterm}set searchterm(e){this.autocompletesearchterm=e,this.isenabled&&(this.autocompleteTimeout&&window.clearTimeout(this.autocompleteTimeout),this.autocompleteTimeout=window.setTimeout((()=>this.doAutocomplete()),500))}get placeholder(){return this.isenabled?this.language.getLabel("LBL_SEARCH"):""}updateModel(){this.onChange(this.autocompletesearchterm)}onSearchFocus(){this.autocompletesearchterm.length>1&&this.autocompleteResults.length>0&&this.openSearchResults()}openSearchResults(){this.displayAutocompleteResults=!0,this.autocompleteClickListener=this.renderer.listen("document","click",(e=>this.onClick(e)))}onClick(e){this.elementref.nativeElement.contains(e.target)||this.closeSearchResutls()}closeSearchResutls(){this.autocompleteClickListener&&this.autocompleteClickListener(),this.displayAutocompleteResults=!1,this.autocompleteResults=[]}doAutocomplete(){if(this.autocompletesearchterm.length>3){this.isSearching=!0;const e=encodeURIComponent(this.autocompletesearchterm),t=encodeURIComponent(this.locationbias);this.backend.getRequest(`channels/groupware/gsuite/places/search/${e}/${t}`).subscribe((e=>{e.candidates&&e.candidates.length>0?(this.autocompleteResults=e.candidates,this.openSearchResults(),this.isSearching=!1):(this.autocompleteResults=[],this.closeSearchResutls(),this.isSearching=!1)}),(e=>{this.isSearching=!1}))}}getDetails(e){this.displayAutocompleteResults=!1,this.autocompleteResults=[],this.autocompletesearchterm=e.name;e.formatted_address;this.onChange(e.name),this.isSearching=!0,this.backend.getRequest("channels/groupware/gsuite/places/"+e.place_id).subscribe((e=>{this.details.emit({address:{street:e.address.street,street_name:e.address.street_name,street_number:e.address.street_number,city:e.address.city,district:e.address.district,postalcode:e.address.postalcode,state:e.address.state,country:e.address.country,latitude:parseFloat(e.address.location.lat),longitude:parseFloat(e.address.location.lng)},formatted_phone_number:e.formatted_phone_number,formatted_address:e.formatted_address,international_phone_number:e.international_phone_number,website:e.website,name:e.name}),this.isSearching=!1}),(e=>{this.isSearching=!1}))}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}writeValue(e){this.autocompletesearchterm=e||""}}return e=SystemGooglePlacesSearch,(0,i.Z)(SystemGooglePlacesSearch,"ɵfac",(function(t){return new(t||e)(n.Y36(l.d),n.Y36(a.y),n.Y36(d.C),n.Y36(n.SBq),n.Y36(n.Qsj))})),(0,i.Z)(SystemGooglePlacesSearch,"ɵcmp",n.Xpm({type:e,selectors:[["system-googleplaces-search"]],viewQuery:function(e,t){if(1&e&&n.Gf(u,7,n.s_b),2&e){let e;n.iGM(e=n.CRH())&&(t.inputfield=e.first)}},hostAttrs:["focus","focus()"],outputs:{details:"details"},features:[n._Bn([{provide:o.JU,useExisting:(0,n.Gpc)((()=>e)),multi:!0}])],decls:11,vars:7,consts:[[1,"slds-form-element"],[1,"slds-form-element__control"],[1,"slds-combobox_container"],["role","combobox",1,"slds-combobox","slds-dropdown-trigger","slds-dropdown-trigger_click",3,"ngClass"],["role","none",1,"slds-combobox__form-element","slds-input-has-icon","slds-input-has-icon_right"],["type","text",1,"slds-input","slds-combobox__input",3,"placeholder","ngModel","ngModelChange","focus","blur"],["inputfield",""],["icon","google","addclasses","slds-input__icon slds-input__icon--left",3,"desaturate",4,"ngIf"],["role","listbox",1,"slds-dropdown","slds-dropdown_length-with-icon-7","slds-dropdown_fluid"],["role","presentation",1,"slds-listbox","slds-listbox_vertical"],["class","slds-listbox__item","role","presentation",3,"click",4,"ngFor","ngForOf"],["icon","google","addclasses","slds-input__icon slds-input__icon--left",3,"desaturate"],["role","presentation",1,"slds-listbox__item",3,"click"],[1,"slds-lookup__result-text","slds-p-around--x-small"],["href","javascript:void(0)"]],template:function(e,t){1&e&&(n.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"input",5,6),n.NdJ("ngModelChange",(function(e){return t.searchterm=e}))("focus",(function(){return t.onSearchFocus()}))("blur",(function(){return t.updateModel()})),n.qZA(),n.YNc(7,h,1,1,"system-custom-icon",7),n.qZA(),n.TgZ(8,"div",8)(9,"ul",9),n.YNc(10,m,4,2,"li",10),n.qZA()()()()()()),2&e&&(n.xp6(3),n.Q6J("ngClass",n.VKq(5,g,t.displayAutocompleteResults)),n.xp6(2),n.Q6J("placeholder",t.placeholder)("ngModel",t.searchterm),n.xp6(2),n.Q6J("ngIf",t.isenabled),n.xp6(3),n.Q6J("ngForOf",t.autocompleteResults))},dependencies:[r.mk,r.sg,r.O5,o.Fj,o.JJ,o.On,c.$],encapsulation:2})),SystemGooglePlacesSearch})()},3091:(e,t,s)=>{"use strict";s.d(t,{e:()=>A});var i=s(1180),n=s(2242),o=s(5030),l=s(4755),a=s(4817),d=s(5698),r=s(4044),c=s(4154),u=s(5329),h=s(6625),m=s(5710),g=s(3441),p=s(2656);const f=["htmleditor"];function b(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"button",29),n.NdJ("click",(function(){n.CHM(e);const t=n.oxw();return n.KtG(t.save$.emit(t._html))})),n._UZ(1,"system-button-icon",30),n.qZA()}if(2&e){const e=n.oxw();n.Q6J("title",e.language.getLabel("LBL_SAVE"))}}function v(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"ul",5)(1,"li")(2,"button",19),n.NdJ("click",(function(){n.CHM(e);const t=n.oxw();return n.KtG(t.executeCommand("undo"))})),n._UZ(3,"system-button-icon",31),n.TgZ(4,"span",32),n._uU(5,"undo"),n.qZA()()(),n.TgZ(6,"li")(7,"button",19),n.NdJ("click",(function(){n.CHM(e);const t=n.oxw();return n.KtG(t.executeCommand("redo"))})),n._UZ(8,"system-button-icon",33),n.TgZ(9,"span",32),n._uU(10,"redo"),n.qZA()()()()}if(2&e){const e=n.oxw();n.xp6(2),n.Q6J("title",e.language.getLabel("LBL_UNDO")),n.xp6(5),n.Q6J("title",e.language.getLabel("LBL_REDO"))}}function Z(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"div",34)(1,"div",35)(2,"div",36)(3,"div",37)(4,"div",38)(5,"select",39),n.NdJ("ngModelChange",(function(t){n.CHM(e);const s=n.oxw();return n.KtG(s.block=t)}))("change",(function(){n.CHM(e);const t=n.oxw();return n.KtG(t.executeCommand(t.block))})),n.TgZ(6,"option",40)(7,"h1"),n._uU(8,"Heading 1"),n.qZA()(),n.TgZ(9,"option",41)(10,"h2"),n._uU(11,"Heading 2"),n.qZA()(),n.TgZ(12,"option",42)(13,"h3"),n._uU(14,"Heading 3"),n.qZA()(),n.TgZ(15,"option",43),n._uU(16,"Heading 4"),n.qZA(),n.TgZ(17,"option",44),n._uU(18,"Heading 5"),n.qZA(),n.TgZ(19,"option",45),n._uU(20,"Heading 6"),n.qZA(),n.TgZ(21,"option",46),n._uU(22,"Paragraph"),n.qZA(),n.TgZ(23,"option",47),n._uU(24,"Predefined"),n.qZA(),n.TgZ(25,"option",48),n._uU(26,"Standard"),n.qZA(),n.TgZ(27,"option",49),n._uU(28,"Default"),n.qZA()()()()()()()}if(2&e){const e=n.oxw();n.xp6(5),n.Q6J("ngModel",e.block)}}function _(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"li")(1,"button",19),n.NdJ("click",(function(){n.CHM(e);const t=n.oxw(2);return n.KtG(t.executeCommand("openMediaFilePicker"))})),n._UZ(2,"system-button-icon",53),n.qZA()()}if(2&e){const e=n.oxw(2);n.xp6(1),n.Q6J("title",e.language.getLabel("LBL_NEW_IMAGE"))}}function y(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"ul",5)(1,"li")(2,"button",19),n.NdJ("click",(function(){n.CHM(e);const t=n.oxw();return n.KtG(t.executeCommand("insertImage"))})),n._UZ(3,"system-button-icon",50),n.qZA()(),n.YNc(4,_,3,1,"li",22),n.TgZ(5,"li")(6,"button",19),n.NdJ("click",(function(){n.CHM(e);const t=n.oxw();return n.KtG(t.addVideo())})),n._UZ(7,"system-button-icon",51),n.qZA()(),n.TgZ(8,"li")(9,"button",19),n.NdJ("click",(function(){n.CHM(e);const t=n.oxw();return n.KtG(t.addCodeSnippet())})),n._UZ(10,"system-button-icon",52),n.qZA()()()}if(2&e){const e=n.oxw();n.xp6(2),n.Q6J("title",e.language.getLabel("LBL_NEW_IMAGE")),n.xp6(2),n.Q6J("ngIf",e.useMedialFile),n.xp6(2),n.Q6J("title",e.language.getLabel("LBL_ADD_VIDEO")),n.xp6(3),n.Q6J("title",e.language.getLabel("LBL_ADD_CODE_SNIPPET"))}}function x(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"li")(1,"button",19),n.NdJ("click",(function(){n.CHM(e);const t=n.oxw();return n.KtG(t.executeCommand("openTemplateVariableHelper"))})),n._UZ(2,"system-button-icon",54),n.qZA()()}if(2&e){const e=n.oxw();n.xp6(1),n.Q6J("title",e.language.getLabel("LBL_TEMPLATE_VARIABLE_HELPER"))}}function w(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"ul",5)(1,"li")(2,"button",19),n.NdJ("click",(function(){n.CHM(e);const t=n.oxw();return n.KtG(t.executeCommand("openSourceEditor"))})),n._UZ(3,"system-button-icon",55),n.qZA()(),n.TgZ(4,"li")(5,"button",19),n.NdJ("click",(function(){n.CHM(e);const t=n.oxw();return n.KtG(t.executeCommand("toggleFullscreen"))})),n._UZ(6,"system-button-icon",56),n.qZA()()()}if(2&e){const e=n.oxw();n.xp6(2),n.Q6J("title",e.language.getLabel("LBL_SOURCE_EDITOR")),n.xp6(3),n.Q6J("title",e.language.getLabel("LBL_EXPAND")),n.xp6(1),n.Q6J("icon",e.expandIcon)}}const T=function(e){return{"slds-active":e}},C=["*"];let A=(()=>{var e;class SystemHtmlEditor{constructor(e,t,s,o,l,a,d,r,c,u,h){(0,i.Z)(this,"modal",void 0),(0,i.Z)(this,"renderer",void 0),(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"editorService",void 0),(0,i.Z)(this,"_document",void 0),(0,i.Z)(this,"elementRef",void 0),(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"viewContainerRef",void 0),(0,i.Z)(this,"configurationService",void 0),(0,i.Z)(this,"model",void 0),(0,i.Z)(this,"helper",void 0),(0,i.Z)(this,"htmlEditor",void 0),(0,i.Z)(this,"extendedmode",!0),(0,i.Z)(this,"innerheight",void 0),(0,i.Z)(this,"useMedialFile",!1),(0,i.Z)(this,"onChange",void 0),(0,i.Z)(this,"onTouched",void 0),(0,i.Z)(this,"_html",""),(0,i.Z)(this,"isActive",!1),(0,i.Z)(this,"clickListener",void 0),(0,i.Z)(this,"keydownListener",void 0),(0,i.Z)(this,"modalOpen",!1),(0,i.Z)(this,"isExpanded",!1),(0,i.Z)(this,"block","default"),(0,i.Z)(this,"fontName","Tilium Web"),(0,i.Z)(this,"fontSize","5"),(0,i.Z)(this,"tagMap",{BLOCKQUOTE:"indent",A:"link"}),(0,i.Z)(this,"save$",new n.vpe),(0,i.Z)(this,"select",["H1","H2","H3","H4","H5","H6","P","PRE","DIV"]),this.modal=e,this.renderer=t,this.metadata=s,this.editorService=o,this._document=l,this.elementRef=a,this.language=d,this.viewContainerRef=r,this.configurationService=c,this.model=u,this.helper=h}get useTemplateVariableHelper(){return"LandingPages"===this.model?.module||"OutputTemplates"===this.model?.module||"EmailTemplates"===this.model?.module||"CampaignTasks"===this.model?.module}get expandIcon(){return this.isExpanded?"contract_alt":"expand_alt"}get innerHeight(){return this.innerheight?this.innerheight:"250"}get richTextStyle(){return this.isExpanded?{height:"100vh",resize:"none",position:"fixed"}:{height:+this.innerHeight+50+"px"}}ngOnInit(){this.handleKeyboardShortcuts(),this.editorService.editorContainer=this.htmlEditor.element.nativeElement}ngOnDestroy(){this.clickListener&&this.clickListener(),this.keydownListener&&this.keydownListener()}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}writeValue(e){this._html=e||"",this.renderer.setProperty(this.htmlEditor.element.nativeElement,"innerHTML",this._html)}executeCommand(e){switch(e){case"openSourceEditor":this.openSourceEditor();break;case"toggleFullscreen":this.isExpanded=!this.isExpanded;break;case"openMediaFilePicker":this.openMediaFilePicker();break;case"insertImage":this.insertImage();break;case"openTemplateVariableHelper":this.openTemplateVariableHelper();break;default:this.isActive&&""!=e&&this.editorService.executeCommand(e),this.exec()}}onEditorClick(e){this.isActive||(this.isActive=!0,this.focusEditor(),this.clickListener=this.renderer.listen("document","click",(e=>this.onDocumentClick(e)))),e.stopPropagation()}onDocumentClick(e){this.modalOpen||this.elementRef.nativeElement.contains(e.target)||(this.isActive=!1,this.clickListener())}onContentChange(e){"function"==typeof this.onChange&&this.onChange(e),this._html=e}exec(){let e;window.getSelection&&(e=window.getSelection());let t=e.focusNode;const s=[];for(;t&&"editor"!==t.id;)s.unshift(t),t=t.parentNode;this.triggerBlocks(s)}insertImage(){this.editorService.saveSelection(),this.modal.input(this.language.getLabel("LBL_IMAGE_LINK",this.language.getLabel("LBL_IMAGE"))).pipe((0,d.q)(1)).subscribe((e=>{e&&(this.focusEditor(),this.editorService.restoreSelection(),this.editorService.insertImage(e,this.htmlEditor.element.nativeElement),this.onContentChange(this.htmlEditor.element.nativeElement.innerHTML))}))}openMediaFilePicker(){this.editorService.saveSelection(),this.modalOpen=!0,this.modal.openModal("MediaFilePicker").pipe((0,d.q)(1)).subscribe((e=>{e.instance.answer.subscribe((e=>{if(e)if(e.upload)this.modal.openModal("MediaFileUploader").subscribe((e=>{e.instance.answer.subscribe((e=>{if(e){const t=this.configurationService.getCapabilityConfig("mediafiles");this.focusEditor(),this.editorService.restoreSelection(),this.editorService.insertImage(t.public_url+e,this.htmlEditor.element.nativeElement),this.onContentChange(this.htmlEditor.element.nativeElement.innerHTML)}this.modalOpen=!1}))}));else{if(e.id){const t=this.configurationService.getCapabilityConfig("mediafiles");this.focusEditor(),this.editorService.restoreSelection(),this.editorService.insertImage(t.public_url+e.id,this.htmlEditor.element.nativeElement),this.onContentChange(this.htmlEditor.element.nativeElement.innerHTML)}this.modalOpen=!1}}))}))}openSourceEditor(){this.modal.openModal("SystemRichTextSourceModal",!0,this.viewContainerRef.injector).pipe((0,d.q)(1)).subscribe((e=>{e.instance._html=this._html,e.instance.html.subscribe((e=>{this._html=e,"function"==typeof this.onChange&&this.onChange(e),this.renderer.setProperty(this.htmlEditor.element.nativeElement,"innerHTML",this._html)}))}))}commandIsActive(e){return this.isActive&&this._document.queryCommandState(e)}triggerBlocks(e){if(!this.isActive)return;let t=!1;this.select.forEach((s=>{const i=e.find((e=>e.nodeName===s));void 0===i||s!==i.nodeName&&"code"!=i.nodeName?!1===t&&(this.block="default"):!1===t&&(this.block=i.nodeName.toLowerCase(),t=!0)})),t=!1}insertAnchor(){this.editorService.selectedText=this.getSelectedText(),this.editorService.saveSelection();let e=null;e="A"===this.editorService.savedSelectionParentElement.nodeName?this.editorService.savedSelectionParentElement:this.editorService.savedSelectionParentElement.closest("a"),this.modal.openModal("SystemRichTextLink",!0).subscribe((t=>{t.instance.text=e?.text??this.editorService.selectedText,t.instance.parent=this.model,t.instance.editorService=this.editorService,e&&(t.instance.alterMode=!0,t.instance.url=e.href,t.instance.trackingId=e.dataset.trackinglink,t.instance.trackByMethod=e.dataset.trackinglink?"id":"trackinglink"in e.dataset?"url":void 0,t.instance.marketingAction=e.dataset.marketingaction),t.instance.response.subscribe({next:t=>{if(t){if(e)e.href=t.url,"conv"===t.linkType&&t.trackByMethod?e.dataset.trackinglink=t.trackingId:delete e.dataset.trackinglink,t.marketingAction?e.dataset.marketingaction=t.marketingAction:delete e.dataset.marketingaction;else{t.text||(t.text=t.url),this.editorService.restoreSelection();let e=t.text;this.editorService.selectedText===t.text&&(e=this.editorService.selectedHtml);let s={};"conv"===t.linkType&&t.trackByMethod&&(s.trackinglink=t.trackingId),"mark"===t.linkType&&(s.marketingaction=t.marketingAction),this.editorService.insertAnchor(t.url,e,s)}this.onContentChange(this.htmlEditor.element.nativeElement.innerHTML)}}})}))}removeAnchor(){let e;this.editorService.selectedText=this.getSelectedText(),this.editorService.saveSelection(),e="A"===this.editorService.savedSelectionParentElement.nodeName?this.editorService.savedSelectionParentElement:this.editorService.savedSelectionParentElement.closest("a"),e&&(e.outerHTML=e.innerHTML,this.onContentChange(this.htmlEditor.element.nativeElement.innerHTML))}addVideo(){this.isActive&&(this.editorService.saveSelection(),this.modal.input("Add Video","Insert Video URL").pipe((0,d.q)(1)).subscribe((e=>{if(!e||0==e.length)return;this.focusEditor(),this.editorService.restoreSelection();let t=/https?:\/\/(?:www\.)?vimeo.com\/(?:channels\/(?:\w+\/)?|groups\/([^\/]*)\/videos\/|album\/(\d+)\/video\/|)(\d+)(?:$|\/|\?)/,s=/^.*((youtu.be\/)|(v\/)|(\/u\/\w\/)|(embed\/)|(watch\?))\??v?=?([^#\&\?]*).*/;e.match(t)&&(e="https://player.vimeo.com/video/"+e.match(t)[3]),e.match(s)&&(e="https://www.youtube.com/embed/"+e.match(s)[7]);let i=`<iframe src="${e}" frameborder="0" allow="encrypted-media" allowfullscreen></iframe>`;this._document.execCommand("insertHTML",!1,i)})))}getSelectedText(){return window.getSelection?window.getSelection().toString():this._document.selection&&"Control"!=this._document.selection.type?this._document.selection.createRange().text:void 0}insertColor(e,t){this.editorService.insertColor(e,t)}setFontName(e){this.editorService.setFontName(e)}setFontSize(e){this.editorService.setFontSize(e)}onFileChanged(e){}setCustomClass(e){}encodeHtml(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}addCodeSnippet(){if(!this.isActive)return;let e=`<br><pre style="background-color: #eee;border-radius: .2rem; border:1px solid #ccc; padding: .5rem"><code>${this.encodeHtml(this.getSelectedText())||"&nbsp;"}</code></pre><br>`;this._document.execCommand("insertHTML",!1,e)}onPaste(e){if("CODE"==e.target.nodeName){e.preventDefault();let t=(e.originalEvent||e).clipboardData.getData("text/plain");document.execCommand("insertHTML",!1,this.encodeHtml(t))}}handleKeyboardShortcuts(){this.keydownListener=this.renderer.listen("document","keydown",(e=>{(window.navigator.platform.match("Mac")?e.metaKey:e.ctrlKey)&&"s"==e.key.toLowerCase()&&(e.preventDefault(),this.save$.emit(this._html))}))}focusEditor(){this.htmlEditor.element.nativeElement.focus()}openTemplateVariableHelper(){this.isActive&&(this.editorService.saveSelection(),this.modalOpen=!0,this.modal.openModal("OutputTemplatesVariableHelper",null,this.viewContainerRef.injector).pipe((0,d.q)(1)).subscribe((e=>{e.instance.response.pipe((0,d.q)(1)).subscribe((e=>{this.focusEditor(),this.editorService.restoreSelection(),this._document.execCommand("insertText",!1,"{"+e+"}"),this.modalOpen=!1}))})))}getHtmlFromSelection(){let e,t=window.getSelection();t.getRangeAt?e=t.getRangeAt(0):(e=document.createRange(),e.setStart(t.anchorNode,t.anchorOffset),e.setEnd(t.focusNode,t.focusOffset));let s=e.cloneContents(),i=document.createElement("div");return i.appendChild(s),i.innerHTML}}return e=SystemHtmlEditor,(0,i.Z)(SystemHtmlEditor,"ɵfac",(function(t){return new(t||e)(n.Y36(r.o),n.Y36(n.Qsj),n.Y36(c.Pu),n.Y36(a.L),n.Y36(l.K0),n.Y36(n.SBq),n.Y36(u.d),n.Y36(n.s_b),n.Y36(h.C),n.Y36(m.o,8),n.Y36(g._))})),(0,i.Z)(SystemHtmlEditor,"ɵcmp",n.Xpm({type:e,selectors:[["system-html-editor"]],viewQuery:function(e,t){if(1&e&&n.Gf(f,7,n.s_b),2&e){let e;n.iGM(e=n.CRH())&&(t.htmlEditor=e.first)}},inputs:{extendedmode:"extendedmode",innerheight:"innerheight",useMedialFile:"useMedialFile"},outputs:{save$:"save$"},features:[n._Bn([{provide:o.JU,useExisting:(0,n.Gpc)((()=>e)),multi:!0},a.L])],ngContentSelectors:C,decls:66,vars:59,consts:[[1,"slds-rich-text-editor","slds-grid","slds-grid_vertical","slds-nowrap","slds-grid","slds-grid--vertical","slds-theme--default",2,"top","0","right","0","left","0","bottom","0","z-index","9999",3,"ngStyle","click"],["role","toolbar",1,"slds-rich-text-editor__toolbar","slds-shrink-none"],["class","slds-button slds-button_icon slds-button_icon-border-filled slds-m-right--xx-small","tabindex","-1",3,"title","click",4,"ngIf"],["class","slds-button-group-list",4,"ngIf"],["class","slds-grid slds-rich-text-editor__spacing-wrapper","role","group",4,"ngIf"],[1,"slds-button-group-list"],["tabindex","-1",1,"slds-button","slds-button_icon","slds-button_icon-border-filled",3,"title","ngClass","click"],["icon","bold"],["icon","italic"],["icon","underline"],["icon","strikethrough"],["icon","richtextbulletedlist"],["icon","richtextnumberedlist"],["icon","richtextindent"],["icon","richtextoutdent"],["icon","left_align_text"],["icon","center_align_text"],["icon","right_align_text"],["icon","justify_text"],["tabindex","-1",1,"slds-button","slds-button_icon","slds-button_icon-border-filled",3,"title","click"],["icon","link"],["icon","remove_link"],[4,"ngIf"],["icon","remove_formatting"],[1,"slds-button-group-list","slds-grid","slds-grid--align-end","slds-grow"],[1,"slds-rich-text-editor__textarea","slds-grid","slds-grow",2,"min-height","0"],[1,"slds-rich-text-area__content","slds-text-color_weak","slds-grow","slds-height_full",2,"min-height","100%"],["tabindex","0",2,"height","100%","cursor","text",3,"click","keyup","paste","input"],["htmleditor",""],["tabindex","-1",1,"slds-button","slds-button_icon","slds-button_icon-border-filled","slds-m-right--xx-small",3,"title","click"],["icon","save"],["icon","undo"],[1,"slds-assistive-text"],["icon","redo"],["role","group",1,"slds-grid","slds-rich-text-editor__spacing-wrapper"],[1,"slds-rich-text-editor__select"],[1,"slds-form-element"],[1,"slds-form-element__control"],[1,"slds-select_container"],[1,"slds-select",3,"ngModel","ngModelChange","change"],["value","h1"],["value","h2"],["value","h3"],["value","h4"],["value","h5"],["value","h6"],["value","p"],["value","pre"],["value","div"],["value","default"],["icon","image"],["icon","video"],["icon","snippet"],["icon","ad_set"],["icon","variable"],["icon","insert_tag_field"],[3,"icon"]],template:function(e,t){if(1&e){const e=n.EpF();n.F$t(),n.TgZ(0,"div",0),n.NdJ("click",(function(e){return t.onEditorClick(e)})),n.TgZ(1,"div",1),n.YNc(2,b,2,1,"button",2),n.YNc(3,v,11,2,"ul",3),n.YNc(4,Z,29,1,"div",4),n.TgZ(5,"ul",5)(6,"li")(7,"button",6),n.NdJ("click",(function(){return t.executeCommand("bold")})),n._UZ(8,"system-button-icon",7),n.qZA()(),n.TgZ(9,"li")(10,"button",6),n.NdJ("click",(function(){return t.executeCommand("italic")})),n._UZ(11,"system-button-icon",8),n.qZA()(),n.TgZ(12,"li")(13,"button",6),n.NdJ("click",(function(){return t.executeCommand("underline")})),n._UZ(14,"system-button-icon",9),n.qZA()(),n.TgZ(15,"li")(16,"button",6),n.NdJ("click",(function(){return t.executeCommand("strikethrough")})),n._UZ(17,"system-button-icon",10),n.qZA()()(),n.TgZ(18,"ul",5)(19,"li")(20,"button",6),n.NdJ("click",(function(){return t.executeCommand("insertUnorderedList")})),n._UZ(21,"system-button-icon",11),n.qZA()(),n.TgZ(22,"li")(23,"button",6),n.NdJ("click",(function(){return t.executeCommand("insertOrderedList")})),n._UZ(24,"system-button-icon",12),n.qZA()()(),n.TgZ(25,"ul",5)(26,"li")(27,"button",6),n.NdJ("click",(function(){return t.executeCommand("indent")})),n._UZ(28,"system-button-icon",13),n.qZA()(),n.TgZ(29,"li")(30,"button",6),n.NdJ("click",(function(){return t.executeCommand("outdent")})),n._UZ(31,"system-button-icon",14),n.qZA()()(),n.TgZ(32,"ul",5)(33,"li")(34,"button",6),n.NdJ("click",(function(){return t.executeCommand("justifyLeft")})),n._UZ(35,"system-button-icon",15),n.qZA()(),n.TgZ(36,"li")(37,"button",6),n.NdJ("click",(function(){return t.executeCommand("justifyCenter")})),n._UZ(38,"system-button-icon",16),n.qZA()(),n.TgZ(39,"li")(40,"button",6),n.NdJ("click",(function(){return t.executeCommand("justifyRight")})),n._UZ(41,"system-button-icon",17),n.qZA()(),n.TgZ(42,"li")(43,"button",6),n.NdJ("click",(function(){return t.executeCommand("justifyFull")})),n._UZ(44,"system-button-icon",18),n.qZA()()(),n.TgZ(45,"ul",5)(46,"li")(47,"button",19),n.NdJ("click",(function(){return t.insertAnchor()})),n._UZ(48,"system-button-icon",20),n.qZA()(),n.TgZ(49,"li")(50,"button",19),n.NdJ("click",(function(){return t.removeAnchor()})),n._UZ(51,"system-button-icon",21),n.qZA()()(),n.YNc(52,y,11,4,"ul",3),n.TgZ(53,"ul",5),n.YNc(54,x,3,1,"li",22),n.qZA(),n.TgZ(55,"ul",5)(56,"li")(57,"button",19),n.NdJ("click",(function(){return t.executeCommand("removeFormat")})),n._UZ(58,"system-button-icon",23),n.qZA()()(),n.YNc(59,w,7,3,"ul",3),n.TgZ(60,"ul",24),n.Hsn(61),n.qZA()(),n.TgZ(62,"div",25)(63,"div",26)(64,"div",27,28),n.NdJ("click",(function(){return t.exec()}))("keyup",(function(){return t.exec()}))("paste",(function(e){return t.onPaste(e)}))("input",(function(){n.CHM(e);const s=n.MAs(65);return n.KtG(t.onContentChange(s.innerHTML))})),n.qZA()()()()}2&e&&(n.Q6J("ngStyle",t.richTextStyle),n.xp6(2),n.Q6J("ngIf",t.extendedmode),n.xp6(1),n.Q6J("ngIf",t.extendedmode),n.xp6(1),n.Q6J("ngIf",t.extendedmode),n.xp6(3),n.Q6J("title",t.language.getLabel("LBL_BOLD"))("ngClass",n.VKq(35,T,t.commandIsActive("bold"))),n.xp6(3),n.Q6J("title",t.language.getLabel("LBL_ITALIC"))("ngClass",n.VKq(37,T,t.commandIsActive("italic"))),n.xp6(3),n.Q6J("title",t.language.getLabel("LBL_UNDERLINE"))("ngClass",n.VKq(39,T,t.commandIsActive("underline"))),n.xp6(3),n.Q6J("title",t.language.getLabel("LBL_STRIKETHROUGH"))("ngClass",n.VKq(41,T,t.commandIsActive("strikethrough"))),n.xp6(4),n.Q6J("title",t.language.getLabel("LBL_BULLETED_LIST"))("ngClass",n.VKq(43,T,t.commandIsActive("insertUnorderedList"))),n.xp6(3),n.Q6J("title",t.language.getLabel("LBL_NUMBERED_LIST"))("ngClass",n.VKq(45,T,t.commandIsActive("insertOrderedList"))),n.xp6(4),n.Q6J("title",t.language.getLabel("LBL_TEXT_INDENT"))("ngClass",n.VKq(47,T,t.commandIsActive("indent"))),n.xp6(3),n.Q6J("title",t.language.getLabel("LBL_TEXT_OUTDENT"))("ngClass",n.VKq(49,T,t.commandIsActive("otdent"))),n.xp6(4),n.Q6J("title",t.language.getLabel("LBL_LEFT_ALIGN"))("ngClass",n.VKq(51,T,t.commandIsActive("justifyLeft"))),n.xp6(3),n.Q6J("title",t.language.getLabel("LBL_CENTER_ALIGN"))("ngClass",n.VKq(53,T,t.commandIsActive("justifyCenter"))),n.xp6(3),n.Q6J("title",t.language.getLabel("LBL_RIGHT_ALIGN"))("ngClass",n.VKq(55,T,t.commandIsActive("justifyRight"))),n.xp6(3),n.Q6J("title",t.language.getLabel("LBL_ALIGN_TEXT"))("ngClass",n.VKq(57,T,t.commandIsActive("justifyFull"))),n.xp6(4),n.Q6J("title",t.language.getLabel("LBL_LINK")),n.xp6(3),n.Q6J("title",t.language.getLabel("LBL_REMOVE_LINK")),n.xp6(2),n.Q6J("ngIf",t.extendedmode),n.xp6(2),n.Q6J("ngIf",t.useTemplateVariableHelper),n.xp6(3),n.Q6J("title",t.language.getLabel("LBL_REMOVE_FORMATTING")),n.xp6(2),n.Q6J("ngIf",t.extendedmode),n.xp6(5),n.uIk("contenteditable",t.isActive))},dependencies:[l.mk,l.O5,l.PC,o.YN,o.Kr,o.EJ,o.JJ,o.On,p.J],encapsulation:2})),SystemHtmlEditor})()},4561:(e,t,s)=>{"use strict";s.d(t,{f:()=>a});var i=s(1180),n=s(2242),o=s(4154),l=s(4755);let a=(()=>{var e;class SystemIcon{constructor(e){(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"module",""),(0,i.Z)(this,"icon",""),(0,i.Z)(this,"size",""),(0,i.Z)(this,"sprite","standard"),(0,i.Z)(this,"addclasses",""),(0,i.Z)(this,"divClass","slds-media__figure"),this.metadata=e}getSizeClass(){return this.size?"slds-icon--"+this.size:""}getSvgHRef(){return"./vendor/sldassets/icons/"+this.getSprite()+"-sprite/svg/symbols.svg#"+this.getIcon()}getIconClass(){switch(this.sprite){case"standard":case"action":case"custom":return"slds-icon slds-icon_container"+(this.size?" slds-icon--"+this.size:"")+" slds-icon-"+this.getSprite()+"-"+this.getIcon().replace(/_/g,"-")+" "+this.addclasses;default:return"slds-icon slds-icon_container"+(this.size?" slds-icon--"+this.size:"")+" slds-icon-text-default "+this.addclasses}}getIcon(){if(this.icon)return this.icon.indexOf(":")>0?this.icon.split(":")[1]:this.icon;if(this.module&&this.metadata.getModuleIcon(this.module)){let e=this.metadata.getModuleIcon(this.module);return e.indexOf(":")>0?e.split(":")[1]:e}return"empty"}getSprite(){return this.icon&&this.icon.indexOf(":")>0?this.icon.split(":")[0]:this.module&&this.metadata.getModuleIcon(this.module)&&this.metadata.getModuleIcon(this.module).indexOf(":")>0?this.metadata.getModuleIcon(this.module).split(":")[0]:this.sprite}}return e=SystemIcon,(0,i.Z)(SystemIcon,"ɵfac",(function(t){return new(t||e)(n.Y36(o.Pu))})),(0,i.Z)(SystemIcon,"ɵcmp",n.Xpm({type:e,selectors:[["system-icon"]],inputs:{module:"module",icon:"icon",size:"size",sprite:"sprite",addclasses:"addclasses",divClass:"divClass"},decls:3,vars:3,consts:[[3,"ngClass"],["aria-hidden","true",3,"ngClass"]],template:function(e,t){1&e&&(n.TgZ(0,"div",0),n.O4$(),n.TgZ(1,"svg",1),n._UZ(2,"use"),n.qZA()()),2&e&&(n.Q6J("ngClass",t.divClass),n.xp6(1),n.Q6J("ngClass",t.getIconClass()),n.xp6(1),n.uIk("href",t.getSvgHRef(),null,"xlink"))},dependencies:[l.mk],encapsulation:2})),SystemIcon})()},8594:(e,t,s)=>{"use strict";s.d(t,{h:()=>u});var i=s(1180),n=s(2242),o=s(4154),l=s(4755),a=s(34);const d=function(e,t,s){return{bottom:e,left:t,"max-width":s}};function r(e,t){if(1&e&&(n.TgZ(0,"div",5)(1,"div",6)(2,"span",7),n._uU(3),n.qZA()()()),2&e){const e=n.oxw();n.Q6J("ngStyle",n.kEZ(2,d,e.bottomdistance,e.leftdistance,e.PopoverMaxWidth)),n.xp6(3),n.Oqu(e.helpText)}}const c=function(e){return{color:e}};let u=(()=>{var e;class SystemIconHelpText{constructor(e){(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"icon","info"),(0,i.Z)(this,"file","./assets/icons/spicecrm.svg"),(0,i.Z)(this,"size","xx-small"),(0,i.Z)(this,"popoverMaxWidth","300px"),(0,i.Z)(this,"color","#bbb"),(0,i.Z)(this,"hovercolor","#5B5B5B"),(0,i.Z)(this,"desaturate",!1),(0,i.Z)(this,"addclasses",""),(0,i.Z)(this,"divClass","slds-media__figure"),(0,i.Z)(this,"helpText",""),(0,i.Z)(this,"showHelp",!1),this.metadata=e}get gicon(){if(this.icon)return this.icon}get gfile(){if(this.file)return this.file}get gsizeClass(){if(this.size)return this.size}get gcolor(){if(this.color)return this.color}get ghovercolor(){if(this.hovercolor)return this.hovercolor}get gdesaturate(){if(this.desaturate)return this.desaturate}get gaddClass(){if(this.addclasses)return this.addclasses}get gdivClass(){if(this.divClass)return this.divClass}get PopoverMaxWidth(){return this.popoverMaxWidth}get bottomdistance(){return"xx-small"==this.size||"x-small"==this.size?" 2.5em":"small"==this.size?" 2.8em":"large"==this.size?" 3.5em":void 0}get leftdistance(){return"xx-small"==this.size||"x-small"==this.size?"-65%":"small"==this.size?"-30%":"large"==this.size?"10%":void 0}}return e=SystemIconHelpText,(0,i.Z)(SystemIconHelpText,"ɵfac",(function(t){return new(t||e)(n.Y36(o.Pu))})),(0,i.Z)(SystemIconHelpText,"ɵcmp",n.Xpm({type:e,selectors:[["system-icon-help-text"]],inputs:{icon:"icon",file:"file",size:"size",popoverMaxWidth:"popoverMaxWidth",color:"color",hovercolor:"hovercolor",desaturate:"desaturate",addclasses:"addclasses",divClass:"divClass",helpText:"helpText"},decls:5,vars:10,consts:[[1,"slds-is-relative",2,"display","inline"],[3,"mouseover","mouseout"],[1,"slds-icon_container","slds-icon-utility-info"],[3,"ngStyle","icon","file","size","desaturate","addclasses","divClass"],["class","slds-popover slds-popover_tooltip slds-nubbin_bottom-left","role","tooltip","id","help","style","position: absolute; display: block; z-index: 50; width: max-content;",3,"ngStyle",4,"ngIf"],["role","tooltip","id","help",1,"slds-popover","slds-popover_tooltip","slds-nubbin_bottom-left",2,"position","absolute","display","block","z-index","50","width","max-content",3,"ngStyle"],[1,"slds-popover__body",2,"width","100%"],[2,"display","block","white-space","pre-wrap"]],template:function(e,t){1&e&&(n.TgZ(0,"div",0)(1,"a",1),n.NdJ("mouseover",(function(){return t.showHelp=!0}))("mouseout",(function(){return t.showHelp=!1})),n.TgZ(2,"span",2),n._UZ(3,"system-custom-icon",3),n.qZA()(),n.YNc(4,r,4,6,"div",4),n.qZA()),2&e&&(n.xp6(3),n.Q6J("ngStyle",n.VKq(8,c,1==t.showHelp?t.ghovercolor:t.gcolor))("icon",t.gicon)("file",t.gfile)("size",t.gsizeClass)("desaturate",t.gdesaturate)("addclasses",t.gaddClass)("divClass",t.gdivClass),n.xp6(1),n.Q6J("ngIf",t.showHelp))},dependencies:[l.O5,l.PC,a.$],encapsulation:2})),SystemIconHelpText})()},4567:(e,t,s)=>{"use strict";s.d(t,{s:()=>a});var i=s(1180),n=s(2242),o=s(5329),l=s(3463);let a=(()=>{var e;class SystemIllustrationNoAccess{constructor(e){(0,i.Z)(this,"language",void 0),this.language=e}}return e=SystemIllustrationNoAccess,(0,i.Z)(SystemIllustrationNoAccess,"ɵfac",(function(t){return new(t||e)(n.Y36(o.d))})),(0,i.Z)(SystemIllustrationNoAccess,"ɵcmp",n.Xpm({type:e,selectors:[["system-illustration-no-access"]],decls:86,vars:0,consts:[[1,"slds-illustration","slds-illustration_small"],["viewBox","0 0 454 212","aria-hidden","true","xmlns","http://www.w3.org/2000/svg",0,"xmlns","xlink","http://www.w3.org/1999/xlink",1,"slds-illustration__svg"],["stroke","none","stroke-width","1","fill","none","fill-rule","evenodd"],["transform","translate(-70.000000, -95.000000)"],["transform","translate(124.500000, 222.000000)"],["fill","#FFFFFF"],["vector-effect","non-scaling-stroke","d","M18.9209988,1.95433401 L33.259296,51.443436 C33.5666778,52.5043744 32.9557995,53.613617 31.8948612,53.9209988 C31.7139843,53.9734036 31.5266126,54 31.3382972,54 L2.6617028,54 C1.5571333,54 0.661702805,53.1045695 0.661702805,52 C0.661702805,51.8116846 0.688299176,51.6243129 0.74070397,51.443436 L15.0790012,1.95433401 C15.386383,0.893395645 16.4956256,0.282517358 17.556564,0.589899164 C18.2152102,0.780726338 18.7301717,1.29568777 18.9209988,1.95433401 Z"],["stroke-linecap","round","stroke-width","3",1,"slds-illustration__stroke-secondary"],["vector-effect","non-scaling-stroke","stroke-linejoin","round","points","17 0.323943662 34 54 -1.81721305e-12 54"],["vector-effect","non-scaling-stroke","d","M17,4.6953125 C17,43.0456294 17,62.6471919 17,63.5 C17,62.6471919 17,43.0456294 17,4.6953125 Z"],["vector-effect","non-scaling-stroke","d","M17,29.3239437 C22.3333333,35.7851611 25,39.1184944 25,39.3239437 C25,39.1184944 22.3333333,35.7851611 17,29.3239437 Z","stroke-linejoin","round","transform","translate(21.000000, 34.323944) scale(-1, 1) translate(-21.000000, -34.323944) "],["transform","translate(145.000000, 194.000000)"],["transform","translate(1.000000, 0.000000)","fill","#FFFFFF"],["vector-effect","non-scaling-stroke","d","M25.6478873,0 L50.879042,84.4273253 C51.1953215,85.4856452 50.5937789,86.5999782 49.535459,86.9162577 C49.3496374,86.9717906 49.1567264,87 48.9627843,87 L2.33299037,87 C1.22842087,87 0.332990367,86.1045695 0.332990367,85 C0.332990367,84.8060578 0.361199757,84.6131469 0.416732643,84.4273253 L25.6478873,0 Z"],["vector-effect","non-scaling-stroke","stroke-linejoin","round","points","26.5 0 52.5 87 0.5 87"],["vector-effect","non-scaling-stroke","d","M26.5,2.58642578 C26.5,61.0261034 26.5,90.9972948 26.5,92.5 C26.5,90.9972948 26.5,61.0261034 26.5,2.58642578 Z"],["vector-effect","non-scaling-stroke","d","M15.6478873,42 C22.314554,49.078692 25.6478873,52.7453587 25.6478873,53 C25.6478873,52.7453587 22.314554,49.078692 15.6478873,42 Z","stroke-linejoin","round"],["vector-effect","non-scaling-stroke","d","M27.6478873,68 C36.9812207,57.078692 41.6478873,51.7453587 41.6478873,52 C41.6478873,51.7453587 36.9812207,57.078692 27.6478873,68 Z","stroke-linejoin","round"],["transform","translate(404.500000, 245.000000) scale(-1, 1) translate(-404.500000, -245.000000) translate(348.000000, 226.000000)","stroke-linecap","round","stroke-linejoin","round","stroke-width","3",1,"slds-illustration__stroke-secondary"],["vector-effect","non-scaling-stroke","points","0 38 47.5 0 80.5 26"],["vector-effect","non-scaling-stroke","points","71 17 80.5 9 113 36"],["transform","translate(72.000000, 262.500000)"],["vector-effect","non-scaling-stroke","d","M153.962142,26.4644491 C151.225735,20.0143094 144.944776,15.5029106 137.633892,15.5029106 C135.619663,15.5029106 133.683612,15.8453541 131.878328,16.4764392 C128.451481,11.1704266 122.567406,7.66985447 115.883789,7.66985447 C109.491267,7.66985447 103.830159,10.8721423 100.350851,15.7935668 C98.9589956,14.968161 97.3423157,14.4956341 95.6177606,14.4956341 C94.1083143,14.4956341 92.6815102,14.8576334 91.4157672,15.5014039 C87.9975328,6.58722215 79.5098304,0.275259875 69.5804557,0.275259875 C60.4632836,0.275259875 52.5615782,5.59684366 48.6837305,13.3681823 C46.3912034,12.266973 43.8314865,11.6515593 41.1312741,11.6515593 C32.4373504,11.6515593 25.1998844,18.0312998 23.6476214,26.4644491 L153.962142,26.4644491 Z",1,"slds-illustration__fill-secondary"],["vector-effect","non-scaling-stroke","d","M13,25 L143,25","stroke-width","3","stroke-linecap","round",1,"slds-illustration__stroke-secondary"],["vector-effect","non-scaling-stroke","d","M0,25 L450,25","stroke-width","3","stroke-linecap","round",1,"slds-illustration__stroke-secondary"],["transform","translate(344.000000, 247.000000)"],["transform","translate(0.293436, 0.054545)"],["vector-effect","non-scaling-stroke","d","M165.428708,41.9454545 L0.0995432562,41.9454545 C0.0336614956,41.2089487 0,40.4630069 0,39.7090909 C0,26.2132599 10.7866531,15.2727273 24.0926641,15.2727273 C27.7492016,15.2727273 31.215485,16.0989227 34.3199502,17.5772977 C39.5712028,7.14424616 50.271428,0 62.6175975,0 C76.0636257,0 87.5573893,8.47383452 92.1862485,20.441159 C93.9002755,19.5768947 95.8324059,19.0909091 97.8764479,19.0909091 C100.211783,19.0909091 102.401037,19.7252784 104.285841,20.8333889 C108.997403,14.2263569 116.663488,9.92727273 125.320028,9.92727273 C138.043441,9.92727273 148.627152,19.2146805 150.834755,31.4671412 C151.487388,31.3631046 152.156394,31.3090909 152.837838,31.3090909 C159.117096,31.3090909 164.340238,35.8953699 165.428708,41.9454545 Z",1,"slds-illustration__fill-secondary"],["vector-effect","non-scaling-stroke","d","M32.7065637,40.4454545 L173.706564,40.4454545","stroke-width","3","stroke-linecap","round",1,"slds-illustration__stroke-secondary"],["transform","translate(105.000000, 203.000000)"],["transform","translate(106.000000, 0.000000)","fill","#FFFFFF"],["vector-effect","non-scaling-stroke","points","121.5 48.5 158.5 48.5 158.5 34.5 47.5 34.5 47.5 48.5 93.5 48.5 93.5 69.5 121.5 69.5 121.5 48.5"],["vector-effect","non-scaling-stroke","d","M33.9882812,0.21875 C36.5611979,0.21875 70.6126302,0.21875 136.142578,0.21875 L152.384766,11.1132813 C155.083088,16.811292 155.656656,19.677503 154.105469,19.7119141 C152.554281,19.7463252 116.293865,17.6717809 45.3242187,13.4882812 C35.1940104,4.64192708 31.4153646,0.21875 33.9882812,0.21875 Z"],["vector-effect","non-scaling-stroke","d","M32.6708984,2.02246094 L21.5554199,0.374195518 L17.6036034,0.374195518 L5.77148437,7.90429688 C3.09089817,12.6737672 3.09089817,15.2284547 5.77148437,15.5683594 C8.45207058,15.9082641 16.1278518,14.3268839 28.7988281,10.8242188 L42.9921875,7.90429688 L41.0699892,5.68448183 L32.6708984,2.02246094 Z"],["x","0","y","34","width","48","height","14"],["transform","translate(106.000000, 5.000000)",1,"slds-illustration__fill-secondary"],["vector-effect","non-scaling-stroke","points","93.3109375 43.4566406 93.3109375 64.6722656 120.925 64.6722656 121.823047 44.1324219 158.5 43.4566406 158.5 97.5 48.5 97.5 48.5 43.6933594"],["vector-effect","non-scaling-stroke","d","M132.670898,7.66300119e-19 C125.172201,-2.55433373e-19 94.1907552,-2.55433373e-19 39.7265625,7.66300119e-19 L31.8183594,12.5058594 L29.7050781,28.2714844 L157.78125,28.2714844 L157.78125,15.4775391 C148.539714,5.15917969 140.169596,1.78803361e-18 132.670898,7.66300119e-19 Z"],["vector-effect","non-scaling-stroke","d","M37.8266602,0 C34.4632704,0 29.4181858,0 22.6914062,0 C16.1624349,0 9.53808594,3.83528646 2.81835938,11.5058594 L0.705078125,30.2714844 L48.4101562,30.2714844 L48.4101562,14.4775391 L48.1789909,12.3275853 C43.283405,4.10919509 39.832628,0 37.8266602,0 Z"],["x","0.5","y","43.5","width","48","height","54"],["stroke-width","3","stroke-linecap","round","stroke-linejoin","round","x","154.5","y","34.5","width","110","height","68",1,"slds-illustration__stroke-primary"],["vector-effect","non-scaling-stroke","stroke-width","3","stroke-linecap","round","stroke-linejoin","round","points","264.5 48.5 264.5 34.5 154.5 34.5 154.5 48.5 199.5 48.5 199.5 69.5 227.5 69.5 227.5 48.5",1,"slds-illustration__stroke-primary"],["vector-effect","non-scaling-stroke","d","M130.5,0.5 L234.5,0.5 C251.068542,0.5 264.5,13.9314575 264.5,30.5 L264.5,34.5 L106.5,34.5 L106.5,24.5 C106.5,11.245166 117.245166,0.5 130.5,0.5 Z","stroke-width","3","stroke-linecap","round","stroke-linejoin","round",1,"slds-illustration__stroke-primary"],["vector-effect","non-scaling-stroke","d","M130.5,0.5 L130.5,0.5 C143.754834,0.5 154.5,11.245166 154.5,24.5 L154.5,34.5 L106.5,34.5 L106.5,24.5 C106.5,11.245166 117.245166,0.5 130.5,0.5 Z","stroke-width","3","stroke-linecap","round","stroke-linejoin","round",1,"slds-illustration__stroke-primary"],["stroke-width","3","stroke-linecap","round","stroke-linejoin","round","x","106.5","y","48.5","width","48","height","54",1,"slds-illustration__stroke-primary"],["stroke-width","3","stroke-linecap","round","stroke-linejoin","round","x","106.5","y","34.5","width","48","height","14",1,"slds-illustration__stroke-primary"],["vector-effect","non-scaling-stroke","d","M219,52 C219,54.765 216.765,57 214,57 C211.235,57 209,54.765 209,52 C209,49.235 211.235,47 214,47 C216.765,47 219,49.235 219,52 Z",1,"slds-illustration__fill-primary"],["vector-effect","non-scaling-stroke","d","M214,55 L214,60","stroke-width","4","stroke-linecap","round",1,"slds-illustration__stroke-primary"],["vector-effect","non-scaling-stroke","cx","164","cy","58","r","3",1,"slds-illustration__fill-primary"],["vector-effect","non-scaling-stroke","cx","164","cy","93","r","3",1,"slds-illustration__fill-primary"],["vector-effect","non-scaling-stroke","cx","255","cy","58","r","3",1,"slds-illustration__fill-primary"],["vector-effect","non-scaling-stroke","cx","255","cy","93","r","3",1,"slds-illustration__fill-primary"],["vector-effect","non-scaling-stroke","cx","145","cy","58","r","3",1,"slds-illustration__fill-primary"],["vector-effect","non-scaling-stroke","cx","145","cy","93","r","3",1,"slds-illustration__fill-primary"],["vector-effect","non-scaling-stroke","cx","116","cy","58","r","3",1,"slds-illustration__fill-primary"],["vector-effect","non-scaling-stroke","cx","116","cy","93","r","3",1,"slds-illustration__fill-primary"],["vector-effect","non-scaling-stroke","d","M289.928751,82.2971422 L298,102.518658 L280,102.518658 L288.071249,82.2971422 C288.275982,81.784207 288.857768,81.5343604 289.370703,81.7390942 C289.625359,81.8407378 289.827108,82.0424867 289.928751,82.2971422 Z",1,"slds-illustration__fill-primary"],["vector-effect","non-scaling-stroke","d","M300.428751,89.8132712 L305.5,102.518658 L293.5,102.518658 L298.571249,89.8132712 C298.775982,89.300336 299.357768,89.0504894 299.870703,89.2552232 C300.125359,89.3568668 300.327108,89.5586158 300.428751,89.8132712 Z",1,"slds-illustration__fill-primary"],["vector-effect","non-scaling-stroke","d","M93.4287513,82.2971422 L101.5,102.518658 L83.5,102.518658 L91.5712487,82.2971422 C91.7759825,81.784207 92.3577681,81.5343604 92.8707033,81.7390942 C93.1253588,81.8407378 93.3271077,82.0424867 93.4287513,82.2971422 Z","transform","translate(92.500000, 92.517446) scale(-1, 1) translate(-92.500000, -92.517446) ",1,"slds-illustration__fill-primary"],["vector-effect","non-scaling-stroke","d","M76.9287513,89.8132712 L82,102.518658 L70,102.518658 L75.0712487,89.8132712 C75.2759825,89.300336 75.8577681,89.0504894 76.3707033,89.2552232 C76.6253588,89.3568668 76.8271077,89.5586158 76.9287513,89.8132712 Z","transform","translate(76.000000, 96.275510) scale(-1, 1) translate(-76.000000, -96.275510) ",1,"slds-illustration__fill-primary"],["vector-effect","non-scaling-stroke","d","M360,102.5 L372,102.5","stroke-width","3","stroke-linecap","round","stroke-linejoin","round",1,"slds-illustration__stroke-primary"],["vector-effect","non-scaling-stroke","d","M0,102.5 L350,102.5","stroke-width","3","stroke-linecap","round","stroke-linejoin","round",1,"slds-illustration__stroke-primary"],["transform","translate(150.000000, 96.000000)","stroke-linecap","round","stroke-width","3",1,"slds-illustration__stroke-secondary"],["vector-effect","non-scaling-stroke","d","M44,17.5 L63,17.5 C62.2789714,12.0723971 64.081543,7.53186978 68.4077148,3.87841797 C73.3754883,-0.195556641 79.2734375,0.717773438 82.440918,2.12353516 C85.6083984,3.52929687 87.9606934,5.46069336 89.5913086,9.10524041 C90.2822266,10.6397351 90.7517904,11.9379883 91,13"],["vector-effect","non-scaling-stroke","d","M83,20.5 C84.0558268,16.8461914 86.2227376,14.4572754 89.5007324,13.333252 C94.4177246,11.6472168 99.0800781,13.8925781 100.942383,16.1518555 C102.804687,18.4111328 103.39502,20.2260742 103.746582,22.1201172 C103.980957,23.3828125 104.06543,24.8427734 104,26.5 C108.141764,26.3313802 110.918945,27.1647135 112.331543,29 C114.040039,31.1936035 114.215332,33.817627 113.593018,35.75 C112.970703,37.682373 110.894531,40.5 107,40.5 L28,40.5"],["vector-effect","non-scaling-stroke","d","M18,27.5 L83.0004985,27.5"],["vector-effect","non-scaling-stroke","d","M0,27.5 L8,27.5"],["transform","translate(271.000000, 135.000000)","stroke-linecap","round","stroke-width","3",1,"slds-illustration__stroke-secondary"],["transform","translate(402.000000, 164.000000)","stroke-linecap","round","stroke-width","3",1,"slds-illustration__stroke-secondary"],["transform","translate(31.713442, 25.088326) rotate(-15.000000) translate(-31.713442, -25.088326) translate(4.713442, 6.588326)"],["vector-effect","non-scaling-stroke","d","M31.0360707,3.43528591 C31.0360707,3.43528591 40.5802283,0.671893051 42.6488424,10.6908663","transform","translate(36.842457, 6.888440) rotate(41.000000) translate(-36.842457, -6.888440) "],["vector-effect","non-scaling-stroke","d","M40.4282002,10.1797377 C40.4282002,10.1797377 49.9723578,7.4163448 52.0409719,17.435318","transform","translate(46.234586, 13.632892) scale(-1, 1) rotate(-41.000000) translate(-46.234586, -13.632892) "],["vector-effect","non-scaling-stroke","d","M0.730284783,29.5865514 C0.730284783,29.5865514 10.2744424,26.8231586 12.3430565,36.8421318"],["vector-effect","non-scaling-stroke","d","M12.7302848,29.5865514 C12.7302848,29.5865514 22.2744424,26.8231586 24.3430565,36.8421318","transform","translate(18.536671, 33.039705) scale(-1, 1) translate(-18.536671, -33.039705) "],[1,"slds-text-longform"],[1,"slds-text-heading--small"],["label","LBL_NO_ACCESS"]],template:function(e,t){1&e&&(n.TgZ(0,"div",0),n.O4$(),n.TgZ(1,"svg",1)(2,"g",2)(3,"g",3)(4,"g")(5,"g",4)(6,"g",5),n._UZ(7,"path",6),n.qZA(),n.TgZ(8,"g",7),n._UZ(9,"polygon",8)(10,"path",9)(11,"path",10),n.qZA()(),n.TgZ(12,"g",11)(13,"g",12),n._UZ(14,"path",13),n.qZA(),n.TgZ(15,"g",7),n._UZ(16,"polygon",14)(17,"path",15)(18,"path",16)(19,"path",17),n.qZA()(),n.TgZ(20,"g",18)(21,"g"),n._UZ(22,"polyline",19)(23,"polyline",20),n.qZA()(),n.TgZ(24,"g",21),n._UZ(25,"path",22)(26,"path",23)(27,"path",24),n.qZA(),n.TgZ(28,"g",25)(29,"g",26),n._UZ(30,"path",27)(31,"path",28),n.qZA()(),n.TgZ(32,"g",29)(33,"g",30),n._UZ(34,"polygon",31)(35,"path",32)(36,"path",33)(37,"rect",34),n.qZA(),n.TgZ(38,"g",35),n._UZ(39,"polygon",36)(40,"path",37)(41,"path",38)(42,"rect",39),n.qZA(),n.TgZ(43,"g"),n._UZ(44,"rect",40)(45,"polygon",41)(46,"path",42)(47,"path",43)(48,"rect",44)(49,"rect",45)(50,"path",46)(51,"path",47)(52,"circle",48)(53,"circle",49)(54,"circle",50)(55,"circle",51)(56,"circle",52)(57,"circle",53)(58,"circle",54)(59,"circle",55)(60,"path",56)(61,"path",57)(62,"path",58)(63,"path",59)(64,"path",60)(65,"path",61),n.qZA()(),n.TgZ(66,"g",62),n._UZ(67,"path",63)(68,"path",64)(69,"path",65)(70,"path",66),n.qZA(),n.TgZ(71,"g",67)(72,"g"),n._UZ(73,"path",63)(74,"path",64)(75,"path",65)(76,"path",66),n.qZA()(),n.TgZ(77,"g",68)(78,"g",69),n._UZ(79,"path",70)(80,"path",71)(81,"path",72)(82,"path",73),n.qZA()()()()()(),n.kcU(),n.TgZ(83,"div",74)(84,"h3",75),n._UZ(85,"system-label",76),n.qZA()()())},dependencies:[l._],encapsulation:2})),SystemIllustrationNoAccess})()},2646:(e,t,s)=>{"use strict";s.d(t,{t:()=>l});var i=s(1180),n=s(2242);const o=["*"];let l=(()=>{var e;class SystemIllustrationNoData{}return e=SystemIllustrationNoData,(0,i.Z)(SystemIllustrationNoData,"ɵfac",(function(t){return new(t||e)})),(0,i.Z)(SystemIllustrationNoData,"ɵcmp",n.Xpm({type:e,selectors:[["system-illustration-no-data"]],ngContentSelectors:o,decls:56,vars:0,consts:[[1,"slds-illustration","slds-illustration_small"],["viewBox","0 0 468 194","aria-hidden","true","xmlns","http://www.w3.org/2000/svg",0,"xmlns","xlink","http://www.w3.org/1999/xlink",1,"slds-illustration__svg"],["stroke","none","stroke-width","1","fill","none","fill-rule","evenodd"],["transform","translate(-67.000000, -112.000000)"],["transform","translate(245.000000, 200.000000)","stroke-linecap","round","stroke-width","3",1,"slds-illustration__stroke-secondary"],["vector-effect","non-scaling-stroke","d","M44,17.5 L63,17.5 C62.2789714,12.0723971 64.081543,7.53186978 68.4077148,3.87841797 C73.3754883,-0.195556641 79.2734375,0.717773438 82.440918,2.12353516 C85.6083984,3.52929687 87.9606934,5.46069336 89.5913086,9.10524041 C90.2822266,10.6397351 90.7517904,11.9379883 91,13"],["vector-effect","non-scaling-stroke","d","M83,20.5 C84.0558268,16.8461914 86.2227376,14.4572754 89.5007324,13.333252 C94.4177246,11.6472168 99.0800781,13.8925781 100.942383,16.1518555 C102.804687,18.4111328 103.39502,20.2260742 103.746582,22.1201172 C103.980957,23.3828125 104.06543,24.8427734 104,26.5 C108.141764,26.3313802 110.918945,27.1647135 112.331543,29 C114.040039,31.1936035 114.215332,33.817627 113.593018,35.75 C112.970703,37.682373 110.894531,40.5 107,40.5 L28,40.5"],["vector-effect","non-scaling-stroke","d","M18,27.5 L83.0004985,27.5"],["vector-effect","non-scaling-stroke","d","M0,27.5 L8,27.5"],["transform","translate(135.000000, 152.000000)","stroke-linecap","round","stroke-width","3",1,"slds-illustration__stroke-secondary"],["transform","translate(69.000000, 256.000000)","stroke-linecap","round","stroke-width","3",1,"slds-illustration__stroke-secondary"],["vector-effect","non-scaling-stroke","d","M14,36.5 L464,36.5"],["vector-effect","non-scaling-stroke","d","M0,36.5 L6,36.5"],["vector-effect","non-scaling-stroke","stroke-linejoin","round","points","234.5 36 279.5 0 313.5 26"],["vector-effect","non-scaling-stroke","d","M279.5,1 L279.5,35","stroke-linejoin","round"],["vector-effect","non-scaling-stroke","d","M313.5,11 C313.5,20.7437888 313.5,25.7437888 313.5,26 C313.5,25.7437888 313.5,20.7437888 313.5,11 Z","stroke-linejoin","round"],["vector-effect","non-scaling-stroke","stroke-linejoin","round","points","303.5 17 313.5 9 347.5 36"],["transform","translate(113.000000, 178.000000)"],["transform","translate(30.000000, 8.000000)",1,"slds-illustration__fill-secondary"],["vector-effect","non-scaling-stroke","d","M29.5,60.5 L29.5,12 C29.5,5.372583 34.872583,0 41.5,0 C48.127417,0 53.5,5.372583 53.5,12 L53.5,40.5 L70.5,40.5 L70.5,27 C70.5,23.1340068 73.6340068,20 77.5,20 C81.3659932,20 84.5,23.1340068 84.5,27 L84.5,48.5 C84.5,51.8137085 81.8137085,54.5 78.5,54.5 L53.5,54.5 L53.5,118.5 L29.5,118.5 L29.5,74.5 L6.5,74.5 C3.1862915,74.5 0.5,71.8137085 0.5,68.5 L0.5,39 C0.5,35.1340068 3.63400675,32 7.5,32 C11.3659932,32 14.5,35.1340068 14.5,39 L14.5,60.5 L29.5,60.5 Z"],["transform","translate(59.000000, 7.000000)","fill","#FFFFFF"],["vector-effect","non-scaling-stroke","d","M2,11 C3.65332031,8.49145508 5.65181478,6.77364095 7.9954834,5.84655762 C11.5109863,4.45593262 15.2684326,4.95605469 17.8156738,6.2824707 C20.362915,7.60888672 22.3626709,9.64978027 23.2602539,11.81604 C23.8586426,13.2602132 23.8586426,11.7547201 23.2602539,7.29956055 L19.612793,3.56494141 L13.7923584,0.564331055 L8.765625,1.42663574 L4.67321777,3.19787598 C2.69893392,5.13902708 1.69559733,6.16722532 1.66320801,6.2824707 C1.61462402,6.45533878 0.856079102,9.49145508 0.813964844,9.66003418 C0.785888672,9.77242025 1.18123372,10.2190755 2,11 Z"],["stroke-width","3",1,"slds-illustration__stroke-primary"],["vector-effect","non-scaling-stroke","d","M0,126.5 L356,126.5","stroke-linecap","round"],["vector-effect","non-scaling-stroke","d","M362.5,126.5 L372.013149,126.5","stroke-linecap","round"],["vector-effect","non-scaling-stroke","d","M107.5,20 L107.5,28","stroke-linecap","round"],["vector-effect","non-scaling-stroke","d","M113,30.6568542 L118.656854,25","stroke-linecap","round"],["vector-effect","non-scaling-stroke","d","M37.5,32 L37.5,40","stroke-linecap","round"],["vector-effect","non-scaling-stroke","d","M44,42.6568542 L49.6568542,37","stroke-linecap","round"],["vector-effect","non-scaling-stroke","d","M25,42.6568542 L30.6568542,37","stroke-linecap","round","transform","translate(27.828427, 39.828427) scale(-1, 1) translate(-27.828427, -39.828427) "],["vector-effect","non-scaling-stroke","d","M71.5,0 L71.5,8","stroke-linecap","round"],["vector-effect","non-scaling-stroke","d","M79,10.6568542 L84.6568542,5","stroke-linecap","round"],["vector-effect","non-scaling-stroke","d","M58,10.6568542 L63.6568542,5","stroke-linecap","round","transform","translate(60.828427, 7.828427) scale(-1, 1) translate(-60.828427, -7.828427) "],["vector-effect","non-scaling-stroke","d","M59.5,68.5 L59.5,20 C59.5,13.372583 64.872583,8 71.5,8 C78.127417,8 83.5,13.372583 83.5,20 L83.5,48.5 L100.5,48.5 L100.5,35 C100.5,31.1340068 103.634007,28 107.5,28 C111.365993,28 114.5,31.1340068 114.5,35 L114.5,56.5 C114.5,59.8137085 111.813708,62.5 108.5,62.5 L83.5,62.5 L83.5,126.5 L59.5,126.5 L59.5,82.5 L36.5,82.5 C33.1862915,82.5 30.5,79.8137085 30.5,76.5 L30.5,47 C30.5,43.1340068 33.6340068,40 37.5,40 C41.3659932,40 44.5,43.1340068 44.5,47 L44.5,68.5 L59.5,68.5 Z"],["vector-effect","non-scaling-stroke","d","M77,88.5 L92.5,88.5 L92.5,81 C92.5,77.1340068 95.6340068,74 99.5,74 L99.5,74 C103.365993,74 106.5,77.1340068 106.5,81 L106.5,96.5 C106.5,99.8137085 103.813708,102.5 100.5,102.5 L77,102.5","stroke-linecap","round","stroke-linejoin","round",1,"slds-illustration__fill-secondary"],["transform","translate(429.000000, 242.000000)","stroke-linecap","round","stroke-width","3",1,"slds-illustration__stroke-secondary"],["vector-effect","non-scaling-stroke","d","M12.5,4 L12.5,50"],["vector-effect","non-scaling-stroke","stroke-linejoin","round","points","11 18.5 0.5 18.5 0.5 0"],["vector-effect","non-scaling-stroke","stroke-linejoin","round","points","14 25.5 24.5 25.5 24.5 8"],["vector-effect","non-scaling-stroke","stroke-linejoin","round","points","2.5 31 2.5 38.5 11 38.5"],["transform","translate(327.000000, 95.000000)"],["vector-effect","non-scaling-stroke","cx","64","cy","64","r","23",1,"slds-illustration__fill-secondary"],["vector-effect","non-scaling-stroke","stroke-width","3","stroke-linecap","round","stroke-linejoin","round","stroke-dasharray","135,1,1,18","transform","translate(64.000000, 64.000000) rotate(230.000000) translate(-64.000000, -64.000000) ","cx","64","cy","64","r","45",1,"slds-illustration__stroke-secondary"],["vector-effect","non-scaling-stroke","stroke-width","3","stroke-linecap","round","stroke-linejoin","round","stroke-dasharray","107,10","transform","translate(64.000000, 64.000000) rotate(150.000000) translate(-64.000000, -64.000000) ","cx","64","cy","64","r","33",1,"slds-illustration__stroke-secondary"],["transform","translate(41.000000, 41.000000)","stroke-width","3",1,"slds-illustration__stroke-primary"],["vector-effect","non-scaling-stroke","cx","23","cy","23","r","23"],[1,"slds-text-longform"],[1,"slds-text-heading_small"]],template:function(e,t){1&e&&(n.F$t(),n.TgZ(0,"div",0),n.O4$(),n.TgZ(1,"svg",1)(2,"g",2)(3,"g",3)(4,"g")(5,"g",4),n._UZ(6,"path",5)(7,"path",6)(8,"path",7)(9,"path",8),n.qZA(),n.TgZ(10,"g",9),n._UZ(11,"path",5)(12,"path",6)(13,"path",7)(14,"path",8),n.qZA(),n.TgZ(15,"g",10),n._UZ(16,"path",11)(17,"path",12)(18,"polyline",13)(19,"path",14)(20,"path",15)(21,"polyline",16),n.qZA(),n.TgZ(22,"g",17)(23,"g",18),n._UZ(24,"path",19),n.qZA(),n.TgZ(25,"g",20),n._UZ(26,"path",21),n.qZA(),n.TgZ(27,"g",22),n._UZ(28,"path",23)(29,"path",24)(30,"path",25)(31,"path",26)(32,"path",27)(33,"path",28)(34,"path",29)(35,"path",30)(36,"path",31)(37,"path",32)(38,"path",33)(39,"path",34),n.qZA()(),n.TgZ(40,"g",35)(41,"g"),n._UZ(42,"path",36)(43,"polyline",37)(44,"polyline",38)(45,"polyline",39),n.qZA()(),n.TgZ(46,"g",40)(47,"g"),n._UZ(48,"circle",41)(49,"circle",42)(50,"circle",43),n.qZA(),n.TgZ(51,"g",44),n._UZ(52,"circle",45),n.qZA()()()()()(),n.kcU(),n.TgZ(53,"div",46)(54,"h3",47),n.Hsn(55),n.qZA()()())},encapsulation:2})),SystemIllustrationNoData})()},4730:(e,t,s)=>{"use strict";s.d(t,{C:()=>l});var i=s(1180),n=s(2242);const o=["*"];let l=(()=>{var e;class SystemIllustrationNoRecords{}return e=SystemIllustrationNoRecords,(0,i.Z)(SystemIllustrationNoRecords,"ɵfac",(function(t){return new(t||e)})),(0,i.Z)(SystemIllustrationNoRecords,"ɵcmp",n.Xpm({type:e,selectors:[["system-illustration-no-records"]],ngContentSelectors:o,decls:50,vars:0,consts:[[1,"slds-illustration","slds-illustration_small"],["viewBox","0 0 454 272","aria-hidden","true","xmlns","http://www.w3.org/2000/svg",0,"xmlns","xlink","http://www.w3.org/1999/xlink",1,"slds-illustration__svg"],["fill","none","fill-rule","evenodd","transform","translate(-65 -74)"],["transform","translate(77 180)"],["vector-effect","non-scaling-stroke","stroke-linecap","round","stroke-linejoin","round","stroke-width","3","points","21 74 111.5 0 177.5 54",1,"slds-illustration__stroke-secondary"],["vector-effect","non-scaling-stroke","stroke-linecap","round","stroke-linejoin","round","stroke-width","3","points","160 37 181.5 19 249 74",1,"slds-illustration__stroke-secondary"],["vector-effect","non-scaling-stroke","d","M5.83623454,54.8238008 C6.47896445,52.7119739 7.52041887,52.7099477 8.16376546,54.8238008 L14,74 L0,74 L5.83623454,54.8238008 Z",1,"slds-illustration__fill-secondary"],["vector-effect","non-scaling-stroke","d","M14.9699006 61.8628727C15.5388088 59.729467 16.4627585 59.7353443 17.0300994 61.8628727L20 73 12 73 14.9699006 61.8628727zM239.734375 56.5589921C240.43336 54.4620359 241.506942 54.4857215 242.128332 56.5984458L246 69.7621171 237 64.7621171 239.734375 56.5589921z",1,"slds-illustration__fill-secondary"],["vector-effect","non-scaling-stroke","d","M247.921591,53.8514618 C248.51718,51.7243582 249.484912,51.7318303 250.077772,53.8491859 L254.357732,69.1347569 L242,75 L247.921591,53.8514618 Z","transform","matrix(-1 0 0 1 496.358 0)",1,"slds-illustration__fill-secondary"],["transform","matrix(-1 0 0 1 496 216)"],["vector-effect","non-scaling-stroke","d","M5.9215907,18.8514618 C6.51717971,16.7243582 7.48113835,16.7183512 8.0784093,18.8514618 L14,40 L0,40 L5.9215907,18.8514618 Z","transform","matrix(-1 0 0 1 14 0)",1,"slds-illustration__fill-secondary"],["vector-effect","non-scaling-stroke","d","M123.136984,25.2363093 C123.613615,23.448945 124.38595,23.4473111 124.863437,25.237887 L126.693756,32.1015868 L120,37 L123.136984,25.2363093 Z","transform","matrix(-1 0 0 1 246.694 0)",1,"slds-illustration__fill-secondary"],["vector-effect","non-scaling-stroke","stroke-linecap","round","stroke-linejoin","round","stroke-width","3","points","13 37 59.5 0 92.5 27",1,"slds-illustration__stroke-secondary"],["vector-effect","non-scaling-stroke","stroke-linecap","round","stroke-linejoin","round","stroke-width","3","points","83 17 92.5 9 127 38",1,"slds-illustration__stroke-secondary"],["stroke-linecap","round","stroke-width","3","transform","translate(67 253)",1,"slds-illustration__stroke-primary"],["vector-effect","non-scaling-stroke","d","M0 1.5L450 1.5M284 2L419 61M282 2L65 91M443 1.5L449 1.5"],["transform","translate(73 163)"],["vector-effect","non-scaling-stroke","fill","#FFF","points","20.906 .73 24.63 2.34 27.093 9.155 11.046 19.877 .131 19.877","transform","translate(80 22)"],["stroke-linecap","round","stroke-width","3",1,"slds-illustration__stroke-secondary"],["vector-effect","non-scaling-stroke","d","M44,17.5 L63,17.5 C62.2789714,12.0723971 64.081543,7.53186978 68.4077148,3.87841797 C73.3754883,-0.195556641 79.2734375,0.717773438 82.440918,2.12353516 C85.6083984,3.52929687 87.9606934,5.46069336 89.5913086,9.10524041 C90.2822266,10.6397351 90.7517904,11.9379883 91,13"],["vector-effect","non-scaling-stroke","d","M83 20.5C84.0558268 16.8461914 86.2227376 14.4572754 89.5007324 13.333252 94.4177246 11.6472168 99.0800781 13.8925781 100.942383 16.1518555 102.804687 18.4111328 103.39502 20.2260742 103.746582 22.1201172 103.980957 23.3828125 104.06543 24.8427734 104 26.5 108.141764 26.3313802 110.918945 27.1647135 112.331543 29 114.040039 31.1936035 114.215332 33.817627 113.593018 35.75 112.970703 37.682373 110.894531 40.5 107 40.5L28 40.5M18 27.5L83.0004985 27.5M0 27.5L8 27.5"],["stroke-linecap","round","stroke-width","3","transform","translate(292 139)",1,"slds-illustration__stroke-secondary"],["transform","translate(204.5 228.5)"],["vector-effect","non-scaling-stroke","d","M18.9209988,1.95433401 L33.259296,51.443436 C33.5666778,52.5043744 32.9557995,53.613617 31.8948612,53.9209988 C31.7139843,53.9734036 31.5266126,54 31.3382972,54 L2.6617028,54 C1.5571333,54 0.661702805,53.1045695 0.661702805,52 C0.661702805,51.8116846 0.688299176,51.6243129 0.74070397,51.443436 L15.0790012,1.95433401 C15.386383,0.893395645 16.4956256,0.282517358 17.556564,0.589899164 C18.2152102,0.780726338 18.7301717,1.29568777 18.9209988,1.95433401 Z",1,"slds-illustration__fill-secondary"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","3",1,"slds-illustration__stroke-primary"],["points","17 .324 34 54 0 54"],["vector-effect","non-scaling-stroke","d","M17,6.32394366 C17,42.1378022 17,60.4711356 17,61.3239437 C17,60.4711356 17,42.1378022 17,6.32394366 Z"],["vector-effect","non-scaling-stroke","d","M17,29.3239437 C22.3333333,35.7851611 25,39.1184944 25,39.3239437 C25,39.1184944 22.3333333,35.7851611 17,29.3239437 Z","transform","matrix(-1 0 0 1 42 0)"],["transform","translate(439.5 227.5)"],["vector-effect","non-scaling-stroke","points","17 -4.676 34 54 0 54"],["vector-effect","non-scaling-stroke","d","M17,1.32394366 C17,40.3936076 17,60.3936076 17,61.3239437 C17,60.3936076 17,40.3936076 17,1.32394366 Z"],["transform","translate(141.852 213.5)"],["vector-effect","non-scaling-stroke","d","M25.6478873,0 L50.8997802,86.4391718 C51.2095171,87.4994249 50.6011034,88.6100213 49.5408502,88.9197582 C49.3586621,88.9729817 49.1698252,89 48.980022,89 L2.31575269,89 C1.21118319,89 0.315752686,88.1045695 0.315752686,87 C0.315752686,86.8101968 0.342770948,86.6213599 0.395994453,86.4391718 L25.6478873,0 Z","transform","translate(1)",1,"slds-illustration__fill-secondary"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","3","transform","translate(0 2)",1,"slds-illustration__stroke-primary"],["vector-effect","non-scaling-stroke","points","26.648 0 52.648 87 .648 87"],["vector-effect","non-scaling-stroke","d","M26.6478873 6C26.6478873 64.4972948 26.6478873 94.4972948 26.6478873 96 26.6478873 94.4972948 26.6478873 64.4972948 26.6478873 6zM15.6478873 42C22.9812207 49.078692 26.6478873 52.7453587 26.6478873 53 26.6478873 52.7453587 22.9812207 49.078692 15.6478873 42zM27.6478873 68C36.9812207 57.078692 41.6478873 51.7453587 41.6478873 52 41.6478873 51.7453587 36.9812207 57.078692 27.6478873 68z"],["transform","translate(168 57)"],["vector-effect","non-scaling-stroke","cx","64","cy","64","r","23",1,"slds-illustration__fill-secondary"],["vector-effect","non-scaling-stroke","stroke-dasharray","135 1 1 18","stroke-linecap","round","stroke-linejoin","round","stroke-width","3","d","M64,109 C88.8528137,109 109,88.8528137 109,64 C109,39.1471863 88.8528137,19 64,19 C39.1471863,19 19,39.1471863 19,64 C19,88.8528137 39.1471863,109 64,109 Z","transform","rotate(-130 64 64)",1,"slds-illustration__stroke-secondary"],["vector-effect","non-scaling-stroke","stroke-dasharray","107 10","stroke-linecap","round","stroke-linejoin","round","stroke-width","3","d","M64,97 C82.2253967,97 97,82.2253967 97,64 C97,45.7746033 82.2253967,31 64,31 C45.7746033,31 31,45.7746033 31,64 C31,82.2253967 45.7746033,97 64,97 Z","transform","rotate(150 64 64)",1,"slds-illustration__stroke-secondary"],["stroke-width","3","transform","translate(41 41)",1,"slds-illustration__stroke-primary"],["vector-effect","non-scaling-stroke","cx","23","cy","23","r","23"],[1,"slds-text-longform"],[1,"slds-text-heading_small"]],template:function(e,t){1&e&&(n.F$t(),n.TgZ(0,"div",0),n.O4$(),n.TgZ(1,"svg",1)(2,"g",2)(3,"g",3),n._UZ(4,"polyline",4)(5,"polyline",5)(6,"path",6)(7,"path",7)(8,"path",8),n.qZA(),n.TgZ(9,"g",9),n._UZ(10,"path",10)(11,"path",11)(12,"polyline",12)(13,"polyline",13),n.qZA(),n.TgZ(14,"g",14),n._UZ(15,"path",15),n.qZA(),n.TgZ(16,"g",16),n._UZ(17,"polygon",17),n.TgZ(18,"g",18),n._UZ(19,"path",19)(20,"path",20),n.qZA()(),n.TgZ(21,"g",21),n._UZ(22,"path",19)(23,"path",20),n.qZA(),n.TgZ(24,"g",22),n._UZ(25,"path",23),n.TgZ(26,"g",24),n._UZ(27,"polygon",25)(28,"path",26)(29,"path",27),n.qZA()(),n.TgZ(30,"g",28),n._UZ(31,"path",23),n.TgZ(32,"g",24),n._UZ(33,"polygon",29)(34,"path",30)(35,"path",27),n.qZA()(),n.TgZ(36,"g",31),n._UZ(37,"path",32),n.TgZ(38,"g",33),n._UZ(39,"polygon",34)(40,"path",35),n.qZA()(),n.TgZ(41,"g",36),n._UZ(42,"circle",37)(43,"path",38)(44,"path",39),n.TgZ(45,"g",40),n._UZ(46,"circle",41),n.qZA()()()(),n.kcU(),n.TgZ(47,"div",42)(48,"h3",43),n.Hsn(49),n.qZA()()())},encapsulation:2})),SystemIllustrationNoRecords})()},9016:(e,t,s)=>{"use strict";s.d(t,{H:()=>a});var i=s(1180),n=s(2242),o=s(5329),l=s(3463);let a=(()=>{var e;class SystemIllustrationNoTask{constructor(e){(0,i.Z)(this,"language",void 0),this.language=e}}return e=SystemIllustrationNoTask,(0,i.Z)(SystemIllustrationNoTask,"ɵfac",(function(t){return new(t||e)(n.Y36(o.d))})),(0,i.Z)(SystemIllustrationNoTask,"ɵcmp",n.Xpm({type:e,selectors:[["system-illustration-no-task"]],decls:67,vars:0,consts:[[1,"slds-illustration","slds-illustration_small"],["viewBox","0 0 454 182","aria-hidden","true","xmlns","http://www.w3.org/2000/svg",0,"xmlns","xlink","http://www.w3.org/1999/xlink",1,"slds-illustration__svg"],["stroke","none","stroke-width","1","fill","none","fill-rule","evenodd"],["transform","translate(-73.000000, -110.000000)"],["transform","translate(75.000000, 240.000000)"],["vector-effect","non-scaling-stroke","stroke-width","3","stroke-linecap","round","stroke-linejoin","round","transform","translate(375.250000, 18.000000) scale(-1, 1) translate(-375.250000, -18.000000) ","points","335.5 36 380 0 415 27",1,"slds-illustration__stroke-secondary"],["vector-effect","non-scaling-stroke","stroke-width","3","stroke-linecap","round","stroke-linejoin","round","transform","translate(324.500000, 22.500000) scale(-1, 1) translate(-324.500000, -22.500000) ","points","303 18 313.5 9 346 36",1,"slds-illustration__stroke-secondary"],["vector-effect","non-scaling-stroke","d","M0,36.5 L450,36.5","stroke-width","3","stroke-linecap","round",1,"slds-illustration__stroke-secondary"],["vector-effect","non-scaling-stroke","d","M406.04276,9.26543454 L413,32.7461193 L400.495829,23.8448556 L404.113561,9.30802252 C404.246938,8.772085 404.789525,8.44574518 405.325462,8.57912213 C405.669253,8.66468028 405.942114,8.9257539 406.04276,9.26543454 Z",1,"slds-illustration__fill-secondary"],["vector-effect","non-scaling-stroke","d","M311.962964,11.4391572 L318,33 L306.770218,23.1063642 L310.037036,11.4391572 C310.185948,10.9073269 310.7378,10.5969106 311.26963,10.7458231 C311.605963,10.8399963 311.868791,11.1028246 311.962964,11.4391572 Z","transform","translate(312.385109, 21.626882) scale(-1, 1) translate(-312.385109, -21.626882) ",1,"slds-illustration__fill-secondary"],["transform","translate(83.000000, 173.000000)","stroke-linecap","round","stroke-width","3",1,"slds-illustration__stroke-secondary"],["vector-effect","non-scaling-stroke","d","M44,17.5 L63,17.5 C62.2789714,12.0723971 64.081543,7.53186978 68.4077148,3.87841797 C73.3754883,-0.195556641 79.2734375,0.717773438 82.440918,2.12353516 C85.6083984,3.52929687 87.9606934,5.46069336 89.5913086,9.10524041 C90.2822266,10.6397351 90.7517904,11.9379883 91,13"],["vector-effect","non-scaling-stroke","d","M83,20.5 C84.0558268,16.8461914 86.2227376,14.4572754 89.5007324,13.333252 C94.4177246,11.6472168 99.0800781,13.8925781 100.942383,16.1518555 C102.804687,18.4111328 103.39502,20.2260742 103.746582,22.1201172 C103.980957,23.3828125 104.06543,24.8427734 104,26.5 C108.141764,26.3313802 110.918945,27.1647135 112.331543,29 C114.040039,31.1936035 114.215332,33.817627 113.593018,35.75 C112.970703,37.682373 110.894531,40.5 107,40.5 L28,40.5"],["vector-effect","non-scaling-stroke","d","M18,27.5 L83.0004985,27.5"],["vector-effect","non-scaling-stroke","d","M0,27.5 L8,27.5"],["transform","translate(274.000000, 111.000000)","stroke-linecap","round","stroke-width","3",1,"slds-illustration__stroke-secondary"],["transform","translate(115.000000, 191.000000)"],["transform","translate(148.000000, 32.000000) scale(-1, 1) translate(-148.000000, -32.000000) translate(116.000000, 0.000000)",1,"slds-illustration__fill-secondary"],["vector-effect","non-scaling-stroke","d","M25,53 C25,55.76 22.76125,58 20,58 C17.24,58 15,55.76 15,53 C15,50.24 17.24,48 20,48 C22.76125,48 25,50.24 25,53 Z"],["vector-effect","non-scaling-stroke","d","M8,58 C6.34130214,58 5,59.344354 5,61 C5,62.655646 6.34130214,64 8,64 C9.65717192,64 11,62.655646 11,61 C11,59.344354 9.65717192,58 8,58"],["vector-effect","non-scaling-stroke","d","M43.2932416,0 C35.2856577,0 28.3128049,4.40586521 24.6382957,10.9184604 C22.0889739,9.11222859 18.9814709,8.03886643 15.6213524,8.03886643 C6.99160591,8.03886643 0,15.0367986 0,23.6690948 C0,32.302472 6.99160591,39.3004042 15.6213524,39.3004042 C15.8077805,39.3004042 15.9920023,39.2777047 16.1806367,39.2712191 C19.0013272,43.3344299 23.6918145,46 29.011083,46 C32.7848734,46 36.2475826,44.6596485 38.9469293,42.4296926 C40.3512074,42.7193815 41.8051261,42.8739543 43.2932416,42.8739543 C55.1275661,42.8739543 64,33.4569038 64,21.6185732 C64,9.77916158 55.1275661,0 43.2932416,0 Z"],["transform","translate(0.000000, 18.000000)"],["vector-effect","non-scaling-stroke","d","M90.5057553,53.0538038 C90.5057553,53.0538038 116.215483,58.0701972 145.433002,58.0701972 C174.650521,58.0701972 204.505755,53.0538038 204.505755,53.0538038 C204.505755,53.0538038 192.222862,60.6378663 185.905056,63.0258453 C179.58725,65.4138243 166.637272,67.3671811 166.637272,67.3671811 C166.637272,67.3671811 153.865271,70.7987363 147.505755,70.9374424 C141.14624,71.0761485 132.54218,68.1108222 132.54218,68.1108222 L106.786672,63.0258453 L90.5057553,53.0538038 Z",1,"slds-illustration__fill-primary"],["vector-effect","non-scaling-stroke","d","M84.8198266,43.3368404 C84.8198266,43.3368404 99.4457512,70.425365 147.915957,70.425365 C196.386164,70.425365 214.819827,43.3368404 214.819827,43.3368404","stroke-width","4","stroke-linecap","round","stroke-linejoin","round",1,"slds-illustration__stroke-primary"],["vector-effect","non-scaling-stroke","d","M73,49.5 L88,49.5","stroke-width","3","stroke-linecap","round",1,"slds-illustration__stroke-primary"],["vector-effect","non-scaling-stroke","d","M211,49.5 L226,49.5","stroke-width","3","stroke-linecap","round",1,"slds-illustration__stroke-primary"],["vector-effect","non-scaling-stroke","d","M142.74548,0 L153.650377,2.22044605e-16 C154.478804,8.05656105e-16 155.150377,0.671572875 155.150377,1.5 L155.150377,2.98261094 C155.150377,3.11136765 155.100706,3.2351613 155.01171,3.32820944 L146.234757,12.5047677 L155.209827,12.5047677 C156.038254,12.5047677 156.709827,13.1763405 156.709827,14.0047677 L156.709827,14.4270108 C156.709827,15.2554379 156.038254,15.9270108 155.209827,15.9270108 L141.888626,15.9270108 C141.060199,15.9270108 140.388626,15.2554379 140.388626,14.4270108 L140.388626,12.8248256 C140.388626,12.696109 140.438265,12.5723507 140.527212,12.4793109 L149.20663,3.40051458 L142.74548,3.40051458 C141.917053,3.40051458 141.24548,2.7289417 141.24548,1.90051458 L141.24548,1.5 C141.24548,0.671572875 141.917053,1.52179594e-16 142.74548,0 Z",1,"slds-illustration__fill-primary"],["vector-effect","non-scaling-stroke","d","M20,81.5 L390,81.5","stroke-width","3","stroke-linecap","round",1,"slds-illustration__stroke-primary"],["vector-effect","non-scaling-stroke","d","M0,81.5 L12,81.5","stroke-width","3","stroke-linecap","round",1,"slds-illustration__stroke-primary"],["transform","translate(175.500000, 153.000000)"],["transform","translate(0.000000, 7.000000)",1,"slds-illustration__fill-secondary"],["vector-effect","non-scaling-stroke","d","M19.3444016,2.17529966 L32.8957957,84.445825 C33.0753185,85.5357082 32.3373256,86.5647651 31.2474424,86.7442879 C31.1399954,86.7619863 31.0312825,86.7708798 30.9223876,86.7708798 L2.12566435,86.7708798 C1.02109485,86.7708798 0.125664347,85.8754493 0.125664347,84.7708798 C0.125664347,84.6486417 0.136870913,84.526661 0.159143349,84.4064691 L15.4044726,2.13594377 C15.6057311,1.04986421 16.6493247,0.332574998 17.7354043,0.533833473 C18.5639901,0.687376483 19.2074411,1.34381197 19.3444016,2.17529966 Z"],["stroke-linecap","round","stroke-width","3",1,"slds-illustration__stroke-primary"],["vector-effect","non-scaling-stroke","stroke-linejoin","round","points","17 0.709590879 34 94.5 -1.82254212e-12 94.5"],["vector-effect","non-scaling-stroke","d","M17,8.09449405 C17,92.0999502 17,135.036706 17,136.904762 C17,135.036706 17,92.0999502 17,8.09449405 Z"],["vector-effect","non-scaling-stroke","d","M17,64.2334004 C24.3333333,71.7198767 28,75.6881307 28,76.1381623 C28,75.6881307 24.3333333,71.7198767 17,64.2334004 Z","stroke-linejoin","round","transform","translate(22.500000, 70.185781) scale(-1, 1) translate(-22.500000, -70.185781) "],["vector-effect","non-scaling-stroke","d","M8,50.2334004 C14,57.05321 17,60.6881307 17,61.1381623 C17,60.6881307 14,57.05321 8,50.2334004 Z","stroke-linejoin","round"],["transform","translate(307.500000, 135.000000)"],["transform","translate(0.000000, 2.000000)",1,"slds-illustration__fill-secondary"],["vector-effect","non-scaling-stroke","d","M29.524032,0.669921875 L55.6419593,108.305728 C55.9024257,109.379148 55.2433964,110.460477 54.1699762,110.720943 C54.0155692,110.75841 53.8572476,110.777344 53.69836,110.777344 L2.40272523,110.777344 C1.29815573,110.777344 0.402725233,109.881913 0.402725233,108.777344 C0.402725233,108.601258 0.42597945,108.425943 0.471884777,108.255946 L29.524032,0.669921875 Z"],["vector-effect","non-scaling-stroke","stroke-linejoin","round","points","29 0 56.572466 112.5 0 112.5"],["vector-effect","non-scaling-stroke","d","M29,6.09449405 C29,103.433283 29,153.036706 29,154.904762 C29,153.036706 29,103.433283 29,6.09449405 Z"],["vector-effect","non-scaling-stroke","d","M29,74.2334004 C41,87.05321 47,93.6881307 47,94.1381623 C47,93.6881307 41,87.05321 29,74.2334004 Z","stroke-linejoin","round","transform","translate(38.000000, 84.185781) scale(-1, 1) translate(-38.000000, -84.185781) "],["vector-effect","non-scaling-stroke","d","M14,61.2334004 C24,72.7198767 29,78.6881307 29,79.1381623 C29,78.6881307 24,72.7198767 14,61.2334004 Z","stroke-linejoin","round"],["vector-effect","non-scaling-stroke","d","M29,48.2334004 C36.3333333,57.05321 40,61.6881307 40,62.1381623 C40,61.6881307 36.3333333,57.05321 29,48.2334004 Z","stroke-linejoin","round","transform","translate(34.500000, 55.185781) scale(-1, 1) translate(-34.500000, -55.185781) "],["transform","translate(347.500000, 166.000000)"],["transform","translate(0.000000, 4.000000)",1,"slds-illustration__fill-secondary"],["vector-effect","non-scaling-stroke","stroke-linejoin","round","points","17 0.709590879 34 91.5 -1.82254212e-12 91.5"],["vector-effect","non-scaling-stroke","d","M17,5.09449405 C17,83.0999502 17,123.036706 17,124.904762 C17,123.036706 17,83.0999502 17,5.09449405 Z"],["vector-effect","non-scaling-stroke","d","M17,61.2334004 C24.3333333,68.7198767 28,72.6881307 28,73.1381623 C28,72.6881307 24.3333333,68.7198767 17,61.2334004 Z","stroke-linejoin","round","transform","translate(22.500000, 67.185781) scale(-1, 1) translate(-22.500000, -67.185781) "],["transform","translate(392.000000, 184.000000)","stroke-linecap","round","stroke-width","3",1,"slds-illustration__stroke-secondary"],["transform","translate(31.713442, 25.088326) rotate(-15.000000) translate(-31.713442, -25.088326) translate(4.713442, 6.588326)"],["vector-effect","non-scaling-stroke","d","M31.0360707,3.43528591 C31.0360707,3.43528591 40.5802283,0.671893051 42.6488424,10.6908663","transform","translate(36.842457, 6.888440) rotate(41.000000) translate(-36.842457, -6.888440) "],["vector-effect","non-scaling-stroke","d","M40.4282002,10.1797377 C40.4282002,10.1797377 49.9723578,7.4163448 52.0409719,17.435318","transform","translate(46.234586, 13.632892) scale(-1, 1) rotate(-41.000000) translate(-46.234586, -13.632892) "],["vector-effect","non-scaling-stroke","d","M0.730284783,29.5865514 C0.730284783,29.5865514 10.2744424,26.8231586 12.3430565,36.8421318"],["vector-effect","non-scaling-stroke","d","M12.7302848,29.5865514 C12.7302848,29.5865514 22.2744424,26.8231586 24.3430565,36.8421318","transform","translate(18.536671, 33.039705) scale(-1, 1) translate(-18.536671, -33.039705) "],[1,"slds-text-longform"],[1,"slds-text-heading--small"],["label","LBL_NO_ACTIVITIES"]],template:function(e,t){1&e&&(n.TgZ(0,"div",0),n.O4$(),n.TgZ(1,"svg",1)(2,"g",2)(3,"g",3)(4,"g")(5,"g",4),n._UZ(6,"polyline",5)(7,"polyline",6)(8,"path",7)(9,"path",8)(10,"path",9),n.qZA(),n.TgZ(11,"g",10),n._UZ(12,"path",11)(13,"path",12)(14,"path",13)(15,"path",14),n.qZA(),n.TgZ(16,"g",15),n._UZ(17,"path",11)(18,"path",12)(19,"path",13)(20,"path",14),n.qZA(),n.TgZ(21,"g",16)(22,"g",17),n._UZ(23,"path",18)(24,"path",19)(25,"path",20),n.qZA(),n.TgZ(26,"g",21),n._UZ(27,"path",22)(28,"path",23)(29,"path",24)(30,"path",25)(31,"path",26)(32,"path",27)(33,"path",28),n.qZA()(),n.TgZ(34,"g",29)(35,"g",30),n._UZ(36,"path",31),n.qZA(),n.TgZ(37,"g",32),n._UZ(38,"polygon",33)(39,"path",34)(40,"path",35)(41,"path",36),n.qZA()(),n.TgZ(42,"g",37)(43,"g",38),n._UZ(44,"path",39),n.qZA(),n.TgZ(45,"g",32),n._UZ(46,"polygon",40)(47,"path",41)(48,"path",42)(49,"path",43)(50,"path",44),n.qZA()(),n.TgZ(51,"g",45)(52,"g",46),n._UZ(53,"path",31),n.qZA(),n.TgZ(54,"g",32),n._UZ(55,"polygon",47)(56,"path",48)(57,"path",49),n.qZA()(),n.TgZ(58,"g",50)(59,"g",51),n._UZ(60,"path",52)(61,"path",53)(62,"path",54)(63,"path",55),n.qZA()()()()()(),n.kcU(),n.TgZ(64,"div",56)(65,"h3",57),n._UZ(66,"system-label",58),n.qZA()()())},dependencies:[l._],encapsulation:2})),SystemIllustrationNoTask})()},9574:(e,t,s)=>{"use strict";s.d(t,{k:()=>l});var i=s(1180),n=s(2242);const o=["*"];let l=(()=>{var e;class SystemIllustrationPageNotAvailable{}return e=SystemIllustrationPageNotAvailable,(0,i.Z)(SystemIllustrationPageNotAvailable,"ɵfac",(function(t){return new(t||e)})),(0,i.Z)(SystemIllustrationPageNotAvailable,"ɵcmp",n.Xpm({type:e,selectors:[["system-illustration-page-not-available"]],ngContentSelectors:o,decls:81,vars:0,consts:[[1,"slds-illustration","slds-illustration_small"],["viewBox","0 0 470 229","aria-hidden","true","xmlns","http://www.w3.org/2000/svg",1,"slds-illustration__svg"],["stroke","none","stroke-width","1","fill","none","fill-rule","evenodd"],["transform","translate(-65.000000, -89.000000)"],["transform","translate(67.000000, 266.000000)"],["vector-effect","non-scaling-stroke","d","M16,36.5 L466,36.5","stroke-width","3","stroke-linecap","round",1,"slds-illustration__stroke-secondary"],["vector-effect","non-scaling-stroke","d","M0,36.5 L6,36.5","stroke-width","3","stroke-linecap","round",1,"slds-illustration__stroke-secondary"],["vector-effect","non-scaling-stroke","stroke-width","3","stroke-linecap","round","stroke-linejoin","round","points","43 36 87.5 0 121.5 27",1,"slds-illustration__stroke-secondary"],["vector-effect","non-scaling-stroke","stroke-width","3","stroke-linecap","round","stroke-linejoin","round","points","111 17 121.5 9 153 36",1,"slds-illustration__stroke-secondary"],["vector-effect","non-scaling-stroke","d","M50.962964,14.4391572 L57,36 L45.770218,26.1063642 L49.037036,14.4391572 C49.1859485,13.9073269 49.7377996,13.5969106 50.2696299,13.7458231 C50.6059625,13.8399963 50.8687909,14.1028246 50.962964,14.4391572 Z","transform","translate(51.385109, 24.626882) scale(-1, 1) translate(-51.385109, -24.626882) ",1,"slds-illustration__fill-secondary"],["transform","translate(451.500000, 238.500000)"],["fill","#FFFFFF"],["vector-effect","non-scaling-stroke","d","M18.9209988,1.95433401 L33.259296,51.443436 C33.5666778,52.5043744 32.9557995,53.613617 31.8948612,53.9209988 C31.7139843,53.9734036 31.5266126,54 31.3382972,54 L2.6617028,54 C1.5571333,54 0.661702805,53.1045695 0.661702805,52 C0.661702805,51.8116846 0.688299176,51.6243129 0.74070397,51.443436 L15.0790012,1.95433401 C15.386383,0.893395645 16.4956256,0.282517358 17.556564,0.589899164 C18.2152102,0.780726338 18.7301717,1.29568777 18.9209988,1.95433401 Z"],["stroke-linecap","round","stroke-width","3",1,"slds-illustration__stroke-secondary"],["vector-effect","non-scaling-stroke","stroke-linejoin","round","points","17 0.323943662 34 54 -1.81721305e-12 54"],["vector-effect","non-scaling-stroke","d","M17,4.6953125 C17,43.0456294 17,62.6471919 17,63.5 C17,62.6471919 17,43.0456294 17,4.6953125 Z"],["vector-effect","non-scaling-stroke","d","M17,29.3239437 C22.3333333,35.7851611 25,39.1184944 25,39.3239437 C25,39.1184944 22.3333333,35.7851611 17,29.3239437 Z","stroke-linejoin","round","transform","translate(21.000000, 34.323944) scale(-1, 1) translate(-21.000000, -34.323944) "],["transform","translate(408.000000, 205.500000)"],["transform","translate(1.000000, 0.000000)","fill","#FFFFFF"],["vector-effect","non-scaling-stroke","d","M25.6478873,0 L50.879042,84.4273253 C51.1953215,85.4856452 50.5937789,86.5999782 49.535459,86.9162577 C49.3496374,86.9717906 49.1567264,87 48.9627843,87 L2.33299037,87 C1.22842087,87 0.332990367,86.1045695 0.332990367,85 C0.332990367,84.8060578 0.361199757,84.6131469 0.416732643,84.4273253 L25.6478873,0 Z"],["vector-effect","non-scaling-stroke","stroke-linejoin","round","points","26.5 0 52.5 87 0.5 87"],["vector-effect","non-scaling-stroke","d","M26.5,3.58642578 C26.5,64.0261034 26.5,94.9972948 26.5,96.5 C26.5,94.9972948 26.5,64.0261034 26.5,3.58642578 Z"],["vector-effect","non-scaling-stroke","d","M15.6478873,42 C22.9812207,49.078692 26.6478873,52.7453587 26.6478873,53 C26.6478873,52.7453587 22.9812207,49.078692 15.6478873,42 Z","stroke-linejoin","round"],["vector-effect","non-scaling-stroke","d","M27.6478873,68 C36.9812207,57.078692 41.6478873,51.7453587 41.6478873,52 C41.6478873,51.7453587 36.9812207,57.078692 27.6478873,68 Z","stroke-linejoin","round"],["transform","translate(323.317280, 164.835938) rotate(-45.000000) translate(-323.317280, -164.835938) translate(242.317280, 130.835938)"],["transform","translate(5.000000, 44.000000)","fill","#FFFFFF"],["vector-effect","non-scaling-stroke","d","M4.18947979,0.995611783 L0.115234375,11.9555255 C12.0957996,19.4577143 18.3338849,23.301537 18.8294904,23.4869936 C19.1669204,23.6132606 21.7612542,24.0399819 26.9701953,23.7763273 C28.5980425,23.6939326 31.6346656,23.3623612 36.0800647,22.7816131 C40.0461992,21.6828201 43.0275796,20.7161876 45.0242059,19.8817158 C47.0208321,19.0472439 50.3465588,17.377878 55.0013859,14.8736182 L47.5277368,3.21878589 L4.18947979,0.995611783 Z"],["transform","translate(1.000000, 0.000000)",1,"slds-illustration__fill-secondary"],["stroke-width","3","stroke-linecap","round","stroke-linejoin","round","x","0.973240311","y","10.995821","width","11.5","height","12",1,"slds-illustration__stroke-primary"],["vector-effect","non-scaling-stroke","d","M4.77755146,50.2284782 C13.286202,52.6362568 21.480957,53.7936597 29.3618164,53.7006867 C37.2426758,53.6077138 44.7765582,51.7400968 51.9634637,48.0978356 C50.0751252,44.4670451 48.7826758,41.7898449 48.0861155,40.0662351 C47.3895551,38.3426252 46.5236255,35.6790055 45.4883267,32.075376 L45.2946319,0.293204959 L12.5695367,0.148192827 L12.5726441,32.0166806 C11.5738974,36.4623212 10.6196945,39.7477667 9.71003558,41.8730172 C8.80037666,43.9982676 7.15621528,46.7834213 4.77755146,50.2284782 Z"],["vector-effect","non-scaling-stroke","d","M45.4341011,10.7997716 L160.934101,10.7997716 L160.934101,29.2075859 C138.796894,24.9149057 121.296894,22.8695992 108.434101,23.0716664 C103.947529,23.0716664 96.9638862,23.0716664 87.4831733,23.0716664 L45.4341011,23.0716664 L45.4341011,10.7997716 Z"],["transform","translate(0.000000, 0.000000)"],["vector-effect","non-scaling-stroke","d","M13.5015145,4.53816197e-13 L46.505417,4.53816197e-13 L46.505417,24.0516129 C46.0805407,29.6108858 47.016166,35.1227138 49.312293,40.5870968 C51.6084201,46.0514798 55.1733269,52.064383 60.0070135,58.6258065 C49.5057718,64.6387097 39.5045892,67.6451613 30.0034658,67.6451613 C20.5023423,67.6451613 10.5011597,64.6387097 -8.20017976e-05,58.6258065 C5.7540776,50.5948062 9.47046374,44.581903 11.1490764,40.5870968 C12.8276891,36.5922906 13.6118351,31.0804626 13.5015145,24.0516129 L13.5015145,4.53816197e-13 Z","stroke-width","3","stroke-linecap","round","stroke-linejoin","round",1,"slds-illustration__stroke-primary"],["stroke-width","3","stroke-linecap","round","stroke-linejoin","round","x","1.97324031","y","10.995821","width","11.5","height","12",1,"slds-illustration__stroke-primary"],["vector-effect","non-scaling-stroke","d","M46.4341011,10.7997716 L161.934101,10.7997716 L161.934101,29.2075859 C139.796894,24.9149057 122.296894,22.8695992 109.434101,23.0716664 C104.947529,23.0716664 97.9638862,23.0716664 88.4831733,23.0716664 L46.4341011,23.0716664 L46.4341011,10.7997716 Z","stroke-width","3","stroke-linecap","round","stroke-linejoin","round",1,"slds-illustration__stroke-primary"],["vector-effect","non-scaling-stroke","points","66 10.5225806 102 10.5225806 102.162282 23.0225806 66.0542614 22.8973803",1,"slds-illustration__fill-primary"],["transform","translate(124.000000, 219.518658)"],["transform","translate(117.000000, 0.000000)","fill","#FFFFFF"],["vector-effect","non-scaling-stroke","points","0.115234375 0.823139211 0.115234375 6.95790484 131.128906 21.124897 131.128906 14.975483"],["transform","translate(95.000000, 4.000000)",1,"slds-illustration__fill-secondary"],["vector-effect","non-scaling-stroke","points","21.9667969 0.213764211 152.662109 14.9813423 152.662109 65.9637642 160.867188 80.1434517 174.628906 92.3211861 0.63671875 92.3211861 13.7480469 80.1434517 21.9667969 61.2977486"],["vector-effect","non-scaling-stroke","d","M118.5,15.4813423 L118.5,61.4813423 C117.921224,71.8381104 115.333984,79.318309 110.738281,83.921938 C106.142578,88.525567 100.896484,92.8787018 95,96.9813423 L271,96.9813423 C264.389323,92.6555667 259.341797,87.3824891 255.857422,81.1621094 C252.373047,74.9417297 250.253906,67.5264029 249.5,58.916129 L249.5,0.481342336 L118.5,15.4813423 Z","stroke-width","3","stroke-linecap","round","stroke-linejoin","round","transform","translate(183.000000, 48.731342) scale(-1, 1) translate(-183.000000, -48.731342) ",1,"slds-illustration__stroke-primary"],["vector-effect","non-scaling-stroke","d","M271.928751,76.7784845 L280,97 L262,97 L270.071249,76.7784845 C270.275982,76.2655493 270.857768,76.0157027 271.370703,76.2204365 C271.625359,76.3220801 271.827108,76.5238291 271.928751,76.7784845 Z",1,"slds-illustration__fill-primary"],["vector-effect","non-scaling-stroke","d","M282.428751,84.2946136 L287.5,97 L275.5,97 L280.571249,84.2946136 C280.775982,83.7816784 281.357768,83.5318318 281.870703,83.7365656 C282.125359,83.8382092 282.327108,84.0399581 282.428751,84.2946136 Z",1,"slds-illustration__fill-primary"],["vector-effect","non-scaling-stroke","d","M90.4287513,76.7784845 L98.5,97 L80.5,97 L88.5712487,76.7784845 C88.7759825,76.2655493 89.3577681,76.0157027 89.8707033,76.2204365 C90.1253588,76.3220801 90.3271077,76.5238291 90.4287513,76.7784845 Z","transform","translate(89.500000, 86.998788) scale(-1, 1) translate(-89.500000, -86.998788) ",1,"slds-illustration__fill-primary"],["vector-effect","non-scaling-stroke","d","M76.9287513,84.2946136 L82,97 L70,97 L75.0712487,84.2946136 C75.2759825,83.7816784 75.8577681,83.5318318 76.3707033,83.7365656 C76.6253588,83.8382092 76.8271077,84.0399581 76.9287513,84.2946136 Z","transform","translate(76.000000, 90.756853) scale(-1, 1) translate(-76.000000, -90.756853) ",1,"slds-illustration__fill-primary"],["vector-effect","non-scaling-stroke","d","M20,96.9813423 L370,96.9813423","stroke-width","3","stroke-linecap","round","stroke-linejoin","round",1,"slds-illustration__stroke-primary"],["vector-effect","non-scaling-stroke","d","M0,96.9813423 L12,96.9813423","stroke-width","3","stroke-linecap","round","stroke-linejoin","round",1,"slds-illustration__stroke-primary"],["vector-effect","non-scaling-stroke","d","M226.5,14.4813423 L226.5,40.4813423 C226.854167,55.9423134 234.6875,67.6089801 250,75.4813423","stroke-width","3","stroke-linecap","round","stroke-linejoin","round",1,"slds-illustration__stroke-primary"],["vector-effect","non-scaling-stroke","d","M212.5,12.4813423 L212.5,51.4813423 C211.329427,75.4461105 226.830078,87.4461105 259.001953,87.4813423","stroke-width","3","stroke-linecap","round","stroke-linejoin","round",1,"slds-illustration__stroke-primary"],["vector-effect","non-scaling-stroke","d","M190.5,9.48134234 L190.5,96.4813423","stroke-width","3","stroke-linecap","round","stroke-linejoin","round",1,"slds-illustration__stroke-primary"],["vector-effect","non-scaling-stroke","d","M160.5,5.48134234 L160.5,96.4813423","stroke-width","3","stroke-linecap","round","stroke-linejoin","round",1,"slds-illustration__stroke-primary"],["vector-effect","non-scaling-stroke","d","M148.5,4.48134234 L148.5,60.4813423 C148.166667,84.3362203 131.634766,96.2636593 98.9042969,96.2636593","stroke-width","3","stroke-linecap","round","stroke-linejoin","round",1,"slds-illustration__stroke-primary"],["vector-effect","non-scaling-stroke","d","M131.5,2.48134234 L131.5,54.2203125 C132.691406,76.2363071 124.326172,87.2443044 106.404297,87.2443044","stroke-width","3","stroke-linecap","round","stroke-linejoin","round",1,"slds-illustration__stroke-primary"],["transform","translate(160.000000, 107.000000)","stroke-linecap","round","stroke-width","3",1,"slds-illustration__stroke-secondary"],["vector-effect","non-scaling-stroke","d","M44,17.5 L63,17.5 C62.2789714,12.0723971 64.081543,7.53186978 68.4077148,3.87841797 C73.3754883,-0.195556641 79.2734375,0.717773438 82.440918,2.12353516 C85.6083984,3.52929687 87.9606934,5.46069336 89.5913086,9.10524041 C90.2822266,10.6397351 90.7517904,11.9379883 91,13"],["vector-effect","non-scaling-stroke","d","M83,20.5 C84.0558268,16.8461914 86.2227376,14.4572754 89.5007324,13.333252 C94.4177246,11.6472168 99.0800781,13.8925781 100.942383,16.1518555 C102.804687,18.4111328 103.39502,20.2260742 103.746582,22.1201172 C103.980957,23.3828125 104.06543,24.8427734 104,26.5 C108.141764,26.3313802 110.918945,27.1647135 112.331543,29 C114.040039,31.1936035 114.215332,33.817627 113.593018,35.75 C112.970703,37.682373 110.894531,40.5 107,40.5 L28,40.5"],["vector-effect","non-scaling-stroke","d","M18,27.5 L83.0004985,27.5"],["vector-effect","non-scaling-stroke","d","M0,27.5 L8,27.5"],["transform","translate(319.000000, 147.000000)","stroke-linecap","round","stroke-width","3",1,"slds-illustration__stroke-secondary"],["transform","translate(179.000000, 216.518658)"],["transform","translate(6.000000, 2.000000)","fill","#FFFFFF"],["vector-effect","non-scaling-stroke","d","M20.8180195,40.0662428 L20.8180195,3.98882348 C14.8180195,9.37296043 11.8180195,15.3858637 11.8180195,22.0275332 C11.8180195,28.6692027 14.8180195,34.6821059 20.8180195,40.0662428 Z","transform","translate(16.318019, 22.027533) scale(-1, -1) rotate(-45.000000) translate(-16.318019, -22.027533) "],["vector-effect","non-scaling-stroke","d","M38.0732996,21.3284985 L38.0732996,-1.21988855 C34.3232996,2.14519704 32.4482996,5.90326156 32.4482996,10.054305 C32.4482996,14.2053484 34.3232996,17.963413 38.0732996,21.3284985 Z","transform","translate(35.260800, 10.054305) scale(1, -1) rotate(-45.000000) translate(-35.260800, -10.054305) "],["transform","translate(0.000000, 6.000000)",1,"slds-illustration__fill-secondary"],["vector-effect","non-scaling-stroke","d","M20.8180195,42.0662428 L20.8180195,5.98882348 C14.8180195,11.3729604 11.8180195,17.3858637 11.8180195,24.0275332 C11.8180195,30.6692027 14.8180195,36.6821059 20.8180195,42.0662428 Z","transform","translate(16.318019, 24.027533) rotate(-45.000000) translate(-16.318019, -24.027533) "],["vector-effect","non-scaling-stroke","d","M47.9262378,21.3284985 L47.9262378,-1.21988855 C44.1762378,2.14519704 42.3012378,5.90326156 42.3012378,10.054305 C42.3012378,14.2053484 44.1762378,17.963413 47.9262378,21.3284985 Z","transform","translate(45.113738, 10.054305) scale(-1, 1) rotate(-45.000000) translate(-45.113738, -10.054305) "],["stroke-linecap","round","stroke-linejoin","round","stroke-width","3",1,"slds-illustration__stroke-primary"],["vector-effect","non-scaling-stroke","d","M60,64.4813423 C42.5559896,58.4405997 33.7226563,49.4405997 33.5,37.4813423 L33.5,0.481342336"],["vector-effect","non-scaling-stroke","d","M19.5,44.8774194 C25.5,39.4932824 28.5,33.4803792 28.5,26.8387097 C28.5,20.1970402 25.5,14.1841369 19.5,8.8 C13.5,14.1841369 10.5,20.1970402 10.5,26.8387097 C10.5,33.4803792 13.5,39.4932824 19.5,44.8774194 Z","transform","translate(19.500000, 26.838710) rotate(-45.000000) translate(-19.500000, -26.838710) "],["vector-effect","non-scaling-stroke","d","M43.125,25.3354839 C46.875,21.9703983 48.75,18.2123338 48.75,14.0612903 C48.75,9.91024688 46.875,6.15218236 43.125,2.78709677 C39.375,6.15218236 37.5,9.91024688 37.5,14.0612903 C37.5,18.2123338 39.375,21.9703983 43.125,25.3354839 Z","transform","translate(43.125000, 14.061290) scale(-1, 1) rotate(-45.000000) translate(-43.125000, -14.061290) "],[1,"slds-text-longform"],[1,"slds-text-heading_medium"]],template:function(e,t){1&e&&(n.F$t(),n.TgZ(0,"div",0),n.O4$(),n.TgZ(1,"svg",1)(2,"g",2)(3,"g",3)(4,"g")(5,"g",4),n._UZ(6,"path",5)(7,"path",6)(8,"polyline",7)(9,"polyline",8)(10,"path",9),n.qZA(),n.TgZ(11,"g",10)(12,"g",11),n._UZ(13,"path",12),n.qZA(),n.TgZ(14,"g",13),n._UZ(15,"polygon",14)(16,"path",15)(17,"path",16),n.qZA()(),n.TgZ(18,"g",17)(19,"g",18),n._UZ(20,"path",19),n.qZA(),n.TgZ(21,"g",13),n._UZ(22,"polygon",20)(23,"path",21)(24,"path",22)(25,"path",23),n.qZA()(),n.TgZ(26,"g",24)(27,"g",25),n._UZ(28,"path",26),n.qZA(),n.TgZ(29,"g",27),n._UZ(30,"rect",28)(31,"path",29)(32,"path",30),n.qZA(),n.TgZ(33,"g",31),n._UZ(34,"path",32)(35,"rect",33)(36,"path",34)(37,"polygon",35),n.qZA()(),n.TgZ(38,"g",36)(39,"g",37),n._UZ(40,"polygon",38),n.qZA(),n.TgZ(41,"g",39),n._UZ(42,"polygon",40),n.qZA(),n.TgZ(43,"g"),n._UZ(44,"path",41)(45,"path",42)(46,"path",43)(47,"path",44)(48,"path",45)(49,"path",46)(50,"path",47)(51,"path",48)(52,"path",49)(53,"path",50)(54,"path",51)(55,"path",52)(56,"path",53),n.qZA()(),n.TgZ(57,"g",54),n._UZ(58,"path",55)(59,"path",56)(60,"path",57)(61,"path",58),n.qZA(),n.TgZ(62,"g",59),n._UZ(63,"path",55)(64,"path",56)(65,"path",57)(66,"path",58),n.qZA(),n.TgZ(67,"g",60)(68,"g",61),n._UZ(69,"path",62)(70,"path",63),n.qZA(),n.TgZ(71,"g",64),n._UZ(72,"path",65)(73,"path",66),n.qZA(),n.TgZ(74,"g",67),n._UZ(75,"path",68)(76,"path",69)(77,"path",70),n.qZA()()()()()(),n.kcU(),n.TgZ(78,"div",71)(79,"h3",72),n.Hsn(80),n.qZA()()())},encapsulation:2})),SystemIllustrationPageNotAvailable})()},4728:(e,t,s)=>{"use strict";s.d(t,{Q:()=>f});var i=s(1180),n=s(2242),o=s(5030),l=s(5329),a=s(4154),d=s(4755),r=s(6898),c=s(4036),u=s(7302);function h(e,t){if(1&e&&(n.TgZ(0,"option",8),n._uU(1),n.qZA()),2&e){const e=t.$implicit;n.Q6J("value",e.id),n.xp6(1),n.Oqu(e.name)}}function m(e,t){if(1&e&&(n.TgZ(0,"optgroup",6),n.YNc(1,h,2,2,"option",7),n.ALo(2,"systemmodulecustompipe"),n.qZA()),2&e){const e=n.oxw();n.Q6J("label","custom "+e.language.getLabel("LBL_ACTIONSET")),n.xp6(1),n.Q6J("ngForOf",n.xi3(2,2,e._actionsets,e._module))}}function g(e,t){if(1&e&&(n.TgZ(0,"option",8),n._uU(1),n.qZA()),2&e){const e=t.$implicit;n.Q6J("value",e.id),n.xp6(1),n.Oqu(e.name)}}function p(e,t){if(1&e&&(n.TgZ(0,"optgroup",6),n.YNc(1,g,2,2,"option",7),n.ALo(2,"systemmoduleglobalpipe"),n.qZA()),2&e){const e=n.oxw();n.Q6J("label","global "+e.language.getLabel("LBL_ACTIONSET")),n.xp6(1),n.Q6J("ngForOf",n.xi3(2,2,e._actionsets,e._module))}}let f=(()=>{var e;class SystemInputActionset{constructor(e,t){(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"disabled",!1),(0,i.Z)(this,"onChange",void 0),(0,i.Z)(this,"onTouched",void 0),(0,i.Z)(this,"_actionset",void 0),(0,i.Z)(this,"_actionsets",[]),(0,i.Z)(this,"_module",""),this.language=e,this.metadata=t,this._actionsets=this.metadata.getActionSets()}get actionset(){return this._actionset}set actionset(e){this._actionset=e,this.onChange(e)}detectModule(){this._actionset&&(this._module=this.metadata.getActionSet(this._actionset).module)}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}writeValue(e){this._actionset=e,this.detectModule()}}return e=SystemInputActionset,(0,i.Z)(SystemInputActionset,"ɵfac",(function(t){return new(t||e)(n.Y36(l.d),n.Y36(a.Pu))})),(0,i.Z)(SystemInputActionset,"ɵcmp",n.Xpm({type:e,selectors:[["system-input-actionset"]],inputs:{disabled:"disabled"},features:[n._Bn([{provide:o.JU,useExisting:(0,n.Gpc)((()=>e)),multi:!0}])],decls:10,vars:12,consts:[[1,"slds-grid"],[1,"slds-p-right--xxx-small","slds-size--1-of-3",3,"ngModel","displayAsterisk","ngModelChange"],[1,"slds-form-element__control","slds-p-left--xxx-small","slds-size--2-of-3"],[1,"slds-select_container"],[1,"slds-select",3,"disabled","ngModel","ngModelChange"],[3,"label",4,"ngIf"],[3,"label"],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(e,t){1&e&&(n.TgZ(0,"div",0)(1,"system-input-module",1),n.NdJ("ngModelChange",(function(e){return t._module=e})),n.qZA(),n.TgZ(2,"div",2)(3,"div",3)(4,"select",4),n.NdJ("ngModelChange",(function(e){return t.actionset=e})),n._UZ(5,"option"),n.YNc(6,m,3,5,"optgroup",5),n.ALo(7,"systemmodulecustompipe"),n.YNc(8,p,3,5,"optgroup",5),n.ALo(9,"systemmoduleglobalpipe"),n.qZA()()()()),2&e&&(n.xp6(1),n.Q6J("ngModel",t._module)("displayAsterisk",!0),n.xp6(3),n.Q6J("disabled",!t._module||t.disabled)("ngModel",t.actionset),n.xp6(2),n.Q6J("ngIf",n.xi3(7,6,t._actionsets,t._module).length>0),n.xp6(2),n.Q6J("ngIf",n.xi3(9,9,t._actionsets,t._module).length>0))},dependencies:[d.sg,d.O5,o.YN,o.Kr,o.EJ,o.JJ,o.On,r.a,c.N,u.m],encapsulation:2})),SystemInputActionset})()},8973:(e,t,s)=>{"use strict";s.d(t,{N:()=>u});var i=s(1180),n=s(2242),o=s(5030),l=s(5329),a=s(4154),d=s(4505),r=s(4755);function c(e,t){if(1&e&&(n.TgZ(0,"option",6),n._uU(1),n.qZA()),2&e){const e=t.$implicit;n.Q6J("value",e),n.xp6(1),n.Oqu(e)}}let u=(()=>{var e;class SystemInputBackendMethod{constructor(e,t,s){(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"backend",void 0),(0,i.Z)(this,"disabled",!1),(0,i.Z)(this,"onChange",void 0),(0,i.Z)(this,"onTouched",void 0),(0,i.Z)(this,"_value",void 0),(0,i.Z)(this,"_class",""),(0,i.Z)(this,"_method",""),(0,i.Z)(this,"_classexists",!1),(0,i.Z)(this,"_methods",[]),this.language=e,this.metadata=t,this.backend=s}get modelOptions(){return{updateOn:"blur"}}get classname(){return this._class}set classname(e){this._class=e,""!=this.classname?this.validateNamespace():(this._method="",this._methods=[],this._classexists=!1),this.joinValue()}get methodname(){return this._method}set methodname(e){this._method=e,this.joinValue()}validateNamespace(){this.backend.getRequest("system/checkclass/"+btoa(this._class)).subscribe((e=>{this._classexists=e.classexists,this._methods=e.methods}))}splitValue(){if(this._value){let e=this._value.split("->");this._class=e[0],this._method=e[1],this.validateNamespace()}}joinValue(){""!=this._class?this._value=this._class+"->"+this._method:this._value="",this.onChange(this._value)}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}writeValue(e){e!=this._value&&(this._value=e,this.splitValue())}}return e=SystemInputBackendMethod,(0,i.Z)(SystemInputBackendMethod,"ɵfac",(function(t){return new(t||e)(n.Y36(l.d),n.Y36(a.Pu),n.Y36(d.y))})),(0,i.Z)(SystemInputBackendMethod,"ɵcmp",n.Xpm({type:e,selectors:[["system-input-backend-method"]],inputs:{disabled:"disabled"},features:[n._Bn([{provide:o.JU,useExisting:(0,n.Gpc)((()=>e)),multi:!0}])],decls:6,vars:6,consts:[[1,"slds-grid","slds-grid--vertical-align-center","slds-gutters_direct-xx-small"],["type","text",1,"slds-col","slds-size--2-of-3","slds-input",3,"disabled","ngModel","ngModelOptions","ngModelChange"],["focus",""],[1,"slds-col","slds-size--1-of-3","slds-select_container"],[1,"slds-select",3,"disabled","ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(e,t){1&e&&(n.TgZ(0,"div",0)(1,"input",1,2),n.NdJ("ngModelChange",(function(e){return t.classname=e})),n.qZA(),n.TgZ(3,"div",3)(4,"select",4),n.NdJ("ngModelChange",(function(e){return t.methodname=e})),n.YNc(5,c,2,2,"option",5),n.qZA()()()),2&e&&(n.xp6(1),n.Q6J("disabled",t.disabled)("ngModel",t.classname)("ngModelOptions",t.modelOptions),n.xp6(3),n.Q6J("disabled",!t._classexists||0==t._methods.length||t.disabled)("ngModel",t.methodname),n.xp6(1),n.Q6J("ngForOf",t._methods))},dependencies:[r.sg,o.YN,o.Kr,o.Fj,o.EJ,o.JJ,o.On],encapsulation:2})),SystemInputBackendMethod})()},6991:(e,t,s)=>{"use strict";s.d(t,{V:()=>d});var i=s(1180),n=s(2242),o=s(5030),l=s(4755);const a={provide:o.JU,useExisting:(0,n.Gpc)((()=>d)),multi:!0};let d=(()=>{var e;class SystemInputBase64{constructor(){(0,i.Z)(this,"minHeight",150),(0,i.Z)(this,"maxHeight",500),(0,i.Z)(this,"disabled",!1),(0,i.Z)(this,"onChange",void 0),(0,i.Z)(this,"onTouched",void 0),(0,i.Z)(this,"_value","")}get value(){if(!this._value||""==this._value)return"";try{return decodeURIComponent(window.atob(this._value))}catch(e){try{return window.atob(this._value)}catch(e){return""}}}set value(e){this._value=window.btoa(e),"function"==typeof this.onChange&&this.onChange(this._value)}get textAreaStyle(){return{"min-height":this.minHeight+"px","max-height":this.maxHeight+"px"}}registerOnChange(e){this.onChange=t=>{e(t)}}registerOnTouched(e){this.onTouched=e}writeValue(e){this._value=e}}return e=SystemInputBase64,(0,i.Z)(SystemInputBase64,"ɵfac",(function(t){return new(t||e)})),(0,i.Z)(SystemInputBase64,"ɵcmp",n.Xpm({type:e,selectors:[["system-input-base64"]],inputs:{minHeight:"minHeight",maxHeight:"maxHeight",disabled:"disabled"},features:[n._Bn([a])],decls:2,vars:3,consts:[[1,"slds-form-element__control"],[1,"slds-textarea","slds-scrollable--y","slds-m-vertical--xx-small",3,"ngModel","ngStyle","disabled","ngModelChange"]],template:function(e,t){1&e&&(n.TgZ(0,"div",0)(1,"textarea",1),n.NdJ("ngModelChange",(function(e){return t.value=e})),n.qZA()()),2&e&&(n.xp6(1),n.Q6J("ngModel",t.value)("ngStyle",t.textAreaStyle)("disabled",t.disabled))},dependencies:[l.PC,o.Fj,o.JJ,o.On],encapsulation:2})),SystemInputBase64})()},2391:(e,t,s)=>{"use strict";s.d(t,{K:()=>g});var i=s(1180),n=s(2242),o=s(5030),l=s(4154),a=s(5329),d=s(6625),r=s(4755),c=s(2656);function u(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"li",14),n.NdJ("click",(function(){const t=n.CHM(e).$implicit,s=n.oxw(2);return n.KtG(s.setColor(t))})),n.TgZ(1,"span",15)(2,"span",16)(3,"span",17),n._uU(4),n.qZA()()()()}if(2&e){const e=t.$implicit;n.xp6(2),n.Udp("background-color","#"+e)("cursor","pointer"),n.xp6(2),n.Oqu(e)}}function h(e,t){if(1&e&&(n.TgZ(0,"section",8)(1,"div",9)(2,"div",10)(3,"div",11)(4,"ul",12),n.YNc(5,u,5,5,"li",13),n.qZA()()()()()),2&e){const e=n.oxw();n.xp6(5),n.Q6J("ngForOf",e.colorPalette)("ngForTrackBy",e.trackByFnIndex)}}const m=function(e){return{"slds-is-edited":e}};let g=(()=>{var e;class SystemInputColor{constructor(e,t,s){(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"configuration",void 0),(0,i.Z)(this,"colorPalette",["e3abec","c2dbf7","9fd6ff","9de7da","9df0c0","fff099","fed49a","d073e0","86baf3","5ebbff","44d8be","3be282","ffe654","ffb758","bd35bd","5779c1","5ebbff","00aea9","3cba4c","f5bc25","f99221","580d8c","001970","0a2399","0b7477","0b6b50","b67e11","b85d0d"]),(0,i.Z)(this,"onChange",void 0),(0,i.Z)(this,"onTouched",void 0),(0,i.Z)(this,"_value",void 0),(0,i.Z)(this,"strict",!1),(0,i.Z)(this,"isOpen",!1),(0,i.Z)(this,"isedited",!1),this.metadata=e,this.language=t,this.configuration=s}get value(){return this._value}set value(e){e!=this._value&&(this._value=e,this.onChange(e))}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}writeValue(e){this._value=e}trackByFnIndex(e,t){return e}colorStyle(e){return{background:this._value}}setColor(e){this.value="#"+e,this.isOpen=!1}}return e=SystemInputColor,(0,i.Z)(SystemInputColor,"ɵfac",(function(t){return new(t||e)(n.Y36(l.Pu),n.Y36(a.d),n.Y36(d.C))})),(0,i.Z)(SystemInputColor,"ɵcmp",n.Xpm({type:e,selectors:[["system-input-color"]],inputs:{isedited:"isedited"},features:[n._Bn([{provide:o.JU,useExisting:(0,n.Gpc)((()=>e)),multi:!0}])],decls:8,vars:6,consts:[[1,"slds-form-element","slds-is-relative"],[1,"slds-color-picker"],[1,"slds-form-element__control","slds-grid","slds-grid--vertical-align-center"],[1,"slds-button","slds-color-picker__summary-button","slds-button_icon","slds-button_icon-more",3,"click"],[1,"slds-swatch",3,"ngStyle"],["icon","down",1,"slds-button__icon","slds-button__icon_small","slds-m-left_xx-small"],["type","text",1,"slds-grow","slds-input",3,"ngClass","ngModel","ngModelChange"],["class","slds-popover slds-color-picker__selector slds-is-absolute","role","dialog",4,"ngIf"],["role","dialog",1,"slds-popover","slds-color-picker__selector","slds-is-absolute"],["id","dialog-body-id-37"],[1,"slds-color-picker","slds-color-picker_swatches-only","slds-grid","slds-grid--vertical-align-center","slds-grow"],[1,"slds-color-picker__selector"],["role","menu",1,"slds-color-picker__swatches"],["class","slds-color-picker__swatch","role","presentation",3,"click",4,"ngFor","ngForOf","ngForTrackBy"],["role","presentation",1,"slds-color-picker__swatch",3,"click"],["role","menuitem",1,"slds-color-picker__swatch-trigger","slds-is-selected"],[1,"slds-swatch"],[1,"slds-assistive-text"]],template:function(e,t){1&e&&(n.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"button",3),n.NdJ("click",(function(){return t.isOpen=!t.isOpen})),n._UZ(4,"span",4)(5,"system-button-icon",5),n.qZA(),n.TgZ(6,"input",6),n.NdJ("ngModelChange",(function(e){return t.value=e})),n.qZA()(),n.YNc(7,h,6,2,"section",7),n.qZA()()),2&e&&(n.xp6(4),n.Q6J("ngStyle",t.colorStyle("brandprimary")),n.xp6(2),n.Q6J("ngClass",n.VKq(4,m,t.isedited))("ngModel",t.value),n.xp6(1),n.Q6J("ngIf",t.isOpen))},dependencies:[r.mk,r.sg,r.O5,r.PC,o.Fj,o.JJ,o.On,c.J],encapsulation:2})),SystemInputColor})()},1e3:(e,t,s)=>{"use strict";s.d(t,{x:()=>c});var i=s(1180),n=s(2242),o=s(5030),l=s(5329),a=s(6625),d=s(4755);function r(e,t){if(1&e&&(n.TgZ(0,"option",4),n._uU(1),n.qZA()),2&e){const e=t.$implicit;n.Q6J("value",e.id),n.xp6(1),n.Oqu(e.name)}}let c=(()=>{var e;class SystemInputCompanycodes{constructor(e,t){(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"configuration",void 0),(0,i.Z)(this,"disabled",!1),(0,i.Z)(this,"onChange",void 0),(0,i.Z)(this,"onTouched",void 0),(0,i.Z)(this,"_companycode",void 0),(0,i.Z)(this,"_companycodes",[]),this.language=e,this.configuration=t,this._companycodes=this.configuration.getData("companycodes"),"object"==typeof this._companycodes&&this._companycodes.sort(((e,t)=>e.name>t.name?-1:1))}get companycode(){return this._companycode}set companycode(e){this._companycode=e,this.onChange&&this.onChange(e)}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}writeValue(e){this._companycode=e}}return e=SystemInputCompanycodes,(0,i.Z)(SystemInputCompanycodes,"ɵfac",(function(t){return new(t||e)(n.Y36(l.d),n.Y36(a.C))})),(0,i.Z)(SystemInputCompanycodes,"ɵcmp",n.Xpm({type:e,selectors:[["system-input-companycodes"]],inputs:{disabled:"disabled"},features:[n._Bn([{provide:o.JU,useExisting:(0,n.Gpc)((()=>e)),multi:!0}])],decls:4,vars:3,consts:[[1,"slds-form-element__control"],[1,"slds-select_container"],[1,"slds-select",3,"disabled","ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(e,t){1&e&&(n.TgZ(0,"div",0)(1,"div",1)(2,"select",2),n.NdJ("ngModelChange",(function(e){return t.companycode=e})),n.YNc(3,r,2,2,"option",3),n.qZA()()()),2&e&&(n.xp6(2),n.Q6J("disabled",t.disabled)("ngModel",t.companycode),n.xp6(1),n.Q6J("ngForOf",t._companycodes))},dependencies:[d.sg,o.YN,o.Kr,o.EJ,o.JJ,o.On],encapsulation:2})),SystemInputCompanycodes})()},4665:(e,t,s)=>{"use strict";s.d(t,{C:()=>f});var i=s(1180),n=s(2242),o=s(5030),l=s(5329),a=s(4154),d=s(4755),r=s(4036),c=s(7302);function u(e,t){if(1&e&&(n.TgZ(0,"option",8),n._uU(1),n.qZA()),2&e){const e=t.$implicit;n.Q6J("value",e),n.xp6(1),n.Oqu(e)}}function h(e,t){if(1&e&&(n.TgZ(0,"option",8),n._uU(1),n.qZA()),2&e){const e=t.$implicit;n.Q6J("value",e.id),n.xp6(1),n.Oqu(e.name)}}function m(e,t){if(1&e&&(n.TgZ(0,"optgroup",9),n.YNc(1,h,2,2,"option",5),n.ALo(2,"systemmodulecustompipe"),n.qZA()),2&e){const e=n.oxw();n.Q6J("label","custom "+e.language.getLabel("LBL_COMPONENTSET")),n.xp6(1),n.Q6J("ngForOf",n.xi3(2,2,e._componentsets,e._module))}}function g(e,t){if(1&e&&(n.TgZ(0,"option",8),n._uU(1),n.qZA()),2&e){const e=t.$implicit;n.Q6J("value",e.id),n.xp6(1),n.Oqu(e.name)}}function p(e,t){if(1&e&&(n.TgZ(0,"optgroup",9),n.YNc(1,g,2,2,"option",5),n.ALo(2,"systemmoduleglobalpipe"),n.qZA()),2&e){const e=n.oxw();n.Q6J("label","global "+e.language.getLabel("LBL_COMPONENTSET")),n.xp6(1),n.Q6J("ngForOf",n.xi3(2,2,e._componentsets,e._module))}}let f=(()=>{var e;class SystemInputComponentset{constructor(e,t){(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"disabled",!1),(0,i.Z)(this,"onChange",void 0),(0,i.Z)(this,"onTouched",void 0),(0,i.Z)(this,"_componentset",void 0),(0,i.Z)(this,"_componentsets",[]),(0,i.Z)(this,"_modules",[]),(0,i.Z)(this,"_module",""),this.language=e,this.metadata=t,this._componentsets=this.metadata.getComponentSets(),this._modules=this.metadata.getModules(),this._modules.sort()}get componentset(){return this._componentset}set componentset(e){this._componentset=e,this.onChange(e)}detectModule(){this._componentset&&(this._module=this.metadata.getComponentSet(this._componentset).module)}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}writeValue(e){this._componentset=e,this.detectModule()}}return e=SystemInputComponentset,(0,i.Z)(SystemInputComponentset,"ɵfac",(function(t){return new(t||e)(n.Y36(l.d),n.Y36(a.Pu))})),(0,i.Z)(SystemInputComponentset,"ɵcmp",n.Xpm({type:e,selectors:[["system-input-componentset"]],inputs:{disabled:"disabled"},features:[n._Bn([{provide:o.JU,useExisting:(0,n.Gpc)((()=>e)),multi:!0}])],decls:15,vars:13,consts:[[1,"slds-grid"],[1,"slds-form-element__control","slds-p-right--xxx-small","slds-size--1-of-3"],[1,"slds-select_container"],[1,"slds-select",3,"disabled","ngModel","ngModelChange"],["value","*"],[3,"value",4,"ngFor","ngForOf"],[1,"slds-form-element__control","slds-p-left--xxx-small","slds-size--2-of-3"],[3,"label",4,"ngIf"],[3,"value"],[3,"label"]],template:function(e,t){1&e&&(n.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"select",3),n.NdJ("ngModelChange",(function(e){return t._module=e})),n.TgZ(4,"option",4),n._uU(5,"*"),n.qZA(),n.YNc(6,u,2,2,"option",5),n.qZA()()(),n.TgZ(7,"div",6)(8,"div",2)(9,"select",3),n.NdJ("ngModelChange",(function(e){return t.componentset=e})),n._UZ(10,"option"),n.YNc(11,m,3,5,"optgroup",7),n.ALo(12,"systemmodulecustompipe"),n.YNc(13,p,3,5,"optgroup",7),n.ALo(14,"systemmoduleglobalpipe"),n.qZA()()()()),2&e&&(n.xp6(3),n.Q6J("disabled",t.disabled)("ngModel",t._module),n.xp6(3),n.Q6J("ngForOf",t._modules),n.xp6(3),n.Q6J("disabled",!t._module||t.disabled)("ngModel",t.componentset),n.xp6(2),n.Q6J("ngIf",n.xi3(12,7,t._componentsets,t._module.length>0)),n.xp6(2),n.Q6J("ngIf",n.xi3(14,10,t._componentsets,t._module.length>0)))},dependencies:[d.sg,d.O5,o.YN,o.Kr,o.EJ,o.JJ,o.On,r.N,c.m],encapsulation:2})),SystemInputComponentset})()},9422:(e,t,s)=>{"use strict";s.d(t,{y:()=>g});var i=s(1180),n=s(2242),o=s(5030),l=s(4154),a=s(5329),d=s(6625),r=s(4755),c=s(3463);function u(e,t){if(1&e&&(n.TgZ(0,"option",8),n._UZ(1,"system-label",9),n.qZA()),2&e){const e=t.$implicit;n.Q6J("value",e.cc),n.xp6(1),n.Q6J("label",e.label)}}function h(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"div",3)(1,"select",4,5),n.NdJ("ngModelChange",(function(t){n.CHM(e);const s=n.oxw();return n.KtG(s.value=t)})),n._UZ(3,"option",6),n.YNc(4,u,2,2,"option",7),n.qZA()()}if(2&e){const e=n.oxw();n.xp6(1),n.Q6J("ngModel",e.value)("disabled",e.disabled),n.xp6(3),n.Q6J("ngForOf",e.countries)}}function m(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"div",10)(1,"input",11),n.NdJ("ngModelChange",(function(t){n.CHM(e);const s=n.oxw();return n.KtG(s.value=t)})),n.qZA()()}if(2&e){const e=n.oxw();n.xp6(1),n.Q6J("ngModel",e.value)("disabled",e.disabled)}}let g=(()=>{var e;class SystemInputCountry{constructor(e,t,s){(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"configuration",void 0),(0,i.Z)(this,"disabled",!1),(0,i.Z)(this,"countries",[]),(0,i.Z)(this,"onChange",void 0),(0,i.Z)(this,"onTouched",void 0),(0,i.Z)(this,"_value",void 0),(0,i.Z)(this,"strict",!1),this.metadata=e,this.language=t,this.configuration=s,"strict"==this.configuration.data.backendextensions.spiceui.config.format&&(this.strict=!0)}get value(){return this._value}set value(e){e!=this._value&&(this._value=e,this.onChange(e))}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}writeValue(e){this._value=e}ngOnInit(){this.strict&&this.getCountries()}getCountries(){let e=this.configuration.getData("countries");this.countries=e?.countries?e.countries:[],this.countries.sort(((e,t)=>this.language.getLabel(e.label).localeCompare(this.language.getLabel(t.label))))}}return e=SystemInputCountry,(0,i.Z)(SystemInputCountry,"ɵfac",(function(t){return new(t||e)(n.Y36(l.Pu),n.Y36(a.d),n.Y36(d.C))})),(0,i.Z)(SystemInputCountry,"ɵcmp",n.Xpm({type:e,selectors:[["system-input-country"]],inputs:{disabled:"disabled"},features:[n._Bn([{provide:o.JU,useExisting:(0,n.Gpc)((()=>e)),multi:!0}])],decls:4,vars:2,consts:[[1,"slds-form-element"],["class","slds-select_container",4,"ngIf","ngIfElse"],["countryinput",""],[1,"slds-select_container"],[1,"slds-select",3,"ngModel","disabled","ngModelChange"],["focus",""],["value",""],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[3,"label"],[1,"slds-form-element__control"],["type","text",1,"slds-input",3,"ngModel","disabled","ngModelChange"]],template:function(e,t){if(1&e&&(n.TgZ(0,"div",0),n.YNc(1,h,5,3,"div",1),n.YNc(2,m,2,2,"ng-template",null,2,n.W1O),n.qZA()),2&e){const e=n.MAs(3);n.xp6(1),n.Q6J("ngIf",t.strict)("ngIfElse",e)}},dependencies:[r.sg,r.O5,o.YN,o.Kr,o.Fj,o.EJ,o.JJ,o.On,c._],encapsulation:2})),SystemInputCountry})()},3095:(e,t,s)=>{"use strict";s.d(t,{F:()=>v});var i=s(1180),n=s(2242),o=s(5030),l=s(5329),a=s(4044),d=s(4505),r=s(3398),c=s(4755),u=s(2656);function h(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"button",12),n.NdJ("click",(function(){n.CHM(e);const t=n.oxw(2);return n.KtG(t.clearField())})),n._UZ(1,"system-button-icon",13),n.qZA()}2&e&&(n.xp6(1),n.Q6J("icon","close"))}const m=function(e){return{"slds-theme--shade":e}};function g(e,t){if(1&e&&(n.TgZ(0,"div",7)(1,"div",8)(2,"span",9)(3,"span",10),n._uU(4),n.qZA(),n.YNc(5,h,2,1,"button",11),n.qZA()()()),2&e){const e=n.oxw();n.xp6(2),n.Q6J("ngClass",n.VKq(3,m,e._disabled)),n.xp6(2),n.Oqu(e.currentdashboard),n.xp6(1),n.Q6J("ngIf",!e._disabled)}}function p(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"div",14)(1,"input",15),n.NdJ("ngModelChange",(function(t){n.CHM(e);const s=n.oxw();return n.KtG(s.searchterm=t)}))("blur",(function(){n.CHM(e);const t=n.oxw();return n.KtG(t.onBlur())})),n.qZA()()}if(2&e){const e=n.oxw();n.xp6(1),n.Q6J("disabled",e._disabled)("ngModel",e.searchterm)}}function f(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"li",16),n.NdJ("mousedown",(function(){const t=n.CHM(e).$implicit,s=n.oxw();return n.KtG(s.setDashboardSet(t.id))})),n.TgZ(1,"div",17)(2,"span",18),n._uU(3),n.qZA()()()}if(2&e){const e=t.$implicit;n.xp6(3),n.Oqu(e.name)}}const b=function(e){return{"slds-is-open":e}};let v=(()=>{var e;class SystemInputDashboard{set disabled(e){this._disabled=!1!==e}constructor(e,t,s){(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"modal",void 0),(0,i.Z)(this,"backend",void 0),(0,i.Z)(this,"_disabled",!1),(0,i.Z)(this,"onChange",void 0),(0,i.Z)(this,"onTouched",void 0),(0,i.Z)(this,"_time",{display:"",moment:null,offset:0,valid:!0}),(0,i.Z)(this,"_searchterm",""),(0,i.Z)(this,"dashboards",[]),(0,i.Z)(this,"dashboard",""),(0,i.Z)(this,"currentdashboard",void 0),(0,i.Z)(this,"clickListener",void 0),this.language=e,this.modal=t,this.backend=s,this.getDashboards()}getDashboards(){this.backend.getRequest("configuration/spiceui/core/module/dashboards").subscribe((e=>{this.dashboards=e,this.dashboard&&(this.currentdashboard=this.dashboards.find((e=>e.id==this.dashboard)).name)}))}get isOpen(){return""!=this._searchterm}get searchterm(){return this._searchterm}set searchterm(e){this._searchterm=e}get Dashboards(){let e=[];for(let t of this.dashboards)(""==this._searchterm||""!=this._searchterm&&-1!=t.name.toLowerCase().indexOf(this._searchterm.toLowerCase()))&&e.push(t);return e}ngOnDestroy(){this.clickListener&&this.clickListener()}onBlur(){this._searchterm=""}clearField(){this.dashboard="",this.onChange("")}setDashboardSet(e){this.dashboard=e,this.currentdashboard=this.dashboards.find((e=>e.id==this.dashboard)).name,this._searchterm="",this.onChange(e)}trackByFn(e,t){return t.id}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}writeValue(e){this.dashboard=e}}return e=SystemInputDashboard,(0,i.Z)(SystemInputDashboard,"ɵfac",(function(t){return new(t||e)(n.Y36(l.d),n.Y36(a.o),n.Y36(d.y))})),(0,i.Z)(SystemInputDashboard,"ɵcmp",n.Xpm({type:e,selectors:[["system-input-dashboard"]],inputs:{disabled:"disabled"},features:[n._Bn([{provide:o.JU,useExisting:(0,n.Gpc)((()=>e)),multi:!0}])],decls:7,vars:6,consts:[[1,"slds-combobox_container"],["role","combobox",1,"slds-combobox","slds-dropdown-trigger","slds-dropdown-trigger_click",3,"ngClass"],["class","slds-form-element__control",4,"ngIf"],["class","slds-combobox__form-element slds-input-has-icon slds-input-has-icon_right",4,"ngIf"],["role","listbox",1,"slds-dropdown","slds-dropdown_fluid","slds-dropdown--length-7"],["role","presentation",1,"slds-listbox","slds-listbox_vertical"],["role","presentation","class","slds-listbox__item",3,"mousedown",4,"ngFor","ngForOf"],[1,"slds-form-element__control"],[1,"slds-pill_container"],[1,"slds-pill","slds-size--1-of-1","slds-p-horizontal--xx-small",3,"ngClass"],[1,"slds-pill__label"],["class","slds-button slds-button--icon slds-pill__remove",3,"click",4,"ngIf"],[1,"slds-button","slds-button--icon","slds-pill__remove",3,"click"],[3,"icon"],[1,"slds-combobox__form-element","slds-input-has-icon","slds-input-has-icon_right"],["type","search","system-placeholder","LBL_SEARCH","role","combobox",1,"slds-input","slds-combobox__input",3,"disabled","ngModel","ngModelChange","blur"],["role","presentation",1,"slds-listbox__item",3,"mousedown"],["role","option",1,"slds-media","slds-listbox__option","slds-listbox__option_plain"],[1,"slds-truncate"]],template:function(e,t){1&e&&(n.TgZ(0,"div",0)(1,"div",1),n.YNc(2,g,6,5,"div",2),n.YNc(3,p,2,2,"div",3),n.TgZ(4,"div",4)(5,"ul",5),n.YNc(6,f,4,1,"li",6),n.qZA()()()()),2&e&&(n.xp6(1),n.Q6J("ngClass",n.VKq(4,b,t.isOpen)),n.xp6(1),n.Q6J("ngIf",t.dashboard),n.xp6(1),n.Q6J("ngIf",!t.dashboard),n.xp6(3),n.Q6J("ngForOf",t.Dashboards))},dependencies:[r.A,c.mk,c.sg,c.O5,o.Fj,o.JJ,o.On,u.J],encapsulation:2})),SystemInputDashboard})()},3934:(e,t,s)=>{"use strict";s.d(t,{l:()=>Z});var i=s(1180),n=s(2242),o=s(5030),l=s(5329),a=s(4044),d=s(4505),r=s(4154),c=s(3398),u=s(4755),h=s(2656);function m(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"button",12),n.NdJ("click",(function(){n.CHM(e);const t=n.oxw(2);return n.KtG(t.clearField())})),n._UZ(1,"system-button-icon",13),n.qZA()}2&e&&(n.xp6(1),n.Q6J("icon","close"))}const g=function(e){return{"slds-theme--shade":e}};function p(e,t){if(1&e&&(n.TgZ(0,"div",7)(1,"div",8)(2,"span",9)(3,"span",10),n._uU(4),n.qZA(),n.YNc(5,m,2,1,"button",11),n.qZA()()()),2&e){const e=n.oxw();n.xp6(2),n.Q6J("ngClass",n.VKq(3,g,e._disabled)),n.xp6(2),n.Oqu(e.currentdashboardset),n.xp6(1),n.Q6J("ngIf",!e._disabled)}}function f(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"div",14)(1,"input",15),n.NdJ("ngModelChange",(function(t){n.CHM(e);const s=n.oxw();return n.KtG(s.searchterm=t)}))("blur",(function(){n.CHM(e);const t=n.oxw();return n.KtG(t.onBlur())})),n.qZA()()}if(2&e){const e=n.oxw();n.xp6(1),n.Q6J("disabled",e._disabled)("ngModel",e.searchterm)}}function b(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"li",16),n.NdJ("mousedown",(function(){const t=n.CHM(e).$implicit,s=n.oxw();return n.KtG(s.setDashboardSet(t.id))})),n.TgZ(1,"div",17)(2,"span",18),n._uU(3),n.qZA()()()}if(2&e){const e=t.$implicit;n.xp6(3),n.Oqu(e.name)}}const v=function(e){return{"slds-is-open":e}};let Z=(()=>{var e;class SystemInputDashboardset{set disabled(e){this._disabled=!1!==e}constructor(e,t,s,n){(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"modal",void 0),(0,i.Z)(this,"backend",void 0),(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"_disabled",!1),(0,i.Z)(this,"onChange",void 0),(0,i.Z)(this,"onTouched",void 0),(0,i.Z)(this,"_time",{display:"",moment:null,offset:0,valid:!0}),(0,i.Z)(this,"_searchterm",""),(0,i.Z)(this,"dashboardSets",[]),(0,i.Z)(this,"dashboardset",""),(0,i.Z)(this,"currentdashboardset",void 0),(0,i.Z)(this,"clickListener",void 0),this.language=e,this.modal=t,this.backend=s,this.metadata=n,this.getDashboardSets()}getDashboardSets(){this.backend.getRequest("configuration/spiceui/core/module/dashboardsets").subscribe((e=>{this.dashboardSets=e,this.dashboardset&&(this.currentdashboardset=this.dashboardSets.find((e=>e.id==this.dashboardset)).name)}))}get isOpen(){return""!=this._searchterm}get searchterm(){return this._searchterm}set searchterm(e){this._searchterm=e}get dashboardsets(){let e=[];for(let t of this.dashboardSets)(""==this._searchterm||""!=this._searchterm&&-1!=t.name.toLowerCase().indexOf(this._searchterm.toLowerCase()))&&e.push(t);return e}ngOnDestroy(){this.clickListener&&this.clickListener()}onBlur(){this._searchterm=""}clearField(){this.dashboardset="",this.onChange("")}setDashboardSet(e){this.dashboardset=e,this.currentdashboardset=this.dashboardSets.find((e=>e.id==this.dashboardset)).name,this._searchterm="",this.onChange(e)}trackByFn(e,t){return t.id}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}writeValue(e){this.dashboardset=e}}return e=SystemInputDashboardset,(0,i.Z)(SystemInputDashboardset,"ɵfac",(function(t){return new(t||e)(n.Y36(l.d),n.Y36(a.o),n.Y36(d.y),n.Y36(r.Pu))})),(0,i.Z)(SystemInputDashboardset,"ɵcmp",n.Xpm({type:e,selectors:[["system-input-dashboardset"]],inputs:{disabled:"disabled"},features:[n._Bn([{provide:o.JU,useExisting:(0,n.Gpc)((()=>e)),multi:!0}])],decls:7,vars:6,consts:[[1,"slds-combobox_container"],["role","combobox",1,"slds-combobox","slds-dropdown-trigger","slds-dropdown-trigger_click",3,"ngClass"],["class","slds-form-element__control",4,"ngIf"],["class","slds-combobox__form-element slds-input-has-icon slds-input-has-icon_right",4,"ngIf"],["role","listbox",1,"slds-dropdown","slds-dropdown_fluid","slds-dropdown--length-7"],["role","presentation",1,"slds-listbox","slds-listbox_vertical"],["role","presentation","class","slds-listbox__item",3,"mousedown",4,"ngFor","ngForOf"],[1,"slds-form-element__control"],[1,"slds-pill_container"],[1,"slds-pill","slds-size--1-of-1","slds-p-horizontal--xx-small",3,"ngClass"],[1,"slds-pill__label"],["class","slds-button slds-button--icon slds-pill__remove",3,"click",4,"ngIf"],[1,"slds-button","slds-button--icon","slds-pill__remove",3,"click"],[3,"icon"],[1,"slds-combobox__form-element","slds-input-has-icon","slds-input-has-icon_right"],["type","search","system-placeholder","LBL_SEARCH","role","combobox",1,"slds-input","slds-combobox__input",3,"disabled","ngModel","ngModelChange","blur"],["role","presentation",1,"slds-listbox__item",3,"mousedown"],["role","option",1,"slds-media","slds-listbox__option","slds-listbox__option_plain"],[1,"slds-truncate"]],template:function(e,t){1&e&&(n.TgZ(0,"div",0)(1,"div",1),n.YNc(2,p,6,5,"div",2),n.YNc(3,f,2,2,"div",3),n.TgZ(4,"div",4)(5,"ul",5),n.YNc(6,b,4,1,"li",6),n.qZA()()()()),2&e&&(n.xp6(1),n.Q6J("ngClass",n.VKq(4,v,t.isOpen)),n.xp6(1),n.Q6J("ngIf",t.dashboardset),n.xp6(1),n.Q6J("ngIf",!t.dashboardset),n.xp6(3),n.Q6J("ngForOf",t.dashboardsets))},dependencies:[c.A,u.mk,u.sg,u.O5,o.Fj,o.JJ,o.On,h.J],encapsulation:2})),SystemInputDashboardset})()},6822:(e,t,s)=>{"use strict";s.d(t,{z:()=>x});var i=s(1180),n=s(2242),o=s(5030),l=s(5698),a=s(2422),d=s(4044),r=s(5681),c=s(9573),u=s(4755),h=s(2656),m=s(4114),g=s(3463);function p(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"button",13),n.NdJ("click",(function(){n.CHM(e);const t=n.oxw(2);return n.KtG(t.clear())})),n._UZ(1,"system-button-icon",14),n.qZA()}}function f(e,t){if(1&e&&(n.TgZ(0,"div",9),n.YNc(1,p,2,0,"button",10),n.TgZ(2,"button",11),n._UZ(3,"system-button-icon",12),n.qZA()()),2&e){const e=n.oxw();n.xp6(1),n.Q6J("ngIf",e.canclear)}}function b(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"div",18)(1,"button",19),n.NdJ("click",(function(){n.CHM(e);const t=n.oxw(2);return n.KtG(t.openCalendar())})),n._UZ(2,"system-label",20),n.qZA()()}}function v(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"div",15)(1,"system-input-date-picker",16),n.NdJ("datePicked",(function(t){n.CHM(e);const s=n.oxw();return n.KtG(s.datePicked(t))})),n.qZA(),n.YNc(2,b,3,0,"div",17),n.qZA()}if(2&e){const e=n.oxw();n.Q6J("ngClass",e.dropdownside),n.xp6(1),n.Q6J("setDate",e._date.moment),n.xp6(1),n.Q6J("ngIf",e.showCalendarButton)}}function Z(e,t){1&e&&(n.TgZ(0,"div",21),n._UZ(1,"system-label",22),n.qZA())}const _=function(e){return{"slds-has-error":e}},y=function(e){return{"slds-is-edited":e}};let x=(()=>{var e;class SystemInputDate{set disabled(e){this.isDisabled=!1!==e}set hideError(e){this.hideErrorMessage=!1!==e}constructor(e,t,s,o,l,a){(0,i.Z)(this,"elementref",void 0),(0,i.Z)(this,"renderer",void 0),(0,i.Z)(this,"userpreferences",void 0),(0,i.Z)(this,"modal",void 0),(0,i.Z)(this,"cdref",void 0),(0,i.Z)(this,"elementRef",void 0),(0,i.Z)(this,"onChange",void 0),(0,i.Z)(this,"onTouched",void 0),(0,i.Z)(this,"showCalendarButton",!0),(0,i.Z)(this,"_date",{display:"",moment:null,valid:!0}),(0,i.Z)(this,"isDisabled",!1),(0,i.Z)(this,"isDirty",!1),(0,i.Z)(this,"valid",new n.vpe),(0,i.Z)(this,"id",void 0),(0,i.Z)(this,"showClear",!1),(0,i.Z)(this,"hideErrorMessage",!1),this.elementref=e,this.renderer=t,this.userpreferences=s,this.modal=o,this.cdref=l,this.elementRef=a}get isValid(){return this._date.valid}get display(){return this._date.display?this._date.display:""}set display(e){if(e){let t=moment(e,this.userpreferences.getDateFormat(),!0);t.isValid()?(this._date.moment||(this._date.moment=new moment),this._date.moment.year(t.year()).month(t.month()).date(t.date()),this._date.valid=!0,"function"==typeof this.onChange&&this.onChange(this._date.moment)):(this._date.display=e,this._date.valid=!1)}else this.clear();this.valid.emit(this._date.valid)}get canclear(){return this.showClear&&!!this._date.display}get dropdownside(){let e=this.elementref.nativeElement.getBoundingClientRect();return window.innerWidth-e.left<280?"slds-dropdown_right":"slds-dropdown_left"}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}writeValue(e){e&&e.isValid&&e.isValid()?(this._date.moment=new moment(e),this._date.display=this._date.moment.format(this.userpreferences.getDateFormat())):this.clear(!1),this.cdref.detectChanges()}clear(e=!0){this._date.moment=null,this._date.display="",this._date.valid=!0,this.valid.emit(!0),"function"==typeof this.onChange&&e&&this.onChange(this._date.moment)}datePicked(e,t){e&&(this._date.moment||(this._date.moment=new moment),moment.isMoment(e)||(e=moment(e)),this._date.moment.set("year",e.year()),this._date.moment.set("month",e.month()),this._date.moment.set("date",e.date()),t&&(this._date.moment.set("hour",e.hour()),this._date.moment.set("minute",e.minute())),this._date.display=this._date.moment.format(this.userpreferences.getDateFormat()),this._date.valid=!0,this.valid.emit(!0),"function"==typeof this.onChange&&this.onChange(this._date.moment))}openCalendar(){this.modal.openModal("Calendar").subscribe((e=>{e.instance.calendar.asPicker=!0,e.instance.calendar.pickerDate$.pipe((0,l.q)(1)).subscribe((t=>{e.instance.self.destroy(),this.datePicked(t,!0)}))}))}emitBlur(){this.elementRef.nativeElement.dispatchEvent(new Event("blur",{bubbles:!0}))}}return e=SystemInputDate,(0,i.Z)(SystemInputDate,"ɵfac",(function(t){return new(t||e)(n.Y36(n.SBq),n.Y36(n.Qsj),n.Y36(a.z),n.Y36(d.o),n.Y36(n.sBO),n.Y36(n.SBq))})),(0,i.Z)(SystemInputDate,"ɵcmp",n.Xpm({type:e,selectors:[["system-input-date"]],inputs:{isDirty:"isDirty",disabled:"disabled",id:"id",showClear:"showClear",hideError:["system-input-date-hide-error","hideError"]},outputs:{valid:"valid"},features:[n._Bn([{provide:o.JU,useExisting:(0,n.Gpc)((()=>e)),multi:!0}])],decls:9,vars:13,consts:[[1,"slds-form-element",3,"ngClass"],[1,"slds-form-element__control"],[1,"slds-combobox_container"],["system-dropdown-trigger","","role","combobox",1,"slds-combobox","slds-dropdown-trigger","slds-dropdown-trigger_click","slds-combobox-picklist","slds-timepicker",3,"stickyOnMobile"],["role","none",1,"slds-combobox__form-element","slds-input-has-icon","slds-input-has-icon_right"],["aria-controls","listbox-unique-id","autocomplete","off","role","textbox","type","text","placeholder"," ",1,"slds-input","slds-combobox__input",3,"disabled","ngModel","ngClass","id","ngModelChange","blur"],["class","slds-input__icon-group slds-input__icon-group_right slds-height_full slds-grid","style","top: 0; margin: 0; height: 100%",4,"ngIf"],["aria-hidden","false","class","slds-datepicker slds-dropdown slds-dropdown--large","role","dialog",3,"ngClass",4,"ngIf"],["class","slds-form-element__help",4,"ngIf"],[1,"slds-input__icon-group","slds-input__icon-group_right","slds-height_full","slds-grid",2,"top","0","margin","0","height","100%"],["class","slds-input__icon slds-input__icon_right slds-button slds-button_icon","style","position: relative;",3,"click",4,"ngIf"],["system-dropdown-trigger-button","",1,"slds-input__icon","slds-input__icon_right","slds-button","slds-button_icon",2,"position","relative"],["icon","event"],[1,"slds-input__icon","slds-input__icon_right","slds-button","slds-button_icon",2,"position","relative",3,"click"],["icon","clear"],["aria-hidden","false","role","dialog",1,"slds-datepicker","slds-dropdown","slds-dropdown--large",3,"ngClass"],[3,"setDate","datePicked"],["class","slds-grid slds-grid--align-center",4,"ngIf"],[1,"slds-grid","slds-grid--align-center"],[1,"slds-button","slds-text-link","slds-p-around--xx-small",3,"click"],["label","LBL_CALENDAR"],[1,"slds-form-element__help"],["label","LBL_INPUT_INVALID"]],template:function(e,t){1&e&&(n.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"input",5),n.NdJ("ngModelChange",(function(e){return t.display=e}))("blur",(function(){return t.emitBlur()})),n.qZA(),n.YNc(6,f,4,1,"div",6),n.qZA(),n.YNc(7,v,3,3,"div",7),n.qZA()()(),n.YNc(8,Z,2,0,"div",8),n.qZA()),2&e&&(n.Q6J("ngClass",n.VKq(9,_,!t.isValid)),n.xp6(3),n.Q6J("stickyOnMobile",!0),n.xp6(2),n.Q6J("disabled",t.isDisabled)("ngModel",t.display)("ngClass",n.VKq(11,y,t.isDirty))("id",t.id),n.xp6(1),n.Q6J("ngIf",!t.isDisabled),n.xp6(1),n.Q6J("ngIf",!t.isDisabled),n.xp6(1),n.Q6J("ngIf",!t.isValid&&!t.hideErrorMessage))},dependencies:[r.l,c.$,u.mk,u.O5,o.Fj,o.JJ,o.On,h.J,m.e,g._],encapsulation:2,changeDetection:0})),SystemInputDate})()},4114:(e,t,s)=>{"use strict";s.d(t,{e:()=>T});var i=s(1180),n=s(2242),o=s(5329),l=s(6559),a=s(2422),d=s(4755),r=s(5030),c=s(2656),u=s(3463),h=s(3543);function m(e,t){1&e&&n._UZ(0,"th",16)}function g(e,t){if(1&e&&(n.TgZ(0,"th",16)(1,"abbr",17),n._uU(2),n.qZA()()),2&e){const e=t.$implicit,s=t.index,i=n.oxw();n.xp6(1),n.Q6J("title",i.weekdayLong(s)),n.xp6(1),n.Oqu(e)}}function p(e,t){if(1&e&&(n.TgZ(0,"td",20)(1,"abbr",21),n._uU(2),n.qZA()()),2&e){const e=n.oxw().$implicit,t=n.oxw();n.xp6(1),n.Q6J("title",t.language.getLabel("LBL_WEEK")+" "+(null==e?null:e.number)),n.xp6(1),n.hij(" ",null==e?null:e.number," ")}}const f=function(e,t,s){return{"slds-disabled-text":e,"slds-is-today":t,"slds-is-selected":s}};function b(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"td",22),n.NdJ("click",(function(){const t=n.CHM(e).$implicit,s=n.oxw(2);return n.KtG(s.pickDate(t))})),n.TgZ(1,"span",23),n._uU(2),n.qZA()()}if(2&e){const e=t.$implicit,s=n.oxw(2);n.Q6J("ngClass",n.kEZ(2,f,s.disabled(e),s.isToday(e),s.isCurrent(e))),n.xp6(2),n.Oqu(e.date())}}function v(e,t){if(1&e&&(n.TgZ(0,"tr"),n.YNc(1,p,3,2,"td",18),n.YNc(2,b,3,6,"td",19),n.qZA()),2&e){const e=t.$implicit,s=n.oxw();n.xp6(1),n.Q6J("ngIf","small"!=s.layout.screenwidth),n.xp6(1),n.Q6J("ngForOf",null==e?null:e.days)}}function Z(e,t){if(1&e&&(n.TgZ(0,"td",20)(1,"abbr",21),n._uU(2),n.qZA()()),2&e){const e=n.oxw().$implicit,t=n.oxw(2);n.xp6(1),n.Q6J("title",t.language.getLabel("LBL_WEEK")+" "+(null==e?null:e.number)),n.xp6(1),n.hij(" ",null==e?null:e.number," ")}}function _(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"td",22),n.NdJ("click",(function(){const t=n.CHM(e).$implicit,s=n.oxw(3);return n.KtG(s.pickDate(t))})),n.TgZ(1,"span",23),n._uU(2),n.qZA()()}if(2&e){const e=t.$implicit,s=n.oxw(3);n.Q6J("ngClass",n.kEZ(2,f,s.disabled(e),s.isToday(e),s.isCurrent(e))),n.xp6(2),n.Oqu(null==e?null:e.date())}}function y(e,t){if(1&e&&(n.TgZ(0,"tr"),n.YNc(1,Z,3,2,"td",18),n.YNc(2,_,3,6,"td",19),n.qZA()),2&e){const e=t.$implicit,s=n.oxw(2);n.xp6(1),n.Q6J("ngIf","small"!=s.layout.screenwidth),n.xp6(1),n.Q6J("ngForOf",null==e?null:e.days)}}function x(e,t){if(1&e&&(n.TgZ(0,"tbody")(1,"tr")(2,"td",24)(3,"div",25)(4,"h2",26),n._uU(5),n.qZA(),n.TgZ(6,"div"),n._uU(7),n.qZA()()()(),n.YNc(8,y,3,2,"tr",13),n.qZA()),2&e){const e=n.oxw();n.xp6(2),n.uIk("colspan",e.weekdays.length+1),n.xp6(3),n.hij(" ",e.secondMonth," "),n.xp6(2),n.hij(" ",e.secondYearDisplay," "),n.xp6(1),n.Q6J("ngForOf",e.secondGrid)}}function w(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"button",27),n.NdJ("click",(function(t){n.CHM(e);const s=n.oxw();return n.KtG(s.goToday(t))})),n._UZ(1,"system-label",28),n.qZA()}}let T=(()=>{var e;class SystemInputDatePicker{constructor(e,t,s){(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"layout",void 0),(0,i.Z)(this,"userPreferences",void 0),(0,i.Z)(this,"currentGrid",[]),(0,i.Z)(this,"secondGrid",[]),(0,i.Z)(this,"yearsList",[]),(0,i.Z)(this,"setDate",void 0),(0,i.Z)(this,"dual",!1),(0,i.Z)(this,"minDate",void 0),(0,i.Z)(this,"maxDate",void 0),(0,i.Z)(this,"weekStartDay",0),(0,i.Z)(this,"showTodayButton",!0),(0,i.Z)(this,"datePicked",new n.vpe),(0,i.Z)(this,"curDate",new moment),(0,i.Z)(this,"secondDate",new moment),(0,i.Z)(this,"_currentYear",void 0),this.language=e,this.layout=t,this.userPreferences=s;let o=this.userPreferences.unchangedPreferences.global;this.weekStartDay="Monday"==o.week_day_start?1:this.weekStartDay}get currentYear(){return this._currentYear}set currentYear(e){this._currentYear=e,this.curDate.year(e.name),this.buildGrids()}set secondYear(e){this.curDate.year(e.length?e:e.name),this.buildGrids()}get secondYearDisplay(){return this.secondDate.year()}get currentMonth(){return moment.localeData().months()[this.curDate.month()]}get secondMonth(){return moment.localeData().months()[this.secondDate.month()]}get weekdays(){let e=this.language.currentlanguage.substring(0,2);moment.locale(e);let t=moment.weekdaysMin();if(1===this.weekStartDay){let e=t.shift();return t.push(e),t}return t}ngOnInit(){this.initializeGrid()}ngOnChanges(){this.initializeGrid()}initializeGrid(){this.setDate?(this.curDate=new moment(this.setDate),this.secondDate=new moment(this.setDate)):(this.curDate=new moment,this.secondDate=new moment),this.secondDate.add(1,"month"),this.buildYearsList(),this.buildGrids(),this._currentYear={id:this.curDate.year(),name:this.curDate.year()}}buildYearsList(){this.yearsList=new Array(11).fill("").map(((e,t)=>{let s=t-5+ +this.curDate.year();return{id:s.toString(),name:s.toString()}}))}weekdayLong(e){let t=this.language.currentlanguage.substring(0,2);return moment.locale(t),moment.weekdays(e+this.weekStartDay)}disabled(e){if(!e)return!1;if(e.isBefore(this.curDate,"month")||!this.dual&&e.isAfter(this.curDate,"month")||this.dual&&e.isAfter(this.secondDate,"month"))return!0;let t=new moment(e.format());return!(!this.minDate||!t.isBefore(this.minDate,"day"))||!(!this.maxDate||!t.isAfter(this.maxDate,"day"))}isToday(e){if(!e)return!1;let t=new moment;return t.isSame(e,"year")&&t.isSame(e,"month")&&t.isSame(e,"day")}isCurrent(e){return!!e&&(this.setDate&&this.setDate.isSame(e,"year")&&this.setDate.isSame(e,"month")&&this.setDate.isSame(e,"day"))}prevMonth(e){e.stopPropagation(),this.curDate.subtract(1,"months"),this.dual&&this.secondDate.subtract(1,"months"),this.buildGrids()}nextMonth(e){e.stopPropagation(),this.curDate.add(1,"months"),this.dual&&this.secondDate.add(1,"months"),this.buildGrids()}goToday(e){e.stopPropagation(),this.curDate=new moment,this.buildGrids()}pickDate(e){if(!e)return;let t=new moment(e.format());return(!this.minDate||!t.isBefore(this.minDate))&&((!this.maxDate||!t.isAfter(this.maxDate))&&void this.datePicked.emit(t))}buildGrids(){this.currentGrid=[],this.secondGrid=[],this.buildGridWeeks(this.currentGrid,this.curDate),this.dual&&this.buildGridWeeks(this.secondGrid,this.secondDate)}buildGridWeeks(e,t){let s=new moment(t);s.date(1),0==s.day()&&1==this.weekStartDay&&s.subtract(7,"d"),s.day(this.weekStartDay);let i=0;for(;i<6;){let n=0,o={days:[],number:s.format("W")};for(;n<7;)(t.isSame(this.curDate,"month")&&s.isSameOrBefore(this.curDate,"month")||!this.dual&&s.isAfter(this.curDate,"month")||this.dual&&t.isSame(this.secondDate,"month")&&s.isSameOrAfter(this.secondDate,"month"))&&(o.days[n]=moment(s.format())),s.add(1,"d"),n++;if(e.push(o),s.isAfter(t,"month")||s.isAfter(t,"year"))break;i++}}}return e=SystemInputDatePicker,(0,i.Z)(SystemInputDatePicker,"ɵfac",(function(t){return new(t||e)(n.Y36(o.d),n.Y36(l.b),n.Y36(a.z))})),(0,i.Z)(SystemInputDatePicker,"ɵcmp",n.Xpm({type:e,selectors:[["system-input-date-picker"]],hostAttrs:[1,"slds-datepicker"],inputs:{setDate:"setDate",dual:"dual",minDate:"minDate",maxDate:"maxDate",weekStartDay:"weekStartDay",showTodayButton:"showTodayButton"},outputs:{datePicked:"datePicked"},features:[n.TTD],decls:22,vars:12,consts:[[1,"slds-datepicker__filter","slds-grid"],[1,"slds-datepicker__filter_month","slds-grid","slds-grid_align-spread","slds-grow"],[1,"slds-align-middle"],["title","Previous Month",1,"slds-button","slds-button_icon","slds-button_icon-container",3,"click"],[3,"icon"],["aria-atomic","true","aria-live","assertive",1,"slds-align-middle"],["title","Next Month",1,"slds-button","slds-button_icon","slds-button_icon-container",3,"click"],[1,"slds-shrink-none"],[3,"selectList","ngModel","emitInputValueOnEnterPress","ngModelChange"],[1,"slds-p-left--x-small"],["aria-labelledby","month","aria-multiselectable","true","role","grid",1,"slds-datepicker__month"],["scope","col",4,"ngIf"],["scope","col",4,"ngFor","ngForOf"],[4,"ngFor","ngForOf"],[4,"ngIf"],["class","slds-button slds-align_absolute-center slds-text-link",3,"click",4,"ngIf"],["scope","col"],[3,"title"],["role","gridcell","class","slds-theme--shade",4,"ngIf"],["role","gridcell",3,"ngClass","click",4,"ngFor","ngForOf"],["role","gridcell",1,"slds-theme--shade"],[1,"slds-p-horizontal--xx-small",3,"title"],["role","gridcell",3,"ngClass","click"],[1,"slds-day"],[1,"slds-theme--shade"],[1,"slds-grid","slds-m-vertical--xx-small"],[1,"slds-size--1-of-2"],[1,"slds-button","slds-align_absolute-center","slds-text-link",3,"click"],["label","LBL_TODAY"]],template:function(e,t){1&e&&(n.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"button",3),n.NdJ("click",(function(e){return t.prevMonth(e)})),n._UZ(4,"system-button-icon",4),n.qZA()(),n.TgZ(5,"h2",5),n._uU(6),n.qZA(),n.TgZ(7,"div",2)(8,"button",6),n.NdJ("click",(function(e){return t.nextMonth(e)})),n._UZ(9,"system-button-icon",4),n.qZA()()(),n.TgZ(10,"div",7)(11,"system-select",8),n.NdJ("ngModelChange",(function(e){return t.currentYear=e})),n.qZA()()(),n.TgZ(12,"div",9)(13,"table",10)(14,"thead")(15,"tr"),n.YNc(16,m,1,0,"th",11),n.YNc(17,g,3,2,"th",12),n.qZA()(),n.TgZ(18,"tbody"),n.YNc(19,v,3,2,"tr",13),n.qZA(),n.YNc(20,x,9,4,"tbody",14),n.qZA()(),n.YNc(21,w,2,0,"button",15)),2&e&&(n.xp6(4),n.Q6J("icon","left"),n.xp6(2),n.AsE("",t.currentMonth," (",t.curDate.year(),")"),n.xp6(3),n.Q6J("icon","right"),n.xp6(2),n.Q6J("selectList",t.yearsList)("ngModel",t.currentYear)("emitInputValueOnEnterPress",!0),n.xp6(5),n.Q6J("ngIf","small"!=t.layout.screenwidth),n.xp6(1),n.Q6J("ngForOf",t.weekdays),n.xp6(2),n.Q6J("ngForOf",t.currentGrid),n.xp6(1),n.Q6J("ngIf",t.dual),n.xp6(1),n.Q6J("ngIf",t.showTodayButton))},dependencies:[d.mk,d.sg,d.O5,r.JJ,r.On,c.J,u._,h.R],encapsulation:2,changeDetection:0})),SystemInputDatePicker})()},7758:(e,t,s)=>{"use strict";s.d(t,{y:()=>a});var i=s(1180),n=s(2242),o=s(5030),l=s(3398);let a=(()=>{var e;class SystemInputDelayed{constructor(){(0,i.Z)(this,"onChange",void 0),(0,i.Z)(this,"onTouched",void 0),(0,i.Z)(this,"_value",void 0),(0,i.Z)(this,"_modeltimeout",void 0),(0,i.Z)(this,"delay",500),(0,i.Z)(this,"placeholder","")}get value(){return this._value}set value(e){this._value=e,this._modeltimeout&&window.clearTimeout(this._modeltimeout),this._modeltimeout=window.setTimeout((()=>this.onChange(this._value)),this.delay)}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}writeValue(e){this._value=e}}return e=SystemInputDelayed,(0,i.Z)(SystemInputDelayed,"ɵfac",(function(t){return new(t||e)})),(0,i.Z)(SystemInputDelayed,"ɵcmp",n.Xpm({type:e,selectors:[["system-input-delayed"]],inputs:{delay:"delay",placeholder:"placeholder"},features:[n._Bn([{provide:o.JU,useExisting:(0,n.Gpc)((()=>e)),multi:!0}])],decls:3,vars:2,consts:[[1,"slds-form-element"],[1,"slds-form-element__control"],["type","text",1,"slds-input",3,"system-placeholder","ngModel","ngModelChange"]],template:function(e,t){1&e&&(n.TgZ(0,"div",0)(1,"div",1)(2,"input",2),n.NdJ("ngModelChange",(function(e){return t.value=e})),n.qZA()()()),2&e&&(n.xp6(2),n.Q6J("system-placeholder",t.placeholder)("ngModel",t.value))},dependencies:[l.A,o.Fj,o.JJ,o.On],encapsulation:2})),SystemInputDelayed})()},5147:(e,t,s)=>{"use strict";s.d(t,{r:()=>c});var i=s(1180),n=s(2242),o=s(5030),l=s(4154),a=s(5329),d=s(4755);function r(e,t){if(1&e&&(n.TgZ(0,"option",5),n._uU(1),n.qZA()),2&e){const e=t.$implicit;n.Q6J("value",e.value),n.xp6(1),n.Oqu(e.display)}}let c=(()=>{var e;class SystemInputEnum{constructor(e,t){(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"module",void 0),(0,i.Z)(this,"field",void 0),(0,i.Z)(this,"sortdirection",void 0),(0,i.Z)(this,"options",[]),(0,i.Z)(this,"onChange",void 0),(0,i.Z)(this,"onTouched",void 0),(0,i.Z)(this,"_value",void 0),this.metadata=e,this.language=t}get value(){return this._value}set value(e){e!=this._value&&(this._value=e,this.onChange(e))}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}writeValue(e){this._value=e}ngOnInit(){this.getOptions()}getOptions(){let e=[],t=this.language.getFieldDisplayOptions(this.module,this.field);for(let s in t)e.push({value:s,display:t[s]});if(this.options=e,this.sortdirection)switch(this.sortdirection.toLowerCase()){case"desc":this.options.sort(((e,t)=>e.display.toLowerCase()<t.display.toLowerCase()?1:-1));break;case"asc":this.options.sort(((e,t)=>e.display.toLowerCase()>t.display.toLowerCase()?1:-1))}}}return e=SystemInputEnum,(0,i.Z)(SystemInputEnum,"ɵfac",(function(t){return new(t||e)(n.Y36(l.Pu),n.Y36(a.d))})),(0,i.Z)(SystemInputEnum,"ɵcmp",n.Xpm({type:e,selectors:[["system-input-enum"]],inputs:{module:"module",field:"field",sortdirection:"sortdirection"},features:[n._Bn([{provide:o.JU,useExisting:(0,n.Gpc)((()=>e)),multi:!0}])],decls:5,vars:2,consts:[[1,"slds-form-element"],[1,"slds-select_container"],[1,"slds-select",3,"ngModel","ngModelChange"],["focus",""],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(e,t){1&e&&(n.TgZ(0,"div",0)(1,"div",1)(2,"select",2,3),n.NdJ("ngModelChange",(function(e){return t.value=e})),n.YNc(4,r,2,2,"option",4),n.qZA()()()),2&e&&(n.xp6(2),n.Q6J("ngModel",t.value),n.xp6(2),n.Q6J("ngForOf",t.options))},dependencies:[d.sg,o.YN,o.Kr,o.EJ,o.JJ,o.On],encapsulation:2})),SystemInputEnum})()},6659:(e,t,s)=>{"use strict";s.d(t,{a:()=>f});var i=s(1180),n=s(2242),o=s(5030),l=s(5329),a=s(4154),d=s(4755),r=s(6898),c=s(4036),u=s(7302);function h(e,t){if(1&e&&(n.TgZ(0,"option",8),n._uU(1),n.qZA()),2&e){const e=t.$implicit;n.Q6J("value",e.id),n.xp6(1),n.Oqu(e.name)}}function m(e,t){if(1&e&&(n.TgZ(0,"optgroup",6),n.YNc(1,h,2,2,"option",7),n.ALo(2,"systemmodulecustompipe"),n.qZA()),2&e){const e=n.oxw();n.Q6J("label","custom "+e.language.getLabel("LBL_FIELDSET")),n.xp6(1),n.Q6J("ngForOf",n.xi3(2,2,e._fieldsets,e._module))}}function g(e,t){if(1&e&&(n.TgZ(0,"option",8),n._uU(1),n.qZA()),2&e){const e=t.$implicit;n.Q6J("value",e.id),n.xp6(1),n.Oqu(e.name)}}function p(e,t){if(1&e&&(n.TgZ(0,"optgroup",6),n.YNc(1,g,2,2,"option",7),n.ALo(2,"systemmoduleglobalpipe"),n.qZA()),2&e){const e=n.oxw();n.Q6J("label","global "+e.language.getLabel("LBL_FIELDSET")),n.xp6(1),n.Q6J("ngForOf",n.xi3(2,2,e._fieldsets,e._module))}}let f=(()=>{var e;class SystemInputFieldset{constructor(e,t){(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"disabled",!1),(0,i.Z)(this,"onChange",void 0),(0,i.Z)(this,"onTouched",void 0),(0,i.Z)(this,"_fieldset",void 0),(0,i.Z)(this,"_fieldsets",[]),(0,i.Z)(this,"_module",""),this.language=e,this.metadata=t,this._fieldsets=this.metadata.getFieldSets()}get fieldset(){return this._fieldset}set fieldset(e){this._fieldset=e,this.onChange(e)}detectModule(){this._fieldset&&(this._module=this.metadata.getFieldset(this._fieldset).module)}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}writeValue(e){this._fieldset=e,this.detectModule()}}return e=SystemInputFieldset,(0,i.Z)(SystemInputFieldset,"ɵfac",(function(t){return new(t||e)(n.Y36(l.d),n.Y36(a.Pu))})),(0,i.Z)(SystemInputFieldset,"ɵcmp",n.Xpm({type:e,selectors:[["system-input-fieldset"]],inputs:{disabled:"disabled"},features:[n._Bn([{provide:o.JU,useExisting:(0,n.Gpc)((()=>e)),multi:!0}])],decls:10,vars:12,consts:[[1,"slds-grid"],[1,"slds-p-right--xxx-small","slds-size--1-of-3",3,"ngModel","displayAsterisk","ngModelChange"],[1,"slds-form-element__control","slds-p-left--xxx-small","slds-size--2-of-3"],[1,"slds-select_container"],[1,"slds-select",3,"disabled","ngModel","ngModelChange"],[3,"label",4,"ngIf"],[3,"label"],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(e,t){1&e&&(n.TgZ(0,"div",0)(1,"system-input-module",1),n.NdJ("ngModelChange",(function(e){return t._module=e})),n.qZA(),n.TgZ(2,"div",2)(3,"div",3)(4,"select",4),n.NdJ("ngModelChange",(function(e){return t.fieldset=e})),n._UZ(5,"option"),n.YNc(6,m,3,5,"optgroup",5),n.ALo(7,"systemmodulecustompipe"),n.YNc(8,p,3,5,"optgroup",5),n.ALo(9,"systemmoduleglobalpipe"),n.qZA()()()()),2&e&&(n.xp6(1),n.Q6J("ngModel",t._module)("displayAsterisk",!0),n.xp6(3),n.Q6J("disabled",!t._module||t.disabled)("ngModel",t.fieldset),n.xp6(2),n.Q6J("ngIf",n.xi3(7,6,t._fieldsets,t._module.length>0)),n.xp6(2),n.Q6J("ngIf",n.xi3(9,9,t._fieldsets,t._module.length>0)))},dependencies:[d.sg,d.O5,o.YN,o.Kr,o.EJ,o.JJ,o.On,r.a,c.N,u.m],encapsulation:2})),SystemInputFieldset})()},6041:(e,t,s)=>{"use strict";s.d(t,{K:()=>I});var i=s(5861),n=s(1180),o=s(2242),l=s(5030),a=s(1135),d=s(6625),r=s(5920),c=s(3278),u=s(3441),h=s(5710),m=s(4505),g=s(4044),p=s(5329),f=s(9774),b=s(151),v=s(4755),Z=s(2656),y=s(7693),x=s(3463);const w=["inputFile"],T=function(e){return{"slds-has-error":e}};function C(e,t){if(1&e){const e=o.EpF();o.TgZ(0,"div",3)(1,"div",4),o.NdJ("system-drop-file",(function(t){o.CHM(e);const s=o.oxw();return o.KtG(s.uploadFile(t))})),o.TgZ(2,"input",5,6),o.NdJ("change",(function(){o.CHM(e);const t=o.MAs(3),s=o.oxw();return o.KtG(s.uploadFile(t.files))}))("click",(function(){o.CHM(e);const t=o.MAs(3);return o.KtG(t.value=null)})),o.qZA(),o.TgZ(4,"label",7)(5,"span",8),o._UZ(6,"system-button-icon",9)(7,"system-label",10),o.qZA(),o.TgZ(8,"span",11),o._UZ(9,"system-label",12)(10,"system-label",13),o.qZA()()()()}if(2&e){const e=o.oxw();o.xp6(1),o.Q6J("ngClass",o.VKq(5,T,e.hasError)),o.xp6(1),o.Q6J("accept",e.accept)("disabled",e.disabled)("id",e.elementID),o.xp6(2),o.Q6J("for",e.elementID)}}function A(e,t){if(1&e){const e=o.EpF();o.ynx(0),o.TgZ(1,"span",17),o._UZ(2,"system-file-icon",18),o.qZA(),o.TgZ(3,"a",19)(4,"div",20),o._uU(5),o.qZA()(),o.TgZ(6,"button",21),o.NdJ("click",(function(){o.CHM(e);const t=o.oxw(2);return o.KtG(t.removeFile())})),o._UZ(7,"system-button-icon",22),o.qZA(),o.BQk()}if(2&e){const e=o.oxw(2);o.xp6(2),o.Q6J("filename",e.file.file_name)("filemimetype",e.file.file_mime_type),o.xp6(2),o.Q6J("system-title",e.file.file_name),o.xp6(1),o.hij(" ",e.file.file_name," ")}}function k(e,t){if(1&e&&(o.TgZ(0,"a",19)(1,"div",20),o._uU(2),o.qZA(),o.TgZ(3,"div",23)(4,"div",24),o._UZ(5,"span",25),o.qZA(),o.TgZ(6,"div",26),o._uU(7),o.qZA()()()),2&e){const e=o.oxw(2);o.xp6(1),o.Q6J("system-title",e.file.file_name),o.xp6(1),o.hij(" ",e.file.file_name," "),o.xp6(3),o.Udp("width",e.fileProgress,"%"),o.xp6(2),o.hij(" ",e.fileProgress," % ")}}function L(e,t){if(1&e&&(o.TgZ(0,"div",14),o.YNc(1,A,8,4,"ng-container",15),o.YNc(2,k,8,5,"ng-template",null,16,o.W1O),o.qZA()),2&e){const e=o.MAs(3),t=o.oxw();o.Q6J("ngClass",o.VKq(3,T,t.hasError)),o.xp6(1),o.Q6J("ngIf",!t.isUploading)("ngIfElse",e)}}let I=(()=>{var e;class SystemInputFile{constructor(e,t,s,i,l,a,d,r,c){(0,n.Z)(this,"configurationService",void 0),(0,n.Z)(this,"session",void 0),(0,n.Z)(this,"toast",void 0),(0,n.Z)(this,"helper",void 0),(0,n.Z)(this,"model",void 0),(0,n.Z)(this,"backend",void 0),(0,n.Z)(this,"modal",void 0),(0,n.Z)(this,"cdRef",void 0),(0,n.Z)(this,"language",void 0),(0,n.Z)(this,"inputFile",void 0),(0,n.Z)(this,"fieldName",void 0),(0,n.Z)(this,"accept","*"),(0,n.Z)(this,"disabled",!1),(0,n.Z)(this,"hasError",!1),(0,n.Z)(this,"onRemove",new o.vpe),(0,n.Z)(this,"isUploading",!1),(0,n.Z)(this,"elementID",_.uniqueId("input-file")),(0,n.Z)(this,"onChange",void 0),(0,n.Z)(this,"onTouched",void 0),(0,n.Z)(this,"fileProgress",0),(0,n.Z)(this,"file",void 0),this.configurationService=e,this.session=t,this.toast=s,this.helper=i,this.model=l,this.backend=a,this.modal=d,this.cdRef=r,this.language=c}registerOnChange(e){this.onChange=t=>{e(t)}}registerOnTouched(e){this.onTouched=e}writeValue(e){this.file=e}uploadFile(e){var t=this;return(0,i.Z)((function*(){if(0==e.length)return;t.isUploading=!0,t.cdRef.detectChanges(),t.file={file_name:e[0].name,file_mime_type:e[0].type,file_size:t.helper.humanFileSize(e[0].size)};let s=t.configurationService.getSystemParamater("upload_maxsize");if(s&&e[0].size>s)return void t.toast.sendToast(t.language.getLabelFormatted("LBL_EXCEEDS_MAX_UPLOADFILESIZE",[t.file.file_name,t.helper.humanFileSize(s)]),"error");let i=new a.X(0);i.subscribe((e=>{t.fileProgress=Math.floor(e),t.cdRef.detectChanges()}));const n=yield t.readFileAsync(e[0]),o={file:n.substring(n.indexOf("base64,")+7),filename:t.file.file_name,filemimetype:t.file.file_mime_type};t.backend.postRequestWithProgress("common/spiceattachments",null,o,i).subscribe((e=>{t.file.file_md5=e[0].filemd5,t.onChange({...t.file,remove:()=>t.removeFile(!0)}),t.isUploading=!1,t.cdRef.detectChanges()}))}))()}readFileAsync(e){return(0,i.Z)((function*(){return new Promise(((t,s)=>{const i=new FileReader;i.onload=()=>t(i.result.toString()),i.onerror=s,i.readAsDataURL(e)}))}))()}removeFile(e){this.file=void 0,this.cdRef.detectChanges(),e||this.onRemove.emit()}}return e=SystemInputFile,(0,n.Z)(SystemInputFile,"ɵfac",(function(t){return new(t||e)(o.Y36(d.C),o.Y36(r.n),o.Y36(c.A),o.Y36(u._),o.Y36(h.o),o.Y36(m.y),o.Y36(g.o),o.Y36(o.sBO),o.Y36(p.d))})),(0,n.Z)(SystemInputFile,"ɵcmp",o.Xpm({type:e,selectors:[["system-input-file"]],viewQuery:function(e,t){if(1&e&&o.Gf(w,5,o.s_b),2&e){let e;o.iGM(e=o.CRH())&&(t.inputFile=e.first)}},inputs:{fieldName:"fieldName",accept:"accept",disabled:"disabled",hasError:"hasError"},outputs:{onRemove:"onRemove"},features:[o._Bn([{provide:l.JU,useExisting:(0,o.Gpc)((()=>e)),multi:!0}])],decls:4,vars:2,consts:[[1,"slds-form-element__control","slds-grid","slds-grid--align-spread","slds-p-vertical--xx-small","slds-is-relative","slds-size--1-of-1"],["class","slds-file-selector slds-file-selector_files slds-is-relative slds-size--1-of-1",4,"ngIf","ngIfElse"],["fileContainer",""],[1,"slds-file-selector","slds-file-selector_files","slds-is-relative","slds-size--1-of-1"],[1,"slds-file-selector__dropzone","slds-p-around--small","slds-is-relative","slds-size--1-of-1",3,"ngClass","system-drop-file"],["type","file",1,"slds-file-selector__input","slds-assistive-text","slds-has-error",3,"accept","disabled","id","change","click"],["inputFile",""],[1,"slds-file-selector__body",2,"cursor","pointer",3,"for"],[1,"slds-file-selector__button","slds-button","slds-button_neutral"],["icon","upload",1,"slds-m-right--xx-small","slds-align--absolute-center"],["label","LBL_UPLOAD_FILE"],[1,"slds-file-selector__text","slds-medium-show"],["label","LBL_OR"],["label","LBL_DROP_FILE"],[1,"slds-pill","slds-pill_link","slds-size--1-of-1",3,"ngClass"],[4,"ngIf","ngIfElse"],["uploadingContainer",""],[1,"slds-pill__icon_container","slds-m-left--xxx-small"],["divClass","","size","small",3,"filename","filemimetype"],["href","javascript:void(0);",1,"slds-pill__action","slds-p-around--xx-small"],[1,"slds-pill__label","slds-truncate",2,"width","calc(100% - 20px)",3,"system-title"],["system-title","LBL_REMOVE",1,"slds-button","slds-button_icon","slds-button_icon","slds-pill__remove","slds-m-right--xx-small",3,"click"],["icon","close"],[1,"slds-grid","slds-grid_vertical-align-center","slds-grid--align-spread","slds-has-flexi-truncate","slds-size--1-of-1"],[1,"slds-progress-bar"],[1,"slds-progress-bar__value"],[1,"slds-p-left--xx-small",2,"width","50px"]],template:function(e,t){if(1&e&&(o.TgZ(0,"div",0),o.YNc(1,C,11,7,"div",1),o.YNc(2,L,4,5,"ng-template",null,2,o.W1O),o.qZA()),2&e){const e=o.MAs(3);o.xp6(1),o.Q6J("ngIf",!t.file)("ngIfElse",e)}},dependencies:[f.M,b.S,v.mk,v.O5,Z.J,y.T,x._],encapsulation:2,changeDetection:0})),SystemInputFile})()},638:(e,t,s)=>{"use strict";s.d(t,{n:()=>l});var i=s(1180),n=s(2242),o=s(5030);let l=(()=>{var e;class SystemInputInteger{constructor(e){(0,i.Z)(this,"elementRef",void 0),(0,i.Z)(this,"onChange",void 0),(0,i.Z)(this,"onTouched",void 0),(0,i.Z)(this,"_value",void 0),(0,i.Z)(this,"disabled",!1),this.elementRef=e}get value(){return this._value}set value(e){e!=this._value&&(this._value=e,this.onChange(e))}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}writeValue(e){this._value=e}emitBlur(){this.elementRef.nativeElement.dispatchEvent(new Event("blur",{bubbles:!0}))}}return e=SystemInputInteger,(0,i.Z)(SystemInputInteger,"ɵfac",(function(t){return new(t||e)(n.Y36(n.SBq))})),(0,i.Z)(SystemInputInteger,"ɵcmp",n.Xpm({type:e,selectors:[["system-input-integer"]],inputs:{disabled:"disabled"},features:[n._Bn([{provide:o.JU,useExisting:(0,n.Gpc)((()=>e)),multi:!0}])],decls:3,vars:2,consts:[[1,"slds-form-element"],[1,"slds-form-element__control"],["type","number",1,"slds-input","slds-text-align--right",3,"ngModel","disabled","ngModelChange","blur"]],template:function(e,t){1&e&&(n.TgZ(0,"div",0)(1,"div",1)(2,"input",2),n.NdJ("ngModelChange",(function(e){return t.value=e}))("blur",(function(){return t.emitBlur()})),n.qZA()()()),2&e&&(n.xp6(2),n.Q6J("ngModel",t.value)("disabled",t.disabled))},dependencies:[o.Fj,o.wV,o.JJ,o.On],encapsulation:2})),SystemInputInteger})()},3497:(e,t,s)=>{"use strict";s.d(t,{$:()=>_});var i=s(1180),n=s(2242),o=s(5030),l=s(5329),a=s(4044),d=s(6163),r=s(3398),c=s(4755),u=s(2656),h=s(3463),m=s(8859);function g(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"button",16),n.NdJ("click",(function(){n.CHM(e);const t=n.oxw(2);return n.KtG(t.clearField())})),n._UZ(1,"system-button-icon",17),n.qZA()}2&e&&(n.xp6(1),n.Q6J("icon","close"))}const p=function(e){return{"slds-theme--shade":e}};function f(e,t){if(1&e&&(n.TgZ(0,"div",10)(1,"div",11)(2,"span",12)(3,"span",13),n._UZ(4,"system-label",14),n._uU(5),n.qZA(),n.YNc(6,g,2,1,"button",15),n.qZA()()()),2&e){const e=n.oxw();n.xp6(2),n.Q6J("ngClass",n.VKq(4,p,e._disabled)),n.xp6(2),n.Q6J("label",e.label),n.xp6(1),n.hij(" (",e.label,")"),n.xp6(1),n.Q6J("ngIf",!e._disabled)}}function b(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"div",18)(1,"input",19),n.NdJ("ngModelChange",(function(t){n.CHM(e);const s=n.oxw();return n.KtG(s.searchterm=t)}))("keyup",(function(t){n.CHM(e);const s=n.oxw();return n.KtG(s.keyup(t))}))("blur",(function(){n.CHM(e);const t=n.oxw();return n.KtG(t.onBlur())})),n.qZA()()}if(2&e){const e=n.oxw();n.xp6(1),n.Q6J("disabled",e._disabled)("ngModel",e.searchterm)}}function v(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"li",20),n.NdJ("mousedown",(function(){const t=n.CHM(e).$implicit,s=n.oxw();return n.KtG(s.selectLabel(t.label))})),n.TgZ(1,"div",21)(2,"span",22),n._uU(3),n.qZA()()()}if(2&e){const e=t.$implicit;n.xp6(3),n.AsE("",e.label," [",e.translation,"]")}}const Z=function(e){return{"slds-is-open":e}};let _=(()=>{var e;class SystemInputLabel{set disabled(e){this._disabled=!1!==e}constructor(e,t,s){(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"modal",void 0),(0,i.Z)(this,"modelutilities",void 0),(0,i.Z)(this,"_disabled",!1),(0,i.Z)(this,"onChange",void 0),(0,i.Z)(this,"onTouched",void 0),(0,i.Z)(this,"_time",{display:"",moment:null,offset:0,valid:!0}),(0,i.Z)(this,"label",""),(0,i.Z)(this,"_searchterm",""),(0,i.Z)(this,"clickListener",void 0),(0,i.Z)(this,"foundlabels",[]),this.language=e,this.modal=t,this.modelutilities=s}get isOpen(){return""!=this._searchterm}get searchterm(){return this._searchterm}set searchterm(e){this._searchterm=e,this.dosearch()}ngOnDestroy(){this.clickListener&&this.clickListener()}onBlur(){this._searchterm=""}dosearch(){this._searchterm?this.foundlabels=this.language.searchLabel(this._searchterm,50):this.foundlabels=[]}selectLabel(e){this.label=e,this._searchterm="",this.onChange(e)}clearField(){this.label="",this.onChange("")}keyup(e){if("Enter"===e.key)this.label=this._searchterm,this.onChange(this.label),this._searchterm=""}addLabel(){let e={id:this.modelutilities.generateGuid(),name:"",scope:"custom",custom_translations:[],global_translations:[]};e.custom_translations.push({id:this.modelutilities.generateGuid(),syslanguagelabel_id:e.id,syslanguage:this.language.languagedata.languages.default}),this.modal.openModal("LanguageLabelModal").subscribe((t=>{t.instance.label=e,t.instance.label$.subscribe((e=>{e&&(this.label=e.name,this.onChange(this.label))}))}))}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}writeValue(e){this.label=e}}return e=SystemInputLabel,(0,i.Z)(SystemInputLabel,"ɵfac",(function(t){return new(t||e)(n.Y36(l.d),n.Y36(a.o),n.Y36(d.A))})),(0,i.Z)(SystemInputLabel,"ɵcmp",n.Xpm({type:e,selectors:[["system-input-label"]],inputs:{disabled:"disabled"},features:[n._Bn([{provide:o.JU,useExisting:(0,n.Gpc)((()=>e)),multi:!0}])],decls:10,vars:8,consts:[[1,"slds-combobox_container"],["role","combobox",1,"slds-combobox","slds-dropdown-trigger","slds-dropdown-trigger_click",3,"ngClass"],["class","slds-form-element__control",4,"ngIf"],["class","slds-combobox__form-element slds-input-has-icon slds-input-has-icon_right",4,"ngIf"],["role","listbox",1,"slds-dropdown","slds-dropdown_fluid","slds-dropdown--length-7"],["role","presentation",1,"slds-listbox","slds-listbox_vertical"],["role","presentation","class","slds-listbox__item",3,"mousedown",4,"ngFor","ngForOf"],["role","presentation",1,"slds-listbox__item","slds-border_top","slds-p-vertical--xx-small",3,"mousedown"],[1,"slds-button","slds-button--icon","slds-align_absolute-center"],[3,"icon","size"],[1,"slds-form-element__control"],[1,"slds-pill_container"],[1,"slds-pill","slds-size--1-of-1","slds-p-horizontal--xx-small",3,"ngClass"],[1,"slds-pill__label"],[3,"label"],["class","slds-button slds-button--icon slds-pill__remove",3,"click",4,"ngIf"],[1,"slds-button","slds-button--icon","slds-pill__remove",3,"click"],[3,"icon"],[1,"slds-combobox__form-element","slds-input-has-icon","slds-input-has-icon_right"],["type","search","system-placeholder","LBL_SEARCH","role","combobox",1,"slds-input","slds-combobox__input",3,"disabled","ngModel","ngModelChange","keyup","blur"],["role","presentation",1,"slds-listbox__item",3,"mousedown"],["role","option",1,"slds-media","slds-listbox__option","slds-listbox__option_plain"],[1,"slds-truncate"]],template:function(e,t){1&e&&(n.TgZ(0,"div",0)(1,"div",1),n.YNc(2,f,7,6,"div",2),n.YNc(3,b,2,2,"div",3),n.TgZ(4,"div",4)(5,"ul",5),n.YNc(6,v,4,2,"li",6),n.TgZ(7,"li",7),n.NdJ("mousedown",(function(){return t.addLabel()})),n.TgZ(8,"button",8),n._UZ(9,"system-utility-icon",9),n.qZA()()()()()()),2&e&&(n.xp6(1),n.Q6J("ngClass",n.VKq(6,Z,t.isOpen)),n.xp6(1),n.Q6J("ngIf",t.label),n.xp6(1),n.Q6J("ngIf",!t.label),n.xp6(3),n.Q6J("ngForOf",t.foundlabels),n.xp6(3),n.Q6J("icon","add")("size","x-small"))},dependencies:[r.A,c.mk,c.sg,c.O5,o.Fj,o.JJ,o.On,u.J,h._,m.r],encapsulation:2})),SystemInputLabel})()},2547:(e,t,s)=>{"use strict";s.d(t,{l:()=>F});var i=s(1180),n=s(2242),o=s(5030),l=s(5329),a=s(4154),d=s(6550),r=s(3278),c=s(2422),u=s(3144),h=s(2067),m=s(9774),g=s(4021),p=s(4755),f=s(4610),b=s(2656),v=s(7514),Z=s(5621),y=s(3463);const x=["fileselector"],w=["imgelement"],T=["bottomtoolbar"],C=["toolbar"];function A(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"li")(1,"button",11),n.NdJ("click",(function(){n.CHM(e);const t=n.oxw();return n.KtG(t.removeModifications())})),n._UZ(2,"system-button-icon",25),n.qZA()()}if(2&e){const e=n.oxw();n.xp6(1),n.s9C("title",e.language.getLabel("LBL_REMOVE_MODIFICATIONS")),n.Q6J("disabled",!e.cropper||!e.isEdited)}}function k(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"div",26)(1,"system-checkbox",27),n.NdJ("ngModelChange",(function(t){n.CHM(e);const s=n.oxw();return n.KtG(s.doResizeByUser=t)})),n._UZ(2,"system-label",28),n.qZA(),n.TgZ(3,"system-input-number",29),n.NdJ("ngModelChange",(function(t){n.CHM(e);const s=n.oxw();return n.KtG(s.maxWidthInput=t)}))("change",(function(){n.CHM(e);const t=n.oxw();return n.KtG(t.maxWidthChanged())})),n.qZA(),n.TgZ(4,"div",30),n._uU(5,"px"),n.qZA(),n.TgZ(6,"div",31),n._uU(7,"x"),n.qZA(),n.TgZ(8,"system-input-number",29),n.NdJ("ngModelChange",(function(t){n.CHM(e);const s=n.oxw();return n.KtG(s.maxHeightInput=t)}))("change",(function(){n.CHM(e);const t=n.oxw();return n.KtG(t.maxHeightChanged())})),n.qZA(),n.TgZ(9,"div",30),n._uU(10,"px"),n.qZA()()}if(2&e){const e=n.oxw();n.xp6(1),n.Q6J("ngModel",e.doResizeByUser)("disabled",!e.canResize),n.xp6(2),n.MGl("placeholder","",e.language.getLabel("LBL_WIDTH")," "),n.Q6J("ngModel",e.maxWidthInput)("disabled",!e.doResizeByUser||!e.canResize),n.xp6(5),n.MGl("placeholder","",e.language.getLabel("LBL_HEIGHT")," "),n.Q6J("ngModel",e.maxHeightInput)("disabled",!e.doResizeByUser||!e.canResize)}}function L(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"img",32,33),n.NdJ("load",(function(t){n.CHM(e);const s=n.oxw();return n.KtG(s.imageLoaded(t))})),n.qZA()}if(2&e){const e=n.oxw();n.Q6J("src",e.mediaBase64,n.LSH)}}function I(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"div",34)(1,"div",35)(2,"button",36),n.NdJ("click",(function(){n.CHM(e);const t=n.oxw();return n.KtG(t.triggerFileSelectionDialog())})),n._UZ(3,"system-label",37),n.qZA(),n.TgZ(4,"input",38,39),n.NdJ("change",(function(){n.CHM(e);const t=n.oxw();return n.KtG(t.fileSelectionChange())})),n.qZA(),n.TgZ(6,"div",31),n._UZ(7,"system-label",40),n.qZA()()()}}function M(e,t){if(1&e&&(n.TgZ(0,"div",41),n._uU(1),n.qZA()),2&e){const e=n.oxw();n.xp6(1),n.hij("Format: ",e.mediaMetaData.fileformat.toUpperCase(),"")}}function S(e,t){if(1&e&&(n.TgZ(0,"span"),n._uU(1),n.qZA()),2&e){const e=n.oxw(2);n.xp6(1),n.AsE("  →  ",e.mediaMetaData.width," × ",e.mediaMetaData.height," px")}}function J(e,t){if(1&e&&(n.TgZ(0,"div"),n._uU(1),n.YNc(2,S,2,2,"span",6),n.qZA()),2&e){const e=n.oxw();n.xp6(1),n.AsE("",e.mediaMetaData.originalWidth," × ",e.mediaMetaData.originalHeight," px"),n.xp6(1),n.Q6J("ngIf",e.isResized)}}function O(e,t){1&e&&(n.TgZ(0,"div"),n._uU(1," "),n.qZA())}const N=function(e){return{height:e}};let F=(()=>{var e;class SystemInputMedia{set allowModifications(e){this.allowMirroring=this.allowResizing=this.allowRotating=this.allowCropping=e}set _mimetype(e){this.mediaMetaData.mimetype=e,this.mediaMetaData.fileformat=this.getFileformatFromMimetype(this.mediaMetaData.mimetype)}get maxWidthBySystem(){return this._maxWidthBySystem}set maxWidthBySystem(e){this._maxWidthBySystem=e,this.calcTargetSize()}get maxHeightBySystem(){return this._maxHeightBySystem}set maxHeightBySystem(e){this._maxHeightBySystem=e,this.calcTargetSize()}constructor(e,t,s,o,l,a,d,r,c,u){(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"sanitizer",void 0),(0,i.Z)(this,"toast",void 0),(0,i.Z)(this,"userprefs",void 0),(0,i.Z)(this,"componentElRef",void 0),(0,i.Z)(this,"renderer",void 0),(0,i.Z)(this,"http",void 0),(0,i.Z)(this,"cd",void 0),(0,i.Z)(this,"libloader",void 0),(0,i.Z)(this,"onChange",void 0),(0,i.Z)(this,"onTouched",void 0),(0,i.Z)(this,"componentHeight",500),(0,i.Z)(this,"allowCropping",!0),(0,i.Z)(this,"allowResizing",!0),(0,i.Z)(this,"allowRotating",!0),(0,i.Z)(this,"allowMirroring",!0),(0,i.Z)(this,"mimetype",new n.vpe),(0,i.Z)(this,"fileSelector",void 0),(0,i.Z)(this,"imageElement",void 0),(0,i.Z)(this,"bottomToolbar",void 0),(0,i.Z)(this,"toolbar",void 0),(0,i.Z)(this,"mediaBase64",null),(0,i.Z)(this,"cropper",null),(0,i.Z)(this,"fileformatErrorMessageCode",null),(0,i.Z)(this,"fileFromBrowser",null),(0,i.Z)(this,"maxWidthInput",""),(0,i.Z)(this,"maxHeightInput",""),(0,i.Z)(this,"_maxWidthByUser",null),(0,i.Z)(this,"_maxHeightByUser",null),(0,i.Z)(this,"_maxWidthBySystem",null),(0,i.Z)(this,"_maxHeightBySystem",null),(0,i.Z)(this,"isCropped",!1),(0,i.Z)(this,"isImported",!1),(0,i.Z)(this,"mediaMetaData",void 0),(0,i.Z)(this,"_doResizeByUser",!1),(0,i.Z)(this,"isLoading",!1),(0,i.Z)(this,"unlistenPasteEvent",void 0),(0,i.Z)(this,"xMirrored",1),(0,i.Z)(this,"yMirrored",1),(0,i.Z)(this,"currentRotation",0),(0,i.Z)(this,"jpegCompressionLevel",.95),(0,i.Z)(this,"lastCropBoxData",{}),this.language=e,this.metadata=t,this.sanitizer=s,this.toast=o,this.userprefs=l,this.componentElRef=a,this.renderer=d,this.http=r,this.cd=c,this.libloader=u,this.resetMediaMetaData(),this.unlistenPasteEvent=this.renderer.listen("window","paste",(e=>{this.handlePaste(e)}))}handlePaste(e){if(e.preventDefault(),e.stopPropagation(),!this.isLoading&&(e.clipboardData.files&&e.clipboardData.files[0]&&(this.fileFromBrowser=e.clipboardData.files[0],this.fileSelectedOrDropped()),e.clipboardData.items&&e.clipboardData.items[0])){const t=e.clipboardData.items[0];if("string"===t.kind)t.getAsString((e=>{this.stringLooksLikeUrl(e)&&(this.resetFileNotAllowedError(),this.isLoading=!0,this.cd.detectChanges(),this.http.get("proxy/?useurl="+btoa(e),{observe:"response",responseType:"blob"}).subscribe((t=>{this.isLoading=!1,this.cd.detectChanges(),this.fileFromBrowser=null,this.checkMimetype(t.body.type)?(this.mediaBase64=this.sanitizer.bypassSecurityTrustResourceUrl(window.URL.createObjectURL(t.body)),this.cd.detectChanges(),this.resetMediaMetaData(),this.resetModificationStati(),this.isImported=!0,this.mediaMetaData.filename=e.substring(e.lastIndexOf("/")+1),this.mediaMetaData.mimetype=t.body.type,this.mediaMetaData.fileformat=this.getFileformatFromMimetype(t.body.type)):this.showFileNotAllowedError(t.body.type)}),(e=>{this.isLoading=!1})))}));else{this.resetFileNotAllowedError();const e=t.getAsFile();if(!this.checkMimetype(e.type))return void this.showFileNotAllowedError(e.type);this.mediaMetaData.fileformat=this.getFileformatFromMimetype(e),this.mediaMetaData.mimetype=e.type,this.resetModificationStati(),this.isImported=!0,this.mediaBase64=this.sanitizer.bypassSecurityTrustResourceUrl(window.URL.createObjectURL(e))}}}resetMediaMetaData(){this.mediaMetaData={mimetype:null,fileformat:null,filename:null,width:0,height:0,originalWidth:0,originalHeight:0}}stringLooksLikeUrl(e){return/^(http|https|ftp|file):\/\//.test(e)}get cropperHeight(){try{return this.componentHeight-this.toolbar.nativeElement.offsetHeight-this.bottomToolbar.nativeElement.offsetHeight-5+"px"}catch(e){return"0px"}}triggerFileSelectionDialog(){this.fileSelector.nativeElement.dispatchEvent(new MouseEvent("click",{bubbles:!0}))}getMediaFromFileSystem(){let e=new FileReader;e.onloadend=t=>{this.resetModificationStati(),this.isImported=!0,this.mediaBase64=e.result},e.readAsDataURL(this.fileFromBrowser)}imageLoaded(e){let t=this.imageElement.nativeElement;this.cropper&&this.cropper.destroy(),this.cropper=new Cropper(t,{autoCrop:!1,viewMode:1,toggleDragModeOnDblclick:this.allowCropping,dragMode:this.allowCropping?"crop":"move"}),this.cropper.crop(),t.addEventListener("ready",(()=>{this.cropper&&(this.mediaMetaData.originalWidth=this.cropper.getImageData().naturalWidth,this.mediaMetaData.originalHeight=this.cropper.getImageData().naturalHeight,this.calcTargetSize(),this.isDirty&&this.emitChange())})),this.allowCropping&&t.addEventListener("cropend",(()=>{let e=this.cropper.getCropBoxData();this.isCropped=!_.isEmpty(this.cropper.getCropBoxData()),_.isEqual(e,this.lastCropBoxData)||(this.lastCropBoxData=_.clone(e),this.emitChange(),this.calcTargetSize())})),t.addEventListener("zoom",(()=>{this.isEdited&&this.emitChange(),this.isCropped&&this.calcTargetSize()}))}onDrop(e){this.fileFromBrowser=e[0],this.fileSelectedOrDropped()}set onDropExtern(e){e&&this.onDrop(e)}getFileformatFromMimetype(e){if(null===e)return"";const t="object"==typeof e?e?.type:e;return"string"==typeof t&&/^image\/\w+/.test(t)?t.split("/").pop():""}checkMimetype(e){return"image/jpeg"===e||"image/png"===e||"image/gif"===e}showFileNotAllowedError(e){this.fileformatErrorMessageCode&&this.toast.clearToast(this.fileformatErrorMessageCode),this.fileformatErrorMessageCode=this.toast.sendToast("Not an image file or file type "+(e?'"'+e+'"':"")+" not supported.","error",null,!1,this.fileformatErrorMessageCode)}resetFileNotAllowedError(){this.fileformatErrorMessageCode&&this.toast.clearToast(this.fileformatErrorMessageCode)}fileSelectionChange(){return 1===this.fileSelector.nativeElement.files.length&&(this.fileFromBrowser=this.fileSelector.nativeElement.files[0],this.fileSelectedOrDropped()),this.fileSelector.nativeElement.value=null,!1}fileSelectedOrDropped(){if(this.resetFileNotAllowedError(),!this.checkMimetype(this.fileFromBrowser.type))return this.showFileNotAllowedError(this.getFileExtension(this.fileFromBrowser)),void(this.fileFromBrowser=null);this.resetMediaMetaData(),this.mediaMetaData.fileformat=this.getFileformatFromMimetype(this.fileFromBrowser),this.mediaMetaData.filename=this.fileFromBrowser.name,this.mediaMetaData.mimetype=this.fileFromBrowser.type,this.getMediaFromFileSystem()}getFileExtension(e){return e.name.split(".").pop()}removeImage(){this.resetMediaMetaData(),this.cropper&&(this.cropper.destroy(),this.cropper=void 0),this.mediaBase64=null,this.emitChange()}getImage(){if(!this.cropper)return null;let e;return e=this.isEdited||this.isResized?this.cropper.getCroppedCanvas({maxHeight:this.mediaMetaData.height,maxWidth:this.mediaMetaData.width,imageSmoothingEnabled:!0,imageSmoothingQuality:"high"}).toDataURL(this.mediaMetaData.mimetype,"image/jpeg"===this.mediaMetaData.mimetype?this.jpegCompressionLevel:void 0):this.mediaBase64.toString(),e.substring(e.indexOf("base64,")+7)}setMoveMode(){this.cropper.setDragMode("move")}setCropMode(){this.cropper.setDragMode("crop")}removeCropping(){this.cropper.clear(),this.isCropped=!1,this.lastCropBoxData={},this.calcTargetSize(),this.emitChange()}get canResize(){return this.allowResizing&&this.cropper}get canMirror(){return this.allowMirroring&&this.cropper}get canRotate(){return this.allowRotating&&this.cropper}maxHeightChanged(){let e;e=this.maxHeightInput.split(this.userprefs.toUse.num_grp_sep).join(""),e=parseInt(e,10),this._maxHeightByUser=isNaN(e)?null:e,this.calcTargetSize(),this.emitChange()}maxWidthChanged(){let e;e=this.maxWidthInput.split(this.userprefs.toUse.num_grp_sep).join(""),e=parseInt(e,10),this._maxWidthByUser=isNaN(e)?null:e,this.calcTargetSize(),this.emitChange()}get maxHeight(){return this.maxHeightBySystem&&this.maxHeightByUser?this.maxHeightBySystem<this.maxHeightByUser?this.maxHeightBySystem:this.maxHeightByUser:this.maxHeightBySystem?this.maxHeightBySystem:this.maxHeightByUser?this.maxHeightByUser:null}get maxWidth(){return this.maxWidthBySystem&&this.maxWidthByUser?this.maxWidthBySystem<this.maxWidthByUser?this.maxWidthBySystem:this.maxWidthByUser:this.maxWidthBySystem?this.maxWidthBySystem:this.maxWidthByUser?this.maxWidthByUser:null}get doResizeByUser(){return this._doResizeByUser}set doResizeByUser(e){this._doResizeByUser=e,this.calcTargetSize()}get maxWidthByUser(){return this.doResizeByUser?this._maxWidthByUser:void 0}get maxHeightByUser(){return this.doResizeByUser?this._maxHeightByUser:void 0}calcTargetSize(){if(!this.cropper)return;let e,t=1,s=this.cropper.getData(!0).width;0===s?(s=this.cropper.getImageData().naturalWidth,e=this.cropper.getImageData().naturalHeight):e=this.cropper.getData(!0).height,this.maxWidth&&s>this.maxWidth||this.maxHeight&&e>this.maxHeight?(t=this.maxWidth&&!this.maxHeight?this.maxWidth/s:this.maxHeight&&!this.maxWidth?this.maxHeight/e:this.maxWidth/s<this.maxHeight/e?this.maxWidth/s:this.maxHeight/e,this.mediaMetaData.width=Math.floor(s*t),this.mediaMetaData.height=Math.floor(e*t)):(this.mediaMetaData.width=s,this.mediaMetaData.height=e)}ngOnDestroy(){this.fileformatErrorMessageCode&&this.toast.clearToast(this.fileformatErrorMessageCode),this.unlistenPasteEvent()}zoomIn(){this.cropper.zoom(.1)}zoomOut(){this.cropper.zoom(-.1)}mirrorX(){90===this.currentRotation||270===this.currentRotation?this.cropper.scaleY(this.yMirrored=-1*this.yMirrored):this.cropper.scaleX(this.xMirrored=-1*this.xMirrored),this.emitChange()}mirrorY(){90===this.currentRotation||270===this.currentRotation?this.cropper.scaleX(this.xMirrored=-1*this.xMirrored):this.cropper.scaleY(this.yMirrored=-1*this.yMirrored),this.emitChange()}rotate(e){this.currentRotation+=e,this.currentRotation=this.currentRotation%360,this.currentRotation<0&&(this.currentRotation+=360),this.cropper.rotateTo(this.currentRotation),this.emitChange()}get isRotated(){return 0!==this.currentRotation}get isMirrored(){return-1===this.xMirrored||-1===this.yMirrored}get isResized(){return this.mediaMetaData.width!==this.mediaMetaData.originalWidth||this.mediaMetaData.height!==this.mediaMetaData.originalHeight}get isEdited(){return this.isRotated||this.isMirrored||this.isCropped}get isDirty(){return this.isEdited||this.isImported||this.isResized}emitChange(){this.mimetype.emit(this.mediaMetaData.mimetype),this.onChange(this.getImage())}resetModificationStati(){this.xMirrored=this.yMirrored=1,this.currentRotation=0,this.isCropped=!1,this.lastCropBoxData={}}removeModifications(){this.cropper.rotateTo(0),this.cropper.scale(1,1),this.cropper.clear(),this.isCropped=!1,this.lastCropBoxData={},this.calcTargetSize(),this.emitChange()}get allowEditing(){return this.allowCropping||this.allowRotating||this.allowMirroring}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}writeValue(e){e&&""!=e&&(this.mediaBase64=this.sanitizer.bypassSecurityTrustResourceUrl("data:"+this.mediaMetaData.mimetype+";base64,"+e),this.calcTargetSize()),this.resetModificationStati(),this.isImported=!1}}return e=SystemInputMedia,(0,i.Z)(SystemInputMedia,"ɵfac",(function(t){return new(t||e)(n.Y36(l.d),n.Y36(a.Pu),n.Y36(d.H7),n.Y36(r.A),n.Y36(c.z),n.Y36(n.SBq),n.Y36(n.Qsj),n.Y36(u.eN),n.Y36(n.sBO),n.Y36(h.$))})),(0,i.Z)(SystemInputMedia,"ɵcmp",n.Xpm({type:e,selectors:[["system-input-media"]],viewQuery:function(e,t){if(1&e&&(n.Gf(x,5),n.Gf(w,5),n.Gf(T,5),n.Gf(C,5)),2&e){let e;n.iGM(e=n.CRH())&&(t.fileSelector=e.first),n.iGM(e=n.CRH())&&(t.imageElement=e.first),n.iGM(e=n.CRH())&&(t.bottomToolbar=e.first),n.iGM(e=n.CRH())&&(t.toolbar=e.first)}},inputs:{componentHeight:"componentHeight",allowModifications:"allowModifications",allowCropping:"allowCropping",allowResizing:"allowResizing",allowRotating:"allowRotating",allowMirroring:"allowMirroring",_mimetype:["mimetype","_mimetype"],maxWidthBySystem:["maxWidth","maxWidthBySystem"],maxHeightBySystem:["maxHeight","maxHeightBySystem"],onDropExtern:["droppedFiles","onDropExtern"]},outputs:{mimetype:"mimetype"},features:[n._Bn([{provide:o.JU,useExisting:(0,n.Gpc)((()=>e)),multi:!0}])],decls:49,vars:26,consts:[[1,"slds-rich-text-editor","slds-grid","slds-grid_vertical","slds-nowrap"],["role","toolbar",1,"slds-rich-text-editor__toolbar","slds-shrink-none"],["toolbar",""],[1,"slds-button-group-list"],[1,"slds-button","slds-button--icon-border","slds-button--neutral",3,"disabled","click"],["icon","delete"],[4,"ngIf"],["icon","zoomin"],["icon","zoomout"],["icon","move"],["icon","drag"],[1,"slds-button","slds-button--icon-border","slds-button--neutral",3,"disabled","title","click"],["icon","clear"],["icon","rotateleft","size","medium"],["icon","rotateright","size","medium"],["icon","mirrorhorizontal","size","medium"],["icon","mirrorvertical","size","medium"],["class","slds-grid slds-grid--vertical-align-center slds-col--bump-left",4,"ngIf"],[3,"ngStyle"],[1,"slds-height_full",2,"overflow","hidden",3,"system-overlay-loading-spinner","system-drop-file"],["style","display:block",3,"src","load",4,"ngIf","ngIfElse"],["uploadbutton",""],["role","toolbar",1,"slds-rich-text-editor__toolbar","slds-shrink-none","slds-rich-text-editor__toolbar_bottom"],["bottomtoolbar",""],["class","slds-col--bump-right",4,"ngIf"],["icon","undo"],[1,"slds-grid","slds-grid--vertical-align-center","slds-col--bump-left"],[3,"ngModel","disabled","ngModelChange"],["label","LBL_DOWNSIZE_TO_MAX"],["onlyField","true","precision","0","min","1","size","5",3,"ngModel","placeholder","disabled","ngModelChange","change"],[1,"slds-p-left--xxx-small"],[1,"slds-p-horizontal--x-small"],[2,"display","block",3,"src","load"],["imgelement",""],[1,"slds-size--1-of-1","slds-height_full","slds-align--absolute-center"],[1,"slds-grid","slds-grid--vertical-align-center"],[1,"slds-button","slds-button--neutral",3,"click"],["label","LBL_SELECT_FILE"],["type","file","accept","image/*",2,"display","none",3,"change"],["fileselector",""],["label","LBL_OR_PASTE_IMAGE_OR_DROP_FILE_HERE"],[1,"slds-col--bump-right"]],template:function(e,t){if(1&e&&(n.TgZ(0,"div",0)(1,"div",1,2)(3,"ul",3)(4,"li")(5,"button",4),n.NdJ("click",(function(){return t.removeImage()})),n._UZ(6,"system-button-icon",5),n.qZA()(),n.YNc(7,A,3,2,"li",6),n.qZA(),n.TgZ(8,"ul",3)(9,"li")(10,"button",4),n.NdJ("click",(function(){return t.zoomIn()})),n._UZ(11,"system-button-icon",7),n.qZA()(),n.TgZ(12,"li")(13,"button",4),n.NdJ("click",(function(){return t.zoomOut()})),n._UZ(14,"system-button-icon",8),n.qZA()()(),n.TgZ(15,"ul",3)(16,"li")(17,"button",4),n.NdJ("click",(function(){return t.setMoveMode()})),n._UZ(18,"system-button-icon",9),n.qZA()(),n.TgZ(19,"li")(20,"button",4),n.NdJ("click",(function(){return t.setCropMode()})),n._UZ(21,"system-button-icon",10),n.qZA()(),n.TgZ(22,"li")(23,"button",11),n.NdJ("click",(function(){return t.removeCropping()})),n._UZ(24,"system-button-icon",12),n.qZA()()(),n.TgZ(25,"ul",3)(26,"li")(27,"button",11),n.NdJ("click",(function(){return t.rotate(-90)})),n._UZ(28,"system-button-custom-icon",13),n.qZA()(),n.TgZ(29,"li")(30,"button",11),n.NdJ("click",(function(){return t.rotate(90)})),n._UZ(31,"system-button-custom-icon",14),n.qZA()(),n.TgZ(32,"li")(33,"button",11),n.NdJ("click",(function(){return t.mirrorX()})),n._UZ(34,"system-button-custom-icon",15),n.qZA()(),n.TgZ(35,"li")(36,"button",11),n.NdJ("click",(function(){return t.mirrorY()})),n._UZ(37,"system-button-custom-icon",16),n.qZA()()(),n.YNc(38,k,11,8,"div",17),n.qZA(),n.TgZ(39,"div",18)(40,"div",19),n.NdJ("system-drop-file",(function(e){return t.onDrop(e)})),n.YNc(41,L,2,1,"img",20),n.YNc(42,I,8,0,"ng-template",null,21,n.W1O),n.qZA()(),n.TgZ(44,"div",22,23),n.YNc(46,M,2,1,"div",24),n.YNc(47,J,3,3,"div",6),n.YNc(48,O,2,0,"div",6),n.qZA()()),2&e){const e=n.MAs(43);n.xp6(5),n.Q6J("disabled",!t.mediaBase64),n.xp6(2),n.Q6J("ngIf",t.allowEditing),n.xp6(3),n.Q6J("disabled",!t.mediaBase64),n.xp6(3),n.Q6J("disabled",!t.mediaBase64),n.xp6(4),n.Q6J("disabled",!t.cropper),n.xp6(3),n.Q6J("disabled",!t.cropper),n.xp6(3),n.s9C("title",t.language.getLabel("LBL_REMOVE_CROPPING")),n.Q6J("disabled",!t.cropper||!t.isCropped),n.xp6(4),n.s9C("title",t.language.getLabel("LBL_ROTATE_TO_LEFT")),n.Q6J("disabled",!t.canRotate),n.xp6(3),n.s9C("title",t.language.getLabel("LBL_ROTATE_TO_RIGHT")),n.Q6J("disabled",!t.canRotate),n.xp6(3),n.s9C("title",t.language.getLabel("LBL_MIRROR_HORIZONTALLY")),n.Q6J("disabled",!t.canMirror),n.xp6(3),n.s9C("title",t.language.getLabel("LBL_MIRROR_VERTICALLY")),n.Q6J("disabled",!t.canMirror),n.xp6(2),n.Q6J("ngIf",t.allowResizing),n.xp6(1),n.Q6J("ngStyle",n.VKq(24,N,t.cropperHeight)),n.xp6(1),n.Q6J("system-overlay-loading-spinner",t.isLoading),n.xp6(1),n.Q6J("ngIf",t.mediaBase64)("ngIfElse",e),n.xp6(5),n.Q6J("ngIf",t.mediaMetaData.fileformat),n.xp6(1),n.Q6J("ngIf",t.mediaBase64),n.xp6(1),n.Q6J("ngIf",!t.mediaBase64)}},dependencies:[m.M,g._,p.O5,p.PC,o.JJ,o.On,f.O,b.J,v.U,Z.i,y._],encapsulation:2})),SystemInputMedia})()},6898:(e,t,s)=>{"use strict";s.d(t,{a:()=>b});var i=s(1180),n=s(2242),o=s(5030),l=s(727),a=s(5329),d=s(4154),r=s(6625),c=s(4755),u=s(3333);function h(e,t){1&e&&(n.TgZ(0,"option",6),n._uU(1,"*"),n.qZA())}function m(e,t){1&e&&n._UZ(0,"option",7)}function g(e,t){if(1&e&&(n.TgZ(0,"span"),n._UZ(1,"system-label-modulename",10),n._uU(2),n.qZA()),2&e){const e=n.oxw().$implicit;n.xp6(1),n.Q6J("module",e),n.xp6(1),n.hij(" (",e,")")}}function p(e,t){if(1&e&&(n.TgZ(0,"span"),n._uU(1),n.qZA()),2&e){const e=n.oxw().$implicit;n.xp6(1),n.Oqu(e)}}function f(e,t){if(1&e&&(n.TgZ(0,"option",8),n.YNc(1,g,3,2,"span",9),n.YNc(2,p,2,1,"span",9),n.qZA()),2&e){const e=t.$implicit,s=n.oxw();n.Q6J("value",e),n.xp6(1),n.Q6J("ngIf",!s.displaytechnicalname),n.xp6(1),n.Q6J("ngIf",s.displaytechnicalname)}}let b=(()=>{var e;class SystemInputModule{set filterModules(e){this._modules=this._modules.filter((t=>!e.some((e=>e==t))))}constructor(e,t,s){(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"configuration",void 0),(0,i.Z)(this,"disabled",!1),(0,i.Z)(this,"displaytechnicalname",!0),(0,i.Z)(this,"displayAsterisk",!1),(0,i.Z)(this,"displayEmptyOption",!1),(0,i.Z)(this,"onChange",void 0),(0,i.Z)(this,"onTouched",void 0),(0,i.Z)(this,"subscription",new l.w0),(0,i.Z)(this,"_module",void 0),(0,i.Z)(this,"_modules",[]),this.language=e,this.metadata=t,this.configuration=s,this._modules=this.metadata.getModules(),this.sortModules(),this.subscription=this.language.currentlanguage$.subscribe((e=>{this.sortModules()}))}ngOnDestroy(){this.subscription.unsubscribe()}sortModules(){this.displaytechnicalname?this._modules.sort(((e,t)=>e.toLowerCase()>t.toLowerCase()?1:-1)):this._modules.sort(((e,t)=>this.language.getModuleName(e).toLowerCase()>this.language.getModuleName(t).toLowerCase()?1:-1))}get module(){return this._module}set module(e){this._module=e,this.onChange&&this.onChange(e)}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}writeValue(e){this._module=e}}return e=SystemInputModule,(0,i.Z)(SystemInputModule,"ɵfac",(function(t){return new(t||e)(n.Y36(a.d),n.Y36(d.Pu),n.Y36(r.C))})),(0,i.Z)(SystemInputModule,"ɵcmp",n.Xpm({type:e,selectors:[["system-input-module"]],inputs:{disabled:"disabled",displaytechnicalname:"displaytechnicalname",displayAsterisk:"displayAsterisk",displayEmptyOption:"displayEmptyOption",filterModules:"filterModules"},features:[n._Bn([{provide:o.JU,useExisting:(0,n.Gpc)((()=>e)),multi:!0}])],decls:6,vars:5,consts:[[1,"slds-form-element__control"],[1,"slds-select_container"],[1,"slds-select",3,"disabled","ngModel","ngModelChange"],["value","*",4,"ngIf"],["value","",4,"ngIf"],[3,"value",4,"ngFor","ngForOf"],["value","*"],["value",""],[3,"value"],[4,"ngIf"],[3,"module"]],template:function(e,t){1&e&&(n.TgZ(0,"div",0)(1,"div",1)(2,"select",2),n.NdJ("ngModelChange",(function(e){return t.module=e})),n.YNc(3,h,2,0,"option",3),n.YNc(4,m,1,0,"option",4),n.YNc(5,f,3,3,"option",5),n.qZA()()()),2&e&&(n.xp6(2),n.Q6J("disabled",t.disabled)("ngModel",t.module),n.xp6(1),n.Q6J("ngIf",t.displayAsterisk),n.xp6(1),n.Q6J("ngIf",t.displayEmptyOption),n.xp6(1),n.Q6J("ngForOf",t._modules))},dependencies:[c.sg,c.O5,o.YN,o.Kr,o.EJ,o.JJ,o.On,u.M],encapsulation:2})),SystemInputModule})()},4375:(e,t,s)=>{"use strict";s.d(t,{s:()=>g});var i=s(1180),n=s(2242),o=s(5030),l=s(727),a=s(5329),d=s(4154),r=s(6625),c=s(4755),u=s(7674);function h(e,t){if(1&e&&(n.TgZ(0,"span"),n._uU(1),n.qZA()),2&e){const e=n.oxw().$implicit;n.xp6(1),n.hij(" (",e,")")}}function m(e,t){if(1&e&&(n.TgZ(0,"option",4),n._UZ(1,"system-label-fieldname",5),n.YNc(2,h,2,1,"span",6),n.qZA()),2&e){const e=t.$implicit,s=n.oxw();n.Q6J("value",e),n.xp6(1),n.Q6J("module",s.module)("field",e),n.xp6(1),n.Q6J("ngIf",s.displaytechnicalname)}}let g=(()=>{var e;class SystemInputModuleField{constructor(e,t,s){(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"configuration",void 0),(0,i.Z)(this,"module",void 0),(0,i.Z)(this,"disabled",!1),(0,i.Z)(this,"displaytechnicalname",!0),(0,i.Z)(this,"onChange",void 0),(0,i.Z)(this,"onTouched",void 0),(0,i.Z)(this,"_field",void 0),(0,i.Z)(this,"_fields",[]),(0,i.Z)(this,"subscription",new l.w0),this.language=e,this.metadata=t,this.configuration=s}ngOnInit(){let e=this.metadata.getModuleFields(this.module);for(let t in e)this._fields.push(t);this.sortFields(),this.subscription=this.language.currentlanguage$.subscribe((e=>{this.sortFields()}))}sortFields(){this._fields.sort(((e,t)=>this.language.getFieldDisplayName(this.module,e).toLowerCase()>this.language.getFieldDisplayName(this.module,t).toLowerCase()?1:-1))}get field(){return this._field}set field(e){this._field=e,this.onChange&&this.onChange(e)}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}writeValue(e){this._field=e}ngOnDestroy(){this.subscription.unsubscribe()}}return e=SystemInputModuleField,(0,i.Z)(SystemInputModuleField,"ɵfac",(function(t){return new(t||e)(n.Y36(a.d),n.Y36(d.Pu),n.Y36(r.C))})),(0,i.Z)(SystemInputModuleField,"ɵcmp",n.Xpm({type:e,selectors:[["system-input-module-field"]],inputs:{module:"module",disabled:"disabled",displaytechnicalname:"displaytechnicalname"},features:[n._Bn([{provide:o.JU,useExisting:(0,n.Gpc)((()=>e)),multi:!0}])],decls:4,vars:3,consts:[[1,"slds-form-element__control"],[1,"slds-select_container"],[1,"slds-select",3,"disabled","ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[3,"module","field"],[4,"ngIf"]],template:function(e,t){1&e&&(n.TgZ(0,"div",0)(1,"div",1)(2,"select",2),n.NdJ("ngModelChange",(function(e){return t.field=e})),n.YNc(3,m,3,4,"option",3),n.qZA()()()),2&e&&(n.xp6(2),n.Q6J("disabled",t.disabled)("ngModel",t.field),n.xp6(1),n.Q6J("ngForOf",t._fields))},dependencies:[c.sg,c.O5,o.YN,o.Kr,o.EJ,o.JJ,o.On,u.h],encapsulation:2})),SystemInputModuleField})()},3673:(e,t,s)=>{"use strict";s.d(t,{l:()=>u});var i=s(1180),n=s(2242),o=s(5030),l=s(5329),a=s(4154),d=s(4755);function r(e,t){if(1&e&&(n.TgZ(0,"option",8),n._uU(1),n.qZA()),2&e){const e=t.$implicit;n.Q6J("value",e),n.xp6(1),n.Oqu(e)}}function c(e,t){if(1&e&&(n.TgZ(0,"option",8),n._uU(1),n.qZA()),2&e){const e=t.$implicit;n.Q6J("value",e.id),n.xp6(1),n.Oqu(e.name)}}let u=(()=>{var e;class SystemInputModuleFilter{constructor(e,t){(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"disabled",void 0),(0,i.Z)(this,"onChange",void 0),(0,i.Z)(this,"onTouched",void 0),(0,i.Z)(this,"modules",[]),(0,i.Z)(this,"_modulefilters",[]),(0,i.Z)(this,"module",""),(0,i.Z)(this,"_modulefilter",""),this.language=e,this.metadata=t,this._modulefilters=this.metadata.getModuleFilters();for(let e of this._modulefilters)this.modules.find((t=>t==e.module))||this.modules.push(e.module);this.modules.sort()}get modulefilter(){return this._modulefilter}set modulefilter(e){this._modulefilter=e,this.onChange(e)}get modulefilters(){return this._modulefilters.filter((e=>e.module==this.module))}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}writeValue(e){this._modulefilter=e,this._modulefilter&&(this.module=this.metadata.getModuleFilter(this._modulefilter).module)}}return e=SystemInputModuleFilter,(0,i.Z)(SystemInputModuleFilter,"ɵfac",(function(t){return new(t||e)(n.Y36(l.d),n.Y36(a.Pu))})),(0,i.Z)(SystemInputModuleFilter,"ɵcmp",n.Xpm({type:e,selectors:[["system-input-module-filter"]],inputs:{disabled:"disabled"},features:[n._Bn([{provide:o.JU,useExisting:(0,n.Gpc)((()=>e)),multi:!0}])],decls:12,vars:6,consts:[[1,"slds-form-element","slds-m-vertical--xxx-small"],[1,"slds-grid"],[1,"slds-form-element__control","slds-p-right--xxx-small","slds-size--1-of-3"],[1,"slds-select_container"],[1,"slds-select",3,"disabled","ngModel","ngModelChange"],["value",""],[3,"value",4,"ngFor","ngForOf"],[1,"slds-form-element__control","slds-p-left--xxx-small","slds-size--2-of-3"],[3,"value"]],template:function(e,t){1&e&&(n.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"select",4),n.NdJ("ngModelChange",(function(e){return t.module=e})),n._UZ(5,"option",5),n.YNc(6,r,2,2,"option",6),n.qZA()()(),n.TgZ(7,"div",7)(8,"div",3)(9,"select",4),n.NdJ("ngModelChange",(function(e){return t.modulefilter=e})),n._UZ(10,"option"),n.YNc(11,c,2,2,"option",6),n.qZA()()()()()),2&e&&(n.xp6(4),n.Q6J("disabled",t.disabled)("ngModel",t.module),n.xp6(2),n.Q6J("ngForOf",t.modules),n.xp6(3),n.Q6J("disabled",!t.module||t.disabled)("ngModel",t.modulefilter),n.xp6(2),n.Q6J("ngForOf",t.modulefilters))},dependencies:[d.sg,o.YN,o.Kr,o.EJ,o.JJ,o.On],encapsulation:2})),SystemInputModuleFilter})()},1555:(e,t,s)=>{"use strict";s.d(t,{u:()=>h});var i=s(1180),n=s(2242),o=s(5030),l=s(4154),a=s(5329),d=s(4755),r=s(9503),c=s(8658);function u(e,t){if(1&e&&(n.TgZ(0,"div",2)(1,"system-checkbox-group-checkbox",3),n._uU(2),n.qZA()()),2&e){const e=t.$implicit;n.xp6(1),n.Q6J("value",e.value),n.xp6(1),n.hij(" ",e.display,"")}}let h=(()=>{var e;class SystemInputMultiEnum{constructor(e,t){(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"module",void 0),(0,i.Z)(this,"field",void 0),(0,i.Z)(this,"sortdirection",void 0),(0,i.Z)(this,"options",[]),(0,i.Z)(this,"onChange",void 0),(0,i.Z)(this,"onTouched",void 0),(0,i.Z)(this,"_value",void 0),this.metadata=e,this.language=t}get value(){return this._value}set value(e){this._value=e,this.onChange(e)}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}writeValue(e){this._value=e}ngOnInit(){this.getOptions()}getOptions(){let e=[],t=this.language.getFieldDisplayOptions(this.module,this.field);for(let s in t)s&&t[s]&&e.push({value:s,display:t[s]});if(this.options=e,this.sortdirection)switch(this.sortdirection.toLowerCase()){case"desc":this.options.sort(((e,t)=>e.display.toLowerCase()<t.display.toLowerCase()?1:-1));break;case"asc":this.options.sort(((e,t)=>e.display.toLowerCase()>t.display.toLowerCase()?1:-1))}}}return e=SystemInputMultiEnum,(0,i.Z)(SystemInputMultiEnum,"ɵfac",(function(t){return new(t||e)(n.Y36(l.Pu),n.Y36(a.d))})),(0,i.Z)(SystemInputMultiEnum,"ɵcmp",n.Xpm({type:e,selectors:[["system-input-multienum"]],inputs:{module:"module",field:"field",sortdirection:"sortdirection"},features:[n._Bn([{provide:o.JU,useExisting:(0,n.Gpc)((()=>e)),multi:!0}])],decls:2,vars:2,consts:[[1,"slds-grid","slds-wrap",3,"ngModel","ngModelChange"],["class","slds-large-size--1-of-3 slds-medium-size--1-of-1 slds-truncate",4,"ngFor","ngForOf"],[1,"slds-large-size--1-of-3","slds-medium-size--1-of-1","slds-truncate"],[3,"value"]],template:function(e,t){1&e&&(n.TgZ(0,"system-checkbox-group",0),n.NdJ("ngModelChange",(function(e){return t.value=e})),n.YNc(1,u,3,2,"div",1),n.qZA()),2&e&&(n.Q6J("ngModel",t.value),n.xp6(1),n.Q6J("ngForOf",t.options))},dependencies:[d.sg,o.JJ,o.On,r.L,c.m],encapsulation:2})),SystemInputMultiEnum})()},5621:(e,t,s)=>{"use strict";s.d(t,{i:()=>p});var i=s(1180),n=s(2242),o=s(5030),l=s(2422),a=s(4755);const d=["numberinput"];function r(e,t){}function c(e,t){if(1&e&&(n.TgZ(0,"div",3)(1,"div",4),n.YNc(2,r,0,0,"ng-template",5),n.qZA()()),2&e){n.oxw();const e=n.MAs(3);n.xp6(2),n.Q6J("ngTemplateOutlet",e)}}function u(e,t){}function h(e,t){if(1&e&&n.YNc(0,u,0,0,"ng-template",5),2&e){n.oxw();const e=n.MAs(3);n.Q6J("ngTemplateOutlet",e)}}const m=function(e){return{width:e}};function g(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"input",6,7),n.NdJ("ngModelChange",(function(t){n.CHM(e);const s=n.oxw();return n.KtG(s.textValue=t)}))("keydown",(function(t){n.CHM(e);const s=n.oxw();return n.KtG(s.checkInput(t))}))("ngModelChange",(function(t){n.CHM(e);const s=n.oxw();return n.KtG(s.fieldChanged(t))})),n.qZA()}if(2&e){const e=n.oxw();n.Q6J("ngModel",e.textValue)("disabled",e.disabled)("ngStyle",n.VKq(5,m,e.size?"auto":void 0)),n.uIk("placeholder",e.placeholder)("size",e.size)}}let p=(()=>{var e;class SystemInputNumber{set onPrecisionChange(e){this.precision=e,this.textValue="number"!=typeof this.textValue?this.getValSanitized(this.textValue):this.textValue}constructor(e,t){(0,i.Z)(this,"userpreferences",void 0),(0,i.Z)(this,"renderer",void 0),(0,i.Z)(this,"numberinput",void 0),(0,i.Z)(this,"max",void 0),(0,i.Z)(this,"min",void 0),(0,i.Z)(this,"precision",0),(0,i.Z)(this,"onlyField",!1),(0,i.Z)(this,"placeholder",void 0),(0,i.Z)(this,"disabled",!1),(0,i.Z)(this,"size",void 0),(0,i.Z)(this,"asNumber",!1),(0,i.Z)(this,"textValue",""),(0,i.Z)(this,"lastTextValue",""),(0,i.Z)(this,"allowedKeys",["ArrowRight","ArrowLeft","Backspace","Delete","Tab"]),(0,i.Z)(this,"decimalKeyStroke",""),(0,i.Z)(this,"curposStartDecimalKeyStroke",0),(0,i.Z)(this,"latestKeyStroke",""),(0,i.Z)(this,"counterAfterdecimalKeyStroke",0),this.userpreferences=e,this.renderer=t}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}writeValue(e){this.textValue="number"==typeof e||this.asNumber?this.getValAsText(e):this.getValSanitized(e),this.lastTextValue=this.textValue}onChange(e){}onTouched(){}fieldChanged(e){let t=this.numberinput.nativeElement.selectionEnd,s=this.numberinput.nativeElement.selectionStart,i=this.textValue.indexOf(this.userpreferences.toUse.dec_sep),n=(this.textValue.length,this.textValue);i<0&&this.resetDecimalCounter(),this.textValue="number"!=typeof this.textValue?this.getValSanitized(this.textValue):this.textValue,this.textValue!==this.lastTextValue&&(this.asNumber?this.onChange(this.getNumberFromText(this.textValue)):this.onChange(this.textValue),this.lastTextValue=this.textValue,this.calculateCursorPosition(t,s,i,n))}getValSanitized(e){let t=this.userpreferences.toUse,s=(void 0===this.precision?t.default_currency_significant_digits:this.precision,this.textValue.split(t.num_grp_sep).join(""));return this.isInteger()||(s=s.split(t.dec_sep).join(".")),isNaN(s=parseFloat(s))&&(s=void 0,this.resetDecimalCounter()),s=s&&s>this.max?this.max:s,s=s&&s<this.min?this.min:s,this.getValAsText(s)}getNumberFromText(e){let t=this.userpreferences.toUse,s=(void 0===this.precision?t.default_currency_significant_digits:this.precision,this.textValue.split(t.num_grp_sep).join(""));return s=s.split(t.dec_sep).join("."),s=isNaN(parseFloat(s))?void 0:parseFloat(s),s}getValAsText(e){if(void 0===e)return"";let t;return t=this.isInteger()?parseInt(e,10):parseFloat(e),isNaN(t)?"":this.userpreferences.formatMoney(t,this.precision)}checkInput(e){if(this.latestKeyStroke=e.key,!new RegExp(this.defineInputPattern(),"g").test(e.key)&&this.allowedKeys.indexOf(e.key)<0)return this.resetDecimalCounter(),e.preventDefault(),!1;if(this.moveCursorOnDecimalSeparatorRemove())return e.preventDefault(),!1;if(this.removeDecimalDigits())return e.preventDefault(),!1;if(this.decimalKeyStroke==this.userpreferences.toUse.dec_sep&&(this.counterAfterdecimalKeyStroke++,this.counterAfterdecimalKeyStroke>this.precision&&(this.counterAfterdecimalKeyStroke=1)),e.key==this.userpreferences.toUse.dec_sep&&(this.decimalKeyStroke=e.key,this.counterAfterdecimalKeyStroke=0,this.textValue.split(this.userpreferences.toUse.dec_sep).length>0)){let t=this.textValue.indexOf(this.userpreferences.toUse.dec_sep)+1;return this.setCursorPosition(t),this.resetDecimalCounter(),e.preventDefault(),!1}}calculateCursorPosition(e,t,s,i){let n=this.textValue.indexOf(this.userpreferences.toUse.dec_sep),o=!1,l=this.textValue.length-i.length,a=i.split(this.userpreferences.toUse.num_grp_sep).length-this.textValue.split(this.userpreferences.toUse.num_grp_sep).length;this.allowedKeys.indexOf(this.latestKeyStroke)<0?this.isInteger()?(e=t+l,o=!0):""==this.decimalKeyStroke&&n>0&&(e=t,s>0&&(e+=n-s),o=!0):(this.onBackspace()||this.onDelete())&&(this.resetDecimalCounter(),e=t,l<0&&(e=t-a),l>0&&a<0&&(e+=Math.abs(a)),0==t&&(e=0),o=!0),o&&this.setCursorPosition(e)}setCursorPosition(e){setTimeout((()=>{this.renderer.setProperty(this.numberinput.nativeElement,"selectionStart",e),this.renderer.setProperty(this.numberinput.nativeElement,"selectionEnd",e)}))}isInteger(){return this.precision<=0||void 0===this.precision}defineInputPattern(){let e="^[-+]?[-0-9";return e+=this.userpreferences.toUse.num_grp_sep,this.isInteger()||(e+=this.userpreferences.toUse.dec_sep),e+="]+$",e}resetDecimalCounter(){this.decimalKeyStroke="",this.counterAfterdecimalKeyStroke=0}onDelete(){return"Delete"==this.latestKeyStroke}onBackspace(){return"Backspace"==this.latestKeyStroke}moveCursorOnDecimalSeparatorRemove(){if(!this.isInteger()){this.latestKeyStroke;if(!this.onBackspace()&&!this.onDelete())return!1;let e=this.numberinput.nativeElement.selectionStart,t=this.textValue.indexOf(this.userpreferences.toUse.dec_sep),s=0;if(this.onBackspace()&&e==t+1?s=-1:this.onDelete()&&e==t&&(s=1),0!=s)return this.setCursorPosition(e+s),!0}return!1}removeDecimalDigits(){if(this.isInteger()||this.textValue.length<=0)return!1;return this.numberinput.nativeElement.selectionStart==this.textValue.length&&this.allowedKeys.indexOf(this.latestKeyStroke)<0}}return e=SystemInputNumber,(0,i.Z)(SystemInputNumber,"ɵfac",(function(t){return new(t||e)(n.Y36(l.z),n.Y36(n.Qsj))})),(0,i.Z)(SystemInputNumber,"ɵcmp",n.Xpm({type:e,selectors:[["system-input-number"]],viewQuery:function(e,t){if(1&e&&n.Gf(d,5),2&e){let e;n.iGM(e=n.CRH())&&(t.numberinput=e.first)}},inputs:{max:"max",min:"min",onPrecisionChange:["precision","onPrecisionChange"],onlyField:"onlyField",placeholder:"placeholder",disabled:"disabled",size:"size",asNumber:"asNumber"},features:[n._Bn([{provide:o.JU,useExisting:(0,n.Gpc)((()=>e)),multi:!0}])],decls:4,vars:2,consts:[["class","slds-form-element__control",4,"ngIf"],[4,"ngIf"],["field",""],[1,"slds-form-element__control"],[1,"slds-form-element"],[3,"ngTemplateOutlet"],["type","text",1,"slds-input","slds-text-align--right",3,"ngModel","disabled","ngStyle","ngModelChange","keydown"],["numberinput",""]],template:function(e,t){1&e&&(n.YNc(0,c,3,1,"div",0),n.YNc(1,h,1,1,null,1),n.YNc(2,g,2,7,"ng-template",null,2,n.W1O)),2&e&&(n.Q6J("ngIf",!t.onlyField),n.xp6(1),n.Q6J("ngIf",t.onlyField))},dependencies:[a.O5,a.tP,a.PC,o.Fj,o.JJ,o.On],encapsulation:2})),SystemInputNumber})()},7919:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});var i=s(1180),n=s(2242),o=s(5030),l=s(2656);let a=(()=>{var e;class SystemInputPassword{constructor(){(0,i.Z)(this,"onChange",void 0),(0,i.Z)(this,"onTouched",void 0),(0,i.Z)(this,"_value",void 0),(0,i.Z)(this,"_inputtype","password"),(0,i.Z)(this,"disabled",!1)}get value(){return this._value}set value(e){e!=this._value&&(this._value=e,this.onChange(e))}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}writeValue(e){this._value=e}get inputtype(){return this.disabled?"password":this._inputtype}toggleType(){this._inputtype="text"==this._inputtype?"password":"text"}get toggleicon(){return"text"==this.inputtype?"hide":"preview"}}return e=SystemInputPassword,(0,i.Z)(SystemInputPassword,"ɵfac",(function(t){return new(t||e)})),(0,i.Z)(SystemInputPassword,"ɵcmp",n.Xpm({type:e,selectors:[["system-input-password"]],inputs:{disabled:"disabled"},features:[n._Bn([{provide:o.JU,useExisting:(0,n.Gpc)((()=>e)),multi:!0}])],decls:4,vars:5,consts:[[1,"slds-form-element__control","slds-input-has-icon","slds-input-has-icon_right"],[1,"slds-button","slds-button_icon","slds-input__icon","slds-input__icon_right",3,"disabled","click"],[3,"icon"],["autocomplete","new-password",1,"slds-input",3,"type","disabled","ngModel","ngModelChange"]],template:function(e,t){1&e&&(n.TgZ(0,"div",0)(1,"button",1),n.NdJ("click",(function(){return t.toggleType()})),n._UZ(2,"system-button-icon",2),n.qZA(),n.TgZ(3,"input",3),n.NdJ("ngModelChange",(function(e){return t.value=e})),n.qZA()()),2&e&&(n.xp6(1),n.Q6J("disabled",t.disabled),n.xp6(1),n.Q6J("icon",t.toggleicon),n.xp6(1),n.Q6J("type",t.inputtype)("disabled",t.disabled)("ngModel",t.value))},dependencies:[o.Fj,o.JJ,o.On,l.J],encapsulation:2})),SystemInputPassword})()},9901:(e,t,s)=>{"use strict";s.d(t,{A:()=>d});var i=s(1180),n=s(2242),o=s(5030),l=s(6163);const a=["*"];let d=(()=>{var e;class SystemInputRadio{constructor(e){(0,i.Z)(this,"modelutilities",void 0),(0,i.Z)(this,"name",void 0),(0,i.Z)(this,"value",void 0),(0,i.Z)(this,"disabled",!1),(0,i.Z)(this,"canUnset",!1),(0,i.Z)(this,"onChange",void 0),(0,i.Z)(this,"onTouched",void 0),(0,i.Z)(this,"checked",void 0),(0,i.Z)(this,"id",void 0),this.modelutilities=e,this.id=this.modelutilities.generateGuid()}setChecked(e){e.target.checked&&this.onChange(this.value)}registerOnChange(e){this.onChange=t=>{e(t)}}registerOnTouched(e){this.onTouched=e}writeValue(e){void 0!==e&&(e==this.value?this.checked=!0:this.checked=!1)}clickLabel(e){if(!this.canUnset)return;let t=e.target.parentElement.parentElement.firstChild;t.checked&&(t.checked=!1,this.onChange(null),e.preventDefault())}}return e=SystemInputRadio,(0,i.Z)(SystemInputRadio,"ɵfac",(function(t){return new(t||e)(n.Y36(l.A))})),(0,i.Z)(SystemInputRadio,"ɵcmp",n.Xpm({type:e,selectors:[["system-input-radio"]],inputs:{name:"name",value:"value",disabled:"disabled",canUnset:"canUnset"},features:[n._Bn([{provide:o.JU,useExisting:(0,n.Gpc)((()=>e)),multi:!0}])],ngContentSelectors:a,decls:6,vars:5,consts:[[1,"slds-radio","slds-truncate","slds-is-relative"],["type","radio",3,"id","name","checked","disabled","change"],[1,"slds-radio__label",3,"click"],[1,"slds-radio_faux","slds-m-horizontal--xxx-small"],[1,"slds-form-element__label"]],template:function(e,t){1&e&&(n.F$t(),n.TgZ(0,"div",0)(1,"input",1),n.NdJ("change",(function(e){return t.setChecked(e)})),n.qZA(),n.TgZ(2,"label",2),n.NdJ("click",(function(e){return t.clickLabel(e)})),n._UZ(3,"span",3),n.TgZ(4,"span",4),n.Hsn(5),n.qZA()()()),2&e&&(n.xp6(1),n.Q6J("id",t.id)("name",t.name)("checked",t.checked)("disabled",t.disabled),n.xp6(1),n.uIk("for",t.id))},encapsulation:2})),SystemInputRadio})()},6271:(e,t,s)=>{"use strict";s.d(t,{p:()=>h});var i=s(1180),n=s(2242),o=s(5030),l=s(4755),a=s(3463),d=s(8859);function r(e,t){if(1&e&&n._UZ(0,"system-label",8),2&e){const e=n.oxw().$implicit;n.Q6J("label",e.label)}}function c(e,t){if(1&e&&n._UZ(0,"system-utility-icon",9),2&e){const e=n.oxw().$implicit;n.Q6J("icon",e.icon||"choice")}}function u(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"span",2)(1,"input",3),n.NdJ("ngModelChange",(function(t){n.CHM(e);const s=n.oxw();return n.KtG(s.modelValue=t)})),n.qZA(),n.TgZ(2,"label",4)(3,"span",5),n.YNc(4,r,1,1,"system-label",6),n.YNc(5,c,1,1,"ng-template",null,7,n.W1O),n.qZA()()()}if(2&e){const e=t.$implicit,s=n.MAs(6),i=n.oxw();n.xp6(1),n.Q6J("ngModel",i.modelValue)("value",e.value)("disabled",i.disabled||e.disabled)("name",i.groupName)("id",e.id),n.xp6(1),n.Q6J("for",e.id),n.xp6(2),n.Q6J("ngIf",!!e.label)("ngIfElse",s)}}let h=(()=>{var e;class SystemInputRadioButtonGroup{constructor(e){(0,i.Z)(this,"cdRef",void 0),(0,i.Z)(this,"inputOptions",[]),(0,i.Z)(this,"disabled",!1),(0,i.Z)(this,"groupName",void 0),(0,i.Z)(this,"onChange",void 0),(0,i.Z)(this,"onTouched",void 0),(0,i.Z)(this,"_modelValue",void 0),this.cdRef=e,this.groupName=_.uniqueId("group-name-")}get modelValue(){return this._modelValue}set modelValue(e){this.onChange(e),this.writeValue(e)}ngAfterViewInit(){this.cdRef.detach()}ngOnChanges(e){e.inputOptions&&this.setItemsInitialValues(),this.cdRef.detectChanges()}registerOnChange(e){this.onChange=t=>{e(t)}}registerOnTouched(e){this.onTouched=e}writeValue(e){this._modelValue=e,this.cdRef.detectChanges()}setItemsInitialValues(){this.inputOptions.forEach((e=>{e.id||(e.id=_.uniqueId("input-id-")),e.label&&!e.title&&(e.title=e.label)}))}trackByFn(e,t){return t.id}}return e=SystemInputRadioButtonGroup,(0,i.Z)(SystemInputRadioButtonGroup,"ɵfac",(function(t){return new(t||e)(n.Y36(n.sBO))})),(0,i.Z)(SystemInputRadioButtonGroup,"ɵcmp",n.Xpm({type:e,selectors:[["system-input-radio-button-group"]],inputs:{inputOptions:"inputOptions",disabled:"disabled"},features:[n._Bn([{provide:o.JU,useExisting:(0,n.Gpc)((()=>e)),multi:!0}]),n.TTD],decls:2,vars:2,consts:[[1,"slds-radio_button-group","slds-m-right--x-small"],["class","slds-button slds-radio_button",4,"ngFor","ngForOf","ngForTrackBy"],[1,"slds-button","slds-radio_button"],["type","radio",3,"ngModel","value","disabled","name","id","ngModelChange"],[1,"slds-radio_button__label","slds-height_full",3,"for"],[1,"slds-radio_faux","slds-align--absolute-center",2,"padding","0 .5rem","display","initial"],["class","slds-truncate",3,"label",4,"ngIf","ngIfElse"],["iconContainer",""],[1,"slds-truncate",3,"label"],["size","x-small",3,"icon"]],template:function(e,t){1&e&&(n.TgZ(0,"div",0),n.YNc(1,u,7,8,"span",1),n.qZA()),2&e&&(n.xp6(1),n.Q6J("ngForOf",t.inputOptions)("ngForTrackBy",t.trackByFn))},dependencies:[l.sg,l.O5,o.Fj,o._,o.JJ,o.On,a._,d.r],encapsulation:2,changeDetection:0})),SystemInputRadioButtonGroup})()},4846:(e,t,s)=>{"use strict";s.d(t,{z:()=>m});var i=s(1180),n=s(2242),o=s(5030),l=s(5329),a=s(4044),d=s(4755),r=s(2656),c=s(4561);function u(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"div",5)(1,"div",6)(2,"span",7)(3,"span",8),n._UZ(4,"system-icon",9),n.qZA(),n.TgZ(5,"span",10),n._uU(6),n.qZA(),n.TgZ(7,"button",11),n.NdJ("click",(function(){n.CHM(e);const t=n.oxw();return n.KtG(t.clearField())})),n._UZ(8,"system-button-icon",12),n.qZA()()()()}if(2&e){const e=n.oxw();n.xp6(4),n.Q6J("module",e.module),n.xp6(2),n.Oqu(e._relatedname),n.xp6(2),n.Q6J("icon","close")}}function h(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"div",13)(1,"input",14),n.NdJ("focus",(function(){n.CHM(e);const t=n.oxw();return n.KtG(t.searchWithModal())})),n.qZA(),n.TgZ(2,"button",15),n.NdJ("click",(function(){n.CHM(e);const t=n.oxw();return n.KtG(t.searchWithModal())})),n._UZ(3,"system-button-icon",12),n.qZA()()}if(2&e){const e=n.oxw();n.xp6(1),n.Q6J("placeholder",e.language.getModuleCombinedLabel("LBL_SEARCH",e.module)),n.xp6(2),n.Q6J("icon","search")}}let m=(()=>{var e;class SystemInputRelate{constructor(e,t){(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"modal",void 0),(0,i.Z)(this,"onChange",void 0),(0,i.Z)(this,"onTouched",void 0),(0,i.Z)(this,"module",void 0),(0,i.Z)(this,"nameField","summary_text"),(0,i.Z)(this,"_relatedid",void 0),(0,i.Z)(this,"_relatedname",void 0),this.language=e,this.modal=t}clearField(){this._relatedid=void 0,this._relatedname=void 0,this.onChange(void 0)}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}writeValue(e){if(e){let t=e.split("::");this._relatedid=t[0],this._relatedname=t[1]}this._relatedid=e}searchWithModal(){this.modal.openModal("ObjectModalModuleLookup").subscribe((e=>{e.instance.module=this.module,e.instance.multiselect=!1,e.instance.selectedItems.subscribe((e=>{e.length&&(this._relatedid=e[0].id,this._relatedname=e[0][this.nameField],this.onChange(this._relatedid+"::"+this._relatedname))}))}))}}return e=SystemInputRelate,(0,i.Z)(SystemInputRelate,"ɵfac",(function(t){return new(t||e)(n.Y36(l.d),n.Y36(a.o))})),(0,i.Z)(SystemInputRelate,"ɵcmp",n.Xpm({type:e,selectors:[["system-input-relate"]],inputs:{module:"module",nameField:"nameField"},features:[n._Bn([{provide:o.JU,useExisting:(0,n.Gpc)((()=>e)),multi:!0}])],decls:5,vars:2,consts:[[1,"slds-combobox_container"],[1,"slds-form-element","slds-lookup"],["role","combobox",1,"slds-combobox","slds-dropdown-trigger","slds-dropdown-trigger_click"],["class","slds-form-element__control",4,"ngIf"],["class","slds-combobox__form-element slds-input-has-icon slds-input-has-icon_right",4,"ngIf"],[1,"slds-form-element__control"],[1,"slds-pill_container"],[1,"slds-pill","slds-size--1-of-1"],[1,"slds-icon_container","slds-icon-standard-account","slds-pill__icon_container"],["size","small",3,"module"],[1,"slds-pill__label"],[1,"slds-button","slds-button--icon","slds-pill__remove",3,"click"],[3,"icon"],[1,"slds-combobox__form-element","slds-input-has-icon","slds-input-has-icon_right"],["type","text","autocomplete","none","role","combobox",1,"slds-input","slds-combobox__input",3,"placeholder","focus"],[1,"slds-button","slds-button_icon","slds-input__icon","slds-input__icon_right",3,"click"]],template:function(e,t){1&e&&(n.TgZ(0,"div",0)(1,"div",1)(2,"div",2),n.YNc(3,u,9,3,"div",3),n.YNc(4,h,4,2,"div",4),n.qZA()()()),2&e&&(n.xp6(3),n.Q6J("ngIf",t._relatedid),n.xp6(1),n.Q6J("ngIf",!t._relatedid))},dependencies:[d.O5,r.J,c.f],encapsulation:2})),SystemInputRelate})()},3805:(e,t,s)=>{"use strict";s.d(t,{H:()=>g});var i=s(1180),n=s(2242),o=s(5030),l=s(4154),a=s(5329),d=s(6625),r=s(4755),c=s(3463);function u(e,t){if(1&e&&(n.TgZ(0,"option",8),n._UZ(1,"system-label",9),n.qZA()),2&e){const e=t.$implicit;n.Q6J("value",e.sc),n.xp6(1),n.Q6J("label",e.label)}}function h(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"div",3)(1,"select",4,5),n.NdJ("ngModelChange",(function(t){n.CHM(e);const s=n.oxw();return n.KtG(s.value=t)})),n._UZ(3,"option",6),n.YNc(4,u,2,2,"option",7),n.qZA()()}if(2&e){const e=n.oxw();n.xp6(1),n.Q6J("disabled",0==e.states.length||e.disabled)("ngModel",e.value),n.xp6(3),n.Q6J("ngForOf",e.states)}}function m(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"div",10)(1,"input",11),n.NdJ("ngModelChange",(function(t){n.CHM(e);const s=n.oxw();return n.KtG(s.value=t)})),n.qZA()()}if(2&e){const e=n.oxw();n.xp6(1),n.Q6J("ngModel",e.value)("disabled",e.disabled)}}let g=(()=>{var e;class SystemInputState{constructor(e,t,s){(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"configuration",void 0),(0,i.Z)(this,"country",void 0),(0,i.Z)(this,"disabled",!1),(0,i.Z)(this,"states",[]),(0,i.Z)(this,"onChange",void 0),(0,i.Z)(this,"onTouched",void 0),(0,i.Z)(this,"_value",void 0),(0,i.Z)(this,"strict",!1),this.metadata=e,this.language=t,this.configuration=s,"strict"==this.configuration.data.backendextensions.spiceui.config.format&&(this.strict=!0)}get value(){return this._value}set value(e){e!=this._value&&(this._value=e,this.onChange(e))}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}writeValue(e){this._value=e}ngOnChanges(){this.strict&&this.getStates()}getStates(){if(this.states=[],this.country){let e=this.configuration.getData("countries");e.states&&(this.states=e.states.filter((e=>e.cc==this.country)),this.states.sort(((e,t)=>this.language.getLabel(e.label).localeCompare(this.language.getLabel(t.label)))))}}}return e=SystemInputState,(0,i.Z)(SystemInputState,"ɵfac",(function(t){return new(t||e)(n.Y36(l.Pu),n.Y36(a.d),n.Y36(d.C))})),(0,i.Z)(SystemInputState,"ɵcmp",n.Xpm({type:e,selectors:[["system-input-state"]],inputs:{country:"country",disabled:"disabled"},features:[n._Bn([{provide:o.JU,useExisting:(0,n.Gpc)((()=>e)),multi:!0}]),n.TTD],decls:4,vars:2,consts:[[1,"slds-form-element"],["class","slds-select_container",4,"ngIf","ngIfElse"],["countryinput",""],[1,"slds-select_container"],[1,"slds-select",3,"disabled","ngModel","ngModelChange"],["focus",""],["value",""],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[3,"label"],[1,"slds-form-element__control"],["type","text",1,"slds-input",3,"ngModel","disabled","ngModelChange"]],template:function(e,t){if(1&e&&(n.TgZ(0,"div",0),n.YNc(1,h,5,3,"div",1),n.YNc(2,m,2,2,"ng-template",null,2,n.W1O),n.qZA()),2&e){const e=n.MAs(3);n.xp6(1),n.Q6J("ngIf",t.strict)("ngIfElse",e)}},dependencies:[r.sg,r.O5,o.YN,o.Kr,o.Fj,o.EJ,o.JJ,o.On,c._],encapsulation:2})),SystemInputState})()},1078:(e,t,s)=>{"use strict";s.d(t,{C:()=>h});var i=s(1180),n=s(2242),o=s(2422),l=s(4505),a=s(5329),d=s(4755),r=s(5030);function c(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"li",7),n.NdJ("click",(function(){const t=n.CHM(e).$implicit,s=n.oxw();return n.KtG(s.addTag(t))})),n.TgZ(1,"div",8),n._uU(2),n.qZA()()}if(2&e){const e=t.$implicit;n.xp6(2),n.hij(" ",e," ")}}const u=function(e){return{"slds-is-open":e}};let h=(()=>{var e;class SystemInputTags{constructor(e,t,s,o,l){(0,i.Z)(this,"elementref",void 0),(0,i.Z)(this,"renderer",void 0),(0,i.Z)(this,"userpreferences",void 0),(0,i.Z)(this,"backend",void 0),(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"tagemitter",new n.vpe),(0,i.Z)(this,"querystring",""),(0,i.Z)(this,"querytimeout",void 0),(0,i.Z)(this,"matchedtags",[]),(0,i.Z)(this,"matchedtagindex",void 0),this.elementref=e,this.renderer=t,this.userpreferences=s,this.backend=o,this.language=l}get isOpen(){return this.matchedtags.length>0}search(e){switch(e.key){case"ArrowDown":case"ArrowUp":break;case",":case";":case"Enter":this.addTag(this.querystring.replace(/^[\s]+|[\s\W]+$/gm,""));break;default:this.querytimeout&&window.clearTimeout(this.querytimeout),this.querytimeout=window.setTimeout((()=>this.doSearch()),500)}}doSearch(){this.backend.postRequest("common/spicetags",{},{search:this.querystring.trim()}).subscribe((e=>{this.matchedtags=e,this.matchedtags.sort(((e,t)=>e.toLowerCase()>t.toLowerCase()?1:-1))}))}addTag(e){this.querytimeout&&window.clearTimeout(this.querytimeout),this.matchedtags=[],this.tagemitter.emit(e),this.querystring=""}}return e=SystemInputTags,(0,i.Z)(SystemInputTags,"ɵfac",(function(t){return new(t||e)(n.Y36(n.SBq),n.Y36(n.Qsj),n.Y36(o.z),n.Y36(l.y),n.Y36(a.d))})),(0,i.Z)(SystemInputTags,"ɵcmp",n.Xpm({type:e,selectors:[["system-input-tags"]],outputs:{tagemitter:"tagemitter"},decls:7,vars:6,consts:[[1,"slds-combobox_container"],["role","combobox",1,"slds-combobox","slds-dropdown-trigger","slds-dropdown-trigger_click",3,"ngClass"],["role","none",1,"slds-combobox__form-element"],["type","search",1,"slds-input","slds-combobox__input",3,"placeholder","ngModel","ngModelChange","keyup"],["role","listbox",1,"slds-dropdown","slds-dropdown_fluid"],["role","presentation",1,"slds-listbox","slds-listbox_vertical"],["role","presentation","class","slds-listbox__item",3,"click",4,"ngFor","ngForOf"],["role","presentation",1,"slds-listbox__item",3,"click"],["role","option",1,"slds-media","slds-listbox__option","slds-listbox__option_plain"]],template:function(e,t){1&e&&(n.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"input",3),n.NdJ("ngModelChange",(function(e){return t.querystring=e}))("keyup",(function(e){return t.search(e)})),n.qZA()(),n.TgZ(4,"div",4)(5,"ul",5),n.YNc(6,c,3,1,"li",6),n.qZA()()()()),2&e&&(n.xp6(1),n.Q6J("ngClass",n.VKq(4,u,t.isOpen)),n.xp6(2),n.Q6J("placeholder",t.language.getLabel("LBL_SEARCH_TAG"))("ngModel",t.querystring),n.xp6(3),n.Q6J("ngForOf",t.matchedtags))},dependencies:[d.mk,d.sg,r.Fj,r.JJ,r.On],encapsulation:2})),SystemInputTags})()},3772:(e,t,s)=>{"use strict";s.d(t,{Z:()=>m});var i=s(1180),n=s(2242),o=s(5030),l=s(6163),a=s(8280),d=s(3398),r=s(4755),c=s(2656);function u(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"button",4),n.NdJ("click",(function(){n.CHM(e);const t=n.oxw();return n.KtG(t.value="")})),n._UZ(1,"system-button-icon",5),n.qZA()}}const h=function(e,t){return{"slds-input-has-icon":e,"slds-input-has-icon_right":t}};let m=(()=>{var e;class SystemInputText{set _trimInput(e){this.trimInput=!!e&&"blur"}constructor(e,t){(0,i.Z)(this,"modelutilities",void 0),(0,i.Z)(this,"elementRef",void 0),(0,i.Z)(this,"onChange",void 0),(0,i.Z)(this,"onTouched",void 0),(0,i.Z)(this,"_value",void 0),(0,i.Z)(this,"disabled",!1),(0,i.Z)(this,"placeholder",void 0),(0,i.Z)(this,"maxlength",void 0),(0,i.Z)(this,"autocomplete",void 0),(0,i.Z)(this,"showClear",!1),(0,i.Z)(this,"trimInput",!1),(0,i.Z)(this,"id",void 0),(0,i.Z)(this,"autocompletebreaker",""),this.modelutilities=e,this.elementRef=t}get value(){return this._value}set value(e){e!=this._value&&(this._value=e,this.onChange(e))}ngOnInit(){this.autocomplete&&(this.autocompletebreaker="off"==this.autocomplete?this.modelutilities.generateGuid():this.autocomplete)}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}writeValue(e){this._value=e}emitBlur(){this.elementRef.nativeElement.dispatchEvent(new Event("blur",{bubbles:!0}))}showClearButton(){return!this.disabled&&this.showClear&&this.value}}return e=SystemInputText,(0,i.Z)(SystemInputText,"ɵfac",(function(t){return new(t||e)(n.Y36(l.A),n.Y36(n.SBq))})),(0,i.Z)(SystemInputText,"ɵcmp",n.Xpm({type:e,selectors:[["system-input-text"]],inputs:{disabled:"disabled",placeholder:"placeholder",maxlength:"maxlength",autocomplete:"autocomplete",showClear:"showClear",_trimInput:["trim","_trimInput"],id:"id"},features:[n._Bn([{provide:o.JU,useExisting:(0,n.Gpc)((()=>e)),multi:!0}])],decls:4,vars:12,consts:[[1,"slds-form-element"],[1,"slds-form-element__control",3,"ngClass"],["type","text",1,"slds-input",3,"system-trim-input","autocomplete","maxlength","system-placeholder","disabled","ngModel","id","ngModelChange","blur"],["class","slds-button slds-button_icon slds-input__icon slds-input__icon_right",3,"click",4,"ngIf"],[1,"slds-button","slds-button_icon","slds-input__icon","slds-input__icon_right",3,"click"],["icon","clear"]],template:function(e,t){1&e&&(n.TgZ(0,"div",0)(1,"div",1)(2,"input",2),n.NdJ("ngModelChange",(function(e){return t.value=e}))("blur",(function(){return t.emitBlur()})),n.qZA(),n.YNc(3,u,2,0,"button",3),n.qZA()()),2&e&&(n.xp6(1),n.Q6J("ngClass",n.WLB(9,h,t.showClearButton(),t.showClearButton())),n.xp6(1),n.Q6J("system-trim-input",t.trimInput)("autocomplete",t.autocompletebreaker)("maxlength",t.maxlength)("system-placeholder",t.placeholder)("disabled",t.disabled)("ngModel",t.value)("id",t.id),n.xp6(1),n.Q6J("ngIf",t.showClearButton()))},dependencies:[a.t,d.A,r.mk,r.O5,o.Fj,o.JJ,o.nD,o.On,c.J],encapsulation:2})),SystemInputText})()},2006:(e,t,s)=>{"use strict";s.d(t,{H:()=>Z});var i=s(1180),n=s(2242),o=s(5030),l=s(2422),a=s(5329),d=s(4755),r=s(2656),c=s(4561),u=s(3463);function h(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"button",8),n.NdJ("click",(function(){n.CHM(e);const t=n.oxw();return n.KtG(t.clear())})),n._UZ(1,"system-button-icon",14),n.qZA()}}const m=function(e){return{"slds-is-selected":e}};function g(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"li",15),n.NdJ("click",(function(){const t=n.CHM(e).$implicit,s=n.oxw();return n.KtG(s.display=t.display)})),n.TgZ(1,"div",16)(2,"span",17),n._UZ(3,"system-icon",18),n.qZA(),n.TgZ(4,"span",19)(5,"span",20),n._uU(6),n.qZA()()()()}if(2&e){const e=t.$implicit,s=n.oxw();n.xp6(1),n.Q6J("ngClass",n.VKq(3,m,e.offset==s._time.offset)),n.xp6(4),n.Q6J("title",e.display),n.xp6(1),n.Oqu(e.display)}}function p(e,t){1&e&&(n.TgZ(0,"div",21),n._UZ(1,"system-label",22),n.qZA())}const f=function(e){return{"slds-has-error":e}},b=function(e){return{"slds-is-open":e}},v=function(){return{updateOn:"blur"}};let Z=(()=>{var e;class SystemInputTime{set hideError(e){this.hideErrorMessage=!1!==e}constructor(e,t,s,o){(0,i.Z)(this,"elementref",void 0),(0,i.Z)(this,"renderer",void 0),(0,i.Z)(this,"userpreferences",void 0),(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"onChange",void 0),(0,i.Z)(this,"onTouched",void 0),(0,i.Z)(this,"_time",{display:"",moment:null,offset:0,valid:!0}),(0,i.Z)(this,"dropdownValues",[]),(0,i.Z)(this,"valid",new n.vpe),(0,i.Z)(this,"isOpen",!1),(0,i.Z)(this,"minutes_interval",30),(0,i.Z)(this,"hideErrorMessage",!1),this.elementref=e,this.renderer=t,this.userpreferences=s,this.language=o,this.dropdownValues=this.getDropdownValues()}ngOnDestroy(){}get isValid(){return this._time.valid}getDropdownValues(){let e=0,t=[];for(;e<=1440;){let s=(new moment).hour(0).minute(0).second(0);s.add(e,"minutes"),t.push({offset:e,display:s.format(this.userpreferences.getTimeFormat()),current:!1}),e+=this.minutes_interval}return t}getDropDownValueByOffset(e){return this.dropdownValues.find((t=>t.offset==e))}getNextDropDownValue(){return this.getDropDownValueByOffset(this._time.offset+this.minutes_interval)}setDisplayToNextDropDownValue(){this.display=this.getNextDropDownValue().display}setDisplayToPreviousDropDownValue(){this.display=this.getDropDownValueByOffset(this._time.offset-this.minutes_interval).display}get display(){return this._time.display}set display(e){if(e){let t=moment(e,this.userpreferences.getTimeFormat(),!0);if(t.isValid())this._time.moment||(this._time.moment=new moment),this._time.moment.set("hour",t.hour()),this._time.moment.set("minute",t.minute()),this._time.valid=!0,this._time.offset=this.calculateOffset(this._time.moment),this._time.display=e,this.closeDropDown(),this.onChange(this._time.moment);else{if("string"==typeof e&&e.length<=2&&e.length>0)return e=parseInt(e,10)<10?`0${e}:00`:`${e}:00`,void(this.display=e);this._time.valid=!1}}else this.clear();this.valid.emit(this._time.valid)}get canclear(){return!!this._time.display}clear(e=!0){this._time.moment||(this._time.moment=new moment),this._time.moment=null,this._time.display="",this._time.valid=!0,"function"==typeof this.onChange&&e&&this.onChange(this._time.moment)}toggleDropDown(){this.isOpen=!this.isOpen,this.isOpen}closeDropDown(){this.isOpen=!1}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}writeValue(e){e&&e.isValid&&e.isValid()?(this._time.moment=new moment(e),this._time.offset=this.calculateOffset(this._time.moment),this._time.display=this._time.moment.format(this.userpreferences.getTimeFormat())):this.clear(!1)}selectValue(e){this._time.moment||(this._time.moment=new moment),this._time.moment.hour(0).minute(0).second(0),this._time.moment.add(e,"minutes"),this._time.offset=e,this._time.display=this._time.moment.format(this.userpreferences.getTimeFormat()),"function"==typeof this.onChange&&this.onChange(this._time.moment),this.closeDropDown()}calculateOffset(e){let t=60*e.hour()+e.minute();return Math.floor(t/this.minutes_interval)*this.minutes_interval}}return e=SystemInputTime,(0,i.Z)(SystemInputTime,"ɵfac",(function(t){return new(t||e)(n.Y36(n.SBq),n.Y36(n.Qsj),n.Y36(l.z),n.Y36(a.d))})),(0,i.Z)(SystemInputTime,"ɵcmp",n.Xpm({type:e,selectors:[["system-input-time"]],inputs:{hideError:["system-input-time-hide-error","hideError"]},outputs:{valid:"valid"},features:[n._Bn([{provide:o.JU,useExisting:(0,n.Gpc)((()=>e)),multi:!0}])],decls:14,vars:12,consts:[[1,"slds-form-element",3,"ngClass"],[1,"slds-form-element__control"],[1,"slds-combobox_container"],["role","combobox",1,"slds-combobox","slds-dropdown-trigger","slds-dropdown-trigger_click","slds-combobox-picklist","slds-timepicker",3,"ngClass"],["role","none",1,"slds-combobox__form-element","slds-input-has-icon","slds-input-has-icon_right"],["aria-controls","listbox-unique-id","autocomplete","off","role","textbox","type","text",1,"slds-input","slds-combobox__input",3,"ngModelOptions","ngModel","ngModelChange","keyup.arrowup","keyup.arrowdown"],[1,"slds-input__icon-group","slds-input__icon-group_right","slds-height_full","slds-grid",2,"top","0","margin","0","height","100%"],["class","slds-input__icon slds-input__icon_right slds-button slds-button_icon","style","position: relative;",3,"click",4,"ngIf"],[1,"slds-input__icon","slds-input__icon_right","slds-button","slds-button_icon",2,"position","relative",3,"click"],["icon","clock"],["role","listbox",3,"mouseleave"],["role","presentation",1,"slds-listbox","slds-listbox_vertical","slds-dropdown","slds-dropdown--fluid","slds-dropdown--length-7"],["role","presentation","class","slds-listbox__item",3,"click",4,"ngFor","ngForOf"],["class","slds-form-element__help",4,"ngIf"],["icon","clear"],["role","presentation",1,"slds-listbox__item",3,"click"],["role","option",1,"slds-media","slds-listbox__option","slds-listbox__option_plain","slds-media_small","slds-media_center",3,"ngClass"],[1,"slds-media__figure"],["addclasses","slds-icon slds-listbox__icon-selected","icon","check","sprite","utility","size","x-small"],[1,"slds-media__body"],[1,"slds-truncate",3,"title"],[1,"slds-form-element__help"],["label","LBL_INPUT_INVALID"]],template:function(e,t){1&e&&(n.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"input",5),n.NdJ("ngModelChange",(function(e){return t.display=e}))("keyup.arrowup",(function(){return t.setDisplayToNextDropDownValue()}))("keyup.arrowdown",(function(){return t.setDisplayToPreviousDropDownValue()})),n.qZA(),n.TgZ(6,"div",6),n.YNc(7,h,2,0,"button",7),n.TgZ(8,"button",8),n.NdJ("click",(function(){return t.toggleDropDown()})),n._UZ(9,"system-button-icon",9),n.qZA()()(),n.TgZ(10,"div",10),n.NdJ("mouseleave",(function(){return t.closeDropDown()})),n.TgZ(11,"ul",11),n.YNc(12,g,7,5,"li",12),n.qZA()()()()(),n.YNc(13,p,2,0,"div",13),n.qZA()),2&e&&(n.Q6J("ngClass",n.VKq(7,f,!t.isValid)),n.xp6(3),n.Q6J("ngClass",n.VKq(9,b,t.isOpen)),n.xp6(2),n.Q6J("ngModelOptions",n.DdM(11,v))("ngModel",t.display),n.xp6(2),n.Q6J("ngIf",t.canclear),n.xp6(5),n.Q6J("ngForOf",t.dropdownValues),n.xp6(1),n.Q6J("ngIf",!t.isValid&&!t.hideErrorMessage))},dependencies:[d.mk,d.sg,d.O5,o.Fj,o.JJ,o.On,r.J,c.f,u._],encapsulation:2})),SystemInputTime})()},6449:(e,t,s)=>{"use strict";s.d(t,{R:()=>r});var i=s(1180),n=s(2242),o=s(5030),l=s(4755);function a(e,t){1&e&&n._UZ(0,"option",5),2&e&&n.Q6J("value",null)}function d(e,t){if(1&e&&(n.TgZ(0,"option",5),n._uU(1),n.qZA()),2&e){const e=t.$implicit,s=t.index,i=n.oxw();n.Q6J("value",e),n.xp6(1),n.AsE("",e," (GMT",i.offsetTimezones[s],")")}}let r=(()=>{var e;class SystemInputTimezone{constructor(){(0,i.Z)(this,"disabled",!1),(0,i.Z)(this,"id",""),(0,i.Z)(this,"propagateChange",(e=>{})),(0,i.Z)(this,"propagateTouch",(e=>{})),(0,i.Z)(this,"_timezone",void 0),(0,i.Z)(this,"timezones",[]),(0,i.Z)(this,"offsetTimezones",[]),(0,i.Z)(this,"denyEmpty",!1),this.timezones=moment.tz.names(),this.timezones=this.timezones.filter((e=>e.match(/^((Africa|America|Antarctica|Arctic|Asia|Atlantic|Australia|Europe|Pacific)\/.+|UTC)$/))),this.timezones.forEach((e=>this.offsetTimezones.push(moment.tz(e).format("Z"))))}get timezone(){return this._timezone}set timezone(e){this._timezone=e,this.propagateChange(e)}registerOnChange(e){this.propagateChange=e}registerOnTouched(e){this.propagateTouch=e}writeValue(e){this._timezone=e}}return e=SystemInputTimezone,(0,i.Z)(SystemInputTimezone,"ɵfac",(function(t){return new(t||e)})),(0,i.Z)(SystemInputTimezone,"ɵcmp",n.Xpm({type:e,selectors:[["system-input-timezone"]],inputs:{disabled:"disabled",id:"id",denyEmpty:"denyEmpty"},features:[n._Bn([{provide:o.JU,useExisting:(0,n.Gpc)((()=>e)),multi:!0}])],decls:5,vars:5,consts:[[1,"slds-form-element__control"],[1,"slds-select_container"],[1,"slds-select",3,"disabled","ngModel","id","ngModelChange"],[3,"value",4,"ngIf"],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(e,t){1&e&&(n.TgZ(0,"div",0)(1,"div",1)(2,"select",2),n.NdJ("ngModelChange",(function(e){return t.timezone=e})),n.YNc(3,a,1,1,"option",3),n.YNc(4,d,2,3,"option",4),n.qZA()()()),2&e&&(n.xp6(2),n.s9C("id",t.id),n.Q6J("disabled",t.disabled)("ngModel",t.timezone),n.xp6(1),n.Q6J("ngIf",!t.denyEmpty),n.xp6(1),n.Q6J("ngForOf",t.timezones))},dependencies:[l.sg,l.O5,o.YN,o.Kr,o.EJ,o.JJ,o.On],encapsulation:2})),SystemInputTimezone})()},3463:(e,t,s)=>{"use strict";s.d(t,{_:()=>b});var i=s(1180),n=s(727),o=s(2242),l=s(5329),a=s(4044),d=s(3917),r=s(6550),c=s(4755);function u(e,t){if(1&e&&o._UZ(0,"span",4),2&e){const e=o.oxw(2);o.Q6J("innerHTML",e.sanitizer.bypassSecurityTrustHtml(e.getLabel()),o.oJD)}}function h(e,t){if(1&e&&o._uU(0),2&e){const e=o.oxw(2);o.Oqu(e.getLabel())}}function m(e,t){if(1&e&&(o.ynx(0),o.YNc(1,u,1,1,"span",2),o.YNc(2,h,1,1,"ng-template",null,3,o.W1O),o.BQk()),2&e){const e=o.MAs(3),t=o.oxw();o.xp6(1),o.Q6J("ngIf","long"===t.length)("ngIfElse",e)}}function g(e,t){if(1&e&&o._UZ(0,"span",4),2&e){const e=o.oxw(2);o.Q6J("innerHTML",e.sanitizer.bypassSecurityTrustHtml(e.getLabel()),o.oJD)}}function p(e,t){if(1&e&&o._uU(0),2&e){const e=o.oxw(2);o.Oqu(e.getLabel())}}function f(e,t){if(1&e){const e=o.EpF();o.TgZ(0,"span",5),o.NdJ("dblclick",(function(t){o.CHM(e);const s=o.oxw();return o.KtG(s.onDblClick(t))}))("contextmenu",(function(t){o.CHM(e);const s=o.oxw();return o.KtG(s.onRightClick(t))})),o.YNc(1,g,1,1,"span",2),o.YNc(2,p,1,1,"ng-template",null,6,o.W1O),o.qZA()}if(2&e){const e=o.MAs(3),t=o.oxw();o.xp6(1),o.Q6J("ngIf","long"===t.length)("ngIfElse",e)}}let b=(()=>{var e;class SystemLabel{constructor(e,t,s,o,l,a){(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"modal",void 0),(0,i.Z)(this,"footer",void 0),(0,i.Z)(this,"renderer",void 0),(0,i.Z)(this,"cdRef",void 0),(0,i.Z)(this,"sanitizer",void 0),(0,i.Z)(this,"label",void 0),(0,i.Z)(this,"length","default"),(0,i.Z)(this,"nestedValues",void 0),(0,i.Z)(this,"subsciptions",new n.w0),this.language=e,this.modal=t,this.footer=s,this.renderer=o,this.cdRef=l,this.sanitizer=a,this.subsciptions.add(this.language.currentlanguage$.subscribe((()=>this.detectChanges())))}ngAfterViewInit(){this.cdRef.detach()}ngOnDestroy(){this.cdRef.reattach(),this.subsciptions.unsubscribe()}ngOnChanges(e){this.detectChanges()}openModal(){this.modal.openModal("SystemLabelEditorModal",!0).subscribe((e=>{e.instance.labelData={name:this.label,global_translations:[],custom_translations:[]}}))}detectChanges(){this.cdRef.detectChanges()}onDblClick(e){this.openModal(),e.preventDefault()}onRightClick(e){e.preventDefault();const t=this.createDropdown(e);this.renderer.appendChild(this.footer.footercontainer.element.nativeElement,t);const s=this.renderer.listen("document","click",(e=>{this.closeDropdown(e,t),s()}))}closeDropdown(e,t){this.footer.footercontainer.element.nativeElement.contains(t)&&this.renderer.removeChild(this.footer.footercontainer.element.nativeElement,t)}createDropdown(e){const t=this.renderer.createElement("div"),s=(e,t)=>t.forEach((t=>this.renderer.addClass(e,t)));this.renderer.setStyle(t,"top",e.pageY+"px"),this.renderer.setStyle(t,"left",e.pageX+"px"),s(t,["slds-dropdown--inverse","slds-dropdown","slds-theme--inverse"]);const i=this.renderer.createElement("ul");this.renderer.addClass(i,"slds-dropdown__list");const n=this.renderer.createElement("li");return s(n,["slds-slds-dropdown__item","slds-p-around--xx-small"]),this.renderer.setProperty(n,"onclick",(()=>this.openModal())),this.renderer.setProperty(n,"innerHTML",`<a>${this.language.getLabel("LBL_EDIT_LABEL")}</a>`),this.renderer.appendChild(i,n),this.renderer.appendChild(t,i),t}getLabel(){return this.nestedValues?this.language.getLabelFormatted(this.label,this.nestedValues,this.length):this.language.getLabel(this.label,void 0,this.length)}}return e=SystemLabel,(0,i.Z)(SystemLabel,"ɵfac",(function(t){return new(t||e)(o.Y36(l.d),o.Y36(a.o),o.Y36(d.M),o.Y36(o.Qsj),o.Y36(o.sBO),o.Y36(r.H7))})),(0,i.Z)(SystemLabel,"ɵcmp",o.Xpm({type:e,selectors:[["system-label"]],inputs:{label:"label",length:"length",nestedValues:"nestedValues"},features:[o.TTD],decls:3,vars:2,consts:[[4,"ngIf","ngIfElse"],["labelListenerContainer",""],[3,"innerHTML",4,"ngIf","ngIfElse"],["notLong",""],[3,"innerHTML"],[3,"dblclick","contextmenu"],["notLong2",""]],template:function(e,t){if(1&e&&(o.YNc(0,m,4,2,"ng-container",0),o.YNc(1,f,4,2,"ng-template",null,1,o.W1O)),2&e){const e=o.MAs(2);o.Q6J("ngIf",!t.language.inlineEditEnabled)("ngIfElse",e)}},dependencies:[c.O5],encapsulation:2,changeDetection:0})),SystemLabel})()},7674:(e,t,s)=>{"use strict";s.d(t,{h:()=>m});var i=s(1180),n=s(727),o=s(2242),l=s(5329),a=s(4044),d=s(4154),r=s(3917),c=s(4755);function u(e,t){if(1&e&&(o.ynx(0),o._uU(1),o.BQk()),2&e){const e=o.oxw();o.xp6(1),o.Oqu(e.language.getFieldDisplayName(e.module,e.field,e.fieldconfig,e.length))}}function h(e,t){if(1&e){const e=o.EpF();o.TgZ(0,"span",2),o.NdJ("dblclick",(function(t){o.CHM(e);const s=o.oxw();return o.KtG(s.onDblClick(t))}))("contextmenu",(function(t){o.CHM(e);const s=o.oxw();return o.KtG(s.onRightClick(t))})),o._uU(1),o.qZA()}if(2&e){const e=o.oxw();o.xp6(1),o.hij(" ",e.language.getFieldDisplayName(e.module,e.field,e.fieldconfig,e.length)," ")}}let m=(()=>{var e;class SystemLabelFieldname{constructor(e,t,s,o,l,a){(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"modal",void 0),(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"renderer",void 0),(0,i.Z)(this,"footer",void 0),(0,i.Z)(this,"cdRef",void 0),(0,i.Z)(this,"module",void 0),(0,i.Z)(this,"field",void 0),(0,i.Z)(this,"fieldconfig",{}),(0,i.Z)(this,"length","default"),(0,i.Z)(this,"subsciptions",new n.w0),this.language=e,this.modal=t,this.metadata=s,this.renderer=o,this.footer=l,this.cdRef=a,this.subsciptions.add(this.language.currentlanguage$.subscribe((()=>this.detectChanges())))}ngAfterViewInit(){this.cdRef.detach()}ngOnDestroy(){this.subsciptions.unsubscribe()}ngOnChanges(e){this.detectChanges()}openModal(){this.modal.openModal("SystemLabelEditorModal",!0).subscribe((e=>{const t=this.fieldconfig.label||this.metadata.getFieldlabel(this.module,this.field);e.instance.labelData={name:t,global_translations:[],custom_translations:[]}}))}onDblClick(e){this.openModal(),e.preventDefault()}detectChanges(){this.cdRef.detectChanges()}onRightClick(e){const t=this.createDropdown(e);this.renderer.appendChild(this.footer.footercontainer.element.nativeElement,t);const s=this.renderer.listen("document","click",(e=>{this.closeDropdown(e,t),s()}));e.preventDefault()}closeDropdown(e,t){this.footer.footercontainer.element.nativeElement.contains(t)&&this.renderer.removeChild(this.footer.footercontainer.element.nativeElement,t)}createDropdown(e){const t=this.renderer.createElement("div"),s=(e,t)=>t.forEach((t=>this.renderer.addClass(e,t)));this.renderer.setStyle(t,"top",e.pageY+"px"),this.renderer.setStyle(t,"left",e.pageX+"px"),s(t,["slds-dropdown--inverse","slds-dropdown","slds-theme--inverse"]);const i=this.renderer.createElement("ul");this.renderer.addClass(i,"slds-dropdown__list");const n=this.renderer.createElement("li");return s(n,["slds-slds-dropdown__item","slds-p-around--xx-small"]),this.renderer.setProperty(n,"onclick",(()=>this.openModal())),this.renderer.setProperty(n,"innerHTML",`<a>${this.language.getLabel("LBL_EDIT_LABEL")}</a>`),this.renderer.appendChild(i,n),this.renderer.appendChild(t,i),t}}return e=SystemLabelFieldname,(0,i.Z)(SystemLabelFieldname,"ɵfac",(function(t){return new(t||e)(o.Y36(l.d),o.Y36(a.o),o.Y36(d.Pu),o.Y36(o.Qsj),o.Y36(r.M),o.Y36(o.sBO))})),(0,i.Z)(SystemLabelFieldname,"ɵcmp",o.Xpm({type:e,selectors:[["system-label-fieldname"]],inputs:{module:"module",field:"field",fieldconfig:"fieldconfig",length:"length"},features:[o.TTD],decls:3,vars:2,consts:[[4,"ngIf","ngIfElse"],["labelListenerContainer",""],[3,"dblclick","contextmenu"]],template:function(e,t){if(1&e&&(o.YNc(0,u,2,1,"ng-container",0),o.YNc(1,h,2,1,"ng-template",null,1,o.W1O)),2&e){const e=o.MAs(2);o.Q6J("ngIf",!t.language.inlineEditEnabled)("ngIfElse",e)}},dependencies:[c.O5],encapsulation:2,changeDetection:0})),SystemLabelFieldname})()},3333:(e,t,s)=>{"use strict";s.d(t,{M:()=>m});var i=s(1180),n=s(727),o=s(2242),l=s(5329),a=s(4044),d=s(3917),r=s(4154),c=s(4755);function u(e,t){if(1&e&&(o.ynx(0),o._uU(1),o.BQk()),2&e){const e=o.oxw();o.xp6(1),o.Oqu(e.language.getModuleName(e.module,e.singular,e.length))}}function h(e,t){if(1&e){const e=o.EpF();o.TgZ(0,"span",2),o.NdJ("dblclick",(function(t){o.CHM(e);const s=o.oxw();return o.KtG(s.onDblClick(t))}))("contextmenu",(function(t){o.CHM(e);const s=o.oxw();return o.KtG(s.onRightClick(t))})),o._uU(1),o.qZA()}if(2&e){const e=o.oxw();o.xp6(1),o.hij(" ",e.language.getModuleName(e.module,e.singular,e.length)," ")}}let m=(()=>{var e;class SystemLabelModulename{constructor(e,t,s,o,l,a){(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"modal",void 0),(0,i.Z)(this,"footer",void 0),(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"renderer",void 0),(0,i.Z)(this,"cdRef",void 0),(0,i.Z)(this,"module",void 0),(0,i.Z)(this,"singular",!1),(0,i.Z)(this,"length","default"),(0,i.Z)(this,"subsciptions",new n.w0),this.language=e,this.modal=t,this.footer=s,this.metadata=o,this.renderer=l,this.cdRef=a,this.subsciptions.add(this.language.currentlanguage$.subscribe((()=>this.detectChanges())))}ngAfterViewInit(){this.cdRef.detach()}ngOnDestroy(){this.subsciptions.unsubscribe()}ngOnChanges(e){this.detectChanges()}onDblClick(e){this.openModal(),e.preventDefault()}openModal(){let e=this.metadata.getModuleDefs(this.module);const t=this.singular?e.singular_label:e.module_label;this.modal.openModal("SystemLabelEditorModal",!0).subscribe((e=>{e.instance.labelData={name:t,global_translations:[],custom_translations:[]}}))}detectChanges(){this.cdRef.detectChanges()}onRightClick(e){const t=this.createDropdown(e);this.renderer.appendChild(this.footer.footercontainer.element.nativeElement,t);const s=this.renderer.listen("document","click",(e=>{this.closeDropdown(e,t),s()}));e.preventDefault()}closeDropdown(e,t){this.footer.footercontainer.element.nativeElement.contains(t)&&this.renderer.removeChild(this.footer.footercontainer.element.nativeElement,t)}createDropdown(e){const t=this.renderer.createElement("div"),s=(e,t)=>t.forEach((t=>this.renderer.addClass(e,t)));this.renderer.setStyle(t,"top",e.pageY+"px"),this.renderer.setStyle(t,"left",e.pageX+"px"),s(t,["slds-dropdown--inverse","slds-dropdown","slds-theme--inverse"]);const i=this.renderer.createElement("ul");this.renderer.addClass(i,"slds-dropdown__list");const n=this.renderer.createElement("li");return s(n,["slds-slds-dropdown__item","slds-p-around--xx-small"]),this.renderer.setProperty(n,"onclick",(()=>this.openModal())),this.renderer.setProperty(n,"innerHTML",`<a>${this.language.getLabel("LBL_EDIT_LABEL")}</a>`),this.renderer.appendChild(i,n),this.renderer.appendChild(t,i),t}}return e=SystemLabelModulename,(0,i.Z)(SystemLabelModulename,"ɵfac",(function(t){return new(t||e)(o.Y36(l.d),o.Y36(a.o),o.Y36(d.M),o.Y36(r.Pu),o.Y36(o.Qsj),o.Y36(o.sBO))})),(0,i.Z)(SystemLabelModulename,"ɵcmp",o.Xpm({type:e,selectors:[["system-label-modulename"]],inputs:{module:"module",singular:"singular",length:"length"},features:[o.TTD],decls:3,vars:2,consts:[[4,"ngIf","ngIfElse"],["labelListenerContainer",""],[3,"dblclick","contextmenu"]],template:function(e,t){if(1&e&&(o.YNc(0,u,2,1,"ng-container",0),o.YNc(1,h,2,1,"ng-template",null,1,o.W1O)),2&e){const e=o.MAs(2);o.Q6J("ngIf",!t.language.inlineEditEnabled)("ngIfElse",e)}},dependencies:[c.O5],encapsulation:2,changeDetection:0})),SystemLabelModulename})()},2892:(e,t,s)=>{"use strict";s.d(t,{M:()=>p});var i=s(1180),n=s(2242),o=s(5329),l=s(4044),a=s(2422),d=s(4755),r=s(5030),c=s(2656),u=s(3463);function h(e,t){if(1&e&&(n.TgZ(0,"label",10),n._UZ(1,"system-label",11),n.qZA()),2&e){const e=n.oxw(2);n.MGl("for","",e.compId,"-select-lang")}}function m(e,t){if(1&e&&(n.TgZ(0,"option",12),n._uU(1),n.qZA()),2&e){const e=t.$implicit;n.Q6J("value",e.language),n.xp6(1),n.hij(" ",e.text," ")}}function g(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"div",1),n.YNc(1,h,2,1,"label",2),n.TgZ(2,"div",3)(3,"div",4)(4,"div",5)(5,"select",6),n.NdJ("ngModelChange",(function(t){n.CHM(e);const s=n.oxw();return n.KtG(s.currentlanguage=t)})),n.YNc(6,m,2,2,"option",7),n.qZA()()(),n.TgZ(7,"button",8),n.NdJ("click",(function(){n.CHM(e);const t=n.oxw();return n.KtG(t.reloadCurrentLanguage())})),n._UZ(8,"system-button-icon",9),n.qZA()()()}if(2&e){const e=n.oxw();n.xp6(1),n.Q6J("ngIf",e.displaylabel),n.xp6(4),n.MGl("id","",e.compId,"-select-lang"),n.Q6J("disabled",e.availableLanguages.length<=1)("ngModel",e.currentlanguage),n.xp6(1),n.Q6J("ngForOf",e.availableLanguages)}}let p=(()=>{var e;class SystemLanguageSelector{constructor(e,t,s){(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"modal",void 0),(0,i.Z)(this,"userpreferences",void 0),(0,i.Z)(this,"compId",void 0),(0,i.Z)(this,"availableLanguages",[]),(0,i.Z)(this,"selected",new n.vpe),(0,i.Z)(this,"displaylabel",!0),this.language=e,this.modal=t,this.userpreferences=s,this.compId=_.uniqueId()}ngOnInit(){this.getAvialableLanguages()}getAvialableLanguages(){this.availableLanguages=this.language.getAvialableLanguages(!0)}get currentlanguage(){return this.language.currentlanguage}set currentlanguage(e){let t=this.modal.await("LBL_LOADING");this.language.switchLanguage(e).subscribe({next:()=>{t.emit(!0),this.userpreferences.setPreference("language",e)}}),this.selected.emit(!0)}reloadCurrentLanguage(){let e=this.modal.await("LBL_LOADING");this.language.loadLanguage().subscribe({next:()=>{e.emit(!0)}})}}return e=SystemLanguageSelector,(0,i.Z)(SystemLanguageSelector,"ɵfac",(function(t){return new(t||e)(n.Y36(o.d),n.Y36(l.o),n.Y36(a.z))})),(0,i.Z)(SystemLanguageSelector,"ɵcmp",n.Xpm({type:e,selectors:[["system-language-selector"]],inputs:{displaylabel:"displaylabel"},outputs:{selected:"selected"},decls:1,vars:1,consts:[["class","slds-form-element slds-p-bottom--x-small",4,"ngIf"],[1,"slds-form-element","slds-p-bottom--x-small"],["class","slds-form-element__label",3,"for",4,"ngIf"],[1,"slds-grid","slds-grid--vertical-align-center"],[1,"slds-form-element__control","slds-grow"],[1,"slds-select_container"],[1,"slds-select",3,"disabled","ngModel","id","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[1,"slds-button","slds-button--icon","slds-button--icon-border","slds-m-left--x-small",3,"click"],["icon","refresh"],[1,"slds-form-element__label",3,"for"],["label","LBL_SELECT_LANGUAGE"],[3,"value"]],template:function(e,t){1&e&&n.YNc(0,g,9,5,"div",0),2&e&&n.Q6J("ngIf",t.availableLanguages.length>1)},dependencies:[d.sg,d.O5,r.YN,r.Kr,r.EJ,r.JJ,r.On,c.J,u._],encapsulation:2})),SystemLanguageSelector})()},2145:(e,t,s)=>{"use strict";s.d(t,{A:()=>l});var i=s(1180),n=s(2242);const o=["*"];let l=(()=>{var e;class SystemLink{constructor(){(0,i.Z)(this,"click",new n.vpe)}clicked(e){this.click.emit(e)}}return e=SystemLink,(0,i.Z)(SystemLink,"ɵfac",(function(t){return new(t||e)})),(0,i.Z)(SystemLink,"ɵcmp",n.Xpm({type:e,selectors:[["system-link"]],outputs:{click:"click"},ngContentSelectors:o,decls:2,vars:0,consts:[[1,"slds-text-link_reset",3,"click"]],template:function(e,t){1&e&&(n.F$t(),n.TgZ(0,"span",0),n.NdJ("click",(function(e){return t.clicked(e)})),n.Hsn(1),n.qZA())},encapsulation:2})),SystemLink})()},8710:(e,t,s)=>{"use strict";s.d(t,{e:()=>l});var i=s(1180),n=s(2242),o=s(4411);let l=(()=>{var e;class SystemLoaderProgress{constructor(e){(0,i.Z)(this,"loader",void 0),this.loader=e}get progress(){return this.loader.progress>100?100:this.loader.progress}}return e=SystemLoaderProgress,(0,i.Z)(SystemLoaderProgress,"ɵfac",(function(t){return new(t||e)(n.Y36(o._))})),(0,i.Z)(SystemLoaderProgress,"ɵcmp",n.Xpm({type:e,selectors:[["system-loader-progress"]],decls:6,vars:3,consts:[[1,"slds-align--absolute-center"],[1,"slds-size--2-of-3"],[1,"slds-progress-bar","slds-progress-bar_circular","slds-progress-bar_medium"],[1,"slds-progress-bar__value",2,"background-color","#aaa"],[1,"slds-text-align--center","slds-p-vertical--small"]],template:function(e,t){1&e&&(n.TgZ(0,"div",0)(1,"div",1)(2,"div",2),n._UZ(3,"span",3),n.qZA(),n.TgZ(4,"div",4),n._uU(5),n.qZA()()()),2&e&&(n.xp6(3),n.Udp("width",t.progress+"%"),n.xp6(2),n.hij("... loading ",t.loader.activeLoader," ... "))},encapsulation:2})),SystemLoaderProgress})()},9621:(e,t,s)=>{"use strict";s.d(t,{j:()=>u});var i=s(1180),n=s(1591),o=s(2242),l=s(4154),a=s(6559),d=s(4755);const r=[[["system-modal-header"]],[["system-modal-header-empty"]],[["system-modal-content"]],[["system-modal-footer"]]],c=["system-modal-header","system-modal-header-empty","system-modal-content","system-modal-footer"];let u=(()=>{var e;class SystemModal{constructor(e,t){(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"layout",void 0),(0,i.Z)(this,"size","medium"),(0,i.Z)(this,"class",""),this.metadata=e,this.layout=t}get sizeClass(){return this.size&&"small"!=this.size?this.class+" slds-modal_"+this.size:this.class}get containerStyle(){return"small"==this.layout.screenwidth?{padding:"0px",margin:"0px","border-radius":"0px"}:{}}}return e=SystemModal,(0,i.Z)(SystemModal,"ɵfac",(function(t){return new(t||e)(o.Y36(l.Pu),o.Y36(a.b))})),(0,i.Z)(SystemModal,"ɵcmp",o.Xpm({type:e,selectors:[["system-modal"]],inputs:{size:"size",class:"class"},ngContentSelectors:c,decls:6,vars:3,consts:[["role","dialog",1,"slds-modal","slds-fade-in-open",3,"ngClass"],[1,"slds-modal__container",3,"ngStyle"]],template:function(e,t){1&e&&(o.F$t(r),o.TgZ(0,"section",0)(1,"div",1),o.Hsn(2),o.Hsn(3,1),o.Hsn(4,2),o.Hsn(5,3),o.qZA()()),2&e&&(o.Q6J("ngClass",t.sizeClass),o.xp6(1),o.Q6J("@modalanimation",void 0)("ngStyle",t.containerStyle))},dependencies:[d.mk,d.PC],encapsulation:2,data:{animation:[(0,n.X$)("modalanimation",[(0,n.eR)(":enter",[(0,n.oB)({opacity:0}),(0,n.jt)(".3s",(0,n.oB)({opacity:1}))]),(0,n.eR)(":leave",[(0,n.jt)(".3s",(0,n.oB)({opacity:0}))])])]}})),SystemModal})()},3499:(e,t,s)=>{"use strict";s.d(t,{x:()=>a});var i=s(1180),n=s(2242),o=s(4755);const l=["*"];let a=(()=>{var e;class SystemModalContent{constructor(){(0,i.Z)(this,"margin","medium"),(0,i.Z)(this,"grow",!1),(0,i.Z)(this,"scrollable",!0),(0,i.Z)(this,"overflowVisible",!1)}set inputGrow(e){this.grow=!1!==e}set inputOverflowVisible(e){this.overflowVisible=!1!==e}get modalStyle(){return this.overflowVisible?{overflow:"visible"}:{}}get contentclass(){return"slds-modal__content"+(this.grow?" slds-grow":"")+(this.scrollable?"":" slds-scrollable--none")}}return e=SystemModalContent,(0,i.Z)(SystemModalContent,"ɵfac",(function(t){return new(t||e)})),(0,i.Z)(SystemModalContent,"ɵcmp",n.Xpm({type:e,selectors:[["system-modal-content"]],hostVars:2,hostBindings:function(e,t){2&e&&n.Tol(t.contentclass)},inputs:{margin:"margin",grow:"grow",scrollable:"scrollable",overflowVisible:"overflowVisible",inputGrow:["system-modal-content-grow","inputGrow"],inputOverflowVisible:["system-modal-overvlow-visible","inputOverflowVisible"]},ngContentSelectors:l,decls:2,vars:3,consts:[[1,"slds-height_full",3,"ngClass"]],template:function(e,t){1&e&&(n.F$t(),n.TgZ(0,"div",0),n.Hsn(1),n.qZA()),2&e&&(n.ekj("slds-scrollable--y",t.scrollable),n.Q6J("ngClass","slds-p-around--"+t.margin))},dependencies:[o.mk],styles:["[_nghost-%COMP%]{position:relative}"]})),SystemModalContent})()},5767:(e,t,s)=>{"use strict";s.d(t,{p:()=>l});var i=s(1180),n=s(2242);const o=["*"];let l=(()=>{var e;class SystemModalFooter{}return e=SystemModalFooter,(0,i.Z)(SystemModalFooter,"ɵfac",(function(t){return new(t||e)})),(0,i.Z)(SystemModalFooter,"ɵcmp",n.Xpm({type:e,selectors:[["system-modal-footer"]],ngContentSelectors:o,decls:2,vars:0,consts:[[1,"slds-modal__footer"]],template:function(e,t){1&e&&(n.F$t(),n.TgZ(0,"footer",0),n.Hsn(1),n.qZA())},encapsulation:2})),SystemModalFooter})()},1916:(e,t,s)=>{"use strict";s.d(t,{y:()=>f});var i=s(1180),n=s(2242),o=s(5329),l=s(6559),a=s(4755),d=s(2656),r=s(4561),c=s(3463);function u(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"button",7),n.NdJ("click",(function(){n.CHM(e);const t=n.oxw();return n.KtG(t.close.emit(!0))})),n._UZ(1,"system-button-icon",8),n.TgZ(2,"span",9),n._UZ(3,"system-label",10),n.qZA()()}}function h(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"button",11),n.NdJ("click",(function(){n.CHM(e);const t=n.oxw();return n.KtG(t.close.emit(!0))})),n._UZ(1,"system-button-icon",12),n.TgZ(2,"span",9),n._UZ(3,"system-label",10),n.qZA()()}}function m(e,t){if(1&e&&(n.TgZ(0,"div",13),n._UZ(1,"system-icon",14),n.qZA()),2&e){const e=n.oxw();n.xp6(1),n.Q6J("module",e.module)}}const g=["*",[["system-modal-header-right"]],[["system-modal-header-tagline"]]],p=["*","system-modal-header-right","system-modal-header-tagline"];let f=(()=>{var e;class SystemModalHeader{set hideClose(e){this.hiddenCloseButton=!1!==e}constructor(e,t){(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"layout",void 0),(0,i.Z)(this,"module",""),(0,i.Z)(this,"hiddenCloseButton",!1),(0,i.Z)(this,"close",new n.vpe),this.language=e,this.layout=t}get isSmall(){return"small"==this.layout.screenwidth}get headerStyle(){return"small"==this.layout.screenwidth?{"border-radius":"0px"}:{}}}return e=SystemModalHeader,(0,i.Z)(SystemModalHeader,"ɵfac",(function(t){return new(t||e)(n.Y36(o.d),n.Y36(l.b))})),(0,i.Z)(SystemModalHeader,"ɵcmp",n.Xpm({type:e,selectors:[["system-modal-header"]],inputs:{module:"module",hiddenCloseButton:"hiddenCloseButton",hideClose:["system-modal-header-noclose","hideClose"]},outputs:{close:"close"},ngContentSelectors:p,decls:11,vars:4,consts:[[1,"slds-modal__header","slds-theme--shade",3,"ngStyle"],["class","slds-button slds-button_icon slds-modal__close slds-button--icon-inverse","style","color:white;",3,"click",4,"ngIf"],["class","slds-button slds-button_icon slds-is-absolute","style","top: 3px; right: 3px;",3,"click",4,"ngIf"],[1,"slds-grid","slds-grid--align-spread","slds-grid_vertical-align-center"],[1,"slds-media__figure","slds-m-right_x-small"],["class","slds-icon_container",4,"ngIf"],[1,"slds-text-heading_medium","slds-hyphenate"],[1,"slds-button","slds-button_icon","slds-modal__close","slds-button--icon-inverse",2,"color","white",3,"click"],["icon","close","size","large"],[1,"slds-assistive-text"],["label","LBL_CLOSE"],[1,"slds-button","slds-button_icon","slds-is-absolute",2,"top","3px","right","3px",3,"click"],["icon","close"],[1,"slds-icon_container"],["size","small",3,"module"]],template:function(e,t){1&e&&(n.F$t(g),n.TgZ(0,"header",0),n.YNc(1,u,4,0,"button",1),n.YNc(2,h,4,0,"button",2),n.TgZ(3,"div",3)(4,"div",4),n.YNc(5,m,2,1,"div",5),n.qZA(),n.TgZ(6,"span",6),n.Hsn(7),n.qZA(),n.TgZ(8,"div"),n.Hsn(9,1),n.qZA()(),n.Hsn(10,2),n.qZA()),2&e&&(n.Q6J("ngStyle",t.headerStyle),n.xp6(1),n.Q6J("ngIf",!t.hiddenCloseButton&&!t.isSmall),n.xp6(1),n.Q6J("ngIf",!t.hiddenCloseButton&&t.isSmall),n.xp6(3),n.Q6J("ngIf",t.module))},dependencies:[a.O5,a.PC,d.J,r.f,c._],encapsulation:2})),SystemModalHeader})()},1604:(e,t,s)=>{"use strict";s.d(t,{O:()=>l});var i=s(1180),n=s(2242);const o=["*"];let l=(()=>{var e;class SystemModalHeaderRight{}return e=SystemModalHeaderRight,(0,i.Z)(SystemModalHeaderRight,"ɵfac",(function(t){return new(t||e)})),(0,i.Z)(SystemModalHeaderRight,"ɵcmp",n.Xpm({type:e,selectors:[["system-modal-header-right"]],ngContentSelectors:o,decls:1,vars:0,template:function(e,t){1&e&&(n.F$t(),n.Hsn(0))},encapsulation:2})),SystemModalHeaderRight})()},6933:(e,t,s)=>{"use strict";s.d(t,{J:()=>l});var i=s(1180),n=s(2242);const o=["*"];let l=(()=>{var e;class SystemModalHeaderTagline{}return e=SystemModalHeaderTagline,(0,i.Z)(SystemModalHeaderTagline,"ɵfac",(function(t){return new(t||e)})),(0,i.Z)(SystemModalHeaderTagline,"ɵcmp",n.Xpm({type:e,selectors:[["system-modal-header-tagline"]],ngContentSelectors:o,decls:2,vars:0,consts:[[1,"slds-m-top_x-small"]],template:function(e,t){1&e&&(n.F$t(),n.TgZ(0,"p",0),n.Hsn(1),n.qZA())},encapsulation:2})),SystemModalHeaderTagline})()},4947:(e,t,s)=>{"use strict";s.d(t,{w:()=>a});var i=s(1180),n=s(2242),o=s(5329);const l=function(){return{nodeId:"root"}};let a=(()=>{var e;class SystemModuleTree{constructor(e){(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"displayAuditFields",!1),(0,i.Z)(this,"displayRelationshipFields",!1),(0,i.Z)(this,"module",void 0),(0,i.Z)(this,"itemSelected",new n.vpe),(0,i.Z)(this,"selectedNodeId",""),(0,i.Z)(this,"isLoading",!1),this.language=e}ngAfterViewInit(){this.selectedNodeId="root",this.itemSelected.emit({path:"root:"+this.module,module:this.module,nodeId:"root"})}emitSelected(e){this.selectedNodeId=e.nodeId,this.itemSelected.emit(e)}}return e=SystemModuleTree,(0,i.Z)(SystemModuleTree,"ɵfac",(function(t){return new(t||e)(n.Y36(o.d))})),(0,i.Z)(SystemModuleTree,"ɵcmp",n.Xpm({type:e,selectors:[["system-module-tree"]],inputs:{displayAuditFields:"displayAuditFields",displayRelationshipFields:"displayRelationshipFields",module:"module"},outputs:{itemSelected:"itemSelected"},decls:3,vars:8,consts:[["role","tree",1,"slds-tree"],[3,"module","name","path","nodedata","selectedNodeId","displayAuditFields","displayRelationshipFields","itemSelected"]],template:function(e,t){1&e&&(n.TgZ(0,"div")(1,"ul",0)(2,"system-module-tree-item",1),n.NdJ("itemSelected",(function(e){return t.emitSelected(e)})),n.qZA()()()),2&e&&(n.xp6(2),n.Q6J("module",t.module)("name",t.language.getModuleName(t.module))("path","root:"+t.module)("nodedata",n.DdM(7,l))("selectedNodeId",t.selectedNodeId)("displayAuditFields",t.displayAuditFields)("displayRelationshipFields",t.displayRelationshipFields))},encapsulation:2})),SystemModuleTree})()},116:(e,t,s)=>{"use strict";s.d(t,{I:()=>C});var i=s(1180),n=s(2242),o=s(5030),l=s(5329),a=s(3398),d=s(151),r=s(4755),c=s(2656),u=s(8859);function h(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"div",8),n.NdJ("click",(function(){n.CHM(e);const t=n.oxw();return n.KtG(t.onclick())})),n.TgZ(1,"input",9),n.NdJ("mouseleave",(function(){n.CHM(e);const t=n.oxw();return n.KtG(t.onMouseLeave())}))("keydown",(function(e){return e.preventDefault()})),n.qZA(),n._UZ(2,"system-utility-icon",10),n.qZA()}if(2&e){const e=n.oxw();n.xp6(1),n.Q6J("disabled",e.disabled)("system-placeholder",e.selectedCountText)("ngStyle",e.inputTagStyle),n.xp6(1),n.Udp("transform",e.isOpen?"rotate(180deg)":"none")}}function m(e,t){if(1&e){const e=n.EpF();n.ynx(0),n.TgZ(1,"span",16),n.NdJ("click",(function(e){return e.stopPropagation()})),n.TgZ(2,"a",17)(3,"span",18),n._uU(4),n.qZA()(),n.TgZ(5,"button",19),n.NdJ("click",(function(){const t=n.CHM(e),s=t.index,i=t.$implicit,o=n.oxw(2);return n.KtG(o.removeItem(s,i))})),n._UZ(6,"system-button-icon",20),n.qZA()(),n.BQk()}if(2&e){const e=t.$implicit,s=n.oxw(2);n.xp6(3),n.Q6J("system-title",s.listItems[e]),n.xp6(1),n.hij(" ",s.listItems[e]," ")}}function g(e,t){if(1&e&&(n.TgZ(0,"div",21),n._uU(1),n.qZA()),2&e){const e=n.oxw(2);n.xp6(1),n.hij(" ",e.selectedCountText," ")}}function p(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"div",11),n.NdJ("click",(function(){n.CHM(e);const t=n.oxw();return n.KtG(t.onclick())}))("mouseleave",(function(){n.CHM(e);const t=n.oxw();return n.KtG(t.onMouseLeave())})),n.YNc(1,m,7,2,"ng-container",12),n.YNc(2,g,2,1,"div",13),n.TgZ(3,"div",14),n._uU(4," "),n.qZA(),n.TgZ(5,"system-utility-icon",15),n.NdJ("click",(function(){n.CHM(e);const t=n.oxw();return n.KtG(t.onclick())})),n.qZA()()}if(2&e){const e=n.oxw();n.xp6(1),n.Q6J("ngForOf",e.valueArray)("ngForTrackBy",e.trackByFn),n.xp6(1),n.Q6J("ngIf",0==e.valueArray.length),n.xp6(3),n.Udp("transform",e.isOpen?"rotate(180deg)":"none")}}function f(e,t){1&e&&n._UZ(0,"system-utility-icon",28)}function b(e,t){1&e&&n._UZ(0,"system-utility-icon",34)}function v(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"li",23),n.NdJ("click",(function(){const t=n.CHM(e).$implicit,s=n.oxw().$implicit,i=n.oxw(2);return n.KtG(i.toggleAddRemoveItem(t.value,s.value))})),n.TgZ(1,"div",29)(2,"span",30),n.YNc(3,b,1,0,"system-utility-icon",31),n.qZA(),n.TgZ(4,"span",32)(5,"span",33),n._uU(6),n.qZA()()()()}if(2&e){const e=t.$implicit,s=n.oxw(3);n.xp6(3),n.Q6J("ngIf",s.selectedItems[e.value]),n.xp6(2),n.Udp("font-weight",s.selectedItems[e.value]?600:"initial"),n.Q6J("system-title",e.display),n.xp6(1),n.hij(" ",e.display," ")}}function Z(e,t){if(1&e){const e=n.EpF();n.ynx(0),n.TgZ(1,"li",23),n.NdJ("click",(function(){const t=n.CHM(e).$implicit,s=n.oxw(2);return n.KtG(s.toggleAddRemoveGroup(t.value))})),n.TgZ(2,"div",24),n.YNc(3,f,1,0,"system-utility-icon",25),n.TgZ(4,"h3",26),n._uU(5),n.qZA()()(),n.YNc(6,v,7,5,"li",27),n.BQk()}if(2&e){const e=t.$implicit,s=n.oxw(2);n.xp6(3),n.Q6J("ngIf",s.selectedItems[e.value]),n.xp6(1),n.Q6J("system-title",e.display),n.xp6(1),n.hij(" ",e.display," "),n.xp6(1),n.Q6J("ngForOf",e.items)("ngForTrackBy",s.trackByFn)}}function y(e,t){if(1&e&&(n.TgZ(0,"ul",22),n.YNc(1,Z,7,5,"ng-container",12),n.qZA()),2&e){const e=n.oxw();n.xp6(1),n.Q6J("ngForOf",e.parsedListItems)("ngForTrackBy",e.trackByFn)}}function x(e,t){1&e&&n._UZ(0,"system-utility-icon",34)}function w(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"li",23),n.NdJ("click",(function(){const t=n.CHM(e).$implicit,s=n.oxw(2);return n.KtG(s.toggleAddRemoveItem(t.value))})),n.TgZ(1,"div",29)(2,"span",30),n.YNc(3,x,1,0,"system-utility-icon",31),n.qZA(),n.TgZ(4,"span",32)(5,"span",33),n._uU(6),n.qZA()()()()}if(2&e){const e=t.$implicit,s=n.oxw(2);n.xp6(3),n.Q6J("ngIf",s.selectedItems[e.value]),n.xp6(2),n.Udp("font-weight",s.selectedItems[e.value]?600:"initial"),n.Q6J("system-title",e.display),n.xp6(1),n.hij(" ",e.display," ")}}function T(e,t){if(1&e&&(n.TgZ(0,"ul",22),n.YNc(1,w,7,5,"li",35),n.qZA()),2&e){const e=n.oxw();n.xp6(1),n.Q6J("ngForOf",e.parsedListItems)("ngForTrackBy",e.trackByFn)}}let C=(()=>{var e;class SystemMultipleSelect{set groupedSetter(e){this.grouped=!1!==e}set showPillsSetter(e){this.showPills=!1!==e}set dropdownLengthClassSetter(e){this.dropdownLengthClass=e?"slds-dropdown_length-"+e:"slds-dropdown_length-7"}set groupSeparatorSetter(e){this.groupSeparator=e||"_"}constructor(e,t,s){(0,i.Z)(this,"elementRef",void 0),(0,i.Z)(this,"renderer",void 0),(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"disabled",!1),(0,i.Z)(this,"grouped",!1),(0,i.Z)(this,"showPills",!0),(0,i.Z)(this,"listItems",{}),(0,i.Z)(this,"groupSeparator","_"),(0,i.Z)(this,"parsedListItems",[]),(0,i.Z)(this,"valueArray",[]),(0,i.Z)(this,"isOpen",!1),(0,i.Z)(this,"clickListener",void 0),(0,i.Z)(this,"selectedItems",{}),(0,i.Z)(this,"selectedCountText","0 Selected Items"),(0,i.Z)(this,"inputTagStyle",{color:"transparent",cursor:"pointer"}),(0,i.Z)(this,"dropdownLengthClass","slds-dropdown_length-7"),(0,i.Z)(this,"escKeyListener",void 0),(0,i.Z)(this,"onChange",void 0),(0,i.Z)(this,"onTouched",void 0),this.elementRef=e,this.renderer=t,this.language=s}ngOnChanges(){this.buildOptionGroups()}ngAfterViewInit(){this.subscribeToESCKeyUp()}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}writeValue(e){e&&e.length&&(this.valueArray=e,this.selectedItems=_.object(e.map((e=>[e,!0])))),this.setSelectedCountText()}buildOptionGroups(){let e;if(this.parsedListItems=[],this.grouped){e={};for(let t in this.listItems)this.listItems.hasOwnProperty(t)&&!t.includes(this.groupSeparator)&&(e[t]={value:t,display:this.listItems[t],items:[]});for(let t in this.listItems)if(this.listItems.hasOwnProperty(t)){const s=t.split(this.groupSeparator);2==s.length&&e[s[0]]&&e[s[0]].items.push({value:t,display:this.listItems[t]})}this.parsedListItems=_.toArray(e)}else{e=[];for(let t in this.listItems)this.listItems.hasOwnProperty(t)&&e.push({value:t,display:this.listItems[t]});this.parsedListItems=e}}onclick(){this.isOpen=!this.isOpen}subscribeToESCKeyUp(){this.escKeyListener=this.renderer.listen("document","keyup",(e=>{"Escape"==e.key&&(this.isOpen=!1)}))}onMouseLeave(){this.clickListener&&this.clickListener(),this.isOpen&&(this.clickListener=this.renderer.listen("document","click",(e=>this.handleCloseDropdown(e))))}handleCloseDropdown(e){this.elementRef.nativeElement.contains(e.target)||(this.isOpen=!1,this.clickListener())}toggleAddRemoveItem(e,t){const s=this.valueArray.indexOf(e);let i=this.valueArray.indexOf(t);s>-1?(this.valueArray.splice(s,1),this.selectedItems[e]=!1,t&&!this.groupHasItems(t)&&(i=this.valueArray.indexOf(t),this.valueArray.splice(i,1),this.selectedItems[t]=!1)):(t&&-1==i&&(this.valueArray.push(t),this.selectedItems[t]=!0),this.valueArray.push(e),this.selectedItems[e]=!0),this.setSelectedCountText(),this.onChange(this.valueArray)}toggleAddRemoveGroup(e){if(this.groupHasItems(e))return;const t=this.valueArray.indexOf(e);t>-1?(this.valueArray.splice(t,1),this.selectedItems[e]=!1):(this.valueArray.push(e),this.selectedItems[e]=!0),this.setSelectedCountText(),this.onChange(this.valueArray)}groupHasItems(e){return this.valueArray.some((t=>{const s=t.split(this.groupSeparator);return 2==s.length&&s[0]==e}))}trackByFn(e,t){return e}removeItem(e,t){if(this.valueArray.splice(e,1),this.selectedItems[t]=!1,this.grouped&&t.split(this.groupSeparator).length>1){const e=t.split(this.groupSeparator)[0];if(!this.groupHasItems(e)){const t=this.valueArray.indexOf(e);this.valueArray.splice(t,1),this.selectedItems[e]=!1}}this.setSelectedCountText(),this.onChange(this.valueArray)}setSelectedCountText(){this.grouped?this.selectedCountText=`${this.valueArray.filter((e=>e.includes(this.groupSeparator))).length} ${this.language.getLabel("LBL_SELECTED_ITEMS")}`:this.selectedCountText=`${this.valueArray.length} ${this.language.getLabel("LBL_SELECTED_ITEMS")}`}ngOnDestroy(){this.escKeyListener&&this.escKeyListener()}}return e=SystemMultipleSelect,(0,i.Z)(SystemMultipleSelect,"ɵfac",(function(t){return new(t||e)(n.Y36(n.SBq),n.Y36(n.Qsj),n.Y36(l.d))})),(0,i.Z)(SystemMultipleSelect,"ɵcmp",n.Xpm({type:e,selectors:[["system-multiple-select"]],inputs:{disabled:"disabled",groupedSetter:["grouped","groupedSetter"],showPillsSetter:["showPills","showPillsSetter"],listItems:"listItems",dropdownLengthClassSetter:["listHeight","dropdownLengthClassSetter"],groupSeparatorSetter:["groupSeparator","groupSeparatorSetter"]},features:[n._Bn([{provide:o.JU,useExisting:(0,n.Gpc)((()=>e)),multi:!0}]),n.TTD],decls:9,vars:7,consts:[[1,"slds-form-element"],[1,"slds-form-element__control"],[1,"slds-combobox_container"],["aria-expanded","true","aria-haspopup","listbox","role","combobox",1,"slds-combobox","slds-dropdown-trigger","slds-dropdown-trigger_click"],["class","slds-combobox__form-element slds-input-has-icon slds-input-has-icon_right","role","none",3,"click",4,"ngIf"],["class","slds-grid slds-grid--vertical-align-center slds-wrap slds-pill_container",3,"click","mouseleave",4,"ngIf"],["role","listbox",1,"slds-dropdown","slds-dropdown_fluid","spice-scrollbar",3,"ngClass"],["class","slds-listbox slds-listbox_vertical","role","group",4,"ngIf"],["role","none",1,"slds-combobox__form-element","slds-input-has-icon","slds-input-has-icon_right",3,"click"],["type","text","autoComplete","off","role","textbox",1,"slds-input","slds-combobox__input","slds-has-focus","slds-combobox__input-value",3,"disabled","system-placeholder","ngStyle","mouseleave","keydown"],["icon","down","addclasses","slds-input__icon slds-input__icon_right"],[1,"slds-grid","slds-grid--vertical-align-center","slds-wrap","slds-pill_container",3,"click","mouseleave"],[4,"ngFor","ngForOf","ngForTrackBy"],["class","slds-grow slds-m-left--xx-small","style","cursor: default;",4,"ngIf"],[1,"slds-grow"],["icon","down","size","xx-small",1,"slds-col--bump-left","slds-p-right--xx-small",3,"click"],[1,"slds-pill","slds-pill_link",2,"max-width","130px",3,"click"],["href","javascript:void(0);",1,"slds-pill__action"],[1,"slds-pill__label",3,"system-title"],["system-title","LBL_REMOVE",1,"slds-button","slds-button_icon","slds-pill__remove",3,"click"],["icon","close"],[1,"slds-grow","slds-m-left--xx-small",2,"cursor","default"],["role","group",1,"slds-listbox","slds-listbox_vertical"],["role","presentation",1,"slds-listbox__item",3,"click"],["role","presentation",1,"slds-media","slds-listbox__option","slds-listbox__option_plain","slds-media_small"],["icon","check","size","xx-small","class","slds-m-right--xx-small",4,"ngIf"],["role","presentation",1,"slds-listbox__option-header","slds-truncate","slds-text-title_caps",3,"system-title"],["role","presentation","class","slds-listbox__item",3,"click",4,"ngFor","ngForOf","ngForTrackBy"],["icon","check","size","xx-small",1,"slds-m-right--xx-small"],["role","option",1,"slds-media","slds-listbox__option","slds-listbox__option_plain","slds-media_small","slds-is-selected"],[1,"slds-media__figure","slds-listbox__option-icon"],["icon","check","size","xx-small",4,"ngIf"],[1,"slds-media__body"],[1,"slds-truncate",3,"system-title"],["icon","check","size","xx-small"],["class","slds-listbox__item","role","presentation",3,"click",4,"ngFor","ngForOf","ngForTrackBy"]],template:function(e,t){1&e&&(n.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),n.YNc(4,h,3,5,"div",4),n.YNc(5,p,6,5,"div",5),n.TgZ(6,"div",6),n.YNc(7,y,2,2,"ul",7),n.YNc(8,T,2,2,"ul",7),n.qZA()()()()()),2&e&&(n.xp6(3),n.ekj("slds-is-open",t.isOpen),n.xp6(1),n.Q6J("ngIf",!t.showPills),n.xp6(1),n.Q6J("ngIf",t.showPills),n.xp6(1),n.Q6J("ngClass",t.dropdownLengthClass),n.xp6(1),n.Q6J("ngIf",t.grouped),n.xp6(1),n.Q6J("ngIf",!t.grouped))},dependencies:[a.A,d.S,r.mk,r.sg,r.O5,r.PC,c.J,u.r],encapsulation:2})),SystemMultipleSelect})()},4988:(e,t,s)=>{"use strict";s.d(t,{y:()=>a});var i=s(1180),n=s(2242),o=s(3348),l=s(2032);let a=(()=>{var e;class SystemNavigationCollector{constructor(e,t){(0,i.Z)(this,"activatedRoute",void 0),(0,i.Z)(this,"navigation",void 0),this.activatedRoute=e,this.navigation=t,this.activatedRoute.params.subscribe((e=>{this.activatedRoute.routeConfig&&this.navigation.handleNavigation(e,this.activatedRoute.routeConfig,this.activatedRoute.snapshot)}))}}return e=SystemNavigationCollector,(0,i.Z)(SystemNavigationCollector,"ɵfac",(function(t){return new(t||e)(n.Y36(o.gz),n.Y36(l.G))})),(0,i.Z)(SystemNavigationCollector,"ɵcmp",n.Xpm({type:e,selectors:[["ng-component"]],decls:1,vars:0,template:function(e,t){1&e&&n._UZ(0,"span")},encapsulation:2})),SystemNavigationCollector})()},8070:(e,t,s)=>{"use strict";s.d(t,{M:()=>u});var i=s(1180),n=s(2242),o=s(5920),l=s(2032),a=s(4755),d=s(5383);function r(e,t){if(1&e&&(n.ynx(0),n._UZ(1,"system-navigation-manager-route-container",3),n.BQk()),2&e){const e=t.$implicit;n.xp6(1),n.Q6J("tabid",e.id)("parentttabid",e.parentid)("object",e)}}function c(e,t){if(1&e&&(n.ynx(0),n._UZ(1,"system-navigation-manager-route-container",1),n.YNc(2,r,2,3,"ng-container",2),n.BQk()),2&e){const e=n.oxw();n.xp6(2),n.Q6J("ngForOf",e.navigation.objectTabs)}}let u=(()=>{var e;class SystemNavigationManager{constructor(e,t){(0,i.Z)(this,"session",void 0),(0,i.Z)(this,"navigation",void 0),this.session=e,this.navigation=t}get authenticated(){return this.session.authData.sessionId&&!0===this.session.authData.loaded}}return e=SystemNavigationManager,(0,i.Z)(SystemNavigationManager,"ɵfac",(function(t){return new(t||e)(n.Y36(o.n),n.Y36(l.G))})),(0,i.Z)(SystemNavigationManager,"ɵcmp",n.Xpm({type:e,selectors:[["system-navigation-manager"]],decls:1,vars:1,consts:[[4,"ngIf"],["tabid","main"],[4,"ngFor","ngForOf"],[3,"tabid","parentttabid","object"]],template:function(e,t){1&e&&n.YNc(0,c,3,1,"ng-container",0),2&e&&n.Q6J("ngIf",t.authenticated)},dependencies:[a.sg,a.O5,d.j],encapsulation:2})),SystemNavigationManager})()},5383:(e,t,s)=>{"use strict";s.d(t,{j:()=>p});var i=s(1180),n=s(727),o=s(7017),l=s(2242),a=s(4154),d=s(5329),r=s(3348),c=s(3369),u=s(2032),h=s(4755),m=s(2995);const g=function(e){return{"slds-hide":e}};let p=(()=>{var e;class SystemNavigationManagerRouteContainer{constructor(e,t,s,o,l,a,d){(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"router",void 0),(0,i.Z)(this,"broadcast",void 0),(0,i.Z)(this,"navigation",void 0),(0,i.Z)(this,"navigationtab",void 0),(0,i.Z)(this,"changeDetectorRef",void 0),(0,i.Z)(this,"object",void 0),(0,i.Z)(this,"tabid",void 0),(0,i.Z)(this,"parentttabid",void 0),(0,i.Z)(this,"loaded",!1),(0,i.Z)(this,"routercomponent",void 0),(0,i.Z)(this,"renderedPath",void 0),(0,i.Z)(this,"rendererParams",void 0),(0,i.Z)(this,"subscriptions",new n.w0),this.metadata=e,this.language=t,this.router=s,this.broadcast=o,this.navigation=l,this.navigationtab=a,this.changeDetectorRef=d,this.changeDetectorRef.detach(),this.subscriptions.add(this.navigationtab.tabinfo$.subscribe((e=>{this.navigation.settabinfo(this.tabid,e)}))),this.subscriptions.add(this.navigationtab.close$.subscribe((e=>{this.navigation.closeObjectTab(this.tabid,!0)})))}ngOnInit(){this.setParentTabId(),this.object&&(this.navigationtab.objecttab=this.object),this.subscriptions.add(this.navigation.activeTab$.subscribe((e=>{if(e==this.tabid){let e;if("main"===this.tabid)this.renderedPath==this.navigation.maintab.path&&_.isEqual(this.rendererParams,this.navigation.maintab.params)||(e=this.metadata.getRouteComponent(this.navigation.maintab.path),this.routercomponent=e||void 0,this.navigationtab.activeRoute={path:this.navigation.maintab.path,params:this.navigation.maintab.params},this.navigationtab.activeRoute$.next(this.navigationtab.activeRoute),this.renderedPath=this.navigation.maintab.path,this.rendererParams={...this.navigation.maintab.params});else this.renderedPath==this.object.path&&_.isEqual(this.rendererParams,this.object.params)||(e=this.metadata.getRouteComponent(this.object.path.replace("tab/:tabid/","")),this.routercomponent=e||void 0,this.navigationtab.activeRoute={path:this.object.path,params:this.object.params},this.navigationtab.activeRoute$.next(this.navigationtab.activeRoute),this.renderedPath=this.object.path,this.rendererParams={...this.object.params});this.loaded=!0,this.changeDetectorRef.reattach(),this.changeDetectorRef.markForCheck()}else this.changeDetectorRef.detach(),this.changeDetectorRef.detectChanges()})))}setParentTabId(){"main"!=this.tabid&&"subtabbed"==this.navigation.navigationparadigm&&this.object.enablesubtabs&&(this.navigationtab.tabid=this.parentttabid?this.parentttabid:this.tabid)}ngOnDestroy(){this.subscriptions.unsubscribe()}get isActive(){return this.navigation.displayTab==this.tabid}}return e=SystemNavigationManagerRouteContainer,(0,i.Z)(SystemNavigationManagerRouteContainer,"ɵfac",(function(t){return new(t||e)(l.Y36(a.Pu),l.Y36(d.d),l.Y36(r.F0),l.Y36(c.f),l.Y36(u.G,4),l.Y36(o.d),l.Y36(l.sBO))})),(0,i.Z)(SystemNavigationManagerRouteContainer,"ɵcmp",l.Xpm({type:e,selectors:[["system-navigation-manager-route-container"]],inputs:{object:"object",tabid:"tabid",parentttabid:"parentttabid"},features:[l._Bn([o.d])],decls:2,vars:4,consts:[[3,"ngClass"],[3,"component"]],template:function(e,t){1&e&&(l.TgZ(0,"div",0),l._UZ(1,"system-dynamic-component",1),l.qZA()),2&e&&(l.Q6J("ngClass",l.VKq(2,g,!t.isActive)),l.xp6(1),l.Q6J("component",t.routercomponent))},dependencies:[h.mk,m.T],encapsulation:2})),SystemNavigationManagerRouteContainer})()},5320:(e,t,s)=>{"use strict";s.d(t,{H:()=>d});var i=s(1180),n=s(7445),o=s(5698),l=s(2242),a=s(2422);let d=(()=>{var e;class SystemNumberSpinner{constructor(e,t){(0,i.Z)(this,"userpreferences",void 0),(0,i.Z)(this,"cdref",void 0),(0,i.Z)(this,"_value",0),(0,i.Z)(this,"value",void 0),(0,i.Z)(this,"steps",20),(0,i.Z)(this,"duration",300),this.userpreferences=e,this.cdref=t}ngOnChanges(e){const t=(parseFloat(this.value)-this._value)/this.steps;(0,n.F)(this.duration/this.steps).pipe((0,o.q)(this.steps)).subscribe((e=>{this._value!=parseFloat(this.value)&&(this._value+=t,Math.abs(this._value-parseFloat(this.value))<1&&(this._value=parseFloat(this.value)),this.cdref.detectChanges())}),(e=>{this._value=parseFloat(this.value),this.cdref.detectChanges()}),(()=>{this._value=parseFloat(this.value),this.cdref.detectChanges()}))}get displayvalue(){return this.userpreferences.formatMoney(this._value,0)}}return e=SystemNumberSpinner,(0,i.Z)(SystemNumberSpinner,"ɵfac",(function(t){return new(t||e)(l.Y36(a.z),l.Y36(l.sBO))})),(0,i.Z)(SystemNumberSpinner,"ɵcmp",l.Xpm({type:e,selectors:[["system-number-spinner"]],inputs:{value:"value",steps:"steps",duration:"duration"},features:[l.TTD],decls:1,vars:1,template:function(e,t){1&e&&l._uU(0),2&e&&l.Oqu(t.displayvalue)},encapsulation:2,changeDetection:0})),SystemNumberSpinner})()},1819:(e,t,s)=>{"use strict";s.d(t,{W:()=>ne});var i=s(1180),n=s(2242),o=s(4505),l=s(2294),a=s(3278),d=s(5547),r=s(5329),c=s(2422),u=s(6625),h=s(7763),m=s(4021),g=s(4755),p=s(5030),f=s(1553),b=s(2995),v=s(3463),Z=s(6449),_=s(4211),y=s(6268),x=s(4845);function w(e,t){if(1&e&&n._UZ(0,"system-label",45),2&e){const e=n.oxw();n.Q6J("label","LBL_"+e.getPrefValue("distance_unit_system"))}}function T(e,t){1&e&&n._UZ(0,"option")}function C(e,t){1&e&&n._UZ(0,"option")}function A(e,t){if(1&e&&(n.TgZ(0,"option",46),n._uU(1),n.qZA()),2&e){const e=t.$implicit;n.Q6J("value",e.value),n.xp6(1),n.hij(" ",e.name," ")}}function k(e,t){1&e&&n._UZ(0,"option")}function L(e,t){if(1&e&&(n.TgZ(0,"option",46),n._uU(1),n.qZA()),2&e){const e=t.$implicit;n.Q6J("value",e.value),n.xp6(1),n.hij(" ",e.name," ")}}function I(e,t){if(1&e&&(n.ynx(0),n._uU(1),n.BQk()),2&e){const e=t.$implicit,s=n.oxw();n.xp6(1),n.hij(" ",e.id==s.getPrefValue("currency")?e.name:""," ")}}function M(e,t){1&e&&n._UZ(0,"option")}function S(e,t){if(1&e&&(n.TgZ(0,"option",46),n._uU(1),n.qZA()),2&e){const e=t.$implicit;n.Q6J("value",e.id),n.xp6(1),n.hij(" ",e.name," ")}}function J(e,t){1&e&&n._UZ(0,"option")}function O(e,t){if(1&e&&(n.TgZ(0,"option",46),n._uU(1),n.qZA()),2&e){const e=t.$implicit;n.Q6J("value",e),n.xp6(1),n.hij(" ",e," ")}}function N(e,t){if(1&e&&n._UZ(0,"option",47),2&e){const e=n.oxw();n.Q6J("selected",!e.numberDelimitation)}}function F(e,t){if(1&e&&(n.TgZ(0,"option",48),n._uU(1),n.qZA()),2&e){const e=t.$implicit,s=n.oxw();n.Q6J("ngValue",e)("selected",s.numberDelimitation===e),n.xp6(1),n.hij(" ",e.show," ")}}function q(e,t){1&e&&n._UZ(0,"option")}function E(e,t){if(1&e&&(n.TgZ(0,"option",46),n._uU(1),n.qZA()),2&e){const e=t.$implicit;n.Q6J("value",e),n.xp6(1),n.hij(" ",e," ")}}function Y(e,t){1&e&&n._UZ(0,"option")}function D(e,t){if(1&e&&(n.TgZ(0,"option",46),n._uU(1),n.qZA()),2&e){const e=t.$implicit;n.Q6J("value",e),n.xp6(1),n.hij(" ",e," ")}}function Q(e,t){1&e&&n._UZ(0,"option")}function U(e,t){if(1&e&&(n.TgZ(0,"option",46),n._uU(1),n.qZA()),2&e){const e=t.$implicit;n.Q6J("value",e.name),n.xp6(1),n.Oqu(e.example)}}function R(e,t){1&e&&n._UZ(0,"system-label",34)}function j(e,t){1&e&&n._UZ(0,"system-label",36)}function B(e,t){1&e&&n._UZ(0,"option")}function G(e,t){1&e&&n._UZ(0,"option")}function P(e,t){if(1&e&&(n.TgZ(0,"option",46),n._UZ(1,"system-label",45),n.qZA()),2&e){const e=t.$implicit;n.Q6J("value",e),n.xp6(1),n.Q6J("label",("LBL_"+e).toUpperCase())}}function H(e,t){1&e&&n._UZ(0,"option")}function z(e,t){if(1&e&&(n.TgZ(0,"option",46),n._uU(1),n._UZ(2,"system-label",49),n.qZA()),2&e){const e=t.$implicit;n.Q6J("value",e),n.xp6(1),n.hij(" ",e," ")}}function V(e,t){1&e&&n._UZ(0,"option")}function K(e,t){if(1&e&&(n.TgZ(0,"option",50),n._uU(1),n.qZA()),2&e){const e=t.$implicit,s=n.oxw();n.Q6J("value",e)("disabled",s.preferences.calendar_day_end_hour<=e),n.xp6(1),n.hij(" ",e," ")}}function $(e,t){1&e&&n._UZ(0,"option")}function X(e,t){if(1&e&&(n.TgZ(0,"option",50),n._uU(1),n.qZA()),2&e){const e=t.$implicit,s=n.oxw();n.Q6J("value",e)("disabled",s.preferences.calendar_day_start_hour>=e),n.xp6(1),n.hij(" ",e," ")}}function W(e,t){if(1&e&&n._UZ(0,"system-label",45),2&e){const e=n.oxw();n.Q6J("label",e.display_reminderTime)}}const ee=function(e){return{reminder_time:e}},te=function(e){return{module:"Calls",id:"",data:e}},se=function(e){return{hidelabel:!0,showEmptyOption:e}},ie=function(e){return{fieldname:"reminder_time",fieldconfig:e}};let ne=(()=>{var e;class SystemPreferencesPanel{get numberDelimitation(){const e=this.numberDelimitationsList.find((e=>e.dec_sep==this.preferences.dec_sep&&e.num_grp_sep==this.preferences.num_grp_sep));return e||void 0}set numberDelimitation(e){this.preferences.dec_sep=e.dec_sep,this.preferences.num_grp_sep=e.num_grp_sep,this.setDisplay_numberDelimitation()}constructor(e,t,s,n,o,l,a){(0,i.Z)(this,"backend",void 0),(0,i.Z)(this,"view",void 0),(0,i.Z)(this,"toast",void 0),(0,i.Z)(this,"currency",void 0),(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"userpreferences",void 0),(0,i.Z)(this,"configurationService",void 0),(0,i.Z)(this,"currencySignificantDigitsList",["1","2","3","4","5","6"]),(0,i.Z)(this,"thousandDelimiterList",[",","."]),(0,i.Z)(this,"timeFormatList",[{name:moment().format("HH:mm"),value:"H:i"},{name:moment().format("hh:mma"),value:"h:ia"},{name:moment().format("hh:mmA"),value:"h:iA"},{name:moment().format("hh:mm a"),value:"h:i a"},{name:moment().format("hh:mm A"),value:"h:i A"},{name:moment().format("HH.mm"),value:"H.i"},{name:moment().format("hh.mma"),value:"h.ia"},{name:moment().format("hh.mmA"),value:"h.iA"},{name:moment().format("hh.mm a"),value:"h.i a"},{name:moment().format("hh.mm A"),value:"h.i A"}]),(0,i.Z)(this,"dateFormatList",[{name:moment().format("YYYY-MM-DD"),value:"Y-m-d"},{name:moment().format("MM-DD-YYYY"),value:"m-d-Y"},{name:moment().format("DD-MM-YYYY"),value:"d-m-Y"},{name:moment().format("Y/MM/DD"),value:"Y/m/d"},{name:moment().format("MM/DD/YYYY"),value:"m/d/Y"},{name:moment().format("DD/MM/YYYY"),value:"d/m/Y"},{name:moment().format("YYYY.MM.DD"),value:"Y.m.d"},{name:moment().format("DD.MM.YYYY"),value:"d.m.Y"},{name:moment().format("MM.DD.YYYY"),value:"m.d.Y"}]),(0,i.Z)(this,"currencyList",[]),(0,i.Z)(this,"preferences",{}),(0,i.Z)(this,"weekDayStartList",["Sunday","Monday"]),(0,i.Z)(this,"weekDaysCountList",[5,6,7]),(0,i.Z)(this,"dayHoursList",[]),(0,i.Z)(this,"reminderTimeOptions",{"-1":"LBL_REMINDER_NONE",60:"LBL_REMINDER_1MINUTE",300:"LBL_REMINDER_5MINUTES",600:"LBL_REMINDER_10MINUTES",900:"LBL_REMINDER_15MINUTES",1800:"LBL_REMINDER_30MINUTES",3600:"LBL_REMINDER_1HOUR",7200:"LBL_REMINDER_2HOURS",10800:"LBL_REMINDER_3HOURS",18e3:"LBL_REMINDER_5HOURS",86400:"LBL_REMINDER_1DAY"}),(0,i.Z)(this,"exportDelimiterList",[",",";"]),(0,i.Z)(this,"charsetList",["BIG-5","CP1251","CP1252","EUC-CN","EUC-JP","EUC-KR","EUC-TW","ISO-2022-JP","ISO-2022-KR","ISO-8859-1","ISO-8859-2","ISO-8859-3","ISO-8859-4","ISO-8859-5","ISO-8859-6","ISO-8859-7","ISO-8859-8","ISO-8859-9","ISO-8859-10","ISO-8859-13","ISO-8859-14","ISO-8859-15","KOI8-R","KOI8-U","SJIS","UTF-8"]),(0,i.Z)(this,"numberDelimitationsList",[{show:"1.000.000,00",num_grp_sep:".",dec_sep:","},{show:"1,000,000.00",num_grp_sep:",",dec_sep:"."},{show:"1 000 000,00",num_grp_sep:" ",dec_sep:","}]),(0,i.Z)(this,"nameFormats",[]),(0,i.Z)(this,"display_name",void 0),(0,i.Z)(this,"display_dateFormat",void 0),(0,i.Z)(this,"display_timeFormat",void 0),(0,i.Z)(this,"display_reminderTime",void 0),(0,i.Z)(this,"display_numberDelimitation",void 0),(0,i.Z)(this,"isPersonalContext",!1),(0,i.Z)(this,"defaultPreferences",void 0),(0,i.Z)(this,"preferencesNames",["calendar_day_start_hour","calendar_day_end_hour","currency","datef","export_charset","locale_name_format","dec_sep","currency_significant_digits","distance_unit_system","export_delimiter","help_icon","home_assistant","num_grp_sep","reminder_time","timef","timezone","week_day_start","week_days_count"]),(0,i.Z)(this,"isLoading",!1),this.backend=e,this.view=t,this.toast=s,this.currency=n,this.language=o,this.userpreferences=l,this.configurationService=a,this.setInitialValues()}ngOnInit(){this.setDisplayValues()}ngOnChanges(){this.preferences&&this.setDisplayValues()}setDisplayValues(){this.setDisplay_reminderTime(),this.setDisplay_dateFormat(),this.setDisplay_timeFormat(),this.setDisplay_name(),this.setDisplay_numberDelimitation()}prefChanged(){}setInitialValues(){this.view.isEditable=!0,this.createNameFormats(),this.currencyList=this.currency.getCurrencies();for(let e=0;e<24;e++)this.dayHoursList.push(e);this.defaultPreferences=this.configurationService.getData("defaultuserpreferences")}createNameFormats(){const e={t:"LBL_LOCALE_NAME_EXAMPLE_TITLE",f:"LBL_LOCALE_NAME_EXAMPLE_FIRST",l:"LBL_LOCALE_NAME_EXAMPLE_LAST",s:"LBL_LOCALE_NAME_EXAMPLE_SALUTATION",d:"LBL_LOCALE_NAME_EXAMPLE_DEGREE_BEFORE",a:"LBL_LOCALE_NAME_EXAMPLE_DEGREE_AFTER"};this.nameFormats=["s f l","f l","s l","l, s f","l, f","s l, f","l s f","l f s","s d f l a"].map((t=>({name:t,example:t.replace(/t|f|l|s|d|a/g,(t=>this.language.getLabel(e[t])))})))}setDisplay_dateFormat(){const e=this.getPrefValue("datef");this.display_dateFormat=e?moment().format(e.replace("Y","YYYY").replace("m","MM").replace("d","DD")):""}setDisplay_timeFormat(){const e=this.getPrefValue("timef");this.display_timeFormat=e?moment().format(e.replace("H","HH").replace("h","hh").replace("i","mm")):""}setDisplay_reminderTime(){const e=this.getPrefValue("reminder_time");this.display_reminderTime=e?this.reminderTimeOptions[e]:""}setDisplay_numberDelimitation(){const e=this.getPrefValue("_numberDelimitation");this.display_numberDelimitation=e?e.show:""}setDisplay_name(){this.display_name="";const e=this.getPrefValue("locale_name_format");e&&this.nameFormats&&this.nameFormats.some((t=>{if(e===t.name)return this.display_name=t.example,!0}))}getPrefValue(e){if("_numberDelimitation"!==e)return this.prefValueIsGlobalFallback(e)?this.defaultPreferences[e]:this.preferences[e];{let t;return t=this.prefValueIsGlobalFallback(e)?this.numberDelimitationsList.find((e=>e.dec_sep==this.defaultPreferences.dec_sep&&e.num_grp_sep==this.defaultPreferences.num_grp_sep)):this.numberDelimitationsList.find((e=>e.dec_sep==this.preferences.dec_sep&&e.num_grp_sep==this.preferences.num_grp_sep)),t||void 0}}prefValueIsGlobalFallback(e){return!(!this.isPersonalContext||!this.defaultPreferences)&&("_numberDelimitation"!==e?!this.isSet(this.preferences[e])&&this.isSet(this.defaultPreferences[e]):(!this.isSet(this.preferences.num_grp_sep)||!this.isSet(this.preferences.dec_sep))&&this.isSet(this.defaultPreferences.num_grp_sep)&&this.isSet(this.defaultPreferences.dec_sep))}isSet(e){return void 0!==e&&("string"!=typeof e||0!==e.length)}atLeastOnePrefMissing(){return this.preferencesNames.some((e=>!this.isSet(this.preferences[e])))}reminderTimeChanged(e){this.preferences.reminder_time=e.reminder_time,this.setDisplay_reminderTime()}}return e=SystemPreferencesPanel,(0,i.Z)(SystemPreferencesPanel,"ɵfac",(function(t){return new(t||e)(n.Y36(o.y),n.Y36(l.e),n.Y36(a.A),n.Y36(d.A),n.Y36(r.d),n.Y36(c.z),n.Y36(u.C))})),(0,i.Z)(SystemPreferencesPanel,"ɵcmp",n.Xpm({type:e,selectors:[["system-preferences-panel"]],inputs:{preferences:"preferences",isPersonalContext:"isPersonalContext"},features:[n.TTD],decls:141,vars:90,consts:[[3,"system-overlay-loading-spinner"],["tabtitle","LBL_LOCALE_PREFERENCES",3,"collapsible"],[1,"slds-grid","slds-grid--align-spread"],["itemlabel","LBL_TIMEZONE",1,"slds-size--1-of-4"],[3,"global"],[3,"ngModel","denyEmpty","ngModelChange"],["itemlabel","LBL_DISTANCE_UNIT_SYSTEM",1,"slds-size--1-of-4"],[3,"label",4,"ngIf"],[1,"slds-select_container"],[1,"slds-select",3,"ngModel","ngModelChange"],[4,"ngIf"],["value","METRIC"],["label","LBL_METRIC"],["value","IMPERIAL"],["label","LBL_IMPERIAL"],["itemlabel","LBL_DATE_FORMAT",1,"slds-size--1-of-4"],[3,"value",4,"ngFor","ngForOf"],["itemlabel","LBL_TIME_FORMAT",1,"slds-size--1-of-4"],["itemlabel","LBL_CURRENCY",1,"slds-size--2-of-5"],[1,"slds-form-element__static"],[4,"ngFor","ngForOf"],["itemlabel","LBL_DECIMAL_DIGITS",1,"slds-size--1-of-5"],["itemlabel","LBL_NUMBER_FORMAT",1,"slds-size--2-of-5"],[3,"selected",4,"ngIf"],[3,"ngValue","selected",4,"ngFor","ngForOf"],["tabtitle","LBL_EXPORT_PREFERENCES",3,"collapsible"],["itemlabel","LBL_EXPORT_DELIMITER",1,"slds-size--1-of-2"],["itemlabel","LBL_EXPORT_CHARSET",1,"slds-size--1-of-2"],["tabtitle","LBL_OTHER_PREFERENCES",3,"collapsible"],["itemlabel","LBL_NAME_FORMAT",1,"slds-size--1-of-2"],["itemlabel","LBL_HELP_ICON",1,"slds-size--1-of-2"],["label","LBL_VISIBLE",4,"ngIf"],["label","LBL_HIDDEN",4,"ngIf"],["value","visible"],["label","LBL_VISIBLE"],["value","hidden"],["label","LBL_HIDDEN"],["tabtitle","LBL_CALENDAR_PREFERENCES",3,"collapsible"],["itemlabel","LBL_WEEK_START_DAY",1,"slds-size--1-of-4"],["itemlabel","LBL_WEEK_DAYS_COUNT",1,"slds-size--1-of-4"],["itemlabel","LBL_DAY_START_HOUR",1,"slds-size--1-of-4"],[3,"value","disabled",4,"ngFor","ngForOf"],["itemlabel","LBL_DAY_END_HOUR",1,"slds-size--1-of-4"],["itemlabel","LBL_DEFAULT_REMINDER_TIME",1,"slds-size--1-of-4"],["component","fieldActivityReminder",3,"system-model-provider","componentattributes","data$"],[3,"label"],[3,"value"],[3,"selected"],[3,"ngValue","selected"],["label","LBL_DAYS"],[3,"value","disabled"]],template:function(e,t){1&e&&(n.TgZ(0,"div",0)(1,"system-collapsable-tab",1)(2,"div",2)(3,"system-preferences-panel-item",3)(4,"system-preferences-panel-item-display",4),n._uU(5),n.qZA(),n.TgZ(6,"system-preferences-panel-item-edit")(7,"system-input-timezone",5),n.NdJ("ngModelChange",(function(e){return t.preferences.timezone=e})),n.qZA()()(),n.TgZ(8,"system-preferences-panel-item",6)(9,"system-preferences-panel-item-display",4),n.YNc(10,w,1,1,"system-label",7),n.qZA(),n.TgZ(11,"system-preferences-panel-item-edit")(12,"div",8)(13,"select",9),n.NdJ("ngModelChange",(function(e){return t.preferences.distance_unit_system=e}))("ngModelChange",(function(){return t.prefChanged()})),n.YNc(14,T,1,0,"option",10),n.TgZ(15,"option",11),n._UZ(16,"system-label",12),n.qZA(),n.TgZ(17,"option",13),n._UZ(18,"system-label",14),n.qZA()()()()(),n.TgZ(19,"system-preferences-panel-item",15)(20,"system-preferences-panel-item-display",4),n._uU(21),n.qZA(),n.TgZ(22,"system-preferences-panel-item-edit")(23,"div",8)(24,"select",9),n.NdJ("ngModelChange",(function(e){return t.preferences.datef=e}))("ngModelChange",(function(){return t.prefChanged(),t.setDisplay_dateFormat()})),n.YNc(25,C,1,0,"option",10),n.YNc(26,A,2,2,"option",16),n.qZA()()()(),n.TgZ(27,"system-preferences-panel-item",17)(28,"system-preferences-panel-item-display",4),n._uU(29),n.qZA(),n.TgZ(30,"system-preferences-panel-item-edit")(31,"div",8)(32,"select",9),n.NdJ("ngModelChange",(function(e){return t.preferences.timef=e}))("ngModelChange",(function(){return t.prefChanged(),t.setDisplay_timeFormat()})),n.YNc(33,k,1,0,"option",10),n.YNc(34,L,2,2,"option",16),n.qZA()()()()(),n.TgZ(35,"div",2)(36,"system-preferences-panel-item",18)(37,"system-preferences-panel-item-display",4)(38,"span",19),n.YNc(39,I,2,1,"ng-container",20),n.qZA()(),n.TgZ(40,"system-preferences-panel-item-edit")(41,"div",8)(42,"select",9),n.NdJ("ngModelChange",(function(e){return t.preferences.currency=e}))("ngModelChange",(function(){return t.prefChanged()})),n.YNc(43,M,1,0,"option",10),n.YNc(44,S,2,2,"option",16),n.qZA()()()(),n.TgZ(45,"system-preferences-panel-item",21)(46,"system-preferences-panel-item-display",4),n._uU(47),n.qZA(),n.TgZ(48,"system-preferences-panel-item-edit")(49,"div",8)(50,"select",9),n.NdJ("ngModelChange",(function(e){return t.preferences.currency_significant_digits=e}))("ngModelChange",(function(){return t.prefChanged()})),n.YNc(51,J,1,0,"option",10),n.YNc(52,O,2,2,"option",16),n.qZA()()()(),n.TgZ(53,"system-preferences-panel-item",22)(54,"system-preferences-panel-item-display",4),n._uU(55),n.qZA(),n.TgZ(56,"system-preferences-panel-item-edit")(57,"div",8)(58,"select",9),n.NdJ("ngModelChange",(function(e){return t.numberDelimitation=e})),n.YNc(59,N,1,1,"option",23),n.YNc(60,F,2,3,"option",24),n.qZA()()()()()(),n.TgZ(61,"system-collapsable-tab",25)(62,"div",2)(63,"system-preferences-panel-item",26)(64,"system-preferences-panel-item-display",4),n._uU(65),n.qZA(),n.TgZ(66,"system-preferences-panel-item-edit")(67,"div",8)(68,"select",9),n.NdJ("ngModelChange",(function(e){return t.preferences.export_delimiter=e}))("ngModelChange",(function(){return t.prefChanged()})),n.YNc(69,q,1,0,"option",10),n.YNc(70,E,2,2,"option",16),n.qZA()()()(),n.TgZ(71,"system-preferences-panel-item",27)(72,"system-preferences-panel-item-display",4),n._uU(73),n.qZA(),n.TgZ(74,"system-preferences-panel-item-edit")(75,"div",8)(76,"select",9),n.NdJ("ngModelChange",(function(e){return t.preferences.export_charset=e}))("ngModelChange",(function(){return t.prefChanged()})),n.YNc(77,Y,1,0,"option",10),n.YNc(78,D,2,2,"option",16),n.qZA()()()()()(),n.TgZ(79,"system-collapsable-tab",28)(80,"div",2)(81,"system-preferences-panel-item",29)(82,"system-preferences-panel-item-display",4),n._uU(83),n.qZA(),n.TgZ(84,"system-preferences-panel-item-edit")(85,"div",8)(86,"select",9),n.NdJ("ngModelChange",(function(e){return t.preferences.locale_name_format=e}))("ngModelChange",(function(){return t.prefChanged(),t.setDisplay_name()})),n.YNc(87,Q,1,0,"option",10),n.YNc(88,U,2,2,"option",16),n.qZA()()()(),n.TgZ(89,"system-preferences-panel-item",30)(90,"system-preferences-panel-item-display",4),n.YNc(91,R,1,0,"system-label",31),n.YNc(92,j,1,0,"system-label",32),n.qZA(),n.TgZ(93,"system-preferences-panel-item-edit")(94,"div",8)(95,"select",9),n.NdJ("ngModelChange",(function(e){return t.preferences.help_icon=e}))("ngModelChange",(function(){return t.prefChanged()})),n.YNc(96,B,1,0,"option",10),n.TgZ(97,"option",33),n._UZ(98,"system-label",34),n.qZA(),n.TgZ(99,"option",35),n._UZ(100,"system-label",36),n.qZA()()()()()()(),n.TgZ(101,"system-collapsable-tab",37)(102,"div",2)(103,"system-preferences-panel-item",38)(104,"system-preferences-panel-item-display",4),n._uU(105),n.qZA(),n.TgZ(106,"system-preferences-panel-item-edit")(107,"div",8)(108,"select",9),n.NdJ("ngModelChange",(function(e){return t.preferences.week_day_start=e}))("ngModelChange",(function(){return t.prefChanged()})),n.YNc(109,G,1,0,"option",10),n.YNc(110,P,2,2,"option",16),n.qZA()()()(),n.TgZ(111,"system-preferences-panel-item",39)(112,"system-preferences-panel-item-display",4),n._uU(113),n.qZA(),n.TgZ(114,"system-preferences-panel-item-edit")(115,"div",8)(116,"select",9),n.NdJ("ngModelChange",(function(e){return t.preferences.week_days_count=e}))("ngModelChange",(function(){return t.prefChanged()})),n.YNc(117,H,1,0,"option",10),n.YNc(118,z,3,2,"option",16),n.qZA()()()(),n.TgZ(119,"system-preferences-panel-item",40)(120,"system-preferences-panel-item-display",4),n._uU(121),n.qZA(),n.TgZ(122,"system-preferences-panel-item-edit")(123,"div",8)(124,"select",9),n.NdJ("ngModelChange",(function(e){return t.preferences.calendar_day_start_hour=e}))("ngModelChange",(function(){return t.prefChanged()})),n.YNc(125,V,1,0,"option",10),n.YNc(126,K,2,3,"option",41),n.qZA()()()(),n.TgZ(127,"system-preferences-panel-item",42)(128,"system-preferences-panel-item-display",4),n._uU(129),n.qZA(),n.TgZ(130,"system-preferences-panel-item-edit")(131,"div",8)(132,"select",9),n.NdJ("ngModelChange",(function(e){return t.preferences.calendar_day_end_hour=e}))("ngModelChange",(function(){return t.prefChanged()})),n.YNc(133,$,1,0,"option",10),n.YNc(134,X,2,3,"option",41),n.qZA()()()()(),n.TgZ(135,"div",2)(136,"system-preferences-panel-item",43)(137,"system-preferences-panel-item-display",4),n.YNc(138,W,1,1,"system-label",7),n.qZA(),n.TgZ(139,"system-preferences-panel-item-edit")(140,"system-dynamic-component",44),n.NdJ("data$",(function(e){return t.reminderTimeChanged(e)})),n.qZA()()()()()()),2&e&&(n.Q6J("system-overlay-loading-spinner",t.isLoading),n.xp6(1),n.Q6J("collapsible",!1),n.xp6(3),n.Q6J("global",t.prefValueIsGlobalFallback("timezone")),n.xp6(1),n.hij(" ",t.getPrefValue("timezone")," "),n.xp6(2),n.Q6J("ngModel",t.preferences.timezone)("denyEmpty",!t.isPersonalContext),n.xp6(2),n.Q6J("global",t.prefValueIsGlobalFallback("distance_unit_system")),n.xp6(1),n.Q6J("ngIf",!!t.getPrefValue("distance_unit_system")),n.xp6(3),n.Q6J("ngModel",t.preferences.distance_unit_system),n.xp6(1),n.Q6J("ngIf",t.isPersonalContext),n.xp6(6),n.Q6J("global",t.prefValueIsGlobalFallback("datef")),n.xp6(1),n.hij(" ",t.display_dateFormat," "),n.xp6(3),n.Q6J("ngModel",t.preferences.datef),n.xp6(1),n.Q6J("ngIf",t.isPersonalContext),n.xp6(1),n.Q6J("ngForOf",t.dateFormatList),n.xp6(2),n.Q6J("global",t.prefValueIsGlobalFallback("timef")),n.xp6(1),n.hij(" ",t.display_timeFormat," "),n.xp6(3),n.Q6J("ngModel",t.preferences.timef),n.xp6(1),n.Q6J("ngIf",t.isPersonalContext),n.xp6(1),n.Q6J("ngForOf",t.timeFormatList),n.xp6(3),n.Q6J("global",t.prefValueIsGlobalFallback("currency")),n.xp6(2),n.Q6J("ngForOf",t.currencyList),n.xp6(3),n.Q6J("ngModel",t.preferences.currency),n.xp6(1),n.Q6J("ngIf",t.isPersonalContext),n.xp6(1),n.Q6J("ngForOf",t.currencyList),n.xp6(2),n.Q6J("global",t.prefValueIsGlobalFallback("currency_significant_digits")),n.xp6(1),n.hij(" ",t.getPrefValue("currency_significant_digits")," "),n.xp6(3),n.Q6J("ngModel",t.preferences.currency_significant_digits),n.xp6(1),n.Q6J("ngIf",t.isPersonalContext),n.xp6(1),n.Q6J("ngForOf",t.currencySignificantDigitsList),n.xp6(2),n.Q6J("global",t.prefValueIsGlobalFallback("_numberDelimitation")),n.xp6(1),n.hij(" ",t.display_numberDelimitation," "),n.xp6(3),n.Q6J("ngModel",t.numberDelimitation),n.xp6(1),n.Q6J("ngIf",t.isPersonalContext),n.xp6(1),n.Q6J("ngForOf",t.numberDelimitationsList),n.xp6(1),n.Q6J("collapsible",!1),n.xp6(3),n.Q6J("global",t.prefValueIsGlobalFallback("export_delimiter")),n.xp6(1),n.hij(" ",t.getPrefValue("export_delimiter")," "),n.xp6(3),n.Q6J("ngModel",t.preferences.export_delimiter),n.xp6(1),n.Q6J("ngIf",t.isPersonalContext),n.xp6(1),n.Q6J("ngForOf",t.exportDelimiterList),n.xp6(2),n.Q6J("global",t.prefValueIsGlobalFallback("export_charset")),n.xp6(1),n.hij(" ",t.getPrefValue("export_charset")," "),n.xp6(3),n.Q6J("ngModel",t.preferences.export_charset),n.xp6(1),n.Q6J("ngIf",t.isPersonalContext),n.xp6(1),n.Q6J("ngForOf",t.charsetList),n.xp6(1),n.Q6J("collapsible",!1),n.xp6(3),n.Q6J("global",t.prefValueIsGlobalFallback("locale_name_format")),n.xp6(1),n.hij(" ",t.display_name," "),n.xp6(3),n.Q6J("ngModel",t.preferences.locale_name_format),n.xp6(1),n.Q6J("ngIf",t.isPersonalContext),n.xp6(1),n.Q6J("ngForOf",t.nameFormats),n.xp6(2),n.Q6J("global",t.prefValueIsGlobalFallback("help_icon")),n.xp6(1),n.Q6J("ngIf","visible"===t.getPrefValue("help_icon")),n.xp6(1),n.Q6J("ngIf","hidden"===t.getPrefValue("help_icon")),n.xp6(3),n.Q6J("ngModel",t.preferences.help_icon),n.xp6(1),n.Q6J("ngIf",t.isPersonalContext),n.xp6(5),n.Q6J("collapsible",!1),n.xp6(3),n.Q6J("global",t.prefValueIsGlobalFallback("week_day_start")),n.xp6(1),n.hij(" ",t.getPrefValue("week_day_start")," "),n.xp6(3),n.Q6J("ngModel",t.preferences.week_day_start),n.xp6(1),n.Q6J("ngIf",t.isPersonalContext),n.xp6(1),n.Q6J("ngForOf",t.weekDayStartList),n.xp6(2),n.Q6J("global",t.prefValueIsGlobalFallback("week_days_count")),n.xp6(1),n.hij(" ",t.getPrefValue("week_days_count")," "),n.xp6(3),n.Q6J("ngModel",t.preferences.week_days_count),n.xp6(1),n.Q6J("ngIf",t.isPersonalContext),n.xp6(1),n.Q6J("ngForOf",t.weekDaysCountList),n.xp6(2),n.Q6J("global",t.prefValueIsGlobalFallback("calendar_day_start_hour")),n.xp6(1),n.hij(" ",t.getPrefValue("calendar_day_start_hour")," "),n.xp6(3),n.Q6J("ngModel",t.preferences.calendar_day_start_hour),n.xp6(1),n.Q6J("ngIf",t.isPersonalContext),n.xp6(1),n.Q6J("ngForOf",t.dayHoursList),n.xp6(2),n.Q6J("global",t.prefValueIsGlobalFallback("calendar_day_end_hour")),n.xp6(1),n.hij(" ",t.getPrefValue("calendar_day_end_hour")," "),n.xp6(3),n.Q6J("ngModel",t.preferences.calendar_day_end_hour),n.xp6(1),n.Q6J("ngIf",t.isPersonalContext),n.xp6(1),n.Q6J("ngForOf",t.dayHoursList),n.xp6(3),n.Q6J("global",t.prefValueIsGlobalFallback("reminder_time")),n.xp6(1),n.Q6J("ngIf",t.display_reminderTime),n.xp6(2),n.Q6J("system-model-provider",n.VKq(84,te,n.VKq(82,ee,t.preferences.reminder_time)))("componentattributes",n.VKq(88,ie,n.VKq(86,se,t.isPersonalContext))))},dependencies:[h.u,m._,g.sg,g.O5,p.YN,p.Kr,p.EJ,p.JJ,p.On,f.z,b.T,v._,Z.R,_.w,y.f,x.z],encapsulation:2})),SystemPreferencesPanel})()},4211:(e,t,s)=>{"use strict";s.d(t,{w:()=>m});var i=s(1180),n=s(2242),o=s(2294),l=s(5329),a=s(4755),d=s(3463);function r(e,t){1&e&&n.Hsn(0,0,["*ngIf","!view.isEditMode()"])}function c(e,t){1&e&&n.Hsn(0,1,["*ngIf","view.isEditMode()"])}const u=[[["system-preferences-panel-item-display"]],[["system-preferences-panel-item-edit"]]],h=["system-preferences-panel-item-display","system-preferences-panel-item-edit"];let m=(()=>{var e;class SystemPreferencesPanelItem{constructor(e,t){(0,i.Z)(this,"view",void 0),(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"itemlabel",""),this.view=e,this.language=t}}return e=SystemPreferencesPanelItem,(0,i.Z)(SystemPreferencesPanelItem,"ɵfac",(function(t){return new(t||e)(n.Y36(o.e),n.Y36(l.d))})),(0,i.Z)(SystemPreferencesPanelItem,"ɵcmp",n.Xpm({type:e,selectors:[["system-preferences-panel-item"]],inputs:{itemlabel:"itemlabel"},ngContentSelectors:h,decls:5,vars:3,consts:[[1,"slds-form-element","slds-p-around--x-small"],[1,"slds-form-element__label"],[3,"label"],[4,"ngIf"]],template:function(e,t){1&e&&(n.F$t(u),n.TgZ(0,"div",0)(1,"label",1),n._UZ(2,"system-label",2),n.qZA(),n.YNc(3,r,1,0,"ng-content",3),n.YNc(4,c,1,0,"ng-content",3),n.qZA()),2&e&&(n.xp6(2),n.Q6J("label",t.itemlabel),n.xp6(1),n.Q6J("ngIf",!t.view.isEditMode()),n.xp6(1),n.Q6J("ngIf",t.view.isEditMode()))},dependencies:[a.O5,d._],encapsulation:2})),SystemPreferencesPanelItem})()},6268:(e,t,s)=>{"use strict";s.d(t,{f:()=>u});var i=s(1180),n=s(2242),o=s(2294),l=s(4755),a=s(2656),d=s(34);function r(e,t){1&e&&n._UZ(0,"system-custom-icon",5)}const c=["*"];let u=(()=>{var e;class SystemPreferencesPanelItemDisplay{constructor(e){(0,i.Z)(this,"view",void 0),(0,i.Z)(this,"global",!1),this.view=e}}return e=SystemPreferencesPanelItemDisplay,(0,i.Z)(SystemPreferencesPanelItemDisplay,"ɵfac",(function(t){return new(t||e)(n.Y36(o.e))})),(0,i.Z)(SystemPreferencesPanelItemDisplay,"ɵcmp",n.Xpm({type:e,selectors:[["system-preferences-panel-item-display"]],inputs:{global:"global"},ngContentSelectors:c,decls:6,vars:2,consts:[[1,"slds-form-element__control","slds-has-divider--bottom","slds-grid","slds-p-vertical--x-small",3,"dblclick"],[1,"slds-form-element__static","slds-grid"],["icon","global","size","x-small","class","slds-p-right--xx-small",4,"ngIf"],[1,"slds-button","slds-button--icon","slds-m-left--xx-small",2,"float","right",3,"click"],[3,"icon"],["icon","global","size","x-small",1,"slds-p-right--xx-small"]],template:function(e,t){1&e&&(n.F$t(),n.TgZ(0,"div",0),n.NdJ("dblclick",(function(){return t.view.setEditMode()})),n.TgZ(1,"span",1),n.YNc(2,r,1,0,"system-custom-icon",2),n.Hsn(3),n.qZA(),n.TgZ(4,"button",3),n.NdJ("click",(function(){return t.view.setEditMode()})),n._UZ(5,"system-button-icon",4),n.qZA()()),2&e&&(n.xp6(2),n.Q6J("ngIf",t.global),n.xp6(3),n.Q6J("icon","edit"))},dependencies:[l.O5,a.J,d.$],styles:[".slds-button--icon[_ngcontent-%COMP%]{color:#eee}.slds-button--icon[_ngcontent-%COMP%]:hover{color:#5b5b5b}"]})),SystemPreferencesPanelItemDisplay})()},4845:(e,t,s)=>{"use strict";s.d(t,{z:()=>l});var i=s(1180),n=s(2242);const o=["*"];let l=(()=>{var e;class SystemPreferencesPanelItemEdit{}return e=SystemPreferencesPanelItemEdit,(0,i.Z)(SystemPreferencesPanelItemEdit,"ɵfac",(function(t){return new(t||e)})),(0,i.Z)(SystemPreferencesPanelItemEdit,"ɵcmp",n.Xpm({type:e,selectors:[["system-preferences-panel-item-edit"]],ngContentSelectors:o,decls:2,vars:0,consts:[[1,"slds-form-element__control"]],template:function(e,t){1&e&&(n.F$t(),n.TgZ(0,"div",0),n.Hsn(1),n.qZA())},encapsulation:2})),SystemPreferencesPanelItemEdit})()},8026:(e,t,s)=>{"use strict";s.d(t,{J:()=>u});var i=s(1180),n=s(2242),o=s(5329),l=s(2422),a=s(4755);function d(e,t){if(1&e&&(n.TgZ(0,"div",3)(1,"span",4),n.Hsn(2),n.qZA(),n.TgZ(3,"strong",5),n._uU(4),n.qZA()()),2&e){const e=n.oxw();n.xp6(4),n.AsE("",e.progressText," ",e.lang.getLabel("LBL_COMPLETED"),"")}}const r=function(e,t){return{"width.%":e,background:t}},c=["*"];let u=(()=>{var e;class SystemProgressBar{constructor(e,t){(0,i.Z)(this,"lang",void 0),(0,i.Z)(this,"userprefs",void 0),(0,i.Z)(this,"hideText",!1),(0,i.Z)(this,"color",void 0),(0,i.Z)(this,"progress",0),(0,i.Z)(this,"decimals",2),(0,i.Z)(this,"size","medium"),(0,i.Z)(this,"total",null),this.lang=e,this.userprefs=t}get displayPercents(){return null===this.total}get _progress(){return void 0===this.progress?0:this.progress}get _total(){return void 0===this.total?0:this.total}get progressText(){let e;return e=this.displayPercents?this._progress.toFixed(this.decimals)+" %":this._progress.toFixed(this.decimals)+"/"+this._total.toFixed(this.decimals),e.split(".").join(this.userprefs.toUse.dec_sep)}get progressWidth(){return this.displayPercents?this._progress>100?100:this._progress:(this._progress>this._total?this._total:this._progress)/this._total*100}get sizeClass(){return"slds-progress-bar_"+this.size}}return e=SystemProgressBar,(0,i.Z)(SystemProgressBar,"ɵfac",(function(t){return new(t||e)(n.Y36(o.d),n.Y36(l.z))})),(0,i.Z)(SystemProgressBar,"ɵcmp",n.Xpm({type:e,selectors:[["system-progress-bar"]],hostAttrs:[2,"display","block"],inputs:{hideText:"hideText",color:"color",progress:"progress",decimals:"decimals",size:"size",total:"total"},ngContentSelectors:c,decls:4,vars:6,consts:[["class","slds-grid slds-grid_align-spread slds-p-bottom_x-small",4,"ngIf"],[1,"slds-progress-bar","slds-progress-bar_circular",3,"ngClass"],[1,"slds-progress-bar__value",3,"ngStyle"],[1,"slds-grid","slds-grid_align-spread","slds-p-bottom_x-small"],[1,"slds-m-left--xx-small"],[1,"slds-m-right--x-small"]],template:function(e,t){1&e&&(n.F$t(),n.TgZ(0,"div"),n.YNc(1,d,5,2,"div",0),n.TgZ(2,"div",1),n._UZ(3,"span",2),n.qZA()()),2&e&&(n.xp6(1),n.Q6J("ngIf",!t.hideText),n.xp6(1),n.Q6J("ngClass",t.sizeClass),n.xp6(1),n.Q6J("ngStyle",n.WLB(3,r,t.progressWidth,t.color)))},dependencies:[a.mk,a.O5,a.PC],encapsulation:2})),SystemProgressBar})()},5718:(e,t,s)=>{"use strict";s.d(t,{s:()=>u});var i=s(1180),n=s(2242),o=s(4755),l=s(2656);function a(e,t){1&e&&n._UZ(0,"system-button-icon",8),2&e&&n.Q6J("icon","success")}const d=function(e){return{"slds-button--icon slds-progress__marker--icon":e}};function r(e,t){if(1&e&&(n.TgZ(0,"li",5)(1,"button",6),n.YNc(2,a,1,1,"system-button-icon",7),n.qZA()()),2&e){const e=t.$implicit,s=n.oxw();n.Q6J("ngClass",s.getStepClass(e)),n.xp6(1),n.Q6J("ngClass",n.VKq(3,d,s.getStepComplete(e))),n.xp6(1),n.Q6J("ngIf",s.getStepComplete(e))}}const c=function(e){return{"slds-progress--shade":e}};let u=(()=>{var e;class SystemProgressList{set shade(e){this._shade=!1!==e}constructor(){(0,i.Z)(this,"step",0),(0,i.Z)(this,"steps",[]),(0,i.Z)(this,"_shade",!1)}getStepClass(e){let t=this.steps.indexOf(e);return t==this.step?"slds-is-active":t<this.step?"slds-is-completed":void 0}getStepComplete(e){return this.steps.indexOf(e)<this.step}get progressBarWidth(){return{width:this.step/(this.steps.length-1)*100+"%"}}}return e=SystemProgressList,(0,i.Z)(SystemProgressList,"ɵfac",(function(t){return new(t||e)})),(0,i.Z)(SystemProgressList,"ɵcmp",n.Xpm({type:e,selectors:[["system-progress-list"]],inputs:{step:"step",steps:"steps",shade:["system-progress-list-shade","shade"]},decls:5,vars:5,consts:[[1,"slds-progress",3,"ngClass"],[1,"slds-progress__list"],["class","slds-progress__item",3,"ngClass",4,"ngFor","ngForOf"],["role","progressbar",1,"slds-progress-bar","slds-progress-bar_x-small"],[1,"slds-progress-bar__value",3,"ngStyle"],[1,"slds-progress__item",3,"ngClass"],[1,"slds-button","slds-progress__marker",3,"ngClass"],[3,"icon",4,"ngIf"],[3,"icon"]],template:function(e,t){1&e&&(n.TgZ(0,"div",0)(1,"ol",1),n.YNc(2,r,3,5,"li",2),n.qZA(),n.TgZ(3,"div",3),n._UZ(4,"div",4),n.qZA()()),2&e&&(n.Q6J("ngClass",n.VKq(3,c,t._shade)),n.xp6(2),n.Q6J("ngForOf",t.steps),n.xp6(2),n.Q6J("ngStyle",t.progressBarWidth))},dependencies:[o.mk,o.sg,o.O5,o.PC,l.J],encapsulation:2})),SystemProgressList})()},1574:(e,t,s)=>{"use strict";s.d(t,{z:()=>E});var i=s(1180),n=s(2242),o=s(5030),l=s(4755),a=s(4817),d=s(5698),r=s(5179),c=s(4044),u=s(2067),h=s(4154),m=s(5329),g=s(6550),p=s(6625),f=s(5710),b=s(3441),v=s(2656),Z=s(121);const _=["ckEditor"];function y(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"ul",9)(1,"li")(2,"button",30),n.NdJ("click",(function(){n.CHM(e);const t=n.oxw(2);return n.KtG(t.executeCommand("undo"))})),n._UZ(3,"system-button-icon",31),n.TgZ(4,"span",32),n._uU(5,"undo"),n.qZA()()(),n.TgZ(6,"li")(7,"button",25),n.NdJ("click",(function(){n.CHM(e);const t=n.oxw(2);return n.KtG(t.executeCommand("redo"))})),n._UZ(8,"system-button-icon",33),n.TgZ(9,"span",32),n._uU(10,"redo"),n.qZA()()()()}if(2&e){const e=n.oxw(2);n.xp6(2),n.Q6J("title",e.language.getLabel("LBL_UNDO")),n.xp6(5),n.Q6J("title",e.language.getLabel("LBL_REDO"))}}function x(e,t){if(1&e&&(n.TgZ(0,"option",47),n._uU(1),n.qZA()),2&e){const e=t.$implicit;n.s9C("value",e.id),n.xp6(1),n.Oqu(e.display)}}function w(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"div",34)(1,"div",35)(2,"div",36)(3,"div",37)(4,"div",38)(5,"select",39),n.NdJ("ngModelChange",(function(t){n.CHM(e);const s=n.oxw(2);return n.KtG(s.block=t)}))("change",(function(){n.CHM(e);const t=n.oxw(2);return n.KtG(t.heading(t.block))})),n.TgZ(6,"option",40),n._uU(7,"Heading 2"),n.qZA(),n.TgZ(8,"option",41),n._uU(9,"Heading 3"),n.qZA(),n.TgZ(10,"option",42),n._uU(11,"Heading 4"),n.qZA(),n.TgZ(12,"option",43),n._uU(13,"Paragraph"),n.qZA()()()()()(),n.TgZ(14,"div",35)(15,"div",36)(16,"div",37)(17,"div",38)(18,"select",44),n.NdJ("change",(function(t){n.CHM(e);const s=n.oxw(2);return n.KtG(s.customStyle(t.target.value))})),n.TgZ(19,"option",45),n._uU(20,"—"),n.qZA(),n.YNc(21,x,2,2,"option",46),n.qZA()()()()()()}if(2&e){const e=n.oxw(2);n.xp6(5),n.Q6J("ngModel",e.block),n.xp6(16),n.Q6J("ngForOf",e.customStyleDefinitions)}}const T=function(e){return{selected:e}};function C(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"li",62)(1,"span",63),n.NdJ("click",(function(){const t=n.CHM(e).$implicit,s=n.oxw().$implicit,i=n.oxw(3);return n.KtG(i.selectTable(s,t))})),n._UZ(2,"span",64),n.qZA()()}if(2&e){const e=t.$implicit,s=n.oxw().$implicit,i=n.oxw(3);n.xp6(1),n.Q6J("ngClass",n.VKq(1,T,s<=i.selectedRow&&e<=i.selectedColumn))}}const A=function(){return[1,2,3,4,5,6,7,8,9,10]};function k(e,t){1&e&&(n.TgZ(0,"li")(1,"ul",60),n.YNc(2,C,3,3,"li",61),n.qZA()()),2&e&&(n.xp6(2),n.Q6J("ngForOf",n.DdM(1,A)))}function L(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"div")(1,"section",48)(2,"div",49)(3,"div",50)(4,"div",51)(5,"div",52),n._uU(6),n.qZA(),n.TgZ(7,"div",53)(8,"ul"),n.YNc(9,k,3,2,"li",54),n.qZA()(),n._UZ(10,"div",55),n.qZA()()(),n.TgZ(11,"footer",56)(12,"div",57)(13,"button",58),n.NdJ("click",(function(){n.CHM(e);const t=n.oxw(2);return n.KtG(t.cancelTable())})),n._uU(14,"Cancel"),n.qZA(),n.TgZ(15,"button",59),n.NdJ("click",(function(){n.CHM(e);const t=n.oxw(2);return n.KtG(t.insertTable())})),n._uU(16,"Done"),n.qZA()()()()()}if(2&e){const e=n.oxw(2);n.xp6(6),n.AsE("",e.selectedRow," × ",e.selectedColumn,""),n.xp6(3),n.Q6J("ngForOf",n.DdM(3,A))}}function I(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"li")(1,"button",25),n.NdJ("click",(function(){n.CHM(e);const t=n.oxw(3);return n.KtG(t.openMediaFilePicker())})),n._UZ(2,"system-button-icon",69),n.qZA()()}if(2&e){const e=n.oxw(3);n.xp6(1),n.Q6J("title",e.language.getLabel("LBL_NEW_IMAGE"))}}function M(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"ul",9)(1,"li")(2,"button",25),n.NdJ("click",(function(){n.CHM(e);const t=n.oxw(2);return n.KtG(t.insertImage())})),n._UZ(3,"system-button-icon",65),n.qZA()(),n.YNc(4,I,3,1,"li",18),n.TgZ(5,"li")(6,"button",66),n.NdJ("click",(function(){n.CHM(e);const t=n.oxw(2);return n.KtG(t.addVideo())})),n._UZ(7,"system-button-icon",67),n.qZA()(),n.TgZ(8,"li")(9,"button",25),n.NdJ("click",(function(){n.CHM(e);const t=n.oxw(2);return n.KtG(t.addCodeSnippet())})),n._UZ(10,"system-button-icon",68),n.qZA()()()}if(2&e){const e=n.oxw(2);n.xp6(2),n.Q6J("title",e.language.getLabel("LBL_NEW_IMAGE")),n.xp6(2),n.Q6J("ngIf",e.useMedialFile),n.xp6(2),n.Q6J("title",e.language.getLabel("LBL_ADD_VIDEO")),n.xp6(3),n.Q6J("title",e.language.getLabel("LBL_ADD_CODE_SNIPPET"))}}function S(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"ul",9)(1,"li")(2,"button",66),n.NdJ("click",(function(){n.CHM(e);const t=n.oxw(2);return n.KtG(t.openTemplateVariableHelper())})),n._UZ(3,"system-button-icon",70),n.qZA()()()}if(2&e){const e=n.oxw(2);n.xp6(2),n.Q6J("title",e.language.getLabel("LBL_TEMPLATE_VARIABLE_HELPER"))}}function J(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"ul",9)(1,"li")(2,"button",25),n.NdJ("click",(function(){n.CHM(e);const t=n.oxw(2);return n.KtG(t.toggleFullscreen())})),n._UZ(3,"system-button-icon",71),n.qZA()()()}if(2&e){const e=n.oxw(2);n.xp6(2),n.Q6J("title",e.language.getLabel("LBL_EXPAND")),n.xp6(1),n.Q6J("icon",e.expandIcon)}}const O=function(e){return{"slds-active":e}};function N(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"div",6),n.YNc(1,y,11,2,"ul",7),n.YNc(2,w,22,2,"div",8),n.TgZ(3,"ul",9)(4,"li")(5,"button",10),n.NdJ("click",(function(){n.CHM(e);const t=n.oxw();return n.KtG(t.executeCommand("bold"))})),n._UZ(6,"system-button-icon",11),n.qZA()(),n.TgZ(7,"li")(8,"button",10),n.NdJ("click",(function(){n.CHM(e);const t=n.oxw();return n.KtG(t.executeCommand("italic"))})),n._UZ(9,"system-button-icon",12),n.qZA()(),n.TgZ(10,"li")(11,"button",10),n.NdJ("click",(function(){n.CHM(e);const t=n.oxw();return n.KtG(t.executeCommand("underline"))})),n._UZ(12,"system-button-icon",13),n.qZA()(),n.TgZ(13,"li")(14,"button",10),n.NdJ("click",(function(){n.CHM(e);const t=n.oxw();return n.KtG(t.executeCommand("strikethrough"))})),n._UZ(15,"system-button-icon",14),n.qZA()()(),n.TgZ(16,"ul",9)(17,"li")(18,"button",10),n.NdJ("click",(function(){n.CHM(e);const t=n.oxw();return n.KtG(t.executeCommand("bulletedList"))})),n._UZ(19,"system-button-icon",15),n.qZA()(),n.TgZ(20,"li")(21,"button",10),n.NdJ("click",(function(){n.CHM(e);const t=n.oxw();return n.KtG(t.executeCommand("numberedList"))})),n._UZ(22,"system-button-icon",16),n.qZA()(),n.TgZ(23,"li")(24,"button",10),n.NdJ("click",(function(){n.CHM(e);const t=n.oxw();return n.KtG(t.openTable())})),n._UZ(25,"system-button-icon",17),n.qZA(),n.YNc(26,L,17,4,"div",18),n.qZA()(),n.TgZ(27,"ul",9)(28,"li")(29,"button",10),n.NdJ("click",(function(){n.CHM(e);const t=n.oxw();return n.KtG(t.executeCommand("indent"))})),n._UZ(30,"system-button-icon",19),n.qZA()(),n.TgZ(31,"li")(32,"button",10),n.NdJ("click",(function(){n.CHM(e);const t=n.oxw();return n.KtG(t.executeCommand("outdent"))})),n._UZ(33,"system-button-icon",20),n.qZA()()(),n.TgZ(34,"ul",9)(35,"li")(36,"button",10),n.NdJ("click",(function(){n.CHM(e);const t=n.oxw();return n.KtG(t.alignment("left"))})),n._UZ(37,"system-button-icon",21),n.qZA()(),n.TgZ(38,"li")(39,"button",10),n.NdJ("click",(function(){n.CHM(e);const t=n.oxw();return n.KtG(t.alignment("center"))})),n._UZ(40,"system-button-icon",22),n.qZA()(),n.TgZ(41,"li")(42,"button",10),n.NdJ("click",(function(){n.CHM(e);const t=n.oxw();return n.KtG(t.alignment("right"))})),n._UZ(43,"system-button-icon",23),n.qZA()(),n.TgZ(44,"li")(45,"button",10),n.NdJ("click",(function(){n.CHM(e);const t=n.oxw();return n.KtG(t.alignment("justify"))})),n._UZ(46,"system-button-icon",24),n.qZA()()(),n.TgZ(47,"ul",9)(48,"li")(49,"button",25),n.NdJ("click",(function(){n.CHM(e);const t=n.oxw();return n.KtG(t.insertLink())})),n._UZ(50,"system-button-icon",26),n.qZA()(),n.TgZ(51,"li")(52,"button",25),n.NdJ("click",(function(){n.CHM(e);const t=n.oxw();return n.KtG(t.executeCommand("unlink"))})),n._UZ(53,"system-button-icon",27),n.qZA()()(),n.YNc(54,M,11,4,"ul",7),n.YNc(55,S,4,1,"ul",7),n.TgZ(56,"ul",9)(57,"li")(58,"button",25),n.NdJ("click",(function(){n.CHM(e);const t=n.oxw();return n.KtG(t.executeCommand("removeFormat"))})),n._UZ(59,"system-button-icon",28),n.qZA()()(),n.YNc(60,J,4,2,"ul",7),n.TgZ(61,"ul",29),n.Hsn(62),n.qZA()()}if(2&e){const e=n.oxw();n.xp6(1),n.Q6J("ngIf",e.extendedmode),n.xp6(1),n.Q6J("ngIf",e.extendedmode),n.xp6(3),n.Q6J("title",e.language.getLabel("LBL_BOLD"))("ngClass",n.VKq(35,O,e.commandIsActive("bold"))),n.xp6(3),n.Q6J("title",e.language.getLabel("LBL_ITALIC"))("ngClass",n.VKq(37,O,e.commandIsActive("italic"))),n.xp6(3),n.Q6J("title",e.language.getLabel("LBL_UNDERLINE"))("ngClass",n.VKq(39,O,e.commandIsActive("underline"))),n.xp6(3),n.Q6J("title",e.language.getLabel("LBL_STRIKETHROUGH"))("ngClass",n.VKq(41,O,e.commandIsActive("strikethrough"))),n.xp6(4),n.Q6J("title",e.language.getLabel("LBL_BULLETED_LIST"))("ngClass",n.VKq(43,O,e.commandIsActive("bulletedList"))),n.xp6(3),n.Q6J("title",e.language.getLabel("LBL_NUMBERED_LIST"))("ngClass",n.VKq(45,O,e.commandIsActive("numberedList"))),n.xp6(3),n.Q6J("title",e.language.getLabel("LBL_TABLE"))("ngClass",n.VKq(47,O,e.commandIsActive("insertTable"))),n.xp6(2),n.Q6J("ngIf",e.isShow),n.xp6(3),n.Q6J("title",e.language.getLabel("LBL_TEXT_INDENT"))("ngClass",n.VKq(49,O,e.commandIsActive("indentBlock"))),n.xp6(3),n.Q6J("title",e.language.getLabel("LBL_TEXT_OUTDENT"))("ngClass",n.VKq(51,O,e.commandIsActive("outdentBlock"))),n.xp6(4),n.Q6J("title",e.language.getLabel("LBL_LEFT_ALIGN"))("ngClass",n.VKq(53,O,e.commandIsActive("justifyLeft"))),n.xp6(3),n.Q6J("title",e.language.getLabel("LBL_CENTER_ALIGN"))("ngClass",n.VKq(55,O,e.commandIsActive("justifyCenter"))),n.xp6(3),n.Q6J("title",e.language.getLabel("LBL_RIGHT_ALIGN"))("ngClass",n.VKq(57,O,e.commandIsActive("justifyRight"))),n.xp6(3),n.Q6J("title",e.language.getLabel("LBL_ALIGN_TEXT"))("ngClass",n.VKq(59,O,e.commandIsActive("justifyFull"))),n.xp6(4),n.Q6J("title",e.language.getLabel("LBL_LINK")),n.xp6(3),n.Q6J("title",e.language.getLabel("LBL_REMOVE_LINK")),n.xp6(2),n.Q6J("ngIf",e.extendedmode),n.xp6(1),n.Q6J("ngIf",e.useTemplateVariableHelper),n.xp6(3),n.Q6J("title",e.language.getLabel("LBL_REMOVE_FORMATTING")),n.xp6(2),n.Q6J("ngIf",e.extendedmode)}}function F(e,t){if(1&e&&n._UZ(0,"link",72),2&e){const e=n.oxw();n.Q6J("href",e.cssContent,n.uOi)}}const q=["*"];let E=(()=>{var e;class SystemRichTextEditor{get useTemplateVariableHelper(){return this.model?.module in{OutputTemplates:!0,EmailTemplates:!0,CampaignTasks:!0,LandingPages:!0}}constructor(e,t,s,o,l,a,d,r,c,u,h,m,g,p){(0,i.Z)(this,"modal",void 0),(0,i.Z)(this,"renderer",void 0),(0,i.Z)(this,"libLoader",void 0),(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"editorService",void 0),(0,i.Z)(this,"_document",void 0),(0,i.Z)(this,"elementRef",void 0),(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"zone",void 0),(0,i.Z)(this,"sanitizer",void 0),(0,i.Z)(this,"viewContainerRef",void 0),(0,i.Z)(this,"configurationService",void 0),(0,i.Z)(this,"model",void 0),(0,i.Z)(this,"helper",void 0),(0,i.Z)(this,"ckEditor",void 0),(0,i.Z)(this,"extendedmode",!0),(0,i.Z)(this,"readOnly",!1),(0,i.Z)(this,"innerheight",void 0),(0,i.Z)(this,"useMedialFile",!1),(0,i.Z)(this,"stylesheetId",void 0),(0,i.Z)(this,"onChange",void 0),(0,i.Z)(this,"onTouched",void 0),(0,i.Z)(this,"_html",""),(0,i.Z)(this,"isActive",!1),(0,i.Z)(this,"isShow",!1),(0,i.Z)(this,"clickListener",void 0),(0,i.Z)(this,"keydownListener",void 0),(0,i.Z)(this,"modalOpen",!1),(0,i.Z)(this,"isExpanded",!1),(0,i.Z)(this,"selectedColumn",void 0),(0,i.Z)(this,"selectedRow",void 0),(0,i.Z)(this,"block","default"),(0,i.Z)(this,"fontName","Tilium Web"),(0,i.Z)(this,"fontSize","5"),(0,i.Z)(this,"tagMap",{BLOCKQUOTE:"indent",A:"link"}),(0,i.Z)(this,"save$",new n.vpe),(0,i.Z)(this,"select",["H1","H2","H3","H4","H5","H6","P","PRE","DIV"]),(0,i.Z)(this,"editor",void 0),(0,i.Z)(this,"customStyleDefinitions",[]),(0,i.Z)(this,"cssContent",void 0),this.modal=e,this.renderer=t,this.libLoader=s,this.metadata=o,this.editorService=l,this._document=a,this.elementRef=d,this.language=r,this.zone=c,this.sanitizer=u,this.viewContainerRef=h,this.configurationService=m,this.model=g,this.helper=p}get expandIcon(){return this.isExpanded?"contract_alt":"expand_alt"}get innerHeight(){return this.innerheight?this.innerheight:"250"}get richTextStyle(){return this.isExpanded?{height:"100vh",resize:"none",position:"fixed"}:{height:+this.innerHeight+(this.readOnly?0:50)+"px"}}ngOnInit(){this.loadCustomStyleDefinitions(),this.libLoader.loadLib("ckeditor").subscribe((e=>{this.zone.runOutsideAngular((()=>{ClassicEditor.create(this.ckEditor.element.nativeElement,{removePlugins:["Markdown","Title"],style:{definitions:this.customStyleDefinitions.map((e=>({name:e.id,element:e.element,classes:e.classes})))},image:{styles:["alignCenter","alignLeft","alignRight"],resizeOptions:[{name:"resizeImage:original",label:"Original size",value:null},{name:"resizeImage:50",label:"50%",value:"50"},{name:"resizeImage:75",label:"75%",value:"75"}],toolbar:["imageTextAlternative","|","imageStyle:inline","imageStyle:wrapText","imageStyle:breakText","imageStyle:side","|","resizeImage"]},toolbar:[],htmlSupport:{allow:this.generateHtmlTagsAllowAttributes(["div","img","span","table","p","h1","h2","h3","h4","input","fieldset","button","label","textarea","select","option","optgroup"])},autosave:{save:e=>this.onChange(e.getData())}}).then((e=>{this.editor=e,this.readOnly&&this.editor.enableReadOnlyMode("efsjeflksjefloikjse"),this.editor.editing.view.change((e=>{e.setStyle("height","100%",this.editor.editing.view.document.getRoot())})),this.editor.setData(this._html)}))}))})),this.handleKeyboardShortcuts()}loadCustomStyleDefinitions(){this.stylesheetId&&this.metadata.getHtmlFormats(this.stylesheetId).forEach((e=>{this.customStyleDefinitions.push({display:e.name,id:e.id,classes:e.classes?e.classes.trim().split(/\s+/):[],element:e.block?e.block:e.inline?e.inline:""})}))}generateHtmlTagsAllowAttributes(e){return e.map((e=>({name:e,attributes:{"data-trackinglink":!0,"data-marketingaction":!0,"data-spicefor":!0,"data-spiceif":!0,"data-spicefor-first":!0,"data-spicefor-last":!0,"data-spicetemplate":!0,"data-signature":!0,"data-spice-reply-quote":!0,"data-spice-temp-quote":!0,class:!0,style:!0,value:!0,type:!0,id:!0,name:!0,for:!0,checked:!0,selected:!0,size:!0,autocomplete:!0,autofocus:!0,placeholder:!0,max:!0,maxlength:!0,min:!0,minlength:!0,multiple:!0,required:!0,disabled:!0,form:!0,step:!0,readonly:!0,cols:!0,rows:!0,wrap:!0,label:!0,width:!0,height:!0}})))}ngOnDestroy(){this.clickListener&&this.clickListener(),this.keydownListener&&this.keydownListener()}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}writeValue(e){this._html=e||"",this.editor&&this.editor.setData(e)}executeCommand(e){this.isActive&&e&&this.editor.execute(e)}toggleFullscreen(){this.isExpanded=!this.isExpanded}heading(e){this.editor.execute("heading",{value:e})}customStyle(e){e&&this.editor.execute("style",e)}openTable(){this.isShow=!this.isShow,this.selectedColumn=this.selectedRow=0}selectTable(e,t){this.selectedColumn=t,this.selectedRow=e}insertTable(){this.editor.execute("insertTable",{rows:this.selectedRow,columns:this.selectedColumn}),this.isShow=!1}cancelTable(){this.isShow=!1}alignment(e){this.editor.execute("alignment",{value:e})}onEditorClick(e){this.isActive||(this.isActive=!0,this.clickListener=this.renderer.listen("document","click",(e=>this.onDocumentClick(e)))),e.stopPropagation()}onDocumentClick(e){this.modalOpen||this.elementRef.nativeElement.contains(e.target)||(this.isActive=!1,this.clickListener())}exec(){let e;window.getSelection&&(e=window.getSelection());let t=e.focusNode;const s=[];for(;t&&"editor"!==t.id;)s.unshift(t),t=t.parentNode;this.triggerBlocks(s)}insertImage(){this.modal.input(this.language.getLabel("LBL_IMAGE_LINK",this.language.getLabel("LBL_IMAGE"))).subscribe((e=>{e&&this.editor.execute("imageInsert",{source:[{src:e}]})}))}openMediaFilePicker(){this.modalOpen=!0,this.modal.openModal("MediaFilePicker").subscribe((e=>{e.instance.answer.subscribe((e=>{if(!e)return;const t=this.configurationService.getCapabilityConfig("mediafiles");e.upload?this.modal.openModal("MediaFileUploader").subscribe((e=>{e.instance.answer.subscribe((e=>{e&&this.editor.execute("imageInsert",{source:[{src:t.public_url+e}]}),this.modalOpen=!1}))})):(e.id&&this.editor.execute("imageInsert",{source:[{src:t.public_url+e.id}]}),this.modalOpen=!1)}))}))}openSourceEditor(){this.modal.openModal("SystemRichTextSourceModal",!0,this.viewContainerRef.injector).pipe((0,d.q)(1)).subscribe((e=>{e.instance._html=this.editor.getData(),e.instance.html.subscribe((e=>{this._html=e,this.editor.setData(e),"function"==typeof this.onChange&&this.onChange(e)}))}))}commandIsActive(e){return this.isActive&&this._document.queryCommandState(e)}triggerBlocks(e){if(!this.isActive)return;let t=!1;this.select.forEach((s=>{const i=e.find((e=>e.nodeName===s));void 0===i||s!==i.nodeName&&"code"!=i.nodeName?!1===t&&(this.block="default"):!1===t&&(this.block=i.nodeName.toLowerCase(),t=!0)})),t=!1}insertLink(){this.modal.input("","LBL_ADD_LINK").subscribe((e=>{e&&this.editor.execute("link",e)}))}addVideo(){this.isActive&&this.modal.input("","LBL_ADD_VIDEO").subscribe((e=>{e&&this.editor.execute("mediaEmbed",e)}))}getSelectedText(){return window.getSelection?window.getSelection().toString():this._document.selection&&"Control"!=this._document.selection.type?this._document.selection.createRange().text:void 0}insertColor(e,t){this.editorService.insertColor(e,t)}setFontName(e){this.editorService.setFontName(e)}setFontSize(e){this.editorService.setFontSize(e)}onFileChanged(e){}setCustomClass(e){}encodeHtml(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}addCodeSnippet(){if(!this.isActive)return;this.modal.prompt("input","","LBL_SELECT_LANGUAGE","shade",void 0,[{value:"plaintext",display:"Plain text"},{value:"c",display:"C"},{value:"cs",display:"C#"},{value:"cpp",display:"C++"},{value:"css",display:"CSS"},{value:"diff",display:"Diff"},{value:"html",display:"HTML"},{value:"java",display:"Java"},{value:"javascript",display:"JavaScript"},{value:"php",display:"PHP"},{value:"python",display:"Python"},{value:"ruby",display:"Ruby"},{value:"typescript",display:"TypeScript"},{value:"xml",display:"XML"}],!0).subscribe((e=>{e&&this.editor.execute("codeBlock",{language:e,forceValue:!0})}))}handleKeyboardShortcuts(){this.keydownListener=this.renderer.listen("document","keydown",(e=>{(window.navigator.platform.match("Mac")?e.metaKey:e.ctrlKey)&&"s"==e.key.toLowerCase()&&(e.preventDefault(),this.save$.emit(this._html))}))}openTemplateVariableHelper(){this.isActive&&(this.modalOpen=!0,this.modal.openModal("OutputTemplatesVariableHelper",null,this.viewContainerRef.injector).subscribe((e=>{e.instance.response.pipe((0,d.q)(1)).subscribe((e=>{this.modalOpen=!1,this.editor.model.change((t=>{this.editor.model.insertContent(t.createText(`{${e}}`))}))}))})))}getHtmlFromSelection(){let e,t=window.getSelection();t.getRangeAt?e=t.getRangeAt(0):(e=document.createRange(),e.setStart(t.anchorNode,t.anchorOffset),e.setEnd(t.focusNode,t.focusOffset));let s=e.cloneContents(),i=document.createElement("div");return i.appendChild(s),i.innerHTML}save(){this.save$.emit(this.editor.getData())}set css(e){e&&r.render(`.slds-rich-text-editor__textarea {${e}}`).then((e=>this.cssContent=this.sanitizer.bypassSecurityTrustResourceUrl("data:text/css;base64,"+btoa(e.css))))}}return e=SystemRichTextEditor,(0,i.Z)(SystemRichTextEditor,"ɵfac",(function(t){return new(t||e)(n.Y36(c.o),n.Y36(n.Qsj),n.Y36(u.$),n.Y36(h.Pu),n.Y36(a.L),n.Y36(l.K0),n.Y36(n.SBq),n.Y36(m.d),n.Y36(n.R0b),n.Y36(g.H7),n.Y36(n.s_b),n.Y36(p.C),n.Y36(f.o,8),n.Y36(b._))})),(0,i.Z)(SystemRichTextEditor,"ɵcmp",n.Xpm({type:e,selectors:[["system-richtext-editor"]],viewQuery:function(e,t){if(1&e&&n.Gf(_,7,n.s_b),2&e){let e;n.iGM(e=n.CRH())&&(t.ckEditor=e.first)}},inputs:{extendedmode:"extendedmode",readOnly:"readOnly",innerheight:"innerheight",useMedialFile:"useMedialFile",stylesheetId:"stylesheetId",css:"css"},outputs:{save$:"save$"},features:[n._Bn([{provide:o.JU,useExisting:(0,n.Gpc)((()=>e)),multi:!0},a.L])],ngContentSelectors:q,decls:8,vars:3,consts:[[1,"slds-rich-text-editor","slds-grid","slds-grid_vertical","slds-nowrap","slds-grid","slds-grid--vertical","slds-theme--default",2,"top","0","right","0","left","0","bottom","0","z-index","9999",3,"ngStyle","click"],["role","toolbar","style","top: 0; z-index: 2; position: sticky","class","slds-rich-text-editor__toolbar slds-shrink-none",4,"ngIf"],[1,"slds-grid","slds-grow",2,"min-height","0"],[1,"slds-text-color_weak","slds-grow","slds-height_full","spice-richtext-editor","slds-rich-text-editor__textarea"],["rel","stylesheet","type","text/css",3,"href",4,"ngIf"],["ckEditor",""],["role","toolbar",1,"slds-rich-text-editor__toolbar","slds-shrink-none",2,"top","0","z-index","2","position","sticky"],["class","slds-button-group-list",4,"ngIf"],["class","slds-grid slds-rich-text-editor__spacing-wrapper","role","group",4,"ngIf"],[1,"slds-button-group-list"],["aria-pressed","true","tabindex","-1",1,"slds-button","slds-button_icon","slds-button_icon-border-filled",3,"title","ngClass","click"],["icon","bold"],["icon","italic"],["icon","underline"],["icon","strikethrough"],["icon","richtextbulletedlist"],["icon","richtextnumberedlist"],["icon","table"],[4,"ngIf"],["icon","richtextindent"],["icon","richtextoutdent"],["icon","left_align_text"],["icon","center_align_text"],["icon","right_align_text"],["icon","justify_text"],["aria-pressed","true","tabindex","-1",1,"slds-button","slds-button_icon","slds-button_icon-border-filled",3,"title","click"],["icon","link"],["icon","remove_link"],["icon","remove_formatting"],[1,"slds-button-group-list","slds-grow"],["tabindex","-1","aria-pressed","true",1,"slds-button","slds-button_icon","slds-button_icon-border-filled",3,"title","click"],["icon","undo"],[1,"slds-assistive-text"],["icon","redo"],["role","group",1,"slds-grid","slds-rich-text-editor__spacing-wrapper"],[1,"slds-rich-text-editor__select"],[1,"slds-form-element"],[1,"slds-form-element__control"],[1,"slds-select_container"],[1,"slds-select",3,"ngModel","ngModelChange","change"],["value","heading2"],["value","heading3"],["value","heading4"],["value","paragraph"],[1,"slds-select",3,"change"],["value",""],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["aria-describedby","dialog-body-id-35","aria-label","Choose a color","role","dialog",1,"slds-popover","slds-color-picker__selector","slds-show",2,"position","absolute"],["id","dialog-body-id-35",1,"slds-popover__body"],[1,"slds-media"],[1,"slds-media__body"],[1,"slds-text-align--center"],["id","color-picker-default","role","tabpanel","aria-labelledby","color-picker-default__item",1,"slds-tabs_default__content","slds-show"],[4,"ngFor","ngForOf"],["id","color-picker-custom","role","tabpanel","aria-labelledby","color-picker-custom__item",1,"slds-tabs_default__content","slds-hide"],[1,"slds-popover__footer"],[1,"slds-color-picker__selector-footer","slds-p-bottom--x-small","slds-float--right"],[1,"slds-button-small","slds-m-right--small","slds-button_neutral",3,"click"],[1,"slds-button-small","slds-button_destructive",3,"click"],["role","listbox","aria-label","Preset colors",1,"slds-color-picker__swatches"],["class","slds-color-picker__swatch","role","presentation",4,"ngFor","ngForOf"],["role","presentation",1,"slds-color-picker__swatch"],["href","#","role","option","tabindex","0",1,"slds-color-picker__swatch-trigger",3,"ngClass","click"],[1,"slds-swatch",2,"height","9px","width","9px","border","solid 1px black"],["icon","image"],["tabindex","-1",1,"slds-button","slds-button_icon","slds-button_icon-border-filled",3,"title","click"],["icon","video"],["icon","snippet"],["icon","ad_set"],["icon","variable"],[3,"icon"],["rel","stylesheet","type","text/css",3,"href"]],template:function(e,t){1&e&&(n.F$t(),n.TgZ(0,"div",0),n.NdJ("click",(function(e){return t.onEditorClick(e)})),n.YNc(1,N,63,61,"div",1),n.TgZ(2,"div",2)(3,"div",3)(4,"system-richtext-editor-content"),n.YNc(5,F,1,1,"link",4),n._UZ(6,"div",null,5),n.qZA()()()()),2&e&&(n.Q6J("ngStyle",t.richTextStyle),n.xp6(1),n.Q6J("ngIf",!t.readOnly),n.xp6(4),n.Q6J("ngIf",t.cssContent))},dependencies:[l.mk,l.sg,l.O5,l.PC,o.YN,o.Kr,o.EJ,o.JJ,o.On,v.J,Z.m],encapsulation:2})),SystemRichTextEditor})()},121:(e,t,s)=>{"use strict";s.d(t,{m:()=>l});var i=s(1180),n=s(2242);const o=["*"];let l=(()=>{var e;class SystemRichTextEditorContent{constructor(e){(0,i.Z)(this,"cdRef",void 0),this.cdRef=e,e.detach()}}return e=SystemRichTextEditorContent,(0,i.Z)(SystemRichTextEditorContent,"ɵfac",(function(t){return new(t||e)(n.Y36(n.sBO))})),(0,i.Z)(SystemRichTextEditorContent,"ɵcmp",n.Xpm({type:e,selectors:[["system-richtext-editor-content"]],ngContentSelectors:o,decls:1,vars:0,template:function(e,t){1&e&&(n.F$t(),n.Hsn(0))},encapsulation:2,changeDetection:0})),SystemRichTextEditorContent})()},9151:(e,t,s)=>{"use strict";s.d(t,{v:()=>a});var i=s(1180),n=s(2242),o=s(4561),l=s(2803);let a=(()=>{var e;class SystemSearchresultStencil{}return e=SystemSearchresultStencil,(0,i.Z)(SystemSearchresultStencil,"ɵfac",(function(t){return new(t||e)})),(0,i.Z)(SystemSearchresultStencil,"ɵcmp",n.Xpm({type:e,selectors:[["system-searchresult-stencil"]],decls:14,vars:0,consts:[["role","option",1,"slds-lookup__item-action","slds-media","slds-media--center"],["icon","empty","size","small"],[1,"slds-media__body"],[1,"slds-lookup__result-text"],[1,"slds-p-around--xx-small"],[1,"slds-lookup__result-meta","slds-text-body--small"],[1,"slds-list_horizontal","slds-has-dividers_right","slds-truncate"],[1,"slds-item"]],template:function(e,t){1&e&&(n.TgZ(0,"span",0),n._UZ(1,"system-icon",1),n.TgZ(2,"div",2)(3,"div",3)(4,"div",4),n._UZ(5,"system-stencil"),n.qZA()(),n.TgZ(6,"div",5)(7,"ul",6)(8,"li",7)(9,"div",4),n._UZ(10,"system-stencil"),n.qZA()(),n.TgZ(11,"li",7)(12,"div",4),n._UZ(13,"system-stencil"),n.qZA()()()()()())},dependencies:[o.f,l.B],encapsulation:2})),SystemSearchresultStencil})()},2868:(e,t,s)=>{"use strict";s.d(t,{P:()=>p});var i=s(1180),n=s(2242),o=s(5329),l=s(4755),a=s(3463),d=s(8859);function r(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"button",6),n.NdJ("click",(function(){n.CHM(e);const t=n.oxw(2);return n.KtG(t.togglePanel())})),n._UZ(1,"system-utility-icon",7),n.TgZ(2,"span",8),n._UZ(3,"system-label",9),n.qZA()()}if(2&e){const e=n.oxw(2);n.xp6(1),n.Q6J("icon","switch")("size","x-small")("addclasses","slds-section__title-action-icon slds-button__icon slds-button__icon_left"),n.xp6(1),n.s9C("title",e.language.getLabel(e.titlelabel)),n.xp6(1),n.Q6J("label",e.titlelabel)}}function c(e,t){if(1&e&&(n.TgZ(0,"span",10),n._UZ(1,"system-label",9),n.qZA()),2&e){const e=n.oxw(2);n.s9C("title",e.language.getLabel(e.titlelabel)),n.xp6(1),n.Q6J("label",e.titlelabel)}}const u=function(e){return{"slds-theme_shade":e}};function h(e,t){if(1&e&&(n.TgZ(0,"h3",3),n.YNc(1,r,4,5,"button",4),n.YNc(2,c,2,2,"span",5),n.qZA()),2&e){const e=n.oxw();n.Q6J("ngClass",n.VKq(3,u,e.alwaysExpanded)),n.xp6(1),n.Q6J("ngIf",!e.alwaysExpanded),n.xp6(1),n.Q6J("ngIf",e.alwaysExpanded)}}const m=function(e){return{"slds-is-open":e}},g=["*"];let p=(()=>{var e;class SystemSection{constructor(e){(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"titlelabel",""),(0,i.Z)(this,"expanded",!0),(0,i.Z)(this,"alwaysExpanded",!1),this.language=e}togglePanel(){this.expanded=!this.expanded}getTabStyle(){if(!this.expanded)return{height:"0px",transform:"rotateX(90deg)"}}}return e=SystemSection,(0,i.Z)(SystemSection,"ɵfac",(function(t){return new(t||e)(n.Y36(o.d))})),(0,i.Z)(SystemSection,"ɵcmp",n.Xpm({type:e,selectors:[["system-section"]],inputs:{titlelabel:"titlelabel",expanded:"expanded",alwaysExpanded:"alwaysExpanded"},ngContentSelectors:g,decls:4,vars:5,consts:[[1,"slds-section",3,"ngClass"],["class","slds-section__title",3,"ngClass",4,"ngIf"],[3,"ngStyle"],[1,"slds-section__title",3,"ngClass"],["aria-controls","expando-unique-id","aria-expanded","true","class","slds-button slds-section__title-action",3,"click",4,"ngIf"],["class","slds-truncate slds-p-horizontal_small",3,"title",4,"ngIf"],["aria-controls","expando-unique-id","aria-expanded","true",1,"slds-button","slds-section__title-action",3,"click"],[3,"icon","size","addclasses"],[1,"slds-truncate",3,"title"],[3,"label"],[1,"slds-truncate","slds-p-horizontal_small",3,"title"]],template:function(e,t){1&e&&(n.F$t(),n.TgZ(0,"div",0),n.YNc(1,h,3,5,"h3",1),n.TgZ(2,"div",2),n.Hsn(3),n.qZA()()),2&e&&(n.Q6J("ngClass",n.VKq(3,m,t.expanded)),n.xp6(1),n.Q6J("ngIf",t.titlelabel),n.xp6(1),n.Q6J("ngStyle",t.getTabStyle()))},dependencies:[l.mk,l.O5,l.PC,a._,d.r],encapsulation:2})),SystemSection})()},3543:(e,t,s)=>{"use strict";s.d(t,{R:()=>f});var i=s(1180),n=s(2242),o=s(5030),l=s(3398),a=s(4755),d=s(3463),r=s(8859);const c=["resultList"];function u(e,t){if(1&e&&(n.TgZ(0,"label",9),n._UZ(1,"system-label",10),n.qZA()),2&e){const e=n.oxw();n.xp6(1),n.Q6J("label",e.label)}}function h(e,t){if(1&e&&(n.TgZ(0,"li",17)(1,"div",18)(2,"span",19),n._uU(3),n.qZA()()()),2&e){const e=n.oxw().$implicit;n.uIk("data-is-group",!0),n.xp6(3),n.hij(" ",e.name," ")}}function m(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"li",20),n.NdJ("mousedown",(function(e){return e.preventDefault()}))("click",(function(t){n.CHM(e);const s=n.oxw().$implicit,i=n.oxw(2);return n.KtG(i.itemClicked(s,t))})),n.TgZ(1,"div",21)(2,"span",22)(3,"span",23),n._UZ(4,"span",24),n.qZA()()()()}if(2&e){const e=n.oxw().$implicit,t=n.oxw(2);n.xp6(1),n.ekj("slds-has-focus",e.id==t.focusedItemId),n.xp6(3),n.Q6J("innerHTML",e.content,n.oJD)}}function g(e,t){if(1&e&&(n.ynx(0),n.YNc(1,h,4,2,"li",15),n.YNc(2,m,5,3,"li",16),n.BQk()),2&e){const e=t.$implicit;n.xp6(1),n.Q6J("ngIf",e.isGroup),n.xp6(1),n.Q6J("ngIf",!e.isGroup)}}function p(e,t){if(1&e&&(n.TgZ(0,"div",11)(1,"ul",12,13),n.YNc(3,g,3,2,"ng-container",14),n.qZA()()),2&e){const e=n.oxw();n.Udp("max-height",e.dropdownLength),n.xp6(3),n.Q6J("ngForOf",e.searchList)}}let f=(()=>{var e;class SystemSelect{constructor(e,t,s){(0,i.Z)(this,"elementRef",void 0),(0,i.Z)(this,"cdRef",void 0),(0,i.Z)(this,"renderer",void 0),(0,i.Z)(this,"selectList",[]),(0,i.Z)(this,"label",""),(0,i.Z)(this,"value",void 0),(0,i.Z)(this,"listHeight","7"),(0,i.Z)(this,"disabled",!1),(0,i.Z)(this,"emitInputValueOnEnterPress",!1),(0,i.Z)(this,"searchList",{}),(0,i.Z)(this,"searchListVisible",!1),(0,i.Z)(this,"focusedItemId",void 0),(0,i.Z)(this,"onChange",void 0),(0,i.Z)(this,"resultListContainer",void 0),this.elementRef=e,this.cdRef=t,this.renderer=s}get dropdownLength(){return`calc(((1rem * 1.5) + 1rem) * ${this.listHeight})`}registerOnChange(e){this.onChange=e}registerOnTouched(e){}writeValue(e){e&&(this.value=e.name,this.focusedItemId=e.id,this.cdRef.detectChanges())}ngOnChanges(e){e.selectList&&(this.searchList=this.generateSearchList())}outsideClickHandler(e){this.elementRef.nativeElement.contains(e.target)||this.hideSearchList()}onKeyup(e){switch(e.key){case"ArrowUp":case"ArrowDown":return this.navigateThroughResultList(e);case"Enter":this.handleEnterPress();break;default:this.filterSearchList()}0!=this.searchList.length&&"Enter"!=e.key||this.hideSearchList(),this.cdRef.detectChanges()}onFocus(){this.searchListVisible=!0}onBlur(e){this.hideSearchList()}onInputClick(e){this.searchListVisible||(this.searchList=this.generateSearchList()),this.searchListVisible=!0,e.stopPropagation()}itemClicked(e,t){this.hideSearchList(),this.selectList.some((t=>{if(t.id==e.id)return this.onChange(t),this.value=t.name,this.focusedItemId=t.id,!0})),t.stopPropagation&&t.stopPropagation()}hideSearchList(){this.searchListVisible=!1,this.cdRef.detectChanges()}filterSearchList(){this.searchListVisible=!0,this.focusedItemId=void 0,this.searchList=this.generateSearchList(),this.value&&0!=this.searchList.length&&(this.searchList=this.searchList.filter((e=>e.name.toLowerCase().indexOf(this.value.toLowerCase())>-1)),this.searchList.forEach((e=>{const t=e.name.toLowerCase().indexOf(this.value.toLowerCase());-1!=t&&(e.content=this.generateHighlightHTMLContent(e.name,t))})))}generateHighlightHTMLContent(e,t){return[e.slice(0,t),"<mark>",e.slice(t,t+this.value.length),"</mark>",e.slice(t+this.value.length)].join("")}handleEnterPress(){this.focusedItemId?this.onChange(this.selectList.find((e=>e.id==this.focusedItemId))):this.emitInputValueOnEnterPress&&this.onChange(this.value)}generateSearchList(){const e=[],t=_.uniq(this.selectList.map((e=>e.group))).sort();return t.forEach((s=>{(s||!s&&t.length>1)&&e.push({id:`${s}`,name:`${s}`,isGroup:!0}),this.selectList.filter((e=>e.group==s)).sort(((e,t)=>e.name>t.name?1:-1)).forEach((t=>e.push({...t,content:t.name})))})),e}navigateThroughResultList(e){let t=this.searchListVisible?this.searchList:this.generateSearchList();if(t=t.filter((e=>!e.isGroup)),0==t.length)return;const s="ArrowDown"==e.key?"down":"up",i=this.focusedItemId?t.findIndex((e=>e.id==this.focusedItemId)):0;let n="down"==s?t[i+1]:t[i-1];this.focusedItemId&&n?n&&(this.focusedItemId=n.id,this.value=n.name):(n=t[0],this.focusedItemId=n.id,this.value=n.name),!this.searchListVisible&&n&&this.onChange(n),this.scrollToFocusedSearchItem(s)}scrollToFocusedSearchItem(e){if(!this.resultListContainer)return;const t=Array.from(this.resultListContainer.element.nativeElement.children).filter((e=>!e.hasAttribute("data-is-group")));let s=t.findIndex((e=>e.firstElementChild.classList.contains("slds-has-focus")));s=s+1==t.length&&"down"==e||0==s&&"up"==e?0:"down"==e?s+1:s-1,t[s].scrollIntoView()}}return e=SystemSelect,(0,i.Z)(SystemSelect,"ɵfac",(function(t){return new(t||e)(n.Y36(n.SBq),n.Y36(n.sBO),n.Y36(n.Qsj))})),(0,i.Z)(SystemSelect,"ɵcmp",n.Xpm({type:e,selectors:[["system-select"]],viewQuery:function(e,t){if(1&e&&n.Gf(c,5,n.s_b),2&e){let e;n.iGM(e=n.CRH())&&(t.resultListContainer=e.first)}},inputs:{selectList:"selectList",label:"label",listHeight:"listHeight",disabled:"disabled",emitInputValueOnEnterPress:"emitInputValueOnEnterPress"},features:[n._Bn([{provide:o.JU,useExisting:(0,n.Gpc)((()=>e)),multi:!0}]),n.TTD],decls:9,vars:6,consts:[[1,"slds-form-element","slds-size_2-of-2"],["class","slds-form-element__label",4,"ngIf"],[1,"slds-form-element__control","slds-size_2-of-2"],[1,"slds-combobox_container"],["aria-expanded","true","aria-haspopup","listbox","role","combobox",1,"slds-combobox","slds-dropdown-trigger","slds-dropdown-trigger_click","slds-is-open"],["role","none",1,"slds-combobox__form-element","slds-input-has-icon","slds-input-has-icon_right"],["type","text","system-placeholder","LBL_SEARCH","aria-autocomplete","list","autoComplete","off","role","textbox",1,"slds-input","slds-combobox__input","slds-combobox__input-value",3,"ngModel","disabled","focus","blur","click","ngModelChange","keyup"],[3,"icon","addclasses"],["class","slds-dropdown slds-dropdown_fluid slds-scrollable--y","role","listbox",3,"max-height",4,"ngIf"],[1,"slds-form-element__label"],[3,"label"],["role","listbox",1,"slds-dropdown","slds-dropdown_fluid","slds-scrollable--y"],["role","presentation",1,"slds-listbox","slds-listbox_vertical"],["resultList",""],[4,"ngFor","ngForOf"],["role","presentation",4,"ngIf"],["role","presentation","class","slds-listbox__item",3,"mousedown","click",4,"ngIf"],["role","presentation"],[1,"slds-border_bottom","slds-border_top","slds-p-left_small",2,"background-color","#ecebea"],[1,"slds-truncate","size-xx-small",2,"font-weight","bold","font-size","12px"],["role","presentation",1,"slds-listbox__item",3,"mousedown","click"],["role","option",1,"slds-media","slds-listbox__option","slds-listbox__option_plain","slds-media_small"],[1,"slds-media__body"],[1,"slds-truncate"],[3,"innerHTML"]],template:function(e,t){1&e&&(n.TgZ(0,"div",0),n.YNc(1,u,2,1,"label",1),n.TgZ(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"input",6),n.NdJ("focus",(function(){return t.onFocus()}))("blur",(function(e){return t.onBlur(e)}))("click",(function(e){return t.onInputClick(e)}))("ngModelChange",(function(e){return t.value=e}))("keyup",(function(e){return t.onKeyup(e)})),n.qZA(),n._UZ(7,"system-utility-icon",7),n.qZA(),n.YNc(8,p,4,3,"div",8),n.qZA()()()()),2&e&&(n.xp6(1),n.Q6J("ngIf",t.label),n.xp6(5),n.Q6J("ngModel",t.value)("disabled",t.disabled),n.xp6(1),n.Q6J("icon","search")("addclasses","slds-input__icon slds-input__icon--left"),n.xp6(1),n.Q6J("ngIf",t.searchListVisible))},dependencies:[l.A,a.sg,a.O5,o.Fj,o.JJ,o.On,d._,r.r],encapsulation:2,changeDetection:0})),SystemSelect})()},5185:(e,t,s)=>{"use strict";s.d(t,{E:()=>g});var i=s(1180),n=s(2242),o=s(5030),l=s(3577),a=s(4361),d=s(4755),r=s(8859);function c(e,t){1&e&&(n.TgZ(0,"span",10),n._uU(1,"-"),n.qZA())}const u=function(e){return{"slds-hidden":e}};function h(e,t){if(1&e&&n._UZ(0,"system-utility-icon",11),2&e){const e=n.oxw();n.Q6J("ngClass",n.VKq(3,u,!e.selectedItem.value))("icon",e.selectedItem.icon)("colorclass",e.selectedItem.colorclass)}}function m(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"li",12),n.NdJ("click",(function(t){const s=n.CHM(e).$implicit,i=n.oxw();return n.KtG(i.itemClicked(s.value,t))})),n.TgZ(1,"div",13)(2,"span",14),n._UZ(3,"system-utility-icon",11),n.qZA()()()}if(2&e){const e=t.$implicit;n.xp6(3),n.Q6J("ngClass",n.VKq(3,u,!e.value))("icon",e.icon)("colorclass",e.colorclass)}}let g=(()=>{var e;class SystemSelectIcon{constructor(e,t,s){(0,i.Z)(this,"elementRef",void 0),(0,i.Z)(this,"cdRef",void 0),(0,i.Z)(this,"renderer",void 0),(0,i.Z)(this,"selectItemlist",void 0),(0,i.Z)(this,"selectList",[]),(0,i.Z)(this,"label",""),(0,i.Z)(this,"value",""),(0,i.Z)(this,"listHeight","7"),(0,i.Z)(this,"disabled",!1),(0,i.Z)(this,"focusedItemId",void 0),(0,i.Z)(this,"onChange",void 0),this.elementRef=e,this.cdRef=t,this.renderer=s}ngAfterContentInit(){this.selectItemlist.forEach((e=>this.selectList.push({value:e.value??"",icon:e.icon,colorclass:e.colorclass})))}registerOnChange(e){this.onChange=e}registerOnTouched(e){}writeValue(e){e&&(this.value=e,this.cdRef.detectChanges())}get selectedItem(){return this.selectItemlist.find((e=>e.value==this.value))??void 0}itemClicked(e,t){this.value=e,this.onChange(e)}}return e=SystemSelectIcon,(0,i.Z)(SystemSelectIcon,"ɵfac",(function(t){return new(t||e)(n.Y36(n.SBq),n.Y36(n.sBO),n.Y36(n.Qsj))})),(0,i.Z)(SystemSelectIcon,"ɵcmp",n.Xpm({type:e,selectors:[["system-select-icon"]],contentQueries:function(e,t,s){if(1&e&&n.Suo(s,l.s,4),2&e){let e;n.iGM(e=n.CRH())&&(t.selectItemlist=e)}},inputs:{selectList:"selectList",label:"label",listHeight:"listHeight",disabled:"disabled"},features:[n._Bn([{provide:o.JU,useExisting:(0,n.Gpc)((()=>e)),multi:!0}])],decls:10,vars:3,consts:[[1,"slds-combobox_container"],["system-dropdown-trigger-simple","",1,"slds-combobox","slds-dropdown-trigger","slds-dropdown-trigger_click"],["role","none",1,"slds-combobox__form-element","slds-input-has-icon","slds-input-has-icon_right"],["type","button",1,"slds-input_faux","slds-combobox__input"],["class","slds-truncate",4,"ngIf"],["size","x-small",3,"ngClass","icon","colorclass",4,"ngIf"],["addclasses","slds-icon_container slds-icon-utility-down slds-input__icon slds-input__icon_right","icon","down","size","x-small"],["role","listbox",1,"slds-dropdown","slds-dropdown_length-5","slds-dropdown_fluid",2,"min-width","auto"],["role","presentation",1,"slds-listbox","slds-listbox_vertical"],["role","presentation","class","slds-listbox__item",3,"click",4,"ngFor","ngForOf"],[1,"slds-truncate"],["size","x-small",3,"ngClass","icon","colorclass"],["role","presentation",1,"slds-listbox__item",3,"click"],["role","option",1,"slds-media","slds-listbox__option","slds-listbox__option_plain","slds-media_small"],[1,"slds-media__figure","slds-listbox__option-icon"]],template:function(e,t){1&e&&(n.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"button",3),n.YNc(4,c,2,0,"span",4),n.YNc(5,h,1,5,"system-utility-icon",5),n.qZA(),n._UZ(6,"system-utility-icon",6),n.qZA(),n.TgZ(7,"div",7)(8,"ul",8),n.YNc(9,m,4,5,"li",9),n.qZA()()()()),2&e&&(n.xp6(4),n.Q6J("ngIf",!t.selectedItem),n.xp6(1),n.Q6J("ngIf",t.selectedItem),n.xp6(4),n.Q6J("ngForOf",t.selectList))},dependencies:[a.w,d.mk,d.sg,d.O5,r.r],encapsulation:2,changeDetection:0})),SystemSelectIcon})()},3577:(e,t,s)=>{"use strict";s.d(t,{s:()=>o});var i=s(1180),n=s(2242);let o=(()=>{var e;class SystemSelectIconItem{constructor(){(0,i.Z)(this,"value",""),(0,i.Z)(this,"icon","dash"),(0,i.Z)(this,"colorclass","slds-icon-text-default")}}return e=SystemSelectIconItem,(0,i.Z)(SystemSelectIconItem,"ɵfac",(function(t){return new(t||e)})),(0,i.Z)(SystemSelectIconItem,"ɵcmp",n.Xpm({type:e,selectors:[["system-select-icon-item"]],inputs:{value:"value",icon:"icon",colorclass:"colorclass"},decls:0,vars:0,template:function(e,t){},encapsulation:2})),SystemSelectIconItem})()},1691:(e,t,s)=>{"use strict";s.d(t,{E:()=>u});var i=s(1180),n=s(2242),o=s(5030),l=s(6625),a=s(5329),d=s(4755),r=s(3463);function c(e,t){if(1&e&&(n.TgZ(0,"option",3),n._UZ(1,"system-label",4),n.qZA()),2&e){const e=t.$implicit;n.Q6J("value",e.id),n.xp6(1),n.Q6J("label",e.label)}}let u=(()=>{var e;class SystemSelectUOM{constructor(e,t){(0,i.Z)(this,"configuration",void 0),(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"uoms",[]),(0,i.Z)(this,"onChange",void 0),(0,i.Z)(this,"onTouched",void 0),(0,i.Z)(this,"disabled",!1),(0,i.Z)(this,"_uom",""),this.configuration=e,this.language=t,this.uoms=this.configuration.getData("uomunits")}get uom(){return this._uom}set uom(e){this._uom=e,this.onChange(e)}registerOnChange(e){this.onChange=t=>{e(t)}}registerOnTouched(e){this.onTouched=e}writeValue(e){this._uom=e||""}}return e=SystemSelectUOM,(0,i.Z)(SystemSelectUOM,"ɵfac",(function(t){return new(t||e)(n.Y36(l.C),n.Y36(a.d))})),(0,i.Z)(SystemSelectUOM,"ɵcmp",n.Xpm({type:e,selectors:[["system-select-uom"]],inputs:{disabled:"disabled"},features:[n._Bn([{provide:o.JU,useExisting:(0,n.Gpc)((()=>e)),multi:!0}])],decls:3,vars:3,consts:[[1,"slds-select_container","slds-m-vertical--xx-small"],[1,"slds-select",3,"disabled","ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[3,"label"]],template:function(e,t){1&e&&(n.TgZ(0,"div",0)(1,"select",1),n.NdJ("ngModelChange",(function(e){return t.uom=e})),n.YNc(2,c,2,2,"option",2),n.qZA()()),2&e&&(n.xp6(1),n.Q6J("disabled",t.disabled)("ngModel",t.uom),n.xp6(1),n.Q6J("ngForOf",t.uoms))},dependencies:[d.sg,o.YN,o.Kr,o.EJ,o.JJ,o.On,r._],encapsulation:2})),SystemSelectUOM})()},6274:(e,t,s)=>{"use strict";s.d(t,{f:()=>d});var i=s(1180),n=s(2242),o=s(5030),l=s(4755);function a(e,t){if(1&e&&(n.ynx(0),n.TgZ(1,"span",8),n._uU(2),n.qZA(),n.BQk()),2&e){const e=n.oxw();n.xp6(2),n.Oqu(e.value)}}let d=(()=>{var e;class SystemSlider{constructor(){(0,i.Z)(this,"onChange",void 0),(0,i.Z)(this,"onTouched",void 0),(0,i.Z)(this,"max",void 0),(0,i.Z)(this,"min",void 0),(0,i.Z)(this,"step",void 0),(0,i.Z)(this,"disabled",!1),(0,i.Z)(this,"displayValue",!0),(0,i.Z)(this,"_value",0)}get value(){return this._value}set value(e){e!=this._value&&(this._value=e,this.onChange(e))}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}writeValue(e){this._value=e}setDisabledState(e){this.disabled=e}}return e=SystemSlider,(0,i.Z)(SystemSlider,"ɵfac",(function(t){return new(t||e)})),(0,i.Z)(SystemSlider,"ɵcmp",n.Xpm({type:e,selectors:[["system-slider"]],inputs:{max:"max",min:"min",step:"step",disabled:"disabled",displayValue:"displayValue"},features:[n._Bn([{provide:o.JU,useExisting:(0,n.Gpc)((()=>e)),multi:!0}])],decls:8,vars:8,consts:[[1,"slds-form-element"],[1,"slds-form-element__control"],[1,"slds-slider","slds-grid"],[1,"slds-align--absolute-center","slds-grow","slds-is-relative"],["type","range",1,"slds-slider__range",3,"min","step","max","ngModel","disabled","ngModelChange"],[1,"slds-grid","slds-grid--align-end",2,"width","100%","top","calc(50% - 2px)","position","absolute","padding-left","16px","pointer-events","none"],[2,"background","#f3f3f3","height","4px"],[4,"ngIf"],["aria-hidden","true",1,"slds-slider__value"]],template:function(e,t){1&e&&(n.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"input",4),n.NdJ("ngModelChange",(function(e){return t.value=e})),n.qZA(),n.TgZ(5,"div",5),n._UZ(6,"div",6),n.qZA()(),n.YNc(7,a,3,1,"ng-container",7),n.qZA()()()),2&e&&(n.xp6(4),n.Q6J("min",t.min)("step",t.step)("max",t.max)("ngModel",t.value)("disabled",t.disabled),n.xp6(2),n.Udp("width",100-t.value,"%"),n.xp6(1),n.Q6J("ngIf",t.displayValue))},dependencies:[l.O5,o.Fj,o.eT,o.JJ,o.On],encapsulation:2})),SystemSlider})()},4664:(e,t,s)=>{"use strict";s.d(t,{W:()=>r});var i=s(1180),n=s(2242);function o(e,t){if(1&e&&(n.TgZ(0,"div",6),n._UZ(1,"system-label",7),n.qZA()),2&e){const e=n.oxw(2);n.xp6(1),n.Q6J("label",e.message)}}function l(e,t){if(1&e&&(n.TgZ(0,"div",2)(1,"div",3),n._UZ(2,"div",4),n.qZA(),n.YNc(3,o,2,1,"div",5),n.qZA()),2&e){const e=n.oxw();n.xp6(2),n.Q6J("ngStyle",e.spinnerStyle),n.xp6(1),n.Q6J("ngIf",e.message)}}function a(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"button",12),n.NdJ("click",(function(){n.CHM(e);const t=n.oxw(2);return n.KtG(t.onCancel())})),n._UZ(1,"system-label",13),n.qZA()}}function d(e,t){if(1&e&&(n.TgZ(0,"div",8)(1,"div",9)(2,"div",3),n._UZ(3,"div",10),n.qZA()(),n.YNc(4,a,2,0,"button",11),n.qZA()),2&e){const e=n.oxw();n.xp6(4),n.Q6J("ngIf",e.cancellable)}}let r=(()=>{var e;class SystemSpinner{constructor(){(0,i.Z)(this,"asOverlay",!1),(0,i.Z)(this,"onCancel$",new n.vpe),(0,i.Z)(this,"size",0),(0,i.Z)(this,"border",0),(0,i.Z)(this,"inverse","false"),(0,i.Z)(this,"message",void 0),(0,i.Z)(this,"spinnerStyle",{}),(0,i.Z)(this,"cancellable",!1)}ngOnInit(){return 0!=this.size&&(this.spinnerStyle.width=this.size+"px",this.spinnerStyle.height=this.size+"px"),0!=this.border&&(this.spinnerStyle["border-width"]=this.border+"px"),"true"==this.inverse&&(this.spinnerStyle["border-right-color"]="#fff",this.spinnerStyle["border-left-color"]="#fff",this.spinnerStyle["border-bottom-color"]="#fff"),{}}onCancel(){this.onCancel$.emit()}}return e=SystemSpinner,(0,i.Z)(SystemSpinner,"ɵfac",(function(t){return new(t||e)})),(0,i.Z)(SystemSpinner,"ɵcmp",n.Xpm({type:e,selectors:[["system-spinner"]],hostVars:2,hostBindings:function(e,t){2&e&&n.ekj("spice-overlay-spinner-container",t.asOverlay)},inputs:{size:"size",border:"border",inverse:"inverse",message:"message"},outputs:{onCancel$:"onCancel$"},decls:3,vars:2,consts:[["class","slds-grid slds-grid--vertical",4,"ngIf","ngIfElse"],["overlayContainer",""],[1,"slds-grid","slds-grid--vertical"],[1,"cssload-container"],[1,"cssload-double-torus",3,"ngStyle"],["class","slds-m-top--x-small",4,"ngIf"],[1,"slds-m-top--x-small"],[3,"label"],[1,"slds-grid","slds-grid--vertical","slds-grid--vertical-align-center"],[2,"width","48px","border-radius","50%","box-shadow","0 0 5px 0 #555","padding",".5rem","background-color","#fff","color","#080707"],[1,"cssload-double-torus",2,"width","32px","height","32px"],["class","slds-button slds-button--brand slds-m-top--x-small",3,"click",4,"ngIf"],[1,"slds-button","slds-button--brand","slds-m-top--x-small",3,"click"],["label","LBL_CANCEL"]],template:function(e,t){if(1&e&&(n.YNc(0,l,4,2,"div",0),n.YNc(1,d,5,1,"ng-template",null,1,n.W1O)),2&e){const e=n.MAs(2);n.Q6J("ngIf",!t.asOverlay)("ngIfElse",e)}},encapsulation:2})),SystemSpinner})()},9159:(e,t,s)=>{"use strict";s.d(t,{n:()=>m});var i=s(1180),n=s(2242),o=s(2235),l=s(2637),a=s(4755),d=s(2656);function r(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"button",3),n.NdJ("click",(function(){n.CHM(e);const t=n.oxw();return n.KtG(t.expand("right"))})),n._UZ(1,"system-button-icon",4),n.qZA()}}function c(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"button",3),n.NdJ("click",(function(){n.CHM(e);const t=n.oxw();return n.KtG(t.expand("left"))})),n._UZ(1,"system-button-icon",5),n.qZA()}}const u=[[["system-split-container-left"]],[["system-split-container-right"]]],h=["system-split-container-left","system-split-container-right"];let m=(()=>{var e;class SystemSplitContainer{constructor(){(0,i.Z)(this,"onExpand",new n.vpe),(0,i.Z)(this,"childLeft",void 0),(0,i.Z)(this,"childRight",void 0)}expand(e){"left"!=e||this.childRight.expanded?"right"!=e||this.childLeft.expanded?(this.childLeft.hidden=!1,this.childLeft.expanded=!1,this.childRight.hidden=!1,this.childRight.expanded=!1):(this.childLeft.hidden=!0,this.childLeft.expanded=!1,this.childRight.expanded=!0,this.childRight.hidden=!1):(this.childRight.hidden=!0,this.childRight.expanded=!1,this.childLeft.hidden=!1,this.childLeft.expanded=!0),this.onExpand.emit(e)}}return e=SystemSplitContainer,(0,i.Z)(SystemSplitContainer,"ɵfac",(function(t){return new(t||e)})),(0,i.Z)(SystemSplitContainer,"ɵcmp",n.Xpm({type:e,selectors:[["system-split-container"]],contentQueries:function(e,t,s){if(1&e&&(n.Suo(s,o.j,5),n.Suo(s,l.I,5)),2&e){let e;n.iGM(e=n.CRH())&&(t.childLeft=e.first),n.iGM(e=n.CRH())&&(t.childRight=e.first)}},hostAttrs:[1,"slds-size--1-of-1","slds-height_full","slds-grid"],outputs:{onExpand:"onExpand"},ngContentSelectors:h,decls:6,vars:4,consts:[[1,"slds-is-relative"],[1,"slds-grid","slds-is-absolute__top","slds-grid--vertical","slds-theme--default","spice-split-container-splitter"],["class","slds-button slds-button--icon-bare slds-button--icon",3,"click",4,"ngIf"],[1,"slds-button","slds-button--icon-bare","slds-button--icon",3,"click"],["icon","arrow_left","size","small"],["icon","arrow_right","size","small"]],template:function(e,t){1&e&&(n.F$t(u),n.Hsn(0),n.TgZ(1,"div",0)(2,"div",1),n.YNc(3,r,2,0,"button",2),n.YNc(4,c,2,0,"button",2),n.qZA()(),n.Hsn(5,1)),2&e&&(n.xp6(2),n.Udp("left",t.childLeft.expanded?-16:t.childRight.expanded?0:-8,"px"),n.xp6(1),n.Q6J("ngIf",!t.childRight.expanded),n.xp6(1),n.Q6J("ngIf",!t.childLeft.expanded))},dependencies:[a.O5,d.J],encapsulation:2})),SystemSplitContainer})()},2235:(e,t,s)=>{"use strict";s.d(t,{j:()=>l});var i=s(1180),n=s(2242);const o=["*"];let l=(()=>{var e;class SystemSplitContainerLeft{constructor(){(0,i.Z)(this,"hidden",!1),(0,i.Z)(this,"expanded",!1)}}return e=SystemSplitContainerLeft,(0,i.Z)(SystemSplitContainerLeft,"ɵfac",(function(t){return new(t||e)})),(0,i.Z)(SystemSplitContainerLeft,"ɵcmp",n.Xpm({type:e,selectors:[["system-split-container-left"]],hostVars:4,hostBindings:function(e,t){2&e&&(n.Akn(t.expanded?"width: 100%":null),n.ekj("slds-hide",t.hidden))},ngContentSelectors:o,decls:1,vars:0,template:function(e,t){1&e&&(n.F$t(),n.Hsn(0))},encapsulation:2})),SystemSplitContainerLeft})()},2637:(e,t,s)=>{"use strict";s.d(t,{I:()=>l});var i=s(1180),n=s(2242);const o=["*"];let l=(()=>{var e;class SystemSplitContainerRight{constructor(){(0,i.Z)(this,"hidden",!1),(0,i.Z)(this,"expanded",!1)}}return e=SystemSplitContainerRight,(0,i.Z)(SystemSplitContainerRight,"ɵfac",(function(t){return new(t||e)})),(0,i.Z)(SystemSplitContainerRight,"ɵcmp",n.Xpm({type:e,selectors:[["system-split-container-right"]],hostVars:4,hostBindings:function(e,t){2&e&&(n.Akn(t.expanded?"width: 100%":null),n.ekj("slds-hide",t.hidden))},ngContentSelectors:o,decls:1,vars:0,template:function(e,t){1&e&&(n.F$t(),n.Hsn(0))},encapsulation:2})),SystemSplitContainerRight})()},2803:(e,t,s)=>{"use strict";s.d(t,{B:()=>o});var i=s(1180),n=s(2242);let o=(()=>{var e;class SystemStencil{}return e=SystemStencil,(0,i.Z)(SystemStencil,"ɵfac",(function(t){return new(t||e)})),(0,i.Z)(SystemStencil,"ɵcmp",n.Xpm({type:e,selectors:[["system-stencil"]],decls:2,vars:0,consts:[[1,"slds-theme--shade",2,"background-color","#e4e9f3","min-width","100px"]],template:function(e,t){1&e&&(n.TgZ(0,"div",0),n._uU(1," "),n.qZA())},encapsulation:2})),SystemStencil})()},2161:(e,t,s)=>{"use strict";s.d(t,{x:()=>g});var i=s(1180),n=s(2242),o=s(4755),l=s(2803);const a=["system-table-stencils",""];function d(e,t){1&e&&n._UZ(0,"td",5)}function r(e,t){1&e&&n._UZ(0,"td")}function c(e,t){1&e&&n._UZ(0,"td",5)}function u(e,t){1&e&&(n.TgZ(0,"td"),n._UZ(1,"system-stencil"),n.qZA())}function h(e,t){1&e&&n._UZ(0,"td",5)}function m(e,t){if(1&e&&(n.TgZ(0,"tr",1),n.YNc(1,d,1,0,"td",2),n.YNc(2,r,1,0,"td",3),n.YNc(3,c,1,0,"td",2),n.YNc(4,u,2,0,"td",4),n.YNc(5,h,1,0,"td",2),n.qZA()),2&e){const e=t.$implicit,s=n.oxw();n.Q6J("ngStyle",s.linestyle(e)),n.xp6(1),n.Q6J("ngIf",s.dragHandles),n.xp6(1),n.Q6J("ngIf",s.rownumbers),n.xp6(1),n.Q6J("ngIf",s.select),n.xp6(1),n.Q6J("ngForOf",s.colArray),n.xp6(1),n.Q6J("ngIf",s.tools)}}let g=(()=>{var e;class SystemTableStencils{constructor(){(0,i.Z)(this,"columns",1),(0,i.Z)(this,"rows",5),(0,i.Z)(this,"tools",!1),(0,i.Z)(this,"select",!1),(0,i.Z)(this,"rownumbers",!1),(0,i.Z)(this,"dragHandles",!1),(0,i.Z)(this,"colArray",[]),(0,i.Z)(this,"rowArray",[])}ngOnInit(){let e=1;do{this.rowArray.push(e),e++}while(e<=this.rows);let t=1;do{this.colArray.push(t),t++}while(t<=this.columns)}linestyle(e){return{opacity:.2+.8/e}}}return e=SystemTableStencils,(0,i.Z)(SystemTableStencils,"ɵfac",(function(t){return new(t||e)})),(0,i.Z)(SystemTableStencils,"ɵcmp",n.Xpm({type:e,selectors:[["","system-table-stencils",""]],inputs:{columns:"columns",rows:"rows",tools:"tools",select:"select",rownumbers:"rownumbers",dragHandles:"dragHandles"},attrs:a,decls:1,vars:1,consts:[[3,"ngStyle",4,"ngFor","ngForOf"],[3,"ngStyle"],["class","slds-cell-shrink",4,"ngIf"],[4,"ngIf"],[4,"ngFor","ngForOf"],[1,"slds-cell-shrink"]],template:function(e,t){1&e&&n.YNc(0,m,6,6,"tr",0),2&e&&n.Q6J("ngForOf",t.rowArray)},dependencies:[o.sg,o.O5,o.PC,l.B],encapsulation:2})),SystemTableStencils})()},2403:(e,t,s)=>{"use strict";s.d(t,{t:()=>m});var i=s(1180),n=s(2242),o=s(3278),l=s(6559),a=s(4755),d=s(2656),r=s(3463),c=s(8859);function u(e,t){if(1&e&&(n.TgZ(0,"p",11),n._UZ(1,"system-label",12),n.qZA()),2&e){const e=n.oxw().$implicit;n.xp6(1),n.Q6J("label",e.description)}}function h(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"div",2)(1,"button",3),n.NdJ("click",(function(){const t=n.CHM(e).$implicit,s=n.oxw();return n.KtG(s.toast.clearToast(t.id))})),n._UZ(2,"system-button-icon",4),n.qZA(),n.TgZ(3,"div",5),n._UZ(4,"system-utility-icon",6),n.TgZ(5,"div",7)(6,"h2",8),n._UZ(7,"system-label",9),n.qZA(),n.YNc(8,u,2,1,"p",10),n.qZA()()()}if(2&e){const e=t.$implicit,s=n.oxw();n.Q6J("ngStyle",s.toastStyle)("ngClass",s.getToastClass(e.type,e.theme)),n.xp6(2),n.Q6J("icon","close")("size","large"),n.xp6(2),n.Q6J("icon",s.getToastIcon(e.type))("size","small")("addclasses","slds-m-right--small slds-col slds-no-flex")("colorclass","slds-icon"),n.xp6(3),n.Q6J("label",e.text),n.xp6(1),n.Q6J("ngIf",e.description)}}let m=(()=>{var e;class SystemToastContainer{constructor(e,t,s,n){(0,i.Z)(this,"toast",void 0),(0,i.Z)(this,"layout",void 0),(0,i.Z)(this,"renderer",void 0),(0,i.Z)(this,"cdr",void 0),this.toast=e,this.layout=t,this.renderer=s,this.cdr=n,this.renderer.listen("window","resize",(()=>this.cdr.detectChanges()))}get isnarrow(){return"small"==this.layout.screenwidth}get toastContainerStyle(){return this.isnarrow?{}:{width:"30rem","margin-left":"calc(50% - 15rem)"}}get toastStyle(){return this.isnarrow?{"min-width":"unset","border-radius":0,"border-bottom":"1px solid #fff"}:{}}getToastClass(e,t){let s="";if("alert"===t)s="slds-notify--alert slds-theme--alert-texture ";else s="slds-notify--toast ";switch(e){case"success":s+="slds-theme--success";break;case"warning":s+="slds-theme--warning";break;case"error":s+="slds-theme--error"}return this.isnarrow?s+" slds-size--1-of-1 slds-m-around--none":s}getToastIcon(e){switch(e){case"success":return"success";case"warning":return"warning";case"error":return"error";default:return"info"}}}return e=SystemToastContainer,(0,i.Z)(SystemToastContainer,"ɵfac",(function(t){return new(t||e)(n.Y36(o.A),n.Y36(l.b),n.Y36(n.Qsj),n.Y36(n.sBO))})),(0,i.Z)(SystemToastContainer,"ɵcmp",n.Xpm({type:e,selectors:[["system-toast-container"]],decls:2,vars:2,consts:[[1,"slds-notify_container",3,"ngStyle"],["class","slds-notify","role","alert",3,"ngStyle","ngClass",4,"ngFor","ngForOf"],["role","alert",1,"slds-notify",3,"ngStyle","ngClass"],[1,"slds-button","slds-notify__close","slds-button--icon-inverse",3,"click"],[3,"icon","size"],[1,"slds-notify__content","slds-grid"],[3,"icon","size","addclasses","colorclass"],[1,"slds-col","slds-align-middle"],[1,"slds-text-heading--small"],[3,"label"],["style","max-width: 400px;overflow-wrap: break-word; white-space: normal;",4,"ngIf"],[2,"max-width","400px","overflow-wrap","break-word","white-space","normal"],["length","long",3,"label"]],template:function(e,t){1&e&&(n.TgZ(0,"div",0),n.YNc(1,h,9,10,"div",1),n.qZA()),2&e&&(n.Q6J("ngStyle",t.toastContainerStyle),n.xp6(1),n.Q6J("ngForOf",t.toast.activeToasts))},dependencies:[a.mk,a.sg,a.O5,a.PC,d.J,r._,c.r],encapsulation:2})),SystemToastContainer})()},494:(e,t,s)=>{"use strict";s.d(t,{S:()=>d});var i=s(1180),n=s(2242),o=s(4755),l=s(2656);function a(e,t){if(1&e&&(n.TgZ(0,"div",7)(1,"div",8),n._uU(2),n.qZA()()),2&e){const e=n.oxw();n.xp6(2),n.Oqu(e.tooltiptext)}}let d=(()=>{var e;class SystemTooltip{constructor(){(0,i.Z)(this,"tooltiptext",""),(0,i.Z)(this,"displayHelp",!1)}toggleHelp(){this.displayHelp=!this.displayHelp}openHelp(){this.displayHelp=!0}closeHelp(){this.displayHelp=!1}}return e=SystemTooltip,(0,i.Z)(SystemTooltip,"ɵfac",(function(t){return new(t||e)})),(0,i.Z)(SystemTooltip,"ɵcmp",n.Xpm({type:e,selectors:[["system-tooltip"]],inputs:{tooltiptext:"tooltiptext"},decls:8,vars:2,consts:[[1,"slds-is-relative"],[1,"slds-form-element"],[1,"slds-form-element__icon","slds-align-middle"],[1,"slds-button","slds-button_icon","slds-button","slds-button_icon",3,"mouseover","mouseout"],[3,"icon"],[1,"slds-assistive-text"],["class","slds-popover slds-popover_tooltip slds-nubbin_bottom-left slds-is-absolute","role","tooltip","style","word-wrap: break-word;white-space: normal;width: 300px;bottom: 30px;left: -15px;",4,"ngIf"],["role","tooltip",1,"slds-popover","slds-popover_tooltip","slds-nubbin_bottom-left","slds-is-absolute",2,"word-wrap","break-word","white-space","normal","width","300px","bottom","30px","left","-15px"],[1,"slds-popover__body"]],template:function(e,t){1&e&&(n.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"button",3),n.NdJ("mouseover",(function(){return t.openHelp()}))("mouseout",(function(){return t.closeHelp()})),n._UZ(4,"system-button-icon",4),n.TgZ(5,"span",5),n._uU(6,"Help"),n.qZA()()()(),n.YNc(7,a,3,1,"div",6),n.qZA()),2&e&&(n.xp6(4),n.Q6J("icon","info"),n.xp6(3),n.Q6J("ngIf",t.displayHelp))},dependencies:[o.O5,l.J],encapsulation:2})),SystemTooltip})()},8574:(e,t,s)=>{"use strict";s.d(t,{O:()=>h});var i=s(1180),n=s(2242),o=s(3418),l=s(4755),a=s(2656),d=s(3361);function r(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"li",4),n.NdJ("cdkDragStarted",(function(){n.CHM(e);const t=n.oxw();return n.KtG(t.setIsDragging(!0))}))("cdkDragEnded",(function(){n.CHM(e);const t=n.oxw();return n.KtG(t.setIsDragging(!1))})),n.TgZ(1,"system-tree-item",5),n.NdJ("click",(function(){const t=n.CHM(e).$implicit,s=n.oxw();return n.KtG(s.handleClick(t.id))}))("toggleExpandedChange",(function(t){n.CHM(e);const s=n.oxw();return n.KtG(s.handleExpand(t))}))("dragPositionChange",(function(t){n.CHM(e);const s=n.oxw();return n.KtG(s.handleDragPosition(t))}))("onItemAdd",(function(t){n.CHM(e);const s=n.oxw();return n.KtG(s.onItemAdd.emit(t))})),n.qZA()()}if(2&e){const e=t.$implicit,s=n.oxw();n.Q6J("cdkDragData",e)("cdkDragDisabled",!s.config.draggable||e.systemTreeDefs.hasChildren),n.uIk("aria-level",e.systemTreeDefs.level)("aria-selected",e.systemTreeDefs.isSelected),n.xp6(1),n.Q6J("item",e)("customButtonsContainer",s.customButtonsContainer)("config",s.config)("isDragging",s.isDragging)("title",e.name)}}function c(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"div",6)(1,"button",7),n.NdJ("click",(function(){n.CHM(e);const t=n.oxw();return n.KtG(t.onItemAdd.emit(null))})),n._UZ(2,"system-button-icon",8),n.qZA()()}2&e&&(n.xp6(2),n.Q6J("icon","add")("size","small"))}const u=["*"];let h=(()=>{var e;class SystemTree{constructor(){(0,i.Z)(this,"sourceList",[]),(0,i.Z)(this,"customButtonsContainer",void 0),(0,i.Z)(this,"selectedItem",""),(0,i.Z)(this,"selectedItemChange",new n.vpe),(0,i.Z)(this,"onItemAdd",new n.vpe),(0,i.Z)(this,"onTreeDrop",new n.vpe),(0,i.Z)(this,"tree",[]),(0,i.Z)(this,"dragPosition",void 0),(0,i.Z)(this,"isDragging",!1),(0,i.Z)(this,"treeConfig",{draggable:!1,canadd:!1,expandall:!1,collapsible:!0})}get config(){return this.treeConfig}set config(e){this.treeConfig.draggable=e.draggable||!1,this.treeConfig.canadd=e.canadd||!1,this.treeConfig.expandall=e.expandall||!1,this.treeConfig.collapsible=!e.hasOwnProperty("collapsible")||e.collapsible}ngOnChanges(e){e.sourceList&&this.buildTree(),e.selectedItem&&this.handleClick(this.selectedItem,!0)}buildTree(){this.tree=[],this.sortBySequence(),this.addTreeItem(),this.setHasChildren()}sortBySequence(){this.sourceList.sort(((e,t)=>e.name&&t.name?e.name>t.name?1:-1:0));let e=_.groupBy(this.sourceList,(e=>e.parent_id));this.sourceList=[];for(let t in e)e.hasOwnProperty(t)&&(e[t].sort(((e,t)=>e.parent_sequence&&t.parent_sequence?+e.parent_sequence>+t.parent_sequence?1:-1:0)),this.sourceList=[...this.sourceList,...e[t]])}addTreeItem(e="",t=1){for(let s of this.sourceList)(!s.parent_id&&""==e||s.parent_id==e)&&(s.systemTreeDefs||(s.systemTreeDefs={}),s.systemTreeDefs.expanded=!!this.config.collapsible&&(!!this.config.expandall||!!s.systemTreeDefs.expanded),s.systemTreeDefs.clickable=!s.systemTreeDefs.hasOwnProperty("clickable")||s.systemTreeDefs.clickable,s.systemTreeDefs.level=t,s.systemTreeDefs.isSelected=this.selectedItem==s.id,this.tree.push(s),s.systemTreeDefs.expanded&&this.addTreeItem(s.id,t+1))}setHasChildren(){this.tree.forEach((e=>{e.systemTreeDefs.hasChildren=this.sourceList.some((t=>t.parent_id==e.id))}))}handleDrop(e){if(this.isDragging=!1,!this.dragPosition)return;let t,s,i=e.item.data.parent_id,n=this.tree.find((e=>e.id==this.dragPosition.id)),l=this.tree.findIndex((e=>e.id==this.dragPosition.id));switch(this.dragPosition.position){case"before":let t=l-1<=0,s=this.tree[t?0:l-1];e.item.data.parent_id=t?null:s.systemTreeDefs.hasChildren?s.id:s.parent_id,e.item.data.systemTreeDefs.level=t?1:s.systemTreeDefs.hasChildren?s.systemTreeDefs.level+1:s.systemTreeDefs.level,l=t?0:l;break;case"item":e.previousIndex>l&&l++,e.item.data.systemTreeDefs.level=n.systemTreeDefs.level+1,e.item.data.parent_id=n.id,n.systemTreeDefs.hasChildren=!0;break;case"after":let i=l>=this.tree.length-1,o=this.tree[i?this.tree.length-1:l];e.item.data.systemTreeDefs.level=i?1:o.systemTreeDefs.hasChildren?o.systemTreeDefs.level+1:o.systemTreeDefs.level,e.item.data.parent_id=i?null:o.systemTreeDefs.hasChildren?o.id:o.parent_id,l=i?this.tree.length-1:e.previousIndex>l?l+1:l}e.previousIndex!=l&&(this.tree.some((e=>{if(e.id==i)return e.systemTreeDefs.hasChildren=this.sourceList.some((e=>e.parent_id==i)),!0})),(0,o.bA)(this.tree,e.previousIndex,l),t=this.tree.filter((t=>t.parent_id==e.item.data.parent_id||t.parent_id==i)).map(((e,t)=>({id:e.id,index:t}))),this.tree=this.tree.map((e=>{let s=t.findIndex((t=>t.id==e.id));return s>-1&&(e.parent_sequence=s),e}))),e.item.data.parent_id!=i&&(s={id:e.item.data.id,parent_id:e.item.data.parent_id}),this.dragPosition=null,this.onTreeDrop.emit({itemWithNewParent:s,newSortSequences:t})}setIsDragging(e){this.isDragging=e}handleDragPosition(e){this.dragPosition=e}handleExpand(e){this.sourceList.some((t=>{if(t.id==e)return t.systemTreeDefs.expanded=!t.systemTreeDefs.expanded,!0})),this.buildTree()}handleClick(e,t){this.tree.some((s=>{if(s.id==e)return s.systemTreeDefs&&s.systemTreeDefs.clickable?(s.systemTreeDefs.isSelected=!0,t||this.selectedItemChange.emit(e),this.selectedItem=e):this.handleExpand(e),!0})),this.tree.some((t=>{if(t.id!=e&&t.systemTreeDefs&&t.systemTreeDefs.isSelected)return t.systemTreeDefs.isSelected=!1,!0}))}trackByFn(e,t){return t.id}}return e=SystemTree,(0,i.Z)(SystemTree,"ɵfac",(function(t){return new(t||e)})),(0,i.Z)(SystemTree,"ɵcmp",n.Xpm({type:e,selectors:[["system-tree"]],inputs:{sourceList:"sourceList",customButtonsContainer:"customButtonsContainer",selectedItem:"selectedItem",config:"config"},outputs:{selectedItemChange:"selectedItemChange",onItemAdd:"onItemAdd",onTreeDrop:"onTreeDrop"},features:[n.TTD],ngContentSelectors:u,decls:5,vars:4,consts:[["role","tree",1,"tree-list-drag-boundary"],["cdkDropList","","cdkDropListSortingDisabled","","role","tree","aria-labelledby","treeheading",1,"slds-tree","slds-p-top--xxx-small",3,"cdkDropListData","cdkDropListDropped"],["role","treeitem","cdkDrag","","cdkDragBoundary",".tree-list-drag-boundary","class","slds-grid slds-drag--preview",3,"cdkDragData","cdkDragDisabled","cdkDragStarted","cdkDragEnded",4,"ngFor","ngForOf","ngForTrackBy"],["class","slds-grid slds-align-content-center slds-border--top slds-m-top--x-small slds-p-top--x-small",4,"ngIf"],["role","treeitem","cdkDrag","","cdkDragBoundary",".tree-list-drag-boundary",1,"slds-grid","slds-drag--preview",3,"cdkDragData","cdkDragDisabled","cdkDragStarted","cdkDragEnded"],[1,"slds-grid--vertical","slds-p-vertical--none","slds-tree__item",2,"width","100%",3,"item","customButtonsContainer","config","isDragging","title","click","toggleExpandedChange","dragPositionChange","onItemAdd"],[1,"slds-grid","slds-align-content-center","slds-border--top","slds-m-top--x-small","slds-p-top--x-small"],[1,"slds-button","slds-button--icon","slds-button--icon-border","slds-p-around--xx-small",3,"click"],[3,"icon","size"]],template:function(e,t){1&e&&(n.F$t(),n.TgZ(0,"div",0)(1,"ul",1),n.NdJ("cdkDropListDropped",(function(e){return t.handleDrop(e)})),n.YNc(2,r,2,9,"li",2),n.qZA()(),n.YNc(3,c,3,2,"div",3),n.Hsn(4)),2&e&&(n.xp6(1),n.Q6J("cdkDropListData",t.tree),n.xp6(1),n.Q6J("ngForOf",t.tree)("ngForTrackBy",t.trackByFn),n.xp6(1),n.Q6J("ngIf",t.config.canadd))},dependencies:[l.sg,l.O5,o.Wj,o.Zt,a.J,d.u],styles:[".cdk-drag-animating[_ngcontent-%COMP%]{transition:none}"]})),SystemTree})()},3361:(e,t,s)=>{"use strict";s.d(t,{u:()=>m});var i=s(1180),n=s(2242),o=s(4755),l=s(2656),a=s(8859);function d(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"button",11),n.NdJ("click",(function(t){n.CHM(e);const s=n.oxw();return n.KtG(s.expand(s.item,t))})),n._UZ(1,"system-button-icon",12),n.qZA()}if(2&e){const e=n.oxw();n.Q6J("disabled",e.config.expandall),n.xp6(1),n.Q6J("icon",e.item.systemTreeDefs.expanded?"chevrondown":"chevronright")}}function r(e,t){if(1&e&&n._UZ(0,"system-utility-icon",13),2&e){const e=n.oxw();n.Q6J("icon",e.config.icon||e.item.systemTreeDefs.icon||"record")("addclasses","slds-p-around--xxx-small slds-m-right--xx-small")}}function c(e,t){1&e&&n.GkF(0)}function u(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"div",14)(1,"button",15),n.NdJ("click",(function(){n.CHM(e);const t=n.oxw();return n.KtG(t.addItem(t.item.id,t.item.name))})),n._UZ(2,"system-button-icon",16),n.qZA()()}}const h=function(e){return{$implicit:e}};let m=(()=>{var e;class SystemTreeItem{constructor(){(0,i.Z)(this,"customButtonsContainer",void 0),(0,i.Z)(this,"onItemAdd",new n.vpe),(0,i.Z)(this,"toggleExpandedChange",new n.vpe),(0,i.Z)(this,"dragPositionChange",new n.vpe),(0,i.Z)(this,"item",void 0),(0,i.Z)(this,"config",{}),(0,i.Z)(this,"isDragging",!1),(0,i.Z)(this,"dragPosition","")}addItem(e,t){this.onItemAdd.emit({id:e,name:t})}expand(e,t){this.toggleExpandedChange.emit(e.id),t&&t.stopPropagation&&t.stopPropagation()}setPosition(e){this.dragPosition=e,this.isDragging&&this.dragPositionChange.emit(e?{id:this.item.id,position:e}:null)}}return e=SystemTreeItem,(0,i.Z)(SystemTreeItem,"ɵfac",(function(t){return new(t||e)})),(0,i.Z)(SystemTreeItem,"ɵcmp",n.Xpm({type:e,selectors:[["system-tree-item"]],inputs:{customButtonsContainer:"customButtonsContainer",item:"item",config:"config",isDragging:"isDragging"},outputs:{onItemAdd:"onItemAdd",toggleExpandedChange:"toggleExpandedChange",dragPositionChange:"dragPositionChange"},decls:13,vars:14,consts:[[1,"slds-p-left--x-small",3,"mouseleave"],[2,"height","0.37rem","width","100%",3,"mouseenter"],[1,"slds-grid","slds-grid--align-spread","slds-grid_vertical-align-center",3,"mouseenter"],[1,"slds-grid","slds-grid_vertical-align-center","slds-grow","slds-truncate"],[2,"min-width","16px"],["class","slds-button slds-button_icon slds-m-right--xx-small slds-m-top--none","aria-expanded","true","aria-hidden","true","tabindex","-1",3,"disabled","click",4,"ngIf"],["size","small",3,"icon","addclasses",4,"ngIf"],[1,"slds-truncate"],[1,"slds-tree__item-label","slds-truncate"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["class","slds-m-right--xx-small",4,"ngIf"],["aria-expanded","true","aria-hidden","true","tabindex","-1",1,"slds-button","slds-button_icon","slds-m-right--xx-small","slds-m-top--none",3,"disabled","click"],["size","xx-small",3,"icon"],["size","small",3,"icon","addclasses"],[1,"slds-m-right--xx-small"],[1,"slds-button","slds-button_icon","slds-m-top--none",3,"click"],["icon","add","size","xx-small"]],template:function(e,t){1&e&&(n.TgZ(0,"div",0),n.NdJ("mouseleave",(function(){return t.setPosition(null)})),n.TgZ(1,"div",1),n.NdJ("mouseenter",(function(){return t.setPosition("before")})),n.qZA(),n.TgZ(2,"article",2),n.NdJ("mouseenter",(function(){return t.setPosition("item")})),n.TgZ(3,"div",3)(4,"div",4),n.YNc(5,d,2,2,"button",5),n.YNc(6,r,1,2,"system-utility-icon",6),n.qZA(),n.TgZ(7,"div",7)(8,"span",8),n._uU(9),n.qZA()()(),n.YNc(10,c,1,0,"ng-container",9),n.YNc(11,u,3,0,"div",10),n.qZA(),n.TgZ(12,"div",1),n.NdJ("mouseenter",(function(){return t.setPosition("after")})),n.qZA()()),2&e&&(n.xp6(1),n.Udp("box-shadow",t.isDragging&&"before"==t.dragPosition?"0 -2px":"none"),n.xp6(1),n.Udp("box-shadow",t.isDragging&&"item"==t.dragPosition?"0 0 0 2.5px":"none"),n.xp6(3),n.Q6J("ngIf",t.config.collapsible&&t.item.systemTreeDefs.hasChildren),n.xp6(1),n.Q6J("ngIf",!t.config.collapsible),n.xp6(3),n.Oqu(t.item.name),n.xp6(1),n.Q6J("ngTemplateOutlet",t.customButtonsContainer)("ngTemplateOutletContext",n.VKq(12,h,t.item.id)),n.xp6(1),n.Q6J("ngIf",t.config.canadd&&t.item.systemTreeDefs.isSelected),n.xp6(1),n.Udp("box-shadow",t.isDragging&&"after"==t.dragPosition?"0 2px":"none"))},dependencies:[o.O5,o.tP,l.J,a.r],encapsulation:2})),SystemTreeItem})()},8322:(e,t,s)=>{"use strict";s.d(t,{E:()=>l});var i=s(1180),n=s(2242);const o=["*"];let l=(()=>{var e;class SystemTrendIndicator{constructor(){(0,i.Z)(this,"trend","neutral")}}return e=SystemTrendIndicator,(0,i.Z)(SystemTrendIndicator,"ɵfac",(function(t){return new(t||e)})),(0,i.Z)(SystemTrendIndicator,"ɵcmp",n.Xpm({type:e,selectors:[["system-trend-indicator"]],inputs:{trend:"trend"},ngContentSelectors:o,decls:6,vars:1,consts:[[1,"slds-icon-trend","slds-is-animated"],["viewBox","0 0 16 16","aria-hidden","true"],["d","M.75 8H11M8 4.5L11.5 8 8 11.5",1,"slds-icon-trend__arrow"],["cy","8","cx","8","r","7.375","transform","rotate(-28 8 8) scale(-1 1) translate(-16 0)",1,"slds-icon-trend__circle"],[1,"slds-assistive-text"]],template:function(e,t){1&e&&(n.F$t(),n.TgZ(0,"span",0),n.O4$(),n.TgZ(1,"svg",1),n._UZ(2,"path",2)(3,"circle",3),n.qZA(),n.kcU(),n.TgZ(4,"span",4),n.Hsn(5),n.qZA()()),2&e&&n.uIk("data-slds-trend",t.trend)},encapsulation:2})),SystemTrendIndicator})()},8859:(e,t,s)=>{"use strict";s.d(t,{r:()=>a});var i=s(1180),n=s(2242),o=s(151),l=s(4755);let a=(()=>{var e;class SystemUtilityIcon{constructor(e){(0,i.Z)(this,"cdref",void 0),(0,i.Z)(this,"icon",""),(0,i.Z)(this,"size","small"),(0,i.Z)(this,"addclasses",""),(0,i.Z)(this,"colorclass","slds-icon-text-default"),(0,i.Z)(this,"title",""),(0,i.Z)(this,"click",new n.vpe),this.cdref=e}ngOnChanges(e){this.cdref.detectChanges()}getSvgHRef(){return"./vendor/sldassets/icons/"+this._sprite+"-sprite/svg/symbols.svg#"+this._icon}getIconClass(){return"slds-icon slds-icon_container  slds-icon--"+this._size+" "+this.colorclass+" "+this.addclasses}get _icon(){return this.icon&&this.icon.indexOf(":")>0?this.icon.split(":")[1]:this.icon}get _sprite(){return this.icon&&this.icon.indexOf(":")>0?this.icon.split(":")[0]:"utility"}get _size(){return this.icon&&this.icon.indexOf(":")>0&&this.icon.split(":").length>2?this.icon.split(":")[2]:this.size?this.size:"small"}}return e=SystemUtilityIcon,(0,i.Z)(SystemUtilityIcon,"ɵfac",(function(t){return new(t||e)(n.Y36(n.sBO))})),(0,i.Z)(SystemUtilityIcon,"ɵcmp",n.Xpm({type:e,selectors:[["system-utility-icon"]],inputs:{icon:"icon",size:"size",addclasses:"addclasses",colorclass:"colorclass",title:"title"},outputs:{click:"click"},features:[n.TTD],decls:3,vars:3,consts:[[1,"slds-icon_container","slds-icon-text-error",3,"system-title","click"],["aria-hidden","true",3,"ngClass"]],template:function(e,t){1&e&&(n.TgZ(0,"div",0),n.NdJ("click",(function(e){return t.click.emit(e)})),n.O4$(),n.TgZ(1,"svg",1),n._UZ(2,"use"),n.qZA()()),2&e&&(n.Q6J("system-title",t.title),n.xp6(1),n.Q6J("ngClass",t.getIconClass()),n.xp6(1),n.uIk("href",t.getSvgHRef(),null,"xlink"))},dependencies:[o.S,l.mk],encapsulation:2,changeDetection:0})),SystemUtilityIcon})()},4036:(e,t,s)=>{"use strict";s.d(t,{N:()=>o});var i=s(1180),n=s(2242);let o=(()=>{var e;class SystemModuleCustomPipe{transform(e,t){let s=[];for(let i of e)i.module==t&&"custom"==i.type&&s.push(i);return s}}return e=SystemModuleCustomPipe,(0,i.Z)(SystemModuleCustomPipe,"ɵfac",(function(t){return new(t||e)})),(0,i.Z)(SystemModuleCustomPipe,"ɵpipe",n.Yjl({name:"systemmodulecustompipe",type:e,pure:!1})),SystemModuleCustomPipe})()},7302:(e,t,s)=>{"use strict";s.d(t,{m:()=>o});var i=s(1180),n=s(2242);let o=(()=>{var e;class SystemModuleGlobalPipe{transform(e,t){let s=[];for(let i of e)i.module==t&&"global"==i.type&&s.push(i);return s}}return e=SystemModuleGlobalPipe,(0,i.Z)(SystemModuleGlobalPipe,"ɵfac",(function(t){return new(t||e)})),(0,i.Z)(SystemModuleGlobalPipe,"ɵpipe",n.Yjl({name:"systemmoduleglobalpipe",type:e,pure:!0})),SystemModuleGlobalPipe})()},5572:(e,t,s)=>{"use strict";s.d(t,{u:()=>o});var i=s(1180),n=s(2242);let o=(()=>{var e;class SystemStripHtmlTagsPipe{transform(e){return e.replace(/<.*?>/g,"")}}return e=SystemStripHtmlTagsPipe,(0,i.Z)(SystemStripHtmlTagsPipe,"ɵfac",(function(t){return new(t||e)})),(0,i.Z)(SystemStripHtmlTagsPipe,"ɵpipe",n.Yjl({name:"systemstriphtmltagspipe",type:e,pure:!1})),SystemStripHtmlTagsPipe})()},4817:(e,t,s)=>{"use strict";s.d(t,{L:()=>a});var i=s(1180),n=s(4755),o=s(2242),l=s(4505);let a=(()=>{var e;class systemrichtextservice{constructor(e,t){(0,i.Z)(this,"_document",void 0),(0,i.Z)(this,"backend",void 0),(0,i.Z)(this,"savedSelection",void 0),(0,i.Z)(this,"selectedText",void 0),(0,i.Z)(this,"selectedHtml",void 0),(0,i.Z)(this,"uploadUrl",void 0),(0,i.Z)(this,"dummyHtmlElement",void 0),(0,i.Z)(this,"editorContainer",void 0),(0,i.Z)(this,"savedSelectionParentElement",void 0),(0,i.Z)(this,"marketingActions",null),this._document=e,this.backend=t,this.dummyHtmlElement=document.createElement("div")}executeCommand(e){"h1"!==e&&"h2"!==e&&"h3"!==e&&"h4"!==e&&"h5"!==e&&"h6"!==e&&"p"!==e&&"pre"!==e&&"div"!==e||this._document.execCommand("formatBlock",!1,e),this._document.execCommand(e,!1,null)}insertColor(e,t){this.restoreSelection()&&("textColor"===t?this._document.execCommand("foreColor",!1,e):this._document.execCommand("hiliteColor",!1,e))}setFontName(e){this._document.execCommand("fontName",!1,e)}setFontSize(e){this._document.execCommand("fontSize",!1,e)}insertHtml(e){if(!this._document.execCommand("insertHTML",!1,e))throw new Error("Unable to perform the operation")}saveSelection(){if(window.getSelection){const e=window.getSelection();if(this.savedSelectionParentElement=e.anchorNode.parentElement,e.getRangeAt&&e.rangeCount){this.savedSelection=e.getRangeAt(0),this.selectedText=e.toString();let t=document.createElement("div");t.appendChild(this.savedSelection.cloneContents()),this.selectedHtml=t.innerHTML}}else this._document.getSelection&&this._document.createRange?this.savedSelection=document.createRange():this.savedSelection=null}restoreSelection(){if(!this.savedSelection)return!1;if(window.getSelection){const e=window.getSelection();return e.removeAllRanges(),e.addRange(this.savedSelection),!0}return!!this._document.getSelection||void 0}checkSelection(){if(0===this.savedSelection.toString().length)throw new Error("No Selection Made");return!0}insertImage(e,t){const s=document.createElement("IMG");s.src=e,this.insertElement(s)}insertAnchor(e,t,s={}){const i=document.createElement("A");i.href=e,this.addDataAttributes(i,s),i.innerHTML=t,this.insertElement(i)}addDataAttributes(e,t){for(let s in t)e.dataset[s]=t[s]}insertElement(e){if(this.savedSelection){this.resetRangeBoundaries(this.editorContainer);let t=this.getRangeCurrentTarget(this.savedSelection.startContainer,this.editorContainer);const s=this.savedSelection.collapsed&&0==this.savedSelection.startOffset;let i;this.editorContainer.isEqualNode(t)?(i=s?this.editorContainer.firstChild:null,this.insertElementForNode(e,this.editorContainer,i)):(i=s?t:t.nextSibling,this.insertElementForNode(e,t.parentElement,i)),this.clearSelection()}else this.insertElementForNode(e,this.editorContainer)}clearSelection(){this.savedSelection=void 0,window.getSelection?window.getSelection().removeAllRanges():document.getSelection&&document.getSelection().removeAllRanges()}resetRangeBoundaries(e){this.savedSelection&&(e.contains(this.savedSelection.startContainer)||this.savedSelection.setStart(e,0),e.contains(this.savedSelection.endContainer)||this.savedSelection.setEnd(e,0))}insertElementForNode(e,t,s){this.savedSelection&&this.savedSelection.deleteContents(),s?t.insertBefore(e,s):t.appendChild(e)}getRangeCurrentTarget(e,t){let s=e;if(t.isEqualNode(s))return t;for(;1!==s.nodeType;)s=s.parentElement;return s}createCustomClass(e){const t=e.tag?e.tag:"span",s="<"+t+' class="'+e.class+'">'+this.selectedText+"</"+t+">";this.insertHtml(s)}decodeHTMLEntities(e){return this.dummyHtmlElement.innerHTML=e,this.dummyHtmlElement.innerText}encodeHTMLEntities(e){return this.dummyHtmlElement.innerText=e,this.dummyHtmlElement.innerHTML}loadMarketingActions(e=!1){!e&&_.isArray(this.marketingActions)||this.backend.getRequest("module/MarketingActions/all/actions").subscribe((e=>{this.marketingActions=e.actions}))}}return e=systemrichtextservice,(0,i.Z)(systemrichtextservice,"ɵfac",(function(t){return new(t||e)(o.LFG(n.K0),o.LFG(l.y))})),(0,i.Z)(systemrichtextservice,"ɵprov",o.Yz7({token:e,factory:e.ɵfac})),systemrichtextservice})()},3735:(e,t,s)=>{"use strict";s.r(t),s.d(t,{SystemComponents:()=>zn});var i=s(1180),n=s(3418),o=s(4755),l=s(5030),a=s(4357),d=s(4036),r=s(7302),c=s(5572),u=s(6010),h=s(2242),m=s(5329),g=s(4154),p=s(3278),f=s(2656),b=s(3463),v=s(9621),Z=s(3499),y=s(5767),x=s(1916);function w(e,t){if(1&e&&(h.TgZ(0,"div",19),h._UZ(1,"system-label",20),h.qZA()),2&e){const e=h.oxw();h.Udp("visibility",e.pausing?"hidden":"visible")}}function T(e,t){if(1&e&&h._UZ(0,"div",21),2&e){const e=h.oxw();h.Q6J("innerHTML",e.theTextHtml,h.oJD)}}function C(e,t){if(1&e&&(h.TgZ(0,"option",22),h._uU(1),h.qZA()),2&e){const e=t.$implicit,s=t.index,i=h.oxw();h.Q6J("value",e.id)("selected",s==i.selectedLanguage),h.xp6(1),h.Oqu(e.name)}}function A(e,t){1&e&&(h.ynx(0),h._UZ(1,"system-button-icon",16)(2,"system-label",23),h.BQk()),2&e&&(h.xp6(1),h.Q6J("icon","pause")("position","left"))}function k(e,t){1&e&&(h.ynx(0),h._UZ(1,"system-button-icon",16)(2,"system-label",24),h.BQk()),2&e&&(h.xp6(1),h.Q6J("icon","record")("position","left"))}let L=(()=>{var e;class SpeechRecognition{constructor(e,t,s,n,o){(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"toast",void 0),(0,i.Z)(this,"changeDetRef",void 0),(0,i.Z)(this,"applicationRef",void 0),(0,i.Z)(this,"self",void 0),(0,i.Z)(this,"recognition",void 0),(0,i.Z)(this,"start_timestamp",void 0),(0,i.Z)(this,"textfield",void 0),(0,i.Z)(this,"part1fromField",void 0),(0,i.Z)(this,"part2fromField",void 0),(0,i.Z)(this,"theText",""),(0,i.Z)(this,"theTextNewest",""),(0,i.Z)(this,"theTextHtml",""),(0,i.Z)(this,"dirty",!1),(0,i.Z)(this,"errorOccurred",!1),(0,i.Z)(this,"toRestart",!1),(0,i.Z)(this,"recognizing",!1),(0,i.Z)(this,"cancelling",!1),(0,i.Z)(this,"stopping",!1),(0,i.Z)(this,"pausing",!1),(0,i.Z)(this,"working",!1),(0,i.Z)(this,"languages",[{id:"de_DE",name:"Deutsch"},{id:"en_US",name:"English"}]),(0,i.Z)(this,"selectedLanguage",0),this.language=e,this.metadata=t,this.toast=s,this.changeDetRef=n,this.applicationRef=o}ngOnInit(){window.SpeechRecognition||window.webkitSpeechRecognition||(this.toast.sendToast("Sorry, speech recognition is not possible with your web browser.","error"),this.self.destroy()),"de_DE"===this.language.currentlanguage?this.selectedLanguage=0:this.selectedLanguage=1,this.recognition=new(window.SpeechRecognition||window.webkitSpeechRecognition),this.recognition.continuous=!0,this.recognition.lang=this.languages[this.selectedLanguage].id.replace("_","-"),this.recognition.interimResults=!0,this.recognition.maxAlternatives=1,this.part1fromField=this.textfield.element.nativeElement.value.substring(0,this.textfield.element.nativeElement.selectionStart),this.part2fromField=this.textfield.element.nativeElement.value.substring(this.textfield.element.nativeElement.selectionEnd),this.recognition.onresult=e=>{this.working=!0,this.changeDetRef.detectChanges();let t="",s=!0;for(let i of e.results)i.isFinal||(s=!1),t+=i[0].transcript,this.theTextNewest=t;s&&(this.working=!1,this.changeDetRef.detectChanges()),!this.dirty&&this.theTextNewest&&(this.dirty=!0),this.dirty&&(this.theTextHtml="<p>"+this.linebreaks2html(this.capitalize(this.theText+" "+this.theTextNewest))+"</p>",this.changeDetRef.detectChanges())},this.recognition.onerror=e=>{switch(e.error){case"network":this.errorOccurred=!0,this.sendErrorToast(this.language.getLabel("MSG_NO_NETWORK"),"warning");break;case"no-speech":return void(this.stopping||this.recognition.stop());case"audio-capture":this.errorOccurred=!0,this.sendErrorToast(this.language.getLabel("MSG_NO_MICROPHONE"));break;case"not-allowed":this.errorOccurred=!0,e.timeStamp-this.start_timestamp<100?this.sendErrorToast(this.language.getLabel("LBL_BLOCKED")):this.sendErrorToast(this.language.getLabel("LBL_DENIED"))}this.applicationRef.tick()},this.recognition.onend=e=>{this.working=!1,this.cancelling?this.self.destroy():!this.pausing||this.stopping?this.acceptAndClose():this.applyText()},this.start()}doRestart(){this.toRestart=!0,this.recognition.stop()}applyText(){this.theText+=""===this.theText?this.capitalize(this.theTextNewest):this.theTextNewest,this.theTextNewest=""}acceptAndClose(){if(this.applyText(),this.errorOccurred)""===this.theText&&""===this.theTextNewest&&this.self.destroy();else{if(!this.stopping)return this.recognition.start(),void(this.toRestart&&(this.toRestart=!1));this.recognizing=!1,this.textfield.element.nativeElement.value=this.part1fromField+this.theText+this.part2fromField,this.textfield.element.nativeElement.dispatchEvent(new Event("change")),this.self.destroy()}}start(e=null){this.recognizing||(this.recognizing=!0,this.recognition.start(),e&&(this.start_timestamp=e.timeStamp))}buttonAcceptClose(){this.stopping=!0,this.pausing?this.acceptAndClose():this.recognition.stop()}buttonPause(){this.pausing=!this.pausing,this.changeDetRef.detectChanges(),this.applicationRef.tick(),this.pausing&&this.recognition.stop(),!this.pausing&&this.recognition.start()}buttonCancel(){this.cancelling=!0,this.pausing&&this.recognition.start(),this.recognition.abort(),this.self.destroy()}changeLang(e){this.selectedLanguage=e.target.selectedIndex,this.recognition.lang=this.languages[this.selectedLanguage].id,this.doRestart()}capitalize(e){return 0===this.part1fromField.length?e.replace(/\S/,(e=>e.toUpperCase())):e}linebreaks2html(e){return e.replace(/\n\n/g,"</p><p>").replace(/\n/g,"<br>")}sendErrorToast(e,t="error"){this.toast.sendToast(this.language.getLabel("ERR_SPEECH_RECOGNITION")+": "+e+".",t,"","error"!==t)}}return e=SpeechRecognition,(0,i.Z)(SpeechRecognition,"ɵfac",(function(t){return new(t||e)(h.Y36(m.d),h.Y36(g.Pu),h.Y36(p.A),h.Y36(h.sBO),h.Y36(h.z2F))})),(0,i.Z)(SpeechRecognition,"ɵcmp",h.Xpm({type:e,selectors:[["ng-component"]],decls:24,vars:9,consts:[["size","large"],[3,"close"],["label","LBL_SPEECH_RECOGNITION"],[2,"min-height","300px"],["class","slds-text-align_center slds-m-vertical--x-large","style","margin-bottom:3rem",3,"visibility",4,"ngIf"],["class","slds-text-longform",3,"innerHTML",4,"ngIf"],[1,"slds-grid","slds-grid_align-spread"],[1,"slds-col"],[1,"slds-select_container"],[1,"slds-select",3,"change"],[3,"value","selected",4,"ngFor","ngForOf"],[1,"slds-button","slds-button--neutral",3,"click"],["label","LBL_CANCEL"],[1,"slds-button","slds-button--neutral",3,"disabled","click"],[4,"ngIf"],[1,"slds-button","slds-button--brand",3,"disabled","click"],[3,"icon","position"],["label","LBL_ACCEPT"],["label","LBL_CLOSE"],[1,"slds-text-align_center","slds-m-vertical--x-large",2,"margin-bottom","3rem"],["label","LBL_WAITING_START_SPEAKING"],[1,"slds-text-longform",3,"innerHTML"],[3,"value","selected"],["label","LBL_PAUSE"],["label","LBL_CONTINUE"]],template:function(e,t){1&e&&(h.TgZ(0,"system-modal",0)(1,"system-modal-header",1),h.NdJ("close",(function(){return t.buttonCancel()})),h._UZ(2,"system-label",2),h.qZA(),h.TgZ(3,"system-modal-content")(4,"div",3),h.YNc(5,w,2,2,"div",4),h.YNc(6,T,1,1,"div",5),h.qZA()(),h.TgZ(7,"system-modal-footer")(8,"div",6)(9,"div",7)(10,"div",8)(11,"select",9),h.NdJ("change",(function(e){return t.changeLang(e)})),h.YNc(12,C,2,3,"option",10),h.qZA()()(),h.TgZ(13,"div",7)(14,"button",11),h.NdJ("click",(function(){return t.buttonCancel()})),h._UZ(15,"system-label",12),h.qZA(),h.TgZ(16,"button",13),h.NdJ("click",(function(){return t.buttonPause()})),h.YNc(17,A,3,2,"ng-container",14),h.YNc(18,k,3,2,"ng-container",14),h.qZA(),h.TgZ(19,"button",15),h.NdJ("click",(function(){return t.buttonAcceptClose()})),h._UZ(20,"system-button-icon",16)(21,"system-label",17),h._uU(22," & "),h._UZ(23,"system-label",18),h.qZA()()()()()),2&e&&(h.xp6(5),h.Q6J("ngIf",!t.dirty),h.xp6(1),h.Q6J("ngIf",t.dirty),h.xp6(6),h.Q6J("ngForOf",t.languages),h.xp6(4),h.Q6J("disabled",t.cancelling),h.xp6(1),h.Q6J("ngIf",!t.pausing),h.xp6(1),h.Q6J("ngIf",t.pausing),h.xp6(1),h.Q6J("disabled",!t.dirty||t.cancelling),h.xp6(1),h.Q6J("icon","stop")("position","left"))},dependencies:[o.sg,o.O5,l.YN,l.Kr,f.J,b._,v.j,Z.x,y.p,x.y],encapsulation:2})),SpeechRecognition})();var I=s(4994),M=s(4610);const S=function(e){return{"slds-is-open":e}};let J=(()=>{var e;class SystemButtonGroup{constructor(e){(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"items",[]),(0,i.Z)(this,"action",new h.vpe),(0,i.Z)(this,"isopen",!1),this.metadata=e}toggleOpen(){this.isopen=!this.isopen}}return e=SystemButtonGroup,(0,i.Z)(SystemButtonGroup,"ɵfac",(function(t){return new(t||e)(h.Y36(g.Pu))})),(0,i.Z)(SystemButtonGroup,"ɵcmp",h.Xpm({type:e,selectors:[["system-button-group"]],inputs:{items:"items"},outputs:{action:"action"},decls:20,vars:3,consts:[["role","group",1,"slds-button-group"],[1,"slds-button","slds-button_neutral"],[1,"slds-dropdown-trigger","slds-dropdown-trigger_click","slds-button_last",3,"ngClass"],[1,"slds-button","slds-button_icon","slds-button_icon-border-filled",3,"click"],["icon","down"],[1,"slds-dropdown","slds-dropdown_right","slds-dropdown_actions"],["role","menu",1,"slds-dropdown__list"],["role","presentation",1,"slds-dropdown__item"],["href","javascript:void(0);","role","menuitem","tabindex","0"],["title","Overflow Item One",1,"slds-truncate"],["href","javascript:void(0);","role","menuitem","tabindex","-1"],["title","Overflow Item Two",1,"slds-truncate"],["title","Overflow Item Three",1,"slds-truncate"]],template:function(e,t){1&e&&(h.TgZ(0,"div",0)(1,"button",1),h._uU(2,"Refresh"),h.qZA(),h.TgZ(3,"div",2)(4,"button",3),h.NdJ("click",(function(){return t.toggleOpen()})),h._UZ(5,"system-button-icon",4),h.qZA(),h.TgZ(6,"div",5)(7,"ul",6)(8,"li",7)(9,"a",8)(10,"span",9),h._uU(11,"Overflow Item One"),h.qZA()()(),h.TgZ(12,"li",7)(13,"a",10)(14,"span",11),h._uU(15,"Overflow Item Two"),h.qZA()()(),h.TgZ(16,"li",7)(17,"a",10)(18,"span",12),h._uU(19,"Overflow Item Three"),h.qZA()()()()()()()),2&e&&(h.xp6(3),h.Q6J("ngClass",h.VKq(1,S,t.isopen)))},dependencies:[o.mk,f.J],encapsulation:2})),SystemButtonGroup})();var O=s(5399),N=s(2400),F=s(8807);const q=["*"];let E=(()=>{var e;class SystemCardFooter{}return e=SystemCardFooter,(0,i.Z)(SystemCardFooter,"ɵfac",(function(t){return new(t||e)})),(0,i.Z)(SystemCardFooter,"ɵcmp",h.Xpm({type:e,selectors:[["system-card-footer"]],ngContentSelectors:q,decls:2,vars:0,consts:[[1,"slds-card__footer"]],template:function(e,t){1&e&&(h.F$t(),h.TgZ(0,"footer",0),h.Hsn(1),h.qZA())},encapsulation:2})),SystemCardFooter})();var Y=s(701),D=s(9503),Q=s(8658),U=s(7514),R=s(528),j=s(1553),B=s(7516),G=s(51),P=s(6951),H=s(7579);let z=(()=>{var e;class SystemConfirmDialog{constructor(e){(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"self",{}),(0,i.Z)(this,"answer",null),(0,i.Z)(this,"answerSubject",null),(0,i.Z)(this,"title","title"),(0,i.Z)(this,"message","message"),this.language=e,this.answerSubject=new H.x,this.answer=this.answerSubject.asObservable()}ok(){this.answerSubject.next(!0),this.answerSubject.complete(),this.self.destroy()}cancel(){this.answerSubject.next(!1),this.answerSubject.complete(),this.self.destroy()}}return e=SystemConfirmDialog,(0,i.Z)(SystemConfirmDialog,"ɵfac",(function(t){return new(t||e)(h.Y36(m.d))})),(0,i.Z)(SystemConfirmDialog,"ɵcmp",h.Xpm({type:e,selectors:[["system-confirm-dialog"]],decls:13,vars:2,consts:[[1,"slds-backdrop","slds-backdrop--open"],["role","dialog","tabindex","-1",1,"slds-modal","slds-fade-in-open"],[1,"slds-modal__container"],[1,"slds-modal__header"],[1,"slds-text-heading--medium"],[1,"slds-modal__content","slds-p-around--medium"],[1,"slds-modal__footer"],[1,"slds-button","slds-button--neutral",3,"click"],["label","LBL_CANCEL"],[1,"slds-button","slds-button--brand",3,"click"],["label","LBL_OK"]],template:function(e,t){1&e&&(h._UZ(0,"div",0),h.TgZ(1,"div",1)(2,"div",2)(3,"div",3)(4,"h2",4),h._uU(5),h.qZA()(),h.TgZ(6,"div",5),h._uU(7),h.qZA(),h.TgZ(8,"div",6)(9,"button",7),h.NdJ("click",(function(){return t.cancel()})),h._UZ(10,"system-label",8),h.qZA(),h.TgZ(11,"button",9),h.NdJ("click",(function(){return t.ok()})),h._UZ(12,"system-label",10),h.qZA()()()()),2&e&&(h.xp6(5),h.Oqu(t.title),h.xp6(2),h.hij(" ",t.message," "))},dependencies:[b._],styles:["[_nghost-%COMP%]{position:relative;z-index:9100}"]})),SystemConfirmDialog})();var V=s(34),K=s(7060),$=s(6538),X=s(4270),W=s(2995),ee=s(5920),te=s(3348);const se=["componentcontainer"];let ie=(()=>{var e;class SystemDynamicRouteContainer{constructor(e,t,s,n){(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"session",void 0),(0,i.Z)(this,"router",void 0),(0,i.Z)(this,"route",void 0),(0,i.Z)(this,"componentcontainer",void 0),(0,i.Z)(this,"routercomponent",null),this.metadata=e,this.session=t,this.router=s,this.route=n,this.session&&this.session.authData.sessionId||this.router.navigate(["/login"])}ngAfterViewInit(){if(!this.routercomponent){let e=this.metadata.getRouteComponent(this.route.snapshot.routeConfig.path);this.metadata.addComponent(e,this.componentcontainer).subscribe((e=>{this.routercomponent=e}))}}}return e=SystemDynamicRouteContainer,(0,i.Z)(SystemDynamicRouteContainer,"ɵfac",(function(t){return new(t||e)(h.Y36(g.Pu),h.Y36(ee.n),h.Y36(te.F0),h.Y36(te.gz))})),(0,i.Z)(SystemDynamicRouteContainer,"ɵcmp",h.Xpm({type:e,selectors:[["system-dynamicroute-container"]],viewQuery:function(e,t){if(1&e&&h.Gf(se,7,h.s_b),2&e){let e;h.iGM(e=h.CRH())&&(t.componentcontainer=e.first)}},decls:2,vars:0,consts:[["componentcontainer",""]],template:function(e,t){1&e&&h._UZ(0,"div",null,0)},encapsulation:2})),SystemDynamicRouteContainer})();var ne=s(512),oe=s(5659),le=s(3845),ae=s(4561),de=s(7693),re=s(4567),ce=s(2646),ue=s(4730),he=s(9016),me=s(9574),ge=s(4664);function pe(e,t){1&e&&h._UZ(0,"system-spinner")}function fe(e,t){1&e&&(h.TgZ(0,"system-illustration-page-not-available"),h._UZ(1,"system-label",9),h.qZA())}function be(e,t){if(1&e&&(h.TgZ(0,"div",7),h.YNc(1,pe,1,0,"system-spinner",8),h.YNc(2,fe,2,0,"system-illustration-page-not-available",8),h.qZA()),2&e){const e=h.oxw();h.xp6(1),h.Q6J("ngIf",!e.loadingerror),h.xp6(1),h.Q6J("ngIf",e.loadingerror)}}function ve(e,t){if(1&e&&(h.TgZ(0,"div",10),h._UZ(1,"img",11),h.qZA()),2&e){const e=h.oxw();h.xp6(1),h.Q6J("src",e.imgsrc,h.LSH)}}let Ze=(()=>{var e;class SystemImagePreviewModal{constructor(e){(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"self",{}),(0,i.Z)(this,"imgsrc",""),(0,i.Z)(this,"imgtype",""),(0,i.Z)(this,"imgname",""),(0,i.Z)(this,"loadingerror",!1),this.language=e}closeModal(){this.self.destroy()}download(){let e=this.b64toBlob(this.imgsrc.replace("data:"+this.imgtype+";base64,",""),this.imgtype),t=URL.createObjectURL(e),s=document.createElement("a");document.body.appendChild(s),s.href=t,s.download=this.imgname,s.click(),s.remove()}b64toBlob(e,t="",s=512){let i=atob(e),n=[];for(let e=0;e<i.length;e+=s){let t=i.slice(e,e+s),o=new Array(t.length);for(let e=0;e<t.length;e++)o[e]=t.charCodeAt(e);let l=new Uint8Array(o);n.push(l)}return new Blob(n,{type:t})}}return e=SystemImagePreviewModal,(0,i.Z)(SystemImagePreviewModal,"ɵfac",(function(t){return new(t||e)(h.Y36(m.d))})),(0,i.Z)(SystemImagePreviewModal,"ɵcmp",h.Xpm({type:e,selectors:[["ng-component"]],inputs:{imgsrc:"imgsrc",imgtype:"imgtype",imgname:"imgname",loadingerror:"loadingerror"},decls:9,vars:3,consts:[["size","large"],[3,"close"],["margin","none"],["style","height: 50vh;","class","slds-align--absolute-center",4,"ngIf"],["class","slds-text-align--center","style","height:100%",4,"ngIf"],[1,"slds-button","slds-button--icon","slds-button--icon-border",3,"click"],["icon","download","size","small"],[1,"slds-align--absolute-center",2,"height","50vh"],[4,"ngIf"],["label","MSG_ERROR_LOADING_FILE"],[1,"slds-text-align--center",2,"height","100%"],[2,"max-height","100%","max-width","100%",3,"src"]],template:function(e,t){1&e&&(h.TgZ(0,"system-modal",0)(1,"system-modal-header",1),h.NdJ("close",(function(){return t.closeModal()})),h._uU(2),h.qZA(),h.TgZ(3,"system-modal-content",2),h.YNc(4,be,3,2,"div",3),h.YNc(5,ve,2,1,"div",4),h.qZA(),h.TgZ(6,"system-modal-footer")(7,"button",5),h.NdJ("click",(function(){return t.download()})),h._UZ(8,"system-button-icon",6),h.qZA()()()),2&e&&(h.xp6(2),h.Oqu(t.imgname),h.xp6(2),h.Q6J("ngIf",!t.imgsrc),h.xp6(1),h.Q6J("ngIf",t.imgsrc))},dependencies:[o.O5,f.J,me.k,b._,v.j,Z.x,y.p,x.y,ge.W],encapsulation:2})),SystemImagePreviewModal})();var _e=s(3772),ye=s(5147),xe=s(1555),we=s(638),Te=s(4728),Ce=s(4665),Ae=s(9422),ke=s(6625);function Le(e,t){if(1&e&&(h.TgZ(0,"option",8),h._uU(1),h.qZA()),2&e){const e=t.$implicit;h.Q6J("value","+"+e),h.xp6(1),h.hij("+",e,"")}}function Ie(e,t){if(1&e){const e=h.EpF();h.TgZ(0,"div",3)(1,"select",4,5),h.NdJ("ngModelChange",(function(t){h.CHM(e);const s=h.oxw();return h.KtG(s.value=t)})),h._UZ(3,"option",6),h.YNc(4,Le,2,2,"option",7),h.qZA()()}if(2&e){const e=h.oxw();h.xp6(1),h.Q6J("ngModel",e.value),h.xp6(3),h.Q6J("ngForOf",e.countrycodes)}}function Me(e,t){if(1&e){const e=h.EpF();h.TgZ(0,"div",9)(1,"input",10),h.NdJ("ngModelChange",(function(t){h.CHM(e);const s=h.oxw();return h.KtG(s.value=t)})),h.qZA()()}if(2&e){const e=h.oxw();h.xp6(1),h.Q6J("ngModel",e.value)}}let Se=(()=>{var e;class SystemInputCountryCode{constructor(e,t,s){(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"configuration",void 0),(0,i.Z)(this,"countrycodes",[]),(0,i.Z)(this,"onChange",void 0),(0,i.Z)(this,"onTouched",void 0),(0,i.Z)(this,"_value",void 0),(0,i.Z)(this,"strict",!1),this.metadata=e,this.language=t,this.configuration=s,"strict"==this.configuration.data.backendextensions.spiceui.config.format&&(this.strict=!0)}get value(){return this._value}set value(e){e!=this._value&&(this._value=e,this.onChange(e))}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}writeValue(e){this._value=e}ngOnInit(){this.strict&&this.getCountries()}getCountries(){this.countrycodes=[];let e=this.configuration.getData("countries");for(let t of e.countries)!t.e164||this.countrycodes.indexOf(t.e164)>=0||this.countrycodes.push(t.e164);this.countrycodes.sort()}}return e=SystemInputCountryCode,(0,i.Z)(SystemInputCountryCode,"ɵfac",(function(t){return new(t||e)(h.Y36(g.Pu),h.Y36(m.d),h.Y36(ke.C))})),(0,i.Z)(SystemInputCountryCode,"ɵcmp",h.Xpm({type:e,selectors:[["system-input-country-code"]],features:[h._Bn([{provide:l.JU,useExisting:(0,h.Gpc)((()=>e)),multi:!0}])],decls:4,vars:2,consts:[[1,"slds-form-element"],["class","slds-select_container",4,"ngIf","ngIfElse"],["countryinput",""],[1,"slds-select_container"],[1,"slds-select",3,"ngModel","ngModelChange"],["focus",""],["value",""],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[1,"slds-form-element__control"],["type","text",1,"slds-input",3,"ngModel","ngModelChange"]],template:function(e,t){if(1&e&&(h.TgZ(0,"div",0),h.YNc(1,Ie,5,2,"div",1),h.YNc(2,Me,2,1,"ng-template",null,2,h.W1O),h.qZA()),2&e){const e=h.MAs(3);h.xp6(1),h.Q6J("ngIf",t.strict)("ngIfElse",e)}},dependencies:[o.sg,o.O5,l.YN,l.Kr,l.Fj,l.EJ,l.JJ,l.On],encapsulation:2})),SystemInputCountryCode})();var Je=s(4114),Oe=s(6822),Ne=s(7758),Fe=s(6659),qe=s(3497),Ee=s(6898),Ye=s(3673),De=s(4375),Qe=s(5621),Ue=s(7919),Re=s(9901),je=s(6271),Be=s(4846),Ge=s(3805),Pe=s(1078);function He(e,t){if(1&e&&(h.TgZ(0,"option",5),h._uU(1),h.qZA()),2&e){const e=t.$implicit;h.Q6J("value",e.taxcategoryid),h.xp6(1),h.AsE("",e.taxcategoryname," (",e.taxcategoryid,")")}}let ze=(()=>{var e;class SystemInputTaxCode{constructor(e){(0,i.Z)(this,"configuration",void 0),(0,i.Z)(this,"disabled",!1),(0,i.Z)(this,"taxcodes",[]),(0,i.Z)(this,"onChange",void 0),(0,i.Z)(this,"onTouched",void 0),(0,i.Z)(this,"_value",void 0),this.configuration=e}get value(){return this._value}set value(e){e!=this._value&&(this._value=e,this.onChange(e))}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}writeValue(e){this._value=e}ngOnInit(){this.getTaxCodes()}getTaxCodes(){this.taxcodes=this.configuration.getData("salesdoctaxcategories")}}return e=SystemInputTaxCode,(0,i.Z)(SystemInputTaxCode,"ɵfac",(function(t){return new(t||e)(h.Y36(ke.C))})),(0,i.Z)(SystemInputTaxCode,"ɵcmp",h.Xpm({type:e,selectors:[["system-input-taxcode"]],inputs:{disabled:"disabled"},features:[h._Bn([{provide:l.JU,useExisting:(0,h.Gpc)((()=>e)),multi:!0}])],decls:5,vars:3,consts:[[1,"slds-form-element"],[1,"slds-select_container"],[1,"slds-select",3,"disabled","ngModel","ngModelChange"],["value",""],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(e,t){1&e&&(h.TgZ(0,"div",0)(1,"div",1)(2,"select",2),h.NdJ("ngModelChange",(function(e){return t.value=e})),h._UZ(3,"option",3),h.YNc(4,He,2,3,"option",4),h.qZA()()()),2&e&&(h.xp6(2),h.Q6J("disabled",0==t.taxcodes.length||t.disabled)("ngModel",t.value),h.xp6(2),h.Q6J("ngForOf",t.taxcodes))},dependencies:[o.sg,l.YN,l.Kr,l.EJ,l.JJ,l.On],encapsulation:2})),SystemInputTaxCode})();var Ve=s(2006),Ke=s(1e3),$e=s(8973);let Xe=(()=>{var e;class SystemInstallerComponent{}return e=SystemInstallerComponent,(0,i.Z)(SystemInstallerComponent,"ɵfac",(function(t){return new(t||e)})),(0,i.Z)(SystemInstallerComponent,"ɵcmp",h.Xpm({type:e,selectors:[["system-installer-component"]],decls:1,vars:1,consts:[[3,"component"]],template:function(e,t){1&e&&h._UZ(0,"system-dynamic-component",0),2&e&&h.Q6J("component","SpiceInstaller")},dependencies:[W.T],encapsulation:2})),SystemInstallerComponent})();var We=s(4505),et=s(6163),tt=s(4044),st=s(4021),it=s(151);function nt(e,t){if(1&e){const e=h.EpF();h.TgZ(0,"system-input-radio",16),h.NdJ("ngModelChange",(function(t){h.CHM(e);const s=h.oxw(2);return h.KtG(s.currentScope=t)}))("ngModelChange",(function(){h.CHM(e);const t=h.oxw(2);return h.KtG(t.setUntranslatedLanguages())})),h._uU(1),h.qZA()}if(2&e){const e=t.$implicit,s=h.oxw(2);h.Q6J("ngModel",s.currentScope)("value",e)("disabled","global"==e&&"custom"==s.labelData.scope),h.xp6(1),h.hij(" ",e," ")}}function ot(e,t){if(1&e&&(h.TgZ(0,"div",14),h.YNc(1,nt,2,4,"system-input-radio",15),h.qZA()),2&e){const e=h.oxw();h.xp6(1),h.Q6J("ngForOf",e.scopes)}}function lt(e,t){if(1&e){const e=h.EpF();h.TgZ(0,"article")(1,"div",18)(2,"div",19)(3,"h2"),h._uU(4),h.qZA()(),h.TgZ(5,"div",20)(6,"div",21)(7,"label"),h._UZ(8,"system-label",22),h._uU(9,": "),h.qZA(),h.TgZ(10,"input",23),h.NdJ("ngModelChange",(function(t){const s=h.CHM(e).$implicit;return h.KtG(s.translation_short=t)})),h.qZA()(),h.TgZ(11,"div",21)(12,"label")(13,"abbr",24),h._uU(14,"*"),h.qZA(),h._UZ(15,"system-label",25),h._uU(16,": "),h.qZA(),h.TgZ(17,"input",26),h.NdJ("ngModelChange",(function(t){const s=h.CHM(e).$implicit;return h.KtG(s.translation_default=t)})),h.qZA()(),h.TgZ(18,"div",21)(19,"label"),h._UZ(20,"system-label",27),h._uU(21,": "),h.qZA(),h.TgZ(22,"textarea",28),h.NdJ("ngModelChange",(function(t){const s=h.CHM(e).$implicit;return h.KtG(s.translation_long=t)})),h.qZA()()()()()}if(2&e){const e=t.$implicit,s=h.oxw(2);h.xp6(4),h.Oqu(s.languagesNames[e.syslanguage]),h.xp6(6),h.Q6J("ngModel",e.translation_short),h.xp6(7),h.Q6J("ngModel",e.translation_default),h.xp6(5),h.Q6J("ngModel",e.translation_long)}}function at(e,t){if(1&e&&(h.ynx(0),h.YNc(1,lt,23,4,"article",17),h.BQk()),2&e){const e=h.oxw();h.xp6(1),h.Q6J("ngForOf",e.translations)("ngForTrackBy",e.trackByFn)}}function dt(e,t){if(1&e&&(h.TgZ(0,"option",37),h._uU(1),h.qZA()),2&e){const e=t.$implicit;h.s9C("value",e.language),h.xp6(1),h.hij(" ",e.text," ")}}function rt(e,t){if(1&e){const e=h.EpF();h.TgZ(0,"div",29)(1,"div",29)(2,"div",30)(3,"div",31)(4,"select",32,33),h.YNc(6,dt,2,2,"option",34),h.qZA()()(),h.TgZ(7,"button",35),h.NdJ("click",(function(){h.CHM(e);const t=h.MAs(5),s=h.oxw();return h.KtG(s.addTranslation(t.value))})),h._UZ(8,"system-label",36),h.qZA()()()}if(2&e){const e=h.oxw();h.xp6(6),h.Q6J("ngForOf",e.untranslatedLanguages)}}let ct=(()=>{var e;class SystemLabelEditorModal{constructor(e,t,s,n,o,l){(0,i.Z)(this,"backend",void 0),(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"utils",void 0),(0,i.Z)(this,"toast",void 0),(0,i.Z)(this,"modal",void 0),(0,i.Z)(this,"availableLanguages",[]),(0,i.Z)(this,"currentScope","global"),(0,i.Z)(this,"scopes",["global","custom"]),(0,i.Z)(this,"languagesNames",{}),(0,i.Z)(this,"untranslatedLanguages",[]),(0,i.Z)(this,"isLoading",!1),(0,i.Z)(this,"self",void 0),(0,i.Z)(this,"_labelData",null),this.backend=e,this.metadata=t,this.language=s,this.utils=n,this.toast=o,this.modal=l}get labelData(){return this._labelData}set labelData(e){if(this._labelData=e,e&&0!=e[this.currentScope+"_translations"].length){for(let t of this.scopes)if(e[t+"_translations"].length>0){this.currentScope=t;break}e[this.currentScope+"_translations"].sort(((e,t)=>e.syslanguage==this.language.languagedata.languages.default||e.syslanguage<t.syslanguage?-1:e.syslanguage>t.syslanguage?1:void 0))}}get translations(){return this.labelData[`${this.currentScope}_translations`]}addTranslation(e){this.labelData[this.currentScope+"_translations"]||(this.labelData[this.currentScope+"_translations"]=[]),e||(e=this.untranslatedLanguages[0]),this.labelData[this.currentScope+"_translations"].push({id:this.utils.generateGuid(),syslanguagelabel_id:this.labelData.id,syslanguage:e}),this.setUntranslatedLanguages()}ngOnInit(){this.loadAvailableLanguages(),this.retrieveLabelData()}trackByFn(e,t){return e}retrieveLabelData(){this.isLoading=!0,this.backend.getRequest("configuration/syslanguages/labels/"+this.labelData.name).subscribe((e=>{this.isLoading=!1,e?this.labelData=e:this.modal.openModal("SystemLabelEditorGlobalCustomModal",!1).subscribe((e=>{e.instance.labelscope.subscribe((e=>{this.currentScope=e,this.labelData={id:this.utils.generateGuid(),name:this.labelData.name,scope:this.currentScope,global_translations:[],custom_translations:[]},this.addTranslation(this.language.currentlanguage)}))})),this.setUntranslatedLanguages()}),(()=>this.isLoading=!1))}save(){this.close(),this.backend.postRequest("configuration/syslanguages/labels",null,[this.labelData]).subscribe((()=>{let e=this.translations.find((e=>e.syslanguage==this.language.currentlanguage));this.language.addLabel(this.labelData.name,e.translation_default,e.translation_short,e.translation_long),this.language.currentlanguage$.emit(this.language.currentlanguage),this.toast.sendToast(this.language.getLabel("LBL_DATA_SAVED"),"success")}))}setUntranslatedLanguages(){this.untranslatedLanguages=this.translations?this.availableLanguages.filter((e=>!this.translations.some((t=>t.syslanguage==e.language)))):this.availableLanguages}loadAvailableLanguages(){this.availableLanguages=this.language.getAvialableLanguages(),this.availableLanguages.forEach((e=>this.languagesNames[e.language]=e.text))}close(){this.self.destroy()}}return e=SystemLabelEditorModal,(0,i.Z)(SystemLabelEditorModal,"ɵfac",(function(t){return new(t||e)(h.Y36(We.y),h.Y36(g.Pu),h.Y36(m.d),h.Y36(et.A),h.Y36(p.A),h.Y36(tt.o))})),(0,i.Z)(SystemLabelEditorModal,"ɵcmp",h.Xpm({type:e,selectors:[["system-label-editor-modal"]],decls:17,vars:6,consts:[["size","large"],[3,"close"],["margin","none",3,"grow"],[1,"slds-size--1-of-1","slds-p-around--small","slds-height_full",3,"system-overlay-loading-spinner"],[1,"slds-grid","slds-grid--vertical-align-center","slds-p-bottom--small"],[1,"slds-p-vertical--small","slds-text-heading--small"],["label","LBL_TRANSLATIONS"],["class","slds-grid slds-col--bump-left",4,"ngIf"],[4,"ngIf"],["class","slds-grid",4,"ngIf"],[1,"slds-button","slds-button--neutral",3,"click"],["label","LBL_CANCEL"],[1,"slds-button","slds-button--brand",3,"click"],["label","LBL_SAVE"],[1,"slds-grid","slds-col--bump-left"],["name","label-editor-modal-translation-scope",3,"ngModel","value","disabled","ngModelChange",4,"ngFor","ngForOf"],["name","label-editor-modal-translation-scope",3,"ngModel","value","disabled","ngModelChange"],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"slds-card","slds-m-bottom--small"],[1,"slds-card__header"],[1,"slds-card__body","slds-p-around--small"],[1,"slds-form-element"],["label","LBL_TEXT_SHORT"],["type","text",1,"slds-input",3,"ngModel","ngModelChange"],[1,"slds-required"],["label","LBL_DEFAULT"],["type","text","required","required",1,"slds-input",3,"ngModel","ngModelChange"],["label","LBL_TEXT_LONG"],[1,"slds-textarea",3,"ngModel","ngModelChange"],[1,"slds-grid"],[1,"slds-form-element__control","slds-p-right--x-small"],[1,"slds-select_container"],[1,"slds-select"],["add_translation_language",""],[3,"value",4,"ngFor","ngForOf"],["system-title","LBL_ADD_TRANSLATION",1,"slds-button","slds-button--neutral",3,"click"],["label","LBL_ADD"],[3,"value"]],template:function(e,t){1&e&&(h.TgZ(0,"system-modal",0)(1,"system-modal-header",1),h.NdJ("close",(function(){return t.close()})),h._uU(2),h.qZA(),h.TgZ(3,"system-modal-content",2)(4,"div",3)(5,"div",4)(6,"h2",5),h._UZ(7,"system-label",6),h._uU(8,": "),h.qZA(),h.YNc(9,ot,2,1,"div",7),h.qZA(),h.YNc(10,at,2,2,"ng-container",8),h.YNc(11,rt,9,1,"div",9),h.qZA()(),h.TgZ(12,"system-modal-footer")(13,"button",10),h.NdJ("click",(function(){return t.close()})),h._UZ(14,"system-label",11),h.qZA(),h.TgZ(15,"button",12),h.NdJ("click",(function(){return t.save()})),h._UZ(16,"system-label",13),h.qZA()()()),2&e&&(h.xp6(2),h.hij(" ",t.labelData.name," "),h.xp6(1),h.Q6J("grow",!0),h.xp6(1),h.Q6J("system-overlay-loading-spinner",t.isLoading),h.xp6(5),h.Q6J("ngIf",!t.isLoading),h.xp6(1),h.Q6J("ngIf",t.translations),h.xp6(1),h.Q6J("ngIf",!t.isLoading&&(null==t.availableLanguages?null:t.availableLanguages.length)>(null==t.translations?null:t.translations.length)))},dependencies:[st._,it.S,o.sg,o.O5,l.YN,l.Kr,l.Fj,l.JJ,l.Q7,l.On,Re.A,b._,v.j,Z.x,y.p,x.y],encapsulation:2})),SystemLabelEditorModal})(),ut=(()=>{var e;class SystemLabelEditorGlobalCustomModal{constructor(){(0,i.Z)(this,"self",void 0),(0,i.Z)(this,"labelscope",new h.vpe)}setLabel(e){this.labelscope.emit(e),this.self.destroy()}}return e=SystemLabelEditorGlobalCustomModal,(0,i.Z)(SystemLabelEditorGlobalCustomModal,"ɵfac",(function(t){return new(t||e)})),(0,i.Z)(SystemLabelEditorGlobalCustomModal,"ɵcmp",h.Xpm({type:e,selectors:[["ng-component"]],decls:11,vars:0,consts:[["size","prompt"],["label","LBL_SELECT_SCOPE"],[1,"slds-p-around--small","slds-align--absolute-center"],["label","LBL_SELECT_SCOPE","length","long"],[1,"slds-button","slds-button--brand",3,"click"],["label","LBL_GLOBAL"],["label","LBL_CUSTOM"]],template:function(e,t){1&e&&(h.TgZ(0,"system-modal",0)(1,"system-modal-header"),h._UZ(2,"system-label",1),h.qZA(),h.TgZ(3,"system-modal-content")(4,"div",2),h._UZ(5,"system-label",3),h.qZA()(),h.TgZ(6,"system-modal-footer")(7,"button",4),h.NdJ("click",(function(){return t.setLabel("global")})),h._UZ(8,"system-label",5),h.qZA(),h.TgZ(9,"button",4),h.NdJ("click",(function(){return t.setLabel("custom")})),h._UZ(10,"system-label",6),h.qZA()()())},dependencies:[b._,v.j,Z.x,y.p,x.y],encapsulation:2})),SystemLabelEditorGlobalCustomModal})();var ht=s(7674),mt=s(3333),gt=s(2892),pt=s(2145),ft=s(8710);let bt=(()=>{var e;class SystemLoadingModal{constructor(e){(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"messagelabel","LBL_LOADING"),this.language=e}}return e=SystemLoadingModal,(0,i.Z)(SystemLoadingModal,"ɵfac",(function(t){return new(t||e)(h.Y36(m.d))})),(0,i.Z)(SystemLoadingModal,"ɵcmp",h.Xpm({type:e,selectors:[["ng-component"]],decls:9,vars:1,consts:[["role","dialog","tabindex","-1",1,"slds-modal","slds-fade-in-open"],[1,"slds-modal__container"],[1,"slds-modal__header","slds-modal__header_empty"],[1,"slds-modal__content","slds-p-around_medium"],[1,"slds-align--absolute-center"],[1,"slds-grid","slds-grid--vertical-align-center"],["size","16"],[1,"slds-p-left--small"],[3,"label"]],template:function(e,t){1&e&&(h.TgZ(0,"section",0)(1,"div",1),h._UZ(2,"div",2),h.TgZ(3,"div",3)(4,"div",4)(5,"div",5),h._UZ(6,"system-spinner",6),h.TgZ(7,"div",7),h._UZ(8,"system-label",8),h.qZA()()()()()()),2&e&&(h.xp6(8),h.Q6J("label",t.messagelabel))},dependencies:[b._,ge.W],encapsulation:2})),SystemLoadingModal})();var vt=s(1604),Zt=s(6933),_t=s(6559);function yt(e,t){if(1&e){const e=h.EpF();h.TgZ(0,"button",4),h.NdJ("click",(function(){h.CHM(e);const t=h.oxw(2);return h.KtG(t.close.emit(!0))})),h._UZ(1,"system-button-icon",5),h.TgZ(2,"span",6),h._UZ(3,"system-label",7),h.qZA()()}}function xt(e,t){if(1&e){const e=h.EpF();h.TgZ(0,"button",8),h.NdJ("click",(function(){h.CHM(e);const t=h.oxw(2);return h.KtG(t.close.emit(!0))})),h._UZ(1,"system-button-icon",9),h.TgZ(2,"span",6),h._UZ(3,"system-label",7),h.qZA()()}}function wt(e,t){if(1&e&&(h.ynx(0),h.YNc(1,yt,4,0,"button",2),h.YNc(2,xt,4,0,"button",3),h.BQk()),2&e){const e=h.oxw();h.xp6(1),h.Q6J("ngIf",!e.isSmall),h.xp6(1),h.Q6J("ngIf",e.isSmall)}}let Tt=(()=>{var e;class SystemModalHeaderEmpty{set hideClose(e){this.hiddenCloseButton=!1!==e}constructor(e,t){(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"layout",void 0),(0,i.Z)(this,"emptyheader",!0),(0,i.Z)(this,"close",new h.vpe),(0,i.Z)(this,"hiddenCloseButton",!1),this.language=e,this.layout=t}get isSmall(){return"small"==this.layout.screenwidth}}return e=SystemModalHeaderEmpty,(0,i.Z)(SystemModalHeaderEmpty,"ɵfac",(function(t){return new(t||e)(h.Y36(m.d),h.Y36(_t.b))})),(0,i.Z)(SystemModalHeaderEmpty,"ɵcmp",h.Xpm({type:e,selectors:[["system-modal-header-empty"]],hostVars:2,hostBindings:function(e,t){2&e&&h.ekj("slds-modal__header_empty",t.emptyheader)},inputs:{hiddenCloseButton:"hiddenCloseButton",hideClose:["system-modal-header-noclose","hideClose"]},outputs:{close:"close"},decls:2,vars:1,consts:[[1,"slds-modal__header","slds-modal__header--empty"],[4,"ngIf"],["class","slds-button slds-button_icon slds-modal__close slds-button--icon-inverse","style","color:white;",3,"click",4,"ngIf"],["class","slds-button slds-button_icon slds-is-absolute","style","top: 3px; right: 3px;",3,"click",4,"ngIf"],[1,"slds-button","slds-button_icon","slds-modal__close","slds-button--icon-inverse",2,"color","white",3,"click"],["icon","close","size","large"],[1,"slds-assistive-text"],["label","LBL_CLOSE"],[1,"slds-button","slds-button_icon","slds-is-absolute",2,"top","3px","right","3px",3,"click"],["icon","close"]],template:function(e,t){1&e&&(h.TgZ(0,"header",0),h.YNc(1,wt,3,2,"ng-container",1),h.qZA()),2&e&&(h.xp6(1),h.Q6J("ngIf",!t.hiddenCloseButton))},dependencies:[o.O5,f.J,b._],encapsulation:2})),SystemModalHeaderEmpty})();const Ct=["target"];let At=(()=>{var e;class SystemModalWrapper{constructor(e,t){(0,i.Z)(this,"modalservice",void 0),(0,i.Z)(this,"application",void 0),(0,i.Z)(this,"self",null),(0,i.Z)(this,"zIndex",void 0),(0,i.Z)(this,"childComponent",void 0),(0,i.Z)(this,"escKey",!0),(0,i.Z)(this,"target",void 0),this.modalservice=e,this.application=t}closeModal(){this.self.destroy()}ngOnDestroy(){this.modalservice.removeModal(this.self),this.application.tick()}setEscKey(e=!0){this.escKey=e}}return e=SystemModalWrapper,(0,i.Z)(SystemModalWrapper,"ɵfac",(function(t){return new(t||e)(h.Y36(tt.o),h.Y36(h.z2F))})),(0,i.Z)(SystemModalWrapper,"ɵcmp",h.Xpm({type:e,selectors:[["system-modal-wrapper"]],viewQuery:function(e,t){if(1&e&&h.Gf(Ct,7,h.s_b),2&e){let e;h.iGM(e=h.CRH())&&(t.target=e.first)}},decls:3,vars:2,consts:[[2,"position","fixed"],["target",""]],template:function(e,t){1&e&&(h.TgZ(0,"div",0),h._UZ(1,"span",null,1),h.qZA()),2&e&&h.Udp("z-index",t.zIndex)},encapsulation:2})),SystemModalWrapper})();var kt=s(5320),Lt=s(6550);function It(e,t){1&e&&h._UZ(0,"system-spinner")}function Mt(e,t){1&e&&(h.TgZ(0,"system-illustration-page-not-available"),h._UZ(1,"system-label",7),h.qZA())}function St(e,t){if(1&e&&(h.TgZ(0,"div",5),h.YNc(1,It,1,0,"system-spinner",6),h.YNc(2,Mt,2,0,"system-illustration-page-not-available",6),h.qZA()),2&e){const e=h.oxw();h.xp6(1),h.Q6J("ngIf",!e.loadingerror),h.xp6(1),h.Q6J("ngIf",e.loadingerror)}}function Jt(e,t){if(1&e&&(h.TgZ(0,"div",11)(1,"audio",12),h._UZ(2,"source",13),h.qZA()()),2&e){const e=h.oxw(2);h.xp6(2),h.Q6J("src",e.blobUrl,h.LSH)("type",e.type)}}function Ot(e,t){if(1&e&&(h.TgZ(0,"div",11)(1,"video",14),h._UZ(2,"source",13),h.qZA()()),2&e){const e=h.oxw(2);h.xp6(2),h.Q6J("src",e.blobUrl,h.LSH)("type",e.type)}}function Nt(e,t){if(1&e&&(h.TgZ(0,"div",15),h._UZ(1,"object",16),h.qZA()),2&e){const e=h.oxw(2);h.xp6(1),h.Q6J("data",e.blobUrl,h.uOi)("type",e.type)}}function Ft(e,t){if(1&e&&(h.ynx(0,8),h.YNc(1,Jt,3,2,"div",9),h.YNc(2,Ot,3,2,"div",9),h.YNc(3,Nt,2,2,"div",10),h.BQk()),2&e){const e=h.oxw();h.Q6J("ngSwitch",e.objecttype),h.xp6(1),h.Q6J("ngSwitchCase","audio"),h.xp6(1),h.Q6J("ngSwitchCase","video")}}let qt=(()=>{var e;class SystemObjectPreviewModal{constructor(e,t){(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"sanitizer",void 0),(0,i.Z)(this,"self",{}),(0,i.Z)(this,"type",""),(0,i.Z)(this,"name",""),(0,i.Z)(this,"loadingerror",!1),(0,i.Z)(this,"blobUrl",void 0),this.language=e,this.sanitizer=t}closeModal(){this.self.destroy()}set data(e){let t=this.datatoBlob(e,this.type);this.blobUrl=this.sanitizer.bypassSecurityTrustResourceUrl(URL.createObjectURL(t))}get objecttype(){if(!this.type)return"";let e=this.type.split("/");switch(e[0]){case"audio":case"video":return e[0];default:return"object"}}download(){let e=document.createElement("a");document.body.appendChild(e),e.href=this.blobUrl,e.download=this.name,e.click(),e.remove()}datatoBlob(e,t="",s=512){let i=[];for(let t=0;t<e.length;t+=s){let n=e.slice(t,t+s),o=new Array(n.length);for(let e=0;e<n.length;e++)o[e]=n.charCodeAt(e);let l=new Uint8Array(o);i.push(l)}return new Blob(i,{type:t})}}return e=SystemObjectPreviewModal,(0,i.Z)(SystemObjectPreviewModal,"ɵfac",(function(t){return new(t||e)(h.Y36(m.d),h.Y36(Lt.H7))})),(0,i.Z)(SystemObjectPreviewModal,"ɵcmp",h.Xpm({type:e,selectors:[["system-object-preview-modal"]],inputs:{type:"type",name:"name",loadingerror:"loadingerror"},decls:6,vars:3,consts:[["size","large"],[3,"close"],["margin","none"],["style","height: 50vh;","class","slds-align--absolute-center",4,"ngIf"],[3,"ngSwitch",4,"ngIf"],[1,"slds-align--absolute-center",2,"height","50vh"],[4,"ngIf"],["label","MSG_ERROR_LOADING_FILE"],[3,"ngSwitch"],["class","slds-p-around--small slds-text-align--center",4,"ngSwitchCase"],["style","height: 80vh; overflow: hidden;",4,"ngSwitchDefault"],[1,"slds-p-around--small","slds-text-align--center"],["controls",""],[3,"src","type"],["width","320","height","240","controls",""],[2,"height","80vh","overflow","hidden"],["width","100%","height","100%",3,"data","type"]],template:function(e,t){1&e&&(h.TgZ(0,"system-modal",0)(1,"system-modal-header",1),h.NdJ("close",(function(){return t.closeModal()})),h._uU(2),h.qZA(),h.TgZ(3,"system-modal-content",2),h.YNc(4,St,3,2,"div",3),h.YNc(5,Ft,4,3,"ng-container",4),h.qZA()()),2&e&&(h.xp6(2),h.Oqu(t.name),h.xp6(2),h.Q6J("ngIf",!t.blobUrl),h.xp6(1),h.Q6J("ngIf",t.blobUrl))},dependencies:[o.O5,o.RF,o.n9,o.ED,me.k,b._,v.j,Z.x,x.y,ge.W],encapsulation:2})),SystemObjectPreviewModal})();var Et=s(5718);function Yt(e,t){1&e&&(h.TgZ(0,"span",8),h.O4$(),h.TgZ(1,"svg",9),h._UZ(2,"use",10),h.qZA(),h.kcU(),h.TgZ(3,"span",11),h._UZ(4,"system-label",12),h.qZA()())}function Dt(e,t){1&e&&(h.TgZ(0,"span",13),h.O4$(),h.TgZ(1,"svg",9),h._UZ(2,"use",14),h.qZA(),h.kcU(),h.TgZ(3,"span",11),h._UZ(4,"system-label",15),h.qZA()())}function Qt(e,t){1&e&&(h.TgZ(0,"span",16),h.O4$(),h.TgZ(1,"svg",9),h._UZ(2,"use",17),h.qZA(),h.kcU(),h.TgZ(3,"span",11),h._UZ(4,"system-label",18),h.qZA()())}let Ut=(()=>{var e;class SystemProgressRing{constructor(e){(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"percentage",100),(0,i.Z)(this,"size",24),(0,i.Z)(this,"status",""),(0,i.Z)(this,"backgroundcolor",void 0),this.language=e}get style(){return{height:this.size+"px",width:this.size+"px"}}get innerStyle(){return this.backgroundcolor?{background:this.backgroundcolor}:{}}get fillPercentage(){return this.percentage/100}get d(){return"M 1 0 A 1 1 0 "+(this.percentage>50?"1":"0")+" 1 "+Math.cos(2*Math.PI*this.fillPercentage)+" "+Math.sin(2*Math.PI*this.fillPercentage)+" L 0 0"}get ringClass(){if(""==this.status&&this.percentage>=100)return"slds-progress-ring_complete";switch(this.status){case"warning":return"slds-progress-ring_warning";case"expired":return"slds-progress-ring_expired"}}get iconstatus(){return this.percentage>=100?"complete":this.status}}return e=SystemProgressRing,(0,i.Z)(SystemProgressRing,"ɵfac",(function(t){return new(t||e)(h.Y36(m.d))})),(0,i.Z)(SystemProgressRing,"ɵcmp",h.Xpm({type:e,selectors:[["system-progress-ring"]],inputs:{percentage:"percentage",size:"size",status:"status",backgroundcolor:"backgroundcolor"},decls:8,vars:6,consts:[[1,"slds-progress-ring",3,"ngClass"],["role","progressbar","aria-valuemin","0","aria-valuemax","100","aria-valuenow","88",1,"slds-progress-ring__progress"],["viewBox","-1 -1 2 2"],[1,"slds-progress-ring__path"],[1,"slds-progress-ring__content",3,"ngStyle"],["class","slds-icon_container slds-icon-utility-warning","title","Warning",4,"ngIf"],["class","slds-icon_container slds-icon-utility-error","title","Expired",4,"ngIf"],["class","slds-icon_container slds-icon-utility-check","title","Complete",4,"ngIf"],["title","Warning",1,"slds-icon_container","slds-icon-utility-warning"],["aria-hidden","true",1,"slds-icon"],[0,"xmlns","xlink","http://www.w3.org/1999/xlink",0,"xlink","href","vendor/sldassets/icons/utility-sprite/svg/symbols.svg#warning"],[1,"slds-assistive-text"],["label","LBL_WARNING"],["title","Expired",1,"slds-icon_container","slds-icon-utility-error"],[0,"xmlns","xlink","http://www.w3.org/1999/xlink",0,"xlink","href","vendor/sldassets/icons/utility-sprite/svg/symbols.svg#error"],["label","LBL_EXPIRED"],["title","Complete",1,"slds-icon_container","slds-icon-utility-check"],[0,"xmlns","xlink","http://www.w3.org/1999/xlink",0,"xlink","href","vendor/sldassets/icons/utility-sprite/svg/symbols.svg#check"],["label","LBL_COMPLETE"]],template:function(e,t){1&e&&(h.TgZ(0,"div",0)(1,"div",1),h.O4$(),h.TgZ(2,"svg",2),h._UZ(3,"path",3),h.qZA()(),h.kcU(),h.TgZ(4,"div",4),h.YNc(5,Yt,5,0,"span",5),h.YNc(6,Dt,5,0,"span",6),h.YNc(7,Qt,5,0,"span",7),h.qZA()()),2&e&&(h.Q6J("ngClass",t.ringClass),h.xp6(3),h.uIk("d",t.d),h.xp6(1),h.Q6J("ngStyle",t.innerStyle),h.xp6(1),h.Q6J("ngIf","warning"==t.iconstatus),h.xp6(1),h.Q6J("ngIf","expired"==t.iconstatus),h.xp6(1),h.Q6J("ngIf","complete"==t.iconstatus))},dependencies:[o.mk,o.O5,o.PC,b._],encapsulation:2})),SystemProgressRing})();var Rt=s(8026);const jt=["cancelButton"],Bt=["okButton"],Gt=["inputField"],Pt=["selectField"];function Ht(e,t){if(1&e&&(h.TgZ(0,"h2",7),h._UZ(1,"system-label",8),h.qZA()),2&e){const e=h.oxw();h.xp6(1),h.Q6J("label",e.headertext)}}function zt(e,t){if(1&e&&(h.TgZ(0,"div"),h._uU(1),h.qZA()),2&e){const e=t.$implicit;h.xp6(1),h.Oqu(e)}}function Vt(e,t){if(1&e&&(h.TgZ(0,"div",12),h.YNc(1,zt,2,1,"div",13),h.qZA()),2&e){const e=h.oxw(2);h.xp6(1),h.Q6J("ngForOf",e.splitText)}}function Kt(e,t){if(1&e){const e=h.EpF();h.TgZ(0,"system-input-date",23),h.NdJ("ngModelChange",(function(t){h.CHM(e);const s=h.oxw(4);return h.KtG(s.value=t)})),h.qZA()}if(2&e){const e=h.oxw(4);h.Q6J("ngModel",e.value)}}function $t(e,t){if(1&e){const e=h.EpF();h.TgZ(0,"div",24)(1,"div",15)(2,"textarea",25),h.NdJ("ngModelChange",(function(t){h.CHM(e);const s=h.oxw(4);return h.KtG(s.value=t)})),h.qZA()()()}if(2&e){const e=h.oxw(4);h.xp6(2),h.Q6J("ngModel",e.value)}}function Xt(e,t){if(1&e){const e=h.EpF();h.ynx(0),h.TgZ(1,"input",26,27),h.NdJ("ngModelChange",(function(t){h.CHM(e);const s=h.oxw(4);return h.KtG(s.value=t)})),h.qZA(),h.TgZ(3,"button",28),h.NdJ("click",(function(){h.CHM(e);const t=h.oxw(4);return h.KtG(t.value="")})),h._UZ(4,"system-button-icon",29),h.qZA(),h.BQk()}if(2&e){const e=h.oxw(4);h.xp6(1),h.Q6J("ngModel",e.value),h.xp6(2),h.Q6J("disabled",!e.value)}}function Wt(e,t){if(1&e&&(h.TgZ(0,"div",18),h.ynx(1,19),h.YNc(2,Kt,1,1,"system-input-date",20),h.YNc(3,$t,3,1,"div",21),h.YNc(4,Xt,5,2,"ng-container",22),h.BQk(),h.qZA()),2&e){const e=h.oxw(3);h.xp6(1),h.Q6J("ngSwitch",e.type),h.xp6(1),h.Q6J("ngSwitchCase","input_date"),h.xp6(1),h.Q6J("ngSwitchCase","input_text")}}function es(e,t){if(1&e&&(h.TgZ(0,"option",36),h._uU(1),h.qZA()),2&e){const e=t.$implicit;h.Q6J("value",e.value),h.xp6(1),h.hij(" ",e.display," ")}}function ts(e,t){if(1&e){const e=h.EpF();h.TgZ(0,"div",32)(1,"select",33,34),h.NdJ("ngModelChange",(function(t){h.CHM(e);const s=h.oxw(4);return h.KtG(s.value=t)})),h.YNc(3,es,2,2,"option",35),h.qZA()()}if(2&e){const e=h.oxw(4);h.xp6(1),h.Q6J("ngModel",e.value),h.xp6(2),h.Q6J("ngForOf",e.options)}}function ss(e,t){if(1&e){const e=h.EpF();h.TgZ(0,"system-input-radio",38),h.NdJ("ngModelChange",(function(t){h.CHM(e);const s=h.oxw(5);return h.KtG(s.value=t)})),h._uU(1),h.qZA()}if(2&e){const e=t.$implicit,s=h.oxw(5);h.Q6J("name",s.radioGroupName)("value",e.value)("ngModel",s.value),h.xp6(1),h.hij(" ",e.display," ")}}function is(e,t){if(1&e&&h.YNc(0,ss,2,4,"system-input-radio",37),2&e){const e=h.oxw(4);h.Q6J("ngForOf",e.options)}}function ns(e,t){if(1&e&&(h.ynx(0),h.YNc(1,ts,4,2,"div",30),h.YNc(2,is,1,1,"ng-template",null,31,h.W1O),h.BQk()),2&e){const e=h.MAs(3),t=h.oxw(3);h.xp6(1),h.Q6J("ngIf","radio"!==t.optionsAs)("ngIfElse",e)}}function os(e,t){if(1&e&&(h.TgZ(0,"div",14)(1,"div",15),h.YNc(2,Wt,5,3,"div",16),h.YNc(3,ns,4,2,"ng-container",17),h.qZA()()),2&e){const e=h.oxw(2);h.xp6(2),h.Q6J("ngIf",!e.options),h.xp6(1),h.Q6J("ngIf",e.options&&"button"!==e.optionsAs)}}function ls(e,t){if(1&e&&(h.TgZ(0,"div",9),h.YNc(1,Vt,2,1,"div",10),h.YNc(2,os,4,2,"div",11),h.qZA()),2&e){const e=h.oxw();h.xp6(1),h.Q6J("ngIf",e.text),h.xp6(1),h.Q6J("ngIf",e.type.startsWith("input"))}}function as(e,t){if(1&e){const e=h.EpF();h.TgZ(0,"button",42,43),h.NdJ("click",(function(){h.CHM(e);const t=h.oxw(2);return h.KtG(t.clickCancel())})),h._UZ(2,"system-label",44),h.qZA()}}function ds(e,t){if(1&e){const e=h.EpF();h.ynx(0),h.YNc(1,as,3,0,"button",39),h.TgZ(2,"button",40,41),h.NdJ("click",(function(){h.CHM(e);const t=h.oxw();return h.KtG(t.clickOK())})),h._uU(4,"OK"),h.qZA(),h.BQk()}if(2&e){const e=h.oxw();h.xp6(1),h.Q6J("ngIf","info"!==e.type),h.xp6(1),h.Q6J("disabled",!e.canSubmit)}}function rs(e,t){if(1&e){const e=h.EpF();h.TgZ(0,"button",46),h.NdJ("click",(function(){const t=h.CHM(e).$implicit,s=h.oxw(2);return h.KtG(s.clickButtonGroup(t.value))})),h._UZ(1,"system-label",8),h.qZA()}if(2&e){const e=t.$implicit;h.xp6(1),h.Q6J("label",e.display)}}function cs(e,t){if(1&e&&h.YNc(0,rs,2,1,"button",45),2&e){const e=h.oxw();h.Q6J("ngForOf",e.options)}}let us=(()=>{var e;class SystemPrompt{constructor(e){(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"type",void 0),(0,i.Z)(this,"text",void 0),(0,i.Z)(this,"headertext",void 0),(0,i.Z)(this,"theme",void 0),(0,i.Z)(this,"radioGroupName",void 0),(0,i.Z)(this,"value",null),(0,i.Z)(this,"options",void 0),(0,i.Z)(this,"optionsAsRadio",!1),(0,i.Z)(this,"optionsAs",void 0),(0,i.Z)(this,"answer",null),(0,i.Z)(this,"answerSubject",null),(0,i.Z)(this,"regex",void 0),(0,i.Z)(this,"self",void 0),(0,i.Z)(this,"cancelButton",void 0),(0,i.Z)(this,"okButton",void 0),(0,i.Z)(this,"inputField",void 0),(0,i.Z)(this,"selectField",void 0),this.language=e,this.answerSubject=new H.x,this.answer=this.answerSubject.asObservable(),this.radioGroupName=_.uniqueId("system-prompt-group-name-")}get splitText(){return this.text?this.language.getLabel(this.text,void 0,"long").split(/(?:\r\n|\r|\n)/g):[]}ngOnInit(){this.theme||(this.theme="shade"),!0===this.optionsAsRadio&&(this.optionsAs="radio")}ngAfterViewInit(){"confirm"===this.type?this.cancelButton.nativeElement.focus():"info"===this.type?this.okButton.nativeElement.focus():this.type.startsWith("input")&&(this.inputField?this.inputField.nativeElement.focus():this.selectField&&this.selectField.nativeElement.focus())}get canSubmit(){if(!this.type.startsWith("input"))return!0;if(!this.value)return!1;if(this.regex){return new RegExp(this.regex).test(String(this.value))}return!0}clickOK(){this.type.startsWith("input")?this.answerSubject.next(this.value):this.answerSubject.next(!0),this.answerSubject.complete(),this.self.destroy()}clickCancel(){this.answerSubject.next(!1),this.answerSubject.complete(),this.self.destroy()}onModalEscX(){if("info"===this.type||"button"===this.optionsAs)return!1;this.clickCancel()}clickButtonGroup(e){this.answerSubject.next(e),this.answerSubject.complete(),this.self.destroy()}}return e=SystemPrompt,(0,i.Z)(SystemPrompt,"ɵfac",(function(t){return new(t||e)(h.Y36(m.d))})),(0,i.Z)(SystemPrompt,"ɵcmp",h.Xpm({type:e,selectors:[["system-prompt"]],viewQuery:function(e,t){if(1&e&&(h.Gf(jt,5),h.Gf(Bt,5),h.Gf(Gt,5),h.Gf(Pt,5)),2&e){let e;h.iGM(e=h.CRH())&&(t.cancelButton=e.first),h.iGM(e=h.CRH())&&(t.okButton=e.first),h.iGM(e=h.CRH())&&(t.inputField=e.first),h.iGM(e=h.CRH())&&(t.selectField=e.first)}},inputs:{type:"type",text:"text",headertext:"headertext",theme:"theme",value:"value",options:"options",optionsAsRadio:"optionsAsRadio",optionsAs:"optionsAs"},decls:9,vars:9,consts:[["role","alertdialog","tabindex","-1",1,"slds-modal","slds-fade-in-open","slds-modal_prompt"],[1,"slds-modal__container"],["class","slds-text-heading_medium slds-hyphenate",4,"ngIf"],["class","slds-modal__content slds-text-align_center ",4,"ngIf"],[1,"slds-modal__footer"],[4,"ngIf","ngIfElse"],["optionButtonContainer",""],[1,"slds-text-heading_medium","slds-hyphenate"],[3,"label"],[1,"slds-modal__content","slds-text-align_center"],["class","slds-m-vertical_medium",4,"ngIf"],["class","slds-form-element slds-m-vertical_medium",4,"ngIf"],[1,"slds-m-vertical_medium"],[4,"ngFor","ngForOf"],[1,"slds-form-element","slds-m-vertical_medium"],[1,"slds-form-element__control"],["class","slds-form-element__control slds-input-has-icon slds-input-has-icon_right",4,"ngIf"],[4,"ngIf"],[1,"slds-form-element__control","slds-input-has-icon","slds-input-has-icon_right"],[3,"ngSwitch"],[3,"ngModel","ngModelChange",4,"ngSwitchCase"],["class","slds-form-element",4,"ngSwitchCase"],[4,"ngSwitchDefault"],[3,"ngModel","ngModelChange"],[1,"slds-form-element"],[1,"slds-textarea",2,"height","200px",3,"ngModel","ngModelChange"],["type","text","tabindex","1",1,"slds-input",3,"ngModel","ngModelChange"],["inputField",""],[1,"slds-input__icon","slds-input__icon_right","slds-button","slds-button--icon",3,"disabled","click"],["icon","clear"],["class","slds-select_container",4,"ngIf","ngIfElse"],["radioGroupContainer",""],[1,"slds-select_container"],["tabindex","1",1,"slds-select",3,"ngModel","ngModelChange"],["selectField",""],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["style","display: block",3,"name","value","ngModel","ngModelChange",4,"ngFor","ngForOf"],[2,"display","block",3,"name","value","ngModel","ngModelChange"],["class","slds-button slds-button--neutral",3,"click",4,"ngIf"],[1,"slds-button","slds-button--brand",3,"disabled","click"],["okButton",""],[1,"slds-button","slds-button--neutral",3,"click"],["cancelButton",""],["label","LBL_CANCEL"],["class","slds-button slds-button--brand",3,"click",4,"ngFor","ngForOf"],[1,"slds-button","slds-button--brand",3,"click"]],template:function(e,t){if(1&e&&(h.TgZ(0,"section",0)(1,"div",1)(2,"header"),h.YNc(3,Ht,2,1,"h2",2),h.qZA(),h.YNc(4,ls,3,2,"div",3),h.TgZ(5,"footer",4),h.YNc(6,ds,5,2,"ng-container",5),h.YNc(7,cs,1,1,"ng-template",null,6,h.W1O),h.qZA()()()),2&e){const e=h.MAs(8);h.xp6(2),h.Gre("slds-modal__header slds-theme_",t.theme,""),h.Udp("height",t.headertext?"auto":"1rem"),h.xp6(1),h.Q6J("ngIf",t.headertext),h.xp6(1),h.Q6J("ngIf",t.text||t.type.startsWith("input")),h.xp6(2),h.Q6J("ngIf","button"!==t.optionsAs)("ngIfElse",e)}},dependencies:[o.sg,o.O5,o.RF,o.n9,o.ED,l.YN,l.Kr,l.Fj,l.EJ,l.JJ,l.On,f.J,Oe.z,Re.A,b._],encapsulation:2})),SystemPrompt})();var hs=s(1574),ms=s(5710);function gs(e,t){1&e&&h._UZ(0,"system-label",25)}function ps(e,t){1&e&&h._UZ(0,"system-label",26)}function fs(e,t){if(1&e&&(h.TgZ(0,"div",32),h._UZ(1,"system-label",33),h.qZA()),2&e){const e=h.oxw(2);h.xp6(1),h.Q6J("label",e.urlErrorLabel)}}const bs=function(e){return{"slds-has-error":e}};function vs(e,t){if(1&e){const e=h.EpF();h.TgZ(0,"div",27)(1,"label",10)(2,"abbr",28),h._uU(3,"*"),h.qZA(),h._UZ(4,"system-label",29),h.qZA(),h.TgZ(5,"system-input-text",30),h.NdJ("ngModelChange",(function(t){h.CHM(e);const s=h.oxw();return h.KtG(s.url=t)}))("ngModelChange",(function(){h.CHM(e);const t=h.oxw();return h.KtG(t.checkUrl())})),h.qZA(),h.YNc(6,fs,2,1,"div",31),h.qZA()}if(2&e){const e=h.oxw();h.Q6J("ngClass",h.VKq(3,bs,!!e.urlErrorLabel)),h.xp6(5),h.Q6J("ngModel",e.url),h.xp6(1),h.Q6J("ngIf",e.urlErrorLabel)}}function Zs(e,t){if(1&e){const e=h.EpF();h.TgZ(0,"div",34)(1,"label",10),h._UZ(2,"system-label",35),h.qZA(),h.TgZ(3,"system-input-text",36),h.NdJ("ngModelChange",(function(t){h.CHM(e);const s=h.oxw();return h.KtG(s.text=t)}))("blur",(function(){h.CHM(e);const t=h.oxw();return h.KtG(t.changeTextIsUrl())})),h.qZA()()}if(2&e){const e=h.oxw();h.xp6(3),h.Q6J("ngModel",e.text)}}function _s(e,t){if(1&e&&(h.TgZ(0,"option",44),h._uU(1),h.qZA()),2&e){const e=t.$implicit;h.Q6J("ngValue",e.id),h.xp6(1),h.Oqu(e.name)}}function ys(e,t){if(1&e&&(h.TgZ(0,"div",32),h._UZ(1,"system-label",33),h.qZA()),2&e){const e=h.oxw(2);h.xp6(1),h.Q6J("label",e.marketingActionErrorLabel)}}function xs(e,t){if(1&e){const e=h.EpF();h.TgZ(0,"div",37)(1,"label",38),h._UZ(2,"system-label",39),h.qZA(),h.TgZ(3,"div",40)(4,"div",41)(5,"select",42),h.NdJ("ngModelChange",(function(t){h.CHM(e);const s=h.oxw();return h.KtG(s.marketingAction=t)})),h.YNc(6,_s,2,2,"option",43),h.qZA()()(),h.YNc(7,ys,2,1,"div",31),h.qZA()}if(2&e){const e=h.oxw();h.Q6J("ngClass",h.VKq(5,bs,!!e.marketingActionErrorLabel)),h.xp6(5),h.Q6J("ngModel",e.marketingAction)("disabled",null==e.editorService.marketingActions),h.xp6(1),h.Q6J("ngForOf",e.editorService.marketingActions),h.xp6(1),h.Q6J("ngIf",e.marketingActionErrorLabel)}}const ws=function(){return{value:"id",label:"LBL_BY_ID"}},Ts=function(){return{value:void 0,icon:"topic2",label:"LBL_NONE"}},Cs=function(){return{value:"url",icon:"link",label:"LBL_BY_URL"}},As=function(e,t,s){return[e,t,s]};function ks(e,t){if(1&e){const e=h.EpF();h.ynx(0),h.TgZ(1,"div",45)(2,"label",10),h._UZ(3,"system-label",46),h.qZA(),h.TgZ(4,"system-input-radio-button-group",47),h.NdJ("ngModelChange",(function(t){h.CHM(e);const s=h.oxw();return h.KtG(s.setTrackByMethod(t))})),h.qZA()(),h.BQk()}if(2&e){const e=h.oxw();h.xp6(4),h.Q6J("ngModel",e.trackByMethod)("inputOptions",h.kEZ(5,As,h.DdM(2,ws),h.DdM(3,Ts),h.DdM(4,Cs)))}}let Ls=(()=>{var e;class SystemRichTextLink{constructor(e,t,s){(0,i.Z)(this,"model",void 0),(0,i.Z)(this,"backend",void 0),(0,i.Z)(this,"modal",void 0),(0,i.Z)(this,"url",""),(0,i.Z)(this,"text",""),(0,i.Z)(this,"toTrack",!1),(0,i.Z)(this,"marketingAction",""),(0,i.Z)(this,"trackingId",""),(0,i.Z)(this,"parent",void 0),(0,i.Z)(this,"urlErrorLabel",""),(0,i.Z)(this,"marketingActionErrorLabel",""),(0,i.Z)(this,"canSubmit",!1),(0,i.Z)(this,"alterMode",!1),(0,i.Z)(this,"textIsUrl",!1),(0,i.Z)(this,"response",new H.x),(0,i.Z)(this,"self",void 0),(0,i.Z)(this,"linkType","conv"),(0,i.Z)(this,"editorService",void 0),(0,i.Z)(this,"trackByMethod",void 0),this.model=e,this.backend=t,this.modal=s}setTrackByMethod(e){this.trackByMethod=e,"id"==e?this.openTrackingLinkSelectModal():this.trackingId=void 0}openTrackingLinkSelectModal(){const e=[{value:"select",display:"LBL_SELECT"},{value:"new",display:"LBL_NEW"},{value:void 0,display:"LBL_CANCEL"}];this.modal.prompt("input","LBL_MAKE_SELECTION","LBL_TRACKINGLINKS","shade","select",e,"button").subscribe((e=>{if(e)switch(e){case"new":const e={name:this.text,url:this.url};this.model.addModel("",null,e,!0).subscribe((e=>{this.trackingId=e.id}));break;case"select":this.modal.openModal("ObjectModalModuleLookup").subscribe((e=>{e.instance.module="EmailTrackingLinks",e.instance.multiselect=!1,e.instance.selectedItems.subscribe((e=>{this.trackingId=e[0].id}))}))}}))}ngOnInit(){this.model.module="EmailTrackingLinks",this.url=this.url.trim(),this.text=this.text.trim(),this.urlHasProtocol(this.url)||(this.url="https://"),this.textIsUrl=!this.text,this.url&&(this.url=this.url.trim()),this.marketingAction&&(this.linkType="mark"),this.loadMarketingActions()}urlHasProtocol(e){return/^[a-zA-Z]+\:\/\//.test(e.trim())}urlIsValid(e){return/^[a-zA-Z]+\:\/\/.+/.test(e.trim())}checkUrl(){let e=this.url.trim();return e?this.urlIsValid(e)?this.urlErrorLabel="":this.urlErrorLabel="LBL_INPUT_INVALID":this.urlErrorLabel="MSG_INPUT_REQUIRED",this.textIsUrl&&(this.text=this.url),!this.urlErrorLabel}checkMarketingAction(){return this.marketingAction?this.marketingActionErrorLabel="":this.marketingActionErrorLabel="MSG_INPUT_REQUIRED",!this.marketingActionErrorLabel}changeTextIsUrl(){this.text?this.url!=this.text&&(this.textIsUrl=!1):this.textIsUrl=!0}submit(){if("conv"===this.linkType&&!this.checkUrl())return;if("mark"===this.linkType&&!this.checkMarketingAction())return;let e={url:"conv"===this.linkType?this.url.trim():"",trackingId:"conv"===this.linkType?this.trackingId??"":void 0,text:void 0,linkType:this.linkType,trackByMethod:this.trackByMethod,marketingAction:"mark"===this.linkType?this.marketingAction:void 0};this.alterMode||(e.text=this.text.trim()),this.response.next(e),this.response.complete(),this.self.destroy()}cancel(){this.response.next(null),this.response.complete(),this.self.destroy()}loadMarketingActions(){this.editorService.loadMarketingActions()}}return e=SystemRichTextLink,(0,i.Z)(SystemRichTextLink,"ɵfac",(function(t){return new(t||e)(h.Y36(ms.o),h.Y36(We.y),h.Y36(tt.o))})),(0,i.Z)(SystemRichTextLink,"ɵcmp",h.Xpm({type:e,selectors:[["ng-component"]],inputs:{url:"url",text:"text",toTrack:"toTrack",marketingAction:"marketingAction",trackingId:"trackingId",parent:"parent"},features:[h._Bn([ms.o])],decls:29,vars:8,consts:[["size","small"],[3,"close"],["label","LBL_ADD_LINK",4,"ngIf"],["label","LBL_EDIT_LINK",4,"ngIf"],[1,"slds-form-element","slds-m-bottom--x-small"],[1,"slds-form-element__control","slds-grid"],[1,"slds-radio"],["type","radio","id","radioConvLink","name","linkType","value","conv",3,"ngModel","ngModelChange"],["for","radioConvLink",1,"slds-radio__label"],[1,"slds-radio_faux"],[1,"slds-form-element__label"],["label","LBL_CONVENTIONAL_LINK"],[1,"slds-radio","slds-m-left--small"],["type","radio","id","radioMarketingLink","name","linkType","value","mark",3,"ngModel","ngModelChange"],["for","radioMarketingLink",1,"slds-radio__label"],["label","LBL_MARKETING_ACTION_LINK"],["class","slds-form-element__control",3,"ngClass",4,"ngIf"],[1,"slds-grid","slds-m-top--small","slds-gutters_x-small"],["class","slds-form-element__control slds-col",4,"ngIf"],["class","slds-form-element slds-col",3,"ngClass",4,"ngIf"],[4,"ngIf"],[1,"slds-button","slds-button--neutral",3,"click"],["label","LBL_CANCEL"],[1,"slds-button","slds-button--brand",3,"click"],["label","LBL_OK"],["label","LBL_ADD_LINK"],["label","LBL_EDIT_LINK"],[1,"slds-form-element__control",3,"ngClass"],[1,"slds-required"],["label","LBL_URL"],[3,"ngModel","ngModelChange"],["class","slds-form-element__help",4,"ngIf"],[1,"slds-form-element__help"],[3,"label"],[1,"slds-form-element__control","slds-col"],["label","LBL_TEXT"],[3,"ngModel","ngModelChange","blur"],[1,"slds-form-element","slds-col",3,"ngClass"],["for","marketingAction",1,"slds-form-element__label"],["label","LBL_MARKETING_ACTION"],[1,"slds-form-element__control"],[1,"slds-select_container"],["id","marketingAction",1,"slds-select",3,"ngModel","disabled","ngModelChange"],[3,"ngValue",4,"ngFor","ngForOf"],[3,"ngValue"],[1,"slds-form-element","slds-col","slds-grow-none"],["label","LBL_CLICKS_TRACKABLE"],[1,"spice-display-block",3,"ngModel","inputOptions","ngModelChange"]],template:function(e,t){1&e&&(h.TgZ(0,"system-modal",0)(1,"system-modal-header",1),h.NdJ("close",(function(){return t.cancel()})),h.YNc(2,gs,1,0,"system-label",2),h.YNc(3,ps,1,0,"system-label",3),h.qZA(),h.TgZ(4,"system-modal-content")(5,"fieldset",4)(6,"div",5)(7,"span",6)(8,"input",7),h.NdJ("ngModelChange",(function(e){return t.linkType=e})),h.qZA(),h.TgZ(9,"label",8),h._UZ(10,"span",9),h.TgZ(11,"span",10),h._UZ(12,"system-label",11),h.qZA()()(),h.TgZ(13,"span",12)(14,"input",13),h.NdJ("ngModelChange",(function(e){return t.linkType=e})),h.qZA(),h.TgZ(15,"label",14),h._UZ(16,"span",9),h.TgZ(17,"span",10),h._UZ(18,"system-label",15),h.qZA()()()()(),h.YNc(19,vs,7,5,"div",16),h.TgZ(20,"div",17),h.YNc(21,Zs,4,1,"div",18),h.YNc(22,xs,8,7,"div",19),h.YNc(23,ks,5,9,"ng-container",20),h.qZA()(),h.TgZ(24,"system-modal-footer")(25,"button",21),h.NdJ("click",(function(){return t.cancel()})),h._UZ(26,"system-label",22),h.qZA(),h.TgZ(27,"button",23),h.NdJ("click",(function(){return t.submit()})),h._UZ(28,"system-label",24),h.qZA()()()),2&e&&(h.xp6(2),h.Q6J("ngIf",!t.alterMode),h.xp6(1),h.Q6J("ngIf",t.alterMode),h.xp6(5),h.Q6J("ngModel",t.linkType),h.xp6(6),h.Q6J("ngModel",t.linkType),h.xp6(5),h.Q6J("ngIf","conv"===t.linkType),h.xp6(2),h.Q6J("ngIf",!t.alterMode),h.xp6(1),h.Q6J("ngIf","mark"===t.linkType),h.xp6(1),h.Q6J("ngIf","conv"===t.linkType))},dependencies:[o.mk,o.sg,o.O5,l.YN,l.Kr,l.Fj,l.EJ,l._,l.JJ,l.On,_e.Z,je.p,b._,v.j,Z.x,y.p,x.y],encapsulation:2})),SystemRichTextLink})();var Is=s(5698),Ms=s(4817),Ss=s(2067),Js=s(8859);const Os=["sourceeditor"];function Ns(e,t){if(1&e){const e=h.EpF();h.TgZ(0,"div",19)(1,"button",20),h.NdJ("click",(function(){h.CHM(e);const t=h.oxw();return h.KtG(t.nextResult())})),h._UZ(2,"system-button-icon",21),h.qZA(),h.TgZ(3,"button",20),h.NdJ("click",(function(){h.CHM(e);const t=h.oxw();return h.KtG(t.previewResult())})),h._UZ(4,"system-button-icon",22),h.qZA()()}if(2&e){const e=h.oxw();h.xp6(1),h.Q6J("disabled",e.nextDisabled)("title",e.language.getLabel("LBL_NEXT")),h.xp6(2),h.Q6J("disabled",e.previewDisabled)("title",e.language.getLabel("LBL_PREVIEW"))}}function Fs(e,t){if(1&e){const e=h.EpF();h.TgZ(0,"button",23),h.NdJ("click",(function(){h.CHM(e);const t=h.oxw();return h.KtG(t.openTemplateVariableHelper())})),h._UZ(1,"system-button-icon",24),h.qZA()}if(2&e){const e=h.oxw();h.Q6J("disabled",!e.isUserInsideEditor)("title",e.language.getLabel("LBL_TEMPLATE_VARIABLE_HELPER"))}}let qs=(()=>{var e;class SystemRichTextSourceModal{constructor(e,t,s,n,o,l,a,d,r){(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"renderer",void 0),(0,i.Z)(this,"sanitized",void 0),(0,i.Z)(this,"libloader",void 0),(0,i.Z)(this,"injector",void 0),(0,i.Z)(this,"model",void 0),(0,i.Z)(this,"modal",void 0),(0,i.Z)(this,"editorService",void 0),(0,i.Z)(this,"_document",void 0),(0,i.Z)(this,"self",{}),(0,i.Z)(this,"_html",""),(0,i.Z)(this,"searchtext",""),(0,i.Z)(this,"foundIndices",[]),(0,i.Z)(this,"currentIndex",-1),(0,i.Z)(this,"html",new h.vpe),(0,i.Z)(this,"isUserInsideEditor",!1),(0,i.Z)(this,"editorId",_.uniqueId()),(0,i.Z)(this,"eventListener",[]),(0,i.Z)(this,"beautifyenabled",!1),(0,i.Z)(this,"sourceEditor",void 0),this.language=e,this.renderer=t,this.sanitized=s,this.libloader=n,this.injector=o,this.model=l,this.modal=a,this.editorService=d,this._document=r,this.libloader.loadLib("jsbeautify").subscribe((e=>{this.beautifyenabled=!0}))}get nextDisabled(){return this.currentIndex==this.foundIndices.length-1}get previewDisabled(){return 0==this.currentIndex}get searchText(){return this.searchtext}set searchText(e){this.currentIndex=0,this.searchtext=e}get sanitizedHtml(){return this.sanitized.bypassSecurityTrustHtml(this._html)}ngOnInit(){this.renderer.setProperty(this.sourceEditor.nativeElement,"innerText",this._html),this.eventListener.push(this.renderer.listen("document","click",(()=>this.isUserInsideEditor=this.testIsUserInsideEditor()))),this.eventListener.push(this.renderer.listen("document","keyup",(()=>(this.isUserInsideEditor=this.testIsUserInsideEditor(),!0))))}keyUp(e){(13==e.which||13==e.keyCode&&this.searchText.length>0)&&(this.currentIndex=0,this.selectFoundText())}findTextIndices(e,t){this.foundIndices=[],e=e.toLowerCase();let s,i=0;for(;i<t.length&&(s=t.indexOf(e,i),s>-1);)this.foundIndices.push(s),i=s+e.length}getTextNodesIn(e){let t=[];if(3==e.nodeType)t.push(e);else{let s=e.childNodes;s.forEach(((e,i)=>t.concat(this.getTextNodesIn(s[i]))));for(let e=0,i=s.length;e<i;++e)t.push.apply(t,this.getTextNodesIn(s[e]))}return t}selectFoundText(){let e=this.sourceEditor.nativeElement;if(document.createRange&&window.getSelection){let t=document.createRange();t.selectNodeContents(e);let s=this.getTextNodesIn(e);this.findTextIndices(this.searchText,s.map((e=>e.data)).join(""));let i=this.foundIndices[this.currentIndex],n=i+this.searchText.length,o=0;s.some((e=>{let s=o+e.length;if(i<s&&n>o)return t.setStart(e,i-o),t.setEnd(e,n-o),!0;o+=e.length}));let l=window.getSelection();l.removeAllRanges(),l.addRange(t)}else if(document.hasOwnProperty("selection")&&document.body.hasOwnProperty("createTextRange")){let t=document.body.createTextRange();t.moveToElementText(e),t.collapse(!0),this.findTextIndices(this.searchText,this._html);let s=this.foundIndices[this.currentIndex],i=s+this.searchText.length;t.moveEnd("character",i),t.moveStart("character",s),t.select()}}beautify(){this.renderer.setProperty(this.sourceEditor.nativeElement,"innerText",html_beautify(this.sourceEditor.nativeElement.innerText,{indent_size:4,indent_char:" ",indent_with_tabs:!1,end_with_newline:!1,indent_level:0,preserve_newlines:!0,max_preserve_newlines:10,space_in_paren:!1,space_in_empty_paren:!1,unindent_chained_methods:!1,break_chained_methods:!1,keep_array_indentation:!1,unescape_strings:!1,wrap_line_length:100,e4x:!1,comma_first:!1,operator_position:"before-newline",indent_empty_lines:!1,templating:["auto"]}))}nextResult(){this.currentIndex<this.foundIndices.length&&(this.currentIndex++,this.selectFoundText())}previewResult(){this.currentIndex>0&&(this.currentIndex--,this.selectFoundText())}onContentChange(e){this._html=e}close(){this.html.emit(this._html),this.self.destroy()}get useTemplateVariableHelper(){return"OutputTemplates"===this.model?.module||"EmailTemplates"===this.model?.module||"CampaignTasks"===this.model?.module}openTemplateVariableHelper(){this.editorService.saveSelection(),this.modal.openModal("OutputTemplatesVariableHelper",null,this.injector).pipe((0,Is.q)(1)).subscribe((e=>{e.instance.response.pipe((0,Is.q)(1)).subscribe((e=>{this.focusEditor(),this.editorService.restoreSelection(),this._document.execCommand("insertText",!1,"{"+e+"}")}))}))}focusEditor(){this.sourceEditor.nativeElement.focus()}testIsUserInsideEditor(){if(window.getSelection){let e=window.getSelection().focusNode;for(;e&&e.id!==this.editorId&&e.parentNode;)e=e.parentNode;return e?.id===this.editorId}return!1}ngOnDestroy(){this.eventListener.forEach((e=>e()))}onModalEscX(){this.close()}}return e=SystemRichTextSourceModal,(0,i.Z)(SystemRichTextSourceModal,"ɵfac",(function(t){return new(t||e)(h.Y36(m.d),h.Y36(h.Qsj),h.Y36(Lt.H7),h.Y36(Ss.$),h.Y36(h.zs3),h.Y36(ms.o,8),h.Y36(tt.o),h.Y36(Ms.L),h.Y36(o.K0))})),(0,i.Z)(SystemRichTextSourceModal,"ɵcmp",h.Xpm({type:e,selectors:[["system-richtext-sourcemodal"]],viewQuery:function(e,t){if(1&e&&h.Gf(Os,7),2&e){let e;h.iGM(e=h.CRH())&&(t.sourceEditor=e.first)}},features:[h._Bn([Ms.L])],decls:21,vars:8,consts:[["size","large"],[3,"close"],["label","LBL_SOURCE_EDITOR"],[1,"slds-grid",2,"height","70vh"],[1,"slds-size--1-of-2","slds-p-right--xx-small"],[1,"slds-box","slds-theme--default","slds-scrollable_y","slds-rich-text-editor__output",2,"height","100%",3,"innerHtml"],[1,"slds-size--1-of-2","slds-p-left--x-small"],[1,"slds-p-bottom--xx-small","slds-grid"],["role","none",1,"slds-grow","slds-combobox__form-element","slds-input-has-icon","slds-input-has-icon_left-right","slds-global-search__form-element"],["icon","search","addclasses","slds-input__icon slds-input__icon--left"],["type","text",1,"slds-input",3,"placeholder","ngModel","keyup","ngModelChange"],["class","slds-grid slds-grid--align-spread slds-input__icon_right slds-is-absolute__top","style","height: 100%",4,"ngIf"],["class","slds-m-left--xx-small slds-button slds-button--icon-border slds-button--neutral",3,"disabled","title","click",4,"ngIf"],[1,"slds-m-left--xx-small","slds-button","slds-button--icon-border","slds-button--neutral",3,"disabled","click"],["icon","right_align_text"],[1,"slds-box","slds-m-around--none","slds-theme--default","slds-scrollable_y",2,"height","calc(100% - 36px)",3,"id","input"],["sourceeditor",""],[1,"slds-button","slds-button--neutral",3,"click"],["label","LBL_CLOSE"],[1,"slds-grid","slds-grid--align-spread","slds-input__icon_right","slds-is-absolute__top",2,"height","100%"],[1,"slds-button","slds-button_icon","slds-input__icon",2,"position","relative",3,"disabled","title","click"],["icon","arrowdown"],["icon","arrowup"],[1,"slds-m-left--xx-small","slds-button","slds-button--icon-border","slds-button--neutral",3,"disabled","title","click"],["icon","variable"]],template:function(e,t){1&e&&(h.TgZ(0,"system-modal",0)(1,"system-modal-header",1),h.NdJ("close",(function(){return t.close()})),h._UZ(2,"system-label",2),h.qZA(),h.TgZ(3,"system-modal-content")(4,"div",3)(5,"div",4),h._UZ(6,"div",5),h.qZA(),h.TgZ(7,"div",6)(8,"div",7)(9,"div",8),h._UZ(10,"system-utility-icon",9),h.TgZ(11,"input",10),h.NdJ("keyup",(function(e){return t.keyUp(e)}))("ngModelChange",(function(e){return t.searchText=e})),h.qZA(),h.YNc(12,Ns,5,4,"div",11),h.qZA(),h.YNc(13,Fs,2,2,"button",12),h.TgZ(14,"button",13),h.NdJ("click",(function(){return t.beautify()})),h._UZ(15,"system-button-icon",14),h.qZA()(),h.TgZ(16,"pre",15,16),h.NdJ("input",(function(e){return t.onContentChange(e.target.innerText)})),h.qZA()()()(),h.TgZ(18,"system-modal-footer")(19,"button",17),h.NdJ("click",(function(){return t.close()})),h._UZ(20,"system-label",18),h.qZA()()()),2&e&&(h.xp6(6),h.Q6J("innerHtml",t.sanitizedHtml,h.oJD),h.xp6(5),h.Q6J("placeholder",t.language.getLabel("LBL_SEARCH"))("ngModel",t.searchText),h.xp6(1),h.Q6J("ngIf",t.foundIndices.length>1),h.xp6(1),h.Q6J("ngIf",t.useTemplateVariableHelper),h.xp6(1),h.Q6J("disabled",!t.beautifyenabled),h.xp6(2),h.Q6J("id",t.editorId),h.uIk("contenteditable",!0))},dependencies:[o.O5,l.Fj,l.JJ,l.On,f.J,b._,v.j,Z.x,y.p,x.y,Js.r],encapsulation:2})),SystemRichTextSourceModal})();var Es=s(3369),Ys=s(2422),Ds=s(4361);function Qs(e,t){if(1&e){const e=h.EpF();h.TgZ(0,"li",7),h.NdJ("click",(function(){const t=h.CHM(e).$implicit,s=h.oxw();return h.KtG(s.setActiveRole(t.id))})),h.TgZ(1,"a",8)(2,"div")(3,"span",2),h._UZ(4,"system-label",3),h.qZA()(),h._UZ(5,"system-label",9),h.qZA()()}if(2&e){const e=t.$implicit;h.xp6(3),h.Q6J("ngClass",e.icon),h.xp6(1),h.Q6J("label",e.label),h.xp6(1),h.Q6J("label",e.label)}}let Us=(()=>{var e;class SystemRoleSelector{constructor(e,t,s,n){(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"broadcast",void 0),(0,i.Z)(this,"userpreferences",void 0),(0,i.Z)(this,"roles",[]),this.language=e,this.metadata=t,this.broadcast=s,this.userpreferences=n}ngOnInit(){this.getRoles()}getRoles(){this.roles=this.metadata.getRoles()}get activeRole(){return this.metadata.getActiveRole()}setActiveRole(e){this.metadata.setActiveRole(e),this.userpreferences.setPreference("userrole",e),this.broadcast.broadcastMessage("applauncher.setrole",e)}}return e=SystemRoleSelector,(0,i.Z)(SystemRoleSelector,"ɵfac",(function(t){return new(t||e)(h.Y36(m.d),h.Y36(g.Pu),h.Y36(Es.f),h.Y36(Ys.z))})),(0,i.Z)(SystemRoleSelector,"ɵcmp",h.Xpm({type:e,selectors:[["system-role-selector"]],decls:7,vars:5,consts:[["system-dropdown-trigger-simple","",1,"slds-dropdown-trigger","slds-dropdown-trigger_click"],[1,"slds-button","slds-p-horizontal--xx-small",3,"disabled","title"],[1,"slds-avatar--small","slds-align--absolute-center","slds-line-height_reset",2,"line-height","25px",3,"ngClass"],["length","short",3,"label"],[1,"slds-dropdown","slds-dropdown--bottom","slds-dropdown_right"],["role","menu","aria-label","Show More",1,"slds-dropdown__list"],["class","slds-dropdown__item","role","presentation",3,"click",4,"ngFor","ngForOf"],["role","presentation",1,"slds-dropdown__item",3,"click"],["href","javascript:void(0);","role","menuitem"],[1,"slds-grow","slds-p-left--x-small",3,"label"]],template:function(e,t){1&e&&(h.TgZ(0,"div",0)(1,"button",1)(2,"span",2),h._UZ(3,"system-label",3),h.qZA()(),h.TgZ(4,"div",4)(5,"ul",5),h.YNc(6,Qs,6,3,"li",6),h.qZA()()()),2&e&&(h.xp6(1),h.Q6J("disabled",t.roles.length<2)("title",t.language.getLabel(t.activeRole.label,void 0,"short")),h.xp6(1),h.Q6J("ngClass",t.activeRole.icon),h.xp6(1),h.Q6J("label",t.activeRole.label),h.xp6(3),h.Q6J("ngForOf",t.roles))},dependencies:[Ds.w,o.mk,o.sg,b._],encapsulation:2})),SystemRoleSelector})();var Rs=s(2868),js=s(3543),Bs=s(5185),Gs=s(3577),Ps=s(1691);function Hs(e,t){if(1&e&&h._UZ(0,"system-componentset",3),2&e){const e=h.oxw();h.Q6J("componentset",e.componentSetLeft)}}function zs(e,t){if(1&e&&h._UZ(0,"system-componentset",3),2&e){const e=h.oxw();h.Q6J("componentset",e.componentSetRight)}}let Vs=(()=>{var e;class SystemSplitView{constructor(){(0,i.Z)(this,"componentconfig",{})}get componentSetLeft(){return this.componentconfig.left}get componentSetRight(){return this.componentconfig.right}}return e=SystemSplitView,(0,i.Z)(SystemSplitView,"ɵfac",(function(t){return new(t||e)})),(0,i.Z)(SystemSplitView,"ɵcmp",h.Xpm({type:e,selectors:[["system-split-view"]],inputs:{componentconfig:"componentconfig"},decls:5,vars:2,consts:[[1,"slds-grid","slds-gutters_direct-xx-small"],[1,"slds-col","slds-size--1-of-1","slds-large-size--1-of-2"],[3,"componentset",4,"ngIf"],[3,"componentset"]],template:function(e,t){1&e&&(h.TgZ(0,"div",0)(1,"div",1),h.YNc(2,Hs,1,1,"system-componentset",2),h.qZA(),h.TgZ(3,"div",1),h.YNc(4,zs,1,1,"system-componentset",2),h.qZA()()),2&e&&(h.xp6(2),h.Q6J("ngIf",t.componentSetLeft),h.xp6(2),h.Q6J("ngIf",t.componentSetRight))},dependencies:[o.O5,P.E],encapsulation:2})),SystemSplitView})();var Ks=s(2803),$s=s(2161),Xs=s(9151);let Ws=(()=>{var e;class SystemTinyMCE{get content(){return this.elementContent}set content(e){this.elementContent=e,this.contentChange.emit(this.elementContent)}constructor(e,t){(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"configurationService",void 0),(0,i.Z)(this,"elementid","mytinymce"),(0,i.Z)(this,"height","250px"),(0,i.Z)(this,"stylesheetId",""),(0,i.Z)(this,"elementContent","new content"),(0,i.Z)(this,"tinymceConfig",{selector:"#"+this.elementid,remove_script_host:!0,relative_urls:!1,document_base_url:this.configurationService.getFrontendUrl(),menubar:!1,statusbar:!0,resize:!0,browser_spellcheck:!0,image_advtab:!0,paste_as_text:!0,paste_filter_drop:!0,plugins:["link","code","image","lists","paste","table"],toolbar:"undo redo | formatselect | styleselect bold italic removeformat | bullist numlist | link image table | code",skin_url:"vendor/tinymce/skins/lightgray",setup:e=>{this.editor=e,e.on("keyup",(()=>{const t=e.getContent();this.content=t}))},formats:{alignleft:{selector:"p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li,table,img",classes:"align-left"},aligncenter:{selector:"p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li,table,img",classes:"align-center"},alignright:{selector:"p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li,table,img",classes:"align-right"},alignjustify:{selector:"p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li,table,img",classes:"align-justify"},strikethrough:{inline:"del"}},style_formats:[{title:"Inline",items:[{title:"fett",icon:"bold",format:"bold"},{title:"kursiv",icon:"italic",format:"italic"},{title:"unterstrichen",icon:"underline",format:"underline"},{title:"strikethrough",icon:"strikethrough",format:"strikethrough"},{title:"hochgestellt",icon:"superscript",format:"superscript"},{title:"tiefgestellt",icon:"subscript",format:"subscript"}]},{title:"Ausrichtung",items:[{title:"links",icon:"alignleft",format:"alignleft"},{title:"mittig",icon:"aligncenter",format:"aligncenter"},{title:"rechts",icon:"alignright",format:"alignright"},{title:"Blocksatz",icon:"alignjustify",format:"alignjustify"}]}],style_formats_merge:!1,body_class:"spice"}),(0,i.Z)(this,"contentChange",new h.vpe),(0,i.Z)(this,"editor",void 0),this.metadata=e,this.configurationService=t}setStylesheet(){let e=[];if(_.isEmpty(this.stylesheetId))delete this.tinymceConfig.content_style;else{if(e=this.metadata.getHtmlFormats(this.stylesheetId),e.length){let t=0;this.tinymceConfig.block_formats="",this.tinymceConfig.extended_valid_elements=[],this.tinymceConfig.custom_elements=[],this.tinymceConfig.block_formats+="Absatz=p;",this.tinymceConfig.style_formats.push({title:"Weiteres",items:[]});for(let s of e)if(_.isEmpty(s.block))this.tinymceConfig.style_formats[2].items.push({title:s.name,inline:s.inline,classes:s.classes,styles:s.styles});else{let e;t++,this.tinymceConfig.formats[e="custom_format_"+t]={title:s.name,inline:s.inline,block:s.block,classes:s.classes,styles:s.styles,wrapper:Boolean(Number(s.wrapper))},this.tinymceConfig.block_formats+=s.name+"="+e+";",this.tinymceConfig.extended_valid_elements.indexOf(s.block)&&this.tinymceConfig.extended_valid_elements.push(s.block),this.tinymceConfig.custom_elements.indexOf(s.block)&&this.tinymceConfig.custom_elements.push(s.block)}0===this.tinymceConfig.style_formats[2].items.length&&this.tinymceConfig.style_formats.splice(2,1)}this.tinymceConfig.content_style=this.metadata.getHtmlStylesheetCode(this.stylesheetId)}}updateevent(){this.content=this.editor.getContent()}getStyle(){return{height:this.height}}ngAfterViewInit(){this.metadata.loadLibs("tinymce").subscribe((e=>{this.setStylesheet(),tinymce.init(this.tinymceConfig)}))}ngOnDestroy(){tinymce.remove(this.editor)}ngOnInit(){this.tinymceConfig.selector="#"+this.elementid,this.tinymceConfig.document_base_url=this.configurationService.getFrontendUrl()}}return e=SystemTinyMCE,(0,i.Z)(SystemTinyMCE,"ɵfac",(function(t){return new(t||e)(h.Y36(g.Pu),h.Y36(ke.C))})),(0,i.Z)(SystemTinyMCE,"ɵcmp",h.Xpm({type:e,selectors:[["system-tinymce"]],hostBindings:function(e,t){1&e&&h.NdJ("click",(function(){return t.updateevent()}))("keyup",(function(){return t.updateevent()}))},inputs:{elementid:"elementid",height:"height",stylesheetId:"stylesheetId",content:"content"},outputs:{contentChange:"contentChange"},decls:2,vars:3,consts:[[3,"id","ngStyle"]],template:function(e,t){1&e&&(h.TgZ(0,"textarea",0),h._uU(1),h.qZA()),2&e&&(h.s9C("id",t.elementid),h.Q6J("ngStyle",t.getStyle()),h.xp6(1),h.Oqu(t.content))},dependencies:[o.PC],styles:["[_nghost-%COMP%]   .mce-ico[_ngcontent-%COMP%]{color:#54698d;font-size:12px}","[_nghost-%COMP%]   .mce-text[_ngcontent-%COMP%]{color:#54698d;font-size:12px}","[_nghost-%COMP%]   .mce-btn[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{color:#54698d;font-size:12px}","[_nghost-%COMP%]   .mce-tinymce[_ngcontent-%COMP%]{border-radius:4px}","[_nghost-%COMP%]   .mce-widget[_ngcontent-%COMP%]{font-family:Titillium Web,sans-serif}"]})),SystemTinyMCE})(),ei=(()=>{var e;class SystemTinyMCEModal{constructor(e){(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"self",{}),(0,i.Z)(this,"content",""),(0,i.Z)(this,"stylesheetId",void 0),(0,i.Z)(this,"updateContent",new h.vpe),(0,i.Z)(this,"title",""),this.language=e}ngOnInit(){0===this.title.length&&(this.title=this.language.getLabel("LBL_EDITOR"))}closeModal(){this.self.destroy()}contentChange(e){this.content=e,this.updateContent.emit(e)}}return e=SystemTinyMCEModal,(0,i.Z)(SystemTinyMCEModal,"ɵfac",(function(t){return new(t||e)(h.Y36(m.d))})),(0,i.Z)(SystemTinyMCEModal,"ɵcmp",h.Xpm({type:e,selectors:[["ng-component"]],decls:8,vars:4,consts:[["size","large"],[3,"close"],[3,"content","stylesheetId","height","contentChange"],[1,"slds-button","slds-button--neutral",3,"click"],["label","LBL_OK"]],template:function(e,t){1&e&&(h.TgZ(0,"system-modal",0)(1,"system-modal-header",1),h.NdJ("close",(function(){return t.closeModal()})),h._uU(2),h.qZA(),h.TgZ(3,"system-modal-content")(4,"system-tinymce",2),h.NdJ("contentChange",(function(e){return t.content=e}))("contentChange",(function(e){return t.contentChange(e)})),h.qZA()(),h.TgZ(5,"system-modal-footer")(6,"button",3),h.NdJ("click",(function(){return t.closeModal()})),h._UZ(7,"system-label",4),h.qZA()()()),2&e&&(h.xp6(2),h.Oqu(t.title),h.xp6(2),h.Q6J("content",t.content)("stylesheetId",t.stylesheetId)("height","80%"))},dependencies:[b._,v.j,Z.x,y.p,x.y,Ws],encapsulation:2})),SystemTinyMCEModal})();var ti=s(2403),si=s(494),ii=s(3361),ni=s(8574);const oi=["imgupload"];function li(e,t){if(1&e){const e=h.EpF();h.TgZ(0,"div")(1,"button",5),h.NdJ("click",(function(){h.CHM(e);const t=h.oxw();return h.KtG(t.showUpload())})),h._UZ(2,"system-label",9),h.qZA(),h.TgZ(3,"input",10,11),h.NdJ("click",(function(){h.CHM(e);const t=h.MAs(4);return h.KtG(t.value=null)}))("change",(function(t){h.CHM(e);const s=h.oxw();return h.KtG(s.uploadImage(t))})),h.qZA()()}}function ai(e,t){if(1&e){const e=h.EpF();h.TgZ(0,"img",12),h.NdJ("load",(function(t){h.CHM(e);const s=h.oxw();return h.KtG(s.doCrop(t))})),h.qZA()}if(2&e){const e=h.oxw();h.Q6J("src",e.imageBase64,h.LSH)}}let di=(()=>{var e;class SystemUploadImage{constructor(e,t,s,n){(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"libloader",void 0),(0,i.Z)(this,"renderer",void 0),(0,i.Z)(this,"sanitizer",void 0),(0,i.Z)(this,"imgupload",void 0),(0,i.Z)(this,"cropheight",200),(0,i.Z)(this,"cropwidth",200),(0,i.Z)(this,"croptype","circle"),(0,i.Z)(this,"cropresize",!1),(0,i.Z)(this,"imagedata",new h.vpe),(0,i.Z)(this,"self",void 0),(0,i.Z)(this,"imageBase64",void 0),(0,i.Z)(this,"croppie",void 0),(0,i.Z)(this,"pasteListener",void 0),this.language=e,this.libloader=t,this.renderer=s,this.sanitizer=n,this.pasteListener=this.renderer.listen("window","paste",(e=>{e.preventDefault(),e.stopPropagation();let t=e.clipboardData.items[0].getAsFile(),s=window.URL;this.imageBase64=this.sanitizer.bypassSecurityTrustResourceUrl(s.createObjectURL(t))}))}get croppiestyle(){return{height:2*this.cropheight+"px"}}ngOnDestroy(){this.pasteListener()}close(e=!0){e&&this.imagedata.emit(!1),this.self.destroy()}showUpload(){let e=new MouseEvent("click",{bubbles:!0});this.imgupload.element.nativeElement.dispatchEvent(e)}uploadImage(e){let t=new FileReader;t.onloadend=e=>{this.imageBase64=t.result},t.readAsDataURL(e.target.files[0])}doCrop(e){this.croppie||(this.croppie=new Croppie(document.getElementById("croppieimage"),{enableExif:!0,enableOrientation:!0,enableZoom:!0,enforceBoundary:!1,mouseWheelZoom:!0,showZoomer:!0,enableResize:this.cropresize,viewport:{width:this.cropwidth,height:this.cropheight,type:this.croptype},boundary:{height:2*this.cropheight}}))}getcroppedImage(){this.croppie.result({type:"base64",size:"viewport"}).then((e=>{this.imagedata.emit(e),this.close(!1)}))}}return e=SystemUploadImage,(0,i.Z)(SystemUploadImage,"ɵfac",(function(t){return new(t||e)(h.Y36(m.d),h.Y36(Ss.$),h.Y36(h.Qsj),h.Y36(Lt.H7))})),(0,i.Z)(SystemUploadImage,"ɵcmp",h.Xpm({type:e,selectors:[["system-upload-image"]],viewQuery:function(e,t){if(1&e&&h.Gf(oi,5,h.s_b),2&e){let e;h.iGM(e=h.CRH())&&(t.imgupload=e.first)}},inputs:{cropheight:"cropheight",cropwidth:"cropwidth",croptype:"croptype",cropresize:"cropresize"},outputs:{imagedata:"imagedata"},decls:12,vars:4,consts:[[3,"close"],["label","LBL_UPLOAD_IMAGE"],[1,"slds-align--absolute-center","slds-scrollable--none",3,"ngStyle"],[4,"ngIf"],["id","croppieimage",3,"src","load",4,"ngIf"],[1,"slds-button","slds-button--neutral",3,"click"],["label","LBL_CANCEL"],[1,"slds-button","slds-button--brand",3,"disabled","click"],["label","LBL_USE"],["label","LBL_SELECT_IMAGE"],["type","file","accept","image/*",2,"display","none",3,"click","change"],["imgupload",""],["id","croppieimage",3,"src","load"]],template:function(e,t){1&e&&(h.TgZ(0,"system-modal")(1,"system-modal-header",0),h.NdJ("close",(function(){return t.close()})),h._UZ(2,"system-label",1),h.qZA(),h.TgZ(3,"system-modal-content")(4,"div",2),h.YNc(5,li,5,0,"div",3),h.YNc(6,ai,1,1,"img",4),h.qZA()(),h.TgZ(7,"system-modal-footer")(8,"button",5),h.NdJ("click",(function(){return t.close()})),h._UZ(9,"system-label",6),h.qZA(),h.TgZ(10,"button",7),h.NdJ("click",(function(){return t.getcroppedImage()})),h._UZ(11,"system-label",8),h.qZA()()()),2&e&&(h.xp6(4),h.Q6J("ngStyle",t.croppiestyle),h.xp6(1),h.Q6J("ngIf",!t.imageBase64),h.xp6(1),h.Q6J("ngIf",t.imageBase64),h.xp6(4),h.Q6J("disabled",!t.imageBase64))},dependencies:[o.O5,o.PC,b._,v.j,Z.x,y.p,x.y],encapsulation:2})),SystemUploadImage})();const ri=["popover"],ci=["popoverbody"];let ui=(()=>{var e;class SystemPopover{constructor(e){(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"popoverside","right"),(0,i.Z)(this,"popoverpos","top"),(0,i.Z)(this,"styles",null),(0,i.Z)(this,"hidePopoverTimeout",{}),(0,i.Z)(this,"popover",void 0),(0,i.Z)(this,"popoverbody",void 0),(0,i.Z)(this,"parentElementRef",null),(0,i.Z)(this,"self",null),(0,i.Z)(this,"componentset",void 0),(0,i.Z)(this,"component",void 0),(0,i.Z)(this,"heightcorrection",30),(0,i.Z)(this,"widthcorrection",30),this.metadata=e}onMouseOver(){this.hidePopoverTimeout&&window.clearTimeout(this.hidePopoverTimeout)}onMouseOut(){this.closePopover(!0)}get popoverStyle(){let e=this.parentElementRef.nativeElement.getBoundingClientRect(),t=this.popover.element.nativeElement.getBoundingClientRect();return window.innerWidth-e.left>t.width?this.popoverside="right":this.popoverside="left",e.top-30+t.height>window.innerHeight&&e.top-t.height+this.heightcorrection>0?(this.popoverpos="bottom",{top:e.top-t.height+this.heightcorrection+"px",left:"right"==this.popoverside?e.left+100+"px":e.left-t.width-this.widthcorrection+"px"}):(this.popoverpos="top",{top:e.top-this.heightcorrection+"px",left:"right"==this.popoverside?e.left+100+"px":e.left-t.width-this.widthcorrection+"px"})}get popoverBodyStyle(){return{"max-height":`calc(100vh - ${this.popoverbody.element.nativeElement.getBoundingClientRect().top+5}px)`}}ngOnInit(){this.styles=this.popoverStyle}getNubbinClass(){return("left"==this.popoverside?"slds-nubbin--right-":"slds-nubbin--left-")+this.popoverpos}closePopover(e=!1){e?this.self.destroy():this.hidePopoverTimeout=window.setTimeout((()=>this.self.destroy()),500)}}return e=SystemPopover,(0,i.Z)(SystemPopover,"ɵfac",(function(t){return new(t||e)(h.Y36(g.Pu))})),(0,i.Z)(SystemPopover,"ɵcmp",h.Xpm({type:e,selectors:[["ng-component"]],viewQuery:function(e,t){if(1&e&&(h.Gf(ri,7,h.s_b),h.Gf(ci,7,h.s_b)),2&e){let e;h.iGM(e=h.CRH())&&(t.popover=e.first),h.iGM(e=h.CRH())&&(t.popoverbody=e.first)}},decls:8,vars:4,consts:[["role","dialog",1,"slds-popover","slds-popover_large","slds-is-fixed",2,"transition",".5s",3,"ngStyle","ngClass","mouseenter","mouseleave"],[1,"slds-button","slds-button_icon","slds-button_icon","slds-button_icon-small","slds-float_right","slds-popover__close",3,"click"],["icon","close"],["popover",""],[1,"slds-popover__body","slds-scrollable--y",3,"ngStyle"],["popoverbody",""],[3,"componentset"]],template:function(e,t){1&e&&(h.TgZ(0,"div",0),h.NdJ("mouseenter",(function(){return t.onMouseOver()}))("mouseleave",(function(){return t.onMouseOut()})),h.TgZ(1,"button",1),h.NdJ("click",(function(){return t.closePopover(!0)})),h._UZ(2,"system-button-icon",2),h.qZA(),h.TgZ(3,"div",null,3)(5,"div",4,5),h._UZ(7,"system-componentset",6),h.qZA()()()),2&e&&(h.Q6J("ngStyle",t.popoverStyle)("ngClass",t.getNubbinClass()),h.xp6(5),h.Q6J("ngStyle",t.popoverBodyStyle),h.xp6(2),h.Q6J("componentset",t.componentset))},dependencies:[o.mk,o.PC,f.J,P.E],encapsulation:2})),SystemPopover})();var hi=s(2294),mi=s(3814);function gi(e,t){if(1&e&&h._UZ(0,"system-componentset",3),2&e){const e=h.oxw();h.Q6J("componentset",e.componentset)}}function pi(e,t){if(1&e){const e=h.EpF();h.TgZ(0,"div",4)(1,"button",5),h.NdJ("click",(function(){h.CHM(e);const t=h.oxw();return h.KtG(t.cancel())})),h._UZ(2,"system-label",6),h.qZA(),h.TgZ(3,"button",7),h.NdJ("click",(function(){h.CHM(e);const t=h.oxw();return h.KtG(t.save())})),h._UZ(4,"system-label",8),h.qZA()()}}const fi=function(e){return{editable:e}};let bi=(()=>{var e;class SystemViewContainer{constructor(e,t,s){(0,i.Z)(this,"view",void 0),(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"model",void 0),(0,i.Z)(this,"componentconfig",{}),this.view=e,this.language=t,this.model=s}get componentset(){return this.componentconfig.componentset}get editable(){return!(!this.model||!this.componentconfig.editable)}cancel(){this.model&&(this.model.cancelEdit(),this.view.setViewMode())}save(){this.model&&this.model.validate()&&(this.model.save(!0),this.view.setViewMode())}}return e=SystemViewContainer,(0,i.Z)(SystemViewContainer,"ɵfac",(function(t){return new(t||e)(h.Y36(hi.e),h.Y36(m.d),h.Y36(ms.o,8))})),(0,i.Z)(SystemViewContainer,"ɵcmp",h.Xpm({type:e,selectors:[["system-view-container"]],inputs:{componentconfig:"componentconfig"},decls:3,vars:5,consts:[[3,"system-view-provider"],[3,"componentset",4,"ngIf"],["class","slds-text-align--center slds-p-bottom--small",4,"ngIf"],[3,"componentset"],[1,"slds-text-align--center","slds-p-bottom--small"],[1,"slds-button","slds-button--neutral",3,"click"],["label","LBL_CANCEL"],[1,"slds-button","slds-button--brand","slds-button-space-left",3,"click"],["label","LBL_SAVE"]],template:function(e,t){1&e&&(h.TgZ(0,"div",0),h.YNc(1,gi,1,1,"system-componentset",1),h.YNc(2,pi,5,0,"div",2),h.qZA()),2&e&&(h.Q6J("system-view-provider",h.VKq(3,fi,t.editable)),h.xp6(1),h.Q6J("ngIf",t.componentset),h.xp6(1),h.Q6J("ngIf",t.view.isEditMode()))},dependencies:[mi.V,o.O5,P.E,b._],encapsulation:2})),SystemViewContainer})();var vi=s(8594),Zi=s(116);let _i=(()=>{var e;class SystemWrappedText{constructor(e){(0,i.Z)(this,"sanitizer",void 0),(0,i.Z)(this,"text",""),this.sanitizer=e}getHtml(){let e=this.text;return e=this.escapeHtml(e),e=e.replace(/ *\n( *\n)+ */g,'</div><div style="margin-top:0.5em">'),e=e.replace(/ *\n */g,"<br>"),this.sanitizer.bypassSecurityTrustHtml("<div>"+e+"</div>")}escapeHtml(e){let t={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#039;"};return e.replace(/[&<>"']/g,(e=>t[e]))}}return e=SystemWrappedText,(0,i.Z)(SystemWrappedText,"ɵfac",(function(t){return new(t||e)(h.Y36(Lt.H7))})),(0,i.Z)(SystemWrappedText,"ɵcmp",h.Xpm({type:e,selectors:[["system-wrapped-text"]],inputs:{text:"text"},decls:1,vars:1,consts:[[3,"innerHTML"]],template:function(e,t){1&e&&h._UZ(0,"div",0),2&e&&h.Q6J("innerHTML",t.getHtml(),h.oJD)},encapsulation:2})),SystemWrappedText})();var yi=s(5681),xi=s(1058),wi=s(4411);function Ti(e,t){1&e&&h._UZ(0,"system-spinner",10)}function Ci(e,t){if(1&e){const e=h.EpF();h.TgZ(0,"system-custom-icon",16),h.NdJ("click",(function(){h.CHM(e);const t=h.oxw(2);return h.KtG(t.setDefault())})),h.qZA()}if(2&e){const e=h.oxw(2);h.Q6J("icon",e.isDefault?"light-bulb-on":"light-bulb-off")}}function Ai(e,t){if(1&e){const e=h.EpF();h.TgZ(0,"button",17),h.NdJ("click",(function(){h.CHM(e);const t=h.oxw(2);return h.KtG(t.loadLanguage(t.package.language_code))})),h._UZ(1,"system-button-icon",18),h.qZA()}}function ki(e,t){if(1&e){const e=h.EpF();h.TgZ(0,"button",19),h.NdJ("click",(function(){h.CHM(e);const t=h.oxw(2);return h.KtG(t.deleteLanguage(t.package.language_code))})),h._UZ(1,"system-button-icon",20),h.qZA()}if(2&e){const e=h.oxw(2);h.Q6J("disabled",e.deletedisabled)}}function Li(e,t){if(1&e){const e=h.EpF();h.TgZ(0,"button",17),h.NdJ("click",(function(){h.CHM(e);const t=h.oxw(2);return h.KtG(t.loadLanguage(t.package.language_code))})),h._UZ(1,"system-button-icon",21),h.qZA()}}function Ii(e,t){if(1&e&&(h.TgZ(0,"div",11),h.YNc(1,Ci,1,1,"system-custom-icon",12),h.TgZ(2,"div",13),h.YNc(3,Ai,2,0,"button",14),h.YNc(4,ki,2,1,"button",15),h.YNc(5,Li,2,0,"button",14),h.qZA()()),2&e){const e=h.oxw();h.xp6(1),h.Q6J("ngIf",e.package.installed),h.xp6(2),h.Q6J("ngIf",!e.package.installed),h.xp6(1),h.Q6J("ngIf",e.package.installed&&!e.isDefault),h.xp6(1),h.Q6J("ngIf",e.package.installed)}}let Mi=(()=>{var e;class PackageLoaderLanguage{constructor(e,t,s,n,o){(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"backend",void 0),(0,i.Z)(this,"configurationService",void 0),(0,i.Z)(this,"loader",void 0),(0,i.Z)(this,"broadcast",void 0),(0,i.Z)(this,"package",void 0),(0,i.Z)(this,"repository",void 0),(0,i.Z)(this,"loading",!1),this.language=e,this.backend=t,this.configurationService=s,this.loader=n,this.broadcast=o}get isDefault(){return this.package.language_code==this.language.getDefaultLanguage()}get deletedisabled(){return this.isDefault||this.package.language_code==this.language.currentlanguage}get repositoryaddurl(){return this.repository&&this.repository.id?"/"+this.repository.id:""}setDefault(){this.isDefault||this.language.setDefaultLanguage(this.package.language_code)}loadLanguage(e){this.loading=!0,this.backend.getRequest("configuration/packages/language/"+e+this.repositoryaddurl).subscribe((t=>{this.loading=!1,t.success&&(this.package.installed=!0,this.language.addAvailableLanguage(t.languages[e]),this.language.currentlanguage==e?this.language.loadLanguage().subscribe((e=>{this.package.installed=!0})):this.package.installed=!0)}))}deleteLanguage(e){this.loading=!0,this.backend.deleteRequest("configuration/packages/language/"+e).subscribe((t=>{this.loading=!1,t&&(this.package.installed=!1,this.language.removeAvailableLanguage(e))}))}}return e=PackageLoaderLanguage,(0,i.Z)(PackageLoaderLanguage,"ɵfac",(function(t){return new(t||e)(h.Y36(m.d),h.Y36(We.y),h.Y36(ke.C),h.Y36(wi._),h.Y36(Es.f))})),(0,i.Z)(PackageLoaderLanguage,"ɵcmp",h.Xpm({type:e,selectors:[["package-loader-language"]],inputs:{package:"package",repository:"repository"},decls:11,vars:4,consts:[[1,"slds-card"],[1,"slds-card__header","slds-grid"],[1,"slds-media","slds-media_center","slds-has-flexi-truncate"],["size","small","icon","custom68","sprite","custom",1,"slds-p-right--xx-small"],[1,"slds-media__body"],[1,"slds-card__header-title"],[1,"slds-card__header-link","slds-truncate",3,"title"],[1,"slds-no-flex"],["size","12",4,"ngIf"],["class","slds-grid slds-grid_vertical-align-center",4,"ngIf"],["size","12"],[1,"slds-grid","slds-grid_vertical-align-center"],["class","slds-p-horizontal--xx-small","size","x-small",3,"icon","click",4,"ngIf"],["role","group",1,"slds-button-group"],["class","slds-button slds-button_icon slds-button_icon-border-filled",3,"click",4,"ngIf"],["class","slds-button slds-button_icon slds-button_icon-border-filled",3,"disabled","click",4,"ngIf"],["size","x-small",1,"slds-p-horizontal--xx-small",3,"icon","click"],[1,"slds-button","slds-button_icon","slds-button_icon-border-filled",3,"click"],["icon","download"],[1,"slds-button","slds-button_icon","slds-button_icon-border-filled",3,"disabled","click"],["icon","delete"],["icon","refresh"]],template:function(e,t){1&e&&(h.TgZ(0,"article",0)(1,"div",1)(2,"header",2),h._UZ(3,"system-icon",3),h.TgZ(4,"div",4)(5,"h2",5)(6,"div",6),h._uU(7),h.qZA()()(),h.TgZ(8,"div",7),h.YNc(9,Ti,1,0,"system-spinner",8),h.YNc(10,Ii,6,4,"div",9),h.qZA()()()()),2&e&&(h.xp6(6),h.Q6J("title",t.package.language_name),h.xp6(1),h.hij(" ",t.package.language_name," "),h.xp6(2),h.Q6J("ngIf",t.loading),h.xp6(1),h.Q6J("ngIf",!t.loading))},dependencies:[o.O5,f.J,V.$,ae.f,ge.W],encapsulation:2})),PackageLoaderLanguage})();function Si(e,t){if(1&e&&(h.TgZ(0,"div",3),h._UZ(1,"package-loader-language",4),h.qZA()),2&e){const e=t.$implicit,s=h.oxw();h.xp6(1),h.Q6J("package",e)("repository",s.repository)}}let Ji=(()=>{var e;class PackageLoaderLanguages{constructor(){(0,i.Z)(this,"languages",[]),(0,i.Z)(this,"repository",void 0)}}return e=PackageLoaderLanguages,(0,i.Z)(PackageLoaderLanguages,"ɵfac",(function(t){return new(t||e)})),(0,i.Z)(PackageLoaderLanguages,"ɵcmp",h.Xpm({type:e,selectors:[["package-loader-languages"]],inputs:{languages:"languages",repository:"repository"},decls:3,vars:1,consts:[["system-to-bottom","","role","tabpanel"],[1,"slds-grid","slds-wrap"],["class","slds-size--1-of-2 slds-p-around--xx-small",4,"ngFor","ngForOf"],[1,"slds-size--1-of-2","slds-p-around--xx-small"],[3,"package","repository"]],template:function(e,t){1&e&&(h.TgZ(0,"div",0)(1,"div",1),h.YNc(2,Si,2,2,"div",2),h.qZA()()),2&e&&(h.xp6(2),h.Q6J("ngForOf",t.languages))},dependencies:[xi.H,o.sg,Mi],encapsulation:2})),PackageLoaderLanguages})();function Oi(e,t){if(1&e){const e=h.EpF();h.TgZ(0,"button",21),h.NdJ("click",(function(){h.CHM(e);const t=h.oxw();return h.KtG(t.loadPackage(t.package.package))})),h._UZ(1,"system-button-icon",22),h.qZA()}if(2&e){const e=h.oxw();h.Q6J("disabled",e.disabled)}}function Ni(e,t){if(1&e){const e=h.EpF();h.TgZ(0,"button",21),h.NdJ("click",(function(){h.CHM(e);const t=h.oxw();return h.KtG(t.deletePackage(t.package.package))})),h._UZ(1,"system-button-icon",23),h.qZA()}if(2&e){const e=h.oxw();h.Q6J("disabled",e.disabled)}}function Fi(e,t){if(1&e){const e=h.EpF();h.TgZ(0,"button",21),h.NdJ("click",(function(){h.CHM(e);const t=h.oxw();return h.KtG(t.loadPackage(t.package.package))})),h._UZ(1,"system-button-icon",24),h.qZA()}if(2&e){const e=h.oxw();h.Q6J("disabled",e.disabled)}}function qi(e,t){if(1&e&&(h.TgZ(0,"div",25)(1,"div",26),h._UZ(2,"system-utility-icon",27),h._uU(3),h.qZA(),h.TgZ(4,"div",28),h._UZ(5,"system-utility-icon",29),h.qZA()()),2&e){const e=t.$implicit,s=h.oxw();h.xp6(2),h.Q6J("colorclass",s.disabled?"slds-icon-text-light":"slds-icon-text-default"),h.xp6(1),h.hij(" ",e.name,""),h.xp6(2),h.Q6J("icon",e.status?"check":"close")("colorclass",s.disabled?"slds-icon-text-light":"slds-icon-text-default")}}function Ei(e,t){if(1&e&&(h.TgZ(0,"div",25)(1,"div",26),h._UZ(2,"system-utility-icon",30),h._uU(3),h.qZA(),h.TgZ(4,"div",28),h._UZ(5,"system-utility-icon",29),h.qZA()()),2&e){const e=t.$implicit,s=h.oxw();h.xp6(2),h.Q6J("colorclass",s.disabled?"slds-icon-text-light":"slds-icon-text-default"),h.xp6(1),h.hij(" ",e.package,""),h.xp6(2),h.Q6J("icon",e.installed?"check":"close")("colorclass",s.disabled?"slds-icon-text-light":"slds-icon-text-default")}}function Yi(e,t){1&e&&(h.TgZ(0,"div",31),h._UZ(1,"system-label",32),h.qZA())}function Di(e,t){1&e&&(h.TgZ(0,"div",36),h._UZ(1,"system-spinner",37),h.TgZ(2,"span",38),h._UZ(3,"system-label",39),h.qZA()())}function Qi(e,t){1&e&&h._UZ(0,"system-loader-progress",40)}function Ui(e,t){if(1&e&&(h.TgZ(0,"div",33),h.YNc(1,Di,4,0,"div",34),h.YNc(2,Qi,1,0,"system-loader-progress",35),h.qZA()),2&e){const e=h.oxw();h.xp6(1),h.Q6J("ngIf","package"==e.loading),h.xp6(1),h.Q6J("ngIf","configuration"==e.loading)}}const Ri=function(e){return{"slds-disabled-text":e}},ji=function(e){return{"slds-hidden":e}};let Bi=(()=>{var e;class PackageLoaderPackage{constructor(e,t,s,n,o,l){(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"backend",void 0),(0,i.Z)(this,"configurationService",void 0),(0,i.Z)(this,"loader",void 0),(0,i.Z)(this,"modal",void 0),(0,i.Z)(this,"broadcast",void 0),(0,i.Z)(this,"package",void 0),(0,i.Z)(this,"packages",[]),(0,i.Z)(this,"repository",void 0),(0,i.Z)(this,"extensions",[]),(0,i.Z)(this,"requiredpackages",[]),(0,i.Z)(this,"loading",""),this.language=e,this.backend=t,this.configurationService=s,this.loader=n,this.modal=o,this.broadcast=l}get disabled(){if(this.package.package.installed)return!1;let e=!1;return this.extensions.forEach((t=>{t.status||(e=!0)})),this.requiredpackages.forEach((t=>{t.installed||(e=!0)})),e}get repositoryaddurl(){return this.repository&&this.repository.id?"/"+this.repository.id:""}ngOnInit(){if(this.package.extensions)for(let e of this.package.extensions.split(",")){let t=this.configurationService.checkCapability(e);this.extensions.push({name:e,status:t})}this.package.packages&&(this.requiredpackages=this.packages.filter((e=>this.package.packages.split(",").indexOf(e.package)>=0)))}loadPackage(e){this.loading="package",this.backend.getRequest("configuration/packages/package/"+e+this.repositoryaddurl).subscribe((e=>{this.loading="configuration",this.loader.reloadPrimary().subscribe((e=>{this.package.installed=!0,this.broadcast.broadcastMessage("loader.reloaded"),this.loading=""}))}),(e=>{this.executeDB(),this.loading=""}))}executeDB(){this.modal.confirm("MSG_PACKAGE_REPAIR_DB","LBL_REPAIR_DATABASE","error").subscribe((e=>{if(!e)return;const t=this.modal.await(this.language.getLabel("LBL_PROCESSING"));this.backend.getRequest("admin/repair/sql").subscribe((e=>{t.next(!0),t.complete(),e&&this.modal.openModal("AdministrationDictRepairModal",!0).subscribe((t=>{t.instance.sql=e.sql,t.instance.wholeSQL=e.wholeSQL}))}))}))}deletePackage(e){this.loading="package",this.backend.deleteRequest("configuration/packages/package/"+e).subscribe((e=>{this.loading="configuration",this.package.installed=!1,this.loader.reloadPrimary().subscribe((e=>{this.broadcast.broadcastMessage("loader.reloaded"),this.loading=""}))}))}}return e=PackageLoaderPackage,(0,i.Z)(PackageLoaderPackage,"ɵfac",(function(t){return new(t||e)(h.Y36(m.d),h.Y36(We.y),h.Y36(ke.C),h.Y36(wi._),h.Y36(tt.o),h.Y36(Es.f))})),(0,i.Z)(PackageLoaderPackage,"ɵcmp",h.Xpm({type:e,selectors:[["package-loader-package"]],inputs:{package:"package",packages:"packages",repository:"repository"},decls:28,vars:16,consts:[[1,"slds-card",3,"ngClass"],[3,"ngClass"],[1,"slds-card__header","slds-grid"],[1,"slds-media","slds-media_center","slds-has-flexi-truncate"],["size","small","icon","custom13","sprite","custom",1,"slds-p-right--xx-small"],[1,"slds-media__body"],[1,"slds-card__header-title"],[1,"slds-card__header-link","slds-truncate",3,"title"],[1,"slds-no-flex"],["role","group",1,"slds-button-group"],["class","slds-button slds-button_icon slds-button_icon-border-filled",3,"disabled","click",4,"ngIf"],[1,"slds-card__body","slds-p-horizontal--small"],[1,"slds-grid","slds-gutters_direct-x-small"],[1,"slds-size--1-of-2","slds-col"],[1,"slds-text-heading_small","slds-p-vertical--xx-small"],["label","LBL_DETAILS"],[1,"slds-text-align--justify"],["label","LBL_PREREQUISITES"],["class","slds-grid slds-grid_vertical-align-center slds-p-vertical--xxx-small",4,"ngFor","ngForOf"],["class","slds-disabled-text",4,"ngIf"],["class","slds-is-absolute__top slds-size_full slds-height_full slds-align_absolute-center",4,"ngIf"],[1,"slds-button","slds-button_icon","slds-button_icon-border-filled",3,"disabled","click"],["icon","download"],["icon","delete"],["icon","refresh"],[1,"slds-grid","slds-grid_vertical-align-center","slds-p-vertical--xxx-small"],[1,"slds-size--1-of-2","slds-truncate"],["icon","apex_plugin","size","xx-small",3,"colorclass"],[1,"slds-size--1-of-2","slds-text-align--right"],["size","xx-small",3,"icon","colorclass"],["icon","archive","size","xx-small",3,"colorclass"],[1,"slds-disabled-text"],["label","LBL_NO_PREREQUISITES"],[1,"slds-is-absolute__top","slds-size_full","slds-height_full","slds-align_absolute-center"],["class","slds-grid slds-grid_vertical-align-center",4,"ngIf"],["class","slds-size_full",4,"ngIf"],[1,"slds-grid","slds-grid_vertical-align-center"],["size","16"],[1,"slds-p-left--small"],["label","LBL_LOADING"],[1,"slds-size_full"]],template:function(e,t){1&e&&(h.TgZ(0,"article",0)(1,"div",1)(2,"div",2)(3,"header",3),h._UZ(4,"system-icon",4),h.TgZ(5,"div",5)(6,"h2",6)(7,"div",7),h._uU(8),h.qZA()()(),h.TgZ(9,"div",8)(10,"div",9),h.YNc(11,Oi,2,1,"button",10),h.YNc(12,Ni,2,1,"button",10),h.YNc(13,Fi,2,1,"button",10),h.qZA()()()(),h.TgZ(14,"div",11)(15,"div",12)(16,"div",13)(17,"div",14),h._UZ(18,"system-label",15),h.qZA(),h.TgZ(19,"div",16),h._uU(20),h.qZA()(),h.TgZ(21,"div",13)(22,"div",14),h._UZ(23,"system-label",17),h.qZA(),h.YNc(24,qi,6,4,"div",18),h.YNc(25,Ei,6,4,"div",18),h.YNc(26,Yi,2,0,"div",19),h.qZA()()()(),h.YNc(27,Ui,3,2,"div",20),h.qZA()),2&e&&(h.Q6J("ngClass",h.VKq(12,Ri,t.disabled)),h.xp6(1),h.Q6J("ngClass",h.VKq(14,ji,t.loading)),h.xp6(6),h.Q6J("title",t.package.name),h.xp6(1),h.hij(" ",t.package.name," "),h.xp6(3),h.Q6J("ngIf",!t.package.installed),h.xp6(1),h.Q6J("ngIf",t.package.installed&&"core"!=t.package.package),h.xp6(1),h.Q6J("ngIf",t.package.installed),h.xp6(7),h.Oqu(t.package.description),h.xp6(4),h.Q6J("ngForOf",t.extensions),h.xp6(1),h.Q6J("ngForOf",t.requiredpackages),h.xp6(1),h.Q6J("ngIf",0==t.requiredpackages.length&&0==t.extensions.length),h.xp6(1),h.Q6J("ngIf",t.loading))},dependencies:[o.mk,o.sg,o.O5,f.J,ae.f,b._,ft.e,ge.W,Js.r],encapsulation:2})),PackageLoaderPackage})(),Gi=(()=>{var e;class PackageLoaderPipe{transform(e,t,s){return e.filter((e=>(!s||e.type==s)&&!(t&&!(t&&e.name.toLowerCase().indexOf(t.toLowerCase())>=0))))}}return e=PackageLoaderPipe,(0,i.Z)(PackageLoaderPipe,"ɵfac",(function(t){return new(t||e)})),(0,i.Z)(PackageLoaderPipe,"ɵpipe",h.Yjl({name:"packageloaderpipe",type:e,pure:!0})),PackageLoaderPipe})();function Pi(e,t){if(1&e&&(h.TgZ(0,"div",7),h._UZ(1,"package-loader-package",8),h.qZA()),2&e){const e=t.$implicit,s=h.oxw();h.xp6(1),h.Q6J("package",e)("packages",s.packages)("repository",s.repository)}}let Hi=(()=>{var e;class PackageLoaderPackages{constructor(e){(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"packagescope",""),(0,i.Z)(this,"packagefilterterm",""),(0,i.Z)(this,"packages",[]),(0,i.Z)(this,"repository",void 0),this.language=e}}return e=PackageLoaderPackages,(0,i.Z)(PackageLoaderPackages,"ɵfac",(function(t){return new(t||e)(h.Y36(m.d))})),(0,i.Z)(PackageLoaderPackages,"ɵcmp",h.Xpm({type:e,selectors:[["package-loader-packages"]],inputs:{packagescope:"packagescope",packages:"packages",repository:"repository"},decls:8,vars:7,consts:[["system-to-bottom","","role","tabpanel"],[1,"slds-p-vertical--x-small","slds-p-horizontal--xx-small"],[1,"slds-form-element"],[1,"slds-form-element__control"],["type","text",1,"slds-input",3,"ngModel","placeholder","ngModelChange"],[1,"slds-grid","slds-wrap"],["class","slds-size--1-of-2 slds-p-around--xx-small",4,"ngFor","ngForOf"],[1,"slds-size--1-of-2","slds-p-around--xx-small"],[3,"package","packages","repository"]],template:function(e,t){1&e&&(h.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"input",4),h.NdJ("ngModelChange",(function(e){return t.packagefilterterm=e})),h.qZA()()()(),h.TgZ(5,"div",5),h.YNc(6,Pi,2,3,"div",6),h.ALo(7,"packageloaderpipe"),h.qZA()()),2&e&&(h.xp6(4),h.Q6J("ngModel",t.packagefilterterm)("placeholder",t.language.getLabel("LBL_SEARCH")),h.xp6(2),h.Q6J("ngForOf",h.Dn7(7,3,t.packages,t.packagefilterterm,t.packagescope)))},dependencies:[xi.H,o.sg,l.Fj,l.JJ,l.On,Bi,Gi],encapsulation:2})),PackageLoaderPackages})();function zi(e,t){1&e&&(h.TgZ(0,"div",17),h._UZ(1,"system-icon",18),h.TgZ(2,"span",19),h._UZ(3,"system-label",20),h.qZA()())}function Vi(e,t){if(1&e&&(h.TgZ(0,"div",21),h._UZ(1,"system-icon",18),h.TgZ(2,"span",19),h._UZ(3,"system-label",22),h._uU(4),h.qZA()()),2&e){const e=h.oxw();h.xp6(4),h.hij(": ",e.errorpackagesdisplay,"")}}function Ki(e,t){if(1&e){const e=h.EpF();h.TgZ(0,"li",34),h.NdJ("click",(function(){const t=h.CHM(e).$implicit,s=h.oxw(2);return h.KtG(s.selectRepository(t))})),h.TgZ(1,"div",35)(2,"div",36),h._uU(3),h.qZA()()()}if(2&e){const e=t.$implicit;h.xp6(3),h.Oqu(e.name)}}function $i(e,t){if(1&e){const e=h.EpF();h.TgZ(0,"div",23)(1,"div",24)(2,"div",25)(3,"div",26)(4,"div",27)(5,"div",28)(6,"input",29),h.NdJ("ngModelChange",(function(t){h.CHM(e);const s=h.oxw();return h.KtG(s.repositoryname=t)})),h.qZA(),h._UZ(7,"system-icon",30),h.qZA(),h.TgZ(8,"div",31)(9,"ul",32),h.YNc(10,Ki,4,1,"li",33),h.qZA()()()()()()()}if(2&e){const e=h.oxw();h.xp6(4),h.Q6J("system-dropdown-trigger",e.repositories.length<=1),h.xp6(2),h.Q6J("ngModel",e.repositoryname)("disabled",e.repositories.length<=1),h.xp6(4),h.Q6J("ngForOf",e.repositories)}}const Xi=function(e){return{"slds-is-active":e}},Wi=function(e,t){return{"slds-show":e,"slds-hide":t}};function en(e,t){if(1&e){const e=h.EpF();h.TgZ(0,"div",37)(1,"ul",38)(2,"li",39)(3,"a",40),h.NdJ("click",(function(){h.CHM(e);const t=h.oxw();return h.KtG(t.scope="essentials")})),h._UZ(4,"system-label",41),h.qZA()(),h.TgZ(5,"li",39)(6,"a",40),h.NdJ("click",(function(){h.CHM(e);const t=h.oxw();return h.KtG(t.scope="packages")})),h._UZ(7,"system-label",42),h.qZA()(),h.TgZ(8,"li",43)(9,"a",40),h.NdJ("click",(function(){h.CHM(e);const t=h.oxw();return h.KtG(t.scope="languages")})),h._UZ(10,"system-label",44),h.qZA()(),h.TgZ(11,"li",39)(12,"a",40),h.NdJ("click",(function(){h.CHM(e);const t=h.oxw();return h.KtG(t.scope="content")})),h._UZ(13,"system-label",45),h.qZA()()(),h._UZ(14,"package-loader-packages",46)(15,"package-loader-packages",47)(16,"package-loader-languages",48)(17,"package-loader-packages",49),h.qZA()}if(2&e){const e=h.oxw();h.xp6(2),h.Q6J("ngClass",h.VKq(19,Xi,"essentials"==e.scope))("title",e.language.getLabel("LBL_ESSENTIALS")),h.xp6(3),h.Q6J("ngClass",h.VKq(21,Xi,"packages"==e.scope))("title",e.language.getLabel("LBL_PACKAGES")),h.xp6(3),h.Q6J("ngClass",h.VKq(23,Xi,"languages"==e.scope)),h.xp6(3),h.Q6J("ngClass",h.VKq(25,Xi,"content"==e.scope))("title",e.language.getLabel("LBL_CONTENT")),h.xp6(3),h.Q6J("ngClass",h.WLB(27,Wi,"essentials"==e.scope,"essentials"!=e.scope))("packages",e.packages)("repository",e.repository),h.xp6(1),h.Q6J("ngClass",h.WLB(30,Wi,"packages"==e.scope,"packages"!=e.scope))("packages",e.packages)("repository",e.repository),h.xp6(1),h.Q6J("ngClass",h.WLB(33,Wi,"languages"==e.scope,"languages"!=e.scope))("languages",e.languages)("repository",e.repository),h.xp6(1),h.Q6J("ngClass",h.WLB(36,Wi,"content"==e.scope,"content"!=e.scope))("packages",e.packages)("repository",e.repository)}}function tn(e,t){1&e&&(h.TgZ(0,"div",50)(1,"h2",51),h._uU(2,"Please select a Repository"),h.qZA()())}function sn(e,t){1&e&&(h.TgZ(0,"div",52)(1,"div",21),h._UZ(2,"system-spinner",53),h.TgZ(3,"div",54),h._UZ(4,"system-label",55),h.qZA()()())}let nn=(()=>{var e;class PackageLoader{constructor(e,t,s,n){(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"backend",void 0),(0,i.Z)(this,"toast",void 0),(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"scope","essentials"),(0,i.Z)(this,"loading",!0),(0,i.Z)(this,"packagefilterterm",""),(0,i.Z)(this,"repositories",[]),(0,i.Z)(this,"repository",void 0),(0,i.Z)(this,"packages",[]),(0,i.Z)(this,"versions",[]),(0,i.Z)(this,"languages",[]),(0,i.Z)(this,"opencrs",!1),(0,i.Z)(this,"errorpackages",[]),this.language=e,this.backend=t,this.toast=s,this.metadata=n,this.backend.getRequest("configuration/packages/repositories").subscribe((e=>{this.loading=!1,this.repositories=e,0==this.repositories.length?(this.repository="default",this.loadpackages()):1==this.repositories.length&&(this.repository=this.repositories[0],this.loadpackages())}),(e=>{this.loading=!1}))}get errorpackagesdisplay(){return this.errorpackages.join(", ")}set repositoryname(e){this.repository.name=e}get repositoryname(){return this.repository&&this.repository.name?this.repository.name:""}get repositoryaddurl(){return this.repository&&this.repository.id?"/"+this.repository.id:""}loadpackages(){this.loading=!0,this.packages=[],this.languages=[],this.opencrs=!1,this.errorpackages=[],this.backend.getRequest("configuration/packages"+this.repositoryaddurl).subscribe((e=>{this.loading=!1;try{let t=this.language.getAvialableLanguages(!0);for(let s of e.languages)t.some((e=>{if(e.language==s.language_code)return s.installed=!0,!0})),this.languages.push(s);for(let t of e.packages){let s=e.loaded.packages.indexOf(t.package);s>=0?(t.installed=!0,e.loaded.packages.splice(s,1)):t.installed=!1,this.packages.push(t)}this.versions=e.versions,this.opencrs=e.opencrs,this.errorpackages=e.loaded.packages}catch(e){console.error(e)}}),(e=>{this.loading=!1}))}selectRepository(e){this.repository=e,this.loadpackages()}}return e=PackageLoader,(0,i.Z)(PackageLoader,"ɵfac",(function(t){return new(t||e)(h.Y36(m.d),h.Y36(We.y),h.Y36(p.A),h.Y36(g.Pu))})),(0,i.Z)(PackageLoader,"ɵcmp",h.Xpm({type:e,selectors:[["package-loader"]],decls:18,vars:6,consts:[[1,"slds-p-around--medium","slds-theme--shade"],[1,"slds-page-header__row"],[1,"slds-page-header__col-title"],[1,"slds-media"],["icon","custom19","sprite","custom"],[1,"slds-media__body"],[1,"slds-page-header__name"],[1,"slds-page-header__name-title"],[1,"slds-page-header__title","slds-truncate"],["label","LBL_PACKAGE_LOADER"],[1,"slds-page-header__name-meta","slds-grid"],["class","slds-grid slds-grid_vertical-align-center slds-p-right--small",4,"ngIf"],["class","slds-grid slds-grid_vertical-align-center",4,"ngIf"],["class","slds-page-header__col-actions",4,"ngIf"],["class","slds-theme--default",4,"ngIf"],["system-to-bottom","","class","slds-theme--default slds-align--absolute-center",4,"ngIf"],["system-to-bottom","","class","slds-align_absolute-center",4,"ngIf"],[1,"slds-grid","slds-grid_vertical-align-center","slds-p-right--small"],["addclasses","slds-icon slds-icon-text-warning","divClass","","icon","warning","sprite","utility","size","xx-small"],[1,"slds-p-left--xx-small"],["label","LBL_OPEN_CHANGEREQUESTS"],[1,"slds-grid","slds-grid_vertical-align-center"],["label","LBL_ERRONEUOS_PACKAGES"],[1,"slds-page-header__col-actions"],[1,"slds-form-element"],[1,"slds-form-element__control"],[1,"slds-combobox_container"],["role","combobox",1,"slds-combobox","slds-dropdown-trigger","slds-dropdown-trigger_click",3,"system-dropdown-trigger"],["role","none",1,"slds-combobox__form-element","slds-input-has-icon","slds-input-has-icon_right"],["type","text","autoComplete","off","role","textbox",1,"slds-input","slds-combobox__input",3,"ngModel","disabled","ngModelChange"],["icon","down","sprite","utility","size","x-small","addclasses","slds-icon_container slds-icon-utility-down slds-input__icon slds-input__icon_right"],["role","listbox",1,"slds-dropdown","slds-dropdown_length-5","slds-dropdown--x-small"],["role","presentation",1,"slds-listbox","slds-listbox_vertical"],["role","presentation","class","slds-listbox__item",3,"click",4,"ngFor","ngForOf"],["role","presentation",1,"slds-listbox__item",3,"click"],["role","option",1,"slds-listbox__option","slds-listbox__option_plain"],["title","Express Logistics and Transport",1,"slds-truncate"],[1,"slds-theme--default"],["role","tablist",1,"slds-tabs_default__nav"],["role","presentation",1,"slds-tabs_default__item",3,"ngClass","title"],["href","javascript:void(0);","role","tab",1,"slds-tabs_default__link",3,"click"],["label","LBL_ESSENTIALS"],["label","LBL_PACKAGES"],["title","language.getLabel('LBL_LANGUAGES')","role","presentation",1,"slds-tabs_default__item",3,"ngClass"],["label","LBL_LANGUAGES"],["label","LBL_CONTENT"],["packagescope","essentials",3,"ngClass","packages","repository"],["packagescope","config",3,"ngClass","packages","repository"],[3,"ngClass","languages","repository"],["packagescope","content",3,"ngClass","packages","repository"],["system-to-bottom","",1,"slds-theme--default","slds-align--absolute-center"],[1,"slds-text-heading--medium","slds-p-vertical--small"],["system-to-bottom","",1,"slds-align_absolute-center"],["size","16"],[1,"slds-p-horizontal--small"],["label","LBL_RETRIEVING_PACKAGES"]],template:function(e,t){1&e&&(h.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),h._UZ(4,"system-icon",4),h.TgZ(5,"div",5)(6,"div",6)(7,"div",7)(8,"h1")(9,"span",8),h._UZ(10,"system-label",9),h.qZA()()()(),h.TgZ(11,"div",10),h.YNc(12,zi,4,0,"div",11),h.YNc(13,Vi,5,1,"div",12),h.qZA()()()(),h.YNc(14,$i,11,4,"div",13),h.qZA()(),h.YNc(15,en,18,39,"div",14),h.YNc(16,tn,3,0,"div",15),h.YNc(17,sn,5,0,"div",16)),2&e&&(h.xp6(12),h.Q6J("ngIf",t.opencrs),h.xp6(1),h.Q6J("ngIf",t.errorpackages.length>0),h.xp6(1),h.Q6J("ngIf",t.repositories.length>0),h.xp6(1),h.Q6J("ngIf",!t.loading&&t.repository),h.xp6(1),h.Q6J("ngIf",!t.loading&&!t.repository),h.xp6(1),h.Q6J("ngIf",t.loading))},dependencies:[yi.l,xi.H,o.mk,o.sg,o.O5,l.Fj,l.JJ,l.On,Ji,Hi,ae.f,b._,ge.W],encapsulation:2})),PackageLoader})();var on=s(3617);let ln=(()=>{var e;class SystemFilterBuilder{constructor(){(0,i.Z)(this,"module",void 0),(0,i.Z)(this,"onChange",void 0),(0,i.Z)(this,"onTouched",void 0),(0,i.Z)(this,"_conditions",{logicaloperator:"and",groupscope:"all",conditions:[]})}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}writeValue(e){if(e&&!_.isEmpty(e)){let t={logicaloperator:e.logicaloperator,groupscope:e.groupscope,conditions:[...e.conditions]};this._conditions=t}}expressionChanged(){let e=[];for(let t of this._conditions.conditions)!0!==t.deleted&&e.push(t);this._conditions.conditions=e,_.isEmpty(this._conditions.conditions)?this.onChange(null):this.onChange({...this._conditions})}}return e=SystemFilterBuilder,(0,i.Z)(SystemFilterBuilder,"ɵfac",(function(t){return new(t||e)})),(0,i.Z)(SystemFilterBuilder,"ɵcmp",h.Xpm({type:e,selectors:[["system-filter-builder"]],inputs:{module:"module"},features:[h._Bn([{provide:l.JU,useExisting:(0,h.Gpc)((()=>e)),multi:!0}])],decls:1,vars:2,consts:[[3,"filtergroup","module","expressionChanged"]],template:function(e,t){1&e&&(h.TgZ(0,"system-filter-builder-expression-group",0),h.NdJ("expressionChanged",(function(){return t.expressionChanged()})),h.qZA()),2&e&&h.Q6J("filtergroup",t._conditions)("module",t.module)},dependencies:[on.s],encapsulation:2})),SystemFilterBuilder})();var an=s(1230),dn=s(7706),rn=s(7617),cn=s(7720),un=s(2547),hn=s(6449),mn=s(6991),gn=s(6041),pn=s(5861),fn=s(3441),bn=s(9774);const vn=["inputFile"];function Zn(e,t){if(1&e){const e=h.EpF();h.TgZ(0,"div",3)(1,"div",4),h.NdJ("system-drop-file",(function(t){h.CHM(e);const s=h.oxw();return h.KtG(s.uploadFile(t))})),h.TgZ(2,"input",5,6),h.NdJ("change",(function(){h.CHM(e);const t=h.MAs(3),s=h.oxw();return h.KtG(s.uploadFile(t.files))}))("click",(function(){h.CHM(e);const t=h.MAs(3);return h.KtG(t.value=null)})),h.qZA(),h.TgZ(4,"label",7)(5,"span",8),h._UZ(6,"system-button-icon",9)(7,"system-label",10),h.qZA(),h.TgZ(8,"span",11),h._UZ(9,"system-label",12)(10,"system-label",13),h.qZA()()()()}if(2&e){const e=h.oxw();h.xp6(2),h.Q6J("accept",e.accept)("disabled",e.disabled)("id",e.elementID),h.xp6(2),h.Q6J("for",e.elementID)}}function _n(e,t){if(1&e){const e=h.EpF();h.TgZ(0,"div",14)(1,"span",15),h._UZ(2,"system-file-icon",16),h.qZA(),h.TgZ(3,"a",17)(4,"div",18),h._uU(5),h.qZA()(),h.TgZ(6,"button",19),h.NdJ("click",(function(){h.CHM(e);const t=h.oxw();return h.KtG(t.removeFile())})),h._UZ(7,"system-button-icon",20),h.qZA()()}if(2&e){const e=h.oxw();h.xp6(2),h.Q6J("filename",e.file.file_name)("filemimetype",e.file.file_mime_type),h.xp6(2),h.Q6J("system-title",e.file.file_name),h.xp6(1),h.hij(" ",e.file.file_name," ")}}let yn=(()=>{var e;class SystemInputFileContent{constructor(e,t,s,n,o,l,a){(0,i.Z)(this,"configurationService",void 0),(0,i.Z)(this,"session",void 0),(0,i.Z)(this,"toast",void 0),(0,i.Z)(this,"helper",void 0),(0,i.Z)(this,"modal",void 0),(0,i.Z)(this,"cdRef",void 0),(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"inputFile",void 0),(0,i.Z)(this,"fieldName",void 0),(0,i.Z)(this,"accept","*"),(0,i.Z)(this,"disabled",!1),(0,i.Z)(this,"contenttype","base64"),(0,i.Z)(this,"persistens",!1),(0,i.Z)(this,"isUploading",!1),(0,i.Z)(this,"elementID",_.uniqueId("input-file")),(0,i.Z)(this,"onChange",void 0),(0,i.Z)(this,"onTouched",void 0),(0,i.Z)(this,"file",void 0),this.configurationService=e,this.session=t,this.toast=s,this.helper=n,this.modal=o,this.cdRef=l,this.language=a}registerOnChange(e){this.onChange=t=>{e(t)}}registerOnTouched(e){this.onTouched=e}writeValue(e){this.file=e}uploadFile(e){var t=this;return(0,pn.Z)((function*(){if(0==e.length)return;t.isUploading=!0,t.cdRef.detectChanges(),t.file={file_name:e[0].name,file_mime_type:e[0].type,file_size:t.helper.humanFileSize(e[0].size)};let s=t.configurationService.getSystemParamater("upload_maxsize");if(s&&e[0].size>s)return void t.toast.sendToast(t.language.getLabelFormatted("LBL_EXCEEDS_MAX_UPLOADFILESIZE",[t.file.file_name,t.helper.humanFileSize(s)]),"error");const i=yield t.readFileAsync(e[0]);t.onChange(i),t.persistens||(t.file=void 0,t.cdRef.detectChanges())}))()}readFileAsync(e){var t=this;return(0,pn.Z)((function*(){return new Promise(((s,i)=>{const n=new FileReader;if(n.onload=()=>s(n.result.toString()),n.onerror=i,"text"===t.contenttype)n.readAsText(e);else n.readAsDataURL(e)}))}))()}removeFile(){this.file=void 0,this.cdRef.detectChanges(),this.onChange(null)}}return e=SystemInputFileContent,(0,i.Z)(SystemInputFileContent,"ɵfac",(function(t){return new(t||e)(h.Y36(ke.C),h.Y36(ee.n),h.Y36(p.A),h.Y36(fn._),h.Y36(tt.o),h.Y36(h.sBO),h.Y36(m.d))})),(0,i.Z)(SystemInputFileContent,"ɵcmp",h.Xpm({type:e,selectors:[["system-input-file-content"]],viewQuery:function(e,t){if(1&e&&h.Gf(vn,5,h.s_b),2&e){let e;h.iGM(e=h.CRH())&&(t.inputFile=e.first)}},inputs:{fieldName:"fieldName",accept:"accept",disabled:"disabled",contenttype:"contenttype",persistens:"persistens"},features:[h._Bn([{provide:l.JU,useExisting:(0,h.Gpc)((()=>e)),multi:!0}])],decls:4,vars:2,consts:[[1,"slds-form-element__control","slds-grid","slds-grid--align-spread","slds-p-vertical--xx-small","slds-is-relative","slds-size--1-of-1"],["class","slds-file-selector slds-file-selector_files slds-is-relative slds-size--1-of-1",4,"ngIf","ngIfElse"],["fileContainer",""],[1,"slds-file-selector","slds-file-selector_files","slds-is-relative","slds-size--1-of-1"],[1,"slds-file-selector__dropzone","slds-p-around--small","slds-is-relative","slds-size--1-of-1",3,"system-drop-file"],["type","file",1,"slds-file-selector__input","slds-assistive-text","slds-has-error",3,"accept","disabled","id","change","click"],["inputFile",""],[1,"slds-file-selector__body",2,"cursor","pointer",3,"for"],[1,"slds-file-selector__button","slds-button","slds-button_neutral"],["icon","upload",1,"slds-m-right--xx-small","slds-align--absolute-center"],["label","LBL_UPLOAD_FILE"],[1,"slds-file-selector__text","slds-medium-show"],["label","LBL_OR"],["label","LBL_DROP_FILE"],[1,"slds-pill","slds-pill_link","slds-size--1-of-1"],[1,"slds-pill__icon_container","slds-m-left--xxx-small"],["divClass","","size","small",3,"filename","filemimetype"],["href","javascript:void(0);",1,"slds-pill__action","slds-p-around--xx-small"],[1,"slds-pill__label","slds-truncate",2,"width","calc(100% - 20px)",3,"system-title"],["system-title","LBL_REMOVE",1,"slds-button","slds-button_icon","slds-button_icon","slds-pill__remove","slds-m-right--xx-small",3,"click"],["icon","close"]],template:function(e,t){if(1&e&&(h.TgZ(0,"div",0),h.YNc(1,Zn,11,4,"div",1),h.YNc(2,_n,8,4,"ng-template",null,2,h.W1O),h.qZA()),2&e){const e=h.MAs(3);h.xp6(1),h.Q6J("ngIf",!t.file)("ngIfElse",e)}},dependencies:[bn.M,it.S,o.O5,f.J,de.T,b._],encapsulation:2,changeDetection:0})),SystemInputFileContent})();var xn=s(4947);function wn(e,t){if(1&e){const e=h.EpF();h.TgZ(0,"button",7),h.NdJ("click",(function(){h.CHM(e);const t=h.oxw();return h.KtG(t.expandItem())})),h._UZ(1,"system-button-icon",8),h.qZA()}if(2&e){const e=h.oxw();h.Q6J("disabled",e.disabled),h.xp6(1),h.Q6J("icon",e.icon)}}function Tn(e,t){if(1&e){const e=h.EpF();h.TgZ(0,"system-module-tree-item",9),h.NdJ("itemSelected",(function(t){h.CHM(e);const s=h.oxw();return h.KtG(s.emitSelected(t))})),h.qZA()}if(2&e){const e=t.$implicit,s=h.oxw();h.Q6J("module",e.module)("name",e.displayname)("nodedata",e)("level",s.level+1)("path",e.path)("selectedNodeId",s.selectedNodeId)("displayAuditFields",s.displayAuditFields)("displayRelationshipFields",s.displayRelationshipFields)}}let Cn=(()=>{var e;class SystemModuleTreeItem{constructor(e,t,s,n,o){(0,i.Z)(this,"backend",void 0),(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"moduleTree",void 0),(0,i.Z)(this,"modelUtilities",void 0),(0,i.Z)(this,"displayRelationshipFields",!1),(0,i.Z)(this,"displayAuditFields",!1),(0,i.Z)(this,"selectedNodeId",""),(0,i.Z)(this,"level",1),(0,i.Z)(this,"path",void 0),(0,i.Z)(this,"module",void 0),(0,i.Z)(this,"name",void 0),(0,i.Z)(this,"nodedata",void 0),(0,i.Z)(this,"expanded",!1),(0,i.Z)(this,"nodeitems",[]),(0,i.Z)(this,"isLoaded",!1),(0,i.Z)(this,"isLoading",!1),(0,i.Z)(this,"disabled",!1),(0,i.Z)(this,"itemSelected",new h.vpe),this.backend=e,this.language=t,this.metadata=s,this.moduleTree=n,this.modelUtilities=o}get isSelected(){return this.selectedNodeId==this.nodedata.nodeId}get icon(){return this.isLoading?"spinner":"chevronright"}loadItems(){this.isLoading=!0,this.moduleTree.isLoading=!0,this.backend.getRequest("dictionary/browser/"+this.module+"/nodes").subscribe((e=>{e&&(this.nodeitems=e.map((e=>(e.nodeId=this.modelUtilities.generateGuid(),e.displayname=e.label?this.language.getLabel(e.label):this.language.getModuleName(e.module),e))).sort(((e,t)=>e.displayname&&t.displayname?e.displayname>t.displayname?1:-1:0)),this.displayRelationshipFields&&this.nodedata.hasRelationshipFields&&(this.nodeitems=[{displayname:this.language.getLabel("LBL_RELATIONSHIP_FIELDS"),leaf:!0,relationshipNode:!0,module:this.module,parentModule:this.nodedata.parentModule,link:this.nodedata.link,nodeId:this.nodedata?this.nodedata.nodeId:"root",path:`relationship:${this.nodedata.parentModule}:${this.nodedata.link}`},...this.nodeitems]),this.displayAuditFields&&1==this.metadata.getModuleDefs(this.module).audited&&(this.nodeitems=[{displayname:this.language.getLabel("LBL_AUDIT_FIELDS"),leaf:!0,auditNode:!0,module:this.module,link:this.nodedata.link,nodeId:this.nodedata?this.nodedata.nodeId:"root",path:`audit:${this.module}:audit`},...this.nodeitems])),this.isLoading=!1,this.moduleTree.isLoading=!1,this.isLoaded=!0,this.nodeitems.length>0?this.expanded=!0:this.disabled=!0}))}expandItem(){this.isLoading||(this.isLoaded?this.expanded=!this.expanded:this.loadItems())}nodeSelected(){this.itemSelected.emit({path:this.path,module:this.module,parentModule:this.nodedata.parentModule,link:this.nodedata.link,nodeId:this.nodedata?this.nodedata.nodeId:"root",relationshipNode:this.nodedata.relationshipNode,auditNode:this.nodedata.auditNode})}emitSelected(e){e.path=this.path+"::"+e.path,this.itemSelected.emit(e)}trackByFn(e,t){return t.nodeId}}return e=SystemModuleTreeItem,(0,i.Z)(SystemModuleTreeItem,"ɵfac",(function(t){return new(t||e)(h.Y36(We.y),h.Y36(m.d),h.Y36(g.Pu),h.Y36(xn.w),h.Y36(et.A))})),(0,i.Z)(SystemModuleTreeItem,"ɵcmp",h.Xpm({type:e,selectors:[["system-module-tree-item"]],inputs:{displayRelationshipFields:"displayRelationshipFields",displayAuditFields:"displayAuditFields",selectedNodeId:"selectedNodeId",level:"level",path:"path",module:"module",name:"name",nodedata:"nodedata"},outputs:{itemSelected:"itemSelected"},decls:8,vars:8,consts:[["role","treeitem","tabindex","0"],[1,"slds-tree__item"],["class","slds-button slds-button_icon slds-m-right_x-small",3,"disabled","click",4,"ngIf"],[1,"slds-has-flexi-truncate"],[1,"slds-tree__item-label","slds-truncate",3,"click"],["role","group"],[3,"module","name","nodedata","level","path","selectedNodeId","displayAuditFields","displayRelationshipFields","itemSelected",4,"ngFor","ngForOf","ngForTrackBy"],[1,"slds-button","slds-button_icon","slds-m-right_x-small",3,"disabled","click"],[3,"icon"],[3,"module","name","nodedata","level","path","selectedNodeId","displayAuditFields","displayRelationshipFields","itemSelected"]],template:function(e,t){1&e&&(h.TgZ(0,"li",0)(1,"div",1),h.YNc(2,wn,2,2,"button",2),h.TgZ(3,"span",3)(4,"span",4),h.NdJ("click",(function(){return t.nodeSelected()})),h._uU(5),h.qZA()()(),h.TgZ(6,"ul",5),h.YNc(7,Tn,1,8,"system-module-tree-item",6),h.qZA()()),2&e&&(h.uIk("aria-expanded",t.expanded)("aria-level",t.level),h.xp6(1),h.ekj("slds-is-selected",t.isSelected),h.xp6(1),h.Q6J("ngIf",!t.nodedata.leaf),h.xp6(3),h.Oqu(t.name),h.xp6(2),h.Q6J("ngForOf",t.nodeitems)("ngForTrackBy",t.trackByFn))},dependencies:[o.sg,o.O5,f.J,e],encapsulation:2})),SystemModuleTreeItem})();var An=s(8322);let kn=(()=>{var e;class SystemImageModal{set imageData(e){if(this.mimetype=this.imageData_onlyBase64code="",e){let t=e.split(";",2);this.mimetype=t[0],this.imageData_onlyBase64code=t[1].slice(7)}}constructor(e){(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"title",""),(0,i.Z)(this,"maxWidth",null),(0,i.Z)(this,"maxHeight",null),(0,i.Z)(this,"droppedFiles",null),(0,i.Z)(this,"imageData_onlyBase64code",null),(0,i.Z)(this,"answer",null),(0,i.Z)(this,"answerSubject",null),(0,i.Z)(this,"mimetype",void 0),(0,i.Z)(this,"self",void 0),(0,i.Z)(this,"systemInputMedia",void 0),this.language=e,this.answerSubject=new H.x,this.answer=this.answerSubject.asObservable()}cancel(){this.answerSubject.next(!1),this.answerSubject.complete(),this.self.destroy()}get canSave(){return!!this.imageData_onlyBase64code}save(){this.canSave&&(this.answerSubject.next(this.systemInputMedia.mediaMetaData.mimetype+";base64,"+this.imageData_onlyBase64code),this.answerSubject.complete(),this.self.destroy())}onModalEscX(){this.cancel()}}return e=SystemImageModal,(0,i.Z)(SystemImageModal,"ɵfac",(function(t){return new(t||e)(h.Y36(m.d))})),(0,i.Z)(SystemImageModal,"ɵcmp",h.Xpm({type:e,selectors:[["system-image-modal"]],viewQuery:function(e,t){if(1&e&&h.Gf(un.l,5),2&e){let e;h.iGM(e=h.CRH())&&(t.systemInputMedia=e.first)}},inputs:{title:"title",maxWidth:"maxWidth",maxHeight:"maxHeight",droppedFiles:"droppedFiles",imageData:"imageData"},decls:10,vars:7,consts:[["size","large"],[3,"close"],[1,"slds-height_full",3,"ngModel","maxWidth","maxHeight","droppedFiles","mimetype","ngModelChange"],[1,"slds-button","slds-button--brand",3,"disabled","click"],["label","LBL_SAVE"],[1,"slds-button","slds-button--neutral",3,"click"],["label","LBL_CANCEL"]],template:function(e,t){1&e&&(h.TgZ(0,"system-modal",0)(1,"system-modal-header",1),h.NdJ("close",(function(){return t.cancel()})),h._uU(2),h.qZA(),h.TgZ(3,"system-modal-content")(4,"system-input-media",2),h.NdJ("ngModelChange",(function(e){return t.imageData_onlyBase64code=e}))("mimetype",(function(e){return t.mimetype=e})),h.qZA()(),h.TgZ(5,"system-modal-footer")(6,"button",3),h.NdJ("click",(function(){return t.save()})),h._UZ(7,"system-label",4),h.qZA(),h.TgZ(8,"button",5),h.NdJ("click",(function(){return t.cancel()})),h._UZ(9,"system-label",6),h.qZA()()()),2&e&&(h.xp6(2),h.hij(" ",t.title," "),h.xp6(2),h.Q6J("ngModel",t.imageData_onlyBase64code)("maxWidth",t.maxWidth)("maxHeight",t.maxHeight)("droppedFiles",t.droppedFiles)("mimetype",t.mimetype),h.xp6(2),h.Q6J("disabled",!t.canSave))},dependencies:[l.JJ,l.On,b._,v.j,Z.x,y.p,x.y,un.l],encapsulation:2})),SystemImageModal})();var Ln=s(6274),In=s(4988),Mn=s(8070),Sn=s(5383),Jn=s(1819),On=s(4211),Nn=s(6268),Fn=s(4845);function qn(e,t){if(1&e&&h._UZ(0,"object",2),2&e){const e=h.oxw();h.Q6J("data",e.blobUrl,h.uOi)}}let En=(()=>{var e;class SystemPDFContainer{constructor(e){(0,i.Z)(this,"sanitizer",void 0),(0,i.Z)(this,"pdf",void 0),(0,i.Z)(this,"blobUrl",void 0),this.sanitizer=e}ngOnChanges(e){if(this.blobUrl=null,this.pdf){let e=this.dataToBlob(atob(this.pdf));this.blobUrl=this.sanitizer.bypassSecurityTrustResourceUrl(URL.createObjectURL(e))}}dataToBlob(e){let t=[];for(let s=0;s<e.length;s+=512){let i=e.slice(s,s+512),n=new Array(i.length);for(let e=0;e<i.length;e++)n[e]=i.charCodeAt(e);let o=new Uint8Array(n);t.push(o)}return new Blob(t)}}return e=SystemPDFContainer,(0,i.Z)(SystemPDFContainer,"ɵfac",(function(t){return new(t||e)(h.Y36(Lt.H7))})),(0,i.Z)(SystemPDFContainer,"ɵcmp",h.Xpm({type:e,selectors:[["system-pdf-container"]],inputs:{pdf:"pdf"},features:[h.TTD],decls:2,vars:1,consts:[[1,"slds-size--1-of-1","slds-height_full"],["type","application/pdf","width","100%","height","99%",3,"data",4,"ngIf"],["type","application/pdf","width","100%","height","99%",3,"data"]],template:function(e,t){1&e&&(h.TgZ(0,"div",0),h.YNc(1,qn,1,1,"object",1),h.qZA()),2&e&&(h.xp6(1),h.Q6J("ngIf",t.blobUrl))},dependencies:[o.O5],encapsulation:2})),SystemPDFContainer})();function Yn(e,t){if(1&e&&h._UZ(0,"iframe",4),2&e){const e=h.oxw();h.Q6J("src",e.iframeSource,h.uOi)}}let Dn=(()=>{var e;class SystemIframeModal{constructor(e,t){(0,i.Z)(this,"sanitizer",void 0),(0,i.Z)(this,"cdref",void 0),(0,i.Z)(this,"self",void 0),(0,i.Z)(this,"iframeSource",void 0),(0,i.Z)(this,"source",void 0),this.sanitizer=e,this.cdref=t}close(){this.self.destroy()}ngOnInit(){this.iframeSource=this.sanitizer.bypassSecurityTrustResourceUrl(this.source),this.cdref.detectChanges()}}return e=SystemIframeModal,(0,i.Z)(SystemIframeModal,"ɵfac",(function(t){return new(t||e)(h.Y36(Lt.H7),h.Y36(h.sBO))})),(0,i.Z)(SystemIframeModal,"ɵcmp",h.Xpm({type:e,selectors:[["system-iframe-modal"]],inputs:{source:"source"},decls:4,vars:1,consts:[["size","large"],[3,"close"],["system-modal-content-grow","","margin","none"],["class","slds-size--1-of-1 slds-height_full","style","border: none;",3,"src",4,"ngIf"],[1,"slds-size--1-of-1","slds-height_full",2,"border","none",3,"src"]],template:function(e,t){1&e&&(h.TgZ(0,"system-modal",0)(1,"system-modal-header-empty",1),h.NdJ("close",(function(){return t.close()})),h.qZA(),h.TgZ(2,"system-modal-content",2),h.YNc(3,Yn,1,1,"iframe",3),h.qZA()()),2&e&&(h.xp6(3),h.Q6J("ngIf",t.source))},dependencies:[o.O5,v.j,Z.x,Tt],encapsulation:2,changeDetection:0})),SystemIframeModal})();var Qn=s(2391),Un=s(121),Rn=s(3091),jn=s(3934),Bn=s(3095),Gn=s(9159),Pn=s(2637),Hn=s(2235);let zn=(()=>{var e;class SystemComponents{}return e=SystemComponents,(0,i.Z)(SystemComponents,"ɵfac",(function(t){return new(t||e)})),(0,i.Z)(SystemComponents,"ɵmod",h.oAB({type:e})),(0,i.Z)(SystemComponents,"ɵinj",h.cJS({imports:[a.o,o.ez,l.u5,n._t]})),SystemComponents})();("undefined"==typeof ngJitMode||ngJitMode)&&h.kYT(zn,{declarations:[nn,Mi,Ji,Bi,Hi,Gi,u.L,u.s,L,I.g,M.O,J,f.J,O.x,F.I,E,N.Q,Y.r,U.U,D.L,Q.m,R.v,j.z,B.m,G.K,P.E,z,V.$,K.G,$.a,X.G,W.T,ie,ne.Y,oe.t,le.l,ae.f,de.T,Dn,re.s,ce.t,ue.C,he.H,me.k,Ze,ze,_e.Z,we.n,ye.r,xe.u,Te.Q,Qn.K,Ce.C,Ae.y,Se,Oe.z,Je.e,Ne.y,Fe.a,qe.$,Ee.a,Ye.l,De.s,Qe.i,Ue.Z,Re.A,je.p,Be.z,Ge.H,Pe.C,Ve.H,Ke.x,$e.N,mn.V,Xe,b._,ht.h,mt.M,gt.M,pt.A,ft.e,bt,v.j,Z.x,y.p,x.y,Tt,vt.O,Zt.J,At,d.N,r.m,kt.H,qt,En,Ye.l,ln,on.s,cn.H,an.Y,rn.w,dn.U,ui,Et.s,Ut,Rt.J,us,hs.z,qs,Ls,Us,Rs.P,js.R,Bs.E,Gs.s,Ps.E,ge.W,Vs,Ks.B,Xs.v,$s.x,Ws,ei,ti.t,si.S,ni.O,ii.u,di,Js.r,bi,vi.h,Zi.I,xn.w,Cn,un.l,hn.R,An.E,Ln.f,An.E,kn,In.y,Mn.M,Sn.j,ct,ut,Jn.W,On.w,Nn.f,Fn.z,gn.K,yn,_i,Un.m,Rn.e,c.u,jn.l,Bn.F,Gn.n,Hn.j,Pn.I],imports:[a.o,o.ez,l.u5,n._t],exports:[u.L,u.s,c.u,L,I.g,M.O,J,f.J,O.x,F.I,E,N.Q,U.U,D.L,Q.m,R.v,j.z,G.K,P.E,V.$,$.a,X.G,W.T,cn.H,an.Y,rn.w,on.s,oe.t,le.l,ae.f,de.T,re.s,ce.t,ue.C,he.H,me.k,_e.Z,we.n,ye.r,xe.u,Te.Q,Ce.C,Ae.y,Se,Oe.z,Je.e,Ne.y,Fe.a,qe.$,Ee.a,Ye.l,De.s,Qe.i,Ue.Z,Re.A,je.p,Be.z,Ge.H,Pe.C,Ve.H,Ke.x,$e.N,mn.V,Xe,b._,ht.h,mt.M,gt.M,pt.A,ft.e,v.j,Z.x,y.p,x.y,Tt,vt.O,Zt.J,At,kt.H,Et.s,Ut,Rt.J,us,hs.z,Us,Rs.P,js.R,ge.W,Vs,Ks.B,Xs.v,$s.x,Ws,ti.t,si.S,ni.O,ii.u,Js.r,bi,vi.h,Zi.I,Ye.l,ln,on.s,cn.H,Ps.E,un.l,Ps.E,xn.w,Cn,hn.R,An.E,Ln.f,An.E,kn,In.y,Mn.M,Ae.y,Ge.H,Jn.W,On.w,Nn.f,Fn.z,gn.K,yn,Tt,_i,En,Qn.K,ct,Rn.e,Y.r,Bs.E,Gs.s,ze,K.G,jn.l,Bn.F,Gn.n,Hn.j,Pn.I]}),h.B6R(ge.W,[o.O5,o.PC,b._],[]),h.B6R(xn.w,[Cn],[])},9456:(e,t,s)=>{var i={"./admincomponents/admincomponents.module.ts":[4093,"default-src_workbench_workbench_module_ts","src_admincomponents_admincomponents_module_ts"],"./globalcomponents/globalcomponents.ts":[4826],"./include/groupware/groupware.ts":[2149,"src_include_groupware_groupware_ts"],"./include/sendinblue/sendinbluemodule.ts":[1887,"src_include_sendinblue_sendinbluemodule_ts"],"./include/spiceattachments/spiceattachments.ts":[3030,"src_include_spiceattachments_spiceattachments_ts"],"./include/spicecharts/spicecharts.ts":[4972,"src_include_spicecharts_spicecharts_ts"],"./include/spicefavorites/spicefavorites.ts":[8009,"src_include_spicefavorites_spicefavorites_ts"],"./include/spiceimporter/spiceimporter.ts":[4877,"src_include_spiceimporter_spiceimporter_ts"],"./include/spiceinstaller/spiceinstallermodule.ts":[2956],"./include/spicemap/spicemap.ts":[3106,"src_include_spicemap_spicemap_ts"],"./include/spicemath/spicemath.ts":[7109,"src_include_spicemath_spicemath_ts"],"./include/spicemerge/spicemerge.ts":[8494,"src_include_spicemerge_spicemerge_ts"],"./include/spicenotes/spicenotes.ts":[8467,"src_include_spicenotes_spicenotes_ts"],"./include/spicepagebuilder/modulespicepagebuilder.ts":[9524,"src_include_spicepagebuilder_modulespicepagebuilder_ts"],"./include/spicepath/spicepath.ts":[3264,"src_include_spicepath_spicepath_ts"],"./include/spicetexts/spicetexts.ts":[5388,"src_include_spicetexts_spicetexts_ts"],"./include/spicetimeline/spicetimeline.ts":[7135,"src_include_spicetimeline_spicetimeline_ts"],"./include/spicetimestream/spicetimestream.ts":[7846,"src_include_spicetimestream_spicetimestream_ts"],"./modules/accounts/moduleaccounts.ts":[6035,"default-node_modules_underscore_modules_index-all_js","src_modules_accounts_moduleaccounts_ts"],"./modules/acl/moduleacl.ts":[2116,"src_modules_acl_moduleacl_ts"],"./modules/activities/moduleactivities.ts":[8800,"default-src_modules_activities_moduleactivities_ts"],"./modules/agreements/moduleagreements.ts":[2273,"src_modules_agreements_moduleagreements_ts"],"./modules/contacts/modulecontacts.ts":[1435,"src_modules_contacts_modulecontacts_ts"],"./modules/currencies/modulecurrencies.ts":[2022,"src_modules_currencies_modulecurrencies_ts"],"./modules/dashboard/moduledashboard.ts":[4023,"src_modules_dashboard_moduledashboard_ts"],"./modules/documents/moduledocuments.ts":[6340,"default-src_modules_outputtemplates_components_objectactionoutputbeanmodal_ts","src_modules_documents_moduledocuments_ts"],"./modules/emails/moduleemails.ts":[8544,"src_modules_emails_moduleemails_ts"],"./modules/folders/modulefolders.ts":[3061,"src_modules_folders_modulefolders_ts"],"./modules/googleapi/modulegoogleapi.ts":[8725,"src_modules_googleapi_modulegoogleapi_ts"],"./modules/holidaycalendars/moduleholidaycalendars.ts":[8395,"src_modules_holidaycalendars_moduleholidaycalendars_ts"],"./modules/home/modulehome.ts":[6132,"default-src_modules_activities_moduleactivities_ts","src_modules_home_modulehome_ts"],"./modules/leads/moduleleads.ts":[9443,"src_modules_leads_moduleleads_ts"],"./modules/mailboxes/modulemailboxes.ts":[9028,"src_modules_mailboxes_modulemailboxes_ts"],"./modules/mediafiles/modulemediafiles.ts":[1546,"src_modules_mediafiles_modulemediafiles_ts"],"./modules/opportunities/moduleopportunities.ts":[2257,"src_modules_opportunities_moduleopportunities_ts"],"./modules/orgunits/moduleorgunits.ts":[6814,"src_modules_orgunits_moduleorgunits_ts"],"./modules/outputtemplates/moduleoutputtemplates.ts":[9769,"default-src_modules_outputtemplates_components_objectactionoutputbeanmodal_ts","src_modules_outputtemplates_moduleoutputtemplates_ts"],"./modules/prospectlists/moduleprospectlists.ts":[3768,"default-node_modules_underscore_modules_index-all_js","src_modules_prospectlists_moduleprospectlists_ts"],"./modules/reports/modulereports.ts":[6820,"default-src_modules_reports_modulereports_ts"],"./modules/reportsdesigner/modulereportsdesigner.ts":[3158,"default-src_modules_reports_modulereports_ts","src_modules_reportsdesigner_modulereportsdesigner_ts"],"./modules/scrum/modulescrum.ts":[8836,"src_modules_scrum_modulescrum_ts"],"./modules/spiceimports/modulespiceimports.ts":[9678,"src_modules_spiceimports_modulespiceimports_ts"],"./modules/systemcalendars/modulesystemcalendars.ts":[9109,"src_modules_systemcalendars_modulesystemcalendars_ts"],"./modules/users/moduleusers.ts":[3865,"src_modules_users_moduleusers_ts"],"./objectcomponents/objectcomponents.ts":[6490],"./objectfields/objectfields.ts":[3190],"./portalcomponents/portalcomponents.ts":[7862,"src_portalcomponents_portalcomponents_ts"],"./systemcomponents/systemcomponents.ts":[3735],"./workbench/workbench.module.ts":[7388,"default-src_workbench_workbench_module_ts"]};function n(e){if(!s.o(i,e))return Promise.resolve().then((()=>{var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=i[e],n=t[0];return Promise.all(t.slice(1).map(s.e)).then((()=>s(n)))}n.keys=()=>Object.keys(i),n.id=9456,e.exports=n}},e=>{e.O(0,["vendor"],(()=>{return t=3101,e(e.s=t);var t}));e.O()}]);