/*!
 * 
 *                     aacService
 *
 *                     release: 2022.02.001
 *
 *                     date: 2022-09-03 11:05:02
 *
 *                     build: 2022.02.001.1662195902704
 *
 */
(self.webpackChunkcore=self.webpackChunkcore||[]).push([["main"],{3629:(e,t,s)=>{"use strict";s.d(t,{N:()=>i});const i={production:!0,buildNumber:"2022.02.001.1662195902704",copyright:"© 2015 -  2022 aac services k.s. All rights reserved."}},4357:(e,t,s)=>{"use strict";s.d(t,{o:()=>C});var i=s(6895),n=s(1790),l=s(3548),o=s(7763),a=s(5982),d=s(5681),r=s(9573),c=s(4361),u=s(1058),m=s(3194),h=s(8280),g=s(3814),p=s(9774),f=s(4021),b=s(7982),_=s(151),y=s(3398),v=s(1061),x=s(1571),Z=s(4044);let w=(()=>{class SystemCalculatorTriggerDirective{constructor(e,t){this.modal=e,this.elementRef=t}openCalculator(){this.elementRef.nativeElement.previousSibling&&this.elementRef.nativeElement.previousSibling.tagName in{INPUT:1,TEXTAREA:1}&&this.modal.openModal("SpiceCalculatorModal").subscribe((e=>{e.instance.value=this.elementRef.nativeElement.previousSibling.value,e.instance.trigger=!0,e.instance.value$.subscribe((e=>{isNaN(e)||(this.elementRef.nativeElement.previousSibling.value=e)}))}))}}return SystemCalculatorTriggerDirective.ɵfac=function(e){return new(e||SystemCalculatorTriggerDirective)(x.Y36(Z.o),x.Y36(x.SBq))},SystemCalculatorTriggerDirective.ɵdir=x.lG2({type:SystemCalculatorTriggerDirective,selectors:[["","system-calculator-trigger",""]],hostBindings:function(e,t){1&e&&x.NdJ("click",(function(){return t.openCalculator()}))}}),SystemCalculatorTriggerDirective})(),T=(()=>{class SystemStopClickPropagationDirective{onClick(e){e.stopPropagation()}}return SystemStopClickPropagationDirective.ɵfac=function(e){return new(e||SystemStopClickPropagationDirective)},SystemStopClickPropagationDirective.ɵdir=x.lG2({type:SystemStopClickPropagationDirective,selectors:[["","system-stop-click-propagation",""]],hostBindings:function(e,t){1&e&&x.NdJ("click",(function(e){return t.onClick(e)}))}}),SystemStopClickPropagationDirective})(),C=(()=>{class DirectivesModule{}return DirectivesModule.ɵfac=function(e){return new(e||DirectivesModule)},DirectivesModule.ɵmod=x.oAB({type:DirectivesModule}),DirectivesModule.ɵinj=x.cJS({imports:[i.ez]}),DirectivesModule})();("undefined"==typeof ngJitMode||ngJitMode)&&x.kYT(C,{declarations:[n.g,l.K,o.u,a.m,d.l,r.$,c.w,u.H,m.t,h.t,g.V,p.M,f._,b.h,y.A,_.S,v.Q,w,T],imports:[i.ez],exports:[n.g,l.K,o.u,a.m,d.l,r.$,c.w,u.H,m.t,h.t,g.V,p.M,f._,b.h,y.A,_.S,v.Q,w,T]})},5982:(e,t,s)=>{"use strict";s.d(t,{m:()=>n});var i=s(1571);let n=(()=>{class SystemAutofocusDirective{constructor(e){this.elementRef=e}ngAfterViewInit(){setTimeout((()=>{this.elementRef.nativeElement.tabIndex||(this.elementRef.nativeElement.tabIndex="-1"),this.elementRef.nativeElement.focus()}))}}return SystemAutofocusDirective.ɵfac=function(e){return new(e||SystemAutofocusDirective)(i.Y36(i.SBq))},SystemAutofocusDirective.ɵdir=i.lG2({type:SystemAutofocusDirective,selectors:[["","system-autofocus",""]]}),SystemAutofocusDirective})()},5681:(e,t,s)=>{"use strict";s.d(t,{l:()=>l});var i=s(1571),n=s(3917);let l=(()=>{class SystemDropdownTriggerDirective{constructor(e,t,s,i){this.renderer=e,this.elementRef=t,this.footer=s,this.cdRef=i,this.dropDownOpen=!1,this.hasTriggerButton=!1,this.dropdowntriggerdisabled=!1}get triggerElement(){return this.hasTriggerButton?this.triggerElementButton.nativeElement:this.elementRef.nativeElement}ngAfterViewChecked(){this.dropDownOpen&&this.dropdownElement&&this.setDropdownElementPosition()}ngOnDestroy(){this.restoreDropdownFromFooter(),this.clickListener&&this.clickListener(),this.triggerClickListener&&this.triggerClickListener()}toggleDropdown(e){if(e&&e.stopPropagation(),this.dropdowntriggerdisabled)return!1;this.dropDownOpen=!this.dropDownOpen,this.dropDownOpen&&(this.setDropdownElement(),this.dropdownElement&&(this.moveDropdownToFooter(),this.setDropdownElementPosition())),this.dropDownOpen?(e&&e.preventDefault(),this.clickListener=this.renderer.listen("document","click",(e=>this.onClick(e)))):(this.restoreDropdownFromFooter(),this.clickListener())}hostClick(e){this.hasTriggerButton||this.toggleDropdown(e)}moveDropdownToFooter(){this.renderer.removeChild(this.elementRef.nativeElement,this.dropdownElement),this.renderer.appendChild(this.footer.footercontainer.element.nativeElement,this.dropdownElement)}restoreDropdownFromFooter(){this.dropdownElement&&this.footer.footercontainer.element.nativeElement.contains(this.dropdownElement)&&(this.renderer.removeChild(this.footer.footercontainer.element.nativeElement,this.dropdownElement),this.renderer.appendChild(this.elementRef.nativeElement,this.dropdownElement))}setDropdownElement(){if(!this.dropdownElement)for(let e of this.elementRef.nativeElement.children)if(e.classList.contains("slds-dropdown")){this.dropdownElement=e;break}}setDropdownElementPosition(){let e=this.triggerElement.getBoundingClientRect();this.previousTriggerRect&&JSON.stringify(this.previousTriggerRect)==JSON.stringify(e)||(this.previousTriggerRect=e,this.renderer.setStyle(this.dropdownElement,"transform","translateX(0)"),this.renderer.setStyle(this.dropdownElement,"z-index","999999"),this.renderer.addClass(this.dropdownElement,"slds-scrollable"),e.bottom>.7*window.innerHeight&&e.bottom+this.dropdownElement.clientHeight>window.innerHeight?(this.renderer.setStyle(this.dropdownElement,"bottom",window.innerHeight-e.top+"px"),this.renderer.setStyle(this.dropdownElement,"top","auto"),this.renderer.setStyle(this.dropdownElement,"max-height",e.top-10+"px")):(this.renderer.setStyle(this.dropdownElement,"top",e.bottom+"px"),this.renderer.setStyle(this.dropdownElement,"bottom","auto"),e.bottom<.7*window.innerHeight&&this.renderer.setStyle(this.dropdownElement,"max-height",window.innerHeight-e.bottom-10+"px")),e.right-this.dropdownElement.clientWidth>10||e.right>.3*window.innerWidth?(this.renderer.setStyle(this.dropdownElement,"right",window.innerWidth-e.right+"px"),this.renderer.setStyle(this.dropdownElement,"left","auto"),this.renderer.setStyle(this.dropdownElement,"max-width",e.left-10+"px")):(this.renderer.setStyle(this.dropdownElement,"left",e.left+"px"),this.renderer.setStyle(this.dropdownElement,"right","auto"),e.right<.7*window.innerWidth&&this.renderer.setStyle(this.dropdownElement,"max-width",window.innerWidth-e.right-10+"px")),this.cdRef.markForCheck())}onClick(e){this.elementRef.nativeElement.contains(e.target)||(this.dropDownOpen=!1,this.restoreDropdownFromFooter(),this.clickListener(),this.cdRef.markForCheck())}}return SystemDropdownTriggerDirective.ɵfac=function(e){return new(e||SystemDropdownTriggerDirective)(i.Y36(i.Qsj),i.Y36(i.SBq),i.Y36(n.M),i.Y36(i.sBO))},SystemDropdownTriggerDirective.ɵdir=i.lG2({type:SystemDropdownTriggerDirective,selectors:[["","system-dropdown-trigger",""]],hostVars:2,hostBindings:function(e,t){1&e&&i.NdJ("click",(function(e){return t.hostClick(e)})),2&e&&i.ekj("slds-is-open",t.dropDownOpen)},inputs:{dropdowntriggerdisabled:["system-dropdown-trigger","dropdowntriggerdisabled"]}}),SystemDropdownTriggerDirective})()},9573:(e,t,s)=>{"use strict";s.d(t,{$:()=>l});var i=s(1571),n=s(5681);let l=(()=>{class SystemDropdownTriggerButtonDirective{constructor(e,t){this.elementRef=e,this.trigger=t}ngOnInit(){this.trigger&&(this.trigger.hasTriggerButton=!0,this.trigger.triggerElementButton=this.elementRef)}onClick(e){this.trigger&&this.trigger.toggleDropdown(e)}}return SystemDropdownTriggerButtonDirective.ɵfac=function(e){return new(e||SystemDropdownTriggerButtonDirective)(i.Y36(i.SBq),i.Y36(n.l,9))},SystemDropdownTriggerButtonDirective.ɵdir=i.lG2({type:SystemDropdownTriggerButtonDirective,selectors:[["","system-dropdown-trigger-button",""]],hostBindings:function(e,t){1&e&&i.NdJ("click",(function(e){return t.onClick(e)}))}}),SystemDropdownTriggerButtonDirective})()},4361:(e,t,s)=>{"use strict";s.d(t,{w:()=>n});var i=s(1571);let n=(()=>{class SystemDropdownTriggerSimpleDirective{constructor(e,t,s){this.renderer=e,this.cdRef=t,this.elementRef=s,this.dropdowntriggerdisabled=!1,this.dropDownOpen=!1}openDropdown(e){this.dropdowntriggerdisabled?(this.dropDownOpen=!1,this.clickListener&&this.clickListener(),this.cdRef.detectChanges()):(this.dropDownOpen=!this.dropDownOpen,this.dropDownOpen?(e.preventDefault(),this.clickListener=this.renderer.listen("document","click",(e=>this.onClick(e)))):this.clickListener())}onClick(e){this.elementRef.nativeElement.contains(e.target)||(this.dropDownOpen=!1,this.cdRef.detectChanges(),this.clickListener())}ngOnDestroy(){this.clickListener&&this.clickListener()}}return SystemDropdownTriggerSimpleDirective.ɵfac=function(e){return new(e||SystemDropdownTriggerSimpleDirective)(i.Y36(i.Qsj),i.Y36(i.sBO),i.Y36(i.SBq))},SystemDropdownTriggerSimpleDirective.ɵdir=i.lG2({type:SystemDropdownTriggerSimpleDirective,selectors:[["","system-dropdown-trigger-simple",""]],hostVars:2,hostBindings:function(e,t){1&e&&i.NdJ("click",(function(e){return t.openDropdown(e)})),2&e&&i.ekj("slds-is-open",t.dropDownOpen)},inputs:{dropdowntriggerdisabled:["system-dropdown-trigger-simple","dropdowntriggerdisabled"]}}),SystemDropdownTriggerSimpleDirective})()},9774:(e,t,s)=>{"use strict";s.d(t,{M:()=>l});var i=s(1571),n=s(5329);let l=(()=>{class SystemDropFile{constructor(e,t,s){this.renderer=e,this.elementRef=t,this.language=s,this.filesDrop=new i.vpe,this.dragDepth=0,this.defineOverlayElement(),this.listenWindowEvents()}ngOnChanges(){this.renderer.setProperty(this.overlayElement,"textContent",this.dropMessage)}ngOnDestroy(){this.dragStartListener(),this.dragEnterListener(),this.dragOverListener(),this.dragLeaveListener(),this.dragEndListener(),this.dragDropListener(),this.dragGlobalDropListener()}defineOverlayElement(){this.overlayElement=this.renderer.createElement("div"),this.renderer.setStyle(this.overlayElement,"height","100%"),this.renderer.setStyle(this.overlayElement,"width","100%"),this.renderer.setStyle(this.overlayElement,"top","0"),this.renderer.setStyle(this.overlayElement,"left","0"),this.renderer.setStyle(this.overlayElement,"position","absolute"),this.renderer.setStyle(this.overlayElement,"background","rgba(135,135,135,0.8)"),this.renderer.setStyle(this.overlayElement,"color","#fff"),this.renderer.setStyle(this.overlayElement,"border","dashed 2px #fff"),this.renderer.setProperty(this.overlayElement,"textContent",this.language.getLabel("LBL_DROP_FILES")),this.renderer.addClass(this.overlayElement,"slds-align--absolute-center"),this.renderer.addClass(this.elementRef.nativeElement,"slds-is-relative")}listenWindowEvents(){this.dragStartListener=this.renderer.listen("window","dragstart",(()=>{this.dragDepth=-10})),this.dragEnterListener=this.renderer.listen("window","dragenter",(()=>{this.dragDepth++,1==this.dragDepth&&this.renderer.appendChild(this.elementRef.nativeElement,this.overlayElement)})),this.dragOverListener=this.renderer.listen(this.overlayElement,"dragover",(e=>{e.preventDefault(),e.stopPropagation(),e.dataTransfer.dropEffect="copy"})),this.dragLeaveListener=this.renderer.listen("window","dragleave",(()=>{this.dragDepth--,0==this.dragDepth&&this.renderer.removeChild(this.elementRef.nativeElement,this.overlayElement)})),this.dragEndListener=this.renderer.listen("window","dragend",(()=>{this.dragDepth=0,this.renderer.removeChild(this.elementRef.nativeElement,this.overlayElement)})),this.dragDropListener=this.renderer.listen(this.overlayElement,"drop",(e=>{this.dragDepth=0,e.dataTransfer.files.length>0&&this.filesDrop.emit(e.dataTransfer.files),this.renderer.removeChild(this.elementRef.nativeElement,this.overlayElement)})),this.dragGlobalDropListener=this.renderer.listen("window","drop",(e=>{this.dragDepth=0,this.renderer.removeChild(this.elementRef.nativeElement,this.overlayElement)}))}hasOneItemsFile(e){for(let t of e)if("file"==t.kind)return!0;return!1}}return SystemDropFile.ɵfac=function(e){return new(e||SystemDropFile)(i.Y36(i.Qsj),i.Y36(i.SBq),i.Y36(n.d))},SystemDropFile.ɵdir=i.lG2({type:SystemDropFile,selectors:[["","system-drop-file",""]],inputs:{dropMessage:"dropMessage"},outputs:{filesDrop:"system-drop-file"},features:[i.TTD]}),SystemDropFile})()},1790:(e,t,s)=>{"use strict";s.d(t,{g:()=>u});var i=s(1571),n=s(5710),l=s(4154),o=s(3917),a=s(4044),d=s(7017),r=s(2294),c=s(7774);let u=(()=>{class SystemModelPopOverDirective{constructor(e,t,s,n,l,o,a,d,r,c){this.metadata=e,this.footer=t,this.modal=s,this.model=n,this.navigationtab=l,this.popovermodel=o,this.elementRef=a,this.view=d,this.router=r,this.injector=c,this.enablelink=!0,this.modelPopOver=!0,this.clicked=new i.vpe,this.popoverCmp=null,this.showPopoverTimeout={},this.popoverModelInitialized=!1}onMouseOver(){!1!==this.modelPopOver&&(this.showPopoverTimeout=window.setTimeout((()=>this.renderPopover()),1e3))}onMouseOut(){this.showPopoverTimeout&&window.clearTimeout(this.showPopoverTimeout),this.popoverCmp&&this.popoverCmp.closePopover()}goRelated(){if(!1===this.modelPopOver||this.disableLink)return!1;if(this.popoverCmp&&this.popoverCmp.closePopover(),this.showPopoverTimeout&&window.clearTimeout(this.showPopoverTimeout),this.model&&(!this.id||this.id&&this.module&&this.model.id==this.id&&this.model.module==this.module))this.model.goDetail(this.navigationtab?.tabid);else if(this.popoverModelInitialized)this.popovermodel.goDetail(this.navigationtab?.tabid);else if(!this.popovermodel.isLoading){let e=this.modal.await("LBL_LOADING");this.popovermodel.getData(!0).subscribe({next:t=>{this.popovermodel.goDetail(this.navigationtab?.tabid),e.emit(!0)},error:()=>{e.emit(!0)}})}this.clicked.emit(!0)}get disableLink(){return this.view&&!1===this.view.displayLinks||!1===this.enablelink}renderPopover(){this.footer.footercontainer&&(this.popoverModelInitialized||(!this.model||this.model&&this.id&&(this.model.module!=this.module||this.model.id!=this.id)?this.popovermodel.getData().subscribe((()=>{this.popoverModelInitialized=!0})):(this.popovermodel.module=this.model.module,this.popovermodel.id=this.model.id,this.popovermodel.initialize(),this.popovermodel.setData(this.model.data,!1),this.popoverModelInitialized=!0)),this.metadata.addComponent("ObjectModelPopover",this.footer.footercontainer,this.injector).subscribe((e=>{e.instance.parentElementRef=this.elementRef,this.popoverCmp=e.instance})))}ngOnChanges(){this.id&&this.module&&this.id!=this.popovermodel.id&&this.module!=this.popovermodel.module&&(this.popoverModelInitialized=!1,this.popovermodel.initialize(),this.popovermodel.id=this.id,this.popovermodel.module=this.module)}ngOnDestroy(){this.showPopoverTimeout&&window.clearTimeout(this.showPopoverTimeout),this.popoverCmp&&this.popoverCmp.closePopover(!0)}}return SystemModelPopOverDirective.ɵfac=function(e){return new(e||SystemModelPopOverDirective)(i.Y36(l.Pu),i.Y36(o.M),i.Y36(a.o),i.Y36(n.o,12),i.Y36(d.d,8),i.Y36(n.o),i.Y36(i.SBq),i.Y36(r.e,8),i.Y36(c.F0),i.Y36(i.zs3))},SystemModelPopOverDirective.ɵdir=i.lG2({type:SystemModelPopOverDirective,selectors:[["","system-model-popover",""]],hostVars:2,hostBindings:function(e,t){1&e&&i.NdJ("mouseenter",(function(){return t.onMouseOver()}))("mouseleave",(function(){return t.onMouseOut()}))("click",(function(){return t.goRelated()})),2&e&&i.ekj("slds-text-link_faux",!t.disableLink)},inputs:{module:"module",id:"id",enablelink:"enablelink",modelPopOver:["system-model-popover","modelPopOver"]},outputs:{clicked:"clicked"},features:[i._Bn([n.o]),i.TTD]}),SystemModelPopOverDirective})()},7763:(e,t,s)=>{"use strict";s.d(t,{u:()=>o});var i=s(1571),n=s(5710),l=s(727);let o=(()=>{class SystemModelProviderDirective{constructor(e){this.model=e,this.data$=new i.vpe,this.subscription=new l.w0,this.model.isLoading=!0}set provided_model(e){this.model.module=e.module,e.id?this.model.id=e.id:e.data&&(this.model.id=e.data.id),e.data?(this.model.initialize(),this.model.setData(!0===e.clone?{...e.data}:e.data),this.model.isLoading=!1):this.model.id?this.model.getData():this.model.initialize(),this.subscription.add(this.model.data$.subscribe((e=>this.data$.next(e))))}ngOnDestroy(){this.subscription.unsubscribe()}}return SystemModelProviderDirective.ɵfac=function(e){return new(e||SystemModelProviderDirective)(i.Y36(n.o))},SystemModelProviderDirective.ɵdir=i.lG2({type:SystemModelProviderDirective,selectors:[["","system-model-provider",""]],inputs:{provided_model:["system-model-provider","provided_model"]},outputs:{data$:"data$"},exportAs:["system-model-provider"],features:[i._Bn([n.o])]}),SystemModelProviderDirective})()},1061:(e,t,s)=>{"use strict";s.d(t,{Q:()=>n});var i=s(1571);let n=(()=>{class SystemMultiSelectCheckboxesDirective{constructor(e){this.elementRef=e}onClick(e){let t=null;if(e.target.parentElement.classList?.contains("slds-checkbox__label")?t=e.target.parentElement:e.target.parentElement.parentElement?.classList?.contains("slds-checkbox__label")?t=e.target.parentElement.parentElement:e.target.classList.contains("slds-checkbox__label")&&(t=e.target),t){if(document.getSelection().removeAllRanges(),!this.lastChecked)return void(this.lastChecked=t);if(e.shiftKey){let s=this.getAllLabels(),i=s.indexOf(t),n=s.indexOf(this.lastChecked),l=Math.min(i,n),o=Math.max(i,n),a=this.lastChecked.parentElement.getElementsByTagName("input")[0].checked;for(let e=l;e<=o;e++)s[e].parentElement.getElementsByTagName("input")[0].checked=a,s[e].parentElement.getElementsByTagName("input")[0].dispatchEvent(new Event("change"));e.preventDefault()}this.lastChecked=t}}getAllLabels(){let e=[],t=this.elementRef.nativeElement.getElementsByTagName("label");for(let s of t)s.classList.contains("slds-checkbox__label")&&e.push(s);return e}}return SystemMultiSelectCheckboxesDirective.ɵfac=function(e){return new(e||SystemMultiSelectCheckboxesDirective)(i.Y36(i.SBq))},SystemMultiSelectCheckboxesDirective.ɵdir=i.lG2({type:SystemMultiSelectCheckboxesDirective,selectors:[["","system-multi-select-checkboxes",""]],hostBindings:function(e,t){1&e&&i.NdJ("click",(function(e){return t.onClick(e)}))}}),SystemMultiSelectCheckboxesDirective})()},4021:(e,t,s)=>{"use strict";s.d(t,{_:()=>n});var i=s(1571);let n=(()=>{class SystemOverlayLoadingSpinnerDirective{constructor(e,t){this.renderer=e,this.elementRef=t,this.defineOverlayElement()}set isLoading(e){e?this.renderer.appendChild(this.elementRef.nativeElement,this.overlayElement):this.renderer.removeChild(this.elementRef.nativeElement,this.overlayElement)}defineOverlayElement(){this.overlayElement=this.renderer.createElement("div"),this.renderer.setStyle(this.overlayElement,"position","absolute"),this.renderer.addClass(this.overlayElement,"slds-align--absolute-center"),this.renderer.setStyle(this.overlayElement,"height","100%"),this.renderer.setStyle(this.overlayElement,"width","100%"),this.renderer.setStyle(this.overlayElement,"z-index","999"),this.renderer.setStyle(this.overlayElement,"top","0"),this.renderer.setStyle(this.overlayElement,"left","0"),this.renderer.setStyle(this.overlayElement,"background-color","rgb(0,0,0,0.075)");let e=this.renderer.createElement("div");this.renderer.setProperty(this.overlayElement,"innerHTML",'\n            <div style="border-radius: 50%; box-shadow: 0 0 5px 0 #555; padding:.75rem; background-color:#fff; color:#080707">\n                <div class="cssload-container">\n                    <div class="cssload-double-torus"></div>\n                </div>\n            </div>\n        '),this.renderer.appendChild(this.elementRef.nativeElement,e),this.renderer.addClass(this.elementRef.nativeElement,"slds-is-relative")}}return SystemOverlayLoadingSpinnerDirective.ɵfac=function(e){return new(e||SystemOverlayLoadingSpinnerDirective)(i.Y36(i.Qsj),i.Y36(i.SBq))},SystemOverlayLoadingSpinnerDirective.ɵdir=i.lG2({type:SystemOverlayLoadingSpinnerDirective,selectors:[["","system-overlay-loading-spinner",""]],inputs:{isLoading:["system-overlay-loading-spinner","isLoading"]}}),SystemOverlayLoadingSpinnerDirective})()},3398:(e,t,s)=>{"use strict";s.d(t,{A:()=>o});var i=s(727),n=s(1571),l=s(5329);let o=(()=>{class SystemPlaceholderDirective{constructor(e,t){this.language=e,this.elementRef=t,this.subscription=new i.w0,this.subscribeToCurrentLanguageChange()}ngOnDestroy(){this.subscription.unsubscribe()}ngOnChanges(e){e.label.previousValue!==e.label.currentValue&&e.label.currentValue&&this.setElementTitleAttribute()}subscribeToCurrentLanguageChange(){this.subscription=this.language.currentlanguage$.subscribe((()=>this.setElementTitleAttribute()))}setElementTitleAttribute(){this.label?this.elementRef.nativeElement.setAttribute("placeholder",this.language.getLabel(this.label)):this.elementRef.nativeElement.setAttribute("placeholder","")}}return SystemPlaceholderDirective.ɵfac=function(e){return new(e||SystemPlaceholderDirective)(n.Y36(l.d),n.Y36(n.SBq))},SystemPlaceholderDirective.ɵdir=n.lG2({type:SystemPlaceholderDirective,selectors:[["","system-placeholder",""]],inputs:{label:["system-placeholder","label"]},features:[n.TTD]}),SystemPlaceholderDirective})()},3548:(e,t,s)=>{"use strict";s.d(t,{K:()=>o});var i=s(1571),n=s(4154),l=s(3917);let o=(()=>{class SystemPopOverDirective{constructor(e,t,s){this.metadata=e,this.footer=t,this.elementRef=s,this.popoverCmp=null,this.showPopoverTimeout={},this._popoverSettings={injector:{},componentset:{},component:""}}set popoverSettings(e){this._popoverSettings.injector=e.injector,this._popoverSettings.componentset=e.componentset,this._popoverSettings.component=e.component}onMouseOver(){this.showPopoverTimeout=window.setTimeout((()=>this.renderPopover()),500)}onMouseOut(){this.showPopoverTimeout&&window.clearTimeout(this.showPopoverTimeout),this.popoverCmp&&this.popoverCmp.closePopover()}renderPopover(){this.metadata.addComponent("SystemPopover",this.footer.footercontainer,this._popoverSettings.injector).subscribe((e=>{e.instance.parentElementRef=this.elementRef,e.instance.componentset=this._popoverSettings.componentset,this.popoverCmp=e.instance}))}ngOnDestroy(){this.popoverCmp&&this.popoverCmp.closePopover(!0)}}return SystemPopOverDirective.ɵfac=function(e){return new(e||SystemPopOverDirective)(i.Y36(n.Pu),i.Y36(l.M),i.Y36(i.SBq))},SystemPopOverDirective.ɵdir=i.lG2({type:SystemPopOverDirective,selectors:[["","system-pop-over",""]],hostBindings:function(e,t){1&e&&i.NdJ("mouseenter",(function(){return t.onMouseOver()}))("mouseleave",(function(){return t.onMouseOut()}))},inputs:{popoverSettings:["system-pop-over","popoverSettings"]}}),SystemPopOverDirective})()},7982:(e,t,s)=>{"use strict";s.d(t,{h:()=>n});var i=s(1571);let n=(()=>{class SystemResizeDirective{constructor(e,t){this.elementRef=e,this.renderer=t,this.resizeemitter=new i.vpe}ngOnDestroy(){this.mouseListener&&this.mouseListener()}onMouseDown(e){let t=this.elementRef.nativeElement.getClientRects()[0];this.elementWidth=t.width,this.elementHeight=t.height,this.mouseListener=this.renderer.listen("document","mouseup",(e=>{this.onMouseup()}))}onMouseup(){if(!this.elementWidth||!this.elementWidth)return;let e=this.elementRef.nativeElement.getClientRects()[0];(this.elementWidth&&e.width!=this.elementWidth||this.elementHeight&&e.height!=this.elementHeight)&&this.resizeemitter.emit({width:e.width,height:e.height,id:this.resizeid}),this.elementWidth=void 0,this.elementHeight=void 0,this.mouseListener(),this.mouseListener=void 0}getElementWidth(){return this.elementRef.nativeElement.getClientRects()[0].width}}return SystemResizeDirective.ɵfac=function(e){return new(e||SystemResizeDirective)(i.Y36(i.SBq),i.Y36(i.Qsj))},SystemResizeDirective.ɵdir=i.lG2({type:SystemResizeDirective,selectors:[["","system-resize",""]],hostBindings:function(e,t){1&e&&i.NdJ("mousedown",(function(e){return t.onMouseDown(e)}))},inputs:{resizeid:"resizeid"},outputs:{resizeemitter:"system-resize"}}),SystemResizeDirective})()},151:(e,t,s)=>{"use strict";s.d(t,{S:()=>o});var i=s(727),n=s(1571),l=s(5329);let o=(()=>{class SystemTitleDirective{constructor(e,t){this.language=e,this.elementRef=t,this.subscription=new i.w0,this.subscribeToCurrentLanguageChange()}ngOnDestroy(){this.subscription.unsubscribe()}ngOnChanges(e){e.label.previousValue!==e.label.currentValue&&e.label.currentValue&&this.setElementTitleAttribute()}subscribeToCurrentLanguageChange(){this.subscription=this.language.currentlanguage$.subscribe((()=>this.setElementTitleAttribute()))}setElementTitleAttribute(){this.elementRef.nativeElement.setAttribute("title",this.language.getLabel(this.label))}}return SystemTitleDirective.ɵfac=function(e){return new(e||SystemTitleDirective)(n.Y36(l.d),n.Y36(n.SBq))},SystemTitleDirective.ɵdir=n.lG2({type:SystemTitleDirective,selectors:[["","system-title",""]],inputs:{label:["system-title","label"]},features:[n.TTD]}),SystemTitleDirective})()},1058:(e,t,s)=>{"use strict";s.d(t,{H:()=>l});var i=s(1571),n=s(3917);let l=(()=>{class SystemToBottomDirective{constructor(e,t,s){this.element=e,this.renderer=t,this.footer=s,this.more=new i.vpe,this.marginBottom=0,this.elementClass=!0}ngDoCheck(){let e=this.element.nativeElement.getBoundingClientRect(),t=Math.floor(window.innerHeight-e.top-this.marginBottom-parseInt(getComputedStyle(this.element.nativeElement).marginBottom,10)-parseInt(getComputedStyle(this.element.nativeElement).paddingBottom,10)-this.footer.visibleFooterHeight);this.renderer.setStyle(this.element.nativeElement,"height",t+"px")}onScroll(e){let t=this.element.nativeElement;t.scrollTop+t.clientHeight+50>t.scrollHeight&&this.more.emit(!0)}}return SystemToBottomDirective.ɵfac=function(e){return new(e||SystemToBottomDirective)(i.Y36(i.SBq),i.Y36(i.Qsj),i.Y36(n.M))},SystemToBottomDirective.ɵdir=i.lG2({type:SystemToBottomDirective,selectors:[["","system-to-bottom",""]],hostVars:2,hostBindings:function(e,t){1&e&&i.NdJ("scroll",(function(e){return t.onScroll(e)})),2&e&&i.ekj("slds-scrollable--y",t.elementClass)},inputs:{marginBottom:"marginBottom"},outputs:{more:"system-to-bottom"}}),SystemToBottomDirective})()},3194:(e,t,s)=>{"use strict";s.d(t,{t:()=>l});var i=s(1571),n=s(3917);let l=(()=>{class SystemToBottomNoScrollDirective{constructor(e,t,s){this.element=e,this.renderer=t,this.footer=s,this.toBottomNoScroll=!0,this.marginBottom=0}ngDoCheck(){if(!1===this.toBottomNoScroll)return;let e=this.element.nativeElement.getBoundingClientRect(),t=Math.floor(window.innerHeight-e.top-this.marginBottom-parseInt(getComputedStyle(this.element.nativeElement).marginBottom,10)-parseInt(getComputedStyle(this.element.nativeElement).paddingBottom,10)-this.footer.visibleFooterHeight);this.renderer.setStyle(this.element.nativeElement,"height",t+"px")}}return SystemToBottomNoScrollDirective.ɵfac=function(e){return new(e||SystemToBottomNoScrollDirective)(i.Y36(i.SBq),i.Y36(i.Qsj),i.Y36(n.M))},SystemToBottomNoScrollDirective.ɵdir=i.lG2({type:SystemToBottomNoScrollDirective,selectors:[["","system-to-bottom-noscroll",""]],inputs:{toBottomNoScroll:["system-to-bottom-noscroll","toBottomNoScroll"],marginBottom:"marginBottom"}}),SystemToBottomNoScrollDirective})()},8280:(e,t,s)=>{"use strict";s.d(t,{t:()=>n});var i=s(1571);let n=(()=>{class SystemTrimInputDirective{getCaret(e){return{start:e.selectionStart,end:e.selectionEnd}}setCaret(e,t,s){e.selectionStart=t,e.selectionEnd=s,e.focus()}dispatchEvent(e,t){const s=document.createEvent("Event");s.initEvent(t,!1,!1),e.dispatchEvent(s)}trimValue(e,t){e.value=t.trim(),this.dispatchEvent(e,"input")}onBlur(e,t){this.trim&&"blur"!==this.trim||"function"!=typeof t.trim||t.trim()===t||(this.trimValue(e,t),this.dispatchEvent(e,"blur"))}}return SystemTrimInputDirective.ɵfac=function(e){return new(e||SystemTrimInputDirective)},SystemTrimInputDirective.ɵdir=i.lG2({type:SystemTrimInputDirective,selectors:[["input","system-trim-input",""],["textarea","system-trim-input",""]],hostBindings:function(e,t){1&e&&i.NdJ("blur",(function(e){return t.onBlur(e.target,e.target.value)}))},inputs:{trim:["system-trim-input","trim"]}}),SystemTrimInputDirective})()},3814:(e,t,s)=>{"use strict";s.d(t,{V:()=>l});var i=s(2294),n=s(1571);let l=(()=>{class SystemViewProviderDirective{constructor(e,t,s){this.renderer=e,this.elementRef=t,this.view=s}set viewSettings(e){e.editable&&(this.view.isEditable=!0),!1===e.displayLabels&&(this.view.displayLabels=!1),!1===e.displayLinks&&(this.view.displayLinks=!1)}ngAfterViewInit(){this.setviewSize(),this.resizeHandler=this.renderer.listen("window","resize",(()=>this.setviewSize()))}ngOnDestroy(){this.resizeHandler&&this.resizeHandler()}setviewSize(){this.elementRef.nativeElement.getBoundingClientRect().width<500?this.view.size="small":this.view.size="regular"}}return SystemViewProviderDirective.ɵfac=function(e){return new(e||SystemViewProviderDirective)(n.Y36(n.Qsj),n.Y36(n.SBq),n.Y36(i.e))},SystemViewProviderDirective.ɵdir=n.lG2({type:SystemViewProviderDirective,selectors:[["","system-view-provider",""]],inputs:{viewSettings:["system-view-provider","viewSettings"]},features:[n._Bn([i.e])]}),SystemViewProviderDirective})()},909:(e,t,s)=>{"use strict";s.d(t,{Q:()=>d});var i=s(1571),n=s(4154),l=s(4044),o=s(5329),a=s(7774);let d=(()=>{class GlobalAppLauncher{constructor(e,t,s,i){this.metadata=e,this.modal=t,this.language=s,this.router=i}quickLaunch(e){this.showAppLauncher()}get roleName(){let e=this.metadata.getActiveRole();return e.label&&""!=e.label?this.language.getLabel(e.label):this.metadata.getActiveRole().name}showAppLauncher(){this.modal.openModal("GlobalAppLauncherDialog")}navigateHome(){this.router.navigate(["module/Home"])}}return GlobalAppLauncher.ɵfac=function(e){return new(e||GlobalAppLauncher)(i.Y36(n.Pu),i.Y36(l.o),i.Y36(o.d),i.Y36(a.F0))},GlobalAppLauncher.ɵcmp=i.Xpm({type:GlobalAppLauncher,selectors:[["global-app-launcher"]],hostAttrs:[1,"slds-context-bar__primary","slds-context-bar__item--divider-right"],hostBindings:function(e,t){1&e&&i.NdJ("keydown.control.space",(function(){return t.quickLaunch()}),!1,i.evT)},decls:16,vars:1,consts:[[1,"slds-context-bar__item","slds-context-bar__dropdown-trigger","slds-dropdown-trigger","slds-dropdown-trigger--click","slds-no-hover"],[1,"slds-context-bar__icon-action","slds-m-top_small",3,"click"],["href","javascript:void(0);",1,"slds-icon-waffle_container","slds-context-bar__button"],[1,"slds-icon-waffle"],[1,"slds-r1"],[1,"slds-r2"],[1,"slds-r3"],[1,"slds-r4"],[1,"slds-r5"],[1,"slds-r6"],[1,"slds-r7"],[1,"slds-r8"],[1,"slds-r9"],[1,"slds-context-bar__label-action","slds-context-bar__app-name"],[1,"slds-truncate","slds-text-link--reset",3,"click"]],template:function(e,t){1&e&&(i.TgZ(0,"div",0)(1,"div",1),i.NdJ("click",(function(){return t.showAppLauncher()})),i.TgZ(2,"a",2)(3,"div",3),i._UZ(4,"div",4)(5,"div",5)(6,"div",6)(7,"div",7)(8,"div",8)(9,"div",9)(10,"div",10)(11,"div",11)(12,"div",12),i.qZA()()(),i.TgZ(13,"span",13)(14,"span",14),i.NdJ("click",(function(){return t.navigateHome()})),i._uU(15),i.qZA()()()),2&e&&(i.xp6(15),i.Oqu(t.roleName))},encapsulation:2}),GlobalAppLauncher})()},1977:(e,t,s)=>{"use strict";s.d(t,{M:()=>l});var i=s(3629),n=s(1571);let l=(()=>{class GlobalCopyright{constructor(){this.buildNumber="",this.copyright="",this.buildNumber=i.N.buildNumber,this.copyright=i.N.copyright}}return GlobalCopyright.ɵfac=function(e){return new(e||GlobalCopyright)},GlobalCopyright.ɵcmp=n.Xpm({type:GlobalCopyright,selectors:[["global-copyright"]],decls:9,vars:2,consts:[[1,"slds-align_absolute-center"],["href","https://www.spicecrm.com","target","”_blank”"]],template:function(e,t){1&e&&(n.TgZ(0,"div")(1,"div",0),n._uU(2,"SpiceCRM - "),n.TgZ(3,"a",1),n._uU(4,"www.spicecrm.com"),n.qZA()(),n.TgZ(5,"div",0),n._uU(6),n.qZA(),n.TgZ(7,"div",0),n._uU(8),n.qZA()()),2&e&&(n.xp6(6),n.Oqu(t.copyright),n.xp6(2),n.hij("version ",t.buildNumber,""))},encapsulation:2}),GlobalCopyright})()},4553:(e,t,s)=>{"use strict";s.d(t,{U:()=>y});var i=s(1571),n=s(5710),l=s(2294),o=s(4154),a=s(788),d=s(5329),r=s(4044),c=s(6895),u=s(2656),m=s(4561),h=s(8861),g=s(3428);const p=["containercontent"];function f(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"button",9),i.NdJ("click",(function(){i.CHM(e);const t=i.oxw();return i.KtG(t.expand())})),i._UZ(1,"system-button-icon",10),i.qZA()}2&e&&(i.xp6(1),i.Q6J("icon","expand_alt"))}const b=function(e,t){return{"slds-is-closed":e,"slds-is-open":t}};let y=(()=>{class GlobalDockedComposer{constructor(e,t,s,i,n,l,o){this.metadata=e,this.dockedComposer=t,this.language=s,this.model=i,this.view=n,this.modal=l,this.ViewContainerRef=o,this.composerdata={},this.isClosed=!1,this.view.isEditable=!0,this.view.setEditMode(),this.model.isEditing=!0,this.model.isGlobal=!0}ngOnInit(){this.model.module=this.composerdata.module,this.model.id=this.composerdata.id,this.composerdata.model.data?this.model.setData(this.composerdata.model.data,!1):this.model.initializeModel(),this.dockedComposer.composers[this.composerindex].model=this.model;let e=this.metadata.getComponentConfig("GlobalDockedComposer",this.model.module);if(e.componentset){let t=this.metadata.getComponentSetObjects(e.componentset);for(let e of t)this.metadata.addComponent("ObjectRecordFieldset",this.containercontent).subscribe((t=>{t.instance.componentconfig=e.componentconfig}))}else e.fieldset&&this.metadata.addComponent("ObjectRecordFieldset",this.containercontent).subscribe((t=>{t.instance.direction="vertical",t.instance.fieldset=e.fieldset}));this.actionset=e.actionset,this.composerdata.loadexpanded&&this.canExpand&&(this.expand(),this.composerdata.loadexpanded=!1)}get displayLabel(){return this.model.getField("name")?this.model.getField("name"):this.language.getModuleName(this.model.module,!0)}toggleClosed(){this.isClosed=!this.isClosed}get toggleIcon(){return this.isClosed?"erect_window":"minimize_window"}get canExpand(){return!_.isEmpty(this.metadata.getComponentConfig("GlobalDockedComposerModal",this.model.module))}expand(){this.modal.openModal("GlobalDockedComposerModal",!0,this.ViewContainerRef.injector)}handleaction(e){if("savegodetail"===e)this.model.goDetail(),this.closeComposer();else this.closeComposer()}promptClose(){this.modal.prompt("confirm",this.language.getLabel("MSG_CANCEL","","long"),this.language.getLabel("MSG_CANCEL")).subscribe((e=>{e&&this.closeComposer()}))}closeComposer(){for(let e=0;e<this.dockedComposer.composers.length;e++)this.dockedComposer.composers[e].id===this.composerdata.id&&this.dockedComposer.composers.splice(e,1)}}return GlobalDockedComposer.ɵfac=function(e){return new(e||GlobalDockedComposer)(i.Y36(o.Pu),i.Y36(a.m),i.Y36(d.d),i.Y36(n.o),i.Y36(l.e),i.Y36(r.o),i.Y36(i.s_b))},GlobalDockedComposer.ɵcmp=i.Xpm({type:GlobalDockedComposer,selectors:[["global-docked-composer"]],viewQuery:function(e,t){if(1&e&&i.Gf(p,7,i.s_b),2&e){let e;i.iGM(e=i.CRH())&&(t.containercontent=e.first)}},inputs:{composerdata:"composerdata",composerindex:"composerindex"},features:[i._Bn([n.o,l.e])],decls:23,vars:11,consts:[["role","dialog",1,"slds-docked-composer","slds-grid","slds-grid_vertical","slds-m-horizontal--x-small",2,"transition",".5s",3,"ngClass"],["aria-live","assertive",1,"slds-docked-composer__header","slds-grid","slds-shrink-none"],[1,"slds-media","slds-media_center","slds-no-space"],[1,"slds-media__figure","slds-m-right_x-small"],[1,"slds-icon_container"],[3,"module","size"],[1,"slds-media__body"],[1,"slds-truncate"],[1,"slds-col_bump-left","slds-shrink-none"],[1,"slds-button","slds-button_icon","slds-button_icon",3,"click"],[3,"icon"],["class","slds-button slds-button_icon slds-button_icon",3,"click",4,"ngIf"],[1,"slds-docked-composer__body","slds-theme--default","slds-scrollable",2,"height","380px"],["containercontent",""],[1,"slds-docked-composer__footer","slds-shrink-none","slds-grid","slds-grid--vertical-align-center","slds-grid--align-spread"],[1,"slds-col"],[1,"slds-col_bump-left"],[3,"actionset","actionemitter"]],template:function(e,t){1&e&&(i.TgZ(0,"section",0)(1,"header",1)(2,"div",2)(3,"div",3)(4,"span",4),i._UZ(5,"system-icon",5),i.qZA()(),i.TgZ(6,"div",6)(7,"div",7),i._uU(8),i.qZA()()(),i.TgZ(9,"div",8)(10,"button",9),i.NdJ("click",(function(){return t.toggleClosed()})),i._UZ(11,"system-button-icon",10),i.qZA(),i.YNc(12,f,2,1,"button",11),i.TgZ(13,"button",9),i.NdJ("click",(function(){return t.promptClose()})),i._UZ(14,"system-button-icon",10),i.qZA()()(),i.TgZ(15,"div",12),i._UZ(16,"div",null,13),i.qZA(),i.TgZ(18,"footer",14)(19,"div",15),i._UZ(20,"global-docked-composer-messages-badge"),i.qZA(),i.TgZ(21,"div",16)(22,"object-action-container",17),i.NdJ("actionemitter",(function(e){return t.handleaction(e)})),i.qZA()()()()),2&e&&(i.Q6J("ngClass",i.WLB(8,b,t.isClosed,!t.isClosed)),i.xp6(5),i.Q6J("module",t.model.module)("size","small"),i.xp6(3),i.Oqu(t.displayLabel),i.xp6(3),i.Q6J("icon",t.toggleIcon),i.xp6(1),i.Q6J("ngIf",t.canExpand),i.xp6(2),i.Q6J("icon","close"),i.xp6(8),i.Q6J("actionset",t.actionset))},dependencies:[c.mk,c.O5,u.J,m.f,h.S,g.U],encapsulation:2}),GlobalDockedComposer})()},7877:(e,t,s)=>{"use strict";s.d(t,{y:()=>g});var i=s(1571),n=s(788),l=s(2251),o=s(6895),a=s(2995),d=s(4553),r=s(4028);function c(e,t){1&e&&i._UZ(0,"global-docked-composer-overflow")}function u(e,t){if(1&e&&i._UZ(0,"global-docked-composer",3),2&e){const e=t.$implicit,s=t.index,n=i.oxw();i.Q6J("composerindex",s)("composerdata",e)("ngStyle",n.getComposerStyle(s))}}const m=function(e){return{calldata:e}};function h(e,t){if(1&e&&(i.ynx(0),i._UZ(1,"system-dynamic-component",4),i.BQk()),2&e){const e=t.$implicit;i.xp6(1),i.Q6J("componentattributes",i.VKq(1,m,e))}}let g=(()=>{class GlobalDockedComposerContainer{constructor(e,t){this.dockedComposer=e,this.telephony=t}get isVisible(){return this.dockedComposer.composers.length>0||this.telephony.calls.length>0}getComposerStyle(e){if(e>=this.dockedComposer.maxComposers-this.telephony.calls.length)return{display:"none"}}get displayOverflow(){return this.dockedComposer.composers.length+this.telephony.calls.length>this.dockedComposer.maxComposers}}return GlobalDockedComposerContainer.ɵfac=function(e){return new(e||GlobalDockedComposerContainer)(i.Y36(n.m),i.Y36(l.n))},GlobalDockedComposerContainer.ɵcmp=i.Xpm({type:GlobalDockedComposerContainer,selectors:[["global-docked-composer-container"]],hostAttrs:[2,"z-index","9999"],hostVars:2,hostBindings:function(e,t){2&e&&i.ekj("slds-docked_container",t.isVisible)},decls:3,vars:3,consts:[[4,"ngIf"],[3,"composerindex","composerdata","ngStyle",4,"ngFor","ngForOf"],[4,"ngFor","ngForOf"],[3,"composerindex","composerdata","ngStyle"],["component","TelephonyDockedCall",3,"componentattributes"]],template:function(e,t){1&e&&(i.YNc(0,c,1,0,"global-docked-composer-overflow",0),i.YNc(1,u,1,3,"global-docked-composer",1),i.YNc(2,h,2,3,"ng-container",2)),2&e&&(i.Q6J("ngIf",t.displayOverflow),i.xp6(1),i.Q6J("ngForOf",t.dockedComposer.composers),i.xp6(1),i.Q6J("ngForOf",t.telephony.calls))},dependencies:[o.sg,o.O5,o.PC,a.T,d.U,r.G],encapsulation:2}),GlobalDockedComposerContainer})()},3428:(e,t,s)=>{"use strict";s.d(t,{U:()=>g});var i=s(1571),n=s(5710),l=s(5329),o=s(6895),a=s(2656),d=s(3463),r=s(7674),c=s(8859);function u(e,t){if(1&e&&(i.TgZ(0,"tr",16)(1,"td",17)(2,"div",18),i._UZ(3,"system-utility-icon",19),i.qZA()(),i.TgZ(4,"td",20)(5,"div",18),i._UZ(6,"system-label-fieldname",21),i.qZA()(),i.TgZ(7,"td",22)(8,"div",18),i._uU(9),i.qZA()()()),2&e){const e=t.$implicit,s=i.oxw(3);i.xp6(3),i.Q6J("icon",e.type),i.xp6(3),i.Q6J("module",s.model.module)("field",e.reference),i.xp6(3),i.Oqu(e.message)}}function m(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"section",4)(1,"button",5),i.NdJ("click",(function(){i.CHM(e);const t=i.oxw(2);return i.KtG(t.showpopover=!1)})),i._UZ(2,"system-button-icon",6),i.qZA(),i.TgZ(3,"header",7)(4,"div",8),i._UZ(5,"system-utility-icon",9),i.TgZ(6,"div",10)(7,"h2",11),i._UZ(8,"system-label",12),i.qZA()()()(),i.TgZ(9,"div",13)(10,"table",14)(11,"tbody"),i.YNc(12,u,10,4,"tr",15),i.qZA()()()()}if(2&e){const e=i.oxw(2);i.Q6J("ngClass",e.nubbinClass)("ngStyle",e.popoverStyle),i.xp6(2),i.Q6J("inverse",!0),i.xp6(10),i.Q6J("ngForOf",e.messages)}}function h(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"div",1)(1,"span",2),i.NdJ("click",(function(){i.CHM(e);const t=i.oxw();return i.KtG(t.showpopover=!t.showpopover)})),i._uU(2),i.qZA(),i.YNc(3,m,13,4,"section",3),i.qZA()}if(2&e){const e=i.oxw();i.xp6(2),i.Oqu(e.messagecount),i.xp6(1),i.Q6J("ngIf",e.showpopover)}}let g=(()=>{class GlobalDockedComposerMessagesBadge{constructor(e,t){this.model=e,this.language=t,this.showpopover=!1,this.side="left"}get messagecount(){return this.model.getMessages().length}get messages(){return this.model.getMessages()}get nubbinClass(){return"right"==this.side?"slds-nubbin_bottom-right":"slds-nubbin_bottom-left"}get popoverStyle(){return"right"==this.side?{bottom:"37px",right:"-10px"}:{bottom:"37px",left:"-10px"}}}return GlobalDockedComposerMessagesBadge.ɵfac=function(e){return new(e||GlobalDockedComposerMessagesBadge)(i.Y36(n.o),i.Y36(l.d))},GlobalDockedComposerMessagesBadge.ɵcmp=i.Xpm({type:GlobalDockedComposerMessagesBadge,selectors:[["global-docked-composer-messages-badge"]],inputs:{side:"side"},decls:1,vars:1,consts:[["class","slds-is-relative",4,"ngIf"],[1,"slds-is-relative"],[1,"slds-badge","slds-theme_warning","slds-m-horizontal--xx-small",3,"click"],["aria-label","Model Errors","class","slds-popover slds-popover_error slds-nubbin_bottom-left slds-is-absolute","role","dialog",3,"ngClass","ngStyle",4,"ngIf"],["aria-label","Model Errors","role","dialog",1,"slds-popover","slds-popover_error","slds-nubbin_bottom-left","slds-is-absolute",3,"ngClass","ngStyle"],["title","Close dialog",1,"slds-button","slds-button_icon","slds-button_icon-small","slds-float_right","slds-popover__close",3,"click"],["icon","close",3,"inverse"],[1,"slds-popover__header"],[1,"slds-media","slds-media_center","slds-has-flexi-truncate"],["icon","error","size","x-small","colorclass","slds-icon-utility-error"],[1,"slds-media__body","slds-text-align--left","slds-p-left--x-small"],["title","Resolve error",1,"slds-truncate","slds-text-heading_medium"],["label","LBL_VALIDATION_ERRORS"],[1,"slds-popover__body","slds-p-horizontal--none"],[1,"slds-table","slds-table_cell-buffer","slds-table_bordered"],["class","slds-hint-parent",4,"ngFor","ngForOf"],[1,"slds-hint-parent"],["data-label","type"],[1,"slds-truncate"],["size","x-small",3,"icon"],["data-label","Field"],[3,"module","field"],["data-label","Message"]],template:function(e,t){1&e&&i.YNc(0,h,4,2,"div",0),2&e&&i.Q6J("ngIf",t.messagecount)},dependencies:[o.mk,o.sg,o.O5,o.PC,a.J,d._,r.h,c.r],encapsulation:2}),GlobalDockedComposerMessagesBadge})()},4028:(e,t,s)=>{"use strict";s.d(t,{G:()=>m});var i=s(1571),n=s(788),l=s(2251),o=s(5329),a=s(6895),d=s(2656),r=s(4561);function c(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"li",8)(1,"a",9),i.NdJ("click",(function(){const t=i.CHM(e).$implicit,s=i.oxw(2);return i.KtG(s.focusComposer(t.id))})),i.TgZ(2,"div",10)(3,"div",11)(4,"span",12),i._UZ(5,"system-icon",13),i.qZA()(),i.TgZ(6,"div",14)(7,"h2",15),i._uU(8),i.qZA()()()()()}if(2&e){const e=t.$implicit,s=i.oxw(2);i.xp6(5),i.Q6J("module",e.module)("size","small"),i.xp6(3),i.Oqu(s.displayLabel(e))}}function u(e,t){if(1&e&&(i.TgZ(0,"div",5)(1,"ul",6),i.YNc(2,c,9,3,"li",7),i.qZA()()),2&e){const e=i.oxw();i.xp6(2),i.Q6J("ngForOf",e.overflowComposers)}}let m=(()=>{class GlobalDockedComposerOverflow{constructor(e,t,s,i,n){this.renderer=e,this.elementRef=t,this.dockedComposer=s,this.telephony=i,this.language=n,this.showHiddenComposers=!1}ngOnDestroy(){this.clickListener&&this.clickListener()}get hiddenCount(){return this.dockedComposer.composers.length+this.telephony.calls.length-this.dockedComposer.maxComposers}toggleHiddenComoposers(){this.showHiddenComposers=!this.showHiddenComposers,this.showHiddenComposers?this.clickListener=this.renderer.listen("document","click",(e=>this.onClick(e))):this.clickListener&&this.clickListener()}onClick(e){this.elementRef.nativeElement.contains(e.target)||(this.showHiddenComposers=!1,this.clickListener())}get overflowComposers(){return this.dockedComposer.composers.slice(this.dockedComposer.maxComposers-this.telephony.calls.length)}displayLabel(e){return e.model.data.name?e.model.data.name:this.language.getModuleName(e.model.module,!0)}focusComposer(e){this.dockedComposer.focusComposer(e),this.showHiddenComposers=!1}}return GlobalDockedComposerOverflow.ɵfac=function(e){return new(e||GlobalDockedComposerOverflow)(i.Y36(i.Qsj),i.Y36(i.SBq),i.Y36(n.m),i.Y36(l.n),i.Y36(o.d))},GlobalDockedComposerOverflow.ɵcmp=i.Xpm({type:GlobalDockedComposerOverflow,selectors:[["global-docked-composer-overflow"]],decls:6,vars:3,consts:[[1,"slds-docked-composer","slds-docked-composer_overflow","slds-m-horizontal--x-small"],[1,"slds-button","slds-button_icon","slds-docked-composer_overflow__button",3,"click"],[3,"icon"],[1,"slds-text-body_small","slds-m-left_xx-small"],["class","slds-dropdown slds-dropdown_left slds-dropdown_bottom slds-dropdown_medium slds-nubbin_bottom-left",4,"ngIf"],[1,"slds-dropdown","slds-dropdown_left","slds-dropdown_bottom","slds-dropdown_medium","slds-nubbin_bottom-left"],["role","menu",1,"slds-dropdown__list","slds-dropdown_length-with-icon-7"],["class","slds-dropdown__item","role","presentation",4,"ngFor","ngForOf"],["role","presentation",1,"slds-dropdown__item"],["href","javascript:void(0);","role","menuitem",3,"click"],[1,"slds-media","slds-media_center","slds-no-space"],[1,"slds-media__figure","slds-m-right_x-small"],[1,"slds-icon_container"],[3,"module","size"],[1,"slds-media__body"],[1,"slds-truncate"]],template:function(e,t){1&e&&(i.TgZ(0,"div",0)(1,"button",1),i.NdJ("click",(function(){return t.toggleHiddenComoposers()})),i._UZ(2,"system-button-icon",2),i.TgZ(3,"span",3),i._uU(4),i.qZA()(),i.YNc(5,u,3,1,"div",4),i.qZA()),2&e&&(i.xp6(2),i.Q6J("icon","standard_objects"),i.xp6(2),i.Oqu(t.hiddenCount),i.xp6(1),i.Q6J("ngIf",t.showHiddenComposers))},dependencies:[a.sg,a.O5,d.J,r.f],encapsulation:2}),GlobalDockedComposerOverflow})()},661:(e,t,s)=>{"use strict";s.d(t,{T:()=>g});var i=s(1571),n=s(5920),l=s(3917),o=s(4044),a=s(6895),d=s(2403),r=s(7877);const c=["footercontainer"],u=["modalcontainer"],m=["modalbackdrop"];function h(e,t){1&e&&i._UZ(0,"global-docked-composer-container")}let g=(()=>{class GlobalFooter{constructor(e,t,s){this.session=e,this.footer=t,this.modalservice=s}ngAfterViewInit(){this.footer.footercontainer=this.footercontainer,this.footer.modalcontainer=this.modalcontainer,this.footer.modalbackdrop=this.modalbackdrop}}return GlobalFooter.ɵfac=function(e){return new(e||GlobalFooter)(i.Y36(n.n),i.Y36(l.M),i.Y36(o.o))},GlobalFooter.ɵcmp=i.Xpm({type:GlobalFooter,selectors:[["global-footer"]],viewQuery:function(e,t){if(1&e&&(i.Gf(c,7,i.s_b),i.Gf(u,7,i.s_b),i.Gf(m,7,i.s_b)),2&e){let e;i.iGM(e=i.CRH())&&(t.footercontainer=e.first),i.iGM(e=i.CRH())&&(t.modalcontainer=e.first),i.iGM(e=i.CRH())&&(t.modalbackdrop=e.first)}},decls:10,vars:7,consts:[[4,"ngIf"],["footercontainer",""],["data-info","ModalContainer",2,"position","fixed","z-index","10000"],[1,"slds-backdrop"],["backdrop",""],["modalcontainer",""],[1,"slds-notify_container"]],template:function(e,t){1&e&&(i.TgZ(0,"footer"),i.YNc(1,h,1,0,"global-docked-composer-container",0),i._UZ(2,"div",null,1),i.TgZ(4,"div",2),i._UZ(5,"div",3,4)(7,"span",null,5),i.qZA(),i._UZ(9,"system-toast-container",6),i.qZA()),2&e&&(i.xp6(1),i.Q6J("ngIf",t.session.authData.sessionId&&!0===t.session.authData.loaded),i.xp6(4),i.Udp("z-index",t.modalservice.backdropZindex)("backdrop-filter",t.modalservice.backdropBlurred),i.ekj("slds-backdrop_open",t.modalservice.backdropVisible))},dependencies:[a.O5,d.t,r.y],encapsulation:2}),GlobalFooter})()},48:(e,t,s)=>{"use strict";s.d(t,{e:()=>x});var i=s(1571),n=s(7774),l=s(5920),o=s(3278),a=s(6559),d=s(2032),r=s(6625),c=s(6895),u=s(2552),m=s(6558),h=s(4365),g=s(6131);const p=["header"];function f(e,t){1&e&&i._UZ(0,"global-header-trial-bar")}function b(e,t){1&e&&i._UZ(0,"global-navigation-tabbed")}function y(e,t){1&e&&i._UZ(0,"global-navigation")}function v(e,t){if(1&e&&(i.TgZ(0,"div"),i.YNc(1,f,1,0,"global-header-trial-bar",2),i._UZ(2,"global-header-top"),i.YNc(3,b,1,0,"global-navigation-tabbed",2),i.YNc(4,y,1,0,"global-navigation",2),i._UZ(5,"div",3),i.qZA()),2&e){const e=i.oxw();i.xp6(1),i.Q6J("ngIf",e.isTenant),i.xp6(2),i.Q6J("ngIf",!e.issmall&&e.tabbed),i.xp6(1),i.Q6J("ngIf",!e.issmall&&!e.tabbed)}}let x=(()=>{class GlobalHeader{constructor(e,t,s,i,l,o){this.session=e,this.router=t,this.toast=s,this.layout=i,this.navigation=l,this.configurationService=o,this.router.events.subscribe((e=>{if(e instanceof n.wM){let t=this.configurationService.getSystemParamater("aclcontroller");t&&"spiceacl"!=t&&"Users"===e.snapshot.params.module&&e.snapshot.params.id&&(this.session.authData.admin||e.snapshot.params.id==this.session.authData.userId||(this.toast.sendToast("You are not allowed to view or edit foreign user data.","warning",null,3),this.router.navigate(["/module/Users"])))}}))}get headerHeight(){return this.header?this.header.element.nativeElement.getBoundingClientRect().height:0}get tabbed(){return"subtabbed"==this.navigation.navigationparadigm}get issmall(){return"small"==this.layout.screenwidth}get isTenant(){return!_.isEmpty(this.configurationService.getData("tenantconfig"))}}return GlobalHeader.ɵfac=function(e){return new(e||GlobalHeader)(i.Y36(l.n),i.Y36(n.F0),i.Y36(o.A),i.Y36(a.b),i.Y36(d.G),i.Y36(r.C))},GlobalHeader.ɵcmp=i.Xpm({type:GlobalHeader,selectors:[["global-header"]],viewQuery:function(e,t){if(1&e&&i.Gf(p,5,i.s_b),2&e){let e;i.iGM(e=i.CRH())&&(t.header=e.first)}},decls:3,vars:1,consts:[[1,"slds-global-header_container"],["header",""],[4,"ngIf"],[1,"slds-hide--medium","slds-context-bar",2,"height","0px"]],template:function(e,t){1&e&&(i.TgZ(0,"header",0,1),i.YNc(2,v,6,3,"div",2),i.qZA()),2&e&&(i.xp6(2),i.Q6J("ngIf",t.session.authData.sessionId&&!0===t.session.authData.loaded))},dependencies:[c.O5,u.f,m.e,h.q,g.s],encapsulation:2}),GlobalHeader})()},3131:(e,t,s)=>{"use strict";s.d(t,{s:()=>o});var i=s(1571),n=s(1481),l=s(6625);let o=(()=>{class GlobalHeaderImage{constructor(e,t,s){this.sanitizer=e,this.cdref=t,this.configuration=s,this.defaultImageUrl="config/headerimage",this.imageUrl=this.defaultImageUrl,this.configuration.hasCapabilityConfig("theme")&&this.setImageUrl(),this.subscription=this.configuration.loaded$.subscribe((e=>{e&&this.setImageUrl()}))}setImageUrl(){this.configuration.getAsset("headerimage")?this.imageUrl=this.sanitizer.bypassSecurityTrustResourceUrl(this.configuration.getAsset("headerimage")):this.configuration.getCapabilityConfig("theme").header_image?this.imageUrl=this.sanitizer.bypassSecurityTrustResourceUrl("data:"+this.configuration.getCapabilityConfig("theme").header_image):this.imageUrl=this.defaultImageUrl}ngOnDestroy(){this.subscription.unsubscribe()}}return GlobalHeaderImage.ɵfac=function(e){return new(e||GlobalHeaderImage)(i.Y36(n.H7),i.Y36(i.sBO),i.Y36(l.C))},GlobalHeaderImage.ɵcmp=i.Xpm({type:GlobalHeaderImage,selectors:[["global-header-image"]],decls:1,vars:1,consts:[[1,"slds-show--large",2,"max-height","25px",3,"src"]],template:function(e,t){1&e&&i._UZ(0,"img",0),2&e&&i.Q6J("src",t.imageUrl,i.LSH)},encapsulation:2}),GlobalHeaderImage})()},141:(e,t,s)=>{"use strict";s.d(t,{z:()=>k});var i=s(1571),n=s(2487),l=s(7774),o=s(3369),a=s(6625),d=s(6895),r=s(433),c=s(5681),u=s(3398),m=s(4561),h=s(3463),g=s(3333),p=s(8859),f=s(6115),b=s(3838);const _=["searchfield"];function y(e,t){1&e&&i._UZ(0,"system-utility-icon",30)}function v(e,t){1&e&&i._UZ(0,"system-utility-icon",30)}function x(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"li",22),i.NdJ("click",(function(){const t=i.CHM(e).$implicit,s=i.oxw(2);return i.KtG(s.searchmodule=t)})),i.TgZ(1,"div",23)(2,"div",24),i.YNc(3,v,1,0,"system-utility-icon",25),i.qZA(),i.TgZ(4,"div",26)(5,"div",27),i._UZ(6,"system-label-modulename",31),i.qZA()()()()}if(2&e){const e=t.$implicit,s=i.oxw(2);i.xp6(3),i.Q6J("ngIf",e==s._searchmodule),i.xp6(3),i.Q6J("module",e)}}function Z(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"div",14)(1,"div",1)(2,"div",2)(3,"div",15)(4,"div",16)(5,"div",17)(6,"input",18),i.NdJ("ngModelChange",(function(t){i.CHM(e);const s=i.oxw();return i.KtG(s.searchmodule=t)})),i.qZA(),i._UZ(7,"system-icon",19),i.qZA(),i.TgZ(8,"div",20)(9,"ul",21)(10,"li",22),i.NdJ("click",(function(){i.CHM(e);const t=i.oxw();return i.KtG(t.searchmodule="all")})),i.TgZ(11,"div",23)(12,"div",24),i.YNc(13,y,1,0,"system-utility-icon",25),i.qZA(),i.TgZ(14,"div",26)(15,"div",27),i._UZ(16,"system-label",28),i.qZA()()()(),i.YNc(17,x,7,2,"li",29),i.qZA()()()()()()()}if(2&e){const e=i.oxw();i.xp6(6),i.Q6J("ngModel",e.searchmodule),i.xp6(7),i.Q6J("ngIf","all"==e.searchmodule),i.xp6(4),i.Q6J("ngForOf",e.fts.loadedSearchModules)}}function w(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"global-header-search-recent-items",32),i.NdJ("selected",(function(t){i.CHM(e);const s=i.oxw();return i.KtG(s.selected(t))})),i.qZA()}}function T(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"global-header-search-results-items",33),i.NdJ("selected",(function(t){i.CHM(e);const s=i.oxw();return i.KtG(s.selected(t))})),i.qZA()}if(2&e){const e=i.oxw();i.Q6J("searchTerm",e.searchTerm)("searchResults",e.searchresults)}}const C=function(e){return{"slds-combobox-addon_start":e}},A=function(e){return{"slds-is-open":e}};let k=(()=>{class GlobalHeaderSearch{constructor(e,t,s,i,n,l){this.router=e,this.broadcast=t,this.fts=s,this.configuration=i,this.elementRef=n,this.renderer=l,this.showRecent=!1,this.searchTimeOut=void 0,this.searchTerm="",this.searchTermUntrimmed="",this._searchmodule="all",this.searchresults=[]}quickLaunch(e){this.serachfield.element.nativeElement.focus()}get searchmodule(){return this._searchmodule}set searchmodule(e){this._searchmodule=e,this.searchTerm&&this.showRecent&&this.executeSearch()}get showModuleSelector(){return window.innerWidth>=768}onFocus(){this.showRecent=!0,this.clickListener=this.renderer.listen("document","click",(e=>this.onClick(e)))}closePopup(){this.clickListener(),this.showRecent=!1,this.searchTerm="",this.searchTermUntrimmed=""}doSearch(){this.searchTerm=this.searchTermUntrimmed.trim(),this.searchTerm.length&&this.searchTerm!==this.fts.searchTerm&&this.executeSearch()}executeSearch(){let e=[];this.showModuleSelector&&"all"!=this._searchmodule&&e.push(this._searchmodule),this.searchresults=[],this.fts.searchByModules({searchterm:this.searchTerm,modules:e,size:10}).subscribe((e=>{let t=[];for(let e of this.fts.moduleSearchresults)t=t.concat(e.data.hits);t.sort(((e,t)=>e._score>t._score?-1:1)),this.searchresults=t.splice(0,10)}))}clearSearchTerm(){this.searchTimeOut&&window.clearTimeout(this.searchTimeOut),this.searchTerm="",this.searchTermUntrimmed="",this.fts.searchTerm=""}search(e){switch(this.showRecent=!0,e.key){case"ArrowDown":case"ArrowUp":break;case"Enter":this.searchTerm=this.searchTermUntrimmed.trim(),this.searchTerm.length&&this.searchTermsValid(this.searchTerm)&&(this.searchTimeOut&&window.clearTimeout(this.searchTimeOut),this.showRecent=!1,this.searchTerm.length>0&&this.router.navigate(["/search/"+encodeURIComponent(btoa(this.searchTerm))]));break;default:this.searchTimeOut&&window.clearTimeout(this.searchTimeOut),this.searchTermsValid(this.searchTermUntrimmed.trim())?this.searchTimeOut=window.setTimeout((()=>this.doSearch()),1e3):""==this.searchTermUntrimmed.trim()&&(this.searchTerm="")}}searchTermsValid(e){let t=this.configuration.getCapabilityConfig("search"),s=t.min_ngram?parseInt(t.min_ngram,10):3,i=t.max_ngram?parseInt(t.max_ngram,10):20;return 0==e.split(" ").filter((e=>e.length<s||e.length>i)).length}onClick(e){this.elementRef.nativeElement.contains(e.target)||this.closePopup()}selected(e){this.showRecent=!1,this.clearSearchTerm()}}return GlobalHeaderSearch.ɵfac=function(e){return new(e||GlobalHeaderSearch)(i.Y36(l.F0),i.Y36(o.f),i.Y36(n.Q),i.Y36(a.C),i.Y36(i.SBq),i.Y36(i.Qsj))},GlobalHeaderSearch.ɵcmp=i.Xpm({type:GlobalHeaderSearch,selectors:[["global-header-search"]],viewQuery:function(e,t){if(1&e&&i.Gf(_,5,i.s_b),2&e){let e;i.iGM(e=i.CRH())&&(t.serachfield=e.first)}},hostBindings:function(e,t){1&e&&i.NdJ("keydown.control.s",(function(){return t.quickLaunch()}),!1,i.evT)},features:[i._Bn([n.Q])],decls:14,vars:10,consts:[[1,"slds-global-header__item_search",2,"min-width","15rem"],[1,"slds-form-element"],[1,"slds-form-element__control"],[1,"slds-combobox-group"],["class","slds-combobox_object-switcher slds-combobox-addon_start",4,"ngIf"],[1,"slds-combobox_container","slds-combobox-addon_end",3,"ngClass"],["role","combobox",1,"slds-combobox","slds-dropdown-trigger","slds-dropdown-trigger_click",3,"ngClass"],["role","none",1,"slds-combobox__form-element","slds-input-has-icon","slds-input-has-icon_left","slds-global-search__form-element"],["icon","search","addclasses","slds-input__icon slds-input__icon--left"],["role","textbox","type","search","system-placeholder","LBL_SEARCH_SPICE",1,"slds-input","slds-combobox__input",3,"ngModel","focus","ngModelChange","keyup"],["searchfield",""],["role","listbox",1,"slds-dropdown","slds-dropdown_fluid"],[3,"selected",4,"ngIf"],[3,"searchTerm","searchResults","selected",4,"ngIf"],[1,"slds-combobox_object-switcher","slds-combobox-addon_start"],[1,"slds-combobox_container"],["system-dropdown-trigger","","role","combobox",1,"slds-combobox","slds-dropdown-trigger","slds-dropdown-trigger_click"],["role","none",1,"slds-combobox__form-element","slds-input-has-icon","slds-input-has-icon_right"],["type","text","readonly","","role","textbox",1,"slds-input","slds-combobox__input","slds-combobox__input-value",3,"ngModel","ngModelChange"],["icon","down","sprite","utility","size","x-small","addclasses","slds-icon_container slds-icon-utility-down slds-input__icon slds-input__icon_right"],[1,"slds-dropdown","slds-dropdown_x-small","slds-dropdown_left"],["role","group",1,"slds-listbox","slds-listbox_vertical"],["role","presentation",1,"slds-listbox__item",3,"click"],["role","option",1,"slds-media","slds-listbox__option","slds-listbox__option_plain","slds-media_small"],[1,"slds-media__figure","slds-listbox__option-icon"],["icon","check","size","x-small",4,"ngIf"],[1,"slds-media__body"],[1,"slds-truncate"],["label","LBL_ALL"],["role","presentation","class","slds-listbox__item",3,"click",4,"ngFor","ngForOf"],["icon","check","size","x-small"],[3,"module"],[3,"selected"],[3,"searchTerm","searchResults","selected"]],template:function(e,t){1&e&&(i.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),i.YNc(4,Z,18,3,"div",4),i.TgZ(5,"div",5)(6,"div",6)(7,"div",7),i._UZ(8,"system-utility-icon",8),i.TgZ(9,"input",9,10),i.NdJ("focus",(function(){return t.onFocus()}))("ngModelChange",(function(e){return t.searchTermUntrimmed=e}))("keyup",(function(e){return t.search(e)})),i.qZA()(),i.TgZ(11,"div",11),i.YNc(12,w,1,0,"global-header-search-recent-items",12),i.YNc(13,T,1,2,"global-header-search-results-items",13),i.qZA()()()()()()()),2&e&&(i.xp6(4),i.Q6J("ngIf",t.showModuleSelector),i.xp6(1),i.Q6J("ngClass",i.VKq(6,C,!t.showModuleSelector)),i.xp6(1),i.Q6J("ngClass",i.VKq(8,A,t.showRecent)),i.xp6(3),i.Q6J("ngModel",t.searchTermUntrimmed),i.xp6(3),i.Q6J("ngIf",t.showRecent&&""===t.searchTerm),i.xp6(1),i.Q6J("ngIf",""!==t.searchTerm&&t.searchTermsValid(t.searchTerm)))},dependencies:[d.mk,d.sg,d.O5,r.Fj,r.JJ,r.On,c.l,u.A,m.f,h._,g.M,p.r,f.o,b.B],encapsulation:2}),GlobalHeaderSearch})()},4373:(e,t,s)=>{"use strict";s.d(t,{S:()=>_});var i=s(1571),n=s(5710),l=s(2294),o=s(7774),a=s(5329),d=s(4154),r=s(6895),c=s(3634),u=s(4561),m=s(3333),h=s(5931);const g=["global-header-search-recent-item",""];function p(e,t){if(1&e&&(i.TgZ(0,"span"),i._uU(1),i.qZA()),2&e){const e=i.oxw();i.xp6(1),i.Oqu(e.model.data.summary_text)}}function f(e,t){if(1&e&&(i.TgZ(0,"li",8),i._UZ(1,"field-container",12),i.qZA()),2&e){const e=i.oxw().$implicit;i.xp6(1),i.Q6J("field",e.field)("fieldconfig",e.fieldconfig)}}function b(e,t){if(1&e&&(i.ynx(0),i.YNc(1,f,2,2,"li",11),i.BQk()),2&e){const e=t.$implicit,s=i.oxw();i.xp6(1),i.Q6J("ngIf",s.model.getField(e.field))}}let _=(()=>{class GlobalHeaderSearchRecentItem{constructor(e,t,s,n,l){this.model=e,this.router=t,this.language=s,this.metadata=n,this.view=l,this.item={},this.selected=new i.vpe,this.view.displayLabels=!1}navigateTo(){this.selected.emit(!0),this.router.navigate(["/module/"+this.model.module+"/"+this.model.id])}gethref(){return"#/module/"+this.model.module+"/"+this.model.id}ngOnInit(){this.model.module=this.item.module_name,this.model.id=this.item.item_id,this.model.setData(this.item.data);let e=this.metadata.getComponentConfig("GlobalHeaderSearchResultsItem",this.model.module);this.mainfieldset=e.mainfieldset,e&&e.subfieldset&&(this.subfieldsetfields=this.metadata.getFieldSetItems(e.subfieldset))}}return GlobalHeaderSearchRecentItem.ɵfac=function(e){return new(e||GlobalHeaderSearchRecentItem)(i.Y36(n.o),i.Y36(o.F0),i.Y36(a.d),i.Y36(d.Pu),i.Y36(l.e))},GlobalHeaderSearchRecentItem.ɵcmp=i.Xpm({type:GlobalHeaderSearchRecentItem,selectors:[["","global-header-search-recent-item",""]],hostBindings:function(e,t){1&e&&i.NdJ("click",(function(){return t.navigateTo()}))},inputs:{item:"item"},outputs:{selected:"selected"},features:[i._Bn([n.o,l.e])],attrs:g,decls:11,vars:6,consts:[["role","option",1,"slds-lookup__item-action","slds-media","slds-media--center"],["size","small",3,"module"],[1,"slds-media__body"],[1,"slds-lookup__result-text"],[4,"ngIf"],[3,"fieldset"],[1,"slds-lookup__result-meta","slds-text-body--small"],[1,"slds-list_horizontal","slds-has-dividers_right","slds-truncate"],[1,"slds-item"],[3,"module","singular"],[4,"ngFor","ngForOf"],["class","slds-item",4,"ngIf"],["fielddisplayclass","slds-truncate",3,"field","fieldconfig"]],template:function(e,t){1&e&&(i.TgZ(0,"span",0),i._UZ(1,"system-icon",1),i.TgZ(2,"div",2)(3,"div",3),i.YNc(4,p,2,1,"span",4),i._UZ(5,"object-record-fieldset-horizontal-list",5),i.qZA(),i.TgZ(6,"span",6)(7,"ul",7)(8,"li",8),i._UZ(9,"system-label-modulename",9),i.qZA(),i.YNc(10,b,2,1,"ng-container",10),i.qZA()()()()),2&e&&(i.xp6(1),i.Q6J("module",t.model.module),i.xp6(3),i.Q6J("ngIf",!t.mainfieldset),i.xp6(1),i.Q6J("fieldset",t.mainfieldset),i.xp6(4),i.Q6J("module",t.model.module)("singular",!0),i.xp6(1),i.Q6J("ngForOf",t.subfieldsetfields))},dependencies:[r.sg,r.O5,c.j,u.f,m.M,h.Z],encapsulation:2}),GlobalHeaderSearchRecentItem})()},3838:(e,t,s)=>{"use strict";s.d(t,{B:()=>m});var i=s(1571),n=s(5329),l=s(382),o=s(7774),a=s(6895),d=s(4561),r=s(3463),c=s(4373);function u(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"li",8),i.NdJ("selected",(function(){i.CHM(e);const t=i.oxw();return i.KtG(t.selected.emit(!0))})),i.qZA()}if(2&e){const e=t.$implicit;i.Q6J("item",e)}}let m=(()=>{class GlobalHeaderSearchRecentItems{constructor(e,t,s){this.language=e,this.recent=t,this.router=s,this.selected=new i.vpe}goRecent(){this.selected.emit(!1),this.router.navigate(["/recent"])}}return GlobalHeaderSearchRecentItems.ɵfac=function(e){return new(e||GlobalHeaderSearchRecentItems)(i.Y36(n.d),i.Y36(l.h),i.Y36(o.F0))},GlobalHeaderSearchRecentItems.ɵcmp=i.Xpm({type:GlobalHeaderSearchRecentItems,selectors:[["global-header-search-recent-items"]],outputs:{selected:"selected"},decls:8,vars:1,consts:[["role","listbox"],["role","presentation",3,"click"],["role","option",1,"slds-lookup__item-action","slds-media","slds-media--center"],["icon","breadcrumbs","size","small","sprite","utility"],[1,"slds-media__body"],[1,"slds-lookup__result-text"],["label","LBL_RECENTLYVIEWED"],["global-header-search-recent-item","",3,"item","selected",4,"ngFor","ngForOf"],["global-header-search-recent-item","",3,"item","selected"]],template:function(e,t){1&e&&(i.TgZ(0,"ul",0)(1,"li",1),i.NdJ("click",(function(){return t.goRecent()})),i.TgZ(2,"span",2),i._UZ(3,"system-icon",3),i.TgZ(4,"div",4)(5,"div",5),i._UZ(6,"system-label",6),i.qZA()()()(),i.YNc(7,u,1,1,"li",7),i.qZA()),2&e&&(i.xp6(7),i.Q6J("ngForOf",t.recent.items.slice(0,10)))},dependencies:[a.sg,d.f,r._,c.S],encapsulation:2}),GlobalHeaderSearchRecentItems})()},5650:(e,t,s)=>{"use strict";s.d(t,{u:()=>_});var i=s(1571),n=s(2294),l=s(5710),o=s(7774),a=s(5329),d=s(4154),r=s(6895),c=s(3634),u=s(4561),m=s(3333),h=s(5931);const g=["global-header-search-results-item",""];function p(e,t){if(1&e&&(i.TgZ(0,"span"),i._uU(1),i.qZA()),2&e){const e=i.oxw();i.xp6(1),i.Oqu(e.model.data.summary_text)}}function f(e,t){if(1&e&&(i.TgZ(0,"li",8),i._UZ(1,"field-container",12),i.qZA()),2&e){const e=i.oxw().$implicit;i.xp6(1),i.Q6J("field",e.field)("fieldconfig",e.fieldconfig)}}function b(e,t){if(1&e&&(i.ynx(0),i.YNc(1,f,2,2,"li",11),i.BQk()),2&e){const e=t.$implicit,s=i.oxw();i.xp6(1),i.Q6J("ngIf",s.model.getField(e.field))}}let _=(()=>{class GlobalHeaderSearchResultsItem{constructor(e,t,s,n,l){this.model=e,this.view=t,this.router=s,this.language=n,this.metadata=l,this.hit={},this.selected=new i.vpe,this._noNavigaton=!1,this.view.displayLabels=!1,this.view.displayLinks=!1}set noNavigaton(e){this._noNavigaton=!1!==e}ngOnInit(){this.model.module="_doc"==this.hit._type?this.hit._source._module:this.hit._type,this.model.id=this.hit._id;let e=this.metadata.getComponentConfig("GlobalHeaderSearchResultsItem",this.model.module);this.mainfieldset=e.mainfieldset,e&&e.subfieldset&&(this.subfieldsetfields=this.metadata.getFieldSetItems(e.subfieldset)),this.model.setData(this.hit._source)}navigateTo(){this._noNavigaton?this.selected.emit(this.model):(this.selected.emit(!0),this.router.navigate(["/module/"+this.model.module+"/"+this.model.id]))}}return GlobalHeaderSearchResultsItem.ɵfac=function(e){return new(e||GlobalHeaderSearchResultsItem)(i.Y36(l.o),i.Y36(n.e),i.Y36(o.F0),i.Y36(a.d),i.Y36(d.Pu))},GlobalHeaderSearchResultsItem.ɵcmp=i.Xpm({type:GlobalHeaderSearchResultsItem,selectors:[["","global-header-search-results-item",""]],hostBindings:function(e,t){1&e&&i.NdJ("click",(function(){return t.navigateTo()}))},inputs:{hit:"hit",noNavigaton:["global-header-search-results-item-nonavigation","noNavigaton"]},outputs:{selected:"selected"},features:[i._Bn([l.o,n.e])],attrs:g,decls:11,vars:6,consts:[["role","option",1,"slds-lookup__item-action","slds-media","slds-media--center"],["size","small",3,"module"],[1,"slds-media__body"],[1,"slds-lookup__result-text"],[4,"ngIf"],[3,"fieldset"],[1,"slds-lookup__result-meta","slds-text-body--small"],[1,"slds-list_horizontal","slds-has-dividers_right","slds-truncate"],[1,"slds-item"],[3,"module","singular"],[4,"ngFor","ngForOf"],["class","slds-item",4,"ngIf"],["fielddisplayclass","slds-truncate",3,"field","fieldconfig"]],template:function(e,t){1&e&&(i.TgZ(0,"span",0),i._UZ(1,"system-icon",1),i.TgZ(2,"div",2)(3,"div",3),i.YNc(4,p,2,1,"span",4),i._UZ(5,"object-record-fieldset-horizontal-list",5),i.qZA(),i.TgZ(6,"div",6)(7,"ul",7)(8,"li",8),i._UZ(9,"system-label-modulename",9),i.qZA(),i.YNc(10,b,2,1,"ng-container",10),i.qZA()()()()),2&e&&(i.xp6(1),i.Q6J("module",t.model.module),i.xp6(3),i.Q6J("ngIf",!t.mainfieldset),i.xp6(1),i.Q6J("fieldset",t.mainfieldset),i.xp6(4),i.Q6J("module",t.model.module)("singular",!0),i.xp6(1),i.Q6J("ngForOf",t.subfieldsetfields))},dependencies:[r.sg,r.O5,c.j,u.f,m.M,h.Z],encapsulation:2}),GlobalHeaderSearchResultsItem})()},6115:(e,t,s)=>{"use strict";s.d(t,{o:()=>f});var i=s(1571),n=s(7774),l=s(5329),o=s(2487),a=s(6895),d=s(4561),r=s(3463),c=s(4664),u=s(5650);function m(e,t){1&e&&i._UZ(0,"system-spinner",9),2&e&&i.Q6J("size",20)}function h(e,t){1&e&&i._UZ(0,"system-icon",10)}function g(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"li",12),i.NdJ("selected",(function(){i.CHM(e);const t=i.oxw(2);return i.KtG(t.selected.emit(!0))})),i.qZA()}if(2&e){const e=t.$implicit;i.Q6J("hit",e)}}function p(e,t){if(1&e&&(i.ynx(0),i.YNc(1,g,1,1,"li",11),i.BQk()),2&e){const e=i.oxw();i.xp6(1),i.Q6J("ngForOf",e.searchResults)}}let f=(()=>{class GlobalHeaderSearchResultsItems{constructor(e,t,s){this.router=e,this.language=t,this.fts=s,this.searchTerm="",this.searchModule="",this.searchResults=[],this.selected=new i.vpe}get searchModuleName(){return this.language.getLabel("LBL_INSPICECRM")}goSearch(){this.searchTerm.length>0&&(this.selected.emit(!0),this.router.navigate(["/search/"+encodeURIComponent(btoa(this.searchTerm))]))}}return GlobalHeaderSearchResultsItems.ɵfac=function(e){return new(e||GlobalHeaderSearchResultsItems)(i.Y36(n.F0),i.Y36(l.d),i.Y36(o.Q))},GlobalHeaderSearchResultsItems.ɵcmp=i.Xpm({type:GlobalHeaderSearchResultsItems,selectors:[["global-header-search-results-items"]],inputs:{searchTerm:"searchTerm",searchModule:"searchModule",searchResults:"searchResults"},outputs:{selected:"selected"},decls:10,vars:5,consts:[["role","listbox"],["role","presentation",3,"click"],["role","option",1,"slds-lookup__item-action","slds-media","slds-media--center"],["class","slds-p-right--x-small",3,"size",4,"ngIf"],["icon","search","size","small","sprite","utility",4,"ngIf"],[1,"slds-media__body"],[1,"slds-lookup__result-text"],["label","LBL_SEARCH"],[4,"ngIf"],[1,"slds-p-right--x-small",3,"size"],["icon","search","size","small","sprite","utility"],["global-header-search-results-item","",3,"hit","selected",4,"ngFor","ngForOf"],["global-header-search-results-item","",3,"hit","selected"]],template:function(e,t){1&e&&(i.TgZ(0,"ul",0)(1,"li",1),i.NdJ("click",(function(){return t.goSearch()})),i.TgZ(2,"span",2),i.YNc(3,m,1,1,"system-spinner",3),i.YNc(4,h,1,0,"system-icon",4),i.TgZ(5,"div",5)(6,"div",6),i._UZ(7,"system-label",7),i._uU(8),i.qZA()()()(),i.YNc(9,p,2,1,"ng-container",8),i.qZA()),2&e&&(i.xp6(3),i.Q6J("ngIf",t.fts.runningmodulesearch),i.xp6(1),i.Q6J("ngIf",!t.fts.runningmodulesearch),i.xp6(4),i.AsE(' "',t.searchTerm,'" ',t.searchModuleName,""),i.xp6(1),i.Q6J("ngIf",!t.fts.runningmodulesearch))},dependencies:[a.sg,a.O5,d.f,r._,c.W,u.u],encapsulation:2}),GlobalHeaderSearchResultsItems})()},7283:(e,t,s)=>{"use strict";s.d(t,{I:()=>c});var i=s(1571),n=s(5920),l=s(4154),o=s(7774),a=s(5329),d=s(3369),r=s(6951);let c=(()=>{class GlobalHeaderTools{constructor(e,t,s,i,n){this.session=e,this.metadata=t,this.router=s,this.language=i,this.broadcast=n,this.broadcast.message$.subscribe((e=>{this.handleMessage(e)}))}ngOnInit(){this.buildTools()}handleMessage(e){switch(e.messagetype){case"applauncher.setrole":case"loader.reloaded":this.buildTools()}}buildTools(){let e=this.metadata.getComponentConfig("GlobalHeaderTools");this.componentset=e.componentset}}return GlobalHeaderTools.ɵfac=function(e){return new(e||GlobalHeaderTools)(i.Y36(n.n),i.Y36(l.Pu),i.Y36(o.F0),i.Y36(a.d),i.Y36(d.f))},GlobalHeaderTools.ɵcmp=i.Xpm({type:GlobalHeaderTools,selectors:[["global-header-tools"]],decls:1,vars:1,consts:[[1,"slds-grid","slds-grid--vertical-align-center",3,"componentset"]],template:function(e,t){1&e&&i._UZ(0,"system-componentset",0),2&e&&i.Q6J("componentset",t.componentset)},dependencies:[r.E],encapsulation:2}),GlobalHeaderTools})()},6558:(e,t,s)=>{"use strict";s.d(t,{e:()=>p});var i=s(1571),n=s(4154),l=s(6559),o=s(6895),a=s(141),d=s(7283),r=s(2954),c=s(2401),u=s(3131);function m(e,t){1&e&&(i.TgZ(0,"div",6)(1,"div",7),i._UZ(2,"global-navigation-compact"),i.qZA()())}function h(e,t){1&e&&(i.TgZ(0,"div",8)(1,"div",9),i._UZ(2,"global-header-search"),i.qZA()())}function g(e,t){1&e&&(i.TgZ(0,"div",10)(1,"div",11),i._UZ(2,"global-header-tools")(3,"global-user"),i.qZA()())}let p=(()=>{class GlobalHeaderTop{constructor(e,t){this.metadata=e,this.layout=t}get showSearch(){return this.metadata.getActiveRole().showsearch&&"0"!=this.metadata.getActiveRole().showsearch}get isSmall(){return"small"==this.layout.screenwidth}}return GlobalHeaderTop.ɵfac=function(e){return new(e||GlobalHeaderTop)(i.Y36(n.Pu),i.Y36(l.b))},GlobalHeaderTop.ɵcmp=i.Xpm({type:GlobalHeaderTop,selectors:[["global-header-top"]],decls:7,vars:3,consts:[[1,"slds-global-header","slds-grid","slds-grid--align-spread","slds-p-left--medium"],[1,"slds-show--large","slds-large-size--1-of-6"],[1,"slds-global-header__item","slds-p-left--none"],["class","slds-x-small-size--1-of-12",4,"ngIf"],["class","slds-x-small-size--11-of-12 slds-medium-size--4-of-6 slds-large-size--3-of-6",4,"ngIf"],["class","slds-medium-size--2-of-6 slds-large-size--1-of-6",4,"ngIf"],[1,"slds-x-small-size--1-of-12"],[1,"slds-global-header__item","slds-p-horizontal--none"],[1,"slds-x-small-size--11-of-12","slds-medium-size--4-of-6","slds-large-size--3-of-6"],[1,"slds-global-header__item"],[1,"slds-medium-size--2-of-6","slds-large-size--1-of-6"],[1,"slds-global-header__item","slds-grid","slds-grid--align-end","slds-grid--vertical-align-center"]],template:function(e,t){1&e&&(i.TgZ(0,"div",0)(1,"div",1)(2,"div",2),i._UZ(3,"global-header-image"),i.qZA()(),i.YNc(4,m,3,0,"div",3),i.YNc(5,h,3,0,"div",4),i.YNc(6,g,4,0,"div",5),i.qZA()),2&e&&(i.xp6(4),i.Q6J("ngIf",t.isSmall),i.xp6(1),i.Q6J("ngIf",t.showSearch),i.xp6(1),i.Q6J("ngIf",!t.isSmall))},dependencies:[o.O5,a.z,d.I,r.n,c.x,u.s],encapsulation:2}),GlobalHeaderTop})()},2552:(e,t,s)=>{"use strict";s.d(t,{f:()=>d});var i=s(1571),n=s(4154),l=s(6559),o=s(2995),a=s(3463);let d=(()=>{class GlobalHeaderTrialBar{constructor(e,t){this.metadata=e,this.layout=t}}return GlobalHeaderTrialBar.ɵfac=function(e){return new(e||GlobalHeaderTrialBar)(i.Y36(n.Pu),i.Y36(l.b))},GlobalHeaderTrialBar.ɵcmp=i.Xpm({type:GlobalHeaderTrialBar,selectors:[["global-header-trial-bar"]],decls:6,vars:0,consts:[[1,"slds-trial-header","slds-theme--info","slds-grid","slds-grid--vertical-align-center"],[1,"slds-grid"],[1,"slds-button","slds-m-right_small"],["label","LBL_WELCOME_TO_SPICECRM"],[1,"slds-col_bump-left"],["component","SystemTenantHeaderBarValidity"]],template:function(e,t){1&e&&(i.TgZ(0,"div",0)(1,"div",1)(2,"button",2),i._UZ(3,"system-label",3),i.qZA()(),i.TgZ(4,"div",4),i._UZ(5,"system-dynamic-component",5),i.qZA()())},dependencies:[o.T,a._],encapsulation:2}),GlobalHeaderTrialBar})()},5289:(e,t,s)=>{"use strict";s.d(t,{s:()=>Q});var i=s(1571),n=s(4461),l=s(529),o=s(6625),a=s(5920),d=s(3278),r=s(5329),c=s(3369),u=s(1481),m=s(6895),h=s(433),g=s(4021),p=s(2656),f=s(8710),b=s(8859),y=s(1977),v=s(595),x=s(3981),Z=s(8764),w=s(314),T=s(4142),C=s(4481);function A(e,t){1&e&&i._UZ(0,"global-login-loading",2)}function k(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"form",17),i.NdJ("submit",(function(){i.CHM(e);const t=i.oxw(3);return i.KtG(t.login())})),i.TgZ(1,"div",18)(2,"div",19),i._UZ(3,"system-utility-icon",20),i.TgZ(4,"input",21),i.NdJ("ngModelChange",(function(t){i.CHM(e);const s=i.oxw(3);return i.KtG(s.username=t)})),i.qZA()()(),i.TgZ(5,"div",18)(6,"div",19),i._UZ(7,"system-utility-icon",22),i.TgZ(8,"input",23),i.NdJ("ngModelChange",(function(t){i.CHM(e);const s=i.oxw(3);return i.KtG(s.password=t)})),i.qZA()()(),i.TgZ(9,"button",24),i._uU(10,"Login"),i.qZA(),i.TgZ(11,"div",25)(12,"global-login-oauth2",26),i.NdJ("token",(function(t){i.CHM(e);const s=i.oxw(3);return i.KtG(s.login(t))})),i.qZA()()()}if(2&e){const e=i.oxw(3);i.xp6(4),i.Q6J("disabled",e.loggingIn)("ngModel",e.username),i.xp6(4),i.Q6J("disabled",e.loggingIn)("ngModel",e.password),i.xp6(1),i.Q6J("disabled",e.loggingIn)}}function L(e,t){1&e&&i._UZ(0,"system-button-icon",31),2&e&&i.Q6J("icon","chevrondown")("size","xx-small")}function M(e,t){1&e&&i._UZ(0,"system-button-icon",31),2&e&&i.Q6J("icon","chevronup")("size","xx-small")}function S(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"div",27)(1,"div",28),i._uU(2,"Forgot password"),i.qZA(),i.TgZ(3,"button",29),i.NdJ("click",(function(){i.CHM(e);const t=i.oxw(3);return i.KtG(t.showForgotPassword())})),i.YNc(4,L,1,2,"system-button-icon",30),i.YNc(5,M,1,2,"system-button-icon",30),i.qZA()()}if(2&e){const e=i.oxw(3);i.xp6(3),i.Q6J("disabled",e.loggingIn),i.xp6(1),i.Q6J("ngIf",!e.showForgotPass),i.xp6(1),i.Q6J("ngIf",e.showForgotPass)}}function I(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"global-login-forgot-password",32),i.NdJ("close",(function(t){i.CHM(e);const s=i.oxw(3);return i.KtG(s.showForgotPass=!t)})),i.qZA()}}function O(e,t){if(1&e&&(i.TgZ(0,"div",12)(1,"div",13),i.YNc(2,k,13,5,"form",14),i.YNc(3,S,6,3,"div",15),i.YNc(4,I,1,0,"global-login-forgot-password",16),i.qZA()()),2&e){const e=i.oxw(2);i.Q6J("system-overlay-loading-spinner",e.loggingIn),i.xp6(1),i.Q6J("system-overlay-loading-spinner",e.configuration.reloading),i.xp6(1),i.Q6J("ngIf",!e.showForgotPass),i.xp6(1),i.Q6J("ngIf",e.configuration.data.allowForgotPass),i.xp6(1),i.Q6J("ngIf",e.showForgotPass)}}function J(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"global-login-change-password",33),i.NdJ("closeDialog",(function(t){i.CHM(e);const s=i.oxw(2);return i.KtG(s.handleRenewDialogClose(t))})),i.qZA()}if(2&e){const e=i.oxw(2);i.Q6J("case",e.generateTOTP?"totp":"pwd")("username",e.username)("password",e.password)("labels",e.labels)}}function N(e,t){1&e&&(i.ynx(0),i._UZ(1,"system-loader-progress"),i.BQk())}function F(e,t){if(1&e&&i._UZ(0,"iframe",36),2&e){const e=i.oxw(3);i.Q6J("src",e.externalSidebarUrl,i.uOi)}}function q(e,t){1&e&&(i.ynx(0),i._UZ(1,"global-newsfeed"),i.BQk())}function E(e,t){if(1&e&&(i.TgZ(0,"div",34),i.YNc(1,F,1,1,"iframe",35),i.YNc(2,q,2,0,"ng-container",9),i.qZA()),2&e){const e=i.oxw(2);i.ekj("slds-scrollable--y",!e.showExternalSidebar),i.xp6(1),i.Q6J("ngIf",e.showExternalSidebar),i.xp6(1),i.Q6J("ngIf",e.showNewsfeed)}}function Y(e,t){if(1&e&&(i.TgZ(0,"div",3)(1,"div",4)(2,"div",5)(3,"div",6),i._UZ(4,"global-login-image"),i.qZA(),i.YNc(5,O,5,5,"div",7),i.YNc(6,J,1,4,"global-login-change-password",8),i.YNc(7,N,2,0,"ng-container",9),i.qZA(),i.TgZ(8,"div",10),i._UZ(9,"global-copyright"),i.qZA()(),i.YNc(10,E,3,4,"div",11),i.qZA()),2&e){const e=i.oxw();i.xp6(5),i.Q6J("ngIf",!e.loginService.session.authData.sessionId&&e.promptUser),i.xp6(1),i.Q6J("ngIf",e.renewPassword||e.generateTOTP),i.xp6(1),i.Q6J("ngIf",e.loginService.session.authData.sessionId),i.xp6(3),i.Q6J("ngIf",e.promptUser&&e.showSidebar)}}let Q=(()=>{class GlobalLogin{constructor(e,t,s,i,n,l,o,a,d){this.loginService=e,this.http=t,this.configuration=s,this.session=i,this.toast=n,this.language=l,this.broadcast=o,this.sanitizer=a,this.changeDetectorRef=d,this.promptUser=!1,this.username="",this.password="",this._selectedlanguage="",this.selectedsite="",this.lastSelectedLanguage=null,this.showForgotPass=!1,this.externalSidebarUrl=null,this.renewPassword=!1,this.generateTOTP=!1,this.loggingIn=!1,sessionStorage["OAuth-Token"]?(this.loginService.oauthToken=sessionStorage["OAuth-Token"],this.loginService.oauthIssuer="SpiceCRM",this.loginService.login(!1).subscribe({next:e=>{this.broadcast.broadcastMessage("login")},error:e=>{this.loginService.oauthToken=null,this.loginService.oauthIssuer=null,this.promptUser=!0}})):this.promptUser=!0,this.lastSelectedLanguage=localStorage.getItem("spiceuilanguage")}handleResize(){this.changeDetectorRef.detectChanges()}login(e){(e||this.username&&this.password)&&(this.messageId&&this.toast.clearToast(this.messageId),this.toast.clearAll(),this.loggingIn=!0,e?(this.loginService.authData.userName=null,this.loginService.authData.password=null,this.loginService.oauthToken=e.accessToken,this.loginService.oauthIssuer=e.issuer):(this.loginService.authData.userName=this.username,this.loginService.authData.password=this.password,this.loginService.oauthToken=null,this.loginService.oauthIssuer=null),this.loginService.login().subscribe({next:e=>{this.toast.clearAll(),this.loggingIn=!1},error:e=>{switch(e.errorCode){case 1:this.messageId=this.toast.sendToast("error logging on with username and password","error");break;case 2:this.labels=e.details?.labels,this.renewPassword=!0,this.generateTOTP=!1;break;case 12:this.labels=e.details?.labels,this.renewPassword=!1,this.generateTOTP=!0;break;default:this.messageId=this.toast.sendToast("error logging on","error",e.message)}this.loggingIn=!1}}))}getBackendUrls(){return this.configuration.data.backendUrls?this.configuration.data.backendUrls:[]}showForgotPassword(){this.showForgotPass?this.showForgotPass=!1:this.showForgotPass=!0}get showSidebar(){return!1!==this.configuration.data.displayloginsidebar&&window.innerWidth>=1024}get showExternalSidebar(){try{let e=!_.isEmpty(this.configuration.data.loginSidebarUrl);return e&&null===this.externalSidebarUrl&&(this.externalSidebarUrl=this.sanitizer.bypassSecurityTrustResourceUrl(this.configuration.data.loginSidebarUrl)),e}catch(e){return!1}}get showNewsfeed(){try{return!!this.configuration.initialized&&_.isEmpty(this.configuration.data.loginSidebarUrl)}catch(e){return!1}}get showProgressBar(){return this.configuration.data.loginProgressBar}handleRenewDialogClose(e){this.renewPassword=this.generateTOTP=!1,e&&(this.password=e,this.login())}}return GlobalLogin.ɵfac=function(e){return new(e||GlobalLogin)(i.Y36(n.j),i.Y36(l.eN),i.Y36(o.C),i.Y36(a.n),i.Y36(d.A),i.Y36(r.d),i.Y36(c.f),i.Y36(u.H7),i.Y36(i.sBO))},GlobalLogin.ɵcmp=i.Xpm({type:GlobalLogin,selectors:[["global-login"]],hostBindings:function(e,t){1&e&&i.NdJ("resize",(function(){return t.handleResize()}),!1,i.Jf7)},decls:2,vars:2,consts:[["class","slds-size--1-of-1",4,"ngIf"],["class","slds-grid slds-wrap slds-is-absolute slds-size--1-of-1 slds-theme--default","style","height:100vh; top: 0px;",4,"ngIf"],[1,"slds-size--1-of-1"],[1,"slds-grid","slds-wrap","slds-is-absolute","slds-size--1-of-1","slds-theme--default",2,"height","100vh","top","0px"],[1,"slds-align--absolute-center","slds-size--1-of-1","slds-large-size--1-of-2"],[1,"slds-size--1-of-1","slds-medium-size--2-of-3","slds-p-around--medium",2,"max-width","500px"],[1,"slds-align--absolute-center","slds-p-vertical--medium"],["class","slds-box--border slds-theme--shade",3,"system-overlay-loading-spinner",4,"ngIf"],["class","slds-is-absolute",3,"case","username","password","labels","closeDialog",4,"ngIf"],[4,"ngIf"],[1,"slds-is-absolute",2,"bottom","10px"],["class","slds-size--1-of-1 slds-large-size--1-of-2 slds-height_full",3,"slds-scrollable--y",4,"ngIf"],[1,"slds-box--border","slds-theme--shade",3,"system-overlay-loading-spinner"],[1,"slds-p-around--medium",3,"system-overlay-loading-spinner"],[3,"submit",4,"ngIf"],["class","slds-p-vertical--x-small slds-grid slds-grid--align-spread slds-grid_vertical-align-center",4,"ngIf"],["class","slds-col",3,"close",4,"ngIf"],[3,"submit"],[1,"slds-form-element","slds-m-vertical--small"],[1,"slds-form-element__control","slds-input-has-icon","slds-input-has-icon_left"],["icon","user","addclasses","slds-input__icon slds-icon-text-default"],["type","text","name","username","autocomplete","","tabindex","1","placeholder","Username",1,"slds-input","slds-p-vertical--xx-small",3,"disabled","ngModel","ngModelChange"],["icon","lock","addclasses","slds-icon slds-input__icon slds-input__icon_left slds-icon-text-default"],["type","password","name","password","autocomplete","","tabindex","2","placeholder","Password",1,"slds-input","slds-p-vertical--xx-small",3,"disabled","ngModel","ngModelChange"],["type","submit","value","Submit","tabindex","0",1,"slds-button","slds-button--brand","slds-button_stretch",3,"disabled"],[1,"slds-p-top--small"],[1,"slds-size--1-of-1",3,"token"],[1,"slds-p-vertical--x-small","slds-grid","slds-grid--align-spread","slds-grid_vertical-align-center"],["title","Forgot password",1,"slds-truncate","slds-text-body_small"],[1,"slds-button",3,"disabled","click"],[3,"icon","size",4,"ngIf"],[3,"icon","size"],[1,"slds-col",3,"close"],[1,"slds-is-absolute",3,"case","username","password","labels","closeDialog"],[1,"slds-size--1-of-1","slds-large-size--1-of-2","slds-height_full"],["style","border:none;width:100%;height:100%",3,"src",4,"ngIf"],[2,"border","none","width","100%","height","100%",3,"src"]],template:function(e,t){1&e&&(i.YNc(0,A,1,0,"global-login-loading",0),i.YNc(1,Y,11,4,"div",1)),2&e&&(i.Q6J("ngIf",!t.configuration.initialized),i.xp6(1),i.Q6J("ngIf",t.configuration.initialized))},dependencies:[m.O5,h._Y,h.Fj,h.JJ,h.JL,h.On,h.F,g._,p.J,f.e,b.r,y.M,v.T,x.N,Z.X,w.r,T.p,C.Q],encapsulation:2}),GlobalLogin})()},8764:(e,t,s)=>{"use strict";s.d(t,{X:()=>I});var i=s(1571),n=s(529),l=s(5698),o=s(727),a=s(4461),d=s(6625),r=s(3278),c=s(5920),u=s(5329),m=s(6895),h=s(433),g=s(4021),p=s(2656),f=s(7919);function b(e,t){if(1&e&&(i.TgZ(0,"h2",16),i._uU(1),i.qZA()),2&e){const e=i.oxw();i.xp6(1),i.Oqu(e.getLabel("LBL_CHANGE_PASSWORD"))}}function _(e,t){if(1&e&&(i.TgZ(0,"h2",16),i._uU(1),i.qZA()),2&e){const e=i.oxw();i.xp6(1),i.Oqu(e.getLabel("LBL_TOTP_AUTHENTICATION"))}}function y(e,t){if(1&e&&(i.TgZ(0,"div",23),i._uU(1),i._UZ(2,"br"),i._uU(3),i.qZA()),2&e){const e=i.oxw(2);i.xp6(1),i.hij(" ",e.getLabel("LBL_PWD_GUIDELINE"),":"),i.xp6(2),i.hij("",e.pwdGuideline," ")}}function v(e,t){if(1&e&&(i.TgZ(0,"div",24),i._uU(1),i.qZA()),2&e){const e=i.oxw(2);i.xp6(1),i.Oqu(e.pwderror)}}function x(e,t){if(1&e&&(i.TgZ(0,"div",24),i._uU(1),i.qZA()),2&e){const e=i.oxw(2);i.xp6(1),i.Oqu(e.oldPwError)}}function Z(e,t){if(1&e&&(i.TgZ(0,"div",24),i._uU(1),i.qZA()),2&e){const e=i.oxw(2);i.xp6(1),i.Oqu(e.pwdreperror)}}const w=function(e){return{"slds-has-error":e}};function T(e,t){if(1&e){const e=i.EpF();i.ynx(0),i.YNc(1,y,4,2,"div",17),i.TgZ(2,"div",18)(3,"label",19),i._uU(4),i.qZA(),i.TgZ(5,"system-input-password",20),i.NdJ("ngModelChange",(function(t){i.CHM(e);const s=i.oxw();return i.KtG(s.newPassword=t)})),i.qZA(),i.YNc(6,v,2,1,"div",21),i.YNc(7,x,2,1,"div",21),i.qZA(),i.TgZ(8,"div",22)(9,"label",19),i._uU(10),i.qZA(),i.TgZ(11,"system-input-password",20),i.NdJ("ngModelChange",(function(t){i.CHM(e);const s=i.oxw();return i.KtG(s.repeatPassword=t)})),i.qZA(),i.YNc(12,Z,2,1,"div",21),i.qZA(),i.BQk()}if(2&e){const e=i.oxw();i.xp6(1),i.Q6J("ngIf",e.pwdGuideline),i.xp6(1),i.Q6J("ngClass",i.VKq(10,w,e.pwderror||e.oldPwError)),i.xp6(2),i.Oqu(e.getLabel("LBL_NEW_PWD")),i.xp6(1),i.Q6J("ngModel",e.newPassword),i.xp6(1),i.Q6J("ngIf",""!=e.newPassword&&e.pwderror),i.xp6(1),i.Q6J("ngIf",""!=e.newPassword&&e.oldPwError),i.xp6(1),i.Q6J("ngClass",i.VKq(12,w,e.pwdreperror)),i.xp6(2),i.Oqu(e.getLabel("LBL_NEW_PWD_REPEATED")),i.xp6(1),i.Q6J("ngModel",e.repeatPassword),i.xp6(1),i.Q6J("ngIf",""!=e.repeatPassword&&e.pwdreperror)}}function C(e,t){if(1&e&&i._UZ(0,"img",31),2&e){const e=i.oxw(2);i.Q6J("src",e.totpQRCode,i.LSH)}}function A(e,t){if(1&e&&(i.TgZ(0,"div",25)(1,"div",26),i._uU(2),i.qZA(),i.TgZ(3,"div",27)(4,"div",28),i._uU(5),i.qZA(),i.YNc(6,C,1,1,"img",29),i.TgZ(7,"div",30),i._uU(8),i.qZA()()()),2&e){const e=i.oxw();i.xp6(2),i.Oqu(e.getLabel("MSG_AUTHENTICATOR_INSTRUCTIONS","long")),i.xp6(3),i.Oqu(e.totpName),i.xp6(1),i.Q6J("ngIf",e.totpQRCode),i.xp6(2),i.Oqu(e.secret)}}function k(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"div",25),i._uU(1),i.TgZ(2,"input",32),i.NdJ("ngModelChange",(function(t){i.CHM(e);const s=i.oxw();return i.KtG(s.totpCode=t)})),i.qZA()()}if(2&e){const e=i.oxw();i.xp6(1),i.hij(" ",e.getLabel("LBL_CODE")," "),i.xp6(1),i.Q6J("ngModel",e.totpCode)}}function L(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"button",34),i.NdJ("click",(function(){i.CHM(e);const t=i.oxw(2);return i.KtG(t.setPassword())})),i._uU(1),i.qZA()}if(2&e){const e=i.oxw(2);i.Q6J("disabled",!e.canSavePwd),i.xp6(1),i.Oqu(e.getLabel("LBL_SET_PASSWORD"))}}function M(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"button",34),i.NdJ("click",(function(){i.CHM(e);const t=i.oxw(2);return i.KtG(t.saveTOTP())})),i._uU(1),i.qZA()}if(2&e){const e=i.oxw(2);i.Q6J("disabled",!e.canSaveTOTP),i.xp6(1),i.Oqu(e.getLabel("LBL_SAVE"))}}function S(e,t){if(1&e&&(i.ynx(0),i.YNc(1,L,2,2,"button",33),i.YNc(2,M,2,2,"button",33),i.BQk()),2&e){const e=i.oxw();i.xp6(1),i.Q6J("ngIf","pwd"===e.case),i.xp6(1),i.Q6J("ngIf","totp"===e.case)}}let I=(()=>{class GlobalLoginChangePassword{constructor(e,t,s,n,l,a){this.loginService=e,this.http=t,this.configuration=s,this.toast=n,this.session=l,this.language=a,this.closeDialog=new i.vpe,this.pwdCheck=new RegExp("//"),this.isPosting=!1,this.totpCode="",this.isLoading=!1,this.subscriptions=new o.w0}ngOnInit(){if("totp"===this.case){this.isLoading=!0;let e=new n.WM;e=e.set("Accept","application/json"),this.subscriptions.add(this.http.post(this.configuration.getBackendUrl()+"/authentication/totp/generate",{username:this.username,password:this.password},{headers:e}).pipe((0,l.q)(1)).subscribe({next:e=>{e.secret?(this.totpQRCode="data:image/png;base64,"+e.qrcode,this.secret=e.secret,this.totpName=e.name):(this.toast.sendToast("Error generating Code","error"),this.close()),this.isLoading=!1},error:()=>{this.toast.sendToast("Error generating Code","error"),this.close(),this.isLoading=!1}}))}else this.buildGuidelineText()}get oldPwError(){return this.password==this.newPassword&&this.getLabel("MSG_OLD_PWD_NOT_AS_NEW")}get pwderror(){return!(!this.newPassword||this.pwdCheck.test(this.newPassword))&&this.getLabel("MSG_PWD_NOT_LEGAL")}get pwdreperror(){return this.newPassword!=this.repeatPassword&&this.getLabel("MSG_PWDS_DONT_MATCH")}close(e){this.closeDialog.emit(e)}buildGuidelineText(){let e=this.configuration.getCapabilityConfig("userpassword");this.pwdCheck=new RegExp(e.regex);let t=[];e.onelower&&t.push(this.getLabel("LBL_ONE_LOWERCASE")),e.oneupper&&t.push(this.getLabel("LBL_ONE_UPPERCASE")),e.onenumber&&t.push(this.getLabel("LBL_ONE_DIGIT")),e.onespecial&&t.push(this.getLabel("LBL_ONE_SPECIALCHAR")),e.minpwdlength&&t.push(this.getLabel("LBL_MIN_LENGTH")+" "+e.minpwdlength),this.pwdGuideline=t.join(", ")}get canSavePwd(){return this.newPassword&&0==this.oldPwError&&0==this.pwderror&&0==this.pwdreperror&&!this.isPosting}get canSaveTOTP(){return!this.isPosting&&6===this.totpCode.length}setPassword(){this.canSavePwd&&(this.isPosting=!0,this.subscriptions.add(this.http.post(this.configuration.getBackendUrl()+"/authentication/changepassword",{username:this.username,password:this.password,newPassword:this.newPassword}).pipe((0,l.q)(1)).subscribe({next:e=>{this.toast.sendToast(this.getLabel("MSG_PWD_CHANGED_SUCCESSFULLY"),"success","",5),this.close(this.newPassword)},error:e=>{this.isPosting=!1}})))}saveTOTP(){let e=new n.WM;this.toastErrorID&&(this.toast.clearToast(this.toastErrorID),this.toastErrorID=null),this.isPosting=!0,this.subscriptions.add(this.http.put(this.configuration.getBackendUrl()+`/authentication/totp/validate/${this.totpCode}`,{username:this.username,password:this.password},{headers:e}).pipe((0,l.q)(1)).subscribe({next:e=>{this.isPosting=!1,e.validated?this.close():this.toastErrorID=this.toast.sendToast("Error validating your code","error","The code you entered is not valid, please try again. If you entered the code correctly, make sure your computer's time is set correctly.",!1,"asdfasdf"),this.totpCode=""},error:()=>{this.isPosting=!1,this.toastErrorID=this.toast.sendToast("Error validating your code","error","There as an internal error validating your request.",!1),this.totpCode=""}}))}getLabel(e,t="default"){return this.labels&&this.labels[e]&&this.labels[e][t]?this.labels[e][t]:e}ngOnDestroy(){this.subscriptions.unsubscribe()}}return GlobalLoginChangePassword.ɵfac=function(e){return new(e||GlobalLoginChangePassword)(i.Y36(a.j),i.Y36(n.eN),i.Y36(d.C),i.Y36(r.A),i.Y36(c.n),i.Y36(u.d))},GlobalLoginChangePassword.ɵcmp=i.Xpm({type:GlobalLoginChangePassword,selectors:[["global-login-change-password"]],inputs:{case:"case",password:"password",username:"username",labels:"labels"},outputs:{closeDialog:"closeDialog"},decls:21,vars:9,consts:[[2,"height","640px"],["role","dialog","tabindex","-1",1,"slds-modal","slds-fade-in-open"],[1,"slds-modal__container"],[1,"slds-modal__header"],["title","Close",1,"slds-button","slds-button_icon","slds-modal__close","slds-button_icon-inverse",3,"click"],[3,"icon"],[1,"slds-assistive-text"],["class","slds-text-heading_medium slds-hyphenate",4,"ngIf"],[1,"slds-modal__content","slds-p-around_medium",2,"min-height","150px",3,"system-overlay-loading-spinner"],[4,"ngIf"],["class","slds-grid slds-grid--vertical-align-center",4,"ngIf"],[1,"slds-modal__footer"],[1,"slds-grid","slds-grid--vertical-align-center","slds-grid--align-spread"],[1,"slds-grid","slds-col--bump-left"],[1,"slds-button","slds-button--neutral",3,"click"],[1,"slds-backdrop","slds-backdrop_open"],[1,"slds-text-heading_medium","slds-hyphenate"],["class","slds-m-top--xx-small",4,"ngIf"],[1,"slds-form-element","slds-m-vertical--small",3,"ngClass"],[1,"slds-form-element__label"],[3,"ngModel","ngModelChange"],["class","slds-form-element__help slds-text-color--error",4,"ngIf"],[1,"slds-form-element","slds-m-bottom--x-small",3,"ngClass"],[1,"slds-m-top--xx-small"],[1,"slds-form-element__help","slds-text-color--error"],[1,"slds-grid","slds-grid--vertical-align-center"],[1,"slds-size--1-of-2"],[1,"slds-size--1-of-2","slds-align--absolute-center","slds-grid","slds-grid--vertical"],[1,"slds-p-bottom--small"],["style","width: 200px; height: 200px;",3,"src",4,"ngIf"],[1,"slds-p-top--small"],[2,"width","200px","height","200px",3,"src"],["maxlength","6",1,"slds-m-left--x-small","slds-input",2,"width","6rem",3,"ngModel","ngModelChange"],["class","slds-button slds-button--brand","tabindex","3",3,"disabled","click",4,"ngIf"],["tabindex","3",1,"slds-button","slds-button--brand",3,"disabled","click"]],template:function(e,t){1&e&&(i.TgZ(0,"div",0)(1,"section",1)(2,"div",2)(3,"header",3)(4,"button",4),i.NdJ("click",(function(){return t.close()})),i._UZ(5,"system-button-icon",5),i.TgZ(6,"span",6),i._uU(7,"Close"),i.qZA()(),i.YNc(8,b,2,1,"h2",7),i.YNc(9,_,2,1,"h2",7),i.qZA(),i.TgZ(10,"div",8),i.YNc(11,T,13,14,"ng-container",9),i.YNc(12,A,9,4,"div",10),i.qZA(),i.TgZ(13,"footer",11)(14,"div",12),i.YNc(15,k,3,2,"div",10),i.TgZ(16,"div",13)(17,"button",14),i.NdJ("click",(function(){return t.close()})),i._uU(18),i.qZA(),i.YNc(19,S,3,2,"ng-container",9),i.qZA()()()()(),i._UZ(20,"div",15),i.qZA()),2&e&&(i.xp6(5),i.Q6J("icon","close"),i.xp6(3),i.Q6J("ngIf","pwd"===t.case),i.xp6(1),i.Q6J("ngIf","totp"===t.case),i.xp6(1),i.Q6J("system-overlay-loading-spinner",t.isLoading),i.xp6(1),i.Q6J("ngIf","pwd"===t.case),i.xp6(1),i.Q6J("ngIf","totp"===t.case&&!t.isLoading),i.xp6(3),i.Q6J("ngIf","totp"===t.case&&!t.isLoading),i.xp6(3),i.Oqu(t.getLabel("LBL_CANCEL")),i.xp6(1),i.Q6J("ngIf",!t.isLoading))},dependencies:[m.mk,m.O5,h.Fj,h.JJ,h.nD,h.On,g._,p.J,f.Z],encapsulation:2}),GlobalLoginChangePassword})()},314:(e,t,s)=>{"use strict";s.d(t,{r:()=>b});var i=s(1571),n=s(529),l=s(6625),o=s(3278),a=s(6895),d=s(433),r=s(4021),c=s(8859);function u(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"div",1)(1,"div",2)(2,"div",3),i._UZ(3,"system-utility-icon",4),i.TgZ(4,"input",5),i.NdJ("ngModelChange",(function(t){i.CHM(e);const s=i.oxw();return i.KtG(s.email=t)})),i.qZA()()(),i.TgZ(5,"button",6),i.NdJ("click",(function(){i.CHM(e);const t=i.oxw();return i.KtG(t.sendEmail())})),i._uU(6,"Send"),i.qZA()()}if(2&e){const e=i.oxw();i.Q6J("system-overlay-loading-spinner",e.sending),i.xp6(3),i.Q6J("icon","email")("addclasses","slds-input__icon slds-icon-text-default"),i.xp6(1),i.Q6J("disabled",e.sending)("ngModel",e.email),i.xp6(1),i.Q6J("disabled",!e.emailValid||e.sending)}}function m(e,t){if(1&e&&(i.TgZ(0,"div",14),i._uU(1," Password Guideline:"),i._UZ(2,"br"),i._uU(3),i.qZA()),2&e){const e=i.oxw(2);i.xp6(3),i.hij(" ",e.pwdGuideline," ")}}function h(e,t){if(1&e&&(i.TgZ(0,"div",15),i._uU(1),i.qZA()),2&e){const e=i.oxw(2);i.xp6(1),i.Oqu(e.pwderror)}}function g(e,t){if(1&e&&(i.TgZ(0,"div",15),i._uU(1),i.qZA()),2&e){const e=i.oxw(2);i.xp6(1),i.Oqu(e.pwdreperror)}}const p=function(e){return{"slds-has-error":e}};function f(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"div",1)(1,"form",7)(2,"div",2)(3,"div",3),i._UZ(4,"system-utility-icon",4),i.TgZ(5,"input",8),i.NdJ("ngModelChange",(function(t){i.CHM(e);const s=i.oxw();return i.KtG(s.token=t)})),i.qZA()()(),i.YNc(6,m,4,1,"div",9),i.qZA(),i.TgZ(7,"form",7)(8,"div",10)(9,"div",3),i._UZ(10,"system-utility-icon",4),i.TgZ(11,"input",11),i.NdJ("ngModelChange",(function(t){i.CHM(e);const s=i.oxw();return i.KtG(s.password=t)})),i.qZA()(),i.YNc(12,h,2,1,"div",12),i.qZA(),i.TgZ(13,"div",10)(14,"div",3),i._UZ(15,"system-utility-icon",4),i.TgZ(16,"input",13),i.NdJ("ngModelChange",(function(t){i.CHM(e);const s=i.oxw();return i.KtG(s.repeatPassword=t)})),i.qZA()(),i.YNc(17,g,2,1,"div",12),i.qZA(),i.TgZ(18,"button",6),i.NdJ("click",(function(){i.CHM(e);const t=i.oxw();return i.KtG(t.resetPassword())})),i._uU(19,"Reset Password"),i.qZA()()()}if(2&e){const e=i.oxw();i.Q6J("system-overlay-loading-spinner",e.sending),i.xp6(4),i.Q6J("icon","shield")("addclasses","slds-input__icon slds-icon-text-default"),i.xp6(1),i.Q6J("disabled",e.sending)("ngModel",e.token),i.xp6(1),i.Q6J("ngIf",e.pwdGuideline),i.xp6(2),i.Q6J("ngClass",i.VKq(19,p,e.pwderror)),i.xp6(2),i.Q6J("icon","lock")("addclasses","slds-input__icon slds-icon-text-default"),i.xp6(1),i.Q6J("disabled",e.sending)("ngModel",e.password),i.xp6(1),i.Q6J("ngIf",e.password&&e.pwderror),i.xp6(1),i.Q6J("ngClass",i.VKq(21,p,e.pwdreperror)),i.xp6(2),i.Q6J("icon","lock")("addclasses","slds-input__icon slds-icon-text-default"),i.xp6(1),i.Q6J("disabled",e.sending)("ngModel",e.repeatPassword),i.xp6(1),i.Q6J("ngIf",e.repeatPassword&&e.pwdreperror),i.xp6(1),i.Q6J("disabled",!e.canSendToken||e.sending)}}let b=(()=>{class GlobalLoginForgotPassword{constructor(e,t,s){this.http=e,this.configuration=t,this.toast=s,this.email="",this.token="",this.password=void 0,this.repeatPassword=void 0,this.pwdCheck=new RegExp("//"),this.tokenLength=6,this.sending=!1,this.display="email",this.close=new i.vpe,this.emailValidation=new RegExp('^(([^<>()\\[\\]\\\\.,;:\\s@"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@"]+)*)|(".+"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$'),this.getInfo()}getInfo(){let e=this.configuration.getCapabilityConfig("userpassword");this.pwdCheck=new RegExp(e.regex);let t=[];e.onelower&&t.push("one lower case"),e.oneupper&&t.push("one upper case"),e.onenumber&&t.push("one number"),e.onespecial&&t.push("one special"),e.minpwdlength&&(t.push("minimum length "+e.minpwdlength),this.tokenLength=parseInt(e.minpwdlength,10)),this.pwdGuideline=t.join(", ")}get pwderror(){return!(!this.password||this.pwdCheck.test(this.password))&&"Password does not match the Guideline."}get pwdreperror(){return this.password!=this.repeatPassword&&"Inputs for the new Password does not match."}get emailValid(){return this.email&&this.email.length>0&&this.emailValidation.test(this.email)}sendEmail(){this.emailValid&&(this.activeToast&&this.toast.clearToast(this.activeToast),this.sending=!0,this.http.get(this.configuration.getBackendUrl()+`/authentication/passwordtoken/email/${this.email}`).subscribe((e=>{this.display="token",this.toast.sendToast("Successfully sent, check your inbox to get the token code","success"),this.sending=!1}),(e=>{this.activeToast=this.toast.sendToast("there was an error sending the token","error","Please verify that the mail is correect or contact a system administrator"),this.sending=!1})))}get canSendToken(){return this.token.length==this.tokenLength&&!this.pwderror&&!this.pwdreperror}resetPassword(){this.canSendToken&&(this.activeToast&&this.toast.clearToast(this.activeToast),this.sending=!0,this.http.post(this.configuration.getBackendUrl()+`/authentication/passwordtoken/token/${this.token}`,{newPassword:this.password}).subscribe((e=>{this.close.emit(!0),this.sending=!1}),(e=>{this.activeToast=this.toast.sendToast("there was an error resetting your password","error","please contact a system administrator"),this.sending=!1})))}}return GlobalLoginForgotPassword.ɵfac=function(e){return new(e||GlobalLoginForgotPassword)(i.Y36(n.eN),i.Y36(l.C),i.Y36(o.A))},GlobalLoginForgotPassword.ɵcmp=i.Xpm({type:GlobalLoginForgotPassword,selectors:[["global-login-forgot-password"]],outputs:{close:"close"},decls:2,vars:2,consts:[[3,"system-overlay-loading-spinner",4,"ngIf"],[3,"system-overlay-loading-spinner"],[1,"slds-form-element","slds-m-vertical--small"],[1,"slds-form-element__control","slds-input-has-icon","slds-input-has-icon--left"],[3,"icon","addclasses"],["type","email","placeholder","Email address of your user account",1,"slds-input","slds-p-vertical--xx-small",3,"disabled","ngModel","ngModelChange"],[1,"slds-button","slds-button--brand","slds-button_stretch",3,"disabled","click"],["autocomplete","off"],["type","text","name","token","placeholder","Token that was sent via email",1,"slds-input","slds-p-vertical--xx-small",3,"disabled","ngModel","ngModelChange"],["class","slds-m-vertical--medium",4,"ngIf"],[1,"slds-form-element","slds-m-vertical--small",3,"ngClass"],["type","password","name","password","placeholder","enter new password",1,"slds-input","slds-p-vertical--xx-small",3,"disabled","ngModel","ngModelChange"],["class","slds-form-element__help slds-text-color--error",4,"ngIf"],["type","password","name","resetPassword","placeholder","repeat new password",1,"slds-input","slds-p-vertical--xx-small",3,"disabled","ngModel","ngModelChange"],[1,"slds-m-vertical--medium"],[1,"slds-form-element__help","slds-text-color--error"]],template:function(e,t){1&e&&(i.YNc(0,u,7,6,"div",0),i.YNc(1,f,20,23,"div",0)),2&e&&(i.Q6J("ngIf","email"==t.display),i.xp6(1),i.Q6J("ngIf","token"==t.display))},dependencies:[a.mk,a.O5,d._Y,d.Fj,d.JJ,d.JL,d.On,d.F,r._,c.r],encapsulation:2}),GlobalLoginForgotPassword})()},4142:(e,t,s)=>{"use strict";s.d(t,{p:()=>a});var i=s(727),n=s(1571),l=s(1481),o=s(6625);let a=(()=>{class GlobalLoginImage{constructor(e,t,s){this.sanitizer=e,this.configuration=t,this.cdRef=s,this.defaultImageUrl="config/loginimage",this.imageUrl=this.defaultImageUrl,this.subscriptions=new i.w0}ngAfterViewInit(){this.configuration.hasCapabilityConfig("theme")&&this.setImageUrl(),this.subscriptions.add(this.configuration.loaded$.subscribe((e=>{e&&this.setImageUrl()})))}ngOnDestroy(){this.subscriptions.unsubscribe()}setImageUrl(){this.configuration.getAsset("loginimage")?this.imageUrl=this.sanitizer.bypassSecurityTrustResourceUrl(this.configuration.getAsset("loginimage")):this.configuration.getCapabilityConfig("theme").login_image?this.imageUrl=this.sanitizer.bypassSecurityTrustResourceUrl("data:"+this.configuration.getCapabilityConfig("theme").login_image):this.imageUrl=this.defaultImageUrl,this.cdRef.detectChanges()}}return GlobalLoginImage.ɵfac=function(e){return new(e||GlobalLoginImage)(n.Y36(l.H7),n.Y36(o.C),n.Y36(n.sBO))},GlobalLoginImage.ɵcmp=n.Xpm({type:GlobalLoginImage,selectors:[["global-login-image"]],decls:1,vars:1,consts:[[2,"max-height","25vh",3,"src"]],template:function(e,t){1&e&&n._UZ(0,"img",0),2&e&&n.Q6J("src",t.imageUrl,n.LSH)},encapsulation:2}),GlobalLoginImage})()},3981:(e,t,s)=>{"use strict";s.d(t,{N:()=>l});var i=s(1571),n=s(1977);let l=(()=>{class GlobalLoginLoading{}return GlobalLoginLoading.ɵfac=function(e){return new(e||GlobalLoginLoading)},GlobalLoginLoading.ɵcmp=i.Xpm({type:GlobalLoginLoading,selectors:[["global-login-loading"]],decls:15,vars:0,consts:[[1,"slds-align--absolute-center","slds-size--1-of-1","slds-theme--default",2,"height","100vh"],[1,"slds-grid--vertical"],[1,"slds-text-align_center","slds-is-relative","slds-p-around--medium",2,"height","400px"],[1,"slds-p-around--small","slds-align--absolute-center","loader-logo-image"],["width","100%","height","auto","src","./config/loginimage"],[1,"loaderspinner"],["height","400","width","400",1,"bag"],["cx","200","cy","200","r","100","stroke-width","5","fill","none"],["height","400","width","400",1,"over"],["cx","200","cy","200","r","100","stroke-width","6","fill","none"],["id","loadstatus",1,"slds-text-align_center","slds-is-relative","slds-p-around--medium",2,"margin-top","-80px"],["id","loadermessage",1,"slds-text-align_center","slds-is-relative","slds-p-around--medium","slds-text-heading--medium","slds-text-color--error"],[1,"slds-is-absolute",2,"bottom","10px"]],template:function(e,t){1&e&&(i.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),i._UZ(4,"img",4),i.qZA(),i.TgZ(5,"div",5),i.O4$(),i.TgZ(6,"svg",6),i._UZ(7,"circle",7),i.qZA(),i.TgZ(8,"svg",8),i._UZ(9,"circle",9),i.qZA()()(),i.kcU(),i.TgZ(10,"div",10),i._uU(11,"...connecting..."),i.qZA(),i._UZ(12,"div",11),i.qZA(),i.TgZ(13,"div",12),i._UZ(14,"global-copyright"),i.qZA()())},dependencies:[n.M],encapsulation:2}),GlobalLoginLoading})()},4481:(e,t,s)=>{"use strict";s.d(t,{Q:()=>r});var i=s(1571),n=s(727),l=s(6625),o=s(3369),a=s(4461);function d(e,t){if(1&e&&i._UZ(0,"global-login-oauth2-button",1),2&e){const e=t.$implicit,s=i.oxw();i.Q6J("service",e)("authenticatedUser",s.authenticatedUser)}}let r=(()=>{class GlobalLoginOAuth2{constructor(e,t,s){this.configuration=e,this.broadcast=t,this.loginService=s,this.services=[],this.subscription=new n.w0,this.token=new i.vpe,this.subscribeToBroadcast()}set setSingleIssuer(e){e&&(this.services=[this.services.find((t=>e==t.issuer))])}ngOnDestroy(){this.subscription.unsubscribe()}loadServices(){const e=this.configuration.getCapabilityConfig("oauth2");Array.isArray(e)&&(this.services=e.map((e=>{const t={...e};return t.config=JSON.parse(t.config),t})))}subscribeToBroadcast(){this.subscription.add(this.configuration.loaded$.subscribe((e=>{e&&this.loadServices()})))}}return GlobalLoginOAuth2.ɵfac=function(e){return new(e||GlobalLoginOAuth2)(i.Y36(l.C),i.Y36(o.f),i.Y36(a.j))},GlobalLoginOAuth2.ɵcmp=i.Xpm({type:GlobalLoginOAuth2,selectors:[["global-login-oauth2"]],inputs:{authenticatedUser:"authenticatedUser",setSingleIssuer:["issuer","setSingleIssuer"]},outputs:{token:"token"},decls:1,vars:1,consts:[[3,"service","authenticatedUser",4,"ngFor","ngForOf"],[3,"service","authenticatedUser"]],template:function(e,t){1&e&&i.YNc(0,d,1,2,"global-login-oauth2-button",0),2&e&&i.Q6J("ngForOf",t.services)},encapsulation:2}),GlobalLoginOAuth2})()},4365:(e,t,s)=>{"use strict";s.d(t,{q:()=>a});var i=s(1571),n=s(4154),l=s(6119),o=s(909);let a=(()=>{class GlobalNavigation{constructor(e){this.metadata=e}}return GlobalNavigation.ɵfac=function(e){return new(e||GlobalNavigation)(i.Y36(n.Pu))},GlobalNavigation.ɵcmp=i.Xpm({type:GlobalNavigation,selectors:[["global-navigation"]],decls:3,vars:0,consts:[[1,"slds-context-bar"],["role","navigation",1,"slds-context-bar__secondary"]],template:function(e,t){1&e&&(i.TgZ(0,"div",0),i._UZ(1,"global-app-launcher")(2,"global-navigation-menu",1),i.qZA())},dependencies:[l.i,o.Q],encapsulation:2}),GlobalNavigation})()},2954:(e,t,s)=>{"use strict";s.d(t,{n:()=>M});var i=s(1571),n=s(5710),l=s(727),o=s(5698),a=s(4154),d=s(5329),r=s(4461),c=s(2032),u=s(4376),m=s(382),h=s(5920),g=s(4044),p=s(3369),f=s(7774),b=s(6895),_=s(433),y=s(2656),v=s(4561),x=s(3333),Z=s(8859);const w=["containermiddle"],T=["containerbottom"],C=["menucontainer"];function A(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"div",33)(1,"div",34),i._UZ(2,"system-icon",35),i.TgZ(3,"a",36)(4,"span",37),i._UZ(5,"system-label-modulename",38),i.qZA()()(),i.TgZ(6,"ul",39),i.NdJ("click",(function(){i.CHM(e);const t=i.oxw();return i.KtG(t.closeMenu())})),i.GkF(7,null,40),i.qZA()()}if(2&e){const e=i.oxw();i.xp6(2),i.Q6J("module",e.activeItem),i.xp6(3),i.Q6J("module",e.activeItem)}}function k(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"div",41),i.NdJ("click",(function(){const t=i.CHM(e).$implicit,s=i.oxw();return i.KtG(s.navigateTo(t))})),i._UZ(1,"system-icon",35),i.TgZ(2,"a",36)(3,"span",42),i._UZ(4,"system-label-modulename",38),i.qZA()()()}if(2&e){const e=t.$implicit;i.xp6(1),i.Q6J("module",e),i.xp6(3),i.Q6J("module",e)}}function L(e,t){if(1&e&&(i.TgZ(0,"option",43),i._uU(1),i.qZA()),2&e){const e=t.$implicit;i.Q6J("value",e.language),i.xp6(1),i.hij(" ",e.text," ")}}let M=(()=>{class GlobalNavigationCompact{constructor(e,t,s,i,n,o,a,d,r,c,u,m){this.metadata=e,this.language=t,this.loginService=s,this.navigation=i,this.favorite=n,this.model=o,this.recent=a,this.session=d,this.modal=r,this.cdr=c,this.broadcast=u,this.router=m,this.showmenu=!1,this.menuitems=[],this.activeItem="",this.activeItemMenu=[],this.activeItemMenucomponents=[],this.subscriptions=new l.w0,this.buildMenuItems();let h=this.navigation.activeModule$.subscribe((e=>this.buildModuleMenuItems()));this.subscriptions.add(h);let g=this.broadcast.message$.subscribe((e=>{this.handleMessage(e)}));this.subscriptions.add(g)}get activeItemIsModule(){return!!this.metadata.getModuleDefs(this.activeItem)}set currentlanguage(e){this.language.currentlanguage=e,this.language.loadLanguage()}get currentlanguage(){return this.language.currentlanguage}get menuItems(){return this.menuitems.filter((e=>e!=this.activeItem))}get activeRoleName(){let e=this.metadata.getActiveRole();return e.label&&""!=e.label?this.language.getLabel(e.label):this.metadata.getActiveRole().name}get containerMiddleStyle(){return{height:`calc(100vh - ${this.containermiddle.element.nativeElement.offsetTop+this.containerbottom.element.nativeElement.offsetHeight}px)`}}get menuStyle(){return{left:this.showmenu?"0px":"-250px","box-shadow":this.showmenu?"5px 0 15px #888":"none"}}ngAfterViewInit(){this.buildModuleMenuItems(),this.cdr.detectChanges()}handleMessage(e){switch(e.messagetype){case"applauncher.setrole":case"loader.reloaded":this.buildMenuItems()}}navigateTo(e){this.router.navigate(["/module/"+e]),this.showmenu=!1}buildMenuItems(){this.menuitems=[];let e=this.metadata.getRoleModules(!0);for(let t of e)this.menuitems.push(t)}buildModuleMenuItems(){this.activeItem=this.navigation.activeModule,this.destroyActiveItemMenu(),this.activeItemMenu=[],this.activeItemIsModule&&this.menucontainer&&(this.model.module=this.activeItem,this.activeItemMenu=this.metadata.getModuleMenu(this.activeItem),this.buildActiveItemMenu())}showAppLauncher(){this.showmenu=!1,this.modal.openModal("GlobalAppLauncherDialog")}getAvialableLanguages(){return this.language.getAvialableLanguages(!0)}toggleMenu(){this.showmenu=!this.showmenu}closeMenu(){this.showmenu=!1}logout(){this.loginService.logout()}trackByFn(e,t){return t.id}buildActiveItemMenu(){for(let e of this.activeItemMenu)switch(e.action){case"NEW":this.metadata.checkModuleAcl(this.activeItem,"create")&&this.metadata.addComponent("GlobalNavigationMenuItemNew",this.menucontainer).pipe((0,o.q)(1)).subscribe((e=>{this.activeItemMenucomponents.push(e)}));break;case"ROUTE":this.metadata.addComponent("GlobalNavigationMenuItemRoute",this.menucontainer).pipe((0,o.q)(1)).subscribe((t=>{t.instance.actionconfig=e.actionconfig,this.activeItemMenucomponents.push(t)}))}}destroyActiveItemMenu(){for(let e of this.activeItemMenucomponents)e.destroy()}ngOnDestroy(){this.subscriptions.unsubscribe(),this.destroyActiveItemMenu(),this.cdr.detach()}}return GlobalNavigationCompact.ɵfac=function(e){return new(e||GlobalNavigationCompact)(i.Y36(a.Pu),i.Y36(d.d),i.Y36(r.j),i.Y36(c.G),i.Y36(u.G),i.Y36(n.o),i.Y36(m.h),i.Y36(h.n),i.Y36(g.o),i.Y36(i.sBO),i.Y36(p.f),i.Y36(f.F0))},GlobalNavigationCompact.ɵcmp=i.Xpm({type:GlobalNavigationCompact,selectors:[["global-navigation-compact"]],viewQuery:function(e,t){if(1&e&&(i.Gf(w,7,i.s_b),i.Gf(T,7,i.s_b),i.Gf(C,7,i.s_b)),2&e){let e;i.iGM(e=i.CRH())&&(t.containermiddle=e.first),i.iGM(e=i.CRH())&&(t.containerbottom=e.first),i.iGM(e=i.CRH())&&(t.menucontainer=e.first)}},features:[i._Bn([n.o])],decls:35,vars:10,consts:[[1,"slds-button","slds-button--icon",3,"click"],["icon","rows","size","small"],[1,"slds-is-absolute","slds-theme--shade",2,"width","250px","top","0","z-index","998","height","100vh","transition","left 1s",3,"ngStyle"],[1,"slds-grid","slds-grid--align-spread","slds-grid--vertical-align-start","slds-p-around--x-small"],[1,"slds-grid","slds-grid--vertical-align-center"],[2,"transform","scale(0.8)",3,"click"],["href","javascript:void(0);",1,"slds-icon-waffle_container"],[1,"slds-icon-waffle"],[1,"slds-r1"],[1,"slds-r2"],[1,"slds-r3"],[1,"slds-r4"],[1,"slds-r5"],[1,"slds-r6"],[1,"slds-r7"],[1,"slds-r8"],[1,"slds-r9"],[1,"slds-truncate","slds-p-left--xx-small","slds-text-heading_small"],["icon","close"],["class","slds-theme--default slds-p-vertical--x-small",4,"ngIf"],[1,"slds-grid",3,"ngStyle"],["containermiddle",""],[1,"slds-has-divider--bottom-space","slds-scrollable--y","spice-scrollbar",2,"width","100%"],["class","slds-grid slds-grid--vertical-align-center slds-p-vertical--x-small  slds-p-left--small",3,"click",4,"ngFor","ngForOf","ngForTrackBy"],[1,"slds-grid","slds-grid--vertical-align-center","slds-p-around--xx-small"],["containerbottom",""],[1,"slds-form-element","slds-grow"],[1,"slds-form-element__control"],[1,"slds-select_container"],[1,"slds-select",3,"disabled","ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[1,"slds-grid","slds-grid--align-end","slds-p-horizontal--small","slds-col--bump-left"],["icon","logout","size","x-small",3,"title","click"],[1,"slds-theme--default","slds-p-vertical--x-small"],[1,"slds-grid","slds-grid--vertical-align-center","slds-p-left--small","slds-p-vertical--xx-small"],["size","x-small","divClass","",3,"module"],["href","javascript:void(0);",1,"slds-p-left--small","slds-text-heading_small"],[1,"slds-truncate",2,"font-weight","bold"],[3,"module"],["role","menu",3,"click"],["menucontainer",""],[1,"slds-grid","slds-grid--vertical-align-center","slds-p-vertical--x-small","slds-p-left--small",3,"click"],[1,"slds-truncate"],[3,"value"]],template:function(e,t){1&e&&(i.TgZ(0,"button",0),i.NdJ("click",(function(){return t.toggleMenu()})),i._UZ(1,"system-utility-icon",1),i.qZA(),i.TgZ(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5),i.NdJ("click",(function(){return t.showAppLauncher()})),i.TgZ(6,"a",6)(7,"div",7),i._UZ(8,"div",8)(9,"div",9)(10,"div",10)(11,"div",11)(12,"div",12)(13,"div",13)(14,"div",14)(15,"div",15)(16,"div",16),i.qZA()()(),i.TgZ(17,"div",17),i._uU(18),i.qZA()(),i.TgZ(19,"button",0),i.NdJ("click",(function(){return t.closeMenu()})),i._UZ(20,"system-button-icon",18),i.qZA()(),i.YNc(21,A,9,2,"div",19),i.TgZ(22,"div",20,21)(24,"div",22),i.YNc(25,k,5,2,"div",23),i.qZA()(),i.TgZ(26,"div",24,25)(28,"div",26)(29,"div",27)(30,"div",28)(31,"select",29),i.NdJ("ngModelChange",(function(e){return t.currentlanguage=e})),i.YNc(32,L,2,2,"option",30),i.qZA()()()(),i.TgZ(33,"div",31)(34,"system-utility-icon",32),i.NdJ("click",(function(){return t.logout()})),i.qZA()()()()),2&e&&(i.xp6(2),i.Q6J("ngStyle",t.menuStyle),i.xp6(16),i.Oqu(t.activeRoleName),i.xp6(3),i.Q6J("ngIf",t.activeItemIsModule),i.xp6(1),i.Q6J("ngStyle",t.containerMiddleStyle),i.xp6(3),i.Q6J("ngForOf",t.menuItems)("ngForTrackBy",t.trackByFn),i.xp6(6),i.Q6J("disabled",t.getAvialableLanguages().length<=1)("ngModel",t.currentlanguage),i.xp6(1),i.Q6J("ngForOf",t.getAvialableLanguages()),i.xp6(2),i.Q6J("title",t.language.getLabel("LBL_LOGOFF")))},dependencies:[b.sg,b.O5,b.PC,_.YN,_.Kr,_.EJ,_.JJ,_.On,y.J,v.f,x.M,Z.r],encapsulation:2}),GlobalNavigationCompact})()},6119:(e,t,s)=>{"use strict";s.d(t,{i:()=>r});var i=s(1571),n=s(4154),l=s(3369),o=s(2032);const a=["menucontainer"],d=["morecontainer"];let r=(()=>{class GlobalNavigationMenu{constructor(e,t,s,i){this.metadata=e,this.elementRef=t,this.broadcast=s,this.navigation=i,this.moreComponentRef=void 0,this.menuItems=[],this.renderedItems=[],this.moreItems=[],this.movingActive=!1,this.rendering=!1,this.resizeTimeOut=void 0,this.broadcast.message$.subscribe((e=>{this.handleMessage(e)})),this.navigation.activeModule$.subscribe((e=>this.checkActiveModule()))}ngAfterViewInit(){this.buildMenuItems(),this.renderMenu()}buildMenuItems(){this.menuItems=[];let e=this.metadata.getRoleModules(!0);for(let t of e)this.menuItems.push(t)}handleResize(){this.buildMenuItems(),this.resizeTimeOut&&window.clearTimeout(this.resizeTimeOut),this.resizeTimeOut=window.setTimeout((()=>this.renderMenu()),250)}checkActiveModule(){if(this.movingActive||this.rendering)return!1;let e=this.menuItems.indexOf(this.navigation.activeModule),t=!1;for(let e of this.renderedItems)if(e.module==this.navigation.activeModule){t=!0;break}if(!t&&0!=e&&e+1>this.renderedItems.length){let t=this.menuItems.splice(e,1),s=this.renderedItems.pop();return s&&(s.componentRef.destroy(),this.menuItems.splice(this.renderedItems.length,0,t[0]),this.movingActive=!0,this.destroyMoreItem(),this.addMenuItem(this.menuItems[this.renderedItems.length],this.menuItems[this.renderedItems.length])),!1}return!0}destroyMenu(){for(let e of this.renderedItems)e.componentRef.destroy();this.renderedItems=[],this.destroyMoreItem(),this.movingActive=!1}renderMenu(){this.destroyMenu(),this.rendering=!0,this.addMenuItem(this.menuItems[0],this.menuItems[0])}addMenuItem(e,t){this.metadata.addComponentDirect("GlobalNavigationMenuItem",this.menucontainer).subscribe((s=>{s.instance.item={module:e,name:t},this.renderedItems.push({module:e,componentRef:s})}))}addMoreItem(){this.destroyMoreItem(),this.metadata.addComponentDirect("GlobalNavigationMenuMore",this.menucontainer).subscribe((e=>{this.moreItems=[];let t=this.renderedItems.length;for(;t<this.menuItems.length;)this.moreItems.push(this.menuItems[t]),t++;e.instance.moreMenuItems=this.moreItems,this.moreComponentRef={componentRef:e}}))}destroyMoreItem(){this.moreComponentRef&&(this.moreComponentRef.componentRef.destroy(),this.moreComponentRef=void 0)}getRenderedWidth(){let e=0;for(let t of this.renderedItems)e+=t.width;return e}handleMessage(e){switch(e.messagetype){case"applauncher.setrole":case"loader.reloaded":this.buildMenuItems(),this.renderMenu();break;case"navigation.itemadded":for(let t of this.renderedItems)t.module===e.messagedata.module&&(t.width=e.messagedata.width);let t=this.getRenderedWidth();if(this.movingActive)this.elementRef.nativeElement.offsetWidth,this.movingActive=!1,this.addMoreItem();else if(t>this.elementRef.nativeElement.offsetWidth){this.renderedItems.pop().componentRef.destroy(),this.menuItems.length>this.renderedItems.length?this.addMoreItem():this.rendering=!1}else this.menuItems.length>this.renderedItems.length&&this.addMenuItem(this.menuItems[this.renderedItems.length],this.menuItems[this.renderedItems.length]);break;case"navigation.moreadded":if(this.moreComponentRef.width=e.messagedata.width,this.renderedItems.length>0&&this.getRenderedWidth()+e.messagedata.width>this.elementRef.nativeElement.offsetWidth){this.renderedItems.pop().componentRef.destroy(),this.checkActiveModule()&&this.addMoreItem()}}}}return GlobalNavigationMenu.ɵfac=function(e){return new(e||GlobalNavigationMenu)(i.Y36(n.Pu),i.Y36(i.SBq),i.Y36(l.f),i.Y36(o.G))},GlobalNavigationMenu.ɵcmp=i.Xpm({type:GlobalNavigationMenu,selectors:[["global-navigation-menu"]],viewQuery:function(e,t){if(1&e&&(i.Gf(a,7,i.s_b),i.Gf(d,7,i.s_b)),2&e){let e;i.iGM(e=i.CRH())&&(t.menucontainer=e.first),i.iGM(e=i.CRH())&&(t.morecontainer=e.first)}},hostBindings:function(e,t){1&e&&i.NdJ("resize",(function(){return t.handleResize()}),!1,i.Jf7)},decls:5,vars:0,consts:[[1,"slds-grid"],["menucontainer",""],["morecontainer",""]],template:function(e,t){1&e&&(i.TgZ(0,"ul",0),i._UZ(1,"div",null,1)(3,"div",null,2),i.qZA())},encapsulation:2}),GlobalNavigationMenu})()},5853:(e,t,s)=>{"use strict";s.d(t,{r:()=>d});var i=s(1571),n=s(5329),l=s(4154),o=s(5710);const a=["actioncontainer"];let d=(()=>{class GlobalNavigationMenuItemActionContainer{constructor(e,t,s,n,l){this.language=e,this.metadata=t,this.model=s,this.ngZone=n,this.cdr=l,this.actionemitter=new i.vpe,this.standardActions={NEW:"GlobalNavigationMenuItemActionNew",ROUTE:"GlobalNavigationMenuItemActionRoute"},this.stable=!1}get id(){return this.actionitem.id}get disabled(){return!this.componentref||!!this.componentref.instance.disabled}get hidden(){return!this.componentref||!!this.componentref.instance.hidden}ngAfterViewInit(){this.metadata.addComponent(this.actionitem.action?this.standardActions[this.actionitem.action]:this.actionitem.component,this.actioncontainer).subscribe((e=>{e.instance.parent=this.model,e.instance.actionconfig=this.actionitem.actionconfig,e.instance.actionemitter&&e.instance.actionemitter.subscribe((e=>{this.actionemitter.emit(e)})),this.componentref=e,this.cdr.detectChanges()}))}execute(){this.componentref&&this.componentref.instance.execute&&this.componentref.instance.execute()}}return GlobalNavigationMenuItemActionContainer.ɵfac=function(e){return new(e||GlobalNavigationMenuItemActionContainer)(i.Y36(n.d),i.Y36(l.Pu),i.Y36(o.o),i.Y36(i.R0b),i.Y36(i.sBO))},GlobalNavigationMenuItemActionContainer.ɵcmp=i.Xpm({type:GlobalNavigationMenuItemActionContainer,selectors:[["global-navigation-menu-item-action-container"]],viewQuery:function(e,t){if(1&e&&i.Gf(a,7,i.s_b),2&e){let e;i.iGM(e=i.CRH())&&(t.actioncontainer=e.first)}},inputs:{actionitem:"actionitem"},outputs:{actionemitter:"actionemitter"},decls:2,vars:0,consts:[["actioncontainer",""]],template:function(e,t){1&e&&i._UZ(0,"div",null,0)},encapsulation:2}),GlobalNavigationMenuItemActionContainer})()},6131:(e,t,s)=>{"use strict";s.d(t,{s:()=>m});var i=s(727),n=s(1571),l=s(4154),o=s(2032),a=s(6895),d=s(909),r=s(9183),c=s(3861);function u(e,t){if(1&e&&(n.TgZ(0,"div",4),n._UZ(1,"global-navigation-tabbed-subtabs",5),n.qZA()),2&e){const e=n.oxw();n.xp6(1),n.Q6J("parenttab",e.parentTab)}}let m=(()=>{class GlobalNavigationTabbed{constructor(e,t,s){this.metadata=e,this.navigation=t,this.cdRef=s,this.displaySubTabs=!1,this.subscriptions=new i.w0}ngAfterViewInit(){this.subscribeToNavigationChanges()}ngOnDestroy(){this.subscriptions.unsubscribe()}setDisplaySubTabs(e){this.displaySubTabs="subtabbed"==this.navigation.navigationparadigm&&!!e&&(!!e.parentid||this.navigation.getSubTabs(e.id).length>0),this.cdRef.detectChanges()}setParentTab(e){this.parentTab=e&&e.parentid?this.navigation.getTabById(e.parentid):e}subscribeToNavigationChanges(){this.subscriptions.add(this.navigation.activeTab$.subscribe((e=>{this.handleNavigationChanges(e)}))),this.subscriptions.add(this.navigation.objectTabsChange$.subscribe((()=>{this.handleNavigationChanges(this.navigation.activeTab)})))}handleNavigationChanges(e){const t=this.navigation.getTabById(e);this.setParentTab(t),this.setDisplaySubTabs(t)}}return GlobalNavigationTabbed.ɵfac=function(e){return new(e||GlobalNavigationTabbed)(n.Y36(l.Pu),n.Y36(o.G),n.Y36(n.sBO))},GlobalNavigationTabbed.ɵcmp=n.Xpm({type:GlobalNavigationTabbed,selectors:[["global-navigation-tabbed"]],decls:4,vars:1,consts:[[1,"slds-context-bar","slds-context-bar_tabs"],[1,"slds-context-bar__primary"],["role","navigation",1,"slds-context-bar__secondary"],["class","slds-tabs_default slds-sub-tabs",4,"ngIf"],[1,"slds-tabs_default","slds-sub-tabs"],[3,"parenttab"]],template:function(e,t){1&e&&(n.TgZ(0,"div",0),n._UZ(1,"global-app-launcher",1)(2,"global-navigation-tabbed-menu",2),n.qZA(),n.YNc(3,u,2,1,"div",3)),2&e&&(n.xp6(3),n.Q6J("ngIf",t.displaySubTabs))},dependencies:[a.O5,d.Q,r.O,c._],encapsulation:2}),GlobalNavigationTabbed})()},8313:(e,t,s)=>{"use strict";s.d(t,{P:()=>c});var i=s(2032),n=s(7340),l=s(1571),o=s(4044),a=s(6895),d=s(8859);function r(e,t){if(1&e){const e=l.EpF();l.TgZ(0,"system-utility-icon",1),l.NdJ("click",(function(){l.CHM(e);const t=l.oxw();return l.KtG(t.openModal())})),l.qZA()}2&e&&l.Q6J("@browsertabbutton",void 0)}let c=(()=>{class GlobalNavigationTabbedBrowser{constructor(e,t,s){this.navigation=e,this.modal=t,this.elementRef=s}get tabWidth(){return this.elementRef.nativeElement.getBoundingClientRect().width}get hasTabs(){return this.navigation.objectTabs.length>0}openModal(){this.modal.openModal("GlobalNavigationTabbedBrowserModal")}}return GlobalNavigationTabbedBrowser.ɵfac=function(e){return new(e||GlobalNavigationTabbedBrowser)(l.Y36(i.G),l.Y36(o.o),l.Y36(l.SBq))},GlobalNavigationTabbedBrowser.ɵcmp=l.Xpm({type:GlobalNavigationTabbedBrowser,selectors:[["global-navigation-tabbed-browser"]],hostVars:2,hostBindings:function(e,t){1&e&&l.NdJ("click",(function(){return t.openModal()})),2&e&&l.ekj("slds-context-bar__item",1)},decls:1,vars:1,consts:[["icon","tabset","size","x-small","class","slds-p-around--x-small slds-border--left",3,"click",4,"ngIf"],["icon","tabset","size","x-small",1,"slds-p-around--x-small","slds-border--left",3,"click"]],template:function(e,t){1&e&&l.YNc(0,r,1,1,"system-utility-icon",0),2&e&&l.Q6J("ngIf",t.hasTabs)},dependencies:[a.O5,d.r],encapsulation:2,data:{animation:[(0,n.X$)("browsertabbutton",[(0,n.eR)(":enter",[(0,n.oB)({opacity:0}),(0,n.jt)(".5s",(0,n.oB)({opacity:1}))]),(0,n.eR)(":leave",[(0,n.jt)(".5s",(0,n.oB)({opacity:0}))])])]}}),GlobalNavigationTabbedBrowser})()},9183:(e,t,s)=>{"use strict";s.d(t,{O:()=>g});var i=s(6962),n=s(26),l=s(2429),o=s(8313),a=s(727),d=s(1571),r=s(4154),c=s(3369),u=s(2032),m=s(6895);function h(e,t){if(1&e&&d._UZ(0,"global-navigation-tabbed-menu-tab",3),2&e){const e=t.$implicit;d.Q6J("object",e)}}let g=(()=>{class GlobalNavigationTabbedMenu{constructor(e,t,s,i){this.metadata=e,this.elementRef=t,this.broadcast=s,this.navigation=i,this.resizeTimeOut=void 0,this.subscriptions=new a.w0,this.subscriptions.add(this.navigation.objectTabsChange$.subscribe((e=>{window.setTimeout((()=>{this.handleResize()}))})))}ngOnDestroy(){this.subscriptions.unsubscribe()}get objectTabs(){return this.navigation.objectTabs.filter((e=>!e.parentid)).sort(((e,t)=>e.pinned&&t.pinned||!e.pinned&&!t.pinned?0:e.pinned?-1:1))}trackByFn(e,t){return t.id}handleResize(){let e=this.elementRef.nativeElement.getBoundingClientRect().left,t=this.menuModules.tabWidth,s=this.menuBrowser.tabWidth,i=window.innerWidth-e-t-s;this.menuMore.elementRef.nativeElement.classList.remove("slds-hide"),this.menuMore.elementRef.nativeElement.classList.add("slds-hidden"),this.menuMore.moreObjects=[];let n=this.menuMore.tabWidth;this.menuTabs.forEach((e=>{e.elementRef.nativeElement.classList.remove("slds-hide"),e.elementRef.nativeElement.classList.add("slds-hidden")}));let l=0,o=!1;return this.menuTabs.forEach(((e,t)=>{let s=e.elementRef.nativeElement.getBoundingClientRect().width;l+=s,(o||t+1==this.menuTabs.length&&l>i||t+1<this.menuTabs.length&&l>i-n)&&(e.elementRef.nativeElement.classList.add("slds-hide"),o=!0,this.menuMore.moreObjects.push(e.object)),e.elementRef.nativeElement.classList.remove("slds-hidden")})),o?this.menuMore.elementRef.nativeElement.classList.remove("slds-hidden"):this.menuMore.elementRef.nativeElement.classList.add("slds-hide"),!0}}return GlobalNavigationTabbedMenu.ɵfac=function(e){return new(e||GlobalNavigationTabbedMenu)(d.Y36(r.Pu),d.Y36(d.SBq),d.Y36(c.f),d.Y36(u.G))},GlobalNavigationTabbedMenu.ɵcmp=d.Xpm({type:GlobalNavigationTabbedMenu,selectors:[["global-navigation-tabbed-menu"]],viewQuery:function(e,t){if(1&e&&(d.Gf(i.Q,5),d.Gf(n.K,5),d.Gf(o.P,5),d.Gf(l.y,5)),2&e){let e;d.iGM(e=d.CRH())&&(t.menuModules=e.first),d.iGM(e=d.CRH())&&(t.menuMore=e.first),d.iGM(e=d.CRH())&&(t.menuBrowser=e.first),d.iGM(e=d.CRH())&&(t.menuTabs=e)}},hostBindings:function(e,t){1&e&&d.NdJ("resize",(function(){return t.handleResize()}),!1,d.Jf7)},decls:4,vars:2,consts:[[3,"object",4,"ngFor","ngForOf","ngForTrackBy"],[1,"slds-hidden"],[1,"slds-col--bump-left"],[3,"object"]],template:function(e,t){1&e&&(d._UZ(0,"global-navigation-tabbed-menu-modules"),d.YNc(1,h,1,1,"global-navigation-tabbed-menu-tab",0),d._UZ(2,"global-navigation-tabbed-more-tab",1)(3,"global-navigation-tabbed-browser",2)),2&e&&(d.xp6(1),d.Q6J("ngForOf",t.objectTabs)("ngForTrackBy",t.trackByFn))},dependencies:[m.sg,i.Q,l.y,n.K,o.P],encapsulation:2}),GlobalNavigationTabbedMenu})()},9570:(e,t,s)=>{"use strict";s.d(t,{L:()=>N});var i=s(1571),n=s(5710),l=s(2294),o=s(5853),a=s(4154),d=s(3369),r=s(2032),c=s(7774),u=s(5329),m=s(382),h=s(4376),g=s(6895),p=s(7763),f=s(3463),b=s(4664),_=s(5931);const y=function(e){return{"slds-hide":e}},v=function(e){return{"slds-disabled-text":e}};function x(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"li",5),i.NdJ("click",(function(){const t=i.CHM(e).$implicit,s=i.oxw(2);return i.KtG(s.propagateclick(t.id))})),i.TgZ(1,"a",6),i._UZ(2,"global-navigation-menu-item-action-container",7),i.qZA()()}if(2&e){const e=t.$implicit,s=i.oxw(2);i.Q6J("ngClass",i.VKq(3,y,s.isHidden(e.id))),i.xp6(2),i.Q6J("ngClass",i.VKq(5,v,s.isDisabled(e.id)))("actionitem",e)}}function Z(e,t){if(1&e&&(i.ynx(0),i.YNc(1,x,3,7,"li",4),i.BQk()),2&e){const e=i.oxw();i.xp6(1),i.Q6J("ngForOf",e.itemMenu)}}function w(e,t){if(1&e&&(i.TgZ(0,"span",15),i._uU(1),i.qZA()),2&e){const e=i.oxw().$implicit;i.xp6(1),i.Oqu(e.item_summary)}}function T(e,t){if(1&e&&i._UZ(0,"object-record-fieldset-horizontal-list",16),2&e){const e=i.oxw(3);i.Q6J("fieldset",e.displayfieldset)}}const C=function(e,t,s){return{module:e,id:t,data:s}};function A(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"li",12),i.NdJ("click",(function(){const t=i.CHM(e).$implicit,s=i.oxw(2);return i.KtG(s.openRecord(t.item_id))})),i.TgZ(1,"a",6),i.YNc(2,w,2,1,"span",13),i.YNc(3,T,1,1,"object-record-fieldset-horizontal-list",14),i.qZA()()}if(2&e){const e=t.$implicit,s=i.oxw(2);i.Q6J("system-model-provider",i.kEZ(3,C,s.module,e.id,e.data)),i.xp6(2),i.Q6J("ngIf",!s.displayfieldset),i.xp6(1),i.Q6J("ngIf",s.displayfieldset)}}function k(e,t){if(1&e&&(i.ynx(0),i.TgZ(1,"li",8)(2,"span",9),i._UZ(3,"system-label",10),i.qZA()(),i.YNc(4,A,4,7,"li",11),i.BQk()),2&e){const e=i.oxw();i.xp6(4),i.Q6J("ngForOf",e.favorites)}}function L(e,t){if(1&e&&(i.TgZ(0,"span",15),i._uU(1),i.qZA()),2&e){const e=i.oxw().$implicit;i.xp6(1),i.Oqu(e.data.summary_text)}}function M(e,t){if(1&e&&i._UZ(0,"object-record-fieldset-horizontal-list",16),2&e){const e=i.oxw(3);i.Q6J("fieldset",e.displayfieldset)}}function S(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"li",12),i.NdJ("click",(function(){const t=i.CHM(e).$implicit,s=i.oxw(2);return i.KtG(s.openRecord(t.item_id))})),i.TgZ(1,"a",6),i.YNc(2,L,2,1,"span",13),i.YNc(3,M,1,1,"object-record-fieldset-horizontal-list",14),i.qZA()()}if(2&e){const e=t.$implicit,s=i.oxw(2);i.Q6J("system-model-provider",i.kEZ(3,C,s.module,e.id,e.data)),i.xp6(2),i.Q6J("ngIf",!s.displayfieldset),i.xp6(1),i.Q6J("ngIf",s.displayfieldset)}}function I(e,t){1&e&&(i.TgZ(0,"li",20),i._UZ(1,"system-label",21),i.qZA())}function O(e,t){1&e&&i._UZ(0,"system-spinner",22)}function J(e,t){if(1&e&&(i.ynx(0),i.TgZ(1,"li",8)(2,"span",9),i._UZ(3,"system-label",17),i.qZA()(),i.YNc(4,S,4,7,"li",11),i.YNc(5,I,2,0,"li",18),i.YNc(6,O,1,0,"system-spinner",19),i.BQk()),2&e){const e=i.oxw();i.xp6(4),i.Q6J("ngForOf",e.recentitems),i.xp6(1),i.Q6J("ngIf",!e.loadingRecent&&0==e.recentitems.length),i.xp6(1),i.Q6J("ngIf",e.loadingRecent)}}let N=(()=>{class GlobalNavigationTabbedMenuModuleMenu{constructor(e,t,s,n,l,o,a,d,r,c){this.metadata=e,this.model=t,this.view=s,this.broadcast=n,this.navigation=l,this.router=o,this.language=a,this.recent=d,this.favorite=r,this.cdRef=c,this.actionTriggered=new i.vpe,this.itemMenu=[],this.loadingRecent=!1,this.recentitems=[],this.favorites=[],this.view.displayLabels=!1}get trackRecent(){return!!this.module&&"1"==this.metadata.getModuleDefs(this.module)?.track}ngOnChanges(){this.model.reset(),this.model.module=this.module;let e=this.metadata.getComponentConfig("GlobalNavigationMenuItem",this.module);if(e.actionset?this.itemMenu=this.metadata.getActionSetItems(e.actionset):this.itemMenu=this.metadata.getModuleMenu(this.module),e.displayfieldset)this.displayfieldset=e.displayfieldset;else{let e=this.metadata.getComponentConfig("GlobalHeaderSearchResultsItem",this.module);this.displayfieldset=e.mainfieldset}this.recentitems=[],this.trackRecent?this.recent.moduleItems[this.module]?this.recentitems=this.recent.moduleItems[this.module]:(this.loadingRecent=!0,this.recent.getModuleRecent(this.module).subscribe((e=>{this.loadingRecent=!1;let t=this.recent.moduleItems[this.module];this.recentitems=t||[],this.cdRef.detectChanges()}),(e=>{this.loadingRecent=!1}))):this.recentitems=[],this.favorites=this.favorite.getFavorites(this.module)}propagateclick(e){this.menuItemlist.find((t=>t.id==e))?.execute(),this.actionTriggered.emit(!0)}isDisabled(e){return!!this.menuItemlist&&this.menuItemlist.find((t=>t.id==e))?.disabled}isHidden(e){return!!this.menuItemlist&&this.menuItemlist.find((t=>t.id==e))?.hidden}openRecord(e){this.router.navigate(["/module/"+this.module+"/"+e]),this.actionTriggered.emit(!0)}}return GlobalNavigationTabbedMenuModuleMenu.ɵfac=function(e){return new(e||GlobalNavigationTabbedMenuModuleMenu)(i.Y36(a.Pu),i.Y36(n.o),i.Y36(l.e),i.Y36(d.f),i.Y36(r.G),i.Y36(c.F0),i.Y36(u.d),i.Y36(m.h),i.Y36(h.G),i.Y36(i.sBO))},GlobalNavigationTabbedMenuModuleMenu.ɵcmp=i.Xpm({type:GlobalNavigationTabbedMenuModuleMenu,selectors:[["global-navigation-tabbed-module-menu"]],viewQuery:function(e,t){if(1&e&&i.Gf(o.r,5),2&e){let e;i.iGM(e=i.CRH())&&(t.menuItemlist=e)}},inputs:{module:"module"},outputs:{actionTriggered:"actionTriggered"},features:[i._Bn([n.o,l.e]),i.TTD],decls:7,vars:3,consts:[["role","menu",1,"slds-dropdown__list"],["menulist",""],["menucontainer",""],[4,"ngIf"],["class","slds-dropdown__item","role","presentation",3,"ngClass","click",4,"ngFor","ngForOf"],["role","presentation",1,"slds-dropdown__item",3,"ngClass","click"],["href","javascript:void(0);","role","menuitem"],[1,"slds-truncate",3,"ngClass","actionitem"],["role","separator",1,"slds-dropdown__header"],[1,"slds-text-title--caps"],["label","LBL_FAVORITES"],["class","slds-dropdown__item","role","presentation",3,"system-model-provider","click",4,"ngFor","ngForOf"],["role","presentation",1,"slds-dropdown__item",3,"system-model-provider","click"],["class","slds-truncate",4,"ngIf"],[3,"fieldset",4,"ngIf"],[1,"slds-truncate"],[3,"fieldset"],["label","LBL_RECENTLYVIEWED"],["class","slds-dropdown__item slds-align--absolute-center slds-text-color_inverse-weak slds-p-around--xx-small",4,"ngIf"],["size","16",4,"ngIf"],[1,"slds-dropdown__item","slds-align--absolute-center","slds-text-color_inverse-weak","slds-p-around--xx-small"],["label","LBL_NO_ENTRIES"],["size","16"]],template:function(e,t){1&e&&(i.TgZ(0,"ul",0,1),i._UZ(2,"div",null,2),i.YNc(4,Z,2,1,"ng-container",3),i.YNc(5,k,5,1,"ng-container",3),i.YNc(6,J,7,3,"ng-container",3),i.qZA()),2&e&&(i.xp6(4),i.Q6J("ngIf",t.itemMenu.length>0),i.xp6(1),i.Q6J("ngIf",t.favorites.length>0),i.xp6(1),i.Q6J("ngIf",t.trackRecent))},dependencies:[g.mk,g.sg,g.O5,p.u,f._,b.W,_.Z,o.r],encapsulation:2,changeDetection:0}),GlobalNavigationTabbedMenuModuleMenu})()},6962:(e,t,s)=>{"use strict";s.d(t,{Q:()=>Z});var i=s(1571),n=s(4154),l=s(3369),o=s(2032),a=s(7774),d=s(5329),r=s(382),c=s(4376),u=s(6895),m=s(151),h=s(2656),g=s(4561),p=s(3463),f=s(3333),b=s(9570);const _=function(e){return{"slds-is-active":e}};function y(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"li",17),i.NdJ("click",(function(){i.CHM(e);const t=i.oxw();return i.KtG(t.navigateTo(t.navModule))})),i.TgZ(1,"a",18)(2,"div",19),i._UZ(3,"system-icon",3),i.TgZ(4,"span"),i._UZ(5,"system-label-modulename",4),i.qZA(),i.TgZ(6,"button",20),i.NdJ("click",(function(t){i.CHM(e);const s=i.oxw();return i.KtG(s.setActiveModule(t,s.navModule))})),i._UZ(7,"system-button-icon",21),i.qZA()()()()}if(2&e){const e=i.oxw();i.Q6J("ngClass",i.VKq(4,_,e.navModule==e.activeModule)),i.xp6(2),i.Q6J("title",e.navModule),i.xp6(1),i.Q6J("module",e.navModule),i.xp6(2),i.Q6J("module",e.navModule)}}function v(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"li",22),i.NdJ("click",(function(){const t=i.CHM(e).$implicit,s=i.oxw();return i.KtG(s.navigateTo(t))})),i.TgZ(1,"a",18)(2,"div",19),i._UZ(3,"system-icon",3),i.TgZ(4,"span"),i._UZ(5,"system-label-modulename",4),i.qZA(),i.TgZ(6,"button",20),i.NdJ("click",(function(t){const s=i.CHM(e).$implicit,n=i.oxw();return i.KtG(n.setActiveModule(t,s))})),i._UZ(7,"system-button-icon",21),i.qZA()()()()}if(2&e){const e=t.$implicit,s=i.oxw();i.Q6J("ngClass",i.VKq(4,_,e==s.activeModule)),i.xp6(2),i.Q6J("title",e),i.xp6(1),i.Q6J("module",e),i.xp6(2),i.Q6J("module",e)}}const x=function(e){return{"slds-is-open":e}};let Z=(()=>{class GlobalNavigationTabbedMenuModules{constructor(e,t,s,i,n,l,o,a,d){this.metadata=e,this.broadcast=t,this.navigation=s,this.router=i,this.language=n,this.recent=l,this.favorite=o,this.elementRef=a,this.renderer=d,this.menuItems=[],this.isopen=!1,this.activeModule="",this.initialized=!1,this.broadcast.message$.subscribe((e=>{this.handleMessage(e)}))}quickLaunch(e){this.toggleMenu()}buildMenuItems(){this.menuItems=[];let e=this.metadata.getRoleModules(!0);for(let t of e)this.menuItems.push(t)}get isActive(){return"main"==this.navigation.activeTab}get tabWidth(){return this.elementRef.nativeElement.getBoundingClientRect().width}setActive(){this.navigation.setActiveTab("main")}get activeModuleVisible(){return this.menuItems.find((e=>e==this.navModule))}handleMessage(e){if("applauncher.setrole"===e.messagetype)this.buildMenuItems()}get navModule(){return this.navigation.activeModule}toggleMenu(){this.isopen?this.closeMenu():(this.openMenu(),this.elementRef.nativeElement.focus())}openMenu(){this.isopen=!0,this.initialized||(this.buildMenuItems(),this.initialized=!0),this.activeModule=this.navigation.activeModule,this.keyboardListener||(this.keyboardListener=this.renderer.listen("document","keyup",(e=>this.handleKeyBoardEvent(e))))}setActiveModule(e,t){e.stopPropagation(),this.activeModule=t}closeMenu(){this.isopen=!1,this.keyboardListener&&(this.keyboardListener(),this.keyboardListener=null)}handleKeyBoardEvent(e){let t=this.menuItems.indexOf(this.activeModule);switch(console.log(e),e.key){case"ArrowDown":this.activeModule=this.menuItems[t+1>=this.menuItems.length?0:t+1];break;case"ArrowUp":this.activeModule=this.menuItems[t-1<0?this.menuItems.length-1:t-1];break;case"Enter":this.navigateTo(this.activeModule)}}navigateTo(e){this.closeMenu(),this.router.navigate(["/module/"+e])}}return GlobalNavigationTabbedMenuModules.ɵfac=function(e){return new(e||GlobalNavigationTabbedMenuModules)(i.Y36(n.Pu),i.Y36(l.f),i.Y36(o.G),i.Y36(a.F0),i.Y36(d.d),i.Y36(r.h),i.Y36(c.G),i.Y36(i.SBq),i.Y36(i.Qsj))},GlobalNavigationTabbedMenuModules.ɵcmp=i.Xpm({type:GlobalNavigationTabbedMenuModules,selectors:[["global-navigation-tabbed-menu-modules"]],hostVars:4,hostBindings:function(e,t){1&e&&i.NdJ("mouseenter",(function(){return t.openMenu()}))("mouseleave",(function(){return t.closeMenu()}))("keydown.control.m",(function(){return t.quickLaunch()}),!1,i.evT),2&e&&i.ekj("slds-context-bar__item",1)("slds-is-active",t.isActive)},decls:18,vars:9,consts:[[1,"slds-context-bar__item","slds-context-bar__item_divider-right","slds-dropdown-trigger","slds-dropdown-trigger_click",3,"ngClass"],["href","javascript:void(0);",1,"slds-context-bar__label-action",3,"click"],[1,"slds-truncate","slds-grid","slds-grid--vertical-align-center",3,"title"],["size","x-small",3,"module"],[3,"module"],[1,"slds-context-bar__icon-action"],["system-title","LBL_MAIN_MENU","aria-haspopup","true",1,"slds-button","slds-button_icon","slds-button_icon-container","slds-button_icon-x-small"],["icon","chevrondown"],[1,"slds-assistive-text"],["label","LBL_MAIN_MENU"],[1,"slds-dropdown","slds-dropdown_left","slds-dropdown--large"],[1,"slds-grid"],["role","menu",1,"slds-dropdown__list","slds-size--1-of-2","slds-border--right"],["class","slds-dropdown__item slds-nav-vertical__item slds-has-divider--bottom",3,"ngClass","click",4,"ngIf"],["class","slds-dropdown__item slds-nav-vertical__item","role","presentation",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"slds-size--1-of-2"],[3,"module","actionTriggered"],[1,"slds-dropdown__item","slds-nav-vertical__item","slds-has-divider--bottom",3,"ngClass","click"],["href","javascript:void(0);","role","menuitem","tabindex","-1"],[1,"slds-truncate","slds-size--1-of-1","slds-grid","slds-grid--vertical-align-center",3,"title"],[1,"slds-button","slds-button--icon","slds-col--bump-left",3,"click"],["icon","chevronright","addclasses","slds-icon-text-light"],["role","presentation",1,"slds-dropdown__item","slds-nav-vertical__item",3,"ngClass","click"]],template:function(e,t){1&e&&(i.TgZ(0,"div",0)(1,"a",1),i.NdJ("click",(function(){return t.setActive()})),i.TgZ(2,"div",2),i._UZ(3,"system-icon",3),i.TgZ(4,"span"),i._UZ(5,"system-label-modulename",4),i.qZA()()(),i.TgZ(6,"div",5)(7,"button",6),i._UZ(8,"system-button-icon",7),i.TgZ(9,"span",8),i._UZ(10,"system-label",9),i.qZA()()(),i.TgZ(11,"div",10)(12,"div",11)(13,"ul",12),i.YNc(14,y,8,6,"li",13),i.YNc(15,v,8,6,"li",14),i.qZA(),i.TgZ(16,"div",15)(17,"global-navigation-tabbed-module-menu",16),i.NdJ("actionTriggered",(function(){return t.closeMenu()})),i.qZA()()()()()),2&e&&(i.Q6J("ngClass",i.VKq(7,x,t.isopen)),i.xp6(2),i.Q6J("title",t.navModule),i.xp6(1),i.Q6J("module",t.navModule),i.xp6(2),i.Q6J("module",t.navModule),i.xp6(9),i.Q6J("ngIf",!t.activeModuleVisible),i.xp6(1),i.Q6J("ngForOf",t.menuItems),i.xp6(2),i.Q6J("module",t.activeModule))},dependencies:[u.mk,u.sg,u.O5,m.S,h.J,g.f,p._,f.M,b.L],encapsulation:2}),GlobalNavigationTabbedMenuModules})()},2429:(e,t,s)=>{"use strict";s.d(t,{y:()=>b});var i=s(1571),n=s(2032),l=s(5329),o=s(6895),a=s(151),d=s(2656),r=s(4561),c=s(3463),u=s(4664),m=s(8859);function h(e,t){if(1&e&&i._UZ(0,"system-utility-icon",13),2&e){const e=i.oxw(2);i.Q6J("icon",e.tabicon)}}function g(e,t){if(1&e&&i._UZ(0,"system-icon",14),2&e){const e=i.oxw(2);i.Q6J("module",e.tabmodule)}}function p(e,t){if(1&e&&(i.ynx(0),i.YNc(1,h,1,1,"system-utility-icon",10),i.YNc(2,g,1,1,"system-icon",11),i.TgZ(3,"div",12),i._uU(4),i.qZA(),i.BQk()),2&e){const e=i.oxw();i.xp6(1),i.Q6J("ngIf",e.tabicon),i.xp6(1),i.Q6J("ngIf",e.tabmodule),i.xp6(2),i.Oqu(e.tabname)}}function f(e,t){1&e&&(i._UZ(0,"system-spinner",15),i.TgZ(1,"div"),i._UZ(2,"system-label",16),i.qZA())}let b=(()=>{class GlobalNavigationTabbedMenuTab{constructor(e,t,s){this.navigation=e,this.language=t,this.elementRef=s}get isActive(){if(this.object.id==this.navigation.activeTab)return!0;let e=this.navigation.getTabById(this.navigation.activeTab);return!(!e||!e.parentid||this.object.id!=e.parentid)}setActive(){this.navigation.setActiveTab(this.object.id)}closetab(){this.navigation.closeObjectTab(this.object.id)}get pinned(){return this.object.pinned}pintab(){this.object.pinned=!this.object.pinned}get tabname(){return this.object.displayname?this.object.displayname:void 0}get tabmodule(){return this.object.displaymodule?this.object.displaymodule:void 0}get tabicon(){return this.object.displayicon?this.object.displayicon:void 0}}return GlobalNavigationTabbedMenuTab.ɵfac=function(e){return new(e||GlobalNavigationTabbedMenuTab)(i.Y36(n.G),i.Y36(l.d),i.Y36(i.SBq))},GlobalNavigationTabbedMenuTab.ɵcmp=i.Xpm({type:GlobalNavigationTabbedMenuTab,selectors:[["global-navigation-tabbed-menu-tab"]],hostVars:6,hostBindings:function(e,t){2&e&&i.ekj("slds-context-bar__item",1)("slds-context-bar__item_tab",1)("slds-is-active",t.isActive)},inputs:{object:"object"},decls:11,vars:3,consts:[[1,"slds-context-bar__item"],["href","javascript:void(0);",1,"slds-context-bar__label-action","slds-scrollable--none",3,"click"],[1,"slds-grid","slds-grid--vertical-align-center"],[4,"ngIf","ngIfElse"],["tabloading",""],[1,"slds-context-bar__icon-action"],["system-title","LBL_PIN_TAB",1,"slds-button","slds-button_icon","slds-button_icon-container","slds-button_icon-x-small","slds-m-around--none",3,"click"],[3,"icon"],["aria-haspopup","true","system-title","LBL_CLOSE_TAB",1,"slds-button","slds-button_icon","slds-button_icon-container","slds-button_icon-x-small","slds-m-around--none",3,"click"],["icon","close"],["size","x-small","class","slds-p-right--x-small",3,"icon",4,"ngIf"],["size","x-small","divClass","slds-p-right--x-small",3,"module",4,"ngIf"],[1,"slds-truncate",2,"white-space","nowrap"],["size","x-small",1,"slds-p-right--x-small",3,"icon"],["size","x-small","divClass","slds-p-right--x-small",3,"module"],["size","10",1,"slds-p-right--x-small"],["label","LBL_LOADING"]],template:function(e,t){if(1&e&&(i.TgZ(0,"div",0)(1,"a",1),i.NdJ("click",(function(){return t.setActive()})),i.TgZ(2,"div",2),i.YNc(3,p,5,3,"ng-container",3),i.YNc(4,f,3,0,"ng-template",null,4,i.W1O),i.qZA()(),i.TgZ(6,"div",5)(7,"button",6),i.NdJ("click",(function(){return t.pintab()})),i._UZ(8,"system-button-icon",7),i.qZA(),i.TgZ(9,"button",8),i.NdJ("click",(function(){return t.closetab()})),i._UZ(10,"system-button-icon",9),i.qZA()()()),2&e){const e=i.MAs(5);i.xp6(3),i.Q6J("ngIf",t.tabname)("ngIfElse",e),i.xp6(5),i.Q6J("icon",t.pinned?"pinned":"pin")}},dependencies:[o.O5,a.S,d.J,r.f,c._,u.W,m.r],encapsulation:2}),GlobalNavigationTabbedMenuTab})()},26:(e,t,s)=>{"use strict";s.d(t,{K:()=>f});var i=s(1571),n=s(2032),l=s(5329),o=s(6895),a=s(5681),d=s(2656),r=s(4561),c=s(3463),u=s(8859);function m(e,t){if(1&e&&i._UZ(0,"system-utility-icon",15),2&e){const e=i.oxw().$implicit;i.Q6J("icon",e.displayicon)}}function h(e,t){if(1&e&&i._UZ(0,"system-icon",16),2&e){const e=i.oxw().$implicit;i.Q6J("module",e.displaymodule)}}const g=function(e){return{"slds-is-active":e}};function p(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"li",8)(1,"a",9),i.YNc(2,m,1,1,"system-utility-icon",10),i.YNc(3,h,1,1,"system-icon",11),i.TgZ(4,"div",12),i.NdJ("click",(function(){const t=i.CHM(e).$implicit,s=i.oxw();return i.KtG(s.setActiveTab(t.id))})),i._uU(5),i.qZA(),i.TgZ(6,"button",13),i.NdJ("click",(function(){const t=i.CHM(e).$implicit,s=i.oxw();return i.KtG(s.closeObjectTab(t.id))})),i._UZ(7,"system-button-icon",14),i.qZA()()()}if(2&e){const e=t.$implicit,s=i.oxw();i.Q6J("ngClass",i.VKq(4,g,s.isActive(e.id))),i.xp6(2),i.Q6J("ngIf",e.displayicon),i.xp6(1),i.Q6J("ngIf",e.displaymodule),i.xp6(2),i.Oqu(e.displayname)}}let f=(()=>{class GlobalNavigationTabbedMoreTab{constructor(e,t,s){this.navigation=e,this.language=t,this.elementRef=s,this.moreObjects=[]}get tabWidth(){return this.elementRef.nativeElement.getBoundingClientRect().width}setActiveTab(e){this.navigation.setActiveTab(e)}closeObjectTab(e){this.navigation.closeObjectTab(e)}isActive(e){if(e==this.navigation.activeTab)return!0;let t=this.navigation.getTabById(this.navigation.activeTab);return!(!t||!t.parentid||e!=t.parentid)}get activeItem(){let e=this.navigation.activeTabObject;return!!this.moreObjects.find((t=>t.active||e&&e?.parentid==t.id))}}return GlobalNavigationTabbedMoreTab.ɵfac=function(e){return new(e||GlobalNavigationTabbedMoreTab)(i.Y36(n.G),i.Y36(l.d),i.Y36(i.SBq))},GlobalNavigationTabbedMoreTab.ɵcmp=i.Xpm({type:GlobalNavigationTabbedMoreTab,selectors:[["global-navigation-tabbed-more-tab"]],hostVars:4,hostBindings:function(e,t){2&e&&i.ekj("slds-context-bar__item",1)("slds-is-active",t.activeItem)},decls:9,vars:2,consts:[["system-dropdown-trigger","",1,"slds-context-bar__item","slds-context-bar__dropdown-trigger","slds-dropdown-trigger","slds-dropdown-trigger_click"],["aria-haspopup","true",1,"slds-context-bar__label-action"],["title","More Tabs",1,"slds-truncate"],["label","LBL_MORE"],["icon","chevrondown",1,"slds-p-left--x-small"],[1,"slds-dropdown","slds-dropdown_right"],["role","menu",1,"slds-dropdown__list"],["class","slds-dropdown__item slds-nav-vertical__item","role","presentation",3,"ngClass",4,"ngFor","ngForOf"],["role","presentation",1,"slds-dropdown__item","slds-nav-vertical__item",3,"ngClass"],["href","javascript:void(0);","role","menuitem"],["size","x-small","class","slds-p-right--x-small",3,"icon",4,"ngIf"],["size","x-small","divClass","slds-p-right--x-small",3,"module",4,"ngIf"],[1,"slds-grow",3,"click"],["aria-haspopup","true",1,"slds-button","slds-button_icon","slds-button_icon-container","slds-button_icon-x-small","slds-m-around--none",3,"click"],["icon","close"],["size","x-small",1,"slds-p-right--x-small",3,"icon"],["size","x-small","divClass","slds-p-right--x-small",3,"module"]],template:function(e,t){1&e&&(i.TgZ(0,"div",0)(1,"div",1)(2,"span",2),i._UZ(3,"system-label",3),i._uU(4),i.qZA(),i._UZ(5,"system-button-icon",4),i.qZA(),i.TgZ(6,"div",5)(7,"ul",6),i.YNc(8,p,8,6,"li",7),i.qZA()()()),2&e&&(i.xp6(4),i.hij(" (",t.moreObjects.length,")"),i.xp6(4),i.Q6J("ngForOf",t.moreObjects))},dependencies:[o.mk,o.sg,o.O5,a.l,d.J,r.f,c._,u.r],encapsulation:2}),GlobalNavigationTabbedMoreTab})()},8208:(e,t,s)=>{"use strict";s.d(t,{T:()=>v});var i=s(1571),n=s(4154),l=s(5329),o=s(2032),a=s(6895),d=s(151),r=s(2656),c=s(4561),u=s(3463),m=s(4664),h=s(8859);function g(e,t){if(1&e&&i._UZ(0,"system-utility-icon",8),2&e){const e=i.oxw(2);i.Q6J("icon",e.tabicon)}}function p(e,t){if(1&e&&i._UZ(0,"system-icon",9),2&e){const e=i.oxw(2);i.Q6J("module",e.tabmodule)}}function f(e,t){if(1&e&&(i.ynx(0),i.YNc(1,g,1,1,"system-utility-icon",6),i.YNc(2,p,1,1,"system-icon",7),i.TgZ(3,"div"),i._uU(4),i.qZA(),i.BQk()),2&e){const e=i.oxw();i.xp6(1),i.Q6J("ngIf",e.tabicon),i.xp6(1),i.Q6J("ngIf",e.tabmodule),i.xp6(2),i.Oqu(e.tabname)}}function b(e,t){1&e&&(i._UZ(0,"system-spinner",10),i.TgZ(1,"div"),i._UZ(2,"system-label",11),i.qZA())}function _(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"div",12)(1,"button",13),i.NdJ("click",(function(){i.CHM(e);const t=i.oxw();return i.KtG(t.pintab())})),i._UZ(2,"system-button-icon",14),i.qZA(),i.TgZ(3,"button",15),i.NdJ("click",(function(){i.CHM(e);const t=i.oxw();return i.KtG(t.closeSubTab())})),i._UZ(4,"system-button-icon",16),i.qZA()()}if(2&e){const e=i.oxw();i.xp6(2),i.Q6J("icon",e.pinned?"pinned":"pin")}}const y=function(e,t){return{"slds-active":e,"slds-border--left":t}};let v=(()=>{class GlobalNavigationTabbedSubtabItem{constructor(e,t,s,i){this.metadata=e,this.language=t,this.navigation=s,this.elementRef=i,this.ismain=!1}get tabname(){return this.object?.displayname?this.object.displayname:void 0}get tabmodule(){return this.object?.displaymodule?this.object.displaymodule:void 0}get tabicon(){return this.object?.displayicon?this.object.displayicon:void 0}get isActive(){return this.object&&this.object.id==this.navigation.activeTab}setActive(){this.navigation.setActiveTab(this.object.id)}closeSubTab(){this.navigation.closeObjectTab(this.object.id)}get pinned(){return this.object.pinned}pintab(){this.object.pinned=!this.object.pinned}}return GlobalNavigationTabbedSubtabItem.ɵfac=function(e){return new(e||GlobalNavigationTabbedSubtabItem)(i.Y36(n.Pu),i.Y36(l.d),i.Y36(o.G),i.Y36(i.SBq))},GlobalNavigationTabbedSubtabItem.ɵcmp=i.Xpm({type:GlobalNavigationTabbedSubtabItem,selectors:[["global-navigation-tabbed-subtab-item"]],inputs:{object:"object",ismain:"ismain"},decls:7,vars:7,consts:[["role","presentation",1,"slds-tabs_default__item","slds-sub-tabs__item","slds-grid","slds-grid_vertical-align-center",3,"ngClass"],["href","javascript:void(0);","role","tab",1,"slds-tabs_default__link","slds-p-horizontal_xx-small",3,"click"],[1,"slds-truncate","slds-grid","slds-grid--vertical-align-center"],[4,"ngIf","ngIfElse"],["tabloading",""],["class","slds-col_bump-left slds-p-left_none slds-p-right_none slds-grid",4,"ngIf"],["size","x-small","class","slds-p-right--x-small",3,"icon",4,"ngIf"],["size","x-small","divClass","slds-p-right--x-small",3,"module",4,"ngIf"],["size","x-small",1,"slds-p-right--x-small",3,"icon"],["size","x-small","divClass","slds-p-right--x-small",3,"module"],["size","10",1,"slds-p-right--x-small"],["label","LBL_LOADING"],[1,"slds-col_bump-left","slds-p-left_none","slds-p-right_none","slds-grid"],["system-title","LBL_PIN_TAB",1,"slds-button","slds-button_icon","slds-button_icon-container","slds-button_icon-x-small","slds-m-around--none",3,"click"],[3,"icon"],["tabindex","0","system-title","LBL_CLOSE_TAB",1,"slds-button","slds-button_icon","slds-button_icon-container","slds-button_icon-x-small",3,"click"],["icon","close"]],template:function(e,t){if(1&e&&(i.TgZ(0,"li",0)(1,"a",1),i.NdJ("click",(function(){return t.setActive()})),i.TgZ(2,"div",2),i.YNc(3,f,5,3,"ng-container",3),i.YNc(4,b,3,0,"ng-template",null,4,i.W1O),i.qZA()(),i.YNc(6,_,5,1,"div",5),i.qZA()),2&e){const e=i.MAs(5);i.Q6J("ngClass",i.WLB(4,y,t.isActive,!t.ismain)),i.xp6(3),i.Q6J("ngIf",t.tabname)("ngIfElse",e),i.xp6(3),i.Q6J("ngIf",!t.ismain)}},dependencies:[a.mk,a.O5,d.S,r.J,c.f,u._,m.W,h.r],encapsulation:2}),GlobalNavigationTabbedSubtabItem})()},3850:(e,t,s)=>{"use strict";s.d(t,{_:()=>h});var i=s(26),n=s(1571),l=s(6895),o=s(5681),a=s(2656),d=s(4561),r=s(3463);function c(e,t){if(1&e&&n._UZ(0,"system-icon",15),2&e){const e=n.oxw().$implicit;n.Q6J("module",e.displaymodule)}}const u=function(e){return{"slds-is-active":e}};function m(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"li",9)(1,"a",10),n.YNc(2,c,1,1,"system-icon",11),n.TgZ(3,"div",12),n.NdJ("click",(function(){const t=n.CHM(e).$implicit,s=n.oxw();return n.KtG(s.setActiveTab(t.id))})),n._uU(4),n.qZA(),n.TgZ(5,"button",13),n.NdJ("click",(function(){const t=n.CHM(e).$implicit,s=n.oxw();return n.KtG(s.closeObjectTab(t.id))})),n._UZ(6,"system-button-icon",14),n.qZA()()()}if(2&e){const e=t.$implicit,s=n.oxw();n.Q6J("ngClass",n.VKq(3,u,s.isActive(e.id))),n.xp6(2),n.Q6J("ngIf",e.displaymodule),n.xp6(2),n.Oqu(e.displayname)}}let h=(()=>{class GlobalNavigationTabbedSubTabMoreTab extends i.K{get moreActive(){let e=!1;return this.moreObjects.some((t=>{if(t.active)return e=!0,!0})),e}}return GlobalNavigationTabbedSubTabMoreTab.ɵfac=function(){let e;return function(t){return(e||(e=n.n5z(GlobalNavigationTabbedSubTabMoreTab)))(t||GlobalNavigationTabbedSubTabMoreTab)}}(),GlobalNavigationTabbedSubTabMoreTab.ɵcmp=n.Xpm({type:GlobalNavigationTabbedSubTabMoreTab,selectors:[["global-navigation-tabbed-sub-tab-more-tab"]],features:[n.qOj],decls:11,vars:5,consts:[["role","presentation","system-dropdown-trigger","",1,"slds-tabs_default__item","slds-sub-tabs__item","slds-grid","slds-grid_vertical-align-center","slds-dropdown-trigger","slds-dropdown-trigger_click","slds-border--left",3,"ngClass"],["href","javascript:void(0);","role","tab",1,"slds-tabs_default__link","slds-p-horizontal_xx-small"],["label","LBL_MORE"],[1,"slds-col_bump-left","slds-p-left_none","slds-p-right_none"],["tabindex","0",1,"slds-button","slds-button_icon","slds-button_icon-container","slds-button_icon-x-small"],["icon","chevrondown"],[1,"slds-dropdown","slds-dropdown_right"],["role","menu",1,"slds-dropdown__list"],["class","slds-dropdown__item slds-nav-vertical__item","role","presentation",3,"ngClass",4,"ngFor","ngForOf"],["role","presentation",1,"slds-dropdown__item","slds-nav-vertical__item",3,"ngClass"],["href","javascript:void(0);","role","menuitem"],["size","x-small","divClass","slds-p-right--x-small",3,"module",4,"ngIf"],[1,"slds-grow",3,"click"],["aria-haspopup","true",1,"slds-button","slds-button_icon","slds-button_icon-container","slds-button_icon-x-small","slds-m-around--none",3,"click"],["icon","close"],["size","x-small","divClass","slds-p-right--x-small",3,"module"]],template:function(e,t){1&e&&(n.TgZ(0,"li",0)(1,"a",1)(2,"div"),n._UZ(3,"system-label",2),n._uU(4),n.qZA()(),n.TgZ(5,"div",3)(6,"button",4),n._UZ(7,"system-button-icon",5),n.qZA()(),n.TgZ(8,"div",6)(9,"ul",7),n.YNc(10,m,7,5,"li",8),n.qZA()()()),2&e&&(n.Q6J("ngClass",n.VKq(3,u,t.moreActive)),n.xp6(4),n.hij(" (",t.moreObjects.length,")"),n.xp6(6),n.Q6J("ngForOf",t.moreObjects))},dependencies:[l.mk,l.sg,l.O5,o.l,a.J,d.f,r._],encapsulation:2}),GlobalNavigationTabbedSubTabMoreTab})()},3861:(e,t,s)=>{"use strict";s.d(t,{_:()=>m});var i=s(8208),n=s(3850),l=s(727),o=s(1571),a=s(4154),d=s(5329),r=s(2032),c=s(6895);function u(e,t){if(1&e&&o._UZ(0,"global-navigation-tabbed-subtab-item",3),2&e){const e=t.$implicit;o.Q6J("object",e)}}let m=(()=>{class GlobalNavigationTabbedSubtabs{constructor(e,t,s,i,n){this.metadata=e,this.language=t,this.navigation=s,this.elementRef=i,this.ngZone=n,this.subscriptions=new l.w0,this.stable=!0,this.subscriptions.add(this.navigation.objectTabsChange$.subscribe((e=>{window.setTimeout((()=>{this.handleResize()}))})))}ngOnDestroy(){this.subscriptions.unsubscribe()}get subtabs(){return this.navigation.getSubTabs(this.parenttab?.id).sort(((e,t)=>e.pinned&&t.pinned||!e.pinned&&!t.pinned?0:e.pinned?-1:t.pinned?1:void 0))}trackByFn(e,t){return t.id}handleResize(){let e=this.elementRef.nativeElement.getBoundingClientRect().left,t=window.innerWidth-e;this.subMenuMore.elementRef.nativeElement.classList.remove("slds-hide"),this.subMenuMore.elementRef.nativeElement.classList.add("slds-hidden"),this.subMenuMore.moreObjects=[];let s=this.subMenuMore.tabWidth;this.subMenuTabs.forEach((e=>{e.elementRef.nativeElement.classList.remove("slds-hide"),e.elementRef.nativeElement.classList.add("slds-hidden")}));let i=0,n=!1;return this.subMenuTabs.forEach(((e,l)=>{let o=e.elementRef.nativeElement.getBoundingClientRect().width;i+=o,(n||l+1==this.subMenuTabs.length&&i>t||l+1<this.subMenuTabs.length&&i>t-s)&&(e.elementRef.nativeElement.classList.add("slds-hide"),n=!0,this.subMenuMore.moreObjects.push(e.object)),e.elementRef.nativeElement.classList.remove("slds-hidden")})),n?this.subMenuMore.elementRef.nativeElement.classList.remove("slds-hidden"):this.subMenuMore.elementRef.nativeElement.classList.add("slds-hide"),!0}}return GlobalNavigationTabbedSubtabs.ɵfac=function(e){return new(e||GlobalNavigationTabbedSubtabs)(o.Y36(a.Pu),o.Y36(d.d),o.Y36(r.G),o.Y36(o.SBq),o.Y36(o.R0b))},GlobalNavigationTabbedSubtabs.ɵcmp=o.Xpm({type:GlobalNavigationTabbedSubtabs,selectors:[["global-navigation-tabbed-subtabs"]],viewQuery:function(e,t){if(1&e&&(o.Gf(n._,5),o.Gf(i.T,5)),2&e){let e;o.iGM(e=o.CRH())&&(t.subMenuMore=e.first),o.iGM(e=o.CRH())&&(t.subMenuTabs=e)}},hostBindings:function(e,t){1&e&&o.NdJ("resize",(function(){return t.handleResize()}),!1,o.Jf7)},inputs:{parenttab:"parenttab"},decls:4,vars:4,consts:[["role","tablist",1,"slds-tabs_default__nav"],[3,"object","ismain"],[3,"object",4,"ngFor","ngForOf","ngForTrackBy"],[3,"object"]],template:function(e,t){1&e&&(o.TgZ(0,"ul",0),o._UZ(1,"global-navigation-tabbed-subtab-item",1),o.YNc(2,u,1,1,"global-navigation-tabbed-subtab-item",2),o._UZ(3,"global-navigation-tabbed-sub-tab-more-tab"),o.qZA()),2&e&&(o.xp6(1),o.Q6J("object",t.parenttab)("ismain",!0),o.xp6(1),o.Q6J("ngForOf",t.subtabs)("ngForTrackBy",t.trackByFn))},dependencies:[c.sg,i.T,n._],encapsulation:2}),GlobalNavigationTabbedSubtabs})()},595:(e,t,s)=>{"use strict";s.d(t,{T:()=>c});var i=s(1571),n=s(529),l=s(6895),o=s(4664),a=s(2790);function d(e,t){1&e&&(i.TgZ(0,"div",3),i._UZ(1,"system-spinner"),i.qZA())}function r(e,t){if(1&e&&i._UZ(0,"global-newsfeed-item",4),2&e){const e=t.$implicit;i.Q6J("item",e)}}let c=(()=>{class GlobalNewsFeed{constructor(e){this.http=e,this.news=[],this.isLoading=!0,this.loadNewsFeed()}loadNewsFeed(){let e=btoa("https://www.spicecrm.com/wp-json/wp/v2/posts?context=embed");this.http.get("proxy?useurl="+e).subscribe((e=>{this.news=e,this.isLoading=!1}))}}return GlobalNewsFeed.ɵfac=function(e){return new(e||GlobalNewsFeed)(i.Y36(n.eN))},GlobalNewsFeed.ɵcmp=i.Xpm({type:GlobalNewsFeed,selectors:[["global-newsfeed"]],decls:3,vars:2,consts:[[1,"slds-p-around--medium","slds-theme--shade","slds-scrollable--y",2,"height","100vh"],["class","slds-align--absolute-center slds-height_full",4,"ngIf"],[3,"item",4,"ngFor","ngForOf"],[1,"slds-align--absolute-center","slds-height_full"],[3,"item"]],template:function(e,t){1&e&&(i.TgZ(0,"div",0),i.YNc(1,d,2,0,"div",1),i.YNc(2,r,1,1,"global-newsfeed-item",2),i.qZA()),2&e&&(i.xp6(1),i.Q6J("ngIf",t.isLoading),i.xp6(1),i.Q6J("ngForOf",t.news))},dependencies:[l.sg,l.O5,o.W,a.c],encapsulation:2}),GlobalNewsFeed})()},2790:(e,t,s)=>{"use strict";s.d(t,{c:()=>l});var i=s(1571),n=s(34);let l=(()=>{class GlobalNewsFeedItem{constructor(){this.item={}}getDate(){return moment(this.item.date).fromNow()}getExcerpt(){return this.item.excerpt.rendered.replace("<a",'<a target="_blank"')}}return GlobalNewsFeedItem.ɵfac=function(e){return new(e||GlobalNewsFeedItem)},GlobalNewsFeedItem.ɵcmp=i.Xpm({type:GlobalNewsFeedItem,selectors:[["global-newsfeed-item"]],inputs:{item:"item"},decls:10,vars:4,consts:[[1,"slds-card","slds-m-bottom--medium"],[1,"slds-card__header"],[1,"slds-grid","slds-grid_vertical-align-center"],["icon","wordpress","size","small"],[1,"slds-text-heading--medium","slds-truncate"],["target","_blank",3,"innerHTML"],[1,"slds-card__body","slds-p-vertical--xx-small","slds-p-horizontal--small"],[1,"slds-card__body--inner","slds-grid","slds-wrap","slds-grid--pull-padded",2,"text-align","justify",3,"innerHTML"],[1,"slds-card__footer"]],template:function(e,t){1&e&&(i.TgZ(0,"article",0)(1,"div",1)(2,"div",2),i._UZ(3,"system-custom-icon",3),i.TgZ(4,"h2",4),i._UZ(5,"a",5),i.qZA()()(),i.TgZ(6,"div",6),i._UZ(7,"div",7),i.qZA(),i.TgZ(8,"div",8),i._uU(9),i.qZA()()),2&e&&(i.xp6(5),i.Q6J("innerHTML",t.item.title.rendered,i.oJD),i.uIk("href",t.item.link,i.LSH),i.xp6(2),i.Q6J("innerHTML",t.getExcerpt(),i.oJD),i.xp6(2),i.Oqu(t.getDate()))},dependencies:[n.$],encapsulation:2}),GlobalNewsFeedItem})()},2401:(e,t,s)=>{"use strict";s.d(t,{x:()=>g});var i=s(1571),n=s(4461),l=s(7774),o=s(5920),a=s(2422),d=s(6895),r=s(8859),c=s(5651);function u(e,t){1&e&&(i.TgZ(0,"span",4),i._UZ(1,"system-utility-icon",5),i.qZA())}function m(e,t){if(1&e&&i._UZ(0,"img",6),2&e){const e=i.oxw();i.Q6J("src",e.userimage,i.LSH)}}function h(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"global-user-panel",7),i.NdJ("closepopup",(function(){i.CHM(e);const t=i.oxw();return i.KtG(t.closepopup())})),i.qZA()}}let g=(()=>{class GlobalUser{constructor(e,t,s,i,n,l){this.loginService=e,this.router=t,this.elementRef=s,this.renderer=i,this.session=n,this.userpreferences=l,this.hideUserDetails=!0}toggleUserDetails(){this.hideUserDetails=!this.hideUserDetails,this.hideUserDetails?this.clickListener&&this.clickListener():this.clickListener=this.renderer.listen("document","click",(e=>this.onClick(e)))}closepopup(){this.hideUserDetails=!0}onClick(e){this.elementRef.nativeElement.contains(e.target)||(this.hideUserDetails=!0,this.clickListener())}get userimage(){return this.session.authData.user.user_image}}return GlobalUser.ɵfac=function(e){return new(e||GlobalUser)(i.Y36(n.j),i.Y36(l.F0),i.Y36(i.SBq),i.Y36(i.Qsj),i.Y36(o.n),i.Y36(a.z))},GlobalUser.ɵcmp=i.Xpm({type:GlobalUser,selectors:[["global-user"]],decls:4,vars:3,consts:[["aria-haspopup","true",1,"slds-button",2,"min-width","32px",3,"click"],["class","slds-icon_container slds-icon-standard-empty slds-icon_container--circle",4,"ngIf"],["style","height: 32px; width: 32px",3,"src",4,"ngIf"],["class","slds-is-absolute",3,"closepopup",4,"ngIf"],[1,"slds-icon_container","slds-icon-standard-empty","slds-icon_container--circle"],["icon","user","size","x-small","addclasses","slds-icon","colorclass",""],[2,"height","32px","width","32px",3,"src"],[1,"slds-is-absolute",3,"closepopup"]],template:function(e,t){1&e&&(i.TgZ(0,"button",0),i.NdJ("click",(function(){return t.toggleUserDetails()})),i.YNc(1,u,2,0,"span",1),i.YNc(2,m,1,1,"img",2),i.qZA(),i.YNc(3,h,1,0,"global-user-panel",3)),2&e&&(i.xp6(1),i.Q6J("ngIf",!t.userimage),i.xp6(1),i.Q6J("ngIf",t.userimage),i.xp6(1),i.Q6J("ngIf",!t.hideUserDetails))},dependencies:[d.O5,r.r,c.Y],encapsulation:2}),GlobalUser})()},5651:(e,t,s)=>{"use strict";s.d(t,{Y:()=>A});var i=s(1571),n=s(4461),l=s(5920),o=s(7774),a=s(4154),d=s(4505),r=s(6625),c=s(4044),u=s(2422),m=s(3278),h=s(2222),g=s(6895),p=s(433),f=s(151),b=s(7514),_=s(3463),y=s(2892),v=s(8859),x=s(6449),Z=s(7723);function w(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"li",6)(1,"a",7),i.NdJ("click",(function(){i.CHM(e);const t=i.oxw();return i.KtG(t.changePassword())})),i._UZ(2,"system-label",23),i.qZA()()}}function T(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"div",24)(1,"system-checkbox",25),i.NdJ("ngModelChange",(function(t){i.CHM(e);const s=i.oxw();return i.KtG(s.developermode=t)})),i._UZ(2,"system-label",26),i.qZA()()}if(2&e){const e=i.oxw();i.xp6(1),i.Q6J("disabled",!e.canSetDeveloperMode)("ngModel",e.developermode)}}function C(e,t){1&e&&i._UZ(0,"system-utility-icon",27)}let A=(()=>{class GlobaUserPanel{constructor(e,t,s,n,l,o,a,d,r,c){this.loginService=e,this.session=t,this.router=s,this.metadata=n,this.backend=l,this.config=o,this.modal=a,this.userprefs=d,this.toast=r,this.socket=c,this.closepopup=new i.vpe}logoff(){this.loginService.logout()}changeImage(){this.modal.openModal("SystemUploadImage").subscribe((e=>{e.instance.cropheight=150,e.instance.cropwidth=150,e.instance.imagedata.subscribe((e=>{if(!1!==e){let t=this.session.authData.user.user_image;this.session.authData.user.user_image="",this.backend.postRequest("module/Users/"+this.session.authData.userId+"/image",{},{imagedata:e}).subscribe((t=>{this.session.authData.user.user_image=e}),(e=>{this.session.authData.user.user_image=t}))}}))}))}get displayName(){return this.session.authData.user.full_name?this.session.authData.user.full_name:this.session.authData.userName}get userName(){return this.session.authData.userName}get systemName(){return this.session.authData.tenant_name?this.session.authData.tenant_name:this.config.systemName}get canChangePassword(){return this.session.authData.canchangepassword}goDetails(){this.router.navigate(["/module/Users/"+this.session.authData.userId]),this.close()}changePassword(){this.canChangePassword&&this.modal.openModal("UserChangePasswordModal")}get userimage(){return this.session.authData.user.user_image}get displayDeveloperMode(){return this.session.authData.admin&&"0"!=this.config.data.systemparameters.developermode&&!1!==this.config.data.systemparameters.developermode}get canSetDeveloperMode(){return"2"==this.config.data.systemparameters.developermode}get developermode(){return"1"==this.config.data.systemparameters.developermode||!0===this.config.data.systemparameters.developermode||this.canSetDeveloperMode&&this.session.developerMode}set developermode(e){this.canSetDeveloperMode&&(this.session.developerMode=e)}set currentTz(e){this.userprefs.unchangedPreferences.global&&this.userprefs.unchangedPreferences.global.timezone===e||(this.userprefs.setPreference("timezone",e,!0).subscribe((e=>{this.toast.sendToast('Timezone set successfully to "'+e.timezone+'".',"success")}),(e=>{this.toast.sendToast("Error setting timezone.","error")})),this.session.setTimezone(e),this.close())}get currentTz(){return this.userprefs.unchangedPreferences&&this.userprefs.unchangedPreferences.global?this.userprefs.unchangedPreferences.global.timezone:""}close(){this.closepopup.emit(!0)}}return GlobaUserPanel.ɵfac=function(e){return new(e||GlobaUserPanel)(i.Y36(n.j),i.Y36(l.n),i.Y36(o.F0),i.Y36(a.Pu),i.Y36(d.y),i.Y36(r.C),i.Y36(c.o),i.Y36(u.z),i.Y36(m.A),i.Y36(h.W))},GlobaUserPanel.ɵcmp=i.Xpm({type:GlobaUserPanel,selectors:[["global-user-panel"]],outputs:{closepopup:"closepopup"},decls:26,vars:7,consts:[[1,"slds-is-fixed","slds-box--border","slds-dropdown","slds-dropdown--right","slds-m-right--small","slds-m-top--medium"],[1,"slds-grid","slds-p-around--small","slds-grid--vertical-align-center"],[1,"slds-m-left--small"],[1,"slds-text-heading--medium",3,"title"],[1,"slds-theme--shade","slds-p-around--small","slds-border--top","slds-border--bottom"],[1,"slds-list--horizontal","slds-has-dividers--left"],[1,"slds-item"],["href","javascript:void(0);",1,"slds-text-link--reset",3,"click"],["label","LBL_DETAILS"],["class","slds-item",4,"ngIf"],[1,"slds-p-around--small","slds-form--stacked"],[3,"selected"],[1,"slds-form-element"],[1,"slds-form-element__label"],["label","LBL_SELECT_TIMEZONE"],[3,"ngModel","ngModelChange"],["class","slds-p-top--small",4,"ngIf"],[1,"slds-theme--shade","slds-p-around--x-small","slds-grid"],[1,"slds-grid","slds-grid--vertical-align-center"],["class","slds-p-right--xx-small","size","xx-small","icon","omni_channel",4,"ngIf"],["label","LBL_LOGGED_ON_SYSTEM"],[1,"slds-col--bump-left"],["icon","logout","size","x-small","system-title","LBL_LOGOFF",3,"click"],["label","LBL_CHANGE_PASSWORD"],[1,"slds-p-top--small"],[3,"disabled","ngModel","ngModelChange"],["label","LBL_DEVELOPER_MODE"],["size","xx-small","icon","omni_channel",1,"slds-p-right--xx-small"]],template:function(e,t){1&e&&(i.TgZ(0,"div",0)(1,"div",1),i._UZ(2,"global-user-panel-icon"),i.TgZ(3,"div",2)(4,"h1",3),i._uU(5),i.qZA()()(),i.TgZ(6,"div",4)(7,"ul",5)(8,"li",6)(9,"a",7),i.NdJ("click",(function(){return t.goDetails()})),i._UZ(10,"system-label",8),i.qZA()(),i.YNc(11,w,3,0,"li",9),i.qZA()(),i.TgZ(12,"div",10)(13,"system-language-selector",11),i.NdJ("selected",(function(){return t.close()})),i.qZA(),i.TgZ(14,"div",12)(15,"label",13),i._UZ(16,"system-label",14),i.qZA(),i.TgZ(17,"system-input-timezone",15),i.NdJ("ngModelChange",(function(e){return t.currentTz=e})),i.qZA()(),i.YNc(18,T,3,2,"div",16),i.qZA(),i.TgZ(19,"div",17)(20,"div",18),i.YNc(21,C,1,0,"system-utility-icon",19),i._UZ(22,"system-label",20),i._uU(23),i.qZA(),i.TgZ(24,"div",21)(25,"system-utility-icon",22),i.NdJ("click",(function(){return t.logoff()})),i.qZA()()()()),2&e&&(i.xp6(4),i.Q6J("title",t.userName),i.xp6(1),i.Oqu(t.displayName),i.xp6(6),i.Q6J("ngIf",t.canChangePassword),i.xp6(6),i.Q6J("ngModel",t.currentTz),i.xp6(1),i.Q6J("ngIf",t.displayDeveloperMode),i.xp6(3),i.Q6J("ngIf",t.socket.connected),i.xp6(2),i.hij(": ",t.systemName," "))},dependencies:[g.O5,p.JJ,p.On,f.S,b.U,_._,y.M,v.r,x.R,Z.V],encapsulation:2}),GlobaUserPanel})()},7723:(e,t,s)=>{"use strict";s.d(t,{V:()=>u});var i=s(1571),n=s(5920),l=s(4044),o=s(4505),a=s(6895),d=s(8859);function r(e,t){1&e&&(i.TgZ(0,"span",6),i._UZ(1,"system-utility-icon",7),i.qZA())}function c(e,t){if(1&e&&i._UZ(0,"img",8),2&e){const e=i.oxw();i.Q6J("src",e.userimage,i.LSH)}}let u=(()=>{class GlobaUserPanelIcon{constructor(e,t,s){this.session=e,this.modalservice=t,this.backend=s,this.showEdit=!1}changeImage(){this.modalservice.openModal("SystemUploadImage").subscribe((e=>{e.instance.cropheight=150,e.instance.cropwidth=150,e.instance.imagedata.subscribe((e=>{if(!1!==e){let t=this.session.authData.user.user_image;this.session.authData.user.user_image="",this.backend.postRequest("module/Users/"+this.session.authData.userId+"/image",{},{imagedata:e}).subscribe((t=>{this.session.authData.user.user_image=e}),(e=>{this.session.authData.user.user_image=t}))}}))}))}get editstyle(){return{opacity:this.showEdit?1:0}}get userimage(){return this.session.authData.user.user_image}onMouseEnter(){this.showEdit=!0}onMouseLeave(){this.showEdit=!1}}return GlobaUserPanelIcon.ɵfac=function(e){return new(e||GlobaUserPanelIcon)(i.Y36(n.n),i.Y36(l.o),i.Y36(o.y))},GlobaUserPanelIcon.ɵcmp=i.Xpm({type:GlobaUserPanelIcon,selectors:[["global-user-panel-icon"]],decls:7,vars:3,consts:[[1,"slds-is-relative",3,"mouseenter","mouseleave"],["class","slds-icon_container slds-icon-standard-empty slds-icon_container--circle","style","width:40px;height:40px;",4,"ngIf"],["style","height: 40px; width: 40px",3,"src",4,"ngIf"],[1,"slds-is-absolute__top","slds-align--absolute-center",2,"transition",".5s","height","40px","width","40px",3,"ngStyle","click"],[1,"slds-is-absolute__top",2,"background","white","height","40px","width","40px","opacity",".7"],["icon","edit","size","x-small",2,"z-index","1"],[1,"slds-icon_container","slds-icon-standard-empty","slds-icon_container--circle",2,"width","40px","height","40px"],["icon","user","size","small","addclasses","slds-icon","colorclass",""],[2,"height","40px","width","40px",3,"src"]],template:function(e,t){1&e&&(i.TgZ(0,"div",0),i.NdJ("mouseenter",(function(){return t.onMouseEnter()}))("mouseleave",(function(){return t.onMouseLeave()})),i.TgZ(1,"div"),i.YNc(2,r,2,0,"span",1),i.YNc(3,c,1,1,"img",2),i.qZA(),i.TgZ(4,"div",3),i.NdJ("click",(function(){return t.changeImage()})),i._UZ(5,"div",4)(6,"system-utility-icon",5),i.qZA()()),2&e&&(i.xp6(2),i.Q6J("ngIf",!t.userimage),i.xp6(1),i.Q6J("ngIf",t.userimage),i.xp6(1),i.Q6J("ngStyle",t.editstyle))},dependencies:[a.O5,a.PC,d.r],encapsulation:2}),GlobaUserPanelIcon})()},3283:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalComponents:()=>Bn});var i=s(6895),n=s(433),l=s(4357),o=s(3121),a=s(4518),d=s(5478),r=s(1977),c=s(48),u=s(2552),m=s(6558),h=s(141),g=s(6115),p=s(5650),f=s(3838),b=s(4373),y=s(7283),v=s(1571),x=s(5920),Z=s(4154),w=s(5329),T=s(151),C=s(3463),A=s(8859);const k=["actioncontainerheader"],L=function(e){return{"slds-is-open":e}};let M=(()=>{class GlobalHeaderActions{constructor(e,t,s,i,n){this.renderer=e,this.elementRef=t,this.session=s,this.metadata=i,this.language=n,this.isOpen=!1,this.isVisible=!1,this.isInitialized=!1}initialize(){let e=this.metadata.getComponentConfig("GlobalHeaderActions");if(e&&e.actionset){let t=this.metadata.getActionSetItems(e.actionset);for(let e of t)e.actionconfig?.module&&!this.metadata.checkModuleAcl(e.actionconfig?.module,"create")||(this.isVisible=!0,this.metadata.addComponent(e.component,this.actioncontainerheader).subscribe((t=>{t.instance.actionconfig=e.actionconfig,t.instance.closemenu&&t.instance.closemenu.subscribe((e=>{this.isOpen=!1}))})))}this.isInitialized=!0}toggleOpen(){this.isOpen=!this.isOpen,this.isOpen?(this.isInitialized||this.initialize(),this.clickListener=this.renderer.listen("document","click",(e=>this.onClick(e)))):this.clickListener&&this.clickListener()}onClick(e){this.elementRef.nativeElement.contains(e.target)||(this.isOpen=!1,this.clickListener())}}return GlobalHeaderActions.ɵfac=function(e){return new(e||GlobalHeaderActions)(v.Y36(v.Qsj),v.Y36(v.SBq),v.Y36(x.n),v.Y36(Z.Pu),v.Y36(w.d))},GlobalHeaderActions.ɵcmp=v.Xpm({type:GlobalHeaderActions,selectors:[["global-header-actions"]],viewQuery:function(e,t){if(1&e&&v.Gf(k,7,v.s_b),2&e){let e;v.iGM(e=v.CRH())&&(t.actioncontainerheader=e.first)}},decls:9,vars:5,consts:[[1,"slds-show--medium","slds-dropdown-trigger","slds-dropdown-trigger_click","slds-p-horizontal--xxx-small",3,"ngClass"],[1,"slds-p-around--xx-small",3,"click"],["system-title","LBL_ADD",3,"icon","size"],[1,"slds-is-absolute","slds-dropdown--medium","slds-dropdown","slds-dropdown_right","slds-nubbin_top-right",2,"right","-11px","top","29px"],["role","menu",1,"slds-dropdown__list"],["role","separator",1,"slds-dropdown__header"],["actioncontainerheader",""],[1,"slds-text-title_caps"],["label","LBL_CREATE"]],template:function(e,t){1&e&&(v.TgZ(0,"div",0)(1,"div",1),v.NdJ("click",(function(){return t.toggleOpen()})),v._UZ(2,"system-utility-icon",2),v.qZA(),v.TgZ(3,"div",3)(4,"ul",4)(5,"li",5,6)(7,"span",7),v._UZ(8,"system-label",8),v.qZA()()()()()),2&e&&(v.Q6J("ngClass",v.VKq(3,L,t.isOpen)),v.xp6(2),v.Q6J("icon","add")("size","x-small"))},dependencies:[i.mk,T.S,C._,A.r],encapsulation:2}),GlobalHeaderActions})();var S=s(5710),I=s(788),O=s(4561);let J=(()=>{class GlobalHeaderActionItem{constructor(e,t,s,i,n){this.session=e,this.metadata=t,this.model=s,this.language=i,this.dockedComposer=n,this.actionconfig={},this.closemenu=new v.vpe}ngOnInit(){this.actionconfig.module&&(this.model.module=this.actionconfig.module)}click(){this.dockedComposer.addComposer(this.model.module),this.closemenu.emit(!0)}get label(){return this.actionconfig.label?this.language.getLabel(this.actionconfig.label):this.language.getLabel(this.model.module,"LBL_NEW_FORM_TITLE")}}return GlobalHeaderActionItem.ɵfac=function(e){return new(e||GlobalHeaderActionItem)(v.Y36(x.n),v.Y36(Z.Pu),v.Y36(S.o),v.Y36(w.d),v.Y36(I.m))},GlobalHeaderActionItem.ɵcmp=v.Xpm({type:GlobalHeaderActionItem,selectors:[["global-header-action-item"]],features:[v._Bn([S.o])],decls:5,vars:2,consts:[["role","presentation",1,"slds-dropdown__item"],["href","javascript:void(0)",1,"slds-grid","slds-grid_vertical-align-center","slds-p-horizontal--x-small","slds-p-vertical--xx-small",3,"click"],["addclasses","'slds-icon slds-icon_small",3,"module"],[1,"slds-truncate","slds-size--1-of-1"]],template:function(e,t){1&e&&(v.TgZ(0,"li",0)(1,"a",1),v.NdJ("click",(function(){return t.click()})),v._UZ(2,"system-icon",2),v.TgZ(3,"div",3),v._uU(4),v.qZA()()()),2&e&&(v.xp6(2),v.Q6J("module",t.model.module),v.xp6(2),v.Oqu(t.label))},dependencies:[O.f],encapsulation:2}),GlobalHeaderActionItem})();var N=s(4376),F=s(2032),q=s(7774),E=s(4044),Y=s(2656);const Q=["favbutton"];function U(e,t){if(1&e){const e=v.EpF();v.TgZ(0,"li",20),v.NdJ("selected",(function(){v.CHM(e);const t=v.oxw(2);return v.KtG(t.closeFavorites())})),v.qZA()}if(2&e){const e=t.$implicit;v.Q6J("item",e)}}function D(e,t){if(1&e){const e=v.EpF();v.TgZ(0,"section",8)(1,"div",9)(2,"ul",10)(3,"li",11)(4,"div",12)(5,"h3",13),v._UZ(6,"system-label",14),v.qZA()()(),v.YNc(7,U,1,1,"li",15),v.qZA()(),v.TgZ(8,"footer",16)(9,"ul")(10,"li")(11,"button",17),v.NdJ("click",(function(){v.CHM(e);const t=v.oxw();return v.KtG(t.openEditModal())})),v._UZ(12,"system-button-icon",18)(13,"system-label",19),v.qZA()()()()()}if(2&e){const e=v.oxw();v.xp6(7),v.Q6J("ngForOf",e.favorite.favorites)}}const j=function(e){return{"slds-is-selected":e}};let R=(()=>{class GlobalHeaderFavorite{constructor(e,t,s,i,n,l,o,a){this.metadata=e,this.favorite=t,this.navigation=s,this.router=i,this.renderer=n,this.elementRef=l,this.language=o,this.modal=a,this.showFavorites=!1,this.navigation.activeTab$.subscribe((e=>this.handleNavigationChange()))}get canShowFavorites(){return this.metadata.getActiveRole().showfavorites&&"0"!=this.metadata.getActiveRole().showfavorites}get nofavorites(){return 0==this.favorite.favorites.length}handleNavigationChange(){let e=this.navigation.activeTabObject;if("main"==e.id)return this.favorite.disable();"module/:module/:id"==this.metadata.getRouteDetails(e.path.replace("tab/:tabid/","")).path?this.favorite.enable(e.params.module,e.params.id):this.favorite.disable()}toggleFavorite(){this.favorite.isFavorite?this.favorite.deleteFavorite():this.favorite.setFavorite(),this.favbutton.element.nativeElement.blur()}closeFavorites(){this.showFavorites=!1}toggleFavorites(){this.showFavorites=!this.showFavorites,this.showFavorites?this.clickListener=this.renderer.listen("document","click",(e=>this.onClick(e))):this.clickListener&&this.clickListener()}onClick(e){this.elementRef.nativeElement.contains(e.target)||(this.showFavorites=!1,this.clickListener())}openEditModal(){this.modal.openModal("SpiceFavoritesEditModal")}}return GlobalHeaderFavorite.ɵfac=function(e){return new(e||GlobalHeaderFavorite)(v.Y36(Z.Pu),v.Y36(N.G),v.Y36(F.G),v.Y36(q.F0),v.Y36(v.Qsj),v.Y36(v.SBq),v.Y36(w.d),v.Y36(E.o))},GlobalHeaderFavorite.ɵcmp=v.Xpm({type:GlobalHeaderFavorite,selectors:[["global-header-favorite"]],viewQuery:function(e,t){if(1&e&&v.Gf(Q,5,v.s_b),2&e){let e;v.iGM(e=v.CRH())&&(t.favbutton=e.first)}},decls:8,vars:6,consts:[[1,"slds-global-actions__favorites","slds-m-around--none","slds-dropdown-trigger","slds-dropdown-trigger_click"],[1,"slds-button-group"],["system-title","LBL_MARK_FAVORITE",1,"slds-button","slds-button_icon","slds-global-actions__favorites-action","slds-button_icon","slds-button_icon-border","slds-button_icon-small",3,"disabled","ngClass","click"],["favbutton",""],["icon","favorite"],["system-title","LBL_ALL_FAVORITES",1,"slds-button","slds-button_icon","slds-global-actions__favorites-more","slds-button_icon","slds-button_icon-border","slds-button_icon-small",3,"disabled","click"],["icon","down"],["class","slds-popover slds-nubbin--top-right slds-dynamic-menu","role","dialog","style","position:absolute;right:-15px;top:37px",4,"ngIf"],["role","dialog",1,"slds-popover","slds-nubbin--top-right","slds-dynamic-menu",2,"position","absolute","right","-15px","top","37px"],[1,"slds-popover__body","slds-p-horizontal_none"],[1,"slds-listbox","slds-listbox_vertical","slds-dropdown_length-10"],["role","presentation",1,"slds-listbox__item"],["role","presentation",1,"slds-media","slds-listbox__option","slds-listbox__option_plain"],["role","presentation",1,"slds-listbox__option-header"],["label","LBL_FAVORITES"],["global-header-search-recent-item","","role","presentation","class","slds-listbox__item",3,"item","selected",4,"ngFor","ngForOf"],[1,"slds-popover__footer"],[1,"slds-button","slds-button_reset","slds-p-vertical_xx-small","slds-size_1-of-1",3,"click"],["icon","edit",1,"slds-p-right--xx-small"],["label","LBL_EDIT_FAVORITES"],["global-header-search-recent-item","","role","presentation",1,"slds-listbox__item",3,"item","selected"]],template:function(e,t){1&e&&(v.TgZ(0,"div",0)(1,"div",1)(2,"button",2,3),v.NdJ("click",(function(){return t.toggleFavorite()})),v._UZ(4,"system-button-icon",4),v.qZA(),v.TgZ(5,"button",5),v.NdJ("click",(function(){return t.toggleFavorites()})),v._UZ(6,"system-button-icon",6),v.qZA()(),v.YNc(7,D,14,1,"section",7),v.qZA()),2&e&&(v.xp6(2),v.Q6J("disabled",!t.favorite.isEnabled)("ngClass",v.VKq(4,j,t.favorite.isFavorite)),v.xp6(3),v.Q6J("disabled",t.nofavorites),v.xp6(2),v.Q6J("ngIf",t.showFavorites))},dependencies:[i.mk,i.sg,i.O5,T.S,Y.J,C._,b.S],encapsulation:2}),GlobalHeaderFavorite})();function B(e,t){if(1&e){const e=v.EpF();v.TgZ(0,"button",1),v.NdJ("click",(function(){v.CHM(e);const t=v.oxw();return v.KtG(t.toggleEnabled())})),v._UZ(1,"system-button-icon",2),v.qZA()}if(2&e){const e=v.oxw();v.ekj("slds-is-selected",e.language.inlineEditEnabled),v.xp6(1),v.Q6J("addclasses","slds-button--icon-xx-small "+(e.language.inlineEditEnabled?"slds-text-color_success":"slds-text-color--inverse-weak"))}}let G=(()=>{class GlobalHeaderLabelInlineEdit{constructor(e,t){this.language=e,this.session=t}toggleEnabled(){this.language.inlineEditEnabled=!this.language.inlineEditEnabled,this.language.currentlanguage$.emit(this.language.currentlanguage)}}return GlobalHeaderLabelInlineEdit.ɵfac=function(e){return new(e||GlobalHeaderLabelInlineEdit)(v.Y36(w.d),v.Y36(x.n))},GlobalHeaderLabelInlineEdit.ɵcmp=v.Xpm({type:GlobalHeaderLabelInlineEdit,selectors:[["global-header-label-inline-edit"]],decls:1,vars:1,consts:[["system-title","LBL_ENABLE_INLINE_EDIT","class","slds-button slds-button_icon slds-button_icon slds-button_icon-small",3,"slds-is-selected","click",4,"ngIf"],["system-title","LBL_ENABLE_INLINE_EDIT",1,"slds-button","slds-button_icon","slds-button_icon","slds-button_icon-small",3,"click"],["icon","text",3,"addclasses"]],template:function(e,t){1&e&&v.YNc(0,B,2,3,"button",0),2&e&&v.Q6J("ngIf",t.session.isAdmin)},dependencies:[i.O5,T.S,Y.J],encapsulation:2}),GlobalHeaderLabelInlineEdit})();function P(e,t){if(1&e){const e=v.EpF();v.TgZ(0,"div",1),v.NdJ("click",(function(){v.CHM(e);const t=v.oxw();return v.KtG(t.goAdmin())})),v._UZ(1,"system-utility-icon",2),v.qZA()}if(2&e){const e=v.oxw();v.Q6J("title",e.language.getLabel("LBL_WORKBENCH")),v.xp6(1),v.Q6J("icon","setup")("size","x-small")}}let H=(()=>{class GlobalHeaderWorkbench{constructor(e,t,s){this.session=e,this.router=t,this.language=s}isAdmin(){return this.session.isAdmin}goAdmin(){this.router.navigate(["/admin"])}}return GlobalHeaderWorkbench.ɵfac=function(e){return new(e||GlobalHeaderWorkbench)(v.Y36(x.n),v.Y36(q.F0),v.Y36(w.d))},GlobalHeaderWorkbench.ɵcmp=v.Xpm({type:GlobalHeaderWorkbench,selectors:[["global-header-workbench"]],decls:1,vars:1,consts:[["class","slds-p-around--xx-small",3,"title","click",4,"ngIf"],[1,"slds-p-around--xx-small",3,"title","click"],[3,"icon","size"]],template:function(e,t){1&e&&v.YNc(0,P,2,3,"div",0),2&e&&v.Q6J("ngIf",t.isAdmin())},dependencies:[i.O5,A.r],encapsulation:2}),GlobalHeaderWorkbench})();var z=s(4411),V=s(6625),K=s(3278),$=s(4664);function X(e,t){if(1&e){const e=v.EpF();v.TgZ(0,"div",2),v.NdJ("click",(function(){v.CHM(e);const t=v.oxw();return v.KtG(t.reloadConf())})),v._UZ(1,"system-utility-icon",3),v.qZA()}2&e&&(v.xp6(1),v.Q6J("icon","sync")("size","x-small"))}function W(e,t){1&e&&(v.TgZ(0,"div",4),v._UZ(1,"system-spinner",5),v.qZA())}let ee=(()=>{class GlobalHeaderReload{constructor(e,t,s,i,n,l){this.session=e,this.router=t,this.loader=s,this.modal=i,this.configuration=n,this.toast=l,this.loadTasks=!1}isAdmin(){return this.session.isAdmin}reloadConf(){this.loadTasks=!0,this.modal.openModal("GlobalHeaderReloadModal",!1).subscribe((e=>{this.loadermodal=e})),this.loader.load().subscribe((e=>{!0===e?(this.toast.sendToast("LBL_DATA_RELOADED"),this.loadTasks=!1,this.loadermodal.instance.self.destroy()):(this.toast.sendToast("error","error","Reload failed"),this.loadTasks=!1,this.loadermodal.instance.self.destroy())}))}}return GlobalHeaderReload.ɵfac=function(e){return new(e||GlobalHeaderReload)(v.Y36(x.n),v.Y36(q.F0),v.Y36(z._),v.Y36(E.o),v.Y36(V.C),v.Y36(K.A))},GlobalHeaderReload.ɵcmp=v.Xpm({type:GlobalHeaderReload,selectors:[["global-header-reload"]],decls:2,vars:2,consts:[["class","slds-p-around--xx-small","system-title","LBL_RELOAD_CONFIGURATION",3,"click",4,"ngIf"],["class","slds-p-around--xx-small","system-title","LBL_RELOAD_CONFIGURATION",4,"ngIf"],["system-title","LBL_RELOAD_CONFIGURATION",1,"slds-p-around--xx-small",3,"click"],[3,"icon","size"],["system-title","LBL_RELOAD_CONFIGURATION",1,"slds-p-around--xx-small"],["size","12"]],template:function(e,t){1&e&&(v.YNc(0,X,2,2,"div",0),v.YNc(1,W,2,0,"div",1)),2&e&&(v.Q6J("ngIf",t.isAdmin()&&!t.loadTasks),v.xp6(1),v.Q6J("ngIf",t.isAdmin()&&t.loadTasks))},dependencies:[i.O5,T.S,$.W,A.r],encapsulation:2}),GlobalHeaderReload})();var te=s(661);let se=(()=>{class GlobalSetup{}return GlobalSetup.ɵfac=function(e){return new(e||GlobalSetup)},GlobalSetup.ɵcmp=v.Xpm({type:GlobalSetup,selectors:[["global-setup"]],decls:0,vars:0,template:function(e,t){},encapsulation:2}),GlobalSetup})();var ie=s(5289),ne=s(3981),le=s(8764),oe=s(314),ae=s(529),de=s(4461),re=s(7919);function ce(e,t){if(1&e&&(v.TgZ(0,"div",17),v._uU(1),v._UZ(2,"br"),v.qZA()),2&e){const e=v.oxw();v.xp6(1),v.hij(" password Requirements: ",e.pwdGuideline,"")}}function ue(e,t){if(1&e&&(v.TgZ(0,"div",18),v._uU(1),v.qZA()),2&e){const e=v.oxw();v.xp6(1),v.Oqu(e.pwderror)}}function me(e,t){if(1&e&&(v.TgZ(0,"div",18),v._uU(1),v.qZA()),2&e){const e=v.oxw();v.xp6(1),v.Oqu(e.oldPwError)}}function he(e,t){if(1&e&&(v.TgZ(0,"div",18),v._uU(1),v.qZA()),2&e){const e=v.oxw();v.xp6(1),v.Oqu(e.pwdreperror)}}const ge=function(e){return{"slds-has-error":e}};let pe=(()=>{class GlobalLoginResetPassword{constructor(e,t,s,i,n,l){this.loginService=e,this.http=t,this.configuration=s,this.toast=i,this.session=n,this.language=l,this.closeRenewDialog=new v.vpe,this.pwdCheck=new RegExp("//"),this.posting=!1,this.getInfo()}get oldPwError(){return this.oldPassword==this.password&&"Old password is not allowed to be used as a new password"}get pwderror(){return!(!this.password||this.pwdCheck.test(this.password))&&"Password does not match the Guideline."}get pwdreperror(){return this.password!=this.repeatPassword&&"Inputs for the new Password does not match."}closeDialog(){this.closeRenewDialog.emit(!0)}keypressed(e){"Enter"===e.key&&this.sendNewPass(),"Escape"===e.key&&this.closeDialog()}getInfo(){let e=this.configuration.getCapabilityConfig("userpassword");this.pwdCheck=new RegExp(e.regex);let t=[];e.onelower&&t.push("one lower case"),e.oneupper&&t.push("one upper case"),e.onespecial&&t.push("one special"),e.onenumber&&t.push("one number"),e.minpwdlength&&t.push("minimum length "+e.minpwdlength),this.pwdGuideline=t.join(", ")}get canSave(){return this.password&&0==this.oldPwError&&0==this.pwderror&&0==this.pwdreperror&&!this.posting}sendNewPass(){if(this.canSave){let e=new ae.WM;e=e.set("OAuth-Token",this.session.authData.sessionId),this.posting=!0,this.http.post(this.configuration.getBackendUrl()+"/resetTempPass",{password:this.password},{headers:e}).subscribe((e=>{this.toast.sendToast("Password was successfully changed","success","",5),this.loginService.load()}),(e=>{this.posting=!1}))}}}return GlobalLoginResetPassword.ɵfac=function(e){return new(e||GlobalLoginResetPassword)(v.Y36(de.j),v.Y36(ae.eN),v.Y36(V.C),v.Y36(K.A),v.Y36(x.n),v.Y36(w.d))},GlobalLoginResetPassword.ɵcmp=v.Xpm({type:GlobalLoginResetPassword,selectors:[["global-login-reset-password"]],hostBindings:function(e,t){1&e&&v.NdJ("keyup",(function(e){return t.keypressed(e)}),!1,v.Jf7)},inputs:{oldPassword:["oldpassword","oldPassword"]},outputs:{closeRenewDialog:"closeRenewDialog"},decls:24,vars:14,consts:[["id","reset-password"],[2,"height","640px"],["role","dialog","tabindex","-1","aria-labelledby","modal-heading-01","aria-describedby","modal-content-id-1",1,"slds-modal","slds-fade-in-open"],[1,"slds-modal__container"],[1,"slds-modal__header"],["title","Close",1,"slds-button","slds-button_icon","slds-modal__close","slds-button_icon-inverse",3,"click"],[3,"icon"],[1,"slds-assistive-text"],["id","modal-heading-01",1,"slds-text-heading_medium","slds-hyphenate"],["id","modal-content-id-1",1,"slds-modal__content","slds-p-around_medium"],["class","slds-m-vertical--medium",4,"ngIf"],[1,"slds-form-element","slds-m-vertical--small",3,"ngClass"],[3,"ngModel","ngModelChange"],["class","slds-form-element__help slds-text-color--error",4,"ngIf"],[1,"slds-modal__footer"],["tabindex","3",1,"slds-button","slds-button--brand",3,"disabled","click"],[1,"slds-backdrop","slds-backdrop_open"],[1,"slds-m-vertical--medium"],[1,"slds-form-element__help","slds-text-color--error"]],template:function(e,t){1&e&&(v.TgZ(0,"div",0)(1,"div",1)(2,"section",2)(3,"div",3)(4,"header",4)(5,"button",5),v.NdJ("click",(function(){return t.closeDialog()})),v._UZ(6,"system-button-icon",6),v.TgZ(7,"span",7),v._uU(8,"Close"),v.qZA()(),v.TgZ(9,"h2",8),v._uU(10,"New password"),v.qZA()(),v.TgZ(11,"div",9),v.YNc(12,ce,3,1,"div",10),v.TgZ(13,"div",11)(14,"system-input-password",12),v.NdJ("ngModelChange",(function(e){return t.password=e})),v.qZA(),v.YNc(15,ue,2,1,"div",13),v.YNc(16,me,2,1,"div",13),v.qZA(),v.TgZ(17,"div",11)(18,"system-input-password",12),v.NdJ("ngModelChange",(function(e){return t.repeatPassword=e})),v.qZA(),v.YNc(19,he,2,1,"div",13),v.qZA()(),v.TgZ(20,"footer",14)(21,"button",15),v.NdJ("click",(function(){return t.sendNewPass()})),v._uU(22,"Save"),v.qZA()()()(),v._UZ(23,"div",16),v.qZA()()),2&e&&(v.xp6(6),v.Q6J("icon","close"),v.xp6(6),v.Q6J("ngIf",t.pwdGuideline),v.xp6(1),v.Q6J("ngClass",v.VKq(10,ge,t.pwderror||t.oldPwError)),v.xp6(1),v.Q6J("ngModel",t.password),v.xp6(1),v.Q6J("ngIf",""!=t.password&&t.pwderror),v.xp6(1),v.Q6J("ngIf",""!=t.password&&t.oldPwError),v.xp6(1),v.Q6J("ngClass",v.VKq(12,ge,t.pwdreperror)),v.xp6(1),v.Q6J("ngModel",t.repeatPassword),v.xp6(1),v.Q6J("ngIf",""!=t.repeatPassword&&t.pwdreperror),v.xp6(2),v.Q6J("disabled",!t.canSave))},dependencies:[i.mk,i.O5,n.JJ,n.On,Y.J,re.Z],encapsulation:2}),GlobalLoginResetPassword})();var fe=s(4505),be=s(2067);function _e(e,t){if(1&e){const e=v.EpF();v.TgZ(0,"button",1),v.NdJ("click",(function(t){v.CHM(e);const s=v.oxw();return v.KtG(s.signIn(t))})),v.TgZ(1,"div",2),v._UZ(2,"img",3),v.TgZ(3,"div"),v._uU(4,"Sign in with Google"),v.qZA()()()}}let ye=(()=>{class GlobalLoginGoogle{constructor(e,t,s,i,n,l,o){this.backend=e,this.configuration=t,this.http=s,this.loginService=i,this.session=n,this.libloader=l,this.toast=o,this.visible=!1,this.disabled=!0,this.token=new v.vpe,this.configuration.loaded$.subscribe((e=>{e&&this.googleInit()}))}googleInit(){let e=this.configuration.getCapabilityConfig("google_oauth");e?.clientid&&(this.visible=!0,this.libloader.loadFromSource(["https://apis.google.com/js/platform.js"]).subscribe((t=>{gapi.load("auth2",(()=>{this.auth2=gapi.auth2.init({client_id:e.clientid,cookiepolicy:"single_host_origin"}),this.disabled=!1}))}),(e=>{this.disabled=!0})))}signIn(e){e.preventDefault(),e.stopPropagation(),Promise.resolve(this.auth2.signIn()).then((e=>{let t=this.auth2.currentUser.get().getBasicProfile().getEmail();!this.authenticatedUser||this.authenticatedUser&&this.authenticatedUser==t?this.token.emit(e.getAuthResponse().id_token):this.authenticatedUser&&this.authenticatedUser!=t&&this.toast.sendToast("Wrong username","warning","usernames do not match, pleas elogin with the proper user")})).catch((e=>{this.toast.sendToast("Error with Google Login","error")}))}}return GlobalLoginGoogle.ɵfac=function(e){return new(e||GlobalLoginGoogle)(v.Y36(fe.y),v.Y36(V.C),v.Y36(ae.eN),v.Y36(de.j),v.Y36(x.n),v.Y36(be.$),v.Y36(K.A))},GlobalLoginGoogle.ɵcmp=v.Xpm({type:GlobalLoginGoogle,selectors:[["global-login-google"]],inputs:{authenticatedUser:"authenticatedUser"},outputs:{token:"token"},decls:1,vars:1,consts:[["class","slds-button slds-button_neutral slds-size--1-of-1",3,"click",4,"ngIf"],[1,"slds-button","slds-button_neutral","slds-size--1-of-1",3,"click"],[1,"slds-align--absolute-center","slds-grid","slds-grid--vertical-align-center"],["src","https://developers.google.com/identity/images/g-logo.png",2,"height","18px","width","18px","margin-right","24px"]],template:function(e,t){1&e&&v.YNc(0,_e,5,0,"button",0),2&e&&v.Q6J("ngIf",t.visible)},dependencies:[i.O5],encapsulation:2}),GlobalLoginGoogle})();var ve=s(4142),xe=s(4021),Ze=s(9621),we=s(3499),Te=s(1916),Ce=s(4481);function Ae(e,t){if(1&e){const e=v.EpF();v.ynx(0),v.TgZ(1,"div",7)(2,"div",8),v._UZ(3,"system-utility-icon",16),v.TgZ(4,"input",17),v.NdJ("ngModelChange",(function(t){v.CHM(e);const s=v.oxw();return v.KtG(s.password=t)})),v.qZA()()(),v.TgZ(5,"div",18)(6,"button",19),v.NdJ("click",(function(){v.CHM(e);const t=v.oxw();return v.KtG(t.relogin())})),v._UZ(7,"system-label",20),v.qZA()(),v.BQk()}if(2&e){const e=v.oxw();v.xp6(4),v.Q6J("disabled",e.loggingIn)("ngModel",e.password),v.xp6(2),v.Q6J("disabled",!e.password)}}function ke(e,t){if(1&e){const e=v.EpF();v.TgZ(0,"div",21)(1,"global-login-oauth2",22),v.NdJ("token",(function(t){v.CHM(e);const s=v.oxw();return v.KtG(s.tokenLogin(t))})),v.qZA()()}if(2&e){const e=v.oxw();v.xp6(1),v.Q6J("authenticatedUser",e.session.authData.userName)("issuer",e.login.oauthIssuer)}}let Le=(()=>{class GlobalReLogin{constructor(e,t){this.login=e,this.session=t,this.loggedin=new v.vpe,this.loggingIn=!1}tokenLogin(e){this.loggingIn=!0,this.login.relogin(null,e.accessToken).subscribe((e=>{this.loggedin.emit(!0),this.close()}),(e=>{this.loggingIn=!1}))}relogin(){this.loggingIn=!0,this.login.relogin(this.password,null).subscribe((e=>{this.loggedin.emit(!0),this.close()}),(e=>{this.loggingIn=!1}))}logout(){this.login.logout(!0),this.close()}close(){this.self.destroy()}}return GlobalReLogin.ɵfac=function(e){return new(e||GlobalReLogin)(v.Y36(de.j),v.Y36(x.n))},GlobalReLogin.ɵcmp=v.Xpm({type:GlobalReLogin,selectors:[["global-re-login"]],outputs:{loggedin:"loggedin"},decls:16,vars:5,consts:[["size","prompt"],[3,"hiddenCloseButton"],["label","MSG_SESSIONEXPIRED"],["margin","medium",3,"system-overlay-loading-spinner"],[1,"slds-grid","slds-grid--vertical"],[1,"slds-p-vertical--small","slds-align--absolute-center"],["label","MSG_SESSIONEXPIRED","length","long"],[1,"slds-form-element","slds-m-vertical--small"],[1,"slds-form-element__control","slds-input-has-icon","slds-input-has-icon_left"],["icon","user","addclasses","slds-input__icon slds-icon-text-default"],["disabled","","type","text","name","username",1,"slds-input","slds-p-vertical--xx-small",3,"ngModel","ngModelChange"],[4,"ngIf"],["class","slds-p-top--small",4,"ngIf"],[1,"slds-p-top--small","slds-m-top--small","slds-border--top"],[1,"slds-button","slds-button--neutral","slds-button_stretch",3,"click"],["label","LBL_LOGOUT"],["icon","lock","addclasses","slds-icon slds-input__icon slds-input__icon_left slds-icon-text-default"],["type","password","name","password","autocomplete","","tabindex","2","placeholder","Password",1,"slds-input","slds-p-vertical--xx-small",3,"disabled","ngModel","ngModelChange"],[1,"slds-p-vertical--xx-small"],[1,"slds-button","slds-button--brand","slds-button_stretch",3,"disabled","click"],["label","LBL_LOGIN"],[1,"slds-p-top--small"],[3,"authenticatedUser","issuer","token"]],template:function(e,t){1&e&&(v.TgZ(0,"system-modal",0)(1,"system-modal-header",1),v._UZ(2,"system-label",2),v.qZA(),v.TgZ(3,"system-modal-content",3)(4,"div",4)(5,"div",5),v._UZ(6,"system-label",6),v.qZA(),v.TgZ(7,"div",7)(8,"div",8),v._UZ(9,"system-utility-icon",9),v.TgZ(10,"input",10),v.NdJ("ngModelChange",(function(e){return t.session.authData.userName=e})),v.qZA()()(),v.YNc(11,Ae,8,3,"ng-container",11),v.YNc(12,ke,2,2,"div",12),v.TgZ(13,"div",13)(14,"button",14),v.NdJ("click",(function(){return t.logout()})),v._UZ(15,"system-label",15),v.qZA()()()()()),2&e&&(v.xp6(1),v.Q6J("hiddenCloseButton",!0),v.xp6(2),v.Q6J("system-overlay-loading-spinner",t.loggingIn),v.xp6(7),v.Q6J("ngModel",t.session.authData.userName),v.xp6(1),v.Q6J("ngIf",!t.login.oauthIssuer||"SpiceCRM"==t.login.oauthIssuer),v.xp6(1),v.Q6J("ngIf","SpiceCRM"!=t.login.oauthIssuer))},dependencies:[i.O5,n.Fj,n.JJ,n.On,xe._,C._,Ze.j,we.x,Te.y,A.r,Ce.Q],encapsulation:2}),GlobalReLogin})();var Me=s(7445),Se=s(5767),Ie=s(8026);function Oe(e,t){1&e&&(v.TgZ(0,"div",6),v._UZ(1,"system-spinner",14)(2,"system-label",15),v.qZA())}function Je(e,t){if(1&e&&v._UZ(0,"system-progress-bar",16),2&e){const e=v.oxw();v.Q6J("progress",e.progress)("hideText",!0)}}let Ne=(()=>{class GlobalReConnect{constructor(e,t,s){this.http=e,this.configuration=t,this.login=s,this.connected=new v.vpe,this.timeToNextCheck=1e3}ngOnInit(){this.timerSubscription=(0,Me.F)(10).subscribe((e=>{this.timeToNextCheck--,this.checkReconnect()}))}ngOnDestroy(){this.timerSubscription.unsubscribe()}checkReconnect(){0==this.timeToNextCheck&&this.reconnect()}get progress(){return this.timeToNextCheck/10}reconnect(){let e=this.configuration.getBackendUrl()+"/sysinfo";this.http.get(e).subscribe((e=>{this.connected.emit(!0),this.close()}),(e=>{console.log(e),this.timeToNextCheck=1e3}))}logout(){this.login.logout(!0),this.close()}close(){this.self.destroy()}}return GlobalReConnect.ɵfac=function(e){return new(e||GlobalReConnect)(v.Y36(ae.eN),v.Y36(V.C),v.Y36(de.j))},GlobalReConnect.ɵcmp=v.Xpm({type:GlobalReConnect,selectors:[["global-re-connect"]],outputs:{connected:"connected"},decls:15,vars:3,consts:[["size","prompt"],[3,"hiddenCloseButton"],["label","MSG_CONNECTION_LOST"],["margin","large"],[1,"slds-grid","slds-grid_vertical","slds-size--1-of-1","slds-align_absolute-center"],["label","MSG_CONNECTION_LOST","length","long"],[1,"slds-grid","slds-grid_vertical-align-center"],[1,"slds-grow","slds-p-right--small"],["class","slds-grid slds-grid_vertical-align-center",4,"ngIf"],[3,"progress","hideText",4,"ngIf"],[1,"slds-button","slds-button--neutral",3,"click"],["label","LBL_LOGOUT"],[1,"slds-button","slds-button--brand",3,"click"],["label","LBL_RECONNECT_NOW"],["size","16"],["label","LBL_RECONNECTING",1,"slds-p-left--small"],[3,"progress","hideText"]],template:function(e,t){1&e&&(v.TgZ(0,"system-modal",0)(1,"system-modal-header",1),v._UZ(2,"system-label",2),v.qZA(),v.TgZ(3,"system-modal-content",3)(4,"div",4),v._UZ(5,"system-label",5),v.qZA()(),v.TgZ(6,"system-modal-footer")(7,"div",6)(8,"div",7),v.YNc(9,Oe,3,0,"div",8),v.YNc(10,Je,1,2,"system-progress-bar",9),v.qZA(),v.TgZ(11,"button",10),v.NdJ("click",(function(){return t.logout()})),v._UZ(12,"system-label",11),v.qZA(),v.TgZ(13,"button",12),v.NdJ("click",(function(){return t.reconnect()})),v._UZ(14,"system-label",13),v.qZA()()()()),2&e&&(v.xp6(1),v.Q6J("hiddenCloseButton",!0),v.xp6(8),v.Q6J("ngIf",t.timeToNextCheck<0),v.xp6(1),v.Q6J("ngIf",t.timeToNextCheck>0))},dependencies:[i.O5,C._,Ze.j,we.x,Se.p,Te.y,Ie.J,$.W],encapsulation:2}),GlobalReConnect})();var Fe=s(4365),qe=s(6119),Ee=s(5853),Ye=s(2294),Qe=s(3369),Ue=s(382),De=s(7763),je=s(3333);const Re=["menulist"],Be=["menucontainer"];function Ge(e,t){if(1&e){const e=v.EpF();v.TgZ(0,"div",11)(1,"button",12),v.NdJ("click",(function(){v.CHM(e);const t=v.oxw();return v.KtG(t.toggleOpen())})),v._UZ(2,"system-button-icon",13),v.qZA()()}2&e&&(v.xp6(2),v.Q6J("icon","chevrondown"))}const Pe=function(e){return{"slds-hide":e}},He=function(e){return{"slds-disabled-text":e}};function ze(e,t){if(1&e){const e=v.EpF();v.TgZ(0,"li",15),v.NdJ("click",(function(){const t=v.CHM(e).$implicit,s=v.oxw(2);return v.KtG(s.propagateclick(t.id))})),v.TgZ(1,"a",16),v._UZ(2,"global-navigation-menu-item-action-container",17),v.qZA()()}if(2&e){const e=t.$implicit,s=v.oxw(2);v.Q6J("ngClass",v.VKq(3,Pe,s.isHidden(e.id))),v.xp6(2),v.Q6J("ngClass",v.VKq(5,He,s.isDisabled(e.id)))("actionitem",e)}}function Ve(e,t){if(1&e&&(v.ynx(0),v.YNc(1,ze,3,7,"li",14),v.BQk()),2&e){const e=v.oxw();v.xp6(1),v.Q6J("ngForOf",e.itemMenu)}}function Ke(e,t){if(1&e){const e=v.EpF();v.TgZ(0,"li",23),v.NdJ("click",(function(){const t=v.CHM(e).$implicit,s=v.oxw(2);return v.KtG(s.navigateRecent(t.item_id))})),v.TgZ(1,"a",16)(2,"span",2),v._uU(3),v.qZA()()()}if(2&e){const e=t.$implicit;v.xp6(3),v.Oqu(e.item_summary)}}function $e(e,t){if(1&e&&(v.ynx(0),v._UZ(1,"li",18),v.TgZ(2,"li",19)(3,"span",20),v._UZ(4,"system-label",21),v.qZA()(),v.YNc(5,Ke,4,1,"li",22),v.BQk()),2&e){const e=v.oxw();v.xp6(5),v.Q6J("ngForOf",e.favorites)}}const Xe=function(e,t,s){return{module:e,data:t,id:s}};function We(e,t){if(1&e){const e=v.EpF();v.TgZ(0,"li",27),v.NdJ("click",(function(){const t=v.CHM(e).$implicit,s=v.oxw(2);return v.KtG(s.navigateRecent(t.item_id))})),v.TgZ(1,"a",16)(2,"span",2),v._uU(3),v.qZA()()()}if(2&e){const e=t.$implicit,s=v.oxw(2);v.Q6J("system-model-provider",v.kEZ(2,Xe,s.model.module,e.data,e.id)),v.xp6(3),v.Oqu(e.data.summary_text)}}function et(e,t){1&e&&(v.TgZ(0,"li",28),v._UZ(1,"system-label",29),v.qZA())}function tt(e,t){if(1&e&&(v.ynx(0),v._UZ(1,"li",18),v.TgZ(2,"li",19)(3,"span",20),v._UZ(4,"system-label",24),v.qZA()(),v.YNc(5,We,4,6,"li",25),v.YNc(6,et,2,0,"li",26),v.BQk()),2&e){const e=v.oxw();v.xp6(5),v.Q6J("ngForOf",e.recentitems),v.xp6(1),v.Q6J("ngIf",0==e.recentitems.length&&e.isInitialized)}}function st(e,t){1&e&&v._UZ(0,"system-spinner",30)}const it=function(e){return{"slds-is-open":e}};let nt=(()=>{class GlobalNavigationMenuItem{constructor(e,t,s,i,n,l,o,a,d,r,c){this.metadata=e,this.language=t,this.router=s,this.elementRef=i,this.broadcast=n,this.navigation=l,this.model=o,this.view=a,this.recent=d,this.favorite=r,this.renderer=c,this.itemtext="test",this.item={module:null,name:null},this.isOpen=!1,this.isInitialized=!1,this.itemMenu=[],this.favorites=[],this.menucomponents=[],this.view.displayLabels=!1}executeMenuItem(e){this.itemMenu.some(((t,s)=>{if(t.id===e){if("add"===t.action)this.isOpen=!1,this.model.addModel();return!0}}))}navigateTo(){this.isOpen=!1,this.router.navigate(["/module/"+this.item.module])}navigateRecent(e){this.isOpen=!1,this.router.navigate(["/module/"+this.item.module+"/"+e])}ngOnInit(){let e=this.metadata.getComponentConfig("GlobalNavigationMenuItem",this.item.module);e.actionset?this.itemMenu=this.metadata.getActionSetItems(e.actionset):this.itemMenu=this.metadata.getModuleMenu(this.item.module),this.model.module=this.item.module}toggleOpen(){this.isInitialized||this.initialize(),this.isOpen=!this.isOpen,this.isOpen?(this.favorites=this.getFavorites(),this.buildMenu(),this.clickListener=this.renderer.listen("document","click",(e=>this.onClick(e)))):this.clickListener&&this.clickListener()}initialize(){"Home"!=this.item.module?this.recent.getModuleRecent(this.item.module).subscribe((e=>{this.isInitialized=!0})):this.isInitialized=!0}get recentitems(){return this.recent.moduleItems[this.item.module]?this.recent.moduleItems[this.item.module]:[]}getFavorites(){return this.favorite.getFavorites(this.item.module)}onClick(e){(!this.elementRef.nativeElement.contains(e.target)||this.elementRef.nativeElement.contains(e.target)&&this.menulist.element.nativeElement.contains(e.target))&&(this.isOpen=!1)}hasMenu(){return this.itemMenu.length>0||this.metadata.getModuleTrackflag(this.item.module)}getMenuLabel(e){return this.language.getLabel(this.item.module,e)}isActive(){return this.navigation.activeModule==this.item.module}ngAfterViewInit(){this.broadcast.broadcastMessage("navigation.itemadded",{module:this.item.module,width:this.elementRef.nativeElement.offsetWidth}),this.model.module=this.item.module}buildMenu(){return!0}ngOnDestroy(){this.destroyMenu()}destroyMenu(){for(let e of this.menucomponents)e.destroy()}isDisabled(e){return!!this.menuItemlist&&this.menuItemlist.find((t=>t.id==e))?.disabled}isHidden(e){return!!this.menuItemlist&&this.menuItemlist.find((t=>t.id==e))?.hidden}propagateclick(e){this.menuItemlist.some((t=>{if(t.id==e)return t.disabled||t.execute(),!0}))}}return GlobalNavigationMenuItem.ɵfac=function(e){return new(e||GlobalNavigationMenuItem)(v.Y36(Z.Pu),v.Y36(w.d),v.Y36(q.F0),v.Y36(v.SBq),v.Y36(Qe.f),v.Y36(F.G),v.Y36(S.o),v.Y36(Ye.e),v.Y36(Ue.h),v.Y36(N.G),v.Y36(v.Qsj))},GlobalNavigationMenuItem.ɵcmp=v.Xpm({type:GlobalNavigationMenuItem,selectors:[["global-navigation-menu-item"]],viewQuery:function(e,t){if(1&e&&(v.Gf(Re,7,v.s_b),v.Gf(Be,7,v.s_b),v.Gf(Ee.r,5)),2&e){let e;v.iGM(e=v.CRH())&&(t.menulist=e.first),v.iGM(e=v.CRH())&&(t.menucontainer=e.first),v.iGM(e=v.CRH())&&(t.menuItemlist=e)}},hostVars:4,hostBindings:function(e,t){2&e&&v.ekj("slds-context-bar__item",!0)("slds-is-active",t.isActive())},inputs:{itemtext:"itemtext",item:"item"},features:[v._Bn([S.o,Ye.e])],decls:14,vars:9,consts:[["aria-haspopup","true",1,"slds-context-bar__dropdown-trigger","slds-dropdown-trigger","slds-dropdown-trigger--click",3,"ngClass"],["href","javascript:void(0);",1,"slds-context-bar__label-action",3,"click"],[1,"slds-truncate"],[3,"module"],["class","slds-context-bar__icon-action slds-p-left--none",4,"ngIf"],[1,"slds-dropdown","slds-nubbin--top"],["role","menu",1,"slds-dropdown__list"],["menulist",""],["menucontainer",""],[4,"ngIf"],["size","16",4,"ngIf"],[1,"slds-context-bar__icon-action","slds-p-left--none"],[1,"slds-button","slds-button--icon","slds-context-bar__button",3,"click"],[3,"icon"],["class","slds-dropdown__item","role","presentation",3,"ngClass","click",4,"ngFor","ngForOf"],["role","presentation",1,"slds-dropdown__item",3,"ngClass","click"],["href","javascript:void(0);","role","menuitem"],[1,"slds-truncate",3,"ngClass","actionitem"],["role","separator",1,"slds-has-divider--top-space"],["role","separator",1,"slds-dropdown__header"],[1,"slds-text-title--caps"],["label","LBL_FAVORITES"],["class","slds-dropdown__item","role","presentation",3,"click",4,"ngFor","ngForOf"],["role","presentation",1,"slds-dropdown__item",3,"click"],["label","LBL_RECENTLYVIEWED"],["class","slds-dropdown__item","role","presentation",3,"system-model-provider","click",4,"ngFor","ngForOf"],["class","slds-dropdown__item slds-align--absolute-center slds-text-color_inverse-weak slds-p-around--xx-small",4,"ngIf"],["role","presentation",1,"slds-dropdown__item",3,"system-model-provider","click"],[1,"slds-dropdown__item","slds-align--absolute-center","slds-text-color_inverse-weak","slds-p-around--xx-small"],["label","LBL_NO_ENTRIES"],["size","16"]],template:function(e,t){1&e&&(v.TgZ(0,"li",0)(1,"a",1),v.NdJ("click",(function(){return t.navigateTo()})),v.TgZ(2,"span",2),v._UZ(3,"system-label-modulename",3),v.qZA()(),v.YNc(4,Ge,3,1,"div",4),v.TgZ(5,"div",5)(6,"ul",6,7),v._UZ(8,"div",null,8),v.YNc(10,Ve,2,1,"ng-container",9),v.YNc(11,$e,6,1,"ng-container",9),v.YNc(12,tt,7,2,"ng-container",9),v.qZA(),v.YNc(13,st,1,0,"system-spinner",10),v.qZA()()),2&e&&(v.Q6J("ngClass",v.VKq(7,it,t.isOpen)),v.xp6(3),v.Q6J("module",t.item.name),v.xp6(1),v.Q6J("ngIf",t.hasMenu()),v.xp6(6),v.Q6J("ngIf",t.itemMenu.length>0),v.xp6(1),v.Q6J("ngIf",t.favorites.length>0),v.xp6(1),v.Q6J("ngIf","Home"!=t.item.module),v.xp6(1),v.Q6J("ngIf",!t.isInitialized))},dependencies:[i.mk,i.sg,i.O5,De.u,Y.J,C._,je.M,$.W,Ee.r],encapsulation:2}),GlobalNavigationMenuItem})(),lt=(()=>{class GlobalNavigationMenuItemIcon{constructor(){this.icon=""}getSvgHRef(){return"./vendor/sldassets/icons/utility-sprite/svg/symbols.svg#"+this.icon}}return GlobalNavigationMenuItemIcon.ɵfac=function(e){return new(e||GlobalNavigationMenuItemIcon)},GlobalNavigationMenuItemIcon.ɵcmp=v.Xpm({type:GlobalNavigationMenuItemIcon,selectors:[["global-nevigation-menu-item-icon"]],inputs:{icon:"icon"},decls:2,vars:1,consts:[["aria-hidden","true",1,"slds-icon","slds-icon--x-small","slds-icon-text-default","slds-m-right--x-small"]],template:function(e,t){1&e&&(v.O4$(),v.TgZ(0,"svg",0),v._UZ(1,"use"),v.qZA()),2&e&&(v.xp6(1),v.uIk("href",t.getSvgHRef(),null,"xlink"))},encapsulation:2}),GlobalNavigationMenuItemIcon})(),ot=(()=>{class GlobalNavigationMenuItemNew{constructor(e,t){this.language=e,this.model=t}exceuteItem(){this.model.id="",this.model.addModel()}}return GlobalNavigationMenuItemNew.ɵfac=function(e){return new(e||GlobalNavigationMenuItemNew)(v.Y36(w.d),v.Y36(S.o))},GlobalNavigationMenuItemNew.ɵcmp=v.Xpm({type:GlobalNavigationMenuItemNew,selectors:[["global-navigation-menu-item-new"]],decls:5,vars:3,consts:[["role","presentation",1,"slds-dropdown__item",3,"click"],["href","javascript:void(0);","role","menuitem"],[1,"slds-truncate"],[3,"icon"],[3,"module","singular"]],template:function(e,t){1&e&&(v.TgZ(0,"li",0),v.NdJ("click",(function(){return t.exceuteItem()})),v.TgZ(1,"a",1)(2,"span",2),v._UZ(3,"global-nevigation-menu-item-icon",3)(4,"system-label-modulename",4),v.qZA()()()),2&e&&(v.xp6(3),v.Q6J("icon","add"),v.xp6(1),v.Q6J("module",t.model.module)("singular",!0))},dependencies:[je.M,lt],encapsulation:2}),GlobalNavigationMenuItemNew})(),at=(()=>{class GlobalNavigationMenuItemActionNew{constructor(e,t,s){this.language=e,this.model=t,this.metadata=s,this.disabled=!0}execute(){this.model.id="",this.model.addModel()}ngOnInit(){this.model.module&&this.metadata.checkModuleAcl(this.model.module,"create")&&(this.disabled=!1)}}return GlobalNavigationMenuItemActionNew.ɵfac=function(e){return new(e||GlobalNavigationMenuItemActionNew)(v.Y36(w.d),v.Y36(S.o),v.Y36(Z.Pu))},GlobalNavigationMenuItemActionNew.ɵcmp=v.Xpm({type:GlobalNavigationMenuItemActionNew,selectors:[["global-navigation-menu-item-action-new"]],decls:3,vars:2,consts:[[1,"slds-truncate","slds-grid","slds-grid--vertical-align-center"],["icon","add","size","x-small",1,"slds-p-right--x-small"],[3,"module","singular"]],template:function(e,t){1&e&&(v.TgZ(0,"div",0),v._UZ(1,"system-utility-icon",1)(2,"system-label-modulename",2),v.qZA()),2&e&&(v.xp6(2),v.Q6J("module",t.model.module)("singular",!0))},dependencies:[je.M,A.r],encapsulation:2}),GlobalNavigationMenuItemActionNew})(),dt=(()=>{class GlobalNavigationMenuItemRoute{constructor(e,t,s,i){this.metadata=e,this.language=t,this.model=s,this.router=i,this.actionconfig={}}get actionicon(){return this.actionconfig.icon?this.actionconfig.icon:"chevronright"}get actionlabel(){if(this.actionconfig.label&&this.actionconfig.label.indexOf(":")>-1){let e=this.actionconfig.label.split(":");return this.language.getLabel(e[0],e[1])}return this.language.getLabel(this.actionconfig.label)}exceuteItem(){this.router.navigate([this.actionconfig.route])}}return GlobalNavigationMenuItemRoute.ɵfac=function(e){return new(e||GlobalNavigationMenuItemRoute)(v.Y36(Z.Pu),v.Y36(w.d),v.Y36(S.o),v.Y36(q.F0))},GlobalNavigationMenuItemRoute.ɵcmp=v.Xpm({type:GlobalNavigationMenuItemRoute,selectors:[["global-navigation-menu-item-route"]],decls:5,vars:2,consts:[["role","presentation",1,"slds-dropdown__item",3,"click"],["href","javascript:void(0);","role","menuitem"],[1,"slds-truncate"],[3,"icon"]],template:function(e,t){1&e&&(v.TgZ(0,"li",0),v.NdJ("click",(function(){return t.exceuteItem()})),v.TgZ(1,"a",1)(2,"span",2),v._UZ(3,"global-nevigation-menu-item-icon",3),v._uU(4),v.qZA()()()),2&e&&(v.xp6(3),v.Q6J("icon",t.actionicon),v.xp6(1),v.hij(" ",t.actionlabel," "))},dependencies:[lt],encapsulation:2}),GlobalNavigationMenuItemRoute})(),rt=(()=>{class GlobalNavigationMenuItemActionRoute{constructor(e,t,s,i){this.language=e,this.model=t,this.metadata=s,this.router=i,this.actionconfig={}}get actionicon(){return this.actionconfig.icon?this.actionconfig.icon:"chevronright"}get disabled(){return this.actionconfig.acl&&!this.metadata.checkModuleAcl(this.model.module,this.actionconfig.acl)}get hidden(){return this.actionconfig.acl&&!this.metadata.checkModuleAcl(this.model.module,this.actionconfig.acl)}get actionlabel(){if(this.actionconfig.label&&this.actionconfig.label.indexOf(":")>-1){let e=this.actionconfig.label.split(":");return this.language.getLabel(e[0],e[1])}return this.language.getLabel(this.actionconfig.label)}execute(){this.disabled||this.router.navigate([this.actionconfig.route])}}return GlobalNavigationMenuItemActionRoute.ɵfac=function(e){return new(e||GlobalNavigationMenuItemActionRoute)(v.Y36(w.d),v.Y36(S.o),v.Y36(Z.Pu),v.Y36(q.F0))},GlobalNavigationMenuItemActionRoute.ɵcmp=v.Xpm({type:GlobalNavigationMenuItemActionRoute,selectors:[["ng-component"]],decls:3,vars:2,consts:[[1,"slds-truncate","slds-grid","slds-grid--vertical-align-center"],["size","x-small",1,"slds-p-right--x-small",3,"icon"]],template:function(e,t){1&e&&(v.TgZ(0,"div",0),v._UZ(1,"system-utility-icon",1),v._uU(2),v.qZA()),2&e&&(v.xp6(1),v.Q6J("icon",t.actionicon),v.xp6(1),v.hij(" ",t.actionlabel,"\n"))},dependencies:[A.r],encapsulation:2}),GlobalNavigationMenuItemActionRoute})();function ct(e,t){if(1&e){const e=v.EpF();v.TgZ(0,"li",10),v.NdJ("click",(function(){const t=v.CHM(e).$implicit,s=v.oxw();return v.KtG(s.navigateTo(t))})),v.TgZ(1,"a",11)(2,"span",2),v._UZ(3,"system-label-modulename",12),v.qZA()()()}if(2&e){const e=t.$implicit;v.xp6(3),v.Q6J("module",e)}}let ut=(()=>{class GlobalNavigationMenuMore{constructor(e,t,s,i){this.language=e,this.router=t,this.elementRef=s,this.broadcast=i,this.moreMenuItems=[]}navigateTo(e){this.router.navigate(["/module/"+e])}ngAfterViewInit(){this.broadcast.broadcastMessage("navigation.moreadded",{module:"more",width:this.elementRef.nativeElement.offsetWidth})}}return GlobalNavigationMenuMore.ɵfac=function(e){return new(e||GlobalNavigationMenuMore)(v.Y36(w.d),v.Y36(q.F0),v.Y36(v.SBq),v.Y36(Qe.f))},GlobalNavigationMenuMore.ɵcmp=v.Xpm({type:GlobalNavigationMenuMore,selectors:[["global-navigation-menu-more"]],hostVars:2,hostBindings:function(e,t){2&e&&v.ekj("slds-context-bar__item",!0)},decls:10,vars:2,consts:[["aria-haspopup","true",1,"slds-context-bar__dropdown-trigger","slds-dropdown-trigger","slds-dropdown-trigger--hover"],["href","javascript:void(0);",1,"slds-context-bar__label-action"],[1,"slds-truncate"],["label","LBL_MORE"],[1,"slds-context-bar__icon-action","slds-p-left--none"],[1,"slds-button","slds-button--icon","slds-context-bar__button"],[3,"icon"],[1,"slds-dropdown","slds-dropdown--right"],["role","menu",1,"slds-dropdown__list"],["class","slds-dropdown__item","role","presentation",3,"click",4,"ngFor","ngForOf"],["role","presentation",1,"slds-dropdown__item",3,"click"],["href","javascript:void(0);","role","menuitem"],[3,"module"]],template:function(e,t){1&e&&(v.TgZ(0,"li",0)(1,"a",1)(2,"span",2),v._UZ(3,"system-label",3),v.qZA()(),v.TgZ(4,"div",4)(5,"button",5),v._UZ(6,"system-button-icon",6),v.qZA()(),v.TgZ(7,"div",7)(8,"ul",8),v.YNc(9,ct,4,1,"li",9),v.qZA()()()),2&e&&(v.xp6(6),v.Q6J("icon","down"),v.xp6(3),v.Q6J("ngForOf",t.moreMenuItems))},dependencies:[i.sg,Y.J,C._,je.M],encapsulation:2}),GlobalNavigationMenuMore})();var mt=s(2954),ht=s(7877),gt=s(4553),pt=s(2251),ft=s(2995);const bt=["containercontent"],_t=function(e,t){return{"slds-is-closed":e,"slds-is-open":t}},yt=function(e){return{calldata:e}};let vt=(()=>{class GlobalDockedComposerCall{constructor(e,t,s,i,n){this.backend=e,this.dockedComposer=t,this.telephony=s,this.language=i,this.ViewContainerRef=n,this.isClosed=!1}get callicon(){if("disconnected"==this.calldata.status)return"end_call";switch(this.calldata.direction){case"inbound":return"incoming_call";case"outbound":return"outbound_call"}return"call"}closeComposer(){this.telephony.removeCallById(this.calldata.id)}endCall(){this.telephony.terminateCall(this.calldata.id)}toggleClosed(){this.isClosed=!this.isClosed}get toggleIcon(){return this.isClosed?"erect_window":"minimize_window"}get canEndCall(){return this.calldata.callid&&"disconnected"!=this.calldata.status&&"error"!=this.calldata.status}}return GlobalDockedComposerCall.ɵfac=function(e){return new(e||GlobalDockedComposerCall)(v.Y36(fe.y),v.Y36(I.m),v.Y36(pt.n),v.Y36(w.d),v.Y36(v.s_b))},GlobalDockedComposerCall.ɵcmp=v.Xpm({type:GlobalDockedComposerCall,selectors:[["global-docked-composer-call"]],viewQuery:function(e,t){if(1&e&&v.Gf(bt,7,v.s_b),2&e){let e;v.iGM(e=v.CRH())&&(t.containercontent=e.first)}},inputs:{calldata:"calldata"},decls:22,vars:13,consts:[["role","dialog",1,"slds-docked-composer","slds-grid","slds-grid_vertical","slds-m-horizontal--x-small",3,"ngClass"],["aria-live","assertive",1,"slds-docked-composer__header","slds-grid","slds-shrink-none"],[1,"slds-media","slds-media_center","slds-no-space"],[1,"slds-media__figure","slds-m-right_x-small"],[1,"slds-icon_container"],["sprite","utility","size","x-small",3,"icon"],[1,"slds-media__body"],[1,"slds-truncate"],[1,"slds-col_bump-left","slds-shrink-none"],[1,"slds-button","slds-button_icon","slds-button_icon",3,"click"],[3,"icon"],[1,"slds-grow"],["component","TelephonyCallPanel",3,"componentattributes"],[1,"slds-docked-composer__footer","slds-shrink-none"],[1,"slds-button","slds-button--neutral","slds-col_bump-left",3,"disabled","click"],["icon","end_call"],["label","LBL_END"],[1,"slds-button","slds-button--brand","slds-col_bump-left",3,"click"],["label","LBL_CLOSE"]],template:function(e,t){1&e&&(v.TgZ(0,"section",0)(1,"header",1)(2,"div",2)(3,"div",3)(4,"span",4),v._UZ(5,"system-icon",5),v.qZA()(),v.TgZ(6,"div",6)(7,"h2",7),v._uU(8),v.qZA()()(),v.TgZ(9,"div",8)(10,"button",9),v.NdJ("click",(function(){return t.toggleClosed()})),v._UZ(11,"system-button-icon",10),v.qZA(),v.TgZ(12,"button",9),v.NdJ("click",(function(){return t.closeComposer()})),v._UZ(13,"system-button-icon",10),v.qZA()()(),v.TgZ(14,"div",11),v._UZ(15,"system-dynamic-component",12),v.qZA(),v.TgZ(16,"footer",13)(17,"button",14),v.NdJ("click",(function(){return t.endCall()})),v._UZ(18,"system-button-icon",15)(19,"system-label",16),v.qZA(),v.TgZ(20,"button",17),v.NdJ("click",(function(){return t.closeComposer()})),v._UZ(21,"system-label",18),v.qZA()()()),2&e&&(v.Q6J("ngClass",v.WLB(8,_t,t.isClosed,!t.isClosed)),v.xp6(5),v.Q6J("icon",t.callicon),v.xp6(3),v.AsE("",t.calldata.direction," Call ",t.calldata.status,""),v.xp6(3),v.Q6J("icon",t.toggleIcon),v.xp6(2),v.Q6J("icon","close"),v.xp6(2),v.Q6J("componentattributes",v.VKq(11,yt,t.calldata)),v.xp6(2),v.Q6J("disabled",!t.canEndCall))},dependencies:[i.mk,Y.J,ft.T,O.f,C._],encapsulation:2}),GlobalDockedComposerCall})();var xt=s(6951),Zt=s(1604),wt=s(8861),Tt=s(3428);let Ct=(()=>{class GlobalDockedComposerModal{constructor(e,t,s,i,n,l){this.metadata=e,this.dockedComposer=t,this.language=s,this.modal=i,this.model=n,this.view=l,this.self={},this.view.isEditable=!0,this.view.setEditMode()}ngOnInit(){this.loadConfig()}loadConfig(){this.componentconfig=this.metadata.getComponentConfig("GlobalDockedComposerModal",this.model.module)}get displayLabel(){return this.model.getField("name")?this.model.getField("name"):this.language.getModuleName(this.model.module,!0)}minimize(){this.dockedComposer.composers.find((e=>e.id==this.model.id))||this.dockedComposer.addComposer(this.model.module,this.model),this.self.destroy()}promptClose(){this.modal.prompt("confirm",this.language.getLabel("MSG_CANCEL","","long"),this.language.getLabel("MSG_CANCEL")).subscribe((e=>{e&&this.closeComposer()}))}closeComposer(){for(let e=0;e<this.dockedComposer.composers.length;e++)this.dockedComposer.composers[e].id===this.model.id&&this.dockedComposer.composers.splice(e,1);this.self.destroy()}handleaction(e){if("savegodetail"===e)this.model.goDetail(),this.closeComposer();else this.closeComposer()}}return GlobalDockedComposerModal.ɵfac=function(e){return new(e||GlobalDockedComposerModal)(v.Y36(Z.Pu),v.Y36(I.m),v.Y36(w.d),v.Y36(E.o),v.Y36(S.o),v.Y36(Ye.e))},GlobalDockedComposerModal.ɵcmp=v.Xpm({type:GlobalDockedComposerModal,selectors:[["global-docked-composer-modal"]],decls:18,vars:5,consts:[["size","medium"],[3,"module","close"],[1,"slds-button","slds-button_icon",3,"title","click"],["icon","dock_panel"],[1,"slds-assistive-text"],["label","LBL_DOCK"],["margin","none"],["containercontent",""],[3,"componentset"],[1,"slds-grid","slds-grid--vertical-align-center","slds-grid--align-spread"],[1,"slds-text-align_right"],["containerclass","",3,"actionset","actionemitter"]],template:function(e,t){1&e&&(v.TgZ(0,"system-modal",0)(1,"system-modal-header",1),v.NdJ("close",(function(){return t.promptClose()})),v._uU(2),v.TgZ(3,"system-modal-header-right")(4,"button",2),v.NdJ("click",(function(){return t.minimize()})),v._UZ(5,"system-button-icon",3),v.TgZ(6,"span",4),v._UZ(7,"system-label",5),v.qZA()()()(),v.TgZ(8,"system-modal-content",6),v._UZ(9,"div",null,7)(11,"system-componentset",8),v.qZA(),v.TgZ(12,"system-modal-footer")(13,"div",9)(14,"div"),v._UZ(15,"global-docked-composer-messages-badge"),v.qZA(),v.TgZ(16,"div",10)(17,"object-action-container",11),v.NdJ("actionemitter",(function(e){return t.handleaction(e)})),v.qZA()()()()()),2&e&&(v.xp6(1),v.Q6J("module",t.model.module),v.xp6(1),v.hij(" ",t.displayLabel," "),v.xp6(2),v.Q6J("title",t.language.getLabel("LBL_DOCK")),v.xp6(7),v.Q6J("componentset",t.componentconfig.componentset),v.xp6(6),v.Q6J("actionset",t.componentconfig.actionset))},dependencies:[Y.J,xt.E,C._,Ze.j,we.x,Se.p,Te.y,Zt.O,wt.S,Tt.U],encapsulation:2}),GlobalDockedComposerModal})();var At=s(4028);let kt=(()=>{class GlobalComposeButton{constructor(e){this.dockedComposer=e,this.module=""}showComposer(){this.dockedComposer.addComposer(this.module)}}return GlobalComposeButton.ɵfac=function(e){return new(e||GlobalComposeButton)(v.Y36(I.m))},GlobalComposeButton.ɵcmp=v.Xpm({type:GlobalComposeButton,selectors:[["global-compose-button"]],inputs:{module:"module"},decls:3,vars:0,consts:[[1,"slds-no-flex"],[1,"slds-button","slds-button--neutral",3,"click"]],template:function(e,t){1&e&&(v.TgZ(0,"div",0)(1,"button",1),v.NdJ("click",(function(){return t.showComposer()})),v._uU(2,"New"),v.qZA()())},encapsulation:2}),GlobalComposeButton})();var Lt=s(909),Mt=s(2422),St=s(5982);function It(e,t){if(1&e&&(v.TgZ(0,"div",8)(1,"div",9),v._uU(2),v.qZA()()),2&e){const e=v.oxw();v.xp6(2),v.Oqu(e.descriptionfull)}}const Ot=function(e){return{"slds-hide":e}};let Jt=(()=>{class GlobalAppLauncherDialogRoleTile{constructor(e,t){this.language=e,this.metadata=t}ngOnInit(){this.buildRoleLabels()}buildRoleLabels(){this.metadata.getRoles().some((e=>{if(e.id==this.role.id)return this.identifier=this.language.getAppLanglabel(e.label,"short"),this.name=this.language.getAppLanglabel(e.label),this.description=this.language.getAppLanglabel(e.label,"long"),this.name===this.description&&(this.description=null),this.description&&this.description.length>75&&(this.descriptionfull=this.description,this.description=this.description.substr(0,75)+"..."),!0}))}}return GlobalAppLauncherDialogRoleTile.ɵfac=function(e){return new(e||GlobalAppLauncherDialogRoleTile)(v.Y36(w.d),v.Y36(Z.Pu))},GlobalAppLauncherDialogRoleTile.ɵcmp=v.Xpm({type:GlobalAppLauncherDialogRoleTile,selectors:[["global-app-launcher-dialog-role-tile"]],inputs:{role:"role"},decls:13,vars:11,consts:[[1,"slds-app-launcher__tile","slds-text-link_reset","slds-is-relative"],[1,"slds-app-launcher__tile-figure"],[1,"slds-app-launcher__tile-body"],["href","javascript:void(0);"],[1,"slds-button","slds-button_reset","slds-text-link",3,"ngClass","title"],["morebutton",""],["label","LBL_MORE"],["class","slds-popover slds-popover_tooltip slds-nubbin_top slds-hide","role","tooltip","style","position:absolute;top:100px;left:165px",4,"ngIf"],["role","tooltip",1,"slds-popover","slds-popover_tooltip","slds-nubbin_top","slds-hide",2,"position","absolute","top","100px","left","165px"],[1,"slds-popover__body"]],template:function(e,t){1&e&&(v.TgZ(0,"div",0)(1,"div",1)(2,"span"),v._uU(3),v.qZA()(),v.TgZ(4,"div",2)(5,"a",3),v._uU(6),v.qZA(),v.TgZ(7,"p"),v._uU(8),v.TgZ(9,"button",4,5),v._UZ(11,"system-label",6),v.qZA()(),v.YNc(12,It,3,1,"div",7),v.qZA()()),2&e&&(v.xp6(2),v.Gre("slds-avatar slds-avatar--large slds-align--absolute-center ",t.role.icon,""),v.xp6(1),v.Oqu(t.identifier),v.xp6(3),v.Oqu(t.name),v.xp6(2),v.hij(" ",t.description," "),v.xp6(1),v.Q6J("ngClass",v.VKq(9,Ot,!t.descriptionfull))("title",t.descriptionfull),v.xp6(3),v.Q6J("ngIf",t.descriptionfull))},dependencies:[i.mk,i.O5,C._],encapsulation:2}),GlobalAppLauncherDialogRoleTile})();function Nt(e,t){if(1&e){const e=v.EpF();v.TgZ(0,"li",21),v.NdJ("click",(function(){const t=v.CHM(e).$implicit,s=v.oxw(2);return v.KtG(s.setRole(t.id))})),v._UZ(1,"global-app-launcher-dialog-role-tile",22),v.qZA()}if(2&e){const e=t.$implicit;v.xp6(1),v.Q6J("role",e)}}function Ft(e,t){if(1&e&&(v.TgZ(0,"div")(1,"ul",18),v.YNc(2,Nt,2,1,"li",20),v.qZA()()),2&e){const e=v.oxw();v.xp6(2),v.Q6J("ngForOf",e.getRoles())}}function qt(e,t){if(1&e){const e=v.EpF();v.TgZ(0,"li",23),v.NdJ("click",(function(){const t=v.CHM(e).$implicit,s=v.oxw();return v.KtG(s.gotoModule(t))})),v.TgZ(1,"div",24),v._UZ(2,"system-icon",25),v.qZA(),v.TgZ(3,"div",26)(4,"p",27),v._UZ(5,"system-label-modulename",28),v.qZA()()()}if(2&e){const e=t.$implicit,s=v.oxw();v.Q6J("title",s.language.getModuleName(e,!1,"long")),v.xp6(2),v.Q6J("module",e)("size","large"),v.xp6(3),v.Q6J("module",e)}}let Et=(()=>{class GlobalAppLauncherDialog{constructor(e,t,s,i,n){this.metadata=e,this.language=t,this.router=s,this.broadcast=i,this.userpreferences=n,this.searchTerm="",this.self=void 0}get showRoles(){return this.metadata.getRoles().length>1}close(){this.self.destroy()}getRoles(){return this.metadata.getRoles()}setRole(e){this.metadata.setActiveRole(e),this.userpreferences.setPreference("userrole",e),this.broadcast.broadcastMessage("applauncher.setrole",e),this.close()}getModules(){let e=[];for(let t of this.metadata.getModules()){let s=this.metadata.getModuleDefs(t);s.visible&&(!s.visibleaclaction||s.visibleaclaction&&this.metadata.checkModuleAcl(t,s.visibleaclaction))&&this.metadata.checkModuleAcl(t,"list")&&(""===this.searchTerm||""!==this.searchTerm&&this.language.getModuleName(t)&&this.language.getModuleName(t).toLowerCase().indexOf(this.searchTerm.toLowerCase())>=0)&&e.push(t)}return e.sort(((e,t)=>this.language.getModuleName(e)>this.language.getModuleName(t)?1:-1)),e}gotoModule(e){this.router.navigate(["/module/"+e]),this.close()}}return GlobalAppLauncherDialog.ɵfac=function(e){return new(e||GlobalAppLauncherDialog)(v.Y36(Z.Pu),v.Y36(w.d),v.Y36(q.F0),v.Y36(Qe.f),v.Y36(Mt.z))},GlobalAppLauncherDialog.ɵcmp=v.Xpm({type:GlobalAppLauncherDialog,selectors:[["global-app-launcher-dialog"]],decls:22,vars:9,consts:[["role","dialog","tabindex","-1","aria-modal","true",1,"slds-modal","slds-fade-in-open","slds-modal_large","slds-app-launcher__content"],[1,"slds-modal__container"],[1,"slds-modal__header","slds-theme--shade"],[1,"slds-button","slds-button_icon","slds-modal__close","slds-button--icon-inverse",2,"color","#fff",3,"click"],[3,"icon","size"],[1,"slds-assistive-text"],["label","LBL_CLOSE"],[1,"slds-grid","slds-grid--align-spread","slds-grid--vertical-align-center"],[1,"slds-text-heading--medium","slds-show--medium"],["label","LBL_APP_LAUNCHER"],[1,"slds-app-launcher__header-search"],[1,"slds-form-element"],[1,"slds-form-element__control","slds-input-has-icon","slds-input-has-icon--left"],[3,"icon","addclasses"],["system-autofocus","","type","search",1,"slds-input",3,"ngModel","placeholder","ngModelChange"],["disabled","",1,"slds-button","slds-button--neutral","slds-show--medium"],["margin","small",3,"grow"],[4,"ngIf"],[1,"slds-grid","slds-grid--pull-padded","slds-wrap"],["class","slds-p-around--small slds-size--xx-small",3,"title","click",4,"ngFor","ngForOf"],["class","slds-p-horizontal--small slds-size--1-of-1 slds-medium-size--1-of-3",3,"click",4,"ngFor","ngForOf"],[1,"slds-p-horizontal--small","slds-size--1-of-1","slds-medium-size--1-of-3",3,"click"],[3,"role"],[1,"slds-p-around--small","slds-size--xx-small",3,"title","click"],[1,"slds-app-launcher__tile-figure","slds-app-launcher__tile-figure--small","slds-text-link_reset"],[3,"module","size"],[1,"slds-align_absolute-center","slds-p-top--xx-small"],[1,"slds-truncate","slds-text-link_reset"],[3,"module"]],template:function(e,t){1&e&&(v.TgZ(0,"section",0)(1,"div",1)(2,"header",2)(3,"button",3),v.NdJ("click",(function(){return t.close()})),v._UZ(4,"system-button-icon",4),v.TgZ(5,"span",5),v._UZ(6,"system-label",6),v.qZA()(),v.TgZ(7,"div",7)(8,"h2",8),v._UZ(9,"system-label",9),v.qZA(),v.TgZ(10,"div",10)(11,"div",11)(12,"div",12),v._UZ(13,"system-utility-icon",13),v.TgZ(14,"input",14),v.NdJ("ngModelChange",(function(e){return t.searchTerm=e})),v.qZA()()()(),v.TgZ(15,"button",15),v._uU(16,"App Store"),v.qZA()()(),v.TgZ(17,"system-modal-content",16),v.YNc(18,Ft,3,1,"div",17),v.TgZ(19,"div")(20,"ul",18),v.YNc(21,qt,6,4,"li",19),v.qZA()()()()()),2&e&&(v.xp6(4),v.Q6J("icon","close")("size","large"),v.xp6(9),v.Q6J("icon","search")("addclasses","slds-input__icon slds-input__icon--left"),v.xp6(1),v.Q6J("ngModel",t.searchTerm)("placeholder",t.language.getLabel("LBL_FIND_CONFMODULE")),v.xp6(3),v.Q6J("grow",!0),v.xp6(1),v.Q6J("ngIf",t.showRoles),v.xp6(3),v.Q6J("ngForOf",t.getModules()))},dependencies:[i.sg,i.O5,n.Fj,n.JJ,n.On,St.m,Y.J,O.f,C._,je.M,we.x,A.r,Jt],encapsulation:2}),GlobalAppLauncherDialog})();var Yt=s(6131),Qt=s(8313);function Ut(e,t){if(1&e&&v._UZ(0,"system-utility-icon",6),2&e){const e=v.oxw();v.Q6J("icon",e.tab.displayicon)("title",e.modelCount()+" "+e.language.getLabel("LBL_MODELS"))}}function Dt(e,t){if(1&e&&v._UZ(0,"system-icon",7),2&e){const e=v.oxw();v.Q6J("module",e.tab.displaymodule)}}function jt(e,t){1&e&&v._UZ(0,"system-utility-icon",8)}const Rt=function(e){return{"slds-p-left--medium":e}};let Bt=(()=>{class GlobalNavigationTabbedBrowserModalTab{constructor(e,t){this.navigation=e,this.language=t,this.subtab=!1,this.activate=new v.vpe}modelCount(){return this.navigation.modelregister.filter((e=>e.tabid==this.tab.id)).length}activateTab(){this.activate.emit(this.tab.id)}}return GlobalNavigationTabbedBrowserModalTab.ɵfac=function(e){return new(e||GlobalNavigationTabbedBrowserModalTab)(v.Y36(F.G),v.Y36(w.d))},GlobalNavigationTabbedBrowserModalTab.ɵcmp=v.Xpm({type:GlobalNavigationTabbedBrowserModalTab,selectors:[["global-navigation-tabbed-browser-modal-tab"]],inputs:{tab:"tab",subtab:"subtab"},outputs:{activate:"activate"},decls:7,vars:8,consts:[[1,"slds-grid","slds-grid--vertical-align-center",3,"ngClass"],[3,"title"],["size","x-small","class","slds-p-right--x-small",3,"icon","title",4,"ngIf"],["size","x-small","divClass","slds-p-right--x-small",3,"module",4,"ngIf"],[1,"slds-truncate","slds-text-link_faux",3,"click"],["class","slds-p-left--x-small","size","x-small","icon","warning","addclasses","slds-icon-text-error",4,"ngIf"],["size","x-small",1,"slds-p-right--x-small",3,"icon","title"],["size","x-small","divClass","slds-p-right--x-small",3,"module"],["size","x-small","icon","warning","addclasses","slds-icon-text-error",1,"slds-p-left--x-small"]],template:function(e,t){1&e&&(v.TgZ(0,"div",0)(1,"div",1),v.YNc(2,Ut,1,2,"system-utility-icon",2),v.YNc(3,Dt,1,1,"system-icon",3),v.qZA(),v.TgZ(4,"div",4),v.NdJ("click",(function(){return t.activateTab()})),v._uU(5),v.qZA(),v.YNc(6,jt,1,0,"system-utility-icon",5),v.qZA()),2&e&&(v.Q6J("ngClass",v.VKq(6,Rt,t.subtab)),v.xp6(1),v.Q6J("title",t.modelCount()+" "+t.language.getLabel("LBL_MODELS")),v.xp6(1),v.Q6J("ngIf",t.tab.displayicon),v.xp6(1),v.Q6J("ngIf",t.tab.displaymodule),v.xp6(2),v.Oqu(t.tab.displayname),v.xp6(1),v.Q6J("ngIf",t.navigation.anyDirtyModel(t.tab.id)))},dependencies:[i.mk,i.O5,O.f,A.r],encapsulation:2}),GlobalNavigationTabbedBrowserModalTab})(),Gt=(()=>{class GlobalNavigationTabbedBrowserModalTabActions{constructor(e,t){this.navigation=e,this.language=t}closetab(e){this.navigation.closeObjectTab(e)}pintab(e){e.pinned=!e.pinned}clonetab(e){this.navigation.cloneTab(e.id)}}return GlobalNavigationTabbedBrowserModalTabActions.ɵfac=function(e){return new(e||GlobalNavigationTabbedBrowserModalTabActions)(v.Y36(F.G),v.Y36(w.d))},GlobalNavigationTabbedBrowserModalTabActions.ɵcmp=v.Xpm({type:GlobalNavigationTabbedBrowserModalTabActions,selectors:[["global-navigation-tabbed-browser-modal-tab-actions"]],inputs:{tab:"tab"},decls:6,vars:1,consts:[["system-title","LBL_CLONE_TAB",1,"slds-button","slds-button_icon","slds-button_icon-container","slds-button_icon-x-small","slds-m-around--none",3,"click"],["icon","copy"],["system-title","LBL_PIN_TAB",1,"slds-button","slds-button_icon","slds-button_icon-container","slds-button_icon-x-small","slds-m-around--none",3,"click"],[3,"icon"],["system-title","LBL_CLOSE_TAB",1,"slds-button","slds-button--icon","slds-col--bump-left",3,"click"],["icon","close"]],template:function(e,t){1&e&&(v.TgZ(0,"button",0),v.NdJ("click",(function(){return t.clonetab(t.tab)})),v._UZ(1,"system-button-icon",1),v.qZA(),v.TgZ(2,"button",2),v.NdJ("click",(function(){return t.pintab(t.tab)})),v._UZ(3,"system-button-icon",3),v.qZA(),v.TgZ(4,"button",4),v.NdJ("click",(function(){return t.closetab(t.tab.id)})),v._UZ(5,"system-button-icon",5),v.qZA()),2&e&&(v.xp6(3),v.Q6J("icon",t.tab.pinned?"pinned":"pin"))},dependencies:[T.S,Y.J],encapsulation:2}),GlobalNavigationTabbedBrowserModalTabActions})();function Pt(e,t){if(1&e){const e=v.EpF();v.ynx(0),v.TgZ(1,"tr",14)(2,"td")(3,"global-navigation-tabbed-browser-modal-tab",18),v.NdJ("activate",(function(t){v.CHM(e);const s=v.oxw(2);return v.KtG(s.activateTab(t))})),v.qZA()(),v.TgZ(4,"td",16),v._UZ(5,"global-navigation-tabbed-browser-modal-tab-actions",17),v.qZA()(),v.BQk()}if(2&e){const e=t.$implicit;v.xp6(3),v.Q6J("tab",e)("subtab",!0),v.xp6(2),v.Q6J("tab",e)}}function Ht(e,t){if(1&e){const e=v.EpF();v.ynx(0),v.TgZ(1,"tr",14)(2,"td")(3,"global-navigation-tabbed-browser-modal-tab",15),v.NdJ("activate",(function(t){v.CHM(e);const s=v.oxw();return v.KtG(s.activateTab(t))})),v.qZA()(),v.TgZ(4,"td",16),v._UZ(5,"global-navigation-tabbed-browser-modal-tab-actions",17),v.qZA()(),v.YNc(6,Pt,6,3,"ng-container",9),v.BQk()}if(2&e){const e=t.$implicit,s=v.oxw();v.xp6(3),v.Q6J("tab",e),v.xp6(2),v.Q6J("tab",e),v.xp6(1),v.Q6J("ngForOf",s.subtabs(e.id))}}let zt=(()=>{class GlobalNavigationTabbedBrowserModal{constructor(e,t){this.navigation=e,this.language=t}get tabs(){return this.navigation.objectTabs.length}get models(){return this.navigation.modelregister.length}get maintabs(){return this.navigation.objectTabs.filter((e=>!e.parentid))}subtabs(e){return this.navigation.objectTabs.filter((t=>t.parentid==e))}closetab(e){this.navigation.closeObjectTab(e)}activateTab(e){this.navigation.setActiveTab(e),this.close()}pintab(e){e.pinned=!e.pinned}clonetab(e){this.navigation.cloneTab(e.id)}close(){this.self.destroy()}}return GlobalNavigationTabbedBrowserModal.ɵfac=function(e){return new(e||GlobalNavigationTabbedBrowserModal)(v.Y36(F.G),v.Y36(w.d))},GlobalNavigationTabbedBrowserModal.ɵcmp=v.Xpm({type:GlobalNavigationTabbedBrowserModal,selectors:[["ng-component"]],decls:22,vars:3,consts:[[3,"close"],["label","LBL_TABS"],["margin","none"],[1,"slds-table","slds-table--header-fixed","slds-table_cell-buffer"],[1,"slds-line-height_reset"],["scope","col"],[1,"slds-truncate","slds-p-vertical--xx-small"],["label","LBL_TAB"],["scope","col",2,"width","5.5rem"],[4,"ngFor","ngForOf"],[1,"slds-grid","slds-grid--vertical-align-center"],["label","LBL_MODELS"],[1,"slds-col--bump-left","slds-button","slds-button--neutral",3,"click"],["label","LBL_OK"],[1,"slds-hint-parent"],[3,"tab","activate"],[1,"slds-p-horizontal--none","slds-text-align--center"],[3,"tab"],[3,"tab","subtab","activate"]],template:function(e,t){1&e&&(v.TgZ(0,"system-modal")(1,"system-modal-header",0),v.NdJ("close",(function(){return t.close()})),v._UZ(2,"system-label",1),v.qZA(),v.TgZ(3,"system-modal-content",2)(4,"table",3)(5,"thead")(6,"tr",4)(7,"th",5)(8,"div",6),v._UZ(9,"system-label",7),v.qZA()(),v._UZ(10,"th",8),v.qZA()(),v.TgZ(11,"tbody"),v.YNc(12,Ht,7,3,"ng-container",9),v.qZA()()(),v.TgZ(13,"system-modal-footer")(14,"div",10)(15,"div"),v._uU(16),v._UZ(17,"system-label",1),v._uU(18),v._UZ(19,"system-label",11),v.qZA(),v.TgZ(20,"button",12),v.NdJ("click",(function(){return t.close()})),v._UZ(21,"system-label",13),v.qZA()()()()),2&e&&(v.xp6(12),v.Q6J("ngForOf",t.maintabs),v.xp6(4),v.hij("",t.tabs," "),v.xp6(2),v.hij(" / ",t.models," "))},dependencies:[i.sg,C._,Ze.j,we.x,Se.p,Te.y,Bt,Gt],encapsulation:2}),GlobalNavigationTabbedBrowserModal})();var Vt=s(6962),Kt=s(9570),$t=s(2429),Xt=s(26),Wt=s(9183),es=s(8208),ts=s(3850),ss=s(3861),is=s(2401),ns=s(5651),ls=s(7723),os=s(7017),as=s(1790),ds=s(1058);const rs=function(e,t){return{module:e,data:t}};function cs(e,t){if(1&e){const e=v.EpF();v.TgZ(0,"tr",20)(1,"td",21),v._UZ(2,"system-icon",22),v.qZA(),v.TgZ(3,"td",23)(4,"a",24),v.NdJ("click",(function(){const t=v.CHM(e).$implicit,s=v.oxw();return v.KtG(s.goRecent(t.module_name,t.item_id))})),v.TgZ(5,"div",25),v._uU(6),v.qZA()()(),v.TgZ(7,"td",23)(8,"div",26),v._UZ(9,"system-label-modulename",27),v.qZA()()()}if(2&e){const e=t.$implicit;v.Q6J("system-model-provider",v.WLB(7,rs,e.module_name,e.data)),v.xp6(2),v.Q6J("module",e.module_name),v.xp6(3),v.Q6J("module",e.module_name)("id",e.item_id),v.xp6(1),v.Oqu(e.item_summary),v.xp6(3),v.Q6J("module",e.module_name)("singular",!0)}}let us=(()=>{class GlobalRecentItems{constructor(e,t,s,i){this.language=e,this.router=s,this.recent=i,t.setTabInfo({displayname:this.language.getLabel("LBL_RECENTLYVIEWED"),displayicon:"breadcrumbs"})}goRecent(e,t){this.router.navigate(["/module/"+e+"/"+t])}}return GlobalRecentItems.ɵfac=function(e){return new(e||GlobalRecentItems)(v.Y36(w.d),v.Y36(os.d),v.Y36(q.F0),v.Y36(Ue.h))},GlobalRecentItems.ɵcmp=v.Xpm({type:GlobalRecentItems,selectors:[["global-recent-items"]],decls:26,vars:2,consts:[[1,"slds-page-header"],[1,"slds-page-header__row"],[1,"slds-page-header__col-title"],[1,"slds-media"],[1,"slds-media__body"],[1,"slds-page-header__name"],[1,"slds-page-header__name-title"],[1,"slds-page-header__title","slds-truncate"],["label","LBL_RECENT_ITEMS"],[1,"slds-page-header__name-meta"],["label","LBL_ITEMS"],["system-to-bottom",""],["role","grid",1,"slds-table","slds-table--bordered","slds-table--fixed-layout","slds-table--header-fixed"],[1,"slds-text-title--caps"],["scope","col",1,"slds-cell-shrink"],["scope","col",1,"slds-is-sortable","slds-is-resizable"],[1,"slds-truncate","slds-th__action"],["label","LBL_NAME"],["label","LBL_MODULE"],["class","slds-hint-parent",3,"system-model-provider",4,"ngFor","ngForOf"],[1,"slds-hint-parent",3,"system-model-provider"],["role","gridcell",1,"slds-cell-shrink"],["size","small","divClass","",3,"module"],["scope","row"],["href","javascript:void(0);",1,"slds-text-link--reset",3,"click"],["system-model-popover","",1,"slds-truncate",3,"module","id"],[1,"slds-truncate"],[3,"module","singular"]],template:function(e,t){1&e&&(v.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"h1")(8,"span",7),v._UZ(9,"system-label",8),v.qZA()()()(),v.TgZ(10,"p",9),v._uU(11),v._UZ(12,"system-label",10),v.qZA()()()()()(),v.TgZ(13,"div",11)(14,"table",12)(15,"thead")(16,"tr",13),v._UZ(17,"th",14),v.TgZ(18,"th",15)(19,"span",16),v._UZ(20,"system-label",17),v.qZA()(),v.TgZ(21,"th",15)(22,"span",16),v._UZ(23,"system-label",18),v.qZA()()()(),v.TgZ(24,"tbody"),v.YNc(25,cs,10,10,"tr",19),v.qZA()()()),2&e&&(v.xp6(11),v.hij("",t.recent.items.length," "),v.xp6(14),v.Q6J("ngForOf",t.recent.items))},dependencies:[i.sg,as.g,De.u,ds.H,O.f,C._,je.M],encapsulation:2}),GlobalRecentItems})();var ms=s(2487),hs=s(4730),gs=s(2161),ps=s(6559),fs=s(7674),bs=s(3634);const _s=["global-search-module-item",""];function ys(e,t){if(1&e){const e=v.EpF();v.TgZ(0,"td",7),v.NdJ("click",(function(t){v.CHM(e);const s=v.oxw(2);return v.KtG(s.navigateDetail(t))})),v._UZ(1,"field-container",8),v.qZA()}if(2&e){const e=t.$implicit,s=v.oxw(2);v.uIk("data-label",s.language.getFieldDisplayName(s.module,e.field)),v.xp6(1),v.Q6J("field",e.field)("fieldconfig",e.fieldconfig)("fielddisplayclass","slds-truncate")}}function vs(e,t){if(1&e&&(v.ynx(0),v.YNc(1,ys,2,4,"td",6),v.BQk()),2&e){const e=v.oxw();v.xp6(1),v.Q6J("ngForOf",e.listfields)}}let xs=(()=>{class GlobalSearchModuleItem{constructor(e,t,s,i,n,l){this.elementref=e,this.router=t,this.view=s,this.model=i,this.language=n,this.layout=l,this.module="",this.listfields="",this.listitem={},this.expanded=!1,this.view.isEditable=!1,this.view.displayLabels=!1}ngOnInit(){this.model.module="_doc"==this.listitem._type?this.listitem._source._module:this.listitem._type,this.model.id=this.listitem._id,this.model.setData(this.listitem._source),this.model.acl=this.listitem.acl,this.model.acl_fieldcontrol=this.listitem.acl_fieldcontrol}navigateDetail(e){e.stopPropagation(),this.model.checkAccess("detail")&&this.model.goDetail()}toggleexpanded(){this.expanded=!this.expanded}get isexpanded(){return"small"!=this.layout.screenwidth||this.expanded}get expandicon(){return this.expanded?"chevronup":"chevrondown"}}return GlobalSearchModuleItem.ɵfac=function(e){return new(e||GlobalSearchModuleItem)(v.Y36(v.SBq),v.Y36(q.F0),v.Y36(Ye.e),v.Y36(S.o),v.Y36(w.d),v.Y36(ps.b))},GlobalSearchModuleItem.ɵcmp=v.Xpm({type:GlobalSearchModuleItem,selectors:[["","global-search-module-item",""]],inputs:{module:"module",listfields:"listfields",listitem:"listitem"},features:[v._Bn([Ye.e,S.o])],attrs:_s,decls:7,vars:4,consts:[[1,"slds-hide--medium"],[1,"slds-grid","slds-grid--vertical-align-center","slds-p-around--xx-small"],["size","xx-small","divClass","slds-p-right--xx-small",3,"module"],[1,"slds-text-align--left","slds-truncate","slds-grow",3,"click"],["size","xx-small",3,"icon","click"],[4,"ngIf"],["scope","row",3,"click",4,"ngFor","ngForOf"],["scope","row",3,"click"],[3,"field","fieldconfig","fielddisplayclass"]],template:function(e,t){1&e&&(v.TgZ(0,"td",0)(1,"div",1),v._UZ(2,"system-icon",2),v.TgZ(3,"div",3),v.NdJ("click",(function(e){return t.navigateDetail(e)})),v._uU(4),v.qZA(),v.TgZ(5,"system-utility-icon",4),v.NdJ("click",(function(){return t.toggleexpanded()})),v.qZA()()(),v.YNc(6,vs,2,1,"ng-container",5)),2&e&&(v.xp6(2),v.Q6J("module",t.model.module),v.xp6(2),v.Oqu(t.model.data.summary_text),v.xp6(1),v.Q6J("icon",t.expandicon),v.xp6(1),v.Q6J("ngIf",t.isexpanded))},dependencies:[i.sg,i.O5,bs.j,O.f,A.r],encapsulation:2}),GlobalSearchModuleItem})();function Zs(e,t){if(1&e){const e=v.EpF();v.TgZ(0,"li",21),v.NdJ("click",(function(){v.CHM(e);const t=v.oxw();return v.KtG(t.setSearchScope())})),v._UZ(1,"system-label",22),v.qZA()}}function ws(e,t){if(1&e&&(v.TgZ(0,"th",23)(1,"div",24),v._UZ(2,"system-label-fieldname",25),v.qZA()()),2&e){const e=t.$implicit,s=v.oxw();v.xp6(2),v.Q6J("module",s.module)("field",e.field)}}function Ts(e,t){if(1&e&&v._UZ(0,"tr",26),2&e){const e=t.$implicit,s=v.oxw();v.Q6J("module",s.module)("listfields",s.listfields)("listitem",e)}}function Cs(e,t){1&e&&v._UZ(0,"system-spinner")}const As=function(e){return{"slds-hide":e}},ks=function(e){return{"slds-table--bordered":e}};let Ls=(()=>{class GlobalSearchModule{constructor(e,t,s,i,n,l){this.metadata=e,this.elementref=t,this.fts=i,this.language=n,this.layout=l,this.module="",this.scope=new v.vpe,this.listfields=[]}get issmall(){return"small"==this.layout.screenwidth}ngOnInit(){this.listfields=[];let e=this.metadata.getComponentConfig("GlobalSearchModule",this.module);_.isEmpty(e)&&(e=this.metadata.getModuleDefaultComponentConfigByUsage(this.module,"list"));for(let t of this.metadata.getFieldSetFields(e.fieldset))t.fieldconfig.hidden||this.listfields.push(t)}getCount(){let e={};return this.fts.moduleSearchresults.some((t=>{if(t.module===this.module)return e={total:_.isNumber(t.data.total)?t.data.total:t.data.total.value,hits:t.data.hits.length},!0})),e}get hidepanel(){return!(!this.fts.runningmodulesearch&&this.getCount().total>0)}canViewMore(){return this.getCount().total>5}getItems(){let e=[];return this.fts.moduleSearchresults.some((t=>{if(t.module===this.module)return e=t.data.hits,!0})),e}setSearchScope(){this.scope.emit(this.module)}}return GlobalSearchModule.ɵfac=function(e){return new(e||GlobalSearchModule)(v.Y36(Z.Pu),v.Y36(v.SBq),v.Y36(q.F0),v.Y36(ms.Q),v.Y36(w.d),v.Y36(ps.b))},GlobalSearchModule.ɵcmp=v.Xpm({type:GlobalSearchModule,selectors:[["global-search-module"]],inputs:{module:"module"},outputs:{scope:"scope"},decls:27,vars:14,consts:[[3,"ngClass"],[1,"slds-grid","slds-grid--vertical-align-center"],[1,"slds-p-left--small","slds-show--medium"],["divClass","",3,"module"],[1,"slds-p-around--small","slds-theme--default","slds-border--top","slds-grow"],[1,"slds-grid"],[1,"slds-col","slds-has-flexi-truncate"],[1,"slds-page-header__title","slds-truncate"],[3,"module"],[1,"slds-col","slds-align-bottom"],[1,"slds-list--horizontal","slds-has-dividers--left"],[1,"slds-item"],["label","LBL_OF"],["label","LBL_ITEMS"],["class","slds-item slds-text-link--reset",3,"click",4,"ngIf"],["role","grid",1,"slds-table","slds-table--fixed-layout","slds-max-medium-table--stacked-horizontal",3,"ngClass"],[1,"slds-show--medium"],[1,"slds-text-title--caps"],["scope","col",4,"ngFor","ngForOf"],["global-search-module-item","",3,"module","listfields","listitem",4,"ngFor","ngForOf"],[4,"ngIf"],[1,"slds-item","slds-text-link--reset",3,"click"],["label","LBL_VIEWALL"],["scope","col"],[1,"slds-truncate","slds-p-around--x-small"],[3,"module","field"],["global-search-module-item","",3,"module","listfields","listitem"]],template:function(e,t){1&e&&(v.TgZ(0,"div",0)(1,"div",1)(2,"div",2),v._UZ(3,"system-icon",3),v.qZA(),v.TgZ(4,"div",4)(5,"div",5)(6,"div",6)(7,"h1",7),v._UZ(8,"system-label-modulename",8),v.qZA()()(),v.TgZ(9,"div",5)(10,"div",9)(11,"ul",10)(12,"li",11)(13,"span"),v._uU(14),v._UZ(15,"system-label",12),v._uU(16),v._UZ(17,"system-label",13),v.qZA()(),v.YNc(18,Zs,2,0,"li",14),v.qZA()()()()(),v.TgZ(19,"div")(20,"table",15)(21,"thead",16)(22,"tr",17),v.YNc(23,ws,3,2,"th",18),v.qZA()(),v.TgZ(24,"tbody"),v.YNc(25,Ts,1,3,"tr",19),v.qZA()(),v.YNc(26,Cs,1,0,"system-spinner",20),v.qZA()()),2&e&&(v.Q6J("ngClass",v.VKq(10,As,t.hidepanel)),v.xp6(3),v.Q6J("module",t.module),v.xp6(5),v.Q6J("module",t.module),v.xp6(6),v.hij("",t.getCount().hits," "),v.xp6(2),v.hij(" ",t.getCount().total," "),v.xp6(2),v.Q6J("ngIf",t.canViewMore()),v.xp6(2),v.Q6J("ngClass",v.VKq(12,ks,!t.issmall)),v.xp6(3),v.Q6J("ngForOf",t.listfields),v.xp6(2),v.Q6J("ngForOf",t.getItems()),v.xp6(1),v.Q6J("ngIf",t.fts.runningmodulesearch))},dependencies:[i.mk,i.sg,i.O5,O.f,C._,fs.h,je.M,$.W,xs],encapsulation:2}),GlobalSearchModule})();const Ms=["tablecontent"];function Ss(e,t){if(1&e&&(v.TgZ(0,"th",22)(1,"div",23),v._UZ(2,"system-label-fieldname",24),v.qZA()()),2&e){const e=t.$implicit,s=v.oxw();v.xp6(2),v.Q6J("module",s.module)("field",e.field)}}function Is(e,t){if(1&e&&v._UZ(0,"tr",25),2&e){const e=t.$implicit,s=v.oxw();v.Q6J("module",s.module)("listfields",s.listfields)("listitem",e)}}function Os(e,t){if(1&e&&v._UZ(0,"tbody",26),2&e){const e=v.oxw();v.Q6J("columns",null==e.listfields?null:e.listfields.length)("select",!1)("tools",!1)("rows",5)}}function Js(e,t){1&e&&(v.TgZ(0,"div",27)(1,"system-illustration-no-records"),v._UZ(2,"system-label",28),v.qZA()())}const Ns=function(e){return{"slds-table--bordered":e}};let Fs=(()=>{class GlobalSearchModuleOnly{constructor(e,t,s,i,n,l,o){this.broadcast=e,this.metadata=t,this.elementref=s,this.fts=n,this.language=l,this.layout=o,this.module="",this.listfields=[]}get issmall(){return"small"==this.layout.screenwidth}ngOnChanges(){this.listfields=[];let e=this.metadata.getComponentConfig("GlobalSearchModule",this.module);_.isEmpty(e)&&(e=this.metadata.getModuleDefaultComponentConfigByUsage(this.module,"list"));for(let t of this.metadata.getFieldSetFields(e.fieldset))t.fieldconfig.hidden||this.listfields.push(t)}getCount(){let e={};return this.fts.moduleSearchresults.some((t=>{if(t.module===this.module)return e={total:t.data.total,hits:t.data.hits.length},!0})),e}getItems(){let e=[];return this.fts.moduleSearchresults.some((t=>{if(t.module===this.module)return e=t.data.hits,!0})),e}onScroll(e){let t=this.tablecontent.element.nativeElement;t.scrollTop+t.clientHeight+50>t.scrollHeight&&this.fts.loadMore()}}return GlobalSearchModuleOnly.ɵfac=function(e){return new(e||GlobalSearchModuleOnly)(v.Y36(Qe.f),v.Y36(Z.Pu),v.Y36(v.SBq),v.Y36(q.F0),v.Y36(ms.Q),v.Y36(w.d),v.Y36(ps.b))},GlobalSearchModuleOnly.ɵcmp=v.Xpm({type:GlobalSearchModuleOnly,selectors:[["global-search-module-only"]],viewQuery:function(e,t){if(1&e&&v.Gf(Ms,7,v.s_b),2&e){let e;v.iGM(e=v.CRH())&&(t.tablecontent=e.first)}},inputs:{module:"module"},features:[v.TTD],decls:29,vars:11,consts:[[1,"slds-theme--default","slds-border--top","slds-grid","slds-grid--vertical-align-center"],[1,"slds-p-left--small","slds-show--medium"],["divClass","",3,"module"],[1,"slds-p-around--small"],[1,"slds-grid"],[1,"slds-col","slds-has-flexi-truncate"],[1,"slds-page-header__title","slds-truncate"],[3,"module"],[1,"slds-col","slds-align-bottom"],[1,"slds-list--horizontal","slds-has-dividers--left"],[1,"slds-item"],["label","LBL_OF"],["label","LBL_ITEMS"],["role","grid",1,"slds-show--medium","slds-table","slds-table--bordered","slds-table--fixed-layout"],[1,"slds-text-title--caps"],["scope","col",4,"ngFor","ngForOf"],["system-to-bottom","",3,"scroll"],["role","grid",1,"slds-table","slds-table--fixed-layout","slds-max-medium-table--stacked-horizontal",3,"ngClass"],["tablecontent",""],["global-search-module-item","",3,"module","listfields","listitem",4,"ngFor","ngForOf"],["system-table-stencils","",3,"columns","select","tools","rows",4,"ngIf"],["class","slds-align--absolute-center slds-height_full",4,"ngIf"],["scope","col"],[1,"slds-truncate","slds-p-around--x-small"],[3,"module","field"],["global-search-module-item","",3,"module","listfields","listitem"],["system-table-stencils","",3,"columns","select","tools","rows"],[1,"slds-align--absolute-center","slds-height_full"],["label","MSG_NO_RECORDS_FOUND"]],template:function(e,t){1&e&&(v.TgZ(0,"div",0)(1,"div",1),v._UZ(2,"system-icon",2),v.qZA(),v.TgZ(3,"div",3)(4,"div",4)(5,"div",5)(6,"h1",6),v._UZ(7,"system-label-modulename",7),v.qZA()()(),v.TgZ(8,"div",4)(9,"div",8)(10,"ul",9)(11,"li",10)(12,"span"),v._uU(13),v._UZ(14,"system-label",11),v._uU(15),v._UZ(16,"system-label",12),v.qZA()()()()()()(),v.TgZ(17,"div")(18,"table",13)(19,"thead")(20,"tr",14),v.YNc(21,Ss,3,2,"th",15),v.qZA()()(),v.TgZ(22,"div",16),v.NdJ("scroll",(function(e){return t.onScroll(e)})),v.TgZ(23,"table",17,18)(25,"tbody"),v.YNc(26,Is,1,3,"tr",19),v.qZA(),v.YNc(27,Os,1,4,"tbody",20),v.qZA(),v.YNc(28,Js,3,0,"div",21),v.qZA()()),2&e&&(v.xp6(2),v.Q6J("module",t.module),v.xp6(5),v.Q6J("module",t.module),v.xp6(6),v.hij("",t.getCount().hits," "),v.xp6(2),v.hij(" ",t.getCount().total," "),v.xp6(6),v.Q6J("ngForOf",t.listfields),v.xp6(2),v.Q6J("ngClass",v.VKq(9,Ns,!t.issmall)),v.xp6(3),v.Q6J("ngForOf",t.getItems()),v.xp6(1),v.Q6J("ngIf",t.fts.runningmodulesearch),v.xp6(1),v.Q6J("ngIf",!t.fts.runningmodulesearch&&0==t.getCount().total))},dependencies:[i.mk,i.sg,i.O5,ds.H,O.f,hs.C,C._,fs.h,je.M,gs.x,xs],encapsulation:2}),GlobalSearchModuleOnly})();function qs(e,t){if(1&e){const e=v.EpF();v.TgZ(0,"li",4)(1,"a",5),v.NdJ("click",(function(){const t=v.CHM(e).$implicit,s=v.oxw();return v.KtG(s.setSearchScope(t))})),v._UZ(2,"system-label-modulename",22),v.qZA()()}if(2&e){const e=t.$implicit,s=v.oxw();v.Q6J("ngClass",s.getScopeClass(e)),v.xp6(2),v.Q6J("module",e)}}function Es(e,t){1&e&&(v.TgZ(0,"table",27),v._UZ(1,"tbody",28),v.qZA()),2&e&&(v.xp6(1),v.Q6J("columns",7)("select",!1)("tools",!1)("rows",15))}function Ys(e,t){if(1&e){const e=v.EpF();v.TgZ(0,"global-search-module",29),v.NdJ("scope",(function(t){v.CHM(e);const s=v.oxw(2);return v.KtG(s.setSearchScope(t))})),v.qZA()}if(2&e){const e=t.$implicit;v.Q6J("module",e.module)}}function Qs(e,t){1&e&&(v.TgZ(0,"div",30)(1,"system-illustration-no-records"),v._UZ(2,"system-label",31),v.qZA()())}function Us(e,t){if(1&e&&(v.TgZ(0,"div",23),v.YNc(1,Es,2,4,"table",24),v.YNc(2,Ys,1,1,"global-search-module",25),v.YNc(3,Qs,3,0,"div",26),v.qZA()),2&e){const e=v.oxw();v.xp6(1),v.Q6J("ngIf",e.fts.runningmodulesearch),v.xp6(1),v.Q6J("ngForOf",e.fts.moduleSearchresults),v.xp6(1),v.Q6J("ngIf",!e.fts.runningmodulesearch&&0==e.totalcount)}}function Ds(e,t){if(1&e&&(v.TgZ(0,"div"),v._UZ(1,"global-search-module-only",22),v.qZA()),2&e){const e=v.oxw();v.xp6(1),v.Q6J("module",e.searchScope)}}let js=(()=>{class GlobalSearch{constructor(e,t,s,i,n,l,o){this.navigation=e,this.navigationtab=t,this.elementref=s,this.activatedRoute=n,this.fts=l,this.language=o,this.searchScope="*",this.searchTimeOut=void 0,this.searchTerm=""}ngOnInit(){this.routeSubscription=this.navigationtab.activeRoute$.subscribe((e=>{const t=e.params;if(t.searchterm){try{this.searchTerm=atob(decodeURIComponent(t.searchterm))}catch(e){this.searchTerm=t.searchterm}this.doSearch()}else this.navigationtab.setTabInfo({displayname:"global search",displayicon:"search"})}))}ngOnDestroy(){this.routeSubscription.unsubscribe()}search(e){if("Enter"===e.key)this.searchTimeOut&&window.clearTimeout(this.searchTimeOut),this.fts.searchTerm=this.searchTerm,this.doSearch();else this.searchTimeOut&&window.clearTimeout(this.searchTimeOut),this.searchTimeOut=window.setTimeout((()=>this.doSearch()),1e3)}get totalcount(){let e=0;for(let t of this.fts.moduleSearchresults)e+=_.isNumber(t.data.total)?t.data.total:t.data.total.value;return e}get totalmodules(){let e=0;for(let t of this.fts.moduleSearchresults)(_.isNumber(t.data.total)?t.data.total:t.data.total.value)>0&&e++;return e}doSearch(){"*"===this.searchScope?this.fts.searchByModules({searchterm:this.searchTerm}).subscribe((e=>{let t=0;for(let e of this.fts.moduleSearchresults)t+=_.isNumber(e.data.total)?e.data.total:e.data.total.value;this.setTabName(t)})):this.fts.searchByModules({searchterm:this.searchTerm,modules:[this.searchScope],size:50}).subscribe((e=>{let t=0;for(let e of this.fts.moduleSearchresults)t+=_.isNumber(e.data.total)?e.data.total:e.data.total.value;this.setTabName(t)})),this.setTabName()}setTabName(e){this.navigationtab.setTabInfo({displayname:"search "+this.searchTerm+(e?" ("+e+")":""),displayicon:"search"})}getScopeClass(e){if(e===this.searchScope)return"slds-is-active"}setSearchScope(e){e!==this.searchScope&&(this.searchScope=e,this.doSearch())}infiniteScroll(){return"*"!==this.searchScope}}return GlobalSearch.ɵfac=function(e){return new(e||GlobalSearch)(v.Y36(F.G),v.Y36(os.d),v.Y36(v.SBq),v.Y36(q.F0),v.Y36(q.gz),v.Y36(ms.Q),v.Y36(w.d))},GlobalSearch.ɵcmp=v.Xpm({type:GlobalSearch,selectors:[["global-search"]],features:[v._Bn([ms.Q])],decls:23,vars:5,consts:[[1,"slds-grid"],["system-to-bottom","",1,"slds-show--large","slds-size--1-of-5","slds-grid","slds-grid--vertical","slds-navigation-list--vertical","slds-navigation-list--vertical-inverse"],[1,"slds-text-title--caps","slds-p-around--medium"],["label","LBL_SEARCHRESULTS"],[3,"ngClass"],["href","javascript:void(0);",1,"slds-navigation-list--vertical__action","slds-text-link--reset",3,"click"],["label","LBL_TOPRESULTS"],[3,"ngClass",4,"ngFor","ngForOf"],[1,"slds-size--1-of-1","slds-large-size--4-of-5","slds-border--left"],[1,"slds-p-around--medium","slds-theme--shade"],[1,"slds-page-header__row"],[1,"slds-page-header__col-title"],[1,"slds-media"],[1,"slds-media__figure"],["icon","search",3,"click"],[1,"slds-media__body"],[1,"slds-grid","slds-grid--vertical-align-center"],[1,"slds-form-element","slds-size--1-of-1"],[1,"slds-form-element__control"],["system-autofocus","","type","text","spellcheck","false",1,"slds-input",3,"ngModel","ngModelChange","keyup"],["system-to-bottom","",4,"ngIf"],[4,"ngIf"],[3,"module"],["system-to-bottom",""],["class","slds-table slds-table--bordered slds-table--fixed-layout","role","grid",4,"ngIf"],["class","slds-m-bottom--medium",3,"module","scope",4,"ngFor","ngForOf"],["class","slds-align--absolute-center slds-height_full",4,"ngIf"],["role","grid",1,"slds-table","slds-table--bordered","slds-table--fixed-layout"],["system-table-stencils","",3,"columns","select","tools","rows"],[1,"slds-m-bottom--medium",3,"module","scope"],[1,"slds-align--absolute-center","slds-height_full"],["label","MSG_NO_RECORDS_FOUND"]],template:function(e,t){1&e&&(v.TgZ(0,"div",0)(1,"div",1)(2,"h2",2),v._UZ(3,"system-label",3),v.qZA(),v.TgZ(4,"ul")(5,"li",4)(6,"a",5),v.NdJ("click",(function(){return t.setSearchScope("*")})),v._UZ(7,"system-label",6),v.qZA()(),v.YNc(8,qs,3,2,"li",7),v.qZA()(),v.TgZ(9,"div",8)(10,"div",9)(11,"div",10)(12,"div",11)(13,"div",12)(14,"div",13)(15,"system-icon",14),v.NdJ("click",(function(){return t.setSearchScope("*")})),v.qZA()(),v.TgZ(16,"div",15)(17,"h1",16)(18,"div",17)(19,"div",18)(20,"input",19),v.NdJ("ngModelChange",(function(e){return t.searchTerm=e}))("keyup",(function(e){return t.search(e)})),v.qZA()()()()()()()()(),v.YNc(21,Us,4,3,"div",20),v.YNc(22,Ds,2,1,"div",21),v.qZA()()),2&e&&(v.xp6(5),v.Q6J("ngClass",t.getScopeClass("*")),v.xp6(3),v.Q6J("ngForOf",t.fts.searchModules),v.xp6(12),v.Q6J("ngModel",t.searchTerm),v.xp6(1),v.Q6J("ngIf","*"==t.searchScope),v.xp6(1),v.Q6J("ngIf","*"!=t.searchScope))},dependencies:[i.mk,i.sg,i.O5,n.Fj,n.JJ,n.On,St.m,ds.H,O.f,hs.C,C._,je.M,gs.x,Ls,Fs],encapsulation:2}),GlobalSearch})();var Rs=s(595),Bs=s(2790),Gs=s(6449);function Ps(e,t){if(1&e){const e=v.EpF();v.TgZ(0,"div",12)(1,"label",13),v._uU(2),v.qZA(),v.TgZ(3,"system-input-timezone",14),v.NdJ("ngModelChange",(function(t){v.CHM(e);const s=v.oxw(2);return v.KtG(s.preferences.timezone=t)})),v.qZA()()}if(2&e){const e=v.oxw(2);v.xp6(1),v.MGl("for","",e.componentId,"-timezone"),v.xp6(1),v.Oqu(e.lang.getLabel("LBL_TIMEZONE")),v.xp6(1),v.Q6J("ngModel",e.preferences.timezone)}}function Hs(e,t){if(1&e&&(v.TgZ(0,"option",18),v._uU(1),v.qZA()),2&e){const e=t.$implicit;v.Q6J("value",e.value),v.xp6(1),v.Oqu(e.name)}}function zs(e,t){if(1&e){const e=v.EpF();v.TgZ(0,"div",12)(1,"label",13),v._uU(2),v.qZA(),v.TgZ(3,"div",15)(4,"select",16),v.NdJ("ngModelChange",(function(t){v.CHM(e);const s=v.oxw(2);return v.KtG(s.preferences.datef=t)})),v.YNc(5,Hs,2,2,"option",17),v.qZA()()()}if(2&e){const e=v.oxw(2);v.xp6(1),v.MGl("for","",e.componentId,"-datef"),v.xp6(1),v.Oqu(e.lang.getLabel("LBL_DATE_FORMAT")),v.xp6(2),v.MGl("id","",e.componentId,"-datef"),v.Q6J("ngModel",e.preferences.datef),v.xp6(1),v.Q6J("ngForOf",e.dateFormatList)}}function Vs(e,t){if(1&e&&(v.TgZ(0,"option",18),v._uU(1),v.qZA()),2&e){const e=t.$implicit;v.Q6J("value",e.value),v.xp6(1),v.Oqu(e.name)}}function Ks(e,t){if(1&e){const e=v.EpF();v.TgZ(0,"div",12)(1,"label",13),v._uU(2),v.qZA(),v.TgZ(3,"div",15)(4,"select",16),v.NdJ("ngModelChange",(function(t){v.CHM(e);const s=v.oxw(2);return v.KtG(s.preferences.timef=t)})),v.YNc(5,Vs,2,2,"option",17),v.qZA()()()}if(2&e){const e=v.oxw(2);v.xp6(1),v.MGl("for","",e.componentId,"-timef"),v.xp6(1),v.Oqu(e.lang.getLabel("LBL_TIME_FORMAT")),v.xp6(2),v.MGl("id","",e.componentId,"-timef"),v.Q6J("ngModel",e.preferences.timef),v.xp6(1),v.Q6J("ngForOf",e.timeFormatList)}}function $s(e,t){if(1&e&&(v.TgZ(0,"div",5)(1,"h3",6)(2,"span",7),v._uU(3),v.qZA()(),v.TgZ(4,"div",8)(5,"p",9),v._uU(6),v.qZA(),v.TgZ(7,"div",10),v.YNc(8,Ps,4,3,"div",11),v.YNc(9,zs,6,5,"div",11),v.YNc(10,Ks,6,5,"div",11),v.qZA()()()),2&e){const e=v.oxw();v.xp6(3),v.hij("",e.lang.getLabel("LBL_SOME_SETTINGS_ARE_MISSING")," …"),v.xp6(3),v.Oqu(e.lang.getLabel("MSG_NOT_CONFIGURED_USER_SETTINGS")),v.xp6(2),v.Q6J("ngIf",e.isPrefMissing("timezone")),v.xp6(1),v.Q6J("ngIf",e.isPrefMissing("datef")),v.xp6(1),v.Q6J("ngIf",e.isPrefMissing("timef"))}}function Xs(e,t){if(1&e&&(v.TgZ(0,"option",18),v._uU(1),v.qZA()),2&e){const e=t.$implicit,s=v.oxw(2);v.s9C("value",e),v.xp6(1),v.Oqu(s.timezones[e])}}const Ws=function(e){return[e]};function ei(e,t){if(1&e){const e=v.EpF();v.TgZ(0,"div",5)(1,"h3",6)(2,"span",7),v._uU(3),v.qZA()(),v.TgZ(4,"div",8)(5,"p",19),v._uU(6),v.qZA(),v.TgZ(7,"div",20)(8,"span",21)(9,"input",22),v.NdJ("ngModelChange",(function(t){v.CHM(e);const s=v.oxw();return v.KtG(s.timeshiftAction=t)})),v.qZA(),v.TgZ(10,"label",23),v._UZ(11,"span",24),v.qZA()(),v.TgZ(12,"div",25)(13,"div",15)(14,"select",26),v.NdJ("ngModelChange",(function(t){v.CHM(e);const s=v.oxw();return v.KtG(s.selectedTimezone=t)}))("change",(function(){v.CHM(e);const t=v.oxw();return v.KtG(t.timeshiftAction="takeSelected")})),v.YNc(15,Xs,2,2,"option",17),v.qZA()()(),v.TgZ(16,"span",27)(17,"input",28),v.NdJ("ngModelChange",(function(t){v.CHM(e);const s=v.oxw();return v.KtG(s.timeshiftAction=t)})),v.qZA(),v.TgZ(18,"label",23),v._UZ(19,"span",24),v.TgZ(20,"span",29),v._uU(21),v.qZA()()()()()()}if(2&e){const e=v.oxw();v.xp6(3),v.Oqu(e.lang.getLabel("LBL_TIME_SHIFT")),v.xp6(3),v.Oqu(e.lang.getLabelFormatted("MSG_TIME_SHIFT",v.VKq(12,Ws,e.timeshift))),v.xp6(3),v.MGl("id","",e.componentId,"-timeshift-radio-2"),v.Q6J("ngModel",e.timeshiftAction),v.xp6(1),v.MGl("for","",e.componentId,"-timeshift-radio-2"),v.xp6(4),v.Q6J("ngModel",e.selectedTimezone),v.xp6(1),v.Q6J("ngForOf",e.timezoneKeys),v.xp6(2),v.MGl("id","",e.componentId,"-timeshift-radio-1"),v.Q6J("ngModel",e.timeshiftAction),v.xp6(1),v.MGl("for","",e.componentId,"-timeshift-radio-1"),v.xp6(3),v.AsE("",e.guessedTimezone," (GMT",e.guessedTimezoneGmtDiff,")")}}function ti(e,t){if(1&e){const e=v.EpF();v.TgZ(0,"div",30)(1,"div",31)(2,"div",32)(3,"input",33),v.NdJ("ngModelChange",(function(t){v.CHM(e);const s=v.oxw();return v.KtG(s.navigateToUserPrefs=t)})),v.qZA(),v.TgZ(4,"label",34),v._UZ(5,"span",35),v.TgZ(6,"span",29),v._uU(7),v.qZA()()()()()}if(2&e){const e=v.oxw();v.xp6(3),v.Q6J("ngModel",e.navigateToUserPrefs),v.xp6(4),v.Oqu(e.lang.getLabel("MSG_AFTER_SAVING_NAVIGATE_USERPREFS"))}}let si=(()=>{class GlobalObtainImportantPreferences{constructor(e,t,s,i,n,l){this.backend=e,this.lang=t,this.prefservice=s,this.session=i,this.router=n,this.toastservice=l,this.componentId=_.uniqueId(),this.namesOfMissingPrefs=[],this.timeshift=0,this.preferences={},this.navigateToUserPrefs=!1,this.guessedTimezone=moment.tz.guess(),this.guessedTimezoneGmtDiff=moment.tz(this.guessedTimezone).format("Z"),this.timeshiftAction="takeSelected",this.dateFormatList=[{name:moment().format(this.prefservice.jsDateFormat2momentDateFormat("Y-m-d")),value:"Y-m-d"},{name:moment().format(this.prefservice.jsDateFormat2momentDateFormat("m-d-Y")),value:"m-d-Y"},{name:moment().format(this.prefservice.jsDateFormat2momentDateFormat("d-m-Y")),value:"d-m-Y"},{name:moment().format(this.prefservice.jsDateFormat2momentDateFormat("Y/m/d")),value:"Y/m/d"},{name:moment().format(this.prefservice.jsDateFormat2momentDateFormat("m/d/Y")),value:"m/d/Y"},{name:moment().format(this.prefservice.jsDateFormat2momentDateFormat("d/m/Y")),value:"d/m/Y"},{name:moment().format(this.prefservice.jsDateFormat2momentDateFormat("Y.m.d")),value:"Y.m.d"},{name:moment().format(this.prefservice.jsDateFormat2momentDateFormat("d.m.Y")),value:"d.m.Y"},{name:moment().format(this.prefservice.jsDateFormat2momentDateFormat("m.d.Y")),value:"m.d.Y"}],this.timeFormatList=[{name:moment().format(this.prefservice.jsTimeFormat2momentTimeFormat("H:i")),value:"H:i"},{name:moment().format(this.prefservice.jsTimeFormat2momentTimeFormat("h:ia")),value:"h:ia"},{name:moment().format(this.prefservice.jsTimeFormat2momentTimeFormat("h:iA")),value:"h:iA"},{name:moment().format(this.prefservice.jsTimeFormat2momentTimeFormat("h:i a")),value:"h:i a"},{name:moment().format(this.prefservice.jsTimeFormat2momentTimeFormat("h:i A")),value:"h:i A"},{name:moment().format(this.prefservice.jsTimeFormat2momentTimeFormat("H.i")),value:"H.i"},{name:moment().format(this.prefservice.jsTimeFormat2momentTimeFormat("h.ia")),value:"h.ia"},{name:moment().format(this.prefservice.jsTimeFormat2momentTimeFormat("h.iA")),value:"h.iA"},{name:moment().format(this.prefservice.jsTimeFormat2momentTimeFormat("h.i a")),value:"h.i a"},{name:moment().format(this.prefservice.jsTimeFormat2momentTimeFormat("h.i A")),value:"h.i A"}]}ngOnInit(){this.timeshift&&(this.selectedTimezone=this.configuredTimezone=this.prefservice.unchangedPreferences.global.timezone);for(let e of this.namesOfMissingPrefs)this.preferences[e]=this.prefservice.defaults[e]}save(){this.timeshift&&("takeSelected"===this.timeshiftAction&&this.configuredTimezone!==this.selectedTimezone&&(this.preferences.timezone=this.selectedTimezone),"takeGuessed"===this.timeshiftAction&&(this.preferences.timezone=this.guessedTimezone)),_.isEmpty(this.preferences)||this.prefservice.setPreferences(this.preferences).subscribe((()=>{this.toastservice.sendToast(this.lang.getLabel("LBL_DATA_SAVED"),"success")})),this.navigateToUserPrefs&&this.router.navigate(["/module/Users/"+this.session.authData.userId]),this.self.destroy()}canSave(){if(this.namesOfMissingPrefs)for(let e of this.namesOfMissingPrefs)if(!this.preferences[e])return!1;return!0}isPrefMissing(e){return-1!==this.namesOfMissingPrefs.indexOf(e)}onModalEscX(){return!1}}return GlobalObtainImportantPreferences.ɵfac=function(e){return new(e||GlobalObtainImportantPreferences)(v.Y36(fe.y),v.Y36(w.d),v.Y36(Mt.z),v.Y36(x.n),v.Y36(q.F0),v.Y36(K.A))},GlobalObtainImportantPreferences.ɵcmp=v.Xpm({type:GlobalObtainImportantPreferences,selectors:[["global-obtain-important-preferences"]],inputs:{namesOfMissingPrefs:"namesOfMissingPrefs",timeshift:"timeshift"},decls:11,vars:6,consts:[["hiddenCloseButton","true"],["class","slds-section slds-is-open",4,"ngIf"],[1,"slds-grid","slds-grid--align-spread","slds-grid--align-center","slds-grid--align-end"],["class","slds-form-element slds-p-horizontal--medium slds-p-vertical--x-small slds-col--bump-right",4,"ngIf"],[1,"slds-button","slds-button--brand",3,"disabled","click"],[1,"slds-section","slds-is-open"],[1,"slds-section__title","slds-theme_shade"],["title","Section Title",1,"slds-truncate","slds-p-horizontal_small"],[1,"slds-section__content"],[1,"slds-p-horizontal--medium","slds-p-vertical--x-small"],[1,"slds-grid","slds-p-horizontal--x-small"],["class","slds-form-element slds-p-horizontal--x-small slds-p-bottom--x-small slds-size--1-of-3",4,"ngIf"],[1,"slds-form-element","slds-p-horizontal--x-small","slds-p-bottom--x-small","slds-size--1-of-3"],[1,"slds-form-element__label",3,"for"],[3,"ngModel","ngModelChange"],[1,"slds-select_container"],[1,"slds-select",3,"id","ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[1,"slds-p-horizontal--medium","slds-p-vertical--x-small","slds-m-bottom--x-small"],[1,"slds-grid","slds-p-horizontal--medium","slds-grid--vertical-align-center"],[1,"slds-radio"],["type","radio","checked","true","name","timeshift","value","takeSelected",3,"id","ngModel","ngModelChange"],[1,"slds-radio__label",3,"for"],[1,"slds-radio_faux"],[1,"slds-form-element"],["name","timezone",1,"slds-select",3,"ngModel","ngModelChange","change"],[1,"slds-radio","slds-m-left--medium"],["type","radio","name","timeshift","value","takeGuessed",3,"id","ngModel","ngModelChange"],[1,"slds-form-element__label"],[1,"slds-form-element","slds-p-horizontal--medium","slds-p-vertical--x-small","slds-col--bump-right"],[1,"slds-form-element__control"],[1,"slds-checkbox"],["type","checkbox","id","ask-userprefs-navigate",3,"ngModel","ngModelChange"],["for","ask-userprefs-navigate",1,"slds-checkbox__label"],[1,"slds-checkbox_faux"]],template:function(e,t){1&e&&(v.TgZ(0,"system-modal")(1,"system-modal-header",0),v._uU(2),v.qZA(),v.TgZ(3,"system-modal-content"),v.YNc(4,$s,11,5,"div",1),v.YNc(5,ei,22,14,"div",1),v.qZA(),v.TgZ(6,"system-modal-footer")(7,"div",2),v.YNc(8,ti,8,2,"div",3),v.TgZ(9,"button",4),v.NdJ("click",(function(){return t.save()})),v._uU(10),v.qZA()()()()),2&e&&(v.xp6(2),v.hij(" ",t.lang.getLabel("LBL_IMPORTANT_USER_SETTINGS")," "),v.xp6(2),v.Q6J("ngIf",t.namesOfMissingPrefs.length),v.xp6(1),v.Q6J("ngIf",t.timeshift),v.xp6(3),v.Q6J("ngIf",t.namesOfMissingPrefs.length),v.xp6(1),v.Q6J("disabled",!t.canSave()),v.xp6(1),v.Oqu(t.lang.getLabel("LBL_OK")))},dependencies:[i.sg,i.O5,n.YN,n.Kr,n.Fj,n.Wl,n.EJ,n._,n.JJ,n.On,Ze.j,we.x,Se.p,Te.y,Gs.R],encapsulation:2}),GlobalObtainImportantPreferences})();var ii=s(1481);function ni(e,t){if(1&e&&v._UZ(0,"div",2),2&e){const e=v.oxw();v.Q6J("innerHTML",e.sanitizer.bypassSecurityTrustHtml(e.consentText),v.oJD)}}let li=(()=>{class GlobalObtainGDPRConsent{constructor(e,t,s,i,n,l,o,a,d){this.sanitizer=e,this.metadata=t,this.language=s,this.backend=i,this.loginService=n,this.http=l,this.configuration=o,this.session=a,this.toast=d,this.isSaving=!1,this.retrieveConsentText()}retrieveConsentText(){let e=new ae.WM;e=e.set("OAuth-Token",this.session.authData.sessionId),this.http.get(this.configuration.getBackendUrl()+"/common/gdpr/portalGDPRconsentText",{headers:e}).subscribe((e=>{this.consentText=e.portalGDPRconsentText}))}save(){this.isSaving||(this.isSaving=!0,this.backend.postRequest("common/gdpr/portalGDPRconsent",null,{consentText:this.consentText}).subscribe((e=>{this.loginService.session.authData.obtainGDPRconsent=!1}),(e=>{this.isSaving=!1,"wrongConsentText"===e.error.error.errorCode?this.consentText=e.error.error.details.properConsentText:this.toast.sendToast("Error saving the GDPR consent.","error","Try again or consult the administrator.")})))}canSave(){return this.consentText&&!this.isSaving}}return GlobalObtainGDPRConsent.ɵfac=function(e){return new(e||GlobalObtainGDPRConsent)(v.Y36(ii.H7),v.Y36(Z.Pu),v.Y36(w.d),v.Y36(fe.y),v.Y36(de.j),v.Y36(ae.eN),v.Y36(V.C),v.Y36(x.n),v.Y36(K.A))},GlobalObtainGDPRConsent.ɵcmp=v.Xpm({type:GlobalObtainGDPRConsent,selectors:[["global-obtain-gdpr-consent"]],decls:2,vars:2,consts:[[2,"min-height","80px",3,"system-overlay-loading-spinner"],[3,"innerHTML",4,"ngIf"],[3,"innerHTML"]],template:function(e,t){1&e&&(v.TgZ(0,"div",0),v.YNc(1,ni,1,1,"div",1),v.qZA()),2&e&&(v.Q6J("system-overlay-loading-spinner",!t.consentText),v.xp6(1),v.Q6J("ngIf",t.consentText))},dependencies:[i.O5,xe._],encapsulation:2}),GlobalObtainGDPRConsent})();var oi=s(6933);const ai=["container"];function di(e,t){1&e&&v._UZ(0,"global-obtain-gdpr-consent")}let ri=(()=>{class GlobalObtainGDPRConsentContainer{constructor(e,t,s){this.metadata=e,this.language=t,this.login=s,this.showDefault=!1,this.headerLabel="LBL_GDPR_DATA_AGREEMENT",this.taglineLabel="MSG_TO_CONTINUE_AGREE_TO_GDPR_CONSENT",this.saveButtonLabel="LBL_I_AGREE",this.canSave=()=>!!this.childComponent&&this.childComponent.canSave(),this.isSaving=()=>!!this.childComponent&&this.childComponent.isSaving}ngAfterViewInit(){this.displayComponent()}displayComponent(){this.componentConfig=this.metadata.getComponentConfig("GlobalObtainGDPRConsentContainer"),this.componentConfig&&this.componentConfig.customComponent?(this.nameOfCustomComponent=this.componentConfig.customComponent,this.metadata.addComponent(this.nameOfCustomComponent,this.container).subscribe((e=>{e.instance.headerLabel&&(this.headerLabel=e.instance.headerLabel),e.instance.taglineLabel&&(this.taglineLabel=e.instance.taglineLabel),e.instance.saveButtonLabel&&(this.saveButtonLabel=e.instance.saveButtonLabel),e.instance.finished.subscribe((e=>this.finished(e))),this.childComponent=e.instance}))):this.showDefault=!0}save(){this.childComponent.save()}finished(e){e||this.login.logout(),this.self.destroy()}}return GlobalObtainGDPRConsentContainer.ɵfac=function(e){return new(e||GlobalObtainGDPRConsentContainer)(v.Y36(Z.Pu),v.Y36(w.d),v.Y36(de.j))},GlobalObtainGDPRConsentContainer.ɵcmp=v.Xpm({type:GlobalObtainGDPRConsentContainer,selectors:[["global-obtain-gdpr-consent-container"]],viewQuery:function(e,t){if(1&e&&(v.Gf(ai,5,v.s_b),v.Gf(li,5)),2&e){let e;v.iGM(e=v.CRH())&&(t.container=e.first),v.iGM(e=v.CRH())&&(t.childComponent=e.first)}},decls:14,vars:7,consts:[["size","small"],["hiddenCloseButton","true"],[3,"system-overlay-loading-spinner"],["container",""],[4,"ngIf"],[1,"slds-button","slds-button--neutral",3,"click"],[1,"slds-button","slds-button--brand",3,"disabled","click"]],template:function(e,t){1&e&&(v.TgZ(0,"system-modal",0)(1,"system-modal-header",1),v._uU(2),v.TgZ(3,"system-modal-header-tagline"),v._uU(4),v.qZA()(),v.TgZ(5,"system-modal-content",2),v._UZ(6,"div",null,3),v.YNc(8,di,1,0,"global-obtain-gdpr-consent",4),v.qZA(),v.TgZ(9,"system-modal-footer")(10,"button",5),v.NdJ("click",(function(){return t.finished(!1)})),v._uU(11),v.qZA(),v.TgZ(12,"button",6),v.NdJ("click",(function(){return t.save()})),v._uU(13),v.qZA()()()),2&e&&(v.xp6(2),v.hij(" ",t.language.getLabel(t.headerLabel)," "),v.xp6(2),v.Oqu(t.language.getLabel(t.taglineLabel)),v.xp6(1),v.Q6J("system-overlay-loading-spinner",t.isSaving()),v.xp6(3),v.Q6J("ngIf",t.showDefault),v.xp6(3),v.Oqu(t.language.getLabel("LBL_CANCEL")),v.xp6(1),v.Q6J("disabled",!t.canSave()),v.xp6(1),v.Oqu(t.language.getLabel(t.saveButtonLabel)))},dependencies:[i.O5,xe._,Ze.j,we.x,Se.p,Te.y,oi.J,li],encapsulation:2}),GlobalObtainGDPRConsentContainer})();var ci=s(3131),ui=s(3298);function mi(e,t){1&e&&(v.TgZ(0,"span",15),v._UZ(1,"system-icon",16),v.qZA())}function hi(e,t){1&e&&(v.TgZ(0,"abbr",17),v._uU(1,"●"),v.qZA())}function gi(e,t){if(1&e&&(v.TgZ(0,"div",2)(1,"div",3),v.YNc(2,mi,2,0,"span",4),v.qZA(),v.TgZ(3,"div",5)(4,"div",6)(5,"a",7)(6,"h3",8)(7,"span",9),v._uU(8),v.qZA(),v.TgZ(9,"span",10),v._UZ(10,"system-label",11),v.qZA(),v.TgZ(11,"span",12),v._uU(12),v.qZA()(),v.TgZ(13,"p",13),v._uU(14),v.YNc(15,hi,2,0,"abbr",14),v.qZA()()()()()),2&e){const e=v.oxw();v.xp6(2),v.Q6J("ngIf",e.notification.bean_module),v.xp6(2),v.ekj("slds-text-title_bold",1!=e.notification.notification_read),v.xp6(3),v.Q6J("id",e.notification.bean_id)("module",e.notification.bean_module)("system-title",e.notification.bean_name),v.xp6(1),v.hij(" ",e.notification.bean_name," "),v.xp6(3),v.Q6J("id",e.notification.created_by)("system-title",e.notification.created_by_name),v.xp6(1),v.hij(" ",e.notification.created_by_name," "),v.xp6(2),v.hij(" ",e.notification.notification_date," "),v.xp6(1),v.Q6J("ngIf",1!=e.notification.notification_read)}}function pi(e,t){if(1&e){const e=v.EpF();v.TgZ(0,"section",18)(1,"div",19)(2,"a",20),v._UZ(3,"system-icon",16),v.TgZ(4,"div",5)(5,"h2",21)(6,"span",22),v._uU(7),v.qZA(),v.TgZ(8,"span",10),v._UZ(9,"system-label",11),v.qZA(),v.TgZ(10,"span",23),v._uU(11),v.qZA()(),v.TgZ(12,"p"),v._uU(13),v.qZA()()(),v.TgZ(14,"button",24),v.NdJ("click",(function(){v.CHM(e);const t=v.oxw();return v.KtG(t.notificationService.clearTempNotification(t.notification))})),v._UZ(15,"system-button-icon",25),v.qZA()()()}if(2&e){const e=v.oxw();v.xp6(6),v.Q6J("id",e.notification.bean_id)("module",e.notification.bean_module)("system-title",e.notification.bean_name),v.xp6(1),v.hij(" ",e.notification.bean_name," "),v.xp6(3),v.Q6J("id",e.notification.created_by)("system-title",e.notification.created_by_name),v.xp6(1),v.hij(" ",e.notification.created_by_name," "),v.xp6(2),v.hij(" ",e.notification.notification_date," ")}}let fi=(()=>{class GlobalHeaderNotificationsItemGeneric{constructor(e){this.notificationService=e,this.asBox=!1}}return GlobalHeaderNotificationsItemGeneric.ɵfac=function(e){return new(e||GlobalHeaderNotificationsItemGeneric)(v.Y36(ui.t))},GlobalHeaderNotificationsItemGeneric.ɵcmp=v.Xpm({type:GlobalHeaderNotificationsItemGeneric,selectors:[["global-header-notifications-item-generic"]],inputs:{notification:"notification",asBox:"asBox"},decls:3,vars:2,consts:[["class","slds-media slds-has-flexi-truncate slds-p-around_x-small",4,"ngIf","ngIfElse"],["boxContainer",""],[1,"slds-media","slds-has-flexi-truncate","slds-p-around_x-small"],[1,"slds-media__figure"],["class","slds-icon_container","style","width:40px;height:40px;",4,"ngIf"],[1,"slds-media__body"],[1,"slds-grid","slds-grid_align-spread"],["href","javascript:void(0);",1,"slds-text-link_reset","slds-has-flexi-truncate"],[1,"slds-truncate"],["system-model-popover","",1,"slds-m-right--xxx-small",3,"id","module","system-title"],["system-title","MSG_NOTIFICATION_GENERIC"],["label","MSG_NOTIFICATION_GENERIC"],["system-model-popover","","module","Users",1,"slds-m-right--xxx-small",3,"id","system-title"],[1,"slds-text-color_weak"],["system-title","LBL_UNREAD","class","slds-text-link slds-m-horizontal_xxx-small slds-text-color_success",4,"ngIf"],[1,"slds-icon_container",2,"width","40px","height","40px"],["icon","all"],["system-title","LBL_UNREAD",1,"slds-text-link","slds-m-horizontal_xxx-small","slds-text-color_success"],["role","dialog",1,"slds-notification","slds-m-vertical--xxx-small"],[1,"slds-notification__body"],[1,"slds-notification__target","slds-media"],[1,"slds-text-heading_small","slds-m-bottom_xx-small"],["system-model-popover","",1,"slds-m-right--xxx-small",2,"text-decoration","underline",3,"id","module","system-title"],["system-model-popover","","module","Users",1,"slds-m-right--xxx-small",2,"text-decoration","underline",3,"id","system-title"],["system-title","LBL_CLOSE",1,"slds-button","slds-button_icon","slds-button_icon-container","slds-notification__close",3,"click"],["icon","close"]],template:function(e,t){if(1&e&&(v.YNc(0,gi,16,12,"div",0),v.YNc(1,pi,16,8,"ng-template",null,1,v.W1O)),2&e){const e=v.MAs(2);v.Q6J("ngIf",!t.asBox)("ngIfElse",e)}},dependencies:[i.O5,as.g,T.S,Y.J,O.f,C._],encapsulation:2}),GlobalHeaderNotificationsItemGeneric})();function bi(e,t){1&e&&(v.TgZ(0,"div",15),v._UZ(1,"system-icon",16),v.qZA())}function _i(e,t){1&e&&(v.TgZ(0,"abbr",17),v._uU(1,"●"),v.qZA())}function yi(e,t){if(1&e&&(v.TgZ(0,"div",2)(1,"div",3),v.YNc(2,bi,2,0,"div",4),v.qZA(),v.TgZ(3,"div",5)(4,"div",6)(5,"h3",7)(6,"span",8),v._UZ(7,"system-label",9),v.qZA(),v.TgZ(8,"span",10),v._uU(9),v.qZA(),v._UZ(10,"system-label",11),v.TgZ(11,"span",12),v._uU(12),v.qZA()(),v.TgZ(13,"p",13),v._uU(14),v.YNc(15,_i,2,0,"abbr",14),v.qZA()()()()),2&e){const e=v.oxw();v.xp6(2),v.Q6J("ngIf",e.notification.bean_module),v.xp6(2),v.ekj("slds-text-title_bold",1!=e.notification.notification_read),v.xp6(4),v.Q6J("id",e.notification.bean_id)("module",e.notification.bean_module)("system-title",e.notification.bean_name),v.xp6(1),v.hij(" ",e.notification.bean_name," "),v.xp6(2),v.Q6J("id",e.notification.created_by)("system-title",e.notification.created_by_name),v.xp6(1),v.hij(" ",e.notification.created_by_name," "),v.xp6(2),v.hij(" ",e.notification.notification_date," "),v.xp6(1),v.Q6J("ngIf",1!=e.notification.notification_read)}}function vi(e,t){if(1&e){const e=v.EpF();v.TgZ(0,"section",18)(1,"div",19)(2,"a",20),v._UZ(3,"system-icon",16),v.TgZ(4,"div",5)(5,"h2",21)(6,"span",22),v._UZ(7,"system-label",23),v.qZA(),v.TgZ(8,"span",24),v._uU(9),v.qZA(),v._UZ(10,"system-label",25),v.TgZ(11,"span",26),v._uU(12),v.qZA()(),v.TgZ(13,"p"),v._uU(14),v.qZA()()(),v.TgZ(15,"button",27),v.NdJ("click",(function(){v.CHM(e);const t=v.oxw();return v.KtG(t.notificationService.clearTempNotification(t.notification))})),v._UZ(16,"system-button-icon",28),v.qZA()()()}if(2&e){const e=v.oxw();v.xp6(8),v.Q6J("id",e.notification.bean_id)("module",e.notification.bean_module)("system-title",e.notification.bean_name),v.xp6(1),v.hij(" ",e.notification.bean_name," "),v.xp6(2),v.Q6J("id",e.notification.created_by)("system-title",e.notification.created_by_name),v.xp6(1),v.hij(" ",e.notification.created_by_name," "),v.xp6(2),v.hij(" ",e.notification.notification_date," ")}}let xi=(()=>{class GlobalHeaderNotificationsItemChange{constructor(e){this.notificationService=e,this.asBox=!1}}return GlobalHeaderNotificationsItemChange.ɵfac=function(e){return new(e||GlobalHeaderNotificationsItemChange)(v.Y36(ui.t))},GlobalHeaderNotificationsItemChange.ɵcmp=v.Xpm({type:GlobalHeaderNotificationsItemChange,selectors:[["global-header-notifications-item-change"]],inputs:{notification:"notification",asBox:"asBox"},decls:3,vars:2,consts:[["class","slds-media slds-has-flexi-truncate slds-p-around_x-small",4,"ngIf","ngIfElse"],["boxContainer",""],[1,"slds-media","slds-has-flexi-truncate","slds-p-around_x-small"],[1,"slds-media__figure"],["class","slds-icon_container","style","width:40px;height:40px;",4,"ngIf"],[1,"slds-media__body"],[1,"slds-grid","slds-grid_align-spread"],[1,"slds-truncate"],["system-title","LBL_CHANGED",1,"slds-m-right--xx-small"],["label","LBL_CHANGED"],["system-model-popover","",1,"slds-m-right--xxx-small",3,"id","module","system-title"],["label","LBL_BY",1,"slds-m-right--xxx-small","slds-m-left--xxx-small"],["system-model-popover","","module","Users",1,"slds-m-right--xxx-small",3,"id","system-title"],[1,"slds-text-color_weak"],["system-title","LBL_UNREAD","class","slds-text-link slds-m-horizontal_xxx-small slds-text-color_success",4,"ngIf"],[1,"slds-icon_container",2,"width","40px","height","40px"],["icon","custom18","sprite","custom"],["system-title","LBL_UNREAD",1,"slds-text-link","slds-m-horizontal_xxx-small","slds-text-color_success"],["role","dialog",1,"slds-notification","slds-m-vertical--xxx-small"],[1,"slds-notification__body"],[1,"slds-notification__target","slds-media"],[1,"slds-text-heading_small","slds-m-bottom_xx-small"],["system-title","LBL_CHANGED"],["label","LBL_ASSIGNED"],["system-model-popover","",1,"slds-m-right--xxx-small",2,"text-decoration","underline",3,"id","module","system-title"],["label","LBL_BY"],["system-model-popover","","module","Users",1,"slds-m-right--xxx-small",2,"text-decoration","underline",3,"id","system-title"],["system-title","LBL_CLOSE",1,"slds-button","slds-button_icon","slds-button_icon-container","slds-notification__close",3,"click"],["icon","close"]],template:function(e,t){if(1&e&&(v.YNc(0,yi,16,12,"div",0),v.YNc(1,vi,17,8,"ng-template",null,1,v.W1O)),2&e){const e=v.MAs(2);v.Q6J("ngIf",!t.asBox)("ngIfElse",e)}},dependencies:[i.O5,as.g,T.S,Y.J,O.f,C._],encapsulation:2}),GlobalHeaderNotificationsItemChange})();function Zi(e,t){1&e&&(v.TgZ(0,"span",16),v._UZ(1,"system-icon",17),v.qZA())}function wi(e,t){1&e&&(v.TgZ(0,"abbr",18),v._uU(1,"●"),v.qZA())}function Ti(e,t){if(1&e&&(v.TgZ(0,"div",2)(1,"div",3),v.YNc(2,Zi,2,0,"span",4),v.qZA(),v.TgZ(3,"div",5)(4,"div",6)(5,"a",7)(6,"h3",8)(7,"span",9),v._UZ(8,"system-label",10),v.qZA(),v.TgZ(9,"span",11),v._uU(10),v.qZA(),v._UZ(11,"system-label",12),v.TgZ(12,"span",13),v._uU(13),v.qZA()(),v.TgZ(14,"p",14),v._uU(15),v.YNc(16,wi,2,0,"abbr",15),v.qZA()()()()()),2&e){const e=v.oxw();v.xp6(2),v.Q6J("ngIf",e.notification.bean_module),v.xp6(2),v.ekj("slds-text-title_bold",1!=e.notification.notification_read),v.xp6(5),v.Q6J("id",e.notification.bean_id)("module",e.notification.bean_module)("system-title",e.notification.bean_name),v.xp6(1),v.hij(" ",e.notification.bean_name," "),v.xp6(2),v.Q6J("id",e.notification.created_by)("system-title",e.notification.created_by_name),v.xp6(1),v.hij(" ",e.notification.created_by_name," "),v.xp6(2),v.hij(" ",e.notification.notification_date," "),v.xp6(1),v.Q6J("ngIf",1!=e.notification.notification_read)}}function Ci(e,t){if(1&e){const e=v.EpF();v.TgZ(0,"section",19)(1,"div",20)(2,"a",21),v._UZ(3,"system-icon",17),v.TgZ(4,"div",5)(5,"h2",22)(6,"span",23),v._UZ(7,"system-label",10),v.qZA(),v.TgZ(8,"span",24),v._uU(9),v.qZA(),v._UZ(10,"system-label",12),v.TgZ(11,"span",25),v._uU(12),v.qZA()(),v.TgZ(13,"p"),v._uU(14),v.qZA()()(),v.TgZ(15,"button",26),v.NdJ("click",(function(){v.CHM(e);const t=v.oxw();return v.KtG(t.notificationService.clearTempNotification(t.notification))})),v._UZ(16,"system-button-icon",27),v.qZA()()()}if(2&e){const e=v.oxw();v.xp6(8),v.Q6J("id",e.notification.bean_id)("module",e.notification.bean_module)("system-title",e.notification.bean_name),v.xp6(1),v.hij(" ",e.notification.bean_name," "),v.xp6(2),v.Q6J("id",e.notification.created_by)("system-title",e.notification.created_by_name),v.xp6(1),v.hij(" ",e.notification.created_by_name," "),v.xp6(2),v.hij(" ",e.notification.notification_date," ")}}let Ai=(()=>{class GlobalHeaderNotificationsItemAssign{constructor(e){this.notificationService=e,this.asBox=!1}}return GlobalHeaderNotificationsItemAssign.ɵfac=function(e){return new(e||GlobalHeaderNotificationsItemAssign)(v.Y36(ui.t))},GlobalHeaderNotificationsItemAssign.ɵcmp=v.Xpm({type:GlobalHeaderNotificationsItemAssign,selectors:[["global-header-notifications-item-assign"]],inputs:{notification:"notification",asBox:"asBox"},decls:3,vars:2,consts:[["class","slds-media slds-has-flexi-truncate slds-p-around_x-small",4,"ngIf","ngIfElse"],["boxContainer",""],[1,"slds-media","slds-has-flexi-truncate","slds-p-around_x-small"],[1,"slds-media__figure"],["class","slds-icon_container","style","width:40px;height:40px;",4,"ngIf"],[1,"slds-media__body"],[1,"slds-grid","slds-grid_align-spread"],["href","javascript:void(0);",1,"slds-text-link_reset","slds-has-flexi-truncate"],[1,"slds-truncate"],["system-title","LBL_ASSIGNED",1,"slds-m-right--xx-small"],["label","LBL_ASSIGNED"],["system-model-popover","",1,"slds-m-right--xxx-small",3,"id","module","system-title"],["label","LBL_BY"],["system-model-popover","","module","Users",1,"slds-m-right--xxx-small",3,"id","system-title"],[1,"slds-text-color_weak"],["system-title","LBL_UNREAD","class","slds-text-link slds-m-horizontal_xxx-small slds-text-color_success",4,"ngIf"],[1,"slds-icon_container",2,"width","40px","height","40px"],["icon","individual"],["system-title","LBL_UNREAD",1,"slds-text-link","slds-m-horizontal_xxx-small","slds-text-color_success"],["role","dialog",1,"slds-notification","slds-m-vertical--xxx-small"],[1,"slds-notification__body"],[1,"slds-notification__target","slds-media"],[1,"slds-text-heading_small","slds-m-bottom_xx-small"],["system-title","LBL_ASSIGNED"],["system-model-popover","",1,"slds-m-right--xxx-small",2,"text-decoration","underline",3,"id","module","system-title"],["system-model-popover","","module","Users",1,"slds-m-right--xxx-small",2,"text-decoration","underline",3,"id","system-title"],["system-title","LBL_CLOSE",1,"slds-button","slds-button_icon","slds-button_icon-container","slds-notification__close",3,"click"],["icon","close"]],template:function(e,t){if(1&e&&(v.YNc(0,Ti,17,12,"div",0),v.YNc(1,Ci,17,8,"ng-template",null,1,v.W1O)),2&e){const e=v.MAs(2);v.Q6J("ngIf",!t.asBox)("ngIfElse",e)}},dependencies:[i.O5,as.g,T.S,Y.J,O.f,C._],encapsulation:2}),GlobalHeaderNotificationsItemAssign})();function ki(e,t){1&e&&(v.TgZ(0,"span",16),v._UZ(1,"system-icon",17),v.qZA())}function Li(e,t){1&e&&(v.TgZ(0,"abbr",18),v._uU(1,"●"),v.qZA())}function Mi(e,t){if(1&e&&(v.TgZ(0,"div",2)(1,"div",3),v.YNc(2,ki,2,0,"span",4),v.qZA(),v.TgZ(3,"div",5)(4,"div",6)(5,"a",7)(6,"h3",8)(7,"span",9),v._UZ(8,"system-label",10),v.qZA(),v.TgZ(9,"span",11),v._uU(10),v.qZA(),v._UZ(11,"system-label",12),v.TgZ(12,"span",13),v._uU(13),v.qZA()(),v.TgZ(14,"p",14),v._uU(15),v.YNc(16,Li,2,0,"abbr",15),v.qZA()()()()()),2&e){const e=v.oxw();v.xp6(2),v.Q6J("ngIf",e.notification.bean_module),v.xp6(2),v.ekj("slds-text-title_bold",1!=e.notification.notification_read),v.xp6(5),v.Q6J("system-title",e.notification.bean_name),v.xp6(1),v.hij(" ",e.notification.bean_name," "),v.xp6(2),v.Q6J("id",e.notification.created_by)("system-title",e.notification.created_by_name),v.xp6(1),v.hij(" ",e.notification.created_by_name," "),v.xp6(2),v.hij(" ",e.notification.notification_date," "),v.xp6(1),v.Q6J("ngIf",1!=e.notification.notification_read)}}function Si(e,t){if(1&e){const e=v.EpF();v.TgZ(0,"section",19)(1,"div",20)(2,"a",21),v._UZ(3,"system-icon",17),v.TgZ(4,"div",5)(5,"h2",22)(6,"span",23),v._UZ(7,"system-label",24),v.qZA(),v.TgZ(8,"span",25),v._uU(9),v.qZA(),v._UZ(10,"system-label",12),v.TgZ(11,"span",26),v._uU(12),v.qZA()(),v.TgZ(13,"p"),v._uU(14),v.qZA()()(),v.TgZ(15,"button",27),v.NdJ("click",(function(){v.CHM(e);const t=v.oxw();return v.KtG(t.notificationService.clearTempNotification(t.notification))})),v._UZ(16,"system-button-icon",28),v.qZA()()()}if(2&e){const e=v.oxw();v.xp6(8),v.Q6J("id",e.notification.bean_id)("module",e.notification.bean_module)("system-title",e.notification.bean_name),v.xp6(1),v.hij(" ",e.notification.bean_name," "),v.xp6(2),v.Q6J("id",e.notification.created_by)("system-title",e.notification.created_by_name),v.xp6(1),v.hij(" ",e.notification.created_by_name," "),v.xp6(2),v.hij(" ",e.notification.notification_date," ")}}let Ii=(()=>{class GlobalHeaderNotificationsItemDelete{constructor(e){this.notificationService=e,this.asBox=!1}}return GlobalHeaderNotificationsItemDelete.ɵfac=function(e){return new(e||GlobalHeaderNotificationsItemDelete)(v.Y36(ui.t))},GlobalHeaderNotificationsItemDelete.ɵcmp=v.Xpm({type:GlobalHeaderNotificationsItemDelete,selectors:[["global-header-notifications-item-delete"]],inputs:{notification:"notification",asBox:"asBox"},decls:3,vars:2,consts:[["class","slds-media slds-has-flexi-truncate slds-p-around_x-small",4,"ngIf","ngIfElse"],["boxContainer",""],[1,"slds-media","slds-has-flexi-truncate","slds-p-around_x-small"],[1,"slds-media__figure"],["class","slds-icon_container","style","width:40px;height:40px;",4,"ngIf"],[1,"slds-media__body"],[1,"slds-grid","slds-grid_align-spread"],["href","javascript:void(0);",1,"slds-text-link_reset","slds-has-flexi-truncate"],[1,"slds-truncate"],["system-title","LBL_DELETED",1,"slds-m-right--xx-small"],["label","LBL_DELETED"],[1,"slds-m-right--xxx-small",3,"system-title"],["label","LBL_BY"],["system-model-popover","","module","Users",1,"slds-m-right--xxx-small",3,"id","system-title"],[1,"slds-text-color_weak"],["system-title","LBL_UNREAD","class","slds-text-link slds-m-horizontal_xxx-small slds-text-color_success",4,"ngIf"],[1,"slds-icon_container",2,"width","40px","height","40px"],["icon","record_delete"],["system-title","LBL_UNREAD",1,"slds-text-link","slds-m-horizontal_xxx-small","slds-text-color_success"],["role","dialog",1,"slds-notification","slds-m-vertical--xxx-small"],[1,"slds-notification__body"],[1,"slds-notification__target","slds-media"],[1,"slds-text-heading_small","slds-m-bottom_xx-small"],["system-title","LBL_ASSIGNED"],["label","LBL_ASSIGNED"],["system-model-popover","",1,"slds-m-right--xxx-small",2,"text-decoration","underline",3,"id","module","system-title"],["system-model-popover","","module","Users",1,"slds-m-right--xxx-small",2,"text-decoration","underline",3,"id","system-title"],["system-title","LBL_CLOSE",1,"slds-button","slds-button_icon","slds-button_icon-container","slds-notification__close",3,"click"],["icon","close"]],template:function(e,t){if(1&e&&(v.YNc(0,Mi,17,10,"div",0),v.YNc(1,Si,17,8,"ng-template",null,1,v.W1O)),2&e){const e=v.MAs(2);v.Q6J("ngIf",!t.asBox)("ngIfElse",e)}},dependencies:[i.O5,as.g,T.S,Y.J,O.f,C._],encapsulation:2}),GlobalHeaderNotificationsItemDelete})();var Oi=s(6538);function Ji(e,t){if(1&e&&v._UZ(0,"system-icon",12),2&e){const e=v.oxw();v.Q6J("module",e.notification.bean_module)}}let Ni=(()=>{class GlobalHeaderNotificationsItemReminder{constructor(e){this.notificationService=e,this.asBox=!1}}return GlobalHeaderNotificationsItemReminder.ɵfac=function(e){return new(e||GlobalHeaderNotificationsItemReminder)(v.Y36(ui.t))},GlobalHeaderNotificationsItemReminder.ɵcmp=v.Xpm({type:GlobalHeaderNotificationsItemReminder,selectors:[["global-header-notifications-item-reminder"]],inputs:{notification:"notification",asBox:"asBox"},decls:14,vars:6,consts:[["role","dialog",1,"slds-notification","slds-m-vertical--xxx-small"],[1,"slds-notification__body"],[1,"slds-notification__target","slds-media"],[3,"module",4,"ngIf"],[1,"slds-media__body"],[1,"slds-text-color_weak","slds-text-body_small"],["icon","custom25","sprite","custom"],[1,"slds-truncate"],["system-model-popover","",1,"slds-m-right--xxx-small",3,"id","module","system-title"],[3,"date"],["system-title","LBL_CLOSE",1,"slds-button","slds-button_icon","slds-button_icon-container","slds-notification__close",3,"click"],["icon","close"],[3,"module"]],template:function(e,t){1&e&&(v.TgZ(0,"section",0)(1,"div",1)(2,"a",2),v.YNc(3,Ji,1,1,"system-icon",3),v.TgZ(4,"div",4)(5,"div",5),v._UZ(6,"system-icon",6),v.qZA(),v.TgZ(7,"h3",7)(8,"span",8),v._uU(9),v.qZA()(),v.TgZ(10,"p",5),v._UZ(11,"system-display-datetime",9),v.qZA()()(),v.TgZ(12,"button",10),v.NdJ("click",(function(){return t.notificationService.clearTempNotification(t.notification)})),v._UZ(13,"system-button-icon",11),v.qZA()()()),2&e&&(v.xp6(3),v.Q6J("ngIf",t.notification.bean_module),v.xp6(5),v.Q6J("id",t.notification.bean_id)("module",t.notification.bean_module)("system-title",t.notification.bean_name),v.xp6(1),v.hij(" ",t.notification.bean_name," "),v.xp6(2),v.Q6J("date",t.notification.notification_date))},dependencies:[i.O5,as.g,T.S,Y.J,Oi.a,O.f],encapsulation:2}),GlobalHeaderNotificationsItemReminder})();var Fi=s(2355),qi=s(528);function Ei(e,t){if(1&e&&(v.TgZ(0,"div",7),v._uU(1),v.qZA()),2&e){const e=v.oxw();v.xp6(1),v.hij(" ",e.notificationService.unreadCount," ")}}function Yi(e,t){if(1&e){const e=v.EpF();v.TgZ(0,"a",20),v.NdJ("click",(function(){v.CHM(e);const t=v.oxw(2);return v.KtG(t.markAllAsRead())})),v._UZ(1,"system-label",21),v.qZA()}}function Qi(e,t){1&e&&(v.TgZ(0,"div",32),v._UZ(1,"system-label",33),v.qZA())}function Ui(e,t){if(1&e&&v._UZ(0,"global-header-notifications-item-assign",41),2&e){const e=v.oxw(2).$implicit;v.Q6J("notification",e)}}function Di(e,t){if(1&e&&v._UZ(0,"global-header-notifications-item-change",41),2&e){const e=v.oxw(2).$implicit;v.Q6J("notification",e)}}function ji(e,t){if(1&e&&v._UZ(0,"global-header-notifications-item-delete",41),2&e){const e=v.oxw(2).$implicit;v.Q6J("notification",e)}}function Ri(e,t){if(1&e&&v._UZ(0,"global-header-notifications-item-generic",41),2&e){const e=v.oxw(2).$implicit;v.Q6J("notification",e)}}function Bi(e,t){if(1&e){const e=v.EpF();v.TgZ(0,"li",35),v.YNc(1,Ui,1,1,"global-header-notifications-item-assign",36),v.YNc(2,Di,1,1,"global-header-notifications-item-change",36),v.YNc(3,ji,1,1,"global-header-notifications-item-delete",36),v.YNc(4,Ri,1,1,"global-header-notifications-item-generic",37),v.TgZ(5,"div",38),v.NdJ("click",(function(t){v.CHM(e);const s=v.oxw().$implicit;return v.oxw(3).markAsRead(s.id),v.KtG(t.stopPropagation())})),v.TgZ(6,"button",39),v._UZ(7,"system-button-icon",40),v.qZA()()()}if(2&e){const e=v.oxw().$implicit;v.Q6J("ngSwitch",e.notification_type),v.xp6(1),v.Q6J("ngSwitchCase","assign"),v.xp6(1),v.Q6J("ngSwitchCase","change"),v.xp6(1),v.Q6J("ngSwitchCase","delete")}}function Gi(e,t){if(1&e&&(v.ynx(0),v.YNc(1,Bi,8,4,"li",34),v.BQk()),2&e){const e=t.$implicit;v.xp6(1),v.Q6J("ngIf","reminder"!=e.notification_type)}}function Pi(e,t){1&e&&(v.TgZ(0,"div",42),v._UZ(1,"system-spinner"),v.qZA())}function Hi(e,t){if(1&e){const e=v.EpF();v.TgZ(0,"li",29)(1,"a",20),v.NdJ("click",(function(){v.CHM(e);const t=v.oxw(3);return v.KtG(t.manageSubscriptions())})),v._UZ(2,"system-label",43),v.qZA()()}}function zi(e,t){if(1&e){const e=v.EpF();v.TgZ(0,"div",22),v.YNc(1,Qi,2,0,"div",23),v.TgZ(2,"ul",24),v.YNc(3,Gi,2,1,"ng-container",25),v.qZA(),v.YNc(4,Pi,2,0,"div",26),v.TgZ(5,"div",27)(6,"ul",28)(7,"li",29)(8,"a",20),v.NdJ("click",(function(){v.CHM(e);const t=v.oxw(2);return v.KtG(t.showAllNotifications())})),v._UZ(9,"system-label",30),v.qZA()(),v.YNc(10,Hi,3,0,"li",31),v.qZA()()()}if(2&e){const e=v.oxw(2);v.xp6(1),v.Q6J("ngIf",0===(null==e.notificationService.unreadNotifications?null:e.notificationService.unreadNotifications.length)),v.xp6(2),v.Q6J("ngForOf",e.notificationService.unreadNotifications),v.xp6(1),v.Q6J("ngIf",e.notificationService.isLoading),v.xp6(6),v.Q6J("ngIf",e.hasSubscriptions)}}function Vi(e,t){if(1&e){const e=v.EpF();v.TgZ(0,"system-checkbox-toggle",47),v.NdJ("ngModelChange",(function(t){v.CHM(e);const s=v.oxw(3);return v.KtG(s.setDisplayDesktopNotification(t))})),v.qZA()}if(2&e){const e=v.oxw(3);v.Q6J("ngModel",e.userPreferences.toUse.displayDesktopNotifications)}}function Ki(e,t){1&e&&(v.TgZ(0,"div",48)(1,"span",49),v._UZ(2,"system-label",50),v.qZA(),v.TgZ(3,"span",51),v._UZ(4,"system-label",52),v.qZA()())}function $i(e,t){if(1&e){const e=v.EpF();v.TgZ(0,"div",32)(1,"system-checkbox-toggle",44),v.NdJ("ngModelChange",(function(t){v.CHM(e);const s=v.oxw(2);return v.KtG(s.setSetting("showRealtimeNotifications",t))})),v.qZA(),v.YNc(2,Vi,1,1,"system-checkbox-toggle",45),v.YNc(3,Ki,5,0,"ng-template",null,46,v.W1O),v.qZA()}if(2&e){const e=v.MAs(4),t=v.oxw(2);v.xp6(1),v.Q6J("ngModel",t.userPreferences.toUse.showRealtimeNotifications),v.xp6(1),v.Q6J("ngIf","denied"!==t.desktopNotificationsStatus&&!t.desktopNotificationsDisabled)("ngIfElse",e)}}function Xi(e,t){if(1&e){const e=v.EpF();v.TgZ(0,"section",8)(1,"div",9)(2,"header",10)(3,"h2",11),v._UZ(4,"system-label",12),v.qZA(),v.YNc(5,Yi,2,0,"a",13),v.qZA(),v.TgZ(6,"button",14),v.NdJ("click",(function(){v.CHM(e);const t=v.oxw();return v.KtG(t.toggleShowSettings())})),v._UZ(7,"system-button-icon",15),v.qZA(),v.TgZ(8,"button",16),v.NdJ("click",(function(){v.CHM(e);const t=v.oxw();return v.KtG(t.closePopover())})),v._UZ(9,"system-button-icon",17),v.qZA()(),v.YNc(10,zi,11,4,"div",18),v.YNc(11,$i,5,3,"ng-template",null,19,v.W1O),v.qZA()}if(2&e){const e=v.MAs(12),t=v.oxw();v.Q6J("ngStyle",t.popoverStyle),v.xp6(5),v.Q6J("ngIf",t.notificationService.unreadNotifications.length>0),v.xp6(2),v.Q6J("addclasses",t.showSettings?"slds-text-color--error":""),v.xp6(3),v.Q6J("ngIf",!t.showSettings)("ngIfElse",e)}}function Wi(e,t){if(1&e&&v._UZ(0,"global-header-notifications-item-assign",56),2&e){const e=v.oxw().$implicit;v.Q6J("asBox",!0)("notification",e)}}function en(e,t){if(1&e&&v._UZ(0,"global-header-notifications-item-change",56),2&e){const e=v.oxw().$implicit;v.Q6J("asBox",!0)("notification",e)}}function tn(e,t){if(1&e&&v._UZ(0,"global-header-notifications-item-delete",56),2&e){const e=v.oxw().$implicit;v.Q6J("asBox",!0)("notification",e)}}function sn(e,t){if(1&e&&v._UZ(0,"global-header-notifications-item-reminder",56),2&e){const e=v.oxw().$implicit;v.Q6J("asBox",!0)("notification",e)}}function nn(e,t){if(1&e&&v._UZ(0,"global-header-notifications-item-generic",56),2&e){const e=v.oxw().$implicit;v.Q6J("asBox",!0)("notification",e)}}function ln(e,t){if(1&e&&(v.ynx(0,53),v.YNc(1,Wi,1,2,"global-header-notifications-item-assign",54),v.YNc(2,en,1,2,"global-header-notifications-item-change",54),v.YNc(3,tn,1,2,"global-header-notifications-item-delete",54),v.YNc(4,sn,1,2,"global-header-notifications-item-reminder",54),v.YNc(5,nn,1,2,"global-header-notifications-item-generic",55),v.BQk()),2&e){const e=t.$implicit;v.Q6J("ngSwitch",e.notification_type),v.xp6(1),v.Q6J("ngSwitchCase","assign"),v.xp6(1),v.Q6J("ngSwitchCase","change"),v.xp6(1),v.Q6J("ngSwitchCase","delete"),v.xp6(1),v.Q6J("ngSwitchCase","reminder")}}const on=function(e){return{"slds-p-right--x-small":e}};let an=(()=>{class GlobalHeaderNotifications{constructor(e,t,s,i,n,l,o,a){this.notificationService=e,this.elementRef=t,this.modal=s,this.subscription=i,this.userPreferences=n,this.cdRef=l,this.router=o,this.renderer=a,this.isOpen=!1,this.showSettings=!1,this.right=0}get desktopNotificationsDisabled(){return!("Notification"in window)}get desktopNotificationsStatus(){return Notification.permission}markAsRead(e){this.notificationService.markAsRead(e)}markAllAsRead(){this.notificationService.markAllAsRead()}toggleOpenPopover(){let e=this.elementRef.nativeElement.getBoundingClientRect();this.right=window.innerWidth-e.right+(e.left-e.right)/2-3,this.isOpen=!this.isOpen,this.isOpen?(this.showSettings=!1,this.clickListener=this.renderer.listen("document","click",(e=>{this.elementRef.nativeElement.contains(e.target)||(this.isOpen=!1,this.clickListener())}))):this.clickListener&&this.clickListener()}get popoverStyle(){return{right:this.right+"px"}}closePopover(){this.isOpen=!1,this.clickListener&&this.clickListener()}toggleShowSettings(){this.showSettings=!this.showSettings}setSetting(e,t){this.userPreferences.setPreference(e,t)}setDisplayDesktopNotification(e){"default"===this.desktopNotificationsStatus?Notification.requestPermission().then((t=>{"granted"==t&&this.setSetting("displayDesktopNotifications",e),this.cdRef.detectChanges()})):this.setSetting("displayDesktopNotifications",e)}showAllNotifications(){this.closePopover(),this.router.navigate(["notifications"])}get hasSubscriptions(){return this.subscription.subscriptions.length>0}manageSubscriptions(){this.closePopover(),this.modal.openModal("GlobalSubscriptionsManager")}}return GlobalHeaderNotifications.ɵfac=function(e){return new(e||GlobalHeaderNotifications)(v.Y36(ui.t),v.Y36(v.SBq),v.Y36(E.o),v.Y36(Fi.J),v.Y36(Mt.z),v.Y36(v.sBO),v.Y36(q.F0),v.Y36(v.Qsj))},GlobalHeaderNotifications.ɵcmp=v.Xpm({type:GlobalHeaderNotifications,selectors:[["global-header-notifications"]],decls:7,vars:8,consts:[[1,"slds-dropdown-trigger","slds-dropdown-trigger_click","slds-m-right--xx-small",3,"ngClass"],["system-title","LBL_NOTIFICATIONS",1,"slds-global-actions__notifications","slds-global-actions__item-action","slds-incoming-notification",3,"click"],["icon","notification","size","x-small"],["style","top:-5px; right:0px;","class","slds-notification-badge slds-incoming-notification slds-show-notification",4,"ngIf"],["class","slds-popover slds-popover_large slds-nubbin_top-right slds-is-absolute slds-grid slds-grid--vertical","role","dialog","style","top: 48px; max-height: calc(100vh - 55px);",3,"ngStyle",4,"ngIf"],[1,"slds-notification-container"],[3,"ngSwitch",4,"ngFor","ngForOf"],[1,"slds-notification-badge","slds-incoming-notification","slds-show-notification",2,"top","-5px","right","0px"],["role","dialog",1,"slds-popover","slds-popover_large","slds-nubbin_top-right","slds-is-absolute","slds-grid","slds-grid--vertical",2,"top","48px","max-height","calc(100vh - 55px)",3,"ngStyle"],[1,"slds-grid","slds-border--bottom"],[1,"slds-popover__header","slds-grow","slds-grid","slds-grid--align-spread",2,"border-bottom","0"],[1,"slds-text-heading_small"],["label","LBL_UNREAD_NOTIFICATIONS"],["class","slds-text-link",3,"click",4,"ngIf"],["system-title","LBL_SETTINGS",1,"slds-button","slds-button--icon","slds-float_right","slds-popover__close",3,"click"],["icon","settings",3,"addclasses"],["system-title","LBL_CLOSE",1,"slds-button","slds-button--icon","slds-float_right","slds-m-right--x-small",3,"click"],["icon","close"],["class","slds-popover__body slds-p-around_none slds-grow slds-grid slds-grid--vertical","style","min-height: 0",4,"ngIf","ngIfElse"],["showSettingsContainer",""],[1,"slds-text-link",3,"click"],["label","LBL_MARK_ALL_READ"],[1,"slds-popover__body","slds-p-around_none","slds-grow","slds-grid","slds-grid--vertical",2,"min-height","0"],["class","slds-p-around--small",4,"ngIf"],[1,"slds-scrollable--y","slds-grow",2,"min-height","0"],[4,"ngFor","ngForOf"],["class","slds-align--absolute-center slds-p-around--small",4,"ngIf"],[1,"slds-has-divider--top","slds-p-around--x-small","slds-size--1-of-1","slds-align--absolute-center"],[1,"slds-list_horizontal","slds-has-dividers_right","slds-has-block-links"],[1,"slds-item"],["label","LBL_SHOW_ALL"],["class","slds-item",4,"ngIf"],[1,"slds-p-around--small"],["label","LBL_NO_ENTRIES"],["class","slds-global-header__notification spice-hover-display-children slds-is-relative",3,"ngSwitch",4,"ngIf"],[1,"slds-global-header__notification","spice-hover-display-children","slds-is-relative",3,"ngSwitch"],[3,"notification",4,"ngSwitchCase"],[3,"notification",4,"ngSwitchDefault"],[1,"slds-is-absolute","slds-height_full","spice-hover-child","slds-grid","slds-grid--vertical-align-center","slds-p-right--x-small",2,"right","0","top","0",3,"click"],["system-title","LBL_MARK_AS_READ",1,"slds-theme--default","slds-button","slds-button_icon","slds-button_icon-small","slds-float_right","slds-popover__close","slds-button--icon-border"],["icon","check","size","small"],[3,"notification"],[1,"slds-align--absolute-center","slds-p-around--small"],["label","LBL_MANAGE_MODEL_SUBSCRIPTIONS"],["label","LBL_REALTIME_NOTIFICATIONS",1,"slds-m-bottom--xx-small","spice-display-block",3,"ngModel","ngModelChange"],["label","LBL_DESKTOP_NOTIFICATIONS","class","slds-m-bottom--xx-small spice-display-block",3,"ngModel","ngModelChange",4,"ngIf","ngIfElse"],["desktopNotificationDeniedContainer",""],["label","LBL_DESKTOP_NOTIFICATIONS",1,"slds-m-bottom--xx-small","spice-display-block",3,"ngModel","ngModelChange"],[1,"slds-grid","slds-grid--align-spread"],[1,"slds-grow","slds-text-body--small"],["label","LBL_DESKTOP_NOTIFICATIONS"],[1,"slds-text-color_error"],["label","LBL_DENIED"],[3,"ngSwitch"],[3,"asBox","notification",4,"ngSwitchCase"],[3,"asBox","notification",4,"ngSwitchDefault"],[3,"asBox","notification"]],template:function(e,t){1&e&&(v.TgZ(0,"div",0)(1,"div",1),v.NdJ("click",(function(){return t.toggleOpenPopover()})),v._UZ(2,"system-utility-icon",2),v.qZA(),v.YNc(3,Ei,2,1,"div",3),v.qZA(),v.YNc(4,Xi,13,5,"section",4),v.TgZ(5,"div",5),v.YNc(6,ln,6,5,"ng-container",6),v.qZA()),2&e&&(v.Q6J("ngClass",v.VKq(6,on,t.notificationService.unreadCount>0)),v.xp6(3),v.Q6J("ngIf",t.notificationService.unreadCount>0),v.xp6(1),v.Q6J("ngIf",t.isOpen),v.xp6(1),v.ekj("slds-hidden",0===t.notificationService.newNotifications.length),v.xp6(1),v.Q6J("ngForOf",t.notificationService.newNotifications))},dependencies:[i.mk,i.sg,i.O5,i.PC,i.RF,i.n9,i.ED,n.JJ,n.On,T.S,Y.J,qi.v,C._,$.W,A.r,fi,Ni,xi,Ai,Ii],encapsulation:2}),GlobalHeaderNotifications})();var dn=s(5681),rn=s(3194);function cn(e,t){if(1&e){const e=v.EpF();v.TgZ(0,"system-checkbox-toggle",39),v.NdJ("ngModelChange",(function(t){v.CHM(e);const s=v.oxw();return v.KtG(s.setDisplayDesktopNotification(t))})),v.qZA()}if(2&e){const e=v.oxw();v.Q6J("ngModel",e.userPreferences.toUse.displayDesktopNotifications)}}function un(e,t){1&e&&(v.TgZ(0,"div",40)(1,"span",41),v._UZ(2,"system-label",42),v.qZA(),v.TgZ(3,"span",43),v._UZ(4,"system-label",44),v.qZA()())}function mn(e,t){1&e&&(v.TgZ(0,"div",20),v._UZ(1,"system-label",45),v.qZA())}function hn(e,t){1&e&&v._UZ(0,"system-icon",68)}function gn(e,t){1&e&&v._UZ(0,"system-icon",69)}function pn(e,t){1&e&&v._UZ(0,"system-icon",70)}function fn(e,t){1&e&&v._UZ(0,"system-icon",71)}function bn(e,t){1&e&&v._UZ(0,"system-icon",72)}function _n(e,t){1&e&&v._UZ(0,"system-label",73)}function yn(e,t){1&e&&v._UZ(0,"system-label",74)}function vn(e,t){1&e&&v._UZ(0,"system-label",75)}function xn(e,t){1&e&&v._UZ(0,"system-label",76)}function Zn(e,t){1&e&&v._UZ(0,"system-label",77)}function wn(e,t){if(1&e){const e=v.EpF();v.TgZ(0,"tr",46)(1,"td",47)(2,"div",48),v.YNc(3,hn,1,0,"system-icon",49),v.YNc(4,gn,1,0,"system-icon",50),v.YNc(5,pn,1,0,"system-icon",51),v.YNc(6,fn,1,0,"system-icon",52),v.YNc(7,bn,1,0,"system-icon",53),v.qZA()(),v.TgZ(8,"td")(9,"div",54),v.YNc(10,_n,1,0,"system-label",55),v.YNc(11,yn,1,0,"system-label",56),v.YNc(12,vn,1,0,"system-label",57),v.YNc(13,xn,1,0,"system-label",58),v.YNc(14,Zn,1,0,"system-label",59),v.qZA()(),v.TgZ(15,"td",60)(16,"div",61),v._UZ(17,"system-label-modulename",62),v.qZA()(),v.TgZ(18,"td",60)(19,"div",61),v._uU(20),v.qZA()(),v.TgZ(21,"td",63)(22,"div",61),v._uU(23),v.qZA()(),v.TgZ(24,"td",64)(25,"div",61),v._uU(26),v.qZA()(),v.TgZ(27,"td",65)(28,"button",66),v.NdJ("click",(function(){const t=v.CHM(e).$implicit,s=v.oxw();return v.KtG(s.markAsRead(t.id))})),v._UZ(29,"system-button-icon",67),v.qZA()()()}if(2&e){const e=t.$implicit;v.ekj("slds-text-title_bold",1!=e.notification_read),v.xp6(2),v.Q6J("ngSwitch",e.notification_type),v.xp6(1),v.Q6J("ngSwitchCase","assign"),v.xp6(1),v.Q6J("ngSwitchCase","change"),v.xp6(1),v.Q6J("ngSwitchCase","delete"),v.xp6(1),v.Q6J("ngSwitchCase","reminder"),v.xp6(3),v.Q6J("ngSwitch",e.notification_type),v.xp6(1),v.Q6J("ngSwitchCase","assign"),v.xp6(1),v.Q6J("ngSwitchCase","change"),v.xp6(1),v.Q6J("ngSwitchCase","delete"),v.xp6(1),v.Q6J("ngSwitchCase","reminder"),v.xp6(2),v.Q6J("id",e.bean_id)("module",e.bean_module)("system-title",e.bean_module),v.xp6(2),v.Q6J("module",e.bean_module),v.xp6(1),v.Q6J("id",e.bean_id)("module",e.bean_module)("system-title",e.bean_name),v.xp6(2),v.hij(" ",e.bean_name," "),v.xp6(1),v.Q6J("id",e.created_by_name)("system-title",e.created_by_name),v.xp6(2),v.hij(" ",e.created_by_name," "),v.xp6(1),v.Q6J("system-title",e.notification_date),v.xp6(2),v.hij(" ",e.notification_date," "),v.xp6(2),v.Q6J("disabled",1==e.notification_read)}}function Tn(e,t){1&e&&(v.TgZ(0,"div",78),v._UZ(1,"system-spinner"),v.qZA())}let Cn=(()=>{class GlobalNotificationsListView{constructor(e,t,s,i,n){this.notificationService=e,this.navigationTab=t,this.language=s,this.cdRef=i,this.userPreferences=n,this.setTabInfo()}get desktopNotificationsDisabled(){return!("Notification"in window)}get desktopNotificationsStatus(){return Notification.permission}setTabInfo(){this.navigationTab.setTabInfo({displayname:this.language.getLabel("LBL_NOTIFICATIONS"),displayicon:"notification"})}reload(){this.notificationService.reloadNotifications()}markAsRead(e){this.notificationService.markAsRead(e)}markAllAsRead(){this.notificationService.markAllAsRead()}onScroll(e){e.scrollTop+e.clientHeight+50>e.scrollHeight&&this.notificationService.loadMoreNotifications()}setSetting(e,t){this.userPreferences.setPreference(e,t)}setDisplayDesktopNotification(e){"default"===this.desktopNotificationsStatus?Notification.requestPermission().then((t=>{"granted"==t&&this.setSetting("displayDesktopNotifications",e),this.cdRef.detectChanges()})):this.setSetting("displayDesktopNotifications",e)}}return GlobalNotificationsListView.ɵfac=function(e){return new(e||GlobalNotificationsListView)(v.Y36(ui.t),v.Y36(os.d),v.Y36(w.d),v.Y36(v.sBO),v.Y36(Mt.z))},GlobalNotificationsListView.ɵcmp=v.Xpm({type:GlobalNotificationsListView,selectors:[["global-notifications-list-view"]],decls:54,vars:8,consts:[["system-to-bottom-noscroll","",1,"slds-grid","slds-grid--vertical"],[1,"slds-grid","slds-border--bottom","slds-p-around--medium"],[1,"slds-grow","slds-grid","slds-grid--align-spread",2,"border-bottom","0"],[1,"slds-page-header__title"],["icon","notification","size","x-small"],["label","LBL_NOTIFICATIONS"],[1,"slds-text-body--small","slds-m-left--large"],["label","LBL_OF"],["label","LBL_ITEMS"],[1,"slds-grid","slds-grid--vertical-align-center"],[1,"slds-text-link",3,"click"],["label","LBL_MARK_ALL_READ"],["system-title","LBL_RELOAD",1,"slds-button","slds-button--icon","slds-m-left--xx-small","slds-button--icon-border-filled",3,"click"],["icon","refresh"],["system-dropdown-trigger","","role","combobox",1,"slds-dropdown-trigger","slds-dropdown-trigger_click"],["system-title","LBL_SETTINGS",1,"slds-button","slds-button--icon","slds-m-left--xx-small","slds-button--icon-border-filled"],["icon","settings"],[1,"slds-dropdown","slds-dropdown_x-small","slds-dropdown_left",3,"click"],[1,"slds-has-divider--bottom-space","slds-p-horizontal--small","slds-p-top--xx-small","slds-text-title--caps"],["label","LBL_SETTINGS"],[1,"slds-p-around--small"],["label","LBL_REALTIME_NOTIFICATIONS",1,"slds-m-bottom--xx-small","spice-display-block",3,"ngModel","ngModelChange"],["label","LBL_DESKTOP_NOTIFICATIONS","class","slds-m-bottom--xx-small spice-display-block",3,"ngModel","ngModelChange",4,"ngIf","ngIfElse"],["desktopNotificationDeniedContainer",""],[1,"slds-scrollable--y","slds-theme--default","slds-height_full",3,"scroll"],["scrollContainer",""],["class","slds-p-around--small",4,"ngIf"],[1,"slds-table","slds-table_bordered","slds-max-medium-table_stacked-horizontal","slds-table--header-fixed"],[1,"slds-text-title--caps"],["scope","col",1,"slds-cell-shrink"],["scope","col"],[1,"slds-truncate","slds-p-around--x-small"],["label","LBL_TYPE"],["label","LBL_MODULE"],["label","LBL_RECORD"],["label","LBL_CREATED_BY"],["label","LBL_DATE"],["class","spice-hover-display-children",3,"slds-text-title_bold",4,"ngFor","ngForOf"],["class","slds-align--absolute-center slds-p-around--small slds-height_full",4,"ngIf"],["label","LBL_DESKTOP_NOTIFICATIONS",1,"slds-m-bottom--xx-small","spice-display-block",3,"ngModel","ngModelChange"],[1,"slds-grid","slds-grid--align-spread"],[1,"slds-grow","slds-text-body--small"],["label","LBL_DESKTOP_NOTIFICATIONS"],[1,"slds-text-color_error"],["label","LBL_DENIED"],["label","LBL_NO_ENTRIES"],[1,"spice-hover-display-children"],[1,"slds-cell-shrink"],[3,"ngSwitch"],["icon","individual",4,"ngSwitchCase"],["icon","custom18","sprite","custom",4,"ngSwitchCase"],["icon","record_delete",4,"ngSwitchCase"],["icon","custom25","sprite","custom",4,"ngSwitchCase"],["icon","all",4,"ngSwitchDefault"],[1,"slds-truncate",3,"ngSwitch"],["label","LBL_ASSIGNMENT",4,"ngSwitchCase"],["label","LBL_CHANGE",4,"ngSwitchCase"],["label","LBL_DELETION",4,"ngSwitchCase"],["label","LBL_REMINDER",4,"ngSwitchCase"],["label","LBL_NOT_SET",4,"ngSwitchDefault"],["system-model-popover","",3,"id","module","system-title"],[1,"slds-truncate"],[3,"module"],["system-model-popover","","module","Users",3,"id","system-title"],[3,"system-title"],["system-title","LBL_MARK_AS_READ",1,"slds-cell-shrink"],[1,"slds-button","slds-button_icon","slds-button--icon-border","spice-hover-child",3,"disabled","click"],["icon","check","size","small"],["icon","individual"],["icon","custom18","sprite","custom"],["icon","record_delete"],["icon","custom25","sprite","custom"],["icon","all"],["label","LBL_ASSIGNMENT"],["label","LBL_CHANGE"],["label","LBL_DELETION"],["label","LBL_REMINDER"],["label","LBL_NOT_SET"],[1,"slds-align--absolute-center","slds-p-around--small","slds-height_full"]],template:function(e,t){if(1&e){const e=v.EpF();v.TgZ(0,"div",0)(1,"div",1)(2,"header",2)(3,"div")(4,"h2",3),v._UZ(5,"system-utility-icon",4)(6,"system-label",5),v.qZA(),v.TgZ(7,"p",6),v._uU(8),v._UZ(9,"system-label",7),v._uU(10),v._UZ(11,"system-label",8),v.qZA()(),v.TgZ(12,"div",9)(13,"a",10),v.NdJ("click",(function(){return t.markAllAsRead()})),v._UZ(14,"system-label",11),v.qZA(),v.TgZ(15,"button",12),v.NdJ("click",(function(){return t.reload()})),v._UZ(16,"system-button-icon",13),v.qZA(),v.TgZ(17,"div",14)(18,"button",15),v._UZ(19,"system-button-icon",16),v.qZA(),v.TgZ(20,"div",17),v.NdJ("click",(function(e){return e.stopPropagation()})),v.TgZ(21,"div",18),v._UZ(22,"system-label",19),v.qZA(),v.TgZ(23,"div",20)(24,"system-checkbox-toggle",21),v.NdJ("ngModelChange",(function(e){return t.setSetting("showRealtimeNotifications",e)})),v.qZA(),v.YNc(25,cn,1,1,"system-checkbox-toggle",22),v.YNc(26,un,5,0,"ng-template",null,23,v.W1O),v.qZA()()()()()(),v.TgZ(28,"div",24,25),v.NdJ("scroll",(function(){v.CHM(e);const s=v.MAs(29);return v.KtG(t.onScroll(s))})),v.YNc(30,mn,2,0,"div",26),v.TgZ(31,"table",27)(32,"thead")(33,"tr",28),v._UZ(34,"th",29),v.TgZ(35,"th",30)(36,"div",31),v._UZ(37,"system-label",32),v.qZA()(),v.TgZ(38,"th",30)(39,"div",31),v._UZ(40,"system-label",33),v.qZA()(),v.TgZ(41,"th",30)(42,"div",31),v._UZ(43,"system-label",34),v.qZA()(),v.TgZ(44,"th",30)(45,"div",31),v._UZ(46,"system-label",35),v.qZA()(),v.TgZ(47,"th",30)(48,"div",31),v._UZ(49,"system-label",36),v.qZA()(),v._UZ(50,"th",29),v.qZA()(),v.TgZ(51,"tbody"),v.YNc(52,wn,30,26,"tr",37),v.qZA()(),v.YNc(53,Tn,2,0,"div",38),v.qZA()()}if(2&e){const e=v.MAs(27);v.xp6(8),v.hij(" ",t.notificationService.notifications.length," "),v.xp6(2),v.hij(" ",t.notificationService.totalCount," "),v.xp6(14),v.Q6J("ngModel",t.userPreferences.toUse.showRealtimeNotifications),v.xp6(1),v.Q6J("ngIf","denied"!==t.desktopNotificationsStatus&&!t.desktopNotificationsDisabled)("ngIfElse",e),v.xp6(5),v.Q6J("ngIf",0===(null==t.notificationService.notifications?null:t.notificationService.notifications.length)&&!t.notificationService.isLoading),v.xp6(22),v.Q6J("ngForOf",t.notificationService.notifications),v.xp6(1),v.Q6J("ngIf",t.notificationService.isLoading)}},dependencies:[i.sg,i.O5,i.RF,i.n9,i.ED,n.JJ,n.On,as.g,dn.l,rn.t,T.S,Y.J,qi.v,O.f,C._,je.M,$.W,A.r],encapsulation:2}),GlobalNotificationsListView})();function An(e,t){if(1&e&&(v.TgZ(0,"div",1)(1,"div"),v._uU(2),v.qZA(),v.TgZ(3,"div",2)(4,"div",3),v._uU(5),v.qZA(),v.TgZ(6,"div",3),v._uU(7),v.qZA(),v.TgZ(8,"div",3),v._uU(9),v.qZA(),v.TgZ(10,"div"),v._uU(11),v.qZA()()()),2&e){const e=v.oxw();v.xp6(2),v.Oqu(e.event),v.xp6(3),v.hij("",e.timeleft.daysToDday,"d"),v.xp6(2),v.hij("",e.timeleft.hoursToDday,"h"),v.xp6(2),v.hij("",e.timeleft.minutesToDday,"m"),v.xp6(2),v.hij("",e.timeleft.secondsToDday,"s")}}let kn=(()=>{class GlobalCountdown{constructor(e,t){this.zone=e,this.cdref=t,this.visible=!1}ngOnInit(){let e=new moment(this.targetdate);this.visible=moment().isBefore(e),this.visible&&this.zone.runOutsideAngular((()=>{this.timer=setInterval((()=>{this.update()}),1e3)}))}update(){this.timeleft=this.calcDateDiff(),this.cdref.detectChanges()}calcDateDiff(){let e=new moment(this.targetdate),t=moment.duration(e.diff(new moment));return{secondsToDday:t.get("seconds").toString().padStart(2,"0"),minutesToDday:t.get("minutes").toString().padStart(2,"0"),hoursToDday:t.get("hours").toString().padStart(2,"0"),daysToDday:Math.floor(t.as("days")).toString()}}}return GlobalCountdown.ɵfac=function(e){return new(e||GlobalCountdown)(v.Y36(v.R0b),v.Y36(v.sBO))},GlobalCountdown.ɵcmp=v.Xpm({type:GlobalCountdown,selectors:[["global-countdown"]],inputs:{event:"event",targetdate:"targetdate"},decls:1,vars:1,consts:[["class","slds-grid--vertical slds-text-body--small slds-p-horizontal--small slds-m-left--small slds-border--left",4,"ngIf"],[1,"slds-grid--vertical","slds-text-body--small","slds-p-horizontal--small","slds-m-left--small","slds-border--left"],[1,"slds-grid"],[1,"slds-p-right--xxx-small"]],template:function(e,t){1&e&&v.YNc(0,An,12,5,"div",0),2&e&&v.Q6J("ngIf",t.timeleft&&t.visible)},dependencies:[i.O5],encapsulation:2,changeDetection:0}),GlobalCountdown})();var Ln=s(2057);function Mn(e,t){1&e&&(v.TgZ(0,"div",17),v._UZ(1,"system-label",18),v.qZA())}const Sn=function(e,t,s){return{module:e,id:t,data:s}};function In(e,t){if(1&e){const e=v.EpF();v.TgZ(0,"li",19)(1,"div",20),v._UZ(2,"system-icon",21),v.TgZ(3,"div",22),v.NdJ("clicked",(function(){v.CHM(e);const t=v.oxw(3);return v.KtG(t.closePopover())})),v._uU(4),v.qZA(),v._UZ(5,"system-display-datetime",23),v.TgZ(6,"button",24),v.NdJ("click",(function(){const t=v.CHM(e).$implicit,s=v.oxw(3);return v.KtG(s.deleteReminder(t))})),v._UZ(7,"system-button-icon",25),v.qZA()()()}if(2&e){const e=t.$implicit;v.xp6(1),v.Q6J("system-model-provider",v.kEZ(5,Sn,e.module_name,e.item_id,e.data)),v.xp6(1),v.Q6J("module",e.module_name),v.xp6(2),v.Oqu(e.data.summary_text),v.xp6(1),v.Q6J("date",e.reminder_date)("displayTime",!1)}}function On(e,t){if(1&e){const e=v.EpF();v.TgZ(0,"section",6)(1,"div",7)(2,"header",8)(3,"h2",9),v._UZ(4,"system-label",10),v.qZA()(),v.TgZ(5,"button",11),v.NdJ("click",(function(){v.CHM(e);const t=v.oxw(2);return v.KtG(t.closePopover())})),v._UZ(6,"system-button-icon",12),v.qZA()(),v.TgZ(7,"div",13),v.YNc(8,Mn,2,0,"div",14),v.TgZ(9,"ul",15),v.YNc(10,In,8,9,"li",16),v.qZA()()()}if(2&e){const e=v.oxw(2);v.Q6J("ngStyle",e.popoverStyle),v.xp6(8),v.Q6J("ngIf",0===e.currentReminders.length),v.xp6(2),v.Q6J("ngForOf",e.currentReminders)}}function Jn(e,t){if(1&e){const e=v.EpF();v.TgZ(0,"div")(1,"div",1)(2,"div",2),v.NdJ("click",(function(){v.CHM(e);const t=v.oxw();return v.KtG(t.toggleOpenPopover())})),v._UZ(3,"system-utility-icon",3),v.qZA(),v.TgZ(4,"div",4),v._uU(5),v.qZA()(),v.YNc(6,On,11,3,"section",5),v.qZA()}if(2&e){const e=v.oxw();v.xp6(5),v.hij(" ",e.currentReminders.length," "),v.xp6(1),v.Q6J("ngIf",e.isOpen)}}let Nn=(()=>{class GlobalHeaderReminders{constructor(e,t,s,i,n,l){this.reminder=e,this.elementRef=t,this.userPreferences=s,this.cdRef=i,this.router=n,this.renderer=l,this.isOpen=!1,this.right=0}get currentReminders(){return this.reminder.reminders?this.reminder.reminders.filter((e=>moment(e.reminder_date).isSameOrBefore(new moment,"day"))).sort(((e,t)=>moment(e.reminder_date).isBefore(moment(t.reminder_date))?-1:1)):[]}toggleOpenPopover(){let e=this.elementRef.nativeElement.getBoundingClientRect();this.right=window.innerWidth-e.right+(e.left-e.right)/2+10,this.isOpen=!this.isOpen,this.isOpen?this.clickListener=this.renderer.listen("window","click",(e=>{this.elementRef.nativeElement.contains(e.target)||(this.isOpen=!1,this.clickListener())})):this.clickListener&&this.clickListener()}deleteReminder(e){this.reminder.deleteReminder(e.module_name,e.item_id)}get popoverStyle(){return{right:this.right+"px"}}closePopover(){this.isOpen=!1,this.clickListener&&this.clickListener()}}return GlobalHeaderReminders.ɵfac=function(e){return new(e||GlobalHeaderReminders)(v.Y36(Ln.U),v.Y36(v.SBq),v.Y36(Mt.z),v.Y36(v.sBO),v.Y36(q.F0),v.Y36(v.Qsj))},GlobalHeaderReminders.ɵcmp=v.Xpm({type:GlobalHeaderReminders,selectors:[["global-header-reminders"]],decls:1,vars:1,consts:[[4,"ngIf"],[1,"slds-dropdown-trigger","slds-dropdown-trigger_click","slds-m-right--xx-small","slds-p-right--x-small"],["system-title","LBL_NOTIFICATIONS",1,"slds-global-actions__notifications","slds-global-actions__item-action","slds-incoming-notification",3,"click"],["icon","reminder","size","x-small"],[1,"slds-notification-badge","slds-incoming-notification","slds-show-notification",2,"top","-5px","right","0px"],["class","slds-popover slds-popover_large slds-nubbin_top-right slds-is-absolute slds-grid slds-grid--vertical","role","dialog","style","top: 48px; max-height: calc(100vh - 55px);",3,"ngStyle",4,"ngIf"],["role","dialog",1,"slds-popover","slds-popover_large","slds-nubbin_top-right","slds-is-absolute","slds-grid","slds-grid--vertical",2,"top","48px","max-height","calc(100vh - 55px)",3,"ngStyle"],[1,"slds-grid","slds-border--bottom"],[1,"slds-popover__header","slds-grow","slds-grid","slds-grid--align-spread",2,"border-bottom","0"],[1,"slds-text-heading_small"],["label","LBL_CURRENT_REMINDERS"],["system-title","LBL_CLOSE",1,"slds-button","slds-button--icon","slds-float_right","slds-m-right--x-small",3,"click"],["icon","close"],[1,"slds-popover__body","slds-p-around_none","slds-grow","slds-grid","slds-grid--vertical",2,"min-height","0"],["class","slds-p-around--small",4,"ngIf"],[1,"slds-scrollable--y","slds-grow",2,"min-height","0"],["class","slds-global-header__notification spice-hover-display-children slds-is-relative",4,"ngFor","ngForOf"],[1,"slds-p-around--small"],["label","LBL_NO_ENTRIES"],[1,"slds-global-header__notification","spice-hover-display-children","slds-is-relative"],[1,"slds-grid","slds-p-around--xx-small","slds-grid--vertical-align-center",3,"system-model-provider"],["size","xx-small",3,"module"],["system-model-popover","",1,"slds-grow","slds-p-right--xx-small",3,"clicked"],[3,"date","displayTime"],[1,"slds-m-left--x-small","slds-button","slds-button--icon",3,"click"],["icon","clear"]],template:function(e,t){1&e&&v.YNc(0,Jn,7,2,"div",0),2&e&&v.Q6J("ngIf",t.currentReminders.length>0)},dependencies:[i.sg,i.O5,i.PC,as.g,De.u,T.S,Y.J,Oi.a,O.f,C._,A.r],encapsulation:2}),GlobalHeaderReminders})();const Fn=function(e,t,s){return{module:e,id:t,data:s}};function qn(e,t){if(1&e){const e=v.EpF();v.TgZ(0,"div",7),v._UZ(1,"system-icon",8),v.TgZ(2,"div",9),v.NdJ("clicked",(function(){v.CHM(e);const t=v.oxw();return v.KtG(t.close())})),v._uU(3),v.qZA(),v.TgZ(4,"button",10),v.NdJ("click",(function(){const t=v.CHM(e).$implicit,s=v.oxw();return v.KtG(s.deleteSubscription(t))})),v._UZ(5,"system-button-icon",11),v.qZA()()}if(2&e){const e=t.$implicit;v.Q6J("system-model-provider",v.kEZ(3,Fn,e.bean_module,e.bean_id,e.data)),v.xp6(1),v.Q6J("module",e.bean_module),v.xp6(2),v.Oqu(e.data.summary_text)}}let En=(()=>{class GlobalSubscriptionsManager{constructor(e){this.subscriptions=e,this.loading=!1}deleteSubscription(e){this.loading=!0,this.subscriptions.unsubscribeBean(e.bean_id,e.bean_module).subscribe((()=>{this.loading=!1,0==this.subscriptions.subscriptions.length&&this.close()}),(()=>{this.loading=!1}))}close(){this.self.destroy()}}return GlobalSubscriptionsManager.ɵfac=function(e){return new(e||GlobalSubscriptionsManager)(v.Y36(Fi.J))},GlobalSubscriptionsManager.ɵcmp=v.Xpm({type:GlobalSubscriptionsManager,selectors:[["global-subscriptions-manager"]],decls:8,vars:2,consts:[["size","small"],[3,"close"],["label","LBL_MANAGE_MODEL_SUBSCRIPTIONS"],["system-modal-content-grow","","margin","none",3,"system-overlay-loading-spinner"],["class","slds-p-around--x-small slds-grid slds-grid--vertical-align-center slds-border--bottom",3,"system-model-provider",4,"ngFor","ngForOf"],[1,"slds-button","slds-button--brand"],["label","LBL_CLOSE"],[1,"slds-p-around--x-small","slds-grid","slds-grid--vertical-align-center","slds-border--bottom",3,"system-model-provider"],["size","xx-small",3,"module"],["system-model-popover","",1,"slds-grow",3,"clicked"],[1,"slds-button","slds-button--icon",3,"click"],["icon","clear"]],template:function(e,t){1&e&&(v.TgZ(0,"system-modal",0)(1,"system-modal-header",1),v.NdJ("close",(function(){return t.close()})),v._UZ(2,"system-label",2),v.qZA(),v.TgZ(3,"system-modal-content",3),v.YNc(4,qn,6,7,"div",4),v.qZA(),v.TgZ(5,"system-modal-footer")(6,"button",5),v._UZ(7,"system-label",6),v.qZA()()()),2&e&&(v.xp6(3),v.Q6J("system-overlay-loading-spinner",t.loading),v.xp6(1),v.Q6J("ngForOf",t.subscriptions.subscriptions))},dependencies:[i.sg,as.g,De.u,xe._,Y.J,O.f,C._,Ze.j,we.x,Se.p,Te.y],encapsulation:2}),GlobalSubscriptionsManager})();var Yn=s(7579);let Qn=(()=>{class OAuth2Service{constructor(e,t){this.renderer=e,this.http=t}codeFlowLogin(){const e=new Yn.x;let t;const s=this.generateState(),i=this.generateLoginUrl(s),n=window.open(i,"SpiceCRM OAuth2 login",this.popupWindowRect());n?t=window.setInterval((()=>{n?.closed&&(o(),e.error("window closed"))}),500):e.error("window blocked");const l=this.renderer.listen("window","message",(t=>{if(o(),!t.data)return;const i=this.parseRedirectQueryString(t.data);i.error?e.error(i.error):i.state!==s?e.error("Invalid state"):i?(e.next(i.code),e.complete()):e.error("invalid redirect uri data")})),o=()=>{window.clearInterval(t),l(),n&&n.close()};return e.asObservable()}generateState(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";let t=new Uint8Array(40);window.crypto.getRandomValues(t),t=t.map((t=>e.charCodeAt(t%e.length)));const s=String.fromCharCode.apply(null,t);return btoa(s)}generateLoginUrl(e){const t=new URLSearchParams({state:e,response_type:"code",client_id:this.config.client_id,redirect_uri:this.config.redirect_uri,scope:this.config.scope});return`${this.config.login_url}?${t.toString()}`}popupWindowRect(){const e=window.screenLeft+(window.outerWidth-500)/2;return`width=500,height=600,top=${window.screenTop+(window.outerHeight-600)/2},left=${e}`}parseRedirectQueryString(e){const t=e.substring(1).split("&"),s={};return t.forEach((e=>{const t=e.split("=");s[t[0]]=decodeURIComponent(t[1])})),s}}return OAuth2Service.ɵfac=function(e){return new(e||OAuth2Service)(v.LFG(v.Qsj),v.LFG(ae.eN))},OAuth2Service.ɵprov=v.Yz7({token:OAuth2Service,factory:OAuth2Service.ɵfac}),OAuth2Service})();function Un(e,t){if(1&e&&v._UZ(0,"img",2),2&e){const e=v.oxw();v.Q6J("src",e.service.icon,v.LSH)("alt",e.service.name)}}let Dn=(()=>{class GlobalLoginOAuth2Button{constructor(e,t,s,i,n){this.http=e,this.oauth2Service=t,this.configurationService=s,this.parent=i,this.toast=n,this.visible=!1,this.disabled=!0}get service(){return this._service}set service(e){e&&(this._service=e,this.initialize(e.config))}initialize(e){if(!(e?.client_id&&e.login_url&&e.userinfo_endpoint&&e.token_endpoint))return this.disabled=!0;this.visible=!0,this.oauth2Service.config={client_id:e.client_id,scope:e.scope,token_endpoint:e.token_endpoint,userinfo_endpoint:e.userinfo_endpoint,login_url:e.login_url,redirect_uri:e.redirect_uri,client_secret:e.client_secret},this.disabled=!1}signIn(e){e.preventDefault(),e.stopPropagation();const t=this.configurationService.getBackendUrl()+"/authentication/oauth2/accessToken";this.oauth2Service.codeFlowLogin().subscribe((e=>{this.http.post(t,{issuer:this.service.issuer,code:e}).subscribe((e=>{this.authenticatedUser?this.authenticatedUser==e.profile.email?this.parent.token.emit({issuer:this.service.issuer,accessToken:e.accessToken}):this.toast.sendToast("Wrong username","warning","usernames do not match, please relogin with the proper user"):this.parent.token.emit({issuer:this.service.issuer,accessToken:e.accessToken})}))}))}}return GlobalLoginOAuth2Button.ɵfac=function(e){return new(e||GlobalLoginOAuth2Button)(v.Y36(ae.eN),v.Y36(Qn),v.Y36(V.C),v.Y36(Ce.Q,1),v.Y36(K.A))},GlobalLoginOAuth2Button.ɵcmp=v.Xpm({type:GlobalLoginOAuth2Button,selectors:[["global-login-oauth2-button"]],inputs:{authenticatedUser:"authenticatedUser",service:"service"},features:[v._Bn([Qn])],decls:3,vars:2,consts:[[1,"slds-button","slds-button_neutral","slds-size--1-of-1","slds-m-bottom--xx-small",3,"click"],["class","slds-m-right--x-small","style","height: 16px; width: 16px",3,"src","alt",4,"ngIf"],[1,"slds-m-right--x-small",2,"height","16px","width","16px",3,"src","alt"]],template:function(e,t){1&e&&(v.TgZ(0,"button",0),v.NdJ("click",(function(e){return t.signIn(e)})),v.YNc(1,Un,1,2,"img",1),v._uU(2),v.qZA()),2&e&&(v.xp6(1),v.Q6J("ngIf",!!t.service.icon),v.xp6(1),v.hij(" ",t.service.name,"\n"))},dependencies:[i.O5],encapsulation:2}),GlobalLoginOAuth2Button})();var jn=s(8710);let Rn=(()=>{class GlobalHeaderReloadModal{}return GlobalHeaderReloadModal.ɵfac=function(e){return new(e||GlobalHeaderReloadModal)},GlobalHeaderReloadModal.ɵcmp=v.Xpm({type:GlobalHeaderReloadModal,selectors:[["global-header-reload-modal"]],decls:5,vars:0,consts:[["size","prompt"],["system-modal-header-noclose",""],["label","LBL_RELOAD_CONFIGURATION"]],template:function(e,t){1&e&&(v.TgZ(0,"system-modal",0)(1,"system-modal-header",1),v._UZ(2,"system-label",2),v.qZA(),v.TgZ(3,"system-modal-content"),v._UZ(4,"system-loader-progress"),v.qZA()())},dependencies:[C._,jn.e,Ze.j,we.x,Te.y],encapsulation:2}),GlobalHeaderReloadModal})(),Bn=(()=>{class GlobalComponents{}return GlobalComponents.ɵfac=function(e){return new(e||GlobalComponents)},GlobalComponents.ɵmod=v.oAB({type:GlobalComponents}),GlobalComponents.ɵinj=v.cJS({imports:[i.ez,n.u5,o.ObjectFields,l.o,d.SystemComponents,a.ObjectComponents]}),GlobalComponents})();("undefined"==typeof ngJitMode||ngJitMode)&&v.kYT(Bn,{declarations:[r.M,Rs.T,Bs.c,c.e,u.f,m.e,h.z,g.o,p.u,f.B,b.S,y.I,M,J,R,G,H,ee,Rn,Nn,te.T,Fe.q,qe.i,nt,Ee.r,ot,at,dt,rt,lt,ut,mt.n,ie.s,ne.N,le.X,Le,Ne,se,oe.r,pe,is.x,ns.Y,ls.V,Lt.Q,Et,Jt,ht.y,gt.U,vt,Ct,At.G,Tt.U,kt,us,js,Ls,Fs,xs,ye,si,li,ri,Yt.s,Wt.O,Vt.Q,Kt.L,$t.y,Xt.K,Qt.P,zt,Bt,Gt,ss._,es.T,ts._,ci.s,ve.p,an,fi,Ni,xi,Ai,Ii,Cn,kn,En,Ce.Q,Dn],imports:[i.ez,n.u5,o.ObjectFields,l.o,d.SystemComponents,a.ObjectComponents],exports:[r.M,Rs.T,c.e,te.T,ht.y,gt.U,At.G,kt,p.u]}),v.B6R(Ce.Q,[i.sg,Dn],[])},4338:(e,t,s)=>{"use strict";s.d(t,{s:()=>a});var i=s(8427),n=s(1571),l=s(6625),o=s(7774);let a=(()=>{class SpiceInstaller{constructor(e,t,s){this.spiceinstaller=e,this.configuration=t,this.router=s,this.configuration.enableinstall||s.navigate([""])}}return SpiceInstaller.ɵfac=function(e){return new(e||SpiceInstaller)(n.Y36(i.f),n.Y36(l.C),n.Y36(o.F0))},SpiceInstaller.ɵcmp=n.Xpm({type:SpiceInstaller,selectors:[["spice-installer"]],features:[n._Bn([i.f])],decls:5,vars:0,consts:[["system-to-bottom-noscroll","","system-to-bottom-noscroll","",1,"slds-grid"],[1,"slds-border--right","slds-size--1-of-6","slds-p-horizontal--small"],[1,"slds-size--5-of-6"]],template:function(e,t){1&e&&(n.TgZ(0,"div",0)(1,"div",1),n._UZ(2,"spice-installer-progress-indicator"),n.qZA(),n.TgZ(3,"div",2),n._UZ(4,"spice-installer-detail-container"),n.qZA()())},encapsulation:2}),SpiceInstaller})()},8427:(e,t,s)=>{"use strict";s.d(t,{f:()=>n});var i=s(1571);let n=(()=>{class spiceinstaller{constructor(){this.steps=[],this.selectedStep$=new i.vpe,this.systemid="000",this.systemname="SpiceCRM",this.systemurl=window.location.href.split("#")[0]+"api",this.systemproxy=0,this.systemdevmode=!1,this.systemloginprogressbar=0,this.systemloginsidebar=0,this.systemallowforgotpass=0,this.frontendUrl=window.location.href.split("#")[0],this.dbdrivers=[],this.db_host_name="",this.db_host_instance="",this.db_user_name="",this.db_password="",this.db_name="",this.db_type="",this.db_port="",this.db_manager="",this.persistent=!0,this.autofree=!1,this.debug=0,this.ssl=!1,this.collation="",this.lc_collate="en_US.UTF-8",this.lc_ctype="en_US.UTF-8",this.db_schema="SpiceCRM",this.server="",this.port="9200",this.prefix="",this.transferProtocol="http",this.username="admin",this.password="",this.firstname="",this.surname="Administrator",this.email="",this.language={language_code:"en_us",language_name:"English (US)"},this.configObject={},this.configObject={backendconfig:{},database:{},databaseuser:{},dboptions:{},fts:{},credentials:{}},this._selectedStep={id:"setbackend",name:"Set Backend",visible:!0,completed:!1},this.steps=[{id:"setbackend",name:"Set Backend",visible:!0,completed:!1},{id:"systemcheck",name:"System Requirements",visible:!1,completed:!1},{id:"licence",name:"Licence",visible:!1,completed:!1},{id:"database",name:"Database",visible:!1,completed:!1},{id:"fts",name:"FTS",visible:!1,completed:!1},{id:"credentials",name:"Credentials",visible:!1,completed:!1},{id:"setlanguage",name:"Language",visible:!1,completed:!1},{id:"review",name:"Review and Install",visible:!1,completed:!1}]}get selectedStep(){return this._selectedStep}set selectedStep(e){this._selectedStep=e,this.selectedStep$.emit(this._selectedStep)}next(e){for(let t of this.steps)if(t.id==e.id){let e=this.steps.indexOf(t)+1,s=this.steps[e];s.visible=!0,this.selectedStep=s}}keyToLabel(e){let t=e.charAt(0).toUpperCase()+e.slice(1);return e.includes("dir")&&(t=t.replace("dir","directory")),e.includes("_")&&(t=t.split("_").join(" ")),e.match(/(?=[A-Z])/)&&(t=t.split(/(?=[A-Z])/).join(" ")),e.includes("db")&&(t=t.replace("Db","Database")),t}}return spiceinstaller.ɵfac=function(e){return new(e||spiceinstaller)},spiceinstaller.ɵprov=i.Yz7({token:spiceinstaller,factory:spiceinstaller.ɵfac}),spiceinstaller})()},1767:(e,t,s)=>{"use strict";s.r(t),s.d(t,{SpiceInstallerModule:()=>Se});var i=s(6895),n=s(433),l=s(4357),o=s(8427),a=s(5478),d=s(4338),r=s(1571);const c=function(e,t){return{"slds-is-active":e,"slds-is-completed":t}};function u(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"li",4),r.NdJ("click",(function(){const t=r.CHM(e).$implicit,s=r.oxw();return r.KtG(s.render(t))})),r._UZ(1,"div",5),r.TgZ(2,"div",6),r._uU(3),r.qZA()()}if(2&e){const e=t.$implicit;r.Q6J("ngClass",r.WLB(2,c,e.visible,e.completed)),r.xp6(3),r.Oqu(e.name)}}let m=(()=>{class SpiceInstallerProgressIndicator{constructor(e){this.spiceinstaller=e}render(e){e.completed&&(this.spiceinstaller.selectedStep=e)}}return SpiceInstallerProgressIndicator.ɵfac=function(e){return new(e||SpiceInstallerProgressIndicator)(r.Y36(o.f))},SpiceInstallerProgressIndicator.ɵcmp=r.Xpm({type:SpiceInstallerProgressIndicator,selectors:[["spice-installer-progress-indicator"]],decls:4,vars:1,consts:[[1,"slds-progress","slds-progress_vertical","slds-align_absolute-center","slds-p-horizontal--large"],[1,"slds-progress__list"],["class","slds-progress__item",3,"ngClass","click",4,"ngFor","ngForOf"],["aria-valuemin","0","aria-valuemax","100","aria-valuenow","100","role","progressbar"],[1,"slds-progress__item",3,"ngClass","click"],[1,"slds-progress__marker"],[1,"slds-progress__item_content","slds-grid","slds-grid_align-spread"]],template:function(e,t){1&e&&(r.TgZ(0,"div",0)(1,"ol",1),r.YNc(2,u,4,5,"li",2),r.qZA(),r._UZ(3,"div",3),r.qZA()),2&e&&(r.xp6(2),r.Q6J("ngForOf",t.spiceinstaller.steps))},dependencies:[i.mk,i.sg],encapsulation:2}),SpiceInstallerProgressIndicator})();var h=s(3278),g=s(529),p=s(7774),f=s(6625),b=s(4505);const _=function(e){return{"slds-hide":e}};let y=(()=>{class SpiceInstallerSetBackEnd{constructor(e,t,s,i,n){this.toast=e,this.http=t,this.router=s,this.configurationService=i,this.spiceinstaller=n,this.checking=!1,this.apiurl="",this.apiFound=!1}ngOnInit(){let e=window.location.href;this.apiurl=e.replace("#/install","api")}next(){this.spiceinstaller.systemurl=this.apiurl,this.spiceinstaller.configObject.backendconfig={backendUrl:this.spiceinstaller.systemurl,frontendUrl:this.spiceinstaller.frontendUrl},this.spiceinstaller.selectedStep.completed=!0,this.spiceinstaller.steps[0]=this.spiceinstaller.selectedStep,this.spiceinstaller.next(this.spiceinstaller.steps[0])}testConnection(){if(this.checking=!0,this.apiFound){let e={id:this.spiceinstaller.systemid,display:this.spiceinstaller.systemname,backendUrl:this.apiurl,proxy:!1,developerMode:this.spiceinstaller.systemdevmode,loginProgressBar:this.spiceinstaller.systemloginprogressbar,loginSideBar:this.spiceinstaller.systemloginsidebar,allowForgotPass:this.spiceinstaller.systemallowforgotpass,frontendUrl:this.spiceinstaller.frontendUrl};this.saveConnection(e)}else this.http.get("config/installercheck",{params:{url:btoa(this.spiceinstaller.systemurl)}}).subscribe((e=>{let t=e;if(1!=t.success)this.toast.sendToast(t.message,"error"),this.checking=!1;else if("spiceinstaller"==t.message)this.spiceinstaller.configObject.backendconfig={id:this.spiceinstaller.systemid,display:this.spiceinstaller.systemname,backendUrl:this.spiceinstaller.systemurl,proxy:this.spiceinstaller.systemproxy,developerMode:this.spiceinstaller.systemdevmode,loginProgressBar:this.spiceinstaller.systemloginprogressbar,allowForgotPass:this.spiceinstaller.systemallowforgotpass,frontendUrl:this.spiceinstaller.frontendUrl,displayLoginSidebar:this.spiceinstaller.systemloginsidebar},this.spiceinstaller.selectedStep.completed=!0,this.spiceinstaller.steps[0]=this.spiceinstaller.selectedStep,this.spiceinstaller.next(this.spiceinstaller.steps[0]);else{let e={id:this.spiceinstaller.systemid,display:this.spiceinstaller.systemname,backendUrl:this.spiceinstaller.systemurl,proxy:this.spiceinstaller.systemproxy,developerMode:this.spiceinstaller.systemdevmode,loginProgressBar:this.spiceinstaller.systemloginprogressbar,allowForgotPass:this.spiceinstaller.systemallowforgotpass,frontendUrl:this.spiceinstaller.frontendUrl,displayLoginSidebar:this.spiceinstaller.systemloginsidebar};this.saveConnection(e)}}),(e=>{e.status}))}saveConnection(e){this.checking=!0,this.http.post("config/set",e,{}).subscribe((e=>{1==e.success?this.router.navigate(["/login"]):this.checking=!1}),(e=>{switch(e.status){case 401:case 500:this.toast.sendAlert(e.message,"error")}}))}}return SpiceInstallerSetBackEnd.ɵfac=function(e){return new(e||SpiceInstallerSetBackEnd)(r.Y36(h.A),r.Y36(g.eN),r.Y36(p.F0),r.Y36(f.C),r.Y36(o.f))},SpiceInstallerSetBackEnd.ɵcmp=r.Xpm({type:SpiceInstallerSetBackEnd,selectors:[["spice-installer-set-backend"]],decls:33,vars:12,consts:[[1,"slds-p-around--small"],[1,"slds-text-heading--medium","slds-p-vertical--small","slds-p-horizontal--x-small"],[1,"slds-form-element","slds-p-vertical--xx-small"],[1,"slds-form-element__label"],[1,"slds-required"],[1,"slds-form-element__control"],["type","text",1,"slds-input",3,"disabled","ngModel","ngModelChange"],[1,"slds-form-element","slds-p-vertical--xx-small",3,"ngClass"],[1,"slds-select_container"],[1,"slds-select",3,"disabled","ngModel","ngModelChange"],["value","1"],["value","0"],[1,"slds-p-vertical--small","slds-text-align--right"],[1,"slds-button","slds-button--brand",3,"click"]],template:function(e,t){1&e&&(r.TgZ(0,"div",0)(1,"h2",1),r._uU(2," Welcome to SpiceCRM "),r.qZA(),r.TgZ(3,"div",2)(4,"label",3)(5,"abbr",4),r._uU(6,"*"),r.qZA(),r._uU(7,"Name"),r.qZA(),r.TgZ(8,"div",5)(9,"input",6),r.NdJ("ngModelChange",(function(e){return t.spiceinstaller.systemname=e})),r.qZA()()(),r.TgZ(10,"div",7)(11,"label",3),r._uU(12,"Show Forgot Password on Login Screen"),r.qZA(),r.TgZ(13,"div",5)(14,"div",8)(15,"select",9),r.NdJ("ngModelChange",(function(e){return t.spiceinstaller.systemallowforgotpass=e})),r.TgZ(16,"option",10),r._uU(17,"Yes"),r.qZA(),r.TgZ(18,"option",11),r._uU(19,"No"),r.qZA()()()()(),r.TgZ(20,"div",7)(21,"label",3),r._uU(22,"Show LoginSidebar"),r.qZA(),r.TgZ(23,"div",5)(24,"div",8)(25,"select",9),r.NdJ("ngModelChange",(function(e){return t.spiceinstaller.systemloginsidebar=e})),r.TgZ(26,"option",11),r._uU(27,"No"),r.qZA(),r.TgZ(28,"option",10),r._uU(29,"Yes"),r.qZA()()()()(),r.TgZ(30,"div",12)(31,"button",13),r.NdJ("click",(function(){return t.next()})),r._uU(32,"next"),r.qZA()()()),2&e&&(r.xp6(9),r.Q6J("disabled",t.checking)("ngModel",t.spiceinstaller.systemname),r.xp6(1),r.Q6J("ngClass",r.VKq(8,_,t.apiFound)),r.xp6(5),r.Q6J("disabled",t.checking)("ngModel",t.spiceinstaller.systemallowforgotpass),r.xp6(5),r.Q6J("ngClass",r.VKq(10,_,t.apiFound)),r.xp6(5),r.Q6J("disabled",t.checking)("ngModel",t.spiceinstaller.systemloginsidebar))},dependencies:[i.mk,n.YN,n.Kr,n.Fj,n.EJ,n.JJ,n.On],encapsulation:2}),SpiceInstallerSetBackEnd})();var v=s(4021),x=s(8859);const Z=function(e){return{"slds-theme--error":e}};function w(e,t){if(1&e&&(r.TgZ(0,"tr",7)(1,"td")(2,"div",8),r._UZ(3,"system-utility-icon",9),r.qZA()(),r.TgZ(4,"td")(5,"div",8),r._uU(6),r.qZA()()()),2&e){const e=t.$implicit,s=r.oxw();r.Q6J("ngClass",r.VKq(4,Z,!e.value)),r.xp6(3),r.Q6J("size","x-small")("icon",e.value?"check":"error"),r.xp6(3),r.hij(" ",s.spiceinstaller.keyToLabel(e.key),"")}}let T=(()=>{class SpiceInstallerSystemCheck{constructor(e,t,s){this.toast=e,this.http=t,this.spiceinstaller=s,this.loading=!1,this.requirements=[],this.checkSystem()}get checkFailed(){for(let e of Object.values(this.requirements))if(!e)return!0;return!1}checkSystem(){this.loading=!0,this.http.get(`${this.spiceinstaller.systemurl}/install/check`).subscribe((e=>{this.loading=!1;let t=e;this.requirements=t.requirements,t.success?(this.spiceinstaller.selectedStep.completed=!0,this.spiceinstaller.dbdrivers=this.requirements.dbdrivers):this.toast.sendToast("error, missing requirements","error")}),(e=>{if(this.loading=!1,500===e.status)this.toast.sendAlert(e.message,"error")}))}}return SpiceInstallerSystemCheck.ɵfac=function(e){return new(e||SpiceInstallerSystemCheck)(r.Y36(h.A),r.Y36(g.eN),r.Y36(o.f))},SpiceInstallerSystemCheck.ɵcmp=r.Xpm({type:SpiceInstallerSystemCheck,selectors:[["spice-installer-systemcheck"]],decls:18,vars:5,consts:[[3,"system-overlay-loading-spinner"],[1,"slds-p-around--small","slds-text-heading--medium","slds-p-vertical--small","slds-p-horizontal--x-small"],[1,"slds-table","slds-table_cell-buffer","slds-table_bordered","slds-table_col-bordered"],[3,"ngClass",4,"ngFor","ngForOf"],[1,"slds-p-around--small","slds-text-align--right"],[1,"slds-button","slds-m-right--xx-small","slds-button--neutral",3,"click"],[1,"slds-button","slds-button--brand",3,"disabled","click"],[3,"ngClass"],[1,"slds-truncate"],[3,"size","icon"]],template:function(e,t){1&e&&(r.TgZ(0,"div",0)(1,"h2",1),r._uU(2," System Requirements "),r.qZA(),r.TgZ(3,"table",2)(4,"thead")(5,"tr")(6,"th"),r._uU(7,"status"),r.qZA(),r.TgZ(8,"th"),r._uU(9,"extension"),r.qZA()()(),r.TgZ(10,"tbody"),r.YNc(11,w,7,6,"tr",3),r.ALo(12,"keyvalue"),r.qZA()(),r.TgZ(13,"div",4)(14,"button",5),r.NdJ("click",(function(){return t.checkSystem()})),r._uU(15,"recheck"),r.qZA(),r.TgZ(16,"button",6),r.NdJ("click",(function(){return t.spiceinstaller.next(t.spiceinstaller.steps[1])})),r._uU(17,"next"),r.qZA()()()),2&e&&(r.Q6J("system-overlay-loading-spinner",t.loading),r.xp6(11),r.Q6J("ngForOf",r.lcZ(12,3,t.requirements)),r.xp6(5),r.Q6J("disabled",t.checkFailed))},dependencies:[i.mk,i.sg,v._,x.r,i.Nd],encapsulation:2}),SpiceInstallerSystemCheck})();var C=s(1058),A=s(7514);let k=(()=>{class SpiceInstallerLicence{constructor(e){this.spiceinstaller=e,this.year=new Date,this.author="",this.spiceinstaller.steps[2]=this.spiceinstaller.selectedStep,this.author="SpiceCRM",this.year=this.year.getFullYear()}}return SpiceInstallerLicence.ɵfac=function(e){return new(e||SpiceInstallerLicence)(r.Y36(o.f))},SpiceInstallerLicence.ɵcmp=r.Xpm({type:SpiceInstallerLicence,selectors:[["spice-installer-licence"]],decls:255,vars:4,consts:[[1,"slds-p-around--small","slds-text-heading--medium","slds-p-vertical--small","slds-p-horizontal--x-small","slds-border--bottom"],["system-to-bottom",""],[1,"slds-p-around--medium","slds-theme--default"],["href","http://fsf.org/"],[1,"slds-text-longform"],["href","http://www.gnu.org/licenses/"],[1,"slds-grid","slds-p-around--small","slds-grid--vertical-align-center","slds-grid--align-spread","slds-border--top"],[3,"ngModel","ngModelChange"],[1,"slds-button","slds-button--brand",3,"disabled","click"]],template:function(e,t){1&e&&(r.TgZ(0,"h2",0),r._uU(1," License Agreement\n"),r.qZA(),r.TgZ(2,"div",1)(3,"div",2)(4,"p"),r._uU(5,"GNU AFFERO GENERAL PUBLIC LICENSE Version 3, 19 November 2007"),r.qZA(),r.TgZ(6,"p"),r._uU(7," Copyright (C) 2007 Free Software Foundation, Inc. "),r.TgZ(8,"a",3),r._uU(9,"fsf.org"),r.qZA(),r._uU(10," Everyone is permitted to copy and distribute verbatim copies of this license document, but changing it is not allowed."),r.qZA(),r.TgZ(11,"p"),r._uU(12," Preamble"),r.qZA(),r.TgZ(13,"p"),r._uU(14," The GNU Affero General Public License is a free, copyleft license for software and other kinds of works, specifically designed to ensure cooperation with the community in the case of network server software."),r.qZA(),r.TgZ(15,"p"),r._uU(16," The licenses for most software and other practical works are designed to take away your freedom to share and change the works. By contrast, our General Public Licenses are intended to guarantee your freedom to share and change all versions of a program--to make sure it remains free software for all its users."),r.qZA(),r.TgZ(17,"p"),r._uU(18," When we speak of free software, we are referring to freedom, not price. Our General Public Licenses are designed to make sure that you have the freedom to distribute copies of free software (and charge for them if you wish), that you receive source code or can get it if you want it, that you can change the software or use pieces of it in new free programs, and that you know you can do these things."),r.qZA(),r.TgZ(19,"div",4)(20,"p"),r._uU(21," Developers that use our General Public Licenses protect your rights with two steps: (1) assert copyright on the software, and (2) offer you this License which gives you legal permission to copy, distribute and/or modify the software."),r.qZA(),r.TgZ(22,"p"),r._uU(23," A secondary benefit of defending all users' freedom is that improvements made in alternate versions of the program, if they receive widespread use, become available for other developers to incorporate. Many developers of free software are heartened and encouraged by the resulting cooperation. However, in the case of software used on network servers, this result may fail to come about. The GNU General Public License permits making a modified version and letting the public access it on a server without ever releasing its source code to the public."),r.qZA(),r.TgZ(24,"p"),r._uU(25," The GNU Affero General Public License is designed specifically to ensure that, in such cases, the modified source code becomes available to the community. It requires the operator of a network server to provide the source code of the modified version running there to the users of that server. Therefore, public use of a modified version, on a publicly accessible server, gives the public access to the source code of the modified version."),r.qZA(),r.TgZ(26,"p"),r._uU(27," An older license, called the Affero General Public License and published by Affero, was designed to accomplish similar goals. This is a different license, not a version of the Affero GPL, but Affero has released a new version of the Affero GPL which permits relicensing under this license."),r.qZA(),r.TgZ(28,"p"),r._uU(29," The precise terms and conditions for copying, distribution and modification follow."),r.qZA(),r.TgZ(30,"p"),r._uU(31," TERMS AND CONDITIONS"),r.qZA(),r.TgZ(32,"p"),r._uU(33," 0. Definitions."),r.qZA(),r.TgZ(34,"p"),r._uU(35,' "This License" refers to version 3 of the GNU Affero General Public License.'),r.qZA(),r.TgZ(36,"p"),r._uU(37,' "Copyright" also means copyright-like laws that apply to other kinds of works, such as semiconductor masks.'),r.qZA(),r.TgZ(38,"p"),r._uU(39,' "The Program" refers to any copyrightable work licensed under this License. Each licensee is addressed as "you". "Licensees" and "recipients" may be individuals or organizations.'),r.qZA(),r.TgZ(40,"p"),r._uU(41,' To "modify" a work means to copy from or adapt all or part of the work in a fashion requiring copyright permission, other than the making of an exact copy. The resulting work is called a "modified version" of the earlier work or a work "based on" the earlier work.'),r.qZA(),r.TgZ(42,"p"),r._uU(43,' A "covered work" means either the unmodified Program or a work based on the Program.'),r.qZA(),r.TgZ(44,"p"),r._uU(45,' To "propagate" a work means to do anything with it that, without permission, would make you directly or secondarily liable for infringement under applicable copyright law, except executing it on a computer or modifying a public copy. Propagation includes copying, distribution (with or without modification), making available to the public, and in some countries other activities as well.'),r.qZA(),r.TgZ(46,"p"),r._uU(47,' To "convey" a work means any kind of propagation that enables other parties to make or receive copies. Mere interaction with a user through a computer network, with no transfer of a copy, is not conveying.'),r.qZA(),r.TgZ(48,"p"),r._uU(49,' An interactive user interface displays "Appropriate Legal Notices" to the extent that it includes a convenient and prominently visible feature that (1) displays an appropriate copyright notice, and (2) tells the user that there is no warranty for the work (except to the extent that warranties are provided), that licensees may convey the work under this License, and how to view a copy of this License. If the interface presents a list of user commands or options, such as a menu, a prominent item in the list meets this criterion.'),r.qZA(),r.TgZ(50,"p"),r._uU(51," 1. Source Code."),r.qZA(),r.TgZ(52,"p"),r._uU(53,' The "source code" for a work means the preferred form of the work for making modifications to it. "Object code" means any non-source form of a work.'),r.qZA(),r.TgZ(54,"p"),r._uU(55,' A "Standard Interface" means an interface that either is an official standard defined by a recognized standards body, or, in the case of interfaces specified for a particular programming language, one that is widely used among developers working in that language.'),r.qZA(),r.TgZ(56,"p"),r._uU(57,' The "System Libraries" of an executable work include anything, other than the work as a whole, that (a) is included in the normal form of packaging a Major Component, but which is not part of that Major Component, and (b) serves only to enable use of the work with that Major Component, or to implement a Standard Interface for which an implementation is available to the public in source code form. A "Major Component", in this context, means a major essential component (kernel, window system, and so on) of the specific operating system (if any) on which the executable work runs, or a compiler used to produce the work, or an object code interpreter used to run it.'),r.qZA(),r.TgZ(58,"p"),r._uU(59,' The "Corresponding Source" for a work in object code form means all the source code needed to generate, install, and (for an executable work) run the object code and to modify the work, including scripts to control those activities. However, it does not include the work\'s System Libraries, or general-purpose tools or generally available free programs which are used unmodified in performing those activities but which are not part of the work. For example, Corresponding Source includes interface definition files associated with source files for the work, and the source code for shared libraries and dynamically linked subprograms that the work is specifically designed to require, such as by intimate data communication or control flow between those subprograms and other parts of the work.'),r.qZA(),r.TgZ(60,"p"),r._uU(61," The Corresponding Source need not include anything that users can regenerate automatically from other parts of the Corresponding Source."),r.qZA(),r.TgZ(62,"p"),r._uU(63," The Corresponding Source for a work in source code form is that same work."),r.qZA(),r.TgZ(64,"p"),r._uU(65," 2. Basic Permissions."),r.qZA(),r.TgZ(66,"p"),r._uU(67," All rights granted under this License are granted for the term of copyright on the Program, and are irrevocable provided the stated conditions are met. This License explicitly affirms your unlimited permission to run the unmodified Program. The output from running a covered work is covered by this License only if the output, given its content, constitutes a covered work. This License acknowledges your rights of fair use or other equivalent, as provided by copyright law."),r.qZA(),r.TgZ(68,"p"),r._uU(69," You may make, run and propagate covered works that you do not convey, without conditions so long as your license otherwise remains in force. You may convey covered works to others for the sole purpose of having them make modifications exclusively for you, or provide you with facilities for running those works, provided that you comply with the terms of this License in conveying all material for which you do not control copyright. Those thus making or running the covered works for you must do so exclusively on your behalf, under your direction and control, on terms that prohibit them from making any copies of your copyrighted material outside their relationship with you."),r.qZA(),r.TgZ(70,"p"),r._uU(71," Conveying under any other circumstances is permitted solely under the conditions stated below. Sublicensing is not allowed; section 10 makes it unnecessary."),r.qZA(),r.TgZ(72,"p"),r._uU(73," 3. Protecting Users' Legal Rights From Anti-Circumvention Law."),r.qZA(),r.TgZ(74,"p"),r._uU(75," No covered work shall be deemed part of an effective technological measure under any applicable law fulfilling obligations under article 11 of the WIPO copyright treaty adopted on 20 December 1996, or similar laws prohibiting or restricting circumvention of such measures."),r.qZA(),r.TgZ(76,"p"),r._uU(77," When you convey a covered work, you waive any legal power to forbid circumvention of technological measures to the extent such circumvention is effected by exercising rights under this License with respect to the covered work, and you disclaim any intention to limit operation or modification of the work as a means of enforcing, against the work's users, your or third parties' legal rights to forbid circumvention of technological measures."),r.qZA(),r.TgZ(78,"p"),r._uU(79," 4. Conveying Verbatim Copies."),r.qZA(),r.TgZ(80,"p"),r._uU(81," You may convey verbatim copies of the Program's source code as you receive it, in any medium, provided that you conspicuously and appropriately publish on each copy an appropriate copyright notice; keep intact all notices stating that this License and any non-permissive terms added in accord with section 7 apply to the code; keep intact all notices of the absence of any warranty; and give all recipients a copy of this License along with the Program."),r.qZA(),r.TgZ(82,"p"),r._uU(83," You may charge any price or no price for each copy that you convey, and you may offer support or warranty protection for a fee."),r.qZA(),r.TgZ(84,"p"),r._uU(85," 5. Conveying Modified Source Versions."),r.qZA(),r.TgZ(86,"p"),r._uU(87," You may convey a work based on the Program, or the modifications to produce it from the Program, in the form of source code under the terms of section 4, provided that you also meet all of these conditions:"),r.qZA(),r.TgZ(88,"p"),r._uU(89," a) The work must carry prominent notices stating that you modified it, and giving a relevant date."),r.qZA(),r.TgZ(90,"p"),r._uU(91,' b) The work must carry prominent notices stating that it is released under this License and any conditions added under section 7. This requirement modifies the requirement in section 4 to "keep intact all notices".'),r.qZA(),r.TgZ(92,"p"),r._uU(93," c) You must license the entire work, as a whole, under this License to anyone who comes into possession of a copy. This License will therefore apply, along with any applicable section 7 additional terms, to the whole of the work, and all its parts, regardless of how they are packaged. This License gives no permission to license the work in any other way, but it does not invalidate such permission if you have separately received it."),r.qZA(),r.TgZ(94,"p"),r._uU(95," d) If the work has interactive user interfaces, each must display Appropriate Legal Notices; however, if the Program has interactive interfaces that do not display Appropriate Legal Notices, your work need not make them do so."),r.qZA(),r.TgZ(96,"p"),r._uU(97,' A compilation of a covered work with other separate and independent works, which are not by their nature extensions of the covered work, and which are not combined with it such as to form a larger program, in or on a volume of a storage or distribution medium, is called an "aggregate" if the compilation and its resulting copyright are not used to limit the access or legal rights of the compilation\'s users beyond what the individual works permit. Inclusion of a covered work in an aggregate does not cause this License to apply to the other parts of the aggregate.'),r.qZA(),r.TgZ(98,"p"),r._uU(99," 6. Conveying Non-Source Forms."),r.qZA(),r.TgZ(100,"p"),r._uU(101," You may convey a covered work in object code form under the terms of sections 4 and 5, provided that you also convey the machine-readable Corresponding Source under the terms of this License, in one of these ways:"),r.qZA(),r.TgZ(102,"p"),r._uU(103," a) Convey the object code in, or embodied in, a physical product (including a physical distribution medium), accompanied by the Corresponding Source fixed on a durable physical medium customarily used for software interchange."),r.qZA(),r.TgZ(104,"p"),r._uU(105," b) Convey the object code in, or embodied in, a physical product (including a physical distribution medium), accompanied by a written offer, valid for at least three years and valid for as long as you offer spare parts or customer support for that product model, to give anyone who possesses the object code either (1) a copy of the Corresponding Source for all the software in the product that is covered by this License, on a durable physical medium customarily used for software interchange, for a price no more than your reasonable cost of physically performing this conveying of source, or (2) access to copy the Corresponding Source from a network server at no charge."),r.qZA(),r.TgZ(106,"p"),r._uU(107," c) Convey individual copies of the object code with a copy of the written offer to provide the Corresponding Source. This alternative is allowed only occasionally and noncommercially, and only if you received the object code with such an offer, in accord with subsection 6b."),r.qZA(),r.TgZ(108,"p"),r._uU(109," d) Convey the object code by offering access from a designated place (gratis or for a charge), and offer equivalent access to the Corresponding Source in the same way through the same place at no further charge. You need not require recipients to copy the Corresponding Source along with the object code. If the place to copy the object code is a network server, the Corresponding Source may be on a different server (operated by you or a third party) that supports equivalent copying facilities, provided you maintain clear directions next to the object code saying where to find the Corresponding Source. Regardless of what server hosts the Corresponding Source, you remain obligated to ensure that it is available for as long as needed to satisfy these requirements."),r.qZA(),r.TgZ(110,"p"),r._uU(111," e) Convey the object code using peer-to-peer transmission, provided you inform other peers where the object code and Corresponding Source of the work are being offered to the general public at no charge under subsection 6d."),r.qZA(),r.TgZ(112,"p"),r._uU(113," A separable portion of the object code, whose source code is excluded from the Corresponding Source as a System Library, need not be included in conveying the object code work."),r.qZA(),r.TgZ(114,"p"),r._uU(115,' A "User Product" is either (1) a "consumer product", which means any tangible personal property which is normally used for personal, family, or household purposes, or (2) anything designed or sold for incorporation into a dwelling. In determining whether a product is a consumer product, doubtful cases shall be resolved in favor of coverage. For a particular product received by a particular user, "normally used" refers to a typical or common use of that class of product, regardless of the status of the particular user or of the way in which the particular user actually uses, or expects or is expected to use, the product. A product is a consumer product regardless of whether the product has substantial commercial, industrial or non-consumer uses, unless such uses represent the only significant mode of use of the product.'),r.qZA(),r.TgZ(116,"p"),r._uU(117,' "Installation Information" for a User Product means any methods, procedures, authorization keys, or other information required to install and execute modified versions of a covered work in that User Product from a modified version of its Corresponding Source. The information must suffice to ensure that the continued functioning of the modified object code is in no case prevented or interfered with solely because modification has been made.'),r.qZA(),r.TgZ(118,"p"),r._uU(119," If you convey an object code work under this section in, or with, or specifically for use in, a User Product, and the conveying occurs as part of a transaction in which the right of possession and use of the User Product is transferred to the recipient in perpetuity or for a fixed term (regardless of how the transaction is characterized), the Corresponding Source conveyed under this section must be accompanied by the Installation Information. But this requirement does not apply if neither you nor any third party retains the ability to install modified object code on the User Product (for example, the work has been installed in ROM)."),r.qZA(),r.TgZ(120,"p"),r._uU(121," The requirement to provide Installation Information does not include a requirement to continue to provide support service, warranty, or updates for a work that has been modified or installed by the recipient, or for the User Product in which it has been modified or installed. Access to a network may be denied when the modification itself materially and adversely affects the operation of the network or violates the rules and protocols for communication across the network."),r.qZA(),r.TgZ(122,"p"),r._uU(123," Corresponding Source conveyed, and Installation Information provided, in accord with this section must be in a format that is publicly documented (and with an implementation available to the public in source code form), and must require no special password or key for unpacking, reading or copying."),r.qZA(),r.TgZ(124,"p"),r._uU(125," 7. Additional Terms."),r.qZA(),r.TgZ(126,"p"),r._uU(127,' "Additional permissions" are terms that supplement the terms of this License by making exceptions from one or more of its conditions. Additional permissions that are applicable to the entire Program shall be treated as though they were included in this License, to the extent that they are valid under applicable law. If additional permissions apply only to part of the Program, that part may be used separately under those permissions, but the entire Program remains governed by this License without regard to the additional permissions.'),r.qZA(),r.TgZ(128,"p"),r._uU(129," When you convey a copy of a covered work, you may at your option remove any additional permissions from that copy, or from any part of it. (Additional permissions may be written to require their own removal in certain cases when you modify the work.) You may place additional permissions on material, added by you to a covered work, for which you have or can give appropriate copyright permission."),r.qZA(),r.TgZ(130,"p"),r._uU(131," Notwithstanding any other provision of this License, for material you add to a covered work, you may (if authorized by the copyright holders of that material) supplement the terms of this License with terms:"),r.qZA(),r.TgZ(132,"p"),r._uU(133," a) Disclaiming warranty or limiting liability differently from the terms of sections 15 and 16 of this License; or"),r.qZA(),r.TgZ(134,"p"),r._uU(135," b) Requiring preservation of specified reasonable legal notices or author attributions in that material or in the Appropriate Legal Notices displayed by works containing it; or"),r.qZA(),r.TgZ(136,"p"),r._uU(137," c) Prohibiting misrepresentation of the origin of that material, or requiring that modified versions of such material be marked in reasonable ways as different from the original version; or"),r.qZA(),r.TgZ(138,"p"),r._uU(139," d) Limiting the use for publicity purposes of names of licensors or authors of the material; or"),r.qZA(),r.TgZ(140,"p"),r._uU(141," e) Declining to grant rights under trademark law for use of some trade names, trademarks, or service marks; or"),r.qZA(),r.TgZ(142,"p"),r._uU(143," f) Requiring indemnification of licensors and authors of that material by anyone who conveys the material (or modified versions of it) with contractual assumptions of liability to the recipient, for any liability that these contractual assumptions directly impose on those licensors and authors."),r.qZA(),r.TgZ(144,"p"),r._uU(145,' All other non-permissive additional terms are considered "further restrictions" within the meaning of section 10. If the Program as you received it, or any part of it, contains a notice stating that it is governed by this License along with a term that is a further restriction, you may remove that term. If a license document contains a further restriction but permits relicensing or conveying under this License, you may add to a covered work material governed by the terms of that license document, provided that the further restriction does not survive such relicensing or conveying.'),r.qZA(),r.TgZ(146,"p"),r._uU(147," If you add terms to a covered work in accord with this section, you must place, in the relevant source files, a statement of the additional terms that apply to those files, or a notice indicating where to find the applicable terms."),r.qZA(),r.TgZ(148,"p"),r._uU(149," Additional terms, permissive or non-permissive, may be stated in the form of a separately written license, or stated as exceptions; the above requirements apply either way."),r.qZA(),r.TgZ(150,"p"),r._uU(151," 8. Termination."),r.qZA(),r.TgZ(152,"p"),r._uU(153," You may not propagate or modify a covered work except as expressly provided under this License. Any attempt otherwise to propagate or modify it is void, and will automatically terminate your rights under this License (including any patent licenses granted under the third paragraph of section 11)."),r.qZA(),r.TgZ(154,"p"),r._uU(155," However, if you cease all violation of this License, then your license from a particular copyright holder is reinstated (a) provisionally, unless and until the copyright holder explicitly and finally terminates your license, and (b) permanently, if the copyright holder fails to notify you of the violation by some reasonable means prior to 60 days after the cessation."),r.qZA(),r.TgZ(156,"p"),r._uU(157," Moreover, your license from a particular copyright holder is reinstated permanently if the copyright holder notifies you of the violation by some reasonable means, this is the first time you have received notice of violation of this License (for any work) from that copyright holder, and you cure the violation prior to 30 days after your receipt of the notice."),r.qZA(),r.TgZ(158,"p"),r._uU(159," Termination of your rights under this section does not terminate the licenses of parties who have received copies or rights from you under this License. If your rights have been terminated and not permanently reinstated, you do not qualify to receive new licenses for the same material under section 10."),r.qZA(),r.TgZ(160,"p"),r._uU(161," 9. Acceptance Not Required for Having Copies."),r.qZA(),r.TgZ(162,"p"),r._uU(163," You are not required to accept this License in order to receive or run a copy of the Program. Ancillary propagation of a covered work occurring solely as a consequence of using peer-to-peer transmission to receive a copy likewise does not require acceptance. However, nothing other than this License grants you permission to propagate or modify any covered work. These actions infringe copyright if you do not accept this License. Therefore, by modifying or propagating a covered work, you indicate your acceptance of this License to do so."),r.qZA(),r.TgZ(164,"p"),r._uU(165," 10. Automatic Licensing of Downstream Recipients."),r.qZA(),r.TgZ(166,"p"),r._uU(167," Each time you convey a covered work, the recipient automatically receives a license from the original licensors, to run, modify and propagate that work, subject to this License. You are not responsible for enforcing compliance by third parties with this License."),r.qZA(),r.TgZ(168,"p"),r._uU(169,' An "entity transaction" is a transaction transferring control of an organization, or substantially all assets of one, or subdividing an organization, or merging organizations. If propagation of a covered work results from an entity transaction, each party to that transaction who receives a copy of the work also receives whatever licenses to the work the party\'s predecessor in interest had or could give under the previous paragraph, plus a right to possession of the Corresponding Source of the work from the predecessor in interest, if the predecessor has it or can get it with reasonable efforts.'),r.qZA(),r.TgZ(170,"p"),r._uU(171," You may not impose any further restrictions on the exercise of the rights granted or affirmed under this License. For example, you may not impose a license fee, royalty, or other charge for exercise of rights granted under this License, and you may not initiate litigation (including a cross-claim or counterclaim in a lawsuit) alleging that any patent claim is infringed by making, using, selling, offering for sale, or importing the Program or any portion of it."),r.qZA(),r.TgZ(172,"p"),r._uU(173," 11. Patents."),r.qZA(),r.TgZ(174,"p"),r._uU(175,' A "contributor" is a copyright holder who authorizes use under this License of the Program or a work on which the Program is based. The work thus licensed is called the contributor\'s "contributor version".'),r.qZA(),r.TgZ(176,"p"),r._uU(177,' A contributor\'s "essential patent claims" are all patent claims owned or controlled by the contributor, whether already acquired or hereafter acquired, that would be infringed by some manner, permitted by this License, of making, using, or selling its contributor version, but do not include claims that would be infringed only as a consequence of further modification of the contributor version. For purposes of this definition, "control" includes the right to grant patent sublicenses in a manner consistent with the requirements of this License.'),r.qZA(),r.TgZ(178,"p"),r._uU(179," Each contributor grants you a non-exclusive, worldwide, royalty-free patent license under the contributor's essential patent claims, to make, use, sell, offer for sale, import and otherwise run, modify and propagate the contents of its contributor version."),r.qZA(),r.TgZ(180,"p"),r._uU(181,' In the following three paragraphs, a "patent license" is any express agreement or commitment, however denominated, not to enforce a patent (such as an express permission to practice a patent or covenant not to sue for patent infringement). To "grant" such a patent license to a party means to make such an agreement or commitment not to enforce a patent against the party.'),r.qZA(),r.TgZ(182,"p"),r._uU(183,' If you convey a covered work, knowingly relying on a patent license, and the Corresponding Source of the work is not available for anyone to copy, free of charge and under the terms of this License, through a publicly available network server or other readily accessible means, then you must either (1) cause the Corresponding Source to be so available, or (2) arrange to deprive yourself of the benefit of the patent license for this particular work, or (3) arrange, in a manner consistent with the requirements of this License, to extend the patent license to downstream recipients. "Knowingly relying" means you have actual knowledge that, but for the patent license, your conveying the covered work in a country, or your recipient\'s use of the covered work in a country, would infringe one or more identifiable patents in that country that you have reason to believe are valid.'),r.qZA(),r.TgZ(184,"p"),r._uU(185," If, pursuant to or in connection with a single transaction or arrangement, you convey, or propagate by procuring conveyance of, a covered work, and grant a patent license to some of the parties receiving the covered work authorizing them to use, propagate, modify or convey a specific copy of the covered work, then the patent license you grant is automatically extended to all recipients of the covered work and works based on it."),r.qZA(),r.TgZ(186,"p"),r._uU(187,' A patent license is "discriminatory" if it does not include within the scope of its coverage, prohibits the exercise of, or is conditioned on the non-exercise of one or more of the rights that are specifically granted under this License. You may not convey a covered work if you are a party to an arrangement with a third party that is in the business of distributing software, under which you make payment to the third party based on the extent of your activity of conveying the work, and under which the third party grants, to any of the parties who would receive the covered work from you, a discriminatory patent license (a) in connection with copies of the covered work conveyed by you (or copies made from those copies), or (b) primarily for and in connection with specific products or compilations that contain the covered work, unless you entered into that arrangement, or that patent license was granted, prior to 28 March 2007.'),r.qZA(),r.TgZ(188,"p"),r._uU(189," Nothing in this License shall be construed as excluding or limiting any implied license or other defenses to infringement that may otherwise be available to you under applicable patent law."),r.qZA(),r.TgZ(190,"p"),r._uU(191," 12. No Surrender of Others' Freedom."),r.qZA(),r.TgZ(192,"p"),r._uU(193," If conditions are imposed on you (whether by court order, agreement or otherwise) that contradict the conditions of this License, they do not excuse you from the conditions of this License. If you cannot convey a covered work so as to satisfy simultaneously your obligations under this License and any other pertinent obligations, then as a consequence you may not convey it at all. For example, if you agree to terms that obligate you to collect a royalty for further conveying from those to whom you convey the Program, the only way you could satisfy both those terms and this License would be to refrain entirely from conveying the Program."),r.qZA(),r.TgZ(194,"p"),r._uU(195," 13. Remote Network Interaction; Use with the GNU General Public License."),r.qZA(),r.TgZ(196,"p"),r._uU(197," Notwithstanding any other provision of this License, if you modify the Program, your modified version must prominently offer all users interacting with it remotely through a computer network (if your version supports such interaction) an opportunity to receive the Corresponding Source of your version by providing access to the Corresponding Source from a network server at no charge, through some standard or customary means of facilitating copying of software. This Corresponding Source shall include the Corresponding Source for any work covered by version 3 of the GNU General Public License that is incorporated pursuant to the following paragraph."),r.qZA(),r.TgZ(198,"p"),r._uU(199," Notwithstanding any other provision of this License, you have permission to link or combine any covered work with a work licensed under version 3 of the GNU General Public License into a single combined work, and to convey the resulting work. The terms of this License will continue to apply to the part which is the covered work, but the work with which it is combined will remain governed by version 3 of the GNU General Public License."),r.qZA(),r.TgZ(200,"p"),r._uU(201," 14. Revised Versions of this License."),r.qZA(),r.TgZ(202,"p"),r._uU(203," The Free Software Foundation may publish revised and/or new versions of the GNU Affero General Public License from time to time. Such new versions will be similar in spirit to the present version, but may differ in detail to address new problems or concerns."),r.qZA(),r.TgZ(204,"p"),r._uU(205,' Each version is given a distinguishing version number. If the Program specifies that a certain numbered version of the GNU Affero General Public License "or any later version" applies to it, you have the option of following the terms and conditions either of that numbered version or of any later version published by the Free Software Foundation. If the Program does not specify a version number of the GNU Affero General Public License, you may choose any version ever published by the Free Software Foundation.'),r.qZA(),r.TgZ(206,"p"),r._uU(207," If the Program specifies that a proxy can decide which future versions of the GNU Affero General Public License can be used, that proxy's public statement of acceptance of a version permanently authorizes you to choose that version for the Program."),r.qZA(),r.TgZ(208,"p"),r._uU(209," Later license versions may give you additional or different permissions. However, no additional obligations are imposed on any author or copyright holder as a result of your choosing to follow a later version."),r.qZA(),r.TgZ(210,"p"),r._uU(211," 15. Disclaimer of Warranty."),r.qZA(),r.TgZ(212,"p"),r._uU(213,' THERE IS NO WARRANTY FOR THE PROGRAM, TO THE EXTENT PERMITTED BY APPLICABLE LAW. EXCEPT WHEN OTHERWISE STATED IN WRITING THE COPYRIGHT HOLDERS AND/OR OTHER PARTIES PROVIDE THE PROGRAM "AS IS" WITHOUT WARRANTY OF ANY KIND, EITHER EXPRESSED OR IMPLIED, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE. THE ENTIRE RISK AS TO THE QUALITY AND PERFORMANCE OF THE PROGRAM IS WITH YOU. SHOULD THE PROGRAM PROVE DEFECTIVE, YOU ASSUME THE COST OF ALL NECESSARY SERVICING, REPAIR OR CORRECTION.'),r.qZA(),r.TgZ(214,"p"),r._uU(215," 16. Limitation of Liability."),r.qZA(),r.TgZ(216,"p"),r._uU(217," IN NO EVENT UNLESS REQUIRED BY APPLICABLE LAW OR AGREED TO IN WRITING WILL ANY COPYRIGHT HOLDER, OR ANY OTHER PARTY WHO MODIFIES AND/OR CONVEYS THE PROGRAM AS PERMITTED ABOVE, BE LIABLE TO YOU FOR DAMAGES, INCLUDING ANY GENERAL, SPECIAL, INCIDENTAL OR CONSEQUENTIAL DAMAGES ARISING OUT OF THE USE OR INABILITY TO USE THE PROGRAM (INCLUDING BUT NOT LIMITED TO LOSS OF DATA OR DATA BEING RENDERED INACCURATE OR LOSSES SUSTAINED BY YOU OR THIRD PARTIES OR A FAILURE OF THE PROGRAM TO OPERATE WITH ANY OTHER PROGRAMS), EVEN IF SUCH HOLDER OR OTHER PARTY HAS BEEN ADVISED OF THE POSSIBILITY OF SUCH DAMAGES."),r.qZA(),r.TgZ(218,"p"),r._uU(219," 17. Interpretation of Sections 15 and 16."),r.qZA(),r.TgZ(220,"p"),r._uU(221," If the disclaimer of warranty and limitation of liability provided above cannot be given local legal effect according to their terms, reviewing courts shall apply local law that most closely approximates an absolute waiver of all civil liability in connection with the Program, unless a warranty or assumption of liability accompanies a copy of the Program in return for a fee."),r.qZA(),r.TgZ(222,"p"),r._uU(223," END OF TERMS AND CONDITIONS"),r.qZA(),r.TgZ(224,"p"),r._uU(225," How to Apply These Terms to Your New Programs"),r.qZA(),r.TgZ(226,"p"),r._uU(227," If you develop a new program, and you want it to be of the greatest possible use to the public, the best way to achieve this is to make it free software which everyone can redistribute and change under these terms."),r.qZA(),r.TgZ(228,"p"),r._uU(229,' To do so, attach the following notices to the program. It is safest to attach them to the start of each source file to most effectively state the exclusion of warranty; and each file should have at least the "copyright" line and a pointer to where the full notice is found.'),r.qZA(),r.TgZ(230,"p"),r._uU(231),r.qZA(),r.TgZ(232,"p"),r._uU(233," This program is free software: you can redistribute it and/or modify it under the terms of the GNU Affero General Public License as published by the Free Software Foundation, either version 3 of the License, or (at your option) any later version."),r.qZA(),r.TgZ(234,"p"),r._uU(235," This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero General Public License for more details."),r.qZA(),r.TgZ(236,"p"),r._uU(237," You should have received a copy of the GNU Affero General Public License along with this program. If not, see "),r.TgZ(238,"a",5),r._uU(239,"gnu.org/licenses"),r.qZA(),r._uU(240,"."),r.qZA(),r.TgZ(241,"p"),r._uU(242,"Also add information on how to contact you by electronic and paper mail."),r.qZA(),r.TgZ(243,"p"),r._uU(244,' If your software can interact with users remotely through a computer network, you should also make sure that it provides a way for users to get its source. For example, if your program is a web application, its interface could display a "Source" link that leads users to an archive of the code. There are many ways you could offer source, and different solutions will be better for different programs; see section 13 for the specific requirements.'),r.qZA(),r.TgZ(245,"p"),r._uU(246,' You should also get your employer (if you work as a programmer) or school, if any, to sign a "copyright disclaimer" for the program, if necessary. For more information on this, and how to apply and follow the GNU AGPL, see '),r.TgZ(247,"a",5),r._uU(248,"gnu.org/licenses"),r.qZA(),r._uU(249,"."),r.qZA()()(),r.TgZ(250,"div",6)(251,"system-checkbox",7),r.NdJ("ngModelChange",(function(e){return t.spiceinstaller.selectedStep.completed=e})),r._uU(252,"agree to Terms & Conditions"),r.qZA(),r.TgZ(253,"button",8),r.NdJ("click",(function(){return t.spiceinstaller.next(t.spiceinstaller.steps[2])})),r._uU(254,"next"),r.qZA()()()),2&e&&(r.xp6(231),r.AsE(" one line to give the programs name and a brief idea of what it does Copyright (C) ",t.year," ",t.author,""),r.xp6(20),r.Q6J("ngModel",t.spiceinstaller.selectedStep.completed),r.xp6(2),r.Q6J("disabled",!t.spiceinstaller.selectedStep.completed))},dependencies:[n.JJ,n.On,C.H,A.U],encapsulation:2}),SpiceInstallerLicence})();function L(e,t){1&e&&(r.TgZ(0,"div",11),r._uU(1,"This field is required"),r.qZA())}function M(e,t){1&e&&(r.TgZ(0,"div",11),r._uU(1,"This field is required"),r.qZA())}function S(e,t){1&e&&(r.TgZ(0,"div",11),r._uU(1,"This field is required"),r.qZA())}const I=function(e){return{"slds-has-error":e}};let O=(()=>{class SpiceinstallerMySQLi{constructor(e){this.spiceinstaller=e,this.spiceinstaller.db_port||(this.spiceinstaller.db_port="3306"),this.spiceinstaller.collation||(this.spiceinstaller.collation="utf8mb4_general_ci"),this.spiceinstaller.db_name||(this.spiceinstaller.db_name=this.spiceinstaller.systemname.toLowerCase().replace(/\s/g,""))}}return SpiceinstallerMySQLi.ɵfac=function(e){return new(e||SpiceinstallerMySQLi)(r.Y36(o.f))},SpiceinstallerMySQLi.ɵcmp=r.Xpm({type:SpiceinstallerMySQLi,selectors:[["spice-installer-mysqli"]],inputs:{hostNameCondition:"hostNameCondition",userNameCondition:"userNameCondition",dbNameCondition:"dbNameCondition"},decls:46,vars:18,consts:[[1,"slds-form-element","slds-p-vertical--small",3,"ngClass"],[1,"slds-form-element__label"],[1,"slds-required"],[1,"slds-form-element__control"],["type","text",1,"slds-input",3,"ngModel","ngModelChange"],["class","slds-form-element__help",4,"ngIf"],[1,"slds-form-element","slds-p-vertical--small"],[1,"slds-select_container"],[1,"slds-select",3,"ngModel","ngModelChange"],["value","utf8mb4_general_ci"],["value","utf8_general_ci"],[1,"slds-form-element__help"]],template:function(e,t){1&e&&(r.TgZ(0,"div",0)(1,"label",1)(2,"abbr",2),r._uU(3,"*"),r.qZA(),r._uU(4,"Host Name"),r.qZA(),r.TgZ(5,"div",3)(6,"input",4),r.NdJ("ngModelChange",(function(e){return t.spiceinstaller.db_host_name=e})),r.qZA(),r.YNc(7,L,2,0,"div",5),r.qZA()(),r.TgZ(8,"div",0)(9,"label",1)(10,"abbr",2),r._uU(11,"*"),r.qZA(),r._uU(12,"Administrator User Name"),r.qZA(),r.TgZ(13,"div",3)(14,"input",4),r.NdJ("ngModelChange",(function(e){return t.spiceinstaller.db_user_name=e})),r.qZA(),r.YNc(15,M,2,0,"div",5),r.qZA()(),r.TgZ(16,"div",6)(17,"label",1),r._UZ(18,"abbr",2),r._uU(19,"Administrator Password"),r.qZA(),r.TgZ(20,"div",3)(21,"input",4),r.NdJ("ngModelChange",(function(e){return t.spiceinstaller.db_password=e})),r.qZA()()(),r.TgZ(22,"div",6)(23,"label",1),r._UZ(24,"abbr",2),r._uU(25,"Port"),r.qZA(),r.TgZ(26,"div",3)(27,"input",4),r.NdJ("ngModelChange",(function(e){return t.spiceinstaller.db_port=e})),r.qZA()()(),r.TgZ(28,"div",0)(29,"label",1)(30,"abbr",2),r._uU(31,"*"),r.qZA(),r._uU(32,"Database Name"),r.qZA(),r.TgZ(33,"div",3)(34,"input",4),r.NdJ("ngModelChange",(function(e){return t.spiceinstaller.db_name=e})),r.qZA(),r.YNc(35,S,2,0,"div",5),r.qZA()(),r.TgZ(36,"div",6)(37,"label",1),r._uU(38,"Collation"),r.qZA(),r.TgZ(39,"div",3)(40,"div",7)(41,"select",8),r.NdJ("ngModelChange",(function(e){return t.spiceinstaller.collation=e})),r.TgZ(42,"option",9),r._uU(43,"utf8mb4"),r.qZA(),r.TgZ(44,"option",10),r._uU(45,"utf8"),r.qZA()()()()()),2&e&&(r.Q6J("ngClass",r.VKq(12,I,!t.hostNameCondition)),r.xp6(6),r.Q6J("ngModel",t.spiceinstaller.db_host_name),r.xp6(1),r.Q6J("ngIf",!t.hostNameCondition),r.xp6(1),r.Q6J("ngClass",r.VKq(14,I,!t.userNameCondition)),r.xp6(6),r.Q6J("ngModel",t.spiceinstaller.db_user_name),r.xp6(1),r.Q6J("ngIf",!t.userNameCondition),r.xp6(6),r.Q6J("ngModel",t.spiceinstaller.db_password),r.xp6(6),r.Q6J("ngModel",t.spiceinstaller.db_port),r.xp6(1),r.Q6J("ngClass",r.VKq(16,I,!t.dbNameCondition)),r.xp6(6),r.Q6J("ngModel",t.spiceinstaller.db_name),r.xp6(1),r.Q6J("ngIf",!t.dbNameCondition),r.xp6(6),r.Q6J("ngModel",t.spiceinstaller.collation))},dependencies:[i.mk,i.O5,n.YN,n.Kr,n.Fj,n.EJ,n.JJ,n.On],encapsulation:2}),SpiceinstallerMySQLi})();function J(e,t){1&e&&(r.TgZ(0,"div",7),r._uU(1,"This field is required"),r.qZA())}function N(e,t){1&e&&(r.TgZ(0,"div",7),r._uU(1,"This field is required"),r.qZA())}function F(e,t){1&e&&(r.TgZ(0,"div",7),r._uU(1,"This field is required"),r.qZA())}const q=function(e){return{"slds-has-error":e}};let E=(()=>{class SpiceinstallerPostgreSQL{constructor(e){this.spiceinstaller=e}}return SpiceinstallerPostgreSQL.ɵfac=function(e){return new(e||SpiceinstallerPostgreSQL)(r.Y36(o.f))},SpiceinstallerPostgreSQL.ɵcmp=r.Xpm({type:SpiceinstallerPostgreSQL,selectors:[["spice-installer-pgsql"]],inputs:{hostNameCondition:"hostNameCondition",userNameCondition:"userNameCondition",dbNameCondition:"dbNameCondition"},decls:50,vars:19,consts:[[1,"slds-form-element","slds-p-vertical--small",3,"ngClass"],[1,"slds-form-element__label"],[1,"slds-required"],[1,"slds-form-element__control"],["type","text",1,"slds-input",3,"ngModel","ngModelChange"],["class","slds-form-element__help",4,"ngIf"],[1,"slds-form-element","slds-p-vertical--small"],[1,"slds-form-element__help"]],template:function(e,t){1&e&&(r.TgZ(0,"div",0)(1,"label",1)(2,"abbr",2),r._uU(3,"*"),r.qZA(),r._uU(4,"Host Name"),r.qZA(),r.TgZ(5,"div",3)(6,"input",4),r.NdJ("ngModelChange",(function(e){return t.spiceinstaller.db_host_name=e})),r.qZA(),r.YNc(7,J,2,0,"div",5),r.qZA()(),r.TgZ(8,"div",0)(9,"label",1)(10,"abbr",2),r._uU(11,"*"),r.qZA(),r._uU(12,"Administrator User Name"),r.qZA(),r.TgZ(13,"div",3)(14,"input",4),r.NdJ("ngModelChange",(function(e){return t.spiceinstaller.db_user_name=e})),r.qZA(),r.YNc(15,N,2,0,"div",5),r.qZA()(),r.TgZ(16,"div",6)(17,"label",1),r._UZ(18,"abbr",2),r._uU(19,"Administrator Password"),r.qZA(),r.TgZ(20,"div",3)(21,"input",4),r.NdJ("ngModelChange",(function(e){return t.spiceinstaller.db_password=e})),r.qZA()()(),r.TgZ(22,"div",6)(23,"label",1),r._UZ(24,"abbr",2),r._uU(25,"Port"),r.qZA(),r.TgZ(26,"div",3)(27,"input",4),r.NdJ("ngModelChange",(function(e){return t.spiceinstaller.db_port=e})),r.qZA()()(),r.TgZ(28,"div",0)(29,"label",1)(30,"abbr",2),r._uU(31,"*"),r.qZA(),r._uU(32,"Database Name"),r.qZA(),r.TgZ(33,"div",3)(34,"input",4),r.NdJ("ngModelChange",(function(e){return t.spiceinstaller.db_name=e})),r.qZA(),r.YNc(35,F,2,0,"div",5),r.qZA()(),r.TgZ(36,"div",6)(37,"label",1)(38,"abbr",2),r._uU(39,"*"),r.qZA(),r._uU(40,"Collation"),r.qZA(),r.TgZ(41,"div",3)(42,"input",4),r.NdJ("ngModelChange",(function(e){return t.spiceinstaller.lc_collate=e})),r.qZA()()(),r.TgZ(43,"div",6)(44,"label",1)(45,"abbr",2),r._uU(46,"*"),r.qZA(),r._uU(47,"Character Classification"),r.qZA(),r.TgZ(48,"div",3)(49,"input",4),r.NdJ("ngModelChange",(function(e){return t.spiceinstaller.lc_ctype=e})),r.qZA()()()),2&e&&(r.Q6J("ngClass",r.VKq(13,q,!t.hostNameCondition)),r.xp6(6),r.Q6J("ngModel",t.spiceinstaller.db_host_name),r.xp6(1),r.Q6J("ngIf",!t.hostNameCondition),r.xp6(1),r.Q6J("ngClass",r.VKq(15,q,!t.userNameCondition)),r.xp6(6),r.Q6J("ngModel",t.spiceinstaller.db_user_name),r.xp6(1),r.Q6J("ngIf",!t.userNameCondition),r.xp6(6),r.Q6J("ngModel",t.spiceinstaller.db_password),r.xp6(6),r.Q6J("ngModel",t.spiceinstaller.db_port),r.xp6(1),r.Q6J("ngClass",r.VKq(17,q,!t.dbNameCondition)),r.xp6(6),r.Q6J("ngModel",t.spiceinstaller.db_name),r.xp6(1),r.Q6J("ngIf",!t.dbNameCondition),r.xp6(7),r.Q6J("ngModel",t.spiceinstaller.lc_collate),r.xp6(7),r.Q6J("ngModel",t.spiceinstaller.lc_ctype))},dependencies:[i.mk,i.O5,n.Fj,n.JJ,n.On],encapsulation:2}),SpiceinstallerPostgreSQL})();function Y(e,t){1&e&&(r.TgZ(0,"div",11),r._uU(1,"This field is required"),r.qZA())}function Q(e,t){1&e&&(r.TgZ(0,"div",11),r._uU(1,"This field is required"),r.qZA())}function U(e,t){1&e&&(r.TgZ(0,"div",11),r._uU(1,"This field is required"),r.qZA())}const D=function(e){return{"slds-has-error":e}};let j=(()=>{class SpiceinstallerOCI8{constructor(e){this.spiceinstaller=e}}return SpiceinstallerOCI8.ɵfac=function(e){return new(e||SpiceinstallerOCI8)(r.Y36(o.f))},SpiceinstallerOCI8.ɵcmp=r.Xpm({type:SpiceinstallerOCI8,selectors:[["spice-installer-oci8"]],inputs:{hostNameCondition:"hostNameCondition",userNameCondition:"userNameCondition",dbNameCondition:"dbNameCondition"},decls:53,vars:19,consts:[[1,"slds-form-element","slds-p-vertical--small",3,"ngClass"],[1,"slds-form-element__label"],[1,"slds-required"],[1,"slds-form-element__control"],["type","text",1,"slds-input",3,"ngModel","ngModelChange"],["class","slds-form-element__help",4,"ngIf"],[1,"slds-form-element","slds-p-vertical--small"],[1,"slds-select_container"],[1,"slds-select",3,"ngModel","ngModelChange"],["value","utf8mb4_general_ci"],["value","utf8_general_ci"],[1,"slds-form-element__help"]],template:function(e,t){1&e&&(r.TgZ(0,"div",0)(1,"label",1)(2,"abbr",2),r._uU(3,"*"),r.qZA(),r._uU(4,"Host Name"),r.qZA(),r.TgZ(5,"div",3)(6,"input",4),r.NdJ("ngModelChange",(function(e){return t.spiceinstaller.db_host_name=e})),r.qZA(),r.YNc(7,Y,2,0,"div",5),r.qZA()(),r.TgZ(8,"div",0)(9,"label",1)(10,"abbr",2),r._uU(11,"*"),r.qZA(),r._uU(12,"Administrator User Name"),r.qZA(),r.TgZ(13,"div",3)(14,"input",4),r.NdJ("ngModelChange",(function(e){return t.spiceinstaller.db_user_name=e})),r.qZA(),r.YNc(15,Q,2,0,"div",5),r.qZA()(),r.TgZ(16,"div",6)(17,"label",1),r._UZ(18,"abbr",2),r._uU(19,"Administrator Password"),r.qZA(),r.TgZ(20,"div",3)(21,"input",4),r.NdJ("ngModelChange",(function(e){return t.spiceinstaller.db_password=e})),r.qZA()()(),r.TgZ(22,"div",6)(23,"label",1),r._UZ(24,"abbr",2),r._uU(25,"Port"),r.qZA(),r.TgZ(26,"div",3)(27,"input",4),r.NdJ("ngModelChange",(function(e){return t.spiceinstaller.db_port=e})),r.qZA()()(),r.TgZ(28,"div",0)(29,"label",1)(30,"abbr",2),r._uU(31,"*"),r.qZA(),r._uU(32,"Database Name"),r.qZA(),r.TgZ(33,"div",3)(34,"input",4),r.NdJ("ngModelChange",(function(e){return t.spiceinstaller.db_name=e})),r.qZA(),r.YNc(35,U,2,0,"div",5),r.qZA()(),r.TgZ(36,"div",6)(37,"label",1)(38,"abbr",2),r._uU(39,"*"),r.qZA(),r._uU(40,"Database Schema"),r.qZA(),r.TgZ(41,"div",3)(42,"input",4),r.NdJ("ngModelChange",(function(e){return t.spiceinstaller.db_schema=e})),r.qZA()()(),r.TgZ(43,"div",6)(44,"label",1),r._uU(45,"Collation"),r.qZA(),r.TgZ(46,"div",3)(47,"div",7)(48,"select",8),r.NdJ("ngModelChange",(function(e){return t.spiceinstaller.collation=e})),r.TgZ(49,"option",9),r._uU(50,"utf8mb4"),r.qZA(),r.TgZ(51,"option",10),r._uU(52,"utf8"),r.qZA()()()()()),2&e&&(r.Q6J("ngClass",r.VKq(13,D,!t.hostNameCondition)),r.xp6(6),r.Q6J("ngModel",t.spiceinstaller.db_host_name),r.xp6(1),r.Q6J("ngIf",!t.hostNameCondition),r.xp6(1),r.Q6J("ngClass",r.VKq(15,D,!t.userNameCondition)),r.xp6(6),r.Q6J("ngModel",t.spiceinstaller.db_user_name),r.xp6(1),r.Q6J("ngIf",!t.userNameCondition),r.xp6(6),r.Q6J("ngModel",t.spiceinstaller.db_password),r.xp6(6),r.Q6J("ngModel",t.spiceinstaller.db_port),r.xp6(1),r.Q6J("ngClass",r.VKq(17,D,!t.dbNameCondition)),r.xp6(6),r.Q6J("ngModel",t.spiceinstaller.db_name),r.xp6(1),r.Q6J("ngIf",!t.dbNameCondition),r.xp6(7),r.Q6J("ngModel",t.spiceinstaller.db_schema),r.xp6(6),r.Q6J("ngModel",t.spiceinstaller.collation))},dependencies:[i.mk,i.O5,n.YN,n.Kr,n.Fj,n.EJ,n.JJ,n.On],encapsulation:2}),SpiceinstallerOCI8})();function R(e,t){if(1&e&&(r.TgZ(0,"option",11),r._uU(1),r.qZA()),2&e){const e=t.$implicit;r.s9C("value",e.extension),r.xp6(1),r.Oqu(e.name)}}function B(e,t){if(1&e&&(r.TgZ(0,"div"),r._UZ(1,"spice-installer-mysqli",12),r.qZA()),2&e){const e=r.oxw();r.xp6(1),r.Q6J("dbNameCondition",e.dbNameCondition)("hostNameCondition",e.hostNameCondition)("userNameCondition",e.userNameCondition)}}function G(e,t){if(1&e&&(r.TgZ(0,"div"),r._UZ(1,"spice-installer-mysqli",12),r.qZA()),2&e){const e=r.oxw();r.xp6(1),r.Q6J("dbNameCondition",e.dbNameCondition)("hostNameCondition",e.hostNameCondition)("userNameCondition",e.userNameCondition)}}function P(e,t){if(1&e&&(r.TgZ(0,"div"),r._UZ(1,"spice-installer-pgsql",12),r.qZA()),2&e){const e=r.oxw();r.xp6(1),r.Q6J("dbNameCondition",e.dbNameCondition)("hostNameCondition",e.hostNameCondition)("userNameCondition",e.userNameCondition)}}function H(e,t){if(1&e&&(r.TgZ(0,"div"),r._UZ(1,"spice-installer-oci8",12),r.qZA()),2&e){const e=r.oxw();r.xp6(1),r.Q6J("dbNameCondition",e.dbNameCondition)("hostNameCondition",e.hostNameCondition)("userNameCondition",e.userNameCondition)}}let z=(()=>{class SpiceInstallerDatabase{constructor(e,t,s){this.toast=e,this.http=t,this.spiceinstaller=s,this.hostNameCondition=!0,this.userNameCondition=!0,this.dbNameCondition=!0,this.loading=!1,this.charset="",1==s.dbdrivers.length&&(s.db_type=s.dbdrivers[0].extension)}checkDB(){switch(this.spiceinstaller.db_type){case"mysql":case"mysqli":this.spiceinstaller.db_host_instance="SQLEXPRESS",this.spiceinstaller.db_manager="MysqliManager";break;case"pgsql":this.spiceinstaller.db_manager="PostgreSQLManager";break;case"mssql":this.spiceinstaller.db_manager="SqlsrvManager";break;case"oci8":this.spiceinstaller.db_host_instance="SQLEXPRESS",this.spiceinstaller.db_manager="OCI8Manager"}switch(this.spiceinstaller.collation){case"utf8mb4_general_ci":this.charset="utf8mb4";break;case"utf8_general_ci":this.charset="utf8"}let e={db_host_name:this.spiceinstaller.db_host_name,db_host_instance:this.spiceinstaller.db_host_instance,db_user_name:this.spiceinstaller.db_user_name,db_password:this.spiceinstaller.db_password,db_name:this.spiceinstaller.db_name,db_type:this.spiceinstaller.db_type,db_port:this.spiceinstaller.db_port,db_manager:this.spiceinstaller.db_manager,db_schema:this.spiceinstaller.db_schema,lc_collate:this.spiceinstaller.lc_collate,lc_ctype:this.spiceinstaller.lc_ctype};this.hostNameCondition=this.spiceinstaller.db_host_name.length>0,this.userNameCondition=this.spiceinstaller.db_user_name.length>0,this.dbNameCondition=this.spiceinstaller.db_name.length>0,this.hostNameCondition&&this.userNameCondition&&this.dbNameCondition&&(this.loading=!0,this.http.post(`${this.spiceinstaller.systemurl}/install/checkdb`,e).subscribe((e=>{this.loading=!1;let t=e;if(t.success)this.spiceinstaller.configObject.database=t.config,this.spiceinstaller.configObject.dboptions={persistance:this.spiceinstaller.persistent,autofree:this.spiceinstaller.autofree,debug:this.spiceinstaller.debug,ssl:this.spiceinstaller.ssl,collation:this.spiceinstaller.collation,charset:this.charset},this.spiceinstaller.selectedStep.completed=!0,this.spiceinstaller.steps[3]=this.spiceinstaller.selectedStep,this.spiceinstaller.next(this.spiceinstaller.steps[3]);else for(let e in t.errors)this.toast.sendAlert("Error: "+t.errors[e],"error")}),(e=>{if(this.loading=!1,500===e.status)this.toast.sendAlert(e.message,"error")})))}}return SpiceInstallerDatabase.ɵfac=function(e){return new(e||SpiceInstallerDatabase)(r.Y36(h.A),r.Y36(g.eN),r.Y36(o.f))},SpiceInstallerDatabase.ɵcmp=r.Xpm({type:SpiceInstallerDatabase,selectors:[["spice-installer-database"]],decls:17,vars:8,consts:[[1,"slds-p-around--medium",3,"system-overlay-loading-spinner"],[1,"slds-text-heading--medium","slds-p-vertical--small","slds-p-horizontal--x-small"],[1,"slds-form-element","slds-p-vertical--small"],[1,"slds-form-element__label"],[1,"slds-form-element__control"],[1,"slds-select_container"],[1,"slds-select",3,"disabled","ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[4,"ngIf"],[1,"slds-p-vertical--small","slds-text-align--right"],[1,"slds-button","slds-button--brand",3,"click"],[3,"value"],[3,"dbNameCondition","hostNameCondition","userNameCondition"]],template:function(e,t){1&e&&(r.TgZ(0,"div",0)(1,"h2",1),r._uU(2," Database Configuration "),r.qZA(),r.TgZ(3,"div",2)(4,"label",3),r._uU(5,"Database Type"),r.qZA(),r.TgZ(6,"div",4)(7,"div",5)(8,"select",6),r.NdJ("ngModelChange",(function(e){return t.spiceinstaller.db_type=e})),r.YNc(9,R,2,2,"option",7),r.qZA()()()(),r.YNc(10,B,2,3,"div",8),r.YNc(11,G,2,3,"div",8),r.YNc(12,P,2,3,"div",8),r.YNc(13,H,2,3,"div",8),r.TgZ(14,"div",9)(15,"button",10),r.NdJ("click",(function(){return t.checkDB()})),r._uU(16,"next"),r.qZA()()()),2&e&&(r.Q6J("system-overlay-loading-spinner",t.loading),r.xp6(8),r.Q6J("disabled",t.spiceinstaller.dbdrivers.length<2)("ngModel",t.spiceinstaller.db_type),r.xp6(1),r.Q6J("ngForOf",t.spiceinstaller.dbdrivers),r.xp6(1),r.Q6J("ngIf","mysql"==t.spiceinstaller.db_type),r.xp6(1),r.Q6J("ngIf","mssql"==t.spiceinstaller.db_type),r.xp6(1),r.Q6J("ngIf","pgsql"==t.spiceinstaller.db_type),r.xp6(1),r.Q6J("ngIf","oci8"==t.spiceinstaller.db_type))},dependencies:[i.sg,i.O5,n.YN,n.Kr,n.EJ,n.JJ,n.On,v._,O,E,j],encapsulation:2}),SpiceInstallerDatabase})();function V(e,t){if(1&e&&(r.TgZ(0,"option",14),r._uU(1),r.qZA()),2&e){const e=t.$implicit;r.s9C("value",e.type),r.xp6(1),r.Oqu(e.name)}}function K(e,t){1&e&&(r.TgZ(0,"div",15),r._uU(1,"This field is required"),r.qZA())}function $(e,t){1&e&&(r.TgZ(0,"div",15),r._uU(1,"This field is required"),r.qZA())}function X(e,t){1&e&&(r.TgZ(0,"div",15),r._uU(1,"This field is required"),r.qZA())}const W=function(e){return{"slds-has-error":e}};let ee=(()=>{class SpiceInstallerFTS{constructor(e,t,s){this.toast=e,this.http=t,this.spiceinstaller=s,this.serverCondition=!0,this.portCondition=!0,this.prefixCondition=!0,this.loading=!1,this.protocolOptions=[{type:"http",name:"HTTP"},{type:"https",name:"HTTPS"}],this.spiceinstaller.prefix||(this.spiceinstaller.prefix=this.spiceinstaller.db_name+"_")}checkFTS(){let e={server:this.spiceinstaller.server,port:this.spiceinstaller.port,prefix:this.spiceinstaller.prefix,loglevel:1,schedulerpackagesize:2500,protocol:this.spiceinstaller.transferProtocol};this.serverCondition=this.spiceinstaller.server.length>0,this.portCondition=this.spiceinstaller.port.length>0,this.prefixCondition=this.spiceinstaller.prefix.length>0,this.serverCondition&&this.portCondition&&this.prefixCondition&&(this.loading=!0,this.http.post(`${this.spiceinstaller.systemurl}/install/checkfts`,e).subscribe((e=>{this.loading=!1;let t=e;if(t.success)this.spiceinstaller.selectedStep.completed=!0,this.spiceinstaller.configObject.fts=t.config,this.spiceinstaller.steps[4]=this.spiceinstaller.selectedStep,this.spiceinstaller.next(this.spiceinstaller.steps[4]);else for(let e in t.errors)this.toast.sendAlert("Error with: "+t.errors[e],"error")})))}}return SpiceInstallerFTS.ɵfac=function(e){return new(e||SpiceInstallerFTS)(r.Y36(h.A),r.Y36(g.eN),r.Y36(o.f))},SpiceInstallerFTS.ɵcmp=r.Xpm({type:SpiceInstallerFTS,selectors:[["spice-installer-fts"]],decls:39,vars:18,consts:[[1,"slds-p-around--medium",3,"system-overlay-loading-spinner"],[1,"slds-text-heading--medium","slds-p-vertical--small","slds-p-horizontal--x-small"],[1,"slds-form-element","slds-p-vertical--small"],[1,"slds-form-element__label"],[1,"slds-required"],[1,"slds-form-element__control"],[1,"slds-select_container"],[1,"slds-select",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[1,"slds-form-element","slds-p-vertical--small",3,"ngClass"],["type","text",1,"slds-input",3,"ngModel","ngModelChange"],["class","slds-form-element__help",4,"ngIf"],[1,"slds-p-vertical--small","slds-text-align--right"],[1,"slds-button","slds-button--brand",3,"click"],[3,"value"],[1,"slds-form-element__help"]],template:function(e,t){1&e&&(r.TgZ(0,"div",0)(1,"h2",1),r._uU(2," FTS Configuration "),r.qZA(),r.TgZ(3,"div",2)(4,"label",3)(5,"abbr",4),r._uU(6,"*"),r.qZA(),r._uU(7,"Transfer Protocol"),r.qZA(),r.TgZ(8,"div",5)(9,"div",6)(10,"select",7),r.NdJ("ngModelChange",(function(e){return t.spiceinstaller.transferProtocol=e})),r.YNc(11,V,2,2,"option",8),r.qZA()()()(),r.TgZ(12,"div",9)(13,"label",3)(14,"abbr",4),r._uU(15,"*"),r.qZA(),r._uU(16,"Server"),r.qZA(),r.TgZ(17,"div",5)(18,"input",10),r.NdJ("ngModelChange",(function(e){return t.spiceinstaller.server=e})),r.qZA(),r.YNc(19,K,2,0,"div",11),r.qZA()(),r.TgZ(20,"div",9)(21,"label",3)(22,"abbr",4),r._uU(23,"*"),r.qZA(),r._uU(24,"Port"),r.qZA(),r.TgZ(25,"div",5)(26,"input",10),r.NdJ("ngModelChange",(function(e){return t.spiceinstaller.port=e})),r.qZA(),r.YNc(27,$,2,0,"div",11),r.qZA()(),r.TgZ(28,"div",9)(29,"label",3)(30,"abbr",4),r._uU(31,"*"),r.qZA(),r._uU(32,"Prefix"),r.qZA(),r.TgZ(33,"div",5)(34,"input",10),r.NdJ("ngModelChange",(function(e){return t.spiceinstaller.prefix=e})),r.qZA(),r.YNc(35,X,2,0,"div",11),r.qZA()(),r.TgZ(36,"div",12)(37,"button",13),r.NdJ("click",(function(){return t.checkFTS()})),r._uU(38,"next"),r.qZA()()()),2&e&&(r.Q6J("system-overlay-loading-spinner",t.loading),r.xp6(10),r.Q6J("ngModel",t.spiceinstaller.transferProtocol),r.xp6(1),r.Q6J("ngForOf",t.protocolOptions),r.xp6(1),r.Q6J("ngClass",r.VKq(12,W,!t.serverCondition)),r.xp6(6),r.Q6J("ngModel",t.spiceinstaller.server),r.xp6(1),r.Q6J("ngIf",!t.serverCondition),r.xp6(1),r.Q6J("ngClass",r.VKq(14,W,!t.portCondition)),r.xp6(6),r.Q6J("ngModel",t.spiceinstaller.port),r.xp6(1),r.Q6J("ngIf",!t.portCondition),r.xp6(1),r.Q6J("ngClass",r.VKq(16,W,!t.prefixCondition)),r.xp6(6),r.Q6J("ngModel",t.spiceinstaller.prefix),r.xp6(1),r.Q6J("ngIf",!t.prefixCondition))},dependencies:[i.mk,i.sg,i.O5,n.YN,n.Kr,n.Fj,n.EJ,n.JJ,n.On,v._],encapsulation:2}),SpiceInstallerFTS})();function te(e,t){1&e&&(r.TgZ(0,"div",12),r._uU(1,"This field is required"),r.qZA())}function se(e,t){1&e&&(r.TgZ(0,"div",12),r._uU(1,"Password guideline: One uppercase character, one lowercase character, one digit, 6 characters."),r.qZA())}function ie(e,t){1&e&&(r.TgZ(0,"div",12),r._uU(1,"Password doesn't match"),r.qZA())}function ne(e,t){1&e&&(r.TgZ(0,"div",12),r._uU(1,"This field is required"),r.qZA())}function le(e,t){1&e&&(r.TgZ(0,"div",12),r._uU(1,"This field is required"),r.qZA())}const oe=function(e){return{"slds-has-error":e}};let ae=(()=>{class SpiceInstallerCredentials{constructor(e){this.spiceinstaller=e,this.usernameCondition=!0,this.passwordCondition=!0,this.rpPasswordCondition=!0,this.surnameCondition=!0,this.emailCondition=!0,this.rpPassword="",this.pwRegexp=new RegExp("(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.{6,})")}saveUser(){this.usernameCondition=this.spiceinstaller.username.length>0,this.passwordCondition=this.spiceinstaller.password.length>0&&this.pwRegexp.test(this.spiceinstaller.password),this.rpPasswordCondition=this.rpPassword==this.spiceinstaller.password,this.surnameCondition=this.spiceinstaller.surname.length>0,this.emailCondition=this.spiceinstaller.email.length>0,this.usernameCondition&&this.passwordCondition&&this.rpPasswordCondition&&this.surnameCondition&&this.emailCondition&&(this.spiceinstaller.configObject.credentials={username:this.spiceinstaller.username,password:this.spiceinstaller.password,firstname:this.spiceinstaller.firstname,surname:this.spiceinstaller.surname,email:this.spiceinstaller.email},this.spiceinstaller.selectedStep.completed=!0,this.spiceinstaller.steps[5]=this.spiceinstaller.selectedStep,this.spiceinstaller.next(this.spiceinstaller.steps[5]))}}return SpiceInstallerCredentials.ɵfac=function(e){return new(e||SpiceInstallerCredentials)(r.Y36(o.f))},SpiceInstallerCredentials.ɵcmp=r.Xpm({type:SpiceInstallerCredentials,selectors:[["spice-installer-credentials"]],decls:52,vars:26,consts:[[1,"slds-p-around--medium"],[1,"slds-text-heading--medium","slds-p-vertical--small","slds-p-horizontal--x-small"],[1,"slds-form-element","slds-p-vertical--small",3,"ngClass"],[1,"slds-form-element__label"],[1,"slds-required"],[1,"slds-form-element__control"],["type","text",1,"slds-input",3,"ngModel","ngModelChange"],["class","slds-form-element__help",4,"ngIf"],["type","password",1,"slds-input",3,"ngModel","ngModelChange"],[1,"slds-form-element","slds-p-vertical--small"],[1,"slds-p-vertical--small","slds-text-align--right"],[1,"slds-button","slds-button--brand",3,"click"],[1,"slds-form-element__help"]],template:function(e,t){1&e&&(r.TgZ(0,"div",0)(1,"h2",1),r._uU(2," CRM User Credentials "),r.qZA(),r.TgZ(3,"div",2)(4,"label",3)(5,"abbr",4),r._uU(6,"*"),r.qZA(),r._uU(7,"User Name"),r.qZA(),r.TgZ(8,"div",5)(9,"input",6),r.NdJ("ngModelChange",(function(e){return t.spiceinstaller.username=e})),r.qZA(),r.YNc(10,te,2,0,"div",7),r.qZA()(),r.TgZ(11,"div",2)(12,"label",3)(13,"abbr",4),r._uU(14,"*"),r.qZA(),r._uU(15,"Password"),r.qZA(),r.TgZ(16,"div",5)(17,"input",8),r.NdJ("ngModelChange",(function(e){return t.spiceinstaller.password=e})),r.qZA(),r.YNc(18,se,2,0,"div",7),r.qZA()(),r.TgZ(19,"div",2)(20,"label",3)(21,"abbr",4),r._uU(22,"*"),r.qZA(),r._uU(23,"Repeat Password"),r.qZA(),r.TgZ(24,"div",5)(25,"input",8),r.NdJ("ngModelChange",(function(e){return t.rpPassword=e})),r.qZA(),r.YNc(26,ie,2,0,"div",7),r.qZA()(),r.TgZ(27,"div",9)(28,"label",3),r._UZ(29,"abbr",4),r._uU(30,"First Name"),r.qZA(),r.TgZ(31,"div",5)(32,"input",6),r.NdJ("ngModelChange",(function(e){return t.spiceinstaller.firstname=e})),r.qZA()()(),r.TgZ(33,"div",2)(34,"label",3)(35,"abbr",4),r._uU(36,"*"),r.qZA(),r._uU(37,"Last Name"),r.qZA(),r.TgZ(38,"div",5)(39,"input",6),r.NdJ("ngModelChange",(function(e){return t.spiceinstaller.surname=e})),r.qZA(),r.YNc(40,ne,2,0,"div",7),r.qZA()(),r.TgZ(41,"div",2)(42,"label",3)(43,"abbr",4),r._uU(44,"*"),r.qZA(),r._uU(45,"Email"),r.qZA(),r.TgZ(46,"div",5)(47,"input",6),r.NdJ("ngModelChange",(function(e){return t.spiceinstaller.email=e})),r.qZA(),r.YNc(48,le,2,0,"div",7),r.qZA()(),r.TgZ(49,"div",10)(50,"button",11),r.NdJ("click",(function(){return t.saveUser()})),r._uU(51,"next"),r.qZA()()()),2&e&&(r.xp6(3),r.Q6J("ngClass",r.VKq(16,oe,!t.usernameCondition)),r.xp6(6),r.Q6J("ngModel",t.spiceinstaller.username),r.xp6(1),r.Q6J("ngIf",!t.usernameCondition),r.xp6(1),r.Q6J("ngClass",r.VKq(18,oe,!t.passwordCondition)),r.xp6(6),r.Q6J("ngModel",t.spiceinstaller.password),r.xp6(1),r.Q6J("ngIf",!t.passwordCondition),r.xp6(1),r.Q6J("ngClass",r.VKq(20,oe,!t.rpPasswordCondition)),r.xp6(6),r.Q6J("ngModel",t.rpPassword),r.xp6(1),r.Q6J("ngIf",!t.rpPasswordCondition),r.xp6(6),r.Q6J("ngModel",t.spiceinstaller.firstname),r.xp6(1),r.Q6J("ngClass",r.VKq(22,oe,!t.surnameCondition)),r.xp6(6),r.Q6J("ngModel",t.spiceinstaller.surname),r.xp6(1),r.Q6J("ngIf",!t.surnameCondition),r.xp6(1),r.Q6J("ngClass",r.VKq(24,oe,!t.emailCondition)),r.xp6(6),r.Q6J("ngModel",t.spiceinstaller.email),r.xp6(1),r.Q6J("ngIf",!t.emailCondition))},dependencies:[i.mk,i.O5,n.Fj,n.JJ,n.On],encapsulation:2}),SpiceInstallerCredentials})();function de(e,t){if(1&e&&(r.TgZ(0,"option",10),r._uU(1),r.qZA()),2&e){const e=t.$implicit;r.Q6J("ngValue",e),r.xp6(1),r.Oqu(e.language_name)}}let re=(()=>{class SpiceInstallerSetLanguage{constructor(e,t,s,i,n,l){this.toast=e,this.http=t,this.router=s,this.configurationService=i,this.backend=n,this.spiceinstaller=l,this.languages=[],this.loading=!1,this.checkReference(),this.http.get(`${this.spiceinstaller.systemurl}/install/getlanguages`).subscribe((e=>{this.languages=e.languages}))}checkReference(){this.loading=!0,this.http.get(`${this.spiceinstaller.systemurl}/install/checkreference`).subscribe((e=>{this.loading=!1,e||this.toast.sendToast("cannot connect to reference server","error")}))}setLanguage(){this.spiceinstaller.configObject.language=this.spiceinstaller.language,this.spiceinstaller.selectedStep.completed=!0,this.spiceinstaller.steps[6]=this.spiceinstaller.selectedStep,this.spiceinstaller.next(this.spiceinstaller.steps[6])}}return SpiceInstallerSetLanguage.ɵfac=function(e){return new(e||SpiceInstallerSetLanguage)(r.Y36(h.A),r.Y36(g.eN),r.Y36(p.F0),r.Y36(f.C),r.Y36(b.y),r.Y36(o.f))},SpiceInstallerSetLanguage.ɵcmp=r.Xpm({type:SpiceInstallerSetLanguage,selectors:[["spice-installer-set-language"]],decls:13,vars:2,consts:[[1,"slds-p-around--medium"],[1,"slds-text-heading--medium","slds-p-vertical--small","slds-p-horizontal--x-small"],[1,"slds-form-element","slds-p-vertical--small"],[1,"slds-form-element__label"],[1,"slds-form-element__control"],[1,"slds-select_container"],[1,"slds-select",3,"ngModel","ngModelChange"],[3,"ngValue",4,"ngFor","ngForOf"],[1,"slds-p-vertical--small","slds-text-align--right"],[1,"slds-button","slds-button--brand",3,"click"],[3,"ngValue"]],template:function(e,t){1&e&&(r.TgZ(0,"div",0)(1,"h2",1),r._uU(2," Set Language "),r.qZA(),r.TgZ(3,"div",2)(4,"label",3),r._uU(5,"Choose a Language"),r.qZA(),r.TgZ(6,"div",4)(7,"div",5)(8,"select",6),r.NdJ("ngModelChange",(function(e){return t.spiceinstaller.language=e})),r.YNc(9,de,2,2,"option",7),r.qZA()()()(),r.TgZ(10,"div",8)(11,"button",9),r.NdJ("click",(function(){return t.setLanguage()})),r._uU(12,"next"),r.qZA()()()),2&e&&(r.xp6(8),r.Q6J("ngModel",t.spiceinstaller.language),r.xp6(1),r.Q6J("ngForOf",t.languages))},dependencies:[i.sg,n.YN,n.Kr,n.EJ,n.JJ,n.On],encapsulation:2}),SpiceInstallerSetLanguage})();var ce=s(4044);function ue(e,t){if(1&e&&(r.TgZ(0,"tr",9)(1,"td")(2,"div",10),r._uU(3),r.qZA()(),r.TgZ(4,"td")(5,"div",10),r._uU(6),r.qZA()()()),2&e){const e=t.$implicit,s=r.oxw();r.xp6(3),r.Oqu(s.spiceinstaller.keyToLabel(e.key)),r.xp6(3),r.Oqu(e.value)}}function me(e,t){if(1&e&&(r.TgZ(0,"tr",9)(1,"td")(2,"div",10),r._uU(3),r.qZA()(),r.TgZ(4,"td")(5,"div",10),r._uU(6),r.qZA()()()),2&e){const e=t.$implicit,s=r.oxw();r.xp6(3),r.Oqu(s.spiceinstaller.keyToLabel(e.key)),r.xp6(3),r.Oqu(e.value)}}function he(e,t){if(1&e&&(r.TgZ(0,"tr",9)(1,"td")(2,"div",10),r._uU(3),r.qZA()(),r.TgZ(4,"td")(5,"div",10),r._uU(6),r.qZA()()()),2&e){const e=t.$implicit,s=r.oxw();r.xp6(3),r.Oqu(s.spiceinstaller.keyToLabel(e.key)),r.xp6(3),r.Oqu(e.value)}}function ge(e,t){if(1&e&&(r.TgZ(0,"tr",9)(1,"td")(2,"div",10),r._uU(3),r.qZA()(),r.TgZ(4,"td")(5,"div",10),r._uU(6),r.qZA()()()),2&e){const e=t.$implicit,s=r.oxw();r.xp6(3),r.Oqu(s.spiceinstaller.keyToLabel(e.key)),r.xp6(3),r.Oqu(e.value)}}function pe(e,t){if(1&e&&(r.TgZ(0,"tr",9)(1,"td")(2,"div",10),r._uU(3),r.qZA()(),r.TgZ(4,"td")(5,"div",10),r._uU(6),r.qZA()()()),2&e){const e=t.$implicit,s=r.oxw();r.xp6(3),r.Oqu(s.spiceinstaller.keyToLabel(e.key)),r.xp6(3),r.Oqu(e.value)}}function fe(e,t){if(1&e&&(r.TgZ(0,"tr",9)(1,"td")(2,"div",10),r._uU(3),r.qZA()(),r.TgZ(4,"td")(5,"div",10),r._uU(6),r.qZA()()()),2&e){const e=t.$implicit,s=r.oxw();r.xp6(3),r.Oqu(s.spiceinstaller.keyToLabel(e.key)),r.xp6(3),r.Oqu(e.value)}}function be(e,t){1&e&&(r.ynx(0),r.TgZ(1,"section",11)(2,"div",12),r._UZ(3,"div",13),r.TgZ(4,"div",14)(5,"div",15),r._UZ(6,"div",16),r.TgZ(7,"div",17),r._uU(8,"Installing"),r.qZA()()()()(),r._UZ(9,"div",18),r.BQk())}let _e=(()=>{class SpiceInstallerReview{constructor(e,t,s,i,n,l){this.toast=e,this.modal=t,this.http=s,this.router=i,this.configurationService=n,this.spiceinstaller=l,this.installing=!1}ngAfterViewInit(){this.spiceinstaller.selectedStep.completed=!0,this.spiceinstaller.steps[7]=this.spiceinstaller.selectedStep}install(){this.installing=!0,this.http.post(`${this.spiceinstaller.systemurl}/install/process`,this.spiceinstaller.configObject).subscribe((e=>{let t=e;if(this.installing=!1,t.success)window.location.href=window.location.href.replace("#/install","");else for(let e in t.errors)this.toast.sendAlert("Error with: "+e,"error")}),(e=>{if(500===e.status)this.toast.sendAlert(e.message,"error");this.installing=!1}))}}return SpiceInstallerReview.ɵfac=function(e){return new(e||SpiceInstallerReview)(r.Y36(h.A),r.Y36(ce.o),r.Y36(g.eN),r.Y36(p.F0),r.Y36(f.C),r.Y36(o.f))},SpiceInstallerReview.ɵcmp=r.Xpm({type:SpiceInstallerReview,selectors:[["spice-installer-review"]],decls:47,vars:19,consts:[[1,"slds-grid","slds-grid_vertical","slds-p-around--medium"],[1,"slds-text-heading_medium","slds-p-bottom--medium"],[1,"slds-table","slds-table_cell-buffer","slds-table_bordered","slds-table_col-bordered"],[1,"slds-text-heading_medium"],["class","slds-hint-parent",4,"ngFor","ngForOf"],[1,"slds-align-bottom","slds-grid","slds-grid--vertical-align-center","slds-p-vertical--small"],[1,"slds-m-left--small","slds-size--1-of-1"],[1,"slds-button","slds-button--brand",3,"click"],[4,"ngIf"],[1,"slds-hint-parent"],[1,"slds-truncate"],["role","dialog","aria-modal","true",1,"slds-modal","slds-fade-in-open"],[1,"slds-modal__container"],[1,"slds-modal__header","slds-modal__header_empty"],[1,"slds-modal__content","slds-p-around_medium","slds-align--absolute-center"],[1,"slds-p-horizontal--x-large","slds-grid","slds-grid--vertical-align-center"],[1,"cssload-double-torus",2,"width","16px","height","16px"],[1,"slds-p-left--medium"],[1,"slds-backdrop","slds-backdrop_open"]],template:function(e,t){1&e&&(r.TgZ(0,"div",0)(1,"h2",1),r._uU(2,"Settings Review"),r.qZA(),r.TgZ(3,"table",2)(4,"tbody")(5,"tr")(6,"td")(7,"h2",3),r._uU(8,"Backend Configuration Settings:"),r.qZA()(),r._UZ(9,"td"),r.qZA(),r.YNc(10,ue,7,2,"tr",4),r.ALo(11,"keyvalue"),r.TgZ(12,"tr")(13,"td")(14,"h2",3),r._uU(15,"Database Configuration Settings:"),r.qZA()(),r._UZ(16,"td"),r.qZA(),r.YNc(17,me,7,2,"tr",4),r.ALo(18,"keyvalue"),r.YNc(19,he,7,2,"tr",4),r.ALo(20,"keyvalue"),r.TgZ(21,"tr")(22,"td")(23,"h2",3),r._uU(24,"FTS Configuration Settings:"),r.qZA()(),r._UZ(25,"td"),r.qZA(),r.YNc(26,ge,7,2,"tr",4),r.ALo(27,"keyvalue"),r.TgZ(28,"tr")(29,"td")(30,"h2",3),r._uU(31,"Credentials:"),r.qZA()(),r._UZ(32,"td"),r.qZA(),r.YNc(33,pe,7,2,"tr",4),r.ALo(34,"keyvalue"),r.TgZ(35,"tr")(36,"td")(37,"h2",3),r._uU(38,"Language:"),r.qZA()(),r._UZ(39,"td"),r.qZA(),r.YNc(40,fe,7,2,"tr",4),r.ALo(41,"keyvalue"),r.qZA()(),r.TgZ(42,"div",5)(43,"div",6)(44,"button",7),r.NdJ("click",(function(){return t.install()})),r._uU(45,"begin installation"),r.qZA()()()(),r.YNc(46,be,10,0,"ng-container",8)),2&e&&(r.xp6(10),r.Q6J("ngForOf",r.lcZ(11,7,t.spiceinstaller.configObject.backendconfig)),r.xp6(7),r.Q6J("ngForOf",r.lcZ(18,9,t.spiceinstaller.configObject.database)),r.xp6(2),r.Q6J("ngForOf",r.lcZ(20,11,t.spiceinstaller.configObject.dboptions)),r.xp6(7),r.Q6J("ngForOf",r.lcZ(27,13,t.spiceinstaller.configObject.fts)),r.xp6(7),r.Q6J("ngForOf",r.lcZ(34,15,t.spiceinstaller.configObject.credentials)),r.xp6(7),r.Q6J("ngForOf",r.lcZ(41,17,t.spiceinstaller.configObject.language)),r.xp6(6),r.Q6J("ngIf",t.installing))},dependencies:[i.sg,i.O5,i.Nd],encapsulation:2}),SpiceInstallerReview})();function ye(e,t){1&e&&(r.TgZ(0,"div",2),r._UZ(1,"spice-installer-set-backend"),r.qZA())}function ve(e,t){1&e&&(r.TgZ(0,"div",2),r._UZ(1,"spice-installer-systemcheck"),r.qZA())}function xe(e,t){1&e&&(r.TgZ(0,"div",2),r._UZ(1,"spice-installer-licence"),r.qZA())}function Ze(e,t){1&e&&(r.TgZ(0,"div",2),r._UZ(1,"spice-installer-database"),r.qZA())}function we(e,t){1&e&&(r.TgZ(0,"div",2),r._UZ(1,"spice-installer-fts"),r.qZA())}function Te(e,t){1&e&&(r.TgZ(0,"div",2),r._UZ(1,"spice-installer-credentials"),r.qZA())}function Ce(e,t){1&e&&(r.TgZ(0,"div",2),r._UZ(1,"spice-installer-set-language"),r.qZA())}function Ae(e,t){1&e&&(r.TgZ(0,"div",2),r._UZ(1,"spice-installer-review"),r.qZA())}function ke(e,t){if(1&e&&(r.TgZ(0,"div"),r.YNc(1,ye,2,0,"div",1),r.YNc(2,ve,2,0,"div",1),r.YNc(3,xe,2,0,"div",1),r.YNc(4,Ze,2,0,"div",1),r.YNc(5,we,2,0,"div",1),r.YNc(6,Te,2,0,"div",1),r.YNc(7,Ce,2,0,"div",1),r.YNc(8,Ae,2,0,"div",1),r.qZA()),2&e){const e=t.$implicit,s=r.oxw();r.xp6(1),r.Q6J("ngIf","setbackend"==e.id&&"setbackend"==s.spiceinstaller.selectedStep.id),r.xp6(1),r.Q6J("ngIf","systemcheck"==e.id&&"systemcheck"==s.spiceinstaller.selectedStep.id),r.xp6(1),r.Q6J("ngIf","licence"==e.id&&"licence"==s.spiceinstaller.selectedStep.id),r.xp6(1),r.Q6J("ngIf","database"==e.id&&"database"==s.spiceinstaller.selectedStep.id),r.xp6(1),r.Q6J("ngIf","fts"==e.id&&"fts"==s.spiceinstaller.selectedStep.id),r.xp6(1),r.Q6J("ngIf","credentials"==e.id&&"credentials"==s.spiceinstaller.selectedStep.id),r.xp6(1),r.Q6J("ngIf","setlanguage"==e.id&&"setlanguage"==s.spiceinstaller.selectedStep.id),r.xp6(1),r.Q6J("ngIf","review"==e.id&&"review"==s.spiceinstaller.selectedStep.id)}}let Le=(()=>{class SpiceInstallerDetailContainer{constructor(e,t,s,i,n,l){this.toast=e,this.http=t,this.router=s,this.configurationService=i,this.backend=n,this.spiceinstaller=l}}return SpiceInstallerDetailContainer.ɵfac=function(e){return new(e||SpiceInstallerDetailContainer)(r.Y36(h.A),r.Y36(g.eN),r.Y36(p.F0),r.Y36(f.C),r.Y36(b.y),r.Y36(o.f))},SpiceInstallerDetailContainer.ɵcmp=r.Xpm({type:SpiceInstallerDetailContainer,selectors:[["spice-installer-detail-container"]],decls:1,vars:1,consts:[[4,"ngFor","ngForOf"],["class","slds-grid slds-grid_vertical",4,"ngIf"],[1,"slds-grid","slds-grid_vertical"]],template:function(e,t){1&e&&r.YNc(0,ke,9,8,"div",0),2&e&&r.Q6J("ngForOf",t.spiceinstaller.steps)},dependencies:[i.sg,i.O5,y,T,k,z,ee,ae,re,_e],encapsulation:2}),SpiceInstallerDetailContainer})();var Me=s(3194);let Se=(()=>{class SpiceInstallerModule{}return SpiceInstallerModule.ɵfac=function(e){return new(e||SpiceInstallerModule)},SpiceInstallerModule.ɵmod=r.oAB({type:SpiceInstallerModule}),SpiceInstallerModule.ɵinj=r.cJS({providers:[o.f],imports:[i.ez,n.u5,l.o,a.SystemComponents]}),SpiceInstallerModule})();("undefined"==typeof ngJitMode||ngJitMode)&&r.kYT(Se,{declarations:[d.s,m,Le,y,T,k,z,O,E,j,ee,ae,re,_e],imports:[i.ez,n.u5,l.o,a.SystemComponents],exports:[d.s]}),r.B6R(d.s,[Me.t,m,Le],[])},8861:(e,t,s)=>{"use strict";s.d(t,{S:()=>v});var i=s(1571),n=s(2667),l=s(5329),o=s(4154),a=s(5710),d=s(6895),r=s(2656),c=s(3463),u=s(5681),m=s(151);function h(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"button",3),i.NdJ("click",(function(){const t=i.CHM(e).$implicit,s=i.oxw();return i.KtG(s.propagateclick(t.id))})),i.TgZ(1,"object-action-container-item",4),i.NdJ("actionemitter",(function(t){i.CHM(e);const s=i.oxw();return i.KtG(s.emitaction(t))})),i.qZA()()}if(2&e){const e=t.$implicit,s=i.oxw();i.Q6J("ngClass",s.addclasses(e))("disabled",s.isDisabled(e.id)),i.xp6(1),i.Q6J("actionitem",e)("displayasicon",s.displayasicon)}}function g(e,t){if(1&e&&(i.TgZ(0,"div",15),i._UZ(1,"system-label",16),i.qZA()),2&e){const e=i.oxw().$implicit;i.xp6(1),i.Q6J("label","undefined"==e.name?"LBL_DEFAULT":e.name)}}const p=function(e){return{"slds-hide":e}},f=function(e){return{"slds-disabled-text":e}};function b(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"li",17),i.NdJ("click",(function(){const t=i.CHM(e).$implicit,s=i.oxw(3);return i.KtG(s.propagateclick(t.id))})),i.TgZ(1,"a",18)(2,"object-action-container-item",19),i.NdJ("actionemitter",(function(t){i.CHM(e);const s=i.oxw(3);return i.KtG(s.emitaction(t))})),i.qZA()()()}if(2&e){const e=t.$implicit,s=i.oxw(3);i.Q6J("ngClass",i.VKq(3,p,s.isHidden(e.id))),i.xp6(2),i.Q6J("ngClass",i.VKq(5,f,s.isDisabled(e.id)))("actionitem",e)}}function _(e,t){if(1&e&&(i.TgZ(0,"div"),i.YNc(1,g,2,1,"div",12),i.TgZ(2,"ul",13),i.YNc(3,b,3,7,"li",14),i.qZA()()),2&e){const e=t.$implicit,s=t.last,n=i.oxw(2);i.Udp("width","horizontal"==n.grouped?"160px":"initial")("min-width","horizontal"==n.grouped?"160px":"initial"),i.ekj("slds-hide",e.hidden)("slds-border--right",!s&&"horizontal"==n.grouped),i.xp6(1),i.Q6J("ngIf",n.groups.length>1),i.xp6(1),i.ekj("slds-hide",e.hidden),i.xp6(1),i.Q6J("ngForOf",e.items)}}function y(e,t){if(1&e&&(i.TgZ(0,"div",5)(1,"button",6),i._UZ(2,"system-button-icon",7),i.TgZ(3,"span",8),i._UZ(4,"system-label",9),i.qZA()(),i.TgZ(5,"div",10),i.YNc(6,_,4,12,"div",11),i.qZA()()),2&e){const e=i.oxw();i.xp6(1),i.Q6J("disabled",e.opendisabled),i.xp6(4),i.ekj("slds-grid","horizontal"==e.grouped),i.xp6(1),i.Q6J("ngForOf",e.groups)}}let v=(()=>{class ObjectActionContainer{constructor(e,t,s,n,l){this.language=e,this.metadata=t,this.model=s,this.ngZone=n,this.cdRef=l,this.disabled=!1,this.containerclass="slds-button-group",this.displayasicon=!1,this.actionset="",this.mainactionitems=[],this.actionemitter=new i.vpe,this.stable=!1,this.horizontalView=!1,this.groups=[]}ngDoCheck(){this.stable&&this.groups.forEach((e=>{e.hidden=0==this.actionitemlist.filter((t=>(t.actionitem.actionconfig?.group==e.name||!t.actionitem.actionconfig?.group&&"undefined"==e.name)&&!t.hidden)).length}))}buildItems(){const e=this.metadata.getActionSetItems(this.actionset).sort(((e,t)=>e.sequence>t.sequence?1:-1));this.mainactionitems=[];let t=!0;this.groups=[];const s={};for(const i of e){const e={disabled:!0,id:i.id,sequence:i.sequence,action:i.action,component:i.component,actionconfig:i.actionconfig};if(t||"1"==i.singlebutton)this.mainactionitems.push(e),t=!1;else if(!this.isHidden(i.id)){const t=["horizontal","vertical"].indexOf(this.grouped)>-1&&i.actionconfig?.group?i.actionconfig?.group:"undefined";s[t]?s[t].items.push(e):s[t]={name:t,sequence:"undefined"==t?1e3:Object.keys(s).length+1,items:[e],hidden:!1}}}this.groups=Object.values(s).sort(((e,t)=>e.sequence>t.sequence?1:-1))}ngOnChanges(){this.grouped=this.metadata.getActionSet(this.actionset)?.grouped,this.buildItems()}ngAfterViewInit(){this.stableSub=this.ngZone.onStable.subscribe((e=>{this.stable=!0,this.stableSub.unsubscribe(),this.cdRef.detectChanges()}))}get opendisabled(){let e=!0;return this.groups.some((t=>t.items.some((t=>{if(!1===this.isDisabled(t.id))return e=!1,!0})))),e}get hasAddItems(){return this.groups.some((e=>e.items.length>0))}addclasses(e){let t=e.actionconfig.addclasses;return this.isHidden(e.id)&&(t+=" slds-hide"),t}isDisabled(e){if(this.disabled)return!0;let t=!0;return this.actionitemlist&&this.actionitemlist.some((s=>{if(s.id==e)return t=s.disabled,!0})),t}isHidden(e){if(!this.stable)return!1;let t=!1;if(this.actionitemlist){let s=this.actionitemlist.find((t=>t.id==e));s&&(t=s.hidden)}return t}isGroupHidden(e,t){return!!this.stable&&0==Array.from(t.children).filter((e=>!e.classList.contains("slds-hide"))).length}propagateclick(e){this.actionitemlist.some((t=>{if(t.id==e)return t.disabled||t.execute(),!0}))}emitaction(e){this.actionemitter.emit(e)}}return ObjectActionContainer.ɵfac=function(e){return new(e||ObjectActionContainer)(i.Y36(l.d),i.Y36(o.Pu),i.Y36(a.o),i.Y36(i.R0b),i.Y36(i.sBO))},ObjectActionContainer.ɵcmp=i.Xpm({type:ObjectActionContainer,selectors:[["object-action-container"]],viewQuery:function(e,t){if(1&e&&i.Gf(n.s,5),2&e){let e;i.iGM(e=i.CRH())&&(t.actionitemlist=e)}},inputs:{disabled:"disabled",containerclass:"containerclass",displayasicon:"displayasicon",actionset:"actionset"},outputs:{actionemitter:"actionemitter"},features:[i.TTD],decls:3,vars:3,consts:[["role","group",3,"ngClass"],["class","slds-button slds-button_neutral",3,"ngClass","disabled","click",4,"ngFor","ngForOf"],["class","slds-dropdown-trigger slds-dropdown-trigger_click slds-button_last","system-dropdown-trigger","",4,"ngIf"],[1,"slds-button","slds-button_neutral",3,"ngClass","disabled","click"],[3,"actionitem","displayasicon","actionemitter"],["system-dropdown-trigger","",1,"slds-dropdown-trigger","slds-dropdown-trigger_click","slds-button_last"],["aria-haspopup","true","system-title","LBL_MORE",1,"slds-button","slds-button_icon","slds-button_icon-border-filled",3,"disabled"],["icon","down"],[1,"slds-assistive-text"],["label","LBL_MORE"],[1,"slds-dropdown","slds-dropdown_right","slds-dropdown_actions","slds-p-around--none",2,"max-width","initial"],[3,"slds-hide","slds-border--right","width","min-width",4,"ngFor","ngForOf"],["class","slds-p-around--x-small slds-theme--shade slds-text-title--caps",4,"ngIf"],["role","menu",1,"slds-dropdown__list"],["class","slds-dropdown__item","role","presentation",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"slds-p-around--x-small","slds-theme--shade","slds-text-title--caps"],[3,"label"],["role","presentation",1,"slds-dropdown__item",3,"ngClass","click"],["href","javascript:void(0);","role","menuitem","tabindex","0"],[1,"slds-truncate",3,"ngClass","actionitem","actionemitter"]],template:function(e,t){1&e&&(i.TgZ(0,"div",0),i.YNc(1,h,2,4,"button",1),i.YNc(2,y,7,4,"div",2),i.qZA()),2&e&&(i.Q6J("ngClass",t.containerclass),i.xp6(1),i.Q6J("ngForOf",t.mainactionitems),i.xp6(1),i.Q6J("ngIf",t.hasAddItems))},dependencies:[d.mk,d.sg,d.O5,r.J,c._,u.l,m.S,n.s],encapsulation:2}),ObjectActionContainer})()},2667:(e,t,s)=>{"use strict";s.d(t,{s:()=>r});var i=s(1571),n=s(727),l=s(5329),o=s(4154),a=s(5710);const d=["actioncontainer"];let r=(()=>{class ObjectActionContainerItem{constructor(e,t,s,l,o,a){this.language=e,this.metadata=t,this.model=s,this.ngZone=l,this.injector=o,this.cdr=a,this.displayasicon=!1,this.actionemitter=new i.vpe,this.subscriptions=new n.w0,this.standardActions={NEW:"ObjectActionNewButton",DUPLICATE:"ObjectActionDuplicateButton",NEWRELATED:"ObjectActionNewrelatedButton",EDIT:"ObjectActionEditButton",DELETE:"ObjectActionDeleteButton",AUDIT:"ObjectActionAuditlogButton",IMPORT:"SpiceImporterImportButton",MAIL:"ObjectActionBeanToMailButton",PRINT:"ObjectActionOutputBeanButton",SELECT:"ObjectActionSelectButton",OPEN:"ObjectActionOpenButton",CANCEL:"ObjectActionCancelButton",SAVE:"ObjectActionSaveButton",SAVERELATED:"ObjectActionSaveRelatedButton"},this.stable=!1}get id(){return this.actionitem.id}get disabled(){return!this.stable||!this.componentref||!!this.componentref.instance.disabled}get hidden(){return!this.stable||!this.componentref||!!this.componentref.instance.hidden}ngAfterViewInit(){this.metadata.addComponent(this.actionitem.action?this.standardActions[this.actionitem.action]:this.actionitem.component,this.actioncontainer,this.injector).subscribe((e=>{e.instance.parent=this.model,e.instance.actionconfig=this.actionitem.actionconfig,e.instance.displayasicon=this.displayasicon,e.instance.actionemitter&&this.subscriptions.add(e.instance.actionemitter.subscribe((e=>{this.actionemitter.emit(e)}))),this.componentref=e,this.cdr.detectChanges()})),this.stableSub=this.ngZone.onStable.subscribe((e=>{this.stable=!0,this.stableSub.unsubscribe()}))}ngOnDestroy(){this.subscriptions.unsubscribe()}execute(){this.componentref&&this.componentref.instance.execute&&this.componentref.instance.execute()}}return ObjectActionContainerItem.ɵfac=function(e){return new(e||ObjectActionContainerItem)(i.Y36(l.d),i.Y36(o.Pu),i.Y36(a.o),i.Y36(i.R0b),i.Y36(i.zs3),i.Y36(i.sBO))},ObjectActionContainerItem.ɵcmp=i.Xpm({type:ObjectActionContainerItem,selectors:[["object-action-container-item"]],viewQuery:function(e,t){if(1&e&&i.Gf(d,7,i.s_b),2&e){let e;i.iGM(e=i.CRH())&&(t.actioncontainer=e.first)}},inputs:{actionitem:"actionitem",displayasicon:"displayasicon"},outputs:{actionemitter:"actionemitter"},decls:2,vars:0,consts:[["actioncontainer",""]],template:function(e,t){1&e&&i._UZ(0,"div",null,0)},encapsulation:2}),ObjectActionContainerItem})()},586:(e,t,s)=>{"use strict";s.d(t,{g:()=>T});var i=s(3441),n=s(8861),l=s(1571),o=s(5329),a=s(3369),d=s(5710),r=s(2294),c=s(4154),u=s(6559),m=s(6895),h=s(2656),g=s(5681),p=s(2667);const f=function(e){return{"slds-hide":e}},b=function(e){return{"slds-disabled-text":e}};function _(e,t){if(1&e){const e=l.EpF();l.TgZ(0,"li",9),l.NdJ("click",(function(){const t=l.CHM(e).$implicit,s=l.oxw(3);return l.KtG(s.propagateclick(t.id))})),l.TgZ(1,"a",10)(2,"object-action-container-item",11),l.NdJ("actionemitter",(function(t){l.CHM(e);const s=l.oxw(3);return l.KtG(s.emitaction(t))})),l.qZA()()()}if(2&e){const e=t.$implicit,s=l.oxw(3);l.Q6J("ngClass",l.VKq(3,f,s.isHidden(e.id))),l.xp6(2),l.Q6J("ngClass",l.VKq(5,b,s.isDisabled(e.id)))("actionitem",e)}}function y(e,t){if(1&e&&(l.ynx(0),l.YNc(1,_,3,7,"li",8),l.BQk()),2&e){const e=l.oxw(2);l.xp6(1),l.Q6J("ngForOf",e.actionitems)}}function v(e,t){if(1&e&&(l.TgZ(0,"div",2)(1,"button",3),l._UZ(2,"system-button-icon",4),l.qZA(),l.TgZ(3,"div",5)(4,"ul",6),l.YNc(5,y,2,1,"ng-container",7),l.qZA()()()),2&e){const e=l.oxw();l.xp6(1),l.Q6J("ngClass",e.getButtonSizeClass())("disabled",e.hasNoActions),l.xp6(1),l.Q6J("icon","down"),l.xp6(3),l.Q6J("ngIf",e.actionitems.length>0)}}function x(e,t){if(1&e){const e=l.EpF();l.TgZ(0,"button",16),l.NdJ("click",(function(){const t=l.CHM(e).$implicit,s=l.oxw(3);return l.KtG(s.propagateclick(t.id))})),l.TgZ(1,"object-action-container-item",17),l.NdJ("actionemitter",(function(t){l.CHM(e);const s=l.oxw(3);return l.KtG(s.emitaction(t))})),l.qZA()()}if(2&e){const e=t.$implicit,s=l.oxw(3);l.Q6J("ngClass",l.VKq(4,f,s.isHidden(e.id))),l.xp6(1),l.Q6J("displayasicon",!0)("ngClass",l.VKq(6,b,s.isDisabled(e.id)))("actionitem",e)}}function Z(e,t){if(1&e&&(l.TgZ(0,"div",14),l.YNc(1,x,2,8,"button",15),l.qZA()),2&e){const e=l.oxw(2);l.xp6(1),l.Q6J("ngForOf",e.actionitems)}}function w(e,t){if(1&e&&(l.TgZ(0,"div",12),l.YNc(1,Z,2,1,"div",13),l.qZA()),2&e){const e=l.oxw();l.xp6(1),l.Q6J("ngIf",e.actionitems.length>0)}}let T=(()=>{class ObjectActionMenu extends n.S{constructor(e,t,s,i,n,l,o,a,d,r,c){super(e,n,s,c,r),this.language=e,this.broadcast=t,this.model=s,this.view=i,this.metadata=n,this.elementRef=l,this.renderer=o,this.helper=a,this.layout=d,this.cdRef=r,this.ngZone=c,this.buttonsize="",this.actionset="",this.actionitems=[],this.componentconfig={}}ngOnInit(){""==this.actionset&&(this.componentconfig=this.metadata.getComponentConfig("ObjectActionMenu",this.model.module),this.actionset=this.componentconfig.actionset_default,this.setActionsets())}ngOnChanges(){this.setActionsets()}setActionsets(){let e=this.metadata.getActionSetItems(this.actionset);this.actionitems=[];for(let t of e)this.actionitems.push({disabled:!0,id:t.id,sequence:t.sequence,action:t.action,component:t.component,actionconfig:t.actionconfig});this.cdRef.detectChanges()}get isSmall(){return"small"==this.layout.screenwidth}get hasNoActions(){return!(this.actionitems.length>0)}getButtonSizeClass(){if(""!==this.buttonsize)return"slds-button--icon-"+this.buttonsize}}return ObjectActionMenu.ɵfac=function(e){return new(e||ObjectActionMenu)(l.Y36(o.d),l.Y36(a.f),l.Y36(d.o),l.Y36(r.e),l.Y36(c.Pu),l.Y36(l.SBq),l.Y36(l.Qsj),l.Y36(i._),l.Y36(u.b),l.Y36(l.sBO),l.Y36(l.R0b))},ObjectActionMenu.ɵcmp=l.Xpm({type:ObjectActionMenu,selectors:[["object-action-menu"]],inputs:{buttonsize:"buttonsize",actionset:"actionset"},features:[l._Bn([i._]),l.qOj,l.TTD],decls:3,vars:2,consts:[["class","slds-dropdown-trigger slds-dropdown-trigger--click","system-dropdown-trigger","",4,"ngIf","ngIfElse"],["smallformfactor",""],["system-dropdown-trigger","",1,"slds-dropdown-trigger","slds-dropdown-trigger--click"],["aria-haspopup","true",1,"slds-button","slds-button--icon-border-filled",3,"ngClass","disabled"],[3,"icon"],[1,"slds-dropdown"],["role","menu",1,"slds-dropdown__list"],[4,"ngIf"],["class","slds-dropdown__item","role","presentation",3,"ngClass","click",4,"ngFor","ngForOf"],["role","presentation",1,"slds-dropdown__item",3,"ngClass","click"],["href","javascript:void(0);","role","menuitem","tabindex","-1"],[1,"slds-truncate",3,"ngClass","actionitem","actionemitter"],[1,"slds-size--1-of-1","slds-text-align--right"],["class"," slds-p-top--xx-small slds-p-horizontal--x-small slds-button-group",4,"ngIf"],[1,"slds-p-top--xx-small","slds-p-horizontal--x-small","slds-button-group"],["class","slds-button slds-button_neutral",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"slds-button","slds-button_neutral",3,"ngClass","click"],[1,"slds-truncate",3,"displayasicon","ngClass","actionitem","actionemitter"]],template:function(e,t){if(1&e&&(l.YNc(0,v,6,4,"div",0),l.YNc(1,w,2,1,"ng-template",null,1,l.W1O)),2&e){const e=l.MAs(2);l.Q6J("ngIf",!t.isSmall)("ngIfElse",e)}},dependencies:[m.mk,m.sg,m.O5,h.J,g.l,p.s],encapsulation:2}),ObjectActionMenu})()},699:(e,t,s)=>{"use strict";s.d(t,{H:()=>p});var i=s(1571),n=s(9637),l=s(3441),o=s(5329),a=s(5710),d=s(4154),r=s(6895),c=s(2656),u=s(6094);const m=["acionsetcontainer"];function h(e,t){if(1&e&&(i.TgZ(0,"div",4),i._UZ(1,"object-actionset-menu-container",5),i.qZA()),2&e){const e=i.oxw();i.Q6J("ngClass",e.getDropdownLocationClass()),i.xp6(1),i.Q6J("actionset",e.actionset)}}const g=function(e){return{"slds-is-open":e}};let p=(()=>{class ObjectActionsetMenu{constructor(e,t,s,n,l,o,a){this.language=e,this.model=t,this.metadata=s,this.elementRef=n,this.renderer=l,this.popup=o,this.helper=a,this.actionset="",this.buttonsize="",this.action=new i.vpe,this.isOpen=!1,this.popupSubscription=this.popup.closePopup$.subscribe((e=>{this.isOpen=!1}))}ngOnDestroy(){this.popupSubscription.unsubscribe()}hasNoActions(){return!1}toggleOpen(){this.isOpen=!this.isOpen,this.isOpen?this.clickListener=this.renderer.listen("document","click",(e=>this.onClick(e))):this.clickListener&&this.clickListener()}onClick(e){this.elementRef.nativeElement.contains(e.target)||(this.isOpen=!1)}getButtonSizeClass(){if(""!==this.buttonsize)return"slds-button--icon-"+this.buttonsize}getDropdownLocationClass(){let e=this.elementRef.nativeElement.getBoundingClientRect();if(window.innerHeight-e.bottom<100)return"slds-dropdown--bottom"}}return ObjectActionsetMenu.ɵfac=function(e){return new(e||ObjectActionsetMenu)(i.Y36(o.d),i.Y36(a.o),i.Y36(d.Pu),i.Y36(i.SBq),i.Y36(i.Qsj),i.Y36(n.g),i.Y36(l._))},ObjectActionsetMenu.ɵcmp=i.Xpm({type:ObjectActionsetMenu,selectors:[["object-actionset-menu"]],viewQuery:function(e,t){if(1&e&&i.Gf(m,7,i.s_b),2&e){let e;i.iGM(e=i.CRH())&&(t.acionsetcontainer=e.first)}},inputs:{actionset:"actionset",buttonsize:"buttonsize"},outputs:{action:"action"},features:[i._Bn([n.g,l._])],decls:4,vars:7,consts:[[1,"slds-dropdown-trigger","slds-dropdown-trigger--click",3,"ngClass"],["aria-haspopup","true",1,"slds-button","slds-button--icon-border-filled",3,"ngClass","disabled","click"],[3,"icon"],["class","slds-dropdown slds-dropdown--right",3,"ngClass",4,"ngIf"],[1,"slds-dropdown","slds-dropdown--right",3,"ngClass"],[3,"actionset"]],template:function(e,t){1&e&&(i.TgZ(0,"div",0)(1,"button",1),i.NdJ("click",(function(){return t.toggleOpen()})),i._UZ(2,"system-button-icon",2),i.qZA(),i.YNc(3,h,2,2,"div",3),i.qZA()),2&e&&(i.Q6J("ngClass",i.VKq(5,g,t.isOpen)),i.xp6(1),i.Q6J("ngClass",t.getButtonSizeClass())("disabled",t.hasNoActions()),i.xp6(1),i.Q6J("icon","down"),i.xp6(1),i.Q6J("ngIf",t.isOpen))},dependencies:[r.mk,r.O5,c.J,u.z],encapsulation:2}),ObjectActionsetMenu})()},6094:(e,t,s)=>{"use strict";s.d(t,{z:()=>c});var i=s(1571),n=s(9637),l=s(3441),o=s(5329),a=s(5710),d=s(4154);const r=["acionsetcontainer"];let c=(()=>{class ObjectActionsetMenuContainer{constructor(e,t,s,n,l,o){this.language=e,this.model=t,this.metadata=s,this.elementRef=n,this.popup=l,this.helper=o,this.actionset="",this.action=new i.vpe}ngAfterViewInit(){if(""!=this.actionset){let e=this.metadata.getActionSetItems(this.actionset);for(let t of e)if(t.component)this.metadata.addComponent(t.component,this.acionsetcontainer);else switch(t.action){case"EDIT":this.metadata.addComponent("ObjectActionsetMenuContainerEdit",this.acionsetcontainer);break;case"DELETE":this.metadata.addComponent("ObjectActionsetMenuContainerDelete",this.acionsetcontainer)}}}}return ObjectActionsetMenuContainer.ɵfac=function(e){return new(e||ObjectActionsetMenuContainer)(i.Y36(o.d),i.Y36(a.o),i.Y36(d.Pu),i.Y36(i.SBq),i.Y36(n.g),i.Y36(l._))},ObjectActionsetMenuContainer.ɵcmp=i.Xpm({type:ObjectActionsetMenuContainer,selectors:[["object-actionset-menu-container"]],viewQuery:function(e,t){if(1&e&&i.Gf(r,7,i.s_b),2&e){let e;i.iGM(e=i.CRH())&&(t.acionsetcontainer=e.first)}},inputs:{actionset:"actionset"},outputs:{action:"action"},features:[i._Bn([n.g,l._])],decls:3,vars:0,consts:[["role","menu",1,"slds-dropdown__list"],["acionsetcontainer",""]],template:function(e,t){1&e&&(i.TgZ(0,"ul",0),i._UZ(1,"div",null,1),i.qZA())},encapsulation:2}),ObjectActionsetMenuContainer})()},4663:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});var i=s(1571),n=s(5710),l=s(4154),o=s(6951);let a=(()=>{class ObjectEditModalDialogContainer{constructor(e,t){this.model=e,this.metadata=t,this.componentSet=""}ngOnInit(){if(!this.componentSet||""==this.componentSet){let e=this.metadata.getComponentConfig("ObjectRecordDetails",this.model.module);this.componentSet=e.componentset}}}return ObjectEditModalDialogContainer.ɵfac=function(e){return new(e||ObjectEditModalDialogContainer)(i.Y36(n.o),i.Y36(l.Pu))},ObjectEditModalDialogContainer.ɵcmp=i.Xpm({type:ObjectEditModalDialogContainer,selectors:[["object-edit-modal-dialog-container"]],inputs:{componentSet:"componentSet"},decls:1,vars:1,consts:[[3,"componentset"]],template:function(e,t){1&e&&i._UZ(0,"system-componentset",0),2&e&&i.Q6J("componentset",t.componentSet)},dependencies:[o.E],encapsulation:2}),ObjectEditModalDialogContainer})()},7228:(e,t,s)=>{"use strict";s.d(t,{s:()=>M});var i=s(727),n=s(5684),l=s(1571),o=s(7774),a=s(4154),d=s(2644),r=s(5329),c=s(4044),u=s(6559),m=s(6895),h=s(2563),g=s(2656),p=s(4730),f=s(3463),b=s(2161),_=s(1058),y=s(6059),v=s(6857);function x(e,t){if(1&e&&l._UZ(0,"tr",8),2&e){const e=t.$implicit,s=t.index,i=l.oxw(2);l.Q6J("rownumbers",i.rowNumbers)("rowNumber",s+1)("listItem",e)("inlineedit",i.inlineedit)("rowselect",!0)}}function Z(e,t){if(1&e&&(l.ynx(0),l.YNc(1,x,1,5,"tr",7),l.BQk()),2&e){const e=l.oxw();l.xp6(1),l.Q6J("ngForOf",e.modellist.listData.list)}}function w(e,t){if(1&e&&l._UZ(0,"tr",10),2&e){const e=t.$implicit,s=t.index,i=l.oxw(2);l.Q6J("cdkDragData",e)("rownumbers",i.rowNumbers)("dragHandles",i.dragAndDrop)("rowNumber",s+1)("listItem",e)("inlineedit",i.inlineedit)("rowselect",!0)}}function T(e,t){if(1&e&&(l.ynx(0),l.YNc(1,w,1,7,"tr",9),l.BQk()),2&e){const e=l.oxw();l.xp6(1),l.Q6J("ngForOf",e.modellist.listData.list)}}function C(e,t){if(1&e&&l._UZ(0,"tbody",11),2&e){const e=l.oxw();l.Q6J("columns",e.modellist.listfields.length)("select",!0)("rownumbers",e.rowNumbers)("dragHandles",e.dragAndDrop)("tools",!0)("rows",20)}}function A(e,t){if(1&e){const e=l.EpF();l.TgZ(0,"div",12)(1,"button",13),l.NdJ("click",(function(){l.CHM(e);const t=l.oxw();return l.KtG(t.loadMore())})),l._UZ(2,"system-button-icon",14)(3,"system-label",15),l.qZA()()}}function k(e,t){1&e&&(l.TgZ(0,"div",16)(1,"system-illustration-no-records"),l._UZ(2,"system-label",17),l.qZA()())}const L=function(e){return{"slds-table--bordered":e}};let M=(()=>{class ObjectList{constructor(e,t,s,n,l,o,a,d){this.router=e,this.cdRef=t,this.metadata=s,this.modellist=n,this.language=l,this.injector=o,this.modal=a,this.layout=d,this.subscriptions=new i.w0,this.componentconfig={},this.dragAndDrop=!1}get actionset(){return this.componentconfig.actionset}get isloading(){return this.modellist.isLoading}get inlineedit(){return this.componentconfig.inlineedit}get issmall(){return"small"==this.layout.screenwidth}get sortfield(){return this.componentconfig.sortfield}get sortdirection(){return this.componentconfig.sortdirection?this.componentconfig.sortdirection:"ASC"}get rowNumbers(){return!0===this.componentconfig.rownumbers}get noAutoLoad(){return!0===this.componentconfig.noautoload}get canLoadMore(){return this.modellist.canLoadMore()}ngOnInit(){this.initialize()}ngOnDestroy(){this.subscriptions.unsubscribe(),this.modellist.useCache=!1}loadMore(){this.modellist.loadMoreList()}onScroll(){this.noAutoLoad||this.modellist.loadMoreList()}trackbyfn(e,t){return t.id}initialize(){this.loadComponentConfig(),this.chooseFields(),this.modellist.loadlimit=50,this.modellist.buckets={},this.modellist.loadFromSession()||(this.componentconfig.sortfield&&(this.modellist.sortArray=[{sortfield:this.componentconfig.sortfield,sortdirection:this.componentconfig.sortdirection??"ASC"}]),this.getListData()),this.subscriptions.add(this.modellist.listType$.pipe((0,n.T)(1)).subscribe((e=>this.handleListTypeChange(e)))),this.subscriptions.add(this.modellist.listDataChanged$.subscribe((()=>{this.cdRef.detectChanges()})))}handleListTypeChange(e){this.cdRef.detectChanges(),"ObjectList"==e.listcomponent&&(this.chooseFields(),this.getListData())}loadComponentConfig(){this.componentconfig=this.metadata.getComponentConfig("ObjectList",this.modellist.module),"disableAutoloadListAll"in this.componentconfig||(this.componentconfig.disableAutoloadListAll=this.modellist.disableAutoloadListAll)}getListData(){"all"==this.modellist.currentList.id&&this.componentconfig?.disableAutoloadListAll?this.modellist.resetListData():this.modellist.getListData().subscribe((()=>this.cdRef.detectChanges()))}chooseFields(){this.modellist.isCustomList()&&0==this.modellist.listfields.length&&0==this.modellist.getFieldDefs()?.length&&this.modellist.checkAccess("edit")&&this.modal.openModal("ObjectListViewSettingsSetfieldsModal",!0,this.injector)}}return ObjectList.ɵfac=function(e){return new(e||ObjectList)(l.Y36(o.F0),l.Y36(l.sBO),l.Y36(a.Pu),l.Y36(d.t),l.Y36(r.d),l.Y36(l.zs3),l.Y36(c.o),l.Y36(u.b))},ObjectList.ɵcmp=l.Xpm({type:ObjectList,selectors:[["object-list"]],inputs:{dragAndDrop:"dragAndDrop"},decls:11,vars:11,consts:[[1,"slds-theme--default",2,"min-height","100px",3,"system-to-bottom"],["cdkDropList","","cdkDropListSortingDisabled","","role","grid",1,"slds-table","slds-table--fixed-layout","slds-max-medium-table--stacked-horizontal","slds-table--header-fixed",3,"ngClass"],["object-list-header","",1,"slds-text-title--caps",3,"actionset","showRowNumber","showDragHandle"],[4,"ngIf"],["system-table-stencils","",3,"columns","select","rownumbers","dragHandles","tools","rows",4,"ngIf"],["class","slds-size--1-of-1 slds-p-around--small slds-align--absolute-center",4,"ngIf"],["class","slds-align--absolute-center","style","height: calc(100% - 35px)",4,"ngIf"],["object-list-item","","class","slds-hint-parent",3,"rownumbers","rowNumber","listItem","inlineedit","rowselect",4,"ngFor","ngForOf"],["object-list-item","",1,"slds-hint-parent",3,"rownumbers","rowNumber","listItem","inlineedit","rowselect"],["object-list-item","","cdkDrag","","class","slds-hint-parent slds-drag--preview",3,"cdkDragData","rownumbers","dragHandles","rowNumber","listItem","inlineedit","rowselect",4,"ngFor","ngForOf"],["object-list-item","","cdkDrag","",1,"slds-hint-parent","slds-drag--preview",3,"cdkDragData","rownumbers","dragHandles","rowNumber","listItem","inlineedit","rowselect"],["system-table-stencils","",3,"columns","select","rownumbers","dragHandles","tools","rows"],[1,"slds-size--1-of-1","slds-p-around--small","slds-align--absolute-center"],[1,"slds-button","slds-button--neutral",3,"click"],["icon","skip_forward",1,"slds-p-right--x-small"],["label","LBL_LOAD_MORE"],[1,"slds-align--absolute-center",2,"height","calc(100% - 35px)"],["label","MSG_NO_RECORDS_FOUND"]],template:function(e,t){1&e&&(l.ynx(0),l.TgZ(1,"div",0),l.NdJ("system-to-bottom",(function(){return t.onScroll()})),l.TgZ(2,"table",1)(3,"thead"),l._UZ(4,"tr",2),l.qZA(),l.TgZ(5,"tbody"),l.YNc(6,Z,2,1,"ng-container",3),l.YNc(7,T,2,1,"ng-container",3),l.qZA(),l.YNc(8,C,1,6,"tbody",4),l.qZA(),l.YNc(9,A,4,0,"div",5),l.YNc(10,k,3,0,"div",6),l.qZA(),l.BQk()),2&e&&(l.xp6(2),l.Q6J("ngClass",l.VKq(9,L,!t.issmall)),l.xp6(2),l.Q6J("actionset",t.actionset)("showRowNumber",t.rowNumbers)("showDragHandle",t.dragAndDrop),l.xp6(2),l.Q6J("ngIf",!t.dragAndDrop),l.xp6(1),l.Q6J("ngIf",t.dragAndDrop),l.xp6(1),l.Q6J("ngIf",t.isloading),l.xp6(1),l.Q6J("ngIf",t.noAutoLoad&&t.canLoadMore),l.xp6(1),l.Q6J("ngIf",!t.modellist.isLoading&&0==t.modellist.listData.totalcount))},dependencies:[m.mk,m.sg,m.O5,h.Wj,h.Zt,g.J,p.C,f._,b.x,_.H,y.p,v.B],encapsulation:2,changeDetection:0}),ObjectList})()},6059:(e,t,s)=>{"use strict";s.d(t,{p:()=>w});var i=s(2294),n=s(7982),l=s(727),o=s(1571),a=s(2644),d=s(5329),r=s(6559),c=s(6895),u=s(6367),m=s(201),h=s(1802);const g=["object-list-header",""];function p(e,t){1&e&&o._UZ(0,"th",5)}function f(e,t){1&e&&(o.TgZ(0,"th",6)(1,"div",7),o._uU(2,"#"),o.qZA()())}function b(e,t){if(1&e&&o._UZ(0,"object-list-header-actionmenu",10),2&e){const e=o.oxw(2);o.Q6J("actionset",e.actionset)("displayasicon",e.isSmall)}}function _(e,t){if(1&e&&(o.TgZ(0,"th",8),o.YNc(1,b,1,2,"object-list-header-actionmenu",9),o.qZA()),2&e){const e=o.oxw();o.xp6(1),o.Q6J("ngIf",e.actionset)}}function y(e,t){if(1&e){const e=o.EpF();o.ynx(0),o.TgZ(1,"a",14),o.NdJ("click",(function(){o.CHM(e);const t=o.oxw().$implicit,s=o.oxw();return o.KtG(s.setSortField(t))})),o._UZ(2,"field-label",15)(3,"object-list-header-sort",16),o.qZA(),o.BQk()}if(2&e){const e=o.oxw().$implicit;o.xp6(2),o.Q6J("fieldname",e.field)("fieldconfig",e.fieldconfig),o.xp6(1),o.Q6J("field",e)}}function v(e,t){if(1&e&&o._UZ(0,"field-label",17),2&e){const e=o.oxw().$implicit;o.Q6J("fieldname",e.field)("fieldconfig",e.fieldconfig)}}function x(e,t){if(1&e){const e=o.EpF();o.TgZ(0,"th",11),o.NdJ("system-resize",(function(t){o.CHM(e);const s=o.oxw();return o.KtG(s.onresize(t))})),o.YNc(1,y,4,3,"ng-container",12),o.YNc(2,v,1,2,"ng-template",null,13,o.W1O),o.qZA()}if(2&e){const e=t.$implicit,s=o.MAs(3),i=o.oxw();o.Q6J("resizeid",e.id)("width",i.columnWidth(e.id)),o.xp6(1),o.Q6J("ngIf",i.isSortable(e))("ngIfElse",s)}}function Z(e,t){1&e&&o._UZ(0,"th",18)}let w=(()=>{class ObjectListHeader{constructor(e,t,s,i,n,o){this.modellist=e,this.language=t,this.view=s,this.elementRef=i,this.layout=n,this.cdref=o,this.actionset="",this.showSelectColumn=!0,this.showRowNumber=!1,this.showDragHandle=!1,this.showRowActionMenu=!0,this.subscriptions=new l.w0,this.view.labels="short",this.subscriptions.add(this.modellist.listfield$.subscribe((e=>this.cdref.detectChanges())))}ngOnDestroy(){this.subscriptions.unsubscribe()}get isSmall(){return"small"==this.layout.screenwidth}get listfields(){return this.modellist.listfields}get module(){return this.modellist.module}columnWidth(e){let t=this.listfields.find((t=>t.id==e));return t.width?t.width+"%":100/this.listfields.length+"%"}isSortable(e){return!0===e.fieldconfig.sortable}setSortField(e){this.isSortable(e)&&(this.modellist.setSortField(e.field),this.reloadTimeOut&&window.clearTimeout(this.reloadTimeOut),this.reloadTimeOut=window.setTimeout((()=>this.modellist.reLoadList()),500))}onresize(e){let t={},s=0;this.resizeElements.forEach((e=>{let i=e.getElementWidth();s+=i,t[e.resizeid]=e.getElementWidth()}));for(let e of this.listfields)e.width=Math.round(t[e.id]/s*100)}}return ObjectListHeader.ɵfac=function(e){return new(e||ObjectListHeader)(o.Y36(a.t),o.Y36(d.d),o.Y36(i.e),o.Y36(o.SBq),o.Y36(r.b),o.Y36(o.sBO))},ObjectListHeader.ɵcmp=o.Xpm({type:ObjectListHeader,selectors:[["","object-list-header",""]],viewQuery:function(e,t){if(1&e&&o.Gf(n.h,5),2&e){let e;o.iGM(e=o.CRH())&&(t.resizeElements=e)}},inputs:{actionset:"actionset",showSelectColumn:"showSelectColumn",showRowNumber:"showRowNumber",showDragHandle:"showDragHandle",showRowActionMenu:"showRowActionMenu"},features:[o._Bn([i.e])],attrs:g,decls:5,vars:5,consts:[["scope","col","style","width:1.5rem",4,"ngIf"],["style","width:4rem","scope","col",4,"ngIf"],["style","width:2rem","scope","col",4,"ngIf"],["scope","col","class","slds-resizable",3,"resizeid","width","system-resize",4,"ngFor","ngForOf"],["class","slds-cell-shrink","scope","col",4,"ngIf"],["scope","col",2,"width","1.5rem"],["scope","col",2,"width","4rem"],[1,"slds-text-align--center","slds-text-body--small","slds-text-color--inverse-weak"],["scope","col",2,"width","2rem"],["class","slds-p-left--x-small",3,"actionset","displayasicon",4,"ngIf"],[1,"slds-p-left--x-small",3,"actionset","displayasicon"],["scope","col",1,"slds-resizable",3,"resizeid","width","system-resize"],[4,"ngIf","ngIfElse"],["nosort",""],["href","javascript:void(0);",1,"slds-th__action","slds-text-link--reset",3,"click"],["addclasses","slds-truncate",1,"slds-truncate",3,"fieldname","fieldconfig"],[3,"field"],["addclasses","slds-truncate slds-p-vertical--xx-small slds-p-horizontal--x-small",3,"fieldname","fieldconfig"],["scope","col",1,"slds-cell-shrink"]],template:function(e,t){1&e&&(o.YNc(0,p,1,0,"th",0),o.YNc(1,f,3,0,"th",1),o.YNc(2,_,2,1,"th",2),o.YNc(3,x,4,4,"th",3),o.YNc(4,Z,1,0,"th",4)),2&e&&(o.Q6J("ngIf",t.showDragHandle),o.xp6(1),o.Q6J("ngIf",t.showRowNumber),o.xp6(1),o.Q6J("ngIf",t.showSelectColumn),o.xp6(1),o.Q6J("ngForOf",t.listfields),o.xp6(1),o.Q6J("ngIf",t.showRowActionMenu))},dependencies:[c.sg,c.O5,u.q,n.h,m._,h.g],encapsulation:2}),ObjectListHeader})()},1802:(e,t,s)=>{"use strict";s.d(t,{g:()=>v});var i=s(8861),n=s(1571),l=s(2644),o=s(5329),a=s(4154),d=s(5710),r=s(4044),c=s(6895),u=s(2656),m=s(3463),h=s(4361),g=s(151),p=s(2667);const f=function(e){return{"slds-hide":e}},b=function(e){return{"slds-disabled-text":e}};function _(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"li",12),n.NdJ("click",(function(){const t=n.CHM(e).$implicit,s=n.oxw(2);return n.KtG(s.propagateclick(t.id))})),n.TgZ(1,"a",7)(2,"object-action-container-item",13),n.NdJ("actionemitter",(function(t){n.CHM(e);const s=n.oxw(2);return n.KtG(s.emitaction(t))})),n.qZA()()()}if(2&e){const e=t.$implicit,s=n.oxw(2);n.Q6J("ngClass",n.VKq(4,f,s.isHidden(e.id))),n.xp6(2),n.Q6J("displayasicon",s.displayasicon)("ngClass",n.VKq(6,b,s.isDisabled(e.id)))("actionitem",e)}}function y(e,t){if(1&e&&(n.ynx(0),n.YNc(1,_,3,8,"li",10),n._UZ(2,"li",11),n.BQk()),2&e){const e=n.oxw();n.xp6(1),n.Q6J("ngForOf",e.actionitems)}}let v=(()=>{class ObjectListHeaderActionMenu extends i.S{constructor(e,t,s,i,n,l,o,a){super(t,s,i,n,l),this.modellist=e,this.language=t,this.metadata=s,this.model=i,this.ngZone=n,this.cdRef=l,this.modal=o,this.injector=a,this.actionitems=[]}ngOnChanges(){let e=this.metadata.getActionSetItems(this.actionset);this.actionitems=[];for(let t of e)this.actionitems.push({disabled:!0,id:t.id,sequence:t.sequence,action:t.action,component:t.component,actionconfig:t.actionconfig})}get selectAll(){return"all"===this.modellist.listSelected.type}get hasSelection(){return this.modellist.getSelectedCount()>0}chooseFields(){if(!this.canChooseFields)return!1;this.modal.openModal("ObjectListViewSettingsSetfieldsModal",!0,this.injector)}get canChooseFields(){return"all"!=this.modellist.currentList.id&&"owner"!=this.modellist.currentList.id&&this.modellist.checkAccess("edit")}}return ObjectListHeaderActionMenu.ɵfac=function(e){return new(e||ObjectListHeaderActionMenu)(n.Y36(l.t),n.Y36(o.d),n.Y36(a.Pu),n.Y36(d.o),n.Y36(n.R0b),n.Y36(n.sBO),n.Y36(r.o),n.Y36(n.zs3))},ObjectListHeaderActionMenu.ɵcmp=n.Xpm({type:ObjectListHeaderActionMenu,selectors:[["object-list-header-actionmenu"]],features:[n.qOj,n.TTD],decls:10,vars:5,consts:[["system-dropdown-trigger-simple","",1,"slds-dropdown-trigger","slds-dropdown-trigger--click"],["system-title","LBL_SETTINGS",1,"slds-button","slds-button--icon"],[3,"icon"],[1,"slds-dropdown","slds-dropdown--left","slds-m-top--x-small"],["role","menu",1,"slds-dropdown__list"],[4,"ngIf"],["role","presentation",1,"slds-dropdown__item",3,"click"],["href","javascript:void(0);","role","menuitem","tabindex","-1"],[3,"ngClass"],["label","LBL_SETFIELDS"],["class","slds-dropdown__item","role","presentation",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"slds-has-divider--bottom-space"],["role","presentation",1,"slds-dropdown__item",3,"ngClass","click"],[1,"slds-truncate",3,"displayasicon","ngClass","actionitem","actionemitter"]],template:function(e,t){1&e&&(n.TgZ(0,"div",0)(1,"button",1),n._UZ(2,"system-button-icon",2),n.qZA(),n.TgZ(3,"div",3)(4,"ul",4),n.YNc(5,y,3,1,"ng-container",5),n.TgZ(6,"li",6),n.NdJ("click",(function(){return t.chooseFields()})),n.TgZ(7,"a",7)(8,"span",8),n._UZ(9,"system-label",9),n.qZA()()()()()()),2&e&&(n.xp6(2),n.Q6J("icon","down"),n.xp6(3),n.Q6J("ngIf",t.actionitems.length>0),n.xp6(3),n.Q6J("ngClass",n.VKq(3,b,!t.canChooseFields)))},dependencies:[c.mk,c.sg,c.O5,u.J,m._,h.w,g.S,p.s],encapsulation:2}),ObjectListHeaderActionMenu})()},201:(e,t,s)=>{"use strict";s.d(t,{_:()=>r});var i=s(1571),n=s(2644),l=s(6895),o=s(8859);function a(e,t){if(1&e&&(i.TgZ(0,"div",4),i._uU(1),i.qZA()),2&e){const e=i.oxw(2);i.xp6(1),i.Oqu(e.sortindex)}}function d(e,t){if(1&e&&(i.TgZ(0,"div",1),i._UZ(1,"system-utility-icon",2),i.YNc(2,a,2,1,"div",3),i.qZA()),2&e){const e=i.oxw();i.xp6(1),i.Q6J("icon",e.sortIcon),i.xp6(1),i.Q6J("ngIf",e.sortindex>0)}}let r=(()=>{class ObjectListHeaderSort{constructor(e){this.modellist=e}get module(){return this.modellist.module}get isSortable(){return!0===this.field.fieldconfig.sortable}get sortIcon(){let e=this.modellist.getSortField(this.field.field);return e?"ASC"==e.sortdirection?"arrowdown":"arrowup":""}get sortindex(){let e=this.modellist.getSortField(this.field.field);return e&&e.sortitems>1?e.sortindex+1:""}}return ObjectListHeaderSort.ɵfac=function(e){return new(e||ObjectListHeaderSort)(i.Y36(n.t))},ObjectListHeaderSort.ɵcmp=i.Xpm({type:ObjectListHeaderSort,selectors:[["object-list-header-sort"]],inputs:{field:"field"},decls:1,vars:1,consts:[["class","slds-grid slds-grid--vertical-align-center slds-p-horizontal--xx-small",4,"ngIf"],[1,"slds-grid","slds-grid--vertical-align-center","slds-p-horizontal--xx-small"],["size","xx-small",3,"icon"],["class","slds-align--absolute-center slds-theme--info","style","height: 18px; width: 18px; border-radius: 9px",4,"ngIf"],[1,"slds-align--absolute-center","slds-theme--info",2,"height","18px","width","18px","border-radius","9px"]],template:function(e,t){1&e&&i.YNc(0,d,3,2,"div",0),2&e&&i.Q6J("ngIf",t.isSortable)},dependencies:[l.O5,o.r],encapsulation:2}),ObjectListHeaderSort})()},6857:(e,t,s)=>{"use strict";s.d(t,{B:()=>w});var i=s(5710),n=s(2294),l=s(1571),o=s(6163),a=s(2644),d=s(7774),r=s(5329),c=s(6895),u=s(2563),m=s(433),h=s(3634),g=s(7514),p=s(8859),f=s(586);const b=["object-list-item",""];function _(e,t){if(1&e&&(l.TgZ(0,"td",4)(1,"div",5),l._uU(2),l.qZA()()),2&e){const e=l.oxw();l.xp6(2),l.Oqu(e.rowNumber)}}function y(e,t){1&e&&(l.TgZ(0,"td",6),l._UZ(1,"system-utility-icon",7),l.qZA()),2&e&&(l.xp6(1),l.Q6J("icon","drag_and_drop")("size","x-small"))}function v(e,t){if(1&e){const e=l.EpF();l.TgZ(0,"td",6)(1,"system-checkbox",8),l.NdJ("ngModelChange",(function(t){l.CHM(e);const s=l.oxw();return l.KtG(s.listItem.selected=t)})),l.qZA()()}if(2&e){const e=l.oxw();l.xp6(1),l.Q6J("disabled",e.rowselectdisabled)("ngModel",e.listItem.selected)}}function x(e,t){if(1&e&&(l.TgZ(0,"td",9),l._UZ(1,"field-container",10),l.qZA()),2&e){const e=t.$implicit,s=l.oxw();l.uIk("data-label",s.language.getFieldDisplayName(s.model.module,e.field)),l.xp6(1),l.Q6J("field",e.field)("fieldconfig",e.fieldconfig)("fielddisplayclass","slds-truncate slds-p-horizontal--x-small")}}function Z(e,t){1&e&&(l.TgZ(0,"td",11),l._UZ(1,"object-action-menu",12),l.qZA()),2&e&&(l.xp6(1),l.Q6J("buttonsize","small"))}let w=(()=>{class ObjectListItem{constructor(e,t,s,i,n,l,o){this.model=e,this.modelutilities=t,this.modellist=s,this.view=i,this.router=n,this.language=l,this.cdref=o,this.rowselect=!1,this.rownumbers=!1,this.dragHandles=!1,this.rowselectdisabled=!1,this.listItem={},this.inlineedit=!1,this.displaylinks=!0,this.showActionMenu=!0,this.subscriptions=[],this.view.displayLabels=!1}get listFields(){return this.modellist.listfields}ngOnInit(){this.model.module=this.modellist.module,this.model.id=this.listItem.id,this.model.setData(this.listItem),this.model.initializeFieldsStati(),this.view.isEditable=this.inlineedit&&this.model.checkAccess("edit"),this.view.displayLinks=this.displaylinks,this.subscriptions.push(this.model.data$.subscribe((e=>this.cdref.detectChanges()))),this.subscriptions.push(this.modellist.listfield$.subscribe((e=>this.cdref.detectChanges()))),this.subscriptions.push(this.modellist.selectionChanged$.subscribe((e=>this.cdref.detectChanges())))}ngOnDestroy(){for(let e of this.subscriptions)e.unsubscribe()}navigateDetail(){this.router.navigate(["/module/"+this.model.module+"/"+this.model.id])}}return ObjectListItem.ɵfac=function(e){return new(e||ObjectListItem)(l.Y36(i.o),l.Y36(o.A),l.Y36(a.t),l.Y36(n.e),l.Y36(d.F0),l.Y36(r.d),l.Y36(l.sBO))},ObjectListItem.ɵcmp=l.Xpm({type:ObjectListItem,selectors:[["","object-list-item",""]],inputs:{rowselect:"rowselect",rownumbers:"rownumbers",dragHandles:"dragHandles",rowselectdisabled:"rowselectdisabled",listItem:"listItem",inlineedit:"inlineedit",displaylinks:"displaylinks",rowNumber:"rowNumber",showActionMenu:"showActionMenu"},features:[l._Bn([i.o,n.e])],attrs:b,decls:5,vars:5,consts:[["role","gridcell","class","slds-show--medium","style","min-width: 3rem",4,"ngIf"],["role","gridcell","class","slds-show--medium",4,"ngIf"],["style","min-width: 2rem","scope","row",4,"ngFor","ngForOf"],["role","gridcell","class","slds-cell-shrink",4,"ngIf"],["role","gridcell",1,"slds-show--medium",2,"min-width","3rem"],[1,"slds-text-align--center","slds-text-body--small","slds-text-color--inverse-weak"],["role","gridcell",1,"slds-show--medium"],["cdkDragHandle","",2,"cursor","move",3,"icon","size"],[3,"disabled","ngModel","ngModelChange"],["scope","row",2,"min-width","2rem"],[3,"field","fieldconfig","fielddisplayclass"],["role","gridcell",1,"slds-cell-shrink"],[3,"buttonsize"]],template:function(e,t){1&e&&(l.YNc(0,_,3,1,"td",0),l.YNc(1,y,2,2,"td",1),l.YNc(2,v,2,2,"td",1),l.YNc(3,x,2,4,"td",2),l.YNc(4,Z,2,1,"td",3)),2&e&&(l.Q6J("ngIf",t.rownumbers),l.xp6(1),l.Q6J("ngIf",t.dragHandles),l.xp6(1),l.Q6J("ngIf",t.rowselect),l.xp6(1),l.Q6J("ngForOf",t.listFields),l.xp6(1),l.Q6J("ngIf",t.showActionMenu))},dependencies:[c.sg,c.O5,u.Bh,m.JJ,m.On,h.j,g.U,p.r,f.g],styles:["[_nghost-%COMP%]   field-container[_ngcontent-%COMP%]   global-button-icon[_ngcontent-%COMP%]{display:none}","[_nghost-%COMP%]:hover   field-container[_ngcontent-%COMP%]   global-button-icon[_ngcontent-%COMP%]{display:inline}"],changeDetection:0}),ObjectListItem})()},7102:(e,t,s)=>{"use strict";s.d(t,{l:()=>p});var i=s(727),n=s(1571),l=s(2644),o=s(5329),a=s(6895),d=s(2656),r=s(3463),c=s(8859),u=s(4361);const m=function(e){return{"slds-is-selected":e}};function h(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"li",11),n.NdJ("click",(function(){const t=n.CHM(e).$implicit,s=n.oxw();return n.KtG(s.setListType(t.id))})),n.TgZ(1,"a",12)(2,"span",13),n._UZ(3,"system-utility-icon",14),n._uU(4),n.qZA()()()}if(2&e){const e=t.$implicit,s=n.oxw();n.Q6J("ngClass",n.VKq(2,m,s.modellist.currentList.id==e.id)),n.xp6(4),n.hij(" ",e.name," ")}}function g(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"li",11),n.NdJ("click",(function(){const t=n.CHM(e).$implicit,s=n.oxw();return n.KtG(s.setListType(t.id))})),n.TgZ(1,"a",12)(2,"span",13),n._UZ(3,"system-utility-icon",14),n._uU(4),n.qZA(),n._UZ(5,"system-utility-icon",15),n.qZA()()}if(2&e){const e=t.$implicit,s=n.oxw();n.Q6J("ngClass",n.VKq(3,m,e.id==s.modellist.currentList.id)),n.xp6(4),n.hij(" ",e.name," "),n.xp6(1),n.Q6J("icon",e.icon)}}let p=(()=>{class ObjectListTypes{constructor(e,t,s,n){this.modellist=e,this.elementRef=t,this.renderer=s,this.language=n,this.listTypes=[],this.subscription=new i.w0,this.showMenu=!1,this.initialize()}get disabled(){return this.modellist.isLoading||this.modellist.standardLists.length+this.listTypes.length<=1}initialize(){this.setListTypes(),this.subscription=this.modellist.listType$.subscribe((()=>{this.setListTypes()}))}setListTypes(){this.listTypes=this.modellist.getListTypes(!1).map((e=>({...e,icon:e.global&&"0"!=e.global?"world":"user"}))).sort(((e,t)=>e.name.toLowerCase()>t.name.toLowerCase()?1:-1))}setListType(e="all"){this.modellist.setListType(e),this.showMenu=!1}onClick(e){if(!e.target)return;this.elementRef.nativeElement.contains(e.target)||(this.showMenu=!1)}getListtypeIcon(e){return e.global&&"0"!=e.global?"world":"user"}}return ObjectListTypes.ɵfac=function(e){return new(e||ObjectListTypes)(n.Y36(l.t),n.Y36(n.SBq),n.Y36(n.Qsj),n.Y36(o.d))},ObjectListTypes.ɵcmp=n.Xpm({type:ObjectListTypes,selectors:[["object-list-types"]],decls:13,vars:5,consts:[[1,"slds-media__body","slds-dropdown-trigger","slds-dropdown-trigger--click",3,"system-dropdown-trigger-simple"],[1,"slds-grid","slds-grid--vertical-align-center","slds-truncate","slds-p-right--small"],[1,"slds-page-header__title","slds-show--medium","slds-p-right--xx-small"],[1,"slds-button",3,"disabled"],["icon","down","size","small"],[1,"slds-dropdown","slds-dropdown--left","slds-dropdown--medium"],["role","menu",1,"slds-dropdown__list"],["role","separator",1,"slds-dropdown__header","slds-has-divider--bottom"],[1,"slds-text-title--caps"],["label","LBL_LIST_TYPES"],["class","slds-dropdown__item","role","presentation",3,"ngClass","click",4,"ngFor","ngForOf"],["role","presentation",1,"slds-dropdown__item",3,"ngClass","click"],["href","javascript:void(0);","role","menuitemcheckbox"],[1,"slds-truncate"],["size","x-small","icon","check","addclasses","slds-icon slds-icon_selected slds-icon_x-small slds-icon-text-default slds-m-right_x-small"],["size","x-small",3,"icon"]],template:function(e,t){1&e&&(n.TgZ(0,"div",0)(1,"div",1)(2,"h1",2),n._uU(3),n.qZA(),n.TgZ(4,"button",3),n._UZ(5,"system-button-icon",4),n.qZA()(),n.TgZ(6,"div",5)(7,"ul",6)(8,"li",7)(9,"span",8),n._UZ(10,"system-label",9),n.qZA()(),n.YNc(11,h,5,4,"li",10),n.YNc(12,g,6,5,"li",10),n.qZA()()()),2&e&&(n.Q6J("system-dropdown-trigger-simple",t.disabled),n.xp6(3),n.Oqu(t.modellist.currentList.name),n.xp6(1),n.Q6J("disabled",t.disabled),n.xp6(7),n.Q6J("ngForOf",t.modellist.standardLists),n.xp6(1),n.Q6J("ngForOf",t.listTypes))},dependencies:[a.mk,a.sg,d.J,r._,c.r,u.w],encapsulation:2}),ObjectListTypes})()},7954:(e,t,s)=>{"use strict";s.d(t,{i:()=>f});var i=s(1571),n=s(5329),l=s(2644),o=s(5710),a=s(6895),d=s(3463),r=s(8859),c=s(79);function u(e,t){if(1&e&&(i.TgZ(0,"li",8),i._uU(1),i.qZA()),2&e){const e=t.$implicit;i.xp6(1),i.Oqu(e)}}function m(e,t){if(1&e&&(i.TgZ(0,"div",9),i._uU(1),i._UZ(2,"system-label",10),i._uU(3,")"),i.qZA()),2&e){const e=i.oxw();i.xp6(1),i.hij("(",e.checkdCount," ")}}function h(e,t){if(1&e&&(i.TgZ(0,"div",12),i._UZ(1,"object-listview-aggregate-item",13),i.qZA()),2&e){const e=t.$implicit,s=i.oxw(2);i.xp6(1),i.Q6J("bucketitem",e)("aggregate",s.aggregate)}}function g(e,t){if(1&e&&(i.TgZ(0,"div")(1,"p",14),i._uU(2),i._UZ(3,"system-label",15),i._uU(4,"..."),i.qZA()()),2&e){const e=i.oxw(2);i.xp6(2),i.hij("",e.otherDocCount," ")}}function p(e,t){if(1&e&&(i.ynx(0),i.YNc(1,h,2,2,"div",11),i.YNc(2,g,5,1,"div",7),i.BQk()),2&e){const e=i.oxw();i.xp6(1),i.Q6J("ngForOf",e.aggregateBuckets),i.xp6(1),i.Q6J("ngIf",e.otherDocCount>0)}}let f=(()=>{class ObjectListViewAggregate{constructor(e,t,s){this.language=e,this.modellist=t,this.model=s,this.aggregate={}}get aggregateNameItems(){let e=[];return this.aggregate.fielddetails&&(this.model.module!=this.aggregate.fielddetails.module&&e.push(this.language.getModuleName(this.aggregate.fielddetails.module,!0)),e.push(this.language.getFieldDisplayName(this.aggregate.fielddetails.module,this.aggregate.fielddetails.field))),e}get aggregatename(){return this.aggregate.indexfieldname?.replace(/>/g,"")}get aggregateBuckets(){return this.aggregatename&&this.modellist.searchAggregates?.[this.aggregatename]?this.modellist.searchAggregates?.[this.aggregatename].buckets:[]}get otherDocCount(){return this.aggregatename&&this.modellist.searchAggregates?.[this.aggregatename]?this.modellist.searchAggregates?.[this.aggregatename].sum_other_doc_count:0}get checkdCount(){return this.modellist.getCheckedAggregateCount(this.aggregatename)}get collapsed(){return!!this.aggregate.collapsed}toggleCollapsed(){this.aggregate.collapsed=!this.aggregate.collapsed}}return ObjectListViewAggregate.ɵfac=function(e){return new(e||ObjectListViewAggregate)(i.Y36(n.d),i.Y36(l.t),i.Y36(o.o))},ObjectListViewAggregate.ɵcmp=i.Xpm({type:ObjectListViewAggregate,selectors:[["object-listview-aggregate"]],inputs:{aggregate:"aggregate"},decls:8,vars:4,consts:[[1,"slds-filters__item","slds-p-horizontal--small","slds-p-vertical--xx-small"],[1,"slds-p-vertical--xx-small","slds-grid","slds-grid--vertical-align-center","slds-grid--align-spread",3,"click"],[1,"slds-grid"],[1,"slds-list_horizontal","slds-has-dividers_right"],["class","slds-item",4,"ngFor","ngForOf"],["class","slds-p-left--xx-small",4,"ngIf"],["size","x-small",3,"icon"],[4,"ngIf"],[1,"slds-item"],[1,"slds-p-left--xx-small"],["label","LBL_SELECTED"],["class","slds-form-element",4,"ngFor","ngForOf"],[1,"slds-form-element"],[1,"slds-form-element__control",3,"bucketitem","aggregate"],[1,"slds-text-body--small","slds-text-color--weak"],["label","LBL_ARE_NOT_INCLUDED"]],template:function(e,t){1&e&&(i.TgZ(0,"div",0)(1,"div",1),i.NdJ("click",(function(){return t.toggleCollapsed()})),i.TgZ(2,"div",2)(3,"ul",3),i.YNc(4,u,2,1,"li",4),i.qZA(),i.YNc(5,m,4,1,"div",5),i.qZA(),i._UZ(6,"system-utility-icon",6),i.qZA(),i.YNc(7,p,3,2,"ng-container",7),i.qZA()),2&e&&(i.xp6(4),i.Q6J("ngForOf",t.aggregateNameItems),i.xp6(1),i.Q6J("ngIf",t.collapsed&&t.checkdCount>0),i.xp6(1),i.Q6J("icon",t.collapsed?"down":"up"),i.xp6(1),i.Q6J("ngIf",!t.collapsed))},dependencies:[a.sg,a.O5,d._,r.r,c.Q],encapsulation:2}),ObjectListViewAggregate})()},79:(e,t,s)=>{"use strict";s.d(t,{Q:()=>f});var i=s(1571),n=s(5329),l=s(4154),o=s(2644),a=s(6895),d=s(433),r=s(7514),c=s(4270),u=s(5232),m=s(115);function h(e,t){if(1&e&&i._UZ(0,"object-listview-aggregate-item-range",7),2&e){const e=i.oxw();i.Q6J("aggregate",e.aggregate)("item",e.bucketitem)}}function g(e,t){if(1&e&&i._UZ(0,"object-listview-aggregate-item-term",7),2&e){const e=i.oxw();i.Q6J("aggregate",e.aggregate)("item",e.bucketitem)}}function p(e,t){if(1&e&&(i.TgZ(0,"div"),i._uU(1),i.qZA()),2&e){const e=i.oxw();i.xp6(1),i.Oqu(e.bucketitem.displayName)}}let f=(()=>{class ObjectListViewAggregateItem{constructor(e,t,s,i){this.elementRef=e,this.language=t,this.metadata=s,this.modellist=i,this.bucketitem={},this.aggregate={},this.isChecked=!1}get aggregatename(){return this.aggregate.indexfieldname?.replace(/>/g,"")}get loading(){return this.modellist.isLoading}set checked(e){if(this.isChecked=e,e)this.modellist.setAggregate(this.aggregatename,this.bucketitem.aggdata),this.modellist.reLoadList();else{this.modellist.removeAggregate(this.aggregatename,this.bucketitem.aggdata)&&this.modellist.reLoadList()}}get checked(){return this.modellist.checkAggregate(this.aggregatename,this.bucketitem.aggdata)}}return ObjectListViewAggregateItem.ɵfac=function(e){return new(e||ObjectListViewAggregateItem)(i.Y36(i.SBq),i.Y36(n.d),i.Y36(l.Pu),i.Y36(o.t))},ObjectListViewAggregateItem.ɵcmp=i.Xpm({type:ObjectListViewAggregateItem,selectors:[["object-listview-aggregate-item"]],inputs:{bucketitem:"bucketitem",aggregate:"aggregate"},decls:10,vars:7,consts:[[1,"slds-grid","slds-grid--vertical-align-center"],[3,"disabled","ngModel","ngModelChange"],[3,"ngSwitch"],[3,"aggregate","item",4,"ngSwitchCase"],[4,"ngSwitchDefault"],[1,"slds-p-left--xx-small"],[3,"number","noDigits"],[3,"aggregate","item"]],template:function(e,t){1&e&&(i.TgZ(0,"div",0)(1,"system-checkbox",1),i.NdJ("ngModelChange",(function(e){return t.checked=e})),i.qZA(),i.ynx(2,2),i.YNc(3,h,1,2,"object-listview-aggregate-item-range",3),i.YNc(4,g,1,2,"object-listview-aggregate-item-term",3),i.YNc(5,p,2,1,"div",4),i.BQk(),i.TgZ(6,"div",5),i._uU(7,"("),i._UZ(8,"system-display-number",6),i._uU(9,")"),i.qZA()()),2&e&&(i.xp6(1),i.Q6J("disabled",t.loading)("ngModel",t.checked),i.xp6(1),i.Q6J("ngSwitch",t.aggregate.type),i.xp6(1),i.Q6J("ngSwitchCase","range"),i.xp6(1),i.Q6J("ngSwitchCase","term"),i.xp6(4),i.Q6J("number",t.bucketitem.doc_count)("noDigits",!0))},dependencies:[a.RF,a.n9,a.ED,d.JJ,d.On,r.U,c.G,u.C,m.V],encapsulation:2}),ObjectListViewAggregateItem})()},115:(e,t,s)=>{"use strict";s.d(t,{V:()=>p});var i=s(1571),n=s(5710),l=s(6895),o=s(3463),a=s(5232);function d(e,t){if(1&e&&(i.TgZ(0,"div"),i._UZ(1,"system-label",3),i.qZA()),2&e){const e=i.oxw();i.xp6(1),i.Q6J("label",e.item.displayName)}}const r=function(e){return{key:e}};function c(e,t){if(1&e&&i._UZ(0,"object-listview-aggregate-item-term",7),2&e){const e=i.oxw(2);i.Q6J("aggregate",e.aggregate)("item",i.VKq(2,r,e.item.from))}}function u(e,t){1&e&&(i.TgZ(0,"span"),i._uU(1,"*"),i.qZA())}function m(e,t){if(1&e&&i._UZ(0,"object-listview-aggregate-item-term",7),2&e){const e=i.oxw(2);i.Q6J("aggregate",e.aggregate)("item",i.VKq(2,r,e.item.to))}}function h(e,t){1&e&&(i.TgZ(0,"span"),i._uU(1,"*"),i.qZA())}function g(e,t){if(1&e&&(i.TgZ(0,"div"),i.YNc(1,c,1,4,"object-listview-aggregate-item-term",4),i.YNc(2,u,2,0,"span",5),i.qZA(),i.TgZ(3,"div",6),i._uU(4," - "),i.qZA(),i.TgZ(5,"div"),i.YNc(6,m,1,4,"object-listview-aggregate-item-term",4),i.YNc(7,h,2,0,"span",5),i.qZA()),2&e){const e=i.oxw();i.xp6(1),i.Q6J("ngIf",e.item.from),i.xp6(1),i.Q6J("ngIf",!e.item.from),i.xp6(4),i.Q6J("ngIf",e.item.to),i.xp6(1),i.Q6J("ngIf",!e.item.to)}}let p=(()=>{class ObjectListViewAggregateItemRange{constructor(e){this.model=e,this.item={},this.aggregate={}}}return ObjectListViewAggregateItemRange.ɵfac=function(e){return new(e||ObjectListViewAggregateItemRange)(i.Y36(n.o))},ObjectListViewAggregateItemRange.ɵcmp=i.Xpm({type:ObjectListViewAggregateItemRange,selectors:[["object-listview-aggregate-item-range"]],inputs:{item:"item",aggregate:"aggregate"},decls:4,vars:2,consts:[[1,"slds-grid","slds-grid--vertical-align-center"],[4,"ngIf","ngIfElse"],["noDisplayname",""],[3,"label"],[3,"aggregate","item",4,"ngIf"],[4,"ngIf"],[1,"slds-p-horizontal--xx-small"],[3,"aggregate","item"]],template:function(e,t){if(1&e&&(i.TgZ(0,"div",0),i.YNc(1,d,2,1,"div",1),i.YNc(2,g,8,4,"ng-template",null,2,i.W1O),i.qZA()),2&e){const e=i.MAs(3);i.xp6(1),i.Q6J("ngIf",t.item.displayName)("ngIfElse",e)}},dependencies:[l.O5,o._,a.C],encapsulation:2}),ObjectListViewAggregateItemRange})()},5232:(e,t,s)=>{"use strict";s.d(t,{C:()=>u});var i=s(5710),n=s(2294),l=s(1571),o=s(6895),a=s(3634),d=s(3463);function r(e,t){1&e&&l._UZ(0,"system-label",3)}function c(e,t){if(1&e&&l._UZ(0,"field-container",4),2&e){const e=l.oxw();l.Q6J("fieldname",e.aggregate.fielddetails.field)}}let u=(()=>{class ObjectListViewAggregateItemTerm{constructor(e,t){this.model=e,this.view=t,this.item={},this.aggregate={},this.view.displayLabels=!1}ngOnInit(){this.model.module=this.aggregate.fielddetails.module,this.model.setField(this.aggregate.fielddetails.field,this.model.utils.backend2spice(this.model.module,this.aggregate.fielddetails.field,this.item.key))}}return ObjectListViewAggregateItemTerm.ɵfac=function(e){return new(e||ObjectListViewAggregateItemTerm)(l.Y36(i.o),l.Y36(n.e))},ObjectListViewAggregateItemTerm.ɵcmp=l.Xpm({type:ObjectListViewAggregateItemTerm,selectors:[["object-listview-aggregate-item-term"]],inputs:{item:"item",aggregate:"aggregate"},features:[l._Bn([n.e,i.o])],decls:3,vars:2,consts:[[2,"font-style","italic"],["label","LBL_NOT_SET",4,"ngIf"],["fielddisplayclass","slds-truncate",3,"fieldname",4,"ngIf"],["label","LBL_NOT_SET"],["fielddisplayclass","slds-truncate",3,"fieldname"]],template:function(e,t){1&e&&(l.TgZ(0,"span",0),l.YNc(1,r,1,0,"system-label",1),l.qZA(),l.YNc(2,c,1,1,"field-container",2)),2&e&&(l.xp6(1),l.Q6J("ngIf","#not#set#"==t.item.key),l.xp6(1),l.Q6J("ngIf","#not#set#"!=t.item.key))},dependencies:[o.O5,a.j,d._],encapsulation:2}),ObjectListViewAggregateItemTerm})()},4822:(e,t,s)=>{"use strict";s.d(t,{X:()=>d});var i=s(1571),n=s(2644),l=s(6895),o=s(2656),a=s(151);let d=(()=>{class ObjectListViewAggregatesButton{constructor(e){this.modellist=e}toggleaggregates(){this.modellist.displayFilters=!1,this.modellist.displayAggregates=!this.modellist.displayAggregates}get enabled(){return this.modellist.aggregatesEnabled()&&!this.modellist.isLoading}get buttonclasses(){return this.modellist.displayAggregates?"slds-is-selected":""}}return ObjectListViewAggregatesButton.ɵfac=function(e){return new(e||ObjectListViewAggregatesButton)(i.Y36(n.t))},ObjectListViewAggregatesButton.ɵcmp=i.Xpm({type:ObjectListViewAggregatesButton,selectors:[["object-listview-aggregates-button"]],decls:2,vars:2,consts:[["system-title","LBL_AGGREGATES",1,"slds-button","slds-button--neutral","slds-button--icon-border","slds-m-horizontal--xxx-small",3,"disabled","ngClass","click"],["icon","bucket"]],template:function(e,t){1&e&&(i.TgZ(0,"button",0),i.NdJ("click",(function(){return t.toggleaggregates()})),i._UZ(1,"system-button-icon",1),i.qZA()),2&e&&i.Q6J("disabled",!t.enabled)("ngClass",t.buttonclasses)},dependencies:[l.mk,o.J,a.S],encapsulation:2}),ObjectListViewAggregatesButton})()},2348:(e,t,s)=>{"use strict";s.d(t,{M:()=>m});var i=s(1571),n=s(2644),l=s(5329),o=s(6895),a=s(4270),d=s(3463),r=s(8859);function c(e,t){if(1&e&&(i.TgZ(0,"li",8)(1,"span"),i._uU(2),i._UZ(3,"system-label",11),i.qZA()()),2&e){const e=i.oxw();i.xp6(2),i.hij("",e.modellist.getSelectedCount()," ")}}function u(e,t){if(1&e&&(i.TgZ(0,"li",1)(1,"span"),i._UZ(2,"system-label",12),i._uU(3),i.qZA()()),2&e){const e=i.oxw();i.xp6(3),i.hij(" ",e.modellist.getSortFields(),"")}}let m=(()=>{class ObjectListViewHeaderDetails{constructor(e,t){this.modellist=e,this.language=t}}return ObjectListViewHeaderDetails.ɵfac=function(e){return new(e||ObjectListViewHeaderDetails)(i.Y36(n.t),i.Y36(l.d))},ObjectListViewHeaderDetails.ɵcmp=i.Xpm({type:ObjectListViewHeaderDetails,selectors:[["object-listview-header-details"]],decls:15,vars:9,consts:[[1,"slds-list_horizontal","slds-has-dividers_left","slds-has-block-links_space"],[1,"slds-item"],[1,"slds-p-right--xxx-small",3,"number","noDigits"],["label","LBL_OF"],[1,"slds-p-horizontal--xxx-small",3,"number","noDigits"],["label","LBL_ITEMS"],["class","slds-item slds-show--medium",4,"ngIf"],["class","slds-item",4,"ngIf"],[1,"slds-item","slds-show--medium"],["label","LBL_LASTUPDATE"],["size","xx-small",3,"icon","title"],["label","LBL_SELECTED"],["label","LBL_SORTEDBY"]],template:function(e,t){1&e&&(i.TgZ(0,"ul",0)(1,"li",1)(2,"span"),i._UZ(3,"system-display-number",2)(4,"system-label",3)(5,"system-display-number",4)(6,"system-label",5),i.qZA()(),i.YNc(7,c,4,1,"li",6),i.YNc(8,u,4,1,"li",7),i.TgZ(9,"li",8)(10,"span"),i._UZ(11,"system-label",9),i._uU(12),i.qZA()(),i.TgZ(13,"li",1),i._UZ(14,"system-utility-icon",10),i.qZA()()),2&e&&(i.xp6(3),i.Q6J("number",t.modellist.listData.list.length)("noDigits",!0),i.xp6(2),i.Q6J("number",t.modellist.listData.totalcount)("noDigits",!0),i.xp6(2),i.Q6J("ngIf",t.modellist.getSelectedCount()>0),i.xp6(1),i.Q6J("ngIf",t.modellist.isSorted),i.xp6(4),i.hij(" ",t.modellist.getLastLoadTime(),""),i.xp6(2),i.Q6J("icon","db"==t.modellist.listData.source?"database":"feed")("title","db"==t.modellist.listData.source?"Database":"Search Engine"))},dependencies:[o.O5,a.G,d._,r.r],encapsulation:2}),ObjectListViewHeaderDetails})()},2685:(e,t,s)=>{"use strict";s.d(t,{w:()=>g});var i=s(7954),n=s(1571),l=s(5329),o=s(2644),a=s(5710),d=s(6895),r=s(3463);const c=function(e){return{"slds-badge_inverse":e}};function u(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"div",4)(1,"div",5),n.NdJ("click",(function(){const t=n.CHM(e).$implicit,s=n.oxw(2);return n.KtG(s.toggle(t))})),n.TgZ(2,"div",6)(3,"div",7),n._uU(4),n.qZA(),n.TgZ(5,"div",8),n._uU(6),n.qZA()()()()}if(2&e){const e=t.$implicit,s=n.oxw(2);n.xp6(1),n.Q6J("title",e.displayName)("ngClass",n.VKq(4,c,s.isactive(e))),n.xp6(3),n.Oqu(e.displayName),n.xp6(2),n.hij("(",e.doc_count,")")}}function m(e,t){if(1&e&&(n.ynx(0),n.YNc(1,u,7,6,"div",3),n.BQk()),2&e){const e=n.oxw();n.xp6(1),n.Q6J("ngForOf",e.aggregateBuckets)}}function h(e,t){1&e&&(n.TgZ(0,"div",9),n._UZ(1,"system-label",10),n.qZA())}let g=(()=>{class ObjectListViewTagsAggregate extends i.i{constructor(e,t,s){super(e,t,s),this.language=e,this.modellist=t,this.model=s,this.aggregate={indexfieldname:"tags"}}get hasItems(){try{return this.aggregateBuckets.length>0}catch(e){return!1}}isactive(e){return this.modellist.checkAggregate("tags",e.aggdata)}toggle(e){if(this.isactive(e)){this.modellist.removeAggregate("tags",e.aggdata)&&this.modellist.reLoadList()}else this.modellist.setAggregate("tags",e.aggdata),this.modellist.reLoadList()}}return ObjectListViewTagsAggregate.ɵfac=function(e){return new(e||ObjectListViewTagsAggregate)(n.Y36(l.d),n.Y36(o.t),n.Y36(a.o))},ObjectListViewTagsAggregate.ɵcmp=n.Xpm({type:ObjectListViewTagsAggregate,selectors:[["object-listview-tags-aggregate"]],features:[n.qOj],decls:3,vars:2,consts:[[1,"slds-filters__item","slds-grid","slds-wrap","slds-grid--align-cente"],[4,"ngIf"],["class","slds-align--absolute-center",4,"ngIf"],["class","slds-p-around--xxx-small slds-truncate","style","max-width: 50%;",4,"ngFor","ngForOf"],[1,"slds-p-around--xxx-small","slds-truncate",2,"max-width","50%"],[1,"slds-badge","slds-truncate",3,"title","ngClass","click"],[1,"slds-grid"],[1,"slds-truncate","slds-text-link_reset"],[1,"slds-p-left--xxx-small"],[1,"slds-align--absolute-center"],["label","MSG_NO_RECORDS_TAGGED"]],template:function(e,t){1&e&&(n.TgZ(0,"div",0),n.YNc(1,m,2,1,"ng-container",1),n.YNc(2,h,2,0,"div",2),n.qZA()),2&e&&(n.xp6(1),n.Q6J("ngIf",t.hasItems),n.xp6(1),n.Q6J("ngIf",!t.hasItems))},dependencies:[d.mk,d.sg,d.O5,r._],encapsulation:2}),ObjectListViewTagsAggregate})()},9533:(e,t,s)=>{"use strict";s.d(t,{X:()=>M});var i=s(1571),n=s(5710),l=s(2644),o=s(2294),a=s(727),d=s(9866),r=s(5329),c=s(4154),u=s(6163),m=s(6559),h=s(6895),g=s(3463),p=s(9621),f=s(3499),b=s(5767),_=s(1916),y=s(2161),v=s(6059),x=s(6857),Z=s(9624);const w=["tablecontent"];function T(e,t){if(1&e&&(i.TgZ(0,"thead"),i._UZ(1,"tr",14),i.qZA()),2&e){const e=i.oxw();i.xp6(1),i.Q6J("showSelectColumn",e.multiselect)("showRowActionMenu",!1)}}function C(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"tr",15),i.NdJ("click",(function(t){const s=i.CHM(e).$implicit,n=i.oxw();return i.KtG(n.clickRow(t,s))})),i.qZA()}if(2&e){const e=t.$implicit,s=i.oxw();i.Q6J("listItem",e)("showActionMenu",!1)("rowselect",s.multiselect)("displaylinks",!1)}}function A(e,t){if(1&e&&i._UZ(0,"tbody",16),2&e){const e=i.oxw();i.Q6J("columns",null==e.modellist.listfields?null:e.modellist.listfields.length)("select",e.multiselect)("tools",!1)("rows",10)}}function k(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"button",17),i.NdJ("click",(function(){i.CHM(e);const t=i.oxw();return i.KtG(t.selectItems())})),i._UZ(1,"system-label",18),i.qZA()}if(2&e){const e=i.oxw();i.Q6J("disabled",0==e.selectedCount)}}const L=function(e,t,s){return{"slds-no-row-hover":e,singleselect:t,"slds-table--header-fixed":s}};let M=(()=>{class ObjectModalModuleLookup{constructor(e,t,s,n,l,o){this.language=e,this.modellist=t,this.metadata=s,this.modelutilities=n,this.model=l,this.layout=o,this.searchTerm="",this.self={},this.multiselect=!1,this.module="",this.modulefilter="",this.subscriptions=new a.w0,this.selectedItems=new i.vpe,this.usedSearchTerm=new i.vpe,this.subscriptions.add(this.modellist.listType$.subscribe((e=>this.switchListtype())))}contentStyle(){if(this.headercontent){return{height:`calc(100% - ${this.headercontent.element.nativeElement.getBoundingClientRect().height}px)`}}return{height:"100%"}}get smallView(){return"small"==this.layout.screenwidth}ngOnInit(){this.modellist.modulefilter=this.modulefilter,this.modellist.relatefilter=this.relatefilter,this.modellist.useCache=!1,this.modellist.initialize(this.module),this.modellist.getListData(),this.model.module=this.module,""!=this.searchTerm&&this.doSearch()}ngOnDestroy(){this.subscriptions.unsubscribe()}switchListtype(){}doSearch(){this.modellist.searchTerm=this.searchTerm,this.modellist.getListData()}onScroll(e){let t=this.tablecontent.element.nativeElement;t.scrollTop+t.clientHeight+50>t.scrollHeight&&this.modellist.loadMoreList()}closePopup(){this.usedSearchTerm.emit(this.modellist.searchTerm),this.self.destroy()}get selectedCount(){return this.modellist.getSelectedCount()}selectItems(){this.selectedItems.emit(this.modellist.getSelectedItems()),this.usedSearchTerm.emit(this.searchTerm),this.self.destroy()}clickRow(e,t){this.multiselect||(this.selectedItems.emit([t]),this.usedSearchTerm.emit(this.searchTerm),this.self.destroy())}}return ObjectModalModuleLookup.ɵfac=function(e){return new(e||ObjectModalModuleLookup)(i.Y36(r.d),i.Y36(l.t),i.Y36(c.Pu),i.Y36(u.A),i.Y36(n.o),i.Y36(m.b))},ObjectModalModuleLookup.ɵcmp=i.Xpm({type:ObjectModalModuleLookup,selectors:[["object-modal-module-lookup"]],viewQuery:function(e,t){if(1&e&&(i.Gf(w,7,i.s_b),i.Gf(d.x,5)),2&e){let e;i.iGM(e=i.CRH())&&(t.tablecontent=e.first),i.iGM(e=i.CRH())&&(t.headercontent=e.first)}},inputs:{relatefilter:"relatefilter"},outputs:{selectedItems:"selectedItems",usedSearchTerm:"usedSearchTerm"},features:[i._Bn([o.e,l.t,n.o])],decls:19,vars:12,consts:[["size","large"],[3,"close"],["margin","none",3,"grow"],[1,"slds-height_full"],[1,"slds-is-relative",3,"ngStyle"],[1,"slds-scrollable--y","slds-height_full",3,"scroll"],["tablecontent",""],["role","listbox",1,"slds-table","slds-table--fixed-layout","slds-table--bordered","slds-max-medium-table--stacked-horizontal",3,"ngClass"],[4,"ngIf"],["object-list-item","","class","slds-hint-parent slds-p-horizontal--x-small",3,"listItem","showActionMenu","rowselect","displaylinks","click",4,"ngFor","ngForOf"],["system-table-stencils","",3,"columns","select","tools","rows",4,"ngIf"],[1,"slds-button","slds-button--neutral",3,"click"],["label","LBL_CANCEL"],["class","slds-button slds-button--brand",3,"disabled","click",4,"ngIf"],["object-list-header","",3,"showSelectColumn","showRowActionMenu"],["object-list-item","",1,"slds-hint-parent","slds-p-horizontal--x-small",3,"listItem","showActionMenu","rowselect","displaylinks","click"],["system-table-stencils","",3,"columns","select","tools","rows"],[1,"slds-button","slds-button--brand",3,"disabled","click"],["label","LBL_SELECT"]],template:function(e,t){1&e&&(i.TgZ(0,"system-modal",0)(1,"system-modal-header",1),i.NdJ("close",(function(){return t.closePopup()})),i._uU(2),i.qZA(),i.TgZ(3,"system-modal-content",2)(4,"div",3),i._UZ(5,"object-modal-module-lookup-header"),i.TgZ(6,"div",4)(7,"div",5,6),i.NdJ("scroll",(function(e){return t.onScroll(e)})),i.TgZ(9,"table",7),i.YNc(10,T,2,2,"thead",8),i.TgZ(11,"tbody"),i.YNc(12,C,1,4,"tr",9),i.qZA(),i.YNc(13,A,1,4,"tbody",10),i.qZA()(),i._UZ(14,"object-modal-module-lookup-aggregates"),i.qZA()()(),i.TgZ(15,"system-modal-footer")(16,"button",11),i.NdJ("click",(function(){return t.closePopup()})),i._UZ(17,"system-label",12),i.qZA(),i.YNc(18,k,2,1,"button",13),i.qZA()()),2&e&&(i.xp6(2),i.Oqu(t.language.getModuleCombinedLabel("LBL_SEARCH",t.modellist.module)),i.xp6(1),i.Q6J("grow",!0),i.xp6(3),i.Q6J("ngStyle",t.contentStyle()),i.xp6(3),i.Q6J("ngClass",i.kEZ(8,L,t.multiselect,!t.multiselect,!t.smallView)),i.xp6(1),i.Q6J("ngIf",!t.smallView),i.xp6(2),i.Q6J("ngForOf",t.modellist.listData.list),i.xp6(1),i.Q6J("ngIf",t.modellist.isLoading),i.xp6(5),i.Q6J("ngIf",t.multiselect))},dependencies:[h.mk,h.sg,h.O5,h.PC,g._,p.j,f.x,b.p,_.y,y.x,v.p,x.B,d.x,Z.D],styles:["table.singleselect tr:hover td{cursor:pointer}"]}),ObjectModalModuleLookup})()},9624:(e,t,s)=>{"use strict";s.d(t,{D:()=>p});var i=s(7340),n=s(1571),l=s(2644),o=s(4154),a=s(6895),d=s(7763),r=s(7954),c=s(2685);function u(e,t){1&e&&n._UZ(0,"object-listview-tags-aggregate")}function m(e,t){if(1&e&&(n.TgZ(0,"div",5),n._UZ(1,"object-listview-aggregate",6),n.qZA()),2&e){const e=t.$implicit;n.xp6(1),n.Q6J("aggregate",e)}}const h=function(e){return{module:e}};function g(e,t){if(1&e&&(n.TgZ(0,"div",1)(1,"div",2),n.YNc(2,u,1,0,"object-listview-tags-aggregate",3),n.YNc(3,m,2,1,"div",4),n.qZA()()),2&e){const e=n.oxw();n.Q6J("@animatepanel",void 0)("system-model-provider",n.VKq(4,h,e.modellist.module)),n.xp6(2),n.Q6J("ngIf",e.hasTags),n.xp6(1),n.Q6J("ngForOf",e.getAggregates())}}let p=(()=>{class ObjectModalModuleLookupAggregates{constructor(e,t){this.modellist=e,this.metadata=t}get hasTags(){return this.metadata.checkTagging(this.modellist.module)}getAggregates(){return this.modellist.moduleAggregates}}return ObjectModalModuleLookupAggregates.ɵfac=function(e){return new(e||ObjectModalModuleLookupAggregates)(n.Y36(l.t),n.Y36(o.Pu))},ObjectModalModuleLookupAggregates.ɵcmp=n.Xpm({type:ObjectModalModuleLookupAggregates,selectors:[["object-modal-module-lookup-aggregates"]],decls:1,vars:1,consts:[["class","slds-is-absolute slds-panel slds-panel--filters slds-filters__body slds-nowrap  slds-scrollable--y","style","width: 320px; height: 100%; top:0px; right: 0px;z-index: 99;",3,"system-model-provider",4,"ngIf"],[1,"slds-is-absolute","slds-panel","slds-panel--filters","slds-filters__body","slds-nowrap","slds-scrollable--y",2,"width","320px","height","100%","top","0px","right","0px","z-index","99",3,"system-model-provider"],[1,"slds-filters__body","slds-grid_vertical"],[4,"ngIf"],["class","slds-m-vertical--xx-small",4,"ngFor","ngForOf"],[1,"slds-m-vertical--xx-small"],[3,"aggregate"]],template:function(e,t){1&e&&n.YNc(0,g,4,6,"div",0),2&e&&n.Q6J("ngIf",t.modellist.displayAggregates)},dependencies:[a.sg,a.O5,d.u,r.i,c.w],encapsulation:2,data:{animation:[(0,i.X$)("animatepanel",[(0,i.eR)(":enter",[(0,i.oB)({right:"-320px",overflow:"hidden"}),(0,i.jt)(".5s",(0,i.oB)({right:"0px"})),(0,i.oB)({overflow:"unset"})]),(0,i.eR)(":leave",[(0,i.oB)({overflow:"hidden"}),(0,i.jt)(".5s",(0,i.oB)({right:"-320px"}))])])]}}),ObjectModalModuleLookupAggregates})()},9866:(e,t,s)=>{"use strict";s.d(t,{x:()=>v});var i=s(1571),n=s(727),l=s(5329),o=s(2644),a=s(6163),d=s(4154),r=s(6895),c=s(433),u=s(2656),m=s(7514),h=s(3463),g=s(3333),p=s(8859),f=s(7102),b=s(2348),_=s(4822);function y(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"system-checkbox",8),i.NdJ("ngModelChange",(function(t){i.CHM(e);const s=i.oxw();return i.KtG(s.relatefilterActive=t)})),i._UZ(1,"system-label",9)(2,"system-label-modulename",10),i._uU(3),i.qZA()}if(2&e){const e=i.oxw();i.Q6J("disabled",e.relatefilter.required)("ngModel",e.relatefilterActive),i.xp6(2),i.Q6J("module",e.relatefilter.module)("singular",!0),i.xp6(1),i.hij(" ",e.relatefilter.display,"")}}let v=(()=>{class ObjectModalModuleLookupHeader{constructor(e,t,s,l,o){this.language=e,this.modellist=t,this.modelutilities=s,this.metadata=l,this.element=o,this.searchTerm="",this.searchTermOld="",this.searchTimeOut=void 0,this.subscriptions=new n.w0,this.usedSearchTerm=new i.vpe,this.autoCompleteKiller=this.modelutilities.generateGuid()}get relatefilter(){return this.modellist.relatefilter}get relatefilterActive(){return this.relatefilter?.active}set relatefilterActive(e){this.relatefilter.active=e,this.modellist.relatefilter.active=e,this.modellist.reLoadList()}ngOnInit(){this.searchTerm=this.modellist.searchTerm,this.searchTermOld=this.modellist.searchTerm}ngOnDestroy(){this.subscriptions.unsubscribe()}doSearch(){this.searchTermOld=this.searchTerm,this.modellist.searchTerm=this.searchTerm,this.modellist.getListData()}triggerSearch(e){if(this.searchTerm!==this.searchTermOld)if("Enter"===e.key)this.searchTerm.length>0&&(this.searchTimeOut&&window.clearTimeout(this.searchTimeOut),this.doSearch());else this.searchTimeOut&&window.clearTimeout(this.searchTimeOut),this.searchTimeOut=window.setTimeout((()=>this.doSearch()),1e3)}}return ObjectModalModuleLookupHeader.ɵfac=function(e){return new(e||ObjectModalModuleLookupHeader)(i.Y36(l.d),i.Y36(o.t),i.Y36(a.A),i.Y36(d.Pu),i.Y36(i.SBq))},ObjectModalModuleLookupHeader.ɵcmp=i.Xpm({type:ObjectModalModuleLookupHeader,selectors:[["object-modal-module-lookup-header"]],outputs:{usedSearchTerm:"usedSearchTerm"},decls:11,vars:5,consts:[[1,"slds-form-element","slds-p-top--medium","slds-p-horizontal--medium","slds-m-bottom--small","slds-grid","slds-grid--vertical-align-center"],[1,"slds-form-element__control","slds-input-has-icon","slds-input-has-icon--right","slds-grow"],["icon","search","size","x-small","addclasses","slds-input__icon"],["type","text","id","lookup",1,"slds-input",3,"ngModel","autocomplete","placeholder","ngModelChange","keyup"],[1,"slds-button","slds-button--neutral","slds-button--icon-border","slds-m-horizontal--xxx-small",3,"click"],[3,"icon"],[1,"slds-theme--shade","slds-p-around--x-small","slds-border--top","slds-grid","slds-grid--vertical-align-center","slds","slds-grid--align-spread"],[3,"disabled","ngModel","ngModelChange",4,"ngIf"],[3,"disabled","ngModel","ngModelChange"],["label","LBL_RELATED_TO"],[3,"module","singular"]],template:function(e,t){1&e&&(i.TgZ(0,"div",0),i._UZ(1,"object-list-types"),i.TgZ(2,"div",1),i._UZ(3,"system-utility-icon",2),i.TgZ(4,"input",3),i.NdJ("ngModelChange",(function(e){return t.searchTerm=e}))("keyup",(function(e){return t.triggerSearch(e)})),i.qZA()(),i.TgZ(5,"button",4),i.NdJ("click",(function(){return t.modellist.reLoadList()})),i._UZ(6,"system-button-icon",5),i.qZA(),i._UZ(7,"object-listview-aggregates-button"),i.qZA(),i.TgZ(8,"div",6),i._UZ(9,"object-listview-header-details"),i.YNc(10,y,4,5,"system-checkbox",7),i.qZA()),2&e&&(i.xp6(4),i.Q6J("ngModel",t.searchTerm)("autocomplete",t.autoCompleteKiller)("placeholder",t.language.getModuleName(t.modellist.module)),i.xp6(2),i.Q6J("icon","refresh"),i.xp6(4),i.Q6J("ngIf",t.relatefilter&&t.relatefilter.id))},dependencies:[r.O5,c.Fj,c.JJ,c.On,u.J,m.U,h._,g.M,p.r,f.l,b.M,_.X],encapsulation:2}),ObjectModalModuleLookupHeader})()},2613:(e,t,s)=>{"use strict";s.d(t,{Y:()=>C});var i=s(2294),n=s(1571),l=s(5329),o=s(7774),a=s(5710),d=s(4154),r=s(6895),c=s(4561),u=s(3333),m=s(3814),h=s(8861),g=s(4778),p=s(8709),f=s(4652),b=s(5931),y=s(6409);function v(e,t){if(1&e&&n._UZ(0,"system-label-modulename",14),2&e){const e=n.oxw();n.Q6J("module",e.moduleName)}}function x(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"a",15),n.NdJ("click",(function(){n.CHM(e);const t=n.oxw();return n.KtG(t.goToModule())})),n._UZ(1,"system-label-modulename",14),n.qZA()}if(2&e){const e=n.oxw();n.xp6(1),n.Q6J("module",e.moduleName)}}function Z(e,t){if(1&e&&(n.ynx(0),n._uU(1),n.BQk()),2&e){const e=n.oxw();n.xp6(1),n.Oqu(e.model.data.summary_text)}}const w=function(){return{displayLabels:!1}};function T(e,t){if(1&e&&n._UZ(0,"object-record-fieldset-horizontal-list",16),2&e){const e=n.oxw();n.Q6J("fieldset",e.fieldset)("system-view-provider",n.DdM(2,w))}}let C=(()=>{class ObjectPageHeader{constructor(e,t,s,i){this.language=e,this.router=t,this.model=s,this.metadata=i,this.componentconfig={},this.actionSet="",this.fieldset=""}get moduleName(){return this.model.module}ngOnInit(){let e=this.componentconfig&&!_.isEmpty(this.componentconfig)?this.componentconfig:this.metadata.getComponentConfig("ObjectPageHeader",this.model.module);this.actionSet=e.actionset,this.fieldset=e.fieldset}get canGoToModule(){return this.metadata.getModuleDefs(this.moduleName).visible&&this.metadata.checkModuleAcl(this.moduleName,"list")}goToModule(){this.canGoToModule&&this.router.navigate(["/module/"+this.moduleName])}}return ObjectPageHeader.ɵfac=function(e){return new(e||ObjectPageHeader)(n.Y36(l.d),n.Y36(o.F0),n.Y36(a.o),n.Y36(d.Pu))},ObjectPageHeader.ɵcmp=n.Xpm({type:ObjectPageHeader,selectors:[["object-page-header"]],features:[n._Bn([i.e])],decls:19,vars:6,consts:[[1,"slds-page-header"],[1,"slds-grid"],[1,"slds-col","slds-has-flexi-truncate"],[1,"slds-media","slds-no-space","slds-grow"],[3,"module","click"],[1,"slds-media__body"],[1,"slds-text-title--caps","slds-line-height--reset"],[3,"module",4,"ngIf"],["href","javascript:void(0);",3,"click",4,"ngIf"],[1,"slds-page-header__title","slds-m-right--small","slds-align-middle","slds-truncate"],[4,"ngIf"],[3,"fieldset","system-view-provider",4,"ngIf"],[1,"slds-m-horizontal--x-small","slds-show--medium","slds-align--absolute-center"],[3,"actionset"],[3,"module"],["href","javascript:void(0);",3,"click"],[3,"fieldset","system-view-provider"]],template:function(e,t){1&e&&(n.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"system-icon",4),n.NdJ("click",(function(){return t.goToModule()})),n.qZA(),n.TgZ(5,"div",5)(6,"p",6),n.YNc(7,v,1,1,"system-label-modulename",7),n.YNc(8,x,2,1,"a",8),n.qZA(),n.TgZ(9,"div")(10,"h1",9),n.YNc(11,Z,2,1,"ng-container",10),n.YNc(12,T,1,3,"object-record-fieldset-horizontal-list",11),n.qZA()()()()(),n.TgZ(13,"div",12),n._UZ(14,"object-subscription-button")(15,"object-reminder-button")(16,"object-status-network-button")(17,"object-action-container",13),n.qZA()(),n._UZ(18,"object-page-header-tags"),n.qZA()),2&e&&(n.xp6(4),n.Q6J("module",t.moduleName),n.xp6(3),n.Q6J("ngIf",!t.canGoToModule),n.xp6(1),n.Q6J("ngIf",t.canGoToModule),n.xp6(3),n.Q6J("ngIf",!t.fieldset),n.xp6(1),n.Q6J("ngIf",t.fieldset),n.xp6(5),n.Q6J("actionset",t.actionSet))},dependencies:[r.O5,c.f,u.M,m.V,h.S,g.d,p.T,f.U,b.Z,y.n],encapsulation:2}),ObjectPageHeader})()},4778:(e,t,s)=>{"use strict";s.d(t,{d:()=>w});var i=s(1571),n=s(5710),l=s(4154),o=s(5329),a=s(3278),d=s(6895),r=s(2656),c=s(1078),u=s(3463),m=s(2803),h=s(8859);function g(e,t){1&e&&i._UZ(0,"system-stencil")}function p(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"span",14),i.NdJ("click",(function(){i.CHM(e);const t=i.oxw().index,s=i.oxw(4);return i.KtG(s.removeByIndex(t))})),i._UZ(1,"system-utility-icon",15),i.qZA()}}function f(e,t){if(1&e&&(i.TgZ(0,"div",11)(1,"span",12),i._uU(2),i.YNc(3,p,2,0,"span",13),i.qZA()()),2&e){const e=t.$implicit,s=i.oxw(4);i.xp6(2),i.hij(" ",e," "),i.xp6(1),i.Q6J("ngIf",s.isEditing)}}function b(e,t){if(1&e&&(i.TgZ(0,"div",9),i.YNc(1,f,4,2,"div",10),i.qZA()),2&e){const e=i.oxw(3);i.xp6(1),i.Q6J("ngForOf",e.objecttags)}}function _(e,t){1&e&&(i.TgZ(0,"div",16)(1,"div",17),i._UZ(2,"system-label",18),i.qZA()())}function y(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"div")(1,"button",19),i.NdJ("click",(function(){i.CHM(e);const t=i.oxw(3);return i.KtG(t.editTags())})),i._UZ(2,"system-button-icon",20),i.qZA()()}2&e&&(i.xp6(2),i.Q6J("icon","edit"))}function v(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"div",21)(1,"div",22)(2,"system-input-tags",23),i.NdJ("tagemitter",(function(t){i.CHM(e);const s=i.oxw(3);return i.KtG(s.addTag(t))})),i.qZA()(),i.TgZ(3,"button",24),i.NdJ("click",(function(){i.CHM(e);const t=i.oxw(3);return i.KtG(t.cancelEdit())})),i._UZ(4,"system-button-icon",20),i.qZA(),i.TgZ(5,"button",19),i.NdJ("click",(function(){i.CHM(e);const t=i.oxw(3);return i.KtG(t.saveTags())})),i._UZ(6,"system-button-icon",20),i.qZA()()}2&e&&(i.xp6(4),i.Q6J("icon","close"),i.xp6(2),i.Q6J("icon","check"))}function x(e,t){if(1&e&&(i.TgZ(0,"div",4),i.YNc(1,b,2,1,"div",5),i.YNc(2,_,3,0,"div",6),i.YNc(3,y,3,1,"div",7),i.YNc(4,v,7,2,"div",8),i.qZA()),2&e){const e=i.oxw(2);i.xp6(1),i.Q6J("ngIf",e.objecttags.length),i.xp6(1),i.Q6J("ngIf",0==e.objecttags.length&&!e.isEditing),i.xp6(1),i.Q6J("ngIf",!e.isEditing),i.xp6(1),i.Q6J("ngIf",e.isEditing)}}function Z(e,t){if(1&e&&(i.TgZ(0,"div",1),i.YNc(1,g,1,0,"system-stencil",2),i.YNc(2,x,5,4,"ng-template",null,3,i.W1O),i.qZA()),2&e){const e=i.MAs(3),t=i.oxw();i.xp6(1),i.Q6J("ngIf",t.model.isLoading)("ngIfElse",e)}}let w=(()=>{class ObjectPageHeaderTags{constructor(e,t,s,i){this.model=e,this.metadata=t,this.language=s,this.toast=i,this.isEditing=!1,this.taggingEnabled=!1,this.taggingEnabled=this.checkTaggingEnabled()}get objecttags(){let e=this.model.getField("tags");if(!e||""===e)return[];try{return JSON.parse(e)}catch(e){return[]}}checkTaggingEnabled(){return this.metadata.checkTagging(this.model.module)}editTags(){this.isEditing=!0,this.model.startEdit()}cancelEdit(){this.isEditing=!1,this.model.cancelEdit()}saveTags(){this.model.save(),this.isEditing=!1}removeByIndex(e){let t=this.objecttags;t.splice(e,1),this.model.setField("tags",JSON.stringify(t))}addTag(e){let t=this.objecttags.map((e=>e.toLowerCase()));t.includes(e.toLowerCase())?this.toast.sendToast(this.language.getLabel("LBL_TAG_EXISTS","","short"),"warning"):(this.objecttags.indexOf(e),t.push(e),this.model.setField("tags",JSON.stringify(t)))}}return ObjectPageHeaderTags.ɵfac=function(e){return new(e||ObjectPageHeaderTags)(i.Y36(n.o),i.Y36(l.Pu),i.Y36(o.d),i.Y36(a.A))},ObjectPageHeaderTags.ɵcmp=i.Xpm({type:ObjectPageHeaderTags,selectors:[["object-page-header-tags"]],decls:1,vars:1,consts:[["class","slds-show--medium slds-p-top--xx-small",4,"ngIf"],[1,"slds-show--medium","slds-p-top--xx-small"],[4,"ngIf","ngIfElse"],["displayContent",""],[1,"slds-grid","slds-grid--vertical-align-center"],["class","slds-p-right--xx-small slds-grid slds-gutters_direct-xxx-small",4,"ngIf"],["class","slds-p-right--xx-small",4,"ngIf"],[4,"ngIf"],["class","slds-grid slds-grow",4,"ngIf"],[1,"slds-p-right--xx-small","slds-grid","slds-gutters_direct-xxx-small"],["class","slds-col",4,"ngFor","ngForOf"],[1,"slds-col"],[1,"slds-badge","slds-badge_lightest"],["class","slds-badge__icon slds-badge__icon_right",3,"click",4,"ngIf"],[1,"slds-badge__icon","slds-badge__icon_right",3,"click"],["icon","close","size","xx-small"],[1,"slds-p-right--xx-small"],[2,"font-style","italic"],["label","LBL_NO_TAGS_ASSIGNED"],[1,"slds-button","slds-button_icon",3,"click"],[3,"icon"],[1,"slds-grid","slds-grow"],[1,"slds-form-element","slds-grow"],[3,"tagemitter"],[1,"slds-p-left--xx-small","slds-button","slds-button_icon",3,"click"]],template:function(e,t){1&e&&i.YNc(0,Z,4,2,"div",0),2&e&&i.Q6J("ngIf",t.taggingEnabled)},dependencies:[d.sg,d.O5,r.J,c.C,u._,m.B,h.r],encapsulation:2}),ObjectPageHeaderTags})()},6438:(e,t,s)=>{"use strict";s.d(t,{F:()=>g});var i=s(2294),n=s(727),l=s(1571),o=s(4154),a=s(5710),d=s(5329),r=s(6895),c=s(6951),u=s(4021),m=s(6194);function h(e,t){if(1&e&&(l.TgZ(0,"h3",3),l._uU(1),l.qZA()),2&e){const e=l.oxw();l.xp6(1),l.Oqu(e.header)}}let g=(()=>{class ObjectRecordDetails{constructor(e,t,s,i,l,o){this.view=e,this.metadata=t,this.componentFactoryResolver=s,this.model=i,this.language=l,this.renderer=o,this.componentconfig={},this.subscriptions=new n.w0}ngOnInit(){this.buildContainer(),!0===this.readonly||this.componentconfig.readonly?this.view.isEditable=!1:(this.view.isEditable=!0,this.view.linkedToModel=!0,this.subscriptions.add(this.view.mode$.subscribe((e=>{"edit"!=e||this.model.isEditing||this.model.startEdit()}))))}ngOnDestroy(){this.subscriptions.unsubscribe()}buildContainer(){this.componentSet||(this.componentconfig.componentset||(this.componentconfig=this.metadata.getComponentConfig("ObjectRecordDetails",this.model.module)),this.componentSet=this.componentconfig.componentset)}getBoxStyle(){return this.view.isEditMode()?{"box-shadow":"0 2px 4px 4px rgba(0,0,0,.16)"}:{}}get showHeader(){return!!this.componentconfig.header}get header(){return this.language.getLabel(this.componentconfig.header,this.model.module)}}return ObjectRecordDetails.ɵfac=function(e){return new(e||ObjectRecordDetails)(l.Y36(i.e),l.Y36(o.Pu),l.Y36(l._Vd),l.Y36(a.o),l.Y36(d.d),l.Y36(l.Qsj))},ObjectRecordDetails.ɵcmp=l.Xpm({type:ObjectRecordDetails,selectors:[["object-record-details"]],inputs:{componentSet:"componentSet",readonly:"readonly"},features:[l._Bn([i.e])],decls:4,vars:4,consts:[["class","slds-text-heading_small slds-theme_shade slds-p-around--x-small",4,"ngIf"],[1,"slds-is-relative",3,"ngStyle","system-overlay-loading-spinner"],[3,"componentset"],[1,"slds-text-heading_small","slds-theme_shade","slds-p-around--x-small"]],template:function(e,t){1&e&&(l.YNc(0,h,2,1,"h3",0),l.TgZ(1,"div",1),l._UZ(2,"system-componentset",2)(3,"object-record-details-footer"),l.qZA()),2&e&&(l.Q6J("ngIf",t.showHeader),l.xp6(1),l.Q6J("ngStyle",t.getBoxStyle())("system-overlay-loading-spinner",t.model.isSaving),l.xp6(1),l.Q6J("componentset",t.componentSet))},dependencies:[r.O5,r.PC,c.E,u._,m.b],encapsulation:2}),ObjectRecordDetails})()},6194:(e,t,s)=>{"use strict";s.d(t,{b:()=>m});var i=s(1571),n=s(2294),l=s(5710),o=s(5329),a=s(4154),d=s(6895),r=s(8861),c=s(4347);function u(e,t){if(1&e&&(i.TgZ(0,"div",1),i._UZ(1,"object-action-container",2)(2,"object-record-messages-badge"),i.qZA()),2&e){const e=i.oxw();i.xp6(1),i.Q6J("actionset",e.actionset)}}let m=(()=>{class ObjectRecordDetailsFooter{constructor(e,t,s,i){this.view=e,this.model=t,this.language=s,this.metadata=i}ngOnInit(){let e=this.metadata.getComponentConfig("ObjectRecordDetailsFooter",this.model.module);this.actionset=e.actionset}cancel(){this.model.cancelEdit(),this.view.setViewMode()}save(){this.model.validate()&&(this.model.save(!0),this.view.setViewMode())}}return ObjectRecordDetailsFooter.ɵfac=function(e){return new(e||ObjectRecordDetailsFooter)(i.Y36(n.e),i.Y36(l.o),i.Y36(o.d),i.Y36(a.Pu))},ObjectRecordDetailsFooter.ɵcmp=i.Xpm({type:ObjectRecordDetailsFooter,selectors:[["object-record-details-footer"]],decls:1,vars:1,consts:[["class","slds-text-align--center slds-p-bottom--small slds-grid slds-grid--align-center slds-grid--vertical-align-center",4,"ngIf"],[1,"slds-text-align--center","slds-p-bottom--small","slds-grid","slds-grid--align-center","slds-grid--vertical-align-center"],[3,"actionset"]],template:function(e,t){1&e&&i.YNc(0,u,3,1,"div",0),2&e&&i.Q6J("ngIf",t.view.isEditMode())},dependencies:[d.O5,r.S,c.Z],encapsulation:2}),ObjectRecordDetailsFooter})()},9062:(e,t,s)=>{"use strict";s.d(t,{d:()=>b});var i=s(1571),n=s(4154),l=s(5710),o=s(2294),a=s(6895),d=s(7165);function r(e,t){if(1&e&&i._UZ(0,"object-record-fieldset-field",5),2&e){const e=i.oxw().$implicit,t=i.oxw(2);i.Q6J("fieldsetitem",e)("fielddisplayclass",t.fielddisplayclass)("fieldpadding",t.fieldpadding)}}function c(e,t){if(1&e&&i._UZ(0,"object-record-fieldset",6),2&e){const e=i.oxw().$implicit,t=i.oxw(2);i.Q6J("fieldset",e.fieldset)("fielddisplayclass",t.fielddisplayclass)("fieldpadding",t.fieldpadding)("direction",e.fieldconfig.direction)}}function u(e,t){if(1&e&&(i.TgZ(0,"div"),i.YNc(1,r,1,3,"object-record-fieldset-field",3),i.YNc(2,c,1,4,"object-record-fieldset",4),i.qZA()),2&e){const e=t.$implicit,s=i.oxw(2);i.xp6(1),i.Q6J("ngIf",s.isField(e)),i.xp6(1),i.Q6J("ngIf",!s.isField(e))}}function m(e,t){if(1&e&&(i.TgZ(0,"div"),i.YNc(1,u,3,2,"div",2),i.qZA()),2&e){const e=i.oxw();i.xp6(1),i.Q6J("ngForOf",e.fieldsetitems)}}function h(e,t){if(1&e&&i._UZ(0,"object-record-fieldset-field",5),2&e){const e=i.oxw().$implicit,t=i.oxw(2);i.Q6J("fieldsetitem",e)("fielddisplayclass",t.fielddisplayclass)("fieldpadding",t.fieldpadding)}}function g(e,t){if(1&e&&i._UZ(0,"object-record-fieldset",6),2&e){const e=i.oxw().$implicit,t=i.oxw(2);i.Q6J("fieldset",e.fieldset)("fielddisplayclass",t.fielddisplayclass)("fieldpadding",t.fieldpadding)("direction",e.fieldconfig.direction)}}function p(e,t){if(1&e&&(i.TgZ(0,"div",9),i.YNc(1,h,1,3,"object-record-fieldset-field",3),i.YNc(2,g,1,4,"object-record-fieldset",4),i.qZA()),2&e){const e=t.$implicit,s=t.index,n=i.oxw(2);i.Q6J("ngClass",n.sizeClass(s)),i.xp6(1),i.Q6J("ngIf",n.isField(e)),i.xp6(1),i.Q6J("ngIf",!n.isField(e))}}function f(e,t){if(1&e&&(i.TgZ(0,"div",7),i.YNc(1,p,3,3,"div",8),i.qZA()),2&e){const e=i.oxw();i.xp6(1),i.Q6J("ngForOf",e.fieldsetitems)}}let b=(()=>{class ObjectRecordFieldset{constructor(e,t,s){this.metadata=e,this.model=t,this.view=s,this.fieldset="",this.direction="horizontal",this.fieldpadding="xx-small",this.fielddisplayclass="slds-has-divider--bottom slds-p-vertical--x-small spice-fieldminheight",this.fieldsetitems=[],this.numberOfColumns=0}ngOnInit(){this.fieldsetitems=this.metadata.getFieldSetItems(this.fieldset);for(let e of this.fieldsetitems)this.numberOfColumns=this.numberOfColumns+(e.fieldconfig.width?1*e.fieldconfig.width:e.fieldconfig.width=1);!this.renderVertical&&this.numberOfColumns>8&&12!==this.numberOfColumns&&console.warn("wrong fieldset grid ("+this.fieldset+")")}get renderVertical(){return"vertical"==this.direction}isField(e){return!!e.field}sizeClass(e){return this.renderVertical?"":"small"==this.view.size?"slds-size--1-of-1":"slds-size--"+this.fieldsetitems[e].fieldconfig.width+"-of-"+this.numberOfColumns}}return ObjectRecordFieldset.ɵfac=function(e){return new(e||ObjectRecordFieldset)(i.Y36(n.Pu),i.Y36(l.o),i.Y36(o.e))},ObjectRecordFieldset.ɵcmp=i.Xpm({type:ObjectRecordFieldset,selectors:[["object-record-fieldset"]],inputs:{fieldset:"fieldset",direction:"direction",fieldpadding:"fieldpadding",fielddisplayclass:"fielddisplayclass"},decls:2,vars:2,consts:[[4,"ngIf"],["class","slds-grid slds-wrap",4,"ngIf"],[4,"ngFor","ngForOf"],[3,"fieldsetitem","fielddisplayclass","fieldpadding",4,"ngIf"],[3,"fieldset","fielddisplayclass","fieldpadding","direction",4,"ngIf"],[3,"fieldsetitem","fielddisplayclass","fieldpadding"],[3,"fieldset","fielddisplayclass","fieldpadding","direction"],[1,"slds-grid","slds-wrap"],[3,"ngClass",4,"ngFor","ngForOf"],[3,"ngClass"]],template:function(e,t){1&e&&(i.YNc(0,m,2,1,"div",0),i.YNc(1,f,2,1,"div",1)),2&e&&(i.Q6J("ngIf",t.renderVertical),i.xp6(1),i.Q6J("ngIf",!t.renderVertical))},dependencies:[a.mk,a.sg,a.O5,ObjectRecordFieldset,d.f],encapsulation:2}),ObjectRecordFieldset})()},7165:(e,t,s)=>{"use strict";s.d(t,{f:()=>o});var i=s(1571),n=s(6895),l=s(3634);let o=(()=>{class ObjectRecordFieldsetField{constructor(){this.fieldpadding="x-small",this.fielddisplayclass="slds-has-divider--bottom slds-p-vertical--x-small spice-fieldminheight"}showLabel(e){return!0!==e.hidelabel}get padding(){return this.fieldpadding?"slds-p-around--"+this.fieldpadding:""}}return ObjectRecordFieldsetField.ɵfac=function(e){return new(e||ObjectRecordFieldsetField)},ObjectRecordFieldsetField.ɵcmp=i.Xpm({type:ObjectRecordFieldsetField,selectors:[["object-record-fieldset-field"]],inputs:{fieldsetitem:"fieldsetitem",fieldpadding:"fieldpadding",fielddisplayclass:"fielddisplayclass"},decls:2,vars:4,consts:[[3,"ngClass"],[3,"field","fieldconfig","fielddisplayclass"]],template:function(e,t){1&e&&(i.TgZ(0,"div",0),i._UZ(1,"field-container",1),i.qZA()),2&e&&(i.Q6J("ngClass",t.padding),i.xp6(1),i.Q6J("field",t.fieldsetitem.field)("fieldconfig",t.fieldsetitem.fieldconfig)("fielddisplayclass",t.fielddisplayclass))},dependencies:[n.mk,l.j],encapsulation:2}),ObjectRecordFieldsetField})()},5931:(e,t,s)=>{"use strict";s.d(t,{Z:()=>c});var i=s(1571),n=s(4154),l=s(5710),o=s(6895),a=s(3634);function d(e,t){if(1&e&&(i.TgZ(0,"li",3),i._UZ(1,"field-container",4),i.qZA()),2&e){const e=i.oxw().$implicit;i.xp6(1),i.Q6J("field",e.field)("fieldconfig",e.fieldconfig)}}function r(e,t){if(1&e&&(i.ynx(0),i.YNc(1,d,2,2,"li",2),i.BQk()),2&e){const e=t.$implicit,s=i.oxw();i.xp6(1),i.Q6J("ngIf",s.model.getField(e.field))}}let c=(()=>{class ObjectRecordFieldsetHorizontalList{constructor(e,t){this.metadata=e,this.model=t,this.fieldset="",this.fieldsetitems=[]}ngOnInit(){this.fieldsetitems=this.metadata.getFieldSetItems(this.fieldset)}}return ObjectRecordFieldsetHorizontalList.ɵfac=function(e){return new(e||ObjectRecordFieldsetHorizontalList)(i.Y36(n.Pu),i.Y36(l.o))},ObjectRecordFieldsetHorizontalList.ɵcmp=i.Xpm({type:ObjectRecordFieldsetHorizontalList,selectors:[["object-record-fieldset-horizontal-list"]],inputs:{fieldset:"fieldset"},decls:2,vars:1,consts:[[1,"slds-list_horizontal","slds-has-dividers_left"],[4,"ngFor","ngForOf"],["class","slds-item",4,"ngIf"],[1,"slds-item"],["fielddisplayclass","slds-align_absolute-center",3,"field","fieldconfig"]],template:function(e,t){1&e&&(i.TgZ(0,"ul",0),i.YNc(1,r,2,1,"ng-container",1),i.qZA()),2&e&&(i.xp6(1),i.Q6J("ngForOf",t.fieldsetitems))},dependencies:[o.sg,o.O5,a.j],encapsulation:2}),ObjectRecordFieldsetHorizontalList})()},4347:(e,t,s)=>{"use strict";s.d(t,{Z:()=>g});var i=s(1571),n=s(5710),l=s(5329),o=s(6895),a=s(2656),d=s(3463),r=s(7674),c=s(8859);function u(e,t){if(1&e&&(i.TgZ(0,"tr",17)(1,"td",18)(2,"div",19),i._UZ(3,"system-utility-icon",20),i.qZA()(),i.TgZ(4,"td",21)(5,"div",19),i._UZ(6,"system-label-fieldname",22),i.qZA()(),i.TgZ(7,"td",23)(8,"div",19),i._uU(9),i.qZA()()()),2&e){const e=t.$implicit,s=i.oxw(3);i.xp6(3),i.Q6J("icon",e.type),i.xp6(3),i.Q6J("module",s.model.module)("field",e.reference),i.xp6(3),i.Oqu(e.message)}}function m(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"section",5)(1,"button",6),i.NdJ("click",(function(){i.CHM(e);const t=i.oxw(2);return i.KtG(t.showpopover=!1)})),i._UZ(2,"system-button-icon",7),i.qZA(),i.TgZ(3,"header",8)(4,"div",9),i._UZ(5,"system-utility-icon",10),i.TgZ(6,"div",11)(7,"h2",12),i._UZ(8,"system-label",13),i.qZA()()()(),i.TgZ(9,"div",14)(10,"table",15)(11,"tbody"),i.YNc(12,u,10,4,"tr",16),i.qZA()()()()}if(2&e){const e=i.oxw(2);i.Q6J("ngClass",e.nubbinClass)("ngStyle",e.popoverStyle),i.xp6(2),i.Q6J("inverse",!0),i.xp6(10),i.Q6J("ngForOf",e.messages)}}function h(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"div",1)(1,"span",2),i.NdJ("click",(function(){i.CHM(e);const t=i.oxw();return i.KtG(t.showpopover=!t.showpopover)})),i._uU(2),i._UZ(3,"system-label",3),i.qZA(),i.YNc(4,m,13,4,"section",4),i.qZA()}if(2&e){const e=i.oxw();i.xp6(2),i.hij("",e.messagecount," "),i.xp6(2),i.Q6J("ngIf",e.showpopover)}}let g=(()=>{class ObjectRecordMessagesBadge{constructor(e,t){this.model=e,this.language=t,this.side="left",this.showpopover=!1}get messagecount(){return this.model.getMessages().length}get messages(){return this.model.getMessages()}get nubbinClass(){return"right"==this.side?"slds-nubbin_bottom-right":"slds-nubbin_bottom-left"}get popoverStyle(){return"right"==this.side?{bottom:"37px",right:"-10px"}:{bottom:"37px",left:"-10px"}}}return ObjectRecordMessagesBadge.ɵfac=function(e){return new(e||ObjectRecordMessagesBadge)(i.Y36(n.o),i.Y36(l.d))},ObjectRecordMessagesBadge.ɵcmp=i.Xpm({type:ObjectRecordMessagesBadge,selectors:[["object-record-messages-badge"]],inputs:{side:"side"},decls:1,vars:1,consts:[["class","slds-is-relative",4,"ngIf"],[1,"slds-is-relative"],[1,"slds-badge","slds-theme--error","slds-m-horizontal--xx-small",3,"click"],["label","LBL_ERRORS"],["aria-label","Model Errors","class","slds-popover slds-popover_error slds-nubbin_bottom-left slds-is-absolute","role","dialog",3,"ngClass","ngStyle",4,"ngIf"],["aria-label","Model Errors","role","dialog",1,"slds-popover","slds-popover_error","slds-nubbin_bottom-left","slds-is-absolute",3,"ngClass","ngStyle"],["title","Close dialog",1,"slds-button","slds-button_icon","slds-button_icon-small","slds-float_right","slds-popover__close",3,"click"],["icon","close",3,"inverse"],[1,"slds-popover__header"],[1,"slds-media","slds-media_center","slds-has-flexi-truncate"],["icon","error","size","x-small","colorclass","slds-icon-utility-error"],[1,"slds-media__body","slds-text-align--left","slds-p-left--x-small"],["title","Resolve error",1,"slds-truncate","slds-text-heading_small"],["label","LBL_VALIDATION_ERRORS"],[1,"slds-popover__body","slds-p-horizontal--none"],[1,"slds-table","slds-table_cell-buffer","slds-table_bordered"],["class","slds-hint-parent",4,"ngFor","ngForOf"],[1,"slds-hint-parent"],["data-label","type"],[1,"slds-truncate"],["size","x-small",3,"icon"],["data-label","Field"],[3,"module","field"],["data-label","Message"]],template:function(e,t){1&e&&i.YNc(0,h,5,2,"div",0),2&e&&i.Q6J("ngIf",t.messagecount)},dependencies:[o.mk,o.sg,o.O5,o.PC,a.J,d._,r.h,c.r],encapsulation:2}),ObjectRecordMessagesBadge})()},8652:(e,t,s)=>{"use strict";s.d(t,{E:()=>f});var i=s(7340),n=s(1360),l=s(767),o=s(1571),a=s(5329),d=s(4154),r=s(6040),c=s(5710),u=s(6895),m=s(4021);function h(e,t){if(1&e&&(o.TgZ(0,"div")(1,"div",4),o.Hsn(2),o.qZA(),o._UZ(3,"object-related-card-footer",2),o.qZA()),2&e){const e=o.oxw(2);o.Q6J("@displaycard",void 0),o.xp6(1),o.Q6J("system-overlay-loading-spinner",e.paginating),o.xp6(2),o.Q6J("componentconfig",e.componentconfig)}}function g(e,t){if(1&e&&(o.TgZ(0,"div",1),o._UZ(1,"object-related-card-header",2),o.YNc(2,h,4,3,"div",3),o.qZA()),2&e){const e=o.oxw();o.xp6(1),o.Q6J("componentconfig",e.componentconfig),o.xp6(1),o.Q6J("ngIf",e.isopen)}}const p=["*"];let f=(()=>{class ObjectRelatedCard{constructor(e,t,s,i){this.language=e,this.metadata=t,this.relatedmodels=s,this.model=i}get module(){return this.componentconfig.object}get hidden(){return!this.checkModelState()||!this.aclAccess()}get isloading(){return this.relatedmodels.isloading}get isopen(){return!(this.cardheader&&!this.cardheader.isopen)&&(this.relatedmodels.count>0||this.isloading)}get paginating(){return!(this.relatedmodels.isloading||!this.cardfooter||!this.cardfooter.paginating)}checkModelState(){return!(this.componentconfig.requiredmodelstate&&!this.model.checkModelState(this.componentconfig.requiredmodelstate))}aclAccess(){if(this.module){let e=""!=this.relatedmodels.linkName?this.relatedmodels.linkName:this.relatedmodels.relatedModule?.toLowerCase();return(this.metadata.checkModuleAcl(this.module,"list")||this.metadata.checkModuleAcl(this.module,"listrelated"))&&this.model.checkAccess("detail")&&this.model.checkFieldAccess(e)}return!1}}return ObjectRelatedCard.ɵfac=function(e){return new(e||ObjectRelatedCard)(o.Y36(a.d),o.Y36(d.Pu),o.Y36(r.j),o.Y36(c.o))},ObjectRelatedCard.ɵcmp=o.Xpm({type:ObjectRelatedCard,selectors:[["object-related-card"]],viewQuery:function(e,t){if(1&e&&(o.Gf(n.g,5),o.Gf(l.C,5)),2&e){let e;o.iGM(e=o.CRH())&&(t.cardheader=e.first),o.iGM(e=o.CRH())&&(t.cardfooter=e.first)}},inputs:{componentconfig:"componentconfig"},ngContentSelectors:p,decls:1,vars:1,consts:[["class","slds-card slds-card_boundary slds-m-bottom--medium",4,"ngIf"],[1,"slds-card","slds-card_boundary","slds-m-bottom--medium"],[3,"componentconfig"],[4,"ngIf"],[1,"slds-card__body","slds-size--1-of-1",3,"system-overlay-loading-spinner"]],template:function(e,t){1&e&&(o.F$t(),o.YNc(0,g,3,2,"div",0)),2&e&&o.Q6J("ngIf",!t.hidden)},dependencies:[u.O5,m._,n.g,l.C],encapsulation:2,data:{animation:[(0,i.X$)("displaycard",[(0,i.eR)(":enter",[(0,i.oB)({opacity:0,height:"0px",overflow:"hidden"}),(0,i.jt)(".5s",(0,i.oB)({height:"*",opacity:1})),(0,i.oB)({overflow:"unset"})]),(0,i.eR)(":leave",[(0,i.oB)({overflow:"hidden"}),(0,i.jt)(".5s",(0,i.oB)({height:"0px",opacity:0}))])])]}}),ObjectRelatedCard})()},767:(e,t,s)=>{"use strict";s.d(t,{C:()=>g});var i=s(1571),n=s(5329),l=s(6040),o=s(5710),a=s(7774),d=s(7017),r=s(6895),c=s(2656),u=s(3463);function m(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"div",9)(1,"button",7),i.NdJ("click",(function(){i.CHM(e);const t=i.oxw();return i.KtG(t.firstPage())})),i._UZ(2,"system-button-icon",10),i.qZA(),i.TgZ(3,"button",7),i.NdJ("click",(function(){i.CHM(e);const t=i.oxw();return i.KtG(t.previousPage())})),i._UZ(4,"system-button-icon",11),i.qZA(),i.TgZ(5,"div",12),i._UZ(6,"system-label",13),i.TgZ(7,"div",14),i._uU(8),i.qZA(),i._UZ(9,"system-label",15),i.TgZ(10,"div",14),i._uU(11),i.qZA()(),i.TgZ(12,"button",7),i.NdJ("click",(function(){i.CHM(e);const t=i.oxw();return i.KtG(t.nextPage())})),i._UZ(13,"system-button-icon",16),i.qZA(),i.TgZ(14,"button",7),i.NdJ("click",(function(){i.CHM(e);const t=i.oxw();return i.KtG(t.lastPage())})),i._UZ(15,"system-button-icon",17),i.qZA()()}if(2&e){const e=i.oxw();i.xp6(1),i.Q6J("disabled",e.previousDisabled||e.paginating),i.xp6(2),i.Q6J("disabled",e.previousDisabled||e.paginating),i.xp6(5),i.Oqu(e.page),i.xp6(3),i.Oqu(e.pages),i.xp6(1),i.Q6J("disabled",e.nextDisabled||e.paginating),i.xp6(2),i.Q6J("disabled",e.nextDisabled||e.paginating)}}function h(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"a",18),i.NdJ("click",(function(){i.CHM(e);const t=i.oxw();return i.KtG(t.showAll())})),i._UZ(1,"system-label",19),i.qZA()}}let g=(()=>{class ObjectRelatedCardFooter{constructor(e,t,s,i,n){this.language=e,this.relatedmodels=t,this.model=s,this.router=i,this.navigationtab=n,this.module="",this.fieldset=void 0,this._displayitems=5,this.paginating=!1,this.componentid=this.model.utils.generateGuid()}ngOnInit(){this.fieldset=this.componentconfig.fieldset,this.module=this.componentconfig.object}get displayitems(){return this._displayitems}set displayitems(e){e!==this.displayitems&&(this.displayitems=e,this.relatedmodels.loaditems=e,this.relatedmodels.getData())}get canViewAll(){return this.relatedmodels.count>0&&this.relatedmodels.count>this.relatedmodels.items.length}canSetCount(){return this.relatedmodels.count>this.relatedmodels.items.length}showAll(){let e="";this.navigationtab?.tabid&&(e="/tab/"+this.navigationtab.tabid),this.fieldset&&""!=this.fieldset?this.router.navigate([e+"/module/"+this.model.module+"/"+this.model.id+"/"+this.relatedmodels.relatedModule+"/"+this.relatedmodels._linkName+"/"+this.fieldset]):this.router.navigate([e+"/module/"+this.model.module+"/"+this.model.id+"/"+this.relatedmodels.relatedModule+"/"+this.relatedmodels._linkName])}reload(){this.relatedmodels.offset=0,this.paginating=!0,this.relatedmodels.getData().subscribe((()=>this.paginating=!1))}get nextDisabled(){return this.relatedmodels.offset+this.relatedmodels.loaditems>=this.relatedmodels.count}nextPage(){this.nextDisabled||(this.relatedmodels.offset=this.relatedmodels.offset+this.relatedmodels.loaditems,this.paginating=!0,this.relatedmodels.getData(!0).subscribe((()=>this.paginating=!1)))}lastPage(){if(!this.nextDisabled){let e=Math.floor(this.relatedmodels.count/this.relatedmodels.loaditems)*this.relatedmodels.loaditems;this.relatedmodels.offset=e,this.paginating=!0,this.relatedmodels.getData(!0).subscribe((()=>this.paginating=!1))}}get previousDisabled(){return 0==this.relatedmodels.offset}previousPage(){this.previousDisabled||(this.relatedmodels.offset=this.relatedmodels.offset-this.relatedmodels.loaditems,this.relatedmodels.offset<0&&(this.relatedmodels.offset=0),this.paginating=!0,this.relatedmodels.getData(!0).subscribe((()=>this.paginating=!1)))}firstPage(){this.previousDisabled||(this.relatedmodels.offset=0,this.paginating=!0,this.relatedmodels.getData(!0).subscribe((()=>this.paginating=!1)))}get page(){return this.relatedmodels.offset/this.relatedmodels.loaditems+1}get pages(){return Math.floor(this.relatedmodels.count/this.relatedmodels.loaditems)+1}}return ObjectRelatedCardFooter.ɵfac=function(e){return new(e||ObjectRelatedCardFooter)(i.Y36(n.d),i.Y36(l.j),i.Y36(o.o),i.Y36(a.F0),i.Y36(d.d))},ObjectRelatedCardFooter.ɵcmp=i.Xpm({type:ObjectRelatedCardFooter,selectors:[["object-related-card-footer"]],inputs:{componentconfig:"componentconfig"},decls:9,vars:3,consts:[[1,"slds-card__footer"],[1,"slds-grid","slds-grid_vertical-align-center"],[1,"slds-size--1-of-3","slds-text-align--left"],["class","slds-grid slds-grid--vertical-align-center",4,"ngIf"],[1,"slds-size--1-of-3","slds-text-align_center"],["href","javascript:void(0);",3,"click",4,"ngIf"],[1,"slds-size--1-of-3","slds-text-align--right"],[1,"slds-button","slds-button_icon",3,"disabled","click"],["icon","refresh"],[1,"slds-grid","slds-grid--vertical-align-center"],["icon","jump_to_left"],["icon","chevronleft"],[1,"slds-p-horizontal--xx-small","slds-grid","slds-grid--vertical-align-center","slds-gutters_direct-xxx-small"],["label","LBL_PAGE",1,"slds-col"],[1,"slds-col"],["label","LBL_OF",1,"slds-col"],["icon","chevronright"],["icon","jump_to_right"],["href","javascript:void(0);",3,"click"],["label","LBL_VIEWALL"]],template:function(e,t){1&e&&(i.TgZ(0,"footer",0)(1,"div",1)(2,"div",2),i.YNc(3,m,16,6,"div",3),i.qZA(),i.TgZ(4,"div",4),i.YNc(5,h,2,0,"a",5),i.qZA(),i.TgZ(6,"div",6)(7,"button",7),i.NdJ("click",(function(){return t.reload()})),i._UZ(8,"system-button-icon",8),i.qZA()()()()),2&e&&(i.xp6(3),i.Q6J("ngIf",t.relatedmodels.count>t.relatedmodels.loaditems&&t.canViewAll),i.xp6(2),i.Q6J("ngIf",t.canViewAll),i.xp6(2),i.Q6J("disabled",t.paginating))},dependencies:[r.O5,c.J,u._],encapsulation:2}),ObjectRelatedCardFooter})()},1360:(e,t,s)=>{"use strict";s.d(t,{g:()=>y});var i=s(7340),n=s(1571),l=s(5329),o=s(6040),a=s(5710),d=s(4154),r=s(6895),c=s(2656),u=s(4561),m=s(8859),h=s(8861);function g(e,t){if(1&e&&(n.TgZ(0,"span",12),n._uU(1),n.qZA()),2&e){const e=n.oxw();n.xp6(1),n.hij("(",e.relatedmodels.count,")")}}function p(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"system-utility-icon",13),n.NdJ("click",(function(t){n.CHM(e);const s=n.oxw();return n.KtG(s.toggleOpen(t))})),n.qZA()}if(2&e){const e=n.oxw();n.Q6J("@animateicon",e.isopen?"open":"closed")}}function f(e,t){if(1&e&&n._UZ(0,"object-action-container",14),2&e){const e=n.oxw();n.Q6J("actionset",e.actionset)}}function b(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"div",8)(1,"button",15),n.NdJ("click",(function(){n.CHM(e);const t=n.oxw();return n.KtG(t.reload())})),n._UZ(2,"system-button-icon",16),n.qZA()()}}const _=["*"];let y=(()=>{class ObjectRelatedCardHeader{constructor(e,t,s,i){this.language=e,this.relatedmodels=t,this.model=s,this.metadata=i,this.componentconfig={},this.isopen=!0}ngOnInit(){this.componentconfig.collapsed&&setTimeout((()=>this.isopen=!this.componentconfig.collapsed))}get panelTitle(){return this.componentconfig.title?this.language.getLabel(this.componentconfig.title):this.relatedmodels._linkName&&this.metadata.fieldDefs[this.relatedmodels.module][this.relatedmodels._linkName]&&this.metadata.fieldDefs[this.relatedmodels.module][this.relatedmodels._linkName].vname?this.language.getLabel(this.metadata.fieldDefs[this.relatedmodels.module][this.relatedmodels._linkName].vname):this.language.getModuleName(this.module)}get actionset(){return this.componentconfig.actionset}get module(){return this.componentconfig.object}toggleOpen(e){e.stopPropagation(),this.isopen=!this.isopen}reload(){this.relatedmodels.getData()}get isEditable(){let e=""!=this.relatedmodels.linkName?this.relatedmodels.linkName:this.relatedmodels.relatedModule?.toLowerCase(),t=this.model.getFieldAccess(e);return!t||t>2}}return ObjectRelatedCardHeader.ɵfac=function(e){return new(e||ObjectRelatedCardHeader)(n.Y36(l.d),n.Y36(o.j),n.Y36(a.o),n.Y36(d.Pu))},ObjectRelatedCardHeader.ɵcmp=n.Xpm({type:ObjectRelatedCardHeader,selectors:[["object-related-card-header"]],inputs:{componentconfig:"componentconfig"},ngContentSelectors:_,decls:15,vars:7,consts:[[1,"slds-card__header","slds-grid","slds-grid--vertical-align-center"],[1,"slds-media","slds-media--center","slds-has-flexi-truncate"],[3,"module","size"],[1,"slds-media__body","slds-truncate","slds-grid","slds-grid--vertical-align-center"],["href","javascript:void(0);",1,"slds-text-link--reset"],[1,"slds-text-heading--small"],["class","slds-p-left--xx-small",4,"ngIf"],["class","slds-m-horizontal--xx-small","icon","up","size","x-small",3,"click",4,"ngIf"],[1,"slds-m-left--x-small"],["ngContent",""],["class","slds-m-left--x-small",3,"actionset",4,"ngIf"],["class","slds-m-left--x-small",4,"ngIf"],[1,"slds-p-left--xx-small"],["icon","up","size","x-small",1,"slds-m-horizontal--xx-small",3,"click"],[1,"slds-m-left--x-small",3,"actionset"],[1,"slds-button","slds-button_icon","x-slds-m-right--medium",3,"click"],["icon","refresh"]],template:function(e,t){1&e&&(n.F$t(),n.TgZ(0,"div",0)(1,"header",1),n._UZ(2,"system-icon",2),n.TgZ(3,"div",3)(4,"h2")(5,"a",4)(6,"span",5),n._uU(7),n.YNc(8,g,2,1,"span",6),n.qZA()()(),n.YNc(9,p,1,1,"system-utility-icon",7),n.qZA()(),n.TgZ(10,"div",8,9),n.Hsn(12),n.qZA(),n.YNc(13,f,1,1,"object-action-container",10),n.YNc(14,b,3,0,"div",11),n.qZA()),2&e&&(n.xp6(2),n.Q6J("module",t.module)("size","small"),n.xp6(5),n.hij(" ",t.panelTitle,""),n.xp6(1),n.Q6J("ngIf",!t.relatedmodels.isloading),n.xp6(1),n.Q6J("ngIf",t.relatedmodels.count>0),n.xp6(4),n.Q6J("ngIf",t.actionset&&t.isEditable),n.xp6(1),n.Q6J("ngIf",!t.relatedmodels.isloading&&0===t.relatedmodels.count))},dependencies:[r.O5,c.J,u.f,m.r,h.S],encapsulation:2,data:{animation:[(0,i.X$)("animateicon",[(0,i.SB)("open",(0,i.oB)({transform:"scale(1, 1)"})),(0,i.SB)("closed",(0,i.oB)({transform:"scale(1, -1)"})),(0,i.eR)("open => closed",[(0,i.jt)(".5s")]),(0,i.eR)("closed => open",[(0,i.jt)(".5s")])])]}}),ObjectRelatedCardHeader})()},3249:(e,t,s)=>{"use strict";s.d(t,{s:()=>g});var i=s(6040),n=s(727),l=s(1571),o=s(5329),a=s(4154),d=s(5710),r=s(6895),c=s(4567),u=s(7588);function m(e,t){if(1&e&&(l.TgZ(0,"div",2),l._UZ(1,"object-relatedlist-table",3),l.qZA()),2&e){const e=l.oxw();l.xp6(1),l.Q6J("listfields",e.listfields)("editable",e.editable)("editcomponentset",e.editcomponentset)("hideActions",e.hideactions)}}function h(e,t){1&e&&l._UZ(0,"system-illustration-no-access")}let g=(()=>{class ObjectRelatedList{constructor(e,t,s,i,l){this.language=e,this.metadata=t,this.relatedmodels=s,this.model=i,this.cdref=l,this.componentconfig={},this.listfields=[],this.editcomponentset="",this.hideactions=!1,this.loadsubscription=new n.w0,this.loaded=!1}get aclAccess(){let e=""!=this.relatedmodels.linkName?this.relatedmodels.linkName:this.relatedmodels.relatedModule?.toLowerCase();return(this.metadata.checkModuleAcl(this.relatedmodels.relatedModule,"listrelated")||this.metadata.checkModuleAcl(this.relatedmodels.relatedModule,"list"))&&this.model.checkAccess("detail")&&this.model.checkFieldAccess(e)}ngOnInit(){this.loadConfig(),this.initializeRelatedModelService(),this.loadsubscription=this.model.data$.subscribe((e=>{this.loadRelated()}))}loadConfig(){let e=this.componentconfig.fieldset;this.listfields=this.metadata.getFieldSetFields(e),this.componentconfig.editcomponentset&&(this.editcomponentset=this.componentconfig.editcomponentset),this.hideactions=!!this.componentconfig.hideactions}initializeRelatedModelService(){this.relatedmodels.module=this.model.module,this.relatedmodels.id=this.model.id,this.relatedmodels.model=this.model,this.relatedmodels.relatedModule=this.componentconfig.object,this.componentconfig.linkEndPoint?this.relatedmodels.linkEndPoint=this.componentconfig.linkEndPoint:this.componentconfig.link&&(this.relatedmodels.linkName=this.componentconfig.link),this.componentconfig.sequencefield?this.relatedmodels.sequencefield=this.componentconfig.sequencefield:this.relatedmodels._linkName&&this.model.fields[this.relatedmodels._linkName]&&this.model.fields[this.relatedmodels._linkName].sequence_field&&(this.relatedmodels.sequencefield=this.model.fields[this.relatedmodels._linkName].sequence_field),this.componentconfig.sortfield&&(this.relatedmodels.sort.sortfield=this.componentconfig.sortfield,this.relatedmodels.sort.sortdirection=this.componentconfig.sortdirection?this.componentconfig.sortdirection:"ASC"),this.componentconfig.items&&(this.relatedmodels.loaditems=this.componentconfig.items),this.componentconfig.modulefilter&&(this.relatedmodels.modulefilter=this.componentconfig.modulefilter),this.relatedmodels.saveToLinkOnly=!!this.componentconfig.saveToLinkOnly}checkModelState(){return!(this.componentconfig.requiredmodelstate&&(_.isEmpty(this.model.data)||!this.model.checkModelState(this.componentconfig.requiredmodelstate)))}loadRelated(){this.loaded||!this.aclAccess||this.componentconfig.requiredmodelstate&&!this.checkModelState()||(this.loaded=!0,this.loadsubscription.unsubscribe(),this.relatedmodels.getData())}get editable(){try{return this.componentconfig.editable&&this.model.checkAccess("edit")}catch(e){return!1}}addSelectedItems(e){this.relatedmodels.addItems(e)}get listitemactionset(){return this.componentconfig&&this.componentconfig.listitemactionset?this.componentconfig.listitemactionset:""}}return ObjectRelatedList.ɵfac=function(e){return new(e||ObjectRelatedList)(l.Y36(o.d),l.Y36(a.Pu),l.Y36(i.j),l.Y36(d.o),l.Y36(l.sBO))},ObjectRelatedList.ɵcmp=l.Xpm({type:ObjectRelatedList,selectors:[["object-related-list"]],inputs:{componentconfig:"componentconfig"},features:[l._Bn([i.j])],decls:3,vars:2,consts:[["class","slds-scrollable",4,"ngIf","ngIfElse"],["noaccess",""],[1,"slds-scrollable"],[3,"listfields","editable","editcomponentset","hideActions"]],template:function(e,t){if(1&e&&(l.YNc(0,m,2,4,"div",0),l.YNc(1,h,1,0,"ng-template",null,1,l.W1O)),2&e){const e=l.MAs(2);l.Q6J("ngIf",t.aclAccess)("ngIfElse",e)}},dependencies:[r.O5,c.s,u.K],encapsulation:2}),ObjectRelatedList})()},423:(e,t,s)=>{"use strict";s.d(t,{X:()=>x});var i=s(5710),n=s(2294),l=s(1571),o=s(4154),a=s(3917),d=s(6040),r=s(7774),c=s(5329),u=s(6559),m=s(4044),h=s(6895),g=s(3634),p=s(8859),f=s(586);const b=["object-related-list-item",""];function _(e,t){if(1&e&&(l.TgZ(0,"td",7),l._UZ(1,"field-container",8),l.qZA()),2&e){const e=t.$implicit,s=l.oxw(2);l.uIk("data-label",s.language.getFieldDisplayName(s.model.module,e.field)),l.xp6(1),l.Q6J("field",e.field)("fieldconfig",e.fieldconfig)("fielddisplayclass","slds-truncate")}}function y(e,t){if(1&e&&(l.TgZ(0,"td",9),l._UZ(1,"object-action-menu",10),l.qZA()),2&e){const e=l.oxw(2);l.xp6(1),l.Q6J("buttonsize","x-small")("actionset",e.actionset)}}function v(e,t){if(1&e&&(l.ynx(0),l.YNc(1,_,2,4,"td",5),l.YNc(2,y,2,2,"td",6),l.BQk()),2&e){const e=l.oxw();l.xp6(1),l.Q6J("ngForOf",e.listfields),l.xp6(1),l.Q6J("ngIf",!e.hideActions)}}let x=(()=>{class ObjectRelatedListItem{constructor(e,t,s,i,n,l,o,a,d){this.metadata=e,this.footer=t,this.model=s,this.relatedmodels=i,this.view=n,this.router=l,this.language=o,this.layout=a,this.modalservice=d,this.listfields=[],this.listitem={},this.module="",this.editable=!1,this.editcomponentset="",this.hideActions=!1,this.customEditActions=[],this.customActions=[],this.expanded=!1,this.componentconfig={}}ngOnInit(){this.view.displayLabels=!1,this.view.isEditable=this.editable,this.model.module=this.module,this.model.id=this.listitem.id,this.model.setData(this.listitem),this.componentconfig=this.metadata.getComponentConfig("ObjectRelatedListItem",this.model.module)}get actionset(){return this.listitemactionset?this.listitemactionset:this.componentconfig.actionset}navigateDetail(){this.router.navigate(["/module/"+this.model.module+"/"+this.model.id])}handleAction(e){switch(e){case"canceledit":this.model.cancelEdit(),this.view.setViewMode();break;case"edit":this.metadata.addComponentDirect("ObjectEditModalWReference",this.footer.footercontainer).subscribe((e=>{e.instance.model.module=this.module,e.instance.model.id=this.model.id,e.instance.model.setData(this.model.data,!1),this.editcomponentset&&""!=this.editcomponentset&&(e.instance.componentSet=this.editcomponentset),this.model.startEdit(),e.instance.modalAction$.subscribe((t=>{!1===t?(e.destroy(),this.model.cancelEdit()):(this.relatedmodels.setItem(this.model.data),this.model.endEdit(),e.destroy())}))}));break;case"remove":this.modalservice.confirm(this.language.getLabel("QST_REMOVE_ENTRY"),this.language.getLabel("QST_REMOVE_ENTRY",null,"short")).subscribe((e=>{e&&this.relatedmodels.deleteItem(this.model.id)}));break;case"saverelated":if(this.model.validate()){let e=this.model.getDirtyFields();e.date_modified=this.model.getField("date_modified"),e.id=this.model.id,this.relatedmodels.setItem(e),this.model.endEdit(),this.view.setViewMode()}}}toggleexpanded(e){e.stopPropagation(),this.expanded=!this.expanded}get isexpanded(){return"small"!=this.layout.screenwidth||this.expanded}get expandicon(){return this.expanded?"chevronup":"chevrondown"}}return ObjectRelatedListItem.ɵfac=function(e){return new(e||ObjectRelatedListItem)(l.Y36(o.Pu),l.Y36(a.M),l.Y36(i.o),l.Y36(d.j),l.Y36(n.e),l.Y36(r.F0),l.Y36(c.d),l.Y36(u.b),l.Y36(m.o))},ObjectRelatedListItem.ɵcmp=l.Xpm({type:ObjectRelatedListItem,selectors:[["","object-related-list-item",""]],inputs:{listfields:"listfields",listitem:"listitem",module:"module",editable:"editable",editcomponentset:"editcomponentset",listitemactionset:"listitemactionset",hideActions:"hideActions"},features:[l._Bn([i.o,n.e])],attrs:b,decls:6,vars:3,consts:[[1,"slds-hide--medium"],[1,"slds-grid","slds-grid--vertical-align-center","slds-p-around--xx-small"],[1,"slds-text-align--left","slds-truncate","slds-grow",3,"click"],["size","xx-small",3,"icon","click"],[4,"ngIf"],["scope","row",4,"ngFor","ngForOf"],["role","gridcell","class","slds-cell-shrink",4,"ngIf"],["scope","row"],[3,"field","fieldconfig","fielddisplayclass"],["role","gridcell",1,"slds-cell-shrink"],[3,"buttonsize","actionset"]],template:function(e,t){1&e&&(l.TgZ(0,"td",0)(1,"div",1)(2,"div",2),l.NdJ("click",(function(){return t.navigateDetail()})),l._uU(3),l.qZA(),l.TgZ(4,"system-utility-icon",3),l.NdJ("click",(function(e){return t.toggleexpanded(e)})),l.qZA()()(),l.YNc(5,v,3,2,"ng-container",4)),2&e&&(l.xp6(3),l.Oqu(t.model.data.summary_text),l.xp6(1),l.Q6J("icon",t.expandicon),l.xp6(1),l.Q6J("ngIf",t.isexpanded))},dependencies:[h.sg,h.O5,g.j,p.r,f.g],encapsulation:2}),ObjectRelatedListItem})()},3129:(e,t,s)=>{"use strict";s.d(t,{Q:()=>f});var i=s(5710),n=s(2294),l=s(1571),o=s(7774),a=s(5329),d=s(4154),r=s(6895),c=s(2563),u=s(3634),m=s(8859),h=s(586);const g=["object-related-list-sequenced-item",""];function p(e,t){if(1&e&&(l.TgZ(0,"td",0),l._UZ(1,"field-container",5),l.qZA()),2&e){const e=t.$implicit;l.xp6(1),l.Q6J("field",e.field)("fieldconfig",e.fieldconfig)("fielddisplayclass","slds-truncate")}}let f=(()=>{class ObjectRelatedListSequencedItem{constructor(e,t,s,i,n){this.model=e,this.view=t,this.router=s,this.language=i,this.metadata=n,this.listfields=[],this.listitem={},this.module="",this.componentconfig={},this.view.isEditable=!1}get actionset(){return this.listItemActionset?this.listItemActionset:this.componentconfig.actionset}ngOnInit(){this.view.displayLabels=!1,this.model.module=this.module,this.model.id=this.listitem.id,this.model.setData(this.listitem),this.componentconfig=this.metadata.getComponentConfig("ObjectRelatedListSequencedItem",this.model.module)}navigateDetail(){this.router.navigate(["/module/"+this.model.module+"/"+this.model.id])}}return ObjectRelatedListSequencedItem.ɵfac=function(e){return new(e||ObjectRelatedListSequencedItem)(l.Y36(i.o),l.Y36(n.e),l.Y36(o.F0),l.Y36(a.d),l.Y36(d.Pu))},ObjectRelatedListSequencedItem.ɵcmp=l.Xpm({type:ObjectRelatedListSequencedItem,selectors:[["","object-related-list-sequenced-item",""]],inputs:{listfields:"listfields",listitem:"listitem",module:"module",listItemActionset:"listItemActionset"},features:[l._Bn([i.o,n.e])],attrs:g,decls:5,vars:5,consts:[["scope","row"],["cdkDragHandle","",2,"cursor","move",3,"icon","size"],["scope","row",4,"ngFor","ngForOf"],["role","gridcell","data-label","Actions",1,"slds-cell-shrink"],[3,"buttonsize","actionset"],[3,"field","fieldconfig","fielddisplayclass"]],template:function(e,t){1&e&&(l.TgZ(0,"td",0),l._UZ(1,"system-utility-icon",1),l.qZA(),l.YNc(2,p,2,3,"td",2),l.TgZ(3,"td",3),l._UZ(4,"object-action-menu",4),l.qZA()),2&e&&(l.xp6(1),l.Q6J("icon","rows")("size","x-small"),l.xp6(1),l.Q6J("ngForOf",t.listfields),l.xp6(2),l.Q6J("buttonsize","x-small")("actionset",t.actionset))},dependencies:[r.sg,c.Bh,u.j,m.r,h.g],encapsulation:2}),ObjectRelatedListSequencedItem})()},7588:(e,t,s)=>{"use strict";s.d(t,{K:()=>N});var i=s(1571),n=s(5329),l=s(4154),o=s(6040),a=s(5710),d=s(6559),r=s(4505),c=s(2349),u=s(6895),m=s(2563),h=s(4567),g=s(7674),p=s(2161),f=s(8859),b=s(423),_=s(3129);function y(e,t){1&e&&i._UZ(0,"th",7)}function v(e,t){if(1&e&&(i.TgZ(0,"th",9)(1,"span",10),i._UZ(2,"system-label-fieldname",11),i.qZA()()),2&e){const e=t.$implicit,s=i.oxw(3);i.Q6J("ngStyle",s.getColumnStyle(e)),i.xp6(2),i.Q6J("module",s.module)("field",e.field)("fieldconfig",e.fieldconfig)}}function x(e,t){if(1&e&&(i.ynx(0),i.YNc(1,v,3,4,"th",8),i.BQk()),2&e){const e=i.oxw(2);i.xp6(1),i.Q6J("ngForOf",e.listfields)}}function Z(e,t){if(1&e&&i._UZ(0,"system-utility-icon",17),2&e){const e=i.oxw().$implicit,t=i.oxw(3);i.Q6J("icon",t.getSortIcon(e))("size","xx-small")}}function w(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"th",13)(1,"a",14),i.NdJ("click",(function(){const t=i.CHM(e).$implicit,s=i.oxw(3);return i.KtG(s.setSortField(t))})),i.TgZ(2,"span",15),i._UZ(3,"system-label-fieldname",11),i.qZA(),i.YNc(4,Z,1,2,"system-utility-icon",16),i.qZA()()}if(2&e){const e=t.$implicit,s=i.oxw(3);i.Q6J("ngStyle",s.getColumnStyle(e)),i.xp6(3),i.Q6J("module",s.module)("field",e.field)("fieldconfig",e.fieldconfig),i.xp6(1),i.Q6J("ngIf",s.isSortable(e))}}function T(e,t){if(1&e&&(i.ynx(0),i.YNc(1,w,5,5,"th",12),i.BQk()),2&e){const e=i.oxw(2);i.xp6(1),i.Q6J("ngForOf",e.listfields)}}function C(e,t){1&e&&i._UZ(0,"th",7)}function A(e,t){if(1&e&&i._UZ(0,"tr",19),2&e){const e=t.$implicit,s=i.oxw(3);i.Q6J("module",s.module)("editable",s.editable)("editcomponentset",s.editcomponentset)("listfields",s.listfields)("listitem",e)("hideActions",s.hideActions)("listitemactionset",s.listitemactionset)}}function k(e,t){if(1&e&&(i.ynx(0),i.TgZ(1,"tbody"),i.YNc(2,A,1,7,"tr",18),i.qZA(),i.BQk()),2&e){const e=i.oxw(2);i.xp6(2),i.Q6J("ngForOf",e.relatedmodels.items)}}function L(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"tr",22),i.NdJ("cdkDragStarted",(function(t){i.CHM(e);const s=i.oxw(3);return i.KtG(s.dragStarted(t))}))("cdkDragEnded",(function(t){i.CHM(e);const s=i.oxw(3);return i.KtG(s.dragEnded(t))})),i.qZA()}if(2&e){const e=t.$implicit,s=i.oxw(3);i.Q6J("module",s.module)("listfields",s.listfields)("listitem",e)("listItemActionset",s.listitemactionset)}}function M(e,t){if(1&e){const e=i.EpF();i.ynx(0),i.TgZ(1,"tbody",20),i.NdJ("cdkDropListDropped",(function(t){i.CHM(e);const s=i.oxw(2);return i.KtG(s.drop(t))})),i.YNc(2,L,1,4,"tr",21),i.qZA(),i.BQk()}if(2&e){const e=i.oxw(2);i.xp6(2),i.Q6J("ngForOf",e.relatedmodels.items)("ngForTrackBy",e.getIdOfRow)}}function S(e,t){if(1&e&&i._UZ(0,"tbody",23),2&e){const e=i.oxw(2);i.Q6J("columns",e.listfields.length)("select",e.isSequenced)("tools",!e.hideActions)}}const I=function(e,t){return{"slds-table--bordered":e,"slds-no-row-hover":t}};function O(e,t){if(1&e&&(i.TgZ(0,"table",2)(1,"thead")(2,"tr",3),i.YNc(3,y,1,0,"th",4),i.YNc(4,x,2,1,"ng-container",5),i.YNc(5,T,2,1,"ng-container",5),i.YNc(6,C,1,0,"th",4),i.qZA()(),i.YNc(7,k,3,1,"ng-container",5),i.YNc(8,M,3,2,"ng-container",5),i.YNc(9,S,1,3,"tbody",6),i.qZA()),2&e){const e=i.oxw();i.Q6J("ngClass",i.WLB(8,I,!e.isSmall,e.nowDragging)),i.xp6(3),i.Q6J("ngIf",e.isSequenced),i.xp6(1),i.Q6J("ngIf",e.isSequenced),i.xp6(1),i.Q6J("ngIf",!e.isSequenced),i.xp6(1),i.Q6J("ngIf",!e.hideActions),i.xp6(1),i.Q6J("ngIf",!e.isSequenced),i.xp6(1),i.Q6J("ngIf",e.isSequenced),i.xp6(1),i.Q6J("ngIf",e.isloading)}}function J(e,t){1&e&&i._UZ(0,"system-illustration-no-access")}let N=(()=>{class ObjectRelatedlistTable{constructor(e,t,s,i,n,l,o){this.language=e,this.metadata=t,this.relatedmodels=s,this.model=i,this.layout=n,this.backend=l,this.logger=o,this.listfields=[],this.editable=!1,this.editcomponentset="",this.sequencefield=null,this.hideActions=!1,this.noAccess=!1,this.nowDragging=!1,this.isSequenced=!1}ngOnInit(){this.metadata.checkModuleAcl(this.relatedmodels.relatedModule,"listrelated")||this.metadata.checkModuleAcl(this.relatedmodels.relatedModule,"list")?(this.metadata.fieldDefs[this.model.module][this.relatedmodels._linkName]||this.relatedmodels.linkEndPoint?!this.sequencefield&&this.metadata.fieldDefs[this.model.module][this.relatedmodels._linkName]?.sequence_field&&(this.sequencefield=this.metadata.fieldDefs[this.model.module][this.relatedmodels._linkName].sequence_field):this.logger.error('Missing link or wrong link name ("'+this.relatedmodels._linkName+'")!'),this.sequencefield&&(this.isSequenced=!0)):this.noAccess=!0}get isloading(){return this.relatedmodels.isloading}get isSmall(){return"small"===this.layout.screenwidth}get module(){return this.relatedmodels.relatedModule}getColumnStyle(e){return e.fieldconfig?.widthdimension&&e.fieldconfig?.width?{width:e.fieldconfig?.width+e.fieldconfig.widthdimension}:{}}isSortable(e){return!this.relatedmodels.sortBySequencefield&&!0===e.fieldconfig.sortable}setSortField(e){this.relatedmodels.sortBySequencefield||this.isSortable(e)&&(this.relatedmodels.sortfield=e.fieldconfig&&e.fieldconfig.sortfield?e.fieldconfig.sortfield:e.field)}getSortIcon(e){return this.relatedmodels.sortfield==(e.fieldconfig&&e.fieldconfig.sortfield?e.fieldconfig.sortfield:e.field)?"ASC"===this.relatedmodels.sort.sortdirection?"arrowdown":"arrowup":""}getIdOfRow(e,t){return t.id}drop(e){let t=this.relatedmodels.items.splice(e.previousIndex,1);this.relatedmodels.items.splice(e.currentIndex,0,t[0]);let s=[],i=0;for(let e of this.relatedmodels.items)e[this.sequencefield]=i,s.push({id:e.id,[this.sequencefield]:i}),i++;this.relatedmodels.updateItems(s)}dragStarted(e){this.nowDragging=!0,e.source.element.nativeElement.classList.add("slds-is-selected")}dragEnded(e){this.nowDragging=!1,e.source.element.nativeElement.classList.remove("slds-is-selected")}}return ObjectRelatedlistTable.ɵfac=function(e){return new(e||ObjectRelatedlistTable)(i.Y36(n.d),i.Y36(l.Pu),i.Y36(o.j),i.Y36(a.o),i.Y36(d.b),i.Y36(r.y),i.Y36(c.M))},ObjectRelatedlistTable.ɵcmp=i.Xpm({type:ObjectRelatedlistTable,selectors:[["object-relatedlist-table"]],inputs:{listfields:"listfields",editable:"editable",editcomponentset:"editcomponentset",sequencefield:"sequencefield",hideActions:"hideActions",listitemactionset:"listitemactionset"},decls:3,vars:2,consts:[["class","slds-table slds-table--fixed-layout slds-table--header-fixed slds-max-medium-table_stacked-horizontal",3,"ngClass",4,"ngIf","ngIfElse"],["noaccess",""],[1,"slds-table","slds-table--fixed-layout","slds-table--header-fixed","slds-max-medium-table_stacked-horizontal",3,"ngClass"],[1,"slds-text-title--caps"],["class","slds-cell-shrink","scope","col",4,"ngIf"],[4,"ngIf"],["system-table-stencils","",3,"columns","select","tools",4,"ngIf"],["scope","col",1,"slds-cell-shrink"],["class","slds-resizable","scope","col",3,"ngStyle",4,"ngFor","ngForOf"],["scope","col",1,"slds-resizable",3,"ngStyle"],[1,"slds-th__action","slds-truncate"],["length","short",3,"module","field","fieldconfig"],["class","slds-is-sortable slds-resizable","scope","col",3,"ngStyle",4,"ngFor","ngForOf"],["scope","col",1,"slds-is-sortable","slds-resizable",3,"ngStyle"],["href","javascript:void(0);",1,"slds-th__action","slds-text-link--reset",3,"click"],[1,"slds-truncate"],[3,"icon","size",4,"ngIf"],[3,"icon","size"],["object-related-list-item","","class","slds-hint-parent",3,"module","editable","editcomponentset","listfields","listitem","hideActions","listitemactionset",4,"ngFor","ngForOf"],["object-related-list-item","",1,"slds-hint-parent",3,"module","editable","editcomponentset","listfields","listitem","hideActions","listitemactionset"],["cdkDropList","",1,"dragboundary",3,"cdkDropListDropped"],["object-related-list-sequenced-item","","cdkDrag","","cdkDragBoundary",".dragboundary","class","slds-hint-parent",3,"module","listfields","listitem","listItemActionset","cdkDragStarted","cdkDragEnded",4,"ngFor","ngForOf","ngForTrackBy"],["object-related-list-sequenced-item","","cdkDrag","","cdkDragBoundary",".dragboundary",1,"slds-hint-parent",3,"module","listfields","listitem","listItemActionset","cdkDragStarted","cdkDragEnded"],["system-table-stencils","",3,"columns","select","tools"]],template:function(e,t){if(1&e&&(i.YNc(0,O,10,11,"table",0),i.YNc(1,J,1,0,"ng-template",null,1,i.W1O)),2&e){const e=i.MAs(2);i.Q6J("ngIf",!t.noAccess)("ngIfElse",e)}},dependencies:[u.mk,u.sg,u.O5,u.PC,m.Wj,m.Zt,h.s,g.h,p.x,f.r,b.X,_.Q],encapsulation:2}),ObjectRelatedlistTable})()},8709:(e,t,s)=>{"use strict";s.d(t,{T:()=>b});var i=s(727),n=s(1571),l=s(5329),o=s(4154),a=s(5710),d=s(2057),r=s(2422),c=s(6895),u=s(2656),m=s(4114),h=s(3463);function g(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"system-input-date-picker",12),n.NdJ("datePicked",(function(t){n.CHM(e);const s=n.oxw();return n.KtG(s.setReminder(t))})),n.qZA()}if(2&e){const e=n.oxw();n.Q6J("setDate",e.reminderDate)}}const p=function(e){return{"slds-is-open":e}},f=function(e,t){return{"slds-not-selected":e,"slds-is-selected":t}};let b=(()=>{class ObjectReminderButton{constructor(e,t,s,n,l,o,a){this.language=e,this.metadata=t,this.model=s,this.renderer=n,this.elementRef=l,this.reminder=o,this.userpreferences=a,this.showDialog=!1,this.reminderDate=new moment,this.hasReminder=!1,this.subscriptions=new i.w0,this.subscriptions.add(this.reminder.changed$.subscribe((e=>{this.loadReminder()}))),this.loadReminder()}ngOnDestroy(){this.subscriptions.unsubscribe()}loadReminder(){let e=this.reminder.getReminder(this.model.module,this.model.id);!1!==e?(this.hasReminder=!0,this.reminderDate=new moment(e)):this.hasReminder=!1}toggleDatePicker(){this.showDialog=!this.showDialog,this.showDialog?this.clickListener=this.renderer.listen("document","click",(e=>this.onClick(e))):this.clickListener&&this.clickListener()}onClick(e){this.elementRef.nativeElement.contains(e.target)||(this.showDialog=!1)}get isEditing(){return this.model.isEditing}clearReminder(){this.reminder.deleteReminder(this.model.module,this.model.id),this.hasReminder=!1}setReminder(e){this.showDialog=!1,this.hasReminder=!0,this.reminderDate=new moment(e),this.reminder.setReminder(this.model,this.reminderDate)}getReminderDate(){return this.reminderDate.format(this.userpreferences.getDateFormat())}}return ObjectReminderButton.ɵfac=function(e){return new(e||ObjectReminderButton)(n.Y36(l.d),n.Y36(o.Pu),n.Y36(a.o),n.Y36(n.Qsj),n.Y36(n.SBq),n.Y36(d.U),n.Y36(r.z))},ObjectReminderButton.ɵcmp=n.Xpm({type:ObjectReminderButton,selectors:[["object-reminder-button"]],decls:14,vars:10,consts:[[1,"slds-form-element","slds-dropdown-trigger","slds-dropdown-trigger_click",3,"ngClass"],[1,"slds-button","slds-button_stateful","slds-button--neutral","slds-m-horizontal--xxx-small",3,"ngClass"],[1,"slds-text-not-selected",3,"click"],["icon","add",1,"slds-p-right--xx-small"],["label","LBL_REMINDER"],[1,"slds-text-selected"],["icon","check",1,"slds-p-right--xx-small"],[1,"slds-text-selected-focus"],["icon","close",1,"slds-p-right--xx-small",3,"click"],[3,"click"],["role","dialog",1,"slds-datepicker","slds-dropdown","slds-dropdown_right"],[3,"setDate","datePicked",4,"ngIf"],[3,"setDate","datePicked"]],template:function(e,t){1&e&&(n.TgZ(0,"div",0)(1,"a",1)(2,"span",2),n.NdJ("click",(function(){return t.toggleDatePicker()})),n._UZ(3,"system-button-icon",3)(4,"system-label",4),n.qZA(),n.TgZ(5,"span",5),n._UZ(6,"system-button-icon",6),n._uU(7),n.qZA(),n.TgZ(8,"span",7)(9,"system-button-icon",8),n.NdJ("click",(function(){return t.clearReminder()})),n.qZA(),n.TgZ(10,"span",9),n.NdJ("click",(function(){return t.toggleDatePicker()})),n._uU(11),n.qZA()()(),n.TgZ(12,"div",10),n.YNc(13,g,1,1,"system-input-date-picker",11),n.qZA()()),2&e&&(n.Q6J("ngClass",n.VKq(5,p,t.showDialog)),n.xp6(1),n.Q6J("ngClass",n.WLB(7,f,!t.hasReminder,t.hasReminder)),n.xp6(6),n.hij("",t.getReminderDate()," "),n.xp6(4),n.Oqu(t.getReminderDate()),n.xp6(2),n.Q6J("ngIf",t.showDialog))},dependencies:[c.mk,c.O5,u.J,m.e,h._],encapsulation:2}),ObjectReminderButton})()},6409:(e,t,s)=>{"use strict";s.d(t,{n:()=>p});var i=s(8017),n=s(1571),l=s(5329),o=s(4154),a=s(5710),d=s(4044),r=s(7774),c=s(6895),u=s(2656),m=s(5681);function h(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"li",10),n.NdJ("click",(function(){const t=n.CHM(e).$implicit,s=n.oxw(2);return n.KtG(s.propagateclick(t.id))})),n.TgZ(1,"a",11),n._UZ(2,"object-status-network-button-item",3),n.qZA()()}if(2&e){const e=t.$implicit;n.xp6(2),n.Q6J("item",e)}}function g(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"div",1)(1,"button",2),n.NdJ("click",(function(){n.CHM(e);const t=n.oxw();return n.KtG(t.propagateclick(t.primaryItem.id))})),n._UZ(2,"object-status-network-button-item",3),n.qZA(),n.TgZ(3,"div",4)(4,"button",5),n._UZ(5,"system-button-icon",6),n.qZA(),n.TgZ(6,"div",7)(7,"ul",8),n.YNc(8,h,3,1,"li",9),n.qZA()()()()}if(2&e){const e=n.oxw();n.xp6(1),n.Q6J("disabled",e.isDisabled),n.xp6(1),n.Q6J("item",e.primaryItem),n.xp6(2),n.Q6J("disabled",e.isDisabled||0==e.secondaryItems.length),n.xp6(4),n.Q6J("ngForOf",e.secondaryItems)}}let p=(()=>{class ObjectStatusNetworkButton{constructor(e,t,s,i,n,l,o){this.language=e,this.metadata=t,this.model=s,this.modal=i,this.router=n,this.renderer=l,this.elementRef=o,this.statusField="",this.statusNetwork=[]}get isDisabled(){return this.model.isEditing||!this.model.checkAccess("edit")}get isManaged(){return""!=this.statusField&&!1!==this.primaryItem&&!this.isDisabled}get primaryItem(){for(let e of this.statusNetwork)if(e.status_from==this.model.getField(this.statusField)&&(!e.required_model_state||this.model.checkModelState(e.required_model_state)))return e;return!1}get secondaryItems(){let e=[],t=!1;for(let s of this.statusNetwork)s.status_from!=this.model.getField(this.statusField)||s.required_model_state&&!this.model.checkModelState(s.required_model_state)||(t&&e.push(s),t||(t=!0));return e}ngOnInit(){let e=this.metadata.checkStatusManaged(this.model.module);0!=e&&(this.statusField=e.statusField,this.statusNetwork=e.statusNetwork)}propagateclick(e){this.buttonitemlist.some((t=>{if(t.id==e)return t.setStatus(this.statusField),!0}))}}return ObjectStatusNetworkButton.ɵfac=function(e){return new(e||ObjectStatusNetworkButton)(n.Y36(l.d),n.Y36(o.Pu),n.Y36(a.o),n.Y36(d.o),n.Y36(r.F0),n.Y36(n.Qsj),n.Y36(n.SBq))},ObjectStatusNetworkButton.ɵcmp=n.Xpm({type:ObjectStatusNetworkButton,selectors:[["object-status-network-button"]],viewQuery:function(e,t){if(1&e&&n.Gf(i.Y,5),2&e){let e;n.iGM(e=n.CRH())&&(t.buttonitemlist=e)}},decls:1,vars:1,consts:[["class","slds-button-group slds-m-horizontal--xxx-small",4,"ngIf"],[1,"slds-button-group","slds-m-horizontal--xxx-small"],[1,"slds-button","slds-button_neutral",3,"disabled","click"],[3,"item"],["system-dropdown-trigger","",1,"slds-dropdown-trigger","slds-dropdown-trigger_click","slds-button_last"],[1,"slds-button","slds-button_icon","slds-button_icon-border-filled",3,"disabled"],["icon","down"],[1,"slds-dropdown","slds-dropdown_right","slds-dropdown_actions"],["role","menu",1,"slds-dropdown__list"],["class","slds-dropdown__item","role","presentation",3,"click",4,"ngFor","ngForOf"],["role","presentation",1,"slds-dropdown__item",3,"click"],["href","javascript:void(0);","role","menuitem",1,"slds-truncate"]],template:function(e,t){1&e&&n.YNc(0,g,9,4,"div",0),2&e&&n.Q6J("ngIf",t.isManaged)},dependencies:[c.sg,c.O5,u.J,m.l,i.Y],encapsulation:2}),ObjectStatusNetworkButton})()},8017:(e,t,s)=>{"use strict";s.d(t,{Y:()=>u});var i=s(1571),n=s(5329),l=s(4154),o=s(4044),a=s(5710),d=s(6895);const r=["componentcontainer"];function c(e,t){if(1&e&&(i.TgZ(0,"span",2),i._uU(1),i.qZA()),2&e){const e=i.oxw();i.xp6(1),i.Oqu(e.language.getLabel(e.item.action_label))}}let u=(()=>{class ObjectStatusNetworkButtonItem{constructor(e,t,s,i,n){this.language=e,this.metadata=t,this.modal=s,this.model=i,this.injector=n,this.item={},this.initialized=!1}get id(){return this.item.id}get hasComponent(){return this.item.status_component&&""!=this.item.status_component}ngAfterViewInit(){this.hasComponent&&this.metadata.addComponent(this.item.status_component,this.componentcontainer,this.injector).subscribe((e=>{this.actioncomponent=e.instance,e.instance.item=this.item})),this.initialized=!0}ngOnChanges(){this.actioncomponent&&(this.actioncomponent.self.destroy(),this.actioncomponent=null),this.initialized&&this.hasComponent&&this.metadata.addComponent(this.item.status_component,this.componentcontainer,this.injector).subscribe((e=>{this.actioncomponent=e.instance,e.instance.item=this.item}))}setStatus(e){this.item.prompt_label?this.modal.confirm(this.language.getLabel(this.item.prompt_label,"","long"),this.language.getLabel(this.item.prompt_label,"")).subscribe((t=>{t&&this.executeChange(e)})):this.executeChange(e)}executeChange(e){this.actioncomponent&&this.actioncomponent.execute?this.actioncomponent.execute():(this.model.startEdit(!0,!1),this.model.setField(e,this.item.status_to),this.model.validate()?this.model.save():this.model.edit())}}return ObjectStatusNetworkButtonItem.ɵfac=function(e){return new(e||ObjectStatusNetworkButtonItem)(i.Y36(n.d),i.Y36(l.Pu),i.Y36(o.o),i.Y36(a.o),i.Y36(i.zs3))},ObjectStatusNetworkButtonItem.ɵcmp=i.Xpm({type:ObjectStatusNetworkButtonItem,selectors:[["object-status-network-button-item"]],viewQuery:function(e,t){if(1&e&&i.Gf(r,7,i.s_b),2&e){let e;i.iGM(e=i.CRH())&&(t.componentcontainer=e.first)}},inputs:{item:"item"},features:[i.TTD],decls:3,vars:1,consts:[["class","slds-text-color_default",4,"ngIf"],["componentcontainer",""],[1,"slds-text-color_default"]],template:function(e,t){1&e&&(i.YNc(0,c,2,1,"span",0),i._UZ(1,"div",null,1)),2&e&&i.Q6J("ngIf",!t.hasComponent)},dependencies:[d.O5],encapsulation:2}),ObjectStatusNetworkButtonItem})()},4652:(e,t,s)=>{"use strict";s.d(t,{U:()=>u});var i=s(1571),n=s(2355),l=s(4154),o=s(5710),a=s(6895),d=s(2656),r=s(3463);const c=function(e,t){return{"slds-is-selected":e,"slds-not-selected":t}};let u=(()=>{class ObjectSubscriptionButton{constructor(e,t,s){this.subscriptionService=e,this.metadata=t,this.model=s,this.inProcess=!1}toggleSubscribe(){this.inProcess=!0,this.subscriptionService.hasSubscription(this.model.id)?this.subscriptionService.unsubscribeBean(this.model.id,this.model.module).subscribe((e=>this.inProcess=!1),(e=>this.inProcess=!1)):this.subscriptionService.subscribeBean(this.model).subscribe((e=>this.inProcess=!1),(e=>this.inProcess=!1))}}return ObjectSubscriptionButton.ɵfac=function(e){return new(e||ObjectSubscriptionButton)(i.Y36(n.J),i.Y36(l.Pu),i.Y36(o.o))},ObjectSubscriptionButton.ɵcmp=i.Xpm({type:ObjectSubscriptionButton,selectors:[["object-subscription-button"]],decls:10,vars:5,consts:[[1,"slds-button","slds-button_neutral","slds-button_stateful",2,"text-transform","capitalize",3,"disabled","ngClass","click"],[1,"slds-text-not-selected"],["icon","add",1,"slds-p-right--xx-small"],["label","LBL_FOLLOW"],[1,"slds-text-selected"],["icon","check",1,"slds-p-right--xx-small"],["label","LBL_FOLLOWING"],[1,"slds-text-selected-focus"],["icon","close",1,"slds-p-right--xx-small"],["label","LBL_UNFOLLOW"]],template:function(e,t){1&e&&(i.TgZ(0,"button",0),i.NdJ("click",(function(){return t.toggleSubscribe()})),i.TgZ(1,"span",1),i._UZ(2,"system-button-icon",2)(3,"system-label",3),i.qZA(),i.TgZ(4,"span",4),i._UZ(5,"system-button-icon",5)(6,"system-label",6),i.qZA(),i.TgZ(7,"span",7),i._UZ(8,"system-button-icon",8)(9,"system-label",9),i.qZA()()),2&e&&i.Q6J("disabled",t.inProcess)("ngClass",i.WLB(2,c,t.subscriptionService.hasSubscription(t.model.id),!t.subscriptionService.hasSubscription(t.model.id)))},dependencies:[a.mk,d.J,r._],encapsulation:2}),ObjectSubscriptionButton})()},4518:(e,t,s)=>{"use strict";s.r(t),s.d(t,{ObjectComponents:()=>Sr});var i=s(6895),n=s(2563),l=s(433),o=s(7774),a=s(4357),d=s(3121),r=s(5478),c=s(1273),u=s(7443),m=s(1571),h=s(5329),g=s(5710);let p=(()=>{class ObjectFieldFilterPipe{constructor(e,t){this.languange=e,this.model=t}transform(e,t){let s=[];for(let i of e)(i.toLowerCase().indexOf(t.toLowerCase())>=0||this.languange.getFieldDisplayName(this.model.module,i).toLowerCase().indexOf(t.toLowerCase())>0)&&s.push(i);return s}}return ObjectFieldFilterPipe.ɵfac=function(e){return new(e||ObjectFieldFilterPipe)(m.Y36(h.d,16),m.Y36(g.o,16))},ObjectFieldFilterPipe.ɵpipe=m.Yjl({name:"objectfieldfilter",type:ObjectFieldFilterPipe,pure:!1}),ObjectFieldFilterPipe})();var f=s(7340),b=s(4154),y=s(6625),v=s(2644),x=s(2656),Z=s(4561),w=s(8859),T=s(5982),C=s(151),A=s(7102),k=s(2348),L=s(2422),M=s(3463),S=s(4361);function I(e,t){if(1&e){const e=m.EpF();m.TgZ(0,"li",10),m.NdJ("click",(function(){const t=m.CHM(e).$implicit,s=m.oxw();return m.KtG(s.setListComponent(t.component))})),m.TgZ(1,"a",11)(2,"span",12),m._UZ(3,"system-label",13),m.qZA(),m._UZ(4,"system-utility-icon",14),m.qZA()()}if(2&e){const e=t.$implicit;m.xp6(3),m.Q6J("label",e.label),m.xp6(1),m.Q6J("icon",e.icon)}}let O=(()=>{class ObjectListViewHeaderListSelector{constructor(e,t,s,i,n,l,o){this.metadata=e,this.userpreferences=t,this.modellist=s,this.language=i,this.model=n,this.elementRef=l,this.renderer=o}ngOnInit(){this.initialize()}initialize(){this.loadComponentConfig(),this.modellist.currentList&&-1!=["all","owner"].indexOf(this.modellist.currentList.id)&&this.modellist.updateStandardListsComponent(this.modellist.currentList.id,this.getDefaultComponent())}getDefaultComponent(){return this.userpreferences.getPreference("defaultlisttype",this.modellist.module)||this.componentconfig.lists[0].component}loadComponentConfig(){let e=this.metadata.getComponentConfig("ObjectListView",this.model.module),t=this.metadata.getComponentSetObjects(e.componentset);this.componentconfig={lists:t.map((e=>({component:e.component,icon:e.componentconfig.icon?e.componentconfig.icon:"list",label:e.componentconfig.name})))}}get currentListIcon(){let e="";if(this.componentconfig.lists){e=this.componentconfig.lists.find((e=>e.component==this.modellist.currentList.listcomponent))?.icon}return e}get disabled(){return!(this.componentconfig.lists.length>1)||this.modellist.isLoading}setListComponent(e){this.modellist.currentList&&(-1!=["all","owner"].indexOf(this.modellist.currentList.id)?this.modellist.updateStandardListsComponent(this.modellist.currentList.id,e):this.modellist.updateListTypeComponent(e))}}return ObjectListViewHeaderListSelector.ɵfac=function(e){return new(e||ObjectListViewHeaderListSelector)(m.Y36(b.Pu),m.Y36(L.z),m.Y36(v.t),m.Y36(h.d),m.Y36(g.o),m.Y36(m.SBq),m.Y36(m.Qsj))},ObjectListViewHeaderListSelector.ɵcmp=m.Xpm({type:ObjectListViewHeaderListSelector,selectors:[["object-listview-header-list-selector"]],decls:10,vars:3,consts:[["aria-expanded","false","system-dropdown-trigger-simple","",1,"slds-dropdown-trigger","slds-dropdown-trigger--click","slds-m-horizontal--xxx-small"],["aria-haspopup","true","system-title","LBL_CHANGE_VIEW",1,"slds-button","slds-button--icon","slds-button--icon-border","slds-button--neutral",3,"disabled"],["size","small",3,"icon"],["icon","down","size","x-small",1,"slds-p-left--xxx-small"],[1,"slds-dropdown","slds-dropdown--right","slds-dropdown--small"],["role","menu",1,"slds-dropdown__list"],["role","separator",1,"slds-dropdown__header"],[1,"slds-text-title--caps"],["label","LBL_DISPLAYAS"],["class","slds-dropdown__item slds-is-selected","role","presentation",3,"click",4,"ngFor","ngForOf"],["role","presentation",1,"slds-dropdown__item","slds-is-selected",3,"click"],["href","javascript:void(0);","role","menuitemcheckbox","aria-checked","true","tabindex","0"],[1,"slds-truncate"],[3,"label"],["size","x-small",3,"icon"]],template:function(e,t){1&e&&(m.TgZ(0,"div",0)(1,"button",1),m._UZ(2,"system-button-icon",2)(3,"system-button-icon",3),m.qZA(),m.TgZ(4,"div",4)(5,"ul",5)(6,"li",6)(7,"span",7),m._UZ(8,"system-label",8),m.qZA()(),m.YNc(9,I,5,2,"li",9),m.qZA()()()),2&e&&(m.xp6(1),m.Q6J("disabled",t.disabled),m.xp6(1),m.Q6J("icon",t.currentListIcon),m.xp6(7),m.Q6J("ngForOf",t.componentconfig.lists))},dependencies:[i.sg,x.J,M._,w.r,S.w,C.S],encapsulation:2}),ObjectListViewHeaderListSelector})();var J=s(8861),N=s(4822),F=s(1058),q=s(7954),E=s(2685);function Y(e,t){1&e&&m._UZ(0,"object-listview-tags-aggregate")}function Q(e,t){if(1&e&&m._UZ(0,"object-listview-aggregate",14),2&e){const e=m.oxw().$implicit;m.Q6J("aggregate",e)}}function U(e,t){if(1&e&&(m.TgZ(0,"div",12),m.YNc(1,Q,1,1,"object-listview-aggregate",13),m.qZA()),2&e){const e=t.$implicit;m.xp6(1),m.Q6J("ngIf",!e.system)}}let D=(()=>{class ObjectListViewAggregatesPanel{constructor(e,t,s,i){this.elementRef=e,this.language=t,this.metadata=s,this.modellist=i}get aggregates(){return this.modellist.moduleAggregates}get hasTags(){return this.metadata.checkTagging(this.modellist.module)}clearAggregates(){this.modellist.removeAllAggregates(!0),this.modellist.reLoadList()}}return ObjectListViewAggregatesPanel.ɵfac=function(e){return new(e||ObjectListViewAggregatesPanel)(m.Y36(m.SBq),m.Y36(h.d),m.Y36(b.Pu),m.Y36(v.t))},ObjectListViewAggregatesPanel.ɵcmp=m.Xpm({type:ObjectListViewAggregatesPanel,selectors:[["object-listview-aggregates-panel"]],hostAttrs:[1,"slds-is-fixed"],decls:12,vars:3,consts:[[1,"slds-panel","slds-size--medium","slds-grid","slds-grid--vertical","slds-nowrap","slds-panel--filters"],[1,"slds-form--stacked","slds-grow","slds-scrollable--y","slds-grid","slds-grid--vertical"],[1,"slds-filters"],[1,"slds-filters__header","slds-grid","slds-grid--align-spread","slds-has-divider--bottom"],[1,"slds-align-middle","slds-text-heading--small"],["label","LBL_AGGREGATES"],[1,"slds-button","slds-button--brand",3,"disabled","click"],["label","LBL_CLEARALL"],["system-to-bottom","",1,"slds-filters__body"],[1,"slds-grid_vertical"],[4,"ngIf"],["class","slds-m-vertical--xx-small",4,"ngFor","ngForOf"],[1,"slds-m-vertical--xx-small"],[3,"aggregate",4,"ngIf"],[3,"aggregate"]],template:function(e,t){1&e&&(m.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h4",4),m._UZ(5,"system-label",5),m.qZA(),m.TgZ(6,"button",6),m.NdJ("click",(function(){return t.clearAggregates()})),m._UZ(7,"system-label",7),m.qZA()(),m.TgZ(8,"div",8)(9,"div",9),m.YNc(10,Y,1,0,"object-listview-tags-aggregate",10),m.YNc(11,U,2,1,"div",11),m.qZA()()()()()),2&e&&(m.xp6(6),m.Q6J("disabled",!t.modellist.hasNonSysAggregates),m.xp6(4),m.Q6J("ngIf",t.hasTags),m.xp6(1),m.Q6J("ngForOf",t.aggregates))},dependencies:[i.sg,i.O5,M._,F.H,q.i,E.w],encapsulation:2}),ObjectListViewAggregatesPanel})(),j=(()=>{class ObjectListViewFilterButton{constructor(e){this.modellist=e}togglefilters(){this.modellist.displayAggregates=!1,this.modellist.displayFilters=!this.modellist.displayFilters}get enabled(){return this.modellist.filterEnabled()&&!this.modellist.isLoading}get buttonclasses(){return this.modellist.displayFilters?"slds-is-selected":""}}return ObjectListViewFilterButton.ɵfac=function(e){return new(e||ObjectListViewFilterButton)(m.Y36(v.t))},ObjectListViewFilterButton.ɵcmp=m.Xpm({type:ObjectListViewFilterButton,selectors:[["object-listview-filter-button"]],decls:2,vars:2,consts:[["system-title","LBL_FILTER",1,"slds-button","slds-button--neutral","slds-button--icon-border","slds-m-horizontal--xxx-small",3,"disabled","ngClass","click"],["icon","filterList"]],template:function(e,t){1&e&&(m.TgZ(0,"button",0),m.NdJ("click",(function(){return t.togglefilters()})),m._UZ(1,"system-button-icon",1),m.qZA()),2&e&&m.Q6J("disabled",!t.enabled)("ngClass",t.buttonclasses)},dependencies:[i.mk,x.J,C.S],encapsulation:2}),ObjectListViewFilterButton})();var R=s(727),B=s(9901);const G=["popover"];function P(e,t){if(1&e){const e=m.EpF();m.TgZ(0,"div",9)(1,"div",10)(2,"fieldset",11)(3,"legend",12),m._UZ(4,"system-label",5),m.qZA(),m.TgZ(5,"div",13)(6,"span",14)(7,"input",15),m.NdJ("ngModelChange",(function(t){m.CHM(e);const s=m.oxw();return m.KtG(s.filterValue=t)})),m.qZA(),m.TgZ(8,"label",16),m._UZ(9,"span",17),m.TgZ(10,"span",18),m._UZ(11,"system-label",19),m.qZA()()(),m.TgZ(12,"span",14)(13,"input",20),m.NdJ("ngModelChange",(function(t){m.CHM(e);const s=m.oxw();return m.KtG(s.filterValue=t)})),m.qZA(),m.TgZ(14,"label",21),m._UZ(15,"span",17),m.TgZ(16,"span",18),m._UZ(17,"system-label",22),m.qZA()()(),m.TgZ(18,"span",14)(19,"input",23),m.NdJ("ngModelChange",(function(t){m.CHM(e);const s=m.oxw();return m.KtG(s.filterValue=t)})),m.qZA(),m.TgZ(20,"label",24),m._UZ(21,"span",17),m.TgZ(22,"span",18),m._UZ(23,"system-label",25),m.qZA()()()()(),m.TgZ(24,"div",26)(25,"button",27),m.NdJ("click",(function(){m.CHM(e);const t=m.oxw();return m.KtG(t.closePopover())})),m._UZ(26,"system-label",28),m.qZA()()()()}if(2&e){const e=m.oxw();m.Q6J("@animatepopover",void 0),m.xp6(7),m.Q6J("ngModel",e.filterValue),m.xp6(6),m.Q6J("ngModel",e.filterValue),m.xp6(6),m.Q6J("ngModel",e.filterValue)}}let H=(()=>{class ObjectListViewFilterPanelFilterMyItems{constructor(e,t,s,i){this.renderer=e,this.elementRef=t,this.language=s,this.modellist=i,this.showPopover=!1,this._filterValue="all",this.clickListener=null}onClick(){if(!this.showPopover)return this.showPopover=!0,void(this.clickListener=this.renderer.listen("document","click",(e=>this.onDocumentClick(e))))}get filterValue(){return this._filterValue}set filterValue(e){this._filterValue=e,this.onChange(e)}closePopover(){this.showPopover=!1,this.clickListener&&this.clickListener()}onDocumentClick(e){if(this.showPopover){this.elementRef.nativeElement.contains(e.target)||this.closePopover()}}getPopoverStyle(){let e=this.elementRef.nativeElement.getBoundingClientRect(),t=this.popover.element.nativeElement.getBoundingClientRect();return{position:"fixed",top:e.top+(e.height-t.height)/2+"px",left:e.left-t.width-15+"px"}}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}writeValue(e){this._filterValue=e||""}}return ObjectListViewFilterPanelFilterMyItems.ɵfac=function(e){return new(e||ObjectListViewFilterPanelFilterMyItems)(m.Y36(m.Qsj),m.Y36(m.SBq),m.Y36(h.d),m.Y36(v.t))},ObjectListViewFilterPanelFilterMyItems.ɵcmp=m.Xpm({type:ObjectListViewFilterPanelFilterMyItems,selectors:[["object-listview-filter-panel-filter-myitems"]],viewQuery:function(e,t){if(1&e&&m.Gf(G,7,m.s_b),2&e){let e;m.iGM(e=m.CRH())&&(t.popover=e.first)}},features:[m._Bn([{provide:l.JU,useExisting:(0,m.Gpc)((()=>ObjectListViewFilterPanelFilterMyItems)),multi:!0}])],decls:10,vars:3,consts:[[1,"slds-list--vertical","slds-list--vertical-space"],[1,"slds-item","slds-hint-parent",3,"click"],[1,"slds-filters__item","slds-grid","slds-grid--vertical-align-center"],["href","javascript:void(0);",1,"slds-grow","slds-has-blur-focus"],[1,"slds-text-body--small"],["label","LBL_DISPLAY"],[3,"ngStyle"],["popover",""],["class","slds-popover slds-nubbin--right","role","dialog",4,"ngIf"],["role","dialog",1,"slds-popover","slds-nubbin--right"],[1,"slds-popover__body"],[1,"slds-form-element"],[1,"slds-form-element__legend","slds-form-element__label"],[1,"slds-form-element__control"],[1,"slds-radio"],["type","radio","id","radioall","name","scope","value","all",3,"ngModel","ngModelChange"],["for","radioall",1,"slds-radio__label"],[1,"slds-radio--faux"],[1,"slds-form-element__label"],["label","LBL_ALL"],["type","radio","id","radioown","name","scope","value","own",3,"ngModel","ngModelChange"],["for","radioown",1,"slds-radio__label"],["label","LBL_OWN"],["type","radio","id","radiocre","name","scope","value","creator",3,"ngModel","ngModelChange"],["for","radiocre",1,"slds-radio__label"],["label","LBL_CREATOR"],[1,"slds-text-align--right","slds-p-top--x-small"],["type","button",1,"slds-button","slds-button--brand","slds-button-space-left",3,"click"],["label","LBL_OK"]],template:function(e,t){1&e&&(m.TgZ(0,"ol",0)(1,"li",1),m.NdJ("click",(function(){return t.onClick()})),m.TgZ(2,"div",2)(3,"a",3)(4,"p",4),m._UZ(5,"system-label",5),m._uU(6),m.qZA()()()(),m.TgZ(7,"div",6,7),m.YNc(9,P,27,4,"div",8),m.qZA()()),2&e&&(m.xp6(6),m.hij(": ",t.language.getLabel("LBL_"+t.filterValue.toUpperCase()),""),m.xp6(1),m.Q6J("ngStyle",t.getPopoverStyle()),m.xp6(2),m.Q6J("ngIf",t.showPopover))},dependencies:[i.O5,i.PC,l.Fj,l._,l.JJ,l.On,M._],encapsulation:2,data:{animation:[(0,f.X$)("animatepopover",[(0,f.eR)(":enter",[(0,f.oB)({opacity:0}),(0,f.jt)(".25s",(0,f.oB)({opacity:1}))]),(0,f.eR)(":leave",[(0,f.oB)({opacity:"1"}),(0,f.jt)(".25s",(0,f.oB)({opacity:0}))])])]}}),ObjectListViewFilterPanelFilterMyItems})();var z=s(4044);function V(e,t){if(1&e){const e=m.EpF();m.TgZ(0,"ol",1)(1,"li",2),m.NdJ("click",(function(){m.CHM(e);const t=m.oxw();return m.KtG(t.onClick())})),m.TgZ(2,"div",3),m._UZ(3,"system-button-icon",4),m.TgZ(4,"p",5),m._uU(5),m.qZA()()()()}if(2&e){const e=m.oxw();m.xp6(5),m.hij(" ",e.geodata," ")}}let K=(()=>{class ObjectListViewFilterPanelFilterGeo{constructor(e,t,s,i){this.model=e,this.modal=t,this.language=s,this.metadata=i,this.geography={},this.geographyChange=new m.vpe}get geoEnabled(){return!(!this.model||!this.model.module)&&this.metadata.getModuleDefs(this.model.module).ftsgeo}onClick(){this.modal.openModal("SpiceMapSelector").subscribe((e=>{this.hasGeogrpahy&&(e.instance.lat=this.geography.lat,e.instance.lng=this.geography.lng,e.instance._radius=this.geography.radius,e.instance.address=this.geography.address),e.instance.geoSearchemitter.subscribe((e=>{e?(this.geography.radius=e.radius,this.geography.lat=e.lat,this.geography.lng=e.lng,this.geography.address=e.address):this.geography={},this.geographyChange.emit(this.geography)}))}))}get hasGeogrpahy(){return!_.isEmpty(this.geography)}get geodata(){return this.hasGeogrpahy?this.geography.radius+"km around "+this.geography.address:"no geodata set"}}return ObjectListViewFilterPanelFilterGeo.ɵfac=function(e){return new(e||ObjectListViewFilterPanelFilterGeo)(m.Y36(g.o),m.Y36(z.o),m.Y36(h.d),m.Y36(b.Pu))},ObjectListViewFilterPanelFilterGeo.ɵcmp=m.Xpm({type:ObjectListViewFilterPanelFilterGeo,selectors:[["object-listview-filter-panel-filter-geo"]],inputs:{geography:"geography"},outputs:{geographyChange:"geographyChange"},decls:1,vars:1,consts:[["class","slds-list--vertical slds-list--vertical-space slds-p-vertical--x-small",4,"ngIf"],[1,"slds-list--vertical","slds-list--vertical-space","slds-p-vertical--x-small"],[1,"slds-item","slds-hint-parent","slds-text-link--reset",3,"click"],[1,"slds-filters__item","slds-grid"],["icon","world",1,"slds-p-right--x-small"],[1,"slds-text-body--small","slds-p-vertical--xxx-small"]],template:function(e,t){1&e&&m.YNc(0,V,6,1,"ol",0),2&e&&m.Q6J("ngIf",t.geoEnabled)},dependencies:[i.O5,x.J],encapsulation:2}),ObjectListViewFilterPanelFilterGeo})();var $=s(7720),X=s(4505),W=s(1230),ee=s(7617);const te=["popover"];function se(e,t){if(1&e&&(m.TgZ(0,"span"),m._UZ(1,"system-label",16),m._uU(2),m.qZA()),2&e){const e=m.oxw();m.xp6(2),m.hij(" ",e.interpretvalue(e.filterexpression.filtervalueto),"")}}function ie(e,t){if(1&e&&(m.TgZ(0,"option",30),m._UZ(1,"system-label",3),m.qZA()),2&e){const e=t.$implicit;m.Q6J("value",e.operator),m.xp6(1),m.Q6J("label",e.name)}}function ne(e,t){if(1&e){const e=m.EpF();m.TgZ(0,"div",17)(1,"div",18)(2,"fieldset",19)(3,"system-filter-builder-expression-fields",20),m.NdJ("ngModelChange",(function(t){m.CHM(e);const s=m.oxw();return m.KtG(s.field=t)})),m.qZA(),m.TgZ(4,"div",5)(5,"label",21),m._UZ(6,"system-label",22),m.qZA(),m.TgZ(7,"div",6)(8,"div",23)(9,"select",24),m.NdJ("ngModelChange",(function(t){m.CHM(e);const s=m.oxw();return m.KtG(s.operator=t)})),m.YNc(10,ie,2,2,"option",25),m.qZA()()()(),m._UZ(11,"system-filter-builder-expression-values",26),m.qZA(),m.TgZ(12,"div",27)(13,"button",28),m.NdJ("click",(function(){m.CHM(e);const t=m.oxw();return m.KtG(t.closePopover())})),m._UZ(14,"system-label",29),m.qZA()()()()}if(2&e){const e=m.oxw();m.Q6J("@animatepopover",void 0),m.xp6(3),m.Q6J("module",e.module)("ngModel",e.field),m.xp6(6),m.Q6J("disabled",!e.filterexpression.field)("ngModel",e.operator),m.xp6(1),m.Q6J("ngForOf",e.operators[e.operatortype]),m.xp6(1),m.Q6J("operators",e.operators[e.operatortype])("operator",e.filterexpression.operator)("filterexpression",e.filterexpression)("module",e.module)("field",e.field)}}let le=(()=>{class ObjectListViewFilterPanelFilterItem extends $.H{constructor(e,t,s,i,n,l,o){super(e,t,s),this.backend=e,this.language=t,this.metadata=s,this.elementRef=i,this.modellist=n,this.renderer=l,this.userpreferences=o,this.showPopover=!1,this.clickListener=null,this.excludedFieldtypes=["link","relate","email"],this.deleteItem=new m.vpe,this.module=this.modellist.module}get operatorLabel(){return this.operator?this.operators[this.operatortype].find((e=>e.operator==this.operator)).name:""}ngAfterViewInit(){this.field&&""!=this.field||this.openPopover()}ngOnDestroy(){this.clickListener&&this.clickListener()}onClick(){this.openPopover()}openPopover(){this.showPopover||(this.showPopover=!0)}onFocus(e){window.setTimeout((()=>{e.target.blur()}),250)}closePopover(){this.showPopover=!1}onDocumentClick(e){this.showPopover&&(this.elementRef.nativeElement.contains(e.target)||(this.showPopover=!1,this.clickListener()))}getPopoverStyle(){let e=this.elementRef.nativeElement.getBoundingClientRect(),t=this.popover.element.nativeElement.getBoundingClientRect();return{position:"fixed",top:e.top+(e.height-t.height)/2+"px",left:e.left-t.width-15+"px"}}getDisplayName(){return this.field?this.language.getFieldDisplayName(this.modellist.module,this.field):this.language.getLabel("LBL_NEW_FILTER")}deleteFilter(){this.deleteItem.emit(!0)}interpretvalue(e){try{switch(this.operators[this.operatortype].find((e=>e.operator==this.operator)).value1){case"date":return this.userpreferences.formatDate(e);case"integer":return this.userpreferences.formatMoney(parseInt(e,10));case"enum":return this.language.getFieldDisplayOptionValue(this.module,this.field,e);case"relate":if(!e)return"";let t=e.split("::");return t.length<2?e:t[1];case"multienum":let s=[],i=_.isArray(e)?e:e.split(",");for(let e of i)s.push(this.language.getFieldDisplayOptionValue(this.module,this.field,e));return s.join(", ");default:return e}}catch(t){return e}}}return ObjectListViewFilterPanelFilterItem.ɵfac=function(e){return new(e||ObjectListViewFilterPanelFilterItem)(m.Y36(X.y),m.Y36(h.d),m.Y36(b.Pu),m.Y36(m.SBq),m.Y36(v.t),m.Y36(m.Qsj),m.Y36(L.z))},ObjectListViewFilterPanelFilterItem.ɵcmp=m.Xpm({type:ObjectListViewFilterPanelFilterItem,selectors:[["object-listview-filter-panel-filter-item"]],viewQuery:function(e,t){if(1&e&&m.Gf(te,7,m.s_b),2&e){let e;m.iGM(e=m.CRH())&&(t.popover=e.first)}},outputs:{deleteItem:"deleteItem"},features:[m.qOj],decls:18,vars:7,consts:[[1,"slds-filters__item","slds-m-vertical--xx-small","slds-grid","slds-grid--vertical-align-center"],["href","javascript:void(0);",1,"slds-grow","slds-has-blur-focus",3,"click","focus"],[1,"slds-text-body--small"],[3,"label"],[4,"ngIf"],[1,"slds-form-element"],[1,"slds-form-element__control"],[1,"slds-checkbox"],["type","checkbox","name","options","checked",""],[1,"slds-button","slds-button--icon","slds-button--icon-small",3,"click"],[3,"icon"],[1,"slds-assistive-text"],["label","LBL_REMOVE"],[3,"ngStyle"],["popover",""],["class","slds-popover slds-nubbin--right","role","dialog",4,"ngIf"],["label","LBL_AND"],["role","dialog",1,"slds-popover","slds-nubbin--right"],[1,"slds-popover__body"],[1,"slds-form--stacked"],[3,"module","ngModel","ngModelChange"],[1,"slds-form-element__label"],["label","LBL_OPERATOR"],[1,"slds-select_container"],[1,"slds-select",3,"disabled","ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[3,"operators","operator","filterexpression","module","field"],[1,"slds-text-align--right","slds-p-top--x-small","slds-has-divider--top"],["type","button",1,"slds-button","slds-button--brand","slds-button-space-left",3,"click"],["label","LBL_OK"],[3,"value"]],template:function(e,t){1&e&&(m.TgZ(0,"div",0)(1,"a",1),m.NdJ("click",(function(){return t.onClick()}))("focus",(function(e){return t.onFocus(e)})),m.TgZ(2,"p",2),m._uU(3),m._UZ(4,"system-label",3),m._uU(5),m.YNc(6,se,3,1,"span",4),m.qZA()(),m.TgZ(7,"div",5)(8,"div",6)(9,"span",7),m._UZ(10,"input",8),m.qZA()()(),m.TgZ(11,"button",9),m.NdJ("click",(function(){return t.deleteFilter()})),m._UZ(12,"system-button-icon",10),m.TgZ(13,"span",11),m._UZ(14,"system-label",12),m.qZA()()(),m.TgZ(15,"div",13,14),m.YNc(17,ne,15,11,"div",15),m.qZA()),2&e&&(m.xp6(3),m.hij("",t.getDisplayName()," "),m.xp6(1),m.Q6J("label",t.operatorLabel),m.xp6(1),m.hij(" ",t.interpretvalue(t.filterexpression.filtervalue)," "),m.xp6(1),m.Q6J("ngIf",t.filterexpression.filtervalueto),m.xp6(6),m.Q6J("icon","close"),m.xp6(3),m.Q6J("ngStyle",t.getPopoverStyle()),m.xp6(2),m.Q6J("ngIf",t.showPopover))},dependencies:[i.sg,i.O5,i.PC,l.YN,l.Kr,l.EJ,l.JJ,l.On,x.J,W.Y,ee.w,M._],encapsulation:2,data:{animation:[(0,f.X$)("animatepopover",[(0,f.eR)(":enter",[(0,f.oB)({opacity:0}),(0,f.jt)(".25s",(0,f.oB)({opacity:1}))]),(0,f.eR)(":leave",[(0,f.oB)({opacity:"1"}),(0,f.jt)(".25s",(0,f.oB)({opacity:0}))])])]}}),ObjectListViewFilterPanelFilterItem})();function oe(e,t){if(1&e){const e=m.EpF();m.TgZ(0,"object-listview-filter-panel-filter-item",26),m.NdJ("deleteItem",(function(){const t=m.CHM(e).index,s=m.oxw(2);return m.KtG(s.deleteItem(t))})),m.qZA()}if(2&e){const e=t.$implicit;m.Q6J("filterexpression",e)}}function ae(e,t){if(1&e){const e=m.EpF();m.TgZ(0,"div",27)(1,"a",28),m.NdJ("click",(function(t){m.CHM(e);const s=m.oxw(2);return m.KtG(s.addExpression(t))})),m._UZ(2,"system-label",29),m.qZA(),m.TgZ(3,"a",30),m.NdJ("click",(function(){m.CHM(e);const t=m.oxw(2);return m.KtG(t.removeAllFilters())})),m._UZ(4,"system-label",31),m.qZA()()}}function de(e,t){if(1&e&&(m.ynx(0),m.TgZ(1,"div",23),m.YNc(2,oe,1,1,"object-listview-filter-panel-filter-item",24),m.qZA(),m.YNc(3,ae,5,0,"div",25),m.BQk()),2&e){const e=m.oxw();m.xp6(2),m.Q6J("ngForOf",e.filter.conditions),m.xp6(1),m.Q6J("ngIf",e.canEdit)}}function re(e,t){if(1&e){const e=m.EpF();m.TgZ(0,"div",33)(1,"a",28),m.NdJ("click",(function(t){m.CHM(e);const s=m.oxw(2);return m.KtG(s.addExpression(t))})),m._UZ(2,"system-label",29),m.qZA()()}}function ce(e,t){if(1&e&&m.YNc(0,re,3,0,"div",32),2&e){const e=m.oxw();m.Q6J("ngIf",e.canEdit)}}const ue=function(e){return{"slds-hidden":e}};let me=(()=>{class ObjectListViewFilterPanel{constructor(e,t,s,i,n,l){this.elementRef=e,this.language=t,this.metadata=s,this.modellist=i,this.model=n,this.renderer=l,this.filter={logicaloperator:"and",groupscope:"all",geography:{},conditions:[]},this.subcriptions=new R.w0,this.subcriptions.add(this.modellist.listType$.subscribe((e=>{this.setFilter()})))}ngOnDestroy(){this.subcriptions.unsubscribe()}setFilter(){this.filter={...this.modellist.getFilterDefs()},this.filter&&!_.isEmpty(this.filter)||(this.filter={logicaloperator:"and",groupscope:"all",geography:{},conditions:[]})}get geography(){return this.filter.geography?this.filter.geography:{}}set geography(e){this.filter.geography=e}get isChanged(){return!_.isEqual(this.filter,this.modellist.getFilterDefs())}get canEdit(){return this.modellist.checkAccess("edit")}save(){this.isChanged&&(this.modellist.updateListType({filterdefs:JSON.stringify(this.filter)}).subscribe((()=>{this.modellist.reLoadList()})),this.modellist.displayFilters=!1)}cancel(){this.filter={...this.modellist.getFilterDefs()},this.modellist.displayFilters=!1}removeAllFilters(){this.filter.conditions=[]}addExpression(e){e.preventDefault(),e.stopPropagation();this.filter.conditions.push({field:"",operator:"",filtervalue:""})}deleteItem(e){this.filter.conditions.splice(e,1)}}return ObjectListViewFilterPanel.ɵfac=function(e){return new(e||ObjectListViewFilterPanel)(m.Y36(m.SBq),m.Y36(h.d),m.Y36(b.Pu),m.Y36(v.t),m.Y36(g.o),m.Y36(m.Qsj))},ObjectListViewFilterPanel.ɵcmp=m.Xpm({type:ObjectListViewFilterPanel,selectors:[["object-listview-filter-panel"]],hostAttrs:[1,"slds-is-fixed"],decls:24,vars:11,consts:[["system-to-bottom","",1,"slds-panel","slds-size--medium","slds-grid","slds-grid--vertical","slds-nowrap","slds-panel--filters","slds-size_medium"],[1,"slds-form--stacked","slds-grow","slds-scrollable--y","slds-grid","slds-grid--vertical"],[1,"slds-filters"],[1,"slds-filters__header","slds-grid","slds-grid--align-spread","slds-has-divider--bottom-space"],[1,"slds-align-middle","slds-text-heading--small"],["label","LBL_FILTER"],[1,"slds-button-group",3,"ngClass"],[1,"slds-button","slds-button--icon","slds-button_icon-border-filled",3,"click"],["icon","close"],[1,"slds-button","slds-button--icon","slds-button_icon-border-filled","slds-is-selected",3,"click"],["icon","check"],[1,"slds-p-around--xx-small"],[3,"ngModel","ngModelChange"],[3,"geography","geographyChange"],[1,"slds-grid","slds-p-around--xx-small"],[1,"slds-form-element__label"],["label","LBL_MATCHING"],["name","operator","value","and",3,"disabled","ngModel","ngModelChange"],["label","LBL_ALL"],["name","operator","value","or",3,"disabled","ngModel","ngModelChange"],["label","LBL_ANY"],[4,"ngIf","ngIfElse"],["nofilter",""],[1,"slds-grid_vertical"],[3,"filterexpression","deleteItem",4,"ngFor","ngForOf"],["class","slds-filters__footer slds-grid slds-shrink-none",4,"ngIf"],[3,"filterexpression","deleteItem"],[1,"slds-filters__footer","slds-grid","slds-shrink-none"],["href","javascript:void(0);",3,"click"],["label","LBL_ADDFILTER"],["href","javascript:void(0);",1,"slds-col--bump-left",3,"click"],["label","LBL_REMOVEALL"],["class","slds-p-around--small slds-align--absolute-center",4,"ngIf"],[1,"slds-p-around--small","slds-align--absolute-center"]],template:function(e,t){if(1&e&&(m.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h4",4),m._UZ(5,"system-label",5),m.qZA(),m.TgZ(6,"div",6)(7,"button",7),m.NdJ("click",(function(){return t.cancel()})),m._UZ(8,"system-button-icon",8),m.qZA(),m.TgZ(9,"button",9),m.NdJ("click",(function(){return t.save()})),m._UZ(10,"system-button-icon",10),m.qZA()()(),m.TgZ(11,"div",11)(12,"object-listview-filter-panel-filter-myitems",12),m.NdJ("ngModelChange",(function(e){return t.filter.groupscope=e})),m.qZA(),m.TgZ(13,"object-listview-filter-panel-filter-geo",13),m.NdJ("geographyChange",(function(e){return t.geography=e})),m.qZA(),m.TgZ(14,"div",14)(15,"label",15),m._UZ(16,"system-label",16),m.qZA(),m.TgZ(17,"system-input-radio",17),m.NdJ("ngModelChange",(function(e){return t.filter.logicaloperator=e})),m._UZ(18,"system-label",18),m.qZA(),m.TgZ(19,"system-input-radio",19),m.NdJ("ngModelChange",(function(e){return t.filter.logicaloperator=e})),m._UZ(20,"system-label",20),m.qZA()(),m.YNc(21,de,4,2,"ng-container",21),m.YNc(22,ce,1,1,"ng-template",null,22,m.W1O),m.qZA()()()()),2&e){const e=m.MAs(23);m.xp6(6),m.Q6J("ngClass",m.VKq(9,ue,!t.isChanged)),m.xp6(6),m.Q6J("ngModel",t.filter.groupscope),m.xp6(1),m.Q6J("geography",t.geography),m.xp6(4),m.Q6J("disabled",!t.canEdit)("ngModel",t.filter.logicaloperator),m.xp6(2),m.Q6J("disabled",!t.canEdit)("ngModel",t.filter.logicaloperator),m.xp6(2),m.Q6J("ngIf",t.filter.conditions.length>0)("ngIfElse",e)}},dependencies:[i.mk,i.sg,i.O5,l.JJ,l.On,x.J,B.A,M._,F.H,H,K,le],encapsulation:2}),ObjectListViewFilterPanel})();var he=s(3278);let ge=(()=>{class ObjectListViewSettings{constructor(e,t,s,i,n,l,o){this.language=e,this.elementRef=t,this.modal=s,this.modellist=i,this.renderer=n,this.injector=l,this.toast=o}add(){this.modal.openModal("ObjectListViewSettingsAddlistModal",!0,this.injector).subscribe((e=>{e.instance.modalmode="add"}))}edit(){if(!this.modellist.checkAccess("edit"))return!1;this.modal.openModal("ObjectListViewSettingsAddlistModal",!0,this.injector).subscribe((e=>{e.instance.modalmode="edit"}))}save(){this.modellist.updateListType().subscribe((e=>{this.toast.sendToast("List Saved")}))}setfields(){if(!this.modellist.checkAccess("edit"))return!1;this.modal.openModal("ObjectListViewSettingsSetfieldsModal",!0,this.injector)}delete(){if(!this.modellist.checkAccess("delete"))return!1;this.modal.prompt("confirm",this.language.getLabel("MSG_DELETE_RECORD",void 0,"long"),this.language.getLabel("MSG_DELETE_RECORD")).subscribe((e=>{e&&this.modellist.deleteListType()}))}}return ObjectListViewSettings.ɵfac=function(e){return new(e||ObjectListViewSettings)(m.Y36(h.d),m.Y36(m.SBq),m.Y36(z.o),m.Y36(v.t),m.Y36(m.Qsj),m.Y36(m.zs3),m.Y36(he.A))},ObjectListViewSettings.ɵcmp=m.Xpm({type:ObjectListViewSettings,selectors:[["object-listview-settings"]],decls:29,vars:5,consts:[[1,"slds-dropdown-trigger","slds-dropdown-trigger--click","slds-m-horizontal--xxx-small",3,"system-dropdown-trigger-simple"],["system-title","LBL_SETTING",1,"slds-button","slds-button--icon","slds-button--icon-border","slds-button--neutral",3,"disabled"],["icon","settings"],["icon","down","size","x-small"],[1,"slds-dropdown","slds-dropdown--right"],["role","menu",1,"slds-dropdown__list"],["role","separator",1,"slds-dropdown__header"],[1,"slds-text-title--caps"],["label","LBL_SETTINGS"],["role","presentation",1,"slds-dropdown__item"],["role","menuitem",3,"click"],[1,"slds-truncate"],["icon","add","size","x-small",1,"slds-p-right--xx-small"],["label","LBL_NEW"],["icon","edit","size","x-small",1,"slds-p-right--xx-small"],["label","LBL_EDIT"],["icon","save","size","x-small",1,"slds-p-right--xx-small"],["label","LBL_SAVE"],["icon","delete","size","x-small",1,"slds-p-right--xx-small"],["label","LBL_DELETE"]],template:function(e,t){1&e&&(m.TgZ(0,"div",0)(1,"button",1),m._UZ(2,"system-button-icon",2)(3,"system-button-icon",3),m.qZA(),m.TgZ(4,"div",4)(5,"ul",5)(6,"li",6)(7,"span",7),m._UZ(8,"system-label",8),m.qZA()(),m.TgZ(9,"li",9)(10,"a",10),m.NdJ("click",(function(){return t.add()})),m.TgZ(11,"span",11),m._UZ(12,"system-utility-icon",12)(13,"system-label",13),m.qZA()()(),m.TgZ(14,"li",9)(15,"a",10),m.NdJ("click",(function(){return t.edit()})),m.TgZ(16,"span",11),m._UZ(17,"system-utility-icon",14)(18,"system-label",15),m.qZA()()(),m.TgZ(19,"li",9)(20,"a",10),m.NdJ("click",(function(){return t.save()})),m.TgZ(21,"span",11),m._UZ(22,"system-utility-icon",16)(23,"system-label",17),m.qZA()()(),m.TgZ(24,"li",9)(25,"a",10),m.NdJ("click",(function(){return t.delete()})),m.TgZ(26,"span",11),m._UZ(27,"system-utility-icon",18)(28,"system-label",19),m.qZA()()()()()()),2&e&&(m.Q6J("system-dropdown-trigger-simple",t.modellist.isLoading),m.xp6(1),m.Q6J("disabled",t.modellist.isLoading),m.xp6(14),m.uIk("aria-disabled",!t.modellist.checkAccess("edit")),m.xp6(5),m.uIk("aria-disabled",!t.modellist.checkAccess("edit")),m.xp6(5),m.uIk("aria-disabled",!t.modellist.checkAccess("delete")))},dependencies:[x.J,M._,w.r,S.w,C.S],encapsulation:2}),ObjectListViewSettings})();function pe(e,t){1&e&&m._UZ(0,"object-listview-filter-panel"),2&e&&m.Q6J("@animatepanel",void 0)}function fe(e,t){1&e&&m._UZ(0,"object-listview-aggregates-panel"),2&e&&m.Q6J("@animatepanel",void 0)}const be=function(e){return{"slds-has-error":e}};let _e=(()=>{class ObjectListViewHeader{constructor(e,t,s,i,n){this.metadata=e,this.configuration=t,this.modellist=s,this.language=i,this.model=n,this.actionSet={},this.searchTermError=!1;let l=this.metadata.getComponentConfig("ObjectListViewHeader",this.model.module);this.actionSet=l.actionset}set searchTerm(e){e!=this.modellist.searchTerm&&(this.modellist.searchTerm=e,""==e||this.searchTermsValid(e)?(this.searchTermError=!1,this.reloadList()):(this.searchTimeOut&&window.clearTimeout(this.searchTimeOut),this.searchTermError=!0))}get searchTerm(){return this.modellist.searchTerm}searchTermsValid(e){let t=this.configuration.getCapabilityConfig("search"),s=t.min_ngram?parseInt(t.min_ngram,10):3,i=t.max_ngram?parseInt(t.max_ngram,10):20;return 0==e.split(" ").filter((e=>e.length<s||e.length>i)).length}clearSearchTerm(){this.searchTerm=""}reloadList(){this.searchTimeOut&&window.clearTimeout(this.searchTimeOut),this.searchTimeOut=window.setTimeout((()=>this.modellist.reLoadList()),1e3)}}return ObjectListViewHeader.ɵfac=function(e){return new(e||ObjectListViewHeader)(m.Y36(b.Pu),m.Y36(y.C),m.Y36(v.t),m.Y36(h.d),m.Y36(g.o))},ObjectListViewHeader.ɵcmp=m.Xpm({type:ObjectListViewHeader,selectors:[["object-listview-header"]],decls:24,vars:12,consts:[["role","banner",1,"slds-page-header","slds-page-header--object-home"],[1,"slds-grid","slds-p-bottom--xx-small"],[1,"slds-grid","slds-grid--vertical-align-center","slds-no-space"],[3,"module"],[1,"slds-form-element","slds-p-right--small",2,"width","400px",3,"ngClass"],[1,"slds-form-element__control","slds-input-has-icon","slds-input-has-icon--left-right"],["icon","search","size","x-small","addclasses","slds-icon slds-input__icon slds-input__icon_left"],["system-autofocus","","type","search",1,"slds-input","slds-lookup__search-input",2,"max-width","400px",3,"placeholder","ngModel","ngModelChange","keyup.enter"],[1,"slds-button","slds-button_icon","slds-input__icon","slds-input__icon_right",3,"disabled","click"],["icon","clear"],[1,"slds-col--bump-left",3,"actionset"],[1,"slds-grid","slds-grid_vertical-align-center"],[1,"slds-col","slds-align-bottom"],[1,"slds-col","slds-no-flex","slds-grid","slds-align-bottom"],[1,"slds-show--medium"],["system-title","LBL_RELOAD",1,"slds-button","slds-button--neutral","slds-button--icon-border","slds-m-horizontal--xxx-small",3,"disabled","click"],[3,"icon"],[4,"ngIf"]],template:function(e,t){1&e&&(m.TgZ(0,"div",0)(1,"div",1)(2,"div",2),m._UZ(3,"system-icon",3)(4,"object-list-types"),m.qZA(),m.TgZ(5,"div",4)(6,"div",5),m._UZ(7,"system-utility-icon",6),m.TgZ(8,"input",7),m.NdJ("ngModelChange",(function(e){return t.searchTerm=e}))("keyup.enter",(function(){return t.reloadList()})),m.qZA(),m.TgZ(9,"button",8),m.NdJ("click",(function(){return t.clearSearchTerm()})),m._UZ(10,"system-button-icon",9),m.qZA()()(),m._UZ(11,"object-action-container",10),m.qZA(),m.TgZ(12,"div",11)(13,"div",12),m._UZ(14,"object-listview-header-details"),m.qZA(),m.TgZ(15,"div",13),m._UZ(16,"object-listview-settings",14)(17,"object-listview-header-list-selector"),m.TgZ(18,"button",15),m.NdJ("click",(function(){return t.modellist.reLoadList()})),m._UZ(19,"system-button-icon",16),m.qZA(),m._UZ(20,"object-listview-aggregates-button",14)(21,"object-listview-filter-button",14),m.qZA()()(),m.YNc(22,pe,1,1,"object-listview-filter-panel",17),m.YNc(23,fe,1,1,"object-listview-aggregates-panel",17)),2&e&&(m.xp6(3),m.Q6J("module",t.model.module),m.xp6(2),m.Q6J("ngClass",m.VKq(10,be,t.searchTermError)),m.xp6(3),m.Q6J("placeholder",t.language.getModuleCombinedLabel("LBL_SEARCH",t.model.module))("ngModel",t.searchTerm),m.xp6(1),m.Q6J("disabled",!t.searchTerm),m.xp6(2),m.Q6J("actionset",t.actionSet),m.xp6(7),m.Q6J("disabled",t.modellist.isLoading),m.xp6(1),m.Q6J("icon","refresh"),m.xp6(3),m.Q6J("ngIf",t.modellist.displayFilters),m.xp6(1),m.Q6J("ngIf",t.modellist.displayAggregates))},dependencies:[i.mk,i.O5,l.Fj,l.JJ,l.On,x.J,Z.f,w.r,T.m,C.S,A.l,k.M,O,J.S,N.X,D,j,me,ge],encapsulation:2,data:{animation:[(0,f.X$)("animatepanel",[(0,f.eR)(":enter",[(0,f.oB)({right:"-320px",overflow:"hidden"}),(0,f.jt)(".5s",(0,f.oB)({right:"0px"})),(0,f.oB)({overflow:"unset"})]),(0,f.eR)(":leave",[(0,f.oB)({overflow:"hidden"}),(0,f.jt)(".5s",(0,f.oB)({right:"-320px"}))])])]}}),ObjectListViewHeader})();var ye=s(7228),ve=s(3369),xe=s(2032),Ze=s(7017);const we=["container"];let Te=(()=>{class ObjectListViewContainer{constructor(e,t,s,i){this.metadata=e,this.broadcast=t,this.navigation=s,this.navigationtab=i,this.moduleName="",this.initialized=!1,this.componentRefs=[],this.componentSubscriptions=[],this.navigationtab.activeRoute$.subscribe((e=>{this.moduleName=e.params.module,this.initialized&&this.buildContainer()})),this.componentSubscriptions.push(this.broadcast.message$.subscribe((e=>{this.handleMessage(e)})))}ngAfterViewInit(){this.initialized=!0,this.buildContainer()}ngOnDestroy(){for(let e of this.componentRefs)e.destroy();for(let e of this.componentSubscriptions)e.unsubscribe()}buildContainer(){for(let e of this.componentRefs)e.destroy();this.componentRefs=[];let e=this.metadata.getComponentConfig("ObjectListViewContainer",this.moduleName);for(let t of this.metadata.getComponentSetObjects(e.componentset))this.metadata.addComponent(t.component,this.container).subscribe((e=>{t.componentconfig&&Object.keys(t.componentconfig).length>0?e.instance.componentconfig=t.componentconfig:e.instance.componentconfig=this.metadata.getComponentConfig(t.component,this.moduleName),this.componentRefs.push(e)}))}handleMessage(e){if("applauncher.setrole"===e.messagetype)this.buildContainer()}}return ObjectListViewContainer.ɵfac=function(e){return new(e||ObjectListViewContainer)(m.Y36(b.Pu),m.Y36(ve.f),m.Y36(xe.G),m.Y36(Ze.d))},ObjectListViewContainer.ɵcmp=m.Xpm({type:ObjectListViewContainer,selectors:[["object-listview-container"]],viewQuery:function(e,t){if(1&e&&m.Gf(we,7,m.s_b),2&e){let e;m.iGM(e=m.CRH())&&(t.container=e.first)}},decls:2,vars:0,consts:[["container",""]],template:function(e,t){1&e&&m._UZ(0,"div",null,0)},encapsulation:2}),ObjectListViewContainer})();var Ce=s(3194);const Ae=["container"];let ke=(()=>{class ObjectListView{constructor(e,t,s,i,n,l,o){this.navigation=e,this.navigationtab=t,this.activatedRoute=s,this.metadata=i,this.modellist=n,this.model=l,this.userpreferences=o,this.componentRefs=[],this.viewInitialized=!1,this.modellistSubscription=new R.w0,this.initialize()}initialize(){this.model.module=this.navigationtab.activeRoute.params.module,this.modellist.initialize(this.model.module),this.modellistSubscription=this.modellist.listTypeComponent$.subscribe((()=>this.handleListTypeChange()))}handleListTypeChange(){this.viewInitialized&&this.buildContainer()}ngAfterViewInit(){this.viewInitialized=!0,this.buildContainer()}ngOnDestroy(){this.modellistSubscription.unsubscribe()}buildContainer(){if(this.modellist.currentList?.listcomponent){for(let e of this.componentRefs)e.destroy();this.metadata.addComponent(this.modellist.currentList?.listcomponent,this.container).subscribe((e=>{this.componentRefs.push(e)}))}}}return ObjectListView.ɵfac=function(e){return new(e||ObjectListView)(m.Y36(xe.G),m.Y36(Ze.d),m.Y36(o.gz),m.Y36(b.Pu),m.Y36(v.t),m.Y36(g.o),m.Y36(L.z))},ObjectListView.ɵcmp=m.Xpm({type:ObjectListView,selectors:[["object-listview"]],viewQuery:function(e,t){if(1&e&&m.Gf(Ae,7,m.s_b),2&e){let e;m.iGM(e=m.CRH())&&(t.container=e.first)}},features:[m._Bn([v.t,g.o])],decls:4,vars:0,consts:[["system-to-bottom-noscroll",""],["container",""]],template:function(e,t){1&e&&(m._UZ(0,"object-listview-header"),m.TgZ(1,"div",0),m._UZ(2,"div",null,1),m.qZA())},dependencies:[Ce.t,_e],encapsulation:2}),ObjectListView})();var Le=s(2667),Me=s(6059),Se=s(201),Ie=s(1802);let Oe=(()=>{class ObjectListHeaderActionsAssignButton{constructor(e,t,s,i,n,l){this.language=e,this.metadata=t,this.model=s,this.modellist=i,this.modal=n,this.injector=l,this.actionconfig={},this.hidden=!1}get disabled(){return!this.metadata.checkModuleAcl(this.model.module,"edit")||this.modellist.getSelectedCount()<1||this.modellist.getSelectedCount()>this.maxAllowed}get selectedCount(){return this.modellist.getSelectedCount()}get maxAllowed(){return this.actionconfig.maxAllowed?parseInt(this.actionconfig.maxAllowed,10):50}execute(){if(!this.disabled){this.modellist.getSelectedItems().filter((e=>!e.acl?.edit)).length>0?this.modal.info(this.language.getLabel("MSG_NO_EDIT_RIGHTS",null,"long"),this.language.getLabel("MSG_NO_EDIT_RIGHTS")):this.modal.openModal("ObjectListHeaderActionsAssignModal",!0,this.injector)}}}return ObjectListHeaderActionsAssignButton.ɵfac=function(e){return new(e||ObjectListHeaderActionsAssignButton)(m.Y36(h.d),m.Y36(b.Pu),m.Y36(g.o),m.Y36(v.t),m.Y36(z.o),m.Y36(m.zs3))},ObjectListHeaderActionsAssignButton.ɵcmp=m.Xpm({type:ObjectListHeaderActionsAssignButton,selectors:[["object-list-header-actions-assign-button"]],decls:3,vars:1,consts:[["label","LBL_ASSIGN"]],template:function(e,t){1&e&&(m.TgZ(0,"span"),m._UZ(1,"system-label",0),m._uU(2),m.qZA()),2&e&&(m.xp6(2),m.hij(" (",t.selectedCount,")"))},dependencies:[M._],encapsulation:2}),ObjectListHeaderActionsAssignButton})();var Je=s(2294),Ne=s(3634),Fe=s(9621),qe=s(3499),Ee=s(5767),Ye=s(1916);let Qe=(()=>{class ObjectListHeaderActionsAssignModal{constructor(e,t,s,i,n,l,o){this.view=e,this.broadcast=t,this.backend=s,this.toast=i,this.modal=n,this.model=l,this.modellist=o,this.self={},this.submitting=!1}ngOnInit(){this.model.module=this.modellist.module,this.model.initialize(),this.view.isEditable=!0,this.view.setEditMode()}close(){this.self.destroy()}get canSubmit(){return!this.submitting&&this.model.getField("assigned_user_id")}reassign(){this.submitting=!0;let e=this.modellist.getSelectedIDs(),t={assigned_user_id:this.model.getField("assigned_user_id"),ids:e},s=this.modal.await("updating");this.backend.postRequest(`module/${this.model.module}/massupdate/assign`,{},t).subscribe((e=>{if(e.success){for(let t of e.data)this.broadcast.broadcastMessage("model.save",{id:t.id,module:this.model.module,data:t});this.close()}else this.toast.sendToast("ERROR reassigning records","error"),this.submitting=!1;s.emit(!0)}),(e=>{this.toast.sendToast("ERROR reassigning records","error"),this.submitting=!1,s.emit(!0)}))}}return ObjectListHeaderActionsAssignModal.ɵfac=function(e){return new(e||ObjectListHeaderActionsAssignModal)(m.Y36(Je.e),m.Y36(ve.f),m.Y36(X.y),m.Y36(he.A),m.Y36(z.o),m.Y36(g.o),m.Y36(v.t))},ObjectListHeaderActionsAssignModal.ɵcmp=m.Xpm({type:ObjectListHeaderActionsAssignModal,selectors:[["object-list-header-actions-assign-modal"]],features:[m._Bn([g.o,Je.e])],decls:10,vars:1,consts:[["size","small"],[3,"close"],["label","LBL_ASSIGN"],["system-modal-overvlow-visible","",2,"overflow","visible"],["field","assigned_user_name"],[1,"slds-button","slds-button--neutral",3,"click"],["label","LBL_CANCEL"],[1,"slds-button","slds-button--brand",3,"disabled","click"]],template:function(e,t){1&e&&(m.TgZ(0,"system-modal",0)(1,"system-modal-header",1),m.NdJ("close",(function(){return t.close()})),m._UZ(2,"system-label",2),m.qZA(),m.TgZ(3,"system-modal-content",3),m._UZ(4,"field-container",4),m.qZA(),m.TgZ(5,"system-modal-footer")(6,"button",5),m.NdJ("click",(function(){return t.close()})),m._UZ(7,"system-label",6),m.qZA(),m.TgZ(8,"button",7),m.NdJ("click",(function(){return t.reassign()})),m._UZ(9,"system-label",2),m.qZA()()()),2&e&&(m.xp6(8),m.Q6J("disabled",!t.canSubmit))},dependencies:[Ne.j,M._,Fe.j,qe.x,Ee.p,Ye.y],encapsulation:2}),ObjectListHeaderActionsAssignModal})(),Ue=(()=>{class ObjectListHeaderActionsDeleteButton{constructor(e,t,s,i,n,l,o,a){this.language=e,this.metadata=t,this.model=s,this.modellist=i,this.modal=n,this.backend=l,this.broadcast=o,this.toast=a,this.actionconfig={},this.hidden=!0,this.metadata.checkModuleAcl(this.model.module,"delete")&&(this.hidden=!1)}get disabled(){return!this.metadata.checkModuleAcl(this.model.module,"delete")||this.modellist.getSelectedCount()<1||this.modellist.getSelectedCount()>this.maxAllowed}get selectedCount(){return this.modellist.getSelectedCount()}get maxAllowed(){return this.actionconfig.maxAllowed?parseInt(this.actionconfig.maxAllowed,10):100}execute(){if(!this.disabled){this.modellist.getSelectedItems().filter((e=>!e.acl?.delete)).length>0?this.modal.info(this.language.getLabel("MSG_NO_EDIT_RIGHTS",null,"long"),this.language.getLabel("MSG_NO_EDIT_RIGHTS")):this.modal.confirm(this.language.getLabelFormatted("MSG_DELETE_RECORDS",[this.modellist.getSelectedCount()],"long"),this.language.getLabel("MSG_DELETE_RECORDS")).subscribe((e=>{if(e){let e=this.modal.await("... processing ..."),t={ids:this.modellist.getSelectedIDs(),action:"DELETE"};this.backend.patchRequest(`module/${this.model.module}`,{},t).subscribe((t=>{for(let e of this.modellist.getSelectedIDs())this.broadcast.broadcastMessage("model.delete",{id:e,module:this.model.module});e.emit(!0)}),(()=>{this.toast.sendToast("ERROR deleting records","error"),e.emit(!0)}))}}))}}}return ObjectListHeaderActionsDeleteButton.ɵfac=function(e){return new(e||ObjectListHeaderActionsDeleteButton)(m.Y36(h.d),m.Y36(b.Pu),m.Y36(g.o),m.Y36(v.t),m.Y36(z.o),m.Y36(X.y),m.Y36(ve.f),m.Y36(he.A))},ObjectListHeaderActionsDeleteButton.ɵcmp=m.Xpm({type:ObjectListHeaderActionsDeleteButton,selectors:[["object-list-header-actions-delete-button"]],decls:3,vars:1,consts:[["label","LBL_DELETE"]],template:function(e,t){1&e&&(m.TgZ(0,"span"),m._UZ(1,"system-label",0),m._uU(2),m.qZA()),2&e&&(m.xp6(2),m.hij(" (",t.selectedCount,")"))},dependencies:[M._],encapsulation:2}),ObjectListHeaderActionsDeleteButton})(),De=(()=>{class ObjectListHeaderActionsMergeButton{constructor(e,t,s,i,n,l){this.language=e,this.metadata=t,this.model=s,this.modellist=i,this.modal=n,this.injector=l,this.actionconfig={},this.hidden=!1}get disabled(){return!this.metadata.checkModuleAcl(this.model.module,"delete")||this.modellist.getSelectedCount()<1||this.modellist.getSelectedCount()>this.maxAllowed}get maxAllowed(){return this.actionconfig.maxAllowed?parseInt(this.actionconfig.maxAllowed,10):3}get mergeCount(){return this.modellist.getSelectedCount()}execute(){if(!this.disabled){this.modellist.getSelectedItems().filter((e=>e.acl?.delete)).length<this.modellist.getSelectedCount()-1?this.modal.info(this.language.getLabel("MSG_NO_MERGE_DELETE",null,"long"),this.language.getLabel("MSG_NO_MERGE_DELETE")):this.modal.openModal("ObjectMergeModal",!0,this.injector).subscribe((e=>{e.instance.mergemodels=this.modellist.getSelectedItems()}))}}}return ObjectListHeaderActionsMergeButton.ɵfac=function(e){return new(e||ObjectListHeaderActionsMergeButton)(m.Y36(h.d),m.Y36(b.Pu),m.Y36(g.o),m.Y36(v.t),m.Y36(z.o),m.Y36(m.zs3))},ObjectListHeaderActionsMergeButton.ɵcmp=m.Xpm({type:ObjectListHeaderActionsMergeButton,selectors:[["object-list-header-actions-merge-button"]],decls:3,vars:1,consts:[["label","LBL_MERGE"]],template:function(e,t){1&e&&(m.TgZ(0,"span"),m._UZ(1,"system-label",0),m._uU(2),m.qZA()),2&e&&(m.xp6(2),m.hij(" (",t.mergeCount,")"))},dependencies:[M._],encapsulation:2}),ObjectListHeaderActionsMergeButton})(),je=(()=>{class ObjectListHeaderActionsExportCSVButton{constructor(e,t,s,i,n,l){this.language=e,this.metadata=t,this.model=s,this.modellist=i,this.modal=n,this.injector=l,this.hidden=!1}get disabled(){return!this.metadata.checkModuleAcl(this.model.module,"export")||0==this.modellist.getSelectedCount()}get exportcount(){let e=this.modellist.getSelectedCount();return e||this.modellist.listData.totalcount}execute(){this.disabled||this.modal.openModal("ObjectListHeaderActionsExportCSVSelectFields",!0,this.injector)}}return ObjectListHeaderActionsExportCSVButton.ɵfac=function(e){return new(e||ObjectListHeaderActionsExportCSVButton)(m.Y36(h.d),m.Y36(b.Pu),m.Y36(g.o),m.Y36(v.t),m.Y36(z.o),m.Y36(m.zs3))},ObjectListHeaderActionsExportCSVButton.ɵcmp=m.Xpm({type:ObjectListHeaderActionsExportCSVButton,selectors:[["object-list-header-actions-export-csv-button"]],decls:3,vars:1,consts:[["label","LBL_EXPORT"]],template:function(e,t){1&e&&(m.TgZ(0,"span"),m._UZ(1,"system-label",0),m._uU(2),m.qZA()),2&e&&(m.xp6(2),m.hij(" (",t.exportcount,")"))},dependencies:[M._],encapsulation:2}),ObjectListHeaderActionsExportCSVButton})();var Re=s(7674);function Be(e,t){if(1&e){const e=m.EpF();m.TgZ(0,"div",15),m.NdJ("click",(function(){const t=m.CHM(e).$implicit,s=m.oxw();return m.KtG(s.selectField("available",t))})),m.TgZ(1,"span",16),m._UZ(2,"system-label-fieldname",17),m._uU(3),m.qZA()()}if(2&e){const e=t.$implicit,s=m.oxw();m.Q6J("cdkDragData",e),m.uIk("aria-selected",s.isSelected("available",e)),m.xp6(2),m.Q6J("module",s.model.module)("field",e),m.xp6(1),m.hij(" (",e,")")}}function Ge(e,t){if(1&e){const e=m.EpF();m.TgZ(0,"div",15),m.NdJ("click",(function(){const t=m.CHM(e).$implicit,s=m.oxw();return m.KtG(s.selectField("list",t))})),m.TgZ(1,"span",16),m._UZ(2,"system-label-fieldname",17),m._uU(3),m.qZA()()}if(2&e){const e=t.$implicit,s=m.oxw();m.Q6J("cdkDragData",e),m.uIk("aria-selected",s.isSelected("list",e)),m.xp6(2),m.Q6J("module",s.model.module)("field",e),m.xp6(1),m.hij(" (",e,")")}}const Pe=function(e){return[e]};let He=(()=>{class ObjectListHeaderActionsExportCSVSelectFields{constructor(e,t,s,i,n){this.language=e,this.metadata=t,this.model=s,this.modellist=i,this.modal=n,this.multiselect=!0,this.selectedAvailableFields=[],this.selectedListFields=[],this.availableFields=[],this.exportFields=[],this.exportFields=[];for(let e of this.modellist.listfields)this.exportFields.push(e.field);let l=this.metadata.getComponentConfig("ObjectListHeaderActionsExportCSVSelectFields",this.model.module);if(l.enableall){let e=this.metadata.getModuleFields(this.model.module);for(let t in e)this.isExportable(e[t])&&-1==this.exportFields.indexOf(t)&&this.availableFields.push(t)}else if(l.fieldset){let e=this.metadata.getFieldSetFields(l.fieldset);for(let t of e)this.isExportable(t)&&-1==this.exportFields.indexOf(t.field)&&this.availableFields.push(t.field)}else{let e=this.metadata.getComponentConfig("ObjectList",this.modellist.module),t=this.metadata.getFieldSetFields(e.fieldset);for(let e of t)this.isExportable(e)&&-1==this.exportFields.indexOf(e.field)&&this.availableFields.push(e.field)}this.sortAvailableFields()}isExportable(e){return"link"!=e.type}onFieldDrop(e){let t=e.previousContainer.data.splice(e.previousIndex,1);e.container.data.splice(e.currentIndex,0,t[0])}selectField(e,t){switch(e){case"available":!1===this.multiselect?this.selectedAvailableFields=[t]:this.selectedAvailableFields.indexOf(t)>=0?this.selectedAvailableFields.splice(this.selectedAvailableFields.indexOf(t),1):this.selectedAvailableFields.push(t);break;case"list":!1===this.multiselect?this.selectedListFields=[t]:this.selectedListFields.indexOf(t)>=0?this.selectedListFields.splice(this.selectedListFields.indexOf(t),1):this.selectedListFields.push(t)}}isSelected(e,t){switch(e){case"available":return this.selectedAvailableFields.indexOf(t)>=0;case"list":return this.selectedListFields.indexOf(t)>=0}}moveFields(e){switch(e){case"available":this.selectedAvailableFields.forEach((e=>{this.availableFields.some(((t,s)=>{if(e==t)return this.exportFields.push(this.availableFields.splice(s,1)[0]),!0}))})),this.selectedAvailableFields=[];break;case"list":this.selectedListFields.forEach((e=>{this.exportFields.some(((t,s)=>{if(e==t)return this.availableFields.push(this.exportFields.splice(s,1)[0]),!0}))})),this.selectedListFields=[],this.sortAvailableFields()}}sortAvailableFields(){this.availableFields=this.availableFields.sort(((e,t)=>this.language.getFieldDisplayName(this.model.module,e).toLowerCase()>this.language.getFieldDisplayName(this.model.module,t).toLowerCase()?1:-1))}cancel(){this.self.destroy()}export(){this.modal.openModal("SystemLoadingModal").subscribe((e=>{e.instance.messagelabel="LBL_EXPORTING",this.modellist.exportList(this.exportFields).subscribe((t=>{e.instance.self.destroy();let s=document.createElement("a");document.body.appendChild(s),s.href=t,s.download=this.model.module+"_"+(new moment).format("YYYY_MM_DD_HH_mm")+".csv",s.click(),s.remove(),this.self.destroy()}))}))}}return ObjectListHeaderActionsExportCSVSelectFields.ɵfac=function(e){return new(e||ObjectListHeaderActionsExportCSVSelectFields)(m.Y36(h.d),m.Y36(b.Pu),m.Y36(g.o),m.Y36(v.t),m.Y36(z.o))},ObjectListHeaderActionsExportCSVSelectFields.ɵcmp=m.Xpm({type:ObjectListHeaderActionsExportCSVSelectFields,selectors:[["ng-component"]],decls:22,vars:10,consts:[[3,"close"],["label","LBL_EXPORT"],[1,"slds-grid","slds-p-horizontal--x-small"],[1,"slds-form-element","slds-m-horizontal--small","slds-size--1-of-2"],[1,"slds-form-element__label"],["label","LBL_AVAILABLE_FIELDS"],["cdkDropList","",1,"slds-picklist","slds-picklist__options","slds-size--1-of-1",2,"height","50vh",3,"cdkDropListData","cdkDropListConnectedTo","cdkDropListDropped"],["listOne","cdkDropList"],["cdkDrag","","class","slds-drag--preview slds-picklist__item","role","option",3,"cdkDragData","click",4,"ngFor","ngForOf"],["label","LBL_EXPORT_FIELDS"],["cdkDropList","",1,"slds-picklist","slds-picklist__options","slds-size--1-of-1","cdk-drag",2,"height","50vh",3,"cdkDropListData","cdkDropListConnectedTo","cdkDropListDropped"],["listTwo","cdkDropList"],[1,"slds-button","slds-button--neutral",3,"click"],["label","LBL_CANCEL"],[1,"slds-button","slds-button--brand",3,"click"],["cdkDrag","","role","option",1,"slds-drag--preview","slds-picklist__item",3,"cdkDragData","click"],[1,"slds-truncate"],[3,"module","field"]],template:function(e,t){if(1&e&&(m.TgZ(0,"system-modal")(1,"system-modal-header",0),m.NdJ("close",(function(){return t.cancel()})),m._UZ(2,"system-label",1),m.qZA(),m.TgZ(3,"system-modal-content")(4,"div",2)(5,"div",3)(6,"span",4),m._UZ(7,"system-label",5),m.qZA(),m.TgZ(8,"div",6,7),m.NdJ("cdkDropListDropped",(function(e){return t.onFieldDrop(e)})),m.YNc(10,Be,4,5,"div",8),m.qZA()(),m.TgZ(11,"div",3)(12,"span",4),m._UZ(13,"system-label",9),m.qZA(),m.TgZ(14,"div",10,11),m.NdJ("cdkDropListDropped",(function(e){return t.onFieldDrop(e)})),m.YNc(16,Ge,4,5,"div",8),m.qZA()()()(),m.TgZ(17,"system-modal-footer")(18,"button",12),m.NdJ("click",(function(){return t.cancel()})),m._UZ(19,"system-label",13),m.qZA(),m.TgZ(20,"button",14),m.NdJ("click",(function(){return t.export()})),m._UZ(21,"system-label",1),m.qZA()()()),2&e){const e=m.MAs(9),s=m.MAs(15);m.xp6(8),m.Q6J("cdkDropListData",t.availableFields)("cdkDropListConnectedTo",m.VKq(6,Pe,s)),m.xp6(2),m.Q6J("ngForOf",t.availableFields),m.xp6(4),m.Q6J("cdkDropListData",t.exportFields)("cdkDropListConnectedTo",m.VKq(8,Pe,e)),m.xp6(2),m.Q6J("ngForOf",t.exportFields)}},dependencies:[i.sg,n.Wj,n.Zt,M._,Re.h,Fe.j,qe.x,Ee.p,Ye.y],encapsulation:2}),ObjectListHeaderActionsExportCSVSelectFields})(),ze=(()=>{class ObjectListHeaderActionsExportTargetlistButton{constructor(e,t,s,i,n,l){this.language=e,this.metadata=t,this.model=s,this.modellist=i,this.modal=n,this.injector=l}get hidden(){if(!this.metadata.checkModuleAcl("ProspectLists","create"))return!0;let e=!1,t=this.metadata.getModuleFields(this.modellist.module);for(let s in t){let i=t[s];if("link"==i.type&&"ProspectLists"==i.module){e=!0;break}}return!e||!this.metadata.checkModuleAcl(this.model.module,"export")}get disabled(){return 0==this.modellist.getSelectedCount()}get exportcount(){let e=this.modellist.getSelectedCount();return e||this.modellist.listData.totalcount}execute(){this.modal.openModal("ObjectListHeaderActionsExportTargetlistModal",!0,this.injector)}}return ObjectListHeaderActionsExportTargetlistButton.ɵfac=function(e){return new(e||ObjectListHeaderActionsExportTargetlistButton)(m.Y36(h.d),m.Y36(b.Pu),m.Y36(g.o),m.Y36(v.t),m.Y36(z.o),m.Y36(m.zs3))},ObjectListHeaderActionsExportTargetlistButton.ɵcmp=m.Xpm({type:ObjectListHeaderActionsExportTargetlistButton,selectors:[["object-list-header-actions-export-targetlist-button"]],decls:3,vars:1,consts:[["label","LBL_EXPORT_PROSPECTLIST"]],template:function(e,t){1&e&&(m.TgZ(0,"span"),m._UZ(1,"system-label",0),m._uU(2),m.qZA()),2&e&&(m.xp6(2),m.hij(" (",t.exportcount,")"))},dependencies:[M._],encapsulation:2}),ObjectListHeaderActionsExportTargetlistButton})(),Ve=(()=>{class ObjectListHeaderActionsExportTargetlistModal{constructor(e,t,s,i,n,l,o){this.language=e,this.router=t,this.metadata=s,this.backend=i,this.toast=n,this.modal=l,this.modellist=o,this.self={},this.targetlistname=""}close(){this.self.destroy()}get itemcount(){let e=this.modellist.getSelectedCount();return e||this.modellist.listData.totalcount}export(){this.modal.openModal("SystemLoadingModal").subscribe((e=>{e.instance.messagelabel="LBL_EXPORTING";let t=this.modellist.getSelectedIDs(),s={listtype:this.modellist.currentList.id,targetlistname:this.targetlistname,owner:"owner"==this.modellist.currentList.id,module:this.modellist.module,modulefilter:this.modellist.modulefilter,searchterm:this.modellist.searchTerm,aggregates:this.modellist.selectedAggregates,listid:this.modellist.currentList.id,ids:t};this.backend.postRequest("module/ProspectLists/exportfromlist",{},s).subscribe((t=>{e.instance.self.destroy(),"success"==t.status?(this.router.navigate(["/module/ProspectLists/"+t.id]),this.close()):this.toast.sendToast(t.msg,"error")}))}))}}return ObjectListHeaderActionsExportTargetlistModal.ɵfac=function(e){return new(e||ObjectListHeaderActionsExportTargetlistModal)(m.Y36(h.d),m.Y36(o.F0),m.Y36(b.Pu),m.Y36(X.y),m.Y36(he.A),m.Y36(z.o),m.Y36(v.t))},ObjectListHeaderActionsExportTargetlistModal.ɵcmp=m.Xpm({type:ObjectListHeaderActionsExportTargetlistModal,selectors:[["object-list-header-actions-export-targetlist-modal"]],features:[m._Bn([g.o])],decls:19,vars:3,consts:[[3,"close"],["label","LBL_EXPORT_PROSPECTLIST"],["label","LBL_RECORDS"],[1,"slds-form-element"],[1,"slds-form-element__label"],["title","required",1,"slds-required"],["label","LBL_PROSPECTLIST"],[1,"slds-form-element__control"],["type","text",1,"slds-input",3,"ngModel","ngModelChange"],[1,"slds-button","slds-button--neutral",3,"click"],["label","LBL_CANCEL"],[1,"slds-button","slds-button--brand",3,"disabled","click"],["label","LBL_EXPORT"]],template:function(e,t){1&e&&(m.TgZ(0,"system-modal")(1,"system-modal-header",0),m.NdJ("close",(function(){return t.close()})),m._UZ(2,"system-label",1),m._uU(3),m._UZ(4,"system-label",2),m._uU(5,")"),m.qZA(),m.TgZ(6,"system-modal-content")(7,"div",3)(8,"label",4)(9,"abbr",5),m._uU(10,"*"),m.qZA(),m._UZ(11,"system-label",6),m.qZA(),m.TgZ(12,"div",7)(13,"input",8),m.NdJ("ngModelChange",(function(e){return t.targetlistname=e})),m.qZA()()()(),m.TgZ(14,"system-modal-footer")(15,"button",9),m.NdJ("click",(function(){return t.close()})),m._UZ(16,"system-label",10),m.qZA(),m.TgZ(17,"button",11),m.NdJ("click",(function(){return t.export()})),m._UZ(18,"system-label",12),m.qZA()()()),2&e&&(m.xp6(3),m.hij(" (",t.itemcount," "),m.xp6(10),m.Q6J("ngModel",t.targetlistname),m.xp6(4),m.Q6J("disabled",!t.targetlistname))},dependencies:[l.Fj,l.JJ,l.On,M._,Fe.j,qe.x,Ee.p,Ye.y],encapsulation:2}),ObjectListHeaderActionsExportTargetlistModal})(),Ke=(()=>{class ObjectListHeaderActionsSelectAllButton{constructor(e,t,s,i,n){this.language=e,this.metadata=t,this.model=s,this.modellist=i,this.modal=n,this.hidden=!1}get disabled(){return 0==this.modellist.listData.list.length}execute(){this.modellist.setAllSelected()}}return ObjectListHeaderActionsSelectAllButton.ɵfac=function(e){return new(e||ObjectListHeaderActionsSelectAllButton)(m.Y36(h.d),m.Y36(b.Pu),m.Y36(g.o),m.Y36(v.t),m.Y36(z.o))},ObjectListHeaderActionsSelectAllButton.ɵcmp=m.Xpm({type:ObjectListHeaderActionsSelectAllButton,selectors:[["object-list-header-actions-select-all-button"]],decls:2,vars:0,consts:[[1,"slds-truncate"],["label","LBL_SELECT_ALL"]],template:function(e,t){1&e&&(m.TgZ(0,"span",0),m._UZ(1,"system-label",1),m.qZA())},dependencies:[M._],encapsulation:2}),ObjectListHeaderActionsSelectAllButton})(),$e=(()=>{class ObjectListHeaderActionsUnselectAllButton{constructor(e,t,s,i,n){this.language=e,this.metadata=t,this.model=s,this.modellist=i,this.modal=n,this.disabled=!1}get hasSelection(){return this.modellist.getSelectedCount()>0}get hidden(){return!this.hasSelection}execute(){this.modellist.setAllUnselected()}}return ObjectListHeaderActionsUnselectAllButton.ɵfac=function(e){return new(e||ObjectListHeaderActionsUnselectAllButton)(m.Y36(h.d),m.Y36(b.Pu),m.Y36(g.o),m.Y36(v.t),m.Y36(z.o))},ObjectListHeaderActionsUnselectAllButton.ɵcmp=m.Xpm({type:ObjectListHeaderActionsUnselectAllButton,selectors:[["object-list-header-actions-unselect-all-button"]],decls:2,vars:0,consts:[[1,"slds-truncate"],["label","LBL_UNSELECT_ALL"]],template:function(e,t){1&e&&(m.TgZ(0,"span",0),m._UZ(1,"system-label",1),m.qZA())},dependencies:[M._],encapsulation:2}),ObjectListHeaderActionsUnselectAllButton})(),Xe=(()=>{class ObjectListHeaderActionsSelectRangeButton{constructor(e,t,s,i){this.model=e,this.modellist=t,this.modal=s,this.injector=i,this.hidden=!1}get disabled(){return 0==this.modellist.listData.list.length}execute(){this.modal.openModal("ObjectListHeaderActionsSelectRangeModal",!0,this.injector)}}return ObjectListHeaderActionsSelectRangeButton.ɵfac=function(e){return new(e||ObjectListHeaderActionsSelectRangeButton)(m.Y36(g.o),m.Y36(v.t),m.Y36(z.o),m.Y36(m.zs3))},ObjectListHeaderActionsSelectRangeButton.ɵcmp=m.Xpm({type:ObjectListHeaderActionsSelectRangeButton,selectors:[["object-list-header-actions-select-range-button"]],decls:2,vars:0,consts:[[1,"slds-truncate"],["label","LBL_SELECT_RANGE"]],template:function(e,t){1&e&&(m.TgZ(0,"span",0),m._UZ(1,"system-label",1),m.qZA())},dependencies:[M._],encapsulation:2}),ObjectListHeaderActionsSelectRangeButton})(),We=(()=>{class ObjectListHeaderActionsSelectRangeModal{constructor(e,t){this.model=e,this.modellist=t,this.from=1}ngOnInit(){this.to=this.modellist.listData.list.length}close(){this.self.destroy()}get canSelect(){return!(!this.from||!this.to)&&(!(this.from<1||this.to<1)&&(!(this.to<=this.from)&&!(this.to>this.modellist.listData.list.length)))}select(){this.canSelect&&(this.modellist.setRangeSelected(this.from,this.to),this.close())}}return ObjectListHeaderActionsSelectRangeModal.ɵfac=function(e){return new(e||ObjectListHeaderActionsSelectRangeModal)(m.Y36(g.o),m.Y36(v.t))},ObjectListHeaderActionsSelectRangeModal.ɵcmp=m.Xpm({type:ObjectListHeaderActionsSelectRangeModal,selectors:[["object-list-header-actions-select-range-modal"]],decls:18,vars:3,consts:[["size","small"],[3,"close"],["label","LBL_SELECT_RANGE"],[1,"slds-grid","slds-grid--vertical-align-center","slds-gutters_direct-small"],[1,"slds-col","slds-size--1-of-2","slds-grid","slds-grid--vertical-align-center"],[1,"slds-size--1-of-3","slds-text-align--center"],["label","LBL_FROM"],["type","number",1,"slds-input","slds-size--2-of-3",3,"ngModel","ngModelChange"],["label","LBL_TO"],[1,"slds-button","slds-button--neutral",3,"click"],["label","LBL_CLOSE"],[1,"slds-button","slds-button--brand",3,"disabled","click"],["label","LBL_SELECT"]],template:function(e,t){1&e&&(m.TgZ(0,"system-modal",0)(1,"system-modal-header",1),m.NdJ("close",(function(){return t.close()})),m._UZ(2,"system-label",2),m.qZA(),m.TgZ(3,"system-modal-content")(4,"div",3)(5,"div",4)(6,"div",5),m._UZ(7,"system-label",6),m.qZA(),m.TgZ(8,"input",7),m.NdJ("ngModelChange",(function(e){return t.from=e})),m.qZA()(),m.TgZ(9,"div",4)(10,"div",5),m._UZ(11,"system-label",8),m.qZA(),m.TgZ(12,"input",7),m.NdJ("ngModelChange",(function(e){return t.to=e})),m.qZA()()()(),m.TgZ(13,"system-modal-footer")(14,"button",9),m.NdJ("click",(function(){return t.close()})),m._UZ(15,"system-label",10),m.qZA(),m.TgZ(16,"button",11),m.NdJ("click",(function(){return t.select()})),m._UZ(17,"system-label",12),m.qZA()()()),2&e&&(m.xp6(8),m.Q6J("ngModel",t.from),m.xp6(4),m.Q6J("ngModel",t.to),m.xp6(4),m.Q6J("disabled",!t.canSelect))},dependencies:[l.Fj,l.wV,l.JJ,l.On,M._,Fe.j,qe.x,Ee.p,Ye.y],encapsulation:2}),ObjectListHeaderActionsSelectRangeModal})();var et=s(6857);const tt=["fieldcontainer"];let st=(()=>{class ObjectListItemField{constructor(e,t,s){this.model=e,this.language=t,this.metadata=s,this.field=""}ngAfterViewInit(){this.buildContainer()}buildContainer(){this.metadata.addComponent("fieldGeneric",this.fieldcontainer).subscribe((e=>{e.instance.fieldname=this.field}))}}return ObjectListItemField.ɵfac=function(e){return new(e||ObjectListItemField)(m.Y36(g.o),m.Y36(h.d),m.Y36(b.Pu))},ObjectListItemField.ɵcmp=m.Xpm({type:ObjectListItemField,selectors:[["object-list-item--field"]],viewQuery:function(e,t){if(1&e&&m.Gf(tt,7,m.s_b),2&e){let e;m.iGM(e=m.CRH())&&(t.fieldcontainer=e.first)}},inputs:{field:"field"},decls:3,vars:1,consts:[[1,"slds-truncate",3,"title"],["fieldcontainer",""]],template:function(e,t){1&e&&(m.TgZ(0,"div",0),m._UZ(1,"div",null,1),m.qZA()),2&e&&m.s9C("title",t.field)},encapsulation:2}),ObjectListItemField})();var it=s(586),nt=s(699),lt=s(6094);let ot=(()=>{class ObjectActionsetMenuContainerEdit{constructor(e,t){this.language=e,this.model=t}doAction(){this.model.checkAccess("edit")&&this.model.edit(!0)}}return ObjectActionsetMenuContainerEdit.ɵfac=function(e){return new(e||ObjectActionsetMenuContainerEdit)(m.Y36(h.d),m.Y36(g.o))},ObjectActionsetMenuContainerEdit.ɵcmp=m.Xpm({type:ObjectActionsetMenuContainerEdit,selectors:[["object-actionset-menu-container-edit"]],decls:4,vars:0,consts:[["role","presentation",1,"slds-dropdown__item",3,"click"],["href","javascript:void(0);","role","menuitem"],[1,"slds-truncate"],["label","LBL_EDIT"]],template:function(e,t){1&e&&(m.TgZ(0,"li",0),m.NdJ("click",(function(){return t.doAction()})),m.TgZ(1,"a",1)(2,"span",2),m._UZ(3,"system-label",3),m.qZA()()())},dependencies:[M._],encapsulation:2}),ObjectActionsetMenuContainerEdit})();var at=s(3441);let dt=(()=>{class ObjectActionsetMenuContainerDelete{constructor(e,t,s){this.language=e,this.model=t,this.helper=s}doAction(){this.model.checkAccess("delete")&&this.helper.confirm(this.language.getLabel("LBL_DELETE_RECORD"),this.language.getLabel("MSG_DELETE_CONFIRM")).subscribe((e=>{e&&this.model.delete()}))}}return ObjectActionsetMenuContainerDelete.ɵfac=function(e){return new(e||ObjectActionsetMenuContainerDelete)(m.Y36(h.d),m.Y36(g.o),m.Y36(at._))},ObjectActionsetMenuContainerDelete.ɵcmp=m.Xpm({type:ObjectActionsetMenuContainerDelete,selectors:[["ng-component"]],decls:4,vars:0,consts:[["role","presentation",1,"slds-dropdown__item",3,"click"],["href","javascript:void(0);","role","menuitem"],[1,"slds-truncate"],["label","LBL_DELETE"]],template:function(e,t){1&e&&(m.TgZ(0,"li",0),m.NdJ("click",(function(){return t.doAction()})),m.TgZ(1,"a",1)(2,"span",2),m._UZ(3,"system-label",3),m.qZA()()())},dependencies:[M._],encapsulation:2}),ObjectActionsetMenuContainerDelete})();function rt(e,t){1&e&&m._UZ(0,"system-button-icon",2)}function ct(e,t){1&e&&(m.TgZ(0,"span"),m._UZ(1,"system-label",3),m.qZA())}let ut=(()=>{class ObjectActionEditButton{constructor(e,t,s){this.language=e,this.metadata=t,this.model=s,this.displayasicon=!1}get hidden(){return this.model.isEditing}get disabled(){return!this.model.checkAccess("edit")||(this.model.isEditing||this.model.isSaving)}execute(){this.model.edit()}}return ObjectActionEditButton.ɵfac=function(e){return new(e||ObjectActionEditButton)(m.Y36(h.d),m.Y36(b.Pu),m.Y36(g.o))},ObjectActionEditButton.ɵcmp=m.Xpm({type:ObjectActionEditButton,selectors:[["object-action-edit-button"]],decls:2,vars:2,consts:[["icon","edit",4,"ngIf"],[4,"ngIf"],["icon","edit"],["label","LBL_EDIT"]],template:function(e,t){1&e&&(m.YNc(0,rt,1,0,"system-button-icon",0),m.YNc(1,ct,2,0,"span",1)),2&e&&(m.Q6J("ngIf",t.displayasicon),m.xp6(1),m.Q6J("ngIf",!t.displayasicon))},dependencies:[i.O5,x.J,M._],encapsulation:2}),ObjectActionEditButton})(),mt=(()=>{class ObjectActionEditRelatedButton{constructor(e,t,s,i){this.language=e,this.metadata=t,this.parent=s,this.model=i,this.disabled=!0,this.actionconfig={},this.subscriptions=new R.w0}ngOnInit(){this.handleDisabled(this.parent.isEditing?"edit":"display"),this.subscriptions.add(this.parent.mode$.subscribe((e=>{this.handleDisabled(e)}))),this.subscriptions.add(this.parent.data$.subscribe((e=>{this.model.module=this.actionconfig.module,this.model.id=this.parent.getFieldValue(this.actionconfig.parent_field),this.handleDisabled(this.parent.isEditing?"edit":"display")})))}get hidden(){return!this.model.id}execute(){this.model.edit(!0)}ngOnDestroy(){this.subscriptions.unsubscribe()}handleDisabled(e){this.parent.checkAccess("edit")?this.disabled="edit"==e:this.disabled=!0}}return ObjectActionEditRelatedButton.ɵfac=function(e){return new(e||ObjectActionEditRelatedButton)(m.Y36(h.d),m.Y36(b.Pu),m.Y36(g.o,4),m.Y36(g.o))},ObjectActionEditRelatedButton.ɵcmp=m.Xpm({type:ObjectActionEditRelatedButton,selectors:[["object-action-edit-related-button"]],features:[m._Bn([g.o])],decls:2,vars:0,consts:[["label","LBL_EDIT_RELATED"]],template:function(e,t){1&e&&(m.TgZ(0,"span"),m._UZ(1,"system-label",0),m.qZA())},dependencies:[M._],encapsulation:2}),ObjectActionEditRelatedButton})();function ht(e,t){1&e&&m._UZ(0,"system-button-icon",2)}function gt(e,t){1&e&&(m.TgZ(0,"span"),m._UZ(1,"system-label",3),m.qZA())}let pt=(()=>{class ObjectActionDeleteButton{constructor(e,t,s,i,n,l,o){this.metadata=e,this.model=t,this.navigationtab=s,this.router=i,this.modal=n,this.toast=l,this.injector=o,this.displayasicon=!1,this.actionconfig={}}get disabled(){return!this.canDelete}get canDelete(){try{return this.model.checkAccess("delete")&&!this.model.isEditing}catch(e){return!1}}execute(){this.modal.confirm("MSG_DELETE_RECORD","MSG_DELETE_RECORD").subscribe((e=>{e&&this.delete()}))}delete(){this.model.delete().subscribe((e=>{this.completeAction()}),(()=>{this.toast.sendToast("LBL_ERROR_DELETING_RECORD","error")}))}completeAction(){1!=this.actionconfig.noredirectoncomplete&&(this.navigationtab&&"main"!=this.navigationtab.tabid?this.navigationtab.closeTab():this.router.navigate(["/module/"+this.model.module]))}}return ObjectActionDeleteButton.ɵfac=function(e){return new(e||ObjectActionDeleteButton)(m.Y36(b.Pu),m.Y36(g.o),m.Y36(Ze.d,8),m.Y36(o.F0),m.Y36(z.o),m.Y36(he.A),m.Y36(m.zs3))},ObjectActionDeleteButton.ɵcmp=m.Xpm({type:ObjectActionDeleteButton,selectors:[["object-action-delete-button"]],decls:2,vars:2,consts:[["icon","delete",4,"ngIf"],[4,"ngIf"],["icon","delete"],["label","LBL_DELETE"]],template:function(e,t){1&e&&(m.YNc(0,ht,1,0,"system-button-icon",0),m.YNc(1,gt,2,0,"span",1)),2&e&&(m.Q6J("ngIf",t.displayasicon),m.xp6(1),m.Q6J("ngIf",!t.displayasicon))},dependencies:[i.O5,x.J,M._],encapsulation:2}),ObjectActionDeleteButton})(),ft=(()=>{class ObjectActionAuditlogButton{constructor(e,t,s,i,n){this.language=e,this.metadata=t,this.model=s,this.modal=i,this.ViewContainerRef=n,this.disabled=!0,this.hidden=!0}ngOnInit(){this.metadata.getModuleDefs(this.model.module).audited&&(this.disabled=!1,this.hidden=!1)}execute(){this.modal.openModal("ObjectActionAuditlogModal",!0,this.ViewContainerRef.injector)}}return ObjectActionAuditlogButton.ɵfac=function(e){return new(e||ObjectActionAuditlogButton)(m.Y36(h.d),m.Y36(b.Pu),m.Y36(g.o),m.Y36(z.o),m.Y36(m.s_b))},ObjectActionAuditlogButton.ɵcmp=m.Xpm({type:ObjectActionAuditlogButton,selectors:[["object-action-auditlog-button"]],decls:2,vars:0,consts:[["label","LBL_AUDITLOG"]],template:function(e,t){1&e&&(m.TgZ(0,"span"),m._UZ(1,"system-label",0),m.qZA())},dependencies:[M._],encapsulation:2}),ObjectActionAuditlogButton})();function bt(e,t){1&e&&m._UZ(0,"system-button-icon",2)}function _t(e,t){1&e&&(m.TgZ(0,"span"),m._UZ(1,"system-label",3),m.qZA())}let yt=(()=>{class ObjectActionOpenButton{constructor(e,t,s,i,n,l,o){this.language=e,this.metadata=t,this.model=s,this.router=i,this.helper=n,this.view=l,this.navigationtab=o,this.displayasicon=!1}get disabled(){return!this.model.checkAccess("detail")||this.view.isEditMode()}execute(){this.model.goDetail(this.navigationtab.tabid)}}return ObjectActionOpenButton.ɵfac=function(e){return new(e||ObjectActionOpenButton)(m.Y36(h.d),m.Y36(b.Pu),m.Y36(g.o),m.Y36(o.F0),m.Y36(at._),m.Y36(Je.e),m.Y36(Ze.d))},ObjectActionOpenButton.ɵcmp=m.Xpm({type:ObjectActionOpenButton,selectors:[["object-action-open-button"]],features:[m._Bn([at._])],decls:2,vars:2,consts:[["icon","open",4,"ngIf"],[4,"ngIf"],["icon","open"],["label","LBL_OPEN"]],template:function(e,t){1&e&&(m.YNc(0,bt,1,0,"system-button-icon",0),m.YNc(1,_t,2,0,"span",1)),2&e&&(m.Q6J("ngIf",t.displayasicon),m.xp6(1),m.Q6J("ngIf",!t.displayasicon))},dependencies:[i.O5,x.J,M._],encapsulation:2}),ObjectActionOpenButton})();var vt=s(8032);function xt(e,t){if(1&e&&m._UZ(0,"system-button-icon",2),2&e){const e=m.oxw();m.Q6J("title",e.language.getLabel("LBL_CANCEL"))}}function Zt(e,t){1&e&&(m.TgZ(0,"span"),m._UZ(1,"system-label",3),m.qZA())}let wt=(()=>{class ObjectActionCancelButton{constructor(e,t,s,i,n,l,o){this.language=e,this.metadata=t,this.model=s,this.router=i,this.helper=n,this.view=l,this.modalwindow=o,this.actionemitter=new m.vpe,this.displayasicon=!1}get disabled(){return this.model.isSaving}get hidden(){return!this.model.isEditing}execute(){this.model.cancelEdit(),this.view.setViewMode(),this.actionemitter.emit("cancel"),this.modalwindow&&this.modalwindow.self.destroy()}}return ObjectActionCancelButton.ɵfac=function(e){return new(e||ObjectActionCancelButton)(m.Y36(h.d),m.Y36(b.Pu),m.Y36(g.o),m.Y36(o.F0),m.Y36(at._),m.Y36(Je.e),m.Y36(vt.S,8))},ObjectActionCancelButton.ɵcmp=m.Xpm({type:ObjectActionCancelButton,selectors:[["object-action-cancel-button"]],outputs:{actionemitter:"actionemitter"},features:[m._Bn([at._])],decls:2,vars:2,consts:[["icon","close",3,"title",4,"ngIf"],[4,"ngIf"],["icon","close",3,"title"],["label","LBL_CANCEL"]],template:function(e,t){1&e&&(m.YNc(0,xt,1,1,"system-button-icon",0),m.YNc(1,Zt,2,0,"span",1)),2&e&&(m.Q6J("ngIf",t.displayasicon),m.xp6(1),m.Q6J("ngIf",!t.displayasicon))},dependencies:[i.O5,x.J,M._],encapsulation:2}),ObjectActionCancelButton})(),Tt=(()=>{class ObjectActionModalSaveButton{constructor(e,t,s,i,n){this.language=e,this.metadata=t,this.model=s,this.modal=i,this.modalwindow=n,this.actionemitter=new m.vpe,this.actionconfig={}}get displayLabel(){return this.actionconfig.label?this.actionconfig.label:this.actionconfig.gorelated?"LBL_SAVE_AND_GO_TO_RECORD":"LBL_SAVE"}execute(){this.model.validate()&&(this.model.isNew&&this.metadata.getModuleDuplicatecheck(this.model.module)?this.modal.openModal("SystemLoadingModal").subscribe((e=>{e.instance.messagelabel="LBL_CHECKING_DUPLICATES",this.model.duplicateCheck(!0).subscribe((t=>{e.instance.self.destroy(),t.count>0?(this.model.duplicates=t.records,this.model.duplicatecount=t.count,this.modal.confirm(this.language.getLabel("MSG_DUPLICATES_FOUND",null,"long"),this.language.getLabel("MSG_DUPLICATES_FOUND")).subscribe((e=>{e&&this.saveModel()}))):this.saveModel()}))})):this.saveModel())}saveModel(){this.modal.openModal("SystemLoadingModal").subscribe((e=>{e.instance.messagelabel="LBL_SAVING_DATA",this.model.save(!0).subscribe((t=>{this.model.endEdit(),t&&this.actionconfig.gorelated&&this.actionemitter.emit("savegodetail"),e.instance.self.destroy(),this.actionemitter.emit("save")}),(t=>{e.instance.self.destroy()}))}))}}return ObjectActionModalSaveButton.ɵfac=function(e){return new(e||ObjectActionModalSaveButton)(m.Y36(h.d),m.Y36(b.Pu),m.Y36(g.o),m.Y36(z.o),m.Y36(vt.S,8))},ObjectActionModalSaveButton.ɵcmp=m.Xpm({type:ObjectActionModalSaveButton,selectors:[["object-action-modal-save-button"]],outputs:{actionemitter:"actionemitter"},features:[m._Bn([at._])],decls:2,vars:1,consts:[[3,"label"]],template:function(e,t){1&e&&(m.TgZ(0,"span"),m._UZ(1,"system-label",0),m.qZA()),2&e&&(m.xp6(1),m.Q6J("label",t.displayLabel))},dependencies:[M._],encapsulation:2}),ObjectActionModalSaveButton})();var Ct=s(6040);function At(e,t){1&e&&m._UZ(0,"system-button-icon",2)}function kt(e,t){1&e&&(m.TgZ(0,"span"),m._UZ(1,"system-label",3),m.qZA())}let Lt=(()=>{class ObjectActionRemoveButton{constructor(e,t,s,i,n,l){this.language=e,this.metadata=t,this.model=s,this.view=i,this.relatedmodels=n,this.modalservice=l,this.actionemitter=new m.vpe,this.disabled=!0,this.displayasicon=!1,this.subscriptions=new R.w0,this.subscriptions.add(this.model.mode$.subscribe((e=>{this.handleDisabled(e)}))),this.subscriptions.add(this.model.data$.subscribe((e=>{this.handleDisabled(this.model.isEditing?"edit":"display")})))}get canDelete(){try{let e=this.model.checkAccess("deleterelated");return e||(e=this.model.checkAccess("delete")),e}catch(e){return!1}}ngAfterViewInit(){this.handleDisabled(this.model.isEditing?"edit":"display")}execute(){this.modalservice.confirm(this.language.getLabel("QST_REMOVE_ENTRY"),this.language.getLabel("QST_REMOVE_ENTRY",null,"short")).subscribe((e=>{e&&this.relatedmodels.deleteItem(this.model.id)}))}handleDisabled(e){this.canDelete?this.disabled="edit"==e:this.disabled=!0}ngOnDestroy(){this.subscriptions.unsubscribe()}}return ObjectActionRemoveButton.ɵfac=function(e){return new(e||ObjectActionRemoveButton)(m.Y36(h.d),m.Y36(b.Pu),m.Y36(g.o),m.Y36(Je.e),m.Y36(Ct.j),m.Y36(z.o))},ObjectActionRemoveButton.ɵcmp=m.Xpm({type:ObjectActionRemoveButton,selectors:[["object-action-remove-button"]],outputs:{actionemitter:"actionemitter"},decls:2,vars:2,consts:[["icon","remove_link",4,"ngIf"],[4,"ngIf"],["icon","remove_link"],["label","LBL_REMOVE"]],template:function(e,t){1&e&&(m.YNc(0,At,1,0,"system-button-icon",0),m.YNc(1,kt,2,0,"span",1)),2&e&&(m.Q6J("ngIf",t.displayasicon),m.xp6(1),m.Q6J("ngIf",!t.displayasicon))},dependencies:[i.O5,x.J,M._],encapsulation:2}),ObjectActionRemoveButton})();var Mt=s(6538),St=s(4664);function It(e,t){1&e&&m._UZ(0,"system-spinner",9)}function Ot(e,t){if(1&e&&(m.TgZ(0,"tr")(1,"td",21)(2,"div",13),m._uU(3),m.qZA()(),m.TgZ(4,"td",22)(5,"div",23),m._uU(6),m.qZA()(),m.TgZ(7,"td",21)(8,"div",23),m._uU(9),m.qZA()()()),2&e){const e=t.$implicit,s=m.oxw(3);m.xp6(3),m.hij("",s.language.getFieldDisplayName(s.model.module,e.field_name)," "),m.xp6(3),m.Oqu(e.before_value_string),m.xp6(3),m.Oqu(e.after_value_string)}}function Jt(e,t){if(1&e&&(m.ynx(0),m.TgZ(1,"tr")(2,"td",18)(3,"div",19),m._uU(4),m._UZ(5,"system-display-datetime",20),m.qZA()()(),m.YNc(6,Ot,10,3,"tr",17),m.BQk()),2&e){const e=t.$implicit;m.xp6(4),m.hij(" ",e.user_name," / "),m.xp6(1),m.Q6J("date",e.date_created),m.xp6(1),m.Q6J("ngForOf",e.audit_log)}}function Nt(e,t){if(1&e&&(m.TgZ(0,"table",10)(1,"thead")(2,"tr",11)(3,"th",12)(4,"div",13),m._UZ(5,"system-label",14),m.qZA()(),m.TgZ(6,"th",12)(7,"div",13),m._UZ(8,"system-label",15),m.qZA()(),m.TgZ(9,"th",12)(10,"div",13),m._UZ(11,"system-label",16),m.qZA()()()(),m.TgZ(12,"tbody"),m.YNc(13,Jt,7,3,"ng-container",17),m.qZA()()),2&e){const e=m.oxw();m.xp6(13),m.Q6J("ngForOf",e.auditLog)}}function Ft(e,t){1&e&&(m.TgZ(0,"div",24),m._UZ(1,"system-label",25),m._uU(2,". "),m.qZA())}let qt=(()=>{class ObjectActionAuditlogModal{constructor(e,t,s){this.language=e,this.metadata=t,this.model=s,this.self=null,this.auditLog=[],this.auditTransactions=[],this.loading=!0,this.moduleFields=[],this._userfilter="",this._fieldfilter=""}get userfilter(){return this._userfilter}set userfilter(e){this._userfilter=e,this.loadAuditLog()}get fieldfilter(){return this._fieldfilter}set fieldfilter(e){this._fieldfilter=e,this.loadAuditLog()}ngOnInit(){this.loadAuditLog();for(let e in this.metadata.getModuleFields(this.model.module))this.moduleFields.push({name:e,display:this.language.getFieldDisplayName(this.model.module,e)});this.moduleFields.sort(((e,t)=>e.display.toLowerCase()>t.display.toLowerCase()?1:-1))}hideAuditLog(){this.self.destroy()}loadAuditLog(){this.model&&(this.auditLog=[],this.auditTransactions=[],this.loading=!0,this.model.getAuditLog({user:this._userfilter,field:this._fieldfilter,grouped:!0}).subscribe((e=>{this.auditLog=e;for(let e of this.auditLog)-1==this.auditTransactions.indexOf(e.transaction_id)&&this.auditTransactions.push({transaction_id:e.transaction_id,created_by:e.created_by,user_name:e.user_name,date_created:e.date_created});this.loading=!1}),(e=>{this.loading=!1})))}}return ObjectActionAuditlogModal.ɵfac=function(e){return new(e||ObjectActionAuditlogModal)(m.Y36(h.d),m.Y36(b.Pu),m.Y36(g.o,8))},ObjectActionAuditlogModal.ɵcmp=m.Xpm({type:ObjectActionAuditlogModal,selectors:[["object-action-auditlog-modal"]],decls:10,vars:3,consts:[["size","large"],[3,"close"],["label","LBL_LOGGED_CHANGES"],["margin","none"],["class","slds-p-around--medium",4,"ngIf"],["class","slds-table slds-table--bordered slds-table--cell-buffer",4,"ngIf"],["class","slds-text-heading--small slds-p-around--medium",4,"ngIf"],[1,"slds-button","slds-button--brand",3,"click"],["label","LBL_CLOSE"],[1,"slds-p-around--medium"],[1,"slds-table","slds-table--bordered","slds-table--cell-buffer"],[1,"slds-text-title--caps"],["scope","col"],[1,"slds-truncate"],["label","LBL_FIELD"],["label","LBL_BEFOREVALUE"],["label","LBL_AFTERVALUE"],[4,"ngFor","ngForOf"],["colspan","3",1,"slds-theme--shade"],[1,"slds-text-heading--label"],[3,"date"],["scope","row"],["scope","row",1,"slds-cell-wrap"],[1,"slds-line-clamp"],[1,"slds-text-heading--small","slds-p-around--medium"],["label","MSG_NOAUDITRECORDS_FOUND"]],template:function(e,t){1&e&&(m.TgZ(0,"system-modal",0)(1,"system-modal-header",1),m.NdJ("close",(function(){return t.hideAuditLog()})),m._UZ(2,"system-label",2),m.qZA(),m.TgZ(3,"system-modal-content",3),m.YNc(4,It,1,0,"system-spinner",4),m.YNc(5,Nt,14,1,"table",5),m.YNc(6,Ft,3,0,"div",6),m.qZA(),m.TgZ(7,"system-modal-footer")(8,"button",7),m.NdJ("click",(function(){return t.hideAuditLog()})),m._UZ(9,"system-label",8),m.qZA()()()),2&e&&(m.xp6(4),m.Q6J("ngIf",t.loading),m.xp6(1),m.Q6J("ngIf",!t.loading),m.xp6(1),m.Q6J("ngIf",!t.loading&&0===t.auditLog.length))},dependencies:[i.sg,i.O5,Mt.a,M._,Fe.j,qe.x,Ee.p,Ye.y,St.W],encapsulation:2}),ObjectActionAuditlogModal})();function Et(e,t){1&e&&m._UZ(0,"system-button-icon",2)}function Yt(e,t){1&e&&(m.TgZ(0,"span"),m._UZ(1,"system-label",3),m.qZA())}let Qt=(()=>{class ObjectActionNewButton{constructor(e,t,s,i){this.language=e,this.metadata=t,this.model=s,this.parentmodel=i,this.disabled=!0,this.displayasicon=!1}execute(){this.model.module=this.parentmodel.module,this.model.id=void 0,this.model.initialize(),this.model.addModel("",this.parentmodel)}ngOnInit(){this.parentmodel.module&&this.metadata.checkModuleAcl(this.parentmodel.module,"create")&&(this.disabled=!1)}}return ObjectActionNewButton.ɵfac=function(e){return new(e||ObjectActionNewButton)(m.Y36(h.d),m.Y36(b.Pu),m.Y36(g.o),m.Y36(g.o,4))},ObjectActionNewButton.ɵcmp=m.Xpm({type:ObjectActionNewButton,selectors:[["object-action-new-button"]],features:[m._Bn([g.o])],decls:2,vars:2,consts:[["icon","add",4,"ngIf"],[4,"ngIf"],["icon","add"],["label","LBL_NEW"]],template:function(e,t){1&e&&(m.YNc(0,Et,1,0,"system-button-icon",0),m.YNc(1,Yt,2,0,"span",1)),2&e&&(m.Q6J("ngIf",t.displayasicon),m.xp6(1),m.Q6J("ngIf",!t.displayasicon))},dependencies:[i.O5,x.J,M._],encapsulation:2}),ObjectActionNewButton})();var Ut=s(5920);let Dt=(()=>{class ObjectActionDuplicateButton{constructor(e,t,s,i,n){this.parent=e,this.language=t,this.metadata=s,this.model=i,this.session=n}get hidden(){return this.parent.isEditing}get disabled(){return!this.metadata.checkModuleAcl(this.parent.module,"create")||(this.parent.isEditing||this.parent.isSaving)}execute(){let e=this.model.utils.generateGuid();this.model.module=this.parent.module,this.model.initializeModel();let t=JSON.parse(JSON.stringify(this.parent.data));t.id=this.model.id,t.assigned_user_id=this.session.authData.userId,t.assigned_user_name=this.session.authData.userName,t.modified_by_id=this.session.authData.userId,t.modified_by_name=this.session.authData.userName,t.date_entered=new Date,t.date_modified=new Date,this.model.setData(t,!1);for(let t in this.parent.fields)if("link"==this.parent.fields[t].type&&this.model.data[t]&&this.model.data[t].beans)for(let s in this.model.data[t].beans){for(let i in this.model.data[t].beans[s])this.model.data[t].beans[s][i]==this.parent.id&&(this.model.data[t].beans[s][i]=e,this.model.data[t].beans[s].id=this.model.utils.generateGuid()),this.model.data[t].beans[s][i].beans&&(this.model.data[t].beans[s][i].beans={});this.model.data[t].beans[s].id!=s&&(this.model.data[t].beans[this.model.data[t].beans[s].id]=this.model.data[t].beans[s],delete this.model.data[t].beans[s])}this.model.duplicate=!0,this.model.templateId=this.parent.id,this.model.edit()}}return ObjectActionDuplicateButton.ɵfac=function(e){return new(e||ObjectActionDuplicateButton)(m.Y36(g.o,4),m.Y36(h.d),m.Y36(b.Pu),m.Y36(g.o),m.Y36(Ut.n))},ObjectActionDuplicateButton.ɵcmp=m.Xpm({type:ObjectActionDuplicateButton,selectors:[["object-action-duplicate-button"]],features:[m._Bn([g.o])],decls:2,vars:0,consts:[["label","LBL_DUPLICATE"]],template:function(e,t){1&e&&(m.TgZ(0,"span"),m._UZ(1,"system-label",0),m.qZA())},dependencies:[M._],encapsulation:2}),ObjectActionDuplicateButton})();function jt(e,t){if(1&e&&m._UZ(0,"system-button-icon",2),2&e){const e=m.oxw();m.Q6J("title",e.language.getLabel(e.label))}}function Rt(e,t){if(1&e&&(m.TgZ(0,"span"),m._UZ(1,"system-label",3),m.qZA()),2&e){const e=m.oxw();m.xp6(1),m.Q6J("label",e.label)}}let Bt=(()=>{class ObjectActionSaveSendButton{constructor(e,t,s,i){this.language=e,this.metadata=t,this.model=s,this.view=i,this.actionemitter=new m.vpe,this.displayasicon=!1,this.actionconfig={}}get disabled(){return this.model.isSaving}get hidden(){return!this.model.isEditing}get label(){return this.actionconfig.label&&""!==this.actionconfig.label?this.actionconfig.label:"LBL_SEND"}get toastLabel(){return this.actionconfig.toastlabel&&""!==this.actionconfig.toastlabel?this.actionconfig.toastlabel:"LBL_DATA_SENT"}execute(){this.model.isSaving||this.model.validate()&&this.model.saveAndSend(!0,this.toastLabel).subscribe((e=>{this.model.endEdit(),this.view.setViewMode(),this.actionemitter.emit("save")}))}}return ObjectActionSaveSendButton.ɵfac=function(e){return new(e||ObjectActionSaveSendButton)(m.Y36(h.d),m.Y36(b.Pu),m.Y36(g.o),m.Y36(Je.e))},ObjectActionSaveSendButton.ɵcmp=m.Xpm({type:ObjectActionSaveSendButton,selectors:[["object-action-save-send-button"]],outputs:{actionemitter:"actionemitter"},decls:2,vars:2,consts:[["icon","email",3,"title",4,"ngIf"],[4,"ngIf"],["icon","email",3,"title"],[3,"label"]],template:function(e,t){1&e&&(m.YNc(0,jt,1,1,"system-button-icon",0),m.YNc(1,Rt,2,1,"span",1)),2&e&&(m.Q6J("ngIf",t.displayasicon),m.xp6(1),m.Q6J("ngIf",!t.displayasicon))},dependencies:[i.O5,x.J,M._],encapsulation:2}),ObjectActionSaveSendButton})();function Gt(e,t){1&e&&m._UZ(0,"system-button-icon",2)}function Pt(e,t){1&e&&(m.TgZ(0,"span"),m._UZ(1,"system-label",3),m.qZA())}let Ht=(()=>{class ObjectActionSaveButton{constructor(e,t,s,i){this.language=e,this.metadata=t,this.model=s,this.view=i,this.actionemitter=new m.vpe,this.displayasicon=!1}get disabled(){return this.model.isSaving}get hidden(){return!this.model.isEditing}execute(){this.model.isSaving||this.model.validate()&&this.model.save(!0).subscribe((e=>{this.model.endEdit(),this.view.setViewMode(),this.actionemitter.emit("save")}))}}return ObjectActionSaveButton.ɵfac=function(e){return new(e||ObjectActionSaveButton)(m.Y36(h.d),m.Y36(b.Pu),m.Y36(g.o),m.Y36(Je.e))},ObjectActionSaveButton.ɵcmp=m.Xpm({type:ObjectActionSaveButton,selectors:[["object-action-save-button"]],outputs:{actionemitter:"actionemitter"},decls:2,vars:2,consts:[["system-title","LBL_SAVE","icon","save",4,"ngIf"],[4,"ngIf"],["system-title","LBL_SAVE","icon","save"],["label","LBL_SAVE"]],template:function(e,t){1&e&&(m.YNc(0,Gt,1,0,"system-button-icon",0),m.YNc(1,Pt,2,0,"span",1)),2&e&&(m.Q6J("ngIf",t.displayasicon),m.xp6(1),m.Q6J("ngIf",!t.displayasicon))},dependencies:[i.O5,x.J,M._,C.S],encapsulation:2}),ObjectActionSaveButton})(),zt=(()=>{class ObjectActionSaveRelatedButton{constructor(e,t,s,i,n){this.language=e,this.metadata=t,this.model=s,this.view=i,this.relatedmodels=n,this.actionemitter=new m.vpe,this.module="",this.saving=!1}get hidden(){return!this.view.isEditMode()}execute(){if(!this.saving)if(this.model.validate()){this.saving=!0;let e=this.model.getDirtyFields();e.date_modified=this.model.getField("date_modified"),e.id=this.model.id,this.actionemitter.emit(!0),this.view.setViewMode(),this.relatedmodels.setItem(e).subscribe((e=>{this.model.endEdit(),this.saving=!1}),(e=>{this.view.setEditMode(),this.saving=!1}))}else this.saving=!1,this.model.edit().subscribe((e=>{e?this.execute():(this.model.cancelEdit(),this.view.setViewMode())}))}}return ObjectActionSaveRelatedButton.ɵfac=function(e){return new(e||ObjectActionSaveRelatedButton)(m.Y36(h.d),m.Y36(b.Pu),m.Y36(g.o),m.Y36(Je.e),m.Y36(Ct.j))},ObjectActionSaveRelatedButton.ɵcmp=m.Xpm({type:ObjectActionSaveRelatedButton,selectors:[["object-action-save-related-button"]],outputs:{actionemitter:"actionemitter"},decls:2,vars:0,consts:[["label","LBL_SAVE"]],template:function(e,t){1&e&&(m.TgZ(0,"span"),m._UZ(1,"system-label",0),m.qZA())},dependencies:[M._],encapsulation:2}),ObjectActionSaveRelatedButton})();function Vt(e,t){1&e&&m._UZ(0,"system-button-icon",2)}function Kt(e,t){1&e&&(m.TgZ(0,"span"),m._UZ(1,"system-label",3),m.qZA())}let $t=(()=>{class ObjectActionNewrelatedButton{constructor(e,t,s,i,n){this.parent=e,this.language=t,this.metadata=s,this.model=i,this.relatedmodels=n,this.disabled=!0,this.displayasicon=!1}ngOnInit(){this.model.module=this.relatedmodels.relatedModule,this.model.module&&this.metadata.checkModuleAcl(this.model.module,"create")&&(this.disabled=!1)}execute(){this.parent.getField("id")||this.parent.setField("id",this.parent.id),this.model.id="",this.model.addModel("",this.parent).subscribe((e=>{0!=e&&this.relatedmodels.addItems([e])}))}}return ObjectActionNewrelatedButton.ɵfac=function(e){return new(e||ObjectActionNewrelatedButton)(m.Y36(g.o,4),m.Y36(h.d),m.Y36(b.Pu),m.Y36(g.o),m.Y36(Ct.j))},ObjectActionNewrelatedButton.ɵcmp=m.Xpm({type:ObjectActionNewrelatedButton,selectors:[["object-action-newrelated-button"]],features:[m._Bn([g.o])],decls:2,vars:2,consts:[["icon","add",4,"ngIf"],[4,"ngIf"],["icon","add"],["label","LBL_NEW"]],template:function(e,t){1&e&&(m.YNc(0,Vt,1,0,"system-button-icon",0),m.YNc(1,Kt,2,0,"span",1)),2&e&&(m.Q6J("ngIf",t.displayasicon),m.xp6(1),m.Q6J("ngIf",!t.displayasicon))},dependencies:[i.O5,x.J,M._],encapsulation:2}),ObjectActionNewrelatedButton})(),Xt=(()=>{class ObjectActionNewCopyRuleBeanButtonModelHelper{constructor(e){this.model=e}}return ObjectActionNewCopyRuleBeanButtonModelHelper.ɵfac=function(e){return new(e||ObjectActionNewCopyRuleBeanButtonModelHelper)(m.Y36(g.o))},ObjectActionNewCopyRuleBeanButtonModelHelper.ɵdir=m.lG2({type:ObjectActionNewCopyRuleBeanButtonModelHelper,selectors:[["object-action-new-copy-rule-bean-button-model-helper"]],features:[m._Bn([g.o])]}),ObjectActionNewCopyRuleBeanButtonModelHelper})(),Wt=(()=>{class ObjectActionNewCopyRuleBeanButton{constructor(e,t,s,i){this.language=e,this.metadata=t,this.model=s,this.relatedmodels=i,this.parent={},this.disabled=!0,this.actionconfig={}}ngOnInit(){this.actionconfig.module&&this.metadata.checkModuleAcl(this.actionconfig.module,"create")&&(this.disabled=!1)}execute(){this.child.model.module=this.actionconfig.module;let e=[this.parent];this.relatedmodels&&this.relatedmodels.model&&e.push(this.relatedmodels.model),this.child.model.addModel("",e)}}return ObjectActionNewCopyRuleBeanButton.ɵfac=function(e){return new(e||ObjectActionNewCopyRuleBeanButton)(m.Y36(h.d),m.Y36(b.Pu),m.Y36(g.o),m.Y36(Ct.j,8))},ObjectActionNewCopyRuleBeanButton.ɵcmp=m.Xpm({type:ObjectActionNewCopyRuleBeanButton,selectors:[["object-action-new-copy-rule-bean-button"]],viewQuery:function(e,t){if(1&e&&m.Gf(Xt,7),2&e){let e;m.iGM(e=m.CRH())&&(t.child=e.first)}},decls:3,vars:1,consts:[[3,"label"]],template:function(e,t){1&e&&(m.TgZ(0,"span"),m._UZ(1,"system-label",0),m.qZA(),m._UZ(2,"object-action-new-copy-rule-bean-button-model-helper")),2&e&&(m.xp6(1),m.Q6J("label",t.actionconfig.label))},dependencies:[M._,Xt],encapsulation:2}),ObjectActionNewCopyRuleBeanButton})();var es=s(8709),ts=s(4652);let ss=(()=>{class ObjectActionSelectButton{constructor(e,t,s,i,n,l){this.metadata=e,this.language=t,this.modal=s,this.model=i,this.parent=n,this.relatedmodels=l,this.actionconfig={},this.disabled=!0,this.subscriptions=new R.w0}ngOnInit(){this.model.module=this.relatedmodels.relatedModule,this.model.module&&this.metadata.checkModuleAcl(this.model.module,"list")&&(this.disabled=!1)}execute(){this.modal.openModal("ObjectModalModuleLookup").subscribe((e=>{if(e.instance.module=this.model.module,e.instance.multiselect=!0,e.instance.modulefilter=this.actionconfig.modulefilter,this.actionconfig.relatefilterfield){let t=this.metadata.getFieldDefs(this.model.module,this.actionconfig.relatefilterfield);t&&(e.instance.relatefilter={module:t.module,relationship:this.actionconfig.relatefilterrelationship,id:this.parent.getField(t.id_name),display:this.parent.getField(this.actionconfig.relatefilterfield),active:!!this.parent.getField(t.id_name),required:this.actionconfig.relatedfilterrequired})}e.instance.selectedItems.subscribe((e=>{this.addSelectedItems(e)}))}))}ngOnDestroy(){this.subscriptions.unsubscribe()}addSelectedItems(e){this.relatedmodels.addItems(e)}}return ObjectActionSelectButton.ɵfac=function(e){return new(e||ObjectActionSelectButton)(m.Y36(b.Pu),m.Y36(h.d),m.Y36(z.o),m.Y36(g.o),m.Y36(g.o,4),m.Y36(Ct.j))},ObjectActionSelectButton.ɵcmp=m.Xpm({type:ObjectActionSelectButton,selectors:[["object-action-select-button"]],features:[m._Bn([g.o])],decls:2,vars:0,consts:[["label","LBL_SELECT"]],template:function(e,t){1&e&&(m.TgZ(0,"span"),m._UZ(1,"system-label",0),m.qZA())},dependencies:[M._],encapsulation:2}),ObjectActionSelectButton})(),is=(()=>{class ObjectActionBeanToMailButton{constructor(e,t,s,i){this.language=e,this.modal=t,this.model=s,this.viewContainerRef=i}execute(){this.modal.openModal("ObjectActionMailModal",!0,this.viewContainerRef.injector).subscribe((e=>e.instance.parent=this.model))}}return ObjectActionBeanToMailButton.ɵfac=function(e){return new(e||ObjectActionBeanToMailButton)(m.Y36(h.d),m.Y36(z.o),m.Y36(g.o),m.Y36(m.s_b))},ObjectActionBeanToMailButton.ɵcmp=m.Xpm({type:ObjectActionBeanToMailButton,selectors:[["object-action-beantomail-button"]],decls:2,vars:0,consts:[["label","LBL_EMAIL"]],template:function(e,t){1&e&&(m.TgZ(0,"span"),m._UZ(1,"system-label",0),m.qZA())},dependencies:[M._],encapsulation:2}),ObjectActionBeanToMailButton})();var ns=s(323),ls=s(3917),os=s(9774),as=s(7693),ds=s(5681);let rs=(()=>{class ObjectFileActionMenu{constructor(e,t,s,i,n,l){this.broadcast=e,this.modelattachments=t,this.language=s,this.elementRef=i,this.modalservice=n,this.injector=l}getDropdownLocationClass(){let e=this.elementRef.nativeElement.getBoundingClientRect();if(window.innerHeight-e.bottom<100)return"slds-dropdown--bottom"}deleteFile(){this.modalservice.confirm(this.language.getLabel("QST_DELETE_FILE"),this.language.getLabel("QST_DELETE_FILE",null,"short")).subscribe((e=>{e&&this.modelattachments.deleteAttachment(this.file.id)}))}downloadFile(){this.modelattachments.downloadAttachment(this.file.id,this.file.name)}edit(){this.modalservice.openModal("SpiceAttachmentsEditModal",!0,this.injector).subscribe((e=>{e.instance.attachment=this.file,e.instance.inputData={text:this.file.text,display_name:this.file.display_name,category_ids:this.file.category_ids?this.file.category_ids.split(","):[]}}))}}return ObjectFileActionMenu.ɵfac=function(e){return new(e||ObjectFileActionMenu)(m.Y36(ve.f),m.Y36(ns.H),m.Y36(h.d),m.Y36(m.SBq),m.Y36(z.o),m.Y36(m.zs3))},ObjectFileActionMenu.ɵcmp=m.Xpm({type:ObjectFileActionMenu,selectors:[["object-file-action-menu"]],inputs:{file:"file"},decls:17,vars:2,consts:[["system-dropdown-trigger","",1,"slds-dropdown-trigger","slds-dropdown-trigger--click"],["aria-haspopup","true",1,"slds-button","slds-button--icon-border-filled","slds-button--icon-x-small"],[3,"icon"],[1,"slds-dropdown","slds-dropdown--right",3,"ngClass"],["role","menu",1,"slds-dropdown__list"],["role","presentation",1,"slds-dropdown__item",3,"click"],["href","javascript:void(0);","role","menuitem","tabindex","0"],[1,"slds-truncate"],["label","LBL_EDIT"],["label","LBL_DOWNLOAD"],["href","javascript:void(0);","role","menuitem","tabindex","-1"],["label","LBL_DELETE"]],template:function(e,t){1&e&&(m.TgZ(0,"div",0)(1,"button",1),m._UZ(2,"system-button-icon",2),m.qZA(),m.TgZ(3,"div",3)(4,"ul",4)(5,"li",5),m.NdJ("click",(function(){return t.edit()})),m.TgZ(6,"a",6)(7,"span",7),m._UZ(8,"system-label",8),m.qZA()()(),m.TgZ(9,"li",5),m.NdJ("click",(function(){return t.downloadFile()})),m.TgZ(10,"a",6)(11,"span",7),m._UZ(12,"system-label",9),m.qZA()()(),m.TgZ(13,"li",5),m.NdJ("click",(function(){return t.deleteFile()})),m.TgZ(14,"a",10)(15,"span",7),m._UZ(16,"system-label",11),m.qZA()()()()()()),2&e&&(m.xp6(2),m.Q6J("icon","down"),m.xp6(1),m.Q6J("ngClass",t.getDropdownLocationClass()))},dependencies:[i.mk,x.J,M._,ds.l],encapsulation:2}),ObjectFileActionMenu})();const cs=["object-related-card-file",""];function us(e,t){if(1&e&&m._UZ(0,"img",15),2&e){const e=m.oxw(2);m.Q6J("src","data:image/jpg;base64,"+e.file.thumbnail,m.LSH)}}function ms(e,t){if(1&e){const e=m.EpF();m.TgZ(0,"div",16),m.NdJ("click",(function(){m.CHM(e);const t=m.oxw(2);return m.KtG(t.previewFile())})),m._uU(1),m.qZA()}if(2&e){const e=m.oxw(2);m.Q6J("system-title",e.file.display_name),m.xp6(1),m.hij(" ",e.file.display_name," ")}}function hs(e,t){if(1&e){const e=m.EpF();m.TgZ(0,"div",16),m.NdJ("click",(function(){m.CHM(e);const t=m.oxw(2);return m.KtG(t.previewFile())})),m._uU(1),m.qZA()}if(2&e){const e=m.oxw(2);m.Q6J("system-title",e.file.filename),m.xp6(1),m.hij(" ",e.file.filename," ")}}function gs(e,t){if(1&e&&(m.TgZ(0,"div",21),m._uU(1),m.qZA()),2&e){const e=m.oxw(3);m.Q6J("system-title",e.file.filename),m.xp6(1),m.hij(" ",e.file.filename," ")}}function ps(e,t){if(1&e&&(m.TgZ(0,"div",17)(1,"ul",18)(2,"li",19),m._uU(3),m.qZA(),m.TgZ(4,"li",19),m._uU(5),m.qZA()(),m.YNc(6,gs,2,2,"div",20),m.qZA()),2&e){const e=m.oxw(2);m.xp6(2),m.Q6J("system-title",e.filedate),m.xp6(1),m.Oqu(e.filedate),m.xp6(1),m.Q6J("system-title",e.humanFileSize),m.xp6(1),m.Oqu(e.humanFileSize),m.xp6(1),m.Q6J("ngIf",!!e.file.display_name)}}function fs(e,t){if(1&e&&(m.TgZ(0,"div",22)(1,"div",23)(2,"span",24)(3,"span",25),m._uU(4,"Progress: 25%"),m.qZA()()(),m.TgZ(5,"div",26),m._uU(6),m.qZA()()),2&e){const e=m.oxw(2);m.xp6(2),m.Q6J("ngStyle",e.progressbarstyle),m.xp6(4),m.hij(" ",e.file.uploadprogress," % ")}}function bs(e,t){if(1&e&&(m.TgZ(0,"div",27),m._UZ(1,"object-file-action-menu",28),m.qZA()),2&e){const e=m.oxw(2);m.xp6(1),m.Q6J("file",e.file)}}function _s(e,t){if(1&e){const e=m.EpF();m.TgZ(0,"div",2)(1,"figure",3)(2,"a",4),m.NdJ("click",(function(){m.CHM(e);const t=m.oxw();return m.KtG(t.previewFile())})),m.YNc(3,us,1,1,"img",5),m.qZA(),m.TgZ(4,"figcaption",6)(5,"div",7)(6,"div",8),m._UZ(7,"system-file-icon",9),m.qZA(),m.TgZ(8,"div",10),m.YNc(9,ms,2,2,"div",11),m.YNc(10,hs,2,2,"div",11),m.YNc(11,ps,7,5,"div",12),m.YNc(12,fs,7,2,"div",13),m.qZA()()()(),m.YNc(13,bs,2,1,"div",14),m.qZA()}if(2&e){const e=m.oxw();m.xp6(3),m.Q6J("ngIf",e.file.thumbnail),m.xp6(4),m.Q6J("filename",e.file.filename)("filemimetype",e.file.file_mime_type),m.xp6(2),m.Q6J("ngIf",!!e.file.display_name),m.xp6(1),m.Q6J("ngIf",!e.file.display_name),m.xp6(1),m.Q6J("ngIf",!e.uploading),m.xp6(1),m.Q6J("ngIf",e.uploading),m.xp6(1),m.Q6J("ngIf",!e.uploading)}}function ys(e,t){if(1&e&&m._UZ(0,"system-file-icon",9),2&e){const e=m.oxw(2);m.Q6J("filename",e.file.filename)("filemimetype",e.file.file_mime_type)}}function vs(e,t){if(1&e&&(m.TgZ(0,"div"),m._UZ(1,"img",15),m.qZA()),2&e){const e=m.oxw(2);m.xp6(1),m.Q6J("src","data:image/jpg;base64,"+e.file.thumbnail,m.LSH)}}function xs(e,t){if(1&e&&(m.TgZ(0,"a",37),m._uU(1),m.qZA()),2&e){const e=m.oxw(2);m.xp6(1),m.hij(" ",e.file.display_name," ")}}function Zs(e,t){if(1&e&&(m.TgZ(0,"a",37),m._uU(1),m.qZA()),2&e){const e=m.oxw(2);m.xp6(1),m.hij(" ",e.file.filename," ")}}function ws(e,t){if(1&e&&(m.TgZ(0,"div",38),m._UZ(1,"object-file-action-menu",28),m.qZA()),2&e){const e=m.oxw(2);m.xp6(1),m.Q6J("file",e.file)}}function Ts(e,t){if(1&e&&(m.TgZ(0,"div",21),m._uU(1),m.qZA()),2&e){const e=m.oxw(3);m.Q6J("system-title",e.file.filename),m.xp6(1),m.hij(" ",e.file.filename," ")}}function Cs(e,t){if(1&e&&(m.TgZ(0,"div",17)(1,"ul",18)(2,"li",19),m._uU(3),m.qZA(),m.TgZ(4,"li",19),m._uU(5),m.qZA()(),m.YNc(6,Ts,2,2,"div",20),m.qZA()),2&e){const e=m.oxw(2);m.xp6(2),m.Q6J("system-title",e.filedate),m.xp6(1),m.Oqu(e.filedate),m.xp6(1),m.Q6J("system-title",e.humanFileSize),m.xp6(1),m.Oqu(e.humanFileSize),m.xp6(1),m.Q6J("ngIf",!!e.file.display_name)}}function As(e,t){if(1&e&&(m.TgZ(0,"div",22)(1,"div",23)(2,"span",24)(3,"span",25),m._uU(4,"Progress: 25%"),m.qZA()()(),m.TgZ(5,"div",26),m._uU(6),m.qZA()()),2&e){const e=m.oxw(2);m.xp6(2),m.Q6J("ngStyle",e.progressbarstyle),m.xp6(4),m.hij(" ",e.file.uploadprogress," % ")}}function ks(e,t){if(1&e){const e=m.EpF();m.TgZ(0,"div",29)(1,"div",30),m.YNc(2,ys,1,2,"system-file-icon",31),m.YNc(3,vs,2,1,"div",32),m.qZA(),m.TgZ(4,"div",10)(5,"div",22)(6,"h3",33),m.NdJ("click",(function(){m.CHM(e);const t=m.oxw();return m.KtG(t.previewFile())})),m.YNc(7,xs,2,1,"a",34),m.YNc(8,Zs,2,1,"ng-template",null,35,m.W1O),m.qZA(),m.YNc(10,ws,2,1,"div",36),m.qZA(),m.YNc(11,Cs,7,5,"div",12),m.YNc(12,As,7,2,"div",13),m.qZA()()}if(2&e){const e=m.MAs(9),t=m.oxw();m.xp6(2),m.Q6J("ngIf",!t.file.thumbnail),m.xp6(1),m.Q6J("ngIf",t.file.thumbnail),m.xp6(3),m.Q6J("system-title",t.file.text),m.xp6(1),m.Q6J("ngIf",!!t.file.display_name)("ngIfElse",e),m.xp6(3),m.Q6J("ngIf",!t.uploading),m.xp6(1),m.Q6J("ngIf",!t.uploading),m.xp6(1),m.Q6J("ngIf",t.uploading)}}let Ls=(()=>{class ObjectRelatedCardFile{constructor(e,t,s,i,n,l){this.modelattachments=e,this.userpreferences=t,this.modal=s,this.toast=i,this.helper=n,this.injector=l,this.file={},this.bigThumbnail=!1}get humanFileSize(){return this.modelattachments.humanFileSize(this.file.filesize)}get filedate(){return this.file.date?this.file.date.format(this.userpreferences.getDateFormat()):""}get uploading(){return this.file.hasOwnProperty("uploadprogress")}get progressbarstyle(){return{width:this.file.uploadprogress+"%"}}downloadFile(){this.uploading||this.modelattachments.downloadAttachment(this.file.id,this.file.filename)}previewFile(){if(this.uploading)this.toast.sendToast("upload still in progress","info");else if(this.file.file_mime_type){let e=this.file.file_mime_type.toLowerCase().split("/");switch(e[0].trim()){case"image":if("svg+xml"===e[1])this.modal.openModal("SystemObjectPreviewModal").subscribe((e=>{e.instance.name=this.file.filename,e.instance.type=this.file.file_mime_type.toLowerCase(),this.modelattachments.getAttachment(this.file.id).subscribe({next:t=>{e.instance.data=atob(t)},error:t=>{e.instance.loadingerror=!0}})}));else this.modal.openModal("SystemImagePreviewModal").subscribe((e=>{e.instance.imgname=this.file.filename,e.instance.imgtype=this.file.file_mime_type.toLowerCase(),this.modelattachments.getAttachment(this.file.id).subscribe({next:t=>{e.instance.imgsrc="data:"+this.file.file_mime_type.toLowerCase()+";base64,"+t},error:t=>{e.instance.loadingerror=!0}})}));break;case"text":case"audio":case"video":this.modal.openModal("SystemObjectPreviewModal").subscribe((e=>{e.instance.name=this.file.filename,e.instance.type=this.file.file_mime_type.toLowerCase(),this.modelattachments.getAttachment(this.file.id).subscribe({next:t=>{e.instance.data=atob(t)},error:t=>{e.instance.loadingerror=!0}})}));break;case"application":if("pdf"===e[1])this.modal.openModal("SystemObjectPreviewModal").subscribe((e=>{e.instance.name=this.file.filename,e.instance.type=this.file.file_mime_type.toLowerCase(),this.modelattachments.getAttachment(this.file.id).subscribe({next:t=>{e.instance.data=atob(t)},error:t=>{e.instance.loadingerror=!0}})}));else{if("msg"===this.file.filename.split(".").splice(-1,1)[0].toLowerCase())this.modal.openModal("EmailPreviewModal",!0,this.injector).subscribe((e=>{e.instance.name=this.file.filename,e.instance.type=this.file.file_mime_type.toLowerCase(),e.instance.file=this.file}));else this.downloadFile()}break;default:this.downloadFile()}}}}return ObjectRelatedCardFile.ɵfac=function(e){return new(e||ObjectRelatedCardFile)(m.Y36(ns.H),m.Y36(L.z),m.Y36(z.o),m.Y36(he.A),m.Y36(at._),m.Y36(m.zs3))},ObjectRelatedCardFile.ɵcmp=m.Xpm({type:ObjectRelatedCardFile,selectors:[["","object-related-card-file",""]],inputs:{file:"file",bigThumbnail:"bigThumbnail"},attrs:cs,decls:3,vars:2,consts:[["class","slds-file slds-file_card slds-has-title","style","width: 300px",4,"ngIf","ngIfElse"],["smallThumbnailContainer",""],[1,"slds-file","slds-file_card","slds-has-title",2,"width","300px"],[2,"height","300px"],["href","javascript:void(0)",1,"slds-file__crop",2,"padding-top","245px",3,"click"],[3,"src",4,"ngIf"],[1,"slds-file__title","slds-file__title_card","slds-file-has-actions",2,"height","55px"],[1,"slds-media","slds-media_small","slds-media_center","slds-size--1-of-1"],[1,"slds-media__figure","slds-line-height_reset"],["divClass","","size","'small'",3,"filename","filemimetype"],[1,"slds-media__body"],["class","slds-file__text slds-truncate",3,"system-title","click",4,"ngIf"],["class","slds-tile__detail slds-text-body--small",4,"ngIf"],["class","slds-grid slds-grid_vertical-align-center slds-grid--align-spread slds-has-flexi-truncate",4,"ngIf"],["class","slds-file__actions-menu",4,"ngIf"],[3,"src"],[1,"slds-file__text","slds-truncate",3,"system-title","click"],[1,"slds-tile__detail","slds-text-body--small"],[1,"slds-list--horizontal","slds-has-dividers--left"],[1,"slds-item",3,"system-title"],["class","slds-text-color--inverse-weak slds-truncate",3,"system-title",4,"ngIf"],[1,"slds-text-color--inverse-weak","slds-truncate",3,"system-title"],[1,"slds-grid","slds-grid_vertical-align-center","slds-grid--align-spread","slds-has-flexi-truncate"],[1,"slds-progress-bar"],[1,"slds-progress-bar__value",3,"ngStyle"],[1,"slds-assistive-text"],[1,"slds-text-align--right",2,"width","50px"],[1,"slds-file__actions-menu"],[3,"file"],[1,"slds-media",2,"width","300px"],[1,"slds-m-right--x-small","slds-align--absolute-center",2,"width","30px","height","30px"],["divClass","","size","'small'",3,"filename","filemimetype",4,"ngIf"],[4,"ngIf"],[1,"slds-truncate","slds-text-heading--x-small","slds-p-right--xxx-small",3,"system-title","click"],["href","javascript:void(0);",4,"ngIf","ngIfElse"],["fileNameContainer",""],["class","slds-shrink-none",4,"ngIf"],["href","javascript:void(0);"],[1,"slds-shrink-none"]],template:function(e,t){if(1&e&&(m.YNc(0,_s,14,8,"div",0),m.YNc(1,ks,13,8,"ng-template",null,1,m.W1O)),2&e){const e=m.MAs(2);m.Q6J("ngIf",t.bigThumbnail)("ngIfElse",e)}},dependencies:[i.O5,i.PC,as.T,C.S,rs],encapsulation:2}),ObjectRelatedCardFile})();const Ms=["fileupload"];function Ss(e,t){if(1&e&&(m.TgZ(0,"a",16)(1,"span",17),m._UZ(2,"system-label",18),m._uU(3),m.qZA()()),2&e){const e=m.oxw();m.xp6(2),m.Q6J("label",e.componentconfig.label?e.componentconfig.label+"":"LBL_FILES"),m.xp6(1),m.hij(" (",e.modelattachments.files.length,")")}}function Is(e,t){if(1&e&&(m.TgZ(0,"span",17),m._UZ(1,"system-label",18),m._uU(2),m.qZA()),2&e){const e=m.oxw();m.xp6(1),m.Q6J("label",e.componentconfig.label?e.componentconfig.label+"":"LBL_FILES"),m.xp6(1),m.hij(" (",e.modelattachments.files.length,")")}}function Os(e,t){if(1&e){const e=m.EpF();m.TgZ(0,"system-utility-icon",19),m.NdJ("click",(function(t){m.CHM(e);const s=m.oxw();return m.KtG(s.toggleOpen(t))})),m.qZA()}if(2&e){const e=m.oxw();m.Q6J("@animateicon",e.isopen?"open":"closed")}}function Js(e,t){if(1&e){const e=m.EpF();m.TgZ(0,"div",20)(1,"div",21),m._UZ(2,"system-utility-icon",22),m.TgZ(3,"input",23),m.NdJ("ngModelChange",(function(t){m.CHM(e);const s=m.oxw();return m.KtG(s.setFilteredFiles("input",t))})),m.qZA()()()}if(2&e){const e=m.oxw();m.xp6(3),m.Q6J("ngModel",e.filterTerm)}}function Ns(e,t){1&e&&(m.TgZ(0,"div",31),m._UZ(1,"system-utility-icon",32),m.qZA())}function Fs(e,t){if(1&e&&(m.TgZ(0,"option",33),m._UZ(1,"system-label",18),m.qZA()),2&e){const e=t.$implicit;m.Q6J("value",e.id),m.xp6(1),m.Q6J("label",e.label)}}function qs(e,t){if(1&e){const e=m.EpF();m.TgZ(0,"div",24),m.YNc(1,Ns,2,0,"div",25),m.TgZ(2,"div",26)(3,"select",27),m.NdJ("ngModelChange",(function(t){m.CHM(e);const s=m.oxw();return m.KtG(s.setFilteredFiles("category",t))})),m.TgZ(4,"option",28),m._UZ(5,"system-label",29),m.qZA(),m.YNc(6,Fs,2,2,"option",30),m.qZA()()()}if(2&e){const e=m.oxw();m.xp6(1),m.Q6J("ngIf",e.width>600),m.xp6(2),m.Q6J("ngModel",e.selectedCategoryId),m.xp6(3),m.Q6J("ngForOf",e.categories)}}function Es(e,t){if(1&e){const e=m.EpF();m.TgZ(0,"button",34),m.NdJ("click",(function(){m.CHM(e);const t=m.oxw();return m.KtG(t.selectFile())})),m._UZ(1,"system-utility-icon",35),m.qZA()}}function Ys(e,t){if(1&e&&m._UZ(0,"div",40),2&e){const e=t.$implicit,s=m.oxw(2);m.Q6J("file",e)("bigThumbnail",null==s.componentconfig?null:s.componentconfig.bigThumbnail)}}function Qs(e,t){1&e&&(m.TgZ(0,"div",41),m._UZ(1,"system-spinner"),m.qZA())}function Us(e,t){if(1&e&&(m.TgZ(0,"div",36)(1,"div",37),m.YNc(2,Ys,1,2,"div",38),m.qZA(),m.YNc(3,Qs,2,0,"div",39),m.qZA()),2&e){const e=m.oxw();m.Q6J("@displaycard",void 0),m.xp6(2),m.Q6J("ngForOf",e.filteredFiles),m.xp6(1),m.Q6J("ngIf",e.modelattachments.loading)}}let Ds=(()=>{class ObjectRelatedlistFiles{constructor(e,t,s,i,n,l,o,a,d,r,c,u){this.modelattachments=e,this.language=t,this.model=s,this.renderer=i,this.toast=n,this.footer=l,this.metadata=o,this.backend=a,this.broadcast=d,this.elementRef=r,this.configurationService=c,this.modalservice=u,this.files=[],this.filteredFiles=[],this.componentconfig={},this.isopen=!0,this.selectedCategoryId="",this.filterTerm="",this.categories=[],this.subscriptions=new R.w0}ngAfterViewInit(){this.setModelData(),setTimeout((()=>this.loadFiles()),10),this.subscriptions.add(this.broadcast.message$.subscribe((e=>this.handleMessage(e))))}loadCategories(){if(this.configurationService.getData("spiceattachments_categories"))return this.categories=this.configurationService.getData("spiceattachments_categories");this.backend.getRequest("common/spiceattachments/categories/"+this.model.module).subscribe((e=>{e&&Array.isArray(e)&&(this.categories=e,this.configurationService.setData("spiceattachments_categories",e))}))}handleMessage(e){"model.merge"==e.messagetype&&e.messagedata.module==this.model.module&&e.messagedata.id==this.model.id&&this.loadFiles()}loadFiles(){this.files.length>0&&this.doupload(this.files),this.modelattachments.getAttachments().subscribe((e=>{this.filteredFiles=e,this.loadCategories()}))}setModelData(){this.modelattachments.module=this.model.module,this.modelattachments.id=this.model.id}toggleOpen(e){e.stopPropagation(),this.isopen=!this.isopen}get width(){return this.elementRef.nativeElement.getBoundingClientRect().width}preventdefault(e){(e.dataTransfer.items.length>=1&&this.hasOneItemsFile(e.dataTransfer.items)||e.dataTransfer.files.length>0)&&(e.preventDefault(),e.stopPropagation(),e.dataTransfer.dropEffect="copy")}hasOneItemsFile(e){for(let t of e)if("file"==t.kind)return!0;return!1}onDrop(e){this.preventdefault(e);let t=e.dataTransfer.files;t&&t.length>=1&&this.doupload(t)}fileDrop(e){e&&e.length>=1&&this.doupload(e)}selectFile(){let e=new MouseEvent("click",{bubbles:!0});this.fileupload.element.nativeElement.dispatchEvent(e)}uploadFile(){let e=this.fileupload.element.nativeElement.files;this.doupload(e)}doupload(e){this.modelattachments.uploadAttachmentsBase64(e)}setFilteredFiles(e,t){switch(e){case"category":this.selectedCategoryId=t,this.filteredFiles="*"==t?this.modelattachments.files:this.modelattachments.files.filter((e=>!!e.category_ids&&e.category_ids.includes(t)));break;case"input":const e=t.toLowerCase();this.filterTerm=t,window.clearTimeout(this.filterTimeout),this.filterTimeout=window.setTimeout((()=>{this.filteredFiles=0==t.length?this.modelattachments.files:this.modelattachments.files.filter((t=>t.filename.toLowerCase().includes(e)||!!t.display_name&&t.display_name.toLowerCase().includes(e)||!!t.text&&t.text.toLowerCase().includes(e)))}),600)}}toggleBigThumbnail(){this.componentconfig||(this.componentconfig={}),this.componentconfig.bigThumbnail=!this.componentconfig.bigThumbnail}}return ObjectRelatedlistFiles.ɵfac=function(e){return new(e||ObjectRelatedlistFiles)(m.Y36(ns.H),m.Y36(h.d),m.Y36(g.o),m.Y36(m.Qsj),m.Y36(he.A),m.Y36(ls.M),m.Y36(b.Pu),m.Y36(X.y),m.Y36(ve.f),m.Y36(m.SBq),m.Y36(y.C),m.Y36(z.o))},ObjectRelatedlistFiles.ɵcmp=m.Xpm({type:ObjectRelatedlistFiles,selectors:[["object-relatedlist-files"]],viewQuery:function(e,t){if(1&e&&m.Gf(Ms,7,m.s_b),2&e){let e;m.iGM(e=m.CRH())&&(t.fileupload=e.first)}},inputs:{files:"files",componentconfig:"componentconfig"},features:[m._Bn([ns.H])],decls:17,vars:10,consts:[[1,"slds-card","slds-card_boundary","slds-m-bottom--medium",3,"system-drop-file"],[1,"slds-card__header","slds-grid"],[1,"slds-size--1-of-1","slds-grid","slds-grid--vertical-align-center"],[3,"icon","size"],[1,"slds-media__body","slds-truncate","slds-grid","slds-grid--vertical-align-center"],["href","javascript:void(0);","class","slds-text-link--reset",4,"ngIf"],["class","slds-text-heading--small",4,"ngIf"],["class","slds-m-horizontal--xx-small","icon","up","size","x-small",3,"click",4,"ngIf"],["system-title","LBL_TOGGLE_BIG_THUMBNAIL",1,"slds-col--bump-left","slds-button","slds-button--icon-border","slds-m-right--xxx-small",3,"click"],["size","x-small",3,"icon"],["class","slds-form-element slds-m-horizontal--xxx-small",4,"ngIf"],["class","slds-form-element slds-m-horizontal--xxx-small slds-grid slds-grid--vertical-align-center",4,"ngIf"],["class","slds-m-left--xxx-small slds-button slds-button--icon-border","system-title","LBL_UPLOAD",3,"click",4,"ngIf"],["type","file","multiple","",2,"display","none",3,"click","change"],["fileupload",""],["class","slds-card__body slds-card__body_inner",4,"ngIf"],["href","javascript:void(0);",1,"slds-text-link--reset"],[1,"slds-text-heading--small"],[3,"label"],["icon","up","size","x-small",1,"slds-m-horizontal--xx-small",3,"click"],[1,"slds-form-element","slds-m-horizontal--xxx-small"],[1,"slds-form-element__control","slds-input-has-icon","slds-input-has-icon_left-right"],["icon","search","addclasses","slds-input__icon slds-input__icon--left"],["type","text",1,"slds-input",3,"ngModel","ngModelChange"],[1,"slds-form-element","slds-m-horizontal--xxx-small","slds-grid","slds-grid--vertical-align-center"],["system-title","LBL_CATEGORIES","class","slds-m-horizontal--xxx-small",4,"ngIf"],[1,"slds-select_container","slds-m-horizontal--xxx-small"],[1,"slds-select",2,"min-width","70px",3,"ngModel","ngModelChange"],["value","*"],["label","LBL_ALL"],[3,"value",4,"ngFor","ngForOf"],["system-title","LBL_CATEGORIES",1,"slds-m-horizontal--xxx-small"],["icon","tile_card_list","size","x-small"],[3,"value"],["system-title","LBL_UPLOAD",1,"slds-m-left--xxx-small","slds-button","slds-button--icon-border",3,"click"],["size","x-small","icon","upload"],[1,"slds-card__body","slds-card__body_inner"],[1,"slds-card__body--inner","slds-grid","slds-wrap","slds-grid--pull-padded"],["object-related-card-file","","class","slds-tile slds-card__tile slds-p-horizontal--small slds-hint-parent",3,"file","bigThumbnail",4,"ngFor","ngForOf"],["class","slds-p-around--large slds-align--absolute-center",4,"ngIf"],["object-related-card-file","",1,"slds-tile","slds-card__tile","slds-p-horizontal--small","slds-hint-parent",3,"file","bigThumbnail"],[1,"slds-p-around--large","slds-align--absolute-center"]],template:function(e,t){if(1&e){const e=m.EpF();m.TgZ(0,"div",0),m.NdJ("system-drop-file",(function(e){return t.fileDrop(e)})),m.TgZ(1,"div",1)(2,"header",2),m._UZ(3,"system-icon",3),m.TgZ(4,"div",4)(5,"h2"),m.YNc(6,Ss,4,2,"a",5),m.YNc(7,Is,3,2,"span",6),m.qZA(),m.YNc(8,Os,1,1,"system-utility-icon",7),m.qZA(),m.TgZ(9,"button",8),m.NdJ("click",(function(){return t.toggleBigThumbnail()})),m._UZ(10,"system-utility-icon",9),m.qZA(),m.YNc(11,Js,4,1,"div",10),m.YNc(12,qs,7,3,"div",11),m.YNc(13,Es,2,0,"button",12),m.qZA(),m.TgZ(14,"input",13,14),m.NdJ("click",(function(){m.CHM(e);const t=m.MAs(15);return m.KtG(t.value=null)}))("change",(function(){return t.uploadFile()})),m.qZA()(),m.YNc(16,Us,4,3,"div",15),m.qZA()}2&e&&(m.xp6(3),m.Q6J("icon","file")("size","small"),m.xp6(3),m.Q6J("ngIf",!t.componentconfig.alwaysExpanded),m.xp6(1),m.Q6J("ngIf",t.componentconfig.alwaysExpanded),m.xp6(1),m.Q6J("ngIf",t.modelattachments.files.length>0&&!t.componentconfig.alwaysExpanded),m.xp6(2),m.Q6J("icon",null!=t.componentconfig&&t.componentconfig.bigThumbnail?"file":"ad_set"),m.xp6(1),m.Q6J("ngIf",!t.componentconfig.disableFilter&&t.width>500),m.xp6(1),m.Q6J("ngIf",!t.componentconfig.disableCategories),m.xp6(1),m.Q6J("ngIf",!t.componentconfig.disableupload),m.xp6(3),m.Q6J("ngIf",t.isopen))},dependencies:[i.sg,i.O5,l.YN,l.Kr,l.Fj,l.EJ,l.JJ,l.On,Z.f,M._,St.W,w.r,os.M,C.S,Ls],encapsulation:2,data:{animation:[(0,f.X$)("animateicon",[(0,f.SB)("open",(0,f.oB)({transform:"scale(1, 1)"})),(0,f.SB)("closed",(0,f.oB)({transform:"scale(1, -1)"})),(0,f.eR)("open => closed",[(0,f.jt)(".5s")]),(0,f.eR)("closed => open",[(0,f.jt)(".5s")])]),(0,f.X$)("displaycard",[(0,f.eR)(":enter",[(0,f.oB)({opacity:0,height:"0px",overflow:"hidden"}),(0,f.jt)(".5s",(0,f.oB)({height:"*",opacity:1})),(0,f.oB)({overflow:"unset"})]),(0,f.eR)(":leave",[(0,f.oB)({overflow:"hidden"}),(0,f.jt)(".5s",(0,f.oB)({height:"0px",opacity:0}))])])]}}),ObjectRelatedlistFiles})();var js=s(9062);let Rs=(()=>{class ObjectActionMailModal{constructor(e,t,s,i,n,l,o){this.language=e,this.metadata=t,this.model=s,this.view=i,this.backend=n,this.prefs=l,this.modal=o,this.parent=null,this.self=null,this.sending=!1,this.titlelabel="LBL_BEANTOMAIL",this.mailsent=new m.vpe,this.model.module="Emails",this.view.isEditable=!0,this.view.setEditMode();let a=this.metadata.getComponentConfig("ObjectActionMailModal");this.fieldset=a.fieldset}ngOnInit(){this.model.initializeModel(this.parent),this.setParentData()}get isDisabled(){let e=this.model.getFieldValue("recipient_addresses"),t=this.model.getFieldValue("mailbox_id"),s=this.model.getFieldValue("name"),i=this.model.getFieldValue("body"),n=e?e.find((e=>"to"==e.address_type)):void 0;return!(s&&i&&t&&e&&n)||this.sending}setParentData(){this.model.setField("parent_type",this.parent.module),this.model.setField("parent_id",this.parent.id),this.model.setField("parent_name",this.parent.data.summary_text)}close(){this.self.destroy()}sendEmail(){this.modal.openModal("SystemLoadingModal",!1).subscribe((e=>{e.instance.messagelabel="LBL_SENDING",this.sending=!0,this.model.setFields({type:"out",to_be_sent:"1",from_addr:this.model.getField("from_addr_name"),to_addrs:this.model.getField("to_addrs_names")}),this.model.save().subscribe((t=>{e.instance.self.destroy(),this.mailsent.emit(!0),this.close()}),(t=>{e.instance.self.destroy(),this.sending=!1}))}))}}return ObjectActionMailModal.ɵfac=function(e){return new(e||ObjectActionMailModal)(m.Y36(h.d),m.Y36(b.Pu),m.Y36(g.o),m.Y36(Je.e),m.Y36(X.y),m.Y36(L.z),m.Y36(z.o))},ObjectActionMailModal.ɵcmp=m.Xpm({type:ObjectActionMailModal,selectors:[["object-action-mail-modal"]],inputs:{parent:"parent",titlelabel:"titlelabel"},outputs:{mailsent:"mailsent"},features:[m._Bn([Je.e,g.o])],decls:11,vars:3,consts:[["size","large"],[3,"close"],[3,"label"],["direction","vertical",3,"fieldset"],[1,"slds-p-around_xx-small"],[1,"slds-button","slds-button--neutral",3,"click"],["label","LBL_CANCEL"],[1,"slds-button","slds-button--brand",3,"disabled","click"],["label","LBL_SEND"]],template:function(e,t){1&e&&(m.TgZ(0,"system-modal",0)(1,"system-modal-header",1),m.NdJ("close",(function(){return t.close()})),m._UZ(2,"system-label",2),m.qZA(),m.TgZ(3,"system-modal-content"),m._UZ(4,"object-record-fieldset",3)(5,"object-relatedlist-files",4),m.qZA(),m.TgZ(6,"system-modal-footer")(7,"button",5),m.NdJ("click",(function(){return t.close()})),m._UZ(8,"system-label",6),m.qZA(),m.TgZ(9,"button",7),m.NdJ("click",(function(){return t.sendEmail()})),m._UZ(10,"system-label",8),m.qZA()()()),2&e&&(m.xp6(2),m.Q6J("label",t.titlelabel),m.xp6(2),m.Q6J("fieldset",t.fieldset),m.xp6(5),m.Q6J("disabled",t.isDisabled))},dependencies:[M._,Fe.j,qe.x,Ee.p,Ye.y,Ds,js.d],encapsulation:2}),ObjectActionMailModal})();var Bs=s(7579),Gs=s(9751),Ps=s(1604),Hs=s(4663),zs=s(7763),Vs=s(1790);function Ks(e,t){if(1&e){const e=m.EpF();m.TgZ(0,"button",9),m.NdJ("click",(function(){m.CHM(e);const t=m.oxw();return m.KtG(t.navigateDetails())})),m._UZ(1,"system-button-icon",10),m.qZA()}}function $s(e,t){if(1&e&&(m.ynx(0),m.TgZ(1,"dt",11)(2,"span",12),m._UZ(3,"system-label-fieldname",13),m.qZA()(),m.TgZ(4,"dd",14),m._UZ(5,"field-container",15),m.qZA(),m.BQk()),2&e){const e=t.$implicit,s=m.oxw();m.xp6(3),m.Q6J("module",s.model.module)("field",e.field),m.xp6(2),m.Q6J("field",e.field)("fieldconfig",e.fieldconfig)("fielddisplayclass","slds-truncate")}}let Xs=(()=>{class ObjectRelatedDuplicateTile{constructor(e,t,s,i,n){this.model=e,this.modal=t,this.view=s,this.language=i,this.metadata=n,this.enableLink=!0,this.enableButtonLink=!1,this.fieldset="",this.view.displayLabels=!1}ngOnInit(){let e=this.metadata.getComponentConfig("ObjectRelatedDuplicateTile",this.model.module);this.fieldset=e.fieldset}getFields(){return this.metadata.getFieldSetFields(this.fieldset)}navigateDetails(){this.modal.closeAllModals(),this.model.goDetail()}}return ObjectRelatedDuplicateTile.ɵfac=function(e){return new(e||ObjectRelatedDuplicateTile)(m.Y36(g.o),m.Y36(z.o),m.Y36(Je.e),m.Y36(h.d),m.Y36(b.Pu))},ObjectRelatedDuplicateTile.ɵcmp=m.Xpm({type:ObjectRelatedDuplicateTile,selectors:[["object-related-duplicate-tile"]],inputs:{enableLink:"enableLink",enableButtonLink:"enableButtonLink"},features:[m._Bn([Je.e])],decls:11,vars:6,consts:[[1,"slds-tile","slds-box","slds-media","slds-card__tile","slds-p-vertical--small","slds-p-horizontal--small","slds-hint-parent"],[3,"module","size"],[1,"slds-media__body"],[1,"slds-grid","slds-grid--align-spread","slds-has-flexi-truncate"],[1,"slds-truncate","slds-text-heading--small","slds-m-bottom--small",3,"system-model-popover"],["class","slds-button slds-button--icon-border",3,"click",4,"ngIf"],[1,"slds-tile__detail","slds-text-body--small"],[1,"slds-dl--horizontal"],[4,"ngFor","ngForOf"],[1,"slds-button","slds-button--icon-border",3,"click"],["icon","open"],[1,"slds-dl--horizontal__label","slds-truncate"],[1,"slds-truncate"],[3,"module","field"],[1,"slds-dl--horizontal__detail","slds-tile__meta"],[3,"field","fieldconfig","fielddisplayclass"]],template:function(e,t){1&e&&(m.TgZ(0,"div",0),m._UZ(1,"system-icon",1),m.TgZ(2,"div",2)(3,"div",3)(4,"h3",4)(5,"span"),m._uU(6),m.qZA()(),m.YNc(7,Ks,2,0,"button",5),m.qZA(),m.TgZ(8,"div",6)(9,"dl",7),m.YNc(10,$s,6,5,"ng-container",8),m.qZA()()()()),2&e&&(m.xp6(1),m.Q6J("module",t.model.module)("size","small"),m.xp6(3),m.Q6J("system-model-popover",t.enableLink),m.xp6(2),m.Oqu(t.model.data.summary_text),m.xp6(1),m.Q6J("ngIf",t.enableButtonLink),m.xp6(3),m.Q6J("ngForOf",t.getFields()))},dependencies:[i.sg,i.O5,Ne.j,x.J,Z.f,Re.h,Vs.g],encapsulation:2}),ObjectRelatedDuplicateTile})();const Ws=function(e,t){return{module:e,data:t}};function ei(e,t){if(1&e&&m._UZ(0,"object-related-duplicate-tile",10),2&e){const e=t.$implicit,s=m.oxw();m.Q6J("system-model-provider",m.WLB(3,Ws,s.model.module,e))("enableLink",!1)("enableButtonLink",!0)}}let ti=(()=>{class ObjectEditModalDialogDuplicatesPanel{constructor(e,t,s,i){this.model=e,this.metadata=t,this.language=s,this.view=i,this.close=new m.vpe,this.fieldset="",this.view.isEditable=!1}ngOnInit(){let e=this.metadata.getComponentConfig("GlobalModalDialogDuplicates",this.model.module);this.fieldset=e.fieldset}hidePanel(){this.close.emit(!0)}}return ObjectEditModalDialogDuplicatesPanel.ɵfac=function(e){return new(e||ObjectEditModalDialogDuplicatesPanel)(m.Y36(g.o),m.Y36(b.Pu),m.Y36(h.d),m.Y36(Je.e))},ObjectEditModalDialogDuplicatesPanel.ɵcmp=m.Xpm({type:ObjectEditModalDialogDuplicatesPanel,selectors:[["object-edit-modal-dialog-duplicates-panel"]],outputs:{close:"close"},features:[m._Bn([Je.e])],decls:12,vars:3,consts:[[1,"slds-card"],[1,"slds-card__header","slds-p-around--small","slds-theme--info","slds-grid","slds-grid_vertical-align-center","slds-grid--align-spread"],[1,"slds-text-heading--small"],["label","LBL_DUPLICATES"],["label","LBL_OF"],[1,"slds-button","slds-button--icon","slds-button--icon-border-filled",3,"click"],["icon","close"],[1,"slds-card__body","slds-card__body_inner"],[1,"slds-grid","slds-wrap","slds-grid_pull-padded"],["class","slds-size--1-of-1",3,"system-model-provider","enableLink","enableButtonLink",4,"ngFor","ngForOf"],[1,"slds-size--1-of-1",3,"system-model-provider","enableLink","enableButtonLink"]],template:function(e,t){1&e&&(m.TgZ(0,"div",0)(1,"div",1)(2,"h2",2),m._UZ(3,"system-label",3),m._uU(4),m._UZ(5,"system-label",4),m._uU(6),m.qZA(),m.TgZ(7,"button",5),m.NdJ("click",(function(){return t.hidePanel()})),m._UZ(8,"system-button-icon",6),m.qZA()(),m.TgZ(9,"div",7)(10,"ul",8),m.YNc(11,ei,1,6,"object-related-duplicate-tile",9),m.qZA()()()),2&e&&(m.xp6(4),m.hij(" (",t.model.duplicates.length," "),m.xp6(2),m.hij(" ",t.model.duplicatecount,")"),m.xp6(5),m.Q6J("ngForOf",t.model.duplicates))},dependencies:[i.sg,x.J,M._,zs.u,Xs],encapsulation:2}),ObjectEditModalDialogDuplicatesPanel})();var si=s(4347);const ii=["modalContent"],ni=function(e){return{"slds-hidden":e}};function li(e,t){if(1&e){const e=m.EpF();m.TgZ(0,"button",9),m.NdJ("click",(function(){m.CHM(e);const t=m.oxw();return m.KtG(t.showDuplicates=!t.showDuplicates)})),m.TgZ(1,"span",10),m._uU(2),m.qZA(),m._UZ(3,"system-label",11),m.qZA()}if(2&e){const e=m.oxw();m.Q6J("disabled",0==e.model.duplicates.length)("ngClass",m.VKq(3,ni,e.showDuplicatesTable)),m.xp6(2),m.Oqu(e.model.duplicateChecking?"":e.model.duplicatecount)}}function oi(e,t){if(1&e){const e=m.EpF();m.TgZ(0,"div",16)(1,"object-edit-modal-dialog-duplicates-panel",1),m.NdJ("close",(function(){m.CHM(e);const t=m.oxw(2);return m.KtG(t.showDuplicates=!1)})),m.qZA()()}}function ai(e,t){if(1&e&&(m.TgZ(0,"div",12)(1,"div",13),m._UZ(2,"object-edit-modal-dialog-container",14),m.qZA(),m.YNc(3,oi,2,0,"div",15),m.qZA()),2&e){const e=m.oxw();m.xp6(2),m.Q6J("componentSet",e.componentconfig.componentset),m.xp6(1),m.Q6J("ngIf",e.showDuplicates)}}let di=(()=>{class ObjectEditModal{constructor(e,t,s,i,n,l,o,a){this.router=e,this.language=t,this.model=s,this.view=i,this.metadata=n,this.modal=l,this.modalwindow=o,this.navigationtab=a,this.actionSetItems=[],this.actionSubject=new Bs.x,this.action$=new Gs.y,this.duplicates=[],this.showDuplicates=!1,this.showDuplicatesTable=!1,this.preventGoingToRecord=!1,this.self={},this.view.isEditable=!0,this.view.displayLinks=!1,this.view.setEditMode(),this.model.startEdit(),this.action$=this.actionSubject.asObservable()}ngOnInit(){this.componentconfig||(this.componentconfig=this.metadata.getComponentConfig(this.constructor.name,this.model.module)),this.actionSetItems=this.metadata.getActionSetItems(this.componentconfig.actionset),this.modalwindow.self=this.self}get actionset(){return this.componentconfig.actionset}closeModal(){this.model.cancelEdit(),this.actionSubject.next(!1),this.actionSubject.complete(),this.self.destroy()}get modalHeader(){return""!=this.model.module?this.language.getModuleName(this.model.module,!0):""}get grow(){return this.componentconfig.grow}handleAction(e){switch(e){case"savegodetail":this.actionSubject.next(e),this.model.goDetail(this.navigationtab?.tabid);break;case"save":this.actionSubject.next(e);break;default:this.actionSubject.next(!1)}this.actionSubject.complete(),this.self.destroy()}get duplicateCheckEnabled(){return this.model.isNew&&this.metadata.getModuleDuplicatecheck(this.model.module)}}return ObjectEditModal.ɵfac=function(e){return new(e||ObjectEditModal)(m.Y36(o.F0),m.Y36(h.d),m.Y36(g.o),m.Y36(Je.e),m.Y36(b.Pu),m.Y36(z.o),m.Y36(vt.S),m.Y36(Ze.d,8))},ObjectEditModal.ɵcmp=m.Xpm({type:ObjectEditModal,selectors:[["ng-component"]],viewQuery:function(e,t){if(1&e&&m.Gf(ii,7,m.s_b),2&e){let e;m.iGM(e=m.CRH())&&(t.modalContent=e.first)}},inputs:{preventGoingToRecord:"preventGoingToRecord"},features:[m._Bn([Je.e,vt.S])],decls:14,vars:5,consts:[["size","large"],[3,"close"],["class","slds-button slds-button--brand",3,"disabled","ngClass","click",4,"ngIf"],["margin","none",3,"grow"],["modalContent",""],["class","slds-grid",4,"ngIf"],[1,"slds-grid","slds-grid--vertical-align-center","slds-grid--align-spread"],[1,"slds-col"],["containerclass","slds-button-group-row",3,"actionset","actionemitter"],[1,"slds-button","slds-button--brand",3,"disabled","ngClass","click"],[1,"slds-p-right--xx-small"],["label","LBL_DUPLICATES"],[1,"slds-grid"],[1,"slds-grid--vertical","slds-grow"],[3,"componentSet"],["class","slds-size--1-of-3 slds-border--left",4,"ngIf"],[1,"slds-size--1-of-3","slds-border--left"]],template:function(e,t){1&e&&(m.TgZ(0,"system-modal",0)(1,"system-modal-header",1),m.NdJ("close",(function(){return t.closeModal()})),m._uU(2),m.TgZ(3,"system-modal-header-right"),m.YNc(4,li,4,5,"button",2),m.qZA()(),m.TgZ(5,"system-modal-content",3,4),m.YNc(7,ai,4,2,"div",5),m.qZA(),m.TgZ(8,"system-modal-footer")(9,"div",6)(10,"div",7),m._UZ(11,"object-record-messages-badge"),m.qZA(),m.TgZ(12,"div",7)(13,"object-action-container",8),m.NdJ("actionemitter",(function(e){return t.handleAction(e)})),m.qZA()()()()()),2&e&&(m.xp6(2),m.hij(" ",t.modalHeader," "),m.xp6(2),m.Q6J("ngIf",t.duplicateCheckEnabled),m.xp6(1),m.Q6J("grow",t.grow),m.xp6(2),m.Q6J("ngIf",!t.showDuplicatesTable),m.xp6(6),m.Q6J("actionset",t.componentconfig.actionset))},dependencies:[i.mk,i.O5,M._,Fe.j,qe.x,Ee.p,Ye.y,Ps.O,J.S,Hs.Z,ti,si.Z],encapsulation:2}),ObjectEditModal})();var ri=s(7514);const ci=["object-table-row",""];function ui(e,t){if(1&e){const e=m.EpF();m.TgZ(0,"td",2)(1,"system-checkbox",3),m.NdJ("ngModelChange",(function(){m.CHM(e);const t=m.oxw();return m.KtG(t.toggleSelection())})),m.qZA()()}if(2&e){const e=m.oxw();m.xp6(1),m.Q6J("ngModel",e.selected)}}function mi(e,t){if(1&e&&(m.TgZ(0,"td")(1,"div",4),m._UZ(2,"field-container",5),m.qZA()()),2&e){const e=t.$implicit,s=m.oxw();m.uIk("data-label",s.language.getFieldDisplayName(s.model.module,e.field,e.fieldconfig)),m.xp6(2),m.Q6J("fieldname",e.field)("fieldconfig",e.fieldconfig)("fielddisplayclass","slds-truncate")}}let hi=(()=>{class ObjectTableRow{constructor(e,t,s){this.language=e,this.model=t,this.view=s,this.fields=[],this.selected=!1,this.select$=new m.vpe,this.unselect$=new m.vpe,this.selectable=!1,this.view.isEditable=!1,this.view.displayLabels=!1}ngOnInit(){this.selectable=null!==this.attr_selectable}toggleSelection(){if(!this.selectable)return!1;this.selected=!this.selected,this.selected?this.select$.emit(this.model.data):this.unselect$.emit(this.model.data)}}return ObjectTableRow.ɵfac=function(e){return new(e||ObjectTableRow)(m.Y36(h.d),m.Y36(g.o),m.Y36(Je.e))},ObjectTableRow.ɵcmp=m.Xpm({type:ObjectTableRow,selectors:[["","object-table-row",""]],hostAttrs:[1,"slds-hint-parent"],inputs:{fields:"fields",selected:"selected",attr_selectable:["selectable","attr_selectable"]},outputs:{select$:"select",unselect$:"unselect"},features:[m._Bn([Je.e])],attrs:ci,decls:2,vars:2,consts:[["class","slds-cell-shrink","system-title","LBL_SELECT_ROW",4,"ngIf"],[4,"ngFor","ngForOf"],["system-title","LBL_SELECT_ROW",1,"slds-cell-shrink"],[3,"ngModel","ngModelChange"],[1,"slds-truncate"],[3,"fieldname","fieldconfig","fielddisplayclass"]],template:function(e,t){1&e&&(m.YNc(0,ui,2,1,"td",0),m.YNc(1,mi,3,4,"td",1)),2&e&&(m.Q6J("ngIf",t.selectable),m.xp6(1),m.Q6J("ngForOf",t.fields))},dependencies:[i.sg,i.O5,l.JJ,l.On,Ne.j,ri.U,C.S],encapsulation:2}),ObjectTableRow})();function gi(e,t){if(1&e){const e=m.EpF();m.TgZ(0,"th",5)(1,"span",6),m._UZ(2,"system-label",7),m.qZA(),m.TgZ(3,"system-checkbox",8),m.NdJ("ngModelChange",(function(){m.CHM(e);const t=m.oxw();return m.KtG(t.toggleAll())})),m.qZA()()}if(2&e){const e=m.oxw();m.xp6(3),m.Q6J("ngModel",e.areAllObjectsSelected())("disabled",e.objects.length>e.max_selections)}}function pi(e,t){if(1&e&&(m.TgZ(0,"div",11),m._UZ(1,"system-label-fieldname",12),m.qZA()),2&e){const e=m.oxw().$implicit,t=m.oxw();m.xp6(1),m.Q6J("module",t.module)("field",e.field)("fieldconfig",e.fieldconfig)}}function fi(e,t){if(1&e&&(m.TgZ(0,"th",9),m.YNc(1,pi,2,3,"div",10),m.qZA()),2&e){const e=t.$implicit;m.xp6(1),m.Q6J("ngIf",!e.fieldconfig||!e.fieldconfig.hidelabel)}}const bi=function(e,t){return{module:e,data:t}};function _i(e,t){if(1&e){const e=m.EpF();m.TgZ(0,"tr",13),m.NdJ("select",(function(t){m.CHM(e);const s=m.oxw();return m.KtG(s.select(t))}))("unselect",(function(t){m.CHM(e);const s=m.oxw();return m.KtG(s.unselect(t))})),m.qZA()}if(2&e){const e=t.$implicit,s=m.oxw();m.Q6J("fields",s.fields)("system-model-provider",m.WLB(4,bi,s.module,e))("selectable",!!s.selectable||null)("selected",s.isObjectSelected(e))}}let yi=(()=>{class ObjectTable{constructor(e,t,s,i){this.language=e,this.metadata=t,this.fields=[],this.objects=[],this.selected_objects=[],this.selected_objects$=new m.vpe,this.max_selections=0,this.select$=new m.vpe,this.selectable=!1,this.multiselect=!1,this.selectable=null!==s,this.multiselect=null!==i}ngOnInit(){if(!this.fields||0==this.fields.length)if(this.fieldset_id)this.fields=this.metadata.getFieldSetFields(this.fieldset_id);else{let e=this.metadata.getComponentConfig("ObjectList",this.module);this.fields=this.metadata.getFieldSetFields(e.fieldset)}if(!this.fields||0==this.fields.length)throw new Error(`No fields given, nor found for module ${this.module}`);this.selectable&&this.max_selections<1&&(this.max_selections=1),this.multiselect&&this.max_selections<2&&(this.max_selections=99)}toggleAll(){this.selected_objects.length<this.objects.length?this.selected_objects=[...this.objects]:this.selected_objects=[],this.selected_objects$.emit(this.selected_objects),this.select$.emit(this.selected_objects)}select(e){!this.findSelectedObject(e)&&this.selected_objects.length<this.max_selections&&(this.selected_objects.push(e),this.selected_objects$.emit(this.selected_objects),this.select$.emit(this.selected_objects))}unselect(e){let t=this.selected_objects.findIndex((t=>t.id==e.id));t>-1&&(this.selected_objects.splice(t,1),this.selected_objects$.emit(this.selected_objects),this.select$.emit(this.selected_objects))}isObjectSelected(e){return!!this.findSelectedObject(e)}areAllObjectsSelected(){return this.selected_objects.length==this.objects.length}findSelectedObject(e){return this.selected_objects.find((t=>t.id==e.id))}}return ObjectTable.ɵfac=function(e){return new(e||ObjectTable)(m.Y36(h.d),m.Y36(b.Pu),m.$8M("selectable"),m.$8M("multiselect"))},ObjectTable.ɵcmp=m.Xpm({type:ObjectTable,selectors:[["object-table"]],inputs:{fields:"fields",objects:"objects",selected_objects:"selected_objects",fieldset_id:"fieldset_id",module:"module",max_selections:["max-selections","max_selections"]},outputs:{selected_objects$:"selected_objectsChange",select$:"select"},decls:7,vars:3,consts:[[1,"slds-table","slds-table_bordered","slds-max-medium-table_stacked-horizontal","slds-table_fixed-layout"],[1,"slds-text-title--caps"],["class","slds-cell-shrink","scope","col",4,"ngIf"],["scope","col",4,"ngFor","ngForOf"],["object-table-row","",3,"fields","system-model-provider","selectable","selected","select","unselect",4,"ngFor","ngForOf"],["scope","col",1,"slds-cell-shrink"],["id","check-group-header",1,"slds-assistive-text"],["label","LBL_CHOOSE_ROWS_TO_SELECT"],[3,"ngModel","disabled","ngModelChange"],["scope","col"],["class","slds-truncate",4,"ngIf"],[1,"slds-truncate"],[3,"module","field","fieldconfig"],["object-table-row","",3,"fields","system-model-provider","selectable","selected","select","unselect"]],template:function(e,t){1&e&&(m.TgZ(0,"table",0)(1,"thead")(2,"tr",1),m.YNc(3,gi,4,2,"th",2),m.YNc(4,fi,2,1,"th",3),m.qZA()(),m.TgZ(5,"tbody"),m.YNc(6,_i,1,7,"tr",4),m.qZA()()),2&e&&(m.xp6(3),m.Q6J("ngIf",t.selectable),m.xp6(1),m.Q6J("ngForOf",t.fields),m.xp6(2),m.Q6J("ngForOf",t.objects))},dependencies:[i.sg,i.O5,l.JJ,l.On,ri.U,M._,Re.h,zs.u,hi],encapsulation:2}),ObjectTable})(),vi=(()=>{class ObjectEditModalDialogDuplicates{constructor(e,t,s){this.model=e,this.metadata=t,this.language=s,this.module="",this.duplicates=[],this.fieldset=""}ngOnInit(){let e=this.metadata.getComponentConfig("GlobalModalDialogDuplicates",this.model.module);this.fieldset=e.fieldset}}return ObjectEditModalDialogDuplicates.ɵfac=function(e){return new(e||ObjectEditModalDialogDuplicates)(m.Y36(g.o),m.Y36(b.Pu),m.Y36(h.d))},ObjectEditModalDialogDuplicates.ɵcmp=m.Xpm({type:ObjectEditModalDialogDuplicates,selectors:[["object-edit-modal-dialog-duplicates"]],inputs:{module:"module",duplicates:"duplicates"},decls:1,vars:3,consts:[[3,"module","fieldset_id","objects"]],template:function(e,t){1&e&&m._UZ(0,"object-table",0),2&e&&m.Q6J("module",t.model.module)("fieldset_id",t.fieldset)("objects",t.duplicates)},dependencies:[yi],encapsulation:2}),ObjectEditModalDialogDuplicates})();const xi=["modalContent"];function Zi(e,t){if(1&e&&m._UZ(0,"object-edit-modal-dialog-duplicates",16),2&e){const e=m.oxw();m.Q6J("duplicates",e.duplicates)}}let wi=(()=>{class ObjectEditModalWReference{constructor(e,t,s,i,n,l){this.router=e,this.language=t,this.model=s,this.view=i,this.metadata=n,this.elementref=l,this.componentRefs=[],this.componentSet="",this.module="",this.reference="",this.showDuplicates=!1,this.doDuplicateCheck=!0,this.duplicates=[],this.modalAction$=new m.vpe,this.self={},this.view.isEditable=!0,this.view.setEditMode()}closeModal(){this.modalAction$.emit(!1)}get modalHeader(){return""!=this.model.module?this.language.getModuleName(this.model.module,!0):""}save(e=!1){this.model.validate()&&this.modalAction$.emit(this.model.data)}get contentStyle(){if(this.showDuplicates)return{"overflow-y":"hidden"}}}return ObjectEditModalWReference.ɵfac=function(e){return new(e||ObjectEditModalWReference)(m.Y36(o.F0),m.Y36(h.d),m.Y36(g.o),m.Y36(Je.e),m.Y36(b.Pu),m.Y36(m.SBq))},ObjectEditModalWReference.ɵcmp=m.Xpm({type:ObjectEditModalWReference,selectors:[["ng-component"]],viewQuery:function(e,t){if(1&e&&m.Gf(xi,7,m.s_b),2&e){let e;m.iGM(e=m.CRH())&&(t.modalContent=e.first)}},features:[m._Bn([g.o,Je.e])],decls:17,vars:6,consts:[["role","dialog",1,"slds-modal","slds-fade-in-open","slds-modal--large"],[1,"slds-modal__container"],[1,"slds-modal__header"],[1,"slds-button","slds-modal__close","slds-button--icon-inverse",3,"click"],[3,"icon","size"],[1,"slds-text-heading--medium"],[1,"slds-modal__content","slds-is-relative",3,"ngStyle"],["modalContent",""],[3,"componentSet"],["class","slds-is-absolute slds-theme--shade",3,"duplicates",4,"ngIf"],[1,"slds-modal__footer"],[1,"slds-button","slds-button--neutral",3,"click"],["label","LBL_CANCEL"],[1,"slds-button","slds-button--brand",3,"click"],["label","LBL_SAVE"],[1,"slds-backdrop","slds-backdrop--open"],[1,"slds-is-absolute","slds-theme--shade",3,"duplicates"]],template:function(e,t){1&e&&(m.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"button",3),m.NdJ("click",(function(){return t.closeModal()})),m._UZ(4,"system-button-icon",4),m.qZA(),m.TgZ(5,"h2",5),m._uU(6),m.qZA()(),m.TgZ(7,"div",6,7),m._UZ(9,"object-edit-modal-dialog-container",8),m.YNc(10,Zi,1,1,"object-edit-modal-dialog-duplicates",9),m.qZA(),m.TgZ(11,"div",10)(12,"button",11),m.NdJ("click",(function(){return t.closeModal()})),m._UZ(13,"system-label",12),m.qZA(),m.TgZ(14,"button",13),m.NdJ("click",(function(){return t.save()})),m._UZ(15,"system-label",14),m.qZA()()()(),m._UZ(16,"div",15)),2&e&&(m.xp6(4),m.Q6J("icon","close")("size","large"),m.xp6(2),m.Oqu(t.modalHeader),m.xp6(1),m.Q6J("ngStyle",t.contentStyle),m.xp6(2),m.Q6J("componentSet",t.componentSet),m.xp6(1),m.Q6J("ngIf",t.showDuplicates))},dependencies:[i.O5,i.PC,x.J,M._,Hs.Z,vi],encapsulation:2}),ObjectEditModalWReference})();var Ti=s(6367);let Ci=(()=>{class ObjectOptimisticLockingModalDataField{constructor(e){this.model=e,this.fieldname="",this.fieldmodule=""}ngOnInit(){this.model.module=this.fieldmodule,this.model.setField(this.fieldname,this.fieldvalue)}}return ObjectOptimisticLockingModalDataField.ɵfac=function(e){return new(e||ObjectOptimisticLockingModalDataField)(m.Y36(g.o))},ObjectOptimisticLockingModalDataField.ɵcmp=m.Xpm({type:ObjectOptimisticLockingModalDataField,selectors:[["object-optimisitclocking-modal-data-field"]],inputs:{fieldname:"fieldname",fieldmodule:"fieldmodule",fieldvalue:"fieldvalue"},features:[m._Bn([g.o])],decls:1,vars:2,consts:[[3,"field","fielddisplayclass"]],template:function(e,t){1&e&&m._UZ(0,"field-container",0),2&e&&m.Q6J("field",t.fieldname)("fielddisplayclass","slds-truncate")},dependencies:[Ne.j],encapsulation:2}),ObjectOptimisticLockingModalDataField})();var Ai=s(34);let ki=(()=>{class ObjectOptimisticLockingModalChange{constructor(e,t,s){this.model=e,this.language=t,this.userpreferences=s,this.change={}}get changeDate(){let e=moment(this.change.date_created).tz(this.userpreferences.toUse.timezone);return e.add(e.utcOffset(),"m"),e.format(this.userpreferences.getDateFormat()+" "+this.userpreferences.getTimeFormat())}}return ObjectOptimisticLockingModalChange.ɵfac=function(e){return new(e||ObjectOptimisticLockingModalChange)(m.Y36(g.o),m.Y36(h.d),m.Y36(L.z))},ObjectOptimisticLockingModalChange.ɵcmp=m.Xpm({type:ObjectOptimisticLockingModalChange,selectors:[["object-optimisitclocking-modal-change"]],inputs:{change:"change"},features:[m._Bn([Je.e])],decls:15,vars:4,consts:[[1,"slds-p-vertical--xx-small"],[1,"slds-box--border"],[1,"slds-p-around--x-small"],[1,"slds-grid"],[1,"slds-m-top--xx-small"],["icon","history","size","x-small"],[1,"slds-col_bump-right","slds-m-left--xx-small"],["label","LBL_BY"],["icon","forward","size","xx-small"]],template:function(e,t){1&e&&(m.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4),m._UZ(5,"system-custom-icon",5),m.qZA(),m.TgZ(6,"div",6)(7,"div"),m._uU(8),m._UZ(9,"system-label",7),m._uU(10),m.qZA(),m.TgZ(11,"div"),m._uU(12),m._UZ(13,"system-utility-icon",8),m._uU(14),m.qZA()()()()()()),2&e&&(m.xp6(8),m.hij("",t.changeDate,", "),m.xp6(2),m.hij(" ",t.change.user_name,""),m.xp6(2),m.hij("",t.change.before_value_string,"   "),m.xp6(2),m.hij("   ",t.change.after_value_string,""))},dependencies:[Ai.$,M._,w.r],encapsulation:2}),ObjectOptimisticLockingModalChange})();function Li(e,t){if(1&e&&m._UZ(0,"object-optimisitclocking-modal-change",42),2&e){const e=t.$implicit;m.Q6J("change",e)}}function Mi(e,t){if(1&e&&(m.TgZ(0,"tr")(1,"td",40),m.YNc(2,Li,1,1,"object-optimisitclocking-modal-change",41),m.qZA()()),2&e){const e=m.oxw().$implicit;m.xp6(2),m.Q6J("ngForOf",e.changes)}}function Si(e,t){if(1&e){const e=m.EpF();m.ynx(0),m.TgZ(1,"tr",23)(2,"td")(3,"div",24),m._UZ(4,"field-label",25),m.TgZ(5,"div",26),m.NdJ("click",(function(){const t=m.CHM(e).$implicit,s=m.oxw();return m.KtG(s.toggleChangeDetails(t.field))})),m._UZ(6,"system-utility-icon",27),m.qZA()()(),m.TgZ(7,"td")(8,"div",28)(9,"div",29)(10,"input",30),m.NdJ("click",(function(){const t=m.CHM(e).$implicit,s=m.oxw();return m.KtG(s.unselect(t.field))})),m.qZA(),m.TgZ(11,"label",31),m._UZ(12,"span",32),m.qZA()(),m.TgZ(13,"div",33),m._UZ(14,"object-optimisitclocking-modal-data-field",34),m.qZA()()(),m.TgZ(15,"td",35),m._UZ(16,"system-utility-icon",36),m.qZA(),m.TgZ(17,"td")(18,"div",28)(19,"div",29)(20,"input",37),m.NdJ("click",(function(){const t=m.CHM(e).$implicit,s=m.oxw();return m.KtG(s.select(t.field))})),m.qZA(),m.TgZ(21,"label",31),m._UZ(22,"span",32),m.qZA()(),m.TgZ(23,"div",33),m._UZ(24,"field-container",38),m.qZA()()()(),m.YNc(25,Mi,3,1,"tr",39),m.BQk()}if(2&e){const e=t.$implicit,s=t.index,i=m.oxw();m.xp6(4),m.Q6J("fieldname",e.field),m.xp6(6),m.MGl("id","radio",s,"1"),m.s9C("name",s),m.xp6(1),m.MGl("for","radio",s,"1"),m.xp6(3),m.Q6J("fieldmodule",i.model.module)("fieldname",e.field)("fieldvalue",e.value),m.xp6(6),m.MGl("id","radio",s,"2"),m.s9C("name",s),m.xp6(1),m.MGl("for","radio",s,"2"),m.xp6(3),m.Q6J("fieldname",e.field)("fielddisplayclass","slds-truncate"),m.xp6(1),m.Q6J("ngIf",i.channgeOpen(e.field))}}let Ii=(()=>{class ObjectOptimisticLockingModal{constructor(e,t,s,i,n){this.language=e,this.model=t,this.view=s,this.metadata=i,this.modal=n,this.self={},this.conflicts={},this._conflicts=[],this.originaldata={},this.fieldsToCopy={},this.view.displayLabels=!1}ngOnInit(){for(let e in this.conflicts)this._conflicts.push({field:e,value:this.conflicts[e].value,changes:this.conflicts[e].changes}),this.originaldata[e]=this.conflicts[e].value}cancel(){this.responseSubject.error(!0),this.responseSubject.complete(),this.self.destroy()}edit(){this.model.edit(),this.self.destroy()}save(e=!1){this.copyFields(),this.modal.openModal("SystemLoadingModal").subscribe((t=>{t.instance.messagelabel="LBL_SAVING_DATA",this.model.setField("date_modified",new moment),this.model.save().subscribe((s=>{s&&(e&&this.model.goDetail(),this.self.destroy()),t.instance.self.destroy()})),this.responseSubject.next(!0),this.responseSubject.complete()}))}copyFields(){for(let e in this.conflicts)this.fieldsToCopy[e]||this.model.setField(e,this.conflicts[e].value)}toggleChangeDetails(e){this.conflicts[e].open=!this.conflicts[e].open}select(e){this.fieldsToCopy[e]=!0}unselect(e){delete this.fieldsToCopy[e]}changeDetailsIcon(e){return this.conflicts[e].open?"chevronup":"chevrondown"}channgeOpen(e){return!!this.conflicts[e].open}}return ObjectOptimisticLockingModal.ɵfac=function(e){return new(e||ObjectOptimisticLockingModal)(m.Y36(h.d),m.Y36(g.o),m.Y36(Je.e),m.Y36(b.Pu),m.Y36(z.o))},ObjectOptimisticLockingModal.ɵcmp=m.Xpm({type:ObjectOptimisticLockingModal,selectors:[["ng-component"]],features:[m._Bn([Je.e])],decls:29,vars:2,consts:[["size","large"],[3,"hiddenCloseButton"],["label","LBL_OPTIMISTICLOCKING_CONFLICT"],["margin","none"],[1,"slds-p-around--small"],[1,"slds-text-heading--label"],["label","MSG_OPTIMISTIC_LOCKING"],[1,"slds-p-vertical--xx-small"],["label","MSG_OPTIMISTIC_LOCKING","length","long"],[1,"slds-table","slds-table_cell-buffer","slds-table_bordered","slds-no-row-hover"],[1,"slds-line-height_reset"],["scope","col",1,"slds-text-title_caps"],[1,"slds-truncate"],["label","LBL_FIELD"],["scope","col",1,"slds-text-title_caps",2,"width","33%"],["label","LBL_CURRENT_VALUE"],["scope","col",1,"slds-text-title_caps",2,"width","3.25rem"],["label","LBL_NEW_VALUE"],[4,"ngFor","ngForOf"],[1,"slds-button","slds-button--neutral",3,"click"],["label","LBL_CANCEL"],[1,"slds-button","slds-button--brand",3,"click"],["label","LBL_SAVE"],[1,"slds-hint-parent"],[1,"slds-grid","slds-grid--align-spread","slds-grid--vertical-align-center"],[2,"margin-right","0",3,"fieldname"],[3,"click"],["icon","clock","size","x-small"],[1,"slds-grid","slds-grid--vertical-align-center"],[1,"slds-radio","slds-p-right--x-small"],["type","radio","checked","",3,"id","name","click"],[1,"slds-radio__label",3,"for"],[1,"slds-radio_faux"],[1,"slds-box","slds-box--xx-small","slds-p-vertical--x-small",2,"width","100%"],[3,"fieldmodule","fieldname","fieldvalue"],[1,"slds-text-align--center"],["icon","forward","size","x-small"],["type","radio",3,"id","name","click"],[3,"fieldname","fielddisplayclass"],[4,"ngIf"],["colspan","4",2,"border-top","none"],[3,"change",4,"ngFor","ngForOf"],[3,"change"]],template:function(e,t){1&e&&(m.TgZ(0,"system-modal",0)(1,"system-modal-header",1),m._UZ(2,"system-label",2),m.qZA(),m.TgZ(3,"system-modal-content",3)(4,"div",4)(5,"div",5),m._UZ(6,"system-label",6),m.qZA(),m.TgZ(7,"div",7),m._UZ(8,"system-label",8),m.qZA()(),m.TgZ(9,"table",9)(10,"thead")(11,"tr",10)(12,"th",11)(13,"div",12),m._UZ(14,"system-label",13),m.qZA()(),m.TgZ(15,"th",14)(16,"div",12),m._UZ(17,"system-label",15),m.qZA()(),m._UZ(18,"th",16),m.TgZ(19,"th",14)(20,"div",12),m._UZ(21,"system-label",17),m.qZA()()()(),m.TgZ(22,"tbody"),m.YNc(23,Si,26,13,"ng-container",18),m.qZA()()(),m.TgZ(24,"system-modal-footer")(25,"button",19),m.NdJ("click",(function(){return t.cancel()})),m._UZ(26,"system-label",20),m.qZA(),m.TgZ(27,"button",21),m.NdJ("click",(function(){return t.save()})),m._UZ(28,"system-label",22),m.qZA()()()),2&e&&(m.xp6(1),m.Q6J("hiddenCloseButton",!0),m.xp6(22),m.Q6J("ngForOf",t._conflicts))},dependencies:[i.sg,i.O5,Ti.q,Ne.j,M._,Fe.j,qe.x,Ee.p,Ye.y,w.r,Ci,ki],styles:["table[_ngcontent-%COMP%]{border-bottom:none}","table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:last-child   td[_ngcontent-%COMP%]{border-bottom:none}"]}),ObjectOptimisticLockingModal})();var Oi=s(79),Ji=s(5232),Ni=s(115);function Fi(e,t){if(1&e&&(m.TgZ(0,"option",19),m._UZ(1,"system-label",1),m.qZA()),2&e){const e=t.$implicit;m.Q6J("value",e.component),m.xp6(1),m.Q6J("label",e.label)}}function qi(e,t){if(1&e){const e=m.EpF();m.TgZ(0,"div",20)(1,"div",7)(2,"system-checkbox",21),m.NdJ("ngModelChange",(function(t){m.CHM(e);const s=m.oxw();return m.KtG(s.globallist=t)})),m._UZ(3,"system-label",22),m.qZA()()()}if(2&e){const e=m.oxw();m.xp6(2),m.Q6J("ngModel",e.globallist)}}let Ei=(()=>{class ObjectListViewSettingsAddlistModal{constructor(e,t,s,i){this.language=e,this.session=t,this.metadata=s,this.modellist=i,this.modalmode="add",this.listname="",this.globallist=!1,this.self={},this.componentListOptions=[]}ngOnInit(){this.loadComponentListOptions(),"edit"===this.modalmode&&(this.listname=this.modellist.currentList.name,this.globallist=this.modellist.getGlobal(),this.listcomponent=this.modellist.currentList.listcomponent)}loadComponentListOptions(){let e=this.modellist.metadata.getComponentConfig("ObjectListView",this.modellist.module),t=this.modellist.metadata.getComponentSetObjects(e.componentset);this.componentListOptions=t.map((e=>({component:e.component,label:e.componentconfig.name}))),this.listcomponent=this.componentListOptions[0].component}close(){this.self.destroy()}canSave(){return!(this.listname.length>0)}get isadmin(){return this.session.isAdmin||this.metadata.checkModuleAcl(this.modellist.module,"moduleadmin")}save(){if(this.listname.length>0){const e={name:this.listname,listcomponent:this.listcomponent,global:this.globallist?"1":"0"};switch(this.modalmode){case"add":this.modellist.addListType(e).subscribe((e=>{this.close()}));break;case"edit":this.modellist.updateListType(e).subscribe((e=>{this.close()}))}}}}return ObjectListViewSettingsAddlistModal.ɵfac=function(e){return new(e||ObjectListViewSettingsAddlistModal)(m.Y36(h.d),m.Y36(Ut.n),m.Y36(b.Pu),m.Y36(v.t))},ObjectListViewSettingsAddlistModal.ɵcmp=m.Xpm({type:ObjectListViewSettingsAddlistModal,selectors:[["object-listview-settings-addlistmodal"]],inputs:{modalmode:"modalmode"},decls:25,vars:6,consts:[[3,"close"],[3,"label"],[1,"slds-form--stacked"],[1,"slds-form-element"],[1,"slds-form-element__label"],[1,"slds-required"],["label","LBL_NEWLISTNAME"],[1,"slds-form-element__control"],["type","text","autofocus","",1,"slds-input",3,"ngModel","ngModelChange"],[1,"slds-form-element","slds-p-vertical--small"],["label","LBL_TYPE"],[1,"slds-select_container"],[1,"slds-select",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["class","slds-form-element slds-m-vertical--x-small",4,"ngIf"],[1,"slds-button","slds-button--neutral",3,"click"],["label","LBL_CANCEL"],[1,"slds-button","slds-button--brand",3,"disabled","click"],["label","LBL_SAVE"],[3,"value"],[1,"slds-form-element","slds-m-vertical--x-small"],[3,"ngModel","ngModelChange"],["label","LBL_GLOBALVISIBLE"]],template:function(e,t){1&e&&(m.TgZ(0,"system-modal")(1,"system-modal-header",0),m.NdJ("close",(function(){return t.close()})),m._UZ(2,"system-label",1),m.qZA(),m.TgZ(3,"system-modal-content")(4,"div",2)(5,"div",3)(6,"label",4)(7,"abbr",5),m._uU(8,"*"),m.qZA(),m._UZ(9,"system-label",6),m.qZA(),m.TgZ(10,"div",7)(11,"input",8),m.NdJ("ngModelChange",(function(e){return t.listname=e})),m.qZA()()(),m.TgZ(12,"div",9)(13,"label",4),m._UZ(14,"system-label",10),m.qZA(),m.TgZ(15,"div",7)(16,"div",11)(17,"select",12),m.NdJ("ngModelChange",(function(e){return t.listcomponent=e})),m.YNc(18,Fi,2,2,"option",13),m.qZA()()()(),m.YNc(19,qi,4,1,"div",14),m.qZA()(),m.TgZ(20,"system-modal-footer")(21,"button",15),m.NdJ("click",(function(){return t.close()})),m._UZ(22,"system-label",16),m.qZA(),m.TgZ(23,"button",17),m.NdJ("click",(function(){return t.save()})),m._UZ(24,"system-label",18),m.qZA()()()),2&e&&(m.xp6(2),m.Q6J("label","LBL_"+t.modalmode.toUpperCase()+"LIST"),m.xp6(9),m.Q6J("ngModel",t.listname),m.xp6(6),m.Q6J("ngModel",t.listcomponent),m.xp6(1),m.Q6J("ngForOf",t.componentListOptions),m.xp6(1),m.Q6J("ngIf",t.isadmin),m.xp6(4),m.Q6J("disabled",t.canSave()))},dependencies:[i.sg,i.O5,l.YN,l.Kr,l.Fj,l.EJ,l.JJ,l.On,ri.U,M._,Fe.j,qe.x,Ee.p,Ye.y],encapsulation:2}),ObjectListViewSettingsAddlistModal})();function Yi(e,t){if(1&e){const e=m.EpF();m.TgZ(0,"div",18),m.NdJ("click",(function(){const t=m.CHM(e).$implicit,s=m.oxw();return m.KtG(s.selectField("available",t.id))})),m.TgZ(1,"span",19),m._UZ(2,"system-label-fieldname",20),m.TgZ(3,"span",21),m._uU(4),m.qZA()()()}if(2&e){const e=t.$implicit,s=m.oxw();m.Q6J("cdkDragData",e),m.uIk("aria-selected",s.isSelected("available",e.id)),m.xp6(2),m.Q6J("module",s.modellist.module)("field",e.field)("fieldconfig",e.fieldconfig),m.xp6(2),m.hij("(",e.field,")")}}function Qi(e,t){if(1&e){const e=m.EpF();m.TgZ(0,"div",18),m.NdJ("click",(function(){const t=m.CHM(e).$implicit,s=m.oxw();return m.KtG(s.selectField("list",t.id))})),m.TgZ(1,"span",19),m._UZ(2,"system-label-fieldname",20),m.TgZ(3,"span",21),m._uU(4),m.qZA()()()}if(2&e){const e=t.$implicit,s=m.oxw();m.Q6J("cdkDragData",e),m.uIk("aria-selected",s.isSelected("list",e.id)),m.xp6(2),m.Q6J("module",s.modellist.module)("field",e.field)("fieldconfig",e.fieldconfig),m.xp6(2),m.hij("(",e.field,")")}}const Ui=function(e){return[e]};let Di=(()=>{class ObjectListViewSettingsSetfieldsModal{constructor(e,t,s){this.metadata=e,this.language=t,this.modellist=s,this.self={},this.listFields=[],this.availableFields=[],this.selectedAvailableFields=[],this.selectedListFields=[],this.listFields=_.clone(this.modellist.listfields);let i=this.metadata.getComponentConfig("ObjectList",this.modellist.module),n=this.metadata.getFieldSetFields(i.fieldset);for(let e of n)this.listFields.find((t=>t.id==e.id))||this.availableFields.push({id:e.id,field:e.field,fieldconfig:e.fieldconfig});this.availableFields.length>0&&this.sortAvailableFields()}sortAvailableFields(){this.availableFields=this.availableFields.sort(((e,t)=>this.language.getFieldDisplayName(this.modellist.module,e.field,e.fieldconfig).toLowerCase()>this.language.getFieldDisplayName(this.modellist.module,t.field,t.fieldconfig).toLowerCase()?1:-1))}close(){this.self.destroy()}canSet(){return this.listFields.length>0}set(){this.canSet()&&(this.modellist.listfields=this.listFields,this.close())}saveAndSet(){this.canSet()&&(this.modellist.listfields=this.listFields,this.modellist.updateListType().subscribe((()=>this.close())))}onFieldDrop(e){let t=e.previousContainer.data.splice(e.previousIndex,1);e.container.data.splice(e.currentIndex,0,t[0])}selectField(e,t){switch(e){case"available":this.selectedAvailableFields=[t];break;case"list":this.selectedListFields=[t]}}isSelected(e,t){switch(e){case"available":return this.selectedAvailableFields.indexOf(t)>=0;case"list":return this.selectedListFields.indexOf(t)>=0}}moveFields(e){switch(e){case"available":this.selectedAvailableFields.forEach((e=>{this.availableFields.some(((t,s)=>{if(e==t.field)return this.listFields.push(this.availableFields.splice(s,1)[0]),!0}))})),this.selectedAvailableFields=[];break;case"list":this.selectedListFields.forEach((e=>{this.listFields.some(((t,s)=>{if(e==t.field)return this.availableFields.push(this.listFields.splice(s,1)[0]),!0}))})),this.selectedListFields=[],this.sortAvailableFields()}}}return ObjectListViewSettingsSetfieldsModal.ɵfac=function(e){return new(e||ObjectListViewSettingsSetfieldsModal)(m.Y36(b.Pu),m.Y36(h.d),m.Y36(v.t))},ObjectListViewSettingsSetfieldsModal.ɵcmp=m.Xpm({type:ObjectListViewSettingsSetfieldsModal,selectors:[["object-listview-settings-setfields-modal"]],decls:24,vars:12,consts:[[3,"close"],["label","LBL_SETFIELDS"],[1,"slds-grid"],[1,"slds-form-element","slds-p-horizontal--small","slds-size--1-of-2"],[1,"slds-form-element__label"],["label","LBL_AVAILABLE_FIELDS"],["cdkDropList","",1,"slds-picklist","slds-picklist__options","slds-size--1-of-1",2,"height","50vh",3,"cdkDropListData","cdkDropListConnectedTo","cdkDropListDropped"],["listOne","cdkDropList"],["cdkDrag","","class","slds-drag--preview slds-picklist__item","role","option",3,"cdkDragData","click",4,"ngFor","ngForOf"],["label","LBL_SELECTED_FIELDS"],["cdkDropList","",1,"slds-picklist","slds-picklist__options","slds-size--1-of-1","cdk-drag",2,"height","50vh",3,"cdkDropListData","cdkDropListConnectedTo","cdkDropListDropped"],["listTwo","cdkDropList"],[1,"slds-button","slds-button--neutral",3,"click"],["label","LBL_CANCEL"],[1,"slds-button","slds-button--neutral",3,"disabled","click"],["label","LBL_SAVE_AND_SET"],[1,"slds-button","slds-button--brand",3,"disabled","click"],["label","LBL_SET"],["cdkDrag","","role","option",1,"slds-drag--preview","slds-picklist__item",3,"cdkDragData","click"],[1,"slds-truncate"],[3,"module","field","fieldconfig"],[1,"slds-text-color--inverse-weak"]],template:function(e,t){if(1&e&&(m.TgZ(0,"system-modal")(1,"system-modal-header",0),m.NdJ("close",(function(){return t.close()})),m._UZ(2,"system-label",1),m.qZA(),m.TgZ(3,"system-modal-content")(4,"div",2)(5,"div",3)(6,"span",4),m._UZ(7,"system-label",5),m.qZA(),m.TgZ(8,"div",6,7),m.NdJ("cdkDropListDropped",(function(e){return t.onFieldDrop(e)})),m.YNc(10,Yi,5,6,"div",8),m.qZA()(),m.TgZ(11,"div",3)(12,"span",4),m._UZ(13,"system-label",9),m.qZA(),m.TgZ(14,"div",10,11),m.NdJ("cdkDropListDropped",(function(e){return t.onFieldDrop(e)})),m.YNc(16,Qi,5,6,"div",8),m.qZA()()()(),m.TgZ(17,"system-modal-footer")(18,"button",12),m.NdJ("click",(function(){return t.close()})),m._UZ(19,"system-label",13),m.qZA(),m.TgZ(20,"button",14),m.NdJ("click",(function(){return t.saveAndSet()})),m._UZ(21,"system-label",15),m.qZA(),m.TgZ(22,"button",16),m.NdJ("click",(function(){return t.set()})),m._UZ(23,"system-label",17),m.qZA()()()),2&e){const e=m.MAs(9),s=m.MAs(15);m.xp6(8),m.Q6J("cdkDropListData",t.availableFields)("cdkDropListConnectedTo",m.VKq(8,Ui,s)),m.xp6(2),m.Q6J("ngForOf",t.availableFields),m.xp6(4),m.Q6J("cdkDropListData",t.listFields)("cdkDropListConnectedTo",m.VKq(10,Ui,e)),m.xp6(2),m.Q6J("ngForOf",t.listFields),m.xp6(4),m.Q6J("disabled",!t.canSet()),m.xp6(2),m.Q6J("disabled",!t.canSet())}},dependencies:[i.sg,n.Wj,n.Zt,M._,Re.h,Fe.j,qe.x,Ee.p,Ye.y],encapsulation:2}),ObjectListViewSettingsSetfieldsModal})();const ji=["container"];let Ri=(()=>{class ObjectRecordViewContainer{constructor(e,t,s,i,n,l,o){this.navigation=e,this.navigationtab=t,this.activatedRoute=s,this.metadata=i,this.model=n,this.broadcast=l,this.elementref=o,this.module="",this.id="",this.initialized=!1,this.componentset="",this.componentRefs=[],this.componentSubscriptions=new R.w0,this.componentSubscriptions.add(this.navigationtab.activeRoute$.subscribe((e=>{this.module==e.params.module&&this.id==e.params.id||(this.module=e.params.module,this.id=e.params.id,this.initialized&&this.buildContainer())}))),this.componentSubscriptions.add(this.broadcast.message$.subscribe((e=>{this.handleMessage(e)})))}handleMessage(e){if("applauncher.setrole"===e.messagetype)this.buildContainer()}ngAfterViewInit(){this.initialized=!0,this.buildContainer()}ngOnDestroy(){this.componentSubscriptions.unsubscribe()}buildContainer(){for(let e of this.componentRefs)e.destroy();let e=this.metadata.getComponentConfig("ObjectRecordViewContainer",this.module);this.componentset=e.componentset;for(let e of this.metadata.getComponentSetObjects(this.componentset))this.metadata.addComponent(e.component,this.container).subscribe((t=>{t.instance.componentconfig=e.componentconfig,this.componentRefs.push(t)}))}}return ObjectRecordViewContainer.ɵfac=function(e){return new(e||ObjectRecordViewContainer)(m.Y36(xe.G),m.Y36(Ze.d),m.Y36(o.gz),m.Y36(b.Pu),m.Y36(g.o),m.Y36(ve.f),m.Y36(m.SBq))},ObjectRecordViewContainer.ɵcmp=m.Xpm({type:ObjectRecordViewContainer,selectors:[["object-recordview-container"]],viewQuery:function(e,t){if(1&e&&m.Gf(ji,7,m.s_b),2&e){let e;m.iGM(e=m.CRH())&&(t.container=e.first)}},features:[m._Bn([g.o])],decls:2,vars:0,consts:[["container",""]],template:function(e,t){1&e&&m._UZ(0,"div",null,0)},encapsulation:2}),ObjectRecordViewContainer})();var Bi=s(4376),Gi=s(6951);let Pi=(()=>{class ObjectRecordView{constructor(e,t,s,i,n,l,o){this.broadcast=e,this.navigation=t,this.navigationtab=s,this.activatedRoute=i,this.metadata=n,this.model=l,this.favorite=o,this.moduleName="",this.componentconfig={},this.componentSubscriptions=new R.w0,this.modelloaded=!1}ngOnInit(){this.moduleName=this.navigationtab.activeRoute.params.module,this.model.module=this.moduleName,this.model.id=this.navigationtab.activeRoute.params.id,this.model.getData(!0,"detailview",!0,!0).subscribe({next:e=>{this.modelloaded=!0},error:()=>{this.navigationtab.closeTab()}}),this.componentconfig=this.metadata.getComponentConfig("ObjectRecordView",this.moduleName),this.componentSubscriptions.add(this.broadcast.message$.subscribe((e=>{this.handleMessage(e)}))),this.componentSubscriptions.add(this.model.data$.subscribe((()=>this.setTabTitle())))}ngOnDestroy(){this.componentSubscriptions.unsubscribe()}handleMessage(e){if("model.save"===e.messagetype)this.model.module===e.messagedata.module&&this.model.id===e.messagedata.id&&(this.model.setData(e.messagedata.data),this.navigationtab.setTabInfo({displayname:e.messagedata.data.summary_text,displaymodule:this.model.module}))}setTabTitle(){this.navigationtab.setTabInfo({displayname:this.model.getField("summary_text"),displaymodule:this.model.module})}}return ObjectRecordView.ɵfac=function(e){return new(e||ObjectRecordView)(m.Y36(ve.f),m.Y36(xe.G),m.Y36(Ze.d),m.Y36(o.gz),m.Y36(b.Pu),m.Y36(g.o),m.Y36(Bi.G))},ObjectRecordView.ɵcmp=m.Xpm({type:ObjectRecordView,selectors:[["object-recordview"]],features:[m._Bn([g.o])],decls:3,vars:2,consts:[[3,"componentset"],["system-to-bottom","",1,"slds-theme--default"]],template:function(e,t){1&e&&(m._UZ(0,"system-componentset",0),m.TgZ(1,"div",1),m._UZ(2,"system-componentset",0),m.qZA()),2&e&&(m.Q6J("componentset",t.componentconfig.header),m.xp6(2),m.Q6J("componentset",t.componentconfig.main))},dependencies:[Gi.E,F.H],encapsulation:2}),ObjectRecordView})();const Hi=["contentcontainer"];let zi=(()=>{class ObjectRecordViewDetail1{constructor(e,t,s){this.metadata=e,this.model=t,this.elementRef=s,this.initialized=!1,this.componentconfig={}}ngOnInit(){this.getComponentconfig()}getComponentconfig(){_.isEmpty(this.componentconfig)&&(this.componentconfig=this.metadata.getComponentConfig("ObjectRecordViewDetail1",this.model.module))}}return ObjectRecordViewDetail1.ɵfac=function(e){return new(e||ObjectRecordViewDetail1)(m.Y36(b.Pu),m.Y36(g.o),m.Y36(m.SBq))},ObjectRecordViewDetail1.ɵcmp=m.Xpm({type:ObjectRecordViewDetail1,selectors:[["object-recordview-detail-1"]],viewQuery:function(e,t){if(1&e&&m.Gf(Hi,7,m.s_b),2&e){let e;m.iGM(e=m.CRH())&&(t.contentcontainer=e.first)}},decls:2,vars:1,consts:[[1,"slds-p-around--small"],[3,"componentset"]],template:function(e,t){1&e&&(m.TgZ(0,"div",0),m._UZ(1,"system-componentset",1),m.qZA()),2&e&&(m.xp6(1),m.Q6J("componentset",t.componentconfig.main))},dependencies:[Gi.E],encapsulation:2}),ObjectRecordViewDetail1})(),Vi=(()=>{class ObjectRecordViewDetail2and1{constructor(e,t){this.metadata=e,this.model=t,this.initialized=!1,this.componentconfig={}}ngOnInit(){this.getComponentconfig()}getComponentconfig(){_.isEmpty(this.componentconfig)&&(this.componentconfig=this.metadata.getComponentConfig("ObjectRecordViewDetail2and1",this.model.module))}}return ObjectRecordViewDetail2and1.ɵfac=function(e){return new(e||ObjectRecordViewDetail2and1)(m.Y36(b.Pu),m.Y36(g.o))},ObjectRecordViewDetail2and1.ɵcmp=m.Xpm({type:ObjectRecordViewDetail2and1,selectors:[["object-recordview-detail-2and1"]],decls:5,vars:2,consts:[[1,"slds-grid","slds-wrap","slds-p-top--small"],[1,"slds-col","slds-p-horizontal--small","slds-size--1-of-1","slds-medium-size--1-of-2","slds-large-size--2-of-3"],[3,"componentset"],[1,"slds-col","slds-p-horizontal--small","slds-size--1-of-1","slds-medium-size--1-of-2","slds-large-size--1-of-3"]],template:function(e,t){1&e&&(m.TgZ(0,"div",0)(1,"div",1),m._UZ(2,"system-componentset",2),m.qZA(),m.TgZ(3,"div",3),m._UZ(4,"system-componentset",2),m.qZA()()),2&e&&(m.xp6(2),m.Q6J("componentset",t.componentconfig.main),m.xp6(2),m.Q6J("componentset",t.componentconfig.sidebar))},dependencies:[Gi.E],encapsulation:2}),ObjectRecordViewDetail2and1})(),Ki=(()=>{class ObjectRecordViewDetailsplit{constructor(e,t){this.metadata=e,this.model=t,this.componentconfig={}}ngOnInit(){this.getComponentconfig()}getComponentconfig(){(_.isEmpty(this.componentconfig)||!this.componentconfig.left&&!this.componentconfig.right)&&(this.componentconfig=this.metadata.getComponentConfig("ObjectRecordViewDetailsplit",this.model.module))}}return ObjectRecordViewDetailsplit.ɵfac=function(e){return new(e||ObjectRecordViewDetailsplit)(m.Y36(b.Pu),m.Y36(g.o))},ObjectRecordViewDetailsplit.ɵcmp=m.Xpm({type:ObjectRecordViewDetailsplit,selectors:[["object-recordview-detail-split"]],decls:5,vars:2,consts:[[1,"slds-grid","slds-wrap","slds-p-top--small"],[1,"slds-col","slds-p-horizontal--small","slds-size--1-of-1","slds-medium-size--1-of-2","slds-large-size--1-of-2"],[3,"componentset"]],template:function(e,t){1&e&&(m.TgZ(0,"div",0)(1,"div",1),m._UZ(2,"system-componentset",2),m.qZA(),m.TgZ(3,"div",1),m._UZ(4,"system-componentset",2),m.qZA()()),2&e&&(m.xp6(2),m.Q6J("componentset",t.componentconfig.left),m.xp6(2),m.Q6J("componentset",t.componentconfig.right))},dependencies:[Gi.E],encapsulation:2}),ObjectRecordViewDetailsplit})();var $i=s(2613),Xi=s(4778);function Wi(e,t){if(1&e){const e=m.EpF();m.TgZ(0,"li")(1,"span",19),m.NdJ("click",(function(){const t=m.CHM(e).index,s=m.oxw(3);return m.KtG(s.removeTag(t))})),m._uU(2),m.qZA()()}if(2&e){const e=t.$implicit;m.xp6(2),m.hij(" ",e," ")}}function en(e,t){if(1&e&&(m.ynx(0),m.TgZ(1,"ul",17),m.YNc(2,Wi,3,1,"li",18),m.qZA(),m.BQk()),2&e){const e=m.oxw(2);m.xp6(2),m.Q6J("ngForOf",e.tags)}}function tn(e,t){1&e&&(m.TgZ(0,"div",20),m._UZ(1,"system-label",21),m.qZA())}function sn(e,t){if(1&e){const e=m.EpF();m.TgZ(0,"li",25),m.NdJ("click",(function(){const t=m.CHM(e).index,s=m.oxw(3);return m.KtG(s.addTag(t))})),m.TgZ(1,"span",26),m._uU(2),m.qZA()()}if(2&e){const e=t.$implicit;m.xp6(2),m.hij(" ",e,"")}}const nn=function(e,t){return[e,t]};function ln(e,t){if(1&e&&(m.TgZ(0,"div",27),m._uU(1),m.qZA()),2&e){const e=m.oxw(3);m.xp6(1),m.Oqu(e.language.getLabelFormatted("LBL_NUMBER_OF_SHOWN_TAGS",m.WLB(1,nn,e.offeredTags.length,e.numberFilteredTags)))}}function on(e,t){if(1&e&&(m.ynx(0),m.TgZ(1,"ul",22),m.YNc(2,sn,3,1,"li",23),m.qZA(),m.YNc(3,ln,2,4,"div",24),m.BQk()),2&e){const e=m.oxw(2);m.xp6(2),m.Q6J("ngForOf",e.offeredTags),m.xp6(1),m.Q6J("ngIf",e.numberFilteredTags-e.offeredTagsMaxLength>0)}}function an(e,t){1&e&&(m.TgZ(0,"div",28),m._UZ(1,"system-label",29),m.qZA())}function dn(e,t){if(1&e){const e=m.EpF();m.ynx(0),m.TgZ(1,"div",8),m.YNc(2,en,3,1,"ng-container",2),m.YNc(3,tn,2,0,"ng-template",null,9,m.W1O),m.qZA(),m.TgZ(5,"div",10)(6,"div",11)(7,"system-utility-icon",12),m.NdJ("click",(function(){m.CHM(e);const t=m.oxw();return m.KtG(t.clearFilter())})),m.qZA(),m.TgZ(8,"input",13,14),m.NdJ("ngModelChange",(function(t){m.CHM(e);const s=m.oxw();return m.KtG(s.filter=t)}))("keyup",(function(){m.CHM(e);const t=m.oxw();return m.KtG(t.changeFilter())})),m.qZA()()(),m.TgZ(10,"div",15),m.YNc(11,on,4,2,"ng-container",2),m.YNc(12,an,2,0,"ng-template",null,16,m.W1O),m.qZA(),m.BQk()}if(2&e){const e=m.MAs(4),t=m.MAs(13),s=m.oxw();m.xp6(2),m.Q6J("ngIf",s.tags.length)("ngIfElse",e),m.xp6(5),m.Q6J("icon","clear")("size","x-small")("addclasses","slds-input__icon slds-input__icon_right slds-icon-text-default"),m.xp6(1),m.s9C("placeholder",s.language.getLabel("LBL_ENTER_TAGS_FOR_TAGS")),m.Q6J("ngModel",s.filter),m.xp6(3),m.Q6J("ngIf",s.offeredTags.length)("ngIfElse",t)}}function rn(e,t){1&e&&m._UZ(0,"system-spinner")}let cn=(()=>{class ObjectPageHeaderTagPicker{constructor(e,t,s){this.language=e,this.backend=t,this.toast=s,this.model={},this.self={},this.tags=[],this.allTags=[],this.offeredTags=[],this.offeredTagsMaxLength=20,this.filter="",this.tagsAreParsed=!1,this.allTagsAreLoaded=!1}ngOnInit(){this.backend.getRequest("systags").subscribe((e=>{e.systags&&(this.allTags=e.systags),this.allTagsAreLoaded=!0,this.doFilter()}),(e=>{this.toast.sendToast("Error loading list of available tags.","error",null),this.closeModal()})),this.model.isLoading?this.model.data$.subscribe((()=>{window.setTimeout((()=>{this.parseTags()}),5e3)})):this.parseTags()}parseTags(){try{this.tags=JSON.parse(this.model.data.tags)}catch(e){this.tags=[]}this.tagsAreParsed=!0,this.doFilter()}changeFilter(){this.doFilter()}clearFilter(){this.filter="",this.doFilter()}doFilter(){if(this.tagsAreParsed&&this.allTagsAreLoaded){this.offeredTags.length=0,this.numberFilteredTags=0;for(let e of this.allTags)(0===this.filter.length||e.toLowerCase().indexOf(this.filter.toLowerCase())>=0)&&-1===this.tags.indexOf(e)&&this.numberFilteredTags++<this.offeredTagsMaxLength&&this.offeredTags.push(e)}}addTag(e){-1===this.tags.indexOf(this.offeredTags[e])&&(this.tags.push(this.offeredTags[e]),this.tags.sort(),this.offeredTags.splice(e,1))}removeTag(e){this.tags.splice(e,1),this.doFilter()}saveAndClose(){this.model.setField("tags",JSON.stringify(this.tags)),this.model.save(),this.closeModal()}closeModal(){this.self.destroy()}onModalEscX(){this.closeModal()}}return ObjectPageHeaderTagPicker.ɵfac=function(e){return new(e||ObjectPageHeaderTagPicker)(m.Y36(h.d),m.Y36(X.y),m.Y36(he.A))},ObjectPageHeaderTagPicker.ɵcmp=m.Xpm({type:ObjectPageHeaderTagPicker,selectors:[["object-page-header-tag-picker"]],decls:12,vars:2,consts:[[3,"close"],["label","LBL_ASSIGN_TAGS"],[4,"ngIf","ngIfElse"],["notReady",""],[1,"slds-button","slds-button--neutral",3,"click"],["label","LBL_CANCEL"],[1,"slds-button","slds-button--brand",3,"click"],["label","LBL_SAVE"],[1,"slds-m-bottom--medium"],["noAssignedTags",""],[1,"slds-form-element"],[1,"slds-form-element__control","slds-input-has-icon","slds-input-has-icon_right"],[3,"icon","size","addclasses","click"],["type","text",1,"slds-input",3,"placeholder","ngModel","ngModelChange","keyup"],["fieldFilter",""],[1,"slds-m-top--small"],["noOfferedTags",""],["role","presentation",1,"selectedTags","slds-listbox","slds-listbox_horizontal",2,"line-height","1.7rem"],[4,"ngFor","ngForOf"],[1,"slds-badge",3,"click"],[2,"font-style","italic"],["label","LBL_NO_TAGS_ASSIGNED"],["role","listbox",1,"slds-listbox","slds-listbox_horizontal","offeredTags",2,"line-height","1.5rem"],["role","presentation","style","margin-top:0.2rem",3,"click",4,"ngFor","ngForOf"],["class","slds-m-top--xx-small","style","font-style:italic;text-align:right",4,"ngIf"],["role","presentation",2,"margin-top","0.2rem",3,"click"],[1,"slds-badge","slds-badge_inverse"],[1,"slds-m-top--xx-small",2,"font-style","italic","text-align","right"],[1,"slds-m-top--xx-small",2,"font-style","italic"],["label","LBL_NO_TAGS_FOUND"]],template:function(e,t){if(1&e&&(m.TgZ(0,"system-modal")(1,"system-modal-header",0),m.NdJ("close",(function(){return t.closeModal()})),m._UZ(2,"system-label",1),m.qZA(),m.TgZ(3,"system-modal-content"),m.YNc(4,dn,14,9,"ng-container",2),m.YNc(5,rn,1,0,"ng-template",null,3,m.W1O),m.qZA(),m.TgZ(7,"system-modal-footer")(8,"button",4),m.NdJ("click",(function(){return t.closeModal()})),m._UZ(9,"system-label",5),m.qZA(),m.TgZ(10,"button",6),m.NdJ("click",(function(){return t.saveAndClose()})),m._UZ(11,"system-label",7),m.qZA()()()),2&e){const e=m.MAs(6);m.xp6(4),m.Q6J("ngIf",t.allTagsAreLoaded&&t.tagsAreParsed)("ngIfElse",e)}},dependencies:[i.sg,i.O5,l.Fj,l.JJ,l.On,M._,Fe.j,qe.x,Ee.p,Ye.y,St.W,w.r],styles:[".offeredTags[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{cursor:pointer}",".selectedTags[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-bottom:.125rem}",".selectedTags[_ngcontent-%COMP%]{margin-bottom:-.125rem}","[_ngcontent-%COMP%]::placeholder{font-style:italic}",".slds-badge[_ngcontent-%COMP%]{font-size:.75rem;line-height:2;padding-top:.1875rem;text-transform:none}",".slds-badge[_ngcontent-%COMP%]:hover{cursor:pointer;filter:brightness(90%)}",".slds-badge.slds-badge_inverse[_ngcontent-%COMP%]:hover{filter:brightness(133%)}"]}),ObjectPageHeaderTagPicker})();const un=["object-page-header-detail-row-field",""];let mn=(()=>{class ObjectPageHeaderDetailRowField{constructor(){this.moduleName="",this.field={}}}return ObjectPageHeaderDetailRowField.ɵfac=function(e){return new(e||ObjectPageHeaderDetailRowField)},ObjectPageHeaderDetailRowField.ɵcmp=m.Xpm({type:ObjectPageHeaderDetailRowField,selectors:[["","object-page-header-detail-row-field",""]],inputs:{moduleName:"moduleName",field:"field"},attrs:un,decls:2,vars:3,consts:[[1,""],[3,"field","fieldconfig","fielddisplayclass"]],template:function(e,t){1&e&&(m.TgZ(0,"div",0),m._UZ(1,"field-container",1),m.qZA()),2&e&&(m.xp6(1),m.Q6J("field",t.field.field)("fieldconfig",t.field.fieldconfig)("fielddisplayclass","slds-text-body--regular slds-truncate slds-m-vertical--xx-small"))},dependencies:[Ne.j],encapsulation:2}),ObjectPageHeaderDetailRowField})();function hn(e,t){if(1&e&&m._UZ(0,"li",9),2&e){const e=m.oxw().$implicit;m.Q6J("field",e)}}function gn(e,t){if(1&e&&(m.ynx(0),m.YNc(1,hn,1,1,"li",8),m.BQk()),2&e){const e=t.$implicit,s=m.oxw(2);m.xp6(1),m.Q6J("ngIf",s.displayField(e))}}function pn(e,t){if(1&e&&(m.TgZ(0,"ul",6),m.YNc(1,gn,2,1,"ng-container",7),m.qZA()),2&e){const e=m.oxw();m.xp6(1),m.Q6J("ngForOf",e.getFields())}}function fn(e,t){if(1&e&&m._UZ(0,"field-label",16),2&e){const e=m.oxw(2).$implicit;m.Q6J("fieldname",e.field)("fieldconfig",e.fieldconfig)("addclasses","slds-truncate")}}function bn(e,t){1&e&&(m.TgZ(0,"span",17),m._uU(1,":"),m.qZA())}function _n(e,t){if(1&e&&(m.TgZ(0,"li",12),m.YNc(1,fn,1,3,"field-label",13),m.YNc(2,bn,2,0,"span",14),m._UZ(3,"field-container",15),m.qZA()),2&e){const e=m.oxw().$implicit,t=m.oxw(2);m.xp6(1),m.Q6J("ngIf",t.showLabel(e.fieldconfig)),m.xp6(1),m.Q6J("ngIf",!e.fieldconfig.hidelabel),m.xp6(1),m.Q6J("field",e.field)("fieldconfig",e.fieldconfig)("fielddisplayclass","slds-truncate")}}function yn(e,t){if(1&e&&(m.ynx(0),m.YNc(1,_n,4,5,"li",11),m.BQk()),2&e){const e=t.$implicit,s=m.oxw(2);m.xp6(1),m.Q6J("ngIf",s.model.data[e.field]&&s.displayField(e))}}function vn(e,t){if(1&e&&(m.TgZ(0,"ul",10),m.YNc(1,yn,2,1,"ng-container",7),m.qZA()),2&e){const e=m.oxw();m.xp6(1),m.Q6J("ngForOf",e.fields)}}let xn=(()=>{class ObjectPageHeaderDetailRow{constructor(e,t,s){this.metadata=e,this.model=t,this.view=s,this.fieldSet="",this.collapsed=!0,this.fields=[]}ngOnInit(){this.setLabelLength(),this.fields=this.getFields()}getFields(){let e=this.metadata.getFieldSetFields(this.fieldSet);if(this.model.acl_fieldcontrol){let t=[];for(let s in e)this.metadata.hasField(this.model.module,e[s].field)&&(this.model.acl_fieldcontrol[e[s].field]&&"1"===this.model.acl_fieldcontrol[e[s].field]||t.push(e[s]));return t}return e}displayField(e){return!e.fieldconfig?.requiredmodelstate||this.model.checkModelState(e.fieldconfig.requiredmodelstate)}toggleCollapsed(){this.collapsed=!this.collapsed,this.setLabelLength()}get toggleIcon(){return this.collapsed?"chevrondown":"chevronup"}setLabelLength(){this.collapsed?(this.view.displayLabels=!1,this.view.labels="short"):(this.view.displayLabels=!0,this.view.labels="default")}showLabel(e){return!0!==e.hidelabel}}return ObjectPageHeaderDetailRow.ɵfac=function(e){return new(e||ObjectPageHeaderDetailRow)(m.Y36(b.Pu),m.Y36(g.o),m.Y36(Je.e))},ObjectPageHeaderDetailRow.ɵcmp=m.Xpm({type:ObjectPageHeaderDetailRow,selectors:[["object-page-header-detail-row"]],inputs:{fieldSet:"fieldSet",collapsed:"collapsed"},features:[m._Bn([Je.e])],decls:7,vars:3,consts:[[1,"slds-grid","slds-grid--vertical-align-start"],["class","slds-grid",4,"ngIf"],["class","slds-list--horizontal slds-has-dividers--left",4,"ngIf"],[1,"slds-col--bump-left"],[1,"slds-button","slds-button--icon",3,"click"],[3,"icon"],[1,"slds-grid"],[4,"ngFor","ngForOf"],["object-page-header-detail-row-field","","class","slds-m-right--medium",3,"field",4,"ngIf"],["object-page-header-detail-row-field","",1,"slds-m-right--medium",3,"field"],[1,"slds-list--horizontal","slds-has-dividers--left"],["class","slds-item slds-grid slds-grid--vertical-align-center",4,"ngIf"],[1,"slds-item","slds-grid","slds-grid--vertical-align-center"],[3,"fieldname","fieldconfig","addclasses",4,"ngIf"],["class","slds-p-right--xx-small",4,"ngIf"],[3,"field","fieldconfig","fielddisplayclass"],[3,"fieldname","fieldconfig","addclasses"],[1,"slds-p-right--xx-small"]],template:function(e,t){1&e&&(m.TgZ(0,"div",0)(1,"div"),m.YNc(2,pn,2,1,"ul",1),m.YNc(3,vn,2,1,"ul",2),m.qZA(),m.TgZ(4,"div",3)(5,"button",4),m.NdJ("click",(function(){return t.toggleCollapsed()})),m._UZ(6,"system-button-icon",5),m.qZA()()()),2&e&&(m.xp6(2),m.Q6J("ngIf",!t.collapsed),m.xp6(1),m.Q6J("ngIf",t.collapsed),m.xp6(3),m.Q6J("icon",t.toggleIcon))},dependencies:[i.sg,i.O5,Ti.q,Ne.j,x.J,mn],encapsulation:2}),ObjectPageHeaderDetailRow})(),Zn=(()=>{class ObjectPageHeaderDetails{constructor(e,t,s,i,n){this.elementref=e,this.activatedRoute=t,this.router=s,this.model=i,this.metadata=n,this.componentconfig={},this.collapsed=!1}ngOnInit(){"{}"==JSON.stringify(this.componentconfig)&&(this.componentconfig=this.metadata.getComponentConfig("ObjectPageHeaderDetails",this.model.module),this.collapsed=!!this.componentconfig.collapsed&&this.componentconfig.collapsed,this.fieldset=this.componentconfig.fieldset?this.componentconfig.fieldset:"")}}return ObjectPageHeaderDetails.ɵfac=function(e){return new(e||ObjectPageHeaderDetails)(m.Y36(m.SBq),m.Y36(o.gz),m.Y36(o.F0),m.Y36(g.o),m.Y36(b.Pu))},ObjectPageHeaderDetails.ɵcmp=m.Xpm({type:ObjectPageHeaderDetails,selectors:[["object-page-header-details"]],decls:2,vars:2,consts:[[1,"slds-p-horizontal--medium","slds-p-vertical--xx-small","slds-border--bottom","slds-scrollable--x"],[3,"fieldSet","collapsed"]],template:function(e,t){1&e&&(m.TgZ(0,"div",0),m._UZ(1,"object-page-header-detail-row",1),m.qZA()),2&e&&(m.xp6(1),m.Q6J("fieldSet",t.fieldset)("collapsed",t.collapsed))},dependencies:[xn],encapsulation:2}),ObjectPageHeaderDetails})();var wn=s(6701);let Tn=(()=>{class ObjectTabContainerItem{constructor(e,t,s){this.metadata=e,this.fielderrorgroup=t,this.model=s,this.componentRefs=[],this.initialized=!1,this.taberrors=new m.vpe}ngOnInit(){this.fielderrorgroup.change$.subscribe((e=>{this.taberrors.emit(e)}))}ngAfterViewInit(){this.initialized=!0}ngOnDestroy(){for(let e of this.componentRefs)e.destroy()}}return ObjectTabContainerItem.ɵfac=function(e){return new(e||ObjectTabContainerItem)(m.Y36(b.Pu),m.Y36(wn.O),m.Y36(g.o))},ObjectTabContainerItem.ɵcmp=m.Xpm({type:ObjectTabContainerItem,selectors:[["object-tab-container-item"]],inputs:{componentset:"componentset"},outputs:{taberrors:"taberrors"},features:[m._Bn([wn.O])],decls:1,vars:1,consts:[[3,"componentset"]],template:function(e,t){1&e&&m._UZ(0,"system-componentset",0),2&e&&m.Q6J("componentset",t.componentset)},dependencies:[Gi.E],encapsulation:2}),ObjectTabContainerItem})();var Cn=s(2995);function An(e,t){if(1&e&&(m.ynx(0),m._UZ(1,"system-label",2),m.BQk()),2&e){const e=m.oxw();m.xp6(1),m.Q6J("label",e.tab.name)}}let kn=(()=>{class ObjectTabContainerItemHeader{constructor(e,t){this.metadata=e,this.language=t,this.tab=[]}get displayName(){return!this.tab.headercomponent&&this.tab.name&&""!=this.tab.name}}return ObjectTabContainerItemHeader.ɵfac=function(e){return new(e||ObjectTabContainerItemHeader)(m.Y36(b.Pu),m.Y36(h.d))},ObjectTabContainerItemHeader.ɵcmp=m.Xpm({type:ObjectTabContainerItemHeader,selectors:[["object-tab-container-item-header"]],inputs:{tab:"tab"},decls:2,vars:2,consts:[[4,"ngIf"],[3,"component"],[3,"label"]],template:function(e,t){1&e&&(m.YNc(0,An,2,1,"ng-container",0),m._UZ(1,"system-dynamic-component",1)),2&e&&(m.Q6J("ngIf",t.displayName),m.xp6(1),m.Q6J("component",t.tab.headercomponent))},dependencies:[i.O5,Cn.T,M._],encapsulation:2}),ObjectTabContainerItemHeader})();const Ln=function(e,t){return{"slds-active":e,"slds-hide":t}};function Mn(e,t){if(1&e){const e=m.EpF();m.TgZ(0,"li",4),m.NdJ("click",(function(){const t=m.CHM(e).index,s=m.oxw();return m.KtG(s.setActiveTab(t))})),m.TgZ(1,"a",5),m._UZ(2,"object-tab-container-item-header",6),m.qZA()()}if(2&e){const e=t.$implicit,s=t.index,i=m.oxw();m.Q6J("ngClass",m.WLB(2,Ln,s===i.activeTab,i.isHidden(e))),m.xp6(2),m.Q6J("tab",e)}}function Sn(e,t){if(1&e&&m._UZ(0,"object-tab-container-item",10),2&e){const e=m.oxw(2).$implicit;m.Q6J("componentset",e.componentset)}}const In=function(e,t,s){return{"slds-show":e,"slds-hide":t,"slds-p-bottom--none":s}};function On(e,t){if(1&e&&(m.TgZ(0,"div",8),m.YNc(1,Sn,1,1,"object-tab-container-item",9),m.qZA()),2&e){const e=m.oxw(),t=e.index,s=e.$implicit,i=m.oxw();m.Q6J("ngClass",m.kEZ(2,In,t==i.activeTab,t!=i.activeTab,null==i.componentconfig?null:i.componentconfig.noBottomPadding)),m.xp6(1),m.Q6J("ngIf",s.componentset)}}function Jn(e,t){if(1&e&&(m.ynx(0),m.YNc(1,On,2,6,"div",7),m.BQk()),2&e){const e=t.index,s=m.oxw();m.xp6(1),m.Q6J("ngIf",s.checkRenderTab(e))}}let Nn=(()=>{class ObjectTabContainer{constructor(e,t,s,i){this.language=e,this.metadata=t,this.model=s,this.session=i,this.activeTab=0,this.activatedTabs=[0],this.tabs=[]}ngOnInit(){if(this.componentconfig&&this.componentconfig.componentset){let e=this.metadata.getComponentSetObjects(this.componentconfig.componentset);this.tabs=[];for(let t of e)t.componentconfig.adminonly&&!this.session.isAdmin||this.tabs.push(t.componentconfig)}else{let e=this.metadata.getComponentConfig("ObjectTabContainer",this.model.module),t=this.metadata.getComponentSetObjects(e.componentset);this.tabs=[];for(let e of t)e.componentconfig.adminonly&&!this.session.isAdmin||this.tabs.push(e.componentconfig)}}isHidden(e){return!(!e.acl||this.model.checkAccess(e.acl))||!(!e.requiredmodelstate||this.model.checkModelState(e.requiredmodelstate))}setActiveTab(e){this.activatedTabs.push(e),this.activeTab=e}checkRenderTab(e){return e==this.activeTab||this.activatedTabs.indexOf(e)>-1||this.tabs&&this.tabs[e].forcerender}}return ObjectTabContainer.ɵfac=function(e){return new(e||ObjectTabContainer)(m.Y36(h.d),m.Y36(b.Pu),m.Y36(g.o),m.Y36(Ut.n))},ObjectTabContainer.ɵcmp=m.Xpm({type:ObjectTabContainer,selectors:[["object-tab-container"]],decls:4,vars:2,consts:[[1,"slds-tabs--default"],["role","tablist",1,"slds-tabs--default__nav"],["class","slds-tabs--default__item slds-text-title--caps","role","presentation",3,"ngClass","click",4,"ngFor","ngForOf"],[4,"ngFor","ngForOf"],["role","presentation",1,"slds-tabs--default__item","slds-text-title--caps",3,"ngClass","click"],["href","javascript:void(0);","role","tab","aria-selected","false",1,"slds-tabs--default__link"],[3,"tab"],["class","slds-tabs--default__content","role","tabpanel",3,"ngClass",4,"ngIf"],["role","tabpanel",1,"slds-tabs--default__content",3,"ngClass"],[3,"componentset",4,"ngIf"],[3,"componentset"]],template:function(e,t){1&e&&(m.TgZ(0,"div",0)(1,"ul",1),m.YNc(2,Mn,3,5,"li",2),m.qZA(),m.YNc(3,Jn,2,1,"ng-container",3),m.qZA()),2&e&&(m.xp6(2),m.Q6J("ngForOf",t.tabs),m.xp6(1),m.Q6J("ngForOf",t.tabs))},dependencies:[i.mk,i.sg,i.O5,Tn,kn],encapsulation:2}),ObjectTabContainer})();const Fn=["container"];let qn=(()=>{class ObjectVerticalTabContainerItem{constructor(e,t){this.metadata=e,this.fielderrorgroup=t,this.taberrors=new m.vpe}ngOnInit(){this.fielderrorgroup.change$.subscribe((e=>{this.taberrors.emit(e)}))}ngAfterViewInit(){for(let e of this.metadata.getComponentSetObjects(this.componentset))this.metadata.addComponent(e.component,this.container).subscribe((t=>{t.instance.componentconfig=e.componentconfig}))}}return ObjectVerticalTabContainerItem.ɵfac=function(e){return new(e||ObjectVerticalTabContainerItem)(m.Y36(b.Pu),m.Y36(wn.O))},ObjectVerticalTabContainerItem.ɵcmp=m.Xpm({type:ObjectVerticalTabContainerItem,selectors:[["object-vertical-tab-container-item"]],viewQuery:function(e,t){if(1&e&&m.Gf(Fn,7,m.s_b),2&e){let e;m.iGM(e=m.CRH())&&(t.container=e.first)}},inputs:{componentset:"componentset"},outputs:{taberrors:"taberrors"},features:[m._Bn([wn.O])],decls:2,vars:0,consts:[["container",""]],template:function(e,t){1&e&&m._UZ(0,"div",null,0)},encapsulation:2}),ObjectVerticalTabContainerItem})();function En(e,t){if(1&e&&(m.ynx(0),m._UZ(1,"system-label",1),m.BQk()),2&e){const e=m.oxw();m.xp6(1),m.Q6J("label",e.tab.name)}}let Yn=(()=>{class ObjectVerticalTabContainerItemHeader{constructor(e){this.language=e,this.tab=[]}get displayName(){return this.tab.name&&""!=this.tab.name}}return ObjectVerticalTabContainerItemHeader.ɵfac=function(e){return new(e||ObjectVerticalTabContainerItemHeader)(m.Y36(h.d))},ObjectVerticalTabContainerItemHeader.ɵcmp=m.Xpm({type:ObjectVerticalTabContainerItemHeader,selectors:[["object-vertical-tab-container-item-header"]],inputs:{tab:"tab"},decls:1,vars:1,consts:[[4,"ngIf"],[3,"label"]],template:function(e,t){1&e&&m.YNc(0,En,2,1,"ng-container",0),2&e&&m.Q6J("ngIf",t.displayName)},dependencies:[i.O5,M._],encapsulation:2}),ObjectVerticalTabContainerItemHeader})();const Qn=["tabscontainer"];function Un(e,t){if(1&e&&(m.TgZ(0,"span",9),m._uU(1),m.qZA()),2&e){const e=m.oxw().$implicit;m.xp6(1),m.Oqu(e.hasErrors)}}const Dn=function(e,t){return{"slds-is-active":e,"slds-hide":t}};function jn(e,t){if(1&e){const e=m.EpF();m.TgZ(0,"li",5),m.NdJ("click",(function(){const t=m.CHM(e).index,s=m.oxw();return m.KtG(s.setActiveTab(t))})),m.TgZ(1,"a",6),m.YNc(2,Un,2,1,"span",7),m._UZ(3,"object-vertical-tab-container-item-header",8),m.qZA()()}if(2&e){const e=t.$implicit,s=t.index,i=m.oxw();m.Q6J("ngClass",m.WLB(3,Dn,s===i.activeTab,i.isHidden(e))),m.xp6(2),m.Q6J("ngIf",e.hasErrors),m.xp6(1),m.Q6J("tab",e)}}function Rn(e,t){if(1&e){const e=m.EpF();m.TgZ(0,"object-vertical-tab-container-item",13),m.NdJ("taberrors",(function(t){m.CHM(e);const s=m.oxw(2).index,i=m.oxw();return m.KtG(i.showErrorsOnTab(s,t))})),m.qZA()}if(2&e){const e=m.oxw(2).$implicit;m.Q6J("componentset",e.componentset)}}function Bn(e,t){if(1&e&&(m.TgZ(0,"div",11),m.YNc(1,Rn,1,1,"object-vertical-tab-container-item",12),m.qZA()),2&e){const e=m.oxw(),t=e.index,s=e.$implicit,i=m.oxw();m.Q6J("ngStyle",i.getDisplay(t)),m.xp6(1),m.Q6J("ngIf",s.componentset)}}function Gn(e,t){if(1&e&&(m.ynx(0),m.YNc(1,Bn,2,2,"div",10),m.BQk()),2&e){const e=t.index,s=m.oxw();m.xp6(1),m.Q6J("ngIf",s.checkRenderTab(e))}}let Pn=(()=>{class ObjectVerticalTabContainer{constructor(e,t,s,i){this.language=e,this.metadata=t,this.session=s,this.model=i,this.activeTab=0,this.activatedTabs=[0],this.tabs=[]}ngOnInit(){if(this.componentconfig&&this.componentconfig.componentset){let e=this.metadata.getComponentSetObjects(this.componentconfig.componentset);this.componentconfig=[];for(let t of e)t.componentconfig.adminonly&&!this.session.isAdmin||this.tabs.push(t.componentconfig)}}isHidden(e){return!(!e.acl||this.model.checkAccess(e.acl))||!(!e.requiredmodelstate||this.model.checkModelState(e.requiredmodelstate))}setActiveTab(e){this.activatedTabs.push(e),this.activeTab=e}checkRenderTab(e){return e==this.activeTab||this.activatedTabs.indexOf(e)>-1||this.tabs&&this.tabs[e].forcerender}getDisplay(e){let t=this.tabscontainer.element.nativeElement.getBoundingClientRect();return e!==this.activeTab?{display:"none"}:{height:"calc(99.9vh - "+t.top+"px)"}}getTabsStyle(){return{height:"calc(99.9vh - "+this.tabscontainer.element.nativeElement.getBoundingClientRect().top+"px)",overflow:"auto","overflow-x":"hidden"}}showErrorsOnTab(e,t){this.componentconfig[e].hasErrors=t}}return ObjectVerticalTabContainer.ɵfac=function(e){return new(e||ObjectVerticalTabContainer)(m.Y36(h.d),m.Y36(b.Pu),m.Y36(Ut.n),m.Y36(g.o))},ObjectVerticalTabContainer.ɵcmp=m.Xpm({type:ObjectVerticalTabContainer,selectors:[["object-vertical-tab-container"]],viewQuery:function(e,t){if(1&e&&m.Gf(Qn,7,m.s_b),2&e){let e;m.iGM(e=m.CRH())&&(t.tabscontainer=e.first)}},decls:5,vars:3,consts:[[1,"slds-vertical-tabs",2,"border","none"],["role","tablist","aria-orientation","vertical",1,"slds-vertical-tabs__nav","slds-scrollable--y",3,"ngStyle"],["tabscontainer",""],["class","slds-vertical-tabs__nav-item slds-text-title--caps","role","presentation",3,"ngClass","click",4,"ngFor","ngForOf"],[4,"ngFor","ngForOf"],["role","presentation",1,"slds-vertical-tabs__nav-item","slds-text-title--caps",3,"ngClass","click"],["href","javascript:void(0)","role","tab","tabindex","-1","aria-selected","false",1,"slds-vertical-tabs__link"],["class","slds-badge","title","Invalid fields!",4,"ngIf"],[3,"tab"],["title","Invalid fields!",1,"slds-badge"],["class","slds-vertical-tabs__content slds-scrollable--y slds-p-around--xx-small slds-show","role","tabpanel",3,"ngStyle",4,"ngIf"],["role","tabpanel",1,"slds-vertical-tabs__content","slds-scrollable--y","slds-p-around--xx-small","slds-show",3,"ngStyle"],[3,"componentset","taberrors",4,"ngIf"],[3,"componentset","taberrors"]],template:function(e,t){1&e&&(m.TgZ(0,"div",0)(1,"ul",1,2),m.YNc(3,jn,4,6,"li",3),m.qZA(),m.YNc(4,Gn,2,1,"ng-container",4),m.qZA()),2&e&&(m.xp6(1),m.Q6J("ngStyle",t.getTabsStyle()),m.xp6(2),m.Q6J("ngForOf",t.tabs),m.xp6(1),m.Q6J("ngForOf",t.tabs))},dependencies:[i.mk,i.sg,i.O5,i.PC,qn,Yn],styles:[".slds-is-active[_ngcontent-%COMP%]{border-left:6px solid #ca1b21;border-right:1px solid #dddbda;color:#3e3e3c;font-weight:600}.slds-is-active[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none!important}",".slds-badge[_ngcontent-%COMP%]{background-color:#c00;color:#fff;font-weight:700;padding:.125rem .4rem}"]}),ObjectVerticalTabContainer})();var Hn=s(701);function zn(e,t){1&e&&(m.TgZ(0,"div",2),m._UZ(1,"system-card-stencil")(2,"system-card-stencil")(3,"system-card-stencil"),m.qZA())}function Vn(e,t){if(1&e&&m._UZ(0,"system-componentset",3),2&e){const e=m.oxw();m.Q6J("componentset",e.componentset)}}let Kn=(()=>{class ObjectRelateContainer{constructor(e,t){this.model=e,this.metadata=t,this.componentconfig={}}ngOnInit(){let e=this.metadata.getComponentConfig("ObjectRelateContainer",this.model.module);this.componentset=e.componentset}get hasAccess(){return this.model.checkAccess("detail")}}return ObjectRelateContainer.ɵfac=function(e){return new(e||ObjectRelateContainer)(m.Y36(g.o),m.Y36(b.Pu))},ObjectRelateContainer.ɵcmp=m.Xpm({type:ObjectRelateContainer,selectors:[["ng-component"]],decls:3,vars:2,consts:[["class","slds-grid slds-grid--vertical",4,"ngIf","ngIfElse"],["content",""],[1,"slds-grid","slds-grid--vertical"],[3,"componentset"]],template:function(e,t){if(1&e&&(m.YNc(0,zn,4,0,"div",0),m.YNc(1,Vn,1,1,"ng-template",null,1,m.W1O)),2&e){const e=m.MAs(2);m.Q6J("ngIf",!t.hasAccess||t.model.isLoading)("ngIfElse",e)}},dependencies:[i.O5,Gi.E,Hn.r],encapsulation:2}),ObjectRelateContainer})();var $n=s(1360),Xn=s(767),Wn=s(8652),el=s(3249),tl=s(4567),sl=s(7588);function il(e,t){if(1&e&&(m.ynx(0),m.TgZ(1,"div",3),m._UZ(2,"object-relatedlist-table",4),m.qZA(),m.BQk()),2&e){const e=m.oxw();m.xp6(2),m.Q6J("listfields",e.listfields)("editable",e.editable)("editcomponentset",e.editcomponentset)("sequencefield",e.componentconfig.sequencefield)("listitemactionset",e.listitemactionset)}}function nl(e,t){1&e&&m._UZ(0,"system-illustration-no-access")}const ll=function(e){return{"slds-hide":e}};let ol=(()=>{class ObjectRelatedlistList extends el.s{get hide(){return this.componentconfig.hideempty&&0==this.relatedmodels.count}get panelTitle(){return this.componentconfig.title?this.language.getLabel(this.componentconfig.title):this.relatedmodels._linkName&&this.metadata.fieldDefs[this.relatedmodels.module][this.relatedmodels._linkName]&&this.metadata.fieldDefs[this.relatedmodels.module][this.relatedmodels._linkName].vname?this.language.getLabel(this.metadata.fieldDefs[this.relatedmodels.module][this.relatedmodels._linkName].vname):this.language.getModuleName(this.relatedmodels.module)}}return ObjectRelatedlistList.ɵfac=function(){let e;return function(t){return(e||(e=m.n5z(ObjectRelatedlistList)))(t||ObjectRelatedlistList)}}(),ObjectRelatedlistList.ɵcmp=m.Xpm({type:ObjectRelatedlistList,selectors:[["object-relatedlist-list"]],features:[m._Bn([Ct.j]),m.qOj],decls:4,vars:6,consts:[[3,"ngClass","componentconfig"],[4,"ngIf","ngIfElse"],["noaccess",""],[1,"slds-border--top"],[3,"listfields","editable","editcomponentset","sequencefield","listitemactionset"]],template:function(e,t){if(1&e&&(m.TgZ(0,"object-related-card",0),m.YNc(1,il,3,5,"ng-container",1),m.YNc(2,nl,1,0,"ng-template",null,2,m.W1O),m.qZA()),2&e){const e=m.MAs(3);m.Q6J("ngClass",m.VKq(4,ll,t.hide))("componentconfig",t.componentconfig),m.xp6(1),m.Q6J("ngIf",t.aclAccess)("ngIfElse",e)}},dependencies:[i.mk,i.O5,tl.s,Wn.E,sl.K],encapsulation:2}),ObjectRelatedlistList})();var al=s(423);const dl=["object-related-card-tile",""];function rl(e,t){if(1&e&&(m.ynx(0),m.TgZ(1,"dt",10),m._UZ(2,"system-label-fieldname",11),m.qZA(),m.TgZ(3,"dd",12),m._UZ(4,"field-container",13),m.qZA(),m.BQk()),2&e){const e=t.$implicit,s=m.oxw();m.xp6(2),m.Q6J("module",s.model.module)("field",e.field),m.xp6(2),m.Q6J("field",e.field)("fieldconfig",e.fieldconfig)("fielddisplayclass","slds-truncate")}}let cl=(()=>{class ObjectRelatedCardTile{constructor(e,t,s,i,n,l){this.model=e,this.relatedmodels=t,this.view=s,this.language=i,this.metadata=n,this.router=l,this.data={},this.fieldset="",this.fields=[],this.view.displayLabels=!1}ngOnInit(){this.initalizeModel(),this.loadConfig()}initalizeModel(){this.model.module=this.relatedmodels.relatedModule,this.model.id=this.data.id,this.model.setData(this.data)}loadConfig(){let e=this.metadata.getComponentConfig("ObjectRelatedCardTile",this.model.module);this.actionset=e.actionset,this.fields=this.metadata.getFieldSetFields(this.fieldset)}}return ObjectRelatedCardTile.ɵfac=function(e){return new(e||ObjectRelatedCardTile)(m.Y36(g.o),m.Y36(Ct.j),m.Y36(Je.e),m.Y36(h.d),m.Y36(b.Pu),m.Y36(o.F0))},ObjectRelatedCardTile.ɵcmp=m.Xpm({type:ObjectRelatedCardTile,selectors:[["","object-related-card-tile",""]],inputs:{data:"data",fieldset:"fieldset"},features:[m._Bn([g.o,Je.e])],attrs:dl,decls:11,vars:8,consts:[[3,"module","size"],[1,"slds-media__body"],[1,"slds-grid","slds-grid--align-spread","slds-has-flexi-truncate"],["system-model-popover","",1,"slds-truncate","slds-text-heading--small","slds-p-top--xxx-small","slds-m-bottom--small"],[1,"slds-shrink-none","slds-show--medium"],[3,"buttonsize","actionset"],[1,"slds-tile__detail","slds-text-body--small"],[1,"slds-dl--horizontal"],[4,"ngFor","ngForOf"],[1,"slds-hide--medium",3,"buttonsize","actionset"],[1,"slds-dl--horizontal__label","slds-truncate"],[3,"module","field"],[1,"slds-dl--horizontal__detail","slds-tile__meta"],[3,"field","fieldconfig","fielddisplayclass"]],template:function(e,t){1&e&&(m._UZ(0,"system-icon",0),m.TgZ(1,"div",1)(2,"div",2)(3,"h3",3),m._uU(4),m.qZA(),m.TgZ(5,"div",4),m._UZ(6,"object-action-menu",5),m.qZA()(),m.TgZ(7,"div",6)(8,"dl",7),m.YNc(9,rl,5,5,"ng-container",8),m.qZA()(),m._UZ(10,"object-action-menu",9),m.qZA()),2&e&&(m.Q6J("module",t.model.module)("size","small"),m.xp6(4),m.Oqu(t.data.summary_text),m.xp6(2),m.Q6J("buttonsize","x-small")("actionset",t.actionset),m.xp6(3),m.Q6J("ngForOf",t.fields),m.xp6(1),m.Q6J("buttonsize","x-small")("actionset",t.actionset))},dependencies:[i.sg,Ne.j,Z.f,Re.h,Vs.g,it.g],encapsulation:2}),ObjectRelatedCardTile})();const ul=["mainContainer"];function ml(e,t){if(1&e&&(m.TgZ(0,"div",6),m._UZ(1,"div",7),m.qZA()),2&e){const e=t.$implicit,s=m.oxw(2);m.Q6J("ngClass",s.getTileWidthClass),m.xp6(1),m.Q6J("fieldset",s.componentconfig.fieldset)("data",e)}}function hl(e,t){if(1&e&&(m.ynx(0),m.YNc(1,ml,2,3,"div",5),m.BQk()),2&e){const e=m.oxw();m.xp6(1),m.Q6J("ngForOf",e.relatedmodels.items)}}function gl(e,t){1&e&&m._UZ(0,"system-illustration-no-access")}let pl=(()=>{class ObjectRelatedlistTiles extends el.s{constructor(e,t,s,i,n,l){super(e,t,s,i,n),this.language=e,this.metadata=t,this.relatedmodels=s,this.model=i,this.cdref=n,this.el=l}get getTileWidthClass(){return this.mainContainer?.element.nativeElement.clientWidth<=550?"slds-size--1-of-1":this.mainContainer?.element.nativeElement.clientWidth<=730?"slds-size--1-of-2":"slds-size--1-of-3"}}return ObjectRelatedlistTiles.ɵfac=function(e){return new(e||ObjectRelatedlistTiles)(m.Y36(h.d),m.Y36(b.Pu),m.Y36(Ct.j),m.Y36(g.o),m.Y36(m.sBO),m.Y36(m.SBq))},ObjectRelatedlistTiles.ɵcmp=m.Xpm({type:ObjectRelatedlistTiles,selectors:[["object-relatedlist-tiles"]],viewQuery:function(e,t){if(1&e&&m.Gf(ul,7,m.s_b),2&e){let e;m.iGM(e=m.CRH())&&(t.mainContainer=e.first)}},features:[m._Bn([Ct.j]),m.qOj],decls:6,vars:3,consts:[[3,"componentconfig"],[1,"slds-card__body","slds-card__body_inner","slds-grid","slds-wrap","slds-grid--pull-padded"],["mainContainer",""],[4,"ngIf","ngIfElse"],["noaccess",""],["class","slds-p-around--xx-small",3,"ngClass",4,"ngFor","ngForOf"],[1,"slds-p-around--xx-small",3,"ngClass"],["object-related-card-tile","",1,"slds-box","slds-box--x-small","slds-media","slds-card__tile",3,"fieldset","data"]],template:function(e,t){if(1&e&&(m.TgZ(0,"object-related-card",0)(1,"div",1,2),m.YNc(3,hl,2,1,"ng-container",3),m.qZA(),m.YNc(4,gl,1,0,"ng-template",null,4,m.W1O),m.qZA()),2&e){const e=m.MAs(5);m.Q6J("componentconfig",t.componentconfig),m.xp6(3),m.Q6J("ngIf",t.aclAccess)("ngIfElse",e)}},dependencies:[i.mk,i.sg,i.O5,tl.s,Wn.E,cl],encapsulation:2}),ObjectRelatedlistTiles})(),fl=(()=>{class ObjectMergeButton{constructor(e,t,s,i,n){this.language=e,this.metadata=t,this.model=s,this.modal=i,this.injector=n,this.merged=new m.vpe}get enabled(){return this.mergemodels?.length>0&&this.model.checkAccess("edit")&&this.mergemodels.filter((e=>1==e.acl?.delete)).length>0}doMerge(){this.modal.openModal("ObjectMergeModal",!0,this.injector).subscribe((e=>{e.instance.mergemodels=this.mergemodels}))}}return ObjectMergeButton.ɵfac=function(e){return new(e||ObjectMergeButton)(m.Y36(h.d),m.Y36(b.Pu),m.Y36(g.o),m.Y36(z.o),m.Y36(m.zs3))},ObjectMergeButton.ɵcmp=m.Xpm({type:ObjectMergeButton,selectors:[["object-merge-button"]],inputs:{mergemodels:"mergemodels"},outputs:{merged:"merged"},decls:3,vars:1,consts:[[1,"slds-button","slds-button--neutral","slds-show--large",3,"disabled","click"],["label","LBL_MERGE"]],template:function(e,t){1&e&&(m.TgZ(0,"button",0),m.NdJ("click",(function(){return t.doMerge()})),m.TgZ(1,"span"),m._UZ(2,"system-label",1),m.qZA()()),2&e&&m.Q6J("disabled",!t.enabled)},dependencies:[M._],encapsulation:2}),ObjectMergeButton})();function bl(e,t){if(1&e){const e=m.EpF();m.TgZ(0,"system-utility-icon",17),m.NdJ("click",(function(t){m.CHM(e);const s=m.oxw(2);return m.KtG(s.toggleDuplicates(t))})),m.qZA()}if(2&e){const e=m.oxw(2);m.Q6J("ngStyle",e.iconStyle)}}const _l=function(e,t){return{module:e,data:t}};function yl(e,t){if(1&e&&m._UZ(0,"object-related-duplicate-tile",18),2&e){const e=t.$implicit,s=m.oxw(2);m.Q6J("system-model-provider",m.WLB(1,_l,s.model.module,e))}}function vl(e,t){if(1&e){const e=m.EpF();m.TgZ(0,"article",1)(1,"div",2)(2,"header",3),m._UZ(3,"system-icon",4),m.TgZ(4,"div",5)(5,"h2")(6,"a",6)(7,"span",7),m._UZ(8,"system-label",8),m._uU(9),m.qZA()()(),m.YNc(10,bl,1,1,"system-utility-icon",9),m.qZA()(),m._UZ(11,"object-merge-button",10),m.TgZ(12,"div",11)(13,"button",12),m.NdJ("click",(function(){m.CHM(e);const t=m.oxw();return m.KtG(t.checkDuplicates())})),m._UZ(14,"system-button-icon",13),m.qZA()()(),m.TgZ(15,"div",14)(16,"div",15),m.YNc(17,yl,1,4,"object-related-duplicate-tile",16),m.qZA()()()}if(2&e){const e=m.oxw();m.xp6(3),m.Q6J("icon","merge")("size","small")("sprite","standard"),m.xp6(6),m.hij(" (",e.duplicatecount,")"),m.xp6(1),m.Q6J("ngIf",e.duplicatecount>0),m.xp6(1),m.Q6J("mergemodels",e.duplicates),m.xp6(2),m.Q6J("disabled",e.isLoading),m.xp6(2),m.Q6J("hidden",e.hideDuplicates),m.xp6(2),m.Q6J("ngForOf",e.duplicates)}}let xl=(()=>{class ObjectRelatedDuplicates{constructor(e,t,s){this.model=e,this.metadata=t,this.broadcast=s,this.componentconfig={},this.showPanel=!1,this.duplicates=[],this.duplicatecount=0,this.hideDuplicates=!0,this.isLoading=!1,this.subscriptions=new R.w0}ngOnInit(){this.metadata.getModuleDuplicatecheck(this.model.module)&&(this.checkDuplicates(),this.subscriptions.add(this.broadcast.message$.subscribe((e=>this.handleMessage(e)))))}ngOnDestroy(){this.subscriptions.unsubscribe()}handleMessage(e){if("model.delete"===e.messagetype)if(e.messagedata.module==this.model.module){let t=this.duplicates.findIndex((t=>t.id==e.messagedata.id));t>=0&&(this.duplicates.splice(t,1),this.duplicatecount--)}}toggleDuplicates(e){e.stopPropagation(),this.hideDuplicates=!this.hideDuplicates}checkDuplicates(){this.isLoading=!0,this.model.duplicateCheck().subscribe((e=>{this.duplicates=e.records,this.duplicatecount=e.count,this.isLoading=!1,this.duplicatecount>0&&(this.showPanel=!0)}),(e=>{this.isLoading=!1}))}get iconStyle(){return this.hideDuplicates?{transform:"scale(1, -1)"}:{}}}return ObjectRelatedDuplicates.ɵfac=function(e){return new(e||ObjectRelatedDuplicates)(m.Y36(g.o),m.Y36(b.Pu),m.Y36(ve.f))},ObjectRelatedDuplicates.ɵcmp=m.Xpm({type:ObjectRelatedDuplicates,selectors:[["object-relatedlist-duplicates"]],decls:1,vars:1,consts:[["class","slds-card slds-card_boundary slds-m-bottom--medium",4,"ngIf"],[1,"slds-card","slds-card_boundary","slds-m-bottom--medium"],[1,"slds-card__header","slds-grid","slds-grid--vertical-align-center"],[1,"slds-media","slds-media--center","slds-has-flexi-truncate"],[3,"icon","size","sprite"],[1,"slds-grid","slds-grid--vertical-align-center","slds-media__body","slds-truncate"],["href","javascript:void(0);",1,"slds-text-link--reset"],[1,"slds-text-heading--small"],["label","LBL_DUPLICATES"],["class","slds-m-horizontal--xx-small","icon","up","style","transition: .5s;","size","x-small",3,"ngStyle","click",4,"ngIf"],[3,"mergemodels"],[1,"slds-m-left--x-small"],[1,"slds-button","slds-button_icon","x-slds-m-right--medium",3,"disabled","click"],["icon","refresh"],[1,"slds-card__body",3,"hidden"],[1,"slds-card__body--inner","slds-grid","slds-wrap","slds-gutters_direct-xx-small"],["class","slds-size--1-of-1 slds-large-size--1-of-3 slds-col",3,"system-model-provider",4,"ngFor","ngForOf"],["icon","up","size","x-small",1,"slds-m-horizontal--xx-small",2,"transition",".5s",3,"ngStyle","click"],[1,"slds-size--1-of-1","slds-large-size--1-of-3","slds-col",3,"system-model-provider"]],template:function(e,t){1&e&&m.YNc(0,vl,18,9,"article",0),2&e&&m.Q6J("ngIf",t.showPanel)},dependencies:[i.sg,i.O5,i.PC,x.J,Z.f,M._,w.r,zs.u,Xs,fl],encapsulation:2}),ObjectRelatedDuplicates})();var Zl=s(3333);const wl=["tablecontent"];let Tl=(()=>{class ObjectRelatedlistAll{constructor(e,t,s,i,n){this.navigationtab=e,this.language=t,this.metadata=s,this.model=i,this.relatedmodels=n,this.module="",this.id="",this.link="",this.related="",this.fieldset=void 0,this.componentconfig={},this.listfields=[]}ngOnInit(){this.module=this.navigationtab.activeRoute.params.module,this.link=this.navigationtab.activeRoute.params.link,this.related=this.navigationtab.activeRoute.params.related,this.fieldset=this.navigationtab.activeRoute.params.fieldset,this.model.module=this.module,this.model.id=this.navigationtab.activeRoute.params.id,this.model.getData(!0,"detailview").subscribe((e=>{this.navigationtab.setTabInfo({displaymodule:this.module,displayname:e.summary_text+" • "+this.language.getModuleName(this.related)})})),this.componentconfig=this.metadata.getComponentConfig("ObjectRelatedlistAll",this.related),this.componentconfig.fieldset||(this.componentconfig=this.metadata.getModuleDefaultComponentConfigByUsage(this.related,"list")),_.isEmpty(this.componentconfig)&&console.warn(`no componentconfig found for ObjectRelatedlistAll nor ObjectList with module ${this.related}`),this.listfields=this.metadata.getFieldSetFields(this.fieldset?this.fieldset:this.componentconfig.fieldset),_.isEmpty(this.listfields)&&console.warn("no fieldset to use!"),this.relatedmodels.module=this.model.module,this.relatedmodels.id=this.model.id,this.relatedmodels.relatedModule=this.related,this.relatedmodels.linkName=this.link,this.relatedmodels.loaditems=50,this.componentconfig.sequencefield?this.relatedmodels.sequencefield=this.componentconfig.sequencefield:this.model.fields[this.relatedmodels._linkName]?.sequence_field&&(this.relatedmodels.sequencefield=this.model.fields[this.relatedmodels._linkName].sequence_field),this.relatedmodels.getData()}goModule(){this.model.goModule()}goModel(){this.model.goDetail()}get listingTitle(){return this.metadata.fieldDefs[this.model.module][this.link].vname?this.language.getLabel(this.metadata.fieldDefs[this.model.module][this.link].vname):this.language.getModuleName(this.related)}onScroll(e){if(this.relatedmodels.canloadmore){let e=this.tablecontent.element.nativeElement;e.scrollTop+e.clientHeight+50>e.scrollHeight&&this.relatedmodels.getMoreData(25)}}}return ObjectRelatedlistAll.ɵfac=function(e){return new(e||ObjectRelatedlistAll)(m.Y36(Ze.d),m.Y36(h.d),m.Y36(b.Pu),m.Y36(g.o),m.Y36(Ct.j))},ObjectRelatedlistAll.ɵcmp=m.Xpm({type:ObjectRelatedlistAll,selectors:[["object-relatedlist-all"]],viewQuery:function(e,t){if(1&e&&m.Gf(wl,7,m.s_b),2&e){let e;m.iGM(e=m.CRH())&&(t.tablecontent=e.first)}},features:[m._Bn([g.o,Ct.j])],decls:28,vars:9,consts:[[1,"slds-page-header"],["role","navigation","aria-label","Breadcrumbs"],[1,"slds-breadcrumb","slds-list_horizontal","slds-wrap"],[1,"slds-breadcrumb__item","slds-text-title_caps"],["href","javascript:void(0);",3,"click"],[3,"module"],[1,"slds-media"],[1,"slds-media__body"],[1,"slds-page-header__title","slds-truncate","slds-align-middle","slds-p-vertical--xx-small"],[1,"slds-col","slds-align-bottom"],[1,"slds-text-body--small"],["label","LBL_OF"],["label","LBL_ITEMS"],["label","LBL_SORTEDBY"],[3,"module","field"],["label","LBL_LASTUPDATE"],["system-to-bottom","",3,"scroll"],["tablecontent",""],[3,"listfields"]],template:function(e,t){1&e&&(m.TgZ(0,"div",0)(1,"nav",1)(2,"ol",2)(3,"li",3)(4,"a",4),m.NdJ("click",(function(){return t.goModule()})),m._UZ(5,"system-label-modulename",5),m.qZA()(),m.TgZ(6,"li",3)(7,"a",4),m.NdJ("click",(function(){return t.goModel()})),m._uU(8),m.qZA()()()(),m.TgZ(9,"div",6)(10,"div",7)(11,"h1",8),m._uU(12),m.qZA()()(),m.TgZ(13,"div",9)(14,"p",10),m._uU(15),m._UZ(16,"system-label",11),m._uU(17),m._UZ(18,"system-label",12),m._uU(19," • "),m._UZ(20,"system-label",13)(21,"system-label-fieldname",14),m._uU(22," • "),m._UZ(23,"system-label",15),m._uU(24),m.qZA()()(),m.TgZ(25,"div",16,17),m.NdJ("scroll",(function(e){return t.onScroll(e)})),m._UZ(27,"object-relatedlist-table",18),m.qZA()),2&e&&(m.xp6(5),m.Q6J("module",t.module),m.xp6(3),m.Oqu(t.model.data.summary_text),m.xp6(4),m.Oqu(t.listingTitle),m.xp6(3),m.hij("",t.relatedmodels.items.length," "),m.xp6(2),m.hij(" ",t.relatedmodels.count," "),m.xp6(4),m.Q6J("module",t.related)("field",t.relatedmodels.sortfield),m.xp6(3),m.hij(" ",t.relatedmodels.getLastLoadTime(),""),m.xp6(3),m.Q6J("listfields",t.listfields))},dependencies:[M._,Re.h,Zl.M,F.H,sl.K],encapsulation:2}),ObjectRelatedlistAll})(),Cl=(()=>{class ObjectRelatedlistSequenced{constructor(){this.componentconfig={}}}return ObjectRelatedlistSequenced.ɵfac=function(e){return new(e||ObjectRelatedlistSequenced)},ObjectRelatedlistSequenced.ɵcmp=m.Xpm({type:ObjectRelatedlistSequenced,selectors:[["object-relatedlist-sequenced"]],inputs:{componentconfig:"componentconfig"},decls:1,vars:1,consts:[[3,"componentconfig"]],template:function(e,t){1&e&&m._UZ(0,"object-relatedlist-list",0),2&e&&m.Q6J("componentconfig",t.componentconfig)},dependencies:[ol],encapsulation:2}),ObjectRelatedlistSequenced})();var Al=s(3129),kl=s(8017),Ll=s(6409),Ml=s(7165),Sl=s(5931);function Il(e,t){if(1&e&&(m.TgZ(0,"legend",6),m._UZ(1,"system-label",7),m.qZA()),2&e){const e=m.oxw(2);m.xp6(1),m.Q6J("label",e.componentconfig.name)}}function Ol(e,t){if(1&e&&(m.TgZ(0,"fieldset",2),m.YNc(1,Il,2,1,"legend",3),m.TgZ(2,"div",4),m._UZ(3,"object-record-fieldset",5),m.qZA()()),2&e){const e=m.oxw();m.xp6(1),m.Q6J("ngIf",e.componentconfig.name),m.xp6(2),m.Q6J("fieldset",e.fieldset)("direction",e.direction)}}const Jl=function(e){return{"slds-theme--shade slds-p-around--small":e}};let Nl=(()=>{class ObjectRecordFieldsetContainer{constructor(e,t,s){this.metadata=e,this.model=t,this.view=s,this.componentconfig={}}get fieldset(){return this.componentconfig.fieldset}get direction(){return this.componentconfig.direction}get hidden(){return this.componentconfig.requiredmodelstate&&!this.model.checkModelState(this.componentconfig.requiredmodelstate)}}return ObjectRecordFieldsetContainer.ɵfac=function(e){return new(e||ObjectRecordFieldsetContainer)(m.Y36(b.Pu),m.Y36(g.o),m.Y36(Je.e))},ObjectRecordFieldsetContainer.ɵcmp=m.Xpm({type:ObjectRecordFieldsetContainer,selectors:[["object-record-fieldset-container"]],inputs:{componentconfig:"componentconfig"},decls:2,vars:4,consts:[[3,"ngClass"],["class","slds-form-element slds-form-element_compound",4,"ngIf"],[1,"slds-form-element","slds-form-element_compound"],["class","slds-form-element__legend slds-form-element__label slds-p-horizontal--xx-small",4,"ngIf"],[1,"slds-form-element__control"],[3,"fieldset","direction"],[1,"slds-form-element__legend","slds-form-element__label","slds-p-horizontal--xx-small"],[3,"label"]],template:function(e,t){1&e&&(m.TgZ(0,"div",0),m.YNc(1,Ol,4,3,"fieldset",1),m.qZA()),2&e&&(m.Q6J("ngClass",m.VKq(2,Jl,t.componentconfig.embedded)),m.xp6(1),m.Q6J("ngIf",!t.hidden))},dependencies:[i.mk,i.O5,M._,js.d],encapsulation:2}),ObjectRecordFieldsetContainer})();var Fl=s(6163);let ql=(()=>{class ObjectRecordChecklistItem{constructor(e,t,s,i,n){this.view=e,this.model=t,this.modelutilities=s,this.language=i,this.backend=n,this.checkitem={},this.checkfield="",this.checkid="",this.checkid=this.modelutilities.generateGuid()}get checked(){try{return JSON.parse(this.model.getField(this.checkfield))[this.checkitem.item]}catch(e){return!1}}checkItem(e){let t={};try{t=JSON.parse(this.model.getField(this.checkfield))}catch(e){t={}}t[this.checkitem.item]=e.target.checked,this.model.setField(this.checkfield,JSON.stringify(t)),e.target.checked?this.backend.postRequest("module/"+this.model.module+"/"+this.model.id+"/checklist/"+this.checkfield+"/"+this.checkitem.item):this.backend.deleteRequest("module/"+this.model.module+"/"+this.model.id+"/checklist/"+this.checkfield+"/"+this.checkitem.item)}get disabled(){return!this.model.checkAccess("edit")||this.model.isEditing||this.model.isLoading}}return ObjectRecordChecklistItem.ɵfac=function(e){return new(e||ObjectRecordChecklistItem)(m.Y36(Je.e),m.Y36(g.o),m.Y36(Fl.A),m.Y36(h.d),m.Y36(X.y))},ObjectRecordChecklistItem.ɵcmp=m.Xpm({type:ObjectRecordChecklistItem,selectors:[["object-record-checklist-item"]],inputs:{checkitem:"checkitem",checkfield:"checkfield"},features:[m._Bn([Je.e])],decls:8,vars:5,consts:[[1,"slds-form-element","slds-p-vertical--xx-small"],[1,"slds-form-element__control"],[1,"slds-checkbox"],["type","checkbox","name","options",3,"id","ngModel","disabled","change"],[1,"slds-checkbox__label"],[1,"slds-checkbox_faux"],[1,"slds-form-element__label"],[3,"label"]],template:function(e,t){1&e&&(m.TgZ(0,"div",0)(1,"div",1)(2,"span",2)(3,"input",3),m.NdJ("change",(function(e){return t.checkItem(e)})),m.qZA(),m.TgZ(4,"label",4),m._UZ(5,"span",5),m.TgZ(6,"span",6),m._UZ(7,"system-label",7),m.qZA()()()()()),2&e&&(m.xp6(3),m.Q6J("id",t.checkid)("ngModel",t.checked)("disabled",t.disabled),m.xp6(1),m.uIk("for",t.checkid),m.xp6(3),m.Q6J("label",t.checkitem.name))},dependencies:[l.Wl,l.JJ,l.On,M._],encapsulation:2}),ObjectRecordChecklistItem})();function El(e,t){if(1&e&&m._UZ(0,"object-record-checklist-item",4),2&e){const e=t.$implicit,s=m.oxw();m.Q6J("checkfield",s.modelfield)("checkitem",e)}}let Yl=(()=>{class ObjectRecordChecklist{constructor(e){this.language=e,this.componentconfig={}}get checkitems(){return this.componentconfig.checkitems?this.componentconfig.checkitems:[]}get modelfield(){return this.componentconfig.field}}return ObjectRecordChecklist.ɵfac=function(e){return new(e||ObjectRecordChecklist)(m.Y36(h.d))},ObjectRecordChecklist.ɵcmp=m.Xpm({type:ObjectRecordChecklist,selectors:[["object-record-checklist"]],features:[m._Bn([Je.e])],decls:4,vars:1,consts:[[1,"slds-box","slds-m-bottom--small"],[1,"slds-text-heading_small","slds-p-vertical--xx-small"],["label","LBL_CHECKLIST"],[3,"checkfield","checkitem",4,"ngFor","ngForOf"],[3,"checkfield","checkitem"]],template:function(e,t){1&e&&(m.TgZ(0,"div",0)(1,"h3",1),m._UZ(2,"system-label",2),m.qZA(),m.YNc(3,El,1,2,"object-record-checklist-item",3),m.qZA()),2&e&&(m.xp6(3),m.Q6J("ngForOf",t.checkitems))},dependencies:[i.sg,M._,ql],encapsulation:2}),ObjectRecordChecklist})();var Ql=s(6438),Ul=s(1553);function Dl(e,t){if(1&e&&(m.TgZ(0,"system-collapsable-tab",3)(1,"div",4),m._UZ(2,"object-record-fieldset",5),m.qZA()()),2&e){const e=m.oxw(2);m.Q6J("title",e.componentconfig.name)("expanded",e.expanded),m.xp6(2),m.Q6J("fieldset",e.fieldSet)("direction","vertical")}}function jl(e,t){if(1&e&&(m.TgZ(0,"div",6)(1,"div",4),m._UZ(2,"object-record-fieldset",5),m.qZA()()),2&e){const e=m.oxw(2);m.xp6(2),m.Q6J("fieldset",e.fieldSet)("direction","vertical")}}function Rl(e,t){if(1&e&&(m.TgZ(0,"div"),m.YNc(1,Dl,3,4,"system-collapsable-tab",1),m.YNc(2,jl,3,2,"div",2),m.qZA()),2&e){const e=m.oxw();m.xp6(1),m.Q6J("ngIf",e.showTitle),m.xp6(1),m.Q6J("ngIf",!e.showTitle)}}let Bl=(()=>{class ObjectRecordDetailsTab{constructor(e,t,s){this.metadata=e,this.model=t,this.language=s,this.componentconfig={},this.expanded=!0}ngOnInit(){this.componentconfig.collapsed&&(this.expanded=!1)}get fieldSet(){try{return this.componentconfig.fieldset}catch(e){return""}}get showTitle(){try{return!this.componentconfig.hidelabel}catch(e){return!1}}get hidden(){return this.componentconfig.requiredmodelstate&&!this.model.checkModelState(this.componentconfig.requiredmodelstate)}}return ObjectRecordDetailsTab.ɵfac=function(e){return new(e||ObjectRecordDetailsTab)(m.Y36(b.Pu),m.Y36(g.o),m.Y36(h.d))},ObjectRecordDetailsTab.ɵcmp=m.Xpm({type:ObjectRecordDetailsTab,selectors:[["object-record-details-tab"]],decls:1,vars:1,consts:[[4,"ngIf"],[3,"title","expanded",4,"ngIf"],["class","slds-section",4,"ngIf"],[3,"title","expanded"],[1,"slds-p-horizontal--xx-small"],[3,"fieldset","direction"],[1,"slds-section"]],template:function(e,t){1&e&&m.YNc(0,Rl,3,2,"div",0),2&e&&m.Q6J("ngIf",!t.hidden)},dependencies:[i.O5,Ul.z,js.d],encapsulation:2}),ObjectRecordDetailsTab})();function Gl(e,t){if(1&e&&(m.TgZ(0,"system-collapsable-tab",3)(1,"div",4),m._UZ(2,"object-record-fieldset",5),m.qZA()()),2&e){const e=m.oxw(2);m.Q6J("title",e.componentconfig.name)("expanded",e.expanded),m.xp6(2),m.Q6J("fieldset",e.fieldSet)("direction","vertical")}}function Pl(e,t){if(1&e&&(m.TgZ(0,"div",6)(1,"div",4),m._UZ(2,"object-record-fieldset",5),m.qZA()()),2&e){const e=m.oxw(2);m.xp6(2),m.Q6J("fieldset",e.fieldSet)("direction","vertical")}}function Hl(e,t){if(1&e&&(m.TgZ(0,"div"),m.YNc(1,Gl,3,4,"system-collapsable-tab",1),m.YNc(2,Pl,3,2,"div",2),m.qZA()),2&e){const e=m.oxw();m.Q6J("@displayanimation",void 0),m.xp6(1),m.Q6J("ngIf",e.showTitle),m.xp6(1),m.Q6J("ngIf",!e.showTitle)}}let zl=(()=>{class ObjectRecordDetailsModelstateTab extends Bl{}return ObjectRecordDetailsModelstateTab.ɵfac=function(){let e;return function(t){return(e||(e=m.n5z(ObjectRecordDetailsModelstateTab)))(t||ObjectRecordDetailsModelstateTab)}}(),ObjectRecordDetailsModelstateTab.ɵcmp=m.Xpm({type:ObjectRecordDetailsModelstateTab,selectors:[["object-record-details-modelstate-tab"]],features:[m.qOj],decls:1,vars:1,consts:[[4,"ngIf"],[3,"title","expanded",4,"ngIf"],["class","slds-section",4,"ngIf"],[3,"title","expanded"],[1,"slds-p-horizontal--xx-small"],[3,"fieldset","direction"],[1,"slds-section"]],template:function(e,t){1&e&&m.YNc(0,Hl,3,3,"div",0),2&e&&m.Q6J("ngIf",!t.hidden)},dependencies:[i.O5,Ul.z,js.d],encapsulation:2,data:{animation:[(0,f.X$)("displayanimation",[(0,f.eR)(":enter",[(0,f.oB)({opacity:0,height:"0px",overflow:"hidden"}),(0,f.jt)(".5s",(0,f.oB)({height:"*",opacity:1})),(0,f.oB)({overflow:"unset"})]),(0,f.eR)(":leave",[(0,f.oB)({overflow:"hidden"}),(0,f.jt)(".5s",(0,f.oB)({height:"0px",opacity:0}))])])]}}),ObjectRecordDetailsModelstateTab})();var Vl=s(6194),Kl=s(5385);function $l(e,t){if(1&e&&(m.TgZ(0,"div",8),m._UZ(1,"object-record-fieldset-field",7),m.qZA()),2&e){const e=m.oxw(2);m.xp6(1),m.Q6J("fieldsetitem",e.fields.spiceacl_territories_hash)}}function Xl(e,t){if(1&e&&(m.TgZ(0,"div",3)(1,"div",8),m._UZ(2,"object-record-fieldset-field",7),m.qZA(),m.YNc(3,$l,2,1,"div",9),m.qZA()),2&e){const e=m.oxw();m.xp6(2),m.Q6J("fieldsetitem",e.fields.spiceacl_primary_territory),m.xp6(1),m.Q6J("ngIf",e.multipleterritories)}}function Wl(e,t){if(1&e&&(m.TgZ(0,"div"),m._UZ(1,"object-record-fieldset-field",7),m.qZA()),2&e){const e=m.oxw();m.xp6(1),m.Q6J("fieldsetitem",e.fields.spiceacl_users_hash)}}const eo=function(e,t){return{"slds-size--1-of-1":e,"slds-size--1-of-2":t}};function to(e,t){if(1&e&&(m.TgZ(0,"div",12),m._UZ(1,"object-record-fieldset-field",7),m.qZA()),2&e){const e=m.oxw(2);m.Q6J("ngClass",m.WLB(2,eo,!e.hasFieldAssignedOrgunit,e.hasFieldAssignedOrgunit)),m.xp6(1),m.Q6J("fieldsetitem",e.fields.assigned_user)}}function so(e,t){if(1&e&&(m.TgZ(0,"div",12),m._UZ(1,"object-record-fieldset-field",7),m.qZA()),2&e){const e=m.oxw(2);m.Q6J("ngClass",m.WLB(2,eo,!e.hasFieldAssignedUser,e.hasFieldAssignedUser)),m.xp6(1),m.Q6J("fieldsetitem",e.fields.assigned_orgunit)}}function io(e,t){if(1&e&&(m.TgZ(0,"div",10),m.YNc(1,to,2,5,"div",11),m.YNc(2,so,2,5,"div",11),m.qZA()),2&e){const e=m.oxw();m.xp6(1),m.Q6J("ngIf",e.hasFieldAssignedUser),m.xp6(1),m.Q6J("ngIf",e.hasFieldAssignedOrgunit)}}const no=function(e,t){return{"slds-size--1-of-1":e,"slds-size--1-of-1 slds-medium-size--1-of-2":t}};let lo=(()=>{class ObjectRecordAdministrationTab{constructor(e,t,s){this.metadata=e,this.model=t,this.territories=s,this.componentconfig={},this.expanded=!0,this.hasFieldAssignedUser=!1,this.hasFieldAssignedOrgunit=!1,this.linkOrgunitToAssignedUser=!0,this.fields={spiceacl_primary_territory:{field:"spiceacl_primary_territory",fieldconfig:{}},spiceacl_territories_hash:{field:"spiceacl_territories_hash",fieldconfig:{}},spiceacl_users_hash:{field:"spiceacl_users_hash",fieldconfig:{}},assigned_user:{field:"assigned_user",fieldconfig:{fieldtype:"linked"}},assigned_orgunit:{field:"assigned_orgunit",fieldconfig:{}},created_by_user:{field:"created_by_user",fieldconfig:{fieldtype:"modifiedby",field_date:"date_entered"}},modified_by_user:{field:"modified_by_user",fieldconfig:{fieldtype:"modifiedby",field_date:"date_modified"}}}}ngOnInit(){this.componentconfig.collapsed&&(this.expanded=!1),this.componentconfig.unlinkorgunit&&(this.linkOrgunitToAssignedUser=!this.componentconfig.unlinkorgunit),this.hasFieldAssignedUser=this.metadata.hasField(this.model.module,"assigned_user_id"),this.hasFieldAssignedOrgunit=this.metadata.hasField(this.model.module,"assigned_orgunit_id"),this.hasFieldAssignedOrgunit&&this.linkOrgunitToAssignedUser&&this.model.data$.subscribe({next:e=>{this.model.getField("assigned_user_id")?(this.model._fields_stati.assigned_orgunit.readonly=!0,this.model.getField("assigned_orgunit_id")!=this.model.getField("assigned_user").orgunit_id&&this.model.setFields({assigned_orgunit_id:this.model.getField("assigned_user").orgunit_id,assigned_orgunit:this.model.getField("assigned_user").orgunit},!0)):this.model._fields_stati.assigned_orgunit.readonly=!1}})}getTypeParameters(){return this.territories.getModuleParamaters(this.model.module)}get territorymanaged(){return this.territories.checkModuleManaged(this.model.module)}get multipleterritories(){return 1==this.getTypeParameters().multipleobjects}get multipleusers(){return 1==this.metadata.getModuleDefs(this.model.module).acl_multipleusers}get hidden(){return this.componentconfig.requiredmodelstate&&!this.model.checkModelState(this.componentconfig.requiredmodelstate)}}return ObjectRecordAdministrationTab.ɵfac=function(e){return new(e||ObjectRecordAdministrationTab)(m.Y36(b.Pu),m.Y36(g.o),m.Y36(Kl.b))},ObjectRecordAdministrationTab.ɵcmp=m.Xpm({type:ObjectRecordAdministrationTab,selectors:[["object-record-details-tab"]],decls:10,vars:11,consts:[[3,"title","expanded"],["class","slds-grid slds-wrap",4,"ngIf"],[4,"ngIf"],[1,"slds-grid","slds-wrap"],["class","slds-grid slds-size--1-of-1 slds-medium-size--1-of-2",4,"ngIf"],[1,"slds-grid",3,"ngClass"],[1,"slds-size--1-of-2"],[3,"fieldsetitem"],[1,"slds-size--1-of-1","slds-medium-size--1-of-2"],["class","slds-size--1-of-1 slds-medium-size--1-of-2",4,"ngIf"],[1,"slds-grid","slds-size--1-of-1","slds-medium-size--1-of-2"],[3,"ngClass",4,"ngIf"],[3,"ngClass"]],template:function(e,t){1&e&&(m.TgZ(0,"system-collapsable-tab",0),m.YNc(1,Xl,4,2,"div",1),m.YNc(2,Wl,2,1,"div",2),m.TgZ(3,"div",3),m.YNc(4,io,3,2,"div",4),m.TgZ(5,"div",5)(6,"div",6),m._UZ(7,"object-record-fieldset-field",7),m.qZA(),m.TgZ(8,"div",6),m._UZ(9,"object-record-fieldset-field",7),m.qZA()()()()),2&e&&(m.Q6J("title",t.componentconfig.name)("expanded",t.expanded),m.xp6(1),m.Q6J("ngIf",t.territorymanaged),m.xp6(1),m.Q6J("ngIf",t.multipleusers),m.xp6(2),m.Q6J("ngIf",t.hasFieldAssignedUser||t.hasFieldAssignedOrgunit),m.xp6(1),m.Q6J("ngClass",m.WLB(8,no,!t.hasFieldAssignedUser&&!t.hasFieldAssignedOrgunit,t.hasFieldAssignedUser||!t.hasFieldAssignedOrgunit)),m.xp6(2),m.Q6J("fieldsetitem",t.fields.created_by_user),m.xp6(2),m.Q6J("fieldsetitem",t.fields.modified_by_user))},dependencies:[i.mk,i.O5,Ul.z,Ml.f],encapsulation:2}),ObjectRecordAdministrationTab})();function oo(e,t){if(1&e&&m._UZ(0,"field-label",4),2&e){const e=m.oxw().$implicit;m.Q6J("fieldname",e.field)("fieldconfig",e.fieldconfig)}}function ao(e,t){if(1&e&&(m.TgZ(0,"div",1),m.YNc(1,oo,1,2,"field-label",2),m._UZ(2,"field-container",3),m.qZA()),2&e){const e=t.$implicit,s=m.oxw();m.Q6J("ngClass",s.getFieldSizeClass()),m.xp6(1),m.Q6J("ngIf",s.showLabel(e.fieldconfig)&&"blank"!==e.field),m.xp6(1),m.Q6J("field",e.field)("fieldconfig",e.fieldconfig)("fielddisplayclass","slds-has-divider--bottom slds-p-vertical--x-small spice-fieldminheight")}}let ro=(()=>{class ObjectRecordDetailsTabRow{constructor(e,t,s,i){this.activatedRoute=e,this.metadata=t,this.componentFactoryResolver=s,this.model=i,this.initialized=!1,this.componentconfig={},this.componentRefs=[],this.rowFields=[],this.fieldset=""}ngOnInit(){this.rowFields=this.metadata.getFieldSetFields(this.fieldset.fieldset)}getFieldSizeClass(){return"slds-size--1-of-"+this.rowFields.length}getFieldWidth(){return{width:Math.round(1/this.rowFields.length*100)+"%"}}showLabel(e){return!0!==e.hidelabel}}return ObjectRecordDetailsTabRow.ɵfac=function(e){return new(e||ObjectRecordDetailsTabRow)(m.Y36(o.gz),m.Y36(b.Pu),m.Y36(m._Vd),m.Y36(g.o))},ObjectRecordDetailsTabRow.ɵcmp=m.Xpm({type:ObjectRecordDetailsTabRow,selectors:[["object-record-details-tab-row"]],inputs:{fieldset:"fieldset"},decls:1,vars:1,consts:[["class","slds-p-around--x-small",3,"ngClass",4,"ngFor","ngForOf"],[1,"slds-p-around--x-small",3,"ngClass"],[3,"fieldname","fieldconfig",4,"ngIf"],[3,"field","fieldconfig","fielddisplayclass"],[3,"fieldname","fieldconfig"]],template:function(e,t){1&e&&m.YNc(0,ao,3,5,"div",0),2&e&&m.Q6J("ngForOf",t.rowFields)},dependencies:[i.mk,i.sg,i.O5,Ti.q,Ne.j],encapsulation:2}),ObjectRecordDetailsTabRow})(),co=(()=>{class ObjectRecordDetailsTabRowField{constructor(){this.field={}}}return ObjectRecordDetailsTabRowField.ɵfac=function(e){return new(e||ObjectRecordDetailsTabRowField)},ObjectRecordDetailsTabRowField.ɵcmp=m.Xpm({type:ObjectRecordDetailsTabRowField,selectors:[["object-record-details-tab-row-field"]],inputs:{field:"field"},decls:2,vars:5,consts:[[3,"fieldname","fieldconfig"],[3,"field","fieldconfig","fielddisplayclass"]],template:function(e,t){1&e&&m._UZ(0,"field-label",0)(1,"field-container",1),2&e&&(m.Q6J("fieldname",t.field.field)("fieldconfig",t.field.fieldconfig),m.xp6(1),m.Q6J("field",t.field.field)("fieldconfig",t.field.fieldconfig)("fielddisplayclass","slds-text-body--regular slds-truncate slds-m-vertical--x-small"))},dependencies:[Ti.q,Ne.j],encapsulation:2}),ObjectRecordDetailsTabRowField})();function uo(e,t){if(1&e&&(m.TgZ(0,"span",7),m._uU(1),m.qZA()),2&e){const e=m.oxw().$implicit;m.xp6(1),m.Oqu(e.hasErrors)}}const mo=function(e){return{"slds-active":e}};function ho(e,t){if(1&e){const e=m.EpF();m.TgZ(0,"li",4),m.NdJ("click",(function(){const t=m.CHM(e).index,s=m.oxw();return m.KtG(s.setActiveTab(t))})),m.TgZ(1,"a",5),m.YNc(2,uo,2,1,"span",6),m._uU(3),m.qZA()()}if(2&e){const e=t.$implicit,s=t.index,i=m.oxw();m.Q6J("ngClass",m.VKq(3,mo,s===i.activeTab)),m.xp6(2),m.Q6J("ngIf",e.hasErrors),m.xp6(1),m.hij(" ",i.language.getLabel(e.name,i.model.module),"")}}function go(e,t){if(1&e){const e=m.EpF();m.TgZ(0,"object-tab-container-item",11),m.NdJ("taberrors",(function(t){m.CHM(e);const s=m.oxw(2).index,i=m.oxw();return m.KtG(i.showErrorsOnTab(s,t))})),m.qZA()}if(2&e){const e=m.oxw(2).$implicit;m.Q6J("componentset",e.componentset)}}function po(e,t){if(1&e&&(m.TgZ(0,"div",9),m.YNc(1,go,1,1,"object-tab-container-item",10),m.qZA()),2&e){const e=m.oxw(),t=e.index,s=e.$implicit,i=m.oxw();m.Q6J("ngClass",m.VKq(3,mo,i.showTab(t)))("hidden",!i.showTab(t)),m.xp6(1),m.Q6J("ngIf",s.componentset)}}function fo(e,t){if(1&e&&(m.ynx(0),m.YNc(1,po,2,5,"div",8),m.BQk()),2&e){const e=t.index,s=m.oxw();m.xp6(1),m.Q6J("ngIf",s.checkRenderTab(e))}}const bo=function(e){return{"slds-p-around--small":e}};let _o=(()=>{class ObjectRecordTabbedDetails{constructor(e,t,s,i,n){this.view=e,this.metadata=t,this.componentFactoryResolver=s,this.model=i,this.language=n,this.componentconfig={},this.activeTab=0,this.activatedTabs=[0],this.componentTabs=[],this.view.isEditable=!0}get tabs(){return this.componentTabs?this.componentTabs:[]}ngOnInit(){if(0==this.getTabs().length)if(this.componentconfig&&this.componentconfig.componentset){let e=this.metadata.getComponentSetObjects(this.componentconfig.componentset);this.componentTabs=[];for(let t of e)this.componentTabs.push(t.componentconfig)}else if(this.componentconfig.tabs)this.componentTabs=this.componentconfig.tabs;else{let e=this.metadata.getComponentConfig("ObjectRecordTabbedDetails",this.model.module);this.componentTabs=e.tabs}else this.componentTabs=this.getTabs()}getTabs(){try{return this.componentconfig.tabs?this.componentconfig.tabs:[]}catch(e){return[]}}setActiveTab(e){this.activatedTabs.push(e),this.activeTab=e}checkRenderTab(e){return e==this.activeTab||this.activatedTabs.indexOf(e)>-1}showTab(e){return e===this.activeTab}getDisplay(e){if(e!==this.activeTab)return{display:"none"}}cancel(){this.model.cancelEdit(),this.view.setViewMode()}save(){this.model.validate()&&(this.model.save(!0),this.view.setViewMode())}showErrorsOnTab(e,t){this.componentTabs[e].hasErrors=t}}return ObjectRecordTabbedDetails.ɵfac=function(e){return new(e||ObjectRecordTabbedDetails)(m.Y36(Je.e),m.Y36(b.Pu),m.Y36(m._Vd),m.Y36(g.o),m.Y36(h.d))},ObjectRecordTabbedDetails.ɵcmp=m.Xpm({type:ObjectRecordTabbedDetails,selectors:[["object-record-tabbed-details"]],decls:4,vars:5,consts:[[1,"slds-tabs--scoped","slds-p-bottom--small","slds-p-around--xx-small",3,"ngClass"],["role","tablist",1,"slds-tabs--scoped__nav"],["class","slds-tabs--scoped__item slds-text-title--caps slds-active","role","presentation",3,"ngClass","click",4,"ngFor","ngForOf"],[4,"ngFor","ngForOf"],["role","presentation",1,"slds-tabs--scoped__item","slds-text-title--caps","slds-active",3,"ngClass","click"],["href","javascript:void(0);","role","tab","aria-selected","false",1,"slds-tabs--scoped__link"],["class","slds-badge","title","Invalid fields!",4,"ngIf"],["title","Invalid fields!",1,"slds-badge"],["class","slds-tabs--scoped__content slds-p-vertical--xxx-small slds-p-horizontal--none","role","tabpanel",3,"ngClass","hidden",4,"ngIf"],["role","tabpanel",1,"slds-tabs--scoped__content","slds-p-vertical--xxx-small","slds-p-horizontal--none",3,"ngClass","hidden"],[3,"componentset","taberrors",4,"ngIf"],[3,"componentset","taberrors"]],template:function(e,t){1&e&&(m.TgZ(0,"div",0)(1,"ul",1),m.YNc(2,ho,4,5,"li",2),m.qZA(),m.YNc(3,fo,2,1,"ng-container",3),m.qZA()),2&e&&(m.Q6J("ngClass",m.VKq(3,bo,t.componentconfig.inModal)),m.xp6(2),m.Q6J("ngForOf",t.tabs),m.xp6(1),m.Q6J("ngForOf",t.tabs))},dependencies:[i.mk,i.sg,i.O5,Tn],styles:[".slds-badge[_ngcontent-%COMP%]{background-color:#c00;color:#fff;font-weight:700;padding:.125rem .4rem}"]}),ObjectRecordTabbedDetails})();const yo=["panelcontainer"];let vo=(()=>{class ObjectRecordTabbedDetailsTab{constructor(e,t,s,i,n){this.view=e,this.metadata=t,this.componentFactoryResolver=s,this.model=i,this.language=n,this.componentset="",this.componentRefs=[]}ngAfterViewInit(){this.buildContainer()}buildContainer(){for(let e of this.componentRefs)e.destroy();for(let e of this.metadata.getComponentSetObjects(this.componentset))this.metadata.addComponent(e.component,this.panelcontainer).subscribe((t=>{t.instance.componentconfig=e.componentconfig,this.componentRefs.push(t)}))}}return ObjectRecordTabbedDetailsTab.ɵfac=function(e){return new(e||ObjectRecordTabbedDetailsTab)(m.Y36(Je.e),m.Y36(b.Pu),m.Y36(m._Vd),m.Y36(g.o),m.Y36(h.d))},ObjectRecordTabbedDetailsTab.ɵcmp=m.Xpm({type:ObjectRecordTabbedDetailsTab,selectors:[["object-record-tabbed-details-tab"]],viewQuery:function(e,t){if(1&e&&m.Gf(yo,7,m.s_b),2&e){let e;m.iGM(e=m.CRH())&&(t.panelcontainer=e.first)}},inputs:{componentset:"componentset"},decls:2,vars:0,consts:[["panelcontainer",""]],template:function(e,t){1&e&&m._UZ(0,"div",null,0)},encapsulation:2}),ObjectRecordTabbedDetailsTab})(),xo=(()=>{class ObjectRecordDetailsRelatedListTab{constructor(e){this.language=e,this.componentconfig={}}}return ObjectRecordDetailsRelatedListTab.ɵfac=function(e){return new(e||ObjectRecordDetailsRelatedListTab)(m.Y36(h.d))},ObjectRecordDetailsRelatedListTab.ɵcmp=m.Xpm({type:ObjectRecordDetailsRelatedListTab,selectors:[["object-record-details-related-list-tab"]],decls:3,vars:2,consts:[[3,"title"],[1,"slds-p-horizontal--xx-small"],[3,"componentconfig"]],template:function(e,t){1&e&&(m.TgZ(0,"system-collapsable-tab",0)(1,"div",1),m._UZ(2,"object-related-list",2),m.qZA()()),2&e&&(m.Q6J("title",t.componentconfig.name),m.xp6(2),m.Q6J("componentconfig",t.componentconfig))},dependencies:[Ul.z,el.s],encapsulation:2}),ObjectRecordDetailsRelatedListTab})();var Zo=s(9866),wo=s(9624),To=s(9533);function Co(e,t){if(1&e){const e=m.EpF();m.TgZ(0,"object-modal-module-lookup",3),m.NdJ("selectedItems",(function(t){m.CHM(e);const s=m.oxw();return m.KtG(s.emitSelectedItems(t))})),m.qZA()}}let Ao=(()=>{class ObjectSelectButton{constructor(e,t){this.metadata=e,this.model=t,this.module="",this.displaymodulename=!0,this.selectedItems=new m.vpe,this.displayModal=!1,this.popupSubscribe=void 0}ngOnInit(){this.model.module=this.module}openModal(){}emitSelectedItems(e){this.selectedItems.emit(e)}}return ObjectSelectButton.ɵfac=function(e){return new(e||ObjectSelectButton)(m.Y36(b.Pu),m.Y36(g.o))},ObjectSelectButton.ɵcmp=m.Xpm({type:ObjectSelectButton,selectors:[["object-select-button"]],inputs:{module:"module",displaymodulename:"displaymodulename"},outputs:{selectedItems:"selectedItems"},features:[m._Bn([g.o])],decls:3,vars:1,consts:[[1,"slds-button","slds-button--neutral",3,"click"],["label","LBL_SELECT"],[3,"selectedItems",4,"ngIf"],[3,"selectedItems"]],template:function(e,t){1&e&&(m.TgZ(0,"button",0),m.NdJ("click",(function(){return t.openModal()})),m._UZ(1,"system-label",1),m.qZA(),m.YNc(2,Co,1,0,"object-modal-module-lookup",2)),2&e&&(m.xp6(2),m.Q6J("ngIf",t.displayModal))},dependencies:[i.O5,M._,To.X],encapsulation:2}),ObjectSelectButton})();function ko(e,t){if(1&e){const e=m.EpF();m.TgZ(0,"div",3)(1,"a",4),m.NdJ("click",(function(){m.CHM(e);const t=m.oxw();return m.KtG(t.deleteAddress())})),m._UZ(2,"system-label",5),m.qZA()()}}let Lo=(()=>{class ObjectAddress{constructor(e,t,s,i,n,l){this.language=e,this.metadata=t,this.model=s,this.view=i,this.modelutilities=n,this.footer=l,this.componentconfig={},this.address={},this.parent={},this.fieldset="",this.model.module="Addresses"}ngOnInit(){if(this.model.id=this.address.id,this.model.setData(this.address),null==this.fieldset||""==this.fieldset){let e=this.metadata.getComponentConfig("ObjectAddress",this.parent.module);null==e.fieldset&&""==e.fieldset||(this.fieldset=e.fieldset)}}deleteAddress(){this.metadata.addComponent("SystemConfirmDialog",this.footer.footercontainer).subscribe((e=>{e.instance.title=this.language.getLabel("LBL_DELETE_ADDRESS_TITLE","Addresses"),e.instance.message=this.language.getLabel("LBL_DELETE_ADDRESS_TEXT","Addresses"),e.instance.answer.subscribe((e=>{e&&this.model.setField("deleted",!0)}))}))}}return ObjectAddress.ɵfac=function(e){return new(e||ObjectAddress)(m.Y36(h.d),m.Y36(b.Pu),m.Y36(g.o),m.Y36(Je.e),m.Y36(Fl.A),m.Y36(ls.M))},ObjectAddress.ɵcmp=m.Xpm({type:ObjectAddress,selectors:[["object-address"]],inputs:{address:"address",parent:"parent",fieldset:"fieldset"},features:[m._Bn([g.o])],decls:3,vars:3,consts:[[1,"slds-box","slds-m-around--x-small",2,"padding","0px"],[3,"fieldset","direction"],["class","slds-text-align_right slds-m-around--x-small",4,"ngIf"],[1,"slds-text-align_right","slds-m-around--x-small"],["href","javascript:void(0);",1,"slds-text-link_reset",3,"click"],["label","LBL_DELETE"]],template:function(e,t){1&e&&(m.TgZ(0,"div",0),m._UZ(1,"object-record-fieldset",1),m.YNc(2,ko,3,0,"div",2),m.qZA()),2&e&&(m.xp6(1),m.Q6J("fieldset",t.fieldset)("direction","vertical"),m.xp6(1),m.Q6J("ngIf",t.view.isEditMode()))},dependencies:[i.O5,M._,js.d],encapsulation:2}),ObjectAddress})();function Mo(e,t){if(1&e&&m._UZ(0,"object-address",10),2&e){const e=t.$implicit,s=m.oxw(2);m.Q6J("address",e)("parent",s.model)("fieldset",s.componentconfig.fieldset)}}function So(e,t){if(1&e&&(m.ynx(0),m.YNc(1,Mo,1,3,"object-address",9),m.BQk()),2&e){const e=m.oxw();m.xp6(1),m.Q6J("ngForOf",e.addresses)}}function Io(e,t){if(1&e){const e=m.EpF();m.TgZ(0,"div",11)(1,"a",12),m.NdJ("click",(function(){m.CHM(e);const t=m.oxw();return m.KtG(t.addAddress())})),m._UZ(2,"system-label",13),m.qZA()()}}const Oo=function(e,t){return{"slds-is-open":e,"slds-hide":t}};let Jo=(()=>{class ObjectAddressesPipe{transform(e){let t=[];for(let s in e)t.push(e[s]);return t}}return ObjectAddressesPipe.ɵfac=function(e){return new(e||ObjectAddressesPipe)},ObjectAddressesPipe.ɵpipe=m.Yjl({name:"objectaddressespipe",type:ObjectAddressesPipe,pure:!1}),ObjectAddressesPipe})(),No=(()=>{class ObjectAddresses{constructor(e,t,s,i,n){this.language=e,this.metadata=t,this.model=s,this.view=i,this.modelutilities=n,this.componentconfig={},this.expanded=!0}get hasAddresses(){try{return null!=this.model.data.addresses.beans}catch(e){return!1}}ngOnInit(){this.componentconfig.collapsed&&(this.expanded=!1)}get hidden(){return this.componentconfig.requiredmodelstate&&!this.model.checkModelState(this.componentconfig.requiredmodelstate)}getDisplay(){return this.addresses.length>0||this.view.isEditMode()?"inherit":"none"}get addresses(){let e=[];try{for(let t in this.model.data.addresses.beans)0==this.model.data.addresses.beans[t].deleted&&e.push(this.model.data.addresses.beans[t])}catch(e){}return e}togglePanel(){this.expanded=!this.expanded}getChevronStyle(){if(!this.expanded)return{transform:"rotate(45deg)","margin-top":"4px"}}getTabStyle(){if(!this.expanded)return{height:"0px",transform:"rotateX(90deg)"}}addAddress(){let e=this.modelutilities.generateGuid();null==this.model.data.addresses&&(this.model.data.addresses={beans:[]}),this.model.data.addresses.beans[e]={id:e,deleted:!1}}}return ObjectAddresses.ɵfac=function(e){return new(e||ObjectAddresses)(m.Y36(h.d),m.Y36(b.Pu),m.Y36(g.o),m.Y36(Je.e),m.Y36(Fl.A))},ObjectAddresses.ɵcmp=m.Xpm({type:ObjectAddresses,selectors:[["object-addresses"]],hostVars:2,hostBindings:function(e,t){2&e&&m.Udp("display",t.getDisplay())},decls:10,vars:10,consts:[[1,"slds-section",3,"ngClass"],[1,"slds-section__title"],["aria-controls","expando-unique-id","aria-expanded","true",1,"slds-button","slds-section__title-action",3,"click"],[3,"icon","size","addclasses"],[1,"slds-truncate"],["label","LBL_ADDRESSES"],[3,"ngStyle"],[4,"ngIf"],["class","slds-box slds-m-around--x-small slds-align--absolute-center","style","padding:0.5rem;",4,"ngIf"],[3,"address","parent","fieldset",4,"ngFor","ngForOf"],[3,"address","parent","fieldset"],[1,"slds-box","slds-m-around--x-small","slds-align--absolute-center",2,"padding","0.5rem"],["href","javascript:void(0);",1,"slds-text-link_reset",3,"click"],["label","LBL_ADD_ADDRESS"]],template:function(e,t){1&e&&(m.TgZ(0,"div",0)(1,"h3",1)(2,"button",2),m.NdJ("click",(function(){return t.togglePanel()})),m._UZ(3,"system-utility-icon",3),m.TgZ(4,"span",4),m._UZ(5,"system-label",5),m.qZA()()(),m.TgZ(6,"div")(7,"div",6),m.YNc(8,So,2,1,"ng-container",7),m.YNc(9,Io,3,0,"div",8),m.qZA()()()),2&e&&(m.Q6J("ngClass",m.WLB(7,Oo,t.expanded,t.hidden)),m.xp6(3),m.Q6J("icon","switch")("size","x-small")("addclasses","slds-section__title-action-icon slds-button__icon slds-button__icon_left"),m.xp6(4),m.Q6J("ngStyle",t.getTabStyle()),m.xp6(1),m.Q6J("ngIf",t.hasAddresses),m.xp6(1),m.Q6J("ngIf",t.view.isEditMode()))},dependencies:[i.mk,i.sg,i.O5,i.PC,M._,w.r,Lo],encapsulation:2}),ObjectAddresses})();var Fo=s(3814);function qo(e,t){if(1&e&&(m.TgZ(0,"system-collapsable-tab",5),m._UZ(1,"object-record-fieldset",27),m.qZA()),2&e){const e=m.oxw();m.Q6J("title",e.language.getLabel("LBL_DETAILS")),m.xp6(1),m.Q6J("fieldset",e.fieldset)}}function Eo(e,t){if(1&e&&(m.TgZ(0,"tr")(1,"td",28)(2,"div",9),m._uU(3),m.qZA()(),m.TgZ(4,"td",28)(5,"div",9),m._uU(6),m.qZA()(),m.TgZ(7,"td",28)(8,"div",29),m._UZ(9,"system-icon",30),m.TgZ(10,"div",9),m._uU(11),m.qZA()()(),m.TgZ(12,"td",28)(13,"div",9),m._uU(14),m.qZA()(),m.TgZ(15,"td",28),m._UZ(16,"system-checkbox",31),m.qZA(),m.TgZ(17,"td",28),m._UZ(18,"system-checkbox",31),m.qZA()()),2&e){const e=t.$implicit;m.xp6(3),m.Oqu(e.date_entered),m.xp6(3),m.Oqu(e.created_by_name),m.xp6(3),m.Q6J("module",e.module),m.xp6(2),m.Oqu(e.module),m.xp6(3),m.Oqu(e.summary_text),m.xp6(2),m.Q6J("ngModel",1==e.gdpr_data_agreement)("disabled",!0),m.xp6(2),m.Q6J("ngModel",1==e.gdpr_marketing_agreement||"g"==e.gdpr_marketing_agreement)("disabled",!0)}}function Yo(e,t){1&e&&(m.TgZ(0,"div",32),m._UZ(1,"system-label",33),m.qZA())}const Qo=function(e,t){return{id:null,module:e,data:t}};function Uo(e,t){if(1&e&&(m.TgZ(0,"tr",34)(1,"td",28)(2,"div",9),m._uU(3),m.qZA()(),m.TgZ(4,"td",28)(5,"div",9),m._uU(6),m.qZA()(),m.TgZ(7,"td",28)(8,"div",9),m._UZ(9,"field-label",35),m.qZA()(),m.TgZ(10,"td",28)(11,"div",9),m._UZ(12,"field-container",36),m.qZA()()()),2&e){const e=t.$implicit,s=m.oxw();m.Q6J("system-model-provider",m.WLB(5,Qo,s.model.module,e.model)),m.xp6(3),m.Oqu(e.date_created),m.xp6(3),m.Oqu(e.created_by_name),m.xp6(3),m.Q6J("fieldname",e.field_name),m.xp6(3),m.Q6J("field",e.field_name)}}function Do(e,t){1&e&&(m.TgZ(0,"div",32),m._UZ(1,"system-label",37),m.qZA())}const jo=function(){return{displayLabels:!1,displayLinks:!0,editable:!1}};let Ro=(()=>{class ObjectGDPRModal{constructor(e,t,s,i){this.language=e,this.metadata=t,this.model=s,this.view=i,this.componentconfig={},this.self={},this.gdprRelatedLog=[],this.gdprAuditLog=[],this.view.isEditable=!1}ngOnInit(){this.componentconfig=this.metadata.getComponentConfig("ObjectGDPRModal",this.model.module)}get fieldset(){return this.componentconfig.fieldset}closeModal(){this.self.destroy()}}return ObjectGDPRModal.ɵfac=function(e){return new(e||ObjectGDPRModal)(m.Y36(h.d),m.Y36(b.Pu),m.Y36(g.o),m.Y36(Je.e))},ObjectGDPRModal.ɵcmp=m.Xpm({type:ObjectGDPRModal,selectors:[["ng-component"]],features:[m._Bn([Je.e])],decls:52,vars:9,consts:[["size","large"],[3,"close"],["label","LBL_GDPR"],["margin","none",3,"grow"],[3,"title",4,"ngIf"],[3,"title"],[1,"slds-table","slds-table--bordered","slds-table--cell-buffer"],[1,"slds-text-title--caps"],["scope","col"],[1,"slds-truncate"],["label","LBL_DATE_ENTERED"],["label","LBL_CREATED_BY"],["label","LBL_MODULE"],["label","LBL_NAME"],["label","LBL_DATA"],["label","LBL_MARKETING"],[4,"ngFor","ngForOf"],["class","slds-text-heading--small slds-p-around--medium slds-align--absolute-center",4,"ngIf"],["system-title","LBL_AUDITLOG"],["label","LBL_DATE_MODIFIED"],["label","LBL_MODIFIED_BY"],["label","LBL_FIELD"],["label","LBL_VALUE"],[3,"system-view-provider"],[3,"system-model-provider",4,"ngFor","ngForOf"],[1,"slds-button","slds-button--neutral",3,"click"],["label","LBL_CLOSE"],["direction","vertical",3,"fieldset"],["scope","row"],[1,"slds-grid","slds-grid--vertical-align-center"],["size","xx-small",3,"module"],[3,"ngModel","disabled"],[1,"slds-text-heading--small","slds-p-around--medium","slds-align--absolute-center"],["label","MSG_NO_GDPRRECORDS_FOUND"],[3,"system-model-provider"],[3,"fieldname"],["fielddisplayclass","slds-truncate",3,"field"],["label","MSG_NOAUDITRECORDS_FOUND"]],template:function(e,t){1&e&&(m.TgZ(0,"system-modal",0)(1,"system-modal-header",1),m.NdJ("close",(function(){return t.closeModal()})),m._UZ(2,"system-label",2),m.qZA(),m.TgZ(3,"system-modal-content",3),m.YNc(4,qo,2,2,"system-collapsable-tab",4),m.TgZ(5,"system-collapsable-tab",5)(6,"table",6)(7,"thead")(8,"tr",7)(9,"th",8)(10,"div",9),m._UZ(11,"system-label",10),m.qZA()(),m.TgZ(12,"th",8)(13,"div",9),m._UZ(14,"system-label",11),m.qZA()(),m.TgZ(15,"th",8)(16,"div",9),m._UZ(17,"system-label",12),m.qZA()(),m.TgZ(18,"th",8)(19,"div",9),m._UZ(20,"system-label",13),m.qZA()(),m.TgZ(21,"th",8)(22,"div",9),m._UZ(23,"system-label",14),m.qZA()(),m.TgZ(24,"th",8)(25,"div",9),m._UZ(26,"system-label",15),m.qZA()()()(),m.TgZ(27,"tbody"),m.YNc(28,Eo,19,9,"tr",16),m.qZA()(),m.YNc(29,Yo,2,0,"div",17),m.qZA(),m.TgZ(30,"system-collapsable-tab",18)(31,"table",6)(32,"thead")(33,"tr",7)(34,"th",8)(35,"div",9),m._UZ(36,"system-label",19),m.qZA()(),m.TgZ(37,"th",8)(38,"div",9),m._UZ(39,"system-label",20),m.qZA()(),m.TgZ(40,"th",8)(41,"div",9),m._UZ(42,"system-label",21),m.qZA()(),m.TgZ(43,"th",8)(44,"div",9),m._UZ(45,"system-label",22),m.qZA()()()(),m.TgZ(46,"tbody",23),m.YNc(47,Uo,13,8,"tr",24),m.qZA()(),m.YNc(48,Do,2,0,"div",17),m.qZA()(),m.TgZ(49,"system-modal-footer")(50,"button",25),m.NdJ("click",(function(){return t.closeModal()})),m._UZ(51,"system-label",26),m.qZA()()()),2&e&&(m.xp6(3),m.Q6J("grow",!0),m.xp6(1),m.Q6J("ngIf",t.fieldset),m.xp6(1),m.Q6J("title",t.language.getLabel("LBL_GDPR_RECORDS")),m.xp6(23),m.Q6J("ngForOf",t.gdprRelatedLog),m.xp6(1),m.Q6J("ngIf",0===t.gdprRelatedLog.length),m.xp6(17),m.Q6J("system-view-provider",m.DdM(8,jo)),m.xp6(1),m.Q6J("ngForOf",t.gdprAuditLog),m.xp6(1),m.Q6J("ngIf",0===t.gdprAuditLog.length))},dependencies:[i.sg,i.O5,l.JJ,l.On,Ti.q,Ne.j,ri.U,Ul.z,Z.f,M._,Fe.j,qe.x,Ee.p,Ye.y,zs.u,Fo.V,C.S,js.d],encapsulation:2}),ObjectGDPRModal})();const Bo=["object-row-item",""];function Go(e,t){if(1&e){const e=m.EpF();m.TgZ(0,"td",2)(1,"label",3)(2,"input",4),m.NdJ("ngModelChange",(function(t){m.CHM(e);const s=m.oxw();return m.KtG(s.selected=t)})),m.qZA(),m._UZ(3,"span",5),m.qZA()()}if(2&e){const e=m.oxw();m.xp6(2),m.Q6J("ngModel",e.selected)}}function Po(e,t){if(1&e&&(m.TgZ(0,"td",6),m._UZ(1,"field-container",7),m.qZA()),2&e){const e=t.$implicit;m.xp6(1),m.Q6J("field",e.field)("fieldconfig",e.fieldconfig)("fielddisplayclass","slds-truncate slds-p-horizontal--x-small")}}function Ho(e,t){1&e&&(m.TgZ(0,"td",2),m._UZ(1,"object-action-menu",8),m.qZA()),2&e&&(m.xp6(1),m.Q6J("buttonsize","small"))}let zo=(()=>{class ObjectRowItemComponent{constructor(e,t,s,i){this.model=e,this.view=t,this.router=s,this.language=i,this.rowselect=!1,this.listFields=[],this.listItem={},this.inlineedit=!1,this.showActionMenu=!0,this._selected=!1,this.select=new m.vpe}ngOnInit(){this.model.module=this.module,this.model.id=this.listItem.id,this.model.setData(this.listItem),this.view.isEditable=this.inlineedit&&this.model.checkAccess("edit")}set selected(e){this._selected=e,this.select.emit(e)}get selected(){return this._selected}navigateDetail(){this.router.navigate(["/module/"+this.model.module+"/"+this.model.id])}}return ObjectRowItemComponent.ɵfac=function(e){return new(e||ObjectRowItemComponent)(m.Y36(g.o),m.Y36(Je.e),m.Y36(o.F0),m.Y36(h.d))},ObjectRowItemComponent.ɵcmp=m.Xpm({type:ObjectRowItemComponent,selectors:[["","object-row-item",""]],hostVars:4,hostBindings:function(e,t){2&e&&m.ekj("slds-is-active",t._selected)("slds-is-selected",t._selected)},inputs:{rowselect:["rowselection","rowselect"],listFields:["fields","listFields"],listItem:["itemdata","listItem"],module:"module",inlineedit:"inlineedit",showActionMenu:"showActionMenu",_selected:["selected","_selected"]},outputs:{select:"select"},features:[m._Bn([g.o,Je.e])],attrs:Bo,decls:3,vars:3,consts:[["role","gridcell","class","slds-cell-shrink",4,"ngIf"],["scope","row",4,"ngFor","ngForOf"],["role","gridcell",1,"slds-cell-shrink"],[1,"slds-checkbox"],["type","checkbox",3,"ngModel","ngModelChange"],[1,"slds-checkbox--faux"],["scope","row"],[3,"field","fieldconfig","fielddisplayclass"],[3,"buttonsize"]],template:function(e,t){1&e&&(m.YNc(0,Go,4,1,"td",0),m.YNc(1,Po,2,3,"td",1),m.YNc(2,Ho,2,1,"td",0)),2&e&&(m.Q6J("ngIf",t.rowselect),m.xp6(1),m.Q6J("ngForOf",t.listFields),m.xp6(1),m.Q6J("ngIf",t.showActionMenu))},dependencies:[i.sg,i.O5,l.Wl,l.JJ,l.On,Ne.j,it.g],encapsulation:2}),ObjectRowItemComponent})(),Vo=(()=>{class ObjectActionVCardButton{constructor(e,t,s,i){this.language=e,this.model=t,this.modal=s,this.backend=i}execute(){let e=this.model.module+"_"+this.model.getField("summary_text")+".vcf";this.modal.openModal("SystemLoadingModal").subscribe((t=>{t.instance.messagelabel="MSG_GENERATING_VCARD",this.backend.downloadFile({route:`/module/${this.model.module}/${this.model.id}/vcard`},e,"text/bin").subscribe((e=>{t.instance.self.destroy()}),(e=>{t.instance.self.destroy()}))}))}}return ObjectActionVCardButton.ɵfac=function(e){return new(e||ObjectActionVCardButton)(m.Y36(h.d),m.Y36(g.o),m.Y36(z.o),m.Y36(X.y))},ObjectActionVCardButton.ɵcmp=m.Xpm({type:ObjectActionVCardButton,selectors:[["object-action-output-bean-button"]],decls:2,vars:0,template:function(e,t){1&e&&(m.TgZ(0,"span"),m._uU(1,"VCARD"),m.qZA())},encapsulation:2}),ObjectActionVCardButton})();var Ko=s(2803);function $o(e,t){1&e&&m._UZ(0,"system-stencil")}let Xo=(()=>{class ObjectModelPopoverHeader{constructor(e){this.model=e}}return ObjectModelPopoverHeader.ɵfac=function(e){return new(e||ObjectModelPopoverHeader)(m.Y36(g.o))},ObjectModelPopoverHeader.ɵcmp=m.Xpm({type:ObjectModelPopoverHeader,selectors:[["object-model-popover-header"]],decls:7,vars:3,consts:[[1,"slds-media","slds-media_center","slds-m-bottom_small","slds-p-right--large"],["size","small",3,"module"],[1,"slds-media__body"],[4,"ngIf"],[1,"slds-text-heading_small","slds-hyphenate"],["href","javascript:void(0);",3,"click"]],template:function(e,t){1&e&&(m.TgZ(0,"header",0),m._UZ(1,"system-icon",1),m.TgZ(2,"div",2),m.YNc(3,$o,1,0,"system-stencil",3),m.TgZ(4,"h2",4)(5,"a",5),m.NdJ("click",(function(){return t.model.goDetail()})),m._uU(6),m.qZA()()()()),2&e&&(m.xp6(1),m.Q6J("module",t.model.module),m.xp6(2),m.Q6J("ngIf",t.model.isLoading),m.xp6(3),m.Oqu(t.model.data.summary_text))},dependencies:[i.O5,Z.f,Ko.B],encapsulation:2}),ObjectModelPopoverHeader})();const Wo=["popover"],ea=["relatedcontainer"];function ta(e,t){if(1&e&&m._UZ(0,"system-componentset",11),2&e){const e=m.oxw();m.Q6J("componentset",e.headercomponentset)}}function sa(e,t){1&e&&m._UZ(0,"object-model-popover-header")}const ia=function(e,t){return{"slds-size--1-of-2":e,"slds-size--1-of-1":t}};function na(e,t){if(1&e&&(m.TgZ(0,"div",12)(1,"dl")(2,"dd"),m._UZ(3,"field-container",13),m.qZA()()()),2&e){const e=t.$implicit,s=m.oxw();m.Q6J("ngClass",m.WLB(4,ia,s.fields.length>1,1==s.fields.length)),m.xp6(3),m.Q6J("field",e.field)("fieldconfig",e.fieldconfig)("fielddisplayclass","slds-truncate")}}let la=(()=>{class ObjectModelPopover{constructor(e,t,s){this.model=e,this.view=t,this.metadata=s,this.popoverside="right",this.popoverpos="top",this.styles=null,this.hidePopoverTimeout={},this.parentElementRef=null,this.self=null,this.fields=[],this.fieldset="",this.componentset="",this.headercomponentset="",this.heightcorrection=30,this.widthcorrection=30,this.view.displayLinks=!1}get relatedStyle(){return{"max-height":`calc(100vh - ${this.relatedContainer.element.nativeElement.getBoundingClientRect().top+5}px)`}}onMouseOver(){this.hidePopoverTimeout&&window.clearTimeout(this.hidePopoverTimeout)}onMouseOut(){this.closePopover()}get popoverStyle(){let e=this.parentElementRef.nativeElement.getBoundingClientRect(),t=this.popover.element.nativeElement.getBoundingClientRect();return window.innerWidth-e.left>t.width?this.popoverside="right":this.popoverside="left",e.top-30+t.height>window.innerHeight&&e.top-t.height+this.heightcorrection>0?(this.popoverpos="bottom",{top:e.top-t.height+this.heightcorrection+"px",left:"right"==this.popoverside?e.left+100+"px":e.left-t.width-this.widthcorrection+"px"}):(this.popoverpos="top",{top:e.top-this.heightcorrection+"px",left:"right"==this.popoverside?e.left+100+"px":e.left-t.width-this.widthcorrection+"px"})}ngOnInit(){let e=this.metadata.getComponentConfig("ObjectModelPopover",this.model.module);e.fieldset||e.componentset?(this.fields=this.metadata.getFieldSetFields(e.fieldset),this.fieldset=e.fieldset,this.componentset=e.componentset,this.headercomponentset=e.headercomponentset):(e=this.metadata.getComponentConfig("ObjectPageHeaderDetails",this.model.module),e.fieldset&&(this.fields=this.metadata.getFieldSetFields(e.fieldset),this.fieldset=e.fieldset)),e.forcereload&&this.model.getData(!1),this.styles=this.popoverStyle}getNubbinClass(){return("left"==this.popoverside?"slds-nubbin--right-":"slds-nubbin--left-")+this.popoverpos}closePopover(e=!1){e?this.self.destroy():this.hidePopoverTimeout=window.setTimeout((()=>this.self.destroy()),500)}}return ObjectModelPopover.ɵfac=function(e){return new(e||ObjectModelPopover)(m.Y36(g.o),m.Y36(Je.e),m.Y36(b.Pu))},ObjectModelPopover.ɵcmp=m.Xpm({type:ObjectModelPopover,selectors:[["object-model-popover"]],viewQuery:function(e,t){if(1&e&&(m.Gf(Wo,7,m.s_b),m.Gf(ea,7,m.s_b)),2&e){let e;m.iGM(e=m.CRH())&&(t.popover=e.first),m.iGM(e=m.CRH())&&(t.relatedContainer=e.first)}},features:[m._Bn([Je.e])],decls:13,vars:7,consts:[["role","dialog",1,"slds-popover","slds-popover_large","slds-popover--panel","slds-is-fixed",2,"transition",".5s","z-index","11000",3,"ngStyle","ngClass","mouseenter","mouseleave"],[1,"slds-button","slds-button_icon","slds-button_icon","slds-button_icon-small","slds-float_right","slds-popover__close",3,"click"],["icon","close"],["popover",""],[1,"slds-popover__header"],[3,"componentset",4,"ngIf"],[4,"ngIf"],[1,"slds-grid","slds-wrap","slds-p-right--large"],["class","slds-p-horizontal--small slds-size--1-of-2 slds-p-bottom--x-small",3,"ngClass",4,"ngFor","ngForOf"],[1,"slds-popover__body","slds-scrollable--y","spice-scrollbar",3,"ngStyle"],["relatedcontainer",""],[3,"componentset"],[1,"slds-p-horizontal--small","slds-size--1-of-2","slds-p-bottom--x-small",3,"ngClass"],[3,"field","fieldconfig","fielddisplayclass"]],template:function(e,t){1&e&&(m.TgZ(0,"div",0),m.NdJ("mouseenter",(function(){return t.onMouseOver()}))("mouseleave",(function(){return t.onMouseOut()})),m.TgZ(1,"button",1),m.NdJ("click",(function(){return t.closePopover(!0)})),m._UZ(2,"system-button-icon",2),m.qZA(),m.TgZ(3,"div",null,3)(5,"div",4),m.YNc(6,ta,1,1,"system-componentset",5),m.YNc(7,sa,1,0,"object-model-popover-header",6),m.TgZ(8,"footer",7),m.YNc(9,na,4,7,"div",8),m.qZA()(),m.TgZ(10,"div",9,10),m._UZ(12,"system-componentset",11),m.qZA()()()),2&e&&(m.Q6J("ngStyle",t.popoverStyle)("ngClass",t.getNubbinClass()),m.xp6(6),m.Q6J("ngIf",t.headercomponentset),m.xp6(1),m.Q6J("ngIf",!t.headercomponentset),m.xp6(2),m.Q6J("ngForOf",t.fields),m.xp6(1),m.Q6J("ngStyle",t.relatedStyle),m.xp6(2),m.Q6J("componentset",t.componentset))},dependencies:[i.mk,i.sg,i.O5,i.PC,Ne.j,x.J,Gi.E,Xo],encapsulation:2}),ObjectModelPopover})();const oa=function(e){return{"slds-hide":e}};function aa(e,t){if(1&e&&(m.TgZ(0,"div",1),m._UZ(1,"field-label",2)(2,"field-container",2),m.qZA()),2&e){const e=m.oxw();m.Q6J("ngClass",m.VKq(3,oa,e.hidden)),m.xp6(1),m.Q6J("fieldname",e.fieldname),m.xp6(1),m.Q6J("fieldname",e.fieldname)}}let da=(()=>{class ObjectModelPopoverField{constructor(e,t){this.model=e,this.view=t,this.componentconfig={}}get hidden(){return this.componentconfig.hideempty&&!this.model.getFieldValue(this.componentconfig.field)}get fieldname(){return this.componentconfig.field?this.componentconfig.field:""}}return ObjectModelPopoverField.ɵfac=function(e){return new(e||ObjectModelPopoverField)(m.Y36(g.o),m.Y36(Je.e))},ObjectModelPopoverField.ɵcmp=m.Xpm({type:ObjectModelPopoverField,selectors:[["ng-component"]],features:[m._Bn([Je.e])],decls:1,vars:1,consts:[["class","slds-p-vertical--xx-small slds-p-horizontal--large",3,"ngClass",4,"ngIf"],[1,"slds-p-vertical--xx-small","slds-p-horizontal--large",3,"ngClass"],[3,"fieldname"]],template:function(e,t){1&e&&m.YNc(0,aa,3,5,"div",0),2&e&&m.Q6J("ngIf",t.fieldname)},dependencies:[i.mk,i.O5,Ti.q,Ne.j],encapsulation:2}),ObjectModelPopoverField})();function ra(e,t){if(1&e&&(m.ynx(0),m.TgZ(1,"dt",5),m._UZ(2,"field-label",6),m.qZA(),m.TgZ(3,"dd",7),m._UZ(4,"field-container",8),m.qZA(),m.BQk()),2&e){const e=t.$implicit;m.xp6(2),m.Q6J("fieldname",e.field)("fieldconfig",e.fieldconfig),m.xp6(2),m.Q6J("field",e.field)("fieldconfig",e.fieldconfig)("fielddisplayclass","slds-truncate")}}let ca=(()=>{class ObjectModelPopoverRelatedItem{constructor(e,t,s,i){this.language=e,this.metadata=t,this.model=s,this.view=i,this.module="",this.item={},this.fields=[],this.view.displayLabels=!1}ngOnInit(){this.model.module=this.module,this.model.id=this.item.id,this.model.setData(this.item)}goDetail(){this.model.goDetail()}}return ObjectModelPopoverRelatedItem.ɵfac=function(e){return new(e||ObjectModelPopoverRelatedItem)(m.Y36(h.d),m.Y36(b.Pu),m.Y36(g.o),m.Y36(Je.e))},ObjectModelPopoverRelatedItem.ɵcmp=m.Xpm({type:ObjectModelPopoverRelatedItem,selectors:[["object-model-popover-related-item"]],inputs:{module:"module",item:"item",fields:"fields"},features:[m._Bn([g.o,Je.e])],decls:6,vars:3,consts:[[1,"slds-m-top_x-small"],[1,"slds-truncate",3,"title"],["href","javascript:void(0);",3,"click"],[1,"slds-list_horizontal","slds-wrap","slds-text-body_small"],[4,"ngFor","ngForOf"],[1,"slds-item_label","slds-text-color_weak","slds-truncate"],[3,"fieldname","fieldconfig"],["title","$500,000",1,"slds-item_detail","slds-text-color_weak","slds-truncate"],[3,"field","fieldconfig","fielddisplayclass"]],template:function(e,t){1&e&&(m.TgZ(0,"dd",0)(1,"p",1)(2,"a",2),m.NdJ("click",(function(){return t.goDetail()})),m._uU(3),m.qZA()(),m.TgZ(4,"dl",3),m.YNc(5,ra,5,5,"ng-container",4),m.qZA()()),2&e&&(m.xp6(1),m.Q6J("title",t.model.displayname),m.xp6(2),m.Oqu(t.model.displayname),m.xp6(2),m.Q6J("ngForOf",t.fields))},dependencies:[i.sg,Ti.q,Ne.j],encapsulation:2}),ObjectModelPopoverRelatedItem})();function ua(e,t){if(1&e&&(m.ynx(0),m._uU(1),m.BQk()),2&e){const e=m.oxw(2);m.xp6(1),m.hij(" (",e.relatedmodels.count,")")}}function ma(e,t){1&e&&(m.TgZ(0,"div",13),m._UZ(1,"system-spinner",14),m.qZA())}function ha(e,t){if(1&e&&m._UZ(0,"object-model-popover-related-item",15),2&e){const e=t.$implicit,s=m.oxw(2);m.Q6J("module",s.relatedmodels.relatedModule)("item",e)("fields",s.listfields)}}function ga(e,t){if(1&e){const e=m.EpF();m.TgZ(0,"dd",16)(1,"a",17),m.NdJ("click",(function(){m.CHM(e);const t=m.oxw(2);return m.KtG(t.showAll())})),m._UZ(2,"system-label",18),m.qZA()()}}function pa(e,t){if(1&e&&(m.TgZ(0,"dl",1)(1,"dt",2)(2,"div",3)(3,"div",4),m._UZ(4,"system-icon",5),m.qZA(),m.TgZ(5,"div",6)(6,"p",7),m._UZ(7,"system-label",8),m.YNc(8,ua,2,1,"ng-container",9),m.qZA()()()(),m.YNc(9,ma,2,0,"div",10),m.YNc(10,ha,1,3,"object-model-popover-related-item",11),m.YNc(11,ga,3,0,"dd",12),m.qZA()),2&e){const e=m.oxw();m.xp6(4),m.Q6J("module",e.relatedmodels.relatedModule),m.xp6(3),m.Q6J("label",e.panelTitle),m.xp6(1),m.Q6J("ngIf",!e.relatedmodels.isloading),m.xp6(1),m.Q6J("ngIf",e.relatedmodels.isloading),m.xp6(1),m.Q6J("ngForOf",e.relatedmodels.items),m.xp6(1),m.Q6J("ngIf",e.canViewAll)}}let fa=(()=>{class ObjectModelPopoverRelated extends ol{constructor(e,t,s,i,n,l){super(e,t,s,i,n),this.language=e,this.metadata=t,this.relatedmodels=s,this.model=i,this.cdref=n,this.router=l}get canViewAll(){return this.relatedmodels.count>0&&this.relatedmodels.count>this.relatedmodels.loaditems}showAll(){this.router.navigate(["/module/"+this.model.module+"/"+this.model.id+"/"+this.relatedmodels.relatedModule+"/"+this.relatedmodels._linkName])}}return ObjectModelPopoverRelated.ɵfac=function(e){return new(e||ObjectModelPopoverRelated)(m.Y36(h.d),m.Y36(b.Pu),m.Y36(Ct.j),m.Y36(g.o),m.Y36(m.sBO),m.Y36(o.F0))},ObjectModelPopoverRelated.ɵcmp=m.Xpm({type:ObjectModelPopoverRelated,selectors:[["object-model-popover-related"]],features:[m._Bn([Ct.j]),m.qOj],decls:1,vars:1,consts:[["class","slds-popover__body-list",4,"ngIf"],[1,"slds-popover__body-list"],[1,"slds-m-bottom_small"],[1,"slds-media","slds-media_center"],[1,"slds-media__figure"],["size","small",3,"module"],[1,"slds-media__body"],[1,"slds-text-heading_small","slds-hyphenate"],[3,"label"],[4,"ngIf"],["class","slds-align_absolute-center",4,"ngIf"],[3,"module","item","fields",4,"ngFor","ngForOf"],["class","slds-m-top_x-small slds-text-align_right",4,"ngIf"],[1,"slds-align_absolute-center"],["size","12"],[3,"module","item","fields"],[1,"slds-m-top_x-small","slds-text-align_right"],["href","javascript:void(0);",3,"click"],["label","LBL_VIEWALL"]],template:function(e,t){1&e&&m.YNc(0,pa,12,6,"dl",0),2&e&&m.Q6J("ngIf",t.aclAccess)},dependencies:[i.sg,i.O5,Z.f,M._,St.W,ca],encapsulation:2}),ObjectModelPopoverRelated})(),ba=(()=>{class ObjectActionDeactivateBeansButton{constructor(e,t,s,i,n,l){this.language=e,this.metadata=t,this.modal=s,this.injector=i,this.modellist=n,this.modalwindow=l,this.saving=!1,this.selectedItems=[]}get disabled(){return!1}get hasSelection(){return this.modellist.getSelectedCount()>1}get hidden(){return!this.hasSelection}execute(){this.saving||(this.selectedItems=this.modellist.getSelectedItems(),this.modal.openModal("ObjectActionDeactivateBeansModal",!0,this.injector).subscribe((e=>{e&&(e.instance.selectedItems=this.selectedItems,e.instance.module=this.modellist.module)})))}}return ObjectActionDeactivateBeansButton.ɵfac=function(e){return new(e||ObjectActionDeactivateBeansButton)(m.Y36(h.d),m.Y36(b.Pu),m.Y36(z.o),m.Y36(m.zs3),m.Y36(v.t),m.Y36(vt.S,8))},ObjectActionDeactivateBeansButton.ɵcmp=m.Xpm({type:ObjectActionDeactivateBeansButton,selectors:[["object-action-deactivate-beans-button"]],decls:2,vars:0,consts:[["label","LBL_DEACTIVATE_BEANS"]],template:function(e,t){1&e&&(m.TgZ(0,"span"),m._UZ(1,"system-label",0),m.qZA())},dependencies:[M._],encapsulation:2}),ObjectActionDeactivateBeansButton})();function _a(e,t){1&e&&(m.TgZ(0,"div",12),m._UZ(1,"system-label",13)(2,"system-button-icon",14),m.qZA()),2&e&&(m.xp6(2),m.Q6J("icon","check"))}function ya(e,t){1&e&&(m.TgZ(0,"div",12),m._UZ(1,"system-label",15)(2,"system-button-icon",14),m.qZA()),2&e&&(m.xp6(2),m.Q6J("icon","close"))}function va(e,t){if(1&e){const e=m.EpF();m.TgZ(0,"system-input-radio",10),m.NdJ("ngModelChange",(function(t){m.CHM(e);const s=m.oxw();return m.KtG(s.value=t)})),m._uU(1),m.YNc(2,_a,3,1,"div",11),m.YNc(3,ya,3,1,"div",11),m.qZA()}if(2&e){const e=t.$implicit,s=m.oxw();m.Q6J("value",e.id)("ngModel",s.value),m.xp6(1),m.hij("",s.fieldname(e)," "),m.xp6(1),m.Q6J("ngIf","deactivated"==e.itemsaved),m.xp6(1),m.Q6J("ngIf","error"==e.itemsaved)}}function xa(e,t){if(1&e){const e=m.EpF();m.TgZ(0,"button",16),m.NdJ("click",(function(){m.CHM(e);const t=m.oxw();return m.KtG(t.closeModal())})),m._UZ(1,"system-label",17),m.qZA()}}function Za(e,t){if(1&e){const e=m.EpF();m.TgZ(0,"button",18),m.NdJ("click",(function(){m.CHM(e);const t=m.oxw();return m.KtG(t.select())})),m._UZ(1,"system-label",19),m.qZA()}}function wa(e,t){if(1&e){const e=m.EpF();m.TgZ(0,"button",18),m.NdJ("click",(function(){m.CHM(e);const t=m.oxw();return m.KtG(t.closeModal())})),m._UZ(1,"system-label",20),m.qZA()}}let Ta=(()=>{class ObjectActionDeactivateBeansModal{constructor(e,t,s){this.language=e,this.model=t,this.metadata=s,this.componentconfig={},this.selectedItems=[],this.module=[],this.showfinish=!1,this.self={},this.value=""}ngOnInit(){this.componentconfig=this.metadata.getComponentConfig("ObjectActionDeactivateBeansModal",this.model.module),this.value=this.selectedItems[0].id}fieldname(e){return e[this.componentconfig.fieldname]}closeModal(){this.self.destroy()}select(){let e=0;for(let t of this.selectedItems)t.id!=this.value?(t.successor_id=this.value,t.is_inactive=1,this.model.reset(),this.model.id=t.id,this.model.initialize(),this.model.module=this.module,this.model.setData(t),this.model.validate()?this.model.save().subscribe((s=>{e++,t.itemsaved="deactivated",e==this.selectedItems.length-1&&(this.showfinish=!0)}),(s=>{e++,t.itemsaved="error",e==this.selectedItems.length-1&&(this.showfinish=!0)})):e++):e++}}return ObjectActionDeactivateBeansModal.ɵfac=function(e){return new(e||ObjectActionDeactivateBeansModal)(m.Y36(h.d),m.Y36(g.o),m.Y36(b.Pu))},ObjectActionDeactivateBeansModal.ɵcmp=m.Xpm({type:ObjectActionDeactivateBeansModal,selectors:[["ng-component"]],inputs:{selectedItems:"selectedItems",module:"module"},features:[m._Bn([g.o])],decls:12,vars:4,consts:[["size","x-small"],[3,"close"],["label","LBL_SELECT_ACTIVE"],["margin","none"],[1,"slds-m-left_x-small","slds-m-vertical_large"],[1,"slds-form-element"],[1,"slds-form-element__control"],["name","module",3,"value","ngModel","ngModelChange",4,"ngFor","ngForOf"],["class","slds-button slds-button--neutral",3,"click",4,"ngIf"],["class","slds-button slds-button--brand",3,"click",4,"ngIf"],["name","module",3,"value","ngModel","ngModelChange"],["class","slds-float--right slds-m-right_small",4,"ngIf"],[1,"slds-float--right","slds-m-right_small"],["label","LBL_DEACTIVATED"],[1,"slds-m-left_small",3,"icon"],["label","LBL_ERROR"],[1,"slds-button","slds-button--neutral",3,"click"],["label","LBL_CANCEL"],[1,"slds-button","slds-button--brand",3,"click"],["label","LBL_EXECUTE"],["label","LBL_FINISH"]],template:function(e,t){1&e&&(m.TgZ(0,"system-modal",0)(1,"system-modal-header",1),m.NdJ("close",(function(){return t.closeModal()})),m._UZ(2,"system-label",2),m.qZA(),m.TgZ(3,"system-modal-content",3)(4,"div",4)(5,"div",5)(6,"div",6),m.YNc(7,va,4,5,"system-input-radio",7),m.qZA()()()(),m.TgZ(8,"system-modal-footer"),m.YNc(9,xa,2,0,"button",8),m.YNc(10,Za,2,0,"button",9),m.YNc(11,wa,2,0,"button",9),m.qZA()()),2&e&&(m.xp6(7),m.Q6J("ngForOf",t.selectedItems),m.xp6(2),m.Q6J("ngIf",!t.showfinish),m.xp6(1),m.Q6J("ngIf",!t.showfinish),m.xp6(1),m.Q6J("ngIf",t.showfinish))},dependencies:[i.sg,i.O5,l.JJ,l.On,x.J,B.A,M._,Fe.j,qe.x,Ee.p,Ye.y],encapsulation:2}),ObjectActionDeactivateBeansModal})();var Ca=s(2646),Aa=s(4021);function ka(e,t){if(1&e){const e=m.EpF();m.TgZ(0,"div",13)(1,"input",14,15),m.NdJ("keyup.enter",(function(){m.CHM(e);const t=m.MAs(2),s=m.oxw();return m.KtG(s.addChecklist(t.value))})),m.qZA(),m.TgZ(3,"button",16),m.NdJ("click",(function(){m.CHM(e);const t=m.MAs(2),s=m.oxw();return m.KtG(s.addChecklist(t.value))})),m._UZ(4,"system-button-icon",17),m.qZA(),m.TgZ(5,"button",18),m.NdJ("click",(function(){m.CHM(e);const t=m.oxw();return m.KtG(t.setShowAddChecklist(!1))})),m._UZ(6,"system-button-icon",19),m.qZA()()}if(2&e){const e=m.MAs(2);m.xp6(3),m.Q6J("disabled",!e.value)}}function La(e,t){if(1&e){const e=m.EpF();m.TgZ(0,"div",38)(1,"span",39),m.NdJ("click",(function(t){m.CHM(e);const s=m.oxw().$implicit;return m.oxw(2).setCurrentEditingChecklist(s),m.KtG(t.stopPropagation())})),m._uU(2),m.qZA()()}if(2&e){const e=m.oxw().$implicit;m.xp6(1),m.Q6J("system-title",e.name),m.xp6(1),m.Oqu(e.name)}}function Ma(e,t){if(1&e){const e=m.EpF();m.TgZ(0,"input",40),m.NdJ("click",(function(e){return e.stopPropagation()}))("ngModelChange",(function(t){m.CHM(e);const s=m.oxw().$implicit,i=m.oxw(2);return m.KtG(i.setChecklistName(t,s))}))("keyup.enter",(function(){m.CHM(e);const t=m.oxw().$implicit,s=m.oxw(2);return m.KtG(s.save(t))}))("blur",(function(){m.CHM(e);const t=m.oxw().$implicit,s=m.oxw(2);return m.KtG(s.save(t))})),m.qZA()}if(2&e){const e=m.oxw().$implicit;m.Q6J("ngModel",e.name)}}function Sa(e,t){if(1&e){const e=m.EpF();m.TgZ(0,"button",41),m.NdJ("click",(function(){m.CHM(e);const t=m.oxw().$implicit,s=m.oxw(2);return m.KtG(s.setShowAddButton(t,!1))})),m._UZ(1,"system-button-icon",9),m.qZA()}if(2&e){const e=m.oxw().$implicit,t=m.oxw(2);m.ekj("spice-hover-child",e!=t.activeChecklist)}}function Ia(e,t){if(1&e){const e=m.EpF();m.TgZ(0,"div",51)(1,"input",52),m.NdJ("ngModelChange",(function(t){m.CHM(e);const s=m.oxw().$implicit,i=m.oxw(3);return m.KtG(i.setItemTextValue(t,s))}))("keyup.enter",(function(){m.CHM(e);const t=m.oxw().$implicit,s=m.oxw(3);return m.KtG(s.save(t))}))("blur",(function(t){m.CHM(e),m.oxw();const s=m.MAs(1),i=m.oxw(3);return m.KtG(i.onItemBlur(t,s))})),m.qZA(),m.TgZ(2,"button",53),m.NdJ("click",(function(t){m.CHM(e);const s=m.oxw().$implicit;return m.oxw(3).save(s),m.KtG(t.stopPropagation())})),m._UZ(3,"system-button-icon",17),m.qZA(),m.TgZ(4,"button",54),m.NdJ("click",(function(t){m.CHM(e);const s=m.oxw().$implicit,i=m.oxw(3);return m.KtG(i.cancelItemChanges(s,t))})),m._UZ(5,"system-button-icon",19),m.qZA()()}if(2&e){const e=m.oxw().$implicit;m.xp6(1),m.Q6J("ngModel",e.text),m.xp6(1),m.Q6J("disabled",!e.isChanged)}}function Oa(e,t){if(1&e&&(m.TgZ(0,"div",55),m._uU(1),m.qZA()),2&e){const e=m.oxw().$implicit;m.Udp("text-decoration",e.isCompleted?"line-through":"initial"),m.Q6J("system-title",e.text),m.xp6(1),m.hij(" ",e.text," ")}}function Ja(e,t){if(1&e){const e=m.EpF();m.TgZ(0,"div",56),m.NdJ("click",(function(){m.CHM(e);const t=m.oxw().$implicit,s=m.oxw(3);return m.KtG(s.setCurrentEditingItem(t))})),m._UZ(1,"system-label",57),m.qZA()}}function Na(e,t){if(1&e){const e=m.EpF();m.TgZ(0,"div",42,43)(2,"div",44),m.NdJ("click",(function(t){const s=m.CHM(e).$implicit;return m.oxw(3).setCurrentEditingItem(s),m.KtG(t.stopPropagation())})),m.TgZ(3,"div",25),m._UZ(4,"system-utility-icon",26),m.qZA(),m.TgZ(5,"system-checkbox",45),m.NdJ("ngModelChange",(function(t){const s=m.CHM(e).$implicit;return m.KtG(s.isCompleted=t)}))("ngModelChange",(function(){const t=m.CHM(e).$implicit,s=m.oxw(3);return m.KtG(s.save(t))})),m.qZA(),m.YNc(6,Ia,6,2,"div",46),m.YNc(7,Oa,2,4,"ng-template",null,47,m.W1O),m.TgZ(9,"div",48)(10,"button",49),m.NdJ("click",(function(){const t=m.CHM(e).$implicit,s=m.oxw().$implicit,i=m.oxw(2);return m.KtG(i.deleteChecklistItem(t,s))})),m._UZ(11,"system-button-icon",31),m.qZA()()(),m.YNc(12,Ja,2,0,"div",50),m.qZA()}if(2&e){const e=t.$implicit,s=m.MAs(8),i=m.oxw().$implicit,n=m.oxw(2);m.ekj("slds-hide",!i.showCompleted&&e.isCompleted)("slds-theme--warning",n.currentEditingItem!=e&&e.isChanged),m.xp6(2),m.Q6J("cdkDragData",e),m.xp6(2),m.ekj("spice-hover-child",e!=n.currentEditingItem),m.xp6(1),m.Q6J("ngModel",e.isCompleted),m.xp6(1),m.Q6J("ngIf",e==n.currentEditingItem)("ngIfElse",s),m.xp6(4),m.ekj("spice-hover-child",e!=n.currentEditingItem),m.xp6(2),m.Q6J("ngIf",n.currentEditingItem!=e&&e.isChanged)}}function Fa(e,t){if(1&e){const e=m.EpF();m.TgZ(0,"div",58)(1,"div",59,60)(3,"input",61,62),m.NdJ("keyup.enter",(function(){m.CHM(e);const t=m.MAs(4),s=m.oxw().$implicit,i=m.oxw(2);return m.KtG(i.addChecklistItem(s,t))}))("blur",(function(t){m.CHM(e);const s=m.MAs(2),i=m.MAs(4),n=m.oxw().$implicit,l=m.oxw(2);return m.KtG(l.onChecklistBlur(n,t,s,i))})),m.qZA(),m.TgZ(5,"button",63),m.NdJ("click",(function(){m.CHM(e);const t=m.MAs(4),s=m.oxw().$implicit,i=m.oxw(2);return m.KtG(i.addChecklistItem(s,t))})),m._UZ(6,"system-button-icon",64),m.qZA(),m.TgZ(7,"button",65),m.NdJ("click",(function(){m.CHM(e);const t=m.oxw().$implicit,s=m.oxw(2);return m.KtG(s.setShowAddButton(t,!0))})),m._UZ(8,"system-button-icon",66),m.qZA()()()}if(2&e){const e=m.MAs(4);m.xp6(5),m.Q6J("disabled",!e.value)}}function qa(e,t){if(1&e){const e=m.EpF();m.TgZ(0,"div",23),m.NdJ("click",(function(){const t=m.CHM(e).$implicit,s=m.oxw(2);return m.KtG(s.setActiveChecklist(t))})),m.TgZ(1,"div",24)(2,"div",25),m._UZ(3,"system-utility-icon",26),m.qZA(),m.YNc(4,La,3,2,"div",27),m.YNc(5,Ma,1,1,"input",28),m.YNc(6,Sa,2,2,"button",29),m.TgZ(7,"button",30),m.NdJ("click",(function(){const t=m.CHM(e).$implicit,s=m.oxw(2);return m.KtG(s.deleteChecklist(t))})),m._UZ(8,"system-button-icon",31),m.qZA(),m.TgZ(9,"button",32),m.NdJ("click",(function(){const t=m.CHM(e).$implicit,s=m.oxw(2);return m.KtG(s.toggleShowCompleted(t))})),m._UZ(10,"system-button-icon",33)(11,"system-label",34),m.qZA()(),m.TgZ(12,"div",35),m.NdJ("cdkDropListDropped",(function(t){m.CHM(e);const s=m.oxw(2);return m.KtG(s.onDrop(t))})),m.YNc(13,Na,13,13,"div",36),m.qZA(),m.YNc(14,Fa,9,1,"div",37),m.qZA()}if(2&e){const e=t.$implicit,s=m.oxw(2);m.Q6J("cdkDragData",e),m.xp6(3),m.ekj("spice-hover-child",e!=s.activeChecklist),m.xp6(1),m.Q6J("ngIf",s.currentEditingChecklist!=e),m.xp6(1),m.Q6J("ngIf",s.currentEditingChecklist==e),m.xp6(1),m.Q6J("ngIf",e.showAddButton),m.xp6(1),m.ekj("spice-hover-child",e!=s.activeChecklist),m.xp6(2),m.ekj("spice-hover-child",e!=s.activeChecklist),m.Q6J("system-title",e.showCompleted?"LBL_HIDE_COMPLETED":"LBL_SHOW_COMPLETED"),m.xp6(2),m.Q6J("label",e.showCompleted?"LBL_HIDE_COMPLETED":"LBL_SHOW_COMPLETED"),m.xp6(1),m.Q6J("cdkDropListData",e.items),m.xp6(1),m.Q6J("ngForOf",e.items),m.xp6(1),m.Q6J("ngIf",!e.showAddButton)}}function Ea(e,t){if(1&e){const e=m.EpF();m.TgZ(0,"div",20)(1,"div",21),m.NdJ("cdkDropListDropped",(function(t){m.CHM(e);const s=m.oxw();return m.KtG(s.onDrop(t))})),m.YNc(2,qa,15,15,"div",22),m.qZA()()}if(2&e){const e=m.oxw();m.Q6J("system-overlay-loading-spinner",e.model.isLoading||e.isSaving),m.xp6(1),m.Q6J("cdkDropListData",e.checklists),m.xp6(1),m.Q6J("ngForOf",e.checklists)}}function Ya(e,t){if(1&e&&(m.TgZ(0,"div",67)(1,"system-illustration-no-data"),m._UZ(2,"system-label",68),m.qZA()()),2&e){const e=m.oxw();m.Q6J("system-overlay-loading-spinner",e.model.isLoading)}}let Qa=(()=>{class ObjectChecklists{constructor(e,t,s){this.model=e,this.language=t,this.metadata=s,this.isAddingChecklist=!1,this.isSaving=!1,this.checklists=[],this.subscriptions=new R.w0,this.fieldName="checklists",this.panelExpanded=!0}ngOnInit(){this.setFieldName(),this.loadData()}ngOnDestroy(){this.subscriptions.unsubscribe()}addChecklist(e){if(this.checklists||(this.checklists=[]),!e)return;const t={id:this.model.generateGuid(),name:e,showCompleted:!0,items:[]};this.checklists=[t,...this.checklists],this.isAddingChecklist=!1,this.setActiveChecklist(t),this.save(t)}addChecklistItem(e,t){if(!t.value)return;const s={id:this.model.generateGuid(),isCompleted:!1,text:t.value,isChanged:!0};e.items.push(s),t.value="",this.save(s)}deleteChecklist(e){this.checklists=this.checklists.filter((t=>t!=e)),this.save(e)}deleteChecklistItem(e,t){t.items=t.items.filter((t=>t!=e)),e.isChanged=!0,this.save(e)}setCurrentEditingItem(e){e.isChanged||(e.textBackup=e.text),this.currentEditingItem=e}onItemBlur(e,t){t.contains(e.relatedTarget)||(this.currentEditingItem=void 0)}onChecklistBlur(e,t,s,i){s.contains(t.relatedTarget)||!s.contains(t.relatedTarget)&&i.value||(e.showAddButton=!0)}setShowAddChecklist(e){this.isAddingChecklist=e}setCurrentEditingChecklist(e){this.currentEditingChecklist=e}save(e){if("isChanged"in e&&!1===e?.isChanged||"items"in e&&!e.name)return;this.isSaving=!0,"items"in e&&this.setCurrentEditingChecklist(void 0);const t=this.checklists.map((t=>{const s={...t};return s.items=s.items.map((t=>{const s={...t};return e!=t&&s.isChanged&&(s.text=t.textBackup),delete s.isChanged,delete s.textBackup,s})),s}));"isChanged"in e&&delete e.isChanged,"textBackup"in e&&delete e.textBackup,this.model.backend.save(this.model.module,this.model.id,{[this.fieldName]:t}).subscribe((()=>this.isSaving=!1)),this.currentEditingItem=void 0}cancelItemChanges(e,t){t.stopPropagation(),e.text=e.textBackup,e.isChanged=!1,this.currentEditingItem=void 0}setActiveChecklist(e){e!=this.activeChecklist&&(this.activeChecklist&&(this.activeChecklist.showAddButton=!0),e&&this.setShowAddButton(e,!1),this.activeChecklist=e)}setShowAddButton(e,t){e.showAddButton=t}setItemTextValue(e,t){t.isChanged=e!=t.text,t.text=e}setChecklistName(e,t){t.name=e}toggleShowCompleted(e){e.showCompleted=!e.showCompleted,this.currentEditingItem=void 0,this.save(e)}setFieldName(){let e=this.metadata.getComponentConfig("ObjectChecklists",this.model.module)?.fieldName;e&&(this.fieldName=e)}loadData(){this.model.backend.get(this.model.module,this.model.id).subscribe((e=>{Array.isArray(e?.[this.fieldName])&&(this.checklists=e[this.fieldName])}))}onDrop(e){e.previousContainer===e.container?(0,n.bA)(e.container.data,e.container.data.indexOf(e.item.data),e.currentIndex):(0,n.EA)(e.previousContainer.data,e.container.data,e.previousContainer.data.indexOf(e.item.data),e.currentIndex),e.item.data.isChanged=!0,this.save(e.item.data)}toggleExpansion(){this.panelExpanded=!this.panelExpanded}}return ObjectChecklists.ɵfac=function(e){return new(e||ObjectChecklists)(m.Y36(g.o),m.Y36(h.d),m.Y36(b.Pu))},ObjectChecklists.ɵcmp=m.Xpm({type:ObjectChecklists,selectors:[["object-checklists"]],decls:14,vars:10,consts:[[1,"slds-section"],[1,"slds-section__title","slds-m-bottom--small"],["aria-expanded","true",1,"slds-section__title-action","slds-grid",3,"click"],["icon","switch","size","x-small","addclasses","slds-section__title-action-icon slds-button__icon slds-button__icon_left"],[1,"slds-grid","slds-grid--vertical-align-center","slds-grow"],[1,"slds-truncate"],["label","LBL_CHECKLISTS"],[1,"slds-grid","slds-grid--align-end",3,"click"],["system-title","LBL_ADD_CHECKLIST",1,"slds-button","slds-button--icon","slds-button--icon-border","slds-button","slds-align--absolute-center",2,"height","1.4rem","width","1.6rem",3,"click"],["icon","add","size","medium"],["class","slds-grid slds-grid--vertical-align-center",4,"ngIf"],["class","slds-form-element__control objectchecklistdragboundary",3,"system-overlay-loading-spinner",4,"ngIf"],["class","slds-box slds-align--absolute-center","style","min-height: 250px",3,"system-overlay-loading-spinner",4,"ngIf"],[1,"slds-grid","slds-grid--vertical-align-center"],["system-autofocus","","type","text",1,"slds-input","slds-grow","slds-truncate","slds-m-right--xx-small",2,"min-height","0","height","1.6rem",3,"keyup.enter"],["addChecklistInput",""],["system-title","LBL_CHECK",1,"slds-button","slds-button--icon","slds-button--icon-border-filled",2,"height","1.4rem","width","1.6rem",3,"disabled","click"],["icon","check"],["system-title","LBL_CANCEL",1,"slds-button","slds-button--icon","slds-button--icon-border-filled",2,"height","1.4rem","width","1.6rem",3,"click"],["icon","close","size","medium"],[1,"slds-form-element__control","objectchecklistdragboundary",3,"system-overlay-loading-spinner"],["cdkDropList","","cdkDropListLockAxis","y","cdkDropListGroup","",3,"cdkDropListData","cdkDropListDropped"],["cdkDrag","","cdkDragBoundary",".objectchecklistdragboundary","class","slds-box slds-p-around--none slds-m-bottom--small slds-drag--preview",3,"cdkDragData","click",4,"ngFor","ngForOf"],["cdkDrag","","cdkDragBoundary",".objectchecklistdragboundary",1,"slds-box","slds-p-around--none","slds-m-bottom--small","slds-drag--preview",3,"cdkDragData","click"],[1,"slds-grid","slds-grid--vertical-align-center","slds-m-bottom--large","slds-border--bottom","slds-p-around--small","slds-theme--shade","spice-hover-display-children",2,"min-height","58px"],[2,"min-width","32px"],["cdkDragHandle","","icon","drag_and_drop","size","x-small",1,"slds-p-horizontal--x-small",2,"cursor","move"],["class","slds-grow slds-truncate",4,"ngIf"],["system-autofocus","","type","text","class","slds-input slds-m-right--xx-small",3,"ngModel","click","ngModelChange","keyup.enter","blur",4,"ngIf"],["system-title","LBL_ADD_ITEM","class","slds-button slds-button--icon slds-button--icon-border-filled slds-button slds-align--absolute-center",3,"spice-hover-child","click",4,"ngIf"],["system-title","LBL_DELETE",1,"slds-button","slds-button--icon","slds-button--icon-border-filled",3,"click"],["icon","delete","size","medium"],[1,"slds-button","slds-button--neutral",3,"system-title","click"],["icon","toggle","size","medium","addclasses","slds-button__icon_left"],[1,"slds-truncate",3,"label"],["cdkDropList","","cdkDropListLockAxis","y",2,"min-height","20px",3,"cdkDropListData","cdkDropListDropped"],["class","slds-p-vertical--xx-small spice-hover-display-children",3,"slds-hide","slds-theme--warning",4,"ngFor","ngForOf"],["class","slds-box slds-m-top--large slds-m-around--small",4,"ngIf"],[1,"slds-grow","slds-truncate"],[2,"min-width","20px",3,"system-title","click"],["system-autofocus","","type","text",1,"slds-input","slds-m-right--xx-small",3,"ngModel","click","ngModelChange","keyup.enter","blur"],["system-title","LBL_ADD_ITEM",1,"slds-button","slds-button--icon","slds-button--icon-border-filled","slds-button","slds-align--absolute-center",3,"click"],[1,"slds-p-vertical--xx-small","spice-hover-display-children"],["itemContainer",""],["cdkDrag","","cdkDragBoundary",".objectchecklistdragboundary",1,"slds-grid","slds-grid--vertical-align-center","slds-drag--preview","slds-p-right--x-small",3,"cdkDragData","click"],[3,"ngModel","ngModelChange"],["class","slds-grid slds-grow slds-p-right--xx-small",4,"ngIf","ngIfElse"],["itemTextContainer",""],[2,"width","32px","height","32px"],[1,"slds-button","slds-button--icon","slds-button--icon-border-filled",3,"click"],["class","slds-p-horizontal--small slds-p-bottom--xx-small",3,"click",4,"ngIf"],[1,"slds-grid","slds-grow","slds-p-right--xx-small"],["type","text","system-autofocus","",1,"slds-input","slds-m-right--xx-small",3,"ngModel","ngModelChange","keyup.enter","blur"],["system-title","LBL_CHECK",1,"slds-button","slds-button--icon","slds-button--icon-border-filled",3,"disabled","click"],["system-title","LBL_CANCEL",1,"slds-button","slds-button--icon","slds-button--icon-border-filled",3,"click"],[1,"slds-grow","slds-p-right--xx-small","slds-truncate",3,"system-title"],[1,"slds-p-horizontal--small","slds-p-bottom--xx-small",3,"click"],["label","MSG_HAS_UNSAVED"],[1,"slds-box","slds-m-top--large","slds-m-around--small"],[1,"slds-grid"],["addItemContainer",""],["system-autofocus","","type","text",1,"slds-input","slds-m-right--x-small",3,"keyup.enter","blur"],["addItemInput",""],["system-title","LBL_SAVE",1,"slds-button","slds-button--icon","slds-button--icon-border-filled","slds-button","slds-align--absolute-center",3,"disabled","click"],["icon","check","size","medium"],["system-title","LBL_CANCEL",1,"slds-button","slds-button--icon","slds-button--icon-border-filled","slds-button","slds-align--absolute-center",3,"click"],["icon","clear","size","medium"],[1,"slds-box","slds-align--absolute-center",2,"min-height","250px",3,"system-overlay-loading-spinner"],["label","LBL_NO_CHECKLISTS"]],template:function(e,t){1&e&&(m.TgZ(0,"div",0)(1,"div",1)(2,"div",2),m.NdJ("click",(function(){return t.toggleExpansion()})),m._UZ(3,"system-utility-icon",3),m.TgZ(4,"div",4)(5,"span",5),m._UZ(6,"system-label",6),m.qZA()(),m.TgZ(7,"div",7),m.NdJ("click",(function(e){return e.stopPropagation()})),m.TgZ(8,"button",8),m.NdJ("click",(function(){return t.setShowAddChecklist(!0)})),m._UZ(9,"system-button-icon",9),m.qZA(),m.YNc(10,ka,7,1,"div",10),m.qZA()()(),m.TgZ(11,"div"),m.YNc(12,Ea,3,3,"div",11),m.YNc(13,Ya,3,1,"div",12),m.qZA()()),2&e&&(m.ekj("slds-is-open",t.panelExpanded),m.xp6(8),m.ekj("slds-hide",t.isAddingChecklist),m.xp6(2),m.Q6J("ngIf",t.isAddingChecklist),m.xp6(1),m.Udp("display",t.panelExpanded?"block":"none"),m.Q6J("@tabAnimation",t.panelExpanded),m.xp6(1),m.Q6J("ngIf",t.checklists.length>0),m.xp6(1),m.Q6J("ngIf",0==t.checklists.length))},dependencies:[i.sg,i.O5,n.Wj,n.Fd,n.Zt,n.Bh,l.Fj,l.JJ,l.On,x.J,ri.U,Ca.t,M._,w.r,T.m,Aa._,C.S],encapsulation:2,data:{animation:[(0,f.X$)("tabAnimation",[(0,f.SB)("true",(0,f.oB)({height:"*",opacity:1})),(0,f.SB)("false",(0,f.oB)({height:"0px",opacity:0})),(0,f.eR)("true => false",[(0,f.oB)({overflow:"hidden"}),(0,f.jt)(".5s")]),(0,f.eR)("false => true",[(0,f.jt)(".5s"),(0,f.oB)({overflow:"inherit"})])])]}}),ObjectChecklists})(),Ua=(()=>{class timeline{constructor(e,t,s,i,n){this.modelutilities=e,this.backend=t,this.metadata=s,this.broadcast=i,this.model=n,this.smartView=!1,this.smartFontSize=!1,this.records=[],this.checking=!1,this.loading=!1,this.loadingMore=!1,this.startDate=null,this.timeRangeStart=new moment,this.timelineModules=[],this.onlyAudits=!1,this.filters={searchterm:"",objectfilters:["auditLog","Modules"],own:""},this.searchTerm="",this.auditLogEnabled=!1,this.initial=!0,this.totalModuleRecords=0,this.loadedAuditRecords=0,this.totalAuditRecords=0,this.loadedModuleRecords=0,this.moduleSearch=!0,this.auditSearch=!0,this.broadcast.message$.subscribe((e=>this.handleMessage(e)))}get rangeStart(){return console.log(this.timeRangeStart.format()),this.timeRangeStart.format()}get getModuleSearch(){return this.totalModuleRecords!==this.loadedModuleRecords}get getAuditSearch(){return this.totalAuditRecords!==this.loadedAuditRecords}get totalRecords(){return this.totalAuditRecords+this.totalModuleRecords}reload(e=!1,t=""){this.initial=!0,this.startDate=this.rangeStart,this.loadedModuleRecords=0,this.loadedAuditRecords=0,this.totalAuditRecords=0,this.totalModuleRecords=0,this.moduleSearch=!0,this.auditSearch=!0,e||(this.records=[]),this.getTimelineData(e,t)}getTimelineData(e=!1,t=""){e||(this.loading=!0);let s={endDate:t,startDate:this.startDate,searchTerm:this.filters.searchterm,moduleSearch:this.moduleSearch,auditSearch:this.auditSearch,own:this.filters.own,objects:JSON.stringify(this.filters.objectfilters),timeRangeStart:this.rangeStart};console.log(s),this.backend.postRequest("module/Timeline/"+this.parent.module+"/"+this.parent.id,{},s).subscribe((t=>{console.log(t);for(let e of t.records)e.hasOwnProperty("module")&&(e.data=this.modelutilities.backendModel2spice(e.module,e.data));this.getBody(t,this.initial),this.addRecords(t.records,e),this.loading=!1}))}loadMore(){this.loadingMore=!0;let e={endDate:"",startDate:this.startDate,searchTerm:this.filters.searchterm,moduleSearch:this.getModuleSearch,auditSearch:this.getAuditSearch,own:this.filters.own,objects:JSON.stringify(this.filters.objectfilters),timeRangeStart:this.rangeStart};this.backend.postRequest("module/Timeline/"+this.parent.module+"/"+this.parent.id,{},e).subscribe((e=>{console.log(e);for(let t of e.records)t.data=this.modelutilities.backendModel2spice(t.module,t.data);this.getBody(e,this.initial),this.addRecords(e.records),this.loadingMore=!1}))}setRecord(e){if(!e.hasOwnProperty("data"))return this.recordModule=this.parent.module,this.recordId=this.parent.id,void(this.recordData=e);this.recordModule=e.hasOwnProperty("module")?e.module:"Audit",this.recordId=e.id,this.recordData=e.hasOwnProperty("module")?e.data:e}clearRecord(){this.recordModule="",this.recordId="",this.recordData=""}canLoadMore(){return!(this.loading||this.loadingMore||this.totalAuditRecords===this.loadedAuditRecords&&this.totalModuleRecords===this.loadedModuleRecords||!this.moduleSearch&&!this.auditSearch)}handleMessage(e){let t=e.messagetype.split(".");if("model"===t[0])switch(t[1]){case"merge":this.reload(!0,this.startDate),console.log(1);break;case"save":this.reload(!0,this.startDate),console.log(2);break;case"delete":console.log(3);let t=!1;this.timelineModules.indexOf(e.messagedata.module)>=0&&this.records.some(((s,i)=>{if(s.hasOwnProperty("date")&&(s.module,e.messagedata.module,s.id===e.messagedata.id))return this.records.splice(i,1),this.reload(!0,this.startDate),t=!0,!0}))}}addRecords(e,t=!1){if(this.totalAuditRecords===this.loadedAuditRecords&&this.totalModuleRecords===this.loadedModuleRecords&&""===this.searchTerm&&""===this.filters.own&&this.filters.objectfilters.indexOf("Modules")>=0&&this.timeRangeStart.isAfter(this.parent.getField("date_entered"))){let t=this.parent.data;0!==e.length&&t.date_entered.format("YYYY-MM")!==e.slice(-1)[0].date.substr(0,7)&&(t.divider=t.date_entered.format("YYYY-MM")),e.push(t)}this.records=t?e:this.records.concat(e)}getBody(e,t){t&&(this.totalModuleRecords=e.counts.totalModules,this.totalAuditRecords=e.counts.totalAudits,this.timelineModules=e.timelineModules,this.auditLogEnabled=!1,e.timelineModules.indexOf("auditLog")>=0&&(this.timelineModules.splice(e.timelineModules.indexOf("auditLog"),1),this.auditLogEnabled=!0),this.initial=!1),this.startDate=e.endDate,this.loadedModuleRecords+=e.counts.modulesTook,this.loadedAuditRecords+=e.counts.auditsTook,this.auditSearch=e.auditSearch,this.moduleSearch=e.moduleSearch}}return timeline.ɵfac=function(e){return new(e||timeline)(m.LFG(Fl.A),m.LFG(X.y),m.LFG(b.Pu),m.LFG(ve.f),m.LFG(g.o))},timeline.ɵprov=m.Yz7({token:timeline,factory:timeline.ɵfac}),timeline})();function Da(e,t){if(1&e&&(m.TgZ(0,"div",18)(1,"p"),m._uU(2),m.qZA()()),2&e){const e=m.oxw();m.xp6(2),m.Oqu(e.date)}}function ja(e,t){1&e&&m._UZ(0,"div",19)}function Ra(e,t){if(1&e){const e=m.EpF();m.TgZ(0,"div",20)(1,"button",21),m.NdJ("click",(function(){m.CHM(e);const t=m.oxw();return m.KtG(t.openModal())})),m._UZ(2,"system-button-icon",22),m.qZA()()}}function Ba(e,t){if(1&e){const e=m.EpF();m.TgZ(0,"button",21),m.NdJ("click",(function(){m.CHM(e);const t=m.oxw();return m.KtG(t.openModal())})),m._UZ(1,"system-button-icon",22),m.qZA()}}function Ga(e,t){1&e&&m._UZ(0,"div",23)}function Pa(e,t){if(1&e&&(m.TgZ(0,"div",18)(1,"p"),m._uU(2),m.qZA()()),2&e){const e=m.oxw();m.xp6(2),m.Oqu(e.date)}}const Ha=function(e){return{"slds-grid--align-spread":e}},za=function(e,t){return{"slds-text-heading--medium":e,"slds-text-heading--small":t}};let Va=(()=>{class ObjectTimelineItemAudit{constructor(e,t,s,i,n,l,o){this.timeline=e,this.model=t,this.language=s,this.metadata=i,this.userpreferences=n,this.modal=l,this.ViewContainerRef=o,this.date=""}get fieldCount(){return this.auditCount>1?this.auditCount+" changes":this.auditCount+" change"}get user_name(){let e=this.record.user_name;return e.charAt(0).toUpperCase()+e.substring(1)}get description(){let e="";for(let t of this.record.data)e+=this.record.data.length>1?this.language.getFieldDisplayName(this.model.module,t.field_name)+", ":this.language.getFieldDisplayName(this.model.module,t.field_name);return e}get module(){return this.model.module.slice(0,-1)}ngOnInit(){this.side?this.itemside={"slds-m-right--xx-small":!0,"slds-grid--align-end":!0}:this.itemside={"slds-m-left--xx-small":!0},this.calculateDate(),this.auditCount=this.record.data.length}openModal(){this.modal.openModal("ObjectTimelineAuditlogModal",!0,this.ViewContainerRef.injector).subscribe((e=>{e.instance.auditLog=this.record}))}calculateDate(){const e=moment.utc(this.record.date),t=moment.utc(e.format("YYYY M D")).isSame((new moment).format("YYYY M D")),s=e.isSame(new moment,"year");this.date=t?e.format(this.userpreferences.getTimeFormat()):s?e.format("MMM D"):e.format(this.userpreferences.getDateFormat())}}return ObjectTimelineItemAudit.ɵfac=function(e){return new(e||ObjectTimelineItemAudit)(m.Y36(Ua),m.Y36(g.o),m.Y36(h.d),m.Y36(b.Pu),m.Y36(L.z),m.Y36(z.o),m.Y36(m.s_b))},ObjectTimelineItemAudit.ɵcmp=m.Xpm({type:ObjectTimelineItemAudit,selectors:[["object-timeline-item-audit"]],inputs:{record:"record",side:"side"},decls:23,vars:19,consts:[[1,"slds-grid",3,"ngClass"],["style","width: 70px","class","slds-align--absolute-center slds-m-horizontal--none",4,"ngIf"],["class","objecttimeline-item-nubbin-right slds-align--absolute-center",4,"ngIf"],[1,"objecttimeline-item","slds-m-vertical--medium","slds-height_full",3,"click"],[1,"slds-popover__body","slds-grid",2,"height","90px",3,"ngClass"],[1,"slds-grid","slds-grid--vertical","slds-grid--vertical-align-center",2,"width","32px"],[1,"slds-m-horizontal--xx-small",2,"width","32px"],["icon","record_update"],["class","slds-height_full slds-align--absolute-center",4,"ngIf"],[1,"slds-grid","slds-grid--align-spread",2,"width","calc(100% - 32px)"],[1,"slds-grid--vertical","slds-size--1-of-1","slds-p-left--small"],[1,"slds-grid","slds-grid--align-spread","slds-size--1-of-1",2,"min-height","32px"],[1,"slds-popover__header","slds-p-around--none",2,"border","0"],[3,"ngClass"],["system-model-popover","",3,"module","id"],["class","slds-button slds-button--icon-border-filled slds-p-horizontal--medium slds-button--icon slds-button--icon-small",3,"click",4,"ngIf"],[1,"slds-truncate","slds-p-top--xxx-small",2,"width","calc(100% - 12px)"],["class","objecttimeline-item-nubbin-left slds-align--absolute-center",4,"ngIf"],[1,"slds-align--absolute-center","slds-m-horizontal--none",2,"width","70px"],[1,"objecttimeline-item-nubbin-right","slds-align--absolute-center"],[1,"slds-height_full","slds-align--absolute-center"],[1,"slds-button","slds-button--icon-border-filled","slds-p-horizontal--medium","slds-button--icon","slds-button--icon-small",3,"click"],["icon","search"],[1,"objecttimeline-item-nubbin-left","slds-align--absolute-center"]],template:function(e,t){1&e&&(m.TgZ(0,"div",0),m.YNc(1,Da,3,1,"div",1),m.YNc(2,ja,1,0,"div",2),m.TgZ(3,"section",3),m.NdJ("click",(function(){return t.timeline.setRecord(t.record)})),m.TgZ(4,"div",4)(5,"div",5)(6,"div",6),m._UZ(7,"system-icon",7),m.qZA(),m.YNc(8,Ra,3,0,"div",8),m.qZA(),m.TgZ(9,"div",9)(10,"div",10)(11,"div",11)(12,"header",12)(13,"h2",13)(14,"span",14),m._uU(15),m.qZA(),m._uU(16),m.qZA()(),m.YNc(17,Ba,2,0,"button",15),m.qZA(),m.TgZ(18,"div",16)(19,"span"),m._uU(20),m.qZA()()()()()(),m.YNc(21,Ga,1,0,"div",17),m.YNc(22,Pa,3,1,"div",1),m.qZA()),2&e&&(m.Q6J("ngClass",t.itemside),m.xp6(1),m.Q6J("ngIf",!t.side),m.xp6(1),m.Q6J("ngIf",!t.side),m.xp6(2),m.Q6J("ngClass",m.VKq(14,Ha,t.side)),m.xp6(4),m.Q6J("ngIf",t.timeline.smartFontSize),m.xp6(5),m.Q6J("ngClass",m.WLB(16,za,!t.timeline.smartFontSize,t.timeline.smartFontSize)),m.xp6(1),m.Q6J("module","Users")("id",t.record.created_by),m.xp6(1),m.Oqu(t.user_name),m.xp6(1),m.hij(" - ",t.fieldCount,""),m.xp6(1),m.Q6J("ngIf",!t.timeline.smartFontSize),m.xp6(3),m.Oqu(t.description),m.xp6(1),m.Q6J("ngIf",t.side),m.xp6(1),m.Q6J("ngIf",t.side))},dependencies:[i.mk,i.O5,x.J,Z.f,Vs.g],styles:[".objecttimeline-item[_ngcontent-%COMP%]{background-color:var(--color-white);border:1px solid var(--color-grey-5);border-radius:.25rem;box-shadow:0 2px 3px 0 rgb(0 0 16%);width:calc(100% - 86px)}",".objecttimeline-item-nubbin-right[_ngcontent-%COMP%]{background-color:var(--color-white);border-bottom:1px solid var(--color-grey-5);border-left:1px solid var(--color-grey-5);height:20px;margin-right:-10px;transform:rotate(45deg);width:20px}",".objecttimeline-item-nubbin-left[_ngcontent-%COMP%]{background-color:var(--color-white);border-bottom:1px solid var(--color-grey-5);border-left:1px solid var(--color-grey-5);height:20px;margin-left:-10px;transform:rotate(-135deg);width:20px}"]}),ObjectTimelineItemAudit})();function Ka(e,t){if(1&e&&(m.TgZ(0,"div",14)(1,"span"),m._uU(2),m.qZA()()),2&e){const e=m.oxw();m.xp6(2),m.Oqu(e.recordDate)}}function $a(e,t){1&e&&m._UZ(0,"div",15)}function Xa(e,t){1&e&&m._UZ(0,"div",16)}function Wa(e,t){if(1&e&&(m.TgZ(0,"div",14)(1,"span"),m._uU(2),m.qZA()()),2&e){const e=m.oxw();m.xp6(2),m.Oqu(e.recordDate)}}const ed=function(e){return{"slds-grid--align-spread":e}},td=function(e){return{"slds-m-left--small":e}},sd=function(e,t){return{"slds-text-heading--medium":e,"slds-text-heading--small":t}};let id=(()=>{class ObjectTimelineItemCreated{constructor(e,t,s,i,n,l){this.timeline=e,this.model=t,this.language=s,this.metadata=i,this.userpreferences=n,this.session=l,this.date=""}get user_name(){let e=this.record.user_name;return e.charAt(0).toUpperCase()+e.substring(1)}get module(){return this.model.module.slice(0,-1)}get recordDate(){const e=new moment.utc(this.record.date_entered).tz(this.session.getSessionData("timezone")||moment.tz.guess(!0)),t=e.format("YYYYMMDD")==(new moment).format("YYYYMMDD"),s=e.format("YYYY")==(new moment).format("YYYY");return t?e.format(this.userpreferences.getTimeFormat()):s?e.format("MMM D"):e.format(this.userpreferences.getDateFormat())}ngOnInit(){this.side?this.itemside={"slds-m-right--xx-small":!0,"slds-grid--align-end":!0}:this.itemside={"slds-m-left--xx-small":!0}}}return ObjectTimelineItemCreated.ɵfac=function(e){return new(e||ObjectTimelineItemCreated)(m.Y36(Ua),m.Y36(g.o),m.Y36(h.d),m.Y36(b.Pu),m.Y36(L.z),m.Y36(Ut.n))},ObjectTimelineItemCreated.ɵcmp=m.Xpm({type:ObjectTimelineItemCreated,selectors:[["object-timeline-item-created"]],inputs:{record:"record",side:"side"},decls:16,vars:17,consts:[[1,"slds-grid","slds-grid",3,"ngClass"],["style","width: 70px","class","slds-align--absolute-center slds-m-horizontal--none",4,"ngIf"],["class","objecttimeline-item-nubbin-right slds-align--absolute-center",4,"ngIf"],[1,"objecttimeline-item","slds-m-vertical--medium","slds-height_full",3,"click"],[1,"slds-popover__body","slds-grid",2,"height","90px",3,"ngClass"],[1,"slds-grid","slds-grid--vertical","slds-grid--vertical-align-center",2,"width","32px"],[1,"slds-m-horizontal--xx-small",2,"width","32px"],[3,"module"],[1,"slds-grid","slds-grid--align-spread","slds-size--7-of-8",2,"width","calc(100% - 32px)"],[1,"slds-m-horizontal--small","slds-media",3,"ngClass"],[1,"slds-media__body",2,"height","45%"],[1,"slds-p-left--none","slds-popover__header","slds-p-top--none",2,"border","0"],[3,"ngClass"],["class","objecttimeline-item-nubbin-left slds-align--absolute-center",4,"ngIf"],[1,"slds-align--absolute-center","slds-m-horizontal--none",2,"width","70px"],[1,"objecttimeline-item-nubbin-right","slds-align--absolute-center"],[1,"objecttimeline-item-nubbin-left","slds-align--absolute-center"]],template:function(e,t){1&e&&(m.TgZ(0,"div",0),m.YNc(1,Ka,3,1,"div",1),m.YNc(2,$a,1,0,"div",2),m.TgZ(3,"section",3),m.NdJ("click",(function(){return t.timeline.setRecord(t.record)})),m.TgZ(4,"div",4)(5,"div",5)(6,"div",6),m._UZ(7,"system-icon",7),m.qZA()(),m.TgZ(8,"div",8)(9,"div",9)(10,"div",10)(11,"header",11)(12,"h2",12),m._uU(13),m.qZA()()()()()()(),m.YNc(14,Xa,1,0,"div",13),m.YNc(15,Wa,3,1,"div",1),m.qZA()),2&e&&(m.Q6J("ngClass",t.itemside),m.xp6(1),m.Q6J("ngIf",!t.side),m.xp6(1),m.Q6J("ngIf",!t.side),m.xp6(2),m.Q6J("ngClass",m.VKq(10,ed,t.side)),m.xp6(3),m.Q6J("module",t.model.module),m.xp6(2),m.Q6J("ngClass",m.VKq(12,td,!t.side)),m.xp6(3),m.Q6J("ngClass",m.WLB(14,sd,!t.timeline.smartFontSize,t.timeline.smartFontSize)),m.xp6(1),m.hij("This ",t.module," was created"),m.xp6(1),m.Q6J("ngIf",t.side),m.xp6(1),m.Q6J("ngIf",t.side))},dependencies:[i.mk,i.O5,Z.f],styles:[".objecttimeline-item[_ngcontent-%COMP%]{background-color:var(--color-white);border:1px solid var(--color-grey-5);border-radius:.25rem;box-shadow:0 2px 3px 0 rgb(0 0 16%);width:calc(100% - 86px)}",".objecttimeline-item-nubbin-right[_ngcontent-%COMP%]{background-color:var(--color-white);border-bottom:1px solid var(--color-grey-5);border-left:1px solid var(--color-grey-5);height:20px;margin-right:-10px;transform:rotate(45deg);width:20px}",".objecttimeline-item-nubbin-left[_ngcontent-%COMP%]{background-color:var(--color-white);border-bottom:1px solid var(--color-grey-5);border-left:1px solid var(--color-grey-5);height:20px;margin-left:-10px;transform:rotate(-135deg);width:20px}"]}),ObjectTimelineItemCreated})();function nd(e,t){if(1&e){const e=m.EpF();m.TgZ(0,"div",7)(1,"div",8),m.NdJ("click",(function(t){const s=m.CHM(e).$implicit,i=m.oxw();return m.KtG(i.setFilter(t,s))})),m.TgZ(2,"span",9),m._UZ(3,"input",38),m.TgZ(4,"label",39),m._UZ(5,"span",12),m.TgZ(6,"span",13),m._uU(7),m.qZA()()()()()}if(2&e){const e=t.$implicit,s=m.oxw();m.xp6(3),m.Q6J("id",e)("checked",s.getChecked(e)),m.xp6(1),m.uIk("for",e),m.xp6(3),m.Oqu(e)}}function ld(e,t){if(1&e){const e=m.EpF();m.TgZ(0,"div",7)(1,"div",8),m.NdJ("click",(function(t){m.CHM(e);const s=m.oxw();return m.KtG(s.setFilter(t,"auditLog"))})),m.TgZ(2,"span",9),m._UZ(3,"input",38),m.TgZ(4,"label",39),m._UZ(5,"span",12),m.TgZ(6,"span",13),m._UZ(7,"system-label",40),m.qZA()()()()()}if(2&e){const e=m.oxw();m.xp6(3),m.Q6J("id","auditLog")("checked",e.getChecked("auditLog")),m.xp6(1),m.uIk("for","auditLog")}}const od=function(e){return{"slds-is-open":e}};let ad=(()=>{class ObjectTimelineFilter{constructor(e,t,s,i,n){this.renderer=e,this.elementRef=t,this.language=s,this.metadata=i,this.timeline=n,this.isOpen=!1,this.moduleTypes=[],this.objectfilters=[],this.onlyAuditObjects=!1,this.setFromService()}get filterColorClass(){return this.timeline.filters.objectfilters.indexOf("Modules")>=0&&this.timeline.filters.objectfilters.indexOf("auditLog")>=0&&!this.timeline.filters.own?"slds-icon-text-default":"slds-icon-text-error"}onClick(e){this.elementRef.nativeElement.contains(e.target)||(this.isOpen=!1,this.clickListener())}setFromService(){this.objectfilters=JSON.parse(JSON.stringify(this.timeline.filters.objectfilters)),this.ownerfilter=this.timeline.filters.own}setToService(){this.timeline.filters.objectfilters=JSON.parse(JSON.stringify(this.objectfilters)),this.timeline.filters.own=this.ownerfilter,this.timeline.onlyAudits=this.onlyAuditObjects,this.timeline.reload()}toggleOpen(e){e.stopPropagation(),this.isOpen=!this.isOpen,this.isOpen?this.clickListener=this.renderer.listen("document","click",(e=>this.onClick(e))):this.clickListener&&this.clickListener(),this.isOpen&&(this.moduleTypes=this.timeline.timelineModules)}setFilter(e,t){if(e.preventDefault(),"Modules"==t){let e=this.objectfilters.indexOf(t);if(e>=0){if(this.objectfilters.length<=1)return;this.objectfilters.splice(e,1)}else this.objectfilters=this.objectfilters.indexOf("auditLog")>=0?["auditLog","Modules"]:["Modules"]}else if("auditLog"==t){let e=this.objectfilters.indexOf(t);if(e>=0){if(this.objectfilters.length<=1)return;this.objectfilters.splice(e,1)}else this.objectfilters.push(t)}else{this.objectfilters.indexOf("Modules")>=0&&this.objectfilters.splice(this.objectfilters.indexOf("Modules"),1);let e=this.objectfilters.indexOf(t);if(e>=0){if(this.objectfilters.length<=1)return;this.objectfilters.splice(e,1)}else this.objectfilters.push(t)}}getChecked(e){return"Modules"==e?1===this.objectfilters.length&&this.objectfilters.indexOf("Modules")>=0||2===this.objectfilters.length&&this.objectfilters.indexOf("Modules")>=0&&this.objectfilters.indexOf("auditLog")>=0:"auditLog"==e?this.objectfilters.indexOf("auditLog")>=0:this.objectfilters.indexOf(e)>=0}closeDialog(e){this.clickListener&&this.clickListener(),e?this.setToService():this.setFromService(),this.isOpen=!1}}return ObjectTimelineFilter.ɵfac=function(e){return new(e||ObjectTimelineFilter)(m.Y36(m.Qsj),m.Y36(m.SBq),m.Y36(h.d),m.Y36(b.Pu),m.Y36(Ua))},ObjectTimelineFilter.ɵcmp=m.Xpm({type:ObjectTimelineFilter,selectors:[["object-timeline-filter"]],decls:47,vars:11,consts:[[1,"slds-dropdown-trigger","slds-dropdown-trigger_click","slds-p-horizontal--xxx-small",3,"ngClass"],["icon","filterList","size","x-small",3,"colorclass","title","click"],[1,"slds-is-absolute","slds-dropdown","slds-dropdown_right","slds-nubbin_top-right",2,"right","-10px","top","25px"],[1,"slds-grid"],[1,"slds-p-horizontal--small","slds-border--right",2,"min-width","180px"],[1,"slds-p-vertical--x-small"],["label","LBL_TYPE"],[1,"slds-form-element","slds-p-vertical--xx-small"],[1,"slds-form-element__control",3,"click"],[1,"slds-checkbox"],["type","checkbox","id","alltypes",3,"checked"],["for","alltypes",1,"slds-checkbox__label"],[1,"slds-checkbox_faux"],[1,"slds-form-element__label"],["label","LBL_ALL"],["class","slds-form-element slds-p-vertical--xx-small",4,"ngFor","ngForOf"],[1,"slds-size--1-of-1","slds-border-top"],["class","slds-form-element slds-p-vertical--xx-small",4,"ngIf"],[1,"slds-p-horizontal--small",2,"min-width","180px"],["label","LBL_FILTER"],[1,"slds-form-element"],[1,"slds-form-element__control"],[1,"slds-radio"],["type","radio","id","timelineownerall","name","filter","value","",3,"ngModel","ngModelChange"],["for","timelineownerall",1,"slds-radio__label"],[1,"slds-radio_faux"],["type","radio","id","timelineownerassignedtome","name","filter","value","assigned",3,"ngModel","ngModelChange"],["for","timelineownerassignedtome",1,"slds-radio__label"],[1,"slds-form-element__label","slds-truncate"],["label","LBL_ASSIGNEDTOME"],["type","radio","id","timelineownercreatedbyme","name","filter","value","created",3,"ngModel","ngModelChange"],["for","timelineownercreatedbyme",1,"slds-radio__label"],["label","LBL_CREATEDBYME"],[1,"slds-popover__footer"],[1,"slds-col--bump-left","slds-button","slds-button_neutral",3,"click"],["label","LBL_CANCEL"],[1,"slds-button","slds-button--brand",3,"click"],["label","LBL_APPLY"],["type","checkbox",3,"id","checked"],[1,"slds-checkbox__label"],["label","LBL_AUDIT_LOG"]],template:function(e,t){1&e&&(m.TgZ(0,"div",0)(1,"system-utility-icon",1),m.NdJ("click",(function(e){return t.toggleOpen(e)})),m.qZA(),m.TgZ(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5),m._UZ(6,"system-label",6),m.qZA(),m.TgZ(7,"div",7)(8,"div",8),m.NdJ("click",(function(e){return t.setFilter(e,"Modules")})),m.TgZ(9,"span",9),m._UZ(10,"input",10),m.TgZ(11,"label",11),m._UZ(12,"span",12),m.TgZ(13,"span",13),m._UZ(14,"system-label",14),m.qZA()()()()(),m.YNc(15,nd,8,4,"div",15),m._UZ(16,"div",16),m.YNc(17,ld,8,3,"div",17),m.qZA(),m.TgZ(18,"div",18)(19,"div",5),m._UZ(20,"system-label",19),m.qZA(),m.TgZ(21,"fieldset",20)(22,"div",21)(23,"span",22)(24,"input",23),m.NdJ("ngModelChange",(function(e){return t.ownerfilter=e})),m.qZA(),m.TgZ(25,"label",24),m._UZ(26,"span",25),m.TgZ(27,"span",13),m._UZ(28,"system-label",14),m.qZA()()(),m.TgZ(29,"span",22)(30,"input",26),m.NdJ("ngModelChange",(function(e){return t.ownerfilter=e})),m.qZA(),m.TgZ(31,"label",27),m._UZ(32,"span",25),m.TgZ(33,"span",28),m._UZ(34,"system-label",29),m.qZA()()(),m.TgZ(35,"span",22)(36,"input",30),m.NdJ("ngModelChange",(function(e){return t.ownerfilter=e})),m.qZA(),m.TgZ(37,"label",31),m._UZ(38,"span",25),m.TgZ(39,"span",28),m._UZ(40,"system-label",32),m.qZA()()()()()()(),m.TgZ(41,"footer",33)(42,"div",3)(43,"button",34),m.NdJ("click",(function(){return t.closeDialog(!1)})),m._UZ(44,"system-label",35),m.qZA(),m.TgZ(45,"button",36),m.NdJ("click",(function(){return t.closeDialog(!0)})),m._UZ(46,"system-label",37),m.qZA()()()()()),2&e&&(m.Q6J("ngClass",m.VKq(9,od,t.isOpen)),m.xp6(1),m.Q6J("colorclass",t.filterColorClass)("title",t.language.getLabel("LBL_FILTER")),m.xp6(9),m.Q6J("checked",t.getChecked("Modules")),m.xp6(5),m.Q6J("ngForOf",t.moduleTypes),m.xp6(2),m.Q6J("ngIf",t.timeline.auditLogEnabled),m.xp6(7),m.Q6J("ngModel",t.ownerfilter),m.xp6(6),m.Q6J("ngModel",t.ownerfilter),m.xp6(6),m.Q6J("ngModel",t.ownerfilter))},dependencies:[i.mk,i.sg,i.O5,l.Fj,l._,l.JJ,l.On,M._,w.r],encapsulation:2}),ObjectTimelineFilter})();var dd=s(6559),rd=s(4730),cd=s(6822),ud=s(7758);function md(e,t){if(1&e&&(m.TgZ(0,"div",7)(1,"span"),m._uU(2),m.qZA()()),2&e){const e=m.oxw();m.xp6(2),m.Oqu(e.recordDate)}}function hd(e,t){1&e&&m._UZ(0,"div",8)}const gd=function(e){return{"slds-grid--align-spread":e}},pd=function(e){return{"slds-m-left--small":e}},fd=function(e,t){return{"slds-text-heading--medium":e,"slds-text-heading--small":t}},bd=function(){return{displayLabels:!1}},_d=function(e,t){return{"slds-text-heading--small":e,"slds-text-heading--x-small":t}};function yd(e,t){if(1&e&&(m.TgZ(0,"div",9)(1,"div",10)(2,"div",11),m._UZ(3,"system-icon",12),m.qZA()(),m.TgZ(4,"div",13)(5,"div",14)(6,"div",15),m._UZ(7,"object-record-fieldset-horizontal-list",16),m.qZA(),m.TgZ(8,"article",17),m._UZ(9,"object-record-fieldset-horizontal-list",16),m.qZA()(),m._UZ(10,"object-action-menu",18),m.qZA()()),2&e){const e=m.oxw();m.Q6J("ngClass",m.VKq(11,gd,e.side)),m.xp6(3),m.Q6J("module",e.model.module),m.xp6(2),m.Q6J("ngClass",m.VKq(13,pd,!e.side)),m.xp6(1),m.Q6J("ngClass",m.WLB(15,fd,!e.timeline.smartFontSize,e.timeline.smartFontSize))("system-view-provider",m.DdM(18,bd)),m.xp6(1),m.Q6J("fieldset",e.headerFieldSet),m.xp6(1),m.Q6J("ngClass",m.WLB(19,_d,!e.timeline.smartFontSize,e.timeline.smartFontSize))("system-view-provider",m.DdM(22,bd)),m.xp6(1),m.Q6J("fieldset",e.subHeaderFieldSet),m.xp6(1),m.Q6J("buttonsize","small")("actionset",e.actionset)}}function vd(e,t){1&e&&m._UZ(0,"div",19)}function xd(e,t){if(1&e&&(m.TgZ(0,"div",7)(1,"span"),m._uU(2),m.qZA()()),2&e){const e=m.oxw();m.xp6(2),m.Oqu(e.recordDate)}}function Zd(e,t){if(1&e&&(m.TgZ(0,"div",20)(1,"div",21)(2,"div",10)(3,"div",11),m._UZ(4,"system-icon",12),m.qZA()(),m.TgZ(5,"div",13)(6,"div",14)(7,"div",15),m._UZ(8,"object-record-fieldset-horizontal-list",16),m.qZA(),m.TgZ(9,"article",17),m._UZ(10,"object-record-fieldset-horizontal-list",16),m.qZA()()()(),m.TgZ(11,"div",22),m._UZ(12,"object-action-menu",18),m.qZA()()),2&e){const e=m.oxw();m.xp6(4),m.Q6J("module",e.model.module),m.xp6(2),m.Q6J("ngClass",m.VKq(10,pd,!e.side)),m.xp6(1),m.Q6J("ngClass",m.WLB(12,fd,!e.timeline.smartFontSize,e.timeline.smartFontSize))("system-view-provider",m.DdM(15,bd)),m.xp6(1),m.Q6J("fieldset",e.headerFieldSet),m.xp6(1),m.Q6J("ngClass",m.WLB(16,_d,!e.timeline.smartFontSize,e.timeline.smartFontSize))("system-view-provider",m.DdM(19,bd)),m.xp6(1),m.Q6J("fieldset",e.subHeaderFieldSet),m.xp6(2),m.Q6J("buttonsize","xx-small")("actionset",e.actionset)}}let wd=(()=>{class ObjectTimelineItemModule{constructor(e,t,s,i,n,l,o,a){this.timeline=e,this.view=t,this.modelattachments=s,this.model=i,this.language=n,this.metadata=l,this.userpreferences=o,this.session=a,this.date="",this.headerDescription="Someone edited this"}get data(){return this.record.data}get actionset(){return this.componentconfig.actionset}get user_name(){let e=this.record.user_name;return e.charAt(0).toUpperCase()+e.substring(1)}get module(){return this.model.module}get recordDate(){const e=new moment.utc(this.record.date).tz(this.session.getSessionData("timezone")||moment.tz.guess(!0)),t=e.format("YYYYMMDD")==(new moment).format("YYYYMMDD"),s=e.format("YYYY")==(new moment).format("YYYY");return t?e.format(this.userpreferences.getTimeFormat()):s?e.format("MMM D"):e.format(this.userpreferences.getDateFormat())}ngOnInit(){this.model.module=this.record.module,this.model.id=this.record.id,this.model.setData(this.record.data),this.modelattachments.module=this.model.module,this.modelattachments.id=this.model.id,this.side?this.itemside={"slds-m-right--xx-small":!0,"slds-grid--align-end":!0}:this.itemside={"slds-m-left--xx-small":!0},this.componentconfig=this.metadata.getComponentConfig("ObjectTimelineItemModule","Accounts"),this.headerFieldSet=this.componentconfig.headerFieldSet,this.subHeaderFieldSet=this.componentconfig.subHeaderFieldSet}}return ObjectTimelineItemModule.ɵfac=function(e){return new(e||ObjectTimelineItemModule)(m.Y36(Ua),m.Y36(Je.e),m.Y36(ns.H),m.Y36(g.o),m.Y36(h.d),m.Y36(b.Pu),m.Y36(L.z),m.Y36(Ut.n))},ObjectTimelineItemModule.ɵcmp=m.Xpm({type:ObjectTimelineItemModule,selectors:[["object-timeline-item-module"]],inputs:{record:"record",side:"side"},features:[m._Bn([g.o,ns.H,Je.e])],decls:9,vars:7,consts:[[1,"slds-grid",3,"ngClass"],["style","width: 70px","class","slds-align--absolute-center slds-m-horizontal--none",4,"ngIf"],["class","objecttimeline-item-nubbin-right slds-align--absolute-center",4,"ngIf"],[1,"objecttimeline-item","slds-m-vertical--medium","slds-height_full",3,"click"],["class","slds-popover__body slds-grid","style","height: 90px",3,"ngClass",4,"ngIf","ngIfElse"],["class","objecttimeline-item-nubbin-left slds-align--absolute-center",4,"ngIf"],["smallview",""],[1,"slds-align--absolute-center","slds-m-horizontal--none",2,"width","70px"],[1,"objecttimeline-item-nubbin-right","slds-align--absolute-center"],[1,"slds-popover__body","slds-grid",2,"height","90px",3,"ngClass"],[1,"slds-grid","slds-grid--vertical","slds-grid--vertical-align-center",2,"width","32px"],[1,"slds-m-horizontal--xx-small",2,"width","32px"],[3,"module"],[1,"slds-grid","slds-grid--align-spread","slds-size--7-of-8",2,"width","calc(100% - 32px)"],[1,"slds-m-horizontal--small","slds-media","slds-grid--vertical",3,"ngClass"],[1,"slds-media__body",2,"height","45%",3,"ngClass","system-view-provider"],[3,"fieldset"],[2,"height","55%",3,"ngClass","system-view-provider"],[3,"buttonsize","actionset"],[1,"objecttimeline-item-nubbin-left","slds-align--absolute-center"],[1,"slds-popover__body","slds-grid--vertical",2,"height","90px"],[1,"slds-grid"],[1,"slds-align--absolute-center"]],template:function(e,t){if(1&e&&(m.TgZ(0,"div",0),m.YNc(1,md,3,1,"div",1),m.YNc(2,hd,1,0,"div",2),m.TgZ(3,"section",3),m.NdJ("click",(function(){return t.timeline.setRecord(t.record)})),m.YNc(4,yd,11,23,"div",4),m.qZA(),m.YNc(5,vd,1,0,"div",5),m.YNc(6,xd,3,1,"div",1),m.qZA(),m.YNc(7,Zd,13,20,"ng-template",null,6,m.W1O)),2&e){const e=m.MAs(8);m.Q6J("ngClass",t.itemside),m.xp6(1),m.Q6J("ngIf",!t.side),m.xp6(1),m.Q6J("ngIf",!t.side),m.xp6(2),m.Q6J("ngIf",!t.timeline.smartFontSize)("ngIfElse",e),m.xp6(1),m.Q6J("ngIf",t.side),m.xp6(1),m.Q6J("ngIf",t.side)}},dependencies:[i.mk,i.O5,Z.f,Fo.V,it.g,Sl.Z],styles:[".objecttimeline-item[_ngcontent-%COMP%]{background-color:var(--color-white);border:1px solid var(--color-grey-5);border-radius:.25rem;box-shadow:0 2px 3px 0 rgb(0 0 16%);width:calc(100% - 86px)}",".objecttimeline-item-nubbin-right[_ngcontent-%COMP%]{background-color:var(--color-white);border-bottom:1px solid var(--color-grey-5);border-left:1px solid var(--color-grey-5);height:20px;margin-right:-10px;transform:rotate(45deg);width:20px}",".objecttimeline-item-nubbin-left[_ngcontent-%COMP%]{background-color:var(--color-white);border-bottom:1px solid var(--color-grey-5);border-left:1px solid var(--color-grey-5);height:20px;margin-left:-10px;transform:rotate(-135deg);width:20px}"]}),ObjectTimelineItemModule})();function Td(e,t){if(1&e&&(m.TgZ(0,"div",11)(1,"span",12),m._uU(2),m.qZA()()),2&e){const e=m.oxw(3);m.xp6(2),m.hij(" ",e.record.divider," ")}}function Cd(e,t){if(1&e&&m._UZ(0,"object-timeline-item-module",13),2&e){const e=m.oxw(3);m.Q6J("record",e.record)("side",!1)}}function Ad(e,t){if(1&e&&m._UZ(0,"object-timeline-item-audit",13),2&e){const e=m.oxw(3);m.Q6J("record",e.record)("side",!1)}}function kd(e,t){if(1&e&&m._UZ(0,"object-timeline-item-created",13),2&e){const e=m.oxw(3);m.Q6J("record",e.record)("side",!1)}}function Ld(e,t){if(1&e&&(m.TgZ(0,"div",3),m._UZ(1,"div",4),m.TgZ(2,"div",5),m.YNc(3,Td,3,1,"div",6),m._UZ(4,"div",7),m.qZA(),m.TgZ(5,"div",8),m.YNc(6,Cd,1,2,"object-timeline-item-module",9),m.YNc(7,Ad,1,2,"object-timeline-item-audit",9),m.YNc(8,kd,1,2,"object-timeline-item-created",10),m.qZA()()),2&e){const e=m.oxw(2);m.xp6(3),m.Q6J("ngIf",e.divider),m.xp6(2),m.Q6J("ngSwitch",e.record.record_Type),m.xp6(1),m.Q6J("ngSwitchCase","module"),m.xp6(1),m.Q6J("ngSwitchCase","audit")}}function Md(e,t){if(1&e&&m._UZ(0,"object-timeline-item-module",13),2&e){const e=m.oxw(3);m.Q6J("record",e.record)("side",!0)}}function Sd(e,t){if(1&e&&m._UZ(0,"object-timeline-item-audit",13),2&e){const e=m.oxw(3);m.Q6J("record",e.record)("side",!0)}}function Id(e,t){if(1&e&&m._UZ(0,"object-timeline-item-created",13),2&e){const e=m.oxw(3);m.Q6J("record",e.record)("side",!0)}}function Od(e,t){if(1&e&&(m.TgZ(0,"div",11)(1,"span",12),m._uU(2),m.qZA()()),2&e){const e=m.oxw(3);m.xp6(2),m.hij(" ",e.record.divider," ")}}function Jd(e,t){if(1&e&&(m.TgZ(0,"div",3)(1,"div",8),m.YNc(2,Md,1,2,"object-timeline-item-module",9),m.YNc(3,Sd,1,2,"object-timeline-item-audit",9),m.YNc(4,Id,1,2,"object-timeline-item-created",10),m.qZA(),m.TgZ(5,"div",5),m.YNc(6,Od,3,1,"div",6),m._UZ(7,"div",14),m.qZA(),m._UZ(8,"div",4),m.qZA()),2&e){const e=m.oxw(2);m.xp6(1),m.Q6J("ngSwitch",e.record.record_Type),m.xp6(1),m.Q6J("ngSwitchCase","module"),m.xp6(1),m.Q6J("ngSwitchCase","audit"),m.xp6(3),m.Q6J("ngIf",e.divider)}}function Nd(e,t){if(1&e&&(m.TgZ(0,"div"),m.YNc(1,Ld,9,4,"div",2),m.YNc(2,Jd,9,4,"div",2),m.qZA()),2&e){const e=m.oxw();m.xp6(1),m.Q6J("ngIf",e.side),m.xp6(1),m.Q6J("ngIf",!e.side)}}function Fd(e,t){if(1&e&&(m.TgZ(0,"div",21)(1,"span",12),m._uU(2),m.qZA()()),2&e){const e=m.oxw(2);m.xp6(2),m.hij(" ",e.record.divider," ")}}function qd(e,t){if(1&e&&m._UZ(0,"object-timeline-item-module",13),2&e){const e=m.oxw(2);m.Q6J("record",e.record)("side",!1)}}function Ed(e,t){if(1&e&&m._UZ(0,"object-timeline-item-audit",13),2&e){const e=m.oxw(2);m.Q6J("record",e.record)("side",!1)}}function Yd(e,t){if(1&e&&m._UZ(0,"object-timeline-item-created",13),2&e){const e=m.oxw(2);m.Q6J("record",e.record)("side",!1)}}function Qd(e,t){if(1&e&&(m.TgZ(0,"div",15)(1,"div",16)(2,"div",17),m._UZ(3,"div",14),m.qZA(),m.YNc(4,Fd,3,1,"div",18),m.qZA(),m.TgZ(5,"div",19)(6,"div",17),m._UZ(7,"div",14),m.qZA(),m.TgZ(8,"div",20),m.YNc(9,qd,1,2,"object-timeline-item-module",9),m.YNc(10,Ed,1,2,"object-timeline-item-audit",9),m.YNc(11,Yd,1,2,"object-timeline-item-created",10),m.qZA()()()),2&e){const e=m.oxw();m.xp6(4),m.Q6J("ngIf",e.divider),m.xp6(4),m.Q6J("ngSwitch",e.record.record_Type),m.xp6(1),m.Q6J("ngSwitchCase","module"),m.xp6(1),m.Q6J("ngSwitchCase","audit")}}let Ud=(()=>{class ObjectTimelineItemLine{constructor(e){this.timeline=e,this.buttons=!0}get side(){return this.index%2==0}get divider(){return this.record.hasOwnProperty("divider")}get record(){return this.Record}get recordType(){return this.Record.hasOwnProperty("audit_log")?"audit":this.Record.hasOwnProperty("module")?"moduleRecord":"moduleCreated"}}return ObjectTimelineItemLine.ɵfac=function(e){return new(e||ObjectTimelineItemLine)(m.Y36(Ua))},ObjectTimelineItemLine.ɵcmp=m.Xpm({type:ObjectTimelineItemLine,selectors:[["object-timeline-item-line"]],inputs:{Record:"Record",index:"index",buttons:"buttons"},decls:3,vars:2,consts:[[4,"ngIf","ngIfElse"],["thinView",""],["class","slds-grid","style","height: 70px",4,"ngIf"],[1,"slds-grid",2,"height","70px"],[2,"width","calc(50% - 2px)"],[1,"slds-grid--vertical","slds-align--absolute-center",2,"width","4px","height","85px"],["style","width: 60px","class","slds-m-top--medium",4,"ngIf"],[1,"slds-color__background_gray-9","slds-height_full","slds-align--absolute-center",2,"width","2px","height","85px"],[2,"width","calc(50% - 2px)",3,"ngSwitch"],[3,"record","side",4,"ngSwitchCase"],[3,"record","side",4,"ngSwitchDefault"],[1,"slds-m-top--medium",2,"width","60px"],[1,"slds-color__text_gray-6","slds-align--absolute-center",2,"font-size","14px"],[3,"record","side"],[1,"slds-color__background_gray-9","slds-height_full","slds-align--absolute-center",2,"width","2px"],[1,"slds-grid--vertical"],[1,"slds-grid"],[1,"slds-grid--vertical",2,"width","4px"],["style","width: 60px","class","slds-m-left--xx-small",4,"ngIf"],[1,"slds-grid","slds-m-right--small"],[2,"width","calc(100% - 4px)",3,"ngSwitch"],[1,"slds-m-left--xx-small",2,"width","60px"]],template:function(e,t){if(1&e&&(m.YNc(0,Nd,3,2,"div",0),m.YNc(1,Qd,12,4,"ng-template",null,1,m.W1O)),2&e){const e=m.MAs(2);m.Q6J("ngIf",!t.timeline.smartView)("ngIfElse",e)}},dependencies:[i.O5,i.RF,i.n9,i.ED,wd,Va,id],encapsulation:2}),ObjectTimelineItemLine})();function Dd(e,t){1&e&&(m.TgZ(0,"div")(1,"div",2),m._UZ(2,"div",3),m.TgZ(3,"div",4),m._UZ(4,"div",5),m.qZA(),m.TgZ(5,"div",3)(6,"div",6)(7,"div",7)(8,"span",8),m._UZ(9,"system-stencil"),m.qZA()(),m.TgZ(10,"section",9)(11,"div",10)(12,"div",11)(13,"div",12),m._UZ(14,"system-icon",13),m.qZA()(),m.TgZ(15,"div",14)(16,"div",15)(17,"div",16)(18,"header",17)(19,"h2",18),m._UZ(20,"system-stencil"),m.qZA()(),m.TgZ(21,"p",19),m._UZ(22,"system-stencil"),m.qZA()()(),m._UZ(23,"system-icon",20),m.qZA()()()()()(),m.TgZ(24,"div",21)(25,"div",3)(26,"div",22)(27,"section",23)(28,"div",24)(29,"div",11)(30,"div",12),m._UZ(31,"system-icon",13),m.qZA()(),m.TgZ(32,"div",14)(33,"div",15)(34,"div",16)(35,"header",17)(36,"h2",18),m._UZ(37,"system-stencil"),m.qZA()(),m.TgZ(38,"p",19),m._UZ(39,"system-stencil"),m.qZA()()(),m._UZ(40,"system-icon",20),m.qZA()()(),m.TgZ(41,"div",7)(42,"span",8),m._UZ(43,"system-stencil"),m.qZA()()()(),m.TgZ(44,"div",25),m._UZ(45,"div",5),m.qZA(),m._UZ(46,"div",3),m.qZA(),m.TgZ(47,"div",26),m._UZ(48,"div",3),m.TgZ(49,"div",4),m._UZ(50,"div",5),m.qZA(),m.TgZ(51,"div",3)(52,"div",6)(53,"div",7)(54,"span",8),m._UZ(55,"system-stencil"),m.qZA()(),m.TgZ(56,"section",9)(57,"div",10)(58,"div",11)(59,"div",12),m._UZ(60,"system-icon",13),m.qZA()(),m.TgZ(61,"div",14)(62,"div",15)(63,"div",16)(64,"header",17)(65,"h2",18),m._UZ(66,"system-stencil"),m.qZA()(),m.TgZ(67,"p",19),m._UZ(68,"system-stencil"),m.qZA()()(),m._UZ(69,"system-icon",27),m.qZA()()()()()(),m.TgZ(70,"div",28)(71,"div",3)(72,"div",22)(73,"section",23)(74,"div",24)(75,"div",11)(76,"div",12),m._UZ(77,"system-icon",13),m.qZA()(),m.TgZ(78,"div",14)(79,"div",15)(80,"div",16)(81,"header",17)(82,"h2",18),m._UZ(83,"system-stencil"),m.qZA()(),m.TgZ(84,"p",19),m._UZ(85,"system-stencil"),m.qZA()()(),m._UZ(86,"system-icon",20),m.qZA()()(),m.TgZ(87,"div",7)(88,"span",8),m._UZ(89,"system-stencil"),m.qZA()()()(),m.TgZ(90,"div",25),m._UZ(91,"div",5),m.qZA(),m._UZ(92,"div",3),m.qZA(),m.TgZ(93,"div",29),m._UZ(94,"div",3),m.TgZ(95,"div",4),m._UZ(96,"div",5),m.qZA(),m.TgZ(97,"div",3)(98,"div",6)(99,"div",7)(100,"span",8),m._UZ(101,"system-stencil"),m.qZA()(),m.TgZ(102,"section",9)(103,"div",30)(104,"div",11)(105,"div",12),m._UZ(106,"system-icon",13),m.qZA()(),m.TgZ(107,"div",14)(108,"div",15)(109,"div",16)(110,"header",17)(111,"h2",18),m._UZ(112,"system-stencil"),m.qZA()(),m.TgZ(113,"p",19),m._UZ(114,"system-stencil"),m.qZA()()(),m.TgZ(115,"button",31),m._UZ(116,"system-button-icon",13),m.qZA()()()()()()()()),2&e&&(m.xp6(23),m.Q6J("icon","down"),m.xp6(17),m.Q6J("icon","down"),m.xp6(46),m.Q6J("icon","down"))}function jd(e,t){1&e&&(m.TgZ(0,"div",2)(1,"div",4),m._UZ(2,"div",5),m.qZA(),m.TgZ(3,"div",32)(4,"div",6)(5,"div",7)(6,"span",8),m._UZ(7,"system-stencil"),m.qZA()(),m.TgZ(8,"section",9)(9,"div",10)(10,"div",11)(11,"div",12),m._UZ(12,"system-icon",13),m.qZA()(),m.TgZ(13,"div",14)(14,"div",15)(15,"div",16)(16,"header",17)(17,"h2",18),m._UZ(18,"system-stencil"),m.qZA()(),m.TgZ(19,"p",19),m._UZ(20,"system-stencil"),m.qZA()()(),m._UZ(21,"system-icon",20),m.qZA()()()()()(),m.TgZ(22,"div",2)(23,"div",4),m._UZ(24,"div",5),m.qZA(),m.TgZ(25,"div",32)(26,"div",6)(27,"div",7)(28,"span",8),m._UZ(29,"system-stencil"),m.qZA()(),m.TgZ(30,"section",9)(31,"div",10)(32,"div",11)(33,"div",12),m._UZ(34,"system-icon",13),m.qZA()(),m.TgZ(35,"div",14)(36,"div",15)(37,"div",16)(38,"header",17)(39,"h2",18),m._UZ(40,"system-stencil"),m.qZA()(),m.TgZ(41,"p",19),m._UZ(42,"system-stencil"),m.qZA()()(),m._UZ(43,"system-icon",20),m.qZA()()()()()(),m.TgZ(44,"div",2)(45,"div",4),m._UZ(46,"div",5),m.qZA(),m.TgZ(47,"div",32)(48,"div",6)(49,"div",7)(50,"span",8),m._UZ(51,"system-stencil"),m.qZA()(),m.TgZ(52,"section",9)(53,"div",10)(54,"div",11)(55,"div",12),m._UZ(56,"system-icon",13),m.qZA()(),m.TgZ(57,"div",14)(58,"div",15)(59,"div",16)(60,"header",17)(61,"h2",18),m._UZ(62,"system-stencil"),m.qZA()(),m.TgZ(63,"p",19),m._UZ(64,"system-stencil"),m.qZA()()(),m._UZ(65,"system-icon",20),m.qZA()()()()()(),m.TgZ(66,"div",2)(67,"div",4),m._UZ(68,"div",5),m.qZA(),m.TgZ(69,"div",32)(70,"div",6)(71,"div",7)(72,"span",8),m._UZ(73,"system-stencil"),m.qZA()(),m.TgZ(74,"section",9)(75,"div",10)(76,"div",11)(77,"div",12),m._UZ(78,"system-icon",13),m.qZA()(),m.TgZ(79,"div",14)(80,"div",15)(81,"div",16)(82,"header",17)(83,"h2",18),m._UZ(84,"system-stencil"),m.qZA()(),m.TgZ(85,"p",19),m._UZ(86,"system-stencil"),m.qZA()()(),m._UZ(87,"system-icon",20),m.qZA()()()()()(),m.TgZ(88,"div",2)(89,"div",4),m._UZ(90,"div",5),m.qZA(),m.TgZ(91,"div",32)(92,"div",6)(93,"div",7)(94,"span",8),m._UZ(95,"system-stencil"),m.qZA()(),m.TgZ(96,"section",9)(97,"div",10)(98,"div",11)(99,"div",12),m._UZ(100,"system-icon",13),m.qZA()(),m.TgZ(101,"div",14)(102,"div",15)(103,"div",16)(104,"header",17)(105,"h2",18),m._UZ(106,"system-stencil"),m.qZA()(),m.TgZ(107,"p",19),m._UZ(108,"system-stencil"),m.qZA()()(),m._UZ(109,"system-icon",20),m.qZA()()()()()()),2&e&&(m.xp6(21),m.Q6J("icon","down"),m.xp6(22),m.Q6J("icon","down"),m.xp6(22),m.Q6J("icon","down"),m.xp6(22),m.Q6J("icon","down"),m.xp6(22),m.Q6J("icon","down"))}let Rd=(()=>{class ObjectTimelineStencil{constructor(e){this.timeline=e}}return ObjectTimelineStencil.ɵfac=function(e){return new(e||ObjectTimelineStencil)(m.Y36(Ua))},ObjectTimelineStencil.ɵcmp=m.Xpm({type:ObjectTimelineStencil,selectors:[["object-timeline-stencil"]],decls:3,vars:2,consts:[[4,"ngIf","ngIfElse"],["smallview",""],[1,"slds-grid","slds-m-right--small",2,"height","125px"],[2,"width","calc(50% - 2px)"],[1,"slds-height_full","slds-size--2-of-12",2,"width","4px"],[1,"slds-color__background_gray-9","slds-height_full","slds-align--absolute-center",2,"width","2px"],[1,"slds-grid","slds-grid"],[1,"slds-align--absolute-center","slds-m-horizontal--none",2,"width","70px"],[2,"width","30px","overflow","hidden"],[1,"slds-m-vertical--medium","slds-popover","slds-height_full","slds-nubbin--left",2,"width","calc(100% - 70px)"],[1,"slds-popover__body","slds-grid",2,"height","90px"],[1,"slds-grid","slds-grid--vertical","slds-grid--vertical-align-center",2,"width","32px"],[1,"slds-m-horizontal--xx-small",2,"width","32px"],["icon","generic_loading"],[1,"slds-grid","slds-grid--align-spread","slds-size--7-of-8",2,"width","calc(100% - 32px)"],[1,"slds-m-horizontal--small","slds-media","slds-left--small","slds-size--1-of-1"],[1,"slds-media__body","slds-size--1-of-1"],[1,"slds-p-left--none","slds-popover__header","slds-p-top--none","slds-size--3-of-5",2,"border","0"],[1,"slds-text-heading_medium"],[1,"slds-size--2-of-5"],[3,"icon"],[1,"slds-grid","slds-m-right--small",2,"height","125px","opacity","0.8"],[1,"slds-grid","slds-grid","slds-grid--align-end"],[1,"slds-m-vertical--medium","slds-popover","slds-height_full","slds-nubbin--right",2,"width","calc(100% - 70px)"],[1,"slds-popover__body","slds-grid","slds-grid--align-spread",2,"height","90px"],[1,"slds-height_full",2,"width","4px"],[1,"slds-grid","slds-m-right--small",2,"height","125px","opacity","0.6"],["icon","down"],[1,"slds-grid","slds-m-right--small",2,"height","125px","opacity","0.4"],[1,"slds-grid","slds-m-right--small",2,"height","125px","opacity","0.2"],[1,"slds-popover__body","slds-grid","slds-size--1-of-1",2,"height","90px"],[1,"slds-button","slds-button--icon-border-filled","slds-button--icon-x-small"],[2,"width","calc(100% - 2px)"]],template:function(e,t){if(1&e&&(m.YNc(0,Dd,117,3,"div",0),m.YNc(1,jd,110,5,"ng-template",null,1,m.W1O)),2&e){const e=m.MAs(2);m.Q6J("ngIf",!t.timeline.smartView)("ngIfElse",e)}},dependencies:[i.O5,x.J,Z.f,Ko.B],encapsulation:2}),ObjectTimelineStencil})();const Bd=["detailContainer"];let Gd=(()=>{class ObjecttimelineFullScreenDetail{constructor(e,t,s,i,n,l){this.metadata=e,this.parent=t,this.model=s,this.language=i,this.timeline=n,this.activatedRoute=l,this.componentRefs=[]}ngOnChanges(){this.model.module=this.module,this.model.id=this.id,this.model.setData(this.data);for(let e of this.componentRefs)e.destroy();let e=this.metadata.getComponentConfig("ObjectTimelineFullScreen",this.module);if(e&&e.componentset)for(let t of e.componentset)for(let e of this.metadata.getComponentSetObjects(t))this.metadata.addComponent(e.component,this.detailContainer).subscribe((t=>{t.instance.componentconfig=e.componentconfig,this.componentRefs.push(t)}))}}return ObjecttimelineFullScreenDetail.ɵfac=function(e){return new(e||ObjecttimelineFullScreenDetail)(m.Y36(b.Pu),m.Y36(g.o),m.Y36(g.o),m.Y36(h.d),m.Y36(Ua),m.Y36(o.gz))},ObjecttimelineFullScreenDetail.ɵcmp=m.Xpm({type:ObjecttimelineFullScreenDetail,selectors:[["object-timeline-full-screen-detail"]],viewQuery:function(e,t){if(1&e&&m.Gf(Bd,7,m.s_b),2&e){let e;m.iGM(e=m.CRH())&&(t.detailContainer=e.first)}},inputs:{module:"module",id:"id",data:"data"},features:[m._Bn([g.o]),m.TTD],decls:14,vars:3,consts:[[1,"slds-border_bottom","slds-p-around--medium","slds-theme--shade"],[1,"slds-grid"],[1,"slds-col","slds-has-flexi-truncate"],[1,"slds-media","slds-no-space","slds-grow"],[3,"module"],[1,"slds-media__body"],[1,"slds-text-title--caps","slds-line-height--reset"],[1,"slds-page-header__title","slds-m-right--small","slds-align-middle","slds-truncate"],[1,"slds-p-around--xx-small"],["detailContainer",""]],template:function(e,t){1&e&&(m.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),m._UZ(4,"system-icon",4),m.TgZ(5,"div",5)(6,"p",6),m._UZ(7,"system-label-modulename",4),m.qZA(),m.TgZ(8,"div")(9,"h1",7),m._uU(10),m.qZA()()()()()()(),m.TgZ(11,"div",8),m._UZ(12,"div",null,9),m.qZA()),2&e&&(m.xp6(4),m.Q6J("module",t.model.module),m.xp6(3),m.Q6J("module",t.model.module),m.xp6(3),m.hij(" ",t.model.data.name,""))},dependencies:[Z.f,Zl.M],encapsulation:2}),ObjecttimelineFullScreenDetail})();function Pd(e,t){if(1&e&&(m.TgZ(0,"tr")(1,"td",11)(2,"div",6),m._uU(3),m.qZA()(),m.TgZ(4,"td",11)(5,"div",6),m._uU(6),m.qZA()(),m.TgZ(7,"td",11)(8,"div",6),m._uU(9),m.qZA()()()),2&e){const e=t.$implicit,s=m.oxw(2);m.xp6(3),m.hij("",s.language.getFieldDisplayName(s.model.module,e.field_name)," "),m.xp6(3),m.Oqu(e.before_value_string),m.xp6(3),m.Oqu(e.after_value_string)}}function Hd(e,t){if(1&e&&(m.TgZ(0,"table",1)(1,"thead")(2,"tr")(3,"td",2)(4,"div",3),m._uU(5),m.qZA()()(),m.TgZ(6,"tr",4)(7,"th",5)(8,"div",6),m._UZ(9,"system-label",7),m.qZA()(),m.TgZ(10,"th",5)(11,"div",6),m._UZ(12,"system-label",8),m.qZA()(),m.TgZ(13,"th",5)(14,"div",6),m._UZ(15,"system-label",9),m.qZA()()()(),m.TgZ(16,"tbody"),m.YNc(17,Pd,10,3,"tr",10),m.qZA()()),2&e){const e=m.oxw();m.xp6(5),m.AsE(" ",e.auditLog.user_name," / ",e.auditLog.date," "),m.xp6(12),m.Q6J("ngForOf",e.auditLog.data)}}let zd=(()=>{class ObjectTimelineAuditDetail{constructor(e,t,s){this.language=e,this.metadata=t,this.model=s,this.loading=!0}ngOnChanges(){this.loading=!1}}return ObjectTimelineAuditDetail.ɵfac=function(e){return new(e||ObjectTimelineAuditDetail)(m.Y36(h.d),m.Y36(b.Pu),m.Y36(g.o,8))},ObjectTimelineAuditDetail.ɵcmp=m.Xpm({type:ObjectTimelineAuditDetail,selectors:[["object-timeline-audit-detail"]],inputs:{auditLog:"auditLog"},features:[m.TTD],decls:2,vars:1,consts:[["class","slds-table slds-table--bordered slds-table--cell-buffer",4,"ngIf"],[1,"slds-table","slds-table--bordered","slds-table--cell-buffer"],["colspan","3",1,"slds-theme--shade"],[1,"slds-text-heading--label"],[1,"slds-text-title--caps"],["scope","col"],[1,"slds-truncate"],["label","LBL_FIELD"],["label","LBL_BEFOREVALUE"],["label","LBL_AFTERVALUE"],[4,"ngFor","ngForOf"],["scope","row"]],template:function(e,t){1&e&&(m.TgZ(0,"div"),m.YNc(1,Hd,18,3,"table",0),m.qZA()),2&e&&(m.xp6(1),m.Q6J("ngIf",!t.loading))},dependencies:[i.sg,i.O5,M._],encapsulation:2}),ObjectTimelineAuditDetail})();const Vd=["listContainer"];function Kd(e,t){if(1&e){const e=m.EpF();m.TgZ(0,"system-input-delayed",27),m.NdJ("ngModelChange",(function(t){m.CHM(e);const s=m.oxw();return m.KtG(s.ftsSearchTerm=t)})),m.qZA()}if(2&e){const e=m.oxw();m.Q6J("placeholder",e.language.getLabel("LBL_SEARCH"))("ngModel",e.ftsSearchTerm)}}function $d(e,t){if(1&e&&(m.TgZ(0,"li"),m._UZ(1,"object-timeline-item-line",32),m.qZA()),2&e){const e=t.$implicit,s=t.index;m.xp6(1),m.Q6J("Record",e)("index",s)}}function Xd(e,t){1&e&&(m.TgZ(0,"li",33),m._UZ(1,"system-spinner"),m.qZA())}function Wd(e,t){if(1&e&&(m.TgZ(0,"ul"),m.YNc(1,$d,2,2,"li",30),m.YNc(2,Xd,2,0,"li",31),m.qZA()),2&e){const e=m.oxw(2);m.xp6(1),m.Q6J("ngForOf",e.timeline.records)("ngForTrackBy",e.trackByFunction),m.xp6(1),m.Q6J("ngIf",e.timeline.loadingMore)}}function er(e,t){if(1&e&&(m.TgZ(0,"div",28),m.YNc(1,Wd,3,3,"ul",29),m.qZA()),2&e){const e=m.oxw(),t=m.MAs(42);m.xp6(1),m.Q6J("ngIf",0!==e.timeline.records.length)("ngIfElse",t)}}function tr(e,t){if(1&e&&m._UZ(0,"object-timeline-full-screen-detail",36),2&e){const e=m.oxw(2);m.Q6J("module",e.timeline.recordModule)("id",e.timeline.recordId)("data",e.timeline.recordData)}}function sr(e,t){if(1&e&&(m.TgZ(0,"div",34),m.YNc(1,tr,1,3,"object-timeline-full-screen-detail",35),m.qZA()),2&e){const e=m.oxw(),t=m.MAs(38);m.xp6(1),m.Q6J("ngIf","Audit"!==e.timeline.recordModule)("ngIfElse",t)}}function ir(e,t){if(1&e&&m._UZ(0,"object-timeline-audit-detail",37),2&e){const e=m.oxw();m.Q6J("auditLog",e.timeline.recordData)}}function nr(e,t){1&e&&m._UZ(0,"object-timeline-stencil")}function lr(e,t){1&e&&(m.TgZ(0,"div",38),m._UZ(1,"system-illustration-no-records",39),m.qZA())}const or=function(e,t){return{"slds-p-horizontal--small":e,"slds-p-left--small":t}};let ar=(()=>{class ObjectTimelineFullScreen{constructor(e,t,s,i,n){this.timeline=e,this.parent=t,this.navigationTab=s,this.language=i,this.layout=n}get parentName(){return this.parent.getField("name")}get displayDetailsPanel(){return"small"!=this.layout.screenwidth}get ftsSearchTerm(){return this.timeline.filters.searchterm}set ftsSearchTerm(e){this.timeline.filters.searchterm=e,this.timeline.reload()}get date(){return this.timeline.timeRangeStart}set date(e){this.timeline.timeRangeStart=e,this.timeline.reload()}trackByFunction(e,t){return t.id}ngOnInit(){this.onResize(),this.dateInput=this.timeline.startDate,this.initialize(this.navigationTab.activeRoute.params),this.timeline.getTimelineData()}ngAfterViewInit(){this.onResize()}goModule(){this.parent.goModule()}goModel(){this.parent.goDetail()}initialize(e){this.parent.module=e.module,this.parent.id=e.id,this.timeline.parent=this.parent,this.parent.getData(!0,"",!0).subscribe((e=>{this.timeline.parent.setData(e),this.navigationTab.setTabInfo({displayname:this.parent.getField("summary_text")+" • timeline"})}))}onScroll(e){let t=this.listContainer.element.nativeElement;t.scrollTop+t.clientHeight+50>t.scrollHeight&&this.timeline.canLoadMore()&&this.timeline.loadMore()}reload(){this.timeline.reload(),this.timeline.clearRecord()}onResize(){this.timeline.smartView=this.listContainer.element.nativeElement.clientWidth<742,this.timeline.smartFontSize=this.listContainer.element.nativeElement.clientWidth<413}}return ObjectTimelineFullScreen.ɵfac=function(e){return new(e||ObjectTimelineFullScreen)(m.Y36(Ua),m.Y36(g.o),m.Y36(Ze.d),m.Y36(h.d),m.Y36(dd.b))},ObjectTimelineFullScreen.ɵcmp=m.Xpm({type:ObjectTimelineFullScreen,selectors:[["object-timeline-full-screen"]],viewQuery:function(e,t){if(1&e&&m.Gf(Vd,7,m.s_b),2&e){let e;m.iGM(e=m.CRH())&&(t.listContainer=e.first)}},hostBindings:function(e,t){1&e&&m.NdJ("resize",(function(e){return t.onResize(e)}),!1,m.Jf7)},features:[m._Bn([Ua,g.o])],decls:43,vars:13,consts:[[1,"slds-page-header","slds-grid","slds-grid--align-spread"],[1,"slds-col"],["role","navigation","aria-label","Breadcrumbs"],[1,"slds-breadcrumb","slds-list_horizontal","slds-wrap"],[1,"slds-breadcrumb__item","slds-text-title_caps"],["href","javascript:void(0);",3,"click"],[3,"module"],[1,"slds-p-horizontal--x-small"],["label","LBL_TIMELINE"],[1,"slds-p-vertical--xx-small","slds-text-heading--x-small"],[1,"slds-p-horizontal--xx-small"],[1,"slds-page-header__col-actions","slds-grid"],["delay","1000",3,"placeholder","ngModel","ngModelChange",4,"ngIf"],[1,"slds-page-header__controls"],[1,"slds-page-header__control"],[3,"disabled","ngModel","ngModelChange"],[1,"slds-align--absolute-center","slds-button","slds-button--icon","slds-button--icon-border-filled"],[1,"slds-button","slds-button--icon","slds-button--icon-border-filled"],["icon","refresh",3,"click"],[1,"slds-grid"],["system-to-bottom","",1,"slds-size--1-of-1","slds-medium-size--5-of-12","slds-border--right","slds-scrollable",3,"ngClass","scroll"],["listContainer",""],["class","slds-height_full",4,"ngIf","ngIfElse"],["class","slds-size--7-of-12","system-to-bottom","",4,"ngIf"],["auditpanel",""],["currentlyloading",""],["nocontent",""],["delay","1000",3,"placeholder","ngModel","ngModelChange"],[1,"slds-height_full"],[4,"ngIf","ngIfElse"],[4,"ngFor","ngForOf","ngForTrackBy"],["class","slds-p-top--large",4,"ngIf"],[3,"Record","index"],[1,"slds-p-top--large"],["system-to-bottom","",1,"slds-size--7-of-12"],[3,"module","id","data",4,"ngIf","ngIfElse"],[3,"module","id","data"],[3,"auditLog"],[1,"slds-p-top_large"],[1,"slds-m-top_large"]],template:function(e,t){if(1&e&&(m.TgZ(0,"div",0)(1,"div",1)(2,"nav",2)(3,"ol",3)(4,"li",4)(5,"a",5),m.NdJ("click",(function(){return t.goModule()})),m._UZ(6,"system-label-modulename",6),m.qZA()(),m.TgZ(7,"li",4)(8,"a",5),m.NdJ("click",(function(){return t.goModel()})),m._uU(9),m.qZA()(),m.TgZ(10,"li",4)(11,"span",7),m._UZ(12,"system-label",8),m.qZA()()()(),m.TgZ(13,"div",9)(14,"span"),m._uU(15),m.qZA(),m.TgZ(16,"span",10),m._uU(17,"records found "),m.qZA()()(),m.TgZ(18,"div",11),m.YNc(19,Kd,1,2,"system-input-delayed",12),m.TgZ(20,"div",13),m._UZ(21,"div",14),m.qZA(),m.TgZ(22,"div",13)(23,"div",14)(24,"system-input-date",15),m.NdJ("ngModelChange",(function(e){return t.date=e})),m.qZA()()(),m.TgZ(25,"div",13)(26,"div",14),m._UZ(27,"object-timeline-filter",16),m.qZA()(),m.TgZ(28,"div",13)(29,"div",14)(30,"button",17)(31,"system-button-icon",18),m.NdJ("click",(function(){return t.reload()})),m.qZA()()()()()(),m.TgZ(32,"div",19)(33,"div",20,21),m.NdJ("scroll",(function(e){return t.onScroll(e)})),m.YNc(35,er,2,2,"div",22),m.qZA(),m.YNc(36,sr,2,2,"div",23),m.qZA(),m.YNc(37,ir,1,1,"ng-template",null,24,m.W1O),m.YNc(39,nr,1,0,"ng-template",null,25,m.W1O),m.YNc(41,lr,2,0,"ng-template",null,26,m.W1O)),2&e){const e=m.MAs(40);m.xp6(6),m.Q6J("module",t.parent.module),m.xp6(3),m.Oqu(t.parent.data.summary_text),m.xp6(6),m.Oqu(t.timeline.totalRecords),m.xp6(4),m.Q6J("ngIf",!t.timeline.onlyAudits),m.xp6(5),m.Q6J("disabled",t.timeline.loading)("ngModel",t.date),m.xp6(9),m.Q6J("ngClass",m.WLB(10,or,!t.timeline.smartView,t.timeline.smartView)),m.xp6(2),m.Q6J("ngIf",!t.timeline.loading)("ngIfElse",e),m.xp6(1),m.Q6J("ngIf",t.displayDetailsPanel&&!!t.timeline.recordModule)}},dependencies:[i.mk,i.sg,i.O5,l.JJ,l.On,x.J,rd.C,cd.z,ud.y,M._,Zl.M,St.W,F.H,Ud,Rd,ad,Gd,zd],encapsulation:2}),ObjectTimelineFullScreen})();const dr=["timelinecontent"];function rr(e,t){if(1&e&&(m.TgZ(0,"li"),m._UZ(1,"object-timeline-item-line",19),m.qZA()),2&e){const e=t.$implicit,s=t.index;m.xp6(1),m.Q6J("Record",e)("index",s)}}function cr(e,t){1&e&&(m.TgZ(0,"li",20),m._UZ(1,"system-spinner"),m.qZA())}function ur(e,t){if(1&e&&(m.TgZ(0,"ul"),m.YNc(1,rr,2,2,"li",17),m.YNc(2,cr,2,0,"li",18),m.qZA()),2&e){const e=m.oxw(2);m.xp6(1),m.Q6J("ngForOf",e.timeline.records)("ngForTrackBy",e.trackByFunction),m.xp6(1),m.Q6J("ngIf",e.timeline.loadingMore)}}function mr(e,t){if(1&e&&(m.TgZ(0,"div",15),m.YNc(1,ur,3,3,"ul",16),m.qZA()),2&e){const e=m.oxw(),t=m.MAs(18);m.xp6(1),m.Q6J("ngIf",0!==e.timeline.records.length)("ngIfElse",t)}}function hr(e,t){if(1&e){const e=m.EpF();m.TgZ(0,"button",21),m.NdJ("click",(function(){m.CHM(e);const t=m.oxw();return m.KtG(t.timeline.loadMore())})),m.TgZ(1,"span"),m._UZ(2,"system-label",22),m.qZA()()}}function gr(e,t){1&e&&(m.TgZ(0,"div",23),m._UZ(1,"system-illustration-no-records"),m.qZA())}function pr(e,t){1&e&&m._UZ(0,"object-timeline-stencil")}const fr=function(e,t){return{"slds-p-horizontal--small":e,"slds-p-left--small":t}};let br=(()=>{class ObjectTimeline{constructor(e,t,s,i,n){this.element=e,this.timeline=t,this.language=s,this.model=i,this.el=n}ngOnInit(){this.timeline.parent=this.model,this.timeline.getTimelineData()}ngAfterViewInit(){this.onResize()}reload(){this.timeline.reload()}trackByFunction(e,t){return t.id}get ftsSearchTerm(){return this.timeline.filters.searchterm}set ftsSearchTerm(e){this.timeline.filters.searchterm=e,this.timeline.reload()}closeDialog(){this.timeline.reload()}get date(){return this.timeline.timeRangeStart}set date(e){this.timeline.timeRangeStart=e,this.timeline.reload()}onResize(){this.timeline.smartView=this.el.nativeElement.getBoundingClientRect().width<730,this.timeline.smartFontSize=this.el.nativeElement.getBoundingClientRect().width<380}}return ObjectTimeline.ɵfac=function(e){return new(e||ObjectTimeline)(m.Y36(m.SBq),m.Y36(Ua),m.Y36(h.d),m.Y36(g.o),m.Y36(m.SBq))},ObjectTimeline.ɵcmp=m.Xpm({type:ObjectTimeline,selectors:[["object-timeline"]],viewQuery:function(e,t){if(1&e&&m.Gf(dr,5),2&e){let e;m.iGM(e=m.CRH())&&(t.content=e.first)}},hostBindings:function(e,t){1&e&&m.NdJ("resize",(function(e){return t.onResize(e)}),!1,m.Jf7)},features:[m._Bn([Je.e,Ua])],decls:21,vars:13,consts:[[1,"slds-grid","slds-grid--vertical-align-center","slds-grid--align-end"],["timelineheader",""],[3,"disabled","ngModel","ngModelChange"],["delay","1000",1,"slds-p-horizontal--xx-small",3,"placeholder","ngModel","ngModelChange"],[1,"slds-button","slds-button--icon",3,"title","click"],["icon","refresh",1,"slds-p-horizontal--xxx-small","slds-icon-text-default"],[1,"slds-is-relative","spiceActivitiyTimelineHeader"],[1,"slds-p-vertical--xx-small","slds-text-heading--x-small"],[1,"slds-p-horizontal--xx-small"],[1,"slds-size--1-of-1","slds-border--right",3,"ngClass"],["class","slds-height_full",4,"ngIf","ngIfElse"],[1,"slds-align--absolute-center","slds-m-top--x-large","slds-m-right--small"],["class","slds-button slds-button--neutral","type","button",3,"click",4,"ngIf"],["norecords",""],["loading",""],[1,"slds-height_full"],[4,"ngIf","ngIfElse"],[4,"ngFor","ngForOf","ngForTrackBy"],["class","slds-m-top--xx-large slds-p-top--medium",4,"ngIf"],[3,"Record","index"],[1,"slds-m-top--xx-large","slds-p-top--medium"],["type","button",1,"slds-button","slds-button--neutral",3,"click"],["label","LBL_MORE"],[1,"slds-p-top--large"]],template:function(e,t){if(1&e&&(m.TgZ(0,"div",0,1)(2,"system-input-date",2),m.NdJ("ngModelChange",(function(e){return t.date=e})),m.qZA(),m.TgZ(3,"system-input-delayed",3),m.NdJ("ngModelChange",(function(e){return t.ftsSearchTerm=e})),m.qZA(),m.TgZ(4,"button",4),m.NdJ("click",(function(){return t.reload()})),m._UZ(5,"system-button-icon",5),m.qZA(),m._UZ(6,"object-timeline-filter"),m.qZA(),m.TgZ(7,"div",6)(8,"div",7)(9,"span"),m._uU(10),m.qZA(),m.TgZ(11,"span",8),m._uU(12,"records found "),m.qZA()()(),m.TgZ(13,"div",9),m.YNc(14,mr,2,2,"div",10),m.qZA(),m.TgZ(15,"div",11),m.YNc(16,hr,3,0,"button",12),m.qZA(),m.YNc(17,gr,2,0,"ng-template",null,13,m.W1O),m.YNc(19,pr,1,0,"ng-template",null,14,m.W1O)),2&e){const e=m.MAs(20);m.xp6(2),m.Q6J("disabled",t.timeline.loading)("ngModel",t.date),m.xp6(1),m.Q6J("placeholder",t.language.getLabel("LBL_SEARCH"))("ngModel",t.ftsSearchTerm),m.xp6(1),m.Q6J("title",t.language.getLabel("LBL_RELOAD")),m.xp6(6),m.Oqu(t.timeline.totalRecords),m.xp6(3),m.Q6J("ngClass",m.WLB(10,fr,!t.timeline.smartView,t.timeline.smartView)),m.xp6(1),m.Q6J("ngIf",!t.timeline.loading)("ngIfElse",e),m.xp6(2),m.Q6J("ngIf",t.timeline.canLoadMore()&&!t.timeline.loadingMore)}},dependencies:[i.mk,i.sg,i.O5,l.JJ,l.On,x.J,rd.C,cd.z,ud.y,M._,St.W,Ud,Rd,ad],encapsulation:2}),ObjectTimeline})();function _r(e,t){1&e&&m._UZ(0,"system-spinner",8)}function yr(e,t){if(1&e&&(m.TgZ(0,"tr")(1,"td",19)(2,"div",14),m._uU(3),m.qZA()(),m.TgZ(4,"td",19)(5,"div",14),m._uU(6),m.qZA()(),m.TgZ(7,"td",19)(8,"div",14),m._uU(9),m.qZA()()()),2&e){const e=t.$implicit,s=m.oxw(2);m.xp6(3),m.hij("",s.language.getFieldDisplayName(s.model.module,e.field_name)," "),m.xp6(3),m.Oqu(e.before_value_string),m.xp6(3),m.Oqu(e.after_value_string)}}function vr(e,t){if(1&e&&(m.TgZ(0,"table",9)(1,"thead")(2,"tr")(3,"td",10)(4,"div",11),m._uU(5),m.qZA()()(),m.TgZ(6,"tr",12)(7,"th",13)(8,"div",14),m._UZ(9,"system-label",15),m.qZA()(),m.TgZ(10,"th",13)(11,"div",14),m._UZ(12,"system-label",16),m.qZA()(),m.TgZ(13,"th",13)(14,"div",14),m._UZ(15,"system-label",17),m.qZA()()()(),m.TgZ(16,"tbody"),m.YNc(17,yr,10,3,"tr",18),m.qZA()()),2&e){const e=m.oxw();m.xp6(5),m.AsE(" ",e.auditLog.user_name," / ",e.auditLog.date," "),m.xp6(12),m.Q6J("ngForOf",e.auditLog.data)}}let xr=(()=>{class ObjectTimelineAuditlogModal{constructor(e,t,s){this.language=e,this.metadata=t,this.model=s,this.self=null,this.loading=!0,this.moduleFields=[]}ngOnInit(){for(let e in this.metadata.getModuleFields(this.model.module))this.moduleFields.push({name:e,display:this.language.getFieldDisplayName(this.model.module,e)});this.moduleFields.sort(((e,t)=>e.display.toLowerCase()>t.display.toLowerCase()?1:-1)),this.loading=!1}hideAuditLog(){this.self.destroy()}}return ObjectTimelineAuditlogModal.ɵfac=function(e){return new(e||ObjectTimelineAuditlogModal)(m.Y36(h.d),m.Y36(b.Pu),m.Y36(g.o,8))},ObjectTimelineAuditlogModal.ɵcmp=m.Xpm({type:ObjectTimelineAuditlogModal,selectors:[["object-timeline-auditlog-modal"]],decls:9,vars:2,consts:[["size","large"],[3,"close"],["label","LBL_LOGGED_CHANGES"],["margin","none"],["class","slds-p-around--medium",4,"ngIf"],["class","slds-table slds-table--bordered slds-table--cell-buffer",4,"ngIf"],[1,"slds-button","slds-button--brand",3,"click"],["label","LBL_CLOSE"],[1,"slds-p-around--medium"],[1,"slds-table","slds-table--bordered","slds-table--cell-buffer"],["colspan","3",1,"slds-theme--shade"],[1,"slds-text-heading--label"],[1,"slds-text-title--caps"],["scope","col"],[1,"slds-truncate"],["label","LBL_FIELD"],["label","LBL_BEFOREVALUE"],["label","LBL_AFTERVALUE"],[4,"ngFor","ngForOf"],["scope","row"]],template:function(e,t){1&e&&(m.TgZ(0,"system-modal",0)(1,"system-modal-header",1),m.NdJ("close",(function(){return t.hideAuditLog()})),m._UZ(2,"system-label",2),m.qZA(),m.TgZ(3,"system-modal-content",3),m.YNc(4,_r,1,0,"system-spinner",4),m.YNc(5,vr,18,3,"table",5),m.qZA(),m.TgZ(6,"system-modal-footer")(7,"button",6),m.NdJ("click",(function(){return t.hideAuditLog()})),m._UZ(8,"system-label",7),m.qZA()()()),2&e&&(m.xp6(4),m.Q6J("ngIf",t.loading),m.xp6(1),m.Q6J("ngIf",!t.loading))},dependencies:[i.sg,i.O5,M._,Fe.j,qe.x,Ee.p,Ye.y,St.W],encapsulation:2}),ObjectTimelineAuditlogModal})();const Zr=["object-popover-body-item",""];function wr(e,t){1&e&&m._UZ(0,"system-spinner")}function Tr(e,t){if(1&e&&(m.TgZ(0,"div",10)(1,"dl")(2,"dt"),m._UZ(3,"field-label",11),m.qZA(),m.TgZ(4,"dd"),m._UZ(5,"field-container",12),m.qZA()()()),2&e){const e=t.$implicit;m.xp6(3),m.Q6J("fieldname",e.field)("fieldconfig",e.fieldconfig),m.xp6(2),m.Q6J("field",e.field)("fieldconfig",e.fieldconfig)("fielddisplayclass","slds-truncate")}}function Cr(e,t){if(1&e&&(m.TgZ(0,"div",8),m.YNc(1,Tr,6,5,"div",9),m.qZA()),2&e){const e=m.oxw();m.xp6(1),m.Q6J("ngForOf",e.fields)}}let Ar=(()=>{class ObjectPopoverBodyItem{constructor(e,t,s){this.language=e,this.model=t,this.metadata=s,this.module="",this.id="",this.modelIsLoading=!0,this.fields=[]}ngOnInit(){this.model.module=this.module,this.model.id=this.id,this.modelIsLoading=!0,this.model.getData(!0).subscribe((e=>{this.modelIsLoading=!1}));let e=this.metadata.getComponentConfig("ObjectPopoverBodyItem",this.model.module);e.fieldset&&(this.fields=this.metadata.getFieldSetFields(e.fieldset))}}return ObjectPopoverBodyItem.ɵfac=function(e){return new(e||ObjectPopoverBodyItem)(m.Y36(h.d),m.Y36(g.o),m.Y36(b.Pu))},ObjectPopoverBodyItem.ɵcmp=m.Xpm({type:ObjectPopoverBodyItem,selectors:[["","object-popover-body-item",""]],hostAttrs:[1,"slds-popover__body-list"],inputs:{module:"module",id:"id"},features:[m._Bn([g.o,Je.e])],attrs:Zr,decls:9,vars:4,consts:[[1,"slds-media","slds-m-bottom--small","slds-media--center"],[1,"slds-media__figure"],[3,"module"],[1,"slds-media__body"],[4,"ngIf"],[1,"slds-text-heading--medium","slds-truncate"],["href","javascript:void(0);",3,"click"],["class","slds-grid slds-wrap slds-grid--pull-padded",4,"ngIf"],[1,"slds-grid","slds-wrap","slds-grid--pull-padded"],["class","slds-p-horizontal--small slds-size--1-of-2 slds-p-bottom--x-small",4,"ngFor","ngForOf"],[1,"slds-p-horizontal--small","slds-size--1-of-2","slds-p-bottom--x-small"],[3,"fieldname","fieldconfig"],[3,"field","fieldconfig","fielddisplayclass"]],template:function(e,t){1&e&&(m.TgZ(0,"div",0)(1,"div",1),m._UZ(2,"system-icon",2),m.qZA(),m.TgZ(3,"div",3),m.YNc(4,wr,1,0,"system-spinner",4),m.TgZ(5,"p",5)(6,"a",6),m.NdJ("click",(function(){return t.model.goDetail()})),m._uU(7),m.qZA()()()(),m.YNc(8,Cr,2,1,"div",7)),2&e&&(m.xp6(2),m.Q6J("module",t.model.module),m.xp6(2),m.Q6J("ngIf",t.modelIsLoading),m.xp6(3),m.Oqu(t.model.data.summary_text),m.xp6(1),m.Q6J("ngIf",!t.modelIsLoading))},dependencies:[i.sg,i.O5,Ti.q,Ne.j,Z.f,St.W],encapsulation:2}),ObjectPopoverBodyItem})();const kr=["object-popover-header",""];function Lr(e,t){if(1&e&&(m.TgZ(0,"div",8)(1,"dl")(2,"dt"),m._UZ(3,"field-label",9),m.qZA(),m.TgZ(4,"dd"),m._UZ(5,"field-container",10),m.qZA()()()),2&e){const e=t.$implicit;m.xp6(3),m.Q6J("fieldname",e.field)("fieldconfig",e.fieldconfig),m.xp6(2),m.Q6J("field",e.field)("fieldconfig",e.fieldconfig)("fielddisplayclass","slds-truncate")}}let Mr=(()=>{class ObjectPopoverHeader{constructor(e,t,s){this.language=e,this.model=t,this.metadata=s,this.fields=[]}ngOnInit(){let e=this.metadata.getComponentConfig("ObjectPopoverHeader",this.model.module);e.fieldset&&(this.fields=this.metadata.getFieldSetFields(e.fieldset))}}return ObjectPopoverHeader.ɵfac=function(e){return new(e||ObjectPopoverHeader)(m.Y36(h.d),m.Y36(g.o),m.Y36(b.Pu))},ObjectPopoverHeader.ɵcmp=m.Xpm({type:ObjectPopoverHeader,selectors:[["","object-popover-header",""]],hostAttrs:[1,"slds-popover__header"],features:[m._Bn([Je.e])],attrs:kr,decls:9,vars:3,consts:[[1,"slds-media","slds-m-bottom--small","slds-media--center"],[1,"slds-media__figure"],[3,"module"],[1,"slds-media__body"],[1,"slds-text-heading--medium","slds-hyphenate"],["href","javascript:void(0);",3,"click"],[1,"slds-grid","slds-wrap","slds-grid--pull-padded"],["class","slds-p-horizontal--small slds-size--1-of-2 slds-p-bottom--x-small",4,"ngFor","ngForOf"],[1,"slds-p-horizontal--small","slds-size--1-of-2","slds-p-bottom--x-small"],[3,"fieldname","fieldconfig"],[3,"field","fieldconfig","fielddisplayclass"]],template:function(e,t){1&e&&(m.TgZ(0,"div",0)(1,"div",1),m._UZ(2,"system-icon",2),m.qZA(),m.TgZ(3,"div",3)(4,"p",4)(5,"a",5),m.NdJ("click",(function(){return t.model.goDetail()})),m._uU(6),m.qZA()()()(),m.TgZ(7,"div",6),m.YNc(8,Lr,6,5,"div",7),m.qZA()),2&e&&(m.xp6(2),m.Q6J("module",t.model.module),m.xp6(4),m.Oqu(t.model.data.summary_text),m.xp6(2),m.Q6J("ngForOf",t.fields))},dependencies:[i.sg,Ti.q,Ne.j,Z.f],encapsulation:2}),ObjectPopoverHeader})(),Sr=(()=>{class ObjectComponents{}return ObjectComponents.ɵfac=function(e){return new(e||ObjectComponents)},ObjectComponents.ɵmod=m.oAB({type:ObjectComponents}),ObjectComponents.ɵinj=m.cJS({imports:[i.ez,n._t,l.u5,d.ObjectFields,r.SystemComponents,a.o,c.Cl,o.Bz]}),ObjectComponents})();("undefined"==typeof ngJitMode||ngJitMode)&&m.kYT(Sr,{declarations:[Te,ke,A.l,_e,k.M,O,ye.s,Me.p,Se._,J.S,Le.s,Ie.g,Oe,Qe,Ue,De,je,p,He,ze,Ve,Ke,$e,Xe,We,et.B,st,it.g,nt.H,lt.z,ot,dt,N.X,D,q.i,Oi.Q,Ji.C,Ni.V,E.w,j,me,H,K,le,ge,Ei,Di,ut,mt,Bt,Ht,zt,pt,ft,yt,wt,Tt,Lt,qt,Ro,Qt,Dt,$t,Wt,Xt,ss,di,wi,Hs.Z,vi,ti,Ii,Ci,ki,Ri,Pi,zi,Vi,Ki,$i.Y,Xi.d,cn,Zn,xn,mn,Nn,Tn,kn,Pn,qn,Yn,Kn,Wn.E,$n.g,Xn.C,el.s,ol,al.X,pl,cl,Ds,Ls,xl,Xs,Tl,sl.K,Cl,Al.Q,rs,Ql.F,Bl,zl,Vl.b,lo,ro,co,Yl,ql,_o,vo,xo,To.X,Zo.x,wo.D,Ao,es.T,ts.U,is,Rs,fl,No,Jo,Lo,js.d,Ml.f,Sl.Z,Nl,zo,Vo,Ll.n,kl.Y,u.E,hi,yi,br,wd,Ud,Va,id,Rd,ad,ar,Gd,xr,zd,la,Xo,da,fa,ca,si.Z,ba,Ta,Qa,Ar,Mr],imports:[i.ez,n._t,l.u5,d.ObjectFields,r.SystemComponents,a.o,c.Cl,o.Bz],exports:[_e,ye.s,et.B,$i.Y,Zn,xn,J.S,it.g,nt.H,Ao,el.s,sl.K,al.X,js.d,Ml.f,Sl.Z,zo,kn,hi,yi,Wn.E,$n.g,Xn.C,cl,Ql.F,Vl.b,Hs.Z,Me.p,Ie.g,si.Z,Ds,A.l,q.i,N.X,k.M,Se._,Ds,u.E,Xi.d,To.X,Zo.x,wo.D,Xo,Qa]})},7443:(e,t,s)=>{"use strict";s.d(t,{E:()=>n});var i=s(1571);let n=(()=>{class ObjectKeyValuesPipe{transform(e){let t=[];for(let s in e)t.push({key:s,value:e[s]});return t}}return ObjectKeyValuesPipe.ɵfac=function(e){return new(e||ObjectKeyValuesPipe)},ObjectKeyValuesPipe.ɵpipe=i.Yjl({name:"objectkeyvalues",type:ObjectKeyValuesPipe,pure:!0}),ObjectKeyValuesPipe})()},3634:(e,t,s)=>{"use strict";s.d(t,{j:()=>u});var i=s(1571),n=s(5710),l=s(5329),o=s(4154),a=s(2294),d=s(6895);const r=["fieldcontainer"],c=function(e){return{"slds-hidden":e}};let u=(()=>{class fieldContainer{constructor(e,t,s,i){this.model=e,this.language=t,this.metadata=s,this.view=i,this.fieldconfig={},this.fielddisplayclass="slds-text-body--regular slds-truncate slds-m-vertical--small spice-fieldbody"}set fieldname(e){this.field=e}get fieldname(){return this.field}get stati(){return this.model.getFieldStati(this.field)}ngAfterViewInit(){this.buildContainer()}buildContainer(){this.metadata.addComponent(this.getFieldType(),this.fieldcontainer).subscribe((e=>{e.instance.fieldname=this.field,e.instance.fieldconfig=this.fieldconfig,e.instance.fielddisplayclass=this.fielddisplayclass}))}getFieldType(){let e="";if(!this.model.checkFieldAccess(this.field))return"fieldNotAuthorized";e="blank"===this.field?"blank":this.fieldconfig.fieldtype?this.fieldconfig.fieldtype:this.metadata.getFieldType(this.model.module,this.field);let t=this.metadata.getFieldTypeComponent(e);return t||"fieldGeneric"}}return fieldContainer.ɵfac=function(e){return new(e||fieldContainer)(i.Y36(n.o),i.Y36(l.d),i.Y36(o.Pu),i.Y36(a.e))},fieldContainer.ɵcmp=i.Xpm({type:fieldContainer,selectors:[["field-container"]],viewQuery:function(e,t){if(1&e&&i.Gf(r,7,i.s_b),2&e){let e;i.iGM(e=i.CRH())&&(t.fieldcontainer=e.first)}},inputs:{field:"field",fieldconfig:"fieldconfig",fielddisplayclass:"fielddisplayclass",fieldname:"fieldname"},decls:3,vars:3,consts:[[3,"ngClass"],["fieldcontainer",""]],template:function(e,t){1&e&&(i.TgZ(0,"div",0),i._UZ(1,"div",null,1),i.qZA()),2&e&&i.Q6J("ngClass",i.VKq(1,c,t.stati.hidden))},dependencies:[d.mk],encapsulation:2}),fieldContainer})()},7040:(e,t,s)=>{"use strict";s.d(t,{O:()=>y});var i=s(1571),n=s(727),l=s(5710),o=s(2294),a=s(5329),d=s(4154),r=s(7774),c=s(6895),u=s(433),m=s(6367),h=s(3208),g=s(5638);const p=["focus"];function f(e,t){if(1&e&&i._UZ(0,"field-label",3),2&e){const e=i.oxw();i.Q6J("fieldname",e.fieldname)("fieldconfig",e.fieldconfig)}}function b(e,t){if(1&e&&(i.TgZ(0,"field-generic-display",4),i._uU(1),i.qZA()),2&e){const e=i.oxw();i.Q6J("fielddisplayclass",e.fielddisplayclass)("editable",e.isEditable())("fieldconfig",e.fieldconfig)("title",e.value)("fieldid",e.fieldid),i.xp6(1),i.hij(" ",e.value,"\n")}}function _(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"div",5)(1,"input",6,7),i.NdJ("ngModelChange",(function(t){i.CHM(e);const s=i.oxw();return i.KtG(s.value=t)})),i.qZA(),i._UZ(3,"field-messages",8),i.qZA()}if(2&e){const e=i.oxw();i.Q6J("ngClass",e.css_classes),i.xp6(1),i.Q6J("placeholder",e.displayLabel?"":e.language.getFieldDisplayName(e.model.module,e.fieldname))("ngModel",e.value)("maxlength",e.fieldlength)("autocomplete",e.fieldid)("ngModelOptions",e.modelOptions),i.xp6(2),i.Q6J("fieldname",e.fieldname)}}let y=(()=>{class fieldGeneric{constructor(e,t,s,i,l){this.model=e,this.view=t,this.language=s,this.metadata=i,this.router=l,this.fieldname="",this.fieldconfig={},this.fielddisplayclass="",this.fieldid="",this.fielddefs={},this.fieldlength=999,this.subscriptions=new n.w0,this._css_classes=[],this.fieldid=this.model.generateGuid(),this.subscriptions.add(this.view.mode$.subscribe((e=>this.handleViewModeChange(e))))}handleViewModeChange(e){"edit"==e&&this.view.editfieldid&&this.view.editfieldid==this.fieldid&&this.setFocus()}get field_defs(){return this._field_defs||(this._field_defs=this.metadata.getFieldDefs(this.model.module,this.fieldname)),this._field_defs}get css_classes(){return this.getStati().invalid?this.addCssClass("slds-has-error"):this.removeCssClass("slds-has-error"),this._css_classes}get modelOptions(){return{updateOn:"blur"}}get value(){return this.model.getField(this.fieldname)}set value(e){this.model.setField(this.fieldname,e)}get errors(){return this.model.getFieldMessages(this.fieldname,"error")}get displayLabel(){return this.view.displayLabels&&!0!==this.fieldconfig.hidelabel}ngOnInit(){this.fielddefs=this.metadata.getFieldDefs(this.model.module,this.fieldname),this.fielddefs&&this.fielddefs.len&&(this.fieldlength=this.fielddefs.len)}ngAfterViewInit(){this.view.isEditMode()&&this.view.editfieldname&&this.view.editfieldname==this.fieldname&&this.setFocus()}setFocus(){setTimeout((()=>{this.focuselement&&this.focuselement.element.nativeElement.focus()}))}getStati(e=this.fieldname){let t=this.model.getFieldStati(e);return t.editable&&(!this.view.isEditable||t.readonly||this.fieldconfig.readonly)&&(t.editable=!1),t}isEditable(e=this.fieldname){return(this.model.checkAccess("edit")||this.model.checkAccess("create"))&&this.getStati(e).editable&&!this.getStati(e).readonly&&!this.getStati(e).disabled&&!this.getStati(e).hidden}isEditMode(){return this.view.isEditMode()&&this.isEditable()}displayLink(){try{return this.view.displayLinks&&this.fieldconfig.link&&this.model.checkAccess("detail")}catch(e){return!1}}setEditMode(){this.model.startEdit(),this.view.setEditMode()}getFieldClass(){return this.css_classes}fieldHasError(e){return this.hasFieldErrors(e)}hasFieldErrors(e=this.fieldname){return!(!this.getStati(e).invalid&&!this.errors)}goRecord(){this.router.navigate(["/module/"+this.model.module+"/"+this.model.id])}addCssClass(e){return this._css_classes.includes(e)||this._css_classes.push(e),!0}removeCssClass(e){return this._css_classes.includes(e)&&this._css_classes.splice(this._css_classes.indexOf(e),1),!0}toggleCssClass(e){return this._css_classes.includes(e)?this.removeCssClass(e):this.addCssClass(e),!0}setFieldError(e){return this.model.setFieldMessage("error",e,this.fieldname,this.fieldid)}clearFieldError(){return this.model.resetFieldMessages(this.fieldname,"error",this.fieldid)}ngOnDestroy(){this.subscriptions.unsubscribe()}}return fieldGeneric.ɵfac=function(e){return new(e||fieldGeneric)(i.Y36(l.o),i.Y36(o.e),i.Y36(a.d),i.Y36(d.Pu),i.Y36(r.F0))},fieldGeneric.ɵcmp=i.Xpm({type:fieldGeneric,selectors:[["field-generic"]],viewQuery:function(e,t){if(1&e&&i.Gf(p,5,i.s_b),2&e){let e;i.iGM(e=i.CRH())&&(t.focuselement=e.first)}},inputs:{fieldname:"fieldname",fieldconfig:"fieldconfig",fielddisplayclass:"fielddisplayclass"},decls:3,vars:3,consts:[[3,"fieldname","fieldconfig",4,"ngIf"],[3,"fielddisplayclass","editable","fieldconfig","title","fieldid",4,"ngIf"],["class","slds-form-element__control slds-m-vertical--xx-small",3,"ngClass",4,"ngIf"],[3,"fieldname","fieldconfig"],[3,"fielddisplayclass","editable","fieldconfig","title","fieldid"],[1,"slds-form-element__control","slds-m-vertical--xx-small",3,"ngClass"],["type","text",1,"slds-input",3,"placeholder","ngModel","maxlength","autocomplete","ngModelOptions","ngModelChange"],["focus",""],[3,"fieldname"]],template:function(e,t){1&e&&(i.YNc(0,f,1,2,"field-label",0),i.YNc(1,b,2,6,"field-generic-display",1),i.YNc(2,_,4,7,"div",2)),2&e&&(i.Q6J("ngIf",t.displayLabel),i.xp6(1),i.Q6J("ngIf",!t.isEditMode()),i.xp6(1),i.Q6J("ngIf",t.isEditable()&&t.isEditMode()))},dependencies:[c.mk,c.O5,u.Fj,u.JJ,u.nD,u.On,m.q,h.D,g.a],encapsulation:2}),fieldGeneric})()},3208:(e,t,s)=>{"use strict";s.d(t,{D:()=>Z});var i=s(1571),n=s(5710),l=s(2294),o=s(5329),a=s(7017),d=s(6895),r=s(2656),c=s(2803),u=s(1790);function m(e,t){1&e&&i._UZ(0,"system-stencil")}function h(e,t){1&e&&i.GkF(0)}function g(e,t){if(1&e&&(i.TgZ(0,"span",9),i.YNc(1,h,1,0,"ng-container",10),i.qZA()),2&e){i.oxw(2);const e=i.MAs(5);i.xp6(1),i.Q6J("ngTemplateOutlet",e)}}function p(e,t){1&e&&i.GkF(0)}function f(e,t){if(1&e&&i.YNc(0,p,1,0,"ng-container",10),2&e){i.oxw(2);const e=i.MAs(5);i.Q6J("ngTemplateOutlet",e)}}function b(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"button",11),i.NdJ("click",(function(){i.CHM(e);const t=i.oxw(2);return i.KtG(t.setEditMode())})),i._UZ(1,"system-button-icon",12),i.qZA()}2&e&&(i.xp6(1),i.Q6J("icon","edit"))}const _=function(e){return{"slds-truncate":e}};function y(e,t){if(1&e&&(i.TgZ(0,"div",4)(1,"div",5),i.YNc(2,g,2,1,"span",6),i.YNc(3,f,1,1,"ng-template",null,7,i.W1O),i.qZA(),i.YNc(5,b,2,1,"button",8),i.qZA()),2&e){const e=i.MAs(4),t=i.oxw();i.xp6(1),i.Q6J("ngClass",i.VKq(5,_,t._truncate))("ngStyle",t.fieldMaxWidth),i.xp6(1),i.Q6J("ngIf",t.link)("ngIfElse",e),i.xp6(3),i.Q6J("ngIf",t.editable)}}function v(e,t){1&e&&i.Hsn(0)}const x=["*"];let Z=(()=>{class fieldGenericDisplay{constructor(e,t,s,i){this.model=e,this.view=t,this.language=s,this.navigationtab=i,this.editable=!1,this.fieldconfig={},this.fielddisplayclass="",this.fieldid="",this._truncate=!0}set truncate(e){this._truncate=!1}isEditMode(){return!(!this.view.isEditMode()||!this.editable)}get fieldMaxWidth(){if(this.editable)return{"max-width":"calc(100% - 20px)"}}get link(){try{return this.fieldconfig.link&&this.model.checkAccess("detail")}catch(e){return!1}}setEditMode(){this.editable&&(this.model.startEdit(),this.view.setEditMode(this.fieldid))}goRecord(){this.link&&this.model.goDetail(this.navigationtab?.tabid)}}return fieldGenericDisplay.ɵfac=function(e){return new(e||fieldGenericDisplay)(i.Y36(n.o),i.Y36(l.e),i.Y36(o.d),i.Y36(a.d,8))},fieldGenericDisplay.ɵcmp=i.Xpm({type:fieldGenericDisplay,selectors:[["field-generic-display"]],inputs:{editable:"editable",fieldconfig:"fieldconfig",fielddisplayclass:"fielddisplayclass",fieldid:"fieldid",truncate:["field-generic-display-notruncate","truncate"]},ngContentSelectors:x,decls:6,vars:3,consts:[[3,"ngClass","dblclick"],[4,"ngIf","ngIfElse"],["displaycontent",""],["content",""],[1,"slds-size--1-of-1","slds-grid","slds-grid--vertical-align-center","slds-grid--align-spread",2,"min-height","19px"],[1,"slds-grow",3,"ngClass","ngStyle"],["system-model-popover","",4,"ngIf","ngIfElse"],["nolink",""],["class","slds-button slds-button--icon spice-button-icon-light slds-m-left--xx-small",3,"click",4,"ngIf"],["system-model-popover",""],[4,"ngTemplateOutlet"],[1,"slds-button","slds-button--icon","spice-button-icon-light","slds-m-left--xx-small",3,"click"],[3,"icon"]],template:function(e,t){if(1&e&&(i.F$t(),i.TgZ(0,"div",0),i.NdJ("dblclick",(function(){return t.setEditMode()})),i.YNc(1,m,1,0,"system-stencil",1),i.YNc(2,y,6,7,"ng-template",null,2,i.W1O),i.YNc(4,v,1,0,"ng-template",null,3,i.W1O),i.qZA()),2&e){const e=i.MAs(3);i.Q6J("ngClass",t.fielddisplayclass),i.xp6(1),i.Q6J("ngIf",t.model.isLoading||t.view.isLoading)("ngIfElse",e)}},dependencies:[d.mk,d.O5,d.tP,d.PC,r.J,c.B,u.g],encapsulation:2}),fieldGenericDisplay})()},6367:(e,t,s)=>{"use strict";s.d(t,{q:()=>_});var i=s(1571),n=s(5710),l=s(4154),o=s(2294),a=s(2422),d=s(5329),r=s(3917),c=s(6895),u=s(3463),m=s(7674),h=s(8594);function g(e,t){1&e&&(i.TgZ(0,"abbr",6),i._uU(1,"*"),i.qZA())}function p(e,t){if(1&e&&i._UZ(0,"system-label-fieldname",7),2&e){const e=i.oxw();i.Q6J("field",e.fieldname)("fieldconfig",e.fieldconfig)("module",e.model.module)("length",e.view.labels)}}function f(e,t){if(1&e&&i._UZ(0,"system-label",8),2&e){const e=i.oxw();i.Q6J("label",e.fieldconfig.label)("length",e.view.labels)}}function b(e,t){if(1&e&&i._UZ(0,"system-icon-help-text",9),2&e){const e=i.oxw();i.Q6J("helpText",e.helpText)}}let _=(()=>{class fieldLabel{constructor(e,t,s,i,n,l,o){this.model=e,this.metadata=t,this.view=s,this.userPreferences=i,this.language=n,this.footer=l,this.injector=o,this.fieldname="",this.fieldconfig={},this.addclasses="slds-form-element__label",this.showHelp=!1}get stati(){let e=this.model.getFieldStati(this.fieldname);return!e.editable||this.view.isEditable&&!this.fieldconfig.readonly||(e.editable=!1),this.fieldconfig.required&&(e.required=!0),e}isRequired(){return this.stati.editable&&this.stati.required}isEditable(){return this.stati.editable}isEditMode(){return!(!this.view.isEditMode()||!this.isEditable())}get hidden(){return!!this.fieldconfig.hidelabel}get label(){if(this.fieldconfig.label){if(this.fieldconfig.label.indexOf(":")>0){let e=this.fieldconfig.label.split(":");return this.language.getLabel(e[1],e[0],this.view.labels)}return this.language.getLabel(this.fieldconfig.label,this.model.module,this.view.labels)}return this.language.getFieldDisplayName(this.model.module,this.fieldname,this.fieldconfig,this.view.labels)}get helpText(){if(this.userPreferences.toUse.help_icon&&"hidden"==this.userPreferences.toUse.help_icon)return!1;if(this.fieldconfig.helpText){if(this.fieldconfig.helpText.indexOf(":")>0){let e=this.fieldconfig.helpText.split(":");return this.language.getLabel(e[1],e[0],this.view.labels)}return this.language.getLabel(this.fieldconfig.helpText,this.model.module,this.view.labels)}return this.language.getFieldHelpText(this.model.module,this.fieldname,this.fieldconfig)}showContext(e){}}return fieldLabel.ɵfac=function(e){return new(e||fieldLabel)(i.Y36(n.o),i.Y36(l.Pu),i.Y36(o.e),i.Y36(a.z),i.Y36(d.d),i.Y36(r.M),i.Y36(i.zs3))},fieldLabel.ɵcmp=i.Xpm({type:fieldLabel,selectors:[["field-label"]],inputs:{fieldname:"fieldname",fieldconfig:"fieldconfig",addclasses:"addclasses"},decls:6,vars:5,consts:[[2,"display","flow-root",3,"contextmenu"],[1,"slds-truncate","slds-float_left",3,"ngClass"],["class","slds-required",4,"ngIf"],[3,"field","fieldconfig","module","length",4,"ngIf"],[3,"label","length",4,"ngIf"],[3,"helpText",4,"ngIf"],[1,"slds-required"],[3,"field","fieldconfig","module","length"],[3,"label","length"],[3,"helpText"]],template:function(e,t){1&e&&(i.TgZ(0,"div",0),i.NdJ("contextmenu",(function(e){return t.showContext(e)})),i.TgZ(1,"label",1),i.YNc(2,g,2,0,"abbr",2),i.YNc(3,p,1,4,"system-label-fieldname",3),i.YNc(4,f,1,2,"system-label",4),i.qZA(),i.YNc(5,b,1,1,"system-icon-help-text",5),i.qZA()),2&e&&(i.xp6(1),i.Q6J("ngClass",t.addclasses),i.xp6(1),i.Q6J("ngIf",t.stati.editable&&t.stati.required),i.xp6(1),i.Q6J("ngIf",!t.fieldconfig.label),i.xp6(1),i.Q6J("ngIf",t.fieldconfig.label),i.xp6(1),i.Q6J("ngIf",t.helpText))},dependencies:[c.mk,c.O5,u._,m.h,h.h],encapsulation:2}),fieldLabel})()},4271:(e,t,s)=>{"use strict";s.d(t,{P:()=>g});var i=s(1571),n=s(5710),l=s(382),o=s(5329),a=s(5920),d=s(6895),r=s(2656),c=s(151),u=s(3026);function m(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"button",4),i.NdJ("mousedown",(function(t){i.CHM(e);const s=i.oxw();return i.KtG(s.setCurrentUser(t))})),i._UZ(1,"system-button-icon",5),i.qZA()}}function h(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"li",6),i.NdJ("mousedown",(function(t){const s=i.CHM(e).$implicit,n=i.oxw();return i.KtG(n.setParent(t,s))})),i._UZ(1,"field-lookup-recent-item",7),i.qZA()}if(2&e){const e=t.$implicit;i.xp6(1),i.Q6J("item",e)}}let g=(()=>{class fieldLookupRecent{constructor(e,t,s,n){this.model=e,this.recent=t,this.language=s,this.session=n,this.module="",this.selectedObject=new i.vpe,this.recentItems=[]}ngOnChanges(){this.getRecent()}setCurrentUser(e){e.preventDefault(),this.selectedObject.emit({id:this.session.authData.userId,text:this.session.authData.user.full_name,data:this.session.authData.user})}setParent(e,t){e.preventDefault(),this.selectedObject.emit({id:t.data.id,text:t.data.summary_text,data:t.data})}getRecent(){this.recentItems=[];this.recent.getModuleRecent(this.module).subscribe((e=>{this.recentItems=e}))}}return fieldLookupRecent.ɵfac=function(e){return new(e||fieldLookupRecent)(i.Y36(n.o),i.Y36(l.h),i.Y36(o.d),i.Y36(a.n))},fieldLookupRecent.ɵcmp=i.Xpm({type:fieldLookupRecent,selectors:[["field-lookup-recent"]],inputs:{module:"module"},outputs:{selectedObject:"selectedObject"},features:[i.TTD],decls:5,vars:3,consts:[[1,"slds-lookup__item--label","slds-text-body--small","slds-grid","slds-grid--vertical-align-center","slds-grid--align-spread"],["system-title","LBL_SET_CURRENT_USER","class","slds-button slds-button--icon","size","xx-small",3,"mousedown",4,"ngIf"],["role","listbox",1,"slds-lookup__list"],["role","presentation",3,"mousedown",4,"ngFor","ngForOf"],["system-title","LBL_SET_CURRENT_USER","size","xx-small",1,"slds-button","slds-button--icon",3,"mousedown"],["icon","user"],["role","presentation",3,"mousedown"],[3,"item"]],template:function(e,t){1&e&&(i.TgZ(0,"div",0),i._uU(1),i.YNc(2,m,2,0,"button",1),i.qZA(),i.TgZ(3,"ul",2),i.YNc(4,h,2,1,"li",3),i.qZA()),2&e&&(i.xp6(1),i.hij(" ",t.language.getModuleCombinedLabel("LBL_RECENTLYVIEWED",t.module)," "),i.xp6(1),i.Q6J("ngIf","Users"==t.module),i.xp6(2),i.Q6J("ngForOf",t.recentItems))},dependencies:[d.sg,d.O5,r.J,c.S,u.E],encapsulation:2}),fieldLookupRecent})()},3026:(e,t,s)=>{"use strict";s.d(t,{E:()=>y});var i=s(5710),n=s(2294),l=s(1571),o=s(7774),a=s(5329),d=s(4154),r=s(6895),c=s(4561),u=s(3333),m=s(3634);function h(e,t){if(1&e&&(l.TgZ(0,"span"),l._uU(1),l.qZA()),2&e){const e=l.oxw();l.xp6(1),l.Oqu(e.model.data.summary_text)}}function g(e,t){if(1&e&&(l.TgZ(0,"li",8),l._UZ(1,"field-container",12),l.qZA()),2&e){const e=l.oxw().$implicit;l.xp6(1),l.Q6J("field",e.field)("fieldconfig",e.fieldconfig)}}function p(e,t){if(1&e&&(l.ynx(0),l.YNc(1,g,2,2,"li",11),l.BQk()),2&e){const e=t.$implicit,s=l.oxw(2);l.xp6(1),l.Q6J("ngIf",s.model.getField(e.field))}}function f(e,t){if(1&e&&(l.TgZ(0,"ul",7),l.YNc(1,p,2,1,"ng-container",10),l.qZA()),2&e){const e=l.oxw();l.xp6(1),l.Q6J("ngForOf",e.mainfieldsetfields)}}function b(e,t){if(1&e&&(l.TgZ(0,"li",8),l._UZ(1,"field-container",12),l.qZA()),2&e){const e=l.oxw().$implicit;l.xp6(1),l.Q6J("field",e.field)("fieldconfig",e.fieldconfig)}}function _(e,t){if(1&e&&(l.ynx(0),l.YNc(1,b,2,2,"li",11),l.BQk()),2&e){const e=t.$implicit,s=l.oxw();l.xp6(1),l.Q6J("ngIf",s.model.getField(e.field))}}let y=(()=>{class fieldLookupRecentItem{constructor(e,t,s,i,n){this.model=e,this.router=t,this.language=s,this.metadata=i,this.view=n,this.item={},this.view.displayLabels=!1}ngOnInit(){this.model.module=this.item.module_name,this.model.id=this.item.item_id,this.model.setData(this.item.data);let e=this.metadata.getComponentConfig("GlobalHeaderSearchResultsItem",this.model.module);e&&e.mainfieldset&&(this.mainfieldsetfields=this.metadata.getFieldSetItems(e.mainfieldset)),e&&e.subfieldset&&(this.subfieldsetfields=this.metadata.getFieldSetItems(e.subfieldset))}}return fieldLookupRecentItem.ɵfac=function(e){return new(e||fieldLookupRecentItem)(l.Y36(i.o),l.Y36(o.F0),l.Y36(a.d),l.Y36(d.Pu),l.Y36(n.e))},fieldLookupRecentItem.ɵcmp=l.Xpm({type:fieldLookupRecentItem,selectors:[["field-lookup-recent-item"]],inputs:{item:"item"},features:[l._Bn([i.o,n.e])],decls:11,vars:6,consts:[["role","option",1,"slds-lookup__item-action","slds-media","slds-media--center"],["size","small",3,"module"],[1,"slds-media__body"],[1,"slds-lookup__result-text"],[4,"ngIf"],["class","slds-list_horizontal slds-has-dividers_right slds-truncate",4,"ngIf"],[1,"slds-lookup__result-meta","slds-text-body--small"],[1,"slds-list_horizontal","slds-has-dividers_right","slds-truncate"],[1,"slds-item"],[3,"module","singular"],[4,"ngFor","ngForOf"],["class","slds-item",4,"ngIf"],["fielddisplayclass","slds-truncate",3,"field","fieldconfig"]],template:function(e,t){1&e&&(l.TgZ(0,"span",0),l._UZ(1,"system-icon",1),l.TgZ(2,"div",2)(3,"div",3),l.YNc(4,h,2,1,"span",4),l.YNc(5,f,2,1,"ul",5),l.qZA(),l.TgZ(6,"span",6)(7,"ul",7)(8,"li",8),l._UZ(9,"system-label-modulename",9),l.qZA(),l.YNc(10,_,2,1,"ng-container",10),l.qZA()()()()),2&e&&(l.xp6(1),l.Q6J("module",t.model.module),l.xp6(3),l.Q6J("ngIf",!t.mainfieldsetfields),l.xp6(1),l.Q6J("ngIf",t.mainfieldsetfields),l.xp6(4),l.Q6J("module",t.model.module)("singular",!0),l.xp6(1),l.Q6J("ngForOf",t.subfieldsetfields))},dependencies:[r.sg,r.O5,c.f,u.M,m.j],encapsulation:2}),fieldLookupRecentItem})()},5957:(e,t,s)=>{"use strict";s.d(t,{$:()=>y});var i=s(1571),n=s(2644),l=s(727),o=s(4154),a=s(5710),d=s(5329),r=s(4044),c=s(6895),u=s(4561),m=s(3463),h=s(3333),g=s(6930),p=s(8016);function f(e,t){if(1&e&&(i.TgZ(0,"span",10),i._UZ(1,"system-label",11),i._uU(2),i.qZA()),2&e){const e=i.oxw();i.xp6(2),i.hij(" ",e.relatefilter.display,"")}}function b(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"li",12),i.NdJ("mousedown",(function(){const t=i.CHM(e).$implicit,s=i.oxw();return i.KtG(s.setItem(t))})),i.qZA()}if(2&e){const e=t.$implicit,s=i.oxw();i.Q6J("module",s.module)("item",e)}}function _(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"li",13),i.NdJ("added",(function(t){i.CHM(e);const s=i.oxw();return i.KtG(s.recordAdded(t))})),i.qZA()}if(2&e){const e=i.oxw();i.Q6J("module",e.module)("parent",e.model)}}let y=(()=>{class fieldLookupSearch{constructor(e,t,s,n,o){this.metadata=e,this.model=t,this.modellist=s,this.language=n,this.modal=o,this.searchTerm="",this.searchTimeout={},this.module="",this.modulefilter="",this.disableadd=!1,this.selectedObject=new i.vpe,this.searchWithModal=new i.vpe,this.searchtermChange=new i.vpe,this.subscriptions=new l.w0}set searchterm(e){this.searchTerm=e,this.searchTimeout&&window.clearTimeout(this.searchTimeout),this.searchTimeout=window.setTimeout((()=>this.doSearch()),500)}ngOnInit(){this.modellist.modulefilter=this.modulefilter,this.relatefilter&&(this.modellist.relatefilter=this.relatefilter),this.modellist.loadlimit=5,this.modellist.initialize(this.module),this.modellist.getListData()}ngOnChanges(e){e.relateId&&this.modellist.currentList&&this.modellist.getListData()}get canAdd(){return!this.disableadd&&this.metadata.checkModuleAcl(this.module,"edit")}doSearch(){""!==this.searchTerm&&this.searchTerm!==this.modellist.searchTerm&&(this.modellist.searchTerm=this.searchTerm,this.modellist.getListData())}setItem(e){this.searchTerm="",this.searchtermChange.emit(this.searchTerm),this.selectedObject.emit({id:e.id,text:e.summary_text,data:e})}recordAdded(e){this.setItem(e.data)}}return fieldLookupSearch.ɵfac=function(e){return new(e||fieldLookupSearch)(i.Y36(o.Pu),i.Y36(a.o),i.Y36(n.t),i.Y36(d.d),i.Y36(r.o))},fieldLookupSearch.ɵcmp=i.Xpm({type:fieldLookupSearch,selectors:[["field-lookup-search"]],inputs:{module:"module",modulefilter:"modulefilter",disableadd:"disableadd",relatefilter:"relatefilter",relateId:"relateId",searchterm:"searchterm"},outputs:{selectedObject:"selectedObject",searchWithModal:"searchWithModal",searchtermChange:"searchtermChange"},features:[i._Bn([n.t]),i.TTD],decls:10,vars:8,consts:[["role","listbox",1,"slds-lookup__list"],["role","presentation"],["role","option",1,"slds-p-horizontal--small","slds-p-vertical--xx-small","slds-grid","slds-grid--vertical-align-center",3,"mousedown"],[3,"icon","sprite","size","addclasses"],[1,"slds-media__body"],[1,"slds-lookup__result-text"],[3,"module"],["class","slds-p-horizontal--xx-small",4,"ngIf"],["field-lookup-search-item","",3,"module","item","mousedown",4,"ngFor","ngForOf"],["field-lookup-search-add","","role","presentation",3,"module","parent","added",4,"ngIf"],[1,"slds-p-horizontal--xx-small"],["label","LBL_RELATED_TO"],["field-lookup-search-item","",3,"module","item","mousedown"],["field-lookup-search-add","","role","presentation",3,"module","parent","added"]],template:function(e,t){1&e&&(i.TgZ(0,"ul",0)(1,"li",1)(2,"div",2),i.NdJ("mousedown",(function(){return t.searchWithModal.emit()})),i._UZ(3,"system-icon",3),i.TgZ(4,"div",4)(5,"div",5),i._UZ(6,"system-label-modulename",6),i.YNc(7,f,3,1,"span",7),i.qZA()()()(),i.YNc(8,b,1,2,"li",8),i.YNc(9,_,1,2,"li",9),i.qZA()),2&e&&(i.xp6(3),i.Q6J("icon","search")("sprite","utility")("size","x-small")("addclasses","slds-m-vertical--xxx-small slds-m-horizontal--xx-small"),i.xp6(3),i.Q6J("module",t.module),i.xp6(1),i.Q6J("ngIf",null==t.relatefilter?null:t.relatefilter.active),i.xp6(1),i.Q6J("ngForOf",t.modellist.listData.list),i.xp6(1),i.Q6J("ngIf",t.canAdd))},dependencies:[c.sg,c.O5,u.f,m._,h.M,g.R,p.I],encapsulation:2}),fieldLookupSearch})()},8016:(e,t,s)=>{"use strict";s.d(t,{I:()=>c});var i=s(1571),n=s(5710),l=s(5329),o=s(4561),a=s(3463),d=s(3333);const r=["field-lookup-search-add",""];let c=(()=>{class fieldLookupSearchAdd{constructor(e,t){this.model=e,this.language=t,this.module="",this.added$=new i.vpe}ngOnInit(){this.model.module=this.module}addParent(){this.model.addModel("",this.parent,null,!0).subscribe((e=>{this.added$.emit({id:e.id,text:e.summary_text,data:e})}))}}return fieldLookupSearchAdd.ɵfac=function(e){return new(e||fieldLookupSearchAdd)(i.Y36(n.o),i.Y36(l.d))},fieldLookupSearchAdd.ɵcmp=i.Xpm({type:fieldLookupSearchAdd,selectors:[["","field-lookup-search-add",""]],inputs:{module:"module",parent:"parent"},outputs:{added$:"added"},features:[i._Bn([n.o])],attrs:r,decls:7,vars:6,consts:[["role","option",1,"slds-grid","slds-grid--vertical-align-center","slds-p-horizontal--small","slds-p-vertical--xx-small",3,"mousedown"],[3,"icon","sprite","size","addclasses"],[1,"slds-media__body"],[1,"slds-lookup__result-text"],["label","LBL_CREATE"],[3,"module","singular"]],template:function(e,t){1&e&&(i.TgZ(0,"div",0),i.NdJ("mousedown",(function(){return t.addParent()})),i._UZ(1,"system-icon",1),i.TgZ(2,"div",2)(3,"div",3),i._UZ(4,"system-label",4),i._uU(5,": "),i._UZ(6,"system-label-modulename",5),i.qZA()()()),2&e&&(i.xp6(1),i.Q6J("icon","add")("sprite","utility")("size","x-small")("addclasses","slds-m-vertical--xxx-small slds-m-horizontal--xx-small"),i.xp6(5),i.Q6J("module",t.module)("singular",!0))},dependencies:[o.f,a._,d.M],encapsulation:2}),fieldLookupSearchAdd})()},6930:(e,t,s)=>{"use strict";s.d(t,{R:()=>_});var i=s(5710),n=s(2294),l=s(1571),o=s(5329),a=s(4154),d=s(6895),r=s(4561),c=s(3634);const u=["field-lookup-search-item",""];function m(e,t){if(1&e&&(l.TgZ(0,"span"),l._uU(1),l.qZA()),2&e){const e=l.oxw();l.xp6(1),l.Oqu(e.model.data.summary_text)}}function h(e,t){if(1&e&&(l.TgZ(0,"li",10),l._UZ(1,"field-container",11),l.qZA()),2&e){const e=l.oxw().$implicit;l.xp6(1),l.Q6J("field",e.field)("fieldconfig",e.fieldconfig)}}function g(e,t){if(1&e&&(l.ynx(0),l.YNc(1,h,2,2,"li",9),l.BQk()),2&e){const e=t.$implicit,s=l.oxw(2);l.xp6(1),l.Q6J("ngIf",s.model.getField(e.field))}}function p(e,t){if(1&e&&(l.TgZ(0,"ul",7),l.YNc(1,g,2,1,"ng-container",8),l.qZA()),2&e){const e=l.oxw();l.xp6(1),l.Q6J("ngForOf",e.mainfieldsetfields)}}function f(e,t){if(1&e&&(l.TgZ(0,"li",10),l._UZ(1,"field-container",11),l.qZA()),2&e){const e=l.oxw().$implicit;l.xp6(1),l.Q6J("field",e.field)("fieldconfig",e.fieldconfig)}}function b(e,t){if(1&e&&(l.ynx(0),l.YNc(1,f,2,2,"li",9),l.BQk()),2&e){const e=t.$implicit,s=l.oxw();l.xp6(1),l.Q6J("ngIf",s.model.getField(e.field))}}let _=(()=>{class fieldLookupSearchItem{constructor(e,t,s,i){this.model=e,this.view=t,this.language=s,this.metadata=i,this.item={},this.view.displayLabels=!1}ngOnInit(){this.model.module=this.module,this.model.id=this.item.id,this.model.setData(this.item);let e=this.metadata.getComponentConfig("GlobalHeaderSearchResultsItem",this.model.module);e&&e.mainfieldset&&(this.mainfieldsetfields=this.metadata.getFieldSetItems(e.mainfieldset)),e&&e.subfieldset&&(this.subfieldsetfields=this.metadata.getFieldSetItems(e.subfieldset))}}return fieldLookupSearchItem.ɵfac=function(e){return new(e||fieldLookupSearchItem)(l.Y36(i.o),l.Y36(n.e),l.Y36(o.d),l.Y36(a.Pu))},fieldLookupSearchItem.ɵcmp=l.Xpm({type:fieldLookupSearchItem,selectors:[["","field-lookup-search-item",""]],inputs:{item:"item",module:"module"},features:[l._Bn([i.o,n.e])],attrs:u,decls:9,vars:4,consts:[["role","option",1,"slds-lookup__item-action","slds-media","slds-media--center"],["size","small",3,"module"],[1,"slds-media__body"],[1,"slds-lookup__result-text"],[4,"ngIf"],["class","slds-list_horizontal slds-has-dividers_right slds-truncate",4,"ngIf"],[1,"slds-lookup__result-meta","slds-text-body--small"],[1,"slds-list_horizontal","slds-has-dividers_right","slds-truncate"],[4,"ngFor","ngForOf"],["class","slds-item",4,"ngIf"],[1,"slds-item"],["fielddisplayclass","slds-truncate",3,"field","fieldconfig"]],template:function(e,t){1&e&&(l.TgZ(0,"span",0),l._UZ(1,"system-icon",1),l.TgZ(2,"div",2)(3,"div",3),l.YNc(4,m,2,1,"span",4),l.YNc(5,p,2,1,"ul",5),l.qZA(),l.TgZ(6,"div",6)(7,"ul",7),l.YNc(8,b,2,1,"ng-container",8),l.qZA()()()()),2&e&&(l.xp6(1),l.Q6J("module",t.model.module),l.xp6(3),l.Q6J("ngIf",!t.mainfieldsetfields),l.xp6(1),l.Q6J("ngIf",t.mainfieldsetfields),l.xp6(3),l.Q6J("ngForOf",t.subfieldsetfields))},dependencies:[d.sg,d.O5,r.f,c.j],encapsulation:2}),fieldLookupSearchItem})()},5638:(e,t,s)=>{"use strict";s.d(t,{a:()=>b});var i=s(1571),n=s(5710),l=s(2294),o=s(5329),a=s(6701),d=s(6895),r=s(3463),c=s(8859);function u(e,t){if(1&e&&(i.TgZ(0,"div",8),i._UZ(1,"system-label",9),i.qZA()),2&e){const e=t.$implicit;i.xp6(1),i.Q6J("label",e.message)}}function m(e,t){if(1&e&&(i.TgZ(0,"div",3)(1,"div",4)(2,"span",5),i._UZ(3,"system-utility-icon",6),i.qZA()(),i.YNc(4,u,2,1,"div",7),i.qZA()),2&e){const e=i.oxw();i.xp6(3),i.Q6J("icon","error")("size","x-small")("colorclass","slds-icon-text-error"),i.xp6(1),i.Q6J("ngForOf",e.errors)}}function h(e,t){if(1&e&&(i.TgZ(0,"div",8),i._UZ(1,"system-label",9),i.qZA()),2&e){const e=t.$implicit;i.xp6(1),i.Q6J("label",e.message)}}function g(e,t){if(1&e&&(i.TgZ(0,"div",10)(1,"div",4)(2,"span",5),i._UZ(3,"system-utility-icon",6),i.qZA()(),i.YNc(4,h,2,1,"div",7),i.qZA()),2&e){const e=i.oxw();i.xp6(3),i.Q6J("icon","warning")("size","x-small")("colorclass","slds-icon-text-warning"),i.xp6(1),i.Q6J("ngForOf",e.warnings)}}function p(e,t){if(1&e&&(i.TgZ(0,"div",8),i._UZ(1,"system-label",9),i.qZA()),2&e){const e=t.$implicit;i.xp6(1),i.Q6J("label",e.message)}}function f(e,t){if(1&e&&(i.TgZ(0,"div",11)(1,"div",4)(2,"span",5),i._UZ(3,"system-utility-icon",12),i.qZA()(),i.YNc(4,p,2,1,"div",7),i.qZA()),2&e){const e=i.oxw();i.xp6(3),i.Q6J("icon","info")("size","x-small"),i.xp6(1),i.Q6J("ngForOf",e.notices)}}let b=(()=>{class FieldMessagesComponent{constructor(e,t,s,i){this.model=e,this.view=t,this.language=s,this.fielderrorgroup=i,this.fieldname="",this._messages=[],this.errors=[],this.warnings=[],this.notices=[]}ngOnInit(){this.model.messageChange$.subscribe((()=>{this.updateMessages()}))}ngOnChanges(){this.updateMessages()}ngOnDestroy(){this.fielderrorgroup&&this.fielderrorgroup.setError(this.fieldname,!1)}updateMessages(){let e;e=0==this._messages.length&&this.fieldname?this.model.getFieldMessages(this.fieldname)||[]:this._messages,this.errors=this.filterMessages(e,"error"),this.warnings=this.filterMessages(e,"warning"),this.notices=this.filterMessages(e,"notice"),this.fielderrorgroup&&this.fielderrorgroup.setError(this.fieldname,0!==this.errors.length)}filterMessages(e,t){return e.filter((e=>!t||e.type==t))}}return FieldMessagesComponent.ɵfac=function(e){return new(e||FieldMessagesComponent)(i.Y36(n.o),i.Y36(l.e),i.Y36(o.d),i.Y36(a.O,8))},FieldMessagesComponent.ɵcmp=i.Xpm({type:FieldMessagesComponent,selectors:[["field-messages"]],inputs:{fieldname:"fieldname",_messages:["messages","_messages"]},features:[i.TTD],decls:3,vars:3,consts:[["class","slds-media slds-media-center slds-inline_icon_text slds-form-element__help",4,"ngIf"],["class","slds-media slds-media-center slds-inline_icon_text slds-inline_icon_text--warning",4,"ngIf"],["class","slds-media slds-media-center slds-inline_icon_text",4,"ngIf"],[1,"slds-media","slds-media-center","slds-inline_icon_text","slds-form-element__help"],[1,"slds-media__figure"],[1,"slds-icon_container"],[3,"icon","size","colorclass"],["class","slds-media__body",4,"ngFor","ngForOf"],[1,"slds-media__body"],[3,"label"],[1,"slds-media","slds-media-center","slds-inline_icon_text","slds-inline_icon_text--warning"],[1,"slds-media","slds-media-center","slds-inline_icon_text"],[3,"icon","size"]],template:function(e,t){1&e&&(i.YNc(0,m,5,4,"div",0),i.YNc(1,g,5,4,"div",1),i.YNc(2,f,5,3,"div",2)),2&e&&(i.Q6J("ngIf",t.errors.length>0),i.xp6(1),i.Q6J("ngIf",t.warnings.length>0),i.xp6(1),i.Q6J("ngIf",t.notices.length>0))},dependencies:[d.sg,d.O5,r._,c.r],encapsulation:2}),FieldMessagesComponent})()},3121:(e,t,s)=>{"use strict";s.r(t),s.d(t,{ObjectFields:()=>qm});var i=s(6895),n=s(433),l=s(2563),o=s(5478),a=s(4357),d=s(7040),r=s(1571),c=s(4154),u=s(6367),m=s(3634);function h(e,t){if(1&e&&r._UZ(0,"field-label",4),2&e){const e=r.oxw();r.Q6J("fieldname",e.field.field)("fieldconfig",e.field.fieldconfig)}}let g=(()=>{class field{constructor(){this.field={}}}return field.ɵfac=function(e){return new(e||field)},field.ɵcmp=r.Xpm({type:field,selectors:[["field"]],hostVars:2,hostBindings:function(e,t){2&e&&r.ekj("slds-form-element",!0)},inputs:{field:"field"},decls:4,vars:3,consts:[[1,"slds-form-element"],[3,"fieldname","fieldconfig",4,"ngIf"],[1,"slds-form-element__control"],[3,"field","fieldconfig"],[3,"fieldname","fieldconfig"]],template:function(e,t){1&e&&(r.TgZ(0,"div",0),r.YNc(1,h,1,2,"field-label",1),r.TgZ(2,"div",2),r._UZ(3,"field-container",3),r.qZA()()),2&e&&(r.xp6(1),r.Q6J("ngIf",!0!==t.field.fieldconfig.hidelabel),r.xp6(2),r.Q6J("field",t.field.field)("fieldconfig",t.field.fieldconfig))},dependencies:[i.O5,u.q,m.j],encapsulation:2}),field})();function p(e,t){if(1&e&&r._UZ(0,"field",4),2&e){const e=r.oxw().$implicit;r.Q6J("field",e)}}function f(e,t){if(1&e&&r._UZ(0,"field-set",5),2&e){const e=r.oxw().$implicit;r.Q6J("fieldset",e.fieldset)("fieldsetconfig",e.fieldconfig)}}function b(e,t){if(1&e&&(r.ynx(0),r.YNc(1,p,1,1,"field",2),r.YNc(2,f,1,2,"field-set",3),r.BQk()),2&e){const e=t.$implicit;r.xp6(1),r.Q6J("ngIf",e.field),r.xp6(1),r.Q6J("ngIf",!e.field)}}let y=(()=>{class fieldSet{constructor(e){this.metadata=e,this.fieldset="",this.fieldsetconfig={},this.fieldsetItems=[]}ngOnInit(){this.fieldsetItems=this.metadata.getFieldSetItems(this.fieldset)}getFormClass(){if(this.fieldsetconfig.formclass)return this.fieldsetconfig.formclass}}return fieldSet.ɵfac=function(e){return new(e||fieldSet)(r.Y36(c.Pu))},fieldSet.ɵcmp=r.Xpm({type:fieldSet,selectors:[["field-set"]],hostVars:2,hostBindings:function(e,t){2&e&&r.ekj("slds-form-element",!0)},inputs:{fieldset:"fieldset",fieldsetconfig:"fieldsetconfig"},decls:2,vars:2,consts:[[3,"ngClass"],[4,"ngFor","ngForOf"],[3,"field",4,"ngIf"],[3,"fieldset","fieldsetconfig",4,"ngIf"],[3,"field"],[3,"fieldset","fieldsetconfig"]],template:function(e,t){1&e&&(r.TgZ(0,"div",0),r.YNc(1,b,3,2,"ng-container",1),r.qZA()),2&e&&(r.Q6J("ngClass",t.getFormClass()),r.xp6(1),r.Q6J("ngForOf",t.fieldsetItems))},dependencies:[i.mk,i.sg,i.O5,fieldSet,g],encapsulation:2}),fieldSet})(),v=(()=>{class fieldBlank{}return fieldBlank.ɵfac=function(e){return new(e||fieldBlank)},fieldBlank.ɵcmp=r.Xpm({type:fieldBlank,selectors:[["field-blank"]],decls:1,vars:0,consts:[[1,"slds-truncate"]],template:function(e,t){1&e&&r._UZ(0,"div",0)},encapsulation:2}),fieldBlank})();var x=s(5329),Z=s(5710),w=s(2656);let T=(()=>{class fieldLabelPopover{constructor(e,t,s,i){this.language=e,this.elementRef=t,this.renderer=s,this.model=i,this.fieldlabel="",this.fieldname="",this.fieldconfig={},this.top="0px",this.left="0px"}ngOnInit(){this.top=this.event.pageY-22+"px",this.left=this.event.pageX+8+"px",this.clickListener=this.renderer.listen("document","click",(e=>this.onClick(e)))}ngOnDestroy(){this.clickListener&&this.clickListener(),this.contextmenulistener&&this.contextmenulistener()}onClick(e){this.elementRef.nativeElement.contains(e.target)||(this.clickListener&&this.clickListener(),this.contextmenulistener&&this.contextmenulistener(),this.close())}get popoverStyle(){return{top:this.top,left:this.left}}close(){this.self.destroy()}}return fieldLabelPopover.ɵfac=function(e){return new(e||fieldLabelPopover)(r.Y36(x.d),r.Y36(r.SBq),r.Y36(r.Qsj),r.Y36(Z.o,8))},fieldLabelPopover.ɵcmp=r.Xpm({type:fieldLabelPopover,selectors:[["ng-component"]],decls:8,vars:3,consts:[["role","dialog",1,"slds-is-fixed","slds-popover","slds-nubbin_left-top",3,"ngStyle"],[1,"slds-button","slds-button_icon","slds-button_icon-small","slds-float_right","slds-popover__close",3,"click"],["icon","close"],[1,"slds-popover__header"],[1,"slds-text-heading_small"],[1,"slds-popover__body"]],template:function(e,t){1&e&&(r.TgZ(0,"div",0)(1,"button",1),r.NdJ("click",(function(){return t.close()})),r._UZ(2,"system-button-icon",2),r.qZA(),r.TgZ(3,"header",3)(4,"h2",4),r._uU(5),r.qZA()(),r.TgZ(6,"div",5),r._uU(7),r.qZA()()),2&e&&(r.Q6J("ngStyle",t.popoverStyle),r.xp6(5),r.Oqu(t.fieldlabel),r.xp6(2),r.hij(" fieldname: ",t.fieldname," fieldtype: "))},dependencies:[i.PC,w.J],encapsulation:2}),fieldLabelPopover})();var C=s(3208),A=s(2294),k=s(7774),L=s(4044),M=s(8859),S=s(7982),I=s(5638);const O=["textField"];function J(e,t){if(1&e&&r._UZ(0,"field-label",5),2&e){const e=r.oxw();r.Q6J("fieldname",e.fieldname)("fieldconfig",e.fieldconfig)}}function N(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"div",6),r.NdJ("click",(function(){r.CHM(e);const t=r.oxw();return r.KtG(t.toSpeech())})),r._UZ(1,"system-utility-icon",7),r.qZA()}}function F(e,t){if(1&e&&(r.TgZ(0,"div",11),r._uU(1),r.qZA()),2&e){const e=r.oxw(2);r.xp6(1),r.Oqu(e.value)}}function q(e,t){if(1&e&&(r.TgZ(0,"div",12),r._uU(1),r.qZA()),2&e){const e=r.oxw(2);r.Q6J("title",e.value),r.xp6(1),r.hij(" ",e.value," ")}}function E(e,t){if(1&e&&(r.TgZ(0,"field-generic-display",8),r.YNc(1,F,2,1,"div",9),r.YNc(2,q,2,2,"ng-template",null,10,r.W1O),r.qZA()),2&e){const e=r.MAs(3),t=r.oxw();r.Q6J("fielddisplayclass",t.fielddisplayclass)("editable",t.isEditable())("fieldconfig",t.fieldconfig)("fieldid",t.fieldid),r.xp6(1),r.Q6J("ngIf",!t.truncated)("ngIfElse",e)}}function Y(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"button",20),r.NdJ("click",(function(){r.CHM(e);const t=r.oxw(2);return r.KtG(t.speechRecognitionStart())})),r._UZ(1,"system-button-icon",21),r.qZA()}2&e&&(r.xp6(1),r.Q6J("size","small")("icon","unmuted"))}function Q(e,t){if(1&e&&(r.TgZ(0,"span"),r._uU(1),r.qZA()),2&e){const e=r.oxw(2);r.xp6(1),r.AsE("",e.textLength,"/",e.fieldlength,"")}}function U(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"div",13)(1,"textarea",14,15),r.NdJ("ngModelChange",(function(t){r.CHM(e);const s=r.oxw();return r.KtG(s.value=t)}))("system-resize",(function(t){r.CHM(e);const s=r.oxw();return r.KtG(s.resize(t))}))("change",(function(t){r.CHM(e);const s=r.oxw();return r.KtG(s.change(t))})),r.qZA(),r.YNc(4,Y,2,2,"button",16),r.TgZ(5,"div",17),r._UZ(6,"field-messages",18),r.YNc(7,Q,2,2,"span",19),r.qZA()()}if(2&e){const e=r.oxw();r.Q6J("ngClass",e.getFieldClass()),r.xp6(1),r.Q6J("maxlength",e.maxLength)("ngModel",e.value)("ngStyle",e.getTextAreaStyle()),r.xp6(3),r.Q6J("ngIf",e.speechRecognition),r.xp6(2),r.Q6J("fieldname",e.fieldname),r.xp6(1),r.Q6J("ngIf",e.fieldlength>0)}}let D=(()=>{class fieldText extends d.O{constructor(e,t,s,i,n,l){super(e,t,s,i,n),this.model=e,this.view=t,this.language=s,this.metadata=i,this.router=n,this.modalservice=l,this.speechRecognition=!1,this.fieldlength=0}ngOnInit(){super.ngOnInit(),window.webkitSpeechRecognition&&(this.speechRecognition=this.fieldconfig.speechRecognition),this.getFieldLength()}getFieldLength(){let e=this.metadata.getFieldDefs(this.model.module,this.fieldname);e.len&&(this.fieldlength=parseInt(e.len,10)),this.fieldconfig.maxlength&&(!this.fieldlength||parseInt(this.fieldconfig.maxlength,10)<this.fieldlength)&&(this.fieldlength=this.fieldconfig.maxlength)}get maxLength(){return this.fieldlength>0?this.fieldlength:65e3}resize(e){this.fixedHeight=e.height}getTextAreaStyle(){let e=this.fieldconfig.minheight?this.fieldconfig.minheight.replace("px",""):38,t={"min-height":e+"px","max-height":(this.fieldconfig.maxheight?this.fieldconfig.maxheight.replace("px",""):300)+"px",height:this.fixedHeight?this.fixedHeight+"px":e+"px"};return!this.fixedHeight&&this.textField&&this.fieldconfig.maxheight&&(t.height=(this.textField.element.nativeElement.scrollHeight+2<this.fieldconfig.maxheight?this.textField.element.nativeElement.scrollHeight+2:this.fieldconfig.maxheight)+"px"),t}toSpeech(){let e=new SpeechSynthesisUtterance;e.text=this.value,e.lang=this.getSpeechLanguage(),speechSynthesis.speak(e)}getSpeechLanguage(){let e=this.language.currentlanguage.split("_");return 2!=e.length?"en-US":e[0]+"-"+e[1].toUpperCase()}get truncated(){return!!this.fieldconfig.truncate}speechRecognitionStart(){this.modalservice.openModal("SpeechRecognition",!1).subscribe((e=>{e.instance.textfield=this.textField}))}change(e){e.target.value&&(this.value=e.target.value)}get textLength(){return this.value?this.value.length:0}}return fieldText.ɵfac=function(e){return new(e||fieldText)(r.Y36(Z.o),r.Y36(A.e),r.Y36(x.d),r.Y36(c.Pu),r.Y36(k.F0),r.Y36(L.o))},fieldText.ɵcmp=r.Xpm({type:fieldText,selectors:[["field-text"]],viewQuery:function(e,t){if(1&e&&r.Gf(O,5,r.s_b),2&e){let e;r.iGM(e=r.CRH())&&(t.textField=e.first)}},features:[r.qOj],decls:5,vars:4,consts:[[1,"slds-grid","slds-grid--vertical-align-center"],[3,"fieldname","fieldconfig",4,"ngIf"],["class","slds-col--bump-left",3,"click",4,"ngIf"],[3,"fielddisplayclass","editable","fieldconfig","fieldid",4,"ngIf"],["class","slds-form-element__control slds-is-relative","style","position:relative;",3,"ngClass",4,"ngIf"],[3,"fieldname","fieldconfig"],[1,"slds-col--bump-left",3,"click"],["icon","volume_high","size","xx-small"],[3,"fielddisplayclass","editable","fieldconfig","fieldid"],["style","white-space: pre-line;",4,"ngIf","ngIfElse"],["truncateddisplay",""],[2,"white-space","pre-line"],[1,"slds-truncate",2,"max-width","200px","text-overflow","ellipsis",3,"title"],[1,"slds-form-element__control","slds-is-relative",2,"position","relative",3,"ngClass"],[1,"slds-textarea","slds-scrollable--y","slds-m-vertical--xx-small",3,"maxlength","ngModel","ngStyle","ngModelChange","system-resize","change"],["focus","","textField",""],["class","slds-button slds-button_small slds-button_icon slds-is-absolute","style","right:8px;",3,"click",4,"ngIf"],[1,"slds-grid","slds-grid--vertical-align-center","slds-grid--align-spread"],[1,"slds-grow",3,"fieldname"],[4,"ngIf"],[1,"slds-button","slds-button_small","slds-button_icon","slds-is-absolute",2,"right","8px",3,"click"],[3,"size","icon"]],template:function(e,t){1&e&&(r.TgZ(0,"div",0),r.YNc(1,J,1,2,"field-label",1),r.YNc(2,N,2,0,"div",2),r.qZA(),r.YNc(3,E,4,6,"field-generic-display",3),r.YNc(4,U,8,7,"div",4)),2&e&&(r.xp6(1),r.Q6J("ngIf",t.displayLabel),r.xp6(1),r.Q6J("ngIf",t.value),r.xp6(1),r.Q6J("ngIf",!t.isEditMode()),r.xp6(1),r.Q6J("ngIf",t.isEditable()&&t.isEditMode()))},dependencies:[i.mk,i.O5,i.PC,n.Fj,n.JJ,n.nD,n.On,w.J,M.r,S.h,u.q,C.D,I.a],encapsulation:2}),fieldText})();function j(e,t){if(1&e&&r._UZ(0,"field-label",3),2&e){const e=r.oxw();r.Q6J("fieldname",e.fieldname)("fieldconfig",e.fieldconfig)}}function R(e,t){if(1&e&&(r.TgZ(0,"field-generic-display",4)(1,"div",5),r._uU(2),r.qZA()()),2&e){const e=r.oxw();r.Q6J("fielddisplayclass",e.fielddisplayclass)("editable",e.isEditable())("fieldconfig",e.fieldconfig),r.xp6(2),r.hij(" ",e.value," ")}}function B(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"div",6)(1,"input",7),r.NdJ("ngModelChange",(function(t){r.CHM(e);const s=r.oxw();return r.KtG(s.value=t)})),r.qZA(),r._UZ(2,"field-messages",8),r.qZA()}if(2&e){const e=r.oxw();r.Q6J("ngClass",e.getFieldClass()),r.xp6(1),r.Q6J("min",e.min)("max",e.max)("ngModel",e.value),r.xp6(1),r.Q6J("fieldname",e.fieldname)}}let G=(()=>{class fieldNumber extends d.O{constructor(e,t,s,i,n){super(e,t,s,i,n),this.model=e,this.view=t,this.language=s,this.metadata=i,this.router=n}get min(){return 0}get max(){return 120}}return fieldNumber.ɵfac=function(e){return new(e||fieldNumber)(r.Y36(Z.o),r.Y36(A.e),r.Y36(x.d),r.Y36(c.Pu),r.Y36(k.F0))},fieldNumber.ɵcmp=r.Xpm({type:fieldNumber,selectors:[["field-number"]],features:[r.qOj],decls:3,vars:3,consts:[[3,"fieldname","fieldconfig",4,"ngIf"],[3,"fielddisplayclass","editable","fieldconfig",4,"ngIf"],["class","slds-form-element__control slds-grid slds-grid--align-spread slds-p-around--xx-small",3,"ngClass",4,"ngIf"],[3,"fieldname","fieldconfig"],[3,"fielddisplayclass","editable","fieldconfig"],[1,"slds-text-align_right"],[1,"slds-form-element__control","slds-grid","slds-grid--align-spread","slds-p-around--xx-small",3,"ngClass"],["type","number",1,"slds-input","slds-text-align_right",3,"min","max","ngModel","ngModelChange"],[3,"fieldname"]],template:function(e,t){1&e&&(r.YNc(0,j,1,2,"field-label",0),r.YNc(1,R,3,4,"field-generic-display",1),r.YNc(2,B,3,5,"div",2)),2&e&&(r.Q6J("ngIf",t.displayLabel),r.xp6(1),r.Q6J("ngIf",!t.isEditMode()),r.xp6(1),r.Q6J("ngIf",t.isEditable()&&t.isEditMode()))},dependencies:[i.mk,i.O5,n.Fj,n.wV,n.JJ,n.qQ,n.Fd,n.On,u.q,C.D,I.a],encapsulation:2}),fieldNumber})();var P=s(5861),H=s(4505),z=s(3278),V=s(3369),K=s(6625),$=s(1481),X=s(3463),W=s(3091);function ee(e,t){if(1&e&&r._UZ(0,"field-label",5),2&e){const e=r.oxw();r.Q6J("fieldname",e.fieldname)("fieldconfig",e.fieldconfig)}}function te(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"button",6),r.NdJ("click",(function(){r.CHM(e);const t=r.oxw();return r.KtG(t.setEditMode())})),r._UZ(1,"system-button-icon",7),r.qZA()}2&e&&(r.xp6(1),r.Q6J("icon","edit"))}function se(e,t){if(1&e&&(r.TgZ(0,"div",11),r.NdJ("click",(function(e){return e.preventDefault()})),r.qZA()),2&e){const e=r.oxw(2);r.Q6J("innerHTML",e.parsedHtml,r.oJD)}}function ie(e,t){if(1&e&&r._UZ(0,"iframe",12),2&e){const e=r.oxw(2);r.Q6J("src",e.sanitizedValue,r.uOi)("ngStyle",e.heightStyle)}}function ne(e,t){if(1&e&&(r.TgZ(0,"field-generic-display",8),r.YNc(1,se,1,1,"div",9),r.YNc(2,ie,1,2,"iframe",10),r.qZA()),2&e){const e=r.oxw();r.Q6J("fielddisplayclass",e.fielddisplayclass)("editable",!1)("fieldconfig",e.fieldconfig),r.xp6(1),r.Q6J("ngIf",!e.fieldconfig.asiframe),r.xp6(1),r.Q6J("ngIf",e.fieldconfig.asiframe)}}function le(e,t){if(1&e&&(r.TgZ(0,"option",26),r._UZ(1,"system-label",27),r.qZA()),2&e){const e=t.$implicit;r.Q6J("value",e.id),r.xp6(1),r.Q6J("label",e.label)}}function oe(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"li")(1,"div",17)(2,"label",18),r._UZ(3,"system-label",19),r._uU(4,": "),r.qZA(),r.TgZ(5,"div",20)(6,"div",21)(7,"select",22),r.NdJ("ngModelChange",(function(t){r.CHM(e);const s=r.oxw(2);return r.KtG(s.selectedSignatureId=t)}))("ngModelChange",(function(){r.CHM(e);const t=r.oxw(2);return r.KtG(t.renderSelectedSignature())})),r.TgZ(8,"option",23),r._UZ(9,"system-label",24),r.qZA(),r.YNc(10,le,2,2,"option",25),r.qZA()()()()()}if(2&e){const e=r.oxw(2);r.xp6(7),r.Q6J("ngModel",e.selectedSignatureId)("disabled",0==(null==e.signatures?null:e.signatures.length)),r.xp6(3),r.Q6J("ngForOf",e.signatures)}}function ae(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"div",13)(1,"system-html-editor",14),r.NdJ("ngModelChange",(function(t){r.CHM(e);const s=r.oxw();return r.KtG(s.value=t)}))("save$",(function(t){r.CHM(e);const s=r.oxw();return r.KtG(s.save(t))})),r.YNc(2,oe,11,3,"li",15),r.qZA(),r._UZ(3,"field-messages",16),r.qZA()}if(2&e){const e=r.oxw();r.Q6J("ngClass",e.getFieldClass()),r.xp6(1),r.Q6J("ngModel",e.value)("extendedmode",!e.fieldconfig.simplemode)("innerheight",e.fieldconfig.innerheight)("useMedialFile",e.metadata.checkModuleAcl("MediaFiles","list")&&e.metadata.checkModuleAcl("MediaFiles","view")),r.xp6(1),r.Q6J("ngIf",null==e.fieldconfig?null:e.fieldconfig.useSignature),r.xp6(1),r.Q6J("fieldname",e.fieldname)}}let de=(()=>{class fieldHtml extends d.O{constructor(e,t,s,i,n,l,o,a,d,r,c,u,m){super(e,t,s,i,o),this.model=e,this.view=t,this.language=s,this.metadata=i,this.backend=n,this.toast=l,this.router=o,this.injector=a,this.broadcast=d,this.configurationService=r,this.modal=c,this.cdRef=u,this.sanitized=m,this.selectedSignatureId="",this.signatures=[],this.parsedHtml="",this.fullValue="",this.stylesheetField="",this.stylesheetToUse="",this.signaturePreviousPosition=-1,this.stylesheets=this.metadata.getHtmlStylesheetNames()}get heightStyle(){return{height:this.fieldconfig.height?this.fieldconfig.height:"500px"}}get styleTag(){return this.stylesheetId?"<style>"+this.metadata.getHtmlStylesheetCode(this.stylesheetId)+"</style>":""}get stylesheetId(){return _.isEmpty(this.model.getField(this.stylesheetField))?this.stylesheetId=this.stylesheetToUse:this.model.getField(this.stylesheetField)}set stylesheetId(e){e&&this.model.setField(this.stylesheetField,e)}get value(){return this.model.getField(this.fieldname)}set value(e){this.model.setField(this.fieldname,e),this.setHtmlValue()}ngOnInit(){var e=this;return(0,P.Z)((function*(){e.setStylesheetField(),e.setStylesheetsToUse(),e.setHtmlValue(),e.fieldconfig?.useSignature&&(yield e.loadMailboxSignature(),e.loadUserSignature()),e.modelChangesSubscriber()}))()}renderSelectedSignature(){if(this.clearSignature(),!this.selectedSignatureId)return;this.value||(this.value="");const e=`<div data-signature="" style="margin: 10px 0">${this.signatures.find((e=>e.id==this.selectedSignatureId)).content}</div>`;this.signaturePreviousPosition>-1?this.value=`${this.value.slice(0,this.signaturePreviousPosition)} ${e} ${this.value.slice(e.length+this.signaturePreviousPosition)}`:this.value=`<p><br></p> ${e} ${this.value}`}setEditMode(){this.model.startEdit(),this.view.setEditMode(),this.cdRef.detectChanges()}encodeHtml(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}loadMailboxSignature(){if(!this.isEditMode())return;const e=this.model.getField("mailbox_id");if(!e)return;const t=this.configurationService.getData("mailbox_signature_"+e);if(!t)return this.backend.get("Mailboxes",e).toPromise().then((t=>{t.email_signature&&(this.configurationService.setData("mailbox_signature_"+e,t.email_signature),this.addSignature(e,t.email_signature,"LBL_MAILBOX"),this.selectedSignatureId=e,this.renderSelectedSignature())}));this.addSignature(e,t,"LBL_MAILBOX"),this.selectedSignatureId=e,this.renderSelectedSignature()}addSignature(e,t,s){const i=this.signatures.find((t=>t.id==e));i?i.content=t:this.signatures.push({id:e,content:t,label:s})}loadUserSignature(){if(!this.isEditMode())return;const e=this.configurationService.getData("usersignature");if(!e)return;const t=0==this.signatures.length;this.addSignature("user",e,"LBL_MY_SIGNATURE"),t&&(this.selectedSignatureId="user",this.renderSelectedSignature())}clearSignature(){if(!this.value)return;const e=document.createElement("div");e.innerHTML=this.value,Array.from(e.querySelectorAll("div[data-signature]")).forEach((t=>{this.signaturePreviousPosition=e.innerHTML.indexOf(t.outerHTML),t.parentNode.removeChild(t)})),this.value=e.innerHTML}setStylesheetField(){let e=this.metadata.getFieldDefs(this.model.module,this.fieldname);_.isEmpty(e.stylesheet_id_field)||(this.stylesheetField=e.stylesheet_id_field)}setStylesheetsToUse(){this.useStylesheets=!_.isEmpty(this.stylesheetField)&&!_.isEmpty(this.stylesheets),this.useStylesheets&&(1===this.stylesheets.length?this.stylesheetToUse=this.stylesheets[0].id:_.isEmpty(this.fieldconfig.stylesheetId)?this.stylesheetToUse=this.metadata.getHtmlStylesheetToUse(this.model.module,this.fieldname):this.stylesheetToUse=this.fieldconfig.stylesheetId)}setSanitizedValue(){return this.value&&(this.value.includes("</html>")?this.fullValue=this.value:this.fullValue=`<html><head><base target="_blank">${this.styleTag}</head><body class="spice">${this.value}</body></html>`),this.fullValue!=this.fullValue_cached&&(this.sanitizedValue=this.sanitized.bypassSecurityTrustResourceUrl(this.fullValue?"data:text/html;charset=UTF-8,"+encodeURIComponent(this.fullValue):""),this.fullValue_cached=this.fullValue),this.sanitizedValue}modelChangesSubscriber(){this.subscriptions.add(this.model.observeFieldChanges(this.fieldname).subscribe((e=>{this.setHtmlValue()}))),this.subscriptions.add(this.model.observeFieldChanges("mailbox_id").subscribe((e=>{this.fieldconfig?.useSignature&&e&&!this.signatures.some((t=>t.id==e))&&this.loadMailboxSignature()})))}setHtmlValue(){let e=/<code>[\s\S]*?<\/code>/g,t=e.exec(this.value);for(;null!=t;)this.value=this.value.replace(t,this.encodeHtml(t)).replace("&lt;code&gt;","<code>").replace("&lt;/code&gt;","</code>"),t=e.exec(this.value);this.parsedHtml=this.sanitized.bypassSecurityTrustHtml(this.value),this.setSanitizedValue()}save(e){let t={date_modified:this.model.getField("date_modified"),[this.fieldname]:e};this.backend.save(this.model.module,this.model.id,t).subscribe((e=>{this.model.endEdit(),this.model.setField("date_modified",e.date_modified,!0),this.value=e[this.fieldname],this.model.startEdit(),this.toast.sendToast(this.language.getLabel("LBL_DATA_SAVED")+".","success")}),(e=>this.toast.sendToast(this.language.getLabel("LBL_ERROR")+" "+e.status,"error",e.error.error.message)))}}return fieldHtml.ɵfac=function(e){return new(e||fieldHtml)(r.Y36(Z.o),r.Y36(A.e),r.Y36(x.d),r.Y36(c.Pu),r.Y36(H.y),r.Y36(z.A),r.Y36(k.F0),r.Y36(r.zs3),r.Y36(V.f),r.Y36(K.C),r.Y36(L.o),r.Y36(r.sBO),r.Y36($.H7))},fieldHtml.ɵcmp=r.Xpm({type:fieldHtml,selectors:[["field-html"]],features:[r.qOj],decls:6,vars:4,consts:[[1,"slds-grid","slds-grid--vertical-align-center","slds-grid--align-spread"],[3,"fieldname","fieldconfig",4,"ngIf"],["class","slds-button slds-button--icon slds-m-left--xx-small spice-hover-button",3,"click",4,"ngIf"],[3,"fielddisplayclass","editable","fieldconfig",4,"ngIf"],["class","slds-form-element__control",3,"ngClass",4,"ngIf"],[3,"fieldname","fieldconfig"],[1,"slds-button","slds-button--icon","slds-m-left--xx-small","spice-hover-button",3,"click"],[3,"icon"],[3,"fielddisplayclass","editable","fieldconfig"],["class","slds-size--1-of-1 slds-rich-text-editor__output","style","white-space: normal; resize: vertical; overflow-y: auto;",3,"innerHTML","click",4,"ngIf"],["style","resize: vertical;","width","100%","frameborder","0","seamless","true","sandbox","",3,"src","ngStyle",4,"ngIf"],[1,"slds-size--1-of-1","slds-rich-text-editor__output",2,"white-space","normal","resize","vertical","overflow-y","auto",3,"innerHTML","click"],["width","100%","frameborder","0","seamless","true","sandbox","",2,"resize","vertical",3,"src","ngStyle"],[1,"slds-form-element__control",3,"ngClass"],[3,"ngModel","extendedmode","innerheight","useMedialFile","ngModelChange","save$"],[4,"ngIf"],[3,"fieldname"],[1,"slds-form-element","slds-grid"],[1,"slds-form-element__label"],["label","LBL_SIGNATURE"],[1,"slds-form-element__control"],[1,"slds-select_container"],[1,"slds-select",3,"ngModel","disabled","ngModelChange"],["value",""],["label","LBL_NONE"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[3,"label"]],template:function(e,t){1&e&&(r.TgZ(0,"div",0)(1,"div"),r.YNc(2,ee,1,2,"field-label",1),r.qZA(),r.YNc(3,te,2,1,"button",2),r.qZA(),r.YNc(4,ne,3,5,"field-generic-display",3),r.YNc(5,ae,4,7,"div",4)),2&e&&(r.xp6(2),r.Q6J("ngIf",t.displayLabel),r.xp6(1),r.Q6J("ngIf",!t.isEditMode()&&t.isEditable()),r.xp6(1),r.Q6J("ngIf",!t.isEditMode()),r.xp6(1),r.Q6J("ngIf",t.isEditable()&&t.isEditMode()))},dependencies:[i.mk,i.sg,i.O5,i.PC,n.YN,n.Kr,n.EJ,n.JJ,n.On,w.J,X._,W.e,u.q,C.D,I.a],encapsulation:2}),fieldHtml})();var re=s(3917);function ce(e,t){if(1&e&&(r.TgZ(0,"option",6),r._uU(1),r.qZA()),2&e){const e=t.$implicit;r.s9C("value",e.id),r.xp6(1),r.Oqu(e.name)}}function ue(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"select",3),r.NdJ("ngModelChange",(function(t){r.CHM(e);const s=r.oxw();return r.KtG(s.stylesheetId=t)}))("change",(function(){r.CHM(e);const t=r.oxw();return r.KtG(t.changeStylesheet())})),r._UZ(1,"option",4),r.YNc(2,ce,2,2,"option",5),r.qZA()}if(2&e){const e=r.oxw();r.Q6J("ngModel",e.stylesheetId),r.xp6(2),r.Q6J("ngForOf",e.stylesheets)}}let me=(()=>{class fieldHtmlEditor{constructor(e,t,s,i){this.metadata=e,this.footer=t,this.configurationService=s,this.modal=i,this.fieldvalue="",this.fieldid="",this.fieldconfig={},this.editor=null,this.stylesheets=[],this.stylesheetIdValue="",this.tinymceConfig={remove_script_host:!0,relative_urls:!1,menubar:!1,statusbar:!0,resize:!0,browser_spellcheck:!0,image_advtab:!0,paste_as_text:!0,paste_filter_drop:!0,plugins:["link","code","image","lists","paste","table"],toolbar:"undo redo | formatselect | styleselect bold italic removeformat | bullist numlist | link image table | code",skin_url:"vendor/tinymce/skins/lightgray",setup:e=>{this.editor=e,e.on("change",(()=>{const t=e.getContent();this.content=t})),e.on("init",(()=>{this.fieldvalue&&this.editor.setContent(this.fieldvalue)}))},formats:{alignleft:{selector:"p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li,table,img",classes:"align-left"},aligncenter:{selector:"p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li,table,img",classes:"align-center"},alignright:{selector:"p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li,table,img",classes:"align-right"},alignjustify:{selector:"p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li,table,img",classes:"align-justify"},strikethrough:{inline:"del"}},style_formats:[{title:"Inline",items:[{title:"fett",icon:"bold",format:"bold"},{title:"kursiv",icon:"italic",format:"italic"},{title:"unterstrichen",icon:"underline",format:"underline"},{title:"strikethrough",icon:"strikethrough",format:"strikethrough"},{title:"hochgestellt",icon:"superscript",format:"superscript"},{title:"tiefgestellt",icon:"subscript",format:"subscript"}]},{title:"Ausrichtung",items:[{title:"links",icon:"alignleft",format:"alignleft"},{title:"mittig",icon:"aligncenter",format:"aligncenter"},{title:"rechts",icon:"alignright",format:"alignright"},{title:"Blocksatz",icon:"alignjustify",format:"alignjustify"}]}],style_formats_merge:!1,body_class:"spice"},this.oldStylesheetId="",this.contentchange=new r.vpe,this.stylesheetIdChange=new r.vpe,this.stylesheets=this.metadata.getHtmlStylesheetNames()}get content(){return this.fieldvalue}set content(e){this.fieldvalue=e,this.contentchange.emit(e)}set input_stylesheetId(e){this.stylesheetIdValue=e}set stylesheetId(e){this.stylesheetIdValue=e,this.stylesheetIdChange.emit(e)}get stylesheetId(){return this.stylesheetIdValue}ngOnInit(){this.tinymceConfig.selector="#"+this.fieldid,this.tinymceConfig.document_base_url=this.configurationService.getFrontendUrl()}ngAfterViewInit(){this.metadata.loadLibs("tinymce").subscribe((e=>{this.useStylesheets&&this.setStylesheet(),tinymce.init(this.tinymceConfig)}))}changeStylesheet(){this.editor&&tinymce.remove(this.editor),this.setStylesheet(),tinymce.init(this.tinymceConfig)}setStylesheet(){let e=[];if(this.oldStylesheetId=this.stylesheetId,_.isEmpty(this.stylesheetId))delete this.tinymceConfig.content_style;else{if(e=this.metadata.getHtmlFormats(this.stylesheetId),e.length){let t=0;this.tinymceConfig.block_formats="",this.tinymceConfig.extended_valid_elements=[],this.tinymceConfig.custom_elements=[],this.tinymceConfig.block_formats+="Absatz=p;",this.tinymceConfig.style_formats.push({title:"Weiteres",items:[]});for(let s of e)if(_.isEmpty(s.block))this.tinymceConfig.style_formats[2].items.push({title:s.name,inline:s.inline,classes:s.classes,styles:s.styles});else{let e;t++,this.tinymceConfig.formats[e="custom_format_"+t]={title:s.name,inline:s.inline,block:s.block,classes:s.classes,styles:s.styles,wrapper:Boolean(Number(s.wrapper))},this.tinymceConfig.block_formats+=s.name+"="+e+";",this.tinymceConfig.extended_valid_elements.indexOf(s.block)&&this.tinymceConfig.extended_valid_elements.push(s.block),this.tinymceConfig.custom_elements.indexOf(s.block)&&this.tinymceConfig.custom_elements.push(s.block)}0===this.tinymceConfig.style_formats[2].items.length&&this.tinymceConfig.style_formats.splice(2,1)}this.tinymceConfig.content_style=this.metadata.getHtmlStylesheetCode(this.stylesheetId)}}fullScreen(){this.modal.openModal("SystemTinyMCEModal").subscribe((e=>{e.instance.content=this.fieldvalue,e.instance.updateContent.subscribe((e=>{this.fieldvalue=e,this.editor.setContent(e)}))}))}ngOnDestroy(){tinymce.remove(this.editor)}ngOnChanges(){this.editor&&this.fieldvalue&&this.editor.getContent()!==this.fieldvalue&&this.editor.setContent(this.fieldvalue),this.oldStylesheetId.length&&this.oldStylesheetId!=this.stylesheetId&&this.changeStylesheet()}}return fieldHtmlEditor.ɵfac=function(e){return new(e||fieldHtmlEditor)(r.Y36(c.Pu),r.Y36(re.M),r.Y36(K.C),r.Y36(L.o))},fieldHtmlEditor.ɵcmp=r.Xpm({type:fieldHtmlEditor,selectors:[["field-html-editor"]],inputs:{fieldvalue:"fieldvalue",fieldid:"fieldid",fieldconfig:"fieldconfig",useStylesheetSwitcher:"useStylesheetSwitcher",useStylesheets:"useStylesheets",input_stylesheetId:["stylesheetId","input_stylesheetId"]},outputs:{contentchange:"contentchange",stylesheetIdChange:"stylesheetIdChange"},features:[r.TTD],decls:3,vars:2,consts:[[1,"slds-m-vertical--xx-small"],[1,"slds-textarea","slds-scrollable--y","slds-m-vertical--xx-small",2,"height","250px",3,"id"],["class","slds-select slds-m-top--x-small",3,"ngModel","ngModelChange","change",4,"ngIf"],[1,"slds-select","slds-m-top--x-small",3,"ngModel","ngModelChange","change"],["value",""],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(e,t){1&e&&(r.TgZ(0,"div",0),r._UZ(1,"textarea",1),r.YNc(2,ue,3,2,"select",2),r.qZA()),2&e&&(r.xp6(1),r.Q6J("id",t.fieldid),r.xp6(1),r.Q6J("ngIf",t.useStylesheetSwitcher))},dependencies:[i.sg,i.O5,n.YN,n.Kr,n.EJ,n.JJ,n.On],styles:["[_nghost-%COMP%]   .mce-ico[_ngcontent-%COMP%]{color:#54698d;font-size:12px}","[_nghost-%COMP%]   .mce-text[_ngcontent-%COMP%]{color:#54698d;font-size:12px}","[_nghost-%COMP%]   .mce-btn[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{color:#54698d;font-size:12px}","[_nghost-%COMP%]   .mce-tinymce[_ngcontent-%COMP%]{border-radius:4px}","[_nghost-%COMP%]   .mce-widget[_ngcontent-%COMP%]{font-family:Titillium Web,sans-serif}"]}),fieldHtmlEditor})();const he=["editor"];let ge=(()=>{class fieldWYSIWYGEditor{constructor(e,t,s){this.model=e,this.view=t,this.language=s,this.fieldname="",this.fieldSelection=void 0}get fieldcontent(){return this.model.getField(this.fieldname)}ngAfterViewInit(){this.editor.element.nativeElement.innerHTML=this.model.getField(this.fieldname)}eventHandler(e){this.fieldSelection=window.getSelection(),this.model.setField(this.fieldname,e.srcElement.innerHTML)}}return fieldWYSIWYGEditor.ɵfac=function(e){return new(e||fieldWYSIWYGEditor)(r.Y36(Z.o),r.Y36(A.e),r.Y36(x.d))},fieldWYSIWYGEditor.ɵcmp=r.Xpm({type:fieldWYSIWYGEditor,selectors:[["field-wysiwyg-editor"]],viewQuery:function(e,t){if(1&e&&r.Gf(he,7,r.s_b),2&e){let e;r.iGM(e=r.CRH())&&(t.editor=e.first)}},inputs:{fieldname:"fieldname"},decls:54,vars:9,consts:[[1,"demo-only",2,"min-height","180px"],[1,"slds-rich-text-editor","slds-form-element","slds-grid","slds-grid_vertical","slds-nowrap"],["role","toolbar",1,"slds-rich-text-editor__toolbar","slds-shrink-none"],["aria-label","Format text",1,"slds-button-group-list"],["tabindex","0","title","Provide description of action",1,"slds-button","slds-button_icon","slds-button_icon-border-filled"],[3,"icon"],[1,"slds-assistive-text"],["tabindex","-1","title","Provide description of action",1,"slds-button","slds-button_icon","slds-button_icon-border-filled"],["aria-label","Format body",1,"slds-button-group-list"],["aria-label","Remove Formatting",1,"slds-button-group-list"],[1,"slds-rich-text-editor__textarea","slds-grid"],["aria-label","Compose text","contenteditable","true",1,"slds-rich-text-area__content","slds-text-color_weak","slds-grow",3,"input"],["editor",""]],template:function(e,t){1&e&&(r.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"ul",3)(4,"li")(5,"button",4),r._UZ(6,"system-button-icon",5),r.TgZ(7,"span",6),r._uU(8,"Bold"),r.qZA()()(),r.TgZ(9,"li")(10,"button",7),r._UZ(11,"system-button-icon",5),r.TgZ(12,"span",6),r._uU(13,"Italic"),r.qZA()()(),r.TgZ(14,"li")(15,"button",7),r._UZ(16,"system-button-icon",5),r.TgZ(17,"span",6),r._uU(18,"Underline"),r.qZA()()(),r.TgZ(19,"li")(20,"button",7),r._UZ(21,"system-button-icon",5),r.TgZ(22,"span",6),r._uU(23,"Strike Through"),r.qZA()()()(),r.TgZ(24,"ul",8)(25,"li")(26,"button",7),r._UZ(27,"system-button-icon",5),r.TgZ(28,"span",6),r._uU(29,"Bulleted List"),r.qZA()()(),r.TgZ(30,"li")(31,"button",7),r._UZ(32,"system-button-icon",5),r.TgZ(33,"span",6),r._uU(34,"Numbered List"),r.qZA()()(),r.TgZ(35,"li")(36,"button",7),r._UZ(37,"system-button-icon",5),r.TgZ(38,"span",6),r._uU(39,"Indent"),r.qZA()()(),r.TgZ(40,"li")(41,"button",7),r._UZ(42,"system-button-icon",5),r.TgZ(43,"span",6),r._uU(44,"Outdent"),r.qZA()()()(),r.TgZ(45,"ul",9)(46,"li")(47,"button",7),r._UZ(48,"system-button-icon",5),r.TgZ(49,"span",6),r._uU(50,"Remove Formatting"),r.qZA()()()()(),r.TgZ(51,"div",10)(52,"div",11,12),r.NdJ("input",(function(e){return t.eventHandler(e)})),r.qZA()()()()),2&e&&(r.xp6(6),r.Q6J("icon","bold"),r.xp6(5),r.Q6J("icon","italic"),r.xp6(5),r.Q6J("icon","underline"),r.xp6(5),r.Q6J("icon","strikethrough"),r.xp6(6),r.Q6J("icon","richtextbulletedlist"),r.xp6(5),r.Q6J("icon","richtextnumberedlist"),r.xp6(5),r.Q6J("icon","richtextindent"),r.xp6(5),r.Q6J("icon","richtextoutdent"),r.xp6(6),r.Q6J("icon","remove_formatting"))},dependencies:[w.J],encapsulation:2}),fieldWYSIWYGEditor})();var pe=s(2422);const fe=["floatinput"];function be(e,t){if(1&e&&r._UZ(0,"field-label",3),2&e){const e=r.oxw();r.Q6J("fieldname",e.fieldname)("fieldconfig",e.fieldconfig)}}function _e(e,t){if(1&e&&(r.TgZ(0,"field-generic-display",4)(1,"div",5)(2,"span"),r._uU(3),r.qZA()()()),2&e){const e=r.oxw();r.Q6J("fielddisplayclass",e.fielddisplayclass)("fieldconfig",e.fieldconfig)("editable",e.isEditable()),r.xp6(3),r.Oqu(e.getValAsText())}}function ye(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"div",6)(1,"div",7)(2,"input",8,9),r.NdJ("keydown",(function(t){r.CHM(e);const s=r.oxw();return r.KtG(s.checkInput(t))}))("keyup",(function(){r.CHM(e);const t=r.oxw();return r.KtG(t.changed())}))("ngModelChange",(function(t){r.CHM(e);const s=r.oxw();return r.KtG(s.textvalue=t)})),r.qZA()(),r._UZ(4,"field-messages",10),r.qZA()}if(2&e){const e=r.oxw();r.Q6J("ngClass",e.getFieldClass()),r.xp6(2),r.Q6J("ngModel",e.textvalue),r.xp6(2),r.Q6J("fieldname",e.fieldname)}}let ve=(()=>{class fieldFloat extends d.O{constructor(e,t,s,i,n,l){super(e,t,s,i,n),this.model=e,this.view=t,this.language=s,this.metadata=i,this.router=n,this.userpreferences=l,this.textvalue=""}ngOnInit(){this.textvalue=this.getValAsText(),this.subscriptions.add(this.model.data$.subscribe((()=>{this.textvalue=this.getValAsText()})))}getValAsText(){if(void 0===this.value)return"";let e=parseFloat(this.value);return isNaN(e)?"":this.userpreferences.formatMoney(e)}checkInput(e){!/^[0-9.,]+$/.test(e.key)&&["ArrowRight","ArrowLeft","Backspace","Delete"].indexOf(e.key)<0&&(e.preventDefault(),console.log(e.key))}changed(){let e=this.inputel.nativeElement.selectionEnd,t=this.textvalue;t=t.split(this.userpreferences.toUse.num_grp_sep).join(""),t=t.split(this.userpreferences.toUse.dec_sep).join("."),isNaN(t=parseFloat(t))?this.value="":this.value=Math.round(t*Math.pow(10,this.userpreferences.toUse.default_currency_significant_digits))/Math.pow(10,this.userpreferences.toUse.default_currency_significant_digits),this.textvalue=this.getValAsText(),setTimeout((()=>{this.inputel.nativeElement.selectionEnd=e}))}}return fieldFloat.ɵfac=function(e){return new(e||fieldFloat)(r.Y36(Z.o),r.Y36(A.e),r.Y36(x.d),r.Y36(c.Pu),r.Y36(k.F0),r.Y36(pe.z))},fieldFloat.ɵcmp=r.Xpm({type:fieldFloat,selectors:[["field-float"]],viewQuery:function(e,t){if(1&e&&r.Gf(fe,5),2&e){let e;r.iGM(e=r.CRH())&&(t.inputel=e.first)}},features:[r.qOj],decls:3,vars:3,consts:[[3,"fieldname","fieldconfig",4,"ngIf"],[3,"fielddisplayclass","fieldconfig","editable",4,"ngIf"],["class","slds-form-element__control",3,"ngClass",4,"ngIf"],[3,"fieldname","fieldconfig"],[3,"fielddisplayclass","fieldconfig","editable"],[1,"slds-text-align_right"],[1,"slds-form-element__control",3,"ngClass"],[1,"slds-form-element","slds-m-vertical--xx-small"],["type","text",1,"slds-input","slds-text-align--right",3,"ngModel","keydown","keyup","ngModelChange"],["floatinput",""],[3,"fieldname"]],template:function(e,t){1&e&&(r.YNc(0,be,1,2,"field-label",0),r.YNc(1,_e,4,4,"field-generic-display",1),r.YNc(2,ye,5,3,"div",2)),2&e&&(r.Q6J("ngIf",t.displayLabel),r.xp6(1),r.Q6J("ngIf",!t.isEditMode()),r.xp6(1),r.Q6J("ngIf",t.isEditable()&&t.isEditMode()))},dependencies:[i.mk,i.O5,n.Fj,n.JJ,n.On,u.q,C.D,I.a],encapsulation:2}),fieldFloat})();var xe=s(5547),Ze=s(4270);const we=["floatinput"];function Te(e,t){if(1&e&&r._UZ(0,"field-label",3),2&e){const e=r.oxw();r.Q6J("fieldname",e.fieldname)("fieldconfig",e.fieldconfig)}}function Ce(e,t){if(1&e&&(r.TgZ(0,"field-generic-display",4)(1,"div",5),r._UZ(2,"system-display-number",6),r.qZA()()),2&e){const e=r.oxw();r.Q6J("fielddisplayclass",e.fielddisplayclass)("fieldconfig",e.fieldconfig)("editable",e.isEditable()),r.xp6(2),r.Q6J("number",e.value)("currency_id",e.currencyId)}}function Ae(e,t){if(1&e&&(r.TgZ(0,"div",17),r._uU(1),r.qZA()),2&e){const e=r.oxw(3);r.xp6(1),r.hij(" ",e.getCurrencySymbol(),"  ")}}function ke(e,t){if(1&e&&(r.TgZ(0,"option",22),r._uU(1),r.qZA()),2&e){const e=t.$implicit;r.Q6J("value",e.id),r.xp6(1),r.AsE("",e.iso," (",e.symbol,") ")}}function Le(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"div",18)(1,"div",19)(2,"select",20),r.NdJ("ngModelChange",(function(t){r.CHM(e);const s=r.oxw(3);return r.KtG(s.currencyId=t)})),r.YNc(3,ke,2,3,"option",21),r.qZA()()()}if(2&e){const e=r.oxw(3);r.xp6(2),r.Q6J("ngModel",e.currencyId),r.xp6(1),r.Q6J("ngForOf",e.currencies)}}const Me=function(e){return{"slds-size--1-of-4":e}};function Se(e,t){if(1&e&&(r.TgZ(0,"div",14),r.YNc(1,Ae,2,1,"div",15),r.YNc(2,Le,4,2,"div",16),r.qZA()),2&e){const e=r.oxw(2);r.Q6J("ngClass",r.VKq(3,Me,!e.fieldconfig.currencyReadonly)),r.xp6(1),r.Q6J("ngIf",e.fieldconfig.currencyReadonly),r.xp6(1),r.Q6J("ngIf",!e.fieldconfig.currencyReadonly)}}function Ie(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"div",7)(1,"div",8),r.YNc(2,Se,3,5,"div",9),r.TgZ(3,"div",10)(4,"input",11,12),r.NdJ("keydown",(function(t){r.CHM(e);const s=r.oxw();return r.KtG(s.checkInput(t))}))("keyup",(function(){r.CHM(e);const t=r.oxw();return r.KtG(t.changed())}))("ngModelChange",(function(t){r.CHM(e);const s=r.oxw();return r.KtG(s.textvalue=t)})),r.qZA()()(),r._UZ(6,"field-messages",13),r.qZA()}if(2&e){const e=r.oxw();r.Q6J("ngClass",e.getFieldClass()),r.xp6(2),r.Q6J("ngIf",e.currencyidfield),r.xp6(2),r.Q6J("ngModel",e.textvalue),r.xp6(2),r.Q6J("fieldname",e.fieldname)}}let Oe=(()=>{class fieldCurrency extends d.O{constructor(e,t,s,i,n,l,o){super(e,t,s,i,n),this.model=e,this.view=t,this.language=s,this.metadata=i,this.router=n,this.currency=l,this.userpreferences=o,this.textvalue="",this.currencies=[],this.currencyidfield="",this.currencies=this.currency.getCurrencies()}ngOnInit(){if(this.currencyidfield=this.fieldconfig.field_currencyid,!this.currencyidfield){this.metadata.getModuleFields(this.model.module).currency_id&&(this.currencyidfield="currency_id")}this.setDefaultCurrencyId(),this.textvalue=this.getValAsText(),this.subscriptions.add(this.model.data$.subscribe((()=>{this.textvalue=this.getValAsText()}))),this.setCurrencyFromPreferences()}setDefaultCurrencyId(){if(this.currencyidfield&&!this.model.getField(this.currencyidfield)){let e=this.userpreferences.getPreference("currency");this.currencyId=e||"-99"}}set currencyId(e){this.currencyidfield&&this.model.setField(this.currencyidfield,e)}get currencyId(){return this.currencyidfield?this.model.getField(this.currencyidfield):-99}getCurrencySymbol(){let e,t=-99;if(this.currencyidfield){if(!this.model.getField(this.currencyidfield))return"";t=this.model.getField(this.currencyidfield)}return this.currencies.some((s=>{if(s.id==t)return e=s.symbol,!0})),e}getValAsText(){if(void 0===this.value)return"";let e=parseFloat(this.value);return isNaN(e)?"":this.userpreferences.formatMoney(e)}checkInput(e){!/^[0-9.,]+$/.test(e.key)&&["ArrowRight","ArrowLeft","Backspace","Delete"].indexOf(e.key)<0&&(e.preventDefault(),console.log(e.key))}changed(){let e=this.inputel.nativeElement.selectionEnd,t=this.textvalue;t=t.split(this.userpreferences.toUse.num_grp_sep).join(""),t=t.split(this.userpreferences.toUse.dec_sep).join("."),isNaN(t=parseFloat(t))?this.value="":this.value=Math.round(t*Math.pow(10,this.userpreferences.toUse.default_currency_significant_digits))/Math.pow(10,this.userpreferences.toUse.default_currency_significant_digits),this.textvalue=this.getValAsText(),setTimeout((()=>{this.inputel.nativeElement.selectionEnd=e}))}handleViewModeChange(e){"edit"==e&&this.setCurrencyFromPreferences(),super.handleViewModeChange(e)}setCurrencyFromPreferences(){this.currencyidfield&&!this.model.getField(this.currencyidfield)&&this.model.setField(this.currencyidfield,this.userpreferences.toUse.currency)}}return fieldCurrency.ɵfac=function(e){return new(e||fieldCurrency)(r.Y36(Z.o),r.Y36(A.e),r.Y36(x.d),r.Y36(c.Pu),r.Y36(k.F0),r.Y36(xe.A),r.Y36(pe.z))},fieldCurrency.ɵcmp=r.Xpm({type:fieldCurrency,selectors:[["field-currency"]],viewQuery:function(e,t){if(1&e&&r.Gf(we,5),2&e){let e;r.iGM(e=r.CRH())&&(t.inputel=e.first)}},features:[r.qOj],decls:3,vars:3,consts:[[3,"fieldname","fieldconfig",4,"ngIf"],[3,"fielddisplayclass","fieldconfig","editable",4,"ngIf"],["class","slds-form-element__control",3,"ngClass",4,"ngIf"],[3,"fieldname","fieldconfig"],[3,"fielddisplayclass","fieldconfig","editable"],[1,"slds-grid","slds-grid--align-end"],[3,"number","currency_id"],[1,"slds-form-element__control",3,"ngClass"],[1,"slds-grid","slds-m-vertical--xx-small"],["class","slds-form-element slds-p-right--x-small",3,"ngClass",4,"ngIf"],[1,"slds-form-element","slds-grow"],[1,"slds-input","slds-text-align--right",3,"ngModel","keydown","keyup","ngModelChange"],["floatinput",""],[3,"fieldname"],[1,"slds-form-element","slds-p-right--x-small",3,"ngClass"],["class","slds-height_full slds-align--absolute-center slds-p-around--none","style","border-color:transparent",4,"ngIf"],["class","slds-form-element__control",4,"ngIf"],[1,"slds-height_full","slds-align--absolute-center","slds-p-around--none",2,"border-color","transparent"],[1,"slds-form-element__control"],[1,"slds-select_container"],[1,"slds-select",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(e,t){1&e&&(r.YNc(0,Te,1,2,"field-label",0),r.YNc(1,Ce,3,5,"field-generic-display",1),r.YNc(2,Ie,7,4,"div",2)),2&e&&(r.Q6J("ngIf",t.displayLabel),r.xp6(1),r.Q6J("ngIf",!t.isEditMode()),r.xp6(1),r.Q6J("ngIf",t.isEditable()&&t.isEditMode()))},dependencies:[i.mk,i.sg,i.O5,n.YN,n.Kr,n.Fj,n.EJ,n.JJ,n.On,Ze.G,u.q,C.D,I.a],encapsulation:2}),fieldCurrency})();function Je(e,t){if(1&e&&r._UZ(0,"field-label",4),2&e){const e=r.oxw();r.Q6J("fieldname",e.fieldname)("fieldconfig",e.fieldconfig)}}let Ne=(()=>{class fieldWeightedAmount extends Oe{constructor(e,t,s,i,n,l,o){super(e,t,s,i,n,l,o),this.model=e,this.view=t,this.language=s,this.metadata=i,this.router=n,this.currency=l,this.userpreferences=o,this.currencies=this.currency.getCurrencies()}get amountfield(){return this.fieldconfig.field_amount?this.fieldconfig.field_amount:"amount"}get probabilityfield(){return this.fieldconfig.field_probability?this.fieldconfig.field_probability:"probability"}getValue(){try{let e=this.model.getFieldValue("amount")?parseFloat(this.model.getFieldValue(this.amountfield)):0,t=this.model.getFieldValue("amount")?parseFloat(this.model.getFieldValue(this.probabilityfield)):0;return this.userpreferences.formatMoney(e*t/100)}catch(e){return 0}}}return fieldWeightedAmount.ɵfac=function(e){return new(e||fieldWeightedAmount)(r.Y36(Z.o),r.Y36(A.e),r.Y36(x.d),r.Y36(c.Pu),r.Y36(k.F0),r.Y36(xe.A),r.Y36(pe.z))},fieldWeightedAmount.ɵcmp=r.Xpm({type:fieldWeightedAmount,selectors:[["field-currency"]],features:[r.qOj],decls:8,vars:6,consts:[[3,"fieldname","fieldconfig",4,"ngIf"],[3,"fielddisplayclass","fieldconfig","editable"],[1,"slds-grid","slds-grid--align-spread"],["cass","slds-text-align--right"],[3,"fieldname","fieldconfig"]],template:function(e,t){1&e&&(r.YNc(0,Je,1,2,"field-label",0),r.TgZ(1,"field-generic-display",1)(2,"div",2)(3,"div"),r._uU(4),r.qZA(),r.TgZ(5,"div",3)(6,"span"),r._uU(7),r.qZA()()()()),2&e&&(r.Q6J("ngIf",t.displayLabel),r.xp6(1),r.Q6J("fielddisplayclass",t.fielddisplayclass)("fieldconfig",t.fieldconfig)("editable",!1),r.xp6(3),r.hij(" ",t.getCurrencySymbol()," "),r.xp6(3),r.Oqu(t.getValue()))},dependencies:[i.O5,u.q,C.D],encapsulation:2}),fieldWeightedAmount})();function Fe(e,t){if(1&e&&r._UZ(0,"field-label",4),2&e){const e=r.oxw();r.Q6J("fieldname",e.fieldname)("fieldconfig",e.fieldconfig)}}let qe=(()=>{class fieldTotalAmount extends Oe{constructor(e,t,s,i,n,l,o){super(e,t,s,i,n,l,o),this.model=e,this.view=t,this.language=s,this.metadata=i,this.router=n,this.currency=l,this.userpreferences=o,this.currencies=[],this.currencies=this.currency.getCurrencies()}get sumfields(){let e=[];if(this.fieldconfig.sumfields){let t=this.fieldconfig.sumfields.split(",");for(let s of t)e.push(s.trim())}return e}getValue(){let e=0;for(let t of this.sumfields){let s=this.model.getFieldValue(t);s&&(e+=parseFloat(s))}return this.model.setField(this.fieldname,e),this.userpreferences.formatMoney(e)}}return fieldTotalAmount.ɵfac=function(e){return new(e||fieldTotalAmount)(r.Y36(Z.o),r.Y36(A.e),r.Y36(x.d),r.Y36(c.Pu),r.Y36(k.F0),r.Y36(xe.A),r.Y36(pe.z))},fieldTotalAmount.ɵcmp=r.Xpm({type:fieldTotalAmount,selectors:[["field-currency"]],features:[r.qOj],decls:8,vars:6,consts:[[3,"fieldname","fieldconfig",4,"ngIf"],[3,"fielddisplayclass","fieldconfig","editable"],[1,"slds-grid","slds-grid--align-spread"],["cass","slds-text-align--right"],[3,"fieldname","fieldconfig"]],template:function(e,t){1&e&&(r.YNc(0,Fe,1,2,"field-label",0),r.TgZ(1,"field-generic-display",1)(2,"div",2)(3,"div"),r._uU(4),r.qZA(),r.TgZ(5,"div",3)(6,"span"),r._uU(7),r.qZA()()()()),2&e&&(r.Q6J("ngIf",t.displayLabel),r.xp6(1),r.Q6J("fielddisplayclass",t.fielddisplayclass)("fieldconfig",t.fieldconfig)("editable",!1),r.xp6(3),r.hij(" ",t.getCurrencySymbol()," "),r.xp6(3),r.Oqu(t.getValue()))},dependencies:[i.O5,u.q,C.D],encapsulation:2}),fieldTotalAmount})();function Ee(e,t){if(1&e&&r._UZ(0,"field-label",3),2&e){const e=r.oxw();r.Q6J("fieldname",e.fieldname)("fieldconfig",e.fieldconfig)}}function Ye(e,t){if(1&e&&(r.TgZ(0,"field-generic-display",4),r._uU(1),r.qZA()),2&e){const e=r.oxw();r.Q6J("fielddisplayclass",e.fielddisplayclass)("editable",e.isEditable())("fieldconfig",e.fieldconfig)("fieldid",e.fieldid),r.xp6(1),r.hij(" ",e.getValue(),"\n")}}function Qe(e,t){if(1&e&&(r.TgZ(0,"option",12),r._uU(1),r.qZA()),2&e){const e=t.$implicit;r.Q6J("ngValue",e.value),r.xp6(1),r.Oqu(e.display)}}function Ue(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"div",5)(1,"div",6)(2,"div",7)(3,"select",8,9),r.NdJ("ngModelChange",(function(t){r.CHM(e);const s=r.oxw();return r.KtG(s.value=t)})),r.YNc(5,Qe,2,2,"option",10),r.qZA()(),r._UZ(6,"field-messages",11),r.qZA()()}if(2&e){const e=r.oxw();r.xp6(1),r.Q6J("ngClass",e.getFieldClass()),r.xp6(2),r.Q6J("ngModel",e.value),r.xp6(2),r.Q6J("ngForOf",e.options),r.xp6(1),r.Q6J("fieldname",e.fieldname)}}let De=(()=>{class fieldEnum extends d.O{constructor(e,t,s,i,n){super(e,t,s,i,n),this.model=e,this.view=t,this.language=s,this.metadata=i,this.router=n,this.options=[],this.subscriptions.add(this.language.currentlanguage$.subscribe((e=>{this.getOptions()})))}ngOnInit(){super.ngOnInit(),this.getOptions()}getValue(){return this.language.getFieldDisplayOptionValue(this.model.module,this.fieldname,this.value)}getOptions(){let e=[],t=this.language.getFieldDisplayOptions(this.model.module,this.fieldname);for(let s in t)e.push({value:s,display:t[s]});if(this.options=e,this.fieldconfig.sortdirection)switch(this.fieldconfig.sortdirection.toLowerCase()){case"desc":this.options.sort(((e,t)=>e.display.toLowerCase()<t.display.toLowerCase()?1:-1));break;case"asc":this.options.sort(((e,t)=>e.display.toLowerCase()>t.display.toLowerCase()?1:-1))}}}return fieldEnum.ɵfac=function(e){return new(e||fieldEnum)(r.Y36(Z.o),r.Y36(A.e),r.Y36(x.d),r.Y36(c.Pu),r.Y36(k.F0))},fieldEnum.ɵcmp=r.Xpm({type:fieldEnum,selectors:[["field-enum"]],features:[r.qOj],decls:3,vars:3,consts:[[3,"fieldname","fieldconfig",4,"ngIf"],[3,"fielddisplayclass","editable","fieldconfig","fieldid",4,"ngIf"],["class","slds-form-element",4,"ngIf"],[3,"fieldname","fieldconfig"],[3,"fielddisplayclass","editable","fieldconfig","fieldid"],[1,"slds-form-element"],[1,"slds-form-element__control",3,"ngClass"],[1,"slds-select_container","slds-m-vertical--xx-small"],[1,"slds-select",3,"ngModel","ngModelChange"],["focus",""],[3,"ngValue",4,"ngFor","ngForOf"],[3,"fieldname"],[3,"ngValue"]],template:function(e,t){1&e&&(r.YNc(0,Ee,1,2,"field-label",0),r.YNc(1,Ye,2,5,"field-generic-display",1),r.YNc(2,Ue,7,4,"div",2)),2&e&&(r.Q6J("ngIf",t.displayLabel),r.xp6(1),r.Q6J("ngIf",!t.isEditMode()),r.xp6(1),r.Q6J("ngIf",t.isEditMode()))},dependencies:[i.mk,i.sg,i.O5,n.YN,n.Kr,n.EJ,n.JJ,n.On,u.q,C.D,I.a],encapsulation:2}),fieldEnum})();function je(e,t){if(1&e&&r._UZ(0,"field-label",3),2&e){const e=r.oxw();r.Q6J("fieldname",e.fieldname)("fieldconfig",e.fieldconfig)}}function Re(e,t){if(1&e&&(r.TgZ(0,"field-generic-display",4),r._uU(1),r.qZA()),2&e){const e=r.oxw();r.Q6J("fielddisplayclass",e.fielddisplayclass)("editable",e.isEditable())("fieldconfig",e.fieldconfig),r.xp6(1),r.hij(" ",e.displayValue,"\n")}}function Be(e,t){if(1&e&&(r.TgZ(0,"option",11),r._uU(1),r.qZA()),2&e){const e=t.$implicit;r.Q6J("value",e.value),r.xp6(1),r.Oqu(e.display)}}function Ge(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"div",5)(1,"div",6)(2,"div",7)(3,"select",8),r.NdJ("ngModelChange",(function(t){r.CHM(e);const s=r.oxw();return r.KtG(s.value=t)})),r.YNc(4,Be,2,2,"option",9),r.qZA()(),r._UZ(5,"field-messages",10),r.qZA()()}if(2&e){const e=r.oxw();r.xp6(1),r.Q6J("ngClass",e.getFieldClass()),r.xp6(2),r.Q6J("ngModel",e.value),r.xp6(1),r.Q6J("ngForOf",e.options),r.xp6(1),r.Q6J("fieldname",e.fieldname)}}let Pe=(()=>{class fieldLanguage extends d.O{constructor(e,t,s,i,n){super(e,t,s,i,n),this.model=e,this.view=t,this.language=s,this.metadata=i,this.router=n,this.displayValue="",this.options=[]}ngOnInit(){super.ngOnInit(),this.getOptions(),this.subscribeToDataChanges()}getOptions(){this.options=this.language.getAvialableLanguages().map((e=>({value:e.language,display:e.text}))),this.fieldconfig.canBeEmpty&&this.options.unshift({value:"",display:""})}subscribeToDataChanges(){this.subscriptions.add(this.model.data$.subscribe((e=>{e[this.fieldname]&&this.value!=e[this.fieldname]&&(this.value=e[this.fieldname]),this.displayValue!=this.value&&this.setDisplayValue()})))}setDisplayValue(){const e=this.options.find((e=>e.value==this.model.getField(this.fieldname)));this.displayValue=e?.display||""}}return fieldLanguage.ɵfac=function(e){return new(e||fieldLanguage)(r.Y36(Z.o),r.Y36(A.e),r.Y36(x.d),r.Y36(c.Pu),r.Y36(k.F0))},fieldLanguage.ɵcmp=r.Xpm({type:fieldLanguage,selectors:[["field-enum"]],features:[r.qOj],decls:3,vars:3,consts:[[3,"fieldname","fieldconfig",4,"ngIf"],[3,"fielddisplayclass","editable","fieldconfig",4,"ngIf"],["class","slds-form-element",4,"ngIf"],[3,"fieldname","fieldconfig"],[3,"fielddisplayclass","editable","fieldconfig"],[1,"slds-form-element"],[1,"slds-form-element__control",3,"ngClass"],[1,"slds-select_container","slds-m-vertical--xx-small"],[1,"slds-select",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[3,"fieldname"],[3,"value"]],template:function(e,t){1&e&&(r.YNc(0,je,1,2,"field-label",0),r.YNc(1,Re,2,4,"field-generic-display",1),r.YNc(2,Ge,6,4,"div",2)),2&e&&(r.Q6J("ngIf",t.displayLabel),r.xp6(1),r.Q6J("ngIf",!t.isEditMode()),r.xp6(1),r.Q6J("ngIf",t.isEditMode()))},dependencies:[i.mk,i.sg,i.O5,n.YN,n.Kr,n.EJ,n.JJ,n.On,u.q,C.D,I.a],encapsulation:2}),fieldLanguage})();function He(e,t){if(1&e&&(r.TgZ(0,"div",4)(1,"span",5)(2,"a",6),r._uU(3),r.qZA(),r.TgZ(4,"button",7),r._UZ(5,"system-button-icon",8),r.qZA()()()),2&e){const e=t.$implicit;r.xp6(3),r.Oqu(e.displayname),r.xp6(2),r.Q6J("icon","close")}}let ze=(()=>{class fieldEmailTo extends d.O{constructor(e,t,s,i,n,l){super(e,t,s,i,n),this.model=e,this.view=t,this.language=s,this.metadata=i,this.router=n,this.backend=l,this.loadingOptions=!1}}return fieldEmailTo.ɵfac=function(e){return new(e||fieldEmailTo)(r.Y36(Z.o),r.Y36(A.e),r.Y36(x.d),r.Y36(c.Pu),r.Y36(k.F0),r.Y36(H.y))},fieldEmailTo.ɵcmp=r.Xpm({type:fieldEmailTo,selectors:[["field-email-to"]],features:[r.qOj],decls:4,vars:2,consts:[[1,"slds-form-element"],[3,"fieldname"],[1,"slds-form-element__control"],["class","slds-pill_container",4,"ngFor","ngForOf"],[1,"slds-pill_container"],[1,"slds-pill"],["href","javascript:void(0);",1,"slds-pill__label"],[1,"slds-button","slds-button--icon","slds-pill__remove"],[3,"icon"]],template:function(e,t){1&e&&(r.TgZ(0,"div",0),r._UZ(1,"field-label",1),r.TgZ(2,"div",2),r.YNc(3,He,6,2,"div",3),r.qZA()()),2&e&&(r.xp6(1),r.Q6J("fieldname","to_addrs_names"),r.xp6(2),r.Q6J("ngForOf",t.model.data.to_addrs_names))},dependencies:[i.sg,w.J,u.q],encapsulation:2}),fieldEmailTo})();var Ve=s(2803);function Ke(e,t){if(1&e&&r._UZ(0,"field-label",3),2&e){const e=r.oxw();r.Q6J("fieldname",e.fieldname)("fieldconfig",e.fieldconfig)}}function $e(e,t){1&e&&r._UZ(0,"system-stencil")}function Xe(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"button",9),r.NdJ("click",(function(){r.CHM(e);const t=r.oxw(3);return r.KtG(t.setEditMode())})),r._UZ(1,"system-button-icon",10),r.qZA()}2&e&&(r.xp6(1),r.Q6J("icon","edit"))}function We(e,t){if(1&e&&(r.TgZ(0,"div",6)(1,"div",7),r._uU(2),r.qZA(),r.YNc(3,Xe,2,1,"button",8),r.qZA()),2&e){const e=r.oxw(2);r.Q6J("ngClass",e.fielddisplayclass),r.xp6(2),r.Oqu(e.getValue()),r.xp6(1),r.Q6J("ngIf",e.isEditable())}}function et(e,t){if(1&e&&(r.TgZ(0,"div"),r.YNc(1,$e,1,0,"system-stencil",4),r.YNc(2,We,4,3,"ng-template",null,5,r.W1O),r.qZA()),2&e){const e=r.MAs(3),t=r.oxw();r.xp6(1),r.Q6J("ngIf",t.model.isLoading)("ngIfElse",e)}}function tt(e,t){if(1&e&&(r.TgZ(0,"option",18),r._uU(1),r.qZA()),2&e){const e=t.$implicit;r.Q6J("ngValue",e.id),r.xp6(1),r.Oqu(e.summary_text)}}function st(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"div",11)(1,"div",12)(2,"div",13)(3,"select",14),r.NdJ("ngModelChange",(function(t){r.CHM(e);const s=r.oxw();return r.KtG(s.value=t)}))("change",(function(t){r.CHM(e);const s=r.oxw();return r.KtG(s.chooseTemplate(t))})),r._UZ(4,"option",15),r.YNc(5,tt,2,2,"option",16),r.qZA()(),r._UZ(6,"field-messages",17),r.qZA()()}if(2&e){const e=r.oxw();r.xp6(1),r.Q6J("ngClass",e.getFieldClass()),r.xp6(2),r.Q6J("disabled",e.isDisabled)("ngModel",e.value),r.xp6(2),r.Q6J("ngForOf",e.availableTemplates),r.xp6(1),r.Q6J("fieldname",e.fieldname)}}let it=(()=>{class fieldEmailTemplates extends d.O{constructor(e,t,s,i,n,l,o,a){super(e,t,s,i,n),this.model=e,this.view=t,this.language=s,this.metadata=i,this.router=n,this.backend=l,this.modal=o,this.configuration=a,this.isLoaded=!1,this.availableTemplates=[]}get subjectField(){return this.fieldconfig.subject?this.fieldconfig.subject:"name"}get bodyField(){return this.fieldconfig.body?this.fieldconfig.body:"body"}get addtocurrentquote(){return 1==this.fieldconfig.addtocurrentquote}get isDisabled(){return!this.model.getFieldValue("parent_type")||""==this.model.getFieldValue("parent_type")||!this.isLoaded||0==this.availableTemplates.length}getValue(){for(let e of this.availableTemplates)if(e.id==this.value)return e.name}ngOnInit(){let e=this.configuration.getData("EmailTemplates");if(e)this.availableTemplates=e.filter((e=>"email"==e.type&&("*"==e.for_bean||e.for_bean==this.model.getFieldValue("parent_type")))),this.isLoaded=!0;else{let e={start:0,limit:500,listid:"all"};this.backend.getRequest("module/EmailTemplates",e).subscribe((e=>{this.configuration.setData("EmailTemplates",e.list),this.availableTemplates=e.list.filter((e=>"email"==e.type&&("*"==e.for_bean||e.for_bean==this.model.getFieldValue("parent_type")))),this.isLoaded=!0}))}}chooseTemplate(e){""!=this.value&&this.modal.openModal("SystemLoadingModal",!1).subscribe((e=>{this.backend.getRequest("module/EmailTemplates/"+this.value+"/parse/"+this.model.getFieldValue("parent_type")+"/"+this.model.getFieldValue("parent_id")).subscribe((t=>{this.model.getField(this.subjectField)||this.model.setField(this.subjectField,t.subject);let s=document.implementation.createHTMLDocument("Virtual Document");s.documentElement.innerHTML=this.model.getFieldValue(this.bodyField);let i=s.querySelectorAll("div[spicecrm_temp_quote]"),n=s.querySelectorAll("div[data-signature]"),l=s.querySelectorAll("div[spicecrm_reply_quote]");i[0]?.parentNode.removeChild(i[0]);let o=['<div class="spicecrm_temp_quote">'+t.body_html+"</div>",n[0]?.outerHTML,l[0]?.outerHTML].join("<p><br></p>");this.model.setField(this.bodyField,o),e.instance.self.destroy()}))}))}}return fieldEmailTemplates.ɵfac=function(e){return new(e||fieldEmailTemplates)(r.Y36(Z.o),r.Y36(A.e),r.Y36(x.d),r.Y36(c.Pu),r.Y36(k.F0),r.Y36(H.y),r.Y36(L.o),r.Y36(K.C))},fieldEmailTemplates.ɵcmp=r.Xpm({type:fieldEmailTemplates,selectors:[["field-email-templates"]],features:[r.qOj],decls:3,vars:3,consts:[[3,"fieldname","fieldconfig",4,"ngIf"],[4,"ngIf"],["class","slds-form-element",4,"ngIf"],[3,"fieldname","fieldconfig"],[4,"ngIf","ngIfElse"],["displaycontent",""],[1,"slds-grid",3,"ngClass"],[1,"slds-truncate"],["class","slds-button slds-button--icon slds-col_bump-left slds-p-left--xx-small",3,"click",4,"ngIf"],[1,"slds-button","slds-button--icon","slds-col_bump-left","slds-p-left--xx-small",3,"click"],[3,"icon"],[1,"slds-form-element"],[1,"slds-form-element__control",3,"ngClass"],[1,"slds-select_container","slds-m-vertical--xx-small"],[1,"slds-select",3,"disabled","ngModel","ngModelChange","change"],["value",""],[3,"ngValue",4,"ngFor","ngForOf"],[3,"fieldname"],[3,"ngValue"]],template:function(e,t){1&e&&(r.YNc(0,Ke,1,2,"field-label",0),r.YNc(1,et,4,2,"div",1),r.YNc(2,st,7,5,"div",2)),2&e&&(r.Q6J("ngIf",t.displayLabel),r.xp6(1),r.Q6J("ngIf",!t.isEditMode()),r.xp6(1),r.Q6J("ngIf",t.isEditMode()))},dependencies:[i.mk,i.sg,i.O5,n.YN,n.Kr,n.EJ,n.JJ,n.On,w.J,Ve.B,u.q,I.a],encapsulation:2}),fieldEmailTemplates})();function nt(e,t){if(1&e&&r._UZ(0,"field-label",3),2&e){const e=r.oxw();r.Q6J("fieldname",e.fieldname)("fieldconfig",e.fieldconfig)}}function lt(e,t){1&e&&r._UZ(0,"system-stencil")}function ot(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"button",9),r.NdJ("click",(function(){r.CHM(e);const t=r.oxw(3);return r.KtG(t.setEditMode())})),r._UZ(1,"system-button-icon",10),r.qZA()}2&e&&(r.xp6(1),r.Q6J("icon","edit"))}function at(e,t){if(1&e&&(r.TgZ(0,"div",6)(1,"div",7),r._uU(2),r.qZA(),r.YNc(3,ot,2,1,"button",8),r.qZA()),2&e){const e=r.oxw(2);r.Q6J("ngClass",e.fielddisplayclass),r.xp6(2),r.Oqu(e.getValue()),r.xp6(1),r.Q6J("ngIf",e.isEditable())}}function dt(e,t){if(1&e&&(r.TgZ(0,"div"),r.YNc(1,lt,1,0,"system-stencil",4),r.YNc(2,at,4,3,"ng-template",null,5,r.W1O),r.qZA()),2&e){const e=r.MAs(3),t=r.oxw();r.xp6(1),r.Q6J("ngIf",t.model.isLoading)("ngIfElse",e)}}function rt(e,t){if(1&e&&(r.TgZ(0,"option",17),r._uU(1),r.qZA()),2&e){const e=t.$implicit;r.Q6J("ngValue",e.id),r.xp6(1),r.Oqu(e.name)}}function ct(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"div",11)(1,"div",12)(2,"div",13)(3,"select",14),r.NdJ("ngModelChange",(function(t){r.CHM(e);const s=r.oxw();return r.KtG(s.value=t)}))("change",(function(t){r.CHM(e);const s=r.oxw();return r.KtG(s.chooseTemplate(t))})),r.YNc(4,rt,2,2,"option",15),r.qZA()(),r._UZ(5,"field-messages",16),r.qZA()()}if(2&e){const e=r.oxw();r.xp6(1),r.Q6J("ngClass",e.getFieldClass()),r.xp6(2),r.Q6J("disabled",e.isDisabled)("ngModel",e.value),r.xp6(1),r.Q6J("ngForOf",e.availableTemplates),r.xp6(1),r.Q6J("fieldname",e.fieldname)}}let ut=(()=>{class fieldTextMessageTemplates extends d.O{constructor(e,t,s,i,n,l,o,a){super(e,t,s,i,n),this.model=e,this.view=t,this.language=s,this.metadata=i,this.router=n,this.backend=l,this.modal=o,this.configuration=a,this.isLoaded=!1,this.availableTemplates=[]}get bodyField(){return this.fieldconfig.body?this.fieldconfig.body:"description"}get isDisabled(){return!this.model.getFieldValue("parent_type")||""==this.model.getFieldValue("parent_type")||!this.isLoaded||0==this.availableTemplates.length}getValue(){for(let e of this.availableTemplates)if(e.id==this.value)return e.name}ngOnInit(){let e=this.configuration.getData("TextMessageTemplates");if(e)this.availableTemplates=e.filter((e=>"*"==e.parent_type||e.parent_type==this.model.getFieldValue("parent_type"))),this.isLoaded=!0;else{let e={start:0,limit:500,listid:"all"};this.backend.getRequest("module/TextMessageTemplates",e).subscribe((e=>{this.configuration.setData("TextMessageTemplates",e.list),this.availableTemplates=e.list.filter((e=>"*"==e.parent_type||e.parent_type==this.model.getFieldValue("parent_type"))),this.isLoaded=!0}))}}chooseTemplate(e){""!=this.value&&this.modal.openModal("SystemLoadingModal",!1).subscribe((e=>{this.backend.getRequest("module/TextMessageTemplates/"+this.value+"/parse/"+this.model.getFieldValue("parent_type")+"/"+this.model.getFieldValue("parent_id")).subscribe((t=>{this.model.setField(this.bodyField,t.description),e.instance.self.destroy()}))}))}}return fieldTextMessageTemplates.ɵfac=function(e){return new(e||fieldTextMessageTemplates)(r.Y36(Z.o),r.Y36(A.e),r.Y36(x.d),r.Y36(c.Pu),r.Y36(k.F0),r.Y36(H.y),r.Y36(L.o),r.Y36(K.C))},fieldTextMessageTemplates.ɵcmp=r.Xpm({type:fieldTextMessageTemplates,selectors:[["field-textmessage-templates"]],features:[r.qOj],decls:3,vars:3,consts:[[3,"fieldname","fieldconfig",4,"ngIf"],[4,"ngIf"],["class","slds-form-element",4,"ngIf"],[3,"fieldname","fieldconfig"],[4,"ngIf","ngIfElse"],["displaycontent",""],[1,"slds-grid",3,"ngClass"],[1,"slds-truncate"],["class","slds-button slds-button--icon slds-col_bump-left slds-p-left--xx-small",3,"click",4,"ngIf"],[1,"slds-button","slds-button--icon","slds-col_bump-left","slds-p-left--xx-small",3,"click"],[3,"icon"],[1,"slds-form-element"],[1,"slds-form-element__control",3,"ngClass"],[1,"slds-select_container","slds-m-vertical--xx-small"],[1,"slds-select",3,"disabled","ngModel","ngModelChange","change"],[3,"ngValue",4,"ngFor","ngForOf"],[3,"fieldname"],[3,"ngValue"]],template:function(e,t){1&e&&(r.YNc(0,nt,1,2,"field-label",0),r.YNc(1,dt,4,2,"div",1),r.YNc(2,ct,6,5,"div",2)),2&e&&(r.Q6J("ngIf",t.displayLabel),r.xp6(1),r.Q6J("ngIf",!t.isEditMode()),r.xp6(1),r.Q6J("ngIf",t.isEditMode()))},dependencies:[i.mk,i.sg,i.O5,n.YN,n.Kr,n.EJ,n.JJ,n.On,w.J,Ve.B,u.q,I.a],encapsulation:2}),fieldTextMessageTemplates})(),mt=(()=>{class fieldMultienumCheckBox{constructor(e,t,s,i){this.model=e,this.view=t,this.language=s,this.metadata=i,this.fieldname="",this.option="",this.disabled=!1,this.fieldid="",this.fieldid=this.model.generateGuid()}getValueArray(){return this.model.getField(this.fieldname)?this.model.getField(this.fieldname).substring(1,this.model.getField(this.fieldname).length-1).split("^,^"):[]}get checked(){if(this.model.getField(this.fieldname)){let e=!1;return this.model.getField(this.fieldname)==this.option.value&&(e=!0),this.model.getField(this.fieldname).indexOf("^"+this.option.value+"^")>-1&&(e=!0),e}return!1}set checked(e){let t=this.getValueArray(),s=t.indexOf(this.option.value);-1===s?t.push(this.option.value):t.splice(s,1),this.model.setField(this.fieldname,"^"+t.join("^,^")+"^")}}return fieldMultienumCheckBox.ɵfac=function(e){return new(e||fieldMultienumCheckBox)(r.Y36(Z.o),r.Y36(A.e),r.Y36(x.d),r.Y36(c.Pu))},fieldMultienumCheckBox.ɵcmp=r.Xpm({type:fieldMultienumCheckBox,selectors:[["field-multienum-checkbox"]],inputs:{fieldname:"fieldname",option:"option",disabled:"disabled"},decls:5,vars:5,consts:[["type","checkbox",3,"disabled","id","ngModel","ngModelChange"],[1,"slds-checkbox__label"],[1,"slds-checkbox--faux"],[1,"slds-form-element__label"]],template:function(e,t){1&e&&(r.TgZ(0,"input",0),r.NdJ("ngModelChange",(function(e){return t.checked=e})),r.qZA(),r.TgZ(1,"label",1),r._UZ(2,"span",2),r.TgZ(3,"span",3),r._uU(4),r.qZA()()),2&e&&(r.Q6J("disabled",t.disabled)("id",t.fieldid+t.option.value)("ngModel",t.checked),r.xp6(1),r.uIk("for",t.fieldid+t.option.value),r.xp6(3),r.Oqu(t.option.display))},dependencies:[n.Wl,n.JJ,n.On],encapsulation:2}),fieldMultienumCheckBox})();function ht(e,t){if(1&e&&r._UZ(0,"field-label",3),2&e){const e=r.oxw();r.Q6J("fieldname",e.fieldname)("fieldconfig",e.fieldconfig)}}function gt(e,t){if(1&e&&(r.TgZ(0,"span"),r._uU(1),r.qZA()),2&e){const e=r.oxw(2);r.xp6(1),r.Oqu(e.getValue())}}function pt(e,t){if(1&e&&r._UZ(0,"field-multienum-checkbox",11),2&e){const e=t.$implicit,s=r.oxw(4);r.Q6J("fieldname",s.fieldname)("option",e)}}function ft(e,t){if(1&e&&(r.TgZ(0,"div",9),r.YNc(1,pt,1,2,"field-multienum-checkbox",10),r.qZA()),2&e){const e=t.$implicit,s=r.oxw(3);r.Q6J("ngClass",s.getFieldClass()),r.xp6(1),r.Q6J("ngForOf",e)}}function bt(e,t){if(1&e&&(r.TgZ(0,"div",7),r.YNc(1,ft,2,2,"div",8),r.qZA()),2&e){const e=r.oxw(2);r.xp6(1),r.Q6J("ngForOf",e.options)}}function _t(e,t){if(1&e&&(r.TgZ(0,"field-generic-display",4),r.YNc(1,gt,2,1,"span",5),r.YNc(2,bt,2,1,"div",6),r.qZA()),2&e){const e=r.oxw();r.Q6J("fielddisplayclass",e.fielddisplayclass)("editable",e.isEditable())("fieldconfig",e.fieldconfig),r.xp6(1),r.Q6J("ngIf",!e.displayCheckboxes),r.xp6(1),r.Q6J("ngIf",e.displayCheckboxes)}}function yt(e,t){if(1&e&&r._UZ(0,"field-multienum-checkbox",15),2&e){const e=t.$implicit,s=r.oxw(3);r.Q6J("fieldname",s.fieldname)("option",e)}}function vt(e,t){if(1&e&&(r.TgZ(0,"div",9),r.YNc(1,yt,1,2,"field-multienum-checkbox",14),r.qZA()),2&e){const e=t.$implicit,s=r.oxw(2);r.Q6J("ngClass",s.getFieldClass()),r.xp6(1),r.Q6J("ngForOf",e)}}function xt(e,t){if(1&e&&(r.TgZ(0,"div",12)(1,"div",7),r.YNc(2,vt,2,2,"div",8),r.qZA(),r._UZ(3,"field-messages",13),r.qZA()),2&e){const e=r.oxw();r.xp6(2),r.Q6J("ngForOf",e.options),r.xp6(1),r.Q6J("fieldname",e.fieldname)}}let Zt=(()=>{class fieldMultienum extends d.O{constructor(e,t,s,i,n){super(e,t,s,i,n),this.model=e,this.view=t,this.language=s,this.metadata=i,this.router=n,this.options=[],this.subscriptions.add(this.language.currentlanguage$.subscribe((e=>{this.buildOptions()})))}ngOnInit(){this.buildOptions()}get columns(){return this.fieldconfig.columns?parseInt(this.fieldconfig.columns,10):4}get displayCheckboxes(){return!!this.fieldconfig.displaycheckboxes}getValue(){let e=[],t=this.getValueArray();for(let s of t){let t=this.language.getFieldDisplayOptionValue(this.model.module,this.fieldname,s);t&&e.push(t)}return e.join(", ")}getValueArray(){try{let e=this.model.getFieldValue(this.fieldname);return"^"==e.substr(0,1)&&(e=e.substr(1,e.length-2)),e.split("^,^")}catch(e){return[]}}buildOptions(){this.options=[];let e=this.language.getFieldDisplayOptions(this.model.module,this.fieldname),t=0;for(let s in e)t++;let s=t/this.columns,i=[];for(let t in e)i.push({id:this.model.generateGuid(),value:t,display:e[t]}),i.length>=s&&(this.options.push(i),i=[]);i.length>0&&this.options.push(i)}}return fieldMultienum.ɵfac=function(e){return new(e||fieldMultienum)(r.Y36(Z.o),r.Y36(A.e),r.Y36(x.d),r.Y36(c.Pu),r.Y36(k.F0))},fieldMultienum.ɵcmp=r.Xpm({type:fieldMultienum,selectors:[["field-multienum"]],features:[r.qOj],decls:3,vars:3,consts:[[3,"fieldname","fieldconfig",4,"ngIf"],[3,"fielddisplayclass","editable","fieldconfig",4,"ngIf"],["class","slds-form-element",4,"ngIf"],[3,"fieldname","fieldconfig"],[3,"fielddisplayclass","editable","fieldconfig"],[4,"ngIf"],["class","slds-grid slds-grid--align-spread",4,"ngIf"],[1,"slds-grid","slds-grid--align-spread"],["class","slds-form-element__control",3,"ngClass",4,"ngFor","ngForOf"],[1,"slds-form-element__control",3,"ngClass"],["disabled","true","class","slds-checkbox",3,"fieldname","option",4,"ngFor","ngForOf"],["disabled","true",1,"slds-checkbox",3,"fieldname","option"],[1,"slds-form-element"],[3,"fieldname"],["class","slds-checkbox",3,"fieldname","option",4,"ngFor","ngForOf"],[1,"slds-checkbox",3,"fieldname","option"]],template:function(e,t){1&e&&(r.YNc(0,ht,1,2,"field-label",0),r.YNc(1,_t,3,5,"field-generic-display",1),r.YNc(2,xt,4,2,"div",2)),2&e&&(r.Q6J("ngIf",t.displayLabel),r.xp6(1),r.Q6J("ngIf",!t.isEditMode()),r.xp6(1),r.Q6J("ngIf",t.isEditMode()))},dependencies:[i.mk,i.sg,i.O5,u.q,C.D,mt,I.a],encapsulation:2}),fieldMultienum})();var wt=s(7514),Tt=s(9503),Ct=s(8658);function At(e,t){if(1&e&&r._UZ(0,"field-label",3),2&e){const e=r.oxw();r.Q6J("fieldname",e.fieldname)("fieldconfig",e.fieldconfig)}}function kt(e,t){if(1&e&&(r.TgZ(0,"span"),r._uU(1),r.qZA()),2&e){const e=r.oxw(2);r.xp6(1),r.Oqu(e.localValue.valueDisplay)}}function Lt(e,t){if(1&e&&(r.TgZ(0,"div",13)(1,"system-checkbox-group-checkbox",14),r._uU(2),r.qZA()()),2&e){const e=t.$implicit,s=r.oxw(4);r.Q6J("ngClass",s.columnsClass),r.xp6(1),r.Q6J("value",e.value)("disabled",!0),r.xp6(1),r.hij(" ",e.display,"")}}function Mt(e,t){if(1&e&&(r.TgZ(0,"div",7)(1,"div",8)(2,"system-checkbox",9),r._uU(3),r.qZA()(),r.TgZ(4,"div",10)(5,"system-checkbox-group",11),r.YNc(6,Lt,3,4,"div",12),r.qZA()()()),2&e){const e=t.$implicit,s=r.oxw(3);r.xp6(2),r.Q6J("ngModel",e.value)("disabled",!0),r.xp6(1),r.Oqu(e.display),r.xp6(1),r.Q6J("ngClass",s.css_classes),r.xp6(1),r.Q6J("ngModel",s.localValue.valueArray),r.xp6(1),r.Q6J("ngForOf",e.options)("ngForTrackBy",s.trackByFn)}}function St(e,t){if(1&e&&(r.TgZ(0,"div"),r.YNc(1,Mt,7,7,"div",6),r.qZA()),2&e){const e=r.oxw(2);r.xp6(1),r.Q6J("ngForOf",e.groups)("ngForTrackBy",e.trackByFn)}}function It(e,t){if(1&e&&(r.TgZ(0,"field-generic-display",4),r.YNc(1,kt,2,1,"span",5),r.YNc(2,St,2,2,"div",5),r.qZA()),2&e){const e=r.oxw();r.Q6J("fielddisplayclass",e.fielddisplayclass)("editable",e.isEditable())("fieldconfig",e.fieldconfig),r.xp6(1),r.Q6J("ngIf",!e.fieldconfig.displayCheckboxes),r.xp6(1),r.Q6J("ngIf",!!e.fieldconfig.displayCheckboxes)}}function Ot(e,t){if(1&e&&(r.TgZ(0,"div",13)(1,"system-checkbox-group-checkbox",19),r._uU(2),r.qZA()()),2&e){const e=t.$implicit,s=r.oxw(3);r.Q6J("ngClass",s.columnsClass),r.xp6(1),r.Q6J("value",e.value),r.xp6(1),r.hij(" ",e.display," ")}}function Jt(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"div",7)(1,"div",8)(2,"system-checkbox",17),r.NdJ("ngModelChange",(function(t){const s=r.CHM(e).$implicit,i=r.oxw(2);return r.KtG(i.setGroupValue(t,s))})),r._uU(3),r.qZA()(),r.TgZ(4,"div",10)(5,"system-checkbox-group",18),r.NdJ("ngModelChange",(function(t){r.CHM(e);const s=r.oxw(2);return r.KtG(s.setItemValue(t))})),r.YNc(6,Ot,3,3,"div",12),r.qZA()()()}if(2&e){const e=t.$implicit,s=r.oxw(2);r.xp6(2),r.Q6J("ngModel",s.localValue.valueGroups[e.value]),r.xp6(1),r.hij(" ",e.display," "),r.xp6(1),r.Q6J("ngClass",s.css_classes),r.xp6(1),r.Q6J("ngModel",s.localValue.valueArray),r.xp6(1),r.Q6J("ngForOf",e.options)("ngForTrackBy",s.trackByFn)}}function Nt(e,t){if(1&e&&(r.TgZ(0,"div",15),r.YNc(1,Jt,7,6,"div",6),r._UZ(2,"field-messages",16),r.qZA()),2&e){const e=r.oxw();r.xp6(1),r.Q6J("ngForOf",e.groups)("ngForTrackBy",e.trackByFn),r.xp6(1),r.Q6J("fieldname",e.fieldname)}}let Ft=(()=>{class fieldGroupedEnum extends d.O{constructor(){super(...arguments),this.groups=[],this.fieldconfig={},this.localValue={valueText:"",valueArray:[],valueDisplay:"",valueGroups:{}},this.columnsClass="slds-size--1-of-4"}ngOnInit(){this.setColumnsClass(),this.buildOptionGroups(),this.setLocalValues(this.value),this.subscribeToLanguage(),this.subscribeToModelChanges()}setColumnsClass(){const e=+this.fieldconfig.columns<13&&+this.fieldconfig.columns>0?this.fieldconfig.columns:"4";this.columnsClass=`slds-size--1-of-${e}`}subscribeToLanguage(){this.subscriptions.add(this.language.currentlanguage$.subscribe((()=>this.buildOptionGroups())))}setLocalValues(e){if(!e)return this.localValue={valueText:"",valueArray:[],valueDisplay:"",valueGroups:{}};const t=this.language.getFieldDisplayOptions(this.model.module,this.fieldname),s=e.replace(/\^/g,"").split(",").map((e=>e.trim()));this.localValue={valueText:e,valueArray:s,valueDisplay:s.map((e=>t[e])).join(", "),valueGroups:{}};const i=this.fieldconfig.groupSeparator??"_";this.localValue.valueArray.forEach((e=>{this.localValue.valueGroups[e]=!e.includes(i)}))}subscribeToModelChanges(){this.subscriptions.add(this.model.data$.subscribe((e=>{this.localValue.valueText!==e[this.fieldname]&&this.setLocalValues(e[this.fieldname])})))}setItemValue(e){const t=e.map((e=>`^${e}^`)).join(",");this.setLocalValues(t),this.value=t}setGroupValue(e,t){let s=this.value;e?e&&-1==this.localValue.valueArray.indexOf(t.value)&&(s=`${this.localValue.valueText},^${t.value}^`):s=this.localValue.valueArray.filter((e=>e!==t.value)).map((e=>`^${e}^`)).join(","),this.setLocalValues(s),this.value=s}trackByFn(e,t){return t.value}buildOptionGroups(){this.groups=[];const e=this.language.getFieldDisplayOptions(this.model.module,this.fieldname,!0),t=this.fieldconfig.groupSeparator??"_",s=e.filter((e=>e.value.includes(t)));this.groups=e.filter((e=>!e.value.includes(t))).map((e=>({...e,options:s.filter((t=>t.value.startsWith(e.value)))})))}}return fieldGroupedEnum.ɵfac=function(){let e;return function(t){return(e||(e=r.n5z(fieldGroupedEnum)))(t||fieldGroupedEnum)}}(),fieldGroupedEnum.ɵcmp=r.Xpm({type:fieldGroupedEnum,selectors:[["field-grouped-enum"]],inputs:{fieldconfig:"fieldconfig"},features:[r.qOj],decls:3,vars:3,consts:[[3,"fieldname","fieldconfig",4,"ngIf"],[3,"fielddisplayclass","editable","fieldconfig",4,"ngIf"],["class","slds-form-element",4,"ngIf"],[3,"fieldname","fieldconfig"],[3,"fielddisplayclass","editable","fieldconfig"],[4,"ngIf"],["class","slds-m-bottom--medium",4,"ngFor","ngForOf","ngForTrackBy"],[1,"slds-m-bottom--medium"],[1,"slds-p-vertical--xx-small","slds-text-title_bold"],[3,"ngModel","disabled"],[1,"slds-form-element__control",3,"ngClass"],[1,"slds-grid","slds-wrap","slds-p-vertical--xxx-small",3,"ngModel"],["class","slds-truncate",3,"ngClass",4,"ngFor","ngForOf","ngForTrackBy"],[1,"slds-truncate",3,"ngClass"],[3,"value","disabled"],[1,"slds-form-element"],[3,"fieldname"],[3,"ngModel","ngModelChange"],[1,"slds-grid","slds-wrap","slds-p-vertical--xxx-small",3,"ngModel","ngModelChange"],[3,"value"]],template:function(e,t){1&e&&(r.YNc(0,At,1,2,"field-label",0),r.YNc(1,It,3,5,"field-generic-display",1),r.YNc(2,Nt,3,3,"div",2)),2&e&&(r.Q6J("ngIf",t.displayLabel),r.xp6(1),r.Q6J("ngIf",!t.isEditMode()),r.xp6(1),r.Q6J("ngIf",t.isEditMode()))},dependencies:[i.mk,i.sg,i.O5,n.JJ,n.On,wt.U,Tt.L,Ct.m,u.q,C.D,I.a],encapsulation:2}),fieldGroupedEnum})();var qt=s(116);function Et(e,t){if(1&e&&r._UZ(0,"field-label",3),2&e){const e=r.oxw();r.Q6J("fieldname",e.fieldname)("fieldconfig",e.fieldconfig)}}function Yt(e,t){if(1&e&&(r.TgZ(0,"field-generic-display",4)(1,"span"),r._uU(2),r.qZA()()),2&e){const e=r.oxw();r.Q6J("fielddisplayclass",e.fielddisplayclass)("editable",e.isEditable())("fieldconfig",e.fieldconfig),r.xp6(2),r.Oqu(e.viewModeValueText)}}function Qt(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"system-multiple-select",5),r.NdJ("ngModelChange",(function(t){r.CHM(e);const s=r.oxw();return r.KtG(s.setFieldValue(t))})),r.qZA()}if(2&e){const e=r.oxw();r.Q6J("ngModel",e.valueArray)("listItems",e.listItems)("groupSeparator",e.fieldconfig.groupSeparator)("grouped",e.fieldconfig.grouped)("showPills",e.fieldconfig.showPills)("listHeight",e.fieldconfig.listHeight)}}let Ut=(()=>{class fieldMultipleEnumDropdown extends d.O{constructor(e,t,s,i,n){super(e,t,s,i,n),this.model=e,this.view=t,this.language=s,this.metadata=i,this.router=n,this.valueArray=[],this.viewModeValueText=""}ngOnInit(){this.setSubscriptions()}setSubscriptions(){this.subscriptions.add(this.model.data$.subscribe((()=>{this.createValueArray(),this.createViewModeValueText()}))),this.subscriptions.add(this.language.currentlanguage$.subscribe((()=>{this.createViewModeValueText()})))}get listItems(){return this.language.getFieldDisplayOptions(this.model.module,this.fieldname)}setFieldValue(e){this.value=e.map((e=>`^${e}^`)).join(","),this.createValueArray(),this.createViewModeValueText()}createValueArray(){this.valueArray=this.value?this.value.replace(/\^/g,"").split(","):[]}createViewModeValueText(){let e=this.language.getFieldDisplayOptions(this.model.module,this.fieldname);this.viewModeValueText=this.valueArray.map((t=>e[t])).join(", ")}get grouped(){return void 0===this.fieldconfig.grouped||!0===this.fieldconfig.grouped}ngOnDestroy(){this.subscriptions.unsubscribe()}}return fieldMultipleEnumDropdown.ɵfac=function(e){return new(e||fieldMultipleEnumDropdown)(r.Y36(Z.o),r.Y36(A.e),r.Y36(x.d),r.Y36(c.Pu),r.Y36(k.F0))},fieldMultipleEnumDropdown.ɵcmp=r.Xpm({type:fieldMultipleEnumDropdown,selectors:[["field-multiple-enum-dropdown"]],features:[r.qOj],decls:3,vars:3,consts:[[3,"fieldname","fieldconfig",4,"ngIf"],[3,"fielddisplayclass","editable","fieldconfig",4,"ngIf"],[3,"ngModel","listItems","groupSeparator","grouped","showPills","listHeight","ngModelChange",4,"ngIf"],[3,"fieldname","fieldconfig"],[3,"fielddisplayclass","editable","fieldconfig"],[3,"ngModel","listItems","groupSeparator","grouped","showPills","listHeight","ngModelChange"]],template:function(e,t){1&e&&(r.YNc(0,Et,1,2,"field-label",0),r.YNc(1,Yt,3,4,"field-generic-display",1),r.YNc(2,Qt,1,6,"system-multiple-select",2)),2&e&&(r.Q6J("ngIf",t.displayLabel),r.xp6(1),r.Q6J("ngIf",!t.isEditMode()),r.xp6(1),r.Q6J("ngIf",t.isEditMode()))},dependencies:[i.O5,n.JJ,n.On,qt.I,u.q,C.D],encapsulation:2}),fieldMultipleEnumDropdown})();var Dt=s(9901);function jt(e,t){if(1&e&&r._UZ(0,"field-label",3),2&e){const e=r.oxw();r.Q6J("fieldname",e.fieldname)("fieldconfig",e.fieldconfig)}}function Rt(e,t){1&e&&r._UZ(0,"system-stencil")}function Bt(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"button",8),r.NdJ("click",(function(){r.CHM(e);const t=r.oxw(3);return r.KtG(t.setEditMode())})),r._UZ(1,"system-button-icon",9),r.qZA()}2&e&&(r.xp6(1),r.Q6J("icon","edit"))}function Gt(e,t){if(1&e&&(r.TgZ(0,"span"),r._uU(1),r.qZA(),r.YNc(2,Bt,2,1,"button",7)),2&e){const e=r.oxw(2);r.xp6(1),r.Oqu(e.getValue()),r.xp6(1),r.Q6J("ngIf",e.view.isEditable)}}function Pt(e,t){if(1&e&&(r.TgZ(0,"div",4),r.YNc(1,Rt,1,0,"system-stencil",5),r.YNc(2,Gt,3,2,"ng-template",null,6,r.W1O),r.qZA()),2&e){const e=r.MAs(3),t=r.oxw();r.xp6(1),r.Q6J("ngIf",t.model.isLoading)("ngIfElse",e)}}function Ht(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"system-input-radio",14),r.NdJ("ngModelChange",(function(t){r.CHM(e);const s=r.oxw(2);return r.KtG(s.value=t)})),r._uU(1),r.qZA()}if(2&e){const e=t.$implicit,s=r.oxw(2);r.Q6J("name",s.fieldid)("value",e.value)("ngModel",s.value),r.xp6(1),r.Oqu(e.display)}}function zt(e,t){if(1&e&&(r.TgZ(0,"div",10)(1,"div",11)(2,"div",12),r.YNc(3,Ht,2,4,"system-input-radio",13),r.qZA()()()),2&e){const e=r.oxw();r.xp6(3),r.Q6J("ngForOf",e.options)}}let Vt=(()=>{class fieldEnumAlternate extends De{setValue(e){this.value=e}}return fieldEnumAlternate.ɵfac=function(){let e;return function(t){return(e||(e=r.n5z(fieldEnumAlternate)))(t||fieldEnumAlternate)}}(),fieldEnumAlternate.ɵcmp=r.Xpm({type:fieldEnumAlternate,selectors:[["field-enum-alternate"]],features:[r.qOj],decls:3,vars:3,consts:[[3,"fieldname","fieldconfig",4,"ngIf"],["class","slds-text-body--regular slds-truncate slds-m-vertical--small spice-fieldbody",4,"ngIf"],["class","slds-form-element",4,"ngIf"],[3,"fieldname","fieldconfig"],[1,"slds-text-body--regular","slds-truncate","slds-m-vertical--small","spice-fieldbody"],[4,"ngIf","ngIfElse"],["displaycontent",""],["style","float: right","class","slds-button slds-button--icon",3,"click",4,"ngIf"],[1,"slds-button","slds-button--icon",2,"float","right",3,"click"],[3,"icon"],[1,"slds-form-element"],[1,"slds-form-element__control"],[1,"slds-grid--vertical"],[3,"name","value","ngModel","ngModelChange",4,"ngFor","ngForOf"],[3,"name","value","ngModel","ngModelChange"]],template:function(e,t){1&e&&(r.YNc(0,jt,1,2,"field-label",0),r.YNc(1,Pt,4,2,"div",1),r.YNc(2,zt,4,1,"div",2)),2&e&&(r.Q6J("ngIf",t.displayLabel),r.xp6(1),r.Q6J("ngIf",!t.isEditMode()),r.xp6(1),r.Q6J("ngIf",t.isEditMode()))},dependencies:[i.sg,i.O5,n.JJ,n.On,w.J,Dt.A,Ve.B,u.q],encapsulation:2}),fieldEnumAlternate})();function Kt(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"div",6)(1,"input",7),r.NdJ("ngModelChange",(function(t){r.CHM(e);const s=r.oxw(2);return r.KtG(s.value=t)})),r.qZA(),r.TgZ(2,"label",8),r._UZ(3,"span",9),r.TgZ(4,"span",10),r._uU(5),r.qZA()()()}if(2&e){const e=t.$implicit,s=r.oxw(2);r.xp6(1),r.Q6J("id",s.fieldid+e.value)("value",e.value)("ngModel",s.value),r.xp6(1),r.uIk("for",s.fieldid+e.value),r.xp6(3),r.Oqu(e.display)}}function $t(e,t){if(1&e&&(r.TgZ(0,"field-generic-display",2)(1,"div",3),r.YNc(2,Kt,6,5,"div",4),r._UZ(3,"field-messages",5),r.qZA()()),2&e){const e=r.oxw();r.Q6J("fielddisplayclass",e.fielddisplayclass)("editable",e.isEditable())("fieldconfig",e.fieldconfig)("fieldid",e.fieldid),r.xp6(1),r.Q6J("ngClass",e.getFieldClass()),r.xp6(1),r.Q6J("ngForOf",e.options),r.xp6(1),r.Q6J("fieldname",e.fieldname)}}function Xt(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"div",6)(1,"input",12),r.NdJ("ngModelChange",(function(t){r.CHM(e);const s=r.oxw(2);return r.KtG(s.value=t)})),r.qZA(),r.TgZ(2,"label",8),r._UZ(3,"span",9),r.TgZ(4,"span",10),r._uU(5),r.qZA()()()}if(2&e){const e=t.$implicit,s=r.oxw(2);r.xp6(1),r.Q6J("id",s.fieldid+e.value)("value",e.value)("ngModel",s.value),r.xp6(1),r.uIk("for",s.fieldid+e.value),r.xp6(3),r.Oqu(e.display)}}function Wt(e,t){if(1&e&&(r.TgZ(0,"div",11)(1,"div",3),r.YNc(2,Xt,6,5,"div",4),r._UZ(3,"field-messages",5),r.qZA()()),2&e){const e=r.oxw();r.xp6(1),r.Q6J("ngClass",e.getFieldClass()),r.xp6(1),r.Q6J("ngForOf",e.options),r.xp6(1),r.Q6J("fieldname",e.fieldname)}}let es=(()=>{class fieldEnumRadio extends d.O{constructor(e,t,s,i,n){super(e,t,s,i,n),this.model=e,this.view=t,this.language=s,this.metadata=i,this.router=n,this.options=[],this.subscriptions.add(this.language.currentlanguage$.subscribe((e=>{this.getOptions()})))}ngOnInit(){this.getOptions()}getValue(){return this.language.getFieldDisplayOptionValue(this.model.module,this.fieldname,this.value)}getOptions(){let e=[],t=this.language.getFieldDisplayOptions(this.model.module,this.fieldname);for(let s in t)e.push({value:s,display:t[s]});this.options=e}}return fieldEnumRadio.ɵfac=function(e){return new(e||fieldEnumRadio)(r.Y36(Z.o),r.Y36(A.e),r.Y36(x.d),r.Y36(c.Pu),r.Y36(k.F0))},fieldEnumRadio.ɵcmp=r.Xpm({type:fieldEnumRadio,selectors:[["field-enum-radio"]],features:[r.qOj],decls:2,vars:2,consts:[[3,"fielddisplayclass","editable","fieldconfig","fieldid",4,"ngIf"],["class","slds-form-element",4,"ngIf"],[3,"fielddisplayclass","editable","fieldconfig","fieldid"],[1,"slds-form-element__control","slds-grid",3,"ngClass"],["class","slds-radio",4,"ngFor","ngForOf"],[3,"fieldname"],[1,"slds-radio"],["disabled","","type","radio","name","options",3,"id","value","ngModel","ngModelChange"],[1,"slds-radio__label"],[1,"slds-radio_faux"],[1,"slds-form-element__label"],[1,"slds-form-element"],["type","radio","name","options",3,"id","value","ngModel","ngModelChange"]],template:function(e,t){1&e&&(r.YNc(0,$t,4,7,"field-generic-display",0),r.YNc(1,Wt,4,3,"div",1)),2&e&&(r.Q6J("ngIf",!t.isEditMode()),r.xp6(1),r.Q6J("ngIf",t.isEditMode()))},dependencies:[i.mk,i.sg,i.O5,n.Fj,n._,n.JJ,n.On,C.D,I.a],encapsulation:2}),fieldEnumRadio})();function ts(e,t){if(1&e&&r._UZ(0,"field-label",3),2&e){const e=r.oxw();r.Q6J("fieldname",e.fieldname)("fieldconfig",e.fieldconfig)}}function ss(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"field-generic-display",4)(1,"system-checkbox",5),r.NdJ("ngModelChange",(function(t){r.CHM(e);const s=r.oxw();return r.KtG(s.value=t)})),r.qZA()()}if(2&e){const e=r.oxw();r.Q6J("fielddisplayclass",e.fieldbooldisplayclass)("fieldconfig",e.fieldconfig)("editable",e.isEditable()),r.xp6(1),r.Q6J("ngModel",e.value)}}function is(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"div",6)(1,"div",7)(2,"system-checkbox",8),r.NdJ("ngModelChange",(function(t){r.CHM(e);const s=r.oxw();return r.KtG(s.value=t)})),r.qZA()(),r._UZ(3,"field-messages",9),r.qZA()}if(2&e){const e=r.oxw();r.Q6J("ngClass",e.getFieldClass()),r.xp6(2),r.Q6J("ngModel",e.value),r.xp6(1),r.Q6J("fieldname",e.fieldname)}}let ns=(()=>{class fieldBool extends d.O{get fieldbooldisplayclass(){return this.fielddisplayclass.replace("slds-p-vertical--x-small","slds-p-bottom--xxx-small slds-p-top--x-small")}}return fieldBool.ɵfac=function(){let e;return function(t){return(e||(e=r.n5z(fieldBool)))(t||fieldBool)}}(),fieldBool.ɵcmp=r.Xpm({type:fieldBool,selectors:[["field-bool"]],features:[r.qOj],decls:3,vars:3,consts:[[3,"fieldname","fieldconfig",4,"ngIf"],[3,"fielddisplayclass","fieldconfig","editable",4,"ngIf"],["class","slds-form-element__control",3,"ngClass",4,"ngIf"],[3,"fieldname","fieldconfig"],[3,"fielddisplayclass","fieldconfig","editable"],["disabled","",3,"ngModel","ngModelChange"],[1,"slds-form-element__control",3,"ngClass"],[1,"slds-p-vertical--x-small"],[3,"ngModel","ngModelChange"],[3,"fieldname"]],template:function(e,t){1&e&&(r.YNc(0,ts,1,2,"field-label",0),r.YNc(1,ss,2,4,"field-generic-display",1),r.YNc(2,is,4,3,"div",2)),2&e&&(r.Q6J("ngIf",t.displayLabel),r.xp6(1),r.Q6J("ngIf",!t.isEditMode()),r.xp6(1),r.Q6J("ngIf",t.isEditable()&&t.isEditMode()))},dependencies:[i.mk,i.O5,n.JJ,n.On,wt.U,u.q,C.D,I.a],encapsulation:2}),fieldBool})();var ls=s(7674);function os(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"field-generic-display",2)(1,"system-checkbox",3),r.NdJ("ngModelChange",(function(t){r.CHM(e);const s=r.oxw();return r.KtG(s.value=t)})),r._UZ(2,"system-label-fieldname",4),r.qZA()()}if(2&e){const e=r.oxw();r.Q6J("fielddisplayclass",e.fieldbooldisplayclass)("fieldconfig",e.fieldconfig)("editable",e.isEditable()),r.xp6(1),r.Q6J("ngModel",e.value),r.xp6(1),r.Q6J("module",e.model.module)("field",e.fieldname)("fieldconfig",e.fieldconfig)}}function as(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"div",5)(1,"div",6)(2,"system-checkbox",7),r.NdJ("ngModelChange",(function(t){r.CHM(e);const s=r.oxw();return r.KtG(s.value=t)})),r._UZ(3,"system-label-fieldname",4),r.qZA()(),r._UZ(4,"field-messages",8),r.qZA()}if(2&e){const e=r.oxw();r.Q6J("ngClass",e.getFieldClass()),r.xp6(2),r.Q6J("ngModel",e.value),r.xp6(1),r.Q6J("module",e.model.module)("field",e.fieldname)("fieldconfig",e.fieldconfig),r.xp6(1),r.Q6J("fieldname",e.fieldname)}}let ds=(()=>{class fieldBoolLabelAligned extends d.O{get fieldbooldisplayclass(){return this.fielddisplayclass.replace("slds-p-vertical--x-small","slds-p-bottom--xxx-small slds-p-top--x-small")}}return fieldBoolLabelAligned.ɵfac=function(){let e;return function(t){return(e||(e=r.n5z(fieldBoolLabelAligned)))(t||fieldBoolLabelAligned)}}(),fieldBoolLabelAligned.ɵcmp=r.Xpm({type:fieldBoolLabelAligned,selectors:[["ng-component"]],features:[r.qOj],decls:2,vars:2,consts:[[3,"fielddisplayclass","fieldconfig","editable",4,"ngIf"],["class","slds-form-element__control",3,"ngClass",4,"ngIf"],[3,"fielddisplayclass","fieldconfig","editable"],["disabled","",3,"ngModel","ngModelChange"],[3,"module","field","fieldconfig"],[1,"slds-form-element__control",3,"ngClass"],[1,"slds-p-vertical--x-small"],[3,"ngModel","ngModelChange"],[3,"fieldname"]],template:function(e,t){1&e&&(r.YNc(0,os,3,7,"field-generic-display",0),r.YNc(1,as,5,6,"div",1)),2&e&&(r.Q6J("ngIf",!t.isEditMode()),r.xp6(1),r.Q6J("ngIf",t.isEditable()&&t.isEditMode()))},dependencies:[i.mk,i.O5,n.JJ,n.On,wt.U,ls.h,C.D,I.a],encapsulation:2}),fieldBoolLabelAligned})();var rs=s(4561),cs=s(3333),us=s(1790),ms=s(4271),hs=s(5957);function gs(e,t){if(1&e&&r._UZ(0,"field-label",3),2&e){const e=r.oxw();r.Q6J("fieldname",e.fieldname)("fieldconfig",e.fieldconfig)}}function ps(e,t){if(1&e&&r._UZ(0,"system-icon",9),2&e){const e=r.oxw(3);r.Q6J("module",e.model.data[e.parentTypeField])("size","x-small")}}function fs(e,t){if(1&e&&(r.TgZ(0,"div",6),r.YNc(1,ps,1,2,"system-icon",7),r.TgZ(2,"span",8),r._uU(3),r.qZA()()),2&e){const e=r.oxw(2);r.xp6(1),r.Q6J("ngIf",e.displayModuleIcon),r.xp6(1),r.Q6J("module",e.parentType)("id",e.parentId),r.xp6(1),r.Oqu(e.value)}}function bs(e,t){if(1&e&&(r.TgZ(0,"field-generic-display",4),r.YNc(1,fs,4,4,"div",5),r.qZA()),2&e){const e=r.oxw();r.Q6J("fielddisplayclass",e.fielddisplayclass)("editable",e.isEditable())("fieldconfig",e.fieldconfig)("fieldid",e.fieldid),r.xp6(1),r.Q6J("ngIf",e.parentId)}}function _s(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"div",15)(1,"div",16)(2,"span",17)(3,"span",18),r._UZ(4,"system-icon",9),r.qZA(),r.TgZ(5,"span",19),r._uU(6),r.qZA(),r.TgZ(7,"button",20),r.NdJ("click",(function(){r.CHM(e);const t=r.oxw(2);return r.KtG(t.clearParent())})),r._UZ(8,"system-button-icon",21),r.qZA()()()()}if(2&e){const e=r.oxw(2);r.xp6(4),r.Q6J("module",e.model.data[e.parentTypeField])("size","small"),r.xp6(2),r.Oqu(e.parentName),r.xp6(2),r.Q6J("icon","close")}}function ys(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"li",42),r.NdJ("click",(function(){const t=r.CHM(e).$implicit,s=r.oxw(4);return r.KtG(s.setParentType(t))})),r.TgZ(1,"div",43)(2,"div",44),r._UZ(3,"system-icon",45),r.TgZ(4,"div",46),r._UZ(5,"system-label-modulename",47),r.qZA()()()()}if(2&e){const e=t.$implicit;r.xp6(3),r.Q6J("module",e),r.xp6(2),r.Q6J("module",e)}}const vs=function(e){return{"slds-is-open":e}};function xs(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"div",33)(1,"div",11)(2,"div",34)(3,"div",35)(4,"div",25)(5,"div",36),r.NdJ("click",(function(){r.CHM(e);const t=r.oxw(3);return r.KtG(t.openParentTypes())})),r._UZ(6,"input",37)(7,"system-icon",38),r.qZA(),r.TgZ(8,"div",39)(9,"ul",40),r.YNc(10,ys,6,2,"li",41),r.qZA()()()()()()()}if(2&e){const e=r.oxw(3);r.xp6(4),r.Q6J("ngClass",r.VKq(3,vs,e.parentTypeSelectOpen)),r.xp6(2),r.Q6J("value",e.language.getModuleName(e.parentType)),r.xp6(4),r.Q6J("ngForOf",e.parentTypes)}}function Zs(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"field-lookup-recent",48),r.NdJ("selectedObject",(function(t){r.CHM(e);const s=r.oxw(3);return r.KtG(s.setParent(t))})),r.qZA()}if(2&e){const e=r.oxw(3);r.Q6J("module",e.parentType)}}function ws(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"field-lookup-search",49),r.NdJ("selectedObject",(function(t){r.CHM(e);const s=r.oxw(3);return r.KtG(s.setParent(t))}))("searchWithModal",(function(){r.CHM(e);const t=r.oxw(3);return r.KtG(t.searchWithModal())})),r.qZA()}if(2&e){const e=r.oxw(3);r.Q6J("module",e.parentType)("searchterm",e.parentSearchTerm)}}function Ts(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"div",22),r.YNc(1,xs,11,5,"div",23),r.TgZ(2,"div",24)(3,"div",25)(4,"div",26)(5,"input",27,28),r.NdJ("focus",(function(){r.CHM(e);const t=r.oxw(2);return r.KtG(t.onFocusParent())}))("ngModelChange",(function(t){r.CHM(e);const s=r.oxw(2);return r.KtG(s.parentSearchTerm=t)})),r.qZA(),r.TgZ(7,"button",29),r.NdJ("click",(function(){r.CHM(e);const t=r.oxw(2);return r.KtG(t.searchWithModal())})),r._UZ(8,"system-button-icon",21),r.qZA()(),r.TgZ(9,"div",30),r.YNc(10,Zs,1,1,"field-lookup-recent",31),r.YNc(11,ws,1,2,"field-lookup-search",32),r.qZA()()()()}if(2&e){const e=r.oxw(2);r.xp6(1),r.Q6J("ngIf",e.parentTypes.length>0),r.xp6(2),r.Q6J("ngClass",r.VKq(7,vs,e.parentSearchOpen)),r.xp6(2),r.Q6J("ngModel",e.parentSearchTerm)("placeholder",e.language.getModuleCombinedLabel("LBL_SEARCH",e.parentType)),r.xp6(3),r.Q6J("icon","search"),r.xp6(2),r.Q6J("ngIf",""===e.parentSearchTerm),r.xp6(1),r.Q6J("ngIf",""!==e.parentSearchTerm)}}function Cs(e,t){if(1&e&&(r.TgZ(0,"div",10)(1,"div",11),r.YNc(2,_s,9,4,"div",12),r.YNc(3,Ts,12,9,"div",13),r.qZA(),r._UZ(4,"field-messages",14),r.qZA()),2&e){const e=r.oxw();r.Q6J("ngClass",e.getFieldClass()),r.xp6(2),r.Q6J("ngIf",e.model.data[e.parentIdField]),r.xp6(1),r.Q6J("ngIf",!e.model.data[e.parentIdField]),r.xp6(1),r.Q6J("fieldname",e.fieldname)}}let As=(()=>{class fieldParent extends d.O{constructor(e,t,s,i,n,l,o,a,d){super(e,t,i,n,l),this.model=e,this.view=t,this.broadcast=s,this.language=i,this.metadata=n,this.router=l,this.elementRef=o,this.renderer=a,this.modal=d,this.parentTypeSelectOpen=!1,this.parentSearchOpen=!1,this.parentSearchTerm="",this.recentItems=[],this.parentTypes=[],this.broadcast.message$.subscribe((e=>this.handleMessage(e)))}get parentIdField(){return this.fieldconfig.parentIdField?this.fieldconfig.parentIdField:"parent_id"}get parentTypeField(){return this.fieldconfig.parentTypeField?this.fieldconfig.parentTypeField:"parent_type"}get parentName(){return this.model.getField(this.fieldname)}get parentType(){return this.model.getField(this.parentTypeField)}get parentId(){return this.model.getField(this.parentIdField)}get displayModuleIcon(){return!this.fieldconfig.hidemoduleicon}ngOnInit(){this.determineParentTypes(),this.model.getField(this.parentTypeField)&&""!=this.model.getField(this.parentTypeField)||this.model.setField(this.parentTypeField,this.parentTypes[0])}determineParentTypes(){let e=[];this.fieldconfig.parenttypes?e=this.fieldconfig.parenttypes.replace(/\s/g,"").split(","):this.field_defs.parent_modules&&(e=this.field_defs.parent_modules),e.sort(((e,t)=>this.language.getModuleName(e).toLowerCase()>this.language.getModuleName(t).toLowerCase()?1:-1)),this.parentTypes=e}handleMessage(e){if(e.messagedata.reference&&"model.save"===e.messagetype)if(this.fieldid===e.messagedata.reference){this.parentSearchTerm="";let t={};t[this.parentIdField]=e.messagedata.data.id,t[this.fieldname]=e.messagedata.data.summary_text,this.model.setFields(t,!0)}}onClick(e){this.elementRef.nativeElement.contains(e.target)||this.closePopups()}closePopups(){this.model.getField(this.parentIdField)&&(this.parentSearchTerm=""),this.parentSearchOpen=!1,this.parentTypeSelectOpen=!1,this.clickListener()}setParent(e){this.model.setField(this.fieldname,e.text),this.model.setField(this.parentIdField,e.id)}toggleParentTypeSelect(){this.parentTypeSelectOpen=!this.parentTypeSelectOpen,this.parentSearchOpen=!1}setParentType(e){this.parentSearchTerm="",this.model.setField(this.parentTypeField,e),this.parentTypeSelectOpen=!1}clearParent(){this.fieldconfig.promptondelete?this.modal.confirm(this.language.getLabelFormatted("LBL_PROMPT_DELETE_RELATIONSHIP",[this.language.getFieldDisplayName(this.model.module,this.fieldname,this.fieldconfig)],"long"),this.language.getLabelFormatted("LBL_PROMPT_DELETE_RELATIONSHIP",[this.language.getFieldDisplayName(this.model.module,this.fieldname,this.fieldconfig)])).subscribe((e=>{e&&this.removeRelated()})):this.removeRelated()}removeRelated(){this.model.setField(this.fieldname,""),this.model.setField(this.parentIdField,"")}openParentTypes(){this.parentTypeSelectOpen=!0,this.parentSearchOpen=!1,this.clickListener=this.renderer.listen("document","click",(e=>this.onClick(e)))}onFocusParent(){this.parentTypeSelectOpen=!1,this.parentSearchOpen=!0,this.clickListener=this.renderer.listen("document","click",(e=>this.onClick(e)))}searchWithModal(){this.parentSearchOpen=!1,this.modal.openModal("ObjectModalModuleLookup").subscribe((e=>{e.instance.module=this.parentType,e.instance.multiselect=!1,e.instance.selectedItems.subscribe((e=>{e.length&&this.setParent({id:e[0].id,text:e[0].summary_text,data:e[0]})})),e.instance.searchTerm=this.parentSearchTerm}))}}return fieldParent.ɵfac=function(e){return new(e||fieldParent)(r.Y36(Z.o),r.Y36(A.e),r.Y36(V.f),r.Y36(x.d),r.Y36(c.Pu),r.Y36(k.F0),r.Y36(r.SBq),r.Y36(r.Qsj),r.Y36(L.o))},fieldParent.ɵcmp=r.Xpm({type:fieldParent,selectors:[["field-parent"]],features:[r.qOj],decls:3,vars:3,consts:[[3,"fieldname","fieldconfig",4,"ngIf"],[3,"fielddisplayclass","editable","fieldconfig","fieldid",4,"ngIf"],["class","slds-form-element__control",3,"ngClass",4,"ngIf"],[3,"fieldname","fieldconfig"],[3,"fielddisplayclass","editable","fieldconfig","fieldid"],["class","slds-grid slds-grid_vertical-align-center",4,"ngIf"],[1,"slds-grid","slds-grid_vertical-align-center"],[3,"module","size",4,"ngIf"],["system-model-popover","",3,"module","id"],[3,"module","size"],[1,"slds-form-element__control",3,"ngClass"],[1,"slds-form-element"],["class","slds-form-element__control slds-p-around--xx-small",4,"ngIf"],["class","slds-combobox-group slds-p-around--xx-small",4,"ngIf"],[3,"fieldname"],[1,"slds-form-element__control","slds-p-around--xx-small"],[1,"slds-pill_container"],[1,"slds-pill","slds-size--1-of-1"],[1,"slds-icon_container","slds-icon-standard-account","slds-pill__icon_container"],[1,"slds-pill__label"],[1,"slds-button","slds-button--icon","slds-pill__remove",3,"click"],[3,"icon"],[1,"slds-combobox-group","slds-p-around--xx-small"],["class","slds-combobox_object-switcher slds-combobox-addon_start",4,"ngIf"],[1,"slds-combobox_container","slds-combobox-addon_end"],["role","combobox",1,"slds-combobox","slds-dropdown-trigger","slds-dropdown-trigger_click",3,"ngClass"],["role","none",1,"slds-combobox__form-element","slds-input-has-icon","slds-input-has-icon_right"],["type","text","aria-autocomplete","list","autoComplete","off","role","textbox",1,"slds-input","slds-combobox__input",3,"ngModel","placeholder","focus","ngModelChange"],["focus",""],[1,"slds-button","slds-button_icon","slds-input__icon","slds-input__icon_right",3,"click"],["role","listbox",1,"slds-dropdown","slds-dropdown_length-with-icon-7","slds-dropdown_fluid"],[3,"module","selectedObject",4,"ngIf"],[3,"module","searchterm","selectedObject","searchWithModal",4,"ngIf"],[1,"slds-combobox_object-switcher","slds-combobox-addon_start"],[1,"slds-form-element__control"],[1,"slds-combobox_container"],[1,"slds-combobox__form-element","slds-input-has-icon","slds-input-has-icon--right",3,"click"],["type","text","readonly","","autoComplete","off","role","textbox",1,"slds-input","slds-combobox__input","slds-combobox__input-value",3,"value"],["icon","down","sprite","utility","addclasses","slds-input__icon slds-input__icon_right"],["role","listbox",1,"slds-dropdown","slds-dropdown_length-5","slds-dropdown_x-small","slds-dropdown_left"],["role","group","aria-label","Suggested for you",1,"slds-listbox","slds-listbox_vertical"],["role","presentation","class","slds-listbox__item",3,"click",4,"ngFor","ngForOf"],["role","presentation",1,"slds-listbox__item",3,"click"],["role","option",1,"slds-media","slds-listbox__option","slds-listbox__option_plain","slds-media_small"],[1,"slds-grid","slds-grid--vertical-align-center"],["size","x-small",3,"module"],[1,"slds-truncate"],[3,"module"],[3,"module","selectedObject"],[3,"module","searchterm","selectedObject","searchWithModal"]],template:function(e,t){1&e&&(r.YNc(0,gs,1,2,"field-label",0),r.YNc(1,bs,2,5,"field-generic-display",1),r.YNc(2,Cs,5,4,"div",2)),2&e&&(r.Q6J("ngIf",t.displayLabel),r.xp6(1),r.Q6J("ngIf",!t.isEditMode()),r.xp6(1),r.Q6J("ngIf",t.isEditable()&&t.isEditMode()))},dependencies:[i.mk,i.sg,i.O5,n.Fj,n.JJ,n.On,w.J,rs.f,cs.M,us.g,u.q,C.D,ms.P,hs.$,I.a],encapsulation:2}),fieldParent})();var ks=s(9637);function Ls(e,t){if(1&e&&r._UZ(0,"field-label",3),2&e){const e=r.oxw();r.Q6J("fieldname",e.fieldname)("fieldconfig",e.fieldconfig)}}function Ms(e,t){if(1&e&&(r.TgZ(0,"field-generic-display",4)(1,"a",5),r._uU(2),r.qZA()()),2&e){const e=r.oxw();r.Q6J("fielddisplayclass",e.fielddisplayclass)("editable",e.isEditable())("fieldconfig",e.fieldconfig),r.xp6(2),r.Oqu(e.value)}}function Ss(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"div",11)(1,"div",12)(2,"span",13)(3,"span",14),r._UZ(4,"system-icon",15),r.qZA(),r.TgZ(5,"span",16),r._uU(6),r.qZA(),r.TgZ(7,"button",17),r.NdJ("click",(function(){r.CHM(e);const t=r.oxw(2);return r.KtG(t.clearFilter())})),r._UZ(8,"system-button-icon",18),r.qZA()()()()}if(2&e){const e=r.oxw(2);r.xp6(4),r.Q6J("module",e.model.data.module)("size","small"),r.xp6(2),r.Oqu(e.moduleFilterName),r.xp6(2),r.Q6J("icon","close")}}function Is(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"li",35),r.NdJ("click",(function(){const t=r.CHM(e).$implicit,s=r.oxw(4);return r.KtG(s.setModule(t))})),r.TgZ(1,"div",36)(2,"div",37),r._UZ(3,"system-icon",38),r.TgZ(4,"div",39),r._UZ(5,"system-label-modulename",40),r.qZA()()()()}if(2&e){const e=t.$implicit;r.xp6(3),r.Q6J("module",e),r.xp6(2),r.Q6J("module",e)}}const Os=function(e){return{"slds-is-open":e}};function Js(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"div",26)(1,"div",7)(2,"div",22)(3,"div",27)(4,"div",28)(5,"div",29),r.NdJ("click",(function(){r.CHM(e);const t=r.oxw(3);return r.KtG(t.openModules())})),r._UZ(6,"input",30)(7,"system-icon",31),r.qZA(),r.TgZ(8,"div",32)(9,"ul",33),r.YNc(10,Is,6,2,"li",34),r.qZA()()()()()()()}if(2&e){const e=r.oxw(3);r.xp6(4),r.Q6J("ngClass",r.VKq(3,Os,e.moduleSelectOpen)),r.xp6(2),r.Q6J("value",e.language.getModuleName(e.module)),r.xp6(4),r.Q6J("ngForOf",e.modules)}}function Ns(e,t){if(1&e&&(r.TgZ(0,"option",41),r._uU(1),r.qZA()),2&e){const e=t.$implicit;r.Q6J("value",e.id),r.xp6(1),r.Oqu(e.name)}}function Fs(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"div",19),r.YNc(1,Js,11,5,"div",20),r.TgZ(2,"div",21)(3,"div",22)(4,"div",23)(5,"select",24),r.NdJ("click",(function(){r.CHM(e);const t=r.oxw(2);return r.KtG(t.moduleSelectOpen=!1)}))("ngModelChange",(function(t){r.CHM(e);const s=r.oxw(2);return r.KtG(s.moduleFilter=t)})),r.YNc(6,Ns,2,2,"option",25),r.qZA()()()()()}if(2&e){const e=r.oxw(2);r.xp6(1),r.Q6J("ngIf",e.modules.length>1),r.xp6(4),r.Q6J("disabled",!e.module||0==e.moduleFilters.length)("ngModel",e.moduleFilter),r.xp6(1),r.Q6J("ngForOf",e.moduleFilters)}}function qs(e,t){if(1&e&&(r.TgZ(0,"div",6)(1,"div",7),r.YNc(2,Ss,9,4,"div",8),r.YNc(3,Fs,7,4,"div",9),r.qZA(),r._UZ(4,"field-messages",10),r.qZA()),2&e){const e=r.oxw();r.Q6J("ngClass",e.getFieldClass()),r.xp6(2),r.Q6J("ngIf",e.model.data.module_filter),r.xp6(1),r.Q6J("ngIf",!e.model.data.module_filter),r.xp6(1),r.Q6J("fieldname",e.fieldname)}}let Es=(()=>{class fieldModuleFilter extends d.O{constructor(e,t,s,i,n,l,o,a,d,r){super(e,t,n,l,o),this.model=e,this.view=t,this.popup=s,this.broadcast=i,this.language=n,this.metadata=l,this.router=o,this.elementRef=a,this.renderer=d,this.modal=r,this.moduleSelectOpen=!1,this.modules=["Contacts","Accounts","Leads","Users"],this.popup.closePopup$.subscribe((()=>this.closePopups())),this.broadcast.message$.subscribe((e=>this.handleMessage(e)))}get moduleFilterName(){let e=this.metadata.getModuleFilter(this.moduleFilter);return e?e.name:""}get module(){return this.model.getField("module")||this.modules[0]}get value(){return this.moduleFilterName}get moduleFilters(){return this.metadata.getModuleFilters(this.module)}set moduleFilter(e){this.model.setField("module_filter",e)}get moduleFilter(){return this.model.getField("module_filter")}ngOnInit(){this.setModule(this.module)}setModule(e){this.model.setField("module",e),this.moduleSelectOpen=!1}clearFilter(){this.model.setField("module_filter","")}handleMessage(e){if(e.messagedata.reference&&"model.save"===e.messagetype)if(this.fieldid===e.messagedata.reference){let t={module_filter:e.messagedata.data.id};t[this.fieldname]=e.messagedata.data.summary_text,this.model.setFields(t)}}onClick(e){this.elementRef.nativeElement.contains(e.target)||this.closePopups()}openModules(){this.moduleSelectOpen=!0,this.clickListener=this.renderer.listen("document","click",(e=>this.onClick(e)))}closePopups(){this.moduleSelectOpen=!1,this.clickListener()}}return fieldModuleFilter.ɵfac=function(e){return new(e||fieldModuleFilter)(r.Y36(Z.o),r.Y36(A.e),r.Y36(ks.g),r.Y36(V.f),r.Y36(x.d),r.Y36(c.Pu),r.Y36(k.F0),r.Y36(r.SBq),r.Y36(r.Qsj),r.Y36(L.o))},fieldModuleFilter.ɵcmp=r.Xpm({type:fieldModuleFilter,selectors:[["field-modulefilter"]],features:[r._Bn([ks.g]),r.qOj],decls:3,vars:3,consts:[[3,"fieldname","fieldconfig",4,"ngIf"],[3,"fielddisplayclass","editable","fieldconfig",4,"ngIf"],["class","slds-form-element__control",3,"ngClass",4,"ngIf"],[3,"fieldname","fieldconfig"],[3,"fielddisplayclass","editable","fieldconfig"],["href","javascript:void(0)"],[1,"slds-form-element__control",3,"ngClass"],[1,"slds-form-element"],["class","slds-form-element__control slds-p-around--xx-small",4,"ngIf"],["class","slds-combobox-group slds-p-around--xx-small",4,"ngIf"],[3,"fieldname"],[1,"slds-form-element__control","slds-p-around--xx-small"],[1,"slds-pill_container"],[1,"slds-pill","slds-size--1-of-1"],[1,"slds-icon_container","slds-icon-standard-account","slds-pill__icon_container"],[3,"module","size"],[1,"slds-pill__label"],[1,"slds-button","slds-button--icon","slds-pill__remove",3,"click"],[3,"icon"],[1,"slds-combobox-group","slds-p-around--xx-small"],["class","slds-combobox_object-switcher slds-combobox-addon_start",4,"ngIf"],[1,"slds-form-element","slds-grow","slds-m-left--small"],[1,"slds-form-element__control"],[1,"slds-select_container"],[1,"slds-select",3,"disabled","ngModel","click","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[1,"slds-combobox_object-switcher","slds-combobox-addon_start"],[1,"slds-combobox_container"],["role","combobox",1,"slds-combobox","slds-dropdown-trigger","slds-dropdown-trigger_click",3,"ngClass"],[1,"slds-combobox__form-element","slds-input-has-icon","slds-input-has-icon--right",3,"click"],["type","text","readonly","","autoComplete","off","role","textbox",1,"slds-input","slds-combobox__input","slds-combobox__input-value",3,"value"],["icon","down","sprite","utility","addclasses","slds-input__icon slds-input__icon_right"],["role","listbox",1,"slds-dropdown","slds-dropdown_length-5","slds-dropdown_x-small","slds-dropdown_left"],["role","group","aria-label","Suggested for you",1,"slds-listbox","slds-listbox_vertical"],["role","presentation","class","slds-listbox__item",3,"click",4,"ngFor","ngForOf"],["role","presentation",1,"slds-listbox__item",3,"click"],["role","option",1,"slds-media","slds-listbox__option","slds-listbox__option_plain","slds-media_small"],[1,"slds-grid","slds-grid--vertical-align-center"],["size","x-small",3,"module"],[1,"slds-truncate"],[3,"module"],[3,"value"]],template:function(e,t){1&e&&(r.YNc(0,Ls,1,2,"field-label",0),r.YNc(1,Ms,3,4,"field-generic-display",1),r.YNc(2,qs,5,4,"div",2)),2&e&&(r.Q6J("ngIf",t.displayLabel),r.xp6(1),r.Q6J("ngIf",!t.isEditMode()),r.xp6(1),r.Q6J("ngIf",t.isEditable()&&t.isEditMode()))},dependencies:[i.mk,i.sg,i.O5,n.YN,n.Kr,n.EJ,n.JJ,n.On,w.J,rs.f,cs.M,u.q,C.D,I.a],encapsulation:2}),fieldModuleFilter})();function Ys(e,t){if(1&e&&r._UZ(0,"field-label",4),2&e){const e=r.oxw();r.Q6J("fieldname",e.fieldname)("fieldconfig",e.fieldconfig)}}let Qs=(()=>{class fieldNotAuthorized extends d.O{constructor(e,t,s,i,n){super(e,t,s,i,n),this.model=e,this.view=t,this.language=s,this.metadata=i,this.router=n}}return fieldNotAuthorized.ɵfac=function(e){return new(e||fieldNotAuthorized)(r.Y36(Z.o),r.Y36(A.e),r.Y36(x.d),r.Y36(c.Pu),r.Y36(k.F0))},fieldNotAuthorized.ɵcmp=r.Xpm({type:fieldNotAuthorized,selectors:[["field-not-authorized"]],features:[r.qOj],decls:4,vars:2,consts:[[3,"fieldname","fieldconfig",4,"ngIf"],[3,"fielddisplayclass"],[1,"slds-text-color_inverse-weak"],["label","LBL_NOTAUTHORIZED"],[3,"fieldname","fieldconfig"]],template:function(e,t){1&e&&(r.YNc(0,Ys,1,2,"field-label",0),r.TgZ(1,"field-generic-display",1)(2,"span",2),r._UZ(3,"system-label",3),r.qZA()()),2&e&&(r.Q6J("ngIf",t.displayLabel),r.xp6(1),r.Q6J("fielddisplayclass",t.fielddisplayclass))},dependencies:[i.O5,X._,u.q,C.D],encapsulation:2}),fieldNotAuthorized})();function Us(e,t){if(1&e&&r._UZ(0,"field-label",3),2&e){const e=r.oxw();r.Q6J("fieldname",e.fieldname)("fieldconfig",e.fieldconfig)}}function Ds(e,t){1&e&&r._UZ(0,"field-not-authorized")}function js(e,t){if(1&e&&r._UZ(0,"system-icon",10),2&e){const e=r.oxw(3);r.Q6J("module",e.relateType)}}function Rs(e,t){if(1&e&&(r.TgZ(0,"field-generic-display",6)(1,"div",7),r.YNc(2,js,1,1,"system-icon",8),r.TgZ(3,"span",9),r._uU(4),r.qZA()()()),2&e){const e=r.oxw(2);r.Q6J("fielddisplayclass",e.fielddisplayclass)("editable",e.isEditable())("fieldconfig",e.fieldconfig)("fieldid",e.fieldid),r.xp6(2),r.Q6J("ngIf",e.displayicon),r.xp6(1),r.Q6J("module",e.relateType)("id",e.id),r.xp6(1),r.Oqu(e.value)}}function Bs(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"div",21)(1,"div",22)(2,"span",23)(3,"span",24),r._UZ(4,"system-icon",25),r.qZA(),r.TgZ(5,"span",26),r._uU(6),r.qZA(),r.TgZ(7,"button",27),r.NdJ("click",(function(){r.CHM(e);const t=r.oxw(3);return r.KtG(t.clearField())})),r._UZ(8,"system-button-icon",28),r.qZA()()()()}if(2&e){const e=r.oxw(3);r.xp6(4),r.Q6J("module",e.relateType)("size","small"),r.xp6(2),r.Oqu(e.model.data[e.relateNameField]),r.xp6(2),r.Q6J("icon","close")}}function Gs(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"div",29)(1,"input",30,31),r.NdJ("ngModelChange",(function(t){r.CHM(e);const s=r.oxw(3);return r.KtG(s.relateSearchTerm=t)}))("blur",(function(){r.CHM(e);const t=r.oxw(3);return r.KtG(t.closePopups())}))("focus",(function(){r.CHM(e);const t=r.oxw(3);return r.KtG(t.onFocus())})),r.qZA(),r.TgZ(3,"button",32),r.NdJ("click",(function(){r.CHM(e);const t=r.oxw(3);return r.KtG(t.searchWithModal())})),r._UZ(4,"system-button-icon",33),r.qZA()()}if(2&e){const e=r.oxw(3);r.Q6J("ngClass",e.getFieldClass()),r.xp6(1),r.Q6J("disabled",e.disabled)("ngModel",e.relateSearchTerm)("placeholder",e.placeholder)("autocomplete",e.fieldid)}}function Ps(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"field-lookup-recent",34),r.NdJ("selectedObject",(function(t){r.CHM(e);const s=r.oxw(3);return r.KtG(s.setRelated(t))})),r.qZA()}if(2&e){const e=r.oxw(3);r.Q6J("module",e.relateType)}}function Hs(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"field-lookup-search",35),r.NdJ("selectedObject",(function(t){r.CHM(e);const s=r.oxw(3);return r.KtG(s.setRelated(t))}))("searchWithModal",(function(){r.CHM(e);const t=r.oxw(3);return r.KtG(t.searchWithModal())})),r.qZA()}if(2&e){const e=r.oxw(3);r.Q6J("module",e.relateType)("modulefilter",e.fieldconfig.modulefilter)("relatefilter",e.relateFilter)("relateId",null==e.relateFilter?null:e.relateFilter.id)("disableadd",e.disableadd)("searchterm",e.relateSearchTerm)}}const zs=function(e){return{"slds-is-open":e}};function Vs(e,t){if(1&e&&(r.TgZ(0,"div",11)(1,"div",12)(2,"div",13)(3,"div",14),r.YNc(4,Bs,9,4,"div",15),r.YNc(5,Gs,5,5,"div",16),r.TgZ(6,"div",17),r.YNc(7,Ps,1,1,"field-lookup-recent",18),r.YNc(8,Hs,1,6,"field-lookup-search",19),r.qZA()()()(),r._UZ(9,"field-messages",20),r.qZA()),2&e){const e=r.oxw(2);r.Q6J("ngClass",e.getFieldClass()),r.xp6(3),r.Q6J("ngClass",r.VKq(7,zs,e.relateSearchOpen)),r.xp6(1),r.Q6J("ngIf",e.id),r.xp6(1),r.Q6J("ngIf",!e.model.data[e.relateIdField]),r.xp6(2),r.Q6J("ngIf",""===e.relateSearchTerm&&!e.fieldconfig.modulefilter&&!e.relatedfilterrequired),r.xp6(1),r.Q6J("ngIf",""!==e.relateSearchTerm||e.fieldconfig.modulefilter||e.relatedfilterrequired),r.xp6(1),r.Q6J("fieldname",e.fieldname)}}function Ks(e,t){if(1&e&&(r.YNc(0,Rs,5,8,"field-generic-display",4),r.YNc(1,Vs,10,9,"div",5)),2&e){const e=r.oxw();r.Q6J("ngIf",!e.isEditMode()),r.xp6(1),r.Q6J("ngIf",e.isEditable()&&e.isEditMode())}}let $s=(()=>{class fieldRelate extends d.O{constructor(e,t,s,i,n,l,o,a,d){super(e,t,s,i,n),this.model=e,this.view=t,this.language=s,this.metadata=i,this.router=n,this.elementRef=l,this.modal=o,this.backend=a,this.toast=d,this.relateIdField="",this.relateNameField="",this.relateType="",this.relateSearchOpen=!1,this.relateSearchTerm="",this.isAuthorized=!0}get displayicon(){return!!this.fieldconfig.displayicon}get disableadd(){return this.fieldconfig.disableadd}get id(){return this.model.getField(this.relateIdField)}ngOnInit(){const e=this.metadata.getFieldDefs(this.model.module,this.fieldname);this.relateIdField=e.id_name,this.relateNameField=this.fieldname,this.relateType=e.module,this.isAuthorized=this.metadata.checkModuleAcl(e.module,"list")||this.metadata.checkModuleAcl(e.module,"listrelated"),this.handleRelateFIlterField()}handleRelateFIlterField(){this.fieldconfig.relatefilterfield&&(this.createRelateFilter(),this.subscriptions.add(this.model.data$.subscribe((e=>{this.updateRelateFilter()}))))}createRelateFilter(){let e=this.metadata.getFieldDefs(this.model.module,this.fieldconfig.relatefilterfield);e&&(this.relateFilter={module:e.module,relationship:this.fieldconfig.relatefilterrelationship,id:this.model.getField(e.id_name),display:this.model.getField(this.fieldconfig.relatefilterfield),active:!!this.model.getField(e.id_name),required:!!this.fieldconfig.relatedfilterrequired})}get placeholder(){if(this.relateFilter&&this.fieldconfig.relatedfilterrequired){let e=this.metadata.getFieldDefs(this.model.module,this.fieldconfig.relatefilterfield);if(!this.model.getField(e.id_name))return this.language.getLabelFormatted("LBL_SELECT_FIELD_FIRST",[this.language.getFieldDisplayName(this.model.module,this.fieldconfig.relatefilterfield)])}return this.language.getModuleCombinedLabel("LBL_SEARCH",this.relateType)}get relatedfilterrequired(){return this.fieldconfig.relatedfilterrequired}get disabled(){if(this.relateFilter&&this.relatedfilterrequired){let e=this.metadata.getFieldDefs(this.model.module,this.fieldconfig.relatefilterfield);if(!this.model.getField(e.id_name))return!0}return!1}updateRelateFilter(){let e=this.metadata.getFieldDefs(this.model.module,this.fieldconfig.relatefilterfield);this.relateFilter.id=this.model.getField(e.id_name),this.relateFilter.display=this.model.getField(this.fieldconfig.relatefilterfield),this.fieldconfig.relatedfilterrequired&&!this.relateFilter.id&&this.id&&this.removeRelated(),this.relateFilter.active=!!this.relateFilter.id}closePopups(){this.model.getField(this.relateIdField)&&(this.relateSearchTerm=""),this.relateSearchOpen=!1}clearField(){this.fieldconfig.promptondelete?this.modal.confirm(this.language.getLabelFormatted("LBL_PROMPT_DELETE_RELATIONSHIP",[this.language.getFieldDisplayName(this.model.module,this.fieldname,this.fieldconfig)],"long"),this.language.getLabelFormatted("LBL_PROMPT_DELETE_RELATIONSHIP",[this.language.getFieldDisplayName(this.model.module,this.fieldname,this.fieldconfig)])).subscribe((e=>{e&&this.removeRelated()})):this.removeRelated()}removeRelated(){let e={};e[this.relateNameField]="",e[this.relateIdField]="",this.model.setFields(e)}onFocus(){this.relateSearchOpen=!0}setRelated(e){let t={};t[this.relateIdField]=e.id,t[this.relateNameField]=e.text,this.model.setFields(t),2==this.fieldconfig.executeCopyRules?this.executeCopyRules(e.id):1==this.fieldconfig.executeCopyRules&&this.modal.confirm(this.language.getLabel("MSG_COPY_DATA","","long"),this.language.getLabel("MSG_COPY_DATA")).subscribe((t=>t&&this.executeCopyRules(e.id))),this.closePopups()}executeCopyRules(e){let t=this.modal.await("LBL_LOADING");this.backend.get(this.relateType,e).subscribe((e=>{let s={module:this.relateType,id:e.id,data:e};this.model.executeCopyRulesParent(s),t.emit()}),(()=>{this.toast.sendToast("ERR_LOADING_RECORD","error"),t.emit()}))}goRelated(){this.router.navigate(["/module/"+this.relateType+"/"+this.model.getField(this.relateIdField)])}searchWithModal(){this.relateSearchOpen=!1,this.modal.openModal("ObjectModalModuleLookup").subscribe((e=>{e.instance.module=this.relateType,e.instance.modulefilter=this.fieldconfig.modulefilter,e.instance.multiselect=!1,e.instance.relatefilter=this.relateFilter,this.subscriptions.add(e.instance.selectedItems.subscribe((e=>{e.length&&this.setRelated({id:e[0].id,text:e[0].summary_text,data:e[0]})}))),e.instance.searchTerm=this.relateSearchTerm}))}}return fieldRelate.ɵfac=function(e){return new(e||fieldRelate)(r.Y36(Z.o),r.Y36(A.e),r.Y36(x.d),r.Y36(c.Pu),r.Y36(k.F0),r.Y36(r.SBq),r.Y36(L.o),r.Y36(H.y),r.Y36(z.A))},fieldRelate.ɵcmp=r.Xpm({type:fieldRelate,selectors:[["field-relate"]],features:[r._Bn([ks.g]),r.qOj],decls:4,vars:3,consts:[[3,"fieldname","fieldconfig",4,"ngIf"],[4,"ngIf","ngIfElse"],["fieldContainer",""],[3,"fieldname","fieldconfig"],[3,"fielddisplayclass","editable","fieldconfig","fieldid",4,"ngIf"],["class","slds-form-element__control slds-m-vertical--xx-small",3,"ngClass",4,"ngIf"],[3,"fielddisplayclass","editable","fieldconfig","fieldid"],[1,"slds-grid","slds-grid--vertical-align-center"],["size","x-small","divClass","slds-align--absolute-center slds-p-right--xx-small",3,"module",4,"ngIf"],["system-model-popover","",3,"module","id"],["size","x-small","divClass","slds-align--absolute-center slds-p-right--xx-small",3,"module"],[1,"slds-form-element__control","slds-m-vertical--xx-small",3,"ngClass"],[1,"slds-combobox_container"],[1,"slds-form-element","slds-lookup"],["role","combobox",1,"slds-combobox","slds-dropdown-trigger","slds-dropdown-trigger_click",3,"ngClass"],["class","slds-form-element__control",4,"ngIf"],["class","slds-combobox__form-element slds-input-has-icon slds-input-has-icon_right",3,"ngClass",4,"ngIf"],["role","listbox",1,"slds-dropdown","slds-dropdown_fluid"],[3,"module","selectedObject",4,"ngIf"],[3,"module","modulefilter","relatefilter","relateId","disableadd","searchterm","selectedObject","searchWithModal",4,"ngIf"],[3,"fieldname"],[1,"slds-form-element__control"],[1,"slds-pill_container"],[1,"slds-pill","slds-size--1-of-1"],[1,"slds-icon_container","slds-icon-standard-account","slds-pill__icon_container"],[3,"module","size"],[1,"slds-pill__label"],[1,"slds-button","slds-button--icon","slds-pill__remove",3,"click"],[3,"icon"],[1,"slds-combobox__form-element","slds-input-has-icon","slds-input-has-icon_right",3,"ngClass"],["type","text","role","combobox",1,"slds-input","slds-combobox__input",3,"disabled","ngModel","placeholder","autocomplete","ngModelChange","blur","focus"],["focus",""],[1,"slds-button","slds-button_icon","slds-input__icon","slds-input__icon_right",3,"click"],["icon","search"],[3,"module","selectedObject"],[3,"module","modulefilter","relatefilter","relateId","disableadd","searchterm","selectedObject","searchWithModal"]],template:function(e,t){if(1&e&&(r.YNc(0,Us,1,2,"field-label",0),r.YNc(1,Ds,1,0,"field-not-authorized",1),r.YNc(2,Ks,2,2,"ng-template",null,2,r.W1O)),2&e){const e=r.MAs(3);r.Q6J("ngIf",t.displayLabel),r.xp6(1),r.Q6J("ngIf",!t.isAuthorized)("ngIfElse",e)}},dependencies:[i.mk,i.O5,n.Fj,n.JJ,n.On,w.J,rs.f,us.g,Qs,u.q,C.D,ms.P,hs.$,I.a],encapsulation:2}),fieldRelate})();function Xs(e,t){if(1&e&&(r.TgZ(0,"field-generic-display",2)(1,"a",3),r._uU(2),r.qZA()()),2&e){const e=r.oxw();r.Q6J("fielddisplayclass",e.fielddisplayclass)("editable",e.isEditable())("fieldconfig",e.fieldconfig)("fieldid",e.fieldid),r.xp6(1),r.Q6J("module",e.relateType)("id",e.relatedFieldId),r.xp6(1),r.Oqu(e.value)}}function Ws(e,t){if(1&e&&(r.TgZ(0,"option",10),r._uU(1),r.qZA()),2&e){const e=t.$implicit,s=r.oxw(2);r.Q6J("value",e.id),r.xp6(1),r.hij(" ",s.language.getLabel(e.summary_text)," ")}}function ei(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"div",4)(1,"div",5)(2,"div",6)(3,"select",7),r.NdJ("ngModelChange",(function(t){r.CHM(e);const s=r.oxw();return r.KtG(s.relatedFieldId=t)})),r._UZ(4,"option"),r.YNc(5,Ws,2,2,"option",8),r.qZA()()(),r._UZ(6,"field-messages",9),r.qZA()}if(2&e){const e=r.oxw();r.xp6(3),r.Q6J("ngModel",e.relatedFieldId),r.xp6(2),r.Q6J("ngForOf",e.relatedList)("ngForTrackBy",e.trackByFn),r.xp6(1),r.Q6J("fieldname",e.fieldname)}}let ti=(()=>{class fieldRelateList extends d.O{constructor(e,t,s,i,n,l,o,a,d){super(e,t,s,i,n),this.model=e,this.view=t,this.language=s,this.metadata=i,this.router=n,this.elementRef=l,this.modal=o,this.backend=a,this.toast=d,this.relatedList=[],this.relateIdField="",this.relateNameField="",this.relateType=""}get relatedFieldId(){return this.model.getField(this.relateIdField)}set relatedFieldId(e){let t=this.relatedList.find((t=>t.id==e));t&&(this.model.setField(this.relateIdField,t.id),this.model.setField(this.relateNameField,t.summary_text),this.relateType&&(2==this.fieldconfig.executeCopyRules?this.executeCopyRules(t.id):1==this.fieldconfig.executeCopyRules&&this.modal.confirm("Copy the data from related record?","Copy data?").subscribe((e=>e&&this.executeCopyRules(t.id)))))}ngOnInit(){this.setFieldDefs(),this.getRelatedList()}setFieldDefs(){const e=this.metadata.getFieldDefs(this.model.module,this.fieldname);this.relateIdField=e.id_name,this.relateNameField=this.fieldname,this.relateType=e.module}getRelatedList(){if(!this.relateType)return;let e={limit:this.fieldconfig.limit||-1,modulefilter:this.fieldconfig.modulefilter};this.backend.getList(this.relateType,[{sortfield:"name",sortirection:"ASC"}],e).subscribe((e=>{e&&e.list&&(this.relatedList=e.list)}))}executeCopyRules(e){let t=this.modal.await("LBL_LOADING");this.backend.get(this.relateType,e).subscribe((e=>{let s={module:this.relateType,id:e.id,data:e};this.model.executeCopyRulesParent(s),t.emit()}),(()=>{this.toast.sendToast("ERR_LOADING_RECORD","error"),t.emit()}))}trackByFn(e,t){return t.id}}return fieldRelateList.ɵfac=function(e){return new(e||fieldRelateList)(r.Y36(Z.o),r.Y36(A.e),r.Y36(x.d),r.Y36(c.Pu),r.Y36(k.F0),r.Y36(r.SBq),r.Y36(L.o),r.Y36(H.y),r.Y36(z.A))},fieldRelateList.ɵcmp=r.Xpm({type:fieldRelateList,selectors:[["field-relate-list"]],features:[r.qOj],decls:2,vars:2,consts:[[3,"fielddisplayclass","editable","fieldconfig","fieldid",4,"ngIf"],["class","slds-form-element",4,"ngIf"],[3,"fielddisplayclass","editable","fieldconfig","fieldid"],["href","javascript:void(0);","system-model-popover","",3,"module","id"],[1,"slds-form-element"],[1,"slds-form-element__control"],[1,"slds-select_container"],[1,"slds-select",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf","ngForTrackBy"],[3,"fieldname"],[3,"value"]],template:function(e,t){1&e&&(r.YNc(0,Xs,3,7,"field-generic-display",0),r.YNc(1,ei,7,4,"div",1)),2&e&&(r.Q6J("ngIf",!t.isEditMode()),r.xp6(1),r.Q6J("ngIf",t.isEditable()&&t.isEditMode()))},dependencies:[i.sg,i.O5,n.YN,n.Kr,n.EJ,n.JJ,n.On,us.g,C.D,I.a],encapsulation:2}),fieldRelateList})();function si(e,t){if(1&e&&(r.TgZ(0,"li",3),r._UZ(1,"field-container",4),r.qZA()),2&e){const e=r.oxw().$implicit;r.xp6(1),r.Q6J("field",e.field)("fieldconfig",e.fieldconfig)}}function ii(e,t){if(1&e&&(r.ynx(0),r.YNc(1,si,2,2,"li",2),r.BQk()),2&e){const e=t.$implicit,s=r.oxw();r.xp6(1),r.Q6J("ngIf",s.model.getField(e.field))}}let ni=(()=>{class fieldLinkedDetails{constructor(e,t,s){this.model=e,this.view=t,this.metadata=s,this.fieldsetitems=[]}ngOnInit(){this.fieldsetitems=this.metadata.getFieldSetFields(this.fieldset,this.module),this.view.isEditable=!1,this.view.displayLabels=!1}ngOnChanges(e){this.model.module=this.module,this.model.id=this.data.id,this.model.setData(this.data)}}return fieldLinkedDetails.ɵfac=function(e){return new(e||fieldLinkedDetails)(r.Y36(Z.o),r.Y36(A.e),r.Y36(c.Pu))},fieldLinkedDetails.ɵcmp=r.Xpm({type:fieldLinkedDetails,selectors:[["field-linked-details"]],inputs:{data:"data",module:"module",fieldset:"fieldset"},features:[r._Bn([Z.o,A.e]),r.TTD],decls:2,vars:1,consts:[[1,"slds-list_horizontal","slds-has-dividers_left"],[4,"ngFor","ngForOf"],["class","slds-item",4,"ngIf"],[1,"slds-item"],["fielddisplayclass","slds-align_absolute-center",3,"field","fieldconfig"]],template:function(e,t){1&e&&(r.TgZ(0,"ul",0),r.YNc(1,ii,2,1,"ng-container",1),r.qZA()),2&e&&(r.xp6(1),r.Q6J("ngForOf",t.fieldsetitems))},dependencies:[i.sg,i.O5,m.j],encapsulation:2}),fieldLinkedDetails})();function li(e,t){if(1&e&&r._UZ(0,"field-label",3),2&e){const e=r.oxw();r.Q6J("fieldname",e.fieldname)("fieldconfig",e.fieldconfig)}}function oi(e,t){1&e&&r._UZ(0,"field-not-authorized")}function ai(e,t){if(1&e&&r._UZ(0,"system-icon",11),2&e){const e=r.oxw(3);r.Q6J("module",e.relateType)}}function di(e,t){if(1&e&&(r.TgZ(0,"span",12),r._uU(1),r.qZA()),2&e){const e=r.oxw(3);r.Q6J("module",e.relateType)("id",e.id),r.xp6(1),r.Oqu(e.value)}}function ri(e,t){if(1&e&&(r.TgZ(0,"span"),r._UZ(1,"field-linked-details",13),r.qZA()),2&e){const e=r.oxw(3);r.xp6(1),r.Q6J("fieldset",e.fieldconfig.fieldset)("module",e.fielddefs.module)("data",e.relData)}}function ci(e,t){if(1&e&&(r.TgZ(0,"field-generic-display",6)(1,"div",7),r.YNc(2,ai,1,1,"system-icon",8),r.YNc(3,di,2,3,"span",9),r.YNc(4,ri,2,3,"span",10),r.qZA()()),2&e){const e=r.oxw(2);r.Q6J("fielddisplayclass",e.fielddisplayclass)("editable",e.isEditable())("fieldconfig",e.fieldconfig)("fieldid",e.fieldid),r.xp6(2),r.Q6J("ngIf",e.displayicon),r.xp6(1),r.Q6J("ngIf",!e.fieldconfig.fieldset),r.xp6(1),r.Q6J("ngIf",e.fieldconfig.fieldset&&e.relData)}}function ui(e,t){if(1&e&&(r.TgZ(0,"span",32),r._uU(1),r.qZA()),2&e){const e=r.oxw(4);r.xp6(1),r.Oqu(e.value)}}function mi(e,t){if(1&e&&(r.TgZ(0,"span",32),r._UZ(1,"field-linked-details",13),r.qZA()),2&e){const e=r.oxw(4);r.xp6(1),r.Q6J("fieldset",e.fieldconfig.fieldset)("module",e.fielddefs.module)("data",e.relData)}}function hi(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"div",24)(1,"div",25)(2,"span",26)(3,"span",27),r._UZ(4,"system-icon",28),r.qZA(),r.YNc(5,ui,2,1,"span",29),r.YNc(6,mi,2,3,"span",29),r.TgZ(7,"button",30),r.NdJ("click",(function(){r.CHM(e);const t=r.oxw(3);return r.KtG(t.clearField())})),r._UZ(8,"system-button-icon",31),r.qZA()()()()}if(2&e){const e=r.oxw(3);r.xp6(4),r.Q6J("module",e.relateType)("size","small"),r.xp6(1),r.Q6J("ngIf",!e.fieldconfig.fieldset),r.xp6(1),r.Q6J("ngIf",e.fieldconfig.fieldset&&e.relData),r.xp6(2),r.Q6J("icon","close")}}function gi(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"div",33)(1,"input",34,35),r.NdJ("ngModelChange",(function(t){r.CHM(e);const s=r.oxw(3);return r.KtG(s.relateSearchTerm=t)}))("blur",(function(){r.CHM(e);const t=r.oxw(3);return r.KtG(t.closePopups())}))("focus",(function(){r.CHM(e);const t=r.oxw(3);return r.KtG(t.onFocus())})),r.qZA(),r.TgZ(3,"button",36),r.NdJ("click",(function(){r.CHM(e);const t=r.oxw(3);return r.KtG(t.searchWithModal())})),r._UZ(4,"system-button-icon",37),r.qZA()()}if(2&e){const e=r.oxw(3);r.Q6J("ngClass",e.getFieldClass()),r.xp6(1),r.Q6J("disabled",e.disabled)("ngModel",e.relateSearchTerm)("placeholder",e.placeholder)("autocomplete",e.fieldid)}}function pi(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"field-lookup-recent",38),r.NdJ("selectedObject",(function(t){r.CHM(e);const s=r.oxw(3);return r.KtG(s.setRelated(t))})),r.qZA()}if(2&e){const e=r.oxw(3);r.Q6J("module",e.relateType)}}function fi(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"field-lookup-search",39),r.NdJ("selectedObject",(function(t){r.CHM(e);const s=r.oxw(3);return r.KtG(s.setRelated(t))}))("searchWithModal",(function(){r.CHM(e);const t=r.oxw(3);return r.KtG(t.searchWithModal())})),r.qZA()}if(2&e){const e=r.oxw(3);r.Q6J("module",e.relateType)("modulefilter",e.fieldconfig.modulefilter)("relatefilter",e.relateFilter)("relateId",null==e.relateFilter?null:e.relateFilter.id)("disableadd",e.disableadd)("searchterm",e.relateSearchTerm)}}const bi=function(e){return{"slds-is-open":e}};function _i(e,t){if(1&e&&(r.TgZ(0,"div",14)(1,"div",15)(2,"div",16)(3,"div",17),r.YNc(4,hi,9,5,"div",18),r.YNc(5,gi,5,5,"div",19),r.TgZ(6,"div",20),r.YNc(7,pi,1,1,"field-lookup-recent",21),r.YNc(8,fi,1,6,"field-lookup-search",22),r.qZA()()()(),r._UZ(9,"field-messages",23),r.qZA()),2&e){const e=r.oxw(2);r.Q6J("ngClass",e.getFieldClass()),r.xp6(3),r.Q6J("ngClass",r.VKq(7,bi,e.relateSearchOpen)),r.xp6(1),r.Q6J("ngIf",e.id),r.xp6(1),r.Q6J("ngIf",!e.model.data[e.relateIdField]),r.xp6(2),r.Q6J("ngIf",""===e.relateSearchTerm&&!e.fieldconfig.modulefilter&&!e.relatedfilterrequired),r.xp6(1),r.Q6J("ngIf",""!==e.relateSearchTerm||e.fieldconfig.modulefilter||e.relatedfilterrequired),r.xp6(1),r.Q6J("fieldname",e.fieldname)}}function yi(e,t){if(1&e&&(r.YNc(0,ci,5,7,"field-generic-display",4),r.YNc(1,_i,10,9,"div",5)),2&e){const e=r.oxw();r.Q6J("ngIf",!e.isEditMode()),r.xp6(1),r.Q6J("ngIf",e.isEditable()&&e.isEditMode())}}let vi=(()=>{class fieldLinked extends d.O{constructor(e,t,s,i,n,l,o,a,d){super(e,t,s,i,n),this.model=e,this.view=t,this.language=s,this.metadata=i,this.router=n,this.elementRef=l,this.modal=o,this.backend=a,this.toast=d,this.relateIdField="",this.relateNameField="",this.relateType="",this.relateSearchOpen=!1,this.relateSearchTerm="",this.isAuthorized=!0}get displayicon(){return!!this.fieldconfig.displayicon}get disableadd(){return this.fieldconfig.disableadd}get id(){return this.model.getField(this.relateIdField)}get value(){let e=this.model.getField(this.fieldname);return this.fielddefs?.rname&&e&&e[this.fielddefs.rname]?e[this.fielddefs.rname]:""}set value(e){}get relData(){return this.model.getField(this.fieldname)??{}}ngOnInit(){if(super.ngOnInit(),this.relateIdField=this.fielddefs.id_name,this.relateNameField=this.fieldname,this.relateType=this.fielddefs.module,this.isAuthorized=this.metadata.checkModuleAcl(this.fielddefs.module,"list")||this.metadata.checkModuleAcl(this.fielddefs.module,"listrelated"),!this.fieldconfig.fieldset){let e=this.metadata.getComponentConfig("fieldLinked",this.fielddefs.module);e.fieldset&&(this.fieldconfig.fieldset=e.fieldset)}this.handleRelateFilterField()}handleRelateFilterField(){this.fieldconfig.relatefilterfield&&(this.createRelateFilter(),this.subscriptions.add(this.model.data$.subscribe((e=>{this.updateRelateFilter()}))))}createRelateFilter(){let e=this.metadata.getFieldDefs(this.model.module,this.fieldconfig.relatefilterfield);e&&(this.relateFilter={module:e.module,relationship:this.fieldconfig.relatefilterrelationship,id:this.model.getField(e.id_name),display:this.model.getField(this.fieldconfig.relatefilterfield),active:!!this.model.getField(e.id_name),required:!!this.fieldconfig.relatedfilterrequired})}get placeholder(){if(this.relateFilter&&this.fieldconfig.relatedfilterrequired){let e=this.metadata.getFieldDefs(this.model.module,this.fieldconfig.relatefilterfield);if(!this.model.getField(e.id_name))return this.language.getLabelFormatted("LBL_SELECT_FIELD_FIRST",[this.language.getFieldDisplayName(this.model.module,this.fieldconfig.relatefilterfield)])}return this.language.getModuleCombinedLabel("LBL_SEARCH",this.relateType)}get relatedfilterrequired(){return this.fieldconfig.relatedfilterrequired}get disabled(){if(this.relateFilter&&this.relatedfilterrequired){let e=this.metadata.getFieldDefs(this.model.module,this.fieldconfig.relatefilterfield);if(!this.model.getField(e.id_name))return!0}return!1}updateRelateFilter(){let e=this.metadata.getFieldDefs(this.model.module,this.fieldconfig.relatefilterfield);this.relateFilter.id=this.model.getField(e.id_name),this.relateFilter.display=this.model.getField(this.fieldconfig.relatefilterfield),this.fieldconfig.relatedfilterrequired&&!this.relateFilter.id&&this.id&&this.removeRelated(),this.relateFilter.active=!!this.relateFilter.id}closePopups(){this.model.getField(this.relateIdField)&&(this.relateSearchTerm=""),this.relateSearchOpen=!1}clearField(){this.fieldconfig.promptondelete?this.modal.confirm(this.language.getLabelFormatted("LBL_PROMPT_DELETE_RELATIONSHIP",[this.language.getFieldDisplayName(this.model.module,this.fieldname,this.fieldconfig)],"long"),this.language.getLabelFormatted("LBL_PROMPT_DELETE_RELATIONSHIP",[this.language.getFieldDisplayName(this.model.module,this.fieldname,this.fieldconfig)])).subscribe((e=>{e&&this.removeRelated()})):this.removeRelated()}removeRelated(){let e={};e[this.relateNameField]="",e[this.relateIdField]="",this.model.setFields(e)}onFocus(){this.relateSearchOpen=!0}setRelated(e){let t={};t[this.relateIdField]=e.id,t[this.relateNameField]=e.data,this.model.setFields(t),2==this.fieldconfig.executeCopyRules?this.executeCopyRules(e.id):1==this.fieldconfig.executeCopyRules&&this.modal.confirm(this.language.getLabel("MSG_COPY_DATA","","long"),this.language.getLabel("MSG_COPY_DATA")).subscribe((t=>t&&this.executeCopyRules(e.id))),this.closePopups()}executeCopyRules(e){let t=this.modal.await("LBL_LOADING");this.backend.get(this.relateType,e).subscribe((e=>{let s={module:this.relateType,id:e.id,data:e};this.model.executeCopyRulesParent(s),t.emit()}),(()=>{this.toast.sendToast("ERR_LOADING_RECORD","error"),t.emit()}))}goRelated(){this.router.navigate(["/module/"+this.relateType+"/"+this.model.getField(this.relateIdField)])}searchWithModal(){this.relateSearchOpen=!1,this.modal.openModal("ObjectModalModuleLookup").subscribe((e=>{e.instance.module=this.relateType,e.instance.modulefilter=this.fieldconfig.modulefilter,e.instance.multiselect=!1,e.instance.relatefilter=this.relateFilter,this.subscriptions.add(e.instance.selectedItems.subscribe((e=>{e.length&&this.setRelated({id:e[0].id,text:e[0].summary_text,data:e[0]})}))),e.instance.searchTerm=this.relateSearchTerm}))}}return fieldLinked.ɵfac=function(e){return new(e||fieldLinked)(r.Y36(Z.o),r.Y36(A.e),r.Y36(x.d),r.Y36(c.Pu),r.Y36(k.F0),r.Y36(r.SBq),r.Y36(L.o),r.Y36(H.y),r.Y36(z.A))},fieldLinked.ɵcmp=r.Xpm({type:fieldLinked,selectors:[["field-linked"]],features:[r.qOj],decls:4,vars:3,consts:[[3,"fieldname","fieldconfig",4,"ngIf"],[4,"ngIf","ngIfElse"],["fieldContainer",""],[3,"fieldname","fieldconfig"],[3,"fielddisplayclass","editable","fieldconfig","fieldid",4,"ngIf"],["class","slds-form-element__control slds-m-vertical--xx-small",3,"ngClass",4,"ngIf"],[3,"fielddisplayclass","editable","fieldconfig","fieldid"],[1,"slds-grid","slds-grid--vertical-align-center"],["size","x-small","divClass","slds-align--absolute-center slds-p-right--xx-small",3,"module",4,"ngIf"],["system-model-popover","",3,"module","id",4,"ngIf"],[4,"ngIf"],["size","x-small","divClass","slds-align--absolute-center slds-p-right--xx-small",3,"module"],["system-model-popover","",3,"module","id"],[3,"fieldset","module","data"],[1,"slds-form-element__control","slds-m-vertical--xx-small",3,"ngClass"],[1,"slds-combobox_container"],[1,"slds-form-element","slds-lookup"],["role","combobox",1,"slds-combobox","slds-dropdown-trigger","slds-dropdown-trigger_click",3,"ngClass"],["class","slds-form-element__control",4,"ngIf"],["class","slds-combobox__form-element slds-input-has-icon slds-input-has-icon_right",3,"ngClass",4,"ngIf"],["role","listbox",1,"slds-dropdown","slds-dropdown_fluid"],[3,"module","selectedObject",4,"ngIf"],[3,"module","modulefilter","relatefilter","relateId","disableadd","searchterm","selectedObject","searchWithModal",4,"ngIf"],[3,"fieldname"],[1,"slds-form-element__control"],[1,"slds-pill_container"],[1,"slds-pill","slds-size--1-of-1"],[1,"slds-icon_container","slds-icon-standard-account","slds-pill__icon_container"],[3,"module","size"],["class","slds-pill__label",4,"ngIf"],[1,"slds-button","slds-button--icon","slds-pill__remove",3,"click"],[3,"icon"],[1,"slds-pill__label"],[1,"slds-combobox__form-element","slds-input-has-icon","slds-input-has-icon_right",3,"ngClass"],["type","text","role","combobox",1,"slds-input","slds-combobox__input",3,"disabled","ngModel","placeholder","autocomplete","ngModelChange","blur","focus"],["focus",""],[1,"slds-button","slds-button_icon","slds-input__icon","slds-input__icon_right",3,"click"],["icon","search"],[3,"module","selectedObject"],[3,"module","modulefilter","relatefilter","relateId","disableadd","searchterm","selectedObject","searchWithModal"]],template:function(e,t){if(1&e&&(r.YNc(0,li,1,2,"field-label",0),r.YNc(1,oi,1,0,"field-not-authorized",1),r.YNc(2,yi,2,2,"ng-template",null,2,r.W1O)),2&e){const e=r.MAs(3);r.Q6J("ngIf",t.displayLabel),r.xp6(1),r.Q6J("ngIf",!t.isAuthorized)("ngIfElse",e)}},dependencies:[i.mk,i.O5,n.Fj,n.JJ,n.On,w.J,rs.f,us.g,Qs,u.q,C.D,ni,ms.P,hs.$,I.a],encapsulation:2}),fieldLinked})();function xi(e,t){if(1&e&&r._UZ(0,"field-label",6),2&e){const e=r.oxw();r.Q6J("fieldname",e.fieldname)("fieldconfig",e.fieldconfig)}}let Zi=(()=>{class fieldModifiedBy extends vi{constructor(e,t,s,i,n,l,o,a,d,r){super(e,t,s,i,n,l,o,a,d),this.model=e,this.view=t,this.language=s,this.metadata=i,this.router=n,this.elementRef=l,this.modal=o,this.backend=a,this.toast=d,this.userpreferences=r}get userid(){return this.relData?.id}get datefield(){return this.fieldconfig.field_date?this.fieldconfig.field_date:"date_modified"}get displayDate(){try{if(this.model.getField(this.fieldname)){let e=this.model.getFieldValue(this.datefield);return e.isValid()?e.format(this.userpreferences.getDateFormat()):""}return""}catch(e){return""}}get displayTime(){try{if(this.model.getField(this.fieldname)){let e=this.model.getFieldValue(this.datefield);return e.isValid()?e.format(this.userpreferences.getTimeFormat()):""}return""}catch(e){return""}}}return fieldModifiedBy.ɵfac=function(e){return new(e||fieldModifiedBy)(r.Y36(Z.o),r.Y36(A.e),r.Y36(x.d),r.Y36(c.Pu),r.Y36(k.F0),r.Y36(r.SBq),r.Y36(L.o),r.Y36(H.y),r.Y36(z.A),r.Y36(pe.z))},fieldModifiedBy.ɵcmp=r.Xpm({type:fieldModifiedBy,selectors:[["field-generic"]],features:[r.qOj],decls:11,vars:8,consts:[[3,"fieldname","fieldconfig",4,"ngIf"],[3,"fielddisplayclass","editable","fieldconfig"],[1,"slds-grid","slds-grid--vertical-align-center"],["href","javascript:void(0);","system-model-popover","","module","Users",3,"id"],[1,"slds-p-right--xx-small"],[1,"slds-p-left--xxx-small"],[3,"fieldname","fieldconfig"]],template:function(e,t){1&e&&(r.YNc(0,xi,1,2,"field-label",0),r.TgZ(1,"field-generic-display",1)(2,"div",2)(3,"a",3),r._uU(4),r.qZA(),r.TgZ(5,"span",4),r._uU(6,","),r.qZA(),r.TgZ(7,"span"),r._uU(8),r.qZA(),r.TgZ(9,"span",5),r._uU(10),r.qZA()()()),2&e&&(r.Q6J("ngIf",t.displayLabel),r.xp6(1),r.Q6J("fielddisplayclass",t.fielddisplayclass)("editable",!1)("fieldconfig",t.fieldconfig),r.xp6(2),r.Q6J("id",t.userid),r.xp6(1),r.Oqu(t.value),r.xp6(4),r.Oqu(t.displayDate),r.xp6(2),r.Oqu(t.displayTime))},dependencies:[i.O5,us.g,u.q,C.D],encapsulation:2}),fieldModifiedBy})();function wi(e,t){if(1&e&&r._UZ(0,"field-label",3),2&e){const e=r.oxw();r.Q6J("fieldname",e.fieldname)("fieldconfig",e.fieldconfig)}}function Ti(e,t){if(1&e&&(r.TgZ(0,"span",6)(1,"span",7),r._UZ(2,"system-icon",8),r.qZA(),r.TgZ(3,"span",9),r._uU(4),r.qZA()()),2&e){const e=t.$implicit;r.xp6(2),r.Q6J("module",e.module)("size","small"),r.xp6(2),r.Oqu(e.summary_text)}}function Ci(e,t){if(1&e&&(r.TgZ(0,"field-generic-display",4),r.YNc(1,Ti,5,3,"span",5),r.qZA()),2&e){const e=r.oxw();r.Q6J("fielddisplayclass",e.fielddisplayclass)("editable",e.isEditable())("fieldconfig",e.fieldconfig)("fieldid",e.fieldid),r.xp6(1),r.Q6J("ngForOf",e.pills)}}function Ai(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"li",34),r.NdJ("click",(function(){const t=r.CHM(e).index,s=r.oxw(3);return r.KtG(s.setLookupType(t))})),r.TgZ(1,"div",35)(2,"div",36),r._UZ(3,"system-icon",37),r.TgZ(4,"div",38),r._UZ(5,"system-label-modulename",39),r.qZA()()()()}if(2&e){const e=t.$implicit;r.xp6(3),r.Q6J("module",e.module),r.xp6(2),r.Q6J("module",e.module)}}const ki=function(e){return{"slds-is-open":e}};function Li(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"div",24)(1,"div",25)(2,"div",26)(3,"div",27)(4,"div",14)(5,"div",28),r.NdJ("click",(function(){r.CHM(e);const t=r.oxw(2);return r.KtG(t.toggleLookupTypeSelect())})),r._UZ(6,"input",29)(7,"system-icon",30),r.qZA(),r.TgZ(8,"div",31)(9,"ul",32),r.YNc(10,Ai,6,2,"li",33),r.qZA()()()()()()()}if(2&e){const e=r.oxw(2);r.xp6(4),r.Q6J("ngClass",r.VKq(3,ki,e.lookuplinkSelectOpen)),r.xp6(2),r.Q6J("value",e.lookupTypeName),r.xp6(4),r.Q6J("ngForOf",e.lookuplinks)}}function Mi(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"field-lookup-recent",40),r.NdJ("selectedObject",(function(t){r.CHM(e);const s=r.oxw(2);return r.KtG(s.addItem(t))})),r.qZA()}if(2&e){const e=r.oxw(2);r.Q6J("module",e.lookuplinks[e.lookupType].module)}}function Si(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"field-lookup-search",41),r.NdJ("selectedObject",(function(t){r.CHM(e);const s=r.oxw(2);return r.KtG(s.addItem(t))}))("searchWithModal",(function(){r.CHM(e);const t=r.oxw(2);return r.KtG(t.searchWithModal())})),r.qZA()}if(2&e){const e=r.oxw(2);r.Q6J("module",e.lookuplinks[e.lookupType].module)("searchterm",e.lookupSearchTerm)}}function Ii(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"li",44)(1,"span",45)(2,"span",7),r._UZ(3,"system-icon",8),r.qZA(),r.TgZ(4,"span",9),r._uU(5),r.qZA(),r.TgZ(6,"button",46),r.NdJ("click",(function(){const t=r.CHM(e).$implicit,s=r.oxw(3);return r.KtG(s.removeItem(t))})),r._UZ(7,"system-button-icon",18),r.qZA()()()}if(2&e){const e=t.$implicit;r.xp6(3),r.Q6J("module",e.module)("size","small"),r.xp6(2),r.Oqu(e.summary_text),r.xp6(2),r.Q6J("icon","close")}}function Oi(e,t){if(1&e&&(r.TgZ(0,"ul",42),r.YNc(1,Ii,8,4,"li",43),r.qZA()),2&e){const e=r.oxw(2);r.xp6(1),r.Q6J("ngForOf",e.pills)("ngForTrackBy",e.pillid)}}const Ji=function(e){return{"slds-combobox__input":e}};function Ni(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"div",10)(1,"div",11),r.YNc(2,Li,11,5,"div",12),r.TgZ(3,"div",13)(4,"div",14)(5,"div",15)(6,"input",16),r.NdJ("focus",(function(){r.CHM(e);const t=r.oxw();return r.KtG(t.onFocus())}))("ngModelChange",(function(t){r.CHM(e);const s=r.oxw();return r.KtG(s.lookupSearchTerm=t)})),r.qZA(),r.TgZ(7,"button",17),r.NdJ("click",(function(){r.CHM(e);const t=r.oxw();return r.KtG(t.searchWithModal())})),r._UZ(8,"system-button-icon",18),r.qZA()(),r.TgZ(9,"div",19),r.YNc(10,Mi,1,1,"field-lookup-recent",20),r.YNc(11,Si,1,2,"field-lookup-search",21),r.qZA()()()(),r.YNc(12,Oi,2,2,"ul",22),r._UZ(13,"field-messages",23),r.qZA()}if(2&e){const e=r.oxw();r.Q6J("ngClass",e.getFieldClass()),r.xp6(2),r.Q6J("ngIf",e.lookuplinks.length>1),r.xp6(2),r.Q6J("ngClass",r.VKq(11,ki,e.lookupSearchOpen)),r.xp6(2),r.Q6J("ngClass",r.VKq(13,Ji,e.lookuplinks.length>1))("ngModel",e.lookupSearchTerm)("placeholder",e.language.getModuleCombinedLabel("LBL_SEARCH",e.lookuplinks[e.lookupType].module)),r.xp6(2),r.Q6J("icon","search"),r.xp6(2),r.Q6J("ngIf",e.lookupSearchOpen&&""===e.lookupSearchTerm),r.xp6(1),r.Q6J("ngIf",e.lookupSearchOpen&&""!==e.lookupSearchTerm),r.xp6(1),r.Q6J("ngIf",e.pills.length>0),r.xp6(1),r.Q6J("fieldname",e.fieldname)}}let Fi=(()=>{class fieldLookup extends d.O{constructor(e,t,s,i,n,l,o,a,d){super(e,t,i,n,l),this.model=e,this.view=t,this.broadcast=s,this.language=i,this.metadata=n,this.router=l,this.elementRef=o,this.renderer=a,this.modal=d,this.lookuplinks=[],this.lookupType=0,this.lookuplinkSelectOpen=!1,this.lookupSearchOpen=!1,this.lookupSearchTerm="",this.pills=[],this.broadcast.message$.subscribe((e=>this.handleMessage(e))),this.model.data$.subscribe((e=>{this.setPills()}))}ngOnInit(){this.lookuplinks=this.getLookuplinks()}get displayAssignedUser(){return this.fieldconfig.displayassigneduser}get lookupTypeName(){return this.language.getModuleName(this.lookuplinks[this.lookupType].module)}getLookupmodules(){let e;return this.fieldconfig.lookupmodules&&(e=this.fieldconfig.lookupmodules.replace(/\s/g,"").split(",")),e||(e=["Contacts","Users"]),e}getLookuplinks(){let e;if(this.fieldconfig.lookuplinks&&(e=this.fieldconfig.lookuplinks.replace(/\s/g,"").split(",")),!e){e=[];for(let t of this.getLookupmodules())e.push(t.toLowerCase())}let t=[];for(let s of e)t.push({name:s,module:this.metadata.getFieldDefs(this.model.module,s).module});return t}setPills(){for(let e of this.lookuplinks)if(this.model.data[e.name]&&this.model.data[e.name].beans)for(let t in this.model.data[e.name].beans){let s=this.model.data[e.name].beans[t];("Users"!=e.module||this.displayAssignedUser||t!=this.model.data.assigned_user_id)&&(this.pills.findIndex((e=>e.id==s.id))<0&&this.pills.push({module:e.module,id:s.id,summary_text:s.summary_text,link:e.name}))}}addItem(e){this.model.data[this.lookuplinks[this.lookupType].name]||(this.model.data[this.lookuplinks[this.lookupType].name]={beans:{}}),this.model.data[this.lookuplinks[this.lookupType].name].beans[e.id]={id:e.id,summary_text:e.text},this.lookupSearchOpen=!1,this.setPills()}handleMessage(e){if(e.messagedata.reference&&"model.save"===e.messagetype)this.fieldid===e.messagedata.reference&&(this.lookupSearchTerm="",this.addItem({id:e.messagedata.data.id,text:e.messagedata.data.summary_text}))}onClick(e){this.elementRef.nativeElement.contains(e.target)||this.closePopups()}closePopups(){this.lookupSearchOpen=!1,this.lookuplinkSelectOpen=!1,this.clickListener()}toggleLookupTypeSelect(){this.lookuplinkSelectOpen=!this.lookuplinkSelectOpen,this.lookupSearchOpen=!1}setLookupType(e){this.lookupSearchTerm="",this.lookupType=e,this.lookuplinkSelectOpen=!1}removeItem(e){this.model.data[e.link].beans_relations_to_delete||(this.model.data[e.link].beans_relations_to_delete={}),this.model.data[e.link].beans_relations_to_delete[e.id]=e,delete this.model.data[e.link].beans[e.id];let t=this.pills.findIndex((t=>t.id==e.id));this.pills.splice(t,1)}onFocus(){this.openSearchDropDown()}openSearchDropDown(){this.lookuplinkSelectOpen=!1,this.lookupSearchOpen=!0,this.clickListener=this.renderer.listen("document","click",(e=>this.onClick(e)))}searchWithModal(){this.modal.openModal("ObjectModalModuleLookup").subscribe((e=>{e.instance.module=this.lookuplinks[this.lookupType].module,e.instance.multiselect=!1,e.instance.selectedItems.subscribe((e=>{this.addItem({id:e[0].id,text:e[0].summary_text,data:e[0]})})),e.instance.usedSearchTerm.subscribe((e=>{this.lookupSearchTerm=e})),e.instance.searchTerm=this.lookupSearchTerm}))}pillid(e){return e.id}}return fieldLookup.ɵfac=function(e){return new(e||fieldLookup)(r.Y36(Z.o),r.Y36(A.e),r.Y36(V.f),r.Y36(x.d),r.Y36(c.Pu),r.Y36(k.F0),r.Y36(r.SBq),r.Y36(r.Qsj),r.Y36(L.o))},fieldLookup.ɵcmp=r.Xpm({type:fieldLookup,selectors:[["field-lookup"]],features:[r.qOj],decls:3,vars:3,consts:[[3,"fieldname","fieldconfig",4,"ngIf"],[3,"fielddisplayclass","editable","fieldconfig","fieldid",4,"ngIf"],["class","slds-form-element__control",3,"ngClass",4,"ngIf"],[3,"fieldname","fieldconfig"],[3,"fielddisplayclass","editable","fieldconfig","fieldid"],["class","slds-pill slds-m-right--xx-small slds-p-around--xx-small",4,"ngFor","ngForOf"],[1,"slds-pill","slds-m-right--xx-small","slds-p-around--xx-small"],[1,"slds-icon_container","slds-icon-standard-account","slds-pill__icon_container"],[3,"module","size"],[1,"slds-pill__label"],[1,"slds-form-element__control",3,"ngClass"],[1,"slds-combobox-group","slds-p-vertical--xx-small"],["class","slds-combobox_object-switcher slds-combobox-addon_start",4,"ngIf"],[1,"slds-combobox_container","slds-combobox-addon_end"],["role","combobox",1,"slds-combobox","slds-dropdown-trigger","slds-dropdown-trigger_click",3,"ngClass"],["role","none",1,"slds-combobox__form-element","slds-input-has-icon","slds-input-has-icon_right"],["type","text","aria-autocomplete","list","autoComplete","off","role","textbox",1,"slds-input",3,"ngClass","ngModel","placeholder","focus","ngModelChange"],[1,"slds-button","slds-button_icon","slds-input__icon","slds-input__icon_right",3,"click"],[3,"icon"],["role","listbox",1,"slds-dropdown","slds-dropdown_length-with-icon-7","slds-dropdown_fluid"],[3,"module","selectedObject",4,"ngIf"],[3,"module","searchterm","selectedObject","searchWithModal",4,"ngIf"],["class","slds-listbox slds-listbox_horizontal","role","group",4,"ngIf"],[3,"fieldname"],[1,"slds-combobox_object-switcher","slds-combobox-addon_start"],[1,"slds-form-element"],[1,"slds-form-element__control"],[1,"slds-combobox_container"],[1,"slds-combobox__form-element","slds-input-has-icon","slds-input-has-icon--right",3,"click"],["type","text","readonly","","autoComplete","off","role","textbox",1,"slds-input","slds-combobox__input","slds-combobox__input-value",3,"value"],["icon","down","sprite","utility","addclasses","slds-input__icon slds-input__icon_right"],["role","listbox",1,"slds-dropdown","slds-dropdown_length-5","slds-dropdown_x-small","slds-dropdown_left"],["role","group","aria-label","Suggested for you",1,"slds-listbox","slds-listbox_vertical"],["role","presentation","class","slds-listbox__item",3,"click",4,"ngFor","ngForOf"],["role","presentation",1,"slds-listbox__item",3,"click"],["role","option",1,"slds-media","slds-listbox__option","slds-listbox__option_plain","slds-media_small"],[1,"slds-grid","slds-grid--vertical-align-center"],["size","x-small",3,"module"],[1,"slds-truncate"],[3,"module"],[3,"module","selectedObject"],[3,"module","searchterm","selectedObject","searchWithModal"],["role","group",1,"slds-listbox","slds-listbox_horizontal"],["role","presentation","class","slds-listbox__item slds-p-top_xxx-small",4,"ngFor","ngForOf","ngForTrackBy"],["role","presentation",1,"slds-listbox__item","slds-p-top_xxx-small"],[1,"slds-pill"],[1,"slds-button","slds-button--icon","slds-pill__remove",3,"click"]],template:function(e,t){1&e&&(r.YNc(0,wi,1,2,"field-label",0),r.YNc(1,Ci,2,5,"field-generic-display",1),r.YNc(2,Ni,14,15,"div",2)),2&e&&(r.Q6J("ngIf",t.displayLabel),r.xp6(1),r.Q6J("ngIf",!t.isEditMode()),r.xp6(1),r.Q6J("ngIf",t.isEditable()&&t.isEditMode()))},dependencies:[i.mk,i.sg,i.O5,n.Fj,n.JJ,n.On,w.J,rs.f,cs.M,u.q,C.D,ms.P,hs.$,I.a],encapsulation:2}),fieldLookup})();var qi=s(6538),Ei=s(6822);function Yi(e,t){if(1&e&&r._UZ(0,"field-label",3),2&e){const e=r.oxw();r.Q6J("fieldname",e.fieldname)("fieldconfig",e.fieldconfig)}}const Qi=function(e){return{"slds-text-color_error":e}};function Ui(e,t){if(1&e&&(r.TgZ(0,"div",6)(1,"span",7),r._UZ(2,"system-display-datetime",8),r.qZA()()),2&e){const e=r.oxw(2);r.xp6(1),r.Q6J("ngClass",r.VKq(3,Qi,e.highlightdate)),r.xp6(1),r.Q6J("date",e.value)("displayTime",!1)}}function Di(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"div",6)(1,"a",9),r.NdJ("click",(function(){r.CHM(e);const t=r.oxw(2);return r.KtG(t.goRecord())})),r.TgZ(2,"span",7),r._UZ(3,"system-display-datetime",8),r.qZA()()()}if(2&e){const e=r.oxw(2);r.xp6(2),r.Q6J("ngClass",r.VKq(3,Qi,e.highlightdate)),r.xp6(1),r.Q6J("date",e.value)("displayTime",!1)}}function ji(e,t){if(1&e&&(r.TgZ(0,"field-generic-display",4),r.YNc(1,Ui,3,5,"div",5),r.YNc(2,Di,4,5,"div",5),r.qZA()),2&e){const e=r.oxw();r.Q6J("fielddisplayclass",e.fielddisplayclass)("editable",e.isEditable())("fieldconfig",e.fieldconfig),r.xp6(1),r.Q6J("ngIf",!e.displayLink()),r.xp6(1),r.Q6J("ngIf",e.displayLink())}}function Ri(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"div",10)(1,"system-input-date",11),r.NdJ("ngModelChange",(function(t){r.CHM(e);const s=r.oxw();return r.KtG(s.value=t)}))("valid",(function(t){r.CHM(e);const s=r.oxw();return r.KtG(s.setValid(t))})),r.qZA(),r._UZ(2,"field-messages",12),r.qZA()}if(2&e){const e=r.oxw();r.Q6J("ngClass",e.css_classes),r.xp6(1),r.Q6J("ngModel",e.value),r.xp6(1),r.Q6J("fieldname",e.fieldname)}}let Bi=(()=>{class fieldDate extends d.O{constructor(e,t,s,i,n){super(e,t,s,i,n),this.model=e,this.view=t,this.language=s,this.metadata=i,this.router=n}setValid(e){e?this.clearFieldError():this.setFieldError(this.language.getLabel("LBL_INPUT_INVALID"))}get highlightdate(){return!!(this.fieldconfig.highlightpast&&this.value&&new moment>new moment(this.model.getField(this.fieldname)))}}return fieldDate.ɵfac=function(e){return new(e||fieldDate)(r.Y36(Z.o),r.Y36(A.e),r.Y36(x.d),r.Y36(c.Pu),r.Y36(k.F0))},fieldDate.ɵcmp=r.Xpm({type:fieldDate,selectors:[["field-date"]],features:[r.qOj],decls:3,vars:3,consts:[[3,"fieldname","fieldconfig",4,"ngIf"],[3,"fielddisplayclass","editable","fieldconfig",4,"ngIf"],["class","slds-form-element__control slds-p-around--xx-small",3,"ngClass",4,"ngIf"],[3,"fieldname","fieldconfig"],[3,"fielddisplayclass","editable","fieldconfig"],["class","slds-truncate",4,"ngIf"],[1,"slds-truncate"],[3,"ngClass"],[3,"date","displayTime"],["href","javascript:void(0);",3,"click"],[1,"slds-form-element__control","slds-p-around--xx-small",3,"ngClass"],["system-input-date-hide-error","",3,"ngModel","ngModelChange","valid"],[3,"fieldname"]],template:function(e,t){1&e&&(r.YNc(0,Yi,1,2,"field-label",0),r.YNc(1,ji,3,5,"field-generic-display",1),r.YNc(2,Ri,3,3,"div",2)),2&e&&(r.Q6J("ngIf",t.displayLabel),r.xp6(1),r.Q6J("ngIf",!t.isEditMode()),r.xp6(1),r.Q6J("ngIf",t.isEditable()&&t.isEditMode()))},dependencies:[i.mk,i.O5,n.JJ,n.On,qi.a,Ei.z,u.q,C.D,I.a],encapsulation:2}),fieldDate})();var Gi=s(2006);function Pi(e,t){if(1&e&&r._UZ(0,"field-label",3),2&e){const e=r.oxw();r.Q6J("fieldname",e.fieldname)("fieldconfig",e.fieldconfig)}}function Hi(e,t){if(1&e&&(r.TgZ(0,"div",6)(1,"span",7),r._uU(2),r.qZA()()),2&e){const e=r.oxw(2);r.xp6(2),r.Oqu(e.displayTime)}}function zi(e,t){if(1&e&&(r.TgZ(0,"field-generic-display",4),r.YNc(1,Hi,3,1,"div",5),r.qZA()),2&e){const e=r.oxw();r.Q6J("fielddisplayclass",e.fielddisplayclass)("editable",e.isEditable())("fieldconfig",e.fieldconfig),r.xp6(1),r.Q6J("ngIf",!e.displayLink())}}function Vi(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"div",8)(1,"system-input-time",9),r.NdJ("ngModelChange",(function(t){r.CHM(e);const s=r.oxw();return r.KtG(s.value=t)})),r.qZA(),r._UZ(2,"field-messages",10),r.qZA()}if(2&e){const e=r.oxw();r.Q6J("ngClass",e.getFieldClass()),r.xp6(1),r.Q6J("ngModel",e.value),r.xp6(1),r.s9C("fieldname",e.fieldname)}}let Ki=(()=>{class fieldTime extends d.O{constructor(e,t,s,i,n,l){super(e,t,s,i,n),this.model=e,this.view=t,this.language=s,this.metadata=i,this.router=n,this.userpreferences=l}get displayTime(){return this.value.format(this.userpreferences.getTimeFormat())}}return fieldTime.ɵfac=function(e){return new(e||fieldTime)(r.Y36(Z.o),r.Y36(A.e),r.Y36(x.d),r.Y36(c.Pu),r.Y36(k.F0),r.Y36(pe.z))},fieldTime.ɵcmp=r.Xpm({type:fieldTime,selectors:[["field-time"]],features:[r.qOj],decls:3,vars:3,consts:[[3,"fieldname","fieldconfig",4,"ngIf"],[3,"fielddisplayclass","editable","fieldconfig",4,"ngIf"],["class","slds-form-element__control slds-p-around--xx-small",3,"ngClass",4,"ngIf"],[3,"fieldname","fieldconfig"],[3,"fielddisplayclass","editable","fieldconfig"],["class","slds-truncate",4,"ngIf"],[1,"slds-truncate"],[1,"slds-p-left--x-small",2,"font-style","italic"],[1,"slds-form-element__control","slds-p-around--xx-small",3,"ngClass"],[3,"ngModel","ngModelChange"],[3,"fieldname"]],template:function(e,t){1&e&&(r.YNc(0,Pi,1,2,"field-label",0),r.YNc(1,zi,2,4,"field-generic-display",1),r.YNc(2,Vi,3,3,"div",2)),2&e&&(r.Q6J("ngIf",t.displayLabel),r.xp6(1),r.Q6J("ngIf",!t.isEditMode()),r.xp6(1),r.Q6J("ngIf",t.isEditable()&&t.isEditMode()))},dependencies:[i.mk,i.O5,n.JJ,n.On,Gi.H,u.q,C.D,I.a],encapsulation:2}),fieldTime})();function $i(e,t){if(1&e&&r._UZ(0,"field-label",3),2&e){const e=r.oxw();r.Q6J("fieldname",e.fieldname)("fieldconfig",e.fieldconfig)}}function Xi(e,t){if(1&e&&(r.TgZ(0,"span"),r._uU(1),r.qZA()),2&e){const e=r.oxw(2);r.xp6(1),r.Oqu(e.displaySpan)}}function Wi(e,t){if(1&e&&(r.TgZ(0,"span"),r._uU(1),r.qZA()),2&e){const e=r.oxw(2);r.xp6(1),r.Oqu(e.displayDate)}}function en(e,t){if(1&e&&(r.TgZ(0,"span",7),r._uU(1),r.qZA()),2&e){const e=r.oxw(2);r.xp6(1),r.Oqu(e.displayTime)}}function tn(e,t){if(1&e&&(r.TgZ(0,"field-generic-display",4),r.YNc(1,Xi,2,1,"span",5),r.YNc(2,Wi,2,1,"span",5),r.YNc(3,en,2,1,"span",6),r.qZA()),2&e){const e=r.oxw();r.Q6J("fielddisplayclass",e.fielddisplayclass)("editable",e.isEditable())("fieldconfig",e.fieldconfig),r.xp6(1),r.Q6J("ngIf",e.fieldconfig.displayfromnow),r.xp6(1),r.Q6J("ngIf",!e.fieldconfig.displayfromnow),r.xp6(1),r.Q6J("ngIf",!e.fieldconfig.displayfromnow)}}function sn(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"div",8)(1,"div",9)(2,"system-input-date",10),r.NdJ("ngModelChange",(function(t){r.CHM(e);const s=r.oxw();return r.KtG(s.value=t)}))("valid",(function(t){r.CHM(e);const s=r.oxw();return r.KtG(s.setValid(t))})),r.qZA(),r.TgZ(3,"system-input-time",11),r.NdJ("ngModelChange",(function(t){r.CHM(e);const s=r.oxw();return r.KtG(s.value=t)}))("valid",(function(t){r.CHM(e);const s=r.oxw();return r.KtG(s.setValid(t))})),r.qZA()(),r._UZ(4,"field-messages",12),r.qZA()}if(2&e){const e=r.oxw();r.Q6J("ngClass",e.css_classes),r.xp6(2),r.Q6J("ngModel",e.value),r.xp6(1),r.Q6J("ngModel",e.value),r.xp6(1),r.Q6J("fieldname",e.fieldname)}}let nn=(()=>{class fieldDateTime extends d.O{constructor(e,t,s,i,n,l){super(e,t,s,i,n),this.model=e,this.view=t,this.language=s,this.metadata=i,this.router=n,this.userpreferences=l}get displayValue(){try{if(this.model.getField(this.fieldname)){let e=this.model.getField(this.fieldname);return e.isValid()?this.fieldconfig.displayfromnow?e.fromNow():e.format(this.userpreferences.getDateFormat()+" "+this.userpreferences.getTimeFormat()):""}return""}catch(e){return""}}get displaySpan(){try{if(this.model.getField(this.fieldname)){let e=this.model.getField(this.fieldname);return e.isValid()?e.fromNow():""}return""}catch(e){return""}}get displayDate(){try{if(this.model.getField(this.fieldname)){let e=this.model.getField(this.fieldname);return e.isValid()?e.format(this.userpreferences.getDateFormat()):""}return""}catch(e){return""}}get displayTime(){try{if(this.model.getField(this.fieldname)){let e=this.model.getField(this.fieldname);return e.isValid()?e.format(this.userpreferences.getTimeFormat()):""}return""}catch(e){return""}}setValid(e){e?this.clearFieldError():this.setFieldError(this.language.getLabel("LBL_INPUT_INVALID"))}get highlightdate(){return(1==this.fieldconfig.highlightpast||!0===this.fieldconfig.highlightpast)&&new moment>new moment(this.model.getField(this.fieldname))}}return fieldDateTime.ɵfac=function(e){return new(e||fieldDateTime)(r.Y36(Z.o),r.Y36(A.e),r.Y36(x.d),r.Y36(c.Pu),r.Y36(k.F0),r.Y36(pe.z))},fieldDateTime.ɵcmp=r.Xpm({type:fieldDateTime,selectors:[["field-date-time"]],features:[r.qOj],decls:3,vars:3,consts:[[3,"fieldname","fieldconfig",4,"ngIf"],[3,"fielddisplayclass","editable","fieldconfig",4,"ngIf"],["class","slds-form-element__control slds-p-around--xx-small",3,"ngClass",4,"ngIf"],[3,"fieldname","fieldconfig"],[3,"fielddisplayclass","editable","fieldconfig"],[4,"ngIf"],["class","slds-p-left--x-small","style","font-style: italic",4,"ngIf"],[1,"slds-p-left--x-small",2,"font-style","italic"],[1,"slds-form-element__control","slds-p-around--xx-small",3,"ngClass"],[1,"slds-grid"],["system-input-date-hide-error","",1,"slds-size--1-of-2","slds-p-right--xxx-small",3,"ngModel","ngModelChange","valid"],["system-input-time-hide-error","",1,"slds-size--1-of-2","slds-p-left--xxx-small",3,"ngModel","ngModelChange","valid"],[3,"fieldname"]],template:function(e,t){1&e&&(r.YNc(0,$i,1,2,"field-label",0),r.YNc(1,tn,4,6,"field-generic-display",1),r.YNc(2,sn,5,4,"div",2)),2&e&&(r.Q6J("ngIf",t.displayLabel),r.xp6(1),r.Q6J("ngIf",!t.isEditMode()),r.xp6(1),r.Q6J("ngIf",t.isEditable()&&t.isEditMode()))},dependencies:[i.mk,i.O5,n.JJ,n.On,Ei.z,Gi.H,u.q,C.D,I.a],encapsulation:2}),fieldDateTime})();function ln(e,t){if(1&e&&r._UZ(0,"field-label",3),2&e){const e=r.oxw();r.Q6J("fieldname",e.fieldname)("fieldconfig",e.fieldconfig)}}function on(e,t){if(1&e&&(r.TgZ(0,"span"),r._uU(1," - "),r._UZ(2,"system-display-datetime",7),r.qZA()),2&e){const e=r.oxw(2);r.xp6(2),r.Q6J("date",e.dateEnd)("displayDate",!1)}}function an(e,t){if(1&e&&(r.TgZ(0,"field-generic-display",4),r._UZ(1,"system-display-datetime",5),r.YNc(2,on,3,2,"span",6),r.qZA()),2&e){const e=r.oxw();r.Q6J("fielddisplayclass",e.fielddisplayclass)("editable",e.isEditable())("fieldconfig",e.fieldconfig),r.xp6(1),r.Q6J("date",e.value),r.xp6(1),r.Q6J("ngIf",e.dateEnd)}}function dn(e,t){if(1&e&&(r.TgZ(0,"option"),r._uU(1),r.qZA()),2&e){const e=t.$implicit;r.xp6(1),r.Oqu(e)}}function rn(e,t){if(1&e&&(r.TgZ(0,"option"),r._uU(1),r.qZA()),2&e){const e=t.$implicit;r.xp6(1),r.Oqu(e)}}function cn(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"div",8)(1,"div",9)(2,"system-input-date",10),r.NdJ("ngModelChange",(function(t){r.CHM(e);const s=r.oxw();return r.KtG(s.value=t)})),r.qZA(),r.TgZ(3,"system-input-time",11),r.NdJ("ngModelChange",(function(t){r.CHM(e);const s=r.oxw();return r.KtG(s.value=t)})),r.qZA(),r.TgZ(4,"div",12)(5,"div",13)(6,"select",14),r.NdJ("ngModelChange",(function(t){r.CHM(e);const s=r.oxw();return r.KtG(s.editDurationHours=t)})),r.YNc(7,dn,2,1,"option",15),r.qZA()()(),r.TgZ(8,"div",12)(9,"div",13)(10,"select",14),r.NdJ("ngModelChange",(function(t){r.CHM(e);const s=r.oxw();return r.KtG(s.editDurationMinutes=t)})),r.YNc(11,rn,2,1,"option",15),r.qZA()()()(),r._UZ(12,"field-messages",16),r.qZA()}if(2&e){const e=r.oxw();r.Q6J("ngClass",e.css_classes),r.xp6(2),r.Q6J("ngModel",e.value),r.xp6(1),r.Q6J("ngModel",e.value),r.xp6(3),r.Q6J("ngModel",e.editDurationHours),r.xp6(1),r.Q6J("ngForOf",e.durationHours),r.xp6(3),r.Q6J("ngModel",e.editDurationMinutes),r.xp6(1),r.Q6J("ngForOf",e.durationMinutes),r.xp6(1),r.Q6J("fieldname",e.fieldname)}}let un=(()=>{class fieldDateTimeDuration extends d.O{constructor(e,t,s,i,n,l){super(e,t,s,i,n),this.model=e,this.view=t,this.language=s,this.metadata=i,this.router=n,this.userpreferences=l,this.durationHours=["0","1","2","3","4","5","6","7","8","9","10","11","12"],this.durationMinutes=["0","5","10","15","20","25","30","35","40","45","50","55"]}ngOnInit(){super.ngOnInit(),this.subscriptions.add(this.model.data$.subscribe((e=>{this.value&&this.dateEnd&&(this.duration=moment.duration(this.dateEnd.diff(this.value)))})))}get fieldend(){return this.fieldconfig.field_end?this.fieldconfig.field_end:"date_end"}get value(){return this.model.getField(this.fieldname)}set value(e){let t={};if(t[this.fieldname]=e,this.duration){let s=new moment(e).add(this.duration.asSeconds(),"s");t[this.fieldend]=s}this.model.setFields(t)}get dateEnd(){return this.model.getField(this.fieldend)}get currentHours(){return this.duration?this.duration.get("hours"):0}get currentMinutes(){return this.duration?this.duration.get("minutes"):0}get editDurationHours(){return this.currentHours}set editDurationHours(e){let t=this.currentMinutes,s=new moment(this.value);s.add(e,"h").add(t,"m"),this.model.setField(this.fieldend,s)}get editDurationMinutes(){return this.currentMinutes}set editDurationMinutes(e){let t=this.currentHours,s=new moment(this.value);s.add(t,"h").add(e,"m"),this.model.setField(this.fieldend,s)}}return fieldDateTimeDuration.ɵfac=function(e){return new(e||fieldDateTimeDuration)(r.Y36(Z.o),r.Y36(A.e),r.Y36(x.d),r.Y36(c.Pu),r.Y36(k.F0),r.Y36(pe.z))},fieldDateTimeDuration.ɵcmp=r.Xpm({type:fieldDateTimeDuration,selectors:[["field-date-time-duration"]],features:[r.qOj],decls:3,vars:3,consts:[[3,"fieldname","fieldconfig",4,"ngIf"],[3,"fielddisplayclass","editable","fieldconfig",4,"ngIf"],["class","slds-form-element__control slds-p-around--xx-small",3,"ngClass",4,"ngIf"],[3,"fieldname","fieldconfig"],[3,"fielddisplayclass","editable","fieldconfig"],[3,"date"],[4,"ngIf"],[3,"date","displayDate"],[1,"slds-form-element__control","slds-p-around--xx-small",3,"ngClass"],[1,"slds-grid"],[3,"ngModel","ngModelChange"],[1,"slds-p-left--x-small",3,"ngModel","ngModelChange"],[1,"slds-form-element__control","slds-p-left--x-small","slds-size--1-of-6"],[1,"slds-select_container"],[1,"slds-select",3,"ngModel","ngModelChange"],[4,"ngFor","ngForOf"],[3,"fieldname"]],template:function(e,t){1&e&&(r.YNc(0,ln,1,2,"field-label",0),r.YNc(1,an,3,5,"field-generic-display",1),r.YNc(2,cn,13,8,"div",2)),2&e&&(r.Q6J("ngIf",t.displayLabel),r.xp6(1),r.Q6J("ngIf",!t.isEditMode()),r.xp6(1),r.Q6J("ngIf",t.isEditable()&&t.isEditMode()))},dependencies:[i.mk,i.sg,i.O5,n.YN,n.Kr,n.EJ,n.JJ,n.On,qi.a,Ei.z,Gi.H,u.q,C.D,I.a],encapsulation:2}),fieldDateTimeDuration})();function mn(e,t){if(1&e&&r._UZ(0,"field-label",3),2&e){const e=r.oxw();r.Q6J("fieldname",e.fieldname)("fieldconfig",e.fieldconfig)}}function hn(e,t){if(1&e&&(r.TgZ(0,"field-generic-display",4),r._uU(1),r.qZA()),2&e){const e=r.oxw();r.Q6J("fielddisplayclass",e.fielddisplayclass)("editable",e.isEditable())("fieldconfig",e.fieldconfig),r.xp6(1),r.hij(" ",e.getDisplay(),"\n")}}function gn(e,t){if(1&e&&(r.TgZ(0,"option"),r._uU(1),r.qZA()),2&e){const e=t.$implicit;r.xp6(1),r.Oqu(e)}}function pn(e,t){if(1&e&&(r.TgZ(0,"option"),r._uU(1),r.qZA()),2&e){const e=t.$implicit;r.xp6(1),r.Oqu(e)}}function fn(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"div",8)(1,"div",9)(2,"div",10)(3,"select",11),r.NdJ("ngModelChange",(function(t){r.CHM(e);const s=r.oxw(2);return r.KtG(s.editDurationHours=t)})),r.YNc(4,gn,2,1,"option",12),r.qZA()()(),r.TgZ(5,"div",13)(6,"div",10)(7,"select",11),r.NdJ("ngModelChange",(function(t){r.CHM(e);const s=r.oxw(2);return r.KtG(s.editDurationMinutes=t)})),r.YNc(8,pn,2,1,"option",12),r.qZA()()()()}if(2&e){const e=r.oxw(2);r.xp6(3),r.Q6J("ngModel",e.editDurationHours),r.xp6(1),r.Q6J("ngForOf",e.durationHours),r.xp6(3),r.Q6J("ngModel",e.editDurationMinutes),r.xp6(1),r.Q6J("ngForOf",e.durationMinutes)}}function bn(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"div",8)(1,"div",14)(2,"div",15)(3,"input",16),r.NdJ("ngModelChange",(function(t){r.CHM(e);const s=r.oxw(2);return r.KtG(s.editDurationHours=t)})),r.qZA(),r.TgZ(4,"span",17),r._uU(5,"h"),r.qZA()()(),r.TgZ(6,"div",18)(7,"div",15)(8,"input",19),r.NdJ("ngModelChange",(function(t){r.CHM(e);const s=r.oxw(2);return r.KtG(s.editDurationMinutes=t)})),r.qZA(),r.TgZ(9,"span",20),r._uU(10,"min"),r.qZA()()()()}if(2&e){const e=r.oxw(2);r.xp6(3),r.Q6J("ngModel",e.editDurationHours)("ngModelOptions",e.modelOptions),r.xp6(5),r.Q6J("ngModel",e.editDurationMinutes)("ngModelOptions",e.modelOptions)}}function _n(e,t){if(1&e&&(r.TgZ(0,"div",5),r.YNc(1,fn,9,4,"div",6),r.YNc(2,bn,11,4,"div",6),r._UZ(3,"field-messages",7),r.qZA()),2&e){const e=r.oxw();r.Q6J("ngClass",e.css_classes),r.xp6(1),r.Q6J("ngIf",!e.fieldconfig.freeentry),r.xp6(1),r.Q6J("ngIf",e.fieldconfig.freeentry),r.xp6(1),r.s9C("fieldname",e.fieldname)}}let yn=(()=>{class fieldDuration extends d.O{constructor(e,t,s,i,n){super(e,t,s,i,n),this.model=e,this.view=t,this.language=s,this.metadata=i,this.router=n,this.isValid=!0,this.durationHours=["00","01","02","03","04","05","06","07","08","09","10","11","12"],this.durationMinutes=["00","15","30","45"]}get fieldminutes(){return this.fieldconfig.field_minutes?this.fieldconfig.field_minutes:"duration_minutes"}get fieldhours(){return this.fieldconfig.field_hours?this.fieldconfig.field_hours:"duration_hours"}getDisplay(){if(this.model.getField(this.fieldminutes)||this.model.getField(this.fieldhours))return("00"+this.model.getField(this.fieldhours)).slice(-2)+":"+("00"+this.model.getField(this.fieldminutes)).slice(-2)}get editDurationHours(){return this.model.getField(this.fieldhours)}set editDurationHours(e){this.model.setField(this.fieldhours,e)}get editDurationMinutes(){return this.model.getField(this.fieldminutes)}set editDurationMinutes(e){this.model.setField(this.fieldminutes,e)}}return fieldDuration.ɵfac=function(e){return new(e||fieldDuration)(r.Y36(Z.o),r.Y36(A.e),r.Y36(x.d),r.Y36(c.Pu),r.Y36(k.F0))},fieldDuration.ɵcmp=r.Xpm({type:fieldDuration,selectors:[["field-duration"]],features:[r.qOj],decls:3,vars:3,consts:[[3,"fieldname","fieldconfig",4,"ngIf"],[3,"fielddisplayclass","editable","fieldconfig",4,"ngIf"],["class","slds-form-element__control slds-p-around--xx-small",3,"ngClass",4,"ngIf"],[3,"fieldname","fieldconfig"],[3,"fielddisplayclass","editable","fieldconfig"],[1,"slds-form-element__control","slds-p-around--xx-small",3,"ngClass"],["class","slds-grid",4,"ngIf"],[3,"fieldname"],[1,"slds-grid"],[1,"slds-form-element__control","slds-size--1-of-2"],[1,"slds-select_container"],[1,"slds-select",3,"ngModel","ngModelChange"],[4,"ngFor","ngForOf"],[1,"slds-form-element__control","slds-m-left--x-small","slds-size--1-of-2"],[1,"slds-form-element","slds-size--1-of-2"],[1,"slds-form-element__control","slds-input-has-fixed-addon"],["type","number","min","0","title","hours",1,"slds-input",2,"padding","0 0.25rem 0 0.25rem",3,"ngModel","ngModelOptions","ngModelChange"],["id","fixed-text-addon-post",1,"slds-form-element__addon"],[1,"slds-form-element","slds-m-left--x-small","slds-size--1-of-2"],["type","number","min","0","max","59","title","minutes",1,"slds-input",2,"padding","0 0.25rem 0 0.25rem",3,"ngModel","ngModelOptions","ngModelChange"],["id","fixed-text-addon-post2",1,"slds-form-element__addon"]],template:function(e,t){1&e&&(r.YNc(0,mn,1,2,"field-label",0),r.YNc(1,hn,2,4,"field-generic-display",1),r.YNc(2,_n,4,4,"div",2)),2&e&&(r.Q6J("ngIf",t.displayLabel),r.xp6(1),r.Q6J("ngIf",!t.isEditMode()),r.xp6(1),r.Q6J("ngIf",t.isEditable()&&t.isEditMode()))},dependencies:[i.mk,i.sg,i.O5,n.YN,n.Kr,n.Fj,n.wV,n.EJ,n.JJ,n.qQ,n.Fd,n.On,u.q,C.D,I.a],encapsulation:2}),fieldDuration})();function vn(e,t){if(1&e&&r._UZ(0,"field-label",6),2&e){const e=r.oxw(2);r.Q6J("fieldname",e.fieldname)("fieldconfig",e.fieldconfig)}}function xn(e,t){if(1&e&&(r.ynx(0),r.YNc(1,vn,1,2,"field-label",2),r.TgZ(2,"field-generic-display",3),r._UZ(3,"system-display-datetime",4),r._uU(4," - "),r._UZ(5,"system-display-datetime",5),r.qZA(),r.BQk()),2&e){const e=r.oxw();r.xp6(1),r.Q6J("ngIf",e.displayLabel),r.xp6(1),r.Q6J("fielddisplayclass",e.fielddisplayclass)("editable",e.isEditable())("fieldconfig",e.fieldconfig),r.xp6(1),r.Q6J("date",e.startDate),r.xp6(2),r.Q6J("date",e.endDate)("displayDate",e.showToDate)}}function Zn(e,t){1&e&&(r.TgZ(0,"abbr",23),r._uU(1,"*"),r.qZA())}function wn(e,t){1&e&&(r.TgZ(0,"abbr",23),r._uU(1,"*"),r.qZA())}function Tn(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"div",11)(1,"div",12)(2,"div",13)(3,"label",14),r.YNc(4,Zn,2,0,"abbr",15),r._UZ(5,"system-label",16),r.qZA(),r.TgZ(6,"system-input-date",17),r.NdJ("ngModelChange",(function(t){r.CHM(e);const s=r.oxw(2);return r.KtG(s.startDate=t)}))("valid",(function(t){r.CHM(e);const s=r.oxw(2);return r.KtG(s.setDateValid("start",t))})),r.qZA()(),r.TgZ(7,"div",18)(8,"label",14),r._UZ(9,"system-label",19),r.qZA(),r.TgZ(10,"system-input-time",20),r.NdJ("ngModelChange",(function(t){r.CHM(e);const s=r.oxw(2);return r.KtG(s.startDate=t)}))("valid",(function(t){r.CHM(e);const s=r.oxw(2);return r.KtG(s.setDateValid("start",t))})),r.qZA()()(),r.TgZ(11,"div",12)(12,"div",13)(13,"label",14),r.YNc(14,wn,2,0,"abbr",15),r._UZ(15,"system-label",21),r.qZA(),r.TgZ(16,"system-input-date",17),r.NdJ("ngModelChange",(function(t){r.CHM(e);const s=r.oxw(2);return r.KtG(s.endDate=t)}))("valid",(function(t){r.CHM(e);const s=r.oxw(2);return r.KtG(s.setDateValid("end",t))})),r.qZA()(),r.TgZ(17,"div",18)(18,"label",14),r._UZ(19,"system-label",22),r.qZA(),r.TgZ(20,"system-input-time",20),r.NdJ("ngModelChange",(function(t){r.CHM(e);const s=r.oxw(2);return r.KtG(s.endDate=t)}))("valid",(function(t){r.CHM(e);const s=r.oxw(2);return r.KtG(s.setDateValid("end",t))})),r.qZA()()()()}if(2&e){const e=r.oxw(2);r.xp6(4),r.Q6J("ngIf",e.stati.editable&&e.stati.required),r.xp6(2),r.Q6J("ngModel",e.startDate),r.xp6(4),r.Q6J("ngModel",e.startDate),r.xp6(4),r.Q6J("ngIf",e.stati.editable&&e.stati.required),r.xp6(2),r.Q6J("ngModel",e.endDate),r.xp6(4),r.Q6J("ngModel",e.endDate)}}function Cn(e,t){1&e&&(r.TgZ(0,"abbr",23),r._uU(1,"*"),r.qZA())}function An(e,t){1&e&&(r.TgZ(0,"abbr",23),r._uU(1,"*"),r.qZA())}function kn(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"div",24)(1,"div",25)(2,"div",13)(3,"label",14),r.YNc(4,Cn,2,0,"abbr",15),r._UZ(5,"system-label",16),r.qZA(),r.TgZ(6,"system-input-date",17),r.NdJ("ngModelChange",(function(t){r.CHM(e);const s=r.oxw(2);return r.KtG(s.startDate=t)}))("valid",(function(t){r.CHM(e);const s=r.oxw(2);return r.KtG(s.setDateValid("start",t))})),r.qZA()(),r.TgZ(7,"div",18)(8,"label",14),r._UZ(9,"system-label",19),r.qZA(),r.TgZ(10,"system-input-time",20),r.NdJ("ngModelChange",(function(t){r.CHM(e);const s=r.oxw(2);return r.KtG(s.startDate=t)}))("valid",(function(t){r.CHM(e);const s=r.oxw(2);return r.KtG(s.setDateValid("start",t))})),r.qZA()()(),r.TgZ(11,"div",25)(12,"div",13)(13,"label",14),r.YNc(14,An,2,0,"abbr",15),r._UZ(15,"system-label",21),r.qZA(),r.TgZ(16,"system-input-date",17),r.NdJ("ngModelChange",(function(t){r.CHM(e);const s=r.oxw(2);return r.KtG(s.endDate=t)}))("valid",(function(t){r.CHM(e);const s=r.oxw(2);return r.KtG(s.setDateValid("end",t))})),r.qZA()(),r.TgZ(17,"div",18)(18,"label",14),r._UZ(19,"system-label",22),r.qZA(),r.TgZ(20,"system-input-time",20),r.NdJ("ngModelChange",(function(t){r.CHM(e);const s=r.oxw(2);return r.KtG(s.endDate=t)}))("valid",(function(t){r.CHM(e);const s=r.oxw(2);return r.KtG(s.setDateValid("end",t))})),r.qZA()()()()}if(2&e){const e=r.oxw(2);r.xp6(4),r.Q6J("ngIf",e.stati.editable&&e.stati.required),r.xp6(2),r.Q6J("ngModel",e.startDate),r.xp6(4),r.Q6J("ngModel",e.startDate),r.xp6(4),r.Q6J("ngIf",e.stati.editable&&e.stati.required),r.xp6(2),r.Q6J("ngModel",e.endDate),r.xp6(4),r.Q6J("ngModel",e.endDate)}}function Ln(e,t){if(1&e&&(r.TgZ(0,"div",7),r.YNc(1,Tn,21,6,"div",8),r.YNc(2,kn,21,6,"ng-template",null,9,r.W1O),r._UZ(4,"field-messages",10),r.qZA()),2&e){const e=r.MAs(3),t=r.oxw();r.Q6J("ngClass",t.css_classes),r.xp6(1),r.Q6J("ngIf",t.vertical)("ngIfElse",e),r.xp6(3),r.Q6J("fieldname",t.fieldname)}}let Mn=(()=>{class fieldDateTimeSpan extends d.O{constructor(e,t,s,i,n){super(e,t,s,i,n),this.model=e,this.view=t,this.language=s,this.metadata=i,this.router=n,this.isValid=!0,this.errorMessage="",this.startDateValid=!0,this.endDateValid=!0}ngOnInit(){super.ngOnInit(),this.subscriptions.add(this.model.data$.subscribe((e=>{this.startDate&&this.endDate&&(this.duration=moment.duration(this.endDate.diff(this.startDate)))})))}get vertical(){return!0!==this.fieldconfig.horizontal}get showToDate(){return!this.startDate||!this.endDate||!this.startDate.isSame(this.endDate,"day")}get fieldstart(){return this.fieldconfig.date_start?this.fieldconfig.date_start:"date_start"}get fieldend(){return this.fieldconfig.date_end?this.fieldconfig.date_end:"date_end"}get startDate(){return this.model.getField(this.fieldstart)}set startDate(e){let t={};if(t[this.fieldstart]=e,this.duration){let s=new moment(e).add(this.duration.asSeconds(),"s");t[this.fieldend]=s}else this.model.getField(this.fieldend)||(t[this.fieldend]=new moment(e));this.model.setFields(t)}get endDate(){return this.model.getField(this.fieldend)}set endDate(e){this.model.getFieldValue(this.fieldstart)||(this.startDate=new moment(e)),e.isBefore(this.model.getFieldValue(this.fieldstart))?(this.isValid=!1,this.errorMessage="enddate cannot be before startdate",this.model.setFieldMessage("error","enddate cannot be before startdate",this.fieldname,"sequencecheck")):(this.model.resetFieldMessages(this.fieldname,"error","sequencecheck"),this.model.setField(this.fieldend,e),this.isValid=!0)}setDateValid(e,t){switch(e){case"start":this.startDateValid=t;break;case"end":this.endDateValid=t}this.endDateValid&&this.startDateValid?this.model.resetFieldMessages(this.fieldname,"error","validitycheck"):this.model.setFieldMessage("error",this.language.getLabel("LBL_INPUT_INVALID"),this.fieldname,"validitycheck")}get stati(){let e=this.model.getFieldStati(this.fieldname);return!e.editable||this.view.isEditable&&!this.fieldconfig.readonly||(e.editable=!1),this.fieldconfig.required&&(e.required=!0),e}}return fieldDateTimeSpan.ɵfac=function(e){return new(e||fieldDateTimeSpan)(r.Y36(Z.o),r.Y36(A.e),r.Y36(x.d),r.Y36(c.Pu),r.Y36(k.F0))},fieldDateTimeSpan.ɵcmp=r.Xpm({type:fieldDateTimeSpan,selectors:[["field-date-time-span"]],features:[r.qOj],decls:2,vars:2,consts:[[4,"ngIf"],["class","slds-form-element__control slds-p-around--xx-small",3,"ngClass",4,"ngIf"],[3,"fieldname","fieldconfig",4,"ngIf"],[3,"fielddisplayclass","editable","fieldconfig"],[3,"date"],[3,"date","displayDate"],[3,"fieldname","fieldconfig"],[1,"slds-form-element__control","slds-p-around--xx-small",3,"ngClass"],["class","slds-grid slds-grid--vertical",4,"ngIf","ngIfElse"],["horizontal",""],[3,"fieldname"],[1,"slds-grid","slds-grid--vertical"],[1,"slds-grid","slds-gutters_xx-small"],[1,"slds-form-element","slds-col","slds-size--1-of-2"],[1,"slds-form-element__label"],["class","slds-required",4,"ngIf"],["label","LBL_DATE_START"],["system-input-date-hide-error","",3,"ngModel","ngModelChange","valid"],[1,"slds-form-element","slds-col","slds-size--1-of-2","slds-m-top--none"],["label","LBL_TIME_START"],["system-input-time-hide-error","",3,"ngModel","ngModelChange","valid"],["label","LBL_DATE_END"],["label","LBL_TIME_END"],[1,"slds-required"],[1,"slds-grid","slds-wrap","slds-gutters_xx-small"],[1,"slds-grid","slds-col","slds-gutters_xx-small","slds-size--1-of-1","slds-large-size--1-of-2"]],template:function(e,t){1&e&&(r.YNc(0,xn,6,7,"ng-container",0),r.YNc(1,Ln,5,4,"div",1)),2&e&&(r.Q6J("ngIf",!t.isEditMode()),r.xp6(1),r.Q6J("ngIf",t.isEditable()&&t.isEditMode()))},dependencies:[i.mk,i.O5,n.JJ,n.On,qi.a,Ei.z,Gi.H,X._,u.q,C.D,I.a],encapsulation:2}),fieldDateTimeSpan})();function Sn(e,t){if(1&e&&r._UZ(0,"field-label",5),2&e){const e=r.oxw(2);r.Q6J("fieldname",e.fieldname)("fieldconfig",e.fieldconfig)}}function In(e,t){if(1&e&&(r.ynx(0),r.YNc(1,Sn,1,2,"field-label",2),r.TgZ(2,"field-generic-display",3),r._UZ(3,"system-display-datetime",4),r._uU(4,"  - "),r._UZ(5,"system-display-datetime",4),r.qZA(),r.BQk()),2&e){const e=r.oxw();r.xp6(1),r.Q6J("ngIf",e.displayLabel),r.xp6(1),r.Q6J("fielddisplayclass",e.fielddisplayclass)("editable",e.isEditable())("fieldconfig",e.fieldconfig),r.xp6(1),r.Q6J("date",e.startDate)("displayTime",!1),r.xp6(2),r.Q6J("date",e.endDate)("displayTime",!1)}}function On(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"div",6)(1,"div",7)(2,"div",8)(3,"div",9)(4,"label",10),r._UZ(5,"system-label",11),r.qZA(),r.TgZ(6,"system-input-date",12),r.NdJ("ngModelChange",(function(t){r.CHM(e);const s=r.oxw();return r.KtG(s.startDate=t)}))("valid",(function(t){r.CHM(e);const s=r.oxw();return r.KtG(s.setDateValid("start",t))})),r.qZA()()(),r.TgZ(7,"div",8)(8,"div",9)(9,"label",10),r._UZ(10,"system-label",13),r.qZA(),r.TgZ(11,"system-input-date",12),r.NdJ("ngModelChange",(function(t){r.CHM(e);const s=r.oxw();return r.KtG(s.endDate=t)}))("valid",(function(t){r.CHM(e);const s=r.oxw();return r.KtG(s.setDateValid("end",t))})),r.qZA()()()(),r._UZ(12,"field-messages",14),r.qZA()}if(2&e){const e=r.oxw();r.Q6J("ngClass",e.css_classes),r.xp6(6),r.Q6J("ngModel",e.startDate),r.xp6(5),r.Q6J("ngModel",e.endDate),r.xp6(1),r.Q6J("fieldname",e.fieldname)}}let Jn=(()=>{class fieldDateSpan extends d.O{constructor(e,t,s,i,n){super(e,t,s,i,n),this.model=e,this.view=t,this.language=s,this.metadata=i,this.router=n,this.isValid=!0,this.errorMessage="",this.startDateValid=!0,this.endDateValid=!0}ngOnInit(){super.ngOnInit(),this.subscriptions.add(this.model.data$.subscribe((e=>{this.startDate&&this.endDate&&(this.duration=moment.duration(this.endDate.diff(this.startDate)))})))}get fieldstart(){return this.fieldconfig.date_start?this.fieldconfig.date_start:"date_start"}get fieldend(){return this.fieldconfig.date_end?this.fieldconfig.date_end:"date_end"}get startDate(){return this.model.getField(this.fieldstart)}set startDate(e){let t={};if(t[this.fieldstart]=e,this.duration){let s=new moment(e).add(this.duration.asSeconds(),"s");t[this.fieldend]=s}this.model.setFields(t)}get endDate(){return this.model.getField(this.fieldend)}set endDate(e){this.model.getFieldValue(this.fieldstart)||(this.startDate=new moment(e)),e.isBefore(this.model.getFieldValue(this.fieldstart))?(this.isValid=!1,this.errorMessage="enddate cannot be before startdate",this.model.setFieldMessage("error","enddate cannot be before startdate",this.fieldname,"sequencecheck")):(this.model.resetFieldMessages(this.fieldname,"error","sequencecheck"),this.model.setField(this.fieldend,e),this.isValid=!0)}setDateValid(e,t){switch(e){case"start":this.startDateValid=t;break;case"end":this.endDateValid=t}this.endDateValid&&this.startDateValid?this.model.resetFieldMessages(this.fieldname,"error","validitycheck"):this.model.setFieldMessage("error",this.language.getLabel("LBL_INPUT_INVALID"),this.fieldname,"validitycheck")}}return fieldDateSpan.ɵfac=function(e){return new(e||fieldDateSpan)(r.Y36(Z.o),r.Y36(A.e),r.Y36(x.d),r.Y36(c.Pu),r.Y36(k.F0))},fieldDateSpan.ɵcmp=r.Xpm({type:fieldDateSpan,selectors:[["field-date-span"]],features:[r.qOj],decls:2,vars:2,consts:[[4,"ngIf"],["class","slds-form-element__control slds-p-around--xx-small",3,"ngClass",4,"ngIf"],[3,"fieldname","fieldconfig",4,"ngIf"],[3,"fielddisplayclass","editable","fieldconfig"],[3,"date","displayTime"],[3,"fieldname","fieldconfig"],[1,"slds-form-element__control","slds-p-around--xx-small",3,"ngClass"],[1,"slds-grid","slds-gutters_direct-xx-small"],[1,"slds-size--1-of-2","slds-col"],[1,"slds-form-element"],[1,"slds-form-element__label"],["label","LBL_DATE_START"],["system-input-date-hide-error","",3,"ngModel","ngModelChange","valid"],["label","LBL_DATE_END"],[3,"fieldname"]],template:function(e,t){1&e&&(r.YNc(0,In,6,8,"ng-container",0),r.YNc(1,On,13,4,"div",1)),2&e&&(r.Q6J("ngIf",!t.isEditMode()),r.xp6(1),r.Q6J("ngIf",t.isEditable()&&t.isEditMode()))},dependencies:[i.mk,i.O5,n.JJ,n.On,qi.a,Ei.z,X._,u.q,C.D,I.a],encapsulation:2}),fieldDateSpan})();var Nn=s(5659),Fn=s(9422),qn=s(3144);function En(e,t){if(1&e&&r._UZ(0,"field-label",3),2&e){const e=r.oxw();r.Q6J("fieldname",e.fieldname)("fieldconfig",e.fieldconfig)}}function Yn(e,t){if(1&e&&(r.TgZ(0,"div")(1,"field-generic-display",4),r._uU(2),r.qZA()()),2&e){const e=r.oxw();r.xp6(1),r.Q6J("fielddisplayclass",e.fielddisplayclass)("fieldconfig",e.fieldconfig)("editable",e.isEditable())("fieldid",e.fieldid),r.xp6(1),r.hij(" ",e.value," ")}}function Qn(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"div",25),r._UZ(1,"field-label",10),r.TgZ(2,"div",11)(3,"input",12,13),r.NdJ("ngModelChange",(function(t){r.CHM(e);const s=r.oxw(2);return r.KtG(s.street_number=t)})),r.qZA()(),r._UZ(5,"field-messages",14),r.qZA()}if(2&e){const e=r.oxw(2);r.xp6(1),r.Q6J("fieldname",e.fieldName("street_number")),r.xp6(2),r.Q6J("ngModel",e.street_number)("ngModelOptions",e.modelOptions),r.xp6(2),r.Q6J("fieldname",e.fieldName("street_number"))}}function Un(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"div",25),r._UZ(1,"field-label",10),r.TgZ(2,"div",11)(3,"input",12,13),r.NdJ("ngModelChange",(function(t){r.CHM(e);const s=r.oxw(2);return r.KtG(s.street_number_suffix=t)})),r.qZA()(),r._UZ(5,"field-messages",14),r.qZA()}if(2&e){const e=r.oxw(2);r.xp6(1),r.Q6J("fieldname",e.fieldName("street_number_suffix")),r.xp6(2),r.Q6J("ngModel",e.street_number_suffix)("ngModelOptions",e.modelOptions),r.xp6(2),r.Q6J("fieldname",e.fieldName("street_number_suffix"))}}function Dn(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"div",26),r._UZ(1,"field-label",10),r.TgZ(2,"div",11)(3,"input",12),r.NdJ("ngModelChange",(function(t){r.CHM(e);const s=r.oxw(2);return r.KtG(s.attn=t)})),r.qZA()(),r._UZ(4,"field-messages",14),r.qZA()}if(2&e){const e=r.oxw(2);r.xp6(1),r.Q6J("fieldname",e.fieldName("attn")),r.xp6(2),r.Q6J("ngModel",e.attn)("ngModelOptions",e.modelOptions),r.xp6(1),r.Q6J("fieldname",e.fieldName("attn"))}}function jn(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"div",27),r._UZ(1,"field-label",10),r.TgZ(2,"div",11)(3,"input",12),r.NdJ("ngModelChange",(function(t){r.CHM(e);const s=r.oxw(2);return r.KtG(s.district=t)})),r.qZA()(),r._UZ(4,"field-messages",14),r.qZA()}if(2&e){const e=r.oxw(2);r.xp6(1),r.Q6J("fieldname",e.fieldName("district")),r.xp6(2),r.Q6J("ngModel",e.district)("ngModelOptions",e.modelOptions),r.xp6(1),r.Q6J("fieldname",e.fieldName("district"))}}function Rn(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"div",28),r._UZ(1,"field-label",10),r.TgZ(2,"system-input-state",29),r.NdJ("ngModelChange",(function(t){r.CHM(e);const s=r.oxw(2);return r.KtG(s.state=t)})),r.qZA(),r._UZ(3,"field-messages",14),r.qZA()}if(2&e){const e=r.oxw(2);r.xp6(1),r.Q6J("fieldname",e.fieldName("state")),r.xp6(1),r.Q6J("ngModel",e.state)("country",e.country),r.xp6(1),r.Q6J("fieldname",e.fieldName("state"))}}function Bn(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"div",5)(1,"fieldset")(2,"div",6)(3,"system-googleplaces-autocomplete",7),r.NdJ("address",(function(t){r.CHM(e);const s=r.oxw();return r.KtG(s.addressSelected(t))})),r.qZA(),r.TgZ(4,"div",8)(5,"div",9),r._UZ(6,"field-label",10),r.TgZ(7,"div",11)(8,"input",12,13),r.NdJ("ngModelChange",(function(t){r.CHM(e);const s=r.oxw();return r.KtG(s.street=t)})),r.qZA()(),r._UZ(10,"field-messages",14),r.qZA(),r.YNc(11,Qn,6,4,"div",15),r.YNc(12,Un,6,4,"div",15),r.qZA(),r.YNc(13,Dn,5,4,"div",16),r.TgZ(14,"div",17)(15,"div",18),r._UZ(16,"field-label",10),r.TgZ(17,"div",11)(18,"input",12),r.NdJ("ngModelChange",(function(t){r.CHM(e);const s=r.oxw();return r.KtG(s.postalcode=t)})),r.qZA()(),r._UZ(19,"field-messages",14),r.qZA(),r.TgZ(20,"div",19),r._UZ(21,"field-label",10),r.TgZ(22,"div",11)(23,"input",12),r.NdJ("ngModelChange",(function(t){r.CHM(e);const s=r.oxw();return r.KtG(s.city=t)})),r.qZA()(),r._UZ(24,"field-messages",14),r.qZA(),r.YNc(25,jn,5,4,"div",20),r.qZA(),r.TgZ(26,"div",17),r.YNc(27,Rn,4,4,"div",21),r.TgZ(28,"div",19)(29,"label",22),r._UZ(30,"system-label",23),r.qZA(),r.TgZ(31,"system-input-country",24),r.NdJ("ngModelChange",(function(t){r.CHM(e);const s=r.oxw();return r.KtG(s.country=t)})),r.qZA(),r._UZ(32,"field-messages",14),r.qZA()()()()()}if(2&e){const e=r.oxw();r.Q6J("ngClass",e.getFieldClass()),r.xp6(6),r.Q6J("fieldname",e.fieldName("street")),r.xp6(2),r.Q6J("ngModel",e.street)("ngModelOptions",e.modelOptions),r.xp6(2),r.Q6J("fieldname",e.fieldName("street")),r.xp6(1),r.Q6J("ngIf",!e.hidestreetnumber),r.xp6(1),r.Q6J("ngIf",!e.hidenumbersuffix),r.xp6(1),r.Q6J("ngIf",!e.hideattn),r.xp6(3),r.Q6J("fieldname",e.fieldName("postalcode")),r.xp6(2),r.Q6J("ngModel",e.postalcode)("ngModelOptions",e.modelOptions),r.xp6(1),r.Q6J("fieldname",e.fieldName("postalcode")),r.xp6(2),r.Q6J("fieldname",e.fieldName("city")),r.xp6(2),r.Q6J("ngModel",e.city)("ngModelOptions",e.modelOptions),r.xp6(1),r.Q6J("fieldname",e.fieldName("city")),r.xp6(1),r.Q6J("ngIf",!e.hidedistrict),r.xp6(2),r.Q6J("ngIf",!e.hidestate),r.xp6(4),r.Q6J("ngModel",e.country),r.xp6(1),r.Q6J("fieldname",e.fieldName("country"))}}let Gn=(()=>{class fieldAddress extends d.O{constructor(e,t,s,i,n,l,o){super(e,t,s,i,n),this.model=e,this.view=t,this.language=s,this.metadata=i,this.router=n,this.configuration=l,this.backend=o,this.strict=!1,this.config_address_format={},this.addressFormat="{street} {street_number}, {postalcode} {city}, {statename}, {countryname}";let a=this.configuration.data.backendextensions.spiceui.config.format;"strict"==a&&(this.strict=!0),a.addressformat&&(this.addressFormat=a.addressformat),this.getAddressConfig()}getAddressConfig(){this.config_address_format=JSON.parse(this.configuration.data.backendextensions.address_format.config.format)}get value(){return this.buildAddress()}get addresskey(){return this.fieldconfig.key?this.fieldconfig.key+"_":""}buildAddress(){let e=this.addressFormat;if(this.strict&&this.country){let t=this.configuration.getData("countries");if(t){let s=t.countries.find((e=>e.cc==this.country));s&&s.addressformat&&(e=s.addressformat)}}let t=e.match(/\{(.*?)\}/g);for(let s of t){let t=this[s.slice(1,-1)];e=e.replace(s,t||"")}return e}get countryname(){if(this.strict){let e=this.country;if(e){let t=this.configuration.getData("countries");if(t){let s=t.countries.find((t=>t.cc==e));s&&(e=this.language.getLabel(s.label))}}return e}return this.country}get statename(){if(this.strict){let e=this.country,t=this.state;if(t){let s=this.configuration.getData("countries");if(s){let i=s.states.find((s=>s.cc==e&&s.sc==t));i&&(t=this.language.getLabel(i.label))}}return t}return this.state}addressSelected(e){this.hidestreetnumber?this.street=e.street:(this.street=e.street_name,this.street_number=e.street_number),this.city=e.city,this.district=e.district,this.postalcode=e.postalcode,this.country=e.country,this.state=e.state,this.latitude=e.latitude,this.longitude=e.longitude}getAddressLabel(){return this.language.getLabel(this.fieldconfig.label)}fieldName(e){return this.addresskey+"address_"+e}get street(){return this.model.getField(this.addresskey+"address_street")}set street(e){this.model.setField(this.addresskey+"address_street",e)}get street_number(){return this.model.getField(this.addresskey+"address_street_number")}set street_number(e){this.model.setField(this.addresskey+"address_street_number",e)}get street_number_suffix(){return this.model.getField(this.addresskey+"address_street_number_suffix")}set street_number_suffix(e){this.model.setField(this.addresskey+"address_street_number_suffix",e)}get attn(){return this.model.getField(this.addresskey+"address_attn")}set attn(e){this.model.setField(this.addresskey+"address_attn",e)}get city(){return this.model.getField(this.addresskey+"address_city")}set city(e){this.model.setField(this.addresskey+"address_city",e)}set district(e){this.model.setField(this.addresskey+"address_district",e)}get district(){return this.model.getField(this.addresskey+"address_district")}get postalcode(){return this.model.getField(this.addresskey+"address_postalcode")}set postalcode(e){this.model.setField(this.addresskey+"address_postalcode",e)}get state(){return this.model.getField(this.addresskey+"address_state")}set state(e){this.model.setField(this.addresskey+"address_state",e)}get country(){return this.model.getField(this.addresskey+"address_country")}set country(e){this.model.setField(this.addresskey+"address_country",e)}get latitude(){return this.model.getField(this.addresskey+"address_latitude")}set latitude(e){this.model.setField(this.addresskey+"address_latitude",e)}get longitude(){return this.model.getField(this.addresskey+"address_longitude")}set longitude(e){this.model.setField(this.addresskey+"address_longitude",e)}get hideattn(){return!!this.fieldconfig.hideattn||!!this.config_address_format?.hideattn}get hidestate(){return!!this.fieldconfig.hidestate||!!this.config_address_format?.hidestate}get hidestreetnumber(){return!!this.fieldconfig.hidestreetnumber||!!this.config_address_format?.hidestreetnumber}get hidedistrict(){return!!this.fieldconfig.hidedistrict||!!this.config_address_format?.hidedistrict}get hidenumbersuffix(){return!!this.fieldconfig.hidenumbersuffix||!!this.config_address_format?.hidenumbersuffix}}return fieldAddress.ɵfac=function(e){return new(e||fieldAddress)(r.Y36(Z.o),r.Y36(A.e),r.Y36(x.d),r.Y36(c.Pu),r.Y36(k.F0),r.Y36(K.C),r.Y36(H.y))},fieldAddress.ɵcmp=r.Xpm({type:fieldAddress,selectors:[["field-address"]],features:[r.qOj],decls:3,vars:3,consts:[[3,"fieldname","fieldconfig",4,"ngIf"],[4,"ngIf"],["class","slds-form-element__control",3,"ngClass",4,"ngIf"],[3,"fieldname","fieldconfig"],[3,"fielddisplayclass","fieldconfig","editable","fieldid"],[1,"slds-form-element__control",3,"ngClass"],[1,"slds-form-element__group"],[3,"address"],[1,"slds-grid","slds-gutters_direct-xx-small"],[1,"slds-form-element","slds-col"],["labellength","short",3,"fieldname"],[1,"slds-form-element__control"],["type","text",1,"slds-input",3,"ngModel","ngModelOptions","ngModelChange"],["focus",""],[3,"fieldname"],["class","slds-form-element slds-col slds-size--1-of-6 ",4,"ngIf"],["class","slds-form-element slds-col slds-size--1-of-1",4,"ngIf"],[1,"slds-grid"],[1,"slds-form-element","slds-size--1-of-5","slds-col","slds-p-right--xx-small"],[1,"slds-form-element","slds-p-left--xx-small","slds-col"],["class","slds-form-element slds-col slds-size--2-of-5 slds-p-left--xx-small",4,"ngIf"],["class","slds-form-element slds-col slds-size--1-of-2 slds-p-right--xx-small",4,"ngIf"],[1,"slds-form-element__label"],["label","LBL_COUNTRY"],[3,"ngModel","ngModelChange"],[1,"slds-form-element","slds-col","slds-size--1-of-6"],[1,"slds-form-element","slds-col","slds-size--1-of-1"],[1,"slds-form-element","slds-col","slds-size--2-of-5","slds-p-left--xx-small"],[1,"slds-form-element","slds-col","slds-size--1-of-2","slds-p-right--xx-small"],[3,"ngModel","country","ngModelChange"]],template:function(e,t){1&e&&(r.YNc(0,En,1,2,"field-label",0),r.YNc(1,Yn,3,5,"div",1),r.YNc(2,Bn,33,20,"div",2)),2&e&&(r.Q6J("ngIf",t.displayLabel),r.xp6(1),r.Q6J("ngIf",!t.isEditMode()),r.xp6(1),r.Q6J("ngIf",t.isEditable()&&t.isEditMode()))},dependencies:[i.mk,i.O5,n.Fj,n.JJ,n.On,Nn.t,Fn.y,qn.H,X._,u.q,C.D,I.a],encapsulation:2}),fieldAddress})();function Pn(e,t){if(1&e&&r._UZ(0,"field-label",3),2&e){const e=r.oxw(2);r.Q6J("fieldname",e.fieldname)("fieldconfig",e.fieldconfig)}}function Hn(e,t){if(1&e&&(r.ynx(0),r.YNc(1,Pn,1,2,"field-label",1),r.TgZ(2,"field-generic-display",2),r._uU(3),r.qZA(),r.BQk()),2&e){const e=r.oxw();r.xp6(1),r.Q6J("ngIf",e.displayLabel),r.xp6(1),r.Q6J("fielddisplayclass",e.fielddisplayclass)("editable",e.isEditable())("fieldconfig",e.fieldconfig)("title",e.value)("fieldid",e.fieldid),r.xp6(1),r.hij(" ",e.value," ")}}function zn(e,t){if(1&e&&r._UZ(0,"field-label",10),2&e){const e=r.oxw(2);r.Q6J("fieldname",e.fieldsalutation)}}function Vn(e,t){if(1&e&&(r.TgZ(0,"option",15),r._uU(1),r.qZA()),2&e){const e=t.$implicit;r.Q6J("ngValue",e.value),r.xp6(1),r.Oqu(e.display)}}function Kn(e,t){if(1&e&&r._UZ(0,"field-label",10),2&e){const e=r.oxw(3);r.Q6J("fieldname",e.fielddegree)}}function $n(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"div",13),r.YNc(1,Kn,1,1,"field-label",6),r.TgZ(2,"input",16),r.NdJ("ngModelChange",(function(t){r.CHM(e);const s=r.oxw(2);return r.KtG(s.degree1=t)})),r.qZA(),r._UZ(3,"field-messages",10),r.qZA()}if(2&e){const e=r.oxw(2);r.Q6J("ngClass",e.getClassesForSubField(e.fielddegree)),r.xp6(1),r.Q6J("ngIf",e.displayLabel),r.xp6(1),r.Q6J("ngModel",e.degree1),r.xp6(1),r.Q6J("fieldname",e.fielddegree)}}function Xn(e,t){if(1&e&&r._UZ(0,"field-label",10),2&e){const e=r.oxw(2);r.Q6J("fieldname",e.fieldfirstname)}}function Wn(e,t){if(1&e&&r._UZ(0,"field-label",10),2&e){const e=r.oxw(2);r.Q6J("fieldname",e.fieldlastname)}}function el(e,t){if(1&e&&r._UZ(0,"field-label",10),2&e){const e=r.oxw(3);r.Q6J("fieldname",e.fieldlasttitle)}}function tl(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"div",13),r.YNc(1,el,1,1,"field-label",6),r.TgZ(2,"input",16),r.NdJ("ngModelChange",(function(t){r.CHM(e);const s=r.oxw(2);return r.KtG(s.degree2=t)})),r.qZA(),r._UZ(3,"field-messages",10),r.qZA()}if(2&e){const e=r.oxw(2);r.Q6J("ngClass",e.getClassesForSubField(e.fieldlasttitle)),r.xp6(1),r.Q6J("ngIf",e.displayLabel),r.xp6(1),r.Q6J("ngModel",e.degree2),r.xp6(1),r.Q6J("fieldname",e.fieldlasttitle)}}const sl=function(){return{updateOn:"blur"}};function il(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"div")(1,"div",4)(2,"div",5),r.YNc(3,zn,1,1,"field-label",6),r.TgZ(4,"div",7)(5,"select",8),r.NdJ("ngModelChange",(function(t){r.CHM(e);const s=r.oxw();return r.KtG(s.salutation=t)})),r.YNc(6,Vn,2,2,"option",9),r.qZA()(),r._UZ(7,"field-messages",10),r.qZA(),r.YNc(8,$n,4,4,"div",11),r.TgZ(9,"div",5),r.YNc(10,Xn,1,1,"field-label",6),r.TgZ(11,"input",12),r.NdJ("ngModelChange",(function(t){r.CHM(e);const s=r.oxw();return r.KtG(s.first_name=t)})),r.qZA(),r._UZ(12,"field-messages",10),r.qZA(),r.TgZ(13,"div",13),r.YNc(14,Wn,1,1,"field-label",6),r.TgZ(15,"input",12,14),r.NdJ("ngModelChange",(function(t){r.CHM(e);const s=r.oxw();return r.KtG(s.last_name=t)})),r.qZA(),r._UZ(17,"field-messages",10),r.qZA(),r.YNc(18,tl,4,4,"div",11),r.qZA()()}if(2&e){const e=r.oxw();r.xp6(2),r.Q6J("ngClass",e.getClassesForSubField(e.fieldsalutation)),r.xp6(1),r.Q6J("ngIf",e.displayLabel),r.xp6(2),r.Q6J("ngModel",e.salutation),r.xp6(1),r.Q6J("ngForOf",e.getSalutations()),r.xp6(1),r.Q6J("fieldname",e.fieldsalutation),r.xp6(1),r.Q6J("ngIf",!e.isSimple),r.xp6(1),r.Q6J("ngClass",e.getClassesForSubField(e.fieldfirstname)),r.xp6(1),r.Q6J("ngIf",e.displayLabel),r.xp6(1),r.Q6J("ngModel",e.first_name)("ngModelOptions",r.DdM(17,sl)),r.xp6(1),r.Q6J("fieldname",e.fieldfirstname),r.xp6(1),r.Q6J("ngClass",e.getClassesForSubField(e.fieldlastname)),r.xp6(1),r.Q6J("ngIf",e.displayLabel),r.xp6(1),r.Q6J("ngModel",e.last_name)("ngModelOptions",r.DdM(18,sl)),r.xp6(2),r.Q6J("fieldname",e.fieldlastname),r.xp6(1),r.Q6J("ngIf",!e.isSimple)}}let nl=(()=>{class fieldFullName extends d.O{constructor(e,t,s,i,n){super(e,t,s,i,n),this.model=e,this.view=t,this.language=s,this.metadata=i,this.router=n,this.isValid=!0,this.errorMessage=""}get fieldsalutation(){return this.fieldconfig.field_salutation?this.fieldconfig.field_salutation:"salutation"}get fielddegree(){return this.fieldconfig.field_degree?this.fieldconfig.field_degree:"degree1"}get fieldfirstname(){return this.fieldconfig.field_firstname?this.fieldconfig.field_firstname:"first_name"}get fieldlastname(){return this.fieldconfig.field_lastname?this.fieldconfig.field_lastname:"last_name"}get fieldlasttitle(){return this.fieldconfig.field_lasttitle?this.fieldconfig.field_lasttitle:"degree2"}get salutationdisplay(){return this.language.getFieldDisplayOptionValue(this.model.module,this.fieldsalutation,this.model.getField(this.fieldsalutation))}get value(){return this.filterUndefined(this.language.getFieldDisplayOptionValue(this.model.module,this.fieldsalutation,this.model.getField(this.fieldsalutation)))+" "+this.filterUndefined(this.model.getField(this.fielddegree))+" "+this.filterUndefined(this.model.getField(this.fieldfirstname))+" "+this.filterUndefined(this.model.getField(this.fieldlastname))+" "+this.filterUndefined(this.model.getField(this.fieldlasttitle))}get salutation(){return this.model.getField(this.fieldsalutation)}set salutation(e){this.model.setField(this.fieldsalutation,e)}get degree1(){return this.model.getField(this.fielddegree)}set degree1(e){this.model.setField(this.fielddegree,e)}get first_name(){return this.model.getField(this.fieldfirstname)}set first_name(e){this.model.setField(this.fieldfirstname,e)}get last_name(){return this.model.getField(this.fieldlastname)}set last_name(e){this.model.setField(this.fieldlastname,e)}get degree2(){return this.model.getField(this.fieldlasttitle)}set degree2(e){this.model.setField(this.fieldlasttitle,e)}filterUndefined(e){return e||""}get isSimple(){return this.fieldconfig.simple}getClassesForSubField(e){let t="";switch(e){case this.fieldsalutation:t="small"==this.view.size?"slds-size--1-of-3 slds-order--1":this.isSimple?"slds-size--1-of-5":"slds-size--1-of-7";break;case this.fielddegree:t="small"==this.view.size?"slds-size--1-of-3 slds-order--2":"slds-size--1-of-7";break;case this.fieldlasttitle:t="small"==this.view.size?"slds-size--1-of-3 slds-order--3":"slds-size--1-of-7";break;case this.fieldfirstname:t="small"==this.view.size?"slds-size--1-of-2 slds-order--4":this.isSimple?"slds-p-left--xx-small slds-size--2-of-5":"slds-p-left--xx-small slds-size--2-of-7";break;case this.fieldlastname:t="small"==this.view.size?"slds-size--1-of-2 slds-order--5":this.isSimple?"slds-size--2-of-5":"slds-size--2-of-7"}return this.getStati(e).invalid&&(t+=" slds-has-error"),t}getSalutations(){let e=[],t=this.language.getFieldDisplayOptions(this.model.module,this.fieldconfig.field_salutation?this.fieldconfig.field_salutation:"salutation");for(let s in t)e.push({value:s,display:t[s]});return e}}return fieldFullName.ɵfac=function(e){return new(e||fieldFullName)(r.Y36(Z.o),r.Y36(A.e),r.Y36(x.d),r.Y36(c.Pu),r.Y36(k.F0))},fieldFullName.ɵcmp=r.Xpm({type:fieldFullName,selectors:[["field-full-name"]],features:[r.qOj],decls:2,vars:2,consts:[[4,"ngIf"],[3,"fieldname","fieldconfig",4,"ngIf"],[3,"fielddisplayclass","editable","fieldconfig","title","fieldid"],[3,"fieldname","fieldconfig"],[1,"slds-grid","slds-grid_vertical-align-center","slds-wrap"],[1,"slds-col","slds-form-element__control","slds-align-top",3,"ngClass"],[3,"fieldname",4,"ngIf"],[1,"slds-select_container","slds-p-vertical--xxx-small"],[1,"slds-select",3,"ngModel","ngModelChange"],[3,"ngValue",4,"ngFor","ngForOf"],[3,"fieldname"],["class","slds-col slds-form-element__control slds-p-left--xx-small slds-align-top",3,"ngClass",4,"ngIf"],["type","text",1,"slds-input","slds-p-vertical--xxx-small",3,"ngModel","ngModelOptions","ngModelChange"],[1,"slds-col","slds-form-element__control","slds-p-left--xx-small","slds-align-top",3,"ngClass"],["focus",""],[3,"ngValue"],["type","text",1,"slds-input","slds-p-vertical--xxx-small",3,"ngModel","ngModelChange"]],template:function(e,t){1&e&&(r.YNc(0,Hn,4,7,"ng-container",0),r.YNc(1,il,19,19,"div",0)),2&e&&(r.Q6J("ngIf",!t.isEditMode()),r.xp6(1),r.Q6J("ngIf",t.isEditable()&&t.isEditMode()))},dependencies:[i.mk,i.sg,i.O5,n.YN,n.Kr,n.Fj,n.EJ,n.JJ,n.On,u.q,C.D,I.a],encapsulation:2}),fieldFullName})();function ll(e,t){if(1&e&&r._UZ(0,"field-label",3),2&e){const e=r.oxw();r.Q6J("fieldname",e.fieldname)("fieldconfig",e.fieldconfig)}}function ol(e,t){if(1&e&&(r.TgZ(0,"field-generic-display",4),r._uU(1),r.qZA()),2&e){const e=r.oxw();r.Q6J("fielddisplayclass",e.fielddisplayclass)("editable",e.isEditable())("fieldconfig",e.fieldconfig),r.xp6(1),r.hij(" ",e.value,"\n")}}function al(e,t){if(1&e&&(r.TgZ(0,"option",13),r._uU(1),r.qZA()),2&e){const e=t.$implicit;r.Q6J("ngValue",e.value),r.xp6(1),r.Oqu(e.display)}}function dl(e,t){if(1&e&&(r.TgZ(0,"div",14),r._uU(1),r.qZA()),2&e){const e=r.oxw(2);r.xp6(1),r.Oqu(e.errorMessage)}}function rl(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"div")(1,"div",5)(2,"div",6)(3,"div",7)(4,"select",8),r.NdJ("ngModelChange",(function(t){r.CHM(e);const s=r.oxw();return r.KtG(s.model.data[s.fielddd]=t)})),r.YNc(5,al,2,2,"option",9),r.qZA()()(),r.TgZ(6,"div",10)(7,"input",11),r.NdJ("ngModelChange",(function(t){r.CHM(e);const s=r.oxw();return r.KtG(s.model.data[s.fieldtxt]=t)})),r.qZA()()(),r.YNc(8,dl,2,1,"div",12),r.qZA()}if(2&e){const e=r.oxw();r.xp6(2),r.Q6J("ngClass",e.getFieldClass()),r.xp6(2),r.Q6J("ngModel",e.model.data[e.fielddd]),r.xp6(1),r.Q6J("ngForOf",e.getTitles()),r.xp6(1),r.Q6J("ngClass",e.getFieldClass()),r.xp6(1),r.Q6J("ngModel",e.model.data[e.fieldtxt]),r.xp6(1),r.Q6J("ngIf",""!==e.errorMessage)}}let cl=(()=>{class fieldTitle extends d.O{constructor(e,t,s,i,n){super(e,t,s,i,n),this.model=e,this.view=t,this.language=s,this.metadata=i,this.router=n,this.isValid=!0,this.errorMessage=""}get fielddd(){return this.fieldconfig.field_dd?this.fieldconfig.field_dd:"title_dd"}get fieldtxt(){return this.fieldconfig.field_txt?this.fieldconfig.field_txt:"title"}get titledddisplay(){return this.language.getFieldDisplayOptionValue(this.model.module,this.fielddd,this.model.getField(this.fielddd))}get value(){return(this.model.getField(this.fielddd)?this.language.getFieldDisplayOptionValue(this.model.module,this.fielddd,this.model.getField(this.fielddd)):"")+(this.model.getField(this.fieldtxt)?" "+this.model.getField(this.fieldtxt):"")}getFieldClass(){let e=[];return this.isValid||e.push("slds-has-error"),e}getTitles(){let e=[],t=this.language.getFieldDisplayOptions(this.model.module,this.fieldconfig.field_dd?this.fieldconfig.field_dd:"title_dd");for(let s in t)e.push({value:s,display:t[s]});return e}}return fieldTitle.ɵfac=function(e){return new(e||fieldTitle)(r.Y36(Z.o),r.Y36(A.e),r.Y36(x.d),r.Y36(c.Pu),r.Y36(k.F0))},fieldTitle.ɵcmp=r.Xpm({type:fieldTitle,selectors:[["field-title"]],features:[r.qOj],decls:3,vars:3,consts:[[3,"fieldname","fieldconfig",4,"ngIf"],[3,"fielddisplayclass","editable","fieldconfig",4,"ngIf"],[4,"ngIf"],[3,"fieldname","fieldconfig"],[3,"fielddisplayclass","editable","fieldconfig"],[1,"slds-grid","slds-p-around--xx-small"],[1,"slds-col","slds-form-element__control","slds-size--1-of-2",3,"ngClass"],[1,"slds-select_container"],[1,"slds-select",3,"ngModel","ngModelChange"],[3,"ngValue",4,"ngFor","ngForOf"],[1,"slds-col","slds-form-element__control","slds-size--1-of-2","slds-p-left--xx-small",3,"ngClass"],["type","text",1,"slds-input",3,"ngModel","ngModelChange"],["class","slds-form-element__help",4,"ngIf"],[3,"ngValue"],[1,"slds-form-element__help"]],template:function(e,t){1&e&&(r.YNc(0,ll,1,2,"field-label",0),r.YNc(1,ol,2,4,"field-generic-display",1),r.YNc(2,rl,9,6,"div",2)),2&e&&(r.Q6J("ngIf",t.displayLabel),r.xp6(1),r.Q6J("ngIf",!t.isEditMode()),r.xp6(1),r.Q6J("ngIf",t.isEditable()&&t.isEditMode()))},dependencies:[i.mk,i.sg,i.O5,n.YN,n.Kr,n.Fj,n.EJ,n.JJ,n.On,u.q,C.D],encapsulation:2}),fieldTitle})();var ul=s(7579),ml=s(5920),hl=s(3441),gl=s(7693),pl=s(9774);const fl=["fileupload"];function bl(e,t){if(1&e&&r._UZ(0,"field-label",5),2&e){const e=r.oxw();r.Q6J("fieldname",e.fieldname)("fieldconfig",e.fieldconfig)}}function _l(e,t){if(1&e&&r._UZ(0,"system-file-icon",11),2&e){const e=r.oxw(2);r.Q6J("filemimetype",e.model.getField("file_mime_type"))("filename",e.value)}}function yl(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"field-generic-display",6)(1,"div",7),r.YNc(2,_l,1,2,"system-file-icon",8),r.TgZ(3,"div",9)(4,"a",10),r.NdJ("click",(function(){r.CHM(e);const t=r.oxw();return r.KtG(t.previewFile())})),r._uU(5),r.qZA()()()()}if(2&e){const e=r.oxw();r.Q6J("fielddisplayclass",e.fielddisplayclass)("editable",e.isEditable())("fieldconfig",e.fieldconfig)("title",e.value)("fieldid",e.fieldid),r.xp6(2),r.Q6J("ngIf",e.value),r.xp6(3),r.Oqu(e.value)}}function vl(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"div",16)(1,"span",17)(2,"span",18),r._UZ(3,"system-icon",19),r.qZA()(),r.TgZ(4,"a",20)(5,"span",21),r._uU(6),r.qZA()(),r.TgZ(7,"button",22),r.NdJ("click",(function(){r.CHM(e);const t=r.oxw(2);return r.KtG(t.removeFile())})),r._UZ(8,"system-button-icon",23),r.qZA()()}if(2&e){const e=r.oxw(2);r.xp6(3),r.Q6J("icon",e.helper.determineFileIcon(e.model.getField("file_mime_type"))),r.xp6(3),r.Oqu(e.value)}}function xl(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"div",24)(1,"div",25),r.NdJ("system-drop-file",(function(t){r.CHM(e);const s=r.oxw(2);return r.KtG(s.onDrop(t))})),r.TgZ(2,"input",26,27),r.NdJ("click",(function(){r.CHM(e);const t=r.MAs(3);return r.KtG(t.value=null)}))("change",(function(){r.CHM(e);const t=r.oxw(2);return r.KtG(t.uploadFile())})),r.qZA(),r.TgZ(4,"label",28)(5,"span",29),r._UZ(6,"system-button-icon",30)(7,"system-label",31),r.qZA(),r.TgZ(8,"span",32),r._UZ(9,"system-label",33)(10,"system-label",34),r.qZA()()()()}if(2&e){const e=r.oxw(2);r.xp6(2),r.Q6J("id",e.fieldid),r.xp6(2),r.uIk("for",e.fieldid),r.xp6(2),r.Q6J("icon","upload")}}function Zl(e,t){if(1&e&&(r.TgZ(0,"div",12),r.YNc(1,vl,9,2,"div",13),r.YNc(2,xl,11,3,"div",14),r._UZ(3,"field-messages",15),r.qZA()),2&e){const e=r.oxw();r.Q6J("ngClass",e.getFieldClass()),r.xp6(1),r.Q6J("ngIf",e.value),r.xp6(1),r.Q6J("ngIf",!e.value),r.xp6(1),r.Q6J("fieldname",e.fieldname)}}function wl(e,t){if(1&e&&(r.TgZ(0,"div",35)(1,"div",36),r._UZ(2,"div",37),r.TgZ(3,"div",38),r._uU(4),r.TgZ(5,"div",39),r._UZ(6,"div",40),r.qZA()()()()),2&e){const e=r.oxw();r.xp6(4),r.hij(" uploading ",e.theFile," ... "),r.xp6(2),r.Q6J("ngStyle",e.getBarStyle())}}function Tl(e,t){1&e&&r._UZ(0,"div",41)}let Cl=(()=>{class fieldFile extends d.O{constructor(e,t,s,i,n,l,o,a,d,r,c){super(e,t,s,i,n),this.model=e,this.view=t,this.language=s,this.metadata=i,this.router=n,this.configurationService=l,this.session=o,this.toast=a,this.modal=d,this.backend=r,this.helper=c,this.showUploadModal=!1,this.theFile="",this.theProgress=0}humanFileSize(e){let t=1024,s=e;if(Math.abs(e)<t)return s+" B";let i=["kB","MB","GB","TB","PB","EB","ZB","YB"],n=-1;do{s/=t,++n}while(Math.abs(s)>=t&&n<i.length-1);return s.toFixed(1)+" "+i[n]}uploadFile(){let e=this.fileupload.element.nativeElement.files;this.doupload(e)}doupload(e){this.showUploadModal=!0,this.theFile=e[0].name,this.uploadAttachmentsBase64(e).subscribe((e=>{e.progress?this.theProgress=e.progress.loaded/e.progress.total*100:e.complete&&(this.value=e.filename?e.filename:this.theFile,this.model.setField("file_mime_type",e.filetype))}),(e=>{this.closeUploadPopup()}),(()=>this.closeUploadPopup()))}removeFile(){this.value="",this.model.setField("file_mime_type","")}closeUploadPopup(){this.showUploadModal=!1}uploadAttachmentsBase64(e){if(0===e.length)return;let t=new ul.x,s=this.configurationService.getSystemParamater("upload_maxsize");for(let i of e)s&&i.size>s?(this.toast.sendToast(this.language.getLabelFormatted("LBL_EXCEEDS_MAX_UPLOADFILESIZE",[i.name,this.humanFileSize(s)]),"error"),t.error(!0)):this.readFile(i).subscribe((e=>{let s=new XMLHttpRequest,n={};s.onreadystatechange=(e=this)=>{if(4==s.readyState)try{let e=JSON.parse(s.response);t.next({complete:!0,filename:e.filename,filetype:e.filetype}),t.complete()}catch(e){n={status:"error",data:"Unknown error occurred: ["+s.responseText+"]"}}},s.upload.addEventListener("progress",(e=>{t.next({progress:{total:e.total,loaded:e.loaded}})}),!1),s.open("POST",this.configurationService.getBackendUrl()+"/module/"+this.model.module+"/"+this.model.id+"/noteattachment",!0),s.setRequestHeader("OAuth-Token",this.session.authData.sessionId),s.setRequestHeader("Content-Type","application/json;charset=UTF-8");let l={file:i.filecontent,filename:i.name,filemimetype:i.type};s.send(JSON.stringify(l))}));return t.asObservable()}readFile(e){let t=new ul.x,s=new FileReader;return s.file=e,s.onloadend=e=>{let i=s.result.toString();i=i.substring(i.indexOf("base64,")+7);let n=s.file;n.filecontent=i,t.next(n),t.complete()},s.readAsDataURL(e),t.asObservable()}getBarStyle(){return{width:this.theProgress+"%"}}b64toBlob(e,t="",s=512){let i=atob(e),n=[];for(let e=0;e<i.length;e+=s){let t=i.slice(e,e+s),l=new Array(t.length);for(let e=0;e<t.length;e++)l[e]=t.charCodeAt(e);let o=new Uint8Array(l);n.push(o)}return new Blob(n,{type:t})}downloadAttachment(){this.backend.getRequest("module/"+this.model.module+"/"+this.model.id+"/noteattachment").subscribe((e=>{let t=this.b64toBlob(e.file,e.file_mime_type),s=URL.createObjectURL(t),i=document.createElement("a");document.body.appendChild(i),i.href=s,i.download=e.filename,i.type=e.file_mime_type,i.click(),i.remove()}))}previewFile(){if(this.model.getFieldValue("file_mime_type")){let e=this.model.getFieldValue("file_mime_type").split("/");switch(e[0]){case"image":this.modal.openModal("SystemImagePreviewModal").subscribe((e=>{e.instance.imgname=this.value,e.instance.imgtype=this.model.getFieldValue("file_mime_type"),this.backend.getRequest("module/"+this.model.module+"/"+this.model.id+"/noteattachment").subscribe((t=>{e.instance.imgsrc="data:"+this.model.getFieldValue("file_mime_type")+";base64,"+t.file}))}));break;case"text":case"audio":case"video":this.modal.openModal("SystemObjectPreviewModal").subscribe((e=>{e.instance.name=this.value,e.instance.type=this.model.getFieldValue("file_mime_type"),this.backend.getRequest("module/"+this.model.module+"/"+this.model.id+"/noteattachment").subscribe((t=>{e.instance.data=atob(t.file)}))}));break;case"application":if("pdf"===e[1])this.modal.openModal("SystemObjectPreviewModal").subscribe((e=>{e.instance.name=this.value,e.instance.type=this.model.getFieldValue("file_mime_type"),this.backend.getRequest("module/"+this.model.module+"/"+this.model.id+"/noteattachment").subscribe((t=>{e.instance.data=atob(t.file)}))}));else this.downloadAttachment();break;default:this.downloadAttachment()}}else this.downloadAttachment()}preventdefault(e){(1==e.dataTransfer.items.length&&"file"===e.dataTransfer.items[0].kind||e.dataTransfer.files.length>0)&&(e.preventDefault(),e.stopPropagation())}onDrop(e){this.doupload(e)}}return fieldFile.ɵfac=function(e){return new(e||fieldFile)(r.Y36(Z.o),r.Y36(A.e),r.Y36(x.d),r.Y36(c.Pu),r.Y36(k.F0),r.Y36(K.C),r.Y36(ml.n),r.Y36(z.A),r.Y36(L.o),r.Y36(H.y),r.Y36(hl._))},fieldFile.ɵcmp=r.Xpm({type:fieldFile,selectors:[["field-file"]],viewQuery:function(e,t){if(1&e&&r.Gf(fl,5,r.s_b),2&e){let e;r.iGM(e=r.CRH())&&(t.fileupload=e.first)}},features:[r.qOj],decls:5,vars:5,consts:[[3,"fieldname","fieldconfig",4,"ngIf"],[3,"fielddisplayclass","editable","fieldconfig","title","fieldid",4,"ngIf"],["class","slds-form-element__control slds-grid slds-grid--align-spread slds-p-vertical--xx-small",3,"ngClass",4,"ngIf"],["role","dialog","class","slds-modal slds-fade-in-open",4,"ngIf"],["class","slds-backdrop slds-backdrop--open",4,"ngIf"],[3,"fieldname","fieldconfig"],[3,"fielddisplayclass","editable","fieldconfig","title","fieldid"],[1,"slds-grid","slds-grid--vertical-align-center"],["divClass","slds-p-right--xx-small","size","x-small",3,"filemimetype","filename",4,"ngIf"],[1,"slds-truncate","slds-grow"],["href","javascript:void(0);",3,"click"],["divClass","slds-p-right--xx-small","size","x-small",3,"filemimetype","filename"],[1,"slds-form-element__control","slds-grid","slds-grid--align-spread","slds-p-vertical--xx-small",3,"ngClass"],["class","slds-pill slds-pill_link slds-size--1-of-1",4,"ngIf"],["class","slds-file-selector slds-file-selector_files",4,"ngIf"],[3,"fieldname"],[1,"slds-pill","slds-pill_link","slds-size--1-of-1"],[1,"slds-pill__icon_container"],["title","Account",1,"slds-icon_container","slds-icon-standard-account"],["divClass","","sprite","doctype","size","x-small",3,"icon"],["href","javascript:void(0);",1,"slds-pill__action"],[1,"slds-pill__label"],["title","Remove",1,"slds-button","slds-button_icon","slds-button_icon","slds-pill__remove",3,"click"],["icon","close"],[1,"slds-file-selector","slds-file-selector_files"],[1,"slds-file-selector__dropzone",3,"system-drop-file"],["type","file",1,"slds-file-selector__input","slds-assistive-text",3,"id","click","change"],["fileupload",""],[1,"slds-file-selector__body"],[1,"slds-file-selector__button","slds-button","slds-button_neutral"],[3,"icon"],["label","LBL_UPLOAD_FILES"],[1,"slds-file-selector__text","slds-medium-show"],["label","LBL_OR"],["label","LBL_DROP_FILES"],["role","dialog",1,"slds-modal","slds-fade-in-open"],[1,"slds-modal__container"],[1,"slds-modal__header","slds-modal__header--empty"],[1,"slds-modal__content","slds-p-around--medium"],[1,"uploadbar"],[1,"uploadprogress",3,"ngStyle"],[1,"slds-backdrop","slds-backdrop--open"]],template:function(e,t){1&e&&(r.YNc(0,bl,1,2,"field-label",0),r.YNc(1,yl,6,7,"field-generic-display",1),r.YNc(2,Zl,4,4,"div",2),r.YNc(3,wl,7,2,"div",3),r.YNc(4,Tl,1,0,"div",4)),2&e&&(r.Q6J("ngIf",t.displayLabel),r.xp6(1),r.Q6J("ngIf",!t.isEditMode()),r.xp6(1),r.Q6J("ngIf",t.isEditable()&&t.isEditMode()),r.xp6(1),r.Q6J("ngIf",t.showUploadModal),r.xp6(1),r.Q6J("ngIf",t.showUploadModal))},dependencies:[i.mk,i.O5,i.PC,w.J,rs.f,gl.T,X._,pl.M,u.q,C.D,I.a],encapsulation:2}),fieldFile})();function Al(e,t){if(1&e&&r._UZ(0,"field-label",3),2&e){const e=r.oxw();r.Q6J("fieldname",e.fieldname)("fieldconfig",e.fieldconfig)}}function kl(e,t){1&e&&r._UZ(0,"system-utility-icon",8)}function Ll(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"field-generic-display",4)(1,"div",5),r.NdJ("click",(function(){r.CHM(e);const t=r.oxw();return r.KtG(t.navigateTo())})),r.YNc(2,kl,1,0,"system-utility-icon",6),r.TgZ(3,"div",7),r._uU(4),r.qZA()()()}if(2&e){const e=r.oxw();r.Q6J("fielddisplayclass",e.fielddisplayclass)("editable",e.isEditable())("fieldconfig",e.fieldconfig)("fieldid",e.fieldid),r.xp6(2),r.Q6J("ngIf",e.url),r.xp6(2),r.Oqu(e.url)}}function Ml(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"div",9)(1,"input",10,11),r.NdJ("ngModelChange",(function(t){r.CHM(e);const s=r.oxw();return r.KtG(s.value=t)})),r.qZA(),r._UZ(3,"field-messages",12),r.qZA()}if(2&e){const e=r.oxw();r.Q6J("ngClass",e.getFieldClass()),r.xp6(1),r.Q6J("ngModel",e.value)("ngModelOptions",e.modelOptions),r.xp6(2),r.Q6J("fieldname",e.fieldname)}}let Sl=(()=>{class fieldUrl extends d.O{constructor(e,t,s,i,n){super(e,t,s,i,n),this.model=e,this.view=t,this.language=s,this.metadata=i,this.router=n}get url(){return this.model.getField(this.fieldname)?this.model.getField(this.fieldname).replace(/https?\:\/\//,""):""}navigateTo(){""!=this.url&&window.open("//"+this.url,"_blank")}}return fieldUrl.ɵfac=function(e){return new(e||fieldUrl)(r.Y36(Z.o),r.Y36(A.e),r.Y36(x.d),r.Y36(c.Pu),r.Y36(k.F0))},fieldUrl.ɵcmp=r.Xpm({type:fieldUrl,selectors:[["field-url"]],features:[r.qOj],decls:3,vars:3,consts:[[3,"fieldname","fieldconfig",4,"ngIf"],[3,"fielddisplayclass","editable","fieldconfig","fieldid",4,"ngIf"],["class","slds-form-element__control slds-grid slds-grid--align-spread",3,"ngClass",4,"ngIf"],[3,"fieldname","fieldconfig"],[3,"fielddisplayclass","editable","fieldconfig","fieldid"],[1,"slds-grid","slds-grid--vertical-align-center","slds-text-link_reset",3,"click"],["class","slds-m-right--xx-small","icon","world","size","x-small",4,"ngIf"],[1,"slds-truncate"],["icon","world","size","x-small",1,"slds-m-right--xx-small"],[1,"slds-form-element__control","slds-grid","slds-grid--align-spread",3,"ngClass"],["type","text",1,"slds-input",3,"ngModel","ngModelOptions","ngModelChange"],["focus",""],[3,"fieldname"]],template:function(e,t){1&e&&(r.YNc(0,Al,1,2,"field-label",0),r.YNc(1,Ll,5,6,"field-generic-display",1),r.YNc(2,Ml,4,4,"div",2)),2&e&&(r.Q6J("ngIf",t.displayLabel),r.xp6(1),r.Q6J("ngIf",!t.isEditMode()),r.xp6(1),r.Q6J("ngIf",t.isEditable()&&t.isEditMode()))},dependencies:[i.mk,i.O5,n.Fj,n.JJ,n.On,M.r,u.q,C.D,I.a],encapsulation:2}),fieldUrl})();function Il(e,t){if(1&e&&r._UZ(0,"field-label",3),2&e){const e=r.oxw();r.Q6J("fieldname",e.fieldname)("fieldconfig",e.fieldconfig)}}function Ol(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"system-utility-icon",8),r.NdJ("click",(function(t){r.CHM(e);const s=r.oxw(2);return r.KtG(s.sendEmail(t))})),r.qZA()}}function Jl(e,t){if(1&e&&(r.TgZ(0,"field-generic-display",4)(1,"div",5)(2,"div",6),r._uU(3),r.qZA(),r.YNc(4,Ol,1,0,"system-utility-icon",7),r.qZA()()),2&e){const e=r.oxw();r.Q6J("fielddisplayclass",e.fielddisplayclass)("fieldconfig",e.fieldconfig)("editable",e.isEditable())("title",e.value),r.xp6(3),r.Oqu(e.value),r.xp6(1),r.Q6J("ngIf",e.value)}}function Nl(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"div",9)(1,"input",10),r.NdJ("ngModelChange",(function(t){r.CHM(e);const s=r.oxw();return r.KtG(s.value=t)})),r.qZA(),r._UZ(2,"field-messages",11),r.qZA()}if(2&e){const e=r.oxw();r.Q6J("ngClass",e.fieldClass),r.xp6(1),r.Q6J("ngModel",e.value)("ngModelOptions",e.modelOptions),r.xp6(1),r.Q6J("fieldname",e.fieldname)}}let Fl=(()=>{class fieldEmail extends d.O{constructor(e,t,s,i,n){super(e,t,s,i,n),this.model=e,this.view=t,this.language=s,this.metadata=i,this.router=n,this.invalid=!1,this.validation=new RegExp('^(([^<>()\\[\\]\\\\.,;:\\s@"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@"]+)*)|(".+"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$'),this._value="",this.mark=this.model.generateGuid(),this.subscriptions.add(this.model.data$.subscribe((e=>{(!this.value||this.value&&this.value!=e.email1)&&this.setInitialFieldValue()}))),this.model.observeFieldChanges("email_addresses").subscribe((()=>{this.setInitialFieldValue()}))}get value(){return this._value}set value(e){this._value=e,e&&e.length>0&&!this.validation.test(e)?(this.model.setFieldMessage("error",this.language.getLabel("LBL_INPUT_INVALID"),this.fieldname,this.mark),this.invalid=!0):(this.model.setField(this.fieldname,e||""),this.setPrimaryEmail(e),this.model.resetFieldMessages(this.fieldname,"error",this.mark),this.invalid=!1)}get fieldClass(){return this.invalid?[...this.css_classes,"slds-has-error"]:this.css_classes}ngOnInit(){this.setInitialFieldValue(),super.ngOnInit()}setInitialFieldValue(){this._value=this.model.getField(this.fieldname);const e=this.model.getRelatedRecords("email_addresses"),t=e?e.find((e=>1==e.primary_address)):void 0;this._value||(this._value=t?t.email_address:void 0)}setPrimaryEmail(e){let t=e?{id:this.model.generateGuid(),primary_address:"1",email_address:e.toLowerCase(),email_address_caps:e.toUpperCase()}:void 0,s=this.model.getRelatedRecords("email_addresses");if(s&&0!=s.length||!t)if(t){let e=!1;s.forEach((s=>{t.email_address_caps==s.email_address_caps?(e=!0,s.primary_address=1):s.primary_address=0})),e||s.push(t)}else s=s.filter((e=>1!=e.primary_address));else s=[t];this.model.setRelatedRecords("email_addresses",s)}sendEmail(e){e.stopPropagation(),e.preventDefault(),this.value.length>0&&window.open("mailto:"+this.value)}}return fieldEmail.ɵfac=function(e){return new(e||fieldEmail)(r.Y36(Z.o),r.Y36(A.e),r.Y36(x.d),r.Y36(c.Pu),r.Y36(k.F0))},fieldEmail.ɵcmp=r.Xpm({type:fieldEmail,selectors:[["field-email"]],features:[r.qOj],decls:3,vars:3,consts:[[3,"fieldname","fieldconfig",4,"ngIf"],[3,"fielddisplayclass","fieldconfig","editable","title",4,"ngIf"],["class","slds-form-element__control slds-p-around--xx-small",3,"ngClass",4,"ngIf"],[3,"fieldname","fieldconfig"],[3,"fielddisplayclass","fieldconfig","editable","title"],[1,"slds-grid","slds-grid--vertical-align-center"],[1,"slds-truncate"],["icon","email","size","x-small","class","slds-text-link_reset slds-p-left--x-small",3,"click",4,"ngIf"],["icon","email","size","x-small",1,"slds-text-link_reset","slds-p-left--x-small",3,"click"],[1,"slds-form-element__control","slds-p-around--xx-small",3,"ngClass"],["type","text",1,"slds-input",3,"ngModel","ngModelOptions","ngModelChange"],[3,"fieldname"]],template:function(e,t){1&e&&(r.YNc(0,Il,1,2,"field-label",0),r.YNc(1,Jl,5,6,"field-generic-display",1),r.YNc(2,Nl,3,4,"div",2)),2&e&&(r.Q6J("ngIf",t.displayLabel),r.xp6(1),r.Q6J("ngIf",!t.isEditMode()),r.xp6(1),r.Q6J("ngIf",t.isEditable()&&t.isEditMode()))},dependencies:[i.mk,i.O5,n.Fj,n.JJ,n.On,M.r,u.q,C.D,I.a],encapsulation:2}),fieldEmail})();var ql=s(151),El=s(5982);function Yl(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"input",5),r.NdJ("ngModelChange",(function(t){r.CHM(e);const s=r.oxw();return r.KtG(s.emailAddressText=t)})),r.qZA()}if(2&e){const e=r.oxw();r.Q6J("ngModel",e.emailAddressText)}}function Ql(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"input",6),r.NdJ("ngModelChange",(function(t){r.CHM(e);const s=r.oxw();return r.KtG(s.emailAddressText=t)})),r.qZA()}if(2&e){const e=r.oxw();r.Q6J("ngModel",e.emailAddressText)}}function Ul(e,t){1&e&&(r.TgZ(0,"div",7),r._UZ(1,"system-label",8),r.qZA())}let Dl=(()=>{class fieldEmailEmailAddress{constructor(e){this.zone=e,this.onBlur=new r.vpe,this.emailAddress={}}get emailAddressText(){return this.emailAddress.email_address}set emailAddressText(e){this.emailAddress.email_address=e,this.emailAddress.email_address_caps=e.toUpperCase(),this.zone.runOutsideAngular((()=>{window.clearTimeout(this.typingTimeout),this.typingTimeout=window.setTimeout((()=>this.zone.run((()=>{this.validateEmailAddress(),this.onBlur.emit()}))),500)}))}validateEmailAddress(){const e=new RegExp('^(([^<>()\\[\\]\\\\.,;:\\s@"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@"]+)*)|(".+"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$');this.emailAddress.invalid_email=e.test(this.emailAddress.email_address)?0:1}}return fieldEmailEmailAddress.ɵfac=function(e){return new(e||fieldEmailEmailAddress)(r.Y36(r.R0b))},fieldEmailEmailAddress.ɵcmp=r.Xpm({type:fieldEmailEmailAddress,selectors:[["field-email-emailaddress"]],inputs:{emailAddress:"emailAddress"},outputs:{onBlur:"onBlur"},decls:6,vars:5,consts:[[1,"slds-form-element","slds-truncate","slds-size--1-of-1"],[1,"slds-form-element__control"],["type","text","class","slds-input",3,"ngModel","ngModelChange",4,"ngIf","ngIfElse"],["hasFocusContainer",""],["class","slds-form-element__help",4,"ngIf"],["type","text",1,"slds-input",3,"ngModel","ngModelChange"],["type","text","system-autofocus","",1,"slds-input",3,"ngModel","ngModelChange"],[1,"slds-form-element__help"],["label","LBL_INPUT_INVALID"]],template:function(e,t){if(1&e&&(r.TgZ(0,"div",0)(1,"div",1),r.YNc(2,Yl,1,1,"input",2),r.YNc(3,Ql,1,1,"ng-template",null,3,r.W1O),r.qZA(),r.YNc(5,Ul,2,0,"div",4),r.qZA()),2&e){const e=r.MAs(4);r.ekj("slds-has-error",1==t.emailAddress.invalid_email),r.xp6(2),r.Q6J("ngIf",!t.emailAddress.hasFocus)("ngIfElse",e),r.xp6(3),r.Q6J("ngIf",1==t.emailAddress.invalid_email)}},dependencies:[i.O5,n.Fj,n.JJ,n.On,X._,El.m],encapsulation:2}),fieldEmailEmailAddress})(),jl=(()=>{class fieldEmailEmailAddressStatus{get statusColor(){switch(this.status){case"opted_in":return"slds-icon-text-success";case"pending":return"slds-icon-text-warning";case"opted_out":return"slds-icon-text-error";default:return"slds-icon-text-light"}}get statusIcon(){switch(this.status){case"opted_in":return"success";case"pending":return"warning";case"opted_out":return"error";default:return"routing_offline"}}get statusLabel(){switch(this.status){case"opted_in":return"LBL_OPTED_IN";case"pending":return"LBL_PENDING";case"opted_out":return"LBL_OPTED_OUT";default:return"LBL_OPT_IN_STATUS"}}}return fieldEmailEmailAddressStatus.ɵfac=function(e){return new(e||fieldEmailEmailAddressStatus)},fieldEmailEmailAddressStatus.ɵcmp=r.Xpm({type:fieldEmailEmailAddressStatus,selectors:[["field-email-emailaddress-status"]],inputs:{status:"status"},decls:1,vars:3,consts:[["size","x-small",3,"icon","colorclass","title"]],template:function(e,t){1&e&&r._UZ(0,"system-utility-icon",0),2&e&&r.Q6J("icon",t.statusIcon)("colorclass",t.statusColor)("title",t.statusLabel)},dependencies:[M.r],encapsulation:2,changeDetection:0}),fieldEmailEmailAddressStatus})();function Rl(e,t){if(1&e&&r._UZ(0,"field-label",3),2&e){const e=r.oxw();r.Q6J("fieldname",e.fieldname)("fieldconfig",e.fieldconfig)}}function Bl(e,t){if(1&e&&r._UZ(0,"system-input-radio",14),2&e){const e=r.oxw().$implicit;r.Q6J("ngModel",e.primary_address)("disabled",!0)}}function Gl(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"button",15),r.NdJ("click",(function(){r.CHM(e);const t=r.oxw().$implicit,s=r.oxw(2);return r.KtG(s.sendEmail(t))})),r._UZ(1,"system-button-icon",16),r.qZA()}if(2&e){const e=r.oxw().$implicit;r.Q6J("disabled","1"==e.invalid_email)}}function Pl(e,t){if(1&e&&(r.TgZ(0,"div",6),r.YNc(1,Bl,1,2,"system-input-radio",7),r.TgZ(2,"div",8)(3,"div",9),r.YNc(4,Gl,2,1,"button",10),r.TgZ(5,"div",11),r._uU(6),r.qZA()()(),r.TgZ(7,"div",12),r._UZ(8,"field-email-emailaddress-status",13),r.qZA()()),2&e){const e=t.$implicit,s=r.oxw(2);r.xp6(1),r.Q6J("ngIf",!s.fieldconfig.singleMode),r.xp6(3),r.Q6J("ngIf",!!e.email_address),r.xp6(1),r.Udp("text-decoration","1"==e.invalid_email?"line-through":"initial"),r.xp6(1),r.Oqu(e.email_address),r.xp6(2),r.Q6J("status",e.opt_in_status)}}function Hl(e,t){if(1&e&&(r.TgZ(0,"field-generic-display",4),r.YNc(1,Pl,9,6,"div",5),r.qZA()),2&e){const e=r.oxw();r.Q6J("fieldconfig",e.fieldconfig)("editable",e.isEditable()),r.xp6(1),r.Q6J("ngForOf",e.emailAddresses)("ngForTrackBy",e.trackByFn)}}function zl(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"system-input-radio",27),r.NdJ("ngModelChange",(function(){r.CHM(e);const t=r.oxw().$implicit,s=r.oxw(2);return r.KtG(s.setPrimary(t))})),r.qZA()}if(2&e){const e=r.oxw().$implicit,t=r.oxw(2);r.Q6J("name",t.primaryInputRadioName)("ngModel","1"==e.primary_address)("disabled",1==e.invalid_email||!e.email_address)}}function Vl(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"div",21),r.YNc(1,zl,1,3,"system-input-radio",22),r.TgZ(2,"field-email-emailaddress",23),r.NdJ("keyup.enter",(function(){r.CHM(e);const t=r.oxw(2);return r.KtG(t.startAdding())}))("onBlur",(function(){r.CHM(e);const t=r.oxw(2);return r.KtG(t.setEmailAddressesField())})),r.qZA(),r._UZ(3,"field-email-emailaddress-status",24),r.TgZ(4,"button",25),r.NdJ("click",(function(){const t=r.CHM(e).$implicit,s=r.oxw(2);return r.KtG(s.handleOnDelete(t))})),r._UZ(5,"system-button-icon",26),r.qZA()()}if(2&e){const e=t.$implicit,s=r.oxw(2);r.ekj("slds-m-bottom--x-small",s.emailAddresses.length>0),r.xp6(1),r.Q6J("ngIf",!s.fieldconfig.singleMode),r.xp6(1),r.Q6J("emailAddress",e),r.xp6(1),r.Q6J("status",e.opt_in_status),r.xp6(1),r.Q6J("disabled","1"==e.primary_address&&s.emailAddresses.length>1)}}function Kl(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"system-input-radio",29),r.NdJ("ngModelChange",(function(){r.CHM(e);const t=r.oxw(3);return r.KtG(t.setPrimary(t.inputNewEmailAddress))})),r.qZA()}if(2&e){const e=r.oxw(3);r.Q6J("name",e.primaryInputRadioName)("ngModel","1"==e.inputNewEmailAddress.primary_address)("disabled",1==e.inputNewEmailAddress.invalid_email||!e.inputNewEmailAddress.email_address)}}function $l(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"div",21),r.YNc(1,Kl,1,3,"system-input-radio",28),r.TgZ(2,"field-email-emailaddress",23),r.NdJ("keyup.enter",(function(){r.CHM(e);const t=r.oxw(2);return r.KtG(t.startAdding())}))("onBlur",(function(){r.CHM(e);const t=r.oxw(2);return r.KtG(t.setEmailAddressesField())})),r.qZA(),r._UZ(3,"field-email-emailaddress-status",24),r.TgZ(4,"button",25),r.NdJ("click",(function(){r.CHM(e);const t=r.oxw(2);return r.KtG(t.cancelAdding())})),r._UZ(5,"system-button-icon",26),r.qZA()()}if(2&e){const e=r.oxw(2);r.xp6(1),r.Q6J("ngIf",!e.fieldconfig.singleMode),r.xp6(1),r.Q6J("emailAddress",e.inputNewEmailAddress),r.xp6(1),r.Q6J("status",e.inputNewEmailAddress.opt_in_status),r.xp6(1),r.Q6J("disabled","1"==e.inputNewEmailAddress.primary_address&&e.emailAddresses.length>1)}}function Xl(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"div",30)(1,"button",31),r.NdJ("click",(function(){r.CHM(e);const t=r.oxw(2);return r.KtG(t.startAdding())})),r._UZ(2,"system-button-icon",32),r.qZA()()}}function Wl(e,t){if(1&e&&(r.TgZ(0,"div",17),r.YNc(1,Vl,6,6,"div",18),r.YNc(2,$l,6,4,"div",19),r.YNc(3,Xl,3,0,"div",20),r.qZA()),2&e){const e=r.oxw();r.xp6(1),r.Q6J("ngForOf",e.emailAddresses)("ngForTrackBy",e.trackByFn),r.xp6(1),r.Q6J("ngIf",e.isAdding),r.xp6(1),r.Q6J("ngIf",e.canAdd)}}let eo=(()=>{class fieldEmailAddresses extends d.O{constructor(e,t,s,i,n,l){super(e,t,s,i,l),this.model=e,this.view=t,this.language=s,this.metadata=i,this.broadcast=n,this.router=l,this.primaryInputRadioName=_.uniqueId("field-email-address-"),this.canAdd=!1,this.isAdding=!1,this.emailAddresses=[],this.inputNewEmailAddress={primary_address:"",invalid_email:0,email_address:"",hasFocus:!0},this.subscribeToDataChange()}ngOnInit(){this.initialize(),this.subscribeToModeChange()}handleOnDelete(e){this.emailAddresses=this.emailAddresses.filter((t=>t.id!==e.id)),e.isNew?this.model.setRelatedRecords("email_addresses",this.emailAddresses):this.model.removeRelatedRecords("email_addresses",[e.id]),0==this.emailAddresses.length&&this.setEmail1Field(void 0),this.fieldconfig.singleMode&&(this.canAdd=!0,this.startAdding()),this.handleFieldInvalid()}sendEmail(e){1!=e.invalid_email&&window.location.assign("mailto:"+e.email_address)}trackByFn(e,t){return t.id}setPrimary(e){1!=e.invalid_email&&(this.emailAddresses.forEach((t=>{t.id==e.id?(t.primary_address="1",this.setEmail1Field(e)):t.primary_address="0"})),this.model.addRelatedRecords("email_addresses",this.emailAddresses))}startAdding(){this.canAdd&&(this.isAdding=!0,this.canAdd=!1)}subscribeToDataChange(){this.subscriptions.add(this.broadcast.message$.subscribe((e=>{"model.loaded"==e.messagetype&&this.initialize()}))),this.subscriptions.add(this.model.observeFieldChanges("email_addresses").subscribe((()=>{const e=this.model.getRelatedRecords("email_addresses");this.emailAddresses=this.fieldconfig.singleMode?e.filter((e=>1==e.primary_address)):e})))}setEmail1Field(e){1!=e?.invalid_email&&e?.email_address!=this.model.getField("email1")&&this.model.setField("email1",e?.email_address)}subscribeToModeChange(){this.subscriptions.add(this.view.mode$.subscribe((()=>this.initialize())))}initialize(){const e=this.model.getRelatedRecords("email_addresses");this.emailAddresses=this.fieldconfig.singleMode?e.filter((e=>1==e.primary_address)):e,this.isEditMode()&&(Array.isArray(this.emailAddresses)&&0!=this.emailAddresses.length?this.setCanAdd():(this.model.initializeField("email_addresses",{beans:{},beans_relations_to_delete:{}}),this.emailAddresses=[],this.canAdd=!0,this.startAdding()),this.handleFieldInvalid())}setEmailAddressesField(){this.pushNewEmailAddress();const e=this.getUniqueCleanEmailAddresses();this.model.addRelatedRecords("email_addresses",e.unique),this.model.removeRelatedRecords("email_addresses",e.deletedIds),this.handleFieldInvalid(),this.setEmail1Field(e.unique.find((e=>"1"==e.primary_address))),this.setCanAdd()}pushNewEmailAddress(){this.isAdding&&1!=this.inputNewEmailAddress.invalid_email&&!this.emailAddresses.some((e=>e.email_address==this.inputNewEmailAddress.email_address))&&(0==this.emailAddresses.length&&(this.inputNewEmailAddress.primary_address=1),this.inputNewEmailAddress.id=this.model.generateGuid(),this.inputNewEmailAddress.isNew=!0,this.emailAddresses.push({...this.inputNewEmailAddress}),this.cancelAdding())}handleFieldInvalid(){(1==this.emailAddresses.length&&this.emailAddresses[0].email_address||this.emailAddresses.length>1)&&this.emailAddresses.some((e=>1==e.invalid_email))?this.setFieldError(this.language.getLabel("LBL_INPUT_INVALID")):(1==this.emailAddresses.length&&(this.emailAddresses[0].invalid_email=0),this.clearFieldError())}setCanAdd(){this.canAdd=this.fieldconfig.singleMode?0==this.emailAddresses.length:!this.emailAddresses.some((e=>1==e.invalid_email))}getUniqueCleanEmailAddresses(){const e=[],t=this.emailAddresses.filter((e=>!e.email_address)).map((e=>e.id));return this.emailAddresses.filter((e=>!!e.email_address)).forEach((s=>{e.some((e=>e.email_address==s.email_address))?s.isNew||t.push(s.id):(delete s.hasFocus,e.push(s))})),{deletedIds:t,unique:e}}cancelAdding(){this.inputNewEmailAddress={id:"",primary_address:"",invalid_email:0,email_address:"",hasFocus:!0},this.emailAddresses.length>0&&(this.isAdding=!1,this.setCanAdd())}}return fieldEmailAddresses.ɵfac=function(e){return new(e||fieldEmailAddresses)(r.Y36(Z.o),r.Y36(A.e),r.Y36(x.d),r.Y36(c.Pu),r.Y36(V.f),r.Y36(k.F0))},fieldEmailAddresses.ɵcmp=r.Xpm({type:fieldEmailAddresses,selectors:[["field-email-addresses"]],features:[r.qOj],decls:3,vars:3,consts:[[3,"fieldname","fieldconfig",4,"ngIf"],["fielddisplayclass","slds-has-divider--bottom slds-p-vertical--xx-small spice-fieldminheight",3,"fieldconfig","editable",4,"ngIf"],["class","slds-m-top--xx-small",4,"ngIf"],[3,"fieldname","fieldconfig"],["fielddisplayclass","slds-has-divider--bottom slds-p-vertical--xx-small spice-fieldminheight",3,"fieldconfig","editable"],["class","slds-grid slds-grid--vertical-align-center slds-size--1-of-1",4,"ngFor","ngForOf","ngForTrackBy"],[1,"slds-grid","slds-grid--vertical-align-center","slds-size--1-of-1"],["value","1","system-title","LBL_PRIMARY","class","slds-truncate",3,"ngModel","disabled",4,"ngIf"],[1,"slds-m-bottom--xx-small","slds-grow"],[1,"slds-grid","slds-grid--vertical-align-center"],["class","slds-button slds-button_icon slds-m-right--xx-small",3,"disabled","click",4,"ngIf"],[1,"slds-truncate"],[1,"slds-p-left--x-small","slds-m-bottom--x-small"],[1,"slds-m-bottom--x-small","slds-p-right--xx-small",3,"status"],["value","1","system-title","LBL_PRIMARY",1,"slds-truncate",3,"ngModel","disabled"],[1,"slds-button","slds-button_icon","slds-m-right--xx-small",3,"disabled","click"],["icon","email","sprite","action"],[1,"slds-m-top--xx-small"],["class","slds-grid",3,"slds-m-bottom--x-small",4,"ngFor","ngForOf","ngForTrackBy"],["class","slds-grid",4,"ngIf"],["class","slds-grid slds-align-content-center slds-p-vertical--x-small",4,"ngIf"],[1,"slds-grid"],["value","1","system-title","LBL_PRIMARY","class","slds-m-top--xx-small","style","max-width: 1.4rem",3,"name","ngModel","disabled","ngModelChange",4,"ngIf"],[1,"slds-grow",3,"emailAddress","keyup.enter","onBlur"],[1,"slds-p-right--xx-small","slds-p-left--x-small","slds-m-top--xx-small",3,"status"],[1,"slds-button","slds-button--icon","slds-m-top--xxx-small",2,"max-height","1.6rem",3,"disabled","click"],["icon","clear"],["value","1","system-title","LBL_PRIMARY",1,"slds-m-top--xx-small",2,"max-width","1.4rem",3,"name","ngModel","disabled","ngModelChange"],["value","1","class","slds-m-top--xx-small","style","max-width: 1.4rem",3,"name","ngModel","disabled","ngModelChange",4,"ngIf"],["value","1",1,"slds-m-top--xx-small",2,"max-width","1.4rem",3,"name","ngModel","disabled","ngModelChange"],[1,"slds-grid","slds-align-content-center","slds-p-vertical--x-small"],["system-title","LBL_NEW",1,"slds-button","slds-button--icon-small","slds-button--icon-border",3,"click"],["icon","add"]],template:function(e,t){1&e&&(r.YNc(0,Rl,1,2,"field-label",0),r.YNc(1,Hl,2,4,"field-generic-display",1),r.YNc(2,Wl,4,4,"div",2)),2&e&&(r.Q6J("ngIf",t.displayLabel),r.xp6(1),r.Q6J("ngIf",!t.isEditMode()),r.xp6(1),r.Q6J("ngIf",t.isEditMode()))},dependencies:[i.sg,i.O5,n.JJ,n.On,w.J,Dt.A,ql.S,u.q,C.D,Dl,jl],encapsulation:2}),fieldEmailAddresses})();var to=s(2032);function so(e,t){if(1&e&&r._UZ(0,"field-label",3),2&e){const e=r.oxw();r.Q6J("fieldname",e.fieldname)("fieldconfig",e.fieldconfig)}}function io(e,t){if(1&e&&(r.TgZ(0,"li",8)(1,"a",9)(2,"span",10),r._uU(3),r.qZA()()()),2&e){const e=t.$implicit;r.xp6(3),r.hij(" ",e.email_address," ")}}function no(e,t){if(1&e&&(r.TgZ(0,"field-generic-display",4)(1,"div",5)(2,"ul",6),r.YNc(3,io,4,1,"li",7),r.qZA()()()),2&e){const e=r.oxw();r.Q6J("fielddisplayclass",e.fielddisplayclass)("fieldconfig",e.fieldconfig)("editable",e.isEditable()),r.xp6(3),r.Q6J("ngForOf",e.displayValue)}}function lo(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"a",18),r.NdJ("click",(function(t){r.CHM(e);const s=r.oxw(2);return r.KtG(s.showField("cc",t))})),r._uU(1,"Cc"),r.qZA()}}function oo(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"a",19),r.NdJ("click",(function(t){r.CHM(e);const s=r.oxw(2);return r.KtG(s.showField("bcc",t))})),r._uU(1,"Bcc"),r.qZA()}}function ao(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"field-email-recipients-input",20),r.NdJ("drop$",(function(t){r.CHM(e);const s=r.oxw(2);return r.KtG(s.handleDrop(t))})),r.qZA()}if(2&e){const e=r.oxw(2);r.Q6J("displayValue",e.displayValue)}}function ro(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"field-email-recipients-input",21),r.NdJ("drop$",(function(t){r.CHM(e);const s=r.oxw(2);return r.KtG(s.handleDrop(t))})),r.qZA()}if(2&e){const e=r.oxw(2);r.Q6J("displayValue",e.displayValue)}}function co(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"div",11),r.NdJ("click",(function(){r.CHM(e);const t=r.oxw();return r.KtG(t.setFocused())})),r.TgZ(1,"field-email-recipients-input",12),r.NdJ("drop$",(function(t){r.CHM(e);const s=r.oxw();return r.KtG(s.handleDrop(t))})),r.YNc(2,lo,2,0,"a",13),r.YNc(3,oo,2,0,"a",14),r.qZA(),r.YNc(4,ao,1,1,"field-email-recipients-input",15),r.YNc(5,ro,1,1,"field-email-recipients-input",16),r._UZ(6,"field-messages",17),r.qZA()}if(2&e){const e=r.oxw();r.Q6J("ngClass",e.css_classes),r.xp6(1),r.Q6J("addressType",e.fieldconfig.addresstype||"from")("displayValue",e.displayValue),r.xp6(1),r.Q6J("ngIf","to"==e.fieldconfig.addresstype&&!e.showCCField),r.xp6(1),r.Q6J("ngIf","to"==e.fieldconfig.addresstype&&!e.showBCCField),r.xp6(1),r.Q6J("ngIf",e.focused&&e.showCCField),r.xp6(1),r.Q6J("ngIf",e.focused&&e.showBCCField),r.xp6(1),r.Q6J("fieldname",e.fieldname)}}let uo=(()=>{class fieldEmailRecipients extends d.O{constructor(e,t,s,i,n,l,o,a,d,r,c,u){super(e,s,i,n,l),this.model=e,this.navigation=t,this.view=s,this.language=i,this.metadata=n,this.router=l,this.modal=o,this.injector=a,this.backend=d,this.renderer=r,this.elementRef=c,this.zone=u,this.displayValue=[],this.showCCField=!1,this.showBCCField=!1,this.focused=!1,this.dragging=!1,this.subscribeToDataChanges()}ngOnInit(){super.ngOnInit(),this.setInitialFieldValue()}subscribeToDataChanges(){this.subscriptions.add(this.model.data$.subscribe((e=>{e.recipient_addresses&&Array.isArray(e.recipient_addresses)&&(JSON.stringify(this.value)!=JSON.stringify(e.recipient_addresses)&&(this.value=e.recipient_addresses),JSON.stringify(this.displayValue)!=JSON.stringify(this.value)&&this.setDisplayValue())})))}setInitialFieldValue(){if(this.model.getField("recipient_addresses")||this.model.setField("recipient_addresses",[]),this.setDisplayValue(),this.model.getField("recipient_addresses").length>0||!0===this.fieldconfig.nodetermination||"to"!=this.fieldconfig.addresstype||!this.model.getField("parent_type")||!this.model.getField("parent_id"))return;let e=this.navigation.getRegisteredModel(this.model.getField("parent_id"),this.model.getField("parent_type"));if(e){let t=e.getField("email1");t&&(this.value.push({parent_type:e.module,parent_id:e.id,email_address:t,id:this.model.generateGuid(),address_type:"to"}),this.setDisplayValue())}else this.backend.getRequest(`module/${this.model.getField("parent_type")}/${this.model.getField("parent_id")}`).subscribe((e=>{e.email1&&(this.value.push({parent_type:this.model.getField("parent_type"),parent_id:this.model.getField("parent_id"),email_address:e.email1,id:this.model.generateGuid(),address_type:"to"}),this.setDisplayValue())}))}setDisplayValue(){this.displayValue=this.model.getField("recipient_addresses").filter((e=>("cc"==e.address_type&&(this.showCCField=!0),"bcc"==e.address_type&&(this.showBCCField=!0),"to"==this.fieldconfig.addresstype?["to","cc","bcc"].indexOf(e.address_type)>-1:e.address_type==(this.fieldconfig.addresstype||"from"))))}showField(e,t){t.stopPropagation(),"cc"==e?this.showCCField=!0:this.showBCCField=!0,this.setFocused()}addDocumentClickListener(){this.clickListener=this.renderer.listen("document","click",(e=>{this.elementRef.nativeElement.contains(e.target)||(this.setDisplayValue(),this.focused=!1,this.clickListener(),this.clickListener=void 0)}))}setFocused(){this.setDisplayValue(),this.focused=!0,this.clickListener||this.addDocumentClickListener()}handleDrop(e){const t=this.value.findIndex((t=>t==e.item.data));e.previousContainer.data!=e.container.data&&this.value.some((t=>{if(e.item.data==t)return t.address_type=e.container.data,!0})),(0,l.bA)(this.value,t,e.currentIndex),this.setDisplayValue()}}return fieldEmailRecipients.ɵfac=function(e){return new(e||fieldEmailRecipients)(r.Y36(Z.o),r.Y36(to.G),r.Y36(A.e),r.Y36(x.d),r.Y36(c.Pu),r.Y36(k.F0),r.Y36(L.o),r.Y36(r.zs3),r.Y36(H.y),r.Y36(r.Qsj),r.Y36(r.SBq),r.Y36(r.R0b))},fieldEmailRecipients.ɵcmp=r.Xpm({type:fieldEmailRecipients,selectors:[["field-email-recipients"]],features:[r.qOj],decls:3,vars:3,consts:[[3,"fieldname","fieldconfig",4,"ngIf"],[3,"fielddisplayclass","fieldconfig","editable",4,"ngIf"],["cdkDropListGroup","","class","slds-form-element__control",3,"ngClass","click",4,"ngIf"],[3,"fieldname","fieldconfig"],[3,"fielddisplayclass","fieldconfig","editable"],[1,"slds-pill_container",2,"border","none"],["role","listbox",1,"slds-listbox","slds-listbox_horizontal","slds-size--1-of-1"],["class","slds-pill slds-pill_link",4,"ngFor","ngForOf"],[1,"slds-pill","slds-pill_link"],["href","javascript:void(0);",1,"slds-pill__action","slds-p-horizontal--xx-small"],[1,"slds-pill__label"],["cdkDropListGroup","",1,"slds-form-element__control",3,"ngClass","click"],[3,"addressType","displayValue","drop$"],["href","javascript:void(0)","class","slds-m-right--xx-small slds-input__icon slds-input__icon_right",3,"click",4,"ngIf"],["href","javascript:void(0)","class","slds-input__icon_right slds-input__icon",3,"click",4,"ngIf"],["addressType","cc",3,"displayValue","drop$",4,"ngIf"],["addressType","bcc",3,"displayValue","drop$",4,"ngIf"],[3,"fieldname"],["href","javascript:void(0)",1,"slds-m-right--xx-small","slds-input__icon","slds-input__icon_right",3,"click"],["href","javascript:void(0)",1,"slds-input__icon_right","slds-input__icon",3,"click"],["addressType","cc",3,"displayValue","drop$"],["addressType","bcc",3,"displayValue","drop$"]],template:function(e,t){1&e&&(r.YNc(0,so,1,2,"field-label",0),r.YNc(1,no,4,4,"field-generic-display",1),r.YNc(2,co,7,8,"div",2)),2&e&&(r.Q6J("ngIf",t.displayLabel),r.xp6(1),r.Q6J("ngIf",!t.isEditMode()),r.xp6(1),r.Q6J("ngIf",t.isEditable()&&t.isEditMode()))},encapsulation:2}),fieldEmailRecipients})();var mo=s(4664);const ho=["addAddressInput"];function go(e,t){if(1&e&&r._UZ(0,"field-label",3),2&e){const e=r.oxw();r.Q6J("fieldname",e.fieldname)("fieldconfig",e.fieldconfig)}}function po(e,t){if(1&e&&(r.TgZ(0,"field-generic-display",4)(1,"span"),r._uU(2),r.qZA()()),2&e){const e=r.oxw();r.Q6J("fielddisplayclass",e.fielddisplayclass)("fieldconfig",e.fieldconfig)("editable",e.isEditable()),r.xp6(2),r.Oqu(e.firstAddress)}}function fo(e,t){if(1&e&&(r.TgZ(0,"span",25),r._UZ(1,"system-icon",26),r.qZA()),2&e){const e=r.oxw().$implicit;r.xp6(1),r.Q6J("module",e.parent_type)}}function bo(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"li",13)(1,"span",20),r.YNc(2,fo,2,1,"span",21),r.TgZ(3,"span",22),r._uU(4),r.qZA(),r.TgZ(5,"span",23)(6,"system-button-icon",24),r.NdJ("click",(function(t){const s=r.CHM(e).$implicit,i=r.oxw(2);return r.KtG(i.removeAddress(t,s.id))})),r.qZA()()()()}if(2&e){const e=t.$implicit;r.xp6(2),r.Q6J("ngIf",e.parent_id),r.xp6(2),r.Oqu(e.email_address),r.xp6(2),r.Q6J("icon","close")}}function _o(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"input",27),r.NdJ("ngModelChange",(function(t){r.CHM(e);const s=r.oxw(2);return r.KtG(s.addAddress=t)}))("blur",(function(){r.CHM(e);const t=r.oxw(2);return r.KtG(t.onBlur())}))("keyup",(function(t){r.CHM(e);const s=r.oxw(2);return r.KtG(s.onKeyUp(t))})),r.qZA()}if(2&e){const e=r.oxw(2);r.Q6J("ngModel",e.addAddress)("title",e.language.getLabel("LBL_ADD_EMAILADDRESS"))("placeholder",e.language.getLabel("LBL_ADD_EMAILADDRESS"))}}function yo(e,t){1&e&&r._UZ(0,"system-spinner",28)}function vo(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"li",29),r.NdJ("click",(function(){const t=r.CHM(e).$implicit,s=r.oxw(2);return r.KtG(s.selectAddress(t))})),r.TgZ(1,"div",30),r._UZ(2,"system-icon",31),r.TgZ(3,"div",32)(4,"span",33),r._uU(5),r.qZA()()()()}if(2&e){const e=t.$implicit;r.xp6(2),r.Q6J("module",e.module),r.xp6(3),r.AsE("",e.email_address," • ",e.summary_text,"")}}const xo=function(e){return{"slds-is-open":e}};function Zo(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"div",5)(1,"div",6)(2,"div",7)(3,"div",8)(4,"div",9)(5,"div",10),r.NdJ("click",(function(){r.CHM(e);const t=r.oxw();return r.KtG(t.onClick())})),r.TgZ(6,"ul",11),r.YNc(7,bo,7,3,"li",12),r.TgZ(8,"li",13),r.YNc(9,_o,1,3,"input",14),r.qZA()()()(),r.TgZ(10,"div",15),r.YNc(11,yo,1,0,"system-spinner",16),r.TgZ(12,"ul",17),r.YNc(13,vo,6,3,"li",18),r.qZA()()()()(),r._UZ(14,"field-messages",19),r.qZA()}if(2&e){const e=r.oxw();r.Q6J("ngClass",e.css_classes),r.xp6(3),r.Q6J("ngClass",r.VKq(7,xo,e.showSearchResults)),r.xp6(4),r.Q6J("ngForOf",e.addrArray),r.xp6(2),r.Q6J("ngIf",e.isAdding),r.xp6(2),r.Q6J("ngIf",e.searchResultsLoading),r.xp6(2),r.Q6J("ngForOf",e.searchResults),r.xp6(1),r.Q6J("fieldname",e.fieldname)}}let wo=(()=>{class fieldEmailRecipientsShort extends d.O{constructor(e,t,s,i,n,l,o,a){super(e,t,s,i,n),this.model=e,this.view=t,this.language=s,this.metadata=i,this.router=n,this.backend=l,this.renderer=o,this.elementRef=a,this.isAdding=!1,this.addAddress="",this.searchTimeOut=void 0,this.showSearchResults=!1,this.searchResults=[],this.searchResultsLoading=!1}get firstAddress(){return this.addrArray&&this.addrArray.length>0?this.addrArray[0].email_address:""}get addresstype(){return this.fieldconfig.addresstype?this.fieldconfig.addresstype:"from"}get addrArray(){let e=[];if(this.model.getField("recipient_addresses"))for(let t of this.model.getField("recipient_addresses"))t.address_type==this.addresstype&&"1"!=t.deleted&&e.push(t);return e}onClick(){this.isAdding=!0}onBlur(){""==this.addAddress&&(this.isAdding=!1)}removeAddress(e,t){e.preventDefault(),e.stopPropagation();for(let e of this.model.getField("recipient_addresses"))if(e.id==t)return void(e.deleted="1")}onKeyUp(e){switch(e.key){case"ArrowDown":case"ArrowUp":break;case"Enter":this.searchTimeOut&&window.clearTimeout(this.searchTimeOut),this.validateEmail(this.addAddress)?(this.model.getField("recipient_addresses")||this.model.setField("recipient_addresses",[]),this.model.getField("recipient_addresses").push({id:this.model.generateGuid(),address_type:this.addresstype,email_address:this.addAddress}),this.addAddress="",this.closeSearchDialog()):this.doSearch();break;default:this.searchTimeOut&&window.clearTimeout(this.searchTimeOut),this.searchTimeOut=window.setTimeout((()=>this.doSearch()),1e3)}}closeSearchDialog(){this.clickListener(),this.searchResults=[],this.showSearchResults=!1}doSearch(){""!==this.addAddress&&(this.searchResults=[],this.showSearchResults=!0,this.searchResultsLoading=!0,this.clickListener=this.renderer.listen("document","click",(e=>this.handleClick(e))),this.backend.getRequest("module/EmailAddresses/"+this.addAddress).subscribe((e=>{e.length>0?this.searchResults=e:this.closeSearchDialog(),this.searchResultsLoading=!1})))}handleClick(e){this.elementRef.nativeElement.contains(e.target)||(this.closeSearchDialog(),this.addAddress="",this.isAdding=!1)}selectAddress(e){this.model.getField("recipient_addresses")||this.model.setField("recipient_addresses",[]),this.model.getField("recipient_addresses").push({id:this.model.generateGuid(),address_type:this.addresstype,email_address:e.email_address,email_address_id:e.email_address_id,parent_type:e.module,parent_id:e.id}),this.addAddress="",this.isAdding=!1,this.closeSearchDialog()}validateEmail(e){return/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(String(e).toLowerCase())}}return fieldEmailRecipientsShort.ɵfac=function(e){return new(e||fieldEmailRecipientsShort)(r.Y36(Z.o),r.Y36(A.e),r.Y36(x.d),r.Y36(c.Pu),r.Y36(k.F0),r.Y36(H.y),r.Y36(r.Qsj),r.Y36(r.SBq))},fieldEmailRecipientsShort.ɵcmp=r.Xpm({type:fieldEmailRecipientsShort,selectors:[["ng-component"]],viewQuery:function(e,t){if(1&e&&r.Gf(ho,7,r.s_b),2&e){let e;r.iGM(e=r.CRH())&&(t.addAddressInput=e.first)}},features:[r.qOj],decls:3,vars:3,consts:[[3,"fieldname","fieldconfig",4,"ngIf"],[3,"fielddisplayclass","fieldconfig","editable",4,"ngIf"],["class","slds-form-element__control slds-grid slds-grid--align-spread slds-p-around--xx-small",3,"ngClass",4,"ngIf"],[3,"fieldname","fieldconfig"],[3,"fielddisplayclass","fieldconfig","editable"],[1,"slds-form-element__control","slds-grid","slds-grid--align-spread","slds-p-around--xx-small",3,"ngClass"],[1,"slds-form-element__control","slds-size--1-of-1"],[1,"slds-combobox_container"],["role","combobox",1,"slds-combobox","slds-dropdown-trigger","slds-dropdown-trigger_click",3,"ngClass"],["role","none",1,"slds-combobox__form-element","slds-input-has-icon","slds-input-has-icon_right"],[1,"slds-pill_container",3,"click"],["role","listbox",1,"slds-listbox","slds-listbox_horizontal"],["class","slds-listbox-item","role","presentation",4,"ngFor","ngForOf"],["role","presentation",1,"slds-listbox-item"],["system-autofocus","","type","text","style","min-width: 12rem;","class","slds-p-horizontal--x-small",3,"ngModel","title","placeholder","ngModelChange","blur","keyup",4,"ngIf"],["role","listbox",1,"slds-dropdown","slds-dropdown_fluid"],["size","12",4,"ngIf"],["role","presentation",1,"slds-listbox","slds-listbox_vertical"],["role","presentation","class","slds-listbox__item",3,"click",4,"ngFor","ngForOf"],[3,"fieldname"],["role","option",1,"slds-pill"],["class","slds-icon_container",4,"ngIf"],[1,"slds-pill__label"],[1,"slds-icon_container","slds-pill__remove"],[3,"icon","click"],[1,"slds-icon_container"],["size","x-small","divClass","slds-p-right--x-small",3,"module"],["system-autofocus","","type","text",1,"slds-p-horizontal--x-small",2,"min-width","12rem",3,"ngModel","title","placeholder","ngModelChange","blur","keyup"],["size","12"],["role","presentation",1,"slds-listbox__item",3,"click"],[1,"slds-listbox__option","slds-grid","slds-grid--vertical-align-center","slds-p-around--x-small"],["size","x-small",1,"slds-p-right--x-small",3,"module"],[1,"slds-media__body"],[1,"slds-listbox__option-text","slds-listbox__option-text_entity"]],template:function(e,t){1&e&&(r.YNc(0,go,1,2,"field-label",0),r.YNc(1,po,3,4,"field-generic-display",1),r.YNc(2,Zo,15,9,"div",2)),2&e&&(r.Q6J("ngIf",t.displayLabel),r.xp6(1),r.Q6J("ngIf",!t.isEditMode()),r.xp6(1),r.Q6J("ngIf",t.isEditable()&&t.isEditMode()))},dependencies:[i.mk,i.sg,i.O5,n.Fj,n.JJ,n.On,w.J,rs.f,mo.W,El.m,u.q,C.D,I.a],styles:["input[_ngcontent-%COMP%], input[_ngcontent-%COMP%]:focus{border:none;outline:none}"]}),fieldEmailRecipientsShort})();function To(e,t){if(1&e&&r._UZ(0,"field-label",3),2&e){const e=r.oxw();r.Q6J("fieldname",e.fieldname)("fieldconfig",e.fieldconfig)}}function Co(e,t){if(1&e&&(r.TgZ(0,"field-generic-display",4),r._uU(1),r.qZA()),2&e){const e=r.oxw();r.Q6J("fielddisplayclass",e.fielddisplayclass)("fieldconfig",e.fieldconfig)("editable",e.isEditable()),r.xp6(1),r.hij(" ",e.getCurrencySymbol(),"\n")}}function Ao(e,t){if(1&e&&(r.TgZ(0,"option",10),r._uU(1),r.qZA()),2&e){const e=t.$implicit;r.Q6J("value",e.id),r.xp6(1),r.AsE("",e.iso," (",e.symbol,") ")}}function ko(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"div",5)(1,"div",6)(2,"select",7),r.NdJ("ngModelChange",(function(t){r.CHM(e);const s=r.oxw();return r.KtG(s.value=t)})),r.YNc(3,Ao,2,3,"option",8),r.qZA()(),r._UZ(4,"field-messages",9),r.qZA()}if(2&e){const e=r.oxw();r.Q6J("ngClass",e.getFieldClass()),r.xp6(2),r.Q6J("ngModel",e.value),r.xp6(1),r.Q6J("ngForOf",e.currencies),r.xp6(1),r.Q6J("fieldname",e.fieldname)}}let Lo=(()=>{class fieldCurrencies extends d.O{constructor(e,t,s,i,n,l){super(e,t,s,i,n),this.model=e,this.view=t,this.language=s,this.metadata=i,this.router=n,this.currency=l,this.currencies=[],this.currencies=this.currency.getCurrencies()}getCurrencySymbol(){let e=-99;return this.model.getField(this.fieldname)&&(e=this.model.getField(this.fieldname)),this.currency.getCurrencySmbol(e)}}return fieldCurrencies.ɵfac=function(e){return new(e||fieldCurrencies)(r.Y36(Z.o),r.Y36(A.e),r.Y36(x.d),r.Y36(c.Pu),r.Y36(k.F0),r.Y36(xe.A))},fieldCurrencies.ɵcmp=r.Xpm({type:fieldCurrencies,selectors:[["field-currencies"]],features:[r.qOj],decls:3,vars:3,consts:[[3,"fieldname","fieldconfig",4,"ngIf"],[3,"fielddisplayclass","fieldconfig","editable",4,"ngIf"],["class","slds-form-element__control",3,"ngClass",4,"ngIf"],[3,"fieldname","fieldconfig"],[3,"fielddisplayclass","fieldconfig","editable"],[1,"slds-form-element__control",3,"ngClass"],[1,"slds-select_container","slds-m-vertical--xx-small"],[1,"slds-select",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[3,"fieldname"],[3,"value"]],template:function(e,t){1&e&&(r.YNc(0,To,1,2,"field-label",0),r.YNc(1,Co,2,4,"field-generic-display",1),r.YNc(2,ko,5,4,"div",2)),2&e&&(r.Q6J("ngIf",t.displayLabel),r.xp6(1),r.Q6J("ngIf",!t.isEditMode()),r.xp6(1),r.Q6J("ngIf",t.isEditable()&&t.isEditMode()))},dependencies:[i.mk,i.sg,i.O5,n.YN,n.Kr,n.EJ,n.JJ,n.On,u.q,C.D,I.a],encapsulation:2}),fieldCurrencies})();var Mo=s(1e3);function So(e,t){if(1&e&&r._UZ(0,"field-label",3),2&e){const e=r.oxw();r.Q6J("fieldname",e.fieldname)("fieldconfig",e.fieldconfig)}}function Io(e,t){if(1&e&&(r.TgZ(0,"field-generic-display",4)(1,"div",5),r._uU(2),r.qZA()()),2&e){const e=r.oxw();r.Q6J("fielddisplayclass",e.fielddisplayclass)("fieldconfig",e.fieldconfig)("editable",e.isEditable()),r.xp6(1),r.Q6J("id",e.value),r.xp6(1),r.Oqu(e.companyName)}}function Oo(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"div",6)(1,"system-input-companycodes",7),r.NdJ("ngModelChange",(function(t){r.CHM(e);const s=r.oxw();return r.KtG(s.value=t)})),r.qZA(),r._UZ(2,"field-messages",8),r.qZA()}if(2&e){const e=r.oxw();r.Q6J("ngClass",e.getFieldClass()),r.xp6(1),r.Q6J("ngModel",e.value),r.xp6(1),r.Q6J("fieldname",e.fieldname)}}let Jo=(()=>{class fieldCompanies extends d.O{constructor(e,t,s,i,n,l,o,a){super(e,t,s,i,n),this.model=e,this.view=t,this.language=s,this.metadata=i,this.router=n,this.backend=l,this.configuration=o,this.userpreferences=a}ngOnInit(){this.setDefault()}setDefault(){if(this.view.isEditMode()&&!this.model.getField(this.fieldname))if(this.userpreferences.companyCodeId)this.value=this.userpreferences.companyCodeId;else{let e=this.configuration.getData("companycodes");e&&e.length>0&&(e.sort(((e,t)=>e.name>t.name?-1:1)),this.value=e[0].id)}}get companyName(){let e="";return this.configuration.getData("companycodes").some((t=>{if(t.id==this.model.getField(this.fieldname))return e=t.name,!0})),e}}return fieldCompanies.ɵfac=function(e){return new(e||fieldCompanies)(r.Y36(Z.o),r.Y36(A.e),r.Y36(x.d),r.Y36(c.Pu),r.Y36(k.F0),r.Y36(H.y),r.Y36(K.C),r.Y36(pe.z))},fieldCompanies.ɵcmp=r.Xpm({type:fieldCompanies,selectors:[["field-companies"]],features:[r.qOj],decls:3,vars:3,consts:[[3,"fieldname","fieldconfig",4,"ngIf"],[3,"fielddisplayclass","fieldconfig","editable",4,"ngIf"],["class","slds-p-vertical--xx-small",3,"ngClass",4,"ngIf"],[3,"fieldname","fieldconfig"],[3,"fielddisplayclass","fieldconfig","editable"],["system-model-popover","","module","CompanyCodes",3,"id"],[1,"slds-p-vertical--xx-small",3,"ngClass"],[3,"ngModel","ngModelChange"],[3,"fieldname"]],template:function(e,t){1&e&&(r.YNc(0,So,1,2,"field-label",0),r.YNc(1,Io,3,5,"field-generic-display",1),r.YNc(2,Oo,3,3,"div",2)),2&e&&(r.Q6J("ngIf",t.displayLabel),r.xp6(1),r.Q6J("ngIf",!t.isEditMode()),r.xp6(1),r.Q6J("ngIf",t.isEditable()&&t.isEditMode()))},dependencies:[i.mk,i.O5,n.JJ,n.On,Mo.x,us.g,u.q,C.D,I.a],encapsulation:2}),fieldCompanies})();var No=s(494);function Fo(e,t){if(1&e&&r._UZ(0,"field-label",3),2&e){const e=r.oxw();r.Q6J("fieldname",e.fieldname)("fieldconfig",e.fieldconfig)}}function qo(e,t){if(1&e&&r._UZ(0,"system-tooltip",8),2&e){const e=r.oxw(2);r.Q6J("tooltiptext",e.vatInfo)}}function Eo(e,t){if(1&e&&(r.TgZ(0,"field-generic-display",4)(1,"div",5)(2,"div",6)(3,"span"),r._uU(4),r.qZA()(),r.YNc(5,qo,1,1,"system-tooltip",7),r.qZA()()),2&e){const e=r.oxw();r.Q6J("fielddisplayclass",e.fielddisplayclass)("editable",e.isEditable())("fieldconfig",e.fieldconfig)("fieldid",e.fieldid),r.xp6(4),r.Oqu(e.value),r.xp6(1),r.Q6J("ngIf",e.isvalid)}}function Yo(e,t){if(1&e&&r._UZ(0,"system-tooltip",8),2&e){const e=r.oxw(3);r.Q6J("tooltiptext",e.vatInfo)}}function Qo(e,t){if(1&e){const e=r.EpF();r.ynx(0),r.TgZ(1,"input",14,15),r.NdJ("ngModelChange",(function(t){r.CHM(e);const s=r.oxw(2);return r.KtG(s.value=t)})),r.qZA(),r.TgZ(3,"div",16),r.YNc(4,Yo,1,1,"system-tooltip",7),r.TgZ(5,"button",17),r.NdJ("click",(function(){r.CHM(e);const t=r.oxw(2);return r.KtG(t.validate())})),r._UZ(6,"system-label",18),r.qZA()(),r.BQk()}if(2&e){const e=r.oxw(2);r.xp6(1),r.Q6J("ngModel",e.value),r.xp6(3),r.Q6J("ngIf",e.isvalid),r.xp6(1),r.Q6J("disabled",!e.cancheck)}}function Uo(e,t){if(1&e&&r._UZ(0,"input",19,15),2&e){const e=r.oxw(2);r.s9C("value",e.language.getLabel("LBL_VALIDATING"))}}function Do(e,t){if(1&e&&(r.TgZ(0,"div",9)(1,"div",10),r.YNc(2,Qo,7,3,"ng-container",11),r.YNc(3,Uo,2,1,"ng-template",null,12,r.W1O),r.qZA(),r._UZ(5,"field-messages",13),r.qZA()),2&e){const e=r.MAs(4),t=r.oxw();r.Q6J("ngClass",t.getFieldClass()),r.xp6(2),r.Q6J("ngIf",!t.isvalidating)("ngIfElse",e),r.xp6(3),r.Q6J("fieldname",t.fieldname)}}let jo=(()=>{class fieldVat extends d.O{constructor(e,t,s,i,n,l,o){super(e,t,s,i,n),this.model=e,this.view=t,this.language=s,this.metadata=i,this.router=n,this.backend=l,this.toast=o,this.isvalidating=!1}get vatDetailsField(){return this.fieldconfig.vatdetails?this.fieldconfig.vatdetails:"vat_details"}validate(){this.isvalidating=!0,this.backend.getRequest(`common/VIES/${this.value}`).subscribe((e=>{"success"==e.status?(!0!==e.data.valid&&this.toast.sendToast(this.language.getLabel("ERR_INVALID_VAT"),"error"),this.model.setField("vat_details",JSON.stringify(e.data))):this.toast.sendToast(this.language.getLabel("ERR_CHECK_VAT"),"error"),this.isvalidating=!1}),(()=>{this.isvalidating=!1,this.toast.sendToast(this.language.getLabel("ERR_CHECK_VAT"),"error")}))}get cancheck(){return this.value&&this.value.length>3}get isvalid(){if(!this.model.getField(this.vatDetailsField))return!1;return JSON.parse(this.model.getField(this.vatDetailsField)).valid}get vatInfo(){let e=JSON.parse(this.model.getField(this.vatDetailsField));return e.name+"\n"+e.address}}return fieldVat.ɵfac=function(e){return new(e||fieldVat)(r.Y36(Z.o),r.Y36(A.e),r.Y36(x.d),r.Y36(c.Pu),r.Y36(k.F0),r.Y36(H.y),r.Y36(z.A))},fieldVat.ɵcmp=r.Xpm({type:fieldVat,selectors:[["field-vat"]],features:[r.qOj],decls:3,vars:3,consts:[[3,"fieldname","fieldconfig",4,"ngIf"],["field-generic-display-notruncate","",3,"fielddisplayclass","editable","fieldconfig","fieldid",4,"ngIf"],["class","slds-form-element__control slds-grid slds-grid--align-spread",3,"ngClass",4,"ngIf"],[3,"fieldname","fieldconfig"],["field-generic-display-notruncate","",3,"fielddisplayclass","editable","fieldconfig","fieldid"],[1,"slds-size--1-of-1","slds-grid","slds-grid--vertical-align-center","slds-grid--align-spread"],[1,"slds-grow","slds-truncate"],["class","slds-m-left--x-small",3,"tooltiptext",4,"ngIf"],[1,"slds-m-left--x-small",3,"tooltiptext"],[1,"slds-form-element__control","slds-grid","slds-grid--align-spread",3,"ngClass"],[1,"slds-grid","slds-size--1-of-1"],[4,"ngIf","ngIfElse"],["validating",""],[3,"fieldname"],["type","text",1,"slds-input",3,"ngModel","ngModelChange"],["focus",""],[1,"slds-col_bump-left","slds-grid","slds-grid--vertical-align-center"],[1,"slds-button","slds-button--neutral","slds-m-left--x-small",3,"disabled","click"],["label","LBL_CHECK"],["type","text","disabled","",1,"slds-input","slds-size--1-of-1",3,"value"]],template:function(e,t){1&e&&(r.YNc(0,Fo,1,2,"field-label",0),r.YNc(1,Eo,6,6,"field-generic-display",1),r.YNc(2,Do,6,4,"div",2)),2&e&&(r.Q6J("ngIf",t.displayLabel),r.xp6(1),r.Q6J("ngIf",!t.isEditMode()),r.xp6(1),r.Q6J("ngIf",t.isEditable()&&t.isEditMode()))},dependencies:[i.mk,i.O5,n.Fj,n.JJ,n.On,X._,No.S,u.q,C.D,I.a],encapsulation:2}),fieldVat})();var Ro=s(2067);let Bo=(()=>{class fieldBarcodeRenderer{constructor(e,t){this.metadata=e,this.libloader=t,this.code="",this.fieldId="",this.libloader.loadLib("js-barcode").subscribe((e=>{JsBarcode("#"+this.fieldId,this.code,{width:1,height:15,displayValue:!1})}))}ngOnChanges(){if(!this.metadata.isLibLoaded("js-barcode"))return!1;document.getElementById(this.fieldId)&&JsBarcode("#"+this.fieldId,this.code,{width:1,height:15,displayValue:!1})}}return fieldBarcodeRenderer.ɵfac=function(e){return new(e||fieldBarcodeRenderer)(r.Y36(c.Pu),r.Y36(Ro.$))},fieldBarcodeRenderer.ɵcmp=r.Xpm({type:fieldBarcodeRenderer,selectors:[["field-barcode-renderer"]],inputs:{code:"code",fieldId:"fieldId"},features:[r.TTD],decls:1,vars:1,consts:[[3,"id"]],template:function(e,t){1&e&&(r.O4$(),r._UZ(0,"svg",0)),2&e&&r.Q6J("id",t.fieldId)},encapsulation:2}),fieldBarcodeRenderer})();function Go(e,t){if(1&e&&r._UZ(0,"field-label",8),2&e){const e=r.oxw();r.Q6J("fieldname",e.fieldname)("fieldconfig",e.fieldconfig)}}function Po(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"input",9),r.NdJ("ngModelChange",(function(t){r.CHM(e);const s=r.oxw();return r.KtG(s.value=t)})),r.qZA()}if(2&e){const e=r.oxw();r.Q6J("ngModel",e.value)}}function Ho(e,t){if(1&e&&(r.TgZ(0,"div",10),r._uU(1),r.qZA()),2&e){const e=r.oxw();r.xp6(1),r.Oqu(e.value)}}let zo=(()=>{class fieldBarcode extends d.O{constructor(e,t,s,i,n){super(e,t,s,i,n),this.model=e,this.view=t,this.language=s,this.metadata=i,this.router=n}isEditMode(){return this.view.isEditMode()&&this.isEditable()}isEditable(){return this.view.isEditable&&!this.fieldconfig.readonly}}return fieldBarcode.ɵfac=function(e){return new(e||fieldBarcode)(r.Y36(Z.o),r.Y36(A.e),r.Y36(x.d),r.Y36(c.Pu),r.Y36(k.F0))},fieldBarcode.ɵcmp=r.Xpm({type:fieldBarcode,selectors:[["field-barcode"]],features:[r.qOj],decls:8,vars:5,consts:[[3,"fieldname","fieldconfig",4,"ngIf"],[1,"slds-form-element__control","slds-p-top--xx-small"],[1,"slds-grid","slds-grid--align-spread","slds-grid_vertical-align-center"],[1,"slds-size--1-of-2"],["class","slds-input","type","text",3,"ngModel","ngModelChange",4,"ngIf"],["class","slds-truncate",4,"ngIf"],[1,"slds-size--1-of-2","slds-text-align--right"],[3,"code","fieldId"],[3,"fieldname","fieldconfig"],["type","text",1,"slds-input",3,"ngModel","ngModelChange"],[1,"slds-truncate"]],template:function(e,t){1&e&&(r.YNc(0,Go,1,2,"field-label",0),r.TgZ(1,"div",1)(2,"div",2)(3,"div",3),r.YNc(4,Po,1,1,"input",4),r.YNc(5,Ho,2,1,"div",5),r.qZA(),r.TgZ(6,"div",6),r._UZ(7,"field-barcode-renderer",7),r.qZA()()()),2&e&&(r.Q6J("ngIf",t.displayLabel),r.xp6(4),r.Q6J("ngIf",t.isEditMode()),r.xp6(1),r.Q6J("ngIf",!t.isEditMode()),r.xp6(2),r.Q6J("code",t.value)("fieldId","id_"+t.fieldid))},dependencies:[i.O5,n.Fj,n.JJ,n.On,u.q,Bo],encapsulation:2}),fieldBarcode})();function Vo(e,t){if(1&e&&r._UZ(0,"field-label",3),2&e){const e=r.oxw();r.Q6J("fieldname",e.fieldname)("fieldconfig",e.fieldconfig)}}function Ko(e,t){1&e&&r._UZ(0,"system-stencil")}function $o(e,t){if(1&e&&r._UZ(0,"system-utility-icon",13),2&e){const e=r.oxw(4);r.Q6J("icon",e.ratingIcon)("size","x-small")}}function Xo(e,t){if(1&e&&(r.TgZ(0,"span"),r._uU(1),r.qZA()),2&e){const e=r.oxw(4);r.xp6(1),r.hij(" (",e.value,")")}}function Wo(e,t){if(1&e&&(r.TgZ(0,"div",10),r.YNc(1,$o,1,2,"system-utility-icon",11),r.YNc(2,Xo,2,1,"span",12),r.qZA()),2&e){const e=r.oxw(3);r.xp6(1),r.Q6J("ngIf",e.value),r.xp6(1),r.Q6J("ngIf",e.value)}}function ea(e,t){if(1&e&&(r.TgZ(0,"span"),r._uU(1),r.qZA()),2&e){const e=r.oxw(4);r.xp6(1),r.hij(" (",e.value,")")}}function ta(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"div",10)(1,"a",14),r.NdJ("click",(function(){r.CHM(e);const t=r.oxw(3);return r.KtG(t.goRecord())})),r._UZ(2,"system-utility-icon",13),r.YNc(3,ea,2,1,"span",12),r.qZA()()}if(2&e){const e=r.oxw(3);r.xp6(2),r.Q6J("icon",e.ratingIcon)("size","x-small"),r.xp6(1),r.Q6J("ngIf",e.value)}}function sa(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"button",15),r.NdJ("click",(function(){r.CHM(e);const t=r.oxw(3);return r.KtG(t.setEditMode())})),r._UZ(1,"system-button-icon",16),r.qZA()}2&e&&(r.xp6(1),r.Q6J("icon","edit"))}function ia(e,t){if(1&e&&(r.TgZ(0,"div",7),r.YNc(1,Wo,3,2,"div",8),r.YNc(2,ta,4,3,"div",8),r.YNc(3,sa,2,1,"button",9),r.qZA()),2&e){const e=r.oxw(2);r.xp6(1),r.Q6J("ngIf",!e.displayLink()),r.xp6(1),r.Q6J("ngIf",e.displayLink()),r.xp6(1),r.Q6J("ngIf",e.isEditable())}}function na(e,t){if(1&e&&(r.TgZ(0,"div",4),r.YNc(1,Ko,1,0,"system-stencil",5),r.YNc(2,ia,4,3,"ng-template",null,6,r.W1O),r.qZA()),2&e){const e=r.MAs(3),t=r.oxw();r.Q6J("ngClass",t.fielddisplayclass),r.xp6(1),r.Q6J("ngIf",t.model.isLoading)("ngIfElse",e)}}function la(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"div",22)(1,"div",23),r.NdJ("click",(function(){const t=r.CHM(e).$implicit,s=r.oxw(2);return r.KtG(s.setRatingValue(t))})),r._UZ(2,"input",24),r.TgZ(3,"label",25),r._UZ(4,"span",26),r.qZA()()()}if(2&e){const e=t.$implicit,s=r.oxw(2);r.xp6(2),r.Q6J("checked",e==s.value),r.xp6(1),r.uIk("for",s.fieldid+e)}}function oa(e,t){if(1&e&&(r.TgZ(0,"div",17)(1,"div",18),r._UZ(2,"system-utility-icon",19),r.YNc(3,la,5,2,"div",20),r._UZ(4,"system-utility-icon",13),r.qZA(),r._UZ(5,"field-messages",21),r.qZA()),2&e){const e=r.oxw();r.Q6J("ngClass",e.css_classes),r.xp6(2),r.Q6J("icon","sentiment_negative")("size","xx-small"),r.xp6(1),r.Q6J("ngForOf",e.options),r.xp6(1),r.Q6J("icon","smiley_and_people")("size","xx-small"),r.xp6(1),r.Q6J("fieldname",e.fieldname)}}let aa=(()=>{class fieldRating extends d.O{constructor(e,t,s,i,n){super(e,t,s,i,n),this.model=e,this.view=t,this.language=s,this.metadata=i,this.router=n,this.options=["1","2","3","4","5"]}setRatingValue(e){this.value==e?this.value="":this.value=e}get ratingIcon(){return 3==parseInt(this.value,10)?"sentiment_neutral":parseInt(this.value,10)>3?"smiley_and_people":parseInt(this.value,10)<3?"sentiment_negative":void 0}}return fieldRating.ɵfac=function(e){return new(e||fieldRating)(r.Y36(Z.o),r.Y36(A.e),r.Y36(x.d),r.Y36(c.Pu),r.Y36(k.F0))},fieldRating.ɵcmp=r.Xpm({type:fieldRating,selectors:[["field-rating"]],features:[r.qOj],decls:3,vars:3,consts:[[3,"fieldname","fieldconfig",4,"ngIf"],[3,"ngClass",4,"ngIf"],["class","slds-form-element__control slds-grid slds-grid--align-spread slds-p-around--xx-small",3,"ngClass",4,"ngIf"],[3,"fieldname","fieldconfig"],[3,"ngClass"],[4,"ngIf","ngIfElse"],["displaycontent",""],[1,"slds-grid","slds-grid--vertical-align-center","slds-grid--align-spread"],["class","slds-truncate",4,"ngIf"],["style","float: right","class","slds-button slds-button--icon slds-m-left--xx-small",3,"click",4,"ngIf"],[1,"slds-truncate"],[3,"icon","size",4,"ngIf"],[4,"ngIf"],[3,"icon","size"],["href","javascript:void(0);",3,"click"],[1,"slds-button","slds-button--icon","slds-m-left--xx-small",2,"float","right",3,"click"],[3,"icon"],[1,"slds-form-element__control","slds-grid","slds-grid--align-spread","slds-p-around--xx-small",3,"ngClass"],[1,"slds-grid","slds-grid--vertical-align-center"],[1,"slds-p-right--x-small",3,"icon","size"],["class","slds-form-element__control",4,"ngFor","ngForOf"],[3,"fieldname"],[1,"slds-form-element__control"],[1,"slds-radio",3,"click"],["type","radio","id","fieldid + option",3,"checked"],[1,"slds-radio__label"],[1,"slds-radio_faux"]],template:function(e,t){1&e&&(r.YNc(0,Vo,1,2,"field-label",0),r.YNc(1,na,4,3,"div",1),r.YNc(2,oa,6,7,"div",2)),2&e&&(r.Q6J("ngIf",t.displayLabel),r.xp6(1),r.Q6J("ngIf",!t.isEditMode()),r.xp6(1),r.Q6J("ngIf",t.isEditable()&&t.isEditMode()))},dependencies:[i.mk,i.sg,i.O5,w.J,Ve.B,M.r,u.q,I.a],encapsulation:2}),fieldRating})();var da=s(3026),ra=s(6930),ca=s(8016);const ua=["popover"];function ma(e,t){1&e&&r._UZ(0,"system-spinner")}function ha(e,t){if(1&e&&(r.TgZ(0,"div",14)(1,"dl")(2,"dt"),r._UZ(3,"field-label",15),r.qZA(),r.TgZ(4,"dd"),r._UZ(5,"field-container",16),r.qZA()()()),2&e){const e=t.$implicit;r.xp6(3),r.Q6J("fieldname",e.field)("fieldconfig",e.fieldconfig),r.xp6(2),r.Q6J("field",e.field)("fieldconfig",e.fieldconfig)("fielddisplayclass","slds-truncate")}}let ga=(()=>{class fieldModelFooterPopover{constructor(e,t,s){this.model=e,this.view=t,this.metadata=s,this.popovermodule="",this.popoverid="",this.popoverside="right",this.styles=null,this.mouseover=!1,this.hidePopoverTimeout={},this.parentElementRef=null,this.self=null,this.modelIsLoading=!1,this.fields=[]}goDetail(){this.model.goDetail()}onMouseOver(){this.mouseover=!0,this.hidePopoverTimeout&&window.clearTimeout(this.hidePopoverTimeout)}onMouseOut(){this.mouseover=!1,this.self.destroy()}get popoverStyle(){let e=this.parentElementRef.nativeElement.getBoundingClientRect(),t=this.popover.element.nativeElement.getBoundingClientRect();return e.left<t.width?this.popoverside="right":this.popoverside="left",{top:e.top+(e.height-t.height)/2+"px",left:e.left<t.width?e.left+100+"px":e.left-t.width-15+"px"}}ngOnInit(){let e=this.metadata.getComponentConfig("fieldModelFooterPopover",this.popovermodule);e.fieldset?this.fields=this.metadata.getFieldSetFields(e.fieldset):(e=this.metadata.getComponentConfig("ObjectPageHeaderDetails",this.popovermodule),e.fieldset&&(this.fields=this.metadata.getFieldSetFields(e.fieldset))),this.modelIsLoading=!0,this.model.module=this.popovermodule,this.model.id=this.popoverid,this.model.getData().subscribe((()=>{this.modelIsLoading=!1})),this.styles=this.popoverStyle}getNubbinClass(){return"left"==this.popoverside?"slds-nubbin--right":"slds-nubbin--left"}closePopover(e=!1){e?this.self.destroy():this.hidePopoverTimeout=window.setTimeout((()=>this.self.destroy()),500)}}return fieldModelFooterPopover.ɵfac=function(e){return new(e||fieldModelFooterPopover)(r.Y36(Z.o),r.Y36(A.e),r.Y36(c.Pu))},fieldModelFooterPopover.ɵcmp=r.Xpm({type:fieldModelFooterPopover,selectors:[["field-model-footer-popover"]],viewQuery:function(e,t){if(1&e&&r.Gf(ua,7,r.s_b),2&e){let e;r.iGM(e=r.CRH())&&(t.popover=e.first)}},features:[r._Bn([Z.o,A.e])],decls:15,vars:6,consts:[["role","dialog",1,"slds-popover","slds-popover_large","slds-popover--panel","slds-is-fixed",3,"ngStyle","ngClass","mouseenter","mouseleave"],[1,"slds-button","slds-button_icon","slds-button_icon","slds-button_icon-small","slds-float_right","slds-popover__close",3,"click"],["icon","close"],[1,"slds-popover__header"],["popover",""],[1,"slds-media","slds-m-bottom--small","slds-media--center"],[1,"slds-media__figure"],[3,"module"],[1,"slds-media__body","slds-truncate"],[4,"ngIf"],[1,"slds-text-heading--medium","slds-hyphenate"],["href","javascript:void(0);",3,"click"],[1,"slds-grid","slds-wrap","slds-grid--pull-padded"],["class","slds-p-horizontal--small slds-size--1-of-2 slds-p-bottom--x-small",4,"ngFor","ngForOf"],[1,"slds-p-horizontal--small","slds-size--1-of-2","slds-p-bottom--x-small"],[3,"fieldname","fieldconfig"],[3,"field","fieldconfig","fielddisplayclass"]],template:function(e,t){1&e&&(r.TgZ(0,"div",0),r.NdJ("mouseenter",(function(){return t.onMouseOver()}))("mouseleave",(function(){return t.onMouseOut()})),r.TgZ(1,"button",1),r.NdJ("click",(function(){return t.closePopover(!0)})),r._UZ(2,"system-button-icon",2),r.qZA(),r.TgZ(3,"div",3,4)(5,"div",5)(6,"div",6),r._UZ(7,"system-icon",7),r.qZA(),r.TgZ(8,"div",8),r.YNc(9,ma,1,0,"system-spinner",9),r.TgZ(10,"p",10)(11,"a",11),r.NdJ("click",(function(){return t.goDetail()})),r._uU(12),r.qZA()()()(),r.TgZ(13,"div",12),r.YNc(14,ha,6,5,"div",13),r.qZA()()()),2&e&&(r.Q6J("ngStyle",t.popoverStyle)("ngClass",t.getNubbinClass()),r.xp6(7),r.Q6J("module",t.popovermodule),r.xp6(2),r.Q6J("ngIf",t.modelIsLoading),r.xp6(3),r.Oqu(t.model.data.summary_text),r.xp6(2),r.Q6J("ngForOf",t.fields))},dependencies:[i.mk,i.sg,i.O5,i.PC,w.J,rs.f,mo.W,u.q,m.j],encapsulation:2}),fieldModelFooterPopover})();function pa(e,t){1&e&&r._UZ(0,"system-stencil")}function fa(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"button",8),r.NdJ("click",(function(){r.CHM(e);const t=r.oxw(3);return r.KtG(t.setEditMode())})),r._UZ(1,"system-button-icon",9),r.qZA()}2&e&&(r.xp6(1),r.Q6J("icon","edit"))}function ba(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"span")(1,"a",6),r.NdJ("click",(function(){r.CHM(e);const t=r.oxw(2);return r.KtG(t.goToDetail())})),r._uU(2),r.qZA()(),r.YNc(3,fa,2,1,"button",7)}if(2&e){const e=r.oxw(2);r.xp6(1),r.Q6J("module",e.module)("id",e.id),r.xp6(1),r.Oqu(e.value),r.xp6(1),r.Q6J("ngIf",e.isEditable())}}function _a(e,t){if(1&e&&(r.TgZ(0,"div",3),r.YNc(1,pa,1,0,"system-stencil",4),r.YNc(2,ba,4,4,"ng-template",null,5,r.W1O),r.qZA()),2&e){const e=r.MAs(3),t=r.oxw();r.Q6J("ngClass",t.fielddisplayclass),r.xp6(1),r.Q6J("ngIf",t.model.isLoading)("ngIfElse",e)}}function ya(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"div",16)(1,"div",17)(2,"span",18)(3,"span",19),r._UZ(4,"system-icon",20),r.qZA(),r.TgZ(5,"span",21),r._uU(6),r.qZA(),r.TgZ(7,"button",22),r.NdJ("click",(function(){r.CHM(e);const t=r.oxw(2);return r.KtG(t.clear())})),r._UZ(8,"system-button-icon",9),r.qZA()()()()}if(2&e){const e=r.oxw(2);r.xp6(4),r.Q6J("module",e.module)("size","small"),r.xp6(2),r.Oqu(e.item_summary_text),r.xp6(2),r.Q6J("icon","close")}}function va(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"div",23)(1,"div",24),r._UZ(2,"system-utility-icon",25),r.TgZ(3,"input",26),r.NdJ("ngModelChange",(function(t){r.CHM(e);const s=r.oxw(2);return r.KtG(s.search_term=t)}))("blur",(function(){r.CHM(e);const t=r.oxw(2);return r.KtG(t.closePopups())}))("focus",(function(){r.CHM(e);const t=r.oxw(2);return r.KtG(t.onFocus())})),r.qZA()()()}if(2&e){const e=r.oxw(2);r.Q6J("ngClass",e.getFieldClass()),r.xp6(2),r.Q6J("icon","search")("addclasses","slds-input__icon"),r.xp6(1),r.Q6J("ngModel",e.search_term)("placeholder","Search "+e.language.getModuleName(e.module))}}function xa(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"field-lookup-recent",30),r.NdJ("selectedObject",(function(t){r.CHM(e);const s=r.oxw(3);return r.KtG(s.selected_item=t)})),r.qZA()}if(2&e){const e=r.oxw(3);r.Q6J("module",e.module)}}function Za(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"field-lookup-search",31),r.NdJ("searchtermChange",(function(t){r.CHM(e);const s=r.oxw(3);return r.KtG(s.search_term=t)}))("selectedObject",(function(t){r.CHM(e);const s=r.oxw(3);return r.KtG(s.selected_item=t)})),r.qZA()}if(2&e){const e=r.oxw(3);r.Q6J("module",e.module)("searchterm",e.search_term)}}function wa(e,t){if(1&e&&(r.TgZ(0,"div",27),r.YNc(1,xa,1,1,"field-lookup-recent",28),r.YNc(2,Za,1,2,"field-lookup-search",29),r.qZA()),2&e){const e=r.oxw(2);r.Q6J("ngStyle",e.getSearchStyle()),r.xp6(1),r.Q6J("ngIf",!e.search_term),r.xp6(1),r.Q6J("ngIf",e.search_term)}}function Ta(e,t){if(1&e&&(r.TgZ(0,"div",10)(1,"div",11),r.YNc(2,ya,9,4,"div",12),r.YNc(3,va,4,5,"div",13),r.qZA(),r.YNc(4,wa,3,3,"div",14),r._UZ(5,"field-messages",15),r.qZA()),2&e){const e=r.oxw();r.Q6J("ngClass",e.getFieldClass()),r.xp6(2),r.Q6J("ngIf",e.id),r.xp6(1),r.Q6J("ngIf",!e.id),r.xp6(1),r.Q6J("ngIf",e.show_search_results),r.xp6(1),r.Q6J("fieldname",e.fieldname)}}let Ca=(()=>{class FieldModuleLookupComponent extends d.O{constructor(e,t,s,i,n,l,o,a){super(e,t,i,n,l),this.model=e,this.view=t,this.popup=s,this.language=i,this.metadata=n,this.router=l,this.elementRef=o,this.renderer=a,this.relateIdField="",this.relateNameField="",this.module="",this._selected_item=null,this.show_search_results=!1,this.search_term="",this.select=new r.vpe,this.popup.closePopup$.subscribe((()=>this.closePopups()))}ngOnInit(){let e=this.metadata.getFieldDefs(this.model.module,this.fieldname);this.relateIdField=e.id_name,this.relateNameField=this.fieldname,this.module||(this.module=e.module)}onClick(e){this.elementRef.nativeElement.contains(e.target)||this.closePopups()}closePopups(){this.clickListener(),this.model.getField(this.relateIdField)&&(this.search_term=""),this.show_search_results=!1}onFocus(){this.show_search_results=!0,this.clickListener=this.renderer.listen("document","click",(e=>this.onClick(e)))}set selected_item(e){e?(this._selected_item=e.data,this.relateNameField&&this.model.setField(this.relateNameField,e.text),this.relateIdField&&this.model.setField(this.relateIdField,e.id)):(this._selected_item=null,this.relateIdField&&this.model.setField(this.relateIdField,""),this.relateNameField&&this.model.setField(this.relateNameField,"")),this.select.emit(this.selected_item)}get selected_item(){return this._selected_item}get id(){return this.selected_item&&this.selected_item.id?this.selected_item.id:this.relateIdField?this.model.getField(this.relateIdField):""}get item_summary_text(){return this.selected_item&&this.selected_item.summary_text?this.selected_item.summary_text:this.relateNameField?this.model.getField(this.relateNameField):""}goToDetail(){this.router.navigate(["/module/"+this.module+"/"+this.selected_item.id])}getSearchStyle(){if(this.show_search_results){return{width:this.elementRef.nativeElement.getBoundingClientRect().width+"px",display:"block"}}}clear(){this.search_term="",this.selected_item=null}}return FieldModuleLookupComponent.ɵfac=function(e){return new(e||FieldModuleLookupComponent)(r.Y36(Z.o),r.Y36(A.e),r.Y36(ks.g),r.Y36(x.d),r.Y36(c.Pu),r.Y36(k.F0),r.Y36(r.SBq),r.Y36(r.Qsj))},FieldModuleLookupComponent.ɵcmp=r.Xpm({type:FieldModuleLookupComponent,selectors:[["field-module-lookup"]],inputs:{module:"module"},outputs:{select:"select"},features:[r._Bn([ks.g]),r.qOj],decls:3,vars:2,consts:[[1,"slds-truncate"],[3,"ngClass",4,"ngIf"],["class","slds-form-element__control slds-m-vertical--xx-small",3,"ngClass",4,"ngIf"],[3,"ngClass"],[4,"ngIf","ngIfElse"],["displaycontent",""],["href","javascript:void(0);","system-model-popover","",3,"module","id","click"],["style","float: right","class","slds-button slds-button--icon",3,"click",4,"ngIf"],[1,"slds-button","slds-button--icon",2,"float","right",3,"click"],[3,"icon"],[1,"slds-form-element__control","slds-m-vertical--xx-small",3,"ngClass"],[1,"slds-form-element","slds-lookup"],["class","slds-form-element__control",4,"ngIf"],["class","slds-form-element__control slds-grid slds-box--border",3,"ngClass",4,"ngIf"],["class","slds-lookup__menu",3,"ngStyle",4,"ngIf"],[3,"fieldname"],[1,"slds-form-element__control"],[1,"slds-pill_container"],[1,"slds-pill","slds-size--1-of-1"],[1,"slds-icon_container","slds-icon-standard-account","slds-pill__icon_container"],[3,"module","size"],[1,"slds-pill__label"],[1,"slds-button","slds-button--icon","slds-pill__remove",3,"click"],[1,"slds-form-element__control","slds-grid","slds-box--border",3,"ngClass"],[1,"slds-input-has-icon","slds-input-has-icon--right","slds-grow"],[3,"icon","addclasses"],["type","search","role","combobox",1,"slds-lookup__search-input","slds-input--bare",3,"ngModel","placeholder","ngModelChange","blur","focus"],[1,"slds-lookup__menu",3,"ngStyle"],[3,"module","selectedObject",4,"ngIf"],[3,"module","searchterm","searchtermChange","selectedObject",4,"ngIf"],[3,"module","selectedObject"],[3,"module","searchterm","searchtermChange","selectedObject"]],template:function(e,t){1&e&&(r.TgZ(0,"div",0),r.YNc(1,_a,4,3,"div",1),r.YNc(2,Ta,6,5,"div",2),r.qZA()),2&e&&(r.xp6(1),r.Q6J("ngIf",!t.isEditMode()),r.xp6(1),r.Q6J("ngIf",t.isEditable()&&t.isEditMode()))},dependencies:[i.mk,i.O5,i.PC,n.Fj,n.JJ,n.On,w.J,rs.f,Ve.B,M.r,us.g,ms.P,hs.$,I.a],encapsulation:2}),FieldModuleLookupComponent})();const Aa=["canvas"];function ka(e,t){if(1&e&&r._UZ(0,"field-label",12),2&e){const e=r.oxw();r.Q6J("fieldname",e.fieldname)("fieldconfig",e.fieldconfig)}}function La(e,t){if(1&e&&r._UZ(0,"img",17),2&e){const e=r.oxw(2);r.Q6J("src",e.src,r.LSH)}}function Ma(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"button",18),r.NdJ("click",(function(){r.CHM(e);const t=r.oxw(2);return r.KtG(t.setEditMode())})),r._UZ(1,"system-button-icon",9),r.qZA()}2&e&&(r.xp6(1),r.Q6J("icon","edit"))}const Sa=function(e){return{width:e}};function Ia(e,t){if(1&e&&(r.TgZ(0,"div")(1,"div",13),r.YNc(2,La,1,1,"img",14),r.TgZ(3,"div",15),r.YNc(4,Ma,2,1,"button",16),r.qZA()()()),2&e){const e=r.oxw();r.xp6(1),r.Q6J("ngStyle",r.VKq(3,Sa,e.signature_width+"px")),r.xp6(1),r.Q6J("ngIf",e.value),r.xp6(2),r.Q6J("ngIf",e.isEditable())}}function Oa(e,t){if(1&e&&(r.TgZ(0,"div",19),r._uU(1),r.qZA()),2&e){const e=r.oxw();r.xp6(1),r.hij(" ",e.model.data[e.display_name_field]," ")}}const Ja=function(e){return{"slds-hide":e}};let Na=(()=>{class FieldSignatureComponent extends d.O{constructor(e,t,s,i,n,l){super(e,t,s,i,l),this.model=e,this.view=t,this.language=s,this.metadata=i,this.libloader=n,this.router=l,this.signature_height=200,this.signature_width=400}ngAfterViewInit(){this.config&&(this.config.signature_width>0&&(this.signature_width=this.config.signature_width),this.config.signature_height>0&&(this.signature_height=this.config.signature_height),this.display_name_field=this.config.display_name_field),this.libloader.loadLib("signature_pad").subscribe((e=>{this.pad=new SignaturePad(this.canvas.nativeElement,{backgroundColor:"rgb(255, 255, 255)"}),this.model.isLoading||!this.model.id?this.model.data$.subscribe((e=>{this.pad.fromDataURL(this.src)})):this.pad.fromDataURL(this.src)}))}get config(){return this.fieldconfig}get src(){return this.value?"data:image/jpeg;base64,"+this.value:""}undo(){let e=this.pad.toData();e&&(e.pop(),this.pad.fromData(e),this.convert())}clear(){this.pad.clear(),this.convert()}convert(){let e=this.pad.toDataURL("image/jpeg"),t=e.split("base64,");this.pad.isEmpty()?this.value="":2!=t.length?(console.warn("Failed to parse base64 code from data:",e),this.value=""):(e=t[1],this.value=e)}}return FieldSignatureComponent.ɵfac=function(e){return new(e||FieldSignatureComponent)(r.Y36(Z.o),r.Y36(A.e),r.Y36(x.d),r.Y36(c.Pu),r.Y36(Ro.$),r.Y36(k.F0))},FieldSignatureComponent.ɵcmp=r.Xpm({type:FieldSignatureComponent,selectors:[["field-signature"]],viewQuery:function(e,t){if(1&e&&r.Gf(Aa,7),2&e){let e;r.iGM(e=r.CRH())&&(t.canvas=e.first)}},features:[r.qOj],decls:13,vars:13,consts:[[3,"fieldname","fieldconfig",4,"ngIf"],[4,"ngIf"],[3,"ngClass"],[3,"ngStyle"],[1,"slds-float_left"],[2,"border","1px solid",3,"width","height","mouseup","touchend"],["canvas",""],[2,"position","relative","bottom","3px","right","3px"],["title","undo",1,"slds-button","slds-button--icon",3,"click"],[3,"icon"],["title","clear",1,"slds-button","slds-button--icon",3,"click"],["class","slds-text-align--center",4,"ngIf"],[3,"fieldname","fieldconfig"],[1,"slds-float_left",3,"ngStyle"],[3,"src",4,"ngIf"],[2,"position","absolute","top","1px","right","1px"],["class","slds-button slds-button--icon",3,"click",4,"ngIf"],[3,"src"],[1,"slds-button","slds-button--icon",3,"click"],[1,"slds-text-align--center"]],template:function(e,t){1&e&&(r.YNc(0,ka,1,2,"field-label",0),r.YNc(1,Ia,5,5,"div",1),r.TgZ(2,"div",2)(3,"div",3)(4,"div",4)(5,"canvas",5,6),r.NdJ("mouseup",(function(){return t.convert()}))("touchend",(function(){return t.convert()})),r.qZA(),r.TgZ(7,"div",7)(8,"button",8),r.NdJ("click",(function(){return t.undo()})),r._UZ(9,"system-button-icon",9),r.qZA(),r.TgZ(10,"button",10),r.NdJ("click",(function(){return t.clear()})),r._UZ(11,"system-button-icon",9),r.qZA()()(),r.YNc(12,Oa,2,1,"div",11),r.qZA()()),2&e&&(r.Q6J("ngIf",t.displayLabel),r.xp6(1),r.Q6J("ngIf",!t.isEditMode()),r.xp6(1),r.Q6J("ngClass",r.VKq(9,Ja,!t.isEditMode())),r.xp6(1),r.Q6J("ngStyle",r.VKq(11,Sa,t.signature_width+"px")),r.xp6(2),r.Q6J("width",t.signature_width)("height",t.signature_height),r.xp6(4),r.Q6J("icon","back"),r.xp6(2),r.Q6J("icon","close"),r.xp6(1),r.Q6J("ngIf",t.display_name_field))},dependencies:[i.mk,i.O5,i.PC,w.J,u.q],encapsulation:2}),FieldSignatureComponent})();var Fa=s(7340),qa=s(4730);const Ea=function(e){return{"slds-theme--shade":e}};function Ya(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"div",7)(1,"div",8),r.NdJ("mouseenter",(function(){const t=r.CHM(e).$implicit,s=r.oxw(2);return r.KtG(s.select(0,t))}))("click",(function(){const t=r.CHM(e).$implicit,s=r.oxw(2);return r.KtG(s.choose(0,t))})),r.TgZ(2,"span",9),r._UZ(3,"system-label",10),r.qZA()()()}if(2&e){const e=t.$implicit,s=r.oxw(2);let i;r.Q6J("ngClass",r.VKq(4,Ea,s.isCategorySelected(0,e))),r.xp6(1),r.Q6J("title",null!==(i=e.node_description)&&void 0!==i?i:e.node_name),r.xp6(1),r.Q6J("ngStyle",s.nodeStyle(e)),r.xp6(1),r.Q6J("label",e.node_name)}}function Qa(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"div",7)(1,"div",8),r.NdJ("mouseenter",(function(){const t=r.CHM(e).$implicit,s=r.oxw(2);return r.KtG(s.select(1,t))}))("click",(function(){const t=r.CHM(e).$implicit,s=r.oxw(2);return r.KtG(s.choose(1,t))})),r.TgZ(2,"span",9),r._UZ(3,"system-label",10),r.qZA()()()}if(2&e){const e=t.$implicit,s=r.oxw(2);let i;r.Q6J("ngClass",r.VKq(4,Ea,s.isCategorySelected(1,e))),r.xp6(1),r.Q6J("title",null!==(i=e.node_description)&&void 0!==i?i:e.node_name),r.xp6(1),r.Q6J("ngStyle",s.nodeStyle(e)),r.xp6(1),r.Q6J("label",e.node_name)}}function Ua(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"div",7)(1,"div",8),r.NdJ("mouseenter",(function(){const t=r.CHM(e).$implicit,s=r.oxw(2);return r.KtG(s.select(2,t))}))("click",(function(){const t=r.CHM(e).$implicit,s=r.oxw(2);return r.KtG(s.choose(2,t))})),r.TgZ(2,"span",9),r._UZ(3,"system-label",10),r.qZA()()()}if(2&e){const e=t.$implicit,s=r.oxw(2);let i;r.Q6J("ngClass",r.VKq(4,Ea,s.isCategorySelected(2,e))),r.xp6(1),r.Q6J("title",null!==(i=e.node_description)&&void 0!==i?i:e.node_name),r.xp6(1),r.Q6J("ngStyle",s.nodeStyle(e)),r.xp6(1),r.Q6J("label",e.node_name)}}function Da(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"div",7)(1,"div",8),r.NdJ("mouseenter",(function(){const t=r.CHM(e).$implicit,s=r.oxw(2);return r.KtG(s.select(3,t))}))("click",(function(){const t=r.CHM(e).$implicit,s=r.oxw(2);return r.KtG(s.choose(3,t))})),r.TgZ(2,"span",9),r._UZ(3,"system-label",10),r.qZA()()()}if(2&e){const e=t.$implicit,s=r.oxw(2);let i;r.Q6J("ngClass",r.VKq(4,Ea,s.isCategorySelected(3,e))),r.xp6(1),r.Q6J("title",null!==(i=e.node_description)&&void 0!==i?i:e.node_name),r.xp6(1),r.Q6J("ngStyle",s.nodeStyle(e)),r.xp6(1),r.Q6J("label",e.node_name)}}function ja(e,t){if(1&e&&(r.TgZ(0,"div",2)(1,"div",3)(2,"div",4),r.YNc(3,Ya,4,6,"div",5),r.qZA(),r.TgZ(4,"div",4),r.YNc(5,Qa,4,6,"div",5),r.qZA(),r.TgZ(6,"div",4),r.YNc(7,Ua,4,6,"div",5),r.qZA(),r.TgZ(8,"div",6),r.YNc(9,Da,4,6,"div",5),r.qZA()()()),2&e){const e=r.oxw();r.xp6(1),r.Q6J("@treeanimation",e.shifttree)("ngStyle",e.boxStyle),r.xp6(2),r.Q6J("ngForOf",e.levelCategories(0))("ngForTrackBy",e.trackByFn),r.xp6(2),r.Q6J("ngForOf",e.levelCategories(1))("ngForTrackBy",e.trackByFn),r.xp6(2),r.Q6J("ngForOf",e.levelCategories(2))("ngForTrackBy",e.trackByFn),r.xp6(2),r.Q6J("ngForOf",e.levelCategories(3))("ngForTrackBy",e.trackByFn)}}function Ra(e,t){if(1&e&&(r.TgZ(0,"li",17),r._UZ(1,"system-label",10),r.qZA()),2&e){const e=t.$implicit;let s;r.Q6J("title",null!==(s=e.node_description)&&void 0!==s?s:e.node_name),r.xp6(1),r.Q6J("label",e.node_name)}}function Ba(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"div",14)(1,"ul",15),r.NdJ("click",(function(){const t=r.CHM(e).$implicit,s=r.oxw(2);return r.KtG(s.selectNode(t))})),r.YNc(2,Ra,2,2,"li",16),r.qZA()()}if(2&e){const e=t.$implicit;r.xp6(2),r.Q6J("ngForOf",e.levels)}}function Ga(e,t){1&e&&(r.TgZ(0,"div",18)(1,"system-illustration-no-records"),r._UZ(2,"system-label",19),r.qZA()())}function Pa(e,t){if(1&e&&(r.TgZ(0,"div",11),r.YNc(1,Ba,3,1,"div",12),r.YNc(2,Ga,3,0,"div",13),r.qZA()),2&e){const e=r.oxw();r.xp6(1),r.Q6J("ngForOf",e.getMatchedNodes())("ngForTrackBy",e.trackByCatId),r.xp6(1),r.Q6J("ngIf",0==e.getMatchedNodes().length)}}function Ha(e,t){if(1&e&&(r.TgZ(0,"li",17),r._UZ(1,"system-label",10),r.qZA()),2&e){const e=t.$implicit;let s;r.Q6J("title",null!==(s=e.node_description)&&void 0!==s?s:e.node_name),r.xp6(1),r.Q6J("label",e.node_name)}}function za(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"div",14)(1,"ul",15),r.NdJ("click",(function(){const t=r.CHM(e).$implicit,s=r.oxw(2);return r.KtG(s.selectNode(t))})),r.YNc(2,Ha,2,2,"li",16),r.qZA()()}if(2&e){const e=t.$implicit;r.xp6(2),r.Q6J("ngForOf",e.levels)}}function Va(e,t){1&e&&(r.TgZ(0,"div",18)(1,"system-illustration-no-records"),r._UZ(2,"system-label",19),r.qZA()())}function Ka(e,t){if(1&e&&(r.TgZ(0,"div",11),r.YNc(1,za,3,1,"div",12),r.YNc(2,Va,3,0,"div",13),r.qZA()),2&e){const e=r.oxw();r.xp6(1),r.Q6J("ngForOf",e.getFavoriteNodes())("ngForTrackBy",e.trackByCatId),r.xp6(1),r.Q6J("ngIf",0==e.getFavoriteNodes().length)}}let $a=(()=>{class fieldCategoriesTree{constructor(e,t,s,i,n){this.model=e,this.backend=t,this.config=s,this.elementref=i,this.language=n,this.levels=[void 0,void 0,void 0,void 0],this.category=new r.vpe,this.loading=!0,this.categories=[],this.searchFavorites=!1}get shifttree(){return!!this.levels[1]&&this.has4Levels(this.levels[1])}has4Levels(e){for(let t of this.categories.filter((t=>t.parent_id==e)))if(this.categories.filter((e=>e.parent_id==t.id)).length>0)return!0;return!1}get boxStyle(){let e=this.elementref.nativeElement.getBoundingClientRect();return{height:window.innerHeight-e.top-30+"px"}}nodeStyle(e){return e.selectable?{cursor:"pointer","text-decoration":"underline"}:{cursor:"default"}}hasChildren(e){return this.categories.filter((t=>t.parent_id==e.id)).length>0}levelCategories(e){return 0===e?this.categories.filter((e=>!e.parent_id||""==e.parent_id)).sort(((e,t)=>parseFloat(e.node_key)>parseFloat(t.node_key)?1:-1)):this.levels[e-1]?this.categories.filter((t=>t.parent_id==this.levels[e-1])).sort(((e,t)=>parseFloat(e.node_key)>parseFloat(t.node_key)?1:-1)):[]}getMatchedNodes(){return this.buildSelectableCategories().filter((e=>this.matchTerms(e.levels.map((e=>e.node_name)).join(),this.searchTerm))).sort(((e,t)=>this.compareFullCategories(e.levels,t.levels)))}matchTerms(e,t){let s=t.split(" ").map((e=>e.trim()));for(let t of s)if(e.toLowerCase().indexOf(t.toLowerCase())<0)return!1;return!0}getFavoriteNodes(){let e=this.buildSelectableCategories(!0);return this.searchTerm?e.filter((e=>this.matchTerms(e.levels.map((e=>e.node_name)).join(),this.searchTerm))):e.sort(((e,t)=>this.compareFullCategories(e.levels,t.levels)))}buildSelectableCategories(e=!1){let t=[];for(let s of this.categories.filter((e=>e.selectable))){let i=this.buildFullCategories(s);(!0!==e||i.filter((e=>e.favorite)).length>0)&&t.push({levels:i,cat:s})}return t}buildFullCategories(e){let t=e,s=[{id:t.id,node_name:t.node_name,favorite:t.favorite,node_key:t.node_key}];for(;t.parent_id&&(t=this.categories.find((e=>e.id==t.parent_id)),t);)s.unshift({id:t.id,node_name:t.node_name,favorite:t.favorite,node_key:t.node_key});return s}compareFullCategories(e,t,s="node_name"){return e.map((e=>e.node_name)).join().localeCompare(t.map((e=>e.node_name)).join())}compareFullCategorylevels(e,t,s,i="node_key"){}compareNodes(e,t,s="node_key"){switch(s){case"node_name":return e.node_name.localeCompare(t.node_name);case"node_key":return e.node_key==t.node_key?0:parseFloat(e.node_key)>parseFloat(t.node_key)?1:-1}}select(e,t){for(this.levels[e]=t.id,e++;e<3;)this.levels[e]=void 0,e++}isCategorySelected(e,t){return this.levels[e]==t.id}choose(e,t){t.selectable&&(this.select(e,t),this.category.emit({levels:[...this.levels],category:t}),this.levels=[void 0,void 0,void 0,void 0])}selectNode(e){let t=[];for(let s of e.levels)t.push(s.id);this.category.emit({levels:[...t],category:e.cat}),this.searchTerm="",this.searchFavorites=!1}trackByFn(e,t){return t.id}trackByCatId(e,t){return t.cat.id}}return fieldCategoriesTree.ɵfac=function(e){return new(e||fieldCategoriesTree)(r.Y36(Z.o),r.Y36(H.y),r.Y36(K.C),r.Y36(r.SBq),r.Y36(x.d))},fieldCategoriesTree.ɵcmp=r.Xpm({type:fieldCategoriesTree,selectors:[["field-categories-tree"]],inputs:{categories:"categories",searchTerm:"searchTerm",searchFavorites:"searchFavorites"},outputs:{category:"category"},decls:3,vars:3,consts:[["style","overflow: hidden",4,"ngIf"],["class","slds-dropdown_length-10",4,"ngIf"],[2,"overflow","hidden"],[1,"slds-grid",3,"ngStyle"],[1,"slds-col","slds-size--1-of-3","slds-border--right","slds-height_full","slds-scrollable--y"],[3,"ngClass",4,"ngFor","ngForOf","ngForTrackBy"],[1,"slds-col","slds-size--1-of-3","slds-height_full","slds-scrollable--y"],[3,"ngClass"],[1,"slds-truncate","slds-p-around--xx-small",3,"title","mouseenter","click"],[3,"ngStyle"],[3,"label"],[1,"slds-dropdown_length-10"],["class","slds-truncate slds-p-around--xx-small","style","cursor: pointer",4,"ngFor","ngForOf","ngForTrackBy"],["class","slds-height_full slds-align--absolute-center slds-p-around--x-large",4,"ngIf"],[1,"slds-truncate","slds-p-around--xx-small",2,"cursor","pointer"],[1,"slds-list_horizontal","slds-has-dividers_left","slds-has-block-links",3,"click"],["class","slds-item",3,"title",4,"ngFor","ngForOf"],[1,"slds-item",3,"title"],[1,"slds-height_full","slds-align--absolute-center","slds-p-around--x-large"],["label","LBL_NO_RECORDS_FOUND"]],template:function(e,t){1&e&&(r.YNc(0,ja,10,10,"div",0),r.YNc(1,Pa,3,3,"div",1),r.YNc(2,Ka,3,3,"div",1)),2&e&&(r.Q6J("ngIf",!t.searchTerm&&!t.searchFavorites),r.xp6(1),r.Q6J("ngIf",t.searchTerm&&!t.searchFavorites),r.xp6(1),r.Q6J("ngIf",t.searchFavorites))},dependencies:[i.mk,i.sg,i.O5,i.PC,qa.C,X._],encapsulation:2,data:{animation:[(0,Fa.X$)("treeanimation",[(0,Fa.SB)("true",(0,Fa.oB)({"margin-left":"-34%","margin-right":"34%"})),(0,Fa.SB)("false",(0,Fa.oB)({"margin-left":"0px","margin-right":"0px"})),(0,Fa.eR)("true => false",[(0,Fa.jt)(".2s")]),(0,Fa.eR)("false => true",[(0,Fa.jt)(".2s")])])]}}),fieldCategoriesTree})();function Xa(e,t){if(1&e&&r._UZ(0,"field-label",3),2&e){const e=r.oxw();r.Q6J("fieldname",e.fieldname)("fieldconfig",e.fieldconfig)}}function Wa(e,t){if(1&e&&(r.TgZ(0,"div",7),r._uU(1),r.qZA()),2&e){const e=r.oxw(2);r.Q6J("title",e.display_value),r.xp6(1),r.Oqu(e.display_value)}}function ed(e,t){1&e&&r._UZ(0,"system-stencil")}function td(e,t){if(1&e&&(r.TgZ(0,"field-generic-display",4),r.YNc(1,Wa,2,2,"div",5),r.YNc(2,ed,1,0,"ng-template",null,6,r.W1O),r.qZA()),2&e){const e=r.MAs(3),t=r.oxw();r.Q6J("fielddisplayclass",t.fielddisplayclass)("fieldconfig",t.fieldconfig)("editable",t.isEditable()),r.xp6(1),r.Q6J("ngIf",t.categories.length>0)("ngIfElse",e)}}function sd(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"button",18),r.NdJ("click",(function(t){r.CHM(e);const s=r.oxw(3);return r.KtG(s.setFavorites(t))})),r._UZ(1,"system-button-icon",19),r.qZA()}if(2&e){const e=r.oxw(3);r.xp6(1),r.Q6J("addclasses",e.searchfavorites?"":"slds-icon-text-light")}}function id(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"div",15)(1,"input",16),r.NdJ("focus",(function(){r.CHM(e);const t=r.oxw(2);return r.KtG(t.openDropDown())}))("ngModelChange",(function(t){r.CHM(e);const s=r.oxw(2);return r.KtG(s.tempsearchterm=t)}))("keyup",(function(t){r.CHM(e);const s=r.oxw(2);return r.KtG(s.search(t))})),r.qZA(),r.YNc(2,sd,2,1,"button",17),r.qZA()}if(2&e){const e=r.oxw(2);r.xp6(1),r.s9C("placeholder",e.language.getLabel("LBL_SEARCH")),r.Q6J("disabled",0==e.categories.length)("ngModel",e.tempsearchterm),r.xp6(1),r.Q6J("ngIf",e.hasFavorites)}}function nd(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"div",15)(1,"div",20)(2,"span",21)(3,"span",22),r._uU(4),r.qZA(),r.TgZ(5,"button",23),r.NdJ("click",(function(){r.CHM(e);const t=r.oxw(2);return r.KtG(t.clearCategories())})),r._UZ(6,"system-button-icon",24),r.qZA()()()()}if(2&e){const e=r.oxw(2);r.xp6(4),r.Oqu(e.display_value),r.xp6(2),r.Q6J("icon","close")}}function ld(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"field-categories-tree",25),r.NdJ("category",(function(t){r.CHM(e);const s=r.oxw(2);return r.KtG(s.chooseCategories(t))})),r.qZA()}if(2&e){const e=r.oxw(2);r.Q6J("categories",e.categories)("searchTerm",e.searchterm)("searchFavorites",e.searchfavorites)}}const od=function(e){return{"slds-is-open":e}};function ad(e,t){if(1&e&&(r.TgZ(0,"div",8)(1,"div",9)(2,"div",10)(3,"div",11),r.YNc(4,id,3,4,"div",12),r.YNc(5,nd,7,2,"div",12),r.TgZ(6,"div",13),r.YNc(7,ld,1,3,"field-categories-tree",14),r.qZA()()()()()),2&e){const e=r.oxw();r.Q6J("ngClass",e.getFieldClass()),r.xp6(3),r.Q6J("ngClass",r.VKq(5,od,e.dropDownOpen)),r.xp6(1),r.Q6J("ngIf",!e.display_value),r.xp6(1),r.Q6J("ngIf",e.display_value),r.xp6(2),r.Q6J("ngIf",e.categories.length>0)}}let dd=(()=>{class fieldCategories extends d.O{constructor(e,t,s,i,n,l,o,a,d){super(e,t,s,i,n),this.model=e,this.view=t,this.language=s,this.metadata=i,this.router=n,this.backend=l,this.config=o,this.elementRef=a,this.renderer=d,this.searchfavorites=!1,this.dropDownOpen=!1,this.searchTimeOut=void 0}ngOnInit(){super.ngOnInit();let e=this.config.getData("categories");e&&e[this.fieldconfig.treeid]||(e||(e={}),e[this.fieldconfig.treeid]=[],this.config.setData("categories",e),this.backend.getRequest(`configuration/spiceui/core/categorytrees/${this.fieldconfig.treeid}/categorytreenodes`).subscribe((t=>{e[this.fieldconfig.treeid]=t,this.config.setData("categories",e)})))}ngOnDestroy(){super.ngOnDestroy(),this.clickListener&&this.clickListener()}get categories(){let e=this.config.getData("categories");return e?e[this.fieldconfig.treeid]:[]}get hasFavorites(){return this.categories.filter((e=>e.favorite)).length>0}openDropDown(){this.dropDownOpen||(this.dropDownOpen=!0,this.clickListener=this.renderer.listen("document","click",(e=>this.onClick(e))))}onClick(e){this.elementRef.nativeElement.contains(e.target)||(this.dropDownOpen=!1,this.clickListener())}get display_value(){let e,t=[],s=1;for(;s<=4&&this.fieldconfig["category"+s];){let i=this.model.getField(this.fieldconfig["category"+s]);if(!i)break;let n=this.categories.find((t=>t.node_key==i&&(!(!e&&""!=t.parent_id&&t.parent_id)&&(!e||t.parent_id==e))));if(!n)break;t.push(n.node_name),e=n.id,s++}return 0==t.length?void 0:t.join("/")}setFavorites(e){e.stopPropagation(),e.preventDefault(),this.searchfavorites=!this.searchfavorites,this.dropDownOpen||(this.dropDownOpen=!0)}chooseCategories(e){let t={},s=1,i=e.levels;for(;s<=4&&this.fieldconfig["category"+s]&&i[s-1];)t[this.fieldconfig["category"+s]]=this.categories.find((e=>e.id==i[s-1])).node_key,s++;this.fieldconfig.addparams&&e.category?.add_params&&(t[this.fieldconfig.addparams]=e.category.add_params),this.model.setFields(t),this.fieldconfig.setname&&this.model.setField("name",this.display_value),this.dropDownOpen=!1,this.searchterm=void 0,this.searchfavorites=!1,this.clickListener&&this.clickListener()}clearCategories(){let e=1,t={};for(;e<=4;)this.fieldconfig["category"+e]&&(t[this.fieldconfig["category"+e]]=void 0),e++;this.model.setFields(t)}search(e){this.searchTimeOut&&window.clearTimeout(this.searchTimeOut),this.searchTimeOut=window.setTimeout((()=>{this.searchterm=this.tempsearchterm}),1e3)}}return fieldCategories.ɵfac=function(e){return new(e||fieldCategories)(r.Y36(Z.o),r.Y36(A.e),r.Y36(x.d),r.Y36(c.Pu),r.Y36(k.F0),r.Y36(H.y),r.Y36(K.C),r.Y36(r.SBq),r.Y36(r.Qsj))},fieldCategories.ɵcmp=r.Xpm({type:fieldCategories,selectors:[["field-categories"]],features:[r.qOj],decls:3,vars:3,consts:[[3,"fieldname","fieldconfig",4,"ngIf"],[3,"fielddisplayclass","fieldconfig","editable",4,"ngIf"],["class","slds-form-element__control slds-m-vertical--xx-small",3,"ngClass",4,"ngIf"],[3,"fieldname","fieldconfig"],[3,"fielddisplayclass","fieldconfig","editable"],[3,"title",4,"ngIf","ngIfElse"],["nocategories",""],[3,"title"],[1,"slds-form-element__control","slds-m-vertical--xx-small",3,"ngClass"],[1,"slds-form-element__control"],[1,"slds-combobox_container"],[1,"slds-combobox","slds-dropdown-trigger","slds-dropdown-trigger_click",3,"ngClass"],["class","slds-combobox__form-element slds-input-has-icon slds-input-has-icon_right",4,"ngIf"],["role","listbox",1,"slds-dropdown","slds-dropdown_fluid"],[3,"categories","searchTerm","searchFavorites","category",4,"ngIf"],[1,"slds-combobox__form-element","slds-input-has-icon","slds-input-has-icon_right"],[1,"slds-input","slds-combobox__input",3,"disabled","placeholder","ngModel","focus","ngModelChange","keyup"],["class","slds-button slds-button--icon slds-input__icon slds-input__icon_right",3,"click",4,"ngIf"],[1,"slds-button","slds-button--icon","slds-input__icon","slds-input__icon_right",3,"click"],["icon","favorite",3,"addclasses"],[1,"slds-pill_container"],[1,"slds-pill","slds-size--1-of-1"],[1,"slds-pill__label"],[1,"slds-button","slds-button--icon","slds-pill__remove",3,"click"],[3,"icon"],[3,"categories","searchTerm","searchFavorites","category"]],template:function(e,t){1&e&&(r.YNc(0,Xa,1,2,"field-label",0),r.YNc(1,td,4,5,"field-generic-display",1),r.YNc(2,ad,8,7,"div",2)),2&e&&(r.Q6J("ngIf",t.displayLabel),r.xp6(1),r.Q6J("ngIf",!t.isEditMode()),r.xp6(1),r.Q6J("ngIf",t.isEditable()&&t.isEditMode()))},dependencies:[i.mk,i.O5,n.Fj,n.JJ,n.On,w.J,Ve.B,u.q,C.D,$a],encapsulation:2}),fieldCategories})();function rd(e,t){1&e&&(r.TgZ(0,"div",3),r._UZ(1,"system-spinner"),r.qZA())}function cd(e,t){if(1&e&&(r.TgZ(0,"span",11),r._UZ(1,"system-label",12),r.qZA()),2&e){const e=r.oxw().$implicit;r.xp6(1),r.Q6J("label",e.name)}}function ud(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"span",13),r.NdJ("click",(function(){r.CHM(e);const t=r.oxw().$implicit,s=r.oxw(2);return r.KtG(s.choose(t))})),r._UZ(1,"system-label",12),r.qZA()}if(2&e){const e=r.oxw().$implicit;r.xp6(1),r.Q6J("label",e.name)}}function md(e,t){1&e&&r._UZ(0,"system-utility-icon",14),2&e&&r.Q6J("icon","favorite")("size","xx-small")}function hd(e,t){1&e&&r._UZ(0,"system-utility-icon",15),2&e&&r.Q6J("icon","chevronright")("size","xx-small")}const gd=function(e){return{"slds-theme--shade":e}};function pd(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"div",5)(1,"div",6),r.NdJ("mouseenter",(function(){const t=r.CHM(e).$implicit,s=r.oxw(2);return r.KtG(s.select(t))})),r.YNc(2,cd,2,1,"span",7),r.YNc(3,ud,2,1,"span",8),r.YNc(4,md,1,2,"system-utility-icon",9),r.YNc(5,hd,1,2,"system-utility-icon",10),r.qZA()()}if(2&e){const e=t.$implicit,s=r.oxw(2);r.Q6J("ngClass",r.VKq(5,gd,s.isCategorySelected(e))),r.xp6(2),r.Q6J("ngIf",0==e.selectable&&e.categories),r.xp6(1),r.Q6J("ngIf",1==e.selectable||!e.categories),r.xp6(1),r.Q6J("ngIf",1==e.favorite),r.xp6(1),r.Q6J("ngIf",e.categories)}}function fd(e,t){if(1&e&&(r.TgZ(0,"div"),r.YNc(1,pd,6,7,"div",4),r.qZA()),2&e){const e=t.$implicit,s=r.oxw();r.Gre("slds-col slds-size--1-of-",s.maxlevels,""),r.xp6(1),r.Q6J("ngForOf",e)}}let bd=(()=>{class fieldServiceCategoryTree{constructor(e,t,s,i){this.model=e,this.backend=t,this.config=s,this.language=i,this.category_tree=[],this.maxlevels=4,this.levels=[],this.selected_categorys=[],this.choose_emitter=new r.vpe,this.loading=!0,this.resetLevels(),this.config.getData("service_category_tree")?(this.category_tree=this.config.getData("service_category_tree"),this.levels[0]=this.category_tree,this.loading=!1):this.backend.getRequest("configuration/spiceui/core/servicecategories/tree").subscribe((e=>{this.config.setData("service_category_tree",e),this.category_tree=e,this.levels[0]=this.category_tree,this.loading=!1}))}resetLevels(e=0){for(let t=e;t<this.maxlevels;t++)this.levels[t]=[];this.selected_categorys.splice(e,this.maxlevels-e)}select(e){this.selected_categorys[e.level]=e,e.categories?(this.levels[e.level+1]=e.categories,this.resetLevels(e.level+2)):this.resetLevels(e.level+1)}choose(e){this.selected_categorys[e.level]=e,this.choose_emitter.emit(this.selected_categorys)}isCategorySelected(e){for(let t of this.selected_categorys)if(t.id==e.id)return!0;return!1}}return fieldServiceCategoryTree.ɵfac=function(e){return new(e||fieldServiceCategoryTree)(r.Y36(Z.o),r.Y36(H.y),r.Y36(K.C),r.Y36(x.d))},fieldServiceCategoryTree.ɵcmp=r.Xpm({type:fieldServiceCategoryTree,selectors:[["field-service-category-tree"]],inputs:{maxlevels:"maxlevels"},outputs:{choose_emitter:"choose"},decls:3,vars:2,consts:[["role","listbox",1,"slds-listbox","slds-listbox_vertical","slds-dropdown_fluid","slds-grid"],["class","slds-p-around--small slds-align--absolute-center",4,"ngIf"],[3,"class",4,"ngFor","ngForOf"],[1,"slds-p-around--small","slds-align--absolute-center"],[3,"ngClass",4,"ngFor","ngForOf"],[3,"ngClass"],[1,"slds-grid","slds-grid--vertical-align-center","slds-p-around--xx-small",3,"mouseenter"],["class","slds-truncate","style","cursor: default;",4,"ngIf"],["class","slds-truncate","style","cursor: pointer; text-decoration: underline;",3,"click",4,"ngIf"],["class","slds-m-left--small",3,"icon","size",4,"ngIf"],["class","slds-col--bump-left",3,"icon","size",4,"ngIf"],[1,"slds-truncate",2,"cursor","default"],[3,"label"],[1,"slds-truncate",2,"cursor","pointer","text-decoration","underline",3,"click"],[1,"slds-m-left--small",3,"icon","size"],[1,"slds-col--bump-left",3,"icon","size"]],template:function(e,t){1&e&&(r.TgZ(0,"div",0),r.YNc(1,rd,2,0,"div",1),r.YNc(2,fd,2,4,"div",2),r.qZA()),2&e&&(r.xp6(1),r.Q6J("ngIf",t.loading),r.xp6(1),r.Q6J("ngForOf",t.levels))},dependencies:[i.mk,i.sg,i.O5,X._,mo.W,M.r],encapsulation:2}),fieldServiceCategoryTree})();function _d(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"li",4)(1,"span",5),r.NdJ("click",(function(){const t=r.CHM(e).$implicit,s=r.oxw();return r.KtG(s.choose(t))})),r.TgZ(2,"span",6),r._uU(3),r.qZA()()()}if(2&e){const e=t.$implicit,s=r.oxw();r.xp6(3),r.Oqu(s.language.getLabel(e.display_name))}}function yd(e,t){1&e&&(r.TgZ(0,"li",7)(1,"span",8),r._uU(2,"No Matches found."),r.qZA()())}let vd=(()=>{class fieldServiceCategorySearch{constructor(e,t,s,i){this.model=e,this.backend=t,this.config=s,this.language=i,this.categories=[],this.selected_categorys=[],this.choose_emitter=new r.vpe,this.config.getData("service_category_tree")?this.flatteningOutCategoryTree(this.config.getData("service_category_tree")):this.backend.getRequest("configuration/spiceui/core/servicecategories/tree").subscribe((e=>{this.config.setData("service_category_tree",e),this.flatteningOutCategoryTree(e)}))}get results(){return this.categories.filter((e=>e.display_name.includes(this.search)))}flatteningOutCategoryTree(e){for(let t of e)t.parents=[],this.loopThroughTree(t)}loopThroughTree(e){if(e.display_name="",e.parents.length>0)for(let t of e.parents)e.display_name+=this.language.getLabel(t.name)+"\\";if(e.display_name+=this.language.getLabel(e.name),this.categories.push(e),e.categories)for(let t of e.categories)t.parents=[...e.parents],t.parents.push(e),this.loopThroughTree(t)}choose(e){let t=[...e.parents];t.push(e),this.choose_emitter.emit(t)}}return fieldServiceCategorySearch.ɵfac=function(e){return new(e||fieldServiceCategorySearch)(r.Y36(Z.o),r.Y36(H.y),r.Y36(K.C),r.Y36(x.d))},fieldServiceCategorySearch.ɵcmp=r.Xpm({type:fieldServiceCategorySearch,selectors:[["field-service-category-search"]],inputs:{search:"search"},outputs:{choose_emitter:"choose"},decls:4,vars:2,consts:[["role","listbox"],["role","presentation",1,"slds-listbox","slds-dropdown_fluid"],["class","slds-listbox__item","role","presentation",4,"ngFor","ngForOf"],["class","slds-listbox__item",4,"ngIf"],["role","presentation",1,"slds-listbox__item"],["role","option",1,"slds-listbox__option","slds-listbox__option_entity",3,"click"],[1,"slds-p-left--medium","slds-listbox__option-text","slds-listbox__option-text_entity"],[1,"slds-listbox__item"],[1,"slds-p-left--medium"]],template:function(e,t){1&e&&(r.TgZ(0,"div",0)(1,"ul",1),r.YNc(2,_d,4,1,"li",2),r.YNc(3,yd,3,0,"li",3),r.qZA()()),2&e&&(r.xp6(2),r.Q6J("ngForOf",t.results),r.xp6(1),r.Q6J("ngIf",0==t.results.length))},dependencies:[i.sg,i.O5],encapsulation:2}),fieldServiceCategorySearch})();function xd(e,t){if(1&e&&r._UZ(0,"field-label",3),2&e){const e=r.oxw();r.Q6J("fieldname",e.fieldname)("fieldconfig",e.fieldconfig)}}function Zd(e,t){if(1&e&&(r.TgZ(0,"field-generic-display",4),r._uU(1),r.qZA()),2&e){const e=r.oxw();r.Q6J("fielddisplayclass",e.fielddisplayclass)("fieldconfig",e.fieldconfig)("editable",e.isEditable()),r.xp6(1),r.hij(" ",e.display_value,"\n")}}function wd(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"div",11)(1,"div",12)(2,"span",13)(3,"span",14),r._uU(4),r.qZA(),r.TgZ(5,"button",15),r.NdJ("click",(function(){r.CHM(e);const t=r.oxw(2);return r.KtG(t.unchooseCategories())})),r._UZ(6,"system-button-icon",16),r.qZA()()()()}if(2&e){const e=r.oxw(2);r.xp6(4),r.Oqu(e.display_value),r.xp6(2),r.Q6J("icon","close")}}function Td(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"div",11)(1,"input",17),r.NdJ("ngModelChange",(function(t){r.CHM(e);const s=r.oxw(2);return r.KtG(s.search=t)}))("click",(function(t){r.CHM(e);const s=r.oxw(2);return r.KtG(s.checkUserAction(t))}))("keyup",(function(t){r.CHM(e);const s=r.oxw(2);return r.KtG(s.checkUserAction(t))})),r.qZA()()}if(2&e){const e=r.oxw(2);r.xp6(1),r.s9C("placeholder",e.language.getLabel("LBL_SEARCH")),r.Q6J("ngModel",e.search)}}function Cd(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"div")(1,"field-service-category-tree",18),r.NdJ("choose",(function(t){r.CHM(e);const s=r.oxw(2);return r.KtG(s.chooseCategories(t))})),r.qZA()()}if(2&e){const e=r.oxw(2);r.xp6(1),r.Q6J("maxlevels",e.maxlevels)}}function Ad(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"div")(1,"field-service-category-search",19),r.NdJ("choose",(function(t){r.CHM(e);const s=r.oxw(2);return r.KtG(s.chooseCategories(t))})),r.qZA()()}if(2&e){const e=r.oxw(2);r.xp6(1),r.Q6J("search",e.search)}}function kd(e,t){if(1&e&&(r.TgZ(0,"div",5)(1,"div",6)(2,"div",7)(3,"div",8),r.YNc(4,wd,7,2,"div",9),r.YNc(5,Td,2,2,"div",9),r.YNc(6,Cd,2,1,"div",10),r.YNc(7,Ad,2,1,"div",10),r.qZA()()()()),2&e){const e=r.oxw();r.Q6J("ngClass",e.getFieldClass()),r.xp6(4),r.Q6J("ngIf",e.display_value),r.xp6(1),r.Q6J("ngIf",!e.display_value),r.xp6(1),r.Q6J("ngIf",e.show_tree),r.xp6(1),r.Q6J("ngIf",e.show_search)}}let Ld=(()=>{class fieldServiceCategories extends d.O{constructor(e,t,s,i,n,l,o){super(e,t,s,i,n),this.model=e,this.view=t,this.language=s,this.metadata=i,this.router=n,this.backend=l,this.config=o,this.fields=["sysservicecategory_id1","sysservicecategory_id2","sysservicecategory_id3","sysservicecategory_id4"],this.show_tree=!1,this.show_search=!1,this.categories=[],this.config.getData("service_categories")?this.categories=this.config.getData("service_categories"):(this.config.setData("service_categories",[]),this.backend.getRequest("configuration/spiceui/core/servicecategories").subscribe((e=>{this.categories=e,this.config.setData("service_categories",e)})))}get display_value(){let e="";for(let t of this.fields){if(!this.model.getField(t)||!this.categories[this.model.getField(t)])break;e+=this.language.getLabel(this.categories[this.model.getField(t)].name)+"\\"}return e=e.substring(0,e.length-1),e}get maxlevels(){return this.fieldconfig.maxlevels?this.fieldconfig.maxlevels:3}checkUserAction(e){this.search?(this.show_tree=!1,this.show_search=!0):(this.show_tree=!0,this.show_search=!1)}chooseCategories(e){this.show_search=!1,this.show_tree=!1;for(let t=0;t<this.fields.length;t++)e[t]?this.model.setField(this.fields[t],e[t].id):this.model.setField(this.fields[t],"");this.search=null;for(let t=e.length-1;t>=0;t--){let s=e[t];if(s.servicequeue_id){this.model.setField("servicequeue_id",s.servicequeue_id),this.model.setField("servicequeue_name",s.servicequeue_name);break}}}unchooseCategories(){let e={};for(let t of this.fields)e[t]="";this.model.setFields(e)}}return fieldServiceCategories.ɵfac=function(e){return new(e||fieldServiceCategories)(r.Y36(Z.o),r.Y36(A.e),r.Y36(x.d),r.Y36(c.Pu),r.Y36(k.F0),r.Y36(H.y),r.Y36(K.C))},fieldServiceCategories.ɵcmp=r.Xpm({type:fieldServiceCategories,selectors:[["field-service-categories"]],features:[r.qOj],decls:3,vars:3,consts:[[3,"fieldname","fieldconfig",4,"ngIf"],[3,"fielddisplayclass","fieldconfig","editable",4,"ngIf"],["class","slds-form-element__control slds-m-vertical--xx-small",3,"ngClass",4,"ngIf"],[3,"fieldname","fieldconfig"],[3,"fielddisplayclass","fieldconfig","editable"],[1,"slds-form-element__control","slds-m-vertical--xx-small",3,"ngClass"],[1,"slds-form-element__control"],[1,"slds-combobox_container","slds-has-inline-listbox"],[1,"slds-combobox","slds-dropdown-trigger","slds-dropdown-trigger_click","slds-combobox-lookup"],["class","slds-combobox__form-element slds-input-has-icon slds-input-has-icon_right",4,"ngIf"],[4,"ngIf"],[1,"slds-combobox__form-element","slds-input-has-icon","slds-input-has-icon_right"],[1,"slds-pill_container"],[1,"slds-pill","slds-size--1-of-1"],[1,"slds-pill__label"],[1,"slds-button","slds-button--icon","slds-pill__remove",3,"click"],[3,"icon"],["type","search",1,"slds-input","slds-combobox__input",3,"placeholder","ngModel","ngModelChange","click","keyup"],[3,"maxlevels","choose"],[3,"search","choose"]],template:function(e,t){1&e&&(r.YNc(0,xd,1,2,"field-label",0),r.YNc(1,Zd,2,4,"field-generic-display",1),r.YNc(2,kd,8,5,"div",2)),2&e&&(r.Q6J("ngIf",t.displayLabel),r.xp6(1),r.Q6J("ngIf",!t.isEditMode()),r.xp6(1),r.Q6J("ngIf",t.isEditable()&&t.isEditMode()))},dependencies:[i.mk,i.O5,n.Fj,n.JJ,n.On,w.J,u.q,C.D,bd,vd],encapsulation:2}),fieldServiceCategories})();function Md(e,t){if(1&e&&r._UZ(0,"field-label",2),2&e){const e=r.oxw();r.Q6J("fieldname",e.fieldname)("fieldconfig",e.fieldconfig)}}function Sd(e,t){if(1&e&&(r.TgZ(0,"div",5)(1,"div",6),r._uU(2),r.qZA(),r.TgZ(3,"div",7),r._uU(4),r.qZA()()),2&e){const e=t.$implicit,s=r.oxw(2);r.xp6(2),r.AsE("",e.user_name," • ",s.formatTimestamp(e.timestamp),""),r.xp6(2),r.Oqu(e.text)}}function Id(e,t){if(1&e&&(r.TgZ(0,"div")(1,"div",3),r.YNc(2,Sd,5,3,"div",4),r.qZA()()),2&e){const e=r.oxw();r.xp6(1),r.Q6J("ngStyle",e.styles),r.xp6(1),r.Q6J("ngForOf",e.logs)}}function Od(e,t){if(1&e&&(r.TgZ(0,"div",5)(1,"div",6),r._uU(2),r.qZA(),r.TgZ(3,"div",13),r._uU(4),r.qZA()()),2&e){const e=t.$implicit,s=r.oxw(2);r.xp6(2),r.AsE("",e.user_name," • ",s.formatTimestamp(e.timestamp),""),r.xp6(2),r.Oqu(e.text)}}function Jd(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"div")(1,"div",8)(2,"div",9)(3,"div",10)(4,"textarea",11),r.NdJ("ngModelChange",(function(t){r.CHM(e);const s=r.oxw();return r.KtG(s.new_log_entry=t)})),r.qZA()()(),r.TgZ(5,"div",12),r.YNc(6,Od,5,3,"div",4),r.qZA()()()}if(2&e){const e=r.oxw();r.xp6(4),r.Q6J("ngModel",e.new_log_entry)("ngStyle",e.styles),r.xp6(1),r.Q6J("ngStyle",e.styles),r.xp6(1),r.Q6J("ngForOf",e.logs)}}let Nd=(()=>{class fieldWorklog extends d.O{constructor(e,t,s,i,n,l,o){super(e,t,s,i,n),this.model=e,this.view=t,this.language=s,this.metadata=i,this.router=n,this.session=l,this.userpreferences=o,this.origin_logs=[],this.initialized=!1,this.view.isEditMode()&&this.view.mode$.subscribe((e=>{"edit"==e&&(this.origin_logs=this.logs)}))}ngOnInit(){super.ngOnInit(),this.view.isEditMode()&&(this.view.mode$.subscribe((e=>{"edit"==e&&(this.origin_logs=this.logs)})),this.initialized=!0)}get logs(){return this.value?"string"==typeof this.value?JSON.parse(this.value):this.value:[]}set logs(e){"json"!=this.field_defs.type?this.value=JSON.stringify(e):this.value=e}set new_log_entry(e){this._new_log_entry=e,this.initialized||this.ngOnInit();let t=[...this.origin_logs];t.unshift({timestamp:+new Date,user_name:this.session.authData.userName,user_id:this.session.authData.userId,text:e}),this.logs=t}get styles(){return{height:this.fieldconfig.height?this.fieldconfig.height+"px":"200px"}}formatTimestamp(e){let t=moment(e);return this.userpreferences.formatDateTime(t)}}return fieldWorklog.ɵfac=function(e){return new(e||fieldWorklog)(r.Y36(Z.o),r.Y36(A.e),r.Y36(x.d),r.Y36(c.Pu),r.Y36(k.F0),r.Y36(ml.n),r.Y36(pe.z))},fieldWorklog.ɵcmp=r.Xpm({type:fieldWorklog,selectors:[["field-worklog"]],features:[r.qOj],decls:3,vars:3,consts:[[3,"fieldname","fieldconfig",4,"ngIf"],[4,"ngIf"],[3,"fieldname","fieldconfig"],[1,"slds-scrollable--y",3,"ngStyle"],["class","slds-p-around--x-small slds-border--bottom",4,"ngFor","ngForOf"],[1,"slds-p-around--x-small","slds-border--bottom"],[1,"slds-p-around--x-small","slds-theme--shade"],[1,"slds-p-around--x-small",2,"white-space","pre-line"],[1,"slds-grid"],[1,"slds-form-element","slds-size--1-of-2","slds-m-right--xx-small"],[1,"slds-form-element__control"],["placeholder","Write your log here...",1,"slds-textarea",3,"ngModel","ngStyle","ngModelChange"],[1,"slds-size--1-of-2","slds-scrollable--y","slds-m-left--xx-small",3,"ngStyle"],[1,"slds-p-around--x-small"]],template:function(e,t){1&e&&(r.YNc(0,Md,1,2,"field-label",0),r.YNc(1,Id,3,2,"div",1),r.YNc(2,Jd,7,4,"div",1)),2&e&&(r.Q6J("ngIf",t.displayLabel),r.xp6(1),r.Q6J("ngIf",!t.isEditMode()),r.xp6(1),r.Q6J("ngIf",t.isEditMode()))},dependencies:[i.sg,i.O5,i.PC,n.Fj,n.JJ,n.On,u.q],encapsulation:2}),fieldWorklog})(),Fd=(()=>{class FieldModelInfoComponent{constructor(e,t){this.model=e,this.language=t}}return FieldModelInfoComponent.ɵfac=function(e){return new(e||FieldModelInfoComponent)(r.Y36(Z.o),r.Y36(x.d))},FieldModelInfoComponent.ɵcmp=r.Xpm({type:FieldModelInfoComponent,selectors:[["field-model-info"]],decls:2,vars:2,consts:[["system-model-popover","",1,"slds-icon_container"],[3,"icon","size"]],template:function(e,t){1&e&&(r.TgZ(0,"div",0),r._UZ(1,"system-utility-icon",1),r.qZA()),2&e&&(r.xp6(1),r.Q6J("icon","info")("size","x-small"))},dependencies:[M.r,us.g],encapsulation:2}),FieldModelInfoComponent})();var qd=s(6898);function Ed(e,t){if(1&e&&r._UZ(0,"field-label",3),2&e){const e=r.oxw();r.Q6J("fieldname",e.fieldname)("fieldconfig",e.fieldconfig)}}function Yd(e,t){if(1&e&&(r.TgZ(0,"field-generic-display",4),r._uU(1),r.qZA()),2&e){const e=r.oxw();r.Q6J("fielddisplayclass",e.fielddisplayclass)("editable",e.isEditable())("fieldconfig",e.fieldconfig)("fieldid",e.fieldid),r.xp6(1),r.hij(" ",e.getValue(),"\n")}}function Qd(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"div",5)(1,"div",6)(2,"system-input-module",7),r.NdJ("ngModelChange",(function(t){r.CHM(e);const s=r.oxw();return r.KtG(s.value=t)})),r.qZA(),r._UZ(3,"field-messages",8),r.qZA()()}if(2&e){const e=r.oxw();r.xp6(1),r.Q6J("ngClass",e.getFieldClass()),r.xp6(1),r.Q6J("ngModel",e.value)("displaytechnicalname",!1)("displayAsterisk",e.displayAsterisk),r.xp6(1),r.Q6J("fieldname",e.fieldname)}}let Ud=(()=>{class FieldEnumModulesComponent extends De{constructor(e,t,s,i,n){super(e,t,s,i,n),this.model=e,this.view=t,this.language=s,this.metadata=i,this.router=n}get displayAsterisk(){return!!this.fieldconfig.displayAsterisk}}return FieldEnumModulesComponent.ɵfac=function(e){return new(e||FieldEnumModulesComponent)(r.Y36(Z.o),r.Y36(A.e),r.Y36(x.d),r.Y36(c.Pu),r.Y36(k.F0))},FieldEnumModulesComponent.ɵcmp=r.Xpm({type:FieldEnumModulesComponent,selectors:[["field-enum-modules"]],features:[r.qOj],decls:3,vars:3,consts:[[3,"fieldname","fieldconfig",4,"ngIf"],[3,"fielddisplayclass","editable","fieldconfig","fieldid",4,"ngIf"],["class","slds-form-element",4,"ngIf"],[3,"fieldname","fieldconfig"],[3,"fielddisplayclass","editable","fieldconfig","fieldid"],[1,"slds-form-element"],[1,"slds-form-element__control",3,"ngClass"],[3,"ngModel","displaytechnicalname","displayAsterisk","ngModelChange"],[3,"fieldname"]],template:function(e,t){1&e&&(r.YNc(0,Ed,1,2,"field-label",0),r.YNc(1,Yd,2,5,"field-generic-display",1),r.YNc(2,Qd,4,5,"div",2)),2&e&&(r.Q6J("ngIf",t.displayLabel),r.xp6(1),r.Q6J("ngIf",!t.isEditMode()),r.xp6(1),r.Q6J("ngIf",t.isEditMode()))},dependencies:[i.mk,i.O5,n.JJ,n.On,qd.a,u.q,C.D,I.a],encapsulation:2}),FieldEnumModulesComponent})();function Dd(e,t){if(1&e&&r._UZ(0,"field-label",5),2&e){const e=r.oxw();r.Q6J("fieldname",e.fieldname)("fieldconfig",e.fieldconfig)}}let jd=(()=>{class fieldGDPR extends d.O{constructor(e,t,s,i,n,l,o,a){super(e,t,s,i,n),this.model=e,this.view=t,this.language=s,this.metadata=i,this.router=n,this.backend=l,this.modal=o,this.injector=a,this.gdprData={},this.loaded=!1}ngOnInit(){this.backend.getRequest("common/gdpr/"+this.model.module+"/"+this.model.id).subscribe((e=>{this.gdprData=e,this.loaded=!0,this.setMarketingStyle(),this.setDataStyle()})),this.subscriptions.add(this.model.data$.subscribe((()=>{this.setMarketingStyle(),this.setDataStyle()})))}setDataStyle(){if(!this.loaded)return{};let e="#cc0000";("1"==this.model.data.gdpr_data_agreement||this.gdprData?.related?.some((e=>"1"==e.gdpr_data_agreement)))&&(e="#009900"),this.dataStyle={"background-color":e,color:"white",cursor:"pointer"}}setMarketingStyle(){if(!this.loaded)return{};const e=this.metadata.getModuleFields(this.model.module)?.gdpr_marketing_agreement;let t="#cc0000";("enum"==e?.type&&"g"==this.model.data.gdpr_marketing_agreement||e?.type?.startsWith("bool")&&1==this.model.data.gdpr_marketing_agreement||this.gdprData?.related?.some((e=>"1"==e.gdpr_marketing_agreement)))&&(t="#009900"),this.marketingStyle={"background-color":t,color:"white",cursor:"pointer"}}showDetails(){this.modal.openModal("ObjectGDPRModal",!0,this.injector).subscribe((e=>{e.instance.gdprRelatedLog=this.gdprData.related,e.instance.gdprAuditLog=this.gdprData.audit.map((e=>({...e,model:{module:this.model.module,id:this.model.id,[e.field_name]:this.model.utils.backend2spice(this.model.module,e.field_name,e.value)}})))}))}}return fieldGDPR.ɵfac=function(e){return new(e||fieldGDPR)(r.Y36(Z.o),r.Y36(A.e),r.Y36(x.d),r.Y36(c.Pu),r.Y36(k.F0),r.Y36(H.y),r.Y36(L.o),r.Y36(r.zs3))},fieldGDPR.ɵcmp=r.Xpm({type:fieldGDPR,selectors:[["field-gdpr"]],features:[r.qOj],decls:6,vars:3,consts:[[3,"fieldname","fieldconfig",4,"ngIf"],[1,"slds-grid","slds-grid--vertical-align-center","slds-grid--align-spread","slds-p-vertical--xxx-small"],[1,"slds-badge",3,"ngStyle","click"],["label","LBL_DATA"],["label","LBL_MARKETING"],[3,"fieldname","fieldconfig"]],template:function(e,t){1&e&&(r.YNc(0,Dd,1,2,"field-label",0),r.TgZ(1,"div",1)(2,"span",2),r.NdJ("click",(function(){return t.showDetails()})),r._UZ(3,"system-label",3),r.qZA(),r.TgZ(4,"span",2),r.NdJ("click",(function(){return t.showDetails()})),r._UZ(5,"system-label",4),r.qZA()()),2&e&&(r.Q6J("ngIf",t.displayLabel),r.xp6(2),r.Q6J("ngStyle",t.dataStyle),r.xp6(2),r.Q6J("ngStyle",t.marketingStyle))},dependencies:[i.O5,i.PC,X._,u.q],encapsulation:2}),fieldGDPR})();function Rd(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"li",4)(1,"span",5),r.NdJ("click",(function(){const t=r.CHM(e).$implicit,s=r.oxw();return r.KtG(s.choose(t))})),r.TgZ(2,"span",6),r._uU(3),r.qZA()()()}if(2&e){const e=t.$implicit,s=r.oxw();r.xp6(3),r.Oqu(s.language.getLabel(e.display_name))}}function Bd(e,t){1&e&&(r.TgZ(0,"li",7)(1,"span",8),r._uU(2,"No Matches found."),r.qZA()())}let Gd=(()=>{class fieldSelectTreeSearch{constructor(e,t,s,i){this.model=e,this.backend=t,this.config=s,this.language=i,this.sel_fields=[],this.selected_categorys=[],this.choose_emitter=new r.vpe}ngOnInit(){this.config.getData("select_tree_tree")?this.flatteningOutCategoryTree(this.config.getData("select_tree_tree")):this.backend.getRequest("configuration/spiceui/core/selecttree/tree/"+this.treekey).subscribe((e=>{this.config.setData("select_tree_tree",e),this.flatteningOutCategoryTree(e)}))}get results(){return this.sel_fields.filter((e=>e.display_name.toLowerCase().includes(this.search.toLowerCase())))}flatteningOutCategoryTree(e){for(let t of e)t.parents=[],this.loopThroughTree(t)}loopThroughTree(e){if(e.display_name="",e.parents.length>0)for(let t of e.parents)e.display_name+=this.language.getLabel(t.name)+"\\";if(e.display_name+=this.language.getLabel(e.name),this.sel_fields.push(e),e.childs)for(let t of e.childs)t.parents=[...e.parents],t.parents.push(e),this.loopThroughTree(t)}choose(e){let t=[...e.parents];t.push(e),this.choose_emitter.emit(t)}}return fieldSelectTreeSearch.ɵfac=function(e){return new(e||fieldSelectTreeSearch)(r.Y36(Z.o),r.Y36(H.y),r.Y36(K.C),r.Y36(x.d))},fieldSelectTreeSearch.ɵcmp=r.Xpm({type:fieldSelectTreeSearch,selectors:[["select-tree-search"]],inputs:{search:"search",treekey:"treekey"},outputs:{choose_emitter:"choose"},decls:4,vars:2,consts:[["role","listbox",1,"slds-dropdown_fluid"],["role","presentation",1,"slds-listbox","slds-dropdown_fluid"],["class","slds-listbox__item","role","presentation",4,"ngFor","ngForOf"],["class","slds-listbox__item",4,"ngIf"],["role","presentation",1,"slds-listbox__item"],["role","option",1,"slds-listbox__option","slds-listbox__option_entity",3,"click"],[1,"slds-p-left--medium","slds-listbox__option-text","slds-listbox__option-text_entity"],[1,"slds-listbox__item"],[1,"slds-p-left--medium"]],template:function(e,t){1&e&&(r.TgZ(0,"div",0)(1,"ul",1),r.YNc(2,Rd,4,1,"li",2),r.YNc(3,Bd,3,0,"li",3),r.qZA()()),2&e&&(r.xp6(2),r.Q6J("ngForOf",t.results),r.xp6(1),r.Q6J("ngIf",0==t.results.length))},dependencies:[i.sg,i.O5],encapsulation:2}),fieldSelectTreeSearch})();function Pd(e,t){1&e&&(r.TgZ(0,"div",3),r._UZ(1,"system-spinner"),r.qZA())}function Hd(e,t){if(1&e&&(r.TgZ(0,"span",11),r._UZ(1,"system-label",12),r.qZA()),2&e){const e=r.oxw().$implicit;r.xp6(1),r.Q6J("label",e.name)}}function zd(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"span",13),r.NdJ("click",(function(){r.CHM(e);const t=r.oxw().$implicit,s=r.oxw(2);return r.KtG(s.choose(t))})),r._UZ(1,"system-label",12),r.qZA()}if(2&e){const e=r.oxw().$implicit;r.xp6(1),r.Q6J("label",e.name)}}function Vd(e,t){1&e&&r._UZ(0,"system-utility-icon",14),2&e&&r.Q6J("icon","favorite")("size","xx-small")}function Kd(e,t){1&e&&r._UZ(0,"system-utility-icon",15),2&e&&r.Q6J("icon","chevronright")("size","xx-small")}const $d=function(e){return{"slds-theme--shade":e}};function Xd(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"div",4)(1,"div",6),r.NdJ("mouseenter",(function(){const t=r.CHM(e).$implicit,s=r.oxw(2);return r.KtG(s.select(t))})),r.YNc(2,Hd,2,1,"span",7),r.YNc(3,zd,2,1,"span",8),r.YNc(4,Vd,1,2,"system-utility-icon",9),r.YNc(5,Kd,1,2,"system-utility-icon",10),r.qZA()()}if(2&e){const e=t.$implicit,s=r.oxw(2);r.Q6J("ngClass",r.VKq(5,$d,s.isCategorySelected(e))),r.xp6(2),r.Q6J("ngIf",0==e.selectable&&e.childs),r.xp6(1),r.Q6J("ngIf",1==e.selectable||!e.childs),r.xp6(1),r.Q6J("ngIf",1==e.favorite),r.xp6(1),r.Q6J("ngIf",e.childs)}}const Wd=function(e){return{"slds-border--right":e}};function er(e,t){if(1&e&&(r.TgZ(0,"div",4),r.YNc(1,Xd,6,7,"div",5),r.qZA()),2&e){const e=t.$implicit,s=t.index,i=r.oxw();r.Gre("slds-col slds-size--1-of-",i.maxlevels,""),r.Q6J("ngClass",r.VKq(5,Wd,s<i.maxlevels-1)),r.xp6(1),r.Q6J("ngForOf",e)}}let tr=(()=>{class fieldSelectTreeTree{constructor(e,t,s,i){this.model=e,this.backend=t,this.config=s,this.language=i,this.select_tree=[],this.maxlevels=4,this.levels=[],this.selected_fields=[],this.choose_emitter=new r.vpe,this.loading=!0,this.resetLevels()}ngOnInit(){if(this.config.getData("select_tree_tree")){var e=this.config.getData("select_tree_tree");e.sort((function(e,t){var s=e.name.toLowerCase(),i=t.name.toLowerCase();return s<i?-1:s>i?1:0})),this.levels[0]=e,this.loading=!1}else this.backend.getRequest("configuration/spiceui/core/selecttree/tree/"+this.treekey).subscribe((e=>{this.config.setData("select_tree_tree",e),this.select_tree=e,this.select_tree.sort((function(e,t){var s=e.name.toLowerCase(),i=t.name.toLowerCase();return s<i?-1:s>i?1:0})),this.levels[0]=this.select_tree,this.loading=!1}))}resetLevels(e=0){for(let t=e;t<this.maxlevels;t++)this.levels[t]=[];this.selected_fields.splice(e,this.maxlevels-e)}select(e){this.selected_fields[e.level]=e,e.childs?(this.levels[e.level+1]=e.childs,this.resetLevels(e.level+2)):this.resetLevels(e.level+1)}choose(e){this.selected_fields[e.level]=e,this.choose_emitter.emit(this.selected_fields)}isCategorySelected(e){for(let t of this.selected_fields)if(t.id==e.id)return!0;return!1}}return fieldSelectTreeTree.ɵfac=function(e){return new(e||fieldSelectTreeTree)(r.Y36(Z.o),r.Y36(H.y),r.Y36(K.C),r.Y36(x.d))},fieldSelectTreeTree.ɵcmp=r.Xpm({type:fieldSelectTreeTree,selectors:[["select-tree-tree"]],inputs:{maxlevels:"maxlevels",treekey:"treekey"},outputs:{choose_emitter:"choose"},decls:3,vars:2,consts:[["role","listbox",1,"slds-dropdown_fluid"],["class","slds-p-around--small slds-align--absolute-center",4,"ngIf"],[3,"class","ngClass",4,"ngFor","ngForOf"],[1,"slds-p-around--small","slds-align--absolute-center"],[3,"ngClass"],[3,"ngClass",4,"ngFor","ngForOf"],[1,"slds-grid","slds-grid--vertical-align-center","slds-p-around--xx-small",3,"mouseenter"],["class","slds-truncate","style","cursor: default;",4,"ngIf"],["class","slds-truncate","style","cursor: pointer; text-decoration: underline;",3,"click",4,"ngIf"],["class","slds-m-left--small",3,"icon","size",4,"ngIf"],["class","slds-col--bump-left",3,"icon","size",4,"ngIf"],[1,"slds-truncate",2,"cursor","default"],[3,"label"],[1,"slds-truncate",2,"cursor","pointer","text-decoration","underline",3,"click"],[1,"slds-m-left--small",3,"icon","size"],[1,"slds-col--bump-left",3,"icon","size"]],template:function(e,t){1&e&&(r.TgZ(0,"div",0),r.YNc(1,Pd,2,0,"div",1),r.YNc(2,er,2,7,"div",2),r.qZA()),2&e&&(r.xp6(1),r.Q6J("ngIf",t.loading),r.xp6(1),r.Q6J("ngForOf",t.levels))},dependencies:[i.mk,i.sg,i.O5,X._,mo.W,M.r],encapsulation:2}),fieldSelectTreeTree})();function sr(e,t){if(1&e&&r._UZ(0,"field-label",3),2&e){const e=r.oxw();r.Q6J("fieldname",e.fieldname)("fieldconfig",e.fieldconfig)}}function ir(e,t){if(1&e&&(r.TgZ(0,"field-generic-display",4),r._uU(1),r.qZA()),2&e){const e=r.oxw();r.Q6J("fielddisplayclass",e.fielddisplayclass)("fieldconfig",e.fieldconfig)("editable",e.isEditable()),r.xp6(1),r.hij(" ",e.display_value,"\n")}}function nr(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"div",11)(1,"div",12)(2,"span",13)(3,"span",14),r._uU(4),r.qZA(),r.TgZ(5,"button",15),r.NdJ("click",(function(){r.CHM(e);const t=r.oxw(2);return r.KtG(t.unchooseSelField())})),r._UZ(6,"system-button-icon",16),r.qZA()()()()}if(2&e){const e=r.oxw(2);r.xp6(4),r.Oqu(e.display_value),r.xp6(2),r.Q6J("icon","close")}}function lr(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"div",11)(1,"input",17),r.NdJ("focus",(function(){r.CHM(e);const t=r.oxw(2);return r.KtG(t.onFocus())}))("ngModelChange",(function(t){r.CHM(e);const s=r.oxw(2);return r.KtG(s.search=t)}))("click",(function(t){r.CHM(e);const s=r.oxw(2);return r.KtG(s.checkUserAction(t))}))("keyup",(function(t){r.CHM(e);const s=r.oxw(2);return r.KtG(s.checkUserAction(t))})),r.qZA()()}if(2&e){const e=r.oxw(2);r.xp6(1),r.s9C("placeholder",e.language.getLabel("LBL_SEARCH")),r.Q6J("ngModel",e.search)}}function or(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"div",18)(1,"select-tree-tree",19),r.NdJ("choose",(function(t){r.CHM(e);const s=r.oxw(2);return r.KtG(s.chooseSelField(t))})),r.qZA()()}if(2&e){const e=r.oxw(2);r.xp6(1),r.Q6J("treekey",e.fieldconfig.key)("maxlevels",e.maxlevels)}}function ar(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"div",18)(1,"select-tree-search",20),r.NdJ("choose",(function(t){r.CHM(e);const s=r.oxw(2);return r.KtG(s.chooseSelField(t))})),r.qZA()()}if(2&e){const e=r.oxw(2);r.xp6(1),r.Q6J("treekey",e.fieldconfig.key)("search",e.search)}}function dr(e,t){if(1&e&&(r.TgZ(0,"div",5)(1,"div",6)(2,"div",7)(3,"div",8),r.YNc(4,nr,7,2,"div",9),r.YNc(5,lr,2,2,"div",9),r.YNc(6,or,2,2,"div",10),r.YNc(7,ar,2,2,"div",10),r.qZA()()()()),2&e){const e=r.oxw();r.Q6J("ngClass",e.getFieldClass()),r.xp6(4),r.Q6J("ngIf",e.display_value),r.xp6(1),r.Q6J("ngIf",!e.display_value),r.xp6(1),r.Q6J("ngIf",e.show_tree),r.xp6(1),r.Q6J("ngIf",e.show_search)}}let rr=(()=>{class fieldSelectTree extends d.O{constructor(e,t,s,i,n,l,o,a,d){super(e,t,s,i,n),this.model=e,this.view=t,this.language=s,this.metadata=i,this.router=n,this.backend=l,this.config=o,this.elementRef=a,this.renderer=d,this.fields=[],this.show_tree=!1,this.show_search=!1,this.sel_fields=[]}ngOnInit(){this.fields.length<1&&(this.fields.push(this.fieldconfig.value1),this.fields.push(this.fieldconfig.value2),this.fields.push(this.fieldconfig.value3),this.fields.push(this.fieldconfig.value4)),this.config.getData("select_tree")?this.sel_fields=this.config.getData("select_tree"):(this.config.setData("select_tree",[]),this.backend.getRequest("configuration/spiceui/core/selecttree/list/"+this.fieldconfig.key).subscribe((e=>{this.sel_fields=e,this.config.setData("select_tree",e)})))}get display_value(){let e="";for(let t of this.fields){if(!this.model.getField(t))break;{let s="";for(let e in this.sel_fields)this.sel_fields[e].keyname===this.model.getField(t)&&(s=this.sel_fields[e].name);e+=this.language.getLabel(s)+" \\ "}}return e=e.substring(0,e.length-2),e}get maxlevels(){return this.fieldconfig.maxlevels?this.fieldconfig.maxlevels:4}checkUserAction(e){this.search?(this.show_tree=!1,this.show_search=!0):(this.show_tree=!0,this.show_search=!1)}chooseSelField(e){this.show_search=!1,this.show_tree=!1;for(let t=0;t<this.fields.length;t++)if(e[t]){let s=""!=e[t].keyname?e[t].keyname:e[t].name;this.model.setField(this.fields[t],s)}else this.model.setField(this.fields[t],"");this.search=null}unchooseSelField(){let e={};for(let t of this.fields)e[t]="";this.model.setFields(e)}onClick(e){this.elementRef.nativeElement.contains(e.target)||(this.show_tree=!1)}onFocus(){this.show_tree=!0,this.clickListener=this.renderer.listen("document","click",(e=>this.onClick(e)))}}return fieldSelectTree.ɵfac=function(e){return new(e||fieldSelectTree)(r.Y36(Z.o),r.Y36(A.e),r.Y36(x.d),r.Y36(c.Pu),r.Y36(k.F0),r.Y36(H.y),r.Y36(K.C),r.Y36(r.SBq),r.Y36(r.Qsj))},fieldSelectTree.ɵcmp=r.Xpm({type:fieldSelectTree,selectors:[["select-tree"]],features:[r.qOj],decls:3,vars:3,consts:[[3,"fieldname","fieldconfig",4,"ngIf"],[3,"fielddisplayclass","fieldconfig","editable",4,"ngIf"],["class","slds-form-element__control slds-m-vertical--xx-small",3,"ngClass",4,"ngIf"],[3,"fieldname","fieldconfig"],[3,"fielddisplayclass","fieldconfig","editable"],[1,"slds-form-element__control","slds-m-vertical--xx-small",3,"ngClass"],[1,"slds-form-element__control"],[1,"slds-combobox_container","slds-has-inline-listbox"],["aria-expanded","false","aria-haspopup","listbox","role","combobox",1,"slds-combobox","slds-dropdown-trigger","slds-dropdown-trigger_click","slds-combobox-lookup","slds-size_2-of-2"],["class","slds-combobox__form-element slds-input-has-icon slds-input-has-icon_right",4,"ngIf"],["class","slds-dropdown dropdown-trigger_click slds-dropdown_length-with-icon-1 slds-dropdown_fluid","style","display: block",4,"ngIf"],[1,"slds-combobox__form-element","slds-input-has-icon","slds-input-has-icon_right"],[1,"slds-pill_container"],[1,"slds-pill","slds-size--1-of-1"],[1,"slds-pill__label"],[1,"slds-button","slds-button--icon","slds-pill__remove",3,"click"],[3,"icon"],["type","search",1,"slds-input","slds-combobox__input",3,"placeholder","ngModel","focus","ngModelChange","click","keyup"],[1,"slds-dropdown","dropdown-trigger_click","slds-dropdown_length-with-icon-1","slds-dropdown_fluid",2,"display","block"],[3,"treekey","maxlevels","choose"],[3,"treekey","search","choose"]],template:function(e,t){1&e&&(r.YNc(0,sr,1,2,"field-label",0),r.YNc(1,ir,2,4,"field-generic-display",1),r.YNc(2,dr,8,5,"div",2)),2&e&&(r.Q6J("ngIf",t.displayLabel),r.xp6(1),r.Q6J("ngIf",!t.isEditMode()),r.xp6(1),r.Q6J("ngIf",t.isEditable()&&t.isEditMode()))},dependencies:[i.mk,i.O5,n.Fj,n.JJ,n.On,w.J,u.q,C.D,Gd,tr],encapsulation:2}),fieldSelectTree})();function cr(e,t){if(1&e&&r._UZ(0,"field-label",3),2&e){const e=r.oxw();r.Q6J("fieldname",e.fieldname)("fieldconfig",e.fieldconfig)}}function ur(e,t){if(1&e&&(r.TgZ(0,"field-generic-display",4),r._UZ(1,"div",5),r._uU(2),r.qZA()),2&e){const e=r.oxw();r.Q6J("fielddisplayclass",e.fielddisplayclass)("editable",e.isEditable())("fieldconfig",e.fieldconfig),r.xp6(1),r.Q6J("ngStyle",e.getColor),r.xp6(1),r.hij(" ",e.getValue(),"\n")}}function mr(e,t){if(1&e&&(r.ynx(0),r.TgZ(1,"option",12),r._uU(2),r.qZA(),r.BQk()),2&e){const e=t.$implicit;r.xp6(1),r.Q6J("value",e.value),r.xp6(1),r.hij(" ",e.long,"")}}function hr(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"div",6)(1,"div",7)(2,"div",8)(3,"select",9),r.NdJ("ngModelChange",(function(t){r.CHM(e);const s=r.oxw();return r.KtG(s.value=t)}))("change",(function(){r.CHM(e);const t=r.oxw();return r.KtG(t.changed())})),r.YNc(4,mr,3,2,"ng-container",10),r.qZA()(),r._UZ(5,"field-messages",11),r.qZA()()}if(2&e){const e=r.oxw();r.xp6(1),r.Q6J("ngClass",e.getFieldClass()),r.xp6(2),r.Q6J("ngModel",e.value),r.xp6(1),r.Q6J("ngForOf",e.options),r.xp6(1),r.Q6J("fieldname",e.fieldname)}}let gr=(()=>{class fieldColorEnum extends d.O{constructor(e,t,s,i,n){super(e,t,s,i,n),this.model=e,this.view=t,this.language=s,this.metadata=i,this.router=n,this.longOptions=[],this.options=[],this.colors=[],this.acolor={"background-color":""}}ngOnInit(){this.getOptions()}getOptions(){this.longOptions=this.language.getFieldDisplayOptions(this.model.module,this.fieldname);let e=this.longOptions;if(e&&!this.fieldconfig.useShort||(e=this.language.getDisplayOptions(this.fieldconfig.shortEnum)),this.colors=this.language.getDisplayOptions(this.fieldconfig.colorEnum),void 0!==this.colors){let e="";e=this.colors[this.value],void 0!==e&&"#"!=e.substring(0,1)&&(e="#"+e),this.acolor["background-color"]=e}let t=[];for(let s in e){let i=void 0!==this.colors&&void 0!==this.colors[s]?"#"!=this.colors[s].substring(0,1)?"#"+this.colors[s]:this.colors[s]:"",n=void 0!==this.longOptions?this.longOptions[s]:"";t.push({value:s,color:i,display:e[s],long:n})}this.options=t}get getColor(){let e="";return void 0!==this.colors&&(e=this.colors[this.value],e&&"#"!=e.substring(0,1)&&(e="#"+e),this.acolor["background-color"]=e),this.acolor}getValue(){for(let e of this.options)if(e.value==this.value)return e.display}changed(){let e="";e=this.colors[this.value],void 0!==e&&"#"!=e.substring(0,1)&&(e="#"+e),this.acolor["background-color"]=e}}return fieldColorEnum.ɵfac=function(e){return new(e||fieldColorEnum)(r.Y36(Z.o),r.Y36(A.e),r.Y36(x.d),r.Y36(c.Pu),r.Y36(k.F0))},fieldColorEnum.ɵcmp=r.Xpm({type:fieldColorEnum,selectors:[["field-enum"]],features:[r.qOj],decls:3,vars:3,consts:[[3,"fieldname","fieldconfig",4,"ngIf"],[3,"fielddisplayclass","editable","fieldconfig",4,"ngIf"],["class","slds-form-element",4,"ngIf"],[3,"fieldname","fieldconfig"],[3,"fielddisplayclass","editable","fieldconfig"],[2,"float","left","width","10px","height","10px","border-radius","5px","margin-top","5px","margin-right","5px",3,"ngStyle"],[1,"slds-form-element"],[1,"slds-form-element__control",3,"ngClass"],[1,"slds-select_container","slds-m-vertical--xx-small"],[1,"slds-select",3,"ngModel","ngModelChange","change"],[4,"ngFor","ngForOf"],[3,"fieldname"],[3,"value"]],template:function(e,t){1&e&&(r.YNc(0,cr,1,2,"field-label",0),r.YNc(1,ur,3,5,"field-generic-display",1),r.YNc(2,hr,6,4,"div",2)),2&e&&(r.Q6J("ngIf",t.displayLabel),r.xp6(1),r.Q6J("ngIf",!t.isEditMode()),r.xp6(1),r.Q6J("ngIf",t.isEditMode()))},dependencies:[i.mk,i.sg,i.O5,i.PC,n.YN,n.Kr,n.EJ,n.JJ,n.On,u.q,C.D,I.a],encapsulation:2}),fieldColorEnum})();var pr=s(6991);function fr(e,t){if(1&e&&r._UZ(0,"field-label",3),2&e){const e=r.oxw();r.Q6J("fieldname",e.fieldname)("fieldconfig",e.fieldconfig)}}function br(e,t){if(1&e&&(r.TgZ(0,"div",7),r._uU(1),r.qZA()),2&e){const e=r.oxw(2);r.xp6(1),r.hij(" ",e.displayValue," ")}}function _r(e,t){if(1&e&&(r.TgZ(0,"div",8),r._uU(1),r.qZA()),2&e){const e=r.oxw(2);r.Q6J("title",e.displayValue),r.xp6(1),r.hij(" ",e.displayValue," ")}}function yr(e,t){if(1&e&&(r.TgZ(0,"field-generic-display",4),r.YNc(1,br,2,1,"div",5),r.YNc(2,_r,2,2,"ng-template",null,6,r.W1O),r.qZA()),2&e){const e=r.MAs(3),t=r.oxw();r.Q6J("fielddisplayclass",t.fielddisplayclass)("editable",t.isEditable())("fieldconfig",t.fieldconfig)("fieldid",t.fieldid),r.xp6(1),r.Q6J("ngIf",!t.truncated)("ngIfElse",e)}}function vr(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"div",9)(1,"system-input-base64",10),r.NdJ("ngModelChange",(function(t){r.CHM(e);const s=r.oxw();return r.KtG(s.value=t)})),r.qZA(),r._UZ(2,"field-messages",11),r.qZA()}if(2&e){const e=r.oxw();r.Q6J("ngClass",e.getFieldClass()),r.xp6(1),r.Q6J("ngModel",e.value)("minHeight",e.minHeight)("maxHeight",e.maxHeight),r.xp6(1),r.Q6J("fieldname",e.fieldname)}}let xr=(()=>{class fieldBase64 extends d.O{constructor(e,t,s,i,n,l){super(e,t,s,i,n),this.model=e,this.view=t,this.language=s,this.metadata=i,this.router=n,this.footer=l}get minHeight(){return this.fieldconfig.minheight?this.fieldconfig.minheight:150}get maxHeight(){return this.fieldconfig.maxheight?this.fieldconfig.maxheight:500}get truncated(){return!!this.fieldconfig.truncate}get displayValue(){try{return decodeURIComponent(window.atob(this.value))}catch(e){return""}}}return fieldBase64.ɵfac=function(e){return new(e||fieldBase64)(r.Y36(Z.o),r.Y36(A.e),r.Y36(x.d),r.Y36(c.Pu),r.Y36(k.F0),r.Y36(re.M))},fieldBase64.ɵcmp=r.Xpm({type:fieldBase64,selectors:[["field-base64"]],features:[r.qOj],decls:3,vars:3,consts:[[3,"fieldname","fieldconfig",4,"ngIf"],[3,"fielddisplayclass","editable","fieldconfig","fieldid",4,"ngIf"],["class","slds-form-element__control","style","position:relative;",3,"ngClass",4,"ngIf"],[3,"fieldname","fieldconfig"],[3,"fielddisplayclass","editable","fieldconfig","fieldid"],["style","white-space: pre-line;",4,"ngIf","ngIfElse"],["truncatedDisplay",""],[2,"white-space","pre-line"],[1,"slds-truncate",2,"max-width","200px","text-overflow","ellipsis",3,"title"],[1,"slds-form-element__control",2,"position","relative",3,"ngClass"],[3,"ngModel","minHeight","maxHeight","ngModelChange"],[3,"fieldname"]],template:function(e,t){1&e&&(r.YNc(0,fr,1,2,"field-label",0),r.YNc(1,yr,4,6,"field-generic-display",1),r.YNc(2,vr,3,5,"div",2)),2&e&&(r.Q6J("ngIf",t.displayLabel),r.xp6(1),r.Q6J("ngIf",!t.isEditMode()),r.xp6(1),r.Q6J("ngIf",t.isEditable()&&t.isEditMode()))},dependencies:[i.mk,i.O5,n.JJ,n.On,pr.V,u.q,C.D,I.a],encapsulation:2}),fieldBase64})();function Zr(e,t){1&e&&r._UZ(0,"system-stencil")}function wr(e,t){if(1&e&&r._UZ(0,"system-icon",3),2&e){const e=r.oxw();r.Q6J("module",e.value)}}let Tr=(()=>{class fieldModuleIcon extends d.O{constructor(e,t,s,i,n){super(e,t,s,i,n),this.model=e,this.view=t,this.language=s,this.metadata=i,this.router=n}}return fieldModuleIcon.ɵfac=function(e){return new(e||fieldModuleIcon)(r.Y36(Z.o),r.Y36(A.e),r.Y36(x.d),r.Y36(c.Pu),r.Y36(k.F0))},fieldModuleIcon.ɵcmp=r.Xpm({type:fieldModuleIcon,selectors:[["field-module-icon"]],features:[r.qOj],decls:4,vars:3,consts:[[3,"ngClass"],[4,"ngIf","ngIfElse"],["displaycontent",""],["size","xx-small",3,"module"]],template:function(e,t){if(1&e&&(r.TgZ(0,"div",0),r.YNc(1,Zr,1,0,"system-stencil",1),r.YNc(2,wr,1,1,"ng-template",null,2,r.W1O),r.qZA()),2&e){const e=r.MAs(3);r.Q6J("ngClass",t.fielddisplayclass),r.xp6(1),r.Q6J("ngIf",t.model.isLoading)("ngIfElse",e)}},dependencies:[i.mk,i.O5,rs.f,Ve.B],encapsulation:2}),fieldModuleIcon})();var Cr=s(9808),Ar=s(1574),kr=s(5681);function Lr(e,t){if(1&e&&r._UZ(0,"field-label",5),2&e){const e=r.oxw();r.Q6J("fieldname",e.fieldname)("fieldconfig",e.fieldconfig)}}function Mr(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"button",6),r.NdJ("click",(function(){r.CHM(e);const t=r.oxw();return r.KtG(t.setEditMode())})),r._UZ(1,"system-button-icon",7),r.qZA()}2&e&&(r.xp6(1),r.Q6J("icon","edit"))}function Sr(e,t){if(1&e&&r._UZ(0,"system-richtext-editor",11),2&e){const e=r.oxw(2);r.Q6J("readOnly",!0)("ngModel",e.value)("css",e.metadata.getHtmlStylesheetCode(e.stylesheetId))("innerheight",e.fieldconfig.innerheight)}}function Ir(e,t){if(1&e&&r._UZ(0,"iframe",12),2&e){const e=r.oxw(2);r.Q6J("src",e.sanitizedValue,r.uOi)("ngStyle",e.heightStyle)}}function Or(e,t){if(1&e&&(r.TgZ(0,"field-generic-display",8),r.YNc(1,Sr,1,4,"system-richtext-editor",9),r.YNc(2,Ir,1,2,"iframe",10),r.qZA()),2&e){const e=r.oxw();r.Q6J("fielddisplayclass",e.fielddisplayclass)("editable",!1)("fieldconfig",e.fieldconfig),r.xp6(1),r.Q6J("ngIf",!e.fieldconfig.asiframe),r.xp6(1),r.Q6J("ngIf",e.fieldconfig.asiframe)}}function Jr(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"li",29),r.NdJ("click",(function(){const t=r.CHM(e).$implicit,s=r.oxw(3);return s.selectedSignatureId=t.id,r.KtG(s.changeSignature())})),r.TgZ(1,"a",30)(2,"span",26),r._UZ(3,"system-label",31),r.qZA()()()}if(2&e){const e=t.$implicit;r.Q6J("value",e.id),r.xp6(3),r.Q6J("label",e.label)}}function Nr(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"li",18)(1,"div",19)(2,"button",20),r._UZ(3,"system-button-icon",21),r.qZA(),r.TgZ(4,"div",22)(5,"ul",23)(6,"li",24),r.NdJ("click",(function(){r.CHM(e);const t=r.oxw(2);return t.selectedSignatureId="",r.KtG(t.changeSignature())})),r.TgZ(7,"a",25)(8,"span",26),r._UZ(9,"system-label",27),r.qZA()()(),r.YNc(10,Jr,4,2,"li",28),r.qZA()()()()}if(2&e){const e=r.oxw(2);r.xp6(10),r.Q6J("ngForOf",e.signatures)}}function Fr(e,t){if(1&e&&(r.TgZ(0,"option",41),r._UZ(1,"system-label",42),r.qZA()),2&e){const e=t.$implicit;r.Q6J("value",e.id),r.xp6(1),r.Q6J("label",e.label)}}function qr(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"li",32)(1,"div",33)(2,"label",34),r._UZ(3,"system-label",35),r._uU(4,": "),r.qZA(),r.TgZ(5,"div",36)(6,"div",37)(7,"select",38),r.NdJ("ngModelChange",(function(t){r.CHM(e);const s=r.oxw(2);return r.KtG(s.selectedSignatureId=t)}))("ngModelChange",(function(){r.CHM(e);const t=r.oxw(2);return r.KtG(t.changeSignature())})),r.TgZ(8,"option",39),r._UZ(9,"system-label",27),r.qZA(),r.YNc(10,Fr,2,2,"option",40),r.qZA()()()()()}if(2&e){const e=r.oxw(2);r.xp6(7),r.Q6J("ngModel",e.selectedSignatureId)("disabled",0==(null==e.signatures?null:e.signatures.length)),r.xp6(3),r.Q6J("ngForOf",e.signatures)}}function Er(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"div",13)(1,"system-richtext-editor",14),r.NdJ("ngModelChange",(function(t){r.CHM(e);const s=r.oxw();return r.KtG(s.value=t)}))("save$",(function(t){r.CHM(e);const s=r.oxw();return r.KtG(s.save(t))})),r.YNc(2,Nr,11,1,"li",15),r.YNc(3,qr,11,3,"li",16),r.qZA(),r._UZ(4,"field-messages",17),r.qZA()}if(2&e){const e=r.oxw();r.Q6J("ngClass",e.getFieldClass()),r.xp6(1),r.Q6J("ngModel",e.value)("css",e.metadata.getHtmlStylesheetCode(e.stylesheetId))("extendedmode",!e.fieldconfig.simplemode)("innerheight",e.fieldconfig.innerheight)("useMedialFile",e.metadata.checkModuleAcl("MediaFiles","list")&&e.metadata.checkModuleAcl("MediaFiles","view")),r.xp6(1),r.Q6J("ngIf",null==e.fieldconfig?null:e.fieldconfig.useSignature),r.xp6(1),r.Q6J("ngIf",null==e.fieldconfig?null:e.fieldconfig.useSignature),r.xp6(1),r.Q6J("fieldname",e.fieldname)}}let Yr=(()=>{class fieldRichText extends d.O{constructor(e,t,s,i,n,l,o,a,d,r,c,u,m){super(e,t,s,i,o),this.model=e,this.view=t,this.language=s,this.metadata=i,this.backend=n,this.toast=l,this.router=o,this.injector=a,this.broadcast=d,this.configurationService=r,this.modal=c,this.cdRef=u,this.sanitized=m,this.selectedSignatureId="",this.signatures=[],this.parsedHtml="",this.fullValue="",this.stylesheetField="",this.stylesheetToUse="",this.signaturePosition=-1,this.stylesheets=this.metadata.getHtmlStylesheetNames()}get heightStyle(){return{height:this.fieldconfig.height?this.fieldconfig.height:"500px"}}get styleTag(){return this.stylesheetId?"<style>"+this.metadata.getHtmlStylesheetCode(this.stylesheetId)+"</style>":""}get stylesheetId(){return _.isEmpty(this.model.getField(this.stylesheetField))?this.stylesheetId=this.stylesheetToUse:this.model.getField(this.stylesheetField)}set stylesheetId(e){e&&this.model.setField(this.stylesheetField,e)}get value(){return this.model.getField(this.fieldname)}set value(e){this.model.setField(this.fieldname,e),this.setHtmlValue()}ngOnInit(){this.setStylesheetField(),this.setStylesheetsToUse(),this.setHtmlValue(),this.modelChangesSubscriber(),this.fieldconfig?.useSignature&&(this.addSignature("mailbox","","LBL_MAILBOX_SIGNATURE"),this.selectedSignatureId=this.model.getFieldValue("signature"),this.loadUserSignature("user"==this.selectedSignatureId),this.loadMailboxSignature(this.model.getField("mailbox_id"),"mailbox"==this.selectedSignatureId))}changeSignature(){"mailbox"==this.selectedSignatureId&&this.loadMailboxSignature(this.model.getField("mailbox_id"),!0),this.renderSelectedSignature()}renderSelectedSignature(){this.value||(this.value="");const e=document.createElement("div");e.innerHTML=this.value;let t=e.querySelectorAll("div[data-signature]"),s=e.querySelectorAll("div[spicecrm_reply_quote]");if(this.signaturePosition=e.innerHTML.indexOf(s[0]?.outerHTML),t.length>0&&(this.signaturePosition=e.innerHTML.indexOf(t[0]?.outerHTML)),t[0]?.parentNode.removeChild(t[0]),this.value=e.innerHTML,this.model.setField("signature",this.selectedSignatureId),!this.selectedSignatureId)return;const i=`<div data-signature="" class="data-signature" style="margin: 10px 0">${this.signatures.find((e=>e.id==this.selectedSignatureId)).content}</div>`;this.value=[this.value.slice(0,this.signaturePosition),i,s[0]?.outerHTML].join("<p><br></p>")}setEditMode(){this.model.startEdit(),this.view.setEditMode(),this.cdRef.detectChanges()}encodeHtml(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}loadMailboxSignature(e,t){if(!this.isEditMode())return;if(!e)return;const s=this.configurationService.getData("mailbox_signature_"+e);if(!s)return(0,Cr.n)(this.backend.get("Mailboxes",e)).then((s=>{this.configurationService.setData("mailbox_signature_"+e,s.email_signature),this.addSignature("mailbox",s.email_signature,"LBL_MAILBOX_SIGNATURE"),t&&this.renderSelectedSignature()}));this.addSignature("mailbox",s,"LBL_MAILBOX"),t&&this.renderSelectedSignature()}addSignature(e,t,s){const i=this.signatures.find((t=>t.id==e));i?i.content=t:this.signatures.push({id:e,content:t,label:s})}loadUserSignature(e){if(!this.isEditMode())return;const t=this.configurationService.getData("usersignature");if(!t)return;this.signatures.length;this.addSignature("user",t,"LBL_MY_SIGNATURE"),e&&this.renderSelectedSignature()}setStylesheetField(){let e=this.metadata.getFieldDefs(this.model.module,this.fieldname);_.isEmpty(e.stylesheet_id_field)||(this.stylesheetField=e.stylesheet_id_field)}setStylesheetsToUse(){this.useStylesheets=!_.isEmpty(this.stylesheetField)&&!_.isEmpty(this.stylesheets),this.useStylesheets&&(1===this.stylesheets.length?this.stylesheetToUse=this.stylesheets[0].id:_.isEmpty(this.fieldconfig.stylesheetId)?this.stylesheetToUse=this.metadata.getHtmlStylesheetToUse(this.model.module,this.fieldname):this.stylesheetToUse=this.fieldconfig.stylesheetId)}setSanitizedValue(){return this.value&&(this.value.includes("</html>")?this.fullValue=this.value:this.fullValue=`<html><head><base target="_blank">${this.styleTag}</head><body class="spice">${this.value}</body></html>`),this.fullValue!=this.fullValue_cached&&(this.sanitizedValue=this.sanitized.bypassSecurityTrustResourceUrl(this.fullValue?"data:text/html;charset=UTF-8,"+encodeURIComponent(this.fullValue):""),this.fullValue_cached=this.fullValue),this.sanitizedValue}modelChangesSubscriber(){this.subscriptions.add(this.model.observeFieldChanges(this.fieldname).subscribe((e=>{this.setHtmlValue()}))),this.subscriptions.add(this.model.observeFieldChanges("mailbox_id").subscribe((e=>{this.fieldconfig?.useSignature&&e&&"mailbox"==this.model.getField("signature")&&this.loadMailboxSignature(e,!0)})))}setHtmlValue(){let e=/<code>[\s\S]*?<\/code>/g,t=e.exec(this.value);for(;null!=t;)this.value=this.value.replace(t,this.encodeHtml(t)).replace("&lt;code&gt;","<code>").replace("&lt;/code&gt;","</code>"),t=e.exec(this.value);this.parsedHtml=this.sanitized.bypassSecurityTrustHtml(this.value),this.setSanitizedValue()}save(e){let t={date_modified:this.model.getField("date_modified"),[this.fieldname]:e};this.backend.save(this.model.module,this.model.id,t).subscribe((e=>{this.model.setField("date_modified",e.date_modified,!0),this.value=e[this.fieldname],this.toast.sendToast(this.language.getLabel("LBL_DATA_SAVED")+".","success")}),(e=>this.toast.sendToast(this.language.getLabel("LBL_ERROR")+" "+e.status,"error",e.error.error.message)))}}return fieldRichText.ɵfac=function(e){return new(e||fieldRichText)(r.Y36(Z.o),r.Y36(A.e),r.Y36(x.d),r.Y36(c.Pu),r.Y36(H.y),r.Y36(z.A),r.Y36(k.F0),r.Y36(r.zs3),r.Y36(V.f),r.Y36(K.C),r.Y36(L.o),r.Y36(r.sBO),r.Y36($.H7))},fieldRichText.ɵcmp=r.Xpm({type:fieldRichText,selectors:[["field-richtext"]],features:[r.qOj],decls:6,vars:4,consts:[[1,"slds-grid","slds-grid--vertical-align-center","slds-grid--align-spread"],[3,"fieldname","fieldconfig",4,"ngIf"],["class","slds-button slds-button--icon slds-m-left--xx-small spice-hover-button",3,"click",4,"ngIf"],[3,"fielddisplayclass","editable","fieldconfig",4,"ngIf"],["class","slds-form-element__control",3,"ngClass",4,"ngIf"],[3,"fieldname","fieldconfig"],[1,"slds-button","slds-button--icon","slds-m-left--xx-small","spice-hover-button",3,"click"],[3,"icon"],[3,"fielddisplayclass","editable","fieldconfig"],[3,"readOnly","ngModel","css","innerheight",4,"ngIf"],["style","resize: vertical;","width","100%","frameborder","0","seamless","true","sandbox","",3,"src","ngStyle",4,"ngIf"],[3,"readOnly","ngModel","css","innerheight"],["width","100%","frameborder","0","seamless","true","sandbox","",2,"resize","vertical",3,"src","ngStyle"],[1,"slds-form-element__control",3,"ngClass"],[3,"ngModel","css","extendedmode","innerheight","useMedialFile","ngModelChange","save$"],["id","signatureIcon",4,"ngIf"],["id","signatureSelector",4,"ngIf"],[3,"fieldname"],["id","signatureIcon"],["system-dropdown-trigger","",1,"slds-dropdown-trigger","slds-dropdown-trigger_click"],["aria-haspopup","true","aria-expanded","true",1,"slds-button","slds-button_icon","slds-button_icon-border-filled"],["icon","signature","aria-hidden","true",1,"slds-button__icon"],[1,"slds-dropdown","slds-dropdown_left","slds-dropdown_small"],["role","menu",1,"slds-dropdown__list"],[1,"slds-dropdown__item",3,"click"],["aria-checked","true","role","menuitemcheckbox","tabindex","0"],["title","Menu Item One",1,"slds-truncate"],["label","LBL_NONE"],["class","slds-dropdown__item slds-is-selected","role","presentation",3,"value","click",4,"ngFor","ngForOf"],["role","presentation",1,"slds-dropdown__item","slds-is-selected",3,"value","click"],["aria-checked","true","role","menuitemcheckbox","tabindex","-1"],[1,"slds-truncate",3,"label"],["id","signatureSelector"],[1,"slds-form-element","slds-grid"],[1,"slds-form-element__label"],["label","LBL_SIGNATURE"],[1,"slds-form-element__control"],[1,"slds-select_container"],[1,"slds-select",3,"ngModel","disabled","ngModelChange"],["value",""],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[3,"label"]],template:function(e,t){1&e&&(r.TgZ(0,"div",0)(1,"div"),r.YNc(2,Lr,1,2,"field-label",1),r.qZA(),r.YNc(3,Mr,2,1,"button",2),r.qZA(),r.YNc(4,Or,3,5,"field-generic-display",3),r.YNc(5,Er,5,9,"div",4)),2&e&&(r.xp6(2),r.Q6J("ngIf",t.displayLabel),r.xp6(1),r.Q6J("ngIf",!t.isEditMode()&&t.isEditable()),r.xp6(1),r.Q6J("ngIf",!t.isEditMode()),r.xp6(1),r.Q6J("ngIf",t.isEditable()&&t.isEditMode()))},dependencies:[i.mk,i.sg,i.O5,i.PC,n.YN,n.Kr,n.EJ,n.JJ,n.On,w.J,X._,Ar.z,kr.l,u.q,C.D,I.a],encapsulation:2}),fieldRichText})();function Qr(e,t){if(1&e&&r._UZ(0,"field-label",3),2&e){const e=r.oxw();r.Q6J("fieldname",e.fieldname)("fieldconfig",e.fieldconfig)}}function Ur(e,t){if(1&e&&(r.TgZ(0,"field-generic-display",4)(1,"span"),r._uU(2),r.qZA()()),2&e){const e=r.oxw();r.Q6J("fielddisplayclass",e.fielddisplayclass)("editable",e.isEditable())("fieldconfig",e.fieldconfig),r.xp6(2),r.Oqu(e.getValue())}}function Dr(e,t){1&e&&(r.TgZ(0,"span",21)(1,"span",22),r._UZ(2,"system-icon",23),r.qZA()())}function jr(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"li",15),r.NdJ("click",(function(t){const s=r.CHM(e).$implicit,i=r.oxw(2);return r.KtG(i.clickedItem(s,t))})),r.TgZ(1,"div",16),r.YNc(2,Dr,3,0,"span",17),r.TgZ(3,"span",18)(4,"span",19),r._UZ(5,"span",20),r._uU(6),r.qZA()()()()}if(2&e){const e=t.$implicit;r.xp6(2),r.Q6J("ngIf",e.selected),r.xp6(4),r.hij(" ",e.display," ")}}function Rr(e,t){if(1&e&&(r.TgZ(0,"div",5)(1,"div",6)(2,"div",7)(3,"div",8)(4,"div",9),r._UZ(5,"input",10)(6,"system-icon",11),r.qZA(),r.TgZ(7,"div",12)(8,"ul",13),r.YNc(9,jr,7,2,"li",14),r.qZA()()()()()()),2&e){const e=r.oxw();r.xp6(5),r.Q6J("value",e.getValue()),r.xp6(4),r.Q6J("ngForOf",e.getValues())}}let Br=(()=>{class fieldEnumMulti extends d.O{constructor(e,t,s,i,n,l,o){super(e,t,s,i,n),this.model=e,this.view=t,this.language=s,this.metadata=i,this.router=n,this.elementRef=l,this.renderer=o,this.options=[],this.selectedValues=[],this.showSelect=!1}ngOnInit(){this.model.data$.subscribe((e=>{this.buildOptions()}))}getValue(){let e=[];for(let t of this.selectedValues)e.push(this.options[t]);return e.join(", ")}getValues(){let e=[];this.getValueArray();for(let t in this.options){let s=!1;for(let e of this.selectedValues)t==e&&(s=!0);e.push({id:this.model.generateGuid(),value:t,display:this.options[t],selected:s})}return e}getValueArray(){try{return this.model.getField(this.fieldname).substring(1,this.model.getField(this.fieldname).length-1).split("^,^")}catch(e){return[]}}buildOptions(){this.options=[],this.selectedValues=this.getValueArray(),this.options=this.language.getFieldDisplayOptions(this.model.module,this.fieldname)}clickedItem(e,t){t.stopPropagation(),""==this.selectedValues[0]&&(this.selectedValues=[]);var s=this.selectedValues.indexOf(e.value);-1==s?this.selectedValues.length>0?this.selectedValues.push(e.value):this.selectedValues=[e.value]:this.selectedValues.splice(s,1);let i=Object.assign([],this.selectedValues),n="";i.length>0&&(n="^"+i.join("^,^")+"^"),this.model.setField(this.fieldname,n)}}return fieldEnumMulti.ɵfac=function(e){return new(e||fieldEnumMulti)(r.Y36(Z.o),r.Y36(A.e),r.Y36(x.d),r.Y36(c.Pu),r.Y36(k.F0),r.Y36(r.SBq),r.Y36(r.Qsj))},fieldEnumMulti.ɵcmp=r.Xpm({type:fieldEnumMulti,selectors:[["field-enummulti"]],features:[r.qOj],decls:3,vars:3,consts:[[3,"fieldname","fieldconfig",4,"ngIf"],[3,"fielddisplayclass","editable","fieldconfig",4,"ngIf"],["class","slds-form-element",4,"ngIf"],[3,"fieldname","fieldconfig"],[3,"fielddisplayclass","editable","fieldconfig"],[1,"slds-form-element"],[1,"slds-form-element__control"],[1,"slds-combobox_container"],["tabindex","-1","system-dropdown-trigger","","aria-expanded","true","aria-haspopup","listbox","role","combobox",1,"slds-combobox","slds-dropdown-trigger","slds-dropdown-trigger_click"],["role","none",1,"slds-combobox__form-element","slds-input-has-icon","slds-input-has-icon_right"],["type","text","role","textbox","placeholder","Select an Option",1,"slds-input","slds-combobox__input-value",3,"value"],["icon","down","sprite","utility","addclasses","slds-input__icon slds-input__icon_right"],["role","listbox",1,"slds-dropdown","slds-dropdown_length-5","slds-dropdown_fluid"],["role","presentation",1,"slds-listbox","slds-listbox_vertical"],["role","presentation","class","slds-listbox__item",3,"click",4,"ngFor","ngForOf"],["role","presentation",1,"slds-listbox__item",3,"click"],["id","option1","role","option",1,"slds-media","slds-listbox__option","slds-listbox__option_plain","slds-media_small","slds-is-selected"],["class","slds-media__figure slds-listbox__option-icon",4,"ngIf"],[1,"slds-media__body"],["title","Accounts",1,"slds-truncate"],[1,"slds-assistive-text"],[1,"slds-media__figure","slds-listbox__option-icon"],[1,"slds-icon_container","slds-icon-utility-check","slds-current-color"],["icon","check","size","xx-small","sprite","utility","addclasses","slds-input__icon slds-input__icon_right"]],template:function(e,t){1&e&&(r.YNc(0,Qr,1,2,"field-label",0),r.YNc(1,Ur,3,4,"field-generic-display",1),r.YNc(2,Rr,10,2,"div",2)),2&e&&(r.Q6J("ngIf",t.displayLabel),r.xp6(1),r.Q6J("ngIf",!t.isEditMode()),r.xp6(1),r.Q6J("ngIf",t.isEditMode()))},dependencies:[i.sg,i.O5,rs.f,kr.l,u.q,C.D],encapsulation:2}),fieldEnumMulti})();var Gr=s(3398);function Pr(e,t){if(1&e&&r._UZ(0,"field-label",3),2&e){const e=r.oxw();r.Q6J("fieldname",e.fieldname)("fieldconfig",e.fieldconfig)}}function Hr(e,t){if(1&e&&(r.TgZ(0,"span"),r._uU(1),r.qZA()),2&e){const e=r.oxw(2);r.xp6(1),r.hij(" ",e.expression.displayValue," ")}}function zr(e,t){if(1&e&&(r.TgZ(0,"field-generic-display",4),r.YNc(1,Hr,2,1,"span",5),r.qZA()),2&e){const e=r.oxw();r.Q6J("fielddisplayclass",e.fielddisplayclass)("editable",e.isEditable())("fieldconfig",e.fieldconfig),r.xp6(1),r.Q6J("ngIf",null==e.expression?null:e.expression.displayValue)}}function Vr(e,t){1&e&&r._UZ(0,"system-label",31)}function Kr(e,t){1&e&&r._UZ(0,"system-label",32)}function $r(e,t){if(1&e&&(r.TgZ(0,"label",28),r.YNc(1,Vr,1,0,"system-label",29),r.YNc(2,Kr,1,0,"system-label",30),r.qZA()),2&e){const e=r.oxw(2);r.xp6(1),r.Q6J("ngIf","daily"==e.expression.recurrence),r.xp6(1),r.Q6J("ngIf","daily"!=e.expression.recurrence)}}function Xr(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"div",37)(1,"label",8),r._UZ(2,"system-label",38),r.qZA(),r.TgZ(3,"div",10)(4,"input",39),r.NdJ("ngModelChange",(function(t){r.CHM(e);const s=r.oxw(3);return r.KtG(s.expression.everyQuantity=t)}))("ngModelChange",(function(){r.CHM(e);const t=r.oxw(3);return r.KtG(t.setFieldValue())})),r.qZA()()()}if(2&e){const e=r.oxw(3);r.xp6(4),r.Q6J("ngModel",e.expression.everyQuantity)}}function Wr(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"div",40)(1,"div",10)(2,"div",11)(3,"select",12),r.NdJ("ngModelChange",(function(t){r.CHM(e);const s=r.oxw(3);return r.KtG(s.expression.every=t)}))("ngModelChange",(function(){r.CHM(e);const t=r.oxw(3);return r.KtG(t.onEverySet())})),r.TgZ(4,"option",41),r._UZ(5,"system-label",42),r.qZA(),r.TgZ(6,"option",43),r._UZ(7,"system-label",42),r.qZA(),r.TgZ(8,"option",44),r._UZ(9,"system-label",42),r.qZA(),r.TgZ(10,"option",45),r._UZ(11,"system-label",42),r.qZA(),r.TgZ(12,"option",46),r._UZ(13,"system-label",42),r.qZA(),r.TgZ(14,"option",47),r._UZ(15,"system-label",42),r.qZA(),r.TgZ(16,"option",48),r._UZ(17,"system-label",49),r.qZA()()()()()}if(2&e){const e=r.oxw(3);r.xp6(3),r.Q6J("ngModel",e.expression.every),r.xp6(2),r.Q6J("label",e.expression.everyQuantity>1?"LBL_MINUTES":"LBL_MINUTE"),r.xp6(2),r.Q6J("label",e.expression.everyQuantity>1?"LBL_HOURS":"LBL_HOUR"),r.xp6(2),r.Q6J("label",e.expression.everyQuantity>1?"LBL_DAYS":"LBL_DAY"),r.xp6(2),r.Q6J("label",e.expression.everyQuantity>1?"LBL_DAYS_AT":"LBL_DAY_AT"),r.xp6(2),r.Q6J("label",e.expression.everyQuantity>1?"LBL_MONTHS":"LBL_MONTH"),r.xp6(2),r.Q6J("label",e.expression.everyQuantity>1?"LBL_MONTHS_AT":"LBL_MONTH_AT")}}function ec(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"div",50)(1,"div",51)(2,"system-input-time",52),r.NdJ("ngModelChange",(function(t){r.CHM(e);const s=r.oxw(3);return r.KtG(s.expression.everyAtValue=t)}))("ngModelChange",(function(){r.CHM(e);const t=r.oxw(3);return r.KtG(t.setFieldValue())})),r.qZA(),r.TgZ(3,"span",53),r._UZ(4,"system-label",54),r.qZA()()()}if(2&e){const e=r.oxw(3);r.xp6(2),r.Q6J("ngModel",e.expression.everyAtValue)}}function tc(e,t){1&e&&r._UZ(0,"system-label",62)}function sc(e,t){1&e&&r._UZ(0,"system-label",63)}function ic(e,t){1&e&&r._UZ(0,"system-label",64)}function nc(e,t){1&e&&r._UZ(0,"system-label",65)}function lc(e,t){if(1&e&&(r.ynx(0,57),r.YNc(1,tc,1,0,"system-label",58),r.YNc(2,sc,1,0,"system-label",59),r.YNc(3,ic,1,0,"system-label",60),r.YNc(4,nc,1,0,"system-label",61),r.BQk()),2&e){const e=r.oxw(4);r.Q6J("ngSwitch",e.expression.everyAtValue),r.xp6(1),r.Q6J("ngSwitchCase",1==e.expression.everyAtValue||21==e.expression.everyAtValue||31==e.expression.everyAtValue?e.expression.everyAtValue:"1"),r.xp6(1),r.Q6J("ngSwitchCase",2==e.expression.everyAtValue||22==e.expression.everyAtValue?e.expression.everyAtValue:"2"),r.xp6(1),r.Q6J("ngSwitchCase",3==e.expression.everyAtValue||23==e.expression.everyAtValue?e.expression.everyAtValue:"3")}}function oc(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"div",50)(1,"div",51)(2,"input",55),r.NdJ("ngModelChange",(function(t){r.CHM(e);const s=r.oxw(3);return r.KtG(s.expression.everyAtValue=t)}))("ngModelChange",(function(){r.CHM(e);const t=r.oxw(3);return r.KtG(t.setFieldValue())})),r.qZA(),r.TgZ(3,"span",53),r.YNc(4,lc,5,4,"ng-container",56),r.qZA()()()}if(2&e){const e=r.oxw(3);r.xp6(2),r.Q6J("ngModel",e.expression.everyAtValue),r.xp6(2),r.Q6J("ngIf",!!e.expression.everyAtValue)}}const ac=function(e,t,s,i,n,l,o){return{0:e,1:t,2:s,3:i,4:n,5:l,6:o}};function dc(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"div",66)(1,"div",10)(2,"system-multiple-select",67),r.NdJ("ngModelChange",(function(t){r.CHM(e);const s=r.oxw(3);return r.KtG(s.expression.everyAtValue=t)}))("ngModelChange",(function(){r.CHM(e);const t=r.oxw(3);return r.KtG(t.setFieldValue())})),r.qZA()()()}if(2&e){const e=r.oxw(3);r.xp6(2),r.Q6J("showPills",!1)("ngModel",e.expression.everyAtValue)("listItems",r.Hh0(3,ac,e.weekdays[0],e.weekdays[1],e.weekdays[2],e.weekdays[3],e.weekdays[4],e.weekdays[5],e.weekdays[6]))}}function rc(e,t){if(1&e&&(r.TgZ(0,"option",69),r._uU(1),r.qZA()),2&e){const e=t.$implicit,s=t.index;r.Q6J("value",s),r.xp6(1),r.hij(" ",e," ")}}function cc(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"div",66)(1,"div",10)(2,"div",11)(3,"select",12),r.NdJ("ngModelChange",(function(t){r.CHM(e);const s=r.oxw(3);return r.KtG(s.expression.everyAtValue=t)}))("ngModelChange",(function(){r.CHM(e);const t=r.oxw(3);return r.KtG(t.setFieldValue())})),r.YNc(4,rc,2,2,"option",68),r.qZA()()()()}if(2&e){const e=r.oxw(3);r.xp6(3),r.Q6J("ngModel",e.expression.everyAtValue),r.xp6(1),r.Q6J("ngForOf",e.weekdays)}}function uc(e,t){if(1&e&&(r.TgZ(0,"option",69),r._uU(1),r.qZA()),2&e){const e=t.$implicit,s=t.index;r.Q6J("value",s+1),r.xp6(1),r.hij(" ",e," ")}}function mc(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"div",66)(1,"div",10)(2,"div",11)(3,"select",12),r.NdJ("ngModelChange",(function(t){r.CHM(e);const s=r.oxw(3);return r.KtG(s.expression.everyAtValue=t)}))("ngModelChange",(function(){r.CHM(e);const t=r.oxw(3);return r.KtG(t.setFieldValue())})),r.YNc(4,uc,2,2,"option",68),r.qZA()()()()}if(2&e){const e=r.oxw(3);r.xp6(3),r.Q6J("ngModel",e.expression.everyAtValue),r.xp6(1),r.Q6J("ngForOf",e.months)}}function hc(e,t){if(1&e&&(r.ynx(0),r.YNc(1,Xr,5,1,"div",33),r.YNc(2,Wr,18,7,"div",34),r.YNc(3,ec,5,1,"div",35),r.YNc(4,oc,5,2,"div",35),r.YNc(5,dc,3,11,"div",36),r.YNc(6,cc,5,2,"div",36),r.YNc(7,mc,5,2,"div",36),r.BQk()),2&e){const e=r.oxw(2);r.xp6(1),r.Q6J("ngIf","weekdays"!=e.expression.every&&"custom"==e.expression.recurrence),r.xp6(1),r.Q6J("ngIf","custom"==e.expression.recurrence),r.xp6(1),r.Q6J("ngIf","daysAt"==e.expression.every||"daily"==e.expression.recurrence),r.xp6(1),r.Q6J("ngIf","monthsAt"==e.expression.every||"monthly"==e.expression.recurrence),r.xp6(1),r.Q6J("ngIf","weekdays"==e.expression.every),r.xp6(1),r.Q6J("ngIf","weekly"==e.expression.recurrence),r.xp6(1),r.Q6J("ngIf","annually"==e.expression.recurrence)}}function gc(e,t){if(1&e){const e=r.EpF();r.ynx(0),r.TgZ(1,"div",70)(2,"div",71)(3,"div",10)(4,"input",72),r.NdJ("ngModelChange",(function(t){r.CHM(e);const s=r.oxw(2);return r.KtG(s.expression.minutes=t)}))("ngModelChange",(function(){r.CHM(e);const t=r.oxw(2);return r.KtG(t.setFieldValue())})),r.qZA()()(),r.TgZ(5,"div",73),r._uU(6,"::"),r.qZA(),r.TgZ(7,"div",71)(8,"div",10)(9,"input",74),r.NdJ("ngModelChange",(function(t){r.CHM(e);const s=r.oxw(2);return r.KtG(s.expression.hours=t)}))("ngModelChange",(function(){r.CHM(e);const t=r.oxw(2);return r.KtG(t.setFieldValue())})),r.qZA()()(),r.TgZ(10,"div",73),r._uU(11,"::"),r.qZA(),r.TgZ(12,"div",71)(13,"div",10)(14,"input",75),r.NdJ("ngModelChange",(function(t){r.CHM(e);const s=r.oxw(2);return r.KtG(s.expression.monthDay=t)}))("ngModelChange",(function(){r.CHM(e);const t=r.oxw(2);return r.KtG(t.setFieldValue())})),r.qZA()()(),r.TgZ(15,"div",73),r._uU(16,"::"),r.qZA(),r.TgZ(17,"div",71)(18,"div",10)(19,"input",76),r.NdJ("ngModelChange",(function(t){r.CHM(e);const s=r.oxw(2);return r.KtG(s.expression.month=t)}))("ngModelChange",(function(){r.CHM(e);const t=r.oxw(2);return r.KtG(t.setFieldValue())})),r.qZA()()(),r.TgZ(20,"div",73),r._uU(21,"::"),r.qZA(),r.TgZ(22,"div",71)(23,"div",10)(24,"input",77),r.NdJ("ngModelChange",(function(t){r.CHM(e);const s=r.oxw(2);return r.KtG(s.expression.weekDay=t)}))("ngModelChange",(function(){r.CHM(e);const t=r.oxw(2);return r.KtG(t.setFieldValue())})),r.qZA()()()(),r.BQk()}if(2&e){const e=r.oxw(2);r.xp6(4),r.Q6J("ngModel",e.expression.minutes),r.xp6(5),r.Q6J("ngModel",e.expression.hours),r.xp6(5),r.Q6J("ngModel",e.expression.monthDay),r.xp6(5),r.Q6J("ngModel",e.expression.month),r.xp6(5),r.Q6J("ngModel",e.expression.weekDay)}}function pc(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"div",6)(1,"div",7)(2,"label",8),r._UZ(3,"system-label",9),r.qZA(),r.TgZ(4,"div",10)(5,"div",11)(6,"select",12),r.NdJ("ngModelChange",(function(t){r.CHM(e);const s=r.oxw();return r.KtG(s.expression.recurrence=t)}))("ngModelChange",(function(){r.CHM(e);const t=r.oxw();return r.KtG(t.onRecurrenceSet())})),r.TgZ(7,"option",13),r._UZ(8,"system-label",14),r.qZA(),r.TgZ(9,"option",15),r._UZ(10,"system-label",16),r.qZA(),r.TgZ(11,"option",17),r._UZ(12,"system-label",18),r.qZA(),r.TgZ(13,"option",19),r._UZ(14,"system-label",20),r.qZA(),r.TgZ(15,"option",21),r._UZ(16,"system-label",22),r.qZA(),r.TgZ(17,"option",23),r._UZ(18,"system-label",24),r.qZA(),r.TgZ(19,"option",25),r._UZ(20,"system-label",26),r.qZA()()()()(),r.YNc(21,$r,3,2,"label",27),r.YNc(22,hc,8,7,"ng-container",5),r.YNc(23,gc,25,5,"ng-container",5),r.qZA()}if(2&e){const e=r.oxw();r.xp6(6),r.Q6J("ngModel",e.expression.recurrence),r.xp6(15),r.Q6J("ngIf","custom"!=e.expression.recurrence&&"cron"!=e.expression.recurrence&&"everyWeekday"!=e.expression.recurrence),r.xp6(1),r.Q6J("ngIf","cron"!=e.expression.recurrence),r.xp6(1),r.Q6J("ngIf","cron"==e.expression.recurrence)}}let fc=(()=>{class fieldCronInterval extends d.O{constructor(e,t,s,i,n,l){super(e,t,s,n,l),this.model=e,this.view=t,this.language=s,this.userPreferences=i,this.metadata=n,this.router=l,this.weekdays=[],this.months=[],this.everyLabels={minutes:"LBL_MINUTE{s}",hours:"LBL_HOUR{s}",days:"LBL_DAY{s}",months:"LBL_MONTH{s}",weekdays:"LBL_WEEKDAY{s}",daysAt:"LBL_DAY{s}_AT",monthsAt:"LBL_MONTH{s}_AT"},this.recurrenceLabels={daily:"LBL_DAILY",weekly:"LBL_WEEKLY",monthly:"LBL_MONTHLY",annually:"LBL_ANNUALLY",everyWeekday:"LBL_EVERY_WEEKDAY"}}ngOnInit(){this.setSelectOptionsFromMoment(),this.initializeValue(),this.setLocalValue(this.value),this.subscribeToFieldChanges(),this.subscribeToLanguageChanges()}resetEveryAtValue(){this.expression.everyAtValue=void 0}resetEveryQuantity(){this.expression.everyQuantity=void 0}onRecurrenceSet(){"custom"!=this.expression.recurrence&&"cron"!=this.expression.recurrence?(this.setDefaultRecurrenceEveryAtValue(),this.setFieldValue()):this.expression.every="minutes",this.resetEveryQuantity()}onEverySet(){this.resetEveryAtValue(),"weekdays"==this.expression.every&&(this.resetEveryQuantity(),this.expression.everyAtValue||(this.expression.everyAtValue={})),"daysAt"==this.expression.every&&(this.expression.everyAtValue=moment().hour(0).minute(0).tz(this.userPreferences.toUse.timezone)),null!=this.expression.everyQuantity&&"daysAt"!=this.expression.every&&"monthsAt"!=this.expression.every&&this.setFieldValue()}setDefaultRecurrenceEveryAtValue(){switch(this.expression.recurrence){case"daily":this.expression.everyAtValue=moment(moment().utc().hour(0).minute(0));break;case"weekly":this.expression.everyAtValue="0";break;case"monthly":case"annually":this.expression.everyAtValue="1"}}subscribeToLanguageChanges(){this.subscriptions.add(this.language.currentlanguage$.subscribe((()=>{this.setSelectOptionsFromMoment(),this.setDisplayValue()})))}setSelectOptionsFromMoment(){this.weekdays=moment.weekdays(),this.months=moment.months()}subscribeToFieldChanges(){this.subscriptions.add(this.model.observeFieldChanges(this.fieldname).subscribe((e=>this.setLocalValue(e)))),this.subscriptions.add(this.model.canceledit$.subscribe((()=>this.setLocalValue(this.value))))}setFieldValue(){switch(this.resetExpressionProperties(),this.expression.recurrence){case"custom":this.setCustomExpression();break;case"cron":break;default:this.setExpressionByRecurrenceUnit()}this.expression.stringValue=`${this.expression.minutes}::`,this.expression.stringValue+=`${this.expression.hours}::`,this.expression.stringValue+=`${this.expression.monthDay}::`,this.expression.stringValue+=`${this.expression.month}::`,this.expression.stringValue+=`${this.expression.weekDay}`,this.value=this.expression.stringValue,this.setDisplayValue()}setCustomExpression(){if(!isNaN(this.expression.everyQuantity)||"weekdays"==this.expression.every)switch(this.expression.everyQuantity<1&&(this.expression.everyQuantity=1),this.expression.every){case"minutes":this.expression.everyQuantity>59&&(this.expression.everyQuantity=59),this.expression.minutes=`*/${this.expression.everyQuantity}`;break;case"hours":this.expression.everyQuantity>23&&(this.expression.everyQuantity=23),this.expression.minutes="0",this.expression.hours=`*/${this.expression.everyQuantity}`;break;case"days":this.expression.everyQuantity>31&&(this.expression.everyQuantity=31),this.expression.minutes="0",this.expression.hours="0",this.expression.monthDay=`*/${this.expression.everyQuantity}`;break;case"daysAt":if(!moment.isMoment(this.expression.everyAtValue))break;this.expression.everyQuantity>31&&(this.expression.everyQuantity=31),this.expression.hours=`${this.expression.everyAtValue.utc().hour()}`,this.expression.minutes=`${this.expression.everyAtValue.utc().minute()}`,this.expression.monthDay=`*/${this.expression.everyQuantity}`;break;case"months":this.expression.everyQuantity>12&&(this.expression.everyQuantity=12),this.expression.minutes="0",this.expression.hours="0",this.expression.month=`*/${this.expression.everyQuantity}`;break;case"monthsAt":this.expression.everyAtValue<1&&(this.expression.everyAtValue=1),this.expression.everyAtValue>31&&(this.expression.everyAtValue=31),this.expression.everyQuantity>12&&(this.expression.everyQuantity=12),this.expression.minutes="0",this.expression.hours="0",this.expression.monthDay=`${this.expression.everyAtValue}`,this.expression.month=`*/${this.expression.everyQuantity}`;break;case"weekdays":this.expression.minutes="0",this.expression.hours="0",this.expression.weekDay=this.expression.everyAtValue.join(",")}}resetExpressionProperties(){this.expression.minutes="*",this.expression.hours="*",this.expression.monthDay="*",this.expression.month="*",this.expression.weekDay="*"}setExpressionByRecurrenceUnit(){switch(this.expression.recurrence){case"daily":this.expression.minutes=`${this.expression.everyAtValue.utc().minute()}`,this.expression.hours=`${this.expression.everyAtValue.utc().hour()}`;break;case"weekly":this.expression.minutes="0",this.expression.hours="0",this.expression.weekDay=this.expression.everyAtValue;break;case"everyWeekday":this.expression.minutes="0",this.expression.hours="0",this.expression.weekDay="1-5";break;case"monthly":this.expression.minutes="0",this.expression.hours="0",this.expression.monthDay=this.expression.everyAtValue;break;case"annually":this.expression.minutes="0",this.expression.hours="0",this.expression.month=this.expression.everyAtValue,this.expression.monthDay="1"}}initializeValue(){this.model.isNew&&(this.value="*::*::*::*::*")}setLocalValue(e){if(!e||e==this.expression?.stringValue)return;5==e.split("::").length&&(this.parseExpressionFromString(e),this.setDisplayValue())}parseExpressionFromString(e){this.expression&&(this.expression.every=void 0,this.resetEveryAtValue(),this.resetEveryQuantity());const t=e.split("::");this.expression={minutes:t[0],hours:t[1],monthDay:t[2],month:t[3],weekDay:t[4],stringValue:e},this.setRecurrenceAtFromInput(e),"custom"==this.expression.recurrence&&this.setEveryValueFromExpression()}setRecurrenceAtFromInput(e){const t=!isNaN(+(this.expression.minutes+this.expression.hours))&&e.endsWith("::*::*::*"),s=!isNaN(+(this.expression.minutes+this.expression.hours+this.expression.weekDay))&&"*"==this.expression.month&&"*"==this.expression.monthDay,i="0::0::*::*::1-5"==e,n=!isNaN(+(this.expression.minutes+this.expression.hours+this.expression.monthDay))&&e.endsWith("::*::*"),l=!isNaN(+(this.expression.minutes+this.expression.hours+this.expression.monthDay+this.expression.monthDay))&&e.endsWith("::*");t?(this.expression.recurrence="daily",this.expression.everyAtValue=moment(moment.utc().hour(+this.expression.hours).minute(+this.expression.minutes)).tz(this.userPreferences.toUse.timezone)):s?(this.expression.recurrence="weekly",this.expression.everyAtValue=this.expression.weekDay):i?this.expression.recurrence="everyWeekday":n?(this.expression.recurrence="monthly",this.expression.everyAtValue=this.expression.monthDay):l?(this.expression.recurrence="annually",this.expression.everyAtValue=this.expression.month):this.expression.recurrence="custom"}setEveryValueFromExpression(){const e=this.expression.minutes,t=this.expression.hours,s=this.expression.monthDay,i=this.expression.month,n=this.expression.weekDay;"*"==i&&"*"==n?(e.startsWith("*")&&"*"==t&&"*"==s&&(this.expression.every="minutes",this.expression.everyQuantity="*"==e?1:+e.substring(2)),t.startsWith("*/")&&0==+e&&"*"==s&&(this.expression.every="hours",this.expression.everyQuantity=+t.substring(2)),s.startsWith("*/")&&0==+e&&0==+t&&(this.expression.every="days",this.expression.everyQuantity=+s.substring(2)),s.startsWith("*/")&&+t>-1&&+e>-1&&(this.expression.every="daysAt",this.expression.everyQuantity=+s.substring(2),this.expression.everyAtValue=moment(moment.utc().hour(+t).minute(+e)).tz(this.userPreferences.toUse.timezone))):(i.startsWith("*/")&&0==+e&&0==+t&&"*"==n&&("*"==s&&(this.expression.every="months"),+s>0&&(this.expression.every="monthsAt",this.expression.everyAtValue=+s),this.expression.everyQuantity=+i.substring(2)),isNaN(+n.split(",")[0])||0!=+e||0!=+t||"*"!=i||"*"!=s||(this.expression.every="weekdays",this.expression.everyAtValue=n.split(","))),null==this.expression.every&&(this.expression.recurrence="cron")}setDisplayValue(){if("cron"==this.expression.recurrence)return this.expression.displayValue=this.expression.stringValue;if("custom"!=this.expression.recurrence){switch(this.expression.displayValue=`${this.language.getLabel(this.recurrenceLabels[this.expression.recurrence])} `,this.expression.displayValue+=`${this.language.getLabel("daily"==this.expression.recurrence?"LBL_AT_HOUR":"LBL_ON_DATE","","short")} `,this.expression.recurrence){case"daily":if(!moment.isMoment(this.expression.everyAtValue))break;this.expression.displayValue+=`${this.expression.everyAtValue.tz(this.userPreferences.toUse.timezone).format(this.userPreferences.getTimeFormat())} ${this.language.getLabel("LBL_O_CLOCK")}`;break;case"monthly":this.expression.displayValue+=` ${this.expression.everyAtValue}${this.language.getLabel(1==this.expression.everyAtValue||21==this.expression.everyAtValue||31==this.expression.everyAtValue?"LBL_ST_DAY":2==this.expression.everyAtValue||22==this.expression.everyAtValue?"LBL_ND_DAY":3==this.expression.everyAtValue||23==this.expression.everyAtValue?"LBL_RD_DAY":"")}`;break;case"weekly":this.expression.displayValue+=` ${this.weekdays[this.expression.everyAtValue]}`;break;case"annually":this.expression.displayValue+=` ${this.months[this.expression.everyAtValue-1]}`;break;default:this.expression.displayValue+=`${this.expression.everyAtValue}`}return}this.expression.displayValue=`${this.language.getLabel("LBL_EVERY")} `;const e=this.expression.everyAtValue;if(this.expression.every&&"weekdays"!=this.expression.every){const e=this.language.getLabel(this.everyLabels[this.expression.every].replace("{s}",this.expression.everyQuantity>1?"S":""));this.expression.displayValue+=`${this.expression.everyQuantity} ${e}`}this.expression.everyAtValue&&("monthsAt"==this.expression.every?this.expression.displayValue+=` ${this.expression.everyAtValue}${this.language.getLabel(1==e||21==e||31==e?"LBL_ST_DAY":2==e||22==e?"LBL_ND_DAY":3==e||23==e?"LBL_RD_DAY":"")}`:"daysAt"==this.expression.every&&moment.isMoment(this.expression.everyAtValue)?this.expression.displayValue+=` ${e.tz(this.userPreferences.toUse.timezone).format(this.userPreferences.getTimeFormat())} ${this.language.getLabel("LBL_O_CLOCK")}`:"weekdays"==this.expression.every&&(this.expression.displayValue+=` ${this.expression.everyAtValue.map((e=>this.weekdays[e])).join(", ")}`))}}return fieldCronInterval.ɵfac=function(e){return new(e||fieldCronInterval)(r.Y36(Z.o),r.Y36(A.e),r.Y36(x.d),r.Y36(pe.z),r.Y36(c.Pu),r.Y36(k.F0))},fieldCronInterval.ɵcmp=r.Xpm({type:fieldCronInterval,selectors:[["field-cron-interval"]],features:[r.qOj],decls:3,vars:3,consts:[[3,"fieldname","fieldconfig",4,"ngIf"],[3,"fielddisplayclass","editable","fieldconfig",4,"ngIf"],["class","slds-grid",4,"ngIf"],[3,"fieldname","fieldconfig"],[3,"fielddisplayclass","editable","fieldconfig"],[4,"ngIf"],[1,"slds-grid"],[1,"slds-form-element","slds-grid","slds-grid--vertical-align-center","slds-grow"],[1,"slds-form-element__label"],["label","LBL_REPEAT"],[1,"slds-form-element__control","slds-grow"],[1,"slds-select_container"],[1,"slds-select",3,"ngModel","ngModelChange"],["value","daily"],["label","LBL_DAILY"],["value","weekly"],["label","LBL_WEEKLY"],["value","monthly"],["label","LBL_MONTHLY"],["value","annually"],["label","LBL_ANNUALLY"],["value","everyWeekday"],["label","LBL_EVERY_WEEKDAY"],["value","custom"],["label","LBL_CUSTOM"],["value","cron"],["label","LBL_CRON_EXPRESSION"],["class","slds-form-element__label slds-align-middle slds-m-left--small",4,"ngIf"],[1,"slds-form-element__label","slds-align-middle","slds-m-left--small"],["label","LBL_AT_HOUR","length","short",4,"ngIf"],["label","LBL_ON_DATE","length","short",4,"ngIf"],["label","LBL_AT_HOUR","length","short"],["label","LBL_ON_DATE","length","short"],["class","slds-form-element slds-grid slds-grid--vertical-align-center slds-m-left--xx-small slds-grow",4,"ngIf"],["class","slds-form-element slds-grid slds-m-left--xx-small slds-grow",4,"ngIf"],["class","slds-form-element slds-m-left--xx-small slds-grow",4,"ngIf"],["class","slds-form-element slds-m-left--xx-small slds-grid slds-grid--vertical-align-center slds-grow",4,"ngIf"],[1,"slds-form-element","slds-grid","slds-grid--vertical-align-center","slds-m-left--xx-small","slds-grow"],["label","LBL_EVERY"],["type","text","size","3","maxlength","3",1,"slds-input",3,"ngModel","ngModelChange"],[1,"slds-form-element","slds-grid","slds-m-left--xx-small","slds-grow"],["value","minutes"],[3,"label"],["value","hours"],["value","days"],["value","daysAt"],["value","months"],["value","monthsAt"],["value","weekdays"],["label","LBL_WEEK_ON"],[1,"slds-form-element","slds-m-left--xx-small","slds-grow"],[1,"slds-form-element__control","slds-input-has-fixed-addon","slds-grow"],[1,"slds-grow","slds-p-left--xxx-small",3,"ngModel","ngModelChange"],[1,"slds-form-element__addon",2,"white-space","nowrap"],["label","LBL_O_CLOCK"],["type","text","size","3","maxlength","6",1,"slds-input",3,"ngModel","ngModelChange"],[3,"ngSwitch",4,"ngIf"],[3,"ngSwitch"],["label","LBL_ST_DAY",4,"ngSwitchCase"],["label","LBL_ND_DAY",4,"ngSwitchCase"],["label","LBL_RD_DAY",4,"ngSwitchCase"],["label","LBL_TH_DAY",4,"ngSwitchDefault"],["label","LBL_ST_DAY"],["label","LBL_ND_DAY"],["label","LBL_RD_DAY"],["label","LBL_TH_DAY"],[1,"slds-form-element","slds-m-left--xx-small","slds-grid","slds-grid--vertical-align-center","slds-grow"],[3,"showPills","ngModel","listItems","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[1,"slds-m-left--xx-small","slds-grid","slds-grid--vertical-align-center","slds-grow"],[1,"slds-form-element","slds-grow"],["type","text","system-placeholder","LBL_MINUTES","size","3","maxlength","6",1,"slds-input",3,"ngModel","ngModelChange"],[1,"slds-m-horizontal--xx-small"],["type","text","system-placeholder","LBL_HOURS","size","3","maxlength","6",1,"slds-input",3,"ngModel","ngModelChange"],["type","text","system-placeholder","LBL_MONTH_DAY","size","3","maxlength","6",1,"slds-input",3,"ngModel","ngModelChange"],["type","text","system-placeholder","LBL_MONTH","size","3","maxlength","6",1,"slds-input",3,"ngModel","ngModelChange"],["type","text","system-placeholder","LBL_WEEK_DAY","size","3","maxlength","6",1,"slds-input",3,"ngModel","ngModelChange"]],template:function(e,t){1&e&&(r.YNc(0,Pr,1,2,"field-label",0),r.YNc(1,zr,2,4,"field-generic-display",1),r.YNc(2,pc,24,4,"div",2)),2&e&&(r.Q6J("ngIf",t.displayLabel),r.xp6(1),r.Q6J("ngIf",!t.isEditMode()),r.xp6(1),r.Q6J("ngIf",t.isEditMode()&&!!t.expression))},dependencies:[i.sg,i.O5,i.RF,i.n9,i.ED,n.YN,n.Kr,n.Fj,n.EJ,n.JJ,n.nD,n.On,Gi.H,X._,qt.I,Gr.A,u.q,C.D],encapsulation:2}),fieldCronInterval})();var bc=s(3845);function _c(e,t){if(1&e&&r._UZ(0,"field-label",3),2&e){const e=r.oxw();r.Q6J("fieldname",e.fieldname)("fieldconfig",e.fieldconfig)}}function yc(e,t){if(1&e&&(r.TgZ(0,"field-generic-display",4),r._uU(1),r.qZA()),2&e){const e=r.oxw();r.Q6J("fielddisplayclass",e.fielddisplayclass)("editable",e.isEditable())("fieldconfig",e.fieldconfig)("title",e.value)("fieldid",e.fieldid),r.xp6(1),r.hij(" ",e.value,"\n")}}function vc(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"div",5)(1,"system-googleplaces-search",6,7),r.NdJ("ngModelChange",(function(t){r.CHM(e);const s=r.oxw();return r.KtG(s.value=t)}))("details",(function(t){r.CHM(e);const s=r.oxw();return r.KtG(s.setDetails(t))})),r.qZA(),r._UZ(3,"field-messages",8),r.qZA()}if(2&e){const e=r.oxw();r.Q6J("ngClass",e.css_classes),r.xp6(1),r.Q6J("ngModel",e.value),r.xp6(2),r.Q6J("fieldname",e.fieldname)}}let xc=(()=>{class fieldGooglePlacesSearch extends d.O{constructor(e,t,s,i,n,l){super(e,t,s,i,l),this.model=e,this.view=t,this.language=s,this.metadata=i,this.configurationService=n,this.router=l,this.options=[]}setDetails(e){let t={};this.fieldconfig.formatted_phone_number&&e.formatted_phone_number&&(t[this.fieldconfig.formatted_phone_number]=e.formatted_phone_number),this.fieldconfig.international_phone_number&&e.international_phone_number&&(t[this.fieldconfig.international_phone_number]=e.international_phone_number),this.fieldconfig.website&&e.website&&(t[this.fieldconfig.website]=e.website),e.address&&(this.fieldconfig.city&&e.address.city&&(t[this.fieldconfig.city]=e.address.city),this.fieldconfig.country&&e.address.country&&(t[this.fieldconfig.country]=e.address.country),this.fieldconfig.postalcode&&e.address.postalcode&&(t[this.fieldconfig.postalcode]=e.address.postalcode),this.fieldconfig.state&&e.address.state&&(t[this.fieldconfig.state]=e.address.state),this.fieldconfig.street&&e.address.street_name&&(t[this.fieldconfig.street]=e.address.street_name),!this.hideStreetNumber&&this.fieldconfig.street_number&&e.address.street_number?t[this.fieldconfig.street_number]=e.address.street_number:this.hideStreetNumber&&this.fieldconfig.street&&e.address.street_name&&e.address.street_number&&(t[this.fieldconfig.street]+=" "+e.address.street_number),this.fieldconfig.latitude&&e.address.latitude&&(t[this.fieldconfig.latitude]=e.address.latitude),this.fieldconfig.longitude&&e.address.longitude&&(t[this.fieldconfig.longitude]=e.address.longitude)),_.isEmpty(t)||this.model.setFields(t)}get hideStreetNumber(){return!!JSON.parse(this.configurationService.data.backendextensions.address_format?.config?.format||"{}")?.hidestreetnumber}}return fieldGooglePlacesSearch.ɵfac=function(e){return new(e||fieldGooglePlacesSearch)(r.Y36(Z.o),r.Y36(A.e),r.Y36(x.d),r.Y36(c.Pu),r.Y36(K.C),r.Y36(k.F0))},fieldGooglePlacesSearch.ɵcmp=r.Xpm({type:fieldGooglePlacesSearch,selectors:[["field-google-places-search"]],features:[r.qOj],decls:3,vars:3,consts:[[3,"fieldname","fieldconfig",4,"ngIf"],[3,"fielddisplayclass","editable","fieldconfig","title","fieldid",4,"ngIf"],["class","slds-form-element__control",3,"ngClass",4,"ngIf"],[3,"fieldname","fieldconfig"],[3,"fielddisplayclass","editable","fieldconfig","title","fieldid"],[1,"slds-form-element__control",3,"ngClass"],[3,"ngModel","ngModelChange","details"],["focus",""],[3,"fieldname"]],template:function(e,t){1&e&&(r.YNc(0,_c,1,2,"field-label",0),r.YNc(1,yc,2,6,"field-generic-display",1),r.YNc(2,vc,4,3,"div",2)),2&e&&(r.Q6J("ngIf",t.displayLabel),r.xp6(1),r.Q6J("ngIf",!t.isEditMode()),r.xp6(1),r.Q6J("ngIf",t.isEditable()&&t.isEditMode()))},dependencies:[i.mk,i.O5,n.JJ,n.On,bc.l,u.q,C.D,I.a],encapsulation:2}),fieldGooglePlacesSearch})();function Zc(e,t){if(1&e&&r._UZ(0,"field-label",2),2&e){const e=r.oxw();r.Q6J("fieldname",e.fieldname)("fieldconfig",e.fieldconfig)}}let wc=(()=>{class fieldTextID extends d.O{constructor(e,t,s,i,n,l){super(e,t,s,i,l),this.model=e,this.view=t,this.language=s,this.metadata=i,this.configurationService=n,this.router=l}get textName(){let e=this.configurationService.getData("systextids"),t=e?e[this.value]:void 0;return t&&t.label?this.language.getLabel(t.label):this.value}}return fieldTextID.ɵfac=function(e){return new(e||fieldTextID)(r.Y36(Z.o),r.Y36(A.e),r.Y36(x.d),r.Y36(c.Pu),r.Y36(K.C),r.Y36(k.F0))},fieldTextID.ɵcmp=r.Xpm({type:fieldTextID,selectors:[["field-textid"]],features:[r.qOj],decls:3,vars:7,consts:[[3,"fieldname","fieldconfig",4,"ngIf"],[3,"editable","fielddisplayclass","fieldconfig","title","fieldid"],[3,"fieldname","fieldconfig"]],template:function(e,t){1&e&&(r.YNc(0,Zc,1,2,"field-label",0),r.TgZ(1,"field-generic-display",1),r._uU(2),r.qZA()),2&e&&(r.Q6J("ngIf",t.displayLabel),r.xp6(1),r.Q6J("editable",!1)("fielddisplayclass",t.fielddisplayclass)("fieldconfig",t.fieldconfig)("title",t.value)("fieldid",t.fieldid),r.xp6(1),r.hij(" ",t.textName,"\n"))},dependencies:[i.O5,u.q,C.D],encapsulation:2}),fieldTextID})();var Tc=s(8973);function Cc(e,t){if(1&e&&(r.TgZ(0,"field-generic-display",2),r._uU(1),r.qZA()),2&e){const e=r.oxw();r.Q6J("fielddisplayclass",e.fielddisplayclass)("editable",e.isEditable())("fieldconfig",e.fieldconfig)("title",e.value)("fieldid",e.fieldid),r.xp6(1),r.AsE(" ",e.className,"->",e.methodName,"\n")}}function Ac(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"div",3)(1,"system-input-backend-method",4),r.NdJ("ngModelChange",(function(t){r.CHM(e);const s=r.oxw();return r.KtG(s.value=t)})),r.qZA(),r._UZ(2,"field-messages",5),r.qZA()}if(2&e){const e=r.oxw();r.Q6J("ngClass",e.css_classes),r.xp6(1),r.Q6J("ngModel",e.value),r.xp6(1),r.Q6J("fieldname",e.fieldname)}}let kc=(()=>{class fieldBackendMethod extends d.O{constructor(e,t,s,i,n){super(e,t,s,i,n),this.model=e,this.view=t,this.language=s,this.metadata=i,this.router=n,this.classexists=!1,this.publicMethods=[]}get className(){return this.value?this.value.split("->")[0]:""}set className(e){this.value=e,this.validateNamespace()}get methodName(){if(this.value){if(2==this.value.split("->").length)return this.value.split("->")[1]}return""}set methodName(e){let t=this.value.split("->");this.value=t[0]+"->"+e}validateNamespace(){this.model.backend.getRequest("system/checkclass/"+btoa(this.className)).subscribe((e=>{this.classexists=e.classexists,this.publicMethods=e.methods}))}}return fieldBackendMethod.ɵfac=function(e){return new(e||fieldBackendMethod)(r.Y36(Z.o),r.Y36(A.e),r.Y36(x.d),r.Y36(c.Pu),r.Y36(k.F0))},fieldBackendMethod.ɵcmp=r.Xpm({type:fieldBackendMethod,selectors:[["field-backend-method"]],features:[r.qOj],decls:2,vars:2,consts:[[3,"fielddisplayclass","editable","fieldconfig","title","fieldid",4,"ngIf"],["class","slds-form-element__control slds-p-around--xx-small",3,"ngClass",4,"ngIf"],[3,"fielddisplayclass","editable","fieldconfig","title","fieldid"],[1,"slds-form-element__control","slds-p-around--xx-small",3,"ngClass"],[3,"ngModel","ngModelChange"],[3,"fieldname"]],template:function(e,t){1&e&&(r.YNc(0,Cc,2,7,"field-generic-display",0),r.YNc(1,Ac,3,3,"div",1)),2&e&&(r.Q6J("ngIf",!t.isEditMode()),r.xp6(1),r.Q6J("ngIf",t.isEditable()&&t.isEditMode()))},dependencies:[i.mk,i.O5,n.JJ,n.On,Tc.N,C.D,I.a],encapsulation:2}),fieldBackendMethod})();var Lc=s(3497);function Mc(e,t){if(1&e&&(r.TgZ(0,"field-generic-display",2),r._uU(1),r.qZA()),2&e){const e=r.oxw();r.Q6J("fielddisplayclass",e.fielddisplayclass)("editable",e.isEditable())("fieldconfig",e.fieldconfig)("title",e.value)("fieldid",e.fieldid),r.xp6(1),r.hij(" ",e.value,"\n")}}function Sc(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"div",3)(1,"system-input-label",4),r.NdJ("ngModelChange",(function(t){r.CHM(e);const s=r.oxw();return r.KtG(s.value=t)})),r.qZA(),r._UZ(2,"field-messages",5),r.qZA()}if(2&e){const e=r.oxw();r.Q6J("ngClass",e.css_classes),r.xp6(1),r.Q6J("ngModel",e.value),r.xp6(1),r.Q6J("fieldname",e.fieldname)}}let Ic=(()=>{class fieldSystemLabel extends d.O{}return fieldSystemLabel.ɵfac=function(){let e;return function(t){return(e||(e=r.n5z(fieldSystemLabel)))(t||fieldSystemLabel)}}(),fieldSystemLabel.ɵcmp=r.Xpm({type:fieldSystemLabel,selectors:[["field-system-label"]],features:[r.qOj],decls:2,vars:2,consts:[[3,"fielddisplayclass","editable","fieldconfig","title","fieldid",4,"ngIf"],["class","slds-form-element__control",3,"ngClass",4,"ngIf"],[3,"fielddisplayclass","editable","fieldconfig","title","fieldid"],[1,"slds-form-element__control",3,"ngClass"],[3,"ngModel","ngModelChange"],[3,"fieldname"]],template:function(e,t){1&e&&(r.YNc(0,Mc,2,6,"field-generic-display",0),r.YNc(1,Sc,3,3,"div",1)),2&e&&(r.Q6J("ngIf",!t.isEditMode()),r.xp6(1),r.Q6J("ngIf",t.isEditable()&&t.isEditMode()))},dependencies:[i.mk,i.O5,n.JJ,n.On,Lc.$,C.D,I.a],encapsulation:2}),fieldSystemLabel})();function Oc(e,t){if(1&e&&(r.TgZ(0,"field-generic-display",2),r._uU(1),r.qZA()),2&e){const e=r.oxw();r.Q6J("fielddisplayclass",e.fielddisplayclass)("editable",e.isEditable())("fieldconfig",e.fieldconfig)("title",e.value)("fieldid",e.fieldid),r.xp6(1),r.hij(" ",e.value,"\n")}}function Jc(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"div",3)(1,"div",4)(2,"input",5,6),r.NdJ("ngModelChange",(function(t){r.CHM(e);const s=r.oxw();return r.KtG(s.timedifferencespan=t)})),r.qZA(),r.TgZ(4,"div",7)(5,"select",8),r.NdJ("ngModelChange",(function(t){r.CHM(e);const s=r.oxw();return r.KtG(s.timedifferenceunit=t)})),r.TgZ(6,"option",9),r._UZ(7,"system-label",10),r.qZA(),r.TgZ(8,"option",11),r._UZ(9,"system-label",12),r.qZA(),r.TgZ(10,"option",13),r._UZ(11,"system-label",14),r.qZA(),r.TgZ(12,"option",15),r._UZ(13,"system-label",16),r.qZA(),r.TgZ(14,"option",17),r._UZ(15,"system-label",18),r.qZA(),r.TgZ(16,"option",19),r._UZ(17,"system-label",20),r.qZA(),r.TgZ(18,"option",21),r._UZ(19,"system-label",22),r.qZA(),r.TgZ(20,"option",23),r._UZ(21,"system-label",24),r.qZA()()()(),r._UZ(22,"field-messages",25),r.qZA()}if(2&e){const e=r.oxw();r.Q6J("ngClass",e.css_classes),r.xp6(2),r.Q6J("ngModel",e.timedifferencespan)("maxlength",e.fieldlength)("ngModelOptions",e.modelOptions),r.xp6(3),r.Q6J("ngModel",e.timedifferenceunit),r.xp6(17),r.Q6J("fieldname",e.fieldname)}}let Nc=(()=>{class fieldTimeDifference extends d.O{constructor(e,t,s,i,n){super(e,t,s,i,n),this.model=e,this.view=t,this.language=s,this.metadata=i,this.router=n}get timedifferenceunit(){return this._timedifferenceunit?this._timedifferenceunit:this.value?this.value.split(" ")[1]:"h"}set timedifferenceunit(e){this._timedifferenceunit=e,this.updateModel()}get timedifferencespan(){return this._timedifferencespan?this._timedifferencespan:this.value?this.value.split(" ")[0]:""}set timedifferencespan(e){this._timedifferencespan=e,this.updateModel()}updateModel(){this._timedifferencespan>0&&this.timedifferenceunit?this.value=this.timedifferencespan+" "+this._timedifferenceunit:this.value=""}}return fieldTimeDifference.ɵfac=function(e){return new(e||fieldTimeDifference)(r.Y36(Z.o),r.Y36(A.e),r.Y36(x.d),r.Y36(c.Pu),r.Y36(k.F0))},fieldTimeDifference.ɵcmp=r.Xpm({type:fieldTimeDifference,selectors:[["field-time-difference"]],features:[r.qOj],decls:2,vars:2,consts:[[3,"fielddisplayclass","editable","fieldconfig","title","fieldid",4,"ngIf"],["class","slds-form-element__control slds-p-around--xx-small",3,"ngClass",4,"ngIf"],[3,"fielddisplayclass","editable","fieldconfig","title","fieldid"],[1,"slds-form-element__control","slds-p-around--xx-small",3,"ngClass"],[1,"slds-grid","slds-grid--vertical-align-center","slds-gutters_direct-xx-small"],["type","number",1,"slds-col","slds-size--1-of-2","slds-input","slds-text-align--right",3,"ngModel","maxlength","ngModelOptions","ngModelChange"],["focus",""],[1,"slds-col","slds-size--1-of-2","slds-select_container"],[1,"slds-select",3,"ngModel","ngModelChange"],["value","i"],["label","LBL_MINUTES"],["value","h"],["label","LBL_HOURS"],["value","H"],["label","LBL_WORKINGHOURS"],["value","d"],["label","LBL_DAYS"],["value","D"],["label","LBL_WORKINGDAYS"],["value","w"],["label","LBL_WEEKS"],["value","M"],["label","LBL_MONTHS"],["value","y"],["label","LBL_YEARS"],[3,"fieldname"]],template:function(e,t){1&e&&(r.YNc(0,Oc,2,6,"field-generic-display",0),r.YNc(1,Jc,23,6,"div",1)),2&e&&(r.Q6J("ngIf",!t.isEditMode()),r.xp6(1),r.Q6J("ngIf",t.isEditable()&&t.isEditMode()))},dependencies:[i.mk,i.O5,n.YN,n.Kr,n.Fj,n.wV,n.EJ,n.JJ,n.nD,n.On,X._,C.D,I.a],encapsulation:2}),fieldTimeDifference})(),Fc=(()=>{class fieldIconPopover extends d.O{constructor(e,t,s,i,n,l,o){super(e,t,i,n,l),this.model=e,this.view=t,this.broadcast=s,this.language=i,this.metadata=n,this.router=l,this.elementRef=o,this.parentTypeSelectOpen=!1,this.parentSearchOpen=!1,this.parentSearchTerm="",this.recentItems=[],this.broadcast.message$.subscribe((e=>this.handleMessage(e)))}get parentField(){return this.model.getField("grpaccount_id")}get parentIdField(){return this.fieldconfig.parentIdField?this.fieldconfig.parentIdField:"parent_id"}get memberCount(){return this.model.getField("grp_member_count")}get parentTypes(){let e=["Contacts","Accounts","Leads"];return this.fieldconfig.parenttypes&&(e=this.fieldconfig.parenttypes.replace(/\s/g,"").split(",")),e}handleMessage(e){if(e.messagedata.reference&&"model.save"===e.messagetype)if(this.fieldid===e.messagedata.reference){this.parentSearchTerm="";let t={};t[this.parentIdField]=e.messagedata.data.id,t[this.fieldname]=e.messagedata.data.summary_text,this.model.setFields(t)}}onClick(e){this.elementRef.nativeElement.contains(e.target)||this.closePopups()}closePopups(){this.model.getField(this.parentIdField)&&(this.parentSearchTerm=""),this.parentSearchOpen=!1,this.parentTypeSelectOpen=!1,this.clickListener()}}return fieldIconPopover.ɵfac=function(e){return new(e||fieldIconPopover)(r.Y36(Z.o),r.Y36(A.e),r.Y36(V.f),r.Y36(x.d),r.Y36(c.Pu),r.Y36(k.F0),r.Y36(r.SBq))},fieldIconPopover.ɵcmp=r.Xpm({type:fieldIconPopover,selectors:[["field-icon-popover"]],features:[r.qOj],decls:3,vars:3,consts:[[3,"fielddisplayclass","editable","fieldconfig"],["system-model-popover",""],["size","x-small","icon","info"]],template:function(e,t){1&e&&(r.TgZ(0,"field-generic-display",0)(1,"div",1),r._UZ(2,"system-utility-icon",2),r.qZA()()),2&e&&r.Q6J("fielddisplayclass",t.fielddisplayclass)("editable",!1)("fieldconfig",t.fieldconfig)},dependencies:[M.r,us.g,C.D],encapsulation:2}),fieldIconPopover})();function qc(e,t){if(1&e&&r._UZ(0,"field-label",3),2&e){const e=r.oxw();r.Q6J("fieldname",e.fieldname)("fieldconfig",e.fieldconfig)}}function Ec(e,t){if(1&e&&(r.TgZ(0,"field-generic-display",4),r._uU(1),r.qZA()),2&e){const e=r.oxw();r.Q6J("fielddisplayclass",e.fielddisplayclass)("editable",e.isEditable())("fieldconfig",e.fieldconfig)("fieldid",e.fieldid),r.xp6(1),r.hij(" ",e.getValue(),"\n")}}function Yc(e,t){if(1&e&&(r.TgZ(0,"option",13),r._uU(1),r.qZA()),2&e){const e=t.$implicit;r.s9C("value",e.id),r.xp6(1),r.Oqu(e.name)}}function Qc(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"div",5)(1,"div",6)(2,"div",7)(3,"select",8,9),r.NdJ("ngModelChange",(function(t){r.CHM(e);const s=r.oxw();return r.KtG(s.value=t)})),r._UZ(5,"option",10),r.YNc(6,Yc,2,2,"option",11),r.qZA()(),r._UZ(7,"field-messages",12),r.qZA()()}if(2&e){const e=r.oxw();r.xp6(1),r.Q6J("ngClass",e.getFieldClass()),r.xp6(2),r.Q6J("ngModel",e.value),r.xp6(3),r.Q6J("ngForOf",e.stylesheets),r.xp6(1),r.Q6J("fieldname",e.fieldname)}}let Uc=(()=>{class fieldStylesheetID extends d.O{constructor(e,t,s,i,n){super(e,t,s,i,n),this.model=e,this.view=t,this.language=s,this.metadata=i,this.router=n,this.stylesheets=[],this.stylesheets=this.metadata.getHtmlStylesheetNames()}getValue(){if(this.value){let e=this.stylesheets.find((e=>e.id==this.value));if(e)return e.name}return this.value}}return fieldStylesheetID.ɵfac=function(e){return new(e||fieldStylesheetID)(r.Y36(Z.o),r.Y36(A.e),r.Y36(x.d),r.Y36(c.Pu),r.Y36(k.F0))},fieldStylesheetID.ɵcmp=r.Xpm({type:fieldStylesheetID,selectors:[["field-stylesheetid"]],features:[r.qOj],decls:3,vars:3,consts:[[3,"fieldname","fieldconfig",4,"ngIf"],[3,"fielddisplayclass","editable","fieldconfig","fieldid",4,"ngIf"],["class","slds-form-element",4,"ngIf"],[3,"fieldname","fieldconfig"],[3,"fielddisplayclass","editable","fieldconfig","fieldid"],[1,"slds-form-element"],[1,"slds-form-element__control",3,"ngClass"],[1,"slds-select_container","slds-m-vertical--xx-small"],[1,"slds-select",3,"ngModel","ngModelChange"],["focus",""],["value",""],[3,"value",4,"ngFor","ngForOf"],[3,"fieldname"],[3,"value"]],template:function(e,t){1&e&&(r.YNc(0,qc,1,2,"field-label",0),r.YNc(1,Ec,2,5,"field-generic-display",1),r.YNc(2,Qc,8,4,"div",2)),2&e&&(r.Q6J("ngIf",t.displayLabel),r.xp6(1),r.Q6J("ngIf",!t.isEditMode()),r.xp6(1),r.Q6J("ngIf",t.isEditMode()))},dependencies:[i.mk,i.sg,i.O5,n.YN,n.Kr,n.EJ,n.JJ,n.On,u.q,C.D,I.a],encapsulation:2}),fieldStylesheetID})();var Dc=s(1691);function jc(e,t){if(1&e&&r._UZ(0,"field-label",3),2&e){const e=r.oxw();r.Q6J("fieldname",e.fieldname)("fieldconfig",e.fieldconfig)}}function Rc(e,t){if(1&e&&(r.TgZ(0,"field-generic-display",4),r._uU(1),r.qZA()),2&e){const e=r.oxw();r.Q6J("fielddisplayclass",e.fielddisplayclass)("fieldconfig",e.fieldconfig)("editable",e.isEditable()),r.xp6(1),r.hij(" ",e.getUOMLabel(),"\n")}}function Bc(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"div",5)(1,"system-select-uom",6),r.NdJ("ngModelChange",(function(t){r.CHM(e);const s=r.oxw();return r.KtG(s.value=t)})),r.qZA(),r._UZ(2,"field-messages",7),r.qZA()}if(2&e){const e=r.oxw();r.Q6J("ngClass",e.getFieldClass()),r.xp6(1),r.Q6J("ngModel",e.value),r.xp6(1),r.Q6J("fieldname",e.fieldname)}}let Gc=(()=>{class fieldUnitsOfMeasure extends d.O{constructor(e,t,s,i,n,l){super(e,t,s,i,n),this.model=e,this.view=t,this.language=s,this.metadata=i,this.router=n,this.configuration=l,this.uoms=[],this.uoms=this.configuration.getData("uomunits")}getUOMLabel(){if(this.value){let e=this.uoms.find((e=>e.id==this.value));if(e)return this.language.getLabel(e.label)}return this.value}}return fieldUnitsOfMeasure.ɵfac=function(e){return new(e||fieldUnitsOfMeasure)(r.Y36(Z.o),r.Y36(A.e),r.Y36(x.d),r.Y36(c.Pu),r.Y36(k.F0),r.Y36(K.C))},fieldUnitsOfMeasure.ɵcmp=r.Xpm({type:fieldUnitsOfMeasure,selectors:[["field-units-of-measure"]],features:[r.qOj],decls:3,vars:3,consts:[[3,"fieldname","fieldconfig",4,"ngIf"],[3,"fielddisplayclass","fieldconfig","editable",4,"ngIf"],["class","slds-form-element__control",3,"ngClass",4,"ngIf"],[3,"fieldname","fieldconfig"],[3,"fielddisplayclass","fieldconfig","editable"],[1,"slds-form-element__control",3,"ngClass"],[3,"ngModel","ngModelChange"],[3,"fieldname"]],template:function(e,t){1&e&&(r.YNc(0,jc,1,2,"field-label",0),r.YNc(1,Rc,2,4,"field-generic-display",1),r.YNc(2,Bc,3,3,"div",2)),2&e&&(r.Q6J("ngIf",t.displayLabel),r.xp6(1),r.Q6J("ngIf",!t.isEditMode()),r.xp6(1),r.Q6J("ngIf",t.isEditable()&&t.isEditMode()))},dependencies:[i.mk,i.O5,n.JJ,n.On,Dc.E,u.q,C.D,I.a],encapsulation:2}),fieldUnitsOfMeasure})();function Pc(e,t){if(1&e&&r._UZ(0,"field-label",3),2&e){const e=r.oxw();r.Q6J("fieldname",e.fieldname)("fieldconfig",e.fieldconfig)}}function Hc(e,t){if(1&e&&(r.TgZ(0,"field-generic-display",4)(1,"div",5)(2,"span"),r._uU(3),r.qZA()()()),2&e){const e=r.oxw();r.Q6J("fielddisplayclass",e.fielddisplayclass)("fieldconfig",e.fieldconfig)("editable",e.isEditable()),r.xp6(3),r.AsE("",e.getValAsText()," ",e.uomLabel,"")}}function zc(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"div",6)(1,"div",7)(2,"div",8)(3,"input",9,10),r.NdJ("ngModelChange",(function(t){r.CHM(e);const s=r.oxw();return r.KtG(s.textvalue=t)}))("change",(function(){r.CHM(e);const t=r.oxw();return r.KtG(t.changed())})),r.qZA()(),r.TgZ(5,"system-select-uom",11),r.NdJ("ngModelChange",(function(t){r.CHM(e);const s=r.oxw();return r.KtG(s.uomid=t)})),r.qZA()(),r._UZ(6,"field-messages",12),r.qZA()}if(2&e){const e=r.oxw();r.Q6J("ngClass",e.getFieldClass()),r.xp6(3),r.Q6J("ngModel",e.textvalue),r.xp6(2),r.Q6J("ngModel",e.uomid),r.xp6(1),r.Q6J("fieldname",e.fieldname)}}let Vc=(()=>{class fieldQuantity extends ve{constructor(e,t,s,i,n,l,o){super(e,t,s,i,n,l),this.model=e,this.view=t,this.language=s,this.metadata=i,this.router=n,this.userpreferences=l,this.configuration=o,this.uoms=[],this.uoms=this.configuration.getData("uomunits")}get uomidfield(){return this.fieldconfig.uomid_field?this.fieldconfig.uomid_field:this.metadata.getModuleFields(this.model.module).uom_id?"uom_id":void 0}get uomid(){return this.model.getField(this.uomidfield)}set uomid(e){this.model.setField(this.uomidfield,e)}get uomLabel(){if(this.value){let e=this.uoms.find((e=>e.id==this.uomid));return e?this.language.getLabel(e.label):this.uomid}return""}}return fieldQuantity.ɵfac=function(e){return new(e||fieldQuantity)(r.Y36(Z.o),r.Y36(A.e),r.Y36(x.d),r.Y36(c.Pu),r.Y36(k.F0),r.Y36(pe.z),r.Y36(K.C))},fieldQuantity.ɵcmp=r.Xpm({type:fieldQuantity,selectors:[["ng-component"]],features:[r.qOj],decls:3,vars:3,consts:[[3,"fieldname","fieldconfig",4,"ngIf"],[3,"fielddisplayclass","fieldconfig","editable",4,"ngIf"],["class","slds-form-element__control",3,"ngClass",4,"ngIf"],[3,"fieldname","fieldconfig"],[3,"fielddisplayclass","fieldconfig","editable"],[1,"slds-text-align_right"],[1,"slds-form-element__control",3,"ngClass"],[1,"slds-grid","slds-grid--align-spread","slds-grid--vertical-align-center"],[1,"slds-form-element","slds-size--2-of-3"],["type","text",1,"slds-input","slds-text-align--right",3,"ngModel","ngModelChange","change"],["floatinput",""],[1,"slds-size--1-of-3","slds-p-left--x-small",3,"ngModel","ngModelChange"],[3,"fieldname"]],template:function(e,t){1&e&&(r.YNc(0,Pc,1,2,"field-label",0),r.YNc(1,Hc,4,5,"field-generic-display",1),r.YNc(2,zc,7,4,"div",2)),2&e&&(r.Q6J("ngIf",t.displayLabel),r.xp6(1),r.Q6J("ngIf",!t.isEditMode()),r.xp6(1),r.Q6J("ngIf",t.isEditable()&&t.isEditMode()))},dependencies:[i.mk,i.O5,n.Fj,n.JJ,n.On,Dc.E,u.q,C.D,I.a],encapsulation:2}),fieldQuantity})();function Kc(e,t){if(1&e&&r._UZ(0,"field-label",3),2&e){const e=r.oxw();r.Q6J("fieldname",e.fieldname)("fieldconfig",e.fieldconfig)}}function $c(e,t){1&e&&(r.TgZ(0,"span"),r._uU(1," • "),r.qZA())}function Xc(e,t){if(1&e&&(r.TgZ(0,"span"),r._uU(1),r.YNc(2,$c,2,0,"span",2),r.qZA()),2&e){const e=t.$implicit,s=t.last;r.xp6(1),r.AsE("",e.name,": ",e.value,""),r.xp6(1),r.Q6J("ngIf",!s)}}function Wc(e,t){if(1&e&&(r.TgZ(0,"span"),r.YNc(1,Xc,3,3,"span",4),r.qZA()),2&e){const e=r.oxw();r.xp6(1),r.Q6J("ngForOf",e.categories)}}function eu(e,t){1&e&&(r.TgZ(0,"span")(1,"i"),r._UZ(2,"system-label",5),r.qZA()())}let tu=(()=>{class fieldQuestionnaireEvaluation extends d.O{constructor(e,t,s,i,n,l){super(e,t,s,i,n),this.model=e,this.view=t,this.language=s,this.metadata=i,this.router=n,this.backend=l,this.categories=[],this.isEvaluationAvailable=!1}ngOnInit(){super.ngOnInit();let e=this.model.getRelatedRecords("questionnaireevaluation");if(e&&e[0]&&e[0].questionnaireevaluationitems&&e[0].questionnaireevaluationitems.beans){e[0].questionnaireevaluationitems.beans;for(let t in e[0].questionnaireevaluationitems.beans)this.categories.push(e[0].questionnaireevaluationitems.beans[t]);this.isEvaluationAvailable=!0}}}return fieldQuestionnaireEvaluation.ɵfac=function(e){return new(e||fieldQuestionnaireEvaluation)(r.Y36(Z.o),r.Y36(A.e),r.Y36(x.d),r.Y36(c.Pu),r.Y36(k.F0),r.Y36(H.y))},fieldQuestionnaireEvaluation.ɵcmp=r.Xpm({type:fieldQuestionnaireEvaluation,selectors:[["field-questionnaire-evaluation"]],features:[r.qOj],decls:4,vars:7,consts:[[3,"fieldname","fieldconfig",4,"ngIf"],[3,"fielddisplayclass","editable","fieldconfig","fieldid"],[4,"ngIf"],[3,"fieldname","fieldconfig"],[4,"ngFor","ngForOf"],["label","LBL_NO_EVALUATION_AVAILABLE"]],template:function(e,t){1&e&&(r.YNc(0,Kc,1,2,"field-label",0),r.TgZ(1,"field-generic-display",1),r.YNc(2,Wc,2,1,"span",2),r.YNc(3,eu,3,0,"span",2),r.qZA()),2&e&&(r.Q6J("ngIf",t.displayLabel),r.xp6(1),r.Q6J("fielddisplayclass",t.fielddisplayclass)("editable",!1)("fieldconfig",t.fieldconfig)("fieldid",t.fieldid),r.xp6(1),r.Q6J("ngIf",t.isEvaluationAvailable),r.xp6(1),r.Q6J("ngIf",!t.isEvaluationAvailable))},dependencies:[i.sg,i.O5,X._,u.q,C.D],encapsulation:2}),fieldQuestionnaireEvaluation})();var su=s(1078);function iu(e,t){if(1&e&&r._UZ(0,"field-label",3),2&e){const e=r.oxw();r.Q6J("fieldname",e.fieldname)("fieldconfig",e.fieldconfig)}}function nu(e,t){if(1&e&&(r.TgZ(0,"field-generic-display",4),r._uU(1),r.qZA()),2&e){const e=r.oxw();r.Q6J("fielddisplayclass",e.fielddisplayclass)("editable",e.isEditable())("fieldconfig",e.fieldconfig),r.xp6(1),r.hij(" ",e.displayTags,"\n")}}function lu(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"li")(1,"span",15),r._uU(2),r.TgZ(3,"span",16),r.NdJ("click",(function(){const t=r.CHM(e).index,s=r.oxw(3);return r.KtG(s.removeByIndex(t))})),r._UZ(4,"system-utility-icon",17),r.qZA()()()}if(2&e){const e=t.$implicit;r.xp6(2),r.hij(" ",e," ")}}function ou(e,t){if(1&e&&(r.TgZ(0,"ul",13),r.YNc(1,lu,5,1,"li",14),r.qZA()),2&e){const e=r.oxw(2);r.xp6(1),r.Q6J("ngForOf",e.objecttags)}}function au(e,t){1&e&&(r.TgZ(0,"div",18),r._UZ(1,"system-label",19),r.qZA())}function du(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"div",5)(1,"div",6)(2,"div",7),r.YNc(3,ou,2,1,"ul",8),r.YNc(4,au,2,0,"div",9),r.qZA(),r.TgZ(5,"div",10)(6,"system-input-tags",11),r.NdJ("tagemitter",(function(t){r.CHM(e);const s=r.oxw();return r.KtG(s.addTag(t))})),r.qZA()()(),r._UZ(7,"field-messages",12),r.qZA()}if(2&e){const e=r.oxw();r.Q6J("ngClass",e.css_classes),r.xp6(3),r.Q6J("ngIf",e.objecttags.length),r.xp6(1),r.Q6J("ngIf",!e.objecttags.length),r.xp6(3),r.Q6J("fieldname",e.fieldname)}}let ru=(()=>{class fieldTags extends d.O{constructor(e,t,s,i,n){super(e,t,s,i,n),this.model=e,this.view=t,this.language=s,this.metadata=i,this.router=n}get displayTags(){let e,t=this.model.getField(this.fieldname);if(!t)return"";try{e=JSON.parse(t)}catch(e){return""}return e.join(", ")}get objecttags(){let e=this.model.getField("tags");if(!e||""===e)return[];try{return JSON.parse(e)}catch(e){return[]}}removeByIndex(e){let t=this.objecttags;t.splice(e,1),this.model.setField("tags",JSON.stringify(t))}addTag(e){if(""!==e){let t=this.objecttags;t.push(e),this.model.setField("tags",JSON.stringify(t))}}}return fieldTags.ɵfac=function(e){return new(e||fieldTags)(r.Y36(Z.o),r.Y36(A.e),r.Y36(x.d),r.Y36(c.Pu),r.Y36(k.F0))},fieldTags.ɵcmp=r.Xpm({type:fieldTags,selectors:[["field-tags"]],features:[r.qOj],decls:3,vars:3,consts:[[3,"fieldname","fieldconfig",4,"ngIf"],[3,"fielddisplayclass","editable","fieldconfig",4,"ngIf"],["class","slds-form-element__control slds-p-around--xx-small",3,"ngClass",4,"ngIf"],[3,"fieldname","fieldconfig"],[3,"fielddisplayclass","editable","fieldconfig"],[1,"slds-form-element__control","slds-p-around--xx-small",3,"ngClass"],[1,"slds-grid","slds-grid--vertical-align-end"],[1,"slds-size--2-of-3"],["class","spice-taglist",4,"ngIf"],["style","font-style:italic",4,"ngIf"],[1,"slds-size--1-of-3","slds-p-left--x-small"],[3,"tagemitter"],[3,"fieldname"],[1,"spice-taglist"],[4,"ngFor","ngForOf"],[1,"slds-badge"],[1,"slds-badge__icon","slds-badge__icon_right",3,"click"],["icon","close","size","xx-small"],[2,"font-style","italic"],["label","LBL_NO_TAGS_ASSIGNED"]],template:function(e,t){1&e&&(r.YNc(0,iu,1,2,"field-label",0),r.YNc(1,nu,2,4,"field-generic-display",1),r.YNc(2,du,8,4,"div",2)),2&e&&(r.Q6J("ngIf",t.displayLabel),r.xp6(1),r.Q6J("ngIf",!t.isEditMode()),r.xp6(1),r.Q6J("ngIf",t.isEditable()&&t.isEditMode()))},dependencies:[i.mk,i.sg,i.O5,su.C,X._,M.r,u.q,C.D,I.a],encapsulation:2}),fieldTags})();var cu=s(6951);let uu=(()=>{class fieldRelatedDetailsContainer{constructor(e,t){this.model=e,this.view=t}ngOnChanges(e){this.module==this.model.module&&this.id==this.model.id||(this.model.module=this.module,this.model.id=this.id,this.model.getData(!0))}}return fieldRelatedDetailsContainer.ɵfac=function(e){return new(e||fieldRelatedDetailsContainer)(r.Y36(Z.o),r.Y36(A.e))},fieldRelatedDetailsContainer.ɵcmp=r.Xpm({type:fieldRelatedDetailsContainer,selectors:[["field-related-details-container"]],inputs:{module:"module",id:"id",componentset:"componentset"},features:[r._Bn([Z.o,A.e]),r.TTD],decls:1,vars:1,consts:[[3,"componentset"]],template:function(e,t){1&e&&r._UZ(0,"system-componentset",0),2&e&&r.Q6J("componentset",t.componentset)},dependencies:[cu.E],encapsulation:2}),fieldRelatedDetailsContainer})();function mu(e,t){if(1&e&&r._UZ(0,"field-label",5),2&e){const e=r.oxw(2);r.Q6J("fieldname",e.fieldname)("fieldconfig",e.fieldconfig)}}function hu(e,t){if(1&e&&r._UZ(0,"field-related-details-container",6),2&e){const e=r.oxw(2);r.Q6J("module",e.module)("componentset",e.componentset)("id",e.parentId)}}function gu(e,t){if(1&e&&(r.TgZ(0,"div",1)(1,"div",2),r.YNc(2,mu,1,2,"field-label",3),r.qZA(),r.YNc(3,hu,1,3,"field-related-details-container",4),r.qZA()),2&e){const e=r.oxw();r.xp6(2),r.Q6J("ngIf",e.displayLabel),r.xp6(1),r.Q6J("ngIf",e.parentId)}}let pu=(()=>{class fieldParentDetails extends d.O{constructor(e,t,s,i,n){super(e,t,s,i,n),this.model=e,this.view=t,this.language=s,this.metadata=i,this.router=n,this.parentDefs={}}ngOnInit(){super.ngOnInit(),this.getParentDefinition()}get module(){return this.fieldconfig.module}get componentset(){return this.fieldconfig.componentset}get display(){return this.parentId&&this.module==this.parentModule}get parentModule(){return this.parentDefs?.type_name?this.model.getField(this.parentDefs.type_name):void 0}get parentId(){return this.parentDefs?.id_name?this.model.getField(this.parentDefs.id_name):void 0}getParentDefinition(){this.parentDefs=this.metadata.getFieldDefs(this.model.module,this.fieldname)}}return fieldParentDetails.ɵfac=function(e){return new(e||fieldParentDetails)(r.Y36(Z.o),r.Y36(A.e),r.Y36(x.d),r.Y36(c.Pu),r.Y36(k.F0))},fieldParentDetails.ɵcmp=r.Xpm({type:fieldParentDetails,selectors:[["ng-component"]],features:[r.qOj],decls:1,vars:1,consts:[["class","slds-box--border",4,"ngIf"],[1,"slds-box--border"],[1,"slds-p-around--xx-small","slds-text-heading--label"],[3,"fieldname","fieldconfig",4,"ngIf"],[3,"module","componentset","id",4,"ngIf"],[3,"fieldname","fieldconfig"],[3,"module","componentset","id"]],template:function(e,t){1&e&&r.YNc(0,gu,4,2,"div",0),2&e&&r.Q6J("ngIf",t.display)},dependencies:[i.O5,u.q,uu],encapsulation:2}),fieldParentDetails})();function fu(e,t){if(1&e&&r._UZ(0,"field-label",3),2&e){const e=r.oxw();r.Q6J("fieldname",e.fieldname)("fieldconfig",e.fieldconfig)}}function bu(e,t){if(1&e&&r._UZ(0,"field-related-details-container",4),2&e){const e=r.oxw();r.Q6J("module",e.module)("componentset",e.componentset)("id",e.value)}}let _u=(()=>{class fieldRelatedDetails extends d.O{constructor(e,t,s,i,n){super(e,t,s,i,n),this.model=e,this.view=t,this.language=s,this.metadata=i,this.router=n}get module(){return this.fieldconfig.module}get componentset(){return this.fieldconfig.componentset}}return fieldRelatedDetails.ɵfac=function(e){return new(e||fieldRelatedDetails)(r.Y36(Z.o),r.Y36(A.e),r.Y36(x.d),r.Y36(c.Pu),r.Y36(k.F0))},fieldRelatedDetails.ɵcmp=r.Xpm({type:fieldRelatedDetails,selectors:[["ng-component"]],features:[r.qOj],decls:3,vars:2,consts:[[1,"slds-box--border"],[3,"fieldname","fieldconfig",4,"ngIf"],[3,"module","componentset","id",4,"ngIf"],[3,"fieldname","fieldconfig"],[3,"module","componentset","id"]],template:function(e,t){1&e&&(r.TgZ(0,"div",0),r.YNc(1,fu,1,2,"field-label",1),r.YNc(2,bu,1,3,"field-related-details-container",2),r.qZA()),2&e&&(r.xp6(1),r.Q6J("ngIf",t.displayLabel),r.xp6(1),r.Q6J("ngIf",t.value))},dependencies:[i.O5,u.q,uu],encapsulation:2}),fieldRelatedDetails})();var yu=s(2251);function vu(e,t){if(1&e&&r._UZ(0,"field-label",3),2&e){const e=r.oxw();r.Q6J("fieldname",e.fieldname)("fieldconfig",e.fieldconfig)}}function xu(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"div",10),r.NdJ("click",(function(t){r.CHM(e);const s=r.oxw(2);return r.KtG(s.initiateCall(t))})),r._UZ(1,"system-utility-icon",11),r.qZA()}}function Zu(e,t){if(1&e&&(r.TgZ(0,"a",12),r._uU(1),r.qZA()),2&e){const e=r.oxw(2);r.Q6J("href","tel:"+e.value,r.LSH),r.xp6(1),r.Oqu(e.value)}}function wu(e,t){if(1&e&&(r.TgZ(0,"span"),r._uU(1),r.qZA()),2&e){const e=r.oxw(2);r.xp6(1),r.Oqu(e.value)}}function Tu(e,t){if(1&e&&(r.TgZ(0,"field-generic-display",4)(1,"div",5),r.YNc(2,xu,2,0,"div",6),r.TgZ(3,"div",7),r.YNc(4,Zu,2,2,"a",8),r.YNc(5,wu,2,1,"span",9),r.qZA()()()),2&e){const e=r.oxw();r.Q6J("fielddisplayclass",e.fielddisplayclass)("editable",e.isEditable())("fieldconfig",e.fieldconfig)("title",e.value)("fieldid",e.fieldid),r.xp6(2),r.Q6J("ngIf",e.telehonyActive&&e.value),r.xp6(2),r.Q6J("ngIf",e.value&&!e.telehonyActive),r.xp6(1),r.Q6J("ngIf",e.value&&e.telehonyActive)}}function Cu(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"div",13)(1,"input",14,15),r.NdJ("ngModelChange",(function(t){r.CHM(e);const s=r.oxw();return r.KtG(s.value=t)})),r.qZA(),r._UZ(3,"field-messages",16),r.qZA()}if(2&e){const e=r.oxw();r.Q6J("ngClass",e.css_classes),r.xp6(1),r.Q6J("ngModel",e.value)("maxlength",e.fieldlength)("autocomplete",e.fieldid)("ngModelOptions",e.modelOptions),r.xp6(2),r.Q6J("fieldname",e.fieldname)}}let Au=(()=>{class fieldPhone extends d.O{constructor(e,t,s,i,n,l,o){super(e,t,s,i,n),this.model=e,this.view=t,this.l=s,this.metadata=i,this.router=n,this.backend=l,this.telephony=o}get telehonyActive(){return this.telephony.isActive}initiateCall(e){e.stopPropagation(),this.telephony.initiateCall(this.value,{relatedid:this.model.id,relatedmodule:this.model.module,relateddata:this.model.data})}}return fieldPhone.ɵfac=function(e){return new(e||fieldPhone)(r.Y36(Z.o),r.Y36(A.e),r.Y36(x.d),r.Y36(c.Pu),r.Y36(k.F0),r.Y36(H.y),r.Y36(yu.n))},fieldPhone.ɵcmp=r.Xpm({type:fieldPhone,selectors:[["field-phone"]],features:[r.qOj],decls:3,vars:3,consts:[[3,"fieldname","fieldconfig",4,"ngIf"],[3,"fielddisplayclass","editable","fieldconfig","title","fieldid",4,"ngIf"],["class","slds-form-element__control slds-p-around--xx-small",3,"ngClass",4,"ngIf"],[3,"fieldname","fieldconfig"],[3,"fielddisplayclass","editable","fieldconfig","title","fieldid"],[1,"slds-grid","slds-grid--vertical-align-center"],["class","slds-p-right--x-small slds-text-link--reset",3,"click",4,"ngIf"],[1,"slds-truncate"],[3,"href",4,"ngIf"],[4,"ngIf"],[1,"slds-p-right--x-small","slds-text-link--reset",3,"click"],["icon","outbound_call","size","xx-small"],[3,"href"],[1,"slds-form-element__control","slds-p-around--xx-small",3,"ngClass"],["type","text",1,"slds-input",3,"ngModel","maxlength","autocomplete","ngModelOptions","ngModelChange"],["focus",""],[3,"fieldname"]],template:function(e,t){1&e&&(r.YNc(0,vu,1,2,"field-label",0),r.YNc(1,Tu,6,8,"field-generic-display",1),r.YNc(2,Cu,4,6,"div",2)),2&e&&(r.Q6J("ngIf",t.displayLabel),r.xp6(1),r.Q6J("ngIf",!t.isEditMode()),r.xp6(1),r.Q6J("ngIf",t.isEditable()&&t.isEditMode()))},dependencies:[i.mk,i.O5,n.Fj,n.JJ,n.nD,n.On,M.r,u.q,C.D,I.a],encapsulation:2}),fieldPhone})();var ku=s(4728);function Lu(e,t){if(1&e&&r._UZ(0,"field-label",3),2&e){const e=r.oxw();r.Q6J("fieldname",e.fieldname)("fieldconfig",e.fieldconfig)}}function Mu(e,t){if(1&e&&(r.TgZ(0,"field-generic-display",4),r._uU(1),r.qZA()),2&e){const e=r.oxw();r.Q6J("fielddisplayclass",e.fielddisplayclass)("editable",e.isEditable())("fieldconfig",e.fieldconfig)("fieldid",e.fieldid),r.xp6(1),r.hij(" ",e.displayValue,"\n")}}function Su(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"div",5)(1,"div",6)(2,"system-input-actionset",7),r.NdJ("ngModelChange",(function(t){r.CHM(e);const s=r.oxw();return r.KtG(s.value=t)})),r.qZA(),r._UZ(3,"field-messages",8),r.qZA()()}if(2&e){const e=r.oxw();r.xp6(1),r.Q6J("ngClass",e.getFieldClass()),r.xp6(1),r.Q6J("ngModel",e.value),r.xp6(1),r.Q6J("fieldname",e.fieldname)}}let Iu=(()=>{class fieldActionset extends d.O{constructor(e,t,s,i,n){super(e,t,s,i,n),this.model=e,this.view=t,this.language=s,this.metadata=i,this.router=n}get displayValue(){if(!this.value)return"";let e=this.metadata.getActionSet(this.value);return e?e.name:""}}return fieldActionset.ɵfac=function(e){return new(e||fieldActionset)(r.Y36(Z.o),r.Y36(A.e),r.Y36(x.d),r.Y36(c.Pu),r.Y36(k.F0))},fieldActionset.ɵcmp=r.Xpm({type:fieldActionset,selectors:[["ng-component"]],features:[r.qOj],decls:3,vars:3,consts:[[3,"fieldname","fieldconfig",4,"ngIf"],[3,"fielddisplayclass","editable","fieldconfig","fieldid",4,"ngIf"],["class","slds-form-element",4,"ngIf"],[3,"fieldname","fieldconfig"],[3,"fielddisplayclass","editable","fieldconfig","fieldid"],[1,"slds-form-element"],[1,"slds-form-element__control","slds-m-vertical--xx-small",3,"ngClass"],[3,"ngModel","ngModelChange"],[3,"fieldname"]],template:function(e,t){1&e&&(r.YNc(0,Lu,1,2,"field-label",0),r.YNc(1,Mu,2,5,"field-generic-display",1),r.YNc(2,Su,4,3,"div",2)),2&e&&(r.Q6J("ngIf",t.displayLabel),r.xp6(1),r.Q6J("ngIf",!t.isEditMode()),r.xp6(1),r.Q6J("ngIf",t.isEditMode()))},dependencies:[i.mk,i.O5,n.JJ,n.On,ku.Q,u.q,C.D,I.a],encapsulation:2}),fieldActionset})();var Ou=s(8026),Ju=s(6274);function Nu(e,t){if(1&e&&r._UZ(0,"field-label",3),2&e){const e=r.oxw();r.Q6J("fieldname",e.fieldname)("fieldconfig",e.fieldconfig)}}function Fu(e,t){if(1&e&&(r.TgZ(0,"field-generic-display",4)(1,"div",5),r._UZ(2,"system-progress-bar",6),r.TgZ(3,"div",7),r._uU(4),r.qZA()()()),2&e){const e=r.oxw();r.Q6J("fielddisplayclass",e.fielddisplayclass)("editable",e.isEditable())("fieldconfig",e.fieldconfig),r.xp6(2),r.Q6J("progress",e.completion)("hideText",!0),r.xp6(2),r.Oqu(e.value)}}function qu(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"div",8)(1,"system-slider",9),r.NdJ("ngModelChange",(function(t){r.CHM(e);const s=r.oxw();return r.KtG(s.value=t)})),r.qZA(),r._UZ(2,"field-messages",10),r.qZA()}if(2&e){const e=r.oxw();r.Q6J("ngClass",e.getFieldClass()),r.xp6(1),r.Q6J("min",e.min)("max",e.max)("step",e.step)("ngModel",e.value),r.xp6(1),r.Q6J("fieldname",e.fieldname)}}let Eu=(()=>{class fieldSlider extends d.O{constructor(e,t,s,i,n){super(e,t,s,i,n),this.model=e,this.view=t,this.language=s,this.metadata=i,this.router=n}get min(){return this.fieldconfig.min?parseInt(this.fieldconfig.min,10):0}get max(){return this.fieldconfig.max?parseInt(this.fieldconfig.max,10):100}get step(){return this.fieldconfig.step?parseInt(this.fieldconfig.step,10):10}get value(){let e=this.model.getField(this.fieldname);return e?"number"==typeof e?e:parseInt(e,10):0}set value(e){this.model.setField(this.fieldname,e)}get completion(){return(this.value-this.min)/(this.max-this.min)*100}}return fieldSlider.ɵfac=function(e){return new(e||fieldSlider)(r.Y36(Z.o),r.Y36(A.e),r.Y36(x.d),r.Y36(c.Pu),r.Y36(k.F0))},fieldSlider.ɵcmp=r.Xpm({type:fieldSlider,selectors:[["field-slider"]],features:[r.qOj],decls:3,vars:3,consts:[[3,"fieldname","fieldconfig",4,"ngIf"],[3,"fielddisplayclass","editable","fieldconfig",4,"ngIf"],["class","slds-form-element__control slds-p-top--small",3,"ngClass",4,"ngIf"],[3,"fieldname","fieldconfig"],[3,"fielddisplayclass","editable","fieldconfig"],[1,"slds-grid","slds-grid_vertical-align-center"],[1,"slds-grow",3,"progress","hideText"],[1,"slds-p-left--x-small"],[1,"slds-form-element__control","slds-p-top--small",3,"ngClass"],[3,"min","max","step","ngModel","ngModelChange"],[3,"fieldname"]],template:function(e,t){1&e&&(r.YNc(0,Nu,1,2,"field-label",0),r.YNc(1,Fu,5,6,"field-generic-display",1),r.YNc(2,qu,3,6,"div",2)),2&e&&(r.Q6J("ngIf",t.displayLabel),r.xp6(1),r.Q6J("ngIf",!t.isEditMode()),r.xp6(1),r.Q6J("ngIf",t.isEditable()&&t.isEditMode()))},dependencies:[i.mk,i.O5,n.JJ,n.On,Ou.J,Ju.f,u.q,C.D,I.a],encapsulation:2}),fieldSlider})();function Yu(e,t){if(1&e&&r._UZ(0,"field-label",4),2&e){const e=r.oxw();r.Q6J("fieldname",e.fieldname)("fieldconfig",e.fieldconfig)}}function Qu(e,t){if(1&e&&r._UZ(0,"img",5),2&e){const e=r.oxw();r.Q6J("src",e.imageUrl,r.LSH)}}function Uu(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"button",8),r.NdJ("click",(function(){r.CHM(e);const t=r.oxw(3);return r.KtG(t.editImage())})),r._UZ(1,"system-button-icon",9),r.qZA()}if(2&e){const e=r.oxw(3);r.Q6J("disabled",!e.isEditMode()),r.xp6(1),r.Q6J("icon","image")}}function Du(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"div",10)(1,"button",11),r.NdJ("click",(function(){r.CHM(e);const t=r.oxw(3);return r.KtG(t.editImage())})),r._UZ(2,"system-button-icon",9),r.qZA(),r.TgZ(3,"button",12),r.NdJ("click",(function(){r.CHM(e);const t=r.oxw(3);return r.KtG(t.deleteImage())})),r._UZ(4,"system-button-icon",9),r.qZA()()}2&e&&(r.xp6(2),r.Q6J("icon","edit"),r.xp6(2),r.Q6J("icon","delete"))}function ju(e,t){if(1&e&&(r.ynx(0),r.YNc(1,Uu,2,2,"button",6),r.YNc(2,Du,5,2,"div",7),r.BQk()),2&e){const e=r.oxw(2);r.xp6(1),r.Q6J("ngIf",e.fieldIsEmpty),r.xp6(1),r.Q6J("ngIf",!e.fieldIsEmpty)}}function Ru(e,t){if(1&e){const e=r.EpF();r.ynx(0),r.TgZ(1,"button",13),r.NdJ("click",(function(){r.CHM(e);const t=r.oxw(2);return r.KtG(t.setEditMode())})),r._UZ(2,"system-button-icon",9),r.qZA(),r.BQk()}2&e&&(r.xp6(2),r.Q6J("icon","edit"))}function Bu(e,t){if(1&e&&(r.ynx(0),r.YNc(1,ju,3,2,"ng-container",3),r.YNc(2,Ru,3,1,"ng-container",3),r.BQk()),2&e){const e=r.oxw();r.xp6(1),r.Q6J("ngIf",e.isEditMode()),r.xp6(1),r.Q6J("ngIf",!e.isEditMode())}}let Gu=(()=>{class fieldImage extends d.O{constructor(e,t,s,i,n,l,o,a,d,r,c,u){super(e,t,s,i,n),this.model=e,this.view=t,this.language=s,this.metadata=i,this.router=n,this.elementRef=l,this.renderer=o,this.backend=a,this.elRef=d,this.changeDetRef=r,this.modalservice=c,this.sanitizer=u,this.height=""}get fieldIsEmpty(){return!this.value}ngAfterViewInit(){this.fieldconfig.height&&(this.height="calc("+this.fieldconfig.height+" - 2px - 0.5rem )")}get imageUrl(){return this.sanitizer.bypassSecurityTrustResourceUrl("data:"+this.value)}get style(){return{height:this.height}}deleteImage(){this.value=""}editImage(e=null){this.modalservice.openModal("SystemImageModal").subscribe((t=>{this.field_defs.maxWidth&&(t.instance.maxWidth=this.field_defs.maxWidth),this.field_defs.maxHeight&&(t.instance.maxHeight=this.field_defs.maxHeight);let s=this.labelComponent.label;s||(s=this.language.getLabel("LBL_IMAGE")),t.instance.title=s,this.value&&(t.instance.imageData=this.value),t.instance.answer.subscribe((e=>{!1!==e&&(this.value=e)})),e&&(t.instance.droppedFiles=e)}))}onDrop(e){this.view.setEditMode(),this.editImage(e)}}return fieldImage.ɵfac=function(e){return new(e||fieldImage)(r.Y36(Z.o),r.Y36(A.e),r.Y36(x.d),r.Y36(c.Pu),r.Y36(k.F0),r.Y36(r.SBq),r.Y36(r.Qsj),r.Y36(H.y),r.Y36(r.SBq),r.Y36(r.sBO),r.Y36(L.o),r.Y36($.H7))},fieldImage.ɵcmp=r.Xpm({type:fieldImage,selectors:[["field-image"]],viewQuery:function(e,t){if(1&e&&r.Gf(u.q,5),2&e){let e;r.iGM(e=r.CRH())&&(t.labelComponent=e.first)}},features:[r.qOj],decls:4,vars:5,consts:[[3,"fieldname","fieldconfig",4,"ngIf"],[1,"slds-is-relative","slds-box--border","slds-align_absolute-center",3,"ngClass","ngStyle","system-drop-file"],["style","max-height:100%;padding:0.25rem",3,"src",4,"ngIf"],[4,"ngIf"],[3,"fieldname","fieldconfig"],[2,"max-height","100%","padding","0.25rem",3,"src"],["class","slds-button slds-button_icon slds-button_icon-container slds-button_icon-border-filled slds-align--absolute-center slds-m-around--medium",3,"disabled","click",4,"ngIf"],["class","slds-is-absolute spice-button-group-vertical slds-is-absolute","style","bottom:0.5rem;right:0.5rem;",4,"ngIf"],[1,"slds-button","slds-button_icon","slds-button_icon-container","slds-button_icon-border-filled","slds-align--absolute-center","slds-m-around--medium",3,"disabled","click"],[3,"icon"],[1,"slds-is-absolute","spice-button-group-vertical","slds-is-absolute",2,"bottom","0.5rem","right","0.5rem"],[1,"slds-button","slds-button_icon-container","slds-button_icon-border-filled","slds-button--icon-small",3,"click"],["title","Delete",1,"slds-button","slds-button_icon-container","slds-button_icon-border-filled","slds-button--icon-small",3,"click"],[1,"slds-button","slds-button_icon","slds-is-absolute",2,"bottom","0.75rem","right","0.75rem","background-color","#fff","box-shadow","0px 0px 2px 3px rgba(255,255,255,1)",3,"click"]],template:function(e,t){1&e&&(r.YNc(0,Yu,1,2,"field-label",0),r.TgZ(1,"div",1),r.NdJ("system-drop-file",(function(e){return t.onDrop(e)})),r.YNc(2,Qu,1,1,"img",2),r.YNc(3,Bu,3,2,"ng-container",3),r.qZA()),2&e&&(r.Q6J("ngIf",t.displayLabel),r.xp6(1),r.Q6J("ngClass",t.fielddisplayclass)("ngStyle",t.style),r.xp6(1),r.Q6J("ngIf",!t.fieldIsEmpty),r.xp6(1),r.Q6J("ngIf",!t.model.isLoading))},dependencies:[i.mk,i.O5,i.PC,w.J,pl.M,u.q],encapsulation:2}),fieldImage})();const Pu=["compound"];function Hu(e,t){if(1&e&&(r.TgZ(0,"legend",4),r._uU(1),r.qZA()),2&e){const e=r.oxw();r.xp6(1),r.Oqu(e.label)}}let zu=(()=>{class fieldCompound extends d.O{ngOnInit(){super.ngOnInit(),this.metadata.addComponent("ObjectRecordFieldset",this.compound).subscribe((e=>{e.instance.fieldset=this.fieldconfig.fieldset,e.instance.direction="horizontal",e.instance.fieldpadding="xxx-small"}))}get label(){if(this.fieldconfig.label){if(this.fieldconfig.label.indexOf(":")>0){let e=this.fieldconfig.label.split(":");return this.language.getLabel(e[1],e[0],this.view.labels)}return this.language.getLabel(this.fieldconfig.label,this.model.module,this.view.labels)}return this.language.getFieldDisplayName(this.model.module,this.fieldname,this.fieldconfig,this.view.labels)}}return fieldCompound.ɵfac=function(){let e;return function(t){return(e||(e=r.n5z(fieldCompound)))(t||fieldCompound)}}(),fieldCompound.ɵcmp=r.Xpm({type:fieldCompound,selectors:[["field-compound"]],viewQuery:function(e,t){if(1&e&&r.Gf(Pu,7,r.s_b),2&e){let e;r.iGM(e=r.CRH())&&(t.compound=e.first)}},features:[r.qOj],decls:5,vars:1,consts:[[1,"slds-form-element","slds-form-element_compound","slds-box","slds-box_x-small","slds-p-top_none"],["class","slds-form-element__legend slds-form-element__label slds-p-left_xx-small","style","float:none",4,"ngIf"],[1,"slds-form-element__control"],["compound",""],[1,"slds-form-element__legend","slds-form-element__label","slds-p-left_xx-small",2,"float","none"]],template:function(e,t){1&e&&(r.TgZ(0,"fieldset",0),r.YNc(1,Hu,2,1,"legend",1),r.TgZ(2,"div",2),r._UZ(3,"div",null,3),r.qZA()()),2&e&&(r.xp6(1),r.Q6J("ngIf",t.displayLabel))},dependencies:[i.O5],encapsulation:2}),fieldCompound})();function Vu(e,t){if(1&e&&r._UZ(0,"field-label",3),2&e){const e=r.oxw();r.Q6J("fieldname",e.fieldname)("fieldconfig",e.fieldconfig)}}function Ku(e,t){if(1&e&&r._UZ(0,"system-utility-icon",4),2&e){const e=r.oxw();r.Q6J("size",e.fieldconfig.size)("icon",e.icon)("title",e.label)("colorclass",e.colorClass)}}let $u=(()=>{class fieldIconCondition extends d.O{constructor(e,t,s,i,n,l,o){super(e,t,s,i,l),this.model=e,this.view=t,this.language=s,this.metadata=i,this.backend=n,this.router=l,this.cdRef=o,this.colorClass="slds-icon-text-default",this.fieldconfig={},this.subscriptions.add(this.subscribeToModelChanges())}ngOnInit(){super.ngOnInit(),this.setValues()}subscribeToModelChanges(){return this.model.data$.subscribe((()=>{this.setValues()}))}setValues(){window.clearTimeout(this.setterTimeout),this.setterTimeout=window.setTimeout((()=>{this.fieldconfig.modulefilter?this.model.checkModuleFilterMatch(this.fieldconfig.modulefilter)?(this.icon=this.fieldconfig.matchIcon,this.label=this.fieldconfig.matchLabel,this.fieldconfig.matchColorTheme&&(this.colorClass="slds-icon-text-"+this.fieldconfig.matchColorTheme)):(this.icon=this.fieldconfig.mismatchIcon,this.label=this.fieldconfig.mismatchLabel,this.fieldconfig.mismatchColorTheme&&(this.colorClass="slds-icon-text-"+this.fieldconfig.mismatchColorTheme)):(this.icon=this.fieldconfig.icon,this.label=this.fieldconfig.label,this.fieldconfig.colorTheme&&(this.colorClass="slds-icon-text-"+this.fieldconfig.colorTheme)),this.cdRef.detectChanges()}),1e3)}}return fieldIconCondition.ɵfac=function(e){return new(e||fieldIconCondition)(r.Y36(Z.o),r.Y36(A.e),r.Y36(x.d),r.Y36(c.Pu),r.Y36(H.y),r.Y36(k.F0),r.Y36(r.sBO))},fieldIconCondition.ɵcmp=r.Xpm({type:fieldIconCondition,selectors:[["field-icon-condition"]],inputs:{fieldconfig:"fieldconfig"},features:[r.qOj],decls:3,vars:4,consts:[[3,"fieldname","fieldconfig",4,"ngIf"],[3,"fielddisplayclass","fieldconfig"],[3,"size","icon","title","colorclass",4,"ngIf"],[3,"fieldname","fieldconfig"],[3,"size","icon","title","colorclass"]],template:function(e,t){1&e&&(r.YNc(0,Vu,1,2,"field-label",0),r.TgZ(1,"field-generic-display",1),r.YNc(2,Ku,1,4,"system-utility-icon",2),r.qZA()),2&e&&(r.Q6J("ngIf",t.displayLabel),r.xp6(1),r.Q6J("fielddisplayclass",t.fielddisplayclass)("fieldconfig",t.fieldconfig),r.xp6(1),r.Q6J("ngIf",!!t.icon))},dependencies:[i.O5,M.r,u.q,C.D],encapsulation:2,changeDetection:0}),fieldIconCondition})();var Xu=s(8322);function Wu(e,t){if(1&e&&r._UZ(0,"field-label",3),2&e){const e=r.oxw();r.Q6J("fieldname",e.fieldname)("fieldconfig",e.fieldconfig)}}let em=(()=>{class fieldIndicator extends d.O{constructor(e,t,s,i,n){super(e,t,s,i,n),this.model=e,this.view=t,this.language=s,this.metadata=i,this.router=n}get indicatorValue(){return this.fieldconfig.up&&this.value==this.fieldconfig.up?"up":this.fieldconfig.down&&this.value==this.fieldconfig.down?"down":"neutral"}}return fieldIndicator.ɵfac=function(e){return new(e||fieldIndicator)(r.Y36(Z.o),r.Y36(A.e),r.Y36(x.d),r.Y36(c.Pu),r.Y36(k.F0))},fieldIndicator.ɵcmp=r.Xpm({type:fieldIndicator,selectors:[["field-indicator"]],features:[r.qOj],decls:3,vars:7,consts:[[3,"fieldname","fieldconfig",4,"ngIf"],[3,"fielddisplayclass","editable","fieldconfig","title","fieldid"],[3,"trend"],[3,"fieldname","fieldconfig"]],template:function(e,t){1&e&&(r.YNc(0,Wu,1,2,"field-label",0),r.TgZ(1,"field-generic-display",1),r._UZ(2,"system-trend-indicator",2),r.qZA()),2&e&&(r.Q6J("ngIf",t.displayLabel),r.xp6(1),r.Q6J("fielddisplayclass",t.fielddisplayclass)("editable",!1)("fieldconfig",t.fieldconfig)("title",t.value)("fieldid",t.fieldid),r.xp6(1),r.Q6J("trend",t.indicatorValue))},dependencies:[i.O5,Xu.E,u.q,C.D],encapsulation:2}),fieldIndicator})();const tm=function(e){return{label:e}};function sm(e,t){if(1&e&&r._UZ(0,"field-label",13),2&e){const e=r.oxw();r.Q6J("fieldconfig",r.VKq(1,tm,"LBL_"+e.addressType.toUpperCase()))}}function im(e,t){if(1&e&&(r.TgZ(0,"span",20),r._UZ(1,"system-icon",21),r.qZA()),2&e){const e=r.oxw().$implicit;r.xp6(1),r.Q6J("module",e.parent_type)}}function nm(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"li",14),r.NdJ("cdkDragStarted",(function(){r.CHM(e);const t=r.oxw();return r.KtG(t.parent.dragging=!0)}))("cdkDragEnded",(function(){r.CHM(e);const t=r.oxw();return r.KtG(t.parent.dragging=!1)})),r.TgZ(1,"span",15),r.YNc(2,im,2,1,"span",16),r.TgZ(3,"span",17),r._uU(4),r.qZA(),r.TgZ(5,"span",18)(6,"system-button-icon",19),r.NdJ("click",(function(t){const s=r.CHM(e).$implicit,i=r.oxw();return r.KtG(i.removeEmailAddress(t,s.id))})),r.qZA()()()()}if(2&e){const e=t.$implicit,s=r.oxw();r.Q6J("cdkDragData",e)("cdkDragBoundary",s.parent.elementRef),r.xp6(2),r.Q6J("ngIf",!!e.parent_id&&!!e.parent_type),r.xp6(2),r.hij(" ",e.email_address," "),r.xp6(2),r.Q6J("icon","close")}}function lm(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"li",22)(1,"div",23)(2,"div",24),r.Hsn(3),r.qZA(),r.TgZ(4,"input",25),r.NdJ("ngModelChange",(function(t){r.CHM(e);const s=r.oxw();return r.KtG(s.inputTextValue=t)}))("blur",(function(){r.CHM(e);const t=r.oxw();return r.KtG(t.onBlur())}))("keyup",(function(t){r.CHM(e);const s=r.oxw();return r.KtG(s.onKeyUp(t))}))("keydown.,",(function(e){return e.preventDefault()})),r.qZA()()()}if(2&e){const e=r.oxw();r.xp6(4),r.Q6J("ngModel",e.inputTextValue),r.uIk("system-autofocus","to"==e.addressType)}}function om(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"div",28),r.NdJ("click",(function(){r.CHM(e);const t=r.oxw(2);return t.addEmailAddressFromInput(),r.KtG(t.hideDropdown())})),r._UZ(1,"system-label",29),r.TgZ(2,"div",30),r._uU(3),r.qZA()()}if(2&e){const e=r.oxw(2);r.xp6(2),r.Q6J("title",e.inputTextValue),r.xp6(1),r.hij(" ",e.inputTextValue," ")}}function am(e,t){if(1&e&&(r.TgZ(0,"div",31),r._UZ(1,"system-utility-icon",32),r.TgZ(2,"div",33),r._UZ(3,"system-label",34),r.TgZ(4,"div",35),r._uU(5),r.qZA()()()),2&e){const e=r.oxw(2);r.xp6(2),r.Q6J("title",e.inputTextValue),r.xp6(3),r.hij(' "',e.inputTextValue,'" ')}}function dm(e,t){if(1&e&&(r.TgZ(0,"div"),r.YNc(1,om,4,2,"div",26),r.YNc(2,am,6,2,"ng-template",null,27,r.W1O),r.qZA()),2&e){const e=r.MAs(3),t=r.oxw();r.xp6(1),r.Q6J("ngIf",t.isValidEmailAddress)("ngIfElse",e)}}function rm(e,t){1&e&&r._UZ(0,"system-spinner",39)}function cm(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"li",42),r.NdJ("click",(function(){const t=r.CHM(e).$implicit,s=r.oxw(3);return r.KtG(s.selectEmailAddress(t))})),r.TgZ(1,"div",43),r._UZ(2,"system-icon",44),r.TgZ(3,"div",45)(4,"span",46),r._uU(5),r.qZA()()()()}if(2&e){const e=t.$implicit;r.xp6(2),r.Q6J("module",e.module),r.xp6(3),r.AsE(" ",e.email_address," • ",e.summary_text," ")}}function um(e,t){if(1&e&&(r.TgZ(0,"ul",40),r.YNc(1,cm,6,3,"li",41),r.qZA()),2&e){const e=r.oxw(2);r.xp6(1),r.Q6J("ngForOf",e.searchResults)}}function mm(e,t){1&e&&(r.TgZ(0,"div",47),r._UZ(1,"system-label",48),r.qZA())}function hm(e,t){if(1&e&&(r.YNc(0,rm,1,0,"system-spinner",36),r.YNc(1,um,2,1,"ul",37),r.YNc(2,mm,2,0,"div",38)),2&e){const e=r.oxw();r.Q6J("ngIf",e.searchResultsLoading),r.xp6(1),r.Q6J("ngIf",(null==e.searchResults?null:e.searchResults.length)>0),r.xp6(1),r.Q6J("ngIf",0==(null==e.searchResults?null:e.searchResults.length)&&!e.searchResultsLoading)}}function gm(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"button",49),r.NdJ("click",(function(){r.CHM(e);const t=r.oxw();return r.KtG(t.searchParentEmailAddresses())})),r._UZ(1,"system-button-icon",50),r.qZA()}}const pm=["*"];let fm=(()=>{class fieldEmailRecipientsInput{constructor(e,t,s,i,n,l,o,a,d){this.model=e,this.language=t,this.modal=s,this.injector=i,this.backend=n,this.renderer=l,this.elementRef=o,this.parent=a,this.zone=d,this.searchResults=[],this.isInputTextVisible=!1,this.isDropdownVisible=!1,this.inputTextValue="",this.inputCCTextValue="",this.previousInputTextValue="",this.searchTimeOut=void 0,this.searchResultsLoading=!1,this.searchAllowed=!1,this.isValidEmailAddress=!1,this.displayValue=[],this.drop$=new r.vpe}get value(){return this.model.getField("recipient_addresses")}set value(e){this.model.setField("recipient_addresses",e),this.parent.setDisplayValue()}get hasParent(){return!!this.model.getField("parent_id")}ngOnChanges(){(["cc","bcc"].indexOf(this.addressType)>-1||"to"==this.addressType&&this.parent.focused)&&(this.displayValue=this.displayValue.filter((e=>e.address_type==this.addressType)))}searchParentEmailAddresses(){this.modal.openModal("EmailParentAddressesModal",!0,this.injector).subscribe((e=>{this.parent.clickListener&&(this.parent.clickListener(),this.parent.clickListener=void 0),e.instance.addAddresses.subscribe((e=>{for(let t of e){const e={id:this.model.generateGuid(),address_type:this.addressType,email_address:t.email_address,email_address_id:t.email_address_id,parent_type:t.module,parent_id:t.id};this.value=[...this.model.getField("recipient_addresses"),e],this.isInputTextVisible=!0,this.parent.focused=!0}}))}))}validateEmail(e){this.isValidEmailAddress=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(String(e).toLowerCase())}onBlur(){this.inputTextValue||(this.isInputTextVisible=!1)}onFieldClick(){this.isInputTextVisible=!0,this.showDropdown()}removeEmailAddress(e,t){this.model.getField("recipient_addresses")&&0!=this.model.getField("recipient_addresses").length&&(this.value=this.model.getField("recipient_addresses").filter((e=>e.id!=t)),e.preventDefault(),e.stopPropagation())}onKeyUp(e){switch(this.searchAllowed=this.inputTextValue.length>2&&-1==this.inputTextValue.indexOf("@"),this.validateEmail(this.inputTextValue),this.inputTextValue.length<3&&this.hideDropdown(),e.key){case"Enter":case",":this.searchAllowed=!1,this.addEmailAddressFromInput();break;case"Backspace":this.inputTextValue||this.previousInputTextValue||this.removeLastEmailAddress(),this.showDropdown(),this.doSearch();break;default:this.showDropdown(),this.doSearch()}this.previousInputTextValue=this.inputTextValue}removeLastEmailAddress(){this.value&&0!=this.value.length&&(this.value=this.model.getField("recipient_addresses").slice(0,this.model.getField("recipient_addresses").length-1))}addEmailAddressFromInput(){if(!this.isValidEmailAddress)return;this.searchTimeOut&&window.clearTimeout(this.searchTimeOut);const e={id:this.model.generateGuid(),address_type:this.addressType,email_address:this.inputTextValue};this.value=[...this.model.getField("recipient_addresses"),e],this.hideDropdown(),this.resetInputTextValue()}doSearch(){this.searchAllowed&&this.previousInputTextValue!=this.inputTextValue&&this.zone.runOutsideAngular((()=>{this.searchTimeOut&&window.clearTimeout(this.searchTimeOut),this.searchTimeOut=window.setTimeout((()=>{this.inputTextValue&&(this.zone.run((()=>{this.searchResults=[],this.searchResultsLoading=!0})),this.backend.getRequest("module/EmailAddresses/"+this.inputTextValue).subscribe((e=>{this.zone.run((()=>{e&&e.length>0&&(this.searchResults=e),this.searchResultsLoading=!1}))})))}),1e3)}))}selectEmailAddress(e){const t={id:this.model.generateGuid(),address_type:this.addressType,email_address:e.email_address,email_address_id:e.email_address_id,parent_type:e.module,parent_id:e.id};this.value=[...this.model.getField("recipient_addresses"),t],this.resetInputTextValue(),this.hideDropdown()}resetInputTextValue(){this.inputTextValue="",this.previousInputTextValue=""}addDocumentClickListener(){this.clickListener=this.renderer.listen("document","click",(e=>{this.elementRef.nativeElement.contains(e.target)||this.hideDropdown()}))}showDropdown(){this.inputTextValue.length<3||(this.isDropdownVisible=!0,this.clickListener||this.addDocumentClickListener())}hideDropdown(){this.isDropdownVisible=!1,(!this.inputTextValue||this.inputTextValue.length<3)&&(this.searchResults=[]),this.clickListener&&(this.clickListener(),this.clickListener=!1)}}return fieldEmailRecipientsInput.ɵfac=function(e){return new(e||fieldEmailRecipientsInput)(r.Y36(Z.o),r.Y36(x.d),r.Y36(L.o),r.Y36(r.zs3),r.Y36(H.y),r.Y36(r.Qsj),r.Y36(r.SBq),r.Y36(uo,1),r.Y36(r.R0b))},fieldEmailRecipientsInput.ɵcmp=r.Xpm({type:fieldEmailRecipientsInput,selectors:[["field-email-recipients-input"]],inputs:{addressType:"addressType",displayValue:"displayValue"},outputs:{drop$:"drop$"},features:[r.TTD],ngContentSelectors:pm,decls:14,vars:9,consts:[[3,"fieldconfig",4,"ngIf"],[1,"slds-grid","slds-grid--vertical-align-center"],[1,"slds-combobox_container","slds-grow"],["role","combobox",1,"slds-combobox","slds-dropdown-trigger","slds-dropdown-trigger_click"],["role","none",1,"slds-combobox__form-element"],[1,"slds-pill_container",3,"click"],["cdkDropList","","cdkDropListOrientation","horizontal","role","listbox",1,"slds-listbox","slds-listbox_horizontal","slds-size--1-of-1",3,"cdkDropListData","cdkDropListDropped"],["cdkDrag","","class","slds-listbox-item slds-drag--preview","role","presentation","style","cursor: grab; list-style: none;",3,"cdkDragData","cdkDragBoundary","cdkDragStarted","cdkDragEnded",4,"ngFor","ngForOf"],["class","slds-listbox-item slds-grow","role","presentation",4,"ngIf"],["role","listbox",1,"slds-dropdown","slds-dropdown_fluid"],[4,"ngIf","ngIfElse"],["searchContainer",""],["system-title","LBL_SELECT_PARENT_EMAIL","class","slds-button--icon slds-button--icon-border-filled slds-m-left--xx-small",3,"click",4,"ngIf"],[3,"fieldconfig"],["cdkDrag","","role","presentation",1,"slds-listbox-item","slds-drag--preview",2,"cursor","grab","list-style","none",3,"cdkDragData","cdkDragBoundary","cdkDragStarted","cdkDragEnded"],["role","option",1,"slds-pill"],["class","slds-icon_container",4,"ngIf"],[1,"slds-pill__label"],[1,"slds-icon_container","slds-pill__remove",2,"cursor","pointer"],[3,"icon","click"],[1,"slds-icon_container"],["size","x-small","divClass","slds-p-right--x-small",3,"module"],["role","presentation",1,"slds-listbox-item","slds-grow"],[1,"slds-form-element__control","slds-input-has-icon--right","slds-input-has-icon_group-right","slds-grow"],[1,"slds-input__icon-group","slds-input__icon-group_right","slds-m-right--xx-small"],["type","text","autocomplete","new-email-address","system-title","LBL_ADD_EMAILADDRESS","system-placeholder","LBL_ADD_EMAILADDRESS",1,"slds-p-horizontal--x-small","slds-size--1-of-1",3,"ngModel","ngModelChange","blur","keyup","keydown.,"],["class","slds-size--1-of-1 slds-grid slds-grid--vertical-align-center slds-p-around--x-small","style","cursor:pointer;",3,"click",4,"ngIf","ngIfElse"],["invalidEmailAddressContainer",""],[1,"slds-size--1-of-1","slds-grid","slds-grid--vertical-align-center","slds-p-around--x-small",2,"cursor","pointer",3,"click"],["label","LBL_USE",2,"display","block"],[1,"slds-truncate","slds-grow","slds-m-left--xx-small",2,"font-family","sans-serif","font-weight","bold",3,"title"],[1,"slds-grid","slds-grid--vertical-align-center","slds-p-around--x-small"],["icon","warning","size","x-small","colorclass","slds-icon-text-warning",1,"slds-m-right--xx-small",2,"display","block"],[1,"slds-grow","slds-grid","slds-grid--vertical-align-center","slds-truncate",3,"title"],["label","LBL_INPUT_INVALID",2,"display","block","white-space","nowrap"],[1,"slds-truncate","slds-grow","slds-m-left--xx-small",2,"font-style","italic"],["size","12","class","slds-grid slds-p-around--small",4,"ngIf"],["class","slds-listbox slds-listbox_vertical","role","presentation",4,"ngIf"],["class","slds-p-around--x-small",4,"ngIf"],["size","12",1,"slds-grid","slds-p-around--small"],["role","presentation",1,"slds-listbox","slds-listbox_vertical"],["role","presentation","class","slds-listbox__item",3,"click",4,"ngFor","ngForOf"],["role","presentation",1,"slds-listbox__item",3,"click"],[1,"slds-listbox__option","slds-grid","slds-grid--vertical-align-center","slds-p-around--x-small"],["size","x-small",1,"slds-p-right--x-small",3,"module"],[1,"slds-media__body"],[1,"slds-listbox__option-text","slds-listbox__option-text_entity"],[1,"slds-p-around--x-small"],["label","MSG_NO_RECORDS_FOUND"],["system-title","LBL_SELECT_PARENT_EMAIL",1,"slds-button--icon","slds-button--icon-border-filled","slds-m-left--xx-small",3,"click"],["icon","record_lookup"]],template:function(e,t){if(1&e&&(r.F$t(),r.YNc(0,sm,1,3,"field-label",0),r.TgZ(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5),r.NdJ("click",(function(){return t.onFieldClick()})),r.TgZ(6,"ul",6),r.NdJ("cdkDropListDropped",(function(e){return t.drop$.emit(e)})),r.YNc(7,nm,7,5,"li",7),r.YNc(8,lm,5,2,"li",8),r.qZA()()(),r.TgZ(9,"div",9),r.YNc(10,dm,4,2,"div",10),r.YNc(11,hm,3,3,"ng-template",null,11,r.W1O),r.qZA()()(),r.YNc(13,gm,2,0,"button",12),r.qZA()),2&e){const e=r.MAs(12);r.Q6J("ngIf","cc"==t.addressType||"bcc"==t.addressType),r.xp6(3),r.ekj("slds-is-open",t.isDropdownVisible),r.xp6(3),r.Q6J("cdkDropListData",t.addressType),r.xp6(1),r.Q6J("ngForOf",t.displayValue),r.xp6(1),r.Q6J("ngIf",!t.parent.dragging),r.xp6(2),r.Q6J("ngIf",!t.searchAllowed)("ngIfElse",e),r.xp6(3),r.Q6J("ngIf",t.hasParent)}},dependencies:[i.sg,i.O5,n.Fj,n.JJ,n.On,w.J,rs.f,X._,mo.W,M.r,El.m,Gr.A,ql.S,l.Wj,l.Zt,u.q],styles:["input[_ngcontent-%COMP%], input[_ngcontent-%COMP%]:focus{border:none;outline:none}"]}),fieldEmailRecipientsInput})();function bm(e,t){if(1&e&&r._UZ(0,"field-label",3),2&e){const e=r.oxw();r.Q6J("fieldname",e.fieldname)("fieldconfig",e.fieldconfig)}}let _m=(()=>{class fieldJson extends d.O{constructor(e,t,s,i,n){super(e,t,s,i,n),this.model=e,this.view=t,this.language=s,this.metadata=i,this.router=n}get value(){return JSON.stringify(JSON.parse(this.model.getField(this.fieldname)),null,"\t")}set value(e){this.model.setField(this.fieldname,e)}}return fieldJson.ɵfac=function(e){return new(e||fieldJson)(r.Y36(Z.o),r.Y36(A.e),r.Y36(x.d),r.Y36(c.Pu),r.Y36(k.F0))},fieldJson.ɵcmp=r.Xpm({type:fieldJson,selectors:[["field-json"]],features:[r.qOj],decls:4,vars:7,consts:[[3,"fieldname","fieldconfig",4,"ngIf"],[3,"fielddisplayclass","editable","fieldconfig","title","fieldid"],[2,"overflow-wrap","break-word","white-space","pre-wrap"],[3,"fieldname","fieldconfig"]],template:function(e,t){1&e&&(r.YNc(0,bm,1,2,"field-label",0),r.TgZ(1,"field-generic-display",1)(2,"div",2),r._uU(3),r.qZA()()),2&e&&(r.Q6J("ngIf",t.displayLabel),r.xp6(1),r.Q6J("fielddisplayclass",t.fielddisplayclass)("editable",!1)("fieldconfig",t.fieldconfig)("title",t.value)("fieldid",t.fieldid),r.xp6(2),r.Oqu(t.value))},dependencies:[i.O5,u.q,C.D],encapsulation:2}),fieldJson})();function ym(e,t){if(1&e&&r._UZ(0,"field-label",3),2&e){const e=r.oxw();r.Q6J("fieldname",e.fieldname)("fieldconfig",e.fieldconfig)}}function vm(e,t){if(1&e&&r._UZ(0,"system-icon",10),2&e){const e=r.oxw(3);r.Q6J("module",e.model.data[e.parentTypeField])("size","x-small")}}function xm(e,t){if(1&e&&(r.TgZ(0,"span",11),r._uU(1),r.qZA()),2&e){const e=r.oxw(3);r.Q6J("module",e.parentType)("id",e.parentId),r.xp6(1),r.Oqu(e.value)}}function Zm(e,t){if(1&e&&(r.TgZ(0,"span"),r._UZ(1,"field-linked-details",12),r.qZA()),2&e){const e=r.oxw(3);r.xp6(1),r.Q6J("fieldset",e.fieldconfig.fieldset)("module",e.parentType)("data",e.relData)}}function wm(e,t){if(1&e&&(r.TgZ(0,"div",6),r.YNc(1,vm,1,2,"system-icon",7),r.YNc(2,xm,2,3,"span",8),r.YNc(3,Zm,2,3,"span",9),r.qZA()),2&e){const e=r.oxw(2);r.xp6(1),r.Q6J("ngIf",e.displayModuleIcon),r.xp6(1),r.Q6J("ngIf",!e.fieldconfig.fieldset),r.xp6(1),r.Q6J("ngIf",e.fieldconfig.fieldset&&e.relData)}}function Tm(e,t){if(1&e&&(r.TgZ(0,"field-generic-display",4),r.YNc(1,wm,4,3,"div",5),r.qZA()),2&e){const e=r.oxw();r.Q6J("fielddisplayclass",e.fielddisplayclass)("editable",e.isEditable())("fieldconfig",e.fieldconfig)("fieldid",e.fieldid),r.xp6(1),r.Q6J("ngIf",e.parentId)}}function Cm(e,t){if(1&e&&(r.ynx(0),r._uU(1),r.BQk()),2&e){const e=r.oxw(3);r.xp6(1),r.Oqu(e.value)}}function Am(e,t){if(1&e&&(r.ynx(0),r._UZ(1,"field-linked-details",12),r.BQk()),2&e){const e=r.oxw(3);r.xp6(1),r.Q6J("fieldset",e.fieldconfig.fieldset)("module",e.parentType)("data",e.relData)}}function km(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"div",18)(1,"div",19)(2,"span",20)(3,"span",21),r._UZ(4,"system-icon",10),r.qZA(),r.TgZ(5,"span",22),r.YNc(6,Cm,2,1,"ng-container",9),r.YNc(7,Am,2,3,"ng-container",9),r.qZA(),r.TgZ(8,"button",23),r.NdJ("click",(function(){r.CHM(e);const t=r.oxw(2);return r.KtG(t.clearParent())})),r._UZ(9,"system-button-icon",24),r.qZA()()()()}if(2&e){const e=r.oxw(2);r.xp6(4),r.Q6J("module",e.model.data[e.parentTypeField])("size","small"),r.xp6(2),r.Q6J("ngIf",!e.fieldconfig.fieldset),r.xp6(1),r.Q6J("ngIf",e.fieldconfig.fieldset),r.xp6(2),r.Q6J("icon","close")}}function Lm(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"li",45),r.NdJ("click",(function(){const t=r.CHM(e).$implicit,s=r.oxw(4);return r.KtG(s.setParentType(t))})),r.TgZ(1,"div",46)(2,"div",47),r._UZ(3,"system-icon",48),r.TgZ(4,"div",49),r._UZ(5,"system-label-modulename",50),r.qZA()()()()}if(2&e){const e=t.$implicit;r.xp6(3),r.Q6J("module",e),r.xp6(2),r.Q6J("module",e)}}const Mm=function(e){return{"slds-is-open":e}};function Sm(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"div",36)(1,"div",14)(2,"div",37)(3,"div",38)(4,"div",28)(5,"div",39),r.NdJ("click",(function(){r.CHM(e);const t=r.oxw(3);return r.KtG(t.openParentTypes())})),r._UZ(6,"input",40)(7,"system-icon",41),r.qZA(),r.TgZ(8,"div",42)(9,"ul",43),r.YNc(10,Lm,6,2,"li",44),r.qZA()()()()()()()}if(2&e){const e=r.oxw(3);r.xp6(4),r.Q6J("ngClass",r.VKq(3,Mm,e.parentTypeSelectOpen)),r.xp6(2),r.Q6J("value",e.language.getModuleName(e.parentType)),r.xp6(4),r.Q6J("ngForOf",e.parentTypes)}}function Im(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"field-lookup-recent",51),r.NdJ("selectedObject",(function(t){r.CHM(e);const s=r.oxw(3);return r.KtG(s.setParent(t))})),r.qZA()}if(2&e){const e=r.oxw(3);r.Q6J("module",e.parentType)}}function Om(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"field-lookup-search",52),r.NdJ("selectedObject",(function(t){r.CHM(e);const s=r.oxw(3);return r.KtG(s.setParent(t))}))("searchWithModal",(function(){r.CHM(e);const t=r.oxw(3);return r.KtG(t.searchWithModal())})),r.qZA()}if(2&e){const e=r.oxw(3);r.Q6J("module",e.parentType)("searchterm",e.parentSearchTerm)}}function Jm(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"div",25),r.YNc(1,Sm,11,5,"div",26),r.TgZ(2,"div",27)(3,"div",28)(4,"div",29)(5,"input",30,31),r.NdJ("focus",(function(){r.CHM(e);const t=r.oxw(2);return r.KtG(t.onFocusParent())}))("ngModelChange",(function(t){r.CHM(e);const s=r.oxw(2);return r.KtG(s.parentSearchTerm=t)})),r.qZA(),r.TgZ(7,"button",32),r.NdJ("click",(function(){r.CHM(e);const t=r.oxw(2);return r.KtG(t.searchWithModal())})),r._UZ(8,"system-button-icon",24),r.qZA()(),r.TgZ(9,"div",33),r.YNc(10,Im,1,1,"field-lookup-recent",34),r.YNc(11,Om,1,2,"field-lookup-search",35),r.qZA()()()()}if(2&e){const e=r.oxw(2);r.xp6(1),r.Q6J("ngIf",e.parentTypes.length>0),r.xp6(2),r.Q6J("ngClass",r.VKq(7,Mm,e.parentSearchOpen)),r.xp6(2),r.Q6J("ngModel",e.parentSearchTerm)("placeholder",e.language.getModuleCombinedLabel("LBL_SEARCH",e.parentType)),r.xp6(3),r.Q6J("icon","search"),r.xp6(2),r.Q6J("ngIf",""===e.parentSearchTerm),r.xp6(1),r.Q6J("ngIf",""!==e.parentSearchTerm)}}function Nm(e,t){if(1&e&&(r.TgZ(0,"div",13)(1,"div",14),r.YNc(2,km,10,5,"div",15),r.YNc(3,Jm,12,9,"div",16),r.qZA(),r._UZ(4,"field-messages",17),r.qZA()),2&e){const e=r.oxw();r.Q6J("ngClass",e.getFieldClass()),r.xp6(2),r.Q6J("ngIf",e.model.data[e.parentIdField]),r.xp6(1),r.Q6J("ngIf",!e.model.data[e.parentIdField]),r.xp6(1),r.Q6J("fieldname",e.fieldname)}}let Fm=(()=>{class fieldLinkedParent extends d.O{constructor(e,t,s,i,n,l,o,a,d){super(e,t,i,n,l),this.model=e,this.view=t,this.broadcast=s,this.language=i,this.metadata=n,this.router=l,this.elementRef=o,this.renderer=a,this.modal=d,this.parentTypeSelectOpen=!1,this.parentSearchOpen=!1,this.parentSearchTerm="",this.recentItems=[],this.parentTypes=[],this.subscriptions.add(this.broadcast.message$.subscribe({next:e=>this.handleMessage(e)})),this.subscriptions.add(this.model.data$.subscribe({next:()=>{this.getFieldSet()}}))}get parentIdField(){return this.fieldconfig.parentIdField?this.fieldconfig.parentIdField:"parent_id"}get parentTypeField(){return this.fieldconfig.parentTypeField?this.fieldconfig.parentTypeField:"parent_type"}get parentName(){return this.model.getField(this.fielddefs.rname??"summary_text")}get parentType(){return this.model.getField(this.parentTypeField)}get parentId(){return this.model.getField(this.parentIdField)}get displayModuleIcon(){return!this.fieldconfig.hidemoduleicon}get value(){let e=this.model.getField(this.fieldname);return e?this.fielddefs?.rname?e[this.fielddefs?.rname]:e.summary_text:""}set value(e){}get relData(){return this.model.getField(this.fieldname)??{}}ngOnInit(){this.determineParentTypes(),this.model.getField(this.parentTypeField)&&""!=this.model.getField(this.parentTypeField)||this.model.setField(this.parentTypeField,this.parentTypes[0])}getFieldSet(){this.fieldconfig.fieldset=void 0;let e=this.metadata.getComponentConfig("fieldLinkedParent",this.parentType);e.fieldset?this.fieldconfig.fieldset=e.fieldset:(e=this.metadata.getComponentConfig("fieldLinked",this.parentType),e.fieldset&&(this.fieldconfig.fieldset=e.fieldset))}determineParentTypes(){let e=[];this.fieldconfig.parenttypes?e=this.fieldconfig.parenttypes.replace(/\s/g,"").split(","):this.field_defs.parent_modules&&(e=this.field_defs.parent_modules),e.sort(((e,t)=>this.language.getModuleName(e).toLowerCase()>this.language.getModuleName(t).toLowerCase()?1:-1)),this.parentTypes=e}handleMessage(e){if(e.messagedata.reference&&"model.save"===e.messagetype)if(this.fieldid===e.messagedata.reference){this.parentSearchTerm="";let t={};t[this.parentIdField]=e.messagedata.data.id,t[this.fieldname]=e.messagedata.data.summary_text,this.model.setFields(t,!0)}}onClick(e){this.elementRef.nativeElement.contains(e.target)||this.closePopups()}closePopups(){this.model.getField(this.parentIdField)&&(this.parentSearchTerm=""),this.parentSearchOpen=!1,this.parentTypeSelectOpen=!1,this.clickListener()}setParent(e){this.model.setField(this.fieldname,e.data),this.model.setField(this.parentIdField,e.id)}toggleParentTypeSelect(){this.parentTypeSelectOpen=!this.parentTypeSelectOpen,this.parentSearchOpen=!1}setParentType(e){this.parentSearchTerm="",this.model.setField(this.parentTypeField,e),this.parentTypeSelectOpen=!1}clearParent(){this.fieldconfig.promptondelete?this.modal.confirm(this.language.getLabelFormatted("LBL_PROMPT_DELETE_RELATIONSHIP",[this.language.getFieldDisplayName(this.model.module,this.fieldname,this.fieldconfig)],"long"),this.language.getLabelFormatted("LBL_PROMPT_DELETE_RELATIONSHIP",[this.language.getFieldDisplayName(this.model.module,this.fieldname,this.fieldconfig)])).subscribe((e=>{e&&this.removeRelated()})):this.removeRelated()}removeRelated(){this.model.setField(this.fieldname,""),this.model.setField(this.parentIdField,"")}openParentTypes(){this.parentTypeSelectOpen=!0,this.parentSearchOpen=!1,this.clickListener=this.renderer.listen("document","click",(e=>this.onClick(e)))}onFocusParent(){this.parentTypeSelectOpen=!1,this.parentSearchOpen=!0,this.clickListener=this.renderer.listen("document","click",(e=>this.onClick(e)))}searchWithModal(){this.parentSearchOpen=!1,this.modal.openModal("ObjectModalModuleLookup").subscribe((e=>{e.instance.module=this.parentType,e.instance.multiselect=!1,e.instance.selectedItems.subscribe((e=>{e.length&&this.setParent({id:e[0].id,text:e[0].summary_text,data:e[0]})})),e.instance.searchTerm=this.parentSearchTerm}))}}return fieldLinkedParent.ɵfac=function(e){return new(e||fieldLinkedParent)(r.Y36(Z.o),r.Y36(A.e),r.Y36(V.f),r.Y36(x.d),r.Y36(c.Pu),r.Y36(k.F0),r.Y36(r.SBq),r.Y36(r.Qsj),r.Y36(L.o))},fieldLinkedParent.ɵcmp=r.Xpm({type:fieldLinkedParent,selectors:[["field-linked-parent"]],features:[r.qOj],decls:3,vars:3,consts:[[3,"fieldname","fieldconfig",4,"ngIf"],[3,"fielddisplayclass","editable","fieldconfig","fieldid",4,"ngIf"],["class","slds-form-element__control",3,"ngClass",4,"ngIf"],[3,"fieldname","fieldconfig"],[3,"fielddisplayclass","editable","fieldconfig","fieldid"],["class","slds-grid slds-grid_vertical-align-center",4,"ngIf"],[1,"slds-grid","slds-grid_vertical-align-center"],[3,"module","size",4,"ngIf"],["system-model-popover","",3,"module","id",4,"ngIf"],[4,"ngIf"],[3,"module","size"],["system-model-popover","",3,"module","id"],[3,"fieldset","module","data"],[1,"slds-form-element__control",3,"ngClass"],[1,"slds-form-element"],["class","slds-form-element__control slds-p-around--xx-small",4,"ngIf"],["class","slds-combobox-group slds-p-around--xx-small",4,"ngIf"],[3,"fieldname"],[1,"slds-form-element__control","slds-p-around--xx-small"],[1,"slds-pill_container"],[1,"slds-pill","slds-size--1-of-1"],[1,"slds-icon_container","slds-icon-standard-account","slds-pill__icon_container"],[1,"slds-pill__label"],[1,"slds-button","slds-button--icon","slds-pill__remove",3,"click"],[3,"icon"],[1,"slds-combobox-group","slds-p-around--xx-small"],["class","slds-combobox_object-switcher slds-combobox-addon_start",4,"ngIf"],[1,"slds-combobox_container","slds-combobox-addon_end"],["role","combobox",1,"slds-combobox","slds-dropdown-trigger","slds-dropdown-trigger_click",3,"ngClass"],["role","none",1,"slds-combobox__form-element","slds-input-has-icon","slds-input-has-icon_right"],["type","text","aria-autocomplete","list","autoComplete","off","role","textbox",1,"slds-input","slds-combobox__input",3,"ngModel","placeholder","focus","ngModelChange"],["focus",""],[1,"slds-button","slds-button_icon","slds-input__icon","slds-input__icon_right",3,"click"],["role","listbox",1,"slds-dropdown","slds-dropdown_length-with-icon-7","slds-dropdown_fluid"],[3,"module","selectedObject",4,"ngIf"],[3,"module","searchterm","selectedObject","searchWithModal",4,"ngIf"],[1,"slds-combobox_object-switcher","slds-combobox-addon_start"],[1,"slds-form-element__control"],[1,"slds-combobox_container"],[1,"slds-combobox__form-element","slds-input-has-icon","slds-input-has-icon--right",3,"click"],["type","text","readonly","","autoComplete","off","role","textbox",1,"slds-input","slds-combobox__input","slds-combobox__input-value",3,"value"],["icon","down","sprite","utility","addclasses","slds-input__icon slds-input__icon_right"],["role","listbox",1,"slds-dropdown","slds-dropdown_length-5","slds-dropdown_x-small","slds-dropdown_left"],["role","group","aria-label","Suggested for you",1,"slds-listbox","slds-listbox_vertical"],["role","presentation","class","slds-listbox__item",3,"click",4,"ngFor","ngForOf"],["role","presentation",1,"slds-listbox__item",3,"click"],["role","option",1,"slds-media","slds-listbox__option","slds-listbox__option_plain","slds-media_small"],[1,"slds-grid","slds-grid--vertical-align-center"],["size","x-small",3,"module"],[1,"slds-truncate"],[3,"module"],[3,"module","selectedObject"],[3,"module","searchterm","selectedObject","searchWithModal"]],template:function(e,t){1&e&&(r.YNc(0,ym,1,2,"field-label",0),r.YNc(1,Tm,2,5,"field-generic-display",1),r.YNc(2,Nm,5,4,"div",2)),2&e&&(r.Q6J("ngIf",t.displayLabel),r.xp6(1),r.Q6J("ngIf",!t.isEditMode()),r.xp6(1),r.Q6J("ngIf",t.isEditable()&&t.isEditMode()))},dependencies:[i.mk,i.sg,i.O5,n.Fj,n.JJ,n.On,w.J,rs.f,cs.M,us.g,u.q,C.D,ni,ms.P,hs.$,I.a],encapsulation:2}),fieldLinkedParent})(),qm=(()=>{class ObjectFields{}return ObjectFields.ɵfac=function(e){return new(e||ObjectFields)},ObjectFields.ɵmod=r.oAB({type:ObjectFields}),ObjectFields.ɵinj=r.cJS({imports:[i.ez,n.u5,o.SystemComponents,a.o,l._t]}),ObjectFields})();("undefined"==typeof ngJitMode||ngJitMode)&&r.kYT(qm,{declarations:[y,g,v,Qs,u.q,T,m.j,d.O,C.D,D,G,de,me,ge,ve,Oe,Ne,qe,Lo,Jo,De,Pe,ze,it,ut,Zt,Ft,mt,Ut,Vt,es,ns,ds,Bi,Ki,nn,un,yn,Jn,Mn,As,Es,$s,ti,Zi,vi,ni,Fm,Fi,ms.P,da.E,hs.$,ra.R,ca.I,Gn,ga,nl,cl,Cl,Sl,Fl,eo,uo,wo,Dl,jl,jo,zo,Bo,aa,I.a,Ca,Na,dd,$a,Ld,bd,vd,Nd,Fd,Ud,Fd,jd,rr,Gd,tr,gr,xr,Tr,Yr,Br,fc,xc,wc,kc,Ic,Nc,Fc,Uc,Gc,Vc,tu,ru,pu,_u,uu,Au,Iu,Gu,Iu,Eu,zu,$u,em,fm,_m],imports:[i.ez,n.u5,o.SystemComponents,a.o,l._t],exports:[y,g,u.q,m.j,d.O,C.D,de,I.a,Ca,Qs,Fi,ms.P,hs.$,ca.I,ru,dd,$a,fm]}),r.B6R(uo,[i.mk,i.sg,i.O5,l.Fd,u.q,C.D,I.a,fm],[])},5504:(e,t,s)=>{"use strict";s.d(t,{R:()=>c});var i=s(7579),n=s(1571),l=s(6163),o=s(4505),a=s(3369),d=s(5920),r=s(3298);let c=(()=>{class assistant{constructor(e,t,s,i,n){this.modelutilities=e,this.backend=t,this.broadcast=s,this.session=i,this.notification=n,this.assistantModules=[],this.assitantItems=[],this.assistantFilters={objectfilters:[],timefilter:"all"},this.initialized=!1,this.loading=!0,this.reminder=null,this.broadcast.message$.subscribe((e=>{this.handleMessage(e)})),this.session.authData.sessionId&&this.initialize()}handleMessage(e){switch(e.messagetype){case"logout":this.assitantItems=[],this.initialized=!1,this.reminder&&clearInterval(this.reminder);break;case"login":this.initialize();break;case"model.delete":case"model.save":this.assistantModules.indexOf(e.messagedata.module)>=0&&this.loadItems(!0)}}initialize(){this.initialized||(this.initialized=!0,this.loadItems(),this.reminder=setInterval((()=>{this.remind()}),6e4))}remind(){let e=moment.utc();for(let t of this.assitantItems)if(t.data.reminder_time&&"-1"!=t.data.reminder_time){let s=new moment.utc(t.date_activity).subtract(parseInt(t.data.reminder_time,10),"seconds");if(e.format("YYYYMMDDHHmm")==s.format("YYYYMMDDHHmm")){let e={id:this.modelutilities.generateGuid(),bean_module:t.module,bean_id:t.data.id,created_by:t.data.created_by,created_by_name:t.data.created_by,user_id:t.data.created_by,notification_date:t.date_activity,notification_type:"reminder",notification_read:0,additional_infos:{},bean_name:t.data.summary_text};this.notification.displayRealtimeNotification(e,!1)}}}loadItems(e=!0){e||(this.loading=!0,this.assitantItems=[]);let t=new i.x;return this.backend.getRequest("module/Activities/assistant/list").subscribe({next:e=>{let s=[];for(let t of e.items)s.push({id:t.id,module:t.module,date_activity:t.date_activity,data:this.modelutilities.backendModel2spice(t.module,t.data)});this.assitantItems=s,this.assistantModules=e.modules?e.modules:[],t.next(this.assitantItems),t.complete(),this.loading=!1},error:()=>{this.loading=!1}}),t.asObservable()}get filteredItems(){return"all"!=this.assistantFilters.timefilter||this.assistantFilters.objectfilters.length>0?this.assitantItems.filter((e=>{if(this.assistantFilters.objectfilters.length>0&&-1==this.assistantFilters.objectfilters.indexOf(e.module))return!1;if("all"!=this.assistantFilters.timefilter){let t=new moment.utc(e.date_activity);if("today"==this.assistantFilters.timefilter&&!t.isSame(moment.utc(),"day"))return!1;if("overdue"==this.assistantFilters.timefilter&&!t.isBefore(moment.utc(),"day"))return!1}return!0})):this.assitantItems}get activityTypes(){let e=[];for(let t of this.assitantItems)-1==e.indexOf(t.module)&&e.push(t.module);return e}}return assistant.ɵfac=function(e){return new(e||assistant)(n.LFG(l.A),n.LFG(o.y),n.LFG(a.f),n.LFG(d.n),n.LFG(r.t))},assistant.ɵprov=n.Yz7({token:assistant,factory:assistant.ɵfac}),assistant})()},4505:(e,t,s)=>{"use strict";s.d(t,{y:()=>f});var i=s(529),n=s(7579),l=s(1571),o=s(3278),a=s(3369),d=s(1481),r=s(6625),c=s(5920),u=s(4154),m=s(7774),h=s(6163),g=s(4044),p=s(5329);let f=(()=>{class backend{constructor(e,t,s,i,n,l,o,a,d,r,c){this.toast=e,this.http=t,this.broadcast=s,this.sanitizer=i,this.configurationService=n,this.session=l,this.metadata=o,this.router=a,this.modelutilities=d,this.modalservice=r,this.language=c,this.autoLogout={},this.reLogin=!1,this.reConnecting=!1,this.stageRequests=!1,this.stagedRequests=[],this.httpErrorsToReport=[],this.httpErrorReporting=!1,this.httpErrorReportingRetryTime=1e4}getHeaders(){let e=this.session.getSessionHeader();return e=e.set("Accept","application/json"),e}prepareParams(e){let t=new i.LE;return e&&Object.keys(e).forEach((s=>{let i=e[s];null!=i&&(t="object"==typeof i?t.append(s,JSON.stringify(i)):"boolean"==typeof i?t.append(s,!0===i?"1":"0"):"number"==typeof i?t.append(s,i+""):t.append(s,i.toString()))})),t}getRequest(e="",t={},s){return s||(s=new n.x),this.stageRequests?this.stageRequest("GET",e,{getParams:t},s):this.http.get(this.configurationService.getBackendUrl()+"/"+encodeURI(e),{headers:this.getHeaders(),observe:"response",params:this.prepareParams(t)}).subscribe((e=>{s.next(e.body),s.complete()}),(i=>{0==this.handleError(i,e,"GET",{getParams:t},s)&&s.error(i)})),s.asObservable()}getRawRequest(e="",t={},s="blob",i={}){let n=this.session.getSessionHeader();for(let e in i)n=n.set(e,i[e]);return this.http.get(this.configurationService.getBackendUrl()+"/"+e,{headers:n,params:this.prepareParams(t),responseType:"blob"})}postRequest(e="",t={},s={},i){if(i||(i=new n.x),this.stageRequests)this.stageRequest("GET",e,{getParams:t,body:s},i);else{let n=this.getHeaders();n=s?n.set("Content-Type","application/json"):n.set("Content-Type","application/x-www-form-urlencoded"),this.http.post(this.configurationService.getBackendUrl()+"/"+encodeURI(e),s,{headers:n,observe:"response",params:this.prepareParams(t)}).subscribe((e=>{i.next(e.body),i.complete()}),(n=>{this.handleError(n,e,"POST",{getParams:t,body:s},i)||i.error(n)}))}return i.asObservable()}patchRequest(e="",t={},s={},i){if(i||(i=new n.x),this.stageRequests)this.stageRequest("PATCH",e,{getParams:t,body:s},i);else{let n=this.getHeaders();n=s?n.set("Content-Type","application/json"):n.set("Content-Type","application/x-www-form-urlencoded"),this.http.patch(this.configurationService.getBackendUrl()+"/"+encodeURI(e),s,{headers:n,observe:"response",params:this.prepareParams(t)}).subscribe((e=>{i.next(e.body),i.complete()}),(n=>{this.handleError(n,e,"POST",{getParams:t,body:s},i)||i.error(n)}))}return i.asObservable()}postRequestWithProgress(e="",t={},s={},l=null,o){if(o||(o=new n.x),this.stageRequests)this.stageRequest("POSTWITHPROGRESS",e,{getParams:t,body:s,progress:l},o);else{let n=this.getHeaders();n=s?n.set("Content-Type","application/json"):n.set("Content-Type","application/x-www-form-urlencoded"),null!==l&&l.next(0),this.http.post(this.configurationService.getBackendUrl()+"/"+encodeURI(e),s,{headers:n,observe:"events",params:this.prepareParams(t),reportProgress:!!l}).subscribe((e=>{e.type===i.dt.UploadProgress?l.next(100*e.loaded/e.total):e.type===i.dt.Response&&(o.next(e.body),o.complete())}),(i=>{this.handleError(i,e,"POSTWITHPROGRESS",{getParams:t,body:s,progress:l},o)||o.error(i)}))}return o.asObservable()}getDownloadPostRequestFile(e="",t={},s={}){let i=new n.x,l=this.getHeaders();return l=l.set("Accept","*/*"),this.http.post(this.configurationService.getBackendUrl()+"/"+e,s,{headers:l,observe:"response",params:this.prepareParams(t),responseType:"blob"}).subscribe((e=>{let t=window.URL.createObjectURL(e.body);i.next(t),i.complete()}),(n=>{this.handleError(n,e,"POST",{getParams:t,body:s});let l=new FileReader;l.readAsText(n.error),l.onloadend=e=>{i.error(JSON.parse(l.result.toString()))}})),i.asObservable()}getLinkToDownload(e,t="GET",s=null,i=null,l=null){let o=new n.x,a=this.getHeaders();return a=a.set("Accept","*/*"),this.http.request(t,this.configurationService.getBackendUrl()+"/"+e,{body:i,headers:a,observe:"response",params:this.prepareParams(s),responseType:"blob"}).subscribe((e=>{if(200==e.status){let t=window.URL.createObjectURL(e.body);o.next(t),o.complete()}else o.error(e.statusText)}),(n=>{this.handleError(n,e,t,{getParams:s,body:i}),o.error(n)})),o.asObservable()}downloadFile(e,t=null,s=null){let i=new n.x;return this.getLinkToDownload(e.route,e.method,e.params,e.body,e.headers).subscribe((e=>{let n=e,l=document.createElement("a");document.body.appendChild(l),l.href=n,s&&(l.type=s),l.download=t,l.click(),l.remove(),i.next(),i.complete()}),(e=>i.error(e))),i.asObservable()}putRequest(e="",t={},s={},i){return i||(i=new n.x),this.stageRequests?this.stageRequest("PUT",e,{getParams:t,body:s},i):this.http.put(this.configurationService.getBackendUrl()+"/"+e,s,{headers:this.getHeaders(),observe:"response",params:this.prepareParams(t)}).subscribe((e=>{i.next(e.body),i.complete()}),(n=>{this.handleError(n,e,"PUT",{getParams:t,body:s},i)||i.error(n)})),i.asObservable()}deleteRequest(e="",t={},s){return s||(s=new n.x),this.stageRequests?this.stageRequest("DELETE",e,{getParams:t},s):this.http.delete(this.configurationService.getBackendUrl()+"/"+e,{headers:this.getHeaders(),params:this.prepareParams(t)}).subscribe((e=>{s.next(e||!0),s.complete()}),(i=>{this.handleError(i,e,"DELETE",{getParams:t},s),s.error(i)})),s.asObservable()}handleError(e,t,s,i=null,n){switch(e.status){case 401:return this.stageRequest(s,t,i,n),this.stageRequests=!0,this.reLogin||(this.reLogin=!0,this.modalservice.openModal("GlobalReLogin",!1,null,!0).subscribe((e=>{e.instance.loggedin.subscribe((e=>{e&&(this.reLogin=!1,this.stageRequests=!1,this.processStagedRequests())}))}))),!0;case 0:return this.stageRequest(s,t,i,n),this.stageRequests=!0,this.reConnecting||(this.reConnecting=!0,this.modalservice.openModal("GlobalReConnect",!1,null,!0).subscribe((e=>{e.instance.connected.subscribe((e=>{e&&(this.reConnecting=!1,this.stageRequests=!1,this.processStagedRequests())}))}))),!0;case 403:return"noLegalNoticeAccepted"===e.error?.error?.errorCode&&(this.broadcast.broadcastMessage("backend.response.error","noLegalNoticeAccepted"),!0)}return!1}stageRequest(e,t,s,i){this.stagedRequests.push({method:e,route:t,data:s,responseSubject:i})}processStagedRequests(){for(let e of this.stagedRequests)switch(e.method){case"GET":this.getRequest(e.route,e.data.getParams,e.responseSubject);break;case"POST":this.postRequest(e.route,e.data.getParams,e.data.body,e.responseSubject);break;case"PATCH":this.patchRequest(e.route,e.data.getParams,e.data.body,e.responseSubject);break;case"POSTWITHPROGRESS":this.postRequestWithProgress(e.route,e.data.getParams,e.data.body,e.data.progress,e.responseSubject);break;case"PUT":this.putRequest(e.route,e.data.getParams,e.data.body,e.responseSubject);break;case"DELETE":this.deleteRequest(e.route,e.data.getParams,e.responseSubject)}this.stagedRequests=[]}reportError(e,t,s,i){this.httpErrorsToReport.push({clientTime:(new Date).toISOString(),clientInfo:{sessionId:this.session.authData.sessionId,userId:this.session.authData.userId,userName:this.session.authData.userName},route:t,method:s,getParams:i.getParams?i.getParams:null,error:e,body:i.body?i.body:null}),this.httpErrorReporting||(this.httpErrorReporting=!0,window.setTimeout((()=>this.errorsToBackend()),this.httpErrorReportingRetryTime))}errorsToBackend(){this.httpErrorsToReport.length&&this.postRequest("system/httperrors",null,{errors:this.httpErrorsToReport}).subscribe((()=>{this.httpErrorsToReport.length=0,this.httpErrorReporting=!1}),(e=>{this.httpErrorReporting=!0,window.setTimeout((()=>this.errorsToBackend()),this.httpErrorReportingRetryTime)}))}get(e,t,s=""){let i=new n.x,l={};return s&&(l.trackaction=s),this.getRequest("module/"+e+"/"+t,l).subscribe((t=>{for(let s in t)t[s]=this.backend2spice(e,s,t[s]);i.next(t),i.complete()}),(e=>{i.error(e),i.complete()})),i.asObservable()}getDuplicates(e,t){let s=new n.x;return this.getRequest("module/"+e+"/"+t+"/duplicates").subscribe((e=>{s.next(e),s.complete()})),s.asObservable()}checkDuplicates(e,t){let s=new n.x;return this.postRequest("module/"+e+"/duplicates",{},t).subscribe((e=>{s.next(e),s.complete()})),s.asObservable()}getList(e,t=[],s={}){let i=new n.x,l=(s.start&&s.start,s.limit&&s.limit,s);return l.searchfields=s.searchfields,l.offset=s.start?s.start:0,l.limit=s.limit?s.limit:25,s.listid&&(l.listid=s.listid),t.length>0&&(l.sortfields=t),this.getRequest("module/"+e,l).subscribe((t=>{try{for(let s in t.list)for(let i in t.list[s])t.list[s][i]=this.backend2spice(e,i,t.list[s][i])}catch(e){i.next([]),i.complete()}i.next(t),i.complete()}),(e=>{i.error(e),i.complete()})),i.asObservable()}save(e,t,s,i=null,l=null){let o=new n.x;return this.postRequestWithProgress("module/"+e+"/"+t,{templateId:l},this.modelutilities.spiceModel2backend(e,s),i).subscribe((t=>{o.next(this.modelutilities.backendModel2spice(e,t)),o.complete()}),(e=>{o.error(e),o.complete()})),o.asObservable()}backend2spice(e,t,s){return this.modelutilities.backend2spice(e,t,s)}spice2backend(e,t,s){return this.modelutilities.spice2backend(e,t,s)}}return backend.ɵfac=function(e){return new(e||backend)(l.LFG(o.A),l.LFG(i.eN),l.LFG(a.f),l.LFG(d.H7),l.LFG(r.C),l.LFG(c.n),l.LFG(u.Pu),l.LFG(m.F0),l.LFG(h.A),l.LFG(g.o),l.LFG(p.d))},backend.ɵprov=l.Yz7({token:backend,factory:backend.ɵfac}),backend})()},3369:(e,t,s)=>{"use strict";s.d(t,{f:()=>n});var i=s(1571);let n=(()=>{class broadcast{constructor(){this.message$=new i.vpe}broadcastMessage(e,t={}){this.message$.emit({messagetype:e,messagedata:t})}}return broadcast.ɵfac=function(e){return new(e||broadcast)},broadcast.ɵprov=i.Yz7({token:broadcast,factory:broadcast.ɵfac}),broadcast})()},6625:(e,t,s)=>{"use strict";s.d(t,{C:()=>h});var i=s(1571),n=s(1135),l=s(2843),o=s(7579),a=s(4338),d=s(529),r=s(5920),c=s(3369),u=s(1481),m=s(7774);let h=(()=>{class configurationService{constructor(e,t,s,l,o){this.http=e,this.session=t,this.broadcast=s,this.title=l,this.router=o,this.enableinstall=!1,this.initialized=!1,this.reloading=!1,this.data={backendUrl:"api",backendextensions:{},systemparameters:{},theme:{},name:"SpiceCRM",displayloginsidebar:!1},this.assets=[],this.appdata={},this.datachanged$=new i.vpe,this.loaded$=new n.X(!1),this.getSysinfo(),this.openDB("config").then((e=>{this.db=e,this.readStoreAll("appdata").subscribe({next:e=>{for(let t of e)this.appdata[t.id]=t.data}})})),this.broadcast.message$.subscribe((e=>this.handleLogout(e)))}handleLogout(e){"logout"==e.messagetype&&this.reset()}openDB(e){return new Promise(((t,s)=>{indexedDB||s("IndexedDB not available");const i=indexedDB.open(e,2);let n;i.onsuccess=e=>{n=i.result,t(n)},i.onerror=e=>{s(`IndexedDB error: ${i.error}`)},i.onupgradeneeded=e=>{n=i.result,n.createObjectStore("appdata",{keyPath:"id"}),t(n)}}))}writeStore(e,t,s){this.db&&(t=t.toLowerCase(),this.db.transaction([e],"readwrite").objectStore(e).put({data:s,id:t}))}readStore(e,t){if(!this.db)return(0,l._)((()=>new Error("no indexedDB Support")));let s=new o.x,i=this.db.transaction([e],"readwrite").objectStore(e).get(t);return i.onerror=e=>{s.error(!1)},i.onsuccess=e=>{e.target.result?.data?(s.next(e.target.result.data),s.complete()):s.error(!1)},s.asObservable()}readStoreAll(e){if(!this.db)return(0,l._)((()=>new Error("no indexedDB Support")));let t=new o.x,s=this.db.transaction([e],"readwrite").objectStore(e).getAll();return s.onerror=e=>{t.error(!1)},s.onsuccess=e=>{if(e.target.result&&e.target.result.length>0){let s=[];for(let t of e.target.result)s.push(t);t.next(s),t.complete()}else t.error(!1)},t.asObservable()}clearDB(){if(!this.db)return;this.db.transaction(["appdata"],"readwrite").objectStore("appdata").clear()}reset(){this.appdata={},this.clearDB()}getBackendUrl(){return this.data.backendUrl}getFrontendUrl(){return void 0!==this.data.frontendUrl?this.data.frontendUrl:""}getUser(){return this.data.user}getPassword(){return this.data.password}get systemName(){return this.data.name?this.data.name:"SpiceCRM"}getSysinfo(){this.reloading=!0;let e=this.http.get(this.getBackendUrl()+"/sysinfo");return e.subscribe({next:e=>{e&&(this.data.languages=e.languages,this.data.backendextensions=e.extensions,this.data.systemparameters=e.systemsettings,this.data.socket_frontend=e.socket_frontend,this.data.unique_key=e.unique_key,this.data.name=e.name?e.name:"SpiceCRM",this.loaded$.next(!0)),this.initialized=!0,this.reloading=!1,e.assets&&this.setAssets(e.assets),this.setFavIcon(),this.title.setTitle(this.systemName)},error:e=>{"599"!=e.status&&"system is not installed"!=e.error.error.message||(this.enableinstall=!0,this.router.config.unshift({path:"install",component:a.s}),this.router.navigate(["/install"]))}}),e}getAsset(e){if(this.assets&&this.assets.find((t=>t.assetkey==e))?.assetvalue)return this.assets.find((t=>t.assetkey==e)).assetvalue}setAsset(e,t){let s=this.assets.findIndex((t=>t.assetkey==e));s>=0?this.assets[s].assetvalue=t:this.assets.push({assetkey:e,assetvalue:t}),this.loaded$.next(!0)}setAssets(e,t=!1){this.assets=e,this.setColors(),t&&this.loaded$.next(!0)}setColors(){if(!this.getAsset("colors"))return;let e=JSON.parse(this.getAsset("colors"));for(let t in e)document.documentElement.style.setProperty("--"+t,e[t])}getSystemParamater(e){try{return this.data.systemparameters[e]}catch(e){return!1}}checkCapability(e){return this.data.backendextensions&&this.data.backendextensions.hasOwnProperty(e)}getCapabilityConfig(e){try{return this.data.backendextensions[e]&&this.data.backendextensions[e].config?this.data.backendextensions[e].config:{}}catch(e){return{}}}hasCapabilityConfig(e){return this.data.backendextensions[e]&&this.data.backendextensions[e].config&&Object.keys(this.data.backendextensions[e].config).length>0}setData(e,t){this.appdata[e]=t,this.writeStore("appdata",e,t),this.datachanged$.emit(e)}getData(e){return!!this.appdata[e]&&this.appdata[e]}updateThemeColors(){let e,t=["color-white","color-grey-3","color-grey-9","color-grey-13","brand-background-primary","brand-primary","brand-primary-active","brand-accessible","brand-accessible-active","brand-header-contrast-cool","brand-text-link","color-background-inverse","color-border-inverse","color-background-success","color-background-success-dark","color-text-link-active","color-progressbar_item-completed","brand-primary-transparent","color-background-alt-inverse","color-border-brand","sds-c-button-brand-color-background","sds-c-button-neutral-color-background-hover","sds-c-button-brand-color-border-hover","sds-c-button-brand-color-background-active","sds-c-button-brand-color-border-active","sds-c-button-brand-color-background-hover","sds-c-input-shadow-focus","sds-c-textarea-shadow-focus","sds-c-select-shadow-focus","sds-c-button-text-color-hover","sds-c-icon-color-foreground"],s=this.getCapabilityConfig("theme");try{e=JSON.parse(s.colors)}catch(t){e={}}for(let s of t)document.documentElement.style.setProperty("--"+s,e[s]?e[s]:null);let i=getComputedStyle(document.documentElement).getPropertyValue("--brand-primary");i&&document.querySelector('meta[name="theme-color"]').setAttribute("content",i)}setFavIcon(){let e=document.querySelectorAll("link[ rel ~= 'icon' i]")[0];if(e){let t=this.getCapabilityConfig("theme");t.icon_image?e.setAttribute("href","data:"+t.icon_image):e.setAttribute("href","./config/favicon")}}}return configurationService.ɵfac=function(e){return new(e||configurationService)(i.LFG(d.eN),i.LFG(r.n),i.LFG(c.f),i.LFG(u.Dx),i.LFG(m.F0))},configurationService.ɵprov=i.Yz7({token:configurationService,factory:configurationService.ɵfac}),configurationService})()},5547:(e,t,s)=>{"use strict";s.d(t,{A:()=>o});var i=s(1571),n=s(6625),l=s(4505);let o=(()=>{class currency{constructor(e,t){this.configuration=e,this.backend=t,this.currenciesFromBackend=[]}get currencies(){return this.configuration.getData("currencies")??[]}getCurrencies(){let e=[];for(let t of this.currencies)e.push({id:t.id,name:t.name,iso:t.iso,symbol:t.symbol});return e}getCurrencySmbol(e){let t=this.currencies.find((t=>t.id==e));return t?t.symbol:""}}return currency.ɵfac=function(e){return new(e||currency)(i.LFG(n.C),i.LFG(l.y))},currency.ɵprov=i.Yz7({token:currency,factory:currency.ɵfac}),currency})()},788:(e,t,s)=>{"use strict";s.d(t,{m:()=>o});var i=s(1571),n=s(6163),l=s(3369);let o=(()=>{class dockedComposer{constructor(e,t){this.modelutilities=e,this.broadcast=t,this.composers=[],this.hiddenComposers=[],this.broadcast.message$.subscribe((e=>this.handleLogout(e)))}handleLogout(e){"logout"==e.messagetype&&(this.composers=[],this.hiddenComposers=[])}addComposer(e,t,s){t?(t.data.acl=t.acl,this.composers.splice(0,0,{module:e,id:t.id,name:t.getField("summary_text"),model:{module:e,id:t.id,data:t.data},loadexpanded:s})):this.composers.splice(0,0,{module:e,id:this.modelutilities.generateGuid(),name:"",model:{},loadexpanded:s})}focusComposer(e){this.composers.some(((t,s)=>{if(t.id==e){let e=this.composers.splice(s,1);return this.composers.unshift(e.shift()),!0}}))}get maxComposers(){return Math.floor((window.innerWidth-70)/500)}}return dockedComposer.ɵfac=function(e){return new(e||dockedComposer)(i.LFG(n.A),i.LFG(l.f))},dockedComposer.ɵprov=i.Yz7({token:dockedComposer,factory:dockedComposer.ɵfac}),dockedComposer})()},4376:(e,t,s)=>{"use strict";s.d(t,{G:()=>d});var i=s(1571),n=s(4505),l=s(3369),o=s(6625),a=s(5920);let d=(()=>{class favorite{constructor(e,t,s,i){this.backend=e,this.broadcast=t,this.configuration=s,this.session=i,this.isEnabled=!1,this.module="",this.id="",this.broadcast.message$.subscribe((e=>this.handleMessage(e)))}get favorites(){let e=this.configuration.getData("favorites");return e||[]}get isFavorite(){return!!this.favorites.find((e=>e.module_name==this.module&&e.item_id==this.id))}handleMessage(e){if("model.save"===e.messagetype)this.favorites.some(((t,s)=>{if(t.module_name===e.messagedata.module&&t.item_id==e.messagedata.id)return this.favorites[s].item_summary=e.messagedata.data.summary_text,!0}))}enable(e,t){this.isEnabled=!0,this.module=e,this.id=t}disable(){this.isEnabled=!1,this.module=void 0,this.id=void 0}getFavorites(e){return this.favorites.filter((t=>t.module_name===e))}setFavorite(){this.backend.postRequest("common/spicefavorites/"+this.module+"/"+this.id).subscribe((e=>{this.favorites.splice(0,0,{item_id:e.id,module_name:e.module,item_summary:e.summary_text,data:e.data})}))}deleteFavorite(e,t){e||(e=this.module),t||(t=this.id),this.backend.deleteRequest("common/spicefavorites/"+e+"/"+t).subscribe((s=>{this.favorites.some(((s,i)=>{if(s.module_name===e&&s.item_id===t)return this.favorites.splice(i,1),!0}))}))}}return favorite.ɵfac=function(e){return new(e||favorite)(i.LFG(n.y),i.LFG(l.f),i.LFG(o.C),i.LFG(a.n))},favorite.ɵprov=i.Yz7({token:favorite,factory:favorite.ɵfac}),favorite})()},6701:(e,t,s)=>{"use strict";s.d(t,{O:()=>n});var i=s(1571);let n=(()=>{class fielderrorgrouping{constructor(){this.fieldsWithErrors={},this.nrErrorsFields=0,this.change$=new i.vpe}setError(e,t){let s=!1;t?this.fieldsWithErrors[e]||(this.fieldsWithErrors[e]=!0,this.nrErrorsFields++,s=!0):this.fieldsWithErrors[e]&&(delete this.fieldsWithErrors[e],this.nrErrorsFields--,s=!0),s&&this.change$.emit(this.nrErrorsFields)}hasErrors(){return this.nrErrorsFields||!1}}return fielderrorgrouping.ɵfac=function(e){return new(e||fielderrorgrouping)},fielderrorgrouping.ɵprov=i.Yz7({token:fielderrorgrouping,factory:fielderrorgrouping.ɵfac}),fielderrorgrouping})()},3917:(e,t,s)=>{"use strict";s.d(t,{M:()=>n});var i=s(1571);let n=(()=>{class footer{constructor(){this.footercontainer=null,this.modalcontainer=null,this.modalbackdrop=null,this.visibleFooterHeight=0}}return footer.ɵfac=function(e){return new(e||footer)},footer.ɵprov=i.Yz7({token:footer,factory:footer.ɵfac}),footer})()},2487:(e,t,s)=>{"use strict";s.d(t,{Q:()=>u});var i=s(7579),n=s(1571),l=s(4505),o=s(6625),a=s(5920),d=s(6163),r=s(4154),c=s(5329);let u=(()=>{class fts{constructor(e,t,s,i,n,l){this.backend=e,this.configurationService=t,this.session=s,this.modelutilities=i,this.metadata=n,this.language=l,this.hits=[],this.found=0,this.runningsearch=void 0,this.runningmodulesearch=void 0,this.searchTerm="",this.searchSort={},this.searchOwner=!1,this.searchGeo={},this.searchAggregates={},this.searchModules=[],this.modulefilter="",this.buckets={},this.moduleSearchresults=[],this.lastSearchParams={},this.gloablSearchResults={},this.getSearchModules()}get loadedSearchModules(){return this.searchModules.filter((e=>this.metadata.checkModuleAcl(e,"list")))}transformHits(e){let t=[];for(let s of e)t.push(this.tranformHit(s));return t}tranformHit(e){for(let t in e._source)e._source.hasOwnProperty(t)&&"string"==typeof e._source[t]&&(e._source[t]=e._source[t]);return e}search(e,t=5){this.searchTerm=e,this.runningsearch&&this.runningsearch.unsubscribe(),this.resetData(),this.runningsearch=this.backend.postRequest("search",{},{size:t,searchterm:e,modules:this.loadedSearchModules.join(",")}).subscribe((e=>{this.hits=e.hits.hits,this.found=e.hits.total,this.runningsearch=void 0}))}searchByModules(e){let t=new i.x;return e.modules&&0!==e.modules.length||(e.modules=this.loadedSearchModules),e.searchterm&&-1!=e.searchterm.indexOf("%")&&(e.searchterm=e.searchterm.replace(/%/g,"*")),e.searchterm=e.searchterm.trim(),this.searchTerm=e.searchterm,this.searchAggregates=e.aggregates,this.searchSort=e.sortparams,this.searchGeo=e.searchgeo,this.searchOwner=e.owner,this.modulefilter=e.modulefilter,this.buckets=e.buckets,this.runningmodulesearch&&this.runningmodulesearch.unsubscribe(),this.runningmodulesearch=this.backend.postRequest("search",{},{modules:e.modules.length>0?e.modules.join(","):"",searchterm:e.searchterm,searchgeo:e.searchgeo,records:e.size,owner:e.owner,aggregates:this.searchAggregates,sort:this.searchSort,modulefilter:e.modulefilter,buckets:e.buckets}).subscribe((s=>{this.moduleSearchresults=[];for(let e in s)s.hasOwnProperty(e)&&this.moduleSearchresults.push({module:e,data:{hits:this.transformHits(s[e].hits),max_score:s[e].max_score,total:s[e].total}});this.moduleSearchresults.sort(((e,t)=>{let s=parseFloat(e.data.max_score),i=parseFloat(t.data.max_score);return isNaN(s)&&isNaN(i)?1:isNaN(i)?-1:isNaN(s)||i>s?1:-1})),this.lastSearchParams=e,this.runningmodulesearch=void 0,t.next(s),t.complete()})),t.asObservable()}export(e,t,s,n={},l={},o=!1){let a=new i.x;return-1!=e.indexOf("%")&&(e=e.replace(/%/g,"*")),e=e.trim(),this.searchTerm=e,this.searchAggregates=n,this.searchSort=l,this.runningmodulesearch=this.backend.getDownloadPostRequestFile("search/export",{},{module:t,searchterm:e,fields:s,owner:o,aggregates:n,sort:this.searchSort}).subscribe((e=>{a.next(e),a.complete()})),a.asObservable()}loadMore(e){let t=new i.x;if(!this.runningmodulesearch){if(e){let t=!1;for(let s of e.bucketitems)(!s.total||s.total>s.items)&&(t=!0);if(!t)return}else if(this.moduleSearchresults[0].data.hits.length>=this.moduleSearchresults[0].data.total)return;return this.runningmodulesearch=this.backend.postRequest("search",{},{modules:this.lastSearchParams.modules.length>0?this.lastSearchParams.modules.join(","):"",searchterm:this.lastSearchParams.searchterm,aggregates:this.searchAggregates,sort:this.searchSort,owner:this.searchOwner,records:this.lastSearchParams.size,start:this.moduleSearchresults[0].data.hits.length,modulefilter:this.modulefilter,buckets:e}).subscribe((e=>{for(let t of this.lastSearchParams.modules)for(let s of e[t].hits)this.moduleSearchresults[0].data.hits.push(this.tranformHit(s));this.runningmodulesearch=void 0,t.next(e),t.complete()})),t.asObservable()}}getSearchModules(){this.searchModules=this.metadata.getGlobalSearchModules().sort(((e,t)=>this.language.getModuleName(e).localeCompare(this.language.getModuleName(t))))}resetData(){this.found=0,this.hits=[]}}return fts.ɵfac=function(e){return new(e||fts)(n.LFG(l.y),n.LFG(o.C),n.LFG(a.n),n.LFG(d.A),n.LFG(r.Pu),n.LFG(c.d))},fts.ɵprov=n.Yz7({token:fts,factory:fts.ɵfac}),fts})()},3441:(e,t,s)=>{"use strict";s.d(t,{_:()=>o});var i=s(7579),n=s(1571),l=s(4044);let o=(()=>{class helper{constructor(e){this.modalservice=e,this.dialog=null,this._base64_keyStr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}getRand(){return Math.random()}S4(){return(65536*(1+this.getRand())|0).toString(16).substring(1)}generateGuid(){return this.S4()+this.S4()+"-"+this.S4()+"-"+this.S4()+"-"+this.S4()+"-"+this.S4()+this.S4()+this.S4()}confirm(e,t){let s=new i.x;return this.modalservice.confirm(t,e).subscribe((e=>{s.next(e),s.complete()})),s.asObservable()}shuffle(e){let t,s,i=e.length;for(;i;)s=Math.floor(Math.random()*i--),t=e[i],e[i]=e[s],e[s]=t;return e}encodeBase64(e){let t,s,i,n,l,o,a,d="",r=0;for(e=this._utf8_encodeBase64(e);r<e.length;)t=e.charCodeAt(r++),s=e.charCodeAt(r++),i=e.charCodeAt(r++),n=t>>2,l=(3&t)<<4|s>>4,o=(15&s)<<2|i>>6,a=63&i,isNaN(s)?o=a=64:isNaN(i)&&(a=64),d=d+this._base64_keyStr.charAt(n)+this._base64_keyStr.charAt(l)+this._base64_keyStr.charAt(o)+this._base64_keyStr.charAt(a);return d}decodeBase64(e){let t,s,i,n,l,o,a,d="",r=0;for(e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");r<e.length;)n=this._base64_keyStr.indexOf(e.charAt(r++)),l=this._base64_keyStr.indexOf(e.charAt(r++)),o=this._base64_keyStr.indexOf(e.charAt(r++)),a=this._base64_keyStr.indexOf(e.charAt(r++)),t=n<<2|l>>4,s=(15&l)<<4|o>>2,i=(3&o)<<6|a,d+=String.fromCharCode(t),64!=o&&(d+=String.fromCharCode(s)),64!=a&&(d+=String.fromCharCode(i));return d=this._utf8_decodeBase64(d),d}_utf8_encodeBase64(e){let t="";e=e.replace(/\r\n/g,"\n");for(let s=0;s<e.length;s++){let i=e.charCodeAt(s);i<128?t+=String.fromCharCode(i):i>127&&i<2048?(t+=String.fromCharCode(i>>6|192),t+=String.fromCharCode(63&i|128)):(t+=String.fromCharCode(i>>12|224),t+=String.fromCharCode(i>>6&63|128),t+=String.fromCharCode(63&i|128))}return t}_utf8_decodeBase64(e){let t="",s=0,i=0,n=0,l=0;for(;s<e.length;)i=e.charCodeAt(s),i<128?(t+=String.fromCharCode(i),s++):i>191&&i<224?(n=e.charCodeAt(s+1),t+=String.fromCharCode((31&i)<<6|63&n),s+=2):(n=e.charCodeAt(s+1),l=e.charCodeAt(s+2),t+=String.fromCharCode((15&i)<<12|(63&n)<<6|63&l),s+=3);return t}determineFileIcon(e){if(e){let t,s;if([t,s]=e.split("/"),!t)return"unknown";switch(t){case"image":case"png":case"jpeg":return"image";case"text":return"html"===s?"html":"txt";case"audio":return"audio";case"video":return"video"}switch(s){case"xml":return"xml";case"pdf":return"pdf";case"vnd.ms-excel":case"vnd.openxmlformats-officedocument.spreadsheetml.sheet":return"excel";case"vnd.openxmlformats-officedocument.wordprocessingml.document":case"vnd.oasis.opendocument.text":return"word";case"vnd.oasis.opendocument.presentation":case"vnd.openxmlformats-officedocument.presentationml.presentation":return"ppt";case"x-zip-compressed":return"zip";case"x-msdownload":return"exe"}}return"unknown"}humanFileSize(e){let t=1024,s=e;if(Math.abs(e)<t)return s+" B";let i=["kB","MB","GB","TB","PB","EB","ZB","YB"],n=-1;do{s/=t,++n}while(Math.abs(s)>=t&&n<i.length-1);return s.toFixed(1)+" "+i[n]}generatePassword(e){let t=[],s=[];["upper","number","special","lower"].forEach((t=>{e["one"+t]&&s.push(t)}));let i=e.minpwdlength;return s.forEach(((e,n)=>{let l;l=n===s.length-1?i:Math.floor(Math.random()*(i-(s.length-n-1)))+1;for(let s=0;s<l;s++)t.push(this.pwRandomChar(e));i-=l})),this.shuffle(t).join("")}pwRandomChar(e){let t="!\"#$%&'()*+,-./:;<=>?@[\\]^_{|}~";switch(e){case"upper":return String.fromCharCode(Math.floor(26*Math.random())+65);case"lower":return String.fromCharCode(Math.floor(26*Math.random())+97);case"special":return t.charAt(Math.floor(Math.random()*t.length));case"number":return String.fromCharCode(Math.floor(10*Math.random())+48)}}}return helper.ɵfac=function(e){return new(e||helper)(n.LFG(l.o))},helper.ɵprov=n.Yz7({token:helper,factory:helper.ɵfac}),helper})()},5329:(e,t,s)=>{"use strict";s.d(t,{d:()=>u});var i=s(1571),n=s(2843),l=s(7579),o=s(529),a=s(6625),d=s(5920),r=s(3369),c=s(4154);let u=(()=>{class language{constructor(e,t,s,n,l){this.http=e,this.configurationService=t,this.session=s,this.broadcast=n,this.metadata=l,this.languagedata={},this._currentlanguage="",this.currentlanguage$=new i.vpe,this.inlineEditEnabled=!1,this.openDB("language").then((e=>{this.db=e})),this.broadcast.message$.subscribe((e=>this.handleLogout(e)))}set currentlanguage(e){e||(e=this.getDefaultLanguage()),this._currentlanguage=e,this.readStoreAll("languages").subscribe({next:t=>{t.forEach((t=>{t.isCurrent=e==t.language_code,this.updateStore("languages",t)}))},error:()=>!1})}get currentlanguage(){return this._currentlanguage}handleLogout(e){"logout"==e.messagetype&&this.clearDB()}openDB(e){return new Promise(((t,s)=>{indexedDB||s("IndexedDB not available");const i=indexedDB.open(e,1);let n;i.onsuccess=e=>{n=i.result,t(n)},i.onerror=e=>{s(`IndexedDB error: ${i.error}`)},i.onupgradeneeded=e=>{n=i.result,n.createObjectStore("languages",{keyPath:"language_code"}),n.createObjectStore("applang",{keyPath:"language_code"}),n.createObjectStore("applist",{keyPath:"language_code"}),t(n)}}))}writeStore(e,t){this.db&&this.db.transaction([e],"readwrite").objectStore(e).add(t)}updateStore(e,t){this.db&&this.db.transaction([e],"readwrite").objectStore(e).put(t)}readStore(e,t){if(!this.db)return(0,n._)((()=>new Error("no indexedDB Support")));let s=new l.x;try{let i=this.db.transaction([e],"readwrite").objectStore(e).get(t);i.onerror=e=>{s.error(!1)},i.onsuccess=i=>{i.target.result?.data?(s.next(i.target.result.data),s.complete()):s.error(`Table ${e} with id ${t} has no data`)}}catch(e){s.error(!1)}return s.asObservable()}readStoreAll(e){if(!this.db)return(0,n._)((()=>new Error("no indexedDB Support")));let t=new l.x,s=this.db.transaction([e],"readwrite").objectStore(e).getAll();return s.onerror=e=>{t.error(!1)},s.onsuccess=e=>{e.target.result&&e.target.result.length>0?(t.next(e.target.result),t.complete()):t.error(!1)},t.asObservable()}clearDB(){if(!this.db)return;let e=this.db.transaction(["languages","applang","applist"],"readwrite");e.objectStore("languages").clear(),e.objectStore("applang").clear(),e.objectStore("applist").clear()}getLanguage(e){this.readStoreAll("languages").subscribe({next:t=>{this.languagedata.languages={available:t},this._currentlanguage=t.find((e=>e.isCurrent))?.language_code,this.readStore("applang",this.currentlanguage).subscribe({next:e=>this.languagedata.applang=e,error:()=>!1}),this.readStore("applist",this.currentlanguage).subscribe({next:e=>this.languagedata.applist=e,error:()=>!1}),e.next("getLanguage")},error:()=>{this.loadLanguage().subscribe((()=>{this.languagedata.languages.available.forEach((e=>{e.isCurrent=e.language_code==this.currentlanguage,this.writeStore("languages",e)})),e.next("getLanguage")}))}})}switchLanguage(e){let t=new l.x;return this.currentlanguage=e,this.readStore("applang",e).subscribe({next:s=>{this.languagedata.applang=s,this.readStore("applist",e).subscribe({next:e=>{this.languagedata.applist=e,this.currentlanguage$.emit(this.currentlanguage),t.next(!0),t.complete()},error:()=>{this.currentlanguage$.emit(this.currentlanguage),t.next(!0),t.complete()}})},error:()=>{this.loadLanguage().subscribe({next:()=>{t.next(!0),t.complete()}})}}),t.asObservable()}loadLanguage(){let e=new l.x,t=this.configurationService.getBackendUrl()+"/system/language";return this.currentlanguage&&(t+="/"+this.currentlanguage),this.http.get(t,{headers:this.session.getSessionHeader(),observe:"response"}).subscribe({next:t=>{let s=t.body;this.languagedata=s,this.currentlanguage||(this.currentlanguage=s.language),this.writeStore("applang",{language_code:this.currentlanguage,data:this.languagedata.applang}),this.writeStore("applist",{language_code:this.currentlanguage,data:this.languagedata.applist}),this.currentlanguage$.emit(this.currentlanguage),e.next(!0),e.complete()}}),e.asObservable()}getLabel(e,t="",s="default"){try{return""!=t&&void 0!==this.languagedata.mod&&null!=this.languagedata.mod[t]&&this.languagedata.mod[t][e]?this.languagedata.mod[t][e]||e:this.getAppLanglabel(e,s)}catch(t){return e}}getAppLanglabel(e,t="default"){return this.languagedata.applang[e]?"object"==typeof this.languagedata.applang[e]&&this.languagedata.applang[e][t]?this.getNestedLabel(e,t):this.getNestedLabel(e):e}getNestedLabel(e,t="default"){let s;if(this.languagedata.applang[e]&&(_.isObject(this.languagedata.applang[e])?s=this.languagedata.applang[e][t]?this.languagedata.applang[e][t]:this.languagedata.applang[e].default:_.isString(this.languagedata.applang[e])&&(s=this.languagedata.applang[e])),s){let e=this.getNestedTags(s);if(e)for(let i of e)s=s.replace("{LABEL:"+i+"}",this.getNestedLabel(i,t))}return s||e}getNestedTags(e){let t=e.indexOf("{LABEL:"),s=[];for(;t>=0;)if(t>=0){let i=e.indexOf("}",t);i>=0?(s.push(e.substring(t+7,i)),t=e.indexOf("{LABEL:",i)):t=-1}return s}getLabelFormatted(e,t,s="default"){let i;i=Array.isArray(t)?t:new Array(t);let n=0;return this.getLabel(e,"",s).replace(/%(s|%)/g,((...e)=>"s"===e[1]?i[n++]:"%"===e[1]?"%":e[0]))}getModuleName(e,t=!1,s="default"){try{let i=this.metadata.getModuleDefs(e);if(t){if(i.singular_label)return this.getLabel(i.singular_label,"",s);if(this.languagedata.applist.moduleListSingular[e])return this.languagedata.applist.moduleListSingular[e]||e}else if(i.module_label)return this.getLabel(i.module_label,"",s);return this.languagedata.applist.moduleList[e]||e}catch(t){return e}}getModuleCombinedLabel(e,t){return t?this.languagedata.applang[e+"_"+t.toUpperCase()]?this.getLabel(e+"_"+t.toUpperCase()):this.getLabel(e)+" "+this.getModuleName(t):"no module defined"}getFieldDisplayName(e,t,s={},i="default"){let n="";if(s.label)if(s.label.indexOf(":")>0){let e=s.label.split(":");n=this.getLabel(e[1],e[0])}else n=this.getLabel(s.label,e,i);else n=this.getLabel(this.metadata.getFieldlabel(e,t),e,i);return""===n?s.label?s.label:t:n}getFieldHelpText(e,t,s={}){let i="";if(s.popupHelp)if(s.popupHelp.indexOf(":")>0){let e=s.popupHelp.split(":");i=this.getLabel(e[1],e[0],"default")}else i=this.getLabel(s.popupHelp,e,"default");else i=this.getLabel(this.metadata.getFieldHelpText(e,t),e,"default");return""===i?s.popupHelp?s.popupHelp:t:i}getFieldDisplayOptions(e,t,s=!1){let i=this.metadata.getFieldOptions(e,t);if(!1===i)return[];try{let e=this.languagedata.applist[i];if(s){let t=e;e=[];for(let s in t)e.push({value:s,display:t[s]})}return e}catch(e){return[]}}getDisplayOptions(e,t=!1){let s=this.languagedata.applist[e];if(t){let e=s;s=[];for(let t in e)s.push({value:t,display:e[t]})}return s}getFieldDisplayOptionValue(e,t,s){let i=this.metadata.getFieldOptions(e,t);if(!1===i)return s;try{return this.languagedata.applist[i][s]?this.languagedata.applist[i][s]:s}catch(e){return s}}getAvialableLanguages(e=!1){let t=[];for(let s of this.languagedata.languages.available)(!e||s.system_language&&0!=s.system_language)&&t.push({language:s.language_code,text:s.language_name,system_language:s.system_language,communication_language:s.communication_language,default_language:s.language_code==this.languagedata.languages.default});return t}addAvailableLanguage(e){let t=!1;this.languagedata.languages.available.some((s=>{if(s.language_code==e.language_code)return s.system_language=e.system_language,s.default_language=e.default_language,e.default_language&&this.setDefaultLanguage(e.language_code),t=!0,!0})),t||(this.languagedata.languages.available.push(e),this.writeStore("languages",e))}removeAvailableLanguage(e){this.languagedata.languages.available.some((e=>{if(e.language_code==e)return e.system_language=!1,!0}))}getDefaultLanguage(){return this.languagedata.languages.default}setDefaultLanguage(e){this.http.post(this.configurationService.getBackendUrl()+"/configuration/syslanguages/setdefault/"+e,{},{headers:this.session.getSessionHeader(),observe:"response"}).subscribe((t=>{t.body.success&&(this.languagedata.languages.default=e)}))}getLangText(e){let t=e;return this.languagedata.languages.available.some((s=>{if(s.language_code==e)return t=s.language_name,!0})),t}searchLabel(e,t=10){let s=[],i=e.toLowerCase().split(" ");for(let e in this.languagedata.applang){let n=!0;for(let t of i)if(e.toLocaleLowerCase().indexOf(t)<0){n=!1;break}if(n&&s.push({label:e,translation:this.getAppLanglabel(e)}),s.length>=t)break}return s}addLabel(e,t="",s="",i=""){this.languagedata.applang[e]={default:t,long:i,short:s}}compareStrings(e,t){return e.localeCompare(t,this._currentlanguage.slice(0,2))}sortArray(e,t=!1){e.sort(((e,s)=>this.compareStrings(e,s)*(t?-1:1)))}sortObjects(e,t,s=!1){e.sort(((e,i)=>this.compareStrings(e[t],i[t])*(s?-1:1)))}ucFirst(e){return e.charAt(0).toLocaleUpperCase(this._currentlanguage.slice(0,2))+e.slice(1)}lcFirst(e){return e.charAt(0).toLocaleLowerCase(this._currentlanguage.slice(0,2))+e.slice(1)}}return language.ɵfac=function(e){return new(e||language)(i.LFG(o.eN),i.LFG(a.C),i.LFG(d.n),i.LFG(r.f),i.LFG(c.Pu))},language.ɵprov=i.Yz7({token:language,factory:language.ɵfac}),language})()},6559:(e,t,s)=>{"use strict";s.d(t,{b:()=>n});var i=s(1571);let n=(()=>{class layout{constructor(){this.headerheight=90}get screenwidth(){let e=window.innerWidth;return e>=1024?"large":e>=768?"medium":"small"}}return layout.ɵfac=function(e){return new(e||layout)},layout.ɵprov=i.Yz7({token:layout,factory:layout.ɵfac}),layout})()},2067:(e,t,s)=>{"use strict";s.d(t,{$:()=>d});var i=s(5861),n=s(1571),l=s(7579),o=s(9646),a=s(6625);let d=(()=>{class libloader{constructor(e){this.configuration=e,this.loadedLibs=[],this.loadedLibs$=new n.vpe,this.loadedDirect=[]}get scripts(){return this.configuration.getData("scripts")}loadLibs(...e){let t=[];e.forEach((e=>{t.push(this.loadLib(e))}));let s=new l.x,i=0;for(let e of t)e.subscribe((e=>{i++,i==t.length&&(s.next(!0),s.complete())}),(e=>{i++,s.error(e)}));return i==t.length?(0,o.of)(s):s.asObservable()}loadLib(e){if(this.scripts[e]){if(this.isLibLoaded(e))return(0,o.of)({script:e,loaded:!0,status:"Already Loaded"});if(this.isLibLoading(e))return this.loadedLibs$;{this.loadedLibs.push({name:e,status:"loading"});let t=new l.x;return this.loadScriptsDirect(this.scripts[e]).then((s=>{t.next({script:e,loaded:!0,status:"Loaded"}),t.complete(),this.loadedLibs.find((t=>t.name==e)).status="loaded",this.loadedLibs$.emit({script:e,loaded:!0,status:"Loaded"})}),(s=>{t.error({script:e,loaded:!1,status:"error"}),t.complete(),this.loadedLibs.find((t=>t.name==e)).status="error",this.loadedLibs$.emit({script:e,loaded:!0,status:"error"})})),t.asObservable()}}return(0,o.of)({script:e,loaded:!1,status:"Unknown"})}loadScriptsDirect(e){var t=this;return(0,i.Z)((function*(){return new Promise(function(){var s=(0,i.Z)((function*(s,i){let n=0;for(let l of e)yield t.loadScriptDirect(l.src).then((t=>{n++,n==e.length&&s({script:l.name,loaded:!0,status:"Loaded"})}),(e=>{i({script:l.name,loaded:!1,status:"error"})}))}));return function(e,t){return s.apply(this,arguments)}}())}))()}loadFromSource(e){let t=new l.x,s=0;for(let i of e)this.loadScriptDirect(i).then((i=>{s++,s==e.length&&(t.next(!0),t.complete())}),(e=>{t.error(!1),t.complete()}));return t.asObservable()}loadScriptDirect(e){var t=this;return(0,i.Z)((function*(){return-1!=t.loadedDirect.indexOf(e)?Promise.resolve(!0):new Promise(((t,s)=>{let i={};e.endsWith(".css")?(i=document.createElement("link"),i.rel="stylesheet",i.href=e):(i=document.createElement("script"),i.type="text/javascript",i.src=e),i.readyState?i.onreadystatechange=()=>{"loaded"!==i.readyState&&"complete"!==i.readyState||(i.onreadystatechange=null,t(!0))}:i.onload=()=>{t(!0)},i.onerror=e=>{s(!1)},document.getElementsByTagName("head")[0].appendChild(i)}))}))()}isLibLoaded(e){return!!this.loadedLibs.find((t=>t.name==e&&"loaded"==t.status))}isLibLoading(e){return!!this.loadedLibs.find((t=>t.name==e&&"loading"==t.status))}}return libloader.ɵfac=function(e){return new(e||libloader)(n.LFG(a.C))},libloader.ɵprov=n.Yz7({token:libloader,factory:libloader.ɵfac}),libloader})()},4411:(e,t,s)=>{"use strict";s.d(t,{_:()=>u});var i=s(7579),n=s(2843),l=s(1571),o=s(529),a=s(3369),d=s(6625),r=s(5920),c=s(5329);let u=(()=>{class loader{constructor(e,t,s,n,l){this.http=e,this.broadcast=t,this.configuration=s,this.session=n,this.language=l,this.module="",this.id="",this.data={},this.loaderHandler=new i.x,this.start="",this.counterCompleted=0,this.progress=0,this.activeLoader="",this.loadPhase="system",this.loadElements={system:[{name:"getLanguage",display:"Language",status:"initial",sequence:35,action:e=>{e.language.getLanguage(e.loaderHandler)}}],primary:[],secondary:[]},this.loaderHandler.subscribe((e=>this.handleLoaderHandler())),this.openDB("loaddata").then((e=>{this.db=e})),this.broadcast.message$.subscribe((e=>this.handleLogout(e)))}getLoadTasks(){let e=new i.x;return this.readStoreAll("loadtasks").subscribe({next:t=>{this.processLoadTasks(t,!1),e.next(!0),e.complete()},error:()=>{this.getLoadTasksFromBackend(e)}}),e.asObservable()}getLoadTasksFromBackend(e){this.http.get(this.configuration.getBackendUrl()+"/system/spiceui/core/loadtasks",{headers:this.session.getSessionHeader()}).subscribe((t=>{this.processLoadTasks(t),e.next(!0),e.complete()}))}processLoadTasks(e,t=!0){this.loadElements.primary=[],this.loadElements.secondary=[];for(let s of e)s.status="initial",this.loadElements[s.phase].push(s),t&&this.writeStore("loadtasks",s.id,s);this.loadElements.primary.sort(((e,t)=>parseInt(e.sequence,10)>parseInt(t.sequence,10)?1:-1)),this.loadElements.secondary.sort(((e,t)=>parseInt(e.sequence,10)>parseInt(t.sequence,10)?1:-1))}openDB(e){return new Promise(((t,s)=>{indexedDB||s("IndexedDB not available");const i=indexedDB.open(e,2);let n;i.onsuccess=e=>{n=i.result,t(n)},i.onerror=e=>{s(`IndexedDB error: ${i.error}`)},i.onupgradeneeded=e=>{n=i.result,n.createObjectStore("loadtaskdata",{keyPath:"id"}),n.createObjectStore("loadtasks",{keyPath:"id"}),t(n)}}))}writeStore(e,t,s){this.db&&this.db.transaction([e],"readwrite").objectStore(e).add({data:s,id:t})}readStore(e,t){if(!this.db)return(0,n._)((()=>new Error("no indexedDB Support")));let s=new i.x,l=this.db.transaction([e],"readwrite").objectStore(e).get(t);return l.onerror=e=>{s.error(!1)},l.onsuccess=e=>{e.target.result?.data?(s.next(e.target.result.data),s.complete()):s.error(!1)},s.asObservable()}readStoreAll(e){if(!this.db)return(0,n._)((()=>new Error("no indexedDB Support")));let t=new i.x,s=this.db.transaction([e],"readwrite").objectStore(e).getAll();return s.onerror=e=>{t.error(!1)},s.onsuccess=e=>{if(e.target.result&&e.target.result.length>0){let s=[];for(let t of e.target.result)s.push(t.data);t.next(s),t.complete()}else t.error(!1)},t.asObservable()}clearDB(){if(!this.db)return;let e=this.db.transaction(["loadtaskdata","loadtasks"],"readwrite");e.objectStore("loadtasks").clear(),e.objectStore("loadtaskdata").clear()}handleLogout(e){"logout"==e.messagetype&&this.clearDB()}load(e=!0){return e&&(this.clearDB(),this.language.clearDB(),this.configuration.clearDB()),this.loadComplete=new i.x,this.getLoadTasks().subscribe((e=>{this.resetLoader(),this.start=performance.now(),this.handleLoaderHandler()})),this.loadComplete.asObservable()}reloadPrimary(){this.loadComplete=new i.x,this.loadPhase="primary",this.progress=0,this.counterCompleted=0;for(let e of this.loadElements.primary)e.status="initial";return this.start=performance.now(),this.handleLoaderHandler(),this.loadComplete.asObservable()}resetLoader(){this.counterCompleted=0,this.progress=0,this.loadPhase="system";for(let e of this.loadElements.system)e.status="initial";for(let e of this.loadElements.primary)e.status="initial";for(let e of this.loadElements.secondary)e.status="initial"}reset(){this.counterCompleted=0,this.progress=0;for(let e of this.loadElements.system)e.status="initial";for(let e of this.loadElements.primary)e.status="initial";for(let e of this.loadElements.secondary)e.status="initial"}setComplete(){performance.now()-this.start>500?this.complete():setTimeout((()=>this.complete()),500)}complete(){this.loadComplete.next(!0),this.loadComplete.complete()}handleLoaderHandler(){let e=!1;for(let t of this.loadElements[this.loadPhase])if("active"===t.status){t.status="completed";let e=++this.counterCompleted/(this.loadElements.primary.length+this.loadElements.system.length)*100;this.progress=e}else if("initial"===t.status){t.status="active",t.action?t.action(this):this.handleRouteElement(t),e=!0,this.activeLoader=t.display;break}!1===e&&"system"==this.loadPhase?(this.loadPhase="primary",this.handleLoaderHandler()):!1===e&&"primary"==this.loadPhase&&(this.setComplete(),this.loadPhase="secondary",this.broadcast.broadcastMessage("loader.primarycompleted"),this.handleLoaderHandler())}handleRouteElement(e){this.readStore("loadtaskdata",e.id).subscribe({next:t=>{this.processLoadElementData(t),this.broadcast.broadcastMessage("loader.completed",e.name),this.loaderHandler.next(e.name)},error:()=>{this.loadRouteElementFromBackend(e)}})}loadRouteElementFromBackend(e){let t=e.route?e.route:"/system/spiceui/core/loadtasks/"+e.id;this.http.get(this.configuration.getBackendUrl()+t,{headers:this.session.getSessionHeader()}).subscribe({next:t=>{this.writeStore("loadtaskdata",e.id,t),this.processLoadElementData(t),this.broadcast.broadcastMessage("loader.completed",e.name),this.loaderHandler.next(e.name)}})}processLoadElementData(e){for(let t in e)this.configuration.setData(t,e[t])}}return loader.ɵfac=function(e){return new(e||loader)(l.LFG(o.eN),l.LFG(a.f),l.LFG(d.C),l.LFG(r.n),l.LFG(c.d))},loader.ɵprov=l.Yz7({token:loader,factory:loader.ɵfac}),loader})()},2349:(e,t,s)=>{"use strict";s.d(t,{M:()=>l});var i=s(1571);const n=()=>{};let l=(()=>{class loggerService{get info(){return this.isDev()?console.info.bind(console):n}get warn(){return this.isDev()?console.warn.bind(console):n}get log(){return this.isDev()?console.log.bind(console):n}get error(){return this.isDev()?console.error.bind(console):n}isDev(){return(0,i.X6Q)()||this.sessionService&&this.sessionService.isDev}setSession(e){this.sessionService=e}}return loggerService.ɵfac=function(e){return new(e||loggerService)},loggerService.ɵprov=i.Yz7({token:loggerService,factory:loggerService.ɵfac}),loggerService})()},4461:(e,t,s)=>{"use strict";s.d(t,{j:()=>f,q:()=>b});var i=s(529),n=s(7579),l=s(1571),o=s(6625),a=s(7774),d=s(4411),r=s(3278),c=s(3441),u=s(5920),m=s(3369),h=s(6163),g=s(4044),p=s(4154);let f=(()=>{class loginService{constructor(e,t,s,i,n,l,o,a,d,r,c){this.configurationService=e,this.http=t,this.router=s,this.loader=i,this.toast=n,this.helper=l,this.session=o,this.broadcast=a,this.modelutilities=d,this.modal=r,this.metadata=c,this.redirectUrl="",this.authData={userName:"",password:""},this.oauthToken="",this.oauthIssuer="",this.broadcast.message$.subscribe((e=>{"loader.completed"===e.messagetype&&"loadUserData"===e.messagedata&&this.session.authData.obtainGDPRconsent&&this.modal.openModal("GlobalObtainGDPRConsentContainer")}))}login(e=!0){let t,s=new n.x,l=this.configurationService.getBackendUrl()+"/authentication/login",o=new i.WM;if(this.authData.userName&&this.authData.password){let e=this.authData.userName.indexOf("#as#");e>-1&&(t=this.authData.userName.slice(0,e),this.authData.userName=this.authData.userName.slice(e+4)),o=o.set("Authorization","Basic "+this.helper.encodeBase64(this.authData.userName+":"+this.authData.password))}else{if(!this.oauthToken)throw new Error("Cannot Log In");o=o.set("OAuth-Token",this.oauthToken),o=o.set("OAuth-Issuer",this.oauthIssuer)}let a={};return t&&(a.impersonationuser=encodeURIComponent(t)),this.http.get(l,{headers:o,params:a}).subscribe({next:t=>{0==t.result&&this.toast.sendToast("error authenticating","error",t.error);let i=t;this.session.authData.sessionId=i.id,this.session.authData.userId=i.userid,this.session.authData.companycode_id=i.companycode_id,this.session.authData.tenant_id=i.tenant_id,this.session.authData.tenant_name=i.tenant_name,this.session.authData.tenant_accepted_legal_notice=i.tenant_accepted_legal_notice,this.session.authData.tenant_wizard_completed=i.tenant_wizard_completed,this.session.authData.userName=i.user_name,this.session.authData.email=i.email,this.session.authData.admin=i.admin,this.session.authData.dev=i.dev,this.session.authData.portalOnly=i.portal_only,this.session.authData.googleToken=i.access_token,this.session.authData.obtainGDPRconsent=i.obtainGDPRconsent,this.session.authData.canchangepassword=i.canchangepassword,this.session.authData.user=this.modelutilities.backendModel2spice("Users",i.user),sessionStorage["OAuth-Token"]=this.session.authData.sessionId,sessionStorage[btoa(this.session.authData.sessionId+":backendurl")]=btoa(this.configurationService.getBackendUrl()),this.broadcast.broadcastMessage("login"),this.load(e),s.next(!0),s.complete()},error:e=>{if(401===e.status)s.error(e.error.error);else this.toast.sendToast("Application Error","error","Error Authenticating"),s.error(e.statusText);s.complete()}}),s.asObservable()}relogin(e,t){let s=this.configurationService.getBackendUrl()+"/authentication/login",l=new n.x,o=new i.WM;return e?o=o.set("Authorization","Basic "+this.helper.encodeBase64(this.session.authData.userName+":"+e)):t&&(o=o.set("OAuth-Token",t),o=o.set("OAuth-Issuer",this.oauthIssuer)),this.http.get(s,{headers:o}).subscribe({next:e=>{let t=e;this.session.authData.sessionId=t.id,sessionStorage["OAuth-Token"]=this.session.authData.sessionId,l.next(!0),l.complete(),this.broadcast.broadcastMessage("relogin")},error:e=>{if(401===e.status)l.error(e.error.error);else this.toast.sendToast("Application Error","error","Error Authenticating"),l.error(e.statusText);l.complete()}}),l.asObservable()}renewPassword(e){let t=this.configurationService.getBackendUrl()+"/user/password/change";if(this.authData.userName&&this.authData.password){let s=new i.WM;s=s.set("Authorization","Basic "+this.helper.encodeBase64(this.authData.userName+":"+this.authData.password)),this.http.post(t,{newpwd:e},{headers:s}).subscribe({next:e=>{}})}}load(e=!0){this.loader.load(e).subscribe((e=>{this.redirect(e)}))}redirect(e){!0===e&&(this.session.authData.loaded=!0,this.toast.clearAll(),this.redirectUrl?(this.router.navigate([this.redirectUrl]),this.redirectUrl=""):this.router.navigate(["/"]))}logout(e=!1){e||this.http.delete(this.configurationService.getBackendUrl()+"/authentication/login?session_id="+this.session.authData.sessionId),this.session.endSession(),this.loader.reset(),this.broadcast.broadcastMessage("logout"),this.router.navigate(["/login"])}}return loginService.ɵfac=function(e){return new(e||loginService)(l.LFG(o.C),l.LFG(i.eN),l.LFG(a.F0),l.LFG(d._),l.LFG(r.A),l.LFG(c._),l.LFG(u.n),l.LFG(m.f),l.LFG(h.A),l.LFG(g.o),l.LFG(p.Pu))},loginService.ɵprov=l.Yz7({token:loginService,factory:loginService.ɵfac}),loginService})(),b=(()=>{class loginCheck{constructor(e,t,s,i,n){this.login=e,this.session=t,this.modal=s,this.router=i,this.loader=n}canActivate(e,t){return!(!this.session||!this.session.authData.sessionId)||("/"!=t.url&&(this.login.redirectUrl=t.url),this.router.navigate(["/login"]),!1)}}return loginCheck.ɵfac=function(e){return new(e||loginCheck)(l.LFG(f),l.LFG(u.n),l.LFG(g.o),l.LFG(a.F0),l.LFG(d._))},loginCheck.ɵprov=l.Yz7({token:loginCheck,factory:loginCheck.ɵfac}),loginCheck})()},5322:(e,t,s)=>{"use strict";s.d(t,{Y:()=>n});var i=s(1571);let n=(()=>{class MathExpressionCompilerService{do(e){return this.evaluate(this.parse(this.lex(e)))}lex(e){let t,s=e=>/[+\-*\/\^%=(),]/.test(e),i=e=>/[0-9]/.test(e),n=e=>/\s/.test(e),l=e=>"string"==typeof e&&!s(e)&&!i(e)&&!n(e),o=[],a=0,d=()=>t=e[++a],r=(e,t)=>{o.push({type:e,value:t})};for(;a<e.length;){let t=e[a];if(n(t))d();else if(s(t))r(t),d();else if(i(t)){let e="";do{e+=t,t=d()}while(i(t));if("."===t)do{e+=t,t=d()}while(i(t));let s=parseFloat(e);if(!isFinite(s))throw"Number is too large or too small for a 64-bit double.";r("number",s)}else{if(!l(t))throw"Unrecognized token: "+t+" at "+a;{let e=t;for(;l(d());)e+=t;r("identifier",e)}}}return r("(end)"),o}parse(e){let t={},s=(e,s,i,n)=>{let l=t[e]||{};t[e]={lbp:l.lbp||i,nud:l.nud||s,led:l.led||n}};s("(",(()=>{let e=o(2);if(")"!==n().type)throw"Expected closing parenthesis ')'";return l(),e})),s("number",(e=>e)),s("identifier",(t=>{if("("===n().type){let s=[];if(")"===e[i+1].type)l();else{do{l(),s.push(o(2))}while(","===n().type);if(")"!==n().type)throw"Expected closing parenthesis ')'"}return l(),{type:"call",args:s,name:t.value}}return t})),s(","),s(")"),s("(end)");let i=0,n=()=>(e=>{let s=Object.create(t[e.type]);return s.type=e.type,s.value=e.value,s})(e[i]),l=()=>(i++,n()),o=e=>{let t,s=n();if(l(),!s.nud)throw"Unexpected token: "+s.type;for(t=s.nud(s);e<n().lbp;){if(s=n(),l(),!s.led)throw"Unexpected token: "+s.type;t=s.led(t)}return t},a=(e,t,i,n)=>{i=i||t,s(e,null,t,n||function(t){return{type:e,left:t,right:o(i)}})};var d,r;r=7,s(d="-",(()=>({type:d,right:o(r)}))),a("^",6,5),a("*",4),a("/",4),a("%",4),a("+",3),a("-",3),a("=",1,2,(e=>{if("call"===e.type){for(let t=0;t<e.args.length;t++)if("identifier"!==e.args[t].type)throw"Invalid argument name";return{type:"function",name:e.name,args:e.args,value:o(2)}}if("identifier"===e.type)return{type:"assign",name:e.value,value:o(2)};throw"Invalid lvalue"}));let c=[];for(;"(end)"!==n().type;)c.push(o(0));return c}evaluate(e){let t={"+":(e,t)=>e+t,"-":(e,t)=>e-t,"*":(e,t)=>e*t,"/":(e,t)=>e/t,"%":(e,t)=>e%t,"^":(e,t)=>Math.pow(e,t)},s={pi:Math.PI,e:Math.E},i={sin:Math.sin,cos:Math.cos,tan:Math.cos,asin:Math.asin,acos:Math.acos,atan:Math.atan,abs:Math.abs,round:Math.round,ceil:Math.ceil,floor:Math.floor,log:Math.log,exp:Math.exp,sqrt:Math.sqrt,max:Math.max,min:Math.min,random:Math.random},n={},l=e=>{if("number"===e.type)return e.value;if(t[e.type])return e.left?t[e.type](l(e.left),l(e.right)):t[e.type](l(e.right));if("identifier"===e.type){let t=n.hasOwnProperty(e.value)?n[e.value]:s[e.value];if(void 0===t)throw e.value+" is undefined";return t}if("assign"===e.type)s[e.name]=l(e.value);else{if("call"===e.type){for(let t=0;t<e.args.length;t++)e.args[t]=l(e.args[t]);return i[e.name].apply(null,e.args)}"function"===e.type&&(i[e.name]=function(){for(let t=0;t<e.args.length;t++)n[e.args[t].value]=arguments[t];let t=l(e.value);return n={},t})}},o="";for(let t=0;t<e.length;t++){let s=l(e[t]);void 0!==s&&(o+=s+"\n")}return o}}return MathExpressionCompilerService.ɵfac=function(e){return new(e||MathExpressionCompilerService)},MathExpressionCompilerService.ɵprov=i.Yz7({token:MathExpressionCompilerService,factory:MathExpressionCompilerService.ɵfac}),MathExpressionCompilerService})()},4154:(e,t,s)=>{"use strict";s.d(t,{Pu:()=>v,bi:()=>Z,en:()=>x});var i=s(5861),n=s(2843),l=s(7579),o=s(2076),a=s(9646),d=s(1571),r=s(7516),c=s(4004),u=s(4988),m=s(51),h=s(529),g=s(5920),p=s(6625),f=s(7774),b=s(3369),y=s(6895);let v=(()=>{class metadata{constructor(e,t,s,i,n,l,o,a){this.http=e,this.session=t,this.configuration=s,this.componentFactoryResolver=i,this.router=n,this.broadcast=l,this.compiler=o,this.Injector=a,this.componentFactories={},this.role="",this.broadcast.message$.subscribe((e=>this.handleMessage(e)))}get actionSets(){return this.configuration.getData("actionsets")}get componentDefaultConfigs(){return this.configuration.getData("componentdefaultconfigs")}get componentModuleConfigs(){return this.configuration.getData("componentmoduleconfigs")}get moduleDirectory(){return this.configuration.getData("modules")?this.configuration.getData("modules"):{}}get componentDirectory(){return this.configuration.getData("components")?this.configuration.getData("components"):{}}get componentSets(){return this.configuration.getData("componentsets")}get routes(){return this.configuration.getData("routes")}get scripts(){return this.configuration.getData("scripts")}get fieldSets(){return this.configuration.getData("fieldsets")}get validationRules(){return this.configuration.getData("validationrules")}get fieldDefs(){return this.configuration.getData("fielddefs")}get fieldTypeMappings(){return this.configuration.getData("fieldtypemappings")}get fieldStatusNetworks(){return this.configuration.getData("fieldstatusnetworks")}get moduleDefs(){return this.configuration.getData("moduledefs")}get moduleFilters(){return this.configuration.getData("modulefilters")}get sysroles(){return this.configuration.getData("sysroles")}get roles(){return this.configuration.getData("roles")}get rolemodules(){return this.configuration.getData("rolemodules")}get copyrules(){return this.configuration.getData("copyrules")}get htmlStyleData(){return this.configuration.getData("htmlstyles")}addRoutes(){this.routes.forEach((e=>{this.router.config.unshift({path:e.path,component:u.y,canActivate:[x]}),this.router.config.unshift({path:"tab/:tabid/"+e.path,component:u.y,canActivate:[x]})}))}addComponentDirect(e,t,s){const i=this.hasRenderError(e,t);if(i)return(0,n._)((()=>new Error(i)));const o=new l.x,a=this.componentDirectory[e].module,d={name:this.moduleDirectory[a].module,path:this.moduleDirectory[a].path.replace("app/","")};return this.renderComponent(d,e,t,[],s).subscribe((e=>{e.instance.self=e,o.next(e),o.complete()})),o.asObservable()}checkComponent(e){return!!this.componentDirectory[e]}importModule(e){return(0,i.Z)((function*(){return s(9456)(`./${e.path}.ts`).then((t=>t[e.name]))}))()}loadComponentFactory(e,t){return this.componentFactories[e.name]?(0,o.D)(Promise.resolve(this.componentFactories[e.name].find((e=>e.componentType.name==t)))):(0,o.D)(this.importModule(e)).pipe((0,c.U)((s=>(this.componentFactories[e.name]=this.compiler.compileModuleAndAllComponentsSync(s).componentFactories,this.componentFactories[e.name].find((e=>e.componentType.name==t))))))}renderComponent(e,t,s,i,n){return this.loadComponentFactory(e,t).pipe((0,c.U)((e=>{const t=s.createComponent(e,void 0,n);return i.forEach((e=>t.instance[e.property]=e.value)),t.changeDetectorRef.markForCheck(),t})))}hasRenderError(e,t){if(!t)return"ViewContainerRef was passed is undefined";if(!this.componentDirectory[e]||!this.componentDirectory[e].module){const s=this.componentFactoryResolver.resolveComponentFactory(m.K);return t.createComponent(s).instance.component=e,`misconfiguration for component ${e} in object repository`}}loadComponentContainer(e,t,s){const i=this.componentFactoryResolver.resolveComponentFactory(r.m),n=t.createComponent(i,void 0,s);return n.instance.containerComponent=e,n}addComponent(e,t,s){const i=this.hasRenderError(e,t);if(i)return(0,n._)((()=>new Error(i)));const o=new l.x,a=this.loadComponentContainer(e,t,s);return a.instance.containerRef.subscribe((t=>{a.changeDetectorRef.detectChanges(),this.addComponentDirect(e,t).subscribe((e=>{o.next(e),o.complete()}))})),a.instance.loaded=!0,a.changeDetectorRef.detectChanges(),a.changeDetectorRef.markForCheck(),o.asObservable()}getComponentSet(e){return this.componentSets[e]}getAllComponentsets(){try{return this.componentSets}catch(e){return""}}addComponentSet(e,t,s,i="custom"){this.componentSets[e]={name:s,module:t,type:i,items:[]}}getRawComponentSets(){return this.componentSets}getComponentSets(e=""){let t=[];for(let s in this.componentSets)""!==e&&this.componentSets[s].module!==e||t.push({id:s,name:this.componentSets[s].name,module:this.componentSets[s].module,type:this.componentSets[s].type});return t.sort(((e,t)=>e.name?e.name.localeCompare(t.name):1)),t}getComponentSetObjects(e){try{return this.componentSets[e].items}catch(e){return[]}}addComponentToComponentset(e,t,s){this.componentSets[t].items.push({id:e,component:s,componentconfig:{},sequence:0});let i=0;for(let e of this.componentSets[t].items)e.sequence=i,i++}getRawFieldSets(){return this.fieldSets}getFieldSets(e="",t=""){let s=[];for(let t in this.fieldSets)""!==e&&this.fieldSets[t].module!==e||s.push({id:t,name:this.fieldSets[t].name,module:this.fieldSets[t].module,type:this.fieldSets[t].type});return s.sort(((e,t)=>e.name>t.name?1:-1)),s}getFieldset(e){try{return this.fieldSets[e]}catch(e){return""}}getAllFieldsets(){try{return this.fieldSets}catch(e){return""}}setFieldset(e,t){this.fieldSets[e].name=t.name,this.fieldSets[e].package=t.package}addFieldset(e,t,s,i="custom",n=[]){this.fieldSets[e]={items:n,module:t,name:s,type:i}}addFieldsetToFieldset(e,t,s){this.fieldSets[t].items.push({id:e,fieldset:s,fieldconfig:{},sequence:0});let i=0;for(let e of this.fieldSets[t].items)e.sequence=i,i++}addFieldToFieldset(e,t,s){this.fieldSets[t].items.push({id:e,field:s,fieldconfig:{},sequence:0});let i=0;for(let e of this.fieldSets[t].items)e.sequence=i,i++}removeFieldsetItem(e,t){let s=!1;if(this.fieldSets[e].items.some(((e,i)=>{if(e.id==t.id)return s=i,!0})),!1!==s){this.fieldSets[e].items.splice(s,1);let t=0;for(let s of this.fieldSets[e].items)s.sequence=t,t++;return!0}return!1}getFieldsetName(e){try{return this.fieldSets[e].name}catch(e){return""}}getFieldSetFields(e,t=""){if(this.fieldSets[e]){let s=[];for(let i of this.fieldSets[e].items)i.field?s.push(i):i.fieldset&&t.indexOf(e)<0&&(s=s.concat(this.getFieldSetFields(i.fieldset,t+":"+e)));return s}return[]}getFieldSetItems(e){return this.fieldSets[e]?this.fieldSets[e].items:[]}getFieldlabel(e,t){try{return this.fieldDefs[e][t].vname?this.fieldDefs[e][t].vname:t}catch(e){return t}}getFieldHelpText(e,t){try{return this.fieldDefs[e][t].popupHelp}catch(e){return null}}hasField(e,t){return this.fieldDefs[e]&&this.fieldDefs[e][t]}getAppModules(){let e=[];for(let t in this.moduleDirectory)this.moduleDirectory.hasOwnProperty(t)&&e.push(this.moduleDirectory[t]);return e}getModuleDefs(e){return this.moduleDefs[e]?this.moduleDefs[e]:this.moduleDefs[this.getModuleById(e)]}getModuleDuplicatecheck(e){try{return"1"===this.moduleDefs[e].duplicatecheck||"2"===this.moduleDefs[e].duplicatecheck}catch(e){return!1}}getModuleDuplicatecheckOnChange(e){try{return"1"===this.moduleDefs[e].duplicatecheck}catch(e){return!1}}getModules(){let e=[];for(let t in this.moduleDefs)e.push(t);return e}getGlobalSearchModules(){let e=[];for(let t in this.moduleDefs)this.moduleDefs[t].ftsglobalsearch&&e.push(t);return e}getPhoneSearchModules(){let e=[];for(let t in this.moduleDefs)this.moduleDefs[t].ftsphonesearch&&e.push(t);return e}getModuleById(e){for(let t in this.moduleDefs)if(this.moduleDefs[t].id==e)return t;return""}getModuleIcon(e){try{return this.moduleDefs[e].icon}catch(e){return!1}}getModuleSingular(e){try{return this.moduleDefs[e].singular}catch(t){return e}}getModuleFromSingular(e){let t="";for(let s in this.moduleDefs)this.moduleDefs[s].singular==e&&(t=s);return t}getModuleTrackflag(e){try{return!!parseInt(this.moduleDefs[e].track,10)}catch(e){return!1}}getModuleFields(e){try{return this.fieldDefs[e]?this.fieldDefs[e]:{}}catch(e){return{}}}getModuleDuplicateCheckFields(e){let t=[],s=this.getModuleFields(e);for(let e in s)s[e].duplicatecheck&&t.push(e);return t}getModuleValidations(e){try{return this.validationRules[e].validations}catch(e){return[]}}getModuleMenu(e){try{let t=[];return this.moduleDefs[e].actionset&&(t=this.getActionSetItems(this.moduleDefs[e].actionset)),t}catch(e){return[]}}getModuleListTypes(e){try{return this.moduleDefs[e].listtypes}catch(e){return[]}}addModuleListType(e,t){this.moduleDefs[e].listtypes.push(t)}updateModuleListType(e,t){this.moduleDefs[e].listtypes.some((e=>{if(e.id==t.id){for(let s in t)t.hasOwnProperty(s)&&(e[s]=t[s]);return!0}}))}deleteModuleListType(e,t){let s=this.moduleDefs[e].listtypes.findIndex((e=>e.id==t));return s>=0&&this.moduleDefs[e].listtypes.splice(s,1),this.moduleDefs[e].listtypes}getModuleAggregates(e){return this.moduleDefs[e].ftsaggregates}getFieldDefs(e,t){try{return this.fieldDefs[e][t]}catch(e){return"varchar"}}checkStatusManaged(e){for(let t in this.fieldDefs[e])if(this.getFieldDefs(e,t).options&&this.fieldStatusNetworks[this.getFieldDefs(e,t).options])return{statusField:this.getFieldDefs(e,t).name,statusNetwork:this.fieldStatusNetworks[this.getFieldDefs(e,t).options]};return!1}getFieldType(e,t){try{return this.fieldDefs[e][t].type}catch(e){return"varchar"}}getFieldSource(e,t){try{return this.fieldDefs[e][t].source}catch(e){return""}}getFieldOptions(e,t){try{return this.fieldDefs[e][t].options}catch(e){return!1}}getFieldRequired(e,t){try{return this.fieldDefs[e][t].required}catch(e){return!1}}getSystemModules(){let e=[];for(let t in this.moduleDirectory)e.push(this.moduleDirectory[t]);return e.sort(((e,t)=>e.module>t.module?1:-1)),e}getSystemModuleByComponent(e){for(let t in this.componentDirectory)if(t==e)return this.componentDirectory[t].module;return null}getSystemComponents(e){let t=[];for(let s in this.componentDirectory)e&&e!=this.componentDirectory[s].module||t.push(this.componentDirectory[s]);return t.sort(((e,t)=>e.component>t.component?1:-1)),t}getComponentConfigOptions(e){try{return this.componentDirectory[e].componentconfig}catch(e){return{}}}getComponentConfigurations(e="*"){return"*"===e?this.componentDefaultConfigs:this.componentModuleConfigs[e]?this.componentModuleConfigs[e]:{}}getComponentConfig(e="",t="",s=""){return""===s&&(s=this.role?this.role:"*"),""!=t&&this.componentModuleConfigs[t]&&this.componentModuleConfigs[t][e]&&this.componentModuleConfigs[t][e][s]?this.componentModuleConfigs[t][e][s]:""!=t&&this.componentModuleConfigs[t]&&this.componentModuleConfigs[t][e]&&this.componentModuleConfigs[t][e]["*"]?this.componentModuleConfigs[t][e]["*"]:this.componentDefaultConfigs[e]&&this.componentDefaultConfigs[e][s]?this.componentDefaultConfigs[e][s]:this.componentDefaultConfigs[e]&&this.componentDefaultConfigs[e]["*"]?this.componentDefaultConfigs[e]["*"]:{}}getModuleDefaultComponentConfigByUsage(e,t){let s="";switch(t){case"list":s="ObjectList";break;case"details":s="ObjectRecordDetails"}return this.getComponentConfig(s,e)}getRawActionSets(){return this.actionSets}getActionSets(e=""){let t=[];for(let s in this.actionSets)""!==e&&this.actionSets[s].module!==e||t.push({id:s,name:this.actionSets[s].name,module:this.actionSets[s].module,type:this.actionSets[s].type,package:this.actionSets[s].package,actions:this.actionSets[s].actions});return t.sort(((e,t)=>e.name>t.name?1:-1)),t}getActionSet(e){return this.actionSets[e]}getActionSetItems(e){try{return this.actionSets[e].actions}catch(e){return[]}}setActionset(e,t){this.actionSets[e].name=t.name,this.actionSets[e].package=t.package}setActionSet(e,t){this.actionSets[e]={id:e,module:t.module,name:t.name,package:t.package,version:t.version,actions:t.actions,type:t.type}}setActionSetItems(e,t){this.actionSets[e].actions=t}addActionset(e,t,s,i="custom",n=[]){this.actionSets[e]={items:n,module:t,name:s,type:i}}removeActionset(e){delete this.actionSets[e]}removeActionsetItem(e,t){let s=!1;if(this.actionSets[e].items.some(((e,i)=>{if(e.id==t.id)return s=i,!0})),!1!==s){this.actionSets[e].items.splice(s,1);let t=0;for(let s of this.actionSets[e].items)s.sequence=t,t++;return!0}return!1}getActionsetName(e){try{return this.actionSets[e].name}catch(e){return""}}getModuleFilters(e=""){let t=[];for(let s in this.moduleFilters)if(this.moduleFilters.hasOwnProperty(s)){if(""!==e&&this.moduleFilters[s].module!==e)continue;t.push(this.moduleFilters[s])}return t.sort(((e,t)=>e.name-t.name)),t}getModuleFilter(e){try{return this.moduleFilters[e]}catch(e){return""}}setModuleFilter(e,t,s,i="custom"){this.moduleFilters||this.configuration.setData("moduleFilters",{}),this.moduleFilters[e]={id:e,name:t,module:s,type:i}}removeModuleFilter(e){delete this.moduleFilters[e]}checkModuleAcl(e,t){try{return t?this.moduleDefs[e].acl[t]:!!this.moduleDefs[e]}catch(e){return!1}}getRoles(){return this.roles}getSysRoles(){return this.sysroles}getActiveRole(){let e={};return this.roles&&this.roles.some((t=>{if(this.role==t.id)return e=t,!0})),e}setActiveRole(e){return!!this.roles.find((t=>t.id==e))&&(this.role=e,!0)}getRoleModules(e=!1){let t=[];if(this.rolemodules[this.role])for(let s of this.rolemodules[this.role])(!1===e||null!==s.sequence)&&this.moduleDefs[s.module]&&this.moduleDefs[s.module].visible&&(!this.moduleDefs[s.module].visibleaclaction||this.moduleDefs[s.module].visibleaclaction&&this.checkModuleAcl(s.module,this.moduleDefs[s.module].visibleaclaction))&&this.moduleDefs[s.module].acl.list&&t.push(s.module);return t}getCopyRules(e,t){const s=this.copyrules[e]&&this.copyrules[e][t]?this.copyrules[e][t]:[];return s.forEach((e=>{if(e.params&&!_.isObject(e.params))try{e.params=JSON.parse(e.params)}catch(t){e.params={}}})),s}getFieldTypes(){let e=[];for(let t in this.fieldTypeMappings)e.push(t);return e}getFieldTypeComponent(e){return this.fieldTypeMappings[e]}getRouteDetails(e){return this.routes?.find((t=>{if(t.path==e)return!0;if(e.split("/").length==t.path.split("/").length){let s=e.split("/"),i=t.path.split("/"),n=!0,l=0;for(;l<s.length&&n;)":"!==i[l].substr(0,1)&&i[l]!==s[l]&&(n=!1),l++;if(n)return!0}}))}getRouteComponent(e){return!!this.routes&&this.routes.find((t=>{if(t.path==e)return!0;if(e.split("/").length==t.path.split("/").length){let s=e.split("/"),i=t.path.split("/"),n=!0,l=0;for(;l<s.length&&n;)":"!==i[l].substr(0,1)&&i[l]!==s[l]&&(n=!1),l++;if(n)return!0}}))?.component}checkTagging(e){try{return!!this.moduleDefs[e].tagging}catch(e){return!1}}loadLibs(...e){let t=[];e.forEach((e=>{t.push(this.loadLib(e))}));let s=new l.x,i=0;for(let e of t)e.subscribe((e=>{i++}),(e=>{i++,console.error(e),s.error(e)}),(()=>{i==t.length&&(s.next(),s.complete())}));return i==t.length?(0,a.of)(s):s.asObservable()}isLibLoaded(e){if(this.scripts[e]){for(let t of this.scripts[e])if(!t.loaded)return!1;return!0}return!1}getHtmlStylesheetCode(e){return _.isObject(this.htmlStyleData.stylesheets[e])&&_.isString(this.htmlStyleData.stylesheets[e].csscode)?this.htmlStyleData.stylesheets[e].csscode:""}getHtmlFormats(e){return _.isObject(this.htmlStyleData.stylesheets[e])?(_.isArray(this.htmlStyleData.stylesheets[e].formats)||(this.htmlStyleData.stylesheets[e].formats=[]),this.htmlStyleData.stylesheets[e].stylesDecoded||this.htmlStylesToObjects(e),this.htmlStyleData.stylesheets[e].formats):(console.log("HTML Styling: Unknown style sheet with ID "+e+"."),[])}getHtmlStylesheetNames(){let e=[];for(let t in this.htmlStyleData.stylesheets)e.push({id:this.htmlStyleData.stylesheets[t].id,name:this.htmlStyleData.stylesheets[t].name});return _.sortBy(e,"name")}getHtmlStylesheetToUse(e,t){return _.isObject(this.htmlStyleData.stylesheetsToUse[e])&&this.htmlStyleData.stylesheetsToUse[e][t]?this.htmlStyleData.stylesheetsToUse[e][t]:""}handleMessage(e){switch(e.messagetype){case"loader.completed":"loadRepository"==e.messagedata&&this.addRoutes(),"loadModules"==e.messagedata&&(this.roles.some((e=>{if(1==e.defaultrole)return this.role=e.id,!0})),""===this.role&&this.roles.length>0&&(this.role=this.roles[0].id));break;case"metadata.updatefieldsets":for(let t in e.messagedata.add)this.fieldSets[t]=e.messagedata.add[t];for(let t in e.messagedata.update)this.fieldSets[t]=e.messagedata.update[t];for(let t in e.messagedata.delete)delete this.fieldSets[t];break;case"metadata.updatecomponentsets":for(let t in e.messagedata.add)this.componentSets[t]=e.messagedata.add[t];for(let t in e.messagedata.update)this.componentSets[t]=e.messagedata.update[t];for(let t in e.messagedata.delete)delete this.componentSets[t]}}loadLib(e){let t=new l.x;if(!this.scripts[e])return(0,a.of)({script:e,loaded:!1,status:"Unknown"});if(this.isLibLoaded(e))return(0,a.of)({script:e,loaded:!0,status:"Already Loaded"});if(this.isLibLoading(e)){for(let s of this.scripts[e])if(s.loading)return s.loading$.subscribe((s=>this.loadLib(e).subscribe((e=>{t.next(e),t.complete()})))),t.asObservable()}else{for(let s of this.scripts[e])if(!s.loaded)return this.loadScript(s).subscribe((s=>{this.loadLib(e).subscribe((e=>{t.next(e),t.complete()}))})),t.asObservable();t.next({script:e,loaded:!0,status:"Loaded"}),t.complete()}return t.asObservable()}loadScript(e){let t=new l.x;e.loading=!0,e.loading$=new d.vpe;let s={};return e.src.endsWith(".css")?(s=document.createElement("link"),s.rel="stylesheet",s.href=e.src):(s=document.createElement("script"),s.type="text/javascript",s.src=e.src),s.readyState?s.onreadystatechange=()=>{"loaded"!==s.readyState&&"complete"!==s.readyState||(s.onreadystatechange=null,e.loaded=!0,e.loading=!1,t.next({script:e.src,loaded:!0,status:"Loaded"}),t.complete(),e.loading$.emit("loaded"))}:s.onload=()=>{e.loaded=!0,e.loading=!1,t.next({script:e.src,loaded:!0,status:"Loaded"}),t.complete(),e.loading$.emit("loaded")},s.onerror=s=>{e.loading=!1,t.error({script:e.src,loaded:!1,status:"Failed"}),e.loading$.emit("failed")},document.getElementsByTagName("head")[0].appendChild(s),t.asObservable()}isLibLoading(e){if(this.scripts[e]){for(let t of this.scripts[e])if(t.loading)return!0;return!1}return!1}htmlStylesToObjects(e){for(let t of this.htmlStyleData.stylesheets[e].formats){let e;if(_.isEmpty(t.styles))t.styles=null;else{try{e=JSON.parse(t.styles)}catch(s){console.log("HTML Styling: Malformed style specification in table sysuihtmlformats (format id: "+t.id+")."),e={}}t.styles=e}}this.htmlStyleData.stylesheets[e].stylesDecoded=!0}}return metadata.ɵfac=function(e){return new(e||metadata)(d.LFG(h.eN),d.LFG(g.n),d.LFG(p.C),d.LFG(d._Vd),d.LFG(f.F0),d.LFG(b.f),d.LFG(d.Sil),d.LFG(d.zs3))},metadata.ɵprov=d.Yz7({token:metadata,factory:metadata.ɵfac}),metadata})(),x=(()=>{class aclCheck{constructor(e,t,s,i){this.metadata=e,this.router=t,this.session=s,this.configurationService=i}canActivate(e,t){if(!this.session||!this.session.authData.sessionId)return!1;let s=this.configurationService.getSystemParamater("aclcontroller");return!(s&&"spiceacl"!=s&&!("Users"!==e.params.module||e.params.id&&e.params.id==this.session.authData.userId||this.session.authData.admin))&&(!(e.params.module&&"Home"!=e.params.module&&!this.metadata.checkModuleAcl(e.params.module,e.data.aclaction))||(this.router.navigate(["/modules/Home"]),!1))}}return aclCheck.ɵfac=function(e){return new(e||aclCheck)(d.LFG(v),d.LFG(f.F0),d.LFG(g.n),d.LFG(p.C))},aclCheck.ɵprov=d.Yz7({token:aclCheck,factory:aclCheck.ɵfac}),aclCheck})(),Z=(()=>{class noBack{constructor(e,t){this.location=e,this.broadcast=t,this.navigatingBack=!1,this.location.onPopState((()=>{this.navigatingBack=!0}))}canDeactivate(){return!this.navigatingBack||(this.navigatingBack=!1,history.pushState(null,document.title,location.href),!1)}}return noBack.ɵfac=function(e){return new(e||noBack)(d.LFG(y.S$),d.LFG(b.f))},noBack.ɵprov=d.Yz7({token:noBack,factory:noBack.ɵfac}),noBack})()},4044:(e,t,s)=>{"use strict";s.d(t,{o:()=>c});var i=s(1571),n=s(7579),l=s(9646),o=s(4154),a=s(3917),d=s(3278),r=s(5329);let c=(()=>{class modal{constructor(e,t,s,i){this.metadata=e,this.footer=t,this.toast=s,this.language=i,this.modalsArray=[],this.modalsObject={},window.addEventListener("keyup",(e=>{if(27===e.keyCode&&this.modalsArray.length){e.stopImmediatePropagation();let t=this.modalsArray[this.modalsArray.length-1].wrapper;!t.instance.escKey||t.instance.childComponent.instance.onModalEscX&&!1===t.instance.childComponent.instance.onModalEscX()||t.destroy()}}))}openModal(e,t=!0,s,i){if(this.metadata.checkComponent(e)){let l=new n.x;return this.metadata.addComponentDirect("SystemModalWrapper",this.footer.modalcontainer).subscribe((n=>{let o={};o.wrapper=n,o.blurBackdrop=i,n.instance.escKey=t,this.modalsArray.push(o),this.modalsObject[o.modalId]=o,this.metadata.addComponentDirect(e,n.instance.target,s).subscribe((e=>{e.instance.self=n,o.component=e,n.instance.childComponent=e,l.next(e),l.complete()}),(t=>{this.removeModal(n),this.sendError(e),l.error(t),l.complete()})),n.instance.zIndex=2*this.modalsArray.length+1})),l.asObservable()}return this.sendError(e),(0,l.of)(!1)}sendError(e){this.toast.sendToast('Component "'+e+'" not found.',"error","Misconfiguration on the system as the component should have been opened in a modal but is not avilable. Please contact your system administrator.")}removeModal(e){for(let t=0;t<this.modalsArray.length;t++)if(this.modalsArray[t].wrapper===e){this.modalsArray.splice(t,1);break}}closeModal(e){if("number"==typeof e)this.modalsArray[e]&&this.modalsArray[e].wrapper.destroy();else for(let t=0;t<this.modalsArray.length;t++)if(this.modalsArray[t].wrapper===e){this.modalsArray.splice(t,1);break}}closeAllModals(){for(let e=this.modalsArray.length-1;e>=0;e--)this.modalsArray[e].wrapper.destroy()}get backdropVisible(){return 0!==this.modalsArray.length}get backdropZindex(){return 2*this.modalsArray.length}get backdropBlurred(){return this.modalsArray.length>0&&!0===this.modalsArray[this.modalsArray.length-1].blurBackdrop?"blur(4px)":"none"}prompt(e,t,s=null,i="shade",l=null,o=null,a,d){let r=new n.x;return this.openModal("SystemPrompt").subscribe((n=>{n.instance.type=e,n.instance.text=t,n.instance.headertext=s,n.instance.theme=i,n.instance.value=l,n.instance.options=o,n.instance.regex=d,n.instance.optionsAsRadio=a,n.instance.answer.subscribe((e=>{r.next(e),r.complete()}))})),r.asObservable()}confirm(e,t=null,s=null){return this.prompt("confirm",e,t,s)}confirmDeleteRecord(){return this.prompt("confirm",this.language.getLabel("LBL_DELETE_RECORD","","long"),this.language.getLabel("LBL_DELETE_RECORD"))}input(e,t=null,s=null,i=null){return this.prompt("input",e,t,s,i)}info(e,t=null,s=null){return this.prompt("info",e,t,s)}await(e=null){let t=new i.vpe;return this.openModal("SystemLoadingModal",!1).subscribe((s=>{s.instance.messagelabel=e,t.subscribe((()=>{s.instance.self.destroy()}))})),t}}return modal.ɵfac=function(e){return new(e||modal)(i.LFG(o.Pu),i.LFG(a.M),i.LFG(d.A),i.LFG(r.d))},modal.ɵprov=i.Yz7({token:modal,factory:modal.ɵfac}),modal})()},8032:(e,t,s)=>{"use strict";s.d(t,{S:()=>n});var i=s(1571);let n=(()=>{class modalwindow{}return modalwindow.ɵfac=function(e){return new(e||modalwindow)},modalwindow.ɵprov=i.Yz7({token:modalwindow,factory:modalwindow.ɵfac}),modalwindow})()},5710:(e,t,s)=>{"use strict";s.d(t,{o:()=>T});var i=s(1571),n=s(1135),l=s(727),o=s(7579),a=s(9646),d=s(6163),r=s(9300),c=s(4004),u=s(4505),m=s(3369),h=s(4154),g=s(5920),p=s(382),f=s(7774),b=s(3278),y=s(5329),v=s(4044),x=s(2032),Z=s(6625),w=s(2222);let T=(()=>{class model{constructor(e,t,s,o,a,d,r,c,u,m,h,g,p,f){this.backend=e,this.broadcast=t,this.metadata=s,this.utils=o,this.session=a,this.recent=d,this.router=r,this.toast=c,this.language=u,this.modal=m,this.navigation=h,this.configuration=g,this.injector=p,this.socket=f,this._module="",this._id="",this.acl={},this.acl_fieldcontrol={},this.data={},this.backupData={},this.field$=new n.X({field:null,value:null}),this.isSaving=!1,this.saved$=new i.vpe,this.mode$=new i.vpe,this.canceledit$=new i.vpe,this.isValid=!1,this.isLoading=!1,this.isEditing=!1,this.isGlobal=!1,this.isNew=!1,this._fields_stati=[],this._fields_stati_tmp=[],this._model_stati_tmp=[],this._messages=[],this.reference="",this._fields=[],this.messageChange$=new i.vpe,this.duplicate=!1,this.templateId=null,this.duplicateChecking=!1,this.duplicates=[],this.duplicatecount=0,this.savingProgress=new n.X(1),this.subscriptions=new l.w0,this.loadingError=!1,this.validated$=new i.vpe,this.data$=new n.X(this.data),this.subscriptions.add(this.broadcast.message$.subscribe((e=>{"timezone.changed"===e.messagetype&&(this.utils.timezoneChanged(this.data,e.messagedata),this.utils.timezoneChanged(this.backupData,e.messagedata))})))}registerModel(){this.module&&this._id&&!this.navigation.modelregister.find((e=>e.model._id==this._id&&e.model.module==this.module))&&(this.modelRegisterId=this.navigation.registerModel(this))}get messages(){return this._messages}get module(){return this._module}set module(e){this._module=e,this.initializeFieldsStati(),this.registerModel()}get backendData(){return this.utils.spiceModel2backend(this.module,this.data)}handleSocketEvents(e){if("update"===e.type)e.data.id==this.id&&e.data.module==this.module&&e.data.sessionId!=this.session.authData.sessionId&&(this.isEditing||this.getData(!1,"",!1))}get id(){return this._id}set id(e){this._id=e,this.registerModel()}get displayname(){return this.getFieldValue("summary_text")}get fields(){return this.module&&_.isEmpty(this._fields)&&(this._fields=this.metadata.getModuleFields(this.module)),this._fields}generateGuid(){return this.utils.generateGuid()}isFieldRequired(e){switch(e){case"date_entered":case"date_modified":return!0;default:return this.metadata.getFieldRequired(this.module,e)}}isRequired(e){return this.isFieldRequired(e)}checkAccess(e){return"detail"==e||"view"==e?this.acl.detail||this.acl.view:this.acl[e]}checkFieldAccess(e){return!(this.acl_fieldcontrol&&this.acl_fieldcontrol[e]&&"1"==this.acl_fieldcontrol[e])}getFieldAccess(e){return this.acl_fieldcontrol&&this.acl_fieldcontrol[e]?parseInt(this.acl_fieldcontrol[e],10):void 0}goDetail(e){if(!this.checkAccess("detail"))return!1;{let t="/module/"+this.module+"/"+this.id;e&&(t="/tab/"+e+"/"+t),this.router.navigate([t])}}goModule(){this.router.navigate(["/module/"+this.module])}getData(e=!0,t="",s=!0,i=!1){let n=new o.x;return e&&this.resetData(),this.isLoading=s,this.backend.get(this.module,this.id,t).subscribe({next:e=>{this.data=e,this.acl=e.acl,this.acl_fieldcontrol=e.acl_fieldcontrol,this.emitFieldsChanges(e),""!=t&&this.recent.trackItem(this.module,this.id,this.data),this.initializeFieldsStati(),this.evaluateValidationRules(null,"initialize"),this.isLoading=!1,this.data$.next(e),this.broadcast.broadcastMessage("model.loaded",{id:this.id,module:this.module,data:this.data}),n.next(e),n.complete()},error:e=>{i&&401!=e.status&&(this.toast.sendToast(this.language.getLabel("LBL_ERROR_LOADING_RECORD"),"error"),this.router.navigate(["/module/"+this.module])),401==e.status&&(this.loadingError=!0),n.error(e)}}),n.asObservable()}validate(e){this.resetMessages(),this.isValid=!0,this.evaluateValidationRules(null,"change");for(let e in this.fields)"id"!==e&&this.getFieldStati(e).required&&(!this.data[e]&&0!==this.data[e]||0===String(this.data[e]).length)&&(this.isValid=!1,this.addMessage("error",this.language.getLabel("MSG_INPUT_REQUIRED")+"!",e)),this.getFieldStati(e).invalid&&(this.isValid=!1);return this.isValid||console.warn("validation failed:",this.messages),this.validated$.next(),this.isValid}initializeFieldsStati(){let e=[];for(let t in this.fields)e[t]=this.evaluateFieldStati(t);this._fields_stati=e}getDefaultStati(){return{editable:this.checkAccess("edit"),invalid:!1,required:!1,incomplete:!1,disabled:!1,hidden:!1,readonly:!1}}evaluateFieldStati(e){let t=this.getDefaultStati();return this.data&&this.data.acl_fieldcontrol&&this.data.acl_fieldcontrol[e]&&parseInt(this.data.acl_fieldcontrol[e],10)<3&&(t.editable=!1),this.isRequired(e)&&(t.required=!0),t}resetFieldStati(e){this._fields_stati[e]=this.evaluateFieldStati(e),this._fields_stati_tmp[e]={...this._fields_stati[e]},this.getFieldMessages(e,"error")&&(this._fields_stati_tmp[e].invalid=!0)}setFieldStatus(e,t,s=!0){try{let i=this._fields_stati[e];return i[t]&&!s?(console.warn("could not set status "+t+" to "+s+" because it has to be: "+i[t]),!1):(this._fields_stati_tmp[e]||(this._fields_stati_tmp[e]={...i}),this._fields_stati_tmp[e][t]=s,!0)}catch(e){return console.warn(e),!1}}setFieldStati(e,t){for(let s in t){if(!this.setFieldStatus(e,s,t[s]))return!1}return!0}getFieldStati(e){let t=this._fields_stati_tmp[e];return t||(t=this._fields_stati[e],t||(t=this.getDefaultStati(),this._fields_stati[e]=t)),t={...t},!t.invalid&&this.getFieldMessages(e,"error")&&(t.invalid=!0),t}evaluateValidationRules(e,t){let s=this.metadata.getModuleValidations(this.module);if(!s)return!0;this._fields_stati_tmp=[],this._model_stati_tmp=[],this.resetMessages();for(let e of s){let s=0,i=!0;if(!(e.onevents instanceof Array)||e.onevents.includes(t)){if(e.conditions instanceof Array)for(let t of e.conditions){let n=!1;if(n=this.evaluateCondition(t),s+=n?1:0,s>0&&"or"==e.logicoperator){i=!0;break}}if(e.conditions&&e.conditions.length>1&&"and"==e.logicoperator?s<e.conditions.length&&(i=!1):0==s&&e.conditions&&(i=!1),i)for(let t of e.actions){this.executeValidationAction(t)||console.warn("Action "+t.action+" for "+t.fieldname+" failed!")}}}}evaluateCondition(e){let t=!1;if("empty"!=e.comparator&&null==typeof this.data[e.fieldname])return!1;let s,i=this.data[e.fieldname];return s=e.comparator.match(/regex/g)?e.valuations:this.evaluateValidationParams(e.valuations),t=d.A.compare(i,e.comparator,s),t}executeValidationAction(e){let t=this.evaluateValidationParams(e.params);switch(e.action){case"set_value":return this.data[e.fieldname]=t,!0;case"set_value_from_field":return this.data[e.fieldname]=this.data[t],!0;case"set_message":return t instanceof Object&&(this._messages.push(t),this.messageChange$.emit(!0),!0);case"error":return this.addMessage("error",t,e.fieldname);case"warning":return this.addMessage("warning",t,e.fieldname);case"notice":return this.addMessage("notice",t,e.fieldname);case"hide":return t="string"==typeof t?d.A.strtobool(t):t,this.setFieldStatus(e.fieldname,"hidden",t);case"show":return t=!("string"==typeof t?d.A.strtobool(t):t),this.setFieldStatus(e.fieldname,"hidden",t);case"require":return t="string"==typeof t?d.A.strtobool(t):t,this.setFieldStatus(e.fieldname,"required",t);case"set_stati":return t="string"==typeof t?JSON.parse(t):t,this.setFieldStati(e.fieldname,t);case"set_model_state":if(t instanceof Array)for(let e of t)this.checkModelState(e)||this._model_stati_tmp.push(e);else this.checkModelState(t)||this._model_stati_tmp.push(t);return!0;default:return console.warn("action: "+e.action+" is not defined!"),!1}}evaluateValidationParams(e){if("string"==typeof e){if(/(\<[a-z\_]+\>)/.test(e))for(let t of e.match(/(\<[a-z\_]+\>)/g)){let s=t.replace("<","").replace(">",""),i=this.data[s]?this.data[s]:0;switch(this.metadata.getFieldDefs(this.module,s).type){case"datetimecombo":case"datetime":case"date":i&&(i=i.format("YYYY-MM-DD HH:mm:ss"))}e=e.replace(t,i)}if(/\d+[\.\-]\d+[\.\-]\d+/.test(e)&&/[\+\-]/.test(e)){let t=d.A.strtomoment(e);e=t||e}else if(/\d+\s*[\+\-\*\/\^]\s*\d+/.test(e)){let t=this.utils.compileMathExpression(e);e=t||e}}return e}checkModelState(e){return this._model_stati_tmp.includes(e)}startEdit(e=!0,t=!1){this.isEditing||(e&&!this.duplicate&&(this.backupData=this.buildBackup(this.data)),t||(this.isEditing=!0,this.mode$.emit("edit")),this.navigation.addModelEditing(this,this.getFieldValue("summary_text")))}getFieldValue(e){return this.data[e]}getField(e){return this.getFieldValue(e)}setFieldValue(e,t){return this.setField(e,t)}initializeField(e,t){if(!e)return!1;this.data[e]=t}setField(e,t,s=!1){if(!e)return!1;this.data[e]!==t&&this.field$.next({field:e,value:t}),this.data[e]=t,!0!==s&&this.data$.next(this.data),this.evaluateValidationRules(e,"change"),this.duplicateCheckOnChange([e])}observeFieldChanges(e){return this.fields[e]?this.field$.pipe((0,r.h)((t=>t.field==e)),(0,c.U)((e=>e.value))):(0,a.of)(null)}setFields(e,t=!1){let s=[];for(let t in e){if(!e.hasOwnProperty(t))continue;let i=e[t];_.isString(i)&&(i=i.trim()),this.data[t]!=i&&this.field$.next({field:t,value:i}),this.data[t]=i,s.push(t)}!0!==t&&this.data$.next(this.data),this.evaluateValidationRules(null,"change"),this.duplicateCheckOnChange(s)}emitFieldsChanges(e){for(let t in e)e.hasOwnProperty(t)&&this.field$.next({field:t,value:e[t]})}cancelEdit(){this.isEditing=!1,this.mode$.emit("display"),this.navigation.removeModelEditing(this.module,this.id),this.backupData&&(this.data=this.backupData,this.data$.next(this.data),this.backupData=null,this.resetMessages()),this.canceledit$.emit(!0)}endEdit(){this.backupData=null,this.isEditing=!1,this.mode$.emit("display"),this.navigation.removeModelEditing(this.module,this.id)}getDirtyFields(){let e={};for(let t in this.data)!t||this.backupData&&_.isEqual(this.data[t],this.backupData[t])||(e[t]=this.data[t]);return e}save(e=!1){let t,s=new o.x;this.isSaving=!0;for(let e in this.data)_.isString(this.data[e])&&(this.data[e]=this.data[e].trim());return!this.isEditing&&_.isEmpty(this.backupData)||this.isNew?t=this.data:(t=this.getDirtyFields(),t.date_modified=this.data.date_modified),this.backend.save(this.module,this.id,t,this.savingProgress,this.templateId).subscribe({next:t=>{this.data=t,this.isNew=!1,this.data$.next(t),this.broadcast.broadcastMessage("model.save",{id:this.id,reference:this.reference,module:this.module,data:this.data,changed:this.getDirtyFields(),backupdata:this.backupData}),this.isSaving=!1,e&&this.toast.sendToast(this.language.getLabel("LBL_DATA_SAVED")+".","success"),this.saved$.emit({changed:this.getDirtyFields(),backupdata:this.backupData}),this.endEdit(),this.initializeFieldsStati(),s.next(!0),s.complete()},error:t=>{if(409===t.status)this.modal.openModal("ObjectOptimisticLockingModal",!1,this.injector).subscribe((e=>{e.instance.conflicts=t.error.error.conflicts,e.instance.responseSubject=s}));else e&&this.toast.sendToast(this.language.getLabel("LBL_ERROR")+" "+t.status,"error",t.error.error.message),s.error(t),s.complete();this.isSaving=!1}}),s.asObservable()}delete(){let e=new o.x;return this.backend.deleteRequest(`module/${this.module}/${this.id}`).subscribe({next:()=>{this.broadcast.broadcastMessage("model.delete",{id:this.id,module:this.module,data:_.clone(this.data)}),e.next(!0),e.complete()},error:()=>{e.error("unable to delete record")}}),e.asObservable()}saveAndSend(e=!1,t="LBL_DATA_SENT"){let s=e,i=this.save(!1);return s&&this.toast.sendToast(this.language.getLabel(t)+".","success"),i}reset(){this.id=null,this.module=null,this._fields_stati_tmp=this._fields_stati=[],this._fields=[],this.isLoading=!1,this.isEditing=!1,this.mode$.emit("display"),this.resetMessages(),this.resetData()}clone(){return{module:this.module,id:this.id,data:{...this.data}}}getAuditLog(e={}){let t=new o.x;return this.backend.getRequest(`module/${this.module}/${this.id}/auditlog`,e).subscribe({next:e=>{t.next(e),t.complete()},error:e=>{t.next(e),t.complete()}}),t.asObservable()}resetData(){this.isValid=!0,this.data={}}initialize(e=null){return this.initializeModel(e)}initializeModel(e=null){this.id||(this.id=this.generateGuid(),this.isNew=!0),this.duplicates=[],this.data={};let t=this.metadata.getModuleFields(this.module);t.assigned_user_id&&(this.data.assigned_user_id=this.session.authData.userId,this.data.assigned_user_name=this.session.authData.userName,this.data.assigned_user=this.session.authData.user),t.assigned_orgunit_id&&this.session.authData.user.orgunit&&(this.data.assigned_orgunit_id=this.session.authData.user.orgunit.id,this.data.assigned_orgunit_name=this.session.authData.user.orgunit.name,this.data.assigned_orgunit=this.session.authData.user.orgunit),this.data.modified_by_id=this.session.authData.userId,this.data.modified_by_name=this.session.authData.userName,this.data.modified_by_user=this.session.authData.user,this.data.created_by_id=this.session.authData.userId,this.data.created_by_name=this.session.authData.userName,this.data.created_by_user=this.session.authData.user,this.data.date_entered=new moment,this.data.date_modified=new moment,this.executeCopyRules(e),this.setFieldsDefaultValues(),this.evaluateValidationRules(),this.acl={create:!0,edit:!0,detail:!0},this.acl_fieldcontrol=this.metadata.moduleDefs[this.module]?.acl_fieldcontrol??[],this.initializeFieldsStati(),this.evaluateValidationRules(null,"initialize"),this.parentmodel=e}setData(e,t=!0,s){e.acl&&(this.acl=e.acl),e.acl_fieldcontrol&&(this.acl_fieldcontrol=e.acl_fieldcontrol,delete e.acl_fieldcontrol),this.data=t?this.utils.backendModel2spice(this.module,e):e,!0!==s&&this.data$.next(this.data),this.initializeFieldsStati()}addModel(e="",t=null,s={},i=!1,n){let l=new o.x;if(this.metadata.checkModuleAcl(this.module,"create")){this.initializeModel(t),this.reference=e;for(let e in s)this.data[e]=s[e];this.evaluateValidationRules(),this.modal.openModal("ObjectEditModal",!1,this.injector).subscribe((e=>{e&&(e.instance.model.isNew=!0,e.instance.reference=this.reference,e.instance.preventGoingToRecord=i,n&&(e.instance.componentconfig=n),e.instance.action$.subscribe((e=>{"save"!=e&&"savegodetail"!=e||(l.next(this.data),this.recent.trackItem(this.module,this.id,this.data)),l.complete()})))}))}else this.toast.sendToast(this.language.getLabel("MSG_NOT_AUTHORIZED_TO_CREATE")+" "+this.language.getModuleName(this.module),"error"),window.setTimeout((()=>{l.complete()}),100);return l.asObservable()}executeCopyRules(e){if(e)if(_.isArray(e))for(let t of e)t.data&&this.executeCopyRulesParent(t);else e.data&&this.executeCopyRulesParent(e);this.executeCopyRulesGeneric()}setFieldsDefaultValues(){const e=this.metadata.getModuleFields(this.module);e&&_.each(e,(e=>{"default"in e&&null==this.data[e.name]&&"link"!=e.type&&"non-db"!=e.source&&this.setFixedValue(e.name,e.default)}))}executeCopyRulesGeneric(){let e=this.metadata.getCopyRules("*",this.module);for(let t of e)t.tofield&&t.fixedvalue?this.setFixedValue(t.tofield,t.fixedvalue):t.tofield&&t.calculatedvalue&&this.setField(t.tofield,this.getCalculatedValue(t))}executeCopyRulesParent(e){e.data.id||(e.data.id=e.id);let t=this.metadata.getCopyRules(e.module,this.module);for(let s of t)s.tofield&&(s.fromfield?this.copyValue(s.tofield,e.data[s.fromfield],s.params):s.fixedvalue&&this.setFixedValue(s.tofield,s.fixedvalue),s.calculatedvalue&&this.setField(s.tofield,this.getCalculatedValue(s,e.data[s.fromfield])))}copyValue(e,t,s={}){let i=this.metadata.getFieldDefs(this.module,e);if(i)if("link"===i.type){if(_.isObject(t)&&t.beans){const i={beans:{}};for(let n in t.beans){if(!t.beans.hasOwnProperty(n))continue;let l=n;s?.generatenewid&&(l=this.utils.generateGuid()),i.beans[l]={...t.beans[n]},i.beans[l].id=l,this.setField(e,i)}}}else this.setField(e,t);else this.setField(e,t)}setFixedValue(e,t){let s=this.metadata.getFieldDefs(this.module,e);if((!s||s&&!s.type)&&this.setField(e,t),s&&s.type)if("bool"===s.type)this.setField(e,"true"===t||"1"===t||"false"!==t&&"0"!==t&&null);else this.setField(e,t)}getCalculatedValue(e,t){let s=this.session.getSessionData("timezone",!1)||moment.tz.guess(!0);switch(e.calculatedvalue){case"now":return(new moment.utc).tz(s);case"nextfullhour":let i=(new moment.utc).tz(s);return 0!=i.minute()&&(i.minute(0),i.add(1,"h")),e.params?.number&&e.params?.unit&&i.add(e.params.number,e.params.unit),i;case"addDate":const n=moment.isMoment(t)?new moment(t):(new moment.utc).tz(s);return e.params?.number&&e.params?.unit?n.add(e.params.number,e.params.unit):n;case"currentYear":return i=(new moment.utc).tz(s),i.year()}return""}edit(e=!1,t=""){if(!this.checkAccess("edit"))return(0,a.of)(!1);let s=new o.x;return this.modal.openModal("ObjectEditModal",!1,this.injector).subscribe((i=>{i&&(t&&""!=t&&(i.instance.componentSet=t),e&&i.instance.model.getData(!1,"editview",!1),i.instance.actionSubject.subscribe((e=>{s.next(e),s.complete()})))})),s.asObservable()}duplicateCheckOnChange(e){if(this.isNew&&this.metadata.getModuleDuplicatecheckOnChange(this.module)){let t=this.metadata.getModuleDuplicateCheckFields(this.module);if(0==t.length)return;let s=!1,i=!1;for(let n of t)i||(i=e.indexOf(n)>=0),s||(s=this.getField(n));if(s&&i){let e=new o.x;return this.duplicateCheck(!0).subscribe({next:t=>{this.duplicates=t.records,this.duplicatecount=t.count,e.next(!0),e.complete()},error:()=>{e.next(!1),e.complete()}}),e.asObservable()}i&&!s&&(this.duplicates=[])}return(0,a.of)(!1)}duplicateCheck(e=!1){if(this.metadata.getModuleDuplicatecheck(this.module)){this.duplicateChecking=!0;let t=new o.x;if(e){let e=this.data;e.id=this.id,this.backend.checkDuplicates(this.module,e).subscribe({next:e=>{t.next(e),t.complete(),this.duplicateChecking=!1},error:()=>{t.next([]),t.complete(),this.duplicateChecking=!1}})}else this.backend.getDuplicates(this.module,this.id).subscribe({next:e=>{t.next(e),t.complete(),this.duplicateChecking=!1},error:()=>{t.next([]),t.complete(),this.duplicateChecking=!1}});return t.asObservable()}return(0,a.of)([])}addMessage(e,t,s=null,i="validation"){return this._messages.push({type:e,message:t,reference:s,source:i}),"error"==e&&s&&this.setFieldStatus(s,"invalid",!0),this.messageChange$.emit(!0),!0}getMessages(){return this.messages}setFieldMessage(e,t,s,i){return this.resetFieldMessages(s,e,i),"error"==e&&this.setFieldStatus(s,"invalid",!0),this.addMessage(e,t,s,i)}getFieldMessages(e,t){let s=this._messages.filter((s=>s.reference==e&&(!t||s.type==t)));return s.length>0&&s}resetFieldMessages(e,t,s){if(0==this._messages.length)return!0;for(let i=this._messages.length-1;i>=0;i--){let n=this._messages[i];n.reference!=e||t&&n.type!=t||s&&n.source!=s||(this._messages.splice(i,1),this.messageChange$.emit(!0))}return this.resetFieldStati(e),!0}resetMessages(e,t="validation"){if(0==this._messages.length)return!0;for(let s=this._messages.length-1;s>=0;s--){let i=this._messages[s];e&&i.type!=e||t&&i.source!=t||(this._messages.splice(s,1),this.messageChange$.emit(!0)),this.resetFieldStati(i.reference)}return!0}isFieldARelationLink(e){try{return"link"==this.fields[e].type}catch(e){return!1}}getRelatedRecords(e){let t=[];if(!this.isFieldARelationLink(e))return t;if(!this.data[e])return t;for(let s in this.data[e].beans)t.push(this.data[e].beans[s]);return t}setRelatedRecords(e,t=null){return!!this.isFieldARelationLink(e)&&(this.data[e]={beans:{}},t?this.addRelatedRecords(e,t):void this.field$.next({field:e,value:this.getRelatedRecords(e)}))}addRelatedRecords(e,t,s=!0){if(!this.isFieldARelationLink(e))return!1;this.data[e]||(this.data[e]={beans:{}});for(let i of t)!s&&this.data[e].beans[i.id]||(this.data[e].beans[i.id]=i);return this.field$.next({field:e,value:this.getRelatedRecords(e)}),!0}removeRelatedRecords(e,t){if(!this.isFieldARelationLink(e))return!1;this.data[e]||(this.data[e]={beans:[]}),this.data[e].beans_relations_to_delete||(this.data[e].beans_relations_to_delete={});for(let s of t)for(let t in this.data[e].beans)s==t&&(delete this.data[e].beans[t],this.data[e].beans_relations_to_delete[t]=s);return!0}ngOnDestroy(){this.modelRegisterId&&this.navigation.unregisterModel(this.modelRegisterId),this.subscriptions.unsubscribe()}isDirty(){return this.isEditing&&_.values(this.getDirtyFields()).length}checkModuleFilterMatch(e){let t=this.configuration.getData("modulefilters");if(!t[e]||!t[e].filterdefs)return!1;let s=t[e].filterdefs;return s="string"==typeof s?JSON.parse(s):s,!!t&&this.checkModuleFilterGroupMatch(s)}checkModuleFilterGroupMatch(e){if("own"==e.groupscope&&this.data.assigned_user_id!=this.session.authData.userId)return!1;let t=!1;return!(!e||!e.conditions)&&(e.conditions.forEach((s=>(t=s.conditions?this.checkModuleFilterGroupMatch(s):this.checkModuleFilterConditionMatch(s),!("AND"==e.logicaloperator&&!t)&&(!!t||void 0)))),t)}checkModuleFilterConditionMatch(e){switch(e.operator){case"empty":return""==this.getFieldValue(e.field)||null==this.getFieldValue(e.field);case"equals":return this.getFieldValue(e.field)==e.filtervalue;case"oneof":return(e.filtervalue instanceof Array?e.filtervalue:e.filtervalue.split(",")).indexOf(this.getFieldValue(e.field))>-1;case"true":return 1==this.getFieldValue(e.field);case"false":return 0==this.getFieldValue(e.field);case"starts":return 0==this.getFieldValue(e.field).indexOf(e.filtervalue);case"contains":return this.getFieldValue(e.field).includes(e.filtervalue);case"ncontains":return!this.getFieldValue(e.field).includes(e.filtervalue);case"greater":return this.getFieldValue(e.field)>e.filtervalue;case"gequal":return this.getFieldValue(e.field)>=e.filtervalue;case"less":return this.getFieldValue(e.field)<e.filtervalue;case"lequal":return this.getFieldValue(e.field)<=e.filtervalue;case"today":return moment(this.getFieldValue(e.field)).isSame(new moment,"days");case"past":return moment(this.getFieldValue(e.field)).isBefore(new moment);case"future":return moment(this.getFieldValue(e.field)).isAfter(new moment);case"thismonth":return moment(this.getFieldValue(e.field)).isSame(new moment,"month");case"nextmonth":return moment(this.getFieldValue(e.field)).isAfter(new moment,"month");case"thisyear":return moment(this.getFieldValue(e.field)).isSame(new moment,"year");case"nextyear":return moment(this.getFieldValue(e.field)).isAfter(new moment,"year");case"inndays":return moment(this.getFieldValue(e.field)).isSame((new moment).add(+e.filtervalue,"d"),"days");case"ndaysago":return moment(this.getFieldValue(e.field)).isSame((new moment).subtract(+e.filtervalue,"d"),"days");case"inlessthandays":return moment(this.getFieldValue(e.field)).isBefore((new moment).add(+e.filtervalue,"d"),"days");case"inmorethandays":return moment(this.getFieldValue(e.field)).isAfter((new moment).add(+e.filtervalue,"d"),"days")}}buildBackup(e){let t={};return _.each(e,((s,i)=>{_.isObject(s)?_.isArray(s)?t[i]=s.map((e=>this.buildBackup(e))):moment.isMoment(s)?t[i]=moment(s):t[i]=this.buildBackup(s):t[i]=e[i]})),t}}return model.ɵfac=function(e){return new(e||model)(i.LFG(u.y),i.LFG(m.f),i.LFG(h.Pu),i.LFG(d.A),i.LFG(g.n),i.LFG(p.h),i.LFG(f.F0),i.LFG(b.A),i.LFG(y.d),i.LFG(v.o),i.LFG(x.G),i.LFG(Z.C),i.LFG(i.zs3),i.LFG(w.W))},model.ɵprov=i.Yz7({token:model,factory:model.ɵfac}),model})()},323:(e,t,s)=>{"use strict";s.d(t,{H:()=>m});var i=s(1135),n=s(7579),l=s(1571),o=s(4505),a=s(6625),d=s(5920),r=s(3278),c=s(3369),u=s(5329);let m=(()=>{class modelattachments{constructor(e,t,s,n,l,o){this.backend=e,this.configurationService=t,this.session=s,this.toast=n,this.broadcast=l,this.language=o,this.count=0,this.files=[],this.loading=!1,this.loaded=!1,this.loaded$=new i.X(!1)}getCount(e){let t=new n.x;return this.backend.getRequest(`common/spiceattachments/module/${this.module}/${this.id}/count`,{categoryId:e}).subscribe((e=>{this.count=e.count,t.next(this.count),t.complete()}),(e=>{t.complete()})),t.asObservable()}broadcastAttachmentCount(){this.broadcast.broadcastMessage("attachments.loaded",{module:this.module,id:this.id,attachmentcount:this.count})}getAttachments(e){let t=new n.x;return this.files=[],this.loading=!0,this.backend.getRequest(`common/spiceattachments/module/${this.module}/${this.id}`,{categoryId:e}).subscribe((e=>{for(let t in e)this.files.find((e=>e.id==t))||(e[t].date=new moment(e[t].date),this.files.push(e[t]));this.count=this.files.length,this.broadcastAttachmentCount(),this.loading=!1,t.next(this.files),t.complete(),this.loaded=!0,this.loaded$.next(!0)}),(e=>{this.loading=!1,t.error(e),t.complete()})),t.asObservable()}cloneAttachments(e,t){let s=new n.x;return this.backend.postRequest(`common/spiceattachments/module/${this.module}/${this.id}/clone/${e.module}/${e.id}`,{},{categoryId:t}).subscribe((e=>{for(let t in e)this.files.find((e=>e.id==t))||(e[t].date=new moment(e[t].date),this.files.push(e[t]));this.count=this.files.length,this.broadcastAttachmentCount(),s.next(this.files),s.complete()}),(e=>{this.loading=!1,s.error(e),s.complete()})),s.asObservable()}humanFileSize(e){let t=1024,s=e;if(Math.abs(e)<t)return s+" B";let i=["kB","MB","GB","TB","PB","EB","ZB","YB"],n=-1;do{s/=t,++n}while(Math.abs(s)>=t&&n<i.length-1);return s.toFixed(1)+" "+i[n]}uploadAttachmentsBase64(e,t){if(0===e.length)return;let s=new n.x,i=this.configurationService.getSystemParamater("upload_maxsize");for(let n of e){if(i&&n.size>i){this.toast.sendToast(this.language.getLabelFormatted("LBL_EXCEEDS_MAX_UPLOADFILESIZE",[n.name,this.humanFileSize(i)]),"error");continue}let e={date:new moment,file:"",file_mime_type:n.type?n.type:"application/octet-stream",filesize:n.size,filename:n.name,category_ids:t,filemd5:void 0,id:"",text:"",thumbnail:"",user_id:"1",user_name:"admin",uploadprogress:0};this.files.unshift(e),this.count++,this.broadcastAttachmentCount(),this.readFile(n).subscribe((()=>{this.uploadForUploadAttachmentsBase64(e,s,n)}))}return s.asObservable()}uploadAttachmentsBase64FromArray(e){if(0===e.length)return;let t=new n.x,s=this.configurationService.getSystemParamater("upload_maxsize");for(let i of e){if(s&&i.size>s){this.toast.sendToast(this.language.getLabelFormatted("LBL_EXCEEDS_MAX_UPLOADFILESIZE",[i.name,this.humanFileSize(s)]),"error");continue}let e={date:new moment,file:"",file_mime_type:i.type?i.type:"application/octet-stream",filesize:i.size,filename:i.name,filemd5:void 0,id:"",text:"",thumbnail:"",user_id:"1",user_name:"admin",uploadprogress:0};this.files.unshift(e),this.count++,this.broadcastAttachmentCount(),this.uploadForUploadAttachmentsBase64(e,t,i)}return t.asObservable()}uploadForUploadAttachmentsBase64(e,t,s){let n=new i.X(0);n.subscribe((t=>{e.uploadprogress=Math.floor(t)}));let l={file:s.filecontent,filename:s.name,filemimetype:s.type?s.type:"application/octet-stream",category_ids:e.category_ids},o="common/spiceattachments";this.module&&this.id&&(o+=`/module/${this.module}/${this.id}`),this.backend.postRequestWithProgress(o,null,l,n).subscribe((s=>{e.id=s[0].id,e.thumbnail=s[0].thumbnail,e.filemd5=s[0].filemd5,e.user_id=s[0].user_id,e.user_name=s[0].user_name,delete e.uploadprogress,t.next({files:s}),t.complete()}))}uploadFileBase64(e,t,s){let l=new n.x,o=this.configurationService.getSystemParamater("upload_maxsize");if(o&&atob(e).length>o)return void this.toast.sendToast(this.language.getLabelFormatted("LBL_EXCEEDS_MAX_UPLOADFILESIZE",[t,this.humanFileSize(o)]),"error");let a={date:new moment,file:"",file_mime_type:s||"application/octet-stream",filesize:atob(e).length,filename:t,filemd5:void 0,id:"",text:"",thumbnail:"",user_id:"1",user_name:"admin",uploadprogress:0};this.files.unshift(a),this.count++,this.broadcastAttachmentCount();let d=new i.X(0);d.subscribe((e=>{a.uploadprogress=Math.floor(e)}));let r={file:e,filename:t,filemimetype:s||"application/octet-stream"},c="common/spiceattachments";return this.module&&this.id&&(c+=`/module/${this.module}/${this.id}`),this.backend.postRequestWithProgress(c,null,r,d).subscribe((e=>{a.id=e[0].id,a.thumbnail=e[0].thumbnail,a.filemd5=e[0].filemd5,a.user_id=e[0].user_id,a.user_name=e[0].user_name,delete a.uploadprogress,l.next({files:e}),l.complete()})),l.asObservable()}readFile(e){let t=new n.x,s=new FileReader;return s.file=e,s.onloadend=e=>{let i=s.result.toString();i=i.substring(i.indexOf("base64,")+7);let n=s.file;n.filecontent=i,t.next(n),t.complete()},s.readAsDataURL(e),t.asObservable()}deleteAttachment(e){this.backend.deleteRequest(`common/spiceattachments/module/${this.module}/${this.id}/${e}`).subscribe((t=>{let s=this.files.findIndex((t=>t.id==e));this.files.splice(s,1),this.count--,this.broadcastAttachmentCount()}),(e=>{this.toast.sendToast("Cannot delete attachment.","error",e.error.error.message,!1)}))}downloadAttachment(e,t){this.backend.getRequest(`common/spiceattachments/module/${this.module}/${this.id}/${e}`).subscribe((e=>{let t=this.b64toBlob(e.file,e.file_mime_type),s=URL.createObjectURL(t),i=document.createElement("a");document.body.appendChild(i),i.href=s,i.download=e.filename,i.type=e.file_mime_type,i.click(),i.remove()}))}downloadAttachmentForField(e,t,s,i){this.backend.getRequest(`common/spiceattachments/module/${e}/${t}/byfield/${s}`).subscribe((e=>{let t=this.b64toBlob(e.file,e.file_mime_type),s=URL.createObjectURL(t),i=document.createElement("a");document.body.appendChild(i),i.href=s,i.download=e.filename,i.type=e.file_mime_type,i.click(),i.remove()}))}getAttachment(e){let t=new n.x;return this.backend.getRequest(`common/spiceattachments/module/${this.module}/${this.id}/${e}`).subscribe((e=>{t.next(e.file),t.complete()}),(e=>{t.error(e),t.complete()})),t.asObservable()}b64toBlob(e,t="",s=512){let i=atob(e),n=[];for(let e=0;e<i.length;e+=s){let t=i.slice(e,e+s),l=new Array(t.length);for(let e=0;e<t.length;e++)l[e]=t.charCodeAt(e);let o=new Uint8Array(l);n.push(o)}return new Blob(n,{type:t})}openAttachment(e,t){this.backend.getRequest(`common/spiceattachments/module/${this.module}/${this.id}/${e}`).subscribe((e=>{let t=this.b64toBlob(e.file,e.file_mime_type),s=URL.createObjectURL(t);window.open(s,"_blank")}))}}return modelattachments.ɵfac=function(e){return new(e||modelattachments)(l.LFG(o.y),l.LFG(a.C),l.LFG(d.n),l.LFG(r.A),l.LFG(c.f),l.LFG(u.d))},modelattachments.ɵprov=l.Yz7({token:modelattachments,factory:modelattachments.ɵfac}),modelattachments})()},2644:(e,t,s)=>{"use strict";s.d(t,{t:()=>p});var i=s(1571),n=s(727),l=s(1135),o=s(7579),a=s(3369),d=s(4505),r=s(4154),c=s(5329),u=s(2422),m=s(5920),h=s(6625),g=s(3278);let p=(()=>{class modellist{constructor(e,t,s,o,a,d,r,c){this.broadcast=e,this.backend=t,this.metadata=s,this.language=o,this.userpreferences=a,this.session=d,this.configuration=r,this.toast=c,this.module="",this.listDataChanged$=new i.vpe,this.listTypeComponent$=new i.vpe,this.listData={list:[],totalcount:0},this.offset=0,this.listSelected={type:"",items:[]},this.selectionChanged$=new i.vpe,this.sortArray=[],this.lastLoad=new moment,this.loadlimit=50,this.isLoading=!1,this.searchTerm="",this.moduleAggregates=[],this.moduleAggregatesByFieldname={},this.selectedAggregates=[],this.buckets={},this.useCache=!0,this.standardLists=[],this.serviceSubscriptions=new n.w0,this.displayAggregates=!1,this.displayFilters=!1,this._listfields=[],this.listfield$=new i.vpe,this.disableAutoloadListAll=!1,this.setDisableAutoloadListAll(),this.subscribeToBroadcast(),this.generateStandardLists(),this.listType$=new l.X(this.standardLists[0])}subscribeToBroadcast(){this.serviceSubscriptions.add(this.broadcast.message$.subscribe((e=>{this.handleMessage(e)})))}setDisableAutoloadListAll(){this.disableAutoloadListAll=!!this.configuration.getCapabilityConfig("module").disableAutoloadListAll}initialize(e,t){this.module=e,this.generateStandardLists(),this.embeddedByComponent=t,this.resetListData(),this.loadModuleAggregates();let s="all",i=this.userpreferences.getPreference(e);i?.lastListTypeId&&this.listTypeExists(i.lastListTypeId)&&(s=i.lastListTypeId),this.setListType(s,!1)}loadModuleAggregates(){this.moduleAggregates=[];for(let e of this.metadata.getModuleAggregates(this.module))this.moduleAggregates.push({...e});this.moduleAggregates.forEach((e=>this.moduleAggregatesByFieldname[e.fieldname]=e)),this.moduleAggregates.sort(((e,t)=>e.priority||t.priority?!e.priority||e.priority>t.priority?1:-1:0))}handleMessage(e){if(e.messagedata.module===this.module)switch(e.messagetype){case"model.delete":let t=this.listData.list.findIndex((t=>t.id==e.messagedata.id));if(t>=0){if(this.listData.list.splice(t,1),this.listData.totalcount--,this.bucketfield){let t=[];if(this.bucketamountfield)for(let s of this.bucketamountfield)t.push({fieldname:s.name,value:e.messagedata.data[s.name]});this.removeItemFromBucket(e.messagedata.data[this.bucketfield],t)}this.listDataChanged$.next(!0)}break;case"model.save":let s=this.listData.list.findIndex((t=>t.id==e.messagedata.id));if(s>=0){let t=this.listData.list[s].selected;if(this.listData.list[s]=e.messagedata.data,t&&(this.listData.list[s].selected=!0),this.bucketfield){if(e.messagedata.changed&&e.messagedata.changed[this.bucketfield]){let t=[];for(let s of this.bucketamountfield)t.push({fieldname:s.name,valuefrom:e.messagedata.backupdata[s.name],valueto:e.messagedata.data[s.name]});this.updateBuckets(e.messagedata.backupdata[this.bucketfield],e.messagedata.data[this.bucketfield],t)}else if(this.bucketamountfield){let t=this.buckets.bucketitems.find((t=>t.bucket==e.messagedata.data[this.bucketfield]));for(let s of this.bucketamountfield)e.messagedata.changed&&e.messagedata.changed[s.name]&&(t.values["_bucket_agg_"+s.name]+=e.messagedata.data[s.name]-e.messagedata.backupdata[s.name])}this.listDataChanged$.next(!0)}}else this.reLoadList()}}ngOnDestroy(){this.serviceSubscriptions.unsubscribe()}setSortField(e,t,s=!0){if(!e||this.isLoading)return;let i=this.sortArray.findIndex((t=>t.sortfield==e));if(i>=0){let e=this.sortArray[i];"ASC"==e.sortdirection?e.sortdirection="DESC":this.sortArray.splice(i,1)}else this.sortArray.push({sortfield:e,sortdirection:t||"ASC"})}getSortField(e){let t=this.sortArray.findIndex((t=>t.sortfield==e));if(t>=0){return{sortdirection:this.sortArray[t].sortdirection,sortindex:t,sortitems:this.sortArray.length}}return!1}getSortFields(){let e=[];for(let t of this.sortArray)e.push(this.language.getFieldDisplayName(this.module,t.sortfield));return e.join(", ")}get isSorted(){return this.sortArray.length>0}addCustomListType(e){this.metadata.addModuleListType(this.module,e)}listTypeExists(e){return!!this.getListTypes().find((t=>t.id==e))}setListType(e,t=!0,s=[]){if(e==this.currentList?.id)return;const i=this.currentList?.listcomponent;if(this.displayAggregates=!1,this.displayFilters=!1,this.currentList=this.getListTypes().find((t=>t.id===e)),this.currentList){if(this.determineListFields(),t){let t=this.userpreferences.getPreference(this.module);t||(t={}),t.lastListTypeId=e,this.userpreferences.setPreference(this.module,t)}this.currentList.aggregates?this.selectedAggregates=JSON.parse(atob(this.currentList.aggregates)):this.selectedAggregates=[],this.currentList.sortfields?this.sortArray=JSON.parse(atob(this.currentList.sortfields)):this.sortArray=s,this.emitListTypeChange(),this.currentList.listcomponent!=i&&this.emitListTypeComponentChange()}}determineListFields(){this._listfields=[];let e=this.getFieldDefs();const t=this.embeddedByComponent||this.currentList.listcomponent;let s=this.metadata.getComponentConfig(t,this.module),i=this.metadata.getFieldSetFields(s.fieldset);for(let t of i){let s=e?e.find((e=>e.id==t.id)):void 0;e&&s?this._listfields.push({id:t.id,field:t.field,fieldconfig:t.fieldconfig,sort:s.sort,width:s.width}):e||t.fieldconfig.hidden||this._listfields.push({id:t.id,field:t.field,fieldconfig:t.fieldconfig})}e&&this._listfields.sort(((t,s)=>e.findIndex((e=>e.id==t.id))>e.findIndex((e=>e.id==s.id))?1:-1))}isCustomList(e){return e||(e=this.currentList.id),!this.standardLists.some((t=>t.id==e))}set listfields(e){this._listfields=e;for(let e in this.sortArray)this._listfields.find((t=>t.field==this.sortArray[e].sortfield))||this.sortArray.splice(parseInt(e,10),1);this.listfield$.emit(this._listfields)}get listfields(){return this._listfields}canDelete(){try{return"all"!=this.currentList.id&&"owner"!=this.currentList.id}catch(e){return!1}}filterEnabled(){try{return"all"!=this.currentList.id&&"owner"!=this.currentList.id}catch(e){return!1}}aggregatesEnabled(){try{return!(!this.searchAggregates||_.isEmpty(this.searchAggregates))}catch(e){return!1}}setToSession(){this.useCache&&this.configuration.setData("lastlist"+this.module,JSON.stringify({listdata:this.listData,sortarray:this.sortArray,searchterm:this.searchTerm,searchaggregates:this.searchAggregates,selectedaggregates:this.selectedAggregates,buckets:this.buckets}))}loadFromSession(){this.useCache=!0;let e=JSON.parse(this.configuration.getData("lastlist"+this.module));return!(!e||e.buckets?.bucketfield!=this.buckets?.bucketfield)&&(this.listData=e.listdata,this.searchTerm=e.searchterm,this.searchAggregates=e.searchaggregates,this.selectedAggregates=e.selectedaggregates,this.sortArray=e.sortarray,this.buckets=e.buckets,!0)}getGlobal(){return"1"==this.currentList.global}getFieldDefs(){try{return JSON.parse(atob(this.currentList.fielddefs))}catch(e){return}}getFilterDefs(){try{return JSON.parse(this.currentList.filterdefs)}catch(e){return{logicaloperator:"and",groupscope:"all",conditions:[]}}}addListType(e){let t=new o.x;return this.backend.postRequest("configuration/spiceui/core/modules/"+this.module+"/listtypes",{},JSON.stringify(e)).subscribe((e=>{this.addCustomListType(e),this.setListType(e.id),t.next(!0),t.complete()})),t.asObservable()}updateStandardListsComponent(e,t){this.standardLists[0].listcomponent!=t&&(this.standardLists.forEach((e=>{e.listcomponent=t})),this.determineListFields(),this.userpreferences.setPreference("defaultlisttype",t,!1,this.module),this.emitListTypeComponentChange())}updateListTypeComponent(e){this.currentList?.listcomponent!=e&&(this.metadata.updateModuleListType(this.module,{id:this.currentList.id,listcomponent:e}),this.currentList.listcomponent=e,this.determineListFields(),this.emitListTypeComponentChange())}emitListTypeComponentChange(){this.listTypeComponent$.next(this.currentList.listcomponent)}updateListType(e){let t=new o.x;e||(e={});const s=this.currentList?.listcomponent;return e.aggregates=btoa(JSON.stringify(this.selectedAggregates)),e.sortfields=btoa(JSON.stringify(this.sortArray)),e.fielddefs=btoa(JSON.stringify(this.listfields.map((e=>({id:e.id,width:e.width}))))),e.listcomponent||(e.listcomponent=this.currentList.listcomponent),this.backend.postRequest(`configuration/spiceui/core/modules/${this.module}/listtypes/${this.currentList.id}`,{},e).subscribe((i=>{this.metadata.getModuleListTypes(this.module).some((t=>{if(t.id==this.currentList.id){for(let s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);return this.currentList=t,!0}})),e.id=this.currentList.id,this.metadata.updateModuleListType(this.module,e),this.emitListTypeChange(),this.currentList.listcomponent!=s&&this.emitListTypeComponentChange(),t.next(!0),t.complete()})),t.asObservable()}emitListTypeChange(){this.listType$.next(this.currentList)}deleteListType(e=""){""===e&&(e=this.currentList.id),this.backend.deleteRequest("configuration/spiceui/core/modules/"+this.module+"/listtypes/"+e).subscribe((t=>{this.metadata.deleteModuleListType(this.module,e),this.setListType("all")}),(e=>{this.toast.sendToast(this.language.getLabel("LBL_ERROR"),"error")}))}getLastLoadTime(){return this.lastLoad.format(this.userpreferences.getTimeFormat())}reLoadList(e=!1){return this.getListData(e)}resetListData(){if(this.buckets&&this.buckets.bucketitems)for(let e of this.buckets.bucketitems)e.count=0,e.items=0;this.listData={list:[],totalcount:0},this.listDataChanged$.next(!0)}getListTypes(e=!0){return e?this.standardLists.concat(this.metadata.getModuleListTypes(this.module)):this.metadata.getModuleListTypes(this.module)}generateStandardLists(){this.standardLists=[{id:"all",global:"1",name:`${this.language.getModuleCombinedLabel("LBL_ALL",this.module)}`,listcomponent:"ObjectList"}],this.metadata.getFieldDefs(this.module,"assigned_user_id")&&this.standardLists.push({id:"owner",global:"1",name:`${this.language.getModuleCombinedLabel("LBL_MY",this.module)}`,listcomponent:"ObjectList"})}get hasAggregates(){return this.selectedAggregates.length>0}get hasNonSysAggregates(){return this.selectedAggregates.some((e=>{let t=e.split("::",1)[0];if(!this.moduleAggregatesByFieldname[t]?.system)return!0}))}hasAggregate(e,t){let s=e+"::"+t;return this.selectedAggregates.some((e=>e===s))}setAggregate(e,t){this.selectedAggregates.push(e+"::"+t)}getCheckedAggregateCount(e){return this.selectedAggregates.filter((t=>t.indexOf(e+"::")>-1)).length}checkAggregate(e,t){return this.selectedAggregates.indexOf(e+"::"+t.trim())>-1}removeAggregate(e,t){let s=this.selectedAggregates.indexOf(e+"::"+t);return!(s<0)&&(this.selectedAggregates.splice(s,1),!0)}removeAllAggregates(e=!1){this.selectedAggregates=e?this.selectedAggregates.filter((e=>{let t=e.split("::",1)[0];return!!this.moduleAggregatesByFieldname[t]?.system})):[]}removeAggregatesOfField(e){this.selectedAggregates=this.selectedAggregates.filter((t=>t.split("::",1)[0]!==e))}setAllSelected(){this.listSelected.type="all";for(let e of this.listData.list)e.selected=!0;this.selectionChanged$.emit(!0)}setAllUnselected(){this.listSelected.type="none";for(let e of this.listData.list.filter((e=>1==e.selected)))e.selected=!1;this.selectionChanged$.emit(!0)}setRangeSelected(e,t){for(let s=e;s<=t;s++)this.listData.list[s-1].selected=!0;this.selectionChanged$.emit(!0)}getSelectedCount(){return this.listData.list.filter((e=>1==e.selected)).length}getSelectedIDs(){let e=[];for(let t of this.listData.list)t.selected&&e.push(t.id);return e}getSelectedItems(){return this.listData.list.filter((e=>e.selected))}checkAccess(e){if(!("edit"!=e&&"delete"!=e||"all"!=this.currentList.id&&"owner"!=this.currentList.id))return!1;if(!this.getGlobal())return!0;switch(e){case"delete":return this.canDelete()&&(this.session.authData.admin||this.metadata.checkModuleAcl(this.module,"moduleadmin"));case"edit":return this.session.authData.admin||this.metadata.checkModuleAcl(this.module,"moduleadmin");default:return!1}}getListData(e=!1){let t=new o.x;if(e){if(this.buckets&&this.buckets.bucketitems)for(let e of this.buckets.bucketitems)e.items=0}else this.isLoading=!0,this.resetListData();let s={};s[this.module]=this.selectedAggregates;const i={modulefilter:this.modulefilter,filtercontextbeanid:this.filtercontextbeanid,start:0,limit:this.loadlimit,listid:this.currentList.id,searchterm:this.searchTerm,searchgeo:this.searchGeo,aggregates:s,buckets:this.buckets,relatefilter:this.relatefilter?.active?this.relatefilter:null};return this.backend.getList(this.module,this.sortArray,i).subscribe((e=>{this.listData=e,this.lastLoad=new moment,this.isLoading=!1,this.searchAggregates=e.aggregations,this.buckets=e.buckets,this.setToSession(),t.next(!0),t.complete(),this.listDataChanged$.next(!0)}),(e=>{this.toast.sendToast("error loading list"),this.isLoading=!1,t.error(e),t.complete()})),t.asObservable()}canLoadMore(){return!this.isLoading&&this.listData.list.length<this.listData.totalcount}loadMoreList(){if(this.isLoading||this.listData.list.length>=this.listData.totalcount)return!1;this.isLoading=!0;let e={};e[this.module]=this.selectedAggregates,this.backend.getList(this.module,this.sortArray,{modulefilter:this.modulefilter,filtercontextbeanid:this.filtercontextbeanid,start:this.listData.list.length,limit:this.loadlimit,listid:this.currentList.id,searchterm:this.searchTerm,searchgeo:this.searchGeo,aggregates:e,buckets:this.buckets,relatefilter:this.relatefilter?.active?this.relatefilter:null}).subscribe((e=>{this.listData.list=this.listData.list.concat(e.list),this.lastLoad=new moment,this.isLoading=!1,this.listDataChanged$.next(!0)}))}loadMoreBucketList(e){const t=this.buckets.bucketitems.find((t=>t.bucket==e));if(!t||this.isLoading||t.items>=t.items.total)return!1;this.isLoading=!0;let s={};s[this.module]=this.selectedAggregates,this.backend.getList(this.module,this.sortArray,{modulefilter:this.modulefilter,filtercontextbeanid:this.filtercontextbeanid,start:this.listData.list.length,limit:this.loadlimit,listid:this.currentList.id,searchterm:this.searchTerm,searchgeo:this.searchGeo,aggregates:s,buckets:{bucketfield:this.buckets.bucketfield,bucketitems:[t]},relatefilter:this.relatefilter?.active?this.relatefilter:null}).subscribe((e=>{t.items=e.buckets.bucketitems[0].items,this.listData.list=this.listData.list.concat(e.list),this.lastLoad=new moment,this.listDataChanged$.next(!0),this.isLoading=!1}))}exportList(e){let t=new o.x,s=this.getSelectedIDs();if(s.length>0)this.backend.getLinkToDownload(`module/${this.module}/export`,"POST",{},{ids:s,fields:e},{}).subscribe((e=>{t.next(e),t.complete()}));else{let s={};s[this.module]=this.selectedAggregates,this.backend.getLinkToDownload(`module/${this.module}/export`,"POST",{},{listid:this.currentList.id,modulefilter:this.modulefilter,sortfields:this.sortArray,fields:e,searchterm:this.searchTerm,searchgeo:this.searchGeo,aggregates:s}).subscribe((e=>{t.next(e),t.complete()}))}return t.asObservable()}get bucketfield(){return this.buckets?this.buckets.bucketfield:""}get bucketamountfield(){return this.buckets?this.buckets.buckettotal:""}updateBuckets(e,t,s=[]){let i=this.buckets.bucketitems.find((t=>t.bucket==e));i.items--,i.total--;let n=this.buckets.bucketitems.find((e=>e.bucket==t));n.items++,n.total++;for(let e of this.buckets.buckettotal)for(let t of s)"sum"==e.function&&e.name==t.fieldname&&(i.values["_bucket_agg_"+t.fieldname]-=t.valuefrom,n.values["_bucket_agg_"+t.fieldname]+=t.valueto)}removeItemFromBucket(e,t=[]){let s=this.buckets.bucketitems.find((t=>t.bucket==e));s.items--,s.total--;for(let e of t)s.values["_bucket_agg_"+e.fieldname]-=e.value}}return modellist.ɵfac=function(e){return new(e||modellist)(i.LFG(a.f),i.LFG(d.y),i.LFG(r.Pu),i.LFG(c.d),i.LFG(u.z),i.LFG(m.n),i.LFG(h.C),i.LFG(g.A))},modellist.ɵprov=i.Yz7({token:modellist,factory:modellist.ɵfac}),modellist})()},6163:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});var i=s(1571),n=s(4154),l=s(5322),o=s(5920);moment.defaultFormat="YYYY-MM-DD HH:mm:ss";let a=(()=>{class modelutilities{constructor(e,t,s){this.metadata=e,this.mathcomp=t,this.session=s}getRand(){return Math.random()}S4(){return(65536*(1+this.getRand())|0).toString(16).substring(1)}generateGuid(){return this.S4()+this.S4()+"-"+this.S4()+"-"+this.S4()+"-"+this.S4()+"-"+this.S4()+this.S4()+this.S4()}backendModel2spice(e,t){let s=this.metadata.getModuleFields(e);for(let i in s)t[i]&&(t[i]=this.backend2spice(e,i,t[i]));return t}backend2spice(e,t,s){let i=this.metadata.getFieldDefs(e,t);if(!i||!i.type)return s;switch(i.type){case"date":if(moment.isMoment(s))return s;let e=moment(s);return e.isValid()?e:null;case"datetime":case"datetimecombo":if(moment.isMoment(s))return s;let t=this.session.getSessionData("timezone")||moment.tz.guess(!0),n="string"==typeof t&&t.length>0?moment.utc(s).tz(t):moment(s);return n.isValid()?n:null;case"double":case"currency":return s?parseFloat(s):0;case"int":return s?parseInt(s,10):0;case"bool":case"boolean":return"1"==s||s>0||1==s;case"json":try{return _.isObject(s)?s:s?JSON.parse(s):{}}catch(e){return{}}case"link":if(_.isObject(s)&&s.beans&&i.module)for(let e in s.beans)s.beans[e]=this.backendModel2spice(i.module,s.beans[e]);return s;default:return s}}spiceModel2backend(e,t){let s={...t},i=this.metadata.getModuleFields(e);for(let n in i)t.hasOwnProperty(n)&&(s[n]=this.spice2backend(e,n,t[n]));return s}spice2backend(e,t,s){let i=this.metadata.getFieldDefs(e,t);if(!i||!i.type)return s;switch(i.type){case"relate":case"parent":case"linked":case"linkedparent":return null;case"date":if("string"==typeof s){let e=moment(s);return e.isValid()?e.format("YYYY-MM-DD"):""}return s&&s._isAMomentObject&&s.isValid()?s.format("YYYY-MM-DD"):"";case"datetime":case"datetimecombo":if("string"==typeof s){let e=this.session.getSessionData("timezone")||moment.tz.guess(!0),t="string"==typeof e&&e.length>0?moment(s).tz(e):moment(s);return t.isValid()?t.utc().format("YYYY-MM-DD HH:mm:ss"):""}return s&&s._isAMomentObject&&s.isValid()?moment(s).utc().format("YYYY-MM-DD HH:mm:ss"):"";case"json":return s?JSON.stringify(s):"";case"link":if(_.isObject(s)&&s.beans&&i.module)for(let e in s.beans)s.beans[e]=this.spiceModel2backend(i.module,s.beans[e]);return s;case"bool":case"boolean":return s&&("1"==s||s>0||!0===s)?"1":"0";default:return s}}formatDate(e){return moment(e).format("YYYY-MM-DD")}cleanAccountName(e){let t=["ag","gmbh","gesmbh","corp","inc"],s=e.toLowerCase();s=s.replace(/[^\w\s]/gi,"");let i=s.split(" ");for(let e of t){let t=i.indexOf(e);t>=0&&i.splice(t,1)}return i.join(" ")}static compare(e,t,s){switch(t){case"in":case"between":break;case"empty":return!e;case"nempty":return!!e;case"notnull":return null!==e;case"null":return null===e;case"contain":return!!e&&-1!==e.indexOf(s);case"ncontain":return!e||-1==e.indexOf(s);case"greaterequal":return e>=s;case"greater":return e>s;case"lesserequal":return e<=s;case"lesser":return e<s;case"unequal":return e!=s;case"regex":return new RegExp(s).test(e);case"notregex":return!new RegExp(s).test(e);default:return e==s}}static strtobool(e){if("string"!=typeof e)return!1;switch(e.toLowerCase().trim()){case"false":case"no":case"0":case"":return!1;default:return!0}}static strtomoment(e,t){return moment(modelutilities.strtotime(e,t),"X")}static strtotime(e,t){let s,i,n,l,o,a,d,r,c,u,m,h=!1;if(!e)return h;e=e.replace(/^\s+|\s+$/g,"").replace(/\s{2,}/g," ").replace(/[\t\r\n]/g,"").toLowerCase();let g=new RegExp(["^(\\d{1,4})","([\\-\\.\\/:])","(\\d{1,2})","([\\-\\.\\/:])","(\\d{1,4})","(?:\\s(\\d{1,2}):(\\d{2})?:?(\\d{2})?)?","(?:\\s([A-Z]+)?)?$"].join(""));if(i=e.match(g),i&&i[2]===i[4])if(i[1]>1901)switch(i[2]){case"-":case"/":return i[3]>12||i[5]>31?h:new Date(i[1],parseInt(i[3],10)-1,i[5],i[6]||0,i[7]||0,i[8]||0,i[9]||0).getTime()/1e3;case".":return h}else if(i[5]>1901)switch(i[2]){case"-":case".":return i[3]>12||i[1]>31?h:new Date(i[5],parseInt(i[3],10)-1,i[1],i[6]||0,i[7]||0,i[8]||0,i[9]||0).getTime()/1e3;case"/":return i[1]>12||i[3]>31?h:new Date(i[5],parseInt(i[1],10)-1,i[3],i[6]||0,i[7]||0,i[8]||0,i[9]||0).getTime()/1e3}else switch(i[2]){case"-":return i[3]>12||i[5]>31||i[1]<70&&i[1]>38?h:(l=i[1]>=0&&i[1]<=38?+i[1]+2e3:i[1],new Date(l,parseInt(i[3],10)-1,i[5],i[6]||0,i[7]||0,i[8]||0,i[9]||0).getTime()/1e3);case".":return i[5]>=70?i[3]>12||i[1]>31?h:new Date(i[5],parseInt(i[3],10)-1,i[1],i[6]||0,i[7]||0,i[8]||0,i[9]||0).getTime()/1e3:i[5]<60&&!i[6]?i[1]>23||i[3]>59?h:(n=new Date,new Date(n.getFullYear(),n.getMonth(),n.getDate(),i[1]||0,i[3]||0,i[5]||0,i[9]||0).getTime()/1e3):h;case"/":return i[1]>12||i[3]>31||i[5]<70&&i[5]>38?h:(l=i[5]>=0&&i[5]<=38?+i[5]+2e3:i[5],new Date(l,parseInt(i[1],10)-1,i[3],i[6]||0,i[7]||0,i[8]||0,i[9]||0).getTime()/1e3);case":":return i[1]>23||i[3]>59||i[5]>59?h:(n=new Date,new Date(n.getFullYear(),n.getMonth(),n.getDate(),i[1]||0,i[3]||0,i[5]||0).getTime()/1e3)}if("now"===e)return null===t||isNaN(t)?(new Date).getTime()/1e3|0:0|t;if(!isNaN(s=Date.parse(e)))return s/1e3|0;if(g=new RegExp(["^([0-9]{4}-[0-9]{2}-[0-9]{2})","[ t]","([0-9]{2}:[0-9]{2}:[0-9]{2}(\\.[0-9]+)?)","([\\+-][0-9]{2}(:[0-9]{2})?|z)"].join("")),i=e.match(g),i&&("z"===i[4]?i[4]="Z":i[4].match(/^([+-][0-9]{2})$/)&&(i[4]=i[4]+":00"),!isNaN(s=Date.parse(i[1]+"T"+i[2]+i[4]))))return s/1e3|0;function p(e){let t=e.split(" "),s=t[0],i=t[1].substring(0,3),n=/\d+/.test(s),l=("last"===s?-1:1)*("ago"===t[2]?-1:1);if(n&&(l*=parseInt(s,10)),d.hasOwnProperty(i)&&!t[1].match(/^mon(day|\.)?$/i))return o["set"+d[i]](o["get"+d[i]]()+l);if("wee"===i)return o.setDate(o.getDate()+7*l);if("next"===s||"last"===s)!function(e,t,s){let i,n=a[t];void 0!==n&&(i=n-o.getDay(),0===i?i=7*s:i>0&&"last"===e?i-=7:i<0&&"next"===e&&(i+=7),o.setDate(o.getDate()+i))}(s,i,l);else if(!n)return!1;return!0}if(o=t?new Date(1e3*t):new Date,a={sun:0,mon:1,tue:2,wed:3,thu:4,fri:5,sat:6},d={yea:"FullYear",mon:"Month",day:"Date",hou:"Hours",min:"Minutes",sec:"Seconds"},c="(years?|months?|weeks?|days?|hours?|minutes?|min|seconds?|sec|sunday|sun\\.?|monday|mon\\.?|tuesday|tue\\.?|wednesday|wed\\.?|thursday|thu\\.?|friday|fri\\.?|saturday|sat\\.?)",u="([+-]?\\d+\\s"+c+"|(last|next)\\s"+c+")(\\sago)?",i=e.match(new RegExp("([+-]?\\d+\\s(years?|months?|weeks?|days?|hours?|minutes?|min|seconds?|sec|sunday|sun\\.?|monday|mon\\.?|tuesday|tue\\.?|wednesday|wed\\.?|thursday|thu\\.?|friday|fri\\.?|saturday|sat\\.?)|(last|next)\\s(years?|months?|weeks?|days?|hours?|minutes?|min|seconds?|sec|sunday|sun\\.?|monday|mon\\.?|tuesday|tue\\.?|wednesday|wed\\.?|thursday|thu\\.?|friday|fri\\.?|saturday|sat\\.?))(\\sago)?","gi")),!i)return h;for(m=0,r=i.length;m<r;m++)if(!p(i[m]))return h;return o.getTime()/1e3}http_build_query(e,t="",s="&"){let i=[],n=(e,t,s)=>{let i=[];if(!0===t?t="1":!1===t&&(t="0"),null!==t){if("object"==typeof t){for(let l in t)null!==t[l]&&i.push(n(e+"["+l+"]",t[l],s));return i.join(s)}if("function"!=typeof t)return encodeURIComponent(e)+"="+encodeURIComponent(t);throw new Error("There was an error processing for http_build_query().")}return""};s||(s="&");for(let l in e){let o=e[l];t&&!isNaN(parseFloat(l))&&(l=String(t)+l);let a=n(l,o,s);""!==a&&i.push(a)}return i.join(s)}compileMathExpression(e){try{return this.mathcomp.do(e)}catch(e){return console.warn(e),!1}}timezoneChanged(e,t){for(let s in e)if(_.isObject(e[s]))if(e[s]&&e[s]._isAMomentObject)e[s]._isUTC&&e[s].tz(t);else if(e[s].beans&&_.isObject(e[s].beans))for(let i in e[s].beans)this.timezoneChanged(e[s].beans[i],t)}}return modelutilities.ɵfac=function(e){return new(e||modelutilities)(i.LFG(n.Pu),i.LFG(l.Y),i.LFG(o.n))},modelutilities.ɵprov=i.Yz7({token:modelutilities,factory:modelutilities.ɵfac}),modelutilities})()},2032:(e,t,s)=>{"use strict";s.d(t,{G:()=>Z,H:()=>w});var i=s(1571),n=s(3561),l=s(727),o=s(1135),a=s(7579),d=s(9646),r=s(1481),c=s(5920),u=s(4044),m=s(5329),h=s(3369),g=s(6625),p=s(4154),f=s(3441),b=s(2222),y=s(4505),v=s(2422),x=s(7774);let Z=(()=>{class navigation{constructor(e,t,s,n,a,d,r,c,u,m,h,g){this.title=e,this.session=t,this.modal=s,this.language=n,this.broadcast=a,this.configurationService=d,this.metadata=r,this.helper=c,this.socket=u,this.backend=m,this.userpreferences=h,this.router=g,this.navigationparadigm="subtabbed",this.enforcednavigationparadigm=!1,this.activeModule="Home",this.modelsEditing=[],this.modelregister=[],this.modelregisterCounter=0,this.activeObject="",this.maintab={path:void 0,params:void 0,id:"main",active:!0,pinned:!1,enablesubtabs:!1},this.objectTabs=[],this.objectTabsChange$=new i.vpe,this.subscriptions=new l.w0,this.activeModule$=new i.vpe,this.broadcast.message$.subscribe((e=>this.handleMessage(e))),window.setTimeout((()=>{addEventListener("beforeunload",(e=>{this.anyDirtyModel()&&(e.preventDefault(),e.returnValue="")}))}),1),this.activeTab$=new o.X("main"),this.setTabTitle()}setSessionData(){this.session.setSessionData("navigation",{main:this.maintab,tabs:this.objectTabs})}get activeTabObject(){return this.maintab.active?this.maintab:this.objectTabs.find((e=>e.active))}get activeTab(){return this.maintab.active?"main":this.objectTabs.find((e=>e.active))?.id}set activeTab(e){if(this.maintab.active)this.maintab.active=!1;else{let e=this.objectTabs.find((e=>e.active));e&&(e.active=!1)}if("main"==e)this.maintab.active=!0,this.activeTab$.next("main"),this.router.navigate([this.maintab.url]);else{let t=this.objectTabs.find((t=>t.id==e));t&&this.setTabActive(t)}this.setSessionData()}setTabActive(e){e.active=!0,this.activeTab$.next(e.id),this.setTabTitle(),this.router.navigate([e.url])}getSubTabs(e){return e?this.objectTabs.filter((t=>t.parentid==e)):[]}get displayTab(){if(this.maintab.active)return"main";return this.objectTabs.find((e=>e.active))?.id}setActiveModule(e,t="",s=""){this.activeModule=e,this.activeModule$.emit(e),this.title.setTitle(this.systemName+" / "+(""!==s?s:e))}get systemName(){return this.configurationService.systemName}enforceNavigationParadigm(e){this.enforcednavigationparadigm=!0,this.navigationparadigm=e}handleMessage(e){switch(e.messagetype){case"loader.completed":if(!this.enforcednavigationparadigm&&"loadUserData"==e.messagedata){this.userpreferences.getPreference("navigation_paradigm");this.navigationparadigm="subtabbed",this.session.setSessionData("navigation_paradigm",this.navigationparadigm)}break;case"userpreferences.save":let t=this.userpreferences.getPreference("navigation_paradigm");t="subtabbed",!this.enforcednavigationparadigm&&t&&this.navigationparadigm!=t&&("simple"==t&&this.navigationparadigm!=t?(this.objectTabs=[],this.router.navigate(["module/Home"])):"simple"!=t&&this.navigationparadigm!=t&&this.router.navigate(["module/Home"]),this.navigationparadigm=t,this.session.setSessionData("navigation_paradigm",this.navigationparadigm));break;case"logout":this.objectTabs=[],this.maintab={path:void 0,params:void 0,id:"main",pinned:!1,active:!0,enablesubtabs:!1},this.subscriptions.unsubscribe();break;case"login":let s=this.session.getSessionData("navigation_paradigm");s&&(this.navigationparadigm=s);let i=this.session.getSessionData("navigation");_.isEmpty(i)||(this.maintab=i.main,this.objectTabs=i.tabs,this.maintab.params?.module&&(this.activeModule=this.maintab.params.module),this.activeTab$.next(this.activeTab),this.setTabTitle()),this.subscriptions.add(this.socket.initializeNamespace("module").subscribe((e=>this.handleSocketEvents(e))));break;case"model.delete":for(let t of this.objectTabs.filter((t=>t.params.module==e.messagedata.module&&t.params.id==e.messagedata.id)))this.closeObjectTab(t.id,!0)}}handleSocketEvents(e){if("update"===e.type)e.data.sessionId!=n.V.hashStr(this.session.authData.sessionId)&&this.modelregister.find((t=>t.model.module==e.data.module&&t.model.id==e.data.id&&!t.model.isEditing))&&this.backend.get(e.data.module,e.data.id).subscribe((t=>{let s=this.modelregister.filter((t=>t.model.module==e.data.module&&t.model.id==e.data.id&&!t.model.isEditing));for(let e of s)e.model.setData({...t},!1),e.model.data$.next(e.model.data);this.broadcast.broadcastMessage("model.save",{id:e.data.id,module:e.data.module,data:t})}))}addModelEditing(e,t){this.modelsEditing.push({model:e,summary_text:t,tabid:this.activeTab})}removeModelEditing(e,t){let s=0;this.modelsEditing.some((i=>{if(i.id==t&&i.module==e)return this.modelsEditing.splice(s,1),!0;s++}))}get editing(){return this.modelsEditing.length>0}discardAllChanges(){this.modelsEditing=[]}registerModel(e){let t=++this.modelregisterCounter;return this.modelregister.push({id:t,model:e,tabid:this.activeTab}),this.socket.joinRoom("module",n.V.hashStr(`${e.module}:${e.id}`).toString()),t}unregisterModel(e){let t=this.modelregister.findIndex((t=>t.id==e));if(t>=0){let e=this.modelregister[t].model.module,s=this.modelregister[t].model.id;0==this.modelregister.filter((t=>t.id!=s&&t.model.module==e&&t.model.id==s)).length&&this.socket.leaveRoom("module",n.V.hashStr(`${e}:${s}`).toString()),this.modelregister.splice(t,1)}}getRegisteredModel(e,t){return this.modelregister.find((s=>s.model.id==e&&s.model.module==t))?.model}anyDirtyModel(e){return this.modelsEditing.some((t=>{if(t.model.isDirty()&&(!e||e&&(t.tabid==e||this.parentTabId(e)==e)))return!0}))}parentTabId(e){return"main"==e?null:this.objectTabs.find((t=>t.id==e)).parentid}matchPath(e,t){if(e.path.replace("tab/:tabid/","")==t.path)return!0;if(e.path.replace("tab/:tabid/","")==t.referencepath)return!0;let s=this.metadata.getRouteDetails(e.path.replace("tab/:tabid/",""));return!(!s.referencepath||s.referencepath!=t.path)||!(!s.referencepath||s.referencepath!=t.referencepath)}buildUrl(e){let t="";return e.forEach((e=>{""!=t&&(t+="/"),t+=e.path})),t}matchRouteParams(e,t){if(_.isEqual(e.params,t))return!0;if(t.tabid&&t.tabid==e.id){let s={...t};return delete s.tabid,_.isEqual(e.params,s)}return!1}handleNavigation(e,t,s){let i=this.metadata.getRouteDetails(t.path.replace("tab/:tabid/",""));if("M"==i?.target||"simple"==this.navigationparadigm){if(this.maintab.path==t.path&&_.isEqual(this.maintab.params,e))return void(this.activeTab="main");this.mainTabChangeCheck().subscribe((i=>{i?(this.maintab.path=t.path,this.maintab.params={...e},this.maintab.url=this.buildUrl(s.url),this.activeTab="main",this.maintab.params?.module&&(this.activeModule=this.maintab.params.module)):this.router.navigate([this.maintab.url])}))}else{for(let n of this.objectTabs)if(this.matchPath(n,i)&&this.matchRouteParams(n,e))return n.path!=t.path.replace("tab/:tabid/","")&&(n.path=t.path,n.url=this.buildUrl(s.url)),void(this.activeTab=n.id);let n;"subtabbed"==this.navigationparadigm&&e.tabid&&(n=this.objectTabs.find((t=>t.id==e.tabid)));let l=this.helper.generateGuid();this.objectTabs.unshift({id:l,parentid:n&&n.enablesubtabs?n.id:void 0,path:t.path,url:this.buildUrl(s.url),params:{...e},active:!1,pinned:!1,enablesubtabs:"1"==i.subtabs}),this.activeTab=l,this.objectTabsChange$.emit(!0)}}setActiveTab(e){this.activeTab=e,this.activeTab$.next(this.activeTab),this.setTabTitle()}setTabTitle(){let e=this.getTabById(this.activeTab),t="";e.displayname?t=e.displayname:e.displaymodule?t=this.language.getModuleName(e.displaymodule):this.activeModule&&(t=this.language.getModuleName(this.activeModule)),this.title.setTitle(this.systemName+(t?` / ${t}`:""))}cloneTab(e){let t=this.getTabById(e),s=this.helper.generateGuid();this.objectTabs.unshift({id:s,parentid:void 0,path:t.path,url:t.url,params:{...t.params},active:!1,pinned:!1,enablesubtabs:t.enablesubtabs}),this.activeTab=s}settabinfo(e,t){if("main"==e)t.displaymodule&&this.setActiveModule(t.displaymodule);else{let s=this.getTabById(e);s&&(s.displayname=t.displayname,s.displaymodule=t.displaymodule,s.displayicon=t.displayicon,this.objectTabsChange$.emit(!0))}}getTabById(e){return"main"==e?this.maintab:this.objectTabs.find((t=>t.id==e))}mainTabChangeCheck(){if(this.anyDirtyModel("main")){let e=new a.x;return this.modal.confirm(this.language.getLabel("MSG_NAVIGATIONSTOP","","long"),this.language.getLabel("MSG_NAVIGATIONSTOP")).subscribe((t=>{t?e.next(!0):e.next(!1),e.complete()})),e.asObservable()}return(0,d.of)(!0)}closeObjectTab(e,t=!1){"main"!=e&&(!t&&this.anyDirtyModel(e)?this.modal.confirm(this.language.getLabel("MSG_CLOSETAB","","long"),this.language.getLabel("MSG_CLOSETAB")).subscribe((t=>{t&&this.unsetObjectTab(e)})):this.unsetObjectTab(e))}unsetObjectTab(e){let t=this.objectTabs.findIndex((t=>t.id==e));if(t>=0){(this.objectTabs[t].active||this.objectTabs.find((e=>e.active))?.parentid==e)&&(this.objectTabs[t].parentid?this.setActiveTab(this.objectTabs[t].parentid):this.setActiveTab("main")),this.objectTabs.splice(t,1);let s=-1;for(;(s=this.modelregister.findIndex((t=>t.tabid==e)))>=0;)this.modelregister.splice(s,1);for(t=this.objectTabs.length-1;t>=0;){if(this.objectTabs[t].parentid==e){this.objectTabs.splice(t,1);let s=-1;for(;(s=this.modelregister.findIndex((t=>t.tabid==e)))>=0;)this.modelregister.splice(s,1)}t--}this.objectTabsChange$.emit(!0),this.setSessionData()}}checkActiveRoute(e){return _.isEqual(e,this.activeRoute)}}return navigation.ɵfac=function(e){return new(e||navigation)(i.LFG(r.Dx),i.LFG(c.n),i.LFG(u.o),i.LFG(m.d),i.LFG(h.f),i.LFG(g.C),i.LFG(p.Pu),i.LFG(f._),i.LFG(b.W),i.LFG(y.y),i.LFG(v.z),i.LFG(x.F0))},navigation.ɵprov=i.Yz7({token:navigation,factory:navigation.ɵfac}),navigation})(),w=(()=>{class canNavigateAway{constructor(e,t,s){this.navigation=e,this.modal=t,this.language=s}canActivate(e,t){let s=!1;for(let e of this.navigation.modelregister)if(!e.model.isGlobal&&e.model.isDirty()){s=!0;break}if(s){let e=new a.x;return this.modal.confirm(this.language.getLabel("MSG_NAVIGATIONSTOP","","long"),this.language.getLabel("MSG_NAVIGATIONSTOP")).subscribe((t=>{t&&this.navigation.discardAllChanges(),e.next(t),e.complete()})),e.asObservable()}return(0,d.of)(!0)}}return canNavigateAway.ɵfac=function(e){return new(e||canNavigateAway)(i.LFG(Z),i.LFG(u.o),i.LFG(m.d))},canNavigateAway.ɵprov=i.Yz7({token:canNavigateAway,factory:canNavigateAway.ɵfac}),canNavigateAway})()},7017:(e,t,s)=>{"use strict";s.d(t,{d:()=>l});var i=s(1571),n=s(1135);let l=(()=>{class navigationtab{constructor(){this.activeRoute={params:void 0,path:void 0},this.tabinfo$=new i.vpe,this.close$=new i.vpe,this.activeRoute$=new n.X(this.activeRoute)}setTabInfo(e){this.tabinfo$.emit(e)}closeTab(){this.close$.emit(!0)}}return navigationtab.ɵfac=function(e){return new(e||navigationtab)},navigationtab.ɵprov=i.Yz7({token:navigationtab,factory:navigationtab.ɵfac}),navigationtab})()},3298:(e,t,s)=>{"use strict";s.d(t,{t:()=>m});var i=s(1571),n=s(4505),l=s(3369),o=s(6625),a=s(2422),d=s(5329),r=s(1481),c=s(2222),u=s(5920);let m=(()=>{class notification{constructor(e,t,s,i,n,l,o,a){this.backend=e,this.broadcast=t,this.configuration=s,this.preferences=i,this.language=n,this.sanitizer=l,this.socket=o,this.session=a,this.unreadCount=0,this.totalCount=0,this.notifications=[],this.unreadNotifications=[],this.desktopNotifications=[],this.isLoading=!1,this.newNotifications=[],this.initializeDesktopNotification().then((()=>this.loadNotifications())),this.initializeSocket(),this.subscribeToBroadcast()}initializeDesktopNotification(){return"Notification"in window?"default"===Notification.permission?Notification.requestPermission().then((e=>{this.preferences.setPreference("displayDesktopNotifications","granted"==e,!0)})):Promise.resolve(null):(window.console.error("This browser does not support desktop notification"),Promise.resolve(null))}markAsRead(e){this.notifications.some((t=>{if(t.id==e)return t.notification_read=1,this.unreadCount--,!0})),this.unreadNotifications=this.unreadNotifications.filter((t=>t.id!==e)),this.unreadCount--,this.backend.postRequest(`common/SpiceNotifications/${e}/markasread`)}markAllAsRead(){this.notifications.forEach((e=>{e.notification_read=1})),this.unreadNotifications=[],this.unreadCount=0,this.backend.postRequest("common/SpiceNotifications/all/read")}loadNotifications(){this.setInitialValues(this.configuration.getData("spicenotifications")),this.broadcast.message$.subscribe((e=>{"loader.completed"===e.messagetype&&"loadUserData"===e.messagedata&&this.setInitialValues(this.configuration.getData("spicenotifications"))}))}reloadNotifications(){this.notifications=[],this.unreadNotifications=[],this.desktopNotifications=[],this.loadNotificationsFromBackend()}loadMoreNotifications(){this.isLoading||this.notifications.length>=this.totalCount||this.loadNotificationsFromBackend()}loadNotificationsFromBackend(){this.isLoading=!0,this.backend.getRequest("common/SpiceNotifications",{offset:this.notifications.length}).subscribe((e=>{this.isLoading=!1,this.notifications=this.notifications.concat(e.records.map((e=>this.parseNotification(e)))),this.unreadNotifications=this.notifications.filter((e=>1!=e.notification_read)),this.setUnreadCount()}),(()=>this.isLoading=!1))}pushNotification(e){e=this.parseNotification(e),this.notifications.unshift(e),this.unreadNotifications.unshift(e),this.pushDesktopNotification(e),this.preferences.toUse.showRealtimeNotifications&&this.displayRealtimeNotification(e),this.unreadCount++}displayRealtimeNotification(e,t=!0){this.newNotifications.push(e),this.pushDesktopNotification(e),t&&window.setTimeout((()=>this.clearTempNotification(e)),1e4)}clearTempNotification(e){this.newNotifications=this.newNotifications.filter((t=>t!=e))}pushDesktopNotification(e){if(!this.preferences.toUse.displayDesktopNotifications)return;const t=e?this.generateDesktopNotificationTitle(e):this.language.getLabel("MSG_NEW_NOTIFICATIONS");this.desktopNotifications.unshift(new Notification(this.configuration.systemName,{body:t,icon:"config/headerimage"}))}setUnreadCount(){this.unreadCount=this.unreadNotifications.length}setInitialValues(e){e&&Array.isArray(e.records)&&(this.totalCount=e.count,this.notifications=e.records.map((e=>this.parseNotification(e))),this.unreadNotifications=this.notifications.filter((e=>1!=e.notification_read)),this.setUnreadCount(),this.unreadCount>0&&this.pushDesktopNotification())}initializeSocket(){this.socket.initializeNamespace("notifications").subscribe((e=>this.handleSocketEvents(e))),this.socket.joinRoom("notifications",this.session.authData.userId)}generateDesktopNotificationTitle(e){switch(e.notification_type){case"reminder":return`${this.language.getLabel("LBL_REMINDER")} ${e.bean_name}\n${e.notification_date}`;case"assign":return`${this.language.getLabel("LBL_ASSIGNED")} ${e.bean_name} ${this.language.getLabel("LBL_BY")} ${e.created_by_name}`;case"change":return`${this.language.getLabel("LBL_CHANGED")} ${e.bean_name} ${this.language.getLabel("LBL_BY")} ${e.created_by_name}`;case"delete":return`${this.language.getLabel("LBL_DELETED")} ${e.bean_name} ${this.language.getLabel("LBL_BY")} ${e.created_by_name}`}}subscribeToBroadcast(){this.broadcast.message$.subscribe((e=>{"login"===e.messagetype&&this.initializeSocket(),"logout"===e.messagetype&&this.socket.disconnect("notifications")}))}handleSocketEvents(e){if("new"===e.type)e.data&&this.pushNotification(e.data)}parseNotification(e){const t=this.session.getSessionData("timezone")||moment.tz.guess(!0),s=`${this.preferences.getDateFormat()} ${this.preferences.getTimeFormat()}`;let i="string"==typeof t&&t.length>0?moment.utc(e.notification_date).tz(t):moment(e.notification_date);return e.notification_date=i.isValid()?i.format(s):null,e.additional_infos&&"string"==typeof e.additional_infos&&(e.additional_infos=JSON.parse(e.additional_infos)),e}}return notification.ɵfac=function(e){return new(e||notification)(i.LFG(n.y),i.LFG(l.f),i.LFG(o.C),i.LFG(a.z),i.LFG(d.d),i.LFG(r.H7),i.LFG(c.W),i.LFG(u.n))},notification.ɵprov=i.Yz7({token:notification,factory:notification.ɵfac}),notification})()},9637:(e,t,s)=>{"use strict";s.d(t,{g:()=>n});var i=s(1571);let n=(()=>{class popup{constructor(){this.closePopup$=new i.vpe}close(){this.closePopup$.emit(!0)}}return popup.ɵfac=function(e){return new(e||popup)},popup.ɵprov=i.Yz7({token:popup,factory:popup.ɵfac}),popup})()},382:(e,t,s)=>{"use strict";s.d(t,{h:()=>c});var i=s(9646),n=s(7579),l=s(1571),o=s(4505),a=s(3369),d=s(6625),r=s(5920);let c=(()=>{class recent{constructor(e,t,s,i){this.backend=e,this.broadcast=t,this.configuration=s,this.session=i,this.moduleItems={},this.broadcast.message$.subscribe((e=>this.handleMessage(e)))}get items(){let e=this.configuration.getData("recentitmes");return e||[]}handleMessage(e){switch(e.messagetype){case"model.save":let t=this.items.find((t=>t.module_name==e.messagedata.module&&t.item_id==e.messagedata.id));if(t&&(t.data=e.messagedata.data,t.item_summary=e.messagedata.data.summary_text),this.moduleItems[e.messagedata.module]){let t=this.moduleItems[e.messagedata.module].find((t=>t.module_name==e.messagedata.module&&t.item_id==e.messagedata.id));t&&(t.data=e.messagedata.data,t.item_summary=e.messagedata.data.summary_text)}break;case"model.delete":let s=this.items.findIndex((t=>t.module_name==e.messagedata.module&&t.item_id==e.messagedata.id));if(s&&this.items.splice(s,1),this.moduleItems[e.messagedata.module]){let t=this.moduleItems[e.messagedata.module].findIndex((t=>t.module_name==e.messagedata.module&&t.item_id==e.messagedata.id));t&&this.items.splice(t,1)}}}trackItem(e,t,s){for(this.items.some(((s,i)=>{if(s.module_name===e&&s.item_id==t)return this.items.splice(i,1),!0})),this.items.splice(0,0,{item_id:t,module_name:e,item_summary:s.summary_text,data:s});this.items.length>50;)this.items.pop();if(this.moduleItems[e])for(this.moduleItems[e].some(((s,i)=>{if(s.item_id==t)return this.moduleItems[e].splice(i,1),!0})),this.moduleItems[e].splice(0,0,{item_id:t,module_name:e,item_summary:s.summary_text,data:s});this.moduleItems[e].length>5;)this.moduleItems[e].pop()}getModuleRecent(e){if("Home"==e)return(0,i.of)(this.items.slice(0,5));if(this.moduleItems[e])return(0,i.of)(this.moduleItems[e]);{let t=new n.x;return this.moduleItems[e]||this.backend.getRequest("module/Trackers/recent",{module:e,limit:5}).subscribe((s=>{this.moduleItems[e]=[];for(let t of s)this.moduleItems[e].push(t);t.next(this.moduleItems[e]),t.complete()})),t.asObservable()}}}return recent.ɵfac=function(e){return new(e||recent)(l.LFG(o.y),l.LFG(a.f),l.LFG(d.C),l.LFG(r.n))},recent.ɵprov=l.Yz7({token:recent,factory:recent.ɵfac}),recent})()},6040:(e,t,s)=>{"use strict";s.d(t,{j:()=>m});var i=s(7579),n=s(9646),l=s(1571),o=s(4154),a=s(4505),d=s(3369),r=s(6163),c=s(3278),u=s(5329);let m=(()=>{class relatedmodels{constructor(e,t,s,i,n,l){this.metadata=e,this.backend=t,this.broadcast=s,this.modelutilities=i,this.toast=n,this.language=l,this.module="",this.id="",this.relatedModule="",this.linkName="",this.modulefilter="",this.fieldfilters={},this.items=[],this.offset=0,this.count=0,this.loaditems=5,this.isloading=!1,this.isonlyfiltered=!1,this.saveToLinkOnly=!1,this.sort={sortfield:"",sortdirection:"ASC"},this.lastLoad=new moment,this.sequencefield=null,this.serviceSubscriptions=[],this.serviceSubscriptions.push(this.broadcast.message$.subscribe((e=>{this.handleMessage(e)})))}ngOnDestroy(){this.stopSubscriptions()}stopSubscriptions(){for(let e of this.serviceSubscriptions)e.unsubscribe();this.serviceSubscriptions=[]}get sortfield(){return this.sort.sortfield}set sortfield(e){this.sort.sortfield==e?this.sort.sortdirection="ASC"==this.sort.sortdirection?"DESC":"ASC":(this.sort.sortfield=e,this.sort.sortdirection="ASC"),this.getData()}get _linkName(){return""!=this.linkName?this.linkName:this.relatedModule.toLowerCase()}get sortBySequencefield(){return this.sequencefield&&!this.modulefilter&&!this.sort.sortfield}handleMessage(e){if(-1!==e.messagetype.indexOf("model")&&e.messagedata.module===this.relatedModule)switch(e.messagetype){case"model.delete":this.items.some(((t,s)=>{if(t.id===e.messagedata.id)return this.items.splice(s,1),this.count--,!0}));break;case"model.save":let t=!1;for(let s of this.items)if(s.id===e.messagedata.id){for(let t in s)s.hasOwnProperty(t)&&e.messagedata.data.hasOwnProperty(t)&&(s[t]=e.messagedata.data[t]);t=!0,this.sortItems()}!t||this.modulefilter?this.getData(!0):this.sortItems()}}getLastLoadTime(){return this.lastLoad.format("HH:mm")}getData(e=!1){let t=new i.x;if(!1===this.metadata.checkModuleAcl(this.relatedModule,"list")&&!1===this.metadata.checkModuleAcl(this.relatedModule,"listrelated"))return(0,n.of)(!1);e||(this.resetData(),this.isloading=!0);let s={module:this.relatedModule,getcount:!0,offset:this.offset,limit:this.loaditems,fieldfilters:this.fieldfilters};this.modulefilter&&(s.modulefilter=this.modulefilter),this.sort.sortfield&&(s.sort=JSON.stringify(this.sort));let l=`module/${this.module}/${this.id}/`+(this.linkEndPoint?this.linkEndPoint:`related/${this._linkName}`);return this.backend.getRequest(l,s).subscribe((e=>{this.items=[],this.count=parseInt(e.count,10);for(let t in e.list)e.list.hasOwnProperty(t)&&(e.list[t].relid=t,e.list[t]=this.modelutilities.backendModel2spice(this.relatedModule,e.list[t]),this.items.push(e.list[t]));this.isloading=!1,this.sortItems(),this.lastLoad=new moment,t.next(!0),t.complete()}),(()=>{this.isloading=!1})),t.asObservable()}get canloadmore(){return!this.isloading&&this.count&&this.count-this.items.length>0}getMoreData(e=5){if(!1===this.metadata.checkModuleAcl(this.relatedModule,"list"))return(0,n.of)(!0);this.isloading=!0;let t={module:this.relatedModule,getcount:!0,offset:this.items.length,limit:this.items.length+e};this.modulefilter&&(t.modulefilter=this.modulefilter),this.sort.sortfield&&(t.sort=JSON.stringify(this.sort));let s=new i.x,l=`module/${this.module}/${this.id}/`+(this.linkEndPoint?this.linkEndPoint:`related/${this._linkName}`);return this.backend.getRequest(l,t).subscribe((e=>{this.count=parseInt(e.count,10);for(let t in e.list)e.list.hasOwnProperty(t)&&(e.list[t].relid=t,e.list[t]=this.modelutilities.backendModel2spice(this.relatedModule,e.list[t]),this.items.push(e.list[t]));this.sortItems(),this.lastLoad=new moment,this.isloading=!1,s.next(!0),s.complete()})),s.asObservable()}sortItems(){let e,t;this.sort.sortfield?(e=this.sort.sortfield,t=this.sort.sortdirection):this.sortBySequencefield&&(e=this.sequencefield,t="ASC"),e&&this.items.sort(((s,i)=>{let n;return n=isNaN(parseInt(s[e],10))||isNaN(parseInt(i[e],10))?s[e]>i[e]?1:-1:parseInt(s[e],10)>parseInt(i[e],10)?1:-1,"ASC"==t?n:-1*n}))}resetData(){this.items=[]}addItems(e){let t=new i.x;if(this.saveToLinkOnly)return this.model.addRelatedRecords(this._linkName,e),this.items=this.items.concat(e),this.count=this.count+e.length,(0,n.of)(!1);let s=[];for(let t of e)s.push(t.id);return this.backend.postRequest("module/"+this.module+"/"+this.id+"/related/"+this._linkName,[],s).subscribe((()=>{for(let t of e){let e=!1;this.items.some((s=>{if(s.id==t.id)return e=!0,!0})),e||(this.items.push(t),this.count++)}t.next(!0),t.complete()}),(()=>{t.error("error adding items")})),t.asObservable()}setItem(e){if(this.isonlyfiltered)return this.toast.sendToast(this.language.getLabel("LBL_NOT_POSSIBLE_TO_SET"),"error"),(0,n.of)(!0);{let t=new i.x;return this.backend.putRequest("module/"+this.module+"/"+this.id+"/related/"+this._linkName,[],this.modelutilities.spiceModel2backend(this.relatedModule,e)).subscribe((()=>{t.next(!0),t.complete()}),(e=>{t.error(e),t.complete()})),t.asObservable()}}updateItems(e){if(this.isonlyfiltered)return this.toast.sendToast(this.language.getLabel("LBL_NOT_POSSIBLE_TO_SET"),"error"),(0,n.of)(!0);{const t=new i.x;return e=e.map((e=>this.modelutilities.spiceModel2backend(this.relatedModule,e))),this.backend.putRequest(`module/${this.module}/${this.id}/related/beans/${this._linkName}`,[],{beans:e}).subscribe((()=>{t.next(!0),t.complete()}),(e=>{t.error(e),t.complete()})),t.asObservable()}}deleteItem(e){if(this.isonlyfiltered)this.toast.sendToast(this.language.getLabel("LBL_NOT_POSSIBLE_TO_SET"),"error");else{let t=[];t.push(e);let s={relatedids:t};this.backend.deleteRequest("module/"+this.module+"/"+this.id+"/related/"+this._linkName,s).subscribe((()=>{this.items.some(((t,s)=>{if(t.id==e)return this.items.splice(s,1),this.count--,!0}))}))}}}return relatedmodels.ɵfac=function(e){return new(e||relatedmodels)(l.LFG(o.Pu),l.LFG(a.y),l.LFG(d.f),l.LFG(r.A),l.LFG(c.A),l.LFG(u.d))},relatedmodels.ɵprov=l.Yz7({token:relatedmodels,factory:relatedmodels.ɵfac}),relatedmodels})()},2057:(e,t,s)=>{"use strict";s.d(t,{U:()=>c});var i=s(1571),n=s(7579),l=s(4505),o=s(3369),a=s(6625),d=s(5920),r=s(6163);let c=(()=>{class reminder{constructor(e,t,s,n,l){this.backend=e,this.broadcast=t,this.configuration=s,this.session=n,this.modelutilities=l,this.reminders=[],this.loaded=!1,this.changed$=new i.vpe,this.broadcast.message$.subscribe((e=>this.handleMessage(e)))}handleMessage(e){switch(e.messagetype){case"loader.completed":if("loadUserDataStep2"==e.messagedata){this.reminders=[];for(let e of this.configuration.getData("reminders"))e.reminder_date=moment.utc(e.reminder_date),this.reminders.push(e);this.loaded=!0,this.changed$.emit(!0)}break;case"model.save":let t=this.reminders.findIndex((t=>t.module_name==e.messagedata.module&&t.item_id==e.messagedata.id));if(t>=0)return this.reminders[t].item_summary=e.messagedata.data.summary_text,this.reminders[t].data=e.messagedata.data,!0}}getReminder(e,t){let s=!1;return this.reminders.some((i=>{if(i.module_name===e&&i.item_id===t)return s=i.reminder_date,!0})),s}getReminders(e){let t=[];for(let s of this.reminders)s.module_name===e&&t.push({item_id:s.item_id,item_summary:s.item_summary});return t}setReminder(e,t){this.backend.postRequest("common/spicereminders/"+e.module+"/"+e.id+"/"+t.format("YYYY-MM-DD")).subscribe((s=>{let i=this.reminders.findIndex((t=>t.item_id==e.id&&t.module_name==e.module));i>=0?(this.reminders[i].reminder_date=t,this.reminders[i].data=e.backendData):this.reminders.splice(0,0,{item_id:e.id,module_name:e.module,item_summary:e.data.summary_text,reminder_date:t,data:e.backendData}),this.changed$.emit(!0)}))}deleteReminder(e,t){let s=new n.x;return this.backend.deleteRequest("common/spicereminders/"+e+"/"+t).subscribe((i=>{this.reminders.some(((s,i)=>{if(s.module_name===e&&s.item_id===t)return this.reminders.splice(i,1),!0})),s.next(!0),s.complete(),this.changed$.emit(!0)})),s.asObservable()}}return reminder.ɵfac=function(e){return new(e||reminder)(i.LFG(l.y),i.LFG(o.f),i.LFG(a.C),i.LFG(d.n),i.LFG(r.A))},reminder.ɵprov=i.Yz7({token:reminder,factory:reminder.ɵfac}),reminder})()},5920:(e,t,s)=>{"use strict";s.d(t,{n:()=>a});var i=s(529),n=s(1571),l=s(2349),o=s(3369);let a=(()=>{class session{constructor(e,t){this.logger=e,this.broadcast=t,this.authData={tenant_wizard_completed:!1,tenant_accepted_legal_notice:!1,sessionId:null,loaded:!1,userId:null,userName:"",email:"",admin:!1,dev:!1,portalOnly:!1,googleToken:"",companycode_id:"",tenant_id:"",tenant_name:"",obtainGDPRconsent:!1,canchangepassword:!1,expiringPasswordValidityDays:!1,user:{}},this.sessionData={},this.developerMode=!1,this.logger.setSession(this)}getSessionHeader(){let e=new i.WM;return e=e.set("OAuth-Token",this.authData.sessionId),e=e.set("OAuth-Issuer","SpiceCRM"),this.developerMode&&(e=e.set("developermode","1")),e}setSessionData(e,t,s=!0){this.sessionData[e]=t,s&&sessionStorage.setItem(window.btoa(e+this.authData.sessionId),window.btoa(encodeURIComponent(JSON.stringify(t))))}clearSessionData(e){sessionStorage.removeItem(e)}getSessionData(e,t=!0){if(this.sessionData[e])return this.sessionData[e];try{return JSON.parse(decodeURIComponent(window.atob(sessionStorage.getItem(window.btoa(e+this.authData.sessionId)))))}catch(e){return!!t&&{}}}existsData(e){try{return sessionStorage[window.btoa(e+this.authData.sessionId)]&&sessionStorage[window.btoa(e+this.authData.sessionId)].length>0}catch(e){return!1}}endSession(){this.authData.tenant_id="",this.authData.tenant_name="",this.authData.tenant_accepted_legal_notice=!1,this.authData.tenant_wizard_completed=!1,this.authData.sessionId=null,this.authData.userId=null,this.authData.loaded=!1,this.authData.userName="",this.authData.email="",this.authData.admin=!1,this.authData.dev=!1,this.authData.companycode_id="",this.authData.tenant_id="",this.authData.tenant_name="",this.authData.obtainGDPRconsent=!1,this.authData.canchangepassword=!1,this.authData.expiringPasswordValidityDays=!1,this.authData.user={},this.sessionData={},sessionStorage.clear()}get isAdmin(){return this.authData.admin}get isDev(){return this.authData.dev}setTimezone(e){this.getSessionData("timezone")!==e&&(this.setSessionData("timezone",e,!1),moment.tz.setDefault(e),this.broadcast.broadcastMessage("timezone.changed",e))}}return session.ɵfac=function(e){return new(e||session)(n.LFG(l.M),n.LFG(o.f))},session.ɵprov=n.Yz7({token:session,factory:session.ɵfac}),session})()},2222:(e,t,s)=>{"use strict";s.d(t,{W:()=>r});var i=s(9646),n=s(7579),l=s(1571),o=s(6625),a=s(3369),d=s(5920);let r=(()=>{class socket{constructor(e,t,s){this.configuration=e,this.broadcast=t,this.session=s,this.sockets={}}socketObject(e){return this.sockets[e]}get connected(){return!_.isEmpty(this.sockets)}disconnect(e){this.sockets[e]&&(this.sockets[e].instance.disconnect(),this.sockets[e].instance.destroy(),delete this.sockets[e])}initializeNamespace(e){return this.sockets[e]?this.sockets[e].event$:(this.setSocketData(),this.socketUrl&&this.socketId?(this.sockets[e]=this.initializeSocket(e),this.sockets[e].event$):(0,i.of)({type:null,data:null}))}joinRoom(e,t){e&&t&&this.sockets[e]&&(t in this.sockets[e].rooms?this.sockets[e].rooms[t]++:(this.sockets[e].instance.emit("join:room",t),this.sockets[e].rooms[t]=1))}leaveRoom(e,t){e&&t&&this.sockets[e]&&this.sockets[e].rooms[t]&&(this.sockets[e].rooms[t]--,this.sockets[e].rooms[t]<1&&(this.sockets[e].instance.emit("leave:room",t),delete this.sockets[e].rooms[t]))}setSocketData(){let e=this.configuration.getCapabilityConfig("socket");this.socketUrl=e.socket_frontend,this.socketId=e.socket_id}initializeSocket(e){const t=new n.x,s=e?`/ns-${e}`:"/",i=io(this.socketUrl+s,{query:{token:this.session.authData.sessionId,sysId:this.socketId}});return i.on("connect",(()=>this.handleConnectEvent(e,t))),i.onAny(((e,s)=>{s.token!=this.session.authData.sessionId&&this.handleCustomEvent(t,e,s.data)})),{instance:i,isConnected:()=>i.connected,event$:t.asObservable(),rooms:{}}}handleConnectEvent(e,t){this.sockets[e]?.rooms&&Object.keys(this.sockets[e].rooms).forEach((t=>{this.sockets[e].rooms[t]<1||this.sockets[e].instance.emit("join:room",t)}))}handleCustomEvent(e,t,s){e.next({type:t,data:s})}}return socket.ɵfac=function(e){return new(e||socket)(l.LFG(o.C),l.LFG(a.f),l.LFG(d.n))},socket.ɵprov=l.Yz7({token:socket,factory:socket.ɵfac}),socket})()},2355:(e,t,s)=>{"use strict";s.d(t,{J:()=>m});var i=s(7579),n=s(1571),l=s(4505),o=s(3369),a=s(6625),d=s(3278),r=s(5920),c=s(4154),u=s(5329);let m=(()=>{class subscription{constructor(e,t,s,i,n,l,o){this.backend=e,this.broadcast=t,this.configuration=s,this.toast=i,this.session=n,this.metadata=l,this.language=o,this._subscriptions={},this.loadSubscriptions()}get subscriptions(){return Object.keys(this._subscriptions).map((e=>this._subscriptions[e]))}hasSubscription(e){return this._subscriptions?.[e]}subscribeBean(e){let t=new i.x;return this.backend.postRequest(`common/SpiceSubscriptions/${e.module}/${e.id}`).subscribe((()=>{this._subscriptions[e.id]={bean_id:e.id,bean_module:e.module,user_id:this.session.authData.userId,data:e.backendData},t.next(!0),t.complete()}),(()=>{this.toast.sendToast(this.language.getLabel("MSG_FAILED_TO_SUBSCRIBE"),"error"),t.error("subscribe failed"),t.complete()})),t.asObservable()}unsubscribeBean(e,t){let s=new i.x;return this.backend.deleteRequest(`common/SpiceSubscriptions/${t}/${e}`).subscribe((()=>{delete this._subscriptions[e],s.next(!0),s.complete()}),(()=>{this.toast.sendToast(this.language.getLabel("MSG_FAILED_TO_UNSUBSCRIBE"),"error"),s.error("subscribe failed"),s.complete()})),s.asObservable()}loadSubscriptions(){this._subscriptions=this.configuration.getData("spicesubscriptions"),this.broadcast.message$.subscribe((e=>{"loader.completed"===e.messagetype&&"loadUserData"===e.messagedata&&(this._subscriptions=this.configuration.getData("spicesubscriptions"))}))}}return subscription.ɵfac=function(e){return new(e||subscription)(n.LFG(l.y),n.LFG(o.f),n.LFG(a.C),n.LFG(d.A),n.LFG(r.n),n.LFG(c.Pu),n.LFG(u.d))},subscription.ɵprov=n.Yz7({token:subscription,factory:subscription.ɵfac}),subscription})()},2251:(e,t,s)=>{"use strict";s.d(t,{n:()=>l});var i=s(1571),n=s(3369);let l=(()=>{class telephony{constructor(e){this.broadcast=e,this.isActive=!1,this.calls=[],this.initiateCall$=new i.vpe,this.terminateCall$=new i.vpe,this.actions={hangup:!1,transfer:!1},this.broadcast.message$.subscribe((e=>this.handleLogout(e)))}handleLogout(e){"logout"==e.messagetype&&(this.calls=[],this.isActive=!1)}initiateCall(e,t){this.initiateCall$.emit({msisdn:e,relatedid:t.relatedid,relatedmodule:t.relatedmodule,relateddata:t.relateddata})}terminateCall(e){let t=this.calls.find((t=>t.id==e||t.callid==e));t&&this.terminateCall$.emit(t)}removeCallById(e){let t=this.calls.findIndex((t=>t.id==e||t.callid==e));t>=0&&this.calls.splice(t,1)}}return telephony.ɵfac=function(e){return new(e||telephony)(i.LFG(n.f))},telephony.ɵprov=i.Yz7({token:telephony,factory:telephony.ɵfac}),telephony})()},5385:(e,t,s)=>{"use strict";s.d(t,{b:()=>d});var i=s(1571),n=s(4505),l=s(4154),o=s(6625),a=s(5920);let d=(()=>{class territories{constructor(e,t,s,i){this.backend=e,this.metadata=t,this.configurationService=s,this.session=i,this.addTerritories={}}checkModuleManaged(e){return!!this.getModuleParamaters(e)}getModuleParamaters(e){let t=this.configurationService.getData("aclterritorymoduletypes");if(t){return t.find((t=>t.module==e))}return!1}get userTerritories(){return this.configurationService.getData("aclterritoryuserterritories")}getRecentTerritories(e,t=5,s){let i=this.userTerritories;if(s&&!this.session.isAdmin){let n=i[e]&&i[e].length>0?i[e].filter((e=>-1!=e.actions.indexOf(s))):[];return n&&n.length>0?n.slice(0,t):[]}return i[e]&&i[e].length>0?i[e].slice(0,t):[]}loadTerritoryName(e){this.addTerritories[e]="...",this.backend.getRequest("module/SpiceACLTerritories/"+e).subscribe((t=>{t.id===e?this.addTerritories[e]=t.name:this.addTerritories[e]="error"}))}searchTerritories(e,t,s=5,i=[],n){let l=[];for(let o of this.userTerritories[e])if(o.name.toLowerCase().indexOf(t.toLowerCase())>=0&&i.indexOf(o.id)<0&&(this.session.isAdmin||!n||n&&-1!=o.actions.indexOf(n))&&l.push(o),l.length>=s)return l;return l}isUserTerritory(e,t){let s=!1;return this.userTerritories[e].some((e=>{if(e.id===t)return s=!0,!0})),s}getTerritoryName(e,t){let s="";return this.userTerritories[e].some((e=>{if(e.id===t)return s=e.name,!0})),""===s&&(this.addTerritories[t]||this.loadTerritoryName(t),s=this.addTerritories[t]),s}}return territories.ɵfac=function(e){return new(e||territories)(i.LFG(n.y),i.LFG(l.Pu),i.LFG(o.C),i.LFG(a.n))},territories.ɵprov=i.Yz7({token:territories,factory:territories.ɵfac}),territories})()},3278:(e,t,s)=>{"use strict";s.d(t,{A:()=>l});var i=s(1571),n=s(6163);let l=(()=>{class toast{constructor(e,t){this.modelutilities=e,this.appref=t,this.activeToasts=[]}sendToast(e,t="default",s="",i=!0,n){return this.addToast(e,"toast",t,s,i,n)}sendAlert(e,t="default",s="",i=!0,n){return this.addToast(e,"alert",t,s,i,n)}addToast(e,t="toast",s="default",i="",n=!0,l){if(l&&this.activeToasts.filter((e=>e.code==l)).length>0)return"";"error"===s&&(n=!1),!0===n&&(n=5);let o=this.modelutilities.generateGuid();return this.activeToasts.push({id:o,type:s,theme:t,text:e,description:i,code:l}),this.appref.tick(),n&&window.setTimeout((()=>this.clearToast(o)),1e3*n),o}clearToast(e){e&&this.activeToasts.some(((t,s)=>{if(t.id===e)return this.activeToasts.splice(s,1),this.appref.tick(),!0}))}clearAll(){this.activeToasts=[],this.appref.tick()}}return toast.ɵfac=function(e){return new(e||toast)(i.LFG(n.A),i.LFG(i.z2F))},toast.ɵprov=i.Yz7({token:toast,factory:toast.ɵfac}),toast})()},2422:(e,t,s)=>{"use strict";s.d(t,{z:()=>g});var i=s(1571),n=s(9646),l=s(7579),o=s(4505),a=s(3278),d=s(6625),r=s(5329),c=s(3369),u=s(4044),m=s(5920),h=s(4154);let g=(()=>{class userpreferences{constructor(e,t,s,n,l,o,a,d){this.backend=e,this.toast=t,this.configuration=s,this.language=n,this.broadcast=l,this.modalservice=o,this.session=a,this.metadata=d,this.preferences={global:{}},this.unchangedPreferences={global:{}},this.preferencesComplete=!0,this.defaults={currency:-99,datef:"d.m.Y",dec_sep:",",num_grp_sep:".",timef:"H:i",timezone:"Europe/Vienna",default_currency_significant_digits:2,default_locale_name_format:"l, f",week_day_start:0,navigation_paradigm:"subtabbed",distance_unit_system:"METRIC"},this.formats={nameFormats:[],loaded:!1},this.preferences$=new i.vpe,this.toUse=this.preferences.global,this.broadcast.message$.subscribe((e=>{"loader.completed"===e.messagetype&&"loadUserData"===e.messagedata&&this.retrievePrefsFromConfigService()}))}retrievePrefsFromConfigService(){let e=this.configuration.getData("globaluserpreferences");this.preferences.global=_.extendOwn(this.preferences.global,e),this.unchangedPreferences.global=_.clone(e),this.defaults=_.extendOwn(this.defaults,this.configuration.getData("defaultuserpreferences")),this.askForMissingPreferences(),this.completePreferencesWithDefaults(),this.session.setTimezone(this.toUse.timezone),this.preferences.global.userrole&&this.metadata.setActiveRole(this.preferences.global.userrole)}getPreferences(e){this.loadPreferences().subscribe((t=>{e.next("getPreferences")}))}loadPreferences(e="global"){return(0,n.of)(this.configuration.getData("globaluserpreferences"))}completePreferencesWithDefaults(){let e=!1;_.each(this.defaults,((t,s)=>{"string"==typeof this.preferences.global[s]?this.preferences.global[s]||(this.preferences.global[s]=t,e=!0):void 0!==this.preferences.global[s]&&null!==this.preferences.global[s]||(this.preferences.global[s]=t,e=!0)})),this.preferencesComplete=!e}getPreference(e,t="global"){try{return this.preferences[t][e]}catch(e){return!1}}setPreference(e,t,s=!0,i="global"){if(s){let s={};s[e]=t;const n=new l.x;return this.backend.postRequest("module/Users/"+this.session.authData.userId+"/preferences/"+i,{},s).subscribe((l=>{this.preferences[i]||(this.preferences[i]={}),this.preferences[i][e]=t,this.unchangedPreferences[i]||(this.unchangedPreferences[i]={}),this.unchangedPreferences[i][e]=t,this.completePreferencesWithDefaults(),"global"===i&&"timezone"===e&&this.session.setTimezone(this.toUse.timezone),n.next(l),this.preferences$.emit(s)}),(e=>{n.error(e)})),n}return this.preferences[i]||(this.preferences[i]={}),this.preferences[i][e]=t,this.completePreferencesWithDefaults(),"global"===i&&"timezone"===e&&this.session.setTimezone(this.toUse.timezone),null}setPreferences(e,t="global"){const s=new l.x;return this.backend.postRequest("module/Users/"+this.session.authData.userId+"/preferences/"+t,{},e).subscribe((i=>{for(let e in this.preferences[t])i.hasOwnProperty(e)?this.preferences[t][e]=i[e]:delete this.preferences[t][e];this.unchangedPreferences[t]=i,this.completePreferencesWithDefaults(),this.session.setTimezone(this.toUse.timezone),s.next(!0),this.preferences$.emit(e)}),(e=>{s.error(e)})),s}getDateFormat(){if(this.toUse.datef){let e=this.toUse.datef;return this.jsDateFormat2momentDateFormat(e)}return"YYYY-MM-DD"}jsDateFormat2momentDateFormat(e){return e.replace("Y","YYYY").replace("m","MM").replace("d","DD")}getTimeFormat(){if(this.toUse.timef){let e=this.toUse.timef;return this.jsTimeFormat2momentTimeFormat(e)}return"hh:mm"}jsTimeFormat2momentTimeFormat(e){return e.replace("H","HH").replace("h","hh").replace("i","mm")}needFormats(){this.formats.loaded||this.loadFormats()}loadFormats(){let e=new l.x;return this.formats.nameFormats.length=0,this.formats.loaded=!1,this.backend.getRequest("module/Users/preferencesformats").subscribe((t=>{if(Array.isArray(t.nameFormats))for(let e of t.nameFormats)this.formats.nameFormats.push({name:e,example:this.translateNameFormat(e)});this.formats.loaded=!0,e.next(!0)})),e.asObservable()}translateNameFormat(e){let t="";for(let s=0;s<e.length;s++)switch(e.charAt(s)){case"t":t+=this.language.getLabel("LBL_LOCALE_NAME_EXAMPLE_TITLE");break;case"f":t+=this.language.getLabel("LBL_LOCALE_NAME_EXAMPLE_FIRST");break;case"l":t+=this.language.getLabel("LBL_LOCALE_NAME_EXAMPLE_LAST");break;case"s":t+=this.language.getLabel("LBL_LOCALE_NAME_EXAMPLE_SALUTATION");break;default:t+=e.charAt(s)}return t}formatMoney(e,t=this.toUse.default_currency_significant_digits,s=3,i=this.toUse.num_grp_sep,n=this.toUse.dec_sep){let l="\\d(?=(\\d{"+s+"})+"+(t>0?"\\D":"$")+")";return e.toFixed(Math.max(0,~~t)).replace(".",n).replace(new RegExp(l,"g"),"$&"+i)}formatDate(e){if(moment.isMoment(e))return e.format(this.getDateFormat());let t=moment(e);return t.isValid()?t.format(this.getDateFormat()):e}formatDateTime(e){return moment.isMoment(e)?e.format(this.getDateFormat())+" "+e.format(this.getTimeFormat()):moment.utc(e).format(this.getDateFormat())+" "+moment.utc(e).format(this.getTimeFormat())}askForMissingPreferences(){let e=this.getNamesOfMissingImportantPrefs(),t=0;if(this.unchangedPreferences.global&&this.unchangedPreferences.global.timezone){let e=moment.tz(moment.tz.guess()).utcOffset(),s=moment.tz(this.unchangedPreferences.global.timezone).utcOffset();e!==s&&(t=(e*s<0?Math.abs(e)+Math.abs(s):Math.abs(e-s))/60)}0===e.length&&0===t||this.modalservice.openModal("GlobalObtainImportantPreferences").subscribe((s=>{s.instance.namesOfMissingPrefs=e,s.instance.timeshift=t}))}getNamesOfMissingImportantPrefs(){let e=[];for(let t of["timezone","datef","timef"])this.unchangedPreferences.global[t]||e.push(t);return e}getPossibleDateFormats(){return[{name:moment().format(this.jsDateFormat2momentDateFormat("Y-m-d")),value:"Y-m-d"},{name:moment().format(this.jsDateFormat2momentDateFormat("m-d-Y")),value:"m-d-Y"},{name:moment().format(this.jsDateFormat2momentDateFormat("d-m-Y")),value:"d-m-Y"},{name:moment().format(this.jsDateFormat2momentDateFormat("Y/m/d")),value:"Y/m/d"},{name:moment().format(this.jsDateFormat2momentDateFormat("m/d/Y")),value:"m/d/Y"},{name:moment().format(this.jsDateFormat2momentDateFormat("d/m/Y")),value:"d/m/Y"},{name:moment().format(this.jsDateFormat2momentDateFormat("Y.m.d")),value:"Y.m.d"},{name:moment().format(this.jsDateFormat2momentDateFormat("d.m.Y")),value:"d.m.Y"},{name:moment().format(this.jsDateFormat2momentDateFormat("m.d.Y")),value:"m.d.Y"}]}getPossibleTimeFormats(){return[{name:moment().format(this.jsTimeFormat2momentTimeFormat("H:i")),value:"H:i"},{name:moment().format(this.jsTimeFormat2momentTimeFormat("h:ia")),value:"h:ia"},{name:moment().format(this.jsTimeFormat2momentTimeFormat("h:iA")),value:"h:iA"},{name:moment().format(this.jsTimeFormat2momentTimeFormat("h:i a")),value:"h:i a"},{name:moment().format(this.jsTimeFormat2momentTimeFormat("h:i A")),value:"h:i A"},{name:moment().format(this.jsTimeFormat2momentTimeFormat("H.i")),value:"H.i"},{name:moment().format(this.jsTimeFormat2momentTimeFormat("h.ia")),value:"h.ia"},{name:moment().format(this.jsTimeFormat2momentTimeFormat("h.iA")),value:"h.iA"},{name:moment().format(this.jsTimeFormat2momentTimeFormat("h.i a")),value:"h.i a"},{name:moment().format(this.jsTimeFormat2momentTimeFormat("h.i A")),value:"h.i A"}]}get companyCodeId(){return this.session.authData.companycode_id}}return userpreferences.ɵfac=function(e){return new(e||userpreferences)(i.LFG(o.y),i.LFG(a.A),i.LFG(d.C),i.LFG(r.d),i.LFG(c.f),i.LFG(u.o),i.LFG(m.n),i.LFG(h.Pu))},userpreferences.ɵprov=i.Yz7({token:userpreferences,factory:userpreferences.ɵfac}),userpreferences})()},2294:(e,t,s)=>{"use strict";s.d(t,{e:()=>a});var i=s(1135),n=s(1571),l=s(5710),o=s(6559);let a=(()=>{class view{constructor(e,t){this.model=e,this.layout=t,this.mode="view",this.isEditable=!1,this.displayLinks=!0,this.displayLabels=!0,this.editfieldid="",this.editfieldname="",this.labels="default",this._size="regular",this.linkedToModel=!1,this.isLoading=!1,this.mode$=new i.X(this.mode),this.model&&this.model.mode$.subscribe((e=>{this.linkedToModel&&"display"==e&&this.setViewMode()}))}set size(e){this._size=e}get size(){return"small"==this.layout.screenwidth?"small":this._size}getMode(){return this.mode}isEditMode(){return"edit"===this.mode}setEditMode(e=""){this.mode="edit",this.editfieldid=e,this.mode$.next(this.mode)}setViewMode(){this.mode="view",this.mode$.next(this.mode)}}return view.ɵfac=function(e){return new(e||view)(n.LFG(l.o,8),n.LFG(o.b))},view.ɵprov=n.Yz7({token:view,factory:view.ɵfac}),view})()},3101:(e,t,s)=>{"use strict";var i=s(1481),n=s(8746),l=s(3629),o=s(1571),a=s(433),d=s(7774),r=s(529),c=s(6895),u=s(5478),m=s(3283),h=s(4518),g=s(2349),p=s(6625),f=s(3441),b=s(4461),_=s(2355),y=s(3298),v=s(5920),x=s(4154),Z=s(5322),w=s(5329),T=s(382),C=s(2422),A=s(2487),k=s(4411),L=s(3369),M=s(788),S=s(4505),I=s(2032),O=s(6163),J=s(3278),N=s(4376),F=s(2057),q=s(5385),E=s(5547),Y=s(3917),Q=s(5504),U=s(4044),D=s(6559),j=s(2067),R=s(2251),B=s(2222),G=s(5289),P=s(512),H=s(48),z=s(1767),V=s(8070),K=s(661);moment.defaultFormat="YYYY-MM-DD HH:mm:ss";const $=document.querySelector('meta[name="bootstrap"]')?.content;let X=(()=>{class SpiceUI{constructor(e){this.render=e,this.render.listen("window","dragover",(e=>{e.preventDefault(),e.dataTransfer.effectAllowed="none",e.dataTransfer.dropEffect="none"})),this.render.listen("window","drop",(e=>{e.preventDefault()}))}get outletstyle(){return{"margin-top":(this.globalHeader?this.globalHeader.headerHeight:0)+"px"}}}return SpiceUI.ɵfac=function(e){return new(e||SpiceUI)(o.Y36(o.Qsj))},SpiceUI.ɵcmp=o.Xpm({type:SpiceUI,selectors:[["spicecrm"]],viewQuery:function(e,t){if(1&e&&o.Gf(H.e,5),2&e){let e;o.iGM(e=o.CRH())&&(t.globalHeader=e.first)}},decls:5,vars:1,consts:[[3,"ngStyle"]],template:function(e,t){1&e&&(o._UZ(0,"global-header"),o.TgZ(1,"div",0),o._UZ(2,"router-outlet")(3,"system-navigation-manager"),o.qZA(),o._UZ(4,"global-footer")),2&e&&(o.xp6(1),o.Q6J("ngStyle",t.outletstyle))},dependencies:[c.PC,V.M,H.e,K.T,d.lC],encapsulation:2}),SpiceUI})(),W=(()=>{class SpiceUIModule{constructor(e,t,s){this.socket=e,this.assistant=t,this.reminder=s}ngDoBootstrap(e){let t=X;e.bootstrap(t)}}return SpiceUIModule.ɵfac=function(e){return new(e||SpiceUIModule)(o.LFG(B.W),o.LFG(Q.R),o.LFG(F.U))},SpiceUIModule.ɵmod=o.oAB({type:SpiceUIModule}),SpiceUIModule.ɵinj=o.cJS({providers:[x.en,Q.R,S.y,L.f,I.H,p.C,E.A,M.m,N.G,Y.M,A.Q,f._,w.d,D.b,j.$,k._,{provide:c.S$,useClass:c.Do},g.M,b.q,b.j,Z.Y,x.Pu,U.o,O.A,x.bi,I.G,T.h,F.U,v.n,B.W,R.n,q.b,i.Dx,g.M,j.$,J.A,C.z,y.t,_.J],imports:[i.b2,n.PW,r.JF,a.u5,u.SystemComponents,m.GlobalComponents,h.ObjectComponents,z.SpiceInstallerModule,d.Bz.forRoot([{path:"login",component:G.s},{path:"",redirectTo:"/module/Home",pathMatch:"full"},{path:"**",component:P.Y,canActivate:[b.q]}])]}),SpiceUIModule})();("undefined"==typeof ngJitMode||ngJitMode)&&o.kYT(W,{declarations:[X],imports:[i.b2,n.PW,r.JF,a.u5,u.SystemComponents,m.GlobalComponents,h.ObjectComponents,z.SpiceInstallerModule,d.Bz]}),l.N.production&&((0,o.G48)(),console.log("production mode enabled")),document.documentMode?(document.getElementsByClassName("loaderspinner")[0].setAttribute("style","display:none"),document.getElementById("loadstatus").innerHTML="",document.getElementById("loadermessage").innerHTML="Internet Explorer is not supported. Please use a supported Browser like Chrome, Safari, Edge, etc."):(document.getElementById("loadstatus").innerHTML="...preparing..","outlook"==$?window.Office.onReady().then((()=>{i.q6().bootstrapModule(W).catch((e=>console.error(e)))})):i.q6().bootstrapModule(W).catch((e=>console.error(e)))),window.name="SpiceCRM",(()=>{if(window.hasOwnProperty("BroadcastChannel")){let e=new BroadcastChannel("spiceCRM_channel");e.onmessage=t=>{t.data.url&&t.data.url.startsWith(window.location.origin+window.location.pathname)&&(window.location=t.data.url,e.postMessage({urlReceived:!0}))}}})()},6010:(e,t,s)=>{"use strict";s.d(t,{L:()=>u,s:()=>m});var i=s(1571),n=s(6895),l=s(4610),o=s(2656),a=s(3463);function d(e,t){if(1&e&&(i.ynx(0),i._uU(1),i._UZ(2,"system-label",10),i.BQk()),2&e){const e=i.oxw(2);i.xp6(1),i.hij("",e.page," ")}}function r(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"div")(1,"span",3)(2,"button",4),i.NdJ("click",(function(){i.CHM(e);const t=i.oxw();return i.KtG(t.page=1)})),i._UZ(3,"system-button-custom-icon",5),i.qZA(),i.TgZ(4,"button",6),i.NdJ("click",(function(){i.CHM(e);const t=i.oxw();return i.KtG(t.pageDown())})),i._UZ(5,"system-button-icon",7),i.qZA()(),i.TgZ(6,"span"),i.YNc(7,d,3,1,"ng-container",8),i._uU(8),i._UZ(9,"system-label",9),i._uU(10),i._UZ(11,"system-label",10),i._uU(12),i._UZ(13,"system-label",11),i._uU(14,")"),i.qZA(),i.TgZ(15,"span",12)(16,"button",13),i.NdJ("click",(function(){i.CHM(e);const t=i.oxw();return i.KtG(t.pageUp())})),i._UZ(17,"system-button-icon",7),i.qZA(),i.TgZ(18,"button",4),i.NdJ("click",(function(){i.CHM(e);const t=i.oxw();return i.KtG(t.page=t.max_page)})),i._UZ(19,"system-button-custom-icon",14),i.qZA()()()}if(2&e){const e=i.oxw();i.xp6(2),i.Q6J("disabled",!e.canSwitch||e.page<2),i.xp6(1),i.Q6J("icon","chevrondoubleleft"),i.xp6(1),i.Q6J("disabled",!e.canSwitch||e.page<=1),i.xp6(1),i.Q6J("icon","chevronleft"),i.xp6(2),i.Q6J("ngIf",e.page),i.xp6(1),i.hij("",e.max_page," "),i.xp6(2),i.hij(" (showing up to ",e.limit," "),i.xp6(2),i.hij(" ",e.total_records," "),i.xp6(4),i.Q6J("disabled",!e.canSwitch||e.page>=e.max_page),i.xp6(1),i.Q6J("icon","chevronright"),i.xp6(1),i.Q6J("disabled",!e.canSwitch||e.page>=e.max_page-1),i.xp6(1),i.Q6J("icon","chevrondoubleright")}}function c(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"div")(1,"button",15),i.NdJ("click",(function(){i.CHM(e);const t=i.oxw();return i.KtG(t.pageDown())})),i._UZ(2,"system-button-icon",16),i.qZA(),i.TgZ(3,"span"),i._uU(4),i._UZ(5,"system-label",10),i._uU(6),i._UZ(7,"system-label",9),i.qZA(),i.TgZ(8,"button",15),i.NdJ("click",(function(){i.CHM(e);const t=i.oxw();return i.KtG(t.pageUp())})),i._UZ(9,"system-button-icon",17),i.qZA()()}if(2&e){const e=i.oxw();i.xp6(1),i.Q6J("disabled",e.page<=1),i.xp6(1),i.Q6J("icon","chevronleft"),i.xp6(2),i.hij("",e.page," "),i.xp6(2),i.hij(" ",e.max_page," "),i.xp6(2),i.Q6J("disabled",e.page>=e.max_page),i.xp6(1),i.Q6J("icon","chevronright")}}let u=(()=>{class PaginationControlsComponent{constructor(){this._page=1,this.limit=1,this.total_records=0,this.variation="default",this.page$=new i.vpe,this.oldPage$=new i.vpe,this.canSwitch=!0,this.offset=0,this.max_page=0}get page(){return this._page}set page(e){this._page!==e&&(this.oldPage$.emit(this._page),this._page=e,this.page$.emit(this._page))}ngOnChanges(){this.total_records>0?this.max_page=Math.ceil(this.total_records/this.limit):this.max_page=0}pageUp(){if(!this.canSwitch||this.page>=this.max_page)return!1;this.page+=1}pageDown(){if(!this.canSwitch||this.page<=1)return!1;this.page-=1}}return PaginationControlsComponent.ɵfac=function(e){return new(e||PaginationControlsComponent)},PaginationControlsComponent.ɵcmp=i.Xpm({type:PaginationControlsComponent,selectors:[["pagination-controls"]],inputs:{_page:["page","_page"],limit:"limit",total_records:"total_records",variation:"variation",canSwitch:"canSwitch"},outputs:{page$:"pageChange",oldPage$:"leftPage"},features:[i.TTD],decls:3,vars:2,consts:[[1,"slds-grid_align-center",3,"ngSwitch"],[4,"ngSwitchDefault"],[4,"ngSwitchCase"],[1,"slds-m-right--x-small"],[1,"slds-button","slds-button_icon","slds-button--icon-small","slds-button--icon-border",3,"disabled","click"],["title","go to first page",3,"icon"],["title","go to previous page",1,"slds-button","slds-button_icon","slds-button--icon-small","slds-button--icon-border",3,"disabled","click"],[3,"icon"],[4,"ngIf"],["label","LBL_PAGES"],["label","LBL_OF"],["label","LBL_RECORDS"],[1,"slds-m-left--x-small"],["title","go to next page",1,"slds-button","slds-button_icon","slds-button--icon-small","slds-button--icon-border",3,"disabled","click"],["title","go to last page",3,"icon"],[1,"slds-button","slds-button_icon","slds-button--icon-small","slds-button--icon-border","slds-button_outline-brand",3,"disabled","click"],["title","go to previous page",3,"icon"],["title","go to next page",3,"icon"]],template:function(e,t){1&e&&(i.TgZ(0,"div",0),i.YNc(1,r,20,12,"div",1),i.YNc(2,c,10,6,"div",2),i.qZA()),2&e&&(i.Q6J("ngSwitch",t.variation),i.xp6(2),i.Q6J("ngSwitchCase","short"))},dependencies:[n.O5,n.RF,n.n9,n.ED,l.O,o.J,a._],encapsulation:2}),PaginationControlsComponent})(),m=(()=>{class PaginationPipe{transform(e,t){let s=(t.page-1)*t.limit,i=s+t.limit;return e.slice(s,i)}}return PaginationPipe.ɵfac=function(e){return new(e||PaginationPipe)},PaginationPipe.ɵpipe=i.Yjl({name:"paginate",type:PaginationPipe,pure:!1}),PaginationPipe})()},4994:(e,t,s)=>{"use strict";s.d(t,{g:()=>o});var i=s(1571),n=s(4154),l=s(6895);let o=(()=>{class SystemActionIcon{constructor(e){this.metadata=e,this.icon="",this.size="",this.title=void 0}get svgHRef(){return"./vendor/sldassets/icons/action-sprite/svg/symbols.svg#"+this.icon}get iconClass(){return this.icon?"slds-icon-action-"+this.icon.replace("_","-"):""}get sizeClass(){return"slds-icon--"+this.size}}return SystemActionIcon.ɵfac=function(e){return new(e||SystemActionIcon)(i.Y36(n.Pu))},SystemActionIcon.ɵcmp=i.Xpm({type:SystemActionIcon,selectors:[["system-action-icon"]],inputs:{icon:"icon",size:"size",title:"title"},decls:3,vars:3,consts:[[1,"slds-icon_container","slds-icon-action-change-record-type","slds-icon_container--circle",3,"ngClass"],["aria-hidden","true",1,"slds-icon",3,"ngClass"]],template:function(e,t){1&e&&(i.TgZ(0,"span",0),i.O4$(),i.TgZ(1,"svg",1),i._UZ(2,"use"),i.qZA()()),2&e&&(i.Q6J("ngClass",t.iconClass),i.xp6(1),i.Q6J("ngClass",t.sizeClass),i.xp6(1),i.uIk("href",t.svgHRef,null,"xlink"))},dependencies:[l.mk],encapsulation:2}),SystemActionIcon})()},4610:(e,t,s)=>{"use strict";s.d(t,{O:()=>o});var i=s(1571),n=s(4154),l=s(6895);let o=(()=>{class SystemButtonCustomIcon{constructor(e){this.metadata=e,this.inverse=!1,this.title="",this.file="./assets/icons/spicecrm.svg"}getSvgHRef(){return this.file+"#"+this.icon}getClass(){let e=[];return this.size?e.push("slds-button__icon--"+this.size):e.push("slds-button__icon"),this.position&&e.push("slds-button__icon_"+this.position),this.inverse&&e.push("slds-button_icon-inverse"),e}}return SystemButtonCustomIcon.ɵfac=function(e){return new(e||SystemButtonCustomIcon)(i.Y36(n.Pu))},SystemButtonCustomIcon.ɵcmp=i.Xpm({type:SystemButtonCustomIcon,selectors:[["system-button-custom-icon"]],inputs:{icon:"icon",size:"size",position:"position",inverse:"inverse",title:"title",file:"file"},decls:4,vars:3,consts:[["aria-hidden","true",1,"slds-button__icon",3,"ngClass"]],template:function(e,t){1&e&&(i.O4$(),i.TgZ(0,"svg",0)(1,"title"),i._uU(2),i.qZA(),i._UZ(3,"use"),i.qZA()),2&e&&(i.Q6J("ngClass",t.getClass()),i.xp6(2),i.Oqu(t.title),i.xp6(1),i.uIk("href",t.getSvgHRef(),null,"xlink"))},dependencies:[l.mk],encapsulation:2}),SystemButtonCustomIcon})()},2656:(e,t,s)=>{"use strict";s.d(t,{J:()=>o});var i=s(1571),n=s(4154),l=s(6895);let o=(()=>{class SystemButtonIcon{constructor(e,t){this.metadata=e,this.cdref=t,this.icon="",this.sprite="utility",this.size="",this.module="",this.position="",this.inverse=!1,this.title=void 0,this.addclasses=""}ngOnChanges(e){this.cdref.detectChanges()}getSvgHRef(){return"./vendor/sldassets/icons/"+this.getSprite()+"-sprite/svg/symbols.svg#"+this.getIcon()}getIcon(){if(this.icon)return this.icon.indexOf(":")>0?this.icon.split(":")[1]:this.icon;if(this.module&&this.metadata.getModuleIcon(this.module)){let e=this.metadata.getModuleIcon(this.module);return e.indexOf(":")>0?e.split(":")[1]:e}return"empty"}getSprite(){return this.icon&&this.icon.indexOf(":")>0?this.icon.split(":")[0]:this.module&&this.metadata.getModuleIcon(this.module)&&this.metadata.getModuleIcon(this.module).indexOf(":")>0?this.metadata.getModuleIcon(this.module).split(":")[0]:this.module?"standard":this.sprite}getClass(){let e=[];return""!=this.size?e.push("slds-button__icon--"+this.size):e.push("slds-button__icon"),""!=this.position&&e.push("slds-button__icon_"+this.position),this.inverse&&e.push("slds-button_icon-inverse"),this.addclasses?this.addclasses+" "+e:e}}return SystemButtonIcon.ɵfac=function(e){return new(e||SystemButtonIcon)(i.Y36(n.Pu),i.Y36(i.sBO))},SystemButtonIcon.ɵcmp=i.Xpm({type:SystemButtonIcon,selectors:[["system-button-icon"]],inputs:{icon:"icon",sprite:"sprite",size:"size",module:"module",position:"position",inverse:"inverse",title:"title",addclasses:"addclasses"},features:[i.TTD],decls:4,vars:3,consts:[["aria-hidden","true",1,"slds-button__icon",3,"ngClass"]],template:function(e,t){1&e&&(i.O4$(),i.TgZ(0,"svg",0)(1,"title"),i._uU(2),i.qZA(),i._UZ(3,"use"),i.qZA()),2&e&&(i.Q6J("ngClass",t.getClass()),i.xp6(2),i.Oqu(t.title),i.xp6(1),i.uIk("href",t.getSvgHRef(),null,"xlink"))},dependencies:[l.mk],encapsulation:2,changeDetection:0}),SystemButtonIcon})()},5399:(e,t,s)=>{"use strict";s.d(t,{x:()=>o});var i=s(1571);const n=[[["system-card-header"]],[["system-card-body"]],[["system-card-footer"]]],l=["system-card-header","system-card-body","system-card-footer"];let o=(()=>{class SystemCard{}return SystemCard.ɵfac=function(e){return new(e||SystemCard)},SystemCard.ɵcmp=i.Xpm({type:SystemCard,selectors:[["system-card"]],ngContentSelectors:l,decls:4,vars:0,consts:[[1,"slds-card","slds-card_boundary"]],template:function(e,t){1&e&&(i.F$t(n),i.TgZ(0,"article",0),i.Hsn(1),i.Hsn(2,1),i.Hsn(3,2),i.qZA())},encapsulation:2}),SystemCard})()},8807:(e,t,s)=>{"use strict";s.d(t,{I:()=>l});var i=s(1571);const n=["*"];let l=(()=>{class SystemCardBody{}return SystemCardBody.ɵfac=function(e){return new(e||SystemCardBody)},SystemCardBody.ɵcmp=i.Xpm({type:SystemCardBody,selectors:[["system-card-body"]],ngContentSelectors:n,decls:2,vars:0,consts:[[1,"slds-card__body","slds-card__body_inner"]],template:function(e,t){1&e&&(i.F$t(),i.TgZ(0,"div",0),i.Hsn(1),i.qZA())},encapsulation:2}),SystemCardBody})()},2400:(e,t,s)=>{"use strict";s.d(t,{Q:()=>o});var i=s(1571),n=s(4561);const l=["*"];let o=(()=>{class SystemCardHeader{}return SystemCardHeader.ɵfac=function(e){return new(e||SystemCardHeader)},SystemCardHeader.ɵcmp=i.Xpm({type:SystemCardHeader,selectors:[["system-card-header"]],inputs:{icon:"icon",module:"module",cardtitel:"cardtitel"},ngContentSelectors:l,decls:10,vars:3,consts:[[1,"slds-card__header","slds-grid"],[1,"slds-media","slds-media_center","slds-has-flexi-truncate"],[1,"slds-media__figure"],[3,"module","icon"],[1,"slds-media__body"],[1,"slds-card__header-title"],[1,"slds-text-heading_small"],[1,"slds-no-flex"]],template:function(e,t){1&e&&(i.F$t(),i.TgZ(0,"div",0)(1,"header",1)(2,"div",2),i._UZ(3,"system-icon",3),i.qZA(),i.TgZ(4,"div",4)(5,"h2",5)(6,"span",6),i._uU(7),i.qZA()()(),i.TgZ(8,"div",7),i.Hsn(9),i.qZA()()()),2&e&&(i.xp6(3),i.Q6J("module",t.module)("icon",t.icon),i.xp6(4),i.hij(" ",t.cardtitel," "))},dependencies:[n.f],encapsulation:2}),SystemCardHeader})()},701:(e,t,s)=>{"use strict";s.d(t,{r:()=>a});var i=s(1571),n=s(4561),l=s(2803),o=s(2161);let a=(()=>{class SystemCardStencil{}return SystemCardStencil.ɵfac=function(e){return new(e||SystemCardStencil)},SystemCardStencil.ɵcmp=i.Xpm({type:SystemCardStencil,selectors:[["system-card-stencil"]],decls:23,vars:0,consts:[[1,"slds-card","slds-card_boundary","slds-m-bottom--medium"],[1,"slds-card__header","slds-grid"],[1,"slds-media","slds-media_center","slds-has-flexi-truncate"],[1,"slds-media__figure"],[1,"slds-media__body"],[1,"slds-card__header-title"],[1,"slds-card__header-link","slds-truncate"],[1,"slds-card__body"],["role","grid",1,"slds-table","slds-table_cell-buffer","slds-no-row-hover","slds-table_bordered","slds-table_fixed-layout"],[1,"slds-line-height_reset"],["scope","col",1,""],["system-table-stencils","","rows","3","columns","4"]],template:function(e,t){1&e&&(i.TgZ(0,"div",0)(1,"div",1)(2,"header",2)(3,"div",3),i._UZ(4,"system-icon"),i.qZA(),i.TgZ(5,"div",4)(6,"h2",5)(7,"div",6)(8,"span"),i._UZ(9,"system-stencil"),i.qZA()()()()()(),i.TgZ(10,"div",7)(11,"table",8)(12,"thead")(13,"tr",9)(14,"th",10),i._UZ(15,"system-stencil"),i.qZA(),i.TgZ(16,"th",10),i._UZ(17,"system-stencil"),i.qZA(),i.TgZ(18,"th",10),i._UZ(19,"system-stencil"),i.qZA(),i.TgZ(20,"th",10),i._UZ(21,"system-stencil"),i.qZA()()(),i._UZ(22,"tbody",11),i.qZA()()())},dependencies:[n.f,l.B,o.x],encapsulation:2}),SystemCardStencil})()},7514:(e,t,s)=>{"use strict";s.d(t,{U:()=>c});var i=s(1571),n=s(433),l=s(5329),o=s(6895);const a=["inputCheckbox"];function d(e,t){1&e&&(i.TgZ(0,"span",6),i.Hsn(1),i.qZA())}const r=["*"];let c=(()=>{class SystemCheckbox{constructor(e,t){this.language=e,this.cdRef=t,this.hidelabel=!1,this.indeterminate=!1,this.asinteger=!1,this._disabled=!1,this.click$=new i.vpe,this.change$=new i.vpe,this.id=_.uniqueId(),this._value="1"}set disabled(e){this._disabled=!1!==e}get value(){return this._value}set value(e){this._value=e}get model_value(){return this.asinteger?1==this._model_value:this._model_value}set model_value(e){let t=this.asinteger?e?1:0:e;t!=this._model_value&&this.onChange(t),this.writeValue(t)}ngAfterViewInit(){this.setCheckboxIndeterminate()}ngOnChanges(e){e.indeterminate&&this.setCheckboxIndeterminate()}setCheckboxIndeterminate(){this.inputCheckbox&&(this.inputCheckbox.nativeElement.indeterminate=this.indeterminate)}click(e){if(e.stopPropagation(),this.disabled)return!1;this.onTouched(),this.click$.emit(this.value)}onChange(e){}registerOnChange(e){this.onChange=t=>{e(t)}}onTouched(){}registerOnTouched(e){this.onTouched=e}setDisabledState(e){this.disabled=e}writeValue(e){this._model_value=e,this.cdRef.detectChanges()}}return SystemCheckbox.ɵfac=function(e){return new(e||SystemCheckbox)(i.Y36(l.d),i.Y36(i.sBO))},SystemCheckbox.ɵcmp=i.Xpm({type:SystemCheckbox,selectors:[["system-checkbox"]],viewQuery:function(e,t){if(1&e&&i.Gf(a,5),2&e){let e;i.iGM(e=i.CRH())&&(t.inputCheckbox=e.first)}},inputs:{hidelabel:"hidelabel",indeterminate:"indeterminate",asinteger:"asinteger",disabled:"disabled",value:"value"},outputs:{click$:"click",change$:"change"},features:[i._Bn([{provide:n.JU,useExisting:(0,i.Gpc)((()=>SystemCheckbox)),multi:!0}]),i.TTD],ngContentSelectors:r,decls:6,vars:8,consts:[[1,"slds-checkbox"],["type","checkbox",3,"id","disabled","value","ngModel","click","ngModelChange"],["inputCheckbox",""],[1,"slds-checkbox__label","slds-truncate",3,"for","id"],[1,"slds-checkbox_faux","slds-m-horizontal--xxx-small"],["class","slds-form-element__label slds-p-left--xx-small",4,"ngIf"],[1,"slds-form-element__label","slds-p-left--xx-small"]],template:function(e,t){1&e&&(i.F$t(),i.TgZ(0,"span",0)(1,"input",1,2),i.NdJ("click",(function(e){return t.click(e)}))("ngModelChange",(function(e){return t.model_value=e})),i.qZA(),i.TgZ(3,"label",3),i._UZ(4,"span",4),i.YNc(5,d,2,0,"span",5),i.qZA()()),2&e&&(i.xp6(1),i.MGl("id","checkbox-",t.id,""),i.Q6J("disabled",t._disabled)("value",t.value)("ngModel",t.model_value),i.uIk("aria-labelledby","checkbox-button-label-"+t.id+" check-group-header"),i.xp6(2),i.MGl("for","checkbox-",t.id,"")("id","checkbox-button-label-",t.id,""),i.xp6(2),i.Q6J("ngIf",!t.hidelabel))},dependencies:[o.O5,n.Wl,n.JJ,n.On],encapsulation:2}),SystemCheckbox})()},9503:(e,t,s)=>{"use strict";s.d(t,{L:()=>o});var i=s(1571),n=s(433);const l=["*"];let o=(()=>{class SystemCheckboxGroup{constructor(e){this.cdRef=e,this.valueEmitter=new i.vpe,this._value=[]}get value(){return this._value}set value(e){this.onChange(e),this.writeValue(e)}writeValue(e){e&&!_.isEqual(e,this._value)&&(this._value=_.clone(e),this.cdRef.detectChanges(),this.valueEmitter.emit())}registerOnChange(e){this.onChange=t=>e(t)}registerOnTouched(e){this.onTouched=e}ngAfterViewInit(){this.cdRef.detach()}ngOnDestroy(){this.cdRef.reattach()}}return SystemCheckboxGroup.ɵfac=function(e){return new(e||SystemCheckboxGroup)(i.Y36(i.sBO))},SystemCheckboxGroup.ɵcmp=i.Xpm({type:SystemCheckboxGroup,selectors:[["system-checkbox-group"]],features:[i._Bn([{provide:n.JU,useExisting:(0,i.Gpc)((()=>SystemCheckboxGroup)),multi:!0}])],ngContentSelectors:l,decls:1,vars:0,template:function(e,t){1&e&&(i.F$t(),i.Hsn(0))},encapsulation:2,changeDetection:0}),SystemCheckboxGroup})()},8658:(e,t,s)=>{"use strict";s.d(t,{m:()=>a});var i=s(1571),n=s(9503),l=s(433);const o=["*"];let a=(()=>{class SystemCheckboxGroupCheckbox{constructor(e,t){this.systemCheckboxGroup=e,this.cdRef=t,this.id=_.uniqueId("checkbox-group-checkbox-"),this.disabled=!1,this._checked=!1,this.systemCheckboxGroup.valueEmitter.subscribe((()=>this.setCheckedValueFromGroup()))}get checked(){return this._checked}set checked(e){this._checked=e,this.setGroupValue()}ngAfterViewInit(){this.cdRef.detectChanges(),this.cdRef.detach()}ngOnChanges(e){this.setCheckedValueFromGroup()}ngOnDestroy(){this.cdRef.reattach(),this.systemCheckboxGroup.valueEmitter.unsubscribe()}setCheckedValueFromGroup(){this._checked=(this.systemCheckboxGroup.value||[]).indexOf(this.value)>-1,this.cdRef.detectChanges()}setGroupValue(){!this.checked&&this.systemCheckboxGroup.value.indexOf(this.value)>-1?this.systemCheckboxGroup.value=this.systemCheckboxGroup.value.filter((e=>e!=this.value)):this.checked&&-1==this.systemCheckboxGroup.value.indexOf(this.value)&&(this.systemCheckboxGroup.value=[...this.systemCheckboxGroup.value,this.value])}}return SystemCheckboxGroupCheckbox.ɵfac=function(e){return new(e||SystemCheckboxGroupCheckbox)(i.Y36(n.L,1),i.Y36(i.sBO))},SystemCheckboxGroupCheckbox.ɵcmp=i.Xpm({type:SystemCheckboxGroupCheckbox,selectors:[["system-checkbox-group-checkbox"]],inputs:{value:"value",disabled:"disabled"},features:[i.TTD],ngContentSelectors:o,decls:6,vars:4,consts:[[1,"slds-checkbox","slds-truncate"],["type","checkbox",3,"id","disabled","ngModel","ngModelChange"],[1,"slds-checkbox__label",3,"for"],[1,"slds-checkbox_faux"],[1,"slds-form-element__label","slds-p-left--x-small"]],template:function(e,t){1&e&&(i.F$t(),i.TgZ(0,"span",0)(1,"input",1),i.NdJ("ngModelChange",(function(e){return t.checked=e})),i.qZA(),i.TgZ(2,"label",2),i._UZ(3,"span",3),i.TgZ(4,"span",4),i.Hsn(5),i.qZA()()()),2&e&&(i.xp6(1),i.Q6J("id",t.id)("disabled",t.disabled)("ngModel",t.checked),i.xp6(1),i.Q6J("for",t.id))},dependencies:[l.Wl,l.JJ,l.On],encapsulation:2,changeDetection:0}),SystemCheckboxGroupCheckbox})()},528:(e,t,s)=>{"use strict";s.d(t,{v:()=>o});var i=s(1571),n=s(433),l=s(3463);let o=(()=>{class SystemCheckboxToggle{constructor(e){this.cdRef=e,this.label="",this.disabled=!1}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}writeValue(e){this.localValue=e,this.cdRef.detectChanges()}}return SystemCheckboxToggle.ɵfac=function(e){return new(e||SystemCheckboxToggle)(i.Y36(i.sBO))},SystemCheckboxToggle.ɵcmp=i.Xpm({type:SystemCheckboxToggle,selectors:[["system-checkbox-toggle"]],inputs:{label:"label",disabled:"disabled"},features:[i._Bn([{provide:n.JU,useExisting:(0,i.Gpc)((()=>SystemCheckboxToggle)),multi:!0}])],decls:7,vars:2,consts:[[1,"slds-form-element"],[1,"slds-checkbox_toggle","slds-grid"],[1,"slds-form-element__label","slds-m-bottom_none","slds-grow"],[3,"label"],["type","checkbox",3,"ngModel","ngModelChange"],["aria-live","assertive",1,"slds-checkbox_faux_container"],[1,"slds-checkbox_faux"]],template:function(e,t){1&e&&(i.TgZ(0,"div",0)(1,"label",1)(2,"span",2),i._UZ(3,"system-label",3),i.qZA(),i.TgZ(4,"input",4),i.NdJ("ngModelChange",(function(e){return t.localValue=e}))("ngModelChange",(function(e){return t.onChange(e)})),i.qZA(),i.TgZ(5,"span",5),i._UZ(6,"span",6),i.qZA()()()),2&e&&(i.xp6(3),i.Q6J("label",t.label),i.xp6(1),i.Q6J("ngModel",t.localValue))},dependencies:[n.Wl,n.JJ,n.On,l._],encapsulation:2,changeDetection:0}),SystemCheckboxToggle})()},1553:(e,t,s)=>{"use strict";s.d(t,{z:()=>b});var i=s(7340),n=s(1571),l=s(5329),o=s(6895),a=s(4561),d=s(3463),r=s(8859);function c(e,t){if(1&e&&n._UZ(0,"system-icon",11),2&e){const e=n.oxw(3);n.Q6J("module",e.moduleicon)}}function u(e,t){if(1&e){const e=n.EpF();n.ynx(0),n.TgZ(1,"button",5),n.NdJ("click",(function(){n.CHM(e);const t=n.oxw(2);return n.KtG(t.togglePanel())})),n._UZ(2,"system-utility-icon",6),n.TgZ(3,"div",7),n.YNc(4,c,1,1,"system-icon",8),n.TgZ(5,"span",9),n._UZ(6,"system-label",10),n.qZA()()(),n.BQk()}if(2&e){const e=n.oxw(2);n.xp6(4),n.Q6J("ngIf",e.moduleicon),n.xp6(2),n.Q6J("label",e._title)}}function m(e,t){if(1&e&&n._UZ(0,"system-icon",11),2&e){const e=n.oxw(3);n.Q6J("module",e.moduleicon)}}function h(e,t){if(1&e&&(n.TgZ(0,"div",12),n.YNc(1,m,1,1,"system-icon",8),n.TgZ(2,"span",9),n._UZ(3,"system-label",10),n.qZA()()),2&e){const e=n.oxw(2);n.xp6(1),n.Q6J("ngIf",e.moduleicon),n.xp6(2),n.Q6J("label",e._title)}}function g(e,t){if(1&e&&(n.TgZ(0,"h3",2),n.YNc(1,u,7,2,"ng-container",3),n.YNc(2,h,4,2,"ng-template",null,4,n.W1O),n.qZA()),2&e){const e=n.MAs(3),t=n.oxw();n.xp6(1),n.Q6J("ngIf",t.collapsible)("ngIfElse",e)}}const p=function(e){return{"slds-is-open":e}},f=["*"];let b=(()=>{class SystemCollabsableTab{constructor(e){this.language=e,this.collapsible=!0,this.expanded=!0,this.title="",this.moduleicon="",this.tabtitle=""}togglePanel(){this.expanded=!this.expanded}get _title(){return this.tabtitle?this.tabtitle:!!this.title&&this.title}}return SystemCollabsableTab.ɵfac=function(e){return new(e||SystemCollabsableTab)(n.Y36(l.d))},SystemCollabsableTab.ɵcmp=n.Xpm({type:SystemCollabsableTab,selectors:[["system-collapsable-tab"]],inputs:{collapsible:"collapsible",expanded:"expanded",title:"title",moduleicon:"moduleicon",tabtitle:"tabtitle"},ngContentSelectors:f,decls:4,vars:7,consts:[[1,"slds-section",3,"ngClass"],["class","slds-section__title",4,"ngIf"],[1,"slds-section__title"],[4,"ngIf","ngIfElse"],["simpleheader",""],["aria-expanded","true",1,"slds-button","slds-section__title-action",3,"click"],["icon","switch","size","x-small","addclasses","slds-section__title-action-icon slds-button__icon slds-button__icon_left"],[1,"slds-grid","slds-grid--vertical-align-center"],["size","x-small",3,"module",4,"ngIf"],[1,"slds-truncate"],[3,"label"],["size","x-small",3,"module"],[1,"slds-grid","slds-grid--vertical-align-center","slds-section__title-action",2,"cursor","default"]],template:function(e,t){1&e&&(n.F$t(),n.TgZ(0,"div",0),n.YNc(1,g,4,2,"h3",1),n.TgZ(2,"div"),n.Hsn(3),n.qZA()()),2&e&&(n.Q6J("ngClass",n.VKq(5,p,t.expanded)),n.xp6(1),n.Q6J("ngIf",""!=t._title),n.xp6(1),n.Udp("display",t.expanded?"block":"none"),n.Q6J("@tabanimation",t.expanded))},dependencies:[o.mk,o.O5,a.f,d._,r.r],encapsulation:2,data:{animation:[(0,i.X$)("tabanimation",[(0,i.SB)("true",(0,i.oB)({height:"*",opacity:1})),(0,i.SB)("false",(0,i.oB)({height:"0px",opacity:0})),(0,i.eR)("true => false",[(0,i.oB)({overflow:"hidden"}),(0,i.jt)(".5s")]),(0,i.eR)("false => true",[(0,i.jt)(".5s"),(0,i.oB)({overflow:"inherit"})])])]}}),SystemCollabsableTab})()},7516:(e,t,s)=>{"use strict";s.d(t,{m:()=>r});var i=s(1571),n=s(6895),l=s(4664);const o=["container"];function a(e,t){if(1&e&&(i.TgZ(0,"div",2),i._UZ(1,"system-spinner",3),i.qZA()),2&e){const e=i.oxw();i.Q6J("title",e.containerComponent)}}function d(e,t){}let r=(()=>{class SystemComponentContainer{constructor(){this.containerRef=new i.vpe,this.loaded=!1,this.containerComponent=""}ngAfterViewInit(){this.containerRef.emit(this.container),this.containerRef.complete()}}return SystemComponentContainer.ɵfac=function(e){return new(e||SystemComponentContainer)},SystemComponentContainer.ɵcmp=i.Xpm({type:SystemComponentContainer,selectors:[["system-component-container"]],viewQuery:function(e,t){if(1&e&&i.Gf(o,7,i.s_b),2&e){let e;i.iGM(e=i.CRH())&&(t.container=e.first)}},decls:3,vars:1,consts:[["style","width:100%;","class","slds-align--absolute-center slds-p-around--xx-small",3,"title",4,"ngIf"],["container",""],[1,"slds-align--absolute-center","slds-p-around--xx-small",2,"width","100%",3,"title"],["size","12"]],template:function(e,t){1&e&&(i.YNc(0,a,2,1,"div",0),i.YNc(1,d,0,0,"ng-template",null,1,i.W1O)),2&e&&i.Q6J("ngIf",!t.loaded)},dependencies:[n.O5,l.W],encapsulation:2}),SystemComponentContainer})()},51:(e,t,s)=>{"use strict";s.d(t,{K:()=>n});var i=s(1571);let n=(()=>{class SystemComponentMissing{constructor(){this.component=""}}return SystemComponentMissing.ɵfac=function(e){return new(e||SystemComponentMissing)},SystemComponentMissing.ɵcmp=i.Xpm({type:SystemComponentMissing,selectors:[["system-component-missing"]],decls:5,vars:1,consts:[[1,"slds-box","slds-align_absolute-center","slds-theme_alert-texture","slds-theme_error"]],template:function(e,t){1&e&&(i.TgZ(0,"div",0),i._uU(1," Component "),i.TgZ(2,"b"),i._uU(3),i.qZA(),i._uU(4," Missing\n"),i.qZA()),2&e&&(i.xp6(3),i.Oqu(t.component))},encapsulation:2}),SystemComponentMissing})()},6951:(e,t,s)=>{"use strict";s.d(t,{E:()=>d});var i=s(1571),n=s(4154),l=s(6895),o=s(2995);function a(e,t){if(1&e&&i._UZ(0,"system-dynamic-component",1),2&e){const e=t.$implicit;i.Q6J("component",e.component)("componentconfig",e.componentconfig)}}let d=(()=>{class SystemComponentSet{constructor(e){this.metadata=e,this.componentset="",this._componentset="",this.components=[]}ngOnChanges(){this.renderComnponentset()}renderComnponentset(){this.componentset!=this._componentset&&(this.componentset?this.components=this.metadata.getComponentSetObjects(this.componentset):this.components=[],this._componentset=this.componentset)}}return SystemComponentSet.ɵfac=function(e){return new(e||SystemComponentSet)(i.Y36(n.Pu))},SystemComponentSet.ɵcmp=i.Xpm({type:SystemComponentSet,selectors:[["system-componentset"]],inputs:{componentset:"componentset"},features:[i.TTD],decls:1,vars:1,consts:[[3,"component","componentconfig",4,"ngFor","ngForOf"],[3,"component","componentconfig"]],template:function(e,t){1&e&&i.YNc(0,a,1,2,"system-dynamic-component",0),2&e&&i.Q6J("ngForOf",t.components)},dependencies:[l.sg,o.T],encapsulation:2}),SystemComponentSet})()},34:(e,t,s)=>{"use strict";s.d(t,{$:()=>o});var i=s(1571),n=s(4154),l=s(6895);let o=(()=>{class SystemCustomIcon{constructor(e){this.metadata=e,this.icon="info",this.file="./assets/icons/spicecrm.svg",this.size="",this.color="",this.desaturate=!1,this.addclasses="",this.divClass="slds-media__figure"}getSizeClass(){return this.size?"slds-icon--"+this.size:""}getSvg(){return this.file+"#"+this.icon}get iconClass(){return"slds-icon"+(this.size?" slds-icon--"+this.size:"")+" slds-icon-text-default "+this.addclasses}get iconStyle(){let e={};return this.color&&(e.color=this.color),this.desaturate&&(e.filter="saturate(0)"),e}}return SystemCustomIcon.ɵfac=function(e){return new(e||SystemCustomIcon)(i.Y36(n.Pu))},SystemCustomIcon.ɵcmp=i.Xpm({type:SystemCustomIcon,selectors:[["system-custom-icon"]],inputs:{icon:"icon",file:"file",size:"size",color:"color",desaturate:"desaturate",addclasses:"addclasses",divClass:"divClass"},decls:3,vars:3,consts:[[1,"slds-p-horizontal--xxx-small","slds-current-color"],["aria-hidden","true",3,"ngClass","ngStyle"]],template:function(e,t){1&e&&(i.TgZ(0,"div",0),i.O4$(),i.TgZ(1,"svg",1),i._UZ(2,"use"),i.qZA()()),2&e&&(i.xp6(1),i.Q6J("ngClass",t.iconClass)("ngStyle",t.iconStyle),i.xp6(1),i.uIk("href",t.getSvg(),null,"xlink"))},dependencies:[l.mk,l.PC],encapsulation:2}),SystemCustomIcon})()},6538:(e,t,s)=>{"use strict";s.d(t,{a:()=>d});var i=s(727),n=s(1571),l=s(5329),o=s(5920),a=s(2422);let d=(()=>{class SystemDisplayDatetime{constructor(e,t,s,n){this.language=e,this.cdRef=t,this.session=s,this.userpreferences=n,this.displayDate=!0,this.displayTime=!0,this.subscriptions=new i.w0}ngOnChanges(e){this.detectChanges()}ngOnDestroy(){this.subscriptions.unsubscribe()}ngAfterViewInit(){this.subscribeToPrefs()}subscribeToPrefs(){this.subscriptions.add(this.userpreferences.preferences$.subscribe((e=>{this.prefChanges(e)})))}prefChanges(e){this.detectChanges()}detectChanges(){this.cdRef.detectChanges()}get displayValue(){if(!this.date||!this.displayDate&&!this.displayTime)return"";let e=[];if(this.displayDate&&e.push(this.userpreferences.getDateFormat()),this.displayTime&&e.push(this.userpreferences.getTimeFormat()),moment.isMoment(this.date))return this.date.format(e.join(" "));{let t=this.session.getSessionData("timezone")||moment.tz.guess(!0);return moment.utc(this.date).tz(t).format(e.join(" "))}}}return SystemDisplayDatetime.ɵfac=function(e){return new(e||SystemDisplayDatetime)(n.Y36(l.d),n.Y36(n.sBO),n.Y36(o.n),n.Y36(a.z))},SystemDisplayDatetime.ɵcmp=n.Xpm({type:SystemDisplayDatetime,selectors:[["system-display-datetime"]],inputs:{date:"date",displayDate:"displayDate",displayTime:"displayTime"},features:[n.TTD],decls:1,vars:1,template:function(e,t){1&e&&n._uU(0),2&e&&n.hij("",t.displayValue,"\n")},encapsulation:2,changeDetection:0}),SystemDisplayDatetime})()},4270:(e,t,s)=>{"use strict";s.d(t,{G:()=>r});var i=s(1571),n=s(5329),l=s(5547),o=s(2422),a=s(6895);function d(e,t){if(1&e&&(i.ynx(0),i._uU(1),i.BQk()),2&e){const e=i.oxw();i.xp6(1),i.hij("",e.currencySymbol," ")}}let r=(()=>{class SystemDisplayNumber{constructor(e,t,s,i){this.language=e,this.cdRef=t,this.currency=s,this.userpreferences=i,this.noDigits=!1}set inputGrow(e){this.noDigits=!1!==e}get currencySymbol(){if(!this.currency_id)return"";let e=this.currency.getCurrencies().find((e=>e.id==this.currency_id));return e?e.symbol:""}get value(){if(this.number&&""!=this.number||0===this.number)return"string"==typeof this.number&&(this.number=parseFloat(this.number)),this.noDigits?this.userpreferences.formatMoney(this.number,0):this.userpreferences.formatMoney(this.number)}ngOnChanges(e){this.detectChanges()}detectChanges(){this.cdRef.detectChanges()}}return SystemDisplayNumber.ɵfac=function(e){return new(e||SystemDisplayNumber)(i.Y36(n.d),i.Y36(i.sBO),i.Y36(l.A),i.Y36(o.z))},SystemDisplayNumber.ɵcmp=i.Xpm({type:SystemDisplayNumber,selectors:[["system-display-number"]],inputs:{number:"number",currency_id:"currency_id",noDigits:"noDigits",inputGrow:["system-display-number-nodigits","inputGrow"]},features:[i.TTD],decls:2,vars:2,consts:[[4,"ngIf"]],template:function(e,t){1&e&&(i.YNc(0,d,2,1,"ng-container",0),i._uU(1)),2&e&&(i.Q6J("ngIf",t.currency_id),i.xp6(1),i.hij("",t.value,"\n"))},dependencies:[a.O5],encapsulation:2,changeDetection:0}),SystemDisplayNumber})()},2995:(e,t,s)=>{"use strict";s.d(t,{T:()=>o});var i=s(1571),n=s(4154);const l=["container"];let o=(()=>{class SystemDynamicComponent{constructor(e){this.metadata=e,this.component="",this.componentref=new i.vpe,this.initialized=!1}ngAfterViewInit(){this.initialized||this.renderComponent()}ngOnChanges(e){this.container&&e.component&&(this._component&&(this._component.destroy(),this._component=void 0),this.renderComponent(),this.initialized=!0)}renderComponent(){this.component&&this.metadata.addComponent(this.component,this.container).subscribe((e=>{if(this.componentref.emit(e),this.componentconfig&&(e.instance.componentconfig=this.componentconfig),this.componentattributes)for(let t in this.componentattributes)e.instance[t]=this.componentattributes[t];this._component=e}))}}return SystemDynamicComponent.ɵfac=function(e){return new(e||SystemDynamicComponent)(i.Y36(n.Pu))},SystemDynamicComponent.ɵcmp=i.Xpm({type:SystemDynamicComponent,selectors:[["system-dynamic-component"]],viewQuery:function(e,t){if(1&e&&i.Gf(l,7,i.s_b),2&e){let e;i.iGM(e=i.CRH())&&(t.container=e.first)}},inputs:{component:"component",componentconfig:"componentconfig",componentattributes:"componentattributes"},outputs:{componentref:"componentref"},features:[i.TTD],decls:2,vars:0,consts:[["container",""]],template:function(e,t){1&e&&i._UZ(0,"div",null,0)},encapsulation:2}),SystemDynamicComponent})()},512:(e,t,s)=>{"use strict";s.d(t,{Y:()=>a});var i=s(1571),n=s(4154),l=s(7774);const o=["componentcontainer"];let a=(()=>{class SystemDynamicRouteInterceptor{constructor(e,t,s){this.metadata=e,this.route=t,this.router=s,this.routercomponent=null}ngOnInit(){this.router.navigate(["/module/Home"])}}return SystemDynamicRouteInterceptor.ɵfac=function(e){return new(e||SystemDynamicRouteInterceptor)(i.Y36(n.Pu),i.Y36(l.gz),i.Y36(l.F0))},SystemDynamicRouteInterceptor.ɵcmp=i.Xpm({type:SystemDynamicRouteInterceptor,selectors:[["system-dynamicroute-container"]],viewQuery:function(e,t){if(1&e&&i.Gf(o,7,i.s_b),2&e){let e;i.iGM(e=i.CRH())&&(t.componentcontainer=e.first)}},decls:2,vars:0,consts:[["componentcontainer",""]],template:function(e,t){1&e&&i._UZ(0,"div",null,0)},encapsulation:2}),SystemDynamicRouteInterceptor})()},7693:(e,t,s)=>{"use strict";s.d(t,{T:()=>a});var i=s(1571),n=s(4154),l=s(3441),o=s(4561);let a=(()=>{class SystemFileIcon{constructor(e,t){this.metadata=e,this.helper=t,this.filemimetype="",this.filename="",this.size="",this.addclasses="",this.divClass="slds-media__figure",this.fileicon={icon:"unknown",sprite:"doctype"}}ngOnInit(){this.determineIcon()}determineIcon(){let e=this.helper.determineFileIcon(this.filemimetype);if("unknown"==e){if("msg"===this.filename.split(".").splice(-1,1)[0].toLowerCase())return void(this.fileicon={icon:"email",sprite:"standard"})}this.fileicon={icon:e,sprite:"doctype"}}}return SystemFileIcon.ɵfac=function(e){return new(e||SystemFileIcon)(i.Y36(n.Pu),i.Y36(l._))},SystemFileIcon.ɵcmp=i.Xpm({type:SystemFileIcon,selectors:[["system-file-icon"]],inputs:{filemimetype:"filemimetype",filename:"filename",size:"size",addclasses:"addclasses",divClass:"divClass"},decls:1,vars:4,consts:[[3,"icon","divClass","sprite","size"]],template:function(e,t){1&e&&i._UZ(0,"system-icon",0),2&e&&i.Q6J("icon",t.fileicon.icon)("divClass",t.divClass)("sprite",t.fileicon.sprite)("size",t.size)},dependencies:[o.f],encapsulation:2}),SystemFileIcon})()},7720:(e,t,s)=>{"use strict";s.d(t,{H:()=>g});var i=s(1571),n=s(4505),l=s(5329),o=s(4154),a=s(6895),d=s(433),r=s(2656),c=s(3463),u=s(1230),m=s(7617);function h(e,t){if(1&e&&(i.TgZ(0,"option",15),i._UZ(1,"system-label",16),i.qZA()),2&e){const e=t.$implicit;i.Q6J("value",e.operator),i.xp6(1),i.Q6J("label",e.name)}}let g=(()=>{class SystemFilterBuilderFilterExpression{constructor(e,t,s){this.backend=e,this.language=t,this.metadata=s,this.filterexpression={},this.operatortype="default",this.expressionDeleted=new i.vpe,this.operators={default:[{operator:"equals",name:"LBL_OP_EQUALS",value1:"text"},{operator:"notequals",name:"LBL_OP_NOTEQUAL",value1:"text"},{operator:"starts",name:"LBL_STARTS",value1:"text"},{operator:"contains",name:"LBL_OP_CONTAINS",value1:"text"},{operator:"ncontains",name:"LBL_OP_NOTCONTAINS",value1:"text"},{operator:"greater",name:"LBL_OP_GREATER",value1:"text"},{operator:"gequal",name:"LBL_OP_GREATEREQUAL",value1:"text"},{operator:"less",name:"LBL_OP_LESS",value1:"text"},{operator:"lequal",name:"LBL_OP_LESSEQUAL",value1:"text"},{operator:"between",name:"LBL_OP_BETWEEN",value1:"text",value2:"text"},{operator:"empty",name:"LBL_OP_EMPTY"},{operator:"notempty",name:"LBL_OP_NOTEMPTY"}],numeric:[{operator:"equals",name:"LBL_OP_EQUALS",value1:"integer"},{operator:"notequals",name:"LBL_OP_NOTEQUAL",value1:"text"},{operator:"greater",name:"LBL_OP_GREATER",value1:"integer"},{operator:"gequal",name:"LBL_OP_GREATEREQUAL",value1:"integer"},{operator:"less",name:"LBL_OP_LESS",value1:"integer"},{operator:"lequal",name:"LBL_OP_LESSEQUAL",value1:"integer"},{operator:"between",name:"LBL_OP_BETWEEN",value1:"integer",value2:"integer"}],date:[{operator:"today",name:"LBL_TODAY"},{operator:"past",name:"LBL_PAST"},{operator:"future",name:"LBL_FUTURE"},{operator:"thismonth",name:"LBL_THIS_MONTH"},{operator:"thisyear",name:"LBL_THIS_YEAR"},{operator:"nextmonth",name:"LBL_NEXT_MONTH"},{operator:"nextyear",name:"LBL_NEXT_YEAR"},{operator:"ndaysago",name:"LBL_N_DAYS_AGO",value1:"integer"},{operator:"inlessthanndays",name:"LBL_IN_LESS_THAN_N_DAYS",value1:"integer"},{operator:"inlastndays",name:"LBL_IN_THE_LAST_N_DAYS",value1:"integer"},{operator:"inmorethanndays",name:"LBL_IN_MORE_THAN_N_DAYS",value1:"integer"},{operator:"inndays",name:"LBL_IN_N_DAYS",value1:"integer"},{operator:"thisday",name:"LBL_THIS_DAY"},{operator:"empty",name:"LBL_OP_ISEMPTY"},{operator:"greater",name:"LBL_OP_AFTER",value1:"date"},{operator:"less",name:"LBL_OP_BEFORE",value1:"date"},{operator:"betweend",name:"LBL_OP_BETWEEN",value1:"date",value2:"date"},{operator:"empty",name:"LBL_OP_ISEMPTY"},{operator:"notempty",name:"LBL_OP_NOTEMPTY"},{operator:"lastndays",name:"LBL_OP_LASTNDAYS",value1:"integer"},{operator:"lastnmonths",name:"LBL_OP_LASTNMONTHS",value1:"integer"},{operator:"untilyesterday",name:"LBL_OP_UNTILYESTERDAY"},{operator:"fromtomorrow",name:"LBL_OP_FROMTOMORROW"}],bool:[{operator:"true",name:"LBL_TRUE"},{operator:"false",name:"LBL_FALSE"}],enum:[{operator:"equals",name:"LBL_OP_EQUALS",value1:"enum"},{operator:"notequals",name:"LBL_OP_NOTEQUAL",value1:"enum"},{operator:"oneof",name:"LBL_ONEOF",value1:"multienum"},{operator:"empty",name:"LBL_OP_ISEMPTY"},{operator:"notempty",name:"LBL_OP_NOTEMPTY"}],relate:[{operator:"equalr",name:"LBL_OP_EQUALS",value1:"relate"},{operator:"emptyr",name:"LBL_OP_ISEMPTY"},{operator:"notemptyr",name:"LBL_OP_NOTEMPTY"}]}}get field(){return this.filterexpression.field}set field(e){e!=this.filterexpression.field&&(this.filterexpression.field=e,this.determineOperatorType(e),this.operator=this.operators[this.operatortype][0].operator,this.filterexpression.filtervalue="")}get operator(){return this.filterexpression.operator}set operator(e){e!=this.filterexpression.operator&&(this.filterexpression.operator=e,this.filterexpression.filtervalue="",this.filterexpression.filtervalueto="")}determineOperatorType(e){let t=this.metadata.getFieldDefs(this.module,e);if(t)switch(t.type){case"date":case"datetime":case"datetimecombo":this.operatortype="date";break;case"bool":case"boolean":this.operatortype="bool";break;case"enum":case"multienum":this.operatortype="enum";break;case"int":case"double":case"currency":this.operatortype="numeric";break;case"relate":this.operatortype="relate";break;default:this.operatortype="default"}else this.operatortype="default"}ngOnInit(){this.determineOperatorType(this.field)}delete(){this.filterexpression.deleted=!0,this.expressionDeleted.emit(!0)}trackByFn(e,t){return t.value}}return SystemFilterBuilderFilterExpression.ɵfac=function(e){return new(e||SystemFilterBuilderFilterExpression)(i.Y36(n.y),i.Y36(l.d),i.Y36(o.Pu))},SystemFilterBuilderFilterExpression.ɵcmp=i.Xpm({type:SystemFilterBuilderFilterExpression,selectors:[["system-filter-builder-expression"]],inputs:{module:"module",filterexpression:"filterexpression"},outputs:{expressionDeleted:"expressionDeleted"},decls:19,vars:10,consts:[[1,"slds-grid","slds-gutters_xx-small","slds-grid--vertical-align-start"],[1,"slds-col","slds-size--1-of-4",3,"module","ngModel","ngModelChange"],[1,"slds-col","slds-size--1-of-4"],[1,"slds-form-element"],[1,"slds-form-element__label"],["label","LBL_OPERATOR"],[1,"slds-form-element__control"],[1,"slds-select_container"],[1,"slds-select",3,"disabled","ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[1,"slds-col",3,"operators","operator","filterexpression","module","field"],[1,"slds-col","slds-grow-none"],["aria-hidden","true",1,"slds-form-element__label","slds-hidden"],[1,"slds-button","slds-button_icon","slds-button_icon-border-filled",3,"click"],["icon","delete"],[3,"value"],[3,"label"]],template:function(e,t){1&e&&(i.TgZ(0,"div",0)(1,"system-filter-builder-expression-fields",1),i.NdJ("ngModelChange",(function(e){return t.field=e})),i.qZA(),i.TgZ(2,"div",2)(3,"div",3)(4,"label",4),i._UZ(5,"system-label",5),i.qZA(),i.TgZ(6,"div",6)(7,"div",7)(8,"select",8),i.NdJ("ngModelChange",(function(e){return t.operator=e})),i._UZ(9,"option"),i.YNc(10,h,2,2,"option",9),i.qZA()()()()(),i._UZ(11,"system-filter-builder-expression-values",10),i.TgZ(12,"div",11)(13,"div",3)(14,"span",12),i._uU(15,"delete"),i.qZA(),i.TgZ(16,"div",6)(17,"button",13),i.NdJ("click",(function(){return t.delete()})),i._UZ(18,"system-button-icon",14),i.qZA()()()()()),2&e&&(i.xp6(1),i.Q6J("module",t.module)("ngModel",t.field),i.xp6(7),i.Q6J("disabled",!t.filterexpression.field)("ngModel",t.operator),i.xp6(2),i.Q6J("ngForOf",t.operators[t.operatortype]),i.xp6(1),i.Q6J("operators",t.operators[t.operatortype])("operator",t.filterexpression.operator)("filterexpression",t.filterexpression)("module",t.module)("field",t.field))},dependencies:[a.sg,d.YN,d.Kr,d.EJ,d.JJ,d.On,r.J,c._,u.Y,m.w],encapsulation:2}),SystemFilterBuilderFilterExpression})()},1230:(e,t,s)=>{"use strict";s.d(t,{Y:()=>m});var i=s(1571),n=s(433),l=s(4505),o=s(5329),a=s(4154),d=s(6895),r=s(3463),c=s(7674);function u(e,t){if(1&e&&(i.TgZ(0,"option",7),i._UZ(1,"system-label-fieldname",8),i._uU(2),i.qZA()),2&e){const e=t.$implicit,s=i.oxw();i.Q6J("value",e.name),i.xp6(1),i.Q6J("module",s.module)("field",e.name),i.xp6(1),i.hij(" (",e.name,")")}}let m=(()=>{class SystemFilterBuilderFilterExpressionFields{constructor(e,t,s){this.backend=e,this.language=t,this.metadata=s,this.fields=[]}get field(){return this._field}set field(e){e!=this._field&&(this._field=e,this.onChange(e))}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}writeValue(e){this._field=e}getFieldDisplayOptions(){let e=[],t=this.language.getFieldDisplayOptions(this.module,this.field);for(let s in t)e.push({value:s,display:t[s]});return e.filter((e=>e.value.length>0))}ngOnInit(){let e=this.metadata.getModuleFields(this.module);for(let t in e)if("link"!=e[t].type){if("relate"==e[t].type){if(!e[t].module)continue;if(e[t].id_name&&e[e[t].id_name]&&"non-db"==e[e[t].id_name].source)continue}"id"!=e[t].type&&("non-db"==e[t].source&&"relate"!=e[t].type||this.fields.push(e[t]))}this.fields.sort(((e,t)=>this.language.getFieldDisplayName(this.module,e.name).toLowerCase()>this.language.getFieldDisplayName(this.module,t.name).toLowerCase()?1:-1))}}return SystemFilterBuilderFilterExpressionFields.ɵfac=function(e){return new(e||SystemFilterBuilderFilterExpressionFields)(i.Y36(l.y),i.Y36(o.d),i.Y36(a.Pu))},SystemFilterBuilderFilterExpressionFields.ɵcmp=i.Xpm({type:SystemFilterBuilderFilterExpressionFields,selectors:[["system-filter-builder-expression-fields"]],inputs:{module:"module"},features:[i._Bn([{provide:n.JU,useExisting:(0,i.Gpc)((()=>SystemFilterBuilderFilterExpressionFields)),multi:!0}])],decls:7,vars:2,consts:[[1,"slds-form-element"],[1,"slds-form-element__label"],["label","LBL_FIELD"],[1,"slds-form-element__control"],[1,"slds-select_container"],[1,"slds-select",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[3,"module","field"]],template:function(e,t){1&e&&(i.TgZ(0,"div",0)(1,"label",1),i._UZ(2,"system-label",2),i.qZA(),i.TgZ(3,"div",3)(4,"div",4)(5,"select",5),i.NdJ("ngModelChange",(function(e){return t.field=e})),i.YNc(6,u,3,4,"option",6),i.qZA()()()()),2&e&&(i.xp6(5),i.Q6J("ngModel",t.field),i.xp6(1),i.Q6J("ngForOf",t.fields))},dependencies:[d.sg,n.YN,n.Kr,n.EJ,n.JJ,n.On,r._,c.h],encapsulation:2}),SystemFilterBuilderFilterExpressionFields})()},3617:(e,t,s)=>{"use strict";s.d(t,{s:()=>b});var i=s(1571),n=s(4505),l=s(5329),o=s(4154),a=s(6895),d=s(433),r=s(2656),c=s(3463),u=s(7720);function m(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"button",31),i.NdJ("click",(function(){i.CHM(e);const t=i.oxw();return i.KtG(t.delete())})),i._UZ(1,"system-button-icon",32),i.qZA()}}function h(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"fieldset")(1,"system-filter-builder-expression",35),i.NdJ("expressionDeleted",(function(){i.CHM(e);const t=i.oxw(2);return i.KtG(t.filterchanged())})),i.qZA()()}if(2&e){const e=i.oxw().$implicit,t=i.oxw();i.xp6(1),i.Q6J("module",t.module)("filterexpression",e)}}function g(e,t){if(1&e&&(i.TgZ(0,"li",33),i.YNc(1,h,2,2,"fieldset",34),i.qZA()),2&e){const e=t.$implicit;i.xp6(1),i.Q6J("ngIf",!e.deleted)}}function p(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"system-filter-builder-expression-group",37),i.NdJ("expressionChanged",(function(){i.CHM(e);const t=i.oxw(2);return i.KtG(t.filterchanged())})),i.qZA()}if(2&e){const e=i.oxw().$implicit,t=i.oxw();i.Q6J("module",t.module)("filtergroup",e)("candelete",!0)}}function f(e,t){if(1&e&&(i.ynx(0),i.YNc(1,p,1,3,"system-filter-builder-expression-group",36),i.BQk()),2&e){const e=t.$implicit;i.xp6(1),i.Q6J("ngIf",!e.deleted)}}let b=(()=>{class SystemFilterBuilderFilterExpressionGroup{constructor(e,t,s){this.backend=e,this.language=t,this.metadata=s,this.candelete=!1,this.expressionChanged=new i.vpe,this.expressions=[],this.groups=[]}ngOnChanges(e){this.groups=[],this.expressions=[];for(let e of this.filtergroup.conditions)e.logicaloperator?this.groups.push(e):this.expressions.push(e)}addExpression(){let e={field:"",operator:"",filtervalue:""};this.filtergroup.conditions.push(e),this.expressions.push(e),this.expressionChanged.emit(!0)}addGroup(){let e={logicaloperator:"and",groupscope:"all",conditions:[]};this.filtergroup.conditions.push(e),this.groups.push(e)}delete(){this.filtergroup.deleted=!0,this.expressionChanged.emit(!0)}filterchanged(){this.cleanDeleted(),this.expressionChanged.emit(!0)}cleanDeleted(){let e=[];for(let t of this.filtergroup.conditions)!0!==t.deleted&&e.push(t);this.filtergroup.conditions=e}}return SystemFilterBuilderFilterExpressionGroup.ɵfac=function(e){return new(e||SystemFilterBuilderFilterExpressionGroup)(i.Y36(n.y),i.Y36(l.d),i.Y36(o.Pu))},SystemFilterBuilderFilterExpressionGroup.ɵcmp=i.Xpm({type:SystemFilterBuilderFilterExpressionGroup,selectors:[["system-filter-builder-expression-group"]],inputs:{module:"module",filtergroup:"filtergroup",candelete:"candelete"},outputs:{expressionChanged:"expressionChanged"},features:[i.TTD],decls:40,vars:5,consts:[[1,"slds-expression__group"],[1,"slds-grid","slds-gutters_direct-xx-small","slds-grid--vertical-align-end","slds-size--1-of-1"],[1,"slds-form-element","slds-col","slds-grow-none"],[1,"slds-form-element__label"],["label","LBL_GROUP_OPERATOR"],[1,"slds-form-element__control"],[1,"slds-select_container"],[1,"slds-select",3,"ngModel","ngModelChange"],["value","and"],["label","LBL_AND"],["value","or"],["label","LBL_OR"],["label","LBL_GROUP_SCOPE"],["value","all"],["label","LBL_ALL"],["value","own"],["label","LBL_OWN"],["value","ownorgunit"],["label","LBL_OWN_ORGUNIT"],["value","not_own"],["label","LBL_NOT_OWN"],["value","creator"],["label","LBL_CREATOR"],["class","slds-button slds-button_icon slds-button_icon-border-filled slds-col--bump-left",3,"click",4,"ngIf"],["class","slds-expression__row_group",4,"ngFor","ngForOf"],[4,"ngFor","ngForOf"],[1,"slds-expression__buttons"],[1,"slds-button","slds-button_neutral",3,"click"],["icon","add"],["label","LBL_ADD_CONDITION"],["label","LBL_ADD_GROUP"],[1,"slds-button","slds-button_icon","slds-button_icon-border-filled","slds-col--bump-left",3,"click"],["icon","delete"],[1,"slds-expression__row_group"],[4,"ngIf"],[3,"module","filterexpression","expressionDeleted"],[3,"module","filtergroup","candelete","expressionChanged",4,"ngIf"],[3,"module","filtergroup","candelete","expressionChanged"]],template:function(e,t){1&e&&(i.TgZ(0,"li",0)(1,"fieldset")(2,"div",1)(3,"div",2)(4,"label",3),i._UZ(5,"system-label",4),i.qZA(),i.TgZ(6,"div",5)(7,"div",6)(8,"select",7),i.NdJ("ngModelChange",(function(e){return t.filtergroup.logicaloperator=e})),i.TgZ(9,"option",8),i._UZ(10,"system-label",9),i.qZA(),i.TgZ(11,"option",10),i._UZ(12,"system-label",11),i.qZA()()()()(),i.TgZ(13,"div",2)(14,"label",3),i._UZ(15,"system-label",12),i.qZA(),i.TgZ(16,"div",5)(17,"div",6)(18,"select",7),i.NdJ("ngModelChange",(function(e){return t.filtergroup.groupscope=e})),i.TgZ(19,"option",13),i._UZ(20,"system-label",14),i.qZA(),i.TgZ(21,"option",15),i._UZ(22,"system-label",16),i.qZA(),i.TgZ(23,"option",17),i._UZ(24,"system-label",18),i.qZA(),i.TgZ(25,"option",19),i._UZ(26,"system-label",20),i.qZA(),i.TgZ(27,"option",21),i._UZ(28,"system-label",22),i.qZA()()()()(),i.YNc(29,m,2,0,"button",23),i.qZA(),i.TgZ(30,"ul"),i.YNc(31,g,2,1,"li",24),i.YNc(32,f,2,1,"ng-container",25),i.qZA(),i.TgZ(33,"div",26)(34,"button",27),i.NdJ("click",(function(){return t.addExpression()})),i._UZ(35,"system-button-icon",28)(36,"system-label",29),i.qZA(),i.TgZ(37,"button",27),i.NdJ("click",(function(){return t.addGroup()})),i._UZ(38,"system-button-icon",28)(39,"system-label",30),i.qZA()()()()),2&e&&(i.xp6(8),i.Q6J("ngModel",t.filtergroup.logicaloperator),i.xp6(10),i.Q6J("ngModel",t.filtergroup.groupscope),i.xp6(11),i.Q6J("ngIf",t.candelete),i.xp6(2),i.Q6J("ngForOf",t.expressions),i.xp6(1),i.Q6J("ngForOf",t.groups))},dependencies:[a.sg,a.O5,d.YN,d.Kr,d.EJ,d.JJ,d.On,r.J,c._,SystemFilterBuilderFilterExpressionGroup,u.H],encapsulation:2}),SystemFilterBuilderFilterExpressionGroup})()},7706:(e,t,s)=>{"use strict";s.d(t,{U:()=>y});var i=s(1571),n=s(433),l=s(4154),o=s(6895),a=s(3772),d=s(638),r=s(5147),c=s(1555),u=s(6822),m=s(4846);function h(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"system-input-integer",5),i.NdJ("ngModelChange",(function(t){i.CHM(e);const s=i.oxw();return i.KtG(s.value=t)})),i.qZA()}if(2&e){const e=i.oxw();i.Q6J("ngModel",e.value)}}function g(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"system-input-date",5),i.NdJ("ngModelChange",(function(t){i.CHM(e);const s=i.oxw();return i.KtG(s.value=t)})),i.qZA()}if(2&e){const e=i.oxw();i.Q6J("ngModel",e.value)}}function p(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"system-input-enum",6),i.NdJ("ngModelChange",(function(t){i.CHM(e);const s=i.oxw();return i.KtG(s.value=t)})),i.qZA()}if(2&e){const e=i.oxw();i.Q6J("module",e.module)("field",e.field)("ngModel",e.value)}}function f(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"system-input-multienum",6),i.NdJ("ngModelChange",(function(t){i.CHM(e);const s=i.oxw();return i.KtG(s.value=t)})),i.qZA()}if(2&e){const e=i.oxw();i.Q6J("module",e.module)("field",e.field)("ngModel",e.value)}}function b(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"system-input-relate",7),i.NdJ("ngModelChange",(function(t){i.CHM(e);const s=i.oxw();return i.KtG(s.value=t)})),i.qZA()}if(2&e){const e=i.oxw();i.Q6J("module",e.relatedmodule)("ngModel",e.value)}}function _(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"system-input-text",5),i.NdJ("ngModelChange",(function(t){i.CHM(e);const s=i.oxw();return i.KtG(s.value=t)})),i.qZA()}if(2&e){const e=i.oxw();i.Q6J("ngModel",e.value)}}let y=(()=>{class SystemFilterBuilderFilterExpressionValue{constructor(e){this.metadata=e}get value(){return this._value}set value(e){switch(this._value=e,this.valueType){case"date":this.onChange(e.format("YYYY-MM-DD"));break;case"multienum":this.onChange(e.join(","));break;default:this.onChange(e)}}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}writeValue(e){switch(this._value=e,this.valueType){case"date":this._value=new moment(e);break;case"multienum":this._value=e?e.split(","):[];break;default:this._value=e}}get relatedmodule(){return this.metadata.getFieldDefs(this.module,this.field).module}}return SystemFilterBuilderFilterExpressionValue.ɵfac=function(e){return new(e||SystemFilterBuilderFilterExpressionValue)(i.Y36(l.Pu))},SystemFilterBuilderFilterExpressionValue.ɵcmp=i.Xpm({type:SystemFilterBuilderFilterExpressionValue,selectors:[["system-filter-builder-expression-value"]],inputs:{module:"module",field:"field",valueType:"valueType"},features:[i._Bn([{provide:n.JU,useExisting:(0,i.Gpc)((()=>SystemFilterBuilderFilterExpressionValue)),multi:!0}])],decls:7,vars:6,consts:[[3,"ngSwitch"],[3,"ngModel","ngModelChange",4,"ngSwitchCase"],[3,"module","field","ngModel","ngModelChange",4,"ngSwitchCase"],[3,"module","ngModel","ngModelChange",4,"ngSwitchCase"],[3,"ngModel","ngModelChange",4,"ngSwitchDefault"],[3,"ngModel","ngModelChange"],[3,"module","field","ngModel","ngModelChange"],[3,"module","ngModel","ngModelChange"]],template:function(e,t){1&e&&(i.ynx(0,0),i.YNc(1,h,1,1,"system-input-integer",1),i.YNc(2,g,1,1,"system-input-date",1),i.YNc(3,p,1,3,"system-input-enum",2),i.YNc(4,f,1,3,"system-input-multienum",2),i.YNc(5,b,1,2,"system-input-relate",3),i.YNc(6,_,1,1,"system-input-text",4),i.BQk()),2&e&&(i.Q6J("ngSwitch",t.valueType),i.xp6(1),i.Q6J("ngSwitchCase","integer"),i.xp6(1),i.Q6J("ngSwitchCase","date"),i.xp6(1),i.Q6J("ngSwitchCase","enum"),i.xp6(1),i.Q6J("ngSwitchCase","multienum"),i.xp6(1),i.Q6J("ngSwitchCase","relate"))},dependencies:[o.RF,o.n9,o.ED,n.JJ,n.On,a.Z,d.n,r.r,c.u,u.z,m.z],encapsulation:2}),SystemFilterBuilderFilterExpressionValue})()},7617:(e,t,s)=>{"use strict";s.d(t,{w:()=>g});var i=s(1571),n=s(4505),l=s(5329),o=s(4154),a=s(6895),d=s(433),r=s(3463),c=s(7706);function u(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"div",3)(1,"label",4),i._UZ(2,"system-label",5),i.qZA(),i.TgZ(3,"system-filter-builder-expression-value",6),i.NdJ("ngModelChange",(function(t){i.CHM(e);const s=i.oxw(2);return i.KtG(s.filterexpression.filtervalue=t)})),i.qZA()()}if(2&e){const e=i.oxw(2);i.xp6(3),i.Q6J("ngModel",e.filterexpression.filtervalue)("valueType",e.value1)("module",e.module)("field",e.field)}}function m(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"div",3)(1,"label",4),i._UZ(2,"system-label",5),i.qZA(),i.TgZ(3,"system-filter-builder-expression-value",6),i.NdJ("ngModelChange",(function(t){i.CHM(e);const s=i.oxw(2);return i.KtG(s.filterexpression.filtervalueto=t)})),i.qZA()()}if(2&e){const e=i.oxw(2);i.xp6(3),i.Q6J("ngModel",e.filterexpression.filtervalueto)("valueType",e.value2)("module",e.module)("field",e.field)}}function h(e,t){if(1&e&&(i.TgZ(0,"div",1),i.YNc(1,u,4,4,"div",2),i.YNc(2,m,4,4,"div",2),i.qZA()),2&e){const e=i.oxw();i.xp6(1),i.Q6J("ngIf",e.value1),i.xp6(1),i.Q6J("ngIf",e.value2)}}let g=(()=>{class SystemFilterBuilderFilterExpressionValues{constructor(e,t,s){this.backend=e,this.language=t,this.metadata=s,this.filterexpression={}}ngOnChanges(e){}get value1(){return this.operators.find((e=>e.operator==this.operator)).value1}get value2(){return this.operators.find((e=>e.operator==this.operator)).value2}showValues(){return this.operator.value1||this.operator.value2}}return SystemFilterBuilderFilterExpressionValues.ɵfac=function(e){return new(e||SystemFilterBuilderFilterExpressionValues)(i.Y36(n.y),i.Y36(l.d),i.Y36(o.Pu))},SystemFilterBuilderFilterExpressionValues.ɵcmp=i.Xpm({type:SystemFilterBuilderFilterExpressionValues,selectors:[["system-filter-builder-expression-values"]],inputs:{module:"module",field:"field",operator:"operator",operators:"operators",filterexpression:"filterexpression"},features:[i.TTD],decls:1,vars:1,consts:[["class","slds-col",4,"ngIf"],[1,"slds-col"],["class","slds-form-element",4,"ngIf"],[1,"slds-form-element"],[1,"slds-form-element__label"],["label","LBL_VALUE"],[3,"ngModel","valueType","module","field","ngModelChange"]],template:function(e,t){1&e&&i.YNc(0,h,3,2,"div",0),2&e&&i.Q6J("ngIf",""!=t.operator&&t.value1)},dependencies:[a.O5,d.JJ,d.On,r._,c.U],encapsulation:2}),SystemFilterBuilderFilterExpressionValues})()},5659:(e,t,s)=>{"use strict";s.d(t,{t:()=>h});var i=s(1571),n=s(5329),l=s(4505),o=s(6625),a=s(6895),d=s(433),r=s(34);function c(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"li",11),i.NdJ("click",(function(){const t=i.CHM(e).$implicit,s=i.oxw(2);return i.KtG(s.getAddressDetail(t.place_id))})),i.TgZ(1,"div",12)(2,"a",13),i._uU(3),i.qZA()()()}if(2&e){const e=t.$implicit;i.xp6(3),i.Oqu(e.description)}}const u=function(e){return{"slds-is-open":e}};function m(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"div",1)(1,"div",2)(2,"div",3)(3,"div",4)(4,"div",5)(5,"input",6),i.NdJ("ngModelChange",(function(t){i.CHM(e);const s=i.oxw();return i.KtG(s.searchterm=t)}))("focus",(function(){i.CHM(e);const t=i.oxw();return i.KtG(t.onSearchFocus())})),i.qZA(),i._UZ(6,"system-custom-icon",7),i.qZA(),i.TgZ(7,"div",8)(8,"ul",9),i.YNc(9,c,4,1,"li",10),i.qZA()()()()()()}if(2&e){const e=i.oxw();i.xp6(3),i.Q6J("ngClass",i.VKq(6,u,e.displayAutocompleteResults)),i.xp6(2),i.Q6J("placeholder",e.language.getLabel("LBL_SEARCH_ADDRESS"))("ngModel",e.searchterm)("disabled",e.disabled),i.xp6(1),i.Q6J("desaturate",!e.isSearching),i.xp6(3),i.Q6J("ngForOf",e.autocompleteResults)}}let h=(()=>{class SystemGooglePlacesAutocomplete{constructor(e,t,s,n,l,o){this.language=e,this.backend=t,this.configuration=s,this.elementref=n,this.cdRef=l,this.renderer=o,this.address=new i.vpe,this.disabled=!1,this.isenabled=!1,this.autocompletesearchterm="",this.autocompleteTimeout=void 0,this.autocompleteResults=[],this.autocompleteClickListener=void 0,this.displayAutocompleteResults=!1,this.isSearching=!1;let a=this.configuration.getCapabilityConfig("google_api");a.key&&""!=a.key&&(this.isenabled=!0)}get searchterm(){return this.autocompletesearchterm}set searchterm(e){this.autocompletesearchterm=e,this.autocompleteTimeout&&window.clearTimeout(this.autocompleteTimeout),this.autocompleteTimeout=window.setTimeout((()=>this.doAutocomplete()),500)}ngOnDestroy(){this.autocompleteClickListener&&this.autocompleteClickListener()}onSearchFocus(){this.autocompletesearchterm.length>1&&this.autocompleteResults.length>0&&this.openSearchResults()}openSearchResults(){this.displayAutocompleteResults=!0,this.autocompleteClickListener=this.renderer.listen("document","click",(e=>this.onClick(e))),this.cdRef.detectChanges()}onClick(e){this.elementref.nativeElement.contains(e.target)||this.closeSearchResutls()}closeSearchResutls(){this.autocompleteClickListener&&this.autocompleteClickListener(),this.displayAutocompleteResults=!1,this.cdRef.detectChanges()}doAutocomplete(){if(this.autocompletesearchterm.length>5){this.isSearching=!0;const e=encodeURIComponent(this.autocompletesearchterm);this.backend.getRequest("channels/groupware/gsuite/places/autocomplete/"+e).subscribe((e=>{e.predictions&&e.predictions.length>0?(this.autocompleteResults=e.predictions,this.openSearchResults(),this.isSearching=!1):(this.autocompleteResults=[],this.closeSearchResutls(),this.isSearching=!1)}),(e=>{this.isSearching=!1}))}else this.closeSearchResutls()}getAddressDetail(e){this.displayAutocompleteResults=!1,this.autocompletesearchterm="",this.backend.getRequest("channels/groupware/gsuite/places/"+e).subscribe((e=>{let t={street:e.address.street,street_name:e.address.street_name,street_number:e.address.street_number,city:e.address.city,district:e.address.district,postalcode:e.address.postalcode,state:e.address.state,country:e.address.country,latitude:parseFloat(e.address.location.lat),longitude:parseFloat(e.address.location.lng)};this.address.emit(t),this.autocompletesearchterm=e.formatted_address,this.cdRef.detectChanges()}))}}return SystemGooglePlacesAutocomplete.ɵfac=function(e){return new(e||SystemGooglePlacesAutocomplete)(i.Y36(n.d),i.Y36(l.y),i.Y36(o.C),i.Y36(i.SBq),i.Y36(i.sBO),i.Y36(i.Qsj))},SystemGooglePlacesAutocomplete.ɵcmp=i.Xpm({type:SystemGooglePlacesAutocomplete,selectors:[["system-googleplaces-autocomplete"]],inputs:{disabled:"disabled"},outputs:{address:"address"},decls:1,vars:1,consts:[["class","slds-form-element",4,"ngIf"],[1,"slds-form-element"],[1,"slds-form-element__control"],[1,"slds-combobox_container"],["role","combobox",1,"slds-combobox","slds-dropdown-trigger","slds-dropdown-trigger_click",3,"ngClass"],["role","none",1,"slds-combobox__form-element","slds-input-has-icon","slds-input-has-icon_right"],["type","text","autocomplete","new-password",1,"slds-input","slds-combobox__input",3,"placeholder","ngModel","disabled","ngModelChange","focus"],["icon","google","addclasses","slds-input__icon slds-input__icon--left",3,"desaturate"],["role","listbox",1,"slds-dropdown","slds-dropdown_length-with-icon-7","slds-dropdown_fluid"],["role","presentation",1,"slds-listbox","slds-listbox_vertical"],["class","slds-listbox__item","role","presentation",3,"click",4,"ngFor","ngForOf"],["role","presentation",1,"slds-listbox__item",3,"click"],[1,"slds-lookup__result-text","slds-p-around--x-small"],["href","javascript:void(0)"]],template:function(e,t){1&e&&i.YNc(0,m,10,8,"div",0),2&e&&i.Q6J("ngIf",t.isenabled)},dependencies:[a.mk,a.sg,a.O5,d.Fj,d.JJ,d.On,r.$],encapsulation:2}),SystemGooglePlacesAutocomplete})()},3845:(e,t,s)=>{"use strict";s.d(t,{l:()=>g});var i=s(1571),n=s(433),l=s(5329),o=s(4505),a=s(6625),d=s(6895),r=s(34);const c=["inputfield"];function u(e,t){if(1&e&&i._UZ(0,"system-custom-icon",11),2&e){const e=i.oxw();i.Q6J("desaturate",!e.isSearching)}}function m(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"li",12),i.NdJ("click",(function(){const t=i.CHM(e).$implicit,s=i.oxw();return i.KtG(s.getDetails(t))})),i.TgZ(1,"div",13)(2,"a",14),i._uU(3),i.qZA()()()}if(2&e){const e=t.$implicit;i.xp6(3),i.AsE("",e.name,", ",e.formatted_address,"")}}const h=function(e){return{"slds-is-open":e}};let g=(()=>{class SystemGooglePlacesSearch{constructor(e,t,s,n,l){this.language=e,this.backend=t,this.configuration=s,this.elementref=n,this.renderer=l,this.details=new i.vpe,this.isenabled=!1,this.autocompletesearchterm="",this.autocompleteTimeout=void 0,this.autocompleteResults=[],this.autocompleteClickListener=void 0,this.displayAutocompleteResults=!1,this.isSearching=!1,this.locationbias="ipbias ";let o=this.configuration.getCapabilityConfig("google_api");o.key&&""!=o.key&&(this.isenabled=!0),navigator.geolocation.getCurrentPosition((e=>{this.locationbias=`point:${e.coords.latitude},${e.coords.longitude}`})),this.elementref.nativeElement.focus=()=>{this.focus()}}focus(){setTimeout((()=>{this.inputfield.element.nativeElement.tabIndex||(this.inputfield.element.nativeElement.tabIndex="-1"),this.inputfield.element.nativeElement.focus()}))}get searchterm(){return this.autocompletesearchterm}set searchterm(e){this.autocompletesearchterm=e,this.isenabled&&(this.autocompleteTimeout&&window.clearTimeout(this.autocompleteTimeout),this.autocompleteTimeout=window.setTimeout((()=>this.doAutocomplete()),500))}get placeholder(){return this.isenabled?this.language.getLabel("LBL_SEARCH"):""}updateModel(){this.onChange(this.autocompletesearchterm)}onSearchFocus(){this.autocompletesearchterm.length>1&&this.autocompleteResults.length>0&&this.openSearchResults()}openSearchResults(){this.displayAutocompleteResults=!0,this.autocompleteClickListener=this.renderer.listen("document","click",(e=>this.onClick(e)))}onClick(e){this.elementref.nativeElement.contains(e.target)||this.closeSearchResutls()}closeSearchResutls(){this.autocompleteClickListener&&this.autocompleteClickListener(),this.displayAutocompleteResults=!1,this.autocompleteResults=[]}doAutocomplete(){if(this.autocompletesearchterm.length>3){this.isSearching=!0;const e=encodeURIComponent(this.autocompletesearchterm),t=encodeURIComponent(this.locationbias);this.backend.getRequest(`channels/groupware/gsuite/places/search/${e}/${t}`).subscribe((e=>{e.candidates&&e.candidates.length>0?(this.autocompleteResults=e.candidates,this.openSearchResults(),this.isSearching=!1):(this.autocompleteResults=[],this.closeSearchResutls(),this.isSearching=!1)}),(e=>{this.isSearching=!1}))}}getDetails(e){this.displayAutocompleteResults=!1,this.autocompleteResults=[],this.autocompletesearchterm=e.name;e.formatted_address;this.onChange(e.name),this.isSearching=!0,this.backend.getRequest("channels/groupware/gsuite/places/"+e.place_id).subscribe((e=>{this.details.emit({address:{street:e.address.street,street_name:e.address.street_name,street_number:e.address.street_number,city:e.address.city,district:e.address.district,postalcode:e.address.postalcode,state:e.address.state,country:e.address.country,latitude:parseFloat(e.address.location.lat),longitude:parseFloat(e.address.location.lng)},formatted_phone_number:e.formatted_phone_number,formatted_address:e.formatted_address,international_phone_number:e.international_phone_number,website:e.website,name:e.name}),this.isSearching=!1}),(e=>{this.isSearching=!1}))}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}writeValue(e){this.autocompletesearchterm=e||""}}return SystemGooglePlacesSearch.ɵfac=function(e){return new(e||SystemGooglePlacesSearch)(i.Y36(l.d),i.Y36(o.y),i.Y36(a.C),i.Y36(i.SBq),i.Y36(i.Qsj))},SystemGooglePlacesSearch.ɵcmp=i.Xpm({type:SystemGooglePlacesSearch,selectors:[["system-googleplaces-search"]],viewQuery:function(e,t){if(1&e&&i.Gf(c,7,i.s_b),2&e){let e;i.iGM(e=i.CRH())&&(t.inputfield=e.first)}},hostAttrs:["focus","focus()"],outputs:{details:"details"},features:[i._Bn([{provide:n.JU,useExisting:(0,i.Gpc)((()=>SystemGooglePlacesSearch)),multi:!0}])],decls:11,vars:7,consts:[[1,"slds-form-element"],[1,"slds-form-element__control"],[1,"slds-combobox_container"],["role","combobox",1,"slds-combobox","slds-dropdown-trigger","slds-dropdown-trigger_click",3,"ngClass"],["role","none",1,"slds-combobox__form-element","slds-input-has-icon","slds-input-has-icon_right"],["type","text",1,"slds-input","slds-combobox__input",3,"placeholder","ngModel","ngModelChange","focus","blur"],["inputfield",""],["icon","google","addclasses","slds-input__icon slds-input__icon--left",3,"desaturate",4,"ngIf"],["role","listbox",1,"slds-dropdown","slds-dropdown_length-with-icon-7","slds-dropdown_fluid"],["role","presentation",1,"slds-listbox","slds-listbox_vertical"],["class","slds-listbox__item","role","presentation",3,"click",4,"ngFor","ngForOf"],["icon","google","addclasses","slds-input__icon slds-input__icon--left",3,"desaturate"],["role","presentation",1,"slds-listbox__item",3,"click"],[1,"slds-lookup__result-text","slds-p-around--x-small"],["href","javascript:void(0)"]],template:function(e,t){1&e&&(i.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"input",5,6),i.NdJ("ngModelChange",(function(e){return t.searchterm=e}))("focus",(function(){return t.onSearchFocus()}))("blur",(function(){return t.updateModel()})),i.qZA(),i.YNc(7,u,1,1,"system-custom-icon",7),i.qZA(),i.TgZ(8,"div",8)(9,"ul",9),i.YNc(10,m,4,2,"li",10),i.qZA()()()()()()),2&e&&(i.xp6(3),i.Q6J("ngClass",i.VKq(5,h,t.displayAutocompleteResults)),i.xp6(2),i.Q6J("placeholder",t.placeholder)("ngModel",t.searchterm),i.xp6(2),i.Q6J("ngIf",t.isenabled),i.xp6(3),i.Q6J("ngForOf",t.autocompleteResults))},dependencies:[d.mk,d.sg,d.O5,n.Fj,n.JJ,n.On,r.$],encapsulation:2}),SystemGooglePlacesSearch})()},3091:(e,t,s)=>{"use strict";s.d(t,{e:()=>T});var i=s(1571),n=s(433),l=s(6895),o=s(4817),a=s(5698),d=s(4044),r=s(4154),c=s(5329),u=s(5710),m=s(3441),h=s(2656);const g=["htmleditor"];function p(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"button",29),i.NdJ("click",(function(){i.CHM(e);const t=i.oxw();return i.KtG(t.save$.emit(t._html))})),i._UZ(1,"system-button-icon",30),i.qZA()}if(2&e){const e=i.oxw();i.Q6J("title",e.language.getLabel("LBL_SAVE"))}}function f(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"ul",5)(1,"li")(2,"button",19),i.NdJ("click",(function(){i.CHM(e);const t=i.oxw();return i.KtG(t.executeCommand("undo"))})),i._UZ(3,"system-button-icon",31),i.TgZ(4,"span",32),i._uU(5,"undo"),i.qZA()()(),i.TgZ(6,"li")(7,"button",19),i.NdJ("click",(function(){i.CHM(e);const t=i.oxw();return i.KtG(t.executeCommand("redo"))})),i._UZ(8,"system-button-icon",33),i.TgZ(9,"span",32),i._uU(10,"redo"),i.qZA()()()()}if(2&e){const e=i.oxw();i.xp6(2),i.Q6J("title",e.language.getLabel("LBL_UNDO")),i.xp6(5),i.Q6J("title",e.language.getLabel("LBL_REDO"))}}function b(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"div",34)(1,"div",35)(2,"div",36)(3,"div",37)(4,"div",38)(5,"select",39),i.NdJ("ngModelChange",(function(t){i.CHM(e);const s=i.oxw();return i.KtG(s.block=t)}))("change",(function(){i.CHM(e);const t=i.oxw();return i.KtG(t.executeCommand(t.block))})),i.TgZ(6,"option",40)(7,"h1"),i._uU(8,"Heading 1"),i.qZA()(),i.TgZ(9,"option",41)(10,"h2"),i._uU(11,"Heading 2"),i.qZA()(),i.TgZ(12,"option",42)(13,"h3"),i._uU(14,"Heading 3"),i.qZA()(),i.TgZ(15,"option",43),i._uU(16,"Heading 4"),i.qZA(),i.TgZ(17,"option",44),i._uU(18,"Heading 5"),i.qZA(),i.TgZ(19,"option",45),i._uU(20,"Heading 6"),i.qZA(),i.TgZ(21,"option",46),i._uU(22,"Paragraph"),i.qZA(),i.TgZ(23,"option",47),i._uU(24,"Predefined"),i.qZA(),i.TgZ(25,"option",48),i._uU(26,"Standard"),i.qZA(),i.TgZ(27,"option",49),i._uU(28,"Default"),i.qZA()()()()()()()}if(2&e){const e=i.oxw();i.xp6(5),i.Q6J("ngModel",e.block)}}function _(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"li")(1,"button",19),i.NdJ("click",(function(){i.CHM(e);const t=i.oxw(2);return i.KtG(t.executeCommand("openMediaFilePicker"))})),i._UZ(2,"system-button-icon",53),i.qZA()()}if(2&e){const e=i.oxw(2);i.xp6(1),i.Q6J("title",e.language.getLabel("LBL_NEW_IMAGE"))}}function y(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"ul",5)(1,"li")(2,"button",19),i.NdJ("click",(function(){i.CHM(e);const t=i.oxw();return i.KtG(t.executeCommand("insertImage"))})),i._UZ(3,"system-button-icon",50),i.qZA()(),i.YNc(4,_,3,1,"li",22),i.TgZ(5,"li")(6,"button",19),i.NdJ("click",(function(){i.CHM(e);const t=i.oxw();return i.KtG(t.addVideo())})),i._UZ(7,"system-button-icon",51),i.qZA()(),i.TgZ(8,"li")(9,"button",19),i.NdJ("click",(function(){i.CHM(e);const t=i.oxw();return i.KtG(t.addCodeSnippet())})),i._UZ(10,"system-button-icon",52),i.qZA()()()}if(2&e){const e=i.oxw();i.xp6(2),i.Q6J("title",e.language.getLabel("LBL_NEW_IMAGE")),i.xp6(2),i.Q6J("ngIf",e.useMedialFile),i.xp6(2),i.Q6J("title",e.language.getLabel("LBL_ADD_VIDEO")),i.xp6(3),i.Q6J("title",e.language.getLabel("LBL_ADD_CODE_SNIPPET"))}}function v(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"li")(1,"button",19),i.NdJ("click",(function(){i.CHM(e);const t=i.oxw();return i.KtG(t.executeCommand("openTemplateVariableHelper"))})),i._UZ(2,"system-button-icon",54),i.qZA()()}if(2&e){const e=i.oxw();i.xp6(1),i.Q6J("title",e.language.getLabel("LBL_TEMPLATE_VARIABLE_HELPER"))}}function x(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"ul",5)(1,"li")(2,"button",19),i.NdJ("click",(function(){i.CHM(e);const t=i.oxw();return i.KtG(t.executeCommand("openSourceEditor"))})),i._UZ(3,"system-button-icon",55),i.qZA()(),i.TgZ(4,"li")(5,"button",19),i.NdJ("click",(function(){i.CHM(e);const t=i.oxw();return i.KtG(t.executeCommand("toggleFullscreen"))})),i._UZ(6,"system-button-icon",56),i.qZA()()()}if(2&e){const e=i.oxw();i.xp6(2),i.Q6J("title",e.language.getLabel("LBL_SOURCE_EDITOR")),i.xp6(3),i.Q6J("title",e.language.getLabel("LBL_EXPAND")),i.xp6(1),i.Q6J("icon",e.expandIcon)}}const Z=function(e){return{"slds-active":e}},w=["*"];let T=(()=>{class SystemHtmlEditor{constructor(e,t,s,n,l,o,a,d,r,c){this.modal=e,this.renderer=t,this.metadata=s,this.editorService=n,this._document=l,this.elementRef=o,this.language=a,this.viewContainerRef=d,this.model=r,this.helper=c,this.extendedmode=!0,this.useMedialFile=!1,this._html="",this.isActive=!1,this.modalOpen=!1,this.isExpanded=!1,this.block="default",this.fontName="Tilium Web",this.fontSize="5",this.tagMap={BLOCKQUOTE:"indent",A:"link"},this.save$=new i.vpe,this.select=["H1","H2","H3","H4","H5","H6","P","PRE","DIV"]}get useTemplateVariableHelper(){return"OutputTemplates"===this.model?.module||"EmailTemplates"===this.model?.module||"CampaignTasks"===this.model?.module}get expandIcon(){return this.isExpanded?"contract_alt":"expand_alt"}get innerHeight(){return this.innerheight?this.innerheight:"250"}get richTextStyle(){return this.isExpanded?{height:"100vh",resize:"none",position:"fixed"}:{height:+this.innerHeight+50+"px"}}ngOnInit(){this.handleKeyboardShortcuts(),this.editorService.editorContainer=this.htmlEditor.element.nativeElement}ngOnDestroy(){this.clickListener&&this.clickListener(),this.keydownListener&&this.keydownListener()}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}writeValue(e){this._html=e||"",this.renderer.setProperty(this.htmlEditor.element.nativeElement,"innerHTML",this._html)}executeCommand(e){switch(e){case"openSourceEditor":this.openSourceEditor();break;case"toggleFullscreen":this.isExpanded=!this.isExpanded;break;case"openMediaFilePicker":this.openMediaFilePicker();break;case"insertImage":this.insertImage();break;case"openTemplateVariableHelper":this.openTemplateVariableHelper();break;default:this.isActive&&""!=e&&this.editorService.executeCommand(e),this.exec()}}onEditorClick(e){this.isActive||(this.isActive=!0,this.focusEditor(),this.clickListener=this.renderer.listen("document","click",(e=>this.onDocumentClick(e)))),e.stopPropagation()}onDocumentClick(e){this.modalOpen||this.elementRef.nativeElement.contains(e.target)||(this.isActive=!1,this.clickListener())}onContentChange(e){"function"==typeof this.onChange&&this.onChange(e),this._html=e}exec(){let e;window.getSelection&&(e=window.getSelection());let t=e.focusNode;const s=[];for(;t&&"editor"!==t.id;)s.unshift(t),t=t.parentNode;this.triggerBlocks(s)}insertImage(){this.editorService.saveSelection(),this.modal.input(this.language.getLabel("LBL_IMAGE_LINK",this.language.getLabel("LBL_IMAGE"))).pipe((0,a.q)(1)).subscribe((e=>{e&&(this.focusEditor(),this.editorService.restoreSelection(),this.editorService.insertImage(e,this.htmlEditor.element.nativeElement),this.onContentChange(this.htmlEditor.element.nativeElement.innerHTML))}))}openMediaFilePicker(){this.editorService.saveSelection(),this.modalOpen=!0,this.modal.openModal("MediaFilePicker").pipe((0,a.q)(1)).subscribe((e=>{e.instance.answer.subscribe((e=>{e&&(e.upload?this.modal.openModal("MediaFileUploader").subscribe((e=>{e.instance.answer.subscribe((e=>{e&&(this.focusEditor(),this.editorService.restoreSelection(),this.editorService.insertImage("https://cdn.spicecrm.io/"+e,this.htmlEditor.element.nativeElement),this.onContentChange(this.htmlEditor.element.nativeElement.innerHTML)),this.modalOpen=!1}))})):(e.id&&(this.focusEditor(),this.editorService.restoreSelection(),this.editorService.insertImage("https://cdn.spicecrm.io/"+e.id,this.htmlEditor.element.nativeElement),this.onContentChange(this.htmlEditor.element.nativeElement.innerHTML)),this.modalOpen=!1))}))}))}openSourceEditor(){this.modal.openModal("SystemRichTextSourceModal",!0,this.viewContainerRef.injector).pipe((0,a.q)(1)).subscribe((e=>{e.instance._html=this._html,e.instance.html.subscribe((e=>{this._html=e,"function"==typeof this.onChange&&this.onChange(e),this.renderer.setProperty(this.htmlEditor.element.nativeElement,"innerHTML",this._html)}))}))}commandIsActive(e){return this.isActive&&this._document.queryCommandState(e)}triggerBlocks(e){if(!this.isActive)return;let t=!1;this.select.forEach((s=>{const i=e.find((e=>e.nodeName===s));void 0===i||s!==i.nodeName&&"code"!=i.nodeName?!1===t&&(this.block="default"):!1===t&&(this.block=i.nodeName.toLowerCase(),t=!0)})),t=!1}insertAnchor(){this.editorService.selectedText=this.getSelectedText(),this.editorService.saveSelection();let e=null;e="A"===this.editorService.savedSelectionParentElement.nodeName?this.editorService.savedSelectionParentElement:this.editorService.savedSelectionParentElement.closest("a"),this.modal.openModal("SystemRichTextLink",!0).pipe((0,a.q)(1)).subscribe((t=>{t.instance.text=this.editorService.selectedText,t.instance.parent=this.model,t.instance.editorService=this.editorService,e&&(t.instance.alterMode=!0,t.instance.url=e.href,t.instance.trackingId=e.dataset.trackingid,t.instance.marketingAction=e.dataset.marketingaction),t.instance.response.pipe((0,a.q)(1)).subscribe((t=>{if(t){if(e)e.href=t.url,"conv"===t.linkType&&t.trackingId?e.dataset.trackingid=t.trackingId:delete e.dataset.trackingid,t.marketingAction?e.dataset.marketingaction=t.marketingAction:delete e.dataset.marketingaction;else{t.text||(t.text=t.url),this.editorService.restoreSelection();let e=t.text;this.editorService.selectedText===t.text&&(e=this.editorService.selectedHtml);let s={};"conv"===t.linkType&&t.toTrack&&(s.trackingid=t.trackingId),"mark"===t.linkType&&(s.marketingaction=t.marketingAction),this.editorService.insertAnchor(t.url,e,s)}this.onContentChange(this.htmlEditor.element.nativeElement.innerHTML)}}))}))}removeAnchor(){let e;this.editorService.selectedText=this.getSelectedText(),this.editorService.saveSelection(),e="A"===this.editorService.savedSelectionParentElement.nodeName?this.editorService.savedSelectionParentElement:this.editorService.savedSelectionParentElement.closest("a"),e&&(e.outerHTML=e.innerHTML,this.onContentChange(this.htmlEditor.element.nativeElement.innerHTML))}addVideo(){this.isActive&&(this.editorService.saveSelection(),this.modal.input("Add Video","Insert Video URL").pipe((0,a.q)(1)).subscribe((e=>{if(!e||0==e.length)return;this.focusEditor(),this.editorService.restoreSelection();let t=/https?:\/\/(?:www\.)?vimeo.com\/(?:channels\/(?:\w+\/)?|groups\/([^\/]*)\/videos\/|album\/(\d+)\/video\/|)(\d+)(?:$|\/|\?)/,s=/^.*((youtu.be\/)|(v\/)|(\/u\/\w\/)|(embed\/)|(watch\?))\??v?=?([^#\&\?]*).*/;e.match(t)&&(e="https://player.vimeo.com/video/"+e.match(t)[3]),e.match(s)&&(e="https://www.youtube.com/embed/"+e.match(s)[7]);let i=`<iframe src="${e}" frameborder="0" allow="encrypted-media" allowfullscreen></iframe>`;this._document.execCommand("insertHTML",!1,i)})))}getSelectedText(){return window.getSelection?window.getSelection().toString():this._document.selection&&"Control"!=this._document.selection.type?this._document.selection.createRange().text:void 0}insertColor(e,t){this.editorService.insertColor(e,t)}setFontName(e){this.editorService.setFontName(e)}setFontSize(e){this.editorService.setFontSize(e)}onFileChanged(e){}setCustomClass(e){}encodeHtml(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}addCodeSnippet(){if(!this.isActive)return;let e=`<br><pre style="background-color: #eee;border-radius: .2rem; border:1px solid #ccc; padding: .5rem"><code>${this.encodeHtml(this.getSelectedText())||"&nbsp;"}</code></pre><br>`;this._document.execCommand("insertHTML",!1,e)}onPaste(e){if("CODE"==e.target.nodeName){e.preventDefault();let t=(e.originalEvent||e).clipboardData.getData("text/plain");document.execCommand("insertHTML",!1,this.encodeHtml(t))}}handleKeyboardShortcuts(){this.keydownListener=this.renderer.listen("document","keydown",(e=>{(window.navigator.platform.match("Mac")?e.metaKey:e.ctrlKey)&&"s"==e.key.toLowerCase()&&(e.preventDefault(),this.save$.emit(this._html))}))}focusEditor(){this.htmlEditor.element.nativeElement.focus()}openTemplateVariableHelper(){this.isActive&&(this.editorService.saveSelection(),this.modalOpen=!0,this.modal.openModal("OutputTemplatesVariableHelper",null,this.viewContainerRef.injector).pipe((0,a.q)(1)).subscribe((e=>{e.instance.response.pipe((0,a.q)(1)).subscribe((e=>{this.focusEditor(),this.editorService.restoreSelection(),this._document.execCommand("insertText",!1,"{"+e+"}"),this.modalOpen=!1}))})))}getHtmlFromSelection(){let e,t=window.getSelection();t.getRangeAt?e=t.getRangeAt(0):(e=document.createRange(),e.setStart(t.anchorNode,t.anchorOffset),e.setEnd(t.focusNode,t.focusOffset));let s=e.cloneContents(),i=document.createElement("div");return i.appendChild(s),i.innerHTML}}return SystemHtmlEditor.ɵfac=function(e){return new(e||SystemHtmlEditor)(i.Y36(d.o),i.Y36(i.Qsj),i.Y36(r.Pu),i.Y36(o.L),i.Y36(l.K0),i.Y36(i.SBq),i.Y36(c.d),i.Y36(i.s_b),i.Y36(u.o,8),i.Y36(m._))},SystemHtmlEditor.ɵcmp=i.Xpm({type:SystemHtmlEditor,selectors:[["system-html-editor"]],viewQuery:function(e,t){if(1&e&&i.Gf(g,7,i.s_b),2&e){let e;i.iGM(e=i.CRH())&&(t.htmlEditor=e.first)}},inputs:{extendedmode:"extendedmode",innerheight:"innerheight",useMedialFile:"useMedialFile"},outputs:{save$:"save$"},features:[i._Bn([{provide:n.JU,useExisting:(0,i.Gpc)((()=>SystemHtmlEditor)),multi:!0},o.L])],ngContentSelectors:w,decls:66,vars:59,consts:[[1,"slds-rich-text-editor","slds-grid","slds-grid_vertical","slds-nowrap","slds-grid","slds-grid--vertical","slds-theme--default",2,"top","0","right","0","left","0","bottom","0","z-index","9999",3,"ngStyle","click"],["role","toolbar",1,"slds-rich-text-editor__toolbar","slds-shrink-none"],["class","slds-button slds-button_icon slds-button_icon-border-filled slds-m-right--xx-small","tabindex","-1",3,"title","click",4,"ngIf"],["class","slds-button-group-list",4,"ngIf"],["class","slds-grid slds-rich-text-editor__spacing-wrapper","role","group",4,"ngIf"],[1,"slds-button-group-list"],["tabindex","-1",1,"slds-button","slds-button_icon","slds-button_icon-border-filled",3,"title","ngClass","click"],["icon","bold"],["icon","italic"],["icon","underline"],["icon","strikethrough"],["icon","richtextbulletedlist"],["icon","richtextnumberedlist"],["icon","richtextindent"],["icon","richtextoutdent"],["icon","left_align_text"],["icon","center_align_text"],["icon","right_align_text"],["icon","justify_text"],["tabindex","-1",1,"slds-button","slds-button_icon","slds-button_icon-border-filled",3,"title","click"],["icon","link"],["icon","remove_link"],[4,"ngIf"],["icon","remove_formatting"],[1,"slds-button-group-list","slds-grid","slds-grid--align-end","slds-grow"],[1,"slds-rich-text-editor__textarea","slds-grid","slds-grow",2,"min-height","0"],[1,"slds-rich-text-area__content","slds-text-color_weak","slds-grow","slds-height_full"],["tabindex","0",2,"height","100%","cursor","text",3,"click","keyup","paste","input"],["htmleditor",""],["tabindex","-1",1,"slds-button","slds-button_icon","slds-button_icon-border-filled","slds-m-right--xx-small",3,"title","click"],["icon","save"],["icon","undo"],[1,"slds-assistive-text"],["icon","redo"],["role","group",1,"slds-grid","slds-rich-text-editor__spacing-wrapper"],[1,"slds-rich-text-editor__select"],[1,"slds-form-element"],[1,"slds-form-element__control"],[1,"slds-select_container"],[1,"slds-select",3,"ngModel","ngModelChange","change"],["value","h1"],["value","h2"],["value","h3"],["value","h4"],["value","h5"],["value","h6"],["value","p"],["value","pre"],["value","div"],["value","default"],["icon","image"],["icon","video"],["icon","snippet"],["icon","ad_set"],["icon","variable"],["icon","insert_tag_field"],[3,"icon"]],template:function(e,t){if(1&e){const e=i.EpF();i.F$t(),i.TgZ(0,"div",0),i.NdJ("click",(function(e){return t.onEditorClick(e)})),i.TgZ(1,"div",1),i.YNc(2,p,2,1,"button",2),i.YNc(3,f,11,2,"ul",3),i.YNc(4,b,29,1,"div",4),i.TgZ(5,"ul",5)(6,"li")(7,"button",6),i.NdJ("click",(function(){return t.executeCommand("bold")})),i._UZ(8,"system-button-icon",7),i.qZA()(),i.TgZ(9,"li")(10,"button",6),i.NdJ("click",(function(){return t.executeCommand("italic")})),i._UZ(11,"system-button-icon",8),i.qZA()(),i.TgZ(12,"li")(13,"button",6),i.NdJ("click",(function(){return t.executeCommand("underline")})),i._UZ(14,"system-button-icon",9),i.qZA()(),i.TgZ(15,"li")(16,"button",6),i.NdJ("click",(function(){return t.executeCommand("strikethrough")})),i._UZ(17,"system-button-icon",10),i.qZA()()(),i.TgZ(18,"ul",5)(19,"li")(20,"button",6),i.NdJ("click",(function(){return t.executeCommand("insertUnorderedList")})),i._UZ(21,"system-button-icon",11),i.qZA()(),i.TgZ(22,"li")(23,"button",6),i.NdJ("click",(function(){return t.executeCommand("insertOrderedList")})),i._UZ(24,"system-button-icon",12),i.qZA()()(),i.TgZ(25,"ul",5)(26,"li")(27,"button",6),i.NdJ("click",(function(){return t.executeCommand("indent")})),i._UZ(28,"system-button-icon",13),i.qZA()(),i.TgZ(29,"li")(30,"button",6),i.NdJ("click",(function(){return t.executeCommand("outdent")})),i._UZ(31,"system-button-icon",14),i.qZA()()(),i.TgZ(32,"ul",5)(33,"li")(34,"button",6),i.NdJ("click",(function(){return t.executeCommand("justifyLeft")})),i._UZ(35,"system-button-icon",15),i.qZA()(),i.TgZ(36,"li")(37,"button",6),i.NdJ("click",(function(){return t.executeCommand("justifyCenter")})),i._UZ(38,"system-button-icon",16),i.qZA()(),i.TgZ(39,"li")(40,"button",6),i.NdJ("click",(function(){return t.executeCommand("justifyRight")})),i._UZ(41,"system-button-icon",17),i.qZA()(),i.TgZ(42,"li")(43,"button",6),i.NdJ("click",(function(){return t.executeCommand("justifyFull")})),i._UZ(44,"system-button-icon",18),i.qZA()()(),i.TgZ(45,"ul",5)(46,"li")(47,"button",19),i.NdJ("click",(function(){return t.insertAnchor()})),i._UZ(48,"system-button-icon",20),i.qZA()(),i.TgZ(49,"li")(50,"button",19),i.NdJ("click",(function(){return t.removeAnchor()})),i._UZ(51,"system-button-icon",21),i.qZA()()(),i.YNc(52,y,11,4,"ul",3),i.TgZ(53,"ul",5),i.YNc(54,v,3,1,"li",22),i.qZA(),i.TgZ(55,"ul",5)(56,"li")(57,"button",19),i.NdJ("click",(function(){return t.executeCommand("removeFormat")})),i._UZ(58,"system-button-icon",23),i.qZA()()(),i.YNc(59,x,7,3,"ul",3),i.TgZ(60,"ul",24),i.Hsn(61),i.qZA()(),i.TgZ(62,"div",25)(63,"div",26)(64,"div",27,28),i.NdJ("click",(function(){return t.exec()}))("keyup",(function(){return t.exec()}))("paste",(function(e){return t.onPaste(e)}))("input",(function(){i.CHM(e);const s=i.MAs(65);return i.KtG(t.onContentChange(s.innerHTML))})),i.qZA()()()()}2&e&&(i.Q6J("ngStyle",t.richTextStyle),i.xp6(2),i.Q6J("ngIf",t.extendedmode),i.xp6(1),i.Q6J("ngIf",t.extendedmode),i.xp6(1),i.Q6J("ngIf",t.extendedmode),i.xp6(3),i.Q6J("title",t.language.getLabel("LBL_BOLD"))("ngClass",i.VKq(35,Z,t.commandIsActive("bold"))),i.xp6(3),i.Q6J("title",t.language.getLabel("LBL_ITALIC"))("ngClass",i.VKq(37,Z,t.commandIsActive("italic"))),i.xp6(3),i.Q6J("title",t.language.getLabel("LBL_UNDERLINE"))("ngClass",i.VKq(39,Z,t.commandIsActive("underline"))),i.xp6(3),i.Q6J("title",t.language.getLabel("LBL_STRIKETHROUGH"))("ngClass",i.VKq(41,Z,t.commandIsActive("strikethrough"))),i.xp6(4),i.Q6J("title",t.language.getLabel("LBL_BULLETED_LIST"))("ngClass",i.VKq(43,Z,t.commandIsActive("insertUnorderedList"))),i.xp6(3),i.Q6J("title",t.language.getLabel("LBL_NUMBERED_LIST"))("ngClass",i.VKq(45,Z,t.commandIsActive("insertOrderedList"))),i.xp6(4),i.Q6J("title",t.language.getLabel("LBL_TEXT_INDENT"))("ngClass",i.VKq(47,Z,t.commandIsActive("indent"))),i.xp6(3),i.Q6J("title",t.language.getLabel("LBL_TEXT_OUTDENT"))("ngClass",i.VKq(49,Z,t.commandIsActive("otdent"))),i.xp6(4),i.Q6J("title",t.language.getLabel("LBL_LEFT_ALIGN"))("ngClass",i.VKq(51,Z,t.commandIsActive("justifyLeft"))),i.xp6(3),i.Q6J("title",t.language.getLabel("LBL_CENTER_ALIGN"))("ngClass",i.VKq(53,Z,t.commandIsActive("justifyCenter"))),i.xp6(3),i.Q6J("title",t.language.getLabel("LBL_RIGHT_ALIGN"))("ngClass",i.VKq(55,Z,t.commandIsActive("justifyRight"))),i.xp6(3),i.Q6J("title",t.language.getLabel("LBL_ALIGN_TEXT"))("ngClass",i.VKq(57,Z,t.commandIsActive("justifyFull"))),i.xp6(4),i.Q6J("title",t.language.getLabel("LBL_LINK")),i.xp6(3),i.Q6J("title",t.language.getLabel("LBL_REMOVE_LINK")),i.xp6(2),i.Q6J("ngIf",t.extendedmode),i.xp6(2),i.Q6J("ngIf",t.useTemplateVariableHelper),i.xp6(3),i.Q6J("title",t.language.getLabel("LBL_REMOVE_FORMATTING")),i.xp6(2),i.Q6J("ngIf",t.extendedmode),i.xp6(5),i.uIk("contenteditable",t.isActive))},dependencies:[l.mk,l.O5,l.PC,n.YN,n.Kr,n.EJ,n.JJ,n.On,h.J],encapsulation:2}),SystemHtmlEditor})()},4561:(e,t,s)=>{"use strict";s.d(t,{f:()=>o});var i=s(1571),n=s(4154),l=s(6895);let o=(()=>{class SystemIcon{constructor(e){this.metadata=e,this.module="",this.icon="",this.size="",this.sprite="standard",this.addclasses="",this.divClass="slds-media__figure"}getSizeClass(){return this.size?"slds-icon--"+this.size:""}getSvgHRef(){return"./vendor/sldassets/icons/"+this.getSprite()+"-sprite/svg/symbols.svg#"+this.getIcon()}getIconClass(){switch(this.sprite){case"standard":case"action":case"custom":return"slds-icon slds-icon_container"+(this.size?" slds-icon--"+this.size:"")+" slds-icon-"+this.getSprite()+"-"+this.getIcon().replace(/_/g,"-")+" "+this.addclasses;default:return"slds-icon slds-icon_container"+(this.size?" slds-icon--"+this.size:"")+" slds-icon-text-default "+this.addclasses}}getIcon(){if(this.icon)return this.icon.indexOf(":")>0?this.icon.split(":")[1]:this.icon;if(this.module&&this.metadata.getModuleIcon(this.module)){let e=this.metadata.getModuleIcon(this.module);return e.indexOf(":")>0?e.split(":")[1]:e}return"empty"}getSprite(){return this.icon&&this.icon.indexOf(":")>0?this.icon.split(":")[0]:this.module&&this.metadata.getModuleIcon(this.module)&&this.metadata.getModuleIcon(this.module).indexOf(":")>0?this.metadata.getModuleIcon(this.module).split(":")[0]:this.sprite}}return SystemIcon.ɵfac=function(e){return new(e||SystemIcon)(i.Y36(n.Pu))},SystemIcon.ɵcmp=i.Xpm({type:SystemIcon,selectors:[["system-icon"]],inputs:{module:"module",icon:"icon",size:"size",sprite:"sprite",addclasses:"addclasses",divClass:"divClass"},decls:3,vars:3,consts:[[3,"ngClass"],["aria-hidden","true",3,"ngClass"]],template:function(e,t){1&e&&(i.TgZ(0,"div",0),i.O4$(),i.TgZ(1,"svg",1),i._UZ(2,"use"),i.qZA()()),2&e&&(i.Q6J("ngClass",t.divClass),i.xp6(1),i.Q6J("ngClass",t.getIconClass()),i.xp6(1),i.uIk("href",t.getSvgHRef(),null,"xlink"))},dependencies:[l.mk],encapsulation:2}),SystemIcon})()},8594:(e,t,s)=>{"use strict";s.d(t,{h:()=>c});var i=s(1571),n=s(4154),l=s(6895),o=s(34);const a=function(e,t,s){return{bottom:e,left:t,"max-width":s}};function d(e,t){if(1&e&&(i.TgZ(0,"div",5)(1,"div",6)(2,"span",7),i._uU(3),i.qZA()()()),2&e){const e=i.oxw();i.Q6J("ngStyle",i.kEZ(2,a,e.bottomdistance,e.leftdistance,e.PopoverMaxWidth)),i.xp6(3),i.Oqu(e.helpText)}}const r=function(e){return{color:e}};let c=(()=>{class SystemIconHelpText{constructor(e){this.metadata=e,this.icon="info",this.file="./assets/icons/spicecrm.svg",this.size="xx-small",this.popoverMaxWidth="300px",this.color="#bbb",this.hovercolor="#5B5B5B",this.desaturate=!1,this.addclasses="",this.divClass="slds-media__figure",this.helpText="",this.showHelp=!1}get gicon(){if(this.icon)return this.icon}get gfile(){if(this.file)return this.file}get gsizeClass(){if(this.size)return this.size}get gcolor(){if(this.color)return this.color}get ghovercolor(){if(this.hovercolor)return this.hovercolor}get gdesaturate(){if(this.desaturate)return this.desaturate}get gaddClass(){if(this.addclasses)return this.addclasses}get gdivClass(){if(this.divClass)return this.divClass}get PopoverMaxWidth(){return this.popoverMaxWidth}get bottomdistance(){return"xx-small"==this.size||"x-small"==this.size?" 2.5em":"small"==this.size?" 2.8em":"large"==this.size?" 3.5em":void 0}get leftdistance(){return"xx-small"==this.size||"x-small"==this.size?"-65%":"small"==this.size?"-30%":"large"==this.size?"10%":void 0}}return SystemIconHelpText.ɵfac=function(e){return new(e||SystemIconHelpText)(i.Y36(n.Pu))},SystemIconHelpText.ɵcmp=i.Xpm({type:SystemIconHelpText,selectors:[["system-icon-help-text"]],inputs:{icon:"icon",file:"file",size:"size",popoverMaxWidth:"popoverMaxWidth",color:"color",hovercolor:"hovercolor",desaturate:"desaturate",addclasses:"addclasses",divClass:"divClass",helpText:"helpText"},decls:5,vars:10,consts:[[1,"slds-is-relative",2,"display","inline"],[3,"mouseover","mouseout"],[1,"slds-icon_container","slds-icon-utility-info"],[3,"ngStyle","icon","file","size","desaturate","addclasses","divClass"],["class","slds-popover slds-popover_tooltip slds-nubbin_bottom-left","role","tooltip","id","help","style","position: absolute; display: block; z-index: 50; width: max-content;",3,"ngStyle",4,"ngIf"],["role","tooltip","id","help",1,"slds-popover","slds-popover_tooltip","slds-nubbin_bottom-left",2,"position","absolute","display","block","z-index","50","width","max-content",3,"ngStyle"],[1,"slds-popover__body",2,"width","100%"],[2,"display","block","white-space","pre-wrap"]],template:function(e,t){1&e&&(i.TgZ(0,"div",0)(1,"a",1),i.NdJ("mouseover",(function(){return t.showHelp=!0}))("mouseout",(function(){return t.showHelp=!1})),i.TgZ(2,"span",2),i._UZ(3,"system-custom-icon",3),i.qZA()(),i.YNc(4,d,4,6,"div",4),i.qZA()),2&e&&(i.xp6(3),i.Q6J("ngStyle",i.VKq(8,r,1==t.showHelp?t.ghovercolor:t.gcolor))("icon",t.gicon)("file",t.gfile)("size",t.gsizeClass)("desaturate",t.gdesaturate)("addclasses",t.gaddClass)("divClass",t.gdivClass),i.xp6(1),i.Q6J("ngIf",t.showHelp))},dependencies:[l.O5,l.PC,o.$],encapsulation:2}),SystemIconHelpText})()},4567:(e,t,s)=>{"use strict";s.d(t,{s:()=>o});var i=s(1571),n=s(5329),l=s(3463);let o=(()=>{class SystemIllustrationNoAccess{constructor(e){this.language=e}}return SystemIllustrationNoAccess.ɵfac=function(e){return new(e||SystemIllustrationNoAccess)(i.Y36(n.d))},SystemIllustrationNoAccess.ɵcmp=i.Xpm({type:SystemIllustrationNoAccess,selectors:[["system-illustration-no-access"]],decls:86,vars:0,consts:[[1,"slds-illustration","slds-illustration_small"],["viewBox","0 0 454 212","aria-hidden","true","xmlns","http://www.w3.org/2000/svg",0,"xmlns","xlink","http://www.w3.org/1999/xlink",1,"slds-illustration__svg"],["stroke","none","stroke-width","1","fill","none","fill-rule","evenodd"],["transform","translate(-70.000000, -95.000000)"],["transform","translate(124.500000, 222.000000)"],["fill","#FFFFFF"],["vector-effect","non-scaling-stroke","d","M18.9209988,1.95433401 L33.259296,51.443436 C33.5666778,52.5043744 32.9557995,53.613617 31.8948612,53.9209988 C31.7139843,53.9734036 31.5266126,54 31.3382972,54 L2.6617028,54 C1.5571333,54 0.661702805,53.1045695 0.661702805,52 C0.661702805,51.8116846 0.688299176,51.6243129 0.74070397,51.443436 L15.0790012,1.95433401 C15.386383,0.893395645 16.4956256,0.282517358 17.556564,0.589899164 C18.2152102,0.780726338 18.7301717,1.29568777 18.9209988,1.95433401 Z"],["stroke-linecap","round","stroke-width","3",1,"slds-illustration__stroke-secondary"],["vector-effect","non-scaling-stroke","stroke-linejoin","round","points","17 0.323943662 34 54 -1.81721305e-12 54"],["vector-effect","non-scaling-stroke","d","M17,4.6953125 C17,43.0456294 17,62.6471919 17,63.5 C17,62.6471919 17,43.0456294 17,4.6953125 Z"],["vector-effect","non-scaling-stroke","d","M17,29.3239437 C22.3333333,35.7851611 25,39.1184944 25,39.3239437 C25,39.1184944 22.3333333,35.7851611 17,29.3239437 Z","stroke-linejoin","round","transform","translate(21.000000, 34.323944) scale(-1, 1) translate(-21.000000, -34.323944) "],["transform","translate(145.000000, 194.000000)"],["transform","translate(1.000000, 0.000000)","fill","#FFFFFF"],["vector-effect","non-scaling-stroke","d","M25.6478873,0 L50.879042,84.4273253 C51.1953215,85.4856452 50.5937789,86.5999782 49.535459,86.9162577 C49.3496374,86.9717906 49.1567264,87 48.9627843,87 L2.33299037,87 C1.22842087,87 0.332990367,86.1045695 0.332990367,85 C0.332990367,84.8060578 0.361199757,84.6131469 0.416732643,84.4273253 L25.6478873,0 Z"],["vector-effect","non-scaling-stroke","stroke-linejoin","round","points","26.5 0 52.5 87 0.5 87"],["vector-effect","non-scaling-stroke","d","M26.5,2.58642578 C26.5,61.0261034 26.5,90.9972948 26.5,92.5 C26.5,90.9972948 26.5,61.0261034 26.5,2.58642578 Z"],["vector-effect","non-scaling-stroke","d","M15.6478873,42 C22.314554,49.078692 25.6478873,52.7453587 25.6478873,53 C25.6478873,52.7453587 22.314554,49.078692 15.6478873,42 Z","stroke-linejoin","round"],["vector-effect","non-scaling-stroke","d","M27.6478873,68 C36.9812207,57.078692 41.6478873,51.7453587 41.6478873,52 C41.6478873,51.7453587 36.9812207,57.078692 27.6478873,68 Z","stroke-linejoin","round"],["transform","translate(404.500000, 245.000000) scale(-1, 1) translate(-404.500000, -245.000000) translate(348.000000, 226.000000)","stroke-linecap","round","stroke-linejoin","round","stroke-width","3",1,"slds-illustration__stroke-secondary"],["vector-effect","non-scaling-stroke","points","0 38 47.5 0 80.5 26"],["vector-effect","non-scaling-stroke","points","71 17 80.5 9 113 36"],["transform","translate(72.000000, 262.500000)"],["vector-effect","non-scaling-stroke","d","M153.962142,26.4644491 C151.225735,20.0143094 144.944776,15.5029106 137.633892,15.5029106 C135.619663,15.5029106 133.683612,15.8453541 131.878328,16.4764392 C128.451481,11.1704266 122.567406,7.66985447 115.883789,7.66985447 C109.491267,7.66985447 103.830159,10.8721423 100.350851,15.7935668 C98.9589956,14.968161 97.3423157,14.4956341 95.6177606,14.4956341 C94.1083143,14.4956341 92.6815102,14.8576334 91.4157672,15.5014039 C87.9975328,6.58722215 79.5098304,0.275259875 69.5804557,0.275259875 C60.4632836,0.275259875 52.5615782,5.59684366 48.6837305,13.3681823 C46.3912034,12.266973 43.8314865,11.6515593 41.1312741,11.6515593 C32.4373504,11.6515593 25.1998844,18.0312998 23.6476214,26.4644491 L153.962142,26.4644491 Z",1,"slds-illustration__fill-secondary"],["vector-effect","non-scaling-stroke","d","M13,25 L143,25","stroke-width","3","stroke-linecap","round",1,"slds-illustration__stroke-secondary"],["vector-effect","non-scaling-stroke","d","M0,25 L450,25","stroke-width","3","stroke-linecap","round",1,"slds-illustration__stroke-secondary"],["transform","translate(344.000000, 247.000000)"],["transform","translate(0.293436, 0.054545)"],["vector-effect","non-scaling-stroke","d","M165.428708,41.9454545 L0.0995432562,41.9454545 C0.0336614956,41.2089487 0,40.4630069 0,39.7090909 C0,26.2132599 10.7866531,15.2727273 24.0926641,15.2727273 C27.7492016,15.2727273 31.215485,16.0989227 34.3199502,17.5772977 C39.5712028,7.14424616 50.271428,0 62.6175975,0 C76.0636257,0 87.5573893,8.47383452 92.1862485,20.441159 C93.9002755,19.5768947 95.8324059,19.0909091 97.8764479,19.0909091 C100.211783,19.0909091 102.401037,19.7252784 104.285841,20.8333889 C108.997403,14.2263569 116.663488,9.92727273 125.320028,9.92727273 C138.043441,9.92727273 148.627152,19.2146805 150.834755,31.4671412 C151.487388,31.3631046 152.156394,31.3090909 152.837838,31.3090909 C159.117096,31.3090909 164.340238,35.8953699 165.428708,41.9454545 Z",1,"slds-illustration__fill-secondary"],["vector-effect","non-scaling-stroke","d","M32.7065637,40.4454545 L173.706564,40.4454545","stroke-width","3","stroke-linecap","round",1,"slds-illustration__stroke-secondary"],["transform","translate(105.000000, 203.000000)"],["transform","translate(106.000000, 0.000000)","fill","#FFFFFF"],["vector-effect","non-scaling-stroke","points","121.5 48.5 158.5 48.5 158.5 34.5 47.5 34.5 47.5 48.5 93.5 48.5 93.5 69.5 121.5 69.5 121.5 48.5"],["vector-effect","non-scaling-stroke","d","M33.9882812,0.21875 C36.5611979,0.21875 70.6126302,0.21875 136.142578,0.21875 L152.384766,11.1132813 C155.083088,16.811292 155.656656,19.677503 154.105469,19.7119141 C152.554281,19.7463252 116.293865,17.6717809 45.3242187,13.4882812 C35.1940104,4.64192708 31.4153646,0.21875 33.9882812,0.21875 Z"],["vector-effect","non-scaling-stroke","d","M32.6708984,2.02246094 L21.5554199,0.374195518 L17.6036034,0.374195518 L5.77148437,7.90429688 C3.09089817,12.6737672 3.09089817,15.2284547 5.77148437,15.5683594 C8.45207058,15.9082641 16.1278518,14.3268839 28.7988281,10.8242188 L42.9921875,7.90429688 L41.0699892,5.68448183 L32.6708984,2.02246094 Z"],["x","0","y","34","width","48","height","14"],["transform","translate(106.000000, 5.000000)",1,"slds-illustration__fill-secondary"],["vector-effect","non-scaling-stroke","points","93.3109375 43.4566406 93.3109375 64.6722656 120.925 64.6722656 121.823047 44.1324219 158.5 43.4566406 158.5 97.5 48.5 97.5 48.5 43.6933594"],["vector-effect","non-scaling-stroke","d","M132.670898,7.66300119e-19 C125.172201,-2.55433373e-19 94.1907552,-2.55433373e-19 39.7265625,7.66300119e-19 L31.8183594,12.5058594 L29.7050781,28.2714844 L157.78125,28.2714844 L157.78125,15.4775391 C148.539714,5.15917969 140.169596,1.78803361e-18 132.670898,7.66300119e-19 Z"],["vector-effect","non-scaling-stroke","d","M37.8266602,0 C34.4632704,0 29.4181858,0 22.6914062,0 C16.1624349,0 9.53808594,3.83528646 2.81835938,11.5058594 L0.705078125,30.2714844 L48.4101562,30.2714844 L48.4101562,14.4775391 L48.1789909,12.3275853 C43.283405,4.10919509 39.832628,0 37.8266602,0 Z"],["x","0.5","y","43.5","width","48","height","54"],["stroke-width","3","stroke-linecap","round","stroke-linejoin","round","x","154.5","y","34.5","width","110","height","68",1,"slds-illustration__stroke-primary"],["vector-effect","non-scaling-stroke","stroke-width","3","stroke-linecap","round","stroke-linejoin","round","points","264.5 48.5 264.5 34.5 154.5 34.5 154.5 48.5 199.5 48.5 199.5 69.5 227.5 69.5 227.5 48.5",1,"slds-illustration__stroke-primary"],["vector-effect","non-scaling-stroke","d","M130.5,0.5 L234.5,0.5 C251.068542,0.5 264.5,13.9314575 264.5,30.5 L264.5,34.5 L106.5,34.5 L106.5,24.5 C106.5,11.245166 117.245166,0.5 130.5,0.5 Z","stroke-width","3","stroke-linecap","round","stroke-linejoin","round",1,"slds-illustration__stroke-primary"],["vector-effect","non-scaling-stroke","d","M130.5,0.5 L130.5,0.5 C143.754834,0.5 154.5,11.245166 154.5,24.5 L154.5,34.5 L106.5,34.5 L106.5,24.5 C106.5,11.245166 117.245166,0.5 130.5,0.5 Z","stroke-width","3","stroke-linecap","round","stroke-linejoin","round",1,"slds-illustration__stroke-primary"],["stroke-width","3","stroke-linecap","round","stroke-linejoin","round","x","106.5","y","48.5","width","48","height","54",1,"slds-illustration__stroke-primary"],["stroke-width","3","stroke-linecap","round","stroke-linejoin","round","x","106.5","y","34.5","width","48","height","14",1,"slds-illustration__stroke-primary"],["vector-effect","non-scaling-stroke","d","M219,52 C219,54.765 216.765,57 214,57 C211.235,57 209,54.765 209,52 C209,49.235 211.235,47 214,47 C216.765,47 219,49.235 219,52 Z",1,"slds-illustration__fill-primary"],["vector-effect","non-scaling-stroke","d","M214,55 L214,60","stroke-width","4","stroke-linecap","round",1,"slds-illustration__stroke-primary"],["vector-effect","non-scaling-stroke","cx","164","cy","58","r","3",1,"slds-illustration__fill-primary"],["vector-effect","non-scaling-stroke","cx","164","cy","93","r","3",1,"slds-illustration__fill-primary"],["vector-effect","non-scaling-stroke","cx","255","cy","58","r","3",1,"slds-illustration__fill-primary"],["vector-effect","non-scaling-stroke","cx","255","cy","93","r","3",1,"slds-illustration__fill-primary"],["vector-effect","non-scaling-stroke","cx","145","cy","58","r","3",1,"slds-illustration__fill-primary"],["vector-effect","non-scaling-stroke","cx","145","cy","93","r","3",1,"slds-illustration__fill-primary"],["vector-effect","non-scaling-stroke","cx","116","cy","58","r","3",1,"slds-illustration__fill-primary"],["vector-effect","non-scaling-stroke","cx","116","cy","93","r","3",1,"slds-illustration__fill-primary"],["vector-effect","non-scaling-stroke","d","M289.928751,82.2971422 L298,102.518658 L280,102.518658 L288.071249,82.2971422 C288.275982,81.784207 288.857768,81.5343604 289.370703,81.7390942 C289.625359,81.8407378 289.827108,82.0424867 289.928751,82.2971422 Z",1,"slds-illustration__fill-primary"],["vector-effect","non-scaling-stroke","d","M300.428751,89.8132712 L305.5,102.518658 L293.5,102.518658 L298.571249,89.8132712 C298.775982,89.300336 299.357768,89.0504894 299.870703,89.2552232 C300.125359,89.3568668 300.327108,89.5586158 300.428751,89.8132712 Z",1,"slds-illustration__fill-primary"],["vector-effect","non-scaling-stroke","d","M93.4287513,82.2971422 L101.5,102.518658 L83.5,102.518658 L91.5712487,82.2971422 C91.7759825,81.784207 92.3577681,81.5343604 92.8707033,81.7390942 C93.1253588,81.8407378 93.3271077,82.0424867 93.4287513,82.2971422 Z","transform","translate(92.500000, 92.517446) scale(-1, 1) translate(-92.500000, -92.517446) ",1,"slds-illustration__fill-primary"],["vector-effect","non-scaling-stroke","d","M76.9287513,89.8132712 L82,102.518658 L70,102.518658 L75.0712487,89.8132712 C75.2759825,89.300336 75.8577681,89.0504894 76.3707033,89.2552232 C76.6253588,89.3568668 76.8271077,89.5586158 76.9287513,89.8132712 Z","transform","translate(76.000000, 96.275510) scale(-1, 1) translate(-76.000000, -96.275510) ",1,"slds-illustration__fill-primary"],["vector-effect","non-scaling-stroke","d","M360,102.5 L372,102.5","stroke-width","3","stroke-linecap","round","stroke-linejoin","round",1,"slds-illustration__stroke-primary"],["vector-effect","non-scaling-stroke","d","M0,102.5 L350,102.5","stroke-width","3","stroke-linecap","round","stroke-linejoin","round",1,"slds-illustration__stroke-primary"],["transform","translate(150.000000, 96.000000)","stroke-linecap","round","stroke-width","3",1,"slds-illustration__stroke-secondary"],["vector-effect","non-scaling-stroke","d","M44,17.5 L63,17.5 C62.2789714,12.0723971 64.081543,7.53186978 68.4077148,3.87841797 C73.3754883,-0.195556641 79.2734375,0.717773438 82.440918,2.12353516 C85.6083984,3.52929687 87.9606934,5.46069336 89.5913086,9.10524041 C90.2822266,10.6397351 90.7517904,11.9379883 91,13"],["vector-effect","non-scaling-stroke","d","M83,20.5 C84.0558268,16.8461914 86.2227376,14.4572754 89.5007324,13.333252 C94.4177246,11.6472168 99.0800781,13.8925781 100.942383,16.1518555 C102.804687,18.4111328 103.39502,20.2260742 103.746582,22.1201172 C103.980957,23.3828125 104.06543,24.8427734 104,26.5 C108.141764,26.3313802 110.918945,27.1647135 112.331543,29 C114.040039,31.1936035 114.215332,33.817627 113.593018,35.75 C112.970703,37.682373 110.894531,40.5 107,40.5 L28,40.5"],["vector-effect","non-scaling-stroke","d","M18,27.5 L83.0004985,27.5"],["vector-effect","non-scaling-stroke","d","M0,27.5 L8,27.5"],["transform","translate(271.000000, 135.000000)","stroke-linecap","round","stroke-width","3",1,"slds-illustration__stroke-secondary"],["transform","translate(402.000000, 164.000000)","stroke-linecap","round","stroke-width","3",1,"slds-illustration__stroke-secondary"],["transform","translate(31.713442, 25.088326) rotate(-15.000000) translate(-31.713442, -25.088326) translate(4.713442, 6.588326)"],["vector-effect","non-scaling-stroke","d","M31.0360707,3.43528591 C31.0360707,3.43528591 40.5802283,0.671893051 42.6488424,10.6908663","transform","translate(36.842457, 6.888440) rotate(41.000000) translate(-36.842457, -6.888440) "],["vector-effect","non-scaling-stroke","d","M40.4282002,10.1797377 C40.4282002,10.1797377 49.9723578,7.4163448 52.0409719,17.435318","transform","translate(46.234586, 13.632892) scale(-1, 1) rotate(-41.000000) translate(-46.234586, -13.632892) "],["vector-effect","non-scaling-stroke","d","M0.730284783,29.5865514 C0.730284783,29.5865514 10.2744424,26.8231586 12.3430565,36.8421318"],["vector-effect","non-scaling-stroke","d","M12.7302848,29.5865514 C12.7302848,29.5865514 22.2744424,26.8231586 24.3430565,36.8421318","transform","translate(18.536671, 33.039705) scale(-1, 1) translate(-18.536671, -33.039705) "],[1,"slds-text-longform"],[1,"slds-text-heading--small"],["label","LBL_NO_ACCESS"]],template:function(e,t){1&e&&(i.TgZ(0,"div",0),i.O4$(),i.TgZ(1,"svg",1)(2,"g",2)(3,"g",3)(4,"g")(5,"g",4)(6,"g",5),i._UZ(7,"path",6),i.qZA(),i.TgZ(8,"g",7),i._UZ(9,"polygon",8)(10,"path",9)(11,"path",10),i.qZA()(),i.TgZ(12,"g",11)(13,"g",12),i._UZ(14,"path",13),i.qZA(),i.TgZ(15,"g",7),i._UZ(16,"polygon",14)(17,"path",15)(18,"path",16)(19,"path",17),i.qZA()(),i.TgZ(20,"g",18)(21,"g"),i._UZ(22,"polyline",19)(23,"polyline",20),i.qZA()(),i.TgZ(24,"g",21),i._UZ(25,"path",22)(26,"path",23)(27,"path",24),i.qZA(),i.TgZ(28,"g",25)(29,"g",26),i._UZ(30,"path",27)(31,"path",28),i.qZA()(),i.TgZ(32,"g",29)(33,"g",30),i._UZ(34,"polygon",31)(35,"path",32)(36,"path",33)(37,"rect",34),i.qZA(),i.TgZ(38,"g",35),i._UZ(39,"polygon",36)(40,"path",37)(41,"path",38)(42,"rect",39),i.qZA(),i.TgZ(43,"g"),i._UZ(44,"rect",40)(45,"polygon",41)(46,"path",42)(47,"path",43)(48,"rect",44)(49,"rect",45)(50,"path",46)(51,"path",47)(52,"circle",48)(53,"circle",49)(54,"circle",50)(55,"circle",51)(56,"circle",52)(57,"circle",53)(58,"circle",54)(59,"circle",55)(60,"path",56)(61,"path",57)(62,"path",58)(63,"path",59)(64,"path",60)(65,"path",61),i.qZA()(),i.TgZ(66,"g",62),i._UZ(67,"path",63)(68,"path",64)(69,"path",65)(70,"path",66),i.qZA(),i.TgZ(71,"g",67)(72,"g"),i._UZ(73,"path",63)(74,"path",64)(75,"path",65)(76,"path",66),i.qZA()(),i.TgZ(77,"g",68)(78,"g",69),i._UZ(79,"path",70)(80,"path",71)(81,"path",72)(82,"path",73),i.qZA()()()()()(),i.kcU(),i.TgZ(83,"div",74)(84,"h3",75),i._UZ(85,"system-label",76),i.qZA()()())},dependencies:[l._],encapsulation:2}),SystemIllustrationNoAccess})()},2646:(e,t,s)=>{"use strict";s.d(t,{t:()=>l});var i=s(1571);const n=["*"];let l=(()=>{class SystemIllustrationNoData{}return SystemIllustrationNoData.ɵfac=function(e){return new(e||SystemIllustrationNoData)},SystemIllustrationNoData.ɵcmp=i.Xpm({type:SystemIllustrationNoData,selectors:[["system-illustration-no-data"]],ngContentSelectors:n,decls:56,vars:0,consts:[[1,"slds-illustration","slds-illustration_small"],["viewBox","0 0 468 194","aria-hidden","true","xmlns","http://www.w3.org/2000/svg",0,"xmlns","xlink","http://www.w3.org/1999/xlink",1,"slds-illustration__svg"],["stroke","none","stroke-width","1","fill","none","fill-rule","evenodd"],["transform","translate(-67.000000, -112.000000)"],["transform","translate(245.000000, 200.000000)","stroke-linecap","round","stroke-width","3",1,"slds-illustration__stroke-secondary"],["vector-effect","non-scaling-stroke","d","M44,17.5 L63,17.5 C62.2789714,12.0723971 64.081543,7.53186978 68.4077148,3.87841797 C73.3754883,-0.195556641 79.2734375,0.717773438 82.440918,2.12353516 C85.6083984,3.52929687 87.9606934,5.46069336 89.5913086,9.10524041 C90.2822266,10.6397351 90.7517904,11.9379883 91,13"],["vector-effect","non-scaling-stroke","d","M83,20.5 C84.0558268,16.8461914 86.2227376,14.4572754 89.5007324,13.333252 C94.4177246,11.6472168 99.0800781,13.8925781 100.942383,16.1518555 C102.804687,18.4111328 103.39502,20.2260742 103.746582,22.1201172 C103.980957,23.3828125 104.06543,24.8427734 104,26.5 C108.141764,26.3313802 110.918945,27.1647135 112.331543,29 C114.040039,31.1936035 114.215332,33.817627 113.593018,35.75 C112.970703,37.682373 110.894531,40.5 107,40.5 L28,40.5"],["vector-effect","non-scaling-stroke","d","M18,27.5 L83.0004985,27.5"],["vector-effect","non-scaling-stroke","d","M0,27.5 L8,27.5"],["transform","translate(135.000000, 152.000000)","stroke-linecap","round","stroke-width","3",1,"slds-illustration__stroke-secondary"],["transform","translate(69.000000, 256.000000)","stroke-linecap","round","stroke-width","3",1,"slds-illustration__stroke-secondary"],["vector-effect","non-scaling-stroke","d","M14,36.5 L464,36.5"],["vector-effect","non-scaling-stroke","d","M0,36.5 L6,36.5"],["vector-effect","non-scaling-stroke","stroke-linejoin","round","points","234.5 36 279.5 0 313.5 26"],["vector-effect","non-scaling-stroke","d","M279.5,1 L279.5,35","stroke-linejoin","round"],["vector-effect","non-scaling-stroke","d","M313.5,11 C313.5,20.7437888 313.5,25.7437888 313.5,26 C313.5,25.7437888 313.5,20.7437888 313.5,11 Z","stroke-linejoin","round"],["vector-effect","non-scaling-stroke","stroke-linejoin","round","points","303.5 17 313.5 9 347.5 36"],["transform","translate(113.000000, 178.000000)"],["transform","translate(30.000000, 8.000000)",1,"slds-illustration__fill-secondary"],["vector-effect","non-scaling-stroke","d","M29.5,60.5 L29.5,12 C29.5,5.372583 34.872583,0 41.5,0 C48.127417,0 53.5,5.372583 53.5,12 L53.5,40.5 L70.5,40.5 L70.5,27 C70.5,23.1340068 73.6340068,20 77.5,20 C81.3659932,20 84.5,23.1340068 84.5,27 L84.5,48.5 C84.5,51.8137085 81.8137085,54.5 78.5,54.5 L53.5,54.5 L53.5,118.5 L29.5,118.5 L29.5,74.5 L6.5,74.5 C3.1862915,74.5 0.5,71.8137085 0.5,68.5 L0.5,39 C0.5,35.1340068 3.63400675,32 7.5,32 C11.3659932,32 14.5,35.1340068 14.5,39 L14.5,60.5 L29.5,60.5 Z"],["transform","translate(59.000000, 7.000000)","fill","#FFFFFF"],["vector-effect","non-scaling-stroke","d","M2,11 C3.65332031,8.49145508 5.65181478,6.77364095 7.9954834,5.84655762 C11.5109863,4.45593262 15.2684326,4.95605469 17.8156738,6.2824707 C20.362915,7.60888672 22.3626709,9.64978027 23.2602539,11.81604 C23.8586426,13.2602132 23.8586426,11.7547201 23.2602539,7.29956055 L19.612793,3.56494141 L13.7923584,0.564331055 L8.765625,1.42663574 L4.67321777,3.19787598 C2.69893392,5.13902708 1.69559733,6.16722532 1.66320801,6.2824707 C1.61462402,6.45533878 0.856079102,9.49145508 0.813964844,9.66003418 C0.785888672,9.77242025 1.18123372,10.2190755 2,11 Z"],["stroke-width","3",1,"slds-illustration__stroke-primary"],["vector-effect","non-scaling-stroke","d","M0,126.5 L356,126.5","stroke-linecap","round"],["vector-effect","non-scaling-stroke","d","M362.5,126.5 L372.013149,126.5","stroke-linecap","round"],["vector-effect","non-scaling-stroke","d","M107.5,20 L107.5,28","stroke-linecap","round"],["vector-effect","non-scaling-stroke","d","M113,30.6568542 L118.656854,25","stroke-linecap","round"],["vector-effect","non-scaling-stroke","d","M37.5,32 L37.5,40","stroke-linecap","round"],["vector-effect","non-scaling-stroke","d","M44,42.6568542 L49.6568542,37","stroke-linecap","round"],["vector-effect","non-scaling-stroke","d","M25,42.6568542 L30.6568542,37","stroke-linecap","round","transform","translate(27.828427, 39.828427) scale(-1, 1) translate(-27.828427, -39.828427) "],["vector-effect","non-scaling-stroke","d","M71.5,0 L71.5,8","stroke-linecap","round"],["vector-effect","non-scaling-stroke","d","M79,10.6568542 L84.6568542,5","stroke-linecap","round"],["vector-effect","non-scaling-stroke","d","M58,10.6568542 L63.6568542,5","stroke-linecap","round","transform","translate(60.828427, 7.828427) scale(-1, 1) translate(-60.828427, -7.828427) "],["vector-effect","non-scaling-stroke","d","M59.5,68.5 L59.5,20 C59.5,13.372583 64.872583,8 71.5,8 C78.127417,8 83.5,13.372583 83.5,20 L83.5,48.5 L100.5,48.5 L100.5,35 C100.5,31.1340068 103.634007,28 107.5,28 C111.365993,28 114.5,31.1340068 114.5,35 L114.5,56.5 C114.5,59.8137085 111.813708,62.5 108.5,62.5 L83.5,62.5 L83.5,126.5 L59.5,126.5 L59.5,82.5 L36.5,82.5 C33.1862915,82.5 30.5,79.8137085 30.5,76.5 L30.5,47 C30.5,43.1340068 33.6340068,40 37.5,40 C41.3659932,40 44.5,43.1340068 44.5,47 L44.5,68.5 L59.5,68.5 Z"],["vector-effect","non-scaling-stroke","d","M77,88.5 L92.5,88.5 L92.5,81 C92.5,77.1340068 95.6340068,74 99.5,74 L99.5,74 C103.365993,74 106.5,77.1340068 106.5,81 L106.5,96.5 C106.5,99.8137085 103.813708,102.5 100.5,102.5 L77,102.5","stroke-linecap","round","stroke-linejoin","round",1,"slds-illustration__fill-secondary"],["transform","translate(429.000000, 242.000000)","stroke-linecap","round","stroke-width","3",1,"slds-illustration__stroke-secondary"],["vector-effect","non-scaling-stroke","d","M12.5,4 L12.5,50"],["vector-effect","non-scaling-stroke","stroke-linejoin","round","points","11 18.5 0.5 18.5 0.5 0"],["vector-effect","non-scaling-stroke","stroke-linejoin","round","points","14 25.5 24.5 25.5 24.5 8"],["vector-effect","non-scaling-stroke","stroke-linejoin","round","points","2.5 31 2.5 38.5 11 38.5"],["transform","translate(327.000000, 95.000000)"],["vector-effect","non-scaling-stroke","cx","64","cy","64","r","23",1,"slds-illustration__fill-secondary"],["vector-effect","non-scaling-stroke","stroke-width","3","stroke-linecap","round","stroke-linejoin","round","stroke-dasharray","135,1,1,18","transform","translate(64.000000, 64.000000) rotate(230.000000) translate(-64.000000, -64.000000) ","cx","64","cy","64","r","45",1,"slds-illustration__stroke-secondary"],["vector-effect","non-scaling-stroke","stroke-width","3","stroke-linecap","round","stroke-linejoin","round","stroke-dasharray","107,10","transform","translate(64.000000, 64.000000) rotate(150.000000) translate(-64.000000, -64.000000) ","cx","64","cy","64","r","33",1,"slds-illustration__stroke-secondary"],["transform","translate(41.000000, 41.000000)","stroke-width","3",1,"slds-illustration__stroke-primary"],["vector-effect","non-scaling-stroke","cx","23","cy","23","r","23"],[1,"slds-text-longform"],[1,"slds-text-heading_small"]],template:function(e,t){1&e&&(i.F$t(),i.TgZ(0,"div",0),i.O4$(),i.TgZ(1,"svg",1)(2,"g",2)(3,"g",3)(4,"g")(5,"g",4),i._UZ(6,"path",5)(7,"path",6)(8,"path",7)(9,"path",8),i.qZA(),i.TgZ(10,"g",9),i._UZ(11,"path",5)(12,"path",6)(13,"path",7)(14,"path",8),i.qZA(),i.TgZ(15,"g",10),i._UZ(16,"path",11)(17,"path",12)(18,"polyline",13)(19,"path",14)(20,"path",15)(21,"polyline",16),i.qZA(),i.TgZ(22,"g",17)(23,"g",18),i._UZ(24,"path",19),i.qZA(),i.TgZ(25,"g",20),i._UZ(26,"path",21),i.qZA(),i.TgZ(27,"g",22),i._UZ(28,"path",23)(29,"path",24)(30,"path",25)(31,"path",26)(32,"path",27)(33,"path",28)(34,"path",29)(35,"path",30)(36,"path",31)(37,"path",32)(38,"path",33)(39,"path",34),i.qZA()(),i.TgZ(40,"g",35)(41,"g"),i._UZ(42,"path",36)(43,"polyline",37)(44,"polyline",38)(45,"polyline",39),i.qZA()(),i.TgZ(46,"g",40)(47,"g"),i._UZ(48,"circle",41)(49,"circle",42)(50,"circle",43),i.qZA(),i.TgZ(51,"g",44),i._UZ(52,"circle",45),i.qZA()()()()()(),i.kcU(),i.TgZ(53,"div",46)(54,"h3",47),i.Hsn(55),i.qZA()()())},encapsulation:2}),SystemIllustrationNoData})()},4730:(e,t,s)=>{"use strict";s.d(t,{C:()=>l});var i=s(1571);const n=["*"];let l=(()=>{class SystemIllustrationNoRecords{}return SystemIllustrationNoRecords.ɵfac=function(e){return new(e||SystemIllustrationNoRecords)},SystemIllustrationNoRecords.ɵcmp=i.Xpm({type:SystemIllustrationNoRecords,selectors:[["system-illustration-no-records"]],ngContentSelectors:n,decls:50,vars:0,consts:[[1,"slds-illustration","slds-illustration_small"],["viewBox","0 0 454 272","aria-hidden","true","xmlns","http://www.w3.org/2000/svg",0,"xmlns","xlink","http://www.w3.org/1999/xlink",1,"slds-illustration__svg"],["fill","none","fill-rule","evenodd","transform","translate(-65 -74)"],["transform","translate(77 180)"],["vector-effect","non-scaling-stroke","stroke-linecap","round","stroke-linejoin","round","stroke-width","3","points","21 74 111.5 0 177.5 54",1,"slds-illustration__stroke-secondary"],["vector-effect","non-scaling-stroke","stroke-linecap","round","stroke-linejoin","round","stroke-width","3","points","160 37 181.5 19 249 74",1,"slds-illustration__stroke-secondary"],["vector-effect","non-scaling-stroke","d","M5.83623454,54.8238008 C6.47896445,52.7119739 7.52041887,52.7099477 8.16376546,54.8238008 L14,74 L0,74 L5.83623454,54.8238008 Z",1,"slds-illustration__fill-secondary"],["vector-effect","non-scaling-stroke","d","M14.9699006 61.8628727C15.5388088 59.729467 16.4627585 59.7353443 17.0300994 61.8628727L20 73 12 73 14.9699006 61.8628727zM239.734375 56.5589921C240.43336 54.4620359 241.506942 54.4857215 242.128332 56.5984458L246 69.7621171 237 64.7621171 239.734375 56.5589921z",1,"slds-illustration__fill-secondary"],["vector-effect","non-scaling-stroke","d","M247.921591,53.8514618 C248.51718,51.7243582 249.484912,51.7318303 250.077772,53.8491859 L254.357732,69.1347569 L242,75 L247.921591,53.8514618 Z","transform","matrix(-1 0 0 1 496.358 0)",1,"slds-illustration__fill-secondary"],["transform","matrix(-1 0 0 1 496 216)"],["vector-effect","non-scaling-stroke","d","M5.9215907,18.8514618 C6.51717971,16.7243582 7.48113835,16.7183512 8.0784093,18.8514618 L14,40 L0,40 L5.9215907,18.8514618 Z","transform","matrix(-1 0 0 1 14 0)",1,"slds-illustration__fill-secondary"],["vector-effect","non-scaling-stroke","d","M123.136984,25.2363093 C123.613615,23.448945 124.38595,23.4473111 124.863437,25.237887 L126.693756,32.1015868 L120,37 L123.136984,25.2363093 Z","transform","matrix(-1 0 0 1 246.694 0)",1,"slds-illustration__fill-secondary"],["vector-effect","non-scaling-stroke","stroke-linecap","round","stroke-linejoin","round","stroke-width","3","points","13 37 59.5 0 92.5 27",1,"slds-illustration__stroke-secondary"],["vector-effect","non-scaling-stroke","stroke-linecap","round","stroke-linejoin","round","stroke-width","3","points","83 17 92.5 9 127 38",1,"slds-illustration__stroke-secondary"],["stroke-linecap","round","stroke-width","3","transform","translate(67 253)",1,"slds-illustration__stroke-primary"],["vector-effect","non-scaling-stroke","d","M0 1.5L450 1.5M284 2L419 61M282 2L65 91M443 1.5L449 1.5"],["transform","translate(73 163)"],["vector-effect","non-scaling-stroke","fill","#FFF","points","20.906 .73 24.63 2.34 27.093 9.155 11.046 19.877 .131 19.877","transform","translate(80 22)"],["stroke-linecap","round","stroke-width","3",1,"slds-illustration__stroke-secondary"],["vector-effect","non-scaling-stroke","d","M44,17.5 L63,17.5 C62.2789714,12.0723971 64.081543,7.53186978 68.4077148,3.87841797 C73.3754883,-0.195556641 79.2734375,0.717773438 82.440918,2.12353516 C85.6083984,3.52929687 87.9606934,5.46069336 89.5913086,9.10524041 C90.2822266,10.6397351 90.7517904,11.9379883 91,13"],["vector-effect","non-scaling-stroke","d","M83 20.5C84.0558268 16.8461914 86.2227376 14.4572754 89.5007324 13.333252 94.4177246 11.6472168 99.0800781 13.8925781 100.942383 16.1518555 102.804687 18.4111328 103.39502 20.2260742 103.746582 22.1201172 103.980957 23.3828125 104.06543 24.8427734 104 26.5 108.141764 26.3313802 110.918945 27.1647135 112.331543 29 114.040039 31.1936035 114.215332 33.817627 113.593018 35.75 112.970703 37.682373 110.894531 40.5 107 40.5L28 40.5M18 27.5L83.0004985 27.5M0 27.5L8 27.5"],["stroke-linecap","round","stroke-width","3","transform","translate(292 139)",1,"slds-illustration__stroke-secondary"],["transform","translate(204.5 228.5)"],["vector-effect","non-scaling-stroke","d","M18.9209988,1.95433401 L33.259296,51.443436 C33.5666778,52.5043744 32.9557995,53.613617 31.8948612,53.9209988 C31.7139843,53.9734036 31.5266126,54 31.3382972,54 L2.6617028,54 C1.5571333,54 0.661702805,53.1045695 0.661702805,52 C0.661702805,51.8116846 0.688299176,51.6243129 0.74070397,51.443436 L15.0790012,1.95433401 C15.386383,0.893395645 16.4956256,0.282517358 17.556564,0.589899164 C18.2152102,0.780726338 18.7301717,1.29568777 18.9209988,1.95433401 Z",1,"slds-illustration__fill-secondary"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","3",1,"slds-illustration__stroke-primary"],["points","17 .324 34 54 0 54"],["vector-effect","non-scaling-stroke","d","M17,6.32394366 C17,42.1378022 17,60.4711356 17,61.3239437 C17,60.4711356 17,42.1378022 17,6.32394366 Z"],["vector-effect","non-scaling-stroke","d","M17,29.3239437 C22.3333333,35.7851611 25,39.1184944 25,39.3239437 C25,39.1184944 22.3333333,35.7851611 17,29.3239437 Z","transform","matrix(-1 0 0 1 42 0)"],["transform","translate(439.5 227.5)"],["vector-effect","non-scaling-stroke","points","17 -4.676 34 54 0 54"],["vector-effect","non-scaling-stroke","d","M17,1.32394366 C17,40.3936076 17,60.3936076 17,61.3239437 C17,60.3936076 17,40.3936076 17,1.32394366 Z"],["transform","translate(141.852 213.5)"],["vector-effect","non-scaling-stroke","d","M25.6478873,0 L50.8997802,86.4391718 C51.2095171,87.4994249 50.6011034,88.6100213 49.5408502,88.9197582 C49.3586621,88.9729817 49.1698252,89 48.980022,89 L2.31575269,89 C1.21118319,89 0.315752686,88.1045695 0.315752686,87 C0.315752686,86.8101968 0.342770948,86.6213599 0.395994453,86.4391718 L25.6478873,0 Z","transform","translate(1)",1,"slds-illustration__fill-secondary"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","3","transform","translate(0 2)",1,"slds-illustration__stroke-primary"],["vector-effect","non-scaling-stroke","points","26.648 0 52.648 87 .648 87"],["vector-effect","non-scaling-stroke","d","M26.6478873 6C26.6478873 64.4972948 26.6478873 94.4972948 26.6478873 96 26.6478873 94.4972948 26.6478873 64.4972948 26.6478873 6zM15.6478873 42C22.9812207 49.078692 26.6478873 52.7453587 26.6478873 53 26.6478873 52.7453587 22.9812207 49.078692 15.6478873 42zM27.6478873 68C36.9812207 57.078692 41.6478873 51.7453587 41.6478873 52 41.6478873 51.7453587 36.9812207 57.078692 27.6478873 68z"],["transform","translate(168 57)"],["vector-effect","non-scaling-stroke","cx","64","cy","64","r","23",1,"slds-illustration__fill-secondary"],["vector-effect","non-scaling-stroke","stroke-dasharray","135 1 1 18","stroke-linecap","round","stroke-linejoin","round","stroke-width","3","d","M64,109 C88.8528137,109 109,88.8528137 109,64 C109,39.1471863 88.8528137,19 64,19 C39.1471863,19 19,39.1471863 19,64 C19,88.8528137 39.1471863,109 64,109 Z","transform","rotate(-130 64 64)",1,"slds-illustration__stroke-secondary"],["vector-effect","non-scaling-stroke","stroke-dasharray","107 10","stroke-linecap","round","stroke-linejoin","round","stroke-width","3","d","M64,97 C82.2253967,97 97,82.2253967 97,64 C97,45.7746033 82.2253967,31 64,31 C45.7746033,31 31,45.7746033 31,64 C31,82.2253967 45.7746033,97 64,97 Z","transform","rotate(150 64 64)",1,"slds-illustration__stroke-secondary"],["stroke-width","3","transform","translate(41 41)",1,"slds-illustration__stroke-primary"],["vector-effect","non-scaling-stroke","cx","23","cy","23","r","23"],[1,"slds-text-longform"],[1,"slds-text-heading_small"]],template:function(e,t){1&e&&(i.F$t(),i.TgZ(0,"div",0),i.O4$(),i.TgZ(1,"svg",1)(2,"g",2)(3,"g",3),i._UZ(4,"polyline",4)(5,"polyline",5)(6,"path",6)(7,"path",7)(8,"path",8),i.qZA(),i.TgZ(9,"g",9),i._UZ(10,"path",10)(11,"path",11)(12,"polyline",12)(13,"polyline",13),i.qZA(),i.TgZ(14,"g",14),i._UZ(15,"path",15),i.qZA(),i.TgZ(16,"g",16),i._UZ(17,"polygon",17),i.TgZ(18,"g",18),i._UZ(19,"path",19)(20,"path",20),i.qZA()(),i.TgZ(21,"g",21),i._UZ(22,"path",19)(23,"path",20),i.qZA(),i.TgZ(24,"g",22),i._UZ(25,"path",23),i.TgZ(26,"g",24),i._UZ(27,"polygon",25)(28,"path",26)(29,"path",27),i.qZA()(),i.TgZ(30,"g",28),i._UZ(31,"path",23),i.TgZ(32,"g",24),i._UZ(33,"polygon",29)(34,"path",30)(35,"path",27),i.qZA()(),i.TgZ(36,"g",31),i._UZ(37,"path",32),i.TgZ(38,"g",33),i._UZ(39,"polygon",34)(40,"path",35),i.qZA()(),i.TgZ(41,"g",36),i._UZ(42,"circle",37)(43,"path",38)(44,"path",39),i.TgZ(45,"g",40),i._UZ(46,"circle",41),i.qZA()()()(),i.kcU(),i.TgZ(47,"div",42)(48,"h3",43),i.Hsn(49),i.qZA()()())},encapsulation:2}),SystemIllustrationNoRecords})()},9016:(e,t,s)=>{"use strict";s.d(t,{H:()=>o});var i=s(1571),n=s(5329),l=s(3463);let o=(()=>{class SystemIllustrationNoTask{constructor(e){this.language=e}}return SystemIllustrationNoTask.ɵfac=function(e){return new(e||SystemIllustrationNoTask)(i.Y36(n.d))},SystemIllustrationNoTask.ɵcmp=i.Xpm({type:SystemIllustrationNoTask,selectors:[["system-illustration-no-task"]],decls:67,vars:0,consts:[[1,"slds-illustration","slds-illustration_small"],["viewBox","0 0 454 182","aria-hidden","true","xmlns","http://www.w3.org/2000/svg",0,"xmlns","xlink","http://www.w3.org/1999/xlink",1,"slds-illustration__svg"],["stroke","none","stroke-width","1","fill","none","fill-rule","evenodd"],["transform","translate(-73.000000, -110.000000)"],["transform","translate(75.000000, 240.000000)"],["vector-effect","non-scaling-stroke","stroke-width","3","stroke-linecap","round","stroke-linejoin","round","transform","translate(375.250000, 18.000000) scale(-1, 1) translate(-375.250000, -18.000000) ","points","335.5 36 380 0 415 27",1,"slds-illustration__stroke-secondary"],["vector-effect","non-scaling-stroke","stroke-width","3","stroke-linecap","round","stroke-linejoin","round","transform","translate(324.500000, 22.500000) scale(-1, 1) translate(-324.500000, -22.500000) ","points","303 18 313.5 9 346 36",1,"slds-illustration__stroke-secondary"],["vector-effect","non-scaling-stroke","d","M0,36.5 L450,36.5","stroke-width","3","stroke-linecap","round",1,"slds-illustration__stroke-secondary"],["vector-effect","non-scaling-stroke","d","M406.04276,9.26543454 L413,32.7461193 L400.495829,23.8448556 L404.113561,9.30802252 C404.246938,8.772085 404.789525,8.44574518 405.325462,8.57912213 C405.669253,8.66468028 405.942114,8.9257539 406.04276,9.26543454 Z",1,"slds-illustration__fill-secondary"],["vector-effect","non-scaling-stroke","d","M311.962964,11.4391572 L318,33 L306.770218,23.1063642 L310.037036,11.4391572 C310.185948,10.9073269 310.7378,10.5969106 311.26963,10.7458231 C311.605963,10.8399963 311.868791,11.1028246 311.962964,11.4391572 Z","transform","translate(312.385109, 21.626882) scale(-1, 1) translate(-312.385109, -21.626882) ",1,"slds-illustration__fill-secondary"],["transform","translate(83.000000, 173.000000)","stroke-linecap","round","stroke-width","3",1,"slds-illustration__stroke-secondary"],["vector-effect","non-scaling-stroke","d","M44,17.5 L63,17.5 C62.2789714,12.0723971 64.081543,7.53186978 68.4077148,3.87841797 C73.3754883,-0.195556641 79.2734375,0.717773438 82.440918,2.12353516 C85.6083984,3.52929687 87.9606934,5.46069336 89.5913086,9.10524041 C90.2822266,10.6397351 90.7517904,11.9379883 91,13"],["vector-effect","non-scaling-stroke","d","M83,20.5 C84.0558268,16.8461914 86.2227376,14.4572754 89.5007324,13.333252 C94.4177246,11.6472168 99.0800781,13.8925781 100.942383,16.1518555 C102.804687,18.4111328 103.39502,20.2260742 103.746582,22.1201172 C103.980957,23.3828125 104.06543,24.8427734 104,26.5 C108.141764,26.3313802 110.918945,27.1647135 112.331543,29 C114.040039,31.1936035 114.215332,33.817627 113.593018,35.75 C112.970703,37.682373 110.894531,40.5 107,40.5 L28,40.5"],["vector-effect","non-scaling-stroke","d","M18,27.5 L83.0004985,27.5"],["vector-effect","non-scaling-stroke","d","M0,27.5 L8,27.5"],["transform","translate(274.000000, 111.000000)","stroke-linecap","round","stroke-width","3",1,"slds-illustration__stroke-secondary"],["transform","translate(115.000000, 191.000000)"],["transform","translate(148.000000, 32.000000) scale(-1, 1) translate(-148.000000, -32.000000) translate(116.000000, 0.000000)",1,"slds-illustration__fill-secondary"],["vector-effect","non-scaling-stroke","d","M25,53 C25,55.76 22.76125,58 20,58 C17.24,58 15,55.76 15,53 C15,50.24 17.24,48 20,48 C22.76125,48 25,50.24 25,53 Z"],["vector-effect","non-scaling-stroke","d","M8,58 C6.34130214,58 5,59.344354 5,61 C5,62.655646 6.34130214,64 8,64 C9.65717192,64 11,62.655646 11,61 C11,59.344354 9.65717192,58 8,58"],["vector-effect","non-scaling-stroke","d","M43.2932416,0 C35.2856577,0 28.3128049,4.40586521 24.6382957,10.9184604 C22.0889739,9.11222859 18.9814709,8.03886643 15.6213524,8.03886643 C6.99160591,8.03886643 0,15.0367986 0,23.6690948 C0,32.302472 6.99160591,39.3004042 15.6213524,39.3004042 C15.8077805,39.3004042 15.9920023,39.2777047 16.1806367,39.2712191 C19.0013272,43.3344299 23.6918145,46 29.011083,46 C32.7848734,46 36.2475826,44.6596485 38.9469293,42.4296926 C40.3512074,42.7193815 41.8051261,42.8739543 43.2932416,42.8739543 C55.1275661,42.8739543 64,33.4569038 64,21.6185732 C64,9.77916158 55.1275661,0 43.2932416,0 Z"],["transform","translate(0.000000, 18.000000)"],["vector-effect","non-scaling-stroke","d","M90.5057553,53.0538038 C90.5057553,53.0538038 116.215483,58.0701972 145.433002,58.0701972 C174.650521,58.0701972 204.505755,53.0538038 204.505755,53.0538038 C204.505755,53.0538038 192.222862,60.6378663 185.905056,63.0258453 C179.58725,65.4138243 166.637272,67.3671811 166.637272,67.3671811 C166.637272,67.3671811 153.865271,70.7987363 147.505755,70.9374424 C141.14624,71.0761485 132.54218,68.1108222 132.54218,68.1108222 L106.786672,63.0258453 L90.5057553,53.0538038 Z",1,"slds-illustration__fill-primary"],["vector-effect","non-scaling-stroke","d","M84.8198266,43.3368404 C84.8198266,43.3368404 99.4457512,70.425365 147.915957,70.425365 C196.386164,70.425365 214.819827,43.3368404 214.819827,43.3368404","stroke-width","4","stroke-linecap","round","stroke-linejoin","round",1,"slds-illustration__stroke-primary"],["vector-effect","non-scaling-stroke","d","M73,49.5 L88,49.5","stroke-width","3","stroke-linecap","round",1,"slds-illustration__stroke-primary"],["vector-effect","non-scaling-stroke","d","M211,49.5 L226,49.5","stroke-width","3","stroke-linecap","round",1,"slds-illustration__stroke-primary"],["vector-effect","non-scaling-stroke","d","M142.74548,0 L153.650377,2.22044605e-16 C154.478804,8.05656105e-16 155.150377,0.671572875 155.150377,1.5 L155.150377,2.98261094 C155.150377,3.11136765 155.100706,3.2351613 155.01171,3.32820944 L146.234757,12.5047677 L155.209827,12.5047677 C156.038254,12.5047677 156.709827,13.1763405 156.709827,14.0047677 L156.709827,14.4270108 C156.709827,15.2554379 156.038254,15.9270108 155.209827,15.9270108 L141.888626,15.9270108 C141.060199,15.9270108 140.388626,15.2554379 140.388626,14.4270108 L140.388626,12.8248256 C140.388626,12.696109 140.438265,12.5723507 140.527212,12.4793109 L149.20663,3.40051458 L142.74548,3.40051458 C141.917053,3.40051458 141.24548,2.7289417 141.24548,1.90051458 L141.24548,1.5 C141.24548,0.671572875 141.917053,1.52179594e-16 142.74548,0 Z",1,"slds-illustration__fill-primary"],["vector-effect","non-scaling-stroke","d","M20,81.5 L390,81.5","stroke-width","3","stroke-linecap","round",1,"slds-illustration__stroke-primary"],["vector-effect","non-scaling-stroke","d","M0,81.5 L12,81.5","stroke-width","3","stroke-linecap","round",1,"slds-illustration__stroke-primary"],["transform","translate(175.500000, 153.000000)"],["transform","translate(0.000000, 7.000000)",1,"slds-illustration__fill-secondary"],["vector-effect","non-scaling-stroke","d","M19.3444016,2.17529966 L32.8957957,84.445825 C33.0753185,85.5357082 32.3373256,86.5647651 31.2474424,86.7442879 C31.1399954,86.7619863 31.0312825,86.7708798 30.9223876,86.7708798 L2.12566435,86.7708798 C1.02109485,86.7708798 0.125664347,85.8754493 0.125664347,84.7708798 C0.125664347,84.6486417 0.136870913,84.526661 0.159143349,84.4064691 L15.4044726,2.13594377 C15.6057311,1.04986421 16.6493247,0.332574998 17.7354043,0.533833473 C18.5639901,0.687376483 19.2074411,1.34381197 19.3444016,2.17529966 Z"],["stroke-linecap","round","stroke-width","3",1,"slds-illustration__stroke-primary"],["vector-effect","non-scaling-stroke","stroke-linejoin","round","points","17 0.709590879 34 94.5 -1.82254212e-12 94.5"],["vector-effect","non-scaling-stroke","d","M17,8.09449405 C17,92.0999502 17,135.036706 17,136.904762 C17,135.036706 17,92.0999502 17,8.09449405 Z"],["vector-effect","non-scaling-stroke","d","M17,64.2334004 C24.3333333,71.7198767 28,75.6881307 28,76.1381623 C28,75.6881307 24.3333333,71.7198767 17,64.2334004 Z","stroke-linejoin","round","transform","translate(22.500000, 70.185781) scale(-1, 1) translate(-22.500000, -70.185781) "],["vector-effect","non-scaling-stroke","d","M8,50.2334004 C14,57.05321 17,60.6881307 17,61.1381623 C17,60.6881307 14,57.05321 8,50.2334004 Z","stroke-linejoin","round"],["transform","translate(307.500000, 135.000000)"],["transform","translate(0.000000, 2.000000)",1,"slds-illustration__fill-secondary"],["vector-effect","non-scaling-stroke","d","M29.524032,0.669921875 L55.6419593,108.305728 C55.9024257,109.379148 55.2433964,110.460477 54.1699762,110.720943 C54.0155692,110.75841 53.8572476,110.777344 53.69836,110.777344 L2.40272523,110.777344 C1.29815573,110.777344 0.402725233,109.881913 0.402725233,108.777344 C0.402725233,108.601258 0.42597945,108.425943 0.471884777,108.255946 L29.524032,0.669921875 Z"],["vector-effect","non-scaling-stroke","stroke-linejoin","round","points","29 0 56.572466 112.5 0 112.5"],["vector-effect","non-scaling-stroke","d","M29,6.09449405 C29,103.433283 29,153.036706 29,154.904762 C29,153.036706 29,103.433283 29,6.09449405 Z"],["vector-effect","non-scaling-stroke","d","M29,74.2334004 C41,87.05321 47,93.6881307 47,94.1381623 C47,93.6881307 41,87.05321 29,74.2334004 Z","stroke-linejoin","round","transform","translate(38.000000, 84.185781) scale(-1, 1) translate(-38.000000, -84.185781) "],["vector-effect","non-scaling-stroke","d","M14,61.2334004 C24,72.7198767 29,78.6881307 29,79.1381623 C29,78.6881307 24,72.7198767 14,61.2334004 Z","stroke-linejoin","round"],["vector-effect","non-scaling-stroke","d","M29,48.2334004 C36.3333333,57.05321 40,61.6881307 40,62.1381623 C40,61.6881307 36.3333333,57.05321 29,48.2334004 Z","stroke-linejoin","round","transform","translate(34.500000, 55.185781) scale(-1, 1) translate(-34.500000, -55.185781) "],["transform","translate(347.500000, 166.000000)"],["transform","translate(0.000000, 4.000000)",1,"slds-illustration__fill-secondary"],["vector-effect","non-scaling-stroke","stroke-linejoin","round","points","17 0.709590879 34 91.5 -1.82254212e-12 91.5"],["vector-effect","non-scaling-stroke","d","M17,5.09449405 C17,83.0999502 17,123.036706 17,124.904762 C17,123.036706 17,83.0999502 17,5.09449405 Z"],["vector-effect","non-scaling-stroke","d","M17,61.2334004 C24.3333333,68.7198767 28,72.6881307 28,73.1381623 C28,72.6881307 24.3333333,68.7198767 17,61.2334004 Z","stroke-linejoin","round","transform","translate(22.500000, 67.185781) scale(-1, 1) translate(-22.500000, -67.185781) "],["transform","translate(392.000000, 184.000000)","stroke-linecap","round","stroke-width","3",1,"slds-illustration__stroke-secondary"],["transform","translate(31.713442, 25.088326) rotate(-15.000000) translate(-31.713442, -25.088326) translate(4.713442, 6.588326)"],["vector-effect","non-scaling-stroke","d","M31.0360707,3.43528591 C31.0360707,3.43528591 40.5802283,0.671893051 42.6488424,10.6908663","transform","translate(36.842457, 6.888440) rotate(41.000000) translate(-36.842457, -6.888440) "],["vector-effect","non-scaling-stroke","d","M40.4282002,10.1797377 C40.4282002,10.1797377 49.9723578,7.4163448 52.0409719,17.435318","transform","translate(46.234586, 13.632892) scale(-1, 1) rotate(-41.000000) translate(-46.234586, -13.632892) "],["vector-effect","non-scaling-stroke","d","M0.730284783,29.5865514 C0.730284783,29.5865514 10.2744424,26.8231586 12.3430565,36.8421318"],["vector-effect","non-scaling-stroke","d","M12.7302848,29.5865514 C12.7302848,29.5865514 22.2744424,26.8231586 24.3430565,36.8421318","transform","translate(18.536671, 33.039705) scale(-1, 1) translate(-18.536671, -33.039705) "],[1,"slds-text-longform"],[1,"slds-text-heading--small"],["label","LBL_NO_ACTIVITIES"]],template:function(e,t){1&e&&(i.TgZ(0,"div",0),i.O4$(),i.TgZ(1,"svg",1)(2,"g",2)(3,"g",3)(4,"g")(5,"g",4),i._UZ(6,"polyline",5)(7,"polyline",6)(8,"path",7)(9,"path",8)(10,"path",9),i.qZA(),i.TgZ(11,"g",10),i._UZ(12,"path",11)(13,"path",12)(14,"path",13)(15,"path",14),i.qZA(),i.TgZ(16,"g",15),i._UZ(17,"path",11)(18,"path",12)(19,"path",13)(20,"path",14),i.qZA(),i.TgZ(21,"g",16)(22,"g",17),i._UZ(23,"path",18)(24,"path",19)(25,"path",20),i.qZA(),i.TgZ(26,"g",21),i._UZ(27,"path",22)(28,"path",23)(29,"path",24)(30,"path",25)(31,"path",26)(32,"path",27)(33,"path",28),i.qZA()(),i.TgZ(34,"g",29)(35,"g",30),i._UZ(36,"path",31),i.qZA(),i.TgZ(37,"g",32),i._UZ(38,"polygon",33)(39,"path",34)(40,"path",35)(41,"path",36),i.qZA()(),i.TgZ(42,"g",37)(43,"g",38),i._UZ(44,"path",39),i.qZA(),i.TgZ(45,"g",32),i._UZ(46,"polygon",40)(47,"path",41)(48,"path",42)(49,"path",43)(50,"path",44),i.qZA()(),i.TgZ(51,"g",45)(52,"g",46),i._UZ(53,"path",31),i.qZA(),i.TgZ(54,"g",32),i._UZ(55,"polygon",47)(56,"path",48)(57,"path",49),i.qZA()(),i.TgZ(58,"g",50)(59,"g",51),i._UZ(60,"path",52)(61,"path",53)(62,"path",54)(63,"path",55),i.qZA()()()()()(),i.kcU(),i.TgZ(64,"div",56)(65,"h3",57),i._UZ(66,"system-label",58),i.qZA()()())},dependencies:[l._],encapsulation:2}),SystemIllustrationNoTask})()},9574:(e,t,s)=>{"use strict";s.d(t,{k:()=>l});var i=s(1571);const n=["*"];let l=(()=>{class SystemIllustrationPageNotAvailable{}return SystemIllustrationPageNotAvailable.ɵfac=function(e){return new(e||SystemIllustrationPageNotAvailable)},SystemIllustrationPageNotAvailable.ɵcmp=i.Xpm({type:SystemIllustrationPageNotAvailable,selectors:[["system-illustration-page-not-available"]],ngContentSelectors:n,decls:81,vars:0,consts:[[1,"slds-illustration","slds-illustration_small"],["viewBox","0 0 470 229","aria-hidden","true","xmlns","http://www.w3.org/2000/svg",1,"slds-illustration__svg"],["stroke","none","stroke-width","1","fill","none","fill-rule","evenodd"],["transform","translate(-65.000000, -89.000000)"],["transform","translate(67.000000, 266.000000)"],["vector-effect","non-scaling-stroke","d","M16,36.5 L466,36.5","stroke-width","3","stroke-linecap","round",1,"slds-illustration__stroke-secondary"],["vector-effect","non-scaling-stroke","d","M0,36.5 L6,36.5","stroke-width","3","stroke-linecap","round",1,"slds-illustration__stroke-secondary"],["vector-effect","non-scaling-stroke","stroke-width","3","stroke-linecap","round","stroke-linejoin","round","points","43 36 87.5 0 121.5 27",1,"slds-illustration__stroke-secondary"],["vector-effect","non-scaling-stroke","stroke-width","3","stroke-linecap","round","stroke-linejoin","round","points","111 17 121.5 9 153 36",1,"slds-illustration__stroke-secondary"],["vector-effect","non-scaling-stroke","d","M50.962964,14.4391572 L57,36 L45.770218,26.1063642 L49.037036,14.4391572 C49.1859485,13.9073269 49.7377996,13.5969106 50.2696299,13.7458231 C50.6059625,13.8399963 50.8687909,14.1028246 50.962964,14.4391572 Z","transform","translate(51.385109, 24.626882) scale(-1, 1) translate(-51.385109, -24.626882) ",1,"slds-illustration__fill-secondary"],["transform","translate(451.500000, 238.500000)"],["fill","#FFFFFF"],["vector-effect","non-scaling-stroke","d","M18.9209988,1.95433401 L33.259296,51.443436 C33.5666778,52.5043744 32.9557995,53.613617 31.8948612,53.9209988 C31.7139843,53.9734036 31.5266126,54 31.3382972,54 L2.6617028,54 C1.5571333,54 0.661702805,53.1045695 0.661702805,52 C0.661702805,51.8116846 0.688299176,51.6243129 0.74070397,51.443436 L15.0790012,1.95433401 C15.386383,0.893395645 16.4956256,0.282517358 17.556564,0.589899164 C18.2152102,0.780726338 18.7301717,1.29568777 18.9209988,1.95433401 Z"],["stroke-linecap","round","stroke-width","3",1,"slds-illustration__stroke-secondary"],["vector-effect","non-scaling-stroke","stroke-linejoin","round","points","17 0.323943662 34 54 -1.81721305e-12 54"],["vector-effect","non-scaling-stroke","d","M17,4.6953125 C17,43.0456294 17,62.6471919 17,63.5 C17,62.6471919 17,43.0456294 17,4.6953125 Z"],["vector-effect","non-scaling-stroke","d","M17,29.3239437 C22.3333333,35.7851611 25,39.1184944 25,39.3239437 C25,39.1184944 22.3333333,35.7851611 17,29.3239437 Z","stroke-linejoin","round","transform","translate(21.000000, 34.323944) scale(-1, 1) translate(-21.000000, -34.323944) "],["transform","translate(408.000000, 205.500000)"],["transform","translate(1.000000, 0.000000)","fill","#FFFFFF"],["vector-effect","non-scaling-stroke","d","M25.6478873,0 L50.879042,84.4273253 C51.1953215,85.4856452 50.5937789,86.5999782 49.535459,86.9162577 C49.3496374,86.9717906 49.1567264,87 48.9627843,87 L2.33299037,87 C1.22842087,87 0.332990367,86.1045695 0.332990367,85 C0.332990367,84.8060578 0.361199757,84.6131469 0.416732643,84.4273253 L25.6478873,0 Z"],["vector-effect","non-scaling-stroke","stroke-linejoin","round","points","26.5 0 52.5 87 0.5 87"],["vector-effect","non-scaling-stroke","d","M26.5,3.58642578 C26.5,64.0261034 26.5,94.9972948 26.5,96.5 C26.5,94.9972948 26.5,64.0261034 26.5,3.58642578 Z"],["vector-effect","non-scaling-stroke","d","M15.6478873,42 C22.9812207,49.078692 26.6478873,52.7453587 26.6478873,53 C26.6478873,52.7453587 22.9812207,49.078692 15.6478873,42 Z","stroke-linejoin","round"],["vector-effect","non-scaling-stroke","d","M27.6478873,68 C36.9812207,57.078692 41.6478873,51.7453587 41.6478873,52 C41.6478873,51.7453587 36.9812207,57.078692 27.6478873,68 Z","stroke-linejoin","round"],["transform","translate(323.317280, 164.835938) rotate(-45.000000) translate(-323.317280, -164.835938) translate(242.317280, 130.835938)"],["transform","translate(5.000000, 44.000000)","fill","#FFFFFF"],["vector-effect","non-scaling-stroke","d","M4.18947979,0.995611783 L0.115234375,11.9555255 C12.0957996,19.4577143 18.3338849,23.301537 18.8294904,23.4869936 C19.1669204,23.6132606 21.7612542,24.0399819 26.9701953,23.7763273 C28.5980425,23.6939326 31.6346656,23.3623612 36.0800647,22.7816131 C40.0461992,21.6828201 43.0275796,20.7161876 45.0242059,19.8817158 C47.0208321,19.0472439 50.3465588,17.377878 55.0013859,14.8736182 L47.5277368,3.21878589 L4.18947979,0.995611783 Z"],["transform","translate(1.000000, 0.000000)",1,"slds-illustration__fill-secondary"],["stroke-width","3","stroke-linecap","round","stroke-linejoin","round","x","0.973240311","y","10.995821","width","11.5","height","12",1,"slds-illustration__stroke-primary"],["vector-effect","non-scaling-stroke","d","M4.77755146,50.2284782 C13.286202,52.6362568 21.480957,53.7936597 29.3618164,53.7006867 C37.2426758,53.6077138 44.7765582,51.7400968 51.9634637,48.0978356 C50.0751252,44.4670451 48.7826758,41.7898449 48.0861155,40.0662351 C47.3895551,38.3426252 46.5236255,35.6790055 45.4883267,32.075376 L45.2946319,0.293204959 L12.5695367,0.148192827 L12.5726441,32.0166806 C11.5738974,36.4623212 10.6196945,39.7477667 9.71003558,41.8730172 C8.80037666,43.9982676 7.15621528,46.7834213 4.77755146,50.2284782 Z"],["vector-effect","non-scaling-stroke","d","M45.4341011,10.7997716 L160.934101,10.7997716 L160.934101,29.2075859 C138.796894,24.9149057 121.296894,22.8695992 108.434101,23.0716664 C103.947529,23.0716664 96.9638862,23.0716664 87.4831733,23.0716664 L45.4341011,23.0716664 L45.4341011,10.7997716 Z"],["transform","translate(0.000000, 0.000000)"],["vector-effect","non-scaling-stroke","d","M13.5015145,4.53816197e-13 L46.505417,4.53816197e-13 L46.505417,24.0516129 C46.0805407,29.6108858 47.016166,35.1227138 49.312293,40.5870968 C51.6084201,46.0514798 55.1733269,52.064383 60.0070135,58.6258065 C49.5057718,64.6387097 39.5045892,67.6451613 30.0034658,67.6451613 C20.5023423,67.6451613 10.5011597,64.6387097 -8.20017976e-05,58.6258065 C5.7540776,50.5948062 9.47046374,44.581903 11.1490764,40.5870968 C12.8276891,36.5922906 13.6118351,31.0804626 13.5015145,24.0516129 L13.5015145,4.53816197e-13 Z","stroke-width","3","stroke-linecap","round","stroke-linejoin","round",1,"slds-illustration__stroke-primary"],["stroke-width","3","stroke-linecap","round","stroke-linejoin","round","x","1.97324031","y","10.995821","width","11.5","height","12",1,"slds-illustration__stroke-primary"],["vector-effect","non-scaling-stroke","d","M46.4341011,10.7997716 L161.934101,10.7997716 L161.934101,29.2075859 C139.796894,24.9149057 122.296894,22.8695992 109.434101,23.0716664 C104.947529,23.0716664 97.9638862,23.0716664 88.4831733,23.0716664 L46.4341011,23.0716664 L46.4341011,10.7997716 Z","stroke-width","3","stroke-linecap","round","stroke-linejoin","round",1,"slds-illustration__stroke-primary"],["vector-effect","non-scaling-stroke","points","66 10.5225806 102 10.5225806 102.162282 23.0225806 66.0542614 22.8973803",1,"slds-illustration__fill-primary"],["transform","translate(124.000000, 219.518658)"],["transform","translate(117.000000, 0.000000)","fill","#FFFFFF"],["vector-effect","non-scaling-stroke","points","0.115234375 0.823139211 0.115234375 6.95790484 131.128906 21.124897 131.128906 14.975483"],["transform","translate(95.000000, 4.000000)",1,"slds-illustration__fill-secondary"],["vector-effect","non-scaling-stroke","points","21.9667969 0.213764211 152.662109 14.9813423 152.662109 65.9637642 160.867188 80.1434517 174.628906 92.3211861 0.63671875 92.3211861 13.7480469 80.1434517 21.9667969 61.2977486"],["vector-effect","non-scaling-stroke","d","M118.5,15.4813423 L118.5,61.4813423 C117.921224,71.8381104 115.333984,79.318309 110.738281,83.921938 C106.142578,88.525567 100.896484,92.8787018 95,96.9813423 L271,96.9813423 C264.389323,92.6555667 259.341797,87.3824891 255.857422,81.1621094 C252.373047,74.9417297 250.253906,67.5264029 249.5,58.916129 L249.5,0.481342336 L118.5,15.4813423 Z","stroke-width","3","stroke-linecap","round","stroke-linejoin","round","transform","translate(183.000000, 48.731342) scale(-1, 1) translate(-183.000000, -48.731342) ",1,"slds-illustration__stroke-primary"],["vector-effect","non-scaling-stroke","d","M271.928751,76.7784845 L280,97 L262,97 L270.071249,76.7784845 C270.275982,76.2655493 270.857768,76.0157027 271.370703,76.2204365 C271.625359,76.3220801 271.827108,76.5238291 271.928751,76.7784845 Z",1,"slds-illustration__fill-primary"],["vector-effect","non-scaling-stroke","d","M282.428751,84.2946136 L287.5,97 L275.5,97 L280.571249,84.2946136 C280.775982,83.7816784 281.357768,83.5318318 281.870703,83.7365656 C282.125359,83.8382092 282.327108,84.0399581 282.428751,84.2946136 Z",1,"slds-illustration__fill-primary"],["vector-effect","non-scaling-stroke","d","M90.4287513,76.7784845 L98.5,97 L80.5,97 L88.5712487,76.7784845 C88.7759825,76.2655493 89.3577681,76.0157027 89.8707033,76.2204365 C90.1253588,76.3220801 90.3271077,76.5238291 90.4287513,76.7784845 Z","transform","translate(89.500000, 86.998788) scale(-1, 1) translate(-89.500000, -86.998788) ",1,"slds-illustration__fill-primary"],["vector-effect","non-scaling-stroke","d","M76.9287513,84.2946136 L82,97 L70,97 L75.0712487,84.2946136 C75.2759825,83.7816784 75.8577681,83.5318318 76.3707033,83.7365656 C76.6253588,83.8382092 76.8271077,84.0399581 76.9287513,84.2946136 Z","transform","translate(76.000000, 90.756853) scale(-1, 1) translate(-76.000000, -90.756853) ",1,"slds-illustration__fill-primary"],["vector-effect","non-scaling-stroke","d","M20,96.9813423 L370,96.9813423","stroke-width","3","stroke-linecap","round","stroke-linejoin","round",1,"slds-illustration__stroke-primary"],["vector-effect","non-scaling-stroke","d","M0,96.9813423 L12,96.9813423","stroke-width","3","stroke-linecap","round","stroke-linejoin","round",1,"slds-illustration__stroke-primary"],["vector-effect","non-scaling-stroke","d","M226.5,14.4813423 L226.5,40.4813423 C226.854167,55.9423134 234.6875,67.6089801 250,75.4813423","stroke-width","3","stroke-linecap","round","stroke-linejoin","round",1,"slds-illustration__stroke-primary"],["vector-effect","non-scaling-stroke","d","M212.5,12.4813423 L212.5,51.4813423 C211.329427,75.4461105 226.830078,87.4461105 259.001953,87.4813423","stroke-width","3","stroke-linecap","round","stroke-linejoin","round",1,"slds-illustration__stroke-primary"],["vector-effect","non-scaling-stroke","d","M190.5,9.48134234 L190.5,96.4813423","stroke-width","3","stroke-linecap","round","stroke-linejoin","round",1,"slds-illustration__stroke-primary"],["vector-effect","non-scaling-stroke","d","M160.5,5.48134234 L160.5,96.4813423","stroke-width","3","stroke-linecap","round","stroke-linejoin","round",1,"slds-illustration__stroke-primary"],["vector-effect","non-scaling-stroke","d","M148.5,4.48134234 L148.5,60.4813423 C148.166667,84.3362203 131.634766,96.2636593 98.9042969,96.2636593","stroke-width","3","stroke-linecap","round","stroke-linejoin","round",1,"slds-illustration__stroke-primary"],["vector-effect","non-scaling-stroke","d","M131.5,2.48134234 L131.5,54.2203125 C132.691406,76.2363071 124.326172,87.2443044 106.404297,87.2443044","stroke-width","3","stroke-linecap","round","stroke-linejoin","round",1,"slds-illustration__stroke-primary"],["transform","translate(160.000000, 107.000000)","stroke-linecap","round","stroke-width","3",1,"slds-illustration__stroke-secondary"],["vector-effect","non-scaling-stroke","d","M44,17.5 L63,17.5 C62.2789714,12.0723971 64.081543,7.53186978 68.4077148,3.87841797 C73.3754883,-0.195556641 79.2734375,0.717773438 82.440918,2.12353516 C85.6083984,3.52929687 87.9606934,5.46069336 89.5913086,9.10524041 C90.2822266,10.6397351 90.7517904,11.9379883 91,13"],["vector-effect","non-scaling-stroke","d","M83,20.5 C84.0558268,16.8461914 86.2227376,14.4572754 89.5007324,13.333252 C94.4177246,11.6472168 99.0800781,13.8925781 100.942383,16.1518555 C102.804687,18.4111328 103.39502,20.2260742 103.746582,22.1201172 C103.980957,23.3828125 104.06543,24.8427734 104,26.5 C108.141764,26.3313802 110.918945,27.1647135 112.331543,29 C114.040039,31.1936035 114.215332,33.817627 113.593018,35.75 C112.970703,37.682373 110.894531,40.5 107,40.5 L28,40.5"],["vector-effect","non-scaling-stroke","d","M18,27.5 L83.0004985,27.5"],["vector-effect","non-scaling-stroke","d","M0,27.5 L8,27.5"],["transform","translate(319.000000, 147.000000)","stroke-linecap","round","stroke-width","3",1,"slds-illustration__stroke-secondary"],["transform","translate(179.000000, 216.518658)"],["transform","translate(6.000000, 2.000000)","fill","#FFFFFF"],["vector-effect","non-scaling-stroke","d","M20.8180195,40.0662428 L20.8180195,3.98882348 C14.8180195,9.37296043 11.8180195,15.3858637 11.8180195,22.0275332 C11.8180195,28.6692027 14.8180195,34.6821059 20.8180195,40.0662428 Z","transform","translate(16.318019, 22.027533) scale(-1, -1) rotate(-45.000000) translate(-16.318019, -22.027533) "],["vector-effect","non-scaling-stroke","d","M38.0732996,21.3284985 L38.0732996,-1.21988855 C34.3232996,2.14519704 32.4482996,5.90326156 32.4482996,10.054305 C32.4482996,14.2053484 34.3232996,17.963413 38.0732996,21.3284985 Z","transform","translate(35.260800, 10.054305) scale(1, -1) rotate(-45.000000) translate(-35.260800, -10.054305) "],["transform","translate(0.000000, 6.000000)",1,"slds-illustration__fill-secondary"],["vector-effect","non-scaling-stroke","d","M20.8180195,42.0662428 L20.8180195,5.98882348 C14.8180195,11.3729604 11.8180195,17.3858637 11.8180195,24.0275332 C11.8180195,30.6692027 14.8180195,36.6821059 20.8180195,42.0662428 Z","transform","translate(16.318019, 24.027533) rotate(-45.000000) translate(-16.318019, -24.027533) "],["vector-effect","non-scaling-stroke","d","M47.9262378,21.3284985 L47.9262378,-1.21988855 C44.1762378,2.14519704 42.3012378,5.90326156 42.3012378,10.054305 C42.3012378,14.2053484 44.1762378,17.963413 47.9262378,21.3284985 Z","transform","translate(45.113738, 10.054305) scale(-1, 1) rotate(-45.000000) translate(-45.113738, -10.054305) "],["stroke-linecap","round","stroke-linejoin","round","stroke-width","3",1,"slds-illustration__stroke-primary"],["vector-effect","non-scaling-stroke","d","M60,64.4813423 C42.5559896,58.4405997 33.7226563,49.4405997 33.5,37.4813423 L33.5,0.481342336"],["vector-effect","non-scaling-stroke","d","M19.5,44.8774194 C25.5,39.4932824 28.5,33.4803792 28.5,26.8387097 C28.5,20.1970402 25.5,14.1841369 19.5,8.8 C13.5,14.1841369 10.5,20.1970402 10.5,26.8387097 C10.5,33.4803792 13.5,39.4932824 19.5,44.8774194 Z","transform","translate(19.500000, 26.838710) rotate(-45.000000) translate(-19.500000, -26.838710) "],["vector-effect","non-scaling-stroke","d","M43.125,25.3354839 C46.875,21.9703983 48.75,18.2123338 48.75,14.0612903 C48.75,9.91024688 46.875,6.15218236 43.125,2.78709677 C39.375,6.15218236 37.5,9.91024688 37.5,14.0612903 C37.5,18.2123338 39.375,21.9703983 43.125,25.3354839 Z","transform","translate(43.125000, 14.061290) scale(-1, 1) rotate(-45.000000) translate(-43.125000, -14.061290) "],[1,"slds-text-longform"],[1,"slds-text-heading_medium"]],template:function(e,t){1&e&&(i.F$t(),i.TgZ(0,"div",0),i.O4$(),i.TgZ(1,"svg",1)(2,"g",2)(3,"g",3)(4,"g")(5,"g",4),i._UZ(6,"path",5)(7,"path",6)(8,"polyline",7)(9,"polyline",8)(10,"path",9),i.qZA(),i.TgZ(11,"g",10)(12,"g",11),i._UZ(13,"path",12),i.qZA(),i.TgZ(14,"g",13),i._UZ(15,"polygon",14)(16,"path",15)(17,"path",16),i.qZA()(),i.TgZ(18,"g",17)(19,"g",18),i._UZ(20,"path",19),i.qZA(),i.TgZ(21,"g",13),i._UZ(22,"polygon",20)(23,"path",21)(24,"path",22)(25,"path",23),i.qZA()(),i.TgZ(26,"g",24)(27,"g",25),i._UZ(28,"path",26),i.qZA(),i.TgZ(29,"g",27),i._UZ(30,"rect",28)(31,"path",29)(32,"path",30),i.qZA(),i.TgZ(33,"g",31),i._UZ(34,"path",32)(35,"rect",33)(36,"path",34)(37,"polygon",35),i.qZA()(),i.TgZ(38,"g",36)(39,"g",37),i._UZ(40,"polygon",38),i.qZA(),i.TgZ(41,"g",39),i._UZ(42,"polygon",40),i.qZA(),i.TgZ(43,"g"),i._UZ(44,"path",41)(45,"path",42)(46,"path",43)(47,"path",44)(48,"path",45)(49,"path",46)(50,"path",47)(51,"path",48)(52,"path",49)(53,"path",50)(54,"path",51)(55,"path",52)(56,"path",53),i.qZA()(),i.TgZ(57,"g",54),i._UZ(58,"path",55)(59,"path",56)(60,"path",57)(61,"path",58),i.qZA(),i.TgZ(62,"g",59),i._UZ(63,"path",55)(64,"path",56)(65,"path",57)(66,"path",58),i.qZA(),i.TgZ(67,"g",60)(68,"g",61),i._UZ(69,"path",62)(70,"path",63),i.qZA(),i.TgZ(71,"g",64),i._UZ(72,"path",65)(73,"path",66),i.qZA(),i.TgZ(74,"g",67),i._UZ(75,"path",68)(76,"path",69)(77,"path",70),i.qZA()()()()()(),i.kcU(),i.TgZ(78,"div",71)(79,"h3",72),i.Hsn(80),i.qZA()()())},encapsulation:2}),SystemIllustrationPageNotAvailable})()},4728:(e,t,s)=>{"use strict";s.d(t,{Q:()=>p});var i=s(1571),n=s(433),l=s(5329),o=s(4154),a=s(6895),d=s(6898),r=s(4036),c=s(7302);function u(e,t){if(1&e&&(i.TgZ(0,"option",8),i._uU(1),i.qZA()),2&e){const e=t.$implicit;i.Q6J("value",e.id),i.xp6(1),i.Oqu(e.name)}}function m(e,t){if(1&e&&(i.TgZ(0,"optgroup",6),i.YNc(1,u,2,2,"option",7),i.ALo(2,"systemmodulecustompipe"),i.qZA()),2&e){const e=i.oxw();i.Q6J("label","custom "+e.language.getLabel("LBL_ACTIONSET")),i.xp6(1),i.Q6J("ngForOf",i.xi3(2,2,e._actionsets,e._module))}}function h(e,t){if(1&e&&(i.TgZ(0,"option",8),i._uU(1),i.qZA()),2&e){const e=t.$implicit;i.Q6J("value",e.id),i.xp6(1),i.Oqu(e.name)}}function g(e,t){if(1&e&&(i.TgZ(0,"optgroup",6),i.YNc(1,h,2,2,"option",7),i.ALo(2,"systemmoduleglobalpipe"),i.qZA()),2&e){const e=i.oxw();i.Q6J("label","global "+e.language.getLabel("LBL_ACTIONSET")),i.xp6(1),i.Q6J("ngForOf",i.xi3(2,2,e._actionsets,e._module))}}let p=(()=>{class SystemInputActionset{constructor(e,t){this.language=e,this.metadata=t,this.disabled=!1,this._actionsets=[],this._module="",this._actionsets=this.metadata.getActionSets()}get actionset(){return this._actionset}set actionset(e){this._actionset=e,this.onChange(e)}detectModule(){this._actionset&&(this._module=this.metadata.getActionSet(this._actionset).module)}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}writeValue(e){this._actionset=e,this.detectModule()}}return SystemInputActionset.ɵfac=function(e){return new(e||SystemInputActionset)(i.Y36(l.d),i.Y36(o.Pu))},SystemInputActionset.ɵcmp=i.Xpm({type:SystemInputActionset,selectors:[["system-input-actionset"]],inputs:{disabled:"disabled"},features:[i._Bn([{provide:n.JU,useExisting:(0,i.Gpc)((()=>SystemInputActionset)),multi:!0}])],decls:10,vars:12,consts:[[1,"slds-grid"],[1,"slds-p-right--xxx-small","slds-size--1-of-3",3,"ngModel","displayAsterisk","ngModelChange"],[1,"slds-form-element__control","slds-p-left--xxx-small","slds-size--2-of-3"],[1,"slds-select_container"],[1,"slds-select",3,"disabled","ngModel","ngModelChange"],[3,"label",4,"ngIf"],[3,"label"],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(e,t){1&e&&(i.TgZ(0,"div",0)(1,"system-input-module",1),i.NdJ("ngModelChange",(function(e){return t._module=e})),i.qZA(),i.TgZ(2,"div",2)(3,"div",3)(4,"select",4),i.NdJ("ngModelChange",(function(e){return t.actionset=e})),i._UZ(5,"option"),i.YNc(6,m,3,5,"optgroup",5),i.ALo(7,"systemmodulecustompipe"),i.YNc(8,g,3,5,"optgroup",5),i.ALo(9,"systemmoduleglobalpipe"),i.qZA()()()()),2&e&&(i.xp6(1),i.Q6J("ngModel",t._module)("displayAsterisk",!0),i.xp6(3),i.Q6J("disabled",!t._module||t.disabled)("ngModel",t.actionset),i.xp6(2),i.Q6J("ngIf",i.xi3(7,6,t._actionsets,t._module).length>0),i.xp6(2),i.Q6J("ngIf",i.xi3(9,9,t._actionsets,t._module).length>0))},dependencies:[a.sg,a.O5,n.YN,n.Kr,n.EJ,n.JJ,n.On,d.a,r.N,c.m],encapsulation:2}),SystemInputActionset})()},8973:(e,t,s)=>{"use strict";s.d(t,{N:()=>c});var i=s(1571),n=s(433),l=s(5329),o=s(4154),a=s(4505),d=s(6895);function r(e,t){if(1&e&&(i.TgZ(0,"option",6),i._uU(1),i.qZA()),2&e){const e=t.$implicit;i.Q6J("value",e),i.xp6(1),i.Oqu(e)}}let c=(()=>{class SystemInputBackendMethod{constructor(e,t,s){this.language=e,this.metadata=t,this.backend=s,this.disabled=!1,this._class="",this._method="",this._classexists=!1,this._methods=[]}get modelOptions(){return{updateOn:"blur"}}get classname(){return this._class}set classname(e){this._class=e,""!=this.classname?this.validateNamespace():(this._method="",this._methods=[],this._classexists=!1),this.joinValue()}get methodname(){return this._method}set methodname(e){this._method=e,this.joinValue()}validateNamespace(){this.backend.getRequest("system/checkclass/"+btoa(this._class)).subscribe((e=>{this._classexists=e.classexists,this._methods=e.methods}))}splitValue(){if(this._value){let e=this._value.split("->");this._class=e[0],this._method=e[1],this.validateNamespace()}}joinValue(){""!=this._class?this._value=this._class+"->"+this._method:this._value="",this.onChange(this._value)}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}writeValue(e){e!=this._value&&(this._value=e,this.splitValue())}}return SystemInputBackendMethod.ɵfac=function(e){return new(e||SystemInputBackendMethod)(i.Y36(l.d),i.Y36(o.Pu),i.Y36(a.y))},SystemInputBackendMethod.ɵcmp=i.Xpm({type:SystemInputBackendMethod,selectors:[["system-input-backend-method"]],inputs:{disabled:"disabled"},features:[i._Bn([{provide:n.JU,useExisting:(0,i.Gpc)((()=>SystemInputBackendMethod)),multi:!0}])],decls:6,vars:6,consts:[[1,"slds-grid","slds-grid--vertical-align-center","slds-gutters_direct-xx-small"],["type","text",1,"slds-col","slds-size--2-of-3","slds-input",3,"disabled","ngModel","ngModelOptions","ngModelChange"],["focus",""],[1,"slds-col","slds-size--1-of-3","slds-select_container"],[1,"slds-select",3,"disabled","ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(e,t){1&e&&(i.TgZ(0,"div",0)(1,"input",1,2),i.NdJ("ngModelChange",(function(e){return t.classname=e})),i.qZA(),i.TgZ(3,"div",3)(4,"select",4),i.NdJ("ngModelChange",(function(e){return t.methodname=e})),i.YNc(5,r,2,2,"option",5),i.qZA()()()),2&e&&(i.xp6(1),i.Q6J("disabled",t.disabled)("ngModel",t.classname)("ngModelOptions",t.modelOptions),i.xp6(3),i.Q6J("disabled",!t._classexists||0==t._methods.length||t.disabled)("ngModel",t.methodname),i.xp6(1),i.Q6J("ngForOf",t._methods))},dependencies:[d.sg,n.YN,n.Kr,n.Fj,n.EJ,n.JJ,n.On],encapsulation:2}),SystemInputBackendMethod})()},6991:(e,t,s)=>{"use strict";s.d(t,{V:()=>a});var i=s(1571),n=s(433),l=s(6895);const o={provide:n.JU,useExisting:(0,i.Gpc)((()=>a)),multi:!0};let a=(()=>{class SystemInputBase64{constructor(){this.minHeight=150,this.maxHeight=500,this.disabled=!1,this._value=""}get value(){if(!this._value||""==this._value)return"";try{return decodeURIComponent(window.atob(this._value))}catch(e){try{return window.atob(this._value)}catch(e){return""}}}set value(e){this._value=window.btoa(e),"function"==typeof this.onChange&&this.onChange(this._value)}get textAreaStyle(){return{"min-height":this.minHeight+"px","max-height":this.maxHeight+"px"}}registerOnChange(e){this.onChange=t=>{e(t)}}registerOnTouched(e){this.onTouched=e}writeValue(e){this._value=e}}return SystemInputBase64.ɵfac=function(e){return new(e||SystemInputBase64)},SystemInputBase64.ɵcmp=i.Xpm({type:SystemInputBase64,selectors:[["system-input-base64"]],inputs:{minHeight:"minHeight",maxHeight:"maxHeight",disabled:"disabled"},features:[i._Bn([o])],decls:2,vars:3,consts:[[1,"slds-form-element__control"],[1,"slds-textarea","slds-scrollable--y","slds-m-vertical--xx-small",3,"ngModel","ngStyle","disabled","ngModelChange"]],template:function(e,t){1&e&&(i.TgZ(0,"div",0)(1,"textarea",1),i.NdJ("ngModelChange",(function(e){return t.value=e})),i.qZA()()),2&e&&(i.xp6(1),i.Q6J("ngModel",t.value)("ngStyle",t.textAreaStyle)("disabled",t.disabled))},dependencies:[l.PC,n.Fj,n.JJ,n.On],encapsulation:2}),SystemInputBase64})()},2391:(e,t,s)=>{"use strict";s.d(t,{K:()=>h});var i=s(1571),n=s(433),l=s(4154),o=s(5329),a=s(6625),d=s(6895),r=s(2656);function c(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"li",14),i.NdJ("click",(function(){const t=i.CHM(e).$implicit,s=i.oxw(2);return i.KtG(s.setColor(t))})),i.TgZ(1,"span",15)(2,"span",16)(3,"span",17),i._uU(4),i.qZA()()()()}if(2&e){const e=t.$implicit;i.xp6(2),i.Udp("background-color",e),i.xp6(2),i.Oqu(e)}}function u(e,t){if(1&e&&(i.TgZ(0,"section",8)(1,"div",9)(2,"div",10)(3,"div",11)(4,"ul",12),i.YNc(5,c,5,3,"li",13),i.qZA()()()()()),2&e){const e=i.oxw();i.xp6(5),i.Q6J("ngForOf",e.colorPalette)("ngForTrackBy",e.trackByFnIndex)}}const m=function(e){return{"slds-is-edited":e}};let h=(()=>{class SystemInputColor{constructor(e,t,s){this.metadata=e,this.language=t,this.configuration=s,this.colorPalette=["e3abec","c2dbf7","9fd6ff","9de7da","9df0c0","fff099","fed49a","d073e0","86baf3","5ebbff","44d8be","3be282","ffe654","ffb758","bd35bd","5779c1","5ebbff","00aea9","3cba4c","f5bc25","f99221","580d8c","001970","0a2399","0b7477","0b6b50","b67e11","b85d0d"],this.strict=!1,this.isOpen=!1,this.isedited=!1}get value(){return this._value}set value(e){e!=this._value&&(this._value=e,this.onChange(e))}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}writeValue(e){this._value=e}trackByFnIndex(e,t){return e}colorStyle(e){return{background:this._value}}setColor(e){this.value="#"+e,this.isOpen=!1}}return SystemInputColor.ɵfac=function(e){return new(e||SystemInputColor)(i.Y36(l.Pu),i.Y36(o.d),i.Y36(a.C))},SystemInputColor.ɵcmp=i.Xpm({type:SystemInputColor,selectors:[["system-input-color"]],inputs:{isedited:"isedited"},features:[i._Bn([{provide:n.JU,useExisting:(0,i.Gpc)((()=>SystemInputColor)),multi:!0}])],decls:8,vars:6,consts:[[1,"slds-form-element","slds-is-relative"],[1,"slds-color-picker"],[1,"slds-form-element__control","slds-grid","slds-grid--vertical-align-center"],[1,"slds-button","slds-color-picker__summary-button","slds-button_icon","slds-button_icon-more",3,"click"],[1,"slds-swatch",3,"ngStyle"],["icon","down",1,"slds-button__icon","slds-button__icon_small","slds-m-left_xx-small"],["type","text",1,"slds-grow","slds-input",3,"ngClass","ngModel","ngModelChange"],["class","slds-popover slds-color-picker__selector slds-is-absolute","role","dialog",4,"ngIf"],["role","dialog",1,"slds-popover","slds-color-picker__selector","slds-is-absolute"],["id","dialog-body-id-37",1,"slds-popover__body"],[1,"slds-color-picker","slds-color-picker_swatches-only","slds-grid","slds-grid--vertical-align-center","slds-grow"],[1,"slds-color-picker__selector"],["role","menu",1,"slds-color-picker__swatches"],["class","slds-color-picker__swatch","role","presentation",3,"click",4,"ngFor","ngForOf","ngForTrackBy"],["role","presentation",1,"slds-color-picker__swatch",3,"click"],["role","menuitem",1,"slds-color-picker__swatch-trigger","slds-is-selected"],[1,"slds-swatch"],[1,"slds-assistive-text"]],template:function(e,t){1&e&&(i.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"button",3),i.NdJ("click",(function(){return t.isOpen=!t.isOpen})),i._UZ(4,"span",4)(5,"system-button-icon",5),i.qZA(),i.TgZ(6,"input",6),i.NdJ("ngModelChange",(function(e){return t.value=e})),i.qZA()(),i.YNc(7,u,6,2,"section",7),i.qZA()()),2&e&&(i.xp6(4),i.Q6J("ngStyle",t.colorStyle("brandprimary")),i.xp6(2),i.Q6J("ngClass",i.VKq(4,m,t.isedited))("ngModel",t.value),i.xp6(1),i.Q6J("ngIf",t.isOpen))},dependencies:[d.mk,d.sg,d.O5,d.PC,n.Fj,n.JJ,n.On,r.J],encapsulation:2}),SystemInputColor})()},1e3:(e,t,s)=>{"use strict";s.d(t,{x:()=>r});var i=s(1571),n=s(433),l=s(5329),o=s(6625),a=s(6895);function d(e,t){if(1&e&&(i.TgZ(0,"option",4),i._uU(1),i.qZA()),2&e){const e=t.$implicit;i.Q6J("value",e.id),i.xp6(1),i.Oqu(e.name)}}let r=(()=>{class SystemInputCompanycodes{constructor(e,t){this.language=e,this.configuration=t,this.disabled=!1,this._companycodes=[],this._companycodes=this.configuration.getData("companycodes"),"object"==typeof this._companycodes&&this._companycodes.sort(((e,t)=>e.name>t.name?-1:1))}get companycode(){return this._companycode}set companycode(e){this._companycode=e,this.onChange&&this.onChange(e)}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}writeValue(e){this._companycode=e}}return SystemInputCompanycodes.ɵfac=function(e){return new(e||SystemInputCompanycodes)(i.Y36(l.d),i.Y36(o.C))},SystemInputCompanycodes.ɵcmp=i.Xpm({type:SystemInputCompanycodes,selectors:[["system-input-companycodes"]],inputs:{disabled:"disabled"},features:[i._Bn([{provide:n.JU,useExisting:(0,i.Gpc)((()=>SystemInputCompanycodes)),multi:!0}])],decls:4,vars:3,consts:[[1,"slds-form-element__control"],[1,"slds-select_container"],[1,"slds-select",3,"disabled","ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(e,t){1&e&&(i.TgZ(0,"div",0)(1,"div",1)(2,"select",2),i.NdJ("ngModelChange",(function(e){return t.companycode=e})),i.YNc(3,d,2,2,"option",3),i.qZA()()()),2&e&&(i.xp6(2),i.Q6J("disabled",t.disabled)("ngModel",t.companycode),i.xp6(1),i.Q6J("ngForOf",t._companycodes))},dependencies:[a.sg,n.YN,n.Kr,n.EJ,n.JJ,n.On],encapsulation:2}),SystemInputCompanycodes})()},4665:(e,t,s)=>{"use strict";s.d(t,{C:()=>p});var i=s(1571),n=s(433),l=s(5329),o=s(4154),a=s(6895),d=s(4036),r=s(7302);function c(e,t){if(1&e&&(i.TgZ(0,"option",8),i._uU(1),i.qZA()),2&e){const e=t.$implicit;i.Q6J("value",e),i.xp6(1),i.Oqu(e)}}function u(e,t){if(1&e&&(i.TgZ(0,"option",8),i._uU(1),i.qZA()),2&e){const e=t.$implicit;i.Q6J("value",e.id),i.xp6(1),i.Oqu(e.name)}}function m(e,t){if(1&e&&(i.TgZ(0,"optgroup",9),i.YNc(1,u,2,2,"option",5),i.ALo(2,"systemmodulecustompipe"),i.qZA()),2&e){const e=i.oxw();i.Q6J("label","custom "+e.language.getLabel("LBL_COMPONENTSET")),i.xp6(1),i.Q6J("ngForOf",i.xi3(2,2,e._componentsets,e._module))}}function h(e,t){if(1&e&&(i.TgZ(0,"option",8),i._uU(1),i.qZA()),2&e){const e=t.$implicit;i.Q6J("value",e.id),i.xp6(1),i.Oqu(e.name)}}function g(e,t){if(1&e&&(i.TgZ(0,"optgroup",9),i.YNc(1,h,2,2,"option",5),i.ALo(2,"systemmoduleglobalpipe"),i.qZA()),2&e){const e=i.oxw();i.Q6J("label","global "+e.language.getLabel("LBL_COMPONENTSET")),i.xp6(1),i.Q6J("ngForOf",i.xi3(2,2,e._componentsets,e._module))}}let p=(()=>{class SystemInputComponentset{constructor(e,t){this.language=e,this.metadata=t,this.disabled=!1,this._componentsets=[],this._modules=[],this._module="",this._componentsets=this.metadata.getComponentSets(),this._modules=this.metadata.getModules(),this._modules.sort()}get componentset(){return this._componentset}set componentset(e){this._componentset=e,this.onChange(e)}detectModule(){this._componentset&&(this._module=this.metadata.getComponentSet(this._componentset).module)}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}writeValue(e){this._componentset=e,this.detectModule()}}return SystemInputComponentset.ɵfac=function(e){return new(e||SystemInputComponentset)(i.Y36(l.d),i.Y36(o.Pu))},SystemInputComponentset.ɵcmp=i.Xpm({type:SystemInputComponentset,selectors:[["system-input-componentset"]],inputs:{disabled:"disabled"},features:[i._Bn([{provide:n.JU,useExisting:(0,i.Gpc)((()=>SystemInputComponentset)),multi:!0}])],decls:15,vars:13,consts:[[1,"slds-grid"],[1,"slds-form-element__control","slds-p-right--xxx-small","slds-size--1-of-3"],[1,"slds-select_container"],[1,"slds-select",3,"disabled","ngModel","ngModelChange"],["value","*"],[3,"value",4,"ngFor","ngForOf"],[1,"slds-form-element__control","slds-p-left--xxx-small","slds-size--2-of-3"],[3,"label",4,"ngIf"],[3,"value"],[3,"label"]],template:function(e,t){1&e&&(i.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"select",3),i.NdJ("ngModelChange",(function(e){return t._module=e})),i.TgZ(4,"option",4),i._uU(5,"*"),i.qZA(),i.YNc(6,c,2,2,"option",5),i.qZA()()(),i.TgZ(7,"div",6)(8,"div",2)(9,"select",3),i.NdJ("ngModelChange",(function(e){return t.componentset=e})),i._UZ(10,"option"),i.YNc(11,m,3,5,"optgroup",7),i.ALo(12,"systemmodulecustompipe"),i.YNc(13,g,3,5,"optgroup",7),i.ALo(14,"systemmoduleglobalpipe"),i.qZA()()()()),2&e&&(i.xp6(3),i.Q6J("disabled",t.disabled)("ngModel",t._module),i.xp6(3),i.Q6J("ngForOf",t._modules),i.xp6(3),i.Q6J("disabled",!t._module||t.disabled)("ngModel",t.componentset),i.xp6(2),i.Q6J("ngIf",i.xi3(12,7,t._componentsets,t._module.length>0)),i.xp6(2),i.Q6J("ngIf",i.xi3(14,10,t._componentsets,t._module.length>0)))},dependencies:[a.sg,a.O5,n.YN,n.Kr,n.EJ,n.JJ,n.On,d.N,r.m],encapsulation:2}),SystemInputComponentset})()},9422:(e,t,s)=>{"use strict";s.d(t,{y:()=>h});var i=s(1571),n=s(433),l=s(4154),o=s(5329),a=s(6625),d=s(6895),r=s(3463);function c(e,t){if(1&e&&(i.TgZ(0,"option",8),i._UZ(1,"system-label",9),i.qZA()),2&e){const e=t.$implicit;i.Q6J("value",e.cc),i.xp6(1),i.Q6J("label",e.label)}}function u(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"div",3)(1,"select",4,5),i.NdJ("ngModelChange",(function(t){i.CHM(e);const s=i.oxw();return i.KtG(s.value=t)})),i._UZ(3,"option",6),i.YNc(4,c,2,2,"option",7),i.qZA()()}if(2&e){const e=i.oxw();i.xp6(1),i.Q6J("ngModel",e.value),i.xp6(3),i.Q6J("ngForOf",e.countries)}}function m(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"div",10)(1,"input",11),i.NdJ("ngModelChange",(function(t){i.CHM(e);const s=i.oxw();return i.KtG(s.value=t)})),i.qZA()()}if(2&e){const e=i.oxw();i.xp6(1),i.Q6J("ngModel",e.value)}}let h=(()=>{class SystemInputCountry{constructor(e,t,s){this.metadata=e,this.language=t,this.configuration=s,this.countries=[],this.strict=!1,"strict"==this.configuration.data.backendextensions.spiceui.config.format&&(this.strict=!0)}get value(){return this._value}set value(e){e!=this._value&&(this._value=e,this.onChange(e))}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}writeValue(e){this._value=e}ngOnInit(){this.strict&&this.getCountries()}getCountries(){let e=this.configuration.getData("countries");this.countries=e?.countries?e.countries:[],this.countries.sort(((e,t)=>this.language.getLabel(e.label).localeCompare(this.language.getLabel(t.label))))}}return SystemInputCountry.ɵfac=function(e){return new(e||SystemInputCountry)(i.Y36(l.Pu),i.Y36(o.d),i.Y36(a.C))},SystemInputCountry.ɵcmp=i.Xpm({type:SystemInputCountry,selectors:[["system-input-country"]],features:[i._Bn([{provide:n.JU,useExisting:(0,i.Gpc)((()=>SystemInputCountry)),multi:!0}])],decls:4,vars:2,consts:[[1,"slds-form-element"],["class","slds-select_container",4,"ngIf","ngIfElse"],["countryinput",""],[1,"slds-select_container"],[1,"slds-select",3,"ngModel","ngModelChange"],["focus",""],["value",""],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[3,"label"],[1,"slds-form-element__control"],["type","text",1,"slds-input",3,"ngModel","ngModelChange"]],template:function(e,t){if(1&e&&(i.TgZ(0,"div",0),i.YNc(1,u,5,2,"div",1),i.YNc(2,m,2,1,"ng-template",null,2,i.W1O),i.qZA()),2&e){const e=i.MAs(3);i.xp6(1),i.Q6J("ngIf",t.strict)("ngIfElse",e)}},dependencies:[d.sg,d.O5,n.YN,n.Kr,n.Fj,n.EJ,n.JJ,n.On,r._],encapsulation:2}),SystemInputCountry})()},6822:(e,t,s)=>{"use strict";s.d(t,{z:()=>y});var i=s(1571),n=s(433),l=s(5698),o=s(2422),a=s(4044),d=s(5681),r=s(9573),c=s(6895),u=s(2656),m=s(4114),h=s(3463);function g(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"button",15),i.NdJ("click",(function(){i.CHM(e);const t=i.oxw(2);return i.KtG(t.clear())})),i._UZ(1,"system-button-icon",16),i.qZA()}}function p(e,t){if(1&e&&(i.TgZ(0,"div",11),i.YNc(1,g,2,0,"button",12),i.TgZ(2,"button",13),i._UZ(3,"system-button-icon",14),i.qZA()()),2&e){const e=i.oxw();i.xp6(1),i.Q6J("ngIf",e.canclear)}}function f(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"div",17)(1,"button",18),i.NdJ("click",(function(){i.CHM(e);const t=i.oxw();return i.KtG(t.openCalendar())})),i._UZ(2,"system-label",19),i.qZA()()}}function b(e,t){1&e&&(i.TgZ(0,"div",20),i._UZ(1,"system-label",21),i.qZA())}const _=function(e){return{"slds-has-error":e}};let y=(()=>{class SystemInputDate{constructor(e,t,s,n,l){this.elementref=e,this.renderer=t,this.userpreferences=s,this.modal=n,this.cdref=l,this.showCalendarButton=!0,this._date={display:"",moment:null,valid:!0},this.isDisabled=!1,this.valid=new i.vpe,this.hideErrorMessage=!1}set disabled(e){this.isDisabled=!1!==e}set hideError(e){this.hideErrorMessage=!1!==e}get isValid(){return this._date.valid}get display(){return this._date.display?this._date.display:""}set display(e){if(e){let t=moment(e,this.userpreferences.getDateFormat(),!0);t.isValid()?(this._date.moment||(this._date.moment=new moment),this._date.moment.year(t.year()).month(t.month()).date(t.date()),this._date.valid=!0,"function"==typeof this.onChange&&this.onChange(this._date.moment)):(this._date.display=e,this._date.valid=!1)}else this.clear();this.valid.emit(this._date.valid)}get canclear(){return!!this._date.display}get dropdownside(){let e=this.elementref.nativeElement.getBoundingClientRect();return window.innerWidth-e.left<280?"slds-dropdown_right":"slds-dropdown_left"}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}writeValue(e){e&&e.isValid&&e.isValid()?(this._date.moment=new moment(e),this._date.display=this._date.moment.format(this.userpreferences.getDateFormat())):this.clear(!1),this.cdref.detectChanges()}clear(e=!0){this._date.moment=null,this._date.display="",this._date.valid=!0,"function"==typeof this.onChange&&e&&this.onChange(this._date.moment)}datePicked(e,t){e&&(this._date.moment||(this._date.moment=new moment),moment.isMoment(e)||(e=moment(e)),this._date.moment.set("year",e.year()),this._date.moment.set("month",e.month()),this._date.moment.set("date",e.date()),t&&(this._date.moment.set("hour",e.hour()),this._date.moment.set("minute",e.minute())),this._date.display=this._date.moment.format(this.userpreferences.getDateFormat()),this._date.valid=!0,"function"==typeof this.onChange&&this.onChange(this._date.moment))}openCalendar(){this.modal.openModal("Calendar").subscribe((e=>{e.instance.calendar.asPicker=!0,e.instance.calendar.pickerDate$.pipe((0,l.q)(1)).subscribe((t=>{e.instance.self.destroy(),this.datePicked(t,!0)}))}))}}return SystemInputDate.ɵfac=function(e){return new(e||SystemInputDate)(i.Y36(i.SBq),i.Y36(i.Qsj),i.Y36(o.z),i.Y36(a.o),i.Y36(i.sBO))},SystemInputDate.ɵcmp=i.Xpm({type:SystemInputDate,selectors:[["system-input-date"]],inputs:{disabled:"disabled",hideError:["system-input-date-hide-error","hideError"]},outputs:{valid:"valid"},features:[i._Bn([{provide:n.JU,useExisting:(0,i.Gpc)((()=>SystemInputDate)),multi:!0}])],decls:11,vars:10,consts:[[1,"slds-form-element",3,"ngClass"],[1,"slds-form-element__control"],[1,"slds-combobox_container"],["system-dropdown-trigger","","role","combobox",1,"slds-combobox","slds-dropdown-trigger","slds-dropdown-trigger_click","slds-combobox-picklist","slds-timepicker"],["role","none",1,"slds-combobox__form-element","slds-input-has-icon","slds-input-has-icon_right"],["aria-controls","listbox-unique-id","autocomplete","off","role","textbox","type","text","placeholder"," ",1,"slds-input","slds-combobox__input",3,"disabled","ngModel","ngModelChange"],["class","slds-input__icon-group slds-input__icon-group_right slds-height_full slds-grid","style","top: 0; margin: 0; height: 100%",4,"ngIf"],["aria-hidden","false","role","dialog",1,"slds-datepicker","slds-dropdown","slds-dropdown--large",3,"ngClass"],[3,"setDate","datePicked"],["class","slds-grid slds-grid--align-center",4,"ngIf"],["class","slds-form-element__help",4,"ngIf"],[1,"slds-input__icon-group","slds-input__icon-group_right","slds-height_full","slds-grid",2,"top","0","margin","0","height","100%"],["class","slds-input__icon slds-input__icon_right slds-button slds-button_icon","style","position: relative;",3,"click",4,"ngIf"],["system-dropdown-trigger-button","",1,"slds-input__icon","slds-input__icon_right","slds-button","slds-button_icon",2,"position","relative"],["icon","event"],[1,"slds-input__icon","slds-input__icon_right","slds-button","slds-button_icon",2,"position","relative",3,"click"],["icon","clear"],[1,"slds-grid","slds-grid--align-center"],[1,"slds-button","slds-text-link","slds-p-around--xx-small",3,"click"],["label","LBL_CALENDAR"],[1,"slds-form-element__help"],["label","LBL_INPUT_INVALID"]],template:function(e,t){1&e&&(i.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"input",5),i.NdJ("ngModelChange",(function(e){return t.display=e})),i.qZA(),i.YNc(6,p,4,1,"div",6),i.qZA(),i.TgZ(7,"div",7)(8,"system-input-date-picker",8),i.NdJ("datePicked",(function(e){return t.datePicked(e)})),i.qZA(),i.YNc(9,f,3,0,"div",9),i.qZA()()()(),i.YNc(10,b,2,0,"div",10),i.qZA()),2&e&&(i.Q6J("ngClass",i.VKq(8,_,!t.isValid)),i.xp6(5),i.Q6J("disabled",t.isDisabled)("ngModel",t.display),i.xp6(1),i.Q6J("ngIf",!t.isDisabled),i.xp6(1),i.Q6J("ngClass",t.dropdownside),i.xp6(1),i.Q6J("setDate",t._date.moment),i.xp6(1),i.Q6J("ngIf",t.showCalendarButton),i.xp6(1),i.Q6J("ngIf",!t.isValid&&!t.hideErrorMessage))},dependencies:[d.l,r.$,c.mk,c.O5,n.Fj,n.JJ,n.On,u.J,m.e,h._],encapsulation:2,changeDetection:0}),SystemInputDate})()},4114:(e,t,s)=>{"use strict";s.d(t,{e:()=>y});var i=s(1571),n=s(5329),l=s(2422),o=s(6895),a=s(433),d=s(2656),r=s(3463),c=s(3543);function u(e,t){if(1&e&&(i.TgZ(0,"th",11)(1,"abbr",16),i._uU(2),i.qZA()()),2&e){const e=t.$implicit,s=t.index,n=i.oxw();i.xp6(1),i.Q6J("title",n.weekdayLong(s)),i.xp6(1),i.Oqu(e)}}const m=function(e,t,s){return{"slds-disabled-text":e,"slds-is-today":t,"slds-is-selected":s}};function h(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"td",20),i.NdJ("click",(function(){const t=i.CHM(e).$implicit,s=i.oxw(2);return i.KtG(s.pickDate(t))})),i.TgZ(1,"span",21),i._uU(2),i.qZA()()}if(2&e){const e=t.$implicit,s=i.oxw(2);i.Q6J("ngClass",i.kEZ(2,m,s.disabled(e),s.isToday(e),s.isCurrent(e))),i.xp6(2),i.Oqu(e.date())}}function g(e,t){if(1&e&&(i.TgZ(0,"tr")(1,"td",17)(2,"abbr",18),i._uU(3),i.qZA()(),i.YNc(4,h,3,6,"td",19),i.qZA()),2&e){const e=t.$implicit,s=i.oxw();i.xp6(2),i.Q6J("title",s.language.getLabel("LBL_WEEK")+" "+(null==e?null:e.number)),i.xp6(1),i.hij(" ",null==e?null:e.number," "),i.xp6(1),i.Q6J("ngForOf",null==e?null:e.days)}}function p(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"td",20),i.NdJ("click",(function(){const t=i.CHM(e).$implicit,s=i.oxw(3);return i.KtG(s.pickDate(t))})),i.TgZ(1,"span",21),i._uU(2),i.qZA()()}if(2&e){const e=t.$implicit,s=i.oxw(3);i.Q6J("ngClass",i.kEZ(2,m,s.disabled(e),s.isToday(e),s.isCurrent(e))),i.xp6(2),i.Oqu(null==e?null:e.date())}}function f(e,t){if(1&e&&(i.TgZ(0,"tr")(1,"td",17)(2,"abbr",18),i._uU(3),i.qZA()(),i.YNc(4,p,3,6,"td",19),i.qZA()),2&e){const e=t.$implicit,s=i.oxw(2);i.xp6(2),i.Q6J("title",s.language.getLabel("LBL_WEEK")+" "+(null==e?null:e.number)),i.xp6(1),i.hij(" ",null==e?null:e.number," "),i.xp6(1),i.Q6J("ngForOf",null==e?null:e.days)}}function b(e,t){if(1&e&&(i.TgZ(0,"tbody")(1,"tr")(2,"td",22)(3,"div",23)(4,"h2",24),i._uU(5),i.qZA(),i.TgZ(6,"div"),i._uU(7),i.qZA()()()(),i.YNc(8,f,5,3,"tr",13),i.qZA()),2&e){const e=i.oxw();i.xp6(2),i.uIk("colspan",e.weekdays.length+1),i.xp6(3),i.hij(" ",e.secondMonth," "),i.xp6(2),i.hij(" ",e.secondYearDisplay," "),i.xp6(1),i.Q6J("ngForOf",e.secondGrid)}}function _(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"button",25),i.NdJ("click",(function(t){i.CHM(e);const s=i.oxw();return i.KtG(s.goToday(t))})),i._UZ(1,"system-label",26),i.qZA()}}let y=(()=>{class SystemInputDatePicker{constructor(e,t){this.language=e,this.userPreferences=t,this.currentGrid=[],this.secondGrid=[],this.yearsList=[],this.dual=!1,this.weekStartDay=0,this.showTodayButton=!0,this.datePicked=new i.vpe,this.curDate=new moment,this.secondDate=new moment;let s=this.userPreferences.unchangedPreferences.global;this.weekStartDay="Monday"==s.week_day_start?1:this.weekStartDay}get currentYear(){return this._currentYear}set currentYear(e){this._currentYear=e,this.curDate.year(e.name),this.buildGrids()}set secondYear(e){this.curDate.year(e.length?e:e.name),this.buildGrids()}get secondYearDisplay(){return this.secondDate.year()}get currentMonth(){return moment.localeData().months()[this.curDate.month()]}get secondMonth(){return moment.localeData().months()[this.secondDate.month()]}get weekdays(){let e=this.language.currentlanguage.substring(0,2);moment.locale(e);let t=moment.weekdaysMin();if(1===this.weekStartDay){let e=t.shift();return t.push(e),t}return t}ngOnInit(){this.initializeGrid()}ngOnChanges(){this.initializeGrid()}initializeGrid(){this.setDate?(this.curDate=new moment(this.setDate),this.secondDate=new moment(this.setDate)):(this.curDate=new moment,this.secondDate=new moment),this.secondDate.add(1,"month"),this.buildYearsList(),this.buildGrids()}buildYearsList(){this.yearsList=new Array(11).fill("").map(((e,t)=>{let s=t-5+ +this.curDate.year();return{id:s.toString(),name:s.toString()}}))}weekdayLong(e){let t=this.language.currentlanguage.substring(0,2);return moment.locale(t),moment.weekdays(e+this.weekStartDay)}disabled(e){if(!e)return!1;if(e.isBefore(this.curDate,"month")||!this.dual&&e.isAfter(this.curDate,"month")||this.dual&&e.isAfter(this.secondDate,"month"))return!0;let t=new moment(e.format());return!(!this.minDate||!t.isBefore(this.minDate,"day"))||!(!this.maxDate||!t.isAfter(this.maxDate,"day"))}isToday(e){if(!e)return!1;let t=new moment;return t.isSame(e,"year")&&t.isSame(e,"month")&&t.isSame(e,"day")}isCurrent(e){return!!e&&(this.setDate&&this.setDate.isSame(e,"year")&&this.setDate.isSame(e,"month")&&this.setDate.isSame(e,"day"))}prevMonth(e){e.stopPropagation(),this.curDate.subtract(1,"months"),this.dual&&this.secondDate.subtract(1,"months"),this.buildGrids()}nextMonth(e){e.stopPropagation(),this.curDate.add(1,"months"),this.dual&&this.secondDate.add(1,"months"),this.buildGrids()}goToday(e){e.stopPropagation(),this.curDate=new moment,this.buildGrids()}pickDate(e){if(!e)return;let t=new moment(e.format());return(!this.minDate||!t.isBefore(this.minDate))&&((!this.maxDate||!t.isAfter(this.maxDate))&&void this.datePicked.emit(t))}buildGrids(){this.currentGrid=[],this.secondGrid=[],this.buildGridWeeks(this.currentGrid,this.curDate),this.dual&&this.buildGridWeeks(this.secondGrid,this.secondDate)}buildGridWeeks(e,t){let s=new moment(t);s.date(1),0==s.day()&&1==this.weekStartDay&&s.subtract(7,"d"),s.day(this.weekStartDay);let i=0;for(;i<6;){let n=0,l={days:[],number:s.format("W")};for(;n<7;)(t.isSame(this.curDate,"month")&&s.isSameOrBefore(this.curDate,"month")||!this.dual&&s.isAfter(this.curDate,"month")||this.dual&&t.isSame(this.secondDate,"month")&&s.isSameOrAfter(this.secondDate,"month"))&&(l.days[n]=moment(s.format())),s.add(1,"d"),n++;if(e.push(l),s.isAfter(t,"month")||s.isAfter(t,"year"))break;i++}}}return SystemInputDatePicker.ɵfac=function(e){return new(e||SystemInputDatePicker)(i.Y36(n.d),i.Y36(l.z))},SystemInputDatePicker.ɵcmp=i.Xpm({type:SystemInputDatePicker,selectors:[["system-input-date-picker"]],hostAttrs:[1,"slds-datepicker"],inputs:{setDate:"setDate",dual:"dual",minDate:"minDate",maxDate:"maxDate",weekStartDay:"weekStartDay",showTodayButton:"showTodayButton"},outputs:{datePicked:"datePicked"},features:[i.TTD],decls:22,vars:11,consts:[[1,"slds-datepicker__filter","slds-grid"],[1,"slds-datepicker__filter_month","slds-grid","slds-grid_align-spread","slds-grow"],[1,"slds-align-middle"],["title","Previous Month",1,"slds-button","slds-button_icon","slds-button_icon-container",3,"click"],[3,"icon"],["aria-atomic","true","aria-live","assertive",1,"slds-align-middle"],["title","Next Month",1,"slds-button","slds-button_icon","slds-button_icon-container",3,"click"],[1,"slds-shrink-none"],[3,"selectList","ngModel","emitInputValueOnEnterPress","ngModelChange"],[1,"slds-p-left--x-small"],["aria-labelledby","month","aria-multiselectable","true","role","grid",1,"slds-datepicker__month"],["scope","col"],["scope","col",4,"ngFor","ngForOf"],[4,"ngFor","ngForOf"],[4,"ngIf"],["class","slds-button slds-align_absolute-center slds-text-link",3,"click",4,"ngIf"],[3,"title"],["role","gridcell",1,"slds-theme--shade"],[1,"slds-p-horizontal--xx-small",3,"title"],["role","gridcell",3,"ngClass","click",4,"ngFor","ngForOf"],["role","gridcell",3,"ngClass","click"],[1,"slds-day"],[1,"slds-theme--shade"],[1,"slds-grid","slds-m-vertical--xx-small"],[1,"slds-size--1-of-2"],[1,"slds-button","slds-align_absolute-center","slds-text-link",3,"click"],["label","LBL_TODAY"]],template:function(e,t){1&e&&(i.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"button",3),i.NdJ("click",(function(e){return t.prevMonth(e)})),i._UZ(4,"system-button-icon",4),i.qZA()(),i.TgZ(5,"h2",5),i._uU(6),i.qZA(),i.TgZ(7,"div",2)(8,"button",6),i.NdJ("click",(function(e){return t.nextMonth(e)})),i._UZ(9,"system-button-icon",4),i.qZA()()(),i.TgZ(10,"div",7)(11,"system-select",8),i.NdJ("ngModelChange",(function(e){return t.currentYear=e})),i.qZA()()(),i.TgZ(12,"div",9)(13,"table",10)(14,"thead")(15,"tr"),i._UZ(16,"th",11),i.YNc(17,u,3,2,"th",12),i.qZA()(),i.TgZ(18,"tbody"),i.YNc(19,g,5,3,"tr",13),i.qZA(),i.YNc(20,b,9,4,"tbody",14),i.qZA()(),i.YNc(21,_,2,0,"button",15)),2&e&&(i.xp6(4),i.Q6J("icon","left"),i.xp6(2),i.AsE("",t.currentMonth," (",t.currentYear,")"),i.xp6(3),i.Q6J("icon","right"),i.xp6(2),i.Q6J("selectList",t.yearsList)("ngModel",t.currentYear)("emitInputValueOnEnterPress",!0),i.xp6(6),i.Q6J("ngForOf",t.weekdays),i.xp6(2),i.Q6J("ngForOf",t.currentGrid),i.xp6(1),i.Q6J("ngIf",t.dual),i.xp6(1),i.Q6J("ngIf",t.showTodayButton))},dependencies:[o.mk,o.sg,o.O5,a.JJ,a.On,d.J,r._,c.R],encapsulation:2,changeDetection:0}),SystemInputDatePicker})()},7758:(e,t,s)=>{"use strict";s.d(t,{y:()=>l});var i=s(1571),n=s(433);let l=(()=>{class SystemInputDelayed{constructor(){this.delay=500,this.placeholder=""}get value(){return this._value}set value(e){this._value=e,this._modeltimeout&&window.clearTimeout(this._modeltimeout),this._modeltimeout=window.setTimeout((()=>this.onChange(this._value)),this.delay)}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}writeValue(e){this._value=e}}return SystemInputDelayed.ɵfac=function(e){return new(e||SystemInputDelayed)},SystemInputDelayed.ɵcmp=i.Xpm({type:SystemInputDelayed,selectors:[["system-input-delayed"]],inputs:{delay:"delay",placeholder:"placeholder"},features:[i._Bn([{provide:n.JU,useExisting:(0,i.Gpc)((()=>SystemInputDelayed)),multi:!0}])],decls:3,vars:2,consts:[[1,"slds-form-element"],[1,"slds-form-element__control"],["type","text",1,"slds-input",3,"placeholder","ngModel","ngModelChange"]],template:function(e,t){1&e&&(i.TgZ(0,"div",0)(1,"div",1)(2,"input",2),i.NdJ("ngModelChange",(function(e){return t.value=e})),i.qZA()()()),2&e&&(i.xp6(2),i.Q6J("placeholder",t.placeholder)("ngModel",t.value))},dependencies:[n.Fj,n.JJ,n.On],encapsulation:2}),SystemInputDelayed})()},5147:(e,t,s)=>{"use strict";s.d(t,{r:()=>r});var i=s(1571),n=s(433),l=s(4154),o=s(5329),a=s(6895);function d(e,t){if(1&e&&(i.TgZ(0,"option",5),i._uU(1),i.qZA()),2&e){const e=t.$implicit;i.Q6J("value",e.value),i.xp6(1),i.Oqu(e.display)}}let r=(()=>{class SystemInputEnum{constructor(e,t){this.metadata=e,this.language=t,this.options=[]}get value(){return this._value}set value(e){e!=this._value&&(this._value=e,this.onChange(e))}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}writeValue(e){this._value=e}ngOnInit(){this.getOptions()}getOptions(){let e=[],t=this.language.getFieldDisplayOptions(this.module,this.field);for(let s in t)e.push({value:s,display:t[s]});if(this.options=e,this.sortdirection)switch(this.sortdirection.toLowerCase()){case"desc":this.options.sort(((e,t)=>e.display.toLowerCase()<t.display.toLowerCase()?1:-1));break;case"asc":this.options.sort(((e,t)=>e.display.toLowerCase()>t.display.toLowerCase()?1:-1))}}}return SystemInputEnum.ɵfac=function(e){return new(e||SystemInputEnum)(i.Y36(l.Pu),i.Y36(o.d))},SystemInputEnum.ɵcmp=i.Xpm({type:SystemInputEnum,selectors:[["system-input-enum"]],inputs:{module:"module",field:"field",sortdirection:"sortdirection"},features:[i._Bn([{provide:n.JU,useExisting:(0,i.Gpc)((()=>SystemInputEnum)),multi:!0}])],decls:5,vars:2,consts:[[1,"slds-form-element"],[1,"slds-select_container"],[1,"slds-select",3,"ngModel","ngModelChange"],["focus",""],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(e,t){1&e&&(i.TgZ(0,"div",0)(1,"div",1)(2,"select",2,3),i.NdJ("ngModelChange",(function(e){return t.value=e})),i.YNc(4,d,2,2,"option",4),i.qZA()()()),2&e&&(i.xp6(2),i.Q6J("ngModel",t.value),i.xp6(2),i.Q6J("ngForOf",t.options))},dependencies:[a.sg,n.YN,n.Kr,n.EJ,n.JJ,n.On],encapsulation:2}),SystemInputEnum})()},6659:(e,t,s)=>{"use strict";s.d(t,{a:()=>p});var i=s(1571),n=s(433),l=s(5329),o=s(4154),a=s(6895),d=s(6898),r=s(4036),c=s(7302);function u(e,t){if(1&e&&(i.TgZ(0,"option",8),i._uU(1),i.qZA()),2&e){const e=t.$implicit;i.Q6J("value",e.id),i.xp6(1),i.Oqu(e.name)}}function m(e,t){if(1&e&&(i.TgZ(0,"optgroup",6),i.YNc(1,u,2,2,"option",7),i.ALo(2,"systemmodulecustompipe"),i.qZA()),2&e){const e=i.oxw();i.Q6J("label","custom "+e.language.getLabel("LBL_FIELDSET")),i.xp6(1),i.Q6J("ngForOf",i.xi3(2,2,e._fieldsets,e._module))}}function h(e,t){if(1&e&&(i.TgZ(0,"option",8),i._uU(1),i.qZA()),2&e){const e=t.$implicit;i.Q6J("value",e.id),i.xp6(1),i.Oqu(e.name)}}function g(e,t){if(1&e&&(i.TgZ(0,"optgroup",6),i.YNc(1,h,2,2,"option",7),i.ALo(2,"systemmoduleglobalpipe"),i.qZA()),2&e){const e=i.oxw();i.Q6J("label","global "+e.language.getLabel("LBL_FIELDSET")),i.xp6(1),i.Q6J("ngForOf",i.xi3(2,2,e._fieldsets,e._module))}}let p=(()=>{class SystemInputFieldset{constructor(e,t){this.language=e,this.metadata=t,this.disabled=!1,this._fieldsets=[],this._module="",this._fieldsets=this.metadata.getFieldSets()}get fieldset(){return this._fieldset}set fieldset(e){this._fieldset=e,this.onChange(e)}detectModule(){this._fieldset&&(this._module=this.metadata.getFieldset(this._fieldset).module)}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}writeValue(e){this._fieldset=e,this.detectModule()}}return SystemInputFieldset.ɵfac=function(e){return new(e||SystemInputFieldset)(i.Y36(l.d),i.Y36(o.Pu))},SystemInputFieldset.ɵcmp=i.Xpm({type:SystemInputFieldset,selectors:[["system-input-fieldset"]],inputs:{disabled:"disabled"},features:[i._Bn([{provide:n.JU,useExisting:(0,i.Gpc)((()=>SystemInputFieldset)),multi:!0}])],decls:10,vars:12,consts:[[1,"slds-grid"],[1,"slds-p-right--xxx-small","slds-size--1-of-3",3,"ngModel","displayAsterisk","ngModelChange"],[1,"slds-form-element__control","slds-p-left--xxx-small","slds-size--2-of-3"],[1,"slds-select_container"],[1,"slds-select",3,"disabled","ngModel","ngModelChange"],[3,"label",4,"ngIf"],[3,"label"],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(e,t){1&e&&(i.TgZ(0,"div",0)(1,"system-input-module",1),i.NdJ("ngModelChange",(function(e){return t._module=e})),i.qZA(),i.TgZ(2,"div",2)(3,"div",3)(4,"select",4),i.NdJ("ngModelChange",(function(e){return t.fieldset=e})),i._UZ(5,"option"),i.YNc(6,m,3,5,"optgroup",5),i.ALo(7,"systemmodulecustompipe"),i.YNc(8,g,3,5,"optgroup",5),i.ALo(9,"systemmoduleglobalpipe"),i.qZA()()()()),2&e&&(i.xp6(1),i.Q6J("ngModel",t._module)("displayAsterisk",!0),i.xp6(3),i.Q6J("disabled",!t._module||t.disabled)("ngModel",t.fieldset),i.xp6(2),i.Q6J("ngIf",i.xi3(7,6,t._fieldsets,t._module.length>0)),i.xp6(2),i.Q6J("ngIf",i.xi3(9,9,t._fieldsets,t._module.length>0)))},dependencies:[a.sg,a.O5,n.YN,n.Kr,n.EJ,n.JJ,n.On,d.a,r.N,c.m],encapsulation:2}),SystemInputFieldset})()},6041:(e,t,s)=>{"use strict";s.d(t,{K:()=>L});var i=s(5861),n=s(1571),l=s(433),o=s(1135),a=s(6625),d=s(5920),r=s(3278),c=s(3441),u=s(5710),m=s(4505),h=s(4044),g=s(5329),p=s(9774),f=s(151),b=s(6895),y=s(2656),v=s(7693),x=s(3463);const Z=["inputFile"],w=function(e){return{"slds-has-error":e}};function T(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"div",3)(1,"div",4),n.NdJ("system-drop-file",(function(t){n.CHM(e);const s=n.oxw();return n.KtG(s.uploadFile(t))})),n.TgZ(2,"input",5,6),n.NdJ("change",(function(){n.CHM(e);const t=n.MAs(3),s=n.oxw();return n.KtG(s.uploadFile(t.files))}))("click",(function(){n.CHM(e);const t=n.MAs(3);return n.KtG(t.value=null)})),n.qZA(),n.TgZ(4,"label",7)(5,"span",8),n._UZ(6,"system-button-icon",9)(7,"system-label",10),n.qZA(),n.TgZ(8,"span",11),n._UZ(9,"system-label",12)(10,"system-label",13),n.qZA()()()()}if(2&e){const e=n.oxw();n.xp6(1),n.Q6J("ngClass",n.VKq(5,w,e.hasError)),n.xp6(1),n.Q6J("accept",e.accept)("disabled",e.disabled)("id",e.elementID),n.xp6(2),n.Q6J("for",e.elementID)}}function C(e,t){if(1&e){const e=n.EpF();n.ynx(0),n.TgZ(1,"span",17),n._UZ(2,"system-file-icon",18),n.qZA(),n.TgZ(3,"a",19)(4,"div",20),n._uU(5),n.qZA()(),n.TgZ(6,"button",21),n.NdJ("click",(function(){n.CHM(e);const t=n.oxw(2);return n.KtG(t.removeFile())})),n._UZ(7,"system-button-icon",22),n.qZA(),n.BQk()}if(2&e){const e=n.oxw(2);n.xp6(2),n.Q6J("filename",e.file.file_name)("filemimetype",e.file.file_mime_type),n.xp6(2),n.Q6J("system-title",e.file.file_name),n.xp6(1),n.hij(" ",e.file.file_name," ")}}function A(e,t){if(1&e&&(n.TgZ(0,"a",19)(1,"div",20),n._uU(2),n.qZA(),n.TgZ(3,"div",23)(4,"div",24),n._UZ(5,"span",25),n.qZA(),n.TgZ(6,"div",26),n._uU(7),n.qZA()()()),2&e){const e=n.oxw(2);n.xp6(1),n.Q6J("system-title",e.file.file_name),n.xp6(1),n.hij(" ",e.file.file_name," "),n.xp6(3),n.Udp("width",e.fileProgress,"%"),n.xp6(2),n.hij(" ",e.fileProgress," % ")}}function k(e,t){if(1&e&&(n.TgZ(0,"div",14),n.YNc(1,C,8,4,"ng-container",15),n.YNc(2,A,8,5,"ng-template",null,16,n.W1O),n.qZA()),2&e){const e=n.MAs(3),t=n.oxw();n.Q6J("ngClass",n.VKq(3,w,t.hasError)),n.xp6(1),n.Q6J("ngIf",!t.isUploading)("ngIfElse",e)}}let L=(()=>{class SystemInputFile{constructor(e,t,s,i,l,o,a,d,r){this.configurationService=e,this.session=t,this.toast=s,this.helper=i,this.model=l,this.backend=o,this.modal=a,this.cdRef=d,this.language=r,this.accept="*",this.disabled=!1,this.hasError=!1,this.onRemove=new n.vpe,this.isUploading=!1,this.elementID=_.uniqueId("input-file"),this.fileProgress=0}registerOnChange(e){this.onChange=t=>{e(t)}}registerOnTouched(e){this.onTouched=e}writeValue(e){this.file=e}uploadFile(e){var t=this;return(0,i.Z)((function*(){if(0==e.length)return;t.isUploading=!0,t.cdRef.detectChanges(),t.file={file_name:e[0].name,file_mime_type:e[0].type,file_size:t.helper.humanFileSize(e[0].size)};let s=t.configurationService.getSystemParamater("upload_maxsize");if(s&&e[0].size>s)return void t.toast.sendToast(t.language.getLabelFormatted("LBL_EXCEEDS_MAX_UPLOADFILESIZE",[t.file.file_name,t.helper.humanFileSize(s)]),"error");let i=new o.X(0);i.subscribe((e=>{t.fileProgress=Math.floor(e),t.cdRef.detectChanges()}));const n=yield t.readFileAsync(e[0]),l={file:n.substring(n.indexOf("base64,")+7),filename:t.file.file_name,filemimetype:t.file.file_mime_type};t.backend.postRequestWithProgress("common/spiceattachments",null,l,i).subscribe((e=>{t.file.file_md5=e[0].filemd5,t.onChange({...t.file,remove:()=>t.removeFile(!0)}),t.isUploading=!1,t.cdRef.detectChanges()}))}))()}readFileAsync(e){return(0,i.Z)((function*(){return new Promise(((t,s)=>{const i=new FileReader;i.onload=()=>t(i.result.toString()),i.onerror=s,i.readAsDataURL(e)}))}))()}removeFile(e){this.file=void 0,this.cdRef.detectChanges(),e||this.onRemove.emit()}}return SystemInputFile.ɵfac=function(e){return new(e||SystemInputFile)(n.Y36(a.C),n.Y36(d.n),n.Y36(r.A),n.Y36(c._),n.Y36(u.o),n.Y36(m.y),n.Y36(h.o),n.Y36(n.sBO),n.Y36(g.d))},SystemInputFile.ɵcmp=n.Xpm({type:SystemInputFile,selectors:[["system-input-file"]],viewQuery:function(e,t){if(1&e&&n.Gf(Z,5,n.s_b),2&e){let e;n.iGM(e=n.CRH())&&(t.inputFile=e.first)}},inputs:{fieldName:"fieldName",accept:"accept",disabled:"disabled",hasError:"hasError"},outputs:{onRemove:"onRemove"},features:[n._Bn([{provide:l.JU,useExisting:(0,n.Gpc)((()=>SystemInputFile)),multi:!0}])],decls:4,vars:2,consts:[[1,"slds-form-element__control","slds-grid","slds-grid--align-spread","slds-p-vertical--xx-small","slds-is-relative","slds-size--1-of-1"],["class","slds-file-selector slds-file-selector_files slds-is-relative slds-size--1-of-1",4,"ngIf","ngIfElse"],["fileContainer",""],[1,"slds-file-selector","slds-file-selector_files","slds-is-relative","slds-size--1-of-1"],[1,"slds-file-selector__dropzone","slds-p-around--small","slds-is-relative","slds-size--1-of-1",3,"ngClass","system-drop-file"],["type","file",1,"slds-file-selector__input","slds-assistive-text","slds-has-error",3,"accept","disabled","id","change","click"],["inputFile",""],[1,"slds-file-selector__body",2,"cursor","pointer",3,"for"],[1,"slds-file-selector__button","slds-button","slds-button_neutral"],["icon","upload",1,"slds-m-right--xx-small","slds-align--absolute-center"],["label","LBL_UPLOAD_FILE"],[1,"slds-file-selector__text","slds-medium-show"],["label","LBL_OR"],["label","LBL_DROP_FILE"],[1,"slds-pill","slds-pill_link","slds-size--1-of-1",3,"ngClass"],[4,"ngIf","ngIfElse"],["uploadingContainer",""],[1,"slds-pill__icon_container","slds-m-left--xxx-small"],["divClass","","size","small",3,"filename","filemimetype"],["href","javascript:void(0);",1,"slds-pill__action","slds-p-around--xx-small"],[1,"slds-pill__label","slds-truncate",2,"width","calc(100% - 20px)",3,"system-title"],["system-title","LBL_REMOVE",1,"slds-button","slds-button_icon","slds-button_icon","slds-pill__remove","slds-m-right--xx-small",3,"click"],["icon","close"],[1,"slds-grid","slds-grid_vertical-align-center","slds-grid--align-spread","slds-has-flexi-truncate","slds-size--1-of-1"],[1,"slds-progress-bar"],[1,"slds-progress-bar__value"],[1,"slds-p-left--xx-small",2,"width","50px"]],template:function(e,t){if(1&e&&(n.TgZ(0,"div",0),n.YNc(1,T,11,7,"div",1),n.YNc(2,k,4,5,"ng-template",null,2,n.W1O),n.qZA()),2&e){const e=n.MAs(3);n.xp6(1),n.Q6J("ngIf",!t.file)("ngIfElse",e)}},dependencies:[p.M,f.S,b.mk,b.O5,y.J,v.T,x._],encapsulation:2,changeDetection:0}),SystemInputFile})()},638:(e,t,s)=>{"use strict";s.d(t,{n:()=>l});var i=s(1571),n=s(433);let l=(()=>{class SystemInputInteger{constructor(){}get value(){return this._value}set value(e){e!=this._value&&(this._value=e,this.onChange(e))}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}writeValue(e){this._value=e}}return SystemInputInteger.ɵfac=function(e){return new(e||SystemInputInteger)},SystemInputInteger.ɵcmp=i.Xpm({type:SystemInputInteger,selectors:[["system-input-integer"]],features:[i._Bn([{provide:n.JU,useExisting:(0,i.Gpc)((()=>SystemInputInteger)),multi:!0}])],decls:3,vars:1,consts:[[1,"slds-form-element"],[1,"slds-form-element__control"],["type","number",1,"slds-input","slds-text-align--right",3,"ngModel","ngModelChange"]],template:function(e,t){1&e&&(i.TgZ(0,"div",0)(1,"div",1)(2,"input",2),i.NdJ("ngModelChange",(function(e){return t.value=e})),i.qZA()()()),2&e&&(i.xp6(2),i.Q6J("ngModel",t.value))},dependencies:[n.Fj,n.wV,n.JJ,n.On],encapsulation:2}),SystemInputInteger})()},3497:(e,t,s)=>{"use strict";s.d(t,{$:()=>f});var i=s(1571),n=s(433),l=s(5329),o=s(4044),a=s(6163),d=s(6895),r=s(2656),c=s(3463),u=s(8859);function m(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"div",10)(1,"div",11)(2,"span",12)(3,"span",13),i._UZ(4,"system-label",14),i._uU(5),i.qZA(),i.TgZ(6,"button",15),i.NdJ("click",(function(){i.CHM(e);const t=i.oxw();return i.KtG(t.clearField())})),i._UZ(7,"system-button-icon",16),i.qZA()()()()}if(2&e){const e=i.oxw();i.xp6(4),i.Q6J("label",e.label),i.xp6(1),i.hij(" (",e.label,")"),i.xp6(2),i.Q6J("icon","close")}}function h(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"div",17)(1,"input",18),i.NdJ("ngModelChange",(function(t){i.CHM(e);const s=i.oxw();return i.KtG(s.searchterm=t)}))("keyup",(function(t){i.CHM(e);const s=i.oxw();return i.KtG(s.keyup(t))}))("blur",(function(){i.CHM(e);const t=i.oxw();return i.KtG(t.onBlur())})),i.qZA()()}if(2&e){const e=i.oxw();i.xp6(1),i.Q6J("ngModel",e.searchterm)("placeholder",e.language.getLabel("LBL_SEARCH"))}}function g(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"li",19),i.NdJ("mousedown",(function(){const t=i.CHM(e).$implicit,s=i.oxw();return i.KtG(s.selectLabel(t.label))})),i.TgZ(1,"div",20)(2,"span",21),i._uU(3),i.qZA()()()}if(2&e){const e=t.$implicit;i.xp6(3),i.AsE("",e.label," [",e.translation,"]")}}const p=function(e){return{"slds-is-open":e}};let f=(()=>{class SystemInputLabel{constructor(e,t,s){this.language=e,this.modal=t,this.modelutilities=s,this._time={display:"",moment:null,offset:0,valid:!0},this.label="",this._searchterm="",this.foundlabels=[]}get isOpen(){return""!=this._searchterm}get searchterm(){return this._searchterm}set searchterm(e){this._searchterm=e,this.dosearch()}ngOnDestroy(){this.clickListener&&this.clickListener()}onBlur(){this._searchterm=""}dosearch(){this._searchterm?this.foundlabels=this.language.searchLabel(this._searchterm,50):this.foundlabels=[]}selectLabel(e){this.label=e,this._searchterm="",this.onChange(e)}clearField(){this.label="",this.onChange("")}keyup(e){if("Enter"===e.key)this.label=this._searchterm,this.onChange(this.label),this._searchterm=""}addLabel(){let e={id:this.modelutilities.generateGuid(),name:"",scope:"custom",custom_translations:[],global_translations:[]};e.custom_translations.push({id:this.modelutilities.generateGuid(),syslanguagelabel_id:e.id,syslanguage:this.language.languagedata.languages.default}),this.modal.openModal("LanguageLabelModal").subscribe((t=>{t.instance.label=e,t.instance.label$.subscribe((e=>{e&&(this.label=e.name,this.onChange(this.label))}))}))}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}writeValue(e){this.label=e}}return SystemInputLabel.ɵfac=function(e){return new(e||SystemInputLabel)(i.Y36(l.d),i.Y36(o.o),i.Y36(a.A))},SystemInputLabel.ɵcmp=i.Xpm({type:SystemInputLabel,selectors:[["system-input-label"]],features:[i._Bn([{provide:n.JU,useExisting:(0,i.Gpc)((()=>SystemInputLabel)),multi:!0}])],decls:10,vars:8,consts:[[1,"slds-combobox_container"],["role","combobox",1,"slds-combobox","slds-dropdown-trigger","slds-dropdown-trigger_click",3,"ngClass"],["class","slds-form-element__control",4,"ngIf"],["class","slds-combobox__form-element slds-input-has-icon slds-input-has-icon_right",4,"ngIf"],["role","listbox",1,"slds-dropdown","slds-dropdown_fluid","slds-dropdown--length-7"],["role","presentation",1,"slds-listbox","slds-listbox_vertical"],["role","presentation","class","slds-listbox__item",3,"mousedown",4,"ngFor","ngForOf"],["role","presentation",1,"slds-listbox__item","slds-border_top","slds-p-vertical--xx-small",3,"mousedown"],[1,"slds-button","slds-button--icon","slds-align_absolute-center"],[3,"icon","size"],[1,"slds-form-element__control"],[1,"slds-pill_container"],[1,"slds-pill","slds-size--1-of-1","slds-p-horizontal--xx-small"],[1,"slds-pill__label"],[3,"label"],[1,"slds-button","slds-button--icon","slds-pill__remove",3,"click"],[3,"icon"],[1,"slds-combobox__form-element","slds-input-has-icon","slds-input-has-icon_right"],["type","search","role","combobox",1,"slds-input","slds-combobox__input",3,"ngModel","placeholder","ngModelChange","keyup","blur"],["role","presentation",1,"slds-listbox__item",3,"mousedown"],["role","option",1,"slds-media","slds-listbox__option","slds-listbox__option_plain"],[1,"slds-truncate"]],template:function(e,t){1&e&&(i.TgZ(0,"div",0)(1,"div",1),i.YNc(2,m,8,3,"div",2),i.YNc(3,h,2,2,"div",3),i.TgZ(4,"div",4)(5,"ul",5),i.YNc(6,g,4,2,"li",6),i.TgZ(7,"li",7),i.NdJ("mousedown",(function(){return t.addLabel()})),i.TgZ(8,"button",8),i._UZ(9,"system-utility-icon",9),i.qZA()()()()()()),2&e&&(i.xp6(1),i.Q6J("ngClass",i.VKq(6,p,t.isOpen)),i.xp6(1),i.Q6J("ngIf",t.label),i.xp6(1),i.Q6J("ngIf",!t.label),i.xp6(3),i.Q6J("ngForOf",t.foundlabels),i.xp6(3),i.Q6J("icon","add")("size","x-small"))},dependencies:[d.mk,d.sg,d.O5,n.Fj,n.JJ,n.On,r.J,c._,u.r],encapsulation:2}),SystemInputLabel})()},2547:(e,t,s)=>{"use strict";s.d(t,{l:()=>N});var i=s(1571),n=s(433),l=s(5329),o=s(4154),a=s(1481),d=s(3278),r=s(2422),c=s(529),u=s(2067),m=s(9774),h=s(4021),g=s(6895),p=s(4610),f=s(2656),b=s(7514),y=s(5621),v=s(3463);const x=["fileselector"],Z=["imgelement"],w=["bottomtoolbar"],T=["toolbar"];function C(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"li")(1,"button",11),i.NdJ("click",(function(){i.CHM(e);const t=i.oxw();return i.KtG(t.removeModifications())})),i._UZ(2,"system-button-icon",25),i.qZA()()}if(2&e){const e=i.oxw();i.xp6(1),i.s9C("title",e.language.getLabel("LBL_REMOVE_MODIFICATIONS")),i.Q6J("disabled",!e.cropper||!e.isEdited)}}function A(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"div",26)(1,"system-checkbox",27),i.NdJ("ngModelChange",(function(t){i.CHM(e);const s=i.oxw();return i.KtG(s.doResizeByUser=t)})),i._UZ(2,"system-label",28),i.qZA(),i.TgZ(3,"system-input-number",29),i.NdJ("ngModelChange",(function(t){i.CHM(e);const s=i.oxw();return i.KtG(s.maxWidthInput=t)}))("change",(function(){i.CHM(e);const t=i.oxw();return i.KtG(t.maxWidthChanged())})),i.qZA(),i.TgZ(4,"div",30),i._uU(5,"px"),i.qZA(),i.TgZ(6,"div",31),i._uU(7,"x"),i.qZA(),i.TgZ(8,"system-input-number",29),i.NdJ("ngModelChange",(function(t){i.CHM(e);const s=i.oxw();return i.KtG(s.maxHeightInput=t)}))("change",(function(){i.CHM(e);const t=i.oxw();return i.KtG(t.maxHeightChanged())})),i.qZA(),i.TgZ(9,"div",30),i._uU(10,"px"),i.qZA()()}if(2&e){const e=i.oxw();i.xp6(1),i.Q6J("ngModel",e.doResizeByUser)("disabled",!e.canResize),i.xp6(2),i.MGl("placeholder","",e.language.getLabel("LBL_WIDTH")," "),i.Q6J("ngModel",e.maxWidthInput)("disabled",!e.doResizeByUser||!e.canResize),i.xp6(5),i.MGl("placeholder","",e.language.getLabel("LBL_HEIGHT")," "),i.Q6J("ngModel",e.maxHeightInput)("disabled",!e.doResizeByUser||!e.canResize)}}function k(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"img",32,33),i.NdJ("load",(function(t){i.CHM(e);const s=i.oxw();return i.KtG(s.imageLoaded(t))})),i.qZA()}if(2&e){const e=i.oxw();i.Q6J("src",e.mediaBase64,i.LSH)}}function L(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"div",34)(1,"div",35)(2,"button",36),i.NdJ("click",(function(){i.CHM(e);const t=i.oxw();return i.KtG(t.triggerFileSelectionDialog())})),i._UZ(3,"system-label",37),i.qZA(),i.TgZ(4,"input",38,39),i.NdJ("change",(function(){i.CHM(e);const t=i.oxw();return i.KtG(t.fileSelectionChange())})),i.qZA(),i.TgZ(6,"div",31),i._UZ(7,"system-label",40),i.qZA()()()}}function M(e,t){if(1&e&&(i.TgZ(0,"div",41),i._uU(1),i.qZA()),2&e){const e=i.oxw();i.xp6(1),i.hij("Format: ",e.mediaMetaData.fileformat.toUpperCase(),"")}}function S(e,t){if(1&e&&(i.TgZ(0,"span"),i._uU(1),i.qZA()),2&e){const e=i.oxw(2);i.xp6(1),i.AsE("  →  ",e.mediaMetaData.width," × ",e.mediaMetaData.height," px")}}function I(e,t){if(1&e&&(i.TgZ(0,"div"),i._uU(1),i.YNc(2,S,2,2,"span",6),i.qZA()),2&e){const e=i.oxw();i.xp6(1),i.AsE("",e.mediaMetaData.originalWidth," × ",e.mediaMetaData.originalHeight," px"),i.xp6(1),i.Q6J("ngIf",e.isResized)}}function O(e,t){1&e&&(i.TgZ(0,"div"),i._uU(1," "),i.qZA())}const J=function(e){return{height:e}};let N=(()=>{class SystemInputMedia{constructor(e,t,s,n,l,o,a,d,r,c){this.language=e,this.metadata=t,this.sanitizer=s,this.toast=n,this.userprefs=l,this.componentElRef=o,this.renderer=a,this.http=d,this.cd=r,this.libloader=c,this.componentHeight=500,this.allowCropping=!0,this.allowResizing=!0,this.allowRotating=!0,this.allowMirroring=!0,this.mimetype=new i.vpe,this.mediaBase64=null,this.cropper=null,this.fileformatErrorMessageCode=null,this.fileFromBrowser=null,this.maxWidthInput="",this.maxHeightInput="",this._maxWidthByUser=null,this._maxHeightByUser=null,this._maxWidthBySystem=null,this._maxHeightBySystem=null,this.isCropped=!1,this.isImported=!1,this._doResizeByUser=!1,this.isLoading=!1,this.xMirrored=1,this.yMirrored=1,this.currentRotation=0,this.jpegCompressionLevel=.95,this.lastCropBoxData={},this.resetMediaMetaData(),this.unlistenPasteEvent=this.renderer.listen("window","paste",(e=>{this.handlePaste(e)}))}set allowModifications(e){this.allowMirroring=this.allowResizing=this.allowRotating=this.allowCropping=e}set _mimetype(e){this.mediaMetaData.mimetype=e,this.mediaMetaData.fileformat=this.getFileformatFromMimetype(this.mediaMetaData.mimetype)}get maxWidthBySystem(){return this._maxWidthBySystem}set maxWidthBySystem(e){this._maxWidthBySystem=e,this.calcTargetSize()}get maxHeightBySystem(){return this._maxHeightBySystem}set maxHeightBySystem(e){this._maxHeightBySystem=e,this.calcTargetSize()}handlePaste(e){if(e.preventDefault(),e.stopPropagation(),!this.isLoading&&(e.clipboardData.files&&e.clipboardData.files[0]&&(this.fileFromBrowser=e.clipboardData.files[0],this.fileSelectedOrDropped()),e.clipboardData.items&&e.clipboardData.items[0])){const t=e.clipboardData.items[0];if("string"===t.kind)t.getAsString((e=>{this.stringLooksLikeUrl(e)&&(this.resetFileNotAllowedError(),this.isLoading=!0,this.cd.detectChanges(),this.http.get("proxy/?useurl="+btoa(e),{observe:"response",responseType:"blob"}).subscribe((t=>{this.isLoading=!1,this.cd.detectChanges(),this.fileFromBrowser=null,this.checkMimetype(t.body.type)?(this.mediaBase64=this.sanitizer.bypassSecurityTrustResourceUrl(window.URL.createObjectURL(t.body)),this.cd.detectChanges(),this.resetMediaMetaData(),this.resetModificationStati(),this.isImported=!0,this.mediaMetaData.filename=e.substring(e.lastIndexOf("/")+1),this.mediaMetaData.mimetype=t.body.type,this.mediaMetaData.fileformat=this.getFileformatFromMimetype(t.body.type)):this.showFileNotAllowedError(t.body.type)}),(e=>{this.isLoading=!1})))}));else{this.resetFileNotAllowedError();const e=t.getAsFile();if(!this.checkMimetype(e.type))return void this.showFileNotAllowedError(e.type);this.mediaMetaData.fileformat=this.getFileformatFromMimetype(e),this.mediaMetaData.mimetype=e.type,this.resetModificationStati(),this.isImported=!0,this.mediaBase64=this.sanitizer.bypassSecurityTrustResourceUrl(window.URL.createObjectURL(e))}}}resetMediaMetaData(){this.mediaMetaData={mimetype:null,fileformat:null,filename:null,width:0,height:0,originalWidth:0,originalHeight:0}}stringLooksLikeUrl(e){return/^(http|https|ftp|file):\/\//.test(e)}get cropperHeight(){try{return this.componentHeight-this.toolbar.nativeElement.offsetHeight-this.bottomToolbar.nativeElement.offsetHeight-5+"px"}catch(e){return"0px"}}triggerFileSelectionDialog(){this.fileSelector.nativeElement.dispatchEvent(new MouseEvent("click",{bubbles:!0}))}getMediaFromFileSystem(){let e=new FileReader;e.onloadend=t=>{this.resetModificationStati(),this.isImported=!0,this.mediaBase64=e.result},e.readAsDataURL(this.fileFromBrowser)}imageLoaded(e){let t=this.imageElement.nativeElement;this.cropper&&this.cropper.destroy(),this.cropper=new Cropper(t,{autoCrop:!1,viewMode:1,toggleDragModeOnDblclick:this.allowCropping,dragMode:this.allowCropping?"crop":"move"}),this.cropper.crop(),t.addEventListener("ready",(()=>{this.cropper&&(this.mediaMetaData.originalWidth=this.cropper.getImageData().naturalWidth,this.mediaMetaData.originalHeight=this.cropper.getImageData().naturalHeight,this.calcTargetSize(),this.isDirty&&this.emitChange())})),this.allowCropping&&t.addEventListener("cropend",(()=>{let e=this.cropper.getCropBoxData();this.isCropped=!_.isEmpty(this.cropper.getCropBoxData()),_.isEqual(e,this.lastCropBoxData)||(this.lastCropBoxData=_.clone(e),this.emitChange(),this.calcTargetSize())})),t.addEventListener("zoom",(()=>{this.isEdited&&this.emitChange(),this.isCropped&&this.calcTargetSize()}))}onDrop(e){this.fileFromBrowser=e[0],this.fileSelectedOrDropped()}set onDropExtern(e){e&&this.onDrop(e)}getFileformatFromMimetype(e){if(null===e)return"";const t="object"==typeof e?e.type:e;return"string"==typeof t&&/^image\/\w+/.test(t)?t.split("/").pop():""}checkMimetype(e){return"image/jpeg"===e||"image/png"===e||"image/gif"===e}showFileNotAllowedError(e){this.fileformatErrorMessageCode&&this.toast.clearToast(this.fileformatErrorMessageCode),this.fileformatErrorMessageCode=this.toast.sendToast("Not an image file or file type "+(e?'"'+e+'"':"")+" not supported.","error",null,!1,this.fileformatErrorMessageCode)}resetFileNotAllowedError(){this.fileformatErrorMessageCode&&this.toast.clearToast(this.fileformatErrorMessageCode)}fileSelectionChange(){return 1===this.fileSelector.nativeElement.files.length&&(this.fileFromBrowser=this.fileSelector.nativeElement.files[0],this.fileSelectedOrDropped()),this.fileSelector.nativeElement.value=null,!1}fileSelectedOrDropped(){if(this.resetFileNotAllowedError(),!this.checkMimetype(this.fileFromBrowser.type))return this.showFileNotAllowedError(this.getFileExtension(this.fileFromBrowser)),void(this.fileFromBrowser=null);this.resetMediaMetaData(),this.mediaMetaData.fileformat=this.getFileformatFromMimetype(this.fileFromBrowser),this.mediaMetaData.filename=this.fileFromBrowser.name,this.mediaMetaData.mimetype=this.fileFromBrowser.type,this.getMediaFromFileSystem()}getFileExtension(e){return e.name.split(".").pop()}removeImage(){this.resetMediaMetaData(),this.cropper&&(this.cropper.destroy(),this.cropper=void 0),this.mediaBase64=null,this.emitChange()}getImage(){if(!this.cropper)return null;let e;return e=this.isEdited||this.isResized?this.cropper.getCroppedCanvas({maxHeight:this.mediaMetaData.height,maxWidth:this.mediaMetaData.width,imageSmoothingEnabled:!0,imageSmoothingQuality:"high"}).toDataURL(this.mediaMetaData.mimetype,"image/jpeg"===this.mediaMetaData.mimetype?this.jpegCompressionLevel:void 0):this.mediaBase64.toString(),e.substring(e.indexOf("base64,")+7)}setMoveMode(){this.cropper.setDragMode("move")}setCropMode(){this.cropper.setDragMode("crop")}removeCropping(){this.cropper.clear(),this.isCropped=!1,this.lastCropBoxData={},this.calcTargetSize(),this.emitChange()}get canResize(){return this.allowResizing&&this.cropper}get canMirror(){return this.allowMirroring&&this.cropper}get canRotate(){return this.allowRotating&&this.cropper}maxHeightChanged(){let e;e=this.maxHeightInput.split(this.userprefs.toUse.num_grp_sep).join(""),e=parseInt(e,10),this._maxHeightByUser=isNaN(e)?null:e,this.calcTargetSize(),this.emitChange()}maxWidthChanged(){let e;e=this.maxWidthInput.split(this.userprefs.toUse.num_grp_sep).join(""),e=parseInt(e,10),this._maxWidthByUser=isNaN(e)?null:e,this.calcTargetSize(),this.emitChange()}get maxHeight(){return this.maxHeightBySystem&&this.maxHeightByUser?this.maxHeightBySystem<this.maxHeightByUser?this.maxHeightBySystem:this.maxHeightByUser:this.maxHeightBySystem?this.maxHeightBySystem:this.maxHeightByUser?this.maxHeightByUser:null}get maxWidth(){return this.maxWidthBySystem&&this.maxWidthByUser?this.maxWidthBySystem<this.maxWidthByUser?this.maxWidthBySystem:this.maxWidthByUser:this.maxWidthBySystem?this.maxWidthBySystem:this.maxWidthByUser?this.maxWidthByUser:null}get doResizeByUser(){return this._doResizeByUser}set doResizeByUser(e){this._doResizeByUser=e,this.calcTargetSize()}get maxWidthByUser(){return this.doResizeByUser?this._maxWidthByUser:void 0}get maxHeightByUser(){return this.doResizeByUser?this._maxHeightByUser:void 0}calcTargetSize(){if(!this.cropper)return;let e,t=1,s=this.cropper.getData(!0).width;0===s?(s=this.cropper.getImageData().naturalWidth,e=this.cropper.getImageData().naturalHeight):e=this.cropper.getData(!0).height,this.maxWidth&&s>this.maxWidth||this.maxHeight&&e>this.maxHeight?(t=this.maxWidth&&!this.maxHeight?this.maxWidth/s:this.maxHeight&&!this.maxWidth?this.maxHeight/e:this.maxWidth/s<this.maxHeight/e?this.maxWidth/s:this.maxHeight/e,this.mediaMetaData.width=Math.floor(s*t),this.mediaMetaData.height=Math.floor(e*t)):(this.mediaMetaData.width=s,this.mediaMetaData.height=e)}ngOnDestroy(){this.fileformatErrorMessageCode&&this.toast.clearToast(this.fileformatErrorMessageCode),this.unlistenPasteEvent()}zoomIn(){this.cropper.zoom(.1)}zoomOut(){this.cropper.zoom(-.1)}mirrorX(){90===this.currentRotation||270===this.currentRotation?this.cropper.scaleY(this.yMirrored=-1*this.yMirrored):this.cropper.scaleX(this.xMirrored=-1*this.xMirrored),this.emitChange()}mirrorY(){90===this.currentRotation||270===this.currentRotation?this.cropper.scaleX(this.xMirrored=-1*this.xMirrored):this.cropper.scaleY(this.yMirrored=-1*this.yMirrored),this.emitChange()}rotate(e){this.currentRotation+=e,this.currentRotation=this.currentRotation%360,this.currentRotation<0&&(this.currentRotation+=360),this.cropper.rotateTo(this.currentRotation),this.emitChange()}get isRotated(){return 0!==this.currentRotation}get isMirrored(){return-1===this.xMirrored||-1===this.yMirrored}get isResized(){return this.mediaMetaData.width!==this.mediaMetaData.originalWidth||this.mediaMetaData.height!==this.mediaMetaData.originalHeight}get isEdited(){return this.isRotated||this.isMirrored||this.isCropped}get isDirty(){return this.isEdited||this.isImported||this.isResized}emitChange(){this.mimetype.emit(this.mediaMetaData.mimetype),this.onChange(this.getImage())}resetModificationStati(){this.xMirrored=this.yMirrored=1,this.currentRotation=0,this.isCropped=!1,this.lastCropBoxData={}}removeModifications(){this.cropper.rotateTo(0),this.cropper.scale(1,1),this.cropper.clear(),this.isCropped=!1,this.lastCropBoxData={},this.calcTargetSize(),this.emitChange()}get allowEditing(){return this.allowCropping||this.allowRotating||this.allowMirroring}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}writeValue(e){e&&""!=e&&(this.mediaBase64=this.sanitizer.bypassSecurityTrustResourceUrl("data:"+this.mediaMetaData.mimetype+";base64,"+e),this.calcTargetSize()),this.resetModificationStati(),this.isImported=!1}}return SystemInputMedia.ɵfac=function(e){return new(e||SystemInputMedia)(i.Y36(l.d),i.Y36(o.Pu),i.Y36(a.H7),i.Y36(d.A),i.Y36(r.z),i.Y36(i.SBq),i.Y36(i.Qsj),i.Y36(c.eN),i.Y36(i.sBO),i.Y36(u.$))},SystemInputMedia.ɵcmp=i.Xpm({type:SystemInputMedia,selectors:[["system-input-media"]],viewQuery:function(e,t){if(1&e&&(i.Gf(x,5),i.Gf(Z,5),i.Gf(w,5),i.Gf(T,5)),2&e){let e;i.iGM(e=i.CRH())&&(t.fileSelector=e.first),i.iGM(e=i.CRH())&&(t.imageElement=e.first),i.iGM(e=i.CRH())&&(t.bottomToolbar=e.first),i.iGM(e=i.CRH())&&(t.toolbar=e.first)}},inputs:{componentHeight:"componentHeight",allowModifications:"allowModifications",allowCropping:"allowCropping",allowResizing:"allowResizing",allowRotating:"allowRotating",allowMirroring:"allowMirroring",_mimetype:["mimetype","_mimetype"],maxWidthBySystem:["maxWidth","maxWidthBySystem"],maxHeightBySystem:["maxHeight","maxHeightBySystem"],onDropExtern:["droppedFiles","onDropExtern"]},outputs:{mimetype:"mimetype"},features:[i._Bn([{provide:n.JU,useExisting:(0,i.Gpc)((()=>SystemInputMedia)),multi:!0}])],decls:49,vars:26,consts:[[1,"slds-rich-text-editor","slds-grid","slds-grid_vertical","slds-nowrap"],["role","toolbar",1,"slds-rich-text-editor__toolbar","slds-shrink-none"],["toolbar",""],[1,"slds-button-group-list"],[1,"slds-button","slds-button--icon-border","slds-button--neutral",3,"disabled","click"],["icon","delete"],[4,"ngIf"],["icon","zoomin"],["icon","zoomout"],["icon","move"],["icon","drag"],[1,"slds-button","slds-button--icon-border","slds-button--neutral",3,"disabled","title","click"],["icon","clear"],["icon","rotateleft","size","medium"],["icon","rotateright","size","medium"],["icon","mirrorhorizontal","size","medium"],["icon","mirrorvertical","size","medium"],["class","slds-grid slds-grid--vertical-align-center slds-col--bump-left",4,"ngIf"],[3,"ngStyle"],[1,"slds-height_full",2,"overflow","hidden",3,"system-overlay-loading-spinner","system-drop-file"],["style","display:block",3,"src","load",4,"ngIf","ngIfElse"],["uploadbutton",""],["role","toolbar",1,"slds-rich-text-editor__toolbar","slds-shrink-none","slds-rich-text-editor__toolbar_bottom"],["bottomtoolbar",""],["class","slds-col--bump-right",4,"ngIf"],["icon","undo"],[1,"slds-grid","slds-grid--vertical-align-center","slds-col--bump-left"],[3,"ngModel","disabled","ngModelChange"],["label","LBL_DOWNSIZE_TO_MAX"],["onlyField","true","precision","0","min","1","size","5",3,"ngModel","placeholder","disabled","ngModelChange","change"],[1,"slds-p-left--xxx-small"],[1,"slds-p-horizontal--x-small"],[2,"display","block",3,"src","load"],["imgelement",""],[1,"slds-size--1-of-1","slds-height_full","slds-align--absolute-center"],[1,"slds-grid","slds-grid--vertical-align-center"],[1,"slds-button","slds-button--neutral",3,"click"],["label","LBL_SELECT_FILE"],["type","file","accept","image/*",2,"display","none",3,"change"],["fileselector",""],["label","LBL_OR_PASTE_IMAGE_OR_DROP_FILE_HERE"],[1,"slds-col--bump-right"]],template:function(e,t){if(1&e&&(i.TgZ(0,"div",0)(1,"div",1,2)(3,"ul",3)(4,"li")(5,"button",4),i.NdJ("click",(function(){return t.removeImage()})),i._UZ(6,"system-button-icon",5),i.qZA()(),i.YNc(7,C,3,2,"li",6),i.qZA(),i.TgZ(8,"ul",3)(9,"li")(10,"button",4),i.NdJ("click",(function(){return t.zoomIn()})),i._UZ(11,"system-button-icon",7),i.qZA()(),i.TgZ(12,"li")(13,"button",4),i.NdJ("click",(function(){return t.zoomOut()})),i._UZ(14,"system-button-icon",8),i.qZA()()(),i.TgZ(15,"ul",3)(16,"li")(17,"button",4),i.NdJ("click",(function(){return t.setMoveMode()})),i._UZ(18,"system-button-icon",9),i.qZA()(),i.TgZ(19,"li")(20,"button",4),i.NdJ("click",(function(){return t.setCropMode()})),i._UZ(21,"system-button-icon",10),i.qZA()(),i.TgZ(22,"li")(23,"button",11),i.NdJ("click",(function(){return t.removeCropping()})),i._UZ(24,"system-button-icon",12),i.qZA()()(),i.TgZ(25,"ul",3)(26,"li")(27,"button",11),i.NdJ("click",(function(){return t.rotate(-90)})),i._UZ(28,"system-button-custom-icon",13),i.qZA()(),i.TgZ(29,"li")(30,"button",11),i.NdJ("click",(function(){return t.rotate(90)})),i._UZ(31,"system-button-custom-icon",14),i.qZA()(),i.TgZ(32,"li")(33,"button",11),i.NdJ("click",(function(){return t.mirrorX()})),i._UZ(34,"system-button-custom-icon",15),i.qZA()(),i.TgZ(35,"li")(36,"button",11),i.NdJ("click",(function(){return t.mirrorY()})),i._UZ(37,"system-button-custom-icon",16),i.qZA()()(),i.YNc(38,A,11,8,"div",17),i.qZA(),i.TgZ(39,"div",18)(40,"div",19),i.NdJ("system-drop-file",(function(e){return t.onDrop(e)})),i.YNc(41,k,2,1,"img",20),i.YNc(42,L,8,0,"ng-template",null,21,i.W1O),i.qZA()(),i.TgZ(44,"div",22,23),i.YNc(46,M,2,1,"div",24),i.YNc(47,I,3,3,"div",6),i.YNc(48,O,2,0,"div",6),i.qZA()()),2&e){const e=i.MAs(43);i.xp6(5),i.Q6J("disabled",!t.mediaBase64),i.xp6(2),i.Q6J("ngIf",t.allowEditing),i.xp6(3),i.Q6J("disabled",!t.mediaBase64),i.xp6(3),i.Q6J("disabled",!t.mediaBase64),i.xp6(4),i.Q6J("disabled",!t.cropper),i.xp6(3),i.Q6J("disabled",!t.cropper),i.xp6(3),i.s9C("title",t.language.getLabel("LBL_REMOVE_CROPPING")),i.Q6J("disabled",!t.cropper||!t.isCropped),i.xp6(4),i.s9C("title",t.language.getLabel("LBL_ROTATE_TO_LEFT")),i.Q6J("disabled",!t.canRotate),i.xp6(3),i.s9C("title",t.language.getLabel("LBL_ROTATE_TO_RIGHT")),i.Q6J("disabled",!t.canRotate),i.xp6(3),i.s9C("title",t.language.getLabel("LBL_MIRROR_HORIZONTALLY")),i.Q6J("disabled",!t.canMirror),i.xp6(3),i.s9C("title",t.language.getLabel("LBL_MIRROR_VERTICALLY")),i.Q6J("disabled",!t.canMirror),i.xp6(2),i.Q6J("ngIf",t.allowResizing),i.xp6(1),i.Q6J("ngStyle",i.VKq(24,J,t.cropperHeight)),i.xp6(1),i.Q6J("system-overlay-loading-spinner",t.isLoading),i.xp6(1),i.Q6J("ngIf",t.mediaBase64)("ngIfElse",e),i.xp6(5),i.Q6J("ngIf",t.mediaMetaData.fileformat),i.xp6(1),i.Q6J("ngIf",t.mediaBase64),i.xp6(1),i.Q6J("ngIf",!t.mediaBase64)}},dependencies:[m.M,h._,g.O5,g.PC,n.JJ,n.On,p.O,f.J,b.U,y.i,v._],encapsulation:2}),SystemInputMedia})()},6898:(e,t,s)=>{"use strict";s.d(t,{a:()=>p});var i=s(1571),n=s(433),l=s(727),o=s(5329),a=s(4154),d=s(6625),r=s(6895),c=s(3333);function u(e,t){1&e&&(i.TgZ(0,"option",5),i._uU(1,"*"),i.qZA())}function m(e,t){if(1&e&&(i.TgZ(0,"span"),i._UZ(1,"system-label-modulename",8),i._uU(2),i.qZA()),2&e){const e=i.oxw().$implicit;i.xp6(1),i.Q6J("module",e),i.xp6(1),i.hij(" (",e,")")}}function h(e,t){if(1&e&&(i.TgZ(0,"span"),i._uU(1),i.qZA()),2&e){const e=i.oxw().$implicit;i.xp6(1),i.Oqu(e)}}function g(e,t){if(1&e&&(i.TgZ(0,"option",6),i.YNc(1,m,3,2,"span",7),i.YNc(2,h,2,1,"span",7),i.qZA()),2&e){const e=t.$implicit,s=i.oxw();i.Q6J("value",e),i.xp6(1),i.Q6J("ngIf",!s.displaytechnicalname),i.xp6(1),i.Q6J("ngIf",s.displaytechnicalname)}}let p=(()=>{class SystemInputModule{constructor(e,t,s){this.language=e,this.metadata=t,this.configuration=s,this.disabled=!1,this.displaytechnicalname=!0,this.displayAsterisk=!1,this.subscription=new l.w0,this._modules=[],this._modules=this.metadata.getModules(),this.sortModules(),this.subscription=this.language.currentlanguage$.subscribe((e=>{this.sortModules()}))}ngOnDestroy(){this.subscription.unsubscribe()}sortModules(){this.displaytechnicalname?this._modules.sort(((e,t)=>e.toLowerCase()>t.toLowerCase()?1:-1)):this._modules.sort(((e,t)=>this.language.getModuleName(e).toLowerCase()>this.language.getModuleName(t).toLowerCase()?1:-1))}get module(){return this._module}set module(e){this._module=e,this.onChange&&this.onChange(e)}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}writeValue(e){this._module=e}}return SystemInputModule.ɵfac=function(e){return new(e||SystemInputModule)(i.Y36(o.d),i.Y36(a.Pu),i.Y36(d.C))},SystemInputModule.ɵcmp=i.Xpm({type:SystemInputModule,selectors:[["system-input-module"]],inputs:{disabled:"disabled",displaytechnicalname:"displaytechnicalname",displayAsterisk:"displayAsterisk"},features:[i._Bn([{provide:n.JU,useExisting:(0,i.Gpc)((()=>SystemInputModule)),multi:!0}])],decls:5,vars:4,consts:[[1,"slds-form-element__control"],[1,"slds-select_container"],[1,"slds-select",3,"disabled","ngModel","ngModelChange"],["value","*",4,"ngIf"],[3,"value",4,"ngFor","ngForOf"],["value","*"],[3,"value"],[4,"ngIf"],[3,"module"]],template:function(e,t){1&e&&(i.TgZ(0,"div",0)(1,"div",1)(2,"select",2),i.NdJ("ngModelChange",(function(e){return t.module=e})),i.YNc(3,u,2,0,"option",3),i.YNc(4,g,3,3,"option",4),i.qZA()()()),2&e&&(i.xp6(2),i.Q6J("disabled",t.disabled)("ngModel",t.module),i.xp6(1),i.Q6J("ngIf",t.displayAsterisk),i.xp6(1),i.Q6J("ngForOf",t._modules))},dependencies:[r.sg,r.O5,n.YN,n.Kr,n.EJ,n.JJ,n.On,c.M],encapsulation:2}),SystemInputModule})()},4375:(e,t,s)=>{"use strict";s.d(t,{s:()=>h});var i=s(1571),n=s(433),l=s(727),o=s(5329),a=s(4154),d=s(6625),r=s(6895),c=s(7674);function u(e,t){if(1&e&&(i.TgZ(0,"span"),i._uU(1),i.qZA()),2&e){const e=i.oxw().$implicit;i.xp6(1),i.hij(" (",e,")")}}function m(e,t){if(1&e&&(i.TgZ(0,"option",4),i._UZ(1,"system-label-fieldname",5),i.YNc(2,u,2,1,"span",6),i.qZA()),2&e){const e=t.$implicit,s=i.oxw();i.Q6J("value",e),i.xp6(1),i.Q6J("module",s.module)("field",e),i.xp6(1),i.Q6J("ngIf",s.displaytechnicalname)}}let h=(()=>{class SystemInputModuleField{constructor(e,t,s){this.language=e,this.metadata=t,this.configuration=s,this.disabled=!1,this.displaytechnicalname=!0,this._fields=[],this.subscription=new l.w0}ngOnInit(){let e=this.metadata.getModuleFields(this.module);for(let t in e)this._fields.push(t);this.sortFields(),this.subscription=this.language.currentlanguage$.subscribe((e=>{this.sortFields()}))}sortFields(){this._fields.sort(((e,t)=>this.language.getFieldDisplayName(this.module,e).toLowerCase()>this.language.getFieldDisplayName(this.module,t).toLowerCase()?1:-1))}get field(){return this._field}set field(e){this._field=e,this.onChange&&this.onChange(e)}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}writeValue(e){this._field=e}ngOnDestroy(){this.subscription.unsubscribe()}}return SystemInputModuleField.ɵfac=function(e){return new(e||SystemInputModuleField)(i.Y36(o.d),i.Y36(a.Pu),i.Y36(d.C))},SystemInputModuleField.ɵcmp=i.Xpm({type:SystemInputModuleField,selectors:[["system-input-module-field"]],inputs:{module:"module",disabled:"disabled",displaytechnicalname:"displaytechnicalname"},features:[i._Bn([{provide:n.JU,useExisting:(0,i.Gpc)((()=>SystemInputModuleField)),multi:!0}])],decls:4,vars:3,consts:[[1,"slds-form-element__control"],[1,"slds-select_container"],[1,"slds-select",3,"disabled","ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[3,"module","field"],[4,"ngIf"]],template:function(e,t){1&e&&(i.TgZ(0,"div",0)(1,"div",1)(2,"select",2),i.NdJ("ngModelChange",(function(e){return t.field=e})),i.YNc(3,m,3,4,"option",3),i.qZA()()()),2&e&&(i.xp6(2),i.Q6J("disabled",t.disabled)("ngModel",t.field),i.xp6(1),i.Q6J("ngForOf",t._fields))},dependencies:[r.sg,r.O5,n.YN,n.Kr,n.EJ,n.JJ,n.On,c.h],encapsulation:2}),SystemInputModuleField})()},3673:(e,t,s)=>{"use strict";s.d(t,{l:()=>c});var i=s(1571),n=s(433),l=s(5329),o=s(4154),a=s(6895);function d(e,t){if(1&e&&(i.TgZ(0,"option",8),i._uU(1),i.qZA()),2&e){const e=t.$implicit;i.Q6J("value",e),i.xp6(1),i.Oqu(e)}}function r(e,t){if(1&e&&(i.TgZ(0,"option",8),i._uU(1),i.qZA()),2&e){const e=t.$implicit;i.Q6J("value",e.id),i.xp6(1),i.Oqu(e.name)}}let c=(()=>{class SystemInputModuleFilter{constructor(e,t){this.language=e,this.metadata=t,this.modules=[],this._modulefilters=[],this.module="",this._modulefilter="",this._modulefilters=this.metadata.getModuleFilters();for(let e of this._modulefilters)this.modules.find((t=>t==e.module))||this.modules.push(e.module);this.modules.sort()}get modulefilter(){return this._modulefilter}set modulefilter(e){this._modulefilter=e,this.onChange(e)}get modulefilters(){return this._modulefilters.filter((e=>e.module==this.module))}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}writeValue(e){this._modulefilter=e,this._modulefilter&&(this.module=this.metadata.getModuleFilter(this._modulefilter).module)}}return SystemInputModuleFilter.ɵfac=function(e){return new(e||SystemInputModuleFilter)(i.Y36(l.d),i.Y36(o.Pu))},SystemInputModuleFilter.ɵcmp=i.Xpm({type:SystemInputModuleFilter,selectors:[["system-input-module-filter"]],inputs:{disabled:"disabled"},features:[i._Bn([{provide:n.JU,useExisting:(0,i.Gpc)((()=>SystemInputModuleFilter)),multi:!0}])],decls:12,vars:6,consts:[[1,"slds-form-element","slds-m-vertical--xxx-small"],[1,"slds-grid"],[1,"slds-form-element__control","slds-p-right--xxx-small","slds-size--1-of-3"],[1,"slds-select_container"],[1,"slds-select",3,"disabled","ngModel","ngModelChange"],["value",""],[3,"value",4,"ngFor","ngForOf"],[1,"slds-form-element__control","slds-p-left--xxx-small","slds-size--2-of-3"],[3,"value"]],template:function(e,t){1&e&&(i.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"select",4),i.NdJ("ngModelChange",(function(e){return t.module=e})),i._UZ(5,"option",5),i.YNc(6,d,2,2,"option",6),i.qZA()()(),i.TgZ(7,"div",7)(8,"div",3)(9,"select",4),i.NdJ("ngModelChange",(function(e){return t.modulefilter=e})),i._UZ(10,"option"),i.YNc(11,r,2,2,"option",6),i.qZA()()()()()),2&e&&(i.xp6(4),i.Q6J("disabled",t.disabled)("ngModel",t.module),i.xp6(2),i.Q6J("ngForOf",t.modules),i.xp6(3),i.Q6J("disabled",!t.module||t.disabled)("ngModel",t.modulefilter),i.xp6(2),i.Q6J("ngForOf",t.modulefilters))},dependencies:[a.sg,n.YN,n.Kr,n.EJ,n.JJ,n.On],encapsulation:2}),SystemInputModuleFilter})()},1555:(e,t,s)=>{"use strict";s.d(t,{u:()=>u});var i=s(1571),n=s(433),l=s(4154),o=s(5329),a=s(6895),d=s(9503),r=s(8658);function c(e,t){if(1&e&&(i.TgZ(0,"div",2)(1,"system-checkbox-group-checkbox",3),i._uU(2),i.qZA()()),2&e){const e=t.$implicit;i.xp6(1),i.Q6J("value",e.value),i.xp6(1),i.hij(" ",e.display,"")}}let u=(()=>{class SystemInputMultiEnum{constructor(e,t){this.metadata=e,this.language=t,this.options=[]}get value(){return this._value}set value(e){this._value=e,this.onChange(e)}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}writeValue(e){this._value=e}ngOnInit(){this.getOptions()}getOptions(){let e=[],t=this.language.getFieldDisplayOptions(this.module,this.field);for(let s in t)s&&t[s]&&e.push({value:s,display:t[s]});if(this.options=e,this.sortdirection)switch(this.sortdirection.toLowerCase()){case"desc":this.options.sort(((e,t)=>e.display.toLowerCase()<t.display.toLowerCase()?1:-1));break;case"asc":this.options.sort(((e,t)=>e.display.toLowerCase()>t.display.toLowerCase()?1:-1))}}}return SystemInputMultiEnum.ɵfac=function(e){return new(e||SystemInputMultiEnum)(i.Y36(l.Pu),i.Y36(o.d))},SystemInputMultiEnum.ɵcmp=i.Xpm({type:SystemInputMultiEnum,selectors:[["system-input-multienum"]],inputs:{module:"module",field:"field",sortdirection:"sortdirection"},features:[i._Bn([{provide:n.JU,useExisting:(0,i.Gpc)((()=>SystemInputMultiEnum)),multi:!0}])],decls:2,vars:2,consts:[[1,"slds-grid","slds-wrap",3,"ngModel","ngModelChange"],["class","slds-large-size--1-of-3 slds-medium-size--1-of-1 slds-truncate",4,"ngFor","ngForOf"],[1,"slds-large-size--1-of-3","slds-medium-size--1-of-1","slds-truncate"],[3,"value"]],template:function(e,t){1&e&&(i.TgZ(0,"system-checkbox-group",0),i.NdJ("ngModelChange",(function(e){return t.value=e})),i.YNc(1,c,3,2,"div",1),i.qZA()),2&e&&(i.Q6J("ngModel",t.value),i.xp6(1),i.Q6J("ngForOf",t.options))},dependencies:[a.sg,n.JJ,n.On,d.L,r.m],encapsulation:2}),SystemInputMultiEnum})()},5621:(e,t,s)=>{"use strict";s.d(t,{i:()=>h});var i=s(1571),n=s(433),l=s(2422),o=s(6895);function a(e,t){}function d(e,t){if(1&e&&(i.TgZ(0,"div",3)(1,"div",4),i.YNc(2,a,0,0,"ng-template",5),i.qZA()()),2&e){i.oxw();const e=i.MAs(3);i.xp6(2),i.Q6J("ngTemplateOutlet",e)}}function r(e,t){}function c(e,t){if(1&e&&i.YNc(0,r,0,0,"ng-template",5),2&e){i.oxw();const e=i.MAs(3);i.Q6J("ngTemplateOutlet",e)}}const u=function(e){return{width:e}};function m(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"input",6),i.NdJ("ngModelChange",(function(t){i.CHM(e);const s=i.oxw();return i.KtG(s.textValue=t)}))("change",(function(t){i.CHM(e);const s=i.oxw();return i.KtG(s.fieldChanged(t))})),i.qZA()}if(2&e){const e=i.oxw();i.Q6J("ngModel",e.textValue)("disabled",e.disabled)("ngStyle",i.VKq(5,u,e.size?"auto":void 0)),i.uIk("placeholder",e.placeholder)("size",e.size)}}let h=(()=>{class SystemInputNumber{constructor(e){this.userpreferences=e,this.onlyField=!1,this.disabled=!1,this.asNumber=!1,this.textValue="",this.lastTextValue=""}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}writeValue(e){this.textValue=e,this.lastTextValue=this.textValue}onChange(e){}onTouched(){}fieldChanged(e){this.textValue="number"!=typeof this.textValue?this.getValSanitized(this.textValue):this.textValue,this.textValue!==this.lastTextValue?(this.asNumber?this.onChange(this.getNumberFromText(this.textValue)):this.onChange(this.textValue),this.lastTextValue=this.textValue):e.stopPropagation()}getValSanitized(e){let t=this.userpreferences.toUse,s=void 0===this.precision?t.default_currency_significant_digits:this.precision,i=this.textValue.split(t.num_grp_sep).join("");return i=i.split(t.dec_sep).join("."),i=isNaN(parseFloat(i))?void 0:Math.floor(i*Math.pow(10,s))/Math.pow(10,s),i=i&&i>this.max?this.max:i,i=i&&i<this.min?this.min:i,this.getValAsText(i)}getNumberFromText(e){let t=this.userpreferences.toUse,s=void 0===this.precision?t.default_currency_significant_digits:this.precision,i=this.textValue.split(t.num_grp_sep).join("");return i=i.split(t.dec_sep).join("."),i=isNaN(parseFloat(i))?void 0:Math.floor(i*Math.pow(10,s))/Math.pow(10,s),i}getValAsText(e){if(void 0===e)return"";let t=parseFloat(e);return isNaN(t)?"":this.userpreferences.formatMoney(t,this.precision)}}return SystemInputNumber.ɵfac=function(e){return new(e||SystemInputNumber)(i.Y36(l.z))},SystemInputNumber.ɵcmp=i.Xpm({type:SystemInputNumber,selectors:[["system-input-number"]],inputs:{max:"max",min:"min",precision:"precision",onlyField:"onlyField",placeholder:"placeholder",disabled:"disabled",size:"size",asNumber:"asNumber"},features:[i._Bn([{provide:n.JU,useExisting:(0,i.Gpc)((()=>SystemInputNumber)),multi:!0}])],decls:4,vars:2,consts:[["class","slds-form-element__control",4,"ngIf"],[4,"ngIf"],["field",""],[1,"slds-form-element__control"],[1,"slds-form-element"],[3,"ngTemplateOutlet"],["type","text",1,"slds-input","slds-text-align--right",3,"ngModel","disabled","ngStyle","ngModelChange","change"]],template:function(e,t){1&e&&(i.YNc(0,d,3,1,"div",0),i.YNc(1,c,1,1,null,1),i.YNc(2,m,1,7,"ng-template",null,2,i.W1O)),2&e&&(i.Q6J("ngIf",!t.onlyField),i.xp6(1),i.Q6J("ngIf",t.onlyField))},dependencies:[o.O5,o.tP,o.PC,n.Fj,n.JJ,n.On],encapsulation:2}),SystemInputNumber})()},7919:(e,t,s)=>{"use strict";s.d(t,{Z:()=>o});var i=s(1571),n=s(433),l=s(2656);let o=(()=>{class SystemInputPassword{constructor(){this._inputtype="password",this.disabled=!1}get value(){return this._value}set value(e){e!=this._value&&(this._value=e,this.onChange(e))}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}writeValue(e){this._value=e}get inputtype(){return this.disabled?"password":this._inputtype}toggleType(){this._inputtype="text"==this._inputtype?"password":"text"}get toggleicon(){return"text"==this.inputtype?"hide":"preview"}}return SystemInputPassword.ɵfac=function(e){return new(e||SystemInputPassword)},SystemInputPassword.ɵcmp=i.Xpm({type:SystemInputPassword,selectors:[["system-input-password"]],inputs:{disabled:"disabled"},features:[i._Bn([{provide:n.JU,useExisting:(0,i.Gpc)((()=>SystemInputPassword)),multi:!0}])],decls:4,vars:5,consts:[[1,"slds-form-element__control","slds-input-has-icon","slds-input-has-icon_right"],[1,"slds-button","slds-button_icon","slds-input__icon","slds-input__icon_right",3,"disabled","click"],[3,"icon"],["autocomplete","new-password",1,"slds-input",3,"type","disabled","ngModel","ngModelChange"]],template:function(e,t){1&e&&(i.TgZ(0,"div",0)(1,"button",1),i.NdJ("click",(function(){return t.toggleType()})),i._UZ(2,"system-button-icon",2),i.qZA(),i.TgZ(3,"input",3),i.NdJ("ngModelChange",(function(e){return t.value=e})),i.qZA()()),2&e&&(i.xp6(1),i.Q6J("disabled",t.disabled),i.xp6(1),i.Q6J("icon",t.toggleicon),i.xp6(1),i.Q6J("type",t.inputtype)("disabled",t.disabled)("ngModel",t.value))},dependencies:[n.Fj,n.JJ,n.On,l.J],encapsulation:2}),SystemInputPassword})()},9901:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});var i=s(1571),n=s(433),l=s(6163);const o=["*"];let a=(()=>{class SystemInputRadio{constructor(e){this.modelutilities=e,this.disabled=!1,this.canUnset=!1,this.id=this.modelutilities.generateGuid()}setChecked(e){e.target.checked&&this.onChange(this.value)}registerOnChange(e){this.onChange=t=>{e(t)}}registerOnTouched(e){this.onTouched=e}writeValue(e){e&&e==this.value?this.checked=!0:this.checked=!1}clickLabel(e){if(!this.canUnset)return;let t=e.target.parentElement.parentElement.firstChild;t.checked&&(t.checked=!1,this.onChange(null),e.preventDefault())}}return SystemInputRadio.ɵfac=function(e){return new(e||SystemInputRadio)(i.Y36(l.A))},SystemInputRadio.ɵcmp=i.Xpm({type:SystemInputRadio,selectors:[["system-input-radio"]],inputs:{name:"name",value:"value",disabled:"disabled",canUnset:"canUnset"},features:[i._Bn([{provide:n.JU,useExisting:(0,i.Gpc)((()=>SystemInputRadio)),multi:!0}])],ngContentSelectors:o,decls:6,vars:5,consts:[[1,"slds-radio","slds-truncate","slds-is-relative"],["type","radio",3,"id","name","checked","disabled","change"],[1,"slds-radio__label",3,"click"],[1,"slds-radio_faux","slds-m-horizontal--xxx-small"],[1,"slds-form-element__label"]],template:function(e,t){1&e&&(i.F$t(),i.TgZ(0,"div",0)(1,"input",1),i.NdJ("change",(function(e){return t.setChecked(e)})),i.qZA(),i.TgZ(2,"label",2),i.NdJ("click",(function(e){return t.clickLabel(e)})),i._UZ(3,"span",3),i.TgZ(4,"span",4),i.Hsn(5),i.qZA()()()),2&e&&(i.xp6(1),i.Q6J("id",t.id)("name",t.name)("checked",t.checked)("disabled",t.disabled),i.xp6(1),i.uIk("for",t.id))},encapsulation:2}),SystemInputRadio})()},6271:(e,t,s)=>{"use strict";s.d(t,{p:()=>u});var i=s(1571),n=s(433),l=s(6895),o=s(3463),a=s(8859);function d(e,t){if(1&e&&i._UZ(0,"system-label",8),2&e){const e=i.oxw().$implicit;i.Q6J("label",e.label)}}function r(e,t){if(1&e&&i._UZ(0,"system-utility-icon",9),2&e){const e=i.oxw().$implicit;i.Q6J("icon",e.icon||"choice")}}function c(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"span",2)(1,"input",3),i.NdJ("ngModelChange",(function(t){i.CHM(e);const s=i.oxw();return i.KtG(s.modelValue=t)})),i.qZA(),i.TgZ(2,"label",4)(3,"span",5),i.YNc(4,d,1,1,"system-label",6),i.YNc(5,r,1,1,"ng-template",null,7,i.W1O),i.qZA()()()}if(2&e){const e=t.$implicit,s=i.MAs(6),n=i.oxw();i.xp6(1),i.Q6J("ngModel",n.modelValue)("value",e.value)("disabled",n.disabled||e.disabled)("name",n.groupName)("id",e.id),i.xp6(1),i.Q6J("for",e.id),i.xp6(2),i.Q6J("ngIf",!!e.label)("ngIfElse",s)}}let u=(()=>{class SystemInputRadioButtonGroup{constructor(e){this.cdRef=e,this.inputOptions=[],this.disabled=!1,this.groupName=_.uniqueId("group-name-")}get modelValue(){return this._modelValue}set modelValue(e){this.onChange(e),this.writeValue(e)}ngAfterViewInit(){this.cdRef.detach()}ngOnChanges(e){e.inputOptions&&this.setItemsInitialValues(),this.cdRef.detectChanges()}registerOnChange(e){this.onChange=t=>{e(t)}}registerOnTouched(e){this.onTouched=e}writeValue(e){this._modelValue=e,this.cdRef.detectChanges()}setItemsInitialValues(){this.inputOptions.forEach((e=>{e.id||(e.id=_.uniqueId("input-id-")),e.label&&!e.title&&(e.title=e.label)}))}trackByFn(e,t){return t.id}}return SystemInputRadioButtonGroup.ɵfac=function(e){return new(e||SystemInputRadioButtonGroup)(i.Y36(i.sBO))},SystemInputRadioButtonGroup.ɵcmp=i.Xpm({type:SystemInputRadioButtonGroup,selectors:[["system-input-radio-button-group"]],inputs:{inputOptions:"inputOptions",disabled:"disabled"},features:[i._Bn([{provide:n.JU,useExisting:(0,i.Gpc)((()=>SystemInputRadioButtonGroup)),multi:!0}]),i.TTD],decls:2,vars:2,consts:[[1,"slds-radio_button-group","slds-m-right--x-small"],["class","slds-button slds-radio_button",4,"ngFor","ngForOf","ngForTrackBy"],[1,"slds-button","slds-radio_button"],["type","radio",3,"ngModel","value","disabled","name","id","ngModelChange"],[1,"slds-radio_button__label","slds-height_full",3,"for"],[1,"slds-radio_faux","slds-align--absolute-center",2,"padding","0 .5rem","display","initial"],["class","slds-truncate",3,"label",4,"ngIf","ngIfElse"],["iconContainer",""],[1,"slds-truncate",3,"label"],["size","x-small",3,"icon"]],template:function(e,t){1&e&&(i.TgZ(0,"div",0),i.YNc(1,c,7,8,"span",1),i.qZA()),2&e&&(i.xp6(1),i.Q6J("ngForOf",t.inputOptions)("ngForTrackBy",t.trackByFn))},dependencies:[l.sg,l.O5,n.Fj,n._,n.JJ,n.On,o._,a.r],encapsulation:2,changeDetection:0}),SystemInputRadioButtonGroup})()},4846:(e,t,s)=>{"use strict";s.d(t,{z:()=>m});var i=s(1571),n=s(433),l=s(5329),o=s(4044),a=s(6895),d=s(2656),r=s(4561);function c(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"div",5)(1,"div",6)(2,"span",7)(3,"span",8),i._UZ(4,"system-icon",9),i.qZA(),i.TgZ(5,"span",10),i._uU(6),i.qZA(),i.TgZ(7,"button",11),i.NdJ("click",(function(){i.CHM(e);const t=i.oxw();return i.KtG(t.clearField())})),i._UZ(8,"system-button-icon",12),i.qZA()()()()}if(2&e){const e=i.oxw();i.xp6(4),i.Q6J("module",e.module),i.xp6(2),i.Oqu(e._relatedname),i.xp6(2),i.Q6J("icon","close")}}function u(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"div",13)(1,"input",14),i.NdJ("focus",(function(){i.CHM(e);const t=i.oxw();return i.KtG(t.searchWithModal())})),i.qZA(),i.TgZ(2,"button",15),i.NdJ("click",(function(){i.CHM(e);const t=i.oxw();return i.KtG(t.searchWithModal())})),i._UZ(3,"system-button-icon",12),i.qZA()()}if(2&e){const e=i.oxw();i.xp6(1),i.Q6J("placeholder",e.language.getModuleCombinedLabel("LBL_SEARCH",e.module)),i.xp6(2),i.Q6J("icon","search")}}let m=(()=>{class SystemInputRelate{constructor(e,t){this.language=e,this.modal=t,this.nameField="summary_text"}clearField(){this._relatedid=void 0,this._relatedname=void 0,this.onChange(void 0)}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}writeValue(e){if(e){let t=e.split("::");this._relatedid=t[0],this._relatedname=t[1]}this._relatedid=e}searchWithModal(){this.modal.openModal("ObjectModalModuleLookup").subscribe((e=>{e.instance.module=this.module,e.instance.multiselect=!1,e.instance.selectedItems.subscribe((e=>{e.length&&(this._relatedid=e[0].id,this._relatedname=e[0][this.nameField],this.onChange(this._relatedid+"::"+this._relatedname))}))}))}}return SystemInputRelate.ɵfac=function(e){return new(e||SystemInputRelate)(i.Y36(l.d),i.Y36(o.o))},SystemInputRelate.ɵcmp=i.Xpm({type:SystemInputRelate,selectors:[["system-input-relate"]],inputs:{module:"module",nameField:"nameField"},features:[i._Bn([{provide:n.JU,useExisting:(0,i.Gpc)((()=>SystemInputRelate)),multi:!0}])],decls:5,vars:2,consts:[[1,"slds-combobox_container"],[1,"slds-form-element","slds-lookup"],["role","combobox",1,"slds-combobox","slds-dropdown-trigger","slds-dropdown-trigger_click"],["class","slds-form-element__control",4,"ngIf"],["class","slds-combobox__form-element slds-input-has-icon slds-input-has-icon_right",4,"ngIf"],[1,"slds-form-element__control"],[1,"slds-pill_container"],[1,"slds-pill","slds-size--1-of-1"],[1,"slds-icon_container","slds-icon-standard-account","slds-pill__icon_container"],["size","small",3,"module"],[1,"slds-pill__label"],[1,"slds-button","slds-button--icon","slds-pill__remove",3,"click"],[3,"icon"],[1,"slds-combobox__form-element","slds-input-has-icon","slds-input-has-icon_right"],["type","text","autocomplete","none","role","combobox",1,"slds-input","slds-combobox__input",3,"placeholder","focus"],[1,"slds-button","slds-button_icon","slds-input__icon","slds-input__icon_right",3,"click"]],template:function(e,t){1&e&&(i.TgZ(0,"div",0)(1,"div",1)(2,"div",2),i.YNc(3,c,9,3,"div",3),i.YNc(4,u,4,2,"div",4),i.qZA()()()),2&e&&(i.xp6(3),i.Q6J("ngIf",t._relatedid),i.xp6(1),i.Q6J("ngIf",!t._relatedid))},dependencies:[a.O5,d.J,r.f],encapsulation:2}),SystemInputRelate})()},3144:(e,t,s)=>{"use strict";s.d(t,{H:()=>h});var i=s(1571),n=s(433),l=s(4154),o=s(5329),a=s(6625),d=s(6895),r=s(3463);function c(e,t){if(1&e&&(i.TgZ(0,"option",8),i._UZ(1,"system-label",9),i.qZA()),2&e){const e=t.$implicit;i.Q6J("value",e.sc),i.xp6(1),i.Q6J("label",e.label)}}function u(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"div",3)(1,"select",4,5),i.NdJ("ngModelChange",(function(t){i.CHM(e);const s=i.oxw();return i.KtG(s.value=t)})),i._UZ(3,"option",6),i.YNc(4,c,2,2,"option",7),i.qZA()()}if(2&e){const e=i.oxw();i.xp6(1),i.Q6J("disabled",0==e.states.length)("ngModel",e.value),i.xp6(3),i.Q6J("ngForOf",e.states)}}function m(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"div",10)(1,"input",11),i.NdJ("ngModelChange",(function(t){i.CHM(e);const s=i.oxw();return i.KtG(s.value=t)})),i.qZA()()}if(2&e){const e=i.oxw();i.xp6(1),i.Q6J("ngModel",e.value)}}let h=(()=>{class SystemInputState{constructor(e,t,s){this.metadata=e,this.language=t,this.configuration=s,this.states=[],this.strict=!1,"strict"==this.configuration.data.backendextensions.spiceui.config.format&&(this.strict=!0)}get value(){return this._value}set value(e){e!=this._value&&(this._value=e,this.onChange(e))}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}writeValue(e){this._value=e}ngOnChanges(){this.strict&&this.getStates()}getStates(){if(this.states=[],this.country){let e=this.configuration.getData("countries");e.states&&(this.states=e.states.filter((e=>e.cc==this.country)),this.states.sort(((e,t)=>this.language.getLabel(e.label).localeCompare(this.language.getLabel(t.label)))))}}}return SystemInputState.ɵfac=function(e){return new(e||SystemInputState)(i.Y36(l.Pu),i.Y36(o.d),i.Y36(a.C))},SystemInputState.ɵcmp=i.Xpm({type:SystemInputState,selectors:[["system-input-state"]],inputs:{country:"country"},features:[i._Bn([{provide:n.JU,useExisting:(0,i.Gpc)((()=>SystemInputState)),multi:!0}]),i.TTD],decls:4,vars:2,consts:[[1,"slds-form-element"],["class","slds-select_container",4,"ngIf","ngIfElse"],["countryinput",""],[1,"slds-select_container"],[1,"slds-select",3,"disabled","ngModel","ngModelChange"],["focus",""],["value",""],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[3,"label"],[1,"slds-form-element__control"],["type","text",1,"slds-input",3,"ngModel","ngModelChange"]],template:function(e,t){if(1&e&&(i.TgZ(0,"div",0),i.YNc(1,u,5,3,"div",1),i.YNc(2,m,2,1,"ng-template",null,2,i.W1O),i.qZA()),2&e){const e=i.MAs(3);i.xp6(1),i.Q6J("ngIf",t.strict)("ngIfElse",e)}},dependencies:[d.sg,d.O5,n.YN,n.Kr,n.Fj,n.EJ,n.JJ,n.On,r._],encapsulation:2}),SystemInputState})()},1078:(e,t,s)=>{"use strict";s.d(t,{C:()=>u});var i=s(1571),n=s(2422),l=s(4505),o=s(5329),a=s(6895),d=s(433);function r(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"li",7),i.NdJ("click",(function(){const t=i.CHM(e).$implicit,s=i.oxw();return i.KtG(s.addTag(t))})),i.TgZ(1,"div",8),i._uU(2),i.qZA()()}if(2&e){const e=t.$implicit;i.xp6(2),i.hij(" ",e," ")}}const c=function(e){return{"slds-is-open":e}};let u=(()=>{class SystemInputTags{constructor(e,t,s,n,l){this.elementref=e,this.renderer=t,this.userpreferences=s,this.backend=n,this.language=l,this.tagemitter=new i.vpe,this.querystring="",this.querytimeout=void 0,this.matchedtags=[]}get isOpen(){return this.matchedtags.length>0}search(e){switch(e.key){case"ArrowDown":case"ArrowUp":break;case",":case";":case"Enter":this.addTag(this.querystring.replace(/^[\s]+|[\s\W]+$/gm,""));break;default:this.querytimeout&&window.clearTimeout(this.querytimeout),this.querytimeout=window.setTimeout((()=>this.doSearch()),500)}}doSearch(){this.backend.postRequest("common/spicetags",{},{search:this.querystring.trim()}).subscribe((e=>{this.matchedtags=e,this.matchedtags.sort(((e,t)=>e.toLowerCase()>t.toLowerCase()?1:-1))}))}addTag(e){this.querytimeout&&window.clearTimeout(this.querytimeout),this.matchedtags=[],this.tagemitter.emit(e),this.querystring=""}}return SystemInputTags.ɵfac=function(e){return new(e||SystemInputTags)(i.Y36(i.SBq),i.Y36(i.Qsj),i.Y36(n.z),i.Y36(l.y),i.Y36(o.d))},SystemInputTags.ɵcmp=i.Xpm({type:SystemInputTags,selectors:[["system-input-tags"]],outputs:{tagemitter:"tagemitter"},decls:7,vars:6,consts:[[1,"slds-combobox_container"],["role","combobox",1,"slds-combobox","slds-dropdown-trigger","slds-dropdown-trigger_click",3,"ngClass"],["role","none",1,"slds-combobox__form-element"],["type","search",1,"slds-input","slds-combobox__input",3,"placeholder","ngModel","ngModelChange","keyup"],["role","listbox",1,"slds-dropdown","slds-dropdown_fluid"],["role","presentation",1,"slds-listbox","slds-listbox_vertical"],["role","presentation","class","slds-listbox__item",3,"click",4,"ngFor","ngForOf"],["role","presentation",1,"slds-listbox__item",3,"click"],["role","option",1,"slds-media","slds-listbox__option","slds-listbox__option_plain"]],template:function(e,t){1&e&&(i.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"input",3),i.NdJ("ngModelChange",(function(e){return t.querystring=e}))("keyup",(function(e){return t.search(e)})),i.qZA()(),i.TgZ(4,"div",4)(5,"ul",5),i.YNc(6,r,3,1,"li",6),i.qZA()()()()),2&e&&(i.xp6(1),i.Q6J("ngClass",i.VKq(4,c,t.isOpen)),i.xp6(2),i.Q6J("placeholder",t.language.getLabel("LBL_SEARCH_TAG"))("ngModel",t.querystring),i.xp6(3),i.Q6J("ngForOf",t.matchedtags))},dependencies:[a.mk,a.sg,d.Fj,d.JJ,d.On],encapsulation:2}),SystemInputTags})()},3772:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});var i=s(1571),n=s(433),l=s(6163),o=s(3398);let a=(()=>{class SystemInputText{constructor(e,t){this.modelutilities=e,this.elementRef=t,this.disabled=!1,this.autocompletebreaker=""}get value(){return this._value}set value(e){e!=this._value&&(this._value=e,this.onChange(e))}ngOnInit(){this.autocomplete&&(this.autocompletebreaker="off"==this.autocomplete?this.modelutilities.generateGuid():this.autocomplete)}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}writeValue(e){this._value=e}emitBlur(){this.elementRef.nativeElement.dispatchEvent(new Event("blur",{bubbles:!0}))}}return SystemInputText.ɵfac=function(e){return new(e||SystemInputText)(i.Y36(l.A),i.Y36(i.SBq))},SystemInputText.ɵcmp=i.Xpm({type:SystemInputText,selectors:[["system-input-text"]],inputs:{disabled:"disabled",placeholder:"placeholder",maxlength:"maxlength",autocomplete:"autocomplete"},features:[i._Bn([{provide:n.JU,useExisting:(0,i.Gpc)((()=>SystemInputText)),multi:!0}])],decls:3,vars:5,consts:[[1,"slds-form-element"],[1,"slds-form-element__control"],["type","text",1,"slds-input",3,"autocomplete","maxlength","system-placeholder","disabled","ngModel","ngModelChange","blur"]],template:function(e,t){1&e&&(i.TgZ(0,"div",0)(1,"div",1)(2,"input",2),i.NdJ("ngModelChange",(function(e){return t.value=e}))("blur",(function(){return t.emitBlur()})),i.qZA()()()),2&e&&(i.xp6(2),i.Q6J("autocomplete",t.autocompletebreaker)("maxlength",t.maxlength)("system-placeholder",t.placeholder)("disabled",t.disabled)("ngModel",t.value))},dependencies:[o.A,n.Fj,n.JJ,n.nD,n.On],encapsulation:2}),SystemInputText})()},2006:(e,t,s)=>{"use strict";s.d(t,{H:()=>_});var i=s(1571),n=s(433),l=s(2422),o=s(5329),a=s(6895),d=s(2656),r=s(4561),c=s(3463);function u(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"button",8),i.NdJ("click",(function(){i.CHM(e);const t=i.oxw();return i.KtG(t.clear())})),i._UZ(1,"system-button-icon",14),i.qZA()}}const m=function(e){return{"slds-is-selected":e}};function h(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"li",15),i.NdJ("click",(function(){const t=i.CHM(e).$implicit,s=i.oxw();return i.KtG(s.display=t.display)})),i.TgZ(1,"div",16)(2,"span",17),i._UZ(3,"system-icon",18),i.qZA(),i.TgZ(4,"span",19)(5,"span",20),i._uU(6),i.qZA()()()()}if(2&e){const e=t.$implicit,s=i.oxw();i.xp6(1),i.Q6J("ngClass",i.VKq(3,m,e.offset==s._time.offset)),i.xp6(4),i.Q6J("title",e.display),i.xp6(1),i.Oqu(e.display)}}function g(e,t){1&e&&(i.TgZ(0,"div",21),i._UZ(1,"system-label",22),i.qZA())}const p=function(e){return{"slds-has-error":e}},f=function(e){return{"slds-is-open":e}},b=function(){return{updateOn:"blur"}};let _=(()=>{class SystemInputTime{constructor(e,t,s,n){this.elementref=e,this.renderer=t,this.userpreferences=s,this.language=n,this._time={display:"",moment:null,offset:0,valid:!0},this.dropdownValues=[],this.valid=new i.vpe,this.isOpen=!1,this.minutes_interval=30,this.hideErrorMessage=!1,this.dropdownValues=this.getDropdownValues()}set hideError(e){this.hideErrorMessage=!1!==e}ngOnDestroy(){}get isValid(){return this._time.valid}getDropdownValues(){let e=0,t=[];for(;e<=1440;){let s=(new moment).hour(0).minute(0).second(0);s.add(e,"minutes"),t.push({offset:e,display:s.format(this.userpreferences.getTimeFormat()),current:!1}),e+=this.minutes_interval}return t}getDropDownValueByOffset(e){return this.dropdownValues.find((t=>t.offset==e))}getNextDropDownValue(){return this.getDropDownValueByOffset(this._time.offset+this.minutes_interval)}setDisplayToNextDropDownValue(){this.display=this.getNextDropDownValue().display}setDisplayToPreviousDropDownValue(){this.display=this.getDropDownValueByOffset(this._time.offset-this.minutes_interval).display}get display(){return this._time.display}set display(e){if(e){let t=moment(e,this.userpreferences.getTimeFormat(),!0);if(t.isValid())this._time.moment||(this._time.moment=new moment),this._time.moment.set("hour",t.hour()),this._time.moment.set("minute",t.minute()),this._time.valid=!0,this._time.offset=this.calculateOffset(this._time.moment),this._time.display=e,this.closeDropDown(),this.onChange(this._time.moment);else{if("string"==typeof e&&e.length<=2&&e.length>0)return e=parseInt(e,10)<10?`0${e}:00`:`${e}:00`,void(this.display=e);this._time.valid=!1}}else this.clear();this.valid.emit(this._time.valid)}get canclear(){return!!this._time.display}clear(e=!0){this._time.moment||(this._time.moment=new moment),this._time.moment=null,this._time.display="",this._time.valid=!0,"function"==typeof this.onChange&&e&&this.onChange(this._time.moment)}toggleDropDown(){this.isOpen=!this.isOpen,this.isOpen}closeDropDown(){this.isOpen=!1}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}writeValue(e){e&&e.isValid&&e.isValid()?(this._time.moment=new moment(e),this._time.offset=this.calculateOffset(this._time.moment),this._time.display=this._time.moment.format(this.userpreferences.getTimeFormat())):this.clear(!1)}selectValue(e){this._time.moment||(this._time.moment=new moment),this._time.moment.hour(0).minute(0).second(0),this._time.moment.add(e,"minutes"),this._time.offset=e,this._time.display=this._time.moment.format(this.userpreferences.getTimeFormat()),"function"==typeof this.onChange&&this.onChange(this._time.moment),this.closeDropDown()}calculateOffset(e){let t=60*e.hour()+e.minute();return Math.floor(t/this.minutes_interval)*this.minutes_interval}}return SystemInputTime.ɵfac=function(e){return new(e||SystemInputTime)(i.Y36(i.SBq),i.Y36(i.Qsj),i.Y36(l.z),i.Y36(o.d))},SystemInputTime.ɵcmp=i.Xpm({type:SystemInputTime,selectors:[["system-input-time"]],inputs:{hideError:["system-input-time-hide-error","hideError"]},outputs:{valid:"valid"},features:[i._Bn([{provide:n.JU,useExisting:(0,i.Gpc)((()=>SystemInputTime)),multi:!0}])],decls:14,vars:12,consts:[[1,"slds-form-element",3,"ngClass"],[1,"slds-form-element__control"],[1,"slds-combobox_container"],["role","combobox",1,"slds-combobox","slds-dropdown-trigger","slds-dropdown-trigger_click","slds-combobox-picklist","slds-timepicker",3,"ngClass"],["role","none",1,"slds-combobox__form-element","slds-input-has-icon","slds-input-has-icon_right"],["aria-controls","listbox-unique-id","autocomplete","off","role","textbox","type","text",1,"slds-input","slds-combobox__input",3,"ngModelOptions","ngModel","ngModelChange","keyup.arrowup","keyup.arrowdown"],[1,"slds-input__icon-group","slds-input__icon-group_right","slds-height_full","slds-grid",2,"top","0","margin","0","height","100%"],["class","slds-input__icon slds-input__icon_right slds-button slds-button_icon","style","position: relative;",3,"click",4,"ngIf"],[1,"slds-input__icon","slds-input__icon_right","slds-button","slds-button_icon",2,"position","relative",3,"click"],["icon","clock"],["role","listbox",3,"mouseleave"],["role","presentation",1,"slds-listbox","slds-listbox_vertical","slds-dropdown","slds-dropdown--fluid","slds-dropdown--length-7"],["role","presentation","class","slds-listbox__item",3,"click",4,"ngFor","ngForOf"],["class","slds-form-element__help",4,"ngIf"],["icon","clear"],["role","presentation",1,"slds-listbox__item",3,"click"],["role","option",1,"slds-media","slds-listbox__option","slds-listbox__option_plain","slds-media_small","slds-media_center",3,"ngClass"],[1,"slds-media__figure"],["addclasses","slds-icon slds-listbox__icon-selected","icon","check","sprite","utility","size","x-small"],[1,"slds-media__body"],[1,"slds-truncate",3,"title"],[1,"slds-form-element__help"],["label","LBL_INPUT_INVALID"]],template:function(e,t){1&e&&(i.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"input",5),i.NdJ("ngModelChange",(function(e){return t.display=e}))("keyup.arrowup",(function(){return t.setDisplayToNextDropDownValue()}))("keyup.arrowdown",(function(){return t.setDisplayToPreviousDropDownValue()})),i.qZA(),i.TgZ(6,"div",6),i.YNc(7,u,2,0,"button",7),i.TgZ(8,"button",8),i.NdJ("click",(function(){return t.toggleDropDown()})),i._UZ(9,"system-button-icon",9),i.qZA()()(),i.TgZ(10,"div",10),i.NdJ("mouseleave",(function(){return t.closeDropDown()})),i.TgZ(11,"ul",11),i.YNc(12,h,7,5,"li",12),i.qZA()()()()(),i.YNc(13,g,2,0,"div",13),i.qZA()),2&e&&(i.Q6J("ngClass",i.VKq(7,p,!t.isValid)),i.xp6(3),i.Q6J("ngClass",i.VKq(9,f,t.isOpen)),i.xp6(2),i.Q6J("ngModelOptions",i.DdM(11,b))("ngModel",t.display),i.xp6(2),i.Q6J("ngIf",t.canclear),i.xp6(5),i.Q6J("ngForOf",t.dropdownValues),i.xp6(1),i.Q6J("ngIf",!t.isValid&&!t.hideErrorMessage))},dependencies:[a.mk,a.sg,a.O5,n.Fj,n.JJ,n.On,d.J,r.f,c._],encapsulation:2}),SystemInputTime})()},6449:(e,t,s)=>{"use strict";s.d(t,{R:()=>a});var i=s(1571),n=s(433),l=s(6895);function o(e,t){if(1&e&&(i.TgZ(0,"option",4),i._uU(1),i.qZA()),2&e){const e=t.$implicit,s=t.index,n=i.oxw();i.Q6J("value",e),i.xp6(1),i.AsE("",e," (GMT",n.offsetTimezones[s],")")}}let a=(()=>{class SystemInputTimezone{constructor(){this.disabled=!1,this.id="",this.propagateChange=e=>{},this.propagateTouch=e=>{},this.timezones=[],this.offsetTimezones=[],this.timezones=moment.tz.names(),this.timezones=this.timezones.filter((e=>e.match(/^((Africa|America|Antarctica|Arctic|Asia|Atlantic|Australia|Europe|Pacific)\/.+|UTC)$/))),this.timezones.forEach((e=>this.offsetTimezones.push(moment.tz(e).format("Z"))))}get timezone(){return this._timezone}set timezone(e){this._timezone=e,this.propagateChange(e)}registerOnChange(e){this.propagateChange=e}registerOnTouched(e){this.propagateTouch=e}writeValue(e){this._timezone=e}}return SystemInputTimezone.ɵfac=function(e){return new(e||SystemInputTimezone)},SystemInputTimezone.ɵcmp=i.Xpm({type:SystemInputTimezone,selectors:[["system-input-timezone"]],inputs:{disabled:"disabled",id:"id"},features:[i._Bn([{provide:n.JU,useExisting:(0,i.Gpc)((()=>SystemInputTimezone)),multi:!0}])],decls:4,vars:4,consts:[[1,"slds-form-element__control"],[1,"slds-select_container"],[1,"slds-select",3,"disabled","ngModel","id","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(e,t){1&e&&(i.TgZ(0,"div",0)(1,"div",1)(2,"select",2),i.NdJ("ngModelChange",(function(e){return t.timezone=e})),i.YNc(3,o,2,3,"option",3),i.qZA()()()),2&e&&(i.xp6(2),i.s9C("id",t.id),i.Q6J("disabled",t.disabled)("ngModel",t.timezone),i.xp6(1),i.Q6J("ngForOf",t.timezones))},dependencies:[l.sg,n.YN,n.Kr,n.EJ,n.JJ,n.On],encapsulation:2}),SystemInputTimezone})()},3463:(e,t,s)=>{"use strict";s.d(t,{_:()=>u});var i=s(727),n=s(1571),l=s(5329),o=s(4044),a=s(3917),d=s(6895);function r(e,t){if(1&e&&(n.ynx(0),n._uU(1),n.BQk()),2&e){const e=n.oxw();n.xp6(1),n.Oqu(e.language.getLabel(e.label,void 0,e.length))}}function c(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"span",2),n.NdJ("dblclick",(function(t){n.CHM(e);const s=n.oxw();return n.KtG(s.onDblClick(t))}))("contextmenu",(function(t){n.CHM(e);const s=n.oxw();return n.KtG(s.onRightClick(t))})),n._uU(1),n.qZA()}if(2&e){const e=n.oxw();n.xp6(1),n.hij(" ",e.language.getLabel(e.label,void 0,e.length)," ")}}let u=(()=>{class SystemLabel{constructor(e,t,s,n,l){this.language=e,this.modal=t,this.footer=s,this.renderer=n,this.cdRef=l,this.length="default",this.subsciptions=new i.w0,this.subsciptions.add(this.language.currentlanguage$.subscribe((()=>this.detectChanges())))}ngAfterViewInit(){this.cdRef.detach()}ngOnDestroy(){this.cdRef.reattach(),this.subsciptions.unsubscribe()}ngOnChanges(e){this.detectChanges()}openModal(){this.modal.openModal("SystemLabelEditorModal",!0).subscribe((e=>{e.instance.labelData={name:this.label,global_translations:[],custom_translations:[]}}))}detectChanges(){this.cdRef.detectChanges()}onDblClick(e){this.openModal(),e.preventDefault()}onRightClick(e){e.preventDefault();const t=this.createDropdown(e);this.renderer.appendChild(this.footer.footercontainer.element.nativeElement,t);const s=this.renderer.listen("document","click",(e=>{this.closeDropdown(e,t),s()}))}closeDropdown(e,t){this.footer.footercontainer.element.nativeElement.contains(t)&&this.renderer.removeChild(this.footer.footercontainer.element.nativeElement,t)}createDropdown(e){const t=this.renderer.createElement("div"),s=(e,t)=>t.forEach((t=>this.renderer.addClass(e,t)));this.renderer.setStyle(t,"top",e.pageY+"px"),this.renderer.setStyle(t,"left",e.pageX+"px"),s(t,["slds-dropdown--inverse","slds-dropdown","slds-theme--inverse"]);const i=this.renderer.createElement("ul");this.renderer.addClass(i,"slds-dropdown__list");const n=this.renderer.createElement("li");return s(n,["slds-slds-dropdown__item","slds-p-around--xx-small"]),this.renderer.setProperty(n,"onclick",(()=>this.openModal())),this.renderer.setProperty(n,"innerHTML",`<a>${this.language.getLabel("LBL_EDIT_LABEL")}</a>`),this.renderer.appendChild(i,n),this.renderer.appendChild(t,i),t}}return SystemLabel.ɵfac=function(e){return new(e||SystemLabel)(n.Y36(l.d),n.Y36(o.o),n.Y36(a.M),n.Y36(n.Qsj),n.Y36(n.sBO))},SystemLabel.ɵcmp=n.Xpm({type:SystemLabel,selectors:[["system-label"]],inputs:{label:"label",length:"length"},features:[n.TTD],decls:3,vars:2,consts:[[4,"ngIf","ngIfElse"],["labelListenerContainer",""],[3,"dblclick","contextmenu"]],template:function(e,t){if(1&e&&(n.YNc(0,r,2,1,"ng-container",0),n.YNc(1,c,2,1,"ng-template",null,1,n.W1O)),2&e){const e=n.MAs(2);n.Q6J("ngIf",!t.language.inlineEditEnabled)("ngIfElse",e)}},dependencies:[d.O5],encapsulation:2,changeDetection:0}),SystemLabel})()},7674:(e,t,s)=>{"use strict";s.d(t,{h:()=>m});var i=s(727),n=s(1571),l=s(5329),o=s(4044),a=s(4154),d=s(3917),r=s(6895);function c(e,t){if(1&e&&(n.ynx(0),n._uU(1),n.BQk()),2&e){const e=n.oxw();n.xp6(1),n.Oqu(e.language.getFieldDisplayName(e.module,e.field,e.fieldconfig,e.length))}}function u(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"span",2),n.NdJ("dblclick",(function(t){n.CHM(e);const s=n.oxw();return n.KtG(s.onDblClick(t))}))("contextmenu",(function(t){n.CHM(e);const s=n.oxw();return n.KtG(s.onRightClick(t))})),n._uU(1),n.qZA()}if(2&e){const e=n.oxw();n.xp6(1),n.hij(" ",e.language.getFieldDisplayName(e.module,e.field,e.fieldconfig,e.length)," ")}}let m=(()=>{class SystemLabelFieldname{constructor(e,t,s,n,l,o){this.language=e,this.modal=t,this.metadata=s,this.renderer=n,this.footer=l,this.cdRef=o,this.fieldconfig={},this.length="default",this.subsciptions=new i.w0,this.subsciptions.add(this.language.currentlanguage$.subscribe((()=>this.detectChanges())))}ngAfterViewInit(){this.cdRef.detach()}ngOnDestroy(){this.subsciptions.unsubscribe()}ngOnChanges(e){this.detectChanges()}openModal(){this.modal.openModal("SystemLabelEditorModal",!0).subscribe((e=>{const t=this.fieldconfig.label||this.metadata.getFieldlabel(this.module,this.field);e.instance.labelData={name:t,global_translations:[],custom_translations:[]}}))}onDblClick(e){this.openModal(),e.preventDefault()}detectChanges(){this.cdRef.detectChanges()}onRightClick(e){const t=this.createDropdown(e);this.renderer.appendChild(this.footer.footercontainer.element.nativeElement,t);const s=this.renderer.listen("document","click",(e=>{this.closeDropdown(e,t),s()}));e.preventDefault()}closeDropdown(e,t){this.footer.footercontainer.element.nativeElement.contains(t)&&this.renderer.removeChild(this.footer.footercontainer.element.nativeElement,t)}createDropdown(e){const t=this.renderer.createElement("div"),s=(e,t)=>t.forEach((t=>this.renderer.addClass(e,t)));this.renderer.setStyle(t,"top",e.pageY+"px"),this.renderer.setStyle(t,"left",e.pageX+"px"),s(t,["slds-dropdown--inverse","slds-dropdown","slds-theme--inverse"]);const i=this.renderer.createElement("ul");this.renderer.addClass(i,"slds-dropdown__list");const n=this.renderer.createElement("li");return s(n,["slds-slds-dropdown__item","slds-p-around--xx-small"]),this.renderer.setProperty(n,"onclick",(()=>this.openModal())),this.renderer.setProperty(n,"innerHTML",`<a>${this.language.getLabel("LBL_EDIT_LABEL")}</a>`),this.renderer.appendChild(i,n),this.renderer.appendChild(t,i),t}}return SystemLabelFieldname.ɵfac=function(e){return new(e||SystemLabelFieldname)(n.Y36(l.d),n.Y36(o.o),n.Y36(a.Pu),n.Y36(n.Qsj),n.Y36(d.M),n.Y36(n.sBO))},SystemLabelFieldname.ɵcmp=n.Xpm({type:SystemLabelFieldname,selectors:[["system-label-fieldname"]],inputs:{module:"module",field:"field",fieldconfig:"fieldconfig",length:"length"},features:[n.TTD],decls:3,vars:2,consts:[[4,"ngIf","ngIfElse"],["labelListenerContainer",""],[3,"dblclick","contextmenu"]],template:function(e,t){if(1&e&&(n.YNc(0,c,2,1,"ng-container",0),n.YNc(1,u,2,1,"ng-template",null,1,n.W1O)),2&e){const e=n.MAs(2);n.Q6J("ngIf",!t.language.inlineEditEnabled)("ngIfElse",e)}},dependencies:[r.O5],encapsulation:2,changeDetection:0}),SystemLabelFieldname})()},3333:(e,t,s)=>{"use strict";s.d(t,{M:()=>m});var i=s(727),n=s(1571),l=s(5329),o=s(4044),a=s(3917),d=s(4154),r=s(6895);function c(e,t){if(1&e&&(n.ynx(0),n._uU(1),n.BQk()),2&e){const e=n.oxw();n.xp6(1),n.Oqu(e.language.getModuleName(e.module,e.singular,e.length))}}function u(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"span",2),n.NdJ("dblclick",(function(t){n.CHM(e);const s=n.oxw();return n.KtG(s.onDblClick(t))}))("contextmenu",(function(t){n.CHM(e);const s=n.oxw();return n.KtG(s.onRightClick(t))})),n._uU(1),n.qZA()}if(2&e){const e=n.oxw();n.xp6(1),n.hij(" ",e.language.getModuleName(e.module,e.singular,e.length)," ")}}let m=(()=>{class SystemLabelModulename{constructor(e,t,s,n,l,o){this.language=e,this.modal=t,this.footer=s,this.metadata=n,this.renderer=l,this.cdRef=o,this.singular=!1,this.length="default",this.subsciptions=new i.w0,this.subsciptions.add(this.language.currentlanguage$.subscribe((()=>this.detectChanges())))}ngAfterViewInit(){this.cdRef.detach()}ngOnDestroy(){this.subsciptions.unsubscribe()}ngOnChanges(e){this.detectChanges()}onDblClick(e){this.openModal(),e.preventDefault()}openModal(){let e=this.metadata.getModuleDefs(this.module);const t=this.singular?e.singular_label:e.module_label;this.modal.openModal("SystemLabelEditorModal",!0).subscribe((e=>{e.instance.labelData={name:t,global_translations:[],custom_translations:[]}}))}detectChanges(){this.cdRef.detectChanges()}onRightClick(e){const t=this.createDropdown(e);this.renderer.appendChild(this.footer.footercontainer.element.nativeElement,t);const s=this.renderer.listen("document","click",(e=>{this.closeDropdown(e,t),s()}));e.preventDefault()}closeDropdown(e,t){this.footer.footercontainer.element.nativeElement.contains(t)&&this.renderer.removeChild(this.footer.footercontainer.element.nativeElement,t)}createDropdown(e){const t=this.renderer.createElement("div"),s=(e,t)=>t.forEach((t=>this.renderer.addClass(e,t)));this.renderer.setStyle(t,"top",e.pageY+"px"),this.renderer.setStyle(t,"left",e.pageX+"px"),s(t,["slds-dropdown--inverse","slds-dropdown","slds-theme--inverse"]);const i=this.renderer.createElement("ul");this.renderer.addClass(i,"slds-dropdown__list");const n=this.renderer.createElement("li");return s(n,["slds-slds-dropdown__item","slds-p-around--xx-small"]),this.renderer.setProperty(n,"onclick",(()=>this.openModal())),this.renderer.setProperty(n,"innerHTML",`<a>${this.language.getLabel("LBL_EDIT_LABEL")}</a>`),this.renderer.appendChild(i,n),this.renderer.appendChild(t,i),t}}return SystemLabelModulename.ɵfac=function(e){return new(e||SystemLabelModulename)(n.Y36(l.d),n.Y36(o.o),n.Y36(a.M),n.Y36(d.Pu),n.Y36(n.Qsj),n.Y36(n.sBO))},SystemLabelModulename.ɵcmp=n.Xpm({type:SystemLabelModulename,selectors:[["system-label-modulename"]],inputs:{module:"module",singular:"singular",length:"length"},features:[n.TTD],decls:3,vars:2,consts:[[4,"ngIf","ngIfElse"],["labelListenerContainer",""],[3,"dblclick","contextmenu"]],template:function(e,t){if(1&e&&(n.YNc(0,c,2,1,"ng-container",0),n.YNc(1,u,2,1,"ng-template",null,1,n.W1O)),2&e){const e=n.MAs(2);n.Q6J("ngIf",!t.language.inlineEditEnabled)("ngIfElse",e)}},dependencies:[r.O5],encapsulation:2,changeDetection:0}),SystemLabelModulename})()},2892:(e,t,s)=>{"use strict";s.d(t,{M:()=>g});var i=s(1571),n=s(5329),l=s(4044),o=s(2422),a=s(6895),d=s(433),r=s(2656),c=s(3463);function u(e,t){if(1&e&&(i.TgZ(0,"label",10),i._UZ(1,"system-label",11),i.qZA()),2&e){const e=i.oxw(2);i.MGl("for","",e.compId,"-select-lang")}}function m(e,t){if(1&e&&(i.TgZ(0,"option",12),i._uU(1),i.qZA()),2&e){const e=t.$implicit;i.Q6J("value",e.language),i.xp6(1),i.hij(" ",e.text," ")}}function h(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"div",1),i.YNc(1,u,2,1,"label",2),i.TgZ(2,"div",3)(3,"div",4)(4,"div",5)(5,"select",6),i.NdJ("ngModelChange",(function(t){i.CHM(e);const s=i.oxw();return i.KtG(s.currentlanguage=t)})),i.YNc(6,m,2,2,"option",7),i.qZA()()(),i.TgZ(7,"button",8),i.NdJ("click",(function(){i.CHM(e);const t=i.oxw();return i.KtG(t.reloadCurrentLanguage())})),i._UZ(8,"system-button-icon",9),i.qZA()()()}if(2&e){const e=i.oxw();i.xp6(1),i.Q6J("ngIf",e.displaylabel),i.xp6(4),i.MGl("id","",e.compId,"-select-lang"),i.Q6J("disabled",e.availableLanguages.length<=1)("ngModel",e.currentlanguage),i.xp6(1),i.Q6J("ngForOf",e.availableLanguages)}}let g=(()=>{class SystemLanguageSelector{constructor(e,t,s){this.language=e,this.modal=t,this.userpreferences=s,this.availableLanguages=[],this.selected=new i.vpe,this.displaylabel=!0,this.compId=_.uniqueId()}ngOnInit(){this.getAvialableLanguages()}getAvialableLanguages(){this.availableLanguages=this.language.getAvialableLanguages(!0)}get currentlanguage(){return this.language.currentlanguage}set currentlanguage(e){let t=this.modal.await("LBL_LOADING");this.language.switchLanguage(e).subscribe({next:()=>{t.emit(!0),this.userpreferences.setPreference("language",e)}}),this.selected.emit(!0)}reloadCurrentLanguage(){let e=this.modal.await("LBL_LOADING");this.language.loadLanguage().subscribe({next:()=>{e.emit(!0)}})}}return SystemLanguageSelector.ɵfac=function(e){return new(e||SystemLanguageSelector)(i.Y36(n.d),i.Y36(l.o),i.Y36(o.z))},SystemLanguageSelector.ɵcmp=i.Xpm({type:SystemLanguageSelector,selectors:[["system-language-selector"]],inputs:{displaylabel:"displaylabel"},outputs:{selected:"selected"},decls:1,vars:1,consts:[["class","slds-form-element slds-p-bottom--x-small",4,"ngIf"],[1,"slds-form-element","slds-p-bottom--x-small"],["class","slds-form-element__label",3,"for",4,"ngIf"],[1,"slds-grid","slds-grid--vertical-align-center"],[1,"slds-form-element__control","slds-grow"],[1,"slds-select_container"],[1,"slds-select",3,"disabled","ngModel","id","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[1,"slds-button","slds-button--icon","slds-button--icon-border","slds-m-left--x-small",3,"click"],["icon","refresh"],[1,"slds-form-element__label",3,"for"],["label","LBL_SELECT_LANGUAGE"],[3,"value"]],template:function(e,t){1&e&&i.YNc(0,h,9,5,"div",0),2&e&&i.Q6J("ngIf",t.availableLanguages.length>1)},dependencies:[a.sg,a.O5,d.YN,d.Kr,d.EJ,d.JJ,d.On,r.J,c._],encapsulation:2}),SystemLanguageSelector})()},2145:(e,t,s)=>{"use strict";s.d(t,{A:()=>l});var i=s(1571);const n=["*"];let l=(()=>{class SystemLink{constructor(){this.click=new i.vpe}clicked(e){this.click.emit(e)}}return SystemLink.ɵfac=function(e){return new(e||SystemLink)},SystemLink.ɵcmp=i.Xpm({type:SystemLink,selectors:[["system-link"]],outputs:{click:"click"},ngContentSelectors:n,decls:2,vars:0,consts:[[1,"slds-text-link_reset",3,"click"]],template:function(e,t){1&e&&(i.F$t(),i.TgZ(0,"span",0),i.NdJ("click",(function(e){return t.clicked(e)})),i.Hsn(1),i.qZA())},encapsulation:2}),SystemLink})()},8710:(e,t,s)=>{"use strict";s.d(t,{e:()=>l});var i=s(1571),n=s(4411);let l=(()=>{class SystemLoaderProgress{constructor(e){this.loader=e}get progress(){return this.loader.progress>100?100:this.loader.progress}}return SystemLoaderProgress.ɵfac=function(e){return new(e||SystemLoaderProgress)(i.Y36(n._))},SystemLoaderProgress.ɵcmp=i.Xpm({type:SystemLoaderProgress,selectors:[["system-loader-progress"]],decls:6,vars:3,consts:[[1,"slds-align--absolute-center"],[1,"slds-size--2-of-3"],[1,"slds-progress-bar","slds-progress-bar_circular","slds-progress-bar_medium"],[1,"slds-progress-bar__value",2,"background-color","#aaa"],[1,"slds-text-align--center","slds-p-vertical--small"]],template:function(e,t){1&e&&(i.TgZ(0,"div",0)(1,"div",1)(2,"div",2),i._UZ(3,"span",3),i.qZA(),i.TgZ(4,"div",4),i._uU(5),i.qZA()()()),2&e&&(i.xp6(3),i.Udp("width",t.progress+"%"),i.xp6(2),i.hij("... loading ",t.loader.activeLoader," ... "))},encapsulation:2}),SystemLoaderProgress})()},9621:(e,t,s)=>{"use strict";s.d(t,{j:()=>c});var i=s(7340),n=s(1571),l=s(4154),o=s(6559),a=s(6895);const d=[[["system-modal-header"]],[["system-modal-header-empty"]],[["system-modal-content"]],[["system-modal-footer"]]],r=["system-modal-header","system-modal-header-empty","system-modal-content","system-modal-footer"];let c=(()=>{class SystemModal{constructor(e,t){this.metadata=e,this.layout=t,this.size="medium",this.class=""}get sizeClass(){return this.size&&"small"!=this.size?this.class+" slds-modal_"+this.size:this.class}get containerStyle(){return"small"==this.layout.screenwidth?{padding:"0px",margin:"0px","border-radius":"0px"}:{}}}return SystemModal.ɵfac=function(e){return new(e||SystemModal)(n.Y36(l.Pu),n.Y36(o.b))},SystemModal.ɵcmp=n.Xpm({type:SystemModal,selectors:[["system-modal"]],inputs:{size:"size",class:"class"},ngContentSelectors:r,decls:6,vars:3,consts:[["role","dialog",1,"slds-modal","slds-fade-in-open",3,"ngClass"],[1,"slds-modal__container",3,"ngStyle"]],template:function(e,t){1&e&&(n.F$t(d),n.TgZ(0,"section",0)(1,"div",1),n.Hsn(2),n.Hsn(3,1),n.Hsn(4,2),n.Hsn(5,3),n.qZA()()),2&e&&(n.Q6J("ngClass",t.sizeClass),n.xp6(1),n.Q6J("@modalanimation",void 0)("ngStyle",t.containerStyle))},dependencies:[a.mk,a.PC],encapsulation:2,data:{animation:[(0,i.X$)("modalanimation",[(0,i.eR)(":enter",[(0,i.oB)({opacity:0}),(0,i.jt)(".3s",(0,i.oB)({opacity:1}))]),(0,i.eR)(":leave",[(0,i.jt)(".3s",(0,i.oB)({opacity:0}))])])]}}),SystemModal})()},3499:(e,t,s)=>{"use strict";s.d(t,{x:()=>o});var i=s(1571),n=s(6895);const l=["*"];let o=(()=>{class SystemModalContent{constructor(){this.margin="medium",this.grow=!1,this.scrollable=!0,this.overflowVisible=!1}set inputGrow(e){this.grow=!1!==e}set inputOverflowVisible(e){this.overflowVisible=!1!==e}get modalStyle(){return this.overflowVisible?{overflow:"visible"}:{}}get contentclass(){return"slds-modal__content"+(this.grow?" slds-grow":"")+(this.scrollable?"":" slds-scrollable--none")}}return SystemModalContent.ɵfac=function(e){return new(e||SystemModalContent)},SystemModalContent.ɵcmp=i.Xpm({type:SystemModalContent,selectors:[["system-modal-content"]],hostVars:2,hostBindings:function(e,t){2&e&&i.Tol(t.contentclass)},inputs:{margin:"margin",grow:"grow",scrollable:"scrollable",overflowVisible:"overflowVisible",inputGrow:["system-modal-content-grow","inputGrow"],inputOverflowVisible:["system-modal-overvlow-visible","inputOverflowVisible"]},ngContentSelectors:l,decls:2,vars:3,consts:[[1,"slds-height_full",3,"ngClass"]],template:function(e,t){1&e&&(i.F$t(),i.TgZ(0,"div",0),i.Hsn(1),i.qZA()),2&e&&(i.ekj("slds-scrollable--y",t.scrollable),i.Q6J("ngClass","slds-p-around--"+t.margin))},dependencies:[n.mk],styles:["[_nghost-%COMP%]{position:relative}"]}),SystemModalContent})()},5767:(e,t,s)=>{"use strict";s.d(t,{p:()=>l});var i=s(1571);const n=["*"];let l=(()=>{class SystemModalFooter{}return SystemModalFooter.ɵfac=function(e){return new(e||SystemModalFooter)},SystemModalFooter.ɵcmp=i.Xpm({type:SystemModalFooter,selectors:[["system-modal-footer"]],ngContentSelectors:n,decls:2,vars:0,consts:[[1,"slds-modal__footer"]],template:function(e,t){1&e&&(i.F$t(),i.TgZ(0,"footer",0),i.Hsn(1),i.qZA())},encapsulation:2}),SystemModalFooter})()},1916:(e,t,s)=>{"use strict";s.d(t,{y:()=>p});var i=s(1571),n=s(5329),l=s(6559),o=s(6895),a=s(2656),d=s(4561),r=s(3463);function c(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"button",7),i.NdJ("click",(function(){i.CHM(e);const t=i.oxw();return i.KtG(t.close.emit(!0))})),i._UZ(1,"system-button-icon",8),i.TgZ(2,"span",9),i._UZ(3,"system-label",10),i.qZA()()}}function u(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"button",11),i.NdJ("click",(function(){i.CHM(e);const t=i.oxw();return i.KtG(t.close.emit(!0))})),i._UZ(1,"system-button-icon",12),i.TgZ(2,"span",9),i._UZ(3,"system-label",10),i.qZA()()}}function m(e,t){if(1&e&&(i.TgZ(0,"div",13),i._UZ(1,"system-icon",14),i.qZA()),2&e){const e=i.oxw();i.xp6(1),i.Q6J("module",e.module)}}const h=["*",[["system-modal-header-right"]],[["system-modal-header-tagline"]]],g=["*","system-modal-header-right","system-modal-header-tagline"];let p=(()=>{class SystemModalHeader{constructor(e,t){this.language=e,this.layout=t,this.module="",this.hiddenCloseButton=!1,this.close=new i.vpe}set hideClose(e){this.hiddenCloseButton=!1!==e}get isSmall(){return"small"==this.layout.screenwidth}get headerStyle(){return"small"==this.layout.screenwidth?{"border-radius":"0px"}:{}}}return SystemModalHeader.ɵfac=function(e){return new(e||SystemModalHeader)(i.Y36(n.d),i.Y36(l.b))},SystemModalHeader.ɵcmp=i.Xpm({type:SystemModalHeader,selectors:[["system-modal-header"]],inputs:{module:"module",hiddenCloseButton:"hiddenCloseButton",hideClose:["system-modal-header-noclose","hideClose"]},outputs:{close:"close"},ngContentSelectors:g,decls:11,vars:4,consts:[[1,"slds-modal__header","slds-theme--shade",3,"ngStyle"],["class","slds-button slds-button_icon slds-modal__close slds-button--icon-inverse","style","color:white;",3,"click",4,"ngIf"],["class","slds-button slds-button_icon slds-is-absolute","style","top: 3px; right: 3px;",3,"click",4,"ngIf"],[1,"slds-grid","slds-grid--align-spread","slds-grid_vertical-align-center"],[1,"slds-media__figure","slds-m-right_x-small"],["class","slds-icon_container",4,"ngIf"],[1,"slds-text-heading_medium","slds-hyphenate"],[1,"slds-button","slds-button_icon","slds-modal__close","slds-button--icon-inverse",2,"color","white",3,"click"],["icon","close","size","large"],[1,"slds-assistive-text"],["label","LBL_CLOSE"],[1,"slds-button","slds-button_icon","slds-is-absolute",2,"top","3px","right","3px",3,"click"],["icon","close"],[1,"slds-icon_container"],["size","small",3,"module"]],template:function(e,t){1&e&&(i.F$t(h),i.TgZ(0,"header",0),i.YNc(1,c,4,0,"button",1),i.YNc(2,u,4,0,"button",2),i.TgZ(3,"div",3)(4,"div",4),i.YNc(5,m,2,1,"div",5),i.qZA(),i.TgZ(6,"span",6),i.Hsn(7),i.qZA(),i.TgZ(8,"div"),i.Hsn(9,1),i.qZA()(),i.Hsn(10,2),i.qZA()),2&e&&(i.Q6J("ngStyle",t.headerStyle),i.xp6(1),i.Q6J("ngIf",!t.hiddenCloseButton&&!t.isSmall),i.xp6(1),i.Q6J("ngIf",!t.hiddenCloseButton&&t.isSmall),i.xp6(3),i.Q6J("ngIf",t.module))},dependencies:[o.O5,o.PC,a.J,d.f,r._],encapsulation:2}),SystemModalHeader})()},1604:(e,t,s)=>{"use strict";s.d(t,{O:()=>l});var i=s(1571);const n=["*"];let l=(()=>{class SystemModalHeaderRight{}return SystemModalHeaderRight.ɵfac=function(e){return new(e||SystemModalHeaderRight)},SystemModalHeaderRight.ɵcmp=i.Xpm({type:SystemModalHeaderRight,selectors:[["system-modal-header-right"]],ngContentSelectors:n,decls:1,vars:0,template:function(e,t){1&e&&(i.F$t(),i.Hsn(0))},encapsulation:2}),SystemModalHeaderRight})()},6933:(e,t,s)=>{"use strict";s.d(t,{J:()=>l});var i=s(1571);const n=["*"];let l=(()=>{class SystemModalHeaderTagline{}return SystemModalHeaderTagline.ɵfac=function(e){return new(e||SystemModalHeaderTagline)},SystemModalHeaderTagline.ɵcmp=i.Xpm({type:SystemModalHeaderTagline,selectors:[["system-modal-header-tagline"]],ngContentSelectors:n,decls:2,vars:0,consts:[[1,"slds-m-top_x-small"]],template:function(e,t){1&e&&(i.F$t(),i.TgZ(0,"p",0),i.Hsn(1),i.qZA())},encapsulation:2}),SystemModalHeaderTagline})()},4947:(e,t,s)=>{"use strict";s.d(t,{w:()=>a});var i=s(1571),n=s(5329),l=s(4878);const o=function(){return{nodeId:"root"}};let a=(()=>{class SystemModuleTree{constructor(e){this.language=e,this.itemSelected=new i.vpe,this.selectedNodeId=""}ngAfterViewInit(){this.selectedNodeId="root",this.itemSelected.emit({path:"root:"+this.module,module:this.module,nodeId:"root"})}emitSelected(e){this.selectedNodeId=e.nodeId,this.itemSelected.emit(e)}}return SystemModuleTree.ɵfac=function(e){return new(e||SystemModuleTree)(i.Y36(n.d))},SystemModuleTree.ɵcmp=i.Xpm({type:SystemModuleTree,selectors:[["system-module-tree"]],inputs:{module:"module"},outputs:{itemSelected:"itemSelected"},decls:3,vars:6,consts:[["role","tree",1,"slds-tree"],[3,"module","name","path","nodedata","selectedNodeId","itemSelected"]],template:function(e,t){1&e&&(i.TgZ(0,"div")(1,"ul",0)(2,"system-module-tree-item",1),i.NdJ("itemSelected",(function(e){return t.emitSelected(e)})),i.qZA()()()),2&e&&(i.xp6(2),i.Q6J("module",t.module)("name",t.language.getModuleName(t.module))("path","root:"+t.module)("nodedata",i.DdM(5,o))("selectedNodeId",t.selectedNodeId))},dependencies:[l.E],encapsulation:2}),SystemModuleTree})()},4878:(e,t,s)=>{"use strict";s.d(t,{E:()=>c});var i=s(1571),n=s(4505),l=s(5329),o=s(6163),a=s(6895),d=s(2656);function r(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"system-module-tree-item",8),i.NdJ("itemSelected",(function(t){i.CHM(e);const s=i.oxw();return i.KtG(s.emitSelected(t))})),i.qZA()}if(2&e){const e=t.$implicit,s=i.oxw();i.Q6J("module",e.module)("name",e.displayname)("nodedata",e)("level",s.level+1)("path",e.path)("selectedNodeId",s.selectedNodeId)}}let c=(()=>{class SystemModuleTreeItem{constructor(e,t,s){this.backend=e,this.language=t,this.modelUtilities=s,this.selectedNodeId="",this.level=1,this.expanded=!1,this.nodeitems=[],this.isLoaded=!1,this.isLoading=!1,this.disabled=!1,this.itemSelected=new i.vpe}get isSelected(){return this.selectedNodeId==this.nodedata.nodeId}get icon(){return this.isLoading?"spinner":"chevronright"}loadItems(){this.isLoading=!0,this.backend.getRequest("dictionary/browser/"+this.module+"/nodes").subscribe((e=>{e&&(this.nodeitems=e.map((e=>(e.nodeId=this.modelUtilities.generateGuid(),e.displayname=e.label?this.language.getLabel(e.label):this.language.getModuleName(e.module),e))).sort(((e,t)=>e.displayname&&t.displayname?e.displayname>t.displayname?1:-1:0))),this.isLoading=!1,this.isLoaded=!0,this.nodeitems.length>0?this.expanded=!0:this.disabled=!0}))}expandItem(){this.isLoading||(this.isLoaded?this.expanded=!this.expanded:this.loadItems())}nodeSelected(){this.itemSelected.emit({path:this.path,module:this.module,nodeId:this.nodedata?this.nodedata.nodeId:"root"})}emitSelected(e){e.path=this.path+"::"+e.path,this.itemSelected.emit(e)}trackByFn(e,t){return t.nodeId}}return SystemModuleTreeItem.ɵfac=function(e){return new(e||SystemModuleTreeItem)(i.Y36(n.y),i.Y36(l.d),i.Y36(o.A))},SystemModuleTreeItem.ɵcmp=i.Xpm({type:SystemModuleTreeItem,selectors:[["system-module-tree-item"]],inputs:{selectedNodeId:"selectedNodeId",level:"level",path:"path",module:"module",name:"name",nodedata:"nodedata"},outputs:{itemSelected:"itemSelected"},decls:9,vars:9,consts:[["role","treeitem","tabindex","0"],[1,"slds-tree__item"],[1,"slds-button","slds-button_icon","slds-m-right_x-small",3,"disabled","click"],[3,"icon"],[1,"slds-has-flexi-truncate"],[1,"slds-tree__item-label","slds-truncate",3,"click"],["role","group"],[3,"module","name","nodedata","level","path","selectedNodeId","itemSelected",4,"ngFor","ngForOf","ngForTrackBy"],[3,"module","name","nodedata","level","path","selectedNodeId","itemSelected"]],template:function(e,t){1&e&&(i.TgZ(0,"li",0)(1,"div",1)(2,"button",2),i.NdJ("click",(function(){return t.expandItem()})),i._UZ(3,"system-button-icon",3),i.qZA(),i.TgZ(4,"span",4)(5,"span",5),i.NdJ("click",(function(){return t.nodeSelected()})),i._uU(6),i.qZA()()(),i.TgZ(7,"ul",6),i.YNc(8,r,1,6,"system-module-tree-item",7),i.qZA()()),2&e&&(i.uIk("aria-expanded",t.expanded)("aria-level",t.level),i.xp6(1),i.ekj("slds-is-selected",t.isSelected),i.xp6(1),i.Q6J("disabled",t.disabled),i.xp6(1),i.Q6J("icon",t.icon),i.xp6(3),i.Oqu(t.name),i.xp6(2),i.Q6J("ngForOf",t.nodeitems)("ngForTrackBy",t.trackByFn))},dependencies:[a.sg,d.J,SystemModuleTreeItem],encapsulation:2}),SystemModuleTreeItem})()},116:(e,t,s)=>{"use strict";s.d(t,{I:()=>T});var i=s(1571),n=s(433),l=s(5329),o=s(3398),a=s(151),d=s(6895),r=s(2656),c=s(8859);function u(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"div",8),i.NdJ("click",(function(){i.CHM(e);const t=i.oxw();return i.KtG(t.onclick())})),i.TgZ(1,"input",9),i.NdJ("mouseleave",(function(){i.CHM(e);const t=i.oxw();return i.KtG(t.onMouseLeave())}))("keydown",(function(e){return e.preventDefault()})),i.qZA(),i._UZ(2,"system-utility-icon",10),i.qZA()}if(2&e){const e=i.oxw();i.xp6(1),i.Q6J("disabled",e.disabled)("system-placeholder",e.selectedCountText)("ngStyle",e.inputTagStyle),i.xp6(1),i.Udp("transform",e.isOpen?"rotate(180deg)":"none")}}function m(e,t){if(1&e){const e=i.EpF();i.ynx(0),i.TgZ(1,"span",16),i.NdJ("click",(function(e){return e.stopPropagation()})),i.TgZ(2,"a",17)(3,"span",18),i._uU(4),i.qZA()(),i.TgZ(5,"button",19),i.NdJ("click",(function(){const t=i.CHM(e),s=t.index,n=t.$implicit,l=i.oxw(2);return i.KtG(l.removeItem(s,n))})),i._UZ(6,"system-button-icon",20),i.qZA()(),i.BQk()}if(2&e){const e=t.$implicit,s=i.oxw(2);i.xp6(3),i.Q6J("system-title",s.listItems[e]),i.xp6(1),i.hij(" ",s.listItems[e]," ")}}function h(e,t){if(1&e&&(i.TgZ(0,"div",21),i._uU(1),i.qZA()),2&e){const e=i.oxw(2);i.xp6(1),i.hij(" ",e.selectedCountText," ")}}function g(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"div",11),i.NdJ("click",(function(){i.CHM(e);const t=i.oxw();return i.KtG(t.onclick())}))("mouseleave",(function(){i.CHM(e);const t=i.oxw();return i.KtG(t.onMouseLeave())})),i.YNc(1,m,7,2,"ng-container",12),i.YNc(2,h,2,1,"div",13),i.TgZ(3,"div",14),i._uU(4," "),i.qZA(),i.TgZ(5,"system-utility-icon",15),i.NdJ("click",(function(){i.CHM(e);const t=i.oxw();return i.KtG(t.onclick())})),i.qZA()()}if(2&e){const e=i.oxw();i.xp6(1),i.Q6J("ngForOf",e.valueArray)("ngForTrackBy",e.trackByFn),i.xp6(1),i.Q6J("ngIf",0==e.valueArray.length),i.xp6(3),i.Udp("transform",e.isOpen?"rotate(180deg)":"none")}}function p(e,t){1&e&&i._UZ(0,"system-utility-icon",28)}function f(e,t){1&e&&i._UZ(0,"system-utility-icon",34)}function b(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"li",23),i.NdJ("click",(function(){const t=i.CHM(e).$implicit,s=i.oxw().$implicit,n=i.oxw(2);return i.KtG(n.toggleAddRemoveItem(t.value,s.value))})),i.TgZ(1,"div",29)(2,"span",30),i.YNc(3,f,1,0,"system-utility-icon",31),i.qZA(),i.TgZ(4,"span",32)(5,"span",33),i._uU(6),i.qZA()()()()}if(2&e){const e=t.$implicit,s=i.oxw(3);i.xp6(3),i.Q6J("ngIf",s.selectedItems[e.value]),i.xp6(2),i.Udp("font-weight",s.selectedItems[e.value]?600:"initial"),i.Q6J("system-title",e.display),i.xp6(1),i.hij(" ",e.display," ")}}function y(e,t){if(1&e){const e=i.EpF();i.ynx(0),i.TgZ(1,"li",23),i.NdJ("click",(function(){const t=i.CHM(e).$implicit,s=i.oxw(2);return i.KtG(s.toggleAddRemoveGroup(t.value))})),i.TgZ(2,"div",24),i.YNc(3,p,1,0,"system-utility-icon",25),i.TgZ(4,"h3",26),i._uU(5),i.qZA()()(),i.YNc(6,b,7,5,"li",27),i.BQk()}if(2&e){const e=t.$implicit,s=i.oxw(2);i.xp6(3),i.Q6J("ngIf",s.selectedItems[e.value]),i.xp6(1),i.Q6J("system-title",e.display),i.xp6(1),i.hij(" ",e.display," "),i.xp6(1),i.Q6J("ngForOf",e.items)("ngForTrackBy",s.trackByFn)}}function v(e,t){if(1&e&&(i.TgZ(0,"ul",22),i.YNc(1,y,7,5,"ng-container",12),i.qZA()),2&e){const e=i.oxw();i.xp6(1),i.Q6J("ngForOf",e.parsedListItems)("ngForTrackBy",e.trackByFn)}}function x(e,t){1&e&&i._UZ(0,"system-utility-icon",34)}function Z(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"li",23),i.NdJ("click",(function(){const t=i.CHM(e).$implicit,s=i.oxw(2);return i.KtG(s.toggleAddRemoveItem(t.value))})),i.TgZ(1,"div",29)(2,"span",30),i.YNc(3,x,1,0,"system-utility-icon",31),i.qZA(),i.TgZ(4,"span",32)(5,"span",33),i._uU(6),i.qZA()()()()}if(2&e){const e=t.$implicit,s=i.oxw(2);i.xp6(3),i.Q6J("ngIf",s.selectedItems[e.value]),i.xp6(2),i.Udp("font-weight",s.selectedItems[e.value]?600:"initial"),i.Q6J("system-title",e.display),i.xp6(1),i.hij(" ",e.display," ")}}function w(e,t){if(1&e&&(i.TgZ(0,"ul",22),i.YNc(1,Z,7,5,"li",35),i.qZA()),2&e){const e=i.oxw();i.xp6(1),i.Q6J("ngForOf",e.parsedListItems)("ngForTrackBy",e.trackByFn)}}let T=(()=>{class SystemMultipleSelect{constructor(e,t,s){this.elementRef=e,this.renderer=t,this.language=s,this.disabled=!1,this.grouped=!1,this.showPills=!0,this.listItems={},this.groupSeparator="_",this.parsedListItems=[],this.valueArray=[],this.isOpen=!1,this.selectedItems={},this.selectedCountText="0 Selected Items",this.inputTagStyle={color:"transparent",cursor:"pointer"},this.dropdownLengthClass="slds-dropdown_length-7"}set groupedSetter(e){this.grouped=!1!==e}set showPillsSetter(e){this.showPills=!1!==e}set dropdownLengthClassSetter(e){this.dropdownLengthClass=e?"slds-dropdown_length-"+e:"slds-dropdown_length-7"}set groupSeparatorSetter(e){this.groupSeparator=e||"_"}ngOnChanges(){this.buildOptionGroups()}ngAfterViewInit(){this.subscribeToESCKeyUp()}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}writeValue(e){e&&e.length&&(this.valueArray=e,this.selectedItems=_.object(e.map((e=>[e,!0])))),this.setSelectedCountText()}buildOptionGroups(){let e;if(this.parsedListItems=[],this.grouped){e={};for(let t in this.listItems)this.listItems.hasOwnProperty(t)&&!t.includes(this.groupSeparator)&&(e[t]={value:t,display:this.listItems[t],items:[]});for(let t in this.listItems)if(this.listItems.hasOwnProperty(t)){const s=t.split(this.groupSeparator);2==s.length&&e[s[0]]&&e[s[0]].items.push({value:t,display:this.listItems[t]})}this.parsedListItems=_.toArray(e)}else{e=[];for(let t in this.listItems)this.listItems.hasOwnProperty(t)&&e.push({value:t,display:this.listItems[t]});this.parsedListItems=e}}onclick(){this.isOpen=!this.isOpen}subscribeToESCKeyUp(){this.escKeyListener=this.renderer.listen("document","keyup",(e=>{"Escape"==e.key&&(this.isOpen=!1)}))}onMouseLeave(){this.clickListener&&this.clickListener(),this.isOpen&&(this.clickListener=this.renderer.listen("document","click",(e=>this.handleCloseDropdown(e))))}handleCloseDropdown(e){this.elementRef.nativeElement.contains(e.target)||(this.isOpen=!1,this.clickListener())}toggleAddRemoveItem(e,t){const s=this.valueArray.indexOf(e);let i=this.valueArray.indexOf(t);s>-1?(this.valueArray.splice(s,1),this.selectedItems[e]=!1,t&&!this.groupHasItems(t)&&(i=this.valueArray.indexOf(t),this.valueArray.splice(i,1),this.selectedItems[t]=!1)):(t&&-1==i&&(this.valueArray.push(t),this.selectedItems[t]=!0),this.valueArray.push(e),this.selectedItems[e]=!0),this.setSelectedCountText(),this.onChange(this.valueArray)}toggleAddRemoveGroup(e){if(this.groupHasItems(e))return;const t=this.valueArray.indexOf(e);t>-1?(this.valueArray.splice(t,1),this.selectedItems[e]=!1):(this.valueArray.push(e),this.selectedItems[e]=!0),this.setSelectedCountText(),this.onChange(this.valueArray)}groupHasItems(e){return this.valueArray.some((t=>{const s=t.split(this.groupSeparator);return 2==s.length&&s[0]==e}))}trackByFn(e,t){return e}removeItem(e,t){if(this.valueArray.splice(e,1),this.selectedItems[t]=!1,this.grouped&&t.split(this.groupSeparator).length>1){const e=t.split(this.groupSeparator)[0];if(!this.groupHasItems(e)){const t=this.valueArray.indexOf(e);this.valueArray.splice(t,1),this.selectedItems[e]=!1}}this.setSelectedCountText(),this.onChange(this.valueArray)}setSelectedCountText(){this.grouped?this.selectedCountText=`${this.valueArray.filter((e=>e.includes(this.groupSeparator))).length} ${this.language.getLabel("LBL_SELECTED_ITEMS")}`:this.selectedCountText=`${this.valueArray.length} ${this.language.getLabel("LBL_SELECTED_ITEMS")}`}ngOnDestroy(){this.escKeyListener&&this.escKeyListener()}}return SystemMultipleSelect.ɵfac=function(e){return new(e||SystemMultipleSelect)(i.Y36(i.SBq),i.Y36(i.Qsj),i.Y36(l.d))},SystemMultipleSelect.ɵcmp=i.Xpm({type:SystemMultipleSelect,selectors:[["system-multiple-select"]],inputs:{disabled:"disabled",groupedSetter:["grouped","groupedSetter"],showPillsSetter:["showPills","showPillsSetter"],listItems:"listItems",dropdownLengthClassSetter:["listHeight","dropdownLengthClassSetter"],groupSeparatorSetter:["groupSeparator","groupSeparatorSetter"]},features:[i._Bn([{provide:n.JU,useExisting:(0,i.Gpc)((()=>SystemMultipleSelect)),multi:!0}]),i.TTD],decls:9,vars:7,consts:[[1,"slds-form-element"],[1,"slds-form-element__control"],[1,"slds-combobox_container"],["aria-expanded","true","aria-haspopup","listbox","role","combobox",1,"slds-combobox","slds-dropdown-trigger","slds-dropdown-trigger_click"],["class","slds-combobox__form-element slds-input-has-icon slds-input-has-icon_right","role","none",3,"click",4,"ngIf"],["class","slds-grid slds-grid--vertical-align-center slds-wrap slds-pill_container",3,"click","mouseleave",4,"ngIf"],["role","listbox",1,"slds-dropdown","slds-dropdown_fluid","spice-scrollbar",3,"ngClass"],["class","slds-listbox slds-listbox_vertical","role","group",4,"ngIf"],["role","none",1,"slds-combobox__form-element","slds-input-has-icon","slds-input-has-icon_right",3,"click"],["type","text","autoComplete","off","role","textbox",1,"slds-input","slds-combobox__input","slds-has-focus","slds-combobox__input-value",3,"disabled","system-placeholder","ngStyle","mouseleave","keydown"],["icon","down","addclasses","slds-input__icon slds-input__icon_right"],[1,"slds-grid","slds-grid--vertical-align-center","slds-wrap","slds-pill_container",3,"click","mouseleave"],[4,"ngFor","ngForOf","ngForTrackBy"],["class","slds-grow slds-m-left--xx-small","style","cursor: default;",4,"ngIf"],[1,"slds-grow"],["icon","down","size","xx-small",1,"slds-col--bump-left","slds-p-right--xx-small",3,"click"],[1,"slds-pill","slds-pill_link",2,"max-width","130px",3,"click"],["href","javascript:void(0);",1,"slds-pill__action"],[1,"slds-pill__label",3,"system-title"],["system-title","LBL_REMOVE",1,"slds-button","slds-button_icon","slds-pill__remove",3,"click"],["icon","close"],[1,"slds-grow","slds-m-left--xx-small",2,"cursor","default"],["role","group",1,"slds-listbox","slds-listbox_vertical"],["role","presentation",1,"slds-listbox__item",3,"click"],["role","presentation",1,"slds-media","slds-listbox__option","slds-listbox__option_plain","slds-media_small"],["icon","check","size","xx-small","class","slds-m-right--xx-small",4,"ngIf"],["role","presentation",1,"slds-listbox__option-header","slds-truncate","slds-text-title_caps",3,"system-title"],["role","presentation","class","slds-listbox__item",3,"click",4,"ngFor","ngForOf","ngForTrackBy"],["icon","check","size","xx-small",1,"slds-m-right--xx-small"],["role","option",1,"slds-media","slds-listbox__option","slds-listbox__option_plain","slds-media_small","slds-is-selected"],[1,"slds-media__figure","slds-listbox__option-icon"],["icon","check","size","xx-small",4,"ngIf"],[1,"slds-media__body"],[1,"slds-truncate",3,"system-title"],["icon","check","size","xx-small"],["class","slds-listbox__item","role","presentation",3,"click",4,"ngFor","ngForOf","ngForTrackBy"]],template:function(e,t){1&e&&(i.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),i.YNc(4,u,3,5,"div",4),i.YNc(5,g,6,5,"div",5),i.TgZ(6,"div",6),i.YNc(7,v,2,2,"ul",7),i.YNc(8,w,2,2,"ul",7),i.qZA()()()()()),2&e&&(i.xp6(3),i.ekj("slds-is-open",t.isOpen),i.xp6(1),i.Q6J("ngIf",!t.showPills),i.xp6(1),i.Q6J("ngIf",t.showPills),i.xp6(1),i.Q6J("ngClass",t.dropdownLengthClass),i.xp6(1),i.Q6J("ngIf",t.grouped),i.xp6(1),i.Q6J("ngIf",!t.grouped))},dependencies:[o.A,a.S,d.mk,d.sg,d.O5,d.PC,r.J,c.r],encapsulation:2}),SystemMultipleSelect})()},4988:(e,t,s)=>{"use strict";s.d(t,{y:()=>o});var i=s(1571),n=s(7774),l=s(2032);let o=(()=>{class SystemNavigationCollector{constructor(e,t){this.activatedRoute=e,this.navigation=t,this.activatedRoute.params.subscribe((e=>{this.activatedRoute.routeConfig&&this.navigation.handleNavigation(e,this.activatedRoute.routeConfig,this.activatedRoute.snapshot)}))}}return SystemNavigationCollector.ɵfac=function(e){return new(e||SystemNavigationCollector)(i.Y36(n.gz),i.Y36(l.G))},SystemNavigationCollector.ɵcmp=i.Xpm({type:SystemNavigationCollector,selectors:[["ng-component"]],decls:1,vars:0,template:function(e,t){1&e&&i._UZ(0,"span")},encapsulation:2}),SystemNavigationCollector})()},8070:(e,t,s)=>{"use strict";s.d(t,{M:()=>c});var i=s(1571),n=s(5920),l=s(2032),o=s(6895),a=s(5383);function d(e,t){if(1&e&&(i.ynx(0),i._UZ(1,"system-navigation-manager-route-container",3),i.BQk()),2&e){const e=t.$implicit;i.xp6(1),i.Q6J("tabid",e.id)("parentttabid",e.parentid)("object",e)}}function r(e,t){if(1&e&&(i.ynx(0),i._UZ(1,"system-navigation-manager-route-container",1),i.YNc(2,d,2,3,"ng-container",2),i.BQk()),2&e){const e=i.oxw();i.xp6(2),i.Q6J("ngForOf",e.navigation.objectTabs)}}let c=(()=>{class SystemNavigationManager{constructor(e,t){this.session=e,this.navigation=t}get authenticated(){return this.session.authData.sessionId&&!0===this.session.authData.loaded}}return SystemNavigationManager.ɵfac=function(e){return new(e||SystemNavigationManager)(i.Y36(n.n),i.Y36(l.G))},SystemNavigationManager.ɵcmp=i.Xpm({type:SystemNavigationManager,selectors:[["system-navigation-manager"]],decls:1,vars:1,consts:[[4,"ngIf"],["tabid","main"],[4,"ngFor","ngForOf"],[3,"tabid","parentttabid","object"]],template:function(e,t){1&e&&i.YNc(0,r,3,1,"ng-container",0),2&e&&i.Q6J("ngIf",t.authenticated)},dependencies:[o.sg,o.O5,a.j],encapsulation:2}),SystemNavigationManager})()},5383:(e,t,s)=>{"use strict";s.d(t,{j:()=>g});var i=s(727),n=s(7017),l=s(1571),o=s(4154),a=s(5329),d=s(7774),r=s(3369),c=s(2032),u=s(6895),m=s(2995);const h=function(e){return{"slds-hide":e}};let g=(()=>{class SystemNavigationManagerRouteContainer{constructor(e,t,s,n,l,o,a){this.metadata=e,this.language=t,this.router=s,this.broadcast=n,this.navigation=l,this.navigationtab=o,this.changeDetectorRef=a,this.loaded=!1,this.subscriptions=new i.w0,this.changeDetectorRef.detach(),this.subscriptions.add(this.navigationtab.tabinfo$.subscribe((e=>{this.navigation.settabinfo(this.tabid,e)}))),this.subscriptions.add(this.navigationtab.close$.subscribe((e=>{this.navigation.closeObjectTab(this.tabid,!0)})))}ngOnInit(){this.setParentTabId(),this.subscriptions.add(this.navigation.activeTab$.subscribe((e=>{if(e==this.tabid){let e;if("main"===this.tabid)this.renderedPath==this.navigation.maintab.path&&_.isEqual(this.rendererParams,this.navigation.maintab.params)||(e=this.metadata.getRouteComponent(this.navigation.maintab.path),this.routercomponent=e||void 0,this.navigationtab.activeRoute={path:this.navigation.maintab.path,params:this.navigation.maintab.params},this.navigationtab.activeRoute$.next(this.navigationtab.activeRoute),this.renderedPath=this.navigation.maintab.path,this.rendererParams={...this.navigation.maintab.params});else this.renderedPath==this.object.path&&_.isEqual(this.rendererParams,this.object.params)||(e=this.metadata.getRouteComponent(this.object.path.replace("tab/:tabid/","")),this.routercomponent=e||void 0,this.navigationtab.activeRoute={path:this.object.path,params:this.object.params},this.navigationtab.activeRoute$.next(this.navigationtab.activeRoute),this.renderedPath=this.object.path,this.rendererParams={...this.object.params});this.loaded=!0,this.changeDetectorRef.reattach(),this.changeDetectorRef.markForCheck()}else this.changeDetectorRef.detach(),this.changeDetectorRef.detectChanges()})))}setParentTabId(){"main"!=this.tabid&&"subtabbed"==this.navigation.navigationparadigm&&this.object.enablesubtabs&&(this.navigationtab.tabid=this.parentttabid?this.parentttabid:this.tabid)}ngOnDestroy(){this.subscriptions.unsubscribe()}get isActive(){return this.navigation.displayTab==this.tabid}}return SystemNavigationManagerRouteContainer.ɵfac=function(e){return new(e||SystemNavigationManagerRouteContainer)(l.Y36(o.Pu),l.Y36(a.d),l.Y36(d.F0),l.Y36(r.f),l.Y36(c.G,4),l.Y36(n.d),l.Y36(l.sBO))},SystemNavigationManagerRouteContainer.ɵcmp=l.Xpm({type:SystemNavigationManagerRouteContainer,selectors:[["system-navigation-manager-route-container"]],inputs:{object:"object",tabid:"tabid",parentttabid:"parentttabid"},features:[l._Bn([n.d])],decls:2,vars:4,consts:[[3,"ngClass"],[3,"component"]],template:function(e,t){1&e&&(l.TgZ(0,"div",0),l._UZ(1,"system-dynamic-component",1),l.qZA()),2&e&&(l.Q6J("ngClass",l.VKq(2,h,!t.isActive)),l.xp6(1),l.Q6J("component",t.routercomponent))},dependencies:[u.mk,m.T],encapsulation:2}),SystemNavigationManagerRouteContainer})()},5320:(e,t,s)=>{"use strict";s.d(t,{H:()=>a});var i=s(7445),n=s(5698),l=s(1571),o=s(2422);let a=(()=>{class SystemNumberSpinner{constructor(e,t){this.userpreferences=e,this.cdref=t,this._value=0,this.steps=20,this.duration=300}ngOnChanges(e){const t=(parseFloat(this.value)-this._value)/this.steps;(0,i.F)(this.duration/this.steps).pipe((0,n.q)(this.steps)).subscribe((e=>{this._value!=parseFloat(this.value)&&(this._value+=t,Math.abs(this._value-parseFloat(this.value))<1&&(this._value=parseFloat(this.value)),this.cdref.detectChanges())}),(e=>{this._value=parseFloat(this.value),this.cdref.detectChanges()}),(()=>{this._value=parseFloat(this.value),this.cdref.detectChanges()}))}get displayvalue(){return this.userpreferences.formatMoney(this._value,0)}}return SystemNumberSpinner.ɵfac=function(e){return new(e||SystemNumberSpinner)(l.Y36(o.z),l.Y36(l.sBO))},SystemNumberSpinner.ɵcmp=l.Xpm({type:SystemNumberSpinner,selectors:[["system-number-spinner"]],inputs:{value:"value",steps:"steps",duration:"duration"},features:[l.TTD],decls:1,vars:1,template:function(e,t){1&e&&l._uU(0),2&e&&l.Oqu(t.displayvalue)},encapsulation:2,changeDetection:0}),SystemNumberSpinner})()},1819:(e,t,s)=>{"use strict";s.d(t,{W:()=>O});var i=s(1571),n=s(4505),l=s(2294),o=s(3278),a=s(5547),d=s(5329),r=s(6895),c=s(433),u=s(1553),m=s(3463),h=s(6449),g=s(4211),p=s(6268),f=s(4845);function b(e,t){if(1&e&&i._UZ(0,"system-label",38),2&e){const e=i.oxw();i.Q6J("label","LBL_"+e.preferences.distance_unit_system)}}function _(e,t){if(1&e&&(i.TgZ(0,"option",39),i._uU(1),i.qZA()),2&e){const e=t.$implicit;i.Q6J("value",e.value),i.xp6(1),i.hij(" ",e.name," ")}}function y(e,t){if(1&e&&(i.TgZ(0,"option",39),i._uU(1),i.qZA()),2&e){const e=t.$implicit;i.Q6J("value",e.value),i.xp6(1),i.hij(" ",e.name," ")}}function v(e,t){if(1&e&&(i.ynx(0),i._uU(1),i.BQk()),2&e){const e=t.$implicit,s=i.oxw();i.xp6(1),i.hij(" ",e.id==s.preferences.currency?e.name:""," ")}}function x(e,t){if(1&e&&(i.TgZ(0,"option",39),i._uU(1),i.qZA()),2&e){const e=t.$implicit;i.Q6J("value",e.id),i.xp6(1),i.hij(" ",e.name," ")}}function Z(e,t){if(1&e&&(i.TgZ(0,"option",39),i._uU(1),i.qZA()),2&e){const e=t.$implicit;i.Q6J("value",e),i.xp6(1),i.hij(" ",e," ")}}function w(e,t){if(1&e&&(i.TgZ(0,"option",40),i._uU(1),i.qZA()),2&e){const e=t.$implicit;i.Q6J("ngValue",e),i.xp6(1),i.hij(" ",e.show," ")}}function T(e,t){if(1&e&&(i.TgZ(0,"option",39),i._uU(1),i.qZA()),2&e){const e=t.$implicit;i.Q6J("value",e),i.xp6(1),i.hij(" ",e," ")}}function C(e,t){if(1&e&&(i.TgZ(0,"option",39),i._uU(1),i.qZA()),2&e){const e=t.$implicit;i.Q6J("value",e),i.xp6(1),i.hij(" ",e," ")}}function A(e,t){if(1&e&&(i.TgZ(0,"option",39),i._uU(1),i.qZA()),2&e){const e=t.$implicit;i.Q6J("value",e.name),i.xp6(1),i.Oqu(e.example)}}function k(e,t){if(1&e&&(i.TgZ(0,"option",39),i._uU(1),i.qZA()),2&e){const e=t.$implicit;i.Q6J("value",e),i.xp6(1),i.Oqu(e)}}function L(e,t){if(1&e&&(i.TgZ(0,"option",39),i._uU(1),i._UZ(2,"system-label",41),i.qZA()),2&e){const e=t.$implicit;i.Q6J("value",e),i.xp6(1),i.hij(" ",e,"")}}function M(e,t){if(1&e&&(i.TgZ(0,"option",42),i._uU(1),i.qZA()),2&e){const e=t.$implicit,s=i.oxw();i.Q6J("value",e)("disabled",s.preferences.calendar_day_end_hour<=e),i.xp6(1),i.hij(" ",e," ")}}function S(e,t){if(1&e&&(i.TgZ(0,"option",42),i._uU(1),i.qZA()),2&e){const e=t.$implicit,s=i.oxw();i.Q6J("value",e)("disabled",s.preferences.calendar_day_start_hour>=e),i.xp6(1),i.hij(" ",e," ")}}function I(e,t){if(1&e&&(i.TgZ(0,"option",39),i._uU(1),i.qZA()),2&e){const e=t.$implicit;i.Q6J("value",e.value),i.xp6(1),i.hij(" ",e.display," ")}}let O=(()=>{class SystemPreferencesPanel{constructor(e,t,s,i,n){this.backend=e,this.view=t,this.toast=s,this.currency=i,this.language=n,this.currencySignificantDigitsList=["1","2","3","4","5","6"],this.thousandDelimiterList=[",","."],this.timeFormatList=[{name:moment().format("HH:mm"),value:"H:i"},{name:moment().format("hh:mma"),value:"h:ia"},{name:moment().format("hh:mmA"),value:"h:iA"},{name:moment().format("hh:mm a"),value:"h:i a"},{name:moment().format("hh:mm A"),value:"h:i A"},{name:moment().format("HH.mm"),value:"H.i"},{name:moment().format("hh.mma"),value:"h.ia"},{name:moment().format("hh.mmA"),value:"h.iA"},{name:moment().format("hh.mm a"),value:"h.i a"},{name:moment().format("hh.mm A"),value:"h.i A"}],this.dateFormatList=[{name:moment().format("YYYY-MM-DD"),value:"Y-m-d"},{name:moment().format("MM-DD-YYYY"),value:"m-d-Y"},{name:moment().format("DD-MM-YYYY"),value:"d-m-Y"},{name:moment().format("Y/MM/DD"),value:"Y/m/d"},{name:moment().format("MM/DD/YYYY"),value:"m/d/Y"},{name:moment().format("DD/MM/YYYY"),value:"d/m/Y"},{name:moment().format("YYYY.MM.DD"),value:"Y.m.d"},{name:moment().format("DD.MM.YYYY"),value:"d.m.Y"},{name:moment().format("MM.DD.YYYY"),value:"m.d.Y"}],this.currencyList=[],this.preferences={},this.weekDayStartList=["Sunday","Monday"],this.weekDaysCountList=[5,6,7],this.dayHoursList=[],this.reminderTimeOptions=this.language.getDisplayOptions("reminder_time_options",!0),this.exportDelimiterList=[",",";"],this.charsetList=["BIG-5","CP1251","CP1252","EUC-CN","EUC-JP","EUC-KR","EUC-TW","ISO-2022-JP","ISO-2022-KR","ISO-8859-1","ISO-8859-2","ISO-8859-3","ISO-8859-4","ISO-8859-5","ISO-8859-6","ISO-8859-7","ISO-8859-8","ISO-8859-9","ISO-8859-10","ISO-8859-13","ISO-8859-14","ISO-8859-15","KOI8-R","KOI8-U","SJIS","UTF-8"],this.formattingOfNumbersList=[{show:"1.000.000,00",num_grp_sep:".",dec_sep:","},{show:"1,000,000.00",num_grp_sep:",",dec_sep:"."}],this.nameFormats=[],this.dateFormat="",this.timeFormat="",this.loadInitialValues()}ngOnChanges(){this.preferences&&(this.setDateFormat(this.preferences.datef),this.setTimeFormat(this.preferences.timef),this.setNameExampleText(this.preferences.default_locale_name_format),this.setNumbersFormatting(this.formattingOfNumbersList.find((e=>e.dec_sep==this.preferences.dec_sep&&e.num_grp_sep==this.preferences.num_grp_sep))))}loadInitialValues(){this.view.isEditable=!0,this.setNameFormats(),this.currencyList=this.currency.getCurrencies();for(let e=0;e<24;e++)this.dayHoursList.push(e)}setNameFormats(){const e={t:"LBL_LOCALE_NAME_EXAMPLE_TITLE",f:"LBL_LOCALE_NAME_EXAMPLE_FIRST",l:"LBL_LOCALE_NAME_EXAMPLE_LAST",s:"LBL_LOCALE_NAME_EXAMPLE_SALUTATION"};this.nameFormats=["s f l","f l","s l","l, s f","l, f","s l, f","l s f","l f s"].map((t=>({name:t,example:t.replace(/t|f|l|s/g,(t=>this.language.getLabel(e[t])))})))}setDateFormat(e){this.preferences.datef=e,this.dateFormat=e?moment().format(e.replace("Y","YYYY").replace("m","MM").replace("d","DD")):""}setTimeFormat(e){this.preferences.timef=e,this.timeFormat=e?moment().format(e.replace("H","HH").replace("h","hh").replace("i","mm")):""}setNumbersFormatting(e){this.numbersFormatting=e,this.preferences.num_grp_sep=e?e.num_grp_sep:null,this.preferences.dec_sep=e?e.dec_sep:null}setNameExampleText(e){if(this.preferences.default_locale_name_format=e,!e||!this.nameFormats)return this.nameExampleText="";this.nameFormats.some((t=>{if(e===t.name)return this.nameExampleText=t.example,!0}))}}return SystemPreferencesPanel.ɵfac=function(e){return new(e||SystemPreferencesPanel)(i.Y36(n.y),i.Y36(l.e),i.Y36(o.A),i.Y36(a.A),i.Y36(d.d))},SystemPreferencesPanel.ɵcmp=i.Xpm({type:SystemPreferencesPanel,selectors:[["system-preferences-panel"]],inputs:{preferences:"preferences"},features:[i.TTD],decls:143,vars:49,consts:[["tabtitle","LBL_LOCALE_PREFERENCES",3,"collapsible"],[1,"slds-grid","slds-grid--align-spread"],["itemlabel","LBL_TIMEZONE",1,"slds-size--1-of-4"],[3,"ngModel","ngModelChange"],["itemlabel","LBL_DISTANCE_UNIT_SYSTEM",1,"slds-size--1-of-4"],[3,"label",4,"ngIf"],[1,"slds-select_container"],[1,"slds-select",3,"ngModel","ngModelChange"],["value","METRIC"],["label","LBL_METRIC"],["value","IMPERIAL"],["label","LBL_IMPERIAL"],["itemlabel","LBL_DATE_FORMAT",1,"slds-size--1-of-4"],[3,"value",4,"ngFor","ngForOf"],["itemlabel","LBL_TIME_FORMAT",1,"slds-size--1-of-4"],["itemlabel","LBL_CURRENCY",1,"slds-size--2-of-5"],[1,"slds-form-element__static"],[4,"ngFor","ngForOf"],["itemlabel","LBL_DECIMAL_DIGITS",1,"slds-size--1-of-5"],["itemlabel","LBL_FORMATTING",1,"slds-size--2-of-5"],[3,"ngValue",4,"ngFor","ngForOf"],["tabtitle","LBL_EXPORT_PREFERENCES",3,"collapsible"],["itemlabel","LBL_EXPORT_DELIMITER",1,"slds-size--1-of-2"],["itemlabel","LBL_EXPORT_CHARSET",1,"slds-size--1-of-2"],["tabtitle","LBL_OTHER_PREFERENCES",3,"collapsible"],["itemlabel","LBL_NAME_FORMAT",1,"slds-size--1-of-2"],["itemlabel","LBL_HELP_ICON",1,"slds-size--1-of-2"],["value","visible"],["label","LBL_VISIBLE"],["value","hidden"],["label","LBL_HIDDEN"],["tabtitle","LBL_CALENDAR_PREFERENCES",3,"collapsible"],["itemlabel","LBL_WEEK_START_DAY",1,"slds-size--1-of-4"],["itemlabel","LBL_WEEK_DAYS_COUNT",1,"slds-size--1-of-4"],["itemlabel","LBL_DAY_START_HOUR",1,"slds-size--1-of-4"],[3,"value","disabled",4,"ngFor","ngForOf"],["itemlabel","LBL_DAY_END_HOUR",1,"slds-size--1-of-4"],["itemlabel","LBL_DEFAULT_REMINDER_TIME",1,"slds-size--1-of-4"],[3,"label"],[3,"value"],[3,"ngValue"],["label","LBL_DAYS"],[3,"value","disabled"]],template:function(e,t){1&e&&(i.TgZ(0,"div")(1,"system-collapsable-tab",0)(2,"div",1)(3,"system-preferences-panel-item",2)(4,"system-preferences-panel-item-display"),i._uU(5),i.qZA(),i.TgZ(6,"system-preferences-panel-item-edit")(7,"system-input-timezone",3),i.NdJ("ngModelChange",(function(e){return t.preferences.timezone=e})),i.qZA()()(),i.TgZ(8,"system-preferences-panel-item",4)(9,"system-preferences-panel-item-display"),i.YNc(10,b,1,1,"system-label",5),i.qZA(),i.TgZ(11,"system-preferences-panel-item-edit")(12,"div",6)(13,"select",7),i.NdJ("ngModelChange",(function(e){return t.preferences.distance_unit_system=e})),i._UZ(14,"option"),i.TgZ(15,"option",8),i._UZ(16,"system-label",9),i.qZA(),i.TgZ(17,"option",10),i._UZ(18,"system-label",11),i.qZA()()()()(),i.TgZ(19,"system-preferences-panel-item",12)(20,"system-preferences-panel-item-display"),i._uU(21),i.qZA(),i.TgZ(22,"system-preferences-panel-item-edit")(23,"div",6)(24,"select",7),i.NdJ("ngModelChange",(function(e){return t.setDateFormat(e)})),i._UZ(25,"option"),i.YNc(26,_,2,2,"option",13),i.qZA()()()(),i.TgZ(27,"system-preferences-panel-item",14)(28,"system-preferences-panel-item-display"),i._uU(29),i.qZA(),i.TgZ(30,"system-preferences-panel-item-edit")(31,"div",6)(32,"select",7),i.NdJ("ngModelChange",(function(e){return t.setTimeFormat(e)})),i._UZ(33,"option"),i.YNc(34,y,2,2,"option",13),i.qZA()()()()(),i.TgZ(35,"div",1)(36,"system-preferences-panel-item",15)(37,"system-preferences-panel-item-display")(38,"span",16),i.YNc(39,v,2,1,"ng-container",17),i.qZA()(),i.TgZ(40,"system-preferences-panel-item-edit")(41,"div",6)(42,"select",7),i.NdJ("ngModelChange",(function(e){return t.preferences.currency=e})),i._UZ(43,"option"),i.YNc(44,x,2,2,"option",13),i.qZA()()()(),i.TgZ(45,"system-preferences-panel-item",18)(46,"system-preferences-panel-item-display"),i._uU(47),i.qZA(),i.TgZ(48,"system-preferences-panel-item-edit")(49,"div",6)(50,"select",7),i.NdJ("ngModelChange",(function(e){return t.preferences.default_currency_significant_digits=e})),i._UZ(51,"option"),i.YNc(52,Z,2,2,"option",13),i.qZA()()()(),i.TgZ(53,"system-preferences-panel-item",19)(54,"system-preferences-panel-item-display"),i._uU(55),i.qZA(),i.TgZ(56,"system-preferences-panel-item-edit")(57,"div",6)(58,"select",7),i.NdJ("ngModelChange",(function(e){return t.setNumbersFormatting(e)})),i._UZ(59,"option"),i.YNc(60,w,2,2,"option",20),i.qZA()()()()()(),i.TgZ(61,"system-collapsable-tab",21)(62,"div",1)(63,"system-preferences-panel-item",22)(64,"system-preferences-panel-item-display"),i._uU(65),i.qZA(),i.TgZ(66,"system-preferences-panel-item-edit")(67,"div",6)(68,"select",7),i.NdJ("ngModelChange",(function(e){return t.preferences.export_delimiter=e})),i._UZ(69,"option"),i.YNc(70,T,2,2,"option",13),i.qZA()()()(),i.TgZ(71,"system-preferences-panel-item",23)(72,"system-preferences-panel-item-display"),i._uU(73),i.qZA(),i.TgZ(74,"system-preferences-panel-item-edit")(75,"div",6)(76,"select",7),i.NdJ("ngModelChange",(function(e){return t.preferences.default_export_charset=e})),i._UZ(77,"option"),i.YNc(78,C,2,2,"option",13),i.qZA()()()()()(),i.TgZ(79,"system-collapsable-tab",24)(80,"div",1)(81,"system-preferences-panel-item",25)(82,"system-preferences-panel-item-display"),i._uU(83),i.qZA(),i.TgZ(84,"system-preferences-panel-item-edit")(85,"div",6)(86,"select",7),i.NdJ("ngModelChange",(function(e){return t.setNameExampleText(e)})),i._UZ(87,"option"),i.YNc(88,A,2,2,"option",13),i.qZA()()()(),i.TgZ(89,"system-preferences-panel-item",26)(90,"system-preferences-panel-item-display"),i._uU(91),i.qZA(),i.TgZ(92,"system-preferences-panel-item-edit")(93,"div",6)(94,"select",7),i.NdJ("ngModelChange",(function(e){return t.preferences.help_icon=e})),i._UZ(95,"option"),i.TgZ(96,"option",27),i._UZ(97,"system-label",28),i.qZA(),i.TgZ(98,"option",29),i._UZ(99,"system-label",30),i.qZA()()()()()()(),i.TgZ(100,"system-collapsable-tab",31)(101,"div",1)(102,"system-preferences-panel-item",32)(103,"system-preferences-panel-item-display"),i._uU(104),i.qZA(),i.TgZ(105,"system-preferences-panel-item-edit")(106,"div",6)(107,"select",7),i.NdJ("ngModelChange",(function(e){return t.preferences.week_day_start=e})),i._UZ(108,"option"),i.YNc(109,k,2,2,"option",13),i.qZA()()()(),i.TgZ(110,"system-preferences-panel-item",33)(111,"system-preferences-panel-item-display"),i._uU(112),i.qZA(),i.TgZ(113,"system-preferences-panel-item-edit")(114,"div",6)(115,"select",7),i.NdJ("ngModelChange",(function(e){return t.preferences.week_days_count=e})),i._UZ(116,"option"),i.YNc(117,L,3,2,"option",13),i.qZA()()()(),i.TgZ(118,"system-preferences-panel-item",34)(119,"system-preferences-panel-item-display"),i._uU(120),i.qZA(),i.TgZ(121,"system-preferences-panel-item-edit")(122,"div",6)(123,"select",7),i.NdJ("ngModelChange",(function(e){return t.preferences.calendar_day_start_hour=e})),i._UZ(124,"option"),i.YNc(125,M,2,3,"option",35),i.qZA()()()(),i.TgZ(126,"system-preferences-panel-item",36)(127,"system-preferences-panel-item-display"),i._uU(128),i.qZA(),i.TgZ(129,"system-preferences-panel-item-edit")(130,"div",6)(131,"select",7),i.NdJ("ngModelChange",(function(e){return t.preferences.calendar_day_end_hour=e})),i._UZ(132,"option"),i.YNc(133,S,2,3,"option",35),i.qZA()()()()(),i.TgZ(134,"div",1)(135,"system-preferences-panel-item",37)(136,"system-preferences-panel-item-display"),i._uU(137),i.qZA(),i.TgZ(138,"system-preferences-panel-item-edit")(139,"div",6)(140,"select",7),i.NdJ("ngModelChange",(function(e){return t.preferences.reminder_time=e})),i._UZ(141,"option"),i.YNc(142,I,2,2,"option",13),i.qZA()()()()()()()),2&e&&(i.xp6(1),i.Q6J("collapsible",!1),i.xp6(4),i.hij(" ",t.preferences.timezone," "),i.xp6(2),i.Q6J("ngModel",t.preferences.timezone),i.xp6(3),i.Q6J("ngIf",!!t.preferences.distance_unit_system),i.xp6(3),i.Q6J("ngModel",t.preferences.distance_unit_system),i.xp6(8),i.hij(" ",t.dateFormat," "),i.xp6(3),i.Q6J("ngModel",t.preferences.datef),i.xp6(2),i.Q6J("ngForOf",t.dateFormatList),i.xp6(3),i.hij(" ",t.timeFormat," "),i.xp6(3),i.Q6J("ngModel",t.preferences.timef),i.xp6(2),i.Q6J("ngForOf",t.timeFormatList),i.xp6(5),i.Q6J("ngForOf",t.currencyList),i.xp6(3),i.Q6J("ngModel",t.preferences.currency),i.xp6(2),i.Q6J("ngForOf",t.currencyList),i.xp6(3),i.hij(" ",t.preferences.default_currency_significant_digits," "),i.xp6(3),i.Q6J("ngModel",t.preferences.default_currency_significant_digits),i.xp6(2),i.Q6J("ngForOf",t.currencySignificantDigitsList),i.xp6(3),i.hij(" ",null==t.numbersFormatting?null:t.numbersFormatting.show," "),i.xp6(3),i.Q6J("ngModel",t.numbersFormatting),i.xp6(2),i.Q6J("ngForOf",t.formattingOfNumbersList),i.xp6(1),i.Q6J("collapsible",!1),i.xp6(4),i.hij(" ",t.preferences.export_delimiter," "),i.xp6(3),i.Q6J("ngModel",t.preferences.export_delimiter),i.xp6(2),i.Q6J("ngForOf",t.exportDelimiterList),i.xp6(3),i.hij(" ",t.preferences.default_export_charset," "),i.xp6(3),i.Q6J("ngModel",t.preferences.default_export_charset),i.xp6(2),i.Q6J("ngForOf",t.charsetList),i.xp6(1),i.Q6J("collapsible",!1),i.xp6(4),i.hij(" ",t.nameExampleText," "),i.xp6(3),i.Q6J("ngModel",t.preferences.default_locale_name_format),i.xp6(2),i.Q6J("ngForOf",t.nameFormats),i.xp6(3),i.hij(" ",t.preferences.help_icon," "),i.xp6(3),i.Q6J("ngModel",t.preferences.help_icon),i.xp6(6),i.Q6J("collapsible",!1),i.xp6(4),i.hij(" ",t.preferences.week_day_start," "),i.xp6(3),i.Q6J("ngModel",t.preferences.week_day_start),i.xp6(2),i.Q6J("ngForOf",t.weekDayStartList),i.xp6(3),i.hij(" ",t.preferences.week_days_count," "),i.xp6(3),i.Q6J("ngModel",t.preferences.week_days_count),i.xp6(2),i.Q6J("ngForOf",t.weekDaysCountList),i.xp6(3),i.Oqu(t.preferences.calendar_day_start_hour),i.xp6(3),i.Q6J("ngModel",t.preferences.calendar_day_start_hour),i.xp6(2),i.Q6J("ngForOf",t.dayHoursList),i.xp6(3),i.Oqu(t.preferences.calendar_day_end_hour),i.xp6(3),i.Q6J("ngModel",t.preferences.calendar_day_end_hour),i.xp6(2),i.Q6J("ngForOf",t.dayHoursList),i.xp6(4),i.Oqu(t.preferences.week_day_start),i.xp6(3),i.Q6J("ngModel",t.preferences.reminder_time),i.xp6(2),i.Q6J("ngForOf",t.reminderTimeOptions))},dependencies:[r.sg,r.O5,c.YN,c.Kr,c.EJ,c.JJ,c.On,u.z,m._,h.R,g.w,p.f,f.z],encapsulation:2}),SystemPreferencesPanel})()},4211:(e,t,s)=>{"use strict";s.d(t,{w:()=>m});var i=s(1571),n=s(2294),l=s(5329),o=s(6895),a=s(3463);function d(e,t){1&e&&i.Hsn(0,0,["*ngIf","!view.isEditMode()"])}function r(e,t){1&e&&i.Hsn(0,1,["*ngIf","view.isEditMode()"])}const c=[[["system-preferences-panel-item-display"]],[["system-preferences-panel-item-edit"]]],u=["system-preferences-panel-item-display","system-preferences-panel-item-edit"];let m=(()=>{class SystemPreferencesPanelItem{constructor(e,t){this.view=e,this.language=t,this.itemlabel=""}}return SystemPreferencesPanelItem.ɵfac=function(e){return new(e||SystemPreferencesPanelItem)(i.Y36(n.e),i.Y36(l.d))},SystemPreferencesPanelItem.ɵcmp=i.Xpm({type:SystemPreferencesPanelItem,selectors:[["system-preferences-panel-item"]],inputs:{itemlabel:"itemlabel"},ngContentSelectors:u,decls:5,vars:3,consts:[[1,"slds-form-element","slds-p-around--x-small"],[1,"slds-form-element__label"],[3,"label"],[4,"ngIf"]],template:function(e,t){1&e&&(i.F$t(c),i.TgZ(0,"div",0)(1,"label",1),i._UZ(2,"system-label",2),i.qZA(),i.YNc(3,d,1,0,"ng-content",3),i.YNc(4,r,1,0,"ng-content",3),i.qZA()),2&e&&(i.xp6(2),i.Q6J("label",t.itemlabel),i.xp6(1),i.Q6J("ngIf",!t.view.isEditMode()),i.xp6(1),i.Q6J("ngIf",t.view.isEditMode()))},dependencies:[o.O5,a._],encapsulation:2}),SystemPreferencesPanelItem})()},6268:(e,t,s)=>{"use strict";s.d(t,{f:()=>a});var i=s(1571),n=s(2294),l=s(2656);const o=["*"];let a=(()=>{class SystemPreferencesPanelItemDisplay{constructor(e){this.view=e}}return SystemPreferencesPanelItemDisplay.ɵfac=function(e){return new(e||SystemPreferencesPanelItemDisplay)(i.Y36(n.e))},SystemPreferencesPanelItemDisplay.ɵcmp=i.Xpm({type:SystemPreferencesPanelItemDisplay,selectors:[["system-preferences-panel-item-display"]],ngContentSelectors:o,decls:5,vars:1,consts:[[1,"slds-form-element__control","slds-has-divider--bottom","slds-grid","slds-p-vertical--x-small",3,"dblclick"],[1,"slds-form-element__static"],[1,"slds-button","slds-button--icon","slds-m-left--xx-small",2,"float","right",3,"click"],[3,"icon"]],template:function(e,t){1&e&&(i.F$t(),i.TgZ(0,"div",0),i.NdJ("dblclick",(function(){return t.view.setEditMode()})),i.TgZ(1,"span",1),i.Hsn(2),i.qZA(),i.TgZ(3,"button",2),i.NdJ("click",(function(){return t.view.setEditMode()})),i._UZ(4,"system-button-icon",3),i.qZA()()),2&e&&(i.xp6(4),i.Q6J("icon","edit"))},dependencies:[l.J],styles:[".slds-button--icon[_ngcontent-%COMP%]{color:#eee}.slds-button--icon[_ngcontent-%COMP%]:hover{color:#5b5b5b}"]}),SystemPreferencesPanelItemDisplay})()},4845:(e,t,s)=>{"use strict";s.d(t,{z:()=>l});var i=s(1571);const n=["*"];let l=(()=>{class SystemPreferencesPanelItemEdit{}return SystemPreferencesPanelItemEdit.ɵfac=function(e){return new(e||SystemPreferencesPanelItemEdit)},SystemPreferencesPanelItemEdit.ɵcmp=i.Xpm({type:SystemPreferencesPanelItemEdit,selectors:[["system-preferences-panel-item-edit"]],ngContentSelectors:n,decls:2,vars:0,consts:[[1,"slds-form-element__control"]],template:function(e,t){1&e&&(i.F$t(),i.TgZ(0,"div",0),i.Hsn(1),i.qZA())},encapsulation:2}),SystemPreferencesPanelItemEdit})()},8026:(e,t,s)=>{"use strict";s.d(t,{J:()=>c});var i=s(1571),n=s(5329),l=s(2422),o=s(6895);function a(e,t){if(1&e&&(i.TgZ(0,"div",3)(1,"span",4),i.Hsn(2),i.qZA(),i.TgZ(3,"strong",5),i._uU(4),i.qZA()()),2&e){const e=i.oxw();i.xp6(4),i.AsE("",e.progressText," ",e.lang.getLabel("LBL_COMPLETED"),"")}}const d=function(e,t){return{"width.%":e,background:t}},r=["*"];let c=(()=>{class SystemProgressBar{constructor(e,t){this.lang=e,this.userprefs=t,this.hideText=!1,this.progress=0,this.decimals=2,this.size="medium",this.total=null}get displayPercents(){return null===this.total}get _progress(){return void 0===this.progress?0:this.progress}get _total(){return void 0===this.total?0:this.total}get progressText(){let e;return e=this.displayPercents?this._progress.toFixed(this.decimals)+" %":this._progress.toFixed(this.decimals)+"/"+this._total.toFixed(this.decimals),e.split(".").join(this.userprefs.toUse.dec_sep)}get progressWidth(){return this.displayPercents?this._progress>100?100:this._progress:(this._progress>this._total?this._total:this._progress)/this._total*100}get sizeClass(){return"slds-progress-bar_"+this.size}}return SystemProgressBar.ɵfac=function(e){return new(e||SystemProgressBar)(i.Y36(n.d),i.Y36(l.z))},SystemProgressBar.ɵcmp=i.Xpm({type:SystemProgressBar,selectors:[["system-progress-bar"]],hostAttrs:[2,"display","block"],inputs:{hideText:"hideText",color:"color",progress:"progress",decimals:"decimals",size:"size",total:"total"},ngContentSelectors:r,decls:4,vars:6,consts:[["class","slds-grid slds-grid_align-spread slds-p-bottom_x-small",4,"ngIf"],[1,"slds-progress-bar","slds-progress-bar_circular",3,"ngClass"],[1,"slds-progress-bar__value",3,"ngStyle"],[1,"slds-grid","slds-grid_align-spread","slds-p-bottom_x-small"],[1,"slds-m-left--xx-small"],[1,"slds-m-right--x-small"]],template:function(e,t){1&e&&(i.F$t(),i.TgZ(0,"div"),i.YNc(1,a,5,2,"div",0),i.TgZ(2,"div",1),i._UZ(3,"span",2),i.qZA()()),2&e&&(i.xp6(1),i.Q6J("ngIf",!t.hideText),i.xp6(1),i.Q6J("ngClass",t.sizeClass),i.xp6(1),i.Q6J("ngStyle",i.WLB(3,d,t.progressWidth,t.color)))},dependencies:[o.mk,o.O5,o.PC],encapsulation:2}),SystemProgressBar})()},5718:(e,t,s)=>{"use strict";s.d(t,{s:()=>c});var i=s(1571),n=s(6895),l=s(2656);function o(e,t){1&e&&i._UZ(0,"system-button-icon",8),2&e&&i.Q6J("icon","success")}const a=function(e){return{"slds-button--icon slds-progress__marker--icon":e}};function d(e,t){if(1&e&&(i.TgZ(0,"li",5)(1,"button",6),i.YNc(2,o,1,1,"system-button-icon",7),i.qZA()()),2&e){const e=t.$implicit,s=i.oxw();i.Q6J("ngClass",s.getStepClass(e)),i.xp6(1),i.Q6J("ngClass",i.VKq(3,a,s.getStepComplete(e))),i.xp6(1),i.Q6J("ngIf",s.getStepComplete(e))}}const r=function(e){return{"slds-progress--shade":e}};let c=(()=>{class SystemProgressList{constructor(){this.step=0,this.steps=[],this._shade=!1}set shade(e){this._shade=!1!==e}getStepClass(e){let t=this.steps.indexOf(e);return t==this.step?"slds-is-active":t<this.step?"slds-is-completed":void 0}getStepComplete(e){return this.steps.indexOf(e)<this.step}get progressBarWidth(){return{width:this.step/(this.steps.length-1)*100+"%"}}}return SystemProgressList.ɵfac=function(e){return new(e||SystemProgressList)},SystemProgressList.ɵcmp=i.Xpm({type:SystemProgressList,selectors:[["system-progress-list"]],inputs:{step:"step",steps:"steps",shade:["system-progress-list-shade","shade"]},decls:5,vars:5,consts:[[1,"slds-progress",3,"ngClass"],[1,"slds-progress__list"],["class","slds-progress__item",3,"ngClass",4,"ngFor","ngForOf"],["role","progressbar",1,"slds-progress-bar","slds-progress-bar_x-small"],[1,"slds-progress-bar__value",3,"ngStyle"],[1,"slds-progress__item",3,"ngClass"],[1,"slds-button","slds-progress__marker",3,"ngClass"],[3,"icon",4,"ngIf"],[3,"icon"]],template:function(e,t){1&e&&(i.TgZ(0,"div",0)(1,"ol",1),i.YNc(2,d,3,5,"li",2),i.qZA(),i.TgZ(3,"div",3),i._UZ(4,"div",4),i.qZA()()),2&e&&(i.Q6J("ngClass",i.VKq(3,r,t._shade)),i.xp6(2),i.Q6J("ngForOf",t.steps),i.xp6(2),i.Q6J("ngStyle",t.progressBarWidth))},dependencies:[n.mk,n.sg,n.O5,n.PC,l.J],encapsulation:2}),SystemProgressList})()},1574:(e,t,s)=>{"use strict";s.d(t,{z:()=>J});var i=s(1571),n=s(433),l=s(6895),o=s(4817),a=s(5698),d=s(5179),r=s(4044),c=s(2067),u=s(4154),m=s(5329),h=s(1481),g=s(5710),p=s(3441),f=s(2656),b=s(121);const _=["ckEditor"];function y(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"ul",9)(1,"li")(2,"button",30),i.NdJ("click",(function(){i.CHM(e);const t=i.oxw(2);return i.KtG(t.executeCommand("undo"))})),i._UZ(3,"system-button-icon",31),i.TgZ(4,"span",32),i._uU(5,"undo"),i.qZA()()(),i.TgZ(6,"li")(7,"button",25),i.NdJ("click",(function(){i.CHM(e);const t=i.oxw(2);return i.KtG(t.executeCommand("redo"))})),i._UZ(8,"system-button-icon",33),i.TgZ(9,"span",32),i._uU(10,"redo"),i.qZA()()()()}if(2&e){const e=i.oxw(2);i.xp6(2),i.Q6J("title",e.language.getLabel("LBL_UNDO")),i.xp6(5),i.Q6J("title",e.language.getLabel("LBL_REDO"))}}function v(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"div",34)(1,"div",35)(2,"div",36)(3,"div",37)(4,"div",38)(5,"select",39),i.NdJ("ngModelChange",(function(t){i.CHM(e);const s=i.oxw(2);return i.KtG(s.block=t)}))("change",(function(){i.CHM(e);const t=i.oxw(2);return i.KtG(t.heading(t.block))})),i.TgZ(6,"option",40)(7,"h1"),i._uU(8,"Heading 1"),i.qZA()(),i.TgZ(9,"option",41)(10,"h2"),i._uU(11,"Heading 2"),i.qZA()(),i.TgZ(12,"option",42)(13,"h3"),i._uU(14,"Heading 3"),i.qZA()(),i.TgZ(15,"option",43),i._uU(16,"Paragraph"),i.qZA()()()()()()()}if(2&e){const e=i.oxw(2);i.xp6(5),i.Q6J("ngModel",e.block)}}const x=function(e){return{selected:e}};function Z(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"li",58)(1,"span",59),i.NdJ("click",(function(){const t=i.CHM(e).$implicit,s=i.oxw().$implicit,n=i.oxw(3);return i.KtG(n.selectTable(s,t))})),i._UZ(2,"span",60),i.qZA()()}if(2&e){const e=t.$implicit,s=i.oxw().$implicit,n=i.oxw(3);i.xp6(1),i.Q6J("ngClass",i.VKq(1,x,s<=n.selectedRow&&e<=n.selectedColumn))}}const w=function(){return[1,2,3,4,5,6,7,8,9,10]};function T(e,t){1&e&&(i.TgZ(0,"li")(1,"ul",56),i.YNc(2,Z,3,3,"li",57),i.qZA()()),2&e&&(i.xp6(2),i.Q6J("ngForOf",i.DdM(1,w)))}function C(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"div")(1,"section",44)(2,"div",45)(3,"div",46)(4,"div",47)(5,"div",48),i._uU(6),i.qZA(),i.TgZ(7,"div",49)(8,"ul"),i.YNc(9,T,3,2,"li",50),i.qZA()(),i._UZ(10,"div",51),i.qZA()()(),i.TgZ(11,"footer",52)(12,"div",53)(13,"button",54),i.NdJ("click",(function(){i.CHM(e);const t=i.oxw(2);return i.KtG(t.cancelTable())})),i._uU(14,"Cancel"),i.qZA(),i.TgZ(15,"button",55),i.NdJ("click",(function(){i.CHM(e);const t=i.oxw(2);return i.KtG(t.insertTable())})),i._uU(16,"Done"),i.qZA()()()()()}if(2&e){const e=i.oxw(2);i.xp6(6),i.AsE("",e.selectedRow," × ",e.selectedColumn,""),i.xp6(3),i.Q6J("ngForOf",i.DdM(3,w))}}function A(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"li")(1,"button",25),i.NdJ("click",(function(){i.CHM(e);const t=i.oxw(3);return i.KtG(t.openMediaFilePicker())})),i._UZ(2,"system-button-icon",65),i.qZA()()}if(2&e){const e=i.oxw(3);i.xp6(1),i.Q6J("title",e.language.getLabel("LBL_NEW_IMAGE"))}}function k(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"ul",9)(1,"li")(2,"button",25),i.NdJ("click",(function(){i.CHM(e);const t=i.oxw(2);return i.KtG(t.insertImage())})),i._UZ(3,"system-button-icon",61),i.qZA()(),i.YNc(4,A,3,1,"li",18),i.TgZ(5,"li")(6,"button",62),i.NdJ("click",(function(){i.CHM(e);const t=i.oxw(2);return i.KtG(t.addVideo())})),i._UZ(7,"system-button-icon",63),i.qZA()(),i.TgZ(8,"li")(9,"button",25),i.NdJ("click",(function(){i.CHM(e);const t=i.oxw(2);return i.KtG(t.addCodeSnippet())})),i._UZ(10,"system-button-icon",64),i.qZA()()()}if(2&e){const e=i.oxw(2);i.xp6(2),i.Q6J("title",e.language.getLabel("LBL_NEW_IMAGE")),i.xp6(2),i.Q6J("ngIf",e.useMedialFile),i.xp6(2),i.Q6J("title",e.language.getLabel("LBL_ADD_VIDEO")),i.xp6(3),i.Q6J("title",e.language.getLabel("LBL_ADD_CODE_SNIPPET"))}}function L(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"ul",9)(1,"li")(2,"button",25),i.NdJ("click",(function(){i.CHM(e);const t=i.oxw(2);return i.KtG(t.toggleFullscreen())})),i._UZ(3,"system-button-icon",66),i.qZA()()()}if(2&e){const e=i.oxw(2);i.xp6(2),i.Q6J("title",e.language.getLabel("LBL_EXPAND")),i.xp6(1),i.Q6J("icon",e.expandIcon)}}const M=function(e){return{"slds-active":e}};function S(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"div",6),i.YNc(1,y,11,2,"ul",7),i.YNc(2,v,17,1,"div",8),i.TgZ(3,"ul",9)(4,"li")(5,"button",10),i.NdJ("click",(function(){i.CHM(e);const t=i.oxw();return i.KtG(t.executeCommand("bold"))})),i._UZ(6,"system-button-icon",11),i.qZA()(),i.TgZ(7,"li")(8,"button",10),i.NdJ("click",(function(){i.CHM(e);const t=i.oxw();return i.KtG(t.executeCommand("italic"))})),i._UZ(9,"system-button-icon",12),i.qZA()(),i.TgZ(10,"li")(11,"button",10),i.NdJ("click",(function(){i.CHM(e);const t=i.oxw();return i.KtG(t.executeCommand("underline"))})),i._UZ(12,"system-button-icon",13),i.qZA()(),i.TgZ(13,"li")(14,"button",10),i.NdJ("click",(function(){i.CHM(e);const t=i.oxw();return i.KtG(t.executeCommand("strikethrough"))})),i._UZ(15,"system-button-icon",14),i.qZA()()(),i.TgZ(16,"ul",9)(17,"li")(18,"button",10),i.NdJ("click",(function(){i.CHM(e);const t=i.oxw();return i.KtG(t.executeCommand("bulletedList"))})),i._UZ(19,"system-button-icon",15),i.qZA()(),i.TgZ(20,"li")(21,"button",10),i.NdJ("click",(function(){i.CHM(e);const t=i.oxw();return i.KtG(t.executeCommand("numberedList"))})),i._UZ(22,"system-button-icon",16),i.qZA()(),i.TgZ(23,"li")(24,"button",10),i.NdJ("click",(function(){i.CHM(e);const t=i.oxw();return i.KtG(t.openTable())})),i._UZ(25,"system-button-icon",17),i.qZA(),i.YNc(26,C,17,4,"div",18),i.qZA()(),i.TgZ(27,"ul",9)(28,"li")(29,"button",10),i.NdJ("click",(function(){i.CHM(e);const t=i.oxw();return i.KtG(t.executeCommand("indent"))})),i._UZ(30,"system-button-icon",19),i.qZA()(),i.TgZ(31,"li")(32,"button",10),i.NdJ("click",(function(){i.CHM(e);const t=i.oxw();return i.KtG(t.executeCommand("outdent"))})),i._UZ(33,"system-button-icon",20),i.qZA()()(),i.TgZ(34,"ul",9)(35,"li")(36,"button",10),i.NdJ("click",(function(){i.CHM(e);const t=i.oxw();return i.KtG(t.alignment("left"))})),i._UZ(37,"system-button-icon",21),i.qZA()(),i.TgZ(38,"li")(39,"button",10),i.NdJ("click",(function(){i.CHM(e);const t=i.oxw();return i.KtG(t.alignment("center"))})),i._UZ(40,"system-button-icon",22),i.qZA()(),i.TgZ(41,"li")(42,"button",10),i.NdJ("click",(function(){i.CHM(e);const t=i.oxw();return i.KtG(t.alignment("right"))})),i._UZ(43,"system-button-icon",23),i.qZA()(),i.TgZ(44,"li")(45,"button",10),i.NdJ("click",(function(){i.CHM(e);const t=i.oxw();return i.KtG(t.alignment("justify"))})),i._UZ(46,"system-button-icon",24),i.qZA()()(),i.TgZ(47,"ul",9)(48,"li")(49,"button",25),i.NdJ("click",(function(){i.CHM(e);const t=i.oxw();return i.KtG(t.insertLink())})),i._UZ(50,"system-button-icon",26),i.qZA()(),i.TgZ(51,"li")(52,"button",25),i.NdJ("click",(function(){i.CHM(e);const t=i.oxw();return i.KtG(t.executeCommand("unlink"))})),i._UZ(53,"system-button-icon",27),i.qZA()()(),i.YNc(54,k,11,4,"ul",7),i.TgZ(55,"ul",9)(56,"li")(57,"button",25),i.NdJ("click",(function(){i.CHM(e);const t=i.oxw();return i.KtG(t.executeCommand("removeFormat"))})),i._UZ(58,"system-button-icon",28),i.qZA()()(),i.YNc(59,L,4,2,"ul",7),i.TgZ(60,"ul",29),i.Hsn(61),i.qZA()()}if(2&e){const e=i.oxw();i.xp6(1),i.Q6J("ngIf",e.extendedmode),i.xp6(1),i.Q6J("ngIf",e.extendedmode),i.xp6(3),i.Q6J("title",e.language.getLabel("LBL_BOLD"))("ngClass",i.VKq(34,M,e.commandIsActive("bold"))),i.xp6(3),i.Q6J("title",e.language.getLabel("LBL_ITALIC"))("ngClass",i.VKq(36,M,e.commandIsActive("italic"))),i.xp6(3),i.Q6J("title",e.language.getLabel("LBL_UNDERLINE"))("ngClass",i.VKq(38,M,e.commandIsActive("underline"))),i.xp6(3),i.Q6J("title",e.language.getLabel("LBL_STRIKETHROUGH"))("ngClass",i.VKq(40,M,e.commandIsActive("strikethrough"))),i.xp6(4),i.Q6J("title",e.language.getLabel("LBL_BULLETED_LIST"))("ngClass",i.VKq(42,M,e.commandIsActive("bulletedList"))),i.xp6(3),i.Q6J("title",e.language.getLabel("LBL_NUMBERED_LIST"))("ngClass",i.VKq(44,M,e.commandIsActive("numberedList"))),i.xp6(3),i.Q6J("title",e.language.getLabel("LBL_TABLE"))("ngClass",i.VKq(46,M,e.commandIsActive("insertTable"))),i.xp6(2),i.Q6J("ngIf",e.isShow),i.xp6(3),i.Q6J("title",e.language.getLabel("LBL_TEXT_INDENT"))("ngClass",i.VKq(48,M,e.commandIsActive("indentBlock"))),i.xp6(3),i.Q6J("title",e.language.getLabel("LBL_TEXT_OUTDENT"))("ngClass",i.VKq(50,M,e.commandIsActive("outdentBlock"))),i.xp6(4),i.Q6J("title",e.language.getLabel("LBL_LEFT_ALIGN"))("ngClass",i.VKq(52,M,e.commandIsActive("justifyLeft"))),i.xp6(3),i.Q6J("title",e.language.getLabel("LBL_CENTER_ALIGN"))("ngClass",i.VKq(54,M,e.commandIsActive("justifyCenter"))),i.xp6(3),i.Q6J("title",e.language.getLabel("LBL_RIGHT_ALIGN"))("ngClass",i.VKq(56,M,e.commandIsActive("justifyRight"))),i.xp6(3),i.Q6J("title",e.language.getLabel("LBL_ALIGN_TEXT"))("ngClass",i.VKq(58,M,e.commandIsActive("justifyFull"))),i.xp6(4),i.Q6J("title",e.language.getLabel("LBL_LINK")),i.xp6(3),i.Q6J("title",e.language.getLabel("LBL_REMOVE_LINK")),i.xp6(2),i.Q6J("ngIf",e.extendedmode),i.xp6(3),i.Q6J("title",e.language.getLabel("LBL_REMOVE_FORMATTING")),i.xp6(2),i.Q6J("ngIf",e.extendedmode)}}function I(e,t){if(1&e&&i._UZ(0,"link",67),2&e){const e=i.oxw();i.Q6J("href",e.cssContent,i.uOi)}}const O=["*"];let J=(()=>{class SystemRichTextEditor{constructor(e,t,s,n,l,o,a,d,r,c,u,m,h){this.modal=e,this.renderer=t,this.libLoader=s,this.metadata=n,this.editorService=l,this._document=o,this.elementRef=a,this.language=d,this.zone=r,this.sanitizer=c,this.viewContainerRef=u,this.model=m,this.helper=h,this.extendedmode=!0,this.readOnly=!1,this.useMedialFile=!1,this._html="",this.isActive=!1,this.isShow=!1,this.modalOpen=!1,this.isExpanded=!1,this.block="default",this.fontName="Tilium Web",this.fontSize="5",this.tagMap={BLOCKQUOTE:"indent",A:"link"},this.save$=new i.vpe,this.select=["H1","H2","H3","H4","H5","H6","P","PRE","DIV"]}get useTemplateVariableHelper(){return"OutputTemplates"===this.model?.module||"EmailTemplates"===this.model?.module||"CampaignTasks"===this.model?.module}get expandIcon(){return this.isExpanded?"contract_alt":"expand_alt"}get innerHeight(){return this.innerheight?this.innerheight:"250"}get richTextStyle(){return this.isExpanded?{height:"100vh",resize:"none",position:"fixed"}:{height:+this.innerHeight+(this.readOnly?0:50)+"px"}}ngOnInit(){this.libLoader.loadLib("ckeditor").subscribe((e=>{this.zone.runOutsideAngular((()=>{CKSource.Editor.create(this.ckEditor.element.nativeElement,{toolbar:[],htmlSupport:{allow:this.generateHtmlTagsAllowAttributes(["div","span","table","p","h1","h2","h3","h4","input","fieldset","button","label","textarea","select","option","optgroup"])},autosave:{save:e=>this.onChange(e.getData())}}).then((e=>{this.editor=e,this.readOnly&&this.editor.enableReadOnlyMode("efsjeflksjefloikjse"),this.editor.editing.view.change((e=>{e.setStyle("height","100%",this.editor.editing.view.document.getRoot())})),this.editor.setData(this._html)}))}))})),this.handleKeyboardShortcuts()}generateHtmlTagsAllowAttributes(e){return e.map((e=>({name:e,attributes:{"data-spicefor":!0,"data-spiceif":!0,"data-spicefor-first":!0,"data-spicefor-last":!0,"data-spicetemplate":!0,class:!0,style:!0,value:!0,type:!0,id:!0,name:!0,for:!0,checked:!0,selected:!0,size:!0,autocomplete:!0,autofocus:!0,placeholder:!0,max:!0,maxlength:!0,min:!0,minlength:!0,multiple:!0,required:!0,disabled:!0,form:!0,step:!0,readonly:!0,cols:!0,rows:!0,wrap:!0,label:!0}})))}ngOnDestroy(){this.clickListener&&this.clickListener(),this.keydownListener&&this.keydownListener()}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}writeValue(e){this._html=e||"",this.editor&&this.editor.setData(e)}executeCommand(e){this.isActive&&e&&this.editor.execute(e)}toggleFullscreen(){this.isExpanded=!this.isExpanded}heading(e){this.editor.execute("heading",{value:e})}openTable(){this.isShow=!this.isShow,this.selectedColumn=this.selectedRow=0}selectTable(e,t){this.selectedColumn=t,this.selectedRow=e}insertTable(){this.editor.execute("insertTable",{rows:this.selectedRow,columns:this.selectedColumn}),this.isShow=!1}cancelTable(){this.isShow=!1}alignment(e){this.editor.execute("alignment",{value:e})}onEditorClick(e){this.isActive||(this.isActive=!0,this.clickListener=this.renderer.listen("document","click",(e=>this.onDocumentClick(e)))),e.stopPropagation()}onDocumentClick(e){this.modalOpen||this.elementRef.nativeElement.contains(e.target)||(this.isActive=!1,this.clickListener())}exec(){let e;window.getSelection&&(e=window.getSelection());let t=e.focusNode;const s=[];for(;t&&"editor"!==t.id;)s.unshift(t),t=t.parentNode;this.triggerBlocks(s)}insertImage(){this.modal.input(this.language.getLabel("LBL_IMAGE_LINK",this.language.getLabel("LBL_IMAGE"))).subscribe((e=>{e&&this.editor.execute("imageInsert",{source:[{src:e}]})}))}openMediaFilePicker(){this.modalOpen=!0,this.modal.openModal("MediaFilePicker").subscribe((e=>{e.instance.answer.subscribe((e=>{e&&(e.upload?this.modal.openModal("MediaFileUploader").subscribe((e=>{e.instance.answer.subscribe((e=>{e&&this.editor.execute("imageInsert",{source:[{src:"https://cdn.spicecrm.io/"+e}]}),this.modalOpen=!1}))})):(e.id&&this.editor.execute("imageInsert",{source:[{src:"https://cdn.spicecrm.io/"+e.id}]}),this.modalOpen=!1))}))}))}openSourceEditor(){this.modal.openModal("SystemRichTextSourceModal",!0,this.viewContainerRef.injector).pipe((0,a.q)(1)).subscribe((e=>{e.instance._html=this.editor.getData(),e.instance.html.subscribe((e=>{this._html=e,this.editor.setData(e),"function"==typeof this.onChange&&this.onChange(e)}))}))}commandIsActive(e){return this.isActive&&this._document.queryCommandState(e)}triggerBlocks(e){if(!this.isActive)return;let t=!1;this.select.forEach((s=>{const i=e.find((e=>e.nodeName===s));void 0===i||s!==i.nodeName&&"code"!=i.nodeName?!1===t&&(this.block="default"):!1===t&&(this.block=i.nodeName.toLowerCase(),t=!0)})),t=!1}insertLink(){this.modal.input("","LBL_ADD_LINK").subscribe((e=>{e&&this.editor.execute("link",e)}))}addVideo(){this.isActive&&this.modal.input("","LBL_ADD_VIDEO").subscribe((e=>{e&&this.editor.execute("mediaEmbed",e)}))}getSelectedText(){return window.getSelection?window.getSelection().toString():this._document.selection&&"Control"!=this._document.selection.type?this._document.selection.createRange().text:void 0}insertColor(e,t){this.editorService.insertColor(e,t)}setFontName(e){this.editorService.setFontName(e)}setFontSize(e){this.editorService.setFontSize(e)}onFileChanged(e){}setCustomClass(e){}encodeHtml(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}addCodeSnippet(){if(!this.isActive)return;this.modal.prompt("input","","LBL_SELECT_LANGUAGE","shade",void 0,[{value:"plaintext",display:"Plain text"},{value:"c",display:"C"},{value:"cs",display:"C#"},{value:"cpp",display:"C++"},{value:"css",display:"CSS"},{value:"diff",display:"Diff"},{value:"html",display:"HTML"},{value:"java",display:"Java"},{value:"javascript",display:"JavaScript"},{value:"php",display:"PHP"},{value:"python",display:"Python"},{value:"ruby",display:"Ruby"},{value:"typescript",display:"TypeScript"},{value:"xml",display:"XML"}],!0).subscribe((e=>{e&&this.editor.execute("codeBlock",{language:e,forceValue:!0})}))}handleKeyboardShortcuts(){this.keydownListener=this.renderer.listen("document","keydown",(e=>{(window.navigator.platform.match("Mac")?e.metaKey:e.ctrlKey)&&"s"==e.key.toLowerCase()&&(e.preventDefault(),this.save$.emit(this._html))}))}openTemplateVariableHelper(){this.isActive&&(this.modalOpen=!0,this.modal.openModal("OutputTemplatesVariableHelper",null,this.viewContainerRef.injector).subscribe((e=>{e.instance.response.pipe((0,a.q)(1)).subscribe((e=>{this.modalOpen=!1,this.editor.model.change((t=>{this.editor.model.insertContent(t.createText(`{${e}}`))}))}))})))}getHtmlFromSelection(){let e,t=window.getSelection();t.getRangeAt?e=t.getRangeAt(0):(e=document.createRange(),e.setStart(t.anchorNode,t.anchorOffset),e.setEnd(t.focusNode,t.focusOffset));let s=e.cloneContents(),i=document.createElement("div");return i.appendChild(s),i.innerHTML}save(){this.save$.emit(this.editor.getData())}set css(e){e&&d.render(`.slds-rich-text-editor__textarea {${e}}`).then((e=>this.cssContent=this.sanitizer.bypassSecurityTrustResourceUrl("data:text/css;base64,"+btoa(e.css))))}}return SystemRichTextEditor.ɵfac=function(e){return new(e||SystemRichTextEditor)(i.Y36(r.o),i.Y36(i.Qsj),i.Y36(c.$),i.Y36(u.Pu),i.Y36(o.L),i.Y36(l.K0),i.Y36(i.SBq),i.Y36(m.d),i.Y36(i.R0b),i.Y36(h.H7),i.Y36(i.s_b),i.Y36(g.o,8),i.Y36(p._))},SystemRichTextEditor.ɵcmp=i.Xpm({type:SystemRichTextEditor,selectors:[["system-richtext-editor"]],viewQuery:function(e,t){if(1&e&&i.Gf(_,7,i.s_b),2&e){let e;i.iGM(e=i.CRH())&&(t.ckEditor=e.first)}},inputs:{extendedmode:"extendedmode",readOnly:"readOnly",innerheight:"innerheight",useMedialFile:"useMedialFile",css:"css"},outputs:{save$:"save$"},features:[i._Bn([{provide:n.JU,useExisting:(0,i.Gpc)((()=>SystemRichTextEditor)),multi:!0},o.L])],ngContentSelectors:O,decls:8,vars:3,consts:[[1,"slds-rich-text-editor","slds-grid","slds-grid_vertical","slds-nowrap","slds-grid","slds-grid--vertical","slds-theme--default",2,"top","0","right","0","left","0","bottom","0","z-index","9999",3,"ngStyle","click"],["role","toolbar","class","slds-rich-text-editor__toolbar slds-shrink-none",4,"ngIf"],[1,"slds-grid","slds-grow",2,"min-height","0"],[1,"slds-text-color_weak","slds-grow","slds-height_full","spice-richtext-editor","slds-rich-text-editor__textarea"],["rel","stylesheet","type","text/css",3,"href",4,"ngIf"],["ckEditor",""],["role","toolbar",1,"slds-rich-text-editor__toolbar","slds-shrink-none"],["class","slds-button-group-list",4,"ngIf"],["class","slds-grid slds-rich-text-editor__spacing-wrapper","role","group",4,"ngIf"],[1,"slds-button-group-list"],["aria-pressed","true","tabindex","-1",1,"slds-button","slds-button_icon","slds-button_icon-border-filled",3,"title","ngClass","click"],["icon","bold"],["icon","italic"],["icon","underline"],["icon","strikethrough"],["icon","richtextbulletedlist"],["icon","richtextnumberedlist"],["icon","table"],[4,"ngIf"],["icon","richtextindent"],["icon","richtextoutdent"],["icon","left_align_text"],["icon","center_align_text"],["icon","right_align_text"],["icon","justify_text"],["aria-pressed","true","tabindex","-1",1,"slds-button","slds-button_icon","slds-button_icon-border-filled",3,"title","click"],["icon","link"],["icon","remove_link"],["icon","remove_formatting"],[1,"slds-button-group-list","slds-grow"],["tabindex","-1","aria-pressed","true",1,"slds-button","slds-button_icon","slds-button_icon-border-filled",3,"title","click"],["icon","undo"],[1,"slds-assistive-text"],["icon","redo"],["role","group",1,"slds-grid","slds-rich-text-editor__spacing-wrapper"],[1,"slds-rich-text-editor__select"],[1,"slds-form-element"],[1,"slds-form-element__control"],[1,"slds-select_container"],[1,"slds-select",3,"ngModel","ngModelChange","change"],["value","heading1"],["value","heading2"],["value","heading3"],["value","paragraph"],["aria-describedby","dialog-body-id-35","aria-label","Choose a color","role","dialog",1,"slds-popover","slds-color-picker__selector","slds-show",2,"position","absolute"],["id","dialog-body-id-35",1,"slds-popover__body"],[1,"slds-media"],[1,"slds-media__body"],[1,"slds-text-align--center"],["id","color-picker-default","role","tabpanel","aria-labelledby","color-picker-default__item",1,"slds-tabs_default__content","slds-show"],[4,"ngFor","ngForOf"],["id","color-picker-custom","role","tabpanel","aria-labelledby","color-picker-custom__item",1,"slds-tabs_default__content","slds-hide"],[1,"slds-popover__footer"],[1,"slds-color-picker__selector-footer","slds-p-bottom--x-small","slds-float--right"],[1,"slds-button-small","slds-m-right--small","slds-button_neutral",3,"click"],[1,"slds-button-small","slds-button_destructive",3,"click"],["role","listbox","aria-label","Preset colors",1,"slds-color-picker__swatches"],["class","slds-color-picker__swatch","role","presentation",4,"ngFor","ngForOf"],["role","presentation",1,"slds-color-picker__swatch"],["href","#","role","option","tabindex","0",1,"slds-color-picker__swatch-trigger",3,"ngClass","click"],[1,"slds-swatch",2,"height","9px","width","9px","border","solid 1px black"],["icon","image"],["tabindex","-1",1,"slds-button","slds-button_icon","slds-button_icon-border-filled",3,"title","click"],["icon","video"],["icon","snippet"],["icon","ad_set"],[3,"icon"],["rel","stylesheet","type","text/css",3,"href"]],template:function(e,t){1&e&&(i.F$t(),i.TgZ(0,"div",0),i.NdJ("click",(function(e){return t.onEditorClick(e)})),i.YNc(1,S,62,60,"div",1),i.TgZ(2,"div",2)(3,"div",3)(4,"system-richtext-editor-content"),i.YNc(5,I,1,1,"link",4),i._UZ(6,"div",null,5),i.qZA()()()()),2&e&&(i.Q6J("ngStyle",t.richTextStyle),i.xp6(1),i.Q6J("ngIf",!t.readOnly),i.xp6(4),i.Q6J("ngIf",t.cssContent))},dependencies:[l.mk,l.sg,l.O5,l.PC,n.YN,n.Kr,n.EJ,n.JJ,n.On,f.J,b.m],encapsulation:2}),SystemRichTextEditor})()},121:(e,t,s)=>{"use strict";s.d(t,{m:()=>l});var i=s(1571);const n=["*"];let l=(()=>{class SystemRichTextEditorContent{constructor(e){this.cdRef=e,e.detach()}}return SystemRichTextEditorContent.ɵfac=function(e){return new(e||SystemRichTextEditorContent)(i.Y36(i.sBO))},SystemRichTextEditorContent.ɵcmp=i.Xpm({type:SystemRichTextEditorContent,selectors:[["system-richtext-editor-content"]],ngContentSelectors:n,decls:1,vars:0,template:function(e,t){1&e&&(i.F$t(),i.Hsn(0))},encapsulation:2,changeDetection:0}),SystemRichTextEditorContent})()},3896:(e,t,s)=>{"use strict";s.d(t,{u:()=>T});var i=s(1571),n=s(5698),l=s(4817),o=s(6895),a=s(5329),d=s(1481),r=s(2067),c=s(5710),u=s(4044),m=s(433),h=s(2656),g=s(3463),p=s(9621),f=s(3499),b=s(5767),y=s(1916),v=s(8859);const x=["sourceeditor"];function Z(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"div",19)(1,"button",20),i.NdJ("click",(function(){i.CHM(e);const t=i.oxw();return i.KtG(t.nextResult())})),i._UZ(2,"system-button-icon",21),i.qZA(),i.TgZ(3,"button",20),i.NdJ("click",(function(){i.CHM(e);const t=i.oxw();return i.KtG(t.previewResult())})),i._UZ(4,"system-button-icon",22),i.qZA()()}if(2&e){const e=i.oxw();i.xp6(1),i.Q6J("disabled",e.nextDisabled)("title",e.language.getLabel("LBL_NEXT")),i.xp6(2),i.Q6J("disabled",e.previewDisabled)("title",e.language.getLabel("LBL_PREVIEW"))}}function w(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"button",23),i.NdJ("click",(function(){i.CHM(e);const t=i.oxw();return i.KtG(t.openTemplateVariableHelper())})),i._UZ(1,"system-button-icon",24),i.qZA()}if(2&e){const e=i.oxw();i.Q6J("disabled",!e.isUserInsideEditor)("title",e.language.getLabel("LBL_TEMPLATE_VARIABLE_HELPER"))}}let T=(()=>{class SystemRichTextSourceModal{constructor(e,t,s,n,l,o,a,d,r){this.language=e,this.renderer=t,this.sanitized=s,this.libloader=n,this.injector=l,this.model=o,this.modal=a,this.editorService=d,this._document=r,this.self={},this._html="",this.searchtext="",this.foundIndices=[],this.currentIndex=-1,this.html=new i.vpe,this.isUserInsideEditor=!1,this.editorId=_.uniqueId(),this.eventListener=[],this.beautifyenabled=!1,this.libloader.loadLib("jsbeautify").subscribe((e=>{this.beautifyenabled=!0}))}get nextDisabled(){return this.currentIndex==this.foundIndices.length-1}get previewDisabled(){return 0==this.currentIndex}get searchText(){return this.searchtext}set searchText(e){this.currentIndex=0,this.searchtext=e}get sanitizedHtml(){return this.sanitized.bypassSecurityTrustHtml(this._html)}ngOnInit(){this.renderer.setProperty(this.sourceEditor.nativeElement,"innerText",this._html),this.eventListener.push(this.renderer.listen("document","click",(()=>this.isUserInsideEditor=this.testIsUserInsideEditor()))),this.eventListener.push(this.renderer.listen("document","keyup",(()=>(this.isUserInsideEditor=this.testIsUserInsideEditor(),!0))))}keyUp(e){(13==e.which||13==e.keyCode&&this.searchText.length>0)&&(this.currentIndex=0,this.selectFoundText())}findTextIndices(e,t){this.foundIndices=[],e=e.toLowerCase();let s,i=0;for(;i<t.length&&(s=t.indexOf(e,i),s>-1);)this.foundIndices.push(s),i=s+e.length}getTextNodesIn(e){let t=[];if(3==e.nodeType)t.push(e);else{let s=e.childNodes;s.forEach(((e,i)=>t.concat(this.getTextNodesIn(s[i]))));for(let e=0,i=s.length;e<i;++e)t.push.apply(t,this.getTextNodesIn(s[e]))}return t}selectFoundText(){let e=this.sourceEditor.nativeElement;if(document.createRange&&window.getSelection){let t=document.createRange();t.selectNodeContents(e);let s=this.getTextNodesIn(e);this.findTextIndices(this.searchText,s.map((e=>e.data)).join(""));let i=this.foundIndices[this.currentIndex],n=i+this.searchText.length,l=0;s.some((e=>{let s=l+e.length;if(i<s&&n>l)return t.setStart(e,i-l),t.setEnd(e,n-l),!0;l+=e.length}));let o=window.getSelection();o.removeAllRanges(),o.addRange(t)}else if(document.hasOwnProperty("selection")&&document.body.hasOwnProperty("createTextRange")){let t=document.body.createTextRange();t.moveToElementText(e),t.collapse(!0),this.findTextIndices(this.searchText,this._html);let s=this.foundIndices[this.currentIndex],i=s+this.searchText.length;t.moveEnd("character",i),t.moveStart("character",s),t.select()}}beautify(){this.renderer.setProperty(this.sourceEditor.nativeElement,"innerText",html_beautify(this.sourceEditor.nativeElement.innerText,{indent_size:4,indent_char:" ",indent_with_tabs:!1,end_with_newline:!1,indent_level:0,preserve_newlines:!0,max_preserve_newlines:10,space_in_paren:!1,space_in_empty_paren:!1,unindent_chained_methods:!1,break_chained_methods:!1,keep_array_indentation:!1,unescape_strings:!1,wrap_line_length:100,e4x:!1,comma_first:!1,operator_position:"before-newline",indent_empty_lines:!1,templating:["auto"]}))}nextResult(){this.currentIndex<this.foundIndices.length&&(this.currentIndex++,this.selectFoundText())}previewResult(){this.currentIndex>0&&(this.currentIndex--,this.selectFoundText())}onContentChange(e){this._html=e}close(){this.html.emit(this._html),this.self.destroy()}get useTemplateVariableHelper(){return"OutputTemplates"===this.model?.module||"EmailTemplates"===this.model?.module||"CampaignTasks"===this.model?.module}openTemplateVariableHelper(){this.editorService.saveSelection(),this.modal.openModal("OutputTemplatesVariableHelper",null,this.injector).pipe((0,n.q)(1)).subscribe((e=>{e.instance.response.pipe((0,n.q)(1)).subscribe((e=>{this.focusEditor(),this.editorService.restoreSelection(),this._document.execCommand("insertText",!1,"{"+e+"}")}))}))}focusEditor(){this.sourceEditor.nativeElement.focus()}testIsUserInsideEditor(){if(window.getSelection){let e=window.getSelection().focusNode;for(;e&&e.id!==this.editorId&&e.parentNode;)e=e.parentNode;return e?.id===this.editorId}return!1}ngOnDestroy(){this.eventListener.forEach((e=>e()))}onModalEscX(){this.close()}}return SystemRichTextSourceModal.ɵfac=function(e){return new(e||SystemRichTextSourceModal)(i.Y36(a.d),i.Y36(i.Qsj),i.Y36(d.H7),i.Y36(r.$),i.Y36(i.zs3),i.Y36(c.o,8),i.Y36(u.o),i.Y36(l.L),i.Y36(o.K0))},SystemRichTextSourceModal.ɵcmp=i.Xpm({type:SystemRichTextSourceModal,selectors:[["system-richtext-sourcemodal"]],viewQuery:function(e,t){if(1&e&&i.Gf(x,7),2&e){let e;i.iGM(e=i.CRH())&&(t.sourceEditor=e.first)}},features:[i._Bn([l.L])],decls:21,vars:8,consts:[["size","large"],[3,"close"],["label","LBL_SOURCE_EDITOR"],[1,"slds-grid",2,"height","70vh"],[1,"slds-size--1-of-2","slds-p-right--xx-small"],[1,"slds-box","slds-theme--default","slds-scrollable_y","slds-rich-text-editor__output",2,"height","100%",3,"innerHtml"],[1,"slds-size--1-of-2","slds-p-left--x-small"],[1,"slds-p-bottom--xx-small","slds-grid"],["role","none",1,"slds-grow","slds-combobox__form-element","slds-input-has-icon","slds-input-has-icon_left-right","slds-global-search__form-element"],["icon","search","addclasses","slds-input__icon slds-input__icon--left"],["type","text",1,"slds-input",3,"placeholder","ngModel","keyup","ngModelChange"],["class","slds-grid slds-grid--align-spread slds-input__icon_right slds-is-absolute__top","style","height: 100%",4,"ngIf"],["class","slds-m-left--xx-small slds-button slds-button--icon-border slds-button--neutral",3,"disabled","title","click",4,"ngIf"],[1,"slds-m-left--xx-small","slds-button","slds-button--icon-border","slds-button--neutral",3,"disabled","click"],["icon","right_align_text"],[1,"slds-box","slds-m-around--none","slds-theme--default","slds-scrollable_y",2,"height","calc(100% - 36px)",3,"id","input"],["sourceeditor",""],[1,"slds-button","slds-button--neutral",3,"click"],["label","LBL_CLOSE"],[1,"slds-grid","slds-grid--align-spread","slds-input__icon_right","slds-is-absolute__top",2,"height","100%"],[1,"slds-button","slds-button_icon","slds-input__icon",2,"position","relative",3,"disabled","title","click"],["icon","arrowdown"],["icon","arrowup"],[1,"slds-m-left--xx-small","slds-button","slds-button--icon-border","slds-button--neutral",3,"disabled","title","click"],["icon","variable"]],template:function(e,t){1&e&&(i.TgZ(0,"system-modal",0)(1,"system-modal-header",1),i.NdJ("close",(function(){return t.close()})),i._UZ(2,"system-label",2),i.qZA(),i.TgZ(3,"system-modal-content")(4,"div",3)(5,"div",4),i._UZ(6,"div",5),i.qZA(),i.TgZ(7,"div",6)(8,"div",7)(9,"div",8),i._UZ(10,"system-utility-icon",9),i.TgZ(11,"input",10),i.NdJ("keyup",(function(e){return t.keyUp(e)}))("ngModelChange",(function(e){return t.searchText=e})),i.qZA(),i.YNc(12,Z,5,4,"div",11),i.qZA(),i.YNc(13,w,2,2,"button",12),i.TgZ(14,"button",13),i.NdJ("click",(function(){return t.beautify()})),i._UZ(15,"system-button-icon",14),i.qZA()(),i.TgZ(16,"pre",15,16),i.NdJ("input",(function(e){return t.onContentChange(e.target.innerText)})),i.qZA()()()(),i.TgZ(18,"system-modal-footer")(19,"button",17),i.NdJ("click",(function(){return t.close()})),i._UZ(20,"system-label",18),i.qZA()()()),2&e&&(i.xp6(6),i.Q6J("innerHtml",t.sanitizedHtml,i.oJD),i.xp6(5),i.Q6J("placeholder",t.language.getLabel("LBL_SEARCH"))("ngModel",t.searchText),i.xp6(1),i.Q6J("ngIf",t.foundIndices.length>1),i.xp6(1),i.Q6J("ngIf",t.useTemplateVariableHelper),i.xp6(1),i.Q6J("disabled",!t.beautifyenabled),i.xp6(2),i.Q6J("id",t.editorId),i.uIk("contenteditable",!0))},dependencies:[o.O5,m.Fj,m.JJ,m.On,h.J,g._,p.j,f.x,b.p,y.y,v.r],encapsulation:2}),SystemRichTextSourceModal})()},2868:(e,t,s)=>{"use strict";s.d(t,{P:()=>g});var i=s(1571),n=s(5329),l=s(6895),o=s(3463),a=s(8859);function d(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"button",6),i.NdJ("click",(function(){i.CHM(e);const t=i.oxw(2);return i.KtG(t.togglePanel())})),i._UZ(1,"system-utility-icon",7),i.TgZ(2,"span",8),i._UZ(3,"system-label",9),i.qZA()()}if(2&e){const e=i.oxw(2);i.xp6(1),i.Q6J("icon","switch")("size","x-small")("addclasses","slds-section__title-action-icon slds-button__icon slds-button__icon_left"),i.xp6(1),i.s9C("title",e.language.getLabel(e.titlelabel)),i.xp6(1),i.Q6J("label",e.titlelabel)}}function r(e,t){if(1&e&&(i.TgZ(0,"span",10),i._UZ(1,"system-label",9),i.qZA()),2&e){const e=i.oxw(2);i.s9C("title",e.language.getLabel(e.titlelabel)),i.xp6(1),i.Q6J("label",e.titlelabel)}}const c=function(e){return{"slds-theme_shade":e}};function u(e,t){if(1&e&&(i.TgZ(0,"h3",3),i.YNc(1,d,4,5,"button",4),i.YNc(2,r,2,2,"span",5),i.qZA()),2&e){const e=i.oxw();i.Q6J("ngClass",i.VKq(3,c,e.alwaysExpanded)),i.xp6(1),i.Q6J("ngIf",!e.alwaysExpanded),i.xp6(1),i.Q6J("ngIf",e.alwaysExpanded)}}const m=function(e){return{"slds-is-open":e}},h=["*"];let g=(()=>{class SystemSection{constructor(e){this.language=e,this.titlelabel="",this.expanded=!0,this.alwaysExpanded=!1}togglePanel(){this.expanded=!this.expanded}getTabStyle(){if(!this.expanded)return{height:"0px",transform:"rotateX(90deg)"}}}return SystemSection.ɵfac=function(e){return new(e||SystemSection)(i.Y36(n.d))},SystemSection.ɵcmp=i.Xpm({type:SystemSection,selectors:[["system-section"]],inputs:{titlelabel:"titlelabel",expanded:"expanded",alwaysExpanded:"alwaysExpanded"},ngContentSelectors:h,decls:4,vars:5,consts:[[1,"slds-section",3,"ngClass"],["class","slds-section__title",3,"ngClass",4,"ngIf"],[3,"ngStyle"],[1,"slds-section__title",3,"ngClass"],["aria-controls","expando-unique-id","aria-expanded","true","class","slds-button slds-section__title-action",3,"click",4,"ngIf"],["class","slds-truncate slds-p-horizontal_small",3,"title",4,"ngIf"],["aria-controls","expando-unique-id","aria-expanded","true",1,"slds-button","slds-section__title-action",3,"click"],[3,"icon","size","addclasses"],[1,"slds-truncate",3,"title"],[3,"label"],[1,"slds-truncate","slds-p-horizontal_small",3,"title"]],template:function(e,t){1&e&&(i.F$t(),i.TgZ(0,"div",0),i.YNc(1,u,3,5,"h3",1),i.TgZ(2,"div",2),i.Hsn(3),i.qZA()()),2&e&&(i.Q6J("ngClass",i.VKq(3,m,t.expanded)),i.xp6(1),i.Q6J("ngIf",t.titlelabel),i.xp6(1),i.Q6J("ngStyle",t.getTabStyle()))},dependencies:[l.mk,l.O5,l.PC,o._,a.r],encapsulation:2}),SystemSection})()},3543:(e,t,s)=>{"use strict";s.d(t,{R:()=>p});var i=s(1571),n=s(433),l=s(3398),o=s(6895),a=s(3463),d=s(8859);const r=["resultList"];function c(e,t){if(1&e&&(i.TgZ(0,"label",9),i._UZ(1,"system-label",10),i.qZA()),2&e){const e=i.oxw();i.xp6(1),i.Q6J("label",e.label)}}function u(e,t){if(1&e&&(i.TgZ(0,"li",17)(1,"div",18)(2,"span",19),i._uU(3),i.qZA()()()),2&e){const e=i.oxw().$implicit;i.uIk("data-is-group",!0),i.xp6(3),i.hij(" ",e.name," ")}}function m(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"li",20),i.NdJ("mousedown",(function(e){return e.preventDefault()}))("click",(function(t){i.CHM(e);const s=i.oxw().$implicit,n=i.oxw(2);return i.KtG(n.itemClicked(s,t))})),i.TgZ(1,"div",21)(2,"span",22)(3,"span",23),i._UZ(4,"span",24),i.qZA()()()()}if(2&e){const e=i.oxw().$implicit,t=i.oxw(2);i.xp6(1),i.ekj("slds-has-focus",e.id==t.focusedItemId),i.xp6(3),i.Q6J("innerHTML",e.content,i.oJD)}}function h(e,t){if(1&e&&(i.ynx(0),i.YNc(1,u,4,2,"li",15),i.YNc(2,m,5,3,"li",16),i.BQk()),2&e){const e=t.$implicit;i.xp6(1),i.Q6J("ngIf",e.isGroup),i.xp6(1),i.Q6J("ngIf",!e.isGroup)}}function g(e,t){if(1&e&&(i.TgZ(0,"div",11)(1,"ul",12,13),i.YNc(3,h,3,2,"ng-container",14),i.qZA()()),2&e){const e=i.oxw();i.Udp("max-height",e.dropdownLength),i.xp6(3),i.Q6J("ngForOf",e.searchList)}}let p=(()=>{class SystemSelect{constructor(e,t,s){this.elementRef=e,this.cdRef=t,this.renderer=s,this.selectList=[],this.label="",this.listHeight="7",this.disabled=!1,this.emitInputValueOnEnterPress=!1,this.searchList={},this.searchListVisible=!1}get dropdownLength(){return`calc(((1rem * 1.5) + 1rem) * ${this.listHeight})`}registerOnChange(e){this.onChange=e}registerOnTouched(e){}writeValue(e){e&&(this.value=e.name,this.focusedItemId=e.id,this.cdRef.detectChanges())}ngOnChanges(e){e.selectList&&(this.searchList=this.generateSearchList())}outsideClickHandler(e){this.elementRef.nativeElement.contains(e.target)||this.hideSearchList()}onKeyup(e){switch(e.key){case"ArrowUp":case"ArrowDown":return this.navigateThroughResultList(e);case"Enter":this.handleEnterPress();break;default:this.filterSearchList()}0!=this.searchList.length&&"Enter"!=e.key||this.hideSearchList(),this.cdRef.detectChanges()}onFocus(){this.searchListVisible=!0}onBlur(e){this.hideSearchList()}onInputClick(e){this.searchListVisible||(this.searchList=this.generateSearchList()),this.searchListVisible=!0,e.stopPropagation()}itemClicked(e,t){this.hideSearchList(),this.selectList.some((t=>{if(t.id==e.id)return this.onChange(t),this.value=t.name,this.focusedItemId=t.id,!0})),t.stopPropagation&&t.stopPropagation()}hideSearchList(){this.searchListVisible=!1,this.cdRef.detectChanges()}filterSearchList(){this.searchListVisible=!0,this.focusedItemId=void 0,this.searchList=this.generateSearchList(),this.value&&0!=this.searchList.length&&(this.searchList=this.searchList.filter((e=>e.name.toLowerCase().indexOf(this.value.toLowerCase())>-1)),this.searchList.forEach((e=>{const t=e.name.toLowerCase().indexOf(this.value.toLowerCase());-1!=t&&(e.content=this.generateHighlightHTMLContent(e.name,t))})))}generateHighlightHTMLContent(e,t){return[e.slice(0,t),"<mark>",e.slice(t,t+this.value.length),"</mark>",e.slice(t+this.value.length)].join("")}handleEnterPress(){this.focusedItemId?this.onChange(this.selectList.find((e=>e.id==this.focusedItemId))):this.emitInputValueOnEnterPress&&this.onChange(this.value)}generateSearchList(){const e=[],t=_.uniq(this.selectList.map((e=>e.group))).sort();return t.forEach((s=>{(s||!s&&t.length>1)&&e.push({id:`${s}`,name:`${s}`,isGroup:!0}),this.selectList.filter((e=>e.group==s)).sort(((e,t)=>e.name>t.name?1:-1)).forEach((t=>e.push({...t,content:t.name})))})),e}navigateThroughResultList(e){let t=this.searchListVisible?this.searchList:this.generateSearchList();if(t=t.filter((e=>!e.isGroup)),0==t.length)return;const s="ArrowDown"==e.key?"down":"up",i=this.focusedItemId?t.findIndex((e=>e.id==this.focusedItemId)):0;let n="down"==s?t[i+1]:t[i-1];this.focusedItemId&&n?n&&(this.focusedItemId=n.id,this.value=n.name):(n=t[0],this.focusedItemId=n.id,this.value=n.name),!this.searchListVisible&&n&&this.onChange(n),this.scrollToFocusedSearchItem(s)}scrollToFocusedSearchItem(e){if(!this.resultListContainer)return;const t=Array.from(this.resultListContainer.element.nativeElement.children).filter((e=>!e.hasAttribute("data-is-group")));let s=t.findIndex((e=>e.firstElementChild.classList.contains("slds-has-focus")));s=s+1==t.length&&"down"==e||0==s&&"up"==e?0:"down"==e?s+1:s-1,t[s].scrollIntoView()}}return SystemSelect.ɵfac=function(e){return new(e||SystemSelect)(i.Y36(i.SBq),i.Y36(i.sBO),i.Y36(i.Qsj))},SystemSelect.ɵcmp=i.Xpm({type:SystemSelect,selectors:[["system-select"]],viewQuery:function(e,t){if(1&e&&i.Gf(r,5,i.s_b),2&e){let e;i.iGM(e=i.CRH())&&(t.resultListContainer=e.first)}},inputs:{selectList:"selectList",label:"label",listHeight:"listHeight",disabled:"disabled",emitInputValueOnEnterPress:"emitInputValueOnEnterPress"},features:[i._Bn([{provide:n.JU,useExisting:(0,i.Gpc)((()=>SystemSelect)),multi:!0}]),i.TTD],decls:9,vars:6,consts:[[1,"slds-form-element","slds-size_2-of-2"],["class","slds-form-element__label",4,"ngIf"],[1,"slds-form-element__control","slds-size_2-of-2"],[1,"slds-combobox_container"],["aria-expanded","true","aria-haspopup","listbox","role","combobox",1,"slds-combobox","slds-dropdown-trigger","slds-dropdown-trigger_click","slds-is-open"],["role","none",1,"slds-combobox__form-element","slds-input-has-icon","slds-input-has-icon_right"],["type","text","system-placeholder","LBL_SEARCH","aria-autocomplete","list","autoComplete","off","role","textbox",1,"slds-input","slds-combobox__input","slds-combobox__input-value",3,"ngModel","disabled","focus","blur","click","ngModelChange","keyup"],[3,"icon","addclasses"],["class","slds-dropdown slds-dropdown_fluid slds-scrollable--y","role","listbox",3,"max-height",4,"ngIf"],[1,"slds-form-element__label"],[3,"label"],["role","listbox",1,"slds-dropdown","slds-dropdown_fluid","slds-scrollable--y"],["role","presentation",1,"slds-listbox","slds-listbox_vertical"],["resultList",""],[4,"ngFor","ngForOf"],["role","presentation",4,"ngIf"],["role","presentation","class","slds-listbox__item",3,"mousedown","click",4,"ngIf"],["role","presentation"],[1,"slds-border_bottom","slds-border_top","slds-p-left_small",2,"background-color","#ecebea"],[1,"slds-truncate","size-xx-small",2,"font-weight","bold","font-size","12px"],["role","presentation",1,"slds-listbox__item",3,"mousedown","click"],["role","option",1,"slds-media","slds-listbox__option","slds-listbox__option_plain","slds-media_small"],[1,"slds-media__body"],[1,"slds-truncate"],[3,"innerHTML"]],template:function(e,t){1&e&&(i.TgZ(0,"div",0),i.YNc(1,c,2,1,"label",1),i.TgZ(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"input",6),i.NdJ("focus",(function(){return t.onFocus()}))("blur",(function(e){return t.onBlur(e)}))("click",(function(e){return t.onInputClick(e)}))("ngModelChange",(function(e){return t.value=e}))("keyup",(function(e){return t.onKeyup(e)})),i.qZA(),i._UZ(7,"system-utility-icon",7),i.qZA(),i.YNc(8,g,4,3,"div",8),i.qZA()()()()),2&e&&(i.xp6(1),i.Q6J("ngIf",t.label),i.xp6(5),i.Q6J("ngModel",t.value)("disabled",t.disabled),i.xp6(1),i.Q6J("icon","search")("addclasses","slds-input__icon slds-input__icon--left"),i.xp6(1),i.Q6J("ngIf",t.searchListVisible))},dependencies:[l.A,o.sg,o.O5,n.Fj,n.JJ,n.On,a._,d.r],encapsulation:2,changeDetection:0}),SystemSelect})()},1691:(e,t,s)=>{"use strict";s.d(t,{E:()=>c});var i=s(1571),n=s(433),l=s(6625),o=s(5329),a=s(6895),d=s(3463);function r(e,t){if(1&e&&(i.TgZ(0,"option",3),i._UZ(1,"system-label",4),i.qZA()),2&e){const e=t.$implicit;i.Q6J("value",e.id),i.xp6(1),i.Q6J("label",e.label)}}let c=(()=>{class SystemSelectUOM{constructor(e,t){this.configuration=e,this.language=t,this.uoms=[],this.disabled=!1,this._uom="",this.uoms=this.configuration.getData("uomunits")}get uom(){return this._uom}set uom(e){this._uom=e,this.onChange(e)}registerOnChange(e){this.onChange=t=>{e(t)}}registerOnTouched(e){this.onTouched=e}writeValue(e){this._uom=e||""}}return SystemSelectUOM.ɵfac=function(e){return new(e||SystemSelectUOM)(i.Y36(l.C),i.Y36(o.d))},SystemSelectUOM.ɵcmp=i.Xpm({type:SystemSelectUOM,selectors:[["system-select-uom"]],inputs:{disabled:"disabled"},features:[i._Bn([{provide:n.JU,useExisting:(0,i.Gpc)((()=>SystemSelectUOM)),multi:!0}])],decls:3,vars:3,consts:[[1,"slds-select_container","slds-m-vertical--xx-small"],[1,"slds-select",3,"disabled","ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[3,"label"]],template:function(e,t){1&e&&(i.TgZ(0,"div",0)(1,"select",1),i.NdJ("ngModelChange",(function(e){return t.uom=e})),i.YNc(2,r,2,2,"option",2),i.qZA()()),2&e&&(i.xp6(1),i.Q6J("disabled",t.disabled)("ngModel",t.uom),i.xp6(1),i.Q6J("ngForOf",t.uoms))},dependencies:[a.sg,n.YN,n.Kr,n.EJ,n.JJ,n.On,d._],encapsulation:2}),SystemSelectUOM})()},6274:(e,t,s)=>{"use strict";s.d(t,{f:()=>a});var i=s(1571),n=s(433),l=s(6895);function o(e,t){if(1&e&&(i.TgZ(0,"span",5),i._uU(1),i.qZA()),2&e){const e=i.oxw();i.xp6(1),i.Oqu(e.value)}}let a=(()=>{class SystemSlider{constructor(){this.disabled=!1,this.displayValue=!0,this._value=0}get value(){return this._value}set value(e){e!=this._value&&(this._value=e,this.onChange(e))}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}writeValue(e){this._value=e}setDisabledState(e){this.disabled=e}}return SystemSlider.ɵfac=function(e){return new(e||SystemSlider)},SystemSlider.ɵcmp=i.Xpm({type:SystemSlider,selectors:[["system-slider"]],inputs:{max:"max",min:"min",step:"step",disabled:"disabled",displayValue:"displayValue"},features:[i._Bn([{provide:n.JU,useExisting:(0,i.Gpc)((()=>SystemSlider)),multi:!0}])],decls:5,vars:6,consts:[[1,"slds-form-element"],[1,"slds-form-element__control"],[1,"slds-slider"],["type","range",1,"slds-slider__range",3,"min","step","max","ngModel","disabled","ngModelChange"],["class","slds-slider__value","aria-hidden","true",4,"ngIf"],["aria-hidden","true",1,"slds-slider__value"]],template:function(e,t){1&e&&(i.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"input",3),i.NdJ("ngModelChange",(function(e){return t.value=e})),i.qZA(),i.YNc(4,o,2,1,"span",4),i.qZA()()()),2&e&&(i.xp6(3),i.Q6J("min",t.min)("step",t.step)("max",t.max)("ngModel",t.value)("disabled",t.disabled),i.xp6(1),i.Q6J("ngIf",t.displayValue))},dependencies:[l.O5,n.Fj,n.eT,n.JJ,n.On],encapsulation:2}),SystemSlider})()},4664:(e,t,s)=>{"use strict";s.d(t,{W:()=>l});var i=s(1571);function n(e,t){if(1&e&&(i.TgZ(0,"div",4),i._UZ(1,"system-label",5),i.qZA()),2&e){const e=i.oxw();i.xp6(1),i.Q6J("label",e.message)}}let l=(()=>{class SystemSpinner{constructor(){this.size=0,this.border=0,this.inverse="false",this.spinnerStyle={}}ngOnInit(){return 0!=this.size&&(this.spinnerStyle.width=this.size+"px",this.spinnerStyle.height=this.size+"px"),0!=this.border&&(this.spinnerStyle["border-width"]=this.border+"px"),"true"==this.inverse&&(this.spinnerStyle["border-right-color"]="#fff",this.spinnerStyle["border-left-color"]="#fff",this.spinnerStyle["border-bottom-color"]="#fff"),{}}}return SystemSpinner.ɵfac=function(e){return new(e||SystemSpinner)},SystemSpinner.ɵcmp=i.Xpm({type:SystemSpinner,selectors:[["system-spinner"]],inputs:{size:"size",border:"border",inverse:"inverse",message:"message"},decls:4,vars:2,consts:[[1,"slds-grid","slds-grid--vertical"],[1,"cssload-container"],[1,"cssload-double-torus",3,"ngStyle"],["class","slds-m-top--x-small",4,"ngIf"],[1,"slds-m-top--x-small"],[3,"label"]],template:function(e,t){1&e&&(i.TgZ(0,"div",0)(1,"div",1),i._UZ(2,"div",2),i.qZA(),i.YNc(3,n,2,1,"div",3),i.qZA()),2&e&&(i.xp6(2),i.Q6J("ngStyle",t.spinnerStyle),i.xp6(1),i.Q6J("ngIf",t.message))},encapsulation:2}),SystemSpinner})()},2803:(e,t,s)=>{"use strict";s.d(t,{B:()=>n});var i=s(1571);let n=(()=>{class SystemStencil{}return SystemStencil.ɵfac=function(e){return new(e||SystemStencil)},SystemStencil.ɵcmp=i.Xpm({type:SystemStencil,selectors:[["system-stencil"]],decls:2,vars:0,consts:[[1,"slds-theme--shade",2,"background-color","#e4e9f3","min-width","100px"]],template:function(e,t){1&e&&(i.TgZ(0,"div",0),i._uU(1," "),i.qZA())},encapsulation:2}),SystemStencil})()},2161:(e,t,s)=>{"use strict";s.d(t,{x:()=>h});var i=s(1571),n=s(6895),l=s(2803);const o=["system-table-stencils",""];function a(e,t){1&e&&i._UZ(0,"td",5)}function d(e,t){1&e&&i._UZ(0,"td")}function r(e,t){1&e&&i._UZ(0,"td",5)}function c(e,t){1&e&&(i.TgZ(0,"td"),i._UZ(1,"system-stencil"),i.qZA())}function u(e,t){1&e&&i._UZ(0,"td",5)}function m(e,t){if(1&e&&(i.TgZ(0,"tr",1),i.YNc(1,a,1,0,"td",2),i.YNc(2,d,1,0,"td",3),i.YNc(3,r,1,0,"td",2),i.YNc(4,c,2,0,"td",4),i.YNc(5,u,1,0,"td",2),i.qZA()),2&e){const e=t.$implicit,s=i.oxw();i.Q6J("ngStyle",s.linestyle(e)),i.xp6(1),i.Q6J("ngIf",s.dragHandles),i.xp6(1),i.Q6J("ngIf",s.rownumbers),i.xp6(1),i.Q6J("ngIf",s.select),i.xp6(1),i.Q6J("ngForOf",s.colArray),i.xp6(1),i.Q6J("ngIf",s.tools)}}let h=(()=>{class SystemTableStencils{constructor(){this.columns=1,this.rows=5,this.tools=!1,this.select=!1,this.rownumbers=!1,this.dragHandles=!1,this.colArray=[],this.rowArray=[]}ngOnInit(){let e=1;do{this.rowArray.push(e),e++}while(e<=this.rows);let t=1;do{this.colArray.push(t),t++}while(t<=this.columns)}linestyle(e){return{opacity:.2+.8/e}}}return SystemTableStencils.ɵfac=function(e){return new(e||SystemTableStencils)},SystemTableStencils.ɵcmp=i.Xpm({type:SystemTableStencils,selectors:[["","system-table-stencils",""]],inputs:{columns:"columns",rows:"rows",tools:"tools",select:"select",rownumbers:"rownumbers",dragHandles:"dragHandles"},attrs:o,decls:1,vars:1,consts:[[3,"ngStyle",4,"ngFor","ngForOf"],[3,"ngStyle"],["class","slds-cell-shrink",4,"ngIf"],[4,"ngIf"],[4,"ngFor","ngForOf"],[1,"slds-cell-shrink"]],template:function(e,t){1&e&&i.YNc(0,m,6,6,"tr",0),2&e&&i.Q6J("ngForOf",t.rowArray)},dependencies:[n.sg,n.O5,n.PC,l.B],encapsulation:2}),SystemTableStencils})()},2403:(e,t,s)=>{"use strict";s.d(t,{t:()=>m});var i=s(1571),n=s(3278),l=s(6559),o=s(6895),a=s(2656),d=s(3463),r=s(8859);function c(e,t){if(1&e&&(i.TgZ(0,"p"),i._UZ(1,"system-label",11),i.qZA()),2&e){const e=i.oxw().$implicit;i.xp6(1),i.Q6J("label",e.description)}}function u(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"div",2)(1,"button",3),i.NdJ("click",(function(){const t=i.CHM(e).$implicit,s=i.oxw();return i.KtG(s.toast.clearToast(t.id))})),i._UZ(2,"system-button-icon",4),i.qZA(),i.TgZ(3,"div",5),i._UZ(4,"system-utility-icon",6),i.TgZ(5,"div",7)(6,"h2",8),i._UZ(7,"system-label",9),i.qZA(),i.YNc(8,c,2,1,"p",10),i.qZA()()()}if(2&e){const e=t.$implicit,s=i.oxw();i.Q6J("ngStyle",s.toastStyle)("ngClass",s.getToastClass(e.type,e.theme)),i.xp6(2),i.Q6J("icon","close")("size","large"),i.xp6(2),i.Q6J("icon",s.getToastIcon(e.type))("size","small")("addclasses","slds-m-right--small slds-col slds-no-flex")("colorclass","slds-icon"),i.xp6(3),i.Q6J("label",e.text),i.xp6(1),i.Q6J("ngIf",e.description)}}let m=(()=>{class SystemToastContainer{constructor(e,t,s,i){this.toast=e,this.layout=t,this.renderer=s,this.cdr=i,this.renderer.listen("window","resize",(()=>this.cdr.detectChanges()))}get isnarrow(){return"small"==this.layout.screenwidth}get toastContainerStyle(){return this.isnarrow?{}:{width:"30rem","margin-left":"calc(50% - 15rem)"}}get toastStyle(){return this.isnarrow?{"min-width":"unset","border-radius":0,"border-bottom":"1px solid #fff"}:{}}getToastClass(e,t){let s="";if("alert"===t)s="slds-notify--alert slds-theme--alert-texture ";else s="slds-notify--toast ";switch(e){case"success":s+="slds-theme--success";break;case"warning":s+="slds-theme--warning";break;case"error":s+="slds-theme--error"}return this.isnarrow?s+" slds-size--1-of-1 slds-m-around--none":s}getToastIcon(e){switch(e){case"success":return"success";case"warning":return"warning";case"error":return"error";default:return"info"}}}return SystemToastContainer.ɵfac=function(e){return new(e||SystemToastContainer)(i.Y36(n.A),i.Y36(l.b),i.Y36(i.Qsj),i.Y36(i.sBO))},SystemToastContainer.ɵcmp=i.Xpm({type:SystemToastContainer,selectors:[["system-toast-container"]],decls:2,vars:2,consts:[[1,"slds-notify_container",3,"ngStyle"],["class","slds-notify","role","alert",3,"ngStyle","ngClass",4,"ngFor","ngForOf"],["role","alert",1,"slds-notify",3,"ngStyle","ngClass"],[1,"slds-button","slds-notify__close","slds-button--icon-inverse",3,"click"],[3,"icon","size"],[1,"slds-notify__content","slds-grid"],[3,"icon","size","addclasses","colorclass"],[1,"slds-col","slds-align-middle"],[1,"slds-text-heading--small"],[3,"label"],[4,"ngIf"],["length","long",3,"label"]],template:function(e,t){1&e&&(i.TgZ(0,"div",0),i.YNc(1,u,9,10,"div",1),i.qZA()),2&e&&(i.Q6J("ngStyle",t.toastContainerStyle),i.xp6(1),i.Q6J("ngForOf",t.toast.activeToasts))},dependencies:[o.mk,o.sg,o.O5,o.PC,a.J,d._,r.r],encapsulation:2}),SystemToastContainer})()},494:(e,t,s)=>{"use strict";s.d(t,{S:()=>a});var i=s(1571),n=s(6895),l=s(2656);function o(e,t){if(1&e&&(i.TgZ(0,"div",7)(1,"div",8),i._uU(2),i.qZA()()),2&e){const e=i.oxw();i.xp6(2),i.Oqu(e.tooltiptext)}}let a=(()=>{class SystemTooltip{constructor(){this.tooltiptext="",this.displayHelp=!1}toggleHelp(){this.displayHelp=!this.displayHelp}openHelp(){this.displayHelp=!0}closeHelp(){this.displayHelp=!1}}return SystemTooltip.ɵfac=function(e){return new(e||SystemTooltip)},SystemTooltip.ɵcmp=i.Xpm({type:SystemTooltip,selectors:[["system-tooltip"]],inputs:{tooltiptext:"tooltiptext"},decls:8,vars:2,consts:[[1,"slds-is-relative"],[1,"slds-form-element"],[1,"slds-form-element__icon","slds-align-middle"],[1,"slds-button","slds-button_icon","slds-button","slds-button_icon",3,"mouseover","mouseout"],[3,"icon"],[1,"slds-assistive-text"],["class","slds-popover slds-popover_tooltip slds-nubbin_bottom-left slds-is-absolute","role","tooltip","style","word-wrap: break-word;white-space: normal;width: 300px;bottom: 30px;left: -15px;",4,"ngIf"],["role","tooltip",1,"slds-popover","slds-popover_tooltip","slds-nubbin_bottom-left","slds-is-absolute",2,"word-wrap","break-word","white-space","normal","width","300px","bottom","30px","left","-15px"],[1,"slds-popover__body"]],template:function(e,t){1&e&&(i.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"button",3),i.NdJ("mouseover",(function(){return t.openHelp()}))("mouseout",(function(){return t.closeHelp()})),i._UZ(4,"system-button-icon",4),i.TgZ(5,"span",5),i._uU(6,"Help"),i.qZA()()()(),i.YNc(7,o,3,1,"div",6),i.qZA()),2&e&&(i.xp6(4),i.Q6J("icon","info"),i.xp6(3),i.Q6J("ngIf",t.displayHelp))},dependencies:[n.O5,l.J],encapsulation:2}),SystemTooltip})()},8574:(e,t,s)=>{"use strict";s.d(t,{O:()=>c});var i=s(1571),n=s(2563),l=s(6895),o=s(2656),a=s(3361);function d(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"li",4),i.NdJ("cdkDragStarted",(function(){i.CHM(e);const t=i.oxw();return i.KtG(t.setIsDragging(!0))}))("cdkDragEnded",(function(){i.CHM(e);const t=i.oxw();return i.KtG(t.setIsDragging(!1))})),i.TgZ(1,"system-tree-item",5),i.NdJ("click",(function(){const t=i.CHM(e).$implicit,s=i.oxw();return i.KtG(s.handleClick(t.id))}))("toggleExpandedChange",(function(t){i.CHM(e);const s=i.oxw();return i.KtG(s.handleExpand(t))}))("dragPositionChange",(function(t){i.CHM(e);const s=i.oxw();return i.KtG(s.handleDragPosition(t))}))("onItemAdd",(function(t){i.CHM(e);const s=i.oxw();return i.KtG(s.onItemAdd.emit(t))})),i.qZA()()}if(2&e){const e=t.$implicit,s=i.oxw();i.Q6J("cdkDragData",e)("cdkDragDisabled",!s.config.draggable||e.systemTreeDefs.hasChildren),i.uIk("aria-level",e.systemTreeDefs.level)("aria-selected",e.systemTreeDefs.isSelected),i.xp6(1),i.Q6J("item",e)("config",s.config)("isDragging",s.isDragging)("title",e.name)}}function r(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"div",6)(1,"button",7),i.NdJ("click",(function(){i.CHM(e);const t=i.oxw();return i.KtG(t.onItemAdd.emit(null))})),i._UZ(2,"system-button-icon",8),i.qZA()()}2&e&&(i.xp6(2),i.Q6J("icon","add")("size","small"))}let c=(()=>{class SystemTree{constructor(){this.sourceList=[],this.selectedItem="",this.selectedItemChange=new i.vpe,this.onItemAdd=new i.vpe,this.onTreeDrop=new i.vpe,this.tree=[],this.isDragging=!1,this.treeConfig={draggable:!1,canadd:!1,expandall:!1,collapsible:!0}}get config(){return this.treeConfig}set config(e){this.treeConfig.draggable=e.draggable||!1,this.treeConfig.canadd=e.canadd||!1,this.treeConfig.expandall=e.expandall||!1,this.treeConfig.collapsible=e.collapsible||!0}ngOnChanges(e){e.sourceList&&this.buildTree(),e.selectedItem&&this.handleClick(this.selectedItem)}buildTree(){this.tree=[],this.sortBySequence(),this.addTreeItem(),this.setHasChildren()}sortBySequence(){this.sourceList.sort(((e,t)=>e.name&&t.name?e.name>t.name?1:-1:0));let e=_.groupBy(this.sourceList,(e=>e.parent_id));this.sourceList=[];for(let t in e)e.hasOwnProperty(t)&&(e[t].sort(((e,t)=>e.parent_sequence&&t.parent_sequence?+e.parent_sequence>+t.parent_sequence?1:-1:0)),this.sourceList=[...this.sourceList,...e[t]])}addTreeItem(e="",t=1){for(let s of this.sourceList)(!s.parent_id&&""==e||s.parent_id==e)&&(s.systemTreeDefs||(s.systemTreeDefs={}),s.systemTreeDefs.expanded=!!this.config.collapsible&&(!!this.config.expandall||!!s.systemTreeDefs.expanded),s.systemTreeDefs.clickable=!s.hasOwnProperty("clickable")||s.clickable,s.systemTreeDefs.level=t,s.systemTreeDefs.isSelected=this.selectedItem==s.id,this.tree.push(s),s.systemTreeDefs.expanded&&this.addTreeItem(s.id,t+1))}setHasChildren(){this.tree.forEach((e=>{e.systemTreeDefs.hasChildren=this.sourceList.some((t=>t.parent_id==e.id))}))}handleDrop(e){if(this.isDragging=!1,!this.dragPosition)return;let t,s,i=e.item.data.parent_id,l=this.tree.find((e=>e.id==this.dragPosition.id)),o=this.tree.findIndex((e=>e.id==this.dragPosition.id));switch(this.dragPosition.position){case"before":let t=o-1<=0,s=this.tree[t?0:o-1];e.item.data.parent_id=t?null:s.systemTreeDefs.hasChildren?s.id:s.parent_id,e.item.data.systemTreeDefs.level=t?1:s.systemTreeDefs.hasChildren?s.systemTreeDefs.level+1:s.systemTreeDefs.level,o=t?0:o;break;case"item":e.previousIndex>o&&o++,e.item.data.systemTreeDefs.level=l.systemTreeDefs.level+1,e.item.data.parent_id=l.id,l.systemTreeDefs.hasChildren=!0;break;case"after":let i=o>=this.tree.length-1,n=this.tree[i?this.tree.length-1:o];e.item.data.systemTreeDefs.level=i?1:n.systemTreeDefs.hasChildren?n.systemTreeDefs.level+1:n.systemTreeDefs.level,e.item.data.parent_id=i?null:n.systemTreeDefs.hasChildren?n.id:n.parent_id,o=i?this.tree.length-1:e.previousIndex>o?o+1:o}e.previousIndex!=o&&(this.tree.some((e=>{if(e.id==i)return e.systemTreeDefs.hasChildren=this.sourceList.some((e=>e.parent_id==i)),!0})),(0,n.bA)(this.tree,e.previousIndex,o),t=this.tree.filter((t=>t.parent_id==e.item.data.parent_id||t.parent_id==i)).map(((e,t)=>({id:e.id,index:t}))),this.tree=this.tree.map((e=>{let s=t.findIndex((t=>t.id==e.id));return s>-1&&(e.parent_sequence=s),e}))),e.item.data.parent_id!=i&&(s={id:e.item.data.id,parent_id:e.item.data.parent_id}),this.dragPosition=null,this.onTreeDrop.emit({itemWithNewParent:s,newSortSequences:t})}setIsDragging(e){this.isDragging=e}handleDragPosition(e){this.dragPosition=e}handleExpand(e){this.sourceList.some((t=>{if(t.id==e)return t.systemTreeDefs.expanded=!t.systemTreeDefs.expanded,!0})),this.buildTree()}handleClick(e){this.tree.some((t=>{if(t.id==e)return t.systemTreeDefs&&t.systemTreeDefs.clickable?(t.systemTreeDefs.isSelected=!0,this.selectedItemChange.emit(e),this.selectedItem=e):this.handleExpand(e),!0})),this.tree.some((t=>{if(t.id!=e&&t.systemTreeDefs&&t.systemTreeDefs.isSelected)return t.systemTreeDefs.isSelected=!1,!0}))}trackByFn(e,t){return t.id}}return SystemTree.ɵfac=function(e){return new(e||SystemTree)},SystemTree.ɵcmp=i.Xpm({type:SystemTree,selectors:[["system-tree"]],inputs:{sourceList:"sourceList",selectedItem:"selectedItem",config:"config"},outputs:{selectedItemChange:"selectedItemChange",onItemAdd:"onItemAdd",onTreeDrop:"onTreeDrop"},features:[i.TTD],decls:4,vars:4,consts:[["role","tree",1,"tree-list-drag-boundary"],["cdkDropList","","cdkDropListSortingDisabled","","role","tree","aria-labelledby","treeheading",1,"slds-tree","slds-p-top--xxx-small",3,"cdkDropListData","cdkDropListDropped"],["role","treeitem","cdkDrag","","cdkDragBoundary",".tree-list-drag-boundary","class","slds-grid slds-drag--preview",3,"cdkDragData","cdkDragDisabled","cdkDragStarted","cdkDragEnded",4,"ngFor","ngForOf","ngForTrackBy"],["class","slds-grid slds-align-content-center slds-border--top slds-m-top--x-small slds-p-top--x-small",4,"ngIf"],["role","treeitem","cdkDrag","","cdkDragBoundary",".tree-list-drag-boundary",1,"slds-grid","slds-drag--preview",3,"cdkDragData","cdkDragDisabled","cdkDragStarted","cdkDragEnded"],[1,"slds-grid--vertical","slds-p-vertical--none","slds-tree__item",2,"width","100%",3,"item","config","isDragging","title","click","toggleExpandedChange","dragPositionChange","onItemAdd"],[1,"slds-grid","slds-align-content-center","slds-border--top","slds-m-top--x-small","slds-p-top--x-small"],[1,"slds-button","slds-button--icon","slds-button--icon-border","slds-p-around--xx-small",3,"click"],[3,"icon","size"]],template:function(e,t){1&e&&(i.TgZ(0,"div",0)(1,"ul",1),i.NdJ("cdkDropListDropped",(function(e){return t.handleDrop(e)})),i.YNc(2,d,2,8,"li",2),i.qZA()(),i.YNc(3,r,3,2,"div",3)),2&e&&(i.xp6(1),i.Q6J("cdkDropListData",t.tree),i.xp6(1),i.Q6J("ngForOf",t.tree)("ngForTrackBy",t.trackByFn),i.xp6(1),i.Q6J("ngIf",t.config.canadd))},dependencies:[l.sg,l.O5,n.Wj,n.Zt,o.J,a.u],styles:[".cdk-drag-animating[_ngcontent-%COMP%]{transition:none}"]}),SystemTree})()},3361:(e,t,s)=>{"use strict";s.d(t,{u:()=>c});var i=s(1571),n=s(6895),l=s(2656),o=s(8859);function a(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"button",10),i.NdJ("click",(function(t){i.CHM(e);const s=i.oxw();return i.KtG(s.expand(s.item,t))})),i._UZ(1,"system-button-icon",11),i.qZA()}if(2&e){const e=i.oxw();i.Q6J("disabled",e.config.expandall),i.xp6(1),i.Q6J("icon",e.item.systemTreeDefs.expanded?"chevrondown":"chevronright")}}function d(e,t){if(1&e&&i._UZ(0,"system-utility-icon",12),2&e){const e=i.oxw();i.Q6J("icon",e.config.icon||"record")("addclasses","slds-p-around--xxx-small slds-m-right--xx-small")}}function r(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"div",13)(1,"button",14),i.NdJ("click",(function(){i.CHM(e);const t=i.oxw();return i.KtG(t.addItem(t.item.id,t.item.name))})),i._UZ(2,"system-button-icon",15),i.qZA()()}}let c=(()=>{class SystemTreeItem{constructor(){this.onItemAdd=new i.vpe,this.toggleExpandedChange=new i.vpe,this.dragPositionChange=new i.vpe,this.item=[],this.config={},this.isDragging=!1,this.dragPosition=""}addItem(e,t){this.onItemAdd.emit({id:e,name:t})}expand(e,t){this.toggleExpandedChange.emit(e.id),t&&t.stopPropagation&&t.stopPropagation()}setPosition(e){this.dragPosition=e,this.isDragging&&this.dragPositionChange.emit(e?{id:this.item.id,position:e}:null)}}return SystemTreeItem.ɵfac=function(e){return new(e||SystemTreeItem)},SystemTreeItem.ɵcmp=i.Xpm({type:SystemTreeItem,selectors:[["system-tree-item"]],inputs:{item:"item",config:"config",isDragging:"isDragging"},outputs:{onItemAdd:"onItemAdd",toggleExpandedChange:"toggleExpandedChange",dragPositionChange:"dragPositionChange"},decls:12,vars:10,consts:[[1,"slds-p-left--x-small",3,"mouseleave"],[2,"height","0.37rem","width","100%",3,"mouseenter"],[1,"slds-grid","slds-grid--align-spread","slds-grid_vertical-align-center",3,"mouseenter"],[1,"slds-grid","slds-grid_vertical-align-center","slds-grow","slds-truncate"],[2,"min-width","16px"],["class","slds-button slds-button_icon slds-m-right--xx-small slds-m-top--none","aria-expanded","true","aria-hidden","true","tabindex","-1",3,"disabled","click",4,"ngIf"],["size","xx-small",3,"icon","addclasses",4,"ngIf"],[1,"slds-truncate"],[1,"slds-tree__item-label","slds-truncate"],["class","slds-m-right--xx-small",4,"ngIf"],["aria-expanded","true","aria-hidden","true","tabindex","-1",1,"slds-button","slds-button_icon","slds-m-right--xx-small","slds-m-top--none",3,"disabled","click"],["size","xx-small",3,"icon"],["size","xx-small",3,"icon","addclasses"],[1,"slds-m-right--xx-small"],[1,"slds-button","slds-button_icon","slds-m-top--none",3,"click"],["icon","add","size","xx-small"]],template:function(e,t){1&e&&(i.TgZ(0,"div",0),i.NdJ("mouseleave",(function(){return t.setPosition(null)})),i.TgZ(1,"div",1),i.NdJ("mouseenter",(function(){return t.setPosition("before")})),i.qZA(),i.TgZ(2,"article",2),i.NdJ("mouseenter",(function(){return t.setPosition("item")})),i.TgZ(3,"div",3)(4,"div",4),i.YNc(5,a,2,2,"button",5),i.YNc(6,d,1,2,"system-utility-icon",6),i.qZA(),i.TgZ(7,"div",7)(8,"span",8),i._uU(9),i.qZA()()(),i.YNc(10,r,3,0,"div",9),i.qZA(),i.TgZ(11,"div",1),i.NdJ("mouseenter",(function(){return t.setPosition("after")})),i.qZA()()),2&e&&(i.xp6(1),i.Udp("box-shadow",t.isDragging&&"before"==t.dragPosition?"0 -2px":"none"),i.xp6(1),i.Udp("box-shadow",t.isDragging&&"item"==t.dragPosition?"0 0 0 2.5px":"none"),i.xp6(3),i.Q6J("ngIf",t.config.collapsible&&t.item.systemTreeDefs.hasChildren),i.xp6(1),i.Q6J("ngIf",!t.config.collapsible),i.xp6(3),i.Oqu(t.item.name),i.xp6(1),i.Q6J("ngIf",t.config.canadd&&t.item.systemTreeDefs.isSelected),i.xp6(1),i.Udp("box-shadow",t.isDragging&&"after"==t.dragPosition?"0 2px":"none"))},dependencies:[n.O5,l.J,o.r],encapsulation:2}),SystemTreeItem})()},8322:(e,t,s)=>{"use strict";s.d(t,{E:()=>l});var i=s(1571);const n=["*"];let l=(()=>{class SystemTrendIndicator{constructor(){this.trend="neutral"}}return SystemTrendIndicator.ɵfac=function(e){return new(e||SystemTrendIndicator)},SystemTrendIndicator.ɵcmp=i.Xpm({type:SystemTrendIndicator,selectors:[["system-trend-indicator"]],inputs:{trend:"trend"},ngContentSelectors:n,decls:6,vars:1,consts:[[1,"slds-icon-trend","slds-is-animated"],["viewBox","0 0 16 16","aria-hidden","true"],["d","M.75 8H11M8 4.5L11.5 8 8 11.5",1,"slds-icon-trend__arrow"],["cy","8","cx","8","r","7.375","transform","rotate(-28 8 8) scale(-1 1) translate(-16 0)",1,"slds-icon-trend__circle"],[1,"slds-assistive-text"]],template:function(e,t){1&e&&(i.F$t(),i.TgZ(0,"span",0),i.O4$(),i.TgZ(1,"svg",1),i._UZ(2,"path",2)(3,"circle",3),i.qZA(),i.kcU(),i.TgZ(4,"span",4),i.Hsn(5),i.qZA()()),2&e&&i.uIk("data-slds-trend",t.trend)},encapsulation:2}),SystemTrendIndicator})()},8859:(e,t,s)=>{"use strict";s.d(t,{r:()=>o});var i=s(1571),n=s(151),l=s(6895);let o=(()=>{class SystemUtilityIcon{constructor(e){this.cdref=e,this.icon="",this.size="small",this.addclasses="",this.colorclass="slds-icon-text-default",this.title="",this.click=new i.vpe}ngOnChanges(e){this.cdref.detectChanges()}getSvgHRef(){return"./vendor/sldassets/icons/"+this._sprite+"-sprite/svg/symbols.svg#"+this._icon}getIconClass(){return"slds-icon slds-icon_container  slds-icon--"+this._size+" "+this.colorclass+" "+this.addclasses}get _icon(){return this.icon&&this.icon.indexOf(":")>0?this.icon.split(":")[1]:this.icon}get _sprite(){return this.icon&&this.icon.indexOf(":")>0?this.icon.split(":")[0]:"utility"}get _size(){return this.icon&&this.icon.indexOf(":")>0&&this.icon.split(":").length>2?this.icon.split(":")[2]:this.size?this.size:"small"}}return SystemUtilityIcon.ɵfac=function(e){return new(e||SystemUtilityIcon)(i.Y36(i.sBO))},SystemUtilityIcon.ɵcmp=i.Xpm({type:SystemUtilityIcon,selectors:[["system-utility-icon"]],inputs:{icon:"icon",size:"size",addclasses:"addclasses",colorclass:"colorclass",title:"title"},outputs:{click:"click"},features:[i.TTD],decls:3,vars:3,consts:[[1,"slds-icon_container","slds-icon-text-error",3,"system-title","click"],["aria-hidden","true",3,"ngClass"]],template:function(e,t){1&e&&(i.TgZ(0,"div",0),i.NdJ("click",(function(e){return t.click.emit(e)})),i.O4$(),i.TgZ(1,"svg",1),i._UZ(2,"use"),i.qZA()()),2&e&&(i.Q6J("system-title",t.title),i.xp6(1),i.Q6J("ngClass",t.getIconClass()),i.xp6(1),i.uIk("href",t.getSvgHRef(),null,"xlink"))},dependencies:[n.S,l.mk],encapsulation:2,changeDetection:0}),SystemUtilityIcon})()},4036:(e,t,s)=>{"use strict";s.d(t,{N:()=>n});var i=s(1571);let n=(()=>{class SystemModuleCustomPipe{transform(e,t){let s=[];for(let i of e)i.module==t&&"custom"==i.type&&s.push(i);return s}}return SystemModuleCustomPipe.ɵfac=function(e){return new(e||SystemModuleCustomPipe)},SystemModuleCustomPipe.ɵpipe=i.Yjl({name:"systemmodulecustompipe",type:SystemModuleCustomPipe,pure:!1}),SystemModuleCustomPipe})()},7302:(e,t,s)=>{"use strict";s.d(t,{m:()=>n});var i=s(1571);let n=(()=>{class SystemModuleGlobalPipe{transform(e,t){let s=[];for(let i of e)i.module==t&&"global"==i.type&&s.push(i);return s}}return SystemModuleGlobalPipe.ɵfac=function(e){return new(e||SystemModuleGlobalPipe)},SystemModuleGlobalPipe.ɵpipe=i.Yjl({name:"systemmoduleglobalpipe",type:SystemModuleGlobalPipe,pure:!0}),SystemModuleGlobalPipe})()},4817:(e,t,s)=>{"use strict";s.d(t,{L:()=>o});var i=s(6895),n=s(1571),l=s(4505);let o=(()=>{class systemrichtextservice{constructor(e,t){this._document=e,this.backend=t,this.marketingActions=null,this.dummyHtmlElement=document.createElement("div")}executeCommand(e){"h1"!==e&&"h2"!==e&&"h3"!==e&&"h4"!==e&&"h5"!==e&&"h6"!==e&&"p"!==e&&"pre"!==e&&"div"!==e||this._document.execCommand("formatBlock",!1,e),this._document.execCommand(e,!1,null)}insertColor(e,t){this.restoreSelection()&&("textColor"===t?this._document.execCommand("foreColor",!1,e):this._document.execCommand("hiliteColor",!1,e))}setFontName(e){this._document.execCommand("fontName",!1,e)}setFontSize(e){this._document.execCommand("fontSize",!1,e)}insertHtml(e){if(!this._document.execCommand("insertHTML",!1,e))throw new Error("Unable to perform the operation")}saveSelection(){if(window.getSelection){const e=window.getSelection();if(this.savedSelectionParentElement=e.anchorNode.parentElement,e.getRangeAt&&e.rangeCount){this.savedSelection=e.getRangeAt(0),this.selectedText=e.toString();let t=document.createElement("div");t.appendChild(this.savedSelection.cloneContents()),this.selectedHtml=t.innerHTML}}else this._document.getSelection&&this._document.createRange?this.savedSelection=document.createRange():this.savedSelection=null}restoreSelection(){if(!this.savedSelection)return!1;if(window.getSelection){const e=window.getSelection();return e.removeAllRanges(),e.addRange(this.savedSelection),!0}return!!this._document.getSelection||void 0}checkSelection(){if(0===this.savedSelection.toString().length)throw new Error("No Selection Made");return!0}insertImage(e,t){const s=document.createElement("IMG");s.src=e,this.insertElement(s)}insertAnchor(e,t,s={}){const i=document.createElement("A");i.href=e,this.addDataAttributes(i,s),i.innerHTML=t,this.insertElement(i)}addDataAttributes(e,t){for(let s in t)e.dataset[s]=t[s]}insertElement(e){if(this.savedSelection){this.resetRangeBoundaries(this.editorContainer);let t=this.getRangeCurrentTarget(this.savedSelection.startContainer,this.editorContainer);const s=this.savedSelection.collapsed&&0==this.savedSelection.startOffset;let i;this.editorContainer.isEqualNode(t)?(i=s?this.editorContainer.firstChild:null,this.insertElementForNode(e,this.editorContainer,i)):(i=s?t:t.nextSibling,this.insertElementForNode(e,t.parentElement,i)),this.clearSelection()}else this.insertElementForNode(e,this.editorContainer)}clearSelection(){this.savedSelection=void 0,window.getSelection?window.getSelection().removeAllRanges():document.getSelection&&document.getSelection().removeAllRanges()}resetRangeBoundaries(e){this.savedSelection&&(e.contains(this.savedSelection.startContainer)||this.savedSelection.setStart(e,0),e.contains(this.savedSelection.endContainer)||this.savedSelection.setEnd(e,0))}insertElementForNode(e,t,s){this.savedSelection&&this.savedSelection.deleteContents(),s?t.insertBefore(e,s):t.appendChild(e)}getRangeCurrentTarget(e,t){let s=e;if(t.isEqualNode(s))return t;for(;1!==s.nodeType;)s=s.parentElement;return s}createCustomClass(e){const t=e.tag?e.tag:"span",s="<"+t+' class="'+e.class+'">'+this.selectedText+"</"+t+">";this.insertHtml(s)}decodeHTMLEntities(e){return this.dummyHtmlElement.innerHTML=e,this.dummyHtmlElement.innerText}encodeHTMLEntities(e){return this.dummyHtmlElement.innerText=e,this.dummyHtmlElement.innerHTML}loadMarketingActions(e=!1){!e&&_.isArray(this.marketingActions)||this.backend.getRequest("module/MarketingActions/all/actions").subscribe((e=>{this.marketingActions=e.actions}))}}return systemrichtextservice.ɵfac=function(e){return new(e||systemrichtextservice)(n.LFG(i.K0),n.LFG(l.y))},systemrichtextservice.ɵprov=n.Yz7({token:systemrichtextservice,factory:systemrichtextservice.ɵfac}),systemrichtextservice})()},5478:(e,t,s)=>{"use strict";s.r(t),s.d(t,{SystemComponents:()=>wn});var i=s(2563),n=s(6895),l=s(433),o=s(4357),a=s(4036),d=s(7302),r=s(6010),c=s(1571),u=s(5329),m=s(4154),h=s(3278),g=s(2656),p=s(3463),f=s(9621),b=s(3499),y=s(5767),v=s(1916);function x(e,t){if(1&e&&(c.TgZ(0,"div",19),c._UZ(1,"system-label",20),c.qZA()),2&e){const e=c.oxw();c.Udp("visibility",e.pausing?"hidden":"visible")}}function Z(e,t){if(1&e&&c._UZ(0,"div",21),2&e){const e=c.oxw();c.Q6J("innerHTML",e.theTextHtml,c.oJD)}}function w(e,t){if(1&e&&(c.TgZ(0,"option",22),c._uU(1),c.qZA()),2&e){const e=t.$implicit,s=t.index,i=c.oxw();c.Q6J("value",e.id)("selected",s==i.selectedLanguage),c.xp6(1),c.Oqu(e.name)}}function T(e,t){1&e&&(c.ynx(0),c._UZ(1,"system-button-icon",16)(2,"system-label",23),c.BQk()),2&e&&(c.xp6(1),c.Q6J("icon","pause")("position","left"))}function C(e,t){1&e&&(c.ynx(0),c._UZ(1,"system-button-icon",16)(2,"system-label",24),c.BQk()),2&e&&(c.xp6(1),c.Q6J("icon","record")("position","left"))}let A=(()=>{class SpeechRecognition{constructor(e,t,s,i,n){this.language=e,this.metadata=t,this.toast=s,this.changeDetRef=i,this.applicationRef=n,this.theText="",this.theTextNewest="",this.theTextHtml="",this.dirty=!1,this.errorOccurred=!1,this.toRestart=!1,this.recognizing=!1,this.cancelling=!1,this.stopping=!1,this.pausing=!1,this.working=!1,this.languages=[{id:"de_DE",name:"Deutsch"},{id:"en_US",name:"English"}],this.selectedLanguage=0}ngOnInit(){window.webkitSpeechRecognition||(this.toast.sendToast("Sorry, speech recognition is possible only with Google Chrome.","error"),this.self.destroy()),"de_DE"===this.language.currentlanguage?this.selectedLanguage=0:this.selectedLanguage=1,this.recognition=new(window.SpeechRecognition||window.webkitSpeechRecognition||window.mozSpeechRecognition||window.msSpeechRecognition),this.recognition.continuous=!0,this.recognition.lang=this.languages[this.selectedLanguage].id,this.recognition.interimResults=!0,this.recognition.maxAlternatives=1,this.part1fromField=this.textfield.element.nativeElement.value.substring(0,this.textfield.element.nativeElement.selectionStart),this.part2fromField=this.textfield.element.nativeElement.value.substring(this.textfield.element.nativeElement.selectionEnd),this.recognition.onresult=e=>{this.working=!0,this.changeDetRef.detectChanges();let t="",s=!0;for(let i of e.results)i.isFinal||(s=!1),t+=i[0].transcript,this.theTextNewest=t;s&&(this.working=!1,this.changeDetRef.detectChanges()),!this.dirty&&this.theTextNewest&&(this.dirty=!0),this.dirty&&(this.theTextHtml="<p>"+this.linebreaks2html(this.capitalize(this.theText+" "+this.theTextNewest))+"</p>",this.changeDetRef.detectChanges())},this.recognition.onerror=e=>{switch(e.error){case"network":this.errorOccurred=!0,this.sendErrorToast(this.language.getLabel("MSG_NO_NETWORK"));break;case"no-speech":return void(this.stopping||this.recognition.stop());case"audio-capture":this.errorOccurred=!0,this.sendErrorToast(this.language.getLabel("MSG_NO_MICROPHONE"));break;case"not-allowed":this.errorOccurred=!0,e.timeStamp-this.start_timestamp<100?this.sendErrorToast(this.language.getLabel("LBL_BLOCKED")):this.sendErrorToast(this.language.getLabel("LBL_DENIED"))}this.applicationRef.tick()},this.recognition.onend=e=>{this.working=!1,this.cancelling?this.self.destroy():!this.pausing||this.stopping?this.acceptAndClose():this.applyText()},this.start()}doRestart(){this.toRestart=!0,this.recognition.stop()}applyText(){this.theText+=""===this.theText?this.capitalize(this.theTextNewest):this.theTextNewest,this.theTextNewest=""}acceptAndClose(){if(this.applyText(),this.errorOccurred)""===this.theText&&""===this.theTextNewest&&this.self.destroy();else{if(!this.stopping)return this.recognition.start(),void(this.toRestart&&(this.toRestart=!1));this.recognizing=!1,this.textfield.element.nativeElement.value=this.part1fromField+this.theText+this.part2fromField,this.textfield.element.nativeElement.dispatchEvent(new Event("change")),this.self.destroy()}}start(e=null){this.recognizing||(this.recognizing=!0,this.recognition.start(),e&&(this.start_timestamp=e.timeStamp))}buttonAcceptClose(){this.stopping=!0,this.pausing?this.acceptAndClose():this.recognition.stop()}buttonPause(){this.pausing=!this.pausing,this.changeDetRef.detectChanges(),this.applicationRef.tick(),this.pausing&&this.recognition.stop(),!this.pausing&&this.recognition.start()}buttonCancel(){this.cancelling=!0,this.pausing&&this.recognition.start(),this.recognition.abort(),this.self.destroy()}changeLang(e){this.selectedLanguage=e.target.selectedIndex,this.recognition.lang=this.languages[this.selectedLanguage].id,this.doRestart()}capitalize(e){return 0===this.part1fromField.length?e.replace(/\S/,(e=>e.toUpperCase())):e}linebreaks2html(e){return e.replace(/\n\n/g,"</p><p>").replace(/\n/g,"<br>")}sendErrorToast(e){this.toast.sendToast(this.language.getLabel("ERR_SPEECH_RECOGNITION")+": "+e+".","error","",!1)}}return SpeechRecognition.ɵfac=function(e){return new(e||SpeechRecognition)(c.Y36(u.d),c.Y36(m.Pu),c.Y36(h.A),c.Y36(c.sBO),c.Y36(c.z2F))},SpeechRecognition.ɵcmp=c.Xpm({type:SpeechRecognition,selectors:[["ng-component"]],decls:24,vars:9,consts:[["size","large"],[3,"close"],["label","LBL_SPEECH_RECOGNITION"],[2,"min-height","300px"],["class","slds-text-align_center slds-m-vertical--x-large","style","margin-bottom:3rem",3,"visibility",4,"ngIf"],["class","slds-text-longform",3,"innerHTML",4,"ngIf"],[1,"slds-grid","slds-grid_align-spread"],[1,"slds-col"],[1,"slds-select_container"],[1,"slds-select",3,"change"],[3,"value","selected",4,"ngFor","ngForOf"],[1,"slds-button","slds-button--neutral",3,"click"],["label","LBL_CANCEL"],[1,"slds-button","slds-button--neutral",3,"disabled","click"],[4,"ngIf"],[1,"slds-button","slds-button--brand",3,"disabled","click"],[3,"icon","position"],["label","LBL_ACCEPT"],["label","LBL_CLOSE"],[1,"slds-text-align_center","slds-m-vertical--x-large",2,"margin-bottom","3rem"],["label","LBL_WAITING_START_SPEAKING"],[1,"slds-text-longform",3,"innerHTML"],[3,"value","selected"],["label","LBL_PAUSE"],["label","LBL_CONTINUE"]],template:function(e,t){1&e&&(c.TgZ(0,"system-modal",0)(1,"system-modal-header",1),c.NdJ("close",(function(){return t.buttonCancel()})),c._UZ(2,"system-label",2),c.qZA(),c.TgZ(3,"system-modal-content")(4,"div",3),c.YNc(5,x,2,2,"div",4),c.YNc(6,Z,1,1,"div",5),c.qZA()(),c.TgZ(7,"system-modal-footer")(8,"div",6)(9,"div",7)(10,"div",8)(11,"select",9),c.NdJ("change",(function(e){return t.changeLang(e)})),c.YNc(12,w,2,3,"option",10),c.qZA()()(),c.TgZ(13,"div",7)(14,"button",11),c.NdJ("click",(function(){return t.buttonCancel()})),c._UZ(15,"system-label",12),c.qZA(),c.TgZ(16,"button",13),c.NdJ("click",(function(){return t.buttonPause()})),c.YNc(17,T,3,2,"ng-container",14),c.YNc(18,C,3,2,"ng-container",14),c.qZA(),c.TgZ(19,"button",15),c.NdJ("click",(function(){return t.buttonAcceptClose()})),c._UZ(20,"system-button-icon",16)(21,"system-label",17),c._uU(22," & "),c._UZ(23,"system-label",18),c.qZA()()()()()),2&e&&(c.xp6(5),c.Q6J("ngIf",!t.dirty),c.xp6(1),c.Q6J("ngIf",t.dirty),c.xp6(6),c.Q6J("ngForOf",t.languages),c.xp6(4),c.Q6J("disabled",t.cancelling),c.xp6(1),c.Q6J("ngIf",!t.pausing),c.xp6(1),c.Q6J("ngIf",t.pausing),c.xp6(1),c.Q6J("disabled",!t.dirty||t.cancelling),c.xp6(1),c.Q6J("icon","stop")("position","left"))},dependencies:[n.sg,n.O5,l.YN,l.Kr,g.J,p._,f.j,b.x,y.p,v.y],encapsulation:2}),SpeechRecognition})();var k=s(4994),L=s(4610);const M=function(e){return{"slds-is-open":e}};let S=(()=>{class SystemButtonGroup{constructor(e){this.metadata=e,this.items=[],this.action=new c.vpe,this.isopen=!1}toggleOpen(){this.isopen=!this.isopen}}return SystemButtonGroup.ɵfac=function(e){return new(e||SystemButtonGroup)(c.Y36(m.Pu))},SystemButtonGroup.ɵcmp=c.Xpm({type:SystemButtonGroup,selectors:[["system-button-group"]],inputs:{items:"items"},outputs:{action:"action"},decls:20,vars:3,consts:[["role","group",1,"slds-button-group"],[1,"slds-button","slds-button_neutral"],[1,"slds-dropdown-trigger","slds-dropdown-trigger_click","slds-button_last",3,"ngClass"],[1,"slds-button","slds-button_icon","slds-button_icon-border-filled",3,"click"],["icon","down"],[1,"slds-dropdown","slds-dropdown_right","slds-dropdown_actions"],["role","menu",1,"slds-dropdown__list"],["role","presentation",1,"slds-dropdown__item"],["href","javascript:void(0);","role","menuitem","tabindex","0"],["title","Overflow Item One",1,"slds-truncate"],["href","javascript:void(0);","role","menuitem","tabindex","-1"],["title","Overflow Item Two",1,"slds-truncate"],["title","Overflow Item Three",1,"slds-truncate"]],template:function(e,t){1&e&&(c.TgZ(0,"div",0)(1,"button",1),c._uU(2,"Refresh"),c.qZA(),c.TgZ(3,"div",2)(4,"button",3),c.NdJ("click",(function(){return t.toggleOpen()})),c._UZ(5,"system-button-icon",4),c.qZA(),c.TgZ(6,"div",5)(7,"ul",6)(8,"li",7)(9,"a",8)(10,"span",9),c._uU(11,"Overflow Item One"),c.qZA()()(),c.TgZ(12,"li",7)(13,"a",10)(14,"span",11),c._uU(15,"Overflow Item Two"),c.qZA()()(),c.TgZ(16,"li",7)(17,"a",10)(18,"span",12),c._uU(19,"Overflow Item Three"),c.qZA()()()()()()()),2&e&&(c.xp6(3),c.Q6J("ngClass",c.VKq(1,M,t.isopen)))},dependencies:[n.mk,g.J],encapsulation:2}),SystemButtonGroup})();var I=s(5399),O=s(2400),J=s(8807);const N=["*"];let F=(()=>{class SystemCardFooter{}return SystemCardFooter.ɵfac=function(e){return new(e||SystemCardFooter)},SystemCardFooter.ɵcmp=c.Xpm({type:SystemCardFooter,selectors:[["system-card-footer"]],ngContentSelectors:N,decls:2,vars:0,consts:[[1,"slds-card__footer"]],template:function(e,t){1&e&&(c.F$t(),c.TgZ(0,"footer",0),c.Hsn(1),c.qZA())},encapsulation:2}),SystemCardFooter})();var q=s(701),E=s(9503),Y=s(8658),Q=s(7514),U=s(528),D=s(1553),j=s(7516),R=s(51),B=s(6951),G=s(7579);let P=(()=>{class SystemConfirmDialog{constructor(e){this.language=e,this.self={},this.answer=null,this.answerSubject=null,this.title="title",this.message="message",this.answerSubject=new G.x,this.answer=this.answerSubject.asObservable()}ok(){this.answerSubject.next(!0),this.answerSubject.complete(),this.self.destroy()}cancel(){this.answerSubject.next(!1),this.answerSubject.complete(),this.self.destroy()}}return SystemConfirmDialog.ɵfac=function(e){return new(e||SystemConfirmDialog)(c.Y36(u.d))},SystemConfirmDialog.ɵcmp=c.Xpm({type:SystemConfirmDialog,selectors:[["system-confirm-dialog"]],decls:13,vars:2,consts:[[1,"slds-backdrop","slds-backdrop--open"],["role","dialog","tabindex","-1",1,"slds-modal","slds-fade-in-open"],[1,"slds-modal__container"],[1,"slds-modal__header"],[1,"slds-text-heading--medium"],[1,"slds-modal__content","slds-p-around--medium"],[1,"slds-modal__footer"],[1,"slds-button","slds-button--neutral",3,"click"],["label","LBL_CANCEL"],[1,"slds-button","slds-button--brand",3,"click"],["label","LBL_OK"]],template:function(e,t){1&e&&(c._UZ(0,"div",0),c.TgZ(1,"div",1)(2,"div",2)(3,"div",3)(4,"h2",4),c._uU(5),c.qZA()(),c.TgZ(6,"div",5),c._uU(7),c.qZA(),c.TgZ(8,"div",6)(9,"button",7),c.NdJ("click",(function(){return t.cancel()})),c._UZ(10,"system-label",8),c.qZA(),c.TgZ(11,"button",9),c.NdJ("click",(function(){return t.ok()})),c._UZ(12,"system-label",10),c.qZA()()()()),2&e&&(c.xp6(5),c.Oqu(t.title),c.xp6(2),c.hij(" ",t.message," "))},dependencies:[p._],styles:["[_nghost-%COMP%]{position:relative;z-index:9100}"]}),SystemConfirmDialog})();var H=s(34),z=s(6538),V=s(4270),K=s(2995),$=s(5920),X=s(7774);const W=["componentcontainer"];let ee=(()=>{class SystemDynamicRouteContainer{constructor(e,t,s,i){this.metadata=e,this.session=t,this.router=s,this.route=i,this.routercomponent=null,this.session&&this.session.authData.sessionId||this.router.navigate(["/login"])}ngAfterViewInit(){if(!this.routercomponent){let e=this.metadata.getRouteComponent(this.route.snapshot.routeConfig.path);this.metadata.addComponent(e,this.componentcontainer).subscribe((e=>{this.routercomponent=e}))}}}return SystemDynamicRouteContainer.ɵfac=function(e){return new(e||SystemDynamicRouteContainer)(c.Y36(m.Pu),c.Y36($.n),c.Y36(X.F0),c.Y36(X.gz))},SystemDynamicRouteContainer.ɵcmp=c.Xpm({type:SystemDynamicRouteContainer,selectors:[["system-dynamicroute-container"]],viewQuery:function(e,t){if(1&e&&c.Gf(W,7,c.s_b),2&e){let e;c.iGM(e=c.CRH())&&(t.componentcontainer=e.first)}},decls:2,vars:0,consts:[["componentcontainer",""]],template:function(e,t){1&e&&c._UZ(0,"div",null,0)},encapsulation:2}),SystemDynamicRouteContainer})();var te=s(512),se=s(5659),ie=s(3845),ne=s(4561),le=s(7693),oe=s(4567),ae=s(2646),de=s(4730),re=s(9016),ce=s(9574),ue=s(4664);function me(e,t){1&e&&c._UZ(0,"system-spinner")}function he(e,t){1&e&&(c.TgZ(0,"system-illustration-page-not-available"),c._UZ(1,"system-label",9),c.qZA())}function ge(e,t){if(1&e&&(c.TgZ(0,"div",7),c.YNc(1,me,1,0,"system-spinner",8),c.YNc(2,he,2,0,"system-illustration-page-not-available",8),c.qZA()),2&e){const e=c.oxw();c.xp6(1),c.Q6J("ngIf",!e.loadingerror),c.xp6(1),c.Q6J("ngIf",e.loadingerror)}}function pe(e,t){if(1&e&&(c.TgZ(0,"div",10),c._UZ(1,"img",11),c.qZA()),2&e){const e=c.oxw();c.xp6(1),c.Q6J("src",e.imgsrc,c.LSH)}}let fe=(()=>{class SystemImagePreviewModal{constructor(e){this.language=e,this.self={},this.imgsrc="",this.imgtype="",this.imgname="",this.loadingerror=!1}closeModal(){this.self.destroy()}download(){let e=this.b64toBlob(this.imgsrc.replace("data:"+this.imgtype+";base64,",""),this.imgtype),t=URL.createObjectURL(e),s=document.createElement("a");document.body.appendChild(s),s.href=t,s.download=this.imgname,s.click(),s.remove()}b64toBlob(e,t="",s=512){let i=atob(e),n=[];for(let e=0;e<i.length;e+=s){let t=i.slice(e,e+s),l=new Array(t.length);for(let e=0;e<t.length;e++)l[e]=t.charCodeAt(e);let o=new Uint8Array(l);n.push(o)}return new Blob(n,{type:t})}}return SystemImagePreviewModal.ɵfac=function(e){return new(e||SystemImagePreviewModal)(c.Y36(u.d))},SystemImagePreviewModal.ɵcmp=c.Xpm({type:SystemImagePreviewModal,selectors:[["ng-component"]],inputs:{imgsrc:"imgsrc",imgtype:"imgtype",imgname:"imgname",loadingerror:"loadingerror"},decls:9,vars:3,consts:[["size","large"],[3,"close"],["margin","none"],["style","height: 50vh;","class","slds-align--absolute-center",4,"ngIf"],["class","slds-text-align--center","style","height:100%",4,"ngIf"],[1,"slds-button","slds-button--icon","slds-button--icon-border",3,"click"],["icon","download","size","small"],[1,"slds-align--absolute-center",2,"height","50vh"],[4,"ngIf"],["label","MSG_ERROR_LOADING_FILE"],[1,"slds-text-align--center",2,"height","100%"],[2,"max-height","100%","max-width","100%",3,"src"]],template:function(e,t){1&e&&(c.TgZ(0,"system-modal",0)(1,"system-modal-header",1),c.NdJ("close",(function(){return t.closeModal()})),c._uU(2),c.qZA(),c.TgZ(3,"system-modal-content",2),c.YNc(4,ge,3,2,"div",3),c.YNc(5,pe,2,1,"div",4),c.qZA(),c.TgZ(6,"system-modal-footer")(7,"button",5),c.NdJ("click",(function(){return t.download()})),c._UZ(8,"system-button-icon",6),c.qZA()()()),2&e&&(c.xp6(2),c.Oqu(t.imgname),c.xp6(2),c.Q6J("ngIf",!t.imgsrc),c.xp6(1),c.Q6J("ngIf",t.imgsrc))},dependencies:[n.O5,g.J,ce.k,p._,f.j,b.x,y.p,v.y,ue.W],encapsulation:2}),SystemImagePreviewModal})();var be=s(3772),_e=s(5147),ye=s(1555),ve=s(638),xe=s(4728),Ze=s(4665),we=s(9422),Te=s(6625);function Ce(e,t){if(1&e&&(c.TgZ(0,"option",8),c._uU(1),c.qZA()),2&e){const e=t.$implicit;c.Q6J("value","+"+e),c.xp6(1),c.hij("+",e,"")}}function Ae(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"div",3)(1,"select",4,5),c.NdJ("ngModelChange",(function(t){c.CHM(e);const s=c.oxw();return c.KtG(s.value=t)})),c._UZ(3,"option",6),c.YNc(4,Ce,2,2,"option",7),c.qZA()()}if(2&e){const e=c.oxw();c.xp6(1),c.Q6J("ngModel",e.value),c.xp6(3),c.Q6J("ngForOf",e.countrycodes)}}function ke(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"div",9)(1,"input",10),c.NdJ("ngModelChange",(function(t){c.CHM(e);const s=c.oxw();return c.KtG(s.value=t)})),c.qZA()()}if(2&e){const e=c.oxw();c.xp6(1),c.Q6J("ngModel",e.value)}}let Le=(()=>{class SystemInputCountryCode{constructor(e,t,s){this.metadata=e,this.language=t,this.configuration=s,this.countrycodes=[],this.strict=!1,"strict"==this.configuration.data.backendextensions.spiceui.config.format&&(this.strict=!0)}get value(){return this._value}set value(e){e!=this._value&&(this._value=e,this.onChange(e))}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}writeValue(e){this._value=e}ngOnInit(){this.strict&&this.getCountries()}getCountries(){this.countrycodes=[];let e=this.configuration.getData("countries");for(let t of e.countries)!t.e164||this.countrycodes.indexOf(t.e164)>=0||this.countrycodes.push(t.e164);this.countrycodes.sort()}}return SystemInputCountryCode.ɵfac=function(e){return new(e||SystemInputCountryCode)(c.Y36(m.Pu),c.Y36(u.d),c.Y36(Te.C))},SystemInputCountryCode.ɵcmp=c.Xpm({type:SystemInputCountryCode,selectors:[["system-input-country-code"]],features:[c._Bn([{provide:l.JU,useExisting:(0,c.Gpc)((()=>SystemInputCountryCode)),multi:!0}])],decls:4,vars:2,consts:[[1,"slds-form-element"],["class","slds-select_container",4,"ngIf","ngIfElse"],["countryinput",""],[1,"slds-select_container"],[1,"slds-select",3,"ngModel","ngModelChange"],["focus",""],["value",""],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[1,"slds-form-element__control"],["type","text",1,"slds-input",3,"ngModel","ngModelChange"]],template:function(e,t){if(1&e&&(c.TgZ(0,"div",0),c.YNc(1,Ae,5,2,"div",1),c.YNc(2,ke,2,1,"ng-template",null,2,c.W1O),c.qZA()),2&e){const e=c.MAs(3);c.xp6(1),c.Q6J("ngIf",t.strict)("ngIfElse",e)}},dependencies:[n.sg,n.O5,l.YN,l.Kr,l.Fj,l.EJ,l.JJ,l.On],encapsulation:2}),SystemInputCountryCode})();var Me=s(4114),Se=s(6822),Ie=s(7758),Oe=s(6659),Je=s(3497),Ne=s(6898),Fe=s(3673),qe=s(4375),Ee=s(5621),Ye=s(7919),Qe=s(9901),Ue=s(6271),De=s(4846),je=s(3144),Re=s(1078),Be=s(2006),Ge=s(1e3),Pe=s(8973);let He=(()=>{class SystemInstallerComponent{}return SystemInstallerComponent.ɵfac=function(e){return new(e||SystemInstallerComponent)},SystemInstallerComponent.ɵcmp=c.Xpm({type:SystemInstallerComponent,selectors:[["system-installer-component"]],decls:1,vars:1,consts:[[3,"component"]],template:function(e,t){1&e&&c._UZ(0,"system-dynamic-component",0),2&e&&c.Q6J("component","SpiceInstaller")},dependencies:[K.T],encapsulation:2}),SystemInstallerComponent})();var ze=s(4505),Ve=s(6163),Ke=s(4044),$e=s(4021),Xe=s(151);function We(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"system-input-radio",16),c.NdJ("ngModelChange",(function(t){c.CHM(e);const s=c.oxw(2);return c.KtG(s.currentScope=t)}))("ngModelChange",(function(){c.CHM(e);const t=c.oxw(2);return c.KtG(t.setUntranslatedLanguages())})),c._uU(1),c.qZA()}if(2&e){const e=t.$implicit,s=c.oxw(2);c.Q6J("ngModel",s.currentScope)("value",e)("disabled","global"==e&&"custom"==s.labelData.scope),c.xp6(1),c.hij(" ",e," ")}}function et(e,t){if(1&e&&(c.TgZ(0,"div",14),c.YNc(1,We,2,4,"system-input-radio",15),c.qZA()),2&e){const e=c.oxw();c.xp6(1),c.Q6J("ngForOf",e.scopes)}}function tt(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"article")(1,"div",18)(2,"div",19)(3,"h2"),c._uU(4),c.qZA()(),c.TgZ(5,"div",20)(6,"div",21)(7,"label"),c._UZ(8,"system-label",22),c._uU(9,": "),c.qZA(),c.TgZ(10,"input",23),c.NdJ("ngModelChange",(function(t){const s=c.CHM(e).$implicit;return c.KtG(s.translation_short=t)})),c.qZA()(),c.TgZ(11,"div",21)(12,"label")(13,"abbr",24),c._uU(14,"*"),c.qZA(),c._UZ(15,"system-label",25),c._uU(16,": "),c.qZA(),c.TgZ(17,"input",26),c.NdJ("ngModelChange",(function(t){const s=c.CHM(e).$implicit;return c.KtG(s.translation_default=t)})),c.qZA()(),c.TgZ(18,"div",21)(19,"label"),c._UZ(20,"system-label",27),c._uU(21,": "),c.qZA(),c.TgZ(22,"textarea",28),c.NdJ("ngModelChange",(function(t){const s=c.CHM(e).$implicit;return c.KtG(s.translation_long=t)})),c.qZA()()()()()}if(2&e){const e=t.$implicit,s=c.oxw(2);c.xp6(4),c.Oqu(s.languagesNames[e.syslanguage]),c.xp6(6),c.Q6J("ngModel",e.translation_short),c.xp6(7),c.Q6J("ngModel",e.translation_default),c.xp6(5),c.Q6J("ngModel",e.translation_long)}}function st(e,t){if(1&e&&(c.ynx(0),c.YNc(1,tt,23,4,"article",17),c.BQk()),2&e){const e=c.oxw();c.xp6(1),c.Q6J("ngForOf",e.translations)("ngForTrackBy",e.trackByFn)}}function it(e,t){if(1&e&&(c.TgZ(0,"option",37),c._uU(1),c.qZA()),2&e){const e=t.$implicit;c.s9C("value",e.language),c.xp6(1),c.hij(" ",e.text," ")}}function nt(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"div",29)(1,"div",29)(2,"div",30)(3,"div",31)(4,"select",32,33),c.YNc(6,it,2,2,"option",34),c.qZA()()(),c.TgZ(7,"button",35),c.NdJ("click",(function(){c.CHM(e);const t=c.MAs(5),s=c.oxw();return c.KtG(s.addTranslation(t.value))})),c._UZ(8,"system-label",36),c.qZA()()()}if(2&e){const e=c.oxw();c.xp6(6),c.Q6J("ngForOf",e.untranslatedLanguages)}}let lt=(()=>{class SystemLabelEditorModal{constructor(e,t,s,i,n,l){this.backend=e,this.metadata=t,this.language=s,this.utils=i,this.toast=n,this.modal=l,this.availableLanguages=[],this.currentScope="global",this.scopes=["global","custom"],this.languagesNames={},this.untranslatedLanguages=[],this.isLoading=!1,this._labelData=null}get labelData(){return this._labelData}set labelData(e){if(this._labelData=e,e&&0!=e[this.currentScope+"_translations"].length){for(let t of this.scopes)if(e[t+"_translations"].length>0){this.currentScope=t;break}e[this.currentScope+"_translations"].sort(((e,t)=>e.syslanguage==this.language.languagedata.languages.default||e.syslanguage<t.syslanguage?-1:e.syslanguage>t.syslanguage?1:void 0))}}get translations(){return this.labelData[`${this.currentScope}_translations`]}addTranslation(e){this.labelData[this.currentScope+"_translations"]||(this.labelData[this.currentScope+"_translations"]=[]),e||(e=this.untranslatedLanguages[0]),this.labelData[this.currentScope+"_translations"].push({id:this.utils.generateGuid(),syslanguagelabel_id:this.labelData.id,syslanguage:e}),this.setUntranslatedLanguages()}ngOnInit(){this.loadAvailableLanguages(),this.retrieveLabelData()}trackByFn(e,t){return e}retrieveLabelData(){this.isLoading=!0,this.backend.getRequest("configuration/syslanguages/labels/"+this.labelData.name).subscribe((e=>{this.isLoading=!1,e?this.labelData=e:this.modal.openModal("SystemLabelEditorGlobalCustomModal",!1).subscribe((e=>{e.instance.labelscope.subscribe((e=>{this.currentScope=e,this.labelData={id:this.utils.generateGuid(),name:this.labelData.name,scope:this.currentScope,global_translations:[],custom_translations:[]},this.addTranslation(this.language.currentlanguage)}))})),this.setUntranslatedLanguages()}),(()=>this.isLoading=!1))}save(){this.close(),this.backend.postRequest("configuration/syslanguages/labels",null,[this.labelData]).subscribe((()=>{let e=this.translations.find((e=>e.syslanguage==this.language.currentlanguage));this.language.addLabel(this.labelData.name,e.translation_default,e.translation_short,e.translation_long),this.language.currentlanguage$.emit(this.language.currentlanguage),this.toast.sendToast(this.language.getLabel("LBL_DATA_SAVED"),"success")}))}setUntranslatedLanguages(){this.untranslatedLanguages=this.translations?this.availableLanguages.filter((e=>!this.translations.some((t=>t.syslanguage==e.language)))):this.availableLanguages}loadAvailableLanguages(){this.availableLanguages=this.language.getAvialableLanguages(),this.availableLanguages.forEach((e=>this.languagesNames[e.language]=e.text))}close(){this.self.destroy()}}return SystemLabelEditorModal.ɵfac=function(e){return new(e||SystemLabelEditorModal)(c.Y36(ze.y),c.Y36(m.Pu),c.Y36(u.d),c.Y36(Ve.A),c.Y36(h.A),c.Y36(Ke.o))},SystemLabelEditorModal.ɵcmp=c.Xpm({type:SystemLabelEditorModal,selectors:[["system-label-editor-modal"]],decls:17,vars:6,consts:[["size","large"],[3,"close"],["margin","none",3,"grow"],[1,"slds-size--1-of-1","slds-p-around--small","slds-height_full",3,"system-overlay-loading-spinner"],[1,"slds-grid","slds-grid--vertical-align-center","slds-p-bottom--small"],[1,"slds-p-vertical--small","slds-text-heading--small"],["label","LBL_TRANSLATIONS"],["class","slds-grid slds-col--bump-left",4,"ngIf"],[4,"ngIf"],["class","slds-grid",4,"ngIf"],[1,"slds-button","slds-button--neutral",3,"click"],["label","LBL_CANCEL"],[1,"slds-button","slds-button--brand",3,"click"],["label","LBL_SAVE"],[1,"slds-grid","slds-col--bump-left"],["name","label-editor-modal-translation-scope",3,"ngModel","value","disabled","ngModelChange",4,"ngFor","ngForOf"],["name","label-editor-modal-translation-scope",3,"ngModel","value","disabled","ngModelChange"],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"slds-card","slds-m-bottom--small"],[1,"slds-card__header"],[1,"slds-card__body","slds-p-around--small"],[1,"slds-form-element"],["label","LBL_TEXT_SHORT"],["type","text",1,"slds-input",3,"ngModel","ngModelChange"],[1,"slds-required"],["label","LBL_DEFAULT"],["type","text","required","required",1,"slds-input",3,"ngModel","ngModelChange"],["label","LBL_TEXT_LONG"],[1,"slds-textarea",3,"ngModel","ngModelChange"],[1,"slds-grid"],[1,"slds-form-element__control","slds-p-right--x-small"],[1,"slds-select_container"],[1,"slds-select"],["add_translation_language",""],[3,"value",4,"ngFor","ngForOf"],["system-title","LBL_ADD_TRANSLATION",1,"slds-button","slds-button--neutral",3,"click"],["label","LBL_ADD"],[3,"value"]],template:function(e,t){1&e&&(c.TgZ(0,"system-modal",0)(1,"system-modal-header",1),c.NdJ("close",(function(){return t.close()})),c._uU(2),c.qZA(),c.TgZ(3,"system-modal-content",2)(4,"div",3)(5,"div",4)(6,"h2",5),c._UZ(7,"system-label",6),c._uU(8,": "),c.qZA(),c.YNc(9,et,2,1,"div",7),c.qZA(),c.YNc(10,st,2,2,"ng-container",8),c.YNc(11,nt,9,1,"div",9),c.qZA()(),c.TgZ(12,"system-modal-footer")(13,"button",10),c.NdJ("click",(function(){return t.close()})),c._UZ(14,"system-label",11),c.qZA(),c.TgZ(15,"button",12),c.NdJ("click",(function(){return t.save()})),c._UZ(16,"system-label",13),c.qZA()()()),2&e&&(c.xp6(2),c.hij(" ",t.labelData.name," "),c.xp6(1),c.Q6J("grow",!0),c.xp6(1),c.Q6J("system-overlay-loading-spinner",t.isLoading),c.xp6(5),c.Q6J("ngIf",!t.isLoading),c.xp6(1),c.Q6J("ngIf",t.translations),c.xp6(1),c.Q6J("ngIf",!t.isLoading&&(null==t.availableLanguages?null:t.availableLanguages.length)>(null==t.translations?null:t.translations.length)))},dependencies:[$e._,Xe.S,n.sg,n.O5,l.YN,l.Kr,l.Fj,l.JJ,l.Q7,l.On,Qe.A,p._,f.j,b.x,y.p,v.y],encapsulation:2}),SystemLabelEditorModal})(),ot=(()=>{class SystemLabelEditorGlobalCustomModal{constructor(){this.labelscope=new c.vpe}setLabel(e){this.labelscope.emit(e),this.self.destroy()}}return SystemLabelEditorGlobalCustomModal.ɵfac=function(e){return new(e||SystemLabelEditorGlobalCustomModal)},SystemLabelEditorGlobalCustomModal.ɵcmp=c.Xpm({type:SystemLabelEditorGlobalCustomModal,selectors:[["ng-component"]],decls:11,vars:0,consts:[["size","prompt"],["label","LBL_SELECT_SCOPE"],[1,"slds-p-around--small","slds-align--absolute-center"],["label","LBL_SELECT_SCOPE","length","long"],[1,"slds-button","slds-button--brand",3,"click"],["label","LBL_GLOBAL"],["label","LBL_CUSTOM"]],template:function(e,t){1&e&&(c.TgZ(0,"system-modal",0)(1,"system-modal-header"),c._UZ(2,"system-label",1),c.qZA(),c.TgZ(3,"system-modal-content")(4,"div",2),c._UZ(5,"system-label",3),c.qZA()(),c.TgZ(6,"system-modal-footer")(7,"button",4),c.NdJ("click",(function(){return t.setLabel("global")})),c._UZ(8,"system-label",5),c.qZA(),c.TgZ(9,"button",4),c.NdJ("click",(function(){return t.setLabel("custom")})),c._UZ(10,"system-label",6),c.qZA()()())},dependencies:[p._,f.j,b.x,y.p,v.y],encapsulation:2}),SystemLabelEditorGlobalCustomModal})();var at=s(7674),dt=s(3333),rt=s(2892),ct=s(2145),ut=s(8710);let mt=(()=>{class SystemLoadingModal{constructor(e){this.language=e,this.messagelabel="LBL_LOADING"}}return SystemLoadingModal.ɵfac=function(e){return new(e||SystemLoadingModal)(c.Y36(u.d))},SystemLoadingModal.ɵcmp=c.Xpm({type:SystemLoadingModal,selectors:[["ng-component"]],decls:9,vars:1,consts:[["role","dialog","tabindex","-1",1,"slds-modal","slds-fade-in-open"],[1,"slds-modal__container"],[1,"slds-modal__header","slds-modal__header_empty"],[1,"slds-modal__content","slds-p-around_medium"],[1,"slds-align--absolute-center"],[1,"slds-grid","slds-grid--vertical-align-center"],["size","16"],[1,"slds-p-left--small"],[3,"label"]],template:function(e,t){1&e&&(c.TgZ(0,"section",0)(1,"div",1),c._UZ(2,"div",2),c.TgZ(3,"div",3)(4,"div",4)(5,"div",5),c._UZ(6,"system-spinner",6),c.TgZ(7,"div",7),c._UZ(8,"system-label",8),c.qZA()()()()()()),2&e&&(c.xp6(8),c.Q6J("label",t.messagelabel))},dependencies:[p._,ue.W],encapsulation:2}),SystemLoadingModal})();var ht=s(1604),gt=s(6933),pt=s(6559);function ft(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"button",4),c.NdJ("click",(function(){c.CHM(e);const t=c.oxw(2);return c.KtG(t.close.emit(!0))})),c._UZ(1,"system-button-icon",5),c.TgZ(2,"span",6),c._UZ(3,"system-label",7),c.qZA()()}}function bt(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"button",8),c.NdJ("click",(function(){c.CHM(e);const t=c.oxw(2);return c.KtG(t.close.emit(!0))})),c._UZ(1,"system-button-icon",9),c.TgZ(2,"span",6),c._UZ(3,"system-label",7),c.qZA()()}}function _t(e,t){if(1&e&&(c.ynx(0),c.YNc(1,ft,4,0,"button",2),c.YNc(2,bt,4,0,"button",3),c.BQk()),2&e){const e=c.oxw();c.xp6(1),c.Q6J("ngIf",!e.isSmall),c.xp6(1),c.Q6J("ngIf",e.isSmall)}}let yt=(()=>{class SystemModalHeaderEmpty{constructor(e,t){this.language=e,this.layout=t,this.emptyheader=!0,this.close=new c.vpe,this.hiddenCloseButton=!1}set hideClose(e){this.hiddenCloseButton=!1!==e}get isSmall(){return"small"==this.layout.screenwidth}}return SystemModalHeaderEmpty.ɵfac=function(e){return new(e||SystemModalHeaderEmpty)(c.Y36(u.d),c.Y36(pt.b))},SystemModalHeaderEmpty.ɵcmp=c.Xpm({type:SystemModalHeaderEmpty,selectors:[["system-modal-header-empty"]],hostVars:2,hostBindings:function(e,t){2&e&&c.ekj("slds-modal__header_empty",t.emptyheader)},inputs:{hiddenCloseButton:"hiddenCloseButton",hideClose:["system-modal-header-noclose","hideClose"]},outputs:{close:"close"},decls:2,vars:1,consts:[[1,"slds-modal__header","slds-modal__header--empty"],[4,"ngIf"],["class","slds-button slds-button_icon slds-modal__close slds-button--icon-inverse","style","color:white;",3,"click",4,"ngIf"],["class","slds-button slds-button_icon slds-is-absolute","style","top: 3px; right: 3px;",3,"click",4,"ngIf"],[1,"slds-button","slds-button_icon","slds-modal__close","slds-button--icon-inverse",2,"color","white",3,"click"],["icon","close","size","large"],[1,"slds-assistive-text"],["label","LBL_CLOSE"],[1,"slds-button","slds-button_icon","slds-is-absolute",2,"top","3px","right","3px",3,"click"],["icon","close"]],template:function(e,t){1&e&&(c.TgZ(0,"header",0),c.YNc(1,_t,3,2,"ng-container",1),c.qZA()),2&e&&(c.xp6(1),c.Q6J("ngIf",!t.hiddenCloseButton))},dependencies:[n.O5,g.J,p._],encapsulation:2}),SystemModalHeaderEmpty})();const vt=["target"];let xt=(()=>{class SystemModalWrapper{constructor(e,t){this.modalservice=e,this.application=t,this.self=null,this.escKey=!0}closeModal(){this.self.destroy()}ngOnDestroy(){this.modalservice.removeModal(this.self),this.application.tick()}setEscKey(e=!0){this.escKey=e}}return SystemModalWrapper.ɵfac=function(e){return new(e||SystemModalWrapper)(c.Y36(Ke.o),c.Y36(c.z2F))},SystemModalWrapper.ɵcmp=c.Xpm({type:SystemModalWrapper,selectors:[["system-modal-wrapper"]],viewQuery:function(e,t){if(1&e&&c.Gf(vt,7,c.s_b),2&e){let e;c.iGM(e=c.CRH())&&(t.target=e.first)}},decls:3,vars:2,consts:[[2,"position","fixed"],["target",""]],template:function(e,t){1&e&&(c.TgZ(0,"div",0),c._UZ(1,"span",null,1),c.qZA()),2&e&&c.Udp("z-index",t.zIndex)},encapsulation:2}),SystemModalWrapper})();var Zt=s(5320),wt=s(1481);function Tt(e,t){1&e&&c._UZ(0,"system-spinner")}function Ct(e,t){1&e&&(c.TgZ(0,"system-illustration-page-not-available"),c._UZ(1,"system-label",7),c.qZA())}function At(e,t){if(1&e&&(c.TgZ(0,"div",5),c.YNc(1,Tt,1,0,"system-spinner",6),c.YNc(2,Ct,2,0,"system-illustration-page-not-available",6),c.qZA()),2&e){const e=c.oxw();c.xp6(1),c.Q6J("ngIf",!e.loadingerror),c.xp6(1),c.Q6J("ngIf",e.loadingerror)}}function kt(e,t){if(1&e&&(c.TgZ(0,"div",11)(1,"audio",12),c._UZ(2,"source",13),c.qZA()()),2&e){const e=c.oxw(2);c.xp6(2),c.Q6J("src",e.blobUrl,c.LSH)("type",e.type)}}function Lt(e,t){if(1&e&&(c.TgZ(0,"div",11)(1,"video",14),c._UZ(2,"source",13),c.qZA()()),2&e){const e=c.oxw(2);c.xp6(2),c.Q6J("src",e.blobUrl,c.LSH)("type",e.type)}}function Mt(e,t){if(1&e&&(c.TgZ(0,"div",15),c._UZ(1,"object",16),c.qZA()),2&e){const e=c.oxw(2);c.xp6(1),c.Q6J("data",e.blobUrl,c.uOi)("type",e.type)}}function St(e,t){if(1&e&&(c.ynx(0,8),c.YNc(1,kt,3,2,"div",9),c.YNc(2,Lt,3,2,"div",9),c.YNc(3,Mt,2,2,"div",10),c.BQk()),2&e){const e=c.oxw();c.Q6J("ngSwitch",e.objecttype),c.xp6(1),c.Q6J("ngSwitchCase","audio"),c.xp6(1),c.Q6J("ngSwitchCase","video")}}let It=(()=>{class SystemObjectPreviewModal{constructor(e,t){this.language=e,this.sanitizer=t,this.self={},this.type="",this.name="",this.loadingerror=!1}closeModal(){this.self.destroy()}set data(e){let t=this.datatoBlob(e,this.type);this.blobUrl=this.sanitizer.bypassSecurityTrustResourceUrl(URL.createObjectURL(t))}get objecttype(){if(!this.type)return"";let e=this.type.split("/");switch(e[0]){case"audio":case"video":return e[0];default:return"object"}}download(){let e=document.createElement("a");document.body.appendChild(e),e.href=this.blobUrl,e.download=this.name,e.click(),e.remove()}datatoBlob(e,t="",s=512){let i=[];for(let t=0;t<e.length;t+=s){let n=e.slice(t,t+s),l=new Array(n.length);for(let e=0;e<n.length;e++)l[e]=n.charCodeAt(e);let o=new Uint8Array(l);i.push(o)}return new Blob(i,{type:t})}}return SystemObjectPreviewModal.ɵfac=function(e){return new(e||SystemObjectPreviewModal)(c.Y36(u.d),c.Y36(wt.H7))},SystemObjectPreviewModal.ɵcmp=c.Xpm({type:SystemObjectPreviewModal,selectors:[["ng-component"]],inputs:{type:"type",name:"name",loadingerror:"loadingerror"},decls:6,vars:3,consts:[["size","large"],[3,"close"],["margin","none"],["style","height: 50vh;","class","slds-align--absolute-center",4,"ngIf"],[3,"ngSwitch",4,"ngIf"],[1,"slds-align--absolute-center",2,"height","50vh"],[4,"ngIf"],["label","MSG_ERROR_LOADING_FILE"],[3,"ngSwitch"],["class","slds-p-around--small slds-text-align--center",4,"ngSwitchCase"],["style","height: 80vh; overflow: hidden;",4,"ngSwitchDefault"],[1,"slds-p-around--small","slds-text-align--center"],["controls",""],[3,"src","type"],["width","320","height","240","controls",""],[2,"height","80vh","overflow","hidden"],["width","100%","height","100%",3,"data","type"]],template:function(e,t){1&e&&(c.TgZ(0,"system-modal",0)(1,"system-modal-header",1),c.NdJ("close",(function(){return t.closeModal()})),c._uU(2),c.qZA(),c.TgZ(3,"system-modal-content",2),c.YNc(4,At,3,2,"div",3),c.YNc(5,St,4,3,"ng-container",4),c.qZA()()),2&e&&(c.xp6(2),c.Oqu(t.name),c.xp6(2),c.Q6J("ngIf",!t.blobUrl),c.xp6(1),c.Q6J("ngIf",t.blobUrl))},dependencies:[n.O5,n.RF,n.n9,n.ED,ce.k,p._,f.j,b.x,v.y,ue.W],encapsulation:2}),SystemObjectPreviewModal})();var Ot=s(5718);function Jt(e,t){1&e&&(c.TgZ(0,"span",8),c.O4$(),c.TgZ(1,"svg",9),c._UZ(2,"use",10),c.qZA(),c.kcU(),c.TgZ(3,"span",11),c._UZ(4,"system-label",12),c.qZA()())}function Nt(e,t){1&e&&(c.TgZ(0,"span",13),c.O4$(),c.TgZ(1,"svg",9),c._UZ(2,"use",14),c.qZA(),c.kcU(),c.TgZ(3,"span",11),c._UZ(4,"system-label",15),c.qZA()())}function Ft(e,t){1&e&&(c.TgZ(0,"span",16),c.O4$(),c.TgZ(1,"svg",9),c._UZ(2,"use",17),c.qZA(),c.kcU(),c.TgZ(3,"span",11),c._UZ(4,"system-label",18),c.qZA()())}let qt=(()=>{class SystemProgressRing{constructor(e){this.language=e,this.percentage=100,this.size=24,this.status=""}get style(){return{height:this.size+"px",width:this.size+"px"}}get innerStyle(){return this.backgroundcolor?{background:this.backgroundcolor}:{}}get fillPercentage(){return this.percentage/100}get d(){return"M 1 0 A 1 1 0 "+(this.percentage>50?"1":"0")+" 1 "+Math.cos(2*Math.PI*this.fillPercentage)+" "+Math.sin(2*Math.PI*this.fillPercentage)+" L 0 0"}get ringClass(){if(""==this.status&&this.percentage>=100)return"slds-progress-ring_complete";switch(this.status){case"warning":return"slds-progress-ring_warning";case"expired":return"slds-progress-ring_expired"}}get iconstatus(){return this.percentage>=100?"complete":this.status}}return SystemProgressRing.ɵfac=function(e){return new(e||SystemProgressRing)(c.Y36(u.d))},SystemProgressRing.ɵcmp=c.Xpm({type:SystemProgressRing,selectors:[["system-progress-ring"]],inputs:{percentage:"percentage",size:"size",status:"status",backgroundcolor:"backgroundcolor"},decls:8,vars:6,consts:[[1,"slds-progress-ring",3,"ngClass"],["role","progressbar","aria-valuemin","0","aria-valuemax","100","aria-valuenow","88",1,"slds-progress-ring__progress"],["viewBox","-1 -1 2 2"],[1,"slds-progress-ring__path"],[1,"slds-progress-ring__content",3,"ngStyle"],["class","slds-icon_container slds-icon-utility-warning","title","Warning",4,"ngIf"],["class","slds-icon_container slds-icon-utility-error","title","Expired",4,"ngIf"],["class","slds-icon_container slds-icon-utility-check","title","Complete",4,"ngIf"],["title","Warning",1,"slds-icon_container","slds-icon-utility-warning"],["aria-hidden","true",1,"slds-icon"],[0,"xmlns","xlink","http://www.w3.org/1999/xlink",0,"xlink","href","vendor/sldassets/icons/utility-sprite/svg/symbols.svg#warning"],[1,"slds-assistive-text"],["label","LBL_WARNING"],["title","Expired",1,"slds-icon_container","slds-icon-utility-error"],[0,"xmlns","xlink","http://www.w3.org/1999/xlink",0,"xlink","href","vendor/sldassets/icons/utility-sprite/svg/symbols.svg#error"],["label","LBL_EXPIRED"],["title","Complete",1,"slds-icon_container","slds-icon-utility-check"],[0,"xmlns","xlink","http://www.w3.org/1999/xlink",0,"xlink","href","vendor/sldassets/icons/utility-sprite/svg/symbols.svg#check"],["label","LBL_COMPLETE"]],template:function(e,t){1&e&&(c.TgZ(0,"div",0)(1,"div",1),c.O4$(),c.TgZ(2,"svg",2),c._UZ(3,"path",3),c.qZA()(),c.kcU(),c.TgZ(4,"div",4),c.YNc(5,Jt,5,0,"span",5),c.YNc(6,Nt,5,0,"span",6),c.YNc(7,Ft,5,0,"span",7),c.qZA()()),2&e&&(c.Q6J("ngClass",t.ringClass),c.xp6(3),c.uIk("d",t.d),c.xp6(1),c.Q6J("ngStyle",t.innerStyle),c.xp6(1),c.Q6J("ngIf","warning"==t.iconstatus),c.xp6(1),c.Q6J("ngIf","expired"==t.iconstatus),c.xp6(1),c.Q6J("ngIf","complete"==t.iconstatus))},dependencies:[n.mk,n.O5,n.PC,p._],encapsulation:2}),SystemProgressRing})();var Et=s(8026);const Yt=["cancelButton"],Qt=["okButton"],Ut=["inputField"],Dt=["selectField"];function jt(e,t){if(1&e&&(c.TgZ(0,"h2",8),c._UZ(1,"system-label",9),c.qZA()),2&e){const e=c.oxw();c.xp6(1),c.Q6J("label",e.headertext)}}function Rt(e,t){if(1&e&&(c.TgZ(0,"div"),c._uU(1),c.qZA()),2&e){const e=t.$implicit;c.xp6(1),c.Oqu(e)}}function Bt(e,t){if(1&e&&(c.TgZ(0,"div",13),c.YNc(1,Rt,2,1,"div",14),c.qZA()),2&e){const e=c.oxw(2);c.xp6(1),c.Q6J("ngForOf",e.splitText)}}function Gt(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"system-input-date",24),c.NdJ("ngModelChange",(function(t){c.CHM(e);const s=c.oxw(4);return c.KtG(s.value=t)})),c.qZA()}if(2&e){const e=c.oxw(4);c.Q6J("ngModel",e.value)}}function Pt(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"div",25)(1,"div",16)(2,"textarea",26),c.NdJ("ngModelChange",(function(t){c.CHM(e);const s=c.oxw(4);return c.KtG(s.value=t)})),c.qZA()()()}if(2&e){const e=c.oxw(4);c.xp6(2),c.Q6J("ngModel",e.value)}}function Ht(e,t){if(1&e){const e=c.EpF();c.ynx(0),c.TgZ(1,"input",27,28),c.NdJ("ngModelChange",(function(t){c.CHM(e);const s=c.oxw(4);return c.KtG(s.value=t)})),c.qZA(),c.TgZ(3,"button",29),c.NdJ("click",(function(){c.CHM(e);const t=c.oxw(4);return c.KtG(t.value="")})),c._UZ(4,"system-button-icon",30),c.qZA(),c.BQk()}if(2&e){const e=c.oxw(4);c.xp6(1),c.Q6J("ngModel",e.value),c.xp6(2),c.Q6J("disabled",!e.value)}}function zt(e,t){if(1&e&&(c.TgZ(0,"div",19),c.ynx(1,20),c.YNc(2,Gt,1,1,"system-input-date",21),c.YNc(3,Pt,3,1,"div",22),c.YNc(4,Ht,5,2,"ng-container",23),c.BQk(),c.qZA()),2&e){const e=c.oxw(3);c.xp6(1),c.Q6J("ngSwitch",e.type),c.xp6(1),c.Q6J("ngSwitchCase","input_date"),c.xp6(1),c.Q6J("ngSwitchCase","input_text")}}function Vt(e,t){if(1&e&&(c.TgZ(0,"option",37),c._uU(1),c.qZA()),2&e){const e=t.$implicit;c.Q6J("value",e.value),c.xp6(1),c.hij(" ",e.display," ")}}function Kt(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"div",33)(1,"select",34,35),c.NdJ("ngModelChange",(function(t){c.CHM(e);const s=c.oxw(4);return c.KtG(s.value=t)})),c.YNc(3,Vt,2,2,"option",36),c.qZA()()}if(2&e){const e=c.oxw(4);c.xp6(1),c.Q6J("ngModel",e.value),c.xp6(2),c.Q6J("ngForOf",e.options)}}function $t(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"system-input-radio",39),c.NdJ("ngModelChange",(function(t){c.CHM(e);const s=c.oxw(5);return c.KtG(s.value=t)}))("dblclick",(function(){c.CHM(e);const t=c.oxw(5);return c.KtG(t.clickOK())})),c._uU(1),c.qZA()}if(2&e){const e=t.$implicit,s=c.oxw(5);c.Q6J("name",s.radioGroupName)("value",e.value)("ngModel",s.value),c.xp6(1),c.hij(" ",e.display," ")}}function Xt(e,t){if(1&e&&c.YNc(0,$t,2,4,"system-input-radio",38),2&e){const e=c.oxw(4);c.Q6J("ngForOf",e.options)}}function Wt(e,t){if(1&e&&(c.ynx(0),c.YNc(1,Kt,4,2,"div",31),c.YNc(2,Xt,1,1,"ng-template",null,32,c.W1O),c.BQk()),2&e){const e=c.MAs(3),t=c.oxw(3);c.xp6(1),c.Q6J("ngIf",!t.optionsAsRadio)("ngIfElse",e)}}function es(e,t){if(1&e&&(c.TgZ(0,"div",15)(1,"div",16),c.YNc(2,zt,5,3,"div",17),c.YNc(3,Wt,4,2,"ng-container",18),c.qZA()()),2&e){const e=c.oxw(2);c.xp6(2),c.Q6J("ngIf",!e.options),c.xp6(1),c.Q6J("ngIf",e.options)}}function ts(e,t){if(1&e&&(c.TgZ(0,"div",10),c.YNc(1,Bt,2,1,"div",11),c.YNc(2,es,4,2,"div",12),c.qZA()),2&e){const e=c.oxw();c.xp6(1),c.Q6J("ngIf",e.text),c.xp6(1),c.Q6J("ngIf",e.type.startsWith("input"))}}function ss(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"button",40,41),c.NdJ("click",(function(){c.CHM(e);const t=c.oxw();return c.KtG(t.clickCancel())})),c._UZ(2,"system-label",42),c.qZA()}}let is=(()=>{class SystemPrompt{constructor(e){this.language=e,this.value=null,this.optionsAsRadio=!1,this.answer=null,this.answerSubject=null,this.answerSubject=new G.x,this.answer=this.answerSubject.asObservable(),this.radioGroupName=_.uniqueId("system-prompt-group-name-")}get splitText(){return this.text?this.language.getLabel(this.text,void 0,"long").split(/(?:\r\n|\r|\n)/g):[]}ngOnInit(){this.theme||(this.theme="shade")}ngAfterViewInit(){"confirm"===this.type?this.cancelButton.nativeElement.focus():"info"===this.type?this.okButton.nativeElement.focus():this.type.startsWith("input")&&(this.inputField?this.inputField.nativeElement.focus():this.selectField&&this.selectField.nativeElement.focus())}get canSubmit(){if(!this.type.startsWith("input"))return!0;if(!this.value)return!1;if(this.regex){return new RegExp(this.regex).test(String(this.value))}return!0}clickOK(){this.type.startsWith("input")?this.answerSubject.next(this.value):this.answerSubject.next(!0),this.answerSubject.complete(),this.self.destroy()}clickCancel(){this.answerSubject.next(!1),this.answerSubject.complete(),this.self.destroy()}onModalEscX(){if("info"===this.type)return!1;this.clickCancel()}}return SystemPrompt.ɵfac=function(e){return new(e||SystemPrompt)(c.Y36(u.d))},SystemPrompt.ɵcmp=c.Xpm({type:SystemPrompt,selectors:[["system-prompt"]],viewQuery:function(e,t){if(1&e&&(c.Gf(Yt,5),c.Gf(Qt,5),c.Gf(Ut,5),c.Gf(Dt,5)),2&e){let e;c.iGM(e=c.CRH())&&(t.cancelButton=e.first),c.iGM(e=c.CRH())&&(t.okButton=e.first),c.iGM(e=c.CRH())&&(t.inputField=e.first),c.iGM(e=c.CRH())&&(t.selectField=e.first)}},inputs:{type:"type",text:"text",headertext:"headertext",theme:"theme",value:"value",options:"options",optionsAsRadio:"optionsAsRadio"},decls:10,vars:9,consts:[["role","alertdialog","tabindex","-1",1,"slds-modal","slds-fade-in-open","slds-modal_prompt"],[1,"slds-modal__container"],["class","slds-text-heading_medium slds-hyphenate",4,"ngIf"],["class","slds-modal__content slds-text-align_center ",4,"ngIf"],[1,"slds-modal__footer"],["class","slds-button slds-button--neutral",3,"click",4,"ngIf"],[1,"slds-button","slds-button--brand",3,"disabled","click"],["okButton",""],[1,"slds-text-heading_medium","slds-hyphenate"],[3,"label"],[1,"slds-modal__content","slds-text-align_center"],["class","slds-m-vertical_medium",4,"ngIf"],["class","slds-form-element slds-m-vertical_medium",4,"ngIf"],[1,"slds-m-vertical_medium"],[4,"ngFor","ngForOf"],[1,"slds-form-element","slds-m-vertical_medium"],[1,"slds-form-element__control"],["class","slds-form-element__control slds-input-has-icon slds-input-has-icon_right",4,"ngIf"],[4,"ngIf"],[1,"slds-form-element__control","slds-input-has-icon","slds-input-has-icon_right"],[3,"ngSwitch"],[3,"ngModel","ngModelChange",4,"ngSwitchCase"],["class","slds-form-element",4,"ngSwitchCase"],[4,"ngSwitchDefault"],[3,"ngModel","ngModelChange"],[1,"slds-form-element"],[1,"slds-textarea",2,"height","200px",3,"ngModel","ngModelChange"],["type","text","tabindex","1",1,"slds-input",3,"ngModel","ngModelChange"],["inputField",""],[1,"slds-input__icon","slds-input__icon_right","slds-button","slds-button--icon",3,"disabled","click"],["icon","clear"],["class","slds-select_container",4,"ngIf","ngIfElse"],["radioGroupContainer",""],[1,"slds-select_container"],["tabindex","1",1,"slds-select",3,"ngModel","ngModelChange"],["selectField",""],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["style","display: block",3,"name","value","ngModel","ngModelChange","dblclick",4,"ngFor","ngForOf"],[2,"display","block",3,"name","value","ngModel","ngModelChange","dblclick"],[1,"slds-button","slds-button--neutral",3,"click"],["cancelButton",""],["label","LBL_CANCEL"]],template:function(e,t){1&e&&(c.TgZ(0,"section",0)(1,"div",1)(2,"header"),c.YNc(3,jt,2,1,"h2",2),c.qZA(),c.YNc(4,ts,3,2,"div",3),c.TgZ(5,"footer",4),c.YNc(6,ss,3,0,"button",5),c.TgZ(7,"button",6,7),c.NdJ("click",(function(){return t.clickOK()})),c._uU(9,"OK"),c.qZA()()()()),2&e&&(c.xp6(2),c.Gre("slds-modal__header slds-theme_",t.theme,""),c.Udp("height",t.headertext?"auto":"1rem"),c.xp6(1),c.Q6J("ngIf",t.headertext),c.xp6(1),c.Q6J("ngIf",t.text||t.type.startsWith("input")),c.xp6(2),c.Q6J("ngIf","info"!==t.type),c.xp6(1),c.Q6J("disabled",!t.canSubmit))},dependencies:[n.sg,n.O5,n.RF,n.n9,n.ED,l.YN,l.Kr,l.Fj,l.EJ,l.JJ,l.On,g.J,Se.z,Qe.A,p._],encapsulation:2}),SystemPrompt})();var ns=s(1574),ls=s(5710),os=s(3441);function as(e,t){1&e&&c._UZ(0,"system-label",23)}function ds(e,t){1&e&&c._UZ(0,"system-label",24)}function rs(e,t){if(1&e&&(c.TgZ(0,"div",30),c._UZ(1,"system-label",31),c.qZA()),2&e){const e=c.oxw(2);c.xp6(1),c.Q6J("label",e.urlErrorLabel)}}const cs=function(e){return{"slds-has-error":e}};function us(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"div",25)(1,"label",10)(2,"abbr",26),c._uU(3,"*"),c.qZA(),c._UZ(4,"system-label",27),c.qZA(),c.TgZ(5,"system-input-text",28),c.NdJ("ngModelChange",(function(t){c.CHM(e);const s=c.oxw();return c.KtG(s.url=t)}))("ngModelChange",(function(){c.CHM(e);const t=c.oxw();return c.KtG(t.checkUrl())})),c.qZA(),c.YNc(6,rs,2,1,"div",29),c.qZA()}if(2&e){const e=c.oxw();c.Q6J("ngClass",c.VKq(3,cs,!!e.urlErrorLabel)),c.xp6(5),c.Q6J("ngModel",e.url),c.xp6(1),c.Q6J("ngIf",e.urlErrorLabel)}}function ms(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"div",32)(1,"label",10),c._UZ(2,"system-label",33),c.qZA(),c.TgZ(3,"system-input-text",34),c.NdJ("ngModelChange",(function(t){c.CHM(e);const s=c.oxw();return c.KtG(s.text=t)}))("blur",(function(){c.CHM(e);const t=c.oxw();return c.KtG(t.changeTextIsUrl())})),c.qZA()()}if(2&e){const e=c.oxw();c.xp6(3),c.Q6J("ngModel",e.text)}}function hs(e,t){if(1&e&&(c.TgZ(0,"option",42),c._uU(1),c.qZA()),2&e){const e=t.$implicit;c.Q6J("ngValue",e.id),c.xp6(1),c.Oqu(e.name)}}function gs(e,t){if(1&e&&(c.TgZ(0,"div",30),c._UZ(1,"system-label",31),c.qZA()),2&e){const e=c.oxw(2);c.xp6(1),c.Q6J("label",e.marketingActionErrorLabel)}}function ps(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"div",35)(1,"label",36),c._UZ(2,"system-label",37),c.qZA(),c.TgZ(3,"div",38)(4,"div",39)(5,"select",40),c.NdJ("ngModelChange",(function(t){c.CHM(e);const s=c.oxw();return c.KtG(s.marketingAction=t)})),c.YNc(6,hs,2,2,"option",41),c.qZA()()(),c.YNc(7,gs,2,1,"div",29),c.qZA()}if(2&e){const e=c.oxw();c.Q6J("ngClass",c.VKq(5,cs,!!e.marketingActionErrorLabel)),c.xp6(5),c.Q6J("ngModel",e.marketingAction)("disabled",null==e.editorService.marketingActions),c.xp6(1),c.Q6J("ngForOf",e.editorService.marketingActions),c.xp6(1),c.Q6J("ngIf",e.marketingActionErrorLabel)}}function fs(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"div",44)(1,"label",45),c._UZ(2,"system-label",46),c.qZA(),c.TgZ(3,"div",38)(4,"span",47)(5,"input",48),c.NdJ("ngModelChange",(function(t){c.CHM(e);const s=c.oxw(2);return c.KtG(s.toTrack=t)})),c.qZA(),c._UZ(6,"span",49),c.qZA()()()}if(2&e){const e=c.oxw(2);c.xp6(5),c.Q6J("value",!0)("ngModel",e.toTrack)}}function bs(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"div",32)(1,"system-checkbox",28),c.NdJ("ngModelChange",(function(t){c.CHM(e);const s=c.oxw(2);return c.KtG(s.toTrack=t)})),c._UZ(2,"system-label",46),c.qZA()()}if(2&e){const e=c.oxw(2);c.xp6(1),c.Q6J("ngModel",e.toTrack)}}function _s(e,t){if(1&e&&(c.ynx(0),c.YNc(1,fs,7,2,"div",43),c.YNc(2,bs,3,1,"div",18),c.BQk()),2&e){const e=c.oxw();c.xp6(1),c.Q6J("ngIf",!e.alterMode),c.xp6(1),c.Q6J("ngIf",e.alterMode)}}let ys=(()=>{class SystemRichTextLink{constructor(e,t,s){this.language=e,this.helper=t,this.model=s,this.url="",this.text="",this.toTrack=!1,this.marketingAction="",this.trackingId="",this.urlErrorLabel="",this.marketingActionErrorLabel="",this.canSubmit=!1,this.textIsUrl=!1,this.linkType="conv",this.response=new c.vpe}ngOnInit(){this.url=this.url.trim(),this.text=this.text.trim(),this.urlHasProtocol(this.url)||(this.url="https://"),this.textIsUrl=!this.text,this.toTrack=!!this.trackingId,this.url&&(this.url=this.url.trim()),this.marketingAction&&(this.linkType="mark"),this.loadMarketingActions()}urlHasProtocol(e){return/^[a-zA-Z]+\:\/\//.test(e.trim())}urlIsValid(e){return/^[a-zA-Z]+\:\/\/.+/.test(e.trim())}checkUrl(){let e=this.url.trim();return e?this.urlIsValid(e)?this.urlErrorLabel="":this.urlErrorLabel="LBL_INPUT_INVALID":this.urlErrorLabel="MSG_INPUT_REQUIRED",this.textIsUrl&&(this.text=this.url),!this.urlErrorLabel}checkMarketingAction(){return this.marketingAction?this.marketingActionErrorLabel="":this.marketingActionErrorLabel="MSG_INPUT_REQUIRED",!this.marketingActionErrorLabel}changeTextIsUrl(){this.text?this.url!=this.text&&(this.textIsUrl=!1):this.textIsUrl=!0}submit(){if("conv"===this.linkType&&!this.checkUrl())return;if("mark"===this.linkType&&!this.checkMarketingAction())return;this.toTrack?this.trackingId||(this.trackingId=this.helper.generateGuid(),this.saveTrackingLink()):delete this.trackingId;let e={url:"conv"===this.linkType?this.url.trim():"",toTrack:this.toTrack,trackingId:this.trackingId,text:void 0,linkType:this.linkType,marketingAction:this.marketingAction};this.alterMode||(e.text=this.text.trim()),this.response.emit(e),this.self.destroy()}cancel(){this.response.emit(null),this.self.destroy()}saveTrackingLink(){this.model.id=this.trackingId,this.model.module="TrackingLinks",this.model.setFields({name:this.text,url:this.url,parent_type:this.parent.module,parent_id:this.parent.id}),this.model.save()}loadMarketingActions(){this.editorService.loadMarketingActions()}}return SystemRichTextLink.ɵfac=function(e){return new(e||SystemRichTextLink)(c.Y36(u.d),c.Y36(os._),c.Y36(ls.o))},SystemRichTextLink.ɵcmp=c.Xpm({type:SystemRichTextLink,selectors:[["ng-component"]],inputs:{url:"url",text:"text",toTrack:"toTrack",marketingAction:"marketingAction",trackingId:"trackingId",parent:"parent"},features:[c._Bn([ls.o])],decls:29,vars:10,consts:[["size","small"],[3,"close"],["label","LBL_ADD_LINK",4,"ngIf"],["label","LBL_EDIT_LINK",4,"ngIf"],[1,"slds-form-element","slds-m-bottom--x-small"],[1,"slds-form-element__control","slds-grid"],[1,"slds-radio"],["type","radio","id","radioConvLink","name","linkType","value","conv",3,"ngModel","ngModelChange"],["for","radioConvLink",1,"slds-radio__label"],[1,"slds-radio_faux"],[1,"slds-form-element__label"],["label","LBL_CONVENTIONAL_LINK"],[1,"slds-radio","slds-m-left--small"],["type","radio","id","radioMarketingLink","name","linkType","value","mark",3,"ngModel","ngModelChange"],["for","radioMarketingLink",1,"slds-radio__label"],["label","LBL_MARKETING_ACTION_LINK"],["class","slds-form-element__control",3,"ngClass",4,"ngIf"],[1,"slds-grid","slds-m-top--small","slds-gutters_x-small"],["class","slds-form-element__control slds-col",4,"ngIf"],["class","slds-form-element slds-col",3,"ngClass",4,"ngIf"],[4,"ngIf"],[1,"slds-button","slds-button--neutral",3,"click"],[1,"slds-button","slds-button--brand",3,"click"],["label","LBL_ADD_LINK"],["label","LBL_EDIT_LINK"],[1,"slds-form-element__control",3,"ngClass"],[1,"slds-required"],["label","LBL_URL"],[3,"ngModel","ngModelChange"],["class","slds-form-element__help",4,"ngIf"],[1,"slds-form-element__help"],[3,"label"],[1,"slds-form-element__control","slds-col"],["label","LBL_TEXT"],[3,"ngModel","ngModelChange","blur"],[1,"slds-form-element","slds-col",3,"ngClass"],["for","marketingAction",1,"slds-form-element__label"],["label","LBL_MARKETING_ACTION"],[1,"slds-form-element__control"],[1,"slds-select_container"],["id","marketingAction",1,"slds-select",3,"ngModel","disabled","ngModelChange"],[3,"ngValue",4,"ngFor","ngForOf"],[3,"ngValue"],["class","slds-form-element slds-col slds-grow-none",4,"ngIf"],[1,"slds-form-element","slds-col","slds-grow-none"],["for","cbTrackable1",1,"slds-form-element__label"],["label","LBL_CLICKS_TRACKABLE"],[1,"slds-checkbox","slds-checkbox_standalone"],["type","checkbox","id","cbTrackable1","name","label",3,"value","ngModel","ngModelChange"],[1,"slds-checkbox_faux"]],template:function(e,t){1&e&&(c.TgZ(0,"system-modal",0)(1,"system-modal-header",1),c.NdJ("close",(function(){return t.cancel()})),c.YNc(2,as,1,0,"system-label",2),c.YNc(3,ds,1,0,"system-label",3),c.qZA(),c.TgZ(4,"system-modal-content")(5,"fieldset",4)(6,"div",5)(7,"span",6)(8,"input",7),c.NdJ("ngModelChange",(function(e){return t.linkType=e})),c.qZA(),c.TgZ(9,"label",8),c._UZ(10,"span",9),c.TgZ(11,"span",10),c._UZ(12,"system-label",11),c.qZA()()(),c.TgZ(13,"span",12)(14,"input",13),c.NdJ("ngModelChange",(function(e){return t.linkType=e})),c.qZA(),c.TgZ(15,"label",14),c._UZ(16,"span",9),c.TgZ(17,"span",10),c._UZ(18,"system-label",15),c.qZA()()()()(),c.YNc(19,us,7,5,"div",16),c.TgZ(20,"div",17),c.YNc(21,ms,4,1,"div",18),c.YNc(22,ps,8,7,"div",19),c.YNc(23,_s,3,2,"ng-container",20),c.qZA()(),c.TgZ(24,"system-modal-footer")(25,"button",21),c.NdJ("click",(function(){return t.cancel()})),c._uU(26),c.qZA(),c.TgZ(27,"button",22),c.NdJ("click",(function(){return t.submit()})),c._uU(28),c.qZA()()()),2&e&&(c.xp6(2),c.Q6J("ngIf",!t.alterMode),c.xp6(1),c.Q6J("ngIf",t.alterMode),c.xp6(5),c.Q6J("ngModel",t.linkType),c.xp6(6),c.Q6J("ngModel",t.linkType),c.xp6(5),c.Q6J("ngIf","conv"===t.linkType),c.xp6(2),c.Q6J("ngIf",!t.alterMode),c.xp6(1),c.Q6J("ngIf","mark"===t.linkType),c.xp6(1),c.Q6J("ngIf","conv"===t.linkType),c.xp6(3),c.Oqu(t.language.getLabel("LBL_CANCEL")),c.xp6(2),c.Oqu(t.language.getLabel("LBL_OK")))},dependencies:[n.mk,n.sg,n.O5,l.YN,l.Kr,l.Fj,l.Wl,l.EJ,l._,l.JJ,l.On,Q.U,be.Z,p._,f.j,b.x,y.p,v.y],encapsulation:2}),SystemRichTextLink})();var vs=s(3896),xs=s(3369),Zs=s(2422),ws=s(4361);function Ts(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"li",7),c.NdJ("click",(function(){const t=c.CHM(e).$implicit,s=c.oxw();return c.KtG(s.setActiveRole(t.id))})),c.TgZ(1,"a",8)(2,"div")(3,"span",2),c._UZ(4,"system-label",3),c.qZA()(),c._UZ(5,"system-label",9),c.qZA()()}if(2&e){const e=t.$implicit;c.xp6(3),c.Q6J("ngClass",e.icon),c.xp6(1),c.Q6J("label",e.label),c.xp6(1),c.Q6J("label",e.label)}}let Cs=(()=>{class SystemRoleSelector{constructor(e,t,s,i){this.language=e,this.metadata=t,this.broadcast=s,this.userpreferences=i,this.roles=[]}ngOnInit(){this.getRoles()}getRoles(){this.roles=this.metadata.getRoles()}get activeRole(){return this.metadata.getActiveRole()}setActiveRole(e){this.metadata.setActiveRole(e),this.userpreferences.setPreference("userrole",e),this.broadcast.broadcastMessage("applauncher.setrole",e)}}return SystemRoleSelector.ɵfac=function(e){return new(e||SystemRoleSelector)(c.Y36(u.d),c.Y36(m.Pu),c.Y36(xs.f),c.Y36(Zs.z))},SystemRoleSelector.ɵcmp=c.Xpm({type:SystemRoleSelector,selectors:[["system-role-selector"]],decls:7,vars:5,consts:[["system-dropdown-trigger-simple","",1,"slds-dropdown-trigger","slds-dropdown-trigger_click"],[1,"slds-button","slds-p-horizontal--xx-small",3,"disabled","title"],[1,"slds-avatar--small","slds-align--absolute-center","slds-line-height_reset",2,"line-height","25px",3,"ngClass"],["length","short",3,"label"],[1,"slds-dropdown","slds-dropdown--bottom","slds-dropdown_right"],["role","menu","aria-label","Show More",1,"slds-dropdown__list"],["class","slds-dropdown__item","role","presentation",3,"click",4,"ngFor","ngForOf"],["role","presentation",1,"slds-dropdown__item",3,"click"],["href","javascript:void(0);","role","menuitem"],[1,"slds-grow","slds-p-left--x-small",3,"label"]],template:function(e,t){1&e&&(c.TgZ(0,"div",0)(1,"button",1)(2,"span",2),c._UZ(3,"system-label",3),c.qZA()(),c.TgZ(4,"div",4)(5,"ul",5),c.YNc(6,Ts,6,3,"li",6),c.qZA()()()),2&e&&(c.xp6(1),c.Q6J("disabled",t.roles.length<2)("title",t.language.getLabel(t.activeRole.label,void 0,"short")),c.xp6(1),c.Q6J("ngClass",t.activeRole.icon),c.xp6(1),c.Q6J("label",t.activeRole.label),c.xp6(3),c.Q6J("ngForOf",t.roles))},dependencies:[ws.w,n.mk,n.sg,p._],encapsulation:2}),SystemRoleSelector})();var As=s(2868),ks=s(3543);function Ls(e,t){if(1&e&&c._UZ(0,"system-componentset",3),2&e){const e=c.oxw();c.Q6J("componentset",e.componentSetLeft)}}function Ms(e,t){if(1&e&&c._UZ(0,"system-componentset",3),2&e){const e=c.oxw();c.Q6J("componentset",e.componentSetRight)}}let Ss=(()=>{class SystemSplitView{constructor(){this.componentconfig={}}get componentSetLeft(){return this.componentconfig.left}get componentSetRight(){return this.componentconfig.right}}return SystemSplitView.ɵfac=function(e){return new(e||SystemSplitView)},SystemSplitView.ɵcmp=c.Xpm({type:SystemSplitView,selectors:[["system-split-view"]],inputs:{componentconfig:"componentconfig"},decls:5,vars:2,consts:[[1,"slds-grid","slds-gutters_direct-xx-small"],[1,"slds-col","slds-size--1-of-1","slds-large-size--1-of-2"],[3,"componentset",4,"ngIf"],[3,"componentset"]],template:function(e,t){1&e&&(c.TgZ(0,"div",0)(1,"div",1),c.YNc(2,Ls,1,1,"system-componentset",2),c.qZA(),c.TgZ(3,"div",1),c.YNc(4,Ms,1,1,"system-componentset",2),c.qZA()()),2&e&&(c.xp6(2),c.Q6J("ngIf",t.componentSetLeft),c.xp6(2),c.Q6J("ngIf",t.componentSetRight))},dependencies:[n.O5,B.E],encapsulation:2}),SystemSplitView})();var Is=s(2803),Os=s(2161);let Js=(()=>{class SystemTinyMCE{constructor(e,t){this.metadata=e,this.configurationService=t,this.elementid="mytinymce",this.height="250px",this.stylesheetId="",this.elementContent="new content",this.tinymceConfig={selector:"#"+this.elementid,remove_script_host:!0,relative_urls:!1,document_base_url:this.configurationService.getFrontendUrl(),menubar:!1,statusbar:!0,resize:!0,browser_spellcheck:!0,image_advtab:!0,paste_as_text:!0,paste_filter_drop:!0,plugins:["link","code","image","lists","paste","table"],toolbar:"undo redo | formatselect | styleselect bold italic removeformat | bullist numlist | link image table | code",skin_url:"vendor/tinymce/skins/lightgray",setup:e=>{this.editor=e,e.on("keyup",(()=>{const t=e.getContent();this.content=t}))},formats:{alignleft:{selector:"p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li,table,img",classes:"align-left"},aligncenter:{selector:"p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li,table,img",classes:"align-center"},alignright:{selector:"p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li,table,img",classes:"align-right"},alignjustify:{selector:"p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li,table,img",classes:"align-justify"},strikethrough:{inline:"del"}},style_formats:[{title:"Inline",items:[{title:"fett",icon:"bold",format:"bold"},{title:"kursiv",icon:"italic",format:"italic"},{title:"unterstrichen",icon:"underline",format:"underline"},{title:"strikethrough",icon:"strikethrough",format:"strikethrough"},{title:"hochgestellt",icon:"superscript",format:"superscript"},{title:"tiefgestellt",icon:"subscript",format:"subscript"}]},{title:"Ausrichtung",items:[{title:"links",icon:"alignleft",format:"alignleft"},{title:"mittig",icon:"aligncenter",format:"aligncenter"},{title:"rechts",icon:"alignright",format:"alignright"},{title:"Blocksatz",icon:"alignjustify",format:"alignjustify"}]}],style_formats_merge:!1,body_class:"spice"},this.contentChange=new c.vpe}get content(){return this.elementContent}set content(e){this.elementContent=e,this.contentChange.emit(this.elementContent)}setStylesheet(){let e=[];if(_.isEmpty(this.stylesheetId))delete this.tinymceConfig.content_style;else{if(e=this.metadata.getHtmlFormats(this.stylesheetId),e.length){let t=0;this.tinymceConfig.block_formats="",this.tinymceConfig.extended_valid_elements=[],this.tinymceConfig.custom_elements=[],this.tinymceConfig.block_formats+="Absatz=p;",this.tinymceConfig.style_formats.push({title:"Weiteres",items:[]});for(let s of e)if(_.isEmpty(s.block))this.tinymceConfig.style_formats[2].items.push({title:s.name,inline:s.inline,classes:s.classes,styles:s.styles});else{let e;t++,this.tinymceConfig.formats[e="custom_format_"+t]={title:s.name,inline:s.inline,block:s.block,classes:s.classes,styles:s.styles,wrapper:Boolean(Number(s.wrapper))},this.tinymceConfig.block_formats+=s.name+"="+e+";",this.tinymceConfig.extended_valid_elements.indexOf(s.block)&&this.tinymceConfig.extended_valid_elements.push(s.block),this.tinymceConfig.custom_elements.indexOf(s.block)&&this.tinymceConfig.custom_elements.push(s.block)}0===this.tinymceConfig.style_formats[2].items.length&&this.tinymceConfig.style_formats.splice(2,1)}this.tinymceConfig.content_style=this.metadata.getHtmlStylesheetCode(this.stylesheetId)}}updateevent(){this.content=this.editor.getContent()}getStyle(){return{height:this.height}}ngAfterViewInit(){this.metadata.loadLibs("tinymce").subscribe((e=>{this.setStylesheet(),tinymce.init(this.tinymceConfig)}))}ngOnDestroy(){tinymce.remove(this.editor)}ngOnInit(){this.tinymceConfig.selector="#"+this.elementid,this.tinymceConfig.document_base_url=this.configurationService.getFrontendUrl()}}return SystemTinyMCE.ɵfac=function(e){return new(e||SystemTinyMCE)(c.Y36(m.Pu),c.Y36(Te.C))},SystemTinyMCE.ɵcmp=c.Xpm({type:SystemTinyMCE,selectors:[["system-tinymce"]],hostBindings:function(e,t){1&e&&c.NdJ("click",(function(){return t.updateevent()}))("keyup",(function(){return t.updateevent()}))},inputs:{elementid:"elementid",height:"height",stylesheetId:"stylesheetId",content:"content"},outputs:{contentChange:"contentChange"},decls:2,vars:3,consts:[[3,"id","ngStyle"]],template:function(e,t){1&e&&(c.TgZ(0,"textarea",0),c._uU(1),c.qZA()),2&e&&(c.s9C("id",t.elementid),c.Q6J("ngStyle",t.getStyle()),c.xp6(1),c.Oqu(t.content))},dependencies:[n.PC],styles:["[_nghost-%COMP%]   .mce-ico[_ngcontent-%COMP%]{color:#54698d;font-size:12px}","[_nghost-%COMP%]   .mce-text[_ngcontent-%COMP%]{color:#54698d;font-size:12px}","[_nghost-%COMP%]   .mce-btn[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{color:#54698d;font-size:12px}","[_nghost-%COMP%]   .mce-tinymce[_ngcontent-%COMP%]{border-radius:4px}","[_nghost-%COMP%]   .mce-widget[_ngcontent-%COMP%]{font-family:Titillium Web,sans-serif}"]}),SystemTinyMCE})(),Ns=(()=>{class SystemTinyMCEModal{constructor(e){this.language=e,this.self={},this.content="",this.updateContent=new c.vpe,this.title=""}ngOnInit(){0===this.title.length&&(this.title=this.language.getLabel("LBL_EDITOR"))}closeModal(){this.self.destroy()}contentChange(e){this.content=e,this.updateContent.emit(e)}}return SystemTinyMCEModal.ɵfac=function(e){return new(e||SystemTinyMCEModal)(c.Y36(u.d))},SystemTinyMCEModal.ɵcmp=c.Xpm({type:SystemTinyMCEModal,selectors:[["ng-component"]],decls:8,vars:4,consts:[["size","large"],[3,"close"],[3,"content","stylesheetId","height","contentChange"],[1,"slds-button","slds-button--neutral",3,"click"],["label","LBL_OK"]],template:function(e,t){1&e&&(c.TgZ(0,"system-modal",0)(1,"system-modal-header",1),c.NdJ("close",(function(){return t.closeModal()})),c._uU(2),c.qZA(),c.TgZ(3,"system-modal-content")(4,"system-tinymce",2),c.NdJ("contentChange",(function(e){return t.content=e}))("contentChange",(function(e){return t.contentChange(e)})),c.qZA()(),c.TgZ(5,"system-modal-footer")(6,"button",3),c.NdJ("click",(function(){return t.closeModal()})),c._UZ(7,"system-label",4),c.qZA()()()),2&e&&(c.xp6(2),c.Oqu(t.title),c.xp6(2),c.Q6J("content",t.content)("stylesheetId",t.stylesheetId)("height","80%"))},dependencies:[p._,f.j,b.x,y.p,v.y,Js],encapsulation:2}),SystemTinyMCEModal})();var Fs=s(2403),qs=s(494),Es=s(3361),Ys=s(8574),Qs=s(2067);const Us=["imgupload"];function Ds(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"div")(1,"button",5),c.NdJ("click",(function(){c.CHM(e);const t=c.oxw();return c.KtG(t.showUpload())})),c._UZ(2,"system-label",9),c.qZA(),c.TgZ(3,"input",10,11),c.NdJ("click",(function(){c.CHM(e);const t=c.MAs(4);return c.KtG(t.value=null)}))("change",(function(t){c.CHM(e);const s=c.oxw();return c.KtG(s.uploadImage(t))})),c.qZA()()}}function js(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"img",12),c.NdJ("load",(function(t){c.CHM(e);const s=c.oxw();return c.KtG(s.doCrop(t))})),c.qZA()}if(2&e){const e=c.oxw();c.Q6J("src",e.imageBase64,c.LSH)}}let Rs=(()=>{class SystemUploadImage{constructor(e,t,s,i){this.language=e,this.libloader=t,this.renderer=s,this.sanitizer=i,this.cropheight=200,this.cropwidth=200,this.croptype="circle",this.cropresize=!1,this.imagedata=new c.vpe,this.pasteListener=this.renderer.listen("window","paste",(e=>{e.preventDefault(),e.stopPropagation();let t=e.clipboardData.items[0].getAsFile(),s=window.URL;this.imageBase64=this.sanitizer.bypassSecurityTrustResourceUrl(s.createObjectURL(t))}))}get croppiestyle(){return{height:2*this.cropheight+"px"}}ngOnDestroy(){this.pasteListener()}close(e=!0){e&&this.imagedata.emit(!1),this.self.destroy()}showUpload(){let e=new MouseEvent("click",{bubbles:!0});this.imgupload.element.nativeElement.dispatchEvent(e)}uploadImage(e){let t=new FileReader;t.onloadend=e=>{this.imageBase64=t.result},t.readAsDataURL(e.target.files[0])}doCrop(e){this.croppie||(this.croppie=new Croppie(document.getElementById("croppieimage"),{enableExif:!0,enableOrientation:!0,enableZoom:!0,enforceBoundary:!1,mouseWheelZoom:!0,showZoomer:!0,enableResize:this.cropresize,viewport:{width:this.cropwidth,height:this.cropheight,type:this.croptype},boundary:{height:2*this.cropheight}}))}getcroppedImage(){this.croppie.result({type:"base64",size:"viewport"}).then((e=>{this.imagedata.emit(e),this.close(!1)}))}}return SystemUploadImage.ɵfac=function(e){return new(e||SystemUploadImage)(c.Y36(u.d),c.Y36(Qs.$),c.Y36(c.Qsj),c.Y36(wt.H7))},SystemUploadImage.ɵcmp=c.Xpm({type:SystemUploadImage,selectors:[["system-upload-image"]],viewQuery:function(e,t){if(1&e&&c.Gf(Us,5,c.s_b),2&e){let e;c.iGM(e=c.CRH())&&(t.imgupload=e.first)}},inputs:{cropheight:"cropheight",cropwidth:"cropwidth",croptype:"croptype",cropresize:"cropresize"},outputs:{imagedata:"imagedata"},decls:12,vars:4,consts:[[3,"close"],["label","LBL_UPLOAD_IMAGE"],[1,"slds-align--absolute-center","slds-scrollable--none",3,"ngStyle"],[4,"ngIf"],["id","croppieimage",3,"src","load",4,"ngIf"],[1,"slds-button","slds-button--neutral",3,"click"],["label","LBL_CANCEL"],[1,"slds-button","slds-button--brand",3,"disabled","click"],["label","LBL_USE"],["label","LBL_SELECT_IMAGE"],["type","file","accept","image/*",2,"display","none",3,"click","change"],["imgupload",""],["id","croppieimage",3,"src","load"]],template:function(e,t){1&e&&(c.TgZ(0,"system-modal")(1,"system-modal-header",0),c.NdJ("close",(function(){return t.close()})),c._UZ(2,"system-label",1),c.qZA(),c.TgZ(3,"system-modal-content")(4,"div",2),c.YNc(5,Ds,5,0,"div",3),c.YNc(6,js,1,1,"img",4),c.qZA()(),c.TgZ(7,"system-modal-footer")(8,"button",5),c.NdJ("click",(function(){return t.close()})),c._UZ(9,"system-label",6),c.qZA(),c.TgZ(10,"button",7),c.NdJ("click",(function(){return t.getcroppedImage()})),c._UZ(11,"system-label",8),c.qZA()()()),2&e&&(c.xp6(4),c.Q6J("ngStyle",t.croppiestyle),c.xp6(1),c.Q6J("ngIf",!t.imageBase64),c.xp6(1),c.Q6J("ngIf",t.imageBase64),c.xp6(4),c.Q6J("disabled",!t.imageBase64))},dependencies:[n.O5,n.PC,p._,f.j,b.x,y.p,v.y],encapsulation:2}),SystemUploadImage})();const Bs=["popover"],Gs=["popoverbody"];let Ps=(()=>{class SystemPopover{constructor(e){this.metadata=e,this.popoverside="right",this.popoverpos="top",this.styles=null,this.hidePopoverTimeout={},this.parentElementRef=null,this.self=null,this.heightcorrection=30,this.widthcorrection=30}onMouseOver(){this.hidePopoverTimeout&&window.clearTimeout(this.hidePopoverTimeout)}onMouseOut(){this.closePopover(!0)}get popoverStyle(){let e=this.parentElementRef.nativeElement.getBoundingClientRect(),t=this.popover.element.nativeElement.getBoundingClientRect();return window.innerWidth-e.left>t.width?this.popoverside="right":this.popoverside="left",e.top-30+t.height>window.innerHeight&&e.top-t.height+this.heightcorrection>0?(this.popoverpos="bottom",{top:e.top-t.height+this.heightcorrection+"px",left:"right"==this.popoverside?e.left+100+"px":e.left-t.width-this.widthcorrection+"px"}):(this.popoverpos="top",{top:e.top-this.heightcorrection+"px",left:"right"==this.popoverside?e.left+100+"px":e.left-t.width-this.widthcorrection+"px"})}get popoverBodyStyle(){return{"max-height":`calc(100vh - ${this.popoverbody.element.nativeElement.getBoundingClientRect().top+5}px)`}}ngOnInit(){this.styles=this.popoverStyle}getNubbinClass(){return("left"==this.popoverside?"slds-nubbin--right-":"slds-nubbin--left-")+this.popoverpos}closePopover(e=!1){e?this.self.destroy():this.hidePopoverTimeout=window.setTimeout((()=>this.self.destroy()),500)}}return SystemPopover.ɵfac=function(e){return new(e||SystemPopover)(c.Y36(m.Pu))},SystemPopover.ɵcmp=c.Xpm({type:SystemPopover,selectors:[["ng-component"]],viewQuery:function(e,t){if(1&e&&(c.Gf(Bs,7,c.s_b),c.Gf(Gs,7,c.s_b)),2&e){let e;c.iGM(e=c.CRH())&&(t.popover=e.first),c.iGM(e=c.CRH())&&(t.popoverbody=e.first)}},decls:8,vars:4,consts:[["role","dialog",1,"slds-popover","slds-popover_large","slds-is-fixed",2,"transition",".5s",3,"ngStyle","ngClass","mouseenter","mouseleave"],[1,"slds-button","slds-button_icon","slds-button_icon","slds-button_icon-small","slds-float_right","slds-popover__close",3,"click"],["icon","close"],["popover",""],[1,"slds-popover__body","slds-scrollable--y",3,"ngStyle"],["popoverbody",""],[3,"componentset"]],template:function(e,t){1&e&&(c.TgZ(0,"div",0),c.NdJ("mouseenter",(function(){return t.onMouseOver()}))("mouseleave",(function(){return t.onMouseOut()})),c.TgZ(1,"button",1),c.NdJ("click",(function(){return t.closePopover(!0)})),c._UZ(2,"system-button-icon",2),c.qZA(),c.TgZ(3,"div",null,3)(5,"div",4,5),c._UZ(7,"system-componentset",6),c.qZA()()()),2&e&&(c.Q6J("ngStyle",t.popoverStyle)("ngClass",t.getNubbinClass()),c.xp6(5),c.Q6J("ngStyle",t.popoverBodyStyle),c.xp6(2),c.Q6J("componentset",t.componentset))},dependencies:[n.mk,n.PC,g.J,B.E],encapsulation:2}),SystemPopover})();var Hs=s(8859),zs=s(2294),Vs=s(3814);function Ks(e,t){if(1&e&&c._UZ(0,"system-componentset",3),2&e){const e=c.oxw();c.Q6J("componentset",e.componentset)}}function $s(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"div",4)(1,"button",5),c.NdJ("click",(function(){c.CHM(e);const t=c.oxw();return c.KtG(t.cancel())})),c._UZ(2,"system-label",6),c.qZA(),c.TgZ(3,"button",7),c.NdJ("click",(function(){c.CHM(e);const t=c.oxw();return c.KtG(t.save())})),c._UZ(4,"system-label",8),c.qZA()()}}const Xs=function(e){return{editable:e}};let Ws=(()=>{class SystemViewContainer{constructor(e,t,s){this.view=e,this.language=t,this.model=s,this.componentconfig={}}get componentset(){return this.componentconfig.componentset}get editable(){return!(!this.model||!this.componentconfig.editable)}cancel(){this.model&&(this.model.cancelEdit(),this.view.setViewMode())}save(){this.model&&this.model.validate()&&(this.model.save(!0),this.view.setViewMode())}}return SystemViewContainer.ɵfac=function(e){return new(e||SystemViewContainer)(c.Y36(zs.e),c.Y36(u.d),c.Y36(ls.o,8))},SystemViewContainer.ɵcmp=c.Xpm({type:SystemViewContainer,selectors:[["system-view-container"]],inputs:{componentconfig:"componentconfig"},decls:3,vars:5,consts:[[3,"system-view-provider"],[3,"componentset",4,"ngIf"],["class","slds-text-align--center slds-p-bottom--small",4,"ngIf"],[3,"componentset"],[1,"slds-text-align--center","slds-p-bottom--small"],[1,"slds-button","slds-button--neutral",3,"click"],["label","LBL_CANCEL"],[1,"slds-button","slds-button--brand","slds-button-space-left",3,"click"],["label","LBL_SAVE"]],template:function(e,t){1&e&&(c.TgZ(0,"div",0),c.YNc(1,Ks,1,1,"system-componentset",1),c.YNc(2,$s,5,0,"div",2),c.qZA()),2&e&&(c.Q6J("system-view-provider",c.VKq(3,Xs,t.editable)),c.xp6(1),c.Q6J("ngIf",t.componentset),c.xp6(1),c.Q6J("ngIf",t.view.isEditMode()))},dependencies:[Vs.V,n.O5,B.E,p._],encapsulation:2}),SystemViewContainer})();var ei=s(8594),ti=s(116);let si=(()=>{class SystemWrappedText{constructor(e){this.sanitizer=e,this.text=""}getHtml(){let e=this.text;return e=this.escapeHtml(e),e=e.replace(/ *\n( *\n)+ */g,'</div><div style="margin-top:0.5em">'),e=e.replace(/ *\n */g,"<br>"),this.sanitizer.bypassSecurityTrustHtml("<div>"+e+"</div>")}escapeHtml(e){let t={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#039;"};return e.replace(/[&<>"']/g,(e=>t[e]))}}return SystemWrappedText.ɵfac=function(e){return new(e||SystemWrappedText)(c.Y36(wt.H7))},SystemWrappedText.ɵcmp=c.Xpm({type:SystemWrappedText,selectors:[["system-wrapped-text"]],inputs:{text:"text"},decls:1,vars:1,consts:[[3,"innerHTML"]],template:function(e,t){1&e&&c._UZ(0,"div",0),2&e&&c.Q6J("innerHTML",t.getHtml(),c.oJD)},encapsulation:2}),SystemWrappedText})();var ii=s(5681),ni=s(1058),li=s(4411);function oi(e,t){1&e&&c._UZ(0,"system-spinner",10)}function ai(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"system-custom-icon",16),c.NdJ("click",(function(){c.CHM(e);const t=c.oxw(2);return c.KtG(t.setDefault())})),c.qZA()}if(2&e){const e=c.oxw(2);c.Q6J("icon",e.isDefault?"light-bulb-on":"light-bulb-off")}}function di(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"button",17),c.NdJ("click",(function(){c.CHM(e);const t=c.oxw(2);return c.KtG(t.loadLanguage(t.package.language_code))})),c._UZ(1,"system-button-icon",18),c.qZA()}}function ri(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"button",19),c.NdJ("click",(function(){c.CHM(e);const t=c.oxw(2);return c.KtG(t.deleteLanguage(t.package.language_code))})),c._UZ(1,"system-button-icon",20),c.qZA()}if(2&e){const e=c.oxw(2);c.Q6J("disabled",e.deletedisabled)}}function ci(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"button",17),c.NdJ("click",(function(){c.CHM(e);const t=c.oxw(2);return c.KtG(t.loadLanguage(t.package.language_code))})),c._UZ(1,"system-button-icon",21),c.qZA()}}function ui(e,t){if(1&e&&(c.TgZ(0,"div",11),c.YNc(1,ai,1,1,"system-custom-icon",12),c.TgZ(2,"div",13),c.YNc(3,di,2,0,"button",14),c.YNc(4,ri,2,1,"button",15),c.YNc(5,ci,2,0,"button",14),c.qZA()()),2&e){const e=c.oxw();c.xp6(1),c.Q6J("ngIf",e.package.installed),c.xp6(2),c.Q6J("ngIf",!e.package.installed),c.xp6(1),c.Q6J("ngIf",e.package.installed&&!e.isDefault),c.xp6(1),c.Q6J("ngIf",e.package.installed)}}let mi=(()=>{class PackageLoaderLanguage{constructor(e,t,s,i,n){this.language=e,this.backend=t,this.configurationService=s,this.loader=i,this.broadcast=n,this.loading=!1}get isDefault(){return this.package.language_code==this.language.getDefaultLanguage()}get deletedisabled(){return this.isDefault||this.package.language_code==this.language.currentlanguage}get repositoryaddurl(){return this.repository&&this.repository.id?"/"+this.repository.id:""}setDefault(){this.isDefault||this.language.setDefaultLanguage(this.package.language_code)}loadLanguage(e){this.loading=!0,this.backend.getRequest("configuration/packages/language/"+e+this.repositoryaddurl).subscribe((t=>{this.loading=!1,t.success&&(this.package.installed=!0,this.language.addAvailableLanguage(t.languages[e]),this.language.currentlanguage==e?this.language.loadLanguage().subscribe((e=>{this.package.installed=!0})):this.package.installed=!0)}))}deleteLanguage(e){this.loading=!0,this.backend.deleteRequest("configuration/packages/language/"+e).subscribe((t=>{this.loading=!1,t&&(this.package.installed=!1,this.language.removeAvailableLanguage(e))}))}}return PackageLoaderLanguage.ɵfac=function(e){return new(e||PackageLoaderLanguage)(c.Y36(u.d),c.Y36(ze.y),c.Y36(Te.C),c.Y36(li._),c.Y36(xs.f))},PackageLoaderLanguage.ɵcmp=c.Xpm({type:PackageLoaderLanguage,selectors:[["package-loader-language"]],inputs:{package:"package",repository:"repository"},decls:11,vars:4,consts:[[1,"slds-card"],[1,"slds-card__header","slds-grid"],[1,"slds-media","slds-media_center","slds-has-flexi-truncate"],["size","small","icon","custom68","sprite","custom",1,"slds-p-right--xx-small"],[1,"slds-media__body"],[1,"slds-card__header-title"],[1,"slds-card__header-link","slds-truncate",3,"title"],[1,"slds-no-flex"],["size","12",4,"ngIf"],["class","slds-grid slds-grid_vertical-align-center",4,"ngIf"],["size","12"],[1,"slds-grid","slds-grid_vertical-align-center"],["class","slds-p-horizontal--xx-small","size","x-small",3,"icon","click",4,"ngIf"],["role","group",1,"slds-button-group"],["class","slds-button slds-button_icon slds-button_icon-border-filled",3,"click",4,"ngIf"],["class","slds-button slds-button_icon slds-button_icon-border-filled",3,"disabled","click",4,"ngIf"],["size","x-small",1,"slds-p-horizontal--xx-small",3,"icon","click"],[1,"slds-button","slds-button_icon","slds-button_icon-border-filled",3,"click"],["icon","download"],[1,"slds-button","slds-button_icon","slds-button_icon-border-filled",3,"disabled","click"],["icon","delete"],["icon","refresh"]],template:function(e,t){1&e&&(c.TgZ(0,"article",0)(1,"div",1)(2,"header",2),c._UZ(3,"system-icon",3),c.TgZ(4,"div",4)(5,"h2",5)(6,"div",6),c._uU(7),c.qZA()()(),c.TgZ(8,"div",7),c.YNc(9,oi,1,0,"system-spinner",8),c.YNc(10,ui,6,4,"div",9),c.qZA()()()()),2&e&&(c.xp6(6),c.Q6J("title",t.package.language_name),c.xp6(1),c.hij(" ",t.package.language_name," "),c.xp6(2),c.Q6J("ngIf",t.loading),c.xp6(1),c.Q6J("ngIf",!t.loading))},dependencies:[n.O5,g.J,H.$,ne.f,ue.W],encapsulation:2}),PackageLoaderLanguage})();function hi(e,t){if(1&e&&(c.TgZ(0,"div",3),c._UZ(1,"package-loader-language",4),c.qZA()),2&e){const e=t.$implicit,s=c.oxw();c.xp6(1),c.Q6J("package",e)("repository",s.repository)}}let gi=(()=>{class PackageLoaderLanguages{constructor(){this.languages=[]}}return PackageLoaderLanguages.ɵfac=function(e){return new(e||PackageLoaderLanguages)},PackageLoaderLanguages.ɵcmp=c.Xpm({type:PackageLoaderLanguages,selectors:[["package-loader-languages"]],inputs:{languages:"languages",repository:"repository"},decls:3,vars:1,consts:[["system-to-bottom","","role","tabpanel"],[1,"slds-grid","slds-wrap"],["class","slds-size--1-of-2 slds-p-around--xx-small",4,"ngFor","ngForOf"],[1,"slds-size--1-of-2","slds-p-around--xx-small"],[3,"package","repository"]],template:function(e,t){1&e&&(c.TgZ(0,"div",0)(1,"div",1),c.YNc(2,hi,2,2,"div",2),c.qZA()()),2&e&&(c.xp6(2),c.Q6J("ngForOf",t.languages))},dependencies:[ni.H,n.sg,mi],encapsulation:2}),PackageLoaderLanguages})();function pi(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"button",21),c.NdJ("click",(function(){c.CHM(e);const t=c.oxw();return c.KtG(t.loadPackage(t.package.package))})),c._UZ(1,"system-button-icon",22),c.qZA()}if(2&e){const e=c.oxw();c.Q6J("disabled",e.disabled)}}function fi(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"button",21),c.NdJ("click",(function(){c.CHM(e);const t=c.oxw();return c.KtG(t.deletePackage(t.package.package))})),c._UZ(1,"system-button-icon",23),c.qZA()}if(2&e){const e=c.oxw();c.Q6J("disabled",e.disabled)}}function bi(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"button",21),c.NdJ("click",(function(){c.CHM(e);const t=c.oxw();return c.KtG(t.loadPackage(t.package.package))})),c._UZ(1,"system-button-icon",24),c.qZA()}if(2&e){const e=c.oxw();c.Q6J("disabled",e.disabled)}}function _i(e,t){if(1&e&&(c.TgZ(0,"div",25)(1,"div",26),c._UZ(2,"system-utility-icon",27),c._uU(3),c.qZA(),c.TgZ(4,"div",28),c._UZ(5,"system-utility-icon",29),c.qZA()()),2&e){const e=t.$implicit,s=c.oxw();c.xp6(2),c.Q6J("colorclass",s.disabled?"slds-icon-text-light":"slds-icon-text-default"),c.xp6(1),c.hij(" ",e.name,""),c.xp6(2),c.Q6J("icon",e.status?"check":"close")("colorclass",s.disabled?"slds-icon-text-light":"slds-icon-text-default")}}function yi(e,t){if(1&e&&(c.TgZ(0,"div",25)(1,"div",26),c._UZ(2,"system-utility-icon",30),c._uU(3),c.qZA(),c.TgZ(4,"div",28),c._UZ(5,"system-utility-icon",29),c.qZA()()),2&e){const e=t.$implicit,s=c.oxw();c.xp6(2),c.Q6J("colorclass",s.disabled?"slds-icon-text-light":"slds-icon-text-default"),c.xp6(1),c.hij(" ",e.package,""),c.xp6(2),c.Q6J("icon",e.installed?"check":"close")("colorclass",s.disabled?"slds-icon-text-light":"slds-icon-text-default")}}function vi(e,t){1&e&&(c.TgZ(0,"div",31),c._UZ(1,"system-label",32),c.qZA())}function xi(e,t){1&e&&(c.TgZ(0,"div",36),c._UZ(1,"system-spinner",37),c.TgZ(2,"span",38),c._UZ(3,"system-label",39),c.qZA()())}function Zi(e,t){1&e&&c._UZ(0,"system-loader-progress",40)}function wi(e,t){if(1&e&&(c.TgZ(0,"div",33),c.YNc(1,xi,4,0,"div",34),c.YNc(2,Zi,1,0,"system-loader-progress",35),c.qZA()),2&e){const e=c.oxw();c.xp6(1),c.Q6J("ngIf","package"==e.loading),c.xp6(1),c.Q6J("ngIf","configuration"==e.loading)}}const Ti=function(e){return{"slds-disabled-text":e}},Ci=function(e){return{"slds-hidden":e}};let Ai=(()=>{class PackageLoaderPackage{constructor(e,t,s,i,n,l){this.language=e,this.backend=t,this.configurationService=s,this.loader=i,this.modal=n,this.broadcast=l,this.packages=[],this.extensions=[],this.requiredpackages=[],this.loading=""}get disabled(){if(this.package.package.installed)return!1;let e=!1;return this.extensions.forEach((t=>{t.status||(e=!0)})),this.requiredpackages.forEach((t=>{t.installed||(e=!0)})),e}get repositoryaddurl(){return this.repository&&this.repository.id?"/"+this.repository.id:""}ngOnInit(){if(this.package.extensions)for(let e of this.package.extensions.split(",")){let t=this.configurationService.checkCapability(e);this.extensions.push({name:e,status:t})}this.package.packages&&(this.requiredpackages=this.packages.filter((e=>this.package.packages.split(",").indexOf(e.package)>=0)))}loadPackage(e){this.loading="package",this.backend.getRequest("configuration/packages/package/"+e+this.repositoryaddurl).subscribe((e=>{this.loading="configuration",this.loader.reloadPrimary().subscribe((e=>{this.package.installed=!0,this.broadcast.broadcastMessage("loader.reloaded"),this.loading=""}))}),(e=>{this.executeDB(),this.loading=""}))}executeDB(){this.modal.confirm("MSG_PACKAGE_REPAIR_DB","LBL_REPAIR_DATABASE","error").subscribe((e=>{if(!e)return;const t=this.modal.await(this.language.getLabel("LBL_PROCESSING"));this.backend.getRequest("admin/repair/sql").subscribe((e=>{t.next(!0),t.complete(),e&&this.modal.openModal("AdministrationDictRepairModal",!0).subscribe((t=>{t.instance.sql=e.sql,t.instance.wholeSQL=e.wholeSQL}))}))}))}deletePackage(e){this.loading="package",this.backend.deleteRequest("configuration/packages/package/"+e).subscribe((e=>{this.loading="configuration",this.package.installed=!1,this.loader.reloadPrimary().subscribe((e=>{this.broadcast.broadcastMessage("loader.reloaded"),this.loading=""}))}))}}return PackageLoaderPackage.ɵfac=function(e){return new(e||PackageLoaderPackage)(c.Y36(u.d),c.Y36(ze.y),c.Y36(Te.C),c.Y36(li._),c.Y36(Ke.o),c.Y36(xs.f))},PackageLoaderPackage.ɵcmp=c.Xpm({type:PackageLoaderPackage,selectors:[["package-loader-package"]],inputs:{package:"package",packages:"packages",repository:"repository"},decls:28,vars:16,consts:[[1,"slds-card",3,"ngClass"],[3,"ngClass"],[1,"slds-card__header","slds-grid"],[1,"slds-media","slds-media_center","slds-has-flexi-truncate"],["size","small","icon","custom13","sprite","custom",1,"slds-p-right--xx-small"],[1,"slds-media__body"],[1,"slds-card__header-title"],[1,"slds-card__header-link","slds-truncate",3,"title"],[1,"slds-no-flex"],["role","group",1,"slds-button-group"],["class","slds-button slds-button_icon slds-button_icon-border-filled",3,"disabled","click",4,"ngIf"],[1,"slds-card__body","slds-p-horizontal--small"],[1,"slds-grid","slds-gutters_direct-x-small"],[1,"slds-size--1-of-2","slds-col"],[1,"slds-text-heading_small","slds-p-vertical--xx-small"],["label","LBL_DETAILS"],[1,"slds-text-align--justify"],["label","LBL_PREREQUISITES"],["class","slds-grid slds-grid_vertical-align-center slds-p-vertical--xxx-small",4,"ngFor","ngForOf"],["class","slds-disabled-text",4,"ngIf"],["class","slds-is-absolute__top slds-size_full slds-height_full slds-align_absolute-center",4,"ngIf"],[1,"slds-button","slds-button_icon","slds-button_icon-border-filled",3,"disabled","click"],["icon","download"],["icon","delete"],["icon","refresh"],[1,"slds-grid","slds-grid_vertical-align-center","slds-p-vertical--xxx-small"],[1,"slds-size--1-of-2","slds-truncate"],["icon","apex_plugin","size","xx-small",3,"colorclass"],[1,"slds-size--1-of-2","slds-text-align--right"],["size","xx-small",3,"icon","colorclass"],["icon","archive","size","xx-small",3,"colorclass"],[1,"slds-disabled-text"],["label","LBL_NO_PREREQUISITES"],[1,"slds-is-absolute__top","slds-size_full","slds-height_full","slds-align_absolute-center"],["class","slds-grid slds-grid_vertical-align-center",4,"ngIf"],["class","slds-size_full",4,"ngIf"],[1,"slds-grid","slds-grid_vertical-align-center"],["size","16"],[1,"slds-p-left--small"],["label","LBL_LOADING"],[1,"slds-size_full"]],template:function(e,t){1&e&&(c.TgZ(0,"article",0)(1,"div",1)(2,"div",2)(3,"header",3),c._UZ(4,"system-icon",4),c.TgZ(5,"div",5)(6,"h2",6)(7,"div",7),c._uU(8),c.qZA()()(),c.TgZ(9,"div",8)(10,"div",9),c.YNc(11,pi,2,1,"button",10),c.YNc(12,fi,2,1,"button",10),c.YNc(13,bi,2,1,"button",10),c.qZA()()()(),c.TgZ(14,"div",11)(15,"div",12)(16,"div",13)(17,"div",14),c._UZ(18,"system-label",15),c.qZA(),c.TgZ(19,"div",16),c._uU(20),c.qZA()(),c.TgZ(21,"div",13)(22,"div",14),c._UZ(23,"system-label",17),c.qZA(),c.YNc(24,_i,6,4,"div",18),c.YNc(25,yi,6,4,"div",18),c.YNc(26,vi,2,0,"div",19),c.qZA()()()(),c.YNc(27,wi,3,2,"div",20),c.qZA()),2&e&&(c.Q6J("ngClass",c.VKq(12,Ti,t.disabled)),c.xp6(1),c.Q6J("ngClass",c.VKq(14,Ci,t.loading)),c.xp6(6),c.Q6J("title",t.package.name),c.xp6(1),c.hij(" ",t.package.name," "),c.xp6(3),c.Q6J("ngIf",!t.package.installed),c.xp6(1),c.Q6J("ngIf",t.package.installed&&"core"!=t.package.package),c.xp6(1),c.Q6J("ngIf",t.package.installed),c.xp6(7),c.Oqu(t.package.description),c.xp6(4),c.Q6J("ngForOf",t.extensions),c.xp6(1),c.Q6J("ngForOf",t.requiredpackages),c.xp6(1),c.Q6J("ngIf",0==t.requiredpackages.length&&0==t.extensions.length),c.xp6(1),c.Q6J("ngIf",t.loading))},dependencies:[n.mk,n.sg,n.O5,g.J,ne.f,p._,ut.e,ue.W,Hs.r],encapsulation:2}),PackageLoaderPackage})(),ki=(()=>{class PackageLoaderPipe{transform(e,t,s){return e.filter((e=>(!s||e.type==s)&&!(t&&!(t&&e.name.toLowerCase().indexOf(t.toLowerCase())>=0))))}}return PackageLoaderPipe.ɵfac=function(e){return new(e||PackageLoaderPipe)},PackageLoaderPipe.ɵpipe=c.Yjl({name:"packageloaderpipe",type:PackageLoaderPipe,pure:!0}),PackageLoaderPipe})();function Li(e,t){if(1&e&&(c.TgZ(0,"div",7),c._UZ(1,"package-loader-package",8),c.qZA()),2&e){const e=t.$implicit,s=c.oxw();c.xp6(1),c.Q6J("package",e)("packages",s.packages)("repository",s.repository)}}let Mi=(()=>{class PackageLoaderPackages{constructor(e){this.language=e,this.packagescope="",this.packagefilterterm="",this.packages=[]}}return PackageLoaderPackages.ɵfac=function(e){return new(e||PackageLoaderPackages)(c.Y36(u.d))},PackageLoaderPackages.ɵcmp=c.Xpm({type:PackageLoaderPackages,selectors:[["package-loader-packages"]],inputs:{packagescope:"packagescope",packages:"packages",repository:"repository"},decls:8,vars:7,consts:[["system-to-bottom","","role","tabpanel"],[1,"slds-p-vertical--x-small","slds-p-horizontal--xx-small"],[1,"slds-form-element"],[1,"slds-form-element__control"],["type","text",1,"slds-input",3,"ngModel","placeholder","ngModelChange"],[1,"slds-grid","slds-wrap"],["class","slds-size--1-of-2 slds-p-around--xx-small",4,"ngFor","ngForOf"],[1,"slds-size--1-of-2","slds-p-around--xx-small"],[3,"package","packages","repository"]],template:function(e,t){1&e&&(c.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"input",4),c.NdJ("ngModelChange",(function(e){return t.packagefilterterm=e})),c.qZA()()()(),c.TgZ(5,"div",5),c.YNc(6,Li,2,3,"div",6),c.ALo(7,"packageloaderpipe"),c.qZA()()),2&e&&(c.xp6(4),c.Q6J("ngModel",t.packagefilterterm)("placeholder",t.language.getLabel("LBL_SEARCH")),c.xp6(2),c.Q6J("ngForOf",c.Dn7(7,3,t.packages,t.packagefilterterm,t.packagescope)))},dependencies:[ni.H,n.sg,l.Fj,l.JJ,l.On,Ai,ki],encapsulation:2}),PackageLoaderPackages})();function Si(e,t){1&e&&(c.TgZ(0,"div",17),c._UZ(1,"system-icon",18),c.TgZ(2,"span",19),c._UZ(3,"system-label",20),c.qZA()())}function Ii(e,t){if(1&e&&(c.TgZ(0,"div",21),c._UZ(1,"system-icon",18),c.TgZ(2,"span",19),c._UZ(3,"system-label",22),c._uU(4),c.qZA()()),2&e){const e=c.oxw();c.xp6(4),c.hij(": ",e.errorpackagesdisplay,"")}}function Oi(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"li",34),c.NdJ("click",(function(){const t=c.CHM(e).$implicit,s=c.oxw(2);return c.KtG(s.selectRepository(t))})),c.TgZ(1,"div",35)(2,"div",36),c._uU(3),c.qZA()()()}if(2&e){const e=t.$implicit;c.xp6(3),c.Oqu(e.name)}}function Ji(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"div",23)(1,"div",24)(2,"div",25)(3,"div",26)(4,"div",27)(5,"div",28)(6,"input",29),c.NdJ("ngModelChange",(function(t){c.CHM(e);const s=c.oxw();return c.KtG(s.repositoryname=t)})),c.qZA(),c._UZ(7,"system-icon",30),c.qZA(),c.TgZ(8,"div",31)(9,"ul",32),c.YNc(10,Oi,4,1,"li",33),c.qZA()()()()()()()}if(2&e){const e=c.oxw();c.xp6(4),c.Q6J("system-dropdown-trigger",e.repositories.length<=1),c.xp6(2),c.Q6J("ngModel",e.repositoryname)("disabled",e.repositories.length<=1),c.xp6(4),c.Q6J("ngForOf",e.repositories)}}const Ni=function(e){return{"slds-is-active":e}},Fi=function(e,t){return{"slds-show":e,"slds-hide":t}};function qi(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"div",37)(1,"ul",38)(2,"li",39)(3,"a",40),c.NdJ("click",(function(){c.CHM(e);const t=c.oxw();return c.KtG(t.scope="essentials")})),c._UZ(4,"system-label",41),c.qZA()(),c.TgZ(5,"li",39)(6,"a",40),c.NdJ("click",(function(){c.CHM(e);const t=c.oxw();return c.KtG(t.scope="packages")})),c._UZ(7,"system-label",42),c.qZA()(),c.TgZ(8,"li",43)(9,"a",40),c.NdJ("click",(function(){c.CHM(e);const t=c.oxw();return c.KtG(t.scope="languages")})),c._UZ(10,"system-label",44),c.qZA()(),c.TgZ(11,"li",39)(12,"a",40),c.NdJ("click",(function(){c.CHM(e);const t=c.oxw();return c.KtG(t.scope="content")})),c._UZ(13,"system-label",45),c.qZA()()(),c._UZ(14,"package-loader-packages",46)(15,"package-loader-packages",47)(16,"package-loader-languages",48)(17,"package-loader-packages",49),c.qZA()}if(2&e){const e=c.oxw();c.xp6(2),c.Q6J("ngClass",c.VKq(19,Ni,"essentials"==e.scope))("title",e.language.getLabel("LBL_ESSENTIALS")),c.xp6(3),c.Q6J("ngClass",c.VKq(21,Ni,"packages"==e.scope))("title",e.language.getLabel("LBL_PACKAGES")),c.xp6(3),c.Q6J("ngClass",c.VKq(23,Ni,"languages"==e.scope)),c.xp6(3),c.Q6J("ngClass",c.VKq(25,Ni,"content"==e.scope))("title",e.language.getLabel("LBL_CONTENT")),c.xp6(3),c.Q6J("ngClass",c.WLB(27,Fi,"essentials"==e.scope,"essentials"!=e.scope))("packages",e.packages)("repository",e.repository),c.xp6(1),c.Q6J("ngClass",c.WLB(30,Fi,"packages"==e.scope,"packages"!=e.scope))("packages",e.packages)("repository",e.repository),c.xp6(1),c.Q6J("ngClass",c.WLB(33,Fi,"languages"==e.scope,"languages"!=e.scope))("languages",e.languages)("repository",e.repository),c.xp6(1),c.Q6J("ngClass",c.WLB(36,Fi,"content"==e.scope,"content"!=e.scope))("packages",e.packages)("repository",e.repository)}}function Ei(e,t){1&e&&(c.TgZ(0,"div",50)(1,"h2",51),c._uU(2,"Please select a Repository"),c.qZA()())}function Yi(e,t){1&e&&(c.TgZ(0,"div",52)(1,"div",21),c._UZ(2,"system-spinner",53),c.TgZ(3,"div",54),c._UZ(4,"system-label",55),c.qZA()()())}let Qi=(()=>{class PackageLoader{constructor(e,t,s,i){this.language=e,this.backend=t,this.toast=s,this.metadata=i,this.scope="essentials",this.loading=!0,this.packagefilterterm="",this.repositories=[],this.packages=[],this.versions=[],this.languages=[],this.opencrs=!1,this.errorpackages=[],this.backend.getRequest("configuration/packages/repositories").subscribe((e=>{this.loading=!1,this.repositories=e,0==this.repositories.length?(this.repository="default",this.loadpackages()):1==this.repositories.length&&(this.repository=this.repositories[0],this.loadpackages())}),(e=>{this.loading=!1}))}get errorpackagesdisplay(){return this.errorpackages.join(", ")}set repositoryname(e){this.repository.name=e}get repositoryname(){return this.repository&&this.repository.name?this.repository.name:""}get repositoryaddurl(){return this.repository&&this.repository.id?"/"+this.repository.id:""}loadpackages(){this.loading=!0,this.packages=[],this.languages=[],this.opencrs=!1,this.errorpackages=[],this.backend.getRequest("configuration/packages"+this.repositoryaddurl).subscribe((e=>{this.loading=!1;try{let t=this.language.getAvialableLanguages(!0);for(let s of e.languages)t.some((e=>{if(e.language==s.language_code)return s.installed=!0,!0})),this.languages.push(s);for(let t of e.packages){let s=e.loaded.packages.indexOf(t.package);s>=0?(t.installed=!0,e.loaded.packages.splice(s,1)):t.installed=!1,this.packages.push(t)}this.versions=e.versions,this.opencrs=e.opencrs,this.errorpackages=e.loaded.packages}catch(e){console.error(e)}}),(e=>{this.loading=!1}))}selectRepository(e){this.repository=e,this.loadpackages()}}return PackageLoader.ɵfac=function(e){return new(e||PackageLoader)(c.Y36(u.d),c.Y36(ze.y),c.Y36(h.A),c.Y36(m.Pu))},PackageLoader.ɵcmp=c.Xpm({type:PackageLoader,selectors:[["package-loader"]],decls:18,vars:6,consts:[[1,"slds-p-around--medium","slds-theme--shade"],[1,"slds-page-header__row"],[1,"slds-page-header__col-title"],[1,"slds-media"],["icon","custom19","sprite","custom"],[1,"slds-media__body"],[1,"slds-page-header__name"],[1,"slds-page-header__name-title"],[1,"slds-page-header__title","slds-truncate"],["label","LBL_PACKAGE_LOADER"],[1,"slds-page-header__name-meta","slds-grid"],["class","slds-grid slds-grid_vertical-align-center slds-p-right--small",4,"ngIf"],["class","slds-grid slds-grid_vertical-align-center",4,"ngIf"],["class","slds-page-header__col-actions",4,"ngIf"],["class","slds-theme--default",4,"ngIf"],["system-to-bottom","","class","slds-theme--default slds-align--absolute-center",4,"ngIf"],["system-to-bottom","","class","slds-align_absolute-center",4,"ngIf"],[1,"slds-grid","slds-grid_vertical-align-center","slds-p-right--small"],["addclasses","slds-icon slds-icon-text-warning","divClass","","icon","warning","sprite","utility","size","xx-small"],[1,"slds-p-left--xx-small"],["label","LBL_OPEN_CHANGEREQUESTS"],[1,"slds-grid","slds-grid_vertical-align-center"],["label","LBL_ERRONEUOS_PACKAGES"],[1,"slds-page-header__col-actions"],[1,"slds-form-element"],[1,"slds-form-element__control"],[1,"slds-combobox_container"],["role","combobox",1,"slds-combobox","slds-dropdown-trigger","slds-dropdown-trigger_click",3,"system-dropdown-trigger"],["role","none",1,"slds-combobox__form-element","slds-input-has-icon","slds-input-has-icon_right"],["type","text","autoComplete","off","role","textbox",1,"slds-input","slds-combobox__input",3,"ngModel","disabled","ngModelChange"],["icon","down","sprite","utility","size","x-small","addclasses","slds-icon_container slds-icon-utility-down slds-input__icon slds-input__icon_right"],["role","listbox",1,"slds-dropdown","slds-dropdown_length-5","slds-dropdown--x-small"],["role","presentation",1,"slds-listbox","slds-listbox_vertical"],["role","presentation","class","slds-listbox__item",3,"click",4,"ngFor","ngForOf"],["role","presentation",1,"slds-listbox__item",3,"click"],["role","option",1,"slds-listbox__option","slds-listbox__option_plain"],["title","Express Logistics and Transport",1,"slds-truncate"],[1,"slds-theme--default"],["role","tablist",1,"slds-tabs_default__nav"],["role","presentation",1,"slds-tabs_default__item",3,"ngClass","title"],["href","javascript:void(0);","role","tab",1,"slds-tabs_default__link",3,"click"],["label","LBL_ESSENTIALS"],["label","LBL_PACKAGES"],["title","language.getLabel('LBL_LANGUAGES')","role","presentation",1,"slds-tabs_default__item",3,"ngClass"],["label","LBL_LANGUAGES"],["label","LBL_CONTENT"],["packagescope","essentials",3,"ngClass","packages","repository"],["packagescope","config",3,"ngClass","packages","repository"],[3,"ngClass","languages","repository"],["packagescope","content",3,"ngClass","packages","repository"],["system-to-bottom","",1,"slds-theme--default","slds-align--absolute-center"],[1,"slds-text-heading--medium","slds-p-vertical--small"],["system-to-bottom","",1,"slds-align_absolute-center"],["size","16"],[1,"slds-p-horizontal--small"],["label","LBL_RETRIEVING_PACKAGES"]],template:function(e,t){1&e&&(c.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),c._UZ(4,"system-icon",4),c.TgZ(5,"div",5)(6,"div",6)(7,"div",7)(8,"h1")(9,"span",8),c._UZ(10,"system-label",9),c.qZA()()()(),c.TgZ(11,"div",10),c.YNc(12,Si,4,0,"div",11),c.YNc(13,Ii,5,1,"div",12),c.qZA()()()(),c.YNc(14,Ji,11,4,"div",13),c.qZA()(),c.YNc(15,qi,18,39,"div",14),c.YNc(16,Ei,3,0,"div",15),c.YNc(17,Yi,5,0,"div",16)),2&e&&(c.xp6(12),c.Q6J("ngIf",t.opencrs),c.xp6(1),c.Q6J("ngIf",t.errorpackages.length>0),c.xp6(1),c.Q6J("ngIf",t.repositories.length>0),c.xp6(1),c.Q6J("ngIf",!t.loading&&t.repository),c.xp6(1),c.Q6J("ngIf",!t.loading&&!t.repository),c.xp6(1),c.Q6J("ngIf",t.loading))},dependencies:[ii.l,ni.H,n.mk,n.sg,n.O5,l.Fj,l.JJ,l.On,gi,Mi,ne.f,p._,ue.W],encapsulation:2}),PackageLoader})();var Ui=s(3617);let Di=(()=>{class SystemFilterBuilder{constructor(){this._conditions={logicaloperator:"and",groupscope:"all",conditions:[]}}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}writeValue(e){if(e&&!_.isEmpty(e)){let t={logicaloperator:e.logicaloperator,groupscope:e.groupscope,conditions:[...e.conditions]};this._conditions=t}}expressionChanged(){let e=[];for(let t of this._conditions.conditions)!0!==t.deleted&&e.push(t);this._conditions.conditions=e,_.isEmpty(this._conditions.conditions)?this.onChange(null):this.onChange({...this._conditions})}}return SystemFilterBuilder.ɵfac=function(e){return new(e||SystemFilterBuilder)},SystemFilterBuilder.ɵcmp=c.Xpm({type:SystemFilterBuilder,selectors:[["system-filter-builder"]],inputs:{module:"module"},features:[c._Bn([{provide:l.JU,useExisting:(0,c.Gpc)((()=>SystemFilterBuilder)),multi:!0}])],decls:1,vars:2,consts:[[3,"filtergroup","module","expressionChanged"]],template:function(e,t){1&e&&(c.TgZ(0,"system-filter-builder-expression-group",0),c.NdJ("expressionChanged",(function(){return t.expressionChanged()})),c.qZA()),2&e&&c.Q6J("filtergroup",t._conditions)("module",t.module)},dependencies:[Ui.s],encapsulation:2}),SystemFilterBuilder})();var ji=s(1230),Ri=s(7706),Bi=s(7617),Gi=s(7720),Pi=s(1691),Hi=s(2547),zi=s(6449),Vi=s(6991),Ki=s(6041),$i=s(5861),Xi=s(9774);const Wi=["inputFile"];function en(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"div",3)(1,"div",4),c.NdJ("system-drop-file",(function(t){c.CHM(e);const s=c.oxw();return c.KtG(s.uploadFile(t))})),c.TgZ(2,"input",5,6),c.NdJ("change",(function(){c.CHM(e);const t=c.MAs(3),s=c.oxw();return c.KtG(s.uploadFile(t.files))}))("click",(function(){c.CHM(e);const t=c.MAs(3);return c.KtG(t.value=null)})),c.qZA(),c.TgZ(4,"label",7)(5,"span",8),c._UZ(6,"system-button-icon",9)(7,"system-label",10),c.qZA(),c.TgZ(8,"span",11),c._UZ(9,"system-label",12)(10,"system-label",13),c.qZA()()()()}if(2&e){const e=c.oxw();c.xp6(2),c.Q6J("accept",e.accept)("disabled",e.disabled)("id",e.elementID),c.xp6(2),c.Q6J("for",e.elementID)}}function tn(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"div",14)(1,"span",15),c._UZ(2,"system-file-icon",16),c.qZA(),c.TgZ(3,"a",17)(4,"div",18),c._uU(5),c.qZA()(),c.TgZ(6,"button",19),c.NdJ("click",(function(){c.CHM(e);const t=c.oxw();return c.KtG(t.removeFile())})),c._UZ(7,"system-button-icon",20),c.qZA()()}if(2&e){const e=c.oxw();c.xp6(2),c.Q6J("filename",e.file.file_name)("filemimetype",e.file.file_mime_type),c.xp6(2),c.Q6J("system-title",e.file.file_name),c.xp6(1),c.hij(" ",e.file.file_name," ")}}let sn=(()=>{class SystemInputFileContent{constructor(e,t,s,i,n,l,o){this.configurationService=e,this.session=t,this.toast=s,this.helper=i,this.modal=n,this.cdRef=l,this.language=o,this.accept="*",this.disabled=!1,this.contenttype="base64",this.persistens=!1,this.isUploading=!1,this.elementID=_.uniqueId("input-file")}registerOnChange(e){this.onChange=t=>{e(t)}}registerOnTouched(e){this.onTouched=e}writeValue(e){this.file=e}uploadFile(e){var t=this;return(0,$i.Z)((function*(){if(0==e.length)return;t.isUploading=!0,t.cdRef.detectChanges(),t.file={file_name:e[0].name,file_mime_type:e[0].type,file_size:t.helper.humanFileSize(e[0].size)};let s=t.configurationService.getSystemParamater("upload_maxsize");if(s&&e[0].size>s)return void t.toast.sendToast(t.language.getLabelFormatted("LBL_EXCEEDS_MAX_UPLOADFILESIZE",[t.file.file_name,t.helper.humanFileSize(s)]),"error");const i=yield t.readFileAsync(e[0]);t.onChange(i),t.persistens||(t.file=void 0,t.cdRef.detectChanges())}))()}readFileAsync(e){var t=this;return(0,$i.Z)((function*(){return new Promise(((s,i)=>{const n=new FileReader;if(n.onload=()=>s(n.result.toString()),n.onerror=i,"text"===t.contenttype)n.readAsText(e);else n.readAsDataURL(e)}))}))()}removeFile(){this.file=void 0,this.cdRef.detectChanges(),this.onChange(null)}}return SystemInputFileContent.ɵfac=function(e){return new(e||SystemInputFileContent)(c.Y36(Te.C),c.Y36($.n),c.Y36(h.A),c.Y36(os._),c.Y36(Ke.o),c.Y36(c.sBO),c.Y36(u.d))},SystemInputFileContent.ɵcmp=c.Xpm({type:SystemInputFileContent,selectors:[["system-input-file-content"]],viewQuery:function(e,t){if(1&e&&c.Gf(Wi,5,c.s_b),2&e){let e;c.iGM(e=c.CRH())&&(t.inputFile=e.first)}},inputs:{fieldName:"fieldName",accept:"accept",disabled:"disabled",contenttype:"contenttype",persistens:"persistens"},features:[c._Bn([{provide:l.JU,useExisting:(0,c.Gpc)((()=>SystemInputFileContent)),multi:!0}])],decls:4,vars:2,consts:[[1,"slds-form-element__control","slds-grid","slds-grid--align-spread","slds-p-vertical--xx-small","slds-is-relative","slds-size--1-of-1"],["class","slds-file-selector slds-file-selector_files slds-is-relative slds-size--1-of-1",4,"ngIf","ngIfElse"],["fileContainer",""],[1,"slds-file-selector","slds-file-selector_files","slds-is-relative","slds-size--1-of-1"],[1,"slds-file-selector__dropzone","slds-p-around--small","slds-is-relative","slds-size--1-of-1",3,"system-drop-file"],["type","file",1,"slds-file-selector__input","slds-assistive-text","slds-has-error",3,"accept","disabled","id","change","click"],["inputFile",""],[1,"slds-file-selector__body",2,"cursor","pointer",3,"for"],[1,"slds-file-selector__button","slds-button","slds-button_neutral"],["icon","upload",1,"slds-m-right--xx-small","slds-align--absolute-center"],["label","LBL_UPLOAD_FILE"],[1,"slds-file-selector__text","slds-medium-show"],["label","LBL_OR"],["label","LBL_DROP_FILE"],[1,"slds-pill","slds-pill_link","slds-size--1-of-1"],[1,"slds-pill__icon_container","slds-m-left--xxx-small"],["divClass","","size","small",3,"filename","filemimetype"],["href","javascript:void(0);",1,"slds-pill__action","slds-p-around--xx-small"],[1,"slds-pill__label","slds-truncate",2,"width","calc(100% - 20px)",3,"system-title"],["system-title","LBL_REMOVE",1,"slds-button","slds-button_icon","slds-button_icon","slds-pill__remove","slds-m-right--xx-small",3,"click"],["icon","close"]],template:function(e,t){if(1&e&&(c.TgZ(0,"div",0),c.YNc(1,en,11,4,"div",1),c.YNc(2,tn,8,4,"ng-template",null,2,c.W1O),c.qZA()),2&e){const e=c.MAs(3);c.xp6(1),c.Q6J("ngIf",!t.file)("ngIfElse",e)}},dependencies:[Xi.M,Xe.S,n.O5,g.J,le.T,p._],encapsulation:2,changeDetection:0}),SystemInputFileContent})();var nn=s(4947),ln=s(4878),on=s(8322);let an=(()=>{class SystemImageModal{constructor(e){this.language=e,this.title="",this.maxWidth=null,this.maxHeight=null,this.droppedFiles=null,this.imageData_onlyBase64code=null,this.answer=null,this.answerSubject=null,this.answerSubject=new G.x,this.answer=this.answerSubject.asObservable()}set imageData(e){if(this.mimetype=this.imageData_onlyBase64code="",e){let t=e.split(";",2);this.mimetype=t[0],this.imageData_onlyBase64code=t[1].slice(7)}}cancel(){this.answerSubject.next(!1),this.answerSubject.complete(),this.self.destroy()}get canSave(){return!!this.imageData_onlyBase64code}save(){this.canSave&&(this.answerSubject.next(this.systemInputMedia.mediaMetaData.mimetype+";base64,"+this.imageData_onlyBase64code),this.answerSubject.complete(),this.self.destroy())}onModalEscX(){this.cancel()}}return SystemImageModal.ɵfac=function(e){return new(e||SystemImageModal)(c.Y36(u.d))},SystemImageModal.ɵcmp=c.Xpm({type:SystemImageModal,selectors:[["system-image-modal"]],viewQuery:function(e,t){if(1&e&&c.Gf(Hi.l,5),2&e){let e;c.iGM(e=c.CRH())&&(t.systemInputMedia=e.first)}},inputs:{title:"title",maxWidth:"maxWidth",maxHeight:"maxHeight",droppedFiles:"droppedFiles",imageData:"imageData"},decls:10,vars:7,consts:[["size","large"],[3,"close"],[1,"slds-height_full",3,"ngModel","maxWidth","maxHeight","droppedFiles","mimetype","ngModelChange"],[1,"slds-button","slds-button--brand",3,"disabled","click"],["label","LBL_SAVE"],[1,"slds-button","slds-button--neutral",3,"click"],["label","LBL_CANCEL"]],template:function(e,t){1&e&&(c.TgZ(0,"system-modal",0)(1,"system-modal-header",1),c.NdJ("close",(function(){return t.cancel()})),c._uU(2),c.qZA(),c.TgZ(3,"system-modal-content")(4,"system-input-media",2),c.NdJ("ngModelChange",(function(e){return t.imageData_onlyBase64code=e}))("mimetype",(function(e){return t.mimetype=e})),c.qZA()(),c.TgZ(5,"system-modal-footer")(6,"button",3),c.NdJ("click",(function(){return t.save()})),c._UZ(7,"system-label",4),c.qZA(),c.TgZ(8,"button",5),c.NdJ("click",(function(){return t.cancel()})),c._UZ(9,"system-label",6),c.qZA()()()),2&e&&(c.xp6(2),c.hij(" ",t.title," "),c.xp6(2),c.Q6J("ngModel",t.imageData_onlyBase64code)("maxWidth",t.maxWidth)("maxHeight",t.maxHeight)("droppedFiles",t.droppedFiles)("mimetype",t.mimetype),c.xp6(2),c.Q6J("disabled",!t.canSave))},dependencies:[l.JJ,l.On,p._,f.j,b.x,y.p,v.y,Hi.l],encapsulation:2}),SystemImageModal})();var dn=s(6274),rn=s(4988),cn=s(8070),un=s(5383),mn=s(1819),hn=s(4211),gn=s(6268),pn=s(4845);function fn(e,t){if(1&e&&c._UZ(0,"object",2),2&e){const e=c.oxw();c.Q6J("data",e.blobUrl,c.uOi)}}let bn=(()=>{class SystemPDFContainer{constructor(e){this.sanitizer=e}ngOnChanges(e){if(this.blobUrl=null,this.pdf){let e=this.dataToBlob(atob(this.pdf));this.blobUrl=this.sanitizer.bypassSecurityTrustResourceUrl(URL.createObjectURL(e))}}dataToBlob(e){let t=[];for(let s=0;s<e.length;s+=512){let i=e.slice(s,s+512),n=new Array(i.length);for(let e=0;e<i.length;e++)n[e]=i.charCodeAt(e);let l=new Uint8Array(n);t.push(l)}return new Blob(t)}}return SystemPDFContainer.ɵfac=function(e){return new(e||SystemPDFContainer)(c.Y36(wt.H7))},SystemPDFContainer.ɵcmp=c.Xpm({type:SystemPDFContainer,selectors:[["system-pdf-container"]],inputs:{pdf:"pdf"},features:[c.TTD],decls:2,vars:1,consts:[[1,"slds-size--1-of-1","slds-height_full"],["type","application/pdf","width","100%","height","99%",3,"data",4,"ngIf"],["type","application/pdf","width","100%","height","99%",3,"data"]],template:function(e,t){1&e&&(c.TgZ(0,"div",0),c.YNc(1,fn,1,1,"object",1),c.qZA()),2&e&&(c.xp6(1),c.Q6J("ngIf",t.blobUrl))},dependencies:[n.O5],encapsulation:2}),SystemPDFContainer})();function _n(e,t){if(1&e&&c._UZ(0,"iframe",4),2&e){const e=c.oxw();c.Q6J("src",e.iframeSource,c.uOi)}}let yn=(()=>{class SystemIframeModal{constructor(e,t){this.sanitizer=e,this.cdref=t}close(){this.self.destroy()}ngOnInit(){this.iframeSource=this.sanitizer.bypassSecurityTrustResourceUrl(this.source),this.cdref.detectChanges()}}return SystemIframeModal.ɵfac=function(e){return new(e||SystemIframeModal)(c.Y36(wt.H7),c.Y36(c.sBO))},SystemIframeModal.ɵcmp=c.Xpm({type:SystemIframeModal,selectors:[["system-iframe-modal"]],inputs:{source:"source"},decls:4,vars:1,consts:[["size","large"],[3,"close"],["system-modal-content-grow","","margin","none"],["class","slds-size--1-of-1 slds-height_full","style","border: none;",3,"src",4,"ngIf"],[1,"slds-size--1-of-1","slds-height_full",2,"border","none",3,"src"]],template:function(e,t){1&e&&(c.TgZ(0,"system-modal",0)(1,"system-modal-header-empty",1),c.NdJ("close",(function(){return t.close()})),c.qZA(),c.TgZ(2,"system-modal-content",2),c.YNc(3,_n,1,1,"iframe",3),c.qZA()()),2&e&&(c.xp6(3),c.Q6J("ngIf",t.source))},dependencies:[n.O5,f.j,b.x,yt],encapsulation:2,changeDetection:0}),SystemIframeModal})();var vn=s(2391),xn=s(121),Zn=s(3091);let wn=(()=>{class SystemComponents{}return SystemComponents.ɵfac=function(e){return new(e||SystemComponents)},SystemComponents.ɵmod=c.oAB({type:SystemComponents}),SystemComponents.ɵinj=c.cJS({imports:[o.o,n.ez,l.u5,i._t]}),SystemComponents})();("undefined"==typeof ngJitMode||ngJitMode)&&c.kYT(wn,{declarations:[Qi,mi,gi,Ai,Mi,ki,r.L,r.s,A,k.g,L.O,S,g.J,I.x,J.I,F,O.Q,q.r,Q.U,E.L,Y.m,U.v,D.z,j.m,R.K,B.E,P,H.$,z.a,V.G,K.T,ee,te.Y,se.t,ie.l,ne.f,le.T,yn,oe.s,ae.t,de.C,re.H,ce.k,fe,be.Z,ve.n,_e.r,ye.u,xe.Q,vn.K,Ze.C,we.y,Le,Se.z,Me.e,Ie.y,Oe.a,Je.$,Ne.a,Fe.l,qe.s,Ee.i,Ye.Z,Qe.A,Ue.p,De.z,je.H,Re.C,Be.H,Ge.x,Pe.N,Vi.V,He,p._,at.h,dt.M,rt.M,ct.A,ut.e,mt,f.j,b.x,y.p,v.y,yt,ht.O,gt.J,xt,a.N,d.m,Zt.H,It,bn,Fe.l,Di,Ui.s,Gi.H,ji.Y,Bi.w,Ri.U,Ps,Ot.s,qt,Et.J,is,ns.z,vs.u,ys,Cs,As.P,ks.R,ue.W,Ss,Is.B,Os.x,Js,Ns,Fs.t,qs.S,Ys.O,Es.u,Rs,Hs.r,Ws,ei.h,ti.I,Pi.E,nn.w,ln.E,Pi.E,Hi.l,zi.R,on.E,dn.f,on.E,an,rn.y,cn.M,un.j,lt,ot,mn.W,hn.w,gn.f,pn.z,Ki.K,sn,si,xn.m,Zn.e],imports:[o.o,n.ez,l.u5,i._t],exports:[r.L,r.s,A,k.g,L.O,S,g.J,I.x,J.I,F,O.Q,Q.U,E.L,Y.m,U.v,D.z,R.K,B.E,H.$,z.a,V.G,K.T,Gi.H,ji.Y,Bi.w,Ui.s,se.t,ie.l,ne.f,le.T,oe.s,ae.t,de.C,re.H,ce.k,be.Z,ve.n,_e.r,ye.u,xe.Q,Ze.C,we.y,Le,Se.z,Me.e,Ie.y,Oe.a,Je.$,Ne.a,Fe.l,qe.s,Ee.i,Ye.Z,Qe.A,Ue.p,De.z,je.H,Re.C,Be.H,Ge.x,Pe.N,Vi.V,He,p._,at.h,dt.M,rt.M,ct.A,ut.e,f.j,b.x,y.p,v.y,yt,ht.O,gt.J,xt,Zt.H,Ot.s,qt,Et.J,is,ns.z,Cs,As.P,ks.R,ue.W,Ss,Is.B,Is.B,Os.x,Js,Fs.t,qs.S,Ys.O,Es.u,Hs.r,Ws,ei.h,ti.I,Fe.l,Di,Ui.s,Gi.H,Pi.E,Hi.l,Pi.E,nn.w,ln.E,zi.R,on.E,dn.f,on.E,an,rn.y,cn.M,we.y,je.H,mn.W,hn.w,gn.f,pn.z,Ki.K,sn,yt,si,bn,vn.K,lt,Zn.e,q.r]}),c.B6R(ue.W,[n.O5,n.PC,p._],[])},9456:(e,t,s)=>{var i={"./admincomponents/admincomponents.module.ts":[9876,9,"src_admincomponents_admincomponents_module_ts"],"./globalcomponents/globalcomponents.ts":[3283,9],"./include/groupware/groupware.ts":[2149,9,"src_include_groupware_groupware_ts"],"./include/quilleditor/quilleditor.ts":[4974,9,"src_include_quilleditor_quilleditor_ts"],"./include/sendinblue/sendinbluemodule.ts":[1887,9,"src_include_sendinblue_sendinbluemodule_ts"],"./include/spiceattachments/spiceattachments.ts":[3030,9,"src_include_spiceattachments_spiceattachments_ts"],"./include/spicecharts/spicecharts.ts":[4972,9,"src_include_spicecharts_spicecharts_ts"],"./include/spicefavorites/spicefavorites.ts":[8009,9,"src_include_spicefavorites_spicefavorites_ts"],"./include/spiceimporter/spiceimporter.ts":[4877,9,"src_include_spiceimporter_spiceimporter_ts"],"./include/spiceinstaller/spiceinstallermodule.ts":[1767,9],"./include/spicemap/spicemap.ts":[3106,9,"src_include_spicemap_spicemap_ts"],"./include/spicemath/spicemath.ts":[7109,9,"src_include_spicemath_spicemath_ts"],"./include/spicemerge/spicemerge.ts":[8494,9,"src_include_spicemerge_spicemerge_ts"],"./include/spicenotes/spicenotes.ts":[8467,9,"src_include_spicenotes_spicenotes_ts"],"./include/spicepagebuilder/modulespicepagebuilder.ts":[1983,9,"src_include_spicepagebuilder_modulespicepagebuilder_ts"],"./include/spicepath/spicepath.ts":[3264,9,"src_include_spicepath_spicepath_ts"],"./include/spicetexts/spicetexts.ts":[5388,9,"src_include_spicetexts_spicetexts_ts"],"./include/spicetimeline/spicetimeline.ts":[7135,9,"src_include_spicetimeline_spicetimeline_ts"],"./include/spicetimestream/spicetimestream.ts":[7846,9,"src_include_spicetimestream_spicetimestream_ts"],"./modules/accounts/moduleaccounts.ts":[5330,9,"src_modules_accounts_moduleaccounts_ts"],"./modules/acl/moduleacl.ts":[5612,9,"src_modules_acl_moduleacl_ts"],"./modules/activities/moduleactivities.ts":[5743,9,"default-src_modules_activities_moduleactivities_ts"],"./modules/bonusprograms/modulebonusprograms.ts":[36,7,"src_modules_bonusprograms_modulebonusprograms_ts"],"./modules/calendar/modulecalendar.ts":[2114,9,"src_modules_calendar_modulecalendar_ts"],"./modules/campaigns/modulecampaigns.ts":[2133,9,"src_modules_campaigns_modulecampaigns_ts"],"./modules/chat/modulechat.ts":[9505,9,"src_modules_chat_modulechat_ts"],"./modules/contacts/modulecontacts.ts":[1435,9,"src_modules_contacts_modulecontacts_ts"],"./modules/currencies/modulecurrencies.ts":[2022,9,"src_modules_currencies_modulecurrencies_ts"],"./modules/dashboard/moduledashboard.ts":[4023,9,"src_modules_dashboard_moduledashboard_ts"],"./modules/documents/moduledocuments.ts":[6340,9,"default-src_modules_outputtemplates_components_objectactionoutputbeanmodal_ts","src_modules_documents_moduledocuments_ts"],"./modules/emails/moduleemails.ts":[8544,9,"src_modules_emails_moduleemails_ts"],"./modules/folders/modulefolders.ts":[3061,9,"src_modules_folders_modulefolders_ts"],"./modules/googleapi/modulegoogleapi.ts":[8725,9,"src_modules_googleapi_modulegoogleapi_ts"],"./modules/holidaycalendars/moduleholidaycalendars.ts":[8395,9,"src_modules_holidaycalendars_moduleholidaycalendars_ts"],"./modules/home/modulehome.ts":[6132,9,"default-src_modules_activities_moduleactivities_ts","src_modules_home_modulehome_ts"],"./modules/leads/moduleleads.ts":[9443,9,"src_modules_leads_moduleleads_ts"],"./modules/mailboxes/modulemailboxes.ts":[9028,9,"src_modules_mailboxes_modulemailboxes_ts"],"./modules/mediafiles/modulemediafiles.ts":[1546,9,"src_modules_mediafiles_modulemediafiles_ts"],"./modules/opportunities/moduleopportunities.ts":[2257,9,"src_modules_opportunities_moduleopportunities_ts"],"./modules/orgunits/moduleorgunits.ts":[6814,9,"src_modules_orgunits_moduleorgunits_ts"],"./modules/outputtemplates/moduleoutputtemplates.ts":[9769,9,"default-src_modules_outputtemplates_components_objectactionoutputbeanmodal_ts","src_modules_outputtemplates_moduleoutputtemplates_ts"],"./modules/prospectlists/moduleprospectlists.ts":[5739,9,"src_modules_prospectlists_moduleprospectlists_ts"],"./modules/reports/modulereports.ts":[4274,9,"default-src_modules_reports_modulereports_ts"],"./modules/reportsdesigner/modulereportsdesigner.ts":[3158,9,"default-src_modules_reports_modulereports_ts","src_modules_reportsdesigner_modulereportsdesigner_ts"],"./modules/scrum/modulescrum.ts":[8836,9,"src_modules_scrum_modulescrum_ts"],"./modules/spiceimports/modulespiceimports.ts":[9678,9,"src_modules_spiceimports_modulespiceimports_ts"],"./modules/systemcalendars/modulesystemcalendars.ts":[9109,9,"src_modules_systemcalendars_modulesystemcalendars_ts"],"./modules/users/moduleusers.ts":[3865,9,"src_modules_users_moduleusers_ts"],"./objectcomponents/objectcomponents.ts":[4518,9],"./objectfields/objectfields.ts":[3121,9],"./portalcomponents/portalcomponents.ts":[7862,9,"src_portalcomponents_portalcomponents_ts"],"./systemcomponents/systemcomponents.ts":[5478,9],"./workbench/workbench.module.ts":[9407,9,"src_workbench_workbench_module_ts"]};function n(e){if(!s.o(i,e))return Promise.resolve().then((()=>{var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=i[e],n=t[0];return Promise.all(t.slice(2).map(s.e)).then((()=>s.t(n,16|t[1])))}n.keys=()=>Object.keys(i),n.id=9456,e.exports=n}},e=>{e.O(0,["vendor"],(()=>{return t=3101,e(e.s=t);var t}));e.O()}]);