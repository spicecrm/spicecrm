/*!
 * 
 *                     aacService
 *
 *                     release: 2023.03.001
 *
 *                     date: 2024-01-09 16:51:03
 *
 *                     build: 2023.03.001.1704815463270
 *
 */
(self.webpackChunkcore=self.webpackChunkcore||[]).push([["main"],{53629:(e,t,s)=>{"use strict";s.d(t,{N:()=>i});const i={production:!0,buildNumber:"2023.03.001.1704815463270",copyright:"© 2015 -  2024 aac services k.s. All rights reserved."}},84357:(e,t,s)=>{"use strict";s.d(t,{o:()=>k});var i=s(44755),n=s(31790),l=s(23548),o=s(7763),a=s(15982),d=s(95681),r=s(99573),c=s(14361),u=s(31058),m=s(73194),g=s(98280),h=s(23814),p=s(69774),f=s(54021),b=s(37982),_=s(50151),v=s(83398),y=s(91061),x=s(62242),w=s(44044);let Z=(()=>{class SystemCalculatorTriggerDirective{modal;elementRef;constructor(e,t){this.modal=e,this.elementRef=t}openCalculator(){this.elementRef.nativeElement.previousSibling&&this.elementRef.nativeElement.previousSibling.tagName in{INPUT:1,TEXTAREA:1}&&this.modal.openModal("SpiceCalculatorModal").subscribe((e=>{e.instance.value=this.elementRef.nativeElement.previousSibling.value,e.instance.trigger=!0,e.instance.value$.subscribe((e=>{isNaN(e)||(this.elementRef.nativeElement.previousSibling.value=e)}))}))}static ɵfac=function(e){return new(e||SystemCalculatorTriggerDirective)(x.Y36(w.o),x.Y36(x.SBq))};static ɵdir=x.lG2({type:SystemCalculatorTriggerDirective,selectors:[["","system-calculator-trigger",""]],hostBindings:function(e,t){1&e&&x.NdJ("click",(function(){return t.openCalculator()}))}})}return SystemCalculatorTriggerDirective})(),T=(()=>{class SystemStopClickPropagationDirective{onClick(e){e.stopPropagation()}static ɵfac=function(e){return new(e||SystemStopClickPropagationDirective)};static ɵdir=x.lG2({type:SystemStopClickPropagationDirective,selectors:[["","system-stop-click-propagation",""]],hostBindings:function(e,t){1&e&&x.NdJ("click",(function(e){return t.onClick(e)}))}})}return SystemStopClickPropagationDirective})();var C=s(23171);let k=(()=>{class DirectivesModule{static ɵfac=function(e){return new(e||DirectivesModule)};static ɵmod=x.oAB({type:DirectivesModule});static ɵinj=x.cJS({imports:[i.ez]})}return DirectivesModule})();("undefined"==typeof ngJitMode||ngJitMode)&&x.kYT(k,{declarations:[n.g,l.K,o.u,a.m,d.l,r.$,c.w,u.H,m.t,g.t,h.V,p.M,f._,b.h,v.A,_.S,y.Q,Z,T,C.F],imports:[i.ez],exports:[n.g,l.K,o.u,a.m,d.l,r.$,c.w,u.H,m.t,g.t,h.V,p.M,f._,b.h,v.A,_.S,y.Q,Z,T,C.F]})},15982:(e,t,s)=>{"use strict";s.d(t,{m:()=>n});var i=s(62242);let n=(()=>{class SystemAutofocusDirective{elementRef;constructor(e){this.elementRef=e}ngAfterViewInit(){setTimeout((()=>{this.elementRef.nativeElement.tabIndex||(this.elementRef.nativeElement.tabIndex="-1"),this.elementRef.nativeElement.focus()}))}static ɵfac=function(e){return new(e||SystemAutofocusDirective)(i.Y36(i.SBq))};static ɵdir=i.lG2({type:SystemAutofocusDirective,selectors:[["","system-autofocus",""]]})}return SystemAutofocusDirective})()},95681:(e,t,s)=>{"use strict";s.d(t,{l:()=>o});var i=s(62242),n=s(83917),l=s(26559);let o=(()=>{class SystemDropdownTriggerDirective{renderer;elementRef;footer;layout;cdRef;dropDownOpen=!1;hasTriggerButton=!1;triggerElementButton;clickListener;triggerClickListener;previousTriggerRect;dropdownElement;stickyOnMobile=!1;dropdowntriggerdisabled=!1;constructor(e,t,s,i,n){this.renderer=e,this.elementRef=t,this.footer=s,this.layout=i,this.cdRef=n}get triggerElement(){return this.hasTriggerButton?this.triggerElementButton.nativeElement:this.elementRef.nativeElement}ngOnInit(){this.setDropdownElement()}ngOnDestroy(){this.removeScrollListener(),this.restoreDropdownFromFooter(),this.clickListener&&this.clickListener(),this.triggerClickListener&&this.triggerClickListener()}removeScrollListener(){window.removeEventListener("scroll",this.scrollHandlerFn,{capture:!0})}toggleDropdown(e){if(this.dropdownElement||this.setDropdownElement(),e&&(e.preventDefault(),e.stopPropagation()),this.dropdowntriggerdisabled||!this.dropdownElement)return!1;this.dropDownOpen=!this.dropDownOpen,this.dropDownOpen?(this.moveDropdownToFooter(),this.setDropdownElementPosition(),this.scrollHandlerFn=()=>requestAnimationFrame((()=>this.setDropdownElementPosition())),this.clickListener=this.renderer.listen("document","click",(e=>this.onClick(e))),window.addEventListener("scroll",this.scrollHandlerFn,{capture:!0})):(this.removeScrollListener(),this.restoreDropdownFromFooter(),this.clickListener())}scrollHandlerFn;hostClick(e){this.hasTriggerButton||this.toggleDropdown(e)}moveDropdownToFooter(){this.renderer.removeChild(this.elementRef.nativeElement,this.dropdownElement),this.renderer.appendChild(this.footer.footercontainer.element.nativeElement,this.dropdownElement)}restoreDropdownFromFooter(){this.dropdownElement&&this.footer.footercontainer.element.nativeElement.contains(this.dropdownElement)&&(this.renderer.removeChild(this.footer.footercontainer.element.nativeElement,this.dropdownElement),this.renderer.appendChild(this.elementRef.nativeElement,this.dropdownElement))}setDropdownElement(){if(!this.dropdownElement)for(let e of this.elementRef.nativeElement.children)if(e.classList.contains("slds-dropdown")){this.dropdownElement=e;break}}setDropdownElementPosition(){if(this.stickyOnMobile&&"small"==this.layout.screenwidth)return void this.renderer.addClass(this.dropdownElement,"spice-dropdown-mobile");this.renderer.removeClass(this.dropdownElement,"spice-dropdown-mobile");let e=this.triggerElement.getBoundingClientRect();this.previousTriggerRect&&JSON.stringify(this.previousTriggerRect)==JSON.stringify(e)||(this.previousTriggerRect=e,this.renderer.setStyle(this.dropdownElement,"transform","translateX(0)"),this.renderer.setStyle(this.dropdownElement,"z-index","999999"),this.renderer.addClass(this.dropdownElement,"slds-scrollable"),e.bottom>.7*window.innerHeight&&e.bottom+this.dropdownElement.clientHeight>window.innerHeight?(this.renderer.setStyle(this.dropdownElement,"bottom",window.innerHeight-e.top+"px"),this.renderer.setStyle(this.dropdownElement,"top","auto"),this.renderer.setStyle(this.dropdownElement,"max-height",e.top-10+"px")):(this.renderer.setStyle(this.dropdownElement,"top",e.bottom+"px"),this.renderer.setStyle(this.dropdownElement,"bottom","auto"),e.bottom<.7*window.innerHeight&&this.renderer.setStyle(this.dropdownElement,"max-height",window.innerHeight-e.bottom-10+"px")),e.right-this.dropdownElement.clientWidth>10||e.right>.3*window.innerWidth?(this.renderer.setStyle(this.dropdownElement,"right",window.innerWidth-e.right+"px"),this.renderer.setStyle(this.dropdownElement,"left","auto"),this.renderer.setStyle(this.dropdownElement,"max-width",e.width+"px")):(this.renderer.setStyle(this.dropdownElement,"left",e.left+"px"),this.renderer.setStyle(this.dropdownElement,"right","auto"),e.right<.7*window.innerWidth&&this.renderer.setStyle(this.dropdownElement,"max-width",window.innerWidth-e.right-10+"px")),this.cdRef.markForCheck())}onClick(e){this.elementRef.nativeElement.contains(e.target)||(this.dropDownOpen=!1,this.removeScrollListener(),this.restoreDropdownFromFooter(),this.clickListener(),this.cdRef.markForCheck())}static ɵfac=function(e){return new(e||SystemDropdownTriggerDirective)(i.Y36(i.Qsj),i.Y36(i.SBq),i.Y36(n.M),i.Y36(l.b),i.Y36(i.sBO))};static ɵdir=i.lG2({type:SystemDropdownTriggerDirective,selectors:[["","system-dropdown-trigger",""]],hostVars:2,hostBindings:function(e,t){1&e&&i.NdJ("click",(function(e){return t.hostClick(e)})),2&e&&i.ekj("slds-is-open",t.dropDownOpen)},inputs:{stickyOnMobile:"stickyOnMobile",dropdowntriggerdisabled:["system-dropdown-trigger","dropdowntriggerdisabled"]}})}return SystemDropdownTriggerDirective})()},99573:(e,t,s)=>{"use strict";s.d(t,{$:()=>l});var i=s(62242),n=s(95681);let l=(()=>{class SystemDropdownTriggerButtonDirective{elementRef;trigger;constructor(e,t){this.elementRef=e,this.trigger=t}ngOnInit(){this.trigger&&(this.trigger.hasTriggerButton=!0,this.trigger.triggerElementButton=this.elementRef)}onClick(e){this.trigger&&this.trigger.toggleDropdown(e)}static ɵfac=function(e){return new(e||SystemDropdownTriggerButtonDirective)(i.Y36(i.SBq),i.Y36(n.l,9))};static ɵdir=i.lG2({type:SystemDropdownTriggerButtonDirective,selectors:[["","system-dropdown-trigger-button",""]],hostBindings:function(e,t){1&e&&i.NdJ("click",(function(e){return t.onClick(e)}))}})}return SystemDropdownTriggerButtonDirective})()},14361:(e,t,s)=>{"use strict";s.d(t,{w:()=>n});var i=s(62242);let n=(()=>{class SystemDropdownTriggerSimpleDirective{renderer;cdRef;elementRef;clickListener;dropdowntriggerdisabled=!1;constructor(e,t,s){this.renderer=e,this.cdRef=t,this.elementRef=s}dropDownOpen=!1;openDropdown(e){this.dropdowntriggerdisabled?(this.dropDownOpen=!1,this.clickListener&&this.clickListener(),this.cdRef.detectChanges()):(this.dropDownOpen=!this.dropDownOpen,this.dropDownOpen?(e.preventDefault(),this.clickListener=this.renderer.listen("document","click",(e=>this.onClick(e)))):this.clickListener())}onClick(e){this.elementRef.nativeElement.contains(e.target)||(this.dropDownOpen=!1,this.cdRef.detectChanges(),this.clickListener())}ngOnDestroy(){this.clickListener&&this.clickListener()}static ɵfac=function(e){return new(e||SystemDropdownTriggerSimpleDirective)(i.Y36(i.Qsj),i.Y36(i.sBO),i.Y36(i.SBq))};static ɵdir=i.lG2({type:SystemDropdownTriggerSimpleDirective,selectors:[["","system-dropdown-trigger-simple",""]],hostVars:2,hostBindings:function(e,t){1&e&&i.NdJ("click",(function(e){return t.openDropdown(e)})),2&e&&i.ekj("slds-is-open",t.dropDownOpen)},inputs:{dropdowntriggerdisabled:["system-dropdown-trigger-simple","dropdowntriggerdisabled"]}})}return SystemDropdownTriggerSimpleDirective})()},69774:(e,t,s)=>{"use strict";s.d(t,{M:()=>o});var i=s(62242),n=s(55329),l=s(13278);let o=(()=>{class SystemDropFile{renderer;elementRef;language;toast;filesDrop=new i.vpe;dropMessage;overlayElement;dragStartListener;dragEnterListener;dragOverListener;dragLeaveListener;dragEndListener;dragDropListener;dragGlobalDropListener;dragDepth=0;constructor(e,t,s,i){this.renderer=e,this.elementRef=t,this.language=s,this.toast=i,this.defineOverlayElement(),this.listenWindowEvents()}ngOnChanges(){this.renderer.setProperty(this.overlayElement,"textContent",this.dropMessage)}ngOnDestroy(){this.removeWindowEventsListeners()}set disabled(e){e?this.removeWindowEventsListeners():this.listenWindowEvents()}removeWindowEventsListeners(){this.dragStartListener&&(this.dragStartListener(),this.dragEnterListener(),this.dragOverListener(),this.dragLeaveListener(),this.dragEndListener(),this.dragDropListener(),this.dragGlobalDropListener())}defineOverlayElement(){this.overlayElement=this.renderer.createElement("div"),this.renderer.setStyle(this.overlayElement,"height","100%"),this.renderer.setStyle(this.overlayElement,"width","100%"),this.renderer.setStyle(this.overlayElement,"top","0"),this.renderer.setStyle(this.overlayElement,"left","0"),this.renderer.setStyle(this.overlayElement,"position","absolute"),this.renderer.setStyle(this.overlayElement,"background","rgba(135,135,135,0.8)"),this.renderer.setStyle(this.overlayElement,"color","#fff"),this.renderer.setStyle(this.overlayElement,"border","dashed 2px #fff"),this.renderer.setProperty(this.overlayElement,"textContent",this.language.getLabel("LBL_DROP_FILES")),this.renderer.addClass(this.overlayElement,"slds-align--absolute-center"),this.renderer.addClass(this.elementRef.nativeElement,"slds-is-relative")}listenWindowEvents(){this.dragStartListener=this.renderer.listen("window","dragstart",(()=>{this.dragDepth=-10})),this.dragEnterListener=this.renderer.listen("window","dragenter",(e=>{this.dragDepth++,1==this.dragDepth&&0==e.dataTransfer.types.indexOf("Files")&&this.renderer.appendChild(this.elementRef.nativeElement,this.overlayElement)})),this.dragOverListener=this.renderer.listen(this.overlayElement,"dragover",(e=>{e.preventDefault(),e.stopPropagation(),e.dataTransfer.dropEffect="copy"})),this.dragLeaveListener=this.renderer.listen("window","dragleave",(()=>{this.dragDepth--,0==this.dragDepth&&this.renderer.removeChild(this.elementRef.nativeElement,this.overlayElement)})),this.dragEndListener=this.renderer.listen("window","dragend",(()=>{this.dragDepth=0,this.renderer.removeChild(this.elementRef.nativeElement,this.overlayElement)})),this.dragDropListener=this.renderer.listen(this.overlayElement,"drop",(e=>{this.dragDepth=0,e.dataTransfer.files.length>0&&this.filesDrop.emit(e.dataTransfer.files),this.renderer.removeChild(this.elementRef.nativeElement,this.overlayElement)})),this.dragGlobalDropListener=this.renderer.listen("window","drop",(e=>{this.dragDepth=0,this.renderer.removeChild(this.elementRef.nativeElement,this.overlayElement)}))}hasOneItemsFile(e){for(let t of e)if("file"==t.kind)return!0;return!1}static ɵfac=function(e){return new(e||SystemDropFile)(i.Y36(i.Qsj),i.Y36(i.SBq),i.Y36(n.d),i.Y36(l.A))};static ɵdir=i.lG2({type:SystemDropFile,selectors:[["","system-drop-file",""]],inputs:{dropMessage:"dropMessage",disabled:"disabled"},outputs:{filesDrop:"system-drop-file"},features:[i.TTD]})}return SystemDropFile})()},23171:(e,t,s)=>{"use strict";s.d(t,{F:()=>o});var i=s(62242),n=s(55329),l=s(13278);let o=(()=>{class SystemDropUrl{renderer;elementRef;language;toast;urlsDrop=new i.vpe;dropMessage;overlayElement;dragStartListener;dragEnterListener;dragOverListener;dragLeaveListener;dragEndListener;dragDropListener;dragGlobalDropListener;dragDepth=0;constructor(e,t,s,i){this.renderer=e,this.elementRef=t,this.language=s,this.toast=i,this.defineOverlayElement(),this.listenWindowEvents()}ngOnChanges(){this.renderer.setProperty(this.overlayElement,"textContent",this.dropMessage)}ngOnDestroy(){this.dragStartListener(),this.dragEnterListener(),this.dragOverListener(),this.dragLeaveListener(),this.dragEndListener(),this.dragDropListener(),this.dragGlobalDropListener()}defineOverlayElement(){this.overlayElement=this.renderer.createElement("div"),this.renderer.setStyle(this.overlayElement,"height","100%"),this.renderer.setStyle(this.overlayElement,"width","100%"),this.renderer.setStyle(this.overlayElement,"top","0"),this.renderer.setStyle(this.overlayElement,"left","0"),this.renderer.setStyle(this.overlayElement,"position","absolute"),this.renderer.setStyle(this.overlayElement,"background","rgba(135,135,135,0.8)"),this.renderer.setStyle(this.overlayElement,"color","#fff"),this.renderer.setStyle(this.overlayElement,"border","dashed 2px #fff"),this.renderer.setProperty(this.overlayElement,"textContent",this.language.getLabel("LBL_DROP_URLS")),this.renderer.addClass(this.overlayElement,"slds-align--absolute-center"),this.renderer.addClass(this.elementRef.nativeElement,"slds-is-relative")}listenWindowEvents(){this.dragStartListener=this.renderer.listen("window","dragstart",(()=>{this.dragDepth=-10})),this.dragEnterListener=this.renderer.listen("window","dragenter",(e=>{this.dragDepth++,1==this.dragDepth&&-1==e.dataTransfer.types.indexOf("Files")&&this.renderer.appendChild(this.elementRef.nativeElement,this.overlayElement)})),this.dragOverListener=this.renderer.listen(this.overlayElement,"dragover",(e=>{e.preventDefault(),e.stopPropagation(),e.dataTransfer.dropEffect="copy"})),this.dragLeaveListener=this.renderer.listen("window","dragleave",(()=>{this.dragDepth--,0==this.dragDepth&&this.renderer.removeChild(this.elementRef.nativeElement,this.overlayElement)})),this.dragEndListener=this.renderer.listen("window","dragend",(()=>{this.dragDepth=0,this.renderer.removeChild(this.elementRef.nativeElement,this.overlayElement)})),this.dragDropListener=this.renderer.listen(this.overlayElement,"drop",(e=>{this.dragDepth=0,e.dataTransfer.items.length>0?this.urlsDrop.emit(e.dataTransfer):this.toast.sendToast("LBL_ERROR","error"),this.renderer.removeChild(this.elementRef.nativeElement,this.overlayElement)})),this.dragGlobalDropListener=this.renderer.listen("window","drop",(e=>{this.dragDepth=0,this.renderer.removeChild(this.elementRef.nativeElement,this.overlayElement)}))}hasOneItemsUrls(e){for(let t of e)if("string"==t.kind)return!0;return!1}static ɵfac=function(e){return new(e||SystemDropUrl)(i.Y36(i.Qsj),i.Y36(i.SBq),i.Y36(n.d),i.Y36(l.A))};static ɵdir=i.lG2({type:SystemDropUrl,selectors:[["","system-drop-url",""]],inputs:{dropMessage:"dropMessage"},outputs:{urlsDrop:"system-drop-url"},features:[i.TTD]})}return SystemDropUrl})()},31790:(e,t,s)=>{"use strict";s.d(t,{g:()=>u});var i=s(62242),n=s(55710),l=s(4154),o=s(83917),a=s(44044),d=s(17017),r=s(32294),c=s(83348);let u=(()=>{class SystemModelPopOverDirective{metadata;footer;modal;model;navigationtab;popovermodel;elementRef;view;router;injector;module;id;enablelink=!0;modelPopOver=!0;clicked=new i.vpe;popoverCmp=null;showPopoverTimeout={};popoverModelInitialized=!1;constructor(e,t,s,i,n,l,o,a,d,r){this.metadata=e,this.footer=t,this.modal=s,this.model=i,this.navigationtab=n,this.popovermodel=l,this.elementRef=o,this.view=a,this.router=d,this.injector=r}onMouseOver(){!1!==this.modelPopOver&&(this.showPopoverTimeout=window.setTimeout((()=>this.renderPopover()),1e3))}onMouseOut(){this.showPopoverTimeout&&window.clearTimeout(this.showPopoverTimeout),this.popoverCmp&&this.popoverCmp.closePopover()}goRelated(){if(!1===this.modelPopOver||this.disableLink)return!1;if(this.popoverCmp&&this.popoverCmp.closePopover(),this.showPopoverTimeout&&window.clearTimeout(this.showPopoverTimeout),this.model&&(!this.id||this.id&&this.module&&this.model.id==this.id&&this.model.module==this.module))this.model.goDetail(this.navigationtab?.tabid);else if(this.popoverModelInitialized)this.popovermodel.goDetail(this.navigationtab?.tabid);else if(!this.popovermodel.isLoading){let e=this.modal.await("LBL_LOADING");this.popovermodel.getData(!0).subscribe({next:t=>{this.popovermodel.goDetail(this.navigationtab?.tabid),e.emit(!0)},error:()=>{e.emit(!0)}})}this.clicked.emit(!0)}get disableLink(){return this.view&&!1===this.view.displayLinks||!1===this.enablelink}renderPopover(){this.footer.footercontainer&&(this.popoverModelInitialized||(!this.model||this.model&&this.id&&(this.model.module!=this.module||this.model.id!=this.id)?this.popovermodel.getData().subscribe((()=>{this.popoverModelInitialized=!0})):(this.popovermodel.module=this.model.module,this.popovermodel.id=this.model.id,this.popovermodel.initialize(),this.popovermodel.setData(this.model.data,!1),this.popoverModelInitialized=!0)),this.metadata.addComponent("ObjectModelPopover",this.footer.footercontainer,this.injector).subscribe((e=>{e.instance.parentElementRef=this.elementRef,this.popoverCmp=e.instance})))}ngOnChanges(){this.id&&this.module&&this.id!=this.popovermodel.id&&this.module!=this.popovermodel.module&&(this.popoverModelInitialized=!1,this.popovermodel.initialize(),this.popovermodel.id=this.id,this.popovermodel.module=this.module)}ngOnDestroy(){this.showPopoverTimeout&&window.clearTimeout(this.showPopoverTimeout),this.popoverCmp&&this.popoverCmp.closePopover(!0)}static ɵfac=function(e){return new(e||SystemModelPopOverDirective)(i.Y36(l.Pu),i.Y36(o.M),i.Y36(a.o),i.Y36(n.o,12),i.Y36(d.d,8),i.Y36(n.o),i.Y36(i.SBq),i.Y36(r.e,8),i.Y36(c.F0),i.Y36(i.zs3))};static ɵdir=i.lG2({type:SystemModelPopOverDirective,selectors:[["","system-model-popover",""]],hostVars:2,hostBindings:function(e,t){1&e&&i.NdJ("mouseenter",(function(){return t.onMouseOver()}))("mouseleave",(function(){return t.onMouseOut()}))("click",(function(){return t.goRelated()})),2&e&&i.ekj("slds-text-link_faux",!t.disableLink)},inputs:{module:"module",id:"id",enablelink:"enablelink",modelPopOver:["system-model-popover","modelPopOver"]},outputs:{clicked:"clicked"},features:[i._Bn([n.o]),i.TTD]})}return SystemModelPopOverDirective})()},7763:(e,t,s)=>{"use strict";s.d(t,{u:()=>o});var i=s(62242),n=s(55710),l=s(50727);let o=(()=>{class SystemModelProviderDirective{model;data$=new i.vpe;subscription=new l.w0;constructor(e){this.model=e,this.model.isLoading=!0,this.subscription.add(this.model.data$.subscribe((e=>this.data$.next(e))))}set provided_model(e){e.module&&(this.model.module=e.module,this.model.id=e.id,!e.id&&e.data&&(this.model.id=e.data.id),e.data?(this.model.initialize(),this.model.setData(!0===e.clone?{...e.data}:e.data),this.model.isLoading=!1):this.model.id?this.model.getData():(this.model.initialize(),this.model.isLoading=!1))}ngOnDestroy(){this.subscription.unsubscribe()}static ɵfac=function(e){return new(e||SystemModelProviderDirective)(i.Y36(n.o))};static ɵdir=i.lG2({type:SystemModelProviderDirective,selectors:[["","system-model-provider",""]],inputs:{provided_model:["system-model-provider","provided_model"]},outputs:{data$:"data$"},exportAs:["system-model-provider"],features:[i._Bn([n.o])]})}return SystemModelProviderDirective})()},91061:(e,t,s)=>{"use strict";s.d(t,{Q:()=>n});var i=s(62242);let n=(()=>{class SystemMultiSelectCheckboxesDirective{elementRef;lastChecked;constructor(e){this.elementRef=e}onClick(e){let t=null;if(e.target.parentElement.classList?.contains("slds-checkbox__label")?t=e.target.parentElement:e.target.parentElement.parentElement?.classList?.contains("slds-checkbox__label")?t=e.target.parentElement.parentElement:e.target.classList.contains("slds-checkbox__label")&&(t=e.target),t){if(document.getSelection().removeAllRanges(),!this.lastChecked)return void(this.lastChecked=t);if(e.shiftKey){let s=this.getAllLabels(),i=s.indexOf(t),n=s.indexOf(this.lastChecked),l=Math.min(i,n),o=Math.max(i,n),a=this.lastChecked.parentElement.getElementsByTagName("input")[0].checked;for(let e=l;e<=o;e++)s[e].parentElement.getElementsByTagName("input")[0].checked=a,s[e].parentElement.getElementsByTagName("input")[0].dispatchEvent(new Event("change"));e.preventDefault()}this.lastChecked=t}}getAllLabels(){let e=[],t=this.elementRef.nativeElement.getElementsByTagName("label");for(let s of t)s.classList.contains("slds-checkbox__label")&&e.push(s);return e}static ɵfac=function(e){return new(e||SystemMultiSelectCheckboxesDirective)(i.Y36(i.SBq))};static ɵdir=i.lG2({type:SystemMultiSelectCheckboxesDirective,selectors:[["","system-multi-select-checkboxes",""]],hostBindings:function(e,t){1&e&&i.NdJ("click",(function(e){return t.onClick(e)}))}})}return SystemMultiSelectCheckboxesDirective})()},54021:(e,t,s)=>{"use strict";s.d(t,{_:()=>l});var i=s(62242),n=s(94664);let l=(()=>{class SystemOverlayLoadingSpinnerDirective{renderer;appRef;elementRef;onCancel=new i.vpe;spinnerRef;spinnerContainer=document.createElement("div");cancellable=!1;constructor(e,t,s){this.renderer=e,this.appRef=t,this.elementRef=s}set isLoadingChange(e){e?this.renderSpinner():this.destroySpinner()}set cancellableChange(e){this.cancellable=e,this.spinnerRef&&(this.spinnerRef.instance.cancellable=e)}destroySpinner(){this.spinnerRef&&(this.spinnerRef.instance.onCancel$.unsubscribe(),this.spinnerRef.destroy(),this.spinnerRef=void 0,this.renderer.removeChild(this.elementRef.nativeElement,this.spinnerContainer))}renderSpinner(){this.spinnerRef||(this.renderer.appendChild(this.elementRef.nativeElement,this.spinnerContainer),this.spinnerRef=(0,i.LMc)(n.W,{environmentInjector:this.appRef.injector,hostElement:this.spinnerContainer}),this.spinnerRef.instance.asOverlay=!0,this.spinnerRef.instance.cancellable=this.cancellable,this.spinnerRef.instance.onCancel$.subscribe((()=>this.onCancel.emit())),this.appRef.attachView(this.spinnerRef.hostView),this.spinnerRef.changeDetectorRef.detectChanges())}static ɵfac=function(e){return new(e||SystemOverlayLoadingSpinnerDirective)(i.Y36(i.Qsj),i.Y36(i.z2F),i.Y36(i.SBq))};static ɵdir=i.lG2({type:SystemOverlayLoadingSpinnerDirective,selectors:[["","system-overlay-loading-spinner",""]],hostAttrs:[1,"slds-is-relative"],inputs:{isLoadingChange:["system-overlay-loading-spinner","isLoadingChange"],cancellableChange:["cancellable","cancellableChange"]},outputs:{onCancel:"onCancel"}})}return SystemOverlayLoadingSpinnerDirective})()},83398:(e,t,s)=>{"use strict";s.d(t,{A:()=>o});var i=s(50727),n=s(62242),l=s(55329);let o=(()=>{class SystemPlaceholderDirective{language;elementRef;label;subscription=new i.w0;constructor(e,t){this.language=e,this.elementRef=t,this.subscribeToCurrentLanguageChange()}ngOnDestroy(){this.subscription.unsubscribe()}ngOnChanges(e){e.label.previousValue!==e.label.currentValue&&e.label.currentValue&&this.setElementTitleAttribute()}subscribeToCurrentLanguageChange(){this.subscription=this.language.currentlanguage$.subscribe((()=>this.setElementTitleAttribute()))}setElementTitleAttribute(){this.label?this.elementRef.nativeElement.setAttribute("placeholder",this.language.getLabel(this.label)):this.elementRef.nativeElement.setAttribute("placeholder","")}static ɵfac=function(e){return new(e||SystemPlaceholderDirective)(n.Y36(l.d),n.Y36(n.SBq))};static ɵdir=n.lG2({type:SystemPlaceholderDirective,selectors:[["","system-placeholder",""]],inputs:{label:["system-placeholder","label"]},features:[n.TTD]})}return SystemPlaceholderDirective})()},23548:(e,t,s)=>{"use strict";s.d(t,{K:()=>o});var i=s(62242),n=s(4154),l=s(83917);let o=(()=>{class SystemPopOverDirective{metadata;footer;elementRef;popoverCmp=null;showPopoverTimeout={};_popoverSettings={injector:{},componentset:{},component:""};set popoverSettings(e){this._popoverSettings.injector=e.injector,this._popoverSettings.componentset=e.componentset,this._popoverSettings.component=e.component}constructor(e,t,s){this.metadata=e,this.footer=t,this.elementRef=s}onMouseOver(){this.showPopoverTimeout=window.setTimeout((()=>this.renderPopover()),500)}onMouseOut(){this.showPopoverTimeout&&window.clearTimeout(this.showPopoverTimeout),this.popoverCmp&&this.popoverCmp.closePopover()}renderPopover(){this.metadata.addComponent("SystemPopover",this.footer.footercontainer,this._popoverSettings.injector).subscribe((e=>{e.instance.parentElementRef=this.elementRef,e.instance.componentset=this._popoverSettings.componentset,this.popoverCmp=e.instance}))}ngOnDestroy(){this.popoverCmp&&this.popoverCmp.closePopover(!0)}static ɵfac=function(e){return new(e||SystemPopOverDirective)(i.Y36(n.Pu),i.Y36(l.M),i.Y36(i.SBq))};static ɵdir=i.lG2({type:SystemPopOverDirective,selectors:[["","system-pop-over",""]],hostBindings:function(e,t){1&e&&i.NdJ("mouseenter",(function(){return t.onMouseOver()}))("mouseleave",(function(){return t.onMouseOut()}))},inputs:{popoverSettings:["system-pop-over","popoverSettings"]}})}return SystemPopOverDirective})()},37982:(e,t,s)=>{"use strict";s.d(t,{h:()=>n});var i=s(62242);let n=(()=>{class SystemResizeDirective{elementRef;renderer;resizeid;resizeemitter=new i.vpe;elementWidth;elementHeight;mouseListener;constructor(e,t){this.elementRef=e,this.renderer=t}ngOnDestroy(){this.mouseListener&&this.mouseListener()}onMouseDown(e){let t=this.elementRef.nativeElement.getClientRects()[0];this.elementWidth=t.width,this.elementHeight=t.height,this.mouseListener=this.renderer.listen("document","mouseup",(e=>{this.onMouseup()}))}onMouseup(){if(!this.elementWidth||!this.elementWidth)return;let e=this.elementRef.nativeElement.getClientRects()[0];(this.elementWidth&&e.width!=this.elementWidth||this.elementHeight&&e.height!=this.elementHeight)&&this.resizeemitter.emit({width:e.width,height:e.height,id:this.resizeid}),this.elementWidth=void 0,this.elementHeight=void 0,this.mouseListener(),this.mouseListener=void 0}getElementWidth(){return this.elementRef.nativeElement.getClientRects()[0].width}static ɵfac=function(e){return new(e||SystemResizeDirective)(i.Y36(i.SBq),i.Y36(i.Qsj))};static ɵdir=i.lG2({type:SystemResizeDirective,selectors:[["","system-resize",""]],hostBindings:function(e,t){1&e&&i.NdJ("mousedown",(function(e){return t.onMouseDown(e)}))},inputs:{resizeid:"resizeid"},outputs:{resizeemitter:"system-resize"}})}return SystemResizeDirective})()},50151:(e,t,s)=>{"use strict";s.d(t,{S:()=>o});var i=s(50727),n=s(62242),l=s(55329);let o=(()=>{class SystemTitleDirective{language;elementRef;label;subscription=new i.w0;constructor(e,t){this.language=e,this.elementRef=t,this.subscribeToCurrentLanguageChange()}ngOnDestroy(){this.subscription.unsubscribe()}ngOnChanges(e){e.label.previousValue!==e.label.currentValue&&e.label.currentValue&&this.setElementTitleAttribute()}subscribeToCurrentLanguageChange(){this.subscription=this.language.currentlanguage$.subscribe((()=>this.setElementTitleAttribute()))}setElementTitleAttribute(){this.elementRef.nativeElement.setAttribute("title",this.language.getLabel(this.label))}static ɵfac=function(e){return new(e||SystemTitleDirective)(n.Y36(l.d),n.Y36(n.SBq))};static ɵdir=n.lG2({type:SystemTitleDirective,selectors:[["","system-title",""]],inputs:{label:["system-title","label"]},features:[n.TTD]})}return SystemTitleDirective})()},31058:(e,t,s)=>{"use strict";s.d(t,{H:()=>l});var i=s(62242),n=s(83917);let l=(()=>{class SystemToBottomDirective{element;renderer;footer;more=new i.vpe;marginBottom=0;constructor(e,t,s){this.element=e,this.renderer=t,this.footer=s}elementClass=!0;ngDoCheck(){let e=this.element.nativeElement.getBoundingClientRect(),t=Math.floor(window.innerHeight-e.top-this.marginBottom-parseInt(getComputedStyle(this.element.nativeElement).marginBottom,10)-parseInt(getComputedStyle(this.element.nativeElement).paddingBottom,10)-this.footer.visibleFooterHeight);this.renderer.setStyle(this.element.nativeElement,"height",t+"px")}onScroll(e){let t=this.element.nativeElement;t.scrollTop+t.clientHeight+50>t.scrollHeight&&this.more.emit(!0)}static ɵfac=function(e){return new(e||SystemToBottomDirective)(i.Y36(i.SBq),i.Y36(i.Qsj),i.Y36(n.M))};static ɵdir=i.lG2({type:SystemToBottomDirective,selectors:[["","system-to-bottom",""]],hostVars:2,hostBindings:function(e,t){1&e&&i.NdJ("scroll",(function(e){return t.onScroll(e)})),2&e&&i.ekj("slds-scrollable--y",t.elementClass)},inputs:{marginBottom:"marginBottom"},outputs:{more:"system-to-bottom"}})}return SystemToBottomDirective})()},73194:(e,t,s)=>{"use strict";s.d(t,{t:()=>l});var i=s(62242),n=s(83917);let l=(()=>{class SystemToBottomNoScrollDirective{element;renderer;footer;toBottomNoScroll=!0;marginBottom=0;constructor(e,t,s){this.element=e,this.renderer=t,this.footer=s}ngDoCheck(){if(!1===this.toBottomNoScroll)return;let e=this.element.nativeElement.getBoundingClientRect(),t=Math.floor(window.innerHeight-e.top-this.marginBottom-parseInt(getComputedStyle(this.element.nativeElement).marginBottom,10)-parseInt(getComputedStyle(this.element.nativeElement).paddingBottom,10)-this.footer.visibleFooterHeight);this.renderer.setStyle(this.element.nativeElement,"height",t+"px")}static ɵfac=function(e){return new(e||SystemToBottomNoScrollDirective)(i.Y36(i.SBq),i.Y36(i.Qsj),i.Y36(n.M))};static ɵdir=i.lG2({type:SystemToBottomNoScrollDirective,selectors:[["","system-to-bottom-noscroll",""]],inputs:{toBottomNoScroll:["system-to-bottom-noscroll","toBottomNoScroll"],marginBottom:"marginBottom"}})}return SystemToBottomNoScrollDirective})()},98280:(e,t,s)=>{"use strict";s.d(t,{t:()=>n});var i=s(62242);let n=(()=>{class SystemTrimInputDirective{trim;getCaret(e){return{start:e.selectionStart,end:e.selectionEnd}}setCaret(e,t,s){e.selectionStart=t,e.selectionEnd=s,e.focus()}dispatchEvent(e,t){const s=document.createEvent("Event");s.initEvent(t,!1,!1),e.dispatchEvent(s)}trimValue(e,t){e.value=t.trim(),this.dispatchEvent(e,"input")}onBlur(e,t){!1===this.trim||this.trim&&"blur"!==this.trim||"function"!=typeof t.trim||t.trim()===t||(this.trimValue(e,t),this.dispatchEvent(e,"blur"))}onInput(e,t){if(!1!==this.trim&&!this.trim&&"function"==typeof t.trim&&t.trim()!==t){let{start:s,end:i}=this.getCaret(e);" "===t[0]&&1===s&&1===i&&(s=0,i=0),this.trimValue(e,t),this.setCaret(e,s,i)}}static ɵfac=function(e){return new(e||SystemTrimInputDirective)};static ɵdir=i.lG2({type:SystemTrimInputDirective,selectors:[["input","system-trim-input",""],["textarea","system-trim-input",""]],hostBindings:function(e,t){1&e&&i.NdJ("blur",(function(e){return t.onBlur(e.target,e.target.value)}))("input",(function(e){return t.onInput(e.target,e.target.value)}))},inputs:{trim:["system-trim-input","trim"]}})}return SystemTrimInputDirective})()},23814:(e,t,s)=>{"use strict";s.d(t,{V:()=>l});var i=s(32294),n=s(62242);let l=(()=>{class SystemViewProviderDirective{renderer;elementRef;view;resizeHandler;constructor(e,t,s){this.renderer=e,this.elementRef=t,this.view=s}set viewSettings(e){e.editable&&(this.view.isEditable=!0),!1===e.displayLabels&&(this.view.displayLabels=!1),!1===e.displayLinks&&(this.view.displayLinks=!1)}ngAfterViewInit(){this.setviewSize(),this.resizeHandler=this.renderer.listen("window","resize",(()=>this.setviewSize()))}ngOnDestroy(){this.resizeHandler&&this.resizeHandler()}setviewSize(){this.elementRef.nativeElement.getBoundingClientRect().width<500?this.view.size="small":this.view.size="regular"}static ɵfac=function(e){return new(e||SystemViewProviderDirective)(n.Y36(n.Qsj),n.Y36(n.SBq),n.Y36(i.e))};static ɵdir=n.lG2({type:SystemViewProviderDirective,selectors:[["","system-view-provider",""]],inputs:{viewSettings:["system-view-provider","viewSettings"]},exportAs:["system-view-provider"],features:[n._Bn([i.e])]})}return SystemViewProviderDirective})()},70909:(e,t,s)=>{"use strict";s.d(t,{Q:()=>u});var i=s(62242),n=s(4154),l=s(44044),o=s(55329),a=s(62422),d=s(83348),r=s(44755);function c(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"span",14)(1,"span",15),i.NdJ("click",(function(){i.CHM(e);const t=i.oxw();return i.KtG(t.navigateHome())})),i._uU(2),i.qZA()()}if(2&e){const e=i.oxw();i.xp6(2),i.Oqu(e.roleName)}}let u=(()=>{class GlobalAppLauncher{metadata;modal;language;userPreferences;router;quickLaunch(e){this.showAppLauncher()}constructor(e,t,s,i,n){this.metadata=e,this.modal=t,this.language=s,this.userPreferences=i,this.router=n}get roleName(){let e=this.metadata.getActiveRole();return e.label&&""!=e.label?this.language.getLabel(e.label):this.metadata.getActiveRole().name}showAppLauncher(){this.modal.openModal("GlobalAppLauncherDialog")}navigateHome(){this.router.navigate(["module/Home"])}static ɵfac=function(e){return new(e||GlobalAppLauncher)(i.Y36(n.Pu),i.Y36(l.o),i.Y36(o.d),i.Y36(a.z),i.Y36(d.F0))};static ɵcmp=i.Xpm({type:GlobalAppLauncher,selectors:[["global-app-launcher"]],hostAttrs:[1,"slds-context-bar__primary","slds-context-bar__item--divider-right"],hostBindings:function(e,t){1&e&&i.NdJ("keydown.control.space",(function(){return t.quickLaunch()}),!1,i.evT)},decls:14,vars:1,consts:[[1,"slds-context-bar__item","slds-context-bar__dropdown-trigger","slds-dropdown-trigger","slds-dropdown-trigger--click","slds-no-hover"],[1,"slds-context-bar__icon-action","slds-m-top_small",3,"click"],["href","javascript:void(0);",1,"slds-icon-waffle_container","slds-context-bar__button"],[1,"slds-icon-waffle"],[1,"slds-r1"],[1,"slds-r2"],[1,"slds-r3"],[1,"slds-r4"],[1,"slds-r5"],[1,"slds-r6"],[1,"slds-r7"],[1,"slds-r8"],[1,"slds-r9"],["class","slds-context-bar__label-action slds-context-bar__app-name",4,"ngIf"],[1,"slds-context-bar__label-action","slds-context-bar__app-name"],[1,"slds-truncate","slds-text-link--reset",3,"click"]],template:function(e,t){1&e&&(i.TgZ(0,"div",0)(1,"div",1),i.NdJ("click",(function(){return t.showAppLauncher()})),i.TgZ(2,"a",2)(3,"div",3),i._UZ(4,"div",4)(5,"div",5)(6,"div",6)(7,"div",7)(8,"div",8)(9,"div",9)(10,"div",10)(11,"div",11)(12,"div",12),i.qZA()()(),i.YNc(13,c,3,1,"span",13),i.qZA()),2&e&&(i.xp6(13),i.Q6J("ngIf",!t.userPreferences.toUse.globalHeaderCollapsed))},dependencies:[r.O5],encapsulation:2})}return GlobalAppLauncher})()},91977:(e,t,s)=>{"use strict";s.d(t,{M:()=>l});var i=s(53629),n=s(62242);let l=(()=>{class GlobalCopyright{buildNumber="";copyright="";constructor(){this.buildNumber=i.N.buildNumber,this.copyright=i.N.copyright}static ɵfac=function(e){return new(e||GlobalCopyright)};static ɵcmp=n.Xpm({type:GlobalCopyright,selectors:[["global-copyright"]],decls:9,vars:2,consts:[[1,"slds-align_absolute-center"],["href","https://www.spicecrm.com","target","”_blank”"]],template:function(e,t){1&e&&(n.TgZ(0,"div")(1,"div",0),n._uU(2,"SpiceCRM - "),n.TgZ(3,"a",1),n._uU(4,"www.spicecrm.com"),n.qZA()(),n.TgZ(5,"div",0),n._uU(6),n.qZA(),n.TgZ(7,"div",0),n._uU(8),n.qZA()()),2&e&&(n.xp6(6),n.Oqu(t.copyright),n.xp6(2),n.hij("version ",t.buildNumber,""))},encapsulation:2})}return GlobalCopyright})()},74553:(e,t,s)=>{"use strict";s.d(t,{U:()=>v});var i=s(62242),n=s(55710),l=s(32294),o=s(4154),a=s(80788),d=s(55329),r=s(44044),c=s(44755),u=s(72656),m=s(44561),g=s(2294),h=s(43428);const p=["containercontent"];function f(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"button",9),i.NdJ("click",(function(){i.CHM(e);const t=i.oxw();return i.KtG(t.expand())})),i._UZ(1,"system-button-icon",10),i.qZA()}2&e&&(i.xp6(1),i.Q6J("icon","expand_alt"))}const b=function(e,t){return{"slds-is-closed":e,"slds-is-open":t}};let v=(()=>{class GlobalDockedComposer{metadata;dockedComposer;language;model;view;modal;ViewContainerRef;containercontent;composerdata={};composerindex;isClosed=!1;actionset;constructor(e,t,s,i,n,l,o){this.metadata=e,this.dockedComposer=t,this.language=s,this.model=i,this.view=n,this.modal=l,this.ViewContainerRef=o,this.view.isEditable=!0,this.view.setEditMode(),this.model.isEditing=!0,this.model.isGlobal=!0}ngOnInit(){this.model.module=this.composerdata.module,this.model.id=this.composerdata.id,this.composerdata.model.data?this.model.setData(this.composerdata.model.data,!1):this.model.initializeModel(),this.dockedComposer.composers[this.composerindex].model=this.model;let e=this.metadata.getComponentConfig("GlobalDockedComposer",this.model.module);if(e.componentset){let t=this.metadata.getComponentSetObjects(e.componentset);for(let e of t)this.metadata.addComponent("ObjectRecordFieldset",this.containercontent).subscribe((t=>{t.instance.componentconfig=e.componentconfig}))}else e.fieldset&&this.metadata.addComponent("ObjectRecordFieldset",this.containercontent).subscribe((t=>{t.instance.direction="vertical",t.instance.fieldset=e.fieldset}));this.actionset=e.actionset,this.composerdata.loadexpanded&&this.canExpand&&(this.expand(),this.composerdata.loadexpanded=!1)}get displayLabel(){return this.model.getField("name")?this.model.getField("name"):this.language.getModuleName(this.model.module,!0)}toggleClosed(){this.isClosed=!this.isClosed}get toggleIcon(){return this.isClosed?"erect_window":"minimize_window"}get canExpand(){return!_.isEmpty(this.metadata.getComponentConfig("GlobalDockedComposerModal",this.model.module))}expand(){this.modal.openModal("GlobalDockedComposerModal",!0,this.ViewContainerRef.injector)}handleaction(e){if("savegodetail"===e)this.model.goDetail(),this.closeComposer();else this.closeComposer()}promptClose(){this.modal.prompt("confirm",this.language.getLabel("MSG_CANCEL","","long"),this.language.getLabel("MSG_CANCEL")).subscribe((e=>{e&&this.closeComposer()}))}closeComposer(){for(let e=0;e<this.dockedComposer.composers.length;e++)this.dockedComposer.composers[e].id===this.composerdata.id&&this.dockedComposer.composers.splice(e,1)}static ɵfac=function(e){return new(e||GlobalDockedComposer)(i.Y36(o.Pu),i.Y36(a.m),i.Y36(d.d),i.Y36(n.o),i.Y36(l.e),i.Y36(r.o),i.Y36(i.s_b))};static ɵcmp=i.Xpm({type:GlobalDockedComposer,selectors:[["global-docked-composer"]],viewQuery:function(e,t){if(1&e&&i.Gf(p,7,i.s_b),2&e){let e;i.iGM(e=i.CRH())&&(t.containercontent=e.first)}},inputs:{composerdata:"composerdata",composerindex:"composerindex"},features:[i._Bn([n.o,l.e])],decls:23,vars:11,consts:[["role","dialog",1,"slds-docked-composer","slds-grid","slds-grid_vertical","slds-m-horizontal--x-small",2,"transition",".5s",3,"ngClass"],["aria-live","assertive",1,"slds-docked-composer__header","slds-grid","slds-shrink-none"],[1,"slds-media","slds-media_center","slds-no-space"],[1,"slds-media__figure","slds-m-right_x-small"],[1,"slds-icon_container"],[3,"module","size"],[1,"slds-media__body"],[1,"slds-truncate"],[1,"slds-col_bump-left","slds-shrink-none"],[1,"slds-button","slds-button_icon","slds-button_icon",3,"click"],[3,"icon"],["class","slds-button slds-button_icon slds-button_icon",3,"click",4,"ngIf"],[1,"slds-docked-composer__body","slds-theme--default","slds-scrollable",2,"height","380px"],["containercontent",""],[1,"slds-docked-composer__footer","slds-shrink-none","slds-grid","slds-grid--vertical-align-center","slds-grid--align-spread"],[1,"slds-col"],[1,"slds-col_bump-left"],[3,"actionset","actionemitter"]],template:function(e,t){1&e&&(i.TgZ(0,"section",0)(1,"header",1)(2,"div",2)(3,"div",3)(4,"span",4),i._UZ(5,"system-icon",5),i.qZA()(),i.TgZ(6,"div",6)(7,"div",7),i._uU(8),i.qZA()()(),i.TgZ(9,"div",8)(10,"button",9),i.NdJ("click",(function(){return t.toggleClosed()})),i._UZ(11,"system-button-icon",10),i.qZA(),i.YNc(12,f,2,1,"button",11),i.TgZ(13,"button",9),i.NdJ("click",(function(){return t.promptClose()})),i._UZ(14,"system-button-icon",10),i.qZA()()(),i.TgZ(15,"div",12),i._UZ(16,"div",null,13),i.qZA(),i.TgZ(18,"footer",14)(19,"div",15),i._UZ(20,"global-docked-composer-messages-badge"),i.qZA(),i.TgZ(21,"div",16)(22,"object-action-container",17),i.NdJ("actionemitter",(function(e){return t.handleaction(e)})),i.qZA()()()()),2&e&&(i.Q6J("ngClass",i.WLB(8,b,t.isClosed,!t.isClosed)),i.xp6(5),i.Q6J("module",t.model.module)("size","small"),i.xp6(3),i.Oqu(t.displayLabel),i.xp6(3),i.Q6J("icon",t.toggleIcon),i.xp6(1),i.Q6J("ngIf",t.canExpand),i.xp6(2),i.Q6J("icon","close"),i.xp6(8),i.Q6J("actionset",t.actionset))},dependencies:[c.mk,c.O5,u.J,m.f,g.S,h.U],encapsulation:2})}return GlobalDockedComposer})()},27877:(e,t,s)=>{"use strict";s.d(t,{y:()=>h});var i=s(62242),n=s(80788),l=s(92251),o=s(44755),a=s(82995),d=s(74553),r=s(44028);function c(e,t){1&e&&i._UZ(0,"global-docked-composer-overflow")}function u(e,t){if(1&e&&i._UZ(0,"global-docked-composer",3),2&e){const e=t.$implicit,s=t.index,n=i.oxw();i.Q6J("composerindex",s)("composerdata",e)("ngStyle",n.getComposerStyle(s))}}const m=function(e){return{calldata:e}};function g(e,t){if(1&e&&(i.ynx(0),i._UZ(1,"system-dynamic-component",4),i.BQk()),2&e){const e=t.$implicit;i.xp6(1),i.Q6J("componentattributes",i.VKq(1,m,e))}}let h=(()=>{class GlobalDockedComposerContainer{dockedComposer;telephony;constructor(e,t){this.dockedComposer=e,this.telephony=t}get isVisible(){return this.dockedComposer.composers.length>0||this.telephony.calls.length>0}getComposerStyle(e){if(e>=this.dockedComposer.maxComposers-this.telephony.calls.length)return{display:"none"}}get displayOverflow(){return this.dockedComposer.composers.length+this.telephony.calls.length>this.dockedComposer.maxComposers}static ɵfac=function(e){return new(e||GlobalDockedComposerContainer)(i.Y36(n.m),i.Y36(l.n))};static ɵcmp=i.Xpm({type:GlobalDockedComposerContainer,selectors:[["global-docked-composer-container"]],hostAttrs:[2,"z-index","9999"],hostVars:2,hostBindings:function(e,t){2&e&&i.ekj("slds-docked_container",t.isVisible)},decls:3,vars:3,consts:[[4,"ngIf"],[3,"composerindex","composerdata","ngStyle",4,"ngFor","ngForOf"],[4,"ngFor","ngForOf"],[3,"composerindex","composerdata","ngStyle"],["component","TelephonyDockedCall",3,"componentattributes"]],template:function(e,t){1&e&&(i.YNc(0,c,1,0,"global-docked-composer-overflow",0),i.YNc(1,u,1,3,"global-docked-composer",1),i.YNc(2,g,2,3,"ng-container",2)),2&e&&(i.Q6J("ngIf",t.displayOverflow),i.xp6(1),i.Q6J("ngForOf",t.dockedComposer.composers),i.xp6(1),i.Q6J("ngForOf",t.telephony.calls))},dependencies:[o.sg,o.O5,o.PC,a.T,d.U,r.G],encapsulation:2})}return GlobalDockedComposerContainer})()},43428:(e,t,s)=>{"use strict";s.d(t,{U:()=>h});var i=s(62242),n=s(55710),l=s(55329),o=s(44755),a=s(72656),d=s(83463),r=s(7674),c=s(78859);function u(e,t){if(1&e&&(i.TgZ(0,"tr",16)(1,"td",17)(2,"div",18),i._UZ(3,"system-utility-icon",19),i.qZA()(),i.TgZ(4,"td",20)(5,"div",18),i._UZ(6,"system-label-fieldname",21),i.qZA()(),i.TgZ(7,"td",22)(8,"div",18),i._uU(9),i.qZA()()()),2&e){const e=t.$implicit,s=i.oxw(3);i.xp6(3),i.Q6J("icon",e.type),i.xp6(3),i.Q6J("module",s.model.module)("field",e.reference),i.xp6(3),i.Oqu(e.message)}}function m(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"section",4)(1,"button",5),i.NdJ("click",(function(){i.CHM(e);const t=i.oxw(2);return i.KtG(t.showpopover=!1)})),i._UZ(2,"system-button-icon",6),i.qZA(),i.TgZ(3,"header",7)(4,"div",8),i._UZ(5,"system-utility-icon",9),i.TgZ(6,"div",10)(7,"h2",11),i._UZ(8,"system-label",12),i.qZA()()()(),i.TgZ(9,"div",13)(10,"table",14)(11,"tbody"),i.YNc(12,u,10,4,"tr",15),i.qZA()()()()}if(2&e){const e=i.oxw(2);i.Q6J("ngClass",e.nubbinClass)("ngStyle",e.popoverStyle),i.xp6(2),i.Q6J("inverse",!0),i.xp6(10),i.Q6J("ngForOf",e.messages)}}function g(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"div",1)(1,"span",2),i.NdJ("click",(function(){i.CHM(e);const t=i.oxw();return i.KtG(t.showpopover=!t.showpopover)})),i._uU(2),i.qZA(),i.YNc(3,m,13,4,"section",3),i.qZA()}if(2&e){const e=i.oxw();i.xp6(2),i.Oqu(e.messagecount),i.xp6(1),i.Q6J("ngIf",e.showpopover)}}let h=(()=>{class GlobalDockedComposerMessagesBadge{model;language;showpopover=!1;side="left";constructor(e,t){this.model=e,this.language=t}get messagecount(){return this.model.getMessages().length}get messages(){return this.model.getMessages()}get nubbinClass(){return"right"==this.side?"slds-nubbin_bottom-right":"slds-nubbin_bottom-left"}get popoverStyle(){return"right"==this.side?{bottom:"37px",right:"-10px"}:{bottom:"37px",left:"-10px"}}static ɵfac=function(e){return new(e||GlobalDockedComposerMessagesBadge)(i.Y36(n.o),i.Y36(l.d))};static ɵcmp=i.Xpm({type:GlobalDockedComposerMessagesBadge,selectors:[["global-docked-composer-messages-badge"]],inputs:{side:"side"},decls:1,vars:1,consts:[["class","slds-is-relative",4,"ngIf"],[1,"slds-is-relative"],[1,"slds-badge","slds-theme_warning","slds-m-horizontal--xx-small",3,"click"],["aria-label","Model Errors","class","slds-popover slds-popover_error slds-nubbin_bottom-left slds-is-absolute","role","dialog",3,"ngClass","ngStyle",4,"ngIf"],["aria-label","Model Errors","role","dialog",1,"slds-popover","slds-popover_error","slds-nubbin_bottom-left","slds-is-absolute",3,"ngClass","ngStyle"],["title","Close dialog",1,"slds-button","slds-button_icon","slds-button_icon-small","slds-float_right","slds-popover__close",3,"click"],["icon","close",3,"inverse"],[1,"slds-popover__header"],[1,"slds-media","slds-media_center","slds-has-flexi-truncate"],["icon","error","size","x-small","colorclass","slds-icon-utility-error"],[1,"slds-media__body","slds-text-align--left","slds-p-left--x-small"],["title","Resolve error",1,"slds-truncate","slds-text-heading_medium"],["label","LBL_VALIDATION_ERRORS"],[1,"slds-popover__body","slds-p-horizontal--none"],[1,"slds-table","slds-table_cell-buffer","slds-table_bordered"],["class","slds-hint-parent",4,"ngFor","ngForOf"],[1,"slds-hint-parent"],["data-label","type"],[1,"slds-truncate"],["size","x-small",3,"icon"],["data-label","Field"],[3,"module","field"],["data-label","Message"]],template:function(e,t){1&e&&i.YNc(0,g,4,2,"div",0),2&e&&i.Q6J("ngIf",t.messagecount)},dependencies:[o.mk,o.sg,o.O5,o.PC,a.J,d._,r.h,c.r],encapsulation:2})}return GlobalDockedComposerMessagesBadge})()},44028:(e,t,s)=>{"use strict";s.d(t,{G:()=>m});var i=s(62242),n=s(80788),l=s(92251),o=s(55329),a=s(44755),d=s(72656),r=s(44561);function c(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"li",8)(1,"a",9),i.NdJ("click",(function(){const t=i.CHM(e).$implicit,s=i.oxw(2);return i.KtG(s.focusComposer(t.id))})),i.TgZ(2,"div",10)(3,"div",11)(4,"span",12),i._UZ(5,"system-icon",13),i.qZA()(),i.TgZ(6,"div",14)(7,"h2",15),i._uU(8),i.qZA()()()()()}if(2&e){const e=t.$implicit,s=i.oxw(2);i.xp6(5),i.Q6J("module",e.module)("size","small"),i.xp6(3),i.Oqu(s.displayLabel(e))}}function u(e,t){if(1&e&&(i.TgZ(0,"div",5)(1,"ul",6),i.YNc(2,c,9,3,"li",7),i.qZA()()),2&e){const e=i.oxw();i.xp6(2),i.Q6J("ngForOf",e.overflowComposers)}}let m=(()=>{class GlobalDockedComposerOverflow{renderer;elementRef;dockedComposer;telephony;language;showHiddenComposers=!1;clickListener;constructor(e,t,s,i,n){this.renderer=e,this.elementRef=t,this.dockedComposer=s,this.telephony=i,this.language=n}ngOnDestroy(){this.clickListener&&this.clickListener()}get hiddenCount(){return this.dockedComposer.composers.length+this.telephony.calls.length-this.dockedComposer.maxComposers}toggleHiddenComoposers(){this.showHiddenComposers=!this.showHiddenComposers,this.showHiddenComposers?this.clickListener=this.renderer.listen("document","click",(e=>this.onClick(e))):this.clickListener&&this.clickListener()}onClick(e){this.elementRef.nativeElement.contains(e.target)||(this.showHiddenComposers=!1,this.clickListener())}get overflowComposers(){return this.dockedComposer.composers.slice(this.dockedComposer.maxComposers-this.telephony.calls.length)}displayLabel(e){return e.model.data.name?e.model.data.name:this.language.getModuleName(e.model.module,!0)}focusComposer(e){this.dockedComposer.focusComposer(e),this.showHiddenComposers=!1}static ɵfac=function(e){return new(e||GlobalDockedComposerOverflow)(i.Y36(i.Qsj),i.Y36(i.SBq),i.Y36(n.m),i.Y36(l.n),i.Y36(o.d))};static ɵcmp=i.Xpm({type:GlobalDockedComposerOverflow,selectors:[["global-docked-composer-overflow"]],decls:6,vars:3,consts:[[1,"slds-docked-composer","slds-docked-composer_overflow","slds-m-horizontal--x-small"],[1,"slds-button","slds-button_icon","slds-docked-composer_overflow__button",3,"click"],[3,"icon"],[1,"slds-text-body_small","slds-m-left_xx-small"],["class","slds-dropdown slds-dropdown_left slds-dropdown_bottom slds-dropdown_medium slds-nubbin_bottom-left",4,"ngIf"],[1,"slds-dropdown","slds-dropdown_left","slds-dropdown_bottom","slds-dropdown_medium","slds-nubbin_bottom-left"],["role","menu",1,"slds-dropdown__list","slds-dropdown_length-with-icon-7"],["class","slds-dropdown__item","role","presentation",4,"ngFor","ngForOf"],["role","presentation",1,"slds-dropdown__item"],["href","javascript:void(0);","role","menuitem",3,"click"],[1,"slds-media","slds-media_center","slds-no-space"],[1,"slds-media__figure","slds-m-right_x-small"],[1,"slds-icon_container"],[3,"module","size"],[1,"slds-media__body"],[1,"slds-truncate"]],template:function(e,t){1&e&&(i.TgZ(0,"div",0)(1,"button",1),i.NdJ("click",(function(){return t.toggleHiddenComoposers()})),i._UZ(2,"system-button-icon",2),i.TgZ(3,"span",3),i._uU(4),i.qZA()(),i.YNc(5,u,3,1,"div",4),i.qZA()),2&e&&(i.xp6(2),i.Q6J("icon","standard_objects"),i.xp6(2),i.Oqu(t.hiddenCount),i.xp6(1),i.Q6J("ngIf",t.showHiddenComposers))},dependencies:[a.sg,a.O5,d.J,r.f],encapsulation:2})}return GlobalDockedComposerOverflow})()},30661:(e,t,s)=>{"use strict";s.d(t,{T:()=>b});var i=s(62242),n=s(75920),l=s(83917),o=s(44044),a=s(4154),d=s(33369),r=s(44755),c=s(92403),u=s(27877);const m=["footercontainer"],g=["modalcontainer"],h=["modalbackdrop"],p=["hiddenContainer"];function f(e,t){1&e&&i._UZ(0,"global-docked-composer-container")}let b=(()=>{class GlobalFooter{session;footer;modalservice;metadata;broadcast;footercontainer;modalcontainer;modalbackdrop;hiddenContainer;loadedComponents=[];constructor(e,t,s,i,n){this.session=e,this.footer=t,this.modalservice=s,this.metadata=i,this.broadcast=n}ngOnInit(){this.subscribeToLoader()}loadCustomComponentset(e){this.metadata.getComponentSetObjects(e).forEach((e=>{this.loadedComponents.some((t=>t.component==e.component&&_.isEqual(t.componentconfig,e.componentconfig)))||this.metadata.addComponent(e.component,this.hiddenContainer).subscribe((t=>{t.instance.componentconfig=e.componentconfig,this.loadedComponents.push(e)}))}))}ngAfterViewInit(){this.footer.footercontainer=this.footercontainer,this.footer.modalcontainer=this.modalcontainer,this.footer.modalbackdrop=this.modalbackdrop}subscribeToLoader(){this.broadcast.message$.subscribe((e=>{if("loader.primarycompleted"!=e.messagetype)return;const t=this.metadata.getComponentConfig("GlobalFooter");t?.componentset&&this.loadCustomComponentset(t.componentset)}))}static ɵfac=function(e){return new(e||GlobalFooter)(i.Y36(n.n),i.Y36(l.M),i.Y36(o.o),i.Y36(a.Pu),i.Y36(d.f))};static ɵcmp=i.Xpm({type:GlobalFooter,selectors:[["global-footer"]],viewQuery:function(e,t){if(1&e&&(i.Gf(m,7,i.s_b),i.Gf(g,7,i.s_b),i.Gf(h,7,i.s_b),i.Gf(p,7,i.s_b)),2&e){let e;i.iGM(e=i.CRH())&&(t.footercontainer=e.first),i.iGM(e=i.CRH())&&(t.modalcontainer=e.first),i.iGM(e=i.CRH())&&(t.modalbackdrop=e.first),i.iGM(e=i.CRH())&&(t.hiddenContainer=e.first)}},decls:12,vars:7,consts:[[4,"ngIf"],["footercontainer",""],["data-info","ModalContainer",2,"position","fixed","z-index","10000"],[1,"slds-backdrop"],["backdrop",""],["modalcontainer",""],[1,"slds-notify_container"],[2,"display","none"],["hiddenContainer",""]],template:function(e,t){1&e&&(i.TgZ(0,"footer"),i.YNc(1,f,1,0,"global-docked-composer-container",0),i._UZ(2,"div",null,1),i.TgZ(4,"div",2),i._UZ(5,"div",3,4)(7,"span",null,5),i.qZA(),i._UZ(9,"system-toast-container",6)(10,"div",7,8),i.qZA()),2&e&&(i.xp6(1),i.Q6J("ngIf",t.session.authData.sessionId&&!0===t.session.authData.loaded),i.xp6(4),i.Udp("z-index",t.modalservice.backdropZindex)("backdrop-filter",t.modalservice.backdropBlurred),i.ekj("slds-backdrop_open",t.modalservice.backdropVisible))},dependencies:[r.O5,c.t,u.y],encapsulation:2})}return GlobalFooter})()},30048:(e,t,s)=>{"use strict";s.d(t,{e:()=>k});var i=s(62242),n=s(83348),l=s(50727),o=s(75920),a=s(13278),d=s(26559),r=s(62422),c=s(82032),u=s(14505),m=s(26625),g=s(44755),h=s(2552),p=s(26558),f=s(94365),b=s(6131);const v=["header"];function y(e,t){1&e&&i._UZ(0,"global-header-trial-bar")}function x(e,t){1&e&&i._UZ(0,"global-header-top")}function w(e,t){if(1&e&&i._UZ(0,"global-navigation-tabbed",6),2&e){const e=i.oxw(2);i.Q6J("progressWidth",e.progressWidth)("showProgressBar",e.pendingRequestsTotal>0)}}function Z(e,t){1&e&&i._UZ(0,"global-navigation")}function T(e,t){if(1&e&&(i.TgZ(0,"div",7),i._UZ(1,"div",8),i.qZA()),2&e){const e=i.oxw(2);i.xp6(1),i.Udp("width",e.progressWidth,"%")}}function C(e,t){if(1&e&&(i.TgZ(0,"div"),i.YNc(1,y,1,0,"global-header-trial-bar",2),i.YNc(2,x,1,0,"global-header-top",2),i.YNc(3,w,1,2,"global-navigation-tabbed",3),i.YNc(4,Z,1,0,"global-navigation",2),i.TgZ(5,"div",4),i.YNc(6,T,2,2,"div",5),i.qZA()()),2&e){const e=i.oxw();i.xp6(1),i.Q6J("ngIf",e.isTenant),i.xp6(1),i.Q6J("ngIf",!e.userPreferences.toUse.globalHeaderCollapsed||e.issmall),i.xp6(1),i.Q6J("ngIf",!e.issmall&&e.tabbed),i.xp6(1),i.Q6J("ngIf",!e.issmall&&!e.tabbed),i.xp6(2),i.Q6J("ngIf",e.issmall&&e.pendingRequestsTotal>0)}}let k=(()=>{class GlobalHeader{session;router;toast;layout;userPreferences;navigation;backend;cdRef;configurationService;subscriptions=new l.w0;pendingRequestsTotal=0;progressWidth=0;header;constructor(e,t,s,i,l,o,a,d,r){this.session=e,this.router=t,this.toast=s,this.layout=i,this.userPreferences=l,this.navigation=o,this.backend=a,this.cdRef=d,this.configurationService=r,this.router.events.subscribe((e=>{if(e instanceof n.wM){let t=this.configurationService.getSystemParamater("aclcontroller");t&&"spiceacl"!=t&&"Users"===e.snapshot.params.module&&e.snapshot.params.id&&(this.session.authData.admin||e.snapshot.params.id==this.session.authData.userId||(this.toast.sendToast("You are not allowed to view or edit foreign user data.","warning",null,3),this.router.navigate(["/module/Users"])))}}))}get headerHeight(){return this.header?this.header.element.nativeElement.getBoundingClientRect().height:0}get tabbed(){return"subtabbed"==this.navigation.navigationparadigm}get issmall(){return"small"==this.layout.screenwidth}get isTenant(){return!_.isEmpty(this.configurationService.getData("tenantconfig"))}ngAfterViewInit(){this.subscribeToBackendPendingRequests()}ngOnDestroy(){this.subscriptions.unsubscribe()}subscribeToBackendPendingRequests(){this.subscriptions.add(this.backend.pendingCountChange$.subscribe((e=>{e>this.pendingRequestsTotal?this.pendingRequestsTotal=e:0==e&&(this.pendingRequestsTotal=0),this.progressWidth=0==e?100:100/this.pendingRequestsTotal*(this.pendingRequestsTotal-this.backend.pendingRequestsCount),this.cdRef.detectChanges()})))}static ɵfac=function(e){return new(e||GlobalHeader)(i.Y36(o.n),i.Y36(n.F0),i.Y36(a.A),i.Y36(d.b),i.Y36(r.z),i.Y36(c.G),i.Y36(u.y),i.Y36(i.sBO),i.Y36(m.C))};static ɵcmp=i.Xpm({type:GlobalHeader,selectors:[["global-header"]],viewQuery:function(e,t){if(1&e&&i.Gf(v,5,i.s_b),2&e){let e;i.iGM(e=i.CRH())&&(t.header=e.first)}},decls:3,vars:1,consts:[[1,"slds-global-header_container"],["header",""],[4,"ngIf"],[3,"progressWidth","showProgressBar",4,"ngIf"],[1,"slds-hide--medium","slds-context-bar",2,"height","0"],["class","slds-context-bar-progress-bar",4,"ngIf"],[3,"progressWidth","showProgressBar"],[1,"slds-context-bar-progress-bar"],[1,"slds-height_full"]],template:function(e,t){1&e&&(i.TgZ(0,"header",0,1),i.YNc(2,C,7,5,"div",2),i.qZA()),2&e&&(i.xp6(2),i.Q6J("ngIf",t.session.authData.sessionId&&!0===t.session.authData.loaded))},dependencies:[g.O5,h.f,p.e,f.q,b.s],encapsulation:2})}return GlobalHeader})()},93131:(e,t,s)=>{"use strict";s.d(t,{s:()=>o});var i=s(62242),n=s(66550),l=s(26625);let o=(()=>{class GlobalHeaderImage{sanitizer;cdref;configuration;defaultImageUrl="config/headerimage";imageUrl=this.defaultImageUrl;subscription;constructor(e,t,s){this.sanitizer=e,this.cdref=t,this.configuration=s,this.configuration.hasCapabilityConfig("theme")&&this.setImageUrl(),this.subscription=this.configuration.loaded$.subscribe((e=>{e&&this.setImageUrl()}))}setImageUrl(){this.configuration.getAsset("headerimage")?this.imageUrl=this.sanitizer.bypassSecurityTrustResourceUrl(this.configuration.getAsset("headerimage")):this.configuration.getCapabilityConfig("theme").header_image?this.imageUrl=this.sanitizer.bypassSecurityTrustResourceUrl("data:"+this.configuration.getCapabilityConfig("theme").header_image):this.imageUrl=this.defaultImageUrl}ngOnDestroy(){this.subscription.unsubscribe()}static ɵfac=function(e){return new(e||GlobalHeaderImage)(i.Y36(n.H7),i.Y36(i.sBO),i.Y36(l.C))};static ɵcmp=i.Xpm({type:GlobalHeaderImage,selectors:[["global-header-image"]],decls:1,vars:1,consts:[[1,"slds-show--large",2,"max-height","25px",3,"src"]],template:function(e,t){1&e&&i._UZ(0,"img",0),2&e&&i.Q6J("src",t.imageUrl,i.LSH)},encapsulation:2})}return GlobalHeaderImage})()},30141:(e,t,s)=>{"use strict";s.d(t,{z:()=>N});var i=s(62242),n=s(22487),l=s(83348),o=s(33369),a=s(26625),d=s(62422),r=s(55329),c=s(44755),u=s(95030),m=s(95681),g=s(83398),h=s(44561),p=s(83463),f=s(93333),b=s(78859),_=s(68070),v=s(53838);const y=["searchfield"];function x(e,t){1&e&&i._UZ(0,"system-utility-icon",31)}function w(e,t){1&e&&i._UZ(0,"system-utility-icon",31)}function Z(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"li",23),i.NdJ("click",(function(){const t=i.CHM(e).$implicit,s=i.oxw(2);return i.KtG(s.searchmodule=t)})),i.TgZ(1,"div",24)(2,"div",25),i.YNc(3,w,1,0,"system-utility-icon",26),i.qZA(),i.TgZ(4,"div",27)(5,"div",28),i._UZ(6,"system-label-modulename",32),i.qZA()()()()}if(2&e){const e=t.$implicit,s=i.oxw(2);i.xp6(3),i.Q6J("ngIf",e==s._searchmodule),i.xp6(3),i.Q6J("module",e)}}function T(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"div",15)(1,"div",1)(2,"div",2)(3,"div",16)(4,"div",17)(5,"div",18)(6,"input",19),i.NdJ("ngModelChange",(function(t){i.CHM(e);const s=i.oxw();return i.KtG(s.searchmodule=t)})),i.qZA(),i._UZ(7,"system-icon",20),i.qZA(),i.TgZ(8,"div",21)(9,"ul",22)(10,"li",23),i.NdJ("click",(function(){i.CHM(e);const t=i.oxw();return i.KtG(t.searchmodule="all")})),i.TgZ(11,"div",24)(12,"div",25),i.YNc(13,x,1,0,"system-utility-icon",26),i.qZA(),i.TgZ(14,"div",27)(15,"div",28),i._UZ(16,"system-label",29),i.qZA()()()(),i.YNc(17,Z,7,2,"li",30),i.qZA()()()()()()()}if(2&e){const e=i.oxw();i.xp6(6),i.Q6J("ngModel",e.searchmodule),i.xp6(7),i.Q6J("ngIf","all"==e.searchmodule),i.xp6(4),i.Q6J("ngForOf",e.fts.loadedSearchModules)}}function C(e,t){if(1&e&&(i.TgZ(0,"div"),i._UZ(1,"system-label",41),i.qZA()),2&e){const e=t.$implicit;i.xp6(1),i.Q6J("label",e.label)("nestedValues",e.nestedValues)}}function k(e,t){if(1&e&&(i.TgZ(0,"div",39),i.YNc(1,C,2,2,"div",40),i.qZA()),2&e){const e=i.oxw(2);i.xp6(1),i.Q6J("ngForOf",e.searchTermErrors)}}function A(e,t){if(1&e&&(i.TgZ(0,"ul",33)(1,"li",34)(2,"span",35),i._UZ(3,"system-utility-icon",36),i.TgZ(4,"div",37),i.YNc(5,k,2,1,"div",38),i.qZA()()()()),2&e){const e=i.oxw();i.xp6(5),i.Q6J("ngIf",e.searchTermErrors)}}function L(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"global-header-search-recent-items",42),i.NdJ("selected",(function(t){i.CHM(e);const s=i.oxw();return i.KtG(s.selected(t))})),i.qZA()}}function I(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"global-header-search-results-items",43),i.NdJ("selected",(function(t){i.CHM(e);const s=i.oxw();return i.KtG(s.selected(t))})),i.qZA()}if(2&e){const e=i.oxw();i.Q6J("searchTerm",e.searchTerm)("searchResults",e.searchresults)}}const S=function(e){return{"slds-combobox-group":e}},M=function(e){return{"slds-combobox-addon_end":e}},J=function(e){return{"slds-is-open":e}},O=function(e){return{"slds-has-error":e}};let N=(()=>{class GlobalHeaderSearch{router;broadcast;fts;configuration;elementRef;renderer;userPreferences;language;searchfield;searchTermErrors;showError=!1;isFocused=!1;showRecent=!1;searchTimeOut=void 0;searchTerm="";searchTermUntrimmed="";clickListener;_searchmodule="all";searchresults=[];quickLaunch(e){this.searchfield.element.nativeElement.focus()}get searchmodule(){return"all"==this._searchmodule?this.language.getLabel("LBL_ALL"):this.language.getModuleName(this._searchmodule)}set searchmodule(e){this._searchmodule=e,this.searchTerm&&this.showRecent&&this.executeSearch()}constructor(e,t,s,i,n,l,o,a){this.router=e,this.broadcast=t,this.fts=s,this.configuration=i,this.elementRef=n,this.renderer=l,this.userPreferences=o,this.language=a}get minNGram(){return this.configuration.getCapabilityConfig("search").min_ngram??3}get showModuleSelector(){return window.innerWidth>=768&&!this.userPreferences.toUse.globalHeaderCollapsed}onFocus(){this.showRecent=!0,this.isFocused=!0,this.clickListener=this.renderer.listen("document","click",(e=>this.onClick(e)))}closePopup(){this.clickListener(),this.showRecent=!1,this.searchTerm="",this.searchTermUntrimmed=""}doSearch(){this.searchTerm=this.searchTermUntrimmed.trim(),this.searchTerm.length&&this.searchTerm!==this.fts.searchTerm&&this.executeSearch()}executeSearch(){let e=[];this.showModuleSelector&&"all"!=this._searchmodule&&e.push(this._searchmodule),this.searchresults=[],this.fts.searchByModules({searchterm:this.searchTerm,modules:e,size:10}).subscribe((e=>{let t=[];for(let e of this.fts.moduleSearchresults)t=t.concat(e.data.hits);t.sort(((e,t)=>e._score>t._score?-1:1)),this.searchresults=t.splice(0,10)}))}clearSearchTerm(){this.searchTimeOut&&window.clearTimeout(this.searchTimeOut),this.searchTerm="",this.searchTermUntrimmed="",this.fts.searchTerm=""}search(e){let t;switch(this.showRecent=!0,e.key){case"ArrowDown":case"ArrowUp":break;case"Enter":this.searchTerm=this.searchTermUntrimmed.trim(),t=this.fts.checkForSearchTermErrors(this.searchTerm),t?this.searchTermErrors=t:(this.searchTermErrors=void 0,this.searchTerm.length&&(this.searchTimeOut&&window.clearTimeout(this.searchTimeOut),this.showRecent=!1,this.searchTerm.length>0&&this.router.navigate(["/search/"+encodeURIComponent(btoa(this.searchTerm))])));break;default:this.searchTimeOut&&window.clearTimeout(this.searchTimeOut),t=this.fts.checkForSearchTermErrors(this.searchTermUntrimmed.trim()),t?""==this.searchTermUntrimmed.trim()?(this.searchTerm="",this.searchTermErrors=void 0):this.searchTimeOut=window.setTimeout((()=>this.searchTermErrors=t),1e3):(this.searchTermErrors=void 0,this.searchTimeOut=window.setTimeout((()=>this.doSearch()),1e3))}}onClick(e){this.elementRef.nativeElement.contains(e.target)||this.closePopup()}selected(e){this.showRecent=!1,this.clearSearchTerm()}onBlur(){window.setTimeout((()=>this.isFocused=!1),200)}static ɵfac=function(e){return new(e||GlobalHeaderSearch)(i.Y36(l.F0),i.Y36(o.f),i.Y36(n.Q),i.Y36(a.C),i.Y36(i.SBq),i.Y36(i.Qsj),i.Y36(d.z),i.Y36(r.d))};static ɵcmp=i.Xpm({type:GlobalHeaderSearch,selectors:[["global-header-search"]],viewQuery:function(e,t){if(1&e&&i.Gf(y,5,i.s_b),2&e){let e;i.iGM(e=i.CRH())&&(t.searchfield=e.first)}},hostBindings:function(e,t){1&e&&i.NdJ("keydown.control.s",(function(){return t.quickLaunch()}),!1,i.evT)},features:[i._Bn([n.Q])],decls:15,vars:17,consts:[[1,"slds-global-header__item_search",2,"min-width","15rem"],[1,"slds-form-element"],[1,"slds-form-element__control"],[1,"",3,"ngClass"],["class","slds-combobox_object-switcher slds-combobox-addon_start",4,"ngIf"],[1,"slds-combobox_container",3,"ngClass"],["role","combobox",1,"slds-combobox","slds-dropdown-trigger","slds-dropdown-trigger_click",3,"ngClass"],["role","none",1,"slds-is-relative","slds-combobox__form-element","slds-input-has-icon","slds-input-has-icon_left","slds-global-search__form-element",3,"ngClass"],["icon","search","addclasses","slds-input__icon slds-input__icon--left"],["role","textbox","type","search","system-placeholder","LBL_SEARCH_SPICE",1,"slds-input","slds-combobox__input",3,"ngModel","focus","blur","ngModelChange","keyup"],["searchfield",""],["role","listbox",1,"slds-dropdown","slds-dropdown_fluid"],["role","listbox",4,"ngIf"],[3,"selected",4,"ngIf"],[3,"searchTerm","searchResults","selected",4,"ngIf"],[1,"slds-combobox_object-switcher","slds-combobox-addon_start"],[1,"slds-combobox_container"],["system-dropdown-trigger","","role","combobox",1,"slds-combobox","slds-dropdown-trigger","slds-dropdown-trigger_click"],["role","none",1,"slds-combobox__form-element","slds-input-has-icon","slds-input-has-icon_right"],["type","text","readonly","","role","textbox",1,"slds-input","slds-combobox__input","slds-combobox__input-value",3,"ngModel","ngModelChange"],["icon","down","sprite","utility","size","x-small","addclasses","slds-icon_container slds-icon-utility-down slds-input__icon slds-input__icon_right"],[1,"slds-dropdown","slds-dropdown_x-small","slds-dropdown_left"],["role","group",1,"slds-listbox","slds-listbox_vertical"],["role","presentation",1,"slds-listbox__item",3,"click"],["role","option",1,"slds-media","slds-listbox__option","slds-listbox__option_plain","slds-media_small"],[1,"slds-media__figure","slds-listbox__option-icon"],["icon","check","size","x-small",4,"ngIf"],[1,"slds-media__body"],[1,"slds-truncate"],["label","LBL_ALL"],["role","presentation","class","slds-listbox__item",3,"click",4,"ngFor","ngForOf"],["icon","check","size","x-small"],[3,"module"],["role","listbox"],["role","presentation"],["role","option",1,"slds-lookup__item-action","slds-media","slds-media--center"],["icon","warning","size","small","colorclass","slds-icon-text-error"],[1,"slds-media__body","slds-p-left--x-small"],["class","slds-lookup__result-text",4,"ngIf"],[1,"slds-lookup__result-text"],[4,"ngFor","ngForOf"],[3,"label","nestedValues"],[3,"selected"],[3,"searchTerm","searchResults","selected"]],template:function(e,t){1&e&&(i.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),i.YNc(4,T,18,3,"div",4),i.TgZ(5,"div",5)(6,"div",6)(7,"div",7),i._UZ(8,"system-utility-icon",8),i.TgZ(9,"input",9,10),i.NdJ("focus",(function(){return t.onFocus()}))("blur",(function(){return t.onBlur()}))("ngModelChange",(function(e){return t.searchTermUntrimmed=e}))("keyup",(function(e){return t.search(e)})),i.qZA()(),i.TgZ(11,"div",11),i.YNc(12,A,6,1,"ul",12),i.YNc(13,L,1,0,"global-header-search-recent-items",13),i.YNc(14,I,1,2,"global-header-search-results-items",14),i.qZA()()()()()()()),2&e&&(i.xp6(3),i.Q6J("ngClass",i.VKq(9,S,t.showModuleSelector)),i.xp6(1),i.Q6J("ngIf",t.showModuleSelector),i.xp6(1),i.Q6J("ngClass",i.VKq(11,M,t.showModuleSelector)),i.xp6(1),i.Q6J("ngClass",i.VKq(13,J,t.showRecent)),i.xp6(1),i.Q6J("ngClass",i.VKq(15,O,t.searchTermErrors)),i.xp6(2),i.Q6J("ngModel",t.searchTermUntrimmed),i.xp6(3),i.Q6J("ngIf",t.searchTermErrors),i.xp6(1),i.Q6J("ngIf",t.showRecent&&""===t.searchTerm),i.xp6(1),i.Q6J("ngIf",""!==t.searchTerm&&!t.searchTermErrors))},dependencies:[c.mk,c.sg,c.O5,u.Fj,u.JJ,u.On,m.l,g.A,h.f,p._,f.M,b.r,_.o,v.B],encapsulation:2})}return GlobalHeaderSearch})()},24373:(e,t,s)=>{"use strict";s.d(t,{S:()=>_});var i=s(62242),n=s(55710),l=s(32294),o=s(83348),a=s(55329),d=s(4154),r=s(44755),c=s(33634),u=s(44561),m=s(93333),g=s(55931);const h=["global-header-search-recent-item",""];function p(e,t){if(1&e&&(i.TgZ(0,"span"),i._uU(1),i.qZA()),2&e){const e=i.oxw();i.xp6(1),i.Oqu(e.model.data.summary_text)}}function f(e,t){if(1&e&&(i.TgZ(0,"li",8),i._UZ(1,"field-container",12),i.qZA()),2&e){const e=i.oxw().$implicit;i.xp6(1),i.Q6J("field",e.field)("fieldconfig",e.fieldconfig)}}function b(e,t){if(1&e&&(i.ynx(0),i.YNc(1,f,2,2,"li",11),i.BQk()),2&e){const e=t.$implicit,s=i.oxw();i.xp6(1),i.Q6J("ngIf",s.model.getField(e.field))}}let _=(()=>{class GlobalHeaderSearchRecentItem{model;router;language;metadata;view;item={};selected=new i.vpe;mainfieldset;subfieldsetfields;constructor(e,t,s,i,n){this.model=e,this.router=t,this.language=s,this.metadata=i,this.view=n,this.view.displayLabels=!1}navigateTo(){this.selected.emit(!0),this.router.navigate(["/module/"+this.model.module+"/"+this.model.id])}gethref(){return"#/module/"+this.model.module+"/"+this.model.id}ngOnInit(){this.model.module=this.item.module_name,this.model.id=this.item.item_id,this.model.setData(this.item.data);let e=this.metadata.getComponentConfig("GlobalHeaderSearchResultsItem",this.model.module);this.mainfieldset=e.mainfieldset,e&&e.subfieldset&&(this.subfieldsetfields=this.metadata.getFieldSetItems(e.subfieldset))}static ɵfac=function(e){return new(e||GlobalHeaderSearchRecentItem)(i.Y36(n.o),i.Y36(o.F0),i.Y36(a.d),i.Y36(d.Pu),i.Y36(l.e))};static ɵcmp=i.Xpm({type:GlobalHeaderSearchRecentItem,selectors:[["","global-header-search-recent-item",""]],hostBindings:function(e,t){1&e&&i.NdJ("click",(function(){return t.navigateTo()}))},inputs:{item:"item"},outputs:{selected:"selected"},features:[i._Bn([n.o,l.e])],attrs:h,decls:11,vars:6,consts:[["role","option",1,"slds-lookup__item-action","slds-media","slds-media--center"],["size","small",3,"module"],[1,"slds-media__body"],[1,"slds-lookup__result-text"],[4,"ngIf"],[3,"fieldset"],[1,"slds-lookup__result-meta","slds-text-body--small"],[1,"slds-list_horizontal","slds-has-dividers_right","slds-truncate"],[1,"slds-item"],[3,"module","singular"],[4,"ngFor","ngForOf"],["class","slds-item",4,"ngIf"],["fielddisplayclass","slds-truncate",3,"field","fieldconfig"]],template:function(e,t){1&e&&(i.TgZ(0,"span",0),i._UZ(1,"system-icon",1),i.TgZ(2,"div",2)(3,"div",3),i.YNc(4,p,2,1,"span",4),i._UZ(5,"object-record-fieldset-horizontal-list",5),i.qZA(),i.TgZ(6,"span",6)(7,"ul",7)(8,"li",8),i._UZ(9,"system-label-modulename",9),i.qZA(),i.YNc(10,b,2,1,"ng-container",10),i.qZA()()()()),2&e&&(i.xp6(1),i.Q6J("module",t.model.module),i.xp6(3),i.Q6J("ngIf",!t.mainfieldset),i.xp6(1),i.Q6J("fieldset",t.mainfieldset),i.xp6(4),i.Q6J("module",t.model.module)("singular",!0),i.xp6(1),i.Q6J("ngForOf",t.subfieldsetfields))},dependencies:[r.sg,r.O5,c.j,u.f,m.M,g.Z],encapsulation:2})}return GlobalHeaderSearchRecentItem})()},53838:(e,t,s)=>{"use strict";s.d(t,{B:()=>h});var i=s(62242),n=s(55329),l=s(10382),o=s(83348),a=s(44755),d=s(44561),r=s(83463),c=s(94664),u=s(24373);function m(e,t){1&e&&(i.TgZ(0,"li",9),i._UZ(1,"system-spinner",10),i.qZA())}function g(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"li",11),i.NdJ("selected",(function(){i.CHM(e);const t=i.oxw();return i.KtG(t.selected.emit(!0))})),i.qZA()}if(2&e){const e=t.$implicit;i.Q6J("item",e)}}let h=(()=>{class GlobalHeaderSearchRecentItems{language;recent;router;selected=new i.vpe;recentItems=[];isInitialized=!1;constructor(e,t,s){this.language=e,this.recent=t,this.router=s,this.getRecent()}getRecent(){this.recent.getRecentItems()}goRecent(){this.selected.emit(!1),this.router.navigate(["/recent"])}static ɵfac=function(e){return new(e||GlobalHeaderSearchRecentItems)(i.Y36(n.d),i.Y36(l.h),i.Y36(o.F0))};static ɵcmp=i.Xpm({type:GlobalHeaderSearchRecentItems,selectors:[["global-header-search-recent-items"]],outputs:{selected:"selected"},decls:9,vars:2,consts:[["role","listbox"],["role","presentation",3,"click"],["role","option",1,"slds-lookup__item-action","slds-media","slds-media--center"],["icon","breadcrumbs","size","small","sprite","utility"],[1,"slds-media__body"],[1,"slds-lookup__result-text"],["label","LBL_RECENTLYVIEWED"],["class","slds-p-bottom--small",4,"ngIf"],["global-header-search-recent-item","",3,"item","selected",4,"ngFor","ngForOf"],[1,"slds-p-bottom--small"],["size","16"],["global-header-search-recent-item","",3,"item","selected"]],template:function(e,t){1&e&&(i.TgZ(0,"ul",0)(1,"li",1),i.NdJ("click",(function(){return t.goRecent()})),i.TgZ(2,"span",2),i._UZ(3,"system-icon",3),i.TgZ(4,"div",4)(5,"div",5),i._UZ(6,"system-label",6),i.qZA()()()(),i.YNc(7,m,2,0,"li",7),i.YNc(8,g,1,1,"li",8),i.qZA()),2&e&&(i.xp6(7),i.Q6J("ngIf",!t.recent.isInitialized),i.xp6(1),i.Q6J("ngForOf",t.recent.recentItems.slice(0,10)))},dependencies:[a.sg,a.O5,d.f,r._,c.W,u.S],encapsulation:2})}return GlobalHeaderSearchRecentItems})()},15650:(e,t,s)=>{"use strict";s.d(t,{u:()=>_});var i=s(62242),n=s(32294),l=s(55710),o=s(83348),a=s(55329),d=s(4154),r=s(44755),c=s(33634),u=s(44561),m=s(93333),g=s(55931);const h=["global-header-search-results-item",""];function p(e,t){if(1&e&&(i.TgZ(0,"span"),i._uU(1),i.qZA()),2&e){const e=i.oxw();i.xp6(1),i.Oqu(e.model.data.summary_text)}}function f(e,t){if(1&e&&(i.TgZ(0,"li",8),i._UZ(1,"field-container",12),i.qZA()),2&e){const e=i.oxw().$implicit;i.xp6(1),i.Q6J("field",e.field)("fieldconfig",e.fieldconfig)}}function b(e,t){if(1&e&&(i.ynx(0),i.YNc(1,f,2,2,"li",11),i.BQk()),2&e){const e=t.$implicit,s=i.oxw();i.xp6(1),i.Q6J("ngIf",s.model.getField(e.field))}}let _=(()=>{class GlobalHeaderSearchResultsItem{model;view;router;language;metadata;hit={};selected=new i.vpe;_noNavigaton=!1;set noNavigaton(e){this._noNavigaton=!1!==e}mainfieldset;subfieldsetfields;constructor(e,t,s,i,n){this.model=e,this.view=t,this.router=s,this.language=i,this.metadata=n,this.view.displayLabels=!1,this.view.displayLinks=!1}ngOnInit(){this.model.module=this.hit._type&&"_doc"!=this.hit._type?this.hit._type:this.hit._source._module,this.model.id=this.hit._id;let e=this.metadata.getComponentConfig("GlobalHeaderSearchResultsItem",this.model.module);this.mainfieldset=e.mainfieldset,e&&e.subfieldset&&(this.subfieldsetfields=this.metadata.getFieldSetItems(e.subfieldset)),this.model.setData(this.hit._source)}navigateTo(){this._noNavigaton?this.selected.emit(this.model):(this.selected.emit(!0),this.router.navigate(["/module/"+this.model.module+"/"+this.model.id]))}static ɵfac=function(e){return new(e||GlobalHeaderSearchResultsItem)(i.Y36(l.o),i.Y36(n.e),i.Y36(o.F0),i.Y36(a.d),i.Y36(d.Pu))};static ɵcmp=i.Xpm({type:GlobalHeaderSearchResultsItem,selectors:[["","global-header-search-results-item",""]],hostBindings:function(e,t){1&e&&i.NdJ("click",(function(){return t.navigateTo()}))},inputs:{hit:"hit",noNavigaton:["global-header-search-results-item-nonavigation","noNavigaton"]},outputs:{selected:"selected"},features:[i._Bn([l.o,n.e])],attrs:h,decls:11,vars:6,consts:[["role","option",1,"slds-lookup__item-action","slds-media","slds-media--center"],["size","small",3,"module"],[1,"slds-media__body"],[1,"slds-lookup__result-text"],[4,"ngIf"],[3,"fieldset"],[1,"slds-lookup__result-meta","slds-text-body--small"],[1,"slds-list_horizontal","slds-has-dividers_right","slds-truncate"],[1,"slds-item"],[3,"module","singular"],[4,"ngFor","ngForOf"],["class","slds-item",4,"ngIf"],["fielddisplayclass","slds-truncate",3,"field","fieldconfig"]],template:function(e,t){1&e&&(i.TgZ(0,"span",0),i._UZ(1,"system-icon",1),i.TgZ(2,"div",2)(3,"div",3),i.YNc(4,p,2,1,"span",4),i._UZ(5,"object-record-fieldset-horizontal-list",5),i.qZA(),i.TgZ(6,"div",6)(7,"ul",7)(8,"li",8),i._UZ(9,"system-label-modulename",9),i.qZA(),i.YNc(10,b,2,1,"ng-container",10),i.qZA()()()()),2&e&&(i.xp6(1),i.Q6J("module",t.model.module),i.xp6(3),i.Q6J("ngIf",!t.mainfieldset),i.xp6(1),i.Q6J("fieldset",t.mainfieldset),i.xp6(4),i.Q6J("module",t.model.module)("singular",!0),i.xp6(1),i.Q6J("ngForOf",t.subfieldsetfields))},dependencies:[r.sg,r.O5,c.j,u.f,m.M,g.Z],encapsulation:2})}return GlobalHeaderSearchResultsItem})()},68070:(e,t,s)=>{"use strict";s.d(t,{o:()=>y});var i=s(62242),n=s(83348),l=s(55329),o=s(22487),a=s(44755),d=s(44561),r=s(64730),c=s(83463),u=s(94664),m=s(29151),g=s(15650);function h(e,t){1&e&&i._UZ(0,"system-spinner",10),2&e&&i.Q6J("size",24)}function p(e,t){1&e&&i._UZ(0,"system-icon",11)}function f(e,t){1&e&&(i.ynx(0),i.TgZ(1,"li",12),i._UZ(2,"system-searchresult-stencil"),i.qZA(),i.TgZ(3,"li",13),i._UZ(4,"system-searchresult-stencil"),i.qZA(),i.TgZ(5,"li",14),i._UZ(6,"system-searchresult-stencil"),i.qZA(),i.BQk())}function b(e,t){1&e&&(i.TgZ(0,"div",15)(1,"system-illustration-no-records"),i._UZ(2,"system-label",16),i.qZA()())}function _(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"li",18),i.NdJ("selected",(function(){i.CHM(e);const t=i.oxw(2);return i.KtG(t.selected.emit(!0))})),i.qZA()}if(2&e){const e=t.$implicit;i.Q6J("hit",e)}}function v(e,t){if(1&e&&(i.ynx(0),i.YNc(1,_,1,1,"li",17),i.BQk()),2&e){const e=i.oxw();i.xp6(1),i.Q6J("ngForOf",e.searchResults)}}let y=(()=>{class GlobalHeaderSearchResultsItems{router;language;fts;searchTerm="";searchModule="";searchResults=[];selected=new i.vpe;constructor(e,t,s){this.router=e,this.language=t,this.fts=s}get searchModuleName(){return this.language.getLabel("LBL_INSPICECRM")}goSearch(){this.searchTerm.length>0&&(this.selected.emit(!0),this.router.navigate(["/search/"+encodeURIComponent(btoa(this.searchTerm))]))}static ɵfac=function(e){return new(e||GlobalHeaderSearchResultsItems)(i.Y36(n.F0),i.Y36(l.d),i.Y36(o.Q))};static ɵcmp=i.Xpm({type:GlobalHeaderSearchResultsItems,selectors:[["global-header-search-results-items"]],inputs:{searchTerm:"searchTerm",searchModule:"searchModule",searchResults:"searchResults"},outputs:{selected:"selected"},decls:12,vars:7,consts:[["role","listbox"],["role","presentation",3,"click"],["role","option",1,"slds-lookup__item-action","slds-media","slds-media--center"],["class","slds-p-right--x-small",3,"size",4,"ngIf"],["icon","search","size","small","sprite","utility",4,"ngIf"],[1,"slds-media__body"],[1,"slds-lookup__result-text"],["label","LBL_SEARCH"],[4,"ngIf"],["class","slds-align--absolute-center slds-p-around--small",4,"ngIf"],[1,"slds-p-right--x-small",3,"size"],["icon","search","size","small","sprite","utility"],[2,"opacity","1"],[2,"opacity","0.6"],[2,"opacity","0.2"],[1,"slds-align--absolute-center","slds-p-around--small"],["label","MSG_NO_RECORDS_FOUND"],["global-header-search-results-item","",3,"hit","selected",4,"ngFor","ngForOf"],["global-header-search-results-item","",3,"hit","selected"]],template:function(e,t){1&e&&(i.TgZ(0,"ul",0)(1,"li",1),i.NdJ("click",(function(){return t.goSearch()})),i.TgZ(2,"span",2),i.YNc(3,h,1,1,"system-spinner",3),i.YNc(4,p,1,0,"system-icon",4),i.TgZ(5,"div",5)(6,"div",6),i._UZ(7,"system-label",7),i._uU(8),i.qZA()()()(),i.YNc(9,f,7,0,"ng-container",8),i.YNc(10,b,3,0,"div",9),i.YNc(11,v,2,1,"ng-container",8),i.qZA()),2&e&&(i.xp6(3),i.Q6J("ngIf",t.fts.runningmodulesearch),i.xp6(1),i.Q6J("ngIf",!t.fts.runningmodulesearch),i.xp6(4),i.AsE(' "',t.searchTerm,'" ',t.searchModuleName,""),i.xp6(1),i.Q6J("ngIf",t.fts.runningmodulesearch),i.xp6(1),i.Q6J("ngIf",!t.fts.runningmodulesearch&&0==t.searchResults.length),i.xp6(1),i.Q6J("ngIf",!t.fts.runningmodulesearch))},dependencies:[a.sg,a.O5,d.f,r.C,c._,u.W,m.v,g.u],encapsulation:2})}return GlobalHeaderSearchResultsItems})()},27283:(e,t,s)=>{"use strict";s.d(t,{I:()=>u});var i=s(62242),n=s(4154),l=s(62422),o=s(33369),a=s(44755),d=s(82995);function r(e,t){if(1&e&&i._UZ(0,"system-dynamic-component",3),2&e){const e=i.oxw().$implicit;i.Q6J("component",e.component)("componentconfig",e.componentconfig)}}function c(e,t){if(1&e&&(i.ynx(0),i.YNc(1,r,1,2,"system-dynamic-component",2),i.BQk()),2&e){const e=t.$implicit,s=i.oxw();i.xp6(1),i.Q6J("ngIf",!s.userPreferences.toUse.globalHeaderCollapsed||!(null!=e.componentconfig&&e.componentconfig.hideInCollapsedHeader))}}let u=(()=>{class GlobalHeaderTools{metadata;userPreferences;broadcast;components=[];constructor(e,t,s){this.metadata=e,this.userPreferences=t,this.broadcast=s,this.broadcast.message$.subscribe((e=>{this.handleMessage(e)}))}ngOnInit(){this.buildTools()}handleMessage(e){switch(e.messagetype){case"applauncher.setrole":case"loader.reloaded":this.buildTools()}}buildTools(){let e=this.metadata.getComponentConfig("GlobalHeaderTools");e.componentset&&(this.components=this.metadata.getComponentSetObjects(e.componentset))}static ɵfac=function(e){return new(e||GlobalHeaderTools)(i.Y36(n.Pu),i.Y36(l.z),i.Y36(o.f))};static ɵcmp=i.Xpm({type:GlobalHeaderTools,selectors:[["global-header-tools"]],decls:2,vars:1,consts:[[1,"slds-grid","slds-grid--vertical-align-center"],[4,"ngFor","ngForOf"],[3,"component","componentconfig",4,"ngIf"],[3,"component","componentconfig"]],template:function(e,t){1&e&&(i.TgZ(0,"div",0),i.YNc(1,c,2,1,"ng-container",1),i.qZA()),2&e&&(i.xp6(1),i.Q6J("ngForOf",t.components))},dependencies:[a.sg,a.O5,d.T],encapsulation:2})}return GlobalHeaderTools})()},26558:(e,t,s)=>{"use strict";s.d(t,{e:()=>p});var i=s(62242),n=s(4154),l=s(26559),o=s(44755),a=s(30141),d=s(27283),r=s(22954),c=s(72401),u=s(93131);function m(e,t){1&e&&(i.TgZ(0,"div",6)(1,"div",7),i._UZ(2,"global-navigation-compact"),i.qZA()())}function g(e,t){1&e&&(i.TgZ(0,"div",8)(1,"div",9),i._UZ(2,"global-header-search"),i.qZA()())}function h(e,t){1&e&&(i.TgZ(0,"div",10)(1,"div",11),i._UZ(2,"global-header-tools")(3,"global-user"),i.qZA()())}let p=(()=>{class GlobalHeaderTop{metadata;layout;constructor(e,t){this.metadata=e,this.layout=t}get showSearch(){return this.metadata.getActiveRole().showsearch&&"0"!=this.metadata.getActiveRole().showsearch}get isSmall(){return"small"==this.layout.screenwidth}static ɵfac=function(e){return new(e||GlobalHeaderTop)(i.Y36(n.Pu),i.Y36(l.b))};static ɵcmp=i.Xpm({type:GlobalHeaderTop,selectors:[["global-header-top"]],decls:7,vars:3,consts:[[1,"slds-global-header","slds-grid","slds-grid--align-spread","slds-p-left--medium"],[1,"slds-show--large","slds-large-size--1-of-6"],[1,"slds-global-header__item","slds-p-left--none"],["class","slds-x-small-size--1-of-12",4,"ngIf"],["class","slds-x-small-size--11-of-12 slds-medium-size--4-of-6 slds-large-size--3-of-6",4,"ngIf"],["class","slds-medium-size--2-of-6 slds-large-size--1-of-6",4,"ngIf"],[1,"slds-x-small-size--1-of-12"],[1,"slds-global-header__item","slds-p-horizontal--none"],[1,"slds-x-small-size--11-of-12","slds-medium-size--4-of-6","slds-large-size--3-of-6"],[1,"slds-global-header__item"],[1,"slds-medium-size--2-of-6","slds-large-size--1-of-6"],[1,"slds-global-header__item","slds-grid","slds-grid--align-end","slds-grid--vertical-align-center"]],template:function(e,t){1&e&&(i.TgZ(0,"div",0)(1,"div",1)(2,"div",2),i._UZ(3,"global-header-image"),i.qZA()(),i.YNc(4,m,3,0,"div",3),i.YNc(5,g,3,0,"div",4),i.YNc(6,h,4,0,"div",5),i.qZA()),2&e&&(i.xp6(4),i.Q6J("ngIf",t.isSmall),i.xp6(1),i.Q6J("ngIf",t.showSearch),i.xp6(1),i.Q6J("ngIf",!t.isSmall))},dependencies:[o.O5,a.z,d.I,r.n,c.x,u.s],encapsulation:2})}return GlobalHeaderTop})()},2552:(e,t,s)=>{"use strict";s.d(t,{f:()=>d});var i=s(62242),n=s(4154),l=s(26559),o=s(82995),a=s(83463);let d=(()=>{class GlobalHeaderTrialBar{metadata;layout;constructor(e,t){this.metadata=e,this.layout=t}static ɵfac=function(e){return new(e||GlobalHeaderTrialBar)(i.Y36(n.Pu),i.Y36(l.b))};static ɵcmp=i.Xpm({type:GlobalHeaderTrialBar,selectors:[["global-header-trial-bar"]],decls:6,vars:0,consts:[[1,"slds-trial-header","slds-theme--info","slds-grid","slds-grid--vertical-align-center"],[1,"slds-grid"],[1,"slds-button","slds-m-right_small"],["label","LBL_WELCOME_TO_SPICECRM"],[1,"slds-col_bump-left"],["component","SystemTenantHeaderBarValidity"]],template:function(e,t){1&e&&(i.TgZ(0,"div",0)(1,"div",1)(2,"button",2),i._UZ(3,"system-label",3),i.qZA()(),i.TgZ(4,"div",4),i._UZ(5,"system-dynamic-component",5),i.qZA()())},dependencies:[o.T,a._],encapsulation:2})}return GlobalHeaderTrialBar})()},5289:(e,t,s)=>{"use strict";s.d(t,{s:()=>Q});var i=s(62242),n=s(64461),l=s(3144),o=s(26625),a=s(75920),d=s(13278),r=s(33369),c=s(66550),u=s(44755),m=s(95030),g=s(54021),h=s(72656),p=s(20528),f=s(80515),b=s(78859),v=s(91977),y=s(20595),x=s(53981),w=s(48764),Z=s(30314),T=s(74142),C=s(64481);const k=["twofactorinput"];function A(e,t){1&e&&i._UZ(0,"global-login-loading",2)}function L(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"div",30)(1,"div",31),i._UZ(2,"system-utility-icon",32),i.TgZ(3,"input",33,34),i.NdJ("ngModelChange",(function(t){i.CHM(e);const s=i.oxw(4);return i.KtG(s.code2fa=t)})),i.qZA()()()}if(2&e){const e=i.oxw(4);let t;i.xp6(3),i.Q6J("disabled",e.loggingIn)("ngModel",e.code2fa)("placeholder",null!==(t=null==e.loginLabels.LBL_ENTER_CODE?null:e.loginLabels.LBL_ENTER_CODE.default)&&void 0!==t?t:"Enter code")}}function I(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"form",17),i.NdJ("submit",(function(){i.CHM(e);const t=i.oxw(3);return i.KtG(t.login())})),i.TgZ(1,"div",18)(2,"div",19),i._UZ(3,"system-utility-icon",20),i.TgZ(4,"input",21),i.NdJ("ngModelChange",(function(t){i.CHM(e);const s=i.oxw(3);return i.KtG(s.username=t)})),i.qZA()()(),i.TgZ(5,"div",18)(6,"div",19),i._UZ(7,"system-utility-icon",22),i.TgZ(8,"input",23),i.NdJ("ngModelChange",(function(t){i.CHM(e);const s=i.oxw(3);return i.KtG(s.password=t)})),i.qZA()()(),i.YNc(9,L,5,3,"div",24),i.TgZ(10,"div",25)(11,"system-checkbox-toggle",26),i.NdJ("ngModelChange",(function(t){i.CHM(e);const s=i.oxw(3);return i.KtG(s.rememberMe=t)})),i.qZA()(),i.TgZ(12,"button",27),i._uU(13),i.qZA(),i.TgZ(14,"div",28)(15,"global-login-oauth2",29),i.NdJ("token",(function(t){i.CHM(e);const s=i.oxw(3);return i.KtG(s.login(t))})),i.qZA()()()}if(2&e){const e=i.oxw(3);let t,s,n,l;i.xp6(4),i.Q6J("disabled",e.loggingIn)("ngModel",e.username)("placeholder",null!==(t=null==e.loginLabels.LBL_USER_NAME?null:e.loginLabels.LBL_USER_NAME.default)&&void 0!==t?t:"Username"),i.xp6(4),i.Q6J("disabled",e.loggingIn)("ngModel",e.password)("placeholder",null!==(s=null==e.loginLabels.LBL_PASSWORD?null:e.loginLabels.LBL_PASSWORD.default)&&void 0!==s?s:"Password"),i.xp6(1),i.Q6J("ngIf",e.twoFactorAuthCodeRequired),i.xp6(2),i.Q6J("ngModel",e.rememberMe)("label",null!==(n=null==e.loginLabels.LBL_KEEP_ME_LOGGED_IN?null:e.loginLabels.LBL_KEEP_ME_LOGGED_IN.default)&&void 0!==n?n:"Keep me logged in"),i.xp6(1),i.Q6J("disabled",e.loggingIn),i.xp6(1),i.hij(" ",null!==(l=null==e.loginLabels.LBL_LOGIN?null:e.loginLabels.LBL_LOGIN.default)&&void 0!==l?l:"Login"," ")}}function S(e,t){1&e&&i._UZ(0,"system-button-icon",39),2&e&&i.Q6J("icon","chevrondown")("size","xx-small")}function M(e,t){1&e&&i._UZ(0,"system-button-icon",39),2&e&&i.Q6J("icon","chevronup")("size","xx-small")}function J(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"div",35)(1,"div",36),i._uU(2,"Forgot password"),i.qZA(),i.TgZ(3,"button",37),i.NdJ("click",(function(){i.CHM(e);const t=i.oxw(3);return i.KtG(t.showForgotPassword())})),i.YNc(4,S,1,2,"system-button-icon",38),i.YNc(5,M,1,2,"system-button-icon",38),i.qZA()()}if(2&e){const e=i.oxw(3);i.xp6(3),i.Q6J("disabled",e.loggingIn),i.xp6(1),i.Q6J("ngIf",!e.showForgotPass),i.xp6(1),i.Q6J("ngIf",e.showForgotPass)}}function O(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"global-login-forgot-password",40),i.NdJ("close",(function(t){i.CHM(e);const s=i.oxw(3);return i.KtG(s.showForgotPass=!t)})),i.qZA()}}function N(e,t){if(1&e&&(i.TgZ(0,"div",12)(1,"div",13),i.YNc(2,I,16,11,"form",14),i.YNc(3,J,6,3,"div",15),i.YNc(4,O,1,0,"global-login-forgot-password",16),i.qZA()()),2&e){const e=i.oxw(2);i.Q6J("system-overlay-loading-spinner",e.loggingIn),i.xp6(1),i.Q6J("system-overlay-loading-spinner",e.configuration.reloading),i.xp6(1),i.Q6J("ngIf",!e.showForgotPass),i.xp6(1),i.Q6J("ngIf",e.configuration.data.allowForgotPass),i.xp6(1),i.Q6J("ngIf",e.showForgotPass)}}function F(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"global-login-change-password",41),i.NdJ("closeDialog",(function(t){i.CHM(e);const s=i.oxw(2);return i.KtG(s.handleRenewDialogClose(t))})),i.qZA()}if(2&e){const e=i.oxw(2);i.Q6J("case",e.generateTOTP?"totp":"pwd")("username",e.username)("password",e.password)("labels",e.labels)}}function q(e,t){1&e&&(i.ynx(0),i._UZ(1,"system-loader-progress"),i.BQk())}function E(e,t){if(1&e&&i._UZ(0,"iframe",44),2&e){const e=i.oxw(3);i.Q6J("src",e.externalSidebarUrl,i.uOi)}}function Y(e,t){1&e&&(i.ynx(0),i._UZ(1,"global-newsfeed"),i.BQk())}function D(e,t){if(1&e&&(i.TgZ(0,"div",42),i.YNc(1,E,1,1,"iframe",43),i.YNc(2,Y,2,0,"ng-container",9),i.qZA()),2&e){const e=i.oxw(2);i.ekj("slds-scrollable--y",!e.showExternalSidebar),i.xp6(1),i.Q6J("ngIf",e.showExternalSidebar),i.xp6(1),i.Q6J("ngIf",e.showNewsfeed)}}function U(e,t){if(1&e&&(i.TgZ(0,"div",3)(1,"div",4)(2,"div",5)(3,"div",6),i._UZ(4,"global-login-image"),i.qZA(),i.YNc(5,N,5,5,"div",7),i.YNc(6,F,1,4,"global-login-change-password",8),i.YNc(7,q,2,0,"ng-container",9),i.qZA(),i.TgZ(8,"div",10),i._UZ(9,"global-copyright"),i.qZA()(),i.YNc(10,D,3,4,"div",11),i.qZA()),2&e){const e=i.oxw();i.xp6(5),i.Q6J("ngIf",!e.loginService.session.authData.sessionId&&e.promptUser),i.xp6(1),i.Q6J("ngIf",e.renewPassword||e.generateTOTP),i.xp6(1),i.Q6J("ngIf",e.loginService.session.authData.sessionId),i.xp6(3),i.Q6J("ngIf",e.promptUser&&e.showSidebar)}}let Q=(()=>{class GlobalLogin{loginService;http;configuration;session;toast;broadcast;sanitizer;changeDetectorRef;twofactorinput;twoFactorAuthCodeRequired=!1;promptUser=!1;username="";password="";rememberMe=!1;code2fa;showForgotPass=!1;externalSidebarUrl=null;messageId;renewPassword=!1;generateTOTP=!1;loggingIn=!1;labels;constructor(e,t,s,i,n,l,o,a){this.loginService=e,this.http=t,this.configuration=s,this.session=i,this.toast=n,this.broadcast=l,this.sanitizer=o,this.changeDetectorRef=a,this.session.loadFromStorage(),this.session.authData.sessionId?(this.loginService.tokenObject={access_token:this.session.authData.sessionId},this.loginService.oauthIssuer="SpiceCRM",this.loginService.login(!1).subscribe({next:()=>{this.broadcast.broadcastMessage("login")},error:e=>{this.handleError(e),this.loginService.tokenObject=null,this.loginService.oauthIssuer=null,this.promptUser=!0}})):this.promptUser=!0}get showSidebar(){return!1!==this.configuration.data.displayloginsidebar&&window.innerWidth>=1024}get showExternalSidebar(){try{let e=!_.isEmpty(this.configuration.data.loginSidebarUrl);return e&&null===this.externalSidebarUrl&&(this.externalSidebarUrl=this.sanitizer.bypassSecurityTrustResourceUrl(this.configuration.data.loginSidebarUrl)),e}catch(e){return!1}}get showNewsfeed(){try{return!!this.configuration.initialized&&_.isEmpty(this.configuration.data.loginSidebarUrl)}catch(e){return!1}}get showProgressBar(){return this.configuration.data.loginProgressBar}get loginLabels(){return this.configuration.data.languages?.required_labels??{}}handleResize(){this.changeDetectorRef.detectChanges()}login(e){(e||this.username&&this.password)&&(this.messageId&&this.toast.clearToast(this.messageId),this.toast.clearAll(),this.loggingIn=!0,e?(this.loginService.authData.userName=null,this.loginService.authData.password=null,this.loginService.tokenObject=e.tokenObject,this.loginService.oauthIssuer=e.issuer):(this.loginService.authData.code2fa=this.code2fa,this.loginService.authData.userName=this.username,this.loginService.authData.password=this.password,this.loginService.authData.rememberMe=this.rememberMe,this.loginService.tokenObject=null,this.loginService.oauthIssuer=null),this.loginService.login().subscribe({next:()=>{this.toast.clearAll(),this.loggingIn=!1},error:e=>{this.handleError(e),this.loggingIn=!1}}))}showForgotPassword(){this.showForgotPass=!this.showForgotPass}handleRenewDialogClose(e){this.renewPassword=this.generateTOTP=!1,e&&(this.password=e,this.login())}handleError(e){switch(e.errorCode){case 1:this.messageId=this.toast.sendToast("error logging on with username and password","error");break;case 2:this.labels=e.details?.labels,this.renewPassword=!0,this.generateTOTP=!1;break;case 3:this.messageId=this.toast.sendToast("invalid token","error");break;case 4:this.messageId=this.toast.sendToast(e.message,"success"),this.twoFactorAuthCodeRequired=!0,setTimeout((()=>{this.twofactorinput&&this.twofactorinput.element.nativeElement.focus()}));break;case 12:this.labels=e.details?.labels,this.renewPassword=!1,this.generateTOTP=!0;break;default:this.messageId=this.toast.sendToast("error logging on","error",e.message)}this.session.endSession()}static ɵfac=function(e){return new(e||GlobalLogin)(i.Y36(n.j),i.Y36(l.eN),i.Y36(o.C),i.Y36(a.n),i.Y36(d.A),i.Y36(r.f),i.Y36(c.H7),i.Y36(i.sBO))};static ɵcmp=i.Xpm({type:GlobalLogin,selectors:[["global-login"]],viewQuery:function(e,t){if(1&e&&i.Gf(k,5,i.s_b),2&e){let e;i.iGM(e=i.CRH())&&(t.twofactorinput=e.first)}},hostBindings:function(e,t){1&e&&i.NdJ("resize",(function(){return t.handleResize()}),!1,i.Jf7)},decls:2,vars:2,consts:[["class","slds-size--1-of-1",4,"ngIf"],["class","slds-grid slds-wrap slds-is-absolute slds-size--1-of-1 slds-theme--default","style","height:100vh; top: 0px;",4,"ngIf"],[1,"slds-size--1-of-1"],[1,"slds-grid","slds-wrap","slds-is-absolute","slds-size--1-of-1","slds-theme--default",2,"height","100vh","top","0px"],[1,"slds-align--absolute-center","slds-size--1-of-1","slds-large-size--1-of-2"],[1,"slds-size--1-of-1","slds-medium-size--2-of-3","slds-p-around--medium",2,"max-width","500px"],[1,"slds-align--absolute-center","slds-p-vertical--medium"],["class","slds-box--border slds-theme--shade",3,"system-overlay-loading-spinner",4,"ngIf"],["class","slds-is-absolute",3,"case","username","password","labels","closeDialog",4,"ngIf"],[4,"ngIf"],[1,"slds-is-absolute",2,"bottom","10px"],["class","slds-size--1-of-1 slds-large-size--1-of-2 slds-height_full",3,"slds-scrollable--y",4,"ngIf"],[1,"slds-box--border","slds-theme--shade",3,"system-overlay-loading-spinner"],[1,"slds-p-around--medium",3,"system-overlay-loading-spinner"],[3,"submit",4,"ngIf"],["class","slds-p-vertical--x-small slds-grid slds-grid--align-spread slds-grid_vertical-align-center",4,"ngIf"],["class","slds-col",3,"close",4,"ngIf"],[3,"submit"],[1,"slds-form-element","slds-m-vertical--small"],[1,"slds-form-element__control","slds-input-has-icon","slds-input-has-icon_left"],["icon","user","addclasses","slds-input__icon slds-icon-text-default"],["type","text","name","username","autocomplete","","tabindex","1",1,"slds-input","slds-p-vertical--xx-small",3,"disabled","ngModel","placeholder","ngModelChange"],["icon","lock","addclasses","slds-icon slds-input__icon slds-input__icon_left slds-icon-text-default"],["type","password","name","password","autocomplete","","tabindex","2",1,"slds-input","slds-p-vertical--xx-small",3,"disabled","ngModel","placeholder","ngModelChange"],["class","slds-form-element slds-m-vertical--small slds-grid slds-grid--vertical-align-center",4,"ngIf"],[1,"slds-m-bottom--small"],["name","remember-me",3,"ngModel","label","ngModelChange"],["type","submit","value","Submit","tabindex","0",1,"slds-button","slds-button--brand","slds-button_stretch",3,"disabled"],[1,"slds-p-top--small"],[1,"slds-size--1-of-1",3,"token"],[1,"slds-form-element","slds-m-vertical--small","slds-grid","slds-grid--vertical-align-center"],[1,"slds-form-element__control","slds-input-has-icon","slds-input-has-icon_left","slds-grow"],["icon","scan","addclasses","slds-icon slds-input__icon slds-input__icon_left slds-icon-text-default"],["type","text","name","code2fa","autocomplete","off","tabindex","2",1,"slds-input","slds-p-vertical--xx-small",3,"disabled","ngModel","placeholder","ngModelChange"],["twofactorinput",""],[1,"slds-p-vertical--x-small","slds-grid","slds-grid--align-spread","slds-grid_vertical-align-center"],["title","Forgot password",1,"slds-truncate","slds-text-body_small"],[1,"slds-button",3,"disabled","click"],[3,"icon","size",4,"ngIf"],[3,"icon","size"],[1,"slds-col",3,"close"],[1,"slds-is-absolute",3,"case","username","password","labels","closeDialog"],[1,"slds-size--1-of-1","slds-large-size--1-of-2","slds-height_full"],["style","border:none;width:100%;height:100%",3,"src",4,"ngIf"],[2,"border","none","width","100%","height","100%",3,"src"]],template:function(e,t){1&e&&(i.YNc(0,A,1,0,"global-login-loading",0),i.YNc(1,U,11,4,"div",1)),2&e&&(i.Q6J("ngIf",!t.configuration.initialized),i.xp6(1),i.Q6J("ngIf",t.configuration.initialized))},dependencies:[u.O5,m._Y,m.Fj,m.JJ,m.JL,m.On,m.F,g._,h.J,p.v,f.e,b.r,v.M,y.T,x.N,w.X,Z.r,T.p,C.Q],encapsulation:2})}return GlobalLogin})()},48764:(e,t,s)=>{"use strict";s.d(t,{X:()=>M});var i=s(62242),n=s(3144),l=s(95698),o=s(50727),a=s(64461),d=s(26625),r=s(13278),c=s(75920),u=s(55329),m=s(44755),g=s(95030),h=s(54021),p=s(72656),f=s(57919);function b(e,t){if(1&e&&(i.TgZ(0,"h2",16),i._uU(1),i.qZA()),2&e){const e=i.oxw();i.xp6(1),i.Oqu(e.getLabel("LBL_CHANGE_PASSWORD"))}}function _(e,t){if(1&e&&(i.TgZ(0,"h2",16),i._uU(1),i.qZA()),2&e){const e=i.oxw();i.xp6(1),i.Oqu(e.getLabel("LBL_TOTP_AUTHENTICATION"))}}function v(e,t){if(1&e&&(i.TgZ(0,"div",23),i._uU(1),i._UZ(2,"br"),i._uU(3),i.qZA()),2&e){const e=i.oxw(2);i.xp6(1),i.hij(" ",e.getLabel("LBL_PWD_GUIDELINE"),":"),i.xp6(2),i.hij("",e.pwdGuideline," ")}}function y(e,t){if(1&e&&(i.TgZ(0,"div",24),i._uU(1),i.qZA()),2&e){const e=i.oxw(2);i.xp6(1),i.Oqu(e.pwderror)}}function x(e,t){if(1&e&&(i.TgZ(0,"div",24),i._uU(1),i.qZA()),2&e){const e=i.oxw(2);i.xp6(1),i.Oqu(e.oldPwError)}}function w(e,t){if(1&e&&(i.TgZ(0,"div",24),i._uU(1),i.qZA()),2&e){const e=i.oxw(2);i.xp6(1),i.Oqu(e.pwdreperror)}}const Z=function(e){return{"slds-has-error":e}};function T(e,t){if(1&e){const e=i.EpF();i.ynx(0),i.YNc(1,v,4,2,"div",17),i.TgZ(2,"div",18)(3,"label",19),i._uU(4),i.qZA(),i.TgZ(5,"system-input-password",20),i.NdJ("ngModelChange",(function(t){i.CHM(e);const s=i.oxw();return i.KtG(s.newPassword=t)})),i.qZA(),i.YNc(6,y,2,1,"div",21),i.YNc(7,x,2,1,"div",21),i.qZA(),i.TgZ(8,"div",22)(9,"label",19),i._uU(10),i.qZA(),i.TgZ(11,"system-input-password",20),i.NdJ("ngModelChange",(function(t){i.CHM(e);const s=i.oxw();return i.KtG(s.repeatPassword=t)})),i.qZA(),i.YNc(12,w,2,1,"div",21),i.qZA(),i.BQk()}if(2&e){const e=i.oxw();i.xp6(1),i.Q6J("ngIf",e.pwdGuideline),i.xp6(1),i.Q6J("ngClass",i.VKq(10,Z,e.pwderror||e.oldPwError)),i.xp6(2),i.Oqu(e.getLabel("LBL_NEW_PWD")),i.xp6(1),i.Q6J("ngModel",e.newPassword),i.xp6(1),i.Q6J("ngIf",""!=e.newPassword&&e.pwderror),i.xp6(1),i.Q6J("ngIf",""!=e.newPassword&&e.oldPwError),i.xp6(1),i.Q6J("ngClass",i.VKq(12,Z,e.pwdreperror)),i.xp6(2),i.Oqu(e.getLabel("LBL_NEW_PWD_REPEATED")),i.xp6(1),i.Q6J("ngModel",e.repeatPassword),i.xp6(1),i.Q6J("ngIf",""!=e.repeatPassword&&e.pwdreperror)}}function C(e,t){if(1&e&&i._UZ(0,"img",31),2&e){const e=i.oxw(2);i.Q6J("src",e.totpQRCode,i.LSH)}}function k(e,t){if(1&e&&(i.TgZ(0,"div",25)(1,"div",26),i._uU(2),i.qZA(),i.TgZ(3,"div",27)(4,"div",28),i._uU(5),i.qZA(),i.YNc(6,C,1,1,"img",29),i.TgZ(7,"div",30),i._uU(8),i.qZA()()()),2&e){const e=i.oxw();i.xp6(2),i.Oqu(e.getLabel("MSG_AUTHENTICATOR_INSTRUCTIONS","long")),i.xp6(3),i.Oqu(e.totpName),i.xp6(1),i.Q6J("ngIf",e.totpQRCode),i.xp6(2),i.Oqu(e.secret)}}function A(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"div",25),i._uU(1),i.TgZ(2,"input",32),i.NdJ("ngModelChange",(function(t){i.CHM(e);const s=i.oxw();return i.KtG(s.totpCode=t)})),i.qZA()()}if(2&e){const e=i.oxw();i.xp6(1),i.hij(" ",e.getLabel("LBL_CODE")," "),i.xp6(1),i.Q6J("ngModel",e.totpCode)}}function L(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"button",34),i.NdJ("click",(function(){i.CHM(e);const t=i.oxw(2);return i.KtG(t.setPassword())})),i._uU(1),i.qZA()}if(2&e){const e=i.oxw(2);i.Q6J("disabled",!e.canSavePwd),i.xp6(1),i.Oqu(e.getLabel("LBL_SET_PASSWORD"))}}function I(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"button",34),i.NdJ("click",(function(){i.CHM(e);const t=i.oxw(2);return i.KtG(t.saveTOTP())})),i._uU(1),i.qZA()}if(2&e){const e=i.oxw(2);i.Q6J("disabled",!e.canSaveTOTP),i.xp6(1),i.Oqu(e.getLabel("LBL_SAVE"))}}function S(e,t){if(1&e&&(i.ynx(0),i.YNc(1,L,2,2,"button",33),i.YNc(2,I,2,2,"button",33),i.BQk()),2&e){const e=i.oxw();i.xp6(1),i.Q6J("ngIf","pwd"===e.case),i.xp6(1),i.Q6J("ngIf","totp"===e.case)}}let M=(()=>{class GlobalLoginChangePassword{loginService;http;configuration;toast;session;language;case;password;username;closeDialog=new i.vpe;newPassword;repeatPassword;pwdCheck=new RegExp("//");pwdGuideline;isPosting=!1;totpQRCode;secret;totpName;totpCode="";labels;isLoading=!1;toastErrorID;subscriptions=new o.w0;constructor(e,t,s,i,n,l){this.loginService=e,this.http=t,this.configuration=s,this.toast=i,this.session=n,this.language=l}ngOnInit(){if("totp"===this.case){this.isLoading=!0;let e=new n.WM;e=e.set("Accept","application/json"),this.subscriptions.add(this.http.post(this.configuration.getBackendUrl()+"/authentication/totp/generate",{username:this.username,password:this.password},{headers:e}).pipe((0,l.q)(1)).subscribe({next:e=>{e.secret?(this.totpQRCode="data:image/png;base64,"+e.qrcode,this.secret=e.secret,this.totpName=e.name):(this.toast.sendToast("Error generating Code","error"),this.close()),this.isLoading=!1},error:()=>{this.toast.sendToast("Error generating Code","error"),this.close(),this.isLoading=!1}}))}else this.buildGuidelineText()}get oldPwError(){return this.password==this.newPassword&&this.getLabel("MSG_OLD_PWD_NOT_AS_NEW")}get pwderror(){return!(!this.newPassword||this.pwdCheck.test(this.newPassword))&&this.getLabel("MSG_PWD_NOT_LEGAL")}get pwdreperror(){return this.newPassword!=this.repeatPassword&&this.getLabel("MSG_PWDS_DONT_MATCH")}close(e){this.closeDialog.emit(e)}buildGuidelineText(){let e=this.configuration.getCapabilityConfig("userpassword");this.pwdCheck=new RegExp(e.regex);let t=[];e.onelower&&t.push(this.getLabel("LBL_ONE_LOWERCASE")),e.oneupper&&t.push(this.getLabel("LBL_ONE_UPPERCASE")),e.onenumber&&t.push(this.getLabel("LBL_ONE_DIGIT")),e.onespecial&&t.push(this.getLabel("LBL_ONE_SPECIALCHAR")),e.minpwdlength&&t.push(this.getLabel("LBL_MIN_LENGTH")+" "+e.minpwdlength),this.pwdGuideline=t.join(", ")}get canSavePwd(){return this.newPassword&&0==this.oldPwError&&0==this.pwderror&&0==this.pwdreperror&&!this.isPosting}get canSaveTOTP(){return!this.isPosting&&6===this.totpCode.length}setPassword(){this.canSavePwd&&(this.isPosting=!0,this.subscriptions.add(this.http.post(this.configuration.getBackendUrl()+"/authentication/changepassword",{username:this.username,password:this.password,newPassword:this.newPassword}).pipe((0,l.q)(1)).subscribe({next:e=>{this.toast.sendToast(this.getLabel("MSG_PWD_CHANGED_SUCCESSFULLY"),"success","",5),this.close(this.newPassword)},error:e=>{this.isPosting=!1}})))}saveTOTP(){let e=new n.WM;this.toastErrorID&&(this.toast.clearToast(this.toastErrorID),this.toastErrorID=null),this.isPosting=!0,this.subscriptions.add(this.http.put(this.configuration.getBackendUrl()+`/authentication/totp/validate/${this.totpCode}`,{username:this.username,password:this.password},{headers:e}).pipe((0,l.q)(1)).subscribe({next:e=>{this.isPosting=!1,e.validated?this.close():this.toastErrorID=this.toast.sendToast("Error validating your code","error","The code you entered is not valid, please try again. If you entered the code correctly, make sure your computer's time is set correctly.",!1,"asdfasdf"),this.totpCode=""},error:()=>{this.isPosting=!1,this.toastErrorID=this.toast.sendToast("Error validating your code","error","There as an internal error validating your request.",!1),this.totpCode=""}}))}getLabel(e,t="default"){return this.labels&&this.labels[e]&&this.labels[e][t]?this.labels[e][t]:e}ngOnDestroy(){this.subscriptions.unsubscribe()}static ɵfac=function(e){return new(e||GlobalLoginChangePassword)(i.Y36(a.j),i.Y36(n.eN),i.Y36(d.C),i.Y36(r.A),i.Y36(c.n),i.Y36(u.d))};static ɵcmp=i.Xpm({type:GlobalLoginChangePassword,selectors:[["global-login-change-password"]],inputs:{case:"case",password:"password",username:"username",labels:"labels"},outputs:{closeDialog:"closeDialog"},decls:21,vars:9,consts:[[2,"height","640px"],["role","dialog","tabindex","-1",1,"slds-modal","slds-fade-in-open"],[1,"slds-modal__container"],[1,"slds-modal__header"],["title","Close",1,"slds-button","slds-button_icon","slds-modal__close","slds-button_icon-inverse",3,"click"],[3,"icon"],[1,"slds-assistive-text"],["class","slds-text-heading_medium slds-hyphenate",4,"ngIf"],[1,"slds-modal__content","slds-p-around_medium",2,"min-height","150px",3,"system-overlay-loading-spinner"],[4,"ngIf"],["class","slds-grid slds-grid--vertical-align-center",4,"ngIf"],[1,"slds-modal__footer"],[1,"slds-grid","slds-grid--vertical-align-center","slds-grid--align-spread"],[1,"slds-grid","slds-col--bump-left"],[1,"slds-button","slds-button--neutral",3,"click"],[1,"slds-backdrop","slds-backdrop_open"],[1,"slds-text-heading_medium","slds-hyphenate"],["class","slds-m-top--xx-small",4,"ngIf"],[1,"slds-form-element","slds-m-vertical--small",3,"ngClass"],[1,"slds-form-element__label"],[3,"ngModel","ngModelChange"],["class","slds-form-element__help slds-text-color--error",4,"ngIf"],[1,"slds-form-element","slds-m-bottom--x-small",3,"ngClass"],[1,"slds-m-top--xx-small"],[1,"slds-form-element__help","slds-text-color--error"],[1,"slds-grid","slds-grid--vertical-align-center"],[1,"slds-size--1-of-2"],[1,"slds-size--1-of-2","slds-align--absolute-center","slds-grid","slds-grid--vertical"],[1,"slds-p-bottom--small"],["style","width: 200px; height: 200px;",3,"src",4,"ngIf"],[1,"slds-p-top--small"],[2,"width","200px","height","200px",3,"src"],["maxlength","6",1,"slds-m-left--x-small","slds-input",2,"width","6rem",3,"ngModel","ngModelChange"],["class","slds-button slds-button--brand","tabindex","3",3,"disabled","click",4,"ngIf"],["tabindex","3",1,"slds-button","slds-button--brand",3,"disabled","click"]],template:function(e,t){1&e&&(i.TgZ(0,"div",0)(1,"section",1)(2,"div",2)(3,"header",3)(4,"button",4),i.NdJ("click",(function(){return t.close()})),i._UZ(5,"system-button-icon",5),i.TgZ(6,"span",6),i._uU(7,"Close"),i.qZA()(),i.YNc(8,b,2,1,"h2",7),i.YNc(9,_,2,1,"h2",7),i.qZA(),i.TgZ(10,"div",8),i.YNc(11,T,13,14,"ng-container",9),i.YNc(12,k,9,4,"div",10),i.qZA(),i.TgZ(13,"footer",11)(14,"div",12),i.YNc(15,A,3,2,"div",10),i.TgZ(16,"div",13)(17,"button",14),i.NdJ("click",(function(){return t.close()})),i._uU(18),i.qZA(),i.YNc(19,S,3,2,"ng-container",9),i.qZA()()()()(),i._UZ(20,"div",15),i.qZA()),2&e&&(i.xp6(5),i.Q6J("icon","close"),i.xp6(3),i.Q6J("ngIf","pwd"===t.case),i.xp6(1),i.Q6J("ngIf","totp"===t.case),i.xp6(1),i.Q6J("system-overlay-loading-spinner",t.isLoading),i.xp6(1),i.Q6J("ngIf","pwd"===t.case),i.xp6(1),i.Q6J("ngIf","totp"===t.case&&!t.isLoading),i.xp6(3),i.Q6J("ngIf","totp"===t.case&&!t.isLoading),i.xp6(3),i.Oqu(t.getLabel("LBL_CANCEL")),i.xp6(1),i.Q6J("ngIf",!t.isLoading))},dependencies:[m.mk,m.O5,g.Fj,g.JJ,g.nD,g.On,h._,p.J,f.Z],encapsulation:2})}return GlobalLoginChangePassword})()},30314:(e,t,s)=>{"use strict";s.d(t,{r:()=>b});var i=s(62242),n=s(3144),l=s(26625),o=s(13278),a=s(44755),d=s(95030),r=s(54021),c=s(78859);function u(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"div",1)(1,"div",2)(2,"div",3),i._UZ(3,"system-utility-icon",4),i.TgZ(4,"input",5),i.NdJ("ngModelChange",(function(t){i.CHM(e);const s=i.oxw();return i.KtG(s.emailOrUsername=t)})),i.qZA()()(),i.TgZ(5,"button",6),i.NdJ("click",(function(){i.CHM(e);const t=i.oxw();return i.KtG(t.sendEmail())})),i._uU(6,"Send"),i.qZA()()}if(2&e){const e=i.oxw();i.Q6J("system-overlay-loading-spinner",e.sending),i.xp6(3),i.Q6J("icon","email")("addclasses","slds-input__icon slds-icon-text-default"),i.xp6(1),i.Q6J("disabled",e.sending)("ngModel",e.emailOrUsername),i.xp6(1),i.Q6J("disabled",!e.emailOrUsernameValid||e.sending)}}function m(e,t){if(1&e&&(i.TgZ(0,"div",14),i._uU(1," Password Guideline:"),i._UZ(2,"br"),i._uU(3),i.qZA()),2&e){const e=i.oxw(2);i.xp6(3),i.hij(" ",e.pwdGuideline," ")}}function g(e,t){if(1&e&&(i.TgZ(0,"div",15),i._uU(1),i.qZA()),2&e){const e=i.oxw(2);i.xp6(1),i.Oqu(e.pwderror)}}function h(e,t){if(1&e&&(i.TgZ(0,"div",15),i._uU(1),i.qZA()),2&e){const e=i.oxw(2);i.xp6(1),i.Oqu(e.pwdreperror)}}const p=function(e){return{"slds-has-error":e}};function f(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"div",1)(1,"form",7)(2,"div",2)(3,"div",3),i._UZ(4,"system-utility-icon",4),i.TgZ(5,"input",8),i.NdJ("ngModelChange",(function(t){i.CHM(e);const s=i.oxw();return i.KtG(s.token=t)})),i.qZA()()(),i.YNc(6,m,4,1,"div",9),i.qZA(),i.TgZ(7,"form",7)(8,"div",10)(9,"div",3),i._UZ(10,"system-utility-icon",4),i.TgZ(11,"input",11),i.NdJ("ngModelChange",(function(t){i.CHM(e);const s=i.oxw();return i.KtG(s.password=t)})),i.qZA()(),i.YNc(12,g,2,1,"div",12),i.qZA(),i.TgZ(13,"div",10)(14,"div",3),i._UZ(15,"system-utility-icon",4),i.TgZ(16,"input",13),i.NdJ("ngModelChange",(function(t){i.CHM(e);const s=i.oxw();return i.KtG(s.repeatPassword=t)})),i.qZA()(),i.YNc(17,h,2,1,"div",12),i.qZA(),i.TgZ(18,"button",6),i.NdJ("click",(function(){i.CHM(e);const t=i.oxw();return i.KtG(t.resetPassword())})),i._uU(19,"Reset Password"),i.qZA()()()}if(2&e){const e=i.oxw();i.Q6J("system-overlay-loading-spinner",e.sending),i.xp6(4),i.Q6J("icon","shield")("addclasses","slds-input__icon slds-icon-text-default"),i.xp6(1),i.Q6J("disabled",e.sending)("ngModel",e.token),i.xp6(1),i.Q6J("ngIf",e.pwdGuideline),i.xp6(2),i.Q6J("ngClass",i.VKq(19,p,e.pwderror)),i.xp6(2),i.Q6J("icon","lock")("addclasses","slds-input__icon slds-icon-text-default"),i.xp6(1),i.Q6J("disabled",e.sending)("ngModel",e.password),i.xp6(1),i.Q6J("ngIf",e.password&&e.pwderror),i.xp6(1),i.Q6J("ngClass",i.VKq(21,p,e.pwdreperror)),i.xp6(2),i.Q6J("icon","lock")("addclasses","slds-input__icon slds-icon-text-default"),i.xp6(1),i.Q6J("disabled",e.sending)("ngModel",e.repeatPassword),i.xp6(1),i.Q6J("ngIf",e.repeatPassword&&e.pwdreperror),i.xp6(1),i.Q6J("disabled",!e.canSendToken||e.sending)}}let b=(()=>{class GlobalLoginForgotPassword{http;configuration;toast;emailOrUsername="";token="";password=void 0;repeatPassword=void 0;pwdCheck=new RegExp("//");pwdGuideline;tokenLength=6;sending=!1;display="email";close=new i.vpe;activeToast;constructor(e,t,s){this.http=e,this.configuration=t,this.toast=s,this.getInfo()}getInfo(){let e=this.configuration.getCapabilityConfig("userpassword");this.pwdCheck=new RegExp(e.regex);let t=[];e.onelower&&t.push("one lower case"),e.oneupper&&t.push("one upper case"),e.onenumber&&t.push("one number"),e.onespecial&&t.push("one special"),e.minpwdlength&&(t.push("minimum length "+e.minpwdlength),this.tokenLength=parseInt(e.minpwdlength,10)),this.pwdGuideline=t.join(", ")}get pwderror(){return!(!this.password||this.pwdCheck.test(this.password))&&"Password does not match the Guideline."}get pwdreperror(){return this.password!=this.repeatPassword&&"Inputs for the new Password does not match."}get emailOrUsernameValid(){return this.emailOrUsername&&this.emailOrUsername.length>0}sendEmail(){this.emailOrUsernameValid&&(this.activeToast&&this.toast.clearToast(this.activeToast),this.sending=!0,this.http.get(this.configuration.getBackendUrl()+`/authentication/passwordtoken/email/${this.emailOrUsername}`).subscribe((e=>{this.display="token",this.toast.sendToast("Successfully sent, check your inbox to get the token code","success"),this.sending=!1}),(e=>{this.activeToast=this.toast.sendToast("There was an error sending the token.","error","Please verify that the mail address or user name is correct - or contact a system administrator."),this.sending=!1})))}get canSendToken(){return this.token.length==this.tokenLength&&this.password&&!this.pwderror&&!this.pwdreperror}resetPassword(){this.canSendToken&&(this.activeToast&&this.toast.clearToast(this.activeToast),this.sending=!0,this.http.post(this.configuration.getBackendUrl()+`/authentication/passwordtoken/token/${this.token}`,{newPassword:this.password}).subscribe((e=>{this.close.emit(!0),this.sending=!1}),(e=>{this.activeToast=this.toast.sendToast("there was an error resetting your password","error","please contact a system administrator"),this.sending=!1})))}static ɵfac=function(e){return new(e||GlobalLoginForgotPassword)(i.Y36(n.eN),i.Y36(l.C),i.Y36(o.A))};static ɵcmp=i.Xpm({type:GlobalLoginForgotPassword,selectors:[["global-login-forgot-password"]],outputs:{close:"close"},decls:2,vars:2,consts:[[3,"system-overlay-loading-spinner",4,"ngIf"],[3,"system-overlay-loading-spinner"],[1,"slds-form-element","slds-m-vertical--small"],[1,"slds-form-element__control","slds-input-has-icon","slds-input-has-icon--left"],[3,"icon","addclasses"],["type","email","placeholder","Email address of your user account or your user name",1,"slds-input","slds-p-vertical--xx-small",3,"disabled","ngModel","ngModelChange"],[1,"slds-button","slds-button--brand","slds-button_stretch",3,"disabled","click"],["autocomplete","off"],["type","text","name","token","placeholder","Token that was sent via email",1,"slds-input","slds-p-vertical--xx-small",3,"disabled","ngModel","ngModelChange"],["class","slds-m-vertical--medium",4,"ngIf"],[1,"slds-form-element","slds-m-vertical--small",3,"ngClass"],["type","password","name","password","placeholder","enter new password",1,"slds-input","slds-p-vertical--xx-small",3,"disabled","ngModel","ngModelChange"],["class","slds-form-element__help slds-text-color--error",4,"ngIf"],["type","password","name","resetPassword","placeholder","repeat new password",1,"slds-input","slds-p-vertical--xx-small",3,"disabled","ngModel","ngModelChange"],[1,"slds-m-vertical--medium"],[1,"slds-form-element__help","slds-text-color--error"]],template:function(e,t){1&e&&(i.YNc(0,u,7,6,"div",0),i.YNc(1,f,20,23,"div",0)),2&e&&(i.Q6J("ngIf","email"==t.display),i.xp6(1),i.Q6J("ngIf","token"==t.display))},dependencies:[a.mk,a.O5,d._Y,d.Fj,d.JJ,d.JL,d.On,d.F,r._,c.r],encapsulation:2})}return GlobalLoginForgotPassword})()},74142:(e,t,s)=>{"use strict";s.d(t,{p:()=>a});var i=s(50727),n=s(62242),l=s(66550),o=s(26625);let a=(()=>{class GlobalLoginImage{sanitizer;configuration;cdRef;defaultImageUrl="config/loginimage";imageUrl=this.defaultImageUrl;subscriptions=new i.w0;constructor(e,t,s){this.sanitizer=e,this.configuration=t,this.cdRef=s}ngAfterViewInit(){this.configuration.hasCapabilityConfig("theme")&&this.setImageUrl(),this.subscriptions.add(this.configuration.loaded$.subscribe((e=>{e&&this.setImageUrl()})))}ngOnDestroy(){this.subscriptions.unsubscribe()}setImageUrl(){this.configuration.getAsset("loginimage")?this.imageUrl=this.sanitizer.bypassSecurityTrustResourceUrl(this.configuration.getAsset("loginimage")):this.configuration.getCapabilityConfig("theme").login_image?this.imageUrl=this.sanitizer.bypassSecurityTrustResourceUrl("data:"+this.configuration.getCapabilityConfig("theme").login_image):this.imageUrl=this.defaultImageUrl,this.cdRef.detectChanges()}static ɵfac=function(e){return new(e||GlobalLoginImage)(n.Y36(l.H7),n.Y36(o.C),n.Y36(n.sBO))};static ɵcmp=n.Xpm({type:GlobalLoginImage,selectors:[["global-login-image"]],decls:1,vars:1,consts:[[2,"max-height","25vh",3,"src"]],template:function(e,t){1&e&&n._UZ(0,"img",0),2&e&&n.Q6J("src",t.imageUrl,n.LSH)},encapsulation:2})}return GlobalLoginImage})()},53981:(e,t,s)=>{"use strict";s.d(t,{N:()=>l});var i=s(62242),n=s(91977);let l=(()=>{class GlobalLoginLoading{static ɵfac=function(e){return new(e||GlobalLoginLoading)};static ɵcmp=i.Xpm({type:GlobalLoginLoading,selectors:[["global-login-loading"]],decls:15,vars:0,consts:[[1,"slds-align--absolute-center","slds-size--1-of-1","slds-theme--default",2,"height","100vh"],[1,"slds-grid--vertical"],[1,"slds-text-align_center","slds-is-relative","slds-p-around--medium",2,"height","400px"],[1,"slds-p-around--small","slds-align--absolute-center","loader-logo-image"],["width","100%","height","auto","src","./config/loginimage"],[1,"loaderspinner"],["height","400","width","400",1,"bag"],["cx","200","cy","200","r","100","stroke-width","5","fill","none"],["height","400","width","400",1,"over"],["cx","200","cy","200","r","100","stroke-width","6","fill","none"],["id","loadstatus",1,"slds-text-align_center","slds-is-relative","slds-p-around--medium",2,"margin-top","-80px"],["id","loadermessage",1,"slds-text-align_center","slds-is-relative","slds-p-around--medium","slds-text-heading--medium","slds-text-color--error"],[1,"slds-is-absolute",2,"bottom","10px"]],template:function(e,t){1&e&&(i.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),i._UZ(4,"img",4),i.qZA(),i.TgZ(5,"div",5),i.O4$(),i.TgZ(6,"svg",6),i._UZ(7,"circle",7),i.qZA(),i.TgZ(8,"svg",8),i._UZ(9,"circle",9),i.qZA()()(),i.kcU(),i.TgZ(10,"div",10),i._uU(11,"...connecting..."),i.qZA(),i._UZ(12,"div",11),i.qZA(),i.TgZ(13,"div",12),i._UZ(14,"global-copyright"),i.qZA()())},dependencies:[n.M],encapsulation:2})}return GlobalLoginLoading})()},64481:(e,t,s)=>{"use strict";s.d(t,{Q:()=>r});var i=s(62242),n=s(50727),l=s(26625),o=s(33369),a=s(64461);function d(e,t){if(1&e&&i._UZ(0,"global-login-oauth2-button",1),2&e){const e=t.$implicit,s=i.oxw();i.Q6J("service",e)("authenticatedUser",s.authenticatedUser)}}let r=(()=>{class GlobalLoginOAuth2{configuration;broadcast;loginService;authenticatedUser;services=[];subscription=new n.w0;token=new i.vpe;constructor(e,t,s){this.configuration=e,this.broadcast=t,this.loginService=s,this.subscribeToBroadcast()}set setSingleIssuer(e){e&&(this.services=[this.services.find((t=>e==t.issuer))])}ngOnDestroy(){this.subscription.unsubscribe()}loadServices(){const e=this.configuration.getCapabilityConfig("oauth2");Array.isArray(e)&&(this.services=e.map((e=>{const t={...e};return t.config=JSON.parse(t.config),t})))}subscribeToBroadcast(){this.subscription.add(this.configuration.loaded$.subscribe((e=>{e&&this.loadServices()})))}static ɵfac=function(e){return new(e||GlobalLoginOAuth2)(i.Y36(l.C),i.Y36(o.f),i.Y36(a.j))};static ɵcmp=i.Xpm({type:GlobalLoginOAuth2,selectors:[["global-login-oauth2"]],inputs:{authenticatedUser:"authenticatedUser",setSingleIssuer:["issuer","setSingleIssuer"]},outputs:{token:"token"},decls:1,vars:1,consts:[[3,"service","authenticatedUser",4,"ngFor","ngForOf"],[3,"service","authenticatedUser"]],template:function(e,t){1&e&&i.YNc(0,d,1,2,"global-login-oauth2-button",0),2&e&&i.Q6J("ngForOf",t.services)},encapsulation:2})}return GlobalLoginOAuth2})()},94365:(e,t,s)=>{"use strict";s.d(t,{q:()=>a});var i=s(62242),n=s(4154),l=s(66119),o=s(70909);let a=(()=>{class GlobalNavigation{metadata;constructor(e){this.metadata=e}static ɵfac=function(e){return new(e||GlobalNavigation)(i.Y36(n.Pu))};static ɵcmp=i.Xpm({type:GlobalNavigation,selectors:[["global-navigation"]],decls:3,vars:0,consts:[[1,"slds-context-bar"],["role","navigation",1,"slds-context-bar__secondary"]],template:function(e,t){1&e&&(i.TgZ(0,"div",0),i._UZ(1,"global-app-launcher")(2,"global-navigation-menu",1),i.qZA())},dependencies:[l.i,o.Q],encapsulation:2})}return GlobalNavigation})()},22954:(e,t,s)=>{"use strict";s.d(t,{n:()=>I});var i=s(62242),n=s(55710),l=s(50727),o=s(95698),a=s(4154),d=s(55329),r=s(64461),c=s(82032),u=s(64376),m=s(10382),g=s(75920),h=s(44044),p=s(33369),f=s(83348),b=s(44755),_=s(95030),v=s(72656),y=s(44561),x=s(93333),w=s(78859);const Z=["containermiddle"],T=["containerbottom"],C=["menucontainer"];function k(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"div",33)(1,"div",34),i._UZ(2,"system-icon",35),i.TgZ(3,"a",36)(4,"span",37),i._UZ(5,"system-label-modulename",38),i.qZA()()(),i.TgZ(6,"ul",39),i.NdJ("click",(function(){i.CHM(e);const t=i.oxw();return i.KtG(t.closeMenu())})),i.GkF(7,null,40),i.qZA()()}if(2&e){const e=i.oxw();i.xp6(2),i.Q6J("module",e.activeItem),i.xp6(3),i.Q6J("module",e.activeItem)}}function A(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"div",41),i.NdJ("click",(function(){const t=i.CHM(e).$implicit,s=i.oxw();return i.KtG(s.navigateTo(t))})),i._UZ(1,"system-icon",35),i.TgZ(2,"a",36)(3,"span",42),i._UZ(4,"system-label-modulename",38),i.qZA()()()}if(2&e){const e=t.$implicit;i.xp6(1),i.Q6J("module",e),i.xp6(3),i.Q6J("module",e)}}function L(e,t){if(1&e&&(i.TgZ(0,"option",43),i._uU(1),i.qZA()),2&e){const e=t.$implicit;i.Q6J("value",e.language),i.xp6(1),i.hij(" ",e.text," ")}}let I=(()=>{class GlobalNavigationCompact{metadata;language;loginService;navigation;favorite;model;recent;session;modal;cdr;broadcast;router;containermiddle;containerbottom;menucontainer;showmenu=!1;menuitems=[];activeItem="";activeItemMenu=[];activeItemMenucomponents=[];subscriptions=new l.w0;constructor(e,t,s,i,n,l,o,a,d,r,c,u){this.metadata=e,this.language=t,this.loginService=s,this.navigation=i,this.favorite=n,this.model=l,this.recent=o,this.session=a,this.modal=d,this.cdr=r,this.broadcast=c,this.router=u,this.buildMenuItems();let m=this.navigation.activeModule$.subscribe((e=>this.buildModuleMenuItems()));this.subscriptions.add(m);let g=this.broadcast.message$.subscribe((e=>{this.handleMessage(e)}));this.subscriptions.add(g)}get activeItemIsModule(){return!!this.metadata.getModuleDefs(this.activeItem)}set currentlanguage(e){this.language.currentlanguage=e,this.language.loadLanguage()}get currentlanguage(){return this.language.currentlanguage}get menuItems(){return this.menuitems.filter((e=>e!=this.activeItem))}get activeRoleName(){let e=this.metadata.getActiveRole();return e.label&&""!=e.label?this.language.getLabel(e.label):this.metadata.getActiveRole().name}get containerMiddleStyle(){return{height:`calc(100vh - ${this.containermiddle.element.nativeElement.offsetTop+this.containerbottom.element.nativeElement.offsetHeight}px)`}}get menuStyle(){return{left:this.showmenu?"0px":"-250px","box-shadow":this.showmenu?"5px 0 15px #888":"none"}}ngAfterViewInit(){this.buildModuleMenuItems(),this.cdr.detectChanges()}handleMessage(e){switch(e.messagetype){case"applauncher.setrole":case"loader.reloaded":this.buildMenuItems()}}navigateTo(e){this.router.navigate(["/module/"+e]),this.showmenu=!1}buildMenuItems(){this.menuitems=[];let e=this.metadata.getRoleModules(!0);for(let t of e)this.menuitems.push(t)}buildModuleMenuItems(){this.activeItem=this.navigation.activeModule,this.destroyActiveItemMenu(),this.activeItemMenu=[],this.activeItemIsModule&&this.menucontainer&&(this.model.module=this.activeItem,this.activeItemMenu=this.metadata.getModuleMenu(this.activeItem),this.buildActiveItemMenu())}showAppLauncher(){this.showmenu=!1,this.modal.openModal("GlobalAppLauncherDialog")}getAvialableLanguages(){return this.language.getAvialableLanguages(!0)}toggleMenu(){this.showmenu=!this.showmenu}closeMenu(){this.showmenu=!1}logout(){this.loginService.logout()}trackByFn(e,t){return t.id}buildActiveItemMenu(){for(let e of this.activeItemMenu)switch(e.action){case"NEW":this.metadata.checkModuleAcl(this.activeItem,"create")&&this.metadata.addComponent("GlobalNavigationMenuItemNew",this.menucontainer).pipe((0,o.q)(1)).subscribe((e=>{this.activeItemMenucomponents.push(e)}));break;case"ROUTE":this.metadata.addComponent("GlobalNavigationMenuItemRoute",this.menucontainer).pipe((0,o.q)(1)).subscribe((t=>{t.instance.actionconfig=e.actionconfig,this.activeItemMenucomponents.push(t)}))}}destroyActiveItemMenu(){for(let e of this.activeItemMenucomponents)e.destroy()}ngOnDestroy(){this.subscriptions.unsubscribe(),this.destroyActiveItemMenu(),this.cdr.detach()}static ɵfac=function(e){return new(e||GlobalNavigationCompact)(i.Y36(a.Pu),i.Y36(d.d),i.Y36(r.j),i.Y36(c.G),i.Y36(u.G),i.Y36(n.o),i.Y36(m.h),i.Y36(g.n),i.Y36(h.o),i.Y36(i.sBO),i.Y36(p.f),i.Y36(f.F0))};static ɵcmp=i.Xpm({type:GlobalNavigationCompact,selectors:[["global-navigation-compact"]],viewQuery:function(e,t){if(1&e&&(i.Gf(Z,7,i.s_b),i.Gf(T,7,i.s_b),i.Gf(C,7,i.s_b)),2&e){let e;i.iGM(e=i.CRH())&&(t.containermiddle=e.first),i.iGM(e=i.CRH())&&(t.containerbottom=e.first),i.iGM(e=i.CRH())&&(t.menucontainer=e.first)}},features:[i._Bn([n.o])],decls:35,vars:10,consts:[[1,"slds-button","slds-button--icon",3,"click"],["icon","rows","size","small"],[1,"slds-is-absolute","slds-theme--shade",2,"width","250px","top","0","z-index","998","height","100vh","transition","left 1s",3,"ngStyle"],[1,"slds-grid","slds-grid--align-spread","slds-grid--vertical-align-start","slds-p-around--x-small"],[1,"slds-grid","slds-grid--vertical-align-center"],[2,"transform","scale(0.8)",3,"click"],["href","javascript:void(0);",1,"slds-icon-waffle_container"],[1,"slds-icon-waffle"],[1,"slds-r1"],[1,"slds-r2"],[1,"slds-r3"],[1,"slds-r4"],[1,"slds-r5"],[1,"slds-r6"],[1,"slds-r7"],[1,"slds-r8"],[1,"slds-r9"],[1,"slds-truncate","slds-p-left--xx-small","slds-text-heading_small"],["icon","close"],["class","slds-theme--default slds-p-vertical--x-small",4,"ngIf"],[1,"slds-grid",3,"ngStyle"],["containermiddle",""],[1,"slds-has-divider--bottom-space","slds-scrollable--y","spice-scrollbar",2,"width","100%"],["class","slds-grid slds-grid--vertical-align-center slds-p-vertical--x-small  slds-p-left--small",3,"click",4,"ngFor","ngForOf","ngForTrackBy"],[1,"slds-grid","slds-grid--vertical-align-center","slds-p-around--xx-small"],["containerbottom",""],[1,"slds-form-element","slds-grow"],[1,"slds-form-element__control"],[1,"slds-select_container"],[1,"slds-select",3,"disabled","ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[1,"slds-grid","slds-grid--align-end","slds-p-horizontal--small","slds-col--bump-left"],["icon","logout","size","x-small",3,"title","click"],[1,"slds-theme--default","slds-p-vertical--x-small"],[1,"slds-grid","slds-grid--vertical-align-center","slds-p-left--small","slds-p-vertical--xx-small"],["size","x-small","divClass","",3,"module"],["href","javascript:void(0);",1,"slds-p-left--small","slds-text-heading_small"],[1,"slds-truncate",2,"font-weight","bold"],[3,"module"],["role","menu",3,"click"],["menucontainer",""],[1,"slds-grid","slds-grid--vertical-align-center","slds-p-vertical--x-small","slds-p-left--small",3,"click"],[1,"slds-truncate"],[3,"value"]],template:function(e,t){1&e&&(i.TgZ(0,"button",0),i.NdJ("click",(function(){return t.toggleMenu()})),i._UZ(1,"system-utility-icon",1),i.qZA(),i.TgZ(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5),i.NdJ("click",(function(){return t.showAppLauncher()})),i.TgZ(6,"a",6)(7,"div",7),i._UZ(8,"div",8)(9,"div",9)(10,"div",10)(11,"div",11)(12,"div",12)(13,"div",13)(14,"div",14)(15,"div",15)(16,"div",16),i.qZA()()(),i.TgZ(17,"div",17),i._uU(18),i.qZA()(),i.TgZ(19,"button",0),i.NdJ("click",(function(){return t.closeMenu()})),i._UZ(20,"system-button-icon",18),i.qZA()(),i.YNc(21,k,9,2,"div",19),i.TgZ(22,"div",20,21)(24,"div",22),i.YNc(25,A,5,2,"div",23),i.qZA()(),i.TgZ(26,"div",24,25)(28,"div",26)(29,"div",27)(30,"div",28)(31,"select",29),i.NdJ("ngModelChange",(function(e){return t.currentlanguage=e})),i.YNc(32,L,2,2,"option",30),i.qZA()()()(),i.TgZ(33,"div",31)(34,"system-utility-icon",32),i.NdJ("click",(function(){return t.logout()})),i.qZA()()()()),2&e&&(i.xp6(2),i.Q6J("ngStyle",t.menuStyle),i.xp6(16),i.Oqu(t.activeRoleName),i.xp6(3),i.Q6J("ngIf",t.activeItemIsModule),i.xp6(1),i.Q6J("ngStyle",t.containerMiddleStyle),i.xp6(3),i.Q6J("ngForOf",t.menuItems)("ngForTrackBy",t.trackByFn),i.xp6(6),i.Q6J("disabled",t.getAvialableLanguages().length<=1)("ngModel",t.currentlanguage),i.xp6(1),i.Q6J("ngForOf",t.getAvialableLanguages()),i.xp6(2),i.Q6J("title",t.language.getLabel("LBL_LOGOFF")))},dependencies:[b.sg,b.O5,b.PC,_.YN,_.Kr,_.EJ,_.JJ,_.On,v.J,y.f,x.M,w.r],encapsulation:2})}return GlobalNavigationCompact})()},66119:(e,t,s)=>{"use strict";s.d(t,{i:()=>r});var i=s(62242),n=s(4154),l=s(33369),o=s(82032);const a=["menucontainer"],d=["morecontainer"];let r=(()=>{class GlobalNavigationMenu{metadata;elementRef;broadcast;navigation;menucontainer;morecontainer;moreComponentRef=void 0;menuItems=[];renderedItems=[];moreItems=[];movingActive=!1;rendering=!1;resizeTimeOut=void 0;constructor(e,t,s,i){this.metadata=e,this.elementRef=t,this.broadcast=s,this.navigation=i,this.broadcast.message$.subscribe((e=>{this.handleMessage(e)})),this.navigation.activeModule$.subscribe((e=>this.checkActiveModule()))}ngAfterViewInit(){this.buildMenuItems(),this.renderMenu()}buildMenuItems(){this.menuItems=[];let e=this.metadata.getRoleModules(!0);for(let t of e)this.menuItems.push(t)}handleResize(){this.buildMenuItems(),this.resizeTimeOut&&window.clearTimeout(this.resizeTimeOut),this.resizeTimeOut=window.setTimeout((()=>this.renderMenu()),250)}checkActiveModule(){if(this.movingActive||this.rendering)return!1;let e=this.menuItems.indexOf(this.navigation.activeModule),t=!1;for(let e of this.renderedItems)if(e.module==this.navigation.activeModule){t=!0;break}if(!t&&0!=e&&e+1>this.renderedItems.length){let t=this.menuItems.splice(e,1),s=this.renderedItems.pop();return s&&(s.componentRef.destroy(),this.menuItems.splice(this.renderedItems.length,0,t[0]),this.movingActive=!0,this.destroyMoreItem(),this.addMenuItem(this.menuItems[this.renderedItems.length],this.menuItems[this.renderedItems.length])),!1}return!0}destroyMenu(){for(let e of this.renderedItems)e.componentRef.destroy();this.renderedItems=[],this.destroyMoreItem(),this.movingActive=!1}renderMenu(){this.destroyMenu(),this.rendering=!0,this.addMenuItem(this.menuItems[0],this.menuItems[0])}addMenuItem(e,t){this.metadata.addComponentDirect("GlobalNavigationMenuItem",this.menucontainer).subscribe((s=>{s.instance.item={module:e,name:t},this.renderedItems.push({module:e,componentRef:s})}))}addMoreItem(){this.destroyMoreItem(),this.metadata.addComponentDirect("GlobalNavigationMenuMore",this.menucontainer).subscribe((e=>{this.moreItems=[];let t=this.renderedItems.length;for(;t<this.menuItems.length;)this.moreItems.push(this.menuItems[t]),t++;e.instance.moreMenuItems=this.moreItems,this.moreComponentRef={componentRef:e}}))}destroyMoreItem(){this.moreComponentRef&&(this.moreComponentRef.componentRef.destroy(),this.moreComponentRef=void 0)}getRenderedWidth(){let e=0;for(let t of this.renderedItems)e+=t.width;return e}handleMessage(e){switch(e.messagetype){case"applauncher.setrole":case"loader.reloaded":this.buildMenuItems(),this.renderMenu();break;case"navigation.itemadded":for(let t of this.renderedItems)t.module===e.messagedata.module&&(t.width=e.messagedata.width);let t=this.getRenderedWidth();if(this.movingActive)this.elementRef.nativeElement.offsetWidth,this.movingActive=!1,this.addMoreItem();else if(t>this.elementRef.nativeElement.offsetWidth){this.renderedItems.pop().componentRef.destroy(),this.menuItems.length>this.renderedItems.length?this.addMoreItem():this.rendering=!1}else this.menuItems.length>this.renderedItems.length&&this.addMenuItem(this.menuItems[this.renderedItems.length],this.menuItems[this.renderedItems.length]);break;case"navigation.moreadded":if(this.moreComponentRef.width=e.messagedata.width,this.renderedItems.length>0&&this.getRenderedWidth()+e.messagedata.width>this.elementRef.nativeElement.offsetWidth){this.renderedItems.pop().componentRef.destroy(),this.checkActiveModule()&&this.addMoreItem()}}}static ɵfac=function(e){return new(e||GlobalNavigationMenu)(i.Y36(n.Pu),i.Y36(i.SBq),i.Y36(l.f),i.Y36(o.G))};static ɵcmp=i.Xpm({type:GlobalNavigationMenu,selectors:[["global-navigation-menu"]],viewQuery:function(e,t){if(1&e&&(i.Gf(a,7,i.s_b),i.Gf(d,7,i.s_b)),2&e){let e;i.iGM(e=i.CRH())&&(t.menucontainer=e.first),i.iGM(e=i.CRH())&&(t.morecontainer=e.first)}},hostBindings:function(e,t){1&e&&i.NdJ("resize",(function(){return t.handleResize()}),!1,i.Jf7)},decls:5,vars:0,consts:[[1,"slds-grid"],["menucontainer",""],["morecontainer",""]],template:function(e,t){1&e&&(i.TgZ(0,"ul",0),i._UZ(1,"div",null,1)(3,"div",null,2),i.qZA())},encapsulation:2})}return GlobalNavigationMenu})()},75853:(e,t,s)=>{"use strict";s.d(t,{r:()=>d});var i=s(62242),n=s(55329),l=s(4154),o=s(55710);const a=["actioncontainer"];let d=(()=>{class GlobalNavigationMenuItemActionContainer{language;metadata;model;ngZone;cdr;actioncontainer;actionitem;actionemitter=new i.vpe;componentref;standardActions={NEW:"GlobalNavigationMenuItemActionNew",ROUTE:"GlobalNavigationMenuItemActionRoute"};stable=!1;stableSub;constructor(e,t,s,i,n){this.language=e,this.metadata=t,this.model=s,this.ngZone=i,this.cdr=n}get id(){return this.actionitem.id}get disabled(){return!this.componentref||!!this.componentref.instance.disabled}get hidden(){return!this.componentref||!!this.componentref.instance.hidden}ngAfterViewInit(){this.metadata.addComponent(this.actionitem.action?this.standardActions[this.actionitem.action]:this.actionitem.component,this.actioncontainer).subscribe((e=>{e.instance.parent=this.model,e.instance.actionconfig=this.actionitem.actionconfig,e.instance.actionemitter&&e.instance.actionemitter.subscribe((e=>{this.actionemitter.emit(e)})),this.componentref=e,this.cdr.detectChanges()}))}execute(){this.componentref&&this.componentref.instance.execute&&this.componentref.instance.execute()}static ɵfac=function(e){return new(e||GlobalNavigationMenuItemActionContainer)(i.Y36(n.d),i.Y36(l.Pu),i.Y36(o.o),i.Y36(i.R0b),i.Y36(i.sBO))};static ɵcmp=i.Xpm({type:GlobalNavigationMenuItemActionContainer,selectors:[["global-navigation-menu-item-action-container"]],viewQuery:function(e,t){if(1&e&&i.Gf(a,7,i.s_b),2&e){let e;i.iGM(e=i.CRH())&&(t.actioncontainer=e.first)}},inputs:{actionitem:"actionitem"},outputs:{actionemitter:"actionemitter"},decls:2,vars:0,consts:[["actioncontainer",""]],template:function(e,t){1&e&&i._UZ(0,"div",null,0)},encapsulation:2})}return GlobalNavigationMenuItemActionContainer})()},6131:(e,t,s)=>{"use strict";s.d(t,{s:()=>x});var i=s(50727),n=s(91591),l=s(49183),o=s(62242),a=s(4154),d=s(82032),r=s(62422),c=s(44755),u=s(72656),m=s(30141),g=s(27283),h=s(72401),p=s(70909),f=s(33861);function b(e,t){if(1&e&&(o.TgZ(0,"div",8)(1,"div",9),o._UZ(2,"global-header-search",10,11),o.qZA(),o._UZ(4,"global-header-tools")(5,"global-user"),o.qZA()),2&e){const e=o.MAs(3);o.xp6(2),o.Q6J("@isFocused",e.isFocused?"expand":"collapse")}}function _(e,t){if(1&e&&(o.TgZ(0,"div",12),o._UZ(1,"div",13),o.qZA()),2&e){const e=o.oxw();o.xp6(1),o.Udp("width",e.progressWidth,"%")}}function v(e,t){if(1&e&&(o.TgZ(0,"div",14),o._UZ(1,"global-navigation-tabbed-subtabs",15),o.qZA()),2&e){const e=o.oxw();o.xp6(1),o.Q6J("parenttab",e.parentTab)}}const y=[(0,n.X$)("isFocused",[(0,n.SB)("expand",(0,n.oB)({position:"absolute",width:"calc(100vw / 2)","box-shadow":"#565555 -2px 0px 9px 0px","z-index":10})),(0,n.SB)("collapse",(0,n.oB)({position:"initial",width:"15rem"})),(0,n.eR)("collapse <=> expand",[(0,n.jt)("200ms")])])];let x=(()=>{class GlobalNavigationTabbed{metadata;navigation;userPreferences;cdRef;parentTab;displaySubTabs=!1;subscriptions=new i.w0;progressWidth=0;showProgressBar=!1;menuContainer;constructor(e,t,s,i){this.metadata=e,this.navigation=t,this.userPreferences=s,this.cdRef=i}ngAfterViewInit(){this.subscribeToNavigationChanges()}ngOnDestroy(){this.subscriptions.unsubscribe()}get contextbarStyle(){return this.userPreferences.toUse.globalHeaderCollapsed?{"border-top":"0px"}:{}}setDisplaySubTabs(e){this.displaySubTabs="subtabbed"==this.navigation.navigationparadigm&&!!e&&(!!e.parentid||this.navigation.getSubTabs(e.id).length>0),this.cdRef.detectChanges()}setParentTab(e){this.parentTab=e&&e.parentid?this.navigation.getTabById(e.parentid):e}subscribeToNavigationChanges(){this.subscriptions.add(this.navigation.activeTab$.subscribe((e=>{this.handleNavigationChanges(e)}))),this.subscriptions.add(this.navigation.objectTabsChange$.subscribe((()=>{this.handleNavigationChanges(this.navigation.activeTab)})))}handleNavigationChanges(e){const t=this.navigation.getTabById(e);this.setParentTab(t),this.setDisplaySubTabs(t)}toggleCollapse(){this.userPreferences.toUse.globalHeaderCollapsed=!this.userPreferences.toUse.globalHeaderCollapsed,this.userPreferences.setPreference("globalHeaderCollapsed",this.userPreferences.toUse.globalHeaderCollapsed),setTimeout((()=>this.menuContainer.handleResize()),200)}static ɵfac=function(e){return new(e||GlobalNavigationTabbed)(o.Y36(a.Pu),o.Y36(d.G),o.Y36(r.z),o.Y36(o.sBO))};static ɵcmp=o.Xpm({type:GlobalNavigationTabbed,selectors:[["global-navigation-tabbed"]],viewQuery:function(e,t){if(1&e&&o.Gf(l.O,5),2&e){let e;o.iGM(e=o.CRH())&&(t.menuContainer=e.first)}},inputs:{progressWidth:"progressWidth",showProgressBar:"showProgressBar"},decls:8,vars:5,consts:[[1,"slds-context-bar","slds-context-bar_tabs","slds-p-left--xx-small",3,"ngStyle"],[1,"slds-context-bar__primary"],["role","navigation",1,"slds-context-bar__secondary"],[1,"slds-button","slds-button--icon","slds-m-right--xx-small",3,"click"],[3,"icon"],["class","slds-global-header__item slds-p-horizontal--xx-small slds-grid slds-grid--align-end slds-grid--vertical-align-center",4,"ngIf"],["class","slds-context-bar-progress-bar",4,"ngIf"],["class","slds-tabs_default slds-sub-tabs",4,"ngIf"],[1,"slds-global-header__item","slds-p-horizontal--xx-small","slds-grid","slds-grid--align-end","slds-grid--vertical-align-center"],[1,"slds-global-header__item","slds-is-relative","slds-height_full","slds-p-top--xxx-small","slds-p-horizontal--none",2,"min-width","15rem"],[1,"spice-display-block",2,"right","0","z-index","1"],["searchContainer",""],[1,"slds-context-bar-progress-bar"],[1,"slds-height_full"],[1,"slds-tabs_default","slds-sub-tabs"],[3,"parenttab"]],template:function(e,t){1&e&&(o.TgZ(0,"div",0),o._UZ(1,"global-app-launcher",1)(2,"global-navigation-tabbed-menu",2),o.TgZ(3,"button",3),o.NdJ("click",(function(){return t.toggleCollapse()})),o._UZ(4,"system-button-icon",4),o.qZA(),o.YNc(5,b,6,1,"div",5),o.YNc(6,_,2,2,"div",6),o.qZA(),o.YNc(7,v,2,1,"div",7)),2&e&&(o.Q6J("ngStyle",t.contextbarStyle),o.xp6(4),o.Q6J("icon",t.userPreferences.toUse.globalHeaderCollapsed?"chevrondown":"chevronup"),o.xp6(1),o.Q6J("ngIf",t.userPreferences.toUse.globalHeaderCollapsed),o.xp6(1),o.Q6J("ngIf",t.showProgressBar),o.xp6(1),o.Q6J("ngIf",t.displaySubTabs))},dependencies:[c.O5,c.PC,u.J,m.z,g.I,h.x,p.Q,l.O,f._],encapsulation:2,data:{animation:y}})}return GlobalNavigationTabbed})()},28313:(e,t,s)=>{"use strict";s.d(t,{P:()=>c});var i=s(91591),n=s(62242),l=s(82032),o=s(44044),a=s(44755),d=s(78859);function r(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"system-utility-icon",1),n.NdJ("click",(function(){n.CHM(e);const t=n.oxw();return n.KtG(t.openModal())})),n.qZA()}2&e&&n.Q6J("@browsertabbutton",void 0)}let c=(()=>{class GlobalNavigationTabbedBrowser{navigation;modal;elementRef;constructor(e,t,s){this.navigation=e,this.modal=t,this.elementRef=s}get tabWidth(){return this.elementRef.nativeElement.getBoundingClientRect().width}get hasTabs(){return this.navigation.objectTabs.length>0}openModal(){this.modal.openModal("GlobalNavigationTabbedBrowserModal")}static ɵfac=function(e){return new(e||GlobalNavigationTabbedBrowser)(n.Y36(l.G),n.Y36(o.o),n.Y36(n.SBq))};static ɵcmp=n.Xpm({type:GlobalNavigationTabbedBrowser,selectors:[["global-navigation-tabbed-browser"]],hostVars:2,hostBindings:function(e,t){1&e&&n.NdJ("click",(function(){return t.openModal()})),2&e&&n.ekj("slds-context-bar__item",1)},decls:1,vars:1,consts:[["icon","tabset","size","x-small","class","slds-p-around--x-small slds-border--left",3,"click",4,"ngIf"],["icon","tabset","size","x-small",1,"slds-p-around--x-small","slds-border--left",3,"click"]],template:function(e,t){1&e&&n.YNc(0,r,1,1,"system-utility-icon",0),2&e&&n.Q6J("ngIf",t.hasTabs)},dependencies:[a.O5,d.r],encapsulation:2,data:{animation:[(0,i.X$)("browsertabbutton",[(0,i.eR)(":enter",[(0,i.oB)({opacity:0}),(0,i.jt)(".5s",(0,i.oB)({opacity:1}))]),(0,i.eR)(":leave",[(0,i.jt)(".5s",(0,i.oB)({opacity:0}))])])]}})}return GlobalNavigationTabbedBrowser})()},49183:(e,t,s)=>{"use strict";s.d(t,{O:()=>h});var i=s(16962),n=s(10026),l=s(12429),o=s(28313),a=s(50727),d=s(62242),r=s(4154),c=s(33369),u=s(82032),m=s(44755);function g(e,t){if(1&e&&d._UZ(0,"global-navigation-tabbed-menu-tab",3),2&e){const e=t.$implicit;d.Q6J("object",e)}}let h=(()=>{class GlobalNavigationTabbedMenu{metadata;elementRef;broadcast;navigation;menuModules;menuTabs;menuMore;menuBrowser;resizeTimeOut=void 0;subscriptions=new a.w0;constructor(e,t,s,i){this.metadata=e,this.elementRef=t,this.broadcast=s,this.navigation=i,this.subscriptions.add(this.navigation.objectTabsChange$.subscribe((e=>{window.setTimeout((()=>{this.handleResize()}))})))}ngAfterViewInit(){setTimeout((()=>this.handleResize()))}ngOnDestroy(){this.subscriptions.unsubscribe()}get objectTabs(){return this.navigation.objectTabs.filter((e=>!e.parentid)).sort(((e,t)=>e.pinned&&t.pinned||!e.pinned&&!t.pinned?0:e.pinned?-1:1))}trackByFn(e,t){return t.id}handleResize(){let e=this.elementRef.nativeElement.getBoundingClientRect().width-this.menuModules.tabWidth-this.menuBrowser.tabWidth;this.menuMore.elementRef.nativeElement.classList.remove("slds-hide"),this.menuMore.elementRef.nativeElement.classList.add("slds-hidden"),this.menuMore.moreObjects=[];let t=this.menuMore.tabWidth;this.menuTabs.forEach((e=>{e.elementRef.nativeElement.classList.remove("slds-hide"),e.elementRef.nativeElement.classList.add("slds-hidden")}));let s=0,i=!1;return this.menuTabs.forEach(((n,l)=>{let o=n.elementRef.nativeElement.getBoundingClientRect().width;s+=o,(i||l+1==this.menuTabs.length&&s>e||l+1<this.menuTabs.length&&s>e-t)&&(n.elementRef.nativeElement.classList.add("slds-hide"),i=!0,this.menuMore.moreObjects.push(n.object)),n.elementRef.nativeElement.classList.remove("slds-hidden")})),i?this.menuMore.elementRef.nativeElement.classList.remove("slds-hidden"):this.menuMore.elementRef.nativeElement.classList.add("slds-hide"),!0}static ɵfac=function(e){return new(e||GlobalNavigationTabbedMenu)(d.Y36(r.Pu),d.Y36(d.SBq),d.Y36(c.f),d.Y36(u.G))};static ɵcmp=d.Xpm({type:GlobalNavigationTabbedMenu,selectors:[["global-navigation-tabbed-menu"]],viewQuery:function(e,t){if(1&e&&(d.Gf(i.Q,5),d.Gf(n.K,5),d.Gf(o.P,5),d.Gf(l.y,5)),2&e){let e;d.iGM(e=d.CRH())&&(t.menuModules=e.first),d.iGM(e=d.CRH())&&(t.menuMore=e.first),d.iGM(e=d.CRH())&&(t.menuBrowser=e.first),d.iGM(e=d.CRH())&&(t.menuTabs=e)}},hostBindings:function(e,t){1&e&&d.NdJ("resize",(function(){return t.handleResize()}),!1,d.Jf7)},decls:4,vars:2,consts:[[3,"object",4,"ngFor","ngForOf","ngForTrackBy"],[1,"slds-hidden"],[1,"slds-col--bump-left"],[3,"object"]],template:function(e,t){1&e&&(d._UZ(0,"global-navigation-tabbed-menu-modules"),d.YNc(1,g,1,1,"global-navigation-tabbed-menu-tab",0),d._UZ(2,"global-navigation-tabbed-more-tab",1)(3,"global-navigation-tabbed-browser",2)),2&e&&(d.xp6(1),d.Q6J("ngForOf",t.objectTabs)("ngForTrackBy",t.trackByFn))},dependencies:[m.sg,i.Q,l.y,n.K,o.P],encapsulation:2})}return GlobalNavigationTabbedMenu})()},49570:(e,t,s)=>{"use strict";s.d(t,{L:()=>N});var i=s(62242),n=s(55710),l=s(32294),o=s(75853),a=s(4154),d=s(33369),r=s(82032),c=s(83348),u=s(55329),m=s(10382),g=s(64376),h=s(44755),p=s(7763),f=s(83463),b=s(94664),_=s(55931);const v=function(e){return{"slds-hide":e}},y=function(e){return{"slds-disabled-text":e}};function x(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"li",5),i.NdJ("click",(function(){const t=i.CHM(e).$implicit,s=i.oxw(2);return i.KtG(s.propagateclick(t.id))})),i.TgZ(1,"a",6),i._UZ(2,"global-navigation-menu-item-action-container",7),i.qZA()()}if(2&e){const e=t.$implicit,s=i.oxw(2);i.Q6J("ngClass",i.VKq(3,v,s.isHidden(e.id))),i.xp6(2),i.Q6J("ngClass",i.VKq(5,y,s.isDisabled(e.id)))("actionitem",e)}}function w(e,t){if(1&e&&(i.ynx(0),i.YNc(1,x,3,7,"li",4),i.BQk()),2&e){const e=i.oxw();i.xp6(1),i.Q6J("ngForOf",e.itemMenu)}}function Z(e,t){if(1&e&&(i.TgZ(0,"span",15),i._uU(1),i.qZA()),2&e){const e=i.oxw().$implicit;i.xp6(1),i.Oqu(e.item_summary)}}function T(e,t){if(1&e&&i._UZ(0,"object-record-fieldset-horizontal-list",16),2&e){const e=i.oxw(3);i.Q6J("fieldset",e.displayfieldset)}}const C=function(e,t,s){return{module:e,id:t,data:s}};function k(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"li",12),i.NdJ("click",(function(){const t=i.CHM(e).$implicit,s=i.oxw(2);return i.KtG(s.openRecord(t.item_id))})),i.TgZ(1,"a",6),i.YNc(2,Z,2,1,"span",13),i.YNc(3,T,1,1,"object-record-fieldset-horizontal-list",14),i.qZA()()}if(2&e){const e=t.$implicit,s=i.oxw(2);i.Q6J("system-model-provider",i.kEZ(3,C,s.module,e.id,e.data)),i.xp6(2),i.Q6J("ngIf",!s.displayfieldset),i.xp6(1),i.Q6J("ngIf",s.displayfieldset)}}function A(e,t){if(1&e&&(i.ynx(0),i.TgZ(1,"li",8)(2,"span",9),i._UZ(3,"system-label",10),i.qZA()(),i.YNc(4,k,4,7,"li",11),i.BQk()),2&e){const e=i.oxw();i.xp6(4),i.Q6J("ngForOf",e.favorites)}}function L(e,t){if(1&e&&(i.TgZ(0,"span",15),i._uU(1),i.qZA()),2&e){const e=i.oxw().$implicit;i.xp6(1),i.Oqu(e.data.summary_text)}}function I(e,t){if(1&e&&i._UZ(0,"object-record-fieldset-horizontal-list",16),2&e){const e=i.oxw(3);i.Q6J("fieldset",e.displayfieldset)}}function S(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"li",12),i.NdJ("click",(function(){const t=i.CHM(e).$implicit,s=i.oxw(2);return i.KtG(s.openRecord(t.item_id))})),i.TgZ(1,"a",6),i.YNc(2,L,2,1,"span",13),i.YNc(3,I,1,1,"object-record-fieldset-horizontal-list",14),i.qZA()()}if(2&e){const e=t.$implicit,s=i.oxw(2);i.Q6J("system-model-provider",i.kEZ(3,C,s.module,e.id,e.data)),i.xp6(2),i.Q6J("ngIf",!s.displayfieldset),i.xp6(1),i.Q6J("ngIf",s.displayfieldset)}}function M(e,t){1&e&&(i.TgZ(0,"li",20),i._UZ(1,"system-label",21),i.qZA())}function J(e,t){1&e&&i._UZ(0,"system-spinner",22)}function O(e,t){if(1&e&&(i.ynx(0),i.TgZ(1,"li",8)(2,"span",9),i._UZ(3,"system-label",17),i.qZA()(),i.YNc(4,S,4,7,"li",11),i.YNc(5,M,2,0,"li",18),i.YNc(6,J,1,0,"system-spinner",19),i.BQk()),2&e){const e=i.oxw();i.xp6(4),i.Q6J("ngForOf",e.recentitems),i.xp6(1),i.Q6J("ngIf",!e.loadingRecent&&0==e.recentitems.length),i.xp6(1),i.Q6J("ngIf",e.loadingRecent)}}let N=(()=>{class GlobalNavigationTabbedMenuModuleMenu{metadata;model;view;broadcast;navigation;router;language;recent;favorite;cdRef;menuItemlist;module;actionTriggered=new i.vpe;itemMenu=[];loadingRecent=!1;recentitems=[];favorites=[];displayfieldset;constructor(e,t,s,i,n,l,o,a,d,r){this.metadata=e,this.model=t,this.view=s,this.broadcast=i,this.navigation=n,this.router=l,this.language=o,this.recent=a,this.favorite=d,this.cdRef=r,this.view.displayLabels=!1}get trackRecent(){return!!this.module&&"1"==this.metadata.getModuleDefs(this.module)?.track}ngOnChanges(){this.model.reset(),this.model.module=this.module;let e=this.metadata.getComponentConfig("GlobalNavigationMenuItem",this.module);if(e.actionset?this.itemMenu=this.metadata.getActionSetItems(e.actionset):this.itemMenu=this.metadata.getModuleMenu(this.module),e.displayfieldset)this.displayfieldset=e.displayfieldset;else{let e=this.metadata.getComponentConfig("GlobalHeaderSearchResultsItem",this.module);this.displayfieldset=e.mainfieldset}this.recentitems=[],this.trackRecent?this.recent.moduleItems[this.module]?this.recentitems=this.recent.moduleItems[this.module]:(this.loadingRecent=!0,this.recent.getModuleRecent(this.module).subscribe((e=>{this.loadingRecent=!1;let t=this.recent.moduleItems[this.module];this.recentitems=t||[],this.cdRef.detectChanges()}),(e=>{this.loadingRecent=!1}))):this.recentitems=[],this.favorites=this.favorite.getFavorites(this.module)}propagateclick(e){this.menuItemlist.find((t=>t.id==e))?.execute(),this.actionTriggered.emit(!0)}isDisabled(e){return!!this.menuItemlist&&this.menuItemlist.find((t=>t.id==e))?.disabled}isHidden(e){return!!this.menuItemlist&&this.menuItemlist.find((t=>t.id==e))?.hidden}openRecord(e){this.router.navigate(["/module/"+this.module+"/"+e]),this.actionTriggered.emit(!0)}static ɵfac=function(e){return new(e||GlobalNavigationTabbedMenuModuleMenu)(i.Y36(a.Pu),i.Y36(n.o),i.Y36(l.e),i.Y36(d.f),i.Y36(r.G),i.Y36(c.F0),i.Y36(u.d),i.Y36(m.h),i.Y36(g.G),i.Y36(i.sBO))};static ɵcmp=i.Xpm({type:GlobalNavigationTabbedMenuModuleMenu,selectors:[["global-navigation-tabbed-module-menu"]],viewQuery:function(e,t){if(1&e&&i.Gf(o.r,5),2&e){let e;i.iGM(e=i.CRH())&&(t.menuItemlist=e)}},inputs:{module:"module"},outputs:{actionTriggered:"actionTriggered"},features:[i._Bn([n.o,l.e]),i.TTD],decls:7,vars:3,consts:[["role","menu",1,"slds-dropdown__list"],["menulist",""],["menucontainer",""],[4,"ngIf"],["class","slds-dropdown__item","role","presentation",3,"ngClass","click",4,"ngFor","ngForOf"],["role","presentation",1,"slds-dropdown__item",3,"ngClass","click"],["href","javascript:void(0);","role","menuitem"],[1,"slds-truncate",3,"ngClass","actionitem"],["role","separator",1,"slds-dropdown__header"],[1,"slds-text-title--caps"],["label","LBL_FAVORITES"],["class","slds-dropdown__item","role","presentation",3,"system-model-provider","click",4,"ngFor","ngForOf"],["role","presentation",1,"slds-dropdown__item",3,"system-model-provider","click"],["class","slds-truncate",4,"ngIf"],[3,"fieldset",4,"ngIf"],[1,"slds-truncate"],[3,"fieldset"],["label","LBL_RECENTLYVIEWED"],["class","slds-dropdown__item slds-align--absolute-center slds-text-color_inverse-weak slds-p-around--xx-small",4,"ngIf"],["size","16",4,"ngIf"],[1,"slds-dropdown__item","slds-align--absolute-center","slds-text-color_inverse-weak","slds-p-around--xx-small"],["label","LBL_NO_ENTRIES"],["size","16"]],template:function(e,t){1&e&&(i.TgZ(0,"ul",0,1),i._UZ(2,"div",null,2),i.YNc(4,w,2,1,"ng-container",3),i.YNc(5,A,5,1,"ng-container",3),i.YNc(6,O,7,3,"ng-container",3),i.qZA()),2&e&&(i.xp6(4),i.Q6J("ngIf",t.itemMenu.length>0),i.xp6(1),i.Q6J("ngIf",t.favorites.length>0),i.xp6(1),i.Q6J("ngIf",t.trackRecent))},dependencies:[h.mk,h.sg,h.O5,p.u,f._,b.W,_.Z,o.r],encapsulation:2,changeDetection:0})}return GlobalNavigationTabbedMenuModuleMenu})()},16962:(e,t,s)=>{"use strict";s.d(t,{Q:()=>w});var i=s(62242),n=s(4154),l=s(33369),o=s(82032),a=s(83348),d=s(55329),r=s(10382),c=s(64376),u=s(44755),m=s(50151),g=s(72656),h=s(44561),p=s(83463),f=s(93333),b=s(49570);const _=function(e){return{"slds-is-active":e}};function v(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"li",17),i.NdJ("click",(function(){i.CHM(e);const t=i.oxw();return i.KtG(t.navigateTo(t.navModule))})),i.TgZ(1,"a",18)(2,"div",19),i._UZ(3,"system-icon",3),i.TgZ(4,"span"),i._UZ(5,"system-label-modulename",4),i.qZA(),i.TgZ(6,"button",20),i.NdJ("click",(function(t){i.CHM(e);const s=i.oxw();return i.KtG(s.setActiveModule(t,s.navModule))})),i._UZ(7,"system-button-icon",21),i.qZA()()()()}if(2&e){const e=i.oxw();i.Q6J("ngClass",i.VKq(4,_,e.navModule==e.activeModule)),i.xp6(2),i.Q6J("title",e.navModule),i.xp6(1),i.Q6J("module",e.navModule),i.xp6(2),i.Q6J("module",e.navModule)}}function y(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"li",22),i.NdJ("click",(function(){const t=i.CHM(e).$implicit,s=i.oxw();return i.KtG(s.navigateTo(t))})),i.TgZ(1,"a",18)(2,"div",19),i._UZ(3,"system-icon",3),i.TgZ(4,"span"),i._UZ(5,"system-label-modulename",4),i.qZA(),i.TgZ(6,"button",20),i.NdJ("click",(function(t){const s=i.CHM(e).$implicit,n=i.oxw();return i.KtG(n.setActiveModule(t,s))})),i._UZ(7,"system-button-icon",21),i.qZA()()()()}if(2&e){const e=t.$implicit,s=i.oxw();i.Q6J("ngClass",i.VKq(4,_,e==s.activeModule)),i.xp6(2),i.Q6J("title",e),i.xp6(1),i.Q6J("module",e),i.xp6(2),i.Q6J("module",e)}}const x=function(e){return{"slds-is-open":e}};let w=(()=>{class GlobalNavigationTabbedMenuModules{metadata;broadcast;navigation;router;language;recent;favorite;elementRef;renderer;quickLaunch(e){this.toggleMenu()}menuItems=[];isopen=!1;activeModule="";initialized=!1;keyboardListener;constructor(e,t,s,i,n,l,o,a,d){this.metadata=e,this.broadcast=t,this.navigation=s,this.router=i,this.language=n,this.recent=l,this.favorite=o,this.elementRef=a,this.renderer=d,this.broadcast.message$.subscribe((e=>{this.handleMessage(e)}))}buildMenuItems(){this.menuItems=[];let e=this.metadata.getRoleModules(!0);for(let t of e)this.menuItems.push(t)}get isActive(){return"main"==this.navigation.activeTab}get tabWidth(){return this.elementRef.nativeElement.getBoundingClientRect().width}setActive(){this.navigation.setActiveTab("main")}get activeModuleVisible(){return this.menuItems.find((e=>e==this.navModule))}handleMessage(e){if("applauncher.setrole"===e.messagetype)this.buildMenuItems()}get navModule(){return this.navigation.activeModule}toggleMenu(){this.isopen?this.closeMenu():(this.openMenu(),this.elementRef.nativeElement.focus())}openMenu(){this.isopen=!0,this.initialized||(this.buildMenuItems(),this.initialized=!0),this.activeModule=this.navigation.activeModule,this.keyboardListener||(this.keyboardListener=this.renderer.listen("document","keyup",(e=>this.handleKeyBoardEvent(e))))}setActiveModule(e,t){e.stopPropagation(),this.activeModule=t}closeMenu(){this.isopen=!1,this.keyboardListener&&(this.keyboardListener(),this.keyboardListener=null)}handleKeyBoardEvent(e){let t=this.menuItems.indexOf(this.activeModule);switch(console.log(e),e.key){case"ArrowDown":this.activeModule=this.menuItems[t+1>=this.menuItems.length?0:t+1];break;case"ArrowUp":this.activeModule=this.menuItems[t-1<0?this.menuItems.length-1:t-1];break;case"Enter":this.navigateTo(this.activeModule)}}navigateTo(e){this.closeMenu(),this.router.navigate(["/module/"+e])}static ɵfac=function(e){return new(e||GlobalNavigationTabbedMenuModules)(i.Y36(n.Pu),i.Y36(l.f),i.Y36(o.G),i.Y36(a.F0),i.Y36(d.d),i.Y36(r.h),i.Y36(c.G),i.Y36(i.SBq),i.Y36(i.Qsj))};static ɵcmp=i.Xpm({type:GlobalNavigationTabbedMenuModules,selectors:[["global-navigation-tabbed-menu-modules"]],hostVars:4,hostBindings:function(e,t){1&e&&i.NdJ("mouseenter",(function(){return t.openMenu()}))("mouseleave",(function(){return t.closeMenu()}))("keydown.control.m",(function(){return t.quickLaunch()}),!1,i.evT),2&e&&i.ekj("slds-context-bar__item",1)("slds-is-active",t.isActive)},decls:18,vars:9,consts:[[1,"slds-context-bar__item","slds-context-bar__item_divider-right","slds-dropdown-trigger","slds-dropdown-trigger_click",3,"ngClass"],["href","javascript:void(0);",1,"slds-context-bar__label-action",3,"click"],[1,"slds-truncate","slds-grid","slds-grid--vertical-align-center",3,"title"],["size","x-small",3,"module"],[3,"module"],[1,"slds-context-bar__icon-action"],["system-title","LBL_MAIN_MENU","aria-haspopup","true",1,"slds-button","slds-button_icon","slds-button_icon-container","slds-button_icon-x-small"],["icon","chevrondown"],[1,"slds-assistive-text"],["label","LBL_MAIN_MENU"],[1,"slds-dropdown","slds-dropdown_left","slds-dropdown--large"],[1,"slds-grid"],["role","menu",1,"slds-dropdown__list","slds-size--1-of-2","slds-border--right"],["class","slds-dropdown__item slds-nav-vertical__item slds-has-divider--bottom",3,"ngClass","click",4,"ngIf"],["class","slds-dropdown__item slds-nav-vertical__item","role","presentation",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"slds-size--1-of-2"],[3,"module","actionTriggered"],[1,"slds-dropdown__item","slds-nav-vertical__item","slds-has-divider--bottom",3,"ngClass","click"],["href","javascript:void(0);","role","menuitem","tabindex","-1"],[1,"slds-truncate","slds-size--1-of-1","slds-grid","slds-grid--vertical-align-center",3,"title"],[1,"slds-button","slds-button--icon","slds-col--bump-left",3,"click"],["icon","chevronright","addclasses","slds-icon-text-light"],["role","presentation",1,"slds-dropdown__item","slds-nav-vertical__item",3,"ngClass","click"]],template:function(e,t){1&e&&(i.TgZ(0,"div",0)(1,"a",1),i.NdJ("click",(function(){return t.setActive()})),i.TgZ(2,"div",2),i._UZ(3,"system-icon",3),i.TgZ(4,"span"),i._UZ(5,"system-label-modulename",4),i.qZA()()(),i.TgZ(6,"div",5)(7,"button",6),i._UZ(8,"system-button-icon",7),i.TgZ(9,"span",8),i._UZ(10,"system-label",9),i.qZA()()(),i.TgZ(11,"div",10)(12,"div",11)(13,"ul",12),i.YNc(14,v,8,6,"li",13),i.YNc(15,y,8,6,"li",14),i.qZA(),i.TgZ(16,"div",15)(17,"global-navigation-tabbed-module-menu",16),i.NdJ("actionTriggered",(function(){return t.closeMenu()})),i.qZA()()()()()),2&e&&(i.Q6J("ngClass",i.VKq(7,x,t.isopen)),i.xp6(2),i.Q6J("title",t.navModule),i.xp6(1),i.Q6J("module",t.navModule),i.xp6(2),i.Q6J("module",t.navModule),i.xp6(9),i.Q6J("ngIf",!t.activeModuleVisible),i.xp6(1),i.Q6J("ngForOf",t.menuItems),i.xp6(2),i.Q6J("module",t.activeModule))},dependencies:[u.mk,u.sg,u.O5,m.S,g.J,h.f,p._,f.M,b.L],encapsulation:2})}return GlobalNavigationTabbedMenuModules})()},12429:(e,t,s)=>{"use strict";s.d(t,{y:()=>b});var i=s(62242),n=s(82032),l=s(55329),o=s(44755),a=s(50151),d=s(72656),r=s(44561),c=s(83463),u=s(94664),m=s(78859);function g(e,t){if(1&e&&i._UZ(0,"system-utility-icon",14),2&e){const e=i.oxw(2);i.Q6J("icon",e.tabicon)}}function h(e,t){if(1&e&&i._UZ(0,"system-icon",15),2&e){const e=i.oxw(2);i.Q6J("module",e.tabmodule)}}function p(e,t){if(1&e&&(i.ynx(0),i.YNc(1,g,1,1,"system-utility-icon",10),i.YNc(2,h,1,1,"system-icon",11),i.TgZ(3,"div",12),i._UZ(4,"system-label",13),i.qZA(),i.BQk()),2&e){const e=i.oxw();i.xp6(1),i.Q6J("ngIf",e.tabicon),i.xp6(1),i.Q6J("ngIf",e.tabmodule),i.xp6(2),i.Q6J("label",e.tabname)}}function f(e,t){1&e&&(i._UZ(0,"system-spinner",16),i.TgZ(1,"div"),i._UZ(2,"system-label",17),i.qZA())}let b=(()=>{class GlobalNavigationTabbedMenuTab{navigation;language;elementRef;object;constructor(e,t,s){this.navigation=e,this.language=t,this.elementRef=s}get isActive(){if(this.object.id==this.navigation.activeTab)return!0;let e=this.navigation.getTabById(this.navigation.activeTab);return!(!e||!e.parentid||this.object.id!=e.parentid)}setActive(){this.navigation.setActiveTab(this.object.id)}closetab(){this.navigation.closeObjectTab(this.object.id)}get pinned(){return this.object.pinned}pintab(){this.object.pinned=!this.object.pinned}get tabname(){return this.object.displayname?this.object.displayname:void 0}get tabmodule(){return this.object.displaymodule?this.object.displaymodule:void 0}get tabicon(){return this.object.displayicon?this.object.displayicon:void 0}static ɵfac=function(e){return new(e||GlobalNavigationTabbedMenuTab)(i.Y36(n.G),i.Y36(l.d),i.Y36(i.SBq))};static ɵcmp=i.Xpm({type:GlobalNavigationTabbedMenuTab,selectors:[["global-navigation-tabbed-menu-tab"]],hostVars:6,hostBindings:function(e,t){2&e&&i.ekj("slds-context-bar__item",1)("slds-context-bar__item_tab",1)("slds-is-active",t.isActive)},inputs:{object:"object"},decls:11,vars:3,consts:[[1,"slds-context-bar__item"],["href","javascript:void(0);",1,"slds-context-bar__label-action","slds-scrollable--none",3,"click"],[1,"slds-grid","slds-grid--vertical-align-center"],[4,"ngIf","ngIfElse"],["tabloading",""],[1,"slds-context-bar__icon-action"],["system-title","LBL_PIN_TAB",1,"slds-button","slds-button_icon","slds-button_icon-container","slds-button_icon-x-small","slds-m-around--none",3,"click"],[3,"icon"],["aria-haspopup","true","system-title","LBL_CLOSE_TAB",1,"slds-button","slds-button_icon","slds-button_icon-container","slds-button_icon-x-small","slds-m-around--none",3,"click"],["icon","close"],["size","x-small","class","slds-p-right--x-small",3,"icon",4,"ngIf"],["size","x-small","divClass","slds-p-right--x-small",3,"module",4,"ngIf"],[1,"slds-truncate",2,"white-space","nowrap"],[3,"label"],["size","x-small",1,"slds-p-right--x-small",3,"icon"],["size","x-small","divClass","slds-p-right--x-small",3,"module"],["size","10",1,"slds-p-right--x-small"],["label","LBL_LOADING"]],template:function(e,t){if(1&e&&(i.TgZ(0,"div",0)(1,"a",1),i.NdJ("click",(function(){return t.setActive()})),i.TgZ(2,"div",2),i.YNc(3,p,5,3,"ng-container",3),i.YNc(4,f,3,0,"ng-template",null,4,i.W1O),i.qZA()(),i.TgZ(6,"div",5)(7,"button",6),i.NdJ("click",(function(){return t.pintab()})),i._UZ(8,"system-button-icon",7),i.qZA(),i.TgZ(9,"button",8),i.NdJ("click",(function(){return t.closetab()})),i._UZ(10,"system-button-icon",9),i.qZA()()()),2&e){const e=i.MAs(5);i.xp6(3),i.Q6J("ngIf",t.tabname)("ngIfElse",e),i.xp6(5),i.Q6J("icon",t.pinned?"pinned":"pin")}},dependencies:[o.O5,a.S,d.J,r.f,c._,u.W,m.r],encapsulation:2})}return GlobalNavigationTabbedMenuTab})()},10026:(e,t,s)=>{"use strict";s.d(t,{K:()=>f});var i=s(62242),n=s(82032),l=s(55329),o=s(44755),a=s(95681),d=s(72656),r=s(44561),c=s(83463),u=s(78859);function m(e,t){if(1&e&&i._UZ(0,"system-utility-icon",16),2&e){const e=i.oxw().$implicit;i.Q6J("icon",e.displayicon)}}function g(e,t){if(1&e&&i._UZ(0,"system-icon",17),2&e){const e=i.oxw().$implicit;i.Q6J("module",e.displaymodule)}}const h=function(e){return{"slds-is-active":e}};function p(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"li",8)(1,"a",9),i.YNc(2,m,1,1,"system-utility-icon",10),i.YNc(3,g,1,1,"system-icon",11),i.TgZ(4,"div",12),i.NdJ("click",(function(){const t=i.CHM(e).$implicit,s=i.oxw();return i.KtG(s.setActiveTab(t.id))})),i._UZ(5,"system-label",13),i.qZA(),i.TgZ(6,"button",14),i.NdJ("click",(function(){const t=i.CHM(e).$implicit,s=i.oxw();return i.KtG(s.closeObjectTab(t.id))})),i._UZ(7,"system-button-icon",15),i.qZA()()()}if(2&e){const e=t.$implicit,s=i.oxw();i.Q6J("ngClass",i.VKq(4,h,s.isActive(e.id))),i.xp6(2),i.Q6J("ngIf",e.displayicon),i.xp6(1),i.Q6J("ngIf",e.displaymodule),i.xp6(2),i.Q6J("label",e.displayname)}}let f=(()=>{class GlobalNavigationTabbedMoreTab{navigation;language;elementRef;moreObjects=[];constructor(e,t,s){this.navigation=e,this.language=t,this.elementRef=s}get tabWidth(){return this.elementRef.nativeElement.getBoundingClientRect().width}setActiveTab(e){this.navigation.setActiveTab(e)}closeObjectTab(e){this.navigation.closeObjectTab(e)}isActive(e){if(e==this.navigation.activeTab)return!0;let t=this.navigation.getTabById(this.navigation.activeTab);return!(!t||!t.parentid||e!=t.parentid)}get activeItem(){let e=this.navigation.activeTabObject;return!!this.moreObjects.find((t=>t.active||e&&e?.parentid==t.id))}static ɵfac=function(e){return new(e||GlobalNavigationTabbedMoreTab)(i.Y36(n.G),i.Y36(l.d),i.Y36(i.SBq))};static ɵcmp=i.Xpm({type:GlobalNavigationTabbedMoreTab,selectors:[["global-navigation-tabbed-more-tab"]],hostVars:4,hostBindings:function(e,t){2&e&&i.ekj("slds-context-bar__item",1)("slds-is-active",t.activeItem)},decls:9,vars:2,consts:[["system-dropdown-trigger","",1,"slds-context-bar__item","slds-context-bar__dropdown-trigger","slds-dropdown-trigger","slds-dropdown-trigger_click"],["aria-haspopup","true",1,"slds-context-bar__label-action"],["title","More Tabs",1,"slds-truncate"],["label","LBL_MORE"],["icon","chevrondown",1,"slds-p-left--x-small"],[1,"slds-dropdown","slds-dropdown_right"],["role","menu",1,"slds-dropdown__list"],["class","slds-dropdown__item slds-nav-vertical__item","role","presentation",3,"ngClass",4,"ngFor","ngForOf"],["role","presentation",1,"slds-dropdown__item","slds-nav-vertical__item",3,"ngClass"],["href","javascript:void(0);","role","menuitem"],["size","x-small","class","slds-p-right--x-small",3,"icon",4,"ngIf"],["size","x-small","divClass","slds-p-right--x-small",3,"module",4,"ngIf"],[1,"slds-grow",3,"click"],[3,"label"],["aria-haspopup","true",1,"slds-button","slds-button_icon","slds-button_icon-container","slds-button_icon-x-small","slds-m-around--none",3,"click"],["icon","close"],["size","x-small",1,"slds-p-right--x-small",3,"icon"],["size","x-small","divClass","slds-p-right--x-small",3,"module"]],template:function(e,t){1&e&&(i.TgZ(0,"div",0)(1,"div",1)(2,"span",2),i._UZ(3,"system-label",3),i._uU(4),i.qZA(),i._UZ(5,"system-button-icon",4),i.qZA(),i.TgZ(6,"div",5)(7,"ul",6),i.YNc(8,p,8,6,"li",7),i.qZA()()()),2&e&&(i.xp6(4),i.hij(" (",t.moreObjects.length,")"),i.xp6(4),i.Q6J("ngForOf",t.moreObjects))},dependencies:[o.mk,o.sg,o.O5,a.l,d.J,r.f,c._,u.r],encapsulation:2})}return GlobalNavigationTabbedMoreTab})()},98208:(e,t,s)=>{"use strict";s.d(t,{T:()=>y});var i=s(62242),n=s(4154),l=s(55329),o=s(82032),a=s(44755),d=s(50151),r=s(72656),c=s(44561),u=s(83463),m=s(94664),g=s(78859);function h(e,t){if(1&e&&i._UZ(0,"system-utility-icon",10),2&e){const e=i.oxw(2);i.Q6J("icon",e.tabicon)}}function p(e,t){if(1&e&&i._UZ(0,"system-icon",11),2&e){const e=i.oxw(2);i.Q6J("module",e.tabmodule)}}function f(e,t){if(1&e&&(i.ynx(0),i.YNc(1,h,1,1,"system-utility-icon",6),i.YNc(2,p,1,1,"system-icon",7),i.TgZ(3,"div",8),i._UZ(4,"system-label",9),i.qZA(),i.BQk()),2&e){const e=i.oxw();i.xp6(1),i.Q6J("ngIf",e.tabicon),i.xp6(1),i.Q6J("ngIf",e.tabmodule),i.xp6(2),i.Q6J("label",e.tabname)}}function b(e,t){1&e&&(i._UZ(0,"system-spinner",12),i.TgZ(1,"div"),i._UZ(2,"system-label",13),i.qZA())}function _(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"div",14)(1,"button",15),i.NdJ("click",(function(){i.CHM(e);const t=i.oxw();return i.KtG(t.pintab())})),i._UZ(2,"system-button-icon",16),i.qZA(),i.TgZ(3,"button",17),i.NdJ("click",(function(){i.CHM(e);const t=i.oxw();return i.KtG(t.closeSubTab())})),i._UZ(4,"system-button-icon",18),i.qZA()()}if(2&e){const e=i.oxw();i.xp6(2),i.Q6J("icon",e.pinned?"pinned":"pin")}}const v=function(e,t){return{"slds-active":e,"slds-border--left":t}};let y=(()=>{class GlobalNavigationTabbedSubtabItem{metadata;language;navigation;elementRef;object;ismain=!1;constructor(e,t,s,i){this.metadata=e,this.language=t,this.navigation=s,this.elementRef=i}get tabname(){return this.object?.displayname?this.object.displayname:void 0}get tabmodule(){return this.object?.displaymodule?this.object.displaymodule:void 0}get tabicon(){return this.object?.displayicon?this.object.displayicon:void 0}get isActive(){return this.object&&this.object.id==this.navigation.activeTab}setActive(){this.navigation.setActiveTab(this.object.id)}closeSubTab(){this.navigation.closeObjectTab(this.object.id)}get pinned(){return this.object.pinned}pintab(){this.object.pinned=!this.object.pinned}static ɵfac=function(e){return new(e||GlobalNavigationTabbedSubtabItem)(i.Y36(n.Pu),i.Y36(l.d),i.Y36(o.G),i.Y36(i.SBq))};static ɵcmp=i.Xpm({type:GlobalNavigationTabbedSubtabItem,selectors:[["global-navigation-tabbed-subtab-item"]],inputs:{object:"object",ismain:"ismain"},decls:7,vars:7,consts:[["role","presentation",1,"slds-tabs_default__item","slds-sub-tabs__item","slds-grid","slds-grid_vertical-align-center",3,"ngClass"],["href","javascript:void(0);","role","tab",1,"slds-tabs_default__link","slds-p-horizontal_xx-small",3,"click"],[1,"slds-truncate","slds-grid","slds-grid--vertical-align-center"],[4,"ngIf","ngIfElse"],["tabloading",""],["class","slds-col_bump-left slds-p-left_none slds-p-right_none slds-grid",4,"ngIf"],["size","x-small","class","slds-p-right--x-small",3,"icon",4,"ngIf"],["size","x-small","divClass","slds-p-right--x-small",3,"module",4,"ngIf"],[1,"slds-truncate",2,"white-space","nowrap"],[3,"label"],["size","x-small",1,"slds-p-right--x-small",3,"icon"],["size","x-small","divClass","slds-p-right--x-small",3,"module"],["size","10",1,"slds-p-right--x-small"],["label","LBL_LOADING"],[1,"slds-col_bump-left","slds-p-left_none","slds-p-right_none","slds-grid"],["system-title","LBL_PIN_TAB",1,"slds-button","slds-button_icon","slds-button_icon-container","slds-button_icon-x-small","slds-m-around--none",3,"click"],[3,"icon"],["tabindex","0","system-title","LBL_CLOSE_TAB",1,"slds-button","slds-button_icon","slds-button_icon-container","slds-button_icon-x-small",3,"click"],["icon","close"]],template:function(e,t){if(1&e&&(i.TgZ(0,"li",0)(1,"a",1),i.NdJ("click",(function(){return t.setActive()})),i.TgZ(2,"div",2),i.YNc(3,f,5,3,"ng-container",3),i.YNc(4,b,3,0,"ng-template",null,4,i.W1O),i.qZA()(),i.YNc(6,_,5,1,"div",5),i.qZA()),2&e){const e=i.MAs(5);i.Q6J("ngClass",i.WLB(4,v,t.isActive,!t.ismain)),i.xp6(3),i.Q6J("ngIf",t.tabname)("ngIfElse",e),i.xp6(3),i.Q6J("ngIf",!t.ismain)}},dependencies:[a.mk,a.O5,d.S,r.J,c.f,u._,m.W,g.r],encapsulation:2})}return GlobalNavigationTabbedSubtabItem})()},83850:(e,t,s)=>{"use strict";s.d(t,{_:()=>g});var i=s(10026),n=s(62242),l=s(44755),o=s(95681),a=s(72656),d=s(44561),r=s(83463);function c(e,t){if(1&e&&n._UZ(0,"system-icon",15),2&e){const e=n.oxw().$implicit;n.Q6J("module",e.displaymodule)}}const u=function(e){return{"slds-is-active":e}};function m(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"li",9)(1,"a",10),n.YNc(2,c,1,1,"system-icon",11),n.TgZ(3,"div",12),n.NdJ("click",(function(){const t=n.CHM(e).$implicit,s=n.oxw();return n.KtG(s.setActiveTab(t.id))})),n._uU(4),n.qZA(),n.TgZ(5,"button",13),n.NdJ("click",(function(){const t=n.CHM(e).$implicit,s=n.oxw();return n.KtG(s.closeObjectTab(t.id))})),n._UZ(6,"system-button-icon",14),n.qZA()()()}if(2&e){const e=t.$implicit,s=n.oxw();n.Q6J("ngClass",n.VKq(3,u,s.isActive(e.id))),n.xp6(2),n.Q6J("ngIf",e.displaymodule),n.xp6(2),n.Oqu(e.displayname)}}let g=(()=>{class GlobalNavigationTabbedSubTabMoreTab extends i.K{get moreActive(){let e=!1;return this.moreObjects.some((t=>{if(t.active)return e=!0,!0})),e}static ɵfac=function(){let e;return function(t){return(e||(e=n.n5z(GlobalNavigationTabbedSubTabMoreTab)))(t||GlobalNavigationTabbedSubTabMoreTab)}}();static ɵcmp=n.Xpm({type:GlobalNavigationTabbedSubTabMoreTab,selectors:[["global-navigation-tabbed-sub-tab-more-tab"]],features:[n.qOj],decls:11,vars:5,consts:[["role","presentation","system-dropdown-trigger","",1,"slds-tabs_default__item","slds-sub-tabs__item","slds-grid","slds-grid_vertical-align-center","slds-dropdown-trigger","slds-dropdown-trigger_click","slds-border--left",3,"ngClass"],["href","javascript:void(0);","role","tab",1,"slds-tabs_default__link","slds-p-horizontal_xx-small"],["label","LBL_MORE"],[1,"slds-col_bump-left","slds-p-left_none","slds-p-right_none"],["tabindex","0",1,"slds-button","slds-button_icon","slds-button_icon-container","slds-button_icon-x-small"],["icon","chevrondown"],[1,"slds-dropdown","slds-dropdown_right"],["role","menu",1,"slds-dropdown__list"],["class","slds-dropdown__item slds-nav-vertical__item","role","presentation",3,"ngClass",4,"ngFor","ngForOf"],["role","presentation",1,"slds-dropdown__item","slds-nav-vertical__item",3,"ngClass"],["href","javascript:void(0);","role","menuitem"],["size","x-small","divClass","slds-p-right--x-small",3,"module",4,"ngIf"],[1,"slds-grow",3,"click"],["aria-haspopup","true",1,"slds-button","slds-button_icon","slds-button_icon-container","slds-button_icon-x-small","slds-m-around--none",3,"click"],["icon","close"],["size","x-small","divClass","slds-p-right--x-small",3,"module"]],template:function(e,t){1&e&&(n.TgZ(0,"li",0)(1,"a",1)(2,"div"),n._UZ(3,"system-label",2),n._uU(4),n.qZA()(),n.TgZ(5,"div",3)(6,"button",4),n._UZ(7,"system-button-icon",5),n.qZA()(),n.TgZ(8,"div",6)(9,"ul",7),n.YNc(10,m,7,5,"li",8),n.qZA()()()),2&e&&(n.Q6J("ngClass",n.VKq(3,u,t.moreActive)),n.xp6(4),n.hij(" (",t.moreObjects.length,")"),n.xp6(6),n.Q6J("ngForOf",t.moreObjects))},dependencies:[l.mk,l.sg,l.O5,o.l,a.J,d.f,r._],encapsulation:2})}return GlobalNavigationTabbedSubTabMoreTab})()},33861:(e,t,s)=>{"use strict";s.d(t,{_:()=>m});var i=s(98208),n=s(83850),l=s(50727),o=s(62242),a=s(4154),d=s(55329),r=s(82032),c=s(44755);function u(e,t){if(1&e&&o._UZ(0,"global-navigation-tabbed-subtab-item",3),2&e){const e=t.$implicit;o.Q6J("object",e)}}let m=(()=>{class GlobalNavigationTabbedSubtabs{metadata;language;navigation;elementRef;ngZone;parenttab;subMenuTabs;subMenuMore;subscriptions=new l.w0;stable=!0;constructor(e,t,s,i,n){this.metadata=e,this.language=t,this.navigation=s,this.elementRef=i,this.ngZone=n,this.subscriptions.add(this.navigation.objectTabsChange$.subscribe((e=>{window.setTimeout((()=>{this.handleResize()}))})))}ngOnDestroy(){this.subscriptions.unsubscribe()}get subtabs(){return this.navigation.getSubTabs(this.parenttab?.id).sort(((e,t)=>e.pinned&&t.pinned||!e.pinned&&!t.pinned?0:e.pinned?-1:t.pinned?1:void 0))}trackByFn(e,t){return t.id}handleResize(){let e=this.elementRef.nativeElement.getBoundingClientRect().left,t=window.innerWidth-e;this.subMenuMore.elementRef.nativeElement.classList.remove("slds-hide"),this.subMenuMore.elementRef.nativeElement.classList.add("slds-hidden"),this.subMenuMore.moreObjects=[];let s=this.subMenuMore.tabWidth;this.subMenuTabs.forEach((e=>{e.elementRef.nativeElement.classList.remove("slds-hide"),e.elementRef.nativeElement.classList.add("slds-hidden")}));let i=0,n=!1;return this.subMenuTabs.forEach(((e,l)=>{let o=e.elementRef.nativeElement.getBoundingClientRect().width;i+=o,(n||l+1==this.subMenuTabs.length&&i>t||l+1<this.subMenuTabs.length&&i>t-s)&&(e.elementRef.nativeElement.classList.add("slds-hide"),n=!0,this.subMenuMore.moreObjects.push(e.object)),e.elementRef.nativeElement.classList.remove("slds-hidden")})),n?this.subMenuMore.elementRef.nativeElement.classList.remove("slds-hidden"):this.subMenuMore.elementRef.nativeElement.classList.add("slds-hide"),!0}static ɵfac=function(e){return new(e||GlobalNavigationTabbedSubtabs)(o.Y36(a.Pu),o.Y36(d.d),o.Y36(r.G),o.Y36(o.SBq),o.Y36(o.R0b))};static ɵcmp=o.Xpm({type:GlobalNavigationTabbedSubtabs,selectors:[["global-navigation-tabbed-subtabs"]],viewQuery:function(e,t){if(1&e&&(o.Gf(n._,5),o.Gf(i.T,5)),2&e){let e;o.iGM(e=o.CRH())&&(t.subMenuMore=e.first),o.iGM(e=o.CRH())&&(t.subMenuTabs=e)}},hostBindings:function(e,t){1&e&&o.NdJ("resize",(function(){return t.handleResize()}),!1,o.Jf7)},inputs:{parenttab:"parenttab"},decls:4,vars:4,consts:[["role","tablist",1,"slds-tabs_default__nav"],[3,"object","ismain"],[3,"object",4,"ngFor","ngForOf","ngForTrackBy"],[3,"object"]],template:function(e,t){1&e&&(o.TgZ(0,"ul",0),o._UZ(1,"global-navigation-tabbed-subtab-item",1),o.YNc(2,u,1,1,"global-navigation-tabbed-subtab-item",2),o._UZ(3,"global-navigation-tabbed-sub-tab-more-tab"),o.qZA()),2&e&&(o.xp6(1),o.Q6J("object",t.parenttab)("ismain",!0),o.xp6(1),o.Q6J("ngForOf",t.subtabs)("ngForTrackBy",t.trackByFn))},dependencies:[c.sg,i.T,n._],encapsulation:2})}return GlobalNavigationTabbedSubtabs})()},20595:(e,t,s)=>{"use strict";s.d(t,{T:()=>c});var i=s(62242),n=s(3144),l=s(44755),o=s(94664),a=s(12790);function d(e,t){1&e&&(i.TgZ(0,"div",3),i._UZ(1,"system-spinner"),i.qZA())}function r(e,t){if(1&e&&i._UZ(0,"global-newsfeed-item",4),2&e){const e=t.$implicit;i.Q6J("item",e)}}let c=(()=>{class GlobalNewsFeed{http;news=[];isLoading=!0;constructor(e){this.http=e,this.loadNewsFeed()}loadNewsFeed(){let e=btoa("https://www.spicecrm.com/wp-json/wp/v2/posts?context=embed");this.http.get("proxy?useurl="+e).subscribe((e=>{this.news=e,this.isLoading=!1}))}static ɵfac=function(e){return new(e||GlobalNewsFeed)(i.Y36(n.eN))};static ɵcmp=i.Xpm({type:GlobalNewsFeed,selectors:[["global-newsfeed"]],decls:3,vars:2,consts:[[1,"slds-p-around--medium","slds-theme--shade","slds-scrollable--y",2,"height","100vh"],["class","slds-align--absolute-center slds-height_full",4,"ngIf"],[3,"item",4,"ngFor","ngForOf"],[1,"slds-align--absolute-center","slds-height_full"],[3,"item"]],template:function(e,t){1&e&&(i.TgZ(0,"div",0),i.YNc(1,d,2,0,"div",1),i.YNc(2,r,1,1,"global-newsfeed-item",2),i.qZA()),2&e&&(i.xp6(1),i.Q6J("ngIf",t.isLoading),i.xp6(1),i.Q6J("ngForOf",t.news))},dependencies:[l.sg,l.O5,o.W,a.c],encapsulation:2})}return GlobalNewsFeed})()},12790:(e,t,s)=>{"use strict";s.d(t,{c:()=>l});var i=s(62242),n=s(30034);let l=(()=>{class GlobalNewsFeedItem{item={};getDate(){return moment(this.item.date).fromNow()}getExcerpt(){return this.item.excerpt.rendered.replace("<a",'<a target="_blank"')}static ɵfac=function(e){return new(e||GlobalNewsFeedItem)};static ɵcmp=i.Xpm({type:GlobalNewsFeedItem,selectors:[["global-newsfeed-item"]],inputs:{item:"item"},decls:10,vars:4,consts:[[1,"slds-card","slds-m-bottom--medium"],[1,"slds-card__header"],[1,"slds-grid","slds-grid_vertical-align-center"],["icon","wordpress","size","small"],[1,"slds-text-heading--medium","slds-truncate"],["target","_blank",3,"innerHTML"],[1,"slds-card__body","slds-p-vertical--xx-small","slds-p-horizontal--small"],[1,"slds-card__body--inner","slds-grid","slds-wrap","slds-grid--pull-padded",2,"text-align","justify",3,"innerHTML"],[1,"slds-card__footer"]],template:function(e,t){1&e&&(i.TgZ(0,"article",0)(1,"div",1)(2,"div",2),i._UZ(3,"system-custom-icon",3),i.TgZ(4,"h2",4),i._UZ(5,"a",5),i.qZA()()(),i.TgZ(6,"div",6),i._UZ(7,"div",7),i.qZA(),i.TgZ(8,"div",8),i._uU(9),i.qZA()()),2&e&&(i.xp6(5),i.Q6J("innerHTML",t.item.title.rendered,i.oJD),i.uIk("href",t.item.link,i.LSH),i.xp6(2),i.Q6J("innerHTML",t.getExcerpt(),i.oJD),i.xp6(2),i.Oqu(t.getDate()))},dependencies:[n.$],encapsulation:2})}return GlobalNewsFeedItem})()},72401:(e,t,s)=>{"use strict";s.d(t,{x:()=>h});var i=s(62242),n=s(64461),l=s(83348),o=s(75920),a=s(62422),d=s(44755),r=s(78859),c=s(25651);function u(e,t){1&e&&(i.TgZ(0,"span",4),i._UZ(1,"system-utility-icon",5),i.qZA())}function m(e,t){if(1&e&&i._UZ(0,"img",6),2&e){const e=i.oxw();i.Q6J("src",e.userimage,i.LSH)}}function g(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"global-user-panel",7),i.NdJ("closepopup",(function(){i.CHM(e);const t=i.oxw();return i.KtG(t.closepopup())})),i.qZA()}}let h=(()=>{class GlobalUser{loginService;router;elementRef;renderer;session;userpreferences;clickListener;hideUserDetails=!0;constructor(e,t,s,i,n,l){this.loginService=e,this.router=t,this.elementRef=s,this.renderer=i,this.session=n,this.userpreferences=l}toggleUserDetails(){this.hideUserDetails=!this.hideUserDetails,this.hideUserDetails?this.clickListener&&this.clickListener():this.clickListener=this.renderer.listen("document","click",(e=>this.onClick(e)))}closepopup(){this.hideUserDetails=!0}onClick(e){this.elementRef.nativeElement.contains(e.target)||(this.hideUserDetails=!0,this.clickListener())}get userimage(){return this.session.authData.user.user_image}static ɵfac=function(e){return new(e||GlobalUser)(i.Y36(n.j),i.Y36(l.F0),i.Y36(i.SBq),i.Y36(i.Qsj),i.Y36(o.n),i.Y36(a.z))};static ɵcmp=i.Xpm({type:GlobalUser,selectors:[["global-user"]],decls:4,vars:3,consts:[["aria-haspopup","true",1,"slds-button",2,"min-width","32px",3,"click"],["class","slds-icon_container slds-icon-standard-empty slds-icon_container--circle",4,"ngIf"],["style","height: 32px; width: 32px",3,"src",4,"ngIf"],["class","slds-is-absolute",3,"closepopup",4,"ngIf"],[1,"slds-icon_container","slds-icon-standard-empty","slds-icon_container--circle"],["icon","user","size","x-small","addclasses","slds-icon","colorclass",""],[2,"height","32px","width","32px",3,"src"],[1,"slds-is-absolute",3,"closepopup"]],template:function(e,t){1&e&&(i.TgZ(0,"button",0),i.NdJ("click",(function(){return t.toggleUserDetails()})),i.YNc(1,u,2,0,"span",1),i.YNc(2,m,1,1,"img",2),i.qZA(),i.YNc(3,g,1,0,"global-user-panel",3)),2&e&&(i.xp6(1),i.Q6J("ngIf",!t.userimage),i.xp6(1),i.Q6J("ngIf",t.userimage),i.xp6(1),i.Q6J("ngIf",!t.hideUserDetails))},dependencies:[d.O5,r.r,c.Y],encapsulation:2})}return GlobalUser})()},25651:(e,t,s)=>{"use strict";s.d(t,{Y:()=>L});var i=s(62242),n=s(64461),l=s(75920),o=s(83348),a=s(4154),d=s(14505),r=s(26625),c=s(44044),u=s(62422),m=s(13278),g=s(12222),h=s(55329),p=s(4411),f=s(44755),b=s(95030),_=s(50151),v=s(72656),y=s(83463),x=s(82892),w=s(78859),Z=s(46449),T=s(77723);function C(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"li",6)(1,"a",7),i.NdJ("click",(function(){i.CHM(e);const t=i.oxw();return i.KtG(t.changePassword())})),i._UZ(2,"system-label",24),i.qZA()()}}function k(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"div",25)(1,"button",26),i.NdJ("click",(function(){i.CHM(e);const t=i.oxw();return i.KtG(t.clearCache())})),i._UZ(2,"system-label",27),i.qZA()()}}function A(e,t){1&e&&i._UZ(0,"system-utility-icon",28)}let L=(()=>{class GlobaUserPanel{loginService;session;router;metadata;backend;config;modal;userprefs;toast;socket;language;loader;closepopup=new i.vpe;constructor(e,t,s,i,n,l,o,a,d,r,c,u){this.loginService=e,this.session=t,this.router=s,this.metadata=i,this.backend=n,this.config=l,this.modal=o,this.userprefs=a,this.toast=d,this.socket=r,this.language=c,this.loader=u}logoff(){this.loginService.logout()}changeImage(){this.modal.openModal("SystemUploadImage").subscribe((e=>{e.instance.cropheight=150,e.instance.cropwidth=150,e.instance.imagedata.subscribe((e=>{if(!1!==e){let t=this.session.authData.user.user_image;this.session.authData.user.user_image="",this.backend.postRequest("module/Users/"+this.session.authData.userId+"/image",{},{imagedata:e}).subscribe((t=>{this.session.authData.user.user_image=e}),(e=>{this.session.authData.user.user_image=t}))}}))}))}get displayName(){return this.session.authData.user.full_name?this.session.authData.user.full_name:this.session.authData.userName}get userName(){return this.session.authData.userName}get systemName(){return this.session.authData.tenant_name?this.session.authData.tenant_name:this.config.systemName}get canChangePassword(){return this.session.authData.canchangepassword}goDetails(){this.router.navigate(["/module/Users/"+this.session.authData.userId]),this.close()}changePassword(){this.canChangePassword&&this.modal.openModal("UserChangePasswordModal")}get userimage(){return this.session.authData.user.user_image}get displayDeveloperMode(){return this.session.authData.admin}set currentTz(e){this.userprefs.unchangedPreferences.global&&this.userprefs.unchangedPreferences.global.timezone===e||(this.userprefs.setPreference("timezone",e,!0).subscribe((e=>{this.toast.sendToast(this.language.getLabel("LBL_TIMEZONE_WAS_SET_TO")+": "+e.timezone,"success")}),(e=>{this.toast.sendToast("Error setting timezone.","error")})),this.session.setTimezone(e),this.close())}get currentTz(){return this.userprefs.unchangedPreferences&&this.userprefs.unchangedPreferences.global?this.userprefs.unchangedPreferences.global.timezone:""}clearCache(){this.modal.confirm("MSG_RESET_CACHE","MSG_RESET_CACHE").subscribe({next:e=>{if(e){let e=this.modal.await("LBL_LOADING");this.backend.deleteRequest("system/cache").subscribe((t=>{e.emit(!0),t?this.modal.openModal("GlobalHeaderReloadModal",!1).subscribe((e=>{this.loader.load().subscribe((t=>{!0===t?(this.toast.sendToast("LBL_DATA_RELOADED"),e.instance.self.destroy()):(this.toast.sendToast("error","error","Reload failed"),e.instance.self.destroy())}))})):this.toast.sendToast("LBL_ERROR","error")}))}}})}close(){this.closepopup.emit(!0)}static ɵfac=function(e){return new(e||GlobaUserPanel)(i.Y36(n.j),i.Y36(l.n),i.Y36(o.F0),i.Y36(a.Pu),i.Y36(d.y),i.Y36(r.C),i.Y36(c.o),i.Y36(u.z),i.Y36(m.A),i.Y36(g.W),i.Y36(h.d),i.Y36(p._))};static ɵcmp=i.Xpm({type:GlobaUserPanel,selectors:[["global-user-panel"]],outputs:{closepopup:"closepopup"},decls:27,vars:7,consts:[[1,"slds-is-fixed","slds-box--border","slds-dropdown","slds-dropdown--right","slds-m-right--small","slds-m-top--medium"],[1,"slds-grid","slds-p-around--small","slds-grid--vertical-align-center"],[1,"slds-m-left--small"],[1,"slds-text-heading--medium",3,"title"],[1,"slds-theme--shade","slds-p-around--small","slds-border--top","slds-border--bottom"],[1,"slds-list--horizontal","slds-has-dividers--left"],[1,"slds-item"],["href","javascript:void(0);",1,"slds-text-link--reset",3,"click"],["label","LBL_DETAILS"],["class","slds-item",4,"ngIf"],[1,"slds-p-around--small","slds-form--stacked"],[3,"selected"],[1,"slds-form-element"],[1,"slds-form-element__label"],["label","LBL_SELECT_TIMEZONE"],["denyEmpty","true",3,"ngModel","ngModelChange"],["class","slds-p-top--small slds-grid slds-grid_vertical-align-center slds-grid--align-spread",4,"ngIf"],[1,"slds-theme--shade","slds-p-around--x-small","slds-grid"],[1,"slds-grid","slds-grid--vertical-align-center"],["class","slds-p-right--xx-small","size","xx-small","icon","omni_channel",4,"ngIf"],["label","LBL_LOGGED_ON_SYSTEM"],[1,"slds-col--bump-left"],["system-title","LBL_LOGOFF",1,"slds-button","slds-button--icon",3,"click"],["icon","logout"],["label","LBL_CHANGE_PASSWORD"],[1,"slds-p-top--small","slds-grid","slds-grid_vertical-align-center","slds-grid--align-spread"],[1,"slds-button","slds-button--neutral","slds-truncate",3,"click"],["label","LBL_RESET_AND_RELOAD"],["size","xx-small","icon","omni_channel",1,"slds-p-right--xx-small"]],template:function(e,t){1&e&&(i.TgZ(0,"div",0)(1,"div",1),i._UZ(2,"global-user-panel-icon"),i.TgZ(3,"div",2)(4,"h1",3),i._uU(5),i.qZA()()(),i.TgZ(6,"div",4)(7,"ul",5)(8,"li",6)(9,"a",7),i.NdJ("click",(function(){return t.goDetails()})),i._UZ(10,"system-label",8),i.qZA()(),i.YNc(11,C,3,0,"li",9),i.qZA()(),i.TgZ(12,"div",10)(13,"system-language-selector",11),i.NdJ("selected",(function(){return t.close()})),i.qZA(),i.TgZ(14,"div",12)(15,"label",13),i._UZ(16,"system-label",14),i.qZA(),i.TgZ(17,"system-input-timezone",15),i.NdJ("ngModelChange",(function(e){return t.currentTz=e})),i.qZA()(),i.YNc(18,k,3,0,"div",16),i.qZA(),i.TgZ(19,"div",17)(20,"div",18),i.YNc(21,A,1,0,"system-utility-icon",19),i._UZ(22,"system-label",20),i._uU(23),i.qZA(),i.TgZ(24,"div",21)(25,"button",22),i.NdJ("click",(function(){return t.logoff()})),i._UZ(26,"system-button-icon",23),i.qZA()()()()),2&e&&(i.xp6(4),i.Q6J("title",t.userName),i.xp6(1),i.Oqu(t.displayName),i.xp6(6),i.Q6J("ngIf",t.canChangePassword),i.xp6(6),i.Q6J("ngModel",t.currentTz),i.xp6(1),i.Q6J("ngIf",t.displayDeveloperMode),i.xp6(3),i.Q6J("ngIf",t.socket.connected),i.xp6(2),i.hij(": ",t.systemName," "))},dependencies:[f.O5,b.JJ,b.On,_.S,v.J,y._,x.M,w.r,Z.R,T.V],encapsulation:2})}return GlobaUserPanel})()},77723:(e,t,s)=>{"use strict";s.d(t,{V:()=>u});var i=s(62242),n=s(75920),l=s(44044),o=s(14505),a=s(44755),d=s(78859);function r(e,t){1&e&&(i.TgZ(0,"span",6),i._UZ(1,"system-utility-icon",7),i.qZA())}function c(e,t){if(1&e&&i._UZ(0,"img",8),2&e){const e=i.oxw();i.Q6J("src",e.userimage,i.LSH)}}let u=(()=>{class GlobaUserPanelIcon{session;modalservice;backend;showEdit=!1;constructor(e,t,s){this.session=e,this.modalservice=t,this.backend=s}changeImage(){this.modalservice.openModal("SystemUploadImage").subscribe((e=>{e.instance.cropheight=150,e.instance.cropwidth=150,e.instance.imagedata.subscribe((e=>{if(!1!==e){let t=this.session.authData.user.user_image;this.session.authData.user.user_image="",this.backend.postRequest("module/Users/"+this.session.authData.userId+"/image",{},{imagedata:e}).subscribe((t=>{this.session.authData.user.user_image=e}),(e=>{this.session.authData.user.user_image=t}))}}))}))}get editstyle(){return{opacity:this.showEdit?1:0}}get userimage(){return this.session.authData.user.user_image}onMouseEnter(){this.showEdit=!0}onMouseLeave(){this.showEdit=!1}static ɵfac=function(e){return new(e||GlobaUserPanelIcon)(i.Y36(n.n),i.Y36(l.o),i.Y36(o.y))};static ɵcmp=i.Xpm({type:GlobaUserPanelIcon,selectors:[["global-user-panel-icon"]],decls:7,vars:3,consts:[[1,"slds-is-relative",3,"mouseenter","mouseleave"],["class","slds-icon_container slds-icon-standard-empty slds-icon_container--circle","style","width:40px;height:40px;",4,"ngIf"],["style","height: 40px; width: 40px",3,"src",4,"ngIf"],[1,"slds-is-absolute__top","slds-align--absolute-center",2,"transition",".5s","height","40px","width","40px",3,"ngStyle","click"],[1,"slds-is-absolute__top",2,"background","white","height","40px","width","40px","opacity",".7"],["icon","edit","size","x-small",2,"z-index","1"],[1,"slds-icon_container","slds-icon-standard-empty","slds-icon_container--circle",2,"width","40px","height","40px"],["icon","user","size","small","addclasses","slds-icon","colorclass",""],[2,"height","40px","width","40px",3,"src"]],template:function(e,t){1&e&&(i.TgZ(0,"div",0),i.NdJ("mouseenter",(function(){return t.onMouseEnter()}))("mouseleave",(function(){return t.onMouseLeave()})),i.TgZ(1,"div"),i.YNc(2,r,2,0,"span",1),i.YNc(3,c,1,1,"img",2),i.qZA(),i.TgZ(4,"div",3),i.NdJ("click",(function(){return t.changeImage()})),i._UZ(5,"div",4)(6,"system-utility-icon",5),i.qZA()()),2&e&&(i.xp6(2),i.Q6J("ngIf",!t.userimage),i.xp6(1),i.Q6J("ngIf",t.userimage),i.xp6(1),i.Q6J("ngStyle",t.editstyle))},dependencies:[a.O5,a.PC,d.r],encapsulation:2})}return GlobaUserPanelIcon})()},34826:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalComponents:()=>el});var i=s(44755),n=s(95030),l=s(84357),o=s(53190),a=s(19784),d=s(57239),r=s(91977),c=s(30048),u=s(2552),m=s(26558),g=s(30141),h=s(68070),p=s(15650),f=s(53838),b=s(24373),v=s(27283),y=s(62242),x=s(75920),w=s(4154),Z=s(55329),T=s(50151),C=s(83463),k=s(78859);const A=["actioncontainerheader"],L=function(e){return{"slds-is-open":e}};let I=(()=>{class GlobalHeaderActions{renderer;elementRef;session;metadata;language;actioncontainerheader;isOpen=!1;clickListener;isVisible=!1;isInitialized=!1;constructor(e,t,s,i,n){this.renderer=e,this.elementRef=t,this.session=s,this.metadata=i,this.language=n}initialize(){let e=this.metadata.getComponentConfig("GlobalHeaderActions");if(e&&e.actionset){let t=this.metadata.getActionSetItems(e.actionset);for(let e of t)e.actionconfig?.module&&!this.metadata.checkModuleAcl(e.actionconfig?.module,"create")||(this.isVisible=!0,this.metadata.addComponent(e.component,this.actioncontainerheader).subscribe((t=>{t.instance.actionconfig=e.actionconfig,t.instance.closemenu&&t.instance.closemenu.subscribe((e=>{this.isOpen=!1}))})))}this.isInitialized=!0}toggleOpen(){this.isOpen=!this.isOpen,this.isOpen?(this.isInitialized||this.initialize(),this.clickListener=this.renderer.listen("document","click",(e=>this.onClick(e)))):this.clickListener&&this.clickListener()}onClick(e){this.elementRef.nativeElement.contains(e.target)||(this.isOpen=!1,this.clickListener())}static ɵfac=function(e){return new(e||GlobalHeaderActions)(y.Y36(y.Qsj),y.Y36(y.SBq),y.Y36(x.n),y.Y36(w.Pu),y.Y36(Z.d))};static ɵcmp=y.Xpm({type:GlobalHeaderActions,selectors:[["global-header-actions"]],viewQuery:function(e,t){if(1&e&&y.Gf(A,7,y.s_b),2&e){let e;y.iGM(e=y.CRH())&&(t.actioncontainerheader=e.first)}},decls:9,vars:5,consts:[[1,"slds-show--medium","slds-dropdown-trigger","slds-dropdown-trigger_click","slds-p-horizontal--xxx-small",3,"ngClass"],[1,"slds-p-around--xx-small",3,"click"],["system-title","LBL_ADD",3,"icon","size"],[1,"slds-is-absolute","slds-dropdown--medium","slds-dropdown","slds-dropdown_right","slds-nubbin_top-right",2,"right","-11px","top","29px"],["role","menu",1,"slds-dropdown__list"],["role","separator",1,"slds-dropdown__header"],["actioncontainerheader",""],[1,"slds-text-title_caps"],["label","LBL_CREATE"]],template:function(e,t){1&e&&(y.TgZ(0,"div",0)(1,"div",1),y.NdJ("click",(function(){return t.toggleOpen()})),y._UZ(2,"system-utility-icon",2),y.qZA(),y.TgZ(3,"div",3)(4,"ul",4)(5,"li",5,6)(7,"span",7),y._UZ(8,"system-label",8),y.qZA()()()()()),2&e&&(y.Q6J("ngClass",y.VKq(3,L,t.isOpen)),y.xp6(2),y.Q6J("icon","add")("size","x-small"))},dependencies:[i.mk,T.S,C._,k.r],encapsulation:2})}return GlobalHeaderActions})();var S=s(55710),M=s(80788),J=s(44561);let O=(()=>{class GlobalHeaderActionItem{session;metadata;model;language;dockedComposer;actionconfig={};closemenu=new y.vpe;constructor(e,t,s,i,n){this.session=e,this.metadata=t,this.model=s,this.language=i,this.dockedComposer=n}ngOnInit(){this.actionconfig.module&&(this.model.module=this.actionconfig.module)}click(){this.dockedComposer.addComposer(this.model.module),this.closemenu.emit(!0)}get label(){return this.actionconfig.label?this.language.getLabel(this.actionconfig.label):this.language.getLabel(this.model.module,"LBL_NEW_FORM_TITLE")}static ɵfac=function(e){return new(e||GlobalHeaderActionItem)(y.Y36(x.n),y.Y36(w.Pu),y.Y36(S.o),y.Y36(Z.d),y.Y36(M.m))};static ɵcmp=y.Xpm({type:GlobalHeaderActionItem,selectors:[["global-header-action-item"]],features:[y._Bn([S.o])],decls:5,vars:2,consts:[["role","presentation",1,"slds-dropdown__item"],["href","javascript:void(0)",1,"slds-grid","slds-grid_vertical-align-center","slds-p-horizontal--x-small","slds-p-vertical--xx-small",3,"click"],["addclasses","'slds-icon slds-icon_small",3,"module"],[1,"slds-truncate","slds-size--1-of-1"]],template:function(e,t){1&e&&(y.TgZ(0,"li",0)(1,"a",1),y.NdJ("click",(function(){return t.click()})),y._UZ(2,"system-icon",2),y.TgZ(3,"div",3),y._uU(4),y.qZA()()()),2&e&&(y.xp6(2),y.Q6J("module",t.model.module),y.xp6(2),y.Oqu(t.label))},dependencies:[J.f],encapsulation:2})}return GlobalHeaderActionItem})();var N=s(64376),F=s(82032),q=s(83348),E=s(44044),Y=s(72656);const D=["favbutton"];function U(e,t){if(1&e){const e=y.EpF();y.TgZ(0,"li",20),y.NdJ("selected",(function(){y.CHM(e);const t=y.oxw(2);return y.KtG(t.closeFavorites())})),y.qZA()}if(2&e){const e=t.$implicit;y.Q6J("item",e)}}function Q(e,t){if(1&e){const e=y.EpF();y.TgZ(0,"section",8)(1,"div",9)(2,"ul",10)(3,"li",11)(4,"div",12)(5,"h3",13),y._UZ(6,"system-label",14),y.qZA()()(),y.YNc(7,U,1,1,"li",15),y.qZA()(),y.TgZ(8,"footer",16)(9,"ul")(10,"li")(11,"button",17),y.NdJ("click",(function(){y.CHM(e);const t=y.oxw();return y.KtG(t.openEditModal())})),y._UZ(12,"system-button-icon",18)(13,"system-label",19),y.qZA()()()()()}if(2&e){const e=y.oxw();y.xp6(7),y.Q6J("ngForOf",e.favorite.favorites)}}const R=function(e){return{"slds-is-selected":e}};let j=(()=>{class GlobalHeaderFavorite{metadata;favorite;navigation;router;renderer;elementRef;language;modal;favbutton;clickListener;showFavorites=!1;constructor(e,t,s,i,n,l,o,a){this.metadata=e,this.favorite=t,this.navigation=s,this.router=i,this.renderer=n,this.elementRef=l,this.language=o,this.modal=a,this.navigation.activeTab$.subscribe((e=>this.handleNavigationChange()))}get canShowFavorites(){return this.metadata.getActiveRole().showfavorites&&"0"!=this.metadata.getActiveRole().showfavorites}get nofavorites(){return 0==this.favorite.favorites.length}handleNavigationChange(){let e=this.navigation.activeTabObject;if("main"==e.id)return this.favorite.disable();"module/:module/:id"==this.metadata.getRouteDetails(e.path.replace("tab/:tabid/","")).path?this.favorite.enable(e.params.module,e.params.id):this.favorite.disable()}toggleFavorite(){this.favorite.isFavorite?this.favorite.deleteFavorite():this.favorite.setFavorite(),this.favbutton.element.nativeElement.blur()}closeFavorites(){this.showFavorites=!1}toggleFavorites(){this.showFavorites=!this.showFavorites,this.showFavorites?this.clickListener=this.renderer.listen("document","click",(e=>this.onClick(e))):this.clickListener&&this.clickListener()}onClick(e){this.elementRef.nativeElement.contains(e.target)||(this.showFavorites=!1,this.clickListener())}openEditModal(){this.modal.openModal("SpiceFavoritesEditModal")}static ɵfac=function(e){return new(e||GlobalHeaderFavorite)(y.Y36(w.Pu),y.Y36(N.G),y.Y36(F.G),y.Y36(q.F0),y.Y36(y.Qsj),y.Y36(y.SBq),y.Y36(Z.d),y.Y36(E.o))};static ɵcmp=y.Xpm({type:GlobalHeaderFavorite,selectors:[["global-header-favorite"]],viewQuery:function(e,t){if(1&e&&y.Gf(D,5,y.s_b),2&e){let e;y.iGM(e=y.CRH())&&(t.favbutton=e.first)}},decls:8,vars:6,consts:[[1,"slds-global-actions__favorites","slds-m-around--none","slds-dropdown-trigger","slds-dropdown-trigger_click"],[1,"slds-button-group"],["system-title","LBL_MARK_FAVORITE",1,"slds-button","slds-button_icon","slds-global-actions__favorites-action","slds-button_icon","slds-button_icon-border","slds-button_icon-small",3,"disabled","ngClass","click"],["favbutton",""],["icon","favorite"],["system-title","LBL_ALL_FAVORITES",1,"slds-button","slds-button_icon","slds-global-actions__favorites-more","slds-button_icon","slds-button_icon-border","slds-button_icon-small",3,"disabled","click"],["icon","down"],["class","slds-popover slds-nubbin--top-right slds-dynamic-menu","role","dialog","style","position:absolute;right:-15px;top:37px",4,"ngIf"],["role","dialog",1,"slds-popover","slds-nubbin--top-right","slds-dynamic-menu",2,"position","absolute","right","-15px","top","37px"],[1,"slds-popover__body","slds-p-horizontal_none"],[1,"slds-listbox","slds-listbox_vertical","slds-dropdown_length-10"],["role","presentation",1,"slds-listbox__item"],["role","presentation",1,"slds-media","slds-listbox__option","slds-listbox__option_plain"],["role","presentation",1,"slds-listbox__option-header"],["label","LBL_FAVORITES"],["global-header-search-recent-item","","role","presentation","class","slds-listbox__item",3,"item","selected",4,"ngFor","ngForOf"],[1,"slds-popover__footer"],[1,"slds-button","slds-button_reset","slds-p-vertical_xx-small","slds-size_1-of-1",3,"click"],["icon","edit",1,"slds-p-right--xx-small"],["label","LBL_EDIT_FAVORITES"],["global-header-search-recent-item","","role","presentation",1,"slds-listbox__item",3,"item","selected"]],template:function(e,t){1&e&&(y.TgZ(0,"div",0)(1,"div",1)(2,"button",2,3),y.NdJ("click",(function(){return t.toggleFavorite()})),y._UZ(4,"system-button-icon",4),y.qZA(),y.TgZ(5,"button",5),y.NdJ("click",(function(){return t.toggleFavorites()})),y._UZ(6,"system-button-icon",6),y.qZA()(),y.YNc(7,Q,14,1,"section",7),y.qZA()),2&e&&(y.xp6(2),y.Q6J("disabled",!t.favorite.isEnabled)("ngClass",y.VKq(4,R,t.favorite.isFavorite)),y.xp6(3),y.Q6J("disabled",t.nofavorites),y.xp6(2),y.Q6J("ngIf",t.showFavorites))},dependencies:[i.mk,i.sg,i.O5,T.S,Y.J,C._,b.S],encapsulation:2})}return GlobalHeaderFavorite})();function B(e,t){if(1&e){const e=y.EpF();y.TgZ(0,"button",1),y.NdJ("click",(function(){y.CHM(e);const t=y.oxw();return y.KtG(t.toggleEnabled())})),y._UZ(1,"system-button-icon",2),y.qZA()}if(2&e){const e=y.oxw();y.ekj("slds-is-selected",e.language.inlineEditEnabled),y.xp6(1),y.Q6J("addclasses","slds-button--icon-xx-small "+(e.language.inlineEditEnabled?"slds-text-color_success":"slds-text-color--inverse-weak"))}}let G=(()=>{class GlobalHeaderLabelInlineEdit{language;session;constructor(e,t){this.language=e,this.session=t}toggleEnabled(){this.language.inlineEditEnabled=!this.language.inlineEditEnabled,this.language.currentlanguage$.emit(this.language.currentlanguage)}static ɵfac=function(e){return new(e||GlobalHeaderLabelInlineEdit)(y.Y36(Z.d),y.Y36(x.n))};static ɵcmp=y.Xpm({type:GlobalHeaderLabelInlineEdit,selectors:[["global-header-label-inline-edit"]],decls:1,vars:1,consts:[["system-title","LBL_ENABLE_INLINE_EDIT","class","slds-button slds-button_icon slds-button_icon slds-button_icon-small",3,"slds-is-selected","click",4,"ngIf"],["system-title","LBL_ENABLE_INLINE_EDIT",1,"slds-button","slds-button_icon","slds-button_icon","slds-button_icon-small",3,"click"],["icon","text",3,"addclasses"]],template:function(e,t){1&e&&y.YNc(0,B,2,3,"button",0),2&e&&y.Q6J("ngIf",t.session.isAdmin)},dependencies:[i.O5,T.S,Y.J],encapsulation:2})}return GlobalHeaderLabelInlineEdit})();function P(e,t){if(1&e){const e=y.EpF();y.TgZ(0,"div",1),y.NdJ("click",(function(){y.CHM(e);const t=y.oxw();return y.KtG(t.goAdmin())})),y._UZ(1,"system-utility-icon",2),y.qZA()}if(2&e){const e=y.oxw();y.Q6J("title",e.language.getLabel("LBL_WORKBENCH")),y.xp6(1),y.Q6J("icon","setup")("size","x-small")}}let H=(()=>{class GlobalHeaderWorkbench{session;router;language;constructor(e,t,s){this.session=e,this.router=t,this.language=s}isAdmin(){return this.session.isAdmin}goAdmin(){this.router.navigate(["/admin"])}static ɵfac=function(e){return new(e||GlobalHeaderWorkbench)(y.Y36(x.n),y.Y36(q.F0),y.Y36(Z.d))};static ɵcmp=y.Xpm({type:GlobalHeaderWorkbench,selectors:[["global-header-workbench"]],decls:1,vars:1,consts:[["class","slds-p-around--xx-small",3,"title","click",4,"ngIf"],[1,"slds-p-around--xx-small",3,"title","click"],[3,"icon","size"]],template:function(e,t){1&e&&y.YNc(0,P,2,3,"div",0),2&e&&y.Q6J("ngIf",t.isAdmin())},dependencies:[i.O5,k.r],encapsulation:2})}return GlobalHeaderWorkbench})();var z=s(4411),V=s(26625),$=s(13278),K=s(94664);function X(e,t){if(1&e){const e=y.EpF();y.TgZ(0,"div",2),y.NdJ("click",(function(){y.CHM(e);const t=y.oxw();return y.KtG(t.reloadConf())})),y._UZ(1,"system-utility-icon",3),y.qZA()}2&e&&(y.xp6(1),y.Q6J("icon","sync")("size","x-small"))}function W(e,t){1&e&&(y.TgZ(0,"div",4),y._UZ(1,"system-spinner",5),y.qZA())}let ee=(()=>{class GlobalHeaderReload{session;router;loader;modal;configuration;toast;loadTasks=!1;loadermodal;constructor(e,t,s,i,n,l){this.session=e,this.router=t,this.loader=s,this.modal=i,this.configuration=n,this.toast=l}isAdmin(){return this.session.isAdmin}reloadConf(){this.loadTasks=!0,this.modal.openModal("GlobalHeaderReloadModal",!1).subscribe((e=>{this.loadermodal=e})),this.loader.load().subscribe((e=>{!0===e?(this.toast.sendToast("LBL_DATA_RELOADED"),this.loadTasks=!1,this.loadermodal.instance.self.destroy()):(this.toast.sendToast("error","error","Reload failed"),this.loadTasks=!1,this.loadermodal.instance.self.destroy())}))}static ɵfac=function(e){return new(e||GlobalHeaderReload)(y.Y36(x.n),y.Y36(q.F0),y.Y36(z._),y.Y36(E.o),y.Y36(V.C),y.Y36($.A))};static ɵcmp=y.Xpm({type:GlobalHeaderReload,selectors:[["global-header-reload"]],decls:2,vars:2,consts:[["class","slds-p-around--xx-small","system-title","LBL_RELOAD_CONFIGURATION",3,"click",4,"ngIf"],["class","slds-p-around--xx-small","system-title","LBL_RELOAD_CONFIGURATION",4,"ngIf"],["system-title","LBL_RELOAD_CONFIGURATION",1,"slds-p-around--xx-small",3,"click"],[3,"icon","size"],["system-title","LBL_RELOAD_CONFIGURATION",1,"slds-p-around--xx-small"],["size","12"]],template:function(e,t){1&e&&(y.YNc(0,X,2,2,"div",0),y.YNc(1,W,2,0,"div",1)),2&e&&(y.Q6J("ngIf",t.isAdmin()&&!t.loadTasks),y.xp6(1),y.Q6J("ngIf",t.isAdmin()&&t.loadTasks))},dependencies:[i.O5,T.S,K.W,k.r],encapsulation:2})}return GlobalHeaderReload})();var te=s(30661);let se=(()=>{class GlobalSetup{static ɵfac=function(e){return new(e||GlobalSetup)};static ɵcmp=y.Xpm({type:GlobalSetup,selectors:[["global-setup"]],decls:0,vars:0,template:function(e,t){},encapsulation:2})}return GlobalSetup})();var ie=s(5289),ne=s(53981),le=s(48764),oe=s(30314),ae=s(3144),de=s(64461),re=s(57919);function ce(e,t){if(1&e&&(y.TgZ(0,"div",17),y._uU(1),y._UZ(2,"br"),y.qZA()),2&e){const e=y.oxw();y.xp6(1),y.hij(" password Requirements: ",e.pwdGuideline,"")}}function ue(e,t){if(1&e&&(y.TgZ(0,"div",18),y._uU(1),y.qZA()),2&e){const e=y.oxw();y.xp6(1),y.Oqu(e.pwderror)}}function me(e,t){if(1&e&&(y.TgZ(0,"div",18),y._uU(1),y.qZA()),2&e){const e=y.oxw();y.xp6(1),y.Oqu(e.oldPwError)}}function ge(e,t){if(1&e&&(y.TgZ(0,"div",18),y._uU(1),y.qZA()),2&e){const e=y.oxw();y.xp6(1),y.Oqu(e.pwdreperror)}}const he=function(e){return{"slds-has-error":e}};let pe=(()=>{class GlobalLoginResetPassword{loginService;http;configuration;toast;session;language;oldPassword;closeRenewDialog=new y.vpe;password;repeatPassword;pwdCheck=new RegExp("//");pwdGuideline;posting=!1;constructor(e,t,s,i,n,l){this.loginService=e,this.http=t,this.configuration=s,this.toast=i,this.session=n,this.language=l,this.getInfo()}get oldPwError(){return this.oldPassword==this.password&&"Old password is not allowed to be used as a new password"}get pwderror(){return!(!this.password||this.pwdCheck.test(this.password))&&"Password does not match the Guideline."}get pwdreperror(){return this.password!=this.repeatPassword&&"Inputs for the new Password does not match."}closeDialog(){this.closeRenewDialog.emit(!0)}keypressed(e){"Enter"===e.key&&this.sendNewPass(),"Escape"===e.key&&this.closeDialog()}getInfo(){let e=this.configuration.getCapabilityConfig("userpassword");this.pwdCheck=new RegExp(e.regex);let t=[];e.onelower&&t.push("one lower case"),e.oneupper&&t.push("one upper case"),e.onespecial&&t.push("one special"),e.onenumber&&t.push("one number"),e.minpwdlength&&t.push("minimum length "+e.minpwdlength),this.pwdGuideline=t.join(", ")}get canSave(){return this.password&&0==this.oldPwError&&0==this.pwderror&&0==this.pwdreperror&&!this.posting}sendNewPass(){if(this.canSave){let e=new ae.WM;e=e.set("OAuth-Token",this.session.authData.sessionId),this.posting=!0,this.http.post(this.configuration.getBackendUrl()+"/resetTempPass",{password:this.password},{headers:e}).subscribe((e=>{this.toast.sendToast("Password was successfully changed","success","",5),this.loginService.load()}),(e=>{this.posting=!1}))}}static ɵfac=function(e){return new(e||GlobalLoginResetPassword)(y.Y36(de.j),y.Y36(ae.eN),y.Y36(V.C),y.Y36($.A),y.Y36(x.n),y.Y36(Z.d))};static ɵcmp=y.Xpm({type:GlobalLoginResetPassword,selectors:[["global-login-reset-password"]],hostBindings:function(e,t){1&e&&y.NdJ("keyup",(function(e){return t.keypressed(e)}),!1,y.Jf7)},inputs:{oldPassword:["oldpassword","oldPassword"]},outputs:{closeRenewDialog:"closeRenewDialog"},decls:24,vars:14,consts:[["id","reset-password"],[2,"height","640px"],["role","dialog","tabindex","-1","aria-labelledby","modal-heading-01","aria-describedby","modal-content-id-1",1,"slds-modal","slds-fade-in-open"],[1,"slds-modal__container"],[1,"slds-modal__header"],["title","Close",1,"slds-button","slds-button_icon","slds-modal__close","slds-button_icon-inverse",3,"click"],[3,"icon"],[1,"slds-assistive-text"],["id","modal-heading-01",1,"slds-text-heading_medium","slds-hyphenate"],["id","modal-content-id-1",1,"slds-modal__content","slds-p-around_medium"],["class","slds-m-vertical--medium",4,"ngIf"],[1,"slds-form-element","slds-m-vertical--small",3,"ngClass"],[3,"ngModel","ngModelChange"],["class","slds-form-element__help slds-text-color--error",4,"ngIf"],[1,"slds-modal__footer"],["tabindex","3",1,"slds-button","slds-button--brand",3,"disabled","click"],[1,"slds-backdrop","slds-backdrop_open"],[1,"slds-m-vertical--medium"],[1,"slds-form-element__help","slds-text-color--error"]],template:function(e,t){1&e&&(y.TgZ(0,"div",0)(1,"div",1)(2,"section",2)(3,"div",3)(4,"header",4)(5,"button",5),y.NdJ("click",(function(){return t.closeDialog()})),y._UZ(6,"system-button-icon",6),y.TgZ(7,"span",7),y._uU(8,"Close"),y.qZA()(),y.TgZ(9,"h2",8),y._uU(10,"New password"),y.qZA()(),y.TgZ(11,"div",9),y.YNc(12,ce,3,1,"div",10),y.TgZ(13,"div",11)(14,"system-input-password",12),y.NdJ("ngModelChange",(function(e){return t.password=e})),y.qZA(),y.YNc(15,ue,2,1,"div",13),y.YNc(16,me,2,1,"div",13),y.qZA(),y.TgZ(17,"div",11)(18,"system-input-password",12),y.NdJ("ngModelChange",(function(e){return t.repeatPassword=e})),y.qZA(),y.YNc(19,ge,2,1,"div",13),y.qZA()(),y.TgZ(20,"footer",14)(21,"button",15),y.NdJ("click",(function(){return t.sendNewPass()})),y._uU(22,"Save"),y.qZA()()()(),y._UZ(23,"div",16),y.qZA()()),2&e&&(y.xp6(6),y.Q6J("icon","close"),y.xp6(6),y.Q6J("ngIf",t.pwdGuideline),y.xp6(1),y.Q6J("ngClass",y.VKq(10,he,t.pwderror||t.oldPwError)),y.xp6(1),y.Q6J("ngModel",t.password),y.xp6(1),y.Q6J("ngIf",""!=t.password&&t.pwderror),y.xp6(1),y.Q6J("ngIf",""!=t.password&&t.oldPwError),y.xp6(1),y.Q6J("ngClass",y.VKq(12,he,t.pwdreperror)),y.xp6(1),y.Q6J("ngModel",t.repeatPassword),y.xp6(1),y.Q6J("ngIf",""!=t.repeatPassword&&t.pwdreperror),y.xp6(2),y.Q6J("disabled",!t.canSave))},dependencies:[i.mk,i.O5,n.JJ,n.On,Y.J,re.Z],encapsulation:2})}return GlobalLoginResetPassword})();var fe=s(14505),be=s(42067);function _e(e,t){if(1&e){const e=y.EpF();y.TgZ(0,"button",1),y.NdJ("click",(function(t){y.CHM(e);const s=y.oxw();return y.KtG(s.signIn(t))})),y.TgZ(1,"div",2),y._UZ(2,"img",3),y.TgZ(3,"div"),y._uU(4,"Sign in with Google"),y.qZA()()()}}let ve=(()=>{class GlobalLoginGoogle{backend;configuration;http;loginService;session;libloader;toast;authenticatedUser;visible=!1;disabled=!0;auth2;token=new y.vpe;constructor(e,t,s,i,n,l,o){this.backend=e,this.configuration=t,this.http=s,this.loginService=i,this.session=n,this.libloader=l,this.toast=o,this.configuration.loaded$.subscribe((e=>{e&&this.googleInit()}))}googleInit(){let e=this.configuration.getCapabilityConfig("google_oauth");e?.clientid&&(this.visible=!0,this.libloader.loadFromSource(["https://apis.google.com/js/platform.js"]).subscribe((t=>{gapi.load("auth2",(()=>{this.auth2=gapi.auth2.init({client_id:e.clientid,cookiepolicy:"single_host_origin"}),this.disabled=!1}))}),(e=>{this.disabled=!0})))}signIn(e){e.preventDefault(),e.stopPropagation(),Promise.resolve(this.auth2.signIn()).then((e=>{let t=this.auth2.currentUser.get().getBasicProfile().getEmail();!this.authenticatedUser||this.authenticatedUser&&this.authenticatedUser==t?this.token.emit(e.getAuthResponse().id_token):this.authenticatedUser&&this.authenticatedUser!=t&&this.toast.sendToast("Wrong username","warning","usernames do not match, pleas elogin with the proper user")})).catch((e=>{this.toast.sendToast("Error with Google Login","error")}))}static ɵfac=function(e){return new(e||GlobalLoginGoogle)(y.Y36(fe.y),y.Y36(V.C),y.Y36(ae.eN),y.Y36(de.j),y.Y36(x.n),y.Y36(be.$),y.Y36($.A))};static ɵcmp=y.Xpm({type:GlobalLoginGoogle,selectors:[["global-login-google"]],inputs:{authenticatedUser:"authenticatedUser"},outputs:{token:"token"},decls:1,vars:1,consts:[["class","slds-button slds-button_neutral slds-size--1-of-1",3,"click",4,"ngIf"],[1,"slds-button","slds-button_neutral","slds-size--1-of-1",3,"click"],[1,"slds-align--absolute-center","slds-grid","slds-grid--vertical-align-center"],["src","https://developers.google.com/identity/images/g-logo.png",2,"height","18px","width","18px","margin-right","24px"]],template:function(e,t){1&e&&y.YNc(0,_e,5,0,"button",0),2&e&&y.Q6J("ngIf",t.visible)},dependencies:[i.O5],encapsulation:2})}return GlobalLoginGoogle})();var ye=s(74142),xe=s(54021),we=s(59621),Ze=s(83499),Te=s(1916),Ce=s(64481);const ke=["twofactorinput"];function Ae(e,t){if(1&e){const e=y.EpF();y.TgZ(0,"div",22)(1,"div",23),y._UZ(2,"system-utility-icon",24),y.TgZ(3,"input",25,26),y.NdJ("ngModelChange",(function(t){y.CHM(e);const s=y.oxw(2);return y.KtG(s.code2fa=t)})),y.qZA()()()}if(2&e){const e=y.oxw(2);let t;y.xp6(3),y.Q6J("disabled",e.loggingIn)("ngModel",e.code2fa)("placeholder",null!==(t=null==e.loginLabels.LBL_ENTER_CODE?null:e.loginLabels.LBL_ENTER_CODE.default)&&void 0!==t?t:"Enter code")}}function Le(e,t){if(1&e){const e=y.EpF();y.ynx(0),y.TgZ(1,"div",7)(2,"div",8),y._UZ(3,"system-utility-icon",16),y.TgZ(4,"input",17),y.NdJ("ngModelChange",(function(t){y.CHM(e);const s=y.oxw();return y.KtG(s.password=t)})),y.qZA()(),y.YNc(5,Ae,5,3,"div",18),y.qZA(),y.TgZ(6,"div",19)(7,"button",20),y.NdJ("click",(function(){y.CHM(e);const t=y.oxw();return y.KtG(t.relogin())})),y._UZ(8,"system-label",21),y.qZA()(),y.BQk()}if(2&e){const e=y.oxw();y.xp6(4),y.Q6J("disabled",e.loggingIn)("ngModel",e.password),y.xp6(1),y.Q6J("ngIf",e.twoFactorAuthCodeRequired),y.xp6(2),y.Q6J("disabled",!e.password)}}function Ie(e,t){if(1&e){const e=y.EpF();y.TgZ(0,"div",27)(1,"global-login-oauth2",28),y.NdJ("token",(function(t){y.CHM(e);const s=y.oxw();return y.KtG(s.tokenLogin(t))})),y.qZA()()}if(2&e){const e=y.oxw();y.xp6(1),y.Q6J("authenticatedUser",e.session.authData.userName)("issuer",e.login.oauthIssuer)}}let Se=(()=>{class GlobalReLogin{login;toast;session;configuration;twofactorinput;self;password;loggedin=new y.vpe;loggingIn=!1;twoFactorAuthCodeRequired=!1;code2fa;constructor(e,t,s,i){this.login=e,this.toast=t,this.session=s,this.configuration=i}get loginLabels(){return this.configuration.data.languages?.required_labels??{}}tokenLogin(e){this.loggingIn=!0,this.login.relogin(null,e.tokenObject).subscribe({next:e=>{this.loggedin.emit(!0),this.close()},error:()=>{this.loggingIn=!1}})}relogin(){this.loggingIn=!0,this.login.authData.code2fa=this.code2fa,this.login.relogin(this.password,null).subscribe({next:e=>{this.loggedin.emit(!0),this.close()},error:e=>{4==e.errorCode&&(this.toast.sendToast(e.message,"success"),this.twoFactorAuthCodeRequired=!0,setTimeout((()=>{this.twofactorinput&&this.twofactorinput.element.nativeElement.focus()}))),this.loggingIn=!1}})}logout(){this.login.logout(!0),this.close()}close(){this.self.destroy()}static ɵfac=function(e){return new(e||GlobalReLogin)(y.Y36(de.j),y.Y36($.A),y.Y36(x.n),y.Y36(V.C))};static ɵcmp=y.Xpm({type:GlobalReLogin,selectors:[["global-re-login"]],viewQuery:function(e,t){if(1&e&&y.Gf(ke,5,y.s_b),2&e){let e;y.iGM(e=y.CRH())&&(t.twofactorinput=e.first)}},outputs:{loggedin:"loggedin"},decls:16,vars:5,consts:[["size","prompt"],[3,"hiddenCloseButton"],["label","MSG_SESSIONEXPIRED"],["margin","medium",3,"system-overlay-loading-spinner"],[1,"slds-grid","slds-grid--vertical"],[1,"slds-p-vertical--small","slds-align--absolute-center"],["label","MSG_SESSIONEXPIRED","length","long"],[1,"slds-form-element","slds-m-vertical--small"],[1,"slds-form-element__control","slds-input-has-icon","slds-input-has-icon_left"],["icon","user","addclasses","slds-input__icon slds-icon-text-default"],["disabled","","type","text","name","username",1,"slds-input","slds-p-vertical--xx-small",3,"ngModel","ngModelChange"],[4,"ngIf"],["class","slds-p-top--small",4,"ngIf"],[1,"slds-p-top--small","slds-m-top--small","slds-border--top"],[1,"slds-button","slds-button--neutral","slds-button_stretch",3,"click"],["label","LBL_LOGOUT"],["icon","lock","addclasses","slds-icon slds-input__icon slds-input__icon_left slds-icon-text-default"],["type","password","name","password","autocomplete","","tabindex","2","placeholder","Password",1,"slds-input","slds-p-vertical--xx-small",3,"disabled","ngModel","ngModelChange"],["class","slds-form-element slds-m-vertical--small slds-grid slds-grid--vertical-align-center",4,"ngIf"],[1,"slds-p-vertical--xx-small"],[1,"slds-button","slds-button--brand","slds-button_stretch",3,"disabled","click"],["label","LBL_LOGIN"],[1,"slds-form-element","slds-m-vertical--small","slds-grid","slds-grid--vertical-align-center"],[1,"slds-form-element__control","slds-input-has-icon","slds-input-has-icon_left","slds-grow"],["icon","scan","addclasses","slds-icon slds-input__icon slds-input__icon_left slds-icon-text-default"],["type","text","name","code2fa","autocomplete","off","tabindex","2",1,"slds-input","slds-p-vertical--xx-small",3,"disabled","ngModel","placeholder","ngModelChange"],["twofactorinput",""],[1,"slds-p-top--small"],[3,"authenticatedUser","issuer","token"]],template:function(e,t){1&e&&(y.TgZ(0,"system-modal",0)(1,"system-modal-header",1),y._UZ(2,"system-label",2),y.qZA(),y.TgZ(3,"system-modal-content",3)(4,"div",4)(5,"div",5),y._UZ(6,"system-label",6),y.qZA(),y.TgZ(7,"div",7)(8,"div",8),y._UZ(9,"system-utility-icon",9),y.TgZ(10,"input",10),y.NdJ("ngModelChange",(function(e){return t.session.authData.userName=e})),y.qZA()()(),y.YNc(11,Le,9,4,"ng-container",11),y.YNc(12,Ie,2,2,"div",12),y.TgZ(13,"div",13)(14,"button",14),y.NdJ("click",(function(){return t.logout()})),y._UZ(15,"system-label",15),y.qZA()()()()()),2&e&&(y.xp6(1),y.Q6J("hiddenCloseButton",!0),y.xp6(2),y.Q6J("system-overlay-loading-spinner",t.loggingIn),y.xp6(7),y.Q6J("ngModel",t.session.authData.userName),y.xp6(1),y.Q6J("ngIf",!t.login.oauthIssuer||"SpiceCRM"==t.login.oauthIssuer),y.xp6(1),y.Q6J("ngIf","SpiceCRM"!=t.login.oauthIssuer))},dependencies:[i.O5,n.Fj,n.JJ,n.On,xe._,C._,we.j,Ze.x,Te.y,k.r,Ce.Q],encapsulation:2})}return GlobalReLogin})();var Me=s(17445),Je=s(75767),Oe=s(78026);function Ne(e,t){1&e&&(y.TgZ(0,"div",6),y._UZ(1,"system-spinner",14)(2,"system-label",15),y.qZA())}function Fe(e,t){if(1&e&&y._UZ(0,"system-progress-bar",16),2&e){const e=y.oxw();y.Q6J("progress",e.progress)("hideText",!0)}}let qe=(()=>{class GlobalReConnect{http;configuration;login;self;password;connected=new y.vpe;timeToNextCheck=1e3;timerSubscription;constructor(e,t,s){this.http=e,this.configuration=t,this.login=s}ngOnInit(){this.timerSubscription=(0,Me.F)(10).subscribe((e=>{this.timeToNextCheck--,this.checkReconnect()}))}ngOnDestroy(){this.timerSubscription.unsubscribe()}checkReconnect(){0==this.timeToNextCheck&&this.reconnect()}get progress(){return this.timeToNextCheck/10}reconnect(){let e=this.configuration.getBackendUrl()+"/sysinfo";this.http.get(e).subscribe((e=>{this.connected.emit(!0),this.close()}),(e=>{console.log(e),this.timeToNextCheck=1e3}))}logout(){this.login.logout(!0),this.close()}close(){this.self.destroy()}static ɵfac=function(e){return new(e||GlobalReConnect)(y.Y36(ae.eN),y.Y36(V.C),y.Y36(de.j))};static ɵcmp=y.Xpm({type:GlobalReConnect,selectors:[["global-re-connect"]],outputs:{connected:"connected"},decls:15,vars:3,consts:[["size","prompt"],[3,"hiddenCloseButton"],["label","MSG_CONNECTION_LOST"],["margin","large"],[1,"slds-grid","slds-grid_vertical","slds-size--1-of-1","slds-align_absolute-center"],["label","MSG_CONNECTION_LOST","length","long"],[1,"slds-grid","slds-grid_vertical-align-center"],[1,"slds-grow","slds-p-right--small"],["class","slds-grid slds-grid_vertical-align-center",4,"ngIf"],[3,"progress","hideText",4,"ngIf"],[1,"slds-button","slds-button--neutral",3,"click"],["label","LBL_LOGOUT"],[1,"slds-button","slds-button--brand",3,"click"],["label","LBL_RECONNECT_NOW"],["size","16"],["label","LBL_RECONNECTING",1,"slds-p-left--small"],[3,"progress","hideText"]],template:function(e,t){1&e&&(y.TgZ(0,"system-modal",0)(1,"system-modal-header",1),y._UZ(2,"system-label",2),y.qZA(),y.TgZ(3,"system-modal-content",3)(4,"div",4),y._UZ(5,"system-label",5),y.qZA()(),y.TgZ(6,"system-modal-footer")(7,"div",6)(8,"div",7),y.YNc(9,Ne,3,0,"div",8),y.YNc(10,Fe,1,2,"system-progress-bar",9),y.qZA(),y.TgZ(11,"button",10),y.NdJ("click",(function(){return t.logout()})),y._UZ(12,"system-label",11),y.qZA(),y.TgZ(13,"button",12),y.NdJ("click",(function(){return t.reconnect()})),y._UZ(14,"system-label",13),y.qZA()()()()),2&e&&(y.xp6(1),y.Q6J("hiddenCloseButton",!0),y.xp6(8),y.Q6J("ngIf",t.timeToNextCheck<0),y.xp6(1),y.Q6J("ngIf",t.timeToNextCheck>0))},dependencies:[i.O5,C._,we.j,Ze.x,Je.p,Te.y,Oe.J,K.W],encapsulation:2})}return GlobalReConnect})();var Ee=s(94365),Ye=s(66119),De=s(75853),Ue=s(32294),Qe=s(33369),Re=s(10382),je=s(7763),Be=s(93333);const Ge=["menulist"],Pe=["menucontainer"];function He(e,t){if(1&e){const e=y.EpF();y.TgZ(0,"div",11)(1,"button",12),y.NdJ("click",(function(){y.CHM(e);const t=y.oxw();return y.KtG(t.toggleOpen())})),y._UZ(2,"system-button-icon",13),y.qZA()()}2&e&&(y.xp6(2),y.Q6J("icon","chevrondown"))}const ze=function(e){return{"slds-hide":e}},Ve=function(e){return{"slds-disabled-text":e}};function $e(e,t){if(1&e){const e=y.EpF();y.TgZ(0,"li",15),y.NdJ("click",(function(){const t=y.CHM(e).$implicit,s=y.oxw(2);return y.KtG(s.propagateclick(t.id))})),y.TgZ(1,"a",16),y._UZ(2,"global-navigation-menu-item-action-container",17),y.qZA()()}if(2&e){const e=t.$implicit,s=y.oxw(2);y.Q6J("ngClass",y.VKq(3,ze,s.isHidden(e.id))),y.xp6(2),y.Q6J("ngClass",y.VKq(5,Ve,s.isDisabled(e.id)))("actionitem",e)}}function Ke(e,t){if(1&e&&(y.ynx(0),y.YNc(1,$e,3,7,"li",14),y.BQk()),2&e){const e=y.oxw();y.xp6(1),y.Q6J("ngForOf",e.itemMenu)}}function Xe(e,t){if(1&e){const e=y.EpF();y.TgZ(0,"li",23),y.NdJ("click",(function(){const t=y.CHM(e).$implicit,s=y.oxw(2);return y.KtG(s.navigateRecent(t.item_id))})),y.TgZ(1,"a",16)(2,"span",2),y._uU(3),y.qZA()()()}if(2&e){const e=t.$implicit;y.xp6(3),y.Oqu(e.item_summary)}}function We(e,t){if(1&e&&(y.ynx(0),y._UZ(1,"li",18),y.TgZ(2,"li",19)(3,"span",20),y._UZ(4,"system-label",21),y.qZA()(),y.YNc(5,Xe,4,1,"li",22),y.BQk()),2&e){const e=y.oxw();y.xp6(5),y.Q6J("ngForOf",e.favorites)}}const et=function(e,t,s){return{module:e,data:t,id:s}};function tt(e,t){if(1&e){const e=y.EpF();y.TgZ(0,"li",27),y.NdJ("click",(function(){const t=y.CHM(e).$implicit,s=y.oxw(2);return y.KtG(s.navigateRecent(t.item_id))})),y.TgZ(1,"a",16)(2,"span",2),y._uU(3),y.qZA()()()}if(2&e){const e=t.$implicit,s=y.oxw(2);y.Q6J("system-model-provider",y.kEZ(2,et,s.model.module,e.data,e.id)),y.xp6(3),y.Oqu(e.data.summary_text)}}function st(e,t){1&e&&(y.TgZ(0,"li",28),y._UZ(1,"system-label",29),y.qZA())}function it(e,t){if(1&e&&(y.ynx(0),y._UZ(1,"li",18),y.TgZ(2,"li",19)(3,"span",20),y._UZ(4,"system-label",24),y.qZA()(),y.YNc(5,tt,4,6,"li",25),y.YNc(6,st,2,0,"li",26),y.BQk()),2&e){const e=y.oxw();y.xp6(5),y.Q6J("ngForOf",e.recentitems),y.xp6(1),y.Q6J("ngIf",0==e.recentitems.length&&e.isInitialized)}}function nt(e,t){1&e&&y._UZ(0,"system-spinner",30)}const lt=function(e){return{"slds-is-open":e}};let ot=(()=>{class GlobalNavigationMenuItem{metadata;language;router;elementRef;broadcast;navigation;model;view;recent;favorite;renderer;menulist;menucontainer;menuItemlist;clickListener;itemtext="test";item={module:null,name:null};isOpen=!1;isInitialized=!1;itemMenu=[];favorites=[];menucomponents=[];constructor(e,t,s,i,n,l,o,a,d,r,c){this.metadata=e,this.language=t,this.router=s,this.elementRef=i,this.broadcast=n,this.navigation=l,this.model=o,this.view=a,this.recent=d,this.favorite=r,this.renderer=c,this.view.displayLabels=!1}executeMenuItem(e){this.itemMenu.some(((t,s)=>{if(t.id===e){if("add"===t.action)this.isOpen=!1,this.model.addModel();return!0}}))}navigateTo(){this.isOpen=!1,this.router.navigate(["/module/"+this.item.module])}navigateRecent(e){this.isOpen=!1,this.router.navigate(["/module/"+this.item.module+"/"+e])}ngOnInit(){let e=this.metadata.getComponentConfig("GlobalNavigationMenuItem",this.item.module);e.actionset?this.itemMenu=this.metadata.getActionSetItems(e.actionset):this.itemMenu=this.metadata.getModuleMenu(this.item.module),this.model.module=this.item.module}toggleOpen(){this.isInitialized||this.initialize(),this.isOpen=!this.isOpen,this.isOpen?(this.favorites=this.getFavorites(),this.buildMenu(),this.clickListener=this.renderer.listen("document","click",(e=>this.onClick(e)))):this.clickListener&&this.clickListener()}initialize(){"Home"!=this.item.module?this.recent.getModuleRecent(this.item.module).subscribe((e=>{this.isInitialized=!0})):this.isInitialized=!0}get recentitems(){return this.recent.moduleItems[this.item.module]?this.recent.moduleItems[this.item.module]:[]}getFavorites(){return this.favorite.getFavorites(this.item.module)}onClick(e){(!this.elementRef.nativeElement.contains(e.target)||this.elementRef.nativeElement.contains(e.target)&&this.menulist.element.nativeElement.contains(e.target))&&(this.isOpen=!1)}hasMenu(){return this.itemMenu.length>0||this.metadata.getModuleTrackflag(this.item.module)}getMenuLabel(e){return this.language.getLabel(this.item.module,e)}isActive(){return this.navigation.activeModule==this.item.module}ngAfterViewInit(){this.broadcast.broadcastMessage("navigation.itemadded",{module:this.item.module,width:this.elementRef.nativeElement.offsetWidth}),this.model.module=this.item.module}buildMenu(){return!0}ngOnDestroy(){this.destroyMenu()}destroyMenu(){for(let e of this.menucomponents)e.destroy()}isDisabled(e){return!!this.menuItemlist&&this.menuItemlist.find((t=>t.id==e))?.disabled}isHidden(e){return!!this.menuItemlist&&this.menuItemlist.find((t=>t.id==e))?.hidden}propagateclick(e){this.menuItemlist.some((t=>{if(t.id==e)return t.disabled||t.execute(),!0}))}static ɵfac=function(e){return new(e||GlobalNavigationMenuItem)(y.Y36(w.Pu),y.Y36(Z.d),y.Y36(q.F0),y.Y36(y.SBq),y.Y36(Qe.f),y.Y36(F.G),y.Y36(S.o),y.Y36(Ue.e),y.Y36(Re.h),y.Y36(N.G),y.Y36(y.Qsj))};static ɵcmp=y.Xpm({type:GlobalNavigationMenuItem,selectors:[["global-navigation-menu-item"]],viewQuery:function(e,t){if(1&e&&(y.Gf(Ge,7,y.s_b),y.Gf(Pe,7,y.s_b),y.Gf(De.r,5)),2&e){let e;y.iGM(e=y.CRH())&&(t.menulist=e.first),y.iGM(e=y.CRH())&&(t.menucontainer=e.first),y.iGM(e=y.CRH())&&(t.menuItemlist=e)}},hostVars:4,hostBindings:function(e,t){2&e&&y.ekj("slds-context-bar__item",!0)("slds-is-active",t.isActive())},inputs:{itemtext:"itemtext",item:"item"},features:[y._Bn([S.o,Ue.e])],decls:14,vars:9,consts:[["aria-haspopup","true",1,"slds-context-bar__dropdown-trigger","slds-dropdown-trigger","slds-dropdown-trigger--click",3,"ngClass"],["href","javascript:void(0);",1,"slds-context-bar__label-action",3,"click"],[1,"slds-truncate"],[3,"module"],["class","slds-context-bar__icon-action slds-p-left--none",4,"ngIf"],[1,"slds-dropdown","slds-nubbin--top"],["role","menu",1,"slds-dropdown__list"],["menulist",""],["menucontainer",""],[4,"ngIf"],["size","16",4,"ngIf"],[1,"slds-context-bar__icon-action","slds-p-left--none"],[1,"slds-button","slds-button--icon","slds-context-bar__button",3,"click"],[3,"icon"],["class","slds-dropdown__item","role","presentation",3,"ngClass","click",4,"ngFor","ngForOf"],["role","presentation",1,"slds-dropdown__item",3,"ngClass","click"],["href","javascript:void(0);","role","menuitem"],[1,"slds-truncate",3,"ngClass","actionitem"],["role","separator",1,"slds-has-divider--top-space"],["role","separator",1,"slds-dropdown__header"],[1,"slds-text-title--caps"],["label","LBL_FAVORITES"],["class","slds-dropdown__item","role","presentation",3,"click",4,"ngFor","ngForOf"],["role","presentation",1,"slds-dropdown__item",3,"click"],["label","LBL_RECENTLYVIEWED"],["class","slds-dropdown__item","role","presentation",3,"system-model-provider","click",4,"ngFor","ngForOf"],["class","slds-dropdown__item slds-align--absolute-center slds-text-color_inverse-weak slds-p-around--xx-small",4,"ngIf"],["role","presentation",1,"slds-dropdown__item",3,"system-model-provider","click"],[1,"slds-dropdown__item","slds-align--absolute-center","slds-text-color_inverse-weak","slds-p-around--xx-small"],["label","LBL_NO_ENTRIES"],["size","16"]],template:function(e,t){1&e&&(y.TgZ(0,"li",0)(1,"a",1),y.NdJ("click",(function(){return t.navigateTo()})),y.TgZ(2,"span",2),y._UZ(3,"system-label-modulename",3),y.qZA()(),y.YNc(4,He,3,1,"div",4),y.TgZ(5,"div",5)(6,"ul",6,7),y._UZ(8,"div",null,8),y.YNc(10,Ke,2,1,"ng-container",9),y.YNc(11,We,6,1,"ng-container",9),y.YNc(12,it,7,2,"ng-container",9),y.qZA(),y.YNc(13,nt,1,0,"system-spinner",10),y.qZA()()),2&e&&(y.Q6J("ngClass",y.VKq(7,lt,t.isOpen)),y.xp6(3),y.Q6J("module",t.item.name),y.xp6(1),y.Q6J("ngIf",t.hasMenu()),y.xp6(6),y.Q6J("ngIf",t.itemMenu.length>0),y.xp6(1),y.Q6J("ngIf",t.favorites.length>0),y.xp6(1),y.Q6J("ngIf","Home"!=t.item.module),y.xp6(1),y.Q6J("ngIf",!t.isInitialized))},dependencies:[i.mk,i.sg,i.O5,je.u,Y.J,C._,Be.M,K.W,De.r],encapsulation:2})}return GlobalNavigationMenuItem})(),at=(()=>{class GlobalNavigationMenuItemIcon{icon="";getSvgHRef(){return"./vendor/sldassets/icons/utility-sprite/svg/symbols.svg#"+this.icon}static ɵfac=function(e){return new(e||GlobalNavigationMenuItemIcon)};static ɵcmp=y.Xpm({type:GlobalNavigationMenuItemIcon,selectors:[["global-nevigation-menu-item-icon"]],inputs:{icon:"icon"},decls:2,vars:1,consts:[["aria-hidden","true",1,"slds-icon","slds-icon--x-small","slds-icon-text-default","slds-m-right--x-small"]],template:function(e,t){1&e&&(y.O4$(),y.TgZ(0,"svg",0),y._UZ(1,"use"),y.qZA()),2&e&&(y.xp6(1),y.uIk("href",t.getSvgHRef(),null,"xlink"))},encapsulation:2})}return GlobalNavigationMenuItemIcon})(),dt=(()=>{class GlobalNavigationMenuItemNew{language;model;constructor(e,t){this.language=e,this.model=t}exceuteItem(){this.model.id="",this.model.addModel()}static ɵfac=function(e){return new(e||GlobalNavigationMenuItemNew)(y.Y36(Z.d),y.Y36(S.o))};static ɵcmp=y.Xpm({type:GlobalNavigationMenuItemNew,selectors:[["global-navigation-menu-item-new"]],decls:5,vars:3,consts:[["role","presentation",1,"slds-dropdown__item",3,"click"],["href","javascript:void(0);","role","menuitem"],[1,"slds-truncate"],[3,"icon"],[3,"module","singular"]],template:function(e,t){1&e&&(y.TgZ(0,"li",0),y.NdJ("click",(function(){return t.exceuteItem()})),y.TgZ(1,"a",1)(2,"span",2),y._UZ(3,"global-nevigation-menu-item-icon",3)(4,"system-label-modulename",4),y.qZA()()()),2&e&&(y.xp6(3),y.Q6J("icon","add"),y.xp6(1),y.Q6J("module",t.model.module)("singular",!0))},dependencies:[Be.M,at],encapsulation:2})}return GlobalNavigationMenuItemNew})(),rt=(()=>{class GlobalNavigationMenuItemActionNew{language;model;metadata;disabled=!0;constructor(e,t,s){this.language=e,this.model=t,this.metadata=s}execute(){this.model.id="",this.model.addModel()}ngOnInit(){this.model.module&&this.metadata.checkModuleAcl(this.model.module,"create")&&(this.disabled=!1)}static ɵfac=function(e){return new(e||GlobalNavigationMenuItemActionNew)(y.Y36(Z.d),y.Y36(S.o),y.Y36(w.Pu))};static ɵcmp=y.Xpm({type:GlobalNavigationMenuItemActionNew,selectors:[["global-navigation-menu-item-action-new"]],decls:3,vars:2,consts:[[1,"slds-truncate","slds-grid","slds-grid--vertical-align-center"],["icon","add","size","x-small",1,"slds-p-right--x-small"],[3,"module","singular"]],template:function(e,t){1&e&&(y.TgZ(0,"div",0),y._UZ(1,"system-utility-icon",1)(2,"system-label-modulename",2),y.qZA()),2&e&&(y.xp6(2),y.Q6J("module",t.model.module)("singular",!0))},dependencies:[Be.M,k.r],encapsulation:2})}return GlobalNavigationMenuItemActionNew})(),ct=(()=>{class GlobalNavigationMenuItemRoute{metadata;language;model;router;clickListener;actionconfig={};constructor(e,t,s,i){this.metadata=e,this.language=t,this.model=s,this.router=i}get actionicon(){return this.actionconfig.icon?this.actionconfig.icon:"chevronright"}get actionlabel(){if(this.actionconfig.label&&this.actionconfig.label.indexOf(":")>-1){let e=this.actionconfig.label.split(":");return this.language.getLabel(e[0],e[1])}return this.language.getLabel(this.actionconfig.label)}exceuteItem(){this.router.navigate([this.actionconfig.route])}static ɵfac=function(e){return new(e||GlobalNavigationMenuItemRoute)(y.Y36(w.Pu),y.Y36(Z.d),y.Y36(S.o),y.Y36(q.F0))};static ɵcmp=y.Xpm({type:GlobalNavigationMenuItemRoute,selectors:[["global-navigation-menu-item-route"]],decls:5,vars:2,consts:[["role","presentation",1,"slds-dropdown__item",3,"click"],["href","javascript:void(0);","role","menuitem"],[1,"slds-truncate"],[3,"icon"]],template:function(e,t){1&e&&(y.TgZ(0,"li",0),y.NdJ("click",(function(){return t.exceuteItem()})),y.TgZ(1,"a",1)(2,"span",2),y._UZ(3,"global-nevigation-menu-item-icon",3),y._uU(4),y.qZA()()()),2&e&&(y.xp6(3),y.Q6J("icon",t.actionicon),y.xp6(1),y.hij(" ",t.actionlabel," "))},dependencies:[at],encapsulation:2})}return GlobalNavigationMenuItemRoute})(),ut=(()=>{class GlobalNavigationMenuItemActionRoute{language;model;metadata;router;actionconfig={};constructor(e,t,s,i){this.language=e,this.model=t,this.metadata=s,this.router=i}get actionicon(){return this.actionconfig.icon?this.actionconfig.icon:"chevronright"}get disabled(){return this.actionconfig.acl&&!this.metadata.checkModuleAcl(this.model.module,this.actionconfig.acl)}get hidden(){return this.actionconfig.acl&&!this.metadata.checkModuleAcl(this.model.module,this.actionconfig.acl)}get actionlabel(){if(this.actionconfig.label&&this.actionconfig.label.indexOf(":")>-1){let e=this.actionconfig.label.split(":");return this.language.getLabel(e[0],e[1])}return this.language.getLabel(this.actionconfig.label)}execute(){this.disabled||this.router.navigate([this.actionconfig.route])}static ɵfac=function(e){return new(e||GlobalNavigationMenuItemActionRoute)(y.Y36(Z.d),y.Y36(S.o),y.Y36(w.Pu),y.Y36(q.F0))};static ɵcmp=y.Xpm({type:GlobalNavigationMenuItemActionRoute,selectors:[["ng-component"]],decls:3,vars:2,consts:[[1,"slds-truncate","slds-grid","slds-grid--vertical-align-center"],["size","x-small",1,"slds-p-right--x-small",3,"icon"]],template:function(e,t){1&e&&(y.TgZ(0,"div",0),y._UZ(1,"system-utility-icon",1),y._uU(2),y.qZA()),2&e&&(y.xp6(1),y.Q6J("icon",t.actionicon),y.xp6(1),y.hij(" ",t.actionlabel,"\n"))},dependencies:[k.r],encapsulation:2})}return GlobalNavigationMenuItemActionRoute})();function mt(e,t){if(1&e){const e=y.EpF();y.TgZ(0,"li",10),y.NdJ("click",(function(){const t=y.CHM(e).$implicit,s=y.oxw();return y.KtG(s.navigateTo(t))})),y.TgZ(1,"a",11)(2,"span",2),y._UZ(3,"system-label-modulename",12),y.qZA()()()}if(2&e){const e=t.$implicit;y.xp6(3),y.Q6J("module",e)}}let gt=(()=>{class GlobalNavigationMenuMore{language;router;elementRef;broadcast;constructor(e,t,s,i){this.language=e,this.router=t,this.elementRef=s,this.broadcast=i}moreMenuItems=[];navigateTo(e){this.router.navigate(["/module/"+e])}ngAfterViewInit(){this.broadcast.broadcastMessage("navigation.moreadded",{module:"more",width:this.elementRef.nativeElement.offsetWidth})}static ɵfac=function(e){return new(e||GlobalNavigationMenuMore)(y.Y36(Z.d),y.Y36(q.F0),y.Y36(y.SBq),y.Y36(Qe.f))};static ɵcmp=y.Xpm({type:GlobalNavigationMenuMore,selectors:[["global-navigation-menu-more"]],hostVars:2,hostBindings:function(e,t){2&e&&y.ekj("slds-context-bar__item",!0)},decls:10,vars:2,consts:[["aria-haspopup","true",1,"slds-context-bar__dropdown-trigger","slds-dropdown-trigger","slds-dropdown-trigger--hover"],["href","javascript:void(0);",1,"slds-context-bar__label-action"],[1,"slds-truncate"],["label","LBL_MORE"],[1,"slds-context-bar__icon-action","slds-p-left--none"],[1,"slds-button","slds-button--icon","slds-context-bar__button"],[3,"icon"],[1,"slds-dropdown","slds-dropdown--right"],["role","menu",1,"slds-dropdown__list"],["class","slds-dropdown__item","role","presentation",3,"click",4,"ngFor","ngForOf"],["role","presentation",1,"slds-dropdown__item",3,"click"],["href","javascript:void(0);","role","menuitem"],[3,"module"]],template:function(e,t){1&e&&(y.TgZ(0,"li",0)(1,"a",1)(2,"span",2),y._UZ(3,"system-label",3),y.qZA()(),y.TgZ(4,"div",4)(5,"button",5),y._UZ(6,"system-button-icon",6),y.qZA()(),y.TgZ(7,"div",7)(8,"ul",8),y.YNc(9,mt,4,1,"li",9),y.qZA()()()),2&e&&(y.xp6(6),y.Q6J("icon","down"),y.xp6(3),y.Q6J("ngForOf",t.moreMenuItems))},dependencies:[i.sg,Y.J,C._,Be.M],encapsulation:2})}return GlobalNavigationMenuMore})();var ht=s(22954),pt=s(27877),ft=s(74553),bt=s(92251),_t=s(82995);const vt=["containercontent"],yt=function(e,t){return{"slds-is-closed":e,"slds-is-open":t}},xt=function(e){return{calldata:e}};let wt=(()=>{class GlobalDockedComposerCall{backend;dockedComposer;telephony;language;ViewContainerRef;containercontent;calldata;isClosed=!1;constructor(e,t,s,i,n){this.backend=e,this.dockedComposer=t,this.telephony=s,this.language=i,this.ViewContainerRef=n}get callicon(){if("disconnected"==this.calldata.status)return"end_call";switch(this.calldata.direction){case"inbound":return"incoming_call";case"outbound":return"outbound_call"}return"call"}closeComposer(){this.telephony.removeCallById(this.calldata.id)}endCall(){this.telephony.terminateCall(this.calldata.id)}toggleClosed(){this.isClosed=!this.isClosed}get toggleIcon(){return this.isClosed?"erect_window":"minimize_window"}get canEndCall(){return this.calldata.callid&&"disconnected"!=this.calldata.status&&"error"!=this.calldata.status}static ɵfac=function(e){return new(e||GlobalDockedComposerCall)(y.Y36(fe.y),y.Y36(M.m),y.Y36(bt.n),y.Y36(Z.d),y.Y36(y.s_b))};static ɵcmp=y.Xpm({type:GlobalDockedComposerCall,selectors:[["global-docked-composer-call"]],viewQuery:function(e,t){if(1&e&&y.Gf(vt,7,y.s_b),2&e){let e;y.iGM(e=y.CRH())&&(t.containercontent=e.first)}},inputs:{calldata:"calldata"},decls:22,vars:13,consts:[["role","dialog",1,"slds-docked-composer","slds-grid","slds-grid_vertical","slds-m-horizontal--x-small",3,"ngClass"],["aria-live","assertive",1,"slds-docked-composer__header","slds-grid","slds-shrink-none"],[1,"slds-media","slds-media_center","slds-no-space"],[1,"slds-media__figure","slds-m-right_x-small"],[1,"slds-icon_container"],["sprite","utility","size","x-small",3,"icon"],[1,"slds-media__body"],[1,"slds-truncate"],[1,"slds-col_bump-left","slds-shrink-none"],[1,"slds-button","slds-button_icon","slds-button_icon",3,"click"],[3,"icon"],[1,"slds-grow"],["component","TelephonyCallPanel",3,"componentattributes"],[1,"slds-docked-composer__footer","slds-shrink-none"],[1,"slds-button","slds-button--neutral","slds-col_bump-left",3,"disabled","click"],["icon","end_call"],["label","LBL_END"],[1,"slds-button","slds-button--brand","slds-col_bump-left",3,"click"],["label","LBL_CLOSE"]],template:function(e,t){1&e&&(y.TgZ(0,"section",0)(1,"header",1)(2,"div",2)(3,"div",3)(4,"span",4),y._UZ(5,"system-icon",5),y.qZA()(),y.TgZ(6,"div",6)(7,"h2",7),y._uU(8),y.qZA()()(),y.TgZ(9,"div",8)(10,"button",9),y.NdJ("click",(function(){return t.toggleClosed()})),y._UZ(11,"system-button-icon",10),y.qZA(),y.TgZ(12,"button",9),y.NdJ("click",(function(){return t.closeComposer()})),y._UZ(13,"system-button-icon",10),y.qZA()()(),y.TgZ(14,"div",11),y._UZ(15,"system-dynamic-component",12),y.qZA(),y.TgZ(16,"footer",13)(17,"button",14),y.NdJ("click",(function(){return t.endCall()})),y._UZ(18,"system-button-icon",15)(19,"system-label",16),y.qZA(),y.TgZ(20,"button",17),y.NdJ("click",(function(){return t.closeComposer()})),y._UZ(21,"system-label",18),y.qZA()()()),2&e&&(y.Q6J("ngClass",y.WLB(8,yt,t.isClosed,!t.isClosed)),y.xp6(5),y.Q6J("icon",t.callicon),y.xp6(3),y.AsE("",t.calldata.direction," Call ",t.calldata.status,""),y.xp6(3),y.Q6J("icon",t.toggleIcon),y.xp6(2),y.Q6J("icon","close"),y.xp6(2),y.Q6J("componentattributes",y.VKq(11,xt,t.calldata)),y.xp6(2),y.Q6J("disabled",!t.canEndCall))},dependencies:[i.mk,Y.J,_t.T,J.f,C._],encapsulation:2})}return GlobalDockedComposerCall})();var Zt=s(26951),Tt=s(11604),Ct=s(2294),kt=s(43428);let At=(()=>{class GlobalDockedComposerModal{metadata;dockedComposer;language;modal;model;view;telephony;self={};componentconfig;constructor(e,t,s,i,n,l,o){this.metadata=e,this.dockedComposer=t,this.language=s,this.modal=i,this.model=n,this.view=l,this.telephony=o,this.view.isEditable=!0,this.view.setEditMode()}ngOnInit(){this.loadConfig()}loadConfig(){this.componentconfig=this.metadata.getComponentConfig("GlobalDockedComposerModal",this.model.module)}get displayLabel(){return this.model.getField("name")?this.model.getField("name"):this.language.getModuleName(this.model.module,!0)}minimize(){this.dockedComposer.composers.find((e=>e.id==this.model.id))||this.telephony.calls.find((e=>e.id))||this.dockedComposer.addComposer(this.model.module,this.model),this.self.destroy()}promptClose(){this.modal.prompt("confirm",this.language.getLabel("MSG_CANCEL","","long"),this.language.getLabel("MSG_CANCEL")).subscribe((e=>{e&&this.closeComposer()}))}closeComposer(){for(let e=0;e<this.dockedComposer.composers.length;e++)this.dockedComposer.composers[e].id===this.model.id&&this.dockedComposer.composers.splice(e,1);this.self.destroy()}handleaction(e){if("savegodetail"===e)this.model.goDetail(),this.closeComposer();else this.closeComposer()}static ɵfac=function(e){return new(e||GlobalDockedComposerModal)(y.Y36(w.Pu),y.Y36(M.m),y.Y36(Z.d),y.Y36(E.o),y.Y36(S.o),y.Y36(Ue.e),y.Y36(bt.n))};static ɵcmp=y.Xpm({type:GlobalDockedComposerModal,selectors:[["global-docked-composer-modal"]],decls:18,vars:5,consts:[["size","medium"],[3,"module","close"],[1,"slds-button","slds-button_icon",3,"title","click"],["icon","dock_panel"],[1,"slds-assistive-text"],["label","LBL_DOCK"],["margin","none"],["containercontent",""],[3,"componentset"],[1,"slds-grid","slds-grid--vertical-align-center","slds-grid--align-spread"],[1,"slds-text-align_right"],["containerclass","",3,"actionset","actionemitter"]],template:function(e,t){1&e&&(y.TgZ(0,"system-modal",0)(1,"system-modal-header",1),y.NdJ("close",(function(){return t.promptClose()})),y._uU(2),y.TgZ(3,"system-modal-header-right")(4,"button",2),y.NdJ("click",(function(){return t.minimize()})),y._UZ(5,"system-button-icon",3),y.TgZ(6,"span",4),y._UZ(7,"system-label",5),y.qZA()()()(),y.TgZ(8,"system-modal-content",6),y._UZ(9,"div",null,7)(11,"system-componentset",8),y.qZA(),y.TgZ(12,"system-modal-footer")(13,"div",9)(14,"div"),y._UZ(15,"global-docked-composer-messages-badge"),y.qZA(),y.TgZ(16,"div",10)(17,"object-action-container",11),y.NdJ("actionemitter",(function(e){return t.handleaction(e)})),y.qZA()()()()()),2&e&&(y.xp6(1),y.Q6J("module",t.model.module),y.xp6(1),y.hij(" ",t.displayLabel," "),y.xp6(2),y.Q6J("title",t.language.getLabel("LBL_DOCK")),y.xp6(7),y.Q6J("componentset",t.componentconfig.componentset),y.xp6(6),y.Q6J("actionset",t.componentconfig.actionset))},dependencies:[Y.J,Zt.E,C._,we.j,Ze.x,Je.p,Te.y,Tt.O,Ct.S,kt.U],encapsulation:2})}return GlobalDockedComposerModal})();var Lt=s(44028);let It=(()=>{class GlobalComposeButton{dockedComposer;module="";constructor(e){this.dockedComposer=e}showComposer(){this.dockedComposer.addComposer(this.module)}static ɵfac=function(e){return new(e||GlobalComposeButton)(y.Y36(M.m))};static ɵcmp=y.Xpm({type:GlobalComposeButton,selectors:[["global-compose-button"]],inputs:{module:"module"},decls:3,vars:0,consts:[[1,"slds-no-flex"],[1,"slds-button","slds-button--neutral",3,"click"]],template:function(e,t){1&e&&(y.TgZ(0,"div",0)(1,"button",1),y.NdJ("click",(function(){return t.showComposer()})),y._uU(2,"New"),y.qZA()())},encapsulation:2})}return GlobalComposeButton})();var St=s(70909),Mt=s(62422),Jt=s(15982);function Ot(e,t){if(1&e&&(y.TgZ(0,"div",8)(1,"div",9),y._uU(2),y.qZA()()),2&e){const e=y.oxw();y.xp6(2),y.Oqu(e.descriptionfull)}}const Nt=function(e){return{"slds-hide":e}};let Ft=(()=>{class GlobalAppLauncherDialogRoleTile{language;metadata;role;name;identifier;description;descriptionfull;constructor(e,t){this.language=e,this.metadata=t}ngOnInit(){this.buildRoleLabels()}buildRoleLabels(){this.metadata.getRoles().some((e=>{if(e.id==this.role.id)return this.identifier=this.language.getAppLanglabel(e.label,"short"),this.name=this.language.getAppLanglabel(e.label),this.description=this.language.getAppLanglabel(e.label,"long"),this.name===this.description&&(this.description=null),this.description&&this.description.length>75&&(this.descriptionfull=this.description,this.description=this.description.substring(0,75)+"..."),!0}))}static ɵfac=function(e){return new(e||GlobalAppLauncherDialogRoleTile)(y.Y36(Z.d),y.Y36(w.Pu))};static ɵcmp=y.Xpm({type:GlobalAppLauncherDialogRoleTile,selectors:[["global-app-launcher-dialog-role-tile"]],inputs:{role:"role"},decls:13,vars:13,consts:[[1,"slds-app-launcher__tile","slds-text-link_reset","slds-is-relative"],[1,"slds-app-launcher__tile-figure"],[1,"slds-app-launcher__tile-body"],["href","javascript:void(0);"],[1,"slds-button","slds-button_reset","slds-text-link",3,"ngClass","title"],["morebutton",""],["label","LBL_MORE"],["class","slds-popover slds-popover_tooltip slds-nubbin_top slds-hide","role","tooltip","style","position:absolute;top:100px;left:165px",4,"ngIf"],["role","tooltip",1,"slds-popover","slds-popover_tooltip","slds-nubbin_top","slds-hide",2,"position","absolute","top","100px","left","165px"],[1,"slds-popover__body"]],template:function(e,t){1&e&&(y.TgZ(0,"div",0)(1,"div",1)(2,"span"),y._uU(3),y.qZA()(),y.TgZ(4,"div",2)(5,"a",3),y._uU(6),y.qZA(),y.TgZ(7,"p"),y._uU(8),y.TgZ(9,"button",4,5),y._UZ(11,"system-label",6),y.qZA()(),y.YNc(12,Ot,3,1,"div",7),y.qZA()()),2&e&&(y.Udp("box-shadow",t.metadata.role!=t.role.id?null:"0 0 2px 2px var(--brand-primary-active)"),y.xp6(2),y.Gre("slds-avatar slds-avatar--large slds-align--absolute-center ",t.role.icon,""),y.xp6(1),y.Oqu(t.identifier),y.xp6(3),y.Oqu(t.name),y.xp6(2),y.hij(" ",t.description," "),y.xp6(1),y.Q6J("ngClass",y.VKq(11,Nt,!t.descriptionfull))("title",t.descriptionfull),y.xp6(3),y.Q6J("ngIf",t.descriptionfull))},dependencies:[i.mk,i.O5,C._],encapsulation:2})}return GlobalAppLauncherDialogRoleTile})();function qt(e,t){if(1&e){const e=y.EpF();y.TgZ(0,"li",21),y.NdJ("click",(function(){const t=y.CHM(e).$implicit,s=y.oxw(2);return y.KtG(s.setRole(t.id))})),y._UZ(1,"global-app-launcher-dialog-role-tile",22),y.qZA()}if(2&e){const e=t.$implicit;y.xp6(1),y.Q6J("role",e)}}function Et(e,t){if(1&e&&(y.TgZ(0,"div")(1,"ul",18),y.YNc(2,qt,2,1,"li",20),y.qZA()()),2&e){const e=y.oxw();y.xp6(2),y.Q6J("ngForOf",e.getRoles())}}function Yt(e,t){if(1&e){const e=y.EpF();y.TgZ(0,"li",23),y.NdJ("click",(function(){const t=y.CHM(e).$implicit,s=y.oxw();return y.KtG(s.gotoModule(t))})),y.TgZ(1,"div",24),y._UZ(2,"system-icon",25),y.qZA(),y.TgZ(3,"div",26)(4,"p",27),y._UZ(5,"system-label-modulename",28),y.qZA()()()}if(2&e){const e=t.$implicit,s=y.oxw();y.Q6J("title",s.language.getModuleName(e,!1,"long")),y.xp6(2),y.Q6J("module",e)("size","large"),y.xp6(3),y.Q6J("module",e)}}let Dt=(()=>{class GlobalAppLauncherDialog{metadata;language;router;broadcast;userpreferences;searchTerm="";self=void 0;constructor(e,t,s,i,n){this.metadata=e,this.language=t,this.router=s,this.broadcast=i,this.userpreferences=n}get showRoles(){return this.metadata.getRoles().length>1}close(){this.self.destroy()}getRoles(){return this.metadata.getRoles()}setRole(e){this.metadata.setActiveRole(e),this.userpreferences.setPreference("userrole",e),this.broadcast.broadcastMessage("applauncher.setrole",e),this.close()}getModules(){let e=[];for(let t of this.metadata.getModules()){let s=this.metadata.getModuleDefs(t);s.visible&&(!s.visibleaclaction||s.visibleaclaction&&this.metadata.checkModuleAcl(t,s.visibleaclaction))&&this.metadata.checkModuleAcl(t,"list")&&(""===this.searchTerm||""!==this.searchTerm&&this.language.getModuleName(t)&&this.language.getModuleName(t).toLowerCase().indexOf(this.searchTerm.toLowerCase())>=0)&&e.push(t)}return e.sort(((e,t)=>this.language.getModuleName(e)>this.language.getModuleName(t)?1:-1)),e}gotoModule(e){this.router.navigate(["/module/"+e]),this.close()}static ɵfac=function(e){return new(e||GlobalAppLauncherDialog)(y.Y36(w.Pu),y.Y36(Z.d),y.Y36(q.F0),y.Y36(Qe.f),y.Y36(Mt.z))};static ɵcmp=y.Xpm({type:GlobalAppLauncherDialog,selectors:[["global-app-launcher-dialog"]],decls:22,vars:9,consts:[["role","dialog","tabindex","-1","aria-modal","true",1,"slds-modal","slds-fade-in-open","slds-modal_large","slds-app-launcher__content"],[1,"slds-modal__container"],[1,"slds-modal__header","slds-theme--shade"],[1,"slds-button","slds-button_icon","slds-modal__close","slds-button--icon-inverse",2,"color","#fff",3,"click"],[3,"icon","size"],[1,"slds-assistive-text"],["label","LBL_CLOSE"],[1,"slds-grid","slds-grid--align-spread","slds-grid--vertical-align-center"],[1,"slds-text-heading--medium","slds-show--medium"],["label","LBL_APP_LAUNCHER"],[1,"slds-app-launcher__header-search"],[1,"slds-form-element"],[1,"slds-form-element__control","slds-input-has-icon","slds-input-has-icon--left"],[3,"icon","addclasses"],["system-autofocus","","type","search",1,"slds-input",3,"ngModel","placeholder","ngModelChange"],["disabled","",1,"slds-button","slds-button--neutral","slds-show--medium"],["margin","small",3,"grow"],[4,"ngIf"],[1,"slds-grid","slds-grid--pull-padded","slds-wrap"],["class","slds-p-around--small slds-size--xx-small",3,"title","click",4,"ngFor","ngForOf"],["class","slds-p-horizontal--small slds-size--1-of-1 slds-medium-size--1-of-3",3,"click",4,"ngFor","ngForOf"],[1,"slds-p-horizontal--small","slds-size--1-of-1","slds-medium-size--1-of-3",3,"click"],[3,"role"],[1,"slds-p-around--small","slds-size--xx-small",3,"title","click"],[1,"slds-app-launcher__tile-figure","slds-app-launcher__tile-figure--small","slds-text-link_reset"],[3,"module","size"],[1,"slds-align_absolute-center","slds-p-top--xx-small"],[1,"slds-truncate","slds-text-link_reset"],[3,"module"]],template:function(e,t){1&e&&(y.TgZ(0,"section",0)(1,"div",1)(2,"header",2)(3,"button",3),y.NdJ("click",(function(){return t.close()})),y._UZ(4,"system-button-icon",4),y.TgZ(5,"span",5),y._UZ(6,"system-label",6),y.qZA()(),y.TgZ(7,"div",7)(8,"h2",8),y._UZ(9,"system-label",9),y.qZA(),y.TgZ(10,"div",10)(11,"div",11)(12,"div",12),y._UZ(13,"system-utility-icon",13),y.TgZ(14,"input",14),y.NdJ("ngModelChange",(function(e){return t.searchTerm=e})),y.qZA()()()(),y.TgZ(15,"button",15),y._uU(16,"App Store"),y.qZA()()(),y.TgZ(17,"system-modal-content",16),y.YNc(18,Et,3,1,"div",17),y.TgZ(19,"div")(20,"ul",18),y.YNc(21,Yt,6,4,"li",19),y.qZA()()()()()),2&e&&(y.xp6(4),y.Q6J("icon","close")("size","large"),y.xp6(9),y.Q6J("icon","search")("addclasses","slds-input__icon slds-input__icon--left"),y.xp6(1),y.Q6J("ngModel",t.searchTerm)("placeholder",t.language.getLabel("LBL_FIND_CONFMODULE")),y.xp6(3),y.Q6J("grow",!0),y.xp6(1),y.Q6J("ngIf",t.showRoles),y.xp6(3),y.Q6J("ngForOf",t.getModules()))},dependencies:[i.sg,i.O5,n.Fj,n.JJ,n.On,Jt.m,Y.J,J.f,C._,Be.M,Ze.x,k.r,Ft],encapsulation:2})}return GlobalAppLauncherDialog})();var Ut=s(6131),Qt=s(28313);function Rt(e,t){if(1&e&&y._UZ(0,"system-utility-icon",7),2&e){const e=y.oxw();y.Q6J("icon",e.tab.displayicon)("title",e.modelCount()+" "+e.language.getLabel("LBL_MODELS"))}}function jt(e,t){if(1&e&&y._UZ(0,"system-icon",8),2&e){const e=y.oxw();y.Q6J("module",e.tab.displaymodule)}}function Bt(e,t){1&e&&y._UZ(0,"system-utility-icon",9)}const Gt=function(e){return{"slds-p-left--medium":e}};let Pt=(()=>{class GlobalNavigationTabbedBrowserModalTab{navigation;language;tab;subtab=!1;activate=new y.vpe;constructor(e,t){this.navigation=e,this.language=t}modelCount(){return this.navigation.modelregister.filter((e=>e.tabid==this.tab.id)).length}activateTab(){this.activate.emit(this.tab.id)}static ɵfac=function(e){return new(e||GlobalNavigationTabbedBrowserModalTab)(y.Y36(F.G),y.Y36(Z.d))};static ɵcmp=y.Xpm({type:GlobalNavigationTabbedBrowserModalTab,selectors:[["global-navigation-tabbed-browser-modal-tab"]],inputs:{tab:"tab",subtab:"subtab"},outputs:{activate:"activate"},decls:7,vars:8,consts:[[1,"slds-grid","slds-grid--vertical-align-center",3,"ngClass"],[3,"title"],["size","x-small","class","slds-p-right--x-small",3,"icon","title",4,"ngIf"],["size","x-small","divClass","slds-p-right--x-small",3,"module",4,"ngIf"],[1,"slds-truncate","slds-text-link_faux",3,"click"],[3,"label"],["class","slds-p-left--x-small","size","x-small","icon","warning","addclasses","slds-icon-text-error",4,"ngIf"],["size","x-small",1,"slds-p-right--x-small",3,"icon","title"],["size","x-small","divClass","slds-p-right--x-small",3,"module"],["size","x-small","icon","warning","addclasses","slds-icon-text-error",1,"slds-p-left--x-small"]],template:function(e,t){1&e&&(y.TgZ(0,"div",0)(1,"div",1),y.YNc(2,Rt,1,2,"system-utility-icon",2),y.YNc(3,jt,1,1,"system-icon",3),y.qZA(),y.TgZ(4,"div",4),y.NdJ("click",(function(){return t.activateTab()})),y._UZ(5,"system-label",5),y.qZA(),y.YNc(6,Bt,1,0,"system-utility-icon",6),y.qZA()),2&e&&(y.Q6J("ngClass",y.VKq(6,Gt,t.subtab)),y.xp6(1),y.Q6J("title",t.modelCount()+" "+t.language.getLabel("LBL_MODELS")),y.xp6(1),y.Q6J("ngIf",t.tab.displayicon),y.xp6(1),y.Q6J("ngIf",t.tab.displaymodule),y.xp6(2),y.s9C("label",t.tab.displayname),y.xp6(1),y.Q6J("ngIf",t.navigation.anyDirtyModel(t.tab.id)))},dependencies:[i.mk,i.O5,J.f,C._,k.r],encapsulation:2})}return GlobalNavigationTabbedBrowserModalTab})(),Ht=(()=>{class GlobalNavigationTabbedBrowserModalTabActions{navigation;language;tab;constructor(e,t){this.navigation=e,this.language=t}closetab(e){this.navigation.closeObjectTab(e)}pintab(e){e.pinned=!e.pinned}clonetab(e){this.navigation.cloneTab(e.id)}static ɵfac=function(e){return new(e||GlobalNavigationTabbedBrowserModalTabActions)(y.Y36(F.G),y.Y36(Z.d))};static ɵcmp=y.Xpm({type:GlobalNavigationTabbedBrowserModalTabActions,selectors:[["global-navigation-tabbed-browser-modal-tab-actions"]],inputs:{tab:"tab"},decls:6,vars:1,consts:[["system-title","LBL_CLONE_TAB",1,"slds-button","slds-button_icon","slds-button_icon-container","slds-button_icon-x-small","slds-m-around--none",3,"click"],["icon","copy"],["system-title","LBL_PIN_TAB",1,"slds-button","slds-button_icon","slds-button_icon-container","slds-button_icon-x-small","slds-m-around--none",3,"click"],[3,"icon"],["system-title","LBL_CLOSE_TAB",1,"slds-button","slds-button--icon","slds-col--bump-left",3,"click"],["icon","close"]],template:function(e,t){1&e&&(y.TgZ(0,"button",0),y.NdJ("click",(function(){return t.clonetab(t.tab)})),y._UZ(1,"system-button-icon",1),y.qZA(),y.TgZ(2,"button",2),y.NdJ("click",(function(){return t.pintab(t.tab)})),y._UZ(3,"system-button-icon",3),y.qZA(),y.TgZ(4,"button",4),y.NdJ("click",(function(){return t.closetab(t.tab.id)})),y._UZ(5,"system-button-icon",5),y.qZA()),2&e&&(y.xp6(3),y.Q6J("icon",t.tab.pinned?"pinned":"pin"))},dependencies:[T.S,Y.J],encapsulation:2})}return GlobalNavigationTabbedBrowserModalTabActions})();function zt(e,t){if(1&e){const e=y.EpF();y.ynx(0),y.TgZ(1,"tr",14)(2,"td")(3,"global-navigation-tabbed-browser-modal-tab",18),y.NdJ("activate",(function(t){y.CHM(e);const s=y.oxw(2);return y.KtG(s.activateTab(t))})),y.qZA()(),y.TgZ(4,"td",16),y._UZ(5,"global-navigation-tabbed-browser-modal-tab-actions",17),y.qZA()(),y.BQk()}if(2&e){const e=t.$implicit;y.xp6(3),y.Q6J("tab",e)("subtab",!0),y.xp6(2),y.Q6J("tab",e)}}function Vt(e,t){if(1&e){const e=y.EpF();y.ynx(0),y.TgZ(1,"tr",14)(2,"td")(3,"global-navigation-tabbed-browser-modal-tab",15),y.NdJ("activate",(function(t){y.CHM(e);const s=y.oxw();return y.KtG(s.activateTab(t))})),y.qZA()(),y.TgZ(4,"td",16),y._UZ(5,"global-navigation-tabbed-browser-modal-tab-actions",17),y.qZA()(),y.YNc(6,zt,6,3,"ng-container",9),y.BQk()}if(2&e){const e=t.$implicit,s=y.oxw();y.xp6(3),y.Q6J("tab",e),y.xp6(2),y.Q6J("tab",e),y.xp6(1),y.Q6J("ngForOf",s.subtabs(e.id))}}let $t=(()=>{class GlobalNavigationTabbedBrowserModal{navigation;language;self;constructor(e,t){this.navigation=e,this.language=t}get tabs(){return this.navigation.objectTabs.length}get models(){return this.navigation.modelregister.length}get maintabs(){return this.navigation.objectTabs.filter((e=>!e.parentid))}subtabs(e){return this.navigation.objectTabs.filter((t=>t.parentid==e))}closetab(e){this.navigation.closeObjectTab(e)}activateTab(e){this.navigation.setActiveTab(e),this.close()}pintab(e){e.pinned=!e.pinned}clonetab(e){this.navigation.cloneTab(e.id)}close(){this.self.destroy()}static ɵfac=function(e){return new(e||GlobalNavigationTabbedBrowserModal)(y.Y36(F.G),y.Y36(Z.d))};static ɵcmp=y.Xpm({type:GlobalNavigationTabbedBrowserModal,selectors:[["ng-component"]],decls:22,vars:3,consts:[[3,"close"],["label","LBL_TABS"],["margin","none"],[1,"slds-table","slds-table--header-fixed","slds-table_cell-buffer"],[1,"slds-line-height_reset"],["scope","col"],[1,"slds-truncate","slds-p-vertical--xx-small"],["label","LBL_TAB"],["scope","col",2,"width","5.5rem"],[4,"ngFor","ngForOf"],[1,"slds-grid","slds-grid--vertical-align-center"],["label","LBL_MODELS"],[1,"slds-col--bump-left","slds-button","slds-button--neutral",3,"click"],["label","LBL_OK"],[1,"slds-hint-parent"],[3,"tab","activate"],[1,"slds-p-horizontal--none","slds-text-align--center"],[3,"tab"],[3,"tab","subtab","activate"]],template:function(e,t){1&e&&(y.TgZ(0,"system-modal")(1,"system-modal-header",0),y.NdJ("close",(function(){return t.close()})),y._UZ(2,"system-label",1),y.qZA(),y.TgZ(3,"system-modal-content",2)(4,"table",3)(5,"thead")(6,"tr",4)(7,"th",5)(8,"div",6),y._UZ(9,"system-label",7),y.qZA()(),y._UZ(10,"th",8),y.qZA()(),y.TgZ(11,"tbody"),y.YNc(12,Vt,7,3,"ng-container",9),y.qZA()()(),y.TgZ(13,"system-modal-footer")(14,"div",10)(15,"div"),y._uU(16),y._UZ(17,"system-label",1),y._uU(18),y._UZ(19,"system-label",11),y.qZA(),y.TgZ(20,"button",12),y.NdJ("click",(function(){return t.close()})),y._UZ(21,"system-label",13),y.qZA()()()()),2&e&&(y.xp6(12),y.Q6J("ngForOf",t.maintabs),y.xp6(4),y.hij("",t.tabs," "),y.xp6(2),y.hij(" / ",t.models," "))},dependencies:[i.sg,C._,we.j,Ze.x,Je.p,Te.y,Pt,Ht],encapsulation:2})}return GlobalNavigationTabbedBrowserModal})();var Kt=s(16962),Xt=s(49570),Wt=s(12429),es=s(10026),ts=s(49183),ss=s(98208),is=s(83850),ns=s(33861),ls=s(72401),os=s(25651),as=s(77723),ds=s(17017),rs=s(31790),cs=s(31058);function us(e,t){1&e&&(y.TgZ(0,"tr",22),y._UZ(1,"system-spinner",23),y.qZA())}const ms=function(e,t){return{module:e,data:t}};function gs(e,t){if(1&e){const e=y.EpF();y.TgZ(0,"tr",24)(1,"td",25),y._UZ(2,"system-icon",26),y.qZA(),y.TgZ(3,"td")(4,"a",27),y.NdJ("click",(function(){const t=y.CHM(e).$implicit,s=y.oxw();return y.KtG(s.goRecent(t.module_name,t.item_id))})),y.TgZ(5,"div",28),y._uU(6),y.qZA()()(),y.TgZ(7,"td")(8,"div",29),y._UZ(9,"system-label-modulename",30),y.qZA()(),y.TgZ(10,"td")(11,"div",29),y._uU(12),y.qZA()()()}if(2&e){const e=t.$implicit;y.Q6J("system-model-provider",y.WLB(8,ms,e.module_name,e.data)),y.xp6(2),y.Q6J("module",e.module_name),y.xp6(3),y.Q6J("module",e.module_name)("id",e.item_id),y.xp6(1),y.hij(" ",e.summary_text?e.summary_text:e.item_summary," "),y.xp6(3),y.Q6J("module",e.module_name)("singular",!0),y.xp6(3),y.Oqu(e.date_modified)}}let hs=(()=>{class GlobalRecentItems{language;navigationtab;router;recent;constructor(e,t,s,i){this.language=e,this.navigationtab=t,this.router=s,this.recent=i,t.setTabInfo({displayname:this.language.getLabel("LBL_RECENTLYVIEWED"),displayicon:"breadcrumbs"}),this.getRecent()}goRecent(e,t){this.router.navigate(["/module/"+e+"/"+t])}getRecent(){this.recent.getRecentItems()}static ɵfac=function(e){return new(e||GlobalRecentItems)(y.Y36(Z.d),y.Y36(ds.d),y.Y36(q.F0),y.Y36(Re.h))};static ɵcmp=y.Xpm({type:GlobalRecentItems,selectors:[["global-recent-items"]],decls:30,vars:3,consts:[[1,"slds-page-header"],[1,"slds-page-header__row"],[1,"slds-page-header__col-title"],[1,"slds-media"],[1,"slds-media__body"],[1,"slds-page-header__name"],[1,"slds-page-header__name-title"],[1,"slds-page-header__title","slds-truncate"],["label","LBL_RECENT_ITEMS"],[1,"slds-page-header__name-meta"],["label","LBL_ITEMS"],["system-to-bottom",""],["role","grid",1,"slds-table","slds-table--bordered","slds-table--fixed-layout","slds-table--header-fixed"],[1,"slds-text-title--caps"],["scope","col",1,"slds-cell-shrink"],["scope","col",1,"slds-is-sortable","slds-is-resizable"],[1,"slds-truncate","slds-th__action"],["label","LBL_NAME"],["label","LBL_MODULE"],["label","LBL_VIEWED"],["class","slds-p-bottom--small",4,"ngIf"],["class","slds-hint-parent",3,"system-model-provider",4,"ngFor","ngForOf"],[1,"slds-p-bottom--small"],["size","16"],[1,"slds-hint-parent",3,"system-model-provider"],["role","gridcell",1,"slds-cell-shrink"],["size","small","divClass","",3,"module"],["href","javascript:void(0);",1,"slds-text-link--reset",3,"click"],["system-model-popover","",1,"slds-truncate",3,"module","id"],[1,"slds-truncate"],[3,"module","singular"]],template:function(e,t){1&e&&(y.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"h1")(8,"span",7),y._UZ(9,"system-label",8),y.qZA()()()(),y.TgZ(10,"p",9),y._uU(11),y._UZ(12,"system-label",10),y.qZA()()()()()(),y.TgZ(13,"div",11)(14,"table",12)(15,"thead")(16,"tr",13),y._UZ(17,"th",14),y.TgZ(18,"th",15)(19,"span",16),y._UZ(20,"system-label",17),y.qZA()(),y.TgZ(21,"th",15)(22,"span",16),y._UZ(23,"system-label",18),y.qZA()(),y.TgZ(24,"th",15)(25,"span",16),y._UZ(26,"system-label",19),y.qZA()()()(),y.TgZ(27,"tbody"),y.YNc(28,us,2,0,"tr",20),y.YNc(29,gs,13,11,"tr",21),y.qZA()()()),2&e&&(y.xp6(11),y.hij("",t.recent.recentItems.length," "),y.xp6(17),y.Q6J("ngIf",!t.recent.isInitialized),y.xp6(1),y.Q6J("ngForOf",t.recent.recentItems))},dependencies:[i.sg,i.O5,rs.g,je.u,cs.H,J.f,C._,Be.M,K.W],encapsulation:2})}return GlobalRecentItems})();var ps=s(22487),fs=s(64730),bs=s(42161),_s=s(26559),vs=s(7674),ys=s(33634);const xs=["global-search-module-item",""];function ws(e,t){if(1&e){const e=y.EpF();y.TgZ(0,"td",7),y.NdJ("click",(function(t){y.CHM(e);const s=y.oxw(2);return y.KtG(s.navigateDetail(t))})),y._UZ(1,"field-container",8),y.qZA()}if(2&e){const e=t.$implicit,s=y.oxw(2);y.uIk("data-label",s.language.getFieldDisplayName(s.module,e.field)),y.xp6(1),y.Q6J("field",e.field)("fieldconfig",e.fieldconfig)("fielddisplayclass","slds-truncate")}}function Zs(e,t){if(1&e&&(y.ynx(0),y.YNc(1,ws,2,4,"td",6),y.BQk()),2&e){const e=y.oxw();y.xp6(1),y.Q6J("ngForOf",e.listfields)}}let Ts=(()=>{class GlobalSearchModuleItem{elementref;router;view;model;language;layout;module="";listfields=[];listitem={};expanded=!1;constructor(e,t,s,i,n,l){this.elementref=e,this.router=t,this.view=s,this.model=i,this.language=n,this.layout=l,this.view.isEditable=!1,this.view.displayLabels=!1}ngOnInit(){this.model.module=this.listitem._source._module,this.model.id=this.listitem._id,this.model.setData(this.listitem._source),this.model.acl=this.listitem.acl,this.model.acl_fieldcontrol=this.listitem.acl_fieldcontrol}navigateDetail(e){e.stopPropagation(),this.model.checkAccess("detail")&&this.model.goDetail()}toggleexpanded(){this.expanded=!this.expanded}get isexpanded(){return"small"!=this.layout.screenwidth||this.expanded}get expandicon(){return this.expanded?"chevronup":"chevrondown"}static ɵfac=function(e){return new(e||GlobalSearchModuleItem)(y.Y36(y.SBq),y.Y36(q.F0),y.Y36(Ue.e),y.Y36(S.o),y.Y36(Z.d),y.Y36(_s.b))};static ɵcmp=y.Xpm({type:GlobalSearchModuleItem,selectors:[["","global-search-module-item",""]],inputs:{module:"module",listfields:"listfields",listitem:"listitem"},features:[y._Bn([Ue.e,S.o])],attrs:xs,decls:7,vars:4,consts:[[1,"slds-hide--medium"],[1,"slds-grid","slds-grid--vertical-align-center","slds-p-around--xx-small"],["size","xx-small","divClass","slds-p-right--xx-small",3,"module"],[1,"slds-text-align--left","slds-truncate","slds-grow",3,"click"],["size","xx-small",3,"icon","click"],[4,"ngIf"],["scope","row",3,"click",4,"ngFor","ngForOf"],["scope","row",3,"click"],[3,"field","fieldconfig","fielddisplayclass"]],template:function(e,t){1&e&&(y.TgZ(0,"td",0)(1,"div",1),y._UZ(2,"system-icon",2),y.TgZ(3,"div",3),y.NdJ("click",(function(e){return t.navigateDetail(e)})),y._uU(4),y.qZA(),y.TgZ(5,"system-utility-icon",4),y.NdJ("click",(function(){return t.toggleexpanded()})),y.qZA()()(),y.YNc(6,Zs,2,1,"ng-container",5)),2&e&&(y.xp6(2),y.Q6J("module",t.model.module),y.xp6(2),y.Oqu(t.model.data.summary_text),y.xp6(1),y.Q6J("icon",t.expandicon),y.xp6(1),y.Q6J("ngIf",t.isexpanded))},dependencies:[i.sg,i.O5,ys.j,J.f,k.r],encapsulation:2})}return GlobalSearchModuleItem})();function Cs(e,t){if(1&e){const e=y.EpF();y.TgZ(0,"li",21),y.NdJ("click",(function(){y.CHM(e);const t=y.oxw();return y.KtG(t.setSearchScope())})),y._UZ(1,"system-label",22),y.qZA()}}function ks(e,t){if(1&e&&(y.TgZ(0,"th",23)(1,"div",24),y._UZ(2,"system-label-fieldname",25),y.qZA()()),2&e){const e=t.$implicit,s=t.index,i=y.oxw();y.Q6J("ngClass",i.sizeClass(s)),y.xp6(2),y.Q6J("module",i.module)("field",e.field)}}function As(e,t){if(1&e&&y._UZ(0,"tr",26),2&e){const e=t.$implicit,s=y.oxw();y.Q6J("module",s.module)("listfields",s.listfields)("listitem",e)}}function Ls(e,t){1&e&&y._UZ(0,"system-spinner")}const Is=function(e){return{"slds-hide":e}},Ss=function(e){return{"slds-table--bordered":e}};let Ms=(()=>{class GlobalSearchModule{metadata;elementref;fts;language;layout;view;module="";scope=new y.vpe;listfields=[];constructor(e,t,s,i,n,l){this.metadata=e,this.elementref=t,this.fts=s,this.language=i,this.layout=n,this.view=l}get issmall(){return"small"==this.layout.screenwidth}ngOnInit(){this.listfields=[];let e=this.metadata.getComponentConfig("GlobalSearchModule",this.module);_.isEmpty(e)&&(e=this.metadata.getModuleDefaultComponentConfigByUsage(this.module,"list"));for(let t of this.metadata.getFieldSetFields(e.fieldset))t.fieldconfig.hidden||this.listfields.push(t)}getCount(){let e={};return this.fts.moduleSearchresults.some((t=>{if(t.module===this.module)return e={total:_.isNumber(t.data.total)?t.data.total:t.data.total.value,hits:t.data.hits.length},!0})),e}get hidepanel(){return!(!this.fts.runningmodulesearch&&this.getCount().total>0)}canViewMore(){return this.getCount().total>5}getItems(){let e=[];return this.fts.moduleSearchresults.some((t=>{if(t.module===this.module)return e=t.data.hits,!0})),e}setSearchScope(){this.scope.emit(this.module)}sizeClass(e){if("small"==this.view.size)return"slds-size--1-of-1";let t=this.listfields[e].fieldconfig.width;return t||(t="1"),"slds-col slds-size--"+t+"-of-12"}static ɵfac=function(e){return new(e||GlobalSearchModule)(y.Y36(w.Pu),y.Y36(y.SBq),y.Y36(ps.Q),y.Y36(Z.d),y.Y36(_s.b),y.Y36(Ue.e))};static ɵcmp=y.Xpm({type:GlobalSearchModule,selectors:[["global-search-module"]],inputs:{module:"module"},outputs:{scope:"scope"},features:[y._Bn([Ue.e])],decls:27,vars:14,consts:[[3,"ngClass"],[1,"slds-grid","slds-grid--vertical-align-center","slds-theme--default"],[1,"slds-p-left--small","slds-show--medium"],["divClass","",3,"module"],[1,"slds-p-around--small","slds-theme--default","slds-grow"],[1,"slds-grid"],[1,"slds-col","slds-has-flexi-truncate"],[1,"slds-page-header__title","slds-truncate"],[3,"module"],[1,"slds-col","slds-align-bottom"],[1,"slds-list--horizontal","slds-has-dividers--left"],[1,"slds-item"],["label","LBL_OF"],["label","LBL_ITEMS"],["class","slds-item slds-text-link--reset",3,"click",4,"ngIf"],["role","grid",1,"slds-table","slds-table--fixed-layout","slds-max-medium-table--stacked-horizontal",3,"ngClass"],[1,"slds-show--medium"],[1,"slds-text-title--caps"],["scope","col","class","slds-resizable",3,"ngClass",4,"ngFor","ngForOf"],["global-search-module-item","",3,"module","listfields","listitem",4,"ngFor","ngForOf"],[4,"ngIf"],[1,"slds-item","slds-text-link--reset",3,"click"],["label","LBL_VIEWALL"],["scope","col",1,"slds-resizable",3,"ngClass"],[1,"slds-truncate","slds-p-around--x-small"],[3,"module","field"],["global-search-module-item","",3,"module","listfields","listitem"]],template:function(e,t){1&e&&(y.TgZ(0,"div",0)(1,"div",1)(2,"div",2),y._UZ(3,"system-icon",3),y.qZA(),y.TgZ(4,"div",4)(5,"div",5)(6,"div",6)(7,"h1",7),y._UZ(8,"system-label-modulename",8),y.qZA()()(),y.TgZ(9,"div",5)(10,"div",9)(11,"ul",10)(12,"li",11)(13,"span"),y._uU(14),y._UZ(15,"system-label",12),y._uU(16),y._UZ(17,"system-label",13),y.qZA()(),y.YNc(18,Cs,2,0,"li",14),y.qZA()()()()(),y.TgZ(19,"div")(20,"table",15)(21,"thead",16)(22,"tr",17),y.YNc(23,ks,3,3,"th",18),y.qZA()(),y.TgZ(24,"tbody"),y.YNc(25,As,1,3,"tr",19),y.qZA()(),y.YNc(26,Ls,1,0,"system-spinner",20),y.qZA()()),2&e&&(y.Q6J("ngClass",y.VKq(10,Is,t.hidepanel)),y.xp6(3),y.Q6J("module",t.module),y.xp6(5),y.Q6J("module",t.module),y.xp6(6),y.hij("",t.getCount().hits," "),y.xp6(2),y.hij(" ",t.getCount().total," "),y.xp6(2),y.Q6J("ngIf",t.canViewMore()),y.xp6(2),y.Q6J("ngClass",y.VKq(12,Ss,!t.issmall)),y.xp6(3),y.Q6J("ngForOf",t.listfields),y.xp6(2),y.Q6J("ngForOf",t.getItems()),y.xp6(1),y.Q6J("ngIf",t.fts.runningmodulesearch))},dependencies:[i.mk,i.sg,i.O5,J.f,C._,vs.h,Be.M,K.W,Ts],encapsulation:2})}return GlobalSearchModule})();const Js=["tablecontent"];function Os(e,t){if(1&e&&(y.TgZ(0,"th",22)(1,"div",23),y._UZ(2,"system-label-fieldname",24),y.qZA()()),2&e){const e=t.$implicit,s=y.oxw();y.xp6(2),y.Q6J("module",s.module)("field",e.field)}}function Ns(e,t){if(1&e&&y._UZ(0,"tr",25),2&e){const e=t.$implicit,s=y.oxw();y.Q6J("module",s.module)("listfields",s.listfields)("listitem",e)}}function Fs(e,t){if(1&e&&y._UZ(0,"tbody",26),2&e){const e=y.oxw();y.Q6J("columns",null==e.listfields?null:e.listfields.length)("select",!1)("tools",!1)("rows",5)}}function qs(e,t){1&e&&(y.TgZ(0,"div",27)(1,"system-illustration-no-records"),y._UZ(2,"system-label",28),y.qZA()())}const Es=function(e){return{"slds-table--bordered":e}};let Ys=(()=>{class GlobalSearchModuleOnly{broadcast;metadata;elementref;fts;language;layout;tablecontent;module="";listfields=[];constructor(e,t,s,i,n,l,o){this.broadcast=e,this.metadata=t,this.elementref=s,this.fts=n,this.language=l,this.layout=o}get issmall(){return"small"==this.layout.screenwidth}ngOnChanges(){this.listfields=[];let e=this.metadata.getComponentConfig("GlobalSearchModule",this.module);_.isEmpty(e)&&(e=this.metadata.getModuleDefaultComponentConfigByUsage(this.module,"list"));for(let t of this.metadata.getFieldSetFields(e.fieldset))t.fieldconfig.hidden||this.listfields.push(t)}getCount(){let e={};return this.fts.moduleSearchresults.some((t=>{if(t.module===this.module)return e={total:t.data.total,hits:t.data.hits.length},!0})),e}getItems(){let e=[];return this.fts.moduleSearchresults.some((t=>{if(t.module===this.module)return e=t.data.hits,!0})),e}onScroll(e){let t=this.tablecontent.element.nativeElement;t.scrollTop+t.clientHeight+50>t.scrollHeight&&this.fts.loadMore()}static ɵfac=function(e){return new(e||GlobalSearchModuleOnly)(y.Y36(Qe.f),y.Y36(w.Pu),y.Y36(y.SBq),y.Y36(q.F0),y.Y36(ps.Q),y.Y36(Z.d),y.Y36(_s.b))};static ɵcmp=y.Xpm({type:GlobalSearchModuleOnly,selectors:[["global-search-module-only"]],viewQuery:function(e,t){if(1&e&&y.Gf(Js,7,y.s_b),2&e){let e;y.iGM(e=y.CRH())&&(t.tablecontent=e.first)}},inputs:{module:"module"},features:[y.TTD],decls:29,vars:11,consts:[[1,"slds-theme--default","slds-border--top","slds-grid","slds-grid--vertical-align-center"],[1,"slds-p-left--small","slds-show--medium"],["divClass","",3,"module"],[1,"slds-p-around--small"],[1,"slds-grid"],[1,"slds-col","slds-has-flexi-truncate"],[1,"slds-page-header__title","slds-truncate"],[3,"module"],[1,"slds-col","slds-align-bottom"],[1,"slds-list--horizontal","slds-has-dividers--left"],[1,"slds-item"],["label","LBL_OF"],["label","LBL_ITEMS"],["role","grid",1,"slds-show--medium","slds-table","slds-table--bordered","slds-table--fixed-layout"],[1,"slds-text-title--caps"],["scope","col",4,"ngFor","ngForOf"],["system-to-bottom","",3,"scroll"],["role","grid",1,"slds-table","slds-table--fixed-layout","slds-max-medium-table--stacked-horizontal",3,"ngClass"],["tablecontent",""],["global-search-module-item","",3,"module","listfields","listitem",4,"ngFor","ngForOf"],["system-table-stencils","",3,"columns","select","tools","rows",4,"ngIf"],["class","slds-align--absolute-center slds-height_full",4,"ngIf"],["scope","col"],[1,"slds-truncate","slds-p-around--x-small"],[3,"module","field"],["global-search-module-item","",3,"module","listfields","listitem"],["system-table-stencils","",3,"columns","select","tools","rows"],[1,"slds-align--absolute-center","slds-height_full"],["label","MSG_NO_RECORDS_FOUND"]],template:function(e,t){1&e&&(y.TgZ(0,"div",0)(1,"div",1),y._UZ(2,"system-icon",2),y.qZA(),y.TgZ(3,"div",3)(4,"div",4)(5,"div",5)(6,"h1",6),y._UZ(7,"system-label-modulename",7),y.qZA()()(),y.TgZ(8,"div",4)(9,"div",8)(10,"ul",9)(11,"li",10)(12,"span"),y._uU(13),y._UZ(14,"system-label",11),y._uU(15),y._UZ(16,"system-label",12),y.qZA()()()()()()(),y.TgZ(17,"div")(18,"table",13)(19,"thead")(20,"tr",14),y.YNc(21,Os,3,2,"th",15),y.qZA()()(),y.TgZ(22,"div",16),y.NdJ("scroll",(function(e){return t.onScroll(e)})),y.TgZ(23,"table",17,18)(25,"tbody"),y.YNc(26,Ns,1,3,"tr",19),y.qZA(),y.YNc(27,Fs,1,4,"tbody",20),y.qZA(),y.YNc(28,qs,3,0,"div",21),y.qZA()()),2&e&&(y.xp6(2),y.Q6J("module",t.module),y.xp6(5),y.Q6J("module",t.module),y.xp6(6),y.hij("",t.getCount().hits," "),y.xp6(2),y.hij(" ",null==t.getCount().total?null:t.getCount().total.value," "),y.xp6(6),y.Q6J("ngForOf",t.listfields),y.xp6(2),y.Q6J("ngClass",y.VKq(9,Es,!t.issmall)),y.xp6(3),y.Q6J("ngForOf",t.getItems()),y.xp6(1),y.Q6J("ngIf",t.fts.runningmodulesearch),y.xp6(1),y.Q6J("ngIf",!t.fts.runningmodulesearch&&0==t.getCount().total))},dependencies:[i.mk,i.sg,i.O5,cs.H,J.f,fs.C,C._,vs.h,Be.M,bs.x,Ts],encapsulation:2})}return GlobalSearchModuleOnly})();function Ds(e,t){if(1&e){const e=y.EpF();y.TgZ(0,"li",4)(1,"a",5),y.NdJ("click",(function(){const t=y.CHM(e).$implicit,s=y.oxw();return y.KtG(s.setSearchScope(t))})),y._UZ(2,"system-label-modulename",22),y.qZA()()}if(2&e){const e=t.$implicit,s=y.oxw();y.Q6J("ngClass",s.getScopeClass(e)),y.xp6(2),y.Q6J("module",e)}}function Us(e,t){1&e&&(y.TgZ(0,"table",27),y._UZ(1,"tbody",28),y.qZA()),2&e&&(y.xp6(1),y.Q6J("columns",7)("select",!1)("tools",!1)("rows",15))}function Qs(e,t){if(1&e){const e=y.EpF();y.TgZ(0,"global-search-module",29),y.NdJ("scope",(function(t){y.CHM(e);const s=y.oxw(2);return y.KtG(s.setSearchScope(t))})),y.qZA()}if(2&e){const e=t.$implicit;y.Q6J("module",e.module)}}function Rs(e,t){1&e&&(y.TgZ(0,"div",30)(1,"system-illustration-no-records"),y._UZ(2,"system-label",31),y.qZA()())}function js(e,t){if(1&e&&(y.TgZ(0,"div",23),y.YNc(1,Us,2,4,"table",24),y.YNc(2,Qs,1,1,"global-search-module",25),y.YNc(3,Rs,3,0,"div",26),y.qZA()),2&e){const e=y.oxw();y.xp6(1),y.Q6J("ngIf",e.fts.runningmodulesearch),y.xp6(1),y.Q6J("ngForOf",e.fts.moduleSearchresults),y.xp6(1),y.Q6J("ngIf",!e.fts.runningmodulesearch&&0==e.totalcount)}}function Bs(e,t){if(1&e&&(y.TgZ(0,"div"),y._UZ(1,"global-search-module-only",22),y.qZA()),2&e){const e=y.oxw();y.xp6(1),y.Q6J("module",e.searchScope)}}let Gs=(()=>{class GlobalSearch{navigation;navigationtab;elementref;activatedRoute;fts;language;searchScope="*";searchTimeOut=void 0;searchTerm="";routeSubscription;constructor(e,t,s,i,n,l,o){this.navigation=e,this.navigationtab=t,this.elementref=s,this.activatedRoute=n,this.fts=l,this.language=o}ngOnInit(){this.routeSubscription=this.navigationtab.activeRoute$.subscribe((e=>{const t=e.params;if(t.searchterm){try{this.searchTerm=atob(decodeURIComponent(t.searchterm))}catch(e){this.searchTerm=t.searchterm}this.doSearch()}else this.navigationtab.setTabInfo({displayname:"global search",displayicon:"search"})}))}ngOnDestroy(){this.routeSubscription.unsubscribe()}search(e){if("Enter"===e.key)this.searchTimeOut&&window.clearTimeout(this.searchTimeOut),this.fts.searchTerm=this.searchTerm,this.doSearch();else this.searchTimeOut&&window.clearTimeout(this.searchTimeOut),this.searchTimeOut=window.setTimeout((()=>this.doSearch()),1e3)}get totalcount(){let e=0;for(let t of this.fts.moduleSearchresults)e+=_.isNumber(t.data.total)?t.data.total:t.data.total.value;return e}get totalmodules(){let e=0;for(let t of this.fts.moduleSearchresults)(_.isNumber(t.data.total)?t.data.total:t.data.total.value)>0&&e++;return e}doSearch(){"*"===this.searchScope?this.fts.searchByModules({searchterm:this.searchTerm}).subscribe((e=>{let t=0;for(let e of this.fts.moduleSearchresults)t+=_.isNumber(e.data.total)?e.data.total:e.data.total.value;this.setTabName(t)})):this.fts.searchByModules({searchterm:this.searchTerm,modules:[this.searchScope],size:50}).subscribe((e=>{let t=0;for(let e of this.fts.moduleSearchresults)t+=_.isNumber(e.data.total)?e.data.total:e.data.total.value;this.setTabName(t)})),this.setTabName()}setTabName(e){this.navigationtab.setTabInfo({displayname:"search "+this.searchTerm+(e?" ("+e+")":""),displayicon:"search"})}getScopeClass(e){if(e===this.searchScope)return"slds-is-active"}setSearchScope(e){e!==this.searchScope&&(this.searchScope=e,this.doSearch())}infiniteScroll(){return"*"!==this.searchScope}static ɵfac=function(e){return new(e||GlobalSearch)(y.Y36(F.G),y.Y36(ds.d),y.Y36(y.SBq),y.Y36(q.F0),y.Y36(q.gz),y.Y36(ps.Q),y.Y36(Z.d))};static ɵcmp=y.Xpm({type:GlobalSearch,selectors:[["global-search"]],features:[y._Bn([ps.Q])],decls:23,vars:5,consts:[[1,"slds-grid"],["system-to-bottom","",1,"slds-show--large","slds-size--1-of-12","slds-grid","slds-grid--vertical","slds-navigation-list--vertical","slds-navigation-list--vertical-inverse"],[1,"slds-text-title--caps","slds-p-around--medium"],["label","LBL_SEARCHRESULTS"],[3,"ngClass"],["href","javascript:void(0);",1,"slds-navigation-list--vertical__action","slds-text-link--reset",3,"click"],["label","LBL_TOPRESULTS"],[3,"ngClass",4,"ngFor","ngForOf"],[1,"slds-size--1-of-1","slds-large-size--11-of-12","slds-border--left"],[1,"slds-p-around--medium","slds-theme--shade","slds-border--bottom"],[1,"slds-page-header__row"],[1,"slds-page-header__col-title"],[1,"slds-media"],[1,"slds-media__figure"],["icon","search",3,"click"],[1,"slds-media__body"],[1,"slds-grid","slds-grid--vertical-align-center"],[1,"slds-form-element","slds-size--1-of-1"],[1,"slds-form-element__control"],["system-autofocus","","type","text","spellcheck","false",1,"slds-input",3,"ngModel","ngModelChange","keyup"],["system-to-bottom","",4,"ngIf"],[4,"ngIf"],[3,"module"],["system-to-bottom",""],["class","slds-table slds-table--bordered slds-table--fixed-layout","role","grid",4,"ngIf"],["class","slds-m-bottom--medium",3,"module","scope",4,"ngFor","ngForOf"],["class","slds-align--absolute-center slds-height_full",4,"ngIf"],["role","grid",1,"slds-table","slds-table--bordered","slds-table--fixed-layout"],["system-table-stencils","",3,"columns","select","tools","rows"],[1,"slds-m-bottom--medium",3,"module","scope"],[1,"slds-align--absolute-center","slds-height_full"],["label","MSG_NO_RECORDS_FOUND"]],template:function(e,t){1&e&&(y.TgZ(0,"div",0)(1,"div",1)(2,"h2",2),y._UZ(3,"system-label",3),y.qZA(),y.TgZ(4,"ul")(5,"li",4)(6,"a",5),y.NdJ("click",(function(){return t.setSearchScope("*")})),y._UZ(7,"system-label",6),y.qZA()(),y.YNc(8,Ds,3,2,"li",7),y.qZA()(),y.TgZ(9,"div",8)(10,"div",9)(11,"div",10)(12,"div",11)(13,"div",12)(14,"div",13)(15,"system-icon",14),y.NdJ("click",(function(){return t.setSearchScope("*")})),y.qZA()(),y.TgZ(16,"div",15)(17,"h1",16)(18,"div",17)(19,"div",18)(20,"input",19),y.NdJ("ngModelChange",(function(e){return t.searchTerm=e}))("keyup",(function(e){return t.search(e)})),y.qZA()()()()()()()()(),y.YNc(21,js,4,3,"div",20),y.YNc(22,Bs,2,1,"div",21),y.qZA()()),2&e&&(y.xp6(5),y.Q6J("ngClass",t.getScopeClass("*")),y.xp6(3),y.Q6J("ngForOf",t.fts.searchModules),y.xp6(12),y.Q6J("ngModel",t.searchTerm),y.xp6(1),y.Q6J("ngIf","*"==t.searchScope),y.xp6(1),y.Q6J("ngIf","*"!=t.searchScope))},dependencies:[i.mk,i.sg,i.O5,n.Fj,n.JJ,n.On,Jt.m,cs.H,J.f,fs.C,C._,Be.M,bs.x,Ms,Ys],encapsulation:2})}return GlobalSearch})();var Ps=s(20595),Hs=s(12790),zs=s(46449);function Vs(e,t){if(1&e){const e=y.EpF();y.TgZ(0,"div",12)(1,"label",13),y._uU(2),y.qZA(),y.TgZ(3,"system-input-timezone",14),y.NdJ("ngModelChange",(function(t){y.CHM(e);const s=y.oxw(2);return y.KtG(s.preferences.timezone=t)})),y.qZA()()}if(2&e){const e=y.oxw(2);y.xp6(1),y.MGl("for","",e.componentId,"-timezone"),y.xp6(1),y.Oqu(e.lang.getLabel("LBL_TIMEZONE")),y.xp6(1),y.Q6J("ngModel",e.preferences.timezone)}}function $s(e,t){if(1&e&&(y.TgZ(0,"option",18),y._uU(1),y.qZA()),2&e){const e=t.$implicit;y.Q6J("value",e.value),y.xp6(1),y.Oqu(e.name)}}function Ks(e,t){if(1&e){const e=y.EpF();y.TgZ(0,"div",12)(1,"label",13),y._uU(2),y.qZA(),y.TgZ(3,"div",15)(4,"select",16),y.NdJ("ngModelChange",(function(t){y.CHM(e);const s=y.oxw(2);return y.KtG(s.preferences.datef=t)})),y.YNc(5,$s,2,2,"option",17),y.qZA()()()}if(2&e){const e=y.oxw(2);y.xp6(1),y.MGl("for","",e.componentId,"-datef"),y.xp6(1),y.Oqu(e.lang.getLabel("LBL_DATE_FORMAT")),y.xp6(2),y.MGl("id","",e.componentId,"-datef"),y.Q6J("ngModel",e.preferences.datef),y.xp6(1),y.Q6J("ngForOf",e.dateFormatList)}}function Xs(e,t){if(1&e&&(y.TgZ(0,"option",18),y._uU(1),y.qZA()),2&e){const e=t.$implicit;y.Q6J("value",e.value),y.xp6(1),y.Oqu(e.name)}}function Ws(e,t){if(1&e){const e=y.EpF();y.TgZ(0,"div",12)(1,"label",13),y._uU(2),y.qZA(),y.TgZ(3,"div",15)(4,"select",16),y.NdJ("ngModelChange",(function(t){y.CHM(e);const s=y.oxw(2);return y.KtG(s.preferences.timef=t)})),y.YNc(5,Xs,2,2,"option",17),y.qZA()()()}if(2&e){const e=y.oxw(2);y.xp6(1),y.MGl("for","",e.componentId,"-timef"),y.xp6(1),y.Oqu(e.lang.getLabel("LBL_TIME_FORMAT")),y.xp6(2),y.MGl("id","",e.componentId,"-timef"),y.Q6J("ngModel",e.preferences.timef),y.xp6(1),y.Q6J("ngForOf",e.timeFormatList)}}function ei(e,t){if(1&e&&(y.TgZ(0,"div",5)(1,"h3",6)(2,"span",7),y._uU(3),y.qZA()(),y.TgZ(4,"div",8)(5,"p",9),y._uU(6),y.qZA(),y.TgZ(7,"div",10),y.YNc(8,Vs,4,3,"div",11),y.YNc(9,Ks,6,5,"div",11),y.YNc(10,Ws,6,5,"div",11),y.qZA()()()),2&e){const e=y.oxw();y.xp6(3),y.hij("",e.lang.getLabel("LBL_SOME_SETTINGS_ARE_MISSING")," …"),y.xp6(3),y.Oqu(e.lang.getLabel("MSG_NOT_CONFIGURED_USER_SETTINGS")),y.xp6(2),y.Q6J("ngIf",e.isPrefMissing("timezone")),y.xp6(1),y.Q6J("ngIf",e.isPrefMissing("datef")),y.xp6(1),y.Q6J("ngIf",e.isPrefMissing("timef"))}}function ti(e,t){if(1&e&&(y.TgZ(0,"option",18),y._uU(1),y.qZA()),2&e){const e=t.$implicit,s=y.oxw(2);y.s9C("value",e),y.xp6(1),y.Oqu(s.timezones[e])}}const si=function(e){return[e]};function ii(e,t){if(1&e){const e=y.EpF();y.TgZ(0,"div",5)(1,"h3",6)(2,"span",7),y._uU(3),y.qZA()(),y.TgZ(4,"div",8)(5,"p",19),y._uU(6),y.qZA(),y.TgZ(7,"div",20)(8,"span",21)(9,"input",22),y.NdJ("ngModelChange",(function(t){y.CHM(e);const s=y.oxw();return y.KtG(s.timeshiftAction=t)})),y.qZA(),y.TgZ(10,"label",23),y._UZ(11,"span",24),y.qZA()(),y.TgZ(12,"div",25)(13,"div",15)(14,"select",26),y.NdJ("ngModelChange",(function(t){y.CHM(e);const s=y.oxw();return y.KtG(s.selectedTimezone=t)}))("change",(function(){y.CHM(e);const t=y.oxw();return y.KtG(t.timeshiftAction="takeSelected")})),y.YNc(15,ti,2,2,"option",17),y.qZA()()(),y.TgZ(16,"span",27)(17,"input",28),y.NdJ("ngModelChange",(function(t){y.CHM(e);const s=y.oxw();return y.KtG(s.timeshiftAction=t)})),y.qZA(),y.TgZ(18,"label",23),y._UZ(19,"span",24),y.TgZ(20,"span",29),y._uU(21),y.qZA()()()()()()}if(2&e){const e=y.oxw();y.xp6(3),y.Oqu(e.lang.getLabel("LBL_TIME_SHIFT")),y.xp6(3),y.Oqu(e.lang.getLabelFormatted("MSG_TIME_SHIFT",y.VKq(12,si,e.timeshift))),y.xp6(3),y.MGl("id","",e.componentId,"-timeshift-radio-2"),y.Q6J("ngModel",e.timeshiftAction),y.xp6(1),y.MGl("for","",e.componentId,"-timeshift-radio-2"),y.xp6(4),y.Q6J("ngModel",e.selectedTimezone),y.xp6(1),y.Q6J("ngForOf",e.timezoneKeys),y.xp6(2),y.MGl("id","",e.componentId,"-timeshift-radio-1"),y.Q6J("ngModel",e.timeshiftAction),y.xp6(1),y.MGl("for","",e.componentId,"-timeshift-radio-1"),y.xp6(3),y.AsE("",e.guessedTimezone," (GMT",e.guessedTimezoneGmtDiff,")")}}function ni(e,t){if(1&e){const e=y.EpF();y.TgZ(0,"div",30)(1,"div",31)(2,"div",32)(3,"input",33),y.NdJ("ngModelChange",(function(t){y.CHM(e);const s=y.oxw();return y.KtG(s.navigateToUserPrefs=t)})),y.qZA(),y.TgZ(4,"label",34),y._UZ(5,"span",35),y.TgZ(6,"span",29),y._uU(7),y.qZA()()()()()}if(2&e){const e=y.oxw();y.xp6(3),y.Q6J("ngModel",e.navigateToUserPrefs),y.xp6(4),y.Oqu(e.lang.getLabel("MSG_AFTER_SAVING_NAVIGATE_USERPREFS"))}}let li=(()=>{class GlobalObtainImportantPreferences{backend;lang;prefservice;session;router;toastservice;self;componentId=_.uniqueId();namesOfMissingPrefs=[];timeshift=0;preferences={};timezones;timezoneKeys;navigateToUserPrefs=!1;guessedTimezone=moment.tz.guess();guessedTimezoneGmtDiff=moment.tz(this.guessedTimezone).format("Z");configuredTimezone;timeshiftAction="takeSelected";selectedTimezone;dateFormatList=[{name:moment().format(this.prefservice.jsDateFormat2momentDateFormat("Y-m-d")),value:"Y-m-d"},{name:moment().format(this.prefservice.jsDateFormat2momentDateFormat("m-d-Y")),value:"m-d-Y"},{name:moment().format(this.prefservice.jsDateFormat2momentDateFormat("d-m-Y")),value:"d-m-Y"},{name:moment().format(this.prefservice.jsDateFormat2momentDateFormat("Y/m/d")),value:"Y/m/d"},{name:moment().format(this.prefservice.jsDateFormat2momentDateFormat("m/d/Y")),value:"m/d/Y"},{name:moment().format(this.prefservice.jsDateFormat2momentDateFormat("d/m/Y")),value:"d/m/Y"},{name:moment().format(this.prefservice.jsDateFormat2momentDateFormat("Y.m.d")),value:"Y.m.d"},{name:moment().format(this.prefservice.jsDateFormat2momentDateFormat("d.m.Y")),value:"d.m.Y"},{name:moment().format(this.prefservice.jsDateFormat2momentDateFormat("m.d.Y")),value:"m.d.Y"}];timeFormatList=[{name:moment().format(this.prefservice.jsTimeFormat2momentTimeFormat("H:i")),value:"H:i"},{name:moment().format(this.prefservice.jsTimeFormat2momentTimeFormat("h:ia")),value:"h:ia"},{name:moment().format(this.prefservice.jsTimeFormat2momentTimeFormat("h:iA")),value:"h:iA"},{name:moment().format(this.prefservice.jsTimeFormat2momentTimeFormat("h:i a")),value:"h:i a"},{name:moment().format(this.prefservice.jsTimeFormat2momentTimeFormat("h:i A")),value:"h:i A"},{name:moment().format(this.prefservice.jsTimeFormat2momentTimeFormat("H.i")),value:"H.i"},{name:moment().format(this.prefservice.jsTimeFormat2momentTimeFormat("h.ia")),value:"h.ia"},{name:moment().format(this.prefservice.jsTimeFormat2momentTimeFormat("h.iA")),value:"h.iA"},{name:moment().format(this.prefservice.jsTimeFormat2momentTimeFormat("h.i a")),value:"h.i a"},{name:moment().format(this.prefservice.jsTimeFormat2momentTimeFormat("h.i A")),value:"h.i A"}];constructor(e,t,s,i,n,l){this.backend=e,this.lang=t,this.prefservice=s,this.session=i,this.router=n,this.toastservice=l}ngOnInit(){this.timeshift&&(this.selectedTimezone=this.configuredTimezone=this.prefservice.unchangedPreferences.global.timezone);for(let e of this.namesOfMissingPrefs)this.preferences[e]=this.prefservice.defaults[e]}save(){this.timeshift&&("takeSelected"===this.timeshiftAction&&this.configuredTimezone!==this.selectedTimezone&&(this.preferences.timezone=this.selectedTimezone),"takeGuessed"===this.timeshiftAction&&(this.preferences.timezone=this.guessedTimezone)),_.isEmpty(this.preferences)||this.prefservice.setPreferences(this.preferences).subscribe((()=>{this.toastservice.sendToast(this.lang.getLabel("LBL_DATA_SAVED"),"success")})),this.navigateToUserPrefs&&this.router.navigate(["/module/Users/"+this.session.authData.userId]),this.self.destroy()}canSave(){if(this.namesOfMissingPrefs)for(let e of this.namesOfMissingPrefs)if(!this.preferences[e])return!1;return!0}isPrefMissing(e){return-1!==this.namesOfMissingPrefs.indexOf(e)}onModalEscX(){return!1}static ɵfac=function(e){return new(e||GlobalObtainImportantPreferences)(y.Y36(fe.y),y.Y36(Z.d),y.Y36(Mt.z),y.Y36(x.n),y.Y36(q.F0),y.Y36($.A))};static ɵcmp=y.Xpm({type:GlobalObtainImportantPreferences,selectors:[["global-obtain-important-preferences"]],inputs:{namesOfMissingPrefs:"namesOfMissingPrefs",timeshift:"timeshift"},decls:11,vars:6,consts:[["hiddenCloseButton","true"],["class","slds-section slds-is-open",4,"ngIf"],[1,"slds-grid","slds-grid--align-spread","slds-grid--align-center","slds-grid--align-end"],["class","slds-form-element slds-p-horizontal--medium slds-p-vertical--x-small slds-col--bump-right",4,"ngIf"],[1,"slds-button","slds-button--brand",3,"disabled","click"],[1,"slds-section","slds-is-open"],[1,"slds-section__title","slds-theme_shade"],["title","Section Title",1,"slds-truncate","slds-p-horizontal_small"],[1,"slds-section__content"],[1,"slds-p-horizontal--medium","slds-p-vertical--x-small"],[1,"slds-grid","slds-p-horizontal--x-small"],["class","slds-form-element slds-p-horizontal--x-small slds-p-bottom--x-small slds-size--1-of-3",4,"ngIf"],[1,"slds-form-element","slds-p-horizontal--x-small","slds-p-bottom--x-small","slds-size--1-of-3"],[1,"slds-form-element__label",3,"for"],[3,"ngModel","ngModelChange"],[1,"slds-select_container"],[1,"slds-select",3,"id","ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[1,"slds-p-horizontal--medium","slds-p-vertical--x-small","slds-m-bottom--x-small"],[1,"slds-grid","slds-p-horizontal--medium","slds-grid--vertical-align-center"],[1,"slds-radio"],["type","radio","checked","true","name","timeshift","value","takeSelected",3,"id","ngModel","ngModelChange"],[1,"slds-radio__label",3,"for"],[1,"slds-radio_faux"],[1,"slds-form-element"],["name","timezone",1,"slds-select",3,"ngModel","ngModelChange","change"],[1,"slds-radio","slds-m-left--medium"],["type","radio","name","timeshift","value","takeGuessed",3,"id","ngModel","ngModelChange"],[1,"slds-form-element__label"],[1,"slds-form-element","slds-p-horizontal--medium","slds-p-vertical--x-small","slds-col--bump-right"],[1,"slds-form-element__control"],[1,"slds-checkbox"],["type","checkbox","id","ask-userprefs-navigate",3,"ngModel","ngModelChange"],["for","ask-userprefs-navigate",1,"slds-checkbox__label"],[1,"slds-checkbox_faux"]],template:function(e,t){1&e&&(y.TgZ(0,"system-modal")(1,"system-modal-header",0),y._uU(2),y.qZA(),y.TgZ(3,"system-modal-content"),y.YNc(4,ei,11,5,"div",1),y.YNc(5,ii,22,14,"div",1),y.qZA(),y.TgZ(6,"system-modal-footer")(7,"div",2),y.YNc(8,ni,8,2,"div",3),y.TgZ(9,"button",4),y.NdJ("click",(function(){return t.save()})),y._uU(10),y.qZA()()()()),2&e&&(y.xp6(2),y.hij(" ",t.lang.getLabel("LBL_IMPORTANT_USER_SETTINGS")," "),y.xp6(2),y.Q6J("ngIf",t.namesOfMissingPrefs.length),y.xp6(1),y.Q6J("ngIf",t.timeshift),y.xp6(3),y.Q6J("ngIf",t.namesOfMissingPrefs.length),y.xp6(1),y.Q6J("disabled",!t.canSave()),y.xp6(1),y.Oqu(t.lang.getLabel("LBL_OK")))},dependencies:[i.sg,i.O5,n.YN,n.Kr,n.Fj,n.Wl,n.EJ,n._,n.JJ,n.On,we.j,Ze.x,Je.p,Te.y,zs.R],encapsulation:2})}return GlobalObtainImportantPreferences})();var oi=s(66550);function ai(e,t){if(1&e&&y._UZ(0,"div",2),2&e){const e=y.oxw();y.Q6J("innerHTML",e.sanitizer.bypassSecurityTrustHtml(e.consentText),y.oJD)}}let di=(()=>{class GlobalObtainGDPRConsent{sanitizer;metadata;language;backend;loginService;http;configuration;session;toast;consentText;isSaving=!1;constructor(e,t,s,i,n,l,o,a,d){this.sanitizer=e,this.metadata=t,this.language=s,this.backend=i,this.loginService=n,this.http=l,this.configuration=o,this.session=a,this.toast=d,this.retrieveConsentText()}retrieveConsentText(){let e=new ae.WM;e=e.set("OAuth-Token",this.session.authData.sessionId),this.http.get(this.configuration.getBackendUrl()+"/common/gdpr/portalGDPRconsentText",{headers:e}).subscribe((e=>{this.consentText=e.portalGDPRconsentText}))}save(){this.isSaving||(this.isSaving=!0,this.backend.postRequest("common/gdpr/portalGDPRconsent",null,{consentText:this.consentText}).subscribe((e=>{this.loginService.session.authData.obtainGDPRconsent=!1}),(e=>{this.isSaving=!1,"wrongConsentText"===e.error.error.errorCode?this.consentText=e.error.error.details.properConsentText:this.toast.sendToast("Error saving the GDPR consent.","error","Try again or consult the administrator.")})))}canSave(){return this.consentText&&!this.isSaving}static ɵfac=function(e){return new(e||GlobalObtainGDPRConsent)(y.Y36(oi.H7),y.Y36(w.Pu),y.Y36(Z.d),y.Y36(fe.y),y.Y36(de.j),y.Y36(ae.eN),y.Y36(V.C),y.Y36(x.n),y.Y36($.A))};static ɵcmp=y.Xpm({type:GlobalObtainGDPRConsent,selectors:[["global-obtain-gdpr-consent"]],decls:2,vars:2,consts:[[2,"min-height","80px",3,"system-overlay-loading-spinner"],[3,"innerHTML",4,"ngIf"],[3,"innerHTML"]],template:function(e,t){1&e&&(y.TgZ(0,"div",0),y.YNc(1,ai,1,1,"div",1),y.qZA()),2&e&&(y.Q6J("system-overlay-loading-spinner",!t.consentText),y.xp6(1),y.Q6J("ngIf",t.consentText))},dependencies:[i.O5,xe._],encapsulation:2})}return GlobalObtainGDPRConsent})();var ri=s(96933);const ci=["container"];function ui(e,t){1&e&&y._UZ(0,"global-obtain-gdpr-consent")}let mi=(()=>{class GlobalObtainGDPRConsentContainer{metadata;language;login;componentConfig;nameOfCustomComponent;container;childComponent;showDefault=!1;headerLabel="LBL_GDPR_DATA_AGREEMENT";taglineLabel="MSG_TO_CONTINUE_AGREE_TO_GDPR_CONSENT";saveButtonLabel="LBL_I_AGREE";canSave=()=>!!this.childComponent&&this.childComponent.canSave();isSaving=()=>!!this.childComponent&&this.childComponent.isSaving;self;constructor(e,t,s){this.metadata=e,this.language=t,this.login=s}ngAfterViewInit(){this.displayComponent()}displayComponent(){this.componentConfig=this.metadata.getComponentConfig("GlobalObtainGDPRConsentContainer"),this.componentConfig&&this.componentConfig.customComponent?(this.nameOfCustomComponent=this.componentConfig.customComponent,this.metadata.addComponent(this.nameOfCustomComponent,this.container).subscribe((e=>{e.instance.headerLabel&&(this.headerLabel=e.instance.headerLabel),e.instance.taglineLabel&&(this.taglineLabel=e.instance.taglineLabel),e.instance.saveButtonLabel&&(this.saveButtonLabel=e.instance.saveButtonLabel),e.instance.finished.subscribe((e=>this.finished(e))),this.childComponent=e.instance}))):this.showDefault=!0}save(){this.childComponent.save()}finished(e){e||this.login.logout(),this.self.destroy()}static ɵfac=function(e){return new(e||GlobalObtainGDPRConsentContainer)(y.Y36(w.Pu),y.Y36(Z.d),y.Y36(de.j))};static ɵcmp=y.Xpm({type:GlobalObtainGDPRConsentContainer,selectors:[["global-obtain-gdpr-consent-container"]],viewQuery:function(e,t){if(1&e&&(y.Gf(ci,5,y.s_b),y.Gf(di,5)),2&e){let e;y.iGM(e=y.CRH())&&(t.container=e.first),y.iGM(e=y.CRH())&&(t.childComponent=e.first)}},decls:14,vars:7,consts:[["size","small"],["hiddenCloseButton","true"],[3,"system-overlay-loading-spinner"],["container",""],[4,"ngIf"],[1,"slds-button","slds-button--neutral",3,"click"],[1,"slds-button","slds-button--brand",3,"disabled","click"]],template:function(e,t){1&e&&(y.TgZ(0,"system-modal",0)(1,"system-modal-header",1),y._uU(2),y.TgZ(3,"system-modal-header-tagline"),y._uU(4),y.qZA()(),y.TgZ(5,"system-modal-content",2),y._UZ(6,"div",null,3),y.YNc(8,ui,1,0,"global-obtain-gdpr-consent",4),y.qZA(),y.TgZ(9,"system-modal-footer")(10,"button",5),y.NdJ("click",(function(){return t.finished(!1)})),y._uU(11),y.qZA(),y.TgZ(12,"button",6),y.NdJ("click",(function(){return t.save()})),y._uU(13),y.qZA()()()),2&e&&(y.xp6(2),y.hij(" ",t.language.getLabel(t.headerLabel)," "),y.xp6(2),y.Oqu(t.language.getLabel(t.taglineLabel)),y.xp6(1),y.Q6J("system-overlay-loading-spinner",t.isSaving()),y.xp6(3),y.Q6J("ngIf",t.showDefault),y.xp6(3),y.Oqu(t.language.getLabel("LBL_CANCEL")),y.xp6(1),y.Q6J("disabled",!t.canSave()),y.xp6(1),y.Oqu(t.language.getLabel(t.saveButtonLabel)))},dependencies:[i.O5,xe._,we.j,Ze.x,Je.p,Te.y,ri.J,di],encapsulation:2})}return GlobalObtainGDPRConsentContainer})();var gi=s(93131),hi=s(83298);function pi(e,t){1&e&&(y.TgZ(0,"span",15),y._UZ(1,"system-icon",16),y.qZA())}function fi(e,t){1&e&&(y.TgZ(0,"abbr",17),y._uU(1,"●"),y.qZA())}function bi(e,t){if(1&e&&(y.TgZ(0,"div",2)(1,"div",3),y.YNc(2,pi,2,0,"span",4),y.qZA(),y.TgZ(3,"div",5)(4,"div",6)(5,"a",7)(6,"h3",8)(7,"span",9),y._uU(8),y.qZA(),y.TgZ(9,"span",10),y._UZ(10,"system-label",11),y.qZA(),y.TgZ(11,"span",12),y._uU(12),y.qZA()(),y.TgZ(13,"p",13),y._uU(14),y.YNc(15,fi,2,0,"abbr",14),y.qZA()()()()()),2&e){const e=y.oxw();y.xp6(2),y.Q6J("ngIf",e.notification.bean_module),y.xp6(2),y.ekj("slds-text-title_bold",1!=e.notification.notification_read),y.xp6(3),y.Q6J("id",e.notification.bean_id)("module",e.notification.bean_module)("system-title",e.notification.bean_name),y.xp6(1),y.hij(" ",e.notification.bean_name," "),y.xp6(3),y.Q6J("id",e.notification.created_by)("system-title",e.notification.created_by_name),y.xp6(1),y.hij(" ",e.notification.created_by_name," "),y.xp6(2),y.hij(" ",e.notification.notification_date," "),y.xp6(1),y.Q6J("ngIf",1!=e.notification.notification_read)}}function _i(e,t){if(1&e){const e=y.EpF();y.TgZ(0,"section",18)(1,"div",19)(2,"a",20),y._UZ(3,"system-icon",16),y.TgZ(4,"div",5)(5,"h2",21)(6,"span",22),y._uU(7),y.qZA(),y.TgZ(8,"span",10),y._UZ(9,"system-label",11),y.qZA(),y.TgZ(10,"span",23),y._uU(11),y.qZA()(),y.TgZ(12,"p"),y._uU(13),y.qZA()()(),y.TgZ(14,"button",24),y.NdJ("click",(function(){y.CHM(e);const t=y.oxw();return y.KtG(t.notificationService.clearTempNotification(t.notification))})),y._UZ(15,"system-button-icon",25),y.qZA()()()}if(2&e){const e=y.oxw();y.xp6(6),y.Q6J("id",e.notification.bean_id)("module",e.notification.bean_module)("system-title",e.notification.bean_name),y.xp6(1),y.hij(" ",e.notification.bean_name," "),y.xp6(3),y.Q6J("id",e.notification.created_by)("system-title",e.notification.created_by_name),y.xp6(1),y.hij(" ",e.notification.created_by_name," "),y.xp6(2),y.hij(" ",e.notification.notification_date," ")}}let vi=(()=>{class GlobalHeaderNotificationsItemGeneric{notificationService;notification;asBox=!1;constructor(e){this.notificationService=e}static ɵfac=function(e){return new(e||GlobalHeaderNotificationsItemGeneric)(y.Y36(hi.t))};static ɵcmp=y.Xpm({type:GlobalHeaderNotificationsItemGeneric,selectors:[["global-header-notifications-item-generic"]],inputs:{notification:"notification",asBox:"asBox"},decls:3,vars:2,consts:[["class","slds-media slds-has-flexi-truncate slds-p-around_x-small",4,"ngIf","ngIfElse"],["boxContainer",""],[1,"slds-media","slds-has-flexi-truncate","slds-p-around_x-small"],[1,"slds-media__figure"],["class","slds-icon_container","style","width:40px;height:40px;",4,"ngIf"],[1,"slds-media__body"],[1,"slds-grid","slds-grid_align-spread"],["href","javascript:void(0);",1,"slds-text-link_reset","slds-has-flexi-truncate"],[1,"slds-truncate"],["system-model-popover","",1,"slds-m-right--xxx-small",3,"id","module","system-title"],["system-title","MSG_NOTIFICATION_GENERIC"],["label","MSG_NOTIFICATION_GENERIC"],["system-model-popover","","module","Users",1,"slds-m-right--xxx-small",3,"id","system-title"],[1,"slds-text-color_weak"],["system-title","LBL_UNREAD","class","slds-text-link slds-m-horizontal_xxx-small slds-text-color_success",4,"ngIf"],[1,"slds-icon_container",2,"width","40px","height","40px"],["icon","all"],["system-title","LBL_UNREAD",1,"slds-text-link","slds-m-horizontal_xxx-small","slds-text-color_success"],["role","dialog",1,"slds-notification","slds-m-vertical--xxx-small"],[1,"slds-notification__body"],[1,"slds-notification__target","slds-media"],[1,"slds-text-heading_small","slds-m-bottom_xx-small"],["system-model-popover","",1,"slds-m-right--xxx-small",2,"text-decoration","underline",3,"id","module","system-title"],["system-model-popover","","module","Users",1,"slds-m-right--xxx-small",2,"text-decoration","underline",3,"id","system-title"],["system-title","LBL_CLOSE",1,"slds-button","slds-button_icon","slds-button_icon-container","slds-notification__close",3,"click"],["icon","close"]],template:function(e,t){if(1&e&&(y.YNc(0,bi,16,12,"div",0),y.YNc(1,_i,16,8,"ng-template",null,1,y.W1O)),2&e){const e=y.MAs(2);y.Q6J("ngIf",!t.asBox)("ngIfElse",e)}},dependencies:[i.O5,rs.g,T.S,Y.J,J.f,C._],encapsulation:2})}return GlobalHeaderNotificationsItemGeneric})();function yi(e,t){1&e&&(y.TgZ(0,"div",15),y._UZ(1,"system-icon",16),y.qZA())}function xi(e,t){1&e&&(y.TgZ(0,"abbr",17),y._uU(1,"●"),y.qZA())}function wi(e,t){if(1&e&&(y.TgZ(0,"div",2)(1,"div",3),y.YNc(2,yi,2,0,"div",4),y.qZA(),y.TgZ(3,"div",5)(4,"div",6)(5,"h3",7)(6,"span",8),y._UZ(7,"system-label",9),y.qZA(),y.TgZ(8,"span",10),y._uU(9),y.qZA(),y._UZ(10,"system-label",11),y.TgZ(11,"span",12),y._uU(12),y.qZA()(),y.TgZ(13,"p",13),y._uU(14),y.YNc(15,xi,2,0,"abbr",14),y.qZA()()()()),2&e){const e=y.oxw();y.xp6(2),y.Q6J("ngIf",e.notification.bean_module),y.xp6(2),y.ekj("slds-text-title_bold",1!=e.notification.notification_read),y.xp6(4),y.Q6J("id",e.notification.bean_id)("module",e.notification.bean_module)("system-title",e.notification.bean_name),y.xp6(1),y.hij(" ",e.notification.bean_name," "),y.xp6(2),y.Q6J("id",e.notification.created_by)("system-title",e.notification.created_by_name),y.xp6(1),y.hij(" ",e.notification.created_by_name," "),y.xp6(2),y.hij(" ",e.notification.notification_date," "),y.xp6(1),y.Q6J("ngIf",1!=e.notification.notification_read)}}function Zi(e,t){if(1&e){const e=y.EpF();y.TgZ(0,"section",18)(1,"div",19)(2,"a",20),y._UZ(3,"system-icon",16),y.TgZ(4,"div",5)(5,"h2",21)(6,"span",22),y._UZ(7,"system-label",23),y.qZA(),y.TgZ(8,"span",24),y._uU(9),y.qZA(),y._UZ(10,"system-label",25),y.TgZ(11,"span",26),y._uU(12),y.qZA()(),y.TgZ(13,"p"),y._uU(14),y.qZA()()(),y.TgZ(15,"button",27),y.NdJ("click",(function(){y.CHM(e);const t=y.oxw();return y.KtG(t.notificationService.clearTempNotification(t.notification))})),y._UZ(16,"system-button-icon",28),y.qZA()()()}if(2&e){const e=y.oxw();y.xp6(8),y.Q6J("id",e.notification.bean_id)("module",e.notification.bean_module)("system-title",e.notification.bean_name),y.xp6(1),y.hij(" ",e.notification.bean_name," "),y.xp6(2),y.Q6J("id",e.notification.created_by)("system-title",e.notification.created_by_name),y.xp6(1),y.hij(" ",e.notification.created_by_name," "),y.xp6(2),y.hij(" ",e.notification.notification_date," ")}}let Ti=(()=>{class GlobalHeaderNotificationsItemChange{notificationService;notification;asBox=!1;constructor(e){this.notificationService=e}static ɵfac=function(e){return new(e||GlobalHeaderNotificationsItemChange)(y.Y36(hi.t))};static ɵcmp=y.Xpm({type:GlobalHeaderNotificationsItemChange,selectors:[["global-header-notifications-item-change"]],inputs:{notification:"notification",asBox:"asBox"},decls:3,vars:2,consts:[["class","slds-media slds-has-flexi-truncate slds-p-around_x-small",4,"ngIf","ngIfElse"],["boxContainer",""],[1,"slds-media","slds-has-flexi-truncate","slds-p-around_x-small"],[1,"slds-media__figure"],["class","slds-icon_container","style","width:40px;height:40px;",4,"ngIf"],[1,"slds-media__body"],[1,"slds-grid","slds-grid_align-spread"],[1,"slds-truncate"],["system-title","LBL_CHANGED",1,"slds-m-right--xx-small"],["label","LBL_CHANGED"],["system-model-popover","",1,"slds-m-right--xxx-small",3,"id","module","system-title"],["label","LBL_BY",1,"slds-m-right--xxx-small","slds-m-left--xxx-small"],["system-model-popover","","module","Users",1,"slds-m-right--xxx-small",3,"id","system-title"],[1,"slds-text-color_weak"],["system-title","LBL_UNREAD","class","slds-text-link slds-m-horizontal_xxx-small slds-text-color_success",4,"ngIf"],[1,"slds-icon_container",2,"width","40px","height","40px"],["icon","custom18","sprite","custom"],["system-title","LBL_UNREAD",1,"slds-text-link","slds-m-horizontal_xxx-small","slds-text-color_success"],["role","dialog",1,"slds-notification","slds-m-vertical--xxx-small"],[1,"slds-notification__body"],[1,"slds-notification__target","slds-media"],[1,"slds-text-heading_small","slds-m-bottom_xx-small"],["system-title","LBL_CHANGED"],["label","LBL_ASSIGNED"],["system-model-popover","",1,"slds-m-right--xxx-small",2,"text-decoration","underline",3,"id","module","system-title"],["label","LBL_BY"],["system-model-popover","","module","Users",1,"slds-m-right--xxx-small",2,"text-decoration","underline",3,"id","system-title"],["system-title","LBL_CLOSE",1,"slds-button","slds-button_icon","slds-button_icon-container","slds-notification__close",3,"click"],["icon","close"]],template:function(e,t){if(1&e&&(y.YNc(0,wi,16,12,"div",0),y.YNc(1,Zi,17,8,"ng-template",null,1,y.W1O)),2&e){const e=y.MAs(2);y.Q6J("ngIf",!t.asBox)("ngIfElse",e)}},dependencies:[i.O5,rs.g,T.S,Y.J,J.f,C._],encapsulation:2})}return GlobalHeaderNotificationsItemChange})();function Ci(e,t){1&e&&(y.TgZ(0,"span",16),y._UZ(1,"system-icon",17),y.qZA())}function ki(e,t){1&e&&(y.TgZ(0,"abbr",18),y._uU(1,"●"),y.qZA())}function Ai(e,t){if(1&e&&(y.TgZ(0,"div",2)(1,"div",3),y.YNc(2,Ci,2,0,"span",4),y.qZA(),y.TgZ(3,"div",5)(4,"div",6)(5,"a",7)(6,"h3",8)(7,"span",9),y._UZ(8,"system-label",10),y.qZA(),y.TgZ(9,"span",11),y._uU(10),y.qZA(),y._UZ(11,"system-label",12),y.TgZ(12,"span",13),y._uU(13),y.qZA()(),y.TgZ(14,"p",14),y._uU(15),y.YNc(16,ki,2,0,"abbr",15),y.qZA()()()()()),2&e){const e=y.oxw();y.xp6(2),y.Q6J("ngIf",e.notification.bean_module),y.xp6(2),y.ekj("slds-text-title_bold",1!=e.notification.notification_read),y.xp6(5),y.Q6J("id",e.notification.bean_id)("module",e.notification.bean_module)("system-title",e.notification.bean_name),y.xp6(1),y.hij(" ",e.notification.bean_name," "),y.xp6(2),y.Q6J("id",e.notification.created_by)("system-title",e.notification.created_by_name),y.xp6(1),y.hij(" ",e.notification.created_by_name," "),y.xp6(2),y.hij(" ",e.notification.notification_date," "),y.xp6(1),y.Q6J("ngIf",1!=e.notification.notification_read)}}function Li(e,t){if(1&e){const e=y.EpF();y.TgZ(0,"section",19)(1,"div",20)(2,"a",21),y._UZ(3,"system-icon",17),y.TgZ(4,"div",5)(5,"h2",22)(6,"span",23),y._UZ(7,"system-label",10),y.qZA(),y.TgZ(8,"span",24),y._uU(9),y.qZA(),y._UZ(10,"system-label",12),y.TgZ(11,"span",25),y._uU(12),y.qZA()(),y.TgZ(13,"p"),y._uU(14),y.qZA()()(),y.TgZ(15,"button",26),y.NdJ("click",(function(){y.CHM(e);const t=y.oxw();return y.KtG(t.notificationService.clearTempNotification(t.notification))})),y._UZ(16,"system-button-icon",27),y.qZA()()()}if(2&e){const e=y.oxw();y.xp6(8),y.Q6J("id",e.notification.bean_id)("module",e.notification.bean_module)("system-title",e.notification.bean_name),y.xp6(1),y.hij(" ",e.notification.bean_name," "),y.xp6(2),y.Q6J("id",e.notification.created_by)("system-title",e.notification.created_by_name),y.xp6(1),y.hij(" ",e.notification.created_by_name," "),y.xp6(2),y.hij(" ",e.notification.notification_date," ")}}let Ii=(()=>{class GlobalHeaderNotificationsItemAssign{notificationService;notification;asBox=!1;constructor(e){this.notificationService=e}static ɵfac=function(e){return new(e||GlobalHeaderNotificationsItemAssign)(y.Y36(hi.t))};static ɵcmp=y.Xpm({type:GlobalHeaderNotificationsItemAssign,selectors:[["global-header-notifications-item-assign"]],inputs:{notification:"notification",asBox:"asBox"},decls:3,vars:2,consts:[["class","slds-media slds-has-flexi-truncate slds-p-around_x-small",4,"ngIf","ngIfElse"],["boxContainer",""],[1,"slds-media","slds-has-flexi-truncate","slds-p-around_x-small"],[1,"slds-media__figure"],["class","slds-icon_container","style","width:40px;height:40px;",4,"ngIf"],[1,"slds-media__body"],[1,"slds-grid","slds-grid_align-spread"],["href","javascript:void(0);",1,"slds-text-link_reset","slds-has-flexi-truncate"],[1,"slds-truncate"],["system-title","LBL_ASSIGNED",1,"slds-m-right--xx-small"],["label","LBL_ASSIGNED"],["system-model-popover","",1,"slds-m-right--xxx-small",3,"id","module","system-title"],["label","LBL_BY"],["system-model-popover","","module","Users",1,"slds-m-right--xxx-small",3,"id","system-title"],[1,"slds-text-color_weak"],["system-title","LBL_UNREAD","class","slds-text-link slds-m-horizontal_xxx-small slds-text-color_success",4,"ngIf"],[1,"slds-icon_container",2,"width","40px","height","40px"],["icon","individual"],["system-title","LBL_UNREAD",1,"slds-text-link","slds-m-horizontal_xxx-small","slds-text-color_success"],["role","dialog",1,"slds-notification","slds-m-vertical--xxx-small"],[1,"slds-notification__body"],[1,"slds-notification__target","slds-media"],[1,"slds-text-heading_small","slds-m-bottom_xx-small"],["system-title","LBL_ASSIGNED"],["system-model-popover","",1,"slds-m-right--xxx-small",2,"text-decoration","underline",3,"id","module","system-title"],["system-model-popover","","module","Users",1,"slds-m-right--xxx-small",2,"text-decoration","underline",3,"id","system-title"],["system-title","LBL_CLOSE",1,"slds-button","slds-button_icon","slds-button_icon-container","slds-notification__close",3,"click"],["icon","close"]],template:function(e,t){if(1&e&&(y.YNc(0,Ai,17,12,"div",0),y.YNc(1,Li,17,8,"ng-template",null,1,y.W1O)),2&e){const e=y.MAs(2);y.Q6J("ngIf",!t.asBox)("ngIfElse",e)}},dependencies:[i.O5,rs.g,T.S,Y.J,J.f,C._],encapsulation:2})}return GlobalHeaderNotificationsItemAssign})();function Si(e,t){1&e&&(y.TgZ(0,"span",16),y._UZ(1,"system-icon",17),y.qZA())}function Mi(e,t){1&e&&(y.TgZ(0,"abbr",18),y._uU(1,"●"),y.qZA())}function Ji(e,t){if(1&e&&(y.TgZ(0,"div",2)(1,"div",3),y.YNc(2,Si,2,0,"span",4),y.qZA(),y.TgZ(3,"div",5)(4,"div",6)(5,"a",7)(6,"h3",8)(7,"span",9),y._UZ(8,"system-label",10),y.qZA(),y.TgZ(9,"span",11),y._uU(10),y.qZA(),y._UZ(11,"system-label",12),y.TgZ(12,"span",13),y._uU(13),y.qZA()(),y.TgZ(14,"p",14),y._uU(15),y.YNc(16,Mi,2,0,"abbr",15),y.qZA()()()()()),2&e){const e=y.oxw();y.xp6(2),y.Q6J("ngIf",e.notification.bean_module),y.xp6(2),y.ekj("slds-text-title_bold",1!=e.notification.notification_read),y.xp6(5),y.Q6J("system-title",e.notification.bean_name),y.xp6(1),y.hij(" ",e.notification.bean_name," "),y.xp6(2),y.Q6J("id",e.notification.created_by)("system-title",e.notification.created_by_name),y.xp6(1),y.hij(" ",e.notification.created_by_name," "),y.xp6(2),y.hij(" ",e.notification.notification_date," "),y.xp6(1),y.Q6J("ngIf",1!=e.notification.notification_read)}}function Oi(e,t){if(1&e){const e=y.EpF();y.TgZ(0,"section",19)(1,"div",20)(2,"a",21),y._UZ(3,"system-icon",17),y.TgZ(4,"div",5)(5,"h2",22)(6,"span",23),y._UZ(7,"system-label",24),y.qZA(),y.TgZ(8,"span",25),y._uU(9),y.qZA(),y._UZ(10,"system-label",12),y.TgZ(11,"span",26),y._uU(12),y.qZA()(),y.TgZ(13,"p"),y._uU(14),y.qZA()()(),y.TgZ(15,"button",27),y.NdJ("click",(function(){y.CHM(e);const t=y.oxw();return y.KtG(t.notificationService.clearTempNotification(t.notification))})),y._UZ(16,"system-button-icon",28),y.qZA()()()}if(2&e){const e=y.oxw();y.xp6(8),y.Q6J("id",e.notification.bean_id)("module",e.notification.bean_module)("system-title",e.notification.bean_name),y.xp6(1),y.hij(" ",e.notification.bean_name," "),y.xp6(2),y.Q6J("id",e.notification.created_by)("system-title",e.notification.created_by_name),y.xp6(1),y.hij(" ",e.notification.created_by_name," "),y.xp6(2),y.hij(" ",e.notification.notification_date," ")}}let Ni=(()=>{class GlobalHeaderNotificationsItemDelete{notificationService;notification;asBox=!1;constructor(e){this.notificationService=e}static ɵfac=function(e){return new(e||GlobalHeaderNotificationsItemDelete)(y.Y36(hi.t))};static ɵcmp=y.Xpm({type:GlobalHeaderNotificationsItemDelete,selectors:[["global-header-notifications-item-delete"]],inputs:{notification:"notification",asBox:"asBox"},decls:3,vars:2,consts:[["class","slds-media slds-has-flexi-truncate slds-p-around_x-small",4,"ngIf","ngIfElse"],["boxContainer",""],[1,"slds-media","slds-has-flexi-truncate","slds-p-around_x-small"],[1,"slds-media__figure"],["class","slds-icon_container","style","width:40px;height:40px;",4,"ngIf"],[1,"slds-media__body"],[1,"slds-grid","slds-grid_align-spread"],["href","javascript:void(0);",1,"slds-text-link_reset","slds-has-flexi-truncate"],[1,"slds-truncate"],["system-title","LBL_DELETED",1,"slds-m-right--xx-small"],["label","LBL_DELETED"],[1,"slds-m-right--xxx-small",3,"system-title"],["label","LBL_BY"],["system-model-popover","","module","Users",1,"slds-m-right--xxx-small",3,"id","system-title"],[1,"slds-text-color_weak"],["system-title","LBL_UNREAD","class","slds-text-link slds-m-horizontal_xxx-small slds-text-color_success",4,"ngIf"],[1,"slds-icon_container",2,"width","40px","height","40px"],["icon","record_delete"],["system-title","LBL_UNREAD",1,"slds-text-link","slds-m-horizontal_xxx-small","slds-text-color_success"],["role","dialog",1,"slds-notification","slds-m-vertical--xxx-small"],[1,"slds-notification__body"],[1,"slds-notification__target","slds-media"],[1,"slds-text-heading_small","slds-m-bottom_xx-small"],["system-title","LBL_ASSIGNED"],["label","LBL_ASSIGNED"],["system-model-popover","",1,"slds-m-right--xxx-small",2,"text-decoration","underline",3,"id","module","system-title"],["system-model-popover","","module","Users",1,"slds-m-right--xxx-small",2,"text-decoration","underline",3,"id","system-title"],["system-title","LBL_CLOSE",1,"slds-button","slds-button_icon","slds-button_icon-container","slds-notification__close",3,"click"],["icon","close"]],template:function(e,t){if(1&e&&(y.YNc(0,Ji,17,10,"div",0),y.YNc(1,Oi,17,8,"ng-template",null,1,y.W1O)),2&e){const e=y.MAs(2);y.Q6J("ngIf",!t.asBox)("ngIfElse",e)}},dependencies:[i.O5,rs.g,T.S,Y.J,J.f,C._],encapsulation:2})}return GlobalHeaderNotificationsItemDelete})();var Fi=s(46538);function qi(e,t){if(1&e&&y._UZ(0,"system-icon",12),2&e){const e=y.oxw();y.Q6J("module",e.notification.bean_module)}}let Ei=(()=>{class GlobalHeaderNotificationsItemReminder{notificationService;notification;asBox=!1;constructor(e){this.notificationService=e}static ɵfac=function(e){return new(e||GlobalHeaderNotificationsItemReminder)(y.Y36(hi.t))};static ɵcmp=y.Xpm({type:GlobalHeaderNotificationsItemReminder,selectors:[["global-header-notifications-item-reminder"]],inputs:{notification:"notification",asBox:"asBox"},decls:14,vars:6,consts:[["role","dialog",1,"slds-notification","slds-m-vertical--xxx-small"],[1,"slds-notification__body"],[1,"slds-notification__target","slds-media"],[3,"module",4,"ngIf"],[1,"slds-media__body"],[1,"slds-text-color_weak","slds-text-body_small"],["icon","custom25","sprite","custom"],[1,"slds-truncate"],["system-model-popover","",1,"slds-m-right--xxx-small",3,"id","module","system-title"],[3,"date"],["system-title","LBL_CLOSE",1,"slds-button","slds-button_icon","slds-button_icon-container","slds-notification__close",3,"click"],["icon","close"],[3,"module"]],template:function(e,t){1&e&&(y.TgZ(0,"section",0)(1,"div",1)(2,"a",2),y.YNc(3,qi,1,1,"system-icon",3),y.TgZ(4,"div",4)(5,"div",5),y._UZ(6,"system-icon",6),y.qZA(),y.TgZ(7,"h3",7)(8,"span",8),y._uU(9),y.qZA()(),y.TgZ(10,"p",5),y._UZ(11,"system-display-datetime",9),y.qZA()()(),y.TgZ(12,"button",10),y.NdJ("click",(function(){return t.notificationService.clearTempNotification(t.notification)})),y._UZ(13,"system-button-icon",11),y.qZA()()()),2&e&&(y.xp6(3),y.Q6J("ngIf",t.notification.bean_module),y.xp6(5),y.Q6J("id",t.notification.bean_id)("module",t.notification.bean_module)("system-title",t.notification.bean_name),y.xp6(1),y.hij(" ",t.notification.bean_name," "),y.xp6(2),y.Q6J("date",t.notification.notification_date))},dependencies:[i.O5,rs.g,T.S,Y.J,Fi.a,J.f],encapsulation:2})}return GlobalHeaderNotificationsItemReminder})();var Yi=s(32355),Di=s(20528);function Ui(e,t){if(1&e&&(y.TgZ(0,"div",7),y._uU(1),y.qZA()),2&e){const e=y.oxw();y.xp6(1),y.hij(" ",e.notificationService.unreadCount," ")}}function Qi(e,t){if(1&e){const e=y.EpF();y.TgZ(0,"a",20),y.NdJ("click",(function(){y.CHM(e);const t=y.oxw(2);return y.KtG(t.markAllAsRead())})),y._UZ(1,"system-label",21),y.qZA()}}function Ri(e,t){1&e&&(y.TgZ(0,"div",32),y._UZ(1,"system-label",33),y.qZA())}function ji(e,t){if(1&e&&y._UZ(0,"global-header-notifications-item-assign",41),2&e){const e=y.oxw(2).$implicit;y.Q6J("notification",e)}}function Bi(e,t){if(1&e&&y._UZ(0,"global-header-notifications-item-change",41),2&e){const e=y.oxw(2).$implicit;y.Q6J("notification",e)}}function Gi(e,t){if(1&e&&y._UZ(0,"global-header-notifications-item-delete",41),2&e){const e=y.oxw(2).$implicit;y.Q6J("notification",e)}}function Pi(e,t){if(1&e&&y._UZ(0,"global-header-notifications-item-generic",41),2&e){const e=y.oxw(2).$implicit;y.Q6J("notification",e)}}function Hi(e,t){if(1&e){const e=y.EpF();y.TgZ(0,"li",35),y.YNc(1,ji,1,1,"global-header-notifications-item-assign",36),y.YNc(2,Bi,1,1,"global-header-notifications-item-change",36),y.YNc(3,Gi,1,1,"global-header-notifications-item-delete",36),y.YNc(4,Pi,1,1,"global-header-notifications-item-generic",37),y.TgZ(5,"div",38),y.NdJ("click",(function(t){y.CHM(e);const s=y.oxw().$implicit;return y.oxw(3).markAsRead(s.id),y.KtG(t.stopPropagation())})),y.TgZ(6,"button",39),y._UZ(7,"system-button-icon",40),y.qZA()()()}if(2&e){const e=y.oxw().$implicit;y.Q6J("ngSwitch",e.notification_type),y.xp6(1),y.Q6J("ngSwitchCase","assign"),y.xp6(1),y.Q6J("ngSwitchCase","change"),y.xp6(1),y.Q6J("ngSwitchCase","delete")}}function zi(e,t){if(1&e&&(y.ynx(0),y.YNc(1,Hi,8,4,"li",34),y.BQk()),2&e){const e=t.$implicit;y.xp6(1),y.Q6J("ngIf","reminder"!=e.notification_type)}}function Vi(e,t){1&e&&(y.TgZ(0,"div",42),y._UZ(1,"system-spinner"),y.qZA())}function $i(e,t){if(1&e){const e=y.EpF();y.TgZ(0,"li",29)(1,"a",20),y.NdJ("click",(function(){y.CHM(e);const t=y.oxw(3);return y.KtG(t.manageSubscriptions())})),y._UZ(2,"system-label",43),y.qZA()()}}function Ki(e,t){if(1&e){const e=y.EpF();y.TgZ(0,"div",22),y.YNc(1,Ri,2,0,"div",23),y.TgZ(2,"ul",24),y.YNc(3,zi,2,1,"ng-container",25),y.qZA(),y.YNc(4,Vi,2,0,"div",26),y.TgZ(5,"div",27)(6,"ul",28)(7,"li",29)(8,"a",20),y.NdJ("click",(function(){y.CHM(e);const t=y.oxw(2);return y.KtG(t.showAllNotifications())})),y._UZ(9,"system-label",30),y.qZA()(),y.YNc(10,$i,3,0,"li",31),y.qZA()()()}if(2&e){const e=y.oxw(2);y.xp6(1),y.Q6J("ngIf",0===(null==e.notificationService.unreadNotifications?null:e.notificationService.unreadNotifications.length)),y.xp6(2),y.Q6J("ngForOf",e.notificationService.unreadNotifications),y.xp6(1),y.Q6J("ngIf",e.notificationService.isLoading),y.xp6(6),y.Q6J("ngIf",e.hasSubscriptions)}}function Xi(e,t){if(1&e){const e=y.EpF();y.TgZ(0,"system-checkbox-toggle",47),y.NdJ("ngModelChange",(function(t){y.CHM(e);const s=y.oxw(3);return y.KtG(s.setDisplayDesktopNotification(t))})),y.qZA()}if(2&e){const e=y.oxw(3);y.Q6J("ngModel",e.userPreferences.toUse.displayDesktopNotifications)}}function Wi(e,t){1&e&&(y.TgZ(0,"div",48)(1,"span",49),y._UZ(2,"system-label",50),y.qZA(),y.TgZ(3,"span",51),y._UZ(4,"system-label",52),y.qZA()())}function en(e,t){if(1&e){const e=y.EpF();y.TgZ(0,"div",32)(1,"system-checkbox-toggle",44),y.NdJ("ngModelChange",(function(t){y.CHM(e);const s=y.oxw(2);return y.KtG(s.setSetting("showRealtimeNotifications",t))})),y.qZA(),y.YNc(2,Xi,1,1,"system-checkbox-toggle",45),y.YNc(3,Wi,5,0,"ng-template",null,46,y.W1O),y.qZA()}if(2&e){const e=y.MAs(4),t=y.oxw(2);y.xp6(1),y.Q6J("ngModel",t.userPreferences.toUse.showRealtimeNotifications),y.xp6(1),y.Q6J("ngIf","denied"!==t.desktopNotificationsStatus&&!t.desktopNotificationsDisabled)("ngIfElse",e)}}function tn(e,t){if(1&e){const e=y.EpF();y.TgZ(0,"section",8)(1,"div",9)(2,"header",10)(3,"h2",11),y._UZ(4,"system-label",12),y.qZA(),y.YNc(5,Qi,2,0,"a",13),y.qZA(),y.TgZ(6,"button",14),y.NdJ("click",(function(){y.CHM(e);const t=y.oxw();return y.KtG(t.toggleShowSettings())})),y._UZ(7,"system-button-icon",15),y.qZA(),y.TgZ(8,"button",16),y.NdJ("click",(function(){y.CHM(e);const t=y.oxw();return y.KtG(t.closePopover())})),y._UZ(9,"system-button-icon",17),y.qZA()(),y.YNc(10,Ki,11,4,"div",18),y.YNc(11,en,5,3,"ng-template",null,19,y.W1O),y.qZA()}if(2&e){const e=y.MAs(12),t=y.oxw();y.Q6J("ngStyle",t.popoverStyle),y.xp6(5),y.Q6J("ngIf",t.notificationService.unreadNotifications.length>0),y.xp6(2),y.Q6J("addclasses",t.showSettings?"slds-text-color--error":""),y.xp6(3),y.Q6J("ngIf",!t.showSettings)("ngIfElse",e)}}function sn(e,t){if(1&e&&y._UZ(0,"global-header-notifications-item-assign",56),2&e){const e=y.oxw().$implicit;y.Q6J("asBox",!0)("notification",e)}}function nn(e,t){if(1&e&&y._UZ(0,"global-header-notifications-item-change",56),2&e){const e=y.oxw().$implicit;y.Q6J("asBox",!0)("notification",e)}}function ln(e,t){if(1&e&&y._UZ(0,"global-header-notifications-item-delete",56),2&e){const e=y.oxw().$implicit;y.Q6J("asBox",!0)("notification",e)}}function on(e,t){if(1&e&&y._UZ(0,"global-header-notifications-item-reminder",56),2&e){const e=y.oxw().$implicit;y.Q6J("asBox",!0)("notification",e)}}function an(e,t){if(1&e&&y._UZ(0,"global-header-notifications-item-generic",56),2&e){const e=y.oxw().$implicit;y.Q6J("asBox",!0)("notification",e)}}function dn(e,t){if(1&e&&(y.ynx(0,53),y.YNc(1,sn,1,2,"global-header-notifications-item-assign",54),y.YNc(2,nn,1,2,"global-header-notifications-item-change",54),y.YNc(3,ln,1,2,"global-header-notifications-item-delete",54),y.YNc(4,on,1,2,"global-header-notifications-item-reminder",54),y.YNc(5,an,1,2,"global-header-notifications-item-generic",55),y.BQk()),2&e){const e=t.$implicit;y.Q6J("ngSwitch",e.notification_type),y.xp6(1),y.Q6J("ngSwitchCase","assign"),y.xp6(1),y.Q6J("ngSwitchCase","change"),y.xp6(1),y.Q6J("ngSwitchCase","delete"),y.xp6(1),y.Q6J("ngSwitchCase","reminder")}}const rn=function(e){return{"slds-p-right--x-small":e}};let cn=(()=>{class GlobalHeaderNotifications{notificationService;elementRef;modal;subscription;userPreferences;cdRef;router;renderer;isOpen=!1;showSettings=!1;clickListener;right=0;constructor(e,t,s,i,n,l,o,a){this.notificationService=e,this.elementRef=t,this.modal=s,this.subscription=i,this.userPreferences=n,this.cdRef=l,this.router=o,this.renderer=a}ngOnInit(){this.notificationService.reloadNotifications()}get desktopNotificationsDisabled(){return!("Notification"in window)}get desktopNotificationsStatus(){return Notification.permission}markAsRead(e){this.notificationService.markAsRead(e)}markAllAsRead(){this.notificationService.markAllAsRead()}toggleOpenPopover(){let e=this.elementRef.nativeElement.getBoundingClientRect();this.right=window.innerWidth-e.right+(e.left-e.right)/2-3,this.isOpen=!this.isOpen,this.isOpen?(this.showSettings=!1,this.clickListener=this.renderer.listen("document","click",(e=>{this.elementRef.nativeElement.contains(e.target)||(this.isOpen=!1,this.clickListener())}))):this.clickListener&&this.clickListener()}get popoverStyle(){return{right:this.right+"px"}}closePopover(){this.isOpen=!1,this.clickListener&&this.clickListener()}toggleShowSettings(){this.showSettings=!this.showSettings}setSetting(e,t){this.userPreferences.setPreference(e,t)}setDisplayDesktopNotification(e){"default"===this.desktopNotificationsStatus?Notification.requestPermission().then((t=>{"granted"==t&&this.setSetting("displayDesktopNotifications",e),this.cdRef.detectChanges()})):this.setSetting("displayDesktopNotifications",e)}showAllNotifications(){this.closePopover(),this.router.navigate(["notifications"])}get hasSubscriptions(){return this.subscription.subscriptions.length>0}manageSubscriptions(){this.closePopover(),this.modal.openModal("GlobalSubscriptionsManager")}static ɵfac=function(e){return new(e||GlobalHeaderNotifications)(y.Y36(hi.t),y.Y36(y.SBq),y.Y36(E.o),y.Y36(Yi.J),y.Y36(Mt.z),y.Y36(y.sBO),y.Y36(q.F0),y.Y36(y.Qsj))};static ɵcmp=y.Xpm({type:GlobalHeaderNotifications,selectors:[["global-header-notifications"]],decls:7,vars:8,consts:[[1,"slds-dropdown-trigger","slds-dropdown-trigger_click","slds-m-right--xx-small",3,"ngClass"],["system-title","LBL_NOTIFICATIONS",1,"slds-global-actions__notifications","slds-global-actions__item-action","slds-incoming-notification",3,"click"],["icon","notification","size","x-small"],["style","top:-5px; right:0px;","class","slds-notification-badge slds-incoming-notification slds-show-notification",4,"ngIf"],["class","slds-popover slds-popover_large slds-nubbin_top-right slds-is-absolute slds-grid slds-grid--vertical","role","dialog","style","top: 48px; max-height: calc(100vh - 55px);",3,"ngStyle",4,"ngIf"],[1,"slds-notification-container"],[3,"ngSwitch",4,"ngFor","ngForOf"],[1,"slds-notification-badge","slds-incoming-notification","slds-show-notification",2,"top","-5px","right","0px"],["role","dialog",1,"slds-popover","slds-popover_large","slds-nubbin_top-right","slds-is-absolute","slds-grid","slds-grid--vertical",2,"top","48px","max-height","calc(100vh - 55px)",3,"ngStyle"],[1,"slds-grid","slds-border--bottom"],[1,"slds-popover__header","slds-grow","slds-grid","slds-grid--align-spread",2,"border-bottom","0"],[1,"slds-text-heading_small"],["label","LBL_UNREAD_NOTIFICATIONS"],["class","slds-text-link",3,"click",4,"ngIf"],["system-title","LBL_SETTINGS",1,"slds-button","slds-button--icon","slds-float_right","slds-popover__close",3,"click"],["icon","settings",3,"addclasses"],["system-title","LBL_CLOSE",1,"slds-button","slds-button--icon","slds-float_right","slds-m-right--x-small",3,"click"],["icon","close"],["class","slds-popover__body slds-p-around_none slds-grow slds-grid slds-grid--vertical","style","min-height: 0",4,"ngIf","ngIfElse"],["showSettingsContainer",""],[1,"slds-text-link",3,"click"],["label","LBL_MARK_ALL_READ"],[1,"slds-popover__body","slds-p-around_none","slds-grow","slds-grid","slds-grid--vertical",2,"min-height","0"],["class","slds-p-around--small",4,"ngIf"],[1,"slds-scrollable--y","slds-grow",2,"min-height","0"],[4,"ngFor","ngForOf"],["class","slds-align--absolute-center slds-p-around--small",4,"ngIf"],[1,"slds-has-divider--top","slds-p-around--x-small","slds-size--1-of-1","slds-align--absolute-center"],[1,"slds-list_horizontal","slds-has-dividers_right","slds-has-block-links"],[1,"slds-item"],["label","LBL_SHOW_ALL"],["class","slds-item",4,"ngIf"],[1,"slds-p-around--small"],["label","LBL_NO_ENTRIES"],["class","slds-global-header__notification spice-hover-display-children slds-is-relative",3,"ngSwitch",4,"ngIf"],[1,"slds-global-header__notification","spice-hover-display-children","slds-is-relative",3,"ngSwitch"],[3,"notification",4,"ngSwitchCase"],[3,"notification",4,"ngSwitchDefault"],[1,"slds-is-absolute","slds-height_full","spice-hover-child","slds-grid","slds-grid--vertical-align-center","slds-p-right--x-small",2,"right","0","top","0",3,"click"],["system-title","LBL_MARK_AS_READ",1,"slds-theme--default","slds-button","slds-button_icon","slds-button_icon-small","slds-float_right","slds-popover__close","slds-button--icon-border"],["icon","check","size","small"],[3,"notification"],[1,"slds-align--absolute-center","slds-p-around--small"],["label","LBL_MANAGE_MODEL_SUBSCRIPTIONS"],["label","LBL_REALTIME_NOTIFICATIONS",1,"slds-m-bottom--xx-small","spice-display-block",3,"ngModel","ngModelChange"],["label","LBL_DESKTOP_NOTIFICATIONS","class","slds-m-bottom--xx-small spice-display-block",3,"ngModel","ngModelChange",4,"ngIf","ngIfElse"],["desktopNotificationDeniedContainer",""],["label","LBL_DESKTOP_NOTIFICATIONS",1,"slds-m-bottom--xx-small","spice-display-block",3,"ngModel","ngModelChange"],[1,"slds-grid","slds-grid--align-spread"],[1,"slds-grow","slds-text-body--small"],["label","LBL_DESKTOP_NOTIFICATIONS"],[1,"slds-text-color_error"],["label","LBL_DENIED"],[3,"ngSwitch"],[3,"asBox","notification",4,"ngSwitchCase"],[3,"asBox","notification",4,"ngSwitchDefault"],[3,"asBox","notification"]],template:function(e,t){1&e&&(y.TgZ(0,"div",0)(1,"div",1),y.NdJ("click",(function(){return t.toggleOpenPopover()})),y._UZ(2,"system-utility-icon",2),y.qZA(),y.YNc(3,Ui,2,1,"div",3),y.qZA(),y.YNc(4,tn,13,5,"section",4),y.TgZ(5,"div",5),y.YNc(6,dn,6,5,"ng-container",6),y.qZA()),2&e&&(y.Q6J("ngClass",y.VKq(6,rn,t.notificationService.unreadCount>0)),y.xp6(3),y.Q6J("ngIf",t.notificationService.unreadCount>0),y.xp6(1),y.Q6J("ngIf",t.isOpen),y.xp6(1),y.ekj("slds-hidden",0===t.notificationService.newNotifications.length),y.xp6(1),y.Q6J("ngForOf",t.notificationService.newNotifications))},dependencies:[i.mk,i.sg,i.O5,i.PC,i.RF,i.n9,i.ED,n.JJ,n.On,T.S,Y.J,Di.v,C._,K.W,k.r,vi,Ei,Ti,Ii,Ni],encapsulation:2})}return GlobalHeaderNotifications})();var un=s(95681),mn=s(73194);function gn(e,t){if(1&e){const e=y.EpF();y.TgZ(0,"system-checkbox-toggle",39),y.NdJ("ngModelChange",(function(t){y.CHM(e);const s=y.oxw();return y.KtG(s.setDisplayDesktopNotification(t))})),y.qZA()}if(2&e){const e=y.oxw();y.Q6J("ngModel",e.userPreferences.toUse.displayDesktopNotifications)}}function hn(e,t){1&e&&(y.TgZ(0,"div",40)(1,"span",41),y._UZ(2,"system-label",42),y.qZA(),y.TgZ(3,"span",43),y._UZ(4,"system-label",44),y.qZA()())}function pn(e,t){1&e&&(y.TgZ(0,"div",20),y._UZ(1,"system-label",45),y.qZA())}function fn(e,t){1&e&&y._UZ(0,"system-icon",68)}function bn(e,t){1&e&&y._UZ(0,"system-icon",69)}function _n(e,t){1&e&&y._UZ(0,"system-icon",70)}function vn(e,t){1&e&&y._UZ(0,"system-icon",71)}function yn(e,t){1&e&&y._UZ(0,"system-icon",72)}function xn(e,t){1&e&&y._UZ(0,"system-label",73)}function wn(e,t){1&e&&y._UZ(0,"system-label",74)}function Zn(e,t){1&e&&y._UZ(0,"system-label",75)}function Tn(e,t){1&e&&y._UZ(0,"system-label",76)}function Cn(e,t){1&e&&y._UZ(0,"system-label",77)}function kn(e,t){if(1&e){const e=y.EpF();y.TgZ(0,"tr",46)(1,"td",47)(2,"div",48),y.YNc(3,fn,1,0,"system-icon",49),y.YNc(4,bn,1,0,"system-icon",50),y.YNc(5,_n,1,0,"system-icon",51),y.YNc(6,vn,1,0,"system-icon",52),y.YNc(7,yn,1,0,"system-icon",53),y.qZA()(),y.TgZ(8,"td")(9,"div",54),y.YNc(10,xn,1,0,"system-label",55),y.YNc(11,wn,1,0,"system-label",56),y.YNc(12,Zn,1,0,"system-label",57),y.YNc(13,Tn,1,0,"system-label",58),y.YNc(14,Cn,1,0,"system-label",59),y.qZA()(),y.TgZ(15,"td",60)(16,"div",61),y._UZ(17,"system-label-modulename",62),y.qZA()(),y.TgZ(18,"td",60)(19,"div",61),y._uU(20),y.qZA()(),y.TgZ(21,"td",63)(22,"div",61),y._uU(23),y.qZA()(),y.TgZ(24,"td",64)(25,"div",61),y._uU(26),y.qZA()(),y.TgZ(27,"td",65)(28,"button",66),y.NdJ("click",(function(){const t=y.CHM(e).$implicit,s=y.oxw();return y.KtG(s.markAsRead(t.id))})),y._UZ(29,"system-button-icon",67),y.qZA()()()}if(2&e){const e=t.$implicit;y.ekj("slds-text-title_bold",1!=e.notification_read),y.xp6(2),y.Q6J("ngSwitch",e.notification_type),y.xp6(1),y.Q6J("ngSwitchCase","assign"),y.xp6(1),y.Q6J("ngSwitchCase","change"),y.xp6(1),y.Q6J("ngSwitchCase","delete"),y.xp6(1),y.Q6J("ngSwitchCase","reminder"),y.xp6(3),y.Q6J("ngSwitch",e.notification_type),y.xp6(1),y.Q6J("ngSwitchCase","assign"),y.xp6(1),y.Q6J("ngSwitchCase","change"),y.xp6(1),y.Q6J("ngSwitchCase","delete"),y.xp6(1),y.Q6J("ngSwitchCase","reminder"),y.xp6(2),y.Q6J("id",e.bean_id)("module",e.bean_module)("system-title",e.bean_module),y.xp6(2),y.Q6J("module",e.bean_module),y.xp6(1),y.Q6J("id",e.bean_id)("module",e.bean_module)("system-title",e.bean_name),y.xp6(2),y.hij(" ",e.bean_name," "),y.xp6(1),y.Q6J("id",e.created_by_name)("system-title",e.created_by_name),y.xp6(2),y.hij(" ",e.created_by_name," "),y.xp6(1),y.Q6J("system-title",e.notification_date),y.xp6(2),y.hij(" ",e.notification_date," "),y.xp6(2),y.Q6J("disabled",1==e.notification_read)}}function An(e,t){1&e&&(y.TgZ(0,"div",78),y._UZ(1,"system-spinner"),y.qZA())}let Ln=(()=>{class GlobalNotificationsListView{notificationService;navigationTab;language;cdRef;userPreferences;constructor(e,t,s,i,n){this.notificationService=e,this.navigationTab=t,this.language=s,this.cdRef=i,this.userPreferences=n,this.setTabInfo()}get desktopNotificationsDisabled(){return!("Notification"in window)}get desktopNotificationsStatus(){return Notification.permission}setTabInfo(){this.navigationTab.setTabInfo({displayname:this.language.getLabel("LBL_NOTIFICATIONS"),displayicon:"notification"})}reload(){this.notificationService.reloadNotifications()}markAsRead(e){this.notificationService.markAsRead(e)}markAllAsRead(){this.notificationService.markAllAsRead()}onScroll(e){e.scrollTop+e.clientHeight+50>e.scrollHeight&&this.notificationService.loadMoreNotifications()}setSetting(e,t){this.userPreferences.setPreference(e,t)}setDisplayDesktopNotification(e){"default"===this.desktopNotificationsStatus?Notification.requestPermission().then((t=>{"granted"==t&&this.setSetting("displayDesktopNotifications",e),this.cdRef.detectChanges()})):this.setSetting("displayDesktopNotifications",e)}static ɵfac=function(e){return new(e||GlobalNotificationsListView)(y.Y36(hi.t),y.Y36(ds.d),y.Y36(Z.d),y.Y36(y.sBO),y.Y36(Mt.z))};static ɵcmp=y.Xpm({type:GlobalNotificationsListView,selectors:[["global-notifications-list-view"]],decls:54,vars:8,consts:[["system-to-bottom-noscroll","",1,"slds-grid","slds-grid--vertical"],[1,"slds-grid","slds-border--bottom","slds-p-around--medium"],[1,"slds-grow","slds-grid","slds-grid--align-spread",2,"border-bottom","0"],[1,"slds-page-header__title"],["icon","notification","size","x-small"],["label","LBL_NOTIFICATIONS"],[1,"slds-text-body--small","slds-m-left--large"],["label","LBL_OF"],["label","LBL_ITEMS"],[1,"slds-grid","slds-grid--vertical-align-center"],[1,"slds-text-link",3,"click"],["label","LBL_MARK_ALL_READ"],["system-title","LBL_RELOAD",1,"slds-button","slds-button--icon","slds-m-left--xx-small","slds-button--icon-border-filled",3,"click"],["icon","refresh"],["system-dropdown-trigger","","role","combobox",1,"slds-dropdown-trigger","slds-dropdown-trigger_click"],["system-title","LBL_SETTINGS",1,"slds-button","slds-button--icon","slds-m-left--xx-small","slds-button--icon-border-filled"],["icon","settings"],[1,"slds-dropdown","slds-dropdown_x-small","slds-dropdown_left",3,"click"],[1,"slds-has-divider--bottom-space","slds-p-horizontal--small","slds-p-top--xx-small","slds-text-title--caps"],["label","LBL_SETTINGS"],[1,"slds-p-around--small"],["label","LBL_REALTIME_NOTIFICATIONS",1,"slds-m-bottom--xx-small","spice-display-block",3,"ngModel","ngModelChange"],["label","LBL_DESKTOP_NOTIFICATIONS","class","slds-m-bottom--xx-small spice-display-block",3,"ngModel","ngModelChange",4,"ngIf","ngIfElse"],["desktopNotificationDeniedContainer",""],[1,"slds-scrollable--y","slds-theme--default","slds-height_full",3,"scroll"],["scrollContainer",""],["class","slds-p-around--small",4,"ngIf"],[1,"slds-table","slds-table_bordered","slds-max-medium-table_stacked-horizontal","slds-table--header-fixed"],[1,"slds-text-title--caps"],["scope","col",1,"slds-cell-shrink"],["scope","col"],[1,"slds-truncate","slds-p-around--x-small"],["label","LBL_TYPE"],["label","LBL_MODULE"],["label","LBL_RECORD"],["label","LBL_CREATED_BY"],["label","LBL_DATE"],["class","spice-hover-display-children",3,"slds-text-title_bold",4,"ngFor","ngForOf"],["class","slds-align--absolute-center slds-p-around--small slds-height_full",4,"ngIf"],["label","LBL_DESKTOP_NOTIFICATIONS",1,"slds-m-bottom--xx-small","spice-display-block",3,"ngModel","ngModelChange"],[1,"slds-grid","slds-grid--align-spread"],[1,"slds-grow","slds-text-body--small"],["label","LBL_DESKTOP_NOTIFICATIONS"],[1,"slds-text-color_error"],["label","LBL_DENIED"],["label","LBL_NO_ENTRIES"],[1,"spice-hover-display-children"],[1,"slds-cell-shrink"],[3,"ngSwitch"],["icon","individual",4,"ngSwitchCase"],["icon","custom18","sprite","custom",4,"ngSwitchCase"],["icon","record_delete",4,"ngSwitchCase"],["icon","custom25","sprite","custom",4,"ngSwitchCase"],["icon","all",4,"ngSwitchDefault"],[1,"slds-truncate",3,"ngSwitch"],["label","LBL_ASSIGNMENT",4,"ngSwitchCase"],["label","LBL_CHANGE",4,"ngSwitchCase"],["label","LBL_DELETION",4,"ngSwitchCase"],["label","LBL_REMINDER",4,"ngSwitchCase"],["label","LBL_NOT_SET",4,"ngSwitchDefault"],["system-model-popover","",3,"id","module","system-title"],[1,"slds-truncate"],[3,"module"],["system-model-popover","","module","Users",3,"id","system-title"],[3,"system-title"],["system-title","LBL_MARK_AS_READ",1,"slds-cell-shrink"],[1,"slds-button","slds-button_icon","slds-button--icon-border","spice-hover-child",3,"disabled","click"],["icon","check","size","small"],["icon","individual"],["icon","custom18","sprite","custom"],["icon","record_delete"],["icon","custom25","sprite","custom"],["icon","all"],["label","LBL_ASSIGNMENT"],["label","LBL_CHANGE"],["label","LBL_DELETION"],["label","LBL_REMINDER"],["label","LBL_NOT_SET"],[1,"slds-align--absolute-center","slds-p-around--small","slds-height_full"]],template:function(e,t){if(1&e){const e=y.EpF();y.TgZ(0,"div",0)(1,"div",1)(2,"header",2)(3,"div")(4,"h2",3),y._UZ(5,"system-utility-icon",4)(6,"system-label",5),y.qZA(),y.TgZ(7,"p",6),y._uU(8),y._UZ(9,"system-label",7),y._uU(10),y._UZ(11,"system-label",8),y.qZA()(),y.TgZ(12,"div",9)(13,"a",10),y.NdJ("click",(function(){return t.markAllAsRead()})),y._UZ(14,"system-label",11),y.qZA(),y.TgZ(15,"button",12),y.NdJ("click",(function(){return t.reload()})),y._UZ(16,"system-button-icon",13),y.qZA(),y.TgZ(17,"div",14)(18,"button",15),y._UZ(19,"system-button-icon",16),y.qZA(),y.TgZ(20,"div",17),y.NdJ("click",(function(e){return e.stopPropagation()})),y.TgZ(21,"div",18),y._UZ(22,"system-label",19),y.qZA(),y.TgZ(23,"div",20)(24,"system-checkbox-toggle",21),y.NdJ("ngModelChange",(function(e){return t.setSetting("showRealtimeNotifications",e)})),y.qZA(),y.YNc(25,gn,1,1,"system-checkbox-toggle",22),y.YNc(26,hn,5,0,"ng-template",null,23,y.W1O),y.qZA()()()()()(),y.TgZ(28,"div",24,25),y.NdJ("scroll",(function(){y.CHM(e);const s=y.MAs(29);return y.KtG(t.onScroll(s))})),y.YNc(30,pn,2,0,"div",26),y.TgZ(31,"table",27)(32,"thead")(33,"tr",28),y._UZ(34,"th",29),y.TgZ(35,"th",30)(36,"div",31),y._UZ(37,"system-label",32),y.qZA()(),y.TgZ(38,"th",30)(39,"div",31),y._UZ(40,"system-label",33),y.qZA()(),y.TgZ(41,"th",30)(42,"div",31),y._UZ(43,"system-label",34),y.qZA()(),y.TgZ(44,"th",30)(45,"div",31),y._UZ(46,"system-label",35),y.qZA()(),y.TgZ(47,"th",30)(48,"div",31),y._UZ(49,"system-label",36),y.qZA()(),y._UZ(50,"th",29),y.qZA()(),y.TgZ(51,"tbody"),y.YNc(52,kn,30,26,"tr",37),y.qZA()(),y.YNc(53,An,2,0,"div",38),y.qZA()()}if(2&e){const e=y.MAs(27);y.xp6(8),y.hij(" ",t.notificationService.notifications.length," "),y.xp6(2),y.hij(" ",t.notificationService.totalCount," "),y.xp6(14),y.Q6J("ngModel",t.userPreferences.toUse.showRealtimeNotifications),y.xp6(1),y.Q6J("ngIf","denied"!==t.desktopNotificationsStatus&&!t.desktopNotificationsDisabled)("ngIfElse",e),y.xp6(5),y.Q6J("ngIf",0===(null==t.notificationService.notifications?null:t.notificationService.notifications.length)&&!t.notificationService.isLoading),y.xp6(22),y.Q6J("ngForOf",t.notificationService.notifications),y.xp6(1),y.Q6J("ngIf",t.notificationService.isLoading)}},dependencies:[i.sg,i.O5,i.RF,i.n9,i.ED,n.JJ,n.On,rs.g,un.l,mn.t,T.S,Y.J,Di.v,J.f,C._,Be.M,K.W,k.r],encapsulation:2})}return GlobalNotificationsListView})();function In(e,t){if(1&e&&(y.TgZ(0,"div",1)(1,"div"),y._uU(2),y.qZA(),y.TgZ(3,"div",2)(4,"div",3),y._uU(5),y.qZA(),y.TgZ(6,"div",3),y._uU(7),y.qZA(),y.TgZ(8,"div",3),y._uU(9),y.qZA(),y.TgZ(10,"div"),y._uU(11),y.qZA()()()),2&e){const e=y.oxw();y.xp6(2),y.Oqu(e.event),y.xp6(3),y.hij("",e.timeleft.daysToDday,"d"),y.xp6(2),y.hij("",e.timeleft.hoursToDday,"h"),y.xp6(2),y.hij("",e.timeleft.minutesToDday,"m"),y.xp6(2),y.hij("",e.timeleft.secondsToDday,"s")}}let Sn=(()=>{class GlobalCountdown{zone;cdref;timer;timeleft;event;visible=!1;targetdate;constructor(e,t){this.zone=e,this.cdref=t}ngOnInit(){let e=new moment(this.targetdate);this.visible=moment().isBefore(e),this.visible&&this.zone.runOutsideAngular((()=>{this.timer=setInterval((()=>{this.update()}),1e3)}))}update(){this.timeleft=this.calcDateDiff(),this.cdref.detectChanges()}calcDateDiff(){let e=new moment(this.targetdate),t=moment.duration(e.diff(new moment));return{secondsToDday:t.get("seconds").toString().padStart(2,"0"),minutesToDday:t.get("minutes").toString().padStart(2,"0"),hoursToDday:t.get("hours").toString().padStart(2,"0"),daysToDday:Math.floor(t.as("days")).toString()}}static ɵfac=function(e){return new(e||GlobalCountdown)(y.Y36(y.R0b),y.Y36(y.sBO))};static ɵcmp=y.Xpm({type:GlobalCountdown,selectors:[["global-countdown"]],inputs:{event:"event",targetdate:"targetdate"},decls:1,vars:1,consts:[["class","slds-grid--vertical slds-text-body--small slds-p-horizontal--small slds-m-left--small slds-border--left",4,"ngIf"],[1,"slds-grid--vertical","slds-text-body--small","slds-p-horizontal--small","slds-m-left--small","slds-border--left"],[1,"slds-grid"],[1,"slds-p-right--xxx-small"]],template:function(e,t){1&e&&y.YNc(0,In,12,5,"div",0),2&e&&y.Q6J("ngIf",t.timeleft&&t.visible)},dependencies:[i.O5],encapsulation:2,changeDetection:0})}return GlobalCountdown})();var Mn=s(72057);function Jn(e,t){1&e&&(y.TgZ(0,"div",17),y._UZ(1,"system-label",18),y.qZA())}const On=function(e,t,s){return{module:e,id:t,data:s}};function Nn(e,t){if(1&e){const e=y.EpF();y.TgZ(0,"li",19)(1,"div",20),y._UZ(2,"system-icon",21),y.TgZ(3,"div",22),y.NdJ("clicked",(function(){y.CHM(e);const t=y.oxw(3);return y.KtG(t.closePopover())})),y._uU(4),y.qZA(),y._UZ(5,"system-display-datetime",23),y.TgZ(6,"button",24),y.NdJ("click",(function(){const t=y.CHM(e).$implicit,s=y.oxw(3);return y.KtG(s.deleteReminder(t))})),y._UZ(7,"system-button-icon",25),y.qZA()()()}if(2&e){const e=t.$implicit;y.xp6(1),y.Q6J("system-model-provider",y.kEZ(5,On,e.module_name,e.item_id,e.data)),y.xp6(1),y.Q6J("module",e.module_name),y.xp6(2),y.Oqu(e.data.summary_text),y.xp6(1),y.Q6J("date",e.reminder_date)("displayTime",!1)}}function Fn(e,t){if(1&e){const e=y.EpF();y.TgZ(0,"section",6)(1,"div",7)(2,"header",8)(3,"h2",9),y._UZ(4,"system-label",10),y.qZA()(),y.TgZ(5,"button",11),y.NdJ("click",(function(){y.CHM(e);const t=y.oxw(2);return y.KtG(t.closePopover())})),y._UZ(6,"system-button-icon",12),y.qZA()(),y.TgZ(7,"div",13),y.YNc(8,Jn,2,0,"div",14),y.TgZ(9,"ul",15),y.YNc(10,Nn,8,9,"li",16),y.qZA()()()}if(2&e){const e=y.oxw(2);y.Q6J("ngStyle",e.popoverStyle),y.xp6(8),y.Q6J("ngIf",0===e.currentReminders.length),y.xp6(2),y.Q6J("ngForOf",e.currentReminders)}}function qn(e,t){if(1&e){const e=y.EpF();y.TgZ(0,"div")(1,"div",1)(2,"div",2),y.NdJ("click",(function(){y.CHM(e);const t=y.oxw();return y.KtG(t.toggleOpenPopover())})),y._UZ(3,"system-utility-icon",3),y.qZA(),y.TgZ(4,"div",4),y._uU(5),y.qZA()(),y.YNc(6,Fn,11,3,"section",5),y.qZA()}if(2&e){const e=y.oxw();y.xp6(5),y.hij(" ",e.currentReminders.length," "),y.xp6(1),y.Q6J("ngIf",e.isOpen)}}let En=(()=>{class GlobalHeaderReminders{reminder;elementRef;userPreferences;cdRef;router;renderer;isOpen=!1;clickListener;right=0;constructor(e,t,s,i,n,l){this.reminder=e,this.elementRef=t,this.userPreferences=s,this.cdRef=i,this.router=n,this.renderer=l}get currentReminders(){return this.reminder.reminders?this.reminder.reminders.filter((e=>moment(e.reminder_date).isSameOrBefore(new moment,"day"))).sort(((e,t)=>moment(e.reminder_date).isBefore(moment(t.reminder_date))?-1:1)):[]}toggleOpenPopover(){let e=this.elementRef.nativeElement.getBoundingClientRect();this.right=window.innerWidth-e.right+(e.left-e.right)/2+10,this.isOpen=!this.isOpen,this.isOpen?this.clickListener=this.renderer.listen("window","click",(e=>{this.elementRef.nativeElement.contains(e.target)||(this.isOpen=!1,this.clickListener())})):this.clickListener&&this.clickListener()}deleteReminder(e){this.reminder.deleteReminder(e.module_name,e.item_id)}get popoverStyle(){return{right:this.right+"px"}}closePopover(){this.isOpen=!1,this.clickListener&&this.clickListener()}static ɵfac=function(e){return new(e||GlobalHeaderReminders)(y.Y36(Mn.U),y.Y36(y.SBq),y.Y36(Mt.z),y.Y36(y.sBO),y.Y36(q.F0),y.Y36(y.Qsj))};static ɵcmp=y.Xpm({type:GlobalHeaderReminders,selectors:[["global-header-reminders"]],decls:1,vars:1,consts:[[4,"ngIf"],[1,"slds-dropdown-trigger","slds-dropdown-trigger_click","slds-m-right--xx-small","slds-p-right--x-small"],["system-title","LBL_NOTIFICATIONS",1,"slds-global-actions__notifications","slds-global-actions__item-action","slds-incoming-notification",3,"click"],["icon","reminder","size","x-small"],[1,"slds-notification-badge","slds-incoming-notification","slds-show-notification",2,"top","-5px","right","0px"],["class","slds-popover slds-popover_large slds-nubbin_top-right slds-is-absolute slds-grid slds-grid--vertical","role","dialog","style","top: 48px; max-height: calc(100vh - 55px);",3,"ngStyle",4,"ngIf"],["role","dialog",1,"slds-popover","slds-popover_large","slds-nubbin_top-right","slds-is-absolute","slds-grid","slds-grid--vertical",2,"top","48px","max-height","calc(100vh - 55px)",3,"ngStyle"],[1,"slds-grid","slds-border--bottom"],[1,"slds-popover__header","slds-grow","slds-grid","slds-grid--align-spread",2,"border-bottom","0"],[1,"slds-text-heading_small"],["label","LBL_CURRENT_REMINDERS"],["system-title","LBL_CLOSE",1,"slds-button","slds-button--icon","slds-float_right","slds-m-right--x-small",3,"click"],["icon","close"],[1,"slds-popover__body","slds-p-around_none","slds-grow","slds-grid","slds-grid--vertical",2,"min-height","0"],["class","slds-p-around--small",4,"ngIf"],[1,"slds-scrollable--y","slds-grow",2,"min-height","0"],["class","slds-global-header__notification spice-hover-display-children slds-is-relative",4,"ngFor","ngForOf"],[1,"slds-p-around--small"],["label","LBL_NO_ENTRIES"],[1,"slds-global-header__notification","spice-hover-display-children","slds-is-relative"],[1,"slds-grid","slds-p-around--xx-small","slds-grid--vertical-align-center",3,"system-model-provider"],["size","xx-small",3,"module"],["system-model-popover","",1,"slds-grow","slds-p-right--xx-small",3,"clicked"],[3,"date","displayTime"],[1,"slds-m-left--x-small","slds-button","slds-button--icon",3,"click"],["icon","clear"]],template:function(e,t){1&e&&y.YNc(0,qn,7,2,"div",0),2&e&&y.Q6J("ngIf",t.currentReminders.length>0)},dependencies:[i.sg,i.O5,i.PC,rs.g,je.u,T.S,Y.J,Fi.a,J.f,C._,k.r],encapsulation:2})}return GlobalHeaderReminders})();const Yn=function(e,t,s){return{module:e,id:t,data:s}};function Dn(e,t){if(1&e){const e=y.EpF();y.TgZ(0,"div",7),y._UZ(1,"system-icon",8),y.TgZ(2,"div",9),y.NdJ("clicked",(function(){y.CHM(e);const t=y.oxw();return y.KtG(t.close())})),y._uU(3),y.qZA(),y.TgZ(4,"button",10),y.NdJ("click",(function(){const t=y.CHM(e).$implicit,s=y.oxw();return y.KtG(s.deleteSubscription(t))})),y._UZ(5,"system-button-icon",11),y.qZA()()}if(2&e){const e=t.$implicit;y.Q6J("system-model-provider",y.kEZ(3,Yn,e.bean_module,e.bean_id,e.data)),y.xp6(1),y.Q6J("module",e.bean_module),y.xp6(2),y.Oqu(e.data.summary_text)}}let Un=(()=>{class GlobalSubscriptionsManager{subscriptions;self;loading=!1;constructor(e){this.subscriptions=e}deleteSubscription(e){this.loading=!0,this.subscriptions.unsubscribeBean(e.bean_id,e.bean_module).subscribe((()=>{this.loading=!1,0==this.subscriptions.subscriptions.length&&this.close()}),(()=>{this.loading=!1}))}close(){this.self.destroy()}static ɵfac=function(e){return new(e||GlobalSubscriptionsManager)(y.Y36(Yi.J))};static ɵcmp=y.Xpm({type:GlobalSubscriptionsManager,selectors:[["global-subscriptions-manager"]],decls:8,vars:2,consts:[["size","small"],[3,"close"],["label","LBL_MANAGE_MODEL_SUBSCRIPTIONS"],["system-modal-content-grow","","margin","none",3,"system-overlay-loading-spinner"],["class","slds-p-around--x-small slds-grid slds-grid--vertical-align-center slds-border--bottom",3,"system-model-provider",4,"ngFor","ngForOf"],[1,"slds-button","slds-button--brand"],["label","LBL_CLOSE"],[1,"slds-p-around--x-small","slds-grid","slds-grid--vertical-align-center","slds-border--bottom",3,"system-model-provider"],["size","xx-small",3,"module"],["system-model-popover","",1,"slds-grow",3,"clicked"],[1,"slds-button","slds-button--icon",3,"click"],["icon","clear"]],template:function(e,t){1&e&&(y.TgZ(0,"system-modal",0)(1,"system-modal-header",1),y.NdJ("close",(function(){return t.close()})),y._UZ(2,"system-label",2),y.qZA(),y.TgZ(3,"system-modal-content",3),y.YNc(4,Dn,6,7,"div",4),y.qZA(),y.TgZ(5,"system-modal-footer")(6,"button",5),y._UZ(7,"system-label",6),y.qZA()()()),2&e&&(y.xp6(3),y.Q6J("system-overlay-loading-spinner",t.loading),y.xp6(1),y.Q6J("ngForOf",t.subscriptions.subscriptions))},dependencies:[i.sg,rs.g,je.u,xe._,Y.J,J.f,C._,we.j,Ze.x,Je.p,Te.y],encapsulation:2})}return GlobalSubscriptionsManager})();var Qn=s(77579);let Rn=(()=>{class OAuth2Service{renderer;http;config;constructor(e,t){this.renderer=e,this.http=t}codeFlowLogin(){const e=new Qn.x;let t;const s=this.generateState(),i=this.generateLoginUrl(s),n=window.open(i,"SpiceCRM OAuth2 login",this.popupWindowRect());n?t=window.setInterval((()=>{n?.closed&&(o(),e.error("window closed"))}),500):e.error("window blocked");const l=this.renderer.listen("window","message",(t=>{if(o(),!t.data)return;const i=this.parseRedirectQueryString(t.data);i.error?e.error(i.error):i.state!==s?e.error("Invalid state"):i?(e.next(i.code),e.complete()):e.error("invalid redirect uri data")})),o=()=>{window.clearInterval(t),l(),n&&n.close()};return e.asObservable()}generateState(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";let t=new Uint8Array(40);window.crypto.getRandomValues(t),t=t.map((t=>e.charCodeAt(t%62)));const s=String.fromCharCode.apply(null,t);return btoa(s)}generateLoginUrl(e){const t=new URLSearchParams({state:e,response_type:"code",client_id:this.config.client_id,redirect_uri:this.config.redirect_uri,scope:this.config.scope});return`${this.config.login_url}?${t.toString()}`}popupWindowRect(){const e=window.screenLeft+(window.outerWidth-500)/2;return`width=500,height=600,top=${window.screenTop+(window.outerHeight-600)/2},left=${e}`}parseRedirectQueryString(e){const t=e.substring(1).split("&"),s={};return t.forEach((e=>{const t=e.split("=");s[t[0]]=decodeURIComponent(t[1])})),s}static ɵfac=function(e){return new(e||OAuth2Service)(y.LFG(y.Qsj),y.LFG(ae.eN))};static ɵprov=y.Yz7({token:OAuth2Service,factory:OAuth2Service.ɵfac})}return OAuth2Service})();function jn(e,t){if(1&e&&y._UZ(0,"img",2),2&e){const e=y.oxw();y.Q6J("src",e.service.icon,y.LSH)("alt",e.service.name)}}let Bn=(()=>{class GlobalLoginOAuth2Button{http;oauth2Service;configurationService;parent;toast;authenticatedUser;visible=!1;disabled=!0;constructor(e,t,s,i,n){this.http=e,this.oauth2Service=t,this.configurationService=s,this.parent=i,this.toast=n}_service;get service(){return this._service}set service(e){e&&(this._service=e,this.initialize(e.config))}initialize(e){if(!(e?.client_id&&e.login_url&&e.userinfo_endpoint&&e.token_endpoint))return this.disabled=!0;this.visible=!0,this.oauth2Service.config={client_id:e.client_id,scope:e.scope,token_endpoint:e.token_endpoint,userinfo_endpoint:e.userinfo_endpoint,login_url:e.login_url,redirect_uri:e.redirect_uri,client_secret:e.client_secret},this.disabled=!1}signIn(e){e.preventDefault(),e.stopPropagation();const t=this.configurationService.getBackendUrl()+"/authentication/oauth2/accessToken";this.oauth2Service.codeFlowLogin().subscribe((e=>{this.http.post(t,{issuer:this.service.issuer,code:e}).subscribe((e=>{this.authenticatedUser?this.authenticatedUser==e.profile.email?this.parent.token.emit({issuer:this.service.issuer,tokenObject:e.tokenObject}):this.toast.sendToast("Wrong username","warning","usernames do not match, please relogin with the proper user"):this.parent.token.emit({issuer:this.service.issuer,tokenObject:e.tokenObject})}))}))}static ɵfac=function(e){return new(e||GlobalLoginOAuth2Button)(y.Y36(ae.eN),y.Y36(Rn),y.Y36(V.C),y.Y36(Ce.Q,1),y.Y36($.A))};static ɵcmp=y.Xpm({type:GlobalLoginOAuth2Button,selectors:[["global-login-oauth2-button"]],inputs:{authenticatedUser:"authenticatedUser",service:"service"},features:[y._Bn([Rn])],decls:3,vars:2,consts:[[1,"slds-button","slds-button_neutral","slds-size--1-of-1","slds-m-bottom--xx-small",3,"click"],["class","slds-m-right--x-small","style","height: 16px; width: 16px",3,"src","alt",4,"ngIf"],[1,"slds-m-right--x-small",2,"height","16px","width","16px",3,"src","alt"]],template:function(e,t){1&e&&(y.TgZ(0,"button",0),y.NdJ("click",(function(e){return t.signIn(e)})),y.YNc(1,jn,1,2,"img",1),y._uU(2),y.qZA()),2&e&&(y.xp6(1),y.Q6J("ngIf",!!t.service.icon),y.xp6(1),y.hij(" ",t.service.name,"\n"))},dependencies:[i.O5],encapsulation:2})}return GlobalLoginOAuth2Button})();var Gn=s(80515);let Pn=(()=>{class GlobalHeaderReloadModal{static ɵfac=function(e){return new(e||GlobalHeaderReloadModal)};static ɵcmp=y.Xpm({type:GlobalHeaderReloadModal,selectors:[["global-header-reload-modal"]],decls:5,vars:0,consts:[["size","prompt"],["system-modal-header-noclose",""],["label","LBL_RELOAD_CONFIGURATION"]],template:function(e,t){1&e&&(y.TgZ(0,"system-modal",0)(1,"system-modal-header",1),y._UZ(2,"system-label",2),y.qZA(),y.TgZ(3,"system-modal-content"),y._UZ(4,"system-loader-progress"),y.qZA()())},dependencies:[C._,Gn.e,we.j,Ze.x,Te.y],encapsulation:2})}return GlobalHeaderReloadModal})();function Hn(e,t){if(1&e&&(y.TgZ(0,"div",4),y._uU(1),y.qZA()),2&e){const e=y.oxw();y.xp6(1),y.hij(" ",e.relatedRevisions.length," ")}}const zn=function(e){return{"slds-p-right--x-small":e}},Vn=function(e){return{"slds-hide":e}};let $n=(()=>{class GlobalHeaderDocumentRevisions{notificationService;elementRef;modal;viewContainerRef;model;subscription;cdRef;renderer;backend;session;injector;relatedRevisions=[];constructor(e,t,s,i,n,l,o,a,d,r,c){this.notificationService=e,this.elementRef=t,this.modal=s,this.viewContainerRef=i,this.model=n,this.subscription=l,this.cdRef=o,this.renderer=a,this.backend=d,this.session=r,this.injector=c}ngOnInit(){this.model.module="DocumentRevisions",this.model.initialize(),this.loadRelated()}loadRelated(){this.backend.getRequest(`module/documentrevisions/${this.session.authData.userId}/relateduserrevisions`).subscribe((e=>{this.relatedRevisions=e}))}openModal(){this.modal.openModal("GlobalHeaderDocumentRevisionsModal",!0,this.injector).subscribe((e=>{e.instance.relatedRevisions=this.relatedRevisions}))}get hasSubscriptions(){return this.subscription.subscriptions.length>0}static ɵfac=function(e){return new(e||GlobalHeaderDocumentRevisions)(y.Y36(hi.t),y.Y36(y.SBq),y.Y36(E.o),y.Y36(y.s_b),y.Y36(S.o),y.Y36(Yi.J),y.Y36(y.sBO),y.Y36(y.Qsj),y.Y36(fe.y),y.Y36(x.n),y.Y36(y.zs3))};static ɵcmp=y.Xpm({type:GlobalHeaderDocumentRevisions,selectors:[["global-header-document-revisions"]],features:[y._Bn([S.o])],decls:4,vars:7,consts:[[1,"slds-dropdown-trigger","slds-dropdown-trigger_click","slds-m-right--xx-small",3,"ngClass"],["system-title","LBL_NOTIFICATIONS",1,"slds-global-actions__notifications","slds-global-actions__item-action","slds-incoming-notification",3,"ngClass","click"],["icon","approval","size","x-small"],["style","top:-5px; right:0px;","class","slds-notification-badge slds-incoming-notification slds-show-notification",4,"ngIf"],[1,"slds-notification-badge","slds-incoming-notification","slds-show-notification",2,"top","-5px","right","0px"]],template:function(e,t){1&e&&(y.TgZ(0,"div",0)(1,"div",1),y.NdJ("click",(function(){return t.openModal()})),y._UZ(2,"system-utility-icon",2),y.qZA(),y.YNc(3,Hn,2,1,"div",3),y.qZA()),2&e&&(y.Q6J("ngClass",y.VKq(3,zn,t.notificationService.unreadCount>0)),y.xp6(1),y.Q6J("ngClass",y.VKq(5,Vn,0==t.relatedRevisions.length)),y.xp6(2),y.Q6J("ngIf",t.relatedRevisions.length>0))},dependencies:[i.mk,i.O5,T.S,k.r],encapsulation:2})}return GlobalHeaderDocumentRevisions})();var Kn=s(50323);function Xn(e,t){if(1&e){const e=y.EpF();y.TgZ(0,"div",8)(1,"a",9),y.NdJ("click",(function(){const t=y.CHM(e).$implicit,s=y.oxw();return y.KtG(s.process(t.id))})),y.TgZ(2,"div",10)(3,"div",11)(4,"h3",12),y._UZ(5,"system-label",13),y._uU(6,": "),y._UZ(7,"system-label",14),y.qZA(),y.TgZ(8,"p",15),y._UZ(9,"system-label",16),y._uU(10,": "),y._UZ(11,"system-label",14),y.qZA(),y.TgZ(12,"p",15),y._UZ(13,"system-label",17),y._uU(14,": "),y._UZ(15,"system-label",14),y.qZA(),y.TgZ(16,"p",15),y._UZ(17,"system-label",18),y._uU(18,": "),y._UZ(19,"system-label",14),y.qZA()()()(),y.TgZ(20,"a",19),y.NdJ("click",(function(){const t=y.CHM(e).$implicit,s=y.oxw();return y.KtG(s.acceptance(t.id))})),y._UZ(21,"system-utility-icon",20),y.qZA()()}if(2&e){const e=t.$implicit;y.xp6(7),y.Q6J("label",e.document_name),y.xp6(4),y.Q6J("label",e.name),y.xp6(4),y.Q6J("label",e.revision),y.xp6(4),y.Q6J("label",e.date_entered)}}let Wn=(()=>{class GlobalHeaderDocumentRevisionsModal{backend;metadata;model;modal;modelattachments;session;toast;self;fieldset="";relatedRevisions;componentconfig;constructor(e,t,s,i,n,l,o){this.backend=e,this.metadata=t,this.model=s,this.modal=i,this.modelattachments=n,this.session=l,this.toast=o,this.model.module="DocumentRevisions",this.model.initialize()}ngOnInit(){this.relatedRevisions;let e=this.metadata.getComponentConfig("GlobalHeaderDocumentRevisionsModal","DocumentRevisions");this.fieldset=e.fieldset}process(e){let t=new Qn.x,s=this.relatedRevisions.find((t=>t.id==e));return this.backend.getRequest(`common/spiceattachments/module/${this.model.module}/${s.id}/byfield/file`).subscribe((e=>{t.next(e.file);let i=e.file_mime_type.toLowerCase().split("/");switch(i[0].trim()){case"image":this.modal.openModal("SystemImagePreviewModal").subscribe((t=>{t.instance.imgname=e.file_name,t.instance.imgtype=e.file_mime_type.toLowerCase(),t.instance.imgsrc="data:"+e.file_mime_type.toLowerCase()+";base64,"+e}));break;case"text":case"audio":case"video":this.modal.openModal("SystemObjectPreviewModal").subscribe((t=>{t.instance.name=e.file_name,t.instance.type=e.file_mime_type.toLowerCase(),t.instance.data=atob(e.file)}));break;case"application":if("pdf"===i[1])this.modal.openModal("SystemObjectPreviewModal").subscribe((t=>{t.instance.name=e.file_name,t.instance.type=e.file_mime_type.toLowerCase(),t.instance.data=atob(e.file)}));else this.modelattachments.downloadAttachmentForField(this.model.module,s.id,"file");break;default:this.modelattachments.downloadAttachmentForField(this.model.module,s.id,"file")}t.complete()}),(e=>{t.error(e),t.complete()})),t}acceptance(e){this.relatedRevisions.splice(this.relatedRevisions.findIndex((t=>t.id===e)),1);let t={userid:this.session.authData.userId};this.backend.postRequest(`module/documentrevisions/${e}/revisionaccepted`,"",t),this.toast.sendToast("revision accepted")}closeModal(){this.self.destroy()}static ɵfac=function(e){return new(e||GlobalHeaderDocumentRevisionsModal)(y.Y36(fe.y),y.Y36(w.Pu),y.Y36(S.o),y.Y36(E.o),y.Y36(Kn.H),y.Y36(x.n),y.Y36($.A))};static ɵcmp=y.Xpm({type:GlobalHeaderDocumentRevisionsModal,selectors:[["global-header-document-revisions-modal"]],inputs:{relatedRevisions:"relatedRevisions"},features:[y._Bn([S.o,Kn.H])],decls:10,vars:2,consts:[[3,"close"],["label","LBL_UNAPPROVED_REVISIONS"],[1,"slds-scrollable_none",3,"system-modal-content-grow"],[1,"slds-scrollable--y"],[1,"slds-scrollable--y","slds-height_full"],["class","slds-cell slds-grid",4,"ngFor","ngForOf"],[1,"slds-button","slds-button--neutral",3,"click"],["label","LBL_CLOSE"],[1,"slds-cell","slds-grid"],["href","javascript:void(0);",1,"slds-box_link","slds-media","slds-size_11-of-12",3,"click"],[1,"slds-media__body"],[1,"slds-welcome-mat__tile-body"],[1,"slds-welcome-mat__tile-title"],["label","LBL_DOCUMENT_NAME"],[3,"label"],[1,"slds-welcome-mat__tile-description"],["label","LBL_REVISION_NAME"],["label","LBL_REVISION_NUMBER"],["label","LBL_DATE"],["href","javascript:void(0);",1,"slds-box_link","slds-media","slds-size_1-of-12",3,"click"],["icon","check","size","medium",1,"slds-align--absolute-center"]],template:function(e,t){1&e&&(y.TgZ(0,"system-modal")(1,"system-modal-header",0),y.NdJ("close",(function(){return t.closeModal()})),y._UZ(2,"system-label",1),y.qZA(),y.TgZ(3,"system-modal-content",2)(4,"div",3)(5,"div",4),y.YNc(6,Xn,22,4,"div",5),y.qZA()()(),y.TgZ(7,"system-modal-footer")(8,"button",6),y.NdJ("click",(function(){return t.closeModal()})),y._UZ(9,"system-label",7),y.qZA()()()),2&e&&(y.xp6(3),y.Q6J("system-modal-content-grow",!1),y.xp6(3),y.Q6J("ngForOf",t.relatedRevisions))},dependencies:[i.sg,C._,we.j,Ze.x,Je.p,Te.y,k.r],encapsulation:2})}return GlobalHeaderDocumentRevisionsModal})(),el=(()=>{class GlobalComponents{static ɵfac=function(e){return new(e||GlobalComponents)};static ɵmod=y.oAB({type:GlobalComponents});static ɵinj=y.cJS({imports:[i.ez,n.u5,o.ObjectFields,l.o,d.SystemComponents,a.ObjectComponents]})}return GlobalComponents})();("undefined"==typeof ngJitMode||ngJitMode)&&y.kYT(el,{declarations:[r.M,Ps.T,Hs.c,c.e,u.f,m.e,g.z,h.o,p.u,f.B,b.S,v.I,I,O,j,G,H,ee,Pn,En,te.T,Ee.q,Ye.i,ot,De.r,dt,rt,ct,ut,at,gt,ht.n,ie.s,ne.N,le.X,Se,qe,se,oe.r,pe,ls.x,os.Y,as.V,St.Q,Dt,Ft,pt.y,ft.U,wt,At,Lt.G,kt.U,It,hs,Gs,Ms,Ys,Ts,ve,li,di,mi,Ut.s,ts.O,Kt.Q,Xt.L,Wt.y,es.K,Qt.P,$t,Pt,Ht,ns._,ss.T,is._,gi.s,ye.p,cn,vi,Ei,Ti,Ii,Ni,Ln,Sn,Un,Ce.Q,Bn,$n,Wn],imports:[i.ez,n.u5,o.ObjectFields,l.o,d.SystemComponents,a.ObjectComponents],exports:[r.M,Ps.T,c.e,te.T,pt.y,ft.U,Lt.G,It,p.u,Wn]}),y.B6R(Ce.Q,[i.sg,Bn],[])},94338:(e,t,s)=>{"use strict";s.d(t,{s:()=>a});var i=s(18427),n=s(62242),l=s(26625),o=s(83348);let a=(()=>{class SpiceInstaller{spiceinstaller;configuration;router;constructor(e,t,s){this.spiceinstaller=e,this.configuration=t,this.router=s,this.configuration.enableinstall||s.navigate([""])}static ɵfac=function(e){return new(e||SpiceInstaller)(n.Y36(i.f),n.Y36(l.C),n.Y36(o.F0))};static ɵcmp=n.Xpm({type:SpiceInstaller,selectors:[["spice-installer"]],features:[n._Bn([i.f])],decls:5,vars:0,consts:[["system-to-bottom-noscroll","","system-to-bottom-noscroll","",1,"slds-grid"],[1,"slds-border--right","slds-size--1-of-6","slds-p-horizontal--small"],[1,"slds-size--5-of-6","slds-m-vertical--medium"]],template:function(e,t){1&e&&(n.TgZ(0,"div",0)(1,"div",1),n._UZ(2,"spice-installer-progress-indicator"),n.qZA(),n.TgZ(3,"div",2),n._UZ(4,"spice-installer-detail-container"),n.qZA()())},encapsulation:2})}return SpiceInstaller})()},18427:(e,t,s)=>{"use strict";s.d(t,{f:()=>l});var i=s(77579),n=s(62242);let l=(()=>{class spiceinstaller{steps=[];systemid="000";systemname="SpiceCRM";systemurl=window.location.href.split("#")[0]+"api";systemproxy=0;systemdevmode=!1;systemloginprogressbar=0;systemloginsidebar=0;systemallowforgotpass=0;frontendUrl=window.location.href.split("#")[0];rpPassword="";dbdrivers=[];db_host_name="";db_host_instance="";db_user_name="";db_password="";db_name="";db_type="";db_port="";db_manager="";persistent=!0;autofree=!1;debug=0;ssl=!1;collation="";lc_collate="en_US.UTF-8";lc_ctype="en_US.UTF-8";db_schema="SpiceCRM";server="";port="9200";prefix="";transferProtocol="http";elasticUser="";elasticpassword="";elastichttps=!1;elasticSSLVerify=!1;username="admin";password="";firstname="";surname="Administrator";email="";language={language_code:"en_us",language_name:"English (US)"};configObject={};selectedStep;jumpSubject=new i.x;nameFormats={"s f l":"Mr. David Livingstone","f l":"David Livingstone","s l":"Mr. Livingstone","l, s f":"Livingstone, Mr. David","l, f":"Livingstone, David","s l, f":"Mr. Livingstone, David","l s f":"Livingstone Mr. David","l f s":"Livingstone David Mr."};constructor(){let e;this.configObject={backendconfig:{},database:{},dboptions:{},fts:{},credentials:{},preferences:{},language:""},this.steps=[{id:"setbackend",name:"Set Backend",completed:!1},{id:"systemcheck",name:"System Requirements",completed:!1},{id:"licence",name:"Licence",completed:!1},{id:"database",name:"Database",completed:!1},{id:"fts",name:"FTS",completed:!1},{id:"credentials",name:"Credentials",completed:!1},{id:"preferences",name:"Output & Export",completed:!1},{id:"review",name:"Review & Install",completed:!1}],this.selectedStep=this.steps[0],this.steps.forEach(((t,s)=>{t.pos=s,t.prev=e||void 0,t.prev&&(t.prev.next=t),e=t}))}keyToLabel(e){let t=e.charAt(0).toUpperCase()+e.slice(1);return e.includes("dir")&&(t=t.replace("dir","directory")),e.includes("_")&&(t=t.split("_").join(" ")),e.match(/(?=[A-Z])/)&&(t=t.split(/(?=[A-Z])/).join(" ")),e.includes("db")&&(t=t.replace("Db","Database")),t}jump(e){e&&(this.selectedStep=e)}static ɵfac=function(e){return new(e||spiceinstaller)};static ɵprov=n.Yz7({token:spiceinstaller,factory:spiceinstaller.ɵfac})}return spiceinstaller})()},82956:(e,t,s)=>{"use strict";s.r(t),s.d(t,{SpiceInstallerModule:()=>He});var i=s(44755),n=s(95030),l=s(84357),o=s(18427),a=s(57239),d=s(94338),r=s(62242);function c(e,t){1&e&&(r.TgZ(0,"span",10),r.O4$(),r.TgZ(1,"svg",11),r._UZ(2,"use",12),r.qZA(),r.kcU(),r.TgZ(3,"span",13),r._uU(4,"Complete"),r.qZA()())}function u(e,t){1&e&&r._UZ(0,"div",14)}function m(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"a",15),r.NdJ("click",(function(){r.CHM(e);const t=r.oxw().$implicit,s=r.oxw();return r.KtG(s.jump(t))})),r._uU(1),r.qZA()}if(2&e){const e=r.oxw().$implicit;r.xp6(1),r.Oqu(e.name)}}function g(e,t){if(1&e&&r._uU(0),2&e){const e=r.oxw().$implicit;r.Oqu(e.name)}}const h=function(e,t){return{"slds-is-active":e,"slds-is-completed":t}};function p(e,t){if(1&e&&(r.TgZ(0,"li",4),r.YNc(1,c,5,0,"span",5),r.YNc(2,u,1,0,"ng-template",null,6,r.W1O),r.TgZ(4,"div",7),r.YNc(5,m,2,1,"a",8),r.YNc(6,g,1,1,"ng-template",null,9,r.W1O),r.qZA()()),2&e){const e=t.$implicit,s=r.MAs(3),i=r.MAs(7),n=r.oxw();r.Q6J("ngClass",r.WLB(5,h,n.isCurrentStep(e),e.completed)),r.xp6(1),r.Q6J("ngIf",e.completed&&e!=n.spiceinstaller.selectedStep)("ngIfElse",s),r.xp6(4),r.Q6J("ngIf",(e.completed||(null==e.prev?null:e.prev.completed))&&!n.isCurrentStep(e))("ngIfElse",i)}}let f=(()=>{class SpiceInstallerProgressIndicator{spiceinstaller;constructor(e){this.spiceinstaller=e}jump(e){e!==this.spiceinstaller.selectedStep&&(!this.spiceinstaller.selectedStep.completed&&e.pos>this.spiceinstaller.selectedStep.pos||this.spiceinstaller.jumpSubject.next({from:this.spiceinstaller.selectedStep,to:e}))}isCurrentStep(e){return e===this.spiceinstaller.selectedStep}static ɵfac=function(e){return new(e||SpiceInstallerProgressIndicator)(r.Y36(o.f))};static ɵcmp=r.Xpm({type:SpiceInstallerProgressIndicator,selectors:[["spice-installer-progress-indicator"]],decls:4,vars:1,consts:[[1,"slds-progress","slds-progress_vertical","slds-align_absolute-center","slds-p-horizontal--large","slds-m-vertical--x-small"],[1,"slds-progress__list"],["class","slds-progress__item",3,"ngClass",4,"ngFor","ngForOf"],["aria-valuemin","0","aria-valuemax","100","aria-valuenow","100","role","progressbar"],[1,"slds-progress__item",3,"ngClass"],["class","slds-icon_container slds-icon-utility-success slds-progress__marker slds-progress__marker_icon","title","Complete",4,"ngIf","ngIfElse"],["notCompleted",""],[1,"slds-progress__item_content","slds-grid","slds-grid_align-spread"],["href","javascript:void(0)",3,"click",4,"ngIf","ngIfElse"],["noLink",""],["title","Complete",1,"slds-icon_container","slds-icon-utility-success","slds-progress__marker","slds-progress__marker_icon"],["aria-hidden","true",1,"slds-icon","slds-icon_xx-small"],[0,"xlink","href","./vendor/sldassets/icons/utility-sprite/svg/symbols.svg#success"],[1,"slds-assistive-text"],[1,"slds-progress__marker"],["href","javascript:void(0)",3,"click"]],template:function(e,t){1&e&&(r.TgZ(0,"div",0)(1,"ol",1),r.YNc(2,p,8,8,"li",2),r.qZA(),r._UZ(3,"div",3),r.qZA()),2&e&&(r.xp6(2),r.Q6J("ngForOf",t.spiceinstaller.steps))},dependencies:[i.mk,i.sg,i.O5],encapsulation:2})}return SpiceInstallerProgressIndicator})();var b=s(32294),_=s(13278),v=s(3144),y=s(83348),x=s(26625),w=s(14505),Z=s(98280);function T(e,t){1&e&&(r.TgZ(0,"div",15),r._uU(1,"Input required."),r.qZA())}const C=function(e){return{"slds-has-error":e}},k=function(e){return{"slds-hide":e}};let A=(()=>{class SpiceInstallerSetBackEnd{toast;http;router;configurationService;spiceinstaller;selfStep;checking=!1;apiurl="";apiFound=!1;systemNameCondition=!0;constructor(e,t,s,i,n){this.toast=e,this.http=t,this.router=s,this.configurationService=i,this.spiceinstaller=n,this.spiceinstaller.jumpSubject.subscribe((e=>{e.to&&e.from===this.selfStep&&(this.selfStep.completed||e.to.pos<this.selfStep.pos||this.tryComplete())&&this.spiceinstaller.jump(e.to)}))}ngOnInit(){let e=window.location.href;this.apiurl=e.replace("#/install","api")}tryComplete(){return this.systemNameCondition=this.spiceinstaller.systemname?.length>0,!!this.systemNameCondition&&(this.spiceinstaller.systemurl=this.apiurl,this.spiceinstaller.configObject.backendconfig={backendUrl:this.spiceinstaller.systemurl,frontendUrl:this.spiceinstaller.frontendUrl},this.selfStep.completed=!0,!0)}static ɵfac=function(e){return new(e||SpiceInstallerSetBackEnd)(r.Y36(_.A),r.Y36(v.eN),r.Y36(y.F0),r.Y36(x.C),r.Y36(o.f))};static ɵcmp=r.Xpm({type:SpiceInstallerSetBackEnd,selectors:[["spice-installer-set-backend"]],inputs:{selfStep:"selfStep"},decls:41,vars:16,consts:[[1,"slds-m-horizontal--medium"],[1,"slds-text-heading--medium","slds-m-bottom_medium"],[1,"slds-text-body--regular","slds-p-bottom--xx-small"],[1,"slds-form-element","slds-p-vertical--xx-small",3,"ngClass"],[1,"slds-form-element__label"],[1,"slds-required"],[1,"slds-form-element__control"],["type","text","system-trim-input","blur",1,"slds-input",3,"disabled","ngModel","ngModelChange","change"],["class","slds-form-element__help",4,"ngIf"],[1,"slds-select_container"],[1,"slds-select",3,"disabled","ngModel","ngModelChange"],["value","1"],["value","0"],[1,"slds-p-vertical--small","slds-text-align--right"],[1,"slds-button","slds-button--brand",3,"click"],[1,"slds-form-element__help"]],template:function(e,t){1&e&&(r.TgZ(0,"div",0)(1,"h2",1)(2,"div",2),r._uU(3,"Welcome to SpiceCRM"),r._UZ(4,"br"),r.qZA(),r._uU(5," Set Backend "),r.qZA(),r.TgZ(6,"div",3)(7,"label",4)(8,"abbr",5),r._uU(9,"*"),r.qZA(),r._uU(10,"Name"),r.qZA(),r.TgZ(11,"div",6)(12,"input",7),r.NdJ("ngModelChange",(function(e){return t.spiceinstaller.systemname=e}))("change",(function(){return t.selfStep.completed=!1})),r.qZA(),r.YNc(13,T,2,0,"div",8),r.qZA()(),r.TgZ(14,"div",3)(15,"label",4)(16,"abbr",5),r._uU(17,"*"),r.qZA(),r._uU(18,"Show Forgot Password on Login Screen"),r.qZA(),r.TgZ(19,"div",6)(20,"div",9)(21,"select",10),r.NdJ("ngModelChange",(function(e){return t.spiceinstaller.systemallowforgotpass=e})),r.TgZ(22,"option",11),r._uU(23,"Yes"),r.qZA(),r.TgZ(24,"option",12),r._uU(25,"No"),r.qZA()()()()(),r.TgZ(26,"div",3)(27,"label",4)(28,"abbr",5),r._uU(29,"*"),r.qZA(),r._uU(30,"Show LoginSidebar"),r.qZA(),r.TgZ(31,"div",6)(32,"div",9)(33,"select",10),r.NdJ("ngModelChange",(function(e){return t.spiceinstaller.systemloginsidebar=e})),r.TgZ(34,"option",12),r._uU(35,"No"),r.qZA(),r.TgZ(36,"option",11),r._uU(37,"Yes"),r.qZA()()()()(),r.TgZ(38,"div",13)(39,"button",14),r.NdJ("click",(function(){return t.spiceinstaller.jumpSubject.next({from:t.selfStep,to:t.selfStep.next})})),r._uU(40,"next"),r.qZA()()()),2&e&&(r.xp6(6),r.Q6J("ngClass",r.VKq(10,C,!t.systemNameCondition)),r.xp6(6),r.Q6J("disabled",t.checking)("ngModel",t.spiceinstaller.systemname),r.xp6(1),r.Q6J("ngIf",!t.systemNameCondition),r.xp6(1),r.Q6J("ngClass",r.VKq(12,k,t.apiFound)),r.xp6(7),r.Q6J("disabled",t.checking)("ngModel",t.spiceinstaller.systemallowforgotpass),r.xp6(5),r.Q6J("ngClass",r.VKq(14,k,t.apiFound)),r.xp6(7),r.Q6J("disabled",t.checking)("ngModel",t.spiceinstaller.systemloginsidebar))},dependencies:[i.mk,i.O5,n.YN,n.Kr,n.Fj,n.EJ,n.JJ,n.On,Z.t],encapsulation:2})}return SpiceInstallerSetBackEnd})();var L=s(54021),I=s(78859);const S=function(e){return{"slds-theme--error":e}};function M(e,t){if(1&e&&(r.TgZ(0,"tr",8)(1,"td")(2,"div",9),r._UZ(3,"system-utility-icon",10),r.qZA()(),r.TgZ(4,"td")(5,"div",9),r._uU(6),r.qZA()()()),2&e){const e=t.$implicit,s=r.oxw();r.Q6J("ngClass",r.VKq(4,S,!e.value)),r.xp6(3),r.Q6J("size","x-small")("icon",e.value?"check":"error"),r.xp6(3),r.hij(" ",s.spiceinstaller.keyToLabel(e.key),"")}}let J=(()=>{class SpiceInstallerSystemCheck{toast;http;spiceinstaller;selfStep;loading=!1;requirements=[];constructor(e,t,s){this.toast=e,this.http=t,this.spiceinstaller=s,this.spiceinstaller.jumpSubject.subscribe((e=>{e.to&&e.from===this.selfStep&&(this.selfStep.completed||e.to?.pos<this.selfStep.pos)&&this.spiceinstaller.jump(e.to)})),this.checkSystem()}get checkFailed(){for(let e of Object.values(this.requirements))if(!e)return!0;return!1}checkSystem(){this.loading=!0,this.http.get(`${this.spiceinstaller.systemurl}/install/check`).subscribe((e=>{this.loading=!1;let t=e;this.requirements=t.requirements,t.success?(this.selfStep.completed=!0,this.spiceinstaller.dbdrivers=this.requirements.dbdrivers):this.toast.sendToast("error, missing requirements","error")}),(e=>{if(this.loading=!1,500===e.status)this.toast.sendAlert(e.message,"error")}))}static ɵfac=function(e){return new(e||SpiceInstallerSystemCheck)(r.Y36(_.A),r.Y36(v.eN),r.Y36(o.f))};static ɵcmp=r.Xpm({type:SpiceInstallerSystemCheck,selectors:[["spice-installer-systemcheck"]],inputs:{selfStep:"selfStep"},decls:20,vars:5,consts:[[3,"system-overlay-loading-spinner"],[1,"slds-text-heading--medium","slds-m-bottom_medium","slds-m-horizontal_medium"],[1,"slds-table","slds-table_cell-buffer","slds-table_bordered","slds-table_col-bordered"],[3,"ngClass",4,"ngFor","ngForOf"],[1,"slds-text-align--right","slds-m-top--medium","slds-m-horizontal--medium"],[1,"slds-button","slds-button--neutral","slds-col_bump-left",3,"click"],[1,"slds-button","slds-m-right--xx-small","slds-button--neutral",3,"click"],[1,"slds-button","slds-button--brand",3,"disabled","click"],[3,"ngClass"],[1,"slds-truncate"],[3,"size","icon"]],template:function(e,t){1&e&&(r.TgZ(0,"div",0)(1,"h2",1),r._uU(2," System Requirements "),r.qZA(),r.TgZ(3,"table",2)(4,"thead")(5,"tr")(6,"th"),r._uU(7,"Status"),r.qZA(),r.TgZ(8,"th"),r._uU(9,"Extension"),r.qZA()()(),r.TgZ(10,"tbody"),r.YNc(11,M,7,6,"tr",3),r.ALo(12,"keyvalue"),r.qZA()(),r.TgZ(13,"div",4)(14,"button",5),r.NdJ("click",(function(){return t.spiceinstaller.jumpSubject.next({from:t.selfStep,to:t.selfStep.prev})})),r._uU(15,"back"),r.qZA(),r.TgZ(16,"button",6),r.NdJ("click",(function(){return t.checkSystem()})),r._uU(17,"recheck"),r.qZA(),r.TgZ(18,"button",7),r.NdJ("click",(function(){return t.spiceinstaller.jumpSubject.next({from:t.selfStep,to:t.selfStep.next})})),r._uU(19,"next"),r.qZA()()()),2&e&&(r.Q6J("system-overlay-loading-spinner",t.loading),r.xp6(11),r.Q6J("ngForOf",r.lcZ(12,3,t.requirements)),r.xp6(7),r.Q6J("disabled",t.checkFailed))},dependencies:[i.mk,i.sg,L._,I.r,i.Nd],encapsulation:2})}return SpiceInstallerSystemCheck})();var O=s(31058),N=s(7514);let F=(()=>{class SpiceInstallerLicence{spiceinstaller;selfStep;year=new Date;author="";constructor(e){this.spiceinstaller=e,this.author="SpiceCRM",this.year=this.year.getFullYear(),this.spiceinstaller.jumpSubject.subscribe((e=>{e.to&&e.from===this.selfStep&&(this.selfStep.completed||e.to?.pos<this.selfStep.pos)&&this.spiceinstaller.jump(e.to)}))}static ɵfac=function(e){return new(e||SpiceInstallerLicence)(r.Y36(o.f))};static ɵcmp=r.Xpm({type:SpiceInstallerLicence,selectors:[["spice-installer-licence"]],inputs:{selfStep:"selfStep"},decls:257,vars:4,consts:[[1,"slds-text-heading--medium","slds-p-bottom_medium","slds-border--bottom","slds-p-horizontal--medium"],["system-to-bottom",""],[1,"slds-p-around--medium","slds-theme--default"],["href","http://fsf.org/"],[1,"slds-text-longform"],["href","http://www.gnu.org/licenses/"],[1,"slds-grid","slds-p-around--medium","slds-border--top"],[3,"ngModel","ngModelChange"],[1,"slds-button","slds-button--neutral","slds-col_bump-left",3,"click"],[1,"slds-button","slds-button--brand",3,"disabled","click"]],template:function(e,t){1&e&&(r.TgZ(0,"h2",0),r._uU(1," License Agreement\n"),r.qZA(),r.TgZ(2,"div",1)(3,"div",2)(4,"p"),r._uU(5,"GNU AFFERO GENERAL PUBLIC LICENSE Version 3, 19 November 2007"),r.qZA(),r.TgZ(6,"p"),r._uU(7," Copyright (C) 2007 Free Software Foundation, Inc. "),r.TgZ(8,"a",3),r._uU(9,"fsf.org"),r.qZA(),r._uU(10," Everyone is permitted to copy and distribute verbatim copies of this license document, but changing it is not allowed."),r.qZA(),r.TgZ(11,"p"),r._uU(12," Preamble"),r.qZA(),r.TgZ(13,"p"),r._uU(14," The GNU Affero General Public License is a free, copyleft license for software and other kinds of works, specifically designed to ensure cooperation with the community in the case of network server software."),r.qZA(),r.TgZ(15,"p"),r._uU(16," The licenses for most software and other practical works are designed to take away your freedom to share and change the works. By contrast, our General Public Licenses are intended to guarantee your freedom to share and change all versions of a program--to make sure it remains free software for all its users."),r.qZA(),r.TgZ(17,"p"),r._uU(18," When we speak of free software, we are referring to freedom, not price. Our General Public Licenses are designed to make sure that you have the freedom to distribute copies of free software (and charge for them if you wish), that you receive source code or can get it if you want it, that you can change the software or use pieces of it in new free programs, and that you know you can do these things."),r.qZA(),r.TgZ(19,"div",4)(20,"p"),r._uU(21," Developers that use our General Public Licenses protect your rights with two steps: (1) assert copyright on the software, and (2) offer you this License which gives you legal permission to copy, distribute and/or modify the software."),r.qZA(),r.TgZ(22,"p"),r._uU(23," A secondary benefit of defending all users' freedom is that improvements made in alternate versions of the program, if they receive widespread use, become available for other developers to incorporate. Many developers of free software are heartened and encouraged by the resulting cooperation. However, in the case of software used on network servers, this result may fail to come about. The GNU General Public License permits making a modified version and letting the public access it on a server without ever releasing its source code to the public."),r.qZA(),r.TgZ(24,"p"),r._uU(25," The GNU Affero General Public License is designed specifically to ensure that, in such cases, the modified source code becomes available to the community. It requires the operator of a network server to provide the source code of the modified version running there to the users of that server. Therefore, public use of a modified version, on a publicly accessible server, gives the public access to the source code of the modified version."),r.qZA(),r.TgZ(26,"p"),r._uU(27," An older license, called the Affero General Public License and published by Affero, was designed to accomplish similar goals. This is a different license, not a version of the Affero GPL, but Affero has released a new version of the Affero GPL which permits relicensing under this license."),r.qZA(),r.TgZ(28,"p"),r._uU(29," The precise terms and conditions for copying, distribution and modification follow."),r.qZA(),r.TgZ(30,"p"),r._uU(31," TERMS AND CONDITIONS"),r.qZA(),r.TgZ(32,"p"),r._uU(33," 0. Definitions."),r.qZA(),r.TgZ(34,"p"),r._uU(35,' "This License" refers to version 3 of the GNU Affero General Public License.'),r.qZA(),r.TgZ(36,"p"),r._uU(37,' "Copyright" also means copyright-like laws that apply to other kinds of works, such as semiconductor masks.'),r.qZA(),r.TgZ(38,"p"),r._uU(39,' "The Program" refers to any copyrightable work licensed under this License. Each licensee is addressed as "you". "Licensees" and "recipients" may be individuals or organizations.'),r.qZA(),r.TgZ(40,"p"),r._uU(41,' To "modify" a work means to copy from or adapt all or part of the work in a fashion requiring copyright permission, other than the making of an exact copy. The resulting work is called a "modified version" of the earlier work or a work "based on" the earlier work.'),r.qZA(),r.TgZ(42,"p"),r._uU(43,' A "covered work" means either the unmodified Program or a work based on the Program.'),r.qZA(),r.TgZ(44,"p"),r._uU(45,' To "propagate" a work means to do anything with it that, without permission, would make you directly or secondarily liable for infringement under applicable copyright law, except executing it on a computer or modifying a public copy. Propagation includes copying, distribution (with or without modification), making available to the public, and in some countries other activities as well.'),r.qZA(),r.TgZ(46,"p"),r._uU(47,' To "convey" a work means any kind of propagation that enables other parties to make or receive copies. Mere interaction with a user through a computer network, with no transfer of a copy, is not conveying.'),r.qZA(),r.TgZ(48,"p"),r._uU(49,' An interactive user interface displays "Appropriate Legal Notices" to the extent that it includes a convenient and prominently visible feature that (1) displays an appropriate copyright notice, and (2) tells the user that there is no warranty for the work (except to the extent that warranties are provided), that licensees may convey the work under this License, and how to view a copy of this License. If the interface presents a list of user commands or options, such as a menu, a prominent item in the list meets this criterion.'),r.qZA(),r.TgZ(50,"p"),r._uU(51," 1. Source Code."),r.qZA(),r.TgZ(52,"p"),r._uU(53,' The "source code" for a work means the preferred form of the work for making modifications to it. "Object code" means any non-source form of a work.'),r.qZA(),r.TgZ(54,"p"),r._uU(55,' A "Standard Interface" means an interface that either is an official standard defined by a recognized standards body, or, in the case of interfaces specified for a particular programming language, one that is widely used among developers working in that language.'),r.qZA(),r.TgZ(56,"p"),r._uU(57,' The "System Libraries" of an executable work include anything, other than the work as a whole, that (a) is included in the normal form of packaging a Major Component, but which is not part of that Major Component, and (b) serves only to enable use of the work with that Major Component, or to implement a Standard Interface for which an implementation is available to the public in source code form. A "Major Component", in this context, means a major essential component (kernel, window system, and so on) of the specific operating system (if any) on which the executable work runs, or a compiler used to produce the work, or an object code interpreter used to run it.'),r.qZA(),r.TgZ(58,"p"),r._uU(59,' The "Corresponding Source" for a work in object code form means all the source code needed to generate, install, and (for an executable work) run the object code and to modify the work, including scripts to control those activities. However, it does not include the work\'s System Libraries, or general-purpose tools or generally available free programs which are used unmodified in performing those activities but which are not part of the work. For example, Corresponding Source includes interface definition files associated with source files for the work, and the source code for shared libraries and dynamically linked subprograms that the work is specifically designed to require, such as by intimate data communication or control flow between those subprograms and other parts of the work.'),r.qZA(),r.TgZ(60,"p"),r._uU(61," The Corresponding Source need not include anything that users can regenerate automatically from other parts of the Corresponding Source."),r.qZA(),r.TgZ(62,"p"),r._uU(63," The Corresponding Source for a work in source code form is that same work."),r.qZA(),r.TgZ(64,"p"),r._uU(65," 2. Basic Permissions."),r.qZA(),r.TgZ(66,"p"),r._uU(67," All rights granted under this License are granted for the term of copyright on the Program, and are irrevocable provided the stated conditions are met. This License explicitly affirms your unlimited permission to run the unmodified Program. The output from running a covered work is covered by this License only if the output, given its content, constitutes a covered work. This License acknowledges your rights of fair use or other equivalent, as provided by copyright law."),r.qZA(),r.TgZ(68,"p"),r._uU(69," You may make, run and propagate covered works that you do not convey, without conditions so long as your license otherwise remains in force. You may convey covered works to others for the sole purpose of having them make modifications exclusively for you, or provide you with facilities for running those works, provided that you comply with the terms of this License in conveying all material for which you do not control copyright. Those thus making or running the covered works for you must do so exclusively on your behalf, under your direction and control, on terms that prohibit them from making any copies of your copyrighted material outside their relationship with you."),r.qZA(),r.TgZ(70,"p"),r._uU(71," Conveying under any other circumstances is permitted solely under the conditions stated below. Sublicensing is not allowed; section 10 makes it unnecessary."),r.qZA(),r.TgZ(72,"p"),r._uU(73," 3. Protecting Users' Legal Rights From Anti-Circumvention Law."),r.qZA(),r.TgZ(74,"p"),r._uU(75," No covered work shall be deemed part of an effective technological measure under any applicable law fulfilling obligations under article 11 of the WIPO copyright treaty adopted on 20 December 1996, or similar laws prohibiting or restricting circumvention of such measures."),r.qZA(),r.TgZ(76,"p"),r._uU(77," When you convey a covered work, you waive any legal power to forbid circumvention of technological measures to the extent such circumvention is effected by exercising rights under this License with respect to the covered work, and you disclaim any intention to limit operation or modification of the work as a means of enforcing, against the work's users, your or third parties' legal rights to forbid circumvention of technological measures."),r.qZA(),r.TgZ(78,"p"),r._uU(79," 4. Conveying Verbatim Copies."),r.qZA(),r.TgZ(80,"p"),r._uU(81," You may convey verbatim copies of the Program's source code as you receive it, in any medium, provided that you conspicuously and appropriately publish on each copy an appropriate copyright notice; keep intact all notices stating that this License and any non-permissive terms added in accord with section 7 apply to the code; keep intact all notices of the absence of any warranty; and give all recipients a copy of this License along with the Program."),r.qZA(),r.TgZ(82,"p"),r._uU(83," You may charge any price or no price for each copy that you convey, and you may offer support or warranty protection for a fee."),r.qZA(),r.TgZ(84,"p"),r._uU(85," 5. Conveying Modified Source Versions."),r.qZA(),r.TgZ(86,"p"),r._uU(87," You may convey a work based on the Program, or the modifications to produce it from the Program, in the form of source code under the terms of section 4, provided that you also meet all of these conditions:"),r.qZA(),r.TgZ(88,"p"),r._uU(89," a) The work must carry prominent notices stating that you modified it, and giving a relevant date."),r.qZA(),r.TgZ(90,"p"),r._uU(91,' b) The work must carry prominent notices stating that it is released under this License and any conditions added under section 7. This requirement modifies the requirement in section 4 to "keep intact all notices".'),r.qZA(),r.TgZ(92,"p"),r._uU(93," c) You must license the entire work, as a whole, under this License to anyone who comes into possession of a copy. This License will therefore apply, along with any applicable section 7 additional terms, to the whole of the work, and all its parts, regardless of how they are packaged. This License gives no permission to license the work in any other way, but it does not invalidate such permission if you have separately received it."),r.qZA(),r.TgZ(94,"p"),r._uU(95," d) If the work has interactive user interfaces, each must display Appropriate Legal Notices; however, if the Program has interactive interfaces that do not display Appropriate Legal Notices, your work need not make them do so."),r.qZA(),r.TgZ(96,"p"),r._uU(97,' A compilation of a covered work with other separate and independent works, which are not by their nature extensions of the covered work, and which are not combined with it such as to form a larger program, in or on a volume of a storage or distribution medium, is called an "aggregate" if the compilation and its resulting copyright are not used to limit the access or legal rights of the compilation\'s users beyond what the individual works permit. Inclusion of a covered work in an aggregate does not cause this License to apply to the other parts of the aggregate.'),r.qZA(),r.TgZ(98,"p"),r._uU(99," 6. Conveying Non-Source Forms."),r.qZA(),r.TgZ(100,"p"),r._uU(101," You may convey a covered work in object code form under the terms of sections 4 and 5, provided that you also convey the machine-readable Corresponding Source under the terms of this License, in one of these ways:"),r.qZA(),r.TgZ(102,"p"),r._uU(103," a) Convey the object code in, or embodied in, a physical product (including a physical distribution medium), accompanied by the Corresponding Source fixed on a durable physical medium customarily used for software interchange."),r.qZA(),r.TgZ(104,"p"),r._uU(105," b) Convey the object code in, or embodied in, a physical product (including a physical distribution medium), accompanied by a written offer, valid for at least three years and valid for as long as you offer spare parts or customer support for that product model, to give anyone who possesses the object code either (1) a copy of the Corresponding Source for all the software in the product that is covered by this License, on a durable physical medium customarily used for software interchange, for a price no more than your reasonable cost of physically performing this conveying of source, or (2) access to copy the Corresponding Source from a network server at no charge."),r.qZA(),r.TgZ(106,"p"),r._uU(107," c) Convey individual copies of the object code with a copy of the written offer to provide the Corresponding Source. This alternative is allowed only occasionally and noncommercially, and only if you received the object code with such an offer, in accord with subsection 6b."),r.qZA(),r.TgZ(108,"p"),r._uU(109," d) Convey the object code by offering access from a designated place (gratis or for a charge), and offer equivalent access to the Corresponding Source in the same way through the same place at no further charge. You need not require recipients to copy the Corresponding Source along with the object code. If the place to copy the object code is a network server, the Corresponding Source may be on a different server (operated by you or a third party) that supports equivalent copying facilities, provided you maintain clear directions next to the object code saying where to find the Corresponding Source. Regardless of what server hosts the Corresponding Source, you remain obligated to ensure that it is available for as long as needed to satisfy these requirements."),r.qZA(),r.TgZ(110,"p"),r._uU(111," e) Convey the object code using peer-to-peer transmission, provided you inform other peers where the object code and Corresponding Source of the work are being offered to the general public at no charge under subsection 6d."),r.qZA(),r.TgZ(112,"p"),r._uU(113," A separable portion of the object code, whose source code is excluded from the Corresponding Source as a System Library, need not be included in conveying the object code work."),r.qZA(),r.TgZ(114,"p"),r._uU(115,' A "User Product" is either (1) a "consumer product", which means any tangible personal property which is normally used for personal, family, or household purposes, or (2) anything designed or sold for incorporation into a dwelling. In determining whether a product is a consumer product, doubtful cases shall be resolved in favor of coverage. For a particular product received by a particular user, "normally used" refers to a typical or common use of that class of product, regardless of the status of the particular user or of the way in which the particular user actually uses, or expects or is expected to use, the product. A product is a consumer product regardless of whether the product has substantial commercial, industrial or non-consumer uses, unless such uses represent the only significant mode of use of the product.'),r.qZA(),r.TgZ(116,"p"),r._uU(117,' "Installation Information" for a User Product means any methods, procedures, authorization keys, or other information required to install and execute modified versions of a covered work in that User Product from a modified version of its Corresponding Source. The information must suffice to ensure that the continued functioning of the modified object code is in no case prevented or interfered with solely because modification has been made.'),r.qZA(),r.TgZ(118,"p"),r._uU(119," If you convey an object code work under this section in, or with, or specifically for use in, a User Product, and the conveying occurs as part of a transaction in which the right of possession and use of the User Product is transferred to the recipient in perpetuity or for a fixed term (regardless of how the transaction is characterized), the Corresponding Source conveyed under this section must be accompanied by the Installation Information. But this requirement does not apply if neither you nor any third party retains the ability to install modified object code on the User Product (for example, the work has been installed in ROM)."),r.qZA(),r.TgZ(120,"p"),r._uU(121," The requirement to provide Installation Information does not include a requirement to continue to provide support service, warranty, or updates for a work that has been modified or installed by the recipient, or for the User Product in which it has been modified or installed. Access to a network may be denied when the modification itself materially and adversely affects the operation of the network or violates the rules and protocols for communication across the network."),r.qZA(),r.TgZ(122,"p"),r._uU(123," Corresponding Source conveyed, and Installation Information provided, in accord with this section must be in a format that is publicly documented (and with an implementation available to the public in source code form), and must require no special password or key for unpacking, reading or copying."),r.qZA(),r.TgZ(124,"p"),r._uU(125," 7. Additional Terms."),r.qZA(),r.TgZ(126,"p"),r._uU(127,' "Additional permissions" are terms that supplement the terms of this License by making exceptions from one or more of its conditions. Additional permissions that are applicable to the entire Program shall be treated as though they were included in this License, to the extent that they are valid under applicable law. If additional permissions apply only to part of the Program, that part may be used separately under those permissions, but the entire Program remains governed by this License without regard to the additional permissions.'),r.qZA(),r.TgZ(128,"p"),r._uU(129," When you convey a copy of a covered work, you may at your option remove any additional permissions from that copy, or from any part of it. (Additional permissions may be written to require their own removal in certain cases when you modify the work.) You may place additional permissions on material, added by you to a covered work, for which you have or can give appropriate copyright permission."),r.qZA(),r.TgZ(130,"p"),r._uU(131," Notwithstanding any other provision of this License, for material you add to a covered work, you may (if authorized by the copyright holders of that material) supplement the terms of this License with terms:"),r.qZA(),r.TgZ(132,"p"),r._uU(133," a) Disclaiming warranty or limiting liability differently from the terms of sections 15 and 16 of this License; or"),r.qZA(),r.TgZ(134,"p"),r._uU(135," b) Requiring preservation of specified reasonable legal notices or author attributions in that material or in the Appropriate Legal Notices displayed by works containing it; or"),r.qZA(),r.TgZ(136,"p"),r._uU(137," c) Prohibiting misrepresentation of the origin of that material, or requiring that modified versions of such material be marked in reasonable ways as different from the original version; or"),r.qZA(),r.TgZ(138,"p"),r._uU(139," d) Limiting the use for publicity purposes of names of licensors or authors of the material; or"),r.qZA(),r.TgZ(140,"p"),r._uU(141," e) Declining to grant rights under trademark law for use of some trade names, trademarks, or service marks; or"),r.qZA(),r.TgZ(142,"p"),r._uU(143," f) Requiring indemnification of licensors and authors of that material by anyone who conveys the material (or modified versions of it) with contractual assumptions of liability to the recipient, for any liability that these contractual assumptions directly impose on those licensors and authors."),r.qZA(),r.TgZ(144,"p"),r._uU(145,' All other non-permissive additional terms are considered "further restrictions" within the meaning of section 10. If the Program as you received it, or any part of it, contains a notice stating that it is governed by this License along with a term that is a further restriction, you may remove that term. If a license document contains a further restriction but permits relicensing or conveying under this License, you may add to a covered work material governed by the terms of that license document, provided that the further restriction does not survive such relicensing or conveying.'),r.qZA(),r.TgZ(146,"p"),r._uU(147," If you add terms to a covered work in accord with this section, you must place, in the relevant source files, a statement of the additional terms that apply to those files, or a notice indicating where to find the applicable terms."),r.qZA(),r.TgZ(148,"p"),r._uU(149," Additional terms, permissive or non-permissive, may be stated in the form of a separately written license, or stated as exceptions; the above requirements apply either way."),r.qZA(),r.TgZ(150,"p"),r._uU(151," 8. Termination."),r.qZA(),r.TgZ(152,"p"),r._uU(153," You may not propagate or modify a covered work except as expressly provided under this License. Any attempt otherwise to propagate or modify it is void, and will automatically terminate your rights under this License (including any patent licenses granted under the third paragraph of section 11)."),r.qZA(),r.TgZ(154,"p"),r._uU(155," However, if you cease all violation of this License, then your license from a particular copyright holder is reinstated (a) provisionally, unless and until the copyright holder explicitly and finally terminates your license, and (b) permanently, if the copyright holder fails to notify you of the violation by some reasonable means prior to 60 days after the cessation."),r.qZA(),r.TgZ(156,"p"),r._uU(157," Moreover, your license from a particular copyright holder is reinstated permanently if the copyright holder notifies you of the violation by some reasonable means, this is the first time you have received notice of violation of this License (for any work) from that copyright holder, and you cure the violation prior to 30 days after your receipt of the notice."),r.qZA(),r.TgZ(158,"p"),r._uU(159," Termination of your rights under this section does not terminate the licenses of parties who have received copies or rights from you under this License. If your rights have been terminated and not permanently reinstated, you do not qualify to receive new licenses for the same material under section 10."),r.qZA(),r.TgZ(160,"p"),r._uU(161," 9. Acceptance Not Required for Having Copies."),r.qZA(),r.TgZ(162,"p"),r._uU(163," You are not required to accept this License in order to receive or run a copy of the Program. Ancillary propagation of a covered work occurring solely as a consequence of using peer-to-peer transmission to receive a copy likewise does not require acceptance. However, nothing other than this License grants you permission to propagate or modify any covered work. These actions infringe copyright if you do not accept this License. Therefore, by modifying or propagating a covered work, you indicate your acceptance of this License to do so."),r.qZA(),r.TgZ(164,"p"),r._uU(165," 10. Automatic Licensing of Downstream Recipients."),r.qZA(),r.TgZ(166,"p"),r._uU(167," Each time you convey a covered work, the recipient automatically receives a license from the original licensors, to run, modify and propagate that work, subject to this License. You are not responsible for enforcing compliance by third parties with this License."),r.qZA(),r.TgZ(168,"p"),r._uU(169,' An "entity transaction" is a transaction transferring control of an organization, or substantially all assets of one, or subdividing an organization, or merging organizations. If propagation of a covered work results from an entity transaction, each party to that transaction who receives a copy of the work also receives whatever licenses to the work the party\'s predecessor in interest had or could give under the previous paragraph, plus a right to possession of the Corresponding Source of the work from the predecessor in interest, if the predecessor has it or can get it with reasonable efforts.'),r.qZA(),r.TgZ(170,"p"),r._uU(171," You may not impose any further restrictions on the exercise of the rights granted or affirmed under this License. For example, you may not impose a license fee, royalty, or other charge for exercise of rights granted under this License, and you may not initiate litigation (including a cross-claim or counterclaim in a lawsuit) alleging that any patent claim is infringed by making, using, selling, offering for sale, or importing the Program or any portion of it."),r.qZA(),r.TgZ(172,"p"),r._uU(173," 11. Patents."),r.qZA(),r.TgZ(174,"p"),r._uU(175,' A "contributor" is a copyright holder who authorizes use under this License of the Program or a work on which the Program is based. The work thus licensed is called the contributor\'s "contributor version".'),r.qZA(),r.TgZ(176,"p"),r._uU(177,' A contributor\'s "essential patent claims" are all patent claims owned or controlled by the contributor, whether already acquired or hereafter acquired, that would be infringed by some manner, permitted by this License, of making, using, or selling its contributor version, but do not include claims that would be infringed only as a consequence of further modification of the contributor version. For purposes of this definition, "control" includes the right to grant patent sublicenses in a manner consistent with the requirements of this License.'),r.qZA(),r.TgZ(178,"p"),r._uU(179," Each contributor grants you a non-exclusive, worldwide, royalty-free patent license under the contributor's essential patent claims, to make, use, sell, offer for sale, import and otherwise run, modify and propagate the contents of its contributor version."),r.qZA(),r.TgZ(180,"p"),r._uU(181,' In the following three paragraphs, a "patent license" is any express agreement or commitment, however denominated, not to enforce a patent (such as an express permission to practice a patent or covenant not to sue for patent infringement). To "grant" such a patent license to a party means to make such an agreement or commitment not to enforce a patent against the party.'),r.qZA(),r.TgZ(182,"p"),r._uU(183,' If you convey a covered work, knowingly relying on a patent license, and the Corresponding Source of the work is not available for anyone to copy, free of charge and under the terms of this License, through a publicly available network server or other readily accessible means, then you must either (1) cause the Corresponding Source to be so available, or (2) arrange to deprive yourself of the benefit of the patent license for this particular work, or (3) arrange, in a manner consistent with the requirements of this License, to extend the patent license to downstream recipients. "Knowingly relying" means you have actual knowledge that, but for the patent license, your conveying the covered work in a country, or your recipient\'s use of the covered work in a country, would infringe one or more identifiable patents in that country that you have reason to believe are valid.'),r.qZA(),r.TgZ(184,"p"),r._uU(185," If, pursuant to or in connection with a single transaction or arrangement, you convey, or propagate by procuring conveyance of, a covered work, and grant a patent license to some of the parties receiving the covered work authorizing them to use, propagate, modify or convey a specific copy of the covered work, then the patent license you grant is automatically extended to all recipients of the covered work and works based on it."),r.qZA(),r.TgZ(186,"p"),r._uU(187,' A patent license is "discriminatory" if it does not include within the scope of its coverage, prohibits the exercise of, or is conditioned on the non-exercise of one or more of the rights that are specifically granted under this License. You may not convey a covered work if you are a party to an arrangement with a third party that is in the business of distributing software, under which you make payment to the third party based on the extent of your activity of conveying the work, and under which the third party grants, to any of the parties who would receive the covered work from you, a discriminatory patent license (a) in connection with copies of the covered work conveyed by you (or copies made from those copies), or (b) primarily for and in connection with specific products or compilations that contain the covered work, unless you entered into that arrangement, or that patent license was granted, prior to 28 March 2007.'),r.qZA(),r.TgZ(188,"p"),r._uU(189," Nothing in this License shall be construed as excluding or limiting any implied license or other defenses to infringement that may otherwise be available to you under applicable patent law."),r.qZA(),r.TgZ(190,"p"),r._uU(191," 12. No Surrender of Others' Freedom."),r.qZA(),r.TgZ(192,"p"),r._uU(193," If conditions are imposed on you (whether by court order, agreement or otherwise) that contradict the conditions of this License, they do not excuse you from the conditions of this License. If you cannot convey a covered work so as to satisfy simultaneously your obligations under this License and any other pertinent obligations, then as a consequence you may not convey it at all. For example, if you agree to terms that obligate you to collect a royalty for further conveying from those to whom you convey the Program, the only way you could satisfy both those terms and this License would be to refrain entirely from conveying the Program."),r.qZA(),r.TgZ(194,"p"),r._uU(195," 13. Remote Network Interaction; Use with the GNU General Public License."),r.qZA(),r.TgZ(196,"p"),r._uU(197," Notwithstanding any other provision of this License, if you modify the Program, your modified version must prominently offer all users interacting with it remotely through a computer network (if your version supports such interaction) an opportunity to receive the Corresponding Source of your version by providing access to the Corresponding Source from a network server at no charge, through some standard or customary means of facilitating copying of software. This Corresponding Source shall include the Corresponding Source for any work covered by version 3 of the GNU General Public License that is incorporated pursuant to the following paragraph."),r.qZA(),r.TgZ(198,"p"),r._uU(199," Notwithstanding any other provision of this License, you have permission to link or combine any covered work with a work licensed under version 3 of the GNU General Public License into a single combined work, and to convey the resulting work. The terms of this License will continue to apply to the part which is the covered work, but the work with which it is combined will remain governed by version 3 of the GNU General Public License."),r.qZA(),r.TgZ(200,"p"),r._uU(201," 14. Revised Versions of this License."),r.qZA(),r.TgZ(202,"p"),r._uU(203," The Free Software Foundation may publish revised and/or new versions of the GNU Affero General Public License from time to time. Such new versions will be similar in spirit to the present version, but may differ in detail to address new problems or concerns."),r.qZA(),r.TgZ(204,"p"),r._uU(205,' Each version is given a distinguishing version number. If the Program specifies that a certain numbered version of the GNU Affero General Public License "or any later version" applies to it, you have the option of following the terms and conditions either of that numbered version or of any later version published by the Free Software Foundation. If the Program does not specify a version number of the GNU Affero General Public License, you may choose any version ever published by the Free Software Foundation.'),r.qZA(),r.TgZ(206,"p"),r._uU(207," If the Program specifies that a proxy can decide which future versions of the GNU Affero General Public License can be used, that proxy's public statement of acceptance of a version permanently authorizes you to choose that version for the Program."),r.qZA(),r.TgZ(208,"p"),r._uU(209," Later license versions may give you additional or different permissions. However, no additional obligations are imposed on any author or copyright holder as a result of your choosing to follow a later version."),r.qZA(),r.TgZ(210,"p"),r._uU(211," 15. Disclaimer of Warranty."),r.qZA(),r.TgZ(212,"p"),r._uU(213,' THERE IS NO WARRANTY FOR THE PROGRAM, TO THE EXTENT PERMITTED BY APPLICABLE LAW. EXCEPT WHEN OTHERWISE STATED IN WRITING THE COPYRIGHT HOLDERS AND/OR OTHER PARTIES PROVIDE THE PROGRAM "AS IS" WITHOUT WARRANTY OF ANY KIND, EITHER EXPRESSED OR IMPLIED, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE. THE ENTIRE RISK AS TO THE QUALITY AND PERFORMANCE OF THE PROGRAM IS WITH YOU. SHOULD THE PROGRAM PROVE DEFECTIVE, YOU ASSUME THE COST OF ALL NECESSARY SERVICING, REPAIR OR CORRECTION.'),r.qZA(),r.TgZ(214,"p"),r._uU(215," 16. Limitation of Liability."),r.qZA(),r.TgZ(216,"p"),r._uU(217," IN NO EVENT UNLESS REQUIRED BY APPLICABLE LAW OR AGREED TO IN WRITING WILL ANY COPYRIGHT HOLDER, OR ANY OTHER PARTY WHO MODIFIES AND/OR CONVEYS THE PROGRAM AS PERMITTED ABOVE, BE LIABLE TO YOU FOR DAMAGES, INCLUDING ANY GENERAL, SPECIAL, INCIDENTAL OR CONSEQUENTIAL DAMAGES ARISING OUT OF THE USE OR INABILITY TO USE THE PROGRAM (INCLUDING BUT NOT LIMITED TO LOSS OF DATA OR DATA BEING RENDERED INACCURATE OR LOSSES SUSTAINED BY YOU OR THIRD PARTIES OR A FAILURE OF THE PROGRAM TO OPERATE WITH ANY OTHER PROGRAMS), EVEN IF SUCH HOLDER OR OTHER PARTY HAS BEEN ADVISED OF THE POSSIBILITY OF SUCH DAMAGES."),r.qZA(),r.TgZ(218,"p"),r._uU(219," 17. Interpretation of Sections 15 and 16."),r.qZA(),r.TgZ(220,"p"),r._uU(221," If the disclaimer of warranty and limitation of liability provided above cannot be given local legal effect according to their terms, reviewing courts shall apply local law that most closely approximates an absolute waiver of all civil liability in connection with the Program, unless a warranty or assumption of liability accompanies a copy of the Program in return for a fee."),r.qZA(),r.TgZ(222,"p"),r._uU(223," END OF TERMS AND CONDITIONS"),r.qZA(),r.TgZ(224,"p"),r._uU(225," How to Apply These Terms to Your New Programs"),r.qZA(),r.TgZ(226,"p"),r._uU(227," If you develop a new program, and you want it to be of the greatest possible use to the public, the best way to achieve this is to make it free software which everyone can redistribute and change under these terms."),r.qZA(),r.TgZ(228,"p"),r._uU(229,' To do so, attach the following notices to the program. It is safest to attach them to the start of each source file to most effectively state the exclusion of warranty; and each file should have at least the "copyright" line and a pointer to where the full notice is found.'),r.qZA(),r.TgZ(230,"p"),r._uU(231),r.qZA(),r.TgZ(232,"p"),r._uU(233," This program is free software: you can redistribute it and/or modify it under the terms of the GNU Affero General Public License as published by the Free Software Foundation, either version 3 of the License, or (at your option) any later version."),r.qZA(),r.TgZ(234,"p"),r._uU(235," This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero General Public License for more details."),r.qZA(),r.TgZ(236,"p"),r._uU(237," You should have received a copy of the GNU Affero General Public License along with this program. If not, see "),r.TgZ(238,"a",5),r._uU(239,"gnu.org/licenses"),r.qZA(),r._uU(240,"."),r.qZA(),r.TgZ(241,"p"),r._uU(242,"Also add information on how to contact you by electronic and paper mail."),r.qZA(),r.TgZ(243,"p"),r._uU(244,' If your software can interact with users remotely through a computer network, you should also make sure that it provides a way for users to get its source. For example, if your program is a web application, its interface could display a "Source" link that leads users to an archive of the code. There are many ways you could offer source, and different solutions will be better for different programs; see section 13 for the specific requirements.'),r.qZA(),r.TgZ(245,"p"),r._uU(246,' You should also get your employer (if you work as a programmer) or school, if any, to sign a "copyright disclaimer" for the program, if necessary. For more information on this, and how to apply and follow the GNU AGPL, see '),r.TgZ(247,"a",5),r._uU(248,"gnu.org/licenses"),r.qZA(),r._uU(249,"."),r.qZA()()(),r.TgZ(250,"div",6)(251,"system-checkbox",7),r.NdJ("ngModelChange",(function(e){return t.spiceinstaller.selectedStep.completed=e})),r._uU(252,"agree to Terms & Conditions"),r.qZA(),r.TgZ(253,"button",8),r.NdJ("click",(function(){return t.spiceinstaller.jumpSubject.next({from:t.selfStep,to:t.selfStep.prev})})),r._uU(254,"back"),r.qZA(),r.TgZ(255,"button",9),r.NdJ("click",(function(){return t.spiceinstaller.jumpSubject.next({from:t.selfStep,to:t.selfStep.next})})),r._uU(256,"next"),r.qZA()()()),2&e&&(r.xp6(231),r.AsE(" one line to give the programs name and a brief idea of what it does Copyright (C) ",t.year," ",t.author,""),r.xp6(20),r.Q6J("ngModel",t.spiceinstaller.selectedStep.completed),r.xp6(4),r.Q6J("disabled",!t.spiceinstaller.selectedStep.completed))},dependencies:[n.JJ,n.On,O.H,N.U],encapsulation:2})}return SpiceInstallerLicence})();function q(e,t){1&e&&(r.TgZ(0,"div",12),r._uU(1,"Input required."),r.qZA())}function E(e,t){1&e&&(r.TgZ(0,"div",12),r._uU(1,"Input required."),r.qZA())}function Y(e,t){1&e&&(r.TgZ(0,"div",12),r._uU(1,"Input required."),r.qZA())}const D=function(e){return{"slds-has-error":e}};let U=(()=>{class SpiceinstallerMySQLi{spiceinstaller;selfStep;hostNameCondition;userNameCondition;dbNameCondition;constructor(e){this.spiceinstaller=e,this.spiceinstaller.db_port||(this.spiceinstaller.db_port="3306"),this.spiceinstaller.collation||(this.spiceinstaller.collation="utf8mb4_general_ci"),this.spiceinstaller.db_name||(this.spiceinstaller.db_name=this.spiceinstaller.systemname.toLowerCase().replace(/\s/g,""))}static ɵfac=function(e){return new(e||SpiceinstallerMySQLi)(r.Y36(o.f))};static ɵcmp=r.Xpm({type:SpiceinstallerMySQLi,selectors:[["spice-installer-mysqli"]],inputs:{selfStep:"selfStep",hostNameCondition:"hostNameCondition",userNameCondition:"userNameCondition",dbNameCondition:"dbNameCondition"},decls:46,vars:18,consts:[[1,"slds-form-element","slds-p-vertical--small",3,"ngClass"],[1,"slds-form-element__label"],[1,"slds-required"],[1,"slds-form-element__control"],["type","text","system-trim-input","",1,"slds-input",3,"ngModel","ngModelChange","change"],["class","slds-form-element__help",4,"ngIf"],[1,"slds-form-element","slds-p-vertical--small"],["type","password","system-trim-input","",1,"slds-input",3,"ngModel","ngModelChange","change"],[1,"slds-select_container"],[1,"slds-select",3,"ngModel","ngModelChange"],["value","utf8mb4_general_ci"],["value","utf8_general_ci"],[1,"slds-form-element__help"]],template:function(e,t){1&e&&(r.TgZ(0,"div",0)(1,"label",1)(2,"abbr",2),r._uU(3,"*"),r.qZA(),r._uU(4,"Host Name"),r.qZA(),r.TgZ(5,"div",3)(6,"input",4),r.NdJ("ngModelChange",(function(e){return t.spiceinstaller.db_host_name=e}))("change",(function(){return t.selfStep.completed=!1})),r.qZA(),r.YNc(7,q,2,0,"div",5),r.qZA()(),r.TgZ(8,"div",0)(9,"label",1)(10,"abbr",2),r._uU(11,"*"),r.qZA(),r._uU(12,"Administrator User Name"),r.qZA(),r.TgZ(13,"div",3)(14,"input",4),r.NdJ("ngModelChange",(function(e){return t.spiceinstaller.db_user_name=e}))("change",(function(){return t.selfStep.completed=!1})),r.qZA(),r.YNc(15,E,2,0,"div",5),r.qZA()(),r.TgZ(16,"div",6)(17,"label",1),r._UZ(18,"abbr",2),r._uU(19,"Administrator Password"),r.qZA(),r.TgZ(20,"div",3)(21,"input",7),r.NdJ("ngModelChange",(function(e){return t.spiceinstaller.db_password=e}))("change",(function(){return t.selfStep.completed=!1})),r.qZA()()(),r.TgZ(22,"div",6)(23,"label",1),r._UZ(24,"abbr",2),r._uU(25,"Port"),r.qZA(),r.TgZ(26,"div",3)(27,"input",4),r.NdJ("ngModelChange",(function(e){return t.spiceinstaller.db_port=e}))("change",(function(){return t.selfStep.completed=!1})),r.qZA()()(),r.TgZ(28,"div",0)(29,"label",1)(30,"abbr",2),r._uU(31,"*"),r.qZA(),r._uU(32,"Database Name"),r.qZA(),r.TgZ(33,"div",3)(34,"input",4),r.NdJ("ngModelChange",(function(e){return t.spiceinstaller.db_name=e}))("change",(function(){return t.selfStep.completed=!1})),r.qZA(),r.YNc(35,Y,2,0,"div",5),r.qZA()(),r.TgZ(36,"div",6)(37,"label",1),r._uU(38,"Collation"),r.qZA(),r.TgZ(39,"div",3)(40,"div",8)(41,"select",9),r.NdJ("ngModelChange",(function(e){return t.spiceinstaller.collation=e})),r.TgZ(42,"option",10),r._uU(43,"utf8mb4"),r.qZA(),r.TgZ(44,"option",11),r._uU(45,"utf8"),r.qZA()()()()()),2&e&&(r.Q6J("ngClass",r.VKq(12,D,!t.hostNameCondition)),r.xp6(6),r.Q6J("ngModel",t.spiceinstaller.db_host_name),r.xp6(1),r.Q6J("ngIf",!t.hostNameCondition),r.xp6(1),r.Q6J("ngClass",r.VKq(14,D,!t.userNameCondition)),r.xp6(6),r.Q6J("ngModel",t.spiceinstaller.db_user_name),r.xp6(1),r.Q6J("ngIf",!t.userNameCondition),r.xp6(6),r.Q6J("ngModel",t.spiceinstaller.db_password),r.xp6(6),r.Q6J("ngModel",t.spiceinstaller.db_port),r.xp6(1),r.Q6J("ngClass",r.VKq(16,D,!t.dbNameCondition)),r.xp6(6),r.Q6J("ngModel",t.spiceinstaller.db_name),r.xp6(1),r.Q6J("ngIf",!t.dbNameCondition),r.xp6(6),r.Q6J("ngModel",t.spiceinstaller.collation))},dependencies:[i.mk,i.O5,n.YN,n.Kr,n.Fj,n.EJ,n.JJ,n.On,Z.t],encapsulation:2})}return SpiceinstallerMySQLi})();function Q(e,t){1&e&&(r.TgZ(0,"div",8),r._uU(1,"Input required."),r.qZA())}function R(e,t){1&e&&(r.TgZ(0,"div",8),r._uU(1,"Input required."),r.qZA())}function j(e,t){1&e&&(r.TgZ(0,"div",8),r._uU(1,"Input required."),r.qZA())}const B=function(e){return{"slds-has-error":e}};let G=(()=>{class SpiceinstallerPostgreSQL{spiceinstaller;selfStep;hostNameCondition;userNameCondition;dbNameCondition;constructor(e){this.spiceinstaller=e}static ɵfac=function(e){return new(e||SpiceinstallerPostgreSQL)(r.Y36(o.f))};static ɵcmp=r.Xpm({type:SpiceinstallerPostgreSQL,selectors:[["spice-installer-pgsql"]],inputs:{selfStep:"selfStep",hostNameCondition:"hostNameCondition",userNameCondition:"userNameCondition",dbNameCondition:"dbNameCondition"},decls:50,vars:19,consts:[[1,"slds-form-element","slds-p-vertical--small",3,"ngClass"],[1,"slds-form-element__label"],[1,"slds-required"],[1,"slds-form-element__control"],["type","text","system-trim-input","",1,"slds-input",3,"ngModel","ngModelChange","change"],["class","slds-form-element__help",4,"ngIf"],[1,"slds-form-element","slds-p-vertical--small"],["type","password","system-trim-input","",1,"slds-input",3,"ngModel","ngModelChange","change"],[1,"slds-form-element__help"]],template:function(e,t){1&e&&(r.TgZ(0,"div",0)(1,"label",1)(2,"abbr",2),r._uU(3,"*"),r.qZA(),r._uU(4,"Host Name"),r.qZA(),r.TgZ(5,"div",3)(6,"input",4),r.NdJ("ngModelChange",(function(e){return t.spiceinstaller.db_host_name=e}))("change",(function(){return t.selfStep.completed=!1})),r.qZA(),r.YNc(7,Q,2,0,"div",5),r.qZA()(),r.TgZ(8,"div",0)(9,"label",1)(10,"abbr",2),r._uU(11,"*"),r.qZA(),r._uU(12,"Administrator User Name"),r.qZA(),r.TgZ(13,"div",3)(14,"input",4),r.NdJ("ngModelChange",(function(e){return t.spiceinstaller.db_user_name=e}))("change",(function(){return t.selfStep.completed=!1})),r.qZA(),r.YNc(15,R,2,0,"div",5),r.qZA()(),r.TgZ(16,"div",6)(17,"label",1),r._UZ(18,"abbr",2),r._uU(19,"Administrator Password"),r.qZA(),r.TgZ(20,"div",3)(21,"input",7),r.NdJ("ngModelChange",(function(e){return t.spiceinstaller.db_password=e}))("change",(function(){return t.selfStep.completed=!1})),r.qZA()()(),r.TgZ(22,"div",6)(23,"label",1),r._UZ(24,"abbr",2),r._uU(25,"Port"),r.qZA(),r.TgZ(26,"div",3)(27,"input",4),r.NdJ("ngModelChange",(function(e){return t.spiceinstaller.db_port=e}))("change",(function(){return t.selfStep.completed=!1})),r.qZA()()(),r.TgZ(28,"div",0)(29,"label",1)(30,"abbr",2),r._uU(31,"*"),r.qZA(),r._uU(32,"Database Name"),r.qZA(),r.TgZ(33,"div",3)(34,"input",4),r.NdJ("ngModelChange",(function(e){return t.spiceinstaller.db_name=e}))("change",(function(){return t.selfStep.completed=!1})),r.qZA(),r.YNc(35,j,2,0,"div",5),r.qZA()(),r.TgZ(36,"div",6)(37,"label",1)(38,"abbr",2),r._uU(39,"*"),r.qZA(),r._uU(40,"Collation"),r.qZA(),r.TgZ(41,"div",3)(42,"input",4),r.NdJ("ngModelChange",(function(e){return t.spiceinstaller.lc_collate=e}))("change",(function(){return t.selfStep.completed=!1})),r.qZA()()(),r.TgZ(43,"div",6)(44,"label",1)(45,"abbr",2),r._uU(46,"*"),r.qZA(),r._uU(47,"Character Classification"),r.qZA(),r.TgZ(48,"div",3)(49,"input",4),r.NdJ("ngModelChange",(function(e){return t.spiceinstaller.lc_ctype=e}))("change",(function(){return t.selfStep.completed=!1})),r.qZA()()()),2&e&&(r.Q6J("ngClass",r.VKq(13,B,!t.hostNameCondition)),r.xp6(6),r.Q6J("ngModel",t.spiceinstaller.db_host_name),r.xp6(1),r.Q6J("ngIf",!t.hostNameCondition),r.xp6(1),r.Q6J("ngClass",r.VKq(15,B,!t.userNameCondition)),r.xp6(6),r.Q6J("ngModel",t.spiceinstaller.db_user_name),r.xp6(1),r.Q6J("ngIf",!t.userNameCondition),r.xp6(6),r.Q6J("ngModel",t.spiceinstaller.db_password),r.xp6(6),r.Q6J("ngModel",t.spiceinstaller.db_port),r.xp6(1),r.Q6J("ngClass",r.VKq(17,B,!t.dbNameCondition)),r.xp6(6),r.Q6J("ngModel",t.spiceinstaller.db_name),r.xp6(1),r.Q6J("ngIf",!t.dbNameCondition),r.xp6(7),r.Q6J("ngModel",t.spiceinstaller.lc_collate),r.xp6(7),r.Q6J("ngModel",t.spiceinstaller.lc_ctype))},dependencies:[i.mk,i.O5,n.Fj,n.JJ,n.On,Z.t],encapsulation:2})}return SpiceinstallerPostgreSQL})();function P(e,t){1&e&&(r.TgZ(0,"div",12),r._uU(1,"Input required."),r.qZA())}function H(e,t){1&e&&(r.TgZ(0,"div",12),r._uU(1,"Input required."),r.qZA())}function z(e,t){1&e&&(r.TgZ(0,"div",12),r._uU(1,"Input required."),r.qZA())}const V=function(e){return{"slds-has-error":e}};let $=(()=>{class SpiceinstallerOCI8{spiceinstaller;selfStep;hostNameCondition;userNameCondition;dbNameCondition;constructor(e){this.spiceinstaller=e}static ɵfac=function(e){return new(e||SpiceinstallerOCI8)(r.Y36(o.f))};static ɵcmp=r.Xpm({type:SpiceinstallerOCI8,selectors:[["spice-installer-oci8"]],inputs:{selfStep:"selfStep",hostNameCondition:"hostNameCondition",userNameCondition:"userNameCondition",dbNameCondition:"dbNameCondition"},decls:53,vars:19,consts:[[1,"slds-form-element","slds-p-vertical--small",3,"ngClass"],[1,"slds-form-element__label"],[1,"slds-required"],[1,"slds-form-element__control"],["type","text","system-trim-input","",1,"slds-input",3,"ngModel","ngModelChange","change"],["class","slds-form-element__help",4,"ngIf"],[1,"slds-form-element","slds-p-vertical--small"],["type","password","system-trim-input","",1,"slds-input",3,"ngModel","ngModelChange","change"],[1,"slds-select_container"],[1,"slds-select",3,"ngModel","ngModelChange","change"],["value","utf8mb4_general_ci"],["value","utf8_general_ci"],[1,"slds-form-element__help"]],template:function(e,t){1&e&&(r.TgZ(0,"div",0)(1,"label",1)(2,"abbr",2),r._uU(3,"*"),r.qZA(),r._uU(4,"Host Name"),r.qZA(),r.TgZ(5,"div",3)(6,"input",4),r.NdJ("ngModelChange",(function(e){return t.spiceinstaller.db_host_name=e}))("change",(function(){return t.selfStep.completed=!1})),r.qZA(),r.YNc(7,P,2,0,"div",5),r.qZA()(),r.TgZ(8,"div",0)(9,"label",1)(10,"abbr",2),r._uU(11,"*"),r.qZA(),r._uU(12,"Administrator User Name"),r.qZA(),r.TgZ(13,"div",3)(14,"input",4),r.NdJ("ngModelChange",(function(e){return t.spiceinstaller.db_user_name=e}))("change",(function(){return t.selfStep.completed=!1})),r.qZA(),r.YNc(15,H,2,0,"div",5),r.qZA()(),r.TgZ(16,"div",6)(17,"label",1),r._UZ(18,"abbr",2),r._uU(19,"Administrator Password"),r.qZA(),r.TgZ(20,"div",3)(21,"input",7),r.NdJ("ngModelChange",(function(e){return t.spiceinstaller.db_password=e}))("change",(function(){return t.selfStep.completed=!1})),r.qZA()()(),r.TgZ(22,"div",6)(23,"label",1),r._UZ(24,"abbr",2),r._uU(25,"Port"),r.qZA(),r.TgZ(26,"div",3)(27,"input",4),r.NdJ("ngModelChange",(function(e){return t.spiceinstaller.db_port=e}))("change",(function(){return t.selfStep.completed=!1})),r.qZA()()(),r.TgZ(28,"div",0)(29,"label",1)(30,"abbr",2),r._uU(31,"*"),r.qZA(),r._uU(32,"Database Name"),r.qZA(),r.TgZ(33,"div",3)(34,"input",4),r.NdJ("ngModelChange",(function(e){return t.spiceinstaller.db_name=e}))("change",(function(){return t.selfStep.completed=!1})),r.qZA(),r.YNc(35,z,2,0,"div",5),r.qZA()(),r.TgZ(36,"div",6)(37,"label",1)(38,"abbr",2),r._uU(39,"*"),r.qZA(),r._uU(40,"Database Schema"),r.qZA(),r.TgZ(41,"div",3)(42,"input",4),r.NdJ("ngModelChange",(function(e){return t.spiceinstaller.db_schema=e}))("change",(function(){return t.selfStep.completed=!1})),r.qZA()()(),r.TgZ(43,"div",6)(44,"label",1),r._uU(45,"Collation"),r.qZA(),r.TgZ(46,"div",3)(47,"div",8)(48,"select",9),r.NdJ("ngModelChange",(function(e){return t.spiceinstaller.collation=e}))("change",(function(){return t.selfStep.completed=!1})),r.TgZ(49,"option",10),r._uU(50,"utf8mb4"),r.qZA(),r.TgZ(51,"option",11),r._uU(52,"utf8"),r.qZA()()()()()),2&e&&(r.Q6J("ngClass",r.VKq(13,V,!t.hostNameCondition)),r.xp6(6),r.Q6J("ngModel",t.spiceinstaller.db_host_name),r.xp6(1),r.Q6J("ngIf",!t.hostNameCondition),r.xp6(1),r.Q6J("ngClass",r.VKq(15,V,!t.userNameCondition)),r.xp6(6),r.Q6J("ngModel",t.spiceinstaller.db_user_name),r.xp6(1),r.Q6J("ngIf",!t.userNameCondition),r.xp6(6),r.Q6J("ngModel",t.spiceinstaller.db_password),r.xp6(6),r.Q6J("ngModel",t.spiceinstaller.db_port),r.xp6(1),r.Q6J("ngClass",r.VKq(17,V,!t.dbNameCondition)),r.xp6(6),r.Q6J("ngModel",t.spiceinstaller.db_name),r.xp6(1),r.Q6J("ngIf",!t.dbNameCondition),r.xp6(7),r.Q6J("ngModel",t.spiceinstaller.db_schema),r.xp6(6),r.Q6J("ngModel",t.spiceinstaller.collation))},dependencies:[i.mk,i.O5,n.YN,n.Kr,n.Fj,n.EJ,n.JJ,n.On,Z.t],encapsulation:2})}return SpiceinstallerOCI8})();function K(e,t){if(1&e&&(r.TgZ(0,"option",12),r._uU(1),r.qZA()),2&e){const e=t.$implicit;r.s9C("value",e.extension),r.xp6(1),r.Oqu(e.name)}}function X(e,t){if(1&e&&(r.TgZ(0,"div"),r._UZ(1,"spice-installer-mysqli",13),r.qZA()),2&e){const e=r.oxw();r.xp6(1),r.Q6J("selfStep",e.selfStep)("dbNameCondition",e.dbNameCondition)("hostNameCondition",e.hostNameCondition)("userNameCondition",e.userNameCondition)}}function W(e,t){if(1&e&&(r.TgZ(0,"div"),r._UZ(1,"spice-installer-mysqli",13),r.qZA()),2&e){const e=r.oxw();r.xp6(1),r.Q6J("selfStep",e.selfStep)("dbNameCondition",e.dbNameCondition)("hostNameCondition",e.hostNameCondition)("userNameCondition",e.userNameCondition)}}function ee(e,t){if(1&e&&(r.TgZ(0,"div"),r._UZ(1,"spice-installer-pgsql",13),r.qZA()),2&e){const e=r.oxw();r.xp6(1),r.Q6J("selfStep",e.selfStep)("dbNameCondition",e.dbNameCondition)("hostNameCondition",e.hostNameCondition)("userNameCondition",e.userNameCondition)}}function te(e,t){if(1&e&&(r.TgZ(0,"div"),r._UZ(1,"spice-installer-oci8",13),r.qZA()),2&e){const e=r.oxw();r.xp6(1),r.Q6J("selfStep",e.selfStep)("dbNameCondition",e.dbNameCondition)("hostNameCondition",e.hostNameCondition)("userNameCondition",e.userNameCondition)}}let se=(()=>{class SpiceInstallerDatabase{toast;http;spiceinstaller;selfStep;hostNameCondition=!0;userNameCondition=!0;dbNameCondition=!0;loading=!1;charset="";constructor(e,t,s){this.toast=e,this.http=t,this.spiceinstaller=s,1==s.dbdrivers.length&&(s.db_type=s.dbdrivers[0].extension),this.spiceinstaller.jumpSubject.subscribe((e=>{e.from===this.selfStep&&(this.selfStep.completed||e.to?.pos<this.selfStep.pos?this.spiceinstaller.jump(e.to):this.checkDB())}))}checkDB(){switch(this.spiceinstaller.db_type){case"mysql":case"mysqli":this.spiceinstaller.db_host_instance="SQLEXPRESS",this.spiceinstaller.db_manager="MysqliManager";break;case"pgsql":this.spiceinstaller.db_manager="PostgreSQLManager";break;case"mssql":this.spiceinstaller.db_manager="SqlsrvManager";break;case"oci8":this.spiceinstaller.db_host_instance="SQLEXPRESS",this.spiceinstaller.db_manager="OCI8Manager"}switch(this.spiceinstaller.collation){case"utf8mb4_general_ci":this.charset="utf8mb4";break;case"utf8_general_ci":this.charset="utf8"}let e={db_host_name:this.spiceinstaller.db_host_name,db_host_instance:this.spiceinstaller.db_host_instance,db_user_name:this.spiceinstaller.db_user_name,db_password:this.spiceinstaller.db_password,db_name:this.spiceinstaller.db_name,db_type:this.spiceinstaller.db_type,db_port:this.spiceinstaller.db_port,db_manager:this.spiceinstaller.db_manager,db_schema:this.spiceinstaller.db_schema,lc_collate:this.spiceinstaller.lc_collate,lc_ctype:this.spiceinstaller.lc_ctype};this.hostNameCondition=this.spiceinstaller.db_host_name.length>0,this.userNameCondition=this.spiceinstaller.db_user_name.length>0,this.dbNameCondition=this.spiceinstaller.db_name.length>0,this.hostNameCondition&&this.userNameCondition&&this.dbNameCondition&&(this.loading=!0,this.http.post(`${this.spiceinstaller.systemurl}/install/checkdb`,e).subscribe((e=>{this.loading=!1;let t=e;if(t.success)this.spiceinstaller.configObject.database=t.config,this.spiceinstaller.configObject.dboptions={persistance:this.spiceinstaller.persistent,autofree:this.spiceinstaller.autofree,debug:this.spiceinstaller.debug,ssl:this.spiceinstaller.ssl,collation:this.spiceinstaller.collation,charset:this.charset},this.selfStep.completed=!0,this.spiceinstaller.jumpSubject.next({from:this.selfStep,to:this.selfStep.next});else for(let e in t.errors)this.toast.sendAlert("Error: "+t.errors[e],"error")}),(e=>{if(this.loading=!1,500===e.status)this.toast.sendAlert(e.message,"error")})))}static ɵfac=function(e){return new(e||SpiceInstallerDatabase)(r.Y36(_.A),r.Y36(v.eN),r.Y36(o.f))};static ɵcmp=r.Xpm({type:SpiceInstallerDatabase,selectors:[["spice-installer-database"]],inputs:{selfStep:"selfStep"},decls:19,vars:8,consts:[[1,"slds-p-horizontal_medium",3,"system-overlay-loading-spinner"],[1,"slds-text-heading--medium","slds-m-bottom_medium"],[1,"slds-form-element","slds-p-vertical--small"],[1,"slds-form-element__label"],[1,"slds-form-element__control"],[1,"slds-select_container"],[1,"slds-select",3,"disabled","ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[4,"ngIf"],[1,"slds-p-vertical--small","slds-text-align--right"],[1,"slds-button","slds-button--neutral","slds-col_bump-left",3,"click"],[1,"slds-button","slds-button--brand",3,"click"],[3,"value"],[3,"selfStep","dbNameCondition","hostNameCondition","userNameCondition"]],template:function(e,t){1&e&&(r.TgZ(0,"div",0)(1,"h2",1),r._uU(2," Database Configuration "),r.qZA(),r.TgZ(3,"div",2)(4,"label",3),r._uU(5,"Database Type"),r.qZA(),r.TgZ(6,"div",4)(7,"div",5)(8,"select",6),r.NdJ("ngModelChange",(function(e){return t.spiceinstaller.db_type=e})),r.YNc(9,K,2,2,"option",7),r.qZA()()()(),r.YNc(10,X,2,4,"div",8),r.YNc(11,W,2,4,"div",8),r.YNc(12,ee,2,4,"div",8),r.YNc(13,te,2,4,"div",8),r.TgZ(14,"div",9)(15,"button",10),r.NdJ("click",(function(){return t.spiceinstaller.jumpSubject.next({from:t.selfStep,to:t.selfStep.prev})})),r._uU(16,"back"),r.qZA(),r.TgZ(17,"button",11),r.NdJ("click",(function(){return t.checkDB()})),r._uU(18,"next"),r.qZA()()()),2&e&&(r.Q6J("system-overlay-loading-spinner",t.loading),r.xp6(8),r.Q6J("disabled",t.spiceinstaller.dbdrivers.length<2)("ngModel",t.spiceinstaller.db_type),r.xp6(1),r.Q6J("ngForOf",t.spiceinstaller.dbdrivers),r.xp6(1),r.Q6J("ngIf","mysql"==t.spiceinstaller.db_type),r.xp6(1),r.Q6J("ngIf","mssql"==t.spiceinstaller.db_type),r.xp6(1),r.Q6J("ngIf","pgsql"==t.spiceinstaller.db_type),r.xp6(1),r.Q6J("ngIf","oci8"==t.spiceinstaller.db_type))},dependencies:[i.sg,i.O5,n.YN,n.Kr,n.EJ,n.JJ,n.On,L._,U,G,$],encapsulation:2})}return SpiceInstallerDatabase})();function ie(e,t){1&e&&(r.TgZ(0,"div",15),r._uU(1,"Input required."),r.qZA())}function ne(e,t){1&e&&(r.TgZ(0,"div",15),r._uU(1,"Input required."),r.qZA())}function le(e,t){1&e&&(r.TgZ(0,"div",15),r._uU(1,"Input required."),r.qZA())}const oe=function(e){return{"slds-has-error":e}};let ae=(()=>{class SpiceInstallerFTS{toast;http;spiceinstaller;selfStep;serverCondition=!0;portCondition=!0;prefixCondition=!0;loading=!1;protocolOptions=[{type:"http",name:"HTTP"},{type:"https",name:"HTTPS"}];constructor(e,t,s){this.toast=e,this.http=t,this.spiceinstaller=s,this.spiceinstaller.prefix||(this.spiceinstaller.prefix=this.spiceinstaller.db_name+"_"),this.spiceinstaller.jumpSubject.subscribe((e=>{e.from===this.selfStep&&(this.selfStep.completed||e.to?.pos<this.selfStep.pos?this.spiceinstaller.jump(e.to):this.checkFTS())}))}checkFTS(){let e={server:this.spiceinstaller.server,port:this.spiceinstaller.port,prefix:this.spiceinstaller.prefix,username:this.spiceinstaller.elasticUser,password:this.spiceinstaller.elasticpassword,https:this.spiceinstaller.elastichttps,sslverify:this.spiceinstaller.elasticSSLVerify,loglevel:1,schedulerpackagesize:2500,protocol:this.spiceinstaller.transferProtocol};this.serverCondition=this.spiceinstaller.server.length>0,this.portCondition=this.spiceinstaller.port.length>0,this.prefixCondition=this.spiceinstaller.prefix.length>0,this.serverCondition&&this.portCondition&&this.prefixCondition&&(this.loading=!0,this.http.post(`${this.spiceinstaller.systemurl}/install/checkfts`,e).subscribe((e=>{this.loading=!1;let t=e;if(t.success)this.selfStep.completed=!0,this.spiceinstaller.configObject.fts=t.config,this.spiceinstaller.jumpSubject.next({from:this.selfStep,to:this.selfStep.next});else for(let e in t.errors)this.toast.sendAlert("Error with: "+t.errors[e],"error")})))}static ɵfac=function(e){return new(e||SpiceInstallerFTS)(r.Y36(_.A),r.Y36(v.eN),r.Y36(o.f))};static ɵcmp=r.Xpm({type:SpiceInstallerFTS,selectors:[["spice-installer-fts"]],inputs:{selfStep:"selfStep"},decls:50,vars:20,consts:[[1,"slds-p-horizontal_medium",3,"system-overlay-loading-spinner"],[1,"slds-text-heading--medium","slds-m-bottom_medium"],[1,"slds-form-element","slds-p-vertical--small"],[1,"slds-form-element__control"],[3,"ngModel","ngModelChange"],[3,"disabled","ngModel","ngModelChange"],[1,"slds-form-element","slds-p-vertical--small",3,"ngClass"],[1,"slds-form-element__label"],[1,"slds-required"],["type","text","system-trim-input","",1,"slds-input",3,"ngModel","ngModelChange"],["class","slds-form-element__help",4,"ngIf"],["type","password","system-trim-input","",1,"slds-input",3,"ngModel","ngModelChange"],[1,"slds-p-vertical--small","slds-text-align--right"],[1,"slds-button","slds-button--neutral","slds-col_bump-left",3,"click"],[1,"slds-button","slds-button--brand",3,"click"],[1,"slds-form-element__help"]],template:function(e,t){1&e&&(r.TgZ(0,"div",0)(1,"h2",1),r._uU(2," FTS Configuration "),r.qZA(),r.TgZ(3,"div",2)(4,"div",3)(5,"system-checkbox",4),r.NdJ("ngModelChange",(function(e){return t.spiceinstaller.elastichttps=e})),r._uU(6,"use https"),r.qZA()()(),r.TgZ(7,"div",2)(8,"div",3)(9,"system-checkbox",5),r.NdJ("ngModelChange",(function(e){return t.spiceinstaller.elasticSSLVerify=e})),r._uU(10,"SSL verify"),r.qZA()()(),r.TgZ(11,"div",6)(12,"label",7)(13,"abbr",8),r._uU(14,"*"),r.qZA(),r._uU(15,"Server"),r.qZA(),r.TgZ(16,"div",3)(17,"input",9),r.NdJ("ngModelChange",(function(e){return t.spiceinstaller.server=e})),r.qZA(),r.YNc(18,ie,2,0,"div",10),r.qZA()(),r.TgZ(19,"div",6)(20,"label",7)(21,"abbr",8),r._uU(22,"*"),r.qZA(),r._uU(23,"Port"),r.qZA(),r.TgZ(24,"div",3)(25,"input",9),r.NdJ("ngModelChange",(function(e){return t.spiceinstaller.port=e})),r.qZA(),r.YNc(26,ne,2,0,"div",10),r.qZA()(),r.TgZ(27,"div",6)(28,"label",7)(29,"abbr",8),r._uU(30,"*"),r.qZA(),r._uU(31,"Prefix"),r.qZA(),r.TgZ(32,"div",3)(33,"input",9),r.NdJ("ngModelChange",(function(e){return t.spiceinstaller.prefix=e})),r.qZA(),r.YNc(34,le,2,0,"div",10),r.qZA()(),r.TgZ(35,"div",2)(36,"label",7),r._uU(37,"User"),r.qZA(),r.TgZ(38,"div",3)(39,"input",9),r.NdJ("ngModelChange",(function(e){return t.spiceinstaller.elasticUser=e})),r.qZA()()(),r.TgZ(40,"div",2)(41,"label",7),r._uU(42,"Password"),r.qZA(),r.TgZ(43,"div",3)(44,"input",11),r.NdJ("ngModelChange",(function(e){return t.spiceinstaller.elasticpassword=e})),r.qZA()()(),r.TgZ(45,"div",12)(46,"button",13),r.NdJ("click",(function(){return t.spiceinstaller.jumpSubject.next({from:t.selfStep,to:t.selfStep.prev})})),r._uU(47,"back"),r.qZA(),r.TgZ(48,"button",14),r.NdJ("click",(function(){return t.checkFTS()})),r._uU(49,"next"),r.qZA()()()),2&e&&(r.Q6J("system-overlay-loading-spinner",t.loading),r.xp6(5),r.Q6J("ngModel",t.spiceinstaller.elastichttps),r.xp6(4),r.Q6J("ngModel",t.spiceinstaller.elasticSSLVerify),r.xp6(2),r.Q6J("ngClass",r.VKq(14,oe,!t.serverCondition)),r.xp6(6),r.Q6J("ngModel",t.spiceinstaller.server),r.xp6(1),r.Q6J("ngIf",!t.serverCondition),r.xp6(1),r.Q6J("ngClass",r.VKq(16,oe,!t.portCondition)),r.xp6(6),r.Q6J("ngModel",t.spiceinstaller.port),r.xp6(1),r.Q6J("ngIf",!t.portCondition),r.xp6(1),r.Q6J("ngClass",r.VKq(18,oe,!t.prefixCondition)),r.xp6(6),r.Q6J("ngModel",t.spiceinstaller.prefix),r.xp6(1),r.Q6J("ngIf",!t.prefixCondition),r.xp6(5),r.Q6J("ngModel",t.spiceinstaller.elasticUser),r.xp6(5),r.Q6J("ngModel",t.spiceinstaller.elasticpassword))},dependencies:[i.mk,i.O5,n.Fj,n.JJ,n.On,Z.t,L._,N.U],encapsulation:2})}return SpiceInstallerFTS})();function de(e,t){1&e&&(r.TgZ(0,"div",14),r._uU(1,"Input required."),r.qZA())}function re(e,t){1&e&&(r.TgZ(0,"div",14),r._uU(1,"Password guideline: One uppercase character, one lowercase character, one digit, 6 characters."),r.qZA())}function ce(e,t){1&e&&(r.TgZ(0,"div",14),r._uU(1,"Repeated Password doesn´t match."),r.qZA())}function ue(e,t){1&e&&(r.TgZ(0,"div",14),r._uU(1,"Input required."),r.qZA())}function me(e,t){1&e&&(r.TgZ(0,"div",14),r._uU(1,"Input required."),r.qZA())}const ge=function(e){return{"slds-has-error":e}};let he=(()=>{class SpiceInstallerCredentials{spiceinstaller;selfStep;usernameCondition=!0;passwordCondition=!0;rpPasswordCondition=!0;surnameCondition=!0;emailCondition=!0;pwRegexp=new RegExp("(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.{6,})");constructor(e){this.spiceinstaller=e,this.spiceinstaller.jumpSubject.subscribe((e=>{e.from===this.selfStep&&(this.selfStep.completed||e.to?.pos<this.selfStep.pos?this.spiceinstaller.jump(e.to):this.saveUser())}))}saveUser(){this.usernameCondition=this.spiceinstaller.username.length>0,this.passwordCondition=this.spiceinstaller.password.length>0&&this.pwRegexp.test(this.spiceinstaller.password),this.rpPasswordCondition=this.spiceinstaller.rpPassword==this.spiceinstaller.password,this.surnameCondition=this.spiceinstaller.surname.length>0,this.emailCondition=this.spiceinstaller.email.length>0,this.usernameCondition&&this.passwordCondition&&this.rpPasswordCondition&&this.surnameCondition&&this.emailCondition&&(this.spiceinstaller.configObject.credentials={username:this.spiceinstaller.username,password:this.spiceinstaller.password,firstname:this.spiceinstaller.firstname,surname:this.spiceinstaller.surname,email:this.spiceinstaller.email},this.spiceinstaller.selectedStep.completed=!0,this.spiceinstaller.jumpSubject.next({from:this.selfStep,to:this.selfStep.next}))}static ɵfac=function(e){return new(e||SpiceInstallerCredentials)(r.Y36(o.f))};static ɵcmp=r.Xpm({type:SpiceInstallerCredentials,selectors:[["spice-installer-credentials"]],inputs:{selfStep:"selfStep"},decls:54,vars:26,consts:[[1,"slds-p-horizontal--medium"],[1,"slds-text-heading--medium","slds-m-bottom_medium"],[1,"slds-form-element","slds-p-vertical--small",3,"ngClass"],[1,"slds-form-element__label"],[1,"slds-required"],[1,"slds-form-element__control"],["type","text","system-trim-input","",1,"slds-input",3,"ngModel","ngModelChange","change"],["class","slds-form-element__help",4,"ngIf"],["type","password","system-trim-input","",1,"slds-input",3,"ngModel","ngModelChange","change"],["type","password","system-trim-input","",1,"slds-input",3,"ngModel","ngModelChange"],[1,"slds-form-element","slds-p-vertical--small"],[1,"slds-p-vertical--small","slds-text-align--right"],[1,"slds-button","slds-button--neutral","slds-col_bump-left",3,"click"],[1,"slds-button","slds-button--brand",3,"click"],[1,"slds-form-element__help"]],template:function(e,t){1&e&&(r.TgZ(0,"div",0)(1,"h2",1),r._uU(2," CRM User Credentials "),r.qZA(),r.TgZ(3,"div",2)(4,"label",3)(5,"abbr",4),r._uU(6,"*"),r.qZA(),r._uU(7,"User Name"),r.qZA(),r.TgZ(8,"div",5)(9,"input",6),r.NdJ("ngModelChange",(function(e){return t.spiceinstaller.username=e}))("change",(function(){return t.selfStep.completed=!1})),r.qZA(),r.YNc(10,de,2,0,"div",7),r.qZA()(),r.TgZ(11,"div",2)(12,"label",3)(13,"abbr",4),r._uU(14,"*"),r.qZA(),r._uU(15,"Password"),r.qZA(),r.TgZ(16,"div",5)(17,"input",8),r.NdJ("ngModelChange",(function(e){return t.spiceinstaller.password=e}))("change",(function(){return t.selfStep.completed=!1,t.spiceinstaller.rpPassword=""})),r.qZA(),r.YNc(18,re,2,0,"div",7),r.qZA()(),r.TgZ(19,"div",2)(20,"label",3)(21,"abbr",4),r._uU(22,"*"),r.qZA(),r._uU(23,"Repeat Password"),r.qZA(),r.TgZ(24,"div",5)(25,"input",9),r.NdJ("ngModelChange",(function(e){return t.spiceinstaller.rpPassword=e})),r.qZA(),r.YNc(26,ce,2,0,"div",7),r.qZA()(),r.TgZ(27,"div",10)(28,"label",3),r._UZ(29,"abbr",4),r._uU(30,"First Name"),r.qZA(),r.TgZ(31,"div",5)(32,"input",6),r.NdJ("ngModelChange",(function(e){return t.spiceinstaller.firstname=e}))("change",(function(){return t.selfStep.completed=!1})),r.qZA()()(),r.TgZ(33,"div",2)(34,"label",3)(35,"abbr",4),r._uU(36,"*"),r.qZA(),r._uU(37,"Last Name"),r.qZA(),r.TgZ(38,"div",5)(39,"input",6),r.NdJ("ngModelChange",(function(e){return t.spiceinstaller.surname=e}))("change",(function(){return t.selfStep.completed=!1})),r.qZA(),r.YNc(40,ue,2,0,"div",7),r.qZA()(),r.TgZ(41,"div",2)(42,"label",3)(43,"abbr",4),r._uU(44,"*"),r.qZA(),r._uU(45,"Email"),r.qZA(),r.TgZ(46,"div",5)(47,"input",6),r.NdJ("ngModelChange",(function(e){return t.spiceinstaller.email=e}))("change",(function(){return t.selfStep.completed=!1})),r.qZA(),r.YNc(48,me,2,0,"div",7),r.qZA()(),r.TgZ(49,"div",11)(50,"button",12),r.NdJ("click",(function(){return t.spiceinstaller.jumpSubject.next({from:t.selfStep,to:t.selfStep.prev})})),r._uU(51,"back"),r.qZA(),r.TgZ(52,"button",13),r.NdJ("click",(function(){return t.saveUser()})),r._uU(53,"next"),r.qZA()()()),2&e&&(r.xp6(3),r.Q6J("ngClass",r.VKq(16,ge,!t.usernameCondition)),r.xp6(6),r.Q6J("ngModel",t.spiceinstaller.username),r.xp6(1),r.Q6J("ngIf",!t.usernameCondition),r.xp6(1),r.Q6J("ngClass",r.VKq(18,ge,!t.passwordCondition)),r.xp6(6),r.Q6J("ngModel",t.spiceinstaller.password),r.xp6(1),r.Q6J("ngIf",!t.passwordCondition),r.xp6(1),r.Q6J("ngClass",r.VKq(20,ge,!t.rpPasswordCondition)),r.xp6(6),r.Q6J("ngModel",t.spiceinstaller.rpPassword),r.xp6(1),r.Q6J("ngIf",!t.rpPasswordCondition),r.xp6(6),r.Q6J("ngModel",t.spiceinstaller.firstname),r.xp6(1),r.Q6J("ngClass",r.VKq(22,ge,!t.surnameCondition)),r.xp6(6),r.Q6J("ngModel",t.spiceinstaller.surname),r.xp6(1),r.Q6J("ngIf",!t.surnameCondition),r.xp6(1),r.Q6J("ngClass",r.VKq(24,ge,!t.emailCondition)),r.xp6(6),r.Q6J("ngModel",t.spiceinstaller.email),r.xp6(1),r.Q6J("ngIf",!t.emailCondition))},dependencies:[i.mk,i.O5,n.Fj,n.JJ,n.On,Z.t],encapsulation:2})}return SpiceInstallerCredentials})();var pe=s(46449);function fe(e,t){if(1&e&&(r.TgZ(0,"option",21),r._uU(1),r.qZA()),2&e){const e=t.$implicit;r.Q6J("ngValue",e.language_code),r.xp6(1),r.Oqu(e.language_name)}}function be(e,t){if(1&e&&(r.TgZ(0,"option",22),r._uU(1),r.qZA()),2&e){const e=t.$implicit;r.Q6J("value",e.value),r.xp6(1),r.hij(" ",e.name," ")}}function _e(e,t){if(1&e&&(r.TgZ(0,"option",22),r._uU(1),r.qZA()),2&e){const e=t.$implicit;r.Q6J("value",e.value),r.xp6(1),r.hij(" ",e.name," ")}}function ve(e,t){if(1&e&&(r.TgZ(0,"option",23),r._uU(1),r.qZA()),2&e){const e=t.$implicit;r.Q6J("value",e)("selected",2==e),r.xp6(1),r.hij(" ",e," ")}}function ye(e,t){if(1&e&&(r.TgZ(0,"option",21),r._uU(1),r.qZA()),2&e){const e=t.$implicit;r.Q6J("ngValue",e),r.xp6(1),r.hij(" ",e.show," ")}}function xe(e,t){if(1&e&&(r.TgZ(0,"option",22),r._uU(1),r.qZA()),2&e){const e=t.$implicit;r.Q6J("value",e.key),r.xp6(1),r.hij(" ",e.value," ")}}function we(e,t){if(1&e&&(r.TgZ(0,"option",22),r._uU(1),r.qZA()),2&e){const e=t.$implicit;r.Q6J("value",e),r.xp6(1),r.hij(" ",e," ")}}function Ze(e,t){if(1&e&&(r.TgZ(0,"option",22),r._uU(1),r.qZA()),2&e){const e=t.$implicit;r.Q6J("value",e),r.xp6(1),r.hij(" ",e," ")}}function Te(e,t){if(1&e&&(r.TgZ(0,"option",22),r._uU(1),r.qZA()),2&e){const e=t.$implicit;r.Q6J("value",e),r.xp6(1),r.hij(" ",e," ")}}function Ce(e,t){if(1&e&&(r.TgZ(0,"option",22),r._uU(1),r.qZA()),2&e){const e=t.$implicit;r.Q6J("value",e),r.xp6(1),r.hij(" ",e," ")}}let ke=(()=>{class SpiceInstallerSetPreferences{toast;http;router;configurationService;backend;spiceinstaller;selfStep;languages=[];loading=!1;currencySignificantDigitsList=[1,2,3,4,5,6];thousandDelimiterList=[",","."];now=moment();timeFormatList;dateFormatList;currencyList=[];weekDayStartList=["Sunday","Monday"];weekDaysCountList=[5,6,7];exportDelimiterList=[",",";"];charsetList=["BIG-5","CP1251","CP1252","EUC-CN","EUC-JP","EUC-KR","EUC-TW","ISO-2022-JP","ISO-2022-KR","ISO-8859-1","ISO-8859-2","ISO-8859-3","ISO-8859-4","ISO-8859-5","ISO-8859-6","ISO-8859-7","ISO-8859-8","ISO-8859-9","ISO-8859-10","ISO-8859-13","ISO-8859-14","ISO-8859-15","KOI8-R","KOI8-U","SJIS","UTF-8"];numberDelimitationsList=[{show:"1.000.000,00",num_grp_sep:".",dec_sep:","},{show:"1,000,000.00",num_grp_sep:",",dec_sep:"."},{show:"1 000 000,00",num_grp_sep:" ",dec_sep:","}];get numberDelimitation(){const e=this.numberDelimitationsList.find((e=>e.dec_sep==this.spiceinstaller.configObject.preferences.dec_sep&&e.num_grp_sep==this.spiceinstaller.configObject.preferences.num_grp_sep));return e||void 0}set numberDelimitation(e){this.spiceinstaller.configObject.preferences.dec_sep=e.dec_sep,this.spiceinstaller.configObject.preferences.num_grp_sep=e.num_grp_sep}updateNumberDelimitationsList(){for(let e of this.numberDelimitationsList)e.show="1"+e.num_grp_sep+"000"+e.num_grp_sep+"000"+e.dec_sep+"0".repeat(void 0!==this.spiceinstaller.configObject.preferences.currency_significant_digits?this.spiceinstaller.configObject.preferences.currency_significant_digits:2)}browserLanguages={de:"de_DE",en:"en_us"};constructor(e,t,s,i,n,l){this.toast=e,this.http=t,this.router=s,this.configurationService=i,this.backend=n,this.spiceinstaller=l,this.setDateTimeExamples();let o=navigator.language;this.browserLanguages[o]&&(this.spiceinstaller.configObject.language=this.browserLanguages[o]),this.spiceinstaller.configObject.preferences.timezone=moment.tz.guess(),"de"===o&&this.preSetPreferences(),this.checkReference(),this.http.get(`${this.spiceinstaller.systemurl}/install/getlanguages`).subscribe((e=>{this.languages=e.languages})),this.spiceinstaller.jumpSubject.subscribe((e=>{e.from===this.selfStep&&(this.selfStep.completed||e.to?.pos<this.selfStep.pos?this.spiceinstaller.jump(e.to):this.setPreferences())}))}checkReference(){this.loading=!0,this.http.get(`${this.spiceinstaller.systemurl}/install/checkreference`).subscribe((e=>{this.loading=!1,e||this.toast.sendToast("cannot connect to reference server","error")}))}setPreferences(){this.spiceinstaller.selectedStep.completed=!0,this.spiceinstaller.jumpSubject.next({from:this.selfStep,to:this.selfStep.next})}preSetPreferences(){this.spiceinstaller.configObject.preferences.datef="d.m.Y",this.spiceinstaller.configObject.preferences.timef="H:i",this.spiceinstaller.configObject.preferences.export_charset="UTF-8",this.spiceinstaller.configObject.preferences.currency_significant_digits=2,this.spiceinstaller.configObject.preferences.dec_sep=",",this.spiceinstaller.configObject.preferences.num_grp_sep=".",this.spiceinstaller.configObject.preferences.distance_unit_system="METRIC",this.spiceinstaller.configObject.preferences.week_day_start="Monday",this.spiceinstaller.configObject.preferences.week_days_count=5}setDateTimeExamples(){this.now.format("MM-DD")===this.now.format("DD-MM")&&(this.now=moment(moment().format("YYYY-12-31"))),this.dateFormatList=[{name:this.now.format("YYYY-MM-DD"),value:"Y-m-d"},{name:this.now.format("MM-DD-YYYY"),value:"m-d-Y"},{name:this.now.format("DD-MM-YYYY"),value:"d-m-Y"},{name:this.now.format("Y/MM/DD"),value:"Y/m/d"},{name:this.now.format("MM/DD/YYYY"),value:"m/d/Y"},{name:this.now.format("DD/MM/YYYY"),value:"d/m/Y"},{name:this.now.format("YYYY.MM.DD"),value:"Y.m.d"},{name:this.now.format("DD.MM.YYYY"),value:"d.m.Y"},{name:this.now.format("MM.DD.YYYY"),value:"m.d.Y"}],this.timeFormatList=[{name:this.now.format("HH:mm"),value:"H:i"},{name:this.now.format("hh:mma"),value:"h:ia"},{name:this.now.format("hh:mmA"),value:"h:iA"},{name:this.now.format("hh:mm a"),value:"h:i a"},{name:this.now.format("hh:mm A"),value:"h:i A"},{name:this.now.format("HH.mm"),value:"H.i"},{name:this.now.format("hh.mma"),value:"h.ia"},{name:this.now.format("hh.mmA"),value:"h.iA"},{name:this.now.format("hh.mm a"),value:"h.i a"},{name:this.now.format("hh.mm A"),value:"h.i A"}]}static ɵfac=function(e){return new(e||SpiceInstallerSetPreferences)(r.Y36(_.A),r.Y36(v.eN),r.Y36(y.F0),r.Y36(x.C),r.Y36(w.y),r.Y36(o.f))};static ɵcmp=r.Xpm({type:SpiceInstallerSetPreferences,selectors:[["spice-installer-set-preferences"]],inputs:{selfStep:"selfStep"},decls:121,vars:24,consts:[[1,"slds-m-horizontal--medium"],[1,"slds-text-heading--medium"],[1,"slds-m-top_medium","slds-m-bottom_small"],[2,"width","fit-content"],[1,"slds-form-element","slds-m-top_xx-small"],[1,"slds-form-element__label"],[1,"slds-required"],[1,"slds-form-element__control"],[1,"slds-select_container"],[1,"slds-select",3,"ngModel","ngModelChange"],[3,"ngValue",4,"ngFor","ngForOf"],[1,"slds-form-element"],["denyEmpty","true",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["value","METRIC","selected",""],["value","IMPERIAL"],[1,"slds-select",3,"ngModel","ngModelChange","change"],[3,"value","selected",4,"ngFor","ngForOf"],[1,"slds-m-top--medium","slds-text-align_right"],[1,"slds-button","slds-button--neutral","slds-col_bump-left",3,"click"],[1,"slds-button","slds-button--brand",3,"click"],[3,"ngValue"],[3,"value"],[3,"value","selected"]],template:function(e,t){1&e&&(r.TgZ(0,"div",0)(1,"h2",1),r._uU(2,"Screen Output & Data Export"),r.qZA(),r.TgZ(3,"div",2),r._uU(4,"Set the most important settings for screen output and data export. These settings also apply automatically to each user as long as a user does not make any individual settings."),r.qZA(),r.TgZ(5,"div",3)(6,"div",4)(7,"label",5)(8,"abbr",6),r._uU(9,"*"),r.qZA(),r._uU(10,"Language"),r.qZA(),r.TgZ(11,"div",7)(12,"div",8)(13,"select",9),r.NdJ("ngModelChange",(function(e){return t.spiceinstaller.configObject.language=e})),r.YNc(14,fe,2,2,"option",10),r.qZA()()()(),r.TgZ(15,"div",4)(16,"label",5)(17,"abbr",6),r._uU(18,"*"),r.qZA(),r._uU(19,"Timezone"),r.qZA(),r.TgZ(20,"div",11)(21,"system-input-timezone",12),r.NdJ("ngModelChange",(function(e){return t.spiceinstaller.configObject.preferences.timezone=e})),r.qZA()()(),r.TgZ(22,"div",4)(23,"label",5)(24,"abbr",6),r._uU(25,"*"),r.qZA(),r._uU(26,"Date Format"),r.qZA(),r.TgZ(27,"div",11)(28,"div",8)(29,"select",9),r.NdJ("ngModelChange",(function(e){return t.spiceinstaller.configObject.preferences.datef=e})),r.YNc(30,be,2,2,"option",13),r.qZA()()()(),r.TgZ(31,"div",4)(32,"label",5)(33,"abbr",6),r._uU(34,"*"),r.qZA(),r._uU(35,"Time Format"),r.qZA(),r.TgZ(36,"div",11)(37,"div",8)(38,"select",9),r.NdJ("ngModelChange",(function(e){return t.spiceinstaller.configObject.preferences.timef=e})),r.YNc(39,_e,2,2,"option",13),r.qZA()()()(),r.TgZ(40,"div",4)(41,"label",5)(42,"abbr",6),r._uU(43,"*"),r.qZA(),r._uU(44,"Distance Unit System"),r.qZA(),r.TgZ(45,"div",11)(46,"div",8)(47,"select",9),r.NdJ("ngModelChange",(function(e){return t.spiceinstaller.configObject.preferences.distance_unit_system=e})),r.TgZ(48,"option",14),r._uU(49,"metric"),r.qZA(),r.TgZ(50,"option",15),r._uU(51,"imperial"),r.qZA()()()()(),r.TgZ(52,"div",4)(53,"label",5)(54,"abbr",6),r._uU(55,"*"),r.qZA(),r._uU(56,"Decimal Digits"),r.qZA(),r.TgZ(57,"div",11)(58,"div",8)(59,"select",16),r.NdJ("ngModelChange",(function(e){return t.spiceinstaller.configObject.preferences.currency_significant_digits=e}))("change",(function(){return t.updateNumberDelimitationsList()})),r.YNc(60,ve,2,3,"option",17),r.qZA()()()(),r.TgZ(61,"div",4)(62,"label",5)(63,"abbr",6),r._uU(64,"*"),r.qZA(),r._uU(65,"Number Format"),r.qZA(),r.TgZ(66,"div",11)(67,"div",8)(68,"select",9),r.NdJ("ngModelChange",(function(e){return t.numberDelimitation=e})),r.YNc(69,ye,2,2,"option",10),r.qZA()()()(),r.TgZ(70,"div",4)(71,"label",5)(72,"abbr",6),r._uU(73,"*"),r.qZA(),r._uU(74,"Name Format"),r.qZA(),r.TgZ(75,"div",11)(76,"div",8)(77,"select",9),r.NdJ("ngModelChange",(function(e){return t.spiceinstaller.configObject.preferences.locale_name_format=e})),r.YNc(78,xe,2,2,"option",13),r.ALo(79,"keyvalue"),r.qZA()()()(),r.TgZ(80,"div",4)(81,"label",5)(82,"abbr",6),r._uU(83,"*"),r.qZA(),r._uU(84,"Week Start Day"),r.qZA(),r.TgZ(85,"div",11)(86,"div",8)(87,"select",9),r.NdJ("ngModelChange",(function(e){return t.spiceinstaller.configObject.preferences.week_day_start=e})),r.YNc(88,we,2,2,"option",13),r.qZA()()()(),r.TgZ(89,"div",4)(90,"label",5)(91,"abbr",6),r._uU(92,"*"),r.qZA(),r._uU(93,"Week Days Count"),r.qZA(),r.TgZ(94,"div",11)(95,"div",8)(96,"select",9),r.NdJ("ngModelChange",(function(e){return t.spiceinstaller.configObject.preferences.week_days_count=e})),r.YNc(97,Ze,2,2,"option",13),r.qZA()()()(),r.TgZ(98,"div",4)(99,"label",5)(100,"abbr",6),r._uU(101,"*"),r.qZA(),r._uU(102,"Export Delimiter"),r.qZA(),r.TgZ(103,"div",11)(104,"div",8)(105,"select",9),r.NdJ("ngModelChange",(function(e){return t.spiceinstaller.configObject.preferences.export_delimiter=e})),r.YNc(106,Te,2,2,"option",13),r.qZA()()()(),r.TgZ(107,"div",4)(108,"label",5)(109,"abbr",6),r._uU(110,"*"),r.qZA(),r._uU(111,"Export Charset"),r.qZA(),r.TgZ(112,"div",11)(113,"div",8)(114,"select",9),r.NdJ("ngModelChange",(function(e){return t.spiceinstaller.configObject.preferences.export_charset=e})),r.YNc(115,Ce,2,2,"option",13),r.qZA()()()()(),r.TgZ(116,"div",18)(117,"button",19),r.NdJ("click",(function(){return t.spiceinstaller.jumpSubject.next({from:t.selfStep,to:t.selfStep.prev})})),r._uU(118,"back"),r.qZA(),r.TgZ(119,"button",20),r.NdJ("click",(function(){return t.setPreferences()})),r._uU(120,"next"),r.qZA()()()),2&e&&(r.xp6(13),r.Q6J("ngModel",t.spiceinstaller.configObject.language),r.xp6(1),r.Q6J("ngForOf",t.languages),r.xp6(7),r.Q6J("ngModel",t.spiceinstaller.configObject.preferences.timezone),r.xp6(8),r.Q6J("ngModel",t.spiceinstaller.configObject.preferences.datef),r.xp6(1),r.Q6J("ngForOf",t.dateFormatList),r.xp6(8),r.Q6J("ngModel",t.spiceinstaller.configObject.preferences.timef),r.xp6(1),r.Q6J("ngForOf",t.timeFormatList),r.xp6(8),r.Q6J("ngModel",t.spiceinstaller.configObject.preferences.distance_unit_system),r.xp6(12),r.Q6J("ngModel",t.spiceinstaller.configObject.preferences.currency_significant_digits),r.xp6(1),r.Q6J("ngForOf",t.currencySignificantDigitsList),r.xp6(8),r.Q6J("ngModel",t.numberDelimitation),r.xp6(1),r.Q6J("ngForOf",t.numberDelimitationsList),r.xp6(8),r.Q6J("ngModel",t.spiceinstaller.configObject.preferences.locale_name_format),r.xp6(1),r.Q6J("ngForOf",r.lcZ(79,22,t.spiceinstaller.nameFormats)),r.xp6(9),r.Q6J("ngModel",t.spiceinstaller.configObject.preferences.week_day_start),r.xp6(1),r.Q6J("ngForOf",t.weekDayStartList),r.xp6(8),r.Q6J("ngModel",t.spiceinstaller.configObject.preferences.week_days_count),r.xp6(1),r.Q6J("ngForOf",t.weekDaysCountList),r.xp6(8),r.Q6J("ngModel",t.spiceinstaller.configObject.preferences.export_delimiter),r.xp6(1),r.Q6J("ngForOf",t.exportDelimiterList),r.xp6(8),r.Q6J("ngModel",t.spiceinstaller.configObject.preferences.export_charset),r.xp6(1),r.Q6J("ngForOf",t.charsetList))},dependencies:[i.sg,n.YN,n.Kr,n.EJ,n.JJ,n.On,pe.R,i.Nd],encapsulation:2})}return SpiceInstallerSetPreferences})();var Ae=s(44044);function Le(e,t){if(1&e&&(r.TgZ(0,"tr",5)(1,"td")(2,"div",6),r._uU(3),r.qZA()(),r.TgZ(4,"td")(5,"div",6),r._uU(6),r.qZA()()()),2&e){const e=t.$implicit,s=r.oxw();r.xp6(3),r.Oqu(s.spiceinstaller.keyToLabel(e.key)),r.xp6(3),r.Oqu(e.value)}}function Ie(e,t){if(1&e&&(r.TgZ(0,"tr",5)(1,"td")(2,"div",6),r._uU(3),r.qZA()(),r.TgZ(4,"td")(5,"div",6),r._uU(6),r.qZA()()()),2&e){const e=t.$implicit,s=r.oxw();r.xp6(3),r.Oqu(s.spiceinstaller.keyToLabel(e.key)),r.xp6(3),r.Oqu(e.value)}}function Se(e,t){if(1&e&&(r.TgZ(0,"tr",5)(1,"td")(2,"div",6),r._uU(3),r.qZA()(),r.TgZ(4,"td")(5,"div",6),r._uU(6),r.qZA()()()),2&e){const e=t.$implicit,s=r.oxw();r.xp6(3),r.Oqu(s.spiceinstaller.keyToLabel(e.key)),r.xp6(3),r.Oqu(e.value)}}function Me(e,t){if(1&e&&(r.TgZ(0,"tr",5)(1,"td")(2,"div",6),r._uU(3),r.qZA()(),r.TgZ(4,"td")(5,"div",6),r._uU(6),r.qZA()()()),2&e){const e=t.$implicit,s=r.oxw();r.xp6(3),r.Oqu(s.spiceinstaller.keyToLabel(e.key)),r.xp6(3),r.Oqu(e.value)}}function Je(e,t){if(1&e&&(r.TgZ(0,"tr",5)(1,"td")(2,"div",6),r._uU(3),r.qZA()(),r.TgZ(4,"td")(5,"div",6),r._uU(6),r.qZA()()()),2&e){const e=t.$implicit,s=r.oxw();r.xp6(3),r.Oqu(s.spiceinstaller.keyToLabel(e.key)),r.xp6(3),r.Oqu(e.value)}}function Oe(e,t){if(1&e&&(r.TgZ(0,"tr",5)(1,"td")(2,"div",6),r._uU(3),r.qZA()(),r.TgZ(4,"td")(5,"div",6),r._uU(6),r.qZA()()()),2&e){const e=t.$implicit,s=r.oxw();r.xp6(3),r.Oqu(e.key),r.xp6(3),r.Oqu(s.showPreference(e.key))}}function Ne(e,t){1&e&&(r.ynx(0),r.TgZ(1,"section",12)(2,"div",13),r._UZ(3,"div",14),r.TgZ(4,"div",15)(5,"div",16),r._UZ(6,"div",17),r.TgZ(7,"div",18),r._uU(8,"Installing"),r.qZA()()()()(),r._UZ(9,"div",19),r.BQk())}let Fe=(()=>{class SpiceInstallerReview{toast;modal;http;router;configurationService;spiceinstaller;selfStep;installing=!1;prefsToReview={Timezone:"timezone","Date Format":"datef","Time Format":"timef","Distance Unit System":"distance_unit_system","Name Format":"locale_name_format","Week Start Day":"week_day_start","Week Days Count":"week_days_count","Export Delimiter":"export_delimiter","Export Charset":"export_charset"};constructor(e,t,s,i,n,l){this.toast=e,this.modal=t,this.http=s,this.router=i,this.configurationService=n,this.spiceinstaller=l,this.spiceinstaller.jumpSubject.subscribe((e=>{e.from===this.selfStep&&(this.selfStep.completed||e.to?.pos<this.selfStep.pos)&&this.spiceinstaller.jump(e.to)}))}ngAfterViewInit(){this.spiceinstaller.selectedStep.completed=!0,this.spiceinstaller.steps[7]=this.spiceinstaller.selectedStep}install(){this.installing=!0,this.http.post(`${this.spiceinstaller.systemurl}/install/process`,this.spiceinstaller.configObject).subscribe((e=>{let t=e;if(this.installing=!1,t.success)window.location.href=window.location.href.replace("#/install","");else for(let e in t.errors)this.toast.sendAlert("Error with: "+e,"error")}),(e=>{if(500===e.status)this.toast.sendAlert(e.message,"error");this.installing=!1}))}showPreference(e){return"function"==typeof this.prefsToReview[e]?this.prefsToReview[e]():this.spiceinstaller.configObject.preferences[this.prefsToReview[e]]}getNumberFormat(){return"1"+this.spiceinstaller.configObject.preferences.num_grp_sep+"000"+this.spiceinstaller.configObject.preferences.num_grp_sep+"000"+this.spiceinstaller.configObject.preferences.dec_sep+"0".repeat(this.spiceinstaller.configObject.preferences.currency_significant_digits)}static ɵfac=function(e){return new(e||SpiceInstallerReview)(r.Y36(_.A),r.Y36(Ae.o),r.Y36(v.eN),r.Y36(y.F0),r.Y36(x.C),r.Y36(o.f))};static ɵcmp=r.Xpm({type:SpiceInstallerReview,selectors:[["spice-installer-review"]],inputs:{selfStep:"selfStep"},decls:54,vars:20,consts:[[1,"slds-text-heading_medium","slds-m-horizontal--medium","slds-m-bottom_medium"],[1,"slds-table","slds-table_cell-buffer","slds-table_bordered","slds-table_col-bordered"],["colspan","2",1,"slds-text-heading_small"],["class","slds-hint-parent",4,"ngFor","ngForOf"],["colspan","2",1,"slds-text-heading_small","slds-border_top"],[1,"slds-hint-parent"],[1,"slds-truncate"],[1,"slds-text-align_right","slds-align-bottom","slds-grid","slds-grid--vertical-align-center","slds-p-vertical--small","slds-p-horizontal_medium"],[1,"slds-size--1-of-1"],[1,"slds-button","slds-button--neutral","slds-col_bump-left",3,"click"],[1,"slds-button","slds-button--brand",3,"click"],[4,"ngIf"],["role","dialog","aria-modal","true",1,"slds-modal","slds-fade-in-open"],[1,"slds-modal__container"],[1,"slds-modal__header","slds-modal__header_empty"],[1,"slds-modal__content","slds-p-around_medium","slds-align--absolute-center"],[1,"slds-p-horizontal--x-large","slds-grid","slds-grid--vertical-align-center"],[1,"cssload-double-torus",2,"width","16px","height","16px"],[1,"slds-p-left--medium"],[1,"slds-backdrop","slds-backdrop_open"]],template:function(e,t){1&e&&(r.TgZ(0,"h2",0),r._uU(1,"Review & Install"),r.qZA(),r.TgZ(2,"table",1)(3,"thead")(4,"tr")(5,"th",2),r._uU(6,"Backend Configuration Settings"),r.qZA()()(),r.TgZ(7,"tbody"),r.YNc(8,Le,7,2,"tr",3),r.ALo(9,"keyvalue"),r.qZA(),r.TgZ(10,"thead")(11,"tr")(12,"th",4),r._uU(13,"Database Configuration Settings"),r.qZA()()(),r.TgZ(14,"tbody"),r.YNc(15,Ie,7,2,"tr",3),r.ALo(16,"keyvalue"),r.YNc(17,Se,7,2,"tr",3),r.ALo(18,"keyvalue"),r.qZA(),r.TgZ(19,"thead")(20,"tr")(21,"th",4),r._uU(22,"FTS Configuration Settings"),r.qZA()()(),r.TgZ(23,"tbody"),r.YNc(24,Me,7,2,"tr",3),r.ALo(25,"keyvalue"),r.qZA(),r.TgZ(26,"thead")(27,"tr")(28,"th",4),r._uU(29,"Credentials"),r.qZA()()(),r.TgZ(30,"tbody"),r.YNc(31,Je,7,2,"tr",3),r.ALo(32,"keyvalue"),r.qZA(),r.TgZ(33,"thead")(34,"tr")(35,"th",4),r._uU(36,"Output & Export Settings"),r.qZA()()(),r.TgZ(37,"tbody")(38,"tr",5)(39,"td")(40,"div",6),r._uU(41,"Language"),r.qZA()(),r.TgZ(42,"td")(43,"div",6),r._uU(44),r.qZA()()(),r.YNc(45,Oe,7,2,"tr",3),r.ALo(46,"keyvalue"),r.qZA()(),r.TgZ(47,"div",7)(48,"div",8)(49,"button",9),r.NdJ("click",(function(){return t.spiceinstaller.jumpSubject.next({from:t.selfStep,to:t.selfStep.prev})})),r._uU(50,"back"),r.qZA(),r.TgZ(51,"button",10),r.NdJ("click",(function(){return t.install()})),r._uU(52,"Begin Installation"),r.qZA()()(),r.YNc(53,Ne,10,0,"ng-container",11)),2&e&&(r.xp6(8),r.Q6J("ngForOf",r.lcZ(9,8,t.spiceinstaller.configObject.backendconfig)),r.xp6(7),r.Q6J("ngForOf",r.lcZ(16,10,t.spiceinstaller.configObject.database)),r.xp6(2),r.Q6J("ngForOf",r.lcZ(18,12,t.spiceinstaller.configObject.dboptions)),r.xp6(7),r.Q6J("ngForOf",r.lcZ(25,14,t.spiceinstaller.configObject.fts)),r.xp6(7),r.Q6J("ngForOf",r.lcZ(32,16,t.spiceinstaller.configObject.credentials)),r.xp6(13),r.Oqu(t.spiceinstaller.configObject.language),r.xp6(1),r.Q6J("ngForOf",r.lcZ(46,18,t.prefsToReview)),r.xp6(8),r.Q6J("ngIf",t.installing))},dependencies:[i.sg,i.O5,i.Nd],encapsulation:2})}return SpiceInstallerReview})();function qe(e,t){if(1&e&&(r.TgZ(0,"div",2),r._UZ(1,"spice-installer-set-backend",3),r.qZA()),2&e){const e=r.oxw(2);r.xp6(1),r.Q6J("selfStep",e.spiceinstaller.selectedStep)}}function Ee(e,t){if(1&e&&(r.TgZ(0,"div",2),r._UZ(1,"spice-installer-systemcheck",3),r.qZA()),2&e){const e=r.oxw(2);r.xp6(1),r.Q6J("selfStep",e.spiceinstaller.selectedStep)}}function Ye(e,t){if(1&e&&(r.TgZ(0,"div",2),r._UZ(1,"spice-installer-licence",3),r.qZA()),2&e){const e=r.oxw(2);r.xp6(1),r.Q6J("selfStep",e.spiceinstaller.selectedStep)}}function De(e,t){if(1&e&&(r.TgZ(0,"div",2),r._UZ(1,"spice-installer-database",3),r.qZA()),2&e){const e=r.oxw(2);r.xp6(1),r.Q6J("selfStep",e.spiceinstaller.selectedStep)}}function Ue(e,t){if(1&e&&(r.TgZ(0,"div",2),r._UZ(1,"spice-installer-fts",3),r.qZA()),2&e){const e=r.oxw(2);r.xp6(1),r.Q6J("selfStep",e.spiceinstaller.selectedStep)}}function Qe(e,t){if(1&e&&(r.TgZ(0,"div",2),r._UZ(1,"spice-installer-credentials",3),r.qZA()),2&e){const e=r.oxw(2);r.xp6(1),r.Q6J("selfStep",e.spiceinstaller.selectedStep)}}function Re(e,t){if(1&e&&(r.TgZ(0,"div",2),r._UZ(1,"spice-installer-set-preferences",3),r.qZA()),2&e){const e=r.oxw(2);r.xp6(1),r.Q6J("selfStep",e.spiceinstaller.selectedStep)}}function je(e,t){if(1&e&&(r.TgZ(0,"div",2),r._UZ(1,"spice-installer-review",3),r.qZA()),2&e){const e=r.oxw(2);r.xp6(1),r.Q6J("selfStep",e.spiceinstaller.selectedStep)}}function Be(e,t){if(1&e&&(r.TgZ(0,"div"),r.YNc(1,qe,2,1,"div",1),r.YNc(2,Ee,2,1,"div",1),r.YNc(3,Ye,2,1,"div",1),r.YNc(4,De,2,1,"div",1),r.YNc(5,Ue,2,1,"div",1),r.YNc(6,Qe,2,1,"div",1),r.YNc(7,Re,2,1,"div",1),r.YNc(8,je,2,1,"div",1),r.qZA()),2&e){const e=t.$implicit,s=r.oxw();r.xp6(1),r.Q6J("ngIf","setbackend"==e.id&&"setbackend"==s.spiceinstaller.selectedStep.id),r.xp6(1),r.Q6J("ngIf","systemcheck"==e.id&&"systemcheck"==s.spiceinstaller.selectedStep.id),r.xp6(1),r.Q6J("ngIf","licence"==e.id&&"licence"==s.spiceinstaller.selectedStep.id),r.xp6(1),r.Q6J("ngIf","database"==e.id&&"database"==s.spiceinstaller.selectedStep.id),r.xp6(1),r.Q6J("ngIf","fts"==e.id&&"fts"==s.spiceinstaller.selectedStep.id),r.xp6(1),r.Q6J("ngIf","credentials"==e.id&&"credentials"==s.spiceinstaller.selectedStep.id),r.xp6(1),r.Q6J("ngIf","preferences"==e.id&&"preferences"==s.spiceinstaller.selectedStep.id),r.xp6(1),r.Q6J("ngIf","review"==e.id&&"review"==s.spiceinstaller.selectedStep.id)}}let Ge=(()=>{class SpiceInstallerDetailContainer{toast;http;router;configurationService;backend;spiceinstaller;view;constructor(e,t,s,i,n,l,o){this.toast=e,this.http=t,this.router=s,this.configurationService=i,this.backend=n,this.spiceinstaller=l,this.view=o,this.view.setEditMode()}static ɵfac=function(e){return new(e||SpiceInstallerDetailContainer)(r.Y36(_.A),r.Y36(v.eN),r.Y36(y.F0),r.Y36(x.C),r.Y36(w.y),r.Y36(o.f),r.Y36(b.e))};static ɵcmp=r.Xpm({type:SpiceInstallerDetailContainer,selectors:[["spice-installer-detail-container"]],features:[r._Bn([b.e])],decls:1,vars:1,consts:[[4,"ngFor","ngForOf"],["class","slds-grid slds-grid_vertical",4,"ngIf"],[1,"slds-grid","slds-grid_vertical"],[3,"selfStep"]],template:function(e,t){1&e&&r.YNc(0,Be,9,8,"div",0),2&e&&r.Q6J("ngForOf",t.spiceinstaller.steps)},dependencies:[i.sg,i.O5,A,J,F,se,ae,he,ke,Fe],encapsulation:2})}return SpiceInstallerDetailContainer})();var Pe=s(73194);let He=(()=>{class SpiceInstallerModule{static ɵfac=function(e){return new(e||SpiceInstallerModule)};static ɵmod=r.oAB({type:SpiceInstallerModule});static ɵinj=r.cJS({providers:[o.f],imports:[i.ez,n.u5,l.o,a.SystemComponents]})}return SpiceInstallerModule})();("undefined"==typeof ngJitMode||ngJitMode)&&r.kYT(He,{declarations:[d.s,f,Ge,A,J,F,se,U,G,$,ae,he,ke,Fe],imports:[i.ez,n.u5,l.o,a.SystemComponents],exports:[d.s]}),r.B6R(d.s,[Pe.t,f,Ge],[])},2294:(e,t,s)=>{"use strict";s.d(t,{S:()=>y});var i=s(62242),n=s(92667),l=s(55329),o=s(4154),a=s(55710),d=s(44755),r=s(72656),c=s(83463),u=s(95681),m=s(50151);function g(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"button",3),i.NdJ("click",(function(){const t=i.CHM(e).$implicit,s=i.oxw();return i.KtG(s.propagateclick(t.id))})),i.TgZ(1,"object-action-container-item",4),i.NdJ("actionemitter",(function(t){i.CHM(e);const s=i.oxw();return i.KtG(s.emitaction(t))})),i.qZA()()}if(2&e){const e=t.$implicit,s=i.oxw();i.Q6J("ngClass",s.addclasses(e))("disabled",s.isDisabled(e.id)),i.xp6(1),i.Q6J("actionitem",e)("displayasicon",s.displayasicon)}}function h(e,t){if(1&e&&(i.TgZ(0,"div",15),i._UZ(1,"system-label",16),i.qZA()),2&e){const e=i.oxw().$implicit;i.xp6(1),i.Q6J("label","undefined"==e.name?"LBL_DEFAULT":e.name)}}const p=function(e){return{"slds-hide":e}},f=function(e){return{"slds-disabled-text":e}};function b(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"li",17),i.NdJ("click",(function(){const t=i.CHM(e).$implicit,s=i.oxw(3);return i.KtG(s.propagateclick(t.id))})),i.TgZ(1,"a",18)(2,"object-action-container-item",19),i.NdJ("actionemitter",(function(t){i.CHM(e);const s=i.oxw(3);return i.KtG(s.emitaction(t))})),i.qZA()()()}if(2&e){const e=t.$implicit,s=i.oxw(3);i.Q6J("ngClass",i.VKq(3,p,s.isHidden(e.id))),i.xp6(2),i.Q6J("ngClass",i.VKq(5,f,s.isDisabled(e.id)))("actionitem",e)}}function _(e,t){if(1&e&&(i.TgZ(0,"div"),i.YNc(1,h,2,1,"div",12),i.TgZ(2,"ul",13),i.YNc(3,b,3,7,"li",14),i.qZA()()),2&e){const e=t.$implicit,s=t.last,n=i.oxw(2);i.Udp("width","horizontal"==n.grouped?"160px":"initial")("min-width","horizontal"==n.grouped?"160px":"initial"),i.ekj("slds-hide",e.hidden)("slds-border--right",!s&&"horizontal"==n.grouped),i.xp6(1),i.Q6J("ngIf",n.groups.length>1),i.xp6(1),i.ekj("slds-hide",e.hidden),i.xp6(1),i.Q6J("ngForOf",e.items)}}function v(e,t){if(1&e&&(i.TgZ(0,"div",5)(1,"button",6),i._UZ(2,"system-button-icon",7),i.TgZ(3,"span",8),i._UZ(4,"system-label",9),i.qZA()(),i.TgZ(5,"div",10),i.YNc(6,_,4,12,"div",11),i.qZA()()),2&e){const e=i.oxw();i.xp6(1),i.Q6J("disabled",e.opendisabled),i.xp6(4),i.ekj("slds-grid","horizontal"==e.grouped),i.xp6(1),i.Q6J("ngForOf",e.groups)}}let y=(()=>{class ObjectActionContainer{language;metadata;model;ngZone;cdRef;actionitemlist;disabled=!1;containerclass="slds-button-group";displayasicon=!1;actionset="";mainactionitems=[];actionemitter=new i.vpe;stable=!1;horizontalView=!1;stableSub;groups=[];grouped;constructor(e,t,s,i,n){this.language=e,this.metadata=t,this.model=s,this.ngZone=i,this.cdRef=n}ngDoCheck(){this.stable&&this.groups.forEach((e=>{e.hidden=0==this.actionitemlist.filter((t=>(t.actionitem.actionconfig?.group==e.name||!t.actionitem.actionconfig?.group&&"undefined"==e.name)&&!t.hidden)).length}))}buildItems(){const e=this.metadata.getActionSetItems(this.actionset).sort(((e,t)=>e.sequence>t.sequence?1:-1));this.mainactionitems=[];let t=!0;this.groups=[];const s={};for(const i of e){const e={disabled:!0,id:i.id,sequence:i.sequence,action:i.action,component:i.component,actionconfig:i.actionconfig};if(t||"1"==i.singlebutton)this.mainactionitems.push(e),t=!1;else if(!this.isHidden(i.id)){const t=["horizontal","vertical"].indexOf(this.grouped)>-1&&i.actionconfig?.group?i.actionconfig?.group:"undefined";s[t]?s[t].items.push(e):s[t]={name:t,sequence:"undefined"==t?1e3:Object.keys(s).length+1,items:[e],hidden:!1}}}this.groups=Object.values(s).sort(((e,t)=>e.sequence>t.sequence?1:-1))}ngOnChanges(){this.grouped=this.metadata.getActionSet(this.actionset)?.grouped,this.buildItems()}ngAfterViewInit(){this.stableSub=this.ngZone.onStable.subscribe((e=>{this.stable=!0,this.stableSub.unsubscribe(),this.cdRef.detectChanges()}))}get opendisabled(){let e=!0;return this.groups.some((t=>t.items.some((t=>{if(!1===this.isDisabled(t.id))return e=!1,!0})))),e}get hasAddItems(){return this.groups.some((e=>e.items.length>0))}addclasses(e){let t=e.actionconfig.addclasses;return this.isHidden(e.id)&&(t+=" slds-hide"),t}isDisabled(e){if(this.disabled)return!0;let t=!0;return this.actionitemlist&&this.actionitemlist.some((s=>{if(s.id==e)return t=s.disabled,!0})),t}isHidden(e){if(!this.stable)return!1;let t=!1;if(this.actionitemlist){let s=this.actionitemlist.find((t=>t.id==e));s&&(t=s.hidden)}return t}isGroupHidden(e,t){return!!this.stable&&0==Array.from(t.children).filter((e=>!e.classList.contains("slds-hide"))).length}propagateclick(e){this.actionitemlist.some((t=>{if(t.id==e)return t.disabled||t.execute(),!0}))}emitaction(e){this.actionemitter.emit(e)}static ɵfac=function(e){return new(e||ObjectActionContainer)(i.Y36(l.d),i.Y36(o.Pu),i.Y36(a.o),i.Y36(i.R0b),i.Y36(i.sBO))};static ɵcmp=i.Xpm({type:ObjectActionContainer,selectors:[["object-action-container"]],viewQuery:function(e,t){if(1&e&&i.Gf(n.s,5),2&e){let e;i.iGM(e=i.CRH())&&(t.actionitemlist=e)}},inputs:{disabled:"disabled",containerclass:"containerclass",displayasicon:"displayasicon",actionset:"actionset"},outputs:{actionemitter:"actionemitter"},features:[i.TTD],decls:3,vars:3,consts:[["role","group",3,"ngClass"],["class","slds-button slds-button_neutral",3,"ngClass","disabled","click",4,"ngFor","ngForOf"],["class","slds-dropdown-trigger slds-dropdown-trigger_click slds-button_last","system-dropdown-trigger","",4,"ngIf"],[1,"slds-button","slds-button_neutral",3,"ngClass","disabled","click"],[3,"actionitem","displayasicon","actionemitter"],["system-dropdown-trigger","",1,"slds-dropdown-trigger","slds-dropdown-trigger_click","slds-button_last"],["aria-haspopup","true","system-title","LBL_MORE",1,"slds-button","slds-button_icon","slds-button_icon-border-filled",3,"disabled"],["icon","down"],[1,"slds-assistive-text"],["label","LBL_MORE"],[1,"slds-dropdown","slds-dropdown_right","slds-dropdown_actions","slds-p-around--none",2,"max-width","initial"],[3,"slds-hide","slds-border--right","width","min-width",4,"ngFor","ngForOf"],["class","slds-p-around--x-small slds-theme--shade slds-text-title--caps",4,"ngIf"],["role","menu",1,"slds-dropdown__list"],["class","slds-dropdown__item","role","presentation",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"slds-p-around--x-small","slds-theme--shade","slds-text-title--caps"],[3,"label"],["role","presentation",1,"slds-dropdown__item",3,"ngClass","click"],["href","javascript:void(0);","role","menuitem","tabindex","0"],[1,"slds-truncate",3,"ngClass","actionitem","actionemitter"]],template:function(e,t){1&e&&(i.TgZ(0,"div",0),i.YNc(1,g,2,4,"button",1),i.YNc(2,v,7,4,"div",2),i.qZA()),2&e&&(i.Q6J("ngClass",t.containerclass),i.xp6(1),i.Q6J("ngForOf",t.mainactionitems),i.xp6(1),i.Q6J("ngIf",t.hasAddItems))},dependencies:[d.mk,d.sg,d.O5,r.J,c._,u.l,m.S,n.s],encapsulation:2})}return ObjectActionContainer})()},92667:(e,t,s)=>{"use strict";s.d(t,{s:()=>r});var i=s(62242),n=s(50727),l=s(55329),o=s(4154),a=s(55710);const d=["actioncontainer"];let r=(()=>{class ObjectActionContainerItem{language;metadata;model;ngZone;injector;cdr;actionitem;displayasicon=!1;actionemitter=new i.vpe;actioncontainer;componentref;subscriptions=new n.w0;standardActions={NEW:"ObjectActionNewButton",DUPLICATE:"ObjectActionDuplicateButton",NEWRELATED:"ObjectActionNewrelatedButton",EDIT:"ObjectActionEditButton",DELETE:"ObjectActionDeleteButton",AUDIT:"ObjectActionAuditlogButton",IMPORT:"SpiceImporterImportButton",MAIL:"ObjectActionBeanToMailButton",PRINT:"ObjectActionOutputBeanButton",SELECT:"ObjectActionSelectButton",OPEN:"ObjectActionOpenButton",CANCEL:"ObjectActionCancelButton",SAVE:"ObjectActionSaveButton",SAVERELATED:"ObjectActionSaveRelatedButton"};stable=!1;stableSub;constructor(e,t,s,i,n,l){this.language=e,this.metadata=t,this.model=s,this.ngZone=i,this.injector=n,this.cdr=l}get id(){return this.actionitem.id}get disabled(){return!this.stable||!this.componentref||!!this.componentref.instance.disabled}get hidden(){return!this.stable||!this.componentref||!!this.componentref.instance.hidden}ngAfterViewInit(){this.metadata.addComponent(this.actionitem.action?this.standardActions[this.actionitem.action]:this.actionitem.component,this.actioncontainer,this.injector).subscribe((e=>{e.instance.parent=this.model,e.instance.actionconfig=this.actionitem.actionconfig,e.instance.displayasicon=this.displayasicon,e.instance.actionemitter&&this.subscriptions.add(e.instance.actionemitter.subscribe((e=>{this.actionemitter.emit(e)}))),this.componentref=e,this.cdr.detectChanges()})),this.stableSub=this.ngZone.onStable.subscribe((e=>{this.stable=!0,this.stableSub.unsubscribe()}))}ngOnDestroy(){this.subscriptions.unsubscribe()}execute(){this.componentref&&this.componentref.instance.execute&&this.componentref.instance.execute()}static ɵfac=function(e){return new(e||ObjectActionContainerItem)(i.Y36(l.d),i.Y36(o.Pu),i.Y36(a.o),i.Y36(i.R0b),i.Y36(i.zs3),i.Y36(i.sBO))};static ɵcmp=i.Xpm({type:ObjectActionContainerItem,selectors:[["object-action-container-item"]],viewQuery:function(e,t){if(1&e&&i.Gf(d,7,i.s_b),2&e){let e;i.iGM(e=i.CRH())&&(t.actioncontainer=e.first)}},inputs:{actionitem:"actionitem",displayasicon:"displayasicon"},outputs:{actionemitter:"actionemitter"},decls:2,vars:0,consts:[["actioncontainer",""]],template:function(e,t){1&e&&i._UZ(0,"div",null,0)},encapsulation:2})}return ObjectActionContainerItem})()},20586:(e,t,s)=>{"use strict";s.d(t,{g:()=>T});var i=s(93441),n=s(2294),l=s(62242),o=s(55329),a=s(33369),d=s(55710),r=s(32294),c=s(4154),u=s(26559),m=s(44755),g=s(72656),h=s(95681),p=s(92667);const f=function(e){return{"slds-hide":e}},b=function(e){return{"slds-disabled-text":e}};function _(e,t){if(1&e){const e=l.EpF();l.TgZ(0,"li",9),l.NdJ("click",(function(){const t=l.CHM(e).$implicit,s=l.oxw(3);return l.KtG(s.propagateclick(t.id))})),l.TgZ(1,"a",10)(2,"object-action-container-item",11),l.NdJ("actionemitter",(function(t){l.CHM(e);const s=l.oxw(3);return l.KtG(s.emitaction(t))})),l.qZA()()()}if(2&e){const e=t.$implicit,s=l.oxw(3);l.Q6J("ngClass",l.VKq(3,f,s.isHidden(e.id))),l.xp6(2),l.Q6J("ngClass",l.VKq(5,b,s.isDisabled(e.id)))("actionitem",e)}}function v(e,t){if(1&e&&(l.ynx(0),l.YNc(1,_,3,7,"li",8),l.BQk()),2&e){const e=l.oxw(2);l.xp6(1),l.Q6J("ngForOf",e.actionitems)}}function y(e,t){if(1&e&&(l.TgZ(0,"div",2)(1,"button",3),l._UZ(2,"system-button-icon",4),l.qZA(),l.TgZ(3,"div",5)(4,"ul",6),l.YNc(5,v,2,1,"ng-container",7),l.qZA()()()),2&e){const e=l.oxw();l.xp6(1),l.Q6J("ngClass",e.getButtonSizeClass())("disabled",e.hasNoActions),l.xp6(1),l.Q6J("icon","down"),l.xp6(3),l.Q6J("ngIf",e.actionitems.length>0)}}function x(e,t){if(1&e){const e=l.EpF();l.TgZ(0,"button",16),l.NdJ("click",(function(){const t=l.CHM(e).$implicit,s=l.oxw(3);return l.KtG(s.propagateclick(t.id))})),l.TgZ(1,"object-action-container-item",17),l.NdJ("actionemitter",(function(t){l.CHM(e);const s=l.oxw(3);return l.KtG(s.emitaction(t))})),l.qZA()()}if(2&e){const e=t.$implicit,s=l.oxw(3);l.Q6J("ngClass",l.VKq(4,f,s.isHidden(e.id))),l.xp6(1),l.Q6J("displayasicon",!0)("ngClass",l.VKq(6,b,s.isDisabled(e.id)))("actionitem",e)}}function w(e,t){if(1&e&&(l.TgZ(0,"div",14),l.YNc(1,x,2,8,"button",15),l.qZA()),2&e){const e=l.oxw(2);l.xp6(1),l.Q6J("ngForOf",e.actionitems)}}function Z(e,t){if(1&e&&(l.TgZ(0,"div",12),l.YNc(1,w,2,1,"div",13),l.qZA()),2&e){const e=l.oxw();l.xp6(1),l.Q6J("ngIf",e.actionitems.length>0)}}let T=(()=>{class ObjectActionMenu extends n.S{language;broadcast;model;view;metadata;elementRef;renderer;helper;layout;cdRef;ngZone;buttonsize="";actionset="";actionitems=[];componentconfig={};constructor(e,t,s,i,n,l,o,a,d,r,c){super(e,n,s,c,r),this.language=e,this.broadcast=t,this.model=s,this.view=i,this.metadata=n,this.elementRef=l,this.renderer=o,this.helper=a,this.layout=d,this.cdRef=r,this.ngZone=c}ngOnInit(){""==this.actionset&&(this.componentconfig=this.metadata.getComponentConfig("ObjectActionMenu",this.model.module),this.actionset=this.componentconfig.actionset_default,this.setActionsets())}ngOnChanges(){this.setActionsets()}setActionsets(){let e=this.metadata.getActionSetItems(this.actionset);this.actionitems=[];for(let t of e)this.actionitems.push({disabled:!0,id:t.id,sequence:t.sequence,action:t.action,component:t.component,actionconfig:t.actionconfig});this.cdRef.detectChanges()}get isSmall(){return"small"==this.layout.screenwidth}get hasNoActions(){return!(this.actionitems.length>0)}getButtonSizeClass(){if(""!==this.buttonsize)return"slds-button--icon-"+this.buttonsize}static ɵfac=function(e){return new(e||ObjectActionMenu)(l.Y36(o.d),l.Y36(a.f),l.Y36(d.o),l.Y36(r.e),l.Y36(c.Pu),l.Y36(l.SBq),l.Y36(l.Qsj),l.Y36(i._),l.Y36(u.b),l.Y36(l.sBO),l.Y36(l.R0b))};static ɵcmp=l.Xpm({type:ObjectActionMenu,selectors:[["object-action-menu"]],inputs:{buttonsize:"buttonsize",actionset:"actionset"},features:[l._Bn([i._]),l.qOj,l.TTD],decls:3,vars:2,consts:[["class","slds-dropdown-trigger slds-dropdown-trigger--click","system-dropdown-trigger","",4,"ngIf","ngIfElse"],["smallformfactor",""],["system-dropdown-trigger","",1,"slds-dropdown-trigger","slds-dropdown-trigger--click"],["aria-haspopup","true",1,"slds-button","slds-button--icon-border-filled",3,"ngClass","disabled"],[3,"icon"],[1,"slds-dropdown"],["role","menu",1,"slds-dropdown__list"],[4,"ngIf"],["class","slds-dropdown__item","role","presentation",3,"ngClass","click",4,"ngFor","ngForOf"],["role","presentation",1,"slds-dropdown__item",3,"ngClass","click"],["href","javascript:void(0);","role","menuitem","tabindex","-1"],[1,"slds-truncate",3,"ngClass","actionitem","actionemitter"],[1,"slds-size--1-of-1","slds-text-align--right"],["class"," slds-p-top--xx-small slds-p-horizontal--x-small slds-button-group",4,"ngIf"],[1,"slds-p-top--xx-small","slds-p-horizontal--x-small","slds-button-group"],["class","slds-button slds-button_neutral",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"slds-button","slds-button_neutral",3,"ngClass","click"],[1,"slds-truncate",3,"displayasicon","ngClass","actionitem","actionemitter"]],template:function(e,t){if(1&e&&(l.YNc(0,y,6,4,"div",0),l.YNc(1,Z,2,1,"ng-template",null,1,l.W1O)),2&e){const e=l.MAs(2);l.Q6J("ngIf",!t.isSmall)("ngIfElse",e)}},dependencies:[m.mk,m.sg,m.O5,g.J,h.l,p.s],encapsulation:2})}return ObjectActionMenu})()},30699:(e,t,s)=>{"use strict";s.d(t,{H:()=>p});var i=s(62242),n=s(99637),l=s(93441),o=s(55329),a=s(55710),d=s(4154),r=s(44755),c=s(72656),u=s(86094);const m=["acionsetcontainer"];function g(e,t){if(1&e&&(i.TgZ(0,"div",4),i._UZ(1,"object-actionset-menu-container",5),i.qZA()),2&e){const e=i.oxw();i.Q6J("ngClass",e.getDropdownLocationClass()),i.xp6(1),i.Q6J("actionset",e.actionset)}}const h=function(e){return{"slds-is-open":e}};let p=(()=>{class ObjectActionsetMenu{language;model;metadata;elementRef;renderer;popup;helper;acionsetcontainer;actionset="";buttonsize="";action=new i.vpe;isOpen=!1;popupSubscription;clickListener;constructor(e,t,s,i,n,l,o){this.language=e,this.model=t,this.metadata=s,this.elementRef=i,this.renderer=n,this.popup=l,this.helper=o,this.popupSubscription=this.popup.closePopup$.subscribe((e=>{this.isOpen=!1}))}ngOnDestroy(){this.popupSubscription.unsubscribe()}hasNoActions(){return!1}toggleOpen(){this.isOpen=!this.isOpen,this.isOpen?this.clickListener=this.renderer.listen("document","click",(e=>this.onClick(e))):this.clickListener&&this.clickListener()}onClick(e){this.elementRef.nativeElement.contains(e.target)||(this.isOpen=!1)}getButtonSizeClass(){if(""!==this.buttonsize)return"slds-button--icon-"+this.buttonsize}getDropdownLocationClass(){let e=this.elementRef.nativeElement.getBoundingClientRect();if(window.innerHeight-e.bottom<100)return"slds-dropdown--bottom"}static ɵfac=function(e){return new(e||ObjectActionsetMenu)(i.Y36(o.d),i.Y36(a.o),i.Y36(d.Pu),i.Y36(i.SBq),i.Y36(i.Qsj),i.Y36(n.g),i.Y36(l._))};static ɵcmp=i.Xpm({type:ObjectActionsetMenu,selectors:[["object-actionset-menu"]],viewQuery:function(e,t){if(1&e&&i.Gf(m,7,i.s_b),2&e){let e;i.iGM(e=i.CRH())&&(t.acionsetcontainer=e.first)}},inputs:{actionset:"actionset",buttonsize:"buttonsize"},outputs:{action:"action"},features:[i._Bn([n.g,l._])],decls:4,vars:7,consts:[[1,"slds-dropdown-trigger","slds-dropdown-trigger--click",3,"ngClass"],["aria-haspopup","true",1,"slds-button","slds-button--icon-border-filled",3,"ngClass","disabled","click"],[3,"icon"],["class","slds-dropdown slds-dropdown--right",3,"ngClass",4,"ngIf"],[1,"slds-dropdown","slds-dropdown--right",3,"ngClass"],[3,"actionset"]],template:function(e,t){1&e&&(i.TgZ(0,"div",0)(1,"button",1),i.NdJ("click",(function(){return t.toggleOpen()})),i._UZ(2,"system-button-icon",2),i.qZA(),i.YNc(3,g,2,2,"div",3),i.qZA()),2&e&&(i.Q6J("ngClass",i.VKq(5,h,t.isOpen)),i.xp6(1),i.Q6J("ngClass",t.getButtonSizeClass())("disabled",t.hasNoActions()),i.xp6(1),i.Q6J("icon","down"),i.xp6(1),i.Q6J("ngIf",t.isOpen))},dependencies:[r.mk,r.O5,c.J,u.z],encapsulation:2})}return ObjectActionsetMenu})()},86094:(e,t,s)=>{"use strict";s.d(t,{z:()=>c});var i=s(62242),n=s(99637),l=s(93441),o=s(55329),a=s(55710),d=s(4154);const r=["acionsetcontainer"];let c=(()=>{class ObjectActionsetMenuContainer{language;model;metadata;elementRef;popup;helper;acionsetcontainer;actionset="";action=new i.vpe;constructor(e,t,s,i,n,l){this.language=e,this.model=t,this.metadata=s,this.elementRef=i,this.popup=n,this.helper=l}ngAfterViewInit(){if(""!=this.actionset){let e=this.metadata.getActionSetItems(this.actionset);for(let t of e)if(t.component)this.metadata.addComponent(t.component,this.acionsetcontainer);else switch(t.action){case"EDIT":this.metadata.addComponent("ObjectActionsetMenuContainerEdit",this.acionsetcontainer);break;case"DELETE":this.metadata.addComponent("ObjectActionsetMenuContainerDelete",this.acionsetcontainer)}}}static ɵfac=function(e){return new(e||ObjectActionsetMenuContainer)(i.Y36(o.d),i.Y36(a.o),i.Y36(d.Pu),i.Y36(i.SBq),i.Y36(n.g),i.Y36(l._))};static ɵcmp=i.Xpm({type:ObjectActionsetMenuContainer,selectors:[["object-actionset-menu-container"]],viewQuery:function(e,t){if(1&e&&i.Gf(r,7,i.s_b),2&e){let e;i.iGM(e=i.CRH())&&(t.acionsetcontainer=e.first)}},inputs:{actionset:"actionset"},outputs:{action:"action"},features:[i._Bn([n.g,l._])],decls:3,vars:0,consts:[["role","menu",1,"slds-dropdown__list"],["acionsetcontainer",""]],template:function(e,t){1&e&&(i.TgZ(0,"ul",0),i._UZ(1,"div",null,1),i.qZA())},encapsulation:2})}return ObjectActionsetMenuContainer})()},4663:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});var i=s(62242),n=s(55710),l=s(4154),o=s(26951);let a=(()=>{class ObjectEditModalDialogContainer{model;metadata;componentSet="";constructor(e,t){this.model=e,this.metadata=t}ngOnInit(){if(!this.componentSet||""==this.componentSet){let e=this.metadata.getComponentConfig("ObjectRecordDetails",this.model.module);this.componentSet=e.componentset}}static ɵfac=function(e){return new(e||ObjectEditModalDialogContainer)(i.Y36(n.o),i.Y36(l.Pu))};static ɵcmp=i.Xpm({type:ObjectEditModalDialogContainer,selectors:[["object-edit-modal-dialog-container"]],inputs:{componentSet:"componentSet"},decls:1,vars:1,consts:[[3,"componentset"]],template:function(e,t){1&e&&i._UZ(0,"system-componentset",0),2&e&&i.Q6J("componentset",t.componentSet)},dependencies:[o.E],encapsulation:2})}return ObjectEditModalDialogContainer})()},87228:(e,t,s)=>{"use strict";s.d(t,{s:()=>I});var i=s(50727),n=s(35684),l=s(62242),o=s(83348),a=s(4154),d=s(42644),r=s(55329),c=s(44044),u=s(26559),m=s(44755),g=s(13418),h=s(72656),p=s(64730),f=s(83463),b=s(42161),_=s(31058),v=s(16059),y=s(56857);function x(e,t){if(1&e&&l._UZ(0,"tr",8),2&e){const e=t.$implicit,s=t.index,i=l.oxw(2);l.Q6J("rownumbers",i.rowNumbers)("rowNumber",s+1)("listItem",e)("inlineedit",i.inlineedit)("rowselect",!0)}}function w(e,t){if(1&e&&(l.ynx(0),l.YNc(1,x,1,5,"tr",7),l.BQk()),2&e){const e=l.oxw();l.xp6(1),l.Q6J("ngForOf",e.modellist.listData.list)}}function Z(e,t){if(1&e&&l._UZ(0,"tr",10),2&e){const e=t.$implicit,s=t.index,i=l.oxw(2);l.Q6J("cdkDragData",e)("rownumbers",i.rowNumbers)("dragHandles",i.dragAndDrop)("rowNumber",s+1)("listItem",e)("inlineedit",i.inlineedit)("rowselect",!0)}}function T(e,t){if(1&e&&(l.ynx(0),l.YNc(1,Z,1,7,"tr",9),l.BQk()),2&e){const e=l.oxw();l.xp6(1),l.Q6J("ngForOf",e.modellist.listData.list)}}function C(e,t){if(1&e&&l._UZ(0,"tbody",11),2&e){const e=l.oxw();l.Q6J("columns",e.modellist.listfields.length)("select",!0)("rownumbers",e.rowNumbers)("dragHandles",e.dragAndDrop)("tools",!0)("rows",20)}}function k(e,t){if(1&e){const e=l.EpF();l.TgZ(0,"div",12)(1,"button",13),l.NdJ("click",(function(){l.CHM(e);const t=l.oxw();return l.KtG(t.loadMore())})),l._UZ(2,"system-button-icon",14)(3,"system-label",15),l.qZA()()}}function A(e,t){1&e&&(l.TgZ(0,"div",16)(1,"system-illustration-no-records"),l._UZ(2,"system-label",17),l.qZA()())}const L=function(e){return{"slds-table--bordered":e}};let I=(()=>{class ObjectList{router;cdRef;metadata;modellist;language;injector;modal;layout;subscriptions=new i.w0;componentconfig={};dragAndDrop=!1;constructor(e,t,s,i,n,l,o,a){this.router=e,this.cdRef=t,this.metadata=s,this.modellist=i,this.language=n,this.injector=l,this.modal=o,this.layout=a}get actionset(){return this.componentconfig.actionset}get isloading(){return this.modellist.isLoading}get inlineedit(){return this.componentconfig.inlineedit}get issmall(){return"small"==this.layout.screenwidth}get sortfield(){return this.componentconfig.sortfield}get sortdirection(){return this.componentconfig.sortdirection?this.componentconfig.sortdirection:"ASC"}get rowNumbers(){return!0===this.componentconfig.rownumbers}get noAutoLoad(){return!0===this.componentconfig.noautoload}get canLoadMore(){return this.modellist.canLoadMore()}ngOnInit(){this.initialize()}ngOnDestroy(){this.subscriptions.unsubscribe(),this.modellist.useCache=!1}loadMore(){this.modellist.loadMoreList()}onScroll(){this.noAutoLoad||this.modellist.loadMoreList()}trackbyfn(e,t){return t.id}initialize(){this.loadComponentConfig(),this.chooseFields(),this.modellist.loadlimit=50,this.modellist.buckets={},this.modellist.loadFromSession()||(this.componentconfig.sortfield&&(this.modellist.sortArray=[{sortfield:this.componentconfig.sortfield,sortdirection:this.componentconfig.sortdirection??"ASC"}]),this.getListData()),this.subscriptions.add(this.modellist.listType$.pipe((0,n.T)(1)).subscribe((e=>this.handleListTypeChange(e)))),this.subscriptions.add(this.modellist.listDataChanged$.subscribe((()=>{this.cdRef.detectChanges()})))}handleListTypeChange(e){this.cdRef.detectChanges(),"ObjectList"==e.listcomponent&&(this.chooseFields(),this.getListData())}loadComponentConfig(){this.componentconfig=this.metadata.getComponentConfig("ObjectList",this.modellist.module),"disableAutoloadListAll"in this.componentconfig||(this.componentconfig.disableAutoloadListAll=this.modellist.disableAutoloadListAll)}getListData(){"all"==this.modellist.currentList.id&&this.componentconfig?.disableAutoloadListAll?this.modellist.resetListData():this.modellist.getListData().subscribe((()=>this.cdRef.detectChanges()))}chooseFields(){this.modellist.isCustomList()&&0==this.modellist.listfields.length&&0==this.modellist.getFieldDefs()?.length&&this.modellist.checkAccess("edit")&&this.modal.openModal("ObjectListViewSettingsSetfieldsModal",!0,this.injector)}static ɵfac=function(e){return new(e||ObjectList)(l.Y36(o.F0),l.Y36(l.sBO),l.Y36(a.Pu),l.Y36(d.t),l.Y36(r.d),l.Y36(l.zs3),l.Y36(c.o),l.Y36(u.b))};static ɵcmp=l.Xpm({type:ObjectList,selectors:[["object-list"]],inputs:{dragAndDrop:"dragAndDrop"},decls:11,vars:11,consts:[[1,"slds-theme--default",2,"min-height","100px",3,"system-to-bottom"],["cdkDropList","","cdkDropListSortingDisabled","","role","grid",1,"slds-table","slds-table--fixed-layout","slds-max-medium-table--stacked-horizontal","slds-table--header-fixed",3,"ngClass"],["object-list-header","",1,"slds-text-title--caps",3,"actionset","showRowNumber","showDragHandle"],[4,"ngIf"],["system-table-stencils","",3,"columns","select","rownumbers","dragHandles","tools","rows",4,"ngIf"],["class","slds-size--1-of-1 slds-p-around--small slds-align--absolute-center",4,"ngIf"],["class","slds-align--absolute-center","style","height: calc(100% - 35px)",4,"ngIf"],["object-list-item","","class","slds-hint-parent",3,"rownumbers","rowNumber","listItem","inlineedit","rowselect",4,"ngFor","ngForOf"],["object-list-item","",1,"slds-hint-parent",3,"rownumbers","rowNumber","listItem","inlineedit","rowselect"],["object-list-item","","cdkDrag","","class","slds-hint-parent slds-drag--preview",3,"cdkDragData","rownumbers","dragHandles","rowNumber","listItem","inlineedit","rowselect",4,"ngFor","ngForOf"],["object-list-item","","cdkDrag","",1,"slds-hint-parent","slds-drag--preview",3,"cdkDragData","rownumbers","dragHandles","rowNumber","listItem","inlineedit","rowselect"],["system-table-stencils","",3,"columns","select","rownumbers","dragHandles","tools","rows"],[1,"slds-size--1-of-1","slds-p-around--small","slds-align--absolute-center"],[1,"slds-button","slds-button--neutral",3,"click"],["icon","skip_forward",1,"slds-p-right--x-small"],["label","LBL_LOAD_MORE"],[1,"slds-align--absolute-center",2,"height","calc(100% - 35px)"],["label","MSG_NO_RECORDS_FOUND"]],template:function(e,t){1&e&&(l.ynx(0),l.TgZ(1,"div",0),l.NdJ("system-to-bottom",(function(){return t.onScroll()})),l.TgZ(2,"table",1)(3,"thead"),l._UZ(4,"tr",2),l.qZA(),l.TgZ(5,"tbody"),l.YNc(6,w,2,1,"ng-container",3),l.YNc(7,T,2,1,"ng-container",3),l.qZA(),l.YNc(8,C,1,6,"tbody",4),l.qZA(),l.YNc(9,k,4,0,"div",5),l.YNc(10,A,3,0,"div",6),l.qZA(),l.BQk()),2&e&&(l.xp6(2),l.Q6J("ngClass",l.VKq(9,L,!t.issmall)),l.xp6(2),l.Q6J("actionset",t.actionset)("showRowNumber",t.rowNumbers)("showDragHandle",t.dragAndDrop),l.xp6(2),l.Q6J("ngIf",!t.dragAndDrop),l.xp6(1),l.Q6J("ngIf",t.dragAndDrop),l.xp6(1),l.Q6J("ngIf",t.isloading),l.xp6(1),l.Q6J("ngIf",t.noAutoLoad&&t.canLoadMore),l.xp6(1),l.Q6J("ngIf",!t.modellist.isLoading&&0==t.modellist.listData.totalcount))},dependencies:[m.mk,m.sg,m.O5,g.Wj,g.Zt,h.J,p.C,f._,b.x,_.H,v.p,y.B],encapsulation:2,changeDetection:0})}return ObjectList})()},16059:(e,t,s)=>{"use strict";s.d(t,{p:()=>Z});var i=s(32294),n=s(37982),l=s(50727),o=s(62242),a=s(42644),d=s(55329),r=s(26559),c=s(44755),u=s(66367),m=s(201),g=s(81802);const h=["object-list-header",""];function p(e,t){1&e&&o._UZ(0,"th",5)}function f(e,t){1&e&&(o.TgZ(0,"th",6)(1,"div",7),o._uU(2,"#"),o.qZA()())}function b(e,t){if(1&e&&o._UZ(0,"object-list-header-actionmenu",10),2&e){const e=o.oxw(2);o.Q6J("actionset",e.actionset)("displayasicon",e.isSmall)}}function _(e,t){if(1&e&&(o.TgZ(0,"th",8),o.YNc(1,b,1,2,"object-list-header-actionmenu",9),o.qZA()),2&e){const e=o.oxw();o.xp6(1),o.Q6J("ngIf",e.actionset)}}function v(e,t){if(1&e){const e=o.EpF();o.ynx(0),o.TgZ(1,"a",14),o.NdJ("click",(function(){o.CHM(e);const t=o.oxw().$implicit,s=o.oxw();return o.KtG(s.setSortField(t))})),o._UZ(2,"field-label",15)(3,"object-list-header-sort",16),o.qZA(),o.BQk()}if(2&e){const e=o.oxw().$implicit;o.xp6(2),o.Q6J("fieldname",e.field)("fieldconfig",e.fieldconfig),o.xp6(1),o.Q6J("field",e)}}function y(e,t){if(1&e&&o._UZ(0,"field-label",17),2&e){const e=o.oxw().$implicit;o.Q6J("fieldname",e.field)("fieldconfig",e.fieldconfig)}}function x(e,t){if(1&e){const e=o.EpF();o.TgZ(0,"th",11),o.NdJ("system-resize",(function(t){o.CHM(e);const s=o.oxw();return o.KtG(s.onresize(t))})),o.YNc(1,v,4,3,"ng-container",12),o.YNc(2,y,1,2,"ng-template",null,13,o.W1O),o.qZA()}if(2&e){const e=t.$implicit,s=o.MAs(3),i=o.oxw();o.Q6J("resizeid",e.id)("width",i.columnWidth(e.id)),o.xp6(1),o.Q6J("ngIf",i.isSortable(e))("ngIfElse",s)}}function w(e,t){1&e&&o._UZ(0,"th",18)}let Z=(()=>{class ObjectListHeader{modellist;language;view;elementRef;layout;cdref;resizeElements;reloadTimeOut;actionset="";showSelectColumn=!0;showRowNumber=!1;showDragHandle=!1;showRowActionMenu=!0;subscriptions=new l.w0;constructor(e,t,s,i,n,l){this.modellist=e,this.language=t,this.view=s,this.elementRef=i,this.layout=n,this.cdref=l,this.view.labels="short",this.subscriptions.add(this.modellist.listfield$.subscribe((e=>this.cdref.detectChanges())))}ngOnDestroy(){this.subscriptions.unsubscribe()}get isSmall(){return"small"==this.layout.screenwidth}get listfields(){return this.modellist.listfields}get module(){return this.modellist.module}columnWidth(e){let t=this.listfields.find((t=>t.id==e));return t.width?t.width+"%":100/this.listfields.length+"%"}isSortable(e){return!0===e.fieldconfig.sortable}hasRevertedSortOrder(e){return!!e.fieldconfig.sortordersequence}setSortField(e){this.isSortable(e)&&(this.modellist.setSortField(e.field,null,!0,this.hasRevertedSortOrder(e)),this.reloadTimeOut&&window.clearTimeout(this.reloadTimeOut),this.reloadTimeOut=window.setTimeout((()=>this.modellist.reLoadList()),500))}onresize(e){let t={},s=0;this.resizeElements.forEach((e=>{let i=e.getElementWidth();s+=i,t[e.resizeid]=e.getElementWidth()}));for(let e of this.listfields)e.width=Math.round(t[e.id]/s*100)}static ɵfac=function(e){return new(e||ObjectListHeader)(o.Y36(a.t),o.Y36(d.d),o.Y36(i.e),o.Y36(o.SBq),o.Y36(r.b),o.Y36(o.sBO))};static ɵcmp=o.Xpm({type:ObjectListHeader,selectors:[["","object-list-header",""]],viewQuery:function(e,t){if(1&e&&o.Gf(n.h,5),2&e){let e;o.iGM(e=o.CRH())&&(t.resizeElements=e)}},inputs:{actionset:"actionset",showSelectColumn:"showSelectColumn",showRowNumber:"showRowNumber",showDragHandle:"showDragHandle",showRowActionMenu:"showRowActionMenu"},features:[o._Bn([i.e])],attrs:h,decls:5,vars:5,consts:[["scope","col","style","width:1.5rem",4,"ngIf"],["style","width:4rem","scope","col",4,"ngIf"],["style","width:2rem","scope","col",4,"ngIf"],["scope","col","class","slds-resizable",3,"resizeid","width","system-resize",4,"ngFor","ngForOf"],["class","slds-cell-shrink","scope","col",4,"ngIf"],["scope","col",2,"width","1.5rem"],["scope","col",2,"width","4rem"],[1,"slds-text-align--center","slds-text-body--small","slds-text-color--inverse-weak"],["scope","col",2,"width","2rem"],["class","slds-p-left--x-small",3,"actionset","displayasicon",4,"ngIf"],[1,"slds-p-left--x-small",3,"actionset","displayasicon"],["scope","col",1,"slds-resizable",3,"resizeid","width","system-resize"],[4,"ngIf","ngIfElse"],["nosort",""],["href","javascript:void(0);",1,"slds-th__action","slds-text-link--reset",3,"click"],["addclasses","slds-truncate",1,"slds-truncate",3,"fieldname","fieldconfig"],[3,"field"],["addclasses","slds-truncate slds-p-vertical--xx-small slds-p-horizontal--x-small",3,"fieldname","fieldconfig"],["scope","col",1,"slds-cell-shrink"]],template:function(e,t){1&e&&(o.YNc(0,p,1,0,"th",0),o.YNc(1,f,3,0,"th",1),o.YNc(2,_,2,1,"th",2),o.YNc(3,x,4,4,"th",3),o.YNc(4,w,1,0,"th",4)),2&e&&(o.Q6J("ngIf",t.showDragHandle),o.xp6(1),o.Q6J("ngIf",t.showRowNumber),o.xp6(1),o.Q6J("ngIf",t.showSelectColumn),o.xp6(1),o.Q6J("ngForOf",t.listfields),o.xp6(1),o.Q6J("ngIf",t.showRowActionMenu))},dependencies:[c.sg,c.O5,u.q,n.h,m._,g.g],encapsulation:2})}return ObjectListHeader})()},81802:(e,t,s)=>{"use strict";s.d(t,{g:()=>y});var i=s(2294),n=s(62242),l=s(42644),o=s(55329),a=s(4154),d=s(55710),r=s(44044),c=s(44755),u=s(72656),m=s(83463),g=s(14361),h=s(50151),p=s(92667);const f=function(e){return{"slds-hide":e}},b=function(e){return{"slds-disabled-text":e}};function _(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"li",12),n.NdJ("click",(function(){const t=n.CHM(e).$implicit,s=n.oxw(2);return n.KtG(s.propagateclick(t.id))})),n.TgZ(1,"a",7)(2,"object-action-container-item",13),n.NdJ("actionemitter",(function(t){n.CHM(e);const s=n.oxw(2);return n.KtG(s.emitaction(t))})),n.qZA()()()}if(2&e){const e=t.$implicit,s=n.oxw(2);n.Q6J("ngClass",n.VKq(4,f,s.isHidden(e.id))),n.xp6(2),n.Q6J("displayasicon",s.displayasicon)("ngClass",n.VKq(6,b,s.isDisabled(e.id)))("actionitem",e)}}function v(e,t){if(1&e&&(n.ynx(0),n.YNc(1,_,3,8,"li",10),n._UZ(2,"li",11),n.BQk()),2&e){const e=n.oxw();n.xp6(1),n.Q6J("ngForOf",e.actionitems)}}let y=(()=>{class ObjectListHeaderActionMenu extends i.S{modellist;language;metadata;model;ngZone;cdRef;modal;injector;actionitems=[];constructor(e,t,s,i,n,l,o,a){super(t,s,i,n,l),this.modellist=e,this.language=t,this.metadata=s,this.model=i,this.ngZone=n,this.cdRef=l,this.modal=o,this.injector=a}ngOnChanges(){let e=this.metadata.getActionSetItems(this.actionset);this.actionitems=[];for(let t of e)this.actionitems.push({disabled:!0,id:t.id,sequence:t.sequence,action:t.action,component:t.component,actionconfig:t.actionconfig})}get selectAll(){return"all"===this.modellist.listSelected.type}get hasSelection(){return this.modellist.getSelectedCount()>0}chooseFields(){if(!this.canChooseFields)return!1;this.modal.openModal("ObjectListViewSettingsSetfieldsModal",!0,this.injector)}get canChooseFields(){return"all"!=this.modellist.currentList.id&&"owner"!=this.modellist.currentList.id&&this.modellist.checkAccess("edit")}static ɵfac=function(e){return new(e||ObjectListHeaderActionMenu)(n.Y36(l.t),n.Y36(o.d),n.Y36(a.Pu),n.Y36(d.o),n.Y36(n.R0b),n.Y36(n.sBO),n.Y36(r.o),n.Y36(n.zs3))};static ɵcmp=n.Xpm({type:ObjectListHeaderActionMenu,selectors:[["object-list-header-actionmenu"]],features:[n.qOj,n.TTD],decls:10,vars:5,consts:[["system-dropdown-trigger-simple","",1,"slds-dropdown-trigger","slds-dropdown-trigger--click"],["system-title","LBL_SETTINGS",1,"slds-button","slds-button--icon"],[3,"icon"],[1,"slds-dropdown","slds-dropdown--left","slds-m-top--x-small"],["role","menu",1,"slds-dropdown__list"],[4,"ngIf"],["role","presentation",1,"slds-dropdown__item",3,"click"],["href","javascript:void(0);","role","menuitem","tabindex","-1"],[3,"ngClass"],["label","LBL_SETFIELDS"],["class","slds-dropdown__item","role","presentation",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"slds-has-divider--bottom-space"],["role","presentation",1,"slds-dropdown__item",3,"ngClass","click"],[1,"slds-truncate",3,"displayasicon","ngClass","actionitem","actionemitter"]],template:function(e,t){1&e&&(n.TgZ(0,"div",0)(1,"button",1),n._UZ(2,"system-button-icon",2),n.qZA(),n.TgZ(3,"div",3)(4,"ul",4),n.YNc(5,v,3,1,"ng-container",5),n.TgZ(6,"li",6),n.NdJ("click",(function(){return t.chooseFields()})),n.TgZ(7,"a",7)(8,"span",8),n._UZ(9,"system-label",9),n.qZA()()()()()()),2&e&&(n.xp6(2),n.Q6J("icon","down"),n.xp6(3),n.Q6J("ngIf",t.actionitems.length>0),n.xp6(3),n.Q6J("ngClass",n.VKq(3,b,!t.canChooseFields)))},dependencies:[c.mk,c.sg,c.O5,u.J,m._,g.w,h.S,p.s],encapsulation:2})}return ObjectListHeaderActionMenu})()},201:(e,t,s)=>{"use strict";s.d(t,{_:()=>u});var i=s(62242),n=s(42644),l=s(44755),o=s(78859);function a(e,t){1&e&&i._UZ(0,"system-utility-icon",5)}function d(e,t){if(1&e&&i._UZ(0,"system-utility-icon",6),2&e){const e=i.oxw(2);i.Q6J("icon",e.sortIcon)}}function r(e,t){if(1&e&&(i.TgZ(0,"div",7),i._uU(1),i.qZA()),2&e){const e=i.oxw(2);i.xp6(1),i.Oqu(e.sortindex)}}function c(e,t){if(1&e&&(i.TgZ(0,"div",1),i.YNc(1,a,1,0,"system-utility-icon",2),i.YNc(2,d,1,1,"system-utility-icon",3),i.YNc(3,r,2,1,"div",4),i.qZA()),2&e){const e=i.oxw();i.xp6(1),i.Q6J("ngIf",!e.sortIcon),i.xp6(1),i.Q6J("ngIf",e.sortIcon),i.xp6(1),i.Q6J("ngIf",e.sortindex>0)}}let u=(()=>{class ObjectListHeaderSort{modellist;field;constructor(e){this.modellist=e}get module(){return this.modellist.module}get isSortable(){return!0===this.field.fieldconfig.sortable}get sortIcon(){let e=this.modellist.getSortField(this.field.field);return e?"ASC"==e.sortdirection?"arrowup":"arrowdown":""}get sortindex(){let e=this.modellist.getSortField(this.field.field);return e&&e.sortitems>1?e.sortindex+1:""}static ɵfac=function(e){return new(e||ObjectListHeaderSort)(i.Y36(n.t))};static ɵcmp=i.Xpm({type:ObjectListHeaderSort,selectors:[["object-list-header-sort"]],inputs:{field:"field"},decls:1,vars:1,consts:[["class","slds-grid slds-grid--vertical-align-center slds-p-horizontal--xx-small",4,"ngIf"],[1,"slds-grid","slds-grid--vertical-align-center","slds-p-horizontal--xx-small"],["icon","sort","size","xx-small","colorclass","slds-icon-text-light",4,"ngIf"],["size","xx-small",3,"icon",4,"ngIf"],["class","slds-align--absolute-center slds-theme--info","style","height: 18px; width: 18px; border-radius: 9px",4,"ngIf"],["icon","sort","size","xx-small","colorclass","slds-icon-text-light"],["size","xx-small",3,"icon"],[1,"slds-align--absolute-center","slds-theme--info",2,"height","18px","width","18px","border-radius","9px"]],template:function(e,t){1&e&&i.YNc(0,c,4,3,"div",0),2&e&&i.Q6J("ngIf",t.isSortable)},dependencies:[l.O5,o.r],encapsulation:2})}return ObjectListHeaderSort})()},56857:(e,t,s)=>{"use strict";s.d(t,{B:()=>Z});var i=s(55710),n=s(32294),l=s(62242),o=s(29266),a=s(42644),d=s(83348),r=s(55329),c=s(44755),u=s(13418),m=s(95030),g=s(33634),h=s(7514),p=s(78859),f=s(20586);const b=["object-list-item",""];function _(e,t){if(1&e&&(l.TgZ(0,"td",4)(1,"div",5),l._uU(2),l.qZA()()),2&e){const e=l.oxw();l.xp6(2),l.Oqu(e.rowNumber)}}function v(e,t){1&e&&(l.TgZ(0,"td",6),l._UZ(1,"system-utility-icon",7),l.qZA()),2&e&&(l.xp6(1),l.Q6J("icon","drag_and_drop")("size","x-small"))}function y(e,t){if(1&e){const e=l.EpF();l.TgZ(0,"td",6)(1,"system-checkbox",8),l.NdJ("ngModelChange",(function(t){l.CHM(e);const s=l.oxw();return l.KtG(s.listItem.selected=t)})),l.qZA()()}if(2&e){const e=l.oxw();l.xp6(1),l.Q6J("disabled",e.rowselectdisabled)("ngModel",e.listItem.selected)}}function x(e,t){if(1&e&&(l.TgZ(0,"td",9),l._UZ(1,"field-container",10),l.qZA()),2&e){const e=t.$implicit,s=l.oxw();l.uIk("data-label",s.language.getFieldDisplayName(s.model.module,e.field)),l.xp6(1),l.Q6J("field",e.field)("fieldconfig",e.fieldconfig)("fielddisplayclass","slds-truncate slds-p-horizontal--x-small")}}function w(e,t){1&e&&(l.TgZ(0,"td",11),l._UZ(1,"object-action-menu",12),l.qZA()),2&e&&(l.xp6(1),l.Q6J("buttonsize","small"))}let Z=(()=>{class ObjectListItem{model;modelutilities;modellist;view;router;language;cdref;_listFields;rowselect=!1;rownumbers=!1;dragHandles=!1;rowselectdisabled=!1;listItem={};inlineedit=!1;displaylinks=!0;rowNumber;showActionMenu=!0;subscriptions=[];constructor(e,t,s,i,n,l,o){this.model=e,this.modelutilities=t,this.modellist=s,this.view=i,this.router=n,this.language=l,this.cdref=o,this.view.displayLabels=!1}get listFields(){return this._listFields??this.modellist.listfields}ngOnInit(){this.model.module=this.modellist.module,this.model.id=this.listItem.id,this.model.setData(this.listItem),this.model.validate("change"),this.model.initializeFieldsStati(),this.view.isEditable=this.inlineedit&&this.model.checkAccess("edit"),this.view.displayLinks=this.displaylinks,this.subscriptions.push(this.model.data$.subscribe((e=>this.cdref.detectChanges()))),this.subscriptions.push(this.modellist.listfield$.subscribe((e=>this.cdref.detectChanges()))),this.subscriptions.push(this.modellist.selectionChanged$.subscribe((e=>this.cdref.detectChanges())))}ngOnDestroy(){for(let e of this.subscriptions)e.unsubscribe()}navigateDetail(){this.router.navigate(["/module/"+this.model.module+"/"+this.model.id])}static ɵfac=function(e){return new(e||ObjectListItem)(l.Y36(i.o),l.Y36(o.A),l.Y36(a.t),l.Y36(n.e),l.Y36(d.F0),l.Y36(r.d),l.Y36(l.sBO))};static ɵcmp=l.Xpm({type:ObjectListItem,selectors:[["","object-list-item",""]],inputs:{_listFields:["listFields","_listFields"],rowselect:"rowselect",rownumbers:"rownumbers",dragHandles:"dragHandles",rowselectdisabled:"rowselectdisabled",listItem:"listItem",inlineedit:"inlineedit",displaylinks:"displaylinks",rowNumber:"rowNumber",showActionMenu:"showActionMenu"},features:[l._Bn([i.o,n.e])],attrs:b,decls:5,vars:5,consts:[["role","gridcell","class","slds-show--medium","style","min-width: 3rem",4,"ngIf"],["role","gridcell","class","slds-show--medium",4,"ngIf"],["style","min-width: 2rem","scope","row",4,"ngFor","ngForOf"],["role","gridcell","class","slds-cell-shrink",4,"ngIf"],["role","gridcell",1,"slds-show--medium",2,"min-width","3rem"],[1,"slds-text-align--center","slds-text-body--small","slds-text-color--inverse-weak"],["role","gridcell",1,"slds-show--medium"],["cdkDragHandle","",2,"cursor","move",3,"icon","size"],[3,"disabled","ngModel","ngModelChange"],["scope","row",2,"min-width","2rem"],[3,"field","fieldconfig","fielddisplayclass"],["role","gridcell",1,"slds-cell-shrink"],[3,"buttonsize"]],template:function(e,t){1&e&&(l.YNc(0,_,3,1,"td",0),l.YNc(1,v,2,2,"td",1),l.YNc(2,y,2,2,"td",1),l.YNc(3,x,2,4,"td",2),l.YNc(4,w,2,1,"td",3)),2&e&&(l.Q6J("ngIf",t.rownumbers),l.xp6(1),l.Q6J("ngIf",t.dragHandles),l.xp6(1),l.Q6J("ngIf",t.rowselect),l.xp6(1),l.Q6J("ngForOf",t.listFields),l.xp6(1),l.Q6J("ngIf",t.showActionMenu))},dependencies:[c.sg,c.O5,u.Bh,m.JJ,m.On,g.j,h.U,p.r,f.g],styles:["[_nghost-%COMP%]   field-container[_ngcontent-%COMP%]   global-button-icon[_ngcontent-%COMP%]{display:none}","[_nghost-%COMP%]:hover   field-container[_ngcontent-%COMP%]   global-button-icon[_ngcontent-%COMP%]{display:inline}"],changeDetection:0})}return ObjectListItem})()},57102:(e,t,s)=>{"use strict";s.d(t,{l:()=>p});var i=s(50727),n=s(62242),l=s(42644),o=s(55329),a=s(44755),d=s(72656),r=s(83463),c=s(78859),u=s(14361);const m=function(e){return{"slds-is-selected":e}};function g(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"li",11),n.NdJ("click",(function(){const t=n.CHM(e).$implicit,s=n.oxw();return n.KtG(s.setListType(t.id))})),n.TgZ(1,"a",12)(2,"span",13),n._UZ(3,"system-utility-icon",14),n._uU(4),n.qZA()()()}if(2&e){const e=t.$implicit,s=n.oxw();n.Q6J("ngClass",n.VKq(2,m,s.modellist.currentList.id==e.id)),n.xp6(4),n.hij(" ",e.name," ")}}function h(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"li",11),n.NdJ("click",(function(){const t=n.CHM(e).$implicit,s=n.oxw();return n.KtG(s.setListType(t.id))})),n.TgZ(1,"a",12)(2,"span",13),n._UZ(3,"system-utility-icon",14),n._uU(4),n.qZA(),n._UZ(5,"system-utility-icon",15),n.qZA()()}if(2&e){const e=t.$implicit,s=n.oxw();n.Q6J("ngClass",n.VKq(3,m,e.id==s.modellist.currentList.id)),n.xp6(4),n.hij(" ",e.name," "),n.xp6(1),n.Q6J("icon",e.icon)}}let p=(()=>{class ObjectListTypes{modellist;elementRef;renderer;language;listTypes=[];subscription=new i.w0;constructor(e,t,s,i){this.modellist=e,this.elementRef=t,this.renderer=s,this.language=i,this.initialize()}get disabled(){return this.modellist.standardLists.length+this.listTypes.length<=1}initialize(){this.setListTypes(),this.subscription=this.modellist.listType$.subscribe((()=>{this.setListTypes()}))}setListTypes(){this.listTypes=this.modellist.getListTypes(!1).map((e=>({...e,icon:e.global&&"0"!=e.global?"world":"user"}))).sort(((e,t)=>e.name.toLowerCase()>t.name.toLowerCase()?1:-1))}showMenu=!1;setListType(e="all"){this.modellist.setListType(e),this.showMenu=!1}onClick(e){if(!e.target)return;this.elementRef.nativeElement.contains(e.target)||(this.showMenu=!1)}getListtypeIcon(e){return e.global&&"0"!=e.global?"world":"user"}static ɵfac=function(e){return new(e||ObjectListTypes)(n.Y36(l.t),n.Y36(n.SBq),n.Y36(n.Qsj),n.Y36(o.d))};static ɵcmp=n.Xpm({type:ObjectListTypes,selectors:[["object-list-types"]],decls:13,vars:5,consts:[[1,"slds-media__body","slds-dropdown-trigger","slds-dropdown-trigger--click",3,"system-dropdown-trigger-simple"],[1,"slds-grid","slds-grid--vertical-align-center","slds-truncate","slds-p-right--small"],[1,"slds-page-header__title","slds-show--medium","slds-p-right--xx-small"],[1,"slds-button",3,"disabled"],["icon","down","size","small"],[1,"slds-dropdown","slds-dropdown--left","slds-dropdown--medium"],["role","menu",1,"slds-dropdown__list"],["role","separator",1,"slds-dropdown__header","slds-has-divider--bottom"],[1,"slds-text-title--caps"],["label","LBL_LIST_TYPES"],["class","slds-dropdown__item","role","presentation",3,"ngClass","click",4,"ngFor","ngForOf"],["role","presentation",1,"slds-dropdown__item",3,"ngClass","click"],["href","javascript:void(0);","role","menuitemcheckbox"],[1,"slds-truncate"],["size","x-small","icon","check","addclasses","slds-icon slds-icon_selected slds-icon_x-small slds-icon-text-default slds-m-right_x-small"],["size","x-small",3,"icon"]],template:function(e,t){1&e&&(n.TgZ(0,"div",0)(1,"div",1)(2,"h1",2),n._uU(3),n.qZA(),n.TgZ(4,"button",3),n._UZ(5,"system-button-icon",4),n.qZA()(),n.TgZ(6,"div",5)(7,"ul",6)(8,"li",7)(9,"span",8),n._UZ(10,"system-label",9),n.qZA()(),n.YNc(11,g,5,4,"li",10),n.YNc(12,h,6,5,"li",10),n.qZA()()()),2&e&&(n.Q6J("system-dropdown-trigger-simple",t.disabled),n.xp6(3),n.Oqu(t.modellist.currentList.name),n.xp6(1),n.Q6J("disabled",t.disabled),n.xp6(7),n.Q6J("ngForOf",t.modellist.standardLists),n.xp6(1),n.Q6J("ngForOf",t.listTypes))},dependencies:[a.mk,a.sg,d.J,r._,c.r,u.w],encapsulation:2})}return ObjectListTypes})()},37954:(e,t,s)=>{"use strict";s.d(t,{i:()=>v});var i=s(62242),n=s(55329),l=s(42644),o=s(55710),a=s(44755),d=s(83463),r=s(78859),c=s(80079);function u(e,t){if(1&e&&(i.TgZ(0,"li",8),i._uU(1),i.qZA()),2&e){const e=t.$implicit;i.xp6(1),i.Oqu(e)}}function m(e,t){if(1&e&&(i.TgZ(0,"div",9),i._uU(1),i._UZ(2,"system-label",10),i._uU(3,")"),i.qZA()),2&e){const e=i.oxw();i.xp6(1),i.hij("(",e.checkdCount," ")}}function g(e,t){if(1&e&&(i.TgZ(0,"div",13),i._UZ(1,"object-listview-aggregate-item",14),i.qZA()),2&e){const e=t.$implicit,s=i.oxw(2);i.xp6(1),i.Q6J("bucketitem",e)("aggregate",s.aggregate)}}function h(e,t){if(1&e&&(i.TgZ(0,"span"),i._uU(1),i.qZA()),2&e){const e=i.oxw(4);i.xp6(1),i.hij(" (+",e.aggregateBucketCount-5,")")}}function p(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"a",18),i.NdJ("click",(function(){i.CHM(e);const t=i.oxw(3);return i.KtG(t.showall=!t.showall)})),i._UZ(1,"system-label",19),i.YNc(2,h,2,1,"span",7),i.qZA()}if(2&e){const e=i.oxw(3);i.xp6(1),i.Q6J("label",e.showall?"LBL_LESS":"LBL_MORE"),i.xp6(1),i.Q6J("ngIf",!e.showall)}}function f(e,t){if(1&e&&(i.TgZ(0,"p",20),i._uU(1),i._UZ(2,"system-label",21),i._uU(3,"..."),i.qZA()),2&e){const e=i.oxw(3);i.xp6(1),i.hij("",e.otherDocCount," ")}}function b(e,t){if(1&e&&(i.TgZ(0,"div",15)(1,"div"),i.YNc(2,p,3,2,"a",16),i.qZA(),i.TgZ(3,"div"),i.YNc(4,f,4,1,"p",17),i.qZA()()),2&e){const e=i.oxw(2);i.xp6(2),i.Q6J("ngIf",e.aggregateBucketCount>e.aggregateDefaultItems),i.xp6(2),i.Q6J("ngIf",e.otherDocCount>0)}}function _(e,t){if(1&e&&(i.ynx(0),i.YNc(1,g,2,2,"div",11),i.YNc(2,b,5,2,"div",12),i.BQk()),2&e){const e=i.oxw();i.xp6(1),i.Q6J("ngForOf",e.aggregateBuckets),i.xp6(1),i.Q6J("ngIf",e.aggregateBucketCount>e.aggregateDefaultItems||e.otherDocCount>0)}}let v=(()=>{class ObjectListViewAggregate{language;modellist;model;aggregate={};aggregateDefaultItems=5;showall=!1;constructor(e,t,s){this.language=e,this.modellist=t,this.model=s}get aggregateNameItems(){let e=[];return this.aggregate.fielddetails&&(this.model.module!=this.aggregate.fielddetails.module&&e.push(this.language.getModuleName(this.aggregate.fielddetails.module,!0)),e.push(this.language.getFieldDisplayName(this.aggregate.fielddetails.module,this.aggregate.fielddetails.field))),e}get aggregatename(){return this.aggregate.indexfieldname?.replace(/>/g,"")}get aggregateBucketCount(){return this.aggregatename&&this.modellist.searchAggregates?.[this.aggregatename]?this.modellist.searchAggregates?.[this.aggregatename].buckets.length:0}get aggregateBuckets(){return this.aggregatename&&this.modellist.searchAggregates?.[this.aggregatename]?this.modellist.searchAggregates?.[this.aggregatename].buckets.filter(((e,t)=>this.showall||t<this.aggregateDefaultItems||this.modellist.checkAggregate(this.aggregatename,e.aggdata))):[]}get otherDocCount(){return this.aggregatename&&this.modellist.searchAggregates?.[this.aggregatename]?this.modellist.searchAggregates?.[this.aggregatename].sum_other_doc_count:0}get checkdCount(){return this.modellist.getCheckedAggregateCount(this.aggregatename)}get collapsed(){return!!this.aggregate.collapsed}toggleCollapsed(){this.aggregate.collapsed=!this.aggregate.collapsed}static ɵfac=function(e){return new(e||ObjectListViewAggregate)(i.Y36(n.d),i.Y36(l.t),i.Y36(o.o))};static ɵcmp=i.Xpm({type:ObjectListViewAggregate,selectors:[["object-listview-aggregate"]],inputs:{aggregate:"aggregate"},decls:8,vars:4,consts:[[1,"slds-filters__item","slds-p-horizontal--small","slds-p-vertical--xx-small"],[1,"slds-p-vertical--xx-small","slds-grid","slds-grid--vertical-align-center","slds-grid--align-spread",3,"click"],[1,"slds-grid"],[1,"slds-list_horizontal","slds-has-dividers_right"],["class","slds-item",4,"ngFor","ngForOf"],["class","slds-p-left--xx-small",4,"ngIf"],["size","x-small",3,"icon"],[4,"ngIf"],[1,"slds-item"],[1,"slds-p-left--xx-small"],["label","LBL_SELECTED"],["class","slds-form-element",4,"ngFor","ngForOf"],["class","slds-grid slds-grid--vertical-align-center slds-grid--align-spread slds-p-top--xx-small",4,"ngIf"],[1,"slds-form-element"],[1,"slds-form-element__control",3,"bucketitem","aggregate"],[1,"slds-grid","slds-grid--vertical-align-center","slds-grid--align-spread","slds-p-top--xx-small"],["class","slds-text-body--small","href","javascript:void(0);",3,"click",4,"ngIf"],["class","slds-text-body--small slds-text-color--weak",4,"ngIf"],["href","javascript:void(0);",1,"slds-text-body--small",3,"click"],[3,"label"],[1,"slds-text-body--small","slds-text-color--weak"],["label","LBL_ARE_NOT_INCLUDED"]],template:function(e,t){1&e&&(i.TgZ(0,"div",0)(1,"div",1),i.NdJ("click",(function(){return t.toggleCollapsed()})),i.TgZ(2,"div",2)(3,"ul",3),i.YNc(4,u,2,1,"li",4),i.qZA(),i.YNc(5,m,4,1,"div",5),i.qZA(),i._UZ(6,"system-utility-icon",6),i.qZA(),i.YNc(7,_,3,2,"ng-container",7),i.qZA()),2&e&&(i.xp6(4),i.Q6J("ngForOf",t.aggregateNameItems),i.xp6(1),i.Q6J("ngIf",t.collapsed&&t.checkdCount>0),i.xp6(1),i.Q6J("icon",t.collapsed?"down":"up"),i.xp6(1),i.Q6J("ngIf",!t.collapsed))},dependencies:[a.sg,a.O5,d._,r.r,c.Q],encapsulation:2})}return ObjectListViewAggregate})()},80079:(e,t,s)=>{"use strict";s.d(t,{Q:()=>f});var i=s(62242),n=s(55329),l=s(4154),o=s(42644),a=s(44755),d=s(95030),r=s(7514),c=s(84270),u=s(65232),m=s(30115);function g(e,t){if(1&e&&i._UZ(0,"object-listview-aggregate-item-range",7),2&e){const e=i.oxw();i.Q6J("aggregate",e.aggregate)("item",e.bucketitem)}}function h(e,t){if(1&e&&i._UZ(0,"object-listview-aggregate-item-term",7),2&e){const e=i.oxw();i.Q6J("aggregate",e.aggregate)("item",e.bucketitem)}}function p(e,t){if(1&e&&(i.TgZ(0,"div"),i._uU(1),i.qZA()),2&e){const e=i.oxw();i.xp6(1),i.Oqu(e.bucketitem.displayName)}}let f=(()=>{class ObjectListViewAggregateItem{elementRef;language;metadata;modellist;bucketitem={};aggregate={};isChecked=!1;constructor(e,t,s,i){this.elementRef=e,this.language=t,this.metadata=s,this.modellist=i}get aggregatename(){return this.aggregate.indexfieldname?.replace(/>/g,"")}get disabled(){return this.modellist.isLoading||!this.modellist.canChangeAggegate(this.aggregatename)}set checked(e){if(this.isChecked=e,e)this.modellist.setAggregate(this.aggregatename,this.bucketitem.aggdata),this.modellist.scheduleReloadList();else{this.modellist.removeAggregate(this.aggregatename,this.bucketitem.aggdata)&&this.modellist.scheduleReloadList()}}get checked(){return this.modellist.checkAggregate(this.aggregatename,this.bucketitem.aggdata)}static ɵfac=function(e){return new(e||ObjectListViewAggregateItem)(i.Y36(i.SBq),i.Y36(n.d),i.Y36(l.Pu),i.Y36(o.t))};static ɵcmp=i.Xpm({type:ObjectListViewAggregateItem,selectors:[["object-listview-aggregate-item"]],inputs:{bucketitem:"bucketitem",aggregate:"aggregate"},decls:10,vars:8,consts:[[1,"slds-grid","slds-grid--vertical-align-center"],[3,"disabled","ngModel","hidelabel","ngModelChange"],[1,"slds-grow","slds-truncate",3,"ngSwitch"],[3,"aggregate","item",4,"ngSwitchCase"],[4,"ngSwitchDefault"],[1,"slds-p-left--xx-small","slds-text-align--right",2,"min-width","45px"],[3,"number","noDigits"],[3,"aggregate","item"]],template:function(e,t){1&e&&(i.TgZ(0,"div",0)(1,"system-checkbox",1),i.NdJ("ngModelChange",(function(e){return t.checked=e})),i.qZA(),i.TgZ(2,"div",2),i.YNc(3,g,1,2,"object-listview-aggregate-item-range",3),i.YNc(4,h,1,2,"object-listview-aggregate-item-term",3),i.YNc(5,p,2,1,"div",4),i.qZA(),i.TgZ(6,"div",5),i._uU(7,"("),i._UZ(8,"system-display-number",6),i._uU(9,")"),i.qZA()()),2&e&&(i.xp6(1),i.Q6J("disabled",t.disabled)("ngModel",t.checked)("hidelabel",!0),i.xp6(1),i.Q6J("ngSwitch",t.aggregate.type),i.xp6(1),i.Q6J("ngSwitchCase","range"),i.xp6(1),i.Q6J("ngSwitchCase","term"),i.xp6(4),i.Q6J("number",t.bucketitem.doc_count)("noDigits",!0))},dependencies:[a.RF,a.n9,a.ED,d.JJ,d.On,r.U,c.G,u.C,m.V],encapsulation:2})}return ObjectListViewAggregateItem})()},30115:(e,t,s)=>{"use strict";s.d(t,{V:()=>p});var i=s(62242),n=s(55710),l=s(44755),o=s(83463),a=s(65232);function d(e,t){if(1&e&&(i.TgZ(0,"div"),i._UZ(1,"system-label",3),i.qZA()),2&e){const e=i.oxw();i.xp6(1),i.Q6J("label",e.item.displayName)}}const r=function(e){return{key:e}};function c(e,t){if(1&e&&i._UZ(0,"object-listview-aggregate-item-term",7),2&e){const e=i.oxw(2);i.Q6J("aggregate",e.aggregate)("item",i.VKq(2,r,e.item.from))}}function u(e,t){1&e&&(i.TgZ(0,"span"),i._uU(1,"*"),i.qZA())}function m(e,t){if(1&e&&i._UZ(0,"object-listview-aggregate-item-term",7),2&e){const e=i.oxw(2);i.Q6J("aggregate",e.aggregate)("item",i.VKq(2,r,e.item.to))}}function g(e,t){1&e&&(i.TgZ(0,"span"),i._uU(1,"*"),i.qZA())}function h(e,t){if(1&e&&(i.TgZ(0,"div"),i.YNc(1,c,1,4,"object-listview-aggregate-item-term",4),i.YNc(2,u,2,0,"span",5),i.qZA(),i.TgZ(3,"div",6),i._uU(4," - "),i.qZA(),i.TgZ(5,"div"),i.YNc(6,m,1,4,"object-listview-aggregate-item-term",4),i.YNc(7,g,2,0,"span",5),i.qZA()),2&e){const e=i.oxw();i.xp6(1),i.Q6J("ngIf",e.item.from),i.xp6(1),i.Q6J("ngIf",!e.item.from),i.xp6(4),i.Q6J("ngIf",e.item.to),i.xp6(1),i.Q6J("ngIf",!e.item.to)}}let p=(()=>{class ObjectListViewAggregateItemRange{model;item={};aggregate={};constructor(e){this.model=e}static ɵfac=function(e){return new(e||ObjectListViewAggregateItemRange)(i.Y36(n.o))};static ɵcmp=i.Xpm({type:ObjectListViewAggregateItemRange,selectors:[["object-listview-aggregate-item-range"]],inputs:{item:"item",aggregate:"aggregate"},decls:4,vars:2,consts:[[1,"slds-grid","slds-grid--vertical-align-center"],[4,"ngIf","ngIfElse"],["noDisplayname",""],[3,"label"],[3,"aggregate","item",4,"ngIf"],[4,"ngIf"],[1,"slds-p-horizontal--xx-small"],[3,"aggregate","item"]],template:function(e,t){if(1&e&&(i.TgZ(0,"div",0),i.YNc(1,d,2,1,"div",1),i.YNc(2,h,8,4,"ng-template",null,2,i.W1O),i.qZA()),2&e){const e=i.MAs(3);i.xp6(1),i.Q6J("ngIf",t.item.displayName)("ngIfElse",e)}},dependencies:[l.O5,o._,a.C],encapsulation:2})}return ObjectListViewAggregateItemRange})()},65232:(e,t,s)=>{"use strict";s.d(t,{C:()=>u});var i=s(55710),n=s(32294),l=s(62242),o=s(44755),a=s(33634),d=s(83463);function r(e,t){1&e&&(l.TgZ(0,"span",2),l._UZ(1,"system-label",3),l.qZA())}function c(e,t){if(1&e&&l._UZ(0,"field-container",4),2&e){const e=l.oxw();l.Q6J("fieldname",e.aggregate.fielddetails.field)}}let u=(()=>{class ObjectListViewAggregateItemTerm{model;view;item={};aggregate={};constructor(e,t){this.model=e,this.view=t,this.view.displayLabels=!1}ngOnInit(){this.model.module=this.aggregate.fielddetails.module,this.model.setField(this.aggregate.fielddetails.field,this.model.utils.backend2spice(this.model.module,this.aggregate.fielddetails.field,this.item.key))}static ɵfac=function(e){return new(e||ObjectListViewAggregateItemTerm)(l.Y36(i.o),l.Y36(n.e))};static ɵcmp=l.Xpm({type:ObjectListViewAggregateItemTerm,selectors:[["object-listview-aggregate-item-term"]],inputs:{item:"item",aggregate:"aggregate"},features:[l._Bn([n.e,i.o])],decls:2,vars:2,consts:[["style","font-style: italic;",4,"ngIf"],["fielddisplayclass","slds-truncate",3,"fieldname",4,"ngIf"],[2,"font-style","italic"],["label","LBL_NOT_SET"],["fielddisplayclass","slds-truncate",3,"fieldname"]],template:function(e,t){1&e&&(l.YNc(0,r,2,0,"span",0),l.YNc(1,c,1,1,"field-container",1)),2&e&&(l.Q6J("ngIf","#not#set#"==t.item.key),l.xp6(1),l.Q6J("ngIf","#not#set#"!=t.item.key))},dependencies:[o.O5,a.j,d._],encapsulation:2})}return ObjectListViewAggregateItemTerm})()},94822:(e,t,s)=>{"use strict";s.d(t,{X:()=>d});var i=s(62242),n=s(42644),l=s(44755),o=s(72656),a=s(50151);let d=(()=>{class ObjectListViewAggregatesButton{modellist;constructor(e){this.modellist=e}toggleaggregates(){this.modellist.displayFilters=!1,this.modellist.displayAggregates=!this.modellist.displayAggregates}get enabled(){return this.modellist.aggregatesEnabled()}get buttonclasses(){return this.modellist.displayAggregates?"slds-is-selected":""}static ɵfac=function(e){return new(e||ObjectListViewAggregatesButton)(i.Y36(n.t))};static ɵcmp=i.Xpm({type:ObjectListViewAggregatesButton,selectors:[["object-listview-aggregates-button"]],decls:2,vars:2,consts:[["system-title","LBL_AGGREGATES",1,"slds-button","slds-button--neutral","slds-button--icon-border","slds-m-horizontal--xxx-small",3,"disabled","ngClass","click"],["icon","bucket"]],template:function(e,t){1&e&&(i.TgZ(0,"button",0),i.NdJ("click",(function(){return t.toggleaggregates()})),i._UZ(1,"system-button-icon",1),i.qZA()),2&e&&i.Q6J("disabled",!t.enabled)("ngClass",t.buttonclasses)},dependencies:[l.mk,o.J,a.S],encapsulation:2})}return ObjectListViewAggregatesButton})()},62348:(e,t,s)=>{"use strict";s.d(t,{M:()=>g});var i=s(62242),n=s(42644),l=s(55329),o=s(26559),a=s(44755),d=s(84270),r=s(83463),c=s(78859);function u(e,t){1&e&&i._UZ(0,"system-label",9)}function m(e,t){if(1&e&&(i.TgZ(0,"li",10)(1,"span"),i._uU(2),i._UZ(3,"system-label",11),i.qZA()()),2&e){const e=i.oxw();i.xp6(2),i.hij("",e.modellist.getSelectedCount()," ")}}let g=(()=>{class ObjectListViewHeaderDetails{modellist;language;layout;constructor(e,t,s){this.modellist=e,this.language=t,this.layout=s}static ɵfac=function(e){return new(e||ObjectListViewHeaderDetails)(i.Y36(n.t),i.Y36(l.d),i.Y36(o.b))};static ɵcmp=i.Xpm({type:ObjectListViewHeaderDetails,selectors:[["object-listview-header-details"]],decls:10,vars:9,consts:[[1,"slds-list_horizontal","slds-has-dividers_left","slds-has-block-links_space"],[1,"slds-item",3,"title"],[1,"slds-p-right--xxx-small",3,"number","noDigits"],["label","LBL_OF"],[1,"slds-p-horizontal--xxx-small",3,"number","noDigits"],["label","LBL_ITEMS",4,"ngIf"],["class","slds-item slds-show--medium",4,"ngIf"],[1,"slds-item"],["size","xx-small",3,"icon","title"],["label","LBL_ITEMS"],[1,"slds-item","slds-show--medium"],["label","LBL_SELECTED"]],template:function(e,t){1&e&&(i.TgZ(0,"ul",0)(1,"li",1)(2,"span"),i._UZ(3,"system-display-number",2)(4,"system-label",3)(5,"system-display-number",4),i.YNc(6,u,1,0,"system-label",5),i.qZA()(),i.YNc(7,m,4,1,"li",6),i.TgZ(8,"li",7),i._UZ(9,"system-utility-icon",8),i.qZA()()),2&e&&(i.xp6(1),i.Q6J("title",t.language.getLabel("LBL_SORTEDBY")+" "+t.modellist.getSortFields()+"\n"+t.language.getLabel("LBL_LASTUPDATE")+" "+t.modellist.getLastLoadTime()),i.xp6(2),i.Q6J("number",t.modellist.listData.list.length)("noDigits",!0),i.xp6(2),i.Q6J("number",t.modellist.listData.totalcount)("noDigits",!0),i.xp6(1),i.Q6J("ngIf","small"!=t.layout.screenwidth),i.xp6(1),i.Q6J("ngIf",t.modellist.getSelectedCount()>0),i.xp6(2),i.Q6J("icon","db"==t.modellist.listData.source?"database":"feed")("title","db"==t.modellist.listData.source?"Database":"Search Engine"))},dependencies:[a.O5,d.G,r._,c.r],encapsulation:2})}return ObjectListViewHeaderDetails})()},72685:(e,t,s)=>{"use strict";s.d(t,{w:()=>h});var i=s(37954),n=s(62242),l=s(55329),o=s(42644),a=s(55710),d=s(44755),r=s(83463);const c=function(e){return{"slds-badge_inverse":e}};function u(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"div",4)(1,"div",5),n.NdJ("click",(function(){const t=n.CHM(e).$implicit,s=n.oxw(2);return n.KtG(s.toggle(t))})),n.TgZ(2,"div",6)(3,"div",7),n._uU(4),n.qZA(),n.TgZ(5,"div",8),n._uU(6),n.qZA()()()()}if(2&e){const e=t.$implicit,s=n.oxw(2);n.xp6(1),n.Q6J("title",e.displayName)("ngClass",n.VKq(4,c,s.isactive(e))),n.xp6(3),n.Oqu(e.displayName),n.xp6(2),n.hij("(",e.doc_count,")")}}function m(e,t){if(1&e&&(n.ynx(0),n.YNc(1,u,7,6,"div",3),n.BQk()),2&e){const e=n.oxw();n.xp6(1),n.Q6J("ngForOf",e.aggregateBuckets)}}function g(e,t){1&e&&(n.TgZ(0,"div",9),n._UZ(1,"system-label",10),n.qZA())}let h=(()=>{class ObjectListViewTagsAggregate extends i.i{language;modellist;model;aggregate={indexfieldname:"tags"};constructor(e,t,s){super(e,t,s),this.language=e,this.modellist=t,this.model=s}get hasItems(){try{return this.aggregateBuckets.length>0}catch(e){return!1}}isactive(e){return this.modellist.checkAggregate("tags",e.aggdata)}toggle(e){if(this.isactive(e)){this.modellist.removeAggregate("tags",e.aggdata)&&this.modellist.scheduleReloadList()}else this.modellist.setAggregate("tags",e.aggdata),this.modellist.scheduleReloadList()}static ɵfac=function(e){return new(e||ObjectListViewTagsAggregate)(n.Y36(l.d),n.Y36(o.t),n.Y36(a.o))};static ɵcmp=n.Xpm({type:ObjectListViewTagsAggregate,selectors:[["object-listview-tags-aggregate"]],features:[n.qOj],decls:3,vars:2,consts:[[1,"slds-filters__item","slds-grid","slds-wrap","slds-grid--align-cente"],[4,"ngIf"],["class","slds-align--absolute-center",4,"ngIf"],["class","slds-p-around--xxx-small slds-truncate","style","max-width: 50%;",4,"ngFor","ngForOf"],[1,"slds-p-around--xxx-small","slds-truncate",2,"max-width","50%"],[1,"slds-badge","slds-truncate",3,"title","ngClass","click"],[1,"slds-grid"],[1,"slds-truncate","slds-text-link_reset"],[1,"slds-p-left--xxx-small"],[1,"slds-align--absolute-center"],["label","MSG_NO_RECORDS_TAGGED"]],template:function(e,t){1&e&&(n.TgZ(0,"div",0),n.YNc(1,m,2,1,"ng-container",1),n.YNc(2,g,2,0,"div",2),n.qZA()),2&e&&(n.xp6(1),n.Q6J("ngIf",t.hasItems),n.xp6(1),n.Q6J("ngIf",!t.hasItems))},dependencies:[d.mk,d.sg,d.O5,r._],encapsulation:2})}return ObjectListViewTagsAggregate})()},99533:(e,t,s)=>{"use strict";s.d(t,{X:()=>S});var i=s(62242),n=s(55710),l=s(42644),o=s(32294),a=s(50727),d=s(89866),r=s(55329),c=s(4154),u=s(29266),m=s(26559),g=s(44755),h=s(83463),p=s(59621),f=s(83499),b=s(75767),_=s(1916),v=s(42161),y=s(16059),x=s(56857),w=s(19624);const Z=["tablecontent"];function T(e,t){if(1&e&&(i.TgZ(0,"thead"),i._UZ(1,"tr",15),i.qZA()),2&e){const e=i.oxw();i.xp6(1),i.Q6J("showSelectColumn",e.multiselect)("showRowActionMenu",!1)}}function C(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"tr",16),i.NdJ("click",(function(t){const s=i.CHM(e).$implicit,n=i.oxw();return i.KtG(n.clickRow(t,s))})),i.qZA()}if(2&e){const e=t.$implicit,s=i.oxw();i.Q6J("listItem",e)("showActionMenu",!1)("rowselect",s.multiselect)("displaylinks",!1)}}function k(e,t){if(1&e&&i._UZ(0,"tbody",17),2&e){const e=i.oxw();i.Q6J("columns",null==e.modellist.listfields?null:e.modellist.listfields.length)("select",e.multiselect)("tools",!1)("rows",10)}}function A(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"button",18),i.NdJ("click",(function(){i.CHM(e);const t=i.oxw();return i.KtG(t.createNew())})),i._UZ(1,"system-label",19),i.qZA()}}function L(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"button",20),i.NdJ("click",(function(){i.CHM(e);const t=i.oxw();return i.KtG(t.selectItems())})),i._UZ(1,"system-label",21),i.qZA()}if(2&e){const e=i.oxw();i.Q6J("disabled",0==e.selectedCount)}}const I=function(e,t,s){return{"slds-no-row-hover":e,singleselect:t,"slds-table--header-fixed":s}};let S=(()=>{class ObjectModalModuleLookup{language;modellist;metadata;modelutilities;model;layout;tablecontent;headercontent;searchTerm="";self={};componentConfig={};multiselect=!1;module="";modulefilter="";filtercontext;relatefilter;subscriptions=new a.w0;selectedItems=new i.vpe;usedSearchTerm=new i.vpe;constructor(e,t,s,i,n,l){this.language=e,this.modellist=t,this.metadata=s,this.modelutilities=i,this.model=n,this.layout=l,this.subscriptions.add(this.modellist.listType$.subscribe((e=>this.switchListtype())))}contentStyle(){if(this.headercontent){return{height:`calc(100% - ${this.headercontent.element.nativeElement.getBoundingClientRect().height}px)`}}return{height:"100%"}}get smallView(){return"small"==this.layout.screenwidth}ngOnInit(){this.modellist.modulefilter=this.modulefilter,this.modellist.relatefilter=this.relatefilter,this.modellist.useCache=!1,this.modellist.initialize(this.module),this.modellist.getListData(),this.componentConfig=this.metadata.getComponentConfig("ObjectModalModuleLookup",this.module),this.model.module=this.module,""!=this.searchTerm&&this.doSearch()}ngOnDestroy(){this.subscriptions.unsubscribe()}get canAdd(){return this.componentConfig.showaddbutton&&this.metadata.checkModuleAcl(this.model.module,"create")}switchListtype(){}doSearch(){this.modellist.searchTerm=this.searchTerm,this.modellist.getListData()}onScroll(e){let t=this.tablecontent.element.nativeElement;t.scrollTop+t.clientHeight+50>t.scrollHeight&&this.modellist.loadMoreList()}closePopup(){this.usedSearchTerm.emit(this.modellist.searchTerm),this.self.destroy()}createNew(){this.model.initialize(),this.model.addModel("",null,{},!0).subscribe({next:e=>{this.selectedItems.emit([e]),this.usedSearchTerm.emit(this.searchTerm),this.self.destroy()}})}get selectedCount(){return this.modellist.getSelectedCount()}selectItems(){this.selectedItems.emit(this.modellist.getSelectedItems()),this.usedSearchTerm.emit(this.searchTerm),this.self.destroy()}clickRow(e,t){this.multiselect||(this.selectedItems.emit([t]),this.usedSearchTerm.emit(this.searchTerm),this.self.destroy())}static ɵfac=function(e){return new(e||ObjectModalModuleLookup)(i.Y36(r.d),i.Y36(l.t),i.Y36(c.Pu),i.Y36(u.A),i.Y36(n.o),i.Y36(m.b))};static ɵcmp=i.Xpm({type:ObjectModalModuleLookup,selectors:[["object-modal-module-lookup"]],viewQuery:function(e,t){if(1&e&&(i.Gf(Z,7,i.s_b),i.Gf(d.x,5)),2&e){let e;i.iGM(e=i.CRH())&&(t.tablecontent=e.first),i.iGM(e=i.CRH())&&(t.headercontent=e.first)}},inputs:{relatefilter:"relatefilter"},outputs:{selectedItems:"selectedItems",usedSearchTerm:"usedSearchTerm"},features:[i._Bn([o.e,l.t,n.o])],decls:20,vars:13,consts:[["size","large"],[3,"close"],["margin","none",3,"grow"],[1,"slds-height_full"],[1,"slds-is-relative",3,"ngStyle"],[1,"slds-scrollable--y","slds-height_full",3,"scroll"],["tablecontent",""],["role","listbox",1,"slds-table","slds-table--fixed-layout","slds-table--bordered","slds-max-medium-table--stacked-horizontal",3,"ngClass"],[4,"ngIf"],["object-list-item","","class","slds-hint-parent slds-p-horizontal--x-small",3,"listItem","showActionMenu","rowselect","displaylinks","click",4,"ngFor","ngForOf"],["system-table-stencils","",3,"columns","select","tools","rows",4,"ngIf"],[1,"slds-button","slds-button--neutral",3,"click"],["label","LBL_CANCEL"],["class","slds-button slds-button--brand",3,"click",4,"ngIf"],["class","slds-button slds-button--brand",3,"disabled","click",4,"ngIf"],["object-list-header","",3,"showSelectColumn","showRowActionMenu"],["object-list-item","",1,"slds-hint-parent","slds-p-horizontal--x-small",3,"listItem","showActionMenu","rowselect","displaylinks","click"],["system-table-stencils","",3,"columns","select","tools","rows"],[1,"slds-button","slds-button--brand",3,"click"],["label","LBL_NEW"],[1,"slds-button","slds-button--brand",3,"disabled","click"],["label","LBL_SELECT"]],template:function(e,t){1&e&&(i.TgZ(0,"system-modal",0)(1,"system-modal-header",1),i.NdJ("close",(function(){return t.closePopup()})),i._uU(2),i.qZA(),i.TgZ(3,"system-modal-content",2)(4,"div",3),i._UZ(5,"object-modal-module-lookup-header"),i.TgZ(6,"div",4)(7,"div",5,6),i.NdJ("scroll",(function(e){return t.onScroll(e)})),i.TgZ(9,"table",7),i.YNc(10,T,2,2,"thead",8),i.TgZ(11,"tbody"),i.YNc(12,C,1,4,"tr",9),i.qZA(),i.YNc(13,k,1,4,"tbody",10),i.qZA()(),i._UZ(14,"object-modal-module-lookup-aggregates"),i.qZA()()(),i.TgZ(15,"system-modal-footer")(16,"button",11),i.NdJ("click",(function(){return t.closePopup()})),i._UZ(17,"system-label",12),i.qZA(),i.YNc(18,A,2,0,"button",13),i.YNc(19,L,2,1,"button",14),i.qZA()()),2&e&&(i.xp6(2),i.Oqu(t.language.getModuleCombinedLabel("LBL_SEARCH",t.modellist.module)),i.xp6(1),i.Q6J("grow",!0),i.xp6(3),i.Q6J("ngStyle",t.contentStyle()),i.xp6(3),i.Q6J("ngClass",i.kEZ(9,I,t.multiselect,!t.multiselect,!t.smallView)),i.xp6(1),i.Q6J("ngIf",!t.smallView),i.xp6(2),i.Q6J("ngForOf",t.modellist.listData.list),i.xp6(1),i.Q6J("ngIf",t.modellist.isLoading),i.xp6(5),i.Q6J("ngIf",t.canAdd),i.xp6(1),i.Q6J("ngIf",t.multiselect))},dependencies:[g.mk,g.sg,g.O5,g.PC,h._,p.j,f.x,b.p,_.y,v.x,y.p,x.B,d.x,w.D],styles:["table.singleselect tr:hover td{cursor:pointer}"]})}return ObjectModalModuleLookup})()},19624:(e,t,s)=>{"use strict";s.d(t,{D:()=>p});var i=s(91591),n=s(62242),l=s(42644),o=s(4154),a=s(44755),d=s(7763),r=s(37954),c=s(72685);function u(e,t){1&e&&n._UZ(0,"object-listview-tags-aggregate")}function m(e,t){if(1&e&&(n.TgZ(0,"div",5),n._UZ(1,"object-listview-aggregate",6),n.qZA()),2&e){const e=t.$implicit;n.xp6(1),n.Q6J("aggregate",e)}}const g=function(e){return{module:e}};function h(e,t){if(1&e&&(n.TgZ(0,"div",1)(1,"div",2),n.YNc(2,u,1,0,"object-listview-tags-aggregate",3),n.YNc(3,m,2,1,"div",4),n.qZA()()),2&e){const e=n.oxw();n.Q6J("@animatepanel",void 0)("system-model-provider",n.VKq(4,g,e.modellist.module)),n.xp6(2),n.Q6J("ngIf",e.hasTags),n.xp6(1),n.Q6J("ngForOf",e.getAggregates())}}let p=(()=>{class ObjectModalModuleLookupAggregates{modellist;metadata;constructor(e,t){this.modellist=e,this.metadata=t}get hasTags(){return this.metadata.checkTagging(this.modellist.module)}getAggregates(){return this.modellist.moduleAggregates}static ɵfac=function(e){return new(e||ObjectModalModuleLookupAggregates)(n.Y36(l.t),n.Y36(o.Pu))};static ɵcmp=n.Xpm({type:ObjectModalModuleLookupAggregates,selectors:[["object-modal-module-lookup-aggregates"]],decls:1,vars:1,consts:[["class","slds-is-absolute slds-panel slds-panel--filters slds-filters__body slds-nowrap  slds-scrollable--y","style","width: 320px; height: 100%; top:0px; right: 0px;z-index: 99;",3,"system-model-provider",4,"ngIf"],[1,"slds-is-absolute","slds-panel","slds-panel--filters","slds-filters__body","slds-nowrap","slds-scrollable--y",2,"width","320px","height","100%","top","0px","right","0px","z-index","99",3,"system-model-provider"],[1,"slds-filters__body","slds-grid_vertical"],[4,"ngIf"],["class","slds-m-vertical--xx-small",4,"ngFor","ngForOf"],[1,"slds-m-vertical--xx-small"],[3,"aggregate"]],template:function(e,t){1&e&&n.YNc(0,h,4,6,"div",0),2&e&&n.Q6J("ngIf",t.modellist.displayAggregates)},dependencies:[a.sg,a.O5,d.u,r.i,c.w],encapsulation:2,data:{animation:[(0,i.X$)("animatepanel",[(0,i.eR)(":enter",[(0,i.oB)({right:"-320px",overflow:"hidden"}),(0,i.jt)(".5s",(0,i.oB)({right:"0px"})),(0,i.oB)({overflow:"unset"})]),(0,i.eR)(":leave",[(0,i.oB)({overflow:"hidden"}),(0,i.jt)(".5s",(0,i.oB)({right:"-320px"}))])])]}})}return ObjectModalModuleLookupAggregates})()},89866:(e,t,s)=>{"use strict";s.d(t,{x:()=>y});var i=s(62242),n=s(50727),l=s(55329),o=s(42644),a=s(29266),d=s(4154),r=s(44755),c=s(95030),u=s(72656),m=s(7514),g=s(83463),h=s(93333),p=s(78859),f=s(57102),b=s(62348),_=s(94822);function v(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"system-checkbox",8),i.NdJ("ngModelChange",(function(t){i.CHM(e);const s=i.oxw();return i.KtG(s.relatefilterActive=t)})),i._UZ(1,"system-label",9)(2,"system-label-modulename",10),i._uU(3),i.qZA()}if(2&e){const e=i.oxw();i.Q6J("disabled",e.relatefilter.required)("ngModel",e.relatefilterActive),i.xp6(2),i.Q6J("module",e.relatefilter.module)("singular",!0),i.xp6(1),i.hij(" ",e.relatefilter.display,"")}}let y=(()=>{class ObjectModalModuleLookupHeader{language;modellist;modelutilities;metadata;element;searchTerm="";searchTermOld="";searchTimeOut=void 0;autoCompleteKiller;subscriptions=new n.w0;usedSearchTerm=new i.vpe;constructor(e,t,s,i,n){this.language=e,this.modellist=t,this.modelutilities=s,this.metadata=i,this.element=n,this.autoCompleteKiller=this.modelutilities.generateGuid()}get relatefilter(){return this.modellist.relatefilter}get relatefilterActive(){return this.relatefilter?.active}set relatefilterActive(e){this.relatefilter.active=e,this.modellist.relatefilter.active=e,this.modellist.reLoadList()}ngOnInit(){this.searchTerm=this.modellist.searchTerm,this.searchTermOld=this.modellist.searchTerm}ngOnDestroy(){this.subscriptions.unsubscribe()}doSearch(){this.searchTermOld=this.searchTerm,this.modellist.searchTerm=this.searchTerm,this.modellist.getListData()}triggerSearch(e){if(this.searchTerm!==this.searchTermOld)if("Enter"===e.key)this.searchTerm.length>0&&(this.searchTimeOut&&window.clearTimeout(this.searchTimeOut),this.doSearch());else this.searchTimeOut&&window.clearTimeout(this.searchTimeOut),this.searchTimeOut=window.setTimeout((()=>this.doSearch()),1e3)}static ɵfac=function(e){return new(e||ObjectModalModuleLookupHeader)(i.Y36(l.d),i.Y36(o.t),i.Y36(a.A),i.Y36(d.Pu),i.Y36(i.SBq))};static ɵcmp=i.Xpm({type:ObjectModalModuleLookupHeader,selectors:[["object-modal-module-lookup-header"]],outputs:{usedSearchTerm:"usedSearchTerm"},decls:11,vars:5,consts:[[1,"slds-form-element","slds-p-top--medium","slds-p-horizontal--medium","slds-m-bottom--small","slds-grid","slds-grid--vertical-align-center"],[1,"slds-form-element__control","slds-input-has-icon","slds-input-has-icon--right","slds-grow"],["icon","search","size","x-small","addclasses","slds-input__icon"],["type","text","id","lookup",1,"slds-input",3,"ngModel","autocomplete","placeholder","ngModelChange","keyup"],[1,"slds-button","slds-button--neutral","slds-button--icon-border","slds-m-horizontal--xxx-small",3,"click"],[3,"icon"],[1,"slds-theme--shade","slds-p-around--x-small","slds-border--top","slds-grid","slds-grid--vertical-align-center","slds","slds-grid--align-spread"],[3,"disabled","ngModel","ngModelChange",4,"ngIf"],[3,"disabled","ngModel","ngModelChange"],["label","LBL_RELATED_TO"],[3,"module","singular"]],template:function(e,t){1&e&&(i.TgZ(0,"div",0),i._UZ(1,"object-list-types"),i.TgZ(2,"div",1),i._UZ(3,"system-utility-icon",2),i.TgZ(4,"input",3),i.NdJ("ngModelChange",(function(e){return t.searchTerm=e}))("keyup",(function(e){return t.triggerSearch(e)})),i.qZA()(),i.TgZ(5,"button",4),i.NdJ("click",(function(){return t.modellist.reLoadList()})),i._UZ(6,"system-button-icon",5),i.qZA(),i._UZ(7,"object-listview-aggregates-button"),i.qZA(),i.TgZ(8,"div",6),i._UZ(9,"object-listview-header-details"),i.YNc(10,v,4,5,"system-checkbox",7),i.qZA()),2&e&&(i.xp6(4),i.Q6J("ngModel",t.searchTerm)("autocomplete",t.autoCompleteKiller)("placeholder",t.language.getModuleName(t.modellist.module)),i.xp6(2),i.Q6J("icon","refresh"),i.xp6(4),i.Q6J("ngIf",t.relatefilter&&t.relatefilter.id))},dependencies:[r.O5,c.Fj,c.JJ,c.On,u.J,m.U,g._,h.M,p.r,f.l,b.M,_.X],encapsulation:2})}return ObjectModalModuleLookupHeader})()},62613:(e,t,s)=>{"use strict";s.d(t,{Y:()=>k});var i=s(32294),n=s(62242),l=s(55329),o=s(83348),a=s(55710),d=s(4154),r=s(44755),c=s(44561),u=s(93333),m=s(23814),g=s(2294),h=s(74778),p=s(88709),f=s(64652),b=s(55931),v=s(96409),y=s(31106);function x(e,t){if(1&e&&n._UZ(0,"system-label-modulename",15),2&e){const e=n.oxw();n.Q6J("module",e.moduleName)}}function w(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"a",16),n.NdJ("click",(function(){n.CHM(e);const t=n.oxw();return n.KtG(t.goToModule())})),n._UZ(1,"system-label-modulename",15),n.qZA()}if(2&e){const e=n.oxw();n.xp6(1),n.Q6J("module",e.moduleName)}}function Z(e,t){if(1&e&&(n.ynx(0),n._uU(1),n.BQk()),2&e){const e=n.oxw();n.xp6(1),n.Oqu(e.model.data.summary_text)}}const T=function(){return{displayLabels:!1}};function C(e,t){if(1&e&&n._UZ(0,"object-record-fieldset-horizontal-list",17),2&e){const e=n.oxw();n.Q6J("fieldset",e.fieldset)("system-view-provider",n.DdM(2,T))}}let k=(()=>{class ObjectPageHeader{language;router;model;metadata;componentconfig={};actionSet="";fieldset="";get moduleName(){return this.model.module}constructor(e,t,s,i){this.language=e,this.router=t,this.model=s,this.metadata=i}ngOnInit(){let e=this.componentconfig&&!_.isEmpty(this.componentconfig)?this.componentconfig:this.metadata.getComponentConfig("ObjectPageHeader",this.model.module);this.actionSet=e.actionset,this.fieldset=e.fieldset}get canGoToModule(){return this.metadata.getModuleDefs(this.moduleName).visible&&this.metadata.checkModuleAcl(this.moduleName,"list")}goToModule(){this.canGoToModule&&this.router.navigate(["/module/"+this.moduleName])}static ɵfac=function(e){return new(e||ObjectPageHeader)(n.Y36(l.d),n.Y36(o.F0),n.Y36(a.o),n.Y36(d.Pu))};static ɵcmp=n.Xpm({type:ObjectPageHeader,selectors:[["object-page-header"]],features:[n._Bn([i.e])],decls:20,vars:6,consts:[[1,"slds-page-header"],[1,"slds-grid"],[1,"slds-col","slds-has-flexi-truncate"],[1,"slds-media","slds-no-space","slds-grow"],[3,"module","click"],[1,"slds-media__body"],[1,"slds-text-title--caps","slds-line-height--reset"],[3,"module",4,"ngIf"],["href","javascript:void(0);",3,"click",4,"ngIf"],[1,"slds-grid","slds-grid--vertical-align-center"],[1,"slds-page-header__title","slds-m-right--small","slds-align-middle","slds-truncate"],[4,"ngIf"],[3,"fieldset","system-view-provider",4,"ngIf"],[1,"slds-m-horizontal--x-small","slds-show--medium","slds-align--absolute-center"],[3,"actionset"],[3,"module"],["href","javascript:void(0);",3,"click"],[3,"fieldset","system-view-provider"]],template:function(e,t){1&e&&(n.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"system-icon",4),n.NdJ("click",(function(){return t.goToModule()})),n.qZA(),n.TgZ(5,"div",5)(6,"p",6),n.YNc(7,x,1,1,"system-label-modulename",7),n.YNc(8,w,2,1,"a",8),n.qZA(),n.TgZ(9,"div",9)(10,"h1",10),n.YNc(11,Z,2,1,"ng-container",11),n.YNc(12,C,1,3,"object-record-fieldset-horizontal-list",12),n.qZA(),n._UZ(13,"object-page-header-tags"),n.qZA()()()(),n.TgZ(14,"div",13),n._UZ(15,"object-workflow-button")(16,"object-subscription-button")(17,"object-reminder-button")(18,"object-status-network-button")(19,"object-action-container",14),n.qZA()()()),2&e&&(n.xp6(4),n.Q6J("module",t.moduleName),n.xp6(3),n.Q6J("ngIf",!t.canGoToModule),n.xp6(1),n.Q6J("ngIf",t.canGoToModule),n.xp6(3),n.Q6J("ngIf",!t.fieldset),n.xp6(1),n.Q6J("ngIf",t.fieldset),n.xp6(7),n.Q6J("actionset",t.actionSet))},dependencies:[r.O5,c.f,u.M,m.V,g.S,h.d,p.T,f.U,b.Z,v.n,y.V],encapsulation:2})}return ObjectPageHeader})()},74778:(e,t,s)=>{"use strict";s.d(t,{d:()=>Z});var i=s(62242),n=s(55710),l=s(4154),o=s(55329),a=s(13278),d=s(44755),r=s(72656),c=s(61078),u=s(83463),m=s(12803),g=s(78859);function h(e,t){1&e&&i._UZ(0,"system-stencil")}function p(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"span",14),i.NdJ("click",(function(){i.CHM(e);const t=i.oxw().index,s=i.oxw(4);return i.KtG(s.removeByIndex(t))})),i._UZ(1,"system-utility-icon",15),i.qZA()}}function f(e,t){if(1&e&&(i.TgZ(0,"div",11)(1,"span",12),i._uU(2),i.YNc(3,p,2,0,"span",13),i.qZA()()),2&e){const e=t.$implicit,s=i.oxw(4);i.xp6(2),i.hij(" ",e," "),i.xp6(1),i.Q6J("ngIf",s.isEditing)}}function b(e,t){if(1&e&&(i.TgZ(0,"div",9),i.YNc(1,f,4,2,"div",10),i.qZA()),2&e){const e=i.oxw(3);i.xp6(1),i.Q6J("ngForOf",e.objecttags)}}function _(e,t){1&e&&(i.TgZ(0,"div",16)(1,"div",17),i._UZ(2,"system-label",18),i.qZA()())}function v(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"div")(1,"button",19),i.NdJ("click",(function(){i.CHM(e);const t=i.oxw(3);return i.KtG(t.editTags())})),i._UZ(2,"system-button-icon",20),i.qZA()()}2&e&&(i.xp6(2),i.Q6J("icon","edit"))}function y(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"div",21)(1,"div",22)(2,"system-input-tags",23),i.NdJ("tagemitter",(function(t){i.CHM(e);const s=i.oxw(3);return i.KtG(s.addTag(t))})),i.qZA()(),i.TgZ(3,"button",24),i.NdJ("click",(function(){i.CHM(e);const t=i.oxw(3);return i.KtG(t.cancelEdit())})),i._UZ(4,"system-button-icon",20),i.qZA(),i.TgZ(5,"button",19),i.NdJ("click",(function(){i.CHM(e);const t=i.oxw(3);return i.KtG(t.saveTags())})),i._UZ(6,"system-button-icon",20),i.qZA()()}2&e&&(i.xp6(4),i.Q6J("icon","close"),i.xp6(2),i.Q6J("icon","check"))}function x(e,t){if(1&e&&(i.TgZ(0,"div",4),i.YNc(1,b,2,1,"div",5),i.YNc(2,_,3,0,"div",6),i.YNc(3,v,3,1,"div",7),i.YNc(4,y,7,2,"div",8),i.qZA()),2&e){const e=i.oxw(2);i.xp6(1),i.Q6J("ngIf",e.objecttags.length),i.xp6(1),i.Q6J("ngIf",0==e.objecttags.length&&!e.isEditing),i.xp6(1),i.Q6J("ngIf",!e.isEditing),i.xp6(1),i.Q6J("ngIf",e.isEditing)}}function w(e,t){if(1&e&&(i.TgZ(0,"div",1),i.YNc(1,h,1,0,"system-stencil",2),i.YNc(2,x,5,4,"ng-template",null,3,i.W1O),i.qZA()),2&e){const e=i.MAs(3),t=i.oxw();i.xp6(1),i.Q6J("ngIf",t.model.isLoading)("ngIfElse",e)}}let Z=(()=>{class ObjectPageHeaderTags{model;metadata;language;toast;isEditing=!1;taggingEnabled=!1;constructor(e,t,s,i){this.model=e,this.metadata=t,this.language=s,this.toast=i,this.taggingEnabled=this.checkTaggingEnabled()}get objecttags(){let e=this.model.getField("tags");if(!e||""===e)return[];try{return JSON.parse(e)}catch(e){return[]}}checkTaggingEnabled(){return this.metadata.checkTagging(this.model.module)}editTags(){this.isEditing=!0,this.model.startEdit()}cancelEdit(){this.isEditing=!1,this.model.cancelEdit()}saveTags(){this.model.save(),this.isEditing=!1}removeByIndex(e){let t=this.objecttags;t.splice(e,1),this.model.setField("tags",JSON.stringify(t))}addTag(e){let t=this.objecttags.map((e=>e.toLowerCase()));t.includes(e.toLowerCase())?this.toast.sendToast(this.language.getLabel("LBL_TAG_EXISTS","","short"),"warning"):(this.objecttags.indexOf(e),t.push(e),this.model.setField("tags",JSON.stringify(t)))}static ɵfac=function(e){return new(e||ObjectPageHeaderTags)(i.Y36(n.o),i.Y36(l.Pu),i.Y36(o.d),i.Y36(a.A))};static ɵcmp=i.Xpm({type:ObjectPageHeaderTags,selectors:[["object-page-header-tags"]],decls:1,vars:1,consts:[["class","slds-show--medium slds-p-top--xx-small",4,"ngIf"],[1,"slds-show--medium","slds-p-top--xx-small"],[4,"ngIf","ngIfElse"],["displayContent",""],[1,"slds-grid","slds-grid--vertical-align-center"],["class","slds-p-right--xx-small slds-grid slds-gutters_direct-xxx-small",4,"ngIf"],["class","slds-p-right--xx-small",4,"ngIf"],[4,"ngIf"],["class","slds-grid slds-grow",4,"ngIf"],[1,"slds-p-right--xx-small","slds-grid","slds-gutters_direct-xxx-small"],["class","slds-col",4,"ngFor","ngForOf"],[1,"slds-col"],[1,"slds-badge","slds-badge_lightest"],["class","slds-badge__icon slds-badge__icon_right",3,"click",4,"ngIf"],[1,"slds-badge__icon","slds-badge__icon_right",3,"click"],["icon","close","size","xx-small"],[1,"slds-p-right--xx-small"],[2,"font-style","italic"],["label","LBL_NO_TAGS_ASSIGNED"],[1,"slds-button","slds-button_icon",3,"click"],[3,"icon"],[1,"slds-grid","slds-grow"],[1,"slds-form-element","slds-grow"],[3,"tagemitter"],[1,"slds-p-left--xx-small","slds-button","slds-button_icon",3,"click"]],template:function(e,t){1&e&&i.YNc(0,w,4,2,"div",0),2&e&&i.Q6J("ngIf",t.taggingEnabled)},dependencies:[d.sg,d.O5,r.J,c.C,u._,m.B,g.r],encapsulation:2})}return ObjectPageHeaderTags})()},46438:(e,t,s)=>{"use strict";s.d(t,{F:()=>h});var i=s(32294),n=s(50727),l=s(62242),o=s(4154),a=s(55710),d=s(55329),r=s(44755),c=s(26951),u=s(54021),m=s(96194);function g(e,t){if(1&e&&(l.TgZ(0,"h3",3),l._uU(1),l.qZA()),2&e){const e=l.oxw();l.xp6(1),l.Oqu(e.header)}}let h=(()=>{class ObjectRecordDetails{view;metadata;componentFactoryResolver;model;language;renderer;componentSet;readonly;componentconfig={};subscriptions=new n.w0;constructor(e,t,s,i,n,l){this.view=e,this.metadata=t,this.componentFactoryResolver=s,this.model=i,this.language=n,this.renderer=l}ngOnInit(){this.buildContainer(),!0===this.readonly||this.componentconfig.readonly?this.view.isEditable=!1:(this.view.isEditable=!0,this.view.linkedToModel=!0,this.subscriptions.add(this.view.mode$.subscribe((e=>{"edit"!=e||this.model.isEditing||this.model.startEdit()}))))}ngOnDestroy(){this.subscriptions.unsubscribe()}buildContainer(){this.componentSet||(this.componentconfig.componentset||(this.componentconfig=this.metadata.getComponentConfig("ObjectRecordDetails",this.model.module)),this.componentSet=this.componentconfig.componentset)}getBoxStyle(){return this.view.isEditMode()?{"box-shadow":"0 2px 4px 4px rgba(0,0,0,.16)"}:{}}get showHeader(){return!!this.componentconfig.header}get header(){return this.language.getLabel(this.componentconfig.header,this.model.module)}static ɵfac=function(e){return new(e||ObjectRecordDetails)(l.Y36(i.e),l.Y36(o.Pu),l.Y36(l._Vd),l.Y36(a.o),l.Y36(d.d),l.Y36(l.Qsj))};static ɵcmp=l.Xpm({type:ObjectRecordDetails,selectors:[["object-record-details"]],inputs:{componentSet:"componentSet",readonly:"readonly"},features:[l._Bn([i.e])],decls:4,vars:4,consts:[["class","slds-text-heading_small slds-theme_shade slds-p-around--x-small",4,"ngIf"],[1,"slds-is-relative",3,"ngStyle","system-overlay-loading-spinner"],[3,"componentset"],[1,"slds-text-heading_small","slds-theme_shade","slds-p-around--x-small"]],template:function(e,t){1&e&&(l.YNc(0,g,2,1,"h3",0),l.TgZ(1,"div",1),l._UZ(2,"system-componentset",2)(3,"object-record-details-footer"),l.qZA()),2&e&&(l.Q6J("ngIf",t.showHeader),l.xp6(1),l.Q6J("ngStyle",t.getBoxStyle())("system-overlay-loading-spinner",t.model.isSaving),l.xp6(1),l.Q6J("componentset",t.componentSet))},dependencies:[r.O5,r.PC,c.E,u._,m.b],encapsulation:2})}return ObjectRecordDetails})()},96194:(e,t,s)=>{"use strict";s.d(t,{b:()=>m});var i=s(62242),n=s(32294),l=s(55710),o=s(55329),a=s(4154),d=s(44755),r=s(2294),c=s(44347);function u(e,t){if(1&e&&(i.TgZ(0,"div",1),i._UZ(1,"object-action-container",2)(2,"object-record-messages-badge"),i.qZA()),2&e){const e=i.oxw();i.xp6(1),i.Q6J("actionset",e.actionset)}}let m=(()=>{class ObjectRecordDetailsFooter{view;model;language;metadata;actionset;constructor(e,t,s,i){this.view=e,this.model=t,this.language=s,this.metadata=i}ngOnInit(){let e=this.metadata.getComponentConfig("ObjectRecordDetailsFooter",this.model.module);this.actionset=e.actionset}cancel(){this.model.cancelEdit(),this.view.setViewMode()}save(){this.model.validate()&&(this.model.save(!0),this.view.setViewMode())}static ɵfac=function(e){return new(e||ObjectRecordDetailsFooter)(i.Y36(n.e),i.Y36(l.o),i.Y36(o.d),i.Y36(a.Pu))};static ɵcmp=i.Xpm({type:ObjectRecordDetailsFooter,selectors:[["object-record-details-footer"]],decls:1,vars:1,consts:[["class","slds-text-align--center slds-p-bottom--small slds-grid slds-grid--align-center slds-grid--vertical-align-center",4,"ngIf"],[1,"slds-text-align--center","slds-p-bottom--small","slds-grid","slds-grid--align-center","slds-grid--vertical-align-center"],[3,"actionset"]],template:function(e,t){1&e&&i.YNc(0,u,3,1,"div",0),2&e&&i.Q6J("ngIf",t.view.isEditMode())},dependencies:[d.O5,r.S,c.Z],encapsulation:2})}return ObjectRecordDetailsFooter})()},9062:(e,t,s)=>{"use strict";s.d(t,{d:()=>b});var i=s(62242),n=s(4154),l=s(55710),o=s(32294),a=s(44755),d=s(27165);function r(e,t){if(1&e&&i._UZ(0,"object-record-fieldset-field",5),2&e){const e=i.oxw().$implicit,t=i.oxw(2);i.Q6J("fieldsetitem",e)("fielddisplayclass",t.fielddisplayclass)("fieldpadding",t.fieldpadding)}}function c(e,t){if(1&e&&i._UZ(0,"object-record-fieldset",6),2&e){const e=i.oxw().$implicit,t=i.oxw(2);i.Q6J("fieldset",e.fieldset)("fielddisplayclass",t.fielddisplayclass)("fieldpadding",t.fieldpadding)("direction",e.fieldconfig.direction)}}function u(e,t){if(1&e&&(i.TgZ(0,"div"),i.YNc(1,r,1,3,"object-record-fieldset-field",3),i.YNc(2,c,1,4,"object-record-fieldset",4),i.qZA()),2&e){const e=t.$implicit,s=i.oxw(2);i.xp6(1),i.Q6J("ngIf",s.isField(e)),i.xp6(1),i.Q6J("ngIf",!s.isField(e))}}function m(e,t){if(1&e&&(i.TgZ(0,"div"),i.YNc(1,u,3,2,"div",2),i.qZA()),2&e){const e=i.oxw();i.xp6(1),i.Q6J("ngForOf",e.fieldsetitems)}}function g(e,t){if(1&e&&i._UZ(0,"object-record-fieldset-field",5),2&e){const e=i.oxw().$implicit,t=i.oxw(2);i.Q6J("fieldsetitem",e)("fielddisplayclass",t.fielddisplayclass)("fieldpadding",t.fieldpadding)}}function h(e,t){if(1&e&&i._UZ(0,"object-record-fieldset",6),2&e){const e=i.oxw().$implicit,t=i.oxw(2);i.Q6J("fieldset",e.fieldset)("fielddisplayclass",t.fielddisplayclass)("fieldpadding",t.fieldpadding)("direction",e.fieldconfig.direction)}}function p(e,t){if(1&e&&(i.TgZ(0,"div",9),i.YNc(1,g,1,3,"object-record-fieldset-field",3),i.YNc(2,h,1,4,"object-record-fieldset",4),i.qZA()),2&e){const e=t.$implicit,s=t.index,n=i.oxw(2);i.Q6J("ngClass",n.sizeClass(s)),i.xp6(1),i.Q6J("ngIf",n.isField(e)),i.xp6(1),i.Q6J("ngIf",!n.isField(e))}}function f(e,t){if(1&e&&(i.TgZ(0,"div",7),i.YNc(1,p,3,3,"div",8),i.qZA()),2&e){const e=i.oxw();i.xp6(1),i.Q6J("ngForOf",e.fieldsetitems)}}let b=(()=>{class ObjectRecordFieldset{metadata;model;view;fieldset="";direction="horizontal";fieldpadding="xx-small";fielddisplayclass="slds-has-divider--bottom slds-p-vertical--x-small spice-fieldminheight";fieldsetitems=[];numberOfColumns=0;constructor(e,t,s){this.metadata=e,this.model=t,this.view=s}ngOnInit(){this.fieldsetitems=this.metadata.getFieldSetItems(this.fieldset);for(let e of this.fieldsetitems)this.numberOfColumns=this.numberOfColumns+(e.fieldconfig.width?1*e.fieldconfig.width:e.fieldconfig.width=1);!this.renderVertical&&this.numberOfColumns>8&&12!==this.numberOfColumns&&console.warn("wrong fieldset grid ("+this.fieldset+")")}get renderVertical(){return"vertical"==this.direction}isField(e){return!!e.field}sizeClass(e){return this.renderVertical?"":"small"==this.view.size?"slds-size--1-of-1":"slds-size--"+this.fieldsetitems[e].fieldconfig.width+"-of-"+this.numberOfColumns}static ɵfac=function(e){return new(e||ObjectRecordFieldset)(i.Y36(n.Pu),i.Y36(l.o),i.Y36(o.e))};static ɵcmp=i.Xpm({type:ObjectRecordFieldset,selectors:[["object-record-fieldset"]],inputs:{fieldset:"fieldset",direction:"direction",fieldpadding:"fieldpadding",fielddisplayclass:"fielddisplayclass"},decls:2,vars:2,consts:[[4,"ngIf"],["class","slds-grid slds-wrap",4,"ngIf"],[4,"ngFor","ngForOf"],[3,"fieldsetitem","fielddisplayclass","fieldpadding",4,"ngIf"],[3,"fieldset","fielddisplayclass","fieldpadding","direction",4,"ngIf"],[3,"fieldsetitem","fielddisplayclass","fieldpadding"],[3,"fieldset","fielddisplayclass","fieldpadding","direction"],[1,"slds-grid","slds-wrap"],[3,"ngClass",4,"ngFor","ngForOf"],[3,"ngClass"]],template:function(e,t){1&e&&(i.YNc(0,m,2,1,"div",0),i.YNc(1,f,2,1,"div",1)),2&e&&(i.Q6J("ngIf",t.renderVertical),i.xp6(1),i.Q6J("ngIf",!t.renderVertical))},dependencies:[a.mk,a.sg,a.O5,ObjectRecordFieldset,d.f],encapsulation:2})}return ObjectRecordFieldset})()},27165:(e,t,s)=>{"use strict";s.d(t,{f:()=>o});var i=s(62242),n=s(44755),l=s(33634);let o=(()=>{class ObjectRecordFieldsetField{fieldsetitem;fieldpadding="x-small";fielddisplayclass="slds-has-divider--bottom slds-p-vertical--x-small spice-fieldminheight";showLabel(e){return!0!==e.hidelabel}get padding(){return this.fieldpadding?"slds-p-around--"+this.fieldpadding:""}static ɵfac=function(e){return new(e||ObjectRecordFieldsetField)};static ɵcmp=i.Xpm({type:ObjectRecordFieldsetField,selectors:[["object-record-fieldset-field"]],inputs:{fieldsetitem:"fieldsetitem",fieldpadding:"fieldpadding",fielddisplayclass:"fielddisplayclass"},decls:2,vars:4,consts:[[3,"ngClass"],[3,"field","fieldconfig","fielddisplayclass"]],template:function(e,t){1&e&&(i.TgZ(0,"div",0),i._UZ(1,"field-container",1),i.qZA()),2&e&&(i.Q6J("ngClass",t.padding),i.xp6(1),i.Q6J("field",t.fieldsetitem.field)("fieldconfig",t.fieldsetitem.fieldconfig)("fielddisplayclass",t.fielddisplayclass))},dependencies:[n.mk,l.j],encapsulation:2})}return ObjectRecordFieldsetField})()},55931:(e,t,s)=>{"use strict";s.d(t,{Z:()=>c});var i=s(62242),n=s(4154),l=s(55710),o=s(44755),a=s(33634);function d(e,t){if(1&e&&(i.TgZ(0,"li",3),i._UZ(1,"field-container",4),i.qZA()),2&e){const e=i.oxw().$implicit;i.xp6(1),i.Q6J("field",e.field)("fieldconfig",e.fieldconfig)}}function r(e,t){if(1&e&&(i.ynx(0),i.YNc(1,d,2,2,"li",2),i.BQk()),2&e){const e=t.$implicit,s=i.oxw();i.xp6(1),i.Q6J("ngIf",s.model.getField(e.field))}}let c=(()=>{class ObjectRecordFieldsetHorizontalList{metadata;model;fieldset="";fieldsetitems=[];constructor(e,t){this.metadata=e,this.model=t}ngOnInit(){this.fieldsetitems=this.metadata.getFieldSetItems(this.fieldset)}static ɵfac=function(e){return new(e||ObjectRecordFieldsetHorizontalList)(i.Y36(n.Pu),i.Y36(l.o))};static ɵcmp=i.Xpm({type:ObjectRecordFieldsetHorizontalList,selectors:[["object-record-fieldset-horizontal-list"]],inputs:{fieldset:"fieldset"},decls:2,vars:1,consts:[[1,"slds-list_horizontal","slds-has-dividers_left"],[4,"ngFor","ngForOf"],["class","slds-item",4,"ngIf"],[1,"slds-item"],["fielddisplayclass","slds-align_absolute-center",3,"field","fieldconfig"]],template:function(e,t){1&e&&(i.TgZ(0,"ul",0),i.YNc(1,r,2,1,"ng-container",1),i.qZA()),2&e&&(i.xp6(1),i.Q6J("ngForOf",t.fieldsetitems))},dependencies:[o.sg,o.O5,a.j],encapsulation:2})}return ObjectRecordFieldsetHorizontalList})()},44347:(e,t,s)=>{"use strict";s.d(t,{Z:()=>h});var i=s(62242),n=s(55710),l=s(55329),o=s(44755),a=s(72656),d=s(83463),r=s(7674),c=s(78859);function u(e,t){if(1&e&&(i.TgZ(0,"tr",17)(1,"td",18)(2,"div",19),i._UZ(3,"system-utility-icon",20),i.qZA()(),i.TgZ(4,"td",21)(5,"div",19),i._UZ(6,"system-label-fieldname",22),i.qZA()(),i.TgZ(7,"td",23)(8,"div",19),i._uU(9),i.qZA()()()),2&e){const e=t.$implicit,s=i.oxw(3);i.xp6(3),i.Q6J("icon",e.type),i.xp6(3),i.Q6J("module",s.model.module)("field",e.reference),i.xp6(3),i.Oqu(e.message)}}function m(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"section",5)(1,"button",6),i.NdJ("click",(function(){i.CHM(e);const t=i.oxw(2);return i.KtG(t.showpopover=!1)})),i._UZ(2,"system-button-icon",7),i.qZA(),i.TgZ(3,"header",8)(4,"div",9),i._UZ(5,"system-utility-icon",10),i.TgZ(6,"div",11)(7,"h2",12),i._UZ(8,"system-label",13),i.qZA()()()(),i.TgZ(9,"div",14)(10,"table",15)(11,"tbody"),i.YNc(12,u,10,4,"tr",16),i.qZA()()()()}if(2&e){const e=i.oxw(2);i.Q6J("ngClass",e.nubbinClass)("ngStyle",e.popoverStyle),i.xp6(2),i.Q6J("inverse",!0),i.xp6(10),i.Q6J("ngForOf",e.messages)}}function g(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"div",1)(1,"span",2),i.NdJ("click",(function(){i.CHM(e);const t=i.oxw();return i.KtG(t.showpopover=!t.showpopover)})),i._uU(2),i._UZ(3,"system-label",3),i.qZA(),i.YNc(4,m,13,4,"section",4),i.qZA()}if(2&e){const e=i.oxw();i.xp6(2),i.hij("",e.messagecount," "),i.xp6(2),i.Q6J("ngIf",e.showpopover)}}let h=(()=>{class ObjectRecordMessagesBadge{model;language;side="left";showpopover=!1;constructor(e,t){this.model=e,this.language=t}get messagecount(){return this.model.getMessages().length}get messages(){return this.model.getMessages()}get nubbinClass(){return"right"==this.side?"slds-nubbin_bottom-right":"slds-nubbin_bottom-left"}get popoverStyle(){return"right"==this.side?{bottom:"37px",right:"-10px"}:{bottom:"37px",left:"-10px"}}static ɵfac=function(e){return new(e||ObjectRecordMessagesBadge)(i.Y36(n.o),i.Y36(l.d))};static ɵcmp=i.Xpm({type:ObjectRecordMessagesBadge,selectors:[["object-record-messages-badge"]],inputs:{side:"side"},decls:1,vars:1,consts:[["class","slds-is-relative",4,"ngIf"],[1,"slds-is-relative"],[1,"slds-badge","slds-theme--error","slds-m-horizontal--xx-small",3,"click"],["label","LBL_ERRORS"],["aria-label","Model Errors","class","slds-popover slds-popover_error slds-nubbin_bottom-left slds-is-absolute","role","dialog",3,"ngClass","ngStyle",4,"ngIf"],["aria-label","Model Errors","role","dialog",1,"slds-popover","slds-popover_error","slds-nubbin_bottom-left","slds-is-absolute",3,"ngClass","ngStyle"],["title","Close dialog",1,"slds-button","slds-button_icon","slds-button_icon-small","slds-float_right","slds-popover__close",3,"click"],["icon","close",3,"inverse"],[1,"slds-popover__header"],[1,"slds-media","slds-media_center","slds-has-flexi-truncate"],["icon","error","size","x-small","colorclass","slds-icon-utility-error"],[1,"slds-media__body","slds-text-align--left","slds-p-left--x-small"],["title","Resolve error",1,"slds-truncate","slds-text-heading_small"],["label","LBL_VALIDATION_ERRORS"],[1,"slds-popover__body","slds-p-horizontal--none"],[1,"slds-table","slds-table_cell-buffer","slds-table_bordered"],["class","slds-hint-parent",4,"ngFor","ngForOf"],[1,"slds-hint-parent"],["data-label","type"],[1,"slds-truncate"],["size","x-small",3,"icon"],["data-label","Field"],[3,"module","field"],["data-label","Message"]],template:function(e,t){1&e&&i.YNc(0,g,5,2,"div",0),2&e&&i.Q6J("ngIf",t.messagecount)},dependencies:[o.mk,o.sg,o.O5,o.PC,a.J,d._,r.h,c.r],encapsulation:2})}return ObjectRecordMessagesBadge})()},48652:(e,t,s)=>{"use strict";s.d(t,{E:()=>f});var i=s(91591),n=s(81360),l=s(20767),o=s(62242),a=s(55329),d=s(4154),r=s(66040),c=s(55710),u=s(44755),m=s(54021);function g(e,t){if(1&e&&(o.TgZ(0,"div")(1,"div",4),o.Hsn(2),o.qZA(),o._UZ(3,"object-related-card-footer",2),o.qZA()),2&e){const e=o.oxw(2);o.Q6J("@displaycard",void 0),o.xp6(1),o.Q6J("system-overlay-loading-spinner",e.paginating),o.xp6(2),o.Q6J("componentconfig",e.componentconfig)}}function h(e,t){if(1&e&&(o.TgZ(0,"div",1),o._UZ(1,"object-related-card-header",2),o.YNc(2,g,4,3,"div",3),o.qZA()),2&e){const e=o.oxw();o.xp6(1),o.Q6J("componentconfig",e.componentconfig),o.xp6(1),o.Q6J("ngIf",e.isopen)}}const p=["*"];let f=(()=>{class ObjectRelatedCard{language;metadata;relatedmodels;model;cardheader;cardfooter;componentconfig;constructor(e,t,s,i){this.language=e,this.metadata=t,this.relatedmodels=s,this.model=i}get module(){return this.componentconfig.object}get hidden(){return!this.checkModelState()||!this.aclAccess()}get isloading(){return this.relatedmodels.isloading}get isopen(){return!(this.cardheader&&!this.cardheader.isopen)&&(this.relatedmodels.count>0||this.isloading)}get paginating(){return!(this.relatedmodels.isloading||!this.cardfooter||!this.cardfooter.paginating)}checkModelState(){return!(this.componentconfig.requiredmodelstate&&!this.model.checkModelState(this.componentconfig.requiredmodelstate))}aclAccess(){if(this.module){let e=""!=this.relatedmodels.linkName?this.relatedmodels.linkName:this.relatedmodels.relatedModule?.toLowerCase();return(this.metadata.checkModuleAcl(this.module,"list")||this.metadata.checkModuleAcl(this.module,"listrelated"))&&this.model.checkAccess("detail")&&this.model.checkFieldAccess(e)}return!1}static ɵfac=function(e){return new(e||ObjectRelatedCard)(o.Y36(a.d),o.Y36(d.Pu),o.Y36(r.j),o.Y36(c.o))};static ɵcmp=o.Xpm({type:ObjectRelatedCard,selectors:[["object-related-card"]],viewQuery:function(e,t){if(1&e&&(o.Gf(n.g,5),o.Gf(l.C,5)),2&e){let e;o.iGM(e=o.CRH())&&(t.cardheader=e.first),o.iGM(e=o.CRH())&&(t.cardfooter=e.first)}},inputs:{componentconfig:"componentconfig"},ngContentSelectors:p,decls:1,vars:1,consts:[["class","slds-card slds-card_boundary slds-m-bottom--medium",4,"ngIf"],[1,"slds-card","slds-card_boundary","slds-m-bottom--medium"],[3,"componentconfig"],[4,"ngIf"],[1,"slds-card__body","slds-size--1-of-1",3,"system-overlay-loading-spinner"]],template:function(e,t){1&e&&(o.F$t(),o.YNc(0,h,3,2,"div",0)),2&e&&o.Q6J("ngIf",!t.hidden)},dependencies:[u.O5,m._,n.g,l.C],encapsulation:2,data:{animation:[(0,i.X$)("displaycard",[(0,i.eR)(":enter",[(0,i.oB)({opacity:0,height:"0px",overflow:"hidden"}),(0,i.jt)(".5s",(0,i.oB)({height:"*",opacity:1})),(0,i.oB)({overflow:"unset"})]),(0,i.eR)(":leave",[(0,i.oB)({overflow:"hidden"}),(0,i.jt)(".5s",(0,i.oB)({height:"0px",opacity:0}))])])]}})}return ObjectRelatedCard})()},20767:(e,t,s)=>{"use strict";s.d(t,{C:()=>h});var i=s(62242),n=s(55329),l=s(66040),o=s(55710),a=s(83348),d=s(17017),r=s(44755),c=s(72656),u=s(83463);function m(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"div",10)(1,"button",8),i.NdJ("click",(function(){i.CHM(e);const t=i.oxw();return i.KtG(t.firstPage())})),i._UZ(2,"system-button-icon",11),i.qZA(),i.TgZ(3,"button",8),i.NdJ("click",(function(){i.CHM(e);const t=i.oxw();return i.KtG(t.previousPage())})),i._UZ(4,"system-button-icon",12),i.qZA(),i.TgZ(5,"div",13),i._UZ(6,"system-label",14),i.TgZ(7,"div",15),i._uU(8),i.qZA(),i._UZ(9,"system-label",16),i.TgZ(10,"div",15),i._uU(11),i.qZA()(),i.TgZ(12,"button",8),i.NdJ("click",(function(){i.CHM(e);const t=i.oxw();return i.KtG(t.nextPage())})),i._UZ(13,"system-button-icon",17),i.qZA(),i.TgZ(14,"button",8),i.NdJ("click",(function(){i.CHM(e);const t=i.oxw();return i.KtG(t.lastPage())})),i._UZ(15,"system-button-icon",18),i.qZA()()}if(2&e){const e=i.oxw();i.xp6(1),i.Q6J("disabled",e.previousDisabled||e.paginating),i.xp6(2),i.Q6J("disabled",e.previousDisabled||e.paginating),i.xp6(5),i.Oqu(e.page),i.xp6(3),i.Oqu(e.pages),i.xp6(1),i.Q6J("disabled",e.nextDisabled||e.paginating),i.xp6(2),i.Q6J("disabled",e.nextDisabled||e.paginating)}}function g(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"a",19),i.NdJ("click",(function(){i.CHM(e);const t=i.oxw();return i.KtG(t.showAll())})),i._UZ(1,"system-label",20),i.qZA()}}let h=(()=>{class ObjectRelatedCardFooter{language;relatedmodels;model;router;navigationtab;componentconfig;module="";fieldset=void 0;_displayitems=5;componentid;paginating=!1;constructor(e,t,s,i,n){this.language=e,this.relatedmodels=t,this.model=s,this.router=i,this.navigationtab=n,this.componentid=this.model.utils.generateGuid()}ngOnInit(){this.fieldset=this.componentconfig.fieldset,this.module=this.componentconfig.object}get displayitems(){return this._displayitems}set displayitems(e){e!==this.displayitems&&(this.displayitems=e,this.relatedmodels.loaditems=e,this.relatedmodels.getData())}get canViewAll(){return this.relatedmodels.count>0&&this.relatedmodels.count>this.relatedmodels.items.length}canSetCount(){return this.relatedmodels.count>this.relatedmodels.items.length}showAll(){let e="";this.navigationtab?.tabid&&(e="/tab/"+this.navigationtab.tabid),this.fieldset&&""!=this.fieldset?this.router.navigate([e+"/module/"+this.model.module+"/"+this.model.id+"/"+this.relatedmodels.relatedModule+"/"+this.relatedmodels._linkName+"/"+this.fieldset]):this.router.navigate([e+"/module/"+this.model.module+"/"+this.model.id+"/"+this.relatedmodels.relatedModule+"/"+this.relatedmodels._linkName])}reload(){this.relatedmodels.offset=0,this.paginating=!0,this.relatedmodels.getData().subscribe((()=>this.paginating=!1))}get nextDisabled(){return this.relatedmodels.offset+this.relatedmodels.loaditems>=this.relatedmodels.count}nextPage(){this.nextDisabled||(this.relatedmodels.offset=this.relatedmodels.offset+this.relatedmodels.loaditems,this.paginating=!0,this.relatedmodels.getData(!0).subscribe((()=>this.paginating=!1)))}lastPage(){if(!this.nextDisabled){let e=Math.floor(this.relatedmodels.count/this.relatedmodels.loaditems)*this.relatedmodels.loaditems;this.relatedmodels.offset=e,this.paginating=!0,this.relatedmodels.getData(!0).subscribe((()=>this.paginating=!1))}}get previousDisabled(){return 0==this.relatedmodels.offset}previousPage(){this.previousDisabled||(this.relatedmodels.offset=this.relatedmodels.offset-this.relatedmodels.loaditems,this.relatedmodels.offset<0&&(this.relatedmodels.offset=0),this.paginating=!0,this.relatedmodels.getData(!0).subscribe((()=>this.paginating=!1)))}firstPage(){this.previousDisabled||(this.relatedmodels.offset=0,this.paginating=!0,this.relatedmodels.getData(!0).subscribe((()=>this.paginating=!1)))}get page(){return this.relatedmodels.offset/this.relatedmodels.loaditems+1}get pages(){return Math.floor(this.relatedmodels.count/this.relatedmodels.loaditems)+1}static ɵfac=function(e){return new(e||ObjectRelatedCardFooter)(i.Y36(n.d),i.Y36(l.j),i.Y36(o.o),i.Y36(a.F0),i.Y36(d.d))};static ɵcmp=i.Xpm({type:ObjectRelatedCardFooter,selectors:[["object-related-card-footer"]],inputs:{componentconfig:"componentconfig"},decls:10,vars:3,consts:[[1,"slds-card__footer"],[1,"slds-grid","slds-grid_vertical-align-center"],[1,"slds-size--1-of-3","slds-text-align--left",2,"min-width","140px"],["class","slds-grid slds-grid--vertical-align-center",4,"ngIf"],[1,"slds-grid","slds-grow"],[1,"slds-grow","slds-text-align_center",2,"min-width","75px"],["href","javascript:void(0);",3,"click",4,"ngIf"],[1,"slds-text-align--right","slds-grow"],[1,"slds-button","slds-button_icon",3,"disabled","click"],["icon","refresh"],[1,"slds-grid","slds-grid--vertical-align-center"],["icon","jump_to_left"],["icon","chevronleft"],[1,"slds-p-horizontal--xx-small","slds-grid","slds-grid--vertical-align-center","slds-gutters_direct-xxx-small"],["label","LBL_PAGE",1,"slds-col"],[1,"slds-col"],["label","LBL_OF",1,"slds-col"],["icon","chevronright"],["icon","jump_to_right"],["href","javascript:void(0);",3,"click"],["label","LBL_VIEWALL"]],template:function(e,t){1&e&&(i.TgZ(0,"footer",0)(1,"div",1)(2,"div",2),i.YNc(3,m,16,6,"div",3),i.qZA(),i.TgZ(4,"div",4)(5,"div",5),i.YNc(6,g,2,0,"a",6),i.qZA(),i.TgZ(7,"div",7)(8,"button",8),i.NdJ("click",(function(){return t.reload()})),i._UZ(9,"system-button-icon",9),i.qZA()()()()()),2&e&&(i.xp6(3),i.Q6J("ngIf",t.relatedmodels.count>t.relatedmodels.loaditems&&t.canViewAll),i.xp6(3),i.Q6J("ngIf",t.canViewAll),i.xp6(2),i.Q6J("disabled",t.paginating))},dependencies:[r.O5,c.J,u._],encapsulation:2})}return ObjectRelatedCardFooter})()},81360:(e,t,s)=>{"use strict";s.d(t,{g:()=>x});var i=s(91591),n=s(62242),l=s(55329),o=s(66040),a=s(55710),d=s(4154),r=s(44755),c=s(95030),u=s(72656),m=s(44561),g=s(78859),h=s(79641),p=s(2294);function f(e,t){if(1&e&&(n.TgZ(0,"span",13),n._uU(1),n.qZA()),2&e){const e=n.oxw();n.xp6(1),n.hij("(",e.relatedmodels.count,")")}}function b(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"system-utility-icon",14),n.NdJ("click",(function(t){n.CHM(e);const s=n.oxw();return n.KtG(s.toggleOpen(t))})),n.qZA()}if(2&e){const e=n.oxw();n.Q6J("@animateicon",e.isopen?"open":"closed")}}function _(e,t){if(1&e&&n._UZ(0,"object-action-container",15),2&e){const e=n.oxw();n.Q6J("actionset",e.actionset)}}function v(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"div",8)(1,"button",16),n.NdJ("click",(function(){n.CHM(e);const t=n.oxw();return n.KtG(t.reload())})),n._UZ(2,"system-button-icon",17),n.qZA()()}}const y=["*"];let x=(()=>{class ObjectRelatedCardHeader{language;relatedmodels;model;metadata;componentconfig={};isopen=!0;disabled=!0;constructor(e,t,s,i){this.language=e,this.relatedmodels=t,this.model=s,this.metadata=i}ngOnInit(){this.componentconfig.collapsed&&setTimeout((()=>this.isopen=!this.componentconfig.collapsed)),this.componentconfig.displaysearch&&(this.disabled=!1)}get panelTitle(){return this.componentconfig.title?this.language.getLabel(this.componentconfig.title):this.relatedmodels._linkName&&this.metadata.fieldDefs[this.relatedmodels.module][this.relatedmodels._linkName]&&this.metadata.fieldDefs[this.relatedmodels.module][this.relatedmodels._linkName].vname?this.language.getLabel(this.metadata.fieldDefs[this.relatedmodels.module][this.relatedmodels._linkName].vname):this.language.getModuleName(this.module)}get actionset(){return this.componentconfig.actionset}get module(){return this.componentconfig.object}toggleOpen(e){e.stopPropagation(),this.isopen=!this.isopen}reload(){this.relatedmodels.getData()}get isEditable(){let e=""!=this.relatedmodels.linkName?this.relatedmodels.linkName:this.relatedmodels.relatedModule?.toLowerCase(),t=this.model.getFieldAccess(e);return!t||t>2}set searchTerm(e){e!=this.relatedmodels.searchTerm&&(this.relatedmodels.searchTerm=e,this.reloadList())}get searchTerm(){return this.relatedmodels.searchTerm}clearSearchTerm(){this.searchTerm=""}reloadList(){this.relatedmodels.offset=0,this.relatedmodels.getData()}static ɵfac=function(e){return new(e||ObjectRelatedCardHeader)(n.Y36(l.d),n.Y36(o.j),n.Y36(a.o),n.Y36(d.Pu))};static ɵcmp=n.Xpm({type:ObjectRelatedCardHeader,selectors:[["object-related-card-header"]],inputs:{componentconfig:"componentconfig"},ngContentSelectors:y,decls:16,vars:11,consts:[[1,"slds-card__header","slds-grid","slds-grid--vertical-align-center"],[1,"slds-media","slds-media--center","slds-has-flexi-truncate"],[3,"module","size"],[1,"slds-media__body","slds-truncate","slds-grid","slds-grid--vertical-align-center"],["href","javascript:void(0);",1,"slds-text-link--reset"],[1,"slds-text-heading--small"],["class","slds-p-left--xx-small",4,"ngIf"],["class","slds-m-horizontal--xx-small","icon","up","size","x-small",3,"click",4,"ngIf"],[1,"slds-m-left--x-small"],["ngContent",""],[1,"slds-grow",3,"ngModel","placeholder","ngModelChange","onSearchTermClear","onEnterPress"],["class","slds-m-left--x-small",3,"actionset",4,"ngIf"],["class","slds-m-left--x-small",4,"ngIf"],[1,"slds-p-left--xx-small"],["icon","up","size","x-small",1,"slds-m-horizontal--xx-small",3,"click"],[1,"slds-m-left--x-small",3,"actionset"],[1,"slds-button","slds-button_icon","x-slds-m-right--medium",3,"click"],["icon","refresh"]],template:function(e,t){1&e&&(n.F$t(),n.TgZ(0,"div",0)(1,"header",1),n._UZ(2,"system-icon",2),n.TgZ(3,"div",3)(4,"h2")(5,"a",4)(6,"span",5),n._uU(7),n.YNc(8,f,2,1,"span",6),n.qZA()()(),n.YNc(9,b,1,1,"system-utility-icon",7),n.qZA()(),n.TgZ(10,"div",8,9),n.Hsn(12),n.TgZ(13,"system-input-search-term",10),n.NdJ("ngModelChange",(function(e){return t.searchTerm=e}))("onSearchTermClear",(function(){return t.clearSearchTerm()}))("onEnterPress",(function(){return t.reloadList()})),n.qZA()(),n.YNc(14,_,1,1,"object-action-container",11),n.YNc(15,v,3,0,"div",12),n.qZA()),2&e&&(n.xp6(2),n.Q6J("module",t.module)("size","small"),n.xp6(5),n.hij(" ",t.panelTitle,""),n.xp6(1),n.Q6J("ngIf",!t.relatedmodels.isloading),n.xp6(1),n.Q6J("ngIf",t.relatedmodels.count>0),n.xp6(4),n.ekj("slds-hide",t.disabled),n.Q6J("ngModel",t.searchTerm)("placeholder",t.language.getModuleCombinedLabel("LBL_SEARCH",t.relatedmodels.relatedModule)),n.xp6(1),n.Q6J("ngIf",t.actionset&&t.isEditable),n.xp6(1),n.Q6J("ngIf",!t.relatedmodels.isloading&&0===t.relatedmodels.count))},dependencies:[r.O5,c.JJ,c.On,u.J,m.f,g.r,h.g,p.S],encapsulation:2,data:{animation:[(0,i.X$)("animateicon",[(0,i.SB)("open",(0,i.oB)({transform:"scale(1, 1)"})),(0,i.SB)("closed",(0,i.oB)({transform:"scale(1, -1)"})),(0,i.eR)("open => closed",[(0,i.jt)(".5s")]),(0,i.eR)("closed => open",[(0,i.jt)(".5s")])])]}})}return ObjectRelatedCardHeader})()},83249:(e,t,s)=>{"use strict";s.d(t,{s:()=>h});var i=s(66040),n=s(50727),l=s(62242),o=s(55329),a=s(4154),d=s(55710),r=s(44755),c=s(84567),u=s(37588);function m(e,t){if(1&e&&(l.TgZ(0,"div",2),l._UZ(1,"object-relatedlist-table",3),l.qZA()),2&e){const e=l.oxw();l.xp6(1),l.Q6J("listfields",e.listfields)("editable",e.editable)("editcomponentset",e.editcomponentset)("hideActions",e.hideactions)}}function g(e,t){1&e&&l._UZ(0,"system-illustration-no-access")}let h=(()=>{class ObjectRelatedList{language;metadata;relatedmodels;model;cdref;componentconfig={};listfields=[];editcomponentset="";hideactions=!1;loadsubscription=new n.w0;loaded=!1;constructor(e,t,s,i,n){this.language=e,this.metadata=t,this.relatedmodels=s,this.model=i,this.cdref=n}get aclAccess(){let e=""!=this.relatedmodels.linkName?this.relatedmodels.linkName:this.relatedmodels.relatedModule?.toLowerCase();return(this.metadata.checkModuleAcl(this.relatedmodels.relatedModule,"listrelated")||this.metadata.checkModuleAcl(this.relatedmodels.relatedModule,"list"))&&this.model.checkAccess("detail")&&this.model.checkFieldAccess(e)}ngOnInit(){this.loadConfig(),this.initializeRelatedModelService(),this.loadsubscription=this.model.data$.subscribe((e=>{this.loadRelated()}))}loadConfig(){let e=this.componentconfig.fieldset;this.listfields=this.metadata.getFieldSetFields(e),this.componentconfig.editcomponentset&&(this.editcomponentset=this.componentconfig.editcomponentset),this.hideactions=!!this.componentconfig.hideactions}initializeRelatedModelService(){this.relatedmodels.module=this.model.module,this.relatedmodels.id=this.model.id,this.relatedmodels.model=this.model,this.relatedmodels.relatedModule=this.componentconfig.object,this.componentconfig.linkEndPoint?this.relatedmodels.linkEndPoint=this.componentconfig.linkEndPoint:this.componentconfig.link&&(this.relatedmodels.linkName=this.componentconfig.link),this.componentconfig.sequencefield?this.relatedmodels.sequencefield=this.componentconfig.sequencefield:this.relatedmodels._linkName&&this.model.fields[this.relatedmodels._linkName]&&this.model.fields[this.relatedmodels._linkName].sequence_field&&(this.relatedmodels.sequencefield=this.model.fields[this.relatedmodels._linkName].sequence_field),this.componentconfig.sortfield&&(this.relatedmodels.sort.sortfield=this.componentconfig.sortfield,this.relatedmodels.sort.sortdirection=this.componentconfig.sortdirection?this.componentconfig.sortdirection:"ASC"),this.componentconfig.items&&(this.relatedmodels.loaditems=this.componentconfig.items),this.componentconfig.modulefilter&&(this.relatedmodels.modulefilter=this.componentconfig.modulefilter),this.relatedmodels.saveToLinkOnly=!!this.componentconfig.saveToLinkOnly}checkModelState(){return!(this.componentconfig.requiredmodelstate&&(_.isEmpty(this.model.data)||!this.model.checkModelState(this.componentconfig.requiredmodelstate)))}loadRelated(){this.loaded||!this.aclAccess||this.componentconfig.requiredmodelstate&&!this.checkModelState()||(this.loaded=!0,this.loadsubscription.unsubscribe(),this.relatedmodels.getData())}get editable(){try{return this.componentconfig.editable&&this.model.checkAccess("edit")}catch(e){return!1}}addSelectedItems(e){this.relatedmodels.addItems(e)}get listitemactionset(){return this.componentconfig&&this.componentconfig.listitemactionset?this.componentconfig.listitemactionset:""}static ɵfac=function(e){return new(e||ObjectRelatedList)(l.Y36(o.d),l.Y36(a.Pu),l.Y36(i.j),l.Y36(d.o),l.Y36(l.sBO))};static ɵcmp=l.Xpm({type:ObjectRelatedList,selectors:[["object-related-list"]],inputs:{componentconfig:"componentconfig"},features:[l._Bn([i.j])],decls:3,vars:2,consts:[["class","slds-scrollable",4,"ngIf","ngIfElse"],["noaccess",""],[1,"slds-scrollable"],[3,"listfields","editable","editcomponentset","hideActions"]],template:function(e,t){if(1&e&&(l.YNc(0,m,2,4,"div",0),l.YNc(1,g,1,0,"ng-template",null,1,l.W1O)),2&e){const e=l.MAs(2);l.Q6J("ngIf",t.aclAccess)("ngIfElse",e)}},dependencies:[r.O5,c.s,u.K],encapsulation:2})}return ObjectRelatedList})()},80423:(e,t,s)=>{"use strict";s.d(t,{X:()=>x});var i=s(55710),n=s(32294),l=s(62242),o=s(4154),a=s(83917),d=s(66040),r=s(83348),c=s(55329),u=s(26559),m=s(44044),g=s(44755),h=s(33634),p=s(78859),f=s(20586);const b=["object-related-list-item",""];function _(e,t){if(1&e&&(l.TgZ(0,"td",7),l._UZ(1,"field-container",8),l.qZA()),2&e){const e=t.$implicit,s=l.oxw(2);l.uIk("data-label",s.language.getFieldDisplayName(s.model.module,e.field)),l.xp6(1),l.Q6J("field",e.field)("fieldconfig",e.fieldconfig)("fielddisplayclass","slds-truncate")}}function v(e,t){if(1&e&&(l.TgZ(0,"td",9),l._UZ(1,"object-action-menu",10),l.qZA()),2&e){const e=l.oxw(2);l.xp6(1),l.Q6J("buttonsize","x-small")("actionset",e.actionset)}}function y(e,t){if(1&e&&(l.ynx(0),l.YNc(1,_,2,4,"td",5),l.YNc(2,v,2,2,"td",6),l.BQk()),2&e){const e=l.oxw();l.xp6(1),l.Q6J("ngForOf",e.listfields),l.xp6(1),l.Q6J("ngIf",!e.hideActions)}}let x=(()=>{class ObjectRelatedListItem{metadata;footer;model;relatedmodels;view;router;language;layout;modalservice;listfields=[];listitem={};module="";editable=!1;editcomponentset="";listitemactionset;hideActions=!1;customEditActions=[];customActions=[];expanded=!1;componentconfig={};constructor(e,t,s,i,n,l,o,a,d){this.metadata=e,this.footer=t,this.model=s,this.relatedmodels=i,this.view=n,this.router=l,this.language=o,this.layout=a,this.modalservice=d}ngOnInit(){this.view.displayLabels=!1,this.view.isEditable=this.editable,this.model.module=this.module,this.model.id=this.listitem.id,this.model.setData(this.listitem),this.componentconfig=this.metadata.getComponentConfig("ObjectRelatedListItem",this.model.module)}get actionset(){return this.listitemactionset?this.listitemactionset:this.componentconfig.actionset}navigateDetail(){this.router.navigate(["/module/"+this.model.module+"/"+this.model.id])}handleAction(e){switch(e){case"canceledit":this.model.cancelEdit(),this.view.setViewMode();break;case"edit":this.metadata.addComponentDirect("ObjectEditModalWReference",this.footer.footercontainer).subscribe((e=>{e.instance.model.module=this.module,e.instance.model.id=this.model.id,e.instance.model.setData(this.model.data,!1),this.editcomponentset&&""!=this.editcomponentset&&(e.instance.componentSet=this.editcomponentset),this.model.startEdit(),e.instance.modalAction$.subscribe((t=>{!1===t?(e.destroy(),this.model.cancelEdit()):(this.relatedmodels.setItem(this.model.data),this.model.endEdit(),e.destroy())}))}));break;case"remove":this.modalservice.confirm(this.language.getLabel("QST_REMOVE_ENTRY"),this.language.getLabel("QST_REMOVE_ENTRY",null,"short")).subscribe((e=>{e&&this.relatedmodels.deleteItem(this.model.id)}));break;case"saverelated":if(this.model.validate()){let e=this.model.getDirtyFields();e.date_modified=this.model.getField("date_modified"),e.id=this.model.id,this.relatedmodels.setItem(e),this.model.endEdit(),this.view.setViewMode()}}}toggleexpanded(e){e.stopPropagation(),this.expanded=!this.expanded}get isexpanded(){return"small"!=this.layout.screenwidth||this.expanded}get expandicon(){return this.expanded?"chevronup":"chevrondown"}static ɵfac=function(e){return new(e||ObjectRelatedListItem)(l.Y36(o.Pu),l.Y36(a.M),l.Y36(i.o),l.Y36(d.j),l.Y36(n.e),l.Y36(r.F0),l.Y36(c.d),l.Y36(u.b),l.Y36(m.o))};static ɵcmp=l.Xpm({type:ObjectRelatedListItem,selectors:[["","object-related-list-item",""]],inputs:{listfields:"listfields",listitem:"listitem",module:"module",editable:"editable",editcomponentset:"editcomponentset",listitemactionset:"listitemactionset",hideActions:"hideActions"},features:[l._Bn([i.o,n.e])],attrs:b,decls:6,vars:3,consts:[[1,"slds-hide--medium"],[1,"slds-grid","slds-grid--vertical-align-center","slds-p-around--xx-small"],[1,"slds-text-align--left","slds-truncate","slds-grow",3,"click"],["size","xx-small",3,"icon","click"],[4,"ngIf"],["scope","row",4,"ngFor","ngForOf"],["role","gridcell","class","slds-cell-shrink",4,"ngIf"],["scope","row"],[3,"field","fieldconfig","fielddisplayclass"],["role","gridcell",1,"slds-cell-shrink"],[3,"buttonsize","actionset"]],template:function(e,t){1&e&&(l.TgZ(0,"td",0)(1,"div",1)(2,"div",2),l.NdJ("click",(function(){return t.navigateDetail()})),l._uU(3),l.qZA(),l.TgZ(4,"system-utility-icon",3),l.NdJ("click",(function(e){return t.toggleexpanded(e)})),l.qZA()()(),l.YNc(5,y,3,2,"ng-container",4)),2&e&&(l.xp6(3),l.Oqu(t.model.data.summary_text),l.xp6(1),l.Q6J("icon",t.expandicon),l.xp6(1),l.Q6J("ngIf",t.isexpanded))},dependencies:[g.sg,g.O5,h.j,p.r,f.g],encapsulation:2})}return ObjectRelatedListItem})()},83129:(e,t,s)=>{"use strict";s.d(t,{Q:()=>f});var i=s(55710),n=s(32294),l=s(62242),o=s(83348),a=s(55329),d=s(4154),r=s(44755),c=s(13418),u=s(33634),m=s(78859),g=s(20586);const h=["object-related-list-sequenced-item",""];function p(e,t){if(1&e&&(l.TgZ(0,"td",0),l._UZ(1,"field-container",5),l.qZA()),2&e){const e=t.$implicit;l.xp6(1),l.Q6J("field",e.field)("fieldconfig",e.fieldconfig)("fielddisplayclass","slds-truncate")}}let f=(()=>{class ObjectRelatedListSequencedItem{model;view;router;language;metadata;listfields=[];listitem={};module="";listItemActionset;componentconfig={};constructor(e,t,s,i,n){this.model=e,this.view=t,this.router=s,this.language=i,this.metadata=n,this.view.isEditable=!1}get actionset(){return this.listItemActionset?this.listItemActionset:this.componentconfig.actionset}ngOnInit(){this.view.displayLabels=!1,this.model.module=this.module,this.model.id=this.listitem.id,this.model.setData(this.listitem),this.componentconfig=this.metadata.getComponentConfig("ObjectRelatedListSequencedItem",this.model.module)}navigateDetail(){this.router.navigate(["/module/"+this.model.module+"/"+this.model.id])}static ɵfac=function(e){return new(e||ObjectRelatedListSequencedItem)(l.Y36(i.o),l.Y36(n.e),l.Y36(o.F0),l.Y36(a.d),l.Y36(d.Pu))};static ɵcmp=l.Xpm({type:ObjectRelatedListSequencedItem,selectors:[["","object-related-list-sequenced-item",""]],inputs:{listfields:"listfields",listitem:"listitem",module:"module",listItemActionset:"listItemActionset"},features:[l._Bn([i.o,n.e])],attrs:h,decls:5,vars:5,consts:[["scope","row"],["cdkDragHandle","",2,"cursor","move",3,"icon","size"],["scope","row",4,"ngFor","ngForOf"],["role","gridcell","data-label","Actions",1,"slds-cell-shrink"],[3,"buttonsize","actionset"],[3,"field","fieldconfig","fielddisplayclass"]],template:function(e,t){1&e&&(l.TgZ(0,"td",0),l._UZ(1,"system-utility-icon",1),l.qZA(),l.YNc(2,p,2,3,"td",2),l.TgZ(3,"td",3),l._UZ(4,"object-action-menu",4),l.qZA()),2&e&&(l.xp6(1),l.Q6J("icon","rows")("size","x-small"),l.xp6(1),l.Q6J("ngForOf",t.listfields),l.xp6(2),l.Q6J("buttonsize","x-small")("actionset",t.actionset))},dependencies:[r.sg,c.Bh,u.j,m.r,g.g],encapsulation:2})}return ObjectRelatedListSequencedItem})()},37588:(e,t,s)=>{"use strict";s.d(t,{K:()=>N});var i=s(62242),n=s(55329),l=s(4154),o=s(66040),a=s(55710),d=s(26559),r=s(14505),c=s(12349),u=s(44755),m=s(13418),g=s(84567),h=s(7674),p=s(42161),f=s(78859),b=s(80423),_=s(83129);function v(e,t){1&e&&i._UZ(0,"th",7)}function y(e,t){if(1&e&&(i.TgZ(0,"th",9)(1,"span",10),i._UZ(2,"system-label-fieldname",11),i.qZA()()),2&e){const e=t.$implicit,s=i.oxw(3);i.Q6J("ngStyle",s.getColumnStyle(e)),i.xp6(2),i.Q6J("module",s.module)("field",e.field)("fieldconfig",e.fieldconfig)}}function x(e,t){if(1&e&&(i.ynx(0),i.YNc(1,y,3,4,"th",8),i.BQk()),2&e){const e=i.oxw(2);i.xp6(1),i.Q6J("ngForOf",e.listfields)}}function w(e,t){if(1&e&&i._UZ(0,"system-utility-icon",17),2&e){const e=i.oxw().$implicit,t=i.oxw(3);i.Q6J("icon",t.getSortIcon(e))("colorclass","sort"==t.getSortIcon(e)?"slds-icon-text-light":"slds-icon-text-default")}}function Z(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"th",13)(1,"a",14),i.NdJ("click",(function(){const t=i.CHM(e).$implicit,s=i.oxw(3);return i.KtG(s.setSortField(t))})),i.TgZ(2,"span",15),i._UZ(3,"system-label-fieldname",11),i.qZA(),i.YNc(4,w,1,2,"system-utility-icon",16),i.qZA()()}if(2&e){const e=t.$implicit,s=i.oxw(3);i.Q6J("ngStyle",s.getColumnStyle(e)),i.xp6(3),i.Q6J("module",s.module)("field",e.field)("fieldconfig",e.fieldconfig),i.xp6(1),i.Q6J("ngIf",s.isSortable(e))}}function T(e,t){if(1&e&&(i.ynx(0),i.YNc(1,Z,5,5,"th",12),i.BQk()),2&e){const e=i.oxw(2);i.xp6(1),i.Q6J("ngForOf",e.listfields)}}function C(e,t){1&e&&i._UZ(0,"th",7)}function k(e,t){if(1&e&&i._UZ(0,"tr",19),2&e){const e=t.$implicit,s=i.oxw(3);i.Q6J("module",s.module)("editable",s.editable)("editcomponentset",s.editcomponentset)("listfields",s.listfields)("listitem",e)("hideActions",s.hideActions)("listitemactionset",s.listitemactionset)}}function A(e,t){if(1&e&&(i.ynx(0),i.TgZ(1,"tbody"),i.YNc(2,k,1,7,"tr",18),i.qZA(),i.BQk()),2&e){const e=i.oxw(2);i.xp6(2),i.Q6J("ngForOf",e.relatedmodels.items)}}function L(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"tr",22),i.NdJ("cdkDragStarted",(function(t){i.CHM(e);const s=i.oxw(3);return i.KtG(s.dragStarted(t))}))("cdkDragEnded",(function(t){i.CHM(e);const s=i.oxw(3);return i.KtG(s.dragEnded(t))})),i.qZA()}if(2&e){const e=t.$implicit,s=i.oxw(3);i.Q6J("module",s.module)("listfields",s.listfields)("listitem",e)("listItemActionset",s.listitemactionset)}}function I(e,t){if(1&e){const e=i.EpF();i.ynx(0),i.TgZ(1,"tbody",20),i.NdJ("cdkDropListDropped",(function(t){i.CHM(e);const s=i.oxw(2);return i.KtG(s.drop(t))})),i.YNc(2,L,1,4,"tr",21),i.qZA(),i.BQk()}if(2&e){const e=i.oxw(2);i.xp6(2),i.Q6J("ngForOf",e.relatedmodels.items)("ngForTrackBy",e.getIdOfRow)}}function S(e,t){if(1&e&&i._UZ(0,"tbody",23),2&e){const e=i.oxw(2);i.Q6J("columns",e.listfields.length)("select",e.isSequenced)("tools",!e.hideActions)}}const M=function(e,t){return{"slds-table--bordered":e,"slds-no-row-hover":t}};function J(e,t){if(1&e&&(i.TgZ(0,"table",2)(1,"thead")(2,"tr",3),i.YNc(3,v,1,0,"th",4),i.YNc(4,x,2,1,"ng-container",5),i.YNc(5,T,2,1,"ng-container",5),i.YNc(6,C,1,0,"th",4),i.qZA()(),i.YNc(7,A,3,1,"ng-container",5),i.YNc(8,I,3,2,"ng-container",5),i.YNc(9,S,1,3,"tbody",6),i.qZA()),2&e){const e=i.oxw();i.Q6J("ngClass",i.WLB(8,M,!e.isSmall,e.nowDragging)),i.xp6(3),i.Q6J("ngIf",e.isSequenced),i.xp6(1),i.Q6J("ngIf",e.isSequenced),i.xp6(1),i.Q6J("ngIf",!e.isSequenced),i.xp6(1),i.Q6J("ngIf",!e.hideActions),i.xp6(1),i.Q6J("ngIf",!e.isSequenced),i.xp6(1),i.Q6J("ngIf",e.isSequenced),i.xp6(1),i.Q6J("ngIf",e.isloading)}}function O(e,t){1&e&&i._UZ(0,"system-illustration-no-access")}let N=(()=>{class ObjectRelatedlistTable{language;metadata;relatedmodels;model;layout;backend;logger;listfields=[];editable=!1;editcomponentset="";sequencefield=null;hideActions=!1;listitemactionset;noAccess=!1;nowDragging=!1;isSequenced=!1;constructor(e,t,s,i,n,l,o){this.language=e,this.metadata=t,this.relatedmodels=s,this.model=i,this.layout=n,this.backend=l,this.logger=o}ngOnInit(){this.metadata.checkModuleAcl(this.relatedmodels.relatedModule,"listrelated")||this.metadata.checkModuleAcl(this.relatedmodels.relatedModule,"list")?(this.metadata.fieldDefs[this.model.module][this.relatedmodels._linkName]||this.relatedmodels.linkEndPoint?!this.sequencefield&&this.metadata.fieldDefs[this.model.module][this.relatedmodels._linkName]?.sequence_field&&(this.sequencefield=this.metadata.fieldDefs[this.model.module][this.relatedmodels._linkName].sequence_field):this.logger.error('Missing link or wrong link name ("'+this.relatedmodels._linkName+'")!'),this.sequencefield&&(this.isSequenced=!0)):this.noAccess=!0}get isloading(){return this.relatedmodels.isloading}get isSmall(){return"small"===this.layout.screenwidth}get module(){return this.relatedmodels.relatedModule}getColumnStyle(e){return e.fieldconfig?.widthdimension&&e.fieldconfig?.width?{width:e.fieldconfig?.width+e.fieldconfig.widthdimension}:{}}isSortable(e){return!this.relatedmodels.sortBySequencefield&&!0===e.fieldconfig.sortable}setSortField(e){this.relatedmodels.sortBySequencefield||this.isSortable(e)&&(this.relatedmodels.sortfield=e.fieldconfig&&e.fieldconfig.sortfield?e.fieldconfig.sortfield:e.field)}getSortIcon(e){return this.relatedmodels.sortfield==(e.fieldconfig&&e.fieldconfig.sortfield?e.fieldconfig.sortfield:e.field)?"ASC"===this.relatedmodels.sort.sortdirection?"arrowdown":"arrowup":"sort"}getIdOfRow(e,t){return t.id}drop(e){let t=this.relatedmodels.items.splice(e.previousIndex,1);this.relatedmodels.items.splice(e.currentIndex,0,t[0]);let s=[],i=0;for(let e of this.relatedmodels.items)e[this.sequencefield]=i,s.push({id:e.id,[this.sequencefield]:i}),i++;this.relatedmodels.updateItems(s)}dragStarted(e){this.nowDragging=!0,e.source.element.nativeElement.classList.add("slds-is-selected")}dragEnded(e){this.nowDragging=!1,e.source.element.nativeElement.classList.remove("slds-is-selected")}static ɵfac=function(e){return new(e||ObjectRelatedlistTable)(i.Y36(n.d),i.Y36(l.Pu),i.Y36(o.j),i.Y36(a.o),i.Y36(d.b),i.Y36(r.y),i.Y36(c.M))};static ɵcmp=i.Xpm({type:ObjectRelatedlistTable,selectors:[["object-relatedlist-table"]],inputs:{listfields:"listfields",editable:"editable",editcomponentset:"editcomponentset",sequencefield:"sequencefield",hideActions:"hideActions",listitemactionset:"listitemactionset"},decls:3,vars:2,consts:[["class","slds-table slds-table--fixed-layout slds-table--header-fixed slds-max-medium-table_stacked-horizontal",3,"ngClass",4,"ngIf","ngIfElse"],["noaccess",""],[1,"slds-table","slds-table--fixed-layout","slds-table--header-fixed","slds-max-medium-table_stacked-horizontal",3,"ngClass"],[1,"slds-text-title--caps"],["class","slds-cell-shrink","scope","col",4,"ngIf"],[4,"ngIf"],["system-table-stencils","",3,"columns","select","tools",4,"ngIf"],["scope","col",1,"slds-cell-shrink"],["class","slds-resizable","scope","col",3,"ngStyle",4,"ngFor","ngForOf"],["scope","col",1,"slds-resizable",3,"ngStyle"],[1,"slds-th__action","slds-truncate"],["length","short",3,"module","field","fieldconfig"],["class","slds-is-sortable slds-resizable","scope","col",3,"ngStyle",4,"ngFor","ngForOf"],["scope","col",1,"slds-is-sortable","slds-resizable",3,"ngStyle"],["href","javascript:void(0);",1,"slds-th__action","slds-text-link--reset",3,"click"],[1,"slds-truncate"],["size","xx-small",3,"icon","colorclass",4,"ngIf"],["size","xx-small",3,"icon","colorclass"],["object-related-list-item","","class","slds-hint-parent",3,"module","editable","editcomponentset","listfields","listitem","hideActions","listitemactionset",4,"ngFor","ngForOf"],["object-related-list-item","",1,"slds-hint-parent",3,"module","editable","editcomponentset","listfields","listitem","hideActions","listitemactionset"],["cdkDropList","",1,"dragboundary",3,"cdkDropListDropped"],["object-related-list-sequenced-item","","cdkDrag","","cdkDragBoundary",".dragboundary","class","slds-hint-parent",3,"module","listfields","listitem","listItemActionset","cdkDragStarted","cdkDragEnded",4,"ngFor","ngForOf","ngForTrackBy"],["object-related-list-sequenced-item","","cdkDrag","","cdkDragBoundary",".dragboundary",1,"slds-hint-parent",3,"module","listfields","listitem","listItemActionset","cdkDragStarted","cdkDragEnded"],["system-table-stencils","",3,"columns","select","tools"]],template:function(e,t){if(1&e&&(i.YNc(0,J,10,11,"table",0),i.YNc(1,O,1,0,"ng-template",null,1,i.W1O)),2&e){const e=i.MAs(2);i.Q6J("ngIf",!t.noAccess)("ngIfElse",e)}},dependencies:[u.mk,u.sg,u.O5,u.PC,m.Wj,m.Zt,g.s,h.h,p.x,f.r,b.X,_.Q],encapsulation:2})}return ObjectRelatedlistTable})()},88709:(e,t,s)=>{"use strict";s.d(t,{T:()=>b});var i=s(50727),n=s(62242),l=s(55329),o=s(4154),a=s(55710),d=s(72057),r=s(62422),c=s(44755),u=s(72656),m=s(24114),g=s(83463);function h(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"system-input-date-picker",12),n.NdJ("datePicked",(function(t){n.CHM(e);const s=n.oxw();return n.KtG(s.setReminder(t))})),n.qZA()}if(2&e){const e=n.oxw();n.Q6J("setDate",e.reminderDate)}}const p=function(e){return{"slds-is-open":e}},f=function(e,t){return{"slds-not-selected":e,"slds-is-selected":t}};let b=(()=>{class ObjectReminderButton{language;metadata;model;renderer;elementRef;reminder;userpreferences;showDialog=!1;reminderDate=new moment;hasReminder=!1;clickListener;subscriptions=new i.w0;constructor(e,t,s,i,n,l,o){this.language=e,this.metadata=t,this.model=s,this.renderer=i,this.elementRef=n,this.reminder=l,this.userpreferences=o,this.subscriptions.add(this.reminder.changed$.subscribe((e=>{this.loadReminder()}))),this.loadReminder()}ngOnDestroy(){this.subscriptions.unsubscribe()}loadReminder(){let e=this.reminder.getReminder(this.model.module,this.model.id);!1!==e?(this.hasReminder=!0,this.reminderDate=new moment(e)):this.hasReminder=!1}toggleDatePicker(){this.showDialog=!this.showDialog,this.showDialog?this.clickListener=this.renderer.listen("document","click",(e=>this.onClick(e))):this.clickListener&&this.clickListener()}onClick(e){this.elementRef.nativeElement.contains(e.target)||(this.showDialog=!1)}get isEditing(){return this.model.isEditing}clearReminder(){this.reminder.deleteReminder(this.model.module,this.model.id),this.hasReminder=!1}setReminder(e){this.showDialog=!1,this.hasReminder=!0,this.reminderDate=new moment(e),this.reminder.setReminder(this.model,this.reminderDate)}getReminderDate(){return this.reminderDate.format(this.userpreferences.getDateFormat())}static ɵfac=function(e){return new(e||ObjectReminderButton)(n.Y36(l.d),n.Y36(o.Pu),n.Y36(a.o),n.Y36(n.Qsj),n.Y36(n.SBq),n.Y36(d.U),n.Y36(r.z))};static ɵcmp=n.Xpm({type:ObjectReminderButton,selectors:[["object-reminder-button"]],decls:14,vars:10,consts:[[1,"slds-form-element","slds-dropdown-trigger","slds-dropdown-trigger_click",3,"ngClass"],[1,"slds-button","slds-button_stateful","slds-button--neutral","slds-m-horizontal--xxx-small",3,"ngClass"],[1,"slds-text-not-selected",3,"click"],["icon","add",1,"slds-p-right--xx-small"],["label","LBL_REMINDER"],[1,"slds-text-selected"],["icon","check",1,"slds-p-right--xx-small"],[1,"slds-text-selected-focus"],["icon","close",1,"slds-p-right--xx-small",3,"click"],[3,"click"],["role","dialog",1,"slds-datepicker","slds-dropdown","slds-dropdown_right"],[3,"setDate","datePicked",4,"ngIf"],[3,"setDate","datePicked"]],template:function(e,t){1&e&&(n.TgZ(0,"div",0)(1,"a",1)(2,"span",2),n.NdJ("click",(function(){return t.toggleDatePicker()})),n._UZ(3,"system-button-icon",3)(4,"system-label",4),n.qZA(),n.TgZ(5,"span",5),n._UZ(6,"system-button-icon",6),n._uU(7),n.qZA(),n.TgZ(8,"span",7)(9,"system-button-icon",8),n.NdJ("click",(function(){return t.clearReminder()})),n.qZA(),n.TgZ(10,"span",9),n.NdJ("click",(function(){return t.toggleDatePicker()})),n._uU(11),n.qZA()()(),n.TgZ(12,"div",10),n.YNc(13,h,1,1,"system-input-date-picker",11),n.qZA()()),2&e&&(n.Q6J("ngClass",n.VKq(5,p,t.showDialog)),n.xp6(1),n.Q6J("ngClass",n.WLB(7,f,!t.hasReminder,t.hasReminder)),n.xp6(6),n.hij("",t.getReminderDate()," "),n.xp6(4),n.Oqu(t.getReminderDate()),n.xp6(2),n.Q6J("ngIf",t.showDialog))},dependencies:[c.mk,c.O5,u.J,m.e,g._],encapsulation:2})}return ObjectReminderButton})()},96409:(e,t,s)=>{"use strict";s.d(t,{n:()=>p});var i=s(68017),n=s(62242),l=s(55329),o=s(4154),a=s(55710),d=s(44044),r=s(83348),c=s(44755),u=s(72656),m=s(95681);function g(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"li",10),n.NdJ("click",(function(){const t=n.CHM(e).$implicit,s=n.oxw(2);return n.KtG(s.propagateclick(t.id))})),n.TgZ(1,"a",11),n._UZ(2,"object-status-network-button-item",3),n.qZA()()}if(2&e){const e=t.$implicit;n.xp6(2),n.Q6J("item",e)}}function h(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"div",1)(1,"button",2),n.NdJ("click",(function(){n.CHM(e);const t=n.oxw();return n.KtG(t.propagateclick(t.primaryItem.id))})),n._UZ(2,"object-status-network-button-item",3),n.qZA(),n.TgZ(3,"div",4)(4,"button",5),n._UZ(5,"system-button-icon",6),n.qZA(),n.TgZ(6,"div",7)(7,"ul",8),n.YNc(8,g,3,1,"li",9),n.qZA()()()()}if(2&e){const e=n.oxw();n.xp6(1),n.Q6J("disabled",e.isDisabled),n.xp6(1),n.Q6J("item",e.primaryItem),n.xp6(2),n.Q6J("disabled",e.isDisabled||0==e.secondaryItems.length),n.xp6(4),n.Q6J("ngForOf",e.secondaryItems)}}let p=(()=>{class ObjectStatusNetworkButton{language;metadata;model;modal;router;renderer;elementRef;buttonitemlist;statusField="";statusNetwork=[];constructor(e,t,s,i,n,l,o){this.language=e,this.metadata=t,this.model=s,this.modal=i,this.router=n,this.renderer=l,this.elementRef=o}get isDisabled(){return this.model.isEditing||!this.model.checkAccess("edit")}get isManaged(){return""!=this.statusField&&!1!==this.primaryItem&&!this.isDisabled}get primaryItem(){for(let e of this.statusNetwork)if(e.status_from==this.model.getField(this.statusField)&&(!e.required_model_state||this.model.checkModelState(e.required_model_state)))return e;return!1}get secondaryItems(){let e=[],t=!1;for(let s of this.statusNetwork)s.status_from!=this.model.getField(this.statusField)||s.required_model_state&&!this.model.checkModelState(s.required_model_state)||(t&&e.push(s),t||(t=!0));return e}ngOnInit(){let e=this.metadata.checkStatusManaged(this.model.module);0!=e&&(this.statusField=e.statusField,this.statusNetwork=e.statusNetwork)}propagateclick(e){this.buttonitemlist.some((t=>{if(t.id==e)return t.setStatus(this.statusField),!0}))}static ɵfac=function(e){return new(e||ObjectStatusNetworkButton)(n.Y36(l.d),n.Y36(o.Pu),n.Y36(a.o),n.Y36(d.o),n.Y36(r.F0),n.Y36(n.Qsj),n.Y36(n.SBq))};static ɵcmp=n.Xpm({type:ObjectStatusNetworkButton,selectors:[["object-status-network-button"]],viewQuery:function(e,t){if(1&e&&n.Gf(i.Y,5),2&e){let e;n.iGM(e=n.CRH())&&(t.buttonitemlist=e)}},decls:1,vars:1,consts:[["class","slds-button-group slds-m-horizontal--xxx-small",4,"ngIf"],[1,"slds-button-group","slds-m-horizontal--xxx-small"],[1,"slds-button","slds-button_neutral",3,"disabled","click"],[3,"item"],["system-dropdown-trigger","",1,"slds-dropdown-trigger","slds-dropdown-trigger_click","slds-button_last"],[1,"slds-button","slds-button_icon","slds-button_icon-border-filled",3,"disabled"],["icon","down"],[1,"slds-dropdown","slds-dropdown_right","slds-dropdown_actions"],["role","menu",1,"slds-dropdown__list"],["class","slds-dropdown__item","role","presentation",3,"click",4,"ngFor","ngForOf"],["role","presentation",1,"slds-dropdown__item",3,"click"],["href","javascript:void(0);","role","menuitem",1,"slds-truncate"]],template:function(e,t){1&e&&n.YNc(0,h,9,4,"div",0),2&e&&n.Q6J("ngIf",t.isManaged)},dependencies:[c.sg,c.O5,u.J,m.l,i.Y],encapsulation:2})}return ObjectStatusNetworkButton})()},68017:(e,t,s)=>{"use strict";s.d(t,{Y:()=>u});var i=s(62242),n=s(55329),l=s(4154),o=s(44044),a=s(55710),d=s(44755);const r=["componentcontainer"];function c(e,t){if(1&e&&(i.TgZ(0,"span",2),i._uU(1),i.qZA()),2&e){const e=i.oxw();i.xp6(1),i.Oqu(e.language.getLabel(e.item.action_label))}}let u=(()=>{class ObjectStatusNetworkButtonItem{language;metadata;modal;model;injector;componentcontainer;item={};actioncomponent;initialized=!1;constructor(e,t,s,i,n){this.language=e,this.metadata=t,this.modal=s,this.model=i,this.injector=n}get id(){return this.item.id}get hasComponent(){return this.item.status_component&&""!=this.item.status_component}ngAfterViewInit(){this.hasComponent&&this.componentcontainer&&this.metadata.addComponent(this.item.status_component,this.componentcontainer,this.injector).subscribe((e=>{this.actioncomponent=e.instance,e.instance.item=this.item})),this.initialized=!0}ngOnChanges(){this.actioncomponent&&(this.actioncomponent.self.destroy(),this.actioncomponent=null),this.initialized&&this.hasComponent&&this.metadata.addComponent(this.item.status_component,this.componentcontainer,this.injector).subscribe((e=>{this.actioncomponent=e.instance,e.instance.item=this.item}))}setStatus(e){this.item.prompt_label?this.modal.confirm(this.language.getLabel(this.item.prompt_label,"","long"),this.language.getLabel(this.item.prompt_label,"")).subscribe((t=>{t&&this.executeChange(e)})):this.executeChange(e)}executeChange(e){this.actioncomponent&&this.actioncomponent.execute?this.actioncomponent.execute():(this.model.startEdit(!0,!1),this.model.setField(e,this.item.status_to),this.model.validate()?this.model.save():this.model.edit())}static ɵfac=function(e){return new(e||ObjectStatusNetworkButtonItem)(i.Y36(n.d),i.Y36(l.Pu),i.Y36(o.o),i.Y36(a.o),i.Y36(i.zs3))};static ɵcmp=i.Xpm({type:ObjectStatusNetworkButtonItem,selectors:[["object-status-network-button-item"]],viewQuery:function(e,t){if(1&e&&i.Gf(r,7,i.s_b),2&e){let e;i.iGM(e=i.CRH())&&(t.componentcontainer=e.first)}},inputs:{item:"item"},features:[i.TTD],decls:3,vars:1,consts:[["class","slds-text-color_default",4,"ngIf"],["componentcontainer",""],[1,"slds-text-color_default"]],template:function(e,t){1&e&&(i.YNc(0,c,2,1,"span",0),i._UZ(1,"div",null,1)),2&e&&i.Q6J("ngIf",!t.hasComponent)},dependencies:[d.O5],encapsulation:2})}return ObjectStatusNetworkButtonItem})()},64652:(e,t,s)=>{"use strict";s.d(t,{U:()=>u});var i=s(62242),n=s(32355),l=s(4154),o=s(55710),a=s(44755),d=s(72656),r=s(83463);const c=function(e,t){return{"slds-is-selected":e,"slds-not-selected":t}};let u=(()=>{class ObjectSubscriptionButton{subscriptionService;metadata;model;inProcess=!1;constructor(e,t,s){this.subscriptionService=e,this.metadata=t,this.model=s}toggleSubscribe(){this.inProcess=!0,this.subscriptionService.hasSubscription(this.model.id)?this.subscriptionService.unsubscribeBean(this.model.id,this.model.module).subscribe((e=>this.inProcess=!1),(e=>this.inProcess=!1)):this.subscriptionService.subscribeBean(this.model).subscribe((e=>this.inProcess=!1),(e=>this.inProcess=!1))}static ɵfac=function(e){return new(e||ObjectSubscriptionButton)(i.Y36(n.J),i.Y36(l.Pu),i.Y36(o.o))};static ɵcmp=i.Xpm({type:ObjectSubscriptionButton,selectors:[["object-subscription-button"]],decls:10,vars:5,consts:[[1,"slds-button","slds-button_neutral","slds-button_stateful",2,"text-transform","capitalize",3,"disabled","ngClass","click"],[1,"slds-text-not-selected"],["icon","add",1,"slds-p-right--xx-small"],["label","LBL_FOLLOW"],[1,"slds-text-selected"],["icon","check",1,"slds-p-right--xx-small"],["label","LBL_FOLLOWING"],[1,"slds-text-selected-focus"],["icon","close",1,"slds-p-right--xx-small"],["label","LBL_UNFOLLOW"]],template:function(e,t){1&e&&(i.TgZ(0,"button",0),i.NdJ("click",(function(){return t.toggleSubscribe()})),i.TgZ(1,"span",1),i._UZ(2,"system-button-icon",2)(3,"system-label",3),i.qZA(),i.TgZ(4,"span",4),i._UZ(5,"system-button-icon",5)(6,"system-label",6),i.qZA(),i.TgZ(7,"span",7),i._UZ(8,"system-button-icon",8)(9,"system-label",9),i.qZA()()),2&e&&i.Q6J("disabled",t.inProcess)("ngClass",i.WLB(2,c,t.subscriptionService.hasSubscription(t.model.id),!t.subscriptionService.hasSubscription(t.model.id)))},dependencies:[a.mk,d.J,r._],encapsulation:2})}return ObjectSubscriptionButton})()},31106:(e,t,s)=>{"use strict";s.d(t,{V:()=>p});var i=s(50727),n=s(62242),l=s(4154),o=s(17017),a=s(83348),d=s(14505),r=s(33369),c=s(55710),u=s(44755),m=s(44561);function g(e,t){if(1&e&&(n.TgZ(0,"span",5),n._uU(1),n.qZA()),2&e){const e=n.oxw(2);n.xp6(1),n.hij(" ",e.openWorkflowsCount," ")}}function h(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"div",1)(1,"button",2),n.NdJ("click",(function(){n.CHM(e);const t=n.oxw();return n.KtG(t.open())})),n._UZ(2,"system-icon",3),n.qZA(),n.YNc(3,g,2,1,"span",4),n.qZA()}if(2&e){const e=n.oxw();n.xp6(3),n.Q6J("ngIf",e.openWorkflowsCount>0)}}let p=(()=>{class ObjectWorkflowButton{metadata;navigationTab;router;backend;broadcast;model;workflowEnabled=!1;openWorkflowsCount=0;subscriptions=new i.w0;constructor(e,t,s,i,n,l){this.metadata=e,this.navigationTab=t,this.router=s,this.backend=i,this.broadcast=n,this.model=l,this.initialize()}ngOnDestroy(){this.subscriptions.unsubscribe()}initialize(){this.workflowEnabled=this.metadata.getModuleDefs("Workflows")&&this.metadata.getModuleDefs(this.model.module).workflow,this.workflowEnabled&&(this.getOpenWorkflowsCount(),this.subscriptions.add(this.broadcast.message$.subscribe((e=>this.handleMessage(e)))))}open(){const e=this.navigationTab?.tabid?"/tab/"+this.navigationTab.tabid:"";this.router.navigate([`${e}/module/${this.model.module}/${this.model.id}/workflows`])}getOpenWorkflowsCount(){this.backend.getRequest(`module/Workflows/forparent/${this.model.module}/${this.model.id}/open`).subscribe({next:e=>this.openWorkflowsCount=e.count})}handleMessage(e){if("workflows.reload"==e.messagetype)return this.getOpenWorkflowsCount();if(e.messagedata.module===this.model.module||e.messagedata.id===this.model.id)switch(e.messagetype){case"model.save":this.getOpenWorkflowsCount();break;case"workflows.loaded":this.openWorkflowsCount=e.messagedata.workflowcount}}static ɵfac=function(e){return new(e||ObjectWorkflowButton)(n.Y36(l.Pu),n.Y36(o.d),n.Y36(a.F0),n.Y36(d.y),n.Y36(r.f),n.Y36(c.o))};static ɵcmp=n.Xpm({type:ObjectWorkflowButton,selectors:[["object-workflow-button"]],decls:1,vars:1,consts:[["class","slds-is-relative slds-m-horizontal--x-small",4,"ngIf"],[1,"slds-is-relative","slds-m-horizontal--x-small"],[1,"slds-button",2,"text-transform","capitalize",3,"click"],["icon","process","divClass",""],["style","box-shadow: 0 0 0 2px #fff;","aria-hidden","true","class","slds-notification-badge slds-incoming-notification slds-show-notification",4,"ngIf"],["aria-hidden","true",1,"slds-notification-badge","slds-incoming-notification","slds-show-notification",2,"box-shadow","0 0 0 2px #fff"]],template:function(e,t){1&e&&n.YNc(0,h,4,1,"div",0),2&e&&n.Q6J("ngIf",t.workflowEnabled)},dependencies:[u.O5,m.f],encapsulation:2})}return ObjectWorkflowButton})()},19784:(e,t,s)=>{"use strict";s.r(t),s.d(t,{ObjectComponents:()=>Ac});var i=s(44755),n=s(13418),l=s(95030),o=s(83348),a=s(84357),d=s(53190),r=s(57239),c=s(16270),u=s(7443),m=s(62242),g=s(55329),h=s(55710);let p=(()=>{class ObjectFieldFilterPipe{languange;model;constructor(e,t){this.languange=e,this.model=t}transform(e,t){let s=[];for(let i of e)(i.toLowerCase().indexOf(t.toLowerCase())>=0||this.languange.getFieldDisplayName(this.model.module,i).toLowerCase().indexOf(t.toLowerCase())>0)&&s.push(i);return s}static ɵfac=function(e){return new(e||ObjectFieldFilterPipe)(m.Y36(g.d,16),m.Y36(h.o,16))};static ɵpipe=m.Yjl({name:"objectfieldfilter",type:ObjectFieldFilterPipe,pure:!1})}return ObjectFieldFilterPipe})();var f=s(91591),b=s(4154),v=s(26625),y=s(42644),x=s(26559),w=s(72656),Z=s(44561),T=s(79641),C=s(50151),k=s(57102),A=s(62348),L=s(62422),I=s(83463),S=s(78859),M=s(14361);function J(e,t){if(1&e){const e=m.EpF();m.TgZ(0,"li",10),m.NdJ("click",(function(){const t=m.CHM(e).$implicit,s=m.oxw();return m.KtG(s.setListComponent(t.component))})),m.TgZ(1,"a",11)(2,"span",12),m._UZ(3,"system-label",13),m.qZA(),m._UZ(4,"system-utility-icon",14),m.qZA()()}if(2&e){const e=t.$implicit;m.xp6(3),m.Q6J("label",e.label),m.xp6(1),m.Q6J("icon",e.icon)}}let O=(()=>{class ObjectListViewHeaderListSelector{metadata;userpreferences;modellist;language;model;elementRef;renderer;componentconfig;constructor(e,t,s,i,n,l,o){this.metadata=e,this.userpreferences=t,this.modellist=s,this.language=i,this.model=n,this.elementRef=l,this.renderer=o}ngOnInit(){this.initialize()}initialize(){this.loadComponentConfig(),this.modellist.currentList&&-1!=["all","owner"].indexOf(this.modellist.currentList.id)&&this.modellist.updateStandardListsComponent(this.modellist.currentList.id,this.getDefaultComponent())}getDefaultComponent(){return this.userpreferences.getPreference("defaultlisttype",this.modellist.module)||this.componentconfig.lists[0].component}loadComponentConfig(){let e=this.metadata.getComponentConfig("ObjectListView",this.model.module),t=this.metadata.getComponentSetObjects(e.componentset);this.componentconfig={lists:t.map((e=>({component:e.component,icon:e.componentconfig.icon?e.componentconfig.icon:"list",label:e.componentconfig.name})))}}get currentListIcon(){let e="";if(this.componentconfig.lists){let t=this.componentconfig.lists.find((e=>e.component==this.modellist.currentList.listcomponent));e=t?.icon}return e}get disabled(){return this.componentconfig.lists.length<=1}setListComponent(e){this.modellist.currentList&&(-1!=["all","owner"].indexOf(this.modellist.currentList.id)?this.modellist.updateStandardListsComponent(this.modellist.currentList.id,e):this.modellist.updateListTypeComponent(e))}static ɵfac=function(e){return new(e||ObjectListViewHeaderListSelector)(m.Y36(b.Pu),m.Y36(L.z),m.Y36(y.t),m.Y36(g.d),m.Y36(h.o),m.Y36(m.SBq),m.Y36(m.Qsj))};static ɵcmp=m.Xpm({type:ObjectListViewHeaderListSelector,selectors:[["object-listview-header-list-selector"]],decls:10,vars:3,consts:[["aria-expanded","false","system-dropdown-trigger-simple","",1,"slds-dropdown-trigger","slds-dropdown-trigger--click","slds-m-horizontal--xxx-small"],["aria-haspopup","true","system-title","LBL_CHANGE_VIEW",1,"slds-button","slds-button--icon","slds-button--icon-border","slds-button--neutral",3,"disabled"],["size","small",3,"icon"],["icon","down","size","x-small",1,"slds-p-left--xxx-small"],[1,"slds-dropdown","slds-dropdown--right","slds-dropdown--small"],["role","menu",1,"slds-dropdown__list"],["role","separator",1,"slds-dropdown__header"],[1,"slds-text-title--caps"],["label","LBL_DISPLAYAS"],["class","slds-dropdown__item slds-is-selected","role","presentation",3,"click",4,"ngFor","ngForOf"],["role","presentation",1,"slds-dropdown__item","slds-is-selected",3,"click"],["href","javascript:void(0);","role","menuitemcheckbox","aria-checked","true","tabindex","0"],[1,"slds-truncate"],[3,"label"],["size","x-small",3,"icon"]],template:function(e,t){1&e&&(m.TgZ(0,"div",0)(1,"button",1),m._UZ(2,"system-button-icon",2)(3,"system-button-icon",3),m.qZA(),m.TgZ(4,"div",4)(5,"ul",5)(6,"li",6)(7,"span",7),m._UZ(8,"system-label",8),m.qZA()(),m.YNc(9,J,5,2,"li",9),m.qZA()()()),2&e&&(m.xp6(1),m.Q6J("disabled",t.disabled),m.xp6(1),m.Q6J("icon",t.currentListIcon),m.xp6(7),m.Q6J("ngForOf",t.componentconfig.lists))},dependencies:[i.sg,w.J,I._,S.r,M.w,C.S],encapsulation:2})}return ObjectListViewHeaderListSelector})();var N=s(2294),F=s(94822),q=s(31058),E=s(37954),Y=s(72685);function D(e,t){1&e&&m._UZ(0,"object-listview-tags-aggregate")}function U(e,t){if(1&e&&m._UZ(0,"object-listview-aggregate",14),2&e){const e=m.oxw().$implicit;m.Q6J("aggregate",e)}}function Q(e,t){if(1&e&&(m.TgZ(0,"div",12),m.YNc(1,U,1,1,"object-listview-aggregate",13),m.qZA()),2&e){const e=t.$implicit;m.xp6(1),m.Q6J("ngIf",!e.system)}}let R=(()=>{class ObjectListViewAggregatesPanel{elementRef;language;metadata;modellist;constructor(e,t,s,i){this.elementRef=e,this.language=t,this.metadata=s,this.modellist=i}get aggregates(){return this.modellist.moduleAggregates}get hasTags(){return this.metadata.checkTagging(this.modellist.module)}clearAggregates(){this.modellist.removeAllAggregates(!0),this.modellist.reLoadList()}static ɵfac=function(e){return new(e||ObjectListViewAggregatesPanel)(m.Y36(m.SBq),m.Y36(g.d),m.Y36(b.Pu),m.Y36(y.t))};static ɵcmp=m.Xpm({type:ObjectListViewAggregatesPanel,selectors:[["object-listview-aggregates-panel"]],hostAttrs:[1,"slds-is-fixed"],decls:12,vars:3,consts:[[1,"slds-panel","slds-size--medium","slds-grid","slds-grid--vertical","slds-nowrap","slds-panel--filters"],[1,"slds-form--stacked","slds-grow","slds-scrollable--y","slds-grid","slds-grid--vertical"],[1,"slds-filters"],[1,"slds-filters__header","slds-grid","slds-grid--align-spread","slds-has-divider--bottom"],[1,"slds-align-middle","slds-text-heading--small"],["label","LBL_AGGREGATES"],[1,"slds-button","slds-button--brand",3,"disabled","click"],["label","LBL_CLEARALL"],["system-to-bottom","",1,"slds-filters__body"],[1,"slds-grid_vertical"],[4,"ngIf"],["class","slds-m-vertical--xx-small",4,"ngFor","ngForOf"],[1,"slds-m-vertical--xx-small"],[3,"aggregate",4,"ngIf"],[3,"aggregate"]],template:function(e,t){1&e&&(m.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h4",4),m._UZ(5,"system-label",5),m.qZA(),m.TgZ(6,"button",6),m.NdJ("click",(function(){return t.clearAggregates()})),m._UZ(7,"system-label",7),m.qZA()(),m.TgZ(8,"div",8)(9,"div",9),m.YNc(10,D,1,0,"object-listview-tags-aggregate",10),m.YNc(11,Q,2,1,"div",11),m.qZA()()()()()),2&e&&(m.xp6(6),m.Q6J("disabled",!t.modellist.hasNonSysAggregates),m.xp6(4),m.Q6J("ngIf",t.hasTags),m.xp6(1),m.Q6J("ngForOf",t.aggregates))},dependencies:[i.sg,i.O5,I._,q.H,E.i,Y.w],encapsulation:2})}return ObjectListViewAggregatesPanel})(),j=(()=>{class ObjectListViewFilterButton{modellist;constructor(e){this.modellist=e}togglefilters(){this.modellist.displayAggregates=!1,this.modellist.displayFilters=!this.modellist.displayFilters}get enabled(){return this.modellist.filterEnabled()}get buttonclasses(){return this.modellist.displayFilters?"slds-is-selected":""}static ɵfac=function(e){return new(e||ObjectListViewFilterButton)(m.Y36(y.t))};static ɵcmp=m.Xpm({type:ObjectListViewFilterButton,selectors:[["object-listview-filter-button"]],decls:2,vars:2,consts:[["system-title","LBL_FILTER",1,"slds-button","slds-button--neutral","slds-button--icon-border","slds-m-horizontal--xxx-small",3,"disabled","ngClass","click"],["icon","filterList"]],template:function(e,t){1&e&&(m.TgZ(0,"button",0),m.NdJ("click",(function(){return t.togglefilters()})),m._UZ(1,"system-button-icon",1),m.qZA()),2&e&&m.Q6J("disabled",!t.enabled)("ngClass",t.buttonclasses)},dependencies:[i.mk,w.J,C.S],encapsulation:2})}return ObjectListViewFilterButton})();var B=s(50727),G=s(69901);const P=["popover"];function H(e,t){if(1&e){const e=m.EpF();m.TgZ(0,"div",9)(1,"div",10)(2,"fieldset",11)(3,"legend",12),m._UZ(4,"system-label",5),m.qZA(),m.TgZ(5,"div",13)(6,"span",14)(7,"input",15),m.NdJ("ngModelChange",(function(t){m.CHM(e);const s=m.oxw();return m.KtG(s.filterValue=t)})),m.qZA(),m.TgZ(8,"label",16),m._UZ(9,"span",17),m.TgZ(10,"span",18),m._UZ(11,"system-label",19),m.qZA()()(),m.TgZ(12,"span",14)(13,"input",20),m.NdJ("ngModelChange",(function(t){m.CHM(e);const s=m.oxw();return m.KtG(s.filterValue=t)})),m.qZA(),m.TgZ(14,"label",21),m._UZ(15,"span",17),m.TgZ(16,"span",18),m._UZ(17,"system-label",22),m.qZA()()(),m.TgZ(18,"span",14)(19,"input",23),m.NdJ("ngModelChange",(function(t){m.CHM(e);const s=m.oxw();return m.KtG(s.filterValue=t)})),m.qZA(),m.TgZ(20,"label",24),m._UZ(21,"span",17),m.TgZ(22,"span",18),m._UZ(23,"system-label",25),m.qZA()()()()(),m.TgZ(24,"div",26)(25,"button",27),m.NdJ("click",(function(){m.CHM(e);const t=m.oxw();return m.KtG(t.closePopover())})),m._UZ(26,"system-label",28),m.qZA()()()()}if(2&e){const e=m.oxw();m.Q6J("@animatepopover",void 0),m.xp6(7),m.Q6J("ngModel",e.filterValue),m.xp6(6),m.Q6J("ngModel",e.filterValue),m.xp6(6),m.Q6J("ngModel",e.filterValue)}}let z=(()=>{class ObjectListViewFilterPanelFilterMyItems{renderer;elementRef;language;modellist;onChange;onTouched;popover;showPopover=!1;_filterValue="all";clickListener=null;constructor(e,t,s,i){this.renderer=e,this.elementRef=t,this.language=s,this.modellist=i}onClick(){if(!this.showPopover)return this.showPopover=!0,void(this.clickListener=this.renderer.listen("document","click",(e=>this.onDocumentClick(e))))}get filterValue(){return this._filterValue}set filterValue(e){this._filterValue=e,this.onChange(e)}closePopover(){this.showPopover=!1,this.clickListener&&this.clickListener()}onDocumentClick(e){if(this.showPopover){this.elementRef.nativeElement.contains(e.target)||this.closePopover()}}getPopoverStyle(){let e=this.elementRef.nativeElement.getBoundingClientRect(),t=this.popover.element.nativeElement.getBoundingClientRect();return{position:"fixed",top:e.top+(e.height-t.height)/2+"px",left:e.left-t.width-15+"px"}}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}writeValue(e){this._filterValue=e||""}static ɵfac=function(e){return new(e||ObjectListViewFilterPanelFilterMyItems)(m.Y36(m.Qsj),m.Y36(m.SBq),m.Y36(g.d),m.Y36(y.t))};static ɵcmp=m.Xpm({type:ObjectListViewFilterPanelFilterMyItems,selectors:[["object-listview-filter-panel-filter-myitems"]],viewQuery:function(e,t){if(1&e&&m.Gf(P,7,m.s_b),2&e){let e;m.iGM(e=m.CRH())&&(t.popover=e.first)}},features:[m._Bn([{provide:l.JU,useExisting:(0,m.Gpc)((()=>ObjectListViewFilterPanelFilterMyItems)),multi:!0}])],decls:10,vars:3,consts:[[1,"slds-list--vertical","slds-list--vertical-space"],[1,"slds-item","slds-hint-parent",3,"click"],[1,"slds-filters__item","slds-grid","slds-grid--vertical-align-center"],["href","javascript:void(0);",1,"slds-grow","slds-has-blur-focus"],[1,"slds-text-body--small"],["label","LBL_DISPLAY"],[3,"ngStyle"],["popover",""],["class","slds-popover slds-nubbin--right","role","dialog",4,"ngIf"],["role","dialog",1,"slds-popover","slds-nubbin--right"],[1,"slds-popover__body"],[1,"slds-form-element"],[1,"slds-form-element__legend","slds-form-element__label"],[1,"slds-form-element__control"],[1,"slds-radio"],["type","radio","id","radioall","name","scope","value","all",3,"ngModel","ngModelChange"],["for","radioall",1,"slds-radio__label"],[1,"slds-radio--faux"],[1,"slds-form-element__label"],["label","LBL_ALL"],["type","radio","id","radioown","name","scope","value","own",3,"ngModel","ngModelChange"],["for","radioown",1,"slds-radio__label"],["label","LBL_OWN"],["type","radio","id","radiocre","name","scope","value","creator",3,"ngModel","ngModelChange"],["for","radiocre",1,"slds-radio__label"],["label","LBL_CREATOR"],[1,"slds-text-align--right","slds-p-top--x-small"],["type","button",1,"slds-button","slds-button--brand","slds-button-space-left",3,"click"],["label","LBL_OK"]],template:function(e,t){1&e&&(m.TgZ(0,"ol",0)(1,"li",1),m.NdJ("click",(function(){return t.onClick()})),m.TgZ(2,"div",2)(3,"a",3)(4,"p",4),m._UZ(5,"system-label",5),m._uU(6),m.qZA()()()(),m.TgZ(7,"div",6,7),m.YNc(9,H,27,4,"div",8),m.qZA()()),2&e&&(m.xp6(6),m.hij(": ",t.language.getLabel("LBL_"+t.filterValue.toUpperCase()),""),m.xp6(1),m.Q6J("ngStyle",t.getPopoverStyle()),m.xp6(2),m.Q6J("ngIf",t.showPopover))},dependencies:[i.O5,i.PC,l.Fj,l._,l.JJ,l.On,I._],encapsulation:2,data:{animation:[(0,f.X$)("animatepopover",[(0,f.eR)(":enter",[(0,f.oB)({opacity:0}),(0,f.jt)(".25s",(0,f.oB)({opacity:1}))]),(0,f.eR)(":leave",[(0,f.oB)({opacity:"1"}),(0,f.jt)(".25s",(0,f.oB)({opacity:0}))])])]}})}return ObjectListViewFilterPanelFilterMyItems})();var V=s(44044);function $(e,t){if(1&e){const e=m.EpF();m.TgZ(0,"ol",1)(1,"li",2),m.NdJ("click",(function(){m.CHM(e);const t=m.oxw();return m.KtG(t.onClick())})),m.TgZ(2,"div",3),m._UZ(3,"system-button-icon",4),m.TgZ(4,"p",5),m._uU(5),m.qZA()()()()}if(2&e){const e=m.oxw();m.xp6(5),m.hij(" ",e.geodata," ")}}let K=(()=>{class ObjectListViewFilterPanelFilterGeo{model;modal;language;metadata;geography={};geographyChange=new m.vpe;constructor(e,t,s,i){this.model=e,this.modal=t,this.language=s,this.metadata=i}get geoEnabled(){return!(!this.model||!this.model.module)&&this.metadata.getModuleDefs(this.model.module).ftsgeo}onClick(){this.modal.openModal("SpiceMapSelector").subscribe((e=>{this.hasGeogrpahy&&(e.instance.lat=this.geography.lat,e.instance.lng=this.geography.lng,e.instance._radius=this.geography.radius,e.instance.address=this.geography.address),e.instance.geoSearchemitter.subscribe((e=>{e?(this.geography.radius=e.radius,this.geography.lat=e.lat,this.geography.lng=e.lng,this.geography.address=e.address):this.geography={},this.geographyChange.emit(this.geography)}))}))}get hasGeogrpahy(){return!_.isEmpty(this.geography)}get geodata(){return this.hasGeogrpahy?this.geography.radius+"km around "+this.geography.address:"no geodata set"}static ɵfac=function(e){return new(e||ObjectListViewFilterPanelFilterGeo)(m.Y36(h.o),m.Y36(V.o),m.Y36(g.d),m.Y36(b.Pu))};static ɵcmp=m.Xpm({type:ObjectListViewFilterPanelFilterGeo,selectors:[["object-listview-filter-panel-filter-geo"]],inputs:{geography:"geography"},outputs:{geographyChange:"geographyChange"},decls:1,vars:1,consts:[["class","slds-list--vertical slds-list--vertical-space slds-p-vertical--x-small",4,"ngIf"],[1,"slds-list--vertical","slds-list--vertical-space","slds-p-vertical--x-small"],[1,"slds-item","slds-hint-parent","slds-text-link--reset",3,"click"],[1,"slds-filters__item","slds-grid"],["icon","world",1,"slds-p-right--x-small"],[1,"slds-text-body--small","slds-p-vertical--xxx-small"]],template:function(e,t){1&e&&m.YNc(0,$,6,1,"ol",0),2&e&&m.Q6J("ngIf",t.geoEnabled)},dependencies:[i.O5,w.J],encapsulation:2})}return ObjectListViewFilterPanelFilterGeo})();var X=s(37720),W=s(14505),ee=s(61230),te=s(47617);const se=["popover"];function ie(e,t){if(1&e&&(m.TgZ(0,"span"),m._UZ(1,"system-label",16),m._uU(2),m.qZA()),2&e){const e=m.oxw();m.xp6(2),m.hij(" ",e.interpretvalue(e.filterexpression.filtervalueto),"")}}function ne(e,t){if(1&e&&(m.TgZ(0,"option",30),m._UZ(1,"system-label",3),m.qZA()),2&e){const e=t.$implicit;m.Q6J("value",e.operator),m.xp6(1),m.Q6J("label",e.name)}}function le(e,t){if(1&e){const e=m.EpF();m.TgZ(0,"div",17)(1,"div",18)(2,"fieldset",19)(3,"system-filter-builder-expression-fields",20),m.NdJ("ngModelChange",(function(t){m.CHM(e);const s=m.oxw();return m.KtG(s.field=t)})),m.qZA(),m.TgZ(4,"div",5)(5,"label",21),m._UZ(6,"system-label",22),m.qZA(),m.TgZ(7,"div",6)(8,"div",23)(9,"select",24),m.NdJ("ngModelChange",(function(t){m.CHM(e);const s=m.oxw();return m.KtG(s.operator=t)})),m.YNc(10,ne,2,2,"option",25),m.qZA()()()(),m._UZ(11,"system-filter-builder-expression-values",26),m.qZA(),m.TgZ(12,"div",27)(13,"button",28),m.NdJ("click",(function(){m.CHM(e);const t=m.oxw();return m.KtG(t.closePopover())})),m._UZ(14,"system-label",29),m.qZA()()()()}if(2&e){const e=m.oxw();m.Q6J("@animatepopover",void 0),m.xp6(3),m.Q6J("module",e.module)("ngModel",e.field),m.xp6(6),m.Q6J("disabled",!e.filterexpression.field)("ngModel",e.operator),m.xp6(1),m.Q6J("ngForOf",e.operators[e.operatortype]),m.xp6(1),m.Q6J("operators",e.operators[e.operatortype])("operator",e.filterexpression.operator)("filterexpression",e.filterexpression)("module",e.module)("field",e.field)}}let oe=(()=>{class ObjectListViewFilterPanelFilterItem extends X.H{backend;language;metadata;elementRef;modellist;renderer;userpreferences;popover;showPopover=!1;clickListener=null;excludedFieldtypes=["link","relate","email"];deleteItem=new m.vpe;constructor(e,t,s,i,n,l,o){super(e,t,s),this.backend=e,this.language=t,this.metadata=s,this.elementRef=i,this.modellist=n,this.renderer=l,this.userpreferences=o,this.module=this.modellist.module}get operatorLabel(){return this.operator?this.operators[this.operatortype].find((e=>e.operator==this.operator)).name:""}ngAfterViewInit(){this.field&&""!=this.field||this.openPopover()}ngOnDestroy(){this.clickListener&&this.clickListener()}onClick(){this.openPopover()}openPopover(){this.showPopover||(this.showPopover=!0)}onFocus(e){window.setTimeout((()=>{e.target.blur()}),250)}closePopover(){this.showPopover=!1}onDocumentClick(e){this.showPopover&&(this.elementRef.nativeElement.contains(e.target)||(this.showPopover=!1,this.clickListener()))}getPopoverStyle(){let e=this.elementRef.nativeElement.getBoundingClientRect(),t=this.popover.element.nativeElement.getBoundingClientRect();return{position:"fixed",top:e.top+(e.height-t.height)/2+"px",left:e.left-t.width-15+"px"}}getDisplayName(){return this.field?this.language.getFieldDisplayName(this.modellist.module,this.field):this.language.getLabel("LBL_NEW_FILTER")}deleteFilter(){this.deleteItem.emit(!0)}interpretvalue(e){try{switch(this.operators[this.operatortype].find((e=>e.operator==this.operator)).value1){case"date":return this.userpreferences.formatDate(e);case"integer":return this.userpreferences.formatMoney(parseInt(e,10));case"enum":return this.language.getFieldDisplayOptionValue(this.module,this.field,e);case"relate":if(!e)return"";let t=e.split("::");return t.length<2?e:t[1];case"multienum":let s=[],i=_.isArray(e)?e:e.split(",");for(let e of i)s.push(this.language.getFieldDisplayOptionValue(this.module,this.field,e));return s.join(", ");default:return e}}catch(t){return e}}static ɵfac=function(e){return new(e||ObjectListViewFilterPanelFilterItem)(m.Y36(W.y),m.Y36(g.d),m.Y36(b.Pu),m.Y36(m.SBq),m.Y36(y.t),m.Y36(m.Qsj),m.Y36(L.z))};static ɵcmp=m.Xpm({type:ObjectListViewFilterPanelFilterItem,selectors:[["object-listview-filter-panel-filter-item"]],viewQuery:function(e,t){if(1&e&&m.Gf(se,7,m.s_b),2&e){let e;m.iGM(e=m.CRH())&&(t.popover=e.first)}},outputs:{deleteItem:"deleteItem"},features:[m.qOj],decls:18,vars:7,consts:[[1,"slds-filters__item","slds-m-vertical--xx-small","slds-grid","slds-grid--vertical-align-center"],["href","javascript:void(0);",1,"slds-grow","slds-has-blur-focus",3,"click","focus"],[1,"slds-text-body--small"],[3,"label"],[4,"ngIf"],[1,"slds-form-element"],[1,"slds-form-element__control"],[1,"slds-checkbox"],["type","checkbox","name","options","checked",""],[1,"slds-button","slds-button--icon","slds-button--icon-small",3,"click"],[3,"icon"],[1,"slds-assistive-text"],["label","LBL_REMOVE"],[3,"ngStyle"],["popover",""],["class","slds-popover slds-nubbin--right","role","dialog",4,"ngIf"],["label","LBL_AND"],["role","dialog",1,"slds-popover","slds-nubbin--right"],[1,"slds-popover__body"],[1,"slds-form--stacked"],[3,"module","ngModel","ngModelChange"],[1,"slds-form-element__label"],["label","LBL_OPERATOR"],[1,"slds-select_container"],[1,"slds-select",3,"disabled","ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[3,"operators","operator","filterexpression","module","field"],[1,"slds-text-align--right","slds-p-top--x-small","slds-has-divider--top"],["type","button",1,"slds-button","slds-button--brand","slds-button-space-left",3,"click"],["label","LBL_OK"],[3,"value"]],template:function(e,t){1&e&&(m.TgZ(0,"div",0)(1,"a",1),m.NdJ("click",(function(){return t.onClick()}))("focus",(function(e){return t.onFocus(e)})),m.TgZ(2,"p",2),m._uU(3),m._UZ(4,"system-label",3),m._uU(5),m.YNc(6,ie,3,1,"span",4),m.qZA()(),m.TgZ(7,"div",5)(8,"div",6)(9,"span",7),m._UZ(10,"input",8),m.qZA()()(),m.TgZ(11,"button",9),m.NdJ("click",(function(){return t.deleteFilter()})),m._UZ(12,"system-button-icon",10),m.TgZ(13,"span",11),m._UZ(14,"system-label",12),m.qZA()()(),m.TgZ(15,"div",13,14),m.YNc(17,le,15,11,"div",15),m.qZA()),2&e&&(m.xp6(3),m.hij("",t.getDisplayName()," "),m.xp6(1),m.Q6J("label",t.operatorLabel),m.xp6(1),m.hij(" ",t.interpretvalue(t.filterexpression.filtervalue)," "),m.xp6(1),m.Q6J("ngIf",t.filterexpression.filtervalueto),m.xp6(6),m.Q6J("icon","close"),m.xp6(3),m.Q6J("ngStyle",t.getPopoverStyle()),m.xp6(2),m.Q6J("ngIf",t.showPopover))},dependencies:[i.sg,i.O5,i.PC,l.YN,l.Kr,l.EJ,l.JJ,l.On,w.J,ee.Y,te.w,I._],encapsulation:2,data:{animation:[(0,f.X$)("animatepopover",[(0,f.eR)(":enter",[(0,f.oB)({opacity:0}),(0,f.jt)(".25s",(0,f.oB)({opacity:1}))]),(0,f.eR)(":leave",[(0,f.oB)({opacity:"1"}),(0,f.jt)(".25s",(0,f.oB)({opacity:0}))])])]}})}return ObjectListViewFilterPanelFilterItem})();function ae(e,t){if(1&e){const e=m.EpF();m.TgZ(0,"object-listview-filter-panel-filter-item",26),m.NdJ("deleteItem",(function(){const t=m.CHM(e).index,s=m.oxw(2);return m.KtG(s.deleteItem(t))})),m.qZA()}if(2&e){const e=t.$implicit;m.Q6J("filterexpression",e)}}function de(e,t){if(1&e){const e=m.EpF();m.TgZ(0,"div",27)(1,"a",28),m.NdJ("click",(function(t){m.CHM(e);const s=m.oxw(2);return m.KtG(s.addExpression(t))})),m._UZ(2,"system-label",29),m.qZA(),m.TgZ(3,"a",30),m.NdJ("click",(function(){m.CHM(e);const t=m.oxw(2);return m.KtG(t.removeAllFilters())})),m._UZ(4,"system-label",31),m.qZA()()}}function re(e,t){if(1&e&&(m.ynx(0),m.TgZ(1,"div",23),m.YNc(2,ae,1,1,"object-listview-filter-panel-filter-item",24),m.qZA(),m.YNc(3,de,5,0,"div",25),m.BQk()),2&e){const e=m.oxw();m.xp6(2),m.Q6J("ngForOf",e.filter.conditions),m.xp6(1),m.Q6J("ngIf",e.canEdit)}}function ce(e,t){if(1&e){const e=m.EpF();m.TgZ(0,"div",33)(1,"a",28),m.NdJ("click",(function(t){m.CHM(e);const s=m.oxw(2);return m.KtG(s.addExpression(t))})),m._UZ(2,"system-label",29),m.qZA()()}}function ue(e,t){if(1&e&&m.YNc(0,ce,3,0,"div",32),2&e){const e=m.oxw();m.Q6J("ngIf",e.canEdit)}}const me=function(e){return{"slds-hidden":e}};let ge=(()=>{class ObjectListViewFilterPanel{elementRef;language;metadata;modellist;model;renderer;filter={logicaloperator:"and",groupscope:"all",geography:{},conditions:[]};subcriptions=new B.w0;constructor(e,t,s,i,n,l){this.elementRef=e,this.language=t,this.metadata=s,this.modellist=i,this.model=n,this.renderer=l,this.subcriptions.add(this.modellist.listType$.subscribe((e=>{this.setFilter()})))}ngOnDestroy(){this.subcriptions.unsubscribe()}setFilter(){this.filter={...this.modellist.getFilterDefs()},this.filter&&!_.isEmpty(this.filter)||(this.filter={logicaloperator:"and",groupscope:"all",geography:{},conditions:[]})}get geography(){return this.filter.geography?this.filter.geography:{}}set geography(e){this.filter.geography=e}get isChanged(){return!_.isEqual(this.filter,this.modellist.getFilterDefs())}get canEdit(){return this.modellist.checkAccess("edit")}save(){this.isChanged&&(this.modellist.updateListType({filterdefs:JSON.stringify(this.filter)}).subscribe((()=>{this.modellist.reLoadList()})),this.modellist.displayFilters=!1)}cancel(){this.filter={...this.modellist.getFilterDefs()},this.modellist.displayFilters=!1}removeAllFilters(){this.filter.conditions=[]}addExpression(e){e.preventDefault(),e.stopPropagation();this.filter.conditions.push({field:"",operator:"",filtervalue:""})}deleteItem(e){this.filter.conditions.splice(e,1)}static ɵfac=function(e){return new(e||ObjectListViewFilterPanel)(m.Y36(m.SBq),m.Y36(g.d),m.Y36(b.Pu),m.Y36(y.t),m.Y36(h.o),m.Y36(m.Qsj))};static ɵcmp=m.Xpm({type:ObjectListViewFilterPanel,selectors:[["object-listview-filter-panel"]],hostAttrs:[1,"slds-is-fixed"],decls:24,vars:11,consts:[["system-to-bottom","",1,"slds-panel","slds-size--medium","slds-grid","slds-grid--vertical","slds-nowrap","slds-panel--filters","slds-size_medium"],[1,"slds-form--stacked","slds-grow","slds-scrollable--y","slds-grid","slds-grid--vertical"],[1,"slds-filters"],[1,"slds-filters__header","slds-grid","slds-grid--align-spread","slds-has-divider--bottom-space"],[1,"slds-align-middle","slds-text-heading--small"],["label","LBL_FILTER"],[1,"slds-button-group",3,"ngClass"],[1,"slds-button","slds-button--icon","slds-button_icon-border-filled",3,"click"],["icon","close"],[1,"slds-button","slds-button--icon","slds-button_icon-border-filled","slds-is-selected",3,"click"],["icon","check"],[1,"slds-p-around--xx-small"],[3,"ngModel","ngModelChange"],[3,"geography","geographyChange"],[1,"slds-grid","slds-p-around--xx-small"],[1,"slds-form-element__label"],["label","LBL_MATCHING"],["name","operator","value","and",3,"disabled","ngModel","ngModelChange"],["label","LBL_ALL"],["name","operator","value","or",3,"disabled","ngModel","ngModelChange"],["label","LBL_ANY"],[4,"ngIf","ngIfElse"],["nofilter",""],[1,"slds-grid_vertical"],[3,"filterexpression","deleteItem",4,"ngFor","ngForOf"],["class","slds-filters__footer slds-grid slds-shrink-none",4,"ngIf"],[3,"filterexpression","deleteItem"],[1,"slds-filters__footer","slds-grid","slds-shrink-none"],["href","javascript:void(0);",3,"click"],["label","LBL_ADDFILTER"],["href","javascript:void(0);",1,"slds-col--bump-left",3,"click"],["label","LBL_REMOVEALL"],["class","slds-p-around--small slds-align--absolute-center",4,"ngIf"],[1,"slds-p-around--small","slds-align--absolute-center"]],template:function(e,t){if(1&e&&(m.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h4",4),m._UZ(5,"system-label",5),m.qZA(),m.TgZ(6,"div",6)(7,"button",7),m.NdJ("click",(function(){return t.cancel()})),m._UZ(8,"system-button-icon",8),m.qZA(),m.TgZ(9,"button",9),m.NdJ("click",(function(){return t.save()})),m._UZ(10,"system-button-icon",10),m.qZA()()(),m.TgZ(11,"div",11)(12,"object-listview-filter-panel-filter-myitems",12),m.NdJ("ngModelChange",(function(e){return t.filter.groupscope=e})),m.qZA(),m.TgZ(13,"object-listview-filter-panel-filter-geo",13),m.NdJ("geographyChange",(function(e){return t.geography=e})),m.qZA(),m.TgZ(14,"div",14)(15,"label",15),m._UZ(16,"system-label",16),m.qZA(),m.TgZ(17,"system-input-radio",17),m.NdJ("ngModelChange",(function(e){return t.filter.logicaloperator=e})),m._UZ(18,"system-label",18),m.qZA(),m.TgZ(19,"system-input-radio",19),m.NdJ("ngModelChange",(function(e){return t.filter.logicaloperator=e})),m._UZ(20,"system-label",20),m.qZA()(),m.YNc(21,re,4,2,"ng-container",21),m.YNc(22,ue,1,1,"ng-template",null,22,m.W1O),m.qZA()()()()),2&e){const e=m.MAs(23);m.xp6(6),m.Q6J("ngClass",m.VKq(9,me,!t.isChanged)),m.xp6(6),m.Q6J("ngModel",t.filter.groupscope),m.xp6(1),m.Q6J("geography",t.geography),m.xp6(4),m.Q6J("disabled",!t.canEdit)("ngModel",t.filter.logicaloperator),m.xp6(2),m.Q6J("disabled",!t.canEdit)("ngModel",t.filter.logicaloperator),m.xp6(2),m.Q6J("ngIf",t.filter.conditions.length>0)("ngIfElse",e)}},dependencies:[i.mk,i.sg,i.O5,l.JJ,l.On,w.J,G.A,I._,q.H,z,K,oe],encapsulation:2})}return ObjectListViewFilterPanel})();var he=s(13278);let pe=(()=>{class ObjectListViewSettings{language;elementRef;modal;modellist;renderer;injector;toast;constructor(e,t,s,i,n,l,o){this.language=e,this.elementRef=t,this.modal=s,this.modellist=i,this.renderer=n,this.injector=l,this.toast=o}add(){this.modal.openModal("ObjectListViewSettingsAddlistModal",!0,this.injector).subscribe((e=>{e.instance.modalmode="add"}))}edit(){if(!this.modellist.checkAccess("edit"))return!1;this.modal.openModal("ObjectListViewSettingsAddlistModal",!0,this.injector).subscribe((e=>{e.instance.modalmode="edit"}))}save(){this.modellist.updateListType().subscribe((e=>{this.toast.sendToast("List Saved")}))}setfields(){if(!this.modellist.checkAccess("edit"))return!1;this.modal.openModal("ObjectListViewSettingsSetfieldsModal",!0,this.injector)}delete(){if(!this.modellist.checkAccess("delete"))return!1;this.modal.prompt("confirm",this.language.getLabel("MSG_DELETE_RECORD",void 0,"long"),this.language.getLabel("MSG_DELETE_RECORD")).subscribe((e=>{e&&this.modellist.deleteListType()}))}static ɵfac=function(e){return new(e||ObjectListViewSettings)(m.Y36(g.d),m.Y36(m.SBq),m.Y36(V.o),m.Y36(y.t),m.Y36(m.Qsj),m.Y36(m.zs3),m.Y36(he.A))};static ɵcmp=m.Xpm({type:ObjectListViewSettings,selectors:[["object-listview-settings"]],decls:29,vars:4,consts:[[1,"slds-dropdown-trigger","slds-dropdown-trigger--click","slds-m-horizontal--xxx-small",3,"system-dropdown-trigger-simple"],["system-title","LBL_SETTING",1,"slds-button","slds-button--icon","slds-button--icon-border","slds-button--neutral"],["icon","settings"],["icon","down","size","x-small"],[1,"slds-dropdown","slds-dropdown--right"],["role","menu",1,"slds-dropdown__list"],["role","separator",1,"slds-dropdown__header"],[1,"slds-text-title--caps"],["label","LBL_SETTINGS"],["role","presentation",1,"slds-dropdown__item"],["role","menuitem",3,"click"],[1,"slds-truncate"],["icon","add","size","x-small",1,"slds-p-right--xx-small"],["label","LBL_NEW"],["icon","edit","size","x-small",1,"slds-p-right--xx-small"],["label","LBL_EDIT"],["icon","save","size","x-small",1,"slds-p-right--xx-small"],["label","LBL_SAVE"],["icon","delete","size","x-small",1,"slds-p-right--xx-small"],["label","LBL_DELETE"]],template:function(e,t){1&e&&(m.TgZ(0,"div",0)(1,"button",1),m._UZ(2,"system-button-icon",2)(3,"system-button-icon",3),m.qZA(),m.TgZ(4,"div",4)(5,"ul",5)(6,"li",6)(7,"span",7),m._UZ(8,"system-label",8),m.qZA()(),m.TgZ(9,"li",9)(10,"a",10),m.NdJ("click",(function(){return t.add()})),m.TgZ(11,"span",11),m._UZ(12,"system-utility-icon",12)(13,"system-label",13),m.qZA()()(),m.TgZ(14,"li",9)(15,"a",10),m.NdJ("click",(function(){return t.edit()})),m.TgZ(16,"span",11),m._UZ(17,"system-utility-icon",14)(18,"system-label",15),m.qZA()()(),m.TgZ(19,"li",9)(20,"a",10),m.NdJ("click",(function(){return t.save()})),m.TgZ(21,"span",11),m._UZ(22,"system-utility-icon",16)(23,"system-label",17),m.qZA()()(),m.TgZ(24,"li",9)(25,"a",10),m.NdJ("click",(function(){return t.delete()})),m.TgZ(26,"span",11),m._UZ(27,"system-utility-icon",18)(28,"system-label",19),m.qZA()()()()()()),2&e&&(m.Q6J("system-dropdown-trigger-simple",t.modellist.isLoading),m.xp6(15),m.uIk("aria-disabled",!t.modellist.checkAccess("edit")),m.xp6(5),m.uIk("aria-disabled",!t.modellist.checkAccess("edit")),m.xp6(5),m.uIk("aria-disabled",!t.modellist.checkAccess("delete")))},dependencies:[w.J,I._,S.r,M.w,C.S],encapsulation:2})}return ObjectListViewSettings})();function fe(e,t){1&e&&m._UZ(0,"object-listview-filter-panel"),2&e&&m.Q6J("@animatepanel",void 0)}function be(e,t){1&e&&m._UZ(0,"object-listview-aggregates-panel"),2&e&&m.Q6J("@animatepanel",void 0)}let _e=(()=>{class ObjectListViewHeader{metadata;configuration;modellist;layout;language;model;actionSet={};constructor(e,t,s,i,n,l){this.metadata=e,this.configuration=t,this.modellist=s,this.layout=i,this.language=n,this.model=l;let o=this.metadata.getComponentConfig("ObjectListViewHeader",this.model.module);this.actionSet=o.actionset}set searchTerm(e){e!=this.modellist.searchTerm&&(this.modellist.searchTerm=e,this.reloadList())}get searchTerm(){return this.modellist.searchTerm}clearSearchTerm(){this.searchTerm=""}reloadList(){this.modellist.getListData()}static ɵfac=function(e){return new(e||ObjectListViewHeader)(m.Y36(b.Pu),m.Y36(v.C),m.Y36(y.t),m.Y36(x.b),m.Y36(g.d),m.Y36(h.o))};static ɵcmp=m.Xpm({type:ObjectListViewHeader,selectors:[["object-listview-header"]],decls:19,vars:9,consts:[["role","banner",1,"slds-page-header","slds-page-header--object-home"],[1,"slds-grid","slds-grid--align-spread","slds-p-bottom--xx-small","slds-wrap"],[1,"slds-grid","slds-grid--vertical-align-center","slds-grow"],[1,"slds-grid","slds-grid--vertical-align-center","slds-no-space"],[3,"module"],[1,"slds-grow",3,"ngModel","placeholder","ngModelChange","onSearchTermClear","onEnterPress"],[1,"slds-grid","slds-grid--vertical-align-center","slds-grow","slds-grid--align-end","slds-p-left--small"],[1,"slds-col","slds-no-flex","slds-grid","slds-align-bottom","slds-p-left--small"],[1,"slds-show--medium"],["system-title","LBL_RELOAD",1,"slds-button","slds-button--neutral","slds-button--icon-border","slds-m-horizontal--xxx-small",3,"click"],[3,"icon"],[1,"slds-m-left--xx-small",3,"actionset"],[4,"ngIf"]],template:function(e,t){1&e&&(m.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),m._UZ(4,"system-icon",4)(5,"object-list-types"),m.qZA(),m.TgZ(6,"system-input-search-term",5),m.NdJ("ngModelChange",(function(e){return t.searchTerm=e}))("onSearchTermClear",(function(){return t.clearSearchTerm()}))("onEnterPress",(function(){return t.reloadList()})),m.qZA()(),m.TgZ(7,"div",6),m._UZ(8,"object-listview-header-details"),m.TgZ(9,"div",7),m._UZ(10,"object-listview-settings",8)(11,"object-listview-header-list-selector"),m.TgZ(12,"button",9),m.NdJ("click",(function(){return t.modellist.reLoadList()})),m._UZ(13,"system-button-icon",10),m.qZA(),m._UZ(14,"object-listview-aggregates-button",8)(15,"object-listview-filter-button",8),m.qZA(),m._UZ(16,"object-action-container",11),m.qZA()()(),m.YNc(17,fe,1,1,"object-listview-filter-panel",12),m.YNc(18,be,1,1,"object-listview-aggregates-panel",12)),2&e&&(m.xp6(4),m.Q6J("module",t.model.module),m.xp6(2),m.Q6J("ngModel",t.searchTerm)("placeholder",t.language.getModuleCombinedLabel("LBL_SEARCH",t.model.module)),m.xp6(1),m.ekj("slds-m-top--x-small","small"==t.layout.screenwidth),m.xp6(6),m.Q6J("icon",t.modellist.isLoading?"close":"refresh"),m.xp6(3),m.Q6J("actionset",t.actionSet),m.xp6(1),m.Q6J("ngIf",t.modellist.displayFilters),m.xp6(1),m.Q6J("ngIf",t.modellist.displayAggregates))},dependencies:[i.O5,l.JJ,l.On,w.J,Z.f,T.g,C.S,k.l,A.M,O,N.S,F.X,R,j,ge,pe],encapsulation:2,data:{animation:[(0,f.X$)("animatepanel",[(0,f.eR)(":enter",[(0,f.oB)({right:"-320px",overflow:"hidden"}),(0,f.jt)(".5s",(0,f.oB)({right:"0px"})),(0,f.oB)({overflow:"unset"})]),(0,f.eR)(":leave",[(0,f.oB)({overflow:"hidden"}),(0,f.jt)(".5s",(0,f.oB)({right:"-320px"}))])])]}})}return ObjectListViewHeader})();var ve=s(87228),ye=s(33369),xe=s(82032),we=s(17017);const Ze=["container"];let Te=(()=>{class ObjectListViewContainer{metadata;broadcast;navigation;navigationtab;language;container;moduleName="";initialized=!1;componentRefs=[];componentSubscriptions=new B.w0;constructor(e,t,s,i,n){this.metadata=e,this.broadcast=t,this.navigation=s,this.navigationtab=i,this.language=n,this.componentSubscriptions.add(this.navigationtab.activeRoute$.subscribe((e=>{this.moduleName=e.params.module,this.moduleName||(this.moduleName=e.path.split("/").pop(),this.navigationtab.activeRoute.params.module=this.moduleName),this.navigationtab.setTabInfo({displaymodule:this.moduleName,displayname:this.metadata.getModuleDefs(this.moduleName).module_label}),this.initialized&&this.buildContainer()}))),this.componentSubscriptions.add(this.broadcast.message$.subscribe((e=>{this.handleMessage(e)})))}ngAfterViewInit(){this.initialized=!0,this.buildContainer()}ngOnDestroy(){for(let e of this.componentRefs)e.destroy();this.componentSubscriptions.unsubscribe()}buildContainer(){for(let e of this.componentRefs)e.destroy();this.componentRefs=[];let e=this.metadata.getComponentConfig("ObjectListViewContainer",this.moduleName);for(let t of this.metadata.getComponentSetObjects(e.componentset))this.metadata.addComponent(t.component,this.container).subscribe((e=>{t.componentconfig&&Object.keys(t.componentconfig).length>0?e.instance.componentconfig=t.componentconfig:e.instance.componentconfig=this.metadata.getComponentConfig(t.component,this.moduleName),this.componentRefs.push(e)}))}handleMessage(e){if("applauncher.setrole"===e.messagetype)this.buildContainer()}static ɵfac=function(e){return new(e||ObjectListViewContainer)(m.Y36(b.Pu),m.Y36(ye.f),m.Y36(xe.G),m.Y36(we.d),m.Y36(g.d))};static ɵcmp=m.Xpm({type:ObjectListViewContainer,selectors:[["object-listview-container"]],viewQuery:function(e,t){if(1&e&&m.Gf(Ze,7,m.s_b),2&e){let e;m.iGM(e=m.CRH())&&(t.container=e.first)}},decls:2,vars:0,consts:[["container",""]],template:function(e,t){1&e&&m._UZ(0,"div",null,0)},encapsulation:2})}return ObjectListViewContainer})();var Ce=s(73194);const ke=["container"];let Ae=(()=>{class ObjectListView{navigation;navigationtab;activatedRoute;metadata;modellist;model;userpreferences;container;componentRefs=[];viewInitialized=!1;modellistSubscription=new B.w0;constructor(e,t,s,i,n,l,o){this.navigation=e,this.navigationtab=t,this.activatedRoute=s,this.metadata=i,this.modellist=n,this.model=l,this.userpreferences=o,this.initialize()}initialize(){this.model.module=this.navigationtab.activeRoute.params.module,this.modellist.initialize(this.model.module),this.modellistSubscription=this.modellist.listTypeComponent$.subscribe((()=>this.handleListTypeChange()))}handleListTypeChange(){this.viewInitialized&&this.buildContainer()}ngAfterViewInit(){this.viewInitialized=!0,this.buildContainer()}ngOnDestroy(){this.modellistSubscription.unsubscribe()}buildContainer(){if(this.modellist.currentList?.listcomponent){for(let e of this.componentRefs)e.destroy();this.metadata.addComponent(this.modellist.currentList?.listcomponent,this.container).subscribe((e=>{this.componentRefs.push(e)}))}}static ɵfac=function(e){return new(e||ObjectListView)(m.Y36(xe.G),m.Y36(we.d),m.Y36(o.gz),m.Y36(b.Pu),m.Y36(y.t),m.Y36(h.o),m.Y36(L.z))};static ɵcmp=m.Xpm({type:ObjectListView,selectors:[["object-listview"]],viewQuery:function(e,t){if(1&e&&m.Gf(ke,7,m.s_b),2&e){let e;m.iGM(e=m.CRH())&&(t.container=e.first)}},features:[m._Bn([y.t,h.o])],decls:4,vars:0,consts:[["system-to-bottom-noscroll",""],["container",""]],template:function(e,t){1&e&&(m._UZ(0,"object-listview-header"),m.TgZ(1,"div",0),m._UZ(2,"div",null,1),m.qZA())},dependencies:[Ce.t,_e],encapsulation:2})}return ObjectListView})();var Le=s(92667),Ie=s(16059),Se=s(201),Me=s(81802);let Je=(()=>{class ObjectListHeaderActionsAssignButton{language;metadata;model;modellist;modal;injector;actionconfig={};hidden=!1;constructor(e,t,s,i,n,l){this.language=e,this.metadata=t,this.model=s,this.modellist=i,this.modal=n,this.injector=l}get disabled(){return!this.metadata.checkModuleAcl(this.model.module,"edit")||this.modellist.getSelectedCount()<1||this.modellist.getSelectedCount()>this.maxAllowed}get selectedCount(){return this.modellist.getSelectedCount()}get maxAllowed(){return this.actionconfig.maxAllowed?parseInt(this.actionconfig.maxAllowed,10):50}execute(){if(!this.disabled){this.modellist.getSelectedItems().filter((e=>!e.acl?.edit)).length>0?this.modal.info(this.language.getLabel("MSG_NO_EDIT_RIGHTS",null,"long"),this.language.getLabel("MSG_NO_EDIT_RIGHTS")):this.modal.openModal("ObjectListHeaderActionsAssignModal",!0,this.injector)}}static ɵfac=function(e){return new(e||ObjectListHeaderActionsAssignButton)(m.Y36(g.d),m.Y36(b.Pu),m.Y36(h.o),m.Y36(y.t),m.Y36(V.o),m.Y36(m.zs3))};static ɵcmp=m.Xpm({type:ObjectListHeaderActionsAssignButton,selectors:[["object-list-header-actions-assign-button"]],decls:3,vars:1,consts:[["label","LBL_ASSIGN"]],template:function(e,t){1&e&&(m.TgZ(0,"span"),m._UZ(1,"system-label",0),m._uU(2),m.qZA()),2&e&&(m.xp6(2),m.hij(" (",t.selectedCount,")"))},dependencies:[I._],encapsulation:2})}return ObjectListHeaderActionsAssignButton})();var Oe=s(32294),Ne=s(33634),Fe=s(59621),qe=s(83499),Ee=s(75767),Ye=s(1916);let De=(()=>{class ObjectListHeaderActionsAssignModal{view;broadcast;backend;toast;modal;model;modellist;self={};submitting=!1;constructor(e,t,s,i,n,l,o){this.view=e,this.broadcast=t,this.backend=s,this.toast=i,this.modal=n,this.model=l,this.modellist=o}ngOnInit(){this.model.module=this.modellist.module,this.model.initialize(),this.view.isEditable=!0,this.view.setEditMode()}close(){this.self.destroy()}get canSubmit(){return!this.submitting&&this.model.getField("assigned_user_id")}reassign(){this.submitting=!0;let e=this.modellist.getSelectedIDs(),t={assigned_user_id:this.model.getField("assigned_user_id"),ids:e},s=this.modal.await("updating");this.backend.postRequest(`module/${this.model.module}/massupdate/assign`,{},t).subscribe((e=>{if(e.success){for(let t of e.data)this.broadcast.broadcastMessage("model.save",{id:t.id,module:this.model.module,data:t});this.close()}else this.toast.sendToast("ERROR reassigning records","error"),this.submitting=!1;s.emit(!0)}),(e=>{this.toast.sendToast("ERROR reassigning records","error"),this.submitting=!1,s.emit(!0)}))}static ɵfac=function(e){return new(e||ObjectListHeaderActionsAssignModal)(m.Y36(Oe.e),m.Y36(ye.f),m.Y36(W.y),m.Y36(he.A),m.Y36(V.o),m.Y36(h.o),m.Y36(y.t))};static ɵcmp=m.Xpm({type:ObjectListHeaderActionsAssignModal,selectors:[["object-list-header-actions-assign-modal"]],features:[m._Bn([h.o,Oe.e])],decls:10,vars:1,consts:[["size","small"],[3,"close"],["label","LBL_ASSIGN"],["system-modal-overvlow-visible","",2,"overflow","visible"],["field","assigned_user_name"],[1,"slds-button","slds-button--neutral",3,"click"],["label","LBL_CANCEL"],[1,"slds-button","slds-button--brand",3,"disabled","click"]],template:function(e,t){1&e&&(m.TgZ(0,"system-modal",0)(1,"system-modal-header",1),m.NdJ("close",(function(){return t.close()})),m._UZ(2,"system-label",2),m.qZA(),m.TgZ(3,"system-modal-content",3),m._UZ(4,"field-container",4),m.qZA(),m.TgZ(5,"system-modal-footer")(6,"button",5),m.NdJ("click",(function(){return t.close()})),m._UZ(7,"system-label",6),m.qZA(),m.TgZ(8,"button",7),m.NdJ("click",(function(){return t.reassign()})),m._UZ(9,"system-label",2),m.qZA()()()),2&e&&(m.xp6(8),m.Q6J("disabled",!t.canSubmit))},dependencies:[Ne.j,I._,Fe.j,qe.x,Ee.p,Ye.y],encapsulation:2})}return ObjectListHeaderActionsAssignModal})(),Ue=(()=>{class ObjectListHeaderActionsDeleteButton{language;metadata;model;modellist;modal;backend;broadcast;toast;actionconfig={};hidden=!0;constructor(e,t,s,i,n,l,o,a){this.language=e,this.metadata=t,this.model=s,this.modellist=i,this.modal=n,this.backend=l,this.broadcast=o,this.toast=a,this.metadata.checkModuleAcl(this.model.module,"delete")&&(this.hidden=!1)}get disabled(){return!this.metadata.checkModuleAcl(this.model.module,"delete")||this.modellist.getSelectedCount()<1||this.modellist.getSelectedCount()>this.maxAllowed}get selectedCount(){return this.modellist.getSelectedCount()}get maxAllowed(){return this.actionconfig.maxAllowed?parseInt(this.actionconfig.maxAllowed,10):100}execute(){if(!this.disabled){this.modellist.getSelectedItems().filter((e=>!e.acl?.delete)).length>0?this.modal.info(this.language.getLabel("MSG_NO_EDIT_RIGHTS",null,"long"),this.language.getLabel("MSG_NO_EDIT_RIGHTS")):this.modal.confirm(this.language.getLabelFormatted("MSG_DELETE_RECORDS",[this.modellist.getSelectedCount()],"long"),this.language.getLabel("MSG_DELETE_RECORDS")).subscribe((e=>{if(e){let e=this.modal.await("... processing ..."),t={ids:this.modellist.getSelectedIDs(),action:"DELETE"};this.backend.patchRequest(`module/${this.model.module}`,{},t).subscribe((t=>{for(let e of this.modellist.getSelectedIDs())this.broadcast.broadcastMessage("model.delete",{id:e,module:this.model.module});e.emit(!0)}),(()=>{this.toast.sendToast("ERROR deleting records","error"),e.emit(!0)}))}}))}}static ɵfac=function(e){return new(e||ObjectListHeaderActionsDeleteButton)(m.Y36(g.d),m.Y36(b.Pu),m.Y36(h.o),m.Y36(y.t),m.Y36(V.o),m.Y36(W.y),m.Y36(ye.f),m.Y36(he.A))};static ɵcmp=m.Xpm({type:ObjectListHeaderActionsDeleteButton,selectors:[["object-list-header-actions-delete-button"]],decls:3,vars:1,consts:[["label","LBL_DELETE"]],template:function(e,t){1&e&&(m.TgZ(0,"span"),m._UZ(1,"system-label",0),m._uU(2),m.qZA()),2&e&&(m.xp6(2),m.hij(" (",t.selectedCount,")"))},dependencies:[I._],encapsulation:2})}return ObjectListHeaderActionsDeleteButton})(),Qe=(()=>{class ObjectListHeaderActionsMergeButton{language;metadata;model;modellist;modal;injector;actionconfig={};hidden=!1;constructor(e,t,s,i,n,l){this.language=e,this.metadata=t,this.model=s,this.modellist=i,this.modal=n,this.injector=l}get disabled(){return!this.metadata.checkModuleAcl(this.model.module,"delete")||this.modellist.getSelectedCount()<1||this.modellist.getSelectedCount()>this.maxAllowed}get maxAllowed(){return this.actionconfig.maxAllowed?parseInt(this.actionconfig.maxAllowed,10):3}get mergeCount(){return this.modellist.getSelectedCount()}execute(){if(!this.disabled){this.modellist.getSelectedItems().filter((e=>e.acl?.delete)).length<this.modellist.getSelectedCount()-1?this.modal.info(this.language.getLabel("MSG_NO_MERGE_DELETE",null,"long"),this.language.getLabel("MSG_NO_MERGE_DELETE")):this.modal.openModal("ObjectMergeModal",!0,this.injector).subscribe((e=>{e.instance.mergemodels=this.modellist.getSelectedItems()}))}}static ɵfac=function(e){return new(e||ObjectListHeaderActionsMergeButton)(m.Y36(g.d),m.Y36(b.Pu),m.Y36(h.o),m.Y36(y.t),m.Y36(V.o),m.Y36(m.zs3))};static ɵcmp=m.Xpm({type:ObjectListHeaderActionsMergeButton,selectors:[["object-list-header-actions-merge-button"]],decls:3,vars:1,consts:[["label","LBL_MERGE"]],template:function(e,t){1&e&&(m.TgZ(0,"span"),m._UZ(1,"system-label",0),m._uU(2),m.qZA()),2&e&&(m.xp6(2),m.hij(" (",t.mergeCount,")"))},dependencies:[I._],encapsulation:2})}return ObjectListHeaderActionsMergeButton})(),Re=(()=>{class ObjectListHeaderActionsExportCSVButton{language;metadata;model;modellist;modal;injector;hidden=!1;constructor(e,t,s,i,n,l){this.language=e,this.metadata=t,this.model=s,this.modellist=i,this.modal=n,this.injector=l}get disabled(){return!this.metadata.checkModuleAcl(this.model.module,"export")||0==this.modellist.getSelectedCount()}get exportcount(){let e=this.modellist.getSelectedCount();return e||this.modellist.listData.totalcount}execute(){this.disabled||this.modal.openModal("ObjectListHeaderActionsExportCSVSelectFields",!0,this.injector)}static ɵfac=function(e){return new(e||ObjectListHeaderActionsExportCSVButton)(m.Y36(g.d),m.Y36(b.Pu),m.Y36(h.o),m.Y36(y.t),m.Y36(V.o),m.Y36(m.zs3))};static ɵcmp=m.Xpm({type:ObjectListHeaderActionsExportCSVButton,selectors:[["object-list-header-actions-export-csv-button"]],decls:3,vars:1,consts:[["label","LBL_EXPORT"]],template:function(e,t){1&e&&(m.TgZ(0,"span"),m._UZ(1,"system-label",0),m._uU(2),m.qZA()),2&e&&(m.xp6(2),m.hij(" (",t.exportcount,")"))},dependencies:[I._],encapsulation:2})}return ObjectListHeaderActionsExportCSVButton})();var je=s(7674);function Be(e,t){if(1&e){const e=m.EpF();m.TgZ(0,"div",15),m.NdJ("click",(function(){const t=m.CHM(e).$implicit,s=m.oxw();return m.KtG(s.selectField("available",t))})),m.TgZ(1,"span",16),m._UZ(2,"system-label-fieldname",17),m._uU(3),m.qZA()()}if(2&e){const e=t.$implicit,s=m.oxw();m.Q6J("cdkDragData",e),m.uIk("aria-selected",s.isSelected("available",e)),m.xp6(2),m.Q6J("module",s.model.module)("field",e),m.xp6(1),m.hij(" (",e,")")}}function Ge(e,t){if(1&e){const e=m.EpF();m.TgZ(0,"div",15),m.NdJ("click",(function(){const t=m.CHM(e).$implicit,s=m.oxw();return m.KtG(s.selectField("list",t))})),m.TgZ(1,"span",16),m._UZ(2,"system-label-fieldname",17),m._uU(3),m.qZA()()}if(2&e){const e=t.$implicit,s=m.oxw();m.Q6J("cdkDragData",e),m.uIk("aria-selected",s.isSelected("list",e)),m.xp6(2),m.Q6J("module",s.model.module)("field",e),m.xp6(1),m.hij(" (",e,")")}}const Pe=function(e){return[e]};let He=(()=>{class ObjectListHeaderActionsExportCSVSelectFields{language;metadata;model;modellist;modal;self;multiselect=!0;selectedAvailableFields=[];selectedListFields=[];availableFields=[];exportFields=[];constructor(e,t,s,i,n){this.language=e,this.metadata=t,this.model=s,this.modellist=i,this.modal=n,this.exportFields=[];for(let e of this.modellist.listfields)this.exportFields.push(e.field);let l=this.metadata.getComponentConfig("ObjectListHeaderActionsExportCSVSelectFields",this.model.module);if(l.enableall){let e=this.metadata.getModuleFields(this.model.module);for(let t in e)this.isExportable(e[t])&&-1==this.exportFields.indexOf(t)&&this.availableFields.push(t)}else if(l.fieldset){let e=this.metadata.getFieldSetFields(l.fieldset);for(let t of e)this.isExportable(t)&&-1==this.exportFields.indexOf(t.field)&&this.availableFields.push(t.field)}else{let e=this.metadata.getComponentConfig("ObjectList",this.modellist.module),t=this.metadata.getFieldSetFields(e.fieldset);for(let e of t)this.isExportable(e)&&-1==this.exportFields.indexOf(e.field)&&this.availableFields.push(e.field)}this.sortAvailableFields()}isExportable(e){return"link"!=e.type}onFieldDrop(e){let t=e.previousContainer.data.splice(e.previousIndex,1);e.container.data.splice(e.currentIndex,0,t[0])}selectField(e,t){switch(e){case"available":!1===this.multiselect?this.selectedAvailableFields=[t]:this.selectedAvailableFields.indexOf(t)>=0?this.selectedAvailableFields.splice(this.selectedAvailableFields.indexOf(t),1):this.selectedAvailableFields.push(t);break;case"list":!1===this.multiselect?this.selectedListFields=[t]:this.selectedListFields.indexOf(t)>=0?this.selectedListFields.splice(this.selectedListFields.indexOf(t),1):this.selectedListFields.push(t)}}isSelected(e,t){switch(e){case"available":return this.selectedAvailableFields.indexOf(t)>=0;case"list":return this.selectedListFields.indexOf(t)>=0}}moveFields(e){switch(e){case"available":this.selectedAvailableFields.forEach((e=>{this.availableFields.some(((t,s)=>{if(e==t)return this.exportFields.push(this.availableFields.splice(s,1)[0]),!0}))})),this.selectedAvailableFields=[];break;case"list":this.selectedListFields.forEach((e=>{this.exportFields.some(((t,s)=>{if(e==t)return this.availableFields.push(this.exportFields.splice(s,1)[0]),!0}))})),this.selectedListFields=[],this.sortAvailableFields()}}sortAvailableFields(){this.availableFields=this.availableFields.sort(((e,t)=>this.language.getFieldDisplayName(this.model.module,e).toLowerCase()>this.language.getFieldDisplayName(this.model.module,t).toLowerCase()?1:-1))}cancel(){this.self.destroy()}export(){this.modal.openModal("SystemLoadingModal").subscribe((e=>{e.instance.messagelabel="LBL_EXPORTING",this.modellist.exportList(this.exportFields).subscribe((t=>{e.instance.self.destroy();let s=document.createElement("a");document.body.appendChild(s),s.href=t,s.download=this.model.module+"_"+(new moment).format("YYYY_MM_DD_HH_mm")+".csv",s.click(),s.remove(),this.self.destroy()}))}))}static ɵfac=function(e){return new(e||ObjectListHeaderActionsExportCSVSelectFields)(m.Y36(g.d),m.Y36(b.Pu),m.Y36(h.o),m.Y36(y.t),m.Y36(V.o))};static ɵcmp=m.Xpm({type:ObjectListHeaderActionsExportCSVSelectFields,selectors:[["ng-component"]],decls:22,vars:10,consts:[[3,"close"],["label","LBL_EXPORT"],[1,"slds-grid","slds-p-horizontal--x-small"],[1,"slds-form-element","slds-m-horizontal--small","slds-size--1-of-2"],[1,"slds-form-element__label"],["label","LBL_AVAILABLE_FIELDS"],["cdkDropList","",1,"slds-picklist","slds-picklist__options","slds-size--1-of-1",2,"height","50vh",3,"cdkDropListData","cdkDropListConnectedTo","cdkDropListDropped"],["listOne","cdkDropList"],["cdkDrag","","class","slds-drag--preview slds-picklist__item","role","option",3,"cdkDragData","click",4,"ngFor","ngForOf"],["label","LBL_EXPORT_FIELDS"],["cdkDropList","",1,"slds-picklist","slds-picklist__options","slds-size--1-of-1","cdk-drag",2,"height","50vh",3,"cdkDropListData","cdkDropListConnectedTo","cdkDropListDropped"],["listTwo","cdkDropList"],[1,"slds-button","slds-button--neutral",3,"click"],["label","LBL_CANCEL"],[1,"slds-button","slds-button--brand",3,"click"],["cdkDrag","","role","option",1,"slds-drag--preview","slds-picklist__item",3,"cdkDragData","click"],[1,"slds-truncate"],[3,"module","field"]],template:function(e,t){if(1&e&&(m.TgZ(0,"system-modal")(1,"system-modal-header",0),m.NdJ("close",(function(){return t.cancel()})),m._UZ(2,"system-label",1),m.qZA(),m.TgZ(3,"system-modal-content")(4,"div",2)(5,"div",3)(6,"span",4),m._UZ(7,"system-label",5),m.qZA(),m.TgZ(8,"div",6,7),m.NdJ("cdkDropListDropped",(function(e){return t.onFieldDrop(e)})),m.YNc(10,Be,4,5,"div",8),m.qZA()(),m.TgZ(11,"div",3)(12,"span",4),m._UZ(13,"system-label",9),m.qZA(),m.TgZ(14,"div",10,11),m.NdJ("cdkDropListDropped",(function(e){return t.onFieldDrop(e)})),m.YNc(16,Ge,4,5,"div",8),m.qZA()()()(),m.TgZ(17,"system-modal-footer")(18,"button",12),m.NdJ("click",(function(){return t.cancel()})),m._UZ(19,"system-label",13),m.qZA(),m.TgZ(20,"button",14),m.NdJ("click",(function(){return t.export()})),m._UZ(21,"system-label",1),m.qZA()()()),2&e){const e=m.MAs(9),s=m.MAs(15);m.xp6(8),m.Q6J("cdkDropListData",t.availableFields)("cdkDropListConnectedTo",m.VKq(6,Pe,s)),m.xp6(2),m.Q6J("ngForOf",t.availableFields),m.xp6(4),m.Q6J("cdkDropListData",t.exportFields)("cdkDropListConnectedTo",m.VKq(8,Pe,e)),m.xp6(2),m.Q6J("ngForOf",t.exportFields)}},dependencies:[i.sg,n.Wj,n.Zt,I._,je.h,Fe.j,qe.x,Ee.p,Ye.y],encapsulation:2})}return ObjectListHeaderActionsExportCSVSelectFields})(),ze=(()=>{class ObjectListHeaderActionsExportTargetlistButton{language;metadata;model;modellist;modal;injector;constructor(e,t,s,i,n,l){this.language=e,this.metadata=t,this.model=s,this.modellist=i,this.modal=n,this.injector=l}get hidden(){if(!this.metadata.checkModuleAcl("ProspectLists","create"))return!0;let e=!1,t=this.metadata.getModuleFields(this.modellist.module);for(let s in t){let i=t[s];if("link"==i.type&&"ProspectLists"==i.module){e=!0;break}}return!e||!this.metadata.checkModuleAcl(this.model.module,"export")}get disabled(){return 0==this.modellist.getSelectedCount()}get exportcount(){let e=this.modellist.getSelectedCount();return e||this.modellist.listData.totalcount}execute(){this.modal.openModal("ObjectListHeaderActionsExportTargetlistModal",!0,this.injector)}static ɵfac=function(e){return new(e||ObjectListHeaderActionsExportTargetlistButton)(m.Y36(g.d),m.Y36(b.Pu),m.Y36(h.o),m.Y36(y.t),m.Y36(V.o),m.Y36(m.zs3))};static ɵcmp=m.Xpm({type:ObjectListHeaderActionsExportTargetlistButton,selectors:[["object-list-header-actions-export-targetlist-button"]],decls:3,vars:1,consts:[["label","LBL_EXPORT_PROSPECTLIST"]],template:function(e,t){1&e&&(m.TgZ(0,"span"),m._UZ(1,"system-label",0),m._uU(2),m.qZA()),2&e&&(m.xp6(2),m.hij(" (",t.exportcount,")"))},dependencies:[I._],encapsulation:2})}return ObjectListHeaderActionsExportTargetlistButton})(),Ve=(()=>{class ObjectListHeaderActionsExportTargetlistModal{language;router;metadata;backend;toast;modal;modellist;self={};targetlistname="";constructor(e,t,s,i,n,l,o){this.language=e,this.router=t,this.metadata=s,this.backend=i,this.toast=n,this.modal=l,this.modellist=o}close(){this.self.destroy()}get itemcount(){let e=this.modellist.getSelectedCount();return e||this.modellist.listData.totalcount}export(){this.modal.openModal("SystemLoadingModal").subscribe((e=>{e.instance.messagelabel="LBL_EXPORTING";let t=this.modellist.getSelectedIDs(),s={listtype:this.modellist.currentList.id,targetlistname:this.targetlistname,owner:"owner"==this.modellist.currentList.id,module:this.modellist.module,modulefilter:this.modellist.modulefilter,searchterm:this.modellist.searchTerm,aggregates:this.modellist.selectedAggregates,listid:this.modellist.currentList.id,ids:t};this.backend.postRequest("module/ProspectLists/exportfromlist",{},s).subscribe((t=>{e.instance.self.destroy(),"success"==t.status?(this.router.navigate(["/module/ProspectLists/"+t.id]),this.close()):this.toast.sendToast(t.msg,"error")}))}))}static ɵfac=function(e){return new(e||ObjectListHeaderActionsExportTargetlistModal)(m.Y36(g.d),m.Y36(o.F0),m.Y36(b.Pu),m.Y36(W.y),m.Y36(he.A),m.Y36(V.o),m.Y36(y.t))};static ɵcmp=m.Xpm({type:ObjectListHeaderActionsExportTargetlistModal,selectors:[["object-list-header-actions-export-targetlist-modal"]],features:[m._Bn([h.o])],decls:19,vars:3,consts:[[3,"close"],["label","LBL_EXPORT_PROSPECTLIST"],["label","LBL_RECORDS"],[1,"slds-form-element"],[1,"slds-form-element__label"],["title","required",1,"slds-required"],["label","LBL_PROSPECTLIST"],[1,"slds-form-element__control"],["type","text",1,"slds-input",3,"ngModel","ngModelChange"],[1,"slds-button","slds-button--neutral",3,"click"],["label","LBL_CANCEL"],[1,"slds-button","slds-button--brand",3,"disabled","click"],["label","LBL_EXPORT"]],template:function(e,t){1&e&&(m.TgZ(0,"system-modal")(1,"system-modal-header",0),m.NdJ("close",(function(){return t.close()})),m._UZ(2,"system-label",1),m._uU(3),m._UZ(4,"system-label",2),m._uU(5,")"),m.qZA(),m.TgZ(6,"system-modal-content")(7,"div",3)(8,"label",4)(9,"abbr",5),m._uU(10,"*"),m.qZA(),m._UZ(11,"system-label",6),m.qZA(),m.TgZ(12,"div",7)(13,"input",8),m.NdJ("ngModelChange",(function(e){return t.targetlistname=e})),m.qZA()()()(),m.TgZ(14,"system-modal-footer")(15,"button",9),m.NdJ("click",(function(){return t.close()})),m._UZ(16,"system-label",10),m.qZA(),m.TgZ(17,"button",11),m.NdJ("click",(function(){return t.export()})),m._UZ(18,"system-label",12),m.qZA()()()),2&e&&(m.xp6(3),m.hij(" (",t.itemcount," "),m.xp6(10),m.Q6J("ngModel",t.targetlistname),m.xp6(4),m.Q6J("disabled",!t.targetlistname))},dependencies:[l.Fj,l.JJ,l.On,I._,Fe.j,qe.x,Ee.p,Ye.y],encapsulation:2})}return ObjectListHeaderActionsExportTargetlistModal})(),$e=(()=>{class ObjectListHeaderActionsSelectAllButton{language;metadata;model;modellist;modal;hidden=!1;constructor(e,t,s,i,n){this.language=e,this.metadata=t,this.model=s,this.modellist=i,this.modal=n}get disabled(){return 0==this.modellist.listData.list.length}execute(){this.modellist.setAllSelected()}static ɵfac=function(e){return new(e||ObjectListHeaderActionsSelectAllButton)(m.Y36(g.d),m.Y36(b.Pu),m.Y36(h.o),m.Y36(y.t),m.Y36(V.o))};static ɵcmp=m.Xpm({type:ObjectListHeaderActionsSelectAllButton,selectors:[["object-list-header-actions-select-all-button"]],decls:2,vars:0,consts:[[1,"slds-truncate"],["label","LBL_SELECT_ALL"]],template:function(e,t){1&e&&(m.TgZ(0,"span",0),m._UZ(1,"system-label",1),m.qZA())},dependencies:[I._],encapsulation:2})}return ObjectListHeaderActionsSelectAllButton})(),Ke=(()=>{class ObjectListHeaderActionsUnselectAllButton{language;metadata;model;modellist;modal;disabled=!1;constructor(e,t,s,i,n){this.language=e,this.metadata=t,this.model=s,this.modellist=i,this.modal=n}get hasSelection(){return this.modellist.getSelectedCount()>0}get hidden(){return!this.hasSelection}execute(){this.modellist.setAllUnselected()}static ɵfac=function(e){return new(e||ObjectListHeaderActionsUnselectAllButton)(m.Y36(g.d),m.Y36(b.Pu),m.Y36(h.o),m.Y36(y.t),m.Y36(V.o))};static ɵcmp=m.Xpm({type:ObjectListHeaderActionsUnselectAllButton,selectors:[["object-list-header-actions-unselect-all-button"]],decls:2,vars:0,consts:[[1,"slds-truncate"],["label","LBL_UNSELECT_ALL"]],template:function(e,t){1&e&&(m.TgZ(0,"span",0),m._UZ(1,"system-label",1),m.qZA())},dependencies:[I._],encapsulation:2})}return ObjectListHeaderActionsUnselectAllButton})(),Xe=(()=>{class ObjectListHeaderActionsSelectRangeButton{model;modellist;modal;injector;hidden=!1;constructor(e,t,s,i){this.model=e,this.modellist=t,this.modal=s,this.injector=i}get disabled(){return 0==this.modellist.listData.list.length}execute(){this.modal.openModal("ObjectListHeaderActionsSelectRangeModal",!0,this.injector)}static ɵfac=function(e){return new(e||ObjectListHeaderActionsSelectRangeButton)(m.Y36(h.o),m.Y36(y.t),m.Y36(V.o),m.Y36(m.zs3))};static ɵcmp=m.Xpm({type:ObjectListHeaderActionsSelectRangeButton,selectors:[["object-list-header-actions-select-range-button"]],decls:2,vars:0,consts:[[1,"slds-truncate"],["label","LBL_SELECT_RANGE"]],template:function(e,t){1&e&&(m.TgZ(0,"span",0),m._UZ(1,"system-label",1),m.qZA())},dependencies:[I._],encapsulation:2})}return ObjectListHeaderActionsSelectRangeButton})(),We=(()=>{class ObjectListHeaderActionsSelectRangeModal{model;modellist;self;from=1;to;constructor(e,t){this.model=e,this.modellist=t}ngOnInit(){this.to=this.modellist.listData.list.length}close(){this.self.destroy()}get canSelect(){return!(!this.from||!this.to)&&(!(this.from<1||this.to<1)&&(!(this.to<=this.from)&&!(this.to>this.modellist.listData.list.length)))}select(){this.canSelect&&(this.modellist.setRangeSelected(this.from,this.to),this.close())}static ɵfac=function(e){return new(e||ObjectListHeaderActionsSelectRangeModal)(m.Y36(h.o),m.Y36(y.t))};static ɵcmp=m.Xpm({type:ObjectListHeaderActionsSelectRangeModal,selectors:[["object-list-header-actions-select-range-modal"]],decls:18,vars:3,consts:[["size","small"],[3,"close"],["label","LBL_SELECT_RANGE"],[1,"slds-grid","slds-grid--vertical-align-center","slds-gutters_direct-small"],[1,"slds-col","slds-size--1-of-2","slds-grid","slds-grid--vertical-align-center"],[1,"slds-size--1-of-3","slds-text-align--center"],["label","LBL_FROM"],["type","number",1,"slds-input","slds-size--2-of-3",3,"ngModel","ngModelChange"],["label","LBL_TO"],[1,"slds-button","slds-button--neutral",3,"click"],["label","LBL_CLOSE"],[1,"slds-button","slds-button--brand",3,"disabled","click"],["label","LBL_SELECT"]],template:function(e,t){1&e&&(m.TgZ(0,"system-modal",0)(1,"system-modal-header",1),m.NdJ("close",(function(){return t.close()})),m._UZ(2,"system-label",2),m.qZA(),m.TgZ(3,"system-modal-content")(4,"div",3)(5,"div",4)(6,"div",5),m._UZ(7,"system-label",6),m.qZA(),m.TgZ(8,"input",7),m.NdJ("ngModelChange",(function(e){return t.from=e})),m.qZA()(),m.TgZ(9,"div",4)(10,"div",5),m._UZ(11,"system-label",8),m.qZA(),m.TgZ(12,"input",7),m.NdJ("ngModelChange",(function(e){return t.to=e})),m.qZA()()()(),m.TgZ(13,"system-modal-footer")(14,"button",9),m.NdJ("click",(function(){return t.close()})),m._UZ(15,"system-label",10),m.qZA(),m.TgZ(16,"button",11),m.NdJ("click",(function(){return t.select()})),m._UZ(17,"system-label",12),m.qZA()()()),2&e&&(m.xp6(8),m.Q6J("ngModel",t.from),m.xp6(4),m.Q6J("ngModel",t.to),m.xp6(4),m.Q6J("disabled",!t.canSelect))},dependencies:[l.Fj,l.wV,l.JJ,l.On,I._,Fe.j,qe.x,Ee.p,Ye.y],encapsulation:2})}return ObjectListHeaderActionsSelectRangeModal})();var et=s(56857);const tt=["fieldcontainer"];let st=(()=>{class ObjectListItemField{model;language;metadata;fieldcontainer;field="";constructor(e,t,s){this.model=e,this.language=t,this.metadata=s}ngAfterViewInit(){this.buildContainer()}buildContainer(){this.metadata.addComponent("fieldGeneric",this.fieldcontainer).subscribe((e=>{e.instance.fieldname=this.field}))}static ɵfac=function(e){return new(e||ObjectListItemField)(m.Y36(h.o),m.Y36(g.d),m.Y36(b.Pu))};static ɵcmp=m.Xpm({type:ObjectListItemField,selectors:[["object-list-item--field"]],viewQuery:function(e,t){if(1&e&&m.Gf(tt,7,m.s_b),2&e){let e;m.iGM(e=m.CRH())&&(t.fieldcontainer=e.first)}},inputs:{field:"field"},decls:3,vars:1,consts:[[1,"slds-truncate",3,"title"],["fieldcontainer",""]],template:function(e,t){1&e&&(m.TgZ(0,"div",0),m._UZ(1,"div",null,1),m.qZA()),2&e&&m.s9C("title",t.field)},encapsulation:2})}return ObjectListItemField})();var it=s(20586),nt=s(30699),lt=s(86094);let ot=(()=>{class ObjectActionsetMenuContainerEdit{language;model;constructor(e,t){this.language=e,this.model=t}doAction(){this.model.checkAccess("edit")&&this.model.edit(!0)}static ɵfac=function(e){return new(e||ObjectActionsetMenuContainerEdit)(m.Y36(g.d),m.Y36(h.o))};static ɵcmp=m.Xpm({type:ObjectActionsetMenuContainerEdit,selectors:[["object-actionset-menu-container-edit"]],decls:4,vars:0,consts:[["role","presentation",1,"slds-dropdown__item",3,"click"],["href","javascript:void(0);","role","menuitem"],[1,"slds-truncate"],["label","LBL_EDIT"]],template:function(e,t){1&e&&(m.TgZ(0,"li",0),m.NdJ("click",(function(){return t.doAction()})),m.TgZ(1,"a",1)(2,"span",2),m._UZ(3,"system-label",3),m.qZA()()())},dependencies:[I._],encapsulation:2})}return ObjectActionsetMenuContainerEdit})();var at=s(93441);let dt=(()=>{class ObjectActionsetMenuContainerDelete{language;model;helper;constructor(e,t,s){this.language=e,this.model=t,this.helper=s}doAction(){this.model.checkAccess("delete")&&this.helper.confirm(this.language.getLabel("LBL_DELETE_RECORD"),this.language.getLabel("MSG_DELETE_CONFIRM")).subscribe((e=>{e&&this.model.delete()}))}static ɵfac=function(e){return new(e||ObjectActionsetMenuContainerDelete)(m.Y36(g.d),m.Y36(h.o),m.Y36(at._))};static ɵcmp=m.Xpm({type:ObjectActionsetMenuContainerDelete,selectors:[["ng-component"]],decls:4,vars:0,consts:[["role","presentation",1,"slds-dropdown__item",3,"click"],["href","javascript:void(0);","role","menuitem"],[1,"slds-truncate"],["label","LBL_DELETE"]],template:function(e,t){1&e&&(m.TgZ(0,"li",0),m.NdJ("click",(function(){return t.doAction()})),m.TgZ(1,"a",1)(2,"span",2),m._UZ(3,"system-label",3),m.qZA()()())},dependencies:[I._],encapsulation:2})}return ObjectActionsetMenuContainerDelete})();function rt(e,t){1&e&&m._UZ(0,"system-button-icon",2)}function ct(e,t){1&e&&(m.TgZ(0,"span"),m._UZ(1,"system-label",3),m.qZA())}let ut=(()=>{class ObjectActionEditButton{language;metadata;model;displayasicon=!1;constructor(e,t,s){this.language=e,this.metadata=t,this.model=s}get hidden(){return this.model.isEditing}get disabled(){return!this.model.checkAccess("edit")||(this.model.isEditing||this.model.isSaving)}execute(){this.model.edit()}static ɵfac=function(e){return new(e||ObjectActionEditButton)(m.Y36(g.d),m.Y36(b.Pu),m.Y36(h.o))};static ɵcmp=m.Xpm({type:ObjectActionEditButton,selectors:[["object-action-edit-button"]],decls:2,vars:2,consts:[["icon","edit",4,"ngIf"],[4,"ngIf"],["icon","edit"],["label","LBL_EDIT"]],template:function(e,t){1&e&&(m.YNc(0,rt,1,0,"system-button-icon",0),m.YNc(1,ct,2,0,"span",1)),2&e&&(m.Q6J("ngIf",t.displayasicon),m.xp6(1),m.Q6J("ngIf",!t.displayasicon))},dependencies:[i.O5,w.J,I._],encapsulation:2})}return ObjectActionEditButton})(),mt=(()=>{class ObjectActionEditRelatedButton{language;metadata;parent;model;disabled=!0;actionconfig={};subscriptions=new B.w0;constructor(e,t,s,i){this.language=e,this.metadata=t,this.parent=s,this.model=i}ngOnInit(){this.handleDisabled(this.parent.isEditing?"edit":"display"),this.subscriptions.add(this.parent.mode$.subscribe((e=>{this.handleDisabled(e)}))),this.subscriptions.add(this.parent.data$.subscribe((e=>{this.model.module=this.actionconfig.module,this.model.id=this.parent.getFieldValue(this.actionconfig.parent_field),this.handleDisabled(this.parent.isEditing?"edit":"display")})))}get hidden(){return!this.model.id}execute(){this.model.edit(!0)}ngOnDestroy(){this.subscriptions.unsubscribe()}handleDisabled(e){this.parent.checkAccess("edit")?this.disabled="edit"==e:this.disabled=!0}static ɵfac=function(e){return new(e||ObjectActionEditRelatedButton)(m.Y36(g.d),m.Y36(b.Pu),m.Y36(h.o,4),m.Y36(h.o))};static ɵcmp=m.Xpm({type:ObjectActionEditRelatedButton,selectors:[["object-action-edit-related-button"]],features:[m._Bn([h.o])],decls:2,vars:0,consts:[["label","LBL_EDIT_RELATED"]],template:function(e,t){1&e&&(m.TgZ(0,"span"),m._UZ(1,"system-label",0),m.qZA())},dependencies:[I._],encapsulation:2})}return ObjectActionEditRelatedButton})();function gt(e,t){1&e&&m._UZ(0,"system-button-icon",2)}function ht(e,t){1&e&&(m.TgZ(0,"span"),m._UZ(1,"system-label",3),m.qZA())}let pt=(()=>{class ObjectActionDeleteButton{metadata;model;navigationtab;router;modal;toast;injector;displayasicon=!1;actionconfig={};constructor(e,t,s,i,n,l,o){this.metadata=e,this.model=t,this.navigationtab=s,this.router=i,this.modal=n,this.toast=l,this.injector=o}get disabled(){return!this.canDelete}get canDelete(){try{return this.model.checkAccess("delete")&&!this.model.isEditing}catch(e){return!1}}execute(){this.modal.confirm("MSG_DELETE_RECORD","MSG_DELETE_RECORD").subscribe((e=>{e&&this.delete()}))}delete(){this.model.delete().subscribe((e=>{this.completeAction()}),(()=>{this.toast.sendToast("LBL_ERROR_DELETING_RECORD","error")}))}completeAction(){1!=this.actionconfig.noredirectoncomplete&&(this.navigationtab&&"main"!=this.navigationtab.tabid?this.navigationtab.closeTab():this.router.navigate(["/module/"+this.model.module]))}static ɵfac=function(e){return new(e||ObjectActionDeleteButton)(m.Y36(b.Pu),m.Y36(h.o),m.Y36(we.d,8),m.Y36(o.F0),m.Y36(V.o),m.Y36(he.A),m.Y36(m.zs3))};static ɵcmp=m.Xpm({type:ObjectActionDeleteButton,selectors:[["object-action-delete-button"]],decls:2,vars:2,consts:[["icon","delete",4,"ngIf"],[4,"ngIf"],["icon","delete"],["label","LBL_DELETE"]],template:function(e,t){1&e&&(m.YNc(0,gt,1,0,"system-button-icon",0),m.YNc(1,ht,2,0,"span",1)),2&e&&(m.Q6J("ngIf",t.displayasicon),m.xp6(1),m.Q6J("ngIf",!t.displayasicon))},dependencies:[i.O5,w.J,I._],encapsulation:2})}return ObjectActionDeleteButton})(),ft=(()=>{class ObjectActionAuditlogButton{language;metadata;model;modal;ViewContainerRef;disabled=!0;hidden=!0;constructor(e,t,s,i,n){this.language=e,this.metadata=t,this.model=s,this.modal=i,this.ViewContainerRef=n}ngOnInit(){this.metadata.getModuleDefs(this.model.module).audited&&(this.disabled=!1,this.hidden=!1)}execute(){this.modal.openModal("ObjectActionAuditlogModal",!0,this.ViewContainerRef.injector)}static ɵfac=function(e){return new(e||ObjectActionAuditlogButton)(m.Y36(g.d),m.Y36(b.Pu),m.Y36(h.o),m.Y36(V.o),m.Y36(m.s_b))};static ɵcmp=m.Xpm({type:ObjectActionAuditlogButton,selectors:[["object-action-auditlog-button"]],decls:2,vars:0,consts:[["label","LBL_AUDITLOG"]],template:function(e,t){1&e&&(m.TgZ(0,"span"),m._UZ(1,"system-label",0),m.qZA())},dependencies:[I._],encapsulation:2})}return ObjectActionAuditlogButton})();function bt(e,t){1&e&&m._UZ(0,"system-button-icon",2)}function _t(e,t){1&e&&(m.TgZ(0,"span"),m._UZ(1,"system-label",3),m.qZA())}let vt=(()=>{class ObjectActionOpenButton{language;metadata;model;router;helper;view;navigationtab;displayasicon=!1;constructor(e,t,s,i,n,l,o){this.language=e,this.metadata=t,this.model=s,this.router=i,this.helper=n,this.view=l,this.navigationtab=o}get disabled(){return!this.model.checkAccess("detail")||this.view.isEditMode()}execute(){this.model.goDetail(this.navigationtab.tabid)}static ɵfac=function(e){return new(e||ObjectActionOpenButton)(m.Y36(g.d),m.Y36(b.Pu),m.Y36(h.o),m.Y36(o.F0),m.Y36(at._),m.Y36(Oe.e),m.Y36(we.d))};static ɵcmp=m.Xpm({type:ObjectActionOpenButton,selectors:[["object-action-open-button"]],features:[m._Bn([at._])],decls:2,vars:2,consts:[["icon","open",4,"ngIf"],[4,"ngIf"],["icon","open"],["label","LBL_OPEN"]],template:function(e,t){1&e&&(m.YNc(0,bt,1,0,"system-button-icon",0),m.YNc(1,_t,2,0,"span",1)),2&e&&(m.Q6J("ngIf",t.displayasicon),m.xp6(1),m.Q6J("ngIf",!t.displayasicon))},dependencies:[i.O5,w.J,I._],encapsulation:2})}return ObjectActionOpenButton})(),yt=(()=>{class ObjectActionBooleanToggleButton{language;model;viewContainerRef;toast;actionconfig;constructor(e,t,s,i){this.language=e,this.model=t,this.viewContainerRef=s,this.toast=i}execute(){if(this.actionconfig.fieldtotoggle)if(this.model.getField(this.actionconfig.fieldtotoggle)&&!this.actionconfig.onlysettoone)this.model.setField(this.actionconfig.fieldtotoggle,0),this.model.save();else{if(1==this.model.getField(this.actionconfig.fieldtotoggle))return;this.model.setField(this.actionconfig.fieldtotoggle,1),this.model.save()}}static ɵfac=function(e){return new(e||ObjectActionBooleanToggleButton)(m.Y36(g.d),m.Y36(h.o),m.Y36(m.s_b),m.Y36(he.A))};static ɵcmp=m.Xpm({type:ObjectActionBooleanToggleButton,selectors:[["object-action-boolean-toggle-button"]],decls:2,vars:0,consts:[["label","LBL_TOGGLE"]],template:function(e,t){1&e&&(m.TgZ(0,"span"),m._UZ(1,"system-label",0),m.qZA())},dependencies:[I._],encapsulation:2})}return ObjectActionBooleanToggleButton})();var xt=s(58032);function wt(e,t){if(1&e&&m._UZ(0,"system-button-icon",2),2&e){const e=m.oxw();m.Q6J("title",e.language.getLabel("LBL_CANCEL"))}}function Zt(e,t){1&e&&(m.TgZ(0,"span"),m._UZ(1,"system-label",3),m.qZA())}let Tt=(()=>{class ObjectActionCancelButton{language;metadata;model;router;helper;view;modalwindow;actionemitter=new m.vpe;displayasicon=!1;constructor(e,t,s,i,n,l,o){this.language=e,this.metadata=t,this.model=s,this.router=i,this.helper=n,this.view=l,this.modalwindow=o}get disabled(){return this.model.isSaving}get hidden(){return!this.model.isEditing}execute(){this.model.cancelEdit(),this.view.setViewMode(),this.actionemitter.emit("cancel"),this.modalwindow&&this.modalwindow.self.destroy()}static ɵfac=function(e){return new(e||ObjectActionCancelButton)(m.Y36(g.d),m.Y36(b.Pu),m.Y36(h.o),m.Y36(o.F0),m.Y36(at._),m.Y36(Oe.e),m.Y36(xt.S,8))};static ɵcmp=m.Xpm({type:ObjectActionCancelButton,selectors:[["object-action-cancel-button"]],outputs:{actionemitter:"actionemitter"},features:[m._Bn([at._])],decls:2,vars:2,consts:[["icon","close",3,"title",4,"ngIf"],[4,"ngIf"],["icon","close",3,"title"],["label","LBL_CANCEL"]],template:function(e,t){1&e&&(m.YNc(0,wt,1,1,"system-button-icon",0),m.YNc(1,Zt,2,0,"span",1)),2&e&&(m.Q6J("ngIf",t.displayasicon),m.xp6(1),m.Q6J("ngIf",!t.displayasicon))},dependencies:[i.O5,w.J,I._],encapsulation:2})}return ObjectActionCancelButton})(),Ct=(()=>{class ObjectActionModalSaveButton{language;metadata;model;modal;modalwindow;actionemitter=new m.vpe;actionconfig={};constructor(e,t,s,i,n){this.language=e,this.metadata=t,this.model=s,this.modal=i,this.modalwindow=n}get displayLabel(){return this.actionconfig.label?this.actionconfig.label:this.actionconfig.gorelated?"LBL_SAVE_AND_GO_TO_RECORD":"LBL_SAVE"}execute(){this.model.validate()&&(this.model.isNew&&this.metadata.getModuleDuplicatecheck(this.model.module)?this.modal.openModal("SystemLoadingModal").subscribe((e=>{e.instance.messagelabel="LBL_CHECKING_DUPLICATES",this.model.duplicateCheck(!0).subscribe((t=>{e.instance.self.destroy(),t.count>0?(this.model.duplicates=t.records,this.model.duplicatecount=t.count,this.modal.confirm(this.language.getLabel("MSG_DUPLICATES_FOUND",null,"long"),this.language.getLabel("MSG_DUPLICATES_FOUND")).subscribe((e=>{e&&this.saveModel()}))):this.saveModel()}))})):this.saveModel())}saveModel(){this.modal.openModal("SystemLoadingModal").subscribe((e=>{e.instance.messagelabel="LBL_SAVING_DATA",this.model.save(!0).subscribe((t=>{this.model.endEdit(),t&&this.actionconfig.gorelated&&this.actionemitter.emit("savegodetail"),e.instance.self.destroy(),this.actionemitter.emit("save")}),(t=>{e.instance.self.destroy()}))}))}static ɵfac=function(e){return new(e||ObjectActionModalSaveButton)(m.Y36(g.d),m.Y36(b.Pu),m.Y36(h.o),m.Y36(V.o),m.Y36(xt.S,8))};static ɵcmp=m.Xpm({type:ObjectActionModalSaveButton,selectors:[["object-action-modal-save-button"]],outputs:{actionemitter:"actionemitter"},features:[m._Bn([at._])],decls:2,vars:1,consts:[[3,"label"]],template:function(e,t){1&e&&(m.TgZ(0,"span"),m._UZ(1,"system-label",0),m.qZA()),2&e&&(m.xp6(1),m.Q6J("label",t.displayLabel))},dependencies:[I._],encapsulation:2})}return ObjectActionModalSaveButton})();var kt=s(66040);function At(e,t){1&e&&m._UZ(0,"system-button-icon",2)}function Lt(e,t){1&e&&(m.TgZ(0,"span"),m._UZ(1,"system-label",3),m.qZA())}let It=(()=>{class ObjectActionRemoveButton{language;metadata;model;view;relatedmodels;modalservice;actionemitter=new m.vpe;disabled=!0;displayasicon=!1;subscriptions=new B.w0;constructor(e,t,s,i,n,l){this.language=e,this.metadata=t,this.model=s,this.view=i,this.relatedmodels=n,this.modalservice=l,this.subscriptions.add(this.model.mode$.subscribe((e=>{this.handleDisabled(e)}))),this.subscriptions.add(this.model.data$.subscribe((e=>{this.handleDisabled(this.model.isEditing?"edit":"display")})))}get canDelete(){try{let e=this.model.checkAccess("deleterelated");return e||(e=this.model.checkAccess("delete")),e}catch(e){return!1}}ngAfterViewInit(){this.handleDisabled(this.model.isEditing?"edit":"display")}execute(){this.modalservice.confirm(this.language.getLabel("QST_REMOVE_ENTRY"),this.language.getLabel("QST_REMOVE_ENTRY",null,"short")).subscribe((e=>{e&&this.relatedmodels.deleteItem(this.model.id)}))}handleDisabled(e){this.canDelete?this.disabled="edit"==e:this.disabled=!0}ngOnDestroy(){this.subscriptions.unsubscribe()}static ɵfac=function(e){return new(e||ObjectActionRemoveButton)(m.Y36(g.d),m.Y36(b.Pu),m.Y36(h.o),m.Y36(Oe.e),m.Y36(kt.j),m.Y36(V.o))};static ɵcmp=m.Xpm({type:ObjectActionRemoveButton,selectors:[["object-action-remove-button"]],outputs:{actionemitter:"actionemitter"},decls:2,vars:2,consts:[["icon","remove_link",4,"ngIf"],[4,"ngIf"],["icon","remove_link"],["label","LBL_REMOVE"]],template:function(e,t){1&e&&(m.YNc(0,At,1,0,"system-button-icon",0),m.YNc(1,Lt,2,0,"span",1)),2&e&&(m.Q6J("ngIf",t.displayasicon),m.xp6(1),m.Q6J("ngIf",!t.displayasicon))},dependencies:[i.O5,w.J,I._],encapsulation:2})}return ObjectActionRemoveButton})();var St=s(46538),Mt=s(94664);function Jt(e,t){1&e&&m._UZ(0,"system-spinner",9)}function Ot(e,t){if(1&e&&(m.TgZ(0,"tr")(1,"td",21)(2,"div",13),m._uU(3),m.qZA()(),m.TgZ(4,"td",22)(5,"div",23),m._uU(6),m.qZA()(),m.TgZ(7,"td",21)(8,"div",23),m._uU(9),m.qZA()()()),2&e){const e=t.$implicit,s=m.oxw(3);m.xp6(3),m.hij("",s.language.getFieldDisplayName(s.model.module,e.field_name)," "),m.xp6(3),m.Oqu(e.before_value_string),m.xp6(3),m.Oqu(e.after_value_string)}}function Nt(e,t){if(1&e&&(m.ynx(0),m.TgZ(1,"tr")(2,"td",18)(3,"div",19),m._uU(4),m._UZ(5,"system-display-datetime",20),m.qZA()()(),m.YNc(6,Ot,10,3,"tr",17),m.BQk()),2&e){const e=t.$implicit;m.xp6(4),m.hij(" ",e.user_name," / "),m.xp6(1),m.Q6J("date",e.date_created),m.xp6(1),m.Q6J("ngForOf",e.audit_log)}}function Ft(e,t){if(1&e&&(m.TgZ(0,"table",10)(1,"thead")(2,"tr",11)(3,"th",12)(4,"div",13),m._UZ(5,"system-label",14),m.qZA()(),m.TgZ(6,"th",12)(7,"div",13),m._UZ(8,"system-label",15),m.qZA()(),m.TgZ(9,"th",12)(10,"div",13),m._UZ(11,"system-label",16),m.qZA()()()(),m.TgZ(12,"tbody"),m.YNc(13,Nt,7,3,"ng-container",17),m.qZA()()),2&e){const e=m.oxw();m.xp6(13),m.Q6J("ngForOf",e.auditLog)}}function qt(e,t){1&e&&(m.TgZ(0,"div",24),m._UZ(1,"system-label",25),m._uU(2,". "),m.qZA())}let Et=(()=>{class ObjectActionAuditlogModal{language;metadata;model;self=null;auditLog=[];auditTransactions=[];loading=!0;moduleFields=[];_userfilter="";_fieldfilter="";constructor(e,t,s){this.language=e,this.metadata=t,this.model=s}get userfilter(){return this._userfilter}set userfilter(e){this._userfilter=e,this.loadAuditLog()}get fieldfilter(){return this._fieldfilter}set fieldfilter(e){this._fieldfilter=e,this.loadAuditLog()}ngOnInit(){this.loadAuditLog();for(let e in this.metadata.getModuleFields(this.model.module))this.moduleFields.push({name:e,display:this.language.getFieldDisplayName(this.model.module,e)});this.moduleFields.sort(((e,t)=>e.display.toLowerCase()>t.display.toLowerCase()?1:-1))}hideAuditLog(){this.self.destroy()}loadAuditLog(){this.model&&(this.auditLog=[],this.auditTransactions=[],this.loading=!0,this.model.getAuditLog({user:this._userfilter,field:this._fieldfilter,grouped:!0}).subscribe((e=>{this.auditLog=e;for(let e of this.auditLog)-1==this.auditTransactions.indexOf(e.transaction_id)&&this.auditTransactions.push({transaction_id:e.transaction_id,created_by:e.created_by,user_name:e.user_name,date_created:e.date_created});this.loading=!1}),(e=>{this.loading=!1})))}static ɵfac=function(e){return new(e||ObjectActionAuditlogModal)(m.Y36(g.d),m.Y36(b.Pu),m.Y36(h.o,8))};static ɵcmp=m.Xpm({type:ObjectActionAuditlogModal,selectors:[["object-action-auditlog-modal"]],decls:10,vars:3,consts:[["size","large"],[3,"close"],["label","LBL_LOGGED_CHANGES"],["margin","none"],["class","slds-p-around--medium",4,"ngIf"],["class","slds-table slds-table--bordered slds-table--cell-buffer",4,"ngIf"],["class","slds-text-heading--small slds-p-around--medium",4,"ngIf"],[1,"slds-button","slds-button--brand",3,"click"],["label","LBL_CLOSE"],[1,"slds-p-around--medium"],[1,"slds-table","slds-table--bordered","slds-table--cell-buffer"],[1,"slds-text-title--caps"],["scope","col"],[1,"slds-truncate"],["label","LBL_FIELD"],["label","LBL_BEFOREVALUE"],["label","LBL_AFTERVALUE"],[4,"ngFor","ngForOf"],["colspan","3",1,"slds-theme--shade"],[1,"slds-text-heading--label"],[3,"date"],["scope","row"],["scope","row",1,"slds-cell-wrap"],[1,"slds-line-clamp"],[1,"slds-text-heading--small","slds-p-around--medium"],["label","MSG_NOAUDITRECORDS_FOUND"]],template:function(e,t){1&e&&(m.TgZ(0,"system-modal",0)(1,"system-modal-header",1),m.NdJ("close",(function(){return t.hideAuditLog()})),m._UZ(2,"system-label",2),m.qZA(),m.TgZ(3,"system-modal-content",3),m.YNc(4,Jt,1,0,"system-spinner",4),m.YNc(5,Ft,14,1,"table",5),m.YNc(6,qt,3,0,"div",6),m.qZA(),m.TgZ(7,"system-modal-footer")(8,"button",7),m.NdJ("click",(function(){return t.hideAuditLog()})),m._UZ(9,"system-label",8),m.qZA()()()),2&e&&(m.xp6(4),m.Q6J("ngIf",t.loading),m.xp6(1),m.Q6J("ngIf",!t.loading),m.xp6(1),m.Q6J("ngIf",!t.loading&&0===t.auditLog.length))},dependencies:[i.sg,i.O5,St.a,I._,Fe.j,qe.x,Ee.p,Ye.y,Mt.W],encapsulation:2})}return ObjectActionAuditlogModal})();function Yt(e,t){1&e&&m._UZ(0,"system-button-icon",2)}function Dt(e,t){1&e&&(m.TgZ(0,"span"),m._UZ(1,"system-label",3),m.qZA())}let Ut=(()=>{class ObjectActionNewButton{language;metadata;model;parentmodel;disabled=!0;displayasicon=!1;constructor(e,t,s,i){this.language=e,this.metadata=t,this.model=s,this.parentmodel=i}execute(){this.model.module=this.parentmodel.module,this.model.id=void 0,this.model.initialize(),this.model.addModel("",this.parentmodel)}ngOnInit(){this.parentmodel.module&&this.metadata.checkModuleAcl(this.parentmodel.module,"create")&&(this.disabled=!1)}static ɵfac=function(e){return new(e||ObjectActionNewButton)(m.Y36(g.d),m.Y36(b.Pu),m.Y36(h.o),m.Y36(h.o,4))};static ɵcmp=m.Xpm({type:ObjectActionNewButton,selectors:[["object-action-new-button"]],features:[m._Bn([h.o])],decls:2,vars:2,consts:[["icon","add",4,"ngIf"],[4,"ngIf"],["icon","add"],["label","LBL_NEW"]],template:function(e,t){1&e&&(m.YNc(0,Yt,1,0,"system-button-icon",0),m.YNc(1,Dt,2,0,"span",1)),2&e&&(m.Q6J("ngIf",t.displayasicon),m.xp6(1),m.Q6J("ngIf",!t.displayasicon))},dependencies:[i.O5,w.J,I._],encapsulation:2})}return ObjectActionNewButton})();var Qt=s(75920);let Rt=(()=>{class ObjectActionDuplicateButton{parent;language;metadata;model;session;constructor(e,t,s,i,n){this.parent=e,this.language=t,this.metadata=s,this.model=i,this.session=n}get hidden(){return this.parent.isEditing}get disabled(){return!this.metadata.checkModuleAcl(this.parent.module,"create")||(this.parent.isEditing||this.parent.isSaving)}execute(){let e=this.model.utils.generateGuid();this.model.module=this.parent.module,this.model.initializeModel();let t=JSON.parse(JSON.stringify(this.parent.data));t.id=this.model.id,t.assigned_user_id=this.session.authData.userId,t.assigned_user_name=this.session.authData.userName,t.modified_by_id=this.session.authData.userId,t.modified_by_name=this.session.authData.userName,t.date_entered=new Date,t.date_modified=new Date,this.model.setData(t,!1);for(let t in this.parent.fields)if("link"==this.parent.fields[t].type&&this.model.data[t]&&this.model.data[t].beans)for(let s in this.model.data[t].beans){for(let i in this.model.data[t].beans[s])this.model.data[t].beans[s][i]==this.parent.id&&(this.model.data[t].beans[s][i]=e,this.model.data[t].beans[s].id=this.model.utils.generateGuid()),this.model.data[t].beans[s][i].beans&&(this.model.data[t].beans[s][i].beans={});this.model.data[t].beans[s].id!=s&&(this.model.data[t].beans[this.model.data[t].beans[s].id]=this.model.data[t].beans[s],delete this.model.data[t].beans[s])}this.model.duplicate=!0,this.model.templateId=this.parent.id,this.model.edit()}static ɵfac=function(e){return new(e||ObjectActionDuplicateButton)(m.Y36(h.o,4),m.Y36(g.d),m.Y36(b.Pu),m.Y36(h.o),m.Y36(Qt.n))};static ɵcmp=m.Xpm({type:ObjectActionDuplicateButton,selectors:[["object-action-duplicate-button"]],features:[m._Bn([h.o])],decls:2,vars:0,consts:[["label","LBL_DUPLICATE"]],template:function(e,t){1&e&&(m.TgZ(0,"span"),m._UZ(1,"system-label",0),m.qZA())},dependencies:[I._],encapsulation:2})}return ObjectActionDuplicateButton})();function jt(e,t){if(1&e&&m._UZ(0,"system-button-icon",2),2&e){const e=m.oxw();m.Q6J("title",e.language.getLabel(e.label))}}function Bt(e,t){if(1&e&&(m.TgZ(0,"span"),m._UZ(1,"system-label",3),m.qZA()),2&e){const e=m.oxw();m.xp6(1),m.Q6J("label",e.label)}}let Gt=(()=>{class ObjectActionSaveSendButton{language;metadata;model;view;actionemitter=new m.vpe;displayasicon=!1;actionconfig={};constructor(e,t,s,i){this.language=e,this.metadata=t,this.model=s,this.view=i}get disabled(){return this.model.isSaving}get hidden(){return!this.model.isEditing}get label(){return this.actionconfig.label&&""!==this.actionconfig.label?this.actionconfig.label:"LBL_SEND"}get toastLabel(){return this.actionconfig.toastlabel&&""!==this.actionconfig.toastlabel?this.actionconfig.toastlabel:"LBL_DATA_SENT"}execute(){this.model.isSaving||this.model.validate()&&this.model.saveAndSend(!0,this.toastLabel).subscribe((e=>{this.model.endEdit(),this.view.setViewMode(),this.actionemitter.emit("save")}))}static ɵfac=function(e){return new(e||ObjectActionSaveSendButton)(m.Y36(g.d),m.Y36(b.Pu),m.Y36(h.o),m.Y36(Oe.e))};static ɵcmp=m.Xpm({type:ObjectActionSaveSendButton,selectors:[["object-action-save-send-button"]],outputs:{actionemitter:"actionemitter"},decls:2,vars:2,consts:[["icon","email",3,"title",4,"ngIf"],[4,"ngIf"],["icon","email",3,"title"],[3,"label"]],template:function(e,t){1&e&&(m.YNc(0,jt,1,1,"system-button-icon",0),m.YNc(1,Bt,2,1,"span",1)),2&e&&(m.Q6J("ngIf",t.displayasicon),m.xp6(1),m.Q6J("ngIf",!t.displayasicon))},dependencies:[i.O5,w.J,I._],encapsulation:2})}return ObjectActionSaveSendButton})();function Pt(e,t){1&e&&m._UZ(0,"system-button-icon",2)}function Ht(e,t){1&e&&(m.TgZ(0,"span"),m._UZ(1,"system-label",3),m.qZA())}let zt=(()=>{class ObjectActionSaveButton{language;metadata;model;view;actionemitter=new m.vpe;displayasicon=!1;constructor(e,t,s,i){this.language=e,this.metadata=t,this.model=s,this.view=i}get disabled(){return this.model.isSaving}get hidden(){return!this.model.isEditing}execute(){this.model.isSaving||this.model.validate()&&this.model.save(!0).subscribe((e=>{this.model.endEdit(),this.view.setViewMode(),this.actionemitter.emit("save")}))}static ɵfac=function(e){return new(e||ObjectActionSaveButton)(m.Y36(g.d),m.Y36(b.Pu),m.Y36(h.o),m.Y36(Oe.e))};static ɵcmp=m.Xpm({type:ObjectActionSaveButton,selectors:[["object-action-save-button"]],outputs:{actionemitter:"actionemitter"},decls:2,vars:2,consts:[["system-title","LBL_SAVE","icon","save",4,"ngIf"],[4,"ngIf"],["system-title","LBL_SAVE","icon","save"],["label","LBL_SAVE"]],template:function(e,t){1&e&&(m.YNc(0,Pt,1,0,"system-button-icon",0),m.YNc(1,Ht,2,0,"span",1)),2&e&&(m.Q6J("ngIf",t.displayasicon),m.xp6(1),m.Q6J("ngIf",!t.displayasicon))},dependencies:[i.O5,w.J,I._,C.S],encapsulation:2})}return ObjectActionSaveButton})(),Vt=(()=>{class ObjectActionSaveRelatedButton{language;metadata;model;view;relatedmodels;actionemitter=new m.vpe;module="";saving=!1;constructor(e,t,s,i,n){this.language=e,this.metadata=t,this.model=s,this.view=i,this.relatedmodels=n}get hidden(){return!this.view.isEditMode()}execute(){if(!this.saving)if(this.model.validate()){this.saving=!0;let e=this.model.getDirtyFields();e.date_modified=this.model.getField("date_modified"),e.id=this.model.id,this.actionemitter.emit(!0),this.view.setViewMode(),this.relatedmodels.setItem(e).subscribe((e=>{this.model.endEdit(),this.saving=!1}),(e=>{this.view.setEditMode(),this.saving=!1}))}else this.saving=!1,this.model.edit().subscribe((e=>{e?this.execute():(this.model.cancelEdit(),this.view.setViewMode())}))}static ɵfac=function(e){return new(e||ObjectActionSaveRelatedButton)(m.Y36(g.d),m.Y36(b.Pu),m.Y36(h.o),m.Y36(Oe.e),m.Y36(kt.j))};static ɵcmp=m.Xpm({type:ObjectActionSaveRelatedButton,selectors:[["object-action-save-related-button"]],outputs:{actionemitter:"actionemitter"},decls:2,vars:0,consts:[["label","LBL_SAVE"]],template:function(e,t){1&e&&(m.TgZ(0,"span"),m._UZ(1,"system-label",0),m.qZA())},dependencies:[I._],encapsulation:2})}return ObjectActionSaveRelatedButton})();function $t(e,t){1&e&&m._UZ(0,"system-button-icon",2)}function Kt(e,t){1&e&&(m.TgZ(0,"span"),m._UZ(1,"system-label",3),m.qZA())}let Xt=(()=>{class ObjectActionNewrelatedButton{parent;language;metadata;model;relatedmodels;disabled=!0;actionconfig;displayasicon=!1;constructor(e,t,s,i,n){this.parent=e,this.language=t,this.metadata=s,this.model=i,this.relatedmodels=n}ngOnInit(){this.model.module=this.relatedmodels.relatedModule,this.model.module&&this.metadata.checkModuleAcl(this.model.module,"create")&&(!this.actionconfig?.required_model_state||this.model.checkModelState(this.actionconfig.required_model_state))&&(this.disabled=!1)}execute(){this.parent.getField("id")||this.parent.setField("id",this.parent.id),this.model.id="",this.model.addModel("",this.parent).subscribe((e=>{0!=e&&this.relatedmodels.addItems([e])}))}static ɵfac=function(e){return new(e||ObjectActionNewrelatedButton)(m.Y36(h.o,4),m.Y36(g.d),m.Y36(b.Pu),m.Y36(h.o),m.Y36(kt.j))};static ɵcmp=m.Xpm({type:ObjectActionNewrelatedButton,selectors:[["object-action-newrelated-button"]],features:[m._Bn([h.o])],decls:2,vars:2,consts:[["icon","add",4,"ngIf"],[4,"ngIf"],["icon","add"],["label","LBL_NEW"]],template:function(e,t){1&e&&(m.YNc(0,$t,1,0,"system-button-icon",0),m.YNc(1,Kt,2,0,"span",1)),2&e&&(m.Q6J("ngIf",t.displayasicon),m.xp6(1),m.Q6J("ngIf",!t.displayasicon))},dependencies:[i.O5,w.J,I._],encapsulation:2})}return ObjectActionNewrelatedButton})(),Wt=(()=>{class ObjectActionNewCopyRuleBeanButtonModelHelper{model;constructor(e){this.model=e}static ɵfac=function(e){return new(e||ObjectActionNewCopyRuleBeanButtonModelHelper)(m.Y36(h.o))};static ɵdir=m.lG2({type:ObjectActionNewCopyRuleBeanButtonModelHelper,selectors:[["object-action-new-copy-rule-bean-button-model-helper"]],features:[m._Bn([h.o])]})}return ObjectActionNewCopyRuleBeanButtonModelHelper})(),es=(()=>{class ObjectActionNewCopyRuleBeanButton{language;metadata;model;relatedmodels;child;parent={};disabled=!0;actionconfig={};constructor(e,t,s,i){this.language=e,this.metadata=t,this.model=s,this.relatedmodels=i}ngOnInit(){this.actionconfig.module&&this.metadata.checkModuleAcl(this.actionconfig.module,"create")&&(this.disabled=!1)}execute(){this.child.model.module=this.actionconfig.module;let e=[this.parent];this.relatedmodels&&this.relatedmodels.model&&e.push(this.relatedmodels.model),this.child.model.addModel("",e)}static ɵfac=function(e){return new(e||ObjectActionNewCopyRuleBeanButton)(m.Y36(g.d),m.Y36(b.Pu),m.Y36(h.o),m.Y36(kt.j,8))};static ɵcmp=m.Xpm({type:ObjectActionNewCopyRuleBeanButton,selectors:[["object-action-new-copy-rule-bean-button"]],viewQuery:function(e,t){if(1&e&&m.Gf(Wt,7),2&e){let e;m.iGM(e=m.CRH())&&(t.child=e.first)}},decls:3,vars:1,consts:[[3,"label"]],template:function(e,t){1&e&&(m.TgZ(0,"span"),m._UZ(1,"system-label",0),m.qZA(),m._UZ(2,"object-action-new-copy-rule-bean-button-model-helper")),2&e&&(m.xp6(1),m.Q6J("label",t.actionconfig.label))},dependencies:[I._,Wt],encapsulation:2})}return ObjectActionNewCopyRuleBeanButton})();var ts=s(88709),ss=s(64652);let is=(()=>{class ObjectActionSelectButton{metadata;language;modal;model;parent;relatedmodels;actionconfig={};disabled=!0;subscriptions=new B.w0;constructor(e,t,s,i,n,l){this.metadata=e,this.language=t,this.modal=s,this.model=i,this.parent=n,this.relatedmodels=l}ngOnInit(){this.model.module=this.relatedmodels.relatedModule,this.model.module&&this.metadata.checkModuleAcl(this.model.module,"list")&&(this.disabled=!1)}execute(){this.modal.openModal("ObjectModalModuleLookup").subscribe((e=>{if(e.instance.module=this.model.module,e.instance.multiselect=!0,e.instance.modulefilter=this.actionconfig.modulefilter,this.actionconfig.relatefilterfield){let t=this.metadata.getFieldDefs(this.model.module,this.actionconfig.relatefilterfield);t&&(e.instance.relatefilter={module:t.module,relationship:this.actionconfig.relatefilterrelationship,id:this.parent.getField(t.id_name),display:this.parent.getField(this.actionconfig.relatefilterfield),active:!!this.parent.getField(t.id_name),required:this.actionconfig.relatedfilterrequired})}e.instance.selectedItems.subscribe((e=>{this.addSelectedItems(e)}))}))}ngOnDestroy(){this.subscriptions.unsubscribe()}addSelectedItems(e){this.relatedmodels.addItems(e)}static ɵfac=function(e){return new(e||ObjectActionSelectButton)(m.Y36(b.Pu),m.Y36(g.d),m.Y36(V.o),m.Y36(h.o),m.Y36(h.o,4),m.Y36(kt.j))};static ɵcmp=m.Xpm({type:ObjectActionSelectButton,selectors:[["object-action-select-button"]],features:[m._Bn([h.o])],decls:2,vars:0,consts:[["label","LBL_SELECT"]],template:function(e,t){1&e&&(m.TgZ(0,"span"),m._UZ(1,"system-label",0),m.qZA())},dependencies:[I._],encapsulation:2})}return ObjectActionSelectButton})(),ns=(()=>{class ObjectActionBeanToMailButton{language;modal;model;viewContainerRef;constructor(e,t,s,i){this.language=e,this.modal=t,this.model=s,this.viewContainerRef=i}execute(){this.modal.openModal("ObjectActionMailModal",!0,this.viewContainerRef.injector).subscribe((e=>e.instance.parent=this.model))}static ɵfac=function(e){return new(e||ObjectActionBeanToMailButton)(m.Y36(g.d),m.Y36(V.o),m.Y36(h.o),m.Y36(m.s_b))};static ɵcmp=m.Xpm({type:ObjectActionBeanToMailButton,selectors:[["object-action-beantomail-button"]],decls:2,vars:0,consts:[["label","LBL_EMAIL"]],template:function(e,t){1&e&&(m.TgZ(0,"span"),m._UZ(1,"system-label",0),m.qZA())},dependencies:[I._],encapsulation:2})}return ObjectActionBeanToMailButton})();var ls=s(50323),os=s(83917),as=s(69774),ds=s(87693),rs=s(95681);let cs=(()=>{class ObjectFileActionMenu{broadcast;modelattachments;language;elementRef;modalservice;injector;router;navigationtab;toast;modal;file;constructor(e,t,s,i,n,l,o,a,d,r){this.broadcast=e,this.modelattachments=t,this.language=s,this.elementRef=i,this.modalservice=n,this.injector=l,this.router=o,this.navigationtab=a,this.toast=d,this.modal=r}get uploading(){return this.file.hasOwnProperty("uploadprogress")}getDropdownLocationClass(){let e=this.elementRef.nativeElement.getBoundingClientRect();if(window.innerHeight-e.bottom<100)return"slds-dropdown--bottom"}deleteFile(){this.modalservice.confirm(this.language.getLabel("QST_DELETE_FILE"),this.language.getLabel("QST_DELETE_FILE",null,"short")).subscribe((e=>{e&&this.modelattachments.deleteAttachment(this.file.id)}))}downloadFile(){this.modelattachments.downloadAttachment(this.file.id,this.file.name)}edit(){this.modalservice.openModal("SpiceAttachmentsEditModal",!0,this.injector).subscribe((e=>{e.instance.attachment=this.file,e.instance.inputData={text:this.file.text,display_name:this.file.display_name,category_ids:this.file.category_ids?this.file.category_ids.split(","):[]}}))}previewFile(){if(this.uploading)this.toast.sendToast("upload still in progress","info");else if(this.file.file_mime_type){let e=this.file.file_mime_type.toLowerCase().split("/");switch(e[0].trim()){case"image":if("svg+xml"===e[1])this.modal.openModal("SystemObjectPreviewModal").subscribe((e=>{e.instance.name=this.file.filename,e.instance.type=this.file.file_mime_type.toLowerCase(),this.modelattachments.getAttachment(this.file.id).subscribe({next:t=>{e.instance.data=atob(t)},error:t=>{e.instance.loadingerror=!0}})}));else this.modal.openModal("SystemImagePreviewModal").subscribe((e=>{e.instance.imgname=this.file.filename,e.instance.imgtype=this.file.file_mime_type.toLowerCase(),this.modelattachments.getAttachment(this.file.id).subscribe({next:t=>{e.instance.imgsrc="data:"+this.file.file_mime_type.toLowerCase()+";base64,"+t},error:t=>{e.instance.loadingerror=!0}})}));break;case"text":case"audio":case"video":this.modal.openModal("SystemObjectPreviewModal").subscribe((e=>{e.instance.name=this.file.filename,e.instance.type=this.file.file_mime_type.toLowerCase(),this.modelattachments.getAttachment(this.file.id).subscribe({next:t=>{e.instance.data=atob(t)},error:t=>{e.instance.loadingerror=!0}})}));break;case"application":if("pdf"===e[1])this.modal.openModal("SystemObjectPreviewModal").subscribe((e=>{e.instance.name=this.file.filename,e.instance.type=this.file.file_mime_type.toLowerCase(),this.modelattachments.getAttachment(this.file.id).subscribe({next:t=>{e.instance.data=atob(t)},error:t=>{e.instance.loadingerror=!0}})}));else{if("msg"===this.file.filename.split(".").splice(-1,1)[0].toLowerCase())this.modal.openModal("EmailPreviewModal",!0,this.injector).subscribe((e=>{e.instance.name=this.file.filename,e.instance.type=this.file.file_mime_type.toLowerCase(),e.instance.file=this.file}));else this.downloadFile()}break;default:this.downloadFile()}}}static ɵfac=function(e){return new(e||ObjectFileActionMenu)(m.Y36(ye.f),m.Y36(ls.H),m.Y36(g.d),m.Y36(m.SBq),m.Y36(V.o),m.Y36(m.zs3),m.Y36(o.F0),m.Y36(we.d),m.Y36(he.A),m.Y36(V.o))};static ɵcmp=m.Xpm({type:ObjectFileActionMenu,selectors:[["object-file-action-menu"]],inputs:{file:"file"},decls:21,vars:2,consts:[["system-dropdown-trigger","",1,"slds-dropdown-trigger","slds-dropdown-trigger--click"],["aria-haspopup","true",1,"slds-button","slds-button--icon-border-filled","slds-button--icon-x-small"],[3,"icon"],[1,"slds-dropdown","slds-dropdown--right",3,"ngClass"],["role","menu",1,"slds-dropdown__list"],["role","presentation",1,"slds-dropdown__item",3,"click"],["href","javascript:void(0);","role","menuitem","tabindex","0"],[1,"slds-truncate"],["label","LBL_EDIT"],["href","javascript:void(0);","role","menuitem","tabindex","-1"],["label","LBL_DOWNLOAD"],["href","javascript:void(0);","role","menuitem","tabindex","-2"],["label","LBL_DELETE"],["href","javascript:void(0);","role","menuitem","tabindex","-3"],["label","LBL_PREVIEW"]],template:function(e,t){1&e&&(m.TgZ(0,"div",0)(1,"button",1),m._UZ(2,"system-button-icon",2),m.qZA(),m.TgZ(3,"div",3)(4,"ul",4)(5,"li",5),m.NdJ("click",(function(){return t.edit()})),m.TgZ(6,"a",6)(7,"span",7),m._UZ(8,"system-label",8),m.qZA()()(),m.TgZ(9,"li",5),m.NdJ("click",(function(){return t.downloadFile()})),m.TgZ(10,"a",9)(11,"span",7),m._UZ(12,"system-label",10),m.qZA()()(),m.TgZ(13,"li",5),m.NdJ("click",(function(){return t.deleteFile()})),m.TgZ(14,"a",11)(15,"span",7),m._UZ(16,"system-label",12),m.qZA()()(),m.TgZ(17,"li",5),m.NdJ("click",(function(){return t.previewFile()})),m.TgZ(18,"a",13)(19,"span",7),m._UZ(20,"system-label",14),m.qZA()()()()()()),2&e&&(m.xp6(2),m.Q6J("icon","down"),m.xp6(1),m.Q6J("ngClass",t.getDropdownLocationClass()))},dependencies:[i.mk,w.J,I._,rs.l],encapsulation:2})}return ObjectFileActionMenu})();const us=["object-related-card-file",""];function ms(e,t){if(1&e&&m._UZ(0,"img",15),2&e){const e=m.oxw(2);m.Q6J("src","data:image/jpg;base64,"+e.file.thumbnail,m.LSH)}}function gs(e,t){if(1&e){const e=m.EpF();m.TgZ(0,"div",16),m.NdJ("click",(function(){m.CHM(e);const t=m.oxw(2);return m.KtG(t.openInTab())})),m._uU(1),m.qZA()}if(2&e){const e=m.oxw(2);m.Q6J("system-title",e.file.display_name),m.xp6(1),m.hij(" ",e.file.display_name," ")}}function hs(e,t){if(1&e){const e=m.EpF();m.TgZ(0,"div",16),m.NdJ("click",(function(){m.CHM(e);const t=m.oxw(2);return m.KtG(t.openInTab())})),m._uU(1),m.qZA()}if(2&e){const e=m.oxw(2);m.Q6J("system-title",e.file.filename),m.xp6(1),m.hij(" ",e.file.filename," ")}}function ps(e,t){if(1&e&&(m.TgZ(0,"div",21),m._uU(1),m.qZA()),2&e){const e=m.oxw(3);m.Q6J("system-title",e.file.filename),m.xp6(1),m.hij(" ",e.file.filename," ")}}function fs(e,t){if(1&e&&(m.TgZ(0,"div",17)(1,"ul",18)(2,"li",19),m._uU(3),m.qZA(),m.TgZ(4,"li",19),m._uU(5),m.qZA()(),m.YNc(6,ps,2,2,"div",20),m.qZA()),2&e){const e=m.oxw(2);m.xp6(2),m.Q6J("system-title",e.filedate),m.xp6(1),m.Oqu(e.filedate),m.xp6(1),m.Q6J("system-title",e.humanFileSize),m.xp6(1),m.Oqu(e.humanFileSize),m.xp6(1),m.Q6J("ngIf",!!e.file.display_name)}}function bs(e,t){if(1&e&&(m.TgZ(0,"div",22)(1,"div",23)(2,"span",24)(3,"span",25),m._uU(4,"Progress: 25%"),m.qZA()()(),m.TgZ(5,"div",26),m._uU(6),m.qZA()()),2&e){const e=m.oxw(2);m.xp6(2),m.Q6J("ngStyle",e.progressbarstyle),m.xp6(4),m.hij(" ",e.file.uploadprogress," % ")}}function _s(e,t){if(1&e&&(m.TgZ(0,"div",27),m._UZ(1,"object-file-action-menu",28),m.qZA()),2&e){const e=m.oxw(2);m.xp6(1),m.Q6J("file",e.file)}}function vs(e,t){if(1&e){const e=m.EpF();m.TgZ(0,"div",2)(1,"figure",3)(2,"a",4),m.NdJ("click",(function(){m.CHM(e);const t=m.oxw();return m.KtG(t.openInTab())})),m.YNc(3,ms,1,1,"img",5),m.qZA(),m.TgZ(4,"figcaption",6)(5,"div",7)(6,"div",8),m._UZ(7,"system-file-icon",9),m.qZA(),m.TgZ(8,"div",10),m.YNc(9,gs,2,2,"div",11),m.YNc(10,hs,2,2,"div",11),m.YNc(11,fs,7,5,"div",12),m.YNc(12,bs,7,2,"div",13),m.qZA()()()(),m.YNc(13,_s,2,1,"div",14),m.qZA()}if(2&e){const e=m.oxw();m.xp6(3),m.Q6J("ngIf",e.file.thumbnail),m.xp6(4),m.Q6J("filename",e.file.filename)("filemimetype",e.file.file_mime_type),m.xp6(2),m.Q6J("ngIf",!!e.file.display_name),m.xp6(1),m.Q6J("ngIf",!e.file.display_name),m.xp6(1),m.Q6J("ngIf",!e.uploading),m.xp6(1),m.Q6J("ngIf",e.uploading),m.xp6(1),m.Q6J("ngIf",!e.uploading)}}function ys(e,t){if(1&e&&m._UZ(0,"system-file-icon",9),2&e){const e=m.oxw(2);m.Q6J("filename",e.file.filename)("filemimetype",e.file.file_mime_type)}}function xs(e,t){if(1&e&&(m.TgZ(0,"div"),m._UZ(1,"img",15),m.qZA()),2&e){const e=m.oxw(2);m.xp6(1),m.Q6J("src","data:image/jpg;base64,"+e.file.thumbnail,m.LSH)}}function ws(e,t){if(1&e&&(m.TgZ(0,"a",39),m._uU(1),m.qZA()),2&e){const e=m.oxw(2);m.xp6(1),m.hij(" ",e.file.display_name," ")}}function Zs(e,t){if(1&e&&(m.TgZ(0,"a",39),m._uU(1),m.qZA()),2&e){const e=m.oxw(2);m.xp6(1),m.hij(" ",e.file.filename," ")}}function Ts(e,t){if(1&e&&(m.TgZ(0,"div",40),m._UZ(1,"object-file-action-menu",28),m.qZA()),2&e){const e=m.oxw(2);m.xp6(1),m.Q6J("file",e.file)}}function Cs(e,t){if(1&e&&(m.TgZ(0,"div",21),m._uU(1),m.qZA()),2&e){const e=m.oxw(3);m.Q6J("system-title",e.file.filename),m.xp6(1),m.hij(" ",e.file.filename," ")}}function ks(e,t){if(1&e&&(m.TgZ(0,"div",41)(1,"ul",18)(2,"li",19),m._uU(3),m.qZA(),m.TgZ(4,"li",19),m._uU(5),m.qZA()(),m.YNc(6,Cs,2,2,"div",20),m.qZA()),2&e){const e=m.oxw(2);m.xp6(2),m.Q6J("system-title",e.filedate),m.xp6(1),m.Oqu(e.filedate),m.xp6(1),m.Q6J("system-title",e.humanFileSize),m.xp6(1),m.Oqu(e.humanFileSize),m.xp6(1),m.Q6J("ngIf",!!e.file.display_name)}}function As(e,t){if(1&e&&(m.TgZ(0,"div",22)(1,"div",23)(2,"span",24)(3,"span",25),m._uU(4,"Progress: 25%"),m.qZA()()(),m.TgZ(5,"div",26),m._uU(6),m.qZA()()),2&e){const e=m.oxw(2);m.xp6(2),m.Q6J("ngStyle",e.progressbarstyle),m.xp6(4),m.hij(" ",e.file.uploadprogress," % ")}}function Ls(e,t){if(1&e){const e=m.EpF();m.TgZ(0,"div",29)(1,"div",30),m.YNc(2,ys,1,2,"system-file-icon",31),m.YNc(3,xs,2,1,"div",32),m.qZA(),m.TgZ(4,"div",33)(5,"div",22)(6,"h3",34),m.NdJ("click",(function(){m.CHM(e);const t=m.oxw();return m.KtG(t.openInTab())})),m.YNc(7,ws,2,1,"a",35),m.YNc(8,Zs,2,1,"ng-template",null,36,m.W1O),m.qZA(),m.YNc(10,Ts,2,1,"div",37),m.qZA(),m.YNc(11,ks,7,5,"div",38),m.YNc(12,As,7,2,"div",13),m.qZA()()}if(2&e){const e=m.MAs(9),t=m.oxw();m.xp6(2),m.Q6J("ngIf",!t.file.thumbnail),m.xp6(1),m.Q6J("ngIf",t.file.thumbnail),m.xp6(3),m.Q6J("system-title",t.file.text),m.xp6(1),m.Q6J("ngIf",!!t.file.display_name)("ngIfElse",e),m.xp6(3),m.Q6J("ngIf",!t.uploading),m.xp6(1),m.Q6J("ngIf",!t.uploading),m.xp6(1),m.Q6J("ngIf",t.uploading)}}let Is=(()=>{class ObjectRelatedCardFile{modelattachments;userpreferences;modal;toast;helper;injector;navigationtab;router;file={};bigThumbnail=!1;disabled=!1;constructor(e,t,s,i,n,l,o,a){this.modelattachments=e,this.userpreferences=t,this.modal=s,this.toast=i,this.helper=n,this.injector=l,this.navigationtab=o,this.router=a}get humanFileSize(){return this.modelattachments.humanFileSize(this.file.filesize)}get filedate(){return this.file.date?this.file.date.format(this.userpreferences.getDateFormat()):""}get uploading(){return this.file.hasOwnProperty("uploadprogress")}get progressbarstyle(){return{width:this.file.uploadprogress+"%"}}downloadFile(){this.uploading||this.modelattachments.downloadAttachment(this.file.id,this.file.filename)}openInTab(){if(this.disabled)return;let e=this.file.file_mime_type.toLowerCase().split("/");const t="application"==e[0]&&"pdf"!=e[1]&&"msg"!=e[1],s="text"==e[0]&&"csv"==e[1];if(t||s)return this.downloadFile();let i="";this.navigationtab?.tabid&&(i="/tab/"+this.navigationtab.tabid),this.router.navigate([`${i}/attachment/${this.file.id}/${this.modelattachments.module}/${this.modelattachments.id}`])}static ɵfac=function(e){return new(e||ObjectRelatedCardFile)(m.Y36(ls.H),m.Y36(L.z),m.Y36(V.o),m.Y36(he.A),m.Y36(at._),m.Y36(m.zs3),m.Y36(we.d),m.Y36(o.F0))};static ɵcmp=m.Xpm({type:ObjectRelatedCardFile,selectors:[["","object-related-card-file",""]],inputs:{file:"file",bigThumbnail:"bigThumbnail",disabled:"disabled"},attrs:us,decls:3,vars:2,consts:[["class","slds-file slds-file_card slds-has-title slds-m-left--small","style","width: 300px",4,"ngIf","ngIfElse"],["smallThumbnailContainer",""],[1,"slds-file","slds-file_card","slds-has-title","slds-m-left--small",2,"width","300px"],[2,"height","300px"],["href","javascript:void(0)",1,"slds-file__crop",2,"padding-top","245px",3,"click"],[3,"src",4,"ngIf"],[1,"slds-file__title","slds-file__title_card","slds-file-has-actions",2,"height","55px"],[1,"slds-media","slds-media_small","slds-media_center","slds-size--1-of-1"],[1,"slds-media__figure","slds-line-height_reset"],["divClass","","size","'small'",3,"filename","filemimetype"],[1,"slds-media__body"],["class","slds-file__text slds-truncate",3,"system-title","click",4,"ngIf"],["class","slds-tile__detail slds-text-body--small slds-truncate",4,"ngIf"],["class","slds-grid slds-grid_vertical-align-center slds-grid--align-spread slds-has-flexi-truncate",4,"ngIf"],["class","slds-file__actions-menu",4,"ngIf"],[3,"src"],[1,"slds-file__text","slds-truncate",3,"system-title","click"],[1,"slds-tile__detail","slds-text-body--small","slds-truncate"],[1,"slds-list--horizontal","slds-has-dividers--left"],[1,"slds-item",3,"system-title"],["class","slds-text-color--inverse-weak slds-truncate",3,"system-title",4,"ngIf"],[1,"slds-text-color--inverse-weak","slds-truncate",3,"system-title"],[1,"slds-grid","slds-grid_vertical-align-center","slds-grid--align-spread","slds-has-flexi-truncate"],[1,"slds-progress-bar"],[1,"slds-progress-bar__value",3,"ngStyle"],[1,"slds-assistive-text"],[1,"slds-text-align--right",2,"width","50px"],[1,"slds-file__actions-menu"],[3,"file"],[1,"slds-media","slds-truncate",2,"width","300px"],[1,"slds-m-right--x-small","slds-align--absolute-center",2,"width","30px","height","30px"],["divClass","","size","'small'",3,"filename","filemimetype",4,"ngIf"],[4,"ngIf"],[1,"slds-media__body",2,"width","260px"],[1,"slds-truncate","slds-text-heading--x-small","slds-p-right--xxx-small",3,"system-title","click"],["href","javascript:void(0);",4,"ngIf","ngIfElse"],["fileNameContainer",""],["class","slds-shrink-none",4,"ngIf"],["class","slds-tile__detail slds-text-body--small",4,"ngIf"],["href","javascript:void(0);"],[1,"slds-shrink-none"],[1,"slds-tile__detail","slds-text-body--small"]],template:function(e,t){if(1&e&&(m.YNc(0,vs,14,8,"div",0),m.YNc(1,Ls,13,8,"ng-template",null,1,m.W1O)),2&e){const e=m.MAs(2);m.Q6J("ngIf",t.bigThumbnail)("ngIfElse",e)}},dependencies:[i.O5,i.PC,ds.T,C.S,cs],encapsulation:2})}return ObjectRelatedCardFile})();const Ss=["fileupload"];function Ms(e,t){if(1&e&&(m.TgZ(0,"a",16)(1,"span",17),m._UZ(2,"system-label",18),m._uU(3),m.qZA()()),2&e){const e=m.oxw();m.xp6(2),m.Q6J("label",e.componentconfig.label?e.componentconfig.label+"":"LBL_FILES"),m.xp6(1),m.AsE(" (",e.filteredFiles.length,"/",e.modelattachments.files.length,")")}}function Js(e,t){if(1&e&&(m.TgZ(0,"span",17),m._UZ(1,"system-label",18),m._uU(2),m.qZA()),2&e){const e=m.oxw();m.xp6(1),m.Q6J("label",e.componentconfig.label?e.componentconfig.label+"":"LBL_FILES"),m.xp6(1),m.AsE(" (",e.filteredFiles.length,"/",e.modelattachments.files.length,")")}}function Os(e,t){if(1&e){const e=m.EpF();m.TgZ(0,"system-utility-icon",19),m.NdJ("click",(function(t){m.CHM(e);const s=m.oxw();return m.KtG(s.toggleOpen(t))})),m.qZA()}if(2&e){const e=m.oxw();m.Q6J("@animateicon",e.isopen?"open":"closed")}}function Ns(e,t){if(1&e){const e=m.EpF();m.TgZ(0,"div",20)(1,"div",21),m._UZ(2,"system-utility-icon",22),m.TgZ(3,"input",23),m.NdJ("ngModelChange",(function(t){m.CHM(e);const s=m.oxw();return m.KtG(s.setFilteredFiles("input",t))})),m.qZA()()()}if(2&e){const e=m.oxw();m.xp6(3),m.Q6J("ngModel",e.filterTerm)}}function Fs(e,t){1&e&&(m.TgZ(0,"div",31),m._UZ(1,"system-utility-icon",32),m.qZA())}function qs(e,t){if(1&e&&(m.TgZ(0,"option",33),m._UZ(1,"system-label",18),m.qZA()),2&e){const e=t.$implicit;m.Q6J("value",e.id),m.xp6(1),m.Q6J("label",e.label)}}function Es(e,t){if(1&e){const e=m.EpF();m.TgZ(0,"div",24),m.YNc(1,Fs,2,0,"div",25),m.TgZ(2,"div",26)(3,"select",27),m.NdJ("ngModelChange",(function(t){m.CHM(e);const s=m.oxw();return m.KtG(s.setFilteredFiles("category",t))})),m.TgZ(4,"option",28),m._UZ(5,"system-label",29),m.qZA(),m.YNc(6,qs,2,2,"option",30),m.qZA()()()}if(2&e){const e=m.oxw();m.xp6(1),m.Q6J("ngIf",e.width>600),m.xp6(2),m.Q6J("ngModel",e.selectedCategoryId),m.xp6(3),m.Q6J("ngForOf",e.categories)}}function Ys(e,t){if(1&e){const e=m.EpF();m.TgZ(0,"button",34),m.NdJ("click",(function(){m.CHM(e);const t=m.oxw();return m.KtG(t.selectFile())})),m._UZ(1,"system-utility-icon",35),m.qZA()}}function Ds(e,t){if(1&e&&m._UZ(0,"div",40),2&e){const e=t.$implicit,s=m.oxw(2);m.Q6J("file",e)("bigThumbnail",null==s.componentconfig?null:s.componentconfig.bigThumbnail)}}function Us(e,t){1&e&&(m.TgZ(0,"div",41),m._UZ(1,"system-spinner"),m.qZA())}function Qs(e,t){if(1&e&&(m.TgZ(0,"div",36)(1,"div",37),m.YNc(2,Ds,1,2,"div",38),m.qZA(),m.YNc(3,Us,2,0,"div",39),m.qZA()),2&e){const e=m.oxw();m.Q6J("@displaycard",void 0),m.xp6(2),m.Q6J("ngForOf",e.filteredFiles),m.xp6(1),m.Q6J("ngIf",e.modelattachments.loading)}}let Rs=(()=>{class ObjectRelatedlistFiles{modelattachments;language;model;renderer;toast;footer;metadata;backend;broadcast;elementRef;configurationService;modal;injector;cdRef;files=[];filteredFiles=[];fileupload;componentconfig={};isopen=!0;selectedCategoryId="";defaultCategoryId="";broadcastSubscription={};filterTerm="";categories=[];filterTimeout;subscriptions=new B.w0;constructor(e,t,s,i,n,l,o,a,d,r,c,u,m,g){this.modelattachments=e,this.language=t,this.model=s,this.renderer=i,this.toast=n,this.footer=l,this.metadata=o,this.backend=a,this.broadcast=d,this.elementRef=r,this.configurationService=c,this.modal=u,this.injector=m,this.cdRef=g,this.broadcastSubscription=this.broadcast.message$.subscribe((e=>{this.handleMessage(e)})),this.componentconfig.hasOwnProperty("defaultcategory")&&this.componentconfig.defaultcategory&&(this.defaultCategoryId=this.componentconfig.defaultcategory),this.defaultCategoryId||this.selectedCategoryId||(this.selectedCategoryId="*")}ngAfterViewInit(){this.setModelData(),setTimeout((()=>this.loadFiles()),10),this.subscriptions.add(this.broadcast.message$.subscribe((e=>this.handleMessage(e))))}ngOnChanges(e){this.componentconfig.hasOwnProperty("defaultcategory")&&this.componentconfig.defaultcategory&&(this.defaultCategoryId=this.componentconfig.defaultcategory),this.defaultCategoryId||this.selectedCategoryId||(this.selectedCategoryId="*")}loadCategories(){if(!this.selectedCategoryId&&this.defaultCategoryId&&(this.selectedCategoryId=this.defaultCategoryId),this.configurationService.getData("spiceattachments_categories"))return this.categories=this.configurationService.getData("spiceattachments_categories");this.backend.getRequest("common/spiceattachments/categories/"+this.model.module).subscribe((e=>{e&&Array.isArray(e)&&(this.categories=e,this.configurationService.setData("spiceattachments_categories",e))}))}handleMessage(e){switch("model.merge"==e.messagetype&&e.messagedata.module==this.model.module&&e.messagedata.id==this.model.id&&this.loadFiles(),e.messagetype){case"attachments.loaded":e.messagedata.reload&&this.setFilteredFiles("category",this.selectedCategoryId);break;case"attachments.cloned":e.messagedata.clonedFiles.forEach((e=>{this.filteredFiles.find((t=>t.id==e.id))||(this.filteredFiles.push(e),this.cdRef.detectChanges())}))}}loadFiles(){this.files.length>0&&this.doupload(this.files),this.modelattachments.getAttachments().subscribe((e=>{this.filteredFiles=e,this.loadCategories(),this.setFilteredFiles("category",this.selectedCategoryId)}))}setModelData(){this.modelattachments.module=this.model.module,this.modelattachments.id=this.model.id}toggleOpen(e){e.stopPropagation(),this.isopen=!this.isopen}get width(){return this.elementRef.nativeElement.getBoundingClientRect().width}preventdefault(e){(e.dataTransfer.items.length>=1&&this.hasOneItemsFile(e.dataTransfer.items)||e.dataTransfer.files.length>0)&&(e.preventDefault(),e.stopPropagation(),e.dataTransfer.dropEffect="copy")}hasOneItemsFile(e){for(let t of e)if("file"==t.kind)return!0;return!1}onDrop(e){this.preventdefault(e);let t=e.dataTransfer.files;t&&t.length>=1&&this.doupload(t)}fileDrop(e){if(this.componentconfig.disableupload&&!0===this.componentconfig.disableupload)return this.toast.sendToast(this.language.getLabel("LBL_UPLOAD_IS_DISABLED"),"error"),!1;e&&e.length>=1&&this.doupload(e)}selectFile(){let e=new MouseEvent("click",{bubbles:!0});this.fileupload.element.nativeElement.dispatchEvent(e)}uploadFile(){let e=this.fileupload.element.nativeElement.files;this.doupload(e)}doupload(e){if(this.componentconfig.revComponent&&1!=e.length)return this.toast.sendToast(this.language.getLabel("LBL_ONE_FILE_ONLY"),"error"),!1;!this.selectedCategoryId&&this.defaultCategoryId&&(this.selectedCategoryId=this.defaultCategoryId),this.modelattachments.uploadAttachmentsBase64(e,"*"==this.selectedCategoryId?this.defaultCategoryId:this.selectedCategoryId).subscribe({next:t=>{this.componentconfig.revComponent&&this.openRevisionModal(e)},error:()=>{this.toast.sendToast(this.language.getLabel("LBL_ERROR"),"error")}})}openRevisionModal(e){let t=this.modal.await(this.language.getLabel("LBL_LOADING"));this.backend.getRequest("common/spiceattachments/module/"+this.model.module+"/"+this.model.id).subscribe((s=>{t.emit(!0),s?this.modal.openModal("AgreementsAddRevisionModal",!0,this.injector).subscribe((t=>{t.instance.files=e,t.instance.revComponent=this.componentconfig,t.instance.spiceattachment=s[0],t.instance.responseSubject.subscribe({next:e=>{e&&(this.toast.sendToast("MSG_REVISION_CREATED","success"),this.setModelData())}})})):this.toast.sendToast(this.language.getLabel("LBL_ERROR"),"error")}))}setFilteredFiles(e,t){switch(e){case"category":this.selectedCategoryId=t,this.filteredFiles="*"!=t&&t?this.modelattachments.files.filter((e=>!!e.category_ids&&e.category_ids.includes(t))):this.modelattachments.files;break;case"input":const e=t.toLowerCase();this.filterTerm=t,window.clearTimeout(this.filterTimeout),this.filterTimeout=window.setTimeout((()=>{this.filteredFiles=0==t.length?this.modelattachments.files:this.modelattachments.files.filter((t=>t.filename.toLowerCase().includes(e)||!!t.display_name&&t.display_name.toLowerCase().includes(e)||!!t.text&&t.text.toLowerCase().includes(e)))}),600)}}toggleBigThumbnail(){this.componentconfig||(this.componentconfig={}),this.componentconfig.bigThumbnail=!this.componentconfig.bigThumbnail}ngOnDestroy(){this.broadcastSubscription.unsubscribe()}static ɵfac=function(e){return new(e||ObjectRelatedlistFiles)(m.Y36(ls.H),m.Y36(g.d),m.Y36(h.o),m.Y36(m.Qsj),m.Y36(he.A),m.Y36(os.M),m.Y36(b.Pu),m.Y36(W.y),m.Y36(ye.f),m.Y36(m.SBq),m.Y36(v.C),m.Y36(V.o),m.Y36(m.zs3),m.Y36(m.sBO))};static ɵcmp=m.Xpm({type:ObjectRelatedlistFiles,selectors:[["object-relatedlist-files"]],viewQuery:function(e,t){if(1&e&&m.Gf(Ss,7,m.s_b),2&e){let e;m.iGM(e=m.CRH())&&(t.fileupload=e.first)}},inputs:{files:"files",componentconfig:"componentconfig"},features:[m._Bn([ls.H]),m.TTD],decls:17,vars:10,consts:[[1,"slds-card","slds-card_boundary","slds-m-bottom--medium",3,"system-drop-file"],[1,"slds-card__header","slds-grid"],[1,"slds-size--1-of-1","slds-grid","slds-grid--vertical-align-center"],[3,"icon","size"],[1,"slds-media__body","slds-truncate","slds-grid","slds-grid--vertical-align-center"],["href","javascript:void(0);","class","slds-text-link--reset",4,"ngIf"],["class","slds-text-heading--small",4,"ngIf"],["class","slds-m-horizontal--xx-small","icon","up","size","x-small",3,"click",4,"ngIf"],["system-title","LBL_TOGGLE_BIG_THUMBNAIL",1,"slds-col--bump-left","slds-button","slds-button--icon-border","slds-m-right--xxx-small",3,"click"],["size","x-small",3,"icon"],["class","slds-form-element slds-m-horizontal--xxx-small",4,"ngIf"],["class","slds-form-element slds-m-horizontal--xxx-small slds-grid slds-grid--vertical-align-center",4,"ngIf"],["class","slds-m-left--xxx-small slds-button slds-button--icon-border","system-title","LBL_UPLOAD",3,"click",4,"ngIf"],["type","file","multiple","",2,"display","none",3,"click","change"],["fileupload",""],["class","slds-card__body slds-card__body_inner",4,"ngIf"],["href","javascript:void(0);",1,"slds-text-link--reset"],[1,"slds-text-heading--small"],[3,"label"],["icon","up","size","x-small",1,"slds-m-horizontal--xx-small",3,"click"],[1,"slds-form-element","slds-m-horizontal--xxx-small"],[1,"slds-form-element__control","slds-input-has-icon","slds-input-has-icon_left-right"],["icon","search","addclasses","slds-input__icon slds-input__icon--left"],["type","text",1,"slds-input",3,"ngModel","ngModelChange"],[1,"slds-form-element","slds-m-horizontal--xxx-small","slds-grid","slds-grid--vertical-align-center"],["system-title","LBL_CATEGORIES","class","slds-m-horizontal--xxx-small",4,"ngIf"],[1,"slds-select_container","slds-m-horizontal--xxx-small"],[1,"slds-select",2,"min-width","70px",3,"ngModel","ngModelChange"],["value","*"],["label","LBL_ALL"],[3,"value",4,"ngFor","ngForOf"],["system-title","LBL_CATEGORIES",1,"slds-m-horizontal--xxx-small"],["icon","tile_card_list","size","x-small"],[3,"value"],["system-title","LBL_UPLOAD",1,"slds-m-left--xxx-small","slds-button","slds-button--icon-border",3,"click"],["size","x-small","icon","upload"],[1,"slds-card__body","slds-card__body_inner"],[1,"slds-card__body--inner","slds-grid","slds-wrap","slds-grid--pull-padded"],["object-related-card-file","","class","slds-tile slds-card__tile slds-p-horizontal--small slds-hint-parent",3,"file","bigThumbnail",4,"ngFor","ngForOf"],["class","slds-p-around--large slds-align--absolute-center",4,"ngIf"],["object-related-card-file","",1,"slds-tile","slds-card__tile","slds-p-horizontal--small","slds-hint-parent",3,"file","bigThumbnail"],[1,"slds-p-around--large","slds-align--absolute-center"]],template:function(e,t){if(1&e){const e=m.EpF();m.TgZ(0,"div",0),m.NdJ("system-drop-file",(function(e){return t.fileDrop(e)})),m.TgZ(1,"div",1)(2,"header",2),m._UZ(3,"system-icon",3),m.TgZ(4,"div",4)(5,"h2"),m.YNc(6,Ms,4,3,"a",5),m.YNc(7,Js,3,3,"span",6),m.qZA(),m.YNc(8,Os,1,1,"system-utility-icon",7),m.qZA(),m.TgZ(9,"button",8),m.NdJ("click",(function(){return t.toggleBigThumbnail()})),m._UZ(10,"system-utility-icon",9),m.qZA(),m.YNc(11,Ns,4,1,"div",10),m.YNc(12,Es,7,3,"div",11),m.YNc(13,Ys,2,0,"button",12),m.qZA(),m.TgZ(14,"input",13,14),m.NdJ("click",(function(){m.CHM(e);const t=m.MAs(15);return m.KtG(t.value=null)}))("change",(function(){return t.uploadFile()})),m.qZA()(),m.YNc(16,Qs,4,3,"div",15),m.qZA()}2&e&&(m.xp6(3),m.Q6J("icon","file")("size","small"),m.xp6(3),m.Q6J("ngIf",!t.componentconfig.alwaysExpanded),m.xp6(1),m.Q6J("ngIf",t.componentconfig.alwaysExpanded),m.xp6(1),m.Q6J("ngIf",t.modelattachments.files.length>0&&!t.componentconfig.alwaysExpanded),m.xp6(2),m.Q6J("icon",null!=t.componentconfig&&t.componentconfig.bigThumbnail?"file":"ad_set"),m.xp6(1),m.Q6J("ngIf",!t.componentconfig.disableFilter&&t.width>500),m.xp6(1),m.Q6J("ngIf",!t.componentconfig.disableCategories),m.xp6(1),m.Q6J("ngIf",!t.componentconfig.disableupload),m.xp6(3),m.Q6J("ngIf",t.isopen))},dependencies:[i.sg,i.O5,l.YN,l.Kr,l.Fj,l.EJ,l.JJ,l.On,Z.f,I._,Mt.W,S.r,as.M,C.S,Is],encapsulation:2,data:{animation:[(0,f.X$)("animateicon",[(0,f.SB)("open",(0,f.oB)({transform:"scale(1, 1)"})),(0,f.SB)("closed",(0,f.oB)({transform:"scale(1, -1)"})),(0,f.eR)("open => closed",[(0,f.jt)(".5s")]),(0,f.eR)("closed => open",[(0,f.jt)(".5s")])]),(0,f.X$)("displaycard",[(0,f.eR)(":enter",[(0,f.oB)({opacity:0,height:"0px",overflow:"hidden"}),(0,f.jt)(".5s",(0,f.oB)({height:"*",opacity:1})),(0,f.oB)({overflow:"unset"})]),(0,f.eR)(":leave",[(0,f.oB)({overflow:"hidden"}),(0,f.jt)(".5s",(0,f.oB)({height:"0px",opacity:0}))])])]}})}return ObjectRelatedlistFiles})();var js=s(9062);let Bs=(()=>{class ObjectActionMailModal{language;metadata;model;view;backend;prefs;modal;parent=null;self=null;sending=!1;titlelabel="LBL_BEANTOMAIL";mailsent=new m.vpe;fieldset;constructor(e,t,s,i,n,l,o){this.language=e,this.metadata=t,this.model=s,this.view=i,this.backend=n,this.prefs=l,this.modal=o,this.model.module="Emails",this.view.isEditable=!0,this.view.setEditMode();let a=this.metadata.getComponentConfig("ObjectActionMailModal");this.fieldset=a.fieldset}ngOnInit(){this.model.initializeModel(this.parent),this.setParentData()}get isDisabled(){let e=this.model.getFieldValue("recipient_addresses"),t=this.model.getFieldValue("mailbox_id"),s=this.model.getFieldValue("name"),i=this.model.getFieldValue("body"),n=e?e.find((e=>"to"==e.address_type)):void 0;return!(s&&i&&t&&e&&n)||this.sending}setParentData(){this.model.setField("parent_type",this.parent.module),this.model.setField("parent_id",this.parent.id),this.model.setField("parent_name",this.parent.data.summary_text)}close(){this.self.destroy()}sendEmail(){this.modal.openModal("SystemLoadingModal",!1).subscribe((e=>{e.instance.messagelabel="LBL_SENDING",this.sending=!0,this.model.setFields({type:"out",to_be_sent:"1",from_addr:this.model.getField("from_addr_name"),to_addrs:this.model.getField("to_addrs_names")}),this.model.save().subscribe((t=>{e.instance.self.destroy(),this.mailsent.emit(!0),this.close()}),(t=>{e.instance.self.destroy(),this.sending=!1}))}))}static ɵfac=function(e){return new(e||ObjectActionMailModal)(m.Y36(g.d),m.Y36(b.Pu),m.Y36(h.o),m.Y36(Oe.e),m.Y36(W.y),m.Y36(L.z),m.Y36(V.o))};static ɵcmp=m.Xpm({type:ObjectActionMailModal,selectors:[["object-action-mail-modal"]],inputs:{parent:"parent",titlelabel:"titlelabel"},outputs:{mailsent:"mailsent"},features:[m._Bn([Oe.e,h.o])],decls:11,vars:3,consts:[["size","large"],[3,"close"],[3,"label"],["direction","vertical",3,"fieldset"],[1,"slds-p-around_xx-small"],[1,"slds-button","slds-button--neutral",3,"click"],["label","LBL_CANCEL"],[1,"slds-button","slds-button--brand",3,"disabled","click"],["label","LBL_SEND"]],template:function(e,t){1&e&&(m.TgZ(0,"system-modal",0)(1,"system-modal-header",1),m.NdJ("close",(function(){return t.close()})),m._UZ(2,"system-label",2),m.qZA(),m.TgZ(3,"system-modal-content"),m._UZ(4,"object-record-fieldset",3)(5,"object-relatedlist-files",4),m.qZA(),m.TgZ(6,"system-modal-footer")(7,"button",5),m.NdJ("click",(function(){return t.close()})),m._UZ(8,"system-label",6),m.qZA(),m.TgZ(9,"button",7),m.NdJ("click",(function(){return t.sendEmail()})),m._UZ(10,"system-label",8),m.qZA()()()),2&e&&(m.xp6(2),m.Q6J("label",t.titlelabel),m.xp6(2),m.Q6J("fieldset",t.fieldset),m.xp6(5),m.Q6J("disabled",t.isDisabled))},dependencies:[I._,Fe.j,qe.x,Ee.p,Ye.y,Rs,js.d],encapsulation:2})}return ObjectActionMailModal})();var Gs=s(77579),Ps=s(69751),Hs=s(11604),zs=s(4663),Vs=s(7763);function $s(e,t){if(1&e){const e=m.EpF();m.TgZ(0,"button",9),m.NdJ("click",(function(){m.CHM(e);const t=m.oxw();return m.KtG(t.navigateDetails())})),m._UZ(1,"system-button-icon",10),m.qZA()}}function Ks(e,t){if(1&e&&(m.ynx(0),m.TgZ(1,"dt",11)(2,"span",12),m._UZ(3,"system-label-fieldname",13),m.qZA()(),m.TgZ(4,"dd",14),m._UZ(5,"field-container",15),m.qZA(),m.BQk()),2&e){const e=t.$implicit,s=m.oxw();m.xp6(3),m.Q6J("module",s.model.module)("field",e.field),m.xp6(2),m.Q6J("field",e.field)("fieldconfig",e.fieldconfig)("fielddisplayclass","slds-truncate")}}let Xs=(()=>{class ObjectRelatedDuplicateTile{model;modal;view;language;metadata;enableLink=!0;enableButtonLink=!1;fieldset="";constructor(e,t,s,i,n){this.model=e,this.modal=t,this.view=s,this.language=i,this.metadata=n,this.view.displayLabels=!1}ngOnInit(){let e=this.metadata.getComponentConfig("ObjectRelatedDuplicateTile",this.model.module);this.fieldset=e.fieldset}getFields(){return this.metadata.getFieldSetFields(this.fieldset)}navigateDetails(){this.modal.closeAllModals(),this.model.goDetail()}static ɵfac=function(e){return new(e||ObjectRelatedDuplicateTile)(m.Y36(h.o),m.Y36(V.o),m.Y36(Oe.e),m.Y36(g.d),m.Y36(b.Pu))};static ɵcmp=m.Xpm({type:ObjectRelatedDuplicateTile,selectors:[["object-related-duplicate-tile"]],inputs:{enableLink:"enableLink",enableButtonLink:"enableButtonLink"},features:[m._Bn([Oe.e])],decls:11,vars:5,consts:[[1,"slds-tile","slds-box","slds-media","slds-card__tile","slds-p-vertical--small","slds-p-horizontal--small","slds-hint-parent"],[3,"module","size"],[1,"slds-media__body"],[1,"slds-grid","slds-grid--align-spread","slds-has-flexi-truncate"],[1,"slds-truncate","slds-text-heading--small","slds-m-bottom--small"],["class","slds-button slds-button--icon-border",3,"click",4,"ngIf"],[1,"slds-tile__detail","slds-text-body--small"],[1,"slds-dl--horizontal"],[4,"ngFor","ngForOf"],[1,"slds-button","slds-button--icon-border",3,"click"],["icon","open"],[1,"slds-dl--horizontal__label","slds-truncate"],[1,"slds-truncate"],[3,"module","field"],[1,"slds-dl--horizontal__detail","slds-tile__meta"],[3,"field","fieldconfig","fielddisplayclass"]],template:function(e,t){1&e&&(m.TgZ(0,"div",0),m._UZ(1,"system-icon",1),m.TgZ(2,"div",2)(3,"div",3)(4,"h3",4)(5,"span"),m._uU(6),m.qZA()(),m.YNc(7,$s,2,0,"button",5),m.qZA(),m.TgZ(8,"div",6)(9,"dl",7),m.YNc(10,Ks,6,5,"ng-container",8),m.qZA()()()()),2&e&&(m.xp6(1),m.Q6J("module",t.model.module)("size","small"),m.xp6(5),m.Oqu(t.model.data.summary_text),m.xp6(1),m.Q6J("ngIf",t.enableButtonLink),m.xp6(3),m.Q6J("ngForOf",t.getFields()))},dependencies:[i.sg,i.O5,Ne.j,w.J,Z.f,je.h],encapsulation:2})}return ObjectRelatedDuplicateTile})();const Ws=function(e,t){return{module:e,data:t}};function ei(e,t){if(1&e&&m._UZ(0,"object-related-duplicate-tile",10),2&e){const e=t.$implicit,s=m.oxw();m.Q6J("system-model-provider",m.WLB(3,Ws,s.model.module,e))("enableLink",!1)("enableButtonLink",!0)}}let ti=(()=>{class ObjectEditModalDialogDuplicatesPanel{model;metadata;language;view;close=new m.vpe;fieldset="";constructor(e,t,s,i){this.model=e,this.metadata=t,this.language=s,this.view=i,this.view.isEditable=!1}ngOnInit(){let e=this.metadata.getComponentConfig("GlobalModalDialogDuplicates",this.model.module);this.fieldset=e.fieldset}hidePanel(){this.close.emit(!0)}static ɵfac=function(e){return new(e||ObjectEditModalDialogDuplicatesPanel)(m.Y36(h.o),m.Y36(b.Pu),m.Y36(g.d),m.Y36(Oe.e))};static ɵcmp=m.Xpm({type:ObjectEditModalDialogDuplicatesPanel,selectors:[["object-edit-modal-dialog-duplicates-panel"]],outputs:{close:"close"},features:[m._Bn([Oe.e])],decls:12,vars:3,consts:[[1,"slds-card"],[1,"slds-card__header","slds-p-around--small","slds-theme--info","slds-grid","slds-grid_vertical-align-center","slds-grid--align-spread"],[1,"slds-text-heading--small"],["label","LBL_DUPLICATES"],["label","LBL_OF"],[1,"slds-button","slds-button--icon","slds-button--icon-border-filled",3,"click"],["icon","close"],[1,"slds-card__body","slds-card__body_inner"],[1,"slds-grid","slds-wrap","slds-grid_pull-padded"],["class","slds-size--1-of-1",3,"system-model-provider","enableLink","enableButtonLink",4,"ngFor","ngForOf"],[1,"slds-size--1-of-1",3,"system-model-provider","enableLink","enableButtonLink"]],template:function(e,t){1&e&&(m.TgZ(0,"div",0)(1,"div",1)(2,"h2",2),m._UZ(3,"system-label",3),m._uU(4),m._UZ(5,"system-label",4),m._uU(6),m.qZA(),m.TgZ(7,"button",5),m.NdJ("click",(function(){return t.hidePanel()})),m._UZ(8,"system-button-icon",6),m.qZA()(),m.TgZ(9,"div",7)(10,"ul",8),m.YNc(11,ei,1,6,"object-related-duplicate-tile",9),m.qZA()()()),2&e&&(m.xp6(4),m.hij(" (",t.model.duplicates.length," "),m.xp6(2),m.hij(" ",t.model.duplicatecount,")"),m.xp6(5),m.Q6J("ngForOf",t.model.duplicates))},dependencies:[i.sg,w.J,I._,Vs.u,Xs],encapsulation:2})}return ObjectEditModalDialogDuplicatesPanel})();var si=s(44347);const ii=["modalContent"],ni=function(e){return{"slds-hidden":e}};function li(e,t){if(1&e){const e=m.EpF();m.TgZ(0,"button",9),m.NdJ("click",(function(){m.CHM(e);const t=m.oxw();return m.KtG(t.showDuplicates=!t.showDuplicates)})),m.TgZ(1,"span",10),m._uU(2),m.qZA(),m._UZ(3,"system-label",11),m.qZA()}if(2&e){const e=m.oxw();m.Q6J("disabled",0==e.model.duplicates.length)("ngClass",m.VKq(3,ni,e.showDuplicatesTable)),m.xp6(2),m.Oqu(e.model.duplicateChecking?"":e.model.duplicatecount)}}function oi(e,t){if(1&e){const e=m.EpF();m.TgZ(0,"div",16)(1,"object-edit-modal-dialog-duplicates-panel",1),m.NdJ("close",(function(){m.CHM(e);const t=m.oxw(2);return m.KtG(t.showDuplicates=!1)})),m.qZA()()}}function ai(e,t){if(1&e&&(m.TgZ(0,"div",12)(1,"div",13),m._UZ(2,"object-edit-modal-dialog-container",14),m.qZA(),m.YNc(3,oi,2,0,"div",15),m.qZA()),2&e){const e=m.oxw();m.xp6(2),m.Q6J("componentSet",e.componentconfig.componentset),m.xp6(1),m.Q6J("ngIf",e.showDuplicates)}}let di=(()=>{class ObjectEditModal{router;language;model;view;metadata;modal;modalwindow;navigationtab;modalContent;componentconfig;actionSetItems=[];actionSubject=new Gs.x;action$=new Ps.y;duplicates=[];showDuplicates=!1;showDuplicatesTable=!1;preventGoingToRecord=!1;self={};constructor(e,t,s,i,n,l,o,a){this.router=e,this.language=t,this.model=s,this.view=i,this.metadata=n,this.modal=l,this.modalwindow=o,this.navigationtab=a,this.view.isEditable=!0,this.view.displayLinks=!1,this.view.setEditMode(),this.model.startEdit(),this.action$=this.actionSubject.asObservable()}ngOnInit(){this.componentconfig||(this.componentconfig=this.metadata.getComponentConfig(this.constructor.name,this.model.module)),this.actionSetItems=this.metadata.getActionSetItems(this.componentconfig.actionset),this.modalwindow.self=this.self}get actionset(){return this.componentconfig.actionset}closeModal(){this.model.cancelEdit(),this.actionSubject.next(!1),this.actionSubject.complete(),this.self.destroy()}get modalHeader(){return""!=this.model.module?this.language.getModuleName(this.model.module,!0):""}get grow(){return this.componentconfig.grow}handleAction(e){switch(e){case"savegodetail":this.actionSubject.next(e),this.model.goDetail(this.navigationtab?.tabid);break;case"save":this.actionSubject.next(e);break;default:this.actionSubject.next(!1)}this.actionSubject.complete(),this.self.destroy()}get duplicateCheckEnabled(){return this.model.isNew&&this.metadata.getModuleDuplicatecheck(this.model.module)}static ɵfac=function(e){return new(e||ObjectEditModal)(m.Y36(o.F0),m.Y36(g.d),m.Y36(h.o),m.Y36(Oe.e),m.Y36(b.Pu),m.Y36(V.o),m.Y36(xt.S),m.Y36(we.d,8))};static ɵcmp=m.Xpm({type:ObjectEditModal,selectors:[["ng-component"]],viewQuery:function(e,t){if(1&e&&m.Gf(ii,7,m.s_b),2&e){let e;m.iGM(e=m.CRH())&&(t.modalContent=e.first)}},inputs:{preventGoingToRecord:"preventGoingToRecord"},features:[m._Bn([Oe.e,xt.S])],decls:14,vars:5,consts:[["size","large"],[3,"close"],["class","slds-button slds-button--brand",3,"disabled","ngClass","click",4,"ngIf"],["margin","none",3,"grow"],["modalContent",""],["class","slds-grid",4,"ngIf"],[1,"slds-grid","slds-grid--vertical-align-center","slds-grid--align-spread"],[1,"slds-col"],["containerclass","slds-button-group-row",3,"actionset","actionemitter"],[1,"slds-button","slds-button--brand",3,"disabled","ngClass","click"],[1,"slds-p-right--xx-small"],["label","LBL_DUPLICATES"],[1,"slds-grid"],[1,"slds-grid--vertical","slds-grow"],[3,"componentSet"],["class","slds-size--1-of-3 slds-border--left",4,"ngIf"],[1,"slds-size--1-of-3","slds-border--left"]],template:function(e,t){1&e&&(m.TgZ(0,"system-modal",0)(1,"system-modal-header",1),m.NdJ("close",(function(){return t.closeModal()})),m._uU(2),m.TgZ(3,"system-modal-header-right"),m.YNc(4,li,4,5,"button",2),m.qZA()(),m.TgZ(5,"system-modal-content",3,4),m.YNc(7,ai,4,2,"div",5),m.qZA(),m.TgZ(8,"system-modal-footer")(9,"div",6)(10,"div",7),m._UZ(11,"object-record-messages-badge"),m.qZA(),m.TgZ(12,"div",7)(13,"object-action-container",8),m.NdJ("actionemitter",(function(e){return t.handleAction(e)})),m.qZA()()()()()),2&e&&(m.xp6(2),m.hij(" ",t.modalHeader," "),m.xp6(2),m.Q6J("ngIf",t.duplicateCheckEnabled),m.xp6(1),m.Q6J("grow",t.grow),m.xp6(2),m.Q6J("ngIf",!t.showDuplicatesTable),m.xp6(6),m.Q6J("actionset",t.componentconfig.actionset))},dependencies:[i.mk,i.O5,I._,Fe.j,qe.x,Ee.p,Ye.y,Hs.O,N.S,zs.Z,ti,si.Z],encapsulation:2})}return ObjectEditModal})();var ri=s(7514),ci=s(12803);const ui=["object-table-row",""];function mi(e,t){if(1&e){const e=m.EpF();m.TgZ(0,"td",2)(1,"system-checkbox",3),m.NdJ("ngModelChange",(function(){m.CHM(e);const t=m.oxw();return m.KtG(t.toggleSelection())})),m.qZA()()}if(2&e){const e=m.oxw();m.xp6(1),m.Q6J("ngModel",e.selected)}}function gi(e,t){if(1&e&&(m.TgZ(0,"td")(1,"div",4),m._UZ(2,"field-container",5),m.qZA()()),2&e){const e=t.$implicit,s=m.oxw();m.uIk("data-label",s.language.getFieldDisplayName(s.model.module,e.field,e.fieldconfig)),m.xp6(2),m.Q6J("fieldname",e.field)("fieldconfig",e.fieldconfig)("fielddisplayclass","slds-truncate")}}let hi=(()=>{class ObjectTableRow{language;model;view;fields=[];selected=!1;select$=new m.vpe;unselect$=new m.vpe;selectable=!1;attr_selectable;constructor(e,t,s){this.language=e,this.model=t,this.view=s,this.view.isEditable=!1,this.view.displayLabels=!1}ngOnInit(){this.selectable=null!==this.attr_selectable}toggleSelection(){if(!this.selectable)return!1;this.selected=!this.selected,this.selected?this.select$.emit(this.model.data):this.unselect$.emit(this.model.data)}static ɵfac=function(e){return new(e||ObjectTableRow)(m.Y36(g.d),m.Y36(h.o),m.Y36(Oe.e))};static ɵcmp=m.Xpm({type:ObjectTableRow,selectors:[["","object-table-row",""]],hostAttrs:[1,"slds-hint-parent"],inputs:{fields:"fields",selected:"selected",attr_selectable:["selectable","attr_selectable"]},outputs:{select$:"select",unselect$:"unselect"},features:[m._Bn([Oe.e])],attrs:ui,decls:2,vars:2,consts:[["class","slds-cell-shrink","system-title","LBL_SELECT_ROW",4,"ngIf"],[4,"ngFor","ngForOf"],["system-title","LBL_SELECT_ROW",1,"slds-cell-shrink"],[3,"ngModel","ngModelChange"],[1,"slds-truncate"],[3,"fieldname","fieldconfig","fielddisplayclass"]],template:function(e,t){1&e&&(m.YNc(0,mi,2,1,"td",0),m.YNc(1,gi,3,4,"td",1)),2&e&&(m.Q6J("ngIf",t.selectable),m.xp6(1),m.Q6J("ngForOf",t.fields))},dependencies:[i.sg,i.O5,l.JJ,l.On,Ne.j,ri.U,C.S],encapsulation:2})}return ObjectTableRow})();function pi(e,t){if(1&e){const e=m.EpF();m.TgZ(0,"th",6)(1,"span",7),m._UZ(2,"system-label",8),m.qZA(),m.TgZ(3,"system-checkbox",9),m.NdJ("ngModelChange",(function(){m.CHM(e);const t=m.oxw();return m.KtG(t.toggleAll())})),m.qZA()()}if(2&e){const e=m.oxw();m.xp6(3),m.Q6J("ngModel",e.areAllObjectsSelected())("disabled",e.objects.length>e.max_selections)}}function fi(e,t){if(1&e&&(m.TgZ(0,"div",12),m._UZ(1,"system-label-fieldname",13),m.qZA()),2&e){const e=m.oxw().$implicit,t=m.oxw();m.ekj("slds-p-around--xx-small",t.fixedHeader),m.xp6(1),m.Q6J("module",t.module)("field",e.field)("fieldconfig",e.fieldconfig)}}function bi(e,t){if(1&e&&(m.TgZ(0,"th",10),m.YNc(1,fi,2,5,"div",11),m.qZA()),2&e){const e=t.$implicit;m.xp6(1),m.Q6J("ngIf",!e.fieldconfig||!e.fieldconfig.hidelabel)}}const _i=function(e,t){return{module:e,data:t}};function vi(e,t){if(1&e){const e=m.EpF();m.TgZ(0,"tr",15),m.NdJ("select",(function(t){m.CHM(e);const s=m.oxw(2);return m.KtG(s.select(t))}))("unselect",(function(t){m.CHM(e);const s=m.oxw(2);return m.KtG(s.unselect(t))})),m.qZA()}if(2&e){const e=t.$implicit,s=m.oxw(2);m.Q6J("fields",s.fields)("system-model-provider",m.WLB(4,_i,s.module,e))("selectable",s.selectable?"true":null)("selected",s.isObjectSelected(e))}}function yi(e,t){if(1&e&&(m.TgZ(0,"tbody"),m.YNc(1,vi,1,7,"tr",14),m.qZA()),2&e){const e=m.oxw();m.xp6(1),m.Q6J("ngForOf",e.objects)}}function xi(e,t){1&e&&(m.TgZ(0,"td",20),m._UZ(1,"system-stencil"),m.qZA())}function wi(e,t){if(1&e&&(m.TgZ(0,"tr"),m.YNc(1,xi,2,0,"td",19),m.qZA()),2&e){const e=m.oxw(2);m.xp6(1),m.Q6J("ngForOf",e.fields)}}const Zi=function(){return[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15]};function Ti(e,t){1&e&&(m.TgZ(0,"tbody",16),m._UZ(1,"tr",17),m.YNc(2,wi,2,1,"tr",18),m.qZA()),2&e&&(m.xp6(2),m.Q6J("ngForOf",m.DdM(1,Zi)))}let Ci=(()=>{class ObjectTable{language;metadata;fields=[];objects=[];selected_objects=[];fixedHeader=!1;fieldset_id;module;isLoading=!1;selected_objects$=new m.vpe;max_selections=0;select$=new m.vpe;selectable=!1;multiselect=!1;constructor(e,t,s,i){this.language=e,this.metadata=t,this.selectable=null!==s,this.multiselect=null!==i}ngOnInit(){if(!this.fields||0==this.fields.length)if(this.fieldset_id)this.fields=this.metadata.getFieldSetFields(this.fieldset_id);else{let e=this.metadata.getComponentConfig("ObjectList",this.module);this.fields=this.metadata.getFieldSetFields(e.fieldset)}if(!this.fields||0==this.fields.length)throw new Error(`No fields given, nor found for module ${this.module}`);this.selectable&&this.max_selections<1&&(this.max_selections=1),this.multiselect&&this.max_selections<2&&(this.max_selections=99)}toggleAll(){this.selected_objects.length<this.objects.length?this.selected_objects=[...this.objects]:this.selected_objects=[],this.selected_objects$.emit(this.selected_objects),this.select$.emit(this.selected_objects)}select(e){!this.findSelectedObject(e)&&this.selected_objects.length<this.max_selections&&(this.selected_objects.push(e),this.selected_objects$.emit(this.selected_objects),this.select$.emit(this.selected_objects))}unselect(e){let t=this.selected_objects.findIndex((t=>t.id==e.id));t>-1&&(this.selected_objects.splice(t,1),this.selected_objects$.emit(this.selected_objects),this.select$.emit(this.selected_objects))}isObjectSelected(e){return!!this.findSelectedObject(e)}areAllObjectsSelected(){return this.selected_objects.length==this.objects.length}findSelectedObject(e){return this.selected_objects.find((t=>t.id==e.id))}static ɵfac=function(e){return new(e||ObjectTable)(m.Y36(g.d),m.Y36(b.Pu),m.$8M("selectable"),m.$8M("multiselect"))};static ɵcmp=m.Xpm({type:ObjectTable,selectors:[["object-table"]],inputs:{fields:"fields",objects:"objects",selected_objects:"selected_objects",fixedHeader:"fixedHeader",fieldset_id:"fieldset_id",module:"module",isLoading:"isLoading",max_selections:["max-selections","max_selections"]},outputs:{selected_objects$:"selected_objectsChange",select$:"select"},decls:7,vars:6,consts:[[1,"slds-table","slds-table_bordered","slds-max-medium-table_stacked-horizontal","slds-table_fixed-layout"],[1,"slds-text-title--caps"],["class","slds-cell-shrink","scope","col",4,"ngIf"],["scope","col",4,"ngFor","ngForOf"],[4,"ngIf"],["class","slds-is-relative",4,"ngIf"],["scope","col",1,"slds-cell-shrink"],["id","check-group-header",1,"slds-assistive-text"],["label","LBL_CHOOSE_ROWS_TO_SELECT"],[3,"ngModel","disabled","ngModelChange"],["scope","col"],["class","slds-truncate",3,"slds-p-around--xx-small",4,"ngIf"],[1,"slds-truncate"],[3,"module","field","fieldconfig"],["object-table-row","",3,"fields","system-model-provider","selectable","selected","select","unselect",4,"ngFor","ngForOf"],["object-table-row","",3,"fields","system-model-provider","selectable","selected","select","unselect"],[1,"slds-is-relative"],[2,"position","absolute","background","linear-gradient(rgba(0,0,0,0) 0%, rgba(255,255,255,.8) 100%)","width","100%","height","100%","z-index","1"],[4,"ngFor","ngForOf"],["style","overflow: hidden",4,"ngFor","ngForOf"],[2,"overflow","hidden"]],template:function(e,t){1&e&&(m.TgZ(0,"table",0)(1,"thead")(2,"tr",1),m.YNc(3,pi,4,2,"th",2),m.YNc(4,bi,2,1,"th",3),m.qZA()(),m.YNc(5,yi,2,1,"tbody",4),m.YNc(6,Ti,3,2,"tbody",5),m.qZA()),2&e&&(m.ekj("slds-table--header-fixed",t.fixedHeader),m.xp6(3),m.Q6J("ngIf",t.selectable),m.xp6(1),m.Q6J("ngForOf",t.fields),m.xp6(1),m.Q6J("ngIf",!t.isLoading),m.xp6(1),m.Q6J("ngIf",t.isLoading))},dependencies:[i.sg,i.O5,l.JJ,l.On,ri.U,I._,je.h,ci.B,Vs.u,hi],encapsulation:2})}return ObjectTable})(),ki=(()=>{class ObjectEditModalDialogDuplicates{model;metadata;language;module="";duplicates=[];fieldset="";constructor(e,t,s){this.model=e,this.metadata=t,this.language=s}ngOnInit(){let e=this.metadata.getComponentConfig("GlobalModalDialogDuplicates",this.model.module);this.fieldset=e.fieldset}static ɵfac=function(e){return new(e||ObjectEditModalDialogDuplicates)(m.Y36(h.o),m.Y36(b.Pu),m.Y36(g.d))};static ɵcmp=m.Xpm({type:ObjectEditModalDialogDuplicates,selectors:[["object-edit-modal-dialog-duplicates"]],inputs:{module:"module",duplicates:"duplicates"},decls:1,vars:3,consts:[[3,"module","fieldset_id","objects"]],template:function(e,t){1&e&&m._UZ(0,"object-table",0),2&e&&m.Q6J("module",t.model.module)("fieldset_id",t.fieldset)("objects",t.duplicates)},dependencies:[Ci],encapsulation:2})}return ObjectEditModalDialogDuplicates})();const Ai=["modalContent"];function Li(e,t){if(1&e&&m._UZ(0,"object-edit-modal-dialog-duplicates",16),2&e){const e=m.oxw();m.Q6J("duplicates",e.duplicates)}}let Ii=(()=>{class ObjectEditModalWReference{router;language;model;view;metadata;elementref;modalContent;componentRefs=[];componentSet="";module="";reference="";showDuplicates=!1;doDuplicateCheck=!0;duplicates=[];modalAction$=new m.vpe;self={};constructor(e,t,s,i,n,l){this.router=e,this.language=t,this.model=s,this.view=i,this.metadata=n,this.elementref=l,this.view.isEditable=!0,this.view.setEditMode()}closeModal(){this.modalAction$.emit(!1)}get modalHeader(){return""!=this.model.module?this.language.getModuleName(this.model.module,!0):""}save(e=!1){this.model.validate()&&this.modalAction$.emit(this.model.data)}get contentStyle(){if(this.showDuplicates)return{"overflow-y":"hidden"}}static ɵfac=function(e){return new(e||ObjectEditModalWReference)(m.Y36(o.F0),m.Y36(g.d),m.Y36(h.o),m.Y36(Oe.e),m.Y36(b.Pu),m.Y36(m.SBq))};static ɵcmp=m.Xpm({type:ObjectEditModalWReference,selectors:[["ng-component"]],viewQuery:function(e,t){if(1&e&&m.Gf(Ai,7,m.s_b),2&e){let e;m.iGM(e=m.CRH())&&(t.modalContent=e.first)}},features:[m._Bn([h.o,Oe.e])],decls:17,vars:6,consts:[["role","dialog",1,"slds-modal","slds-fade-in-open","slds-modal--large"],[1,"slds-modal__container"],[1,"slds-modal__header"],[1,"slds-button","slds-modal__close","slds-button--icon-inverse",3,"click"],[3,"icon","size"],[1,"slds-text-heading--medium"],[1,"slds-modal__content","slds-is-relative",3,"ngStyle"],["modalContent",""],[3,"componentSet"],["class","slds-is-absolute slds-theme--shade",3,"duplicates",4,"ngIf"],[1,"slds-modal__footer"],[1,"slds-button","slds-button--neutral",3,"click"],["label","LBL_CANCEL"],[1,"slds-button","slds-button--brand",3,"click"],["label","LBL_SAVE"],[1,"slds-backdrop","slds-backdrop--open"],[1,"slds-is-absolute","slds-theme--shade",3,"duplicates"]],template:function(e,t){1&e&&(m.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"button",3),m.NdJ("click",(function(){return t.closeModal()})),m._UZ(4,"system-button-icon",4),m.qZA(),m.TgZ(5,"h2",5),m._uU(6),m.qZA()(),m.TgZ(7,"div",6,7),m._UZ(9,"object-edit-modal-dialog-container",8),m.YNc(10,Li,1,1,"object-edit-modal-dialog-duplicates",9),m.qZA(),m.TgZ(11,"div",10)(12,"button",11),m.NdJ("click",(function(){return t.closeModal()})),m._UZ(13,"system-label",12),m.qZA(),m.TgZ(14,"button",13),m.NdJ("click",(function(){return t.save()})),m._UZ(15,"system-label",14),m.qZA()()()(),m._UZ(16,"div",15)),2&e&&(m.xp6(4),m.Q6J("icon","close")("size","large"),m.xp6(2),m.Oqu(t.modalHeader),m.xp6(1),m.Q6J("ngStyle",t.contentStyle),m.xp6(2),m.Q6J("componentSet",t.componentSet),m.xp6(1),m.Q6J("ngIf",t.showDuplicates))},dependencies:[i.O5,i.PC,w.J,I._,zs.Z,ki],encapsulation:2})}return ObjectEditModalWReference})();var Si=s(66367);let Mi=(()=>{class ObjectOptimisticLockingModalDataField{model;fieldname="";fieldmodule="";fieldvalue;constructor(e){this.model=e}ngOnInit(){this.model.module=this.fieldmodule,this.model.setField(this.fieldname,this.fieldvalue)}static ɵfac=function(e){return new(e||ObjectOptimisticLockingModalDataField)(m.Y36(h.o))};static ɵcmp=m.Xpm({type:ObjectOptimisticLockingModalDataField,selectors:[["object-optimisitclocking-modal-data-field"]],inputs:{fieldname:"fieldname",fieldmodule:"fieldmodule",fieldvalue:"fieldvalue"},features:[m._Bn([h.o])],decls:1,vars:2,consts:[[3,"field","fielddisplayclass"]],template:function(e,t){1&e&&m._UZ(0,"field-container",0),2&e&&m.Q6J("field",t.fieldname)("fielddisplayclass","slds-truncate")},dependencies:[Ne.j],encapsulation:2})}return ObjectOptimisticLockingModalDataField})();var Ji=s(30034);let Oi=(()=>{class ObjectOptimisticLockingModalChange{model;language;userpreferences;constructor(e,t,s){this.model=e,this.language=t,this.userpreferences=s}change={};get changeDate(){let e=moment(this.change.date_created).tz(this.userpreferences.toUse.timezone);return e.add(e.utcOffset(),"m"),e.format(this.userpreferences.getDateFormat()+" "+this.userpreferences.getTimeFormat())}static ɵfac=function(e){return new(e||ObjectOptimisticLockingModalChange)(m.Y36(h.o),m.Y36(g.d),m.Y36(L.z))};static ɵcmp=m.Xpm({type:ObjectOptimisticLockingModalChange,selectors:[["object-optimisitclocking-modal-change"]],inputs:{change:"change"},features:[m._Bn([Oe.e])],decls:15,vars:4,consts:[[1,"slds-p-vertical--xx-small"],[1,"slds-box--border"],[1,"slds-p-around--x-small"],[1,"slds-grid"],[1,"slds-m-top--xx-small"],["icon","history","size","x-small"],[1,"slds-col_bump-right","slds-m-left--xx-small"],["label","LBL_BY"],["icon","forward","size","xx-small"]],template:function(e,t){1&e&&(m.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4),m._UZ(5,"system-custom-icon",5),m.qZA(),m.TgZ(6,"div",6)(7,"div"),m._uU(8),m._UZ(9,"system-label",7),m._uU(10),m.qZA(),m.TgZ(11,"div"),m._uU(12),m._UZ(13,"system-utility-icon",8),m._uU(14),m.qZA()()()()()()),2&e&&(m.xp6(8),m.hij("",t.changeDate,", "),m.xp6(2),m.hij(" ",t.change.user_name,""),m.xp6(2),m.hij("",t.change.before_value_string,"   "),m.xp6(2),m.hij("   ",t.change.after_value_string,""))},dependencies:[Ji.$,I._,S.r],encapsulation:2})}return ObjectOptimisticLockingModalChange})();function Ni(e,t){if(1&e&&m._UZ(0,"object-optimisitclocking-modal-change",42),2&e){const e=t.$implicit;m.Q6J("change",e)}}function Fi(e,t){if(1&e&&(m.TgZ(0,"tr")(1,"td",40),m.YNc(2,Ni,1,1,"object-optimisitclocking-modal-change",41),m.qZA()()),2&e){const e=m.oxw().$implicit;m.xp6(2),m.Q6J("ngForOf",e.changes)}}function qi(e,t){if(1&e){const e=m.EpF();m.ynx(0),m.TgZ(1,"tr",23)(2,"td")(3,"div",24),m._UZ(4,"field-label",25),m.TgZ(5,"div",26),m.NdJ("click",(function(){const t=m.CHM(e).$implicit,s=m.oxw();return m.KtG(s.toggleChangeDetails(t.field))})),m._UZ(6,"system-utility-icon",27),m.qZA()()(),m.TgZ(7,"td")(8,"div",28)(9,"div",29)(10,"input",30),m.NdJ("click",(function(){const t=m.CHM(e).$implicit,s=m.oxw();return m.KtG(s.unselect(t.field))})),m.qZA(),m.TgZ(11,"label",31),m._UZ(12,"span",32),m.qZA()(),m.TgZ(13,"div",33),m._UZ(14,"object-optimisitclocking-modal-data-field",34),m.qZA()()(),m.TgZ(15,"td",35),m._UZ(16,"system-utility-icon",36),m.qZA(),m.TgZ(17,"td")(18,"div",28)(19,"div",29)(20,"input",37),m.NdJ("click",(function(){const t=m.CHM(e).$implicit,s=m.oxw();return m.KtG(s.select(t.field))})),m.qZA(),m.TgZ(21,"label",31),m._UZ(22,"span",32),m.qZA()(),m.TgZ(23,"div",33),m._UZ(24,"field-container",38),m.qZA()()()(),m.YNc(25,Fi,3,1,"tr",39),m.BQk()}if(2&e){const e=t.$implicit,s=t.index,i=m.oxw();m.xp6(4),m.Q6J("fieldname",e.field),m.xp6(6),m.MGl("id","radio",s,"1"),m.s9C("name",s),m.xp6(1),m.MGl("for","radio",s,"1"),m.xp6(3),m.Q6J("fieldmodule",i.model.module)("fieldname",e.field)("fieldvalue",e.value),m.xp6(6),m.MGl("id","radio",s,"2"),m.s9C("name",s),m.xp6(1),m.MGl("for","radio",s,"2"),m.xp6(3),m.Q6J("fieldname",e.field)("fielddisplayclass","slds-truncate"),m.xp6(1),m.Q6J("ngIf",i.channgeOpen(e.field))}}let Ei=(()=>{class ObjectOptimisticLockingModal{language;model;view;metadata;modal;self={};conflicts={};_conflicts=[];originaldata={};fieldsToCopy={};responseSubject;constructor(e,t,s,i,n){this.language=e,this.model=t,this.view=s,this.metadata=i,this.modal=n,this.view.displayLabels=!1}ngOnInit(){for(let e in this.conflicts)this._conflicts.push({field:e,value:this.conflicts[e].value,changes:this.conflicts[e].changes}),this.originaldata[e]=this.conflicts[e].value}cancel(){this.responseSubject.error(!0),this.responseSubject.complete(),this.self.destroy()}edit(){this.model.edit(),this.self.destroy()}save(e=!1){this.copyFields(),this.modal.openModal("SystemLoadingModal").subscribe((t=>{t.instance.messagelabel="LBL_SAVING_DATA",this.model.setField("date_modified",new moment),this.model.save().subscribe((s=>{s&&(e&&this.model.goDetail(),this.self.destroy()),t.instance.self.destroy()})),this.responseSubject.next(!0),this.responseSubject.complete()}))}copyFields(){for(let e in this.conflicts)this.fieldsToCopy[e]||this.model.setField(e,this.conflicts[e].value)}toggleChangeDetails(e){this.conflicts[e].open=!this.conflicts[e].open}select(e){this.fieldsToCopy[e]=!0}unselect(e){delete this.fieldsToCopy[e]}changeDetailsIcon(e){return this.conflicts[e].open?"chevronup":"chevrondown"}channgeOpen(e){return!!this.conflicts[e].open}static ɵfac=function(e){return new(e||ObjectOptimisticLockingModal)(m.Y36(g.d),m.Y36(h.o),m.Y36(Oe.e),m.Y36(b.Pu),m.Y36(V.o))};static ɵcmp=m.Xpm({type:ObjectOptimisticLockingModal,selectors:[["ng-component"]],features:[m._Bn([Oe.e])],decls:29,vars:2,consts:[["size","large"],[3,"hiddenCloseButton"],["label","LBL_OPTIMISTICLOCKING_CONFLICT"],["margin","none"],[1,"slds-p-around--small"],[1,"slds-text-heading--label"],["label","MSG_OPTIMISTIC_LOCKING"],[1,"slds-p-vertical--xx-small"],["label","MSG_OPTIMISTIC_LOCKING","length","long"],[1,"slds-table","slds-table_cell-buffer","slds-table_bordered","slds-no-row-hover"],[1,"slds-line-height_reset"],["scope","col",1,"slds-text-title_caps"],[1,"slds-truncate"],["label","LBL_FIELD"],["scope","col",1,"slds-text-title_caps",2,"width","33%"],["label","LBL_CURRENT_VALUE"],["scope","col",1,"slds-text-title_caps",2,"width","3.25rem"],["label","LBL_NEW_VALUE"],[4,"ngFor","ngForOf"],[1,"slds-button","slds-button--neutral",3,"click"],["label","LBL_CANCEL"],[1,"slds-button","slds-button--brand",3,"click"],["label","LBL_SAVE"],[1,"slds-hint-parent"],[1,"slds-grid","slds-grid--align-spread","slds-grid--vertical-align-center"],[2,"margin-right","0",3,"fieldname"],[3,"click"],["icon","clock","size","x-small"],[1,"slds-grid","slds-grid--vertical-align-center"],[1,"slds-radio","slds-p-right--x-small"],["type","radio","checked","",3,"id","name","click"],[1,"slds-radio__label",3,"for"],[1,"slds-radio_faux"],[1,"slds-box","slds-box--xx-small","slds-p-vertical--x-small",2,"width","100%"],[3,"fieldmodule","fieldname","fieldvalue"],[1,"slds-text-align--center"],["icon","forward","size","x-small"],["type","radio",3,"id","name","click"],[3,"fieldname","fielddisplayclass"],[4,"ngIf"],["colspan","4",2,"border-top","none"],[3,"change",4,"ngFor","ngForOf"],[3,"change"]],template:function(e,t){1&e&&(m.TgZ(0,"system-modal",0)(1,"system-modal-header",1),m._UZ(2,"system-label",2),m.qZA(),m.TgZ(3,"system-modal-content",3)(4,"div",4)(5,"div",5),m._UZ(6,"system-label",6),m.qZA(),m.TgZ(7,"div",7),m._UZ(8,"system-label",8),m.qZA()(),m.TgZ(9,"table",9)(10,"thead")(11,"tr",10)(12,"th",11)(13,"div",12),m._UZ(14,"system-label",13),m.qZA()(),m.TgZ(15,"th",14)(16,"div",12),m._UZ(17,"system-label",15),m.qZA()(),m._UZ(18,"th",16),m.TgZ(19,"th",14)(20,"div",12),m._UZ(21,"system-label",17),m.qZA()()()(),m.TgZ(22,"tbody"),m.YNc(23,qi,26,13,"ng-container",18),m.qZA()()(),m.TgZ(24,"system-modal-footer")(25,"button",19),m.NdJ("click",(function(){return t.cancel()})),m._UZ(26,"system-label",20),m.qZA(),m.TgZ(27,"button",21),m.NdJ("click",(function(){return t.save()})),m._UZ(28,"system-label",22),m.qZA()()()),2&e&&(m.xp6(1),m.Q6J("hiddenCloseButton",!0),m.xp6(22),m.Q6J("ngForOf",t._conflicts))},dependencies:[i.sg,i.O5,Si.q,Ne.j,I._,Fe.j,qe.x,Ee.p,Ye.y,S.r,Mi,Oi],styles:["table[_ngcontent-%COMP%]{border-bottom:none}","table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:last-child   td[_ngcontent-%COMP%]{border-bottom:none}"]})}return ObjectOptimisticLockingModal})();var Yi=s(80079),Di=s(65232),Ui=s(30115);function Qi(e,t){if(1&e&&(m.TgZ(0,"option",19),m._UZ(1,"system-label",1),m.qZA()),2&e){const e=t.$implicit;m.Q6J("value",e.component),m.xp6(1),m.Q6J("label",e.label)}}function Ri(e,t){if(1&e){const e=m.EpF();m.TgZ(0,"div",20)(1,"div",7)(2,"system-checkbox",21),m.NdJ("ngModelChange",(function(t){m.CHM(e);const s=m.oxw();return m.KtG(s.globallist=t)})),m._UZ(3,"system-label",22),m.qZA()()()}if(2&e){const e=m.oxw();m.xp6(2),m.Q6J("ngModel",e.globallist)}}let ji=(()=>{class ObjectListViewSettingsAddlistModal{language;session;metadata;modellist;modalmode="add";listname="";globallist=!1;listcomponent;self={};componentListOptions=[];constructor(e,t,s,i){this.language=e,this.session=t,this.metadata=s,this.modellist=i}ngOnInit(){this.loadComponentListOptions(),"edit"===this.modalmode&&(this.listname=this.modellist.currentList.name,this.globallist=this.modellist.getGlobal(),this.listcomponent=this.modellist.currentList.listcomponent)}loadComponentListOptions(){let e=this.modellist.metadata.getComponentConfig("ObjectListView",this.modellist.module),t=this.modellist.metadata.getComponentSetObjects(e.componentset);this.componentListOptions=t.map((e=>({component:e.component,label:e.componentconfig.name}))),this.listcomponent=this.componentListOptions[0].component}close(){this.self.destroy()}canSave(){return!(this.listname.length>0)}get isadmin(){return this.session.isAdmin||this.metadata.checkModuleAcl(this.modellist.module,"moduleadmin")}save(){if(this.listname.length>0){const e={name:this.listname,listcomponent:this.listcomponent,global:this.globallist?"1":"0"};switch(this.modalmode){case"add":this.modellist.addListType(e).subscribe((e=>{this.close()}));break;case"edit":this.modellist.updateListType(e).subscribe((e=>{this.close()}))}}}static ɵfac=function(e){return new(e||ObjectListViewSettingsAddlistModal)(m.Y36(g.d),m.Y36(Qt.n),m.Y36(b.Pu),m.Y36(y.t))};static ɵcmp=m.Xpm({type:ObjectListViewSettingsAddlistModal,selectors:[["object-listview-settings-addlistmodal"]],inputs:{modalmode:"modalmode"},decls:25,vars:6,consts:[[3,"close"],[3,"label"],[1,"slds-form--stacked"],[1,"slds-form-element"],[1,"slds-form-element__label"],[1,"slds-required"],["label","LBL_NEWLISTNAME"],[1,"slds-form-element__control"],["type","text","autofocus","",1,"slds-input",3,"ngModel","ngModelChange"],[1,"slds-form-element","slds-p-vertical--small"],["label","LBL_TYPE"],[1,"slds-select_container"],[1,"slds-select",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["class","slds-form-element slds-m-vertical--x-small",4,"ngIf"],[1,"slds-button","slds-button--neutral",3,"click"],["label","LBL_CANCEL"],[1,"slds-button","slds-button--brand",3,"disabled","click"],["label","LBL_SAVE"],[3,"value"],[1,"slds-form-element","slds-m-vertical--x-small"],[3,"ngModel","ngModelChange"],["label","LBL_GLOBALVISIBLE"]],template:function(e,t){1&e&&(m.TgZ(0,"system-modal")(1,"system-modal-header",0),m.NdJ("close",(function(){return t.close()})),m._UZ(2,"system-label",1),m.qZA(),m.TgZ(3,"system-modal-content")(4,"div",2)(5,"div",3)(6,"label",4)(7,"abbr",5),m._uU(8,"*"),m.qZA(),m._UZ(9,"system-label",6),m.qZA(),m.TgZ(10,"div",7)(11,"input",8),m.NdJ("ngModelChange",(function(e){return t.listname=e})),m.qZA()()(),m.TgZ(12,"div",9)(13,"label",4),m._UZ(14,"system-label",10),m.qZA(),m.TgZ(15,"div",7)(16,"div",11)(17,"select",12),m.NdJ("ngModelChange",(function(e){return t.listcomponent=e})),m.YNc(18,Qi,2,2,"option",13),m.qZA()()()(),m.YNc(19,Ri,4,1,"div",14),m.qZA()(),m.TgZ(20,"system-modal-footer")(21,"button",15),m.NdJ("click",(function(){return t.close()})),m._UZ(22,"system-label",16),m.qZA(),m.TgZ(23,"button",17),m.NdJ("click",(function(){return t.save()})),m._UZ(24,"system-label",18),m.qZA()()()),2&e&&(m.xp6(2),m.Q6J("label","LBL_"+t.modalmode.toUpperCase()+"LIST"),m.xp6(9),m.Q6J("ngModel",t.listname),m.xp6(6),m.Q6J("ngModel",t.listcomponent),m.xp6(1),m.Q6J("ngForOf",t.componentListOptions),m.xp6(1),m.Q6J("ngIf",t.isadmin),m.xp6(4),m.Q6J("disabled",t.canSave()))},dependencies:[i.sg,i.O5,l.YN,l.Kr,l.Fj,l.EJ,l.JJ,l.On,ri.U,I._,Fe.j,qe.x,Ee.p,Ye.y],encapsulation:2})}return ObjectListViewSettingsAddlistModal})();function Bi(e,t){if(1&e){const e=m.EpF();m.TgZ(0,"div",18),m.NdJ("click",(function(){const t=m.CHM(e).$implicit,s=m.oxw();return m.KtG(s.selectField("available",t.id))})),m.TgZ(1,"span",19),m._UZ(2,"system-label-fieldname",20),m.TgZ(3,"span",21),m._uU(4),m.qZA()()()}if(2&e){const e=t.$implicit,s=m.oxw();m.Q6J("cdkDragData",e),m.uIk("aria-selected",s.isSelected("available",e.id)),m.xp6(2),m.Q6J("module",s.modellist.module)("field",e.field)("fieldconfig",e.fieldconfig),m.xp6(2),m.hij("(",e.field,")")}}function Gi(e,t){if(1&e){const e=m.EpF();m.TgZ(0,"div",18),m.NdJ("click",(function(){const t=m.CHM(e).$implicit,s=m.oxw();return m.KtG(s.selectField("list",t.id))})),m.TgZ(1,"span",19),m._UZ(2,"system-label-fieldname",20),m.TgZ(3,"span",21),m._uU(4),m.qZA()()()}if(2&e){const e=t.$implicit,s=m.oxw();m.Q6J("cdkDragData",e),m.uIk("aria-selected",s.isSelected("list",e.id)),m.xp6(2),m.Q6J("module",s.modellist.module)("field",e.field)("fieldconfig",e.fieldconfig),m.xp6(2),m.hij("(",e.field,")")}}const Pi=function(e){return[e]};let Hi=(()=>{class ObjectListViewSettingsSetfieldsModal{metadata;language;modellist;self={};listFields=[];availableFields=[];selectedAvailableFields=[];selectedListFields=[];constructor(e,t,s){this.metadata=e,this.language=t,this.modellist=s,this.listFields=_.clone(this.modellist.listfields);let i=this.metadata.getComponentConfig("ObjectList",this.modellist.module),n=this.metadata.getFieldSetFields(i.fieldset);for(let e of n)this.listFields.find((t=>t.id==e.id))||this.availableFields.push({id:e.id,field:e.field,fieldconfig:e.fieldconfig});this.availableFields.length>0&&this.sortAvailableFields()}sortAvailableFields(){this.availableFields=this.availableFields.sort(((e,t)=>this.language.getFieldDisplayName(this.modellist.module,e.field,e.fieldconfig).toLowerCase()>this.language.getFieldDisplayName(this.modellist.module,t.field,t.fieldconfig).toLowerCase()?1:-1))}close(){this.self.destroy()}canSet(){return this.listFields.length>0}set(){this.canSet()&&(this.modellist.listfields=this.listFields,this.close())}saveAndSet(){this.canSet()&&(this.modellist.listfields=this.listFields,this.modellist.updateListType().subscribe((()=>this.close())))}onFieldDrop(e){let t=e.previousContainer.data.splice(e.previousIndex,1);e.container.data.splice(e.currentIndex,0,t[0])}selectField(e,t){switch(e){case"available":this.selectedAvailableFields=[t];break;case"list":this.selectedListFields=[t]}}isSelected(e,t){switch(e){case"available":return this.selectedAvailableFields.indexOf(t)>=0;case"list":return this.selectedListFields.indexOf(t)>=0}}moveFields(e){switch(e){case"available":this.selectedAvailableFields.forEach((e=>{this.availableFields.some(((t,s)=>{if(e==t.field)return this.listFields.push(this.availableFields.splice(s,1)[0]),!0}))})),this.selectedAvailableFields=[];break;case"list":this.selectedListFields.forEach((e=>{this.listFields.some(((t,s)=>{if(e==t.field)return this.availableFields.push(this.listFields.splice(s,1)[0]),!0}))})),this.selectedListFields=[],this.sortAvailableFields()}}static ɵfac=function(e){return new(e||ObjectListViewSettingsSetfieldsModal)(m.Y36(b.Pu),m.Y36(g.d),m.Y36(y.t))};static ɵcmp=m.Xpm({type:ObjectListViewSettingsSetfieldsModal,selectors:[["object-listview-settings-setfields-modal"]],decls:24,vars:12,consts:[[3,"close"],["label","LBL_SETFIELDS"],[1,"slds-grid"],[1,"slds-form-element","slds-p-horizontal--small","slds-size--1-of-2"],[1,"slds-form-element__label"],["label","LBL_AVAILABLE_FIELDS"],["cdkDropList","",1,"slds-picklist","slds-picklist__options","slds-size--1-of-1",2,"height","50vh",3,"cdkDropListData","cdkDropListConnectedTo","cdkDropListDropped"],["listOne","cdkDropList"],["cdkDrag","","class","slds-drag--preview slds-picklist__item","role","option",3,"cdkDragData","click",4,"ngFor","ngForOf"],["label","LBL_SELECTED_FIELDS"],["cdkDropList","",1,"slds-picklist","slds-picklist__options","slds-size--1-of-1","cdk-drag",2,"height","50vh",3,"cdkDropListData","cdkDropListConnectedTo","cdkDropListDropped"],["listTwo","cdkDropList"],[1,"slds-button","slds-button--neutral",3,"click"],["label","LBL_CANCEL"],[1,"slds-button","slds-button--neutral",3,"disabled","click"],["label","LBL_SAVE_AND_SET"],[1,"slds-button","slds-button--brand",3,"disabled","click"],["label","LBL_SET"],["cdkDrag","","role","option",1,"slds-drag--preview","slds-picklist__item",3,"cdkDragData","click"],[1,"slds-truncate"],[3,"module","field","fieldconfig"],[1,"slds-text-color--inverse-weak"]],template:function(e,t){if(1&e&&(m.TgZ(0,"system-modal")(1,"system-modal-header",0),m.NdJ("close",(function(){return t.close()})),m._UZ(2,"system-label",1),m.qZA(),m.TgZ(3,"system-modal-content")(4,"div",2)(5,"div",3)(6,"span",4),m._UZ(7,"system-label",5),m.qZA(),m.TgZ(8,"div",6,7),m.NdJ("cdkDropListDropped",(function(e){return t.onFieldDrop(e)})),m.YNc(10,Bi,5,6,"div",8),m.qZA()(),m.TgZ(11,"div",3)(12,"span",4),m._UZ(13,"system-label",9),m.qZA(),m.TgZ(14,"div",10,11),m.NdJ("cdkDropListDropped",(function(e){return t.onFieldDrop(e)})),m.YNc(16,Gi,5,6,"div",8),m.qZA()()()(),m.TgZ(17,"system-modal-footer")(18,"button",12),m.NdJ("click",(function(){return t.close()})),m._UZ(19,"system-label",13),m.qZA(),m.TgZ(20,"button",14),m.NdJ("click",(function(){return t.saveAndSet()})),m._UZ(21,"system-label",15),m.qZA(),m.TgZ(22,"button",16),m.NdJ("click",(function(){return t.set()})),m._UZ(23,"system-label",17),m.qZA()()()),2&e){const e=m.MAs(9),s=m.MAs(15);m.xp6(8),m.Q6J("cdkDropListData",t.availableFields)("cdkDropListConnectedTo",m.VKq(8,Pi,s)),m.xp6(2),m.Q6J("ngForOf",t.availableFields),m.xp6(4),m.Q6J("cdkDropListData",t.listFields)("cdkDropListConnectedTo",m.VKq(10,Pi,e)),m.xp6(2),m.Q6J("ngForOf",t.listFields),m.xp6(4),m.Q6J("disabled",!t.canSet()),m.xp6(2),m.Q6J("disabled",!t.canSet())}},dependencies:[i.sg,n.Wj,n.Zt,I._,je.h,Fe.j,qe.x,Ee.p,Ye.y],encapsulation:2})}return ObjectListViewSettingsSetfieldsModal})();const zi=["container"];let Vi=(()=>{class ObjectRecordViewContainer{navigation;navigationtab;activatedRoute;metadata;model;broadcast;elementref;container;module="";id="";initialized=!1;componentset="";componentRefs=[];componentSubscriptions=new B.w0;constructor(e,t,s,i,n,l,o){this.navigation=e,this.navigationtab=t,this.activatedRoute=s,this.metadata=i,this.model=n,this.broadcast=l,this.elementref=o,this.componentSubscriptions.add(this.navigationtab.activeRoute$.subscribe((e=>{this.module==e.params.module&&this.id==e.params.id||(this.module=e.params.module,this.id=e.params.id,this.initialized&&this.buildContainer())}))),this.componentSubscriptions.add(this.broadcast.message$.subscribe((e=>{this.handleMessage(e)})))}handleMessage(e){if("applauncher.setrole"===e.messagetype)this.buildContainer()}ngAfterViewInit(){this.initialized=!0,this.buildContainer()}ngOnDestroy(){this.componentSubscriptions.unsubscribe()}buildContainer(){for(let e of this.componentRefs)e.destroy();let e=this.metadata.getComponentConfig("ObjectRecordViewContainer",this.module);this.componentset=e.componentset;for(let e of this.metadata.getComponentSetObjects(this.componentset))this.metadata.addComponent(e.component,this.container).subscribe((t=>{t.instance.componentconfig=e.componentconfig,this.componentRefs.push(t)}))}static ɵfac=function(e){return new(e||ObjectRecordViewContainer)(m.Y36(xe.G),m.Y36(we.d),m.Y36(o.gz),m.Y36(b.Pu),m.Y36(h.o),m.Y36(ye.f),m.Y36(m.SBq))};static ɵcmp=m.Xpm({type:ObjectRecordViewContainer,selectors:[["object-recordview-container"]],viewQuery:function(e,t){if(1&e&&m.Gf(zi,7,m.s_b),2&e){let e;m.iGM(e=m.CRH())&&(t.container=e.first)}},features:[m._Bn([h.o])],decls:2,vars:0,consts:[["container",""]],template:function(e,t){1&e&&m._UZ(0,"div",null,0)},encapsulation:2})}return ObjectRecordViewContainer})();var $i=s(64376),Ki=s(26951);let Xi=(()=>{class ObjectRecordView{broadcast;navigation;navigationtab;activatedRoute;metadata;model;favorite;moduleName="";componentconfig={};componentSubscriptions=new B.w0;modelloaded=!1;constructor(e,t,s,i,n,l,o){this.broadcast=e,this.navigation=t,this.navigationtab=s,this.activatedRoute=i,this.metadata=n,this.model=l,this.favorite=o}ngOnInit(){this.moduleName=this.navigationtab.activeRoute.params.module,this.model.module=this.moduleName,this.model.id=this.navigationtab.activeRoute.params.id,this.model.getData(!0,"detailview",!0,!0).subscribe({next:e=>{this.modelloaded=!0},error:()=>{this.navigationtab.closeTab()}}),this.componentconfig=this.metadata.getComponentConfig("ObjectRecordView",this.moduleName),this.componentSubscriptions.add(this.broadcast.message$.subscribe((e=>{this.handleMessage(e)}))),this.componentSubscriptions.add(this.model.data$.subscribe((()=>this.setTabTitle())))}ngOnDestroy(){this.componentSubscriptions.unsubscribe()}handleMessage(e){if("model.save"===e.messagetype)this.model.module===e.messagedata.module&&this.model.id===e.messagedata.id&&(this.model.setData(e.messagedata.data),this.navigationtab.setTabInfo({displayname:e.messagedata.data.summary_text,displaymodule:this.model.module}))}setTabTitle(){this.navigationtab.setTabInfo({displayname:this.model.getField("summary_text"),displaymodule:this.model.module})}static ɵfac=function(e){return new(e||ObjectRecordView)(m.Y36(ye.f),m.Y36(xe.G),m.Y36(we.d),m.Y36(o.gz),m.Y36(b.Pu),m.Y36(h.o),m.Y36($i.G))};static ɵcmp=m.Xpm({type:ObjectRecordView,selectors:[["object-recordview"]],features:[m._Bn([h.o])],decls:3,vars:2,consts:[[3,"componentset"],["system-to-bottom","",1,"slds-theme--default"]],template:function(e,t){1&e&&(m._UZ(0,"system-componentset",0),m.TgZ(1,"div",1),m._UZ(2,"system-componentset",0),m.qZA()),2&e&&(m.Q6J("componentset",t.componentconfig.header),m.xp6(2),m.Q6J("componentset",t.componentconfig.main))},dependencies:[Ki.E,q.H],encapsulation:2})}return ObjectRecordView})();const Wi=["contentcontainer"];let en=(()=>{class ObjectRecordViewDetail1{metadata;model;elementRef;contentcontainer;initialized=!1;componentconfig={};constructor(e,t,s){this.metadata=e,this.model=t,this.elementRef=s}ngOnInit(){this.getComponentconfig()}getComponentconfig(){_.isEmpty(this.componentconfig)&&(this.componentconfig=this.metadata.getComponentConfig("ObjectRecordViewDetail1",this.model.module))}static ɵfac=function(e){return new(e||ObjectRecordViewDetail1)(m.Y36(b.Pu),m.Y36(h.o),m.Y36(m.SBq))};static ɵcmp=m.Xpm({type:ObjectRecordViewDetail1,selectors:[["object-recordview-detail-1"]],viewQuery:function(e,t){if(1&e&&m.Gf(Wi,7,m.s_b),2&e){let e;m.iGM(e=m.CRH())&&(t.contentcontainer=e.first)}},decls:2,vars:1,consts:[[1,"slds-p-around--small","slds-height_full"],[3,"componentset"]],template:function(e,t){1&e&&(m.TgZ(0,"div",0),m._UZ(1,"system-componentset",1),m.qZA()),2&e&&(m.xp6(1),m.Q6J("componentset",t.componentconfig.main))},dependencies:[Ki.E],encapsulation:2})}return ObjectRecordViewDetail1})(),tn=(()=>{class ObjectRecordViewDetail2and1{metadata;model;initialized=!1;componentconfig={};constructor(e,t){this.metadata=e,this.model=t}ngOnInit(){this.getComponentconfig()}getComponentconfig(){_.isEmpty(this.componentconfig)&&(this.componentconfig=this.metadata.getComponentConfig("ObjectRecordViewDetail2and1",this.model.module))}static ɵfac=function(e){return new(e||ObjectRecordViewDetail2and1)(m.Y36(b.Pu),m.Y36(h.o))};static ɵcmp=m.Xpm({type:ObjectRecordViewDetail2and1,selectors:[["object-recordview-detail-2and1"]],decls:5,vars:2,consts:[[1,"slds-grid","slds-wrap","slds-p-top--small","slds-height_full"],[1,"slds-col","slds-p-horizontal--small","slds-size--1-of-1","slds-medium-size--1-of-2","slds-large-size--2-of-3","slds-height_full"],[3,"componentset"],[1,"slds-col","slds-p-horizontal--small","slds-size--1-of-1","slds-medium-size--1-of-2","slds-large-size--1-of-3","slds-height_full"]],template:function(e,t){1&e&&(m.TgZ(0,"div",0)(1,"div",1),m._UZ(2,"system-componentset",2),m.qZA(),m.TgZ(3,"div",3),m._UZ(4,"system-componentset",2),m.qZA()()),2&e&&(m.xp6(2),m.Q6J("componentset",t.componentconfig.main),m.xp6(2),m.Q6J("componentset",t.componentconfig.sidebar))},dependencies:[Ki.E],encapsulation:2})}return ObjectRecordViewDetail2and1})(),sn=(()=>{class ObjectRecordViewDetailsplit{metadata;model;componentconfig={};constructor(e,t){this.metadata=e,this.model=t}ngOnInit(){this.getComponentconfig()}getComponentconfig(){(_.isEmpty(this.componentconfig)||!this.componentconfig.left&&!this.componentconfig.right)&&(this.componentconfig=this.metadata.getComponentConfig("ObjectRecordViewDetailsplit",this.model.module))}static ɵfac=function(e){return new(e||ObjectRecordViewDetailsplit)(m.Y36(b.Pu),m.Y36(h.o))};static ɵcmp=m.Xpm({type:ObjectRecordViewDetailsplit,selectors:[["object-recordview-detail-split"]],decls:5,vars:2,consts:[[1,"slds-grid","slds-wrap","slds-p-top--small","slds-height_full"],[1,"slds-col","slds-p-horizontal--small","slds-size--1-of-1","slds-medium-size--1-of-2","slds-large-size--1-of-2","slds-height_full"],[3,"componentset"]],template:function(e,t){1&e&&(m.TgZ(0,"div",0)(1,"div",1),m._UZ(2,"system-componentset",2),m.qZA(),m.TgZ(3,"div",1),m._UZ(4,"system-componentset",2),m.qZA()()),2&e&&(m.xp6(2),m.Q6J("componentset",t.componentconfig.left),m.xp6(2),m.Q6J("componentset",t.componentconfig.right))},dependencies:[Ki.E],encapsulation:2})}return ObjectRecordViewDetailsplit})();var nn=s(93333),ln=s(23814),on=s(54021),an=s(55931);function dn(e,t){if(1&e&&(m.TgZ(0,"span"),m._uU(1),m.qZA()),2&e){const e=m.oxw();m.xp6(1),m.Oqu(e.model.data.summary_text)}}function rn(e,t){1&e&&(m.TgZ(0,"span"),m._UZ(1,"system-label",17),m.qZA())}function cn(e,t){if(1&e){const e=m.EpF();m.TgZ(0,"div",18)(1,"object-edit-modal-dialog-duplicates-panel",19),m.NdJ("close",(function(){m.CHM(e);const t=m.oxw();return m.KtG(t.showDuplicates=!1)})),m.qZA()()}}const un=function(){return{displayLabels:!1}};let mn=(()=>{class ObjectRecordCreateContainer{router;language;model;view;metadata;modal;navigationtab;componentconfig;duplicates=[];showDuplicates=!1;showDuplicatesTable=!1;preventGoingToRecord=!1;constructor(e,t,s,i,n,l,o){this.router=e,this.language=t,this.model=s,this.view=i,this.metadata=n,this.modal=l,this.navigationtab=o,this.view.isEditable=!0,this.view.displayLinks=!1,this.view.setEditMode(),this.model.startEdit()}ngOnInit(){let e=this.navigationtab.activeRoute.params;this.model.module=e.module,this.model.id=e.id,this.model.initialize(),this.navigationtab.tabdata?.data&&this.model.setData(this.navigationtab.tabdata.data),this.componentconfig||(this.componentconfig=this.metadata.getComponentConfig(this.constructor.name,this.model.module)),this.metadata.getActionSetItems(this.componentconfig.actionset),this.setHeader()}setHeader(){this.navigationtab.setTabInfo({displaymodule:this.model.module,displayname:""!=this.model.module?this.language.getModuleName(this.model.module,!0):"",displayicon:"new"})}get duplicateCheckEnabled(){return this.model.isNew&&this.metadata.getModuleDuplicatecheck(this.model.module)}handleAction(e){switch(console.log(e),e){case"cancel":this.navigationtab.closeTab();break;case"save":this.navigationtab.closeTab(),this.model.goDetail(this.navigationtab?this.navigationtab.objecttab.parentid:null)}}static ɵfac=function(e){return new(e||ObjectRecordCreateContainer)(m.Y36(o.F0),m.Y36(g.d),m.Y36(h.o),m.Y36(Oe.e),m.Y36(b.Pu),m.Y36(V.o),m.Y36(we.d,8))};static ɵcmp=m.Xpm({type:ObjectRecordCreateContainer,selectors:[["object-record-create-container"]],inputs:{preventGoingToRecord:"preventGoingToRecord"},features:[m._Bn([h.o,Oe.e])],decls:19,vars:11,consts:[[1,"slds-page-header"],[1,"slds-grid"],[1,"slds-col","slds-has-flexi-truncate"],[1,"slds-media","slds-no-space","slds-grow"],[3,"module"],[1,"slds-media__body"],[1,"slds-text-title--caps","slds-line-height--reset"],[1,"slds-grid","slds-grid--vertical-align-center"],[1,"slds-page-header__title","slds-m-right--small","slds-align-middle","slds-truncate"],[3,"fieldset","system-view-provider"],[4,"ngIf"],[1,"slds-m-horizontal--x-small","slds-show--medium","slds-align--absolute-center"],[3,"actionset","actionemitter"],["system-to-bottom","",1,"slds-grid",3,"system-overlay-loading-spinner"],[1,"slds-grid--vertical","slds-grow"],[3,"componentSet"],["class","slds-size--1-of-3 slds-border--left",4,"ngIf"],["label","LBL_NEW"],[1,"slds-size--1-of-3","slds-border--left"],[3,"close"]],template:function(e,t){1&e&&(m.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),m._UZ(4,"system-icon",4),m.TgZ(5,"div",5)(6,"p",6),m._UZ(7,"system-label-modulename",4),m.qZA(),m.TgZ(8,"div",7)(9,"h1",8),m._UZ(10,"object-record-fieldset-horizontal-list",9),m.YNc(11,dn,2,1,"span",10),m.YNc(12,rn,2,0,"span",10),m.qZA()()()()(),m.TgZ(13,"div",11)(14,"object-action-container",12),m.NdJ("actionemitter",(function(e){return t.handleAction(e)})),m.qZA()()()(),m.TgZ(15,"div",13)(16,"div",14),m._UZ(17,"object-edit-modal-dialog-container",15),m.qZA(),m.YNc(18,cn,2,0,"div",16),m.qZA()),2&e&&(m.xp6(4),m.Q6J("module",t.model.module),m.xp6(3),m.Q6J("module",t.model.module),m.xp6(3),m.Q6J("fieldset",t.componentconfig.fieldset)("system-view-provider",m.DdM(10,un)),m.xp6(1),m.Q6J("ngIf",!t.componentconfig.fieldset&&t.model.data.summary_text),m.xp6(1),m.Q6J("ngIf",!t.componentconfig.fieldset&&!t.model.data.summary_text),m.xp6(2),m.Q6J("actionset",t.componentconfig.actionset),m.xp6(1),m.Q6J("system-overlay-loading-spinner",t.model.isSaving),m.xp6(2),m.Q6J("componentSet",t.componentconfig.componentset),m.xp6(1),m.Q6J("ngIf",t.showDuplicates))},dependencies:[i.O5,Z.f,I._,nn.M,q.H,ln.V,on._,N.S,zs.Z,ti,an.Z],encapsulation:2})}return ObjectRecordCreateContainer})();var gn=s(62613),hn=s(74778);function pn(e,t){if(1&e){const e=m.EpF();m.TgZ(0,"li")(1,"span",19),m.NdJ("click",(function(){const t=m.CHM(e).index,s=m.oxw(3);return m.KtG(s.removeTag(t))})),m._uU(2),m.qZA()()}if(2&e){const e=t.$implicit;m.xp6(2),m.hij(" ",e," ")}}function fn(e,t){if(1&e&&(m.ynx(0),m.TgZ(1,"ul",17),m.YNc(2,pn,3,1,"li",18),m.qZA(),m.BQk()),2&e){const e=m.oxw(2);m.xp6(2),m.Q6J("ngForOf",e.tags)}}function bn(e,t){1&e&&(m.TgZ(0,"div",20),m._UZ(1,"system-label",21),m.qZA())}function _n(e,t){if(1&e){const e=m.EpF();m.TgZ(0,"li",25),m.NdJ("click",(function(){const t=m.CHM(e).index,s=m.oxw(3);return m.KtG(s.addTag(t))})),m.TgZ(1,"span",26),m._uU(2),m.qZA()()}if(2&e){const e=t.$implicit;m.xp6(2),m.hij(" ",e,"")}}const vn=function(e,t){return[e,t]};function yn(e,t){if(1&e&&(m.TgZ(0,"div",27),m._uU(1),m.qZA()),2&e){const e=m.oxw(3);m.xp6(1),m.Oqu(e.language.getLabelFormatted("LBL_NUMBER_OF_SHOWN_TAGS",m.WLB(1,vn,e.offeredTags.length,e.numberFilteredTags)))}}function xn(e,t){if(1&e&&(m.ynx(0),m.TgZ(1,"ul",22),m.YNc(2,_n,3,1,"li",23),m.qZA(),m.YNc(3,yn,2,4,"div",24),m.BQk()),2&e){const e=m.oxw(2);m.xp6(2),m.Q6J("ngForOf",e.offeredTags),m.xp6(1),m.Q6J("ngIf",e.numberFilteredTags-e.offeredTagsMaxLength>0)}}function wn(e,t){1&e&&(m.TgZ(0,"div",28),m._UZ(1,"system-label",29),m.qZA())}function Zn(e,t){if(1&e){const e=m.EpF();m.ynx(0),m.TgZ(1,"div",8),m.YNc(2,fn,3,1,"ng-container",2),m.YNc(3,bn,2,0,"ng-template",null,9,m.W1O),m.qZA(),m.TgZ(5,"div",10)(6,"div",11)(7,"system-utility-icon",12),m.NdJ("click",(function(){m.CHM(e);const t=m.oxw();return m.KtG(t.clearFilter())})),m.qZA(),m.TgZ(8,"input",13,14),m.NdJ("ngModelChange",(function(t){m.CHM(e);const s=m.oxw();return m.KtG(s.filter=t)}))("keyup",(function(){m.CHM(e);const t=m.oxw();return m.KtG(t.changeFilter())})),m.qZA()()(),m.TgZ(10,"div",15),m.YNc(11,xn,4,2,"ng-container",2),m.YNc(12,wn,2,0,"ng-template",null,16,m.W1O),m.qZA(),m.BQk()}if(2&e){const e=m.MAs(4),t=m.MAs(13),s=m.oxw();m.xp6(2),m.Q6J("ngIf",s.tags.length)("ngIfElse",e),m.xp6(5),m.Q6J("icon","clear")("size","x-small")("addclasses","slds-input__icon slds-input__icon_right slds-icon-text-default"),m.xp6(1),m.s9C("placeholder",s.language.getLabel("LBL_ENTER_TAGS_FOR_TAGS")),m.Q6J("ngModel",s.filter),m.xp6(3),m.Q6J("ngIf",s.offeredTags.length)("ngIfElse",t)}}function Tn(e,t){1&e&&m._UZ(0,"system-spinner")}let Cn=(()=>{class ObjectPageHeaderTagPicker{language;backend;toast;model={};self={};tags=[];allTags=[];offeredTags=[];offeredTagsMaxLength=20;numberFilteredTags;filter="";tagsAreParsed=!1;allTagsAreLoaded=!1;constructor(e,t,s){this.language=e,this.backend=t,this.toast=s}ngOnInit(){this.backend.getRequest("systags").subscribe((e=>{e.systags&&(this.allTags=e.systags),this.allTagsAreLoaded=!0,this.doFilter()}),(e=>{this.toast.sendToast("Error loading list of available tags.","error",null),this.closeModal()})),this.model.isLoading?this.model.data$.subscribe((()=>{window.setTimeout((()=>{this.parseTags()}),5e3)})):this.parseTags()}parseTags(){try{this.tags=JSON.parse(this.model.data.tags)}catch(e){this.tags=[]}this.tagsAreParsed=!0,this.doFilter()}changeFilter(){this.doFilter()}clearFilter(){this.filter="",this.doFilter()}doFilter(){if(this.tagsAreParsed&&this.allTagsAreLoaded){this.offeredTags.length=0,this.numberFilteredTags=0;for(let e of this.allTags)(0===this.filter.length||e.toLowerCase().indexOf(this.filter.toLowerCase())>=0)&&-1===this.tags.indexOf(e)&&this.numberFilteredTags++<this.offeredTagsMaxLength&&this.offeredTags.push(e)}}addTag(e){-1===this.tags.indexOf(this.offeredTags[e])&&(this.tags.push(this.offeredTags[e]),this.tags.sort(),this.offeredTags.splice(e,1))}removeTag(e){this.tags.splice(e,1),this.doFilter()}saveAndClose(){this.model.setField("tags",JSON.stringify(this.tags)),this.model.save(),this.closeModal()}closeModal(){this.self.destroy()}onModalEscX(){this.closeModal()}static ɵfac=function(e){return new(e||ObjectPageHeaderTagPicker)(m.Y36(g.d),m.Y36(W.y),m.Y36(he.A))};static ɵcmp=m.Xpm({type:ObjectPageHeaderTagPicker,selectors:[["object-page-header-tag-picker"]],decls:12,vars:2,consts:[[3,"close"],["label","LBL_ASSIGN_TAGS"],[4,"ngIf","ngIfElse"],["notReady",""],[1,"slds-button","slds-button--neutral",3,"click"],["label","LBL_CANCEL"],[1,"slds-button","slds-button--brand",3,"click"],["label","LBL_SAVE"],[1,"slds-m-bottom--medium"],["noAssignedTags",""],[1,"slds-form-element"],[1,"slds-form-element__control","slds-input-has-icon","slds-input-has-icon_right"],[3,"icon","size","addclasses","click"],["type","text",1,"slds-input",3,"placeholder","ngModel","ngModelChange","keyup"],["fieldFilter",""],[1,"slds-m-top--small"],["noOfferedTags",""],["role","presentation",1,"selectedTags","slds-listbox","slds-listbox_horizontal",2,"line-height","1.7rem"],[4,"ngFor","ngForOf"],[1,"slds-badge",3,"click"],[2,"font-style","italic"],["label","LBL_NO_TAGS_ASSIGNED"],["role","listbox",1,"slds-listbox","slds-listbox_horizontal","offeredTags",2,"line-height","1.5rem"],["role","presentation","style","margin-top:0.2rem",3,"click",4,"ngFor","ngForOf"],["class","slds-m-top--xx-small","style","font-style:italic;text-align:right",4,"ngIf"],["role","presentation",2,"margin-top","0.2rem",3,"click"],[1,"slds-badge","slds-badge_inverse"],[1,"slds-m-top--xx-small",2,"font-style","italic","text-align","right"],[1,"slds-m-top--xx-small",2,"font-style","italic"],["label","LBL_NO_TAGS_FOUND"]],template:function(e,t){if(1&e&&(m.TgZ(0,"system-modal")(1,"system-modal-header",0),m.NdJ("close",(function(){return t.closeModal()})),m._UZ(2,"system-label",1),m.qZA(),m.TgZ(3,"system-modal-content"),m.YNc(4,Zn,14,9,"ng-container",2),m.YNc(5,Tn,1,0,"ng-template",null,3,m.W1O),m.qZA(),m.TgZ(7,"system-modal-footer")(8,"button",4),m.NdJ("click",(function(){return t.closeModal()})),m._UZ(9,"system-label",5),m.qZA(),m.TgZ(10,"button",6),m.NdJ("click",(function(){return t.saveAndClose()})),m._UZ(11,"system-label",7),m.qZA()()()),2&e){const e=m.MAs(6);m.xp6(4),m.Q6J("ngIf",t.allTagsAreLoaded&&t.tagsAreParsed)("ngIfElse",e)}},dependencies:[i.sg,i.O5,l.Fj,l.JJ,l.On,I._,Fe.j,qe.x,Ee.p,Ye.y,Mt.W,S.r],styles:[".offeredTags[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{cursor:pointer}",".selectedTags[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-bottom:.125rem}",".selectedTags[_ngcontent-%COMP%]{margin-bottom:-.125rem}","[_ngcontent-%COMP%]::placeholder{font-style:italic}",".slds-badge[_ngcontent-%COMP%]{font-size:.75rem;line-height:2;padding-top:.1875rem;text-transform:none}",".slds-badge[_ngcontent-%COMP%]:hover{cursor:pointer;filter:brightness(90%)}",".slds-badge.slds-badge_inverse[_ngcontent-%COMP%]:hover{filter:brightness(133%)}"]})}return ObjectPageHeaderTagPicker})();const kn=["object-page-header-detail-row-field",""];let An=(()=>{class ObjectPageHeaderDetailRowField{moduleName="";field={};static ɵfac=function(e){return new(e||ObjectPageHeaderDetailRowField)};static ɵcmp=m.Xpm({type:ObjectPageHeaderDetailRowField,selectors:[["","object-page-header-detail-row-field",""]],inputs:{moduleName:"moduleName",field:"field"},attrs:kn,decls:2,vars:3,consts:[[1,""],[3,"field","fieldconfig","fielddisplayclass"]],template:function(e,t){1&e&&(m.TgZ(0,"div",0),m._UZ(1,"field-container",1),m.qZA()),2&e&&(m.xp6(1),m.Q6J("field",t.field.field)("fieldconfig",t.field.fieldconfig)("fielddisplayclass","slds-text-body--regular slds-truncate slds-m-vertical--xx-small"))},dependencies:[Ne.j],encapsulation:2})}return ObjectPageHeaderDetailRowField})();function Ln(e,t){if(1&e&&m._UZ(0,"li",9),2&e){const e=m.oxw().$implicit;m.Q6J("field",e)}}function In(e,t){if(1&e&&(m.ynx(0),m.YNc(1,Ln,1,1,"li",8),m.BQk()),2&e){const e=t.$implicit,s=m.oxw(2);m.xp6(1),m.Q6J("ngIf",s.displayField(e))}}function Sn(e,t){if(1&e&&(m.TgZ(0,"ul",6),m.YNc(1,In,2,1,"ng-container",7),m.qZA()),2&e){const e=m.oxw();m.xp6(1),m.Q6J("ngForOf",e.getFields())}}function Mn(e,t){if(1&e&&m._UZ(0,"field-label",16),2&e){const e=m.oxw(2).$implicit;m.Q6J("fieldname",e.field)("fieldconfig",e.fieldconfig)("addclasses","slds-truncate")}}function Jn(e,t){1&e&&(m.TgZ(0,"span",17),m._uU(1,":"),m.qZA())}function On(e,t){if(1&e&&(m.TgZ(0,"li",12),m.YNc(1,Mn,1,3,"field-label",13),m.YNc(2,Jn,2,0,"span",14),m._UZ(3,"field-container",15),m.qZA()),2&e){const e=m.oxw().$implicit,t=m.oxw(2);m.xp6(1),m.Q6J("ngIf",t.showLabel(e.fieldconfig)),m.xp6(1),m.Q6J("ngIf",!e.fieldconfig.hidelabel),m.xp6(1),m.Q6J("field",e.field)("fieldconfig",e.fieldconfig)("fielddisplayclass","slds-truncate")}}function Nn(e,t){if(1&e&&(m.ynx(0),m.YNc(1,On,4,5,"li",11),m.BQk()),2&e){const e=t.$implicit,s=m.oxw(2);m.xp6(1),m.Q6J("ngIf",s.model.data[e.field]&&s.displayField(e))}}function Fn(e,t){if(1&e&&(m.TgZ(0,"ul",10),m.YNc(1,Nn,2,1,"ng-container",7),m.qZA()),2&e){const e=m.oxw();m.xp6(1),m.Q6J("ngForOf",e.fields)}}let qn=(()=>{class ObjectPageHeaderDetailRow{metadata;model;view;fieldSet="";collapsed=!0;fields=[];constructor(e,t,s){this.metadata=e,this.model=t,this.view=s}ngOnInit(){this.setLabelLength(),this.fields=this.getFields()}getFields(){let e=this.metadata.getFieldSetFields(this.fieldSet);if(this.model.acl_fieldcontrol){let t=[];for(let s in e)this.metadata.hasField(this.model.module,e[s].field)&&(this.model.acl_fieldcontrol[e[s].field]&&"1"===this.model.acl_fieldcontrol[e[s].field]||t.push(e[s]));return t}return e}displayField(e){return!e.fieldconfig?.requiredmodelstate||this.model.checkModelState(e.fieldconfig.requiredmodelstate)}toggleCollapsed(){this.collapsed=!this.collapsed,this.setLabelLength()}get toggleIcon(){return this.collapsed?"chevrondown":"chevronup"}setLabelLength(){this.collapsed?(this.view.displayLabels=!1,this.view.labels="short"):(this.view.displayLabels=!0,this.view.labels="default")}showLabel(e){return!0!==e.hidelabel}static ɵfac=function(e){return new(e||ObjectPageHeaderDetailRow)(m.Y36(b.Pu),m.Y36(h.o),m.Y36(Oe.e))};static ɵcmp=m.Xpm({type:ObjectPageHeaderDetailRow,selectors:[["object-page-header-detail-row"]],inputs:{fieldSet:"fieldSet",collapsed:"collapsed"},features:[m._Bn([Oe.e])],decls:7,vars:3,consts:[[1,"slds-grid","slds-grid--vertical-align-start"],["class","slds-grid",4,"ngIf"],["class","slds-list--horizontal slds-has-dividers--left",4,"ngIf"],[1,"slds-col--bump-left"],[1,"slds-button","slds-button--icon",3,"click"],[3,"icon"],[1,"slds-grid"],[4,"ngFor","ngForOf"],["object-page-header-detail-row-field","","class","slds-m-right--medium",3,"field",4,"ngIf"],["object-page-header-detail-row-field","",1,"slds-m-right--medium",3,"field"],[1,"slds-list--horizontal","slds-has-dividers--left"],["class","slds-item slds-grid slds-grid--vertical-align-center",4,"ngIf"],[1,"slds-item","slds-grid","slds-grid--vertical-align-center"],[3,"fieldname","fieldconfig","addclasses",4,"ngIf"],["class","slds-p-right--xx-small",4,"ngIf"],[3,"field","fieldconfig","fielddisplayclass"],[3,"fieldname","fieldconfig","addclasses"],[1,"slds-p-right--xx-small"]],template:function(e,t){1&e&&(m.TgZ(0,"div",0)(1,"div"),m.YNc(2,Sn,2,1,"ul",1),m.YNc(3,Fn,2,1,"ul",2),m.qZA(),m.TgZ(4,"div",3)(5,"button",4),m.NdJ("click",(function(){return t.toggleCollapsed()})),m._UZ(6,"system-button-icon",5),m.qZA()()()),2&e&&(m.xp6(2),m.Q6J("ngIf",!t.collapsed),m.xp6(1),m.Q6J("ngIf",t.collapsed),m.xp6(3),m.Q6J("icon",t.toggleIcon))},dependencies:[i.sg,i.O5,Si.q,Ne.j,w.J,An],encapsulation:2})}return ObjectPageHeaderDetailRow})(),En=(()=>{class ObjectPageHeaderDetails{elementref;activatedRoute;router;model;metadata;componentconfig={};collapsed=!1;fieldset;constructor(e,t,s,i,n){this.elementref=e,this.activatedRoute=t,this.router=s,this.model=i,this.metadata=n}ngOnInit(){"{}"==JSON.stringify(this.componentconfig)&&(this.componentconfig=this.metadata.getComponentConfig("ObjectPageHeaderDetails",this.model.module),this.collapsed=!!this.componentconfig.collapsed&&this.componentconfig.collapsed,this.fieldset=this.componentconfig.fieldset?this.componentconfig.fieldset:"")}static ɵfac=function(e){return new(e||ObjectPageHeaderDetails)(m.Y36(m.SBq),m.Y36(o.gz),m.Y36(o.F0),m.Y36(h.o),m.Y36(b.Pu))};static ɵcmp=m.Xpm({type:ObjectPageHeaderDetails,selectors:[["object-page-header-details"]],decls:2,vars:2,consts:[[1,"slds-p-horizontal--medium","slds-p-vertical--xx-small","slds-border--bottom","slds-scrollable--x"],[3,"fieldSet","collapsed"]],template:function(e,t){1&e&&(m.TgZ(0,"div",0),m._UZ(1,"object-page-header-detail-row",1),m.qZA()),2&e&&(m.xp6(1),m.Q6J("fieldSet",t.fieldset)("collapsed",t.collapsed))},dependencies:[qn],encapsulation:2})}return ObjectPageHeaderDetails})();var Yn=s(96701);let Dn=(()=>{class ObjectTabContainerItem{metadata;fielderrorgroup;model;componentRefs=[];initialized=!1;componentset;taberrors=new m.vpe;constructor(e,t,s){this.metadata=e,this.fielderrorgroup=t,this.model=s}ngOnInit(){this.fielderrorgroup.change$.subscribe((e=>{this.taberrors.emit(e)}))}ngAfterViewInit(){this.initialized=!0}ngOnDestroy(){for(let e of this.componentRefs)e.destroy()}static ɵfac=function(e){return new(e||ObjectTabContainerItem)(m.Y36(b.Pu),m.Y36(Yn.O),m.Y36(h.o))};static ɵcmp=m.Xpm({type:ObjectTabContainerItem,selectors:[["object-tab-container-item"]],inputs:{componentset:"componentset"},outputs:{taberrors:"taberrors"},features:[m._Bn([Yn.O])],decls:1,vars:1,consts:[[3,"componentset"]],template:function(e,t){1&e&&m._UZ(0,"system-componentset",0),2&e&&m.Q6J("componentset",t.componentset)},dependencies:[Ki.E],encapsulation:2})}return ObjectTabContainerItem})();var Un=s(82995);function Qn(e,t){if(1&e&&(m.ynx(0),m._UZ(1,"system-label",2),m.BQk()),2&e){const e=m.oxw();m.xp6(1),m.Q6J("label",e.tab.name)}}let Rn=(()=>{class ObjectTabContainerItemHeader{metadata;language;tab=[];constructor(e,t){this.metadata=e,this.language=t}get displayName(){return!this.tab.headercomponent&&this.tab.name&&""!=this.tab.name}static ɵfac=function(e){return new(e||ObjectTabContainerItemHeader)(m.Y36(b.Pu),m.Y36(g.d))};static ɵcmp=m.Xpm({type:ObjectTabContainerItemHeader,selectors:[["object-tab-container-item-header"]],inputs:{tab:"tab"},decls:2,vars:2,consts:[[4,"ngIf"],[3,"component"],[3,"label"]],template:function(e,t){1&e&&(m.YNc(0,Qn,2,1,"ng-container",0),m._UZ(1,"system-dynamic-component",1)),2&e&&(m.Q6J("ngIf",t.displayName),m.xp6(1),m.Q6J("component",t.tab.headercomponent))},dependencies:[i.O5,Un.T,I._],encapsulation:2})}return ObjectTabContainerItemHeader})();const jn=function(e,t){return{"slds-active":e,"slds-hide":t}};function Bn(e,t){if(1&e){const e=m.EpF();m.TgZ(0,"li",4),m.NdJ("click",(function(){const t=m.CHM(e).index,s=m.oxw();return m.KtG(s.setActiveTab(t))})),m.TgZ(1,"a",5),m._UZ(2,"object-tab-container-item-header",6),m.qZA()()}if(2&e){const e=t.$implicit,s=t.index,i=m.oxw();m.Q6J("ngClass",m.WLB(2,jn,s===i.activeTab,i.isHidden(e))),m.xp6(2),m.Q6J("tab",e)}}function Gn(e,t){if(1&e&&m._UZ(0,"object-tab-container-item",10),2&e){const e=m.oxw(2).$implicit;m.Q6J("componentset",e.componentset)}}const Pn=function(e,t,s){return{"slds-show":e,"slds-hide":t,"slds-p-bottom--none":s}};function Hn(e,t){if(1&e&&(m.TgZ(0,"div",8),m.YNc(1,Gn,1,1,"object-tab-container-item",9),m.qZA()),2&e){const e=m.oxw(),t=e.index,s=e.$implicit,i=m.oxw();m.Q6J("ngClass",m.kEZ(2,Pn,t==i.activeTab,t!=i.activeTab,null==i.componentconfig?null:i.componentconfig.noBottomPadding)),m.xp6(1),m.Q6J("ngIf",s.componentset)}}function zn(e,t){if(1&e&&(m.ynx(0),m.YNc(1,Hn,2,6,"div",7),m.BQk()),2&e){const e=t.index,s=m.oxw();m.xp6(1),m.Q6J("ngIf",s.checkRenderTab(e))}}let Vn=(()=>{class ObjectTabContainer{language;metadata;model;session;activeTab=0;activatedTabs=[0];componentconfig;tabs=[];constructor(e,t,s,i){this.language=e,this.metadata=t,this.model=s,this.session=i}ngOnInit(){if(this.componentconfig&&this.componentconfig.componentset){let e=this.metadata.getComponentSetObjects(this.componentconfig.componentset);this.tabs=[];for(let t of e)t.componentconfig.adminonly&&!this.session.isAdmin||this.tabs.push(t.componentconfig)}else{let e=this.metadata.getComponentConfig("ObjectTabContainer",this.model.module),t=this.metadata.getComponentSetObjects(e.componentset);this.tabs=[];for(let e of t)e.componentconfig.adminonly&&!this.session.isAdmin||this.tabs.push(e.componentconfig)}}isHidden(e){return!(!e.acl||this.model.checkAccess(e.acl))||!(!e.requiredmodelstate||this.model.checkModelState(e.requiredmodelstate))}setActiveTab(e){this.activatedTabs.push(e),this.activeTab=e}checkRenderTab(e){return e==this.activeTab||this.activatedTabs.indexOf(e)>-1||this.tabs&&this.tabs[e].forcerender}static ɵfac=function(e){return new(e||ObjectTabContainer)(m.Y36(g.d),m.Y36(b.Pu),m.Y36(h.o),m.Y36(Qt.n))};static ɵcmp=m.Xpm({type:ObjectTabContainer,selectors:[["object-tab-container"]],decls:4,vars:2,consts:[[1,"slds-tabs--default","slds-height_full","slds-grid","slds-grid--vertical"],["role","tablist",1,"slds-tabs--default__nav"],["class","slds-tabs--default__item slds-text-title--caps","role","presentation",3,"ngClass","click",4,"ngFor","ngForOf"],[4,"ngFor","ngForOf"],["role","presentation",1,"slds-tabs--default__item","slds-text-title--caps",3,"ngClass","click"],["href","javascript:void(0);","role","tab","aria-selected","false",1,"slds-tabs--default__link"],[3,"tab"],["class","slds-tabs--default__content slds-grow","style","min-height: 0","role","tabpanel",3,"ngClass",4,"ngIf"],["role","tabpanel",1,"slds-tabs--default__content","slds-grow",2,"min-height","0",3,"ngClass"],[3,"componentset",4,"ngIf"],[3,"componentset"]],template:function(e,t){1&e&&(m.TgZ(0,"div",0)(1,"ul",1),m.YNc(2,Bn,3,5,"li",2),m.qZA(),m.YNc(3,zn,2,1,"ng-container",3),m.qZA()),2&e&&(m.xp6(2),m.Q6J("ngForOf",t.tabs),m.xp6(1),m.Q6J("ngForOf",t.tabs))},dependencies:[i.mk,i.sg,i.O5,Dn,Rn],encapsulation:2})}return ObjectTabContainer})();const $n=["container"];let Kn=(()=>{class ObjectVerticalTabContainerItem{metadata;fielderrorgroup;container;componentset;taberrors=new m.vpe;constructor(e,t){this.metadata=e,this.fielderrorgroup=t}ngOnInit(){this.fielderrorgroup.change$.subscribe((e=>{this.taberrors.emit(e)}))}ngAfterViewInit(){for(let e of this.metadata.getComponentSetObjects(this.componentset))this.metadata.addComponent(e.component,this.container).subscribe((t=>{t.instance.componentconfig=e.componentconfig}))}static ɵfac=function(e){return new(e||ObjectVerticalTabContainerItem)(m.Y36(b.Pu),m.Y36(Yn.O))};static ɵcmp=m.Xpm({type:ObjectVerticalTabContainerItem,selectors:[["object-vertical-tab-container-item"]],viewQuery:function(e,t){if(1&e&&m.Gf($n,7,m.s_b),2&e){let e;m.iGM(e=m.CRH())&&(t.container=e.first)}},inputs:{componentset:"componentset"},outputs:{taberrors:"taberrors"},features:[m._Bn([Yn.O])],decls:2,vars:0,consts:[["container",""]],template:function(e,t){1&e&&m._UZ(0,"div",null,0)},encapsulation:2})}return ObjectVerticalTabContainerItem})();function Xn(e,t){if(1&e&&(m.ynx(0),m._UZ(1,"system-label",1),m.BQk()),2&e){const e=m.oxw();m.xp6(1),m.Q6J("label",e.tab.name)}}let Wn=(()=>{class ObjectVerticalTabContainerItemHeader{language;tab=[];constructor(e){this.language=e}get displayName(){return this.tab.name&&""!=this.tab.name}static ɵfac=function(e){return new(e||ObjectVerticalTabContainerItemHeader)(m.Y36(g.d))};static ɵcmp=m.Xpm({type:ObjectVerticalTabContainerItemHeader,selectors:[["object-vertical-tab-container-item-header"]],inputs:{tab:"tab"},decls:1,vars:1,consts:[[4,"ngIf"],[3,"label"]],template:function(e,t){1&e&&m.YNc(0,Xn,2,1,"ng-container",0),2&e&&m.Q6J("ngIf",t.displayName)},dependencies:[i.O5,I._],encapsulation:2})}return ObjectVerticalTabContainerItemHeader})();const el=["tabscontainer"];function tl(e,t){if(1&e&&(m.TgZ(0,"span",9),m._uU(1),m.qZA()),2&e){const e=m.oxw().$implicit;m.xp6(1),m.Oqu(e.hasErrors)}}const sl=function(e,t){return{"slds-is-active":e,"slds-hide":t}};function il(e,t){if(1&e){const e=m.EpF();m.TgZ(0,"li",5),m.NdJ("click",(function(){const t=m.CHM(e).index,s=m.oxw();return m.KtG(s.setActiveTab(t))})),m.TgZ(1,"a",6),m.YNc(2,tl,2,1,"span",7),m._UZ(3,"object-vertical-tab-container-item-header",8),m.qZA()()}if(2&e){const e=t.$implicit,s=t.index,i=m.oxw();m.Q6J("ngClass",m.WLB(3,sl,s===i.activeTab,i.isHidden(e))),m.xp6(2),m.Q6J("ngIf",e.hasErrors),m.xp6(1),m.Q6J("tab",e)}}function nl(e,t){if(1&e){const e=m.EpF();m.TgZ(0,"object-vertical-tab-container-item",13),m.NdJ("taberrors",(function(t){m.CHM(e);const s=m.oxw(2).index,i=m.oxw();return m.KtG(i.showErrorsOnTab(s,t))})),m.qZA()}if(2&e){const e=m.oxw(2).$implicit;m.Q6J("componentset",e.componentset)}}function ll(e,t){if(1&e&&(m.TgZ(0,"div",11),m.YNc(1,nl,1,1,"object-vertical-tab-container-item",12),m.qZA()),2&e){const e=m.oxw(),t=e.index,s=e.$implicit,i=m.oxw();m.Q6J("ngStyle",i.getDisplay(t)),m.xp6(1),m.Q6J("ngIf",s.componentset)}}function ol(e,t){if(1&e&&(m.ynx(0),m.YNc(1,ll,2,2,"div",10),m.BQk()),2&e){const e=t.index,s=m.oxw();m.xp6(1),m.Q6J("ngIf",s.checkRenderTab(e))}}let al=(()=>{class ObjectVerticalTabContainer{language;metadata;session;model;tabscontainer;activeTab=0;activatedTabs=[0];componentconfig;tabs=[];constructor(e,t,s,i){this.language=e,this.metadata=t,this.session=s,this.model=i}ngOnInit(){if(this.componentconfig&&this.componentconfig.componentset){let e=this.metadata.getComponentSetObjects(this.componentconfig.componentset);this.componentconfig=[];for(let t of e)t.componentconfig.adminonly&&!this.session.isAdmin||this.tabs.push(t.componentconfig)}}isHidden(e){return!(!e.acl||this.model.checkAccess(e.acl))||!(!e.requiredmodelstate||this.model.checkModelState(e.requiredmodelstate))}setActiveTab(e){this.activatedTabs.push(e),this.activeTab=e}checkRenderTab(e){return e==this.activeTab||this.activatedTabs.indexOf(e)>-1||this.tabs&&this.tabs[e].forcerender}getDisplay(e){let t=this.tabscontainer.element.nativeElement.getBoundingClientRect();return e!==this.activeTab?{display:"none"}:{height:"calc(99.9vh - "+t.top+"px)"}}getTabsStyle(){return{height:"calc(99.9vh - "+this.tabscontainer.element.nativeElement.getBoundingClientRect().top+"px)",overflow:"auto","overflow-x":"hidden"}}showErrorsOnTab(e,t){this.componentconfig[e].hasErrors=t}static ɵfac=function(e){return new(e||ObjectVerticalTabContainer)(m.Y36(g.d),m.Y36(b.Pu),m.Y36(Qt.n),m.Y36(h.o))};static ɵcmp=m.Xpm({type:ObjectVerticalTabContainer,selectors:[["object-vertical-tab-container"]],viewQuery:function(e,t){if(1&e&&m.Gf(el,7,m.s_b),2&e){let e;m.iGM(e=m.CRH())&&(t.tabscontainer=e.first)}},decls:5,vars:3,consts:[[1,"slds-vertical-tabs",2,"border","none"],["role","tablist","aria-orientation","vertical",1,"slds-vertical-tabs__nav","slds-scrollable--y",3,"ngStyle"],["tabscontainer",""],["class","slds-vertical-tabs__nav-item slds-text-title--caps","role","presentation",3,"ngClass","click",4,"ngFor","ngForOf"],[4,"ngFor","ngForOf"],["role","presentation",1,"slds-vertical-tabs__nav-item","slds-text-title--caps",3,"ngClass","click"],["href","javascript:void(0)","role","tab","tabindex","-1","aria-selected","false",1,"slds-vertical-tabs__link"],["class","slds-badge","title","Invalid fields!",4,"ngIf"],[3,"tab"],["title","Invalid fields!",1,"slds-badge"],["class","slds-vertical-tabs__content slds-scrollable--y slds-p-around--xx-small slds-show","role","tabpanel",3,"ngStyle",4,"ngIf"],["role","tabpanel",1,"slds-vertical-tabs__content","slds-scrollable--y","slds-p-around--xx-small","slds-show",3,"ngStyle"],[3,"componentset","taberrors",4,"ngIf"],[3,"componentset","taberrors"]],template:function(e,t){1&e&&(m.TgZ(0,"div",0)(1,"ul",1,2),m.YNc(3,il,4,6,"li",3),m.qZA(),m.YNc(4,ol,2,1,"ng-container",4),m.qZA()),2&e&&(m.xp6(1),m.Q6J("ngStyle",t.getTabsStyle()),m.xp6(2),m.Q6J("ngForOf",t.tabs),m.xp6(1),m.Q6J("ngForOf",t.tabs))},dependencies:[i.mk,i.sg,i.O5,i.PC,Kn,Wn],styles:[".slds-is-active[_ngcontent-%COMP%]{border-left:6px solid #ca1b21;border-right:1px solid #dddbda;color:#3e3e3c;font-weight:600}.slds-is-active[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none!important}",".slds-badge[_ngcontent-%COMP%]{background-color:#c00;color:#fff;font-weight:700;padding:.125rem .4rem}"]})}return ObjectVerticalTabContainer})();var dl=s(12646),rl=s(20701);function cl(e,t){1&e&&(m.TgZ(0,"div",4),m._UZ(1,"system-card-stencil")(2,"system-card-stencil")(3,"system-card-stencil"),m.qZA())}function ul(e,t){if(1&e&&m._UZ(0,"system-componentset",5),2&e){const e=m.oxw(2);m.Q6J("componentset",e.componentset)}}function ml(e,t){if(1&e&&(m.ynx(0),m.YNc(1,cl,4,0,"div",2),m.YNc(2,ul,1,1,"ng-template",null,3,m.W1O),m.BQk()),2&e){const e=m.MAs(3),t=m.oxw();m.xp6(1),m.Q6J("ngIf",!t.hasAccess||t.model.isLoading)("ngIfElse",e)}}function gl(e,t){1&e&&(m.TgZ(0,"div",6)(1,"system-illustration-no-data",7),m._UZ(2,"system-label",8),m.qZA()())}let hl=(()=>{class ObjectRelateContainer{model;metadata;componentconfig={};componentset;constructor(e,t){this.model=e,this.metadata=t}ngOnInit(){if(this.componentconfig.componentset)this.componentset=this.componentconfig.componentset;else{let e=this.metadata.getComponentConfig("ObjectRelateContainer",this.model.module);this.componentset=e.componentset}}get hasAccess(){return this.model.checkAccess("detail")}static ɵfac=function(e){return new(e||ObjectRelateContainer)(m.Y36(h.o),m.Y36(b.Pu))};static ɵcmp=m.Xpm({type:ObjectRelateContainer,selectors:[["ng-component"]],decls:3,vars:2,consts:[[4,"ngIf","ngIfElse"],["nocomponentset",""],["class","slds-grid slds-grid--vertical",4,"ngIf","ngIfElse"],["content",""],[1,"slds-grid","slds-grid--vertical"],[3,"componentset"],[1,"slds-box","slds-box--border","slds-align--absolute-center"],[1,"slds-m-around--medium"],["label","LBL_NO_RELATED_ITEMS"]],template:function(e,t){if(1&e&&(m.YNc(0,ml,4,2,"ng-container",0),m.YNc(1,gl,3,0,"ng-template",null,1,m.W1O)),2&e){const e=m.MAs(2);m.Q6J("ngIf",t.componentset)("ngIfElse",e)}},dependencies:[i.O5,Ki.E,dl.t,I._,rl.r],encapsulation:2})}return ObjectRelateContainer})();var pl=s(81360),fl=s(20767),bl=s(48652),_l=s(83249),vl=s(84567),yl=s(37588);function xl(e,t){if(1&e&&(m.ynx(0),m.TgZ(1,"div",3),m._UZ(2,"object-relatedlist-table",4),m.qZA(),m.BQk()),2&e){const e=m.oxw();m.xp6(2),m.Q6J("listfields",e.listfields)("editable",e.editable)("editcomponentset",e.editcomponentset)("sequencefield",e.componentconfig.sequencefield)("listitemactionset",e.listitemactionset)}}function wl(e,t){1&e&&m._UZ(0,"system-illustration-no-access")}const Zl=function(e){return{"slds-hide":e}};let Tl=(()=>{class ObjectRelatedlistList extends _l.s{get hide(){return this.componentconfig.hideempty&&0==this.relatedmodels.count}get panelTitle(){return this.componentconfig.title?this.language.getLabel(this.componentconfig.title):this.relatedmodels._linkName&&this.metadata.fieldDefs[this.relatedmodels.module][this.relatedmodels._linkName]&&this.metadata.fieldDefs[this.relatedmodels.module][this.relatedmodels._linkName].vname?this.language.getLabel(this.metadata.fieldDefs[this.relatedmodels.module][this.relatedmodels._linkName].vname):this.language.getModuleName(this.relatedmodels.module)}static ɵfac=function(){let e;return function(t){return(e||(e=m.n5z(ObjectRelatedlistList)))(t||ObjectRelatedlistList)}}();static ɵcmp=m.Xpm({type:ObjectRelatedlistList,selectors:[["object-relatedlist-list"]],features:[m._Bn([kt.j]),m.qOj],decls:4,vars:6,consts:[[3,"ngClass","componentconfig"],[4,"ngIf","ngIfElse"],["noaccess",""],[1,"slds-border--top"],[3,"listfields","editable","editcomponentset","sequencefield","listitemactionset"]],template:function(e,t){if(1&e&&(m.TgZ(0,"object-related-card",0),m.YNc(1,xl,3,5,"ng-container",1),m.YNc(2,wl,1,0,"ng-template",null,2,m.W1O),m.qZA()),2&e){const e=m.MAs(3);m.Q6J("ngClass",m.VKq(4,Zl,t.hide))("componentconfig",t.componentconfig),m.xp6(1),m.Q6J("ngIf",t.aclAccess)("ngIfElse",e)}},dependencies:[i.mk,i.O5,vl.s,bl.E,yl.K],encapsulation:2})}return ObjectRelatedlistList})();var Cl=s(80423),kl=s(31790);const Al=["object-related-card-tile",""];function Ll(e,t){if(1&e&&(m.ynx(0),m.TgZ(1,"dt",10),m._UZ(2,"system-label-fieldname",11),m.qZA(),m.TgZ(3,"dd",12),m._UZ(4,"field-container",13),m.qZA(),m.BQk()),2&e){const e=t.$implicit,s=m.oxw();m.xp6(2),m.Q6J("module",s.model.module)("field",e.field),m.xp6(2),m.Q6J("field",e.field)("fieldconfig",e.fieldconfig)("fielddisplayclass","slds-truncate")}}let Il=(()=>{class ObjectRelatedCardTile{model;relatedmodels;view;language;metadata;router;data={};fieldset="";actionset;fields=[];constructor(e,t,s,i,n,l){this.model=e,this.relatedmodels=t,this.view=s,this.language=i,this.metadata=n,this.router=l,this.view.displayLabels=!1}ngOnInit(){this.initalizeModel(),this.loadConfig()}initalizeModel(){this.model.module=this.relatedmodels.relatedModule,this.model.id=this.data.id,this.model.setData(this.data)}loadConfig(){let e=this.metadata.getComponentConfig("ObjectRelatedCardTile",this.model.module);this.actionset=e.actionset,this.fields=this.metadata.getFieldSetFields(this.fieldset)}static ɵfac=function(e){return new(e||ObjectRelatedCardTile)(m.Y36(h.o),m.Y36(kt.j),m.Y36(Oe.e),m.Y36(g.d),m.Y36(b.Pu),m.Y36(o.F0))};static ɵcmp=m.Xpm({type:ObjectRelatedCardTile,selectors:[["","object-related-card-tile",""]],inputs:{data:"data",fieldset:"fieldset"},features:[m._Bn([h.o,Oe.e])],attrs:Al,decls:11,vars:8,consts:[[3,"module","size"],[1,"slds-media__body","slds-grow",2,"min-width","0 !important"],[1,"slds-grid","slds-grid--align-spread","slds-has-flexi-truncate"],["system-model-popover","",1,"slds-truncate","slds-text-heading--small","slds-p-top--xxx-small","slds-m-bottom--small"],[1,"slds-shrink-none","slds-show--medium"],[3,"buttonsize","actionset"],[1,"slds-tile__detail","slds-text-body--small"],[1,"slds-dl--horizontal"],[4,"ngFor","ngForOf"],[1,"slds-hide--medium",3,"buttonsize","actionset"],[1,"slds-dl--horizontal__label","slds-truncate"],[3,"module","field"],[1,"slds-dl--horizontal__detail","slds-tile__meta"],[3,"field","fieldconfig","fielddisplayclass"]],template:function(e,t){1&e&&(m._UZ(0,"system-icon",0),m.TgZ(1,"div",1)(2,"div",2)(3,"h3",3),m._uU(4),m.qZA(),m.TgZ(5,"div",4),m._UZ(6,"object-action-menu",5),m.qZA()(),m.TgZ(7,"div",6)(8,"dl",7),m.YNc(9,Ll,5,5,"ng-container",8),m.qZA()(),m._UZ(10,"object-action-menu",9),m.qZA()),2&e&&(m.Q6J("module",t.model.module)("size","small"),m.xp6(4),m.Oqu(t.data.summary_text),m.xp6(2),m.Q6J("buttonsize","x-small")("actionset",t.actionset),m.xp6(3),m.Q6J("ngForOf",t.fields),m.xp6(1),m.Q6J("buttonsize","x-small")("actionset",t.actionset))},dependencies:[i.sg,Ne.j,Z.f,je.h,kl.g,it.g],encapsulation:2})}return ObjectRelatedCardTile})();const Sl=["mainContainer"];function Ml(e,t){if(1&e&&(m.TgZ(0,"div",6),m._UZ(1,"div",7),m.qZA()),2&e){const e=t.$implicit,s=m.oxw(2);m.Q6J("ngClass",s.getTileWidthClass),m.xp6(1),m.Q6J("fieldset",s.componentconfig.fieldset)("data",e)}}function Jl(e,t){if(1&e&&(m.ynx(0),m.YNc(1,Ml,2,3,"div",5),m.BQk()),2&e){const e=m.oxw();m.xp6(1),m.Q6J("ngForOf",e.relatedmodels.items)}}function Ol(e,t){1&e&&m._UZ(0,"system-illustration-no-access")}let Nl=(()=>{class ObjectRelatedlistTiles extends _l.s{language;metadata;relatedmodels;model;cdref;el;mainContainer;constructor(e,t,s,i,n,l){super(e,t,s,i,n),this.language=e,this.metadata=t,this.relatedmodels=s,this.model=i,this.cdref=n,this.el=l}get getTileWidthClass(){return this.mainContainer?.element.nativeElement.clientWidth<=550?"slds-size--1-of-1":this.mainContainer?.element.nativeElement.clientWidth<=730?"slds-size--1-of-2":"slds-size--1-of-3"}static ɵfac=function(e){return new(e||ObjectRelatedlistTiles)(m.Y36(g.d),m.Y36(b.Pu),m.Y36(kt.j),m.Y36(h.o),m.Y36(m.sBO),m.Y36(m.SBq))};static ɵcmp=m.Xpm({type:ObjectRelatedlistTiles,selectors:[["object-relatedlist-tiles"]],viewQuery:function(e,t){if(1&e&&m.Gf(Sl,7,m.s_b),2&e){let e;m.iGM(e=m.CRH())&&(t.mainContainer=e.first)}},features:[m._Bn([kt.j]),m.qOj],decls:6,vars:3,consts:[[3,"componentconfig"],[1,"slds-card__body","slds-card__body_inner","slds-grid","slds-wrap","slds-grid--pull-padded"],["mainContainer",""],[4,"ngIf","ngIfElse"],["noaccess",""],["class","slds-p-around--xx-small",3,"ngClass",4,"ngFor","ngForOf"],[1,"slds-p-around--xx-small",3,"ngClass"],["object-related-card-tile","",1,"slds-box","slds-box--x-small","slds-media","slds-card__tile","slds-grid",3,"fieldset","data"]],template:function(e,t){if(1&e&&(m.TgZ(0,"object-related-card",0)(1,"div",1,2),m.YNc(3,Jl,2,1,"ng-container",3),m.qZA(),m.YNc(4,Ol,1,0,"ng-template",null,4,m.W1O),m.qZA()),2&e){const e=m.MAs(5);m.Q6J("componentconfig",t.componentconfig),m.xp6(3),m.Q6J("ngIf",t.aclAccess)("ngIfElse",e)}},dependencies:[i.mk,i.sg,i.O5,vl.s,bl.E,Il],encapsulation:2})}return ObjectRelatedlistTiles})(),Fl=(()=>{class ObjectMergeButton{language;metadata;model;modal;injector;mergemodels;merged=new m.vpe;constructor(e,t,s,i,n){this.language=e,this.metadata=t,this.model=s,this.modal=i,this.injector=n}get enabled(){return this.mergemodels?.length>0&&this.model.checkAccess("edit")&&this.mergemodels.filter((e=>1==e.acl?.delete)).length>0}doMerge(){this.modal.openModal("ObjectMergeModal",!0,this.injector).subscribe((e=>{e.instance.mergemodels=this.mergemodels}))}static ɵfac=function(e){return new(e||ObjectMergeButton)(m.Y36(g.d),m.Y36(b.Pu),m.Y36(h.o),m.Y36(V.o),m.Y36(m.zs3))};static ɵcmp=m.Xpm({type:ObjectMergeButton,selectors:[["object-merge-button"]],inputs:{mergemodels:"mergemodels"},outputs:{merged:"merged"},decls:3,vars:1,consts:[[1,"slds-button","slds-button--neutral","slds-show--large",3,"disabled","click"],["label","LBL_MERGE"]],template:function(e,t){1&e&&(m.TgZ(0,"button",0),m.NdJ("click",(function(){return t.doMerge()})),m.TgZ(1,"span"),m._UZ(2,"system-label",1),m.qZA()()),2&e&&m.Q6J("disabled",!t.enabled)},dependencies:[I._],encapsulation:2})}return ObjectMergeButton})();function ql(e,t){if(1&e){const e=m.EpF();m.TgZ(0,"system-utility-icon",17),m.NdJ("click",(function(t){m.CHM(e);const s=m.oxw(2);return m.KtG(s.toggleDuplicates(t))})),m.qZA()}if(2&e){const e=m.oxw(2);m.Q6J("ngStyle",e.iconStyle)}}const El=function(e,t){return{module:e,data:t}};function Yl(e,t){if(1&e&&m._UZ(0,"object-related-duplicate-tile",18),2&e){const e=t.$implicit,s=m.oxw(2);m.Q6J("system-model-provider",m.WLB(1,El,s.model.module,e))}}function Dl(e,t){if(1&e){const e=m.EpF();m.TgZ(0,"article",1)(1,"div",2)(2,"header",3),m._UZ(3,"system-icon",4),m.TgZ(4,"div",5)(5,"h2")(6,"a",6)(7,"span",7),m._UZ(8,"system-label",8),m._uU(9),m.qZA()()(),m.YNc(10,ql,1,1,"system-utility-icon",9),m.qZA()(),m._UZ(11,"object-merge-button",10),m.TgZ(12,"div",11)(13,"button",12),m.NdJ("click",(function(){m.CHM(e);const t=m.oxw();return m.KtG(t.checkDuplicates())})),m._UZ(14,"system-button-icon",13),m.qZA()()(),m.TgZ(15,"div",14)(16,"div",15),m.YNc(17,Yl,1,4,"object-related-duplicate-tile",16),m.qZA()()()}if(2&e){const e=m.oxw();m.xp6(3),m.Q6J("icon","merge")("size","small")("sprite","standard"),m.xp6(6),m.hij(" (",e.duplicatecount,")"),m.xp6(1),m.Q6J("ngIf",e.duplicatecount>0),m.xp6(1),m.Q6J("mergemodels",e.duplicates),m.xp6(2),m.Q6J("disabled",e.isLoading),m.xp6(2),m.Q6J("hidden",e.hideDuplicates),m.xp6(2),m.Q6J("ngForOf",e.duplicates)}}let Ul=(()=>{class ObjectRelatedDuplicates{model;metadata;broadcast;componentconfig={};showPanel=!1;duplicates=[];duplicatecount=0;hideDuplicates=!0;isLoading=!1;subscriptions=new B.w0;constructor(e,t,s){this.model=e,this.metadata=t,this.broadcast=s}ngOnInit(){this.metadata.getModuleDuplicatecheck(this.model.module)&&(this.checkDuplicates(),this.subscriptions.add(this.broadcast.message$.subscribe((e=>this.handleMessage(e)))))}ngOnDestroy(){this.subscriptions.unsubscribe()}handleMessage(e){if("model.delete"===e.messagetype)if(e.messagedata.module==this.model.module){let t=this.duplicates.findIndex((t=>t.id==e.messagedata.id));t>=0&&(this.duplicates.splice(t,1),this.duplicatecount--)}}toggleDuplicates(e){e.stopPropagation(),this.hideDuplicates=!this.hideDuplicates}checkDuplicates(){this.isLoading=!0,this.model.duplicateCheck().subscribe((e=>{this.duplicates=e.records,this.duplicatecount=e.count,this.isLoading=!1,this.duplicatecount>0&&(this.showPanel=!0)}),(e=>{this.isLoading=!1}))}get iconStyle(){return this.hideDuplicates?{transform:"scale(1, -1)"}:{}}static ɵfac=function(e){return new(e||ObjectRelatedDuplicates)(m.Y36(h.o),m.Y36(b.Pu),m.Y36(ye.f))};static ɵcmp=m.Xpm({type:ObjectRelatedDuplicates,selectors:[["object-relatedlist-duplicates"]],decls:1,vars:1,consts:[["class","slds-card slds-card_boundary slds-m-bottom--medium",4,"ngIf"],[1,"slds-card","slds-card_boundary","slds-m-bottom--medium"],[1,"slds-card__header","slds-grid","slds-grid--vertical-align-center"],[1,"slds-media","slds-media--center","slds-has-flexi-truncate"],[3,"icon","size","sprite"],[1,"slds-grid","slds-grid--vertical-align-center","slds-media__body","slds-truncate"],["href","javascript:void(0);",1,"slds-text-link--reset"],[1,"slds-text-heading--small"],["label","LBL_DUPLICATES"],["class","slds-m-horizontal--xx-small","icon","up","style","transition: .5s;","size","x-small",3,"ngStyle","click",4,"ngIf"],[3,"mergemodels"],[1,"slds-m-left--x-small"],[1,"slds-button","slds-button_icon","x-slds-m-right--medium",3,"disabled","click"],["icon","refresh"],[1,"slds-card__body",3,"hidden"],[1,"slds-card__body--inner","slds-grid","slds-wrap","slds-gutters_direct-xx-small"],["class","slds-size--1-of-1 slds-large-size--1-of-3 slds-col",3,"system-model-provider",4,"ngFor","ngForOf"],["icon","up","size","x-small",1,"slds-m-horizontal--xx-small",2,"transition",".5s",3,"ngStyle","click"],[1,"slds-size--1-of-1","slds-large-size--1-of-3","slds-col",3,"system-model-provider"]],template:function(e,t){1&e&&m.YNc(0,Dl,18,9,"article",0),2&e&&m.Q6J("ngIf",t.showPanel)},dependencies:[i.sg,i.O5,i.PC,w.J,Z.f,I._,S.r,Vs.u,Xs,Fl],encapsulation:2})}return ObjectRelatedDuplicates})();const Ql=["tablecontent"];let Rl=(()=>{class ObjectRelatedlistAll{navigationtab;language;metadata;model;relatedmodels;tablecontent;module="";id="";link="";related="";fieldset=void 0;componentconfig={};listfields=[];constructor(e,t,s,i,n){this.navigationtab=e,this.language=t,this.metadata=s,this.model=i,this.relatedmodels=n}ngOnInit(){this.module=this.navigationtab.activeRoute.params.module,this.link=this.navigationtab.activeRoute.params.link,this.related=this.navigationtab.activeRoute.params.related,this.fieldset=this.navigationtab.activeRoute.params.fieldset,this.model.module=this.module,this.model.id=this.navigationtab.activeRoute.params.id,this.model.getData(!0,"detailview").subscribe((e=>{this.navigationtab.setTabInfo({displaymodule:this.module,displayname:e.summary_text+" • "+this.language.getModuleName(this.related)})})),this.componentconfig=this.metadata.getComponentConfig("ObjectRelatedlistAll",this.related),this.componentconfig.fieldset||(this.componentconfig=this.metadata.getModuleDefaultComponentConfigByUsage(this.related,"list")),_.isEmpty(this.componentconfig)&&console.warn(`no componentconfig found for ObjectRelatedlistAll nor ObjectList with module ${this.related}`),this.listfields=this.metadata.getFieldSetFields(this.fieldset?this.fieldset:this.componentconfig.fieldset),_.isEmpty(this.listfields)&&console.warn("no fieldset to use!"),this.relatedmodels.module=this.model.module,this.relatedmodels.id=this.model.id,this.relatedmodels.relatedModule=this.related,this.relatedmodels.linkName=this.link,this.relatedmodels.loaditems=50,this.componentconfig.sequencefield?this.relatedmodels.sequencefield=this.componentconfig.sequencefield:this.model.fields[this.relatedmodels._linkName]?.sequence_field&&(this.relatedmodels.sequencefield=this.model.fields[this.relatedmodels._linkName].sequence_field),this.relatedmodels.getData()}goModule(){this.model.goModule()}goModel(){this.model.goDetail()}get listingTitle(){return this.metadata.fieldDefs[this.model.module][this.link].vname?this.language.getLabel(this.metadata.fieldDefs[this.model.module][this.link].vname):this.language.getModuleName(this.related)}onScroll(e){if(this.relatedmodels.canloadmore){let e=this.tablecontent.element.nativeElement;e.scrollTop+e.clientHeight+50>e.scrollHeight&&this.relatedmodels.getMoreData(25)}}set searchTerm(e){e!=this.relatedmodels.searchTerm&&(this.relatedmodels.searchTerm=e,this.reloadList())}get searchTerm(){return this.relatedmodels.searchTerm}clearSearchTerm(){this.searchTerm=""}reloadList(){this.relatedmodels.offset=0,this.relatedmodels.getData()}static ɵfac=function(e){return new(e||ObjectRelatedlistAll)(m.Y36(we.d),m.Y36(g.d),m.Y36(b.Pu),m.Y36(h.o),m.Y36(kt.j))};static ɵcmp=m.Xpm({type:ObjectRelatedlistAll,selectors:[["object-relatedlist-all"]],viewQuery:function(e,t){if(1&e&&m.Gf(Ql,7,m.s_b),2&e){let e;m.iGM(e=m.CRH())&&(t.tablecontent=e.first)}},features:[m._Bn([h.o,kt.j])],decls:33,vars:11,consts:[[1,"slds-page-header"],[1,"slds-grid","slds-grid--align-spread","slds-p-bottom--xx-small","slds-wrap"],[1,"slds-grid","slds-grid--vertical-align-center","slds-grow"],[1,"slds-m-right--medium"],["role","navigation","aria-label","Breadcrumbs"],[1,"slds-breadcrumb","slds-list_horizontal","slds-wrap"],[1,"slds-breadcrumb__item","slds-text-title_caps"],["href","javascript:void(0);",3,"click"],[3,"module"],[1,"slds-media"],[1,"slds-media__body"],[1,"slds-page-header__title","slds-truncate","slds-align-middle","slds-p-vertical--xx-small"],[1,"slds-col","slds-align-bottom"],[1,"slds-text-body--small"],["label","LBL_OF"],["label","LBL_ITEMS"],["label","LBL_SORTEDBY"],[3,"module","field"],["label","LBL_LASTUPDATE"],[1,"slds-col","slds-size--1-of-3"],[1,"slds-grow",3,"ngModel","placeholder","ngModelChange","onSearchTermClear","onEnterPress"],["system-to-bottom","",3,"scroll"],["tablecontent",""],[3,"listfields"]],template:function(e,t){1&e&&(m.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"nav",4)(5,"ol",5)(6,"li",6)(7,"a",7),m.NdJ("click",(function(){return t.goModule()})),m._UZ(8,"system-label-modulename",8),m.qZA()(),m.TgZ(9,"li",6)(10,"a",7),m.NdJ("click",(function(){return t.goModel()})),m._uU(11),m.qZA()()()(),m.TgZ(12,"div",9)(13,"div",10)(14,"h1",11),m._uU(15),m.qZA()()(),m.TgZ(16,"div",12)(17,"p",13),m._uU(18),m._UZ(19,"system-label",14),m._uU(20),m._UZ(21,"system-label",15),m._uU(22," • "),m._UZ(23,"system-label",16)(24,"system-label-fieldname",17),m._uU(25," • "),m._UZ(26,"system-label",18),m._uU(27),m.qZA()()(),m.TgZ(28,"div",19)(29,"system-input-search-term",20),m.NdJ("ngModelChange",(function(e){return t.searchTerm=e}))("onSearchTermClear",(function(){return t.clearSearchTerm()}))("onEnterPress",(function(){return t.reloadList()})),m.qZA()()()()(),m.TgZ(30,"div",21,22),m.NdJ("scroll",(function(e){return t.onScroll(e)})),m._UZ(32,"object-relatedlist-table",23),m.qZA()),2&e&&(m.xp6(8),m.Q6J("module",t.module),m.xp6(3),m.Oqu(t.model.data.summary_text),m.xp6(4),m.Oqu(t.listingTitle),m.xp6(3),m.hij("",t.relatedmodels.items.length," "),m.xp6(2),m.hij(" ",t.relatedmodels.count," "),m.xp6(4),m.Q6J("module",t.related)("field",t.relatedmodels.sortfield),m.xp6(3),m.hij(" ",t.relatedmodels.getLastLoadTime(),""),m.xp6(2),m.Q6J("ngModel",t.searchTerm)("placeholder",t.language.getModuleCombinedLabel("LBL_SEARCH",t.relatedmodels.relatedModule)),m.xp6(3),m.Q6J("listfields",t.listfields))},dependencies:[l.JJ,l.On,I._,je.h,nn.M,T.g,q.H,yl.K],encapsulation:2})}return ObjectRelatedlistAll})(),jl=(()=>{class ObjectRelatedlistSequenced{componentconfig={};static ɵfac=function(e){return new(e||ObjectRelatedlistSequenced)};static ɵcmp=m.Xpm({type:ObjectRelatedlistSequenced,selectors:[["object-relatedlist-sequenced"]],inputs:{componentconfig:"componentconfig"},decls:1,vars:1,consts:[[3,"componentconfig"]],template:function(e,t){1&e&&m._UZ(0,"object-relatedlist-list",0),2&e&&m.Q6J("componentconfig",t.componentconfig)},dependencies:[Tl],encapsulation:2})}return ObjectRelatedlistSequenced})();var Bl=s(83129),Gl=s(68017),Pl=s(96409),Hl=s(27165);function zl(e,t){if(1&e&&(m.TgZ(0,"legend",6),m._UZ(1,"system-label",7),m.qZA()),2&e){const e=m.oxw(2);m.xp6(1),m.Q6J("label",e.componentconfig.name)}}function Vl(e,t){if(1&e&&(m.TgZ(0,"fieldset",2),m.YNc(1,zl,2,1,"legend",3),m.TgZ(2,"div",4),m._UZ(3,"object-record-fieldset",5),m.qZA()()),2&e){const e=m.oxw();m.xp6(1),m.Q6J("ngIf",e.componentconfig.name),m.xp6(2),m.Q6J("fieldset",e.fieldset)("direction",e.direction)}}const $l=function(e){return{"slds-theme--shade slds-p-around--small":e}};let Kl=(()=>{class ObjectRecordFieldsetContainer{metadata;model;view;componentconfig={};get fieldset(){return this.componentconfig.fieldset}get direction(){return this.componentconfig.direction}constructor(e,t,s){this.metadata=e,this.model=t,this.view=s}get hidden(){return this.componentconfig.requiredmodelstate&&!this.model.checkModelState(this.componentconfig.requiredmodelstate)}static ɵfac=function(e){return new(e||ObjectRecordFieldsetContainer)(m.Y36(b.Pu),m.Y36(h.o),m.Y36(Oe.e))};static ɵcmp=m.Xpm({type:ObjectRecordFieldsetContainer,selectors:[["object-record-fieldset-container"]],inputs:{componentconfig:"componentconfig"},decls:2,vars:4,consts:[[3,"ngClass"],["class","slds-form-element slds-form-element_compound",4,"ngIf"],[1,"slds-form-element","slds-form-element_compound"],["class","slds-form-element__legend slds-form-element__label slds-p-horizontal--xx-small",4,"ngIf"],[1,"slds-form-element__control"],[3,"fieldset","direction"],[1,"slds-form-element__legend","slds-form-element__label","slds-p-horizontal--xx-small"],[3,"label"]],template:function(e,t){1&e&&(m.TgZ(0,"div",0),m.YNc(1,Vl,4,3,"fieldset",1),m.qZA()),2&e&&(m.Q6J("ngClass",m.VKq(2,$l,t.componentconfig.embedded)),m.xp6(1),m.Q6J("ngIf",!t.hidden))},dependencies:[i.mk,i.O5,I._,js.d],encapsulation:2})}return ObjectRecordFieldsetContainer})();var Xl=s(29266);let Wl=(()=>{class ObjectRecordChecklistItem{view;model;modelutilities;language;backend;checkitem={};checkfield="";checkid="";constructor(e,t,s,i,n){this.view=e,this.model=t,this.modelutilities=s,this.language=i,this.backend=n,this.checkid=this.modelutilities.generateGuid()}get checked(){try{return JSON.parse(this.model.getField(this.checkfield))[this.checkitem.item]}catch(e){return!1}}checkItem(e){let t={};try{t=JSON.parse(this.model.getField(this.checkfield))}catch(e){t={}}t[this.checkitem.item]=e.target.checked,this.model.setField(this.checkfield,JSON.stringify(t)),e.target.checked?this.backend.postRequest("module/"+this.model.module+"/"+this.model.id+"/checklist/"+this.checkfield+"/"+this.checkitem.item):this.backend.deleteRequest("module/"+this.model.module+"/"+this.model.id+"/checklist/"+this.checkfield+"/"+this.checkitem.item)}get disabled(){return!this.model.checkAccess("edit")||this.model.isEditing||this.model.isLoading}static ɵfac=function(e){return new(e||ObjectRecordChecklistItem)(m.Y36(Oe.e),m.Y36(h.o),m.Y36(Xl.A),m.Y36(g.d),m.Y36(W.y))};static ɵcmp=m.Xpm({type:ObjectRecordChecklistItem,selectors:[["object-record-checklist-item"]],inputs:{checkitem:"checkitem",checkfield:"checkfield"},features:[m._Bn([Oe.e])],decls:8,vars:5,consts:[[1,"slds-form-element","slds-p-vertical--xx-small"],[1,"slds-form-element__control"],[1,"slds-checkbox"],["type","checkbox","name","options",3,"id","ngModel","disabled","change"],[1,"slds-checkbox__label"],[1,"slds-checkbox_faux"],[1,"slds-form-element__label"],[3,"label"]],template:function(e,t){1&e&&(m.TgZ(0,"div",0)(1,"div",1)(2,"span",2)(3,"input",3),m.NdJ("change",(function(e){return t.checkItem(e)})),m.qZA(),m.TgZ(4,"label",4),m._UZ(5,"span",5),m.TgZ(6,"span",6),m._UZ(7,"system-label",7),m.qZA()()()()()),2&e&&(m.xp6(3),m.Q6J("id",t.checkid)("ngModel",t.checked)("disabled",t.disabled),m.xp6(1),m.uIk("for",t.checkid),m.xp6(3),m.Q6J("label",t.checkitem.name))},dependencies:[l.Wl,l.JJ,l.On,I._],encapsulation:2})}return ObjectRecordChecklistItem})();function eo(e,t){if(1&e&&m._UZ(0,"object-record-checklist-item",4),2&e){const e=t.$implicit,s=m.oxw();m.Q6J("checkfield",s.modelfield)("checkitem",e)}}let to=(()=>{class ObjectRecordChecklist{language;componentconfig={};constructor(e){this.language=e}get checkitems(){return this.componentconfig.checkitems?this.componentconfig.checkitems:[]}get modelfield(){return this.componentconfig.field}static ɵfac=function(e){return new(e||ObjectRecordChecklist)(m.Y36(g.d))};static ɵcmp=m.Xpm({type:ObjectRecordChecklist,selectors:[["object-record-checklist"]],features:[m._Bn([Oe.e])],decls:4,vars:1,consts:[[1,"slds-box","slds-m-bottom--small"],[1,"slds-text-heading_small","slds-p-vertical--xx-small"],["label","LBL_CHECKLIST"],[3,"checkfield","checkitem",4,"ngFor","ngForOf"],[3,"checkfield","checkitem"]],template:function(e,t){1&e&&(m.TgZ(0,"div",0)(1,"h3",1),m._UZ(2,"system-label",2),m.qZA(),m.YNc(3,eo,1,2,"object-record-checklist-item",3),m.qZA()),2&e&&(m.xp6(3),m.Q6J("ngForOf",t.checkitems))},dependencies:[i.sg,I._,Wl],encapsulation:2})}return ObjectRecordChecklist})();var so=s(46438),io=s(61553);function no(e,t){if(1&e&&(m.TgZ(0,"system-collapsable-tab",3)(1,"div",4),m._UZ(2,"object-record-fieldset",5),m.qZA()()),2&e){const e=m.oxw(2);m.Q6J("title",e.componentconfig.name)("expanded",e.expanded),m.xp6(2),m.Q6J("fieldset",e.fieldSet)("direction","vertical")}}function lo(e,t){if(1&e&&(m.TgZ(0,"div",6)(1,"div",4),m._UZ(2,"object-record-fieldset",5),m.qZA()()),2&e){const e=m.oxw(2);m.xp6(2),m.Q6J("fieldset",e.fieldSet)("direction","vertical")}}function oo(e,t){if(1&e&&(m.TgZ(0,"div"),m.YNc(1,no,3,4,"system-collapsable-tab",1),m.YNc(2,lo,3,2,"div",2),m.qZA()),2&e){const e=m.oxw();m.xp6(1),m.Q6J("ngIf",e.showTitle),m.xp6(1),m.Q6J("ngIf",!e.showTitle)}}let ao=(()=>{class ObjectRecordDetailsTab{metadata;model;language;componentconfig={};expanded=!0;constructor(e,t,s){this.metadata=e,this.model=t,this.language=s}ngOnInit(){this.componentconfig.collapsed&&(this.expanded=!1)}get fieldSet(){try{return this.componentconfig.fieldset}catch(e){return""}}get showTitle(){try{return!this.componentconfig.hidelabel}catch(e){return!1}}get hidden(){return this.componentconfig.requiredmodelstate&&!this.model.checkModelState(this.componentconfig.requiredmodelstate)}static ɵfac=function(e){return new(e||ObjectRecordDetailsTab)(m.Y36(b.Pu),m.Y36(h.o),m.Y36(g.d))};static ɵcmp=m.Xpm({type:ObjectRecordDetailsTab,selectors:[["object-record-details-tab"]],decls:1,vars:1,consts:[[4,"ngIf"],[3,"title","expanded",4,"ngIf"],["class","slds-section",4,"ngIf"],[3,"title","expanded"],[1,"slds-p-horizontal--xx-small"],[3,"fieldset","direction"],[1,"slds-section"]],template:function(e,t){1&e&&m.YNc(0,oo,3,2,"div",0),2&e&&m.Q6J("ngIf",!t.hidden)},dependencies:[i.O5,io.z,js.d],encapsulation:2})}return ObjectRecordDetailsTab})();function ro(e,t){if(1&e&&(m.TgZ(0,"system-collapsable-tab",3)(1,"div",4),m._UZ(2,"object-record-fieldset",5),m.qZA()()),2&e){const e=m.oxw(2);m.Q6J("title",e.componentconfig.name)("expanded",e.expanded),m.xp6(2),m.Q6J("fieldset",e.fieldSet)("direction","vertical")}}function co(e,t){if(1&e&&(m.TgZ(0,"div",6)(1,"div",4),m._UZ(2,"object-record-fieldset",5),m.qZA()()),2&e){const e=m.oxw(2);m.xp6(2),m.Q6J("fieldset",e.fieldSet)("direction","vertical")}}function uo(e,t){if(1&e&&(m.TgZ(0,"div"),m.YNc(1,ro,3,4,"system-collapsable-tab",1),m.YNc(2,co,3,2,"div",2),m.qZA()),2&e){const e=m.oxw();m.Q6J("@displayanimation",void 0),m.xp6(1),m.Q6J("ngIf",e.showTitle),m.xp6(1),m.Q6J("ngIf",!e.showTitle)}}let mo=(()=>{class ObjectRecordDetailsModelstateTab extends ao{static ɵfac=function(){let e;return function(t){return(e||(e=m.n5z(ObjectRecordDetailsModelstateTab)))(t||ObjectRecordDetailsModelstateTab)}}();static ɵcmp=m.Xpm({type:ObjectRecordDetailsModelstateTab,selectors:[["object-record-details-modelstate-tab"]],features:[m.qOj],decls:1,vars:1,consts:[[4,"ngIf"],[3,"title","expanded",4,"ngIf"],["class","slds-section",4,"ngIf"],[3,"title","expanded"],[1,"slds-p-horizontal--xx-small"],[3,"fieldset","direction"],[1,"slds-section"]],template:function(e,t){1&e&&m.YNc(0,uo,3,3,"div",0),2&e&&m.Q6J("ngIf",!t.hidden)},dependencies:[i.O5,io.z,js.d],encapsulation:2,data:{animation:[(0,f.X$)("displayanimation",[(0,f.eR)(":enter",[(0,f.oB)({opacity:0,height:"0px",overflow:"hidden"}),(0,f.jt)(".5s",(0,f.oB)({height:"*",opacity:1})),(0,f.oB)({overflow:"unset"})]),(0,f.eR)(":leave",[(0,f.oB)({overflow:"hidden"}),(0,f.jt)(".5s",(0,f.oB)({height:"0px",opacity:0}))])])]}})}return ObjectRecordDetailsModelstateTab})();var go=s(96194);let ho=(()=>{class territories{backend;metadata;configurationService;session;addTerritories={};constructor(e,t,s,i){this.backend=e,this.metadata=t,this.configurationService=s,this.session=i}checkModuleManaged(e){return!!this.getModuleParamaters(e)}getModuleParamaters(e){let t=this.configurationService.getData("aclterritorymoduletypes");if(t){return t.find((t=>t.module==e))}return!1}get userTerritories(){return this.configurationService.getData("aclterritoryuserterritories")}getRecentTerritories(e,t=5,s){let i=this.userTerritories;if(s&&!this.session.isAdmin){let n=i[e]&&i[e].length>0?i[e].filter((e=>-1!=e.actions.indexOf(s))):[];return n&&n.length>0?n.slice(0,t):[]}return i[e]&&i[e].length>0?i[e].slice(0,t):[]}loadTerritoryName(e){this.addTerritories[e]="...",this.backend.getRequest("module/SpiceACLTerritories/"+e).subscribe((t=>{t.id===e?this.addTerritories[e]=t.name:this.addTerritories[e]="error"}))}searchTerritories(e,t,s=5,i=[],n){let l=[];for(let o of this.userTerritories[e])if(o.name.toLowerCase().indexOf(t.toLowerCase())>=0&&i.indexOf(o.id)<0&&(this.session.isAdmin||!n||n&&-1!=o.actions.indexOf(n))&&l.push(o),l.length>=s)return l;return l}isUserTerritory(e,t){let s=!1;return this.userTerritories[e].some((e=>{if(e.id===t)return s=!0,!0})),s}getTerritoryName(e,t){let s="";return this.userTerritories[e].some((e=>{if(e.id===t)return s=e.name,!0})),""===s&&(this.addTerritories[t]||this.loadTerritoryName(t),s=this.addTerritories[t]),s}static ɵfac=function(e){return new(e||territories)(m.LFG(W.y),m.LFG(b.Pu),m.LFG(v.C),m.LFG(Qt.n))};static ɵprov=m.Yz7({token:territories,factory:territories.ɵfac,providedIn:"root"})}return territories})();function po(e,t){if(1&e&&(m.TgZ(0,"div",8),m._UZ(1,"object-record-fieldset-field",7),m.qZA()),2&e){const e=m.oxw(2);m.xp6(1),m.Q6J("fieldsetitem",e.fields.spiceacl_territories_hash)}}function fo(e,t){if(1&e&&(m.TgZ(0,"div",3)(1,"div",8),m._UZ(2,"object-record-fieldset-field",7),m.qZA(),m.YNc(3,po,2,1,"div",9),m.qZA()),2&e){const e=m.oxw();m.xp6(2),m.Q6J("fieldsetitem",e.fields.spiceacl_primary_territory),m.xp6(1),m.Q6J("ngIf",e.multipleterritories)}}function bo(e,t){if(1&e&&(m.TgZ(0,"div"),m._UZ(1,"object-record-fieldset-field",7),m.qZA()),2&e){const e=m.oxw();m.xp6(1),m.Q6J("fieldsetitem",e.fields.spiceacl_users_hash)}}const _o=function(e,t){return{"slds-size--1-of-1":e,"slds-size--1-of-2":t}};function vo(e,t){if(1&e&&(m.TgZ(0,"div",12),m._UZ(1,"object-record-fieldset-field",7),m.qZA()),2&e){const e=m.oxw(2);m.Q6J("ngClass",m.WLB(2,_o,!e.hasFieldAssignedOrgunit,e.hasFieldAssignedOrgunit)),m.xp6(1),m.Q6J("fieldsetitem",e.fields.assigned_user)}}function yo(e,t){if(1&e&&(m.TgZ(0,"div",12),m._UZ(1,"object-record-fieldset-field",7),m.qZA()),2&e){const e=m.oxw(2);m.Q6J("ngClass",m.WLB(2,_o,!e.hasFieldAssignedUser,e.hasFieldAssignedUser)),m.xp6(1),m.Q6J("fieldsetitem",e.fields.assigned_orgunit)}}function xo(e,t){if(1&e&&(m.TgZ(0,"div",10),m.YNc(1,vo,2,5,"div",11),m.YNc(2,yo,2,5,"div",11),m.qZA()),2&e){const e=m.oxw();m.xp6(1),m.Q6J("ngIf",e.hasFieldAssignedUser),m.xp6(1),m.Q6J("ngIf",e.hasFieldAssignedOrgunit)}}const wo=function(e,t){return{"slds-size--1-of-1":e,"slds-size--1-of-1 slds-medium-size--1-of-2":t}};let Zo=(()=>{class ObjectRecordAdministrationTab{metadata;model;territories;componentconfig={};expanded=!0;hasFieldAssignedUser=!1;hasFieldAssignedOrgunit=!1;linkOrgunitToAssignedUser=!0;fields={spiceacl_primary_territory:{field:"spiceacl_primary_territory",fieldconfig:{}},spiceacl_territories_hash:{field:"spiceacl_territories_hash",fieldconfig:{}},spiceacl_users_hash:{field:"spiceacl_users_hash",fieldconfig:{}},assigned_user:{field:"assigned_user",fieldconfig:{fieldtype:"linked"}},assigned_orgunit:{field:"assigned_orgunit",fieldconfig:{}},created_by_user:{field:"created_by_user",fieldconfig:{fieldtype:"modifiedby",field_date:"date_entered"}},modified_by_user:{field:"modified_by_user",fieldconfig:{fieldtype:"modifiedby",field_date:"date_modified"}}};constructor(e,t,s){this.metadata=e,this.model=t,this.territories=s}ngOnInit(){this.componentconfig.collapsed&&(this.expanded=!1),this.componentconfig.unlinkorgunit&&(this.linkOrgunitToAssignedUser=!this.componentconfig.unlinkorgunit),this.hasFieldAssignedUser=this.metadata.hasField(this.model.module,"assigned_user_id"),this.hasFieldAssignedOrgunit=this.metadata.hasField(this.model.module,"assigned_orgunit_id"),this.hasFieldAssignedOrgunit&&this.linkOrgunitToAssignedUser&&this.model.data$.subscribe({next:e=>{this.model.getField("assigned_user_id")?(this.model._fields_stati.assigned_orgunit.readonly=!0,this.model.getField("assigned_orgunit_id")!=this.model.getField("assigned_user").orgunit_id&&this.model.setFields({assigned_orgunit_id:this.model.getField("assigned_user").orgunit_id,assigned_orgunit:this.model.getField("assigned_user").orgunit},!0)):this.model._fields_stati.assigned_orgunit.readonly=!1}})}getTypeParameters(){return this.territories.getModuleParamaters(this.model.module)}get territorymanaged(){return this.territories.checkModuleManaged(this.model.module)}get multipleterritories(){return 1==this.getTypeParameters().multipleobjects}get multipleusers(){return 1==this.metadata.getModuleDefs(this.model.module).acl_multipleusers}get hidden(){return this.componentconfig.requiredmodelstate&&!this.model.checkModelState(this.componentconfig.requiredmodelstate)}static ɵfac=function(e){return new(e||ObjectRecordAdministrationTab)(m.Y36(b.Pu),m.Y36(h.o),m.Y36(ho))};static ɵcmp=m.Xpm({type:ObjectRecordAdministrationTab,selectors:[["object-record-details-tab"]],decls:10,vars:11,consts:[[3,"title","expanded"],["class","slds-grid slds-wrap",4,"ngIf"],[4,"ngIf"],[1,"slds-grid","slds-wrap"],["class","slds-grid slds-size--1-of-1 slds-medium-size--1-of-2",4,"ngIf"],[1,"slds-grid",3,"ngClass"],[1,"slds-size--1-of-2"],[3,"fieldsetitem"],[1,"slds-size--1-of-1","slds-medium-size--1-of-2"],["class","slds-size--1-of-1 slds-medium-size--1-of-2",4,"ngIf"],[1,"slds-grid","slds-size--1-of-1","slds-medium-size--1-of-2"],[3,"ngClass",4,"ngIf"],[3,"ngClass"]],template:function(e,t){1&e&&(m.TgZ(0,"system-collapsable-tab",0),m.YNc(1,fo,4,2,"div",1),m.YNc(2,bo,2,1,"div",2),m.TgZ(3,"div",3),m.YNc(4,xo,3,2,"div",4),m.TgZ(5,"div",5)(6,"div",6),m._UZ(7,"object-record-fieldset-field",7),m.qZA(),m.TgZ(8,"div",6),m._UZ(9,"object-record-fieldset-field",7),m.qZA()()()()),2&e&&(m.Q6J("title",t.componentconfig.name)("expanded",t.expanded),m.xp6(1),m.Q6J("ngIf",t.territorymanaged),m.xp6(1),m.Q6J("ngIf",t.multipleusers),m.xp6(2),m.Q6J("ngIf",t.hasFieldAssignedUser||t.hasFieldAssignedOrgunit),m.xp6(1),m.Q6J("ngClass",m.WLB(8,wo,!t.hasFieldAssignedUser&&!t.hasFieldAssignedOrgunit,t.hasFieldAssignedUser||!t.hasFieldAssignedOrgunit)),m.xp6(2),m.Q6J("fieldsetitem",t.fields.created_by_user),m.xp6(2),m.Q6J("fieldsetitem",t.fields.modified_by_user))},dependencies:[i.mk,i.O5,io.z,Hl.f],encapsulation:2})}return ObjectRecordAdministrationTab})();function To(e,t){if(1&e&&m._UZ(0,"field-label",4),2&e){const e=m.oxw().$implicit;m.Q6J("fieldname",e.field)("fieldconfig",e.fieldconfig)}}function Co(e,t){if(1&e&&(m.TgZ(0,"div",1),m.YNc(1,To,1,2,"field-label",2),m._UZ(2,"field-container",3),m.qZA()),2&e){const e=t.$implicit,s=m.oxw();m.Q6J("ngClass",s.getFieldSizeClass()),m.xp6(1),m.Q6J("ngIf",s.showLabel(e.fieldconfig)&&"blank"!==e.field),m.xp6(1),m.Q6J("field",e.field)("fieldconfig",e.fieldconfig)("fielddisplayclass","slds-has-divider--bottom slds-p-vertical--x-small spice-fieldminheight")}}let ko=(()=>{class ObjectRecordDetailsTabRow{activatedRoute;metadata;componentFactoryResolver;model;initialized=!1;componentconfig={};componentRefs=[];rowFields=[];fieldset="";constructor(e,t,s,i){this.activatedRoute=e,this.metadata=t,this.componentFactoryResolver=s,this.model=i}ngOnInit(){this.rowFields=this.metadata.getFieldSetFields(this.fieldset.fieldset)}getFieldSizeClass(){return"slds-size--1-of-"+this.rowFields.length}getFieldWidth(){return{width:Math.round(1/this.rowFields.length*100)+"%"}}showLabel(e){return!0!==e.hidelabel}static ɵfac=function(e){return new(e||ObjectRecordDetailsTabRow)(m.Y36(o.gz),m.Y36(b.Pu),m.Y36(m._Vd),m.Y36(h.o))};static ɵcmp=m.Xpm({type:ObjectRecordDetailsTabRow,selectors:[["object-record-details-tab-row"]],inputs:{fieldset:"fieldset"},decls:1,vars:1,consts:[["class","slds-p-around--x-small",3,"ngClass",4,"ngFor","ngForOf"],[1,"slds-p-around--x-small",3,"ngClass"],[3,"fieldname","fieldconfig",4,"ngIf"],[3,"field","fieldconfig","fielddisplayclass"],[3,"fieldname","fieldconfig"]],template:function(e,t){1&e&&m.YNc(0,Co,3,5,"div",0),2&e&&m.Q6J("ngForOf",t.rowFields)},dependencies:[i.mk,i.sg,i.O5,Si.q,Ne.j],encapsulation:2})}return ObjectRecordDetailsTabRow})(),Ao=(()=>{class ObjectRecordDetailsTabRowField{field={};constructor(){}static ɵfac=function(e){return new(e||ObjectRecordDetailsTabRowField)};static ɵcmp=m.Xpm({type:ObjectRecordDetailsTabRowField,selectors:[["object-record-details-tab-row-field"]],inputs:{field:"field"},decls:2,vars:5,consts:[[3,"fieldname","fieldconfig"],[3,"field","fieldconfig","fielddisplayclass"]],template:function(e,t){1&e&&m._UZ(0,"field-label",0)(1,"field-container",1),2&e&&(m.Q6J("fieldname",t.field.field)("fieldconfig",t.field.fieldconfig),m.xp6(1),m.Q6J("field",t.field.field)("fieldconfig",t.field.fieldconfig)("fielddisplayclass","slds-text-body--regular slds-truncate slds-m-vertical--x-small"))},dependencies:[Si.q,Ne.j],encapsulation:2})}return ObjectRecordDetailsTabRowField})();function Lo(e,t){if(1&e&&(m.TgZ(0,"span",7),m._uU(1),m.qZA()),2&e){const e=m.oxw().$implicit;m.xp6(1),m.Oqu(e.hasErrors)}}const Io=function(e){return{"slds-active":e}};function So(e,t){if(1&e){const e=m.EpF();m.TgZ(0,"li",4),m.NdJ("click",(function(){const t=m.CHM(e).index,s=m.oxw();return m.KtG(s.setActiveTab(t))})),m.TgZ(1,"a",5),m.YNc(2,Lo,2,1,"span",6),m._uU(3),m.qZA()()}if(2&e){const e=t.$implicit,s=t.index,i=m.oxw();m.Q6J("ngClass",m.VKq(3,Io,s===i.activeTab)),m.xp6(2),m.Q6J("ngIf",e.hasErrors),m.xp6(1),m.hij(" ",i.language.getLabel(e.name,i.model.module),"")}}function Mo(e,t){if(1&e){const e=m.EpF();m.TgZ(0,"object-tab-container-item",11),m.NdJ("taberrors",(function(t){m.CHM(e);const s=m.oxw(2).index,i=m.oxw();return m.KtG(i.showErrorsOnTab(s,t))})),m.qZA()}if(2&e){const e=m.oxw(2).$implicit;m.Q6J("componentset",e.componentset)}}function Jo(e,t){if(1&e&&(m.TgZ(0,"div",9),m.YNc(1,Mo,1,1,"object-tab-container-item",10),m.qZA()),2&e){const e=m.oxw(),t=e.index,s=e.$implicit,i=m.oxw();m.Q6J("ngClass",m.VKq(3,Io,i.showTab(t)))("hidden",!i.showTab(t)),m.xp6(1),m.Q6J("ngIf",s.componentset)}}function Oo(e,t){if(1&e&&(m.ynx(0),m.YNc(1,Jo,2,5,"div",8),m.BQk()),2&e){const e=t.index,s=m.oxw();m.xp6(1),m.Q6J("ngIf",s.checkRenderTab(e))}}const No=function(e){return{"slds-p-around--small":e}};let Fo=(()=>{class ObjectRecordTabbedDetails{view;metadata;componentFactoryResolver;model;language;componentconfig={};activeTab=0;activatedTabs=[0];componentTabs=[];constructor(e,t,s,i,n){this.view=e,this.metadata=t,this.componentFactoryResolver=s,this.model=i,this.language=n,this.view.isEditable=!0}get tabs(){return this.componentTabs?this.componentTabs:[]}ngOnInit(){if(0==this.getTabs().length)if(this.componentconfig&&this.componentconfig.componentset){let e=this.metadata.getComponentSetObjects(this.componentconfig.componentset);this.componentTabs=[];for(let t of e)this.componentTabs.push(t.componentconfig)}else if(this.componentconfig.tabs)this.componentTabs=this.componentconfig.tabs;else{let e=this.metadata.getComponentConfig("ObjectRecordTabbedDetails",this.model.module);this.componentTabs=e.tabs}else this.componentTabs=this.getTabs()}getTabs(){try{return this.componentconfig.tabs?this.componentconfig.tabs:[]}catch(e){return[]}}setActiveTab(e){this.activatedTabs.push(e),this.activeTab=e}checkRenderTab(e){return e==this.activeTab||this.activatedTabs.indexOf(e)>-1}showTab(e){return e===this.activeTab}getDisplay(e){if(e!==this.activeTab)return{display:"none"}}cancel(){this.model.cancelEdit(),this.view.setViewMode()}save(){this.model.validate()&&(this.model.save(!0),this.view.setViewMode())}showErrorsOnTab(e,t){this.componentTabs[e].hasErrors=t}static ɵfac=function(e){return new(e||ObjectRecordTabbedDetails)(m.Y36(Oe.e),m.Y36(b.Pu),m.Y36(m._Vd),m.Y36(h.o),m.Y36(g.d))};static ɵcmp=m.Xpm({type:ObjectRecordTabbedDetails,selectors:[["object-record-tabbed-details"]],decls:4,vars:5,consts:[[1,"slds-tabs--scoped","slds-p-bottom--small","slds-p-around--xx-small",3,"ngClass"],["role","tablist",1,"slds-tabs--scoped__nav"],["class","slds-tabs--scoped__item slds-text-title--caps slds-active","role","presentation",3,"ngClass","click",4,"ngFor","ngForOf"],[4,"ngFor","ngForOf"],["role","presentation",1,"slds-tabs--scoped__item","slds-text-title--caps","slds-active",3,"ngClass","click"],["href","javascript:void(0);","role","tab","aria-selected","false",1,"slds-tabs--scoped__link"],["class","slds-badge","title","Invalid fields!",4,"ngIf"],["title","Invalid fields!",1,"slds-badge"],["class","slds-tabs--scoped__content slds-p-vertical--xxx-small slds-p-horizontal--none","role","tabpanel",3,"ngClass","hidden",4,"ngIf"],["role","tabpanel",1,"slds-tabs--scoped__content","slds-p-vertical--xxx-small","slds-p-horizontal--none",3,"ngClass","hidden"],[3,"componentset","taberrors",4,"ngIf"],[3,"componentset","taberrors"]],template:function(e,t){1&e&&(m.TgZ(0,"div",0)(1,"ul",1),m.YNc(2,So,4,5,"li",2),m.qZA(),m.YNc(3,Oo,2,1,"ng-container",3),m.qZA()),2&e&&(m.Q6J("ngClass",m.VKq(3,No,t.componentconfig.inModal)),m.xp6(2),m.Q6J("ngForOf",t.tabs),m.xp6(1),m.Q6J("ngForOf",t.tabs))},dependencies:[i.mk,i.sg,i.O5,Dn],styles:[".slds-badge[_ngcontent-%COMP%]{background-color:#c00;color:#fff;font-weight:700;padding:.125rem .4rem}"]})}return ObjectRecordTabbedDetails})();const qo=["panelcontainer"];let Eo=(()=>{class ObjectRecordTabbedDetailsTab{view;metadata;componentFactoryResolver;model;language;panelcontainer;componentset="";componentRefs=[];constructor(e,t,s,i,n){this.view=e,this.metadata=t,this.componentFactoryResolver=s,this.model=i,this.language=n}ngAfterViewInit(){this.buildContainer()}buildContainer(){for(let e of this.componentRefs)e.destroy();for(let e of this.metadata.getComponentSetObjects(this.componentset))this.metadata.addComponent(e.component,this.panelcontainer).subscribe((t=>{t.instance.componentconfig=e.componentconfig,this.componentRefs.push(t)}))}static ɵfac=function(e){return new(e||ObjectRecordTabbedDetailsTab)(m.Y36(Oe.e),m.Y36(b.Pu),m.Y36(m._Vd),m.Y36(h.o),m.Y36(g.d))};static ɵcmp=m.Xpm({type:ObjectRecordTabbedDetailsTab,selectors:[["object-record-tabbed-details-tab"]],viewQuery:function(e,t){if(1&e&&m.Gf(qo,7,m.s_b),2&e){let e;m.iGM(e=m.CRH())&&(t.panelcontainer=e.first)}},inputs:{componentset:"componentset"},decls:2,vars:0,consts:[["panelcontainer",""]],template:function(e,t){1&e&&m._UZ(0,"div",null,0)},encapsulation:2})}return ObjectRecordTabbedDetailsTab})(),Yo=(()=>{class ObjectRecordDetailsRelatedListTab{language;componentconfig={};constructor(e){this.language=e}static ɵfac=function(e){return new(e||ObjectRecordDetailsRelatedListTab)(m.Y36(g.d))};static ɵcmp=m.Xpm({type:ObjectRecordDetailsRelatedListTab,selectors:[["object-record-details-related-list-tab"]],decls:3,vars:2,consts:[[3,"title"],[1,"slds-p-horizontal--xx-small"],[3,"componentconfig"]],template:function(e,t){1&e&&(m.TgZ(0,"system-collapsable-tab",0)(1,"div",1),m._UZ(2,"object-related-list",2),m.qZA()()),2&e&&(m.Q6J("title",t.componentconfig.name),m.xp6(2),m.Q6J("componentconfig",t.componentconfig))},dependencies:[io.z,_l.s],encapsulation:2})}return ObjectRecordDetailsRelatedListTab})();var Do=s(89866),Uo=s(19624),Qo=s(99533);function Ro(e,t){if(1&e){const e=m.EpF();m.TgZ(0,"object-modal-module-lookup",3),m.NdJ("selectedItems",(function(t){m.CHM(e);const s=m.oxw();return m.KtG(s.emitSelectedItems(t))})),m.qZA()}}let jo=(()=>{class ObjectSelectButton{metadata;model;module="";displaymodulename=!0;selectedItems=new m.vpe;displayModal=!1;popupSubscribe=void 0;constructor(e,t){this.metadata=e,this.model=t}ngOnInit(){this.model.module=this.module}openModal(){}emitSelectedItems(e){this.selectedItems.emit(e)}static ɵfac=function(e){return new(e||ObjectSelectButton)(m.Y36(b.Pu),m.Y36(h.o))};static ɵcmp=m.Xpm({type:ObjectSelectButton,selectors:[["object-select-button"]],inputs:{module:"module",displaymodulename:"displaymodulename"},outputs:{selectedItems:"selectedItems"},features:[m._Bn([h.o])],decls:3,vars:1,consts:[[1,"slds-button","slds-button--neutral",3,"click"],["label","LBL_SELECT"],[3,"selectedItems",4,"ngIf"],[3,"selectedItems"]],template:function(e,t){1&e&&(m.TgZ(0,"button",0),m.NdJ("click",(function(){return t.openModal()})),m._UZ(1,"system-label",1),m.qZA(),m.YNc(2,Ro,1,0,"object-modal-module-lookup",2)),2&e&&(m.xp6(2),m.Q6J("ngIf",t.displayModal))},dependencies:[i.O5,I._,Qo.X],encapsulation:2})}return ObjectSelectButton})();function Bo(e,t){if(1&e){const e=m.EpF();m.TgZ(0,"div",3)(1,"a",4),m.NdJ("click",(function(){m.CHM(e);const t=m.oxw();return m.KtG(t.deleteAddress())})),m._UZ(2,"system-label",5),m.qZA()()}}let Go=(()=>{class ObjectAddress{language;metadata;model;view;modelutilities;footer;componentconfig={};address={};parent={};fieldset="";constructor(e,t,s,i,n,l){this.language=e,this.metadata=t,this.model=s,this.view=i,this.modelutilities=n,this.footer=l,this.model.module="Addresses"}ngOnInit(){if(this.model.id=this.address.id,this.model.setData(this.address),null==this.fieldset||""==this.fieldset){let e=this.metadata.getComponentConfig("ObjectAddress",this.parent.module);null==e.fieldset&&""==e.fieldset||(this.fieldset=e.fieldset)}}deleteAddress(){this.metadata.addComponent("SystemConfirmDialog",this.footer.footercontainer).subscribe((e=>{e.instance.title=this.language.getLabel("LBL_DELETE_ADDRESS_TITLE","Addresses"),e.instance.message=this.language.getLabel("LBL_DELETE_ADDRESS_TEXT","Addresses"),e.instance.answer.subscribe((e=>{e&&this.model.setField("deleted",!0)}))}))}static ɵfac=function(e){return new(e||ObjectAddress)(m.Y36(g.d),m.Y36(b.Pu),m.Y36(h.o),m.Y36(Oe.e),m.Y36(Xl.A),m.Y36(os.M))};static ɵcmp=m.Xpm({type:ObjectAddress,selectors:[["object-address"]],inputs:{address:"address",parent:"parent",fieldset:"fieldset"},features:[m._Bn([h.o])],decls:3,vars:3,consts:[[1,"slds-box","slds-m-around--x-small",2,"padding","0px"],[3,"fieldset","direction"],["class","slds-text-align_right slds-m-around--x-small",4,"ngIf"],[1,"slds-text-align_right","slds-m-around--x-small"],["href","javascript:void(0);",1,"slds-text-link_reset",3,"click"],["label","LBL_DELETE"]],template:function(e,t){1&e&&(m.TgZ(0,"div",0),m._UZ(1,"object-record-fieldset",1),m.YNc(2,Bo,3,0,"div",2),m.qZA()),2&e&&(m.xp6(1),m.Q6J("fieldset",t.fieldset)("direction","vertical"),m.xp6(1),m.Q6J("ngIf",t.view.isEditMode()))},dependencies:[i.O5,I._,js.d],encapsulation:2})}return ObjectAddress})();function Po(e,t){if(1&e&&m._UZ(0,"object-address",10),2&e){const e=t.$implicit,s=m.oxw(2);m.Q6J("address",e)("parent",s.model)("fieldset",s.componentconfig.fieldset)}}function Ho(e,t){if(1&e&&(m.ynx(0),m.YNc(1,Po,1,3,"object-address",9),m.BQk()),2&e){const e=m.oxw();m.xp6(1),m.Q6J("ngForOf",e.addresses)}}function zo(e,t){if(1&e){const e=m.EpF();m.TgZ(0,"div",11)(1,"a",12),m.NdJ("click",(function(){m.CHM(e);const t=m.oxw();return m.KtG(t.addAddress())})),m._UZ(2,"system-label",13),m.qZA()()}}const Vo=function(e,t){return{"slds-is-open":e,"slds-hide":t}};let $o=(()=>{class ObjectAddressesPipe{transform(e){let t=[];for(let s in e)t.push(e[s]);return t}static ɵfac=function(e){return new(e||ObjectAddressesPipe)};static ɵpipe=m.Yjl({name:"objectaddressespipe",type:ObjectAddressesPipe,pure:!1})}return ObjectAddressesPipe})(),Ko=(()=>{class ObjectAddresses{language;metadata;model;view;modelutilities;componentconfig={};expanded=!0;constructor(e,t,s,i,n){this.language=e,this.metadata=t,this.model=s,this.view=i,this.modelutilities=n}get hasAddresses(){try{return null!=this.model.data.addresses.beans}catch(e){return!1}}ngOnInit(){this.componentconfig.collapsed&&(this.expanded=!1)}get hidden(){return this.componentconfig.requiredmodelstate&&!this.model.checkModelState(this.componentconfig.requiredmodelstate)}getDisplay(){return this.addresses.length>0||this.view.isEditMode()?"inherit":"none"}get addresses(){let e=[];try{for(let t in this.model.data.addresses.beans)0==this.model.data.addresses.beans[t].deleted&&e.push(this.model.data.addresses.beans[t])}catch(e){}return e}togglePanel(){this.expanded=!this.expanded}getChevronStyle(){if(!this.expanded)return{transform:"rotate(45deg)","margin-top":"4px"}}getTabStyle(){if(!this.expanded)return{height:"0px",transform:"rotateX(90deg)"}}addAddress(){let e=this.modelutilities.generateGuid();null==this.model.data.addresses&&(this.model.data.addresses={beans:[]}),this.model.data.addresses.beans[e]={id:e,deleted:!1}}static ɵfac=function(e){return new(e||ObjectAddresses)(m.Y36(g.d),m.Y36(b.Pu),m.Y36(h.o),m.Y36(Oe.e),m.Y36(Xl.A))};static ɵcmp=m.Xpm({type:ObjectAddresses,selectors:[["object-addresses"]],hostVars:2,hostBindings:function(e,t){2&e&&m.Udp("display",t.getDisplay())},decls:10,vars:10,consts:[[1,"slds-section",3,"ngClass"],[1,"slds-section__title"],["aria-controls","expando-unique-id","aria-expanded","true",1,"slds-button","slds-section__title-action",3,"click"],[3,"icon","size","addclasses"],[1,"slds-truncate"],["label","LBL_ADDRESSES"],[3,"ngStyle"],[4,"ngIf"],["class","slds-box slds-m-around--x-small slds-align--absolute-center","style","padding:0.5rem;",4,"ngIf"],[3,"address","parent","fieldset",4,"ngFor","ngForOf"],[3,"address","parent","fieldset"],[1,"slds-box","slds-m-around--x-small","slds-align--absolute-center",2,"padding","0.5rem"],["href","javascript:void(0);",1,"slds-text-link_reset",3,"click"],["label","LBL_ADD_ADDRESS"]],template:function(e,t){1&e&&(m.TgZ(0,"div",0)(1,"h3",1)(2,"button",2),m.NdJ("click",(function(){return t.togglePanel()})),m._UZ(3,"system-utility-icon",3),m.TgZ(4,"span",4),m._UZ(5,"system-label",5),m.qZA()()(),m.TgZ(6,"div")(7,"div",6),m.YNc(8,Ho,2,1,"ng-container",7),m.YNc(9,zo,3,0,"div",8),m.qZA()()()),2&e&&(m.Q6J("ngClass",m.WLB(7,Vo,t.expanded,t.hidden)),m.xp6(3),m.Q6J("icon","switch")("size","x-small")("addclasses","slds-section__title-action-icon slds-button__icon slds-button__icon_left"),m.xp6(4),m.Q6J("ngStyle",t.getTabStyle()),m.xp6(1),m.Q6J("ngIf",t.hasAddresses),m.xp6(1),m.Q6J("ngIf",t.view.isEditMode()))},dependencies:[i.mk,i.sg,i.O5,i.PC,I._,S.r,Go],encapsulation:2})}return ObjectAddresses})();function Xo(e,t){if(1&e&&(m.TgZ(0,"system-collapsable-tab",27),m._UZ(1,"object-record-fieldset",28),m.qZA()),2&e){const e=m.oxw();m.Q6J("title",e.language.getLabel("LBL_DETAILS")),m.xp6(1),m.Q6J("fieldset",e.fieldset)}}function Wo(e,t){if(1&e&&(m.TgZ(0,"tr")(1,"td",29),m._UZ(2,"system-display-datetime",30),m.qZA(),m.TgZ(3,"td",29)(4,"div",9),m._uU(5),m.qZA()(),m.TgZ(6,"td",29)(7,"div",31),m._UZ(8,"system-icon",32),m.TgZ(9,"div",9),m._uU(10),m.qZA()()(),m.TgZ(11,"td",29)(12,"div",9),m._uU(13),m.qZA()(),m.TgZ(14,"td",29),m._UZ(15,"system-checkbox",33),m.qZA(),m.TgZ(16,"td",29),m._UZ(17,"system-checkbox",33),m.qZA()()),2&e){const e=t.$implicit;m.xp6(2),m.Q6J("date",e.date_entered),m.xp6(3),m.Oqu(e.created_by_name),m.xp6(3),m.Q6J("module",e.module),m.xp6(2),m.Oqu(e.module),m.xp6(3),m.Oqu(e.summary_text),m.xp6(2),m.Q6J("ngModel",1==e.gdpr_data_agreement)("disabled",!0),m.xp6(2),m.Q6J("ngModel",1==e.gdpr_marketing_agreement||"g"==e.gdpr_marketing_agreement)("disabled",!0)}}function ea(e,t){1&e&&(m.TgZ(0,"div",34),m._UZ(1,"system-label",35),m.qZA())}const ta=function(e,t){return{id:null,module:e,data:t}};function sa(e,t){if(1&e&&(m.TgZ(0,"tr",36)(1,"td",29),m._UZ(2,"system-display-datetime",30),m.qZA(),m.TgZ(3,"td",29)(4,"div",9),m._uU(5),m.qZA()(),m.TgZ(6,"td",29)(7,"div",9),m._UZ(8,"field-label",37),m.qZA()(),m.TgZ(9,"td",29)(10,"div",9),m._UZ(11,"field-container",38),m.qZA()()()),2&e){const e=t.$implicit,s=m.oxw();m.Q6J("system-model-provider",m.WLB(5,ta,s.model.module,e.model)),m.xp6(2),m.Q6J("date",e.date_created),m.xp6(3),m.Oqu(e.created_by_name),m.xp6(3),m.Q6J("fieldname",e.field_name),m.xp6(3),m.Q6J("field",e.field_name)}}function ia(e,t){1&e&&(m.TgZ(0,"div",34),m._UZ(1,"system-label",39),m.qZA())}const na=function(){return{displayLabels:!1,displayLinks:!0,editable:!1}};let la=(()=>{class ObjectGDPRModal{language;metadata;model;view;componentconfig={};self={};gdprRelatedLog=[];gdprAuditLog=[];constructor(e,t,s,i){this.language=e,this.metadata=t,this.model=s,this.view=i,this.view.isEditable=!1}ngOnInit(){this.componentconfig=this.metadata.getComponentConfig("ObjectGDPRModal",this.model.module)}get fieldset(){return this.componentconfig.fieldset}closeModal(){this.self.destroy()}static ɵfac=function(e){return new(e||ObjectGDPRModal)(m.Y36(g.d),m.Y36(b.Pu),m.Y36(h.o),m.Y36(Oe.e))};static ɵcmp=m.Xpm({type:ObjectGDPRModal,selectors:[["ng-component"]],features:[m._Bn([Oe.e])],decls:52,vars:9,consts:[["size","large"],[3,"close"],["label","LBL_GDPR"],["margin","none",3,"grow"],[3,"title",4,"ngIf"],["margin","none",3,"title"],[1,"slds-table","slds-table--bordered","slds-table--cell-buffer"],[1,"slds-text-title--caps"],["scope","col"],[1,"slds-truncate"],["label","LBL_DATE_ENTERED"],["label","LBL_CREATED_BY"],["label","LBL_MODULE"],["label","LBL_NAME"],["label","LBL_DATA"],["label","LBL_MARKETING"],[4,"ngFor","ngForOf"],["class","slds-text-heading--small slds-p-around--medium slds-align--absolute-center",4,"ngIf"],["system-title","LBL_AUDITLOG","margin","none"],["label","LBL_DATE_MODIFIED"],["label","LBL_MODIFIED_BY"],["label","LBL_FIELD"],["label","LBL_VALUE"],[3,"system-view-provider"],[3,"system-model-provider",4,"ngFor","ngForOf"],[1,"slds-button","slds-button--neutral",3,"click"],["label","LBL_CLOSE"],[3,"title"],["direction","vertical",3,"fieldset"],["scope","row"],[3,"date"],[1,"slds-grid","slds-grid--vertical-align-center"],["size","xx-small",3,"module"],[3,"ngModel","disabled"],[1,"slds-text-heading--small","slds-p-around--medium","slds-align--absolute-center"],["label","MSG_NO_GDPRRECORDS_FOUND"],[3,"system-model-provider"],[3,"fieldname"],["fielddisplayclass","slds-truncate",3,"field"],["label","MSG_NOAUDITRECORDS_FOUND"]],template:function(e,t){1&e&&(m.TgZ(0,"system-modal",0)(1,"system-modal-header",1),m.NdJ("close",(function(){return t.closeModal()})),m._UZ(2,"system-label",2),m.qZA(),m.TgZ(3,"system-modal-content",3),m.YNc(4,Xo,2,2,"system-collapsable-tab",4),m.TgZ(5,"system-collapsable-tab",5)(6,"table",6)(7,"thead")(8,"tr",7)(9,"th",8)(10,"div",9),m._UZ(11,"system-label",10),m.qZA()(),m.TgZ(12,"th",8)(13,"div",9),m._UZ(14,"system-label",11),m.qZA()(),m.TgZ(15,"th",8)(16,"div",9),m._UZ(17,"system-label",12),m.qZA()(),m.TgZ(18,"th",8)(19,"div",9),m._UZ(20,"system-label",13),m.qZA()(),m.TgZ(21,"th",8)(22,"div",9),m._UZ(23,"system-label",14),m.qZA()(),m.TgZ(24,"th",8)(25,"div",9),m._UZ(26,"system-label",15),m.qZA()()()(),m.TgZ(27,"tbody"),m.YNc(28,Wo,18,9,"tr",16),m.qZA()(),m.YNc(29,ea,2,0,"div",17),m.qZA(),m.TgZ(30,"system-collapsable-tab",18)(31,"table",6)(32,"thead")(33,"tr",7)(34,"th",8)(35,"div",9),m._UZ(36,"system-label",19),m.qZA()(),m.TgZ(37,"th",8)(38,"div",9),m._UZ(39,"system-label",20),m.qZA()(),m.TgZ(40,"th",8)(41,"div",9),m._UZ(42,"system-label",21),m.qZA()(),m.TgZ(43,"th",8)(44,"div",9),m._UZ(45,"system-label",22),m.qZA()()()(),m.TgZ(46,"tbody",23),m.YNc(47,sa,12,8,"tr",24),m.qZA()(),m.YNc(48,ia,2,0,"div",17),m.qZA()(),m.TgZ(49,"system-modal-footer")(50,"button",25),m.NdJ("click",(function(){return t.closeModal()})),m._UZ(51,"system-label",26),m.qZA()()()),2&e&&(m.xp6(3),m.Q6J("grow",!0),m.xp6(1),m.Q6J("ngIf",t.fieldset),m.xp6(1),m.Q6J("title",t.language.getLabel("LBL_GDPR_RECORDS")),m.xp6(23),m.Q6J("ngForOf",t.gdprRelatedLog),m.xp6(1),m.Q6J("ngIf",0===t.gdprRelatedLog.length),m.xp6(17),m.Q6J("system-view-provider",m.DdM(8,na)),m.xp6(1),m.Q6J("ngForOf",t.gdprAuditLog),m.xp6(1),m.Q6J("ngIf",0===t.gdprAuditLog.length))},dependencies:[i.sg,i.O5,l.JJ,l.On,Si.q,Ne.j,ri.U,io.z,St.a,Z.f,I._,Fe.j,qe.x,Ee.p,Ye.y,Vs.u,ln.V,C.S,js.d],encapsulation:2})}return ObjectGDPRModal})();const oa=["object-row-item",""];function aa(e,t){if(1&e){const e=m.EpF();m.TgZ(0,"td",2)(1,"label",3)(2,"input",4),m.NdJ("ngModelChange",(function(t){m.CHM(e);const s=m.oxw();return m.KtG(s.selected=t)})),m.qZA(),m._UZ(3,"span",5),m.qZA()()}if(2&e){const e=m.oxw();m.xp6(2),m.Q6J("ngModel",e.selected)}}function da(e,t){if(1&e&&(m.TgZ(0,"td",6),m._UZ(1,"field-container",7),m.qZA()),2&e){const e=t.$implicit;m.xp6(1),m.Q6J("field",e.field)("fieldconfig",e.fieldconfig)("fielddisplayclass","slds-truncate slds-p-horizontal--x-small")}}function ra(e,t){1&e&&(m.TgZ(0,"td",2),m._UZ(1,"object-action-menu",8),m.qZA()),2&e&&(m.xp6(1),m.Q6J("buttonsize","small"))}let ca=(()=>{class ObjectRowItemComponent{model;view;router;language;rowselect=!1;listFields=[];listItem={};module;inlineedit=!1;showActionMenu=!0;_selected=!1;select=new m.vpe;constructor(e,t,s,i){this.model=e,this.view=t,this.router=s,this.language=i}ngOnInit(){this.model.module=this.module,this.model.id=this.listItem.id,this.model.setData(this.listItem),this.view.isEditable=this.inlineedit&&this.model.checkAccess("edit")}set selected(e){this._selected=e,this.select.emit(e)}get selected(){return this._selected}navigateDetail(){this.router.navigate(["/module/"+this.model.module+"/"+this.model.id])}static ɵfac=function(e){return new(e||ObjectRowItemComponent)(m.Y36(h.o),m.Y36(Oe.e),m.Y36(o.F0),m.Y36(g.d))};static ɵcmp=m.Xpm({type:ObjectRowItemComponent,selectors:[["","object-row-item",""]],hostVars:4,hostBindings:function(e,t){2&e&&m.ekj("slds-is-active",t._selected)("slds-is-selected",t._selected)},inputs:{rowselect:["rowselection","rowselect"],listFields:["fields","listFields"],listItem:["itemdata","listItem"],module:"module",inlineedit:"inlineedit",showActionMenu:"showActionMenu",_selected:["selected","_selected"]},outputs:{select:"select"},features:[m._Bn([h.o,Oe.e])],attrs:oa,decls:3,vars:3,consts:[["role","gridcell","class","slds-cell-shrink",4,"ngIf"],["scope","row",4,"ngFor","ngForOf"],["role","gridcell",1,"slds-cell-shrink"],[1,"slds-checkbox"],["type","checkbox",3,"ngModel","ngModelChange"],[1,"slds-checkbox--faux"],["scope","row"],[3,"field","fieldconfig","fielddisplayclass"],[3,"buttonsize"]],template:function(e,t){1&e&&(m.YNc(0,aa,4,1,"td",0),m.YNc(1,da,2,3,"td",1),m.YNc(2,ra,2,1,"td",0)),2&e&&(m.Q6J("ngIf",t.rowselect),m.xp6(1),m.Q6J("ngForOf",t.listFields),m.xp6(1),m.Q6J("ngIf",t.showActionMenu))},dependencies:[i.sg,i.O5,l.Wl,l.JJ,l.On,Ne.j,it.g],encapsulation:2})}return ObjectRowItemComponent})(),ua=(()=>{class ObjectActionVCardButton{language;model;modal;backend;constructor(e,t,s,i){this.language=e,this.model=t,this.modal=s,this.backend=i}execute(){let e=this.model.module+"_"+this.model.getField("summary_text")+".vcf";this.modal.openModal("SystemLoadingModal").subscribe((t=>{t.instance.messagelabel="MSG_GENERATING_VCARD",this.backend.downloadFile({route:`/module/${this.model.module}/${this.model.id}/vcard`},e,"text/bin").subscribe((e=>{t.instance.self.destroy()}),(e=>{t.instance.self.destroy()}))}))}static ɵfac=function(e){return new(e||ObjectActionVCardButton)(m.Y36(g.d),m.Y36(h.o),m.Y36(V.o),m.Y36(W.y))};static ɵcmp=m.Xpm({type:ObjectActionVCardButton,selectors:[["object-action-output-bean-button"]],decls:2,vars:0,template:function(e,t){1&e&&(m.TgZ(0,"span"),m._uU(1,"VCARD"),m.qZA())},encapsulation:2})}return ObjectActionVCardButton})();function ma(e,t){1&e&&m._UZ(0,"system-stencil")}let ga=(()=>{class ObjectModelPopoverHeader{model;constructor(e){this.model=e}static ɵfac=function(e){return new(e||ObjectModelPopoverHeader)(m.Y36(h.o))};static ɵcmp=m.Xpm({type:ObjectModelPopoverHeader,selectors:[["object-model-popover-header"]],decls:7,vars:3,consts:[[1,"slds-media","slds-media_center","slds-m-bottom_small","slds-p-right--large"],["size","small",3,"module"],[1,"slds-media__body"],[4,"ngIf"],[1,"slds-text-heading_small","slds-hyphenate"],["href","javascript:void(0);",3,"click"]],template:function(e,t){1&e&&(m.TgZ(0,"header",0),m._UZ(1,"system-icon",1),m.TgZ(2,"div",2),m.YNc(3,ma,1,0,"system-stencil",3),m.TgZ(4,"h2",4)(5,"a",5),m.NdJ("click",(function(){return t.model.goDetail()})),m._uU(6),m.qZA()()()()),2&e&&(m.xp6(1),m.Q6J("module",t.model.module),m.xp6(2),m.Q6J("ngIf",t.model.isLoading),m.xp6(3),m.Oqu(t.model.data.summary_text))},dependencies:[i.O5,Z.f,ci.B],encapsulation:2})}return ObjectModelPopoverHeader})();const ha=["popover"],pa=["relatedcontainer"];function fa(e,t){if(1&e&&m._UZ(0,"system-componentset",11),2&e){const e=m.oxw();m.Q6J("componentset",e.headercomponentset)}}function ba(e,t){1&e&&m._UZ(0,"object-model-popover-header")}const _a=function(e,t){return{"slds-size--1-of-2":e,"slds-size--1-of-1":t}};function va(e,t){if(1&e&&(m.TgZ(0,"div",12)(1,"dl")(2,"dd"),m._UZ(3,"field-container",13),m.qZA()()()),2&e){const e=t.$implicit,s=m.oxw();m.Q6J("ngClass",m.WLB(4,_a,s.fields.length>1,1==s.fields.length)),m.xp6(3),m.Q6J("field",e.field)("fieldconfig",e.fieldconfig)("fielddisplayclass","slds-truncate")}}let ya=(()=>{class ObjectModelPopover{model;view;metadata;popoverside="right";popoverpos="top";styles=null;hidePopoverTimeout={};popover;relatedContainer;parentElementRef=null;self=null;fields=[];fieldset="";componentset="";headercomponentset="";heightcorrection=30;widthcorrection=30;popovermodule;popoverid;constructor(e,t,s){this.model=e,this.view=t,this.metadata=s,this.view.displayLinks=!1}get relatedStyle(){return{"max-height":`calc(100vh - ${this.relatedContainer.element.nativeElement.getBoundingClientRect().top+5}px)`}}onMouseOver(){this.hidePopoverTimeout&&window.clearTimeout(this.hidePopoverTimeout)}onMouseOut(){this.closePopover()}get popoverStyle(){let e=this.parentElementRef.nativeElement.getBoundingClientRect(),t=this.popover.element.nativeElement.getBoundingClientRect();return window.innerWidth-e.left>t.width?this.popoverside="right":this.popoverside="left",e.top-30+t.height>window.innerHeight&&e.top-t.height+this.heightcorrection>0?(this.popoverpos="bottom",{top:e.top-t.height+this.heightcorrection+"px",left:"right"==this.popoverside?e.left+100+"px":e.left-t.width-this.widthcorrection+"px"}):(this.popoverpos="top",{top:e.top-this.heightcorrection+"px",left:"right"==this.popoverside?e.left+100+"px":e.left-t.width-this.widthcorrection+"px"})}ngOnInit(){let e=this.metadata.getComponentConfig("ObjectModelPopover",this.model.module);this.popoverid&&this.popovermodule&&(this.model.module=this.popovermodule,this.model.id=this.popoverid,this.model.getData()),e.fieldset||e.componentset?(this.fields=this.metadata.getFieldSetFields(e.fieldset),this.fieldset=e.fieldset,this.componentset=e.componentset,this.headercomponentset=e.headercomponentset):(e=this.metadata.getComponentConfig("ObjectPageHeaderDetails",this.model.module),e.fieldset&&(this.fields=this.metadata.getFieldSetFields(e.fieldset),this.fieldset=e.fieldset)),e.forcereload&&this.model.getData(!1),this.styles=this.popoverStyle}getNubbinClass(){return("left"==this.popoverside?"slds-nubbin--right-":"slds-nubbin--left-")+this.popoverpos}closePopover(e=!1){e?this.self.destroy():this.hidePopoverTimeout=window.setTimeout((()=>this.self.destroy()),500)}static ɵfac=function(e){return new(e||ObjectModelPopover)(m.Y36(h.o),m.Y36(Oe.e),m.Y36(b.Pu))};static ɵcmp=m.Xpm({type:ObjectModelPopover,selectors:[["object-model-popover"]],viewQuery:function(e,t){if(1&e&&(m.Gf(ha,7,m.s_b),m.Gf(pa,7,m.s_b)),2&e){let e;m.iGM(e=m.CRH())&&(t.popover=e.first),m.iGM(e=m.CRH())&&(t.relatedContainer=e.first)}},features:[m._Bn([Oe.e])],decls:13,vars:7,consts:[["role","dialog",1,"slds-popover","slds-popover_large","slds-popover--panel","slds-is-fixed",2,"transition",".5s","z-index","11000",3,"ngStyle","ngClass","mouseenter","mouseleave"],[1,"slds-button","slds-button_icon","slds-button_icon","slds-button_icon-small","slds-float_right","slds-popover__close",3,"click"],["icon","close"],["popover",""],[1,"slds-popover__header"],[3,"componentset",4,"ngIf"],[4,"ngIf"],[1,"slds-grid","slds-wrap","slds-p-right--large"],["class","slds-p-horizontal--small slds-size--1-of-2 slds-p-bottom--x-small",3,"ngClass",4,"ngFor","ngForOf"],[1,"slds-popover__body","slds-scrollable--y","spice-scrollbar",3,"ngStyle"],["relatedcontainer",""],[3,"componentset"],[1,"slds-p-horizontal--small","slds-size--1-of-2","slds-p-bottom--x-small",3,"ngClass"],[3,"field","fieldconfig","fielddisplayclass"]],template:function(e,t){1&e&&(m.TgZ(0,"div",0),m.NdJ("mouseenter",(function(){return t.onMouseOver()}))("mouseleave",(function(){return t.onMouseOut()})),m.TgZ(1,"button",1),m.NdJ("click",(function(){return t.closePopover(!0)})),m._UZ(2,"system-button-icon",2),m.qZA(),m.TgZ(3,"div",null,3)(5,"div",4),m.YNc(6,fa,1,1,"system-componentset",5),m.YNc(7,ba,1,0,"object-model-popover-header",6),m.TgZ(8,"footer",7),m.YNc(9,va,4,7,"div",8),m.qZA()(),m.TgZ(10,"div",9,10),m._UZ(12,"system-componentset",11),m.qZA()()()),2&e&&(m.Q6J("ngStyle",t.popoverStyle)("ngClass",t.getNubbinClass()),m.xp6(6),m.Q6J("ngIf",t.headercomponentset),m.xp6(1),m.Q6J("ngIf",!t.headercomponentset),m.xp6(2),m.Q6J("ngForOf",t.fields),m.xp6(1),m.Q6J("ngStyle",t.relatedStyle),m.xp6(2),m.Q6J("componentset",t.componentset))},dependencies:[i.mk,i.sg,i.O5,i.PC,Ne.j,w.J,Ki.E,ga],encapsulation:2})}return ObjectModelPopover})();const xa=function(e){return{"slds-hide":e}};function wa(e,t){if(1&e&&(m.TgZ(0,"div",1),m._UZ(1,"field-label",2)(2,"field-container",2),m.qZA()),2&e){const e=m.oxw();m.Q6J("ngClass",m.VKq(3,xa,e.hidden)),m.xp6(1),m.Q6J("fieldname",e.fieldname),m.xp6(1),m.Q6J("fieldname",e.fieldname)}}let Za=(()=>{class ObjectModelPopoverField{model;view;componentconfig={};constructor(e,t){this.model=e,this.view=t}get hidden(){return this.componentconfig.hideempty&&!this.model.getFieldValue(this.componentconfig.field)}get fieldname(){return this.componentconfig.field?this.componentconfig.field:""}static ɵfac=function(e){return new(e||ObjectModelPopoverField)(m.Y36(h.o),m.Y36(Oe.e))};static ɵcmp=m.Xpm({type:ObjectModelPopoverField,selectors:[["ng-component"]],features:[m._Bn([Oe.e])],decls:1,vars:1,consts:[["class","slds-p-vertical--xx-small slds-p-horizontal--large",3,"ngClass",4,"ngIf"],[1,"slds-p-vertical--xx-small","slds-p-horizontal--large",3,"ngClass"],[3,"fieldname"]],template:function(e,t){1&e&&m.YNc(0,wa,3,5,"div",0),2&e&&m.Q6J("ngIf",t.fieldname)},dependencies:[i.mk,i.O5,Si.q,Ne.j],encapsulation:2})}return ObjectModelPopoverField})();function Ta(e,t){if(1&e&&(m.ynx(0),m.TgZ(1,"dt",5),m._UZ(2,"field-label",6),m.qZA(),m.TgZ(3,"dd",7),m._UZ(4,"field-container",8),m.qZA(),m.BQk()),2&e){const e=t.$implicit;m.xp6(2),m.Q6J("fieldname",e.field)("fieldconfig",e.fieldconfig),m.xp6(2),m.Q6J("field",e.field)("fieldconfig",e.fieldconfig)("fielddisplayclass","slds-truncate")}}let Ca=(()=>{class ObjectModelPopoverRelatedItem{language;metadata;model;view;module="";item={};fields=[];constructor(e,t,s,i){this.language=e,this.metadata=t,this.model=s,this.view=i,this.view.displayLabels=!1}ngOnInit(){this.model.module=this.module,this.model.id=this.item.id,this.model.setData(this.item)}goDetail(){this.model.goDetail()}static ɵfac=function(e){return new(e||ObjectModelPopoverRelatedItem)(m.Y36(g.d),m.Y36(b.Pu),m.Y36(h.o),m.Y36(Oe.e))};static ɵcmp=m.Xpm({type:ObjectModelPopoverRelatedItem,selectors:[["object-model-popover-related-item"]],inputs:{module:"module",item:"item",fields:"fields"},features:[m._Bn([h.o,Oe.e])],decls:6,vars:3,consts:[[1,"slds-m-top_x-small"],[1,"slds-truncate",3,"title"],["href","javascript:void(0);",3,"click"],[1,"slds-list_horizontal","slds-wrap","slds-text-body_small"],[4,"ngFor","ngForOf"],[1,"slds-item_label","slds-text-color_weak","slds-truncate"],[3,"fieldname","fieldconfig"],["title","$500,000",1,"slds-item_detail","slds-text-color_weak","slds-truncate"],[3,"field","fieldconfig","fielddisplayclass"]],template:function(e,t){1&e&&(m.TgZ(0,"dd",0)(1,"p",1)(2,"a",2),m.NdJ("click",(function(){return t.goDetail()})),m._uU(3),m.qZA()(),m.TgZ(4,"dl",3),m.YNc(5,Ta,5,5,"ng-container",4),m.qZA()()),2&e&&(m.xp6(1),m.Q6J("title",t.model.displayname),m.xp6(2),m.Oqu(t.model.displayname),m.xp6(2),m.Q6J("ngForOf",t.fields))},dependencies:[i.sg,Si.q,Ne.j],encapsulation:2})}return ObjectModelPopoverRelatedItem})();function ka(e,t){if(1&e&&(m.ynx(0),m._uU(1),m.BQk()),2&e){const e=m.oxw(2);m.xp6(1),m.hij(" (",e.relatedmodels.count,")")}}function Aa(e,t){1&e&&(m.TgZ(0,"div",13),m._UZ(1,"system-spinner",14),m.qZA())}function La(e,t){if(1&e&&m._UZ(0,"object-model-popover-related-item",15),2&e){const e=t.$implicit,s=m.oxw(2);m.Q6J("module",s.relatedmodels.relatedModule)("item",e)("fields",s.listfields)}}function Ia(e,t){if(1&e){const e=m.EpF();m.TgZ(0,"dd",16)(1,"a",17),m.NdJ("click",(function(){m.CHM(e);const t=m.oxw(2);return m.KtG(t.showAll())})),m._UZ(2,"system-label",18),m.qZA()()}}function Sa(e,t){if(1&e&&(m.TgZ(0,"dl",1)(1,"dt",2)(2,"div",3)(3,"div",4),m._UZ(4,"system-icon",5),m.qZA(),m.TgZ(5,"div",6)(6,"p",7),m._UZ(7,"system-label",8),m.YNc(8,ka,2,1,"ng-container",9),m.qZA()()()(),m.YNc(9,Aa,2,0,"div",10),m.YNc(10,La,1,3,"object-model-popover-related-item",11),m.YNc(11,Ia,3,0,"dd",12),m.qZA()),2&e){const e=m.oxw();m.xp6(4),m.Q6J("module",e.relatedmodels.relatedModule),m.xp6(3),m.Q6J("label",e.panelTitle),m.xp6(1),m.Q6J("ngIf",!e.relatedmodels.isloading),m.xp6(1),m.Q6J("ngIf",e.relatedmodels.isloading),m.xp6(1),m.Q6J("ngForOf",e.relatedmodels.items),m.xp6(1),m.Q6J("ngIf",e.canViewAll)}}let Ma=(()=>{class ObjectModelPopoverRelated extends Tl{language;metadata;relatedmodels;model;cdref;router;constructor(e,t,s,i,n,l){super(e,t,s,i,n),this.language=e,this.metadata=t,this.relatedmodels=s,this.model=i,this.cdref=n,this.router=l}get canViewAll(){return this.relatedmodels.count>0&&this.relatedmodels.count>this.relatedmodels.loaditems}showAll(){this.router.navigate(["/module/"+this.model.module+"/"+this.model.id+"/"+this.relatedmodels.relatedModule+"/"+this.relatedmodels._linkName])}static ɵfac=function(e){return new(e||ObjectModelPopoverRelated)(m.Y36(g.d),m.Y36(b.Pu),m.Y36(kt.j),m.Y36(h.o),m.Y36(m.sBO),m.Y36(o.F0))};static ɵcmp=m.Xpm({type:ObjectModelPopoverRelated,selectors:[["object-model-popover-related"]],features:[m._Bn([kt.j]),m.qOj],decls:1,vars:1,consts:[["class","slds-popover__body-list",4,"ngIf"],[1,"slds-popover__body-list"],[1,"slds-m-bottom_small"],[1,"slds-media","slds-media_center"],[1,"slds-media__figure"],["size","small",3,"module"],[1,"slds-media__body"],[1,"slds-text-heading_small","slds-hyphenate"],[3,"label"],[4,"ngIf"],["class","slds-align_absolute-center",4,"ngIf"],[3,"module","item","fields",4,"ngFor","ngForOf"],["class","slds-m-top_x-small slds-text-align_right",4,"ngIf"],[1,"slds-align_absolute-center"],["size","12"],[3,"module","item","fields"],[1,"slds-m-top_x-small","slds-text-align_right"],["href","javascript:void(0);",3,"click"],["label","LBL_VIEWALL"]],template:function(e,t){1&e&&m.YNc(0,Sa,12,6,"dl",0),2&e&&m.Q6J("ngIf",t.aclAccess)},dependencies:[i.sg,i.O5,Z.f,I._,Mt.W,Ca],encapsulation:2})}return ObjectModelPopoverRelated})(),Ja=(()=>{class ObjectActionDeactivateBeansButton{language;metadata;modal;injector;modellist;modalwindow;actionconfig;saving=!1;selectedItems=[];constructor(e,t,s,i,n,l){this.language=e,this.metadata=t,this.modal=s,this.injector=i,this.modellist=n,this.modalwindow=l}get disabled(){return!1}get hasSelection(){return this.modellist.getSelectedCount()>1}get hidden(){return!this.hasSelection}execute(){this.saving||(this.selectedItems=this.modellist.getSelectedItems(),this.modal.openModal("ObjectActionDeactivateBeansModal",!0,this.injector).subscribe((e=>{e&&(e.instance.selectedItems=this.selectedItems,e.instance.module=this.modellist.module)})))}static ɵfac=function(e){return new(e||ObjectActionDeactivateBeansButton)(m.Y36(g.d),m.Y36(b.Pu),m.Y36(V.o),m.Y36(m.zs3),m.Y36(y.t),m.Y36(xt.S,8))};static ɵcmp=m.Xpm({type:ObjectActionDeactivateBeansButton,selectors:[["object-action-deactivate-beans-button"]],decls:2,vars:0,consts:[["label","LBL_DEACTIVATE_BEANS"]],template:function(e,t){1&e&&(m.TgZ(0,"span"),m._UZ(1,"system-label",0),m.qZA())},dependencies:[I._],encapsulation:2})}return ObjectActionDeactivateBeansButton})();function Oa(e,t){1&e&&(m.TgZ(0,"div",12),m._UZ(1,"system-label",13)(2,"system-button-icon",14),m.qZA()),2&e&&(m.xp6(2),m.Q6J("icon","check"))}function Na(e,t){1&e&&(m.TgZ(0,"div",12),m._UZ(1,"system-label",15)(2,"system-button-icon",14),m.qZA()),2&e&&(m.xp6(2),m.Q6J("icon","close"))}function Fa(e,t){if(1&e){const e=m.EpF();m.TgZ(0,"system-input-radio",10),m.NdJ("ngModelChange",(function(t){m.CHM(e);const s=m.oxw();return m.KtG(s.value=t)})),m._uU(1),m.YNc(2,Oa,3,1,"div",11),m.YNc(3,Na,3,1,"div",11),m.qZA()}if(2&e){const e=t.$implicit,s=m.oxw();m.Q6J("value",e.id)("ngModel",s.value),m.xp6(1),m.hij("",s.fieldname(e)," "),m.xp6(1),m.Q6J("ngIf","deactivated"==e.itemsaved),m.xp6(1),m.Q6J("ngIf","error"==e.itemsaved)}}function qa(e,t){if(1&e){const e=m.EpF();m.TgZ(0,"button",16),m.NdJ("click",(function(){m.CHM(e);const t=m.oxw();return m.KtG(t.closeModal())})),m._UZ(1,"system-label",17),m.qZA()}}function Ea(e,t){if(1&e){const e=m.EpF();m.TgZ(0,"button",18),m.NdJ("click",(function(){m.CHM(e);const t=m.oxw();return m.KtG(t.select())})),m._UZ(1,"system-label",19),m.qZA()}}function Ya(e,t){if(1&e){const e=m.EpF();m.TgZ(0,"button",18),m.NdJ("click",(function(){m.CHM(e);const t=m.oxw();return m.KtG(t.closeModal())})),m._UZ(1,"system-label",20),m.qZA()}}let Da=(()=>{class ObjectActionDeactivateBeansModal{language;model;metadata;componentconfig={};selectedItems=[];module=[];showfinish=!1;self={};value="";constructor(e,t,s){this.language=e,this.model=t,this.metadata=s}ngOnInit(){this.componentconfig=this.metadata.getComponentConfig("ObjectActionDeactivateBeansModal",this.model.module),this.value=this.selectedItems[0].id}fieldname(e){return e[this.componentconfig.fieldname]}closeModal(){this.self.destroy()}select(){let e=0;for(let t of this.selectedItems)t.id!=this.value?(t.successor_id=this.value,t.is_inactive=1,this.model.reset(),this.model.id=t.id,this.model.initialize(),this.model.module=this.module,this.model.setData(t),this.model.validate()?this.model.save().subscribe((s=>{e++,t.itemsaved="deactivated",e==this.selectedItems.length-1&&(this.showfinish=!0)}),(s=>{e++,t.itemsaved="error",e==this.selectedItems.length-1&&(this.showfinish=!0)})):e++):e++}static ɵfac=function(e){return new(e||ObjectActionDeactivateBeansModal)(m.Y36(g.d),m.Y36(h.o),m.Y36(b.Pu))};static ɵcmp=m.Xpm({type:ObjectActionDeactivateBeansModal,selectors:[["ng-component"]],inputs:{selectedItems:"selectedItems",module:"module"},features:[m._Bn([h.o])],decls:12,vars:4,consts:[["size","x-small"],[3,"close"],["label","LBL_SELECT_ACTIVE"],["margin","none"],[1,"slds-m-left_x-small","slds-m-vertical_large"],[1,"slds-form-element"],[1,"slds-form-element__control"],["name","module",3,"value","ngModel","ngModelChange",4,"ngFor","ngForOf"],["class","slds-button slds-button--neutral",3,"click",4,"ngIf"],["class","slds-button slds-button--brand",3,"click",4,"ngIf"],["name","module",3,"value","ngModel","ngModelChange"],["class","slds-float--right slds-m-right_small",4,"ngIf"],[1,"slds-float--right","slds-m-right_small"],["label","LBL_DEACTIVATED"],[1,"slds-m-left_small",3,"icon"],["label","LBL_ERROR"],[1,"slds-button","slds-button--neutral",3,"click"],["label","LBL_CANCEL"],[1,"slds-button","slds-button--brand",3,"click"],["label","LBL_EXECUTE"],["label","LBL_FINISH"]],template:function(e,t){1&e&&(m.TgZ(0,"system-modal",0)(1,"system-modal-header",1),m.NdJ("close",(function(){return t.closeModal()})),m._UZ(2,"system-label",2),m.qZA(),m.TgZ(3,"system-modal-content",3)(4,"div",4)(5,"div",5)(6,"div",6),m.YNc(7,Fa,4,5,"system-input-radio",7),m.qZA()()()(),m.TgZ(8,"system-modal-footer"),m.YNc(9,qa,2,0,"button",8),m.YNc(10,Ea,2,0,"button",9),m.YNc(11,Ya,2,0,"button",9),m.qZA()()),2&e&&(m.xp6(7),m.Q6J("ngForOf",t.selectedItems),m.xp6(2),m.Q6J("ngIf",!t.showfinish),m.xp6(1),m.Q6J("ngIf",!t.showfinish),m.xp6(1),m.Q6J("ngIf",t.showfinish))},dependencies:[i.sg,i.O5,l.JJ,l.On,w.J,G.A,I._,Fe.j,qe.x,Ee.p,Ye.y],encapsulation:2})}return ObjectActionDeactivateBeansModal})();var Ua=s(15982);function Qa(e,t){if(1&e){const e=m.EpF();m.TgZ(0,"div",13)(1,"input",14,15),m.NdJ("keyup.enter",(function(){m.CHM(e);const t=m.MAs(2),s=m.oxw();return m.KtG(s.addChecklist(t.value))})),m.qZA(),m.TgZ(3,"button",16),m.NdJ("click",(function(){m.CHM(e);const t=m.MAs(2),s=m.oxw();return m.KtG(s.addChecklist(t.value))})),m._UZ(4,"system-button-icon",17),m.qZA(),m.TgZ(5,"button",18),m.NdJ("click",(function(){m.CHM(e);const t=m.oxw();return m.KtG(t.setShowAddChecklist(!1))})),m._UZ(6,"system-button-icon",19),m.qZA()()}if(2&e){const e=m.MAs(2);m.xp6(3),m.Q6J("disabled",!e.value)}}function Ra(e,t){if(1&e){const e=m.EpF();m.TgZ(0,"div",38)(1,"span",39),m.NdJ("click",(function(t){m.CHM(e);const s=m.oxw().$implicit;return m.oxw(2).setCurrentEditingChecklist(s),m.KtG(t.stopPropagation())})),m._uU(2),m.qZA()()}if(2&e){const e=m.oxw().$implicit;m.xp6(1),m.Q6J("system-title",e.name),m.xp6(1),m.Oqu(e.name)}}function ja(e,t){if(1&e){const e=m.EpF();m.TgZ(0,"input",40),m.NdJ("click",(function(e){return e.stopPropagation()}))("ngModelChange",(function(t){m.CHM(e);const s=m.oxw().$implicit,i=m.oxw(2);return m.KtG(i.setChecklistName(t,s))}))("keyup.enter",(function(){m.CHM(e);const t=m.oxw().$implicit,s=m.oxw(2);return m.KtG(s.save(t))}))("blur",(function(){m.CHM(e);const t=m.oxw().$implicit,s=m.oxw(2);return m.KtG(s.save(t))})),m.qZA()}if(2&e){const e=m.oxw().$implicit;m.Q6J("ngModel",e.name)}}function Ba(e,t){if(1&e){const e=m.EpF();m.TgZ(0,"button",41),m.NdJ("click",(function(){m.CHM(e);const t=m.oxw().$implicit,s=m.oxw(2);return m.KtG(s.setShowAddButton(t,!1))})),m._UZ(1,"system-button-icon",9),m.qZA()}if(2&e){const e=m.oxw().$implicit,t=m.oxw(2);m.ekj("spice-hover-child",e!=t.activeChecklist)}}function Ga(e,t){if(1&e){const e=m.EpF();m.TgZ(0,"div",51)(1,"input",52),m.NdJ("ngModelChange",(function(t){m.CHM(e);const s=m.oxw().$implicit,i=m.oxw(3);return m.KtG(i.setItemTextValue(t,s))}))("keyup.enter",(function(){m.CHM(e);const t=m.oxw().$implicit,s=m.oxw(3);return m.KtG(s.save(t))}))("blur",(function(t){m.CHM(e),m.oxw();const s=m.MAs(1),i=m.oxw(3);return m.KtG(i.onItemBlur(t,s))})),m.qZA(),m.TgZ(2,"button",53),m.NdJ("click",(function(t){m.CHM(e);const s=m.oxw().$implicit;return m.oxw(3).save(s),m.KtG(t.stopPropagation())})),m._UZ(3,"system-button-icon",17),m.qZA(),m.TgZ(4,"button",54),m.NdJ("click",(function(t){m.CHM(e);const s=m.oxw().$implicit,i=m.oxw(3);return m.KtG(i.cancelItemChanges(s,t))})),m._UZ(5,"system-button-icon",19),m.qZA()()}if(2&e){const e=m.oxw().$implicit;m.xp6(1),m.Q6J("ngModel",e.text),m.xp6(1),m.Q6J("disabled",!e.isChanged)}}function Pa(e,t){if(1&e&&(m.TgZ(0,"div",55),m._uU(1),m.qZA()),2&e){const e=m.oxw().$implicit;m.Udp("text-decoration",e.isCompleted?"line-through":"initial"),m.Q6J("system-title",e.text),m.xp6(1),m.hij(" ",e.text," ")}}function Ha(e,t){if(1&e){const e=m.EpF();m.TgZ(0,"div",56),m.NdJ("click",(function(){m.CHM(e);const t=m.oxw().$implicit,s=m.oxw(3);return m.KtG(s.setCurrentEditingItem(t))})),m._UZ(1,"system-label",57),m.qZA()}}function za(e,t){if(1&e){const e=m.EpF();m.TgZ(0,"div",42,43)(2,"div",44),m.NdJ("click",(function(t){const s=m.CHM(e).$implicit;return m.oxw(3).setCurrentEditingItem(s),m.KtG(t.stopPropagation())})),m.TgZ(3,"div",25),m._UZ(4,"system-utility-icon",26),m.qZA(),m.TgZ(5,"system-checkbox",45),m.NdJ("ngModelChange",(function(t){const s=m.CHM(e).$implicit;return m.KtG(s.isCompleted=t)}))("ngModelChange",(function(){const t=m.CHM(e).$implicit,s=m.oxw(3);return m.KtG(s.save(t))})),m.qZA(),m.YNc(6,Ga,6,2,"div",46),m.YNc(7,Pa,2,4,"ng-template",null,47,m.W1O),m.TgZ(9,"div",48)(10,"button",49),m.NdJ("click",(function(){const t=m.CHM(e).$implicit,s=m.oxw().$implicit,i=m.oxw(2);return m.KtG(i.deleteChecklistItem(t,s))})),m._UZ(11,"system-button-icon",31),m.qZA()()(),m.YNc(12,Ha,2,0,"div",50),m.qZA()}if(2&e){const e=t.$implicit,s=m.MAs(8),i=m.oxw().$implicit,n=m.oxw(2);m.ekj("slds-hide",!i.showCompleted&&e.isCompleted)("slds-theme--warning",n.currentEditingItem!=e&&e.isChanged),m.xp6(2),m.Q6J("cdkDragData",e),m.xp6(2),m.ekj("spice-hover-child",e!=n.currentEditingItem),m.xp6(1),m.Q6J("ngModel",e.isCompleted),m.xp6(1),m.Q6J("ngIf",e==n.currentEditingItem)("ngIfElse",s),m.xp6(4),m.ekj("spice-hover-child",e!=n.currentEditingItem),m.xp6(2),m.Q6J("ngIf",n.currentEditingItem!=e&&e.isChanged)}}function Va(e,t){if(1&e){const e=m.EpF();m.TgZ(0,"div",58)(1,"div",59,60)(3,"input",61,62),m.NdJ("keyup.enter",(function(){m.CHM(e);const t=m.MAs(4),s=m.oxw().$implicit,i=m.oxw(2);return m.KtG(i.addChecklistItem(s,t))}))("blur",(function(t){m.CHM(e);const s=m.MAs(2),i=m.MAs(4),n=m.oxw().$implicit,l=m.oxw(2);return m.KtG(l.onChecklistBlur(n,t,s,i))})),m.qZA(),m.TgZ(5,"button",63),m.NdJ("click",(function(){m.CHM(e);const t=m.MAs(4),s=m.oxw().$implicit,i=m.oxw(2);return m.KtG(i.addChecklistItem(s,t))})),m._UZ(6,"system-button-icon",64),m.qZA(),m.TgZ(7,"button",65),m.NdJ("click",(function(){m.CHM(e);const t=m.oxw().$implicit,s=m.oxw(2);return m.KtG(s.setShowAddButton(t,!0))})),m._UZ(8,"system-button-icon",66),m.qZA()()()}if(2&e){const e=m.MAs(4);m.xp6(5),m.Q6J("disabled",!e.value)}}function $a(e,t){if(1&e){const e=m.EpF();m.TgZ(0,"div",23),m.NdJ("click",(function(){const t=m.CHM(e).$implicit,s=m.oxw(2);return m.KtG(s.setActiveChecklist(t))})),m.TgZ(1,"div",24)(2,"div",25),m._UZ(3,"system-utility-icon",26),m.qZA(),m.YNc(4,Ra,3,2,"div",27),m.YNc(5,ja,1,1,"input",28),m.YNc(6,Ba,2,2,"button",29),m.TgZ(7,"button",30),m.NdJ("click",(function(){const t=m.CHM(e).$implicit,s=m.oxw(2);return m.KtG(s.deleteChecklist(t))})),m._UZ(8,"system-button-icon",31),m.qZA(),m.TgZ(9,"button",32),m.NdJ("click",(function(){const t=m.CHM(e).$implicit,s=m.oxw(2);return m.KtG(s.toggleShowCompleted(t))})),m._UZ(10,"system-button-icon",33)(11,"system-label",34),m.qZA()(),m.TgZ(12,"div",35),m.NdJ("cdkDropListDropped",(function(t){m.CHM(e);const s=m.oxw(2);return m.KtG(s.onDrop(t))})),m.YNc(13,za,13,13,"div",36),m.qZA(),m.YNc(14,Va,9,1,"div",37),m.qZA()}if(2&e){const e=t.$implicit,s=m.oxw(2);m.Q6J("cdkDragData",e),m.xp6(3),m.ekj("spice-hover-child",e!=s.activeChecklist),m.xp6(1),m.Q6J("ngIf",s.currentEditingChecklist!=e),m.xp6(1),m.Q6J("ngIf",s.currentEditingChecklist==e),m.xp6(1),m.Q6J("ngIf",e.showAddButton),m.xp6(1),m.ekj("spice-hover-child",e!=s.activeChecklist),m.xp6(2),m.ekj("spice-hover-child",e!=s.activeChecklist),m.Q6J("system-title",e.showCompleted?"LBL_HIDE_COMPLETED":"LBL_SHOW_COMPLETED"),m.xp6(2),m.Q6J("label",e.showCompleted?"LBL_HIDE_COMPLETED":"LBL_SHOW_COMPLETED"),m.xp6(1),m.Q6J("cdkDropListData",e.items),m.xp6(1),m.Q6J("ngForOf",e.items),m.xp6(1),m.Q6J("ngIf",!e.showAddButton)}}function Ka(e,t){if(1&e){const e=m.EpF();m.TgZ(0,"div",20)(1,"div",21),m.NdJ("cdkDropListDropped",(function(t){m.CHM(e);const s=m.oxw();return m.KtG(s.onDrop(t))})),m.YNc(2,$a,15,15,"div",22),m.qZA()()}if(2&e){const e=m.oxw();m.Q6J("system-overlay-loading-spinner",e.model.isLoading||e.isSaving),m.xp6(1),m.Q6J("cdkDropListData",e.checklists),m.xp6(1),m.Q6J("ngForOf",e.checklists)}}function Xa(e,t){if(1&e&&(m.TgZ(0,"div",67)(1,"system-illustration-no-data"),m._UZ(2,"system-label",68),m.qZA()()),2&e){const e=m.oxw();m.Q6J("system-overlay-loading-spinner",e.model.isLoading)}}let Wa=(()=>{class ObjectChecklists{model;language;metadata;currentEditingChecklist;isAddingChecklist=!1;isSaving=!1;checklists=[];currentEditingItem;activeChecklist;subscriptions=new B.w0;fieldName="checklists";panelExpanded=!0;constructor(e,t,s){this.model=e,this.language=t,this.metadata=s}ngOnInit(){this.setFieldName(),this.loadData()}ngOnDestroy(){this.subscriptions.unsubscribe()}addChecklist(e){if(this.checklists||(this.checklists=[]),!e)return;const t={id:this.model.generateGuid(),name:e,showCompleted:!0,items:[]};this.checklists=[t,...this.checklists],this.isAddingChecklist=!1,this.setActiveChecklist(t),this.save(t)}addChecklistItem(e,t){if(!t.value)return;const s={id:this.model.generateGuid(),isCompleted:!1,text:t.value,isChanged:!0};e.items.push(s),t.value="",this.save(s)}deleteChecklist(e){this.checklists=this.checklists.filter((t=>t!=e)),this.save(e)}deleteChecklistItem(e,t){t.items=t.items.filter((t=>t!=e)),e.isChanged=!0,this.save(e)}setCurrentEditingItem(e){e.isChanged||(e.textBackup=e.text),this.currentEditingItem=e}onItemBlur(e,t){t.contains(e.relatedTarget)||(this.currentEditingItem=void 0)}onChecklistBlur(e,t,s,i){s.contains(t.relatedTarget)||!s.contains(t.relatedTarget)&&i.value||(e.showAddButton=!0)}setShowAddChecklist(e){this.isAddingChecklist=e}setCurrentEditingChecklist(e){this.currentEditingChecklist=e}save(e){if("isChanged"in e&&!1===e?.isChanged||"items"in e&&!e.name)return;this.isSaving=!0,"items"in e&&this.setCurrentEditingChecklist(void 0);const t=this.checklists.map((t=>{const s={...t};return s.items=s.items.map((t=>{const s={...t};return e!=t&&s.isChanged&&(s.text=t.textBackup),delete s.isChanged,delete s.textBackup,s})),s}));"isChanged"in e&&delete e.isChanged,"textBackup"in e&&delete e.textBackup,this.model.backend.save(this.model.module,this.model.id,{[this.fieldName]:t}).subscribe((()=>this.isSaving=!1)),this.currentEditingItem=void 0}cancelItemChanges(e,t){t.stopPropagation(),e.text=e.textBackup,e.isChanged=!1,this.currentEditingItem=void 0}setActiveChecklist(e){e!=this.activeChecklist&&(this.activeChecklist&&(this.activeChecklist.showAddButton=!0),e&&this.setShowAddButton(e,!1),this.activeChecklist=e)}setShowAddButton(e,t){e.showAddButton=t}setItemTextValue(e,t){t.isChanged=e!=t.text,t.text=e}setChecklistName(e,t){t.name=e}toggleShowCompleted(e){e.showCompleted=!e.showCompleted,this.currentEditingItem=void 0,this.save(e)}setFieldName(){let e=this.metadata.getComponentConfig("ObjectChecklists",this.model.module)?.fieldName;e&&(this.fieldName=e)}loadData(){this.model.backend.get(this.model.module,this.model.id).subscribe((e=>{Array.isArray(e?.[this.fieldName])&&(this.checklists=e[this.fieldName])}))}onDrop(e){e.previousContainer===e.container?(0,n.bA)(e.container.data,e.container.data.indexOf(e.item.data),e.currentIndex):(0,n.EA)(e.previousContainer.data,e.container.data,e.previousContainer.data.indexOf(e.item.data),e.currentIndex),e.item.data.isChanged=!0,this.save(e.item.data)}toggleExpansion(){this.panelExpanded=!this.panelExpanded}static ɵfac=function(e){return new(e||ObjectChecklists)(m.Y36(h.o),m.Y36(g.d),m.Y36(b.Pu))};static ɵcmp=m.Xpm({type:ObjectChecklists,selectors:[["object-checklists"]],decls:14,vars:10,consts:[[1,"slds-section"],[1,"slds-section__title","slds-m-bottom--small"],["aria-expanded","true",1,"slds-section__title-action","slds-grid",3,"click"],["icon","switch","size","x-small","addclasses","slds-section__title-action-icon slds-button__icon slds-button__icon_left"],[1,"slds-grid","slds-grid--vertical-align-center","slds-grow"],[1,"slds-truncate"],["label","LBL_CHECKLISTS"],[1,"slds-grid","slds-grid--align-end",3,"click"],["system-title","LBL_ADD_CHECKLIST",1,"slds-button","slds-button--icon","slds-button--icon-border","slds-button","slds-align--absolute-center",2,"height","1.4rem","width","1.6rem",3,"click"],["icon","add","size","medium"],["class","slds-grid slds-grid--vertical-align-center",4,"ngIf"],["class","slds-form-element__control objectchecklistdragboundary",3,"system-overlay-loading-spinner",4,"ngIf"],["class","slds-box slds-align--absolute-center","style","min-height: 250px",3,"system-overlay-loading-spinner",4,"ngIf"],[1,"slds-grid","slds-grid--vertical-align-center"],["system-autofocus","","type","text",1,"slds-input","slds-grow","slds-truncate","slds-m-right--xx-small",2,"min-height","0","height","1.6rem",3,"keyup.enter"],["addChecklistInput",""],["system-title","LBL_CHECK",1,"slds-button","slds-button--icon","slds-button--icon-border-filled",2,"height","1.4rem","width","1.6rem",3,"disabled","click"],["icon","check"],["system-title","LBL_CANCEL",1,"slds-button","slds-button--icon","slds-button--icon-border-filled",2,"height","1.4rem","width","1.6rem",3,"click"],["icon","close","size","medium"],[1,"slds-form-element__control","objectchecklistdragboundary",3,"system-overlay-loading-spinner"],["cdkDropList","","cdkDropListLockAxis","y","cdkDropListGroup","",3,"cdkDropListData","cdkDropListDropped"],["cdkDrag","","cdkDragBoundary",".objectchecklistdragboundary","class","slds-box slds-p-around--none slds-m-bottom--small slds-drag--preview",3,"cdkDragData","click",4,"ngFor","ngForOf"],["cdkDrag","","cdkDragBoundary",".objectchecklistdragboundary",1,"slds-box","slds-p-around--none","slds-m-bottom--small","slds-drag--preview",3,"cdkDragData","click"],[1,"slds-grid","slds-grid--vertical-align-center","slds-m-bottom--large","slds-border--bottom","slds-p-around--small","slds-theme--shade","spice-hover-display-children",2,"min-height","58px"],[2,"min-width","32px"],["cdkDragHandle","","icon","drag_and_drop","size","x-small",1,"slds-p-horizontal--x-small",2,"cursor","move"],["class","slds-grow slds-truncate",4,"ngIf"],["system-autofocus","","type","text","class","slds-input slds-m-right--xx-small",3,"ngModel","click","ngModelChange","keyup.enter","blur",4,"ngIf"],["system-title","LBL_ADD_ITEM","class","slds-button slds-button--icon slds-button--icon-border-filled slds-button slds-align--absolute-center",3,"spice-hover-child","click",4,"ngIf"],["system-title","LBL_DELETE",1,"slds-button","slds-button--icon","slds-button--icon-border-filled",3,"click"],["icon","delete","size","medium"],[1,"slds-button","slds-button--neutral",3,"system-title","click"],["icon","toggle","size","medium","addclasses","slds-button__icon_left"],[1,"slds-truncate",3,"label"],["cdkDropList","","cdkDropListLockAxis","y",2,"min-height","20px",3,"cdkDropListData","cdkDropListDropped"],["class","slds-p-vertical--xx-small spice-hover-display-children",3,"slds-hide","slds-theme--warning",4,"ngFor","ngForOf"],["class","slds-box slds-m-top--large slds-m-around--small",4,"ngIf"],[1,"slds-grow","slds-truncate"],[2,"min-width","20px",3,"system-title","click"],["system-autofocus","","type","text",1,"slds-input","slds-m-right--xx-small",3,"ngModel","click","ngModelChange","keyup.enter","blur"],["system-title","LBL_ADD_ITEM",1,"slds-button","slds-button--icon","slds-button--icon-border-filled","slds-button","slds-align--absolute-center",3,"click"],[1,"slds-p-vertical--xx-small","spice-hover-display-children"],["itemContainer",""],["cdkDrag","","cdkDragBoundary",".objectchecklistdragboundary",1,"slds-grid","slds-grid--vertical-align-center","slds-drag--preview","slds-p-right--x-small",3,"cdkDragData","click"],[3,"ngModel","ngModelChange"],["class","slds-grid slds-grow slds-p-right--xx-small",4,"ngIf","ngIfElse"],["itemTextContainer",""],[2,"width","32px","height","32px"],[1,"slds-button","slds-button--icon","slds-button--icon-border-filled",3,"click"],["class","slds-p-horizontal--small slds-p-bottom--xx-small",3,"click",4,"ngIf"],[1,"slds-grid","slds-grow","slds-p-right--xx-small"],["type","text","system-autofocus","",1,"slds-input","slds-m-right--xx-small",3,"ngModel","ngModelChange","keyup.enter","blur"],["system-title","LBL_CHECK",1,"slds-button","slds-button--icon","slds-button--icon-border-filled",3,"disabled","click"],["system-title","LBL_CANCEL",1,"slds-button","slds-button--icon","slds-button--icon-border-filled",3,"click"],[1,"slds-grow","slds-p-right--xx-small","slds-truncate",3,"system-title"],[1,"slds-p-horizontal--small","slds-p-bottom--xx-small",3,"click"],["label","MSG_HAS_UNSAVED"],[1,"slds-box","slds-m-top--large","slds-m-around--small"],[1,"slds-grid"],["addItemContainer",""],["system-autofocus","","type","text",1,"slds-input","slds-m-right--x-small",3,"keyup.enter","blur"],["addItemInput",""],["system-title","LBL_SAVE",1,"slds-button","slds-button--icon","slds-button--icon-border-filled","slds-button","slds-align--absolute-center",3,"disabled","click"],["icon","check","size","medium"],["system-title","LBL_CANCEL",1,"slds-button","slds-button--icon","slds-button--icon-border-filled","slds-button","slds-align--absolute-center",3,"click"],["icon","clear","size","medium"],[1,"slds-box","slds-align--absolute-center",2,"min-height","250px",3,"system-overlay-loading-spinner"],["label","LBL_NO_CHECKLISTS"]],template:function(e,t){1&e&&(m.TgZ(0,"div",0)(1,"div",1)(2,"div",2),m.NdJ("click",(function(){return t.toggleExpansion()})),m._UZ(3,"system-utility-icon",3),m.TgZ(4,"div",4)(5,"span",5),m._UZ(6,"system-label",6),m.qZA()(),m.TgZ(7,"div",7),m.NdJ("click",(function(e){return e.stopPropagation()})),m.TgZ(8,"button",8),m.NdJ("click",(function(){return t.setShowAddChecklist(!0)})),m._UZ(9,"system-button-icon",9),m.qZA(),m.YNc(10,Qa,7,1,"div",10),m.qZA()()(),m.TgZ(11,"div"),m.YNc(12,Ka,3,3,"div",11),m.YNc(13,Xa,3,1,"div",12),m.qZA()()),2&e&&(m.ekj("slds-is-open",t.panelExpanded),m.xp6(8),m.ekj("slds-hide",t.isAddingChecklist),m.xp6(2),m.Q6J("ngIf",t.isAddingChecklist),m.xp6(1),m.Udp("display",t.panelExpanded?"block":"none"),m.Q6J("@tabAnimation",t.panelExpanded),m.xp6(1),m.Q6J("ngIf",t.checklists.length>0),m.xp6(1),m.Q6J("ngIf",0==t.checklists.length))},dependencies:[i.sg,i.O5,n.Wj,n.Fd,n.Zt,n.Bh,l.Fj,l.JJ,l.On,w.J,ri.U,dl.t,I._,S.r,Ua.m,on._,C.S],encapsulation:2,data:{animation:[(0,f.X$)("tabAnimation",[(0,f.SB)("true",(0,f.oB)({height:"*",opacity:1})),(0,f.SB)("false",(0,f.oB)({height:"0px",opacity:0})),(0,f.eR)("true => false",[(0,f.oB)({overflow:"hidden"}),(0,f.jt)(".5s")]),(0,f.eR)("false => true",[(0,f.jt)(".5s"),(0,f.oB)({overflow:"inherit"})])])]}})}return ObjectChecklists})(),ed=(()=>{class timeline{modelutilities;backend;metadata;broadcast;model;parent;smartView=!1;smartFontSize=!1;records=[];checking=!1;newRecords;loading=!1;loadingMore=!1;startDate=null;timeRangeStart=new moment;record;timelineModules=[];onlyAudits=!1;filters={searchterm:"",objectfilters:["auditLog","Modules"],own:""};searchTerm="";auditLogEnabled=!1;recordModule;recordId;recordData;initial=!0;totalModuleRecords=0;loadedAuditRecords=0;totalAuditRecords=0;loadedModuleRecords=0;moduleSearch=!0;auditSearch=!0;constructor(e,t,s,i,n){this.modelutilities=e,this.backend=t,this.metadata=s,this.broadcast=i,this.model=n,this.broadcast.message$.subscribe((e=>this.handleMessage(e)))}get rangeStart(){return console.log(this.timeRangeStart.format()),this.timeRangeStart.format()}get getModuleSearch(){return this.totalModuleRecords!==this.loadedModuleRecords}get getAuditSearch(){return this.totalAuditRecords!==this.loadedAuditRecords}get totalRecords(){return this.totalAuditRecords+this.totalModuleRecords}reload(e=!1,t=""){this.initial=!0,this.startDate=this.rangeStart,this.loadedModuleRecords=0,this.loadedAuditRecords=0,this.totalAuditRecords=0,this.totalModuleRecords=0,this.moduleSearch=!0,this.auditSearch=!0,e||(this.records=[]),this.getTimelineData(e,t)}getTimelineData(e=!1,t=""){e||(this.loading=!0);let s={endDate:t,startDate:this.startDate,searchTerm:this.filters.searchterm,moduleSearch:this.moduleSearch,auditSearch:this.auditSearch,own:this.filters.own,objects:JSON.stringify(this.filters.objectfilters),timeRangeStart:this.rangeStart};console.log(s),this.backend.postRequest("module/Timeline/"+this.parent.module+"/"+this.parent.id,{},s).subscribe((t=>{console.log(t);for(let e of t.records)e.hasOwnProperty("module")&&(e.data=this.modelutilities.backendModel2spice(e.module,e.data));this.getBody(t,this.initial),this.addRecords(t.records,e),this.loading=!1}))}loadMore(){this.loadingMore=!0;let e={endDate:"",startDate:this.startDate,searchTerm:this.filters.searchterm,moduleSearch:this.getModuleSearch,auditSearch:this.getAuditSearch,own:this.filters.own,objects:JSON.stringify(this.filters.objectfilters),timeRangeStart:this.rangeStart};this.backend.postRequest("module/Timeline/"+this.parent.module+"/"+this.parent.id,{},e).subscribe((e=>{console.log(e);for(let t of e.records)t.data=this.modelutilities.backendModel2spice(t.module,t.data);this.getBody(e,this.initial),this.addRecords(e.records),this.loadingMore=!1}))}setRecord(e){if(!e.hasOwnProperty("data"))return this.recordModule=this.parent.module,this.recordId=this.parent.id,void(this.recordData=e);this.recordModule=e.hasOwnProperty("module")?e.module:"Audit",this.recordId=e.id,this.recordData=e.hasOwnProperty("module")?e.data:e}clearRecord(){this.recordModule="",this.recordId="",this.recordData=""}canLoadMore(){return!(this.loading||this.loadingMore||this.totalAuditRecords===this.loadedAuditRecords&&this.totalModuleRecords===this.loadedModuleRecords||!this.moduleSearch&&!this.auditSearch)}handleMessage(e){let t=e.messagetype.split(".");if("model"===t[0])switch(t[1]){case"merge":this.reload(!0,this.startDate),console.log(1);break;case"save":this.reload(!0,this.startDate),console.log(2);break;case"delete":console.log(3);let t=!1;this.timelineModules.indexOf(e.messagedata.module)>=0&&this.records.some(((s,i)=>{if(s.hasOwnProperty("date")&&(s.module,e.messagedata.module,s.id===e.messagedata.id))return this.records.splice(i,1),this.reload(!0,this.startDate),t=!0,!0}))}}addRecords(e,t=!1){if(this.totalAuditRecords===this.loadedAuditRecords&&this.totalModuleRecords===this.loadedModuleRecords&&""===this.searchTerm&&""===this.filters.own&&this.filters.objectfilters.indexOf("Modules")>=0&&this.timeRangeStart.isAfter(this.parent.getField("date_entered"))){let t=this.parent.data;0!==e.length&&t.date_entered.format("YYYY-MM")!==e.slice(-1)[0].date.substring(0,7)&&(t.divider=t.date_entered.format("YYYY-MM")),e.push(t)}this.records=t?e:this.records.concat(e)}getBody(e,t){t&&(this.totalModuleRecords=e.counts.totalModules,this.totalAuditRecords=e.counts.totalAudits,this.timelineModules=e.timelineModules,this.auditLogEnabled=!1,e.timelineModules.indexOf("auditLog")>=0&&(this.timelineModules.splice(e.timelineModules.indexOf("auditLog"),1),this.auditLogEnabled=!0),this.initial=!1),this.startDate=e.endDate,this.loadedModuleRecords+=e.counts.modulesTook,this.loadedAuditRecords+=e.counts.auditsTook,this.auditSearch=e.auditSearch,this.moduleSearch=e.moduleSearch}static ɵfac=function(e){return new(e||timeline)(m.LFG(Xl.A),m.LFG(W.y),m.LFG(b.Pu),m.LFG(ye.f),m.LFG(h.o))};static ɵprov=m.Yz7({token:timeline,factory:timeline.ɵfac})}return timeline})();function td(e,t){if(1&e&&(m.TgZ(0,"div",18)(1,"p"),m._uU(2),m.qZA()()),2&e){const e=m.oxw();m.xp6(2),m.Oqu(e.date)}}function sd(e,t){1&e&&m._UZ(0,"div",19)}function id(e,t){if(1&e){const e=m.EpF();m.TgZ(0,"div",20)(1,"button",21),m.NdJ("click",(function(){m.CHM(e);const t=m.oxw();return m.KtG(t.openModal())})),m._UZ(2,"system-button-icon",22),m.qZA()()}}function nd(e,t){if(1&e){const e=m.EpF();m.TgZ(0,"button",21),m.NdJ("click",(function(){m.CHM(e);const t=m.oxw();return m.KtG(t.openModal())})),m._UZ(1,"system-button-icon",22),m.qZA()}}function ld(e,t){1&e&&m._UZ(0,"div",23)}function od(e,t){if(1&e&&(m.TgZ(0,"div",18)(1,"p"),m._uU(2),m.qZA()()),2&e){const e=m.oxw();m.xp6(2),m.Oqu(e.date)}}const ad=function(e){return{"slds-grid--align-spread":e}},dd=function(e,t){return{"slds-text-heading--medium":e,"slds-text-heading--small":t}};let rd=(()=>{class ObjectTimelineItemAudit{timeline;model;language;metadata;userpreferences;modal;ViewContainerRef;record;side;nubbin;auditCount;itemside;date="";constructor(e,t,s,i,n,l,o){this.timeline=e,this.model=t,this.language=s,this.metadata=i,this.userpreferences=n,this.modal=l,this.ViewContainerRef=o}get fieldCount(){return this.auditCount>1?this.auditCount+" changes":this.auditCount+" change"}get user_name(){let e=this.record.user_name;return e.charAt(0).toUpperCase()+e.substring(1)}get description(){let e="";for(let t of this.record.data)e+=this.record.data.length>1?this.language.getFieldDisplayName(this.model.module,t.field_name)+", ":this.language.getFieldDisplayName(this.model.module,t.field_name);return e}get module(){return this.model.module.slice(0,-1)}ngOnInit(){this.side?this.itemside={"slds-m-right--xx-small":!0,"slds-grid--align-end":!0}:this.itemside={"slds-m-left--xx-small":!0},this.calculateDate(),this.auditCount=this.record.data.length}openModal(){this.modal.openModal("ObjectTimelineAuditlogModal",!0,this.ViewContainerRef.injector).subscribe((e=>{e.instance.auditLog=this.record}))}calculateDate(){const e=moment.utc(this.record.date),t=moment.utc(e.format("YYYY M D")).isSame((new moment).format("YYYY M D")),s=e.isSame(new moment,"year");this.date=t?e.format(this.userpreferences.getTimeFormat()):s?e.format("MMM D"):e.format(this.userpreferences.getDateFormat())}static ɵfac=function(e){return new(e||ObjectTimelineItemAudit)(m.Y36(ed),m.Y36(h.o),m.Y36(g.d),m.Y36(b.Pu),m.Y36(L.z),m.Y36(V.o),m.Y36(m.s_b))};static ɵcmp=m.Xpm({type:ObjectTimelineItemAudit,selectors:[["object-timeline-item-audit"]],inputs:{record:"record",side:"side"},decls:23,vars:19,consts:[[1,"slds-grid",3,"ngClass"],["style","width: 70px","class","slds-align--absolute-center slds-m-horizontal--none",4,"ngIf"],["class","objecttimeline-item-nubbin-right slds-align--absolute-center",4,"ngIf"],[1,"objecttimeline-item","slds-m-vertical--medium","slds-height_full",3,"click"],[1,"slds-popover__body","slds-grid",2,"height","90px",3,"ngClass"],[1,"slds-grid","slds-grid--vertical","slds-grid--vertical-align-center",2,"width","32px"],[1,"slds-m-horizontal--xx-small",2,"width","32px"],["icon","record_update"],["class","slds-height_full slds-align--absolute-center",4,"ngIf"],[1,"slds-grid","slds-grid--align-spread",2,"width","calc(100% - 32px)"],[1,"slds-grid--vertical","slds-size--1-of-1","slds-p-left--small"],[1,"slds-grid","slds-grid--align-spread","slds-size--1-of-1",2,"min-height","32px"],[1,"slds-popover__header","slds-p-around--none",2,"border","0"],[3,"ngClass"],["system-model-popover","",3,"module","id"],["class","slds-button slds-button--icon-border-filled slds-p-horizontal--medium slds-button--icon slds-button--icon-small",3,"click",4,"ngIf"],[1,"slds-truncate","slds-p-top--xxx-small",2,"width","calc(100% - 12px)"],["class","objecttimeline-item-nubbin-left slds-align--absolute-center",4,"ngIf"],[1,"slds-align--absolute-center","slds-m-horizontal--none",2,"width","70px"],[1,"objecttimeline-item-nubbin-right","slds-align--absolute-center"],[1,"slds-height_full","slds-align--absolute-center"],[1,"slds-button","slds-button--icon-border-filled","slds-p-horizontal--medium","slds-button--icon","slds-button--icon-small",3,"click"],["icon","search"],[1,"objecttimeline-item-nubbin-left","slds-align--absolute-center"]],template:function(e,t){1&e&&(m.TgZ(0,"div",0),m.YNc(1,td,3,1,"div",1),m.YNc(2,sd,1,0,"div",2),m.TgZ(3,"section",3),m.NdJ("click",(function(){return t.timeline.setRecord(t.record)})),m.TgZ(4,"div",4)(5,"div",5)(6,"div",6),m._UZ(7,"system-icon",7),m.qZA(),m.YNc(8,id,3,0,"div",8),m.qZA(),m.TgZ(9,"div",9)(10,"div",10)(11,"div",11)(12,"header",12)(13,"h2",13)(14,"span",14),m._uU(15),m.qZA(),m._uU(16),m.qZA()(),m.YNc(17,nd,2,0,"button",15),m.qZA(),m.TgZ(18,"div",16)(19,"span"),m._uU(20),m.qZA()()()()()(),m.YNc(21,ld,1,0,"div",17),m.YNc(22,od,3,1,"div",1),m.qZA()),2&e&&(m.Q6J("ngClass",t.itemside),m.xp6(1),m.Q6J("ngIf",!t.side),m.xp6(1),m.Q6J("ngIf",!t.side),m.xp6(2),m.Q6J("ngClass",m.VKq(14,ad,t.side)),m.xp6(4),m.Q6J("ngIf",t.timeline.smartFontSize),m.xp6(5),m.Q6J("ngClass",m.WLB(16,dd,!t.timeline.smartFontSize,t.timeline.smartFontSize)),m.xp6(1),m.Q6J("module","Users")("id",t.record.created_by),m.xp6(1),m.Oqu(t.user_name),m.xp6(1),m.hij(" - ",t.fieldCount,""),m.xp6(1),m.Q6J("ngIf",!t.timeline.smartFontSize),m.xp6(3),m.Oqu(t.description),m.xp6(1),m.Q6J("ngIf",t.side),m.xp6(1),m.Q6J("ngIf",t.side))},dependencies:[i.mk,i.O5,w.J,Z.f,kl.g],styles:[".objecttimeline-item[_ngcontent-%COMP%]{background-color:var(--color-white);border:1px solid var(--color-grey-5);border-radius:.25rem;box-shadow:0 2px 3px 0 rgb(0 0 16%);width:calc(100% - 86px)}",".objecttimeline-item-nubbin-right[_ngcontent-%COMP%]{background-color:var(--color-white);border-bottom:1px solid var(--color-grey-5);border-left:1px solid var(--color-grey-5);height:20px;margin-right:-10px;transform:rotate(45deg);width:20px}",".objecttimeline-item-nubbin-left[_ngcontent-%COMP%]{background-color:var(--color-white);border-bottom:1px solid var(--color-grey-5);border-left:1px solid var(--color-grey-5);height:20px;margin-left:-10px;transform:rotate(-135deg);width:20px}"]})}return ObjectTimelineItemAudit})();function cd(e,t){if(1&e&&(m.TgZ(0,"div",14)(1,"span"),m._uU(2),m.qZA()()),2&e){const e=m.oxw();m.xp6(2),m.Oqu(e.recordDate)}}function ud(e,t){1&e&&m._UZ(0,"div",15)}function md(e,t){1&e&&m._UZ(0,"div",16)}function gd(e,t){if(1&e&&(m.TgZ(0,"div",14)(1,"span"),m._uU(2),m.qZA()()),2&e){const e=m.oxw();m.xp6(2),m.Oqu(e.recordDate)}}const hd=function(e){return{"slds-grid--align-spread":e}},pd=function(e){return{"slds-m-left--small":e}},fd=function(e,t){return{"slds-text-heading--medium":e,"slds-text-heading--small":t}};let bd=(()=>{class ObjectTimelineItemCreated{timeline;model;language;metadata;userpreferences;session;record;side;nubbin;itemside;date="";constructor(e,t,s,i,n,l){this.timeline=e,this.model=t,this.language=s,this.metadata=i,this.userpreferences=n,this.session=l}get user_name(){let e=this.record.user_name;return e.charAt(0).toUpperCase()+e.substring(1)}get module(){return this.model.module.slice(0,-1)}get recordDate(){const e=new moment.utc(this.record.date_entered).tz(this.session.getSessionData("timezone")||moment.tz.guess(!0)),t=e.format("YYYYMMDD")==(new moment).format("YYYYMMDD"),s=e.format("YYYY")==(new moment).format("YYYY");return t?e.format(this.userpreferences.getTimeFormat()):s?e.format("MMM D"):e.format(this.userpreferences.getDateFormat())}ngOnInit(){this.side?this.itemside={"slds-m-right--xx-small":!0,"slds-grid--align-end":!0}:this.itemside={"slds-m-left--xx-small":!0}}static ɵfac=function(e){return new(e||ObjectTimelineItemCreated)(m.Y36(ed),m.Y36(h.o),m.Y36(g.d),m.Y36(b.Pu),m.Y36(L.z),m.Y36(Qt.n))};static ɵcmp=m.Xpm({type:ObjectTimelineItemCreated,selectors:[["object-timeline-item-created"]],inputs:{record:"record",side:"side"},decls:16,vars:17,consts:[[1,"slds-grid","slds-grid",3,"ngClass"],["style","width: 70px","class","slds-align--absolute-center slds-m-horizontal--none",4,"ngIf"],["class","objecttimeline-item-nubbin-right slds-align--absolute-center",4,"ngIf"],[1,"objecttimeline-item","slds-m-vertical--medium","slds-height_full",3,"click"],[1,"slds-popover__body","slds-grid",2,"height","90px",3,"ngClass"],[1,"slds-grid","slds-grid--vertical","slds-grid--vertical-align-center",2,"width","32px"],[1,"slds-m-horizontal--xx-small",2,"width","32px"],[3,"module"],[1,"slds-grid","slds-grid--align-spread","slds-size--7-of-8",2,"width","calc(100% - 32px)"],[1,"slds-m-horizontal--small","slds-media",3,"ngClass"],[1,"slds-media__body",2,"height","45%"],[1,"slds-p-left--none","slds-popover__header","slds-p-top--none",2,"border","0"],[3,"ngClass"],["class","objecttimeline-item-nubbin-left slds-align--absolute-center",4,"ngIf"],[1,"slds-align--absolute-center","slds-m-horizontal--none",2,"width","70px"],[1,"objecttimeline-item-nubbin-right","slds-align--absolute-center"],[1,"objecttimeline-item-nubbin-left","slds-align--absolute-center"]],template:function(e,t){1&e&&(m.TgZ(0,"div",0),m.YNc(1,cd,3,1,"div",1),m.YNc(2,ud,1,0,"div",2),m.TgZ(3,"section",3),m.NdJ("click",(function(){return t.timeline.setRecord(t.record)})),m.TgZ(4,"div",4)(5,"div",5)(6,"div",6),m._UZ(7,"system-icon",7),m.qZA()(),m.TgZ(8,"div",8)(9,"div",9)(10,"div",10)(11,"header",11)(12,"h2",12),m._uU(13),m.qZA()()()()()()(),m.YNc(14,md,1,0,"div",13),m.YNc(15,gd,3,1,"div",1),m.qZA()),2&e&&(m.Q6J("ngClass",t.itemside),m.xp6(1),m.Q6J("ngIf",!t.side),m.xp6(1),m.Q6J("ngIf",!t.side),m.xp6(2),m.Q6J("ngClass",m.VKq(10,hd,t.side)),m.xp6(3),m.Q6J("module",t.model.module),m.xp6(2),m.Q6J("ngClass",m.VKq(12,pd,!t.side)),m.xp6(3),m.Q6J("ngClass",m.WLB(14,fd,!t.timeline.smartFontSize,t.timeline.smartFontSize)),m.xp6(1),m.hij("This ",t.module," was created"),m.xp6(1),m.Q6J("ngIf",t.side),m.xp6(1),m.Q6J("ngIf",t.side))},dependencies:[i.mk,i.O5,Z.f],styles:[".objecttimeline-item[_ngcontent-%COMP%]{background-color:var(--color-white);border:1px solid var(--color-grey-5);border-radius:.25rem;box-shadow:0 2px 3px 0 rgb(0 0 16%);width:calc(100% - 86px)}",".objecttimeline-item-nubbin-right[_ngcontent-%COMP%]{background-color:var(--color-white);border-bottom:1px solid var(--color-grey-5);border-left:1px solid var(--color-grey-5);height:20px;margin-right:-10px;transform:rotate(45deg);width:20px}",".objecttimeline-item-nubbin-left[_ngcontent-%COMP%]{background-color:var(--color-white);border-bottom:1px solid var(--color-grey-5);border-left:1px solid var(--color-grey-5);height:20px;margin-left:-10px;transform:rotate(-135deg);width:20px}"]})}return ObjectTimelineItemCreated})();function _d(e,t){if(1&e){const e=m.EpF();m.TgZ(0,"div",7)(1,"div",8),m.NdJ("click",(function(t){const s=m.CHM(e).$implicit,i=m.oxw();return m.KtG(i.setFilter(t,s))})),m.TgZ(2,"span",9),m._UZ(3,"input",38),m.TgZ(4,"label",39),m._UZ(5,"span",12),m.TgZ(6,"span",13),m._uU(7),m.qZA()()()()()}if(2&e){const e=t.$implicit,s=m.oxw();m.xp6(3),m.Q6J("id",e)("checked",s.getChecked(e)),m.xp6(1),m.uIk("for",e),m.xp6(3),m.Oqu(e)}}function vd(e,t){if(1&e){const e=m.EpF();m.TgZ(0,"div",7)(1,"div",8),m.NdJ("click",(function(t){m.CHM(e);const s=m.oxw();return m.KtG(s.setFilter(t,"auditLog"))})),m.TgZ(2,"span",9),m._UZ(3,"input",38),m.TgZ(4,"label",39),m._UZ(5,"span",12),m.TgZ(6,"span",13),m._UZ(7,"system-label",40),m.qZA()()()()()}if(2&e){const e=m.oxw();m.xp6(3),m.Q6J("id","auditLog")("checked",e.getChecked("auditLog")),m.xp6(1),m.uIk("for","auditLog")}}const yd=function(e){return{"slds-is-open":e}};let xd=(()=>{class ObjectTimelineFilter{renderer;elementRef;language;metadata;timeline;isOpen=!1;clickListener;moduleTypes=[];objectfilters=[];ownerfilter;onlyAuditObjects=!1;constructor(e,t,s,i,n){this.renderer=e,this.elementRef=t,this.language=s,this.metadata=i,this.timeline=n,this.setFromService()}get filterColorClass(){return this.timeline.filters.objectfilters.indexOf("Modules")>=0&&this.timeline.filters.objectfilters.indexOf("auditLog")>=0&&!this.timeline.filters.own?"slds-icon-text-default":"slds-icon-text-error"}onClick(e){this.elementRef.nativeElement.contains(e.target)||(this.isOpen=!1,this.clickListener())}setFromService(){this.objectfilters=JSON.parse(JSON.stringify(this.timeline.filters.objectfilters)),this.ownerfilter=this.timeline.filters.own}setToService(){this.timeline.filters.objectfilters=JSON.parse(JSON.stringify(this.objectfilters)),this.timeline.filters.own=this.ownerfilter,this.timeline.onlyAudits=this.onlyAuditObjects,this.timeline.reload()}toggleOpen(e){e.stopPropagation(),this.isOpen=!this.isOpen,this.isOpen?this.clickListener=this.renderer.listen("document","click",(e=>this.onClick(e))):this.clickListener&&this.clickListener(),this.isOpen&&(this.moduleTypes=this.timeline.timelineModules)}setFilter(e,t){if(e.preventDefault(),"Modules"==t){let e=this.objectfilters.indexOf(t);if(e>=0){if(this.objectfilters.length<=1)return;this.objectfilters.splice(e,1)}else this.objectfilters=this.objectfilters.indexOf("auditLog")>=0?["auditLog","Modules"]:["Modules"]}else if("auditLog"==t){let e=this.objectfilters.indexOf(t);if(e>=0){if(this.objectfilters.length<=1)return;this.objectfilters.splice(e,1)}else this.objectfilters.push(t)}else{this.objectfilters.indexOf("Modules")>=0&&this.objectfilters.splice(this.objectfilters.indexOf("Modules"),1);let e=this.objectfilters.indexOf(t);if(e>=0){if(this.objectfilters.length<=1)return;this.objectfilters.splice(e,1)}else this.objectfilters.push(t)}}getChecked(e){return"Modules"==e?1===this.objectfilters.length&&this.objectfilters.indexOf("Modules")>=0||2===this.objectfilters.length&&this.objectfilters.indexOf("Modules")>=0&&this.objectfilters.indexOf("auditLog")>=0:"auditLog"==e?this.objectfilters.indexOf("auditLog")>=0:this.objectfilters.indexOf(e)>=0}closeDialog(e){this.clickListener&&this.clickListener(),e?this.setToService():this.setFromService(),this.isOpen=!1}static ɵfac=function(e){return new(e||ObjectTimelineFilter)(m.Y36(m.Qsj),m.Y36(m.SBq),m.Y36(g.d),m.Y36(b.Pu),m.Y36(ed))};static ɵcmp=m.Xpm({type:ObjectTimelineFilter,selectors:[["object-timeline-filter"]],decls:47,vars:11,consts:[[1,"slds-dropdown-trigger","slds-dropdown-trigger_click","slds-p-horizontal--xxx-small",3,"ngClass"],["icon","filterList","size","x-small",3,"colorclass","title","click"],[1,"slds-is-absolute","slds-dropdown","slds-dropdown_right","slds-nubbin_top-right",2,"right","-10px","top","25px"],[1,"slds-grid"],[1,"slds-p-horizontal--small","slds-border--right",2,"min-width","180px"],[1,"slds-p-vertical--x-small"],["label","LBL_TYPE"],[1,"slds-form-element","slds-p-vertical--xx-small"],[1,"slds-form-element__control",3,"click"],[1,"slds-checkbox"],["type","checkbox","id","alltypes",3,"checked"],["for","alltypes",1,"slds-checkbox__label"],[1,"slds-checkbox_faux"],[1,"slds-form-element__label"],["label","LBL_ALL"],["class","slds-form-element slds-p-vertical--xx-small",4,"ngFor","ngForOf"],[1,"slds-size--1-of-1","slds-border-top"],["class","slds-form-element slds-p-vertical--xx-small",4,"ngIf"],[1,"slds-p-horizontal--small",2,"min-width","180px"],["label","LBL_FILTER"],[1,"slds-form-element"],[1,"slds-form-element__control"],[1,"slds-radio"],["type","radio","id","timelineownerall","name","filter","value","",3,"ngModel","ngModelChange"],["for","timelineownerall",1,"slds-radio__label"],[1,"slds-radio_faux"],["type","radio","id","timelineownerassignedtome","name","filter","value","assigned",3,"ngModel","ngModelChange"],["for","timelineownerassignedtome",1,"slds-radio__label"],[1,"slds-form-element__label","slds-truncate"],["label","LBL_ASSIGNEDTOME"],["type","radio","id","timelineownercreatedbyme","name","filter","value","created",3,"ngModel","ngModelChange"],["for","timelineownercreatedbyme",1,"slds-radio__label"],["label","LBL_CREATEDBYME"],[1,"slds-popover__footer"],[1,"slds-col--bump-left","slds-button","slds-button_neutral",3,"click"],["label","LBL_CANCEL"],[1,"slds-button","slds-button--brand",3,"click"],["label","LBL_APPLY"],["type","checkbox",3,"id","checked"],[1,"slds-checkbox__label"],["label","LBL_AUDIT_LOG"]],template:function(e,t){1&e&&(m.TgZ(0,"div",0)(1,"system-utility-icon",1),m.NdJ("click",(function(e){return t.toggleOpen(e)})),m.qZA(),m.TgZ(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5),m._UZ(6,"system-label",6),m.qZA(),m.TgZ(7,"div",7)(8,"div",8),m.NdJ("click",(function(e){return t.setFilter(e,"Modules")})),m.TgZ(9,"span",9),m._UZ(10,"input",10),m.TgZ(11,"label",11),m._UZ(12,"span",12),m.TgZ(13,"span",13),m._UZ(14,"system-label",14),m.qZA()()()()(),m.YNc(15,_d,8,4,"div",15),m._UZ(16,"div",16),m.YNc(17,vd,8,3,"div",17),m.qZA(),m.TgZ(18,"div",18)(19,"div",5),m._UZ(20,"system-label",19),m.qZA(),m.TgZ(21,"fieldset",20)(22,"div",21)(23,"span",22)(24,"input",23),m.NdJ("ngModelChange",(function(e){return t.ownerfilter=e})),m.qZA(),m.TgZ(25,"label",24),m._UZ(26,"span",25),m.TgZ(27,"span",13),m._UZ(28,"system-label",14),m.qZA()()(),m.TgZ(29,"span",22)(30,"input",26),m.NdJ("ngModelChange",(function(e){return t.ownerfilter=e})),m.qZA(),m.TgZ(31,"label",27),m._UZ(32,"span",25),m.TgZ(33,"span",28),m._UZ(34,"system-label",29),m.qZA()()(),m.TgZ(35,"span",22)(36,"input",30),m.NdJ("ngModelChange",(function(e){return t.ownerfilter=e})),m.qZA(),m.TgZ(37,"label",31),m._UZ(38,"span",25),m.TgZ(39,"span",28),m._UZ(40,"system-label",32),m.qZA()()()()()()(),m.TgZ(41,"footer",33)(42,"div",3)(43,"button",34),m.NdJ("click",(function(){return t.closeDialog(!1)})),m._UZ(44,"system-label",35),m.qZA(),m.TgZ(45,"button",36),m.NdJ("click",(function(){return t.closeDialog(!0)})),m._UZ(46,"system-label",37),m.qZA()()()()()),2&e&&(m.Q6J("ngClass",m.VKq(9,yd,t.isOpen)),m.xp6(1),m.Q6J("colorclass",t.filterColorClass)("title",t.language.getLabel("LBL_FILTER")),m.xp6(9),m.Q6J("checked",t.getChecked("Modules")),m.xp6(5),m.Q6J("ngForOf",t.moduleTypes),m.xp6(2),m.Q6J("ngIf",t.timeline.auditLogEnabled),m.xp6(7),m.Q6J("ngModel",t.ownerfilter),m.xp6(6),m.Q6J("ngModel",t.ownerfilter),m.xp6(6),m.Q6J("ngModel",t.ownerfilter))},dependencies:[i.mk,i.sg,i.O5,l.Fj,l._,l.JJ,l.On,I._,S.r],encapsulation:2})}return ObjectTimelineFilter})();var wd=s(64730),Zd=s(16822),Td=s(7758);function Cd(e,t){if(1&e&&(m.TgZ(0,"div",7)(1,"span"),m._uU(2),m.qZA()()),2&e){const e=m.oxw();m.xp6(2),m.Oqu(e.recordDate)}}function kd(e,t){1&e&&m._UZ(0,"div",8)}const Ad=function(e){return{"slds-grid--align-spread":e}},Ld=function(e){return{"slds-m-left--small":e}},Id=function(e,t){return{"slds-text-heading--medium":e,"slds-text-heading--small":t}},Sd=function(){return{displayLabels:!1}},Md=function(e,t){return{"slds-text-heading--small":e,"slds-text-heading--x-small":t}};function Jd(e,t){if(1&e&&(m.TgZ(0,"div",9)(1,"div",10)(2,"div",11),m._UZ(3,"system-icon",12),m.qZA()(),m.TgZ(4,"div",13)(5,"div",14)(6,"div",15),m._UZ(7,"object-record-fieldset-horizontal-list",16),m.qZA(),m.TgZ(8,"article",17),m._UZ(9,"object-record-fieldset-horizontal-list",16),m.qZA()(),m._UZ(10,"object-action-menu",18),m.qZA()()),2&e){const e=m.oxw();m.Q6J("ngClass",m.VKq(11,Ad,e.side)),m.xp6(3),m.Q6J("module",e.model.module),m.xp6(2),m.Q6J("ngClass",m.VKq(13,Ld,!e.side)),m.xp6(1),m.Q6J("ngClass",m.WLB(15,Id,!e.timeline.smartFontSize,e.timeline.smartFontSize))("system-view-provider",m.DdM(18,Sd)),m.xp6(1),m.Q6J("fieldset",e.headerFieldSet),m.xp6(1),m.Q6J("ngClass",m.WLB(19,Md,!e.timeline.smartFontSize,e.timeline.smartFontSize))("system-view-provider",m.DdM(22,Sd)),m.xp6(1),m.Q6J("fieldset",e.subHeaderFieldSet),m.xp6(1),m.Q6J("buttonsize","small")("actionset",e.actionset)}}function Od(e,t){1&e&&m._UZ(0,"div",19)}function Nd(e,t){if(1&e&&(m.TgZ(0,"div",7)(1,"span"),m._uU(2),m.qZA()()),2&e){const e=m.oxw();m.xp6(2),m.Oqu(e.recordDate)}}function Fd(e,t){if(1&e&&(m.TgZ(0,"div",20)(1,"div",21)(2,"div",10)(3,"div",11),m._UZ(4,"system-icon",12),m.qZA()(),m.TgZ(5,"div",13)(6,"div",14)(7,"div",15),m._UZ(8,"object-record-fieldset-horizontal-list",16),m.qZA(),m.TgZ(9,"article",17),m._UZ(10,"object-record-fieldset-horizontal-list",16),m.qZA()()()(),m.TgZ(11,"div",22),m._UZ(12,"object-action-menu",18),m.qZA()()),2&e){const e=m.oxw();m.xp6(4),m.Q6J("module",e.model.module),m.xp6(2),m.Q6J("ngClass",m.VKq(10,Ld,!e.side)),m.xp6(1),m.Q6J("ngClass",m.WLB(12,Id,!e.timeline.smartFontSize,e.timeline.smartFontSize))("system-view-provider",m.DdM(15,Sd)),m.xp6(1),m.Q6J("fieldset",e.headerFieldSet),m.xp6(1),m.Q6J("ngClass",m.WLB(16,Md,!e.timeline.smartFontSize,e.timeline.smartFontSize))("system-view-provider",m.DdM(19,Sd)),m.xp6(1),m.Q6J("fieldset",e.subHeaderFieldSet),m.xp6(2),m.Q6J("buttonsize","xx-small")("actionset",e.actionset)}}let qd=(()=>{class ObjectTimelineItemModule{timeline;view;modelattachments;model;language;metadata;userpreferences;session;record;side;itemside;componentconfig;date="";dateFieldSet;headerFieldSet;subHeaderFieldSet;headerDescription="Someone edited this";constructor(e,t,s,i,n,l,o,a){this.timeline=e,this.view=t,this.modelattachments=s,this.model=i,this.language=n,this.metadata=l,this.userpreferences=o,this.session=a}get data(){return this.record.data}get actionset(){return this.componentconfig.actionset}get user_name(){let e=this.record.user_name;return e.charAt(0).toUpperCase()+e.substring(1)}get module(){return this.model.module}get recordDate(){const e=new moment.utc(this.record.date).tz(this.session.getSessionData("timezone")||moment.tz.guess(!0)),t=e.format("YYYYMMDD")==(new moment).format("YYYYMMDD"),s=e.format("YYYY")==(new moment).format("YYYY");return t?e.format(this.userpreferences.getTimeFormat()):s?e.format("MMM D"):e.format(this.userpreferences.getDateFormat())}ngOnInit(){this.model.module=this.record.module,this.model.id=this.record.id,this.model.setData(this.record.data),this.modelattachments.module=this.model.module,this.modelattachments.id=this.model.id,this.side?this.itemside={"slds-m-right--xx-small":!0,"slds-grid--align-end":!0}:this.itemside={"slds-m-left--xx-small":!0},this.componentconfig=this.metadata.getComponentConfig("ObjectTimelineItemModule","Accounts"),this.headerFieldSet=this.componentconfig.headerFieldSet,this.subHeaderFieldSet=this.componentconfig.subHeaderFieldSet}static ɵfac=function(e){return new(e||ObjectTimelineItemModule)(m.Y36(ed),m.Y36(Oe.e),m.Y36(ls.H),m.Y36(h.o),m.Y36(g.d),m.Y36(b.Pu),m.Y36(L.z),m.Y36(Qt.n))};static ɵcmp=m.Xpm({type:ObjectTimelineItemModule,selectors:[["object-timeline-item-module"]],inputs:{record:"record",side:"side"},features:[m._Bn([h.o,ls.H,Oe.e])],decls:9,vars:7,consts:[[1,"slds-grid",3,"ngClass"],["style","width: 70px","class","slds-align--absolute-center slds-m-horizontal--none",4,"ngIf"],["class","objecttimeline-item-nubbin-right slds-align--absolute-center",4,"ngIf"],[1,"objecttimeline-item","slds-m-vertical--medium","slds-height_full",3,"click"],["class","slds-popover__body slds-grid","style","height: 90px",3,"ngClass",4,"ngIf","ngIfElse"],["class","objecttimeline-item-nubbin-left slds-align--absolute-center",4,"ngIf"],["smallview",""],[1,"slds-align--absolute-center","slds-m-horizontal--none",2,"width","70px"],[1,"objecttimeline-item-nubbin-right","slds-align--absolute-center"],[1,"slds-popover__body","slds-grid",2,"height","90px",3,"ngClass"],[1,"slds-grid","slds-grid--vertical","slds-grid--vertical-align-center",2,"width","32px"],[1,"slds-m-horizontal--xx-small",2,"width","32px"],[3,"module"],[1,"slds-grid","slds-grid--align-spread","slds-size--7-of-8",2,"width","calc(100% - 32px)"],[1,"slds-m-horizontal--small","slds-media","slds-grid--vertical",3,"ngClass"],[1,"slds-media__body",2,"height","45%",3,"ngClass","system-view-provider"],[3,"fieldset"],[2,"height","55%",3,"ngClass","system-view-provider"],[3,"buttonsize","actionset"],[1,"objecttimeline-item-nubbin-left","slds-align--absolute-center"],[1,"slds-popover__body","slds-grid--vertical",2,"height","90px"],[1,"slds-grid"],[1,"slds-align--absolute-center"]],template:function(e,t){if(1&e&&(m.TgZ(0,"div",0),m.YNc(1,Cd,3,1,"div",1),m.YNc(2,kd,1,0,"div",2),m.TgZ(3,"section",3),m.NdJ("click",(function(){return t.timeline.setRecord(t.record)})),m.YNc(4,Jd,11,23,"div",4),m.qZA(),m.YNc(5,Od,1,0,"div",5),m.YNc(6,Nd,3,1,"div",1),m.qZA(),m.YNc(7,Fd,13,20,"ng-template",null,6,m.W1O)),2&e){const e=m.MAs(8);m.Q6J("ngClass",t.itemside),m.xp6(1),m.Q6J("ngIf",!t.side),m.xp6(1),m.Q6J("ngIf",!t.side),m.xp6(2),m.Q6J("ngIf",!t.timeline.smartFontSize)("ngIfElse",e),m.xp6(1),m.Q6J("ngIf",t.side),m.xp6(1),m.Q6J("ngIf",t.side)}},dependencies:[i.mk,i.O5,Z.f,ln.V,it.g,an.Z],styles:[".objecttimeline-item[_ngcontent-%COMP%]{background-color:var(--color-white);border:1px solid var(--color-grey-5);border-radius:.25rem;box-shadow:0 2px 3px 0 rgb(0 0 16%);width:calc(100% - 86px)}",".objecttimeline-item-nubbin-right[_ngcontent-%COMP%]{background-color:var(--color-white);border-bottom:1px solid var(--color-grey-5);border-left:1px solid var(--color-grey-5);height:20px;margin-right:-10px;transform:rotate(45deg);width:20px}",".objecttimeline-item-nubbin-left[_ngcontent-%COMP%]{background-color:var(--color-white);border-bottom:1px solid var(--color-grey-5);border-left:1px solid var(--color-grey-5);height:20px;margin-left:-10px;transform:rotate(-135deg);width:20px}"]})}return ObjectTimelineItemModule})();function Ed(e,t){if(1&e&&(m.TgZ(0,"div",11)(1,"span",12),m._uU(2),m.qZA()()),2&e){const e=m.oxw(3);m.xp6(2),m.hij(" ",e.record.divider," ")}}function Yd(e,t){if(1&e&&m._UZ(0,"object-timeline-item-module",13),2&e){const e=m.oxw(3);m.Q6J("record",e.record)("side",!1)}}function Dd(e,t){if(1&e&&m._UZ(0,"object-timeline-item-audit",13),2&e){const e=m.oxw(3);m.Q6J("record",e.record)("side",!1)}}function Ud(e,t){if(1&e&&m._UZ(0,"object-timeline-item-created",13),2&e){const e=m.oxw(3);m.Q6J("record",e.record)("side",!1)}}function Qd(e,t){if(1&e&&(m.TgZ(0,"div",3),m._UZ(1,"div",4),m.TgZ(2,"div",5),m.YNc(3,Ed,3,1,"div",6),m._UZ(4,"div",7),m.qZA(),m.TgZ(5,"div",8),m.YNc(6,Yd,1,2,"object-timeline-item-module",9),m.YNc(7,Dd,1,2,"object-timeline-item-audit",9),m.YNc(8,Ud,1,2,"object-timeline-item-created",10),m.qZA()()),2&e){const e=m.oxw(2);m.xp6(3),m.Q6J("ngIf",e.divider),m.xp6(2),m.Q6J("ngSwitch",e.record.record_Type),m.xp6(1),m.Q6J("ngSwitchCase","module"),m.xp6(1),m.Q6J("ngSwitchCase","audit")}}function Rd(e,t){if(1&e&&m._UZ(0,"object-timeline-item-module",13),2&e){const e=m.oxw(3);m.Q6J("record",e.record)("side",!0)}}function jd(e,t){if(1&e&&m._UZ(0,"object-timeline-item-audit",13),2&e){const e=m.oxw(3);m.Q6J("record",e.record)("side",!0)}}function Bd(e,t){if(1&e&&m._UZ(0,"object-timeline-item-created",13),2&e){const e=m.oxw(3);m.Q6J("record",e.record)("side",!0)}}function Gd(e,t){if(1&e&&(m.TgZ(0,"div",11)(1,"span",12),m._uU(2),m.qZA()()),2&e){const e=m.oxw(3);m.xp6(2),m.hij(" ",e.record.divider," ")}}function Pd(e,t){if(1&e&&(m.TgZ(0,"div",3)(1,"div",8),m.YNc(2,Rd,1,2,"object-timeline-item-module",9),m.YNc(3,jd,1,2,"object-timeline-item-audit",9),m.YNc(4,Bd,1,2,"object-timeline-item-created",10),m.qZA(),m.TgZ(5,"div",5),m.YNc(6,Gd,3,1,"div",6),m._UZ(7,"div",14),m.qZA(),m._UZ(8,"div",4),m.qZA()),2&e){const e=m.oxw(2);m.xp6(1),m.Q6J("ngSwitch",e.record.record_Type),m.xp6(1),m.Q6J("ngSwitchCase","module"),m.xp6(1),m.Q6J("ngSwitchCase","audit"),m.xp6(3),m.Q6J("ngIf",e.divider)}}function Hd(e,t){if(1&e&&(m.TgZ(0,"div"),m.YNc(1,Qd,9,4,"div",2),m.YNc(2,Pd,9,4,"div",2),m.qZA()),2&e){const e=m.oxw();m.xp6(1),m.Q6J("ngIf",e.side),m.xp6(1),m.Q6J("ngIf",!e.side)}}function zd(e,t){if(1&e&&(m.TgZ(0,"div",21)(1,"span",12),m._uU(2),m.qZA()()),2&e){const e=m.oxw(2);m.xp6(2),m.hij(" ",e.record.divider," ")}}function Vd(e,t){if(1&e&&m._UZ(0,"object-timeline-item-module",13),2&e){const e=m.oxw(2);m.Q6J("record",e.record)("side",!1)}}function $d(e,t){if(1&e&&m._UZ(0,"object-timeline-item-audit",13),2&e){const e=m.oxw(2);m.Q6J("record",e.record)("side",!1)}}function Kd(e,t){if(1&e&&m._UZ(0,"object-timeline-item-created",13),2&e){const e=m.oxw(2);m.Q6J("record",e.record)("side",!1)}}function Xd(e,t){if(1&e&&(m.TgZ(0,"div",15)(1,"div",16)(2,"div",17),m._UZ(3,"div",14),m.qZA(),m.YNc(4,zd,3,1,"div",18),m.qZA(),m.TgZ(5,"div",19)(6,"div",17),m._UZ(7,"div",14),m.qZA(),m.TgZ(8,"div",20),m.YNc(9,Vd,1,2,"object-timeline-item-module",9),m.YNc(10,$d,1,2,"object-timeline-item-audit",9),m.YNc(11,Kd,1,2,"object-timeline-item-created",10),m.qZA()()()),2&e){const e=m.oxw();m.xp6(4),m.Q6J("ngIf",e.divider),m.xp6(4),m.Q6J("ngSwitch",e.record.record_Type),m.xp6(1),m.Q6J("ngSwitchCase","module"),m.xp6(1),m.Q6J("ngSwitchCase","audit")}}let Wd=(()=>{class ObjectTimelineItemLine{timeline;Record;index;buttons=!0;constructor(e){this.timeline=e}get side(){return this.index%2==0}get divider(){return this.record.hasOwnProperty("divider")}get record(){return this.Record}get recordType(){return this.Record.hasOwnProperty("audit_log")?"audit":this.Record.hasOwnProperty("module")?"moduleRecord":"moduleCreated"}static ɵfac=function(e){return new(e||ObjectTimelineItemLine)(m.Y36(ed))};static ɵcmp=m.Xpm({type:ObjectTimelineItemLine,selectors:[["object-timeline-item-line"]],inputs:{Record:"Record",index:"index",buttons:"buttons"},decls:3,vars:2,consts:[[4,"ngIf","ngIfElse"],["thinView",""],["class","slds-grid","style","height: 70px",4,"ngIf"],[1,"slds-grid",2,"height","70px"],[2,"width","calc(50% - 2px)"],[1,"slds-grid--vertical","slds-align--absolute-center",2,"width","4px","height","85px"],["style","width: 60px","class","slds-m-top--medium",4,"ngIf"],[1,"slds-color__background_gray-9","slds-height_full","slds-align--absolute-center",2,"width","2px","height","85px"],[2,"width","calc(50% - 2px)",3,"ngSwitch"],[3,"record","side",4,"ngSwitchCase"],[3,"record","side",4,"ngSwitchDefault"],[1,"slds-m-top--medium",2,"width","60px"],[1,"slds-color__text_gray-6","slds-align--absolute-center",2,"font-size","14px"],[3,"record","side"],[1,"slds-color__background_gray-9","slds-height_full","slds-align--absolute-center",2,"width","2px"],[1,"slds-grid--vertical"],[1,"slds-grid"],[1,"slds-grid--vertical",2,"width","4px"],["style","width: 60px","class","slds-m-left--xx-small",4,"ngIf"],[1,"slds-grid","slds-m-right--small"],[2,"width","calc(100% - 4px)",3,"ngSwitch"],[1,"slds-m-left--xx-small",2,"width","60px"]],template:function(e,t){if(1&e&&(m.YNc(0,Hd,3,2,"div",0),m.YNc(1,Xd,12,4,"ng-template",null,1,m.W1O)),2&e){const e=m.MAs(2);m.Q6J("ngIf",!t.timeline.smartView)("ngIfElse",e)}},dependencies:[i.O5,i.RF,i.n9,i.ED,qd,rd,bd],encapsulation:2})}return ObjectTimelineItemLine})();function er(e,t){1&e&&(m.TgZ(0,"div")(1,"div",2),m._UZ(2,"div",3),m.TgZ(3,"div",4),m._UZ(4,"div",5),m.qZA(),m.TgZ(5,"div",3)(6,"div",6)(7,"div",7)(8,"span",8),m._UZ(9,"system-stencil"),m.qZA()(),m.TgZ(10,"section",9)(11,"div",10)(12,"div",11)(13,"div",12),m._UZ(14,"system-icon",13),m.qZA()(),m.TgZ(15,"div",14)(16,"div",15)(17,"div",16)(18,"header",17)(19,"h2",18),m._UZ(20,"system-stencil"),m.qZA()(),m.TgZ(21,"p",19),m._UZ(22,"system-stencil"),m.qZA()()(),m._UZ(23,"system-icon",20),m.qZA()()()()()(),m.TgZ(24,"div",21)(25,"div",3)(26,"div",22)(27,"section",23)(28,"div",24)(29,"div",11)(30,"div",12),m._UZ(31,"system-icon",13),m.qZA()(),m.TgZ(32,"div",14)(33,"div",15)(34,"div",16)(35,"header",17)(36,"h2",18),m._UZ(37,"system-stencil"),m.qZA()(),m.TgZ(38,"p",19),m._UZ(39,"system-stencil"),m.qZA()()(),m._UZ(40,"system-icon",20),m.qZA()()(),m.TgZ(41,"div",7)(42,"span",8),m._UZ(43,"system-stencil"),m.qZA()()()(),m.TgZ(44,"div",25),m._UZ(45,"div",5),m.qZA(),m._UZ(46,"div",3),m.qZA(),m.TgZ(47,"div",26),m._UZ(48,"div",3),m.TgZ(49,"div",4),m._UZ(50,"div",5),m.qZA(),m.TgZ(51,"div",3)(52,"div",6)(53,"div",7)(54,"span",8),m._UZ(55,"system-stencil"),m.qZA()(),m.TgZ(56,"section",9)(57,"div",10)(58,"div",11)(59,"div",12),m._UZ(60,"system-icon",13),m.qZA()(),m.TgZ(61,"div",14)(62,"div",15)(63,"div",16)(64,"header",17)(65,"h2",18),m._UZ(66,"system-stencil"),m.qZA()(),m.TgZ(67,"p",19),m._UZ(68,"system-stencil"),m.qZA()()(),m._UZ(69,"system-icon",27),m.qZA()()()()()(),m.TgZ(70,"div",28)(71,"div",3)(72,"div",22)(73,"section",23)(74,"div",24)(75,"div",11)(76,"div",12),m._UZ(77,"system-icon",13),m.qZA()(),m.TgZ(78,"div",14)(79,"div",15)(80,"div",16)(81,"header",17)(82,"h2",18),m._UZ(83,"system-stencil"),m.qZA()(),m.TgZ(84,"p",19),m._UZ(85,"system-stencil"),m.qZA()()(),m._UZ(86,"system-icon",20),m.qZA()()(),m.TgZ(87,"div",7)(88,"span",8),m._UZ(89,"system-stencil"),m.qZA()()()(),m.TgZ(90,"div",25),m._UZ(91,"div",5),m.qZA(),m._UZ(92,"div",3),m.qZA(),m.TgZ(93,"div",29),m._UZ(94,"div",3),m.TgZ(95,"div",4),m._UZ(96,"div",5),m.qZA(),m.TgZ(97,"div",3)(98,"div",6)(99,"div",7)(100,"span",8),m._UZ(101,"system-stencil"),m.qZA()(),m.TgZ(102,"section",9)(103,"div",30)(104,"div",11)(105,"div",12),m._UZ(106,"system-icon",13),m.qZA()(),m.TgZ(107,"div",14)(108,"div",15)(109,"div",16)(110,"header",17)(111,"h2",18),m._UZ(112,"system-stencil"),m.qZA()(),m.TgZ(113,"p",19),m._UZ(114,"system-stencil"),m.qZA()()(),m.TgZ(115,"button",31),m._UZ(116,"system-button-icon",13),m.qZA()()()()()()()()),2&e&&(m.xp6(23),m.Q6J("icon","down"),m.xp6(17),m.Q6J("icon","down"),m.xp6(46),m.Q6J("icon","down"))}function tr(e,t){1&e&&(m.TgZ(0,"div",2)(1,"div",4),m._UZ(2,"div",5),m.qZA(),m.TgZ(3,"div",32)(4,"div",6)(5,"div",7)(6,"span",8),m._UZ(7,"system-stencil"),m.qZA()(),m.TgZ(8,"section",9)(9,"div",10)(10,"div",11)(11,"div",12),m._UZ(12,"system-icon",13),m.qZA()(),m.TgZ(13,"div",14)(14,"div",15)(15,"div",16)(16,"header",17)(17,"h2",18),m._UZ(18,"system-stencil"),m.qZA()(),m.TgZ(19,"p",19),m._UZ(20,"system-stencil"),m.qZA()()(),m._UZ(21,"system-icon",20),m.qZA()()()()()(),m.TgZ(22,"div",2)(23,"div",4),m._UZ(24,"div",5),m.qZA(),m.TgZ(25,"div",32)(26,"div",6)(27,"div",7)(28,"span",8),m._UZ(29,"system-stencil"),m.qZA()(),m.TgZ(30,"section",9)(31,"div",10)(32,"div",11)(33,"div",12),m._UZ(34,"system-icon",13),m.qZA()(),m.TgZ(35,"div",14)(36,"div",15)(37,"div",16)(38,"header",17)(39,"h2",18),m._UZ(40,"system-stencil"),m.qZA()(),m.TgZ(41,"p",19),m._UZ(42,"system-stencil"),m.qZA()()(),m._UZ(43,"system-icon",20),m.qZA()()()()()(),m.TgZ(44,"div",2)(45,"div",4),m._UZ(46,"div",5),m.qZA(),m.TgZ(47,"div",32)(48,"div",6)(49,"div",7)(50,"span",8),m._UZ(51,"system-stencil"),m.qZA()(),m.TgZ(52,"section",9)(53,"div",10)(54,"div",11)(55,"div",12),m._UZ(56,"system-icon",13),m.qZA()(),m.TgZ(57,"div",14)(58,"div",15)(59,"div",16)(60,"header",17)(61,"h2",18),m._UZ(62,"system-stencil"),m.qZA()(),m.TgZ(63,"p",19),m._UZ(64,"system-stencil"),m.qZA()()(),m._UZ(65,"system-icon",20),m.qZA()()()()()(),m.TgZ(66,"div",2)(67,"div",4),m._UZ(68,"div",5),m.qZA(),m.TgZ(69,"div",32)(70,"div",6)(71,"div",7)(72,"span",8),m._UZ(73,"system-stencil"),m.qZA()(),m.TgZ(74,"section",9)(75,"div",10)(76,"div",11)(77,"div",12),m._UZ(78,"system-icon",13),m.qZA()(),m.TgZ(79,"div",14)(80,"div",15)(81,"div",16)(82,"header",17)(83,"h2",18),m._UZ(84,"system-stencil"),m.qZA()(),m.TgZ(85,"p",19),m._UZ(86,"system-stencil"),m.qZA()()(),m._UZ(87,"system-icon",20),m.qZA()()()()()(),m.TgZ(88,"div",2)(89,"div",4),m._UZ(90,"div",5),m.qZA(),m.TgZ(91,"div",32)(92,"div",6)(93,"div",7)(94,"span",8),m._UZ(95,"system-stencil"),m.qZA()(),m.TgZ(96,"section",9)(97,"div",10)(98,"div",11)(99,"div",12),m._UZ(100,"system-icon",13),m.qZA()(),m.TgZ(101,"div",14)(102,"div",15)(103,"div",16)(104,"header",17)(105,"h2",18),m._UZ(106,"system-stencil"),m.qZA()(),m.TgZ(107,"p",19),m._UZ(108,"system-stencil"),m.qZA()()(),m._UZ(109,"system-icon",20),m.qZA()()()()()()),2&e&&(m.xp6(21),m.Q6J("icon","down"),m.xp6(22),m.Q6J("icon","down"),m.xp6(22),m.Q6J("icon","down"),m.xp6(22),m.Q6J("icon","down"),m.xp6(22),m.Q6J("icon","down"))}let sr=(()=>{class ObjectTimelineStencil{timeline;constructor(e){this.timeline=e}static ɵfac=function(e){return new(e||ObjectTimelineStencil)(m.Y36(ed))};static ɵcmp=m.Xpm({type:ObjectTimelineStencil,selectors:[["object-timeline-stencil"]],decls:3,vars:2,consts:[[4,"ngIf","ngIfElse"],["smallview",""],[1,"slds-grid","slds-m-right--small",2,"height","125px"],[2,"width","calc(50% - 2px)"],[1,"slds-height_full","slds-size--2-of-12",2,"width","4px"],[1,"slds-color__background_gray-9","slds-height_full","slds-align--absolute-center",2,"width","2px"],[1,"slds-grid","slds-grid"],[1,"slds-align--absolute-center","slds-m-horizontal--none",2,"width","70px"],[2,"width","30px","overflow","hidden"],[1,"slds-m-vertical--medium","slds-popover","slds-height_full","slds-nubbin--left",2,"width","calc(100% - 70px)"],[1,"slds-popover__body","slds-grid",2,"height","90px"],[1,"slds-grid","slds-grid--vertical","slds-grid--vertical-align-center",2,"width","32px"],[1,"slds-m-horizontal--xx-small",2,"width","32px"],["icon","generic_loading"],[1,"slds-grid","slds-grid--align-spread","slds-size--7-of-8",2,"width","calc(100% - 32px)"],[1,"slds-m-horizontal--small","slds-media","slds-left--small","slds-size--1-of-1"],[1,"slds-media__body","slds-size--1-of-1"],[1,"slds-p-left--none","slds-popover__header","slds-p-top--none","slds-size--3-of-5",2,"border","0"],[1,"slds-text-heading_medium"],[1,"slds-size--2-of-5"],[3,"icon"],[1,"slds-grid","slds-m-right--small",2,"height","125px","opacity","0.8"],[1,"slds-grid","slds-grid","slds-grid--align-end"],[1,"slds-m-vertical--medium","slds-popover","slds-height_full","slds-nubbin--right",2,"width","calc(100% - 70px)"],[1,"slds-popover__body","slds-grid","slds-grid--align-spread",2,"height","90px"],[1,"slds-height_full",2,"width","4px"],[1,"slds-grid","slds-m-right--small",2,"height","125px","opacity","0.6"],["icon","down"],[1,"slds-grid","slds-m-right--small",2,"height","125px","opacity","0.4"],[1,"slds-grid","slds-m-right--small",2,"height","125px","opacity","0.2"],[1,"slds-popover__body","slds-grid","slds-size--1-of-1",2,"height","90px"],[1,"slds-button","slds-button--icon-border-filled","slds-button--icon-x-small"],[2,"width","calc(100% - 2px)"]],template:function(e,t){if(1&e&&(m.YNc(0,er,117,3,"div",0),m.YNc(1,tr,110,5,"ng-template",null,1,m.W1O)),2&e){const e=m.MAs(2);m.Q6J("ngIf",!t.timeline.smartView)("ngIfElse",e)}},dependencies:[i.O5,w.J,Z.f,ci.B],encapsulation:2})}return ObjectTimelineStencil})();const ir=["detailContainer"];let nr=(()=>{class ObjecttimelineFullScreenDetail{metadata;parent;model;language;timeline;activatedRoute;detailContainer;module;id;data;componentRefs=[];constructor(e,t,s,i,n,l){this.metadata=e,this.parent=t,this.model=s,this.language=i,this.timeline=n,this.activatedRoute=l}ngOnChanges(){this.model.module=this.module,this.model.id=this.id,this.model.setData(this.data);for(let e of this.componentRefs)e.destroy();let e=this.metadata.getComponentConfig("ObjectTimelineFullScreen",this.module);if(e&&e.componentset)for(let t of e.componentset)for(let e of this.metadata.getComponentSetObjects(t))this.metadata.addComponent(e.component,this.detailContainer).subscribe((t=>{t.instance.componentconfig=e.componentconfig,this.componentRefs.push(t)}))}static ɵfac=function(e){return new(e||ObjecttimelineFullScreenDetail)(m.Y36(b.Pu),m.Y36(h.o),m.Y36(h.o),m.Y36(g.d),m.Y36(ed),m.Y36(o.gz))};static ɵcmp=m.Xpm({type:ObjecttimelineFullScreenDetail,selectors:[["object-timeline-full-screen-detail"]],viewQuery:function(e,t){if(1&e&&m.Gf(ir,7,m.s_b),2&e){let e;m.iGM(e=m.CRH())&&(t.detailContainer=e.first)}},inputs:{module:"module",id:"id",data:"data"},features:[m._Bn([h.o]),m.TTD],decls:14,vars:3,consts:[[1,"slds-border_bottom","slds-p-around--medium","slds-theme--shade"],[1,"slds-grid"],[1,"slds-col","slds-has-flexi-truncate"],[1,"slds-media","slds-no-space","slds-grow"],[3,"module"],[1,"slds-media__body"],[1,"slds-text-title--caps","slds-line-height--reset"],[1,"slds-page-header__title","slds-m-right--small","slds-align-middle","slds-truncate"],[1,"slds-p-around--xx-small"],["detailContainer",""]],template:function(e,t){1&e&&(m.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),m._UZ(4,"system-icon",4),m.TgZ(5,"div",5)(6,"p",6),m._UZ(7,"system-label-modulename",4),m.qZA(),m.TgZ(8,"div")(9,"h1",7),m._uU(10),m.qZA()()()()()()(),m.TgZ(11,"div",8),m._UZ(12,"div",null,9),m.qZA()),2&e&&(m.xp6(4),m.Q6J("module",t.model.module),m.xp6(3),m.Q6J("module",t.model.module),m.xp6(3),m.hij(" ",t.model.data.name,""))},dependencies:[Z.f,nn.M],encapsulation:2})}return ObjecttimelineFullScreenDetail})();function lr(e,t){if(1&e&&(m.TgZ(0,"tr")(1,"td",11)(2,"div",6),m._uU(3),m.qZA()(),m.TgZ(4,"td",11)(5,"div",6),m._uU(6),m.qZA()(),m.TgZ(7,"td",11)(8,"div",6),m._uU(9),m.qZA()()()),2&e){const e=t.$implicit,s=m.oxw(2);m.xp6(3),m.hij("",s.language.getFieldDisplayName(s.model.module,e.field_name)," "),m.xp6(3),m.Oqu(e.before_value_string),m.xp6(3),m.Oqu(e.after_value_string)}}function or(e,t){if(1&e&&(m.TgZ(0,"table",1)(1,"thead")(2,"tr")(3,"td",2)(4,"div",3),m._uU(5),m.qZA()()(),m.TgZ(6,"tr",4)(7,"th",5)(8,"div",6),m._UZ(9,"system-label",7),m.qZA()(),m.TgZ(10,"th",5)(11,"div",6),m._UZ(12,"system-label",8),m.qZA()(),m.TgZ(13,"th",5)(14,"div",6),m._UZ(15,"system-label",9),m.qZA()()()(),m.TgZ(16,"tbody"),m.YNc(17,lr,10,3,"tr",10),m.qZA()()),2&e){const e=m.oxw();m.xp6(5),m.AsE(" ",e.auditLog.user_name," / ",e.auditLog.date," "),m.xp6(12),m.Q6J("ngForOf",e.auditLog.data)}}let ar=(()=>{class ObjectTimelineAuditDetail{language;metadata;model;auditLog;loading=!0;constructor(e,t,s){this.language=e,this.metadata=t,this.model=s}ngOnChanges(){this.loading=!1}static ɵfac=function(e){return new(e||ObjectTimelineAuditDetail)(m.Y36(g.d),m.Y36(b.Pu),m.Y36(h.o,8))};static ɵcmp=m.Xpm({type:ObjectTimelineAuditDetail,selectors:[["object-timeline-audit-detail"]],inputs:{auditLog:"auditLog"},features:[m.TTD],decls:2,vars:1,consts:[["class","slds-table slds-table--bordered slds-table--cell-buffer",4,"ngIf"],[1,"slds-table","slds-table--bordered","slds-table--cell-buffer"],["colspan","3",1,"slds-theme--shade"],[1,"slds-text-heading--label"],[1,"slds-text-title--caps"],["scope","col"],[1,"slds-truncate"],["label","LBL_FIELD"],["label","LBL_BEFOREVALUE"],["label","LBL_AFTERVALUE"],[4,"ngFor","ngForOf"],["scope","row"]],template:function(e,t){1&e&&(m.TgZ(0,"div"),m.YNc(1,or,18,3,"table",0),m.qZA()),2&e&&(m.xp6(1),m.Q6J("ngIf",!t.loading))},dependencies:[i.sg,i.O5,I._],encapsulation:2})}return ObjectTimelineAuditDetail})();const dr=["listContainer"];function rr(e,t){if(1&e){const e=m.EpF();m.TgZ(0,"system-input-delayed",27),m.NdJ("ngModelChange",(function(t){m.CHM(e);const s=m.oxw();return m.KtG(s.ftsSearchTerm=t)})),m.qZA()}if(2&e){const e=m.oxw();m.Q6J("placeholder",e.language.getLabel("LBL_SEARCH"))("ngModel",e.ftsSearchTerm)}}function cr(e,t){if(1&e&&(m.TgZ(0,"li"),m._UZ(1,"object-timeline-item-line",32),m.qZA()),2&e){const e=t.$implicit,s=t.index;m.xp6(1),m.Q6J("Record",e)("index",s)}}function ur(e,t){1&e&&(m.TgZ(0,"li",33),m._UZ(1,"system-spinner"),m.qZA())}function mr(e,t){if(1&e&&(m.TgZ(0,"ul"),m.YNc(1,cr,2,2,"li",30),m.YNc(2,ur,2,0,"li",31),m.qZA()),2&e){const e=m.oxw(2);m.xp6(1),m.Q6J("ngForOf",e.timeline.records)("ngForTrackBy",e.trackByFunction),m.xp6(1),m.Q6J("ngIf",e.timeline.loadingMore)}}function gr(e,t){if(1&e&&(m.TgZ(0,"div",28),m.YNc(1,mr,3,3,"ul",29),m.qZA()),2&e){const e=m.oxw(),t=m.MAs(42);m.xp6(1),m.Q6J("ngIf",0!==e.timeline.records.length)("ngIfElse",t)}}function hr(e,t){if(1&e&&m._UZ(0,"object-timeline-full-screen-detail",36),2&e){const e=m.oxw(2);m.Q6J("module",e.timeline.recordModule)("id",e.timeline.recordId)("data",e.timeline.recordData)}}function pr(e,t){if(1&e&&(m.TgZ(0,"div",34),m.YNc(1,hr,1,3,"object-timeline-full-screen-detail",35),m.qZA()),2&e){const e=m.oxw(),t=m.MAs(38);m.xp6(1),m.Q6J("ngIf","Audit"!==e.timeline.recordModule)("ngIfElse",t)}}function fr(e,t){if(1&e&&m._UZ(0,"object-timeline-audit-detail",37),2&e){const e=m.oxw();m.Q6J("auditLog",e.timeline.recordData)}}function br(e,t){1&e&&m._UZ(0,"object-timeline-stencil")}function _r(e,t){1&e&&(m.TgZ(0,"div",38),m._UZ(1,"system-illustration-no-records",39),m.qZA())}const vr=function(e,t){return{"slds-p-horizontal--small":e,"slds-p-left--small":t}};let yr=(()=>{class ObjectTimelineFullScreen{timeline;parent;navigationTab;language;layout;listContainer;dateInput;constructor(e,t,s,i,n){this.timeline=e,this.parent=t,this.navigationTab=s,this.language=i,this.layout=n}get parentName(){return this.parent.getField("name")}get displayDetailsPanel(){return"small"!=this.layout.screenwidth}get ftsSearchTerm(){return this.timeline.filters.searchterm}set ftsSearchTerm(e){this.timeline.filters.searchterm=e,this.timeline.reload()}get date(){return this.timeline.timeRangeStart}set date(e){this.timeline.timeRangeStart=e,this.timeline.reload()}trackByFunction(e,t){return t.id}ngOnInit(){this.onResize(),this.dateInput=this.timeline.startDate,this.initialize(this.navigationTab.activeRoute.params),this.timeline.getTimelineData()}ngAfterViewInit(){this.onResize()}goModule(){this.parent.goModule()}goModel(){this.parent.goDetail()}initialize(e){this.parent.module=e.module,this.parent.id=e.id,this.timeline.parent=this.parent,this.parent.getData(!0,"",!0).subscribe((e=>{this.timeline.parent.setData(e),this.navigationTab.setTabInfo({displayname:this.parent.getField("summary_text")+" • timeline"})}))}onScroll(e){let t=this.listContainer.element.nativeElement;t.scrollTop+t.clientHeight+50>t.scrollHeight&&this.timeline.canLoadMore()&&this.timeline.loadMore()}reload(){this.timeline.reload(),this.timeline.clearRecord()}onResize(){this.timeline.smartView=this.listContainer.element.nativeElement.clientWidth<742,this.timeline.smartFontSize=this.listContainer.element.nativeElement.clientWidth<413}static ɵfac=function(e){return new(e||ObjectTimelineFullScreen)(m.Y36(ed),m.Y36(h.o),m.Y36(we.d),m.Y36(g.d),m.Y36(x.b))};static ɵcmp=m.Xpm({type:ObjectTimelineFullScreen,selectors:[["object-timeline-full-screen"]],viewQuery:function(e,t){if(1&e&&m.Gf(dr,7,m.s_b),2&e){let e;m.iGM(e=m.CRH())&&(t.listContainer=e.first)}},hostBindings:function(e,t){1&e&&m.NdJ("resize",(function(e){return t.onResize(e)}),!1,m.Jf7)},features:[m._Bn([ed,h.o])],decls:43,vars:13,consts:[[1,"slds-page-header","slds-grid","slds-grid--align-spread"],[1,"slds-col"],["role","navigation","aria-label","Breadcrumbs"],[1,"slds-breadcrumb","slds-list_horizontal","slds-wrap"],[1,"slds-breadcrumb__item","slds-text-title_caps"],["href","javascript:void(0);",3,"click"],[3,"module"],[1,"slds-p-horizontal--x-small"],["label","LBL_TIMELINE"],[1,"slds-p-vertical--xx-small","slds-text-heading--x-small"],[1,"slds-p-horizontal--xx-small"],[1,"slds-page-header__col-actions","slds-grid"],["delay","1000",3,"placeholder","ngModel","ngModelChange",4,"ngIf"],[1,"slds-page-header__controls"],[1,"slds-page-header__control"],[3,"disabled","ngModel","ngModelChange"],[1,"slds-align--absolute-center","slds-button","slds-button--icon","slds-button--icon-border-filled"],[1,"slds-button","slds-button--icon","slds-button--icon-border-filled"],["icon","refresh",3,"click"],[1,"slds-grid"],["system-to-bottom","",1,"slds-size--1-of-1","slds-medium-size--5-of-12","slds-border--right","slds-scrollable",3,"ngClass","scroll"],["listContainer",""],["class","slds-height_full",4,"ngIf","ngIfElse"],["class","slds-size--7-of-12","system-to-bottom","",4,"ngIf"],["auditpanel",""],["currentlyloading",""],["nocontent",""],["delay","1000",3,"placeholder","ngModel","ngModelChange"],[1,"slds-height_full"],[4,"ngIf","ngIfElse"],[4,"ngFor","ngForOf","ngForTrackBy"],["class","slds-p-top--large",4,"ngIf"],[3,"Record","index"],[1,"slds-p-top--large"],["system-to-bottom","",1,"slds-size--7-of-12"],[3,"module","id","data",4,"ngIf","ngIfElse"],[3,"module","id","data"],[3,"auditLog"],[1,"slds-p-top_large"],[1,"slds-m-top_large"]],template:function(e,t){if(1&e&&(m.TgZ(0,"div",0)(1,"div",1)(2,"nav",2)(3,"ol",3)(4,"li",4)(5,"a",5),m.NdJ("click",(function(){return t.goModule()})),m._UZ(6,"system-label-modulename",6),m.qZA()(),m.TgZ(7,"li",4)(8,"a",5),m.NdJ("click",(function(){return t.goModel()})),m._uU(9),m.qZA()(),m.TgZ(10,"li",4)(11,"span",7),m._UZ(12,"system-label",8),m.qZA()()()(),m.TgZ(13,"div",9)(14,"span"),m._uU(15),m.qZA(),m.TgZ(16,"span",10),m._uU(17,"records found "),m.qZA()()(),m.TgZ(18,"div",11),m.YNc(19,rr,1,2,"system-input-delayed",12),m.TgZ(20,"div",13),m._UZ(21,"div",14),m.qZA(),m.TgZ(22,"div",13)(23,"div",14)(24,"system-input-date",15),m.NdJ("ngModelChange",(function(e){return t.date=e})),m.qZA()()(),m.TgZ(25,"div",13)(26,"div",14),m._UZ(27,"object-timeline-filter",16),m.qZA()(),m.TgZ(28,"div",13)(29,"div",14)(30,"button",17)(31,"system-button-icon",18),m.NdJ("click",(function(){return t.reload()})),m.qZA()()()()()(),m.TgZ(32,"div",19)(33,"div",20,21),m.NdJ("scroll",(function(e){return t.onScroll(e)})),m.YNc(35,gr,2,2,"div",22),m.qZA(),m.YNc(36,pr,2,2,"div",23),m.qZA(),m.YNc(37,fr,1,1,"ng-template",null,24,m.W1O),m.YNc(39,br,1,0,"ng-template",null,25,m.W1O),m.YNc(41,_r,2,0,"ng-template",null,26,m.W1O)),2&e){const e=m.MAs(40);m.xp6(6),m.Q6J("module",t.parent.module),m.xp6(3),m.Oqu(t.parent.data.summary_text),m.xp6(6),m.Oqu(t.timeline.totalRecords),m.xp6(4),m.Q6J("ngIf",!t.timeline.onlyAudits),m.xp6(5),m.Q6J("disabled",t.timeline.loading)("ngModel",t.date),m.xp6(9),m.Q6J("ngClass",m.WLB(10,vr,!t.timeline.smartView,t.timeline.smartView)),m.xp6(2),m.Q6J("ngIf",!t.timeline.loading)("ngIfElse",e),m.xp6(1),m.Q6J("ngIf",t.displayDetailsPanel&&!!t.timeline.recordModule)}},dependencies:[i.mk,i.sg,i.O5,l.JJ,l.On,w.J,wd.C,Zd.z,Td.y,I._,nn.M,Mt.W,q.H,Wd,sr,xd,nr,ar],encapsulation:2})}return ObjectTimelineFullScreen})();const xr=["timelinecontent"];function wr(e,t){if(1&e&&(m.TgZ(0,"li"),m._UZ(1,"object-timeline-item-line",19),m.qZA()),2&e){const e=t.$implicit,s=t.index;m.xp6(1),m.Q6J("Record",e)("index",s)}}function Zr(e,t){1&e&&(m.TgZ(0,"li",20),m._UZ(1,"system-spinner"),m.qZA())}function Tr(e,t){if(1&e&&(m.TgZ(0,"ul"),m.YNc(1,wr,2,2,"li",17),m.YNc(2,Zr,2,0,"li",18),m.qZA()),2&e){const e=m.oxw(2);m.xp6(1),m.Q6J("ngForOf",e.timeline.records)("ngForTrackBy",e.trackByFunction),m.xp6(1),m.Q6J("ngIf",e.timeline.loadingMore)}}function Cr(e,t){if(1&e&&(m.TgZ(0,"div",15),m.YNc(1,Tr,3,3,"ul",16),m.qZA()),2&e){const e=m.oxw(),t=m.MAs(18);m.xp6(1),m.Q6J("ngIf",0!==e.timeline.records.length)("ngIfElse",t)}}function kr(e,t){if(1&e){const e=m.EpF();m.TgZ(0,"button",21),m.NdJ("click",(function(){m.CHM(e);const t=m.oxw();return m.KtG(t.timeline.loadMore())})),m.TgZ(1,"span"),m._UZ(2,"system-label",22),m.qZA()()}}function Ar(e,t){1&e&&(m.TgZ(0,"div",23),m._UZ(1,"system-illustration-no-records"),m.qZA())}function Lr(e,t){1&e&&m._UZ(0,"object-timeline-stencil")}const Ir=function(e,t){return{"slds-p-horizontal--small":e,"slds-p-left--small":t}};let Sr=(()=>{class ObjectTimeline{element;timeline;language;model;el;content;loading;loadingMore;hasRecords;constructor(e,t,s,i,n){this.element=e,this.timeline=t,this.language=s,this.model=i,this.el=n}ngOnInit(){this.timeline.parent=this.model,this.timeline.getTimelineData()}ngAfterViewInit(){this.onResize()}reload(){this.timeline.reload()}trackByFunction(e,t){return t.id}get ftsSearchTerm(){return this.timeline.filters.searchterm}set ftsSearchTerm(e){this.timeline.filters.searchterm=e,this.timeline.reload()}closeDialog(){this.timeline.reload()}get date(){return this.timeline.timeRangeStart}set date(e){this.timeline.timeRangeStart=e,this.timeline.reload()}onResize(){this.timeline.smartView=this.el.nativeElement.getBoundingClientRect().width<730,this.timeline.smartFontSize=this.el.nativeElement.getBoundingClientRect().width<380}static ɵfac=function(e){return new(e||ObjectTimeline)(m.Y36(m.SBq),m.Y36(ed),m.Y36(g.d),m.Y36(h.o),m.Y36(m.SBq))};static ɵcmp=m.Xpm({type:ObjectTimeline,selectors:[["object-timeline"]],viewQuery:function(e,t){if(1&e&&m.Gf(xr,5),2&e){let e;m.iGM(e=m.CRH())&&(t.content=e.first)}},hostBindings:function(e,t){1&e&&m.NdJ("resize",(function(e){return t.onResize(e)}),!1,m.Jf7)},features:[m._Bn([Oe.e,ed])],decls:21,vars:13,consts:[[1,"slds-grid","slds-grid--vertical-align-center","slds-grid--align-end"],["timelineheader",""],[3,"disabled","ngModel","ngModelChange"],["delay","1000",1,"slds-p-horizontal--xx-small",3,"placeholder","ngModel","ngModelChange"],[1,"slds-button","slds-button--icon",3,"title","click"],["icon","refresh",1,"slds-p-horizontal--xxx-small","slds-icon-text-default"],[1,"slds-is-relative","spiceActivitiyTimelineHeader"],[1,"slds-p-vertical--xx-small","slds-text-heading--x-small"],[1,"slds-p-horizontal--xx-small"],[1,"slds-size--1-of-1","slds-border--right",3,"ngClass"],["class","slds-height_full",4,"ngIf","ngIfElse"],[1,"slds-align--absolute-center","slds-m-top--x-large","slds-m-right--small"],["class","slds-button slds-button--neutral","type","button",3,"click",4,"ngIf"],["norecords",""],["loading",""],[1,"slds-height_full"],[4,"ngIf","ngIfElse"],[4,"ngFor","ngForOf","ngForTrackBy"],["class","slds-m-top--xx-large slds-p-top--medium",4,"ngIf"],[3,"Record","index"],[1,"slds-m-top--xx-large","slds-p-top--medium"],["type","button",1,"slds-button","slds-button--neutral",3,"click"],["label","LBL_MORE"],[1,"slds-p-top--large"]],template:function(e,t){if(1&e&&(m.TgZ(0,"div",0,1)(2,"system-input-date",2),m.NdJ("ngModelChange",(function(e){return t.date=e})),m.qZA(),m.TgZ(3,"system-input-delayed",3),m.NdJ("ngModelChange",(function(e){return t.ftsSearchTerm=e})),m.qZA(),m.TgZ(4,"button",4),m.NdJ("click",(function(){return t.reload()})),m._UZ(5,"system-button-icon",5),m.qZA(),m._UZ(6,"object-timeline-filter"),m.qZA(),m.TgZ(7,"div",6)(8,"div",7)(9,"span"),m._uU(10),m.qZA(),m.TgZ(11,"span",8),m._uU(12,"records found "),m.qZA()()(),m.TgZ(13,"div",9),m.YNc(14,Cr,2,2,"div",10),m.qZA(),m.TgZ(15,"div",11),m.YNc(16,kr,3,0,"button",12),m.qZA(),m.YNc(17,Ar,2,0,"ng-template",null,13,m.W1O),m.YNc(19,Lr,1,0,"ng-template",null,14,m.W1O)),2&e){const e=m.MAs(20);m.xp6(2),m.Q6J("disabled",t.timeline.loading)("ngModel",t.date),m.xp6(1),m.Q6J("placeholder",t.language.getLabel("LBL_SEARCH"))("ngModel",t.ftsSearchTerm),m.xp6(1),m.Q6J("title",t.language.getLabel("LBL_RELOAD")),m.xp6(6),m.Oqu(t.timeline.totalRecords),m.xp6(3),m.Q6J("ngClass",m.WLB(10,Ir,!t.timeline.smartView,t.timeline.smartView)),m.xp6(1),m.Q6J("ngIf",!t.timeline.loading)("ngIfElse",e),m.xp6(2),m.Q6J("ngIf",t.timeline.canLoadMore()&&!t.timeline.loadingMore)}},dependencies:[i.mk,i.sg,i.O5,l.JJ,l.On,w.J,wd.C,Zd.z,Td.y,I._,Mt.W,Wd,sr,xd],encapsulation:2})}return ObjectTimeline})();function Mr(e,t){1&e&&m._UZ(0,"system-spinner",8)}function Jr(e,t){if(1&e&&(m.TgZ(0,"tr")(1,"td",19)(2,"div",14),m._uU(3),m.qZA()(),m.TgZ(4,"td",19)(5,"div",14),m._uU(6),m.qZA()(),m.TgZ(7,"td",19)(8,"div",14),m._uU(9),m.qZA()()()),2&e){const e=t.$implicit,s=m.oxw(2);m.xp6(3),m.hij("",s.language.getFieldDisplayName(s.model.module,e.field_name)," "),m.xp6(3),m.Oqu(e.before_value_string),m.xp6(3),m.Oqu(e.after_value_string)}}function Or(e,t){if(1&e&&(m.TgZ(0,"table",9)(1,"thead")(2,"tr")(3,"td",10)(4,"div",11),m._uU(5),m.qZA()()(),m.TgZ(6,"tr",12)(7,"th",13)(8,"div",14),m._UZ(9,"system-label",15),m.qZA()(),m.TgZ(10,"th",13)(11,"div",14),m._UZ(12,"system-label",16),m.qZA()(),m.TgZ(13,"th",13)(14,"div",14),m._UZ(15,"system-label",17),m.qZA()()()(),m.TgZ(16,"tbody"),m.YNc(17,Jr,10,3,"tr",18),m.qZA()()),2&e){const e=m.oxw();m.xp6(5),m.AsE(" ",e.auditLog.user_name," / ",e.auditLog.date," "),m.xp6(12),m.Q6J("ngForOf",e.auditLog.data)}}let Nr=(()=>{class ObjectTimelineAuditlogModal{language;metadata;model;self=null;auditLog;loading=!0;moduleFields=[];constructor(e,t,s){this.language=e,this.metadata=t,this.model=s}ngOnInit(){for(let e in this.metadata.getModuleFields(this.model.module))this.moduleFields.push({name:e,display:this.language.getFieldDisplayName(this.model.module,e)});this.moduleFields.sort(((e,t)=>e.display.toLowerCase()>t.display.toLowerCase()?1:-1)),this.loading=!1}hideAuditLog(){this.self.destroy()}static ɵfac=function(e){return new(e||ObjectTimelineAuditlogModal)(m.Y36(g.d),m.Y36(b.Pu),m.Y36(h.o,8))};static ɵcmp=m.Xpm({type:ObjectTimelineAuditlogModal,selectors:[["object-timeline-auditlog-modal"]],decls:9,vars:2,consts:[["size","large"],[3,"close"],["label","LBL_LOGGED_CHANGES"],["margin","none"],["class","slds-p-around--medium",4,"ngIf"],["class","slds-table slds-table--bordered slds-table--cell-buffer",4,"ngIf"],[1,"slds-button","slds-button--brand",3,"click"],["label","LBL_CLOSE"],[1,"slds-p-around--medium"],[1,"slds-table","slds-table--bordered","slds-table--cell-buffer"],["colspan","3",1,"slds-theme--shade"],[1,"slds-text-heading--label"],[1,"slds-text-title--caps"],["scope","col"],[1,"slds-truncate"],["label","LBL_FIELD"],["label","LBL_BEFOREVALUE"],["label","LBL_AFTERVALUE"],[4,"ngFor","ngForOf"],["scope","row"]],template:function(e,t){1&e&&(m.TgZ(0,"system-modal",0)(1,"system-modal-header",1),m.NdJ("close",(function(){return t.hideAuditLog()})),m._UZ(2,"system-label",2),m.qZA(),m.TgZ(3,"system-modal-content",3),m.YNc(4,Mr,1,0,"system-spinner",4),m.YNc(5,Or,18,3,"table",5),m.qZA(),m.TgZ(6,"system-modal-footer")(7,"button",6),m.NdJ("click",(function(){return t.hideAuditLog()})),m._UZ(8,"system-label",7),m.qZA()()()),2&e&&(m.xp6(4),m.Q6J("ngIf",t.loading),m.xp6(1),m.Q6J("ngIf",!t.loading))},dependencies:[i.sg,i.O5,I._,Fe.j,qe.x,Ee.p,Ye.y,Mt.W],encapsulation:2})}return ObjectTimelineAuditlogModal})();const Fr=["object-popover-body-item",""];function qr(e,t){1&e&&m._UZ(0,"system-spinner")}function Er(e,t){if(1&e&&(m.TgZ(0,"div",10)(1,"dl")(2,"dt"),m._UZ(3,"field-label",11),m.qZA(),m.TgZ(4,"dd"),m._UZ(5,"field-container",12),m.qZA()()()),2&e){const e=t.$implicit;m.xp6(3),m.Q6J("fieldname",e.field)("fieldconfig",e.fieldconfig),m.xp6(2),m.Q6J("field",e.field)("fieldconfig",e.fieldconfig)("fielddisplayclass","slds-truncate")}}function Yr(e,t){if(1&e&&(m.TgZ(0,"div",8),m.YNc(1,Er,6,5,"div",9),m.qZA()),2&e){const e=m.oxw();m.xp6(1),m.Q6J("ngForOf",e.fields)}}let Dr=(()=>{class ObjectPopoverBodyItem{language;model;metadata;module="";id="";modelIsLoading=!0;fields=[];constructor(e,t,s){this.language=e,this.model=t,this.metadata=s}ngOnInit(){this.model.module=this.module,this.model.id=this.id,this.modelIsLoading=!0,this.model.getData(!0).subscribe((e=>{this.modelIsLoading=!1}));let e=this.metadata.getComponentConfig("ObjectPopoverBodyItem",this.model.module);e.fieldset&&(this.fields=this.metadata.getFieldSetFields(e.fieldset))}static ɵfac=function(e){return new(e||ObjectPopoverBodyItem)(m.Y36(g.d),m.Y36(h.o),m.Y36(b.Pu))};static ɵcmp=m.Xpm({type:ObjectPopoverBodyItem,selectors:[["","object-popover-body-item",""]],hostAttrs:[1,"slds-popover__body-list"],inputs:{module:"module",id:"id"},features:[m._Bn([h.o,Oe.e])],attrs:Fr,decls:9,vars:4,consts:[[1,"slds-media","slds-m-bottom--small","slds-media--center"],[1,"slds-media__figure"],[3,"module"],[1,"slds-media__body"],[4,"ngIf"],[1,"slds-text-heading--medium","slds-truncate"],["href","javascript:void(0);",3,"click"],["class","slds-grid slds-wrap slds-grid--pull-padded",4,"ngIf"],[1,"slds-grid","slds-wrap","slds-grid--pull-padded"],["class","slds-p-horizontal--small slds-size--1-of-2 slds-p-bottom--x-small",4,"ngFor","ngForOf"],[1,"slds-p-horizontal--small","slds-size--1-of-2","slds-p-bottom--x-small"],[3,"fieldname","fieldconfig"],[3,"field","fieldconfig","fielddisplayclass"]],template:function(e,t){1&e&&(m.TgZ(0,"div",0)(1,"div",1),m._UZ(2,"system-icon",2),m.qZA(),m.TgZ(3,"div",3),m.YNc(4,qr,1,0,"system-spinner",4),m.TgZ(5,"p",5)(6,"a",6),m.NdJ("click",(function(){return t.model.goDetail()})),m._uU(7),m.qZA()()()(),m.YNc(8,Yr,2,1,"div",7)),2&e&&(m.xp6(2),m.Q6J("module",t.model.module),m.xp6(2),m.Q6J("ngIf",t.modelIsLoading),m.xp6(3),m.Oqu(t.model.data.summary_text),m.xp6(1),m.Q6J("ngIf",!t.modelIsLoading))},dependencies:[i.sg,i.O5,Si.q,Ne.j,Z.f,Mt.W],encapsulation:2})}return ObjectPopoverBodyItem})();const Ur=["object-popover-header",""];function Qr(e,t){if(1&e&&(m.TgZ(0,"div",8)(1,"dl")(2,"dt"),m._UZ(3,"field-label",9),m.qZA(),m.TgZ(4,"dd"),m._UZ(5,"field-container",10),m.qZA()()()),2&e){const e=t.$implicit;m.xp6(3),m.Q6J("fieldname",e.field)("fieldconfig",e.fieldconfig),m.xp6(2),m.Q6J("field",e.field)("fieldconfig",e.fieldconfig)("fielddisplayclass","slds-truncate")}}let Rr=(()=>{class ObjectPopoverHeader{language;model;metadata;fields=[];constructor(e,t,s){this.language=e,this.model=t,this.metadata=s}ngOnInit(){let e=this.metadata.getComponentConfig("ObjectPopoverHeader",this.model.module);e.fieldset&&(this.fields=this.metadata.getFieldSetFields(e.fieldset))}static ɵfac=function(e){return new(e||ObjectPopoverHeader)(m.Y36(g.d),m.Y36(h.o),m.Y36(b.Pu))};static ɵcmp=m.Xpm({type:ObjectPopoverHeader,selectors:[["","object-popover-header",""]],hostAttrs:[1,"slds-popover__header"],features:[m._Bn([Oe.e])],attrs:Ur,decls:9,vars:3,consts:[[1,"slds-media","slds-m-bottom--small","slds-media--center"],[1,"slds-media__figure"],[3,"module"],[1,"slds-media__body"],[1,"slds-text-heading--medium","slds-hyphenate"],["href","javascript:void(0);",3,"click"],[1,"slds-grid","slds-wrap","slds-grid--pull-padded"],["class","slds-p-horizontal--small slds-size--1-of-2 slds-p-bottom--x-small",4,"ngFor","ngForOf"],[1,"slds-p-horizontal--small","slds-size--1-of-2","slds-p-bottom--x-small"],[3,"fieldname","fieldconfig"],[3,"field","fieldconfig","fielddisplayclass"]],template:function(e,t){1&e&&(m.TgZ(0,"div",0)(1,"div",1),m._UZ(2,"system-icon",2),m.qZA(),m.TgZ(3,"div",3)(4,"p",4)(5,"a",5),m.NdJ("click",(function(){return t.model.goDetail()})),m._uU(6),m.qZA()()()(),m.TgZ(7,"div",6),m.YNc(8,Qr,6,5,"div",7),m.qZA()),2&e&&(m.xp6(2),m.Q6J("module",t.model.module),m.xp6(4),m.Oqu(t.model.data.summary_text),m.xp6(2),m.Q6J("ngForOf",t.fields))},dependencies:[i.sg,Si.q,Ne.j,Z.f],encapsulation:2})}return ObjectPopoverHeader})();const jr=function(e){return{module:e,id:null,data:null}};function Br(e,t){if(1&e&&(m.TgZ(0,"th",15),m._UZ(1,"field-label",16),m.qZA()),2&e){const e=t.$implicit,s=m.oxw(2);m.Q6J("system-model-provider",m.VKq(3,jr,s.module)),m.xp6(1),m.Q6J("fieldname",e.field)("fieldconfig",e.fieldconfig)}}function Gr(e,t){1&e&&(m.TgZ(0,"th"),m._UZ(1,"field-label",17),m.qZA())}function Pr(e,t){if(1&e&&(m.TgZ(0,"thead")(1,"tr"),m.YNc(2,Br,2,5,"th",14),m.YNc(3,Gr,2,0,"th",8),m.qZA()()),2&e){const e=m.oxw();m.xp6(2),m.Q6J("ngForOf",e.listFields),m.xp6(1),m.Q6J("ngIf",0==e.listFields.length)}}function Hr(e,t){if(1&e){const e=m.EpF();m.TgZ(0,"td",22)(1,"system-checkbox",23),m.NdJ("ngModelChange",(function(t){m.CHM(e);const s=m.oxw().$implicit;return m.KtG(s.selected=t)})),m.qZA()()}if(2&e){const e=m.oxw().$implicit;m.xp6(1),m.Q6J("ngModel",e.selected)}}function zr(e,t){if(1&e&&(m.TgZ(0,"td",24),m._UZ(1,"field-container",25),m.qZA()),2&e){const e=t.$implicit;m.xp6(1),m.Q6J("field",e.field)("fieldconfig",e.fieldconfig)}}function Vr(e,t){1&e&&(m.TgZ(0,"td",24),m._UZ(1,"field-container",26),m.qZA())}const $r=function(e,t,s){return{module:e,id:t,data:s}};function Kr(e,t){if(1&e){const e=m.EpF();m.TgZ(0,"tr",18),m.NdJ("click",(function(){const t=m.CHM(e).$implicit,s=m.oxw();return m.KtG(s.onRowClick(t))})),m.YNc(1,Hr,2,1,"td",19),m.YNc(2,zr,2,2,"td",20),m.YNc(3,Vr,2,0,"td",21),m.qZA()}if(2&e){const e=t.$implicit,s=m.oxw();m.Udp("cursor",s.multiselect?"initial":"pointer"),m.Q6J("system-model-provider",m.kEZ(6,$r,s.module,e.id,e)),m.xp6(1),m.Q6J("ngIf",s.multiselect),m.xp6(1),m.Q6J("ngForOf",s.listFields),m.xp6(1),m.Q6J("ngIf",0==s.listFields.length)}}const Xr=function(e,t,s){return{"slds-no-row-hover":e,singleselect:t,"slds-table--header-fixed":s}};let Wr=(()=>{class ObjectSelectBeanListModal{layout;model;view;metadata;module;multiselect=!1;listFields=[];listData;selectedIds$=new Gs.x;selectedIds=[];self;constructor(e,t,s,i){this.layout=e,this.model=t,this.view=s,this.metadata=i}get smallView(){return"small"==this.layout.screenwidth}ngOnInit(){this.view.displayLabels=!1;const e=this.metadata.getComponentConfig("ObjectSelectBeanListModal",this.model.module);e&&(this.listFields=this.metadata.getFieldSetItems(e))}close(){this.selectedIds$.next(void 0),this.selectedIds$.complete(),this.self.destroy()}onRowClick(e){this.multiselect||(this.selectedIds=[e.id],this.confirmSelection())}confirmSelection(){this.selectedIds$.next(this.selectedIds),this.selectedIds$.complete(),this.self.destroy()}static ɵfac=function(e){return new(e||ObjectSelectBeanListModal)(m.Y36(x.b),m.Y36(h.o),m.Y36(Oe.e),m.Y36(b.Pu))};static ɵcmp=m.Xpm({type:ObjectSelectBeanListModal,selectors:[["object-select-bean-list-modal"]],features:[m._Bn([Oe.e])],decls:16,vars:9,consts:[["size","large"],[3,"close"],["label","LBL_MAKE_SELECTION"],["margin","none",3,"grow"],[1,"slds-height_full"],[1,"slds-is-relative"],[1,"slds-scrollable--y","slds-height_full"],["role","listbox",1,"slds-table","slds-table--fixed-layout","slds-table--bordered","slds-max-medium-table--stacked-horizontal",3,"ngClass"],[4,"ngIf"],["class","slds-hint-parent slds-p-horizontal--x-small",3,"system-model-provider","cursor","click",4,"ngFor","ngForOf"],[1,"slds-button","slds-button--neutral",3,"click"],["label","LBL_CANCEL"],[1,"slds-button","slds-button--brand",3,"disabled","click"],["label","LBL_SELECT"],["scope","col","class","slds-resizable",3,"system-model-provider",4,"ngFor","ngForOf"],["scope","col",1,"slds-resizable",3,"system-model-provider"],["addclasses","slds-truncate slds-p-vertical--xx-small slds-p-horizontal--x-small",3,"fieldname","fieldconfig"],["fieldname","name","addclasses","slds-truncate slds-p-vertical--xx-small slds-p-horizontal--x-small"],[1,"slds-hint-parent","slds-p-horizontal--x-small",3,"system-model-provider","click"],["role","gridcell","class","slds-show--medium",4,"ngIf"],["style","min-width: 2rem",4,"ngFor","ngForOf"],["style","min-width: 2rem",4,"ngIf"],["role","gridcell",1,"slds-show--medium"],[3,"ngModel","ngModelChange"],[2,"min-width","2rem"],["fielddisplayclass","slds-truncate slds-p-horizontal--x-small",3,"field","fieldconfig"],["field","name","fielddisplayclass","slds-truncate slds-p-horizontal--x-small"]],template:function(e,t){1&e&&(m.TgZ(0,"system-modal",0)(1,"system-modal-header",1),m.NdJ("close",(function(){return t.close()})),m._UZ(2,"system-label",2),m.qZA(),m.TgZ(3,"system-modal-content",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"table",7),m.YNc(8,Pr,4,2,"thead",8),m.TgZ(9,"tbody"),m.YNc(10,Kr,4,10,"tr",9),m.qZA()()()()()(),m.TgZ(11,"system-modal-footer")(12,"button",10),m.NdJ("click",(function(){return t.close()})),m._UZ(13,"system-label",11),m.qZA(),m.TgZ(14,"button",12),m.NdJ("click",(function(){return t.confirmSelection()})),m._UZ(15,"system-label",13),m.qZA()()()),2&e&&(m.xp6(3),m.Q6J("grow",!0),m.xp6(4),m.Q6J("ngClass",m.kEZ(5,Xr,t.multiselect,!t.multiselect,!t.smallView)),m.xp6(1),m.Q6J("ngIf",!t.smallView),m.xp6(2),m.Q6J("ngForOf",t.listData),m.xp6(4),m.Q6J("disabled",0==t.selectedIds.length))},dependencies:[i.mk,i.sg,i.O5,l.JJ,l.On,Si.q,Ne.j,ri.U,I._,Fe.j,qe.x,Ee.p,Ye.y,Vs.u],encapsulation:2})}return ObjectSelectBeanListModal})(),ec=(()=>{class ObjectActionHelpTextButton{modal;injector;language;toast;actionconfig="";constructor(e,t,s,i){this.modal=e,this.injector=t,this.language=s,this.toast=i}execute(){this.actionconfig.helpLabel?this.modal.openModal("ObjectHelpTextModal",!0,this.injector).subscribe((e=>{""!=this.actionconfig&&(e.instance.helpLabel=this.actionconfig.helpLabel)})):this.toast.sendToast("LBL_HELP_LABEL_MISSING","error")}static ɵfac=function(e){return new(e||ObjectActionHelpTextButton)(m.Y36(V.o),m.Y36(m.zs3),m.Y36(g.d),m.Y36(he.A))};static ɵcmp=m.Xpm({type:ObjectActionHelpTextButton,selectors:[["object-action-help-button"]],decls:2,vars:2,consts:[["size","small",3,"icon","title"]],template:function(e,t){1&e&&(m.TgZ(0,"span"),m._UZ(1,"system-utility-icon",0),m.qZA()),2&e&&(m.xp6(1),m.Q6J("icon","in_app_assistant")("title",t.language.getLabel("LBL_HELP_BUTTON")))},dependencies:[S.r],encapsulation:2})}return ObjectActionHelpTextButton})(),tc=(()=>{class ObjectHelpTextModal{language;model;self;translation="";helpLabel="";constructor(e,t){this.language=e,this.model=t}ngOnInit(){this.initialize()}initialize(){this.translation=this.language.getLabel(this.helpLabel,this.model.module,"long")}close(){this.self.destroy()}static ɵfac=function(e){return new(e||ObjectHelpTextModal)(m.Y36(g.d),m.Y36(h.o))};static ɵcmp=m.Xpm({type:ObjectHelpTextModal,selectors:[["object-help-text-modal"]],decls:9,vars:2,consts:[["size","medium"],[3,"close"],["label","LBL_HELPTEXT"],["length","long",3,"label"],[1,"slds-button","slds-button--neutral",3,"click"],["label","LBL_CANCEL"]],template:function(e,t){1&e&&(m.TgZ(0,"system-modal",0)(1,"system-modal-header",1),m.NdJ("close",(function(){return t.close()})),m._uU(2),m._UZ(3,"system-label",2),m.qZA(),m.TgZ(4,"system-modal-content"),m._UZ(5,"system-label",3),m.qZA(),m.TgZ(6,"system-modal-footer")(7,"button",4),m.NdJ("click",(function(){return t.close()})),m._UZ(8,"system-label",5),m.qZA()()()),2&e&&(m.xp6(2),m.hij("",t.model.module," "),m.xp6(3),m.s9C("label",t.translation))},dependencies:[I._,Fe.j,qe.x,Ee.p,Ye.y],encapsulation:2})}return ObjectHelpTextModal})();function sc(e,t){1&e&&(m.ynx(0),m.TgZ(1,"system-illustration-no-records"),m._UZ(2,"system-label",10),m.qZA(),m.BQk())}function ic(e,t){if(1&e&&m._UZ(0,"object-record-fieldset",11),2&e){const e=m.oxw();m.Q6J("fieldset",e.componentConfig.fieldset)}}function nc(e,t){if(1&e&&m._UZ(0,"system-componentset",12),2&e){const e=m.oxw();m.Q6J("componentset",e.componentConfig.componentset)}}let lc=(()=>{class ObjectStatusNetworkModal{model;metadata;view;toast;language;modal;self;componentConfig;statusFieldDomain="";statusTo="";response=new Gs.x;constructor(e,t,s,i,n,l){this.model=e,this.metadata=t,this.view=s,this.toast=i,this.language=n,this.modal=l}ngOnInit(){this.view.isEditable=!0,this.view.setEditMode(),this.model.startEdit(),this.getConfig(),this.componentConfig&&this.changeStatusVal()}getConfig(){this.componentConfig||(this.componentConfig=this.metadata.getComponentConfig("ObjectStatusNetworkModal",this.model.module))}changeStatusVal(){const e=this.statusFieldDomain.split("_dom")[0];this.model.setField(e,this.statusTo)}save(){if(!this.model.validate())return;let e=this.modal.await(this.language.getLabel("LBL_SAVING"));this.model.save(!0).subscribe((t=>{e.next(!0),e.complete(),this.close()}))}close(){this.model.cancelEdit(),this.response.next(this.model.data),this.self.destroy()}static ɵfac=function(e){return new(e||ObjectStatusNetworkModal)(m.Y36(h.o),m.Y36(b.Pu),m.Y36(Oe.e),m.Y36(he.A),m.Y36(g.d),m.Y36(V.o))};static ɵcmp=m.Xpm({type:ObjectStatusNetworkModal,selectors:[["object-status-network-modal"]],features:[m._Bn([h.o,Oe.e])],decls:15,vars:4,consts:[["size","medium"],[3,"close"],[4,"ngIf"],["direction","vertical",3,"fieldset",4,"ngIf"],[3,"componentset",4,"ngIf"],[1,"slds-is-absolute"],[1,"slds-col--bump-left","slds-button","slds-button--neutral",3,"click"],["label","LBL_CANCEL"],[1,"slds-col--bump-left","slds-button","slds-button--brand",3,"click"],["label","LBL_SAVE"],["label","MSG_NO_RECORDS_FOUND"],["direction","vertical",3,"fieldset"],[3,"componentset"]],template:function(e,t){1&e&&(m.TgZ(0,"system-modal",0)(1,"system-modal-header",1),m.NdJ("close",(function(){return t.close()})),m._uU(2),m.qZA(),m.TgZ(3,"system-modal-content"),m.YNc(4,sc,3,0,"ng-container",2),m.YNc(5,ic,1,1,"object-record-fieldset",3),m.YNc(6,nc,1,1,"system-componentset",4),m.qZA(),m.TgZ(7,"system-modal-footer")(8,"div",5),m._UZ(9,"object-record-messages-badge"),m.qZA(),m.TgZ(10,"div")(11,"button",6),m.NdJ("click",(function(){return t.close()})),m._UZ(12,"system-label",7),m.qZA(),m.TgZ(13,"button",8),m.NdJ("click",(function(){return t.save()})),m._UZ(14,"system-label",9),m.qZA()()()()),2&e&&(m.xp6(2),m.Oqu(t.model.module),m.xp6(2),m.Q6J("ngIf",!(null!=t.componentConfig&&t.componentConfig.fieldset||null!=t.componentConfig&&t.componentConfig.componentset)),m.xp6(1),m.Q6J("ngIf",null==t.componentConfig?null:t.componentConfig.fieldset),m.xp6(1),m.Q6J("ngIf",null==t.componentConfig?null:t.componentConfig.componentset))},dependencies:[i.O5,Ki.E,wd.C,I._,Fe.j,qe.x,Ee.p,Ye.y,js.d,si.Z],encapsulation:2})}return ObjectStatusNetworkModal})(),oc=(()=>{class ObjectStatusNetworkOpenModalButton extends Gl.Y{metadata;model;injector;modal;language;view;constructor(e,t,s,i,n,l){super(n,e,i,t,s),this.metadata=e,this.model=t,this.injector=s,this.modal=i,this.language=n,this.view=l}execute(){this.modal.openModal("ObjectStatusNetworkModal",!0,this.injector).subscribe((e=>{e.instance.componentConfig=JSON.parse(this.item.componentconfig),e.instance.statusFieldDomain=this.item.domain,e.instance.statusTo=this.item.status_to,e.instance.model.id=this.model.id,e.instance.model.module=this.model.module,e.instance.model.initialize(),e.instance.model.setFields(this.model.data,!0),e.instance.response.subscribe({next:e=>{e&&this.model.setData(e)}})}))}static ɵfac=function(e){return new(e||ObjectStatusNetworkOpenModalButton)(m.Y36(b.Pu),m.Y36(h.o),m.Y36(m.zs3),m.Y36(V.o),m.Y36(g.d),m.Y36(Oe.e))};static ɵcmp=m.Xpm({type:ObjectStatusNetworkOpenModalButton,selectors:[["object-status-network-open-modal-button"]],features:[m.qOj],decls:2,vars:1,consts:[[3,"label"]],template:function(e,t){1&e&&(m.TgZ(0,"span"),m._UZ(1,"system-label",0),m.qZA()),2&e&&(m.xp6(1),m.Q6J("label",t.item.action_label))},dependencies:[I._],encapsulation:2})}return ObjectStatusNetworkOpenModalButton})();var ac=s(31106),dc=s(71651),rc=s(23171);let cc=(()=>{class ObjectUrlActionMenu{broadcast;modelurls;language;elementRef;modal;injector;model;url;constructor(e,t,s,i,n,l,o){this.broadcast=e,this.modelurls=t,this.language=s,this.elementRef=i,this.modal=n,this.injector=l,this.model=o}getDropdownLocationClass(){let e=this.elementRef.nativeElement.getBoundingClientRect();if(window.innerHeight-e.bottom<100)return"slds-dropdown--bottom"}deleteFile(){this.modal.confirm(this.language.getLabel("QST_DELETE_FILE"),this.language.getLabel("QST_DELETE_FILE",null,"short")).subscribe((e=>{e&&this.modelurls.deleteUrl(this.url.id)}))}edit(){this.modal.openModal("SpiceUrlsEditModal",!0,this.injector).subscribe((e=>{e.instance.url=this.url,e.instance.inputData={url:this.url.url,description:this.url.description,url_name:this.url.url_name}}))}static ɵfac=function(e){return new(e||ObjectUrlActionMenu)(m.Y36(ye.f),m.Y36(dc.g),m.Y36(g.d),m.Y36(m.SBq),m.Y36(V.o),m.Y36(m.zs3),m.Y36(h.o))};static ɵcmp=m.Xpm({type:ObjectUrlActionMenu,selectors:[["object-url-action-menu"]],inputs:{url:"url"},decls:13,vars:2,consts:[["system-dropdown-trigger","",1,"slds-dropdown-trigger","slds-dropdown-trigger--click"],["aria-haspopup","true",1,"slds-button","slds-button--icon-border-filled","slds-button--icon-x-small"],[3,"icon"],[1,"slds-dropdown","slds-dropdown--right",3,"ngClass"],["role","menu",1,"slds-dropdown__list"],["role","presentation",1,"slds-dropdown__item",3,"click"],["href","javascript:void(0);","role","menuitem","tabindex","0"],[1,"slds-truncate"],["label","LBL_EDIT"],["href","javascript:void(0);","role","menuitem","tabindex","-1"],["label","LBL_DELETE"]],template:function(e,t){1&e&&(m.TgZ(0,"div",0)(1,"button",1),m._UZ(2,"system-button-icon",2),m.qZA(),m.TgZ(3,"div",3)(4,"ul",4)(5,"li",5),m.NdJ("click",(function(){return t.edit()})),m.TgZ(6,"a",6)(7,"span",7),m._UZ(8,"system-label",8),m.qZA()()(),m.TgZ(9,"li",5),m.NdJ("click",(function(){return t.deleteFile()})),m.TgZ(10,"a",9)(11,"span",7),m._UZ(12,"system-label",10),m.qZA()()()()()()),2&e&&(m.xp6(2),m.Q6J("icon","down"),m.xp6(1),m.Q6J("ngClass",t.getDropdownLocationClass()))},dependencies:[i.mk,w.J,I._,rs.l],encapsulation:2})}return ObjectUrlActionMenu})();const uc=["object-related-card-url",""];function mc(e,t){if(1&e&&(m.TgZ(0,"a",11),m._uU(1),m.qZA()),2&e){const e=m.oxw();m.xp6(1),m.hij(" ",e.url.url_name,"")}}function gc(e,t){if(1&e&&(m.TgZ(0,"a",11),m._uU(1),m.qZA()),2&e){const e=m.oxw();m.xp6(1),m.Oqu(e.url.url)}}function hc(e,t){if(1&e&&(m.TgZ(0,"div",12),m._UZ(1,"object-url-action-menu",13),m.qZA()),2&e){const e=m.oxw();m.xp6(1),m.Q6J("url",e.url)}}function pc(e,t){if(1&e&&(m.TgZ(0,"div",18),m._uU(1),m.qZA()),2&e){const e=m.oxw(2);m.Q6J("system-title",e.url.url),m.xp6(1),m.Oqu(e.url.url)}}function fc(e,t){if(1&e&&(m.TgZ(0,"div",14)(1,"ul",15)(2,"li",16),m._uU(3),m.qZA()(),m.YNc(4,pc,2,2,"div",17),m.qZA()),2&e){const e=m.oxw();m.xp6(2),m.Q6J("system-title",e.urlDate),m.xp6(1),m.Oqu(e.urlDate),m.xp6(1),m.Q6J("ngIf",!!e.url.url_name)}}function bc(e,t){if(1&e&&(m.TgZ(0,"div",4)(1,"div",19)(2,"span",20)(3,"span",21),m._uU(4,"Progress: 25%"),m.qZA()()(),m.TgZ(5,"div",22),m._uU(6),m.qZA()()),2&e){const e=m.oxw();m.xp6(2),m.Q6J("ngStyle",e.progressbarstyle),m.xp6(4),m.hij(" ",e.url.uploadprogress," % ")}}let _c=(()=>{class ObjectRelatedCardUrl{modelurls;userpreferences;toast;url={};constructor(e,t,s){this.modelurls=e,this.userpreferences=t,this.toast=s}get urlDate(){return this.url.date?this.url.date.format(this.userpreferences.getDateFormat()):""}get uploading(){return this.url.hasOwnProperty("uploadprogress")}get progressbarstyle(){return{width:this.url.uploadprogress+"%"}}openUrl(){this.uploading?this.toast.sendToast("LBL_UPLOAD_IN_PROGRESS","info"):this.url&&window.open(this.url.url,"_blank").focus()}static ɵfac=function(e){return new(e||ObjectRelatedCardUrl)(m.Y36(dc.g),m.Y36(L.z),m.Y36(he.A))};static ɵcmp=m.Xpm({type:ObjectRelatedCardUrl,selectors:[["","object-related-card-url",""]],inputs:{url:"url"},attrs:uc,decls:12,vars:6,consts:[[1,"slds-media","slds-truncate",2,"width","300px"],[1,"slds-m-right--x-small","slds-align--absolute-center",2,"width","30px","height","30px"],["size","'small'"],[1,"slds-media__body",2,"width","260px"],[1,"slds-grid","slds-grid_vertical-align-center","slds-grid--align-spread","slds-has-flexi-truncate"],[1,"slds-truncate","slds-text-heading--x-small","slds-p-right--xxx-small",3,"system-title","click"],["href","javascript:void(0);",4,"ngIf","ngIfElse"],["urlNameContainer",""],["class","slds-shrink-none",4,"ngIf"],["class","slds-tile__detail slds-text-body--small",4,"ngIf"],["class","slds-grid slds-grid_vertical-align-center slds-grid--align-spread slds-has-flexi-truncate",4,"ngIf"],["href","javascript:void(0);"],[1,"slds-shrink-none"],[3,"url"],[1,"slds-tile__detail","slds-text-body--small"],[1,"slds-list--vertical"],[1,"slds-item",3,"system-title"],["class","slds-text-color--inverse-weak slds-truncate",3,"system-title",4,"ngIf"],[1,"slds-text-color--inverse-weak","slds-truncate",3,"system-title"],[1,"slds-progress-bar"],[1,"slds-progress-bar__value",3,"ngStyle"],[1,"slds-assistive-text"],[1,"slds-text-align--right",2,"width","50px"]],template:function(e,t){if(1&e&&(m.TgZ(0,"div",0)(1,"div",1),m._UZ(2,"system-file-icon",2),m.qZA(),m.TgZ(3,"div",3)(4,"div",4)(5,"h3",5),m.NdJ("click",(function(){return t.openUrl()})),m.YNc(6,mc,2,1,"a",6),m.YNc(7,gc,2,1,"ng-template",null,7,m.W1O),m.qZA(),m.YNc(9,hc,2,1,"div",8),m.qZA(),m.YNc(10,fc,5,3,"div",9),m.YNc(11,bc,7,2,"div",10),m.qZA()()),2&e){const e=m.MAs(8);m.xp6(5),m.Q6J("system-title",t.url.description),m.xp6(1),m.Q6J("ngIf",!!t.url.url_name)("ngIfElse",e),m.xp6(3),m.Q6J("ngIf",!t.uploading),m.xp6(1),m.Q6J("ngIf",!t.uploading),m.xp6(1),m.Q6J("ngIf",t.uploading)}},dependencies:[i.O5,i.PC,ds.T,C.S,cc],encapsulation:2})}return ObjectRelatedCardUrl})();const vc=["urlupload"];function yc(e,t){if(1&e&&(m.TgZ(0,"a",9)(1,"span",10),m._UZ(2,"system-label",11),m._uU(3),m.qZA()()),2&e){const e=m.oxw();m.xp6(2),m.Q6J("label",e.componentconfig.label?e.componentconfig.label+"":"LBL_URLS"),m.xp6(1),m.hij(" (",e.modelurls.urls.length,")")}}function xc(e,t){if(1&e&&(m.TgZ(0,"span",10),m._UZ(1,"system-label",11),m._uU(2),m.qZA()),2&e){const e=m.oxw();m.xp6(1),m.Q6J("label",e.componentconfig.label?e.componentconfig.label+"":"LBL_URLS"),m.xp6(1),m.hij(" ",e.modelurls.urls.length,")")}}function wc(e,t){if(1&e){const e=m.EpF();m.TgZ(0,"system-utility-icon",12),m.NdJ("click",(function(t){m.CHM(e);const s=m.oxw();return m.KtG(s.toggleOpen(t))})),m.qZA()}if(2&e){const e=m.oxw();m.Q6J("@animateicon",e.isopen?"open":"closed")}}function Zc(e,t){if(1&e&&m._UZ(0,"div",17),2&e){const e=t.$implicit;m.Q6J("url",e)}}function Tc(e,t){1&e&&(m.TgZ(0,"div",18),m._UZ(1,"system-spinner"),m.qZA())}function Cc(e,t){if(1&e&&(m.TgZ(0,"div",13)(1,"div",14),m.YNc(2,Zc,1,1,"div",15),m.qZA(),m.YNc(3,Tc,2,0,"div",16),m.qZA()),2&e){const e=m.oxw();m.Q6J("@displaycard",void 0),m.xp6(2),m.Q6J("ngForOf",e.urls),m.xp6(1),m.Q6J("ngIf",e.modelurls.loading)}}let kc=(()=>{class ObjectRelatedListUrls{modelurls;language;model;renderer;toast;footer;broadcast;elementRef;urls=[];urlupload;isopen=!0;componentconfig={};broadcastSubscription={};subscriptions=new B.w0;constructor(e,t,s,i,n,l,o,a){this.modelurls=e,this.language=t,this.model=s,this.renderer=i,this.toast=n,this.footer=l,this.broadcast=o,this.elementRef=a,this.broadcastSubscription=this.broadcast.message$.subscribe((e=>{this.handleMessage(e)}))}get width(){return this.elementRef.nativeElement.getBoundingClientRect().width}ngAfterViewInit(){this.setModelData(),setTimeout((()=>this.loadUrls()),10),this.subscriptions.add(this.broadcast.message$.subscribe((e=>this.handleMessage(e))))}handleMessage(e){if("model.merge"==e.messagetype&&e.messagedata.module==this.model.module&&e.messagedata.id==this.model.id&&this.loadUrls(),"urls.loaded"===e.messagetype)e.messagedata.reload&&(this.urls=this.modelurls.urls)}loadUrls(){this.modelurls.getUrls().subscribe((e=>{this.urls=e}))}setModelData(){this.modelurls.module=this.model.module,this.modelurls.id=this.model.id}toggleOpen(e){e.stopPropagation(),this.isopen=!this.isopen}urlDrop(e){if(this.componentconfig.disableupload&&!0===this.componentconfig.disableupload)return this.toast.sendToast(this.language.getLabel("LBL_UPLOAD_IS_DISABLED"),"error"),!1;const t=e.getData("URL");t&&this.modelurls.prepareUrlForSave(t)}selectUrl(){let e=new MouseEvent("click",{bubbles:!0});this.urlupload.element.nativeElement.dispatchEvent(e)}ngOnDestroy(){this.broadcastSubscription.unsubscribe()}static ɵfac=function(e){return new(e||ObjectRelatedListUrls)(m.Y36(dc.g),m.Y36(g.d),m.Y36(h.o),m.Y36(m.Qsj),m.Y36(he.A),m.Y36(os.M),m.Y36(ye.f),m.Y36(m.SBq))};static ɵcmp=m.Xpm({type:ObjectRelatedListUrls,selectors:[["object-related-list-urls"]],viewQuery:function(e,t){if(1&e&&m.Gf(vc,7,m.s_b),2&e){let e;m.iGM(e=m.CRH())&&(t.urlupload=e.first)}},inputs:{componentconfig:"componentconfig"},features:[m._Bn([dc.g])],decls:10,vars:6,consts:[[1,"slds-card","slds-card_boundary","slds-m-bottom--medium",3,"system-drop-url"],[1,"slds-card__header","slds-grid"],[1,"slds-size--1-of-1","slds-grid","slds-grid--vertical-align-center"],[3,"icon","size"],[1,"slds-media__body","slds-truncate","slds-grid","slds-grid--vertical-align-center"],["href","javascript:void(0);","class","slds-text-link--reset",4,"ngIf"],["class","slds-text-heading--small",4,"ngIf"],["class","slds-m-horizontal--xx-small","icon","up","size","x-small",3,"click",4,"ngIf"],["class","slds-card__body slds-card__body_inner",4,"ngIf"],["href","javascript:void(0);",1,"slds-text-link--reset"],[1,"slds-text-heading--small"],[3,"label"],["icon","up","size","x-small",1,"slds-m-horizontal--xx-small",3,"click"],[1,"slds-card__body","slds-card__body_inner"],[1,"slds-card__body--inner","slds-grid","slds-wrap","slds-grid--pull-padded"],["object-related-card-url","","class","slds-tile slds-card__tile slds-p-horizontal--small slds-hint-parent",3,"url",4,"ngFor","ngForOf"],["class","slds-p-around--large slds-align--absolute-center",4,"ngIf"],["object-related-card-url","",1,"slds-tile","slds-card__tile","slds-p-horizontal--small","slds-hint-parent",3,"url"],[1,"slds-p-around--large","slds-align--absolute-center"]],template:function(e,t){1&e&&(m.TgZ(0,"div",0),m.NdJ("system-drop-url",(function(e){return t.urlDrop(e)})),m.TgZ(1,"div",1)(2,"header",2),m._UZ(3,"system-icon",3),m.TgZ(4,"div",4)(5,"h2"),m.YNc(6,yc,4,2,"a",5),m.YNc(7,xc,3,2,"span",6),m.qZA(),m.YNc(8,wc,1,1,"system-utility-icon",7),m.qZA()()(),m.YNc(9,Cc,4,3,"div",8),m.qZA()),2&e&&(m.xp6(3),m.Q6J("icon","channel_program_history")("size","small"),m.xp6(3),m.Q6J("ngIf",!t.componentconfig.alwaysExpanded),m.xp6(1),m.Q6J("ngIf",t.componentconfig.alwaysExpanded),m.xp6(1),m.Q6J("ngIf",t.modelurls.urls.length>0&&!t.componentconfig.alwaysExpanded),m.xp6(1),m.Q6J("ngIf",t.isopen))},dependencies:[i.sg,i.O5,Z.f,I._,Mt.W,S.r,rc.F,_c],encapsulation:2,data:{animation:[(0,f.X$)("animateicon",[(0,f.SB)("open",(0,f.oB)({transform:"scale(1, 1)"})),(0,f.SB)("closed",(0,f.oB)({transform:"scale(1, -1)"})),(0,f.eR)("open => closed",[(0,f.jt)(".5s")]),(0,f.eR)("closed => open",[(0,f.jt)(".5s")])]),(0,f.X$)("displaycard",[(0,f.eR)(":enter",[(0,f.oB)({opacity:0,height:"0px",overflow:"hidden"}),(0,f.jt)(".5s",(0,f.oB)({height:"*",opacity:1})),(0,f.oB)({overflow:"unset"})]),(0,f.eR)(":leave",[(0,f.oB)({overflow:"hidden"}),(0,f.jt)(".5s",(0,f.oB)({height:"0px",opacity:0}))])])]}})}return ObjectRelatedListUrls})(),Ac=(()=>{class ObjectComponents{static ɵfac=function(e){return new(e||ObjectComponents)};static ɵmod=m.oAB({type:ObjectComponents});static ɵinj=m.cJS({imports:[i.ez,n._t,l.u5,d.ObjectFields,r.SystemComponents,a.o,c.Cl,o.Bz]})}return ObjectComponents})();("undefined"==typeof ngJitMode||ngJitMode)&&m.kYT(Ac,{declarations:[Wr,Te,Ae,k.l,_e,A.M,O,ve.s,Ie.p,Se._,N.S,Le.s,Me.g,Je,De,Ue,Qe,Re,p,He,ze,Ve,$e,Ke,Xe,We,et.B,st,it.g,nt.H,lt.z,ot,dt,F.X,R,E.i,Yi.Q,Di.C,Ui.V,Y.w,j,ge,z,K,oe,pe,ji,Hi,ut,mt,Gt,zt,Vt,pt,ft,vt,Tt,Ct,It,Et,la,Ut,yt,Rt,Xt,es,Wt,is,mn,di,Ii,zs.Z,ki,ti,Ei,Mi,Oi,Vi,Xi,en,tn,sn,gn.Y,hn.d,Cn,En,qn,An,Vn,Dn,Rn,al,Kn,Wn,hl,bl.E,pl.g,fl.C,_l.s,Tl,Cl.X,Nl,Il,Rs,Is,Ul,Xs,Rl,yl.K,jl,Bl.Q,cs,so.F,ao,mo,go.b,Zo,ko,Ao,to,Wl,Fo,Eo,Yo,Qo.X,Do.x,Uo.D,jo,ts.T,ss.U,ns,Bs,Fl,Ko,$o,Go,js.d,Hl.f,an.Z,Kl,ca,ua,Pl.n,Gl.Y,u.E,hi,Ci,Sr,qd,Wd,rd,bd,sr,xd,yr,nr,Nr,ar,ya,ga,Za,Ma,Ca,si.Z,Ja,Da,Wa,Dr,Rr,ec,tc,lc,oc,ac.V,Rr,kc,_c,cc],imports:[i.ez,n._t,l.u5,d.ObjectFields,r.SystemComponents,a.o,c.Cl,o.Bz],exports:[_e,ve.s,et.B,gn.Y,En,qn,N.S,it.g,nt.H,jo,_l.s,yl.K,Cl.X,js.d,Hl.f,an.Z,ca,Rn,hi,Ci,bl.E,pl.g,fl.C,Il,so.F,go.b,zs.Z,Ie.p,Me.g,si.Z,Rs,k.l,E.i,F.X,A.M,Se._,Rs,u.E,hn.d,Qo.X,Do.x,Uo.D,ga,Wa,kc,_c]})},7443:(e,t,s)=>{"use strict";s.d(t,{E:()=>n});var i=s(62242);let n=(()=>{class ObjectKeyValuesPipe{transform(e){let t=[];for(let s in e)t.push({key:s,value:e[s]});return t}static ɵfac=function(e){return new(e||ObjectKeyValuesPipe)};static ɵpipe=i.Yjl({name:"objectkeyvalues",type:ObjectKeyValuesPipe,pure:!0})}return ObjectKeyValuesPipe})()},33634:(e,t,s)=>{"use strict";s.d(t,{j:()=>u});var i=s(62242),n=s(55710),l=s(55329),o=s(4154),a=s(32294),d=s(44755);const r=["fieldcontainer"],c=function(e){return{"slds-hidden":e}};let u=(()=>{class fieldContainer{model;language;metadata;view;fieldcontainer;field;fieldconfig={};fielddisplayclass="slds-text-body--regular slds-truncate slds-m-vertical--small spice-fieldbody";constructor(e,t,s,i){this.model=e,this.language=t,this.metadata=s,this.view=i}set fieldname(e){this.field=e}get fieldname(){return this.field}get stati(){return this.model.getFieldStati(this.field)}ngAfterViewInit(){this.buildContainer()}buildContainer(){this.metadata.addComponent(this.getFieldType(),this.fieldcontainer).subscribe((e=>{e.instance.fieldname=this.field,e.instance.fieldconfig=this.fieldconfig,e.instance.fielddisplayclass=this.fielddisplayclass}))}getFieldType(){let e="";if(!this.model.checkFieldAccess(this.field))return"fieldNotAuthorized";e="blank"===this.field?"blank":this.fieldconfig.fieldtype?this.fieldconfig.fieldtype:this.metadata.getFieldType(this.model.module,this.field);let t=this.metadata.getFieldTypeComponent(e);return t||"fieldGeneric"}static ɵfac=function(e){return new(e||fieldContainer)(i.Y36(n.o),i.Y36(l.d),i.Y36(o.Pu),i.Y36(a.e))};static ɵcmp=i.Xpm({type:fieldContainer,selectors:[["field-container"]],viewQuery:function(e,t){if(1&e&&i.Gf(r,7,i.s_b),2&e){let e;i.iGM(e=i.CRH())&&(t.fieldcontainer=e.first)}},inputs:{field:"field",fieldconfig:"fieldconfig",fielddisplayclass:"fielddisplayclass",fieldname:"fieldname"},decls:3,vars:3,consts:[[3,"ngClass"],["fieldcontainer",""]],template:function(e,t){1&e&&(i.TgZ(0,"div",0),i._UZ(1,"div",null,1),i.qZA()),2&e&&i.Q6J("ngClass",i.VKq(1,c,t.stati.hidden))},dependencies:[d.mk],encapsulation:2})}return fieldContainer})()},61810:(e,t,s)=>{"use strict";s.d(t,{O:()=>v});var i=s(62242),n=s(50727),l=s(55710),o=s(32294),a=s(55329),d=s(4154),r=s(83348),c=s(44755),u=s(95030),m=s(66367),g=s(73208),h=s(55638);const p=["focus"];function f(e,t){if(1&e&&i._UZ(0,"field-label",3),2&e){const e=i.oxw();i.Q6J("fieldname",e.fieldname)("fieldconfig",e.fieldconfig)}}function b(e,t){if(1&e&&(i.TgZ(0,"field-generic-display",4),i._uU(1),i.qZA()),2&e){const e=i.oxw();i.Q6J("fielddisplayclass",e.fielddisplayclass)("editable",e.isEditable())("fieldconfig",e.fieldconfig)("title",e.value)("fieldid",e.fieldid),i.xp6(1),i.hij(" ",e.value,"\n")}}function _(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"div",5)(1,"input",6,7),i.NdJ("ngModelChange",(function(t){i.CHM(e);const s=i.oxw();return i.KtG(s.value=t)})),i.qZA(),i._UZ(3,"field-messages",8),i.qZA()}if(2&e){const e=i.oxw();i.Q6J("ngClass",e.css_classes),i.xp6(1),i.Q6J("placeholder",e.displayLabel?"":e.language.getFieldDisplayName(e.model.module,e.fieldname))("ngModel",e.value)("maxlength",e.fieldlength)("autocomplete",e.fieldid)("ngModelOptions",e.modelOptions),i.xp6(2),i.Q6J("fieldname",e.fieldname)}}let v=(()=>{class fieldGeneric{model;view;language;metadata;router;focuselement;fieldname="";fieldconfig={};fielddisplayclass="";fieldid="";fielddefs={};fieldlength=999;subscriptions=new n.w0;constructor(e,t,s,i,n){this.model=e,this.view=t,this.language=s,this.metadata=i,this.router=n,this.fieldid=this.model.generateGuid()}handleViewModeChange(e){"edit"==e&&this.view.editfieldid&&this.view.editfieldid==this.fieldid&&this.setFocus()}_field_defs;get field_defs(){return this._field_defs||(this._field_defs=this.metadata.getFieldDefs(this.model.module,this.fieldname)),this._field_defs}_css_classes=[];get css_classes(){return this.getStati().invalid?this.addCssClass("slds-has-error"):this.removeCssClass("slds-has-error"),this._css_classes}get modelOptions(){return{updateOn:"blur"}}get value(){return this.model.getField(this.fieldname)}set value(e){this.model.setField(this.fieldname,e)}get errors(){return this.model.getFieldMessages(this.fieldname,"error")}get displayLabel(){return this.view.displayLabels&&!0!==this.fieldconfig.hidelabel}ngOnInit(){this.fielddefs=this.metadata.getFieldDefs(this.model.module,this.fieldname),this.fielddefs&&this.fielddefs.len&&(this.fieldlength=this.fielddefs.len),this.subscriptions.add(this.view.mode$.subscribe((e=>this.handleViewModeChange(e))))}ngAfterViewInit(){this.view.isEditMode()&&this.view.editfieldname&&this.view.editfieldname==this.fieldname&&this.setFocus()}setFocus(){setTimeout((()=>{this.focuselement&&this.focuselement.element.nativeElement.focus()}))}getStati(e=this.fieldname){let t=this.model.getFieldStati(e);return t.editable&&(!this.view.isEditable||t.readonly||this.fieldconfig.readonly)&&(t.editable=!1),t}isEditable(e=this.fieldname){return(this.model.checkAccess("edit")||this.model.checkAccess("create"))&&this.getStati(e).editable&&!this.getStati(e).readonly&&!this.getStati(e).disabled&&!this.getStati(e).hidden}isEditMode(){return this.view.isEditMode()&&this.isEditable()}displayLink(){try{return this.view.displayLinks&&this.fieldconfig.link&&this.model.checkAccess("detail")}catch(e){return!1}}setEditMode(){this.model.startEdit(),this.view.setEditMode()}getFieldClass(){return this.css_classes}fieldHasError(e){return this.hasFieldErrors(e)}hasFieldErrors(e=this.fieldname){return!(!this.getStati(e).invalid&&!this.errors)}goRecord(){this.router.navigate(["/module/"+this.model.module+"/"+this.model.id])}addCssClass(e){return this._css_classes.includes(e)||this._css_classes.push(e),!0}removeCssClass(e){return this._css_classes.includes(e)&&this._css_classes.splice(this._css_classes.indexOf(e),1),!0}toggleCssClass(e){return this._css_classes.includes(e)?this.removeCssClass(e):this.addCssClass(e),!0}setFieldError(e){return this.model.setFieldMessage("error",e,this.fieldname,this.fieldid)}clearFieldError(){return this.model.resetFieldMessages(this.fieldname,"error",this.fieldid)}ngOnDestroy(){this.subscriptions.unsubscribe()}static ɵfac=function(e){return new(e||fieldGeneric)(i.Y36(l.o),i.Y36(o.e),i.Y36(a.d),i.Y36(d.Pu),i.Y36(r.F0))};static ɵcmp=i.Xpm({type:fieldGeneric,selectors:[["field-generic"]],viewQuery:function(e,t){if(1&e&&i.Gf(p,5,i.s_b),2&e){let e;i.iGM(e=i.CRH())&&(t.focuselement=e.first)}},inputs:{fieldname:"fieldname",fieldconfig:"fieldconfig",fielddisplayclass:"fielddisplayclass"},decls:3,vars:3,consts:[[3,"fieldname","fieldconfig",4,"ngIf"],[3,"fielddisplayclass","editable","fieldconfig","title","fieldid",4,"ngIf"],["class","slds-form-element__control slds-m-vertical--xx-small",3,"ngClass",4,"ngIf"],[3,"fieldname","fieldconfig"],[3,"fielddisplayclass","editable","fieldconfig","title","fieldid"],[1,"slds-form-element__control","slds-m-vertical--xx-small",3,"ngClass"],["type","text",1,"slds-input",3,"placeholder","ngModel","maxlength","autocomplete","ngModelOptions","ngModelChange"],["focus",""],[3,"fieldname"]],template:function(e,t){1&e&&(i.YNc(0,f,1,2,"field-label",0),i.YNc(1,b,2,6,"field-generic-display",1),i.YNc(2,_,4,7,"div",2)),2&e&&(i.Q6J("ngIf",t.displayLabel),i.xp6(1),i.Q6J("ngIf",!t.isEditMode()),i.xp6(1),i.Q6J("ngIf",t.isEditable()&&t.isEditMode()))},dependencies:[c.mk,c.O5,u.Fj,u.JJ,u.nD,u.On,m.q,g.D,h.a],encapsulation:2})}return fieldGeneric})()},73208:(e,t,s)=>{"use strict";s.d(t,{D:()=>w});var i=s(62242),n=s(55710),l=s(32294),o=s(55329),a=s(17017),d=s(44755),r=s(72656),c=s(12803),u=s(31790);function m(e,t){1&e&&i._UZ(0,"system-stencil")}function g(e,t){1&e&&i.GkF(0)}function h(e,t){if(1&e&&(i.TgZ(0,"span",9),i.YNc(1,g,1,0,"ng-container",10),i.qZA()),2&e){i.oxw(2);const e=i.MAs(5);i.xp6(1),i.Q6J("ngTemplateOutlet",e)}}function p(e,t){1&e&&i.GkF(0)}function f(e,t){if(1&e&&i.YNc(0,p,1,0,"ng-container",10),2&e){i.oxw(2);const e=i.MAs(5);i.Q6J("ngTemplateOutlet",e)}}function b(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"button",11),i.NdJ("click",(function(){i.CHM(e);const t=i.oxw(2);return i.KtG(t.setEditMode())})),i._UZ(1,"system-button-icon",12),i.qZA()}2&e&&(i.xp6(1),i.Q6J("icon","edit"))}const _=function(e){return{"slds-truncate":e}};function v(e,t){if(1&e&&(i.TgZ(0,"div",4)(1,"div",5),i.YNc(2,h,2,1,"span",6),i.YNc(3,f,1,1,"ng-template",null,7,i.W1O),i.qZA(),i.YNc(5,b,2,1,"button",8),i.qZA()),2&e){const e=i.MAs(4),t=i.oxw();i.xp6(1),i.Q6J("ngClass",i.VKq(5,_,t._truncate))("ngStyle",t.fieldMaxWidth),i.xp6(1),i.Q6J("ngIf",t.link)("ngIfElse",e),i.xp6(3),i.Q6J("ngIf",t.editable)}}function y(e,t){1&e&&i.Hsn(0)}const x=["*"];let w=(()=>{class fieldGenericDisplay{model;view;language;navigationtab;editable=!1;fieldconfig={};fielddisplayclass="";fieldid="";_truncate=!0;set truncate(e){this._truncate=!1}constructor(e,t,s,i){this.model=e,this.view=t,this.language=s,this.navigationtab=i}isEditMode(){return!(!this.view.isEditMode()||!this.editable)}get fieldMaxWidth(){if(this.editable)return{"max-width":"calc(100% - 20px)"}}get link(){try{return this.fieldconfig.link&&this.model.checkAccess("detail")}catch(e){return!1}}setEditMode(){this.editable&&(this.model.startEdit(),this.view.setEditMode(this.fieldid))}goRecord(){this.link&&this.model.goDetail(this.navigationtab?.tabid)}static ɵfac=function(e){return new(e||fieldGenericDisplay)(i.Y36(n.o),i.Y36(l.e),i.Y36(o.d),i.Y36(a.d,8))};static ɵcmp=i.Xpm({type:fieldGenericDisplay,selectors:[["field-generic-display"]],inputs:{editable:"editable",fieldconfig:"fieldconfig",fielddisplayclass:"fielddisplayclass",fieldid:"fieldid",truncate:["field-generic-display-notruncate","truncate"]},ngContentSelectors:x,decls:6,vars:3,consts:[[3,"ngClass","dblclick"],[4,"ngIf","ngIfElse"],["displaycontent",""],["content",""],[1,"slds-size--1-of-1","slds-grid","slds-grid--vertical-align-center","slds-grid--align-spread",2,"min-height","19px"],[1,"slds-grow",3,"ngClass","ngStyle"],["system-model-popover","",4,"ngIf","ngIfElse"],["nolink",""],["class","slds-button slds-button--icon spice-button-icon-light slds-m-left--xx-small",3,"click",4,"ngIf"],["system-model-popover",""],[4,"ngTemplateOutlet"],[1,"slds-button","slds-button--icon","spice-button-icon-light","slds-m-left--xx-small",3,"click"],[3,"icon"]],template:function(e,t){if(1&e&&(i.F$t(),i.TgZ(0,"div",0),i.NdJ("dblclick",(function(){return t.setEditMode()})),i.YNc(1,m,1,0,"system-stencil",1),i.YNc(2,v,6,7,"ng-template",null,2,i.W1O),i.YNc(4,y,1,0,"ng-template",null,3,i.W1O),i.qZA()),2&e){const e=i.MAs(3);i.Q6J("ngClass",t.fielddisplayclass),i.xp6(1),i.Q6J("ngIf",t.model.isLoading||t.view.isLoading)("ngIfElse",e)}},dependencies:[d.mk,d.O5,d.tP,d.PC,r.J,c.B,u.g],encapsulation:2})}return fieldGenericDisplay})()},66367:(e,t,s)=>{"use strict";s.d(t,{q:()=>_});var i=s(62242),n=s(55710),l=s(4154),o=s(32294),a=s(62422),d=s(55329),r=s(83917),c=s(44755),u=s(83463),m=s(7674),g=s(98594);function h(e,t){1&e&&(i.TgZ(0,"abbr",6),i._uU(1,"*"),i.qZA())}function p(e,t){if(1&e&&i._UZ(0,"system-label-fieldname",7),2&e){const e=i.oxw();i.Q6J("field",e.fieldname)("fieldconfig",e.fieldconfig)("module",e.model.module)("length",e.view.labels)}}function f(e,t){if(1&e&&i._UZ(0,"system-label",8),2&e){const e=i.oxw();i.Q6J("label",e.fieldconfig.label)("length",e.view.labels)}}function b(e,t){if(1&e&&i._UZ(0,"system-icon-help-text",9),2&e){const e=i.oxw();i.Q6J("helpText",e.helpText)}}let _=(()=>{class fieldLabel{model;metadata;view;userPreferences;language;footer;injector;fieldname="";fieldconfig={};addclasses="slds-form-element__label";showHelp=!1;constructor(e,t,s,i,n,l,o){this.model=e,this.metadata=t,this.view=s,this.userPreferences=i,this.language=n,this.footer=l,this.injector=o}get stati(){let e=this.model.getFieldStati(this.fieldname);return!e.editable||this.view.isEditable&&!this.fieldconfig.readonly||(e.editable=!1),this.fieldconfig.required&&(e.required=!0),e}isRequired(){return this.stati.editable&&this.stati.required}isEditable(){return this.stati.editable}isEditMode(){return!(!this.view.isEditMode()||!this.isEditable())}get hidden(){return!!this.fieldconfig.hidelabel}get label(){if(this.fieldconfig.label){if(this.fieldconfig.label.indexOf(":")>0){let e=this.fieldconfig.label.split(":");return this.language.getLabel(e[1],e[0],this.view.labels)}return this.language.getLabel(this.fieldconfig.label,this.model.module,this.view.labels)}return this.language.getFieldDisplayName(this.model.module,this.fieldname,this.fieldconfig,this.view.labels)}get helpText(){if(this.userPreferences.toUse.help_icon&&"hidden"==this.userPreferences.toUse.help_icon)return!1;if(this.fieldconfig.helpText){if(this.fieldconfig.helpText.indexOf(":")>0){let e=this.fieldconfig.helpText.split(":");return this.language.getLabel(e[1],e[0],this.view.labels)}return this.language.getLabel(this.fieldconfig.helpText,this.model.module,this.view.labels)}return this.language.getFieldHelpText(this.model.module,this.fieldname,this.fieldconfig)}showContext(e){}static ɵfac=function(e){return new(e||fieldLabel)(i.Y36(n.o),i.Y36(l.Pu),i.Y36(o.e),i.Y36(a.z),i.Y36(d.d),i.Y36(r.M),i.Y36(i.zs3))};static ɵcmp=i.Xpm({type:fieldLabel,selectors:[["field-label"]],inputs:{fieldname:"fieldname",fieldconfig:"fieldconfig",addclasses:"addclasses"},decls:6,vars:5,consts:[[2,"display","flow-root",3,"contextmenu"],[1,"slds-truncate","slds-float_left",3,"ngClass"],["class","slds-required",4,"ngIf"],[3,"field","fieldconfig","module","length",4,"ngIf"],[3,"label","length",4,"ngIf"],[3,"helpText",4,"ngIf"],[1,"slds-required"],[3,"field","fieldconfig","module","length"],[3,"label","length"],[3,"helpText"]],template:function(e,t){1&e&&(i.TgZ(0,"div",0),i.NdJ("contextmenu",(function(e){return t.showContext(e)})),i.TgZ(1,"label",1),i.YNc(2,h,2,0,"abbr",2),i.YNc(3,p,1,4,"system-label-fieldname",3),i.YNc(4,f,1,2,"system-label",4),i.qZA(),i.YNc(5,b,1,1,"system-icon-help-text",5),i.qZA()),2&e&&(i.xp6(1),i.Q6J("ngClass",t.addclasses),i.xp6(1),i.Q6J("ngIf",t.stati.editable&&t.stati.required),i.xp6(1),i.Q6J("ngIf",!t.fieldconfig.label),i.xp6(1),i.Q6J("ngIf",t.fieldconfig.label),i.xp6(1),i.Q6J("ngIf",t.helpText))},dependencies:[c.mk,c.O5,u._,m.h,g.h],encapsulation:2})}return fieldLabel})()},54271:(e,t,s)=>{"use strict";s.d(t,{P:()=>y});var i=s(62242),n=s(55710),l=s(10382),o=s(55329),a=s(75920),d=s(44755),r=s(72656),c=s(64730),u=s(83463),m=s(29151),g=s(50151),h=s(83026);function p(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"button",6),i.NdJ("mousedown",(function(t){i.CHM(e);const s=i.oxw();return i.KtG(s.setCurrentUser(t))})),i._UZ(1,"system-button-icon",7),i.qZA()}}function f(e,t){1&e&&(i.TgZ(0,"div",8)(1,"system-illustration-no-records"),i._UZ(2,"system-label",9),i.qZA()())}const b=function(e){return{"slds-is-selected slds-color__background_gray-5":e}};function _(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"li",10),i.NdJ("mousedown",(function(t){const s=i.CHM(e).$implicit,n=i.oxw();return i.KtG(n.setParent(t,s))})),i._UZ(1,"field-lookup-recent-item",11),i.qZA()}if(2&e){const e=t.$implicit,s=i.oxw();i.Q6J("ngClass",i.VKq(2,b,s.selectedItem==e)),i.xp6(1),i.Q6J("item",e)}}function v(e,t){1&e&&(i.ynx(0),i.TgZ(1,"li",12),i._UZ(2,"system-searchresult-stencil"),i.qZA(),i.TgZ(3,"li",13),i._UZ(4,"system-searchresult-stencil"),i.qZA(),i.TgZ(5,"li",14),i._UZ(6,"system-searchresult-stencil"),i.qZA(),i.BQk())}let y=(()=>{class fieldLookupRecent{model;recent;language;session;renderer;module="";inputElement;listener;selectedItem;selectedObject=new i.vpe;recentItems=[];loading=!1;constructor(e,t,s,i,n){this.model=e,this.recent=t,this.language=s,this.session=i,this.renderer=n}ngOnInit(){this.inputElement&&(this.listener=this.renderer.listen(this.inputElement,"keyup",(e=>{const t=this.recentItems.findIndex((e=>e==this.selectedItem));switch(e.key){case"Enter":1==this.recentItems.length&&(this.selectedItem=this.recentItems[0]),this.selectedObject.emit({id:this.selectedItem.data.id,text:this.selectedItem.data.summary_text,data:this.selectedItem.data});break;case"ArrowDown":this.selectedItem=this.recentItems[t+1>=this.recentItems.length?0:t+1];break;case"ArrowUp":this.selectedItem=this.recentItems[t-1<0?this.recentItems.length-1:t-1];break;case"Escape":this.selectedItem={data:{id:"",summary_text:""}}}})))}ngOnChanges(){this.getRecent()}setCurrentUser(e){e.preventDefault(),this.selectedObject.emit({id:this.session.authData.userId,text:this.session.authData.user.full_name,data:this.session.authData.user})}setParent(e,t){e.preventDefault(),this.selectedObject.emit({id:t.data.id,text:t.data.summary_text,data:t.data})}getRecent(){this.loading=!0,this.recentItems=[];this.recent.getModuleRecent(this.module).subscribe((e=>{this.recentItems=e,this.loading=!1}))}ngOnDestroy(){this.listener&&this.listener()}static ɵfac=function(e){return new(e||fieldLookupRecent)(i.Y36(n.o),i.Y36(l.h),i.Y36(o.d),i.Y36(a.n),i.Y36(i.Qsj))};static ɵcmp=i.Xpm({type:fieldLookupRecent,selectors:[["field-lookup-recent"]],inputs:{module:"module",inputElement:"inputElement"},outputs:{selectedObject:"selectedObject"},features:[i.TTD],decls:7,vars:5,consts:[[1,"slds-lookup__item--label","slds-text-body--small","slds-grid","slds-grid--vertical-align-center","slds-grid--align-spread","slds-border--bottom"],["system-title","LBL_SET_CURRENT_USER","class","slds-button slds-button--icon","size","xx-small",3,"mousedown",4,"ngIf"],["class","slds-align--absolute-center slds-p-around--small",4,"ngIf"],["role","listbox",1,"slds-lookup__list"],["role","presentation",3,"ngClass","mousedown",4,"ngFor","ngForOf"],[4,"ngIf"],["system-title","LBL_SET_CURRENT_USER","size","xx-small",1,"slds-button","slds-button--icon",3,"mousedown"],["icon","user"],[1,"slds-align--absolute-center","slds-p-around--small"],["label","MSG_NO_RECORDS_FOUND"],["role","presentation",3,"ngClass","mousedown"],[3,"item"],[2,"opacity","1"],[2,"opacity","0.6"],[2,"opacity","0.2"]],template:function(e,t){1&e&&(i.TgZ(0,"div",0),i._uU(1),i.YNc(2,p,2,0,"button",1),i.qZA(),i.YNc(3,f,3,0,"div",2),i.TgZ(4,"ul",3),i.YNc(5,_,2,4,"li",4),i.YNc(6,v,7,0,"ng-container",5),i.qZA()),2&e&&(i.xp6(1),i.hij(" ",t.language.getModuleCombinedLabel("LBL_RECENTLYVIEWED",t.module)," "),i.xp6(1),i.Q6J("ngIf","Users"==t.module),i.xp6(1),i.Q6J("ngIf",!t.loading&&0==t.recentItems.length),i.xp6(2),i.Q6J("ngForOf",t.recentItems),i.xp6(1),i.Q6J("ngIf",t.loading))},dependencies:[d.mk,d.sg,d.O5,r.J,c.C,u._,m.v,g.S,h.E],encapsulation:2})}return fieldLookupRecent})()},83026:(e,t,s)=>{"use strict";s.d(t,{E:()=>v});var i=s(55710),n=s(32294),l=s(62242),o=s(83348),a=s(55329),d=s(4154),r=s(44755),c=s(44561),u=s(93333),m=s(33634);function g(e,t){if(1&e&&(l.TgZ(0,"span"),l._uU(1),l.qZA()),2&e){const e=l.oxw();l.xp6(1),l.Oqu(e.model.data.summary_text)}}function h(e,t){if(1&e&&(l.TgZ(0,"li",8),l._UZ(1,"field-container",12),l.qZA()),2&e){const e=l.oxw().$implicit;l.xp6(1),l.Q6J("field",e.field)("fieldconfig",e.fieldconfig)}}function p(e,t){if(1&e&&(l.ynx(0),l.YNc(1,h,2,2,"li",11),l.BQk()),2&e){const e=t.$implicit,s=l.oxw(2);l.xp6(1),l.Q6J("ngIf",s.model.getField(e.field))}}function f(e,t){if(1&e&&(l.TgZ(0,"ul",7),l.YNc(1,p,2,1,"ng-container",10),l.qZA()),2&e){const e=l.oxw();l.xp6(1),l.Q6J("ngForOf",e.mainfieldsetfields)}}function b(e,t){if(1&e&&(l.TgZ(0,"li",8),l._UZ(1,"field-container",12),l.qZA()),2&e){const e=l.oxw().$implicit;l.xp6(1),l.Q6J("field",e.field)("fieldconfig",e.fieldconfig)}}function _(e,t){if(1&e&&(l.ynx(0),l.YNc(1,b,2,2,"li",11),l.BQk()),2&e){const e=t.$implicit,s=l.oxw();l.xp6(1),l.Q6J("ngIf",s.model.getField(e.field))}}let v=(()=>{class fieldLookupRecentItem{model;router;language;metadata;view;item={};mainfieldsetfields;subfieldsetfields;constructor(e,t,s,i,n){this.model=e,this.router=t,this.language=s,this.metadata=i,this.view=n,this.view.displayLabels=!1}ngOnInit(){this.model.module=this.item.module_name,this.model.id=this.item.item_id,this.model.setData(this.item.data);let e=this.metadata.getComponentConfig("GlobalHeaderSearchResultsItem",this.model.module);e&&e.mainfieldset&&(this.mainfieldsetfields=this.metadata.getFieldSetItems(e.mainfieldset)),e&&e.subfieldset&&(this.subfieldsetfields=this.metadata.getFieldSetItems(e.subfieldset))}static ɵfac=function(e){return new(e||fieldLookupRecentItem)(l.Y36(i.o),l.Y36(o.F0),l.Y36(a.d),l.Y36(d.Pu),l.Y36(n.e))};static ɵcmp=l.Xpm({type:fieldLookupRecentItem,selectors:[["field-lookup-recent-item"]],inputs:{item:"item"},features:[l._Bn([i.o,n.e])],decls:11,vars:6,consts:[["role","option",1,"slds-lookup__item-action","slds-media","slds-media--center"],["size","small",3,"module"],[1,"slds-media__body"],[1,"slds-lookup__result-text"],[4,"ngIf"],["class","slds-list_horizontal slds-has-dividers_right slds-truncate",4,"ngIf"],[1,"slds-lookup__result-meta","slds-text-body--small"],[1,"slds-list_horizontal","slds-has-dividers_right","slds-truncate"],[1,"slds-item"],[3,"module","singular"],[4,"ngFor","ngForOf"],["class","slds-item",4,"ngIf"],["fielddisplayclass","slds-truncate",3,"field","fieldconfig"]],template:function(e,t){1&e&&(l.TgZ(0,"span",0),l._UZ(1,"system-icon",1),l.TgZ(2,"div",2)(3,"div",3),l.YNc(4,g,2,1,"span",4),l.YNc(5,f,2,1,"ul",5),l.qZA(),l.TgZ(6,"span",6)(7,"ul",7)(8,"li",8),l._UZ(9,"system-label-modulename",9),l.qZA(),l.YNc(10,_,2,1,"ng-container",10),l.qZA()()()()),2&e&&(l.xp6(1),l.Q6J("module",t.model.module),l.xp6(3),l.Q6J("ngIf",!t.mainfieldsetfields),l.xp6(1),l.Q6J("ngIf",t.mainfieldsetfields),l.xp6(4),l.Q6J("module",t.model.module)("singular",!0),l.xp6(1),l.Q6J("ngForOf",t.subfieldsetfields))},dependencies:[r.sg,r.O5,c.f,u.M,m.j],encapsulation:2})}return fieldLookupRecentItem})()},85957:(e,t,s)=>{"use strict";s.d(t,{$:()=>T});var i=s(62242),n=s(42644),l=s(50727),o=s(4154),a=s(55710),d=s(55329),r=s(44044),c=s(44755),u=s(44561),m=s(64730),g=s(83463),h=s(93333),p=s(29151),f=s(26930),b=s(28016);function _(e,t){if(1&e&&(i.TgZ(0,"span",12),i._UZ(1,"system-label",13),i._uU(2),i.qZA()),2&e){const e=i.oxw();i.xp6(2),i.hij(" ",e.relatefilter.display,"")}}const v=function(e){return{"slds-is-selected slds-color__background_gray-5":e}};function y(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"li",14),i.NdJ("mousedown",(function(){const t=i.CHM(e).$implicit,s=i.oxw();return i.KtG(s.setItem(t))})),i.qZA()}if(2&e){const e=t.$implicit,s=i.oxw();i.Q6J("module",s.module)("item",e)("ngClass",i.VKq(3,v,s.selectedItem==e))}}function x(e,t){1&e&&(i.ynx(0),i.TgZ(1,"li",15),i._UZ(2,"system-searchresult-stencil"),i.qZA(),i.TgZ(3,"li",16),i._UZ(4,"system-searchresult-stencil"),i.qZA(),i.TgZ(5,"li",17),i._UZ(6,"system-searchresult-stencil"),i.qZA(),i.BQk())}function w(e,t){1&e&&(i.TgZ(0,"div",18)(1,"system-illustration-no-records"),i._UZ(2,"system-label",19),i.qZA()())}function Z(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"li",20),i.NdJ("added",(function(t){i.CHM(e);const s=i.oxw();return i.KtG(s.recordAdded(t))})),i.qZA()}if(2&e){const e=i.oxw();i.Q6J("module",e.module)("parent",e.model)}}let T=(()=>{class fieldLookupSearch{metadata;model;modellist;language;modal;renderer;searchTerm="";searchTimeout={};inputElement;listener;selectedItem;module="";modulefilter="";disableadd=!1;relatefilter;relateId;selectedObject=new i.vpe;searchWithModal=new i.vpe;searchtermChange=new i.vpe;subscriptions=new l.w0;set searchterm(e){this.searchTerm=e,this.searchTimeout&&window.clearTimeout(this.searchTimeout),this.searchTimeout=window.setTimeout((()=>this.doSearch()),500)}constructor(e,t,s,i,n,l){this.metadata=e,this.model=t,this.modellist=s,this.language=i,this.modal=n,this.renderer=l}ngOnInit(){this.modellist.modulefilter=this.modulefilter,this.relatefilter&&(this.modellist.relatefilter=this.relatefilter),this.modellist.loadlimit=5,this.modellist.initialize(this.module),this.modellist.getListData(),this.inputElement&&(this.listener=this.renderer.listen(this.inputElement,"keyup",(e=>{const t=this.modellist.listData.list.findIndex((e=>e==this.selectedItem));switch(e.key){case"Enter":1==this.modellist.listData.list.length&&(this.selectedItem=this.modellist.listData.list[0]),this.selectedObject.emit({id:this.selectedItem.id,text:this.selectedItem.summary_text,data:this.selectedItem});break;case"ArrowDown":this.selectedItem=this.modellist.listData.list[t+1>=this.modellist.listData.list.length?0:t+1];break;case"ArrowUp":this.selectedItem=this.modellist.listData.list[t-1<0?this.modellist.listData.list.length-1:t-1];break;case"Escape":this.selectedItem={id:"",summary_text:""}}})))}ngOnChanges(e){e.relateId&&this.modellist.currentList&&this.modellist.getListData()}get canAdd(){return!this.disableadd&&this.metadata.checkModuleAcl(this.module,"edit")}doSearch(){""!==this.searchTerm&&this.searchTerm!==this.modellist.searchTerm&&(this.modellist.searchTerm=this.searchTerm,this.modellist.getListData())}setItem(e){this.searchTerm="",this.searchtermChange.emit(this.searchTerm),this.selectedObject.emit({id:e.id,text:e.summary_text,data:e})}recordAdded(e){this.setItem(e.data)}ngOnDestroy(){this.listener&&this.listener()}static ɵfac=function(e){return new(e||fieldLookupSearch)(i.Y36(o.Pu),i.Y36(a.o),i.Y36(n.t),i.Y36(d.d),i.Y36(r.o),i.Y36(i.Qsj))};static ɵcmp=i.Xpm({type:fieldLookupSearch,selectors:[["field-lookup-search"]],inputs:{inputElement:"inputElement",module:"module",modulefilter:"modulefilter",disableadd:"disableadd",relatefilter:"relatefilter",relateId:"relateId",searchterm:"searchterm"},outputs:{selectedObject:"selectedObject",searchWithModal:"searchWithModal",searchtermChange:"searchtermChange"},features:[i._Bn([n.t]),i.TTD],decls:12,vars:10,consts:[["role","listbox",1,"slds-lookup__list"],["role","presentation"],["role","option",1,"slds-p-horizontal--small","slds-p-vertical--xx-small","slds-grid","slds-grid--vertical-align-center","slds-border--bottom",3,"mousedown"],[3,"icon","sprite","size","addclasses"],[1,"slds-media__body"],[1,"slds-lookup__result-text"],[3,"module"],["class","slds-p-horizontal--xx-small",4,"ngIf"],["field-lookup-search-item","",3,"module","item","ngClass","mousedown",4,"ngFor","ngForOf"],[4,"ngIf"],["class","slds-align--absolute-center slds-p-around--small",4,"ngIf"],["field-lookup-search-add","","role","presentation",3,"module","parent","added",4,"ngIf"],[1,"slds-p-horizontal--xx-small"],["label","LBL_RELATED_TO"],["field-lookup-search-item","",3,"module","item","ngClass","mousedown"],[2,"opacity","1"],[2,"opacity","0.6"],[2,"opacity","0.2"],[1,"slds-align--absolute-center","slds-p-around--small"],["label","MSG_NO_RECORDS_FOUND"],["field-lookup-search-add","","role","presentation",3,"module","parent","added"]],template:function(e,t){1&e&&(i.TgZ(0,"ul",0)(1,"li",1)(2,"div",2),i.NdJ("mousedown",(function(){return t.searchWithModal.emit()})),i._UZ(3,"system-icon",3),i.TgZ(4,"div",4)(5,"div",5),i._UZ(6,"system-label-modulename",6),i.YNc(7,_,3,1,"span",7),i.qZA()()()(),i.YNc(8,y,1,5,"li",8),i.YNc(9,x,7,0,"ng-container",9),i.YNc(10,w,3,0,"div",10),i.YNc(11,Z,1,2,"li",11),i.qZA()),2&e&&(i.xp6(3),i.Q6J("icon","search")("sprite","utility")("size","x-small")("addclasses","slds-m-vertical--xxx-small slds-m-horizontal--xx-small"),i.xp6(3),i.Q6J("module",t.module),i.xp6(1),i.Q6J("ngIf",null==t.relatefilter?null:t.relatefilter.active),i.xp6(1),i.Q6J("ngForOf",t.modellist.listData.list),i.xp6(1),i.Q6J("ngIf",t.modellist.isLoading),i.xp6(1),i.Q6J("ngIf",!t.modellist.isLoading&&0==t.modellist.listData.totalcount),i.xp6(1),i.Q6J("ngIf",t.canAdd))},dependencies:[c.mk,c.sg,c.O5,u.f,m.C,g._,h.M,p.v,f.R,b.I],encapsulation:2})}return fieldLookupSearch})()},28016:(e,t,s)=>{"use strict";s.d(t,{I:()=>c});var i=s(62242),n=s(55710),l=s(55329),o=s(44561),a=s(83463),d=s(93333);const r=["field-lookup-search-add",""];let c=(()=>{class fieldLookupSearchAdd{model;language;module="";parent;added$=new i.vpe;constructor(e,t){this.model=e,this.language=t}ngOnInit(){this.model.module=this.module}addParent(){this.model.addModel("",this.parent,null,!0).subscribe((e=>{this.added$.emit({id:e.id,text:e.summary_text,data:e})}))}static ɵfac=function(e){return new(e||fieldLookupSearchAdd)(i.Y36(n.o),i.Y36(l.d))};static ɵcmp=i.Xpm({type:fieldLookupSearchAdd,selectors:[["","field-lookup-search-add",""]],inputs:{module:"module",parent:"parent"},outputs:{added$:"added"},features:[i._Bn([n.o])],attrs:r,decls:7,vars:6,consts:[["role","option",1,"slds-grid","slds-grid--vertical-align-center","slds-p-horizontal--small","slds-p-vertical--xx-small","slds-border--top",3,"mousedown"],[3,"icon","sprite","size","addclasses"],[1,"slds-media__body"],[1,"slds-lookup__result-text"],["label","LBL_CREATE"],[3,"module","singular"]],template:function(e,t){1&e&&(i.TgZ(0,"div",0),i.NdJ("mousedown",(function(){return t.addParent()})),i._UZ(1,"system-icon",1),i.TgZ(2,"div",2)(3,"div",3),i._UZ(4,"system-label",4),i._uU(5,": "),i._UZ(6,"system-label-modulename",5),i.qZA()()()),2&e&&(i.xp6(1),i.Q6J("icon","add")("sprite","utility")("size","x-small")("addclasses","slds-m-vertical--xxx-small slds-m-horizontal--xx-small"),i.xp6(5),i.Q6J("module",t.module)("singular",!0))},dependencies:[o.f,a._,d.M],encapsulation:2})}return fieldLookupSearchAdd})()},26930:(e,t,s)=>{"use strict";s.d(t,{R:()=>_});var i=s(55710),n=s(32294),l=s(62242),o=s(55329),a=s(4154),d=s(44755),r=s(44561),c=s(33634);const u=["field-lookup-search-item",""];function m(e,t){if(1&e&&(l.TgZ(0,"span"),l._uU(1),l.qZA()),2&e){const e=l.oxw();l.xp6(1),l.Oqu(e.model.data.summary_text)}}function g(e,t){if(1&e&&(l.TgZ(0,"li",10),l._UZ(1,"field-container",11),l.qZA()),2&e){const e=l.oxw().$implicit;l.xp6(1),l.Q6J("field",e.field)("fieldconfig",e.fieldconfig)}}function h(e,t){if(1&e&&(l.ynx(0),l.YNc(1,g,2,2,"li",9),l.BQk()),2&e){const e=t.$implicit,s=l.oxw(2);l.xp6(1),l.Q6J("ngIf",s.model.getField(e.field))}}function p(e,t){if(1&e&&(l.TgZ(0,"ul",7),l.YNc(1,h,2,1,"ng-container",8),l.qZA()),2&e){const e=l.oxw();l.xp6(1),l.Q6J("ngForOf",e.mainfieldsetfields)}}function f(e,t){if(1&e&&(l.TgZ(0,"li",10),l._UZ(1,"field-container",11),l.qZA()),2&e){const e=l.oxw().$implicit;l.xp6(1),l.Q6J("field",e.field)("fieldconfig",e.fieldconfig)}}function b(e,t){if(1&e&&(l.ynx(0),l.YNc(1,f,2,2,"li",9),l.BQk()),2&e){const e=t.$implicit,s=l.oxw();l.xp6(1),l.Q6J("ngIf",s.model.getField(e.field))}}let _=(()=>{class fieldLookupSearchItem{model;view;language;metadata;item={};module;mainfieldsetfields;subfieldsetfields;constructor(e,t,s,i){this.model=e,this.view=t,this.language=s,this.metadata=i,this.view.displayLabels=!1}ngOnInit(){this.model.module=this.module,this.model.id=this.item.id,this.model.setData(this.item);let e=this.metadata.getComponentConfig("GlobalHeaderSearchResultsItem",this.model.module);e&&e.mainfieldset&&(this.mainfieldsetfields=this.metadata.getFieldSetItems(e.mainfieldset)),e&&e.subfieldset&&(this.subfieldsetfields=this.metadata.getFieldSetItems(e.subfieldset))}static ɵfac=function(e){return new(e||fieldLookupSearchItem)(l.Y36(i.o),l.Y36(n.e),l.Y36(o.d),l.Y36(a.Pu))};static ɵcmp=l.Xpm({type:fieldLookupSearchItem,selectors:[["","field-lookup-search-item",""]],inputs:{item:"item",module:"module"},features:[l._Bn([i.o,n.e])],attrs:u,decls:9,vars:4,consts:[["role","option",1,"slds-lookup__item-action","slds-media","slds-media--center"],["size","small",3,"module"],[1,"slds-media__body"],[1,"slds-lookup__result-text"],[4,"ngIf"],["class","slds-list_horizontal slds-has-dividers_right slds-truncate",4,"ngIf"],[1,"slds-lookup__result-meta","slds-text-body--small"],[1,"slds-list_horizontal","slds-has-dividers_right","slds-truncate"],[4,"ngFor","ngForOf"],["class","slds-item",4,"ngIf"],[1,"slds-item"],["fielddisplayclass","slds-truncate",3,"field","fieldconfig"]],template:function(e,t){1&e&&(l.TgZ(0,"span",0),l._UZ(1,"system-icon",1),l.TgZ(2,"div",2)(3,"div",3),l.YNc(4,m,2,1,"span",4),l.YNc(5,p,2,1,"ul",5),l.qZA(),l.TgZ(6,"div",6)(7,"ul",7),l.YNc(8,b,2,1,"ng-container",8),l.qZA()()()()),2&e&&(l.xp6(1),l.Q6J("module",t.model.module),l.xp6(3),l.Q6J("ngIf",!t.mainfieldsetfields),l.xp6(1),l.Q6J("ngIf",t.mainfieldsetfields),l.xp6(3),l.Q6J("ngForOf",t.subfieldsetfields))},dependencies:[d.sg,d.O5,r.f,c.j],encapsulation:2})}return fieldLookupSearchItem})()},55638:(e,t,s)=>{"use strict";s.d(t,{a:()=>b});var i=s(62242),n=s(55710),l=s(32294),o=s(55329),a=s(96701),d=s(44755),r=s(83463),c=s(78859);function u(e,t){if(1&e&&(i.TgZ(0,"div",8),i._UZ(1,"system-label",9),i.qZA()),2&e){const e=t.$implicit;i.xp6(1),i.Q6J("label",e.message)}}function m(e,t){if(1&e&&(i.TgZ(0,"div",3)(1,"div",4)(2,"span",5),i._UZ(3,"system-utility-icon",6),i.qZA()(),i.YNc(4,u,2,1,"div",7),i.qZA()),2&e){const e=i.oxw();i.xp6(3),i.Q6J("icon","error")("size","x-small")("colorclass","slds-icon-text-error"),i.xp6(1),i.Q6J("ngForOf",e.errors)}}function g(e,t){if(1&e&&(i.TgZ(0,"div",8),i._UZ(1,"system-label",9),i.qZA()),2&e){const e=t.$implicit;i.xp6(1),i.Q6J("label",e.message)}}function h(e,t){if(1&e&&(i.TgZ(0,"div",10)(1,"div",4)(2,"span",5),i._UZ(3,"system-utility-icon",6),i.qZA()(),i.YNc(4,g,2,1,"div",7),i.qZA()),2&e){const e=i.oxw();i.xp6(3),i.Q6J("icon","warning")("size","x-small")("colorclass","slds-icon-text-warning"),i.xp6(1),i.Q6J("ngForOf",e.warnings)}}function p(e,t){if(1&e&&(i.TgZ(0,"div",8),i._UZ(1,"system-label",9),i.qZA()),2&e){const e=t.$implicit;i.xp6(1),i.Q6J("label",e.message)}}function f(e,t){if(1&e&&(i.TgZ(0,"div",11)(1,"div",4)(2,"span",5),i._UZ(3,"system-utility-icon",12),i.qZA()(),i.YNc(4,p,2,1,"div",7),i.qZA()),2&e){const e=i.oxw();i.xp6(3),i.Q6J("icon","info")("size","x-small"),i.xp6(1),i.Q6J("ngForOf",e.notices)}}let b=(()=>{class FieldMessagesComponent{model;view;language;fielderrorgroup;fieldname="";_messages=[];errors=[];warnings=[];notices=[];constructor(e,t,s,i){this.model=e,this.view=t,this.language=s,this.fielderrorgroup=i}ngOnInit(){this.model.messageChange$.subscribe((()=>{this.updateMessages()}))}ngOnChanges(){this.updateMessages()}ngOnDestroy(){this.fielderrorgroup&&this.fielderrorgroup.setError(this.fieldname,!1)}updateMessages(){let e;e=0==this._messages.length&&this.fieldname?this.model.getFieldMessages(this.fieldname)||[]:this._messages,this.errors=this.filterMessages(e,"error"),this.warnings=this.filterMessages(e,"warning"),this.notices=this.filterMessages(e,"notice"),this.fielderrorgroup&&this.fielderrorgroup.setError(this.fieldname,0!==this.errors.length)}filterMessages(e,t){return e.filter((e=>!t||e.type==t))}static ɵfac=function(e){return new(e||FieldMessagesComponent)(i.Y36(n.o),i.Y36(l.e),i.Y36(o.d),i.Y36(a.O,8))};static ɵcmp=i.Xpm({type:FieldMessagesComponent,selectors:[["field-messages"]],inputs:{fieldname:"fieldname",_messages:["messages","_messages"]},features:[i.TTD],decls:3,vars:3,consts:[["class","slds-media slds-media-center slds-inline_icon_text slds-form-element__help",4,"ngIf"],["class","slds-media slds-media-center slds-inline_icon_text slds-inline_icon_text--warning",4,"ngIf"],["class","slds-media slds-media-center slds-inline_icon_text",4,"ngIf"],[1,"slds-media","slds-media-center","slds-inline_icon_text","slds-form-element__help"],[1,"slds-media__figure"],[1,"slds-icon_container"],[3,"icon","size","colorclass"],["class","slds-media__body",4,"ngFor","ngForOf"],[1,"slds-media__body"],[3,"label"],[1,"slds-media","slds-media-center","slds-inline_icon_text","slds-inline_icon_text--warning"],[1,"slds-media","slds-media-center","slds-inline_icon_text"],[3,"icon","size"]],template:function(e,t){1&e&&(i.YNc(0,m,5,4,"div",0),i.YNc(1,h,5,4,"div",1),i.YNc(2,f,5,3,"div",2)),2&e&&(i.Q6J("ngIf",t.errors.length>0),i.xp6(1),i.Q6J("ngIf",t.warnings.length>0),i.xp6(1),i.Q6J("ngIf",t.notices.length>0))},dependencies:[d.sg,d.O5,r._,c.r],encapsulation:2})}return FieldMessagesComponent})()},53190:(e,t,s)=>{"use strict";s.r(t),s.d(t,{ObjectFields:()=>ng});var i=s(44755),n=s(95030),l=s(13418),o=s(57239),a=s(84357),d=s(61810),r=s(62242),c=s(4154),u=s(66367),m=s(33634);function g(e,t){if(1&e&&r._UZ(0,"field-label",4),2&e){const e=r.oxw();r.Q6J("fieldname",e.field.field)("fieldconfig",e.field.fieldconfig)}}let h=(()=>{class field{field={};static ɵfac=function(e){return new(e||field)};static ɵcmp=r.Xpm({type:field,selectors:[["field"]],hostVars:2,hostBindings:function(e,t){2&e&&r.ekj("slds-form-element",!0)},inputs:{field:"field"},decls:4,vars:3,consts:[[1,"slds-form-element"],[3,"fieldname","fieldconfig",4,"ngIf"],[1,"slds-form-element__control"],[3,"field","fieldconfig"],[3,"fieldname","fieldconfig"]],template:function(e,t){1&e&&(r.TgZ(0,"div",0),r.YNc(1,g,1,2,"field-label",1),r.TgZ(2,"div",2),r._UZ(3,"field-container",3),r.qZA()()),2&e&&(r.xp6(1),r.Q6J("ngIf",!0!==t.field.fieldconfig.hidelabel),r.xp6(2),r.Q6J("field",t.field.field)("fieldconfig",t.field.fieldconfig))},dependencies:[i.O5,u.q,m.j],encapsulation:2})}return field})();function p(e,t){if(1&e&&r._UZ(0,"field",4),2&e){const e=r.oxw().$implicit;r.Q6J("field",e)}}function f(e,t){if(1&e&&r._UZ(0,"field-set",5),2&e){const e=r.oxw().$implicit;r.Q6J("fieldset",e.fieldset)("fieldsetconfig",e.fieldconfig)}}function b(e,t){if(1&e&&(r.ynx(0),r.YNc(1,p,1,1,"field",2),r.YNc(2,f,1,2,"field-set",3),r.BQk()),2&e){const e=t.$implicit;r.xp6(1),r.Q6J("ngIf",e.field),r.xp6(1),r.Q6J("ngIf",!e.field)}}let v=(()=>{class fieldSet{metadata;fieldset="";fieldsetconfig={};fieldsetItems=[];constructor(e){this.metadata=e}ngOnInit(){this.fieldsetItems=this.metadata.getFieldSetItems(this.fieldset)}getFormClass(){if(this.fieldsetconfig.formclass)return this.fieldsetconfig.formclass}static ɵfac=function(e){return new(e||fieldSet)(r.Y36(c.Pu))};static ɵcmp=r.Xpm({type:fieldSet,selectors:[["field-set"]],hostVars:2,hostBindings:function(e,t){2&e&&r.ekj("slds-form-element",!0)},inputs:{fieldset:"fieldset",fieldsetconfig:"fieldsetconfig"},decls:2,vars:2,consts:[[3,"ngClass"],[4,"ngFor","ngForOf"],[3,"field",4,"ngIf"],[3,"fieldset","fieldsetconfig",4,"ngIf"],[3,"field"],[3,"fieldset","fieldsetconfig"]],template:function(e,t){1&e&&(r.TgZ(0,"div",0),r.YNc(1,b,3,2,"ng-container",1),r.qZA()),2&e&&(r.Q6J("ngClass",t.getFormClass()),r.xp6(1),r.Q6J("ngForOf",t.fieldsetItems))},dependencies:[i.mk,i.sg,i.O5,fieldSet,h],encapsulation:2})}return fieldSet})(),y=(()=>{class fieldBlank{static ɵfac=function(e){return new(e||fieldBlank)};static ɵcmp=r.Xpm({type:fieldBlank,selectors:[["field-blank"]],decls:1,vars:0,consts:[[1,"slds-truncate"]],template:function(e,t){1&e&&r._UZ(0,"div",0)},encapsulation:2})}return fieldBlank})();var x=s(55329),w=s(55710),Z=s(72656);let T=(()=>{class fieldLabelPopover{language;elementRef;renderer;model;self;event;clickListener;contextmenulistener;fieldlabel="";fieldname="";fieldconfig={};top="0px";left="0px";constructor(e,t,s,i){this.language=e,this.elementRef=t,this.renderer=s,this.model=i}ngOnInit(){this.top=this.event.pageY-22+"px",this.left=this.event.pageX+8+"px",this.clickListener=this.renderer.listen("document","click",(e=>this.onClick(e)))}ngOnDestroy(){this.clickListener&&this.clickListener(),this.contextmenulistener&&this.contextmenulistener()}onClick(e){this.elementRef.nativeElement.contains(e.target)||(this.clickListener&&this.clickListener(),this.contextmenulistener&&this.contextmenulistener(),this.close())}get popoverStyle(){return{top:this.top,left:this.left}}close(){this.self.destroy()}static ɵfac=function(e){return new(e||fieldLabelPopover)(r.Y36(x.d),r.Y36(r.SBq),r.Y36(r.Qsj),r.Y36(w.o,8))};static ɵcmp=r.Xpm({type:fieldLabelPopover,selectors:[["ng-component"]],decls:8,vars:3,consts:[["role","dialog",1,"slds-is-fixed","slds-popover","slds-nubbin_left-top",3,"ngStyle"],[1,"slds-button","slds-button_icon","slds-button_icon-small","slds-float_right","slds-popover__close",3,"click"],["icon","close"],[1,"slds-popover__header"],[1,"slds-text-heading_small"],[1,"slds-popover__body"]],template:function(e,t){1&e&&(r.TgZ(0,"div",0)(1,"button",1),r.NdJ("click",(function(){return t.close()})),r._UZ(2,"system-button-icon",2),r.qZA(),r.TgZ(3,"header",3)(4,"h2",4),r._uU(5),r.qZA()(),r.TgZ(6,"div",5),r._uU(7),r.qZA()()),2&e&&(r.Q6J("ngStyle",t.popoverStyle),r.xp6(5),r.Oqu(t.fieldlabel),r.xp6(2),r.hij(" fieldname: ",t.fieldname," fieldtype: "))},dependencies:[i.PC,Z.J],encapsulation:2})}return fieldLabelPopover})();var C=s(73208),k=s(32294),A=s(83348),L=s(44044),I=s(78859),S=s(37982),M=s(55638),J=s(75572);const O=["textField"];function N(e,t){if(1&e&&r._UZ(0,"field-label",5),2&e){const e=r.oxw();r.Q6J("fieldname",e.fieldname)("fieldconfig",e.fieldconfig)}}function F(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"div",6),r.NdJ("click",(function(){r.CHM(e);const t=r.oxw();return r.KtG(t.toSpeech())})),r._UZ(1,"system-utility-icon",7),r.qZA()}}function q(e,t){if(1&e&&(r.TgZ(0,"div",11),r._uU(1),r.qZA()),2&e){const e=r.oxw(2);r.xp6(1),r.Oqu(e.value)}}function E(e,t){if(1&e&&(r.TgZ(0,"div",13),r._uU(1),r.qZA()),2&e){const e=r.oxw(3);r.Q6J("title",e.value),r.xp6(1),r.hij(" ",e.value," ")}}function Y(e,t){if(1&e&&(r.TgZ(0,"div",13),r.ALo(1,"systemstriphtmltagspipe"),r._uU(2),r.ALo(3,"systemstriphtmltagspipe"),r.qZA()),2&e){const e=r.oxw(3);r.Q6J("title",r.lcZ(1,2,e.value)),r.xp6(2),r.hij(" ",r.lcZ(3,4,e.value)," ")}}function D(e,t){if(1&e&&(r.YNc(0,E,2,2,"div",12),r.YNc(1,Y,4,6,"div",12)),2&e){const e=r.oxw(2);r.Q6J("ngIf",!e.striphtml),r.xp6(1),r.Q6J("ngIf",e.striphtml)}}function U(e,t){if(1&e&&(r.TgZ(0,"field-generic-display",8),r.YNc(1,q,2,1,"div",9),r.YNc(2,D,2,2,"ng-template",null,10,r.W1O),r.qZA()),2&e){const e=r.MAs(3),t=r.oxw();r.Q6J("fielddisplayclass",t.fielddisplayclass)("editable",t.isEditable())("fieldconfig",t.fieldconfig)("fieldid",t.fieldid),r.xp6(1),r.Q6J("ngIf",!t.truncated)("ngIfElse",e)}}function Q(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"button",21),r.NdJ("click",(function(){r.CHM(e);const t=r.oxw(2);return r.KtG(t.speechRecognitionStart())})),r._UZ(1,"system-button-icon",22),r.qZA()}2&e&&(r.xp6(1),r.Q6J("size","small")("icon","unmuted"))}function R(e,t){if(1&e&&(r.TgZ(0,"span"),r._uU(1),r.qZA()),2&e){const e=r.oxw(2);r.xp6(1),r.AsE("",e.textLength,"/",e.fieldlength,"")}}function j(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"div",14)(1,"textarea",15,16),r.NdJ("ngModelChange",(function(t){r.CHM(e);const s=r.oxw();return r.KtG(s.value=t)}))("system-resize",(function(t){r.CHM(e);const s=r.oxw();return r.KtG(s.resize(t))}))("change",(function(t){r.CHM(e);const s=r.oxw();return r.KtG(s.change(t))})),r.qZA(),r.YNc(4,Q,2,2,"button",17),r.TgZ(5,"div",18),r._UZ(6,"field-messages",19),r.YNc(7,R,2,2,"span",20),r.qZA()()}if(2&e){const e=r.oxw();r.Q6J("ngClass",e.getFieldClass()),r.xp6(1),r.Q6J("maxlength",e.maxLength)("ngModel",e.value)("ngStyle",e.getTextAreaStyle()),r.xp6(3),r.Q6J("ngIf",e.speechRecognition),r.xp6(2),r.Q6J("fieldname",e.fieldname),r.xp6(1),r.Q6J("ngIf",e.fieldlength>0)}}let B=(()=>{class fieldText extends d.O{model;view;language;metadata;router;modalservice;speechRecognition=!1;fixedHeight;fieldlength=0;striphtml=!1;textField;constructor(e,t,s,i,n,l){super(e,t,s,i,n),this.model=e,this.view=t,this.language=s,this.metadata=i,this.router=n,this.modalservice=l}ngOnInit(){super.ngOnInit(),(window.SpeechRecognition||window.webkitSpeechRecognition)&&(this.speechRecognition=this.fieldconfig.speechRecognition),this.getFieldLength(),this.setStripHtml()}setStripHtml(){this.fieldconfig.striphtml&&(this.striphtml=this.fieldconfig.striphtml)}getFieldLength(){let e=this.metadata.getFieldDefs(this.model.module,this.fieldname);e.len&&(this.fieldlength=parseInt(e.len,10)),this.fieldconfig.maxlength&&(!this.fieldlength||parseInt(this.fieldconfig.maxlength,10)<this.fieldlength)&&(this.fieldlength=this.fieldconfig.maxlength)}get maxLength(){return this.fieldlength>0?this.fieldlength:65e3}resize(e){this.fixedHeight=e.height}getTextAreaStyle(){let e=this.fieldconfig.minheight?this.fieldconfig.minheight.replace("px",""):80,t={"min-height":e+"px","max-height":(this.fieldconfig.maxheight?this.fieldconfig.maxheight.replace("px",""):300)+"px",height:this.fixedHeight?this.fixedHeight+"px":e+"px"};return!this.fixedHeight&&this.textField&&this.fieldconfig.maxheight&&(t.height=(this.textField.element.nativeElement.scrollHeight+2<this.fieldconfig.maxheight?this.textField.element.nativeElement.scrollHeight+2:this.fieldconfig.maxheight)+"px"),t}toSpeech(){let e=new SpeechSynthesisUtterance;e.text=this.value,e.lang=this.getSpeechLanguage(),speechSynthesis.speak(e)}getSpeechLanguage(){let e=this.language.currentlanguage.split("_");return 2!=e.length?"en-US":e[0]+"-"+e[1].toUpperCase()}get truncated(){return!!this.fieldconfig.truncate}speechRecognitionStart(){this.modalservice.openModal("SpeechRecognition",!1).subscribe((e=>{e.instance.textfield=this.textField}))}change(e){e.target.value&&(this.value=e.target.value)}get textLength(){return this.value?this.value.length:0}static ɵfac=function(e){return new(e||fieldText)(r.Y36(w.o),r.Y36(k.e),r.Y36(x.d),r.Y36(c.Pu),r.Y36(A.F0),r.Y36(L.o))};static ɵcmp=r.Xpm({type:fieldText,selectors:[["field-text"]],viewQuery:function(e,t){if(1&e&&r.Gf(O,5,r.s_b),2&e){let e;r.iGM(e=r.CRH())&&(t.textField=e.first)}},features:[r.qOj],decls:5,vars:4,consts:[[1,"slds-grid","slds-grid--vertical-align-center"],[3,"fieldname","fieldconfig",4,"ngIf"],["class","slds-col--bump-left",3,"click",4,"ngIf"],[3,"fielddisplayclass","editable","fieldconfig","fieldid",4,"ngIf"],["class","slds-form-element__control slds-is-relative","style","position:relative;",3,"ngClass",4,"ngIf"],[3,"fieldname","fieldconfig"],[1,"slds-col--bump-left",3,"click"],["icon","volume_high","size","xx-small"],[3,"fielddisplayclass","editable","fieldconfig","fieldid"],["style","white-space: pre-line;",4,"ngIf","ngIfElse"],["truncateddisplay",""],[2,"white-space","pre-line"],["style","max-width: 200px; text-overflow: ellipsis","class","slds-truncate",3,"title",4,"ngIf"],[1,"slds-truncate",2,"max-width","200px","text-overflow","ellipsis",3,"title"],[1,"slds-form-element__control","slds-is-relative",2,"position","relative",3,"ngClass"],[1,"slds-textarea","slds-scrollable--y","slds-m-vertical--xx-small",3,"maxlength","ngModel","ngStyle","ngModelChange","system-resize","change"],["focus","","textField",""],["class","slds-button slds-button_small slds-button_icon slds-is-absolute","style","right:8px;",3,"click",4,"ngIf"],[1,"slds-grid","slds-grid--vertical-align-center","slds-grid--align-spread"],[1,"slds-grow",3,"fieldname"],[4,"ngIf"],[1,"slds-button","slds-button_small","slds-button_icon","slds-is-absolute",2,"right","8px",3,"click"],[3,"size","icon"]],template:function(e,t){1&e&&(r.TgZ(0,"div",0),r.YNc(1,N,1,2,"field-label",1),r.YNc(2,F,2,0,"div",2),r.qZA(),r.YNc(3,U,4,6,"field-generic-display",3),r.YNc(4,j,8,7,"div",4)),2&e&&(r.xp6(1),r.Q6J("ngIf",t.displayLabel),r.xp6(1),r.Q6J("ngIf",t.value),r.xp6(1),r.Q6J("ngIf",!t.isEditMode()),r.xp6(1),r.Q6J("ngIf",t.isEditable()&&t.isEditMode()))},dependencies:[i.mk,i.O5,i.PC,n.Fj,n.JJ,n.nD,n.On,Z.J,I.r,S.h,u.q,C.D,M.a,J.u],encapsulation:2})}return fieldText})();function G(e,t){if(1&e&&r._UZ(0,"field-label",3),2&e){const e=r.oxw();r.Q6J("fieldname",e.fieldname)("fieldconfig",e.fieldconfig)}}function P(e,t){if(1&e&&(r.TgZ(0,"field-generic-display",4)(1,"div",5),r._uU(2),r.qZA()()),2&e){const e=r.oxw();r.Q6J("fielddisplayclass",e.fielddisplayclass)("editable",e.isEditable())("fieldconfig",e.fieldconfig),r.xp6(2),r.hij(" ",e.value," ")}}function H(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"div",6)(1,"input",7),r.NdJ("ngModelChange",(function(t){r.CHM(e);const s=r.oxw();return r.KtG(s.value=t)})),r.qZA(),r._UZ(2,"field-messages",8),r.qZA()}if(2&e){const e=r.oxw();r.Q6J("ngClass",e.getFieldClass()),r.xp6(1),r.Q6J("min",e.min)("max",e.max)("ngModel",e.value),r.xp6(1),r.Q6J("fieldname",e.fieldname)}}let z=(()=>{class fieldNumber extends d.O{model;view;language;metadata;router;constructor(e,t,s,i,n){super(e,t,s,i,n),this.model=e,this.view=t,this.language=s,this.metadata=i,this.router=n}get min(){return 0}get max(){return 120}static ɵfac=function(e){return new(e||fieldNumber)(r.Y36(w.o),r.Y36(k.e),r.Y36(x.d),r.Y36(c.Pu),r.Y36(A.F0))};static ɵcmp=r.Xpm({type:fieldNumber,selectors:[["field-number"]],features:[r.qOj],decls:3,vars:3,consts:[[3,"fieldname","fieldconfig",4,"ngIf"],[3,"fielddisplayclass","editable","fieldconfig",4,"ngIf"],["class","slds-form-element__control slds-grid slds-grid--align-spread slds-p-around--xx-small",3,"ngClass",4,"ngIf"],[3,"fieldname","fieldconfig"],[3,"fielddisplayclass","editable","fieldconfig"],[1,"slds-text-align_right"],[1,"slds-form-element__control","slds-grid","slds-grid--align-spread","slds-p-around--xx-small",3,"ngClass"],["type","number",1,"slds-input","slds-text-align_right",3,"min","max","ngModel","ngModelChange"],[3,"fieldname"]],template:function(e,t){1&e&&(r.YNc(0,G,1,2,"field-label",0),r.YNc(1,P,3,4,"field-generic-display",1),r.YNc(2,H,3,5,"div",2)),2&e&&(r.Q6J("ngIf",t.displayLabel),r.xp6(1),r.Q6J("ngIf",!t.isEditMode()),r.xp6(1),r.Q6J("ngIf",t.isEditable()&&t.isEditMode()))},dependencies:[i.mk,i.O5,n.Fj,n.wV,n.JJ,n.qQ,n.Fd,n.On,u.q,C.D,M.a],encapsulation:2})}return fieldNumber})();var V=s(15861),$=s(14505),K=s(13278),X=s(33369),W=s(26625),ee=s(66550),te=s(83463),se=s(13091);function ie(e,t){if(1&e&&r._UZ(0,"field-label",5),2&e){const e=r.oxw();r.Q6J("fieldname",e.fieldname)("fieldconfig",e.fieldconfig)}}function ne(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"button",6),r.NdJ("click",(function(){r.CHM(e);const t=r.oxw();return r.KtG(t.setEditMode())})),r._UZ(1,"system-button-icon",7),r.qZA()}2&e&&(r.xp6(1),r.Q6J("icon","edit"))}function le(e,t){if(1&e&&(r.TgZ(0,"div",13),r.NdJ("click",(function(e){return e.preventDefault()})),r.qZA()),2&e){const e=r.oxw(3);r.Q6J("innerHTML",e.parsedHtml,r.oJD)}}function oe(e,t){if(1&e&&r._UZ(0,"iframe",14),2&e){const e=r.oxw(3);r.Q6J("src",e.sanitizedValue,r.uOi)("ngStyle",e.heightStyle)}}function ae(e,t){if(1&e&&(r.TgZ(0,"div"),r.YNc(1,le,1,1,"div",11),r.YNc(2,oe,1,2,"iframe",12),r.qZA()),2&e){const e=r.oxw(2);r.xp6(1),r.Q6J("ngIf",!e.fieldconfig.asiframe),r.xp6(1),r.Q6J("ngIf",e.fieldconfig.asiframe)}}function de(e,t){if(1&e&&r._UZ(0,"div",15),2&e){const e=r.oxw(2);r.Q6J("title",e.value)("innerHTML",e.parsedHtml,r.oJD)}}function re(e,t){if(1&e&&(r.TgZ(0,"field-generic-display",8),r.YNc(1,ae,3,2,"div",9),r.YNc(2,de,1,2,"ng-template",null,10,r.W1O),r.qZA()),2&e){const e=r.MAs(3),t=r.oxw();r.Q6J("fielddisplayclass",t.fielddisplayclass)("editable",!1)("fieldconfig",t.fieldconfig),r.xp6(1),r.Q6J("ngIf",!t.truncated)("ngIfElse",e)}}function ce(e,t){if(1&e&&(r.TgZ(0,"option",29),r._UZ(1,"system-label",30),r.qZA()),2&e){const e=t.$implicit;r.Q6J("value",e.id),r.xp6(1),r.Q6J("label",e.label)}}function ue(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"li")(1,"div",20)(2,"label",21),r._UZ(3,"system-label",22),r._uU(4," : "),r.qZA(),r.TgZ(5,"div",23)(6,"div",24)(7,"select",25),r.NdJ("ngModelChange",(function(t){r.CHM(e);const s=r.oxw(2);return r.KtG(s.selectedSignatureId=t)}))("ngModelChange",(function(){r.CHM(e);const t=r.oxw(2);return r.KtG(t.renderSelectedSignature())})),r.TgZ(8,"option",26),r._UZ(9,"system-label",27),r.qZA(),r.YNc(10,ce,2,2,"option",28),r.qZA()()()()()}if(2&e){const e=r.oxw(2);r.xp6(7),r.Q6J("ngModel",e.selectedSignatureId)("disabled",0==(null==e.signatures?null:e.signatures.length)),r.xp6(3),r.Q6J("ngForOf",e.signatures)}}function me(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"div",16)(1,"system-html-editor",17),r.NdJ("ngModelChange",(function(t){r.CHM(e);const s=r.oxw();return r.KtG(s.value=t)}))("save$",(function(t){r.CHM(e);const s=r.oxw();return r.KtG(s.save(t))})),r.YNc(2,ue,11,3,"li",18),r.qZA(),r._UZ(3,"field-messages",19),r.qZA()}if(2&e){const e=r.oxw();r.Q6J("ngClass",e.getFieldClass()),r.xp6(1),r.Q6J("ngModel",e.value)("extendedmode",!e.fieldconfig.simplemode)("innerheight",e.fieldconfig.innerheight)("useMedialFile",e.metadata.checkModuleAcl("MediaFiles","list")&&e.metadata.checkModuleAcl("MediaFiles","view")),r.xp6(1),r.Q6J("ngIf",null==e.fieldconfig?null:e.fieldconfig.useSignature),r.xp6(1),r.Q6J("fieldname",e.fieldname)}}let ge=(()=>{class fieldHtml extends d.O{model;view;language;metadata;backend;toast;router;injector;broadcast;configurationService;modal;cdRef;sanitized;selectedSignatureId="";signatures=[];parsedHtml="";sanitizedValue;fullValue_cached;fullValue="";stylesheetField="";stylesheetToUse="";stylesheets;useStylesheets;signaturePreviousPosition=-1;constructor(e,t,s,i,n,l,o,a,d,r,c,u,m){super(e,t,s,i,o),this.model=e,this.view=t,this.language=s,this.metadata=i,this.backend=n,this.toast=l,this.router=o,this.injector=a,this.broadcast=d,this.configurationService=r,this.modal=c,this.cdRef=u,this.sanitized=m,this.stylesheets=this.metadata.getHtmlStylesheetNames()}get heightStyle(){return{height:this.fieldconfig.height?this.fieldconfig.height:"500px"}}get styleTag(){return this.stylesheetId?"<style>"+this.metadata.getHtmlStylesheetCode(this.stylesheetId)+"</style>":""}get stylesheetId(){return _.isEmpty(this.model.getField(this.stylesheetField))?this.stylesheetId=this.stylesheetToUse:this.model.getField(this.stylesheetField)}set stylesheetId(e){e&&this.model.setField(this.stylesheetField,e)}get value(){return this.model.getField(this.fieldname)}set value(e){this.model.setField(this.fieldname,e),this.setHtmlValue()}get truncated(){return!!this.fieldconfig.truncate}ngOnInit(){var e=this;return(0,V.Z)((function*(){e.setStylesheetField(),e.setStylesheetsToUse(),e.setHtmlValue(),e.fieldconfig?.useSignature&&(e.model.getField("mailbox_id")&&(yield e.loadMailboxSignature()),e.loadUserSignature()),e.modelChangesSubscriber()}))()}renderSelectedSignature(){if(this.clearSignature(),!this.selectedSignatureId)return;this.value||(this.value="");const e=`<div data-signature="" style="margin: 10px 0">${this.signatures.find((e=>e.id==this.selectedSignatureId)).content}</div>`;this.signaturePreviousPosition>-1?this.value=`${this.value.slice(0,this.signaturePreviousPosition)} ${e} ${this.value.slice(e.length+this.signaturePreviousPosition)}`:this.value=`<p><br></p> ${e} ${this.value}`}setEditMode(){this.model.startEdit(),this.view.setEditMode(),this.cdRef.detectChanges()}encodeHtml(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}loadMailboxSignature(){if(!this.isEditMode())return;const e=this.model.getField("mailbox_id");if(!e)return;const t=this.configurationService.getData("mailbox_signature_"+e);if(!t)return this.backend.get("Mailboxes",e).subscribe({next:t=>{t.email_signature&&(this.configurationService.setData("mailbox_signature_"+e,t.email_signature),this.addSignature(e,t.email_signature,"LBL_MAILBOX"),this.selectedSignatureId=e,this.renderSelectedSignature())}});this.addSignature(e,t,"LBL_MAILBOX"),this.selectedSignatureId=e,this.renderSelectedSignature()}addSignature(e,t,s){const i=this.signatures.find((t=>t.id==e));i?i.content=t:this.signatures.push({id:e,content:t,label:s})}loadUserSignature(){if(!this.isEditMode())return;const e=this.configurationService.getData("usersignature");if(!e)return;this.signatures.length;this.addSignature("user",e,"LBL_MY_SIGNATURE")}clearSignature(){if(!this.value)return;const e=document.createElement("div");e.innerHTML=this.value,Array.from(e.querySelectorAll("div[data-signature]")).forEach((t=>{this.signaturePreviousPosition=e.innerHTML.indexOf(t.outerHTML),t.parentNode.removeChild(t)})),this.value=e.innerHTML}setStylesheetField(){let e=this.metadata.getFieldDefs(this.model.module,this.fieldname);_.isEmpty(e.stylesheet_id_field)||(this.stylesheetField=e.stylesheet_id_field)}setStylesheetsToUse(){this.useStylesheets=!_.isEmpty(this.stylesheetField)&&!_.isEmpty(this.stylesheets),this.useStylesheets&&(1===this.stylesheets.length?this.stylesheetToUse=this.stylesheets[0].id:_.isEmpty(this.fieldconfig.stylesheetId)?this.stylesheetToUse=this.metadata.getHtmlStylesheetToUse(this.model.module,this.fieldname):this.stylesheetToUse=this.fieldconfig.stylesheetId)}setSanitizedValue(){return this.value&&(this.value.includes("</html>")?this.fullValue=this.value:this.fullValue=`<html><head><base target="_blank">${this.styleTag}</head><body class="spice">${this.value}</body></html>`),this.fullValue!=this.fullValue_cached&&(this.sanitizedValue=this.sanitized.bypassSecurityTrustResourceUrl(this.fullValue?"data:text/html;charset=UTF-8,"+encodeURIComponent(this.fullValue):""),this.fullValue_cached=this.fullValue),this.sanitizedValue}modelChangesSubscriber(){this.subscriptions.add(this.model.observeFieldChanges(this.fieldname).subscribe({next:e=>{this.setHtmlValue()}})),this.subscriptions.add(this.model.observeFieldChanges("mailbox_id").subscribe({next:e=>{this.fieldconfig?.useSignature&&e&&!this.signatures.some((t=>t.id==e))&&this.loadMailboxSignature()}}))}setHtmlValue(){let e=/<code>[\s\S]*?<\/code>/g,t=e.exec(this.value);for(;null!=t;)this.value=this.value.replace(t,this.encodeHtml(t)).replace("&lt;code&gt;","<code>").replace("&lt;/code&gt;","</code>"),t=e.exec(this.value);this.parsedHtml=this.sanitized.bypassSecurityTrustHtml(this.value),this.setSanitizedValue()}save(e){let t={date_modified:this.model.getField("date_modified"),[this.fieldname]:e};this.backend.save(this.model.module,this.model.id,t).subscribe({next:e=>{this.model.endEdit(),this.model.setField("date_modified",e.date_modified,!0),this.value=e[this.fieldname],this.model.startEdit(),this.toast.sendToast(this.language.getLabel("LBL_DATA_SAVED")+".","success")},error:e=>{this.toast.sendToast(this.language.getLabel("LBL_ERROR")+" "+e.status,"error",e.error.error.message)}})}static ɵfac=function(e){return new(e||fieldHtml)(r.Y36(w.o),r.Y36(k.e),r.Y36(x.d),r.Y36(c.Pu),r.Y36($.y),r.Y36(K.A),r.Y36(A.F0),r.Y36(r.zs3),r.Y36(X.f),r.Y36(W.C),r.Y36(L.o),r.Y36(r.sBO),r.Y36(ee.H7))};static ɵcmp=r.Xpm({type:fieldHtml,selectors:[["field-html"]],features:[r.qOj],decls:6,vars:4,consts:[[1,"slds-grid","slds-grid--vertical-align-center","slds-grid--align-spread"],[3,"fieldname","fieldconfig",4,"ngIf"],["class","slds-button slds-button--icon slds-m-left--xx-small spice-hover-button",3,"click",4,"ngIf"],[3,"fielddisplayclass","editable","fieldconfig",4,"ngIf"],["class","slds-form-element__control",3,"ngClass",4,"ngIf"],[3,"fieldname","fieldconfig"],[1,"slds-button","slds-button--icon","slds-m-left--xx-small","spice-hover-button",3,"click"],[3,"icon"],[3,"fielddisplayclass","editable","fieldconfig"],[4,"ngIf","ngIfElse"],["truncateddisplay",""],["class","slds-size--1-of-1 slds-rich-text-editor__output","style","white-space: normal; resize: vertical; overflow-y: auto;",3,"innerHTML","click",4,"ngIf"],["style","resize: vertical;","width","100%","frameborder","0","seamless","true","sandbox","",3,"src","ngStyle",4,"ngIf"],[1,"slds-size--1-of-1","slds-rich-text-editor__output",2,"white-space","normal","resize","vertical","overflow-y","auto",3,"innerHTML","click"],["width","100%","frameborder","0","seamless","true","sandbox","",2,"resize","vertical",3,"src","ngStyle"],[1,"slds-truncate",2,"max-width","200px","text-overflow","ellipsis",3,"title","innerHTML"],[1,"slds-form-element__control",3,"ngClass"],[3,"ngModel","extendedmode","innerheight","useMedialFile","ngModelChange","save$"],[4,"ngIf"],[3,"fieldname"],[1,"slds-form-element","slds-grid"],[1,"slds-form-element__label"],["label","LBL_SIGNATURE"],[1,"slds-form-element__control"],[1,"slds-select_container"],[1,"slds-select",3,"ngModel","disabled","ngModelChange"],["value",""],["label","LBL_NONE"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[3,"label"]],template:function(e,t){1&e&&(r.TgZ(0,"div",0)(1,"div"),r.YNc(2,ie,1,2,"field-label",1),r.qZA(),r.YNc(3,ne,2,1,"button",2),r.qZA(),r.YNc(4,re,4,5,"field-generic-display",3),r.YNc(5,me,4,7,"div",4)),2&e&&(r.xp6(2),r.Q6J("ngIf",t.displayLabel),r.xp6(1),r.Q6J("ngIf",!t.isEditMode()&&t.isEditable()),r.xp6(1),r.Q6J("ngIf",!t.isEditMode()),r.xp6(1),r.Q6J("ngIf",t.isEditable()&&t.isEditMode()))},dependencies:[i.mk,i.sg,i.O5,i.PC,n.YN,n.Kr,n.EJ,n.JJ,n.On,Z.J,te._,se.e,u.q,C.D,M.a],encapsulation:2})}return fieldHtml})();var he=s(83917);function pe(e,t){if(1&e&&(r.TgZ(0,"option",6),r._uU(1),r.qZA()),2&e){const e=t.$implicit;r.s9C("value",e.id),r.xp6(1),r.Oqu(e.name)}}function fe(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"select",3),r.NdJ("ngModelChange",(function(t){r.CHM(e);const s=r.oxw();return r.KtG(s.stylesheetId=t)}))("change",(function(){r.CHM(e);const t=r.oxw();return r.KtG(t.changeStylesheet())})),r._UZ(1,"option",4),r.YNc(2,pe,2,2,"option",5),r.qZA()}if(2&e){const e=r.oxw();r.Q6J("ngModel",e.stylesheetId),r.xp6(2),r.Q6J("ngForOf",e.stylesheets)}}let be=(()=>{class fieldHtmlEditor{metadata;footer;configurationService;modal;fieldvalue="";fieldid="";fieldconfig={};useStylesheetSwitcher;useStylesheets;editor=null;stylesheets=[];stylesheetIdValue="";tinymceConfig={remove_script_host:!0,relative_urls:!1,menubar:!1,statusbar:!0,resize:!0,browser_spellcheck:!0,image_advtab:!0,paste_as_text:!0,paste_filter_drop:!0,plugins:["link","code","image","lists","paste","table"],toolbar:"undo redo | formatselect | styleselect bold italic removeformat | bullist numlist | link image table | code",skin_url:"vendor/tinymce/skins/lightgray",setup:e=>{this.editor=e,e.on("change",(()=>{const t=e.getContent();this.content=t})),e.on("init",(()=>{this.fieldvalue&&this.editor.setContent(this.fieldvalue)}))},formats:{alignleft:{selector:"p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li,table,img",classes:"align-left"},aligncenter:{selector:"p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li,table,img",classes:"align-center"},alignright:{selector:"p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li,table,img",classes:"align-right"},alignjustify:{selector:"p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li,table,img",classes:"align-justify"},strikethrough:{inline:"del"}},style_formats:[{title:"Inline",items:[{title:"fett",icon:"bold",format:"bold"},{title:"kursiv",icon:"italic",format:"italic"},{title:"unterstrichen",icon:"underline",format:"underline"},{title:"strikethrough",icon:"strikethrough",format:"strikethrough"},{title:"hochgestellt",icon:"superscript",format:"superscript"},{title:"tiefgestellt",icon:"subscript",format:"subscript"}]},{title:"Ausrichtung",items:[{title:"links",icon:"alignleft",format:"alignleft"},{title:"mittig",icon:"aligncenter",format:"aligncenter"},{title:"rechts",icon:"alignright",format:"alignright"},{title:"Blocksatz",icon:"alignjustify",format:"alignjustify"}]}],style_formats_merge:!1,body_class:"spice"};get content(){return this.fieldvalue}set content(e){this.fieldvalue=e,this.contentchange.emit(e)}set input_stylesheetId(e){this.stylesheetIdValue=e}set stylesheetId(e){this.stylesheetIdValue=e,this.stylesheetIdChange.emit(e)}get stylesheetId(){return this.stylesheetIdValue}oldStylesheetId="";contentchange=new r.vpe;stylesheetIdChange=new r.vpe;constructor(e,t,s,i){this.metadata=e,this.footer=t,this.configurationService=s,this.modal=i,this.stylesheets=this.metadata.getHtmlStylesheetNames()}ngOnInit(){this.tinymceConfig.selector="#"+this.fieldid,this.tinymceConfig.document_base_url=this.configurationService.getFrontendUrl()}ngAfterViewInit(){this.metadata.loadLibs("tinymce").subscribe((e=>{this.useStylesheets&&this.setStylesheet(),tinymce.init(this.tinymceConfig)}))}changeStylesheet(){this.editor&&tinymce.remove(this.editor),this.setStylesheet(),tinymce.init(this.tinymceConfig)}setStylesheet(){let e=[];if(this.oldStylesheetId=this.stylesheetId,_.isEmpty(this.stylesheetId))delete this.tinymceConfig.content_style;else{if(e=this.metadata.getHtmlFormats(this.stylesheetId),e.length){let t=0;this.tinymceConfig.block_formats="",this.tinymceConfig.extended_valid_elements=[],this.tinymceConfig.custom_elements=[],this.tinymceConfig.block_formats+="Absatz=p;",this.tinymceConfig.style_formats.push({title:"Weiteres",items:[]});for(let s of e)if(_.isEmpty(s.block))this.tinymceConfig.style_formats[2].items.push({title:s.name,inline:s.inline,classes:s.classes,styles:s.styles});else{let e;t++,this.tinymceConfig.formats[e="custom_format_"+t]={title:s.name,inline:s.inline,block:s.block,classes:s.classes,styles:s.styles,wrapper:Boolean(Number(s.wrapper))},this.tinymceConfig.block_formats+=s.name+"="+e+";",this.tinymceConfig.extended_valid_elements.indexOf(s.block)&&this.tinymceConfig.extended_valid_elements.push(s.block),this.tinymceConfig.custom_elements.indexOf(s.block)&&this.tinymceConfig.custom_elements.push(s.block)}0===this.tinymceConfig.style_formats[2].items.length&&this.tinymceConfig.style_formats.splice(2,1)}this.tinymceConfig.content_style=this.metadata.getHtmlStylesheetCode(this.stylesheetId)}}fullScreen(){this.modal.openModal("SystemTinyMCEModal").subscribe((e=>{e.instance.content=this.fieldvalue,e.instance.updateContent.subscribe((e=>{this.fieldvalue=e,this.editor.setContent(e)}))}))}ngOnDestroy(){tinymce.remove(this.editor)}ngOnChanges(){this.editor&&this.fieldvalue&&this.editor.getContent()!==this.fieldvalue&&this.editor.setContent(this.fieldvalue),this.oldStylesheetId.length&&this.oldStylesheetId!=this.stylesheetId&&this.changeStylesheet()}static ɵfac=function(e){return new(e||fieldHtmlEditor)(r.Y36(c.Pu),r.Y36(he.M),r.Y36(W.C),r.Y36(L.o))};static ɵcmp=r.Xpm({type:fieldHtmlEditor,selectors:[["field-html-editor"]],inputs:{fieldvalue:"fieldvalue",fieldid:"fieldid",fieldconfig:"fieldconfig",useStylesheetSwitcher:"useStylesheetSwitcher",useStylesheets:"useStylesheets",input_stylesheetId:["stylesheetId","input_stylesheetId"]},outputs:{contentchange:"contentchange",stylesheetIdChange:"stylesheetIdChange"},features:[r.TTD],decls:3,vars:2,consts:[[1,"slds-m-vertical--xx-small"],[1,"slds-textarea","slds-scrollable--y","slds-m-vertical--xx-small",2,"height","250px",3,"id"],["class","slds-select slds-m-top--x-small",3,"ngModel","ngModelChange","change",4,"ngIf"],[1,"slds-select","slds-m-top--x-small",3,"ngModel","ngModelChange","change"],["value",""],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(e,t){1&e&&(r.TgZ(0,"div",0),r._UZ(1,"textarea",1),r.YNc(2,fe,3,2,"select",2),r.qZA()),2&e&&(r.xp6(1),r.Q6J("id",t.fieldid),r.xp6(1),r.Q6J("ngIf",t.useStylesheetSwitcher))},dependencies:[i.sg,i.O5,n.YN,n.Kr,n.EJ,n.JJ,n.On],styles:["[_nghost-%COMP%]   .mce-ico[_ngcontent-%COMP%]{color:#54698d;font-size:12px}","[_nghost-%COMP%]   .mce-text[_ngcontent-%COMP%]{color:#54698d;font-size:12px}","[_nghost-%COMP%]   .mce-btn[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{color:#54698d;font-size:12px}","[_nghost-%COMP%]   .mce-tinymce[_ngcontent-%COMP%]{border-radius:4px}","[_nghost-%COMP%]   .mce-widget[_ngcontent-%COMP%]{font-family:Titillium Web,sans-serif}"]})}return fieldHtmlEditor})();const _e=["editor"];let ve=(()=>{class fieldWYSIWYGEditor{model;view;language;editor;fieldname="";fieldSelection=void 0;constructor(e,t,s){this.model=e,this.view=t,this.language=s}get fieldcontent(){return this.model.getField(this.fieldname)}ngAfterViewInit(){this.editor.element.nativeElement.innerHTML=this.model.getField(this.fieldname)}eventHandler(e){this.fieldSelection=window.getSelection(),this.model.setField(this.fieldname,e.srcElement.innerHTML)}static ɵfac=function(e){return new(e||fieldWYSIWYGEditor)(r.Y36(w.o),r.Y36(k.e),r.Y36(x.d))};static ɵcmp=r.Xpm({type:fieldWYSIWYGEditor,selectors:[["field-wysiwyg-editor"]],viewQuery:function(e,t){if(1&e&&r.Gf(_e,7,r.s_b),2&e){let e;r.iGM(e=r.CRH())&&(t.editor=e.first)}},inputs:{fieldname:"fieldname"},decls:54,vars:9,consts:[[1,"demo-only",2,"min-height","180px"],[1,"slds-rich-text-editor","slds-form-element","slds-grid","slds-grid_vertical","slds-nowrap"],["role","toolbar",1,"slds-rich-text-editor__toolbar","slds-shrink-none"],["aria-label","Format text",1,"slds-button-group-list"],["tabindex","0","title","Provide description of action",1,"slds-button","slds-button_icon","slds-button_icon-border-filled"],[3,"icon"],[1,"slds-assistive-text"],["tabindex","-1","title","Provide description of action",1,"slds-button","slds-button_icon","slds-button_icon-border-filled"],["aria-label","Format body",1,"slds-button-group-list"],["aria-label","Remove Formatting",1,"slds-button-group-list"],[1,"slds-rich-text-editor__textarea","slds-grid"],["aria-label","Compose text","contenteditable","true",1,"slds-rich-text-area__content","slds-text-color_weak","slds-grow",3,"input"],["editor",""]],template:function(e,t){1&e&&(r.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"ul",3)(4,"li")(5,"button",4),r._UZ(6,"system-button-icon",5),r.TgZ(7,"span",6),r._uU(8,"Bold"),r.qZA()()(),r.TgZ(9,"li")(10,"button",7),r._UZ(11,"system-button-icon",5),r.TgZ(12,"span",6),r._uU(13,"Italic"),r.qZA()()(),r.TgZ(14,"li")(15,"button",7),r._UZ(16,"system-button-icon",5),r.TgZ(17,"span",6),r._uU(18,"Underline"),r.qZA()()(),r.TgZ(19,"li")(20,"button",7),r._UZ(21,"system-button-icon",5),r.TgZ(22,"span",6),r._uU(23,"Strike Through"),r.qZA()()()(),r.TgZ(24,"ul",8)(25,"li")(26,"button",7),r._UZ(27,"system-button-icon",5),r.TgZ(28,"span",6),r._uU(29,"Bulleted List"),r.qZA()()(),r.TgZ(30,"li")(31,"button",7),r._UZ(32,"system-button-icon",5),r.TgZ(33,"span",6),r._uU(34,"Numbered List"),r.qZA()()(),r.TgZ(35,"li")(36,"button",7),r._UZ(37,"system-button-icon",5),r.TgZ(38,"span",6),r._uU(39,"Indent"),r.qZA()()(),r.TgZ(40,"li")(41,"button",7),r._UZ(42,"system-button-icon",5),r.TgZ(43,"span",6),r._uU(44,"Outdent"),r.qZA()()()(),r.TgZ(45,"ul",9)(46,"li")(47,"button",7),r._UZ(48,"system-button-icon",5),r.TgZ(49,"span",6),r._uU(50,"Remove Formatting"),r.qZA()()()()(),r.TgZ(51,"div",10)(52,"div",11,12),r.NdJ("input",(function(e){return t.eventHandler(e)})),r.qZA()()()()),2&e&&(r.xp6(6),r.Q6J("icon","bold"),r.xp6(5),r.Q6J("icon","italic"),r.xp6(5),r.Q6J("icon","underline"),r.xp6(5),r.Q6J("icon","strikethrough"),r.xp6(6),r.Q6J("icon","richtextbulletedlist"),r.xp6(5),r.Q6J("icon","richtextnumberedlist"),r.xp6(5),r.Q6J("icon","richtextindent"),r.xp6(5),r.Q6J("icon","richtextoutdent"),r.xp6(6),r.Q6J("icon","remove_formatting"))},dependencies:[Z.J],encapsulation:2})}return fieldWYSIWYGEditor})();var ye=s(62422),xe=s(84270),we=s(15621);function Ze(e,t){if(1&e&&r._UZ(0,"field-label",3),2&e){const e=r.oxw();r.Q6J("fieldname",e.fieldname)("fieldconfig",e.fieldconfig)}}function Te(e,t){if(1&e&&(r.TgZ(0,"field-generic-display",4)(1,"div",5),r._UZ(2,"system-display-number",6),r.qZA()()),2&e){const e=r.oxw();r.Q6J("fielddisplayclass",e.fielddisplayclass)("fieldconfig",e.fieldconfig)("editable",e.isEditable()),r.xp6(2),r.Q6J("number",e.value)("precision",e.precision)}}function Ce(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"div",7)(1,"div",8)(2,"system-input-number",9),r.NdJ("ngModelChange",(function(t){r.CHM(e);const s=r.oxw();return r.KtG(s.value=t)})),r.qZA()(),r._UZ(3,"field-messages",10),r.qZA()}if(2&e){const e=r.oxw();r.Q6J("ngClass",e.getFieldClass()),r.xp6(2),r.Q6J("ngModel",e.value)("asNumber",!0)("precision",e.precision),r.xp6(1),r.Q6J("fieldname",e.fieldname)}}let ke=(()=>{class fieldFloat extends d.O{model;view;language;metadata;router;userpreferences;precision=0;constructor(e,t,s,i,n,l){super(e,t,s,i,n),this.model=e,this.view=t,this.language=s,this.metadata=i,this.router=n,this.userpreferences=l}ngOnInit(){this.precision=void 0===this.fieldconfig.precision||""===this.fieldconfig.precision?parseInt(this.userpreferences.toUse.currency_significant_digits,10):parseInt(this.fieldconfig.precision,10)}static ɵfac=function(e){return new(e||fieldFloat)(r.Y36(w.o),r.Y36(k.e),r.Y36(x.d),r.Y36(c.Pu),r.Y36(A.F0),r.Y36(ye.z))};static ɵcmp=r.Xpm({type:fieldFloat,selectors:[["field-float"]],features:[r.qOj],decls:3,vars:3,consts:[[3,"fieldname","fieldconfig",4,"ngIf"],[3,"fielddisplayclass","fieldconfig","editable",4,"ngIf"],["class","slds-form-element__control",3,"ngClass",4,"ngIf"],[3,"fieldname","fieldconfig"],[3,"fielddisplayclass","fieldconfig","editable"],[1,"slds-text-align_right"],[3,"number","precision"],[1,"slds-form-element__control",3,"ngClass"],[1,"slds-form-element","slds-m-vertical--xx-small"],[3,"ngModel","asNumber","precision","ngModelChange"],[3,"fieldname"]],template:function(e,t){1&e&&(r.YNc(0,Ze,1,2,"field-label",0),r.YNc(1,Te,3,5,"field-generic-display",1),r.YNc(2,Ce,4,5,"div",2)),2&e&&(r.Q6J("ngIf",t.displayLabel),r.xp6(1),r.Q6J("ngIf",!t.isEditMode()),r.xp6(1),r.Q6J("ngIf",t.isEditable()&&t.isEditMode()))},dependencies:[i.mk,i.O5,n.JJ,n.On,xe.G,we.i,u.q,C.D,M.a],encapsulation:2})}return fieldFloat})();var Ae=s(25547);function Le(e,t){if(1&e&&r._UZ(0,"field-label",3),2&e){const e=r.oxw();r.Q6J("fieldname",e.fieldname)("fieldconfig",e.fieldconfig)}}function Ie(e,t){if(1&e&&(r.TgZ(0,"field-generic-display",4)(1,"div",5),r._UZ(2,"system-display-number",6),r.qZA()()),2&e){const e=r.oxw();r.Q6J("fielddisplayclass",e.fielddisplayclass)("fieldconfig",e.fieldconfig)("editable",e.isEditable()),r.xp6(2),r.Q6J("number",e.value)("currency_id",e.currencyId)("precision",e.precision)}}function Se(e,t){if(1&e&&(r.TgZ(0,"div",16),r._uU(1),r.qZA()),2&e){const e=r.oxw(3);r.xp6(1),r.hij(" ",e.getCurrencySymbol(),"  ")}}function Me(e,t){if(1&e&&(r.TgZ(0,"option",21),r._uU(1),r.qZA()),2&e){const e=t.$implicit;r.Q6J("value",e.id),r.xp6(1),r.AsE("",e.iso," (",e.symbol,") ")}}function Je(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"div",17)(1,"div",18)(2,"select",19),r.NdJ("ngModelChange",(function(t){r.CHM(e);const s=r.oxw(3);return r.KtG(s.currencyId=t)})),r.YNc(3,Me,2,3,"option",20),r.qZA()()()}if(2&e){const e=r.oxw(3);r.xp6(2),r.Q6J("ngModel",e.currencyId),r.xp6(1),r.Q6J("ngForOf",e.currencies)}}const Oe=function(e){return{"slds-size--1-of-4":e}};function Ne(e,t){if(1&e&&(r.TgZ(0,"div",13),r.YNc(1,Se,2,1,"div",14),r.YNc(2,Je,4,2,"div",15),r.qZA()),2&e){const e=r.oxw(2);r.Q6J("ngClass",r.VKq(3,Oe,!e.fieldconfig.currencyReadonly)),r.xp6(1),r.Q6J("ngIf",e.fieldconfig.currencyReadonly),r.xp6(1),r.Q6J("ngIf",!e.fieldconfig.currencyReadonly)}}function Fe(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"div",7)(1,"div",8),r.YNc(2,Ne,3,5,"div",9),r.TgZ(3,"div",10)(4,"system-input-number",11),r.NdJ("ngModelChange",(function(t){r.CHM(e);const s=r.oxw();return r.KtG(s.value=t)})),r.qZA()()(),r._UZ(5,"field-messages",12),r.qZA()}if(2&e){const e=r.oxw();r.Q6J("ngClass",e.getFieldClass()),r.xp6(2),r.Q6J("ngIf",e.currencyidfield),r.xp6(2),r.Q6J("ngModel",e.value)("asNumber",!0)("precision",e.precision),r.xp6(1),r.Q6J("fieldname",e.fieldname)}}let qe=(()=>{class fieldCurrency extends d.O{model;view;language;metadata;router;currency;userpreferences;currencies=[];precision=0;currencyFormat=!0;currencyidfield="";constructor(e,t,s,i,n,l,o){super(e,t,s,i,n),this.model=e,this.view=t,this.language=s,this.metadata=i,this.router=n,this.currency=l,this.userpreferences=o,this.currencies=this.currency.getCurrencies()}ngOnInit(){if(this.precision=void 0===this.fieldconfig.precision||""===this.fieldconfig.precision?parseInt(this.userpreferences.toUse.currency_significant_digits,10):parseInt(this.fieldconfig.precision,10),this.currencyidfield=this.fieldconfig.field_currencyid,!this.currencyidfield){this.metadata.getModuleFields(this.model.module).currency_id&&(this.currencyidfield="currency_id")}this.setDefaultCurrencyId(),this.setCurrencyFromPreferences()}setDefaultCurrencyId(){if(this.currencyidfield&&!this.model.getField(this.currencyidfield)){let e=this.userpreferences.getPreference("currency");this.currencyId=e||"-99"}}set currencyId(e){this.currencyidfield&&this.model.setField(this.currencyidfield,e)}get currencyId(){return this.currencyidfield?this.model.getField(this.currencyidfield):-99}getCurrencySymbol(){let e,t=-99;if(this.currencyidfield){if(!this.model.getField(this.currencyidfield))return"";t=this.model.getField(this.currencyidfield)}return this.currencies.some((s=>{if(s.id==t)return e=s.symbol,!0})),e}handleViewModeChange(e){"edit"==e&&this.setCurrencyFromPreferences(),super.handleViewModeChange(e)}setCurrencyFromPreferences(){this.currencyidfield&&!this.model.getField(this.currencyidfield)&&this.model.setField(this.currencyidfield,this.userpreferences.toUse.currency)}static ɵfac=function(e){return new(e||fieldCurrency)(r.Y36(w.o),r.Y36(k.e),r.Y36(x.d),r.Y36(c.Pu),r.Y36(A.F0),r.Y36(Ae.A),r.Y36(ye.z))};static ɵcmp=r.Xpm({type:fieldCurrency,selectors:[["field-currency"]],features:[r.qOj],decls:3,vars:3,consts:[[3,"fieldname","fieldconfig",4,"ngIf"],[3,"fielddisplayclass","fieldconfig","editable",4,"ngIf"],["class","slds-form-element__control",3,"ngClass",4,"ngIf"],[3,"fieldname","fieldconfig"],[3,"fielddisplayclass","fieldconfig","editable"],[1,"slds-grid","slds-grid--align-end"],[3,"number","currency_id","precision"],[1,"slds-form-element__control",3,"ngClass"],[1,"slds-grid","slds-m-vertical--xx-small"],["class","slds-form-element slds-p-right--x-small",3,"ngClass",4,"ngIf"],[1,"slds-form-element","slds-grow"],[3,"ngModel","asNumber","precision","ngModelChange"],[3,"fieldname"],[1,"slds-form-element","slds-p-right--x-small",3,"ngClass"],["class","slds-height_full slds-align--absolute-center slds-p-around--none","style","border-color:transparent",4,"ngIf"],["class","slds-form-element__control",4,"ngIf"],[1,"slds-height_full","slds-align--absolute-center","slds-p-around--none",2,"border-color","transparent"],[1,"slds-form-element__control"],[1,"slds-select_container"],[1,"slds-select",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(e,t){1&e&&(r.YNc(0,Le,1,2,"field-label",0),r.YNc(1,Ie,3,6,"field-generic-display",1),r.YNc(2,Fe,6,6,"div",2)),2&e&&(r.Q6J("ngIf",t.displayLabel),r.xp6(1),r.Q6J("ngIf",!t.isEditMode()),r.xp6(1),r.Q6J("ngIf",t.isEditable()&&t.isEditMode()))},dependencies:[i.mk,i.sg,i.O5,n.YN,n.Kr,n.EJ,n.JJ,n.On,xe.G,we.i,u.q,C.D,M.a],encapsulation:2})}return fieldCurrency})();function Ee(e,t){if(1&e&&r._UZ(0,"field-label",4),2&e){const e=r.oxw();r.Q6J("fieldname",e.fieldname)("fieldconfig",e.fieldconfig)}}let Ye=(()=>{class fieldWeightedAmount extends qe{model;view;language;metadata;router;currency;userpreferences;constructor(e,t,s,i,n,l,o){super(e,t,s,i,n,l,o),this.model=e,this.view=t,this.language=s,this.metadata=i,this.router=n,this.currency=l,this.userpreferences=o,this.currencies=this.currency.getCurrencies()}get amountfield(){return this.fieldconfig.field_amount?this.fieldconfig.field_amount:"amount"}get probabilityfield(){return this.fieldconfig.field_probability?this.fieldconfig.field_probability:"probability"}getValue(){try{let e=this.model.getFieldValue("amount")?parseFloat(this.model.getFieldValue(this.amountfield)):0,t=this.model.getFieldValue("amount")?parseFloat(this.model.getFieldValue(this.probabilityfield)):0;return this.userpreferences.formatMoney(e*t/100)}catch(e){return 0}}static ɵfac=function(e){return new(e||fieldWeightedAmount)(r.Y36(w.o),r.Y36(k.e),r.Y36(x.d),r.Y36(c.Pu),r.Y36(A.F0),r.Y36(Ae.A),r.Y36(ye.z))};static ɵcmp=r.Xpm({type:fieldWeightedAmount,selectors:[["field-currency"]],features:[r.qOj],decls:8,vars:6,consts:[[3,"fieldname","fieldconfig",4,"ngIf"],[3,"fielddisplayclass","fieldconfig","editable"],[1,"slds-grid","slds-grid--align-spread"],["cass","slds-text-align--right"],[3,"fieldname","fieldconfig"]],template:function(e,t){1&e&&(r.YNc(0,Ee,1,2,"field-label",0),r.TgZ(1,"field-generic-display",1)(2,"div",2)(3,"div"),r._uU(4),r.qZA(),r.TgZ(5,"div",3)(6,"span"),r._uU(7),r.qZA()()()()),2&e&&(r.Q6J("ngIf",t.displayLabel),r.xp6(1),r.Q6J("fielddisplayclass",t.fielddisplayclass)("fieldconfig",t.fieldconfig)("editable",!1),r.xp6(3),r.hij(" ",t.getCurrencySymbol()," "),r.xp6(3),r.Oqu(t.getValue()))},dependencies:[i.O5,u.q,C.D],encapsulation:2})}return fieldWeightedAmount})();function De(e,t){if(1&e&&r._UZ(0,"field-label",4),2&e){const e=r.oxw();r.Q6J("fieldname",e.fieldname)("fieldconfig",e.fieldconfig)}}let Ue=(()=>{class fieldTotalAmount extends qe{model;view;language;metadata;router;currency;userpreferences;currencies=[];constructor(e,t,s,i,n,l,o){super(e,t,s,i,n,l,o),this.model=e,this.view=t,this.language=s,this.metadata=i,this.router=n,this.currency=l,this.userpreferences=o,this.currencies=this.currency.getCurrencies()}get sumfields(){let e=[];if(this.fieldconfig.sumfields){let t=this.fieldconfig.sumfields.split(",");for(let s of t)e.push(s.trim())}return e}getValue(){let e=0;for(let t of this.sumfields){let s=this.model.getFieldValue(t);s&&(e+=parseFloat(s))}return this.model.setField(this.fieldname,e),this.userpreferences.formatMoney(e)}static ɵfac=function(e){return new(e||fieldTotalAmount)(r.Y36(w.o),r.Y36(k.e),r.Y36(x.d),r.Y36(c.Pu),r.Y36(A.F0),r.Y36(Ae.A),r.Y36(ye.z))};static ɵcmp=r.Xpm({type:fieldTotalAmount,selectors:[["field-currency"]],features:[r.qOj],decls:8,vars:6,consts:[[3,"fieldname","fieldconfig",4,"ngIf"],[3,"fielddisplayclass","fieldconfig","editable"],[1,"slds-grid","slds-grid--align-spread"],["cass","slds-text-align--right"],[3,"fieldname","fieldconfig"]],template:function(e,t){1&e&&(r.YNc(0,De,1,2,"field-label",0),r.TgZ(1,"field-generic-display",1)(2,"div",2)(3,"div"),r._uU(4),r.qZA(),r.TgZ(5,"div",3)(6,"span"),r._uU(7),r.qZA()()()()),2&e&&(r.Q6J("ngIf",t.displayLabel),r.xp6(1),r.Q6J("fielddisplayclass",t.fielddisplayclass)("fieldconfig",t.fieldconfig)("editable",!1),r.xp6(3),r.hij(" ",t.getCurrencySymbol()," "),r.xp6(3),r.Oqu(t.getValue()))},dependencies:[i.O5,u.q,C.D],encapsulation:2})}return fieldTotalAmount})();function Qe(e,t){if(1&e&&r._UZ(0,"field-label",3),2&e){const e=r.oxw();r.Q6J("fieldname",e.fieldname)("fieldconfig",e.fieldconfig)}}function Re(e,t){if(1&e&&(r.TgZ(0,"field-generic-display",4),r._uU(1),r.qZA()),2&e){const e=r.oxw();r.Q6J("fielddisplayclass",e.fielddisplayclass)("editable",e.isEditable())("fieldconfig",e.fieldconfig)("fieldid",e.fieldid),r.xp6(1),r.hij(" ",e.getValue(),"\n")}}function je(e,t){if(1&e&&(r.TgZ(0,"option",12),r._uU(1),r.qZA()),2&e){const e=t.$implicit;r.Q6J("ngValue",e.value),r.xp6(1),r.Oqu(e.display)}}function Be(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"div",5)(1,"div",6)(2,"div",7)(3,"select",8,9),r.NdJ("ngModelChange",(function(t){r.CHM(e);const s=r.oxw();return r.KtG(s.value=t)})),r.YNc(5,je,2,2,"option",10),r.qZA()(),r._UZ(6,"field-messages",11),r.qZA()()}if(2&e){const e=r.oxw();r.xp6(1),r.Q6J("ngClass",e.getFieldClass()),r.xp6(2),r.Q6J("ngModel",e.value),r.xp6(2),r.Q6J("ngForOf",e.options),r.xp6(1),r.Q6J("fieldname",e.fieldname)}}let Ge=(()=>{class fieldEnum extends d.O{model;view;language;metadata;router;options=[];constructor(e,t,s,i,n){super(e,t,s,i,n),this.model=e,this.view=t,this.language=s,this.metadata=i,this.router=n,this.subscriptions.add(this.language.currentlanguage$.subscribe((e=>{this.getOptions()})))}ngOnInit(){super.ngOnInit(),this.getOptions()}getValue(){return this.language.getFieldDisplayOptionValue(this.model.module,this.fieldname,this.value)}getOptions(){let e=[],t=this.language.getFieldDisplayOptions(this.model.module,this.fieldname);for(let s in t)e.push({value:s,display:t[s]});if(this.options=e,this.fieldconfig.sortdirection)switch(this.fieldconfig.sortdirection.toLowerCase()){case"desc":this.options.sort(((e,t)=>e.display.toLowerCase()<t.display.toLowerCase()?1:-1));break;case"asc":this.options.sort(((e,t)=>e.display.toLowerCase()>t.display.toLowerCase()?1:-1))}}static ɵfac=function(e){return new(e||fieldEnum)(r.Y36(w.o),r.Y36(k.e),r.Y36(x.d),r.Y36(c.Pu),r.Y36(A.F0))};static ɵcmp=r.Xpm({type:fieldEnum,selectors:[["field-enum"]],features:[r.qOj],decls:3,vars:3,consts:[[3,"fieldname","fieldconfig",4,"ngIf"],[3,"fielddisplayclass","editable","fieldconfig","fieldid",4,"ngIf"],["class","slds-form-element",4,"ngIf"],[3,"fieldname","fieldconfig"],[3,"fielddisplayclass","editable","fieldconfig","fieldid"],[1,"slds-form-element"],[1,"slds-form-element__control",3,"ngClass"],[1,"slds-select_container","slds-m-vertical--xx-small"],[1,"slds-select",3,"ngModel","ngModelChange"],["focus",""],[3,"ngValue",4,"ngFor","ngForOf"],[3,"fieldname"],[3,"ngValue"]],template:function(e,t){1&e&&(r.YNc(0,Qe,1,2,"field-label",0),r.YNc(1,Re,2,5,"field-generic-display",1),r.YNc(2,Be,7,4,"div",2)),2&e&&(r.Q6J("ngIf",t.displayLabel),r.xp6(1),r.Q6J("ngIf",!t.isEditMode()),r.xp6(1),r.Q6J("ngIf",t.isEditMode()))},dependencies:[i.mk,i.sg,i.O5,n.YN,n.Kr,n.EJ,n.JJ,n.On,u.q,C.D,M.a],encapsulation:2})}return fieldEnum})();function Pe(e,t){if(1&e&&r._UZ(0,"field-label",3),2&e){const e=r.oxw();r.Q6J("fieldname",e.fieldname)("fieldconfig",e.fieldconfig)}}function He(e,t){if(1&e&&(r.TgZ(0,"field-generic-display",4),r._uU(1),r.qZA()),2&e){const e=r.oxw();r.Q6J("fielddisplayclass",e.fielddisplayclass)("editable",e.isEditable())("fieldconfig",e.fieldconfig),r.xp6(1),r.hij(" ",e.displayValue,"\n")}}function ze(e,t){if(1&e&&(r.TgZ(0,"option",11),r._uU(1),r.qZA()),2&e){const e=t.$implicit;r.Q6J("value",e.value),r.xp6(1),r.Oqu(e.display)}}function Ve(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"div",5)(1,"div",6)(2,"div",7)(3,"select",8),r.NdJ("ngModelChange",(function(t){r.CHM(e);const s=r.oxw();return r.KtG(s.value=t)})),r.YNc(4,ze,2,2,"option",9),r.qZA()(),r._UZ(5,"field-messages",10),r.qZA()()}if(2&e){const e=r.oxw();r.xp6(1),r.Q6J("ngClass",e.getFieldClass()),r.xp6(2),r.Q6J("ngModel",e.value),r.xp6(1),r.Q6J("ngForOf",e.options),r.xp6(1),r.Q6J("fieldname",e.fieldname)}}let $e=(()=>{class fieldLanguage extends d.O{model;view;language;metadata;router;displayValue="";options=[];constructor(e,t,s,i,n){super(e,t,s,i,n),this.model=e,this.view=t,this.language=s,this.metadata=i,this.router=n}ngOnInit(){super.ngOnInit(),this.getOptions(),this.subscribeToDataChanges()}getOptions(){this.options=this.language.getAvialableLanguages().map((e=>({value:e.language,display:this.language.getLabel("LANG_"+e.language.toUpperCase())}))),this.fieldconfig.canBeEmpty&&this.options.unshift({value:"",display:""}),this.options.sort(((e,t)=>e.display.localeCompare(t.display)))}subscribeToDataChanges(){this.subscriptions.add(this.model.data$.subscribe((e=>{e[this.fieldname]&&this.value!=e[this.fieldname]&&(this.value=e[this.fieldname]),this.displayValue!=this.value&&this.setDisplayValue()})))}setDisplayValue(){const e=this.options.find((e=>e.value==this.model.getField(this.fieldname)));this.displayValue=e?.display||""}static ɵfac=function(e){return new(e||fieldLanguage)(r.Y36(w.o),r.Y36(k.e),r.Y36(x.d),r.Y36(c.Pu),r.Y36(A.F0))};static ɵcmp=r.Xpm({type:fieldLanguage,selectors:[["field-enum"]],features:[r.qOj],decls:3,vars:3,consts:[[3,"fieldname","fieldconfig",4,"ngIf"],[3,"fielddisplayclass","editable","fieldconfig",4,"ngIf"],["class","slds-form-element",4,"ngIf"],[3,"fieldname","fieldconfig"],[3,"fielddisplayclass","editable","fieldconfig"],[1,"slds-form-element"],[1,"slds-form-element__control",3,"ngClass"],[1,"slds-select_container","slds-m-vertical--xx-small"],[1,"slds-select",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[3,"fieldname"],[3,"value"]],template:function(e,t){1&e&&(r.YNc(0,Pe,1,2,"field-label",0),r.YNc(1,He,2,4,"field-generic-display",1),r.YNc(2,Ve,6,4,"div",2)),2&e&&(r.Q6J("ngIf",t.displayLabel),r.xp6(1),r.Q6J("ngIf",!t.isEditMode()),r.xp6(1),r.Q6J("ngIf",t.isEditMode()))},dependencies:[i.mk,i.sg,i.O5,n.YN,n.Kr,n.EJ,n.JJ,n.On,u.q,C.D,M.a],encapsulation:2})}return fieldLanguage})();function Ke(e,t){if(1&e&&(r.TgZ(0,"div",4)(1,"span",5)(2,"a",6),r._uU(3),r.qZA(),r.TgZ(4,"button",7),r._UZ(5,"system-button-icon",8),r.qZA()()()),2&e){const e=t.$implicit;r.xp6(3),r.Oqu(e.displayname),r.xp6(2),r.Q6J("icon","close")}}let Xe=(()=>{class fieldEmailTo extends d.O{model;view;language;metadata;router;backend;loadingOptions=!1;constructor(e,t,s,i,n,l){super(e,t,s,i,n),this.model=e,this.view=t,this.language=s,this.metadata=i,this.router=n,this.backend=l}static ɵfac=function(e){return new(e||fieldEmailTo)(r.Y36(w.o),r.Y36(k.e),r.Y36(x.d),r.Y36(c.Pu),r.Y36(A.F0),r.Y36($.y))};static ɵcmp=r.Xpm({type:fieldEmailTo,selectors:[["field-email-to"]],features:[r.qOj],decls:4,vars:2,consts:[[1,"slds-form-element"],[3,"fieldname"],[1,"slds-form-element__control"],["class","slds-pill_container",4,"ngFor","ngForOf"],[1,"slds-pill_container"],[1,"slds-pill"],["href","javascript:void(0);",1,"slds-pill__label"],[1,"slds-button","slds-button--icon","slds-pill__remove"],[3,"icon"]],template:function(e,t){1&e&&(r.TgZ(0,"div",0),r._UZ(1,"field-label",1),r.TgZ(2,"div",2),r.YNc(3,Ke,6,2,"div",3),r.qZA()()),2&e&&(r.xp6(1),r.Q6J("fieldname","to_addrs_names"),r.xp6(2),r.Q6J("ngForOf",t.model.data.to_addrs_names))},dependencies:[i.sg,Z.J,u.q],encapsulation:2})}return fieldEmailTo})();var We=s(12803);function et(e,t){if(1&e&&r._UZ(0,"field-label",3),2&e){const e=r.oxw();r.Q6J("fieldname",e.fieldname)("fieldconfig",e.fieldconfig)}}function tt(e,t){1&e&&r._UZ(0,"system-stencil")}function st(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"button",9),r.NdJ("click",(function(){r.CHM(e);const t=r.oxw(3);return r.KtG(t.setEditMode())})),r._UZ(1,"system-button-icon",10),r.qZA()}2&e&&(r.xp6(1),r.Q6J("icon","edit"))}function it(e,t){if(1&e&&(r.TgZ(0,"div",6)(1,"div",7),r._uU(2),r.qZA(),r.YNc(3,st,2,1,"button",8),r.qZA()),2&e){const e=r.oxw(2);r.Q6J("ngClass",e.fielddisplayclass),r.xp6(2),r.Oqu(e.getValue()),r.xp6(1),r.Q6J("ngIf",e.isEditable())}}function nt(e,t){if(1&e&&(r.TgZ(0,"div"),r.YNc(1,tt,1,0,"system-stencil",4),r.YNc(2,it,4,3,"ng-template",null,5,r.W1O),r.qZA()),2&e){const e=r.MAs(3),t=r.oxw();r.xp6(1),r.Q6J("ngIf",t.model.isLoading)("ngIfElse",e)}}function lt(e,t){if(1&e&&(r.TgZ(0,"option",18),r._uU(1),r.qZA()),2&e){const e=t.$implicit;r.Q6J("ngValue",e.id),r.xp6(1),r.Oqu(e.summary_text)}}function ot(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"div",11)(1,"div",12)(2,"div",13)(3,"select",14),r.NdJ("ngModelChange",(function(t){r.CHM(e);const s=r.oxw();return r.KtG(s.value=t)}))("change",(function(t){r.CHM(e);const s=r.oxw();return r.KtG(s.chooseTemplate(t))})),r._UZ(4,"option",15),r.YNc(5,lt,2,2,"option",16),r.qZA()(),r._UZ(6,"field-messages",17),r.qZA()()}if(2&e){const e=r.oxw();r.xp6(1),r.Q6J("ngClass",e.getFieldClass()),r.xp6(2),r.Q6J("disabled",e.isDisabled)("ngModel",e.value),r.xp6(2),r.Q6J("ngForOf",e.availableTemplates),r.xp6(1),r.Q6J("fieldname",e.fieldname)}}let at=(()=>{class fieldEmailTemplates extends d.O{model;view;language;metadata;router;backend;modal;configuration;isLoaded=!1;availableTemplates=[];constructor(e,t,s,i,n,l,o,a){super(e,t,s,i,n),this.model=e,this.view=t,this.language=s,this.metadata=i,this.router=n,this.backend=l,this.modal=o,this.configuration=a}get subjectField(){return this.fieldconfig.subject?this.fieldconfig.subject:"name"}get bodyField(){return this.fieldconfig.body?this.fieldconfig.body:"body"}get addtocurrentquote(){return 1==this.fieldconfig.addtocurrentquote}get isDisabled(){return!this.model.getFieldValue("parent_type")||""==this.model.getFieldValue("parent_type")||!this.isLoaded||0==this.availableTemplates.length}getValue(){for(let e of this.availableTemplates)if(e.id==this.value)return e.name}ngOnInit(){let e=this.configuration.getData("EmailTemplates");if(e)this.availableTemplates=e.filter((e=>"email"==e.type&&("*"==e.for_bean||e.for_bean==this.model.getFieldValue("parent_type")))),this.availableTemplates.sort(((e,t)=>e.name.localeCompare(t.name))),this.isLoaded=!0;else{let e={start:0,limit:500,listid:"all"};this.backend.getRequest("module/EmailTemplates",e).subscribe((e=>{this.configuration.setData("EmailTemplates",e.list),this.availableTemplates=e.list.filter((e=>"email"==e.type&&("*"==e.for_bean||e.for_bean==this.model.getFieldValue("parent_type")))),this.availableTemplates.sort(((e,t)=>e.name.localeCompare(t.name))),this.isLoaded=!0}))}}chooseTemplate(e){""!=this.value?this.modal.openModal("SystemLoadingModal",!1).subscribe((e=>{this.backend.getRequest("module/EmailTemplates/"+this.value+"/parse/"+this.model.getFieldValue("parent_type")+"/"+this.model.getFieldValue("parent_id")).subscribe((t=>{this.model.getField(this.subjectField)||this.model.setField(this.subjectField,t.subject);let s=document.implementation.createHTMLDocument("Virtual Document");s.documentElement.innerHTML=this.model.getFieldValue(this.bodyField);let i=s.querySelectorAll("div[data-spice-temp-quote]"),n=s.querySelectorAll("div[data-signature]"),l=s.querySelectorAll("div[data-spice-reply-quote]");i[0]?.parentNode.removeChild(i[0]);let o=['<div class="spicecrm_temp_quote">'+t.body_html+"</div>",n[0]?.outerHTML,l[0]?.outerHTML].join("<p><br></p>");this.model.setField(this.bodyField,o),e.instance.self.destroy()}))})):this.model.setField(this.bodyField,"")}static ɵfac=function(e){return new(e||fieldEmailTemplates)(r.Y36(w.o),r.Y36(k.e),r.Y36(x.d),r.Y36(c.Pu),r.Y36(A.F0),r.Y36($.y),r.Y36(L.o),r.Y36(W.C))};static ɵcmp=r.Xpm({type:fieldEmailTemplates,selectors:[["field-email-templates"]],features:[r.qOj],decls:3,vars:3,consts:[[3,"fieldname","fieldconfig",4,"ngIf"],[4,"ngIf"],["class","slds-form-element",4,"ngIf"],[3,"fieldname","fieldconfig"],[4,"ngIf","ngIfElse"],["displaycontent",""],[1,"slds-grid",3,"ngClass"],[1,"slds-truncate"],["class","slds-button slds-button--icon slds-col_bump-left slds-p-left--xx-small",3,"click",4,"ngIf"],[1,"slds-button","slds-button--icon","slds-col_bump-left","slds-p-left--xx-small",3,"click"],[3,"icon"],[1,"slds-form-element"],[1,"slds-form-element__control",3,"ngClass"],[1,"slds-select_container","slds-m-vertical--xx-small"],[1,"slds-select",3,"disabled","ngModel","ngModelChange","change"],["value",""],[3,"ngValue",4,"ngFor","ngForOf"],[3,"fieldname"],[3,"ngValue"]],template:function(e,t){1&e&&(r.YNc(0,et,1,2,"field-label",0),r.YNc(1,nt,4,2,"div",1),r.YNc(2,ot,7,5,"div",2)),2&e&&(r.Q6J("ngIf",t.displayLabel),r.xp6(1),r.Q6J("ngIf",!t.isEditMode()),r.xp6(1),r.Q6J("ngIf",t.isEditMode()))},dependencies:[i.mk,i.sg,i.O5,n.YN,n.Kr,n.EJ,n.JJ,n.On,Z.J,We.B,u.q,M.a],encapsulation:2})}return fieldEmailTemplates})();function dt(e,t){if(1&e&&r._UZ(0,"field-label",3),2&e){const e=r.oxw();r.Q6J("fieldname",e.fieldname)("fieldconfig",e.fieldconfig)}}function rt(e,t){1&e&&r._UZ(0,"system-stencil")}function ct(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"button",9),r.NdJ("click",(function(){r.CHM(e);const t=r.oxw(3);return r.KtG(t.setEditMode())})),r._UZ(1,"system-button-icon",10),r.qZA()}2&e&&(r.xp6(1),r.Q6J("icon","edit"))}function ut(e,t){if(1&e&&(r.TgZ(0,"div",6)(1,"div",7),r._uU(2),r.qZA(),r.YNc(3,ct,2,1,"button",8),r.qZA()),2&e){const e=r.oxw(2);r.Q6J("ngClass",e.fielddisplayclass),r.xp6(2),r.Oqu(e.getValue()),r.xp6(1),r.Q6J("ngIf",e.isEditable())}}function mt(e,t){if(1&e&&(r.TgZ(0,"div"),r.YNc(1,rt,1,0,"system-stencil",4),r.YNc(2,ut,4,3,"ng-template",null,5,r.W1O),r.qZA()),2&e){const e=r.MAs(3),t=r.oxw();r.xp6(1),r.Q6J("ngIf",t.model.isLoading)("ngIfElse",e)}}function gt(e,t){if(1&e&&(r.TgZ(0,"option",17),r._uU(1),r.qZA()),2&e){const e=t.$implicit;r.Q6J("ngValue",e.id),r.xp6(1),r.Oqu(e.name)}}function ht(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"div",11)(1,"div",12)(2,"div",13)(3,"select",14),r.NdJ("ngModelChange",(function(t){r.CHM(e);const s=r.oxw();return r.KtG(s.value=t)}))("change",(function(t){r.CHM(e);const s=r.oxw();return r.KtG(s.chooseTemplate(t))})),r.YNc(4,gt,2,2,"option",15),r.qZA()(),r._UZ(5,"field-messages",16),r.qZA()()}if(2&e){const e=r.oxw();r.xp6(1),r.Q6J("ngClass",e.getFieldClass()),r.xp6(2),r.Q6J("disabled",e.isDisabled)("ngModel",e.value),r.xp6(1),r.Q6J("ngForOf",e.availableTemplates),r.xp6(1),r.Q6J("fieldname",e.fieldname)}}let pt=(()=>{class fieldTextMessageTemplates extends d.O{model;view;language;metadata;router;backend;modal;configuration;isLoaded=!1;availableTemplates=[];constructor(e,t,s,i,n,l,o,a){super(e,t,s,i,n),this.model=e,this.view=t,this.language=s,this.metadata=i,this.router=n,this.backend=l,this.modal=o,this.configuration=a}get bodyField(){return this.fieldconfig.body?this.fieldconfig.body:"description"}get isDisabled(){return!this.model.getFieldValue("parent_type")||""==this.model.getFieldValue("parent_type")||!this.isLoaded||0==this.availableTemplates.length}getValue(){for(let e of this.availableTemplates)if(e.id==this.value)return e.name}ngOnInit(){let e=this.configuration.getData("TextMessageTemplates");if(e)this.availableTemplates=e.filter((e=>"*"==e.parent_type||e.parent_type==this.model.getFieldValue("parent_type"))),this.isLoaded=!0;else{let e={start:0,limit:500,listid:"all"};this.backend.getRequest("module/TextMessageTemplates",e).subscribe((e=>{this.configuration.setData("TextMessageTemplates",e.list),this.availableTemplates=e.list.filter((e=>"*"==e.parent_type||e.parent_type==this.model.getFieldValue("parent_type"))),this.isLoaded=!0}))}}chooseTemplate(e){""!=this.value&&this.modal.openModal("SystemLoadingModal",!1).subscribe((e=>{this.backend.getRequest("module/TextMessageTemplates/"+this.value+"/parse/"+this.model.getFieldValue("parent_type")+"/"+this.model.getFieldValue("parent_id")).subscribe((t=>{this.model.setField(this.bodyField,t.description),e.instance.self.destroy()}))}))}static ɵfac=function(e){return new(e||fieldTextMessageTemplates)(r.Y36(w.o),r.Y36(k.e),r.Y36(x.d),r.Y36(c.Pu),r.Y36(A.F0),r.Y36($.y),r.Y36(L.o),r.Y36(W.C))};static ɵcmp=r.Xpm({type:fieldTextMessageTemplates,selectors:[["field-textmessage-templates"]],features:[r.qOj],decls:3,vars:3,consts:[[3,"fieldname","fieldconfig",4,"ngIf"],[4,"ngIf"],["class","slds-form-element",4,"ngIf"],[3,"fieldname","fieldconfig"],[4,"ngIf","ngIfElse"],["displaycontent",""],[1,"slds-grid",3,"ngClass"],[1,"slds-truncate"],["class","slds-button slds-button--icon slds-col_bump-left slds-p-left--xx-small",3,"click",4,"ngIf"],[1,"slds-button","slds-button--icon","slds-col_bump-left","slds-p-left--xx-small",3,"click"],[3,"icon"],[1,"slds-form-element"],[1,"slds-form-element__control",3,"ngClass"],[1,"slds-select_container","slds-m-vertical--xx-small"],[1,"slds-select",3,"disabled","ngModel","ngModelChange","change"],[3,"ngValue",4,"ngFor","ngForOf"],[3,"fieldname"],[3,"ngValue"]],template:function(e,t){1&e&&(r.YNc(0,dt,1,2,"field-label",0),r.YNc(1,mt,4,2,"div",1),r.YNc(2,ht,6,5,"div",2)),2&e&&(r.Q6J("ngIf",t.displayLabel),r.xp6(1),r.Q6J("ngIf",!t.isEditMode()),r.xp6(1),r.Q6J("ngIf",t.isEditMode()))},dependencies:[i.mk,i.sg,i.O5,n.YN,n.Kr,n.EJ,n.JJ,n.On,Z.J,We.B,u.q,M.a],encapsulation:2})}return fieldTextMessageTemplates})();var ft=s(7514);let bt=(()=>{class fieldMultienumCheckBox{model;view;language;metadata;fieldname="";option="";disabled=!1;fieldid="";constructor(e,t,s,i){this.model=e,this.view=t,this.language=s,this.metadata=i,this.fieldid=this.model.generateGuid()}getValueArray(){return this.model.getField(this.fieldname)?this.model.getField(this.fieldname).substring(1,this.model.getField(this.fieldname).length-1).split("^,^"):[]}get checked(){if(this.model.getField(this.fieldname)){let e=!1;return this.model.getField(this.fieldname)==this.option.value&&(e=!0),this.model.getField(this.fieldname).indexOf("^"+this.option.value+"^")>-1&&(e=!0),e}return!1}set checked(e){let t=this.getValueArray(),s=t.indexOf(this.option.value);-1===s?t.push(this.option.value):t.splice(s,1),this.model.setField(this.fieldname,"^"+t.join("^,^")+"^")}static ɵfac=function(e){return new(e||fieldMultienumCheckBox)(r.Y36(w.o),r.Y36(k.e),r.Y36(x.d),r.Y36(c.Pu))};static ɵcmp=r.Xpm({type:fieldMultienumCheckBox,selectors:[["field-multienum-checkbox"]],inputs:{fieldname:"fieldname",option:"option",disabled:"disabled"},decls:2,vars:3,consts:[[3,"disabled","ngModel","ngModelChange"]],template:function(e,t){1&e&&(r.TgZ(0,"system-checkbox",0),r.NdJ("ngModelChange",(function(e){return t.checked=e})),r._uU(1),r.qZA()),2&e&&(r.Q6J("disabled",t.disabled)("ngModel",t.checked),r.xp6(1),r.Oqu(t.option.display))},dependencies:[n.JJ,n.On,ft.U],encapsulation:2})}return fieldMultienumCheckBox})();function _t(e,t){if(1&e&&r._UZ(0,"field-label",3),2&e){const e=r.oxw();r.Q6J("fieldname",e.fieldname)("fieldconfig",e.fieldconfig)}}function vt(e,t){if(1&e&&(r.TgZ(0,"span"),r._uU(1),r.qZA()),2&e){const e=r.oxw(2);r.xp6(1),r.Oqu(e.getValue())}}function yt(e,t){if(1&e&&r._UZ(0,"field-multienum-checkbox",11),2&e){const e=t.$implicit,s=r.oxw(4);r.Q6J("fieldname",s.fieldname)("option",e)}}function xt(e,t){if(1&e&&(r.TgZ(0,"div",9),r.YNc(1,yt,1,2,"field-multienum-checkbox",10),r.qZA()),2&e){const e=t.$implicit,s=r.oxw(3);r.Q6J("ngClass",s.getFieldClass()),r.xp6(1),r.Q6J("ngForOf",e)}}function wt(e,t){if(1&e&&(r.TgZ(0,"div",7),r.YNc(1,xt,2,2,"div",8),r.qZA()),2&e){const e=r.oxw(2);r.xp6(1),r.Q6J("ngForOf",e.options)}}function Zt(e,t){if(1&e&&(r.TgZ(0,"field-generic-display",4),r.YNc(1,vt,2,1,"span",5),r.YNc(2,wt,2,1,"div",6),r.qZA()),2&e){const e=r.oxw();r.Q6J("fielddisplayclass",e.fielddisplayclass)("editable",e.isEditable())("fieldconfig",e.fieldconfig),r.xp6(1),r.Q6J("ngIf",!e.displayCheckboxes),r.xp6(1),r.Q6J("ngIf",e.displayCheckboxes)}}function Tt(e,t){if(1&e&&r._UZ(0,"field-multienum-checkbox",15),2&e){const e=t.$implicit,s=r.oxw(3);r.Q6J("fieldname",s.fieldname)("option",e)}}function Ct(e,t){if(1&e&&(r.TgZ(0,"div",9),r.YNc(1,Tt,1,2,"field-multienum-checkbox",14),r.qZA()),2&e){const e=t.$implicit,s=r.oxw(2);r.Q6J("ngClass",s.getFieldClass()),r.xp6(1),r.Q6J("ngForOf",e)}}function kt(e,t){if(1&e&&(r.TgZ(0,"div",12)(1,"div",7),r.YNc(2,Ct,2,2,"div",8),r.qZA(),r._UZ(3,"field-messages",13),r.qZA()),2&e){const e=r.oxw();r.xp6(2),r.Q6J("ngForOf",e.options),r.xp6(1),r.Q6J("fieldname",e.fieldname)}}let At=(()=>{class fieldMultienum extends d.O{model;view;language;metadata;router;options=[];constructor(e,t,s,i,n){super(e,t,s,i,n),this.model=e,this.view=t,this.language=s,this.metadata=i,this.router=n,this.subscriptions.add(this.language.currentlanguage$.subscribe((e=>{this.buildOptions()})))}ngOnInit(){this.buildOptions()}get columns(){return this.fieldconfig.columns?parseInt(this.fieldconfig.columns,10):4}get displayCheckboxes(){return!!this.fieldconfig.displaycheckboxes}getValue(){let e=[],t=this.getValueArray();for(let s of t){let t=this.language.getFieldDisplayOptionValue(this.model.module,this.fieldname,s);t&&e.push(t)}if(this.fieldconfig.sortdirection)switch(this.fieldconfig.sortdirection.toLowerCase()){case"desc":e.sort(((e,t)=>e.toLowerCase()<t.toLowerCase()?1:-1));break;case"asc":e.sort(((e,t)=>e.toLowerCase()>t.toLowerCase()?1:-1))}return e.join(", ")}getValueArray(){try{let e=this.model.getFieldValue(this.fieldname);return"^"==e.substring(0,1)&&(e=e.substring(1,e.length-1)),e.split("^,^")}catch(e){return[]}}buildOptions(){let e=[],t=this.language.getFieldDisplayOptions(this.model.module,this.fieldname);for(let s in t)e.push({id:this.model.generateGuid(),value:s,display:t[s]});if(this.options=e,this.fieldconfig.sortdirection)switch(this.fieldconfig.sortdirection.toLowerCase()){case"desc":this.options.sort(((e,t)=>e.display.toLowerCase()<t.display.toLowerCase()?1:-1));break;case"asc":this.options.sort(((e,t)=>e.display.toLowerCase()>t.display.toLowerCase()?1:-1))}let s=0;for(let e in this.options)s++;this.options=[];let i=Math.round(s/this.columns),n=0,l=[];for(let t of e)l.push(t),l.length>=i&&n!=this.columns-1&&(this.options.push(l),n++,l=[]);(n==this.columns||l.length>0)&&this.options.push(l)}static ɵfac=function(e){return new(e||fieldMultienum)(r.Y36(w.o),r.Y36(k.e),r.Y36(x.d),r.Y36(c.Pu),r.Y36(A.F0))};static ɵcmp=r.Xpm({type:fieldMultienum,selectors:[["field-multienum"]],features:[r.qOj],decls:3,vars:3,consts:[[3,"fieldname","fieldconfig",4,"ngIf"],[3,"fielddisplayclass","editable","fieldconfig",4,"ngIf"],["class","slds-form-element",4,"ngIf"],[3,"fieldname","fieldconfig"],[3,"fielddisplayclass","editable","fieldconfig"],[4,"ngIf"],["class","slds-grid slds-grid--align-spread",4,"ngIf"],[1,"slds-grid","slds-grid--align-spread"],["class","slds-form-element__control",3,"ngClass",4,"ngFor","ngForOf"],[1,"slds-form-element__control",3,"ngClass"],["disabled","true","class","slds-checkbox",3,"fieldname","option",4,"ngFor","ngForOf"],["disabled","true",1,"slds-checkbox",3,"fieldname","option"],[1,"slds-form-element"],[3,"fieldname"],["class","slds-checkbox",3,"fieldname","option",4,"ngFor","ngForOf"],[1,"slds-checkbox",3,"fieldname","option"]],template:function(e,t){1&e&&(r.YNc(0,_t,1,2,"field-label",0),r.YNc(1,Zt,3,5,"field-generic-display",1),r.YNc(2,kt,4,2,"div",2)),2&e&&(r.Q6J("ngIf",t.displayLabel),r.xp6(1),r.Q6J("ngIf",!t.isEditMode()),r.xp6(1),r.Q6J("ngIf",t.isEditMode()))},dependencies:[i.mk,i.sg,i.O5,u.q,C.D,bt,M.a],encapsulation:2})}return fieldMultienum})();var Lt=s(69503),It=s(88658);function St(e,t){if(1&e&&r._UZ(0,"field-label",3),2&e){const e=r.oxw();r.Q6J("fieldname",e.fieldname)("fieldconfig",e.fieldconfig)}}function Mt(e,t){if(1&e&&(r.TgZ(0,"span"),r._uU(1),r.qZA()),2&e){const e=r.oxw(2);r.xp6(1),r.Oqu(e.localValue.valueDisplay)}}function Jt(e,t){if(1&e&&(r.TgZ(0,"div",13)(1,"system-checkbox-group-checkbox",14),r._uU(2),r.qZA()()),2&e){const e=t.$implicit,s=r.oxw(4);r.Q6J("ngClass",s.columnsClass),r.xp6(1),r.Q6J("value",e.value)("disabled",!0),r.xp6(1),r.hij(" ",e.display,"")}}function Ot(e,t){if(1&e&&(r.TgZ(0,"div",7)(1,"div",8)(2,"system-checkbox",9),r._uU(3),r.qZA()(),r.TgZ(4,"div",10)(5,"system-checkbox-group",11),r.YNc(6,Jt,3,4,"div",12),r.qZA()()()),2&e){const e=t.$implicit,s=r.oxw(3);r.xp6(2),r.Q6J("ngModel",e.value)("disabled",!0),r.xp6(1),r.Oqu(e.display),r.xp6(1),r.Q6J("ngClass",s.css_classes),r.xp6(1),r.Q6J("ngModel",s.localValue.valueArray),r.xp6(1),r.Q6J("ngForOf",e.options)("ngForTrackBy",s.trackByFn)}}function Nt(e,t){if(1&e&&(r.TgZ(0,"div"),r.YNc(1,Ot,7,7,"div",6),r.qZA()),2&e){const e=r.oxw(2);r.xp6(1),r.Q6J("ngForOf",e.groups)("ngForTrackBy",e.trackByFn)}}function Ft(e,t){if(1&e&&(r.TgZ(0,"field-generic-display",4),r.YNc(1,Mt,2,1,"span",5),r.YNc(2,Nt,2,2,"div",5),r.qZA()),2&e){const e=r.oxw();r.Q6J("fielddisplayclass",e.fielddisplayclass)("editable",e.isEditable())("fieldconfig",e.fieldconfig),r.xp6(1),r.Q6J("ngIf",!e.fieldconfig.displayCheckboxes),r.xp6(1),r.Q6J("ngIf",!!e.fieldconfig.displayCheckboxes)}}function qt(e,t){if(1&e&&(r.TgZ(0,"div",13)(1,"system-checkbox-group-checkbox",19),r._uU(2),r.qZA()()),2&e){const e=t.$implicit,s=r.oxw(3);r.Q6J("ngClass",s.columnsClass),r.xp6(1),r.Q6J("value",e.value),r.xp6(1),r.hij(" ",e.display," ")}}function Et(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"div",7)(1,"div",8)(2,"system-checkbox",17),r.NdJ("ngModelChange",(function(t){const s=r.CHM(e).$implicit,i=r.oxw(2);return r.KtG(i.setGroupValue(t,s))})),r._uU(3),r.qZA()(),r.TgZ(4,"div",10)(5,"system-checkbox-group",18),r.NdJ("ngModelChange",(function(t){const s=r.CHM(e).$implicit,i=r.oxw(2);return r.KtG(i.setItemValue(t,s.value))})),r.YNc(6,qt,3,3,"div",12),r.qZA()()()}if(2&e){const e=t.$implicit,s=r.oxw(2);r.xp6(2),r.Q6J("ngModel",s.localValue.valueGroups[e.value]),r.xp6(1),r.hij(" ",e.display," "),r.xp6(1),r.Q6J("ngClass",s.css_classes),r.xp6(1),r.Q6J("ngModel",s.localValue.valueArray),r.xp6(1),r.Q6J("ngForOf",e.options)("ngForTrackBy",s.trackByFn)}}function Yt(e,t){if(1&e&&(r.TgZ(0,"div",15),r.YNc(1,Et,7,6,"div",6),r._UZ(2,"field-messages",16),r.qZA()),2&e){const e=r.oxw();r.xp6(1),r.Q6J("ngForOf",e.groups)("ngForTrackBy",e.trackByFn),r.xp6(1),r.Q6J("fieldname",e.fieldname)}}let Dt=(()=>{class fieldGroupedEnum extends d.O{groups=[];fieldconfig={};localValue={valueText:"",valueArray:[],valueDisplay:"",valueGroups:{}};columnsClass="slds-size--1-of-4";ngOnInit(){this.setColumnsClass(),this.buildOptionGroups(),this.setLocalValues(this.value),this.subscribeToLanguage(),this.subscribeToModelChanges()}setColumnsClass(){const e=+this.fieldconfig.columns<13&&+this.fieldconfig.columns>0?this.fieldconfig.columns:"4";this.columnsClass=`slds-size--1-of-${e}`}subscribeToLanguage(){this.subscriptions.add(this.language.currentlanguage$.subscribe((()=>this.buildOptionGroups())))}setLocalValues(e){if(!e)return this.localValue={valueText:"",valueArray:[],valueDisplay:"",valueGroups:{}};const t=this.language.getFieldDisplayOptions(this.model.module,this.fieldname),s=e.replace(/\^/g,"").split(",").map((e=>e.trim()));this.localValue={valueText:e,valueArray:s,valueDisplay:s.map((e=>t[e]??e)).join(", "),valueGroups:{}};const i=this.fieldconfig.groupSeparator??"_";this.localValue.valueArray.forEach((e=>{this.localValue.valueGroups[e]=!e.includes(i)}))}subscribeToModelChanges(){this.subscriptions.add(this.model.data$.subscribe((e=>{this.localValue.valueText!==e[this.fieldname]&&this.setLocalValues(e[this.fieldname])})))}setItemValue(e,t){e.some((e=>e!==t&&e.startsWith(t)))&&!e.some((e=>e==t))?e.push(t):e.some((e=>e!==t&&e.startsWith(t)))||(e=e.filter((e=>e!==t)));const s=e.map((e=>`^${e}^`)).join(",");this.setLocalValues(s),this.value=s}setGroupValue(e,t){let s=this.value;e?e&&-1==this.localValue.valueArray.indexOf(t.value)&&(s=`${this.localValue.valueText},^${t.value}^`):s=this.localValue.valueArray.filter((e=>e!==t.value)).map((e=>`^${e}^`)).join(","),this.setLocalValues(s),this.value=s}trackByFn(e,t){return t.value}buildOptionGroups(){this.groups=[];const e=this.language.getFieldDisplayOptions(this.model.module,this.fieldname,!0),t=this.fieldconfig.groupSeparator??"_",s=e.filter((e=>e.value.includes(t)));this.groups=e.filter((e=>!e.value.includes(t))).map((e=>({...e,options:s.filter((t=>t.value.startsWith(e.value)))})))}static ɵfac=function(){let e;return function(t){return(e||(e=r.n5z(fieldGroupedEnum)))(t||fieldGroupedEnum)}}();static ɵcmp=r.Xpm({type:fieldGroupedEnum,selectors:[["field-grouped-enum"]],inputs:{fieldconfig:"fieldconfig"},features:[r.qOj],decls:3,vars:3,consts:[[3,"fieldname","fieldconfig",4,"ngIf"],[3,"fielddisplayclass","editable","fieldconfig",4,"ngIf"],["class","slds-form-element",4,"ngIf"],[3,"fieldname","fieldconfig"],[3,"fielddisplayclass","editable","fieldconfig"],[4,"ngIf"],["class","slds-m-bottom--medium",4,"ngFor","ngForOf","ngForTrackBy"],[1,"slds-m-bottom--medium"],[1,"slds-p-vertical--xx-small","slds-text-title_bold"],[3,"ngModel","disabled"],[1,"slds-form-element__control",3,"ngClass"],[1,"slds-grid","slds-wrap","slds-p-vertical--xxx-small",3,"ngModel"],["class","slds-truncate",3,"ngClass",4,"ngFor","ngForOf","ngForTrackBy"],[1,"slds-truncate",3,"ngClass"],[3,"value","disabled"],[1,"slds-form-element"],[3,"fieldname"],[3,"ngModel","ngModelChange"],[1,"slds-grid","slds-wrap","slds-p-vertical--xxx-small",3,"ngModel","ngModelChange"],[3,"value"]],template:function(e,t){1&e&&(r.YNc(0,St,1,2,"field-label",0),r.YNc(1,Ft,3,5,"field-generic-display",1),r.YNc(2,Yt,3,3,"div",2)),2&e&&(r.Q6J("ngIf",t.displayLabel),r.xp6(1),r.Q6J("ngIf",!t.isEditMode()),r.xp6(1),r.Q6J("ngIf",t.isEditMode()))},dependencies:[i.mk,i.sg,i.O5,n.JJ,n.On,ft.U,Lt.L,It.m,u.q,C.D,M.a],encapsulation:2})}return fieldGroupedEnum})();var Ut=s(40116);function Qt(e,t){if(1&e&&r._UZ(0,"field-label",3),2&e){const e=r.oxw();r.Q6J("fieldname",e.fieldname)("fieldconfig",e.fieldconfig)}}function Rt(e,t){if(1&e&&(r.TgZ(0,"field-generic-display",4)(1,"span"),r._uU(2),r.qZA()()),2&e){const e=r.oxw();r.Q6J("fielddisplayclass",e.fielddisplayclass)("editable",e.isEditable())("fieldconfig",e.fieldconfig),r.xp6(2),r.Oqu(e.viewModeValueText)}}function jt(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"system-multiple-select",5),r.NdJ("ngModelChange",(function(t){r.CHM(e);const s=r.oxw();return r.KtG(s.setFieldValue(t))})),r.qZA()}if(2&e){const e=r.oxw();r.Q6J("ngModel",e.valueArray)("listItems",e.listItems)("groupSeparator",e.fieldconfig.groupSeparator)("grouped",e.fieldconfig.grouped)("showPills",e.fieldconfig.showPills)("listHeight",e.fieldconfig.listHeight)}}let Bt=(()=>{class fieldMultipleEnumDropdown extends d.O{model;view;language;metadata;router;valueArray=[];viewModeValueText="";constructor(e,t,s,i,n){super(e,t,s,i,n),this.model=e,this.view=t,this.language=s,this.metadata=i,this.router=n}ngOnInit(){this.setSubscriptions()}setSubscriptions(){this.subscriptions.add(this.model.data$.subscribe((()=>{this.createValueArray(),this.createViewModeValueText()}))),this.subscriptions.add(this.language.currentlanguage$.subscribe((()=>{this.createViewModeValueText()})))}get listItems(){return this.language.getFieldDisplayOptions(this.model.module,this.fieldname)}setFieldValue(e){this.value=e.map((e=>`^${e}^`)).join(","),this.createValueArray(),this.createViewModeValueText()}createValueArray(){this.valueArray=this.value?this.value.replace(/\^/g,"").split(","):[]}createViewModeValueText(){let e=this.language.getFieldDisplayOptions(this.model.module,this.fieldname);this.viewModeValueText=this.valueArray.map((t=>e[t])).join(", ")}get grouped(){return void 0===this.fieldconfig.grouped||!0===this.fieldconfig.grouped}ngOnDestroy(){this.subscriptions.unsubscribe()}static ɵfac=function(e){return new(e||fieldMultipleEnumDropdown)(r.Y36(w.o),r.Y36(k.e),r.Y36(x.d),r.Y36(c.Pu),r.Y36(A.F0))};static ɵcmp=r.Xpm({type:fieldMultipleEnumDropdown,selectors:[["field-multiple-enum-dropdown"]],features:[r.qOj],decls:3,vars:3,consts:[[3,"fieldname","fieldconfig",4,"ngIf"],[3,"fielddisplayclass","editable","fieldconfig",4,"ngIf"],[3,"ngModel","listItems","groupSeparator","grouped","showPills","listHeight","ngModelChange",4,"ngIf"],[3,"fieldname","fieldconfig"],[3,"fielddisplayclass","editable","fieldconfig"],[3,"ngModel","listItems","groupSeparator","grouped","showPills","listHeight","ngModelChange"]],template:function(e,t){1&e&&(r.YNc(0,Qt,1,2,"field-label",0),r.YNc(1,Rt,3,4,"field-generic-display",1),r.YNc(2,jt,1,6,"system-multiple-select",2)),2&e&&(r.Q6J("ngIf",t.displayLabel),r.xp6(1),r.Q6J("ngIf",!t.isEditMode()),r.xp6(1),r.Q6J("ngIf",t.isEditMode()))},dependencies:[i.O5,n.JJ,n.On,Ut.I,u.q,C.D],encapsulation:2})}return fieldMultipleEnumDropdown})();var Gt=s(69901);function Pt(e,t){if(1&e&&r._UZ(0,"field-label",3),2&e){const e=r.oxw();r.Q6J("fieldname",e.fieldname)("fieldconfig",e.fieldconfig)}}function Ht(e,t){1&e&&r._UZ(0,"system-stencil")}function zt(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"button",8),r.NdJ("click",(function(){r.CHM(e);const t=r.oxw(3);return r.KtG(t.setEditMode())})),r._UZ(1,"system-button-icon",9),r.qZA()}2&e&&(r.xp6(1),r.Q6J("icon","edit"))}function Vt(e,t){if(1&e&&(r.TgZ(0,"span"),r._uU(1),r.qZA(),r.YNc(2,zt,2,1,"button",7)),2&e){const e=r.oxw(2);r.xp6(1),r.Oqu(e.getValue()),r.xp6(1),r.Q6J("ngIf",e.view.isEditable)}}function $t(e,t){if(1&e&&(r.TgZ(0,"div",4),r.YNc(1,Ht,1,0,"system-stencil",5),r.YNc(2,Vt,3,2,"ng-template",null,6,r.W1O),r.qZA()),2&e){const e=r.MAs(3),t=r.oxw();r.xp6(1),r.Q6J("ngIf",t.model.isLoading)("ngIfElse",e)}}function Kt(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"system-input-radio",14),r.NdJ("ngModelChange",(function(t){r.CHM(e);const s=r.oxw(2);return r.KtG(s.value=t)})),r._uU(1),r.qZA()}if(2&e){const e=t.$implicit,s=r.oxw(2);r.Q6J("name",s.fieldid)("value",e.value)("ngModel",s.value),r.xp6(1),r.Oqu(e.display)}}function Xt(e,t){if(1&e&&(r.TgZ(0,"div",10)(1,"div",11)(2,"div",12),r.YNc(3,Kt,2,4,"system-input-radio",13),r.qZA()()()),2&e){const e=r.oxw();r.xp6(3),r.Q6J("ngForOf",e.options)}}let Wt=(()=>{class fieldEnumAlternate extends Ge{setValue(e){this.value=e}static ɵfac=function(){let e;return function(t){return(e||(e=r.n5z(fieldEnumAlternate)))(t||fieldEnumAlternate)}}();static ɵcmp=r.Xpm({type:fieldEnumAlternate,selectors:[["field-enum-alternate"]],features:[r.qOj],decls:3,vars:3,consts:[[3,"fieldname","fieldconfig",4,"ngIf"],["class","slds-text-body--regular slds-truncate slds-m-vertical--small spice-fieldbody",4,"ngIf"],["class","slds-form-element",4,"ngIf"],[3,"fieldname","fieldconfig"],[1,"slds-text-body--regular","slds-truncate","slds-m-vertical--small","spice-fieldbody"],[4,"ngIf","ngIfElse"],["displaycontent",""],["style","float: right","class","slds-button slds-button--icon",3,"click",4,"ngIf"],[1,"slds-button","slds-button--icon",2,"float","right",3,"click"],[3,"icon"],[1,"slds-form-element"],[1,"slds-form-element__control"],[1,"slds-grid--vertical"],[3,"name","value","ngModel","ngModelChange",4,"ngFor","ngForOf"],[3,"name","value","ngModel","ngModelChange"]],template:function(e,t){1&e&&(r.YNc(0,Pt,1,2,"field-label",0),r.YNc(1,$t,4,2,"div",1),r.YNc(2,Xt,4,1,"div",2)),2&e&&(r.Q6J("ngIf",t.displayLabel),r.xp6(1),r.Q6J("ngIf",!t.isEditMode()),r.xp6(1),r.Q6J("ngIf",t.isEditMode()))},dependencies:[i.sg,i.O5,n.JJ,n.On,Z.J,Gt.A,We.B,u.q],encapsulation:2})}return fieldEnumAlternate})();function es(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"div",6)(1,"input",7),r.NdJ("ngModelChange",(function(t){r.CHM(e);const s=r.oxw(2);return r.KtG(s.value=t)})),r.qZA(),r.TgZ(2,"label",8),r._UZ(3,"span",9),r.TgZ(4,"span",10),r._uU(5),r.qZA()()()}if(2&e){const e=t.$implicit,s=r.oxw(2);r.xp6(1),r.Q6J("id",s.fieldid+e.value)("value",e.value)("ngModel",s.value),r.xp6(1),r.uIk("for",s.fieldid+e.value),r.xp6(3),r.Oqu(e.display)}}function ts(e,t){if(1&e&&(r.TgZ(0,"field-generic-display",2)(1,"div",3),r.YNc(2,es,6,5,"div",4),r._UZ(3,"field-messages",5),r.qZA()()),2&e){const e=r.oxw();r.Q6J("fielddisplayclass",e.fielddisplayclass)("editable",e.isEditable())("fieldconfig",e.fieldconfig)("fieldid",e.fieldid),r.xp6(1),r.Q6J("ngClass",e.getFieldClass()),r.xp6(1),r.Q6J("ngForOf",e.options),r.xp6(1),r.Q6J("fieldname",e.fieldname)}}function ss(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"div",6)(1,"input",12),r.NdJ("ngModelChange",(function(t){r.CHM(e);const s=r.oxw(2);return r.KtG(s.value=t)})),r.qZA(),r.TgZ(2,"label",8),r._UZ(3,"span",9),r.TgZ(4,"span",10),r._uU(5),r.qZA()()()}if(2&e){const e=t.$implicit,s=r.oxw(2);r.xp6(1),r.Q6J("id",s.fieldid+e.value)("value",e.value)("ngModel",s.value),r.xp6(1),r.uIk("for",s.fieldid+e.value),r.xp6(3),r.Oqu(e.display)}}function is(e,t){if(1&e&&(r.TgZ(0,"div",11)(1,"div",3),r.YNc(2,ss,6,5,"div",4),r._UZ(3,"field-messages",5),r.qZA()()),2&e){const e=r.oxw();r.xp6(1),r.Q6J("ngClass",e.getFieldClass()),r.xp6(1),r.Q6J("ngForOf",e.options),r.xp6(1),r.Q6J("fieldname",e.fieldname)}}let ns=(()=>{class fieldEnumRadio extends d.O{model;view;language;metadata;router;options=[];constructor(e,t,s,i,n){super(e,t,s,i,n),this.model=e,this.view=t,this.language=s,this.metadata=i,this.router=n,this.subscriptions.add(this.language.currentlanguage$.subscribe((e=>{this.getOptions()})))}ngOnInit(){this.getOptions()}getValue(){return this.language.getFieldDisplayOptionValue(this.model.module,this.fieldname,this.value)}getOptions(){let e=[],t=this.language.getFieldDisplayOptions(this.model.module,this.fieldname);for(let s in t)e.push({value:s,display:t[s]});this.options=e}static ɵfac=function(e){return new(e||fieldEnumRadio)(r.Y36(w.o),r.Y36(k.e),r.Y36(x.d),r.Y36(c.Pu),r.Y36(A.F0))};static ɵcmp=r.Xpm({type:fieldEnumRadio,selectors:[["field-enum-radio"]],features:[r.qOj],decls:2,vars:2,consts:[[3,"fielddisplayclass","editable","fieldconfig","fieldid",4,"ngIf"],["class","slds-form-element",4,"ngIf"],[3,"fielddisplayclass","editable","fieldconfig","fieldid"],[1,"slds-form-element__control","slds-grid",3,"ngClass"],["class","slds-radio",4,"ngFor","ngForOf"],[3,"fieldname"],[1,"slds-radio"],["disabled","","type","radio","name","options",3,"id","value","ngModel","ngModelChange"],[1,"slds-radio__label"],[1,"slds-radio_faux"],[1,"slds-form-element__label"],[1,"slds-form-element"],["type","radio","name","options",3,"id","value","ngModel","ngModelChange"]],template:function(e,t){1&e&&(r.YNc(0,ts,4,7,"field-generic-display",0),r.YNc(1,is,4,3,"div",1)),2&e&&(r.Q6J("ngIf",!t.isEditMode()),r.xp6(1),r.Q6J("ngIf",t.isEditMode()))},dependencies:[i.mk,i.sg,i.O5,n.Fj,n._,n.JJ,n.On,C.D,M.a],encapsulation:2})}return fieldEnumRadio})();function ls(e,t){if(1&e&&r._UZ(0,"field-label",3),2&e){const e=r.oxw();r.Q6J("fieldname",e.fieldname)("fieldconfig",e.fieldconfig)}}function os(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"field-generic-display",4)(1,"system-checkbox",5),r.NdJ("ngModelChange",(function(t){r.CHM(e);const s=r.oxw();return r.KtG(s.value=t)})),r.qZA()()}if(2&e){const e=r.oxw();r.Q6J("fielddisplayclass",e.fieldbooldisplayclass)("fieldconfig",e.fieldconfig)("editable",e.isEditable()),r.xp6(1),r.Q6J("ngModel",e.value)}}function as(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"div",6)(1,"div",7)(2,"system-checkbox",8),r.NdJ("ngModelChange",(function(t){r.CHM(e);const s=r.oxw();return r.KtG(s.value=t)})),r.qZA()(),r._UZ(3,"field-messages",9),r.qZA()}if(2&e){const e=r.oxw();r.Q6J("ngClass",e.getFieldClass()),r.xp6(2),r.Q6J("ngModel",e.value),r.xp6(1),r.Q6J("fieldname",e.fieldname)}}let ds=(()=>{class fieldBool extends d.O{get fieldbooldisplayclass(){return this.fielddisplayclass.replace("slds-p-vertical--x-small","slds-p-bottom--xxx-small slds-p-top--x-small")}static ɵfac=function(){let e;return function(t){return(e||(e=r.n5z(fieldBool)))(t||fieldBool)}}();static ɵcmp=r.Xpm({type:fieldBool,selectors:[["field-bool"]],features:[r.qOj],decls:3,vars:3,consts:[[3,"fieldname","fieldconfig",4,"ngIf"],[3,"fielddisplayclass","fieldconfig","editable",4,"ngIf"],["class","slds-form-element__control",3,"ngClass",4,"ngIf"],[3,"fieldname","fieldconfig"],[3,"fielddisplayclass","fieldconfig","editable"],["disabled","",3,"ngModel","ngModelChange"],[1,"slds-form-element__control",3,"ngClass"],[1,"slds-p-vertical--x-small"],[3,"ngModel","ngModelChange"],[3,"fieldname"]],template:function(e,t){1&e&&(r.YNc(0,ls,1,2,"field-label",0),r.YNc(1,os,2,4,"field-generic-display",1),r.YNc(2,as,4,3,"div",2)),2&e&&(r.Q6J("ngIf",t.displayLabel),r.xp6(1),r.Q6J("ngIf",!t.isEditMode()),r.xp6(1),r.Q6J("ngIf",t.isEditable()&&t.isEditMode()))},dependencies:[i.mk,i.O5,n.JJ,n.On,ft.U,u.q,C.D,M.a],encapsulation:2})}return fieldBool})();var rs=s(7674);function cs(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"field-generic-display",2)(1,"system-checkbox",3),r.NdJ("ngModelChange",(function(t){r.CHM(e);const s=r.oxw();return r.KtG(s.value=t)})),r._UZ(2,"system-label-fieldname",4),r.qZA()()}if(2&e){const e=r.oxw();r.Q6J("fielddisplayclass",e.fieldbooldisplayclass)("fieldconfig",e.fieldconfig)("editable",e.isEditable()),r.xp6(1),r.Q6J("ngModel",e.value),r.xp6(1),r.Q6J("module",e.model.module)("field",e.fieldname)("fieldconfig",e.fieldconfig)}}function us(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"div",5)(1,"div",6)(2,"system-checkbox",7),r.NdJ("ngModelChange",(function(t){r.CHM(e);const s=r.oxw();return r.KtG(s.value=t)})),r._UZ(3,"system-label-fieldname",4),r.qZA()(),r._UZ(4,"field-messages",8),r.qZA()}if(2&e){const e=r.oxw();r.Q6J("ngClass",e.getFieldClass()),r.xp6(2),r.Q6J("ngModel",e.value),r.xp6(1),r.Q6J("module",e.model.module)("field",e.fieldname)("fieldconfig",e.fieldconfig),r.xp6(1),r.Q6J("fieldname",e.fieldname)}}let ms=(()=>{class fieldBoolLabelAligned extends d.O{get fieldbooldisplayclass(){return this.fielddisplayclass.replace("slds-p-vertical--x-small","slds-p-bottom--xxx-small slds-p-top--x-small")}static ɵfac=function(){let e;return function(t){return(e||(e=r.n5z(fieldBoolLabelAligned)))(t||fieldBoolLabelAligned)}}();static ɵcmp=r.Xpm({type:fieldBoolLabelAligned,selectors:[["ng-component"]],features:[r.qOj],decls:2,vars:2,consts:[[3,"fielddisplayclass","fieldconfig","editable",4,"ngIf"],["class","slds-form-element__control",3,"ngClass",4,"ngIf"],[3,"fielddisplayclass","fieldconfig","editable"],["disabled","",3,"ngModel","ngModelChange"],[3,"module","field","fieldconfig"],[1,"slds-form-element__control",3,"ngClass"],[1,"slds-p-vertical--x-small"],[3,"ngModel","ngModelChange"],[3,"fieldname"]],template:function(e,t){1&e&&(r.YNc(0,cs,3,7,"field-generic-display",0),r.YNc(1,us,5,6,"div",1)),2&e&&(r.Q6J("ngIf",!t.isEditMode()),r.xp6(1),r.Q6J("ngIf",t.isEditable()&&t.isEditMode()))},dependencies:[i.mk,i.O5,n.JJ,n.On,ft.U,rs.h,C.D,M.a],encapsulation:2})}return fieldBoolLabelAligned})();var gs=s(44561),hs=s(93333),ps=s(31790),fs=s(54271),bs=s(85957);function _s(e,t){if(1&e&&r._UZ(0,"field-label",3),2&e){const e=r.oxw();r.Q6J("fieldname",e.fieldname)("fieldconfig",e.fieldconfig)}}function vs(e,t){if(1&e&&r._UZ(0,"system-icon",9),2&e){const e=r.oxw(3);r.Q6J("module",e.model.data[e.parentTypeField])("size","x-small")}}function ys(e,t){if(1&e&&(r.TgZ(0,"div",6),r.YNc(1,vs,1,2,"system-icon",7),r.TgZ(2,"span",8),r._uU(3),r.qZA()()),2&e){const e=r.oxw(2);r.xp6(1),r.Q6J("ngIf",e.displayModuleIcon),r.xp6(1),r.Q6J("module",e.parentType)("id",e.parentId),r.xp6(1),r.Oqu(e.value)}}function xs(e,t){if(1&e&&(r.TgZ(0,"field-generic-display",4),r.YNc(1,ys,4,4,"div",5),r.qZA()),2&e){const e=r.oxw();r.Q6J("fielddisplayclass",e.fielddisplayclass)("editable",e.isEditable())("fieldconfig",e.fieldconfig)("fieldid",e.fieldid),r.xp6(1),r.Q6J("ngIf",e.parentId)}}function ws(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"div",15)(1,"div",16)(2,"span",17)(3,"span",18),r._UZ(4,"system-icon",9),r.qZA(),r.TgZ(5,"span",19),r._uU(6),r.qZA(),r.TgZ(7,"button",20),r.NdJ("click",(function(){r.CHM(e);const t=r.oxw(2);return r.KtG(t.clearParent())})),r._UZ(8,"system-button-icon",21),r.qZA()()()()}if(2&e){const e=r.oxw(2);r.xp6(4),r.Q6J("module",e.model.data[e.parentTypeField])("size","small"),r.xp6(2),r.Oqu(e.parentName),r.xp6(2),r.Q6J("icon","close")}}function Zs(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"li",42),r.NdJ("click",(function(){const t=r.CHM(e).$implicit,s=r.oxw(4);return r.KtG(s.setParentType(t))})),r.TgZ(1,"div",43)(2,"div",44),r._UZ(3,"system-icon",45),r.TgZ(4,"div",46),r._UZ(5,"system-label-modulename",47),r.qZA()()()()}if(2&e){const e=t.$implicit;r.xp6(3),r.Q6J("module",e),r.xp6(2),r.Q6J("module",e)}}const Ts=function(e){return{"slds-is-open":e}};function Cs(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"div",33)(1,"div",11)(2,"div",34)(3,"div",35)(4,"div",25)(5,"div",36),r.NdJ("click",(function(){r.CHM(e);const t=r.oxw(3);return r.KtG(t.openParentTypes())})),r._UZ(6,"input",37)(7,"system-icon",38),r.qZA(),r.TgZ(8,"div",39)(9,"ul",40),r.YNc(10,Zs,6,2,"li",41),r.qZA()()()()()()()}if(2&e){const e=r.oxw(3);r.xp6(4),r.Q6J("ngClass",r.VKq(3,Ts,e.parentTypeSelectOpen)),r.xp6(2),r.Q6J("value",e.language.getModuleName(e.parentType)),r.xp6(4),r.Q6J("ngForOf",e.parentTypes)}}function ks(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"field-lookup-recent",48),r.NdJ("selectedObject",(function(t){r.CHM(e);const s=r.oxw(3);return r.KtG(s.setParent(t))})),r.qZA()}if(2&e){r.oxw();const e=r.MAs(6),t=r.oxw(2);r.Q6J("module",t.parentType)("inputElement",e)}}function As(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"field-lookup-search",49),r.NdJ("selectedObject",(function(t){r.CHM(e);const s=r.oxw(3);return r.KtG(s.setParent(t))}))("searchWithModal",(function(){r.CHM(e);const t=r.oxw(3);return r.KtG(t.searchWithModal())})),r.qZA()}if(2&e){r.oxw();const e=r.MAs(6),t=r.oxw(2);r.Q6J("module",t.parentType)("inputElement",e)("searchterm",t.parentSearchTerm)}}function Ls(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"div",22),r.YNc(1,Cs,11,5,"div",23),r.TgZ(2,"div",24)(3,"div",25)(4,"div",26)(5,"input",27,28),r.NdJ("focus",(function(){r.CHM(e);const t=r.oxw(2);return r.KtG(t.onFocusParent())}))("ngModelChange",(function(t){r.CHM(e);const s=r.oxw(2);return r.KtG(s.parentSearchTerm=t)})),r.qZA(),r.TgZ(7,"button",29),r.NdJ("click",(function(){r.CHM(e);const t=r.oxw(2);return r.KtG(t.searchWithModal())})),r._UZ(8,"system-button-icon",21),r.qZA()(),r.TgZ(9,"div",30),r.YNc(10,ks,1,2,"field-lookup-recent",31),r.YNc(11,As,1,3,"field-lookup-search",32),r.qZA()()()()}if(2&e){const e=r.oxw(2);r.xp6(1),r.Q6J("ngIf",e.parentTypes.length>0),r.xp6(2),r.Q6J("ngClass",r.VKq(8,Ts,e.parentSearchOpen)),r.xp6(2),r.Q6J("ngModel",e.parentSearchTerm)("placeholder",e.language.getModuleCombinedLabel("LBL_SEARCH",e.parentType)),r.xp6(3),r.Q6J("icon","search"),r.xp6(1),r.Q6J("ngStyle",e.dropdownStyle),r.xp6(1),r.Q6J("ngIf",""===e.parentSearchTerm),r.xp6(1),r.Q6J("ngIf",""!==e.parentSearchTerm)}}function Is(e,t){if(1&e&&(r.TgZ(0,"div",10)(1,"div",11),r.YNc(2,ws,9,4,"div",12),r.YNc(3,Ls,12,10,"div",13),r.qZA(),r._UZ(4,"field-messages",14),r.qZA()),2&e){const e=r.oxw();r.Q6J("ngClass",e.getFieldClass()),r.xp6(2),r.Q6J("ngIf",e.model.data[e.parentIdField]),r.xp6(1),r.Q6J("ngIf",!e.model.data[e.parentIdField]),r.xp6(1),r.Q6J("fieldname",e.fieldname)}}let Ss=(()=>{class fieldParent extends d.O{model;view;backend;toast;broadcast;language;metadata;router;elementRef;renderer;modal;clickListener;parentTypeSelectOpen=!1;parentSearchOpen=!1;parentSearchTerm="";recentItems=[];parentTypes=[];constructor(e,t,s,i,n,l,o,a,d,r,c){super(e,t,l,o,a),this.model=e,this.view=t,this.backend=s,this.toast=i,this.broadcast=n,this.language=l,this.metadata=o,this.router=a,this.elementRef=d,this.renderer=r,this.modal=c,this.broadcast.message$.subscribe((e=>this.handleMessage(e)))}get parentIdField(){let e=this.metadata.getFieldDefs(this.model.module,this.fieldname);return this.fieldconfig.parentIdField?this.fieldconfig.parentIdField:e?.id_name?e.id_name:"parent_id"}get parentTypeField(){let e=this.metadata.getFieldDefs(this.model.module,this.fieldname);return this.fieldconfig.parentTypeField?this.fieldconfig.parentTypeField:e?.type_name?e.type_name:"parent_type"}get parentName(){return this.model.getField(this.fieldname)}get parentType(){return this.model.getField(this.parentTypeField)}get parentId(){return this.model.getField(this.parentIdField)}get displayModuleIcon(){return!this.fieldconfig.hidemoduleicon}ngOnInit(){super.ngOnInit(),this.determineParentTypes(),!this.view.isEditMode()||this.model.getField(this.parentTypeField)&&""!=this.model.getField(this.parentTypeField)||this.model.setField(this.parentTypeField,this.parentTypes[0])}get dropdownStyle(){let e=this.elementRef.nativeElement.getBoundingClientRect();return{"max-width":"initial",left:"initial",width:e.width-5+"px",right:"-"+(e.width/2-5)+"px"}}handleViewModeChange(e){"edit"==e&&this.view.editfieldid&&this.view.editfieldid==this.fieldid&&this.setFocus(),"edit"!=e||this.model.getField(this.parentTypeField)&&""!=this.model.getField(this.parentTypeField)||this.model.setField(this.parentTypeField,this.parentTypes[0])}determineParentTypes(){let e=[];this.fieldconfig.parenttypes?e=this.fieldconfig.parenttypes.replace(/\s/g,"").split(","):this.field_defs.parent_modules&&(e=this.field_defs.parent_modules),this.fieldconfig.sortbyparenttypes||e.sort(((e,t)=>this.language.getModuleName(e).toLowerCase()>this.language.getModuleName(t).toLowerCase()?1:-1)),this.parentTypes=e}handleMessage(e){if(e.messagedata.reference&&"model.save"===e.messagetype)if(this.fieldid===e.messagedata.reference){this.parentSearchTerm="";let t={};t[this.parentIdField]=e.messagedata.data.id,t[this.fieldname]=e.messagedata.data.summary_text,this.model.setFields(t,!0)}}onClick(e){this.elementRef.nativeElement.contains(e.target)||this.closePopups()}closePopups(){this.model.getField(this.parentIdField)&&(this.parentSearchTerm=""),this.parentSearchOpen=!1,this.parentTypeSelectOpen=!1,this.clickListener()}setParent(e){this.model.setField(this.fieldname,e.text),this.model.setField(this.parentIdField,e.id),2==this.fieldconfig.executeCopyRules?this.executeCopyRules(e.id):1==this.fieldconfig.executeCopyRules&&this.modal.confirm(this.language.getLabel("MSG_COPY_DATA","","long"),this.language.getLabel("MSG_COPY_DATA")).subscribe((t=>t&&this.executeCopyRules(e.id)))}executeCopyRules(e){let t=this.modal.await("LBL_LOADING");this.backend.get(this.parentType,e).subscribe((e=>{let s={module:this.parentType,id:e.id,data:e};this.model.executeCopyRulesParent(s),t.emit()}),(()=>{this.toast.sendToast("ERR_LOADING_RECORD","error"),t.emit()}))}toggleParentTypeSelect(){this.parentTypeSelectOpen=!this.parentTypeSelectOpen,this.parentSearchOpen=!1}setParentType(e){this.parentSearchTerm="",this.model.setField(this.parentTypeField,e),this.parentTypeSelectOpen=!1}clearParent(){this.fieldconfig.promptondelete?this.modal.confirm(this.language.getLabelFormatted("LBL_PROMPT_DELETE_RELATIONSHIP",[this.language.getFieldDisplayName(this.model.module,this.fieldname,this.fieldconfig)],"long"),this.language.getLabelFormatted("LBL_PROMPT_DELETE_RELATIONSHIP",[this.language.getFieldDisplayName(this.model.module,this.fieldname,this.fieldconfig)])).subscribe((e=>{e&&this.removeRelated()})):this.removeRelated()}removeRelated(){this.model.setField(this.fieldname,""),this.model.setField(this.parentIdField,"")}openParentTypes(){this.parentTypeSelectOpen=!0,this.parentSearchOpen=!1,this.clickListener=this.renderer.listen("document","click",(e=>this.onClick(e)))}onFocusParent(){this.parentTypeSelectOpen=!1,this.parentSearchOpen=!0,this.clickListener=this.renderer.listen("document","click",(e=>this.onClick(e)))}searchWithModal(){this.parentSearchOpen=!1,this.modal.openModal("ObjectModalModuleLookup").subscribe((e=>{e.instance.module=this.parentType,e.instance.multiselect=!1,e.instance.selectedItems.subscribe((e=>{e.length&&this.setParent({id:e[0].id,text:e[0].summary_text,data:e[0]})})),e.instance.searchTerm=this.parentSearchTerm}))}static ɵfac=function(e){return new(e||fieldParent)(r.Y36(w.o),r.Y36(k.e),r.Y36($.y),r.Y36(K.A),r.Y36(X.f),r.Y36(x.d),r.Y36(c.Pu),r.Y36(A.F0),r.Y36(r.SBq),r.Y36(r.Qsj),r.Y36(L.o))};static ɵcmp=r.Xpm({type:fieldParent,selectors:[["field-parent"]],features:[r.qOj],decls:3,vars:3,consts:[[3,"fieldname","fieldconfig",4,"ngIf"],[3,"fielddisplayclass","editable","fieldconfig","fieldid",4,"ngIf"],["class","slds-form-element__control",3,"ngClass",4,"ngIf"],[3,"fieldname","fieldconfig"],[3,"fielddisplayclass","editable","fieldconfig","fieldid"],["class","slds-grid slds-grid_vertical-align-center",4,"ngIf"],[1,"slds-grid","slds-grid_vertical-align-center"],[3,"module","size",4,"ngIf"],["system-model-popover","",3,"module","id"],[3,"module","size"],[1,"slds-form-element__control",3,"ngClass"],[1,"slds-form-element"],["class","slds-form-element__control slds-p-around--xx-small",4,"ngIf"],["class","slds-combobox-group slds-p-around--xx-small",4,"ngIf"],[3,"fieldname"],[1,"slds-form-element__control","slds-p-around--xx-small"],[1,"slds-pill_container"],[1,"slds-pill","slds-size--1-of-1"],[1,"slds-icon_container","slds-icon-standard-account","slds-pill__icon_container"],[1,"slds-pill__label"],[1,"slds-button","slds-button--icon","slds-pill__remove",3,"click"],[3,"icon"],[1,"slds-combobox-group","slds-p-around--xx-small"],["class","slds-combobox_object-switcher slds-combobox-addon_start",4,"ngIf"],[1,"slds-combobox_container","slds-combobox-addon_end"],["role","combobox",1,"slds-combobox","slds-dropdown-trigger","slds-dropdown-trigger_click",3,"ngClass"],["role","none",1,"slds-combobox__form-element","slds-input-has-icon","slds-input-has-icon_right"],["type","text","aria-autocomplete","list","autoComplete","off","role","textbox",1,"slds-input","slds-combobox__input",3,"ngModel","placeholder","focus","ngModelChange"],["focus",""],[1,"slds-button","slds-button_icon","slds-input__icon","slds-input__icon_right",3,"click"],["role","listbox",1,"slds-dropdown","slds-dropdown_fluid",3,"ngStyle"],[3,"module","inputElement","selectedObject",4,"ngIf"],[3,"module","inputElement","searchterm","selectedObject","searchWithModal",4,"ngIf"],[1,"slds-combobox_object-switcher","slds-combobox-addon_start"],[1,"slds-form-element__control"],[1,"slds-combobox_container"],[1,"slds-combobox__form-element","slds-input-has-icon","slds-input-has-icon--right",3,"click"],["type","text","readonly","","autoComplete","off","role","textbox",1,"slds-input","slds-combobox__input","slds-combobox__input-value",3,"value"],["icon","down","sprite","utility","addclasses","slds-input__icon slds-input__icon_right"],["role","listbox",1,"slds-dropdown","slds-dropdown_length-5","slds-dropdown_x-small","slds-dropdown_left"],["role","group","aria-label","Suggested for you",1,"slds-listbox","slds-listbox_vertical"],["role","presentation","class","slds-listbox__item",3,"click",4,"ngFor","ngForOf"],["role","presentation",1,"slds-listbox__item",3,"click"],["role","option",1,"slds-media","slds-listbox__option","slds-listbox__option_plain","slds-media_small"],[1,"slds-grid","slds-grid--vertical-align-center"],["size","x-small",3,"module"],[1,"slds-truncate"],[3,"module"],[3,"module","inputElement","selectedObject"],[3,"module","inputElement","searchterm","selectedObject","searchWithModal"]],template:function(e,t){1&e&&(r.YNc(0,_s,1,2,"field-label",0),r.YNc(1,xs,2,5,"field-generic-display",1),r.YNc(2,Is,5,4,"div",2)),2&e&&(r.Q6J("ngIf",t.displayLabel),r.xp6(1),r.Q6J("ngIf",!t.isEditMode()),r.xp6(1),r.Q6J("ngIf",t.isEditable()&&t.isEditMode()))},dependencies:[i.mk,i.sg,i.O5,i.PC,n.Fj,n.JJ,n.On,Z.J,gs.f,hs.M,ps.g,u.q,C.D,fs.P,bs.$,M.a],encapsulation:2})}return fieldParent})();var Ms=s(99637);function Js(e,t){if(1&e&&r._UZ(0,"field-label",3),2&e){const e=r.oxw();r.Q6J("fieldname",e.fieldname)("fieldconfig",e.fieldconfig)}}function Os(e,t){if(1&e&&(r.TgZ(0,"field-generic-display",4)(1,"a",5),r._uU(2),r.qZA()()),2&e){const e=r.oxw();r.Q6J("fielddisplayclass",e.fielddisplayclass)("editable",e.isEditable())("fieldconfig",e.fieldconfig),r.xp6(2),r.Oqu(e.value)}}function Ns(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"div",11)(1,"div",12)(2,"span",13)(3,"span",14),r._UZ(4,"system-icon",15),r.qZA(),r.TgZ(5,"span",16),r._uU(6),r.qZA(),r.TgZ(7,"button",17),r.NdJ("click",(function(){r.CHM(e);const t=r.oxw(2);return r.KtG(t.clearFilter())})),r._UZ(8,"system-button-icon",18),r.qZA()()()()}if(2&e){const e=r.oxw(2);r.xp6(4),r.Q6J("module",e.model.data.module)("size","small"),r.xp6(2),r.Oqu(e.moduleFilterName),r.xp6(2),r.Q6J("icon","close")}}function Fs(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"li",35),r.NdJ("click",(function(){const t=r.CHM(e).$implicit,s=r.oxw(4);return r.KtG(s.setModule(t))})),r.TgZ(1,"div",36)(2,"div",37),r._UZ(3,"system-icon",38),r.TgZ(4,"div",39),r._UZ(5,"system-label-modulename",40),r.qZA()()()()}if(2&e){const e=t.$implicit;r.xp6(3),r.Q6J("module",e),r.xp6(2),r.Q6J("module",e)}}const qs=function(e){return{"slds-is-open":e}};function Es(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"div",26)(1,"div",7)(2,"div",22)(3,"div",27)(4,"div",28)(5,"div",29),r.NdJ("click",(function(){r.CHM(e);const t=r.oxw(3);return r.KtG(t.openModules())})),r._UZ(6,"input",30)(7,"system-icon",31),r.qZA(),r.TgZ(8,"div",32)(9,"ul",33),r.YNc(10,Fs,6,2,"li",34),r.qZA()()()()()()()}if(2&e){const e=r.oxw(3);r.xp6(4),r.Q6J("ngClass",r.VKq(3,qs,e.moduleSelectOpen)),r.xp6(2),r.Q6J("value",e.language.getModuleName(e.module)),r.xp6(4),r.Q6J("ngForOf",e.modules)}}function Ys(e,t){if(1&e&&(r.TgZ(0,"option",41),r._uU(1),r.qZA()),2&e){const e=t.$implicit;r.Q6J("value",e.id),r.xp6(1),r.Oqu(e.name)}}function Ds(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"div",19),r.YNc(1,Es,11,5,"div",20),r.TgZ(2,"div",21)(3,"div",22)(4,"div",23)(5,"select",24),r.NdJ("click",(function(){r.CHM(e);const t=r.oxw(2);return r.KtG(t.moduleSelectOpen=!1)}))("ngModelChange",(function(t){r.CHM(e);const s=r.oxw(2);return r.KtG(s.moduleFilter=t)})),r.YNc(6,Ys,2,2,"option",25),r.qZA()()()()()}if(2&e){const e=r.oxw(2);r.xp6(1),r.Q6J("ngIf",e.modules.length>1),r.xp6(4),r.Q6J("disabled",!e.module||0==e.moduleFilters.length)("ngModel",e.moduleFilter),r.xp6(1),r.Q6J("ngForOf",e.moduleFilters)}}function Us(e,t){if(1&e&&(r.TgZ(0,"div",6)(1,"div",7),r.YNc(2,Ns,9,4,"div",8),r.YNc(3,Ds,7,4,"div",9),r.qZA(),r._UZ(4,"field-messages",10),r.qZA()),2&e){const e=r.oxw();r.Q6J("ngClass",e.getFieldClass()),r.xp6(2),r.Q6J("ngIf",e.model.data.module_filter),r.xp6(1),r.Q6J("ngIf",!e.model.data.module_filter),r.xp6(1),r.Q6J("fieldname",e.fieldname)}}let Qs=(()=>{class fieldModuleFilter extends d.O{model;view;popup;broadcast;language;metadata;router;elementRef;renderer;modal;clickListener;moduleSelectOpen=!1;modules=[];constructor(e,t,s,i,n,l,o,a,d,r){super(e,t,n,l,o),this.model=e,this.view=t,this.popup=s,this.broadcast=i,this.language=n,this.metadata=l,this.router=o,this.elementRef=a,this.renderer=d,this.modal=r,this.popup.closePopup$.subscribe((()=>this.closePopups())),this.broadcast.message$.subscribe((e=>this.handleMessage(e)))}get moduleFilterName(){let e=this.metadata.getModuleFilter(this.moduleFilter);return e?e.name:""}get module(){return this.model.getField("module")||this.modules[0]}get value(){return this.moduleFilterName}get moduleFilters(){return this.metadata.getModuleFilters(this.module)}set moduleFilter(e){this.model.setField("module_filter",e)}get moduleFilter(){return this.model.getField("module_filter")}ngOnInit(){this.modules=this.parentTypes,this.setModule(this.module)}get parentTypes(){let e=["Contacts","Accounts","Leads","Users"];return this.fieldconfig.parenttypes&&(e=this.fieldconfig.parenttypes.replace(/\s/g,"").split(",")),e}setModule(e){this.model.setField("module",e),this.moduleSelectOpen=!1}clearFilter(){this.model.setField("module_filter","")}handleMessage(e){if(e.messagedata.reference&&"model.save"===e.messagetype)if(this.fieldid===e.messagedata.reference){let t={module_filter:e.messagedata.data.id};t[this.fieldname]=e.messagedata.data.summary_text,this.model.setFields(t)}}onClick(e){this.elementRef.nativeElement.contains(e.target)||this.closePopups()}openModules(){this.moduleSelectOpen=!0,this.clickListener=this.renderer.listen("document","click",(e=>this.onClick(e)))}closePopups(){this.moduleSelectOpen=!1,this.clickListener()}static ɵfac=function(e){return new(e||fieldModuleFilter)(r.Y36(w.o),r.Y36(k.e),r.Y36(Ms.g),r.Y36(X.f),r.Y36(x.d),r.Y36(c.Pu),r.Y36(A.F0),r.Y36(r.SBq),r.Y36(r.Qsj),r.Y36(L.o))};static ɵcmp=r.Xpm({type:fieldModuleFilter,selectors:[["field-modulefilter"]],features:[r._Bn([Ms.g]),r.qOj],decls:3,vars:3,consts:[[3,"fieldname","fieldconfig",4,"ngIf"],[3,"fielddisplayclass","editable","fieldconfig",4,"ngIf"],["class","slds-form-element__control",3,"ngClass",4,"ngIf"],[3,"fieldname","fieldconfig"],[3,"fielddisplayclass","editable","fieldconfig"],["href","javascript:void(0)"],[1,"slds-form-element__control",3,"ngClass"],[1,"slds-form-element"],["class","slds-form-element__control slds-p-around--xx-small",4,"ngIf"],["class","slds-combobox-group slds-p-around--xx-small",4,"ngIf"],[3,"fieldname"],[1,"slds-form-element__control","slds-p-around--xx-small"],[1,"slds-pill_container"],[1,"slds-pill","slds-size--1-of-1"],[1,"slds-icon_container","slds-icon-standard-account","slds-pill__icon_container"],[3,"module","size"],[1,"slds-pill__label"],[1,"slds-button","slds-button--icon","slds-pill__remove",3,"click"],[3,"icon"],[1,"slds-combobox-group","slds-p-around--xx-small"],["class","slds-combobox_object-switcher slds-combobox-addon_start",4,"ngIf"],[1,"slds-form-element","slds-grow","slds-m-left--small"],[1,"slds-form-element__control"],[1,"slds-select_container"],[1,"slds-select",3,"disabled","ngModel","click","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[1,"slds-combobox_object-switcher","slds-combobox-addon_start"],[1,"slds-combobox_container"],["role","combobox",1,"slds-combobox","slds-dropdown-trigger","slds-dropdown-trigger_click",3,"ngClass"],[1,"slds-combobox__form-element","slds-input-has-icon","slds-input-has-icon--right",3,"click"],["type","text","readonly","","autoComplete","off","role","textbox",1,"slds-input","slds-combobox__input","slds-combobox__input-value",3,"value"],["icon","down","sprite","utility","addclasses","slds-input__icon slds-input__icon_right"],["role","listbox",1,"slds-dropdown","slds-dropdown_length-5","slds-dropdown_x-small","slds-dropdown_left"],["role","group","aria-label","Suggested for you",1,"slds-listbox","slds-listbox_vertical"],["role","presentation","class","slds-listbox__item",3,"click",4,"ngFor","ngForOf"],["role","presentation",1,"slds-listbox__item",3,"click"],["role","option",1,"slds-media","slds-listbox__option","slds-listbox__option_plain","slds-media_small"],[1,"slds-grid","slds-grid--vertical-align-center"],["size","x-small",3,"module"],[1,"slds-truncate"],[3,"module"],[3,"value"]],template:function(e,t){1&e&&(r.YNc(0,Js,1,2,"field-label",0),r.YNc(1,Os,3,4,"field-generic-display",1),r.YNc(2,Us,5,4,"div",2)),2&e&&(r.Q6J("ngIf",t.displayLabel),r.xp6(1),r.Q6J("ngIf",!t.isEditMode()),r.xp6(1),r.Q6J("ngIf",t.isEditable()&&t.isEditMode()))},dependencies:[i.mk,i.sg,i.O5,n.YN,n.Kr,n.EJ,n.JJ,n.On,Z.J,gs.f,hs.M,u.q,C.D,M.a],encapsulation:2})}return fieldModuleFilter})();function Rs(e,t){if(1&e&&r._UZ(0,"field-label",4),2&e){const e=r.oxw();r.Q6J("fieldname",e.fieldname)("fieldconfig",e.fieldconfig)}}let js=(()=>{class fieldNotAuthorized extends d.O{model;view;language;metadata;router;constructor(e,t,s,i,n){super(e,t,s,i,n),this.model=e,this.view=t,this.language=s,this.metadata=i,this.router=n}static ɵfac=function(e){return new(e||fieldNotAuthorized)(r.Y36(w.o),r.Y36(k.e),r.Y36(x.d),r.Y36(c.Pu),r.Y36(A.F0))};static ɵcmp=r.Xpm({type:fieldNotAuthorized,selectors:[["field-not-authorized"]],features:[r.qOj],decls:4,vars:2,consts:[[3,"fieldname","fieldconfig",4,"ngIf"],[3,"fielddisplayclass"],[1,"slds-text-color_inverse-weak"],["label","LBL_NOTAUTHORIZED"],[3,"fieldname","fieldconfig"]],template:function(e,t){1&e&&(r.YNc(0,Rs,1,2,"field-label",0),r.TgZ(1,"field-generic-display",1)(2,"span",2),r._UZ(3,"system-label",3),r.qZA()()),2&e&&(r.Q6J("ngIf",t.displayLabel),r.xp6(1),r.Q6J("fielddisplayclass",t.fielddisplayclass))},dependencies:[i.O5,te._,u.q,C.D],encapsulation:2})}return fieldNotAuthorized})();function Bs(e,t){if(1&e&&r._UZ(0,"field-label",3),2&e){const e=r.oxw();r.Q6J("fieldname",e.fieldname)("fieldconfig",e.fieldconfig)}}function Gs(e,t){1&e&&r._UZ(0,"field-not-authorized")}function Ps(e,t){if(1&e&&r._UZ(0,"system-icon",11),2&e){const e=r.oxw(3);r.Q6J("module",e.relateType)}}function Hs(e,t){if(1&e&&(r.TgZ(0,"span"),r._uU(1),r.qZA()),2&e){const e=r.oxw(3);r.xp6(1),r.Oqu(e.value)}}function zs(e,t){1&e&&r._UZ(0,"system-label",12)}function Vs(e,t){if(1&e&&(r.TgZ(0,"field-generic-display",6)(1,"div",7),r.YNc(2,Ps,1,1,"system-icon",8),r.TgZ(3,"span",9),r.YNc(4,Hs,2,1,"span",1),r.YNc(5,zs,1,0,"ng-template",null,10,r.W1O),r.qZA()()()),2&e){const e=r.MAs(6),t=r.oxw(2);r.Q6J("fielddisplayclass",t.fielddisplayclass)("editable",t.isEditable())("fieldconfig",t.fieldconfig)("fieldid",t.fieldid),r.xp6(2),r.Q6J("ngIf",t.displayicon),r.xp6(1),r.Q6J("module",t.relateType)("id",t.id),r.xp6(1),r.Q6J("ngIf",t.value&&t.id||!t.id)("ngIfElse",e)}}function $s(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"div",25)(1,"div",26)(2,"span",27)(3,"span",28),r._UZ(4,"system-icon",29),r.qZA(),r.TgZ(5,"span",30),r._uU(6),r.qZA(),r.TgZ(7,"button",31),r.NdJ("click",(function(){r.CHM(e);const t=r.oxw(3);return r.KtG(t.clearField())})),r._UZ(8,"system-button-icon",32),r.qZA()()()()}if(2&e){const e=r.oxw(3);r.xp6(4),r.Q6J("module",e.relateType)("size","small"),r.xp6(2),r.Oqu(e.model.data[e.relateNameField]),r.xp6(2),r.Q6J("icon","close")}}function Ks(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"field-lookup-recent",36),r.NdJ("selectedObject",(function(t){r.CHM(e);const s=r.oxw(4);return r.KtG(s.setRelated(t))})),r.qZA()}if(2&e){r.oxw(2);const e=r.MAs(7),t=r.oxw(2);r.Q6J("inputElement",e)("module",t.relateType)}}function Xs(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"field-lookup-search",37),r.NdJ("selectedObject",(function(t){r.CHM(e);const s=r.oxw(4);return r.KtG(s.setRelated(t))}))("searchWithModal",(function(){r.CHM(e);const t=r.oxw(4);return r.KtG(t.searchWithModal())})),r.qZA()}if(2&e){r.oxw(2);const e=r.MAs(7),t=r.oxw(2);r.Q6J("module",t.relateType)("inputElement",e)("modulefilter",t.fieldconfig.modulefilter)("relatefilter",t.relateFilter)("relateId",null==t.relateFilter?null:t.relateFilter.id)("disableadd",t.disableadd)("searchterm",t.relateSearchTerm)}}function Ws(e,t){if(1&e&&(r.TgZ(0,"div",33),r.YNc(1,Ks,1,2,"field-lookup-recent",34),r.YNc(2,Xs,1,7,"field-lookup-search",35),r.qZA()),2&e){const e=r.oxw(3);r.xp6(1),r.Q6J("ngIf",!e.disablerecent&&""===e.relateSearchTerm&&!e.fieldconfig.modulefilter&&!e.relatedfilterrequired),r.xp6(1),r.Q6J("ngIf",!e.disablesearch&&(""!==e.relateSearchTerm||e.fieldconfig.modulefilter||e.relatedfilterrequired))}}const ei=function(e){return{"slds-is-open":e}};function ti(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"div",13)(1,"div",14)(2,"div",15)(3,"div",16),r.YNc(4,$s,9,4,"div",17),r.TgZ(5,"div",18)(6,"input",19,20),r.NdJ("ngModelChange",(function(t){r.CHM(e);const s=r.oxw(2);return r.KtG(s.relateSearchTerm=t)}))("blur",(function(){r.CHM(e);const t=r.oxw(2);return r.KtG(t.closePopups())}))("focus",(function(){r.CHM(e);const t=r.oxw(2);return r.KtG(t.onFocus())})),r.qZA(),r.TgZ(8,"button",21),r.NdJ("click",(function(){r.CHM(e);const t=r.oxw(2);return r.KtG(t.searchWithModal())})),r._UZ(9,"system-button-icon",22),r.qZA()(),r.YNc(10,Ws,3,2,"div",23),r.qZA()()(),r._UZ(11,"field-messages",24),r.qZA()}if(2&e){const e=r.oxw(2);r.Q6J("ngClass",e.getFieldClass()),r.xp6(3),r.Q6J("ngClass",r.VKq(12,ei,e.relateSearchOpen)),r.xp6(1),r.Q6J("ngIf",e.id),r.xp6(1),r.ekj("slds-hide",!!e.model.data[e.relateIdField]),r.Q6J("ngClass",e.getFieldClass()),r.xp6(1),r.Q6J("disabled",e.disabled)("ngModel",e.relateSearchTerm)("placeholder",e.placeholder)("autocomplete",e.fieldid),r.xp6(4),r.Q6J("ngIf",!e.disablerecent||!e.disablesearch),r.xp6(1),r.Q6J("fieldname",e.fieldname)}}function si(e,t){if(1&e&&(r.YNc(0,Vs,7,9,"field-generic-display",4),r.YNc(1,ti,12,14,"div",5)),2&e){const e=r.oxw();r.Q6J("ngIf",!e.isEditMode()),r.xp6(1),r.Q6J("ngIf",e.isEditable()&&e.isEditMode())}}let ii=(()=>{class fieldRelate extends d.O{model;view;language;metadata;router;elementRef;modal;backend;toast;relateIdField="";relateNameField="";relateType="";relateSearchOpen=!1;relateSearchTerm="";isAuthorized=!0;relateFilter;constructor(e,t,s,i,n,l,o,a,d){super(e,t,s,i,n),this.model=e,this.view=t,this.language=s,this.metadata=i,this.router=n,this.elementRef=l,this.modal=o,this.backend=a,this.toast=d}get displayicon(){return!!this.fieldconfig.displayicon}get disableadd(){return this.fieldconfig.disableadd}get disablerecent(){return!!this.fieldconfig.disablerecent}get disablesearch(){return!!this.fieldconfig.disablesearch}get id(){return this.model.getField(this.relateIdField)}ngOnInit(){const e=this.metadata.getFieldDefs(this.model.module,this.fieldname);this.relateIdField=e.id_name,this.relateNameField=this.fieldname,this.relateType=e.module,this.isAuthorized=this.metadata.checkModuleAcl(e.module,"list")||this.metadata.checkModuleAcl(e.module,"listrelated"),this.handleRelateFIlterField()}handleRelateFIlterField(){this.fieldconfig.relatefilterfield&&(this.createRelateFilter(),this.subscriptions.add(this.model.data$.subscribe((e=>{this.updateRelateFilter()}))))}createRelateFilter(){let e=this.metadata.getFieldDefs(this.model.module,this.fieldconfig.relatefilterfield);e&&(this.relateFilter={module:e.module,relationship:this.fieldconfig.relatefilterrelationship,id:this.model.getField(e.id_name),display:this.model.getField(this.fieldconfig.relatefilterfield),active:!!this.model.getField(e.id_name),required:!!this.fieldconfig.relatedfilterrequired})}get placeholder(){if(this.relateFilter&&this.fieldconfig.relatedfilterrequired){let e=this.metadata.getFieldDefs(this.model.module,this.fieldconfig.relatefilterfield);if(!this.model.getField(e.id_name))return this.language.getLabelFormatted("LBL_SELECT_FIELD_FIRST",[this.language.getFieldDisplayName(this.model.module,this.fieldconfig.relatefilterfield)])}return this.language.getModuleCombinedLabel("LBL_SEARCH",this.relateType)}get relatedfilterrequired(){return this.fieldconfig.relatedfilterrequired}get disabled(){if(this.relateFilter&&this.relatedfilterrequired){let e=this.metadata.getFieldDefs(this.model.module,this.fieldconfig.relatefilterfield);if(!this.model.getField(e.id_name))return!0}return!1}updateRelateFilter(){let e=this.metadata.getFieldDefs(this.model.module,this.fieldconfig.relatefilterfield);this.relateFilter.id=this.model.getField(e.id_name),this.relateFilter.display=this.model.getField(this.fieldconfig.relatefilterfield),this.fieldconfig.relatedfilterrequired&&!this.relateFilter.id&&this.id&&this.removeRelated(),this.relateFilter.active=!!this.relateFilter.id}closePopups(){this.model.getField(this.relateIdField)&&(this.relateSearchTerm=""),this.relateSearchOpen=!1}clearField(){this.fieldconfig.promptondelete?this.modal.confirm(this.language.getLabelFormatted("LBL_PROMPT_DELETE_RELATIONSHIP",[this.language.getFieldDisplayName(this.model.module,this.fieldname,this.fieldconfig)],"long"),this.language.getLabelFormatted("LBL_PROMPT_DELETE_RELATIONSHIP",[this.language.getFieldDisplayName(this.model.module,this.fieldname,this.fieldconfig)])).subscribe((e=>{e&&this.removeRelated()})):this.removeRelated()}removeRelated(){let e={};e[this.relateNameField]="",e[this.relateIdField]="",this.model.setFields(e)}onFocus(){this.relateSearchOpen=!0}setRelated(e){let t={};t[this.relateIdField]=e.id,t[this.relateNameField]=e.text,this.model.setFields(t),2==this.fieldconfig.executeCopyRules?this.executeCopyRules(e.id):1==this.fieldconfig.executeCopyRules&&this.modal.confirm(this.language.getLabel("MSG_COPY_DATA","","long"),this.language.getLabel("MSG_COPY_DATA")).subscribe((t=>t&&this.executeCopyRules(e.id))),this.closePopups()}executeCopyRules(e){let t=this.modal.await("LBL_LOADING");this.backend.get(this.relateType,e).subscribe((e=>{let s={module:this.relateType,id:e.id,data:e};this.model.executeCopyRulesParent(s),t.emit()}),(()=>{this.toast.sendToast("ERR_LOADING_RECORD","error"),t.emit()}))}goRelated(){this.router.navigate(["/module/"+this.relateType+"/"+this.model.getField(this.relateIdField)])}searchWithModal(){this.relateSearchOpen=!1,this.modal.openModal("ObjectModalModuleLookup").subscribe((e=>{e.instance.module=this.relateType,e.instance.modulefilter=this.fieldconfig.modulefilter,e.instance.multiselect=!1,e.instance.relatefilter=this.relateFilter,this.subscriptions.add(e.instance.selectedItems.subscribe((e=>{e.length&&this.setRelated({id:e[0].id,text:e[0].summary_text,data:e[0]})}))),e.instance.searchTerm=this.relateSearchTerm}))}static ɵfac=function(e){return new(e||fieldRelate)(r.Y36(w.o),r.Y36(k.e),r.Y36(x.d),r.Y36(c.Pu),r.Y36(A.F0),r.Y36(r.SBq),r.Y36(L.o),r.Y36($.y),r.Y36(K.A))};static ɵcmp=r.Xpm({type:fieldRelate,selectors:[["field-relate"]],features:[r._Bn([Ms.g]),r.qOj],decls:4,vars:3,consts:[[3,"fieldname","fieldconfig",4,"ngIf"],[4,"ngIf","ngIfElse"],["fieldContainer",""],[3,"fieldname","fieldconfig"],[3,"fielddisplayclass","editable","fieldconfig","fieldid",4,"ngIf"],["class","slds-form-element__control slds-m-vertical--xx-small",3,"ngClass",4,"ngIf"],[3,"fielddisplayclass","editable","fieldconfig","fieldid"],[1,"slds-grid","slds-grid--vertical-align-center"],["size","x-small","divClass","slds-align--absolute-center slds-p-right--xx-small",3,"module",4,"ngIf"],["system-model-popover","",3,"module","id"],["emptyString",""],["size","x-small","divClass","slds-align--absolute-center slds-p-right--xx-small",3,"module"],["label","LBL_RECORD_WITHOUT_NAME",2,"font-style","italic"],[1,"slds-form-element__control","slds-m-vertical--xx-small",3,"ngClass"],[1,"slds-combobox_container"],[1,"slds-form-element","slds-lookup"],["role","combobox",1,"slds-combobox","slds-dropdown-trigger","slds-dropdown-trigger_click",3,"ngClass"],["class","slds-form-element__control",4,"ngIf"],[1,"slds-combobox__form-element","slds-input-has-icon","slds-input-has-icon_right",3,"ngClass"],["type","text","role","combobox",1,"slds-input","slds-combobox__input",3,"disabled","ngModel","placeholder","autocomplete","ngModelChange","blur","focus"],["focus",""],[1,"slds-button","slds-button_icon","slds-input__icon","slds-input__icon_right",3,"click"],["icon","search"],["class","slds-dropdown slds-dropdown_fluid","role","listbox",4,"ngIf"],[3,"fieldname"],[1,"slds-form-element__control"],[1,"slds-pill_container"],[1,"slds-pill","slds-size--1-of-1"],[1,"slds-icon_container","slds-icon-standard-account","slds-pill__icon_container"],[3,"module","size"],[1,"slds-pill__label"],[1,"slds-button","slds-button--icon","slds-pill__remove",3,"click"],[3,"icon"],["role","listbox",1,"slds-dropdown","slds-dropdown_fluid"],[3,"inputElement","module","selectedObject",4,"ngIf"],[3,"module","inputElement","modulefilter","relatefilter","relateId","disableadd","searchterm","selectedObject","searchWithModal",4,"ngIf"],[3,"inputElement","module","selectedObject"],[3,"module","inputElement","modulefilter","relatefilter","relateId","disableadd","searchterm","selectedObject","searchWithModal"]],template:function(e,t){if(1&e&&(r.YNc(0,Bs,1,2,"field-label",0),r.YNc(1,Gs,1,0,"field-not-authorized",1),r.YNc(2,si,2,2,"ng-template",null,2,r.W1O)),2&e){const e=r.MAs(3);r.Q6J("ngIf",t.displayLabel),r.xp6(1),r.Q6J("ngIf",!t.isAuthorized)("ngIfElse",e)}},dependencies:[i.mk,i.O5,n.Fj,n.JJ,n.On,Z.J,gs.f,te._,ps.g,js,u.q,C.D,fs.P,bs.$,M.a],encapsulation:2})}return fieldRelate})();function ni(e,t){if(1&e&&(r.TgZ(0,"field-generic-display",2)(1,"a",3),r._uU(2),r.qZA()()),2&e){const e=r.oxw();r.Q6J("fielddisplayclass",e.fielddisplayclass)("editable",e.isEditable())("fieldconfig",e.fieldconfig)("fieldid",e.fieldid),r.xp6(1),r.Q6J("module",e.relateType)("id",e.relatedFieldId),r.xp6(1),r.Oqu(e.value)}}function li(e,t){if(1&e&&(r.TgZ(0,"option",10),r._uU(1),r.qZA()),2&e){const e=t.$implicit,s=r.oxw(2);r.Q6J("value",e.id),r.xp6(1),r.hij(" ",s.language.getLabel(e.summary_text)," ")}}function oi(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"div",4)(1,"div",5)(2,"div",6)(3,"select",7),r.NdJ("ngModelChange",(function(t){r.CHM(e);const s=r.oxw();return r.KtG(s.relatedFieldId=t)})),r._UZ(4,"option"),r.YNc(5,li,2,2,"option",8),r.qZA()()(),r._UZ(6,"field-messages",9),r.qZA()}if(2&e){const e=r.oxw();r.xp6(3),r.Q6J("ngModel",e.relatedFieldId),r.xp6(2),r.Q6J("ngForOf",e.relatedList)("ngForTrackBy",e.trackByFn),r.xp6(1),r.Q6J("fieldname",e.fieldname)}}let ai=(()=>{class fieldRelateList extends d.O{model;view;language;metadata;router;elementRef;modal;backend;toast;relatedList=[];relateIdField="";relateNameField="";relateType="";constructor(e,t,s,i,n,l,o,a,d){super(e,t,s,i,n),this.model=e,this.view=t,this.language=s,this.metadata=i,this.router=n,this.elementRef=l,this.modal=o,this.backend=a,this.toast=d}get relatedFieldId(){return this.model.getField(this.relateIdField)}set relatedFieldId(e){let t=this.relatedList.find((t=>t.id==e));t&&(this.model.setField(this.relateIdField,t.id),this.model.setField(this.relateNameField,t.summary_text),this.relateType&&(2==this.fieldconfig.executeCopyRules?this.executeCopyRules(t.id):1==this.fieldconfig.executeCopyRules&&this.modal.confirm("Copy the data from related record?","Copy data?").subscribe((e=>e&&this.executeCopyRules(t.id)))))}ngOnInit(){this.setFieldDefs(),this.getRelatedList()}setFieldDefs(){const e=this.metadata.getFieldDefs(this.model.module,this.fieldname);this.relateIdField=e.id_name,this.relateNameField=this.fieldname,this.relateType=e.module}getRelatedList(){if(!this.relateType)return;let e={limit:this.fieldconfig.limit||-1,modulefilter:this.fieldconfig.modulefilter};this.backend.getList(this.relateType,[{sortfield:"name",sortirection:"ASC"}],e).subscribe((e=>{e&&e.list&&(this.relatedList=e.list)}))}executeCopyRules(e){let t=this.modal.await("LBL_LOADING");this.backend.get(this.relateType,e).subscribe((e=>{let s={module:this.relateType,id:e.id,data:e};this.model.executeCopyRulesParent(s),t.emit()}),(()=>{this.toast.sendToast("ERR_LOADING_RECORD","error"),t.emit()}))}trackByFn(e,t){return t.id}static ɵfac=function(e){return new(e||fieldRelateList)(r.Y36(w.o),r.Y36(k.e),r.Y36(x.d),r.Y36(c.Pu),r.Y36(A.F0),r.Y36(r.SBq),r.Y36(L.o),r.Y36($.y),r.Y36(K.A))};static ɵcmp=r.Xpm({type:fieldRelateList,selectors:[["field-relate-list"]],features:[r.qOj],decls:2,vars:2,consts:[[3,"fielddisplayclass","editable","fieldconfig","fieldid",4,"ngIf"],["class","slds-form-element",4,"ngIf"],[3,"fielddisplayclass","editable","fieldconfig","fieldid"],["href","javascript:void(0);","system-model-popover","",3,"module","id"],[1,"slds-form-element"],[1,"slds-form-element__control"],[1,"slds-select_container"],[1,"slds-select",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf","ngForTrackBy"],[3,"fieldname"],[3,"value"]],template:function(e,t){1&e&&(r.YNc(0,ni,3,7,"field-generic-display",0),r.YNc(1,oi,7,4,"div",1)),2&e&&(r.Q6J("ngIf",!t.isEditMode()),r.xp6(1),r.Q6J("ngIf",t.isEditable()&&t.isEditMode()))},dependencies:[i.sg,i.O5,n.YN,n.Kr,n.EJ,n.JJ,n.On,ps.g,C.D,M.a],encapsulation:2})}return fieldRelateList})();function di(e,t){if(1&e&&(r.TgZ(0,"li",3),r._UZ(1,"field-container",4),r.qZA()),2&e){const e=r.oxw().$implicit;r.xp6(1),r.Q6J("field",e.field)("fieldconfig",e.fieldconfig)}}function ri(e,t){if(1&e&&(r.ynx(0),r.YNc(1,di,2,2,"li",2),r.BQk()),2&e){const e=t.$implicit,s=r.oxw();r.xp6(1),r.Q6J("ngIf",s.model.getField(e.field))}}let ci=(()=>{class fieldLinkedDetails{model;view;metadata;data;module;fieldset;fieldsetitems=[];constructor(e,t,s){this.model=e,this.view=t,this.metadata=s}ngOnInit(){this.fieldsetitems=this.metadata.getFieldSetFields(this.fieldset,this.module),this.view.isEditable=!1,this.view.displayLabels=!1}ngOnChanges(e){this.model.module=this.module,this.model.id=this.data.id,this.model.setData(this.data)}static ɵfac=function(e){return new(e||fieldLinkedDetails)(r.Y36(w.o),r.Y36(k.e),r.Y36(c.Pu))};static ɵcmp=r.Xpm({type:fieldLinkedDetails,selectors:[["field-linked-details"]],inputs:{data:"data",module:"module",fieldset:"fieldset"},features:[r._Bn([w.o,k.e]),r.TTD],decls:2,vars:1,consts:[[1,"slds-list_horizontal","slds-has-dividers_left"],[4,"ngFor","ngForOf"],["class","slds-item",4,"ngIf"],[1,"slds-item"],["fielddisplayclass","slds-align_absolute-center",3,"field","fieldconfig"]],template:function(e,t){1&e&&(r.TgZ(0,"ul",0),r.YNc(1,ri,2,1,"ng-container",1),r.qZA()),2&e&&(r.xp6(1),r.Q6J("ngForOf",t.fieldsetitems))},dependencies:[i.sg,i.O5,m.j],encapsulation:2})}return fieldLinkedDetails})();function ui(e,t){if(1&e&&r._UZ(0,"field-label",3),2&e){const e=r.oxw();r.Q6J("fieldname",e.fieldname)("fieldconfig",e.fieldconfig)}}function mi(e,t){1&e&&r._UZ(0,"field-not-authorized")}function gi(e,t){if(1&e&&r._UZ(0,"system-icon",11),2&e){const e=r.oxw(3);r.Q6J("module",e.relateType)}}function hi(e,t){if(1&e&&(r.TgZ(0,"span"),r._uU(1),r.qZA()),2&e){const e=r.oxw(4);r.xp6(1),r.Oqu(e.value)}}function pi(e,t){1&e&&r._UZ(0,"system-label",14)}function fi(e,t){if(1&e&&(r.TgZ(0,"span",12),r.YNc(1,hi,2,1,"span",1),r.YNc(2,pi,1,0,"ng-template",null,13,r.W1O),r.qZA()),2&e){const e=r.MAs(3),t=r.oxw(3);r.Q6J("module",t.relateType)("id",t.id),r.xp6(1),r.Q6J("ngIf",t.value&&t.id||!t.id)("ngIfElse",e)}}function bi(e,t){if(1&e&&(r.TgZ(0,"span"),r._UZ(1,"field-linked-details",15),r.qZA()),2&e){const e=r.oxw(3);r.xp6(1),r.Q6J("fieldset",e.fieldconfig.fieldset)("module",e.fielddefs.module)("data",e.relData)}}function _i(e,t){if(1&e&&(r.TgZ(0,"field-generic-display",6)(1,"div",7),r.YNc(2,gi,1,1,"system-icon",8),r.YNc(3,fi,4,4,"span",9),r.YNc(4,bi,2,3,"span",10),r.qZA()()),2&e){const e=r.oxw(2);r.Q6J("fielddisplayclass",e.fielddisplayclass)("editable",e.isEditable())("fieldconfig",e.fieldconfig)("fieldid",e.fieldid),r.xp6(2),r.Q6J("ngIf",e.displayicon),r.xp6(1),r.Q6J("ngIf",!e.fieldconfig.fieldset),r.xp6(1),r.Q6J("ngIf",e.fieldconfig.fieldset&&e.relData)}}function vi(e,t){if(1&e&&(r.TgZ(0,"span",34),r._uU(1),r.qZA()),2&e){const e=r.oxw(4);r.xp6(1),r.Oqu(e.value)}}function yi(e,t){if(1&e&&(r.TgZ(0,"span",34),r._UZ(1,"field-linked-details",15),r.qZA()),2&e){const e=r.oxw(4);r.xp6(1),r.Q6J("fieldset",e.fieldconfig.fieldset)("module",e.fielddefs.module)("data",e.relData)}}function xi(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"div",26)(1,"div",27)(2,"span",28)(3,"span",29),r._UZ(4,"system-icon",30),r.qZA(),r.YNc(5,vi,2,1,"span",31),r.YNc(6,yi,2,3,"span",31),r.TgZ(7,"button",32),r.NdJ("click",(function(){r.CHM(e);const t=r.oxw(3);return r.KtG(t.clearField())})),r._UZ(8,"system-button-icon",33),r.qZA()()()()}if(2&e){const e=r.oxw(3);r.xp6(4),r.Q6J("module",e.relateType)("size","small"),r.xp6(1),r.Q6J("ngIf",!e.fieldconfig.fieldset),r.xp6(1),r.Q6J("ngIf",e.fieldconfig.fieldset&&e.relData),r.xp6(2),r.Q6J("icon","close")}}function wi(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"div",35)(1,"input",36,37),r.NdJ("ngModelChange",(function(t){r.CHM(e);const s=r.oxw(3);return r.KtG(s.relateSearchTerm=t)}))("blur",(function(){r.CHM(e);const t=r.oxw(3);return r.KtG(t.closePopups())}))("focus",(function(){r.CHM(e);const t=r.oxw(3);return r.KtG(t.onFocus())})),r.qZA(),r.TgZ(3,"button",38),r.NdJ("click",(function(){r.CHM(e);const t=r.oxw(3);return r.KtG(t.searchWithModal())})),r._UZ(4,"system-button-icon",39),r.qZA()()}if(2&e){const e=r.oxw(3);r.Q6J("ngClass",e.getFieldClass()),r.xp6(1),r.Q6J("disabled",e.disabled)("ngModel",e.relateSearchTerm)("placeholder",e.placeholder)("autocomplete",e.fieldid)}}function Zi(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"field-lookup-recent",40),r.NdJ("selectedObject",(function(t){r.CHM(e);const s=r.oxw(3);return r.KtG(s.setRelated(t))})),r.qZA()}if(2&e){const e=r.oxw(3);r.Q6J("module",e.relateType)}}function Ti(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"field-lookup-search",41),r.NdJ("selectedObject",(function(t){r.CHM(e);const s=r.oxw(3);return r.KtG(s.setRelated(t))}))("searchWithModal",(function(){r.CHM(e);const t=r.oxw(3);return r.KtG(t.searchWithModal())})),r.qZA()}if(2&e){const e=r.oxw(3);r.Q6J("module",e.relateType)("modulefilter",e.fieldconfig.modulefilter)("relatefilter",e.relateFilter)("relateId",null==e.relateFilter?null:e.relateFilter.id)("disableadd",e.disableadd)("searchterm",e.relateSearchTerm)}}const Ci=function(e){return{"slds-is-open":e}};function ki(e,t){if(1&e&&(r.TgZ(0,"div",16)(1,"div",17)(2,"div",18)(3,"div",19),r.YNc(4,xi,9,5,"div",20),r.YNc(5,wi,5,5,"div",21),r.TgZ(6,"div",22),r.YNc(7,Zi,1,1,"field-lookup-recent",23),r.YNc(8,Ti,1,6,"field-lookup-search",24),r.qZA()()()(),r._UZ(9,"field-messages",25),r.qZA()),2&e){const e=r.oxw(2);r.Q6J("ngClass",e.getFieldClass()),r.xp6(3),r.Q6J("ngClass",r.VKq(7,Ci,e.relateSearchOpen)),r.xp6(1),r.Q6J("ngIf",e.id),r.xp6(1),r.Q6J("ngIf",!e.model.data[e.relateIdField]),r.xp6(2),r.Q6J("ngIf",""===e.relateSearchTerm&&!e.fieldconfig.modulefilter&&!e.relatedfilterrequired),r.xp6(1),r.Q6J("ngIf",""!==e.relateSearchTerm||e.fieldconfig.modulefilter||e.relatedfilterrequired),r.xp6(1),r.Q6J("fieldname",e.fieldname)}}function Ai(e,t){if(1&e&&(r.YNc(0,_i,5,7,"field-generic-display",4),r.YNc(1,ki,10,9,"div",5)),2&e){const e=r.oxw();r.Q6J("ngIf",!e.isEditMode()),r.xp6(1),r.Q6J("ngIf",e.isEditable()&&e.isEditMode())}}let Li=(()=>{class fieldLinked extends d.O{model;view;language;metadata;router;elementRef;modal;backend;toast;relateIdField="";relateNameField="";relateType="";relateSearchOpen=!1;relateSearchTerm="";isAuthorized=!0;relateFilter;constructor(e,t,s,i,n,l,o,a,d){super(e,t,s,i,n),this.model=e,this.view=t,this.language=s,this.metadata=i,this.router=n,this.elementRef=l,this.modal=o,this.backend=a,this.toast=d}get displayicon(){return!!this.fieldconfig.displayicon}get disableadd(){return this.fieldconfig.disableadd}get id(){return this.model.getField(this.relateIdField)}get value(){let e=this.model.getField(this.fieldname);return this.fielddefs?.rname&&e&&e[this.fielddefs.rname]?e[this.fielddefs.rname]:""}set value(e){}get relData(){return this.model.getField(this.fieldname)??{}}ngOnInit(){if(super.ngOnInit(),this.relateIdField=this.fielddefs.id_name,this.relateNameField=this.fieldname,this.relateType=this.fielddefs.module,this.isAuthorized=this.metadata.checkModuleAcl(this.fielddefs.module,"list")||this.metadata.checkModuleAcl(this.fielddefs.module,"listrelated"),!this.fieldconfig.fieldset){let e=this.metadata.getComponentConfig("fieldLinked",this.fielddefs.module);e.fieldset&&(this.fieldconfig.fieldset=e.fieldset)}this.handleRelateFilterField()}handleRelateFilterField(){this.fieldconfig.relatefilterfield&&(this.createRelateFilter(),this.subscriptions.add(this.model.data$.subscribe((e=>{this.updateRelateFilter()}))))}createRelateFilter(){let e=this.metadata.getFieldDefs(this.model.module,this.fieldconfig.relatefilterfield);e&&(this.relateFilter={module:e.module,relationship:this.fieldconfig.relatefilterrelationship,id:this.model.getField(e.id_name),display:this.model.getField(this.fieldconfig.relatefilterfield),active:!!this.model.getField(e.id_name),required:!!this.fieldconfig.relatedfilterrequired})}get placeholder(){if(this.relateFilter&&this.fieldconfig.relatedfilterrequired){let e=this.metadata.getFieldDefs(this.model.module,this.fieldconfig.relatefilterfield);if(!this.model.getField(e.id_name))return this.language.getLabelFormatted("LBL_SELECT_FIELD_FIRST",[this.language.getFieldDisplayName(this.model.module,this.fieldconfig.relatefilterfield)])}return this.language.getModuleCombinedLabel("LBL_SEARCH",this.relateType)}get relatedfilterrequired(){return this.fieldconfig.relatedfilterrequired}get disabled(){if(this.relateFilter&&this.relatedfilterrequired){let e=this.metadata.getFieldDefs(this.model.module,this.fieldconfig.relatefilterfield);if(!this.model.getField(e.id_name))return!0}return!1}updateRelateFilter(){let e=this.metadata.getFieldDefs(this.model.module,this.fieldconfig.relatefilterfield);this.relateFilter.id=this.model.getField(e.id_name),this.relateFilter.display=this.model.getField(this.fieldconfig.relatefilterfield),this.fieldconfig.relatedfilterrequired&&!this.relateFilter.id&&this.id&&this.removeRelated(),this.relateFilter.active=!!this.relateFilter.id}closePopups(){this.model.getField(this.relateIdField)&&(this.relateSearchTerm=""),this.relateSearchOpen=!1}clearField(){this.fieldconfig.promptondelete?this.modal.confirm(this.language.getLabelFormatted("LBL_PROMPT_DELETE_RELATIONSHIP",[this.language.getFieldDisplayName(this.model.module,this.fieldname,this.fieldconfig)],"long"),this.language.getLabelFormatted("LBL_PROMPT_DELETE_RELATIONSHIP",[this.language.getFieldDisplayName(this.model.module,this.fieldname,this.fieldconfig)])).subscribe((e=>{e&&this.removeRelated()})):this.removeRelated()}removeRelated(){let e={};e[this.relateNameField]="",e[this.relateIdField]="",this.model.setFields(e)}onFocus(){this.relateSearchOpen=!0}setRelated(e){let t={};t[this.relateIdField]=e.id,t[this.relateNameField]=e.data,this.model.setFields(t),2==this.fieldconfig.executeCopyRules?this.executeCopyRules(e.id):1==this.fieldconfig.executeCopyRules&&this.modal.confirm(this.language.getLabel("MSG_COPY_DATA","","long"),this.language.getLabel("MSG_COPY_DATA")).subscribe((t=>t&&this.executeCopyRules(e.id))),this.closePopups()}executeCopyRules(e){let t=this.modal.await("LBL_LOADING");this.backend.get(this.relateType,e).subscribe((e=>{let s={module:this.relateType,id:e.id,data:e};this.model.executeCopyRulesParent(s),t.emit()}),(()=>{this.toast.sendToast("ERR_LOADING_RECORD","error"),t.emit()}))}goRelated(){this.router.navigate(["/module/"+this.relateType+"/"+this.model.getField(this.relateIdField)])}searchWithModal(){this.relateSearchOpen=!1,this.modal.openModal("ObjectModalModuleLookup").subscribe((e=>{e.instance.module=this.relateType,e.instance.modulefilter=this.fieldconfig.modulefilter,e.instance.multiselect=!1,e.instance.relatefilter=this.relateFilter,this.subscriptions.add(e.instance.selectedItems.subscribe((e=>{e.length&&this.setRelated({id:e[0].id,text:e[0].summary_text,data:e[0]})}))),e.instance.searchTerm=this.relateSearchTerm}))}static ɵfac=function(e){return new(e||fieldLinked)(r.Y36(w.o),r.Y36(k.e),r.Y36(x.d),r.Y36(c.Pu),r.Y36(A.F0),r.Y36(r.SBq),r.Y36(L.o),r.Y36($.y),r.Y36(K.A))};static ɵcmp=r.Xpm({type:fieldLinked,selectors:[["field-linked"]],features:[r.qOj],decls:4,vars:3,consts:[[3,"fieldname","fieldconfig",4,"ngIf"],[4,"ngIf","ngIfElse"],["fieldContainer",""],[3,"fieldname","fieldconfig"],[3,"fielddisplayclass","editable","fieldconfig","fieldid",4,"ngIf"],["class","slds-form-element__control slds-m-vertical--xx-small",3,"ngClass",4,"ngIf"],[3,"fielddisplayclass","editable","fieldconfig","fieldid"],[1,"slds-grid","slds-grid--vertical-align-center"],["size","x-small","divClass","slds-align--absolute-center slds-p-right--xx-small",3,"module",4,"ngIf"],["system-model-popover","",3,"module","id",4,"ngIf"],[4,"ngIf"],["size","x-small","divClass","slds-align--absolute-center slds-p-right--xx-small",3,"module"],["system-model-popover","",3,"module","id"],["emptyString",""],["label","LBL_RECORD_WITHOUT_NAME",2,"font-style","italic"],[3,"fieldset","module","data"],[1,"slds-form-element__control","slds-m-vertical--xx-small",3,"ngClass"],[1,"slds-combobox_container"],[1,"slds-form-element","slds-lookup"],["role","combobox",1,"slds-combobox","slds-dropdown-trigger","slds-dropdown-trigger_click",3,"ngClass"],["class","slds-form-element__control",4,"ngIf"],["class","slds-combobox__form-element slds-input-has-icon slds-input-has-icon_right",3,"ngClass",4,"ngIf"],["role","listbox",1,"slds-dropdown","slds-dropdown_fluid"],[3,"module","selectedObject",4,"ngIf"],[3,"module","modulefilter","relatefilter","relateId","disableadd","searchterm","selectedObject","searchWithModal",4,"ngIf"],[3,"fieldname"],[1,"slds-form-element__control"],[1,"slds-pill_container"],[1,"slds-pill","slds-size--1-of-1"],[1,"slds-icon_container","slds-icon-standard-account","slds-pill__icon_container"],[3,"module","size"],["class","slds-pill__label",4,"ngIf"],[1,"slds-button","slds-button--icon","slds-pill__remove",3,"click"],[3,"icon"],[1,"slds-pill__label"],[1,"slds-combobox__form-element","slds-input-has-icon","slds-input-has-icon_right",3,"ngClass"],["type","text","role","combobox",1,"slds-input","slds-combobox__input",3,"disabled","ngModel","placeholder","autocomplete","ngModelChange","blur","focus"],["focus",""],[1,"slds-button","slds-button_icon","slds-input__icon","slds-input__icon_right",3,"click"],["icon","search"],[3,"module","selectedObject"],[3,"module","modulefilter","relatefilter","relateId","disableadd","searchterm","selectedObject","searchWithModal"]],template:function(e,t){if(1&e&&(r.YNc(0,ui,1,2,"field-label",0),r.YNc(1,mi,1,0,"field-not-authorized",1),r.YNc(2,Ai,2,2,"ng-template",null,2,r.W1O)),2&e){const e=r.MAs(3);r.Q6J("ngIf",t.displayLabel),r.xp6(1),r.Q6J("ngIf",!t.isAuthorized)("ngIfElse",e)}},dependencies:[i.mk,i.O5,n.Fj,n.JJ,n.On,Z.J,gs.f,te._,ps.g,js,u.q,C.D,ci,fs.P,bs.$,M.a],encapsulation:2})}return fieldLinked})();function Ii(e,t){if(1&e&&r._UZ(0,"field-label",6),2&e){const e=r.oxw();r.Q6J("fieldname",e.fieldname)("fieldconfig",e.fieldconfig)}}let Si=(()=>{class fieldModifiedBy extends Li{model;view;language;metadata;router;elementRef;modal;backend;toast;userpreferences;constructor(e,t,s,i,n,l,o,a,d,r){super(e,t,s,i,n,l,o,a,d),this.model=e,this.view=t,this.language=s,this.metadata=i,this.router=n,this.elementRef=l,this.modal=o,this.backend=a,this.toast=d,this.userpreferences=r}get userid(){return this.relData?.id}get datefield(){return this.fieldconfig.field_date?this.fieldconfig.field_date:"date_modified"}get displayDate(){try{if(this.model.getField(this.fieldname)){let e=this.model.getFieldValue(this.datefield);return e.isValid()?e.format(this.userpreferences.getDateFormat()):""}return""}catch(e){return""}}get displayTime(){try{if(this.model.getField(this.fieldname)){let e=this.model.getFieldValue(this.datefield);return e.isValid()?e.format(this.userpreferences.getTimeFormat()):""}return""}catch(e){return""}}static ɵfac=function(e){return new(e||fieldModifiedBy)(r.Y36(w.o),r.Y36(k.e),r.Y36(x.d),r.Y36(c.Pu),r.Y36(A.F0),r.Y36(r.SBq),r.Y36(L.o),r.Y36($.y),r.Y36(K.A),r.Y36(ye.z))};static ɵcmp=r.Xpm({type:fieldModifiedBy,selectors:[["field-generic"]],features:[r.qOj],decls:11,vars:8,consts:[[3,"fieldname","fieldconfig",4,"ngIf"],[3,"fielddisplayclass","editable","fieldconfig"],[1,"slds-grid","slds-grid--vertical-align-center"],["href","javascript:void(0);","system-model-popover","","module","Users",3,"id"],[1,"slds-p-right--xx-small"],[1,"slds-p-left--xxx-small"],[3,"fieldname","fieldconfig"]],template:function(e,t){1&e&&(r.YNc(0,Ii,1,2,"field-label",0),r.TgZ(1,"field-generic-display",1)(2,"div",2)(3,"a",3),r._uU(4),r.qZA(),r.TgZ(5,"span",4),r._uU(6,","),r.qZA(),r.TgZ(7,"span"),r._uU(8),r.qZA(),r.TgZ(9,"span",5),r._uU(10),r.qZA()()()),2&e&&(r.Q6J("ngIf",t.displayLabel),r.xp6(1),r.Q6J("fielddisplayclass",t.fielddisplayclass)("editable",!1)("fieldconfig",t.fieldconfig),r.xp6(2),r.Q6J("id",t.userid),r.xp6(1),r.Oqu(t.value),r.xp6(4),r.Oqu(t.displayDate),r.xp6(2),r.Oqu(t.displayTime))},dependencies:[i.O5,ps.g,u.q,C.D],encapsulation:2})}return fieldModifiedBy})();function Mi(e,t){if(1&e&&r._UZ(0,"field-label",3),2&e){const e=r.oxw();r.Q6J("fieldname",e.fieldname)("fieldconfig",e.fieldconfig)}}function Ji(e,t){if(1&e&&(r.TgZ(0,"span",6)(1,"span",7),r._UZ(2,"system-icon",8),r.qZA(),r.TgZ(3,"span",9),r._uU(4),r.qZA()()),2&e){const e=t.$implicit;r.xp6(2),r.Q6J("module",e.module)("size","small"),r.xp6(2),r.Oqu(e.summary_text)}}function Oi(e,t){if(1&e&&(r.TgZ(0,"field-generic-display",4),r.YNc(1,Ji,5,3,"span",5),r.qZA()),2&e){const e=r.oxw();r.Q6J("fielddisplayclass",e.fielddisplayclass)("editable",e.isEditable())("fieldconfig",e.fieldconfig)("fieldid",e.fieldid),r.xp6(1),r.Q6J("ngForOf",e.pills)}}function Ni(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"li",34),r.NdJ("click",(function(){const t=r.CHM(e).index,s=r.oxw(3);return r.KtG(s.setLookupType(t))})),r.TgZ(1,"div",35)(2,"div",36),r._UZ(3,"system-icon",37),r.TgZ(4,"div",38),r._UZ(5,"system-label-modulename",39),r.qZA()()()()}if(2&e){const e=t.$implicit;r.xp6(3),r.Q6J("module",e.module),r.xp6(2),r.Q6J("module",e.module)}}const Fi=function(e){return{"slds-is-open":e}};function qi(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"div",24)(1,"div",25)(2,"div",26)(3,"div",27)(4,"div",14)(5,"div",28),r.NdJ("click",(function(){r.CHM(e);const t=r.oxw(2);return r.KtG(t.toggleLookupTypeSelect())})),r._UZ(6,"input",29)(7,"system-icon",30),r.qZA(),r.TgZ(8,"div",31)(9,"ul",32),r.YNc(10,Ni,6,2,"li",33),r.qZA()()()()()()()}if(2&e){const e=r.oxw(2);r.xp6(4),r.Q6J("ngClass",r.VKq(3,Fi,e.lookuplinkSelectOpen)),r.xp6(2),r.Q6J("value",e.lookupTypeName),r.xp6(4),r.Q6J("ngForOf",e.lookuplinks)}}function Ei(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"field-lookup-recent",40),r.NdJ("selectedObject",(function(t){r.CHM(e);const s=r.oxw(2);return r.KtG(s.addItem(t))})),r.qZA()}if(2&e){const e=r.oxw(2);r.Q6J("module",e.lookuplinks[e.lookupType].module)}}function Yi(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"field-lookup-search",41),r.NdJ("selectedObject",(function(t){r.CHM(e);const s=r.oxw(2);return r.KtG(s.addItem(t))}))("searchWithModal",(function(){r.CHM(e);const t=r.oxw(2);return r.KtG(t.searchWithModal())})),r.qZA()}if(2&e){const e=r.oxw(2);r.Q6J("module",e.lookuplinks[e.lookupType].module)("searchterm",e.lookupSearchTerm)}}function Di(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"li",44)(1,"span",45)(2,"span",7),r._UZ(3,"system-icon",8),r.qZA(),r.TgZ(4,"span",9),r._uU(5),r.qZA(),r.TgZ(6,"button",46),r.NdJ("click",(function(){const t=r.CHM(e).$implicit,s=r.oxw(3);return r.KtG(s.removeItem(t))})),r._UZ(7,"system-button-icon",18),r.qZA()()()}if(2&e){const e=t.$implicit;r.xp6(3),r.Q6J("module",e.module)("size","small"),r.xp6(2),r.Oqu(e.summary_text),r.xp6(2),r.Q6J("icon","close")}}function Ui(e,t){if(1&e&&(r.TgZ(0,"ul",42),r.YNc(1,Di,8,4,"li",43),r.qZA()),2&e){const e=r.oxw(2);r.xp6(1),r.Q6J("ngForOf",e.pills)("ngForTrackBy",e.pillid)}}const Qi=function(e){return{"slds-combobox__input":e}};function Ri(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"div",10)(1,"div",11),r.YNc(2,qi,11,5,"div",12),r.TgZ(3,"div",13)(4,"div",14)(5,"div",15)(6,"input",16),r.NdJ("focus",(function(){r.CHM(e);const t=r.oxw();return r.KtG(t.onFocus())}))("ngModelChange",(function(t){r.CHM(e);const s=r.oxw();return r.KtG(s.lookupSearchTerm=t)})),r.qZA(),r.TgZ(7,"button",17),r.NdJ("click",(function(){r.CHM(e);const t=r.oxw();return r.KtG(t.searchWithModal())})),r._UZ(8,"system-button-icon",18),r.qZA()(),r.TgZ(9,"div",19),r.YNc(10,Ei,1,1,"field-lookup-recent",20),r.YNc(11,Yi,1,2,"field-lookup-search",21),r.qZA()()()(),r.YNc(12,Ui,2,2,"ul",22),r._UZ(13,"field-messages",23),r.qZA()}if(2&e){const e=r.oxw();r.Q6J("ngClass",e.getFieldClass()),r.xp6(2),r.Q6J("ngIf",e.lookuplinks.length>1),r.xp6(2),r.Q6J("ngClass",r.VKq(11,Fi,e.lookupSearchOpen)),r.xp6(2),r.Q6J("ngClass",r.VKq(13,Qi,e.lookuplinks.length>1))("ngModel",e.lookupSearchTerm)("placeholder",e.language.getModuleCombinedLabel("LBL_SEARCH",e.lookuplinks[e.lookupType].module)),r.xp6(2),r.Q6J("icon","search"),r.xp6(2),r.Q6J("ngIf",e.lookupSearchOpen&&""===e.lookupSearchTerm),r.xp6(1),r.Q6J("ngIf",e.lookupSearchOpen&&""!==e.lookupSearchTerm),r.xp6(1),r.Q6J("ngIf",e.pills.length>0),r.xp6(1),r.Q6J("fieldname",e.fieldname)}}let ji=(()=>{class fieldLookup extends d.O{model;view;broadcast;language;metadata;router;elementRef;renderer;modal;clickListener;lookuplinks=[];lookupType=0;lookuplinkSelectOpen=!1;lookupSearchOpen=!1;lookupSearchTerm="";pills=[];constructor(e,t,s,i,n,l,o,a,d){super(e,t,i,n,l),this.model=e,this.view=t,this.broadcast=s,this.language=i,this.metadata=n,this.router=l,this.elementRef=o,this.renderer=a,this.modal=d,this.broadcast.message$.subscribe((e=>this.handleMessage(e))),this.model.data$.subscribe((e=>{this.setPills()}))}ngOnInit(){this.lookuplinks=this.getLookuplinks()}get displayAssignedUser(){return this.fieldconfig.displayassigneduser}get lookupTypeName(){return this.language.getModuleName(this.lookuplinks[this.lookupType].module)}getLookupmodules(){let e;return this.fieldconfig.lookupmodules&&(e=this.fieldconfig.lookupmodules.replace(/\s/g,"").split(",")),e||(e=["Contacts","Users"]),e}getLookuplinks(){let e;if(this.fieldconfig.lookuplinks&&(e=this.fieldconfig.lookuplinks.replace(/\s/g,"").split(",")),!e){e=[];for(let t of this.getLookupmodules())e.push(t.toLowerCase())}let t=[];for(let s of e)t.push({name:s,module:this.metadata.getFieldDefs(this.model.module,s).module});return t}setPills(){for(let e of this.lookuplinks)if(this.model.data[e.name]&&this.model.data[e.name].beans)for(let t in this.model.data[e.name].beans){let s=this.model.data[e.name].beans[t];("Users"!=e.module||this.displayAssignedUser||t!=this.model.data.assigned_user_id)&&(this.pills.findIndex((e=>e.id==s.id))<0&&this.pills.push({module:e.module,id:s.id,summary_text:s.summary_text,link:e.name}))}}addItem(e){this.model.data[this.lookuplinks[this.lookupType].name]||(this.model.data[this.lookuplinks[this.lookupType].name]={beans:{}}),this.model.data[this.lookuplinks[this.lookupType].name].beans[e.id]={id:e.id,summary_text:e.text},this.lookupSearchOpen=!1,this.setPills()}handleMessage(e){if(e.messagedata.reference&&"model.save"===e.messagetype)this.fieldid===e.messagedata.reference&&(this.lookupSearchTerm="",this.addItem({id:e.messagedata.data.id,text:e.messagedata.data.summary_text}))}onClick(e){this.elementRef.nativeElement.contains(e.target)||this.closePopups()}closePopups(){this.lookupSearchOpen=!1,this.lookuplinkSelectOpen=!1,this.clickListener()}toggleLookupTypeSelect(){this.lookuplinkSelectOpen=!this.lookuplinkSelectOpen,this.lookupSearchOpen=!1}setLookupType(e){this.lookupSearchTerm="",this.lookupType=e,this.lookuplinkSelectOpen=!1}removeItem(e){this.model.data[e.link].beans_relations_to_delete||(this.model.data[e.link].beans_relations_to_delete={}),this.model.data[e.link].beans_relations_to_delete[e.id]=e,delete this.model.data[e.link].beans[e.id];let t=this.pills.findIndex((t=>t.id==e.id));this.pills.splice(t,1)}onFocus(){this.openSearchDropDown()}openSearchDropDown(){this.lookuplinkSelectOpen=!1,this.lookupSearchOpen=!0,this.clickListener=this.renderer.listen("document","click",(e=>this.onClick(e)))}searchWithModal(){this.modal.openModal("ObjectModalModuleLookup").subscribe((e=>{e.instance.module=this.lookuplinks[this.lookupType].module,e.instance.multiselect=!1,e.instance.selectedItems.subscribe((e=>{this.addItem({id:e[0].id,text:e[0].summary_text,data:e[0]})})),e.instance.usedSearchTerm.subscribe((e=>{this.lookupSearchTerm=e})),e.instance.searchTerm=this.lookupSearchTerm}))}pillid(e){return e.id}static ɵfac=function(e){return new(e||fieldLookup)(r.Y36(w.o),r.Y36(k.e),r.Y36(X.f),r.Y36(x.d),r.Y36(c.Pu),r.Y36(A.F0),r.Y36(r.SBq),r.Y36(r.Qsj),r.Y36(L.o))};static ɵcmp=r.Xpm({type:fieldLookup,selectors:[["field-lookup"]],features:[r.qOj],decls:3,vars:3,consts:[[3,"fieldname","fieldconfig",4,"ngIf"],[3,"fielddisplayclass","editable","fieldconfig","fieldid",4,"ngIf"],["class","slds-form-element__control",3,"ngClass",4,"ngIf"],[3,"fieldname","fieldconfig"],[3,"fielddisplayclass","editable","fieldconfig","fieldid"],["class","slds-pill slds-m-right--xx-small slds-p-around--xx-small",4,"ngFor","ngForOf"],[1,"slds-pill","slds-m-right--xx-small","slds-p-around--xx-small"],[1,"slds-icon_container","slds-icon-standard-account","slds-pill__icon_container"],[3,"module","size"],[1,"slds-pill__label"],[1,"slds-form-element__control",3,"ngClass"],[1,"slds-combobox-group","slds-p-vertical--xx-small"],["class","slds-combobox_object-switcher slds-combobox-addon_start",4,"ngIf"],[1,"slds-combobox_container","slds-combobox-addon_end"],["role","combobox",1,"slds-combobox","slds-dropdown-trigger","slds-dropdown-trigger_click",3,"ngClass"],["role","none",1,"slds-combobox__form-element","slds-input-has-icon","slds-input-has-icon_right"],["type","text","aria-autocomplete","list","autoComplete","off","role","textbox",1,"slds-input",3,"ngClass","ngModel","placeholder","focus","ngModelChange"],[1,"slds-button","slds-button_icon","slds-input__icon","slds-input__icon_right",3,"click"],[3,"icon"],["role","listbox",1,"slds-dropdown","slds-dropdown_length-with-icon-7","slds-dropdown_fluid"],[3,"module","selectedObject",4,"ngIf"],[3,"module","searchterm","selectedObject","searchWithModal",4,"ngIf"],["class","slds-listbox slds-listbox_horizontal","role","group",4,"ngIf"],[3,"fieldname"],[1,"slds-combobox_object-switcher","slds-combobox-addon_start"],[1,"slds-form-element"],[1,"slds-form-element__control"],[1,"slds-combobox_container"],[1,"slds-combobox__form-element","slds-input-has-icon","slds-input-has-icon--right",3,"click"],["type","text","readonly","","autoComplete","off","role","textbox",1,"slds-input","slds-combobox__input","slds-combobox__input-value",3,"value"],["icon","down","sprite","utility","addclasses","slds-input__icon slds-input__icon_right"],["role","listbox",1,"slds-dropdown","slds-dropdown_length-5","slds-dropdown_x-small","slds-dropdown_left"],["role","group","aria-label","Suggested for you",1,"slds-listbox","slds-listbox_vertical"],["role","presentation","class","slds-listbox__item",3,"click",4,"ngFor","ngForOf"],["role","presentation",1,"slds-listbox__item",3,"click"],["role","option",1,"slds-media","slds-listbox__option","slds-listbox__option_plain","slds-media_small"],[1,"slds-grid","slds-grid--vertical-align-center"],["size","x-small",3,"module"],[1,"slds-truncate"],[3,"module"],[3,"module","selectedObject"],[3,"module","searchterm","selectedObject","searchWithModal"],["role","group",1,"slds-listbox","slds-listbox_horizontal"],["role","presentation","class","slds-listbox__item slds-p-top_xxx-small",4,"ngFor","ngForOf","ngForTrackBy"],["role","presentation",1,"slds-listbox__item","slds-p-top_xxx-small"],[1,"slds-pill"],[1,"slds-button","slds-button--icon","slds-pill__remove",3,"click"]],template:function(e,t){1&e&&(r.YNc(0,Mi,1,2,"field-label",0),r.YNc(1,Oi,2,5,"field-generic-display",1),r.YNc(2,Ri,14,15,"div",2)),2&e&&(r.Q6J("ngIf",t.displayLabel),r.xp6(1),r.Q6J("ngIf",!t.isEditMode()),r.xp6(1),r.Q6J("ngIf",t.isEditable()&&t.isEditMode()))},dependencies:[i.mk,i.sg,i.O5,n.Fj,n.JJ,n.On,Z.J,gs.f,hs.M,u.q,C.D,fs.P,bs.$,M.a],encapsulation:2})}return fieldLookup})();var Bi=s(46538),Gi=s(16822);function Pi(e,t){if(1&e&&r._UZ(0,"field-label",3),2&e){const e=r.oxw();r.Q6J("fieldname",e.fieldname)("fieldconfig",e.fieldconfig)}}const Hi=function(e){return{"slds-text-color_error":e}};function zi(e,t){if(1&e&&(r.TgZ(0,"div",6)(1,"span",7),r._UZ(2,"system-display-datetime",8),r.qZA()()),2&e){const e=r.oxw(2);r.xp6(1),r.Q6J("ngClass",r.VKq(3,Hi,e.highlightdate)),r.xp6(1),r.Q6J("date",e.value)("displayTime",!1)}}function Vi(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"div",6)(1,"a",9),r.NdJ("click",(function(){r.CHM(e);const t=r.oxw(2);return r.KtG(t.goRecord())})),r.TgZ(2,"span",7),r._UZ(3,"system-display-datetime",8),r.qZA()()()}if(2&e){const e=r.oxw(2);r.xp6(2),r.Q6J("ngClass",r.VKq(3,Hi,e.highlightdate)),r.xp6(1),r.Q6J("date",e.value)("displayTime",!1)}}function $i(e,t){if(1&e&&(r.TgZ(0,"field-generic-display",4),r.YNc(1,zi,3,5,"div",5),r.YNc(2,Vi,4,5,"div",5),r.qZA()),2&e){const e=r.oxw();r.Q6J("fielddisplayclass",e.fielddisplayclass)("editable",e.isEditable())("fieldconfig",e.fieldconfig),r.xp6(1),r.Q6J("ngIf",!e.displayLink()),r.xp6(1),r.Q6J("ngIf",e.displayLink())}}function Ki(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"div",10)(1,"system-input-date",11),r.NdJ("ngModelChange",(function(t){r.CHM(e);const s=r.oxw();return r.KtG(s.value=t)}))("valid",(function(t){r.CHM(e);const s=r.oxw();return r.KtG(s.setValid(t))})),r.qZA(),r._UZ(2,"field-messages",12),r.qZA()}if(2&e){const e=r.oxw();r.Q6J("ngClass",e.css_classes),r.xp6(1),r.Q6J("ngModel",e.value),r.xp6(1),r.Q6J("fieldname",e.fieldname)}}let Xi=(()=>{class fieldDate extends d.O{model;view;language;metadata;router;constructor(e,t,s,i,n){super(e,t,s,i,n),this.model=e,this.view=t,this.language=s,this.metadata=i,this.router=n}setValid(e){e?this.clearFieldError():this.setFieldError(this.language.getLabel("LBL_INPUT_INVALID"))}get highlightdate(){return!!(this.fieldconfig.highlightpast&&this.value&&new moment>new moment(this.model.getField(this.fieldname)))}setValidity(e){e?this.clearFieldError():this.setFieldError(this.language.getLabel("LBL_INPUT_INVALID"))}static ɵfac=function(e){return new(e||fieldDate)(r.Y36(w.o),r.Y36(k.e),r.Y36(x.d),r.Y36(c.Pu),r.Y36(A.F0))};static ɵcmp=r.Xpm({type:fieldDate,selectors:[["field-date"]],features:[r.qOj],decls:3,vars:3,consts:[[3,"fieldname","fieldconfig",4,"ngIf"],[3,"fielddisplayclass","editable","fieldconfig",4,"ngIf"],["class","slds-form-element__control slds-p-around--xx-small",3,"ngClass",4,"ngIf"],[3,"fieldname","fieldconfig"],[3,"fielddisplayclass","editable","fieldconfig"],["class","slds-truncate",4,"ngIf"],[1,"slds-truncate"],[3,"ngClass"],[3,"date","displayTime"],["href","javascript:void(0);",3,"click"],[1,"slds-form-element__control","slds-p-around--xx-small",3,"ngClass"],["system-input-date-hide-error","",3,"ngModel","ngModelChange","valid"],[3,"fieldname"]],template:function(e,t){1&e&&(r.YNc(0,Pi,1,2,"field-label",0),r.YNc(1,$i,3,5,"field-generic-display",1),r.YNc(2,Ki,3,3,"div",2)),2&e&&(r.Q6J("ngIf",t.displayLabel),r.xp6(1),r.Q6J("ngIf",!t.isEditMode()),r.xp6(1),r.Q6J("ngIf",t.isEditable()&&t.isEditMode()))},dependencies:[i.mk,i.O5,n.JJ,n.On,Bi.a,Gi.z,u.q,C.D,M.a],encapsulation:2})}return fieldDate})();var Wi=s(72006);function en(e,t){if(1&e&&r._UZ(0,"field-label",3),2&e){const e=r.oxw();r.Q6J("fieldname",e.fieldname)("fieldconfig",e.fieldconfig)}}function tn(e,t){if(1&e&&(r.TgZ(0,"div",6)(1,"span",7),r._uU(2),r.qZA()()),2&e){const e=r.oxw(2);r.xp6(2),r.Oqu(e.displayTime)}}function sn(e,t){if(1&e&&(r.TgZ(0,"field-generic-display",4),r.YNc(1,tn,3,1,"div",5),r.qZA()),2&e){const e=r.oxw();r.Q6J("fielddisplayclass",e.fielddisplayclass)("editable",e.isEditable())("fieldconfig",e.fieldconfig),r.xp6(1),r.Q6J("ngIf",!e.displayLink())}}function nn(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"div",8)(1,"system-input-time",9),r.NdJ("ngModelChange",(function(t){r.CHM(e);const s=r.oxw();return r.KtG(s.value=t)})),r.qZA(),r._UZ(2,"field-messages",10),r.qZA()}if(2&e){const e=r.oxw();r.Q6J("ngClass",e.getFieldClass()),r.xp6(1),r.Q6J("ngModel",e.value),r.xp6(1),r.s9C("fieldname",e.fieldname)}}let ln=(()=>{class fieldTime extends d.O{model;view;language;metadata;router;userpreferences;constructor(e,t,s,i,n,l){super(e,t,s,i,n),this.model=e,this.view=t,this.language=s,this.metadata=i,this.router=n,this.userpreferences=l}get displayTime(){return this.value.format(this.userpreferences.getTimeFormat())}static ɵfac=function(e){return new(e||fieldTime)(r.Y36(w.o),r.Y36(k.e),r.Y36(x.d),r.Y36(c.Pu),r.Y36(A.F0),r.Y36(ye.z))};static ɵcmp=r.Xpm({type:fieldTime,selectors:[["field-time"]],features:[r.qOj],decls:3,vars:3,consts:[[3,"fieldname","fieldconfig",4,"ngIf"],[3,"fielddisplayclass","editable","fieldconfig",4,"ngIf"],["class","slds-form-element__control slds-p-around--xx-small",3,"ngClass",4,"ngIf"],[3,"fieldname","fieldconfig"],[3,"fielddisplayclass","editable","fieldconfig"],["class","slds-truncate",4,"ngIf"],[1,"slds-truncate"],[1,"slds-p-left--x-small",2,"font-style","italic"],[1,"slds-form-element__control","slds-p-around--xx-small",3,"ngClass"],[3,"ngModel","ngModelChange"],[3,"fieldname"]],template:function(e,t){1&e&&(r.YNc(0,en,1,2,"field-label",0),r.YNc(1,sn,2,4,"field-generic-display",1),r.YNc(2,nn,3,3,"div",2)),2&e&&(r.Q6J("ngIf",t.displayLabel),r.xp6(1),r.Q6J("ngIf",!t.isEditMode()),r.xp6(1),r.Q6J("ngIf",t.isEditable()&&t.isEditMode()))},dependencies:[i.mk,i.O5,n.JJ,n.On,Wi.H,u.q,C.D,M.a],encapsulation:2})}return fieldTime})();function on(e,t){if(1&e&&r._UZ(0,"field-label",3),2&e){const e=r.oxw();r.Q6J("fieldname",e.fieldname)("fieldconfig",e.fieldconfig)}}function an(e,t){if(1&e&&(r.TgZ(0,"span"),r._uU(1),r.qZA()),2&e){const e=r.oxw(2);r.xp6(1),r.Oqu(e.displaySpan)}}function dn(e,t){if(1&e&&(r.TgZ(0,"span"),r._uU(1),r.qZA()),2&e){const e=r.oxw(2);r.xp6(1),r.Oqu(e.displayDate)}}function rn(e,t){if(1&e&&(r.TgZ(0,"span",7),r._uU(1),r.qZA()),2&e){const e=r.oxw(2);r.xp6(1),r.Oqu(e.displayTime)}}function cn(e,t){if(1&e&&(r.TgZ(0,"field-generic-display",4),r.YNc(1,an,2,1,"span",5),r.YNc(2,dn,2,1,"span",5),r.YNc(3,rn,2,1,"span",6),r.qZA()),2&e){const e=r.oxw();r.Q6J("fielddisplayclass",e.fielddisplayclass)("editable",e.isEditable())("fieldconfig",e.fieldconfig),r.xp6(1),r.Q6J("ngIf",e.fieldconfig.displayfromnow),r.xp6(1),r.Q6J("ngIf",!e.fieldconfig.displayfromnow),r.xp6(1),r.Q6J("ngIf",!e.fieldconfig.displayfromnow)}}function un(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"div",8)(1,"div",9)(2,"system-input-date",10),r.NdJ("ngModelChange",(function(t){r.CHM(e);const s=r.oxw();return r.KtG(s.value=t)}))("valid",(function(t){r.CHM(e);const s=r.oxw();return r.KtG(s.setValid(t))})),r.qZA(),r.TgZ(3,"system-input-time",11),r.NdJ("ngModelChange",(function(t){r.CHM(e);const s=r.oxw();return r.KtG(s.value=t)}))("valid",(function(t){r.CHM(e);const s=r.oxw();return r.KtG(s.setValid(t))})),r.qZA()(),r._UZ(4,"field-messages",12),r.qZA()}if(2&e){const e=r.oxw();r.Q6J("ngClass",e.css_classes),r.xp6(2),r.Q6J("ngModel",e.value),r.xp6(1),r.Q6J("ngModel",e.value),r.xp6(1),r.Q6J("fieldname",e.fieldname)}}let mn=(()=>{class fieldDateTime extends d.O{model;view;language;metadata;router;userpreferences;constructor(e,t,s,i,n,l){super(e,t,s,i,n),this.model=e,this.view=t,this.language=s,this.metadata=i,this.router=n,this.userpreferences=l}get displayValue(){try{if(this.model.getField(this.fieldname)){let e=this.model.getField(this.fieldname);return e.isValid()?this.fieldconfig.displayfromnow?e.fromNow():e.format(this.userpreferences.getDateFormat()+" "+this.userpreferences.getTimeFormat()):""}return""}catch(e){return""}}get displaySpan(){try{if(this.model.getField(this.fieldname)){let e=this.model.getField(this.fieldname);return e.isValid()?e.fromNow():""}return""}catch(e){return""}}get displayDate(){try{if(this.model.getField(this.fieldname)){let e=this.model.getField(this.fieldname);return e.isValid()?e.format(this.userpreferences.getDateFormat()):""}return""}catch(e){return""}}get displayTime(){try{if(this.model.getField(this.fieldname)){let e=this.model.getField(this.fieldname);return e.isValid()?e.format(this.userpreferences.getTimeFormat()):""}return""}catch(e){return""}}setValid(e){e?this.clearFieldError():this.setFieldError(this.language.getLabel("LBL_INPUT_INVALID"))}get highlightdate(){return(1==this.fieldconfig.highlightpast||!0===this.fieldconfig.highlightpast)&&new moment>new moment(this.model.getField(this.fieldname))}static ɵfac=function(e){return new(e||fieldDateTime)(r.Y36(w.o),r.Y36(k.e),r.Y36(x.d),r.Y36(c.Pu),r.Y36(A.F0),r.Y36(ye.z))};static ɵcmp=r.Xpm({type:fieldDateTime,selectors:[["field-date-time"]],features:[r.qOj],decls:3,vars:3,consts:[[3,"fieldname","fieldconfig",4,"ngIf"],[3,"fielddisplayclass","editable","fieldconfig",4,"ngIf"],["class","slds-form-element__control slds-p-around--xx-small",3,"ngClass",4,"ngIf"],[3,"fieldname","fieldconfig"],[3,"fielddisplayclass","editable","fieldconfig"],[4,"ngIf"],["class","slds-p-left--x-small","style","font-style: italic",4,"ngIf"],[1,"slds-p-left--x-small",2,"font-style","italic"],[1,"slds-form-element__control","slds-p-around--xx-small",3,"ngClass"],[1,"slds-grid"],["system-input-date-hide-error","",1,"slds-size--1-of-2","slds-p-right--xxx-small",3,"ngModel","ngModelChange","valid"],["system-input-time-hide-error","",1,"slds-size--1-of-2","slds-p-left--xxx-small",3,"ngModel","ngModelChange","valid"],[3,"fieldname"]],template:function(e,t){1&e&&(r.YNc(0,on,1,2,"field-label",0),r.YNc(1,cn,4,6,"field-generic-display",1),r.YNc(2,un,5,4,"div",2)),2&e&&(r.Q6J("ngIf",t.displayLabel),r.xp6(1),r.Q6J("ngIf",!t.isEditMode()),r.xp6(1),r.Q6J("ngIf",t.isEditable()&&t.isEditMode()))},dependencies:[i.mk,i.O5,n.JJ,n.On,Gi.z,Wi.H,u.q,C.D,M.a],encapsulation:2})}return fieldDateTime})();function gn(e,t){if(1&e&&r._UZ(0,"field-label",3),2&e){const e=r.oxw();r.Q6J("fieldname",e.fieldname)("fieldconfig",e.fieldconfig)}}function hn(e,t){if(1&e&&(r.TgZ(0,"span"),r._uU(1," - "),r._UZ(2,"system-display-datetime",7),r.qZA()),2&e){const e=r.oxw(2);r.xp6(2),r.Q6J("date",e.dateEnd)("displayDate",!1)}}function pn(e,t){if(1&e&&(r.TgZ(0,"field-generic-display",4),r._UZ(1,"system-display-datetime",5),r.YNc(2,hn,3,2,"span",6),r.qZA()),2&e){const e=r.oxw();r.Q6J("fielddisplayclass",e.fielddisplayclass)("editable",e.isEditable())("fieldconfig",e.fieldconfig),r.xp6(1),r.Q6J("date",e.value),r.xp6(1),r.Q6J("ngIf",e.dateEnd)}}function fn(e,t){if(1&e&&(r.TgZ(0,"option"),r._uU(1),r.qZA()),2&e){const e=t.$implicit;r.xp6(1),r.Oqu(e)}}function bn(e,t){if(1&e&&(r.TgZ(0,"option"),r._uU(1),r.qZA()),2&e){const e=t.$implicit;r.xp6(1),r.Oqu(e)}}function _n(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"div",8)(1,"div",9)(2,"system-input-date",10),r.NdJ("ngModelChange",(function(t){r.CHM(e);const s=r.oxw();return r.KtG(s.value=t)})),r.qZA(),r.TgZ(3,"system-input-time",11),r.NdJ("ngModelChange",(function(t){r.CHM(e);const s=r.oxw();return r.KtG(s.value=t)})),r.qZA(),r.TgZ(4,"div",12)(5,"div",13)(6,"select",14),r.NdJ("ngModelChange",(function(t){r.CHM(e);const s=r.oxw();return r.KtG(s.editDurationHours=t)})),r.YNc(7,fn,2,1,"option",15),r.qZA()()(),r.TgZ(8,"div",12)(9,"div",13)(10,"select",14),r.NdJ("ngModelChange",(function(t){r.CHM(e);const s=r.oxw();return r.KtG(s.editDurationMinutes=t)})),r.YNc(11,bn,2,1,"option",15),r.qZA()()()(),r._UZ(12,"field-messages",16),r.qZA()}if(2&e){const e=r.oxw();r.Q6J("ngClass",e.css_classes),r.xp6(2),r.Q6J("ngModel",e.value),r.xp6(1),r.Q6J("ngModel",e.value),r.xp6(3),r.Q6J("ngModel",e.editDurationHours),r.xp6(1),r.Q6J("ngForOf",e.durationHours),r.xp6(3),r.Q6J("ngModel",e.editDurationMinutes),r.xp6(1),r.Q6J("ngForOf",e.durationMinutes),r.xp6(1),r.Q6J("fieldname",e.fieldname)}}let vn=(()=>{class fieldDateTimeDuration extends d.O{model;view;language;metadata;router;userpreferences;durationHours=["0","1","2","3","4","5","6","7","8","9","10","11","12"];durationMinutes=["0","5","10","15","20","25","30","35","40","45","50","55"];duration;constructor(e,t,s,i,n,l){super(e,t,s,i,n),this.model=e,this.view=t,this.language=s,this.metadata=i,this.router=n,this.userpreferences=l}ngOnInit(){super.ngOnInit(),this.subscriptions.add(this.model.data$.subscribe((e=>{if(this.value&&this.dateEnd){let e=0;e="string"==typeof this.dateEnd?moment(this.dateEnd).diff(this.value):this.dateEnd.diff(this.value),this.duration=moment.duration(e)}})))}get fieldend(){return this.fieldconfig.field_end?this.fieldconfig.field_end:"date_end"}get value(){return this.model.getField(this.fieldname)}set value(e){let t={};if(t[this.fieldname]=e,this.duration){let s=new moment(e).add(this.duration.asSeconds(),"s");t[this.fieldend]=s}this.model.setFields(t)}get dateEnd(){return this.model.getField(this.fieldend)}get currentHours(){return this.duration?this.duration.get("hours"):0}get currentMinutes(){return this.duration?this.duration.get("minutes"):0}get editDurationHours(){return this.currentHours}set editDurationHours(e){let t=this.currentMinutes,s=new moment(this.value);s.add(e,"h").add(t,"m"),this.model.setField(this.fieldend,s)}get editDurationMinutes(){return this.currentMinutes}set editDurationMinutes(e){let t=this.currentHours,s=new moment(this.value);s.add(t,"h").add(e,"m"),this.model.setField(this.fieldend,s)}static ɵfac=function(e){return new(e||fieldDateTimeDuration)(r.Y36(w.o),r.Y36(k.e),r.Y36(x.d),r.Y36(c.Pu),r.Y36(A.F0),r.Y36(ye.z))};static ɵcmp=r.Xpm({type:fieldDateTimeDuration,selectors:[["field-date-time-duration"]],features:[r.qOj],decls:3,vars:3,consts:[[3,"fieldname","fieldconfig",4,"ngIf"],[3,"fielddisplayclass","editable","fieldconfig",4,"ngIf"],["class","slds-form-element__control slds-p-around--xx-small",3,"ngClass",4,"ngIf"],[3,"fieldname","fieldconfig"],[3,"fielddisplayclass","editable","fieldconfig"],[3,"date"],[4,"ngIf"],[3,"date","displayDate"],[1,"slds-form-element__control","slds-p-around--xx-small",3,"ngClass"],[1,"slds-grid"],[3,"ngModel","ngModelChange"],[1,"slds-p-left--x-small",3,"ngModel","ngModelChange"],[1,"slds-form-element__control","slds-p-left--x-small","slds-size--1-of-6"],[1,"slds-select_container"],[1,"slds-select",3,"ngModel","ngModelChange"],[4,"ngFor","ngForOf"],[3,"fieldname"]],template:function(e,t){1&e&&(r.YNc(0,gn,1,2,"field-label",0),r.YNc(1,pn,3,5,"field-generic-display",1),r.YNc(2,_n,13,8,"div",2)),2&e&&(r.Q6J("ngIf",t.displayLabel),r.xp6(1),r.Q6J("ngIf",!t.isEditMode()),r.xp6(1),r.Q6J("ngIf",t.isEditable()&&t.isEditMode()))},dependencies:[i.mk,i.sg,i.O5,n.YN,n.Kr,n.EJ,n.JJ,n.On,Bi.a,Gi.z,Wi.H,u.q,C.D,M.a],encapsulation:2})}return fieldDateTimeDuration})();function yn(e,t){if(1&e&&r._UZ(0,"field-label",3),2&e){const e=r.oxw();r.Q6J("fieldname",e.fieldname)("fieldconfig",e.fieldconfig)}}function xn(e,t){if(1&e&&(r.TgZ(0,"field-generic-display",4),r._uU(1),r.qZA()),2&e){const e=r.oxw();r.Q6J("fielddisplayclass",e.fielddisplayclass)("editable",e.isEditable())("fieldconfig",e.fieldconfig),r.xp6(1),r.hij(" ",e.getDisplay(),"\n")}}function wn(e,t){if(1&e&&(r.TgZ(0,"option"),r._uU(1),r.qZA()),2&e){const e=t.$implicit;r.xp6(1),r.Oqu(e)}}function Zn(e,t){if(1&e&&(r.TgZ(0,"option"),r._uU(1),r.qZA()),2&e){const e=t.$implicit;r.xp6(1),r.Oqu(e)}}function Tn(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"div",8)(1,"div",9)(2,"div",10)(3,"select",11),r.NdJ("ngModelChange",(function(t){r.CHM(e);const s=r.oxw(2);return r.KtG(s.editDurationHours=t)})),r.YNc(4,wn,2,1,"option",12),r.qZA()()(),r.TgZ(5,"div",13)(6,"div",10)(7,"select",11),r.NdJ("ngModelChange",(function(t){r.CHM(e);const s=r.oxw(2);return r.KtG(s.editDurationMinutes=t)})),r.YNc(8,Zn,2,1,"option",12),r.qZA()()()()}if(2&e){const e=r.oxw(2);r.xp6(3),r.Q6J("ngModel",e.editDurationHours),r.xp6(1),r.Q6J("ngForOf",e.durationHours),r.xp6(3),r.Q6J("ngModel",e.editDurationMinutes),r.xp6(1),r.Q6J("ngForOf",e.durationMinutes)}}function Cn(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"div",8)(1,"div",14)(2,"div",15)(3,"input",16),r.NdJ("ngModelChange",(function(t){r.CHM(e);const s=r.oxw(2);return r.KtG(s.editDurationHours=t)})),r.qZA(),r.TgZ(4,"span",17),r._uU(5,"h"),r.qZA()()(),r.TgZ(6,"div",18)(7,"div",15)(8,"input",19),r.NdJ("ngModelChange",(function(t){r.CHM(e);const s=r.oxw(2);return r.KtG(s.editDurationMinutes=t)})),r.qZA(),r.TgZ(9,"span",20),r._uU(10,"min"),r.qZA()()()()}if(2&e){const e=r.oxw(2);r.xp6(3),r.Q6J("ngModel",e.editDurationHours)("ngModelOptions",e.modelOptions),r.xp6(5),r.Q6J("ngModel",e.editDurationMinutes)("ngModelOptions",e.modelOptions)}}function kn(e,t){if(1&e&&(r.TgZ(0,"div",5),r.YNc(1,Tn,9,4,"div",6),r.YNc(2,Cn,11,4,"div",6),r._UZ(3,"field-messages",7),r.qZA()),2&e){const e=r.oxw();r.Q6J("ngClass",e.css_classes),r.xp6(1),r.Q6J("ngIf",!e.fieldconfig.freeentry),r.xp6(1),r.Q6J("ngIf",e.fieldconfig.freeentry),r.xp6(1),r.s9C("fieldname",e.fieldname)}}let An=(()=>{class fieldDuration extends d.O{model;view;language;metadata;router;isValid=!0;durationHours=["00","01","02","03","04","05","06","07","08","09","10","11","12"];durationMinutes=["00","15","30","45"];get fieldminutes(){return this.fieldconfig.field_minutes?this.fieldconfig.field_minutes:"duration_minutes"}get fieldhours(){return this.fieldconfig.field_hours?this.fieldconfig.field_hours:"duration_hours"}constructor(e,t,s,i,n){super(e,t,s,i,n),this.model=e,this.view=t,this.language=s,this.metadata=i,this.router=n}getDisplay(){if(this.model.getField(this.fieldminutes)||this.model.getField(this.fieldhours))return("00"+this.model.getField(this.fieldhours)).slice(-2)+":"+("00"+this.model.getField(this.fieldminutes)).slice(-2)}get editDurationHours(){return this.model.getField(this.fieldhours)}set editDurationHours(e){this.model.setField(this.fieldhours,e)}get editDurationMinutes(){return this.model.getField(this.fieldminutes)}set editDurationMinutes(e){this.model.setField(this.fieldminutes,e)}static ɵfac=function(e){return new(e||fieldDuration)(r.Y36(w.o),r.Y36(k.e),r.Y36(x.d),r.Y36(c.Pu),r.Y36(A.F0))};static ɵcmp=r.Xpm({type:fieldDuration,selectors:[["field-duration"]],features:[r.qOj],decls:3,vars:3,consts:[[3,"fieldname","fieldconfig",4,"ngIf"],[3,"fielddisplayclass","editable","fieldconfig",4,"ngIf"],["class","slds-form-element__control slds-p-around--xx-small",3,"ngClass",4,"ngIf"],[3,"fieldname","fieldconfig"],[3,"fielddisplayclass","editable","fieldconfig"],[1,"slds-form-element__control","slds-p-around--xx-small",3,"ngClass"],["class","slds-grid",4,"ngIf"],[3,"fieldname"],[1,"slds-grid"],[1,"slds-form-element__control","slds-size--1-of-2"],[1,"slds-select_container"],[1,"slds-select",3,"ngModel","ngModelChange"],[4,"ngFor","ngForOf"],[1,"slds-form-element__control","slds-m-left--x-small","slds-size--1-of-2"],[1,"slds-form-element","slds-size--1-of-2"],[1,"slds-form-element__control","slds-input-has-fixed-addon"],["type","number","min","0","title","hours",1,"slds-input",2,"padding","0 0.25rem 0 0.25rem",3,"ngModel","ngModelOptions","ngModelChange"],["id","fixed-text-addon-post",1,"slds-form-element__addon"],[1,"slds-form-element","slds-m-left--x-small","slds-size--1-of-2"],["type","number","min","0","max","59","title","minutes",1,"slds-input",2,"padding","0 0.25rem 0 0.25rem",3,"ngModel","ngModelOptions","ngModelChange"],["id","fixed-text-addon-post2",1,"slds-form-element__addon"]],template:function(e,t){1&e&&(r.YNc(0,yn,1,2,"field-label",0),r.YNc(1,xn,2,4,"field-generic-display",1),r.YNc(2,kn,4,4,"div",2)),2&e&&(r.Q6J("ngIf",t.displayLabel),r.xp6(1),r.Q6J("ngIf",!t.isEditMode()),r.xp6(1),r.Q6J("ngIf",t.isEditable()&&t.isEditMode()))},dependencies:[i.mk,i.sg,i.O5,n.YN,n.Kr,n.Fj,n.wV,n.EJ,n.JJ,n.qQ,n.Fd,n.On,u.q,C.D,M.a],encapsulation:2})}return fieldDuration})();function Ln(e,t){if(1&e&&r._UZ(0,"field-label",6),2&e){const e=r.oxw(2);r.Q6J("fieldname",e.fieldname)("fieldconfig",e.fieldconfig)}}function In(e,t){if(1&e&&(r.ynx(0),r.YNc(1,Ln,1,2,"field-label",2),r.TgZ(2,"field-generic-display",3),r._UZ(3,"system-display-datetime",4),r._uU(4," - "),r._UZ(5,"system-display-datetime",5),r.qZA(),r.BQk()),2&e){const e=r.oxw();r.xp6(1),r.Q6J("ngIf",e.displayLabel),r.xp6(1),r.Q6J("fielddisplayclass",e.fielddisplayclass)("editable",e.isEditable())("fieldconfig",e.fieldconfig),r.xp6(1),r.Q6J("date",e.startDate),r.xp6(2),r.Q6J("date",e.endDate)("displayDate",e.showToDate)}}function Sn(e,t){1&e&&(r.TgZ(0,"abbr",23),r._uU(1,"*"),r.qZA())}function Mn(e,t){1&e&&(r.TgZ(0,"abbr",23),r._uU(1,"*"),r.qZA())}function Jn(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"div",11)(1,"div",12)(2,"div",13)(3,"label",14),r.YNc(4,Sn,2,0,"abbr",15),r._UZ(5,"system-label",16),r.qZA(),r.TgZ(6,"system-input-date",17),r.NdJ("ngModelChange",(function(t){r.CHM(e);const s=r.oxw(2);return r.KtG(s.startDate=t)}))("valid",(function(t){r.CHM(e);const s=r.oxw(2);return r.KtG(s.setDateValid("start",t))})),r.qZA()(),r.TgZ(7,"div",18)(8,"label",14),r._UZ(9,"system-label",19),r.qZA(),r.TgZ(10,"system-input-time",20),r.NdJ("ngModelChange",(function(t){r.CHM(e);const s=r.oxw(2);return r.KtG(s.startDate=t)}))("valid",(function(t){r.CHM(e);const s=r.oxw(2);return r.KtG(s.setDateValid("start",t))})),r.qZA()()(),r.TgZ(11,"div",12)(12,"div",13)(13,"label",14),r.YNc(14,Mn,2,0,"abbr",15),r._UZ(15,"system-label",21),r.qZA(),r.TgZ(16,"system-input-date",17),r.NdJ("ngModelChange",(function(t){r.CHM(e);const s=r.oxw(2);return r.KtG(s.endDate=t)}))("valid",(function(t){r.CHM(e);const s=r.oxw(2);return r.KtG(s.setDateValid("end",t))})),r.qZA()(),r.TgZ(17,"div",18)(18,"label",14),r._UZ(19,"system-label",22),r.qZA(),r.TgZ(20,"system-input-time",20),r.NdJ("ngModelChange",(function(t){r.CHM(e);const s=r.oxw(2);return r.KtG(s.endDate=t)}))("valid",(function(t){r.CHM(e);const s=r.oxw(2);return r.KtG(s.setDateValid("end",t))})),r.qZA()()()()}if(2&e){const e=r.oxw(2);r.xp6(4),r.Q6J("ngIf",e.stati.editable&&e.stati.required),r.xp6(2),r.Q6J("ngModel",e.startDate),r.xp6(4),r.Q6J("ngModel",e.startDate),r.xp6(4),r.Q6J("ngIf",e.stati.editable&&e.stati.required),r.xp6(2),r.Q6J("ngModel",e.endDate),r.xp6(4),r.Q6J("ngModel",e.endDate)}}function On(e,t){1&e&&(r.TgZ(0,"abbr",23),r._uU(1,"*"),r.qZA())}function Nn(e,t){1&e&&(r.TgZ(0,"abbr",23),r._uU(1,"*"),r.qZA())}function Fn(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"div",24)(1,"div",25)(2,"div",13)(3,"label",14),r.YNc(4,On,2,0,"abbr",15),r._UZ(5,"system-label",16),r.qZA(),r.TgZ(6,"system-input-date",17),r.NdJ("ngModelChange",(function(t){r.CHM(e);const s=r.oxw(2);return r.KtG(s.startDate=t)}))("valid",(function(t){r.CHM(e);const s=r.oxw(2);return r.KtG(s.setDateValid("start",t))})),r.qZA()(),r.TgZ(7,"div",18)(8,"label",14),r._UZ(9,"system-label",19),r.qZA(),r.TgZ(10,"system-input-time",20),r.NdJ("ngModelChange",(function(t){r.CHM(e);const s=r.oxw(2);return r.KtG(s.startDate=t)}))("valid",(function(t){r.CHM(e);const s=r.oxw(2);return r.KtG(s.setDateValid("start",t))})),r.qZA()()(),r.TgZ(11,"div",25)(12,"div",13)(13,"label",14),r.YNc(14,Nn,2,0,"abbr",15),r._UZ(15,"system-label",21),r.qZA(),r.TgZ(16,"system-input-date",17),r.NdJ("ngModelChange",(function(t){r.CHM(e);const s=r.oxw(2);return r.KtG(s.endDate=t)}))("valid",(function(t){r.CHM(e);const s=r.oxw(2);return r.KtG(s.setDateValid("end",t))})),r.qZA()(),r.TgZ(17,"div",18)(18,"label",14),r._UZ(19,"system-label",22),r.qZA(),r.TgZ(20,"system-input-time",20),r.NdJ("ngModelChange",(function(t){r.CHM(e);const s=r.oxw(2);return r.KtG(s.endDate=t)}))("valid",(function(t){r.CHM(e);const s=r.oxw(2);return r.KtG(s.setDateValid("end",t))})),r.qZA()()()()}if(2&e){const e=r.oxw(2);r.xp6(4),r.Q6J("ngIf",e.stati.editable&&e.stati.required),r.xp6(2),r.Q6J("ngModel",e.startDate),r.xp6(4),r.Q6J("ngModel",e.startDate),r.xp6(4),r.Q6J("ngIf",e.stati.editable&&e.stati.required),r.xp6(2),r.Q6J("ngModel",e.endDate),r.xp6(4),r.Q6J("ngModel",e.endDate)}}function qn(e,t){if(1&e&&(r.TgZ(0,"div",7),r.YNc(1,Jn,21,6,"div",8),r.YNc(2,Fn,21,6,"ng-template",null,9,r.W1O),r._UZ(4,"field-messages",10),r.qZA()),2&e){const e=r.MAs(3),t=r.oxw();r.Q6J("ngClass",t.css_classes),r.xp6(1),r.Q6J("ngIf",t.vertical)("ngIfElse",e),r.xp6(3),r.Q6J("fieldname",t.fieldname)}}let En=(()=>{class fieldDateTimeSpan extends d.O{model;view;language;metadata;router;isValid=!0;errorMessage="";duration;startDateValid=!0;endDateValid=!0;constructor(e,t,s,i,n){super(e,t,s,i,n),this.model=e,this.view=t,this.language=s,this.metadata=i,this.router=n}ngOnInit(){super.ngOnInit(),this.subscriptions.add(this.model.data$.subscribe((e=>{if(this.startDate&&this.endDate){let e=0;e="string"==typeof this.endDate?moment(this.endDate).diff(this.startDate):this.endDate.diff(this.startDate),this.duration=moment.duration(e)}})))}get vertical(){return!0!==this.fieldconfig.horizontal}get showToDate(){return!this.startDate||!this.endDate||!this.startDate.isSame(this.endDate,"day")}get fieldstart(){return this.fieldconfig.date_start?this.fieldconfig.date_start:"date_start"}get fieldend(){return this.fieldconfig.date_end?this.fieldconfig.date_end:"date_end"}get startDate(){return this.model.getField(this.fieldstart)}set startDate(e){let t={};if(t[this.fieldstart]=e,this.duration){let s=new moment(e).add(this.duration.asSeconds(),"s");t[this.fieldend]=s}else this.model.getField(this.fieldend)||(t[this.fieldend]=new moment(e));this.model.setFields(t)}get endDate(){return this.model.getField(this.fieldend)}set endDate(e){this.model.getFieldValue(this.fieldstart)||(this.startDate=new moment(e)),e.isBefore(this.model.getFieldValue(this.fieldstart))?(this.isValid=!1,this.errorMessage="enddate cannot be before startdate",this.model.setFieldMessage("error","enddate cannot be before startdate",this.fieldname,"sequencecheck")):(this.model.resetFieldMessages(this.fieldname,"error","sequencecheck"),this.model.setField(this.fieldend,e),this.isValid=!0)}setDateValid(e,t){switch(e){case"start":this.startDateValid=t;break;case"end":this.endDateValid=t}this.endDateValid&&this.startDateValid?this.model.resetFieldMessages(this.fieldname,"error","validitycheck"):this.model.setFieldMessage("error",this.language.getLabel("LBL_INPUT_INVALID"),this.fieldname,"validitycheck")}get stati(){let e=this.model.getFieldStati(this.fieldname);return!e.editable||this.view.isEditable&&!this.fieldconfig.readonly||(e.editable=!1),this.fieldconfig.required&&(e.required=!0),e}static ɵfac=function(e){return new(e||fieldDateTimeSpan)(r.Y36(w.o),r.Y36(k.e),r.Y36(x.d),r.Y36(c.Pu),r.Y36(A.F0))};static ɵcmp=r.Xpm({type:fieldDateTimeSpan,selectors:[["field-date-time-span"]],features:[r.qOj],decls:2,vars:2,consts:[[4,"ngIf"],["class","slds-form-element__control slds-p-around--xx-small",3,"ngClass",4,"ngIf"],[3,"fieldname","fieldconfig",4,"ngIf"],[3,"fielddisplayclass","editable","fieldconfig"],[3,"date"],[3,"date","displayDate"],[3,"fieldname","fieldconfig"],[1,"slds-form-element__control","slds-p-around--xx-small",3,"ngClass"],["class","slds-grid slds-grid--vertical",4,"ngIf","ngIfElse"],["horizontal",""],[3,"fieldname"],[1,"slds-grid","slds-grid--vertical"],[1,"slds-grid","slds-gutters_xx-small"],[1,"slds-form-element","slds-col","slds-size--1-of-2"],[1,"slds-form-element__label"],["class","slds-required",4,"ngIf"],["label","LBL_DATE_START"],["system-input-date-hide-error","",3,"ngModel","ngModelChange","valid"],[1,"slds-form-element","slds-col","slds-size--1-of-2","slds-m-top--none"],["label","LBL_TIME_START"],["system-input-time-hide-error","",3,"ngModel","ngModelChange","valid"],["label","LBL_DATE_END"],["label","LBL_TIME_END"],[1,"slds-required"],[1,"slds-grid","slds-wrap","slds-gutters_xx-small"],[1,"slds-grid","slds-col","slds-gutters_xx-small","slds-size--1-of-1","slds-large-size--1-of-2"]],template:function(e,t){1&e&&(r.YNc(0,In,6,7,"ng-container",0),r.YNc(1,qn,5,4,"div",1)),2&e&&(r.Q6J("ngIf",!t.isEditMode()),r.xp6(1),r.Q6J("ngIf",t.isEditable()&&t.isEditMode()))},dependencies:[i.mk,i.O5,n.JJ,n.On,Bi.a,Gi.z,Wi.H,te._,u.q,C.D,M.a],encapsulation:2})}return fieldDateTimeSpan})();function Yn(e,t){if(1&e&&r._UZ(0,"field-label",5),2&e){const e=r.oxw(2);r.Q6J("fieldname",e.fieldname)("fieldconfig",e.fieldconfig)}}function Dn(e,t){if(1&e&&(r.ynx(0),r.YNc(1,Yn,1,2,"field-label",2),r.TgZ(2,"field-generic-display",3),r._UZ(3,"system-display-datetime",4),r._uU(4,"  - "),r._UZ(5,"system-display-datetime",4),r.qZA(),r.BQk()),2&e){const e=r.oxw();r.xp6(1),r.Q6J("ngIf",e.displayLabel),r.xp6(1),r.Q6J("fielddisplayclass",e.fielddisplayclass)("editable",e.isEditable())("fieldconfig",e.fieldconfig),r.xp6(1),r.Q6J("date",e.startDate)("displayTime",!1),r.xp6(2),r.Q6J("date",e.endDate)("displayTime",!1)}}function Un(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"div",6)(1,"div",7)(2,"div",8)(3,"div",9)(4,"label",10),r._UZ(5,"system-label",11),r.qZA(),r.TgZ(6,"system-input-date",12),r.NdJ("ngModelChange",(function(t){r.CHM(e);const s=r.oxw();return r.KtG(s.startDate=t)}))("valid",(function(t){r.CHM(e);const s=r.oxw();return r.KtG(s.setDateValid("start",t))})),r.qZA()()(),r.TgZ(7,"div",8)(8,"div",9)(9,"label",10),r._UZ(10,"system-label",13),r.qZA(),r.TgZ(11,"system-input-date",12),r.NdJ("ngModelChange",(function(t){r.CHM(e);const s=r.oxw();return r.KtG(s.endDate=t)}))("valid",(function(t){r.CHM(e);const s=r.oxw();return r.KtG(s.setDateValid("end",t))})),r.qZA()()()(),r._UZ(12,"field-messages",14),r.qZA()}if(2&e){const e=r.oxw();r.Q6J("ngClass",e.css_classes),r.xp6(6),r.Q6J("ngModel",e.startDate),r.xp6(5),r.Q6J("ngModel",e.endDate),r.xp6(1),r.Q6J("fieldname",e.fieldname)}}let Qn=(()=>{class fieldDateSpan extends d.O{model;view;language;metadata;router;isValid=!0;errorMessage="";duration;startDateValid=!0;endDateValid=!0;constructor(e,t,s,i,n){super(e,t,s,i,n),this.model=e,this.view=t,this.language=s,this.metadata=i,this.router=n}ngOnInit(){super.ngOnInit(),this.subscriptions.add(this.model.data$.subscribe((e=>{this.startDate&&this.endDate&&(this.duration=moment.duration(this.endDate.diff(this.startDate)))})))}get fieldstart(){return this.fieldconfig.date_start?this.fieldconfig.date_start:"date_start"}get fieldend(){return this.fieldconfig.date_end?this.fieldconfig.date_end:"date_end"}get startDate(){return this.model.getField(this.fieldstart)}set startDate(e){let t={};if(t[this.fieldstart]=e,this.duration){let s=new moment(e).add(this.duration.asSeconds(),"s");t[this.fieldend]=s}this.model.setFields(t)}get endDate(){return this.model.getField(this.fieldend)}set endDate(e){this.model.getFieldValue(this.fieldstart)||(this.startDate=new moment(e)),e.isBefore(this.model.getFieldValue(this.fieldstart))?(this.isValid=!1,this.errorMessage="enddate cannot be before startdate",this.model.setFieldMessage("error","enddate cannot be before startdate",this.fieldname,"sequencecheck")):(this.model.resetFieldMessages(this.fieldname,"error","sequencecheck"),this.model.setField(this.fieldend,e),this.isValid=!0)}setDateValid(e,t){switch(e){case"start":this.startDateValid=t;break;case"end":this.endDateValid=t}this.endDateValid&&this.startDateValid?this.model.resetFieldMessages(this.fieldname,"error","validitycheck"):this.model.setFieldMessage("error",this.language.getLabel("LBL_INPUT_INVALID"),this.fieldname,"validitycheck")}static ɵfac=function(e){return new(e||fieldDateSpan)(r.Y36(w.o),r.Y36(k.e),r.Y36(x.d),r.Y36(c.Pu),r.Y36(A.F0))};static ɵcmp=r.Xpm({type:fieldDateSpan,selectors:[["field-date-span"]],features:[r.qOj],decls:2,vars:2,consts:[[4,"ngIf"],["class","slds-form-element__control slds-p-around--xx-small",3,"ngClass",4,"ngIf"],[3,"fieldname","fieldconfig",4,"ngIf"],[3,"fielddisplayclass","editable","fieldconfig"],[3,"date","displayTime"],[3,"fieldname","fieldconfig"],[1,"slds-form-element__control","slds-p-around--xx-small",3,"ngClass"],[1,"slds-grid","slds-gutters_direct-xx-small"],[1,"slds-size--1-of-2","slds-col"],[1,"slds-form-element"],[1,"slds-form-element__label"],["label","LBL_DATE_START"],["system-input-date-hide-error","",3,"ngModel","ngModelChange","valid"],["label","LBL_DATE_END"],[3,"fieldname"]],template:function(e,t){1&e&&(r.YNc(0,Dn,6,8,"ng-container",0),r.YNc(1,Un,13,4,"div",1)),2&e&&(r.Q6J("ngIf",!t.isEditMode()),r.xp6(1),r.Q6J("ngIf",t.isEditable()&&t.isEditMode()))},dependencies:[i.mk,i.O5,n.JJ,n.On,Bi.a,Gi.z,te._,u.q,C.D,M.a],encapsulation:2})}return fieldDateSpan})();var Rn=s(65659),jn=s(9422),Bn=s(13144),Gn=s(54021),Pn=s(50151);function Hn(e,t){if(1&e&&r._UZ(0,"field-label",3),2&e){const e=r.oxw();r.Q6J("fieldname",e.fieldname)("fieldconfig",e.fieldconfig)}}function zn(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"system-checkbox",7),r.NdJ("ngModelChange",(function(t){r.CHM(e);const s=r.oxw(2);return r.KtG(s.isReferenced=t)})),r._UZ(1,"system-label",8),r.qZA()}if(2&e){const e=r.oxw(2);r.Q6J("ngModel",e.isReferenced)("disabled",!0)}}function Vn(e,t){if(1&e&&(r.TgZ(0,"div")(1,"field-generic-display",4)(2,"div",5)(3,"span"),r._uU(4),r.qZA(),r.YNc(5,zn,2,2,"system-checkbox",6),r.qZA()()()),2&e){const e=r.oxw();r.xp6(1),r.Q6J("fielddisplayclass",e.fielddisplayclass)("fieldconfig",e.fieldconfig)("editable",e.isEditable())("fieldid",e.fieldid),r.xp6(3),r.Oqu(e.value),r.xp6(1),r.Q6J("ngIf",!!e.referenceMetadata&&!e.fieldconfig.referenceCheckboxDisplayNone)}}function $n(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"div",30),r._UZ(1,"field-label",15),r.TgZ(2,"div",16)(3,"input",17,18),r.NdJ("ngModelChange",(function(t){r.CHM(e);const s=r.oxw(2);return r.KtG(s.street_number=t)})),r.qZA()(),r._UZ(5,"field-messages",19),r.qZA()}if(2&e){const e=r.oxw(2);r.xp6(1),r.Q6J("fieldname",e.fieldName("street_number")),r.xp6(2),r.Q6J("ngModel",e.street_number)("disabled",e.isReferenced)("ngModelOptions",e.modelOptions),r.xp6(2),r.Q6J("fieldname",e.fieldName("street_number"))}}function Kn(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"div",30),r._UZ(1,"field-label",15),r.TgZ(2,"div",16)(3,"input",17,18),r.NdJ("ngModelChange",(function(t){r.CHM(e);const s=r.oxw(2);return r.KtG(s.street_number_suffix=t)})),r.qZA()(),r._UZ(5,"field-messages",19),r.qZA()}if(2&e){const e=r.oxw(2);r.xp6(1),r.Q6J("fieldname",e.fieldName("street_number_suffix")),r.xp6(2),r.Q6J("ngModel",e.street_number_suffix)("disabled",e.isReferenced)("ngModelOptions",e.modelOptions),r.xp6(2),r.Q6J("fieldname",e.fieldName("street_number_suffix"))}}function Xn(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"div",30)(1,"label",31),r._UZ(2,"system-label",32),r.qZA(),r.TgZ(3,"system-checkbox",33),r.NdJ("ngModelChange",(function(t){r.CHM(e);const s=r.oxw(2);return r.KtG(s.isReferenced=t)})),r.qZA()()}if(2&e){const e=r.oxw(2);r.xp6(3),r.Q6J("ngModel",e.isReferenced)("disabled",e.model.isNew&&!e.isReferenced)}}function Wn(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"div",34),r._UZ(1,"field-label",15),r.TgZ(2,"div",16)(3,"input",17),r.NdJ("ngModelChange",(function(t){r.CHM(e);const s=r.oxw(2);return r.KtG(s.attn=t)})),r.qZA()(),r._UZ(4,"field-messages",19),r.qZA()}if(2&e){const e=r.oxw(2);r.xp6(1),r.Q6J("fieldname",e.fieldName("attn")),r.xp6(2),r.Q6J("ngModel",e.attn)("disabled",e.isReferenced)("ngModelOptions",e.modelOptions),r.xp6(1),r.Q6J("fieldname",e.fieldName("attn"))}}function el(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"div",35),r._UZ(1,"field-label",15),r.TgZ(2,"div",16)(3,"input",17),r.NdJ("ngModelChange",(function(t){r.CHM(e);const s=r.oxw(2);return r.KtG(s.district=t)})),r.qZA()(),r._UZ(4,"field-messages",19),r.qZA()}if(2&e){const e=r.oxw(2);r.xp6(1),r.Q6J("fieldname",e.fieldName("district")),r.xp6(2),r.Q6J("ngModel",e.district)("disabled",e.isReferenced)("ngModelOptions",e.modelOptions),r.xp6(1),r.Q6J("fieldname",e.fieldName("district"))}}function tl(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"div",36),r._UZ(1,"field-label",15),r.TgZ(2,"system-input-state",37),r.NdJ("ngModelChange",(function(t){r.CHM(e);const s=r.oxw(2);return r.KtG(s.state=t)})),r.qZA(),r._UZ(3,"field-messages",19),r.qZA()}if(2&e){const e=r.oxw(2);r.xp6(1),r.Q6J("fieldname",e.fieldName("state")),r.xp6(1),r.Q6J("ngModel",e.state)("disabled",e.isReferenced)("country",e.country),r.xp6(1),r.Q6J("fieldname",e.fieldName("state"))}}function sl(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"div",9)(1,"fieldset")(2,"div",10)(3,"div",11)(4,"system-googleplaces-autocomplete",12),r.NdJ("address",(function(t){r.CHM(e);const s=r.oxw();return r.KtG(s.addressSelected(t))})),r.qZA()(),r.TgZ(5,"div",13)(6,"div",14),r._UZ(7,"field-label",15),r.TgZ(8,"div",16)(9,"input",17,18),r.NdJ("ngModelChange",(function(t){r.CHM(e);const s=r.oxw();return r.KtG(s.street=t)})),r.qZA()(),r._UZ(11,"field-messages",19),r.qZA(),r.YNc(12,$n,6,5,"div",20),r.YNc(13,Kn,6,5,"div",20),r.YNc(14,Xn,4,2,"div",20),r.qZA(),r.YNc(15,Wn,5,5,"div",21),r.TgZ(16,"div",22)(17,"div",23),r._UZ(18,"field-label",15),r.TgZ(19,"div",16)(20,"input",17),r.NdJ("ngModelChange",(function(t){r.CHM(e);const s=r.oxw();return r.KtG(s.postalcode=t)})),r.qZA()(),r._UZ(21,"field-messages",19),r.qZA(),r.TgZ(22,"div",24),r._UZ(23,"field-label",15),r.TgZ(24,"div",16)(25,"input",17),r.NdJ("ngModelChange",(function(t){r.CHM(e);const s=r.oxw();return r.KtG(s.city=t)})),r.qZA()(),r._UZ(26,"field-messages",19),r.qZA(),r.YNc(27,el,5,5,"div",25),r.qZA(),r.TgZ(28,"div",22),r.YNc(29,tl,4,5,"div",26),r.TgZ(30,"div",24)(31,"label",27),r._UZ(32,"system-label",28),r.qZA(),r.TgZ(33,"system-input-country",29),r.NdJ("ngModelChange",(function(t){r.CHM(e);const s=r.oxw();return r.KtG(s.country=t)})),r.qZA(),r._UZ(34,"field-messages",19),r.qZA()()()()()}if(2&e){const e=r.oxw();r.Q6J("system-overlay-loading-spinner",e.isLoading)("ngClass",e.getFieldClass()),r.xp6(4),r.Q6J("disabled",e.isReferenced),r.xp6(3),r.Q6J("fieldname",e.fieldName("street")),r.xp6(2),r.Q6J("ngModel",e.street)("disabled",e.isReferenced)("ngModelOptions",e.modelOptions),r.xp6(2),r.Q6J("fieldname",e.fieldName("street")),r.xp6(1),r.Q6J("ngIf",!e.hidestreetnumber),r.xp6(1),r.Q6J("ngIf",!e.hidenumbersuffix),r.xp6(1),r.Q6J("ngIf",!!e.referenceMetadata),r.xp6(1),r.Q6J("ngIf",!e.hideattn),r.xp6(3),r.Q6J("fieldname",e.fieldName("postalcode")),r.xp6(2),r.Q6J("ngModel",e.postalcode)("disabled",e.isReferenced)("ngModelOptions",e.modelOptions),r.xp6(1),r.Q6J("fieldname",e.fieldName("postalcode")),r.xp6(2),r.Q6J("fieldname",e.fieldName("city")),r.xp6(2),r.Q6J("ngModel",e.city)("disabled",e.isReferenced)("ngModelOptions",e.modelOptions),r.xp6(1),r.Q6J("fieldname",e.fieldName("city")),r.xp6(1),r.Q6J("ngIf",!e.hidedistrict),r.xp6(2),r.Q6J("ngIf",!e.hidestate),r.xp6(4),r.Q6J("ngModel",e.country)("disabled",e.isReferenced),r.xp6(1),r.Q6J("fieldname",e.fieldName("country"))}}let il=(()=>{class fieldAddress extends d.O{model;view;language;metadata;router;configuration;backend;toast;modal;injector;referenceMetadata;strict=!1;isLoading=!1;config_address_format={};constructor(e,t,s,i,n,l,o,a,d,r){super(e,t,s,i,n),this.model=e,this.view=t,this.language=s,this.metadata=i,this.router=n,this.configuration=l,this.backend=o,this.toast=a,this.modal=d,this.injector=r;let c=this.configuration.data.backendextensions.spiceui.config.format;"strict"==c&&(this.strict=!0),c.addressformat&&(this.addressFormat=c.addressformat),this.getAddressConfig()}addressFormat="{street} {street_number}, {postalcode} {city}, {statename}, {countryname}";ngOnInit(){super.ngOnInit(),this.handleReferenceAddress()}ngAfterViewInit(){super.ngAfterViewInit(),this.referenceMetadata&&(this._isReferenced=this.model.getField(this.addresskey+"address_reference_id"))}handleReferenceAddress(){const e=this.configuration.getData("spice_address_references");if(!Array.isArray(e))return;const t=e.find((e=>e.child_module==this.model.module&&e.child_address_key==this.fieldconfig.key));t&&(this.referenceMetadata=t,this.subscriptions.add(this.model.observeFieldChanges(t.child_address_key+"_address_reference_id").subscribe((e=>{this._isReferenced=!!e}))))}_isReferenced=!1;set isReferenced(e){e!=this._isReferenced&&(this._isReferenced=e,this.model.isNew||(e?this.handleReferenceActivation():this.model.setField(this.addresskey+"address_reference_id","")))}get isReferenced(){return this._isReferenced}handleReferenceActivation(){this.isLoading=!0;const e=`module/${this.model.module}/${this.model.id}/related/${this.referenceMetadata.child_link_name}`;this.backend.getRequest(e).subscribe({next:e=>{this.isLoading=!1,this.handleReferenceResponse(_.toArray(e))},error:()=>{this.isLoading=!1,this._isReferenced=!1,this.toast.sendToast("MSG_NO_RECORDS_FOUND","warning")}})}handleReferenceResponse(e){e.length>1?this.modal.openModal("ObjectSelectBeanListModal",!0,this.injector).subscribe((t=>{t.instance.listData=e,t.instance.selectedIds$.subscribe({next:t=>{t?this.model.copyReferencedAddress(this.referenceMetadata,e.find((e=>e.id==t[0]))):this._isReferenced=!1}})})):1==e.length?this.model.copyReferencedAddress(this.referenceMetadata,e[0]):(this._isReferenced=!1,this.toast.sendToast("MSG_NO_RECORDS_FOUND","warning"))}getAddressConfig(){this.config_address_format=JSON.parse(this.configuration.data?.backendextensions?.address_format?.config?.format??"{}")}get value(){return this.buildAddress()}get addresskey(){return this.fieldconfig.key?this.fieldconfig.key+"_":""}buildAddress(){let e=this.addressFormat;if(this.strict&&this.country){let t=this.configuration.getData("countries");if(t){let s=t.countries.find((e=>e.cc==this.country));s&&s.addressformat&&(e=s.addressformat)}}let t=e.match(/\{(.*?)\}/g);for(let s of t){let t=this[s.slice(1,-1)];e=e.replace(s,t||"")}return e.replace(new RegExp(/^([\s,]*)|(,[\s,]*,)|$([\s,]*)/gm),"").trim()}get countryname(){if(this.strict){let e=this.country;if(e){let t=this.configuration.getData("countries");if(t){let s=t.countries.find((t=>t.cc==e));s&&(e=this.language.getLabel(s.label))}}return e}return this.country}get statename(){if(this.strict){let e=this.country,t=this.state;if(t){let s=this.configuration.getData("countries");if(s){let i=s.states.find((s=>s.cc==e&&s.sc==t));i&&(t=this.language.getLabel(i.label))}}return t}return this.state}addressSelected(e){this.hidestreetnumber?this.street=e.street:(this.street=e.street_name,this.street_number=e.street_number),this.city=e.city,this.district=e.district,this.postalcode=e.postalcode,this.country=e.country,this.state=e.state,this.latitude=e.latitude,this.longitude=e.longitude}getAddressLabel(){return this.language.getLabel(this.fieldconfig.label)}fieldName(e){return this.addresskey+"address_"+e}get street(){return this.model.getField(this.addresskey+"address_street")}set street(e){this.model.setField(this.addresskey+"address_street",e)}get street_number(){return this.model.getField(this.addresskey+"address_street_number")}set street_number(e){this.model.setField(this.addresskey+"address_street_number",e)}get street_number_suffix(){return this.model.getField(this.addresskey+"address_street_number_suffix")}set street_number_suffix(e){this.model.setField(this.addresskey+"address_street_number_suffix",e)}get attn(){return this.model.getField(this.addresskey+"address_attn")}set attn(e){this.model.setField(this.addresskey+"address_attn",e)}get city(){return this.model.getField(this.addresskey+"address_city")}set city(e){this.model.setField(this.addresskey+"address_city",e)}set district(e){this.model.setField(this.addresskey+"address_district",e)}get district(){return this.model.getField(this.addresskey+"address_district")}get postalcode(){return this.model.getField(this.addresskey+"address_postalcode")}set postalcode(e){this.model.setField(this.addresskey+"address_postalcode",e)}get state(){return this.model.getField(this.addresskey+"address_state")}set state(e){this.model.setField(this.addresskey+"address_state",e)}get country(){return this.model.getField(this.addresskey+"address_country")}set country(e){this.model.setField(this.addresskey+"address_country",e)}get latitude(){return this.model.getField(this.addresskey+"address_latitude")}set latitude(e){this.model.setField(this.addresskey+"address_latitude",e)}get longitude(){return this.model.getField(this.addresskey+"address_longitude")}set longitude(e){this.model.setField(this.addresskey+"address_longitude",e)}get hideattn(){return!!this.fieldconfig.hideattn||!!this.config_address_format?.hideattn}get hidestate(){return!!this.fieldconfig.hidestate||!!this.config_address_format?.hidestate}get hidestreetnumber(){return!!this.fieldconfig.hidestreetnumber||!!this.config_address_format?.hidestreetnumber}get hidedistrict(){return!!this.fieldconfig.hidedistrict||!!this.config_address_format?.hidedistrict}get hidenumbersuffix(){return!!this.fieldconfig.hidenumbersuffix||!!this.config_address_format?.hidenumbersuffix}static ɵfac=function(e){return new(e||fieldAddress)(r.Y36(w.o),r.Y36(k.e),r.Y36(x.d),r.Y36(c.Pu),r.Y36(A.F0),r.Y36(W.C),r.Y36($.y),r.Y36(K.A),r.Y36(L.o),r.Y36(r.zs3))};static ɵcmp=r.Xpm({type:fieldAddress,selectors:[["field-address"]],features:[r.qOj],decls:3,vars:3,consts:[[3,"fieldname","fieldconfig",4,"ngIf"],[4,"ngIf"],["class","slds-form-element__control",3,"system-overlay-loading-spinner","ngClass",4,"ngIf"],[3,"fieldname","fieldconfig"],[3,"fielddisplayclass","fieldconfig","editable","fieldid"],[1,"slds-grid","slds-grid--align-spread"],["class","slds-m-left--xx-small",3,"ngModel","disabled","ngModelChange",4,"ngIf"],[1,"slds-m-left--xx-small",3,"ngModel","disabled","ngModelChange"],["system-title","LBL_REFERENCE","label","LBL_REFERENCE"],[1,"slds-form-element__control",3,"system-overlay-loading-spinner","ngClass"],[1,"slds-form-element__group"],[1,"slds-grid","slds-grid--vertical-align-center"],[1,"slds-grow",3,"disabled","address"],[1,"slds-grid","slds-gutters_direct-xx-small"],[1,"slds-form-element","slds-col"],["labellength","short",3,"fieldname"],[1,"slds-form-element__control"],["type","text",1,"slds-input",3,"ngModel","disabled","ngModelOptions","ngModelChange"],["focus",""],[3,"fieldname"],["class","slds-form-element slds-col slds-size--1-of-6 ",4,"ngIf"],["class","slds-form-element slds-col slds-size--1-of-1",4,"ngIf"],[1,"slds-grid"],[1,"slds-form-element","slds-size--1-of-5","slds-col","slds-p-right--xx-small"],[1,"slds-form-element","slds-p-left--xx-small","slds-col"],["class","slds-form-element slds-col slds-size--2-of-5 slds-p-left--xx-small",4,"ngIf"],["class","slds-form-element slds-col slds-size--1-of-2 slds-p-right--xx-small",4,"ngIf"],[1,"slds-form-element__label"],["label","LBL_COUNTRY"],[3,"ngModel","disabled","ngModelChange"],[1,"slds-form-element","slds-col","slds-size--1-of-6"],["system-title","LBL_REFERENCE",1,"slds-truncate","slds-form-element__label"],["label","LBL_REFERENCE"],["hidelabel","",1,"slds-m-left--xx-small","spice-display-block",3,"ngModel","disabled","ngModelChange"],[1,"slds-form-element","slds-col","slds-size--1-of-1"],[1,"slds-form-element","slds-col","slds-size--2-of-5","slds-p-left--xx-small"],[1,"slds-form-element","slds-col","slds-size--1-of-2","slds-p-right--xx-small"],[3,"ngModel","disabled","country","ngModelChange"]],template:function(e,t){1&e&&(r.YNc(0,Hn,1,2,"field-label",0),r.YNc(1,Vn,6,6,"div",1),r.YNc(2,sl,35,27,"div",2)),2&e&&(r.Q6J("ngIf",t.displayLabel),r.xp6(1),r.Q6J("ngIf",!t.isEditMode()),r.xp6(1),r.Q6J("ngIf",t.isEditable()&&t.isEditMode()))},dependencies:[i.mk,i.O5,n.Fj,n.JJ,n.On,ft.U,Rn.t,jn.y,Bn.H,te._,Gn._,Pn.S,u.q,C.D,M.a],encapsulation:2})}return fieldAddress})();function nl(e,t){if(1&e&&r._UZ(0,"field-label",3),2&e){const e=r.oxw(2);r.Q6J("fieldname",e.fieldname)("fieldconfig",e.fieldconfig)}}function ll(e,t){if(1&e&&(r.ynx(0),r.YNc(1,nl,1,2,"field-label",1),r.TgZ(2,"field-generic-display",2),r._uU(3),r.qZA(),r.BQk()),2&e){const e=r.oxw();r.xp6(1),r.Q6J("ngIf",e.displayLabel),r.xp6(1),r.Q6J("fielddisplayclass",e.fielddisplayclass)("editable",e.isEditable())("fieldconfig",e.fieldconfig)("title",e.value)("fieldid",e.fieldid),r.xp6(1),r.hij(" ",e.value," ")}}function ol(e,t){if(1&e&&r._UZ(0,"field-label",10),2&e){const e=r.oxw(2);r.Q6J("fieldname",e.fieldsalutation)}}function al(e,t){if(1&e&&(r.TgZ(0,"option",15),r._uU(1),r.qZA()),2&e){const e=t.$implicit;r.Q6J("ngValue",e.value),r.xp6(1),r.Oqu(e.display)}}function dl(e,t){if(1&e&&r._UZ(0,"field-label",10),2&e){const e=r.oxw(3);r.Q6J("fieldname",e.fielddegree)}}function rl(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"div",13),r.YNc(1,dl,1,1,"field-label",6),r.TgZ(2,"input",16),r.NdJ("ngModelChange",(function(t){r.CHM(e);const s=r.oxw(2);return r.KtG(s.degree1=t)})),r.qZA(),r._UZ(3,"field-messages",10),r.qZA()}if(2&e){const e=r.oxw(2);r.Q6J("ngClass",e.getClassesForSubField(e.fielddegree)),r.xp6(1),r.Q6J("ngIf",e.displayLabel),r.xp6(1),r.Q6J("ngModel",e.degree1),r.xp6(1),r.Q6J("fieldname",e.fielddegree)}}function cl(e,t){if(1&e&&r._UZ(0,"field-label",10),2&e){const e=r.oxw(2);r.Q6J("fieldname",e.fieldfirstname)}}function ul(e,t){if(1&e&&r._UZ(0,"field-label",10),2&e){const e=r.oxw(2);r.Q6J("fieldname",e.fieldlastname)}}function ml(e,t){if(1&e&&r._UZ(0,"field-label",10),2&e){const e=r.oxw(3);r.Q6J("fieldname",e.fieldlasttitle)}}function gl(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"div",13),r.YNc(1,ml,1,1,"field-label",6),r.TgZ(2,"input",16),r.NdJ("ngModelChange",(function(t){r.CHM(e);const s=r.oxw(2);return r.KtG(s.degree2=t)})),r.qZA(),r._UZ(3,"field-messages",10),r.qZA()}if(2&e){const e=r.oxw(2);r.Q6J("ngClass",e.getClassesForSubField(e.fieldlasttitle)),r.xp6(1),r.Q6J("ngIf",e.displayLabel),r.xp6(1),r.Q6J("ngModel",e.degree2),r.xp6(1),r.Q6J("fieldname",e.fieldlasttitle)}}const hl=function(){return{updateOn:"blur"}};function pl(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"div")(1,"div",4)(2,"div",5),r.YNc(3,ol,1,1,"field-label",6),r.TgZ(4,"div",7)(5,"select",8),r.NdJ("ngModelChange",(function(t){r.CHM(e);const s=r.oxw();return r.KtG(s.salutation=t)})),r.YNc(6,al,2,2,"option",9),r.qZA()(),r._UZ(7,"field-messages",10),r.qZA(),r.YNc(8,rl,4,4,"div",11),r.TgZ(9,"div",5),r.YNc(10,cl,1,1,"field-label",6),r.TgZ(11,"input",12),r.NdJ("ngModelChange",(function(t){r.CHM(e);const s=r.oxw();return r.KtG(s.first_name=t)})),r.qZA(),r._UZ(12,"field-messages",10),r.qZA(),r.TgZ(13,"div",13),r.YNc(14,ul,1,1,"field-label",6),r.TgZ(15,"input",12,14),r.NdJ("ngModelChange",(function(t){r.CHM(e);const s=r.oxw();return r.KtG(s.last_name=t)})),r.qZA(),r._UZ(17,"field-messages",10),r.qZA(),r.YNc(18,gl,4,4,"div",11),r.qZA()()}if(2&e){const e=r.oxw();r.xp6(2),r.Q6J("ngClass",e.getClassesForSubField(e.fieldsalutation)),r.xp6(1),r.Q6J("ngIf",e.displayLabel),r.xp6(2),r.Q6J("ngModel",e.salutation),r.xp6(1),r.Q6J("ngForOf",e.getSalutations()),r.xp6(1),r.Q6J("fieldname",e.fieldsalutation),r.xp6(1),r.Q6J("ngIf",!e.isSimple),r.xp6(1),r.Q6J("ngClass",e.getClassesForSubField(e.fieldfirstname)),r.xp6(1),r.Q6J("ngIf",e.displayLabel),r.xp6(1),r.Q6J("ngModel",e.first_name)("ngModelOptions",r.DdM(17,hl)),r.xp6(1),r.Q6J("fieldname",e.fieldfirstname),r.xp6(1),r.Q6J("ngClass",e.getClassesForSubField(e.fieldlastname)),r.xp6(1),r.Q6J("ngIf",e.displayLabel),r.xp6(1),r.Q6J("ngModel",e.last_name)("ngModelOptions",r.DdM(18,hl)),r.xp6(2),r.Q6J("fieldname",e.fieldlastname),r.xp6(1),r.Q6J("ngIf",!e.isSimple)}}let fl=(()=>{class fieldFullName extends d.O{model;view;language;metadata;router;userpreferences;isValid=!0;errorMessage="";get fieldsalutation(){return this.fieldconfig.field_salutation?this.fieldconfig.field_salutation:"salutation"}get fielddegree(){return this.fieldconfig.field_degree?this.fieldconfig.field_degree:"degree1"}get fieldfirstname(){return this.fieldconfig.field_firstname?this.fieldconfig.field_firstname:"first_name"}get fieldlastname(){return this.fieldconfig.field_lastname?this.fieldconfig.field_lastname:"last_name"}get fieldlasttitle(){return this.fieldconfig.field_lasttitle?this.fieldconfig.field_lasttitle:"degree2"}get salutationdisplay(){return this.language.getFieldDisplayOptionValue(this.model.module,this.fieldsalutation,this.model.getField(this.fieldsalutation))}get value(){return this.filterUndefined(this.getNameFormat())}get salutation(){return this.model.getField(this.fieldsalutation)}set salutation(e){this.model.setField(this.fieldsalutation,e)}get degree1(){return this.model.getField(this.fielddegree)}set degree1(e){this.model.setField(this.fielddegree,e)}get first_name(){return this.model.getField(this.fieldfirstname)}set first_name(e){this.model.setField(this.fieldfirstname,e)}get last_name(){return this.model.getField(this.fieldlastname)}set last_name(e){this.model.setField(this.fieldlastname,e)}get degree2(){return this.model.getField(this.fieldlasttitle)}set degree2(e){this.model.setField(this.fieldlasttitle,e)}filterUndefined(e){return e||""}constructor(e,t,s,i,n,l){super(e,t,s,i,n),this.model=e,this.view=t,this.language=s,this.metadata=i,this.router=n,this.userpreferences=l}getNameFormat(){const e=this.userpreferences.toUse.locale_name_format,t=this.model.getField(this.fieldsalutation),s=this.model.getField(this.fieldfirstname),i=this.model.getField(this.fieldlastname),n=this.model.getField(this.fielddegree),l=this.model.getField(this.fieldlasttitle);return"s f l"===this.userpreferences.toUse.locale_name_format?this.language.getFieldDisplayOptionValue(this.model.module,this.fieldsalutation,t+" "+this.filterUndefined(s)+" "+this.filterUndefined(i)):"f l"===e?this.language.getFieldDisplayOptionValue(this.model.module,this.fieldfirstname,s+" "+this.filterUndefined(i)):"s l"===e?this.language.getFieldDisplayOptionValue(this.model.module,this.fieldsalutation,t+" "+this.filterUndefined(i)):"l, s f"===e?this.language.getFieldDisplayOptionValue(this.model.module,this.fieldlastname,i+", "+this.filterUndefined(t)+" "+this.filterUndefined(s)):"l, f"===e?this.language.getFieldDisplayOptionValue(this.model.module,this.fieldlastname,i+", "+this.filterUndefined(s)):"s l, f"===e?this.language.getFieldDisplayOptionValue(this.model.module,this.fieldsalutation,t+" "+this.filterUndefined(i)+", "+this.filterUndefined(s)):"l s f"===e?this.language.getFieldDisplayOptionValue(this.model.module,this.fieldlastname,i+" "+this.filterUndefined(t)+" "+this.filterUndefined(s)):"l f s"===e?this.language.getFieldDisplayOptionValue(this.model.module,this.fieldlastname,i+" "+this.filterUndefined(s)+" "+this.filterUndefined(t)):"s d f l a"===e?this.language.getFieldDisplayOptionValue(this.model.module,this.fieldsalutation,t+" "+this.filterUndefined(n)+" "+this.filterUndefined(s)+" "+this.filterUndefined(i)+" "+this.filterUndefined(l)):void 0}get isSimple(){return this.fieldconfig.simple}getClassesForSubField(e){let t="";switch(e){case this.fieldsalutation:t="small"==this.view.size?"slds-size--1-of-3 slds-order--1":this.isSimple?"slds-size--1-of-5":"slds-size--1-of-7";break;case this.fielddegree:t="small"==this.view.size?"slds-size--1-of-3 slds-order--2":"slds-size--1-of-7";break;case this.fieldlasttitle:t="small"==this.view.size?"slds-size--1-of-3 slds-order--3":"slds-size--1-of-7";break;case this.fieldfirstname:t="small"==this.view.size?"slds-size--1-of-2 slds-order--4":this.isSimple?"slds-p-left--xx-small slds-size--2-of-5":"slds-p-left--xx-small slds-size--2-of-7";break;case this.fieldlastname:t="small"==this.view.size?"slds-size--1-of-2 slds-order--5":this.isSimple?"slds-size--2-of-5":"slds-size--2-of-7"}return this.getStati(e).invalid&&(t+=" slds-has-error"),t}getSalutations(){let e=[],t=this.language.getFieldDisplayOptions(this.model.module,this.fieldconfig.field_salutation?this.fieldconfig.field_salutation:"salutation");for(let s in t)e.push({value:s,display:t[s]});return e}static ɵfac=function(e){return new(e||fieldFullName)(r.Y36(w.o),r.Y36(k.e),r.Y36(x.d),r.Y36(c.Pu),r.Y36(A.F0),r.Y36(ye.z))};static ɵcmp=r.Xpm({type:fieldFullName,selectors:[["field-full-name"]],features:[r.qOj],decls:2,vars:2,consts:[[4,"ngIf"],[3,"fieldname","fieldconfig",4,"ngIf"],[3,"fielddisplayclass","editable","fieldconfig","title","fieldid"],[3,"fieldname","fieldconfig"],[1,"slds-grid","slds-grid_vertical-align-center","slds-wrap"],[1,"slds-col","slds-form-element__control","slds-align-top",3,"ngClass"],[3,"fieldname",4,"ngIf"],[1,"slds-select_container","slds-p-vertical--xxx-small"],[1,"slds-select",3,"ngModel","ngModelChange"],[3,"ngValue",4,"ngFor","ngForOf"],[3,"fieldname"],["class","slds-col slds-form-element__control slds-p-left--xx-small slds-align-top",3,"ngClass",4,"ngIf"],["type","text",1,"slds-input","slds-p-vertical--xxx-small",3,"ngModel","ngModelOptions","ngModelChange"],[1,"slds-col","slds-form-element__control","slds-p-left--xx-small","slds-align-top",3,"ngClass"],["focus",""],[3,"ngValue"],["type","text",1,"slds-input","slds-p-vertical--xxx-small",3,"ngModel","ngModelChange"]],template:function(e,t){1&e&&(r.YNc(0,ll,4,7,"ng-container",0),r.YNc(1,pl,19,19,"div",0)),2&e&&(r.Q6J("ngIf",!t.isEditMode()),r.xp6(1),r.Q6J("ngIf",t.isEditable()&&t.isEditMode()))},dependencies:[i.mk,i.sg,i.O5,n.YN,n.Kr,n.Fj,n.EJ,n.JJ,n.On,u.q,C.D,M.a],encapsulation:2})}return fieldFullName})();function bl(e,t){if(1&e&&r._UZ(0,"field-label",3),2&e){const e=r.oxw();r.Q6J("fieldname",e.fieldname)("fieldconfig",e.fieldconfig)}}function _l(e,t){if(1&e&&(r.TgZ(0,"field-generic-display",4),r._uU(1),r.qZA()),2&e){const e=r.oxw();r.Q6J("fielddisplayclass",e.fielddisplayclass)("editable",e.isEditable())("fieldconfig",e.fieldconfig),r.xp6(1),r.hij(" ",e.value,"\n")}}function vl(e,t){if(1&e&&(r.TgZ(0,"option",13),r._uU(1),r.qZA()),2&e){const e=t.$implicit;r.Q6J("ngValue",e.value),r.xp6(1),r.Oqu(e.display)}}function yl(e,t){if(1&e&&(r.TgZ(0,"div",14),r._uU(1),r.qZA()),2&e){const e=r.oxw(2);r.xp6(1),r.Oqu(e.errorMessage)}}function xl(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"div")(1,"div",5)(2,"div",6)(3,"div",7)(4,"select",8),r.NdJ("ngModelChange",(function(t){r.CHM(e);const s=r.oxw();return r.KtG(s.model.data[s.fielddd]=t)})),r.YNc(5,vl,2,2,"option",9),r.qZA()()(),r.TgZ(6,"div",10)(7,"input",11),r.NdJ("ngModelChange",(function(t){r.CHM(e);const s=r.oxw();return r.KtG(s.model.data[s.fieldtxt]=t)})),r.qZA()()(),r.YNc(8,yl,2,1,"div",12),r.qZA()}if(2&e){const e=r.oxw();r.xp6(2),r.Q6J("ngClass",e.getFieldClass()),r.xp6(2),r.Q6J("ngModel",e.model.data[e.fielddd]),r.xp6(1),r.Q6J("ngForOf",e.getTitles()),r.xp6(1),r.Q6J("ngClass",e.getFieldClass()),r.xp6(1),r.Q6J("ngModel",e.model.data[e.fieldtxt]),r.xp6(1),r.Q6J("ngIf",""!==e.errorMessage)}}let wl=(()=>{class fieldTitle extends d.O{model;view;language;metadata;router;isValid=!0;errorMessage="";get fielddd(){return this.fieldconfig.field_dd?this.fieldconfig.field_dd:"title_dd"}get fieldtxt(){return this.fieldconfig.field_txt?this.fieldconfig.field_txt:"title"}get titledddisplay(){return this.language.getFieldDisplayOptionValue(this.model.module,this.fielddd,this.model.getField(this.fielddd))}get value(){return(this.model.getField(this.fielddd)?this.language.getFieldDisplayOptionValue(this.model.module,this.fielddd,this.model.getField(this.fielddd)):"")+(this.model.getField(this.fieldtxt)?" "+this.model.getField(this.fieldtxt):"")}constructor(e,t,s,i,n){super(e,t,s,i,n),this.model=e,this.view=t,this.language=s,this.metadata=i,this.router=n}getFieldClass(){let e=[];return this.isValid||e.push("slds-has-error"),e}getTitles(){let e=[],t=this.language.getFieldDisplayOptions(this.model.module,this.fieldconfig.field_dd?this.fieldconfig.field_dd:"title_dd");for(let s in t)e.push({value:s,display:t[s]});return e}static ɵfac=function(e){return new(e||fieldTitle)(r.Y36(w.o),r.Y36(k.e),r.Y36(x.d),r.Y36(c.Pu),r.Y36(A.F0))};static ɵcmp=r.Xpm({type:fieldTitle,selectors:[["field-title"]],features:[r.qOj],decls:3,vars:3,consts:[[3,"fieldname","fieldconfig",4,"ngIf"],[3,"fielddisplayclass","editable","fieldconfig",4,"ngIf"],[4,"ngIf"],[3,"fieldname","fieldconfig"],[3,"fielddisplayclass","editable","fieldconfig"],[1,"slds-grid","slds-p-around--xx-small"],[1,"slds-col","slds-form-element__control","slds-size--1-of-2",3,"ngClass"],[1,"slds-select_container"],[1,"slds-select",3,"ngModel","ngModelChange"],[3,"ngValue",4,"ngFor","ngForOf"],[1,"slds-col","slds-form-element__control","slds-size--1-of-2","slds-p-left--xx-small",3,"ngClass"],["type","text",1,"slds-input",3,"ngModel","ngModelChange"],["class","slds-form-element__help",4,"ngIf"],[3,"ngValue"],[1,"slds-form-element__help"]],template:function(e,t){1&e&&(r.YNc(0,bl,1,2,"field-label",0),r.YNc(1,_l,2,4,"field-generic-display",1),r.YNc(2,xl,9,6,"div",2)),2&e&&(r.Q6J("ngIf",t.displayLabel),r.xp6(1),r.Q6J("ngIf",!t.isEditMode()),r.xp6(1),r.Q6J("ngIf",t.isEditable()&&t.isEditMode()))},dependencies:[i.mk,i.sg,i.O5,n.YN,n.Kr,n.Fj,n.EJ,n.JJ,n.On,u.q,C.D],encapsulation:2})}return fieldTitle})();var Zl=s(77579),Tl=s(75920),Cl=s(93441),kl=s(87693),Al=s(69774);const Ll=["fileupload"];function Il(e,t){if(1&e&&r._UZ(0,"field-label",5),2&e){const e=r.oxw();r.Q6J("fieldname",e.fieldname)("fieldconfig",e.fieldconfig)}}function Sl(e,t){if(1&e&&r._UZ(0,"system-file-icon",11),2&e){const e=r.oxw(2);r.Q6J("filemimetype",e.model.getField("file_mime_type"))("filename",e.value)}}function Ml(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"field-generic-display",6)(1,"div",7),r.YNc(2,Sl,1,2,"system-file-icon",8),r.TgZ(3,"div",9)(4,"a",10),r.NdJ("click",(function(){r.CHM(e);const t=r.oxw();return r.KtG(t.previewFile())})),r._uU(5),r.qZA()()()()}if(2&e){const e=r.oxw();r.Q6J("fielddisplayclass",e.fielddisplayclass)("editable",e.isEditable())("fieldconfig",e.fieldconfig)("title",e.value)("fieldid",e.fieldid),r.xp6(2),r.Q6J("ngIf",e.value),r.xp6(3),r.Oqu(e.value)}}function Jl(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"div",16)(1,"span",17)(2,"span",18),r._UZ(3,"system-icon",19),r.qZA()(),r.TgZ(4,"a",20)(5,"span",21),r._uU(6),r.qZA()(),r.TgZ(7,"button",22),r.NdJ("click",(function(){r.CHM(e);const t=r.oxw(2);return r.KtG(t.removeFile())})),r._UZ(8,"system-button-icon",23),r.qZA()()}if(2&e){const e=r.oxw(2);r.xp6(3),r.Q6J("icon",e.helper.determineFileIcon(e.model.getField("file_mime_type"))),r.xp6(3),r.Oqu(e.value)}}function Ol(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"div",24)(1,"div",25),r.NdJ("system-drop-file",(function(t){r.CHM(e);const s=r.oxw(2);return r.KtG(s.onDrop(t))})),r.TgZ(2,"input",26,27),r.NdJ("click",(function(){r.CHM(e);const t=r.MAs(3);return r.KtG(t.value=null)}))("change",(function(){r.CHM(e);const t=r.oxw(2);return r.KtG(t.uploadFile())})),r.qZA(),r.TgZ(4,"label",28)(5,"span",29),r._UZ(6,"system-button-icon",30)(7,"system-label",31),r.qZA(),r.TgZ(8,"span",32),r._UZ(9,"system-label",33)(10,"system-label",34),r.qZA()()()()}if(2&e){const e=r.oxw(2);r.xp6(2),r.Q6J("id",e.fieldid),r.xp6(2),r.uIk("for",e.fieldid),r.xp6(2),r.Q6J("icon","upload")}}function Nl(e,t){if(1&e&&(r.TgZ(0,"div",12),r.YNc(1,Jl,9,2,"div",13),r.YNc(2,Ol,11,3,"div",14),r._UZ(3,"field-messages",15),r.qZA()),2&e){const e=r.oxw();r.Q6J("ngClass",e.getFieldClass()),r.xp6(1),r.Q6J("ngIf",e.value),r.xp6(1),r.Q6J("ngIf",!e.value),r.xp6(1),r.Q6J("fieldname",e.fieldname)}}function Fl(e,t){if(1&e&&(r.TgZ(0,"div",35)(1,"div",36),r._UZ(2,"div",37),r.TgZ(3,"div",38),r._uU(4),r.TgZ(5,"div",39),r._UZ(6,"div",40),r.qZA()()()()),2&e){const e=r.oxw();r.xp6(4),r.hij(" uploading ",e.theFile," ... "),r.xp6(2),r.Q6J("ngStyle",e.getBarStyle())}}function ql(e,t){1&e&&r._UZ(0,"div",41)}let El=(()=>{class fieldFile extends d.O{model;view;language;metadata;router;configurationService;session;toast;modal;backend;helper;fileupload;showUploadModal=!1;theFile="";theProgress=0;constructor(e,t,s,i,n,l,o,a,d,r,c){super(e,t,s,i,n),this.model=e,this.view=t,this.language=s,this.metadata=i,this.router=n,this.configurationService=l,this.session=o,this.toast=a,this.modal=d,this.backend=r,this.helper=c}humanFileSize(e){let t=1024,s=e;if(Math.abs(e)<t)return s+" B";let i=["kB","MB","GB","TB","PB","EB","ZB","YB"],n=-1;do{s/=t,++n}while(Math.abs(s)>=t&&n<i.length-1);return s.toFixed(1)+" "+i[n]}uploadFile(){let e=this.fileupload.element.nativeElement.files;this.doupload(e)}doupload(e){this.showUploadModal=!0,this.theFile=e[0].name,this.uploadAttachmentsBase64(e).subscribe((e=>{e.progress?this.theProgress=e.progress.loaded/e.progress.total*100:e.complete&&(this.value=e.filename?e.filename:this.theFile,this.model.setField("file_mime_type",e.filetype))}),(e=>{this.closeUploadPopup()}),(()=>this.closeUploadPopup()))}removeFile(){this.value="",this.model.setField("file_mime_type","")}closeUploadPopup(){this.showUploadModal=!1}uploadAttachmentsBase64(e){if(0===e.length)return;let t=new Zl.x,s=this.configurationService.getSystemParamater("upload_maxsize");for(let i of e)s&&i.size>s?(this.toast.sendToast(this.language.getLabelFormatted("LBL_EXCEEDS_MAX_UPLOADFILESIZE",[i.name,this.humanFileSize(s)]),"error"),t.error(!0)):this.readFile(i).subscribe((e=>{let s=new XMLHttpRequest,n={};s.onreadystatechange=(e=this)=>{if(4==s.readyState)try{let e=JSON.parse(s.response);t.next({complete:!0,filename:e.filename,filetype:e.filetype}),t.complete()}catch(e){n={status:"error",data:"Unknown error occurred: ["+s.responseText+"]"}}},s.upload.addEventListener("progress",(e=>{t.next({progress:{total:e.total,loaded:e.loaded}})}),!1),s.open("POST",this.configurationService.getBackendUrl()+"/module/"+this.model.module+"/"+this.model.id+"/noteattachment",!0),s.setRequestHeader("OAuth-Token",this.session.authData.sessionId),s.setRequestHeader("Content-Type","application/json;charset=UTF-8");let l={file:i.filecontent,filename:i.name,filemimetype:i.type};s.send(JSON.stringify(l))}));return t.asObservable()}readFile(e){let t=new Zl.x,s=new FileReader;return s.file=e,s.onloadend=e=>{let i=s.result.toString();i=i.substring(i.indexOf("base64,")+7);let n=s.file;n.filecontent=i,t.next(n),t.complete()},s.readAsDataURL(e),t.asObservable()}getBarStyle(){return{width:this.theProgress+"%"}}b64toBlob(e,t="",s=512){let i=atob(e),n=[];for(let e=0;e<i.length;e+=s){let t=i.slice(e,e+s),l=new Array(t.length);for(let e=0;e<t.length;e++)l[e]=t.charCodeAt(e);let o=new Uint8Array(l);n.push(o)}return new Blob(n,{type:t})}downloadAttachment(){this.backend.getRequest("module/"+this.model.module+"/"+this.model.id+"/noteattachment").subscribe((e=>{let t=this.b64toBlob(e.file,e.file_mime_type),s=URL.createObjectURL(t),i=document.createElement("a");document.body.appendChild(i),i.href=s,i.download=e.filename,i.type=e.file_mime_type,i.click(),i.remove()}))}previewFile(){if(this.model.getFieldValue("file_mime_type")){let e=this.model.getFieldValue("file_mime_type").split("/");switch(e[0]){case"image":this.modal.openModal("SystemImagePreviewModal").subscribe((e=>{e.instance.imgname=this.value,e.instance.imgtype=this.model.getFieldValue("file_mime_type"),this.backend.getRequest("module/"+this.model.module+"/"+this.model.id+"/noteattachment").subscribe((t=>{e.instance.imgsrc="data:"+this.model.getFieldValue("file_mime_type")+";base64,"+t.file}))}));break;case"text":case"audio":case"video":this.modal.openModal("SystemObjectPreviewModal").subscribe((e=>{e.instance.name=this.value,e.instance.type=this.model.getFieldValue("file_mime_type"),this.backend.getRequest("module/"+this.model.module+"/"+this.model.id+"/noteattachment").subscribe((t=>{e.instance.data=atob(t.file)}))}));break;case"application":if("pdf"===e[1])this.modal.openModal("SystemObjectPreviewModal").subscribe((e=>{e.instance.name=this.value,e.instance.type=this.model.getFieldValue("file_mime_type"),this.backend.getRequest("module/"+this.model.module+"/"+this.model.id+"/noteattachment").subscribe((t=>{e.instance.data=atob(t.file)}))}));else this.downloadAttachment();break;default:this.downloadAttachment()}}else this.downloadAttachment()}preventdefault(e){(1==e.dataTransfer.items.length&&"file"===e.dataTransfer.items[0].kind||e.dataTransfer.files.length>0)&&(e.preventDefault(),e.stopPropagation())}onDrop(e){this.doupload(e)}static ɵfac=function(e){return new(e||fieldFile)(r.Y36(w.o),r.Y36(k.e),r.Y36(x.d),r.Y36(c.Pu),r.Y36(A.F0),r.Y36(W.C),r.Y36(Tl.n),r.Y36(K.A),r.Y36(L.o),r.Y36($.y),r.Y36(Cl._))};static ɵcmp=r.Xpm({type:fieldFile,selectors:[["field-file"]],viewQuery:function(e,t){if(1&e&&r.Gf(Ll,5,r.s_b),2&e){let e;r.iGM(e=r.CRH())&&(t.fileupload=e.first)}},features:[r.qOj],decls:5,vars:5,consts:[[3,"fieldname","fieldconfig",4,"ngIf"],[3,"fielddisplayclass","editable","fieldconfig","title","fieldid",4,"ngIf"],["class","slds-form-element__control slds-grid slds-grid--align-spread slds-p-vertical--xx-small",3,"ngClass",4,"ngIf"],["role","dialog","class","slds-modal slds-fade-in-open",4,"ngIf"],["class","slds-backdrop slds-backdrop--open",4,"ngIf"],[3,"fieldname","fieldconfig"],[3,"fielddisplayclass","editable","fieldconfig","title","fieldid"],[1,"slds-grid","slds-grid--vertical-align-center"],["divClass","slds-p-right--xx-small","size","x-small",3,"filemimetype","filename",4,"ngIf"],[1,"slds-truncate","slds-grow"],["href","javascript:void(0);",3,"click"],["divClass","slds-p-right--xx-small","size","x-small",3,"filemimetype","filename"],[1,"slds-form-element__control","slds-grid","slds-grid--align-spread","slds-p-vertical--xx-small",3,"ngClass"],["class","slds-pill slds-pill_link slds-size--1-of-1",4,"ngIf"],["class","slds-file-selector slds-file-selector_files",4,"ngIf"],[3,"fieldname"],[1,"slds-pill","slds-pill_link","slds-size--1-of-1"],[1,"slds-pill__icon_container"],["title","Account",1,"slds-icon_container","slds-icon-standard-account"],["divClass","","sprite","doctype","size","x-small",3,"icon"],["href","javascript:void(0);",1,"slds-pill__action"],[1,"slds-pill__label"],["title","Remove",1,"slds-button","slds-button_icon","slds-button_icon","slds-pill__remove",3,"click"],["icon","close"],[1,"slds-file-selector","slds-file-selector_files"],[1,"slds-file-selector__dropzone",3,"system-drop-file"],["type","file",1,"slds-file-selector__input","slds-assistive-text",3,"id","click","change"],["fileupload",""],[1,"slds-file-selector__body"],[1,"slds-file-selector__button","slds-button","slds-button_neutral"],[3,"icon"],["label","LBL_UPLOAD_FILES"],[1,"slds-file-selector__text","slds-medium-show"],["label","LBL_OR"],["label","LBL_DROP_FILES"],["role","dialog",1,"slds-modal","slds-fade-in-open"],[1,"slds-modal__container"],[1,"slds-modal__header","slds-modal__header--empty"],[1,"slds-modal__content","slds-p-around--medium"],[1,"uploadbar"],[1,"uploadprogress",3,"ngStyle"],[1,"slds-backdrop","slds-backdrop--open"]],template:function(e,t){1&e&&(r.YNc(0,Il,1,2,"field-label",0),r.YNc(1,Ml,6,7,"field-generic-display",1),r.YNc(2,Nl,4,4,"div",2),r.YNc(3,Fl,7,2,"div",3),r.YNc(4,ql,1,0,"div",4)),2&e&&(r.Q6J("ngIf",t.displayLabel),r.xp6(1),r.Q6J("ngIf",!t.isEditMode()),r.xp6(1),r.Q6J("ngIf",t.isEditable()&&t.isEditMode()),r.xp6(1),r.Q6J("ngIf",t.showUploadModal),r.xp6(1),r.Q6J("ngIf",t.showUploadModal))},dependencies:[i.mk,i.O5,i.PC,Z.J,gs.f,kl.T,te._,Al.M,u.q,C.D,M.a],encapsulation:2})}return fieldFile})();function Yl(e,t){if(1&e&&r._UZ(0,"field-label",3),2&e){const e=r.oxw();r.Q6J("fieldname",e.fieldname)("fieldconfig",e.fieldconfig)}}function Dl(e,t){if(1&e&&r._UZ(0,"system-utility-icon",8),2&e){const e=r.oxw(2);r.Q6J("icon",e.fieldconfig.iconname?e.fieldconfig.iconname:"world")}}function Ul(e,t){if(1&e&&(r.TgZ(0,"div",9),r._uU(1),r.qZA()),2&e){const e=r.oxw(2);r.xp6(1),r.Oqu(e.url)}}function Ql(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"field-generic-display",4)(1,"div",5),r.NdJ("click",(function(){r.CHM(e);const t=r.oxw();return r.KtG(t.navigateTo())})),r.YNc(2,Dl,1,1,"system-utility-icon",6),r.YNc(3,Ul,2,1,"div",7),r.qZA()()}if(2&e){const e=r.oxw();r.Q6J("fielddisplayclass",e.fielddisplayclass)("editable",e.isEditable())("fieldconfig",e.fieldconfig)("fieldid",e.fieldid),r.xp6(2),r.Q6J("ngIf",e.url),r.xp6(1),r.Q6J("ngIf",!e.fieldconfig.icononly)}}function Rl(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"div",10)(1,"input",11,12),r.NdJ("ngModelChange",(function(t){r.CHM(e);const s=r.oxw();return r.KtG(s.value=t)})),r.qZA(),r._UZ(3,"field-messages",13),r.qZA()}if(2&e){const e=r.oxw();r.Q6J("ngClass",e.getFieldClass()),r.xp6(1),r.Q6J("ngModel",e.value)("ngModelOptions",e.modelOptions),r.xp6(2),r.Q6J("fieldname",e.fieldname)}}let jl=(()=>{class fieldUrl extends d.O{model;view;language;metadata;router;constructor(e,t,s,i,n){super(e,t,s,i,n),this.model=e,this.view=t,this.language=s,this.metadata=i,this.router=n}get url(){return this.fieldconfig.inputurl?this.fieldconfig.inputurl.replace(/https?\:\/\//,""):this.model.getField(this.fieldname)?this.model.getField(this.fieldname).replace(/https?\:\/\//,""):""}navigateTo(){""!=this.url&&window.open("//"+this.url,"_blank")}static ɵfac=function(e){return new(e||fieldUrl)(r.Y36(w.o),r.Y36(k.e),r.Y36(x.d),r.Y36(c.Pu),r.Y36(A.F0))};static ɵcmp=r.Xpm({type:fieldUrl,selectors:[["field-url"]],features:[r.qOj],decls:3,vars:3,consts:[[3,"fieldname","fieldconfig",4,"ngIf"],[3,"fielddisplayclass","editable","fieldconfig","fieldid",4,"ngIf"],["class","slds-form-element__control slds-grid slds-grid--align-spread",3,"ngClass",4,"ngIf"],[3,"fieldname","fieldconfig"],[3,"fielddisplayclass","editable","fieldconfig","fieldid"],[1,"slds-grid","slds-grid--vertical-align-center","slds-text-link_reset",3,"click"],["class","slds-m-right--xx-small","size","x-small",3,"icon",4,"ngIf"],["class","slds-truncate",4,"ngIf"],["size","x-small",1,"slds-m-right--xx-small",3,"icon"],[1,"slds-truncate"],[1,"slds-form-element__control","slds-grid","slds-grid--align-spread",3,"ngClass"],["type","text",1,"slds-input",3,"ngModel","ngModelOptions","ngModelChange"],["focus",""],[3,"fieldname"]],template:function(e,t){1&e&&(r.YNc(0,Yl,1,2,"field-label",0),r.YNc(1,Ql,4,6,"field-generic-display",1),r.YNc(2,Rl,4,4,"div",2)),2&e&&(r.Q6J("ngIf",t.displayLabel),r.xp6(1),r.Q6J("ngIf",!t.isEditMode()),r.xp6(1),r.Q6J("ngIf",t.isEditable()&&t.isEditMode()))},dependencies:[i.mk,i.O5,n.Fj,n.JJ,n.On,I.r,u.q,C.D,M.a],encapsulation:2})}return fieldUrl})();function Bl(e,t){if(1&e&&r._UZ(0,"field-label",3),2&e){const e=r.oxw();r.Q6J("fieldname",e.fieldname)("fieldconfig",e.fieldconfig)}}function Gl(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"system-utility-icon",8),r.NdJ("click",(function(t){r.CHM(e);const s=r.oxw(2);return r.KtG(s.sendEmail(t))})),r.qZA()}}function Pl(e,t){if(1&e&&(r.TgZ(0,"field-generic-display",4)(1,"div",5)(2,"div",6),r._uU(3),r.qZA(),r.YNc(4,Gl,1,0,"system-utility-icon",7),r.qZA()()),2&e){const e=r.oxw();r.Q6J("fielddisplayclass",e.fielddisplayclass)("fieldconfig",e.fieldconfig)("editable",e.isEditable())("title",e.value),r.xp6(3),r.Oqu(e.value),r.xp6(1),r.Q6J("ngIf",e.value)}}function Hl(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"div",9)(1,"input",10),r.NdJ("ngModelChange",(function(t){r.CHM(e);const s=r.oxw();return r.KtG(s.value=t)})),r.qZA(),r._UZ(2,"field-messages",11),r.qZA()}if(2&e){const e=r.oxw();r.Q6J("ngClass",e.fieldClass),r.xp6(1),r.Q6J("ngModel",e.value)("ngModelOptions",e.modelOptions),r.xp6(1),r.Q6J("fieldname",e.fieldname)}}let zl=(()=>{class fieldEmail extends d.O{model;view;language;metadata;router;invalid=!1;mark;validation=new RegExp('^(([^<>()\\[\\]\\\\.,;:\\s@"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@"]+)*)|(".+"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$');constructor(e,t,s,i,n){super(e,t,s,i,n),this.model=e,this.view=t,this.language=s,this.metadata=i,this.router=n,this.mark=this.model.generateGuid(),this.subscriptions.add(this.model.data$.subscribe((e=>{(!this.value||this.value&&this.value!=e.email1)&&this.setInitialFieldValue()}))),this.model.observeFieldChanges("email_addresses").subscribe((()=>{this.setInitialFieldValue()}))}_value="";get value(){return this._value}set value(e){this._value=e,e&&e.length>0&&!this.validation.test(e)?(this.model.setFieldMessage("error",this.language.getLabel("LBL_INPUT_INVALID"),this.fieldname,this.mark),this.invalid=!0):(this.model.setField(this.fieldname,e||""),this.setPrimaryEmail(e),this.model.resetFieldMessages(this.fieldname,"error",this.mark),this.invalid=!1)}get fieldClass(){return this.invalid?[...this.css_classes,"slds-has-error"]:this.css_classes}ngOnInit(){this.setInitialFieldValue(),super.ngOnInit()}setInitialFieldValue(){this._value=this.model.getField(this.fieldname);const e=this.model.getRelatedRecords("email_addresses"),t=e?e.find((e=>1==e.primary_address)):void 0;this._value||(this._value=t?t.email_address:void 0)}setPrimaryEmail(e){let t=e?{id:this.model.generateGuid(),primary_address:"1",email_address:e.toLowerCase(),email_address_caps:e.toUpperCase()}:void 0,s=this.model.getRelatedRecords("email_addresses");if(s&&0!=s.length||!t)if(t){let e=!1;s.forEach((s=>{t.email_address_caps==s.email_address_caps?(e=!0,s.primary_address=1):s.primary_address=0})),e||s.push(t)}else s=s.filter((e=>1!=e.primary_address));else s=[t];this.model.setRelatedRecords("email_addresses",s)}sendEmail(e){e.stopPropagation(),e.preventDefault(),this.value.length>0&&window.open("mailto:"+this.value)}static ɵfac=function(e){return new(e||fieldEmail)(r.Y36(w.o),r.Y36(k.e),r.Y36(x.d),r.Y36(c.Pu),r.Y36(A.F0))};static ɵcmp=r.Xpm({type:fieldEmail,selectors:[["field-email"]],features:[r.qOj],decls:3,vars:3,consts:[[3,"fieldname","fieldconfig",4,"ngIf"],[3,"fielddisplayclass","fieldconfig","editable","title",4,"ngIf"],["class","slds-form-element__control slds-p-around--xx-small",3,"ngClass",4,"ngIf"],[3,"fieldname","fieldconfig"],[3,"fielddisplayclass","fieldconfig","editable","title"],[1,"slds-grid","slds-grid--vertical-align-center"],[1,"slds-truncate"],["icon","email","size","x-small","class","slds-text-link_reset slds-p-left--x-small",3,"click",4,"ngIf"],["icon","email","size","x-small",1,"slds-text-link_reset","slds-p-left--x-small",3,"click"],[1,"slds-form-element__control","slds-p-around--xx-small",3,"ngClass"],["type","text",1,"slds-input",3,"ngModel","ngModelOptions","ngModelChange"],[3,"fieldname"]],template:function(e,t){1&e&&(r.YNc(0,Bl,1,2,"field-label",0),r.YNc(1,Pl,5,6,"field-generic-display",1),r.YNc(2,Hl,3,4,"div",2)),2&e&&(r.Q6J("ngIf",t.displayLabel),r.xp6(1),r.Q6J("ngIf",!t.isEditMode()),r.xp6(1),r.Q6J("ngIf",t.isEditable()&&t.isEditMode()))},dependencies:[i.mk,i.O5,n.Fj,n.JJ,n.On,I.r,u.q,C.D,M.a],encapsulation:2})}return fieldEmail})();var Vl=s(94664),$l=s(15982);function Kl(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"input",6),r.NdJ("ngModelChange",(function(t){r.CHM(e);const s=r.oxw();return r.KtG(s.emailAddressText=t)}))("blur",(function(){r.CHM(e);const t=r.oxw();return r.KtG(t.validateDomain())})),r.qZA()}if(2&e){const e=r.oxw();r.Udp("text-decoration","1"==e.emailAddress.invalid_email?"line-through":"initial"),r.Q6J("ngModel",e.emailAddressText)("disabled",1==e.emailAddress.invalid_email)}}function Xl(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"input",7),r.NdJ("ngModelChange",(function(t){r.CHM(e);const s=r.oxw();return r.KtG(s.emailAddressText=t)}))("blur",(function(){r.CHM(e);const t=r.oxw();return r.KtG(t.validateDomain())})),r.qZA()}if(2&e){const e=r.oxw();r.Udp("text-decoration","1"==e.emailAddress.invalid_email?"line-through":"initial"),r.Q6J("ngModel",e.emailAddressText)("disabled",1==e.emailAddress.invalid_email)}}function Wl(e,t){1&e&&(r.TgZ(0,"div",8),r._UZ(1,"system-label",9),r.qZA())}function eo(e,t){1&e&&(r.TgZ(0,"div",8),r._UZ(1,"system-label",10),r.qZA())}function to(e,t){1&e&&(r.TgZ(0,"div",11),r._UZ(1,"system-spinner",12)(2,"system-label",13),r.qZA())}let so=(()=>{class fieldEmailEmailAddress{zone;backend;configurationService;onBlur=new r.vpe;emailAddress={};hasFocus=!1;typingTimeout;invalid_domain=!1;checkingDomain=!1;validInput=!0;constructor(e,t,s){this.zone=e,this.backend=t,this.configurationService=s}get emailAddressText(){return this.emailAddress.email_address}set emailAddressText(e){this.emailAddress.email_address=e,this.emailAddress.email_address_caps=e.toUpperCase(),this.zone.runOutsideAngular((()=>{window.clearTimeout(this.typingTimeout),this.typingTimeout=window.setTimeout((()=>this.zone.run((()=>{this.validateEmailAddress(),this.onBlur.emit()}))),500)}))}validateEmailAddress(){let e=new RegExp("^(?:[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*|\"(?:[-\b\v\f-!#-[]-]|\\\\[-\t\v\f-])*\")@(?:(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?|\\[(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?|[a-z0-9-]*[a-z0-9]:(?:[-\b\v\f-!-ZS-]|\\\\[-\t\v\f-])+)\\])$");this.configurationService.data.systemparameters.international_email_addresses&&(e=new RegExp("(?:[ -퟿-￿-a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\\.[ -퟿-￿-a-z0-9!#$%&'*+/=?^_`{|}~-]+)*|\"(?:[-\b\v\f-!#-[]-]|\\\\[-\t\v\f-])*\")@(?:(?:[ -퟿-￿-a-z0-9](?:[ -퟿-￿-a-z0-9-]*[ -퟿-￿-a-z0-9])?\\.)+[ -퟿-￿-a-z0-9](?:[ -퟿-￿-a-z0-9-]*[ -퟿-￿-a-z0-9])?|\\[(?:(?:(2(5[0-5]|[0-4][0-9])|1[0-9][0-9]|[1-9]?[0-9]))\\.){3}(?:(2(5[0-5]|[0-4][0-9])|1[0-9][0-9]|[1-9]?[0-9])|[a-z0-9-]*[a-z0-9]:(?:[-\b\v\f-!-ZS-]|\\\\[-\t\v\f-])+)\\])")),this.validInput=e.test(this.emailAddress.email_address)}validateDomain(){this.emailAddress.email_address&&1!=this.emailAddress.invalid_email&&(this.checkingDomain=!0,this.backend.postRequest("module/EmailAddresses/validate",null,{text:this.emailAddress.email_address}).subscribe((e=>{this.checkingDomain=!1,this.emailAddress.invalid_email=e.invalid_email||e.invalid_domain?1:0,this.invalid_domain=e.invalid_domain})))}static ɵfac=function(e){return new(e||fieldEmailEmailAddress)(r.Y36(r.R0b),r.Y36($.y),r.Y36(W.C))};static ɵcmp=r.Xpm({type:fieldEmailEmailAddress,selectors:[["field-email-emailaddress"]],inputs:{emailAddress:"emailAddress",hasFocus:"hasFocus"},outputs:{onBlur:"onBlur"},decls:8,vars:7,consts:[[1,"slds-form-element","slds-truncate","slds-size--1-of-1"],[1,"slds-form-element__control"],["type","text","class","slds-input",3,"ngModel","text-decoration","disabled","ngModelChange","blur",4,"ngIf","ngIfElse"],["hasFocusContainer",""],["class","slds-form-element__help",4,"ngIf"],["class","slds-form-element__help slds-grid",4,"ngIf"],["type","text",1,"slds-input",3,"ngModel","disabled","ngModelChange","blur"],["type","text","system-autofocus","",1,"slds-input",3,"ngModel","disabled","ngModelChange","blur"],[1,"slds-form-element__help"],["label","LBL_INPUT_INVALID"],["label","LBL_DOMAIN_INVALID"],[1,"slds-form-element__help","slds-grid"],["size","14",1,"slds-m-right--xx-small","slds-p-top--xxx-small"],["label","LBL_CHECKING_DOMAIN"]],template:function(e,t){if(1&e&&(r.TgZ(0,"div",0)(1,"div",1),r.YNc(2,Kl,1,4,"input",2),r.YNc(3,Xl,1,4,"ng-template",null,3,r.W1O),r.qZA(),r.YNc(5,Wl,2,0,"div",4),r.YNc(6,eo,2,0,"div",4),r.YNc(7,to,3,0,"div",5),r.qZA()),2&e){const e=r.MAs(4);r.ekj("slds-has-error",!t.validInput||t.invalid_domain||t.emailAddress.invalid_email),r.xp6(2),r.Q6J("ngIf",!t.hasFocus)("ngIfElse",e),r.xp6(3),r.Q6J("ngIf",!t.validInput&&!t.invalid_domain),r.xp6(1),r.Q6J("ngIf",t.invalid_domain&&!t.checkingDomain),r.xp6(1),r.Q6J("ngIf",t.checkingDomain)}},dependencies:[i.O5,n.Fj,n.JJ,n.On,te._,Vl.W,$l.m],encapsulation:2})}return fieldEmailEmailAddress})(),io=(()=>{class fieldEmailEmailAddressStatus{status;get statusColor(){switch(this.status){case"opted_in":return"slds-icon-text-success";case"pending":return"slds-icon-text-warning";case"opted_out":return"slds-icon-text-error";default:return"slds-icon-text-light"}}get statusIcon(){switch(this.status){case"opted_in":return"success";case"pending":return"warning";case"opted_out":return"error";default:return"routing_offline"}}get statusLabel(){switch(this.status){case"opted_in":return"LBL_OPTED_IN";case"pending":return"LBL_PENDING";case"opted_out":return"LBL_OPTED_OUT";default:return"LBL_OPT_IN_STATUS"}}static ɵfac=function(e){return new(e||fieldEmailEmailAddressStatus)};static ɵcmp=r.Xpm({type:fieldEmailEmailAddressStatus,selectors:[["field-email-emailaddress-status"]],inputs:{status:"status"},decls:1,vars:3,consts:[["size","x-small",3,"icon","colorclass","title"]],template:function(e,t){1&e&&r._UZ(0,"system-utility-icon",0),2&e&&r.Q6J("icon",t.statusIcon)("colorclass",t.statusColor)("title",t.statusLabel)},dependencies:[I.r],encapsulation:2,changeDetection:0})}return fieldEmailEmailAddressStatus})();function no(e,t){if(1&e&&r._UZ(0,"field-label",3),2&e){const e=r.oxw();r.Q6J("fieldname",e.fieldname)("fieldconfig",e.fieldconfig)}}function lo(e,t){if(1&e&&r._UZ(0,"system-input-radio",14),2&e){const e=r.oxw().$implicit;r.Q6J("ngModel",e.primary_address)("disabled",!0)}}function oo(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"button",15),r.NdJ("click",(function(){r.CHM(e);const t=r.oxw().$implicit,s=r.oxw(2);return r.KtG(s.sendEmail(t))})),r._UZ(1,"system-button-icon",16),r.qZA()}if(2&e){const e=r.oxw().$implicit;r.Q6J("disabled","1"==e.invalid_email)}}function ao(e,t){if(1&e&&(r.TgZ(0,"div",6),r.YNc(1,lo,1,2,"system-input-radio",7),r.TgZ(2,"div",8)(3,"div",9),r.YNc(4,oo,2,1,"button",10),r.TgZ(5,"div",11),r._uU(6),r.qZA()()(),r.TgZ(7,"div",12),r._UZ(8,"field-email-emailaddress-status",13),r.qZA()()),2&e){const e=t.$implicit,s=r.oxw(2);r.xp6(1),r.Q6J("ngIf",!s.fieldconfig.singleMode),r.xp6(3),r.Q6J("ngIf",!!e.email_address),r.xp6(1),r.Udp("text-decoration","1"==e.invalid_email?"line-through":"initial"),r.xp6(1),r.Oqu(e.email_address),r.xp6(2),r.Q6J("status",e.opt_in_status)}}function ro(e,t){if(1&e&&(r.TgZ(0,"field-generic-display",4),r.YNc(1,ao,9,6,"div",5),r.qZA()),2&e){const e=r.oxw();r.Q6J("fieldconfig",e.fieldconfig)("editable",e.isEditable()),r.xp6(1),r.Q6J("ngForOf",e.emailAddresses)("ngForTrackBy",e.trackByFn)}}function co(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"system-input-radio",27),r.NdJ("ngModelChange",(function(){r.CHM(e);const t=r.oxw().$implicit,s=r.oxw(2);return r.KtG(s.setPrimary(t))})),r.qZA()}if(2&e){const e=r.oxw().$implicit,t=r.oxw(2);r.Q6J("name",t.primaryInputRadioName)("ngModel","1"==e.primary_address)("disabled",1==e.invalid_email||!e.email_address)}}function uo(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"div",21),r.YNc(1,co,1,3,"system-input-radio",22),r.TgZ(2,"field-email-emailaddress",23),r.NdJ("keyup.enter",(function(){r.CHM(e);const t=r.oxw(2);return r.KtG(t.startAdding())}))("onBlur",(function(){r.CHM(e);const t=r.oxw(2);return r.KtG(t.setEmailAddressesField())})),r.qZA(),r._UZ(3,"field-email-emailaddress-status",24),r.TgZ(4,"button",25),r.NdJ("click",(function(){const t=r.CHM(e).$implicit,s=r.oxw(2);return r.KtG(s.handleOnDelete(t))})),r._UZ(5,"system-button-icon",26),r.qZA()()}if(2&e){const e=t.$implicit,s=r.oxw(2);r.ekj("slds-m-bottom--x-small",s.emailAddresses.length>0),r.xp6(1),r.Q6J("ngIf",!s.fieldconfig.singleMode),r.xp6(1),r.Q6J("emailAddress",e)("hasFocus",s.focusedEmailAddress==e.id),r.xp6(1),r.Q6J("status",e.opt_in_status),r.xp6(1),r.Q6J("disabled","1"==e.primary_address&&s.emailAddresses.length>1)}}function mo(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"system-input-radio",30),r.NdJ("ngModelChange",(function(){r.CHM(e);const t=r.oxw(3);return r.KtG(t.setPrimary(t.inputNewEmailAddress))})),r.qZA()}if(2&e){const e=r.oxw(3);r.Q6J("name",e.primaryInputRadioName)("ngModel","1"==e.inputNewEmailAddress.primary_address)("disabled",1==e.inputNewEmailAddress.invalid_email||!e.inputNewEmailAddress.email_address)}}function go(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"div",21),r.YNc(1,mo,1,3,"system-input-radio",28),r.TgZ(2,"field-email-emailaddress",29),r.NdJ("keyup.enter",(function(){r.CHM(e);const t=r.oxw(2);return r.KtG(t.startAdding())}))("onBlur",(function(){r.CHM(e);const t=r.oxw(2);return r.KtG(t.setEmailAddressesField())})),r.qZA(),r._UZ(3,"field-email-emailaddress-status",24),r.TgZ(4,"button",25),r.NdJ("click",(function(){r.CHM(e);const t=r.oxw(2);return r.KtG(t.cancelAdding())})),r._UZ(5,"system-button-icon",26),r.qZA()()}if(2&e){const e=r.oxw(2);r.xp6(1),r.Q6J("ngIf",!e.fieldconfig.singleMode),r.xp6(1),r.Q6J("emailAddress",e.inputNewEmailAddress),r.xp6(1),r.Q6J("status",e.inputNewEmailAddress.opt_in_status),r.xp6(1),r.Q6J("disabled","1"==e.inputNewEmailAddress.primary_address&&e.emailAddresses.length>1)}}function ho(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"div",31)(1,"button",32),r.NdJ("click",(function(){r.CHM(e);const t=r.oxw(2);return r.KtG(t.startAdding())})),r._UZ(2,"system-button-icon",33),r.qZA()()}}function po(e,t){if(1&e&&(r.TgZ(0,"div",17),r.YNc(1,uo,6,7,"div",18),r.YNc(2,go,6,4,"div",19),r.YNc(3,ho,3,0,"div",20),r.qZA()),2&e){const e=r.oxw();r.xp6(1),r.Q6J("ngForOf",e.emailAddresses)("ngForTrackBy",e.trackByFn),r.xp6(1),r.Q6J("ngIf",e.isAdding),r.xp6(1),r.Q6J("ngIf",e.canAdd)}}let fo=(()=>{class fieldEmailAddresses extends d.O{model;view;language;metadata;broadcast;router;primaryInputRadioName=_.uniqueId("field-email-address-");canAdd=!1;isAdding=!1;focusedEmailAddress;emailAddresses=[];inputNewEmailAddress={primary_address:"",invalid_email:0,email_address:""};constructor(e,t,s,i,n,l){super(e,t,s,i,l),this.model=e,this.view=t,this.language=s,this.metadata=i,this.broadcast=n,this.router=l,this.subscribeToDataChange()}ngOnInit(){this.initialize(),this.subscribeToModeChange()}handleOnDelete(e){this.emailAddresses=this.emailAddresses.filter((t=>t.id!==e.id)),e.isNew?this.model.setRelatedRecords("email_addresses",this.emailAddresses):this.model.removeRelatedRecords("email_addresses",[e.id]),0==this.emailAddresses.length&&this.setEmail1Field(void 0),this.fieldconfig.singleMode&&(this.canAdd=!0,this.startAdding()),this.model.duplicateCheckOnChange([],!0)}sendEmail(e){1!=e.invalid_email&&window.location.assign("mailto:"+e.email_address)}trackByFn(e,t){return t.id}setPrimary(e){1!=e.invalid_email&&(this.emailAddresses.forEach((t=>{t.id==e.id?(t.primary_address="1",this.setEmail1Field(e)):t.primary_address="0"})),this.model.addRelatedRecords("email_addresses",this.emailAddresses))}startAdding(){this.canAdd&&(this.isAdding=!0,this.canAdd=!1)}subscribeToDataChange(){this.subscriptions.add(this.broadcast.message$.subscribe((e=>{"model.loaded"==e.messagetype&&this.initialize()}))),this.subscriptions.add(this.model.observeFieldChanges("email_addresses").subscribe((()=>{const e=this.model.getRelatedRecords("email_addresses");this.emailAddresses=this.fieldconfig.singleMode?e.filter((e=>1==e.primary_address)):e,e.length>0&&this.isAdding&&(this.inputNewEmailAddress.email_address||(this.isAdding=!1))})))}setEmail1Field(e){1!=e?.invalid_email&&e?.email_address!=this.model.getField("email1")&&this.model.setField("email1",e?.email_address)}subscribeToModeChange(){this.subscriptions.add(this.view.mode$.subscribe((()=>this.initialize())))}initialize(){const e=this.model.getRelatedRecords("email_addresses");this.emailAddresses=this.fieldconfig.singleMode?e.filter((e=>1==e.primary_address)):e,this.isEditMode()&&(Array.isArray(this.emailAddresses)&&0!=this.emailAddresses.length?this.setCanAdd():(this.model.initializeField("email_addresses",{beans:{},beans_relations_to_delete:{}}),this.emailAddresses=[],this.canAdd=!0,this.startAdding()))}setEmailAddressesField(){this.pushNewEmailAddress();const e=this.getUniqueCleanEmailAddresses();this.model.addRelatedRecords("email_addresses",e.unique),this.model.rollbackRemovedRelatedRecords("email_addresses",e.unique.map((e=>e.id))),this.model.removeRelatedRecords("email_addresses",e.deletedIds),this.setEmail1Field(e.unique.find((e=>"1"==e.primary_address))),this.model.duplicateCheckOnChange([],!0),this.setCanAdd()}pushNewEmailAddress(){this.isAdding&&1!=this.inputNewEmailAddress.invalid_email&&!this.emailAddresses.some((e=>e.email_address==this.inputNewEmailAddress.email_address))&&(0==this.emailAddresses.length&&(this.inputNewEmailAddress.primary_address=1),this.inputNewEmailAddress.id=this.model.generateGuid(),this.inputNewEmailAddress.isNew=!0,this.focusedEmailAddress=this.inputNewEmailAddress.id,this.emailAddresses.push({...this.inputNewEmailAddress}),this.cancelAdding())}setCanAdd(){this.canAdd=!this.fieldconfig.singleMode||0==this.emailAddresses.length}getUniqueCleanEmailAddresses(){const e=[],t=this.emailAddresses.filter((e=>!e.email_address)).map((e=>e.id));return this.emailAddresses.filter((e=>!!e.email_address)).forEach((s=>{e.some((e=>e.email_address==s.email_address))?s.isNew||t.push(s.id):e.push(s)})),{deletedIds:t,unique:e}}cancelAdding(){this.inputNewEmailAddress={id:"",primary_address:"",invalid_email:0,email_address:""},this.emailAddresses.length>0&&(this.isAdding=!1,this.setCanAdd())}static ɵfac=function(e){return new(e||fieldEmailAddresses)(r.Y36(w.o),r.Y36(k.e),r.Y36(x.d),r.Y36(c.Pu),r.Y36(X.f),r.Y36(A.F0))};static ɵcmp=r.Xpm({type:fieldEmailAddresses,selectors:[["field-email-addresses"]],features:[r.qOj],decls:3,vars:3,consts:[[3,"fieldname","fieldconfig",4,"ngIf"],["fielddisplayclass","slds-has-divider--bottom slds-p-vertical--xx-small spice-fieldminheight",3,"fieldconfig","editable",4,"ngIf"],["class","slds-m-top--xx-small",4,"ngIf"],[3,"fieldname","fieldconfig"],["fielddisplayclass","slds-has-divider--bottom slds-p-vertical--xx-small spice-fieldminheight",3,"fieldconfig","editable"],["class","slds-grid slds-grid--vertical-align-center slds-size--1-of-1",4,"ngFor","ngForOf","ngForTrackBy"],[1,"slds-grid","slds-grid--vertical-align-center","slds-size--1-of-1"],["value","1","system-title","LBL_PRIMARY","class","slds-truncate",3,"ngModel","disabled",4,"ngIf"],[1,"slds-m-bottom--xx-small","slds-grow"],[1,"slds-grid","slds-grid--vertical-align-center"],["class","slds-button slds-button_icon slds-m-right--xx-small",3,"disabled","click",4,"ngIf"],[1,"slds-truncate"],[1,"slds-p-left--x-small","slds-m-bottom--x-small"],[1,"slds-m-bottom--x-small","slds-p-right--xx-small",3,"status"],["value","1","system-title","LBL_PRIMARY",1,"slds-truncate",3,"ngModel","disabled"],[1,"slds-button","slds-button_icon","slds-m-right--xx-small",3,"disabled","click"],["icon","email","sprite","action"],[1,"slds-m-top--xx-small"],["class","slds-grid",3,"slds-m-bottom--x-small",4,"ngFor","ngForOf","ngForTrackBy"],["class","slds-grid",4,"ngIf"],["class","slds-grid slds-align-content-center slds-p-vertical--x-small",4,"ngIf"],[1,"slds-grid"],["value","1","system-title","LBL_PRIMARY","class","slds-m-top--xx-small","style","max-width: 1.4rem",3,"name","ngModel","disabled","ngModelChange",4,"ngIf"],[1,"slds-grow",3,"emailAddress","hasFocus","keyup.enter","onBlur"],[1,"slds-p-right--xx-small","slds-p-left--x-small","slds-m-top--xx-small",3,"status"],[1,"slds-button","slds-button--icon","slds-m-top--xxx-small",2,"max-height","1.6rem",3,"disabled","click"],["icon","clear"],["value","1","system-title","LBL_PRIMARY",1,"slds-m-top--xx-small",2,"max-width","1.4rem",3,"name","ngModel","disabled","ngModelChange"],["value","1","class","slds-m-top--xx-small","style","max-width: 1.4rem",3,"name","ngModel","disabled","ngModelChange",4,"ngIf"],[1,"slds-grow",3,"emailAddress","keyup.enter","onBlur"],["value","1",1,"slds-m-top--xx-small",2,"max-width","1.4rem",3,"name","ngModel","disabled","ngModelChange"],[1,"slds-grid","slds-align-content-center","slds-p-vertical--x-small"],["system-title","LBL_NEW",1,"slds-button","slds-button--icon-small","slds-button--icon-border",3,"click"],["icon","add"]],template:function(e,t){1&e&&(r.YNc(0,no,1,2,"field-label",0),r.YNc(1,ro,2,4,"field-generic-display",1),r.YNc(2,po,4,4,"div",2)),2&e&&(r.Q6J("ngIf",t.displayLabel),r.xp6(1),r.Q6J("ngIf",!t.isEditMode()),r.xp6(1),r.Q6J("ngIf",t.isEditMode()))},dependencies:[i.sg,i.O5,n.JJ,n.On,Z.J,Gt.A,Pn.S,u.q,C.D,so,io],encapsulation:2})}return fieldEmailAddresses})();var bo=s(82032);function _o(e,t){if(1&e&&r._UZ(0,"field-label",3),2&e){const e=r.oxw();r.Q6J("fieldname",e.fieldname)("fieldconfig",e.fieldconfig)}}function vo(e,t){if(1&e&&(r.TgZ(0,"li",8)(1,"a",9)(2,"span",10),r._uU(3),r.qZA()()()),2&e){const e=t.$implicit;r.xp6(3),r.hij(" ",e.email_address," ")}}function yo(e,t){if(1&e&&(r.TgZ(0,"field-generic-display",4)(1,"div",5)(2,"ul",6),r.YNc(3,vo,4,1,"li",7),r.qZA()()()),2&e){const e=r.oxw();r.Q6J("fielddisplayclass",e.fielddisplayclass)("fieldconfig",e.fieldconfig)("editable",e.isEditable()),r.xp6(3),r.Q6J("ngForOf",e.displayValue)}}function xo(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"a",18),r.NdJ("click",(function(t){r.CHM(e);const s=r.oxw(2);return r.KtG(s.showField("cc",t))})),r._uU(1,"Cc"),r.qZA()}}function wo(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"a",19),r.NdJ("click",(function(t){r.CHM(e);const s=r.oxw(2);return r.KtG(s.showField("bcc",t))})),r._uU(1,"Bcc"),r.qZA()}}function Zo(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"field-email-recipients-input",20),r.NdJ("drop$",(function(t){r.CHM(e);const s=r.oxw(2);return r.KtG(s.handleDrop(t))})),r.qZA()}if(2&e){const e=r.oxw(2);r.Q6J("displayValue",e.displayValue)}}function To(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"field-email-recipients-input",21),r.NdJ("drop$",(function(t){r.CHM(e);const s=r.oxw(2);return r.KtG(s.handleDrop(t))})),r.qZA()}if(2&e){const e=r.oxw(2);r.Q6J("displayValue",e.displayValue)}}function Co(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"div",11),r.NdJ("click",(function(){r.CHM(e);const t=r.oxw();return r.KtG(t.setFocused())})),r.TgZ(1,"field-email-recipients-input",12),r.NdJ("drop$",(function(t){r.CHM(e);const s=r.oxw();return r.KtG(s.handleDrop(t))})),r.YNc(2,xo,2,0,"a",13),r.YNc(3,wo,2,0,"a",14),r.qZA(),r.YNc(4,Zo,1,1,"field-email-recipients-input",15),r.YNc(5,To,1,1,"field-email-recipients-input",16),r._UZ(6,"field-messages",17),r.qZA()}if(2&e){const e=r.oxw();r.Q6J("ngClass",e.css_classes),r.xp6(1),r.Q6J("addressType",e.fieldconfig.addresstype||"from")("displayValue",e.displayValue),r.xp6(1),r.Q6J("ngIf","to"==e.fieldconfig.addresstype&&!e.showCCField),r.xp6(1),r.Q6J("ngIf","to"==e.fieldconfig.addresstype&&!e.showBCCField),r.xp6(1),r.Q6J("ngIf",e.focused&&e.showCCField),r.xp6(1),r.Q6J("ngIf",e.focused&&e.showBCCField),r.xp6(1),r.Q6J("fieldname",e.fieldname)}}let ko=(()=>{class fieldEmailRecipients extends d.O{model;navigation;view;language;metadata;router;modal;injector;backend;renderer;elementRef;zone;displayValue=[];showCCField=!1;showBCCField=!1;focused=!1;dragging=!1;clickListener;constructor(e,t,s,i,n,l,o,a,d,r,c,u){super(e,s,i,n,l),this.model=e,this.navigation=t,this.view=s,this.language=i,this.metadata=n,this.router=l,this.modal=o,this.injector=a,this.backend=d,this.renderer=r,this.elementRef=c,this.zone=u}ngOnInit(){super.ngOnInit(),this.subscribeToDataChanges(),this.setInitialFieldValue()}get value(){return this.model.getField("recipient_addresses")}set value(e){this.model.setField("recipient_addresses",e)}subscribeToDataChanges(){this.subscriptions.add(this.model.observeFieldChanges("recipient_addresses").subscribe((()=>{Array.isArray(this.model.getField("recipient_addresses"))&&this.setDisplayValue()})))}setInitialFieldValue(){if(this.value||(this.value=[]),this.setDisplayValue(),this.model.getField("recipient_addresses").length>0||!0===this.fieldconfig.nodetermination||"to"!=this.fieldconfig.addresstype||!this.model.getField("parent_type")||!this.model.getField("parent_id"))return;let e=this.navigation.getRegisteredModel(this.model.getField("parent_id"),this.model.getField("parent_type"));if(e){let t=e.getField("email1");t&&(this.value.push({parent_type:e.module,parent_id:e.id,email_address:t,id:this.model.generateGuid(),address_type:"to"}),this.setDisplayValue())}else this.backend.getRequest(`module/${this.model.getField("parent_type")}/${this.model.getField("parent_id")}`).subscribe((e=>{e.email1&&(this.value.push({parent_type:this.model.getField("parent_type"),parent_id:this.model.getField("parent_id"),email_address:e.email1,id:this.model.generateGuid(),address_type:"to"}),this.setDisplayValue())}))}setDisplayValue(){const e=this.model.getField("recipient_addresses");e.forEach((e=>{"cc"==e.address_type&&(this.showCCField=!0),"bcc"==e.address_type&&(this.showBCCField=!0)}));const t=this.fieldconfig.addresstype??"from";this.displayValue=e.filter((e=>"to"==t?e.address_type in{to:!0,cc:!0,bcc:!0}:e.address_type==t))}showField(e,t){t.stopPropagation(),"cc"==e?this.showCCField=!0:this.showBCCField=!0,this.setFocused()}addDocumentClickListener(){this.clickListener=this.renderer.listen("document","click",(e=>{this.elementRef.nativeElement.contains(e.target)||(this.setDisplayValue(),this.focused=!1,this.clickListener(),this.clickListener=void 0)}))}setFocused(){this.setDisplayValue(),this.focused=!0,this.clickListener||this.addDocumentClickListener()}handleDrop(e){const t=this.value.findIndex((t=>t==e.item.data));e.previousContainer.data!=e.container.data&&this.value.some((t=>{if(e.item.data==t)return t.address_type=e.container.data,!0})),(0,l.bA)(this.value,t,e.currentIndex),this.setDisplayValue()}static ɵfac=function(e){return new(e||fieldEmailRecipients)(r.Y36(w.o),r.Y36(bo.G),r.Y36(k.e),r.Y36(x.d),r.Y36(c.Pu),r.Y36(A.F0),r.Y36(L.o),r.Y36(r.zs3),r.Y36($.y),r.Y36(r.Qsj),r.Y36(r.SBq),r.Y36(r.R0b))};static ɵcmp=r.Xpm({type:fieldEmailRecipients,selectors:[["field-email-recipients"]],features:[r.qOj],decls:3,vars:3,consts:[[3,"fieldname","fieldconfig",4,"ngIf"],[3,"fielddisplayclass","fieldconfig","editable",4,"ngIf"],["cdkDropListGroup","","class","slds-form-element__control",3,"ngClass","click",4,"ngIf"],[3,"fieldname","fieldconfig"],[3,"fielddisplayclass","fieldconfig","editable"],[1,"slds-pill_container",2,"border","none"],["role","listbox",1,"slds-listbox","slds-listbox_horizontal","slds-size--1-of-1"],["class","slds-pill slds-pill_link",4,"ngFor","ngForOf"],[1,"slds-pill","slds-pill_link"],["href","javascript:void(0);",1,"slds-pill__action","slds-p-horizontal--xx-small"],[1,"slds-pill__label"],["cdkDropListGroup","",1,"slds-form-element__control",3,"ngClass","click"],[3,"addressType","displayValue","drop$"],["href","javascript:void(0)","class","slds-m-right--xx-small slds-input__icon slds-input__icon_right",3,"click",4,"ngIf"],["href","javascript:void(0)","class","slds-input__icon_right slds-input__icon",3,"click",4,"ngIf"],["addressType","cc",3,"displayValue","drop$",4,"ngIf"],["addressType","bcc",3,"displayValue","drop$",4,"ngIf"],[3,"fieldname"],["href","javascript:void(0)",1,"slds-m-right--xx-small","slds-input__icon","slds-input__icon_right",3,"click"],["href","javascript:void(0)",1,"slds-input__icon_right","slds-input__icon",3,"click"],["addressType","cc",3,"displayValue","drop$"],["addressType","bcc",3,"displayValue","drop$"]],template:function(e,t){1&e&&(r.YNc(0,_o,1,2,"field-label",0),r.YNc(1,yo,4,4,"field-generic-display",1),r.YNc(2,Co,7,8,"div",2)),2&e&&(r.Q6J("ngIf",t.displayLabel),r.xp6(1),r.Q6J("ngIf",!t.isEditMode()),r.xp6(1),r.Q6J("ngIf",t.isEditable()&&t.isEditMode()))},encapsulation:2})}return fieldEmailRecipients})();const Ao=["addAddressInput"];function Lo(e,t){if(1&e&&r._UZ(0,"field-label",3),2&e){const e=r.oxw();r.Q6J("fieldname",e.fieldname)("fieldconfig",e.fieldconfig)}}function Io(e,t){if(1&e&&(r.TgZ(0,"field-generic-display",4)(1,"span"),r._uU(2),r.qZA()()),2&e){const e=r.oxw();r.Q6J("fielddisplayclass",e.fielddisplayclass)("fieldconfig",e.fieldconfig)("editable",e.isEditable()),r.xp6(2),r.Oqu(e.firstAddress)}}function So(e,t){if(1&e&&(r.TgZ(0,"span",25),r._UZ(1,"system-icon",26),r.qZA()),2&e){const e=r.oxw().$implicit;r.xp6(1),r.Q6J("module",e.parent_type)}}function Mo(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"li",13)(1,"span",20),r.YNc(2,So,2,1,"span",21),r.TgZ(3,"span",22),r._uU(4),r.qZA(),r.TgZ(5,"span",23)(6,"system-button-icon",24),r.NdJ("click",(function(t){const s=r.CHM(e).$implicit,i=r.oxw(2);return r.KtG(i.removeAddress(t,s.id))})),r.qZA()()()()}if(2&e){const e=t.$implicit;r.xp6(2),r.Q6J("ngIf",e.parent_id),r.xp6(2),r.Oqu(e.email_address),r.xp6(2),r.Q6J("icon","close")}}function Jo(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"input",27),r.NdJ("ngModelChange",(function(t){r.CHM(e);const s=r.oxw(2);return r.KtG(s.addAddress=t)}))("blur",(function(){r.CHM(e);const t=r.oxw(2);return r.KtG(t.onBlur())}))("keyup",(function(t){r.CHM(e);const s=r.oxw(2);return r.KtG(s.onKeyUp(t))})),r.qZA()}if(2&e){const e=r.oxw(2);r.Q6J("ngModel",e.addAddress)("title",e.language.getLabel("LBL_ADD_EMAILADDRESS"))("placeholder",e.language.getLabel("LBL_ADD_EMAILADDRESS"))}}function Oo(e,t){1&e&&r._UZ(0,"system-spinner",28)}function No(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"li",29),r.NdJ("click",(function(){const t=r.CHM(e).$implicit,s=r.oxw(2);return r.KtG(s.selectAddress(t))})),r.TgZ(1,"div",30),r._UZ(2,"system-icon",31),r.TgZ(3,"div",32)(4,"span",33),r._uU(5),r.qZA()()()()}if(2&e){const e=t.$implicit;r.xp6(2),r.Q6J("module",e.module),r.xp6(3),r.AsE("",e.email_address," • ",e.summary_text,"")}}const Fo=function(e){return{"slds-is-open":e}};function qo(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"div",5)(1,"div",6)(2,"div",7)(3,"div",8)(4,"div",9)(5,"div",10),r.NdJ("click",(function(){r.CHM(e);const t=r.oxw();return r.KtG(t.onClick())})),r.TgZ(6,"ul",11),r.YNc(7,Mo,7,3,"li",12),r.TgZ(8,"li",13),r.YNc(9,Jo,1,3,"input",14),r.qZA()()()(),r.TgZ(10,"div",15),r.YNc(11,Oo,1,0,"system-spinner",16),r.TgZ(12,"ul",17),r.YNc(13,No,6,3,"li",18),r.qZA()()()()(),r._UZ(14,"field-messages",19),r.qZA()}if(2&e){const e=r.oxw();r.Q6J("ngClass",e.css_classes),r.xp6(3),r.Q6J("ngClass",r.VKq(7,Fo,e.showSearchResults)),r.xp6(4),r.Q6J("ngForOf",e.addrArray),r.xp6(2),r.Q6J("ngIf",e.isAdding),r.xp6(2),r.Q6J("ngIf",e.searchResultsLoading),r.xp6(2),r.Q6J("ngForOf",e.searchResults),r.xp6(1),r.Q6J("fieldname",e.fieldname)}}let Eo=(()=>{class fieldEmailRecipientsShort extends d.O{model;view;language;metadata;router;backend;renderer;elementRef;isAdding=!1;addAddress="";searchTimeOut=void 0;showSearchResults=!1;searchResults=[];searchResultsLoading=!1;clickListener;addAddressInput;constructor(e,t,s,i,n,l,o,a){super(e,t,s,i,n),this.model=e,this.view=t,this.language=s,this.metadata=i,this.router=n,this.backend=l,this.renderer=o,this.elementRef=a}get firstAddress(){return this.addrArray&&this.addrArray.length>0?this.addrArray[0].email_address:""}get addresstype(){return this.fieldconfig.addresstype?this.fieldconfig.addresstype:"from"}get addrArray(){let e=[];if(this.model.getField("recipient_addresses"))for(let t of this.model.getField("recipient_addresses"))t.address_type==this.addresstype&&"1"!=t.deleted&&e.push(t);return e}onClick(){this.isAdding=!0}onBlur(){""==this.addAddress&&(this.isAdding=!1)}removeAddress(e,t){e.preventDefault(),e.stopPropagation();for(let e of this.model.getField("recipient_addresses"))if(e.id==t)return void(e.deleted="1")}onKeyUp(e){switch(e.key){case"ArrowDown":case"ArrowUp":break;case"Enter":this.searchTimeOut&&window.clearTimeout(this.searchTimeOut),this.validateEmail(this.addAddress)?(this.model.getField("recipient_addresses")||this.model.setField("recipient_addresses",[]),this.model.getField("recipient_addresses").push({id:this.model.generateGuid(),address_type:this.addresstype,email_address:this.addAddress}),this.addAddress="",this.closeSearchDialog()):this.doSearch();break;default:this.searchTimeOut&&window.clearTimeout(this.searchTimeOut),this.searchTimeOut=window.setTimeout((()=>this.doSearch()),1e3)}}closeSearchDialog(){this.clickListener(),this.searchResults=[],this.showSearchResults=!1}doSearch(){""!==this.addAddress&&(this.searchResults=[],this.showSearchResults=!0,this.searchResultsLoading=!0,this.clickListener=this.renderer.listen("document","click",(e=>this.handleClick(e))),this.backend.getRequest("module/EmailAddresses/"+this.addAddress).subscribe((e=>{e.length>0?this.searchResults=e:this.closeSearchDialog(),this.searchResultsLoading=!1})))}handleClick(e){this.elementRef.nativeElement.contains(e.target)||(this.closeSearchDialog(),this.addAddress="",this.isAdding=!1)}selectAddress(e){this.model.getField("recipient_addresses")||this.model.setField("recipient_addresses",[]),this.model.getField("recipient_addresses").push({id:this.model.generateGuid(),address_type:this.addresstype,email_address:e.email_address,email_address_id:e.email_address_id,parent_type:e.module,parent_id:e.id}),this.addAddress="",this.isAdding=!1,this.closeSearchDialog()}validateEmail(e){return/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(String(e).toLowerCase())}static ɵfac=function(e){return new(e||fieldEmailRecipientsShort)(r.Y36(w.o),r.Y36(k.e),r.Y36(x.d),r.Y36(c.Pu),r.Y36(A.F0),r.Y36($.y),r.Y36(r.Qsj),r.Y36(r.SBq))};static ɵcmp=r.Xpm({type:fieldEmailRecipientsShort,selectors:[["ng-component"]],viewQuery:function(e,t){if(1&e&&r.Gf(Ao,7,r.s_b),2&e){let e;r.iGM(e=r.CRH())&&(t.addAddressInput=e.first)}},features:[r.qOj],decls:3,vars:3,consts:[[3,"fieldname","fieldconfig",4,"ngIf"],[3,"fielddisplayclass","fieldconfig","editable",4,"ngIf"],["class","slds-form-element__control slds-grid slds-grid--align-spread slds-p-around--xx-small",3,"ngClass",4,"ngIf"],[3,"fieldname","fieldconfig"],[3,"fielddisplayclass","fieldconfig","editable"],[1,"slds-form-element__control","slds-grid","slds-grid--align-spread","slds-p-around--xx-small",3,"ngClass"],[1,"slds-form-element__control","slds-size--1-of-1"],[1,"slds-combobox_container"],["role","combobox",1,"slds-combobox","slds-dropdown-trigger","slds-dropdown-trigger_click",3,"ngClass"],["role","none",1,"slds-combobox__form-element","slds-input-has-icon","slds-input-has-icon_right"],[1,"slds-pill_container",3,"click"],["role","listbox",1,"slds-listbox","slds-listbox_horizontal"],["class","slds-listbox-item","role","presentation",4,"ngFor","ngForOf"],["role","presentation",1,"slds-listbox-item"],["system-autofocus","","type","text","style","min-width: 12rem;","class","slds-p-horizontal--x-small",3,"ngModel","title","placeholder","ngModelChange","blur","keyup",4,"ngIf"],["role","listbox",1,"slds-dropdown","slds-dropdown_fluid"],["size","12",4,"ngIf"],["role","presentation",1,"slds-listbox","slds-listbox_vertical"],["role","presentation","class","slds-listbox__item",3,"click",4,"ngFor","ngForOf"],[3,"fieldname"],["role","option",1,"slds-pill"],["class","slds-icon_container",4,"ngIf"],[1,"slds-pill__label"],[1,"slds-icon_container","slds-pill__remove"],[3,"icon","click"],[1,"slds-icon_container"],["size","x-small","divClass","slds-p-right--x-small",3,"module"],["system-autofocus","","type","text",1,"slds-p-horizontal--x-small",2,"min-width","12rem",3,"ngModel","title","placeholder","ngModelChange","blur","keyup"],["size","12"],["role","presentation",1,"slds-listbox__item",3,"click"],[1,"slds-listbox__option","slds-grid","slds-grid--vertical-align-center","slds-p-around--x-small"],["size","x-small",1,"slds-p-right--x-small",3,"module"],[1,"slds-media__body"],[1,"slds-listbox__option-text","slds-listbox__option-text_entity"]],template:function(e,t){1&e&&(r.YNc(0,Lo,1,2,"field-label",0),r.YNc(1,Io,3,4,"field-generic-display",1),r.YNc(2,qo,15,9,"div",2)),2&e&&(r.Q6J("ngIf",t.displayLabel),r.xp6(1),r.Q6J("ngIf",!t.isEditMode()),r.xp6(1),r.Q6J("ngIf",t.isEditable()&&t.isEditMode()))},dependencies:[i.mk,i.sg,i.O5,n.Fj,n.JJ,n.On,Z.J,gs.f,Vl.W,$l.m,u.q,C.D,M.a],styles:["input[_ngcontent-%COMP%], input[_ngcontent-%COMP%]:focus{border:none;outline:none}"]})}return fieldEmailRecipientsShort})();function Yo(e,t){if(1&e&&r._UZ(0,"field-label",3),2&e){const e=r.oxw();r.Q6J("fieldname",e.fieldname)("fieldconfig",e.fieldconfig)}}function Do(e,t){if(1&e&&(r.TgZ(0,"field-generic-display",4),r._uU(1),r.qZA()),2&e){const e=r.oxw();r.Q6J("fielddisplayclass",e.fielddisplayclass)("fieldconfig",e.fieldconfig)("editable",e.isEditable()),r.xp6(1),r.hij(" ",e.getCurrencySymbol(),"\n")}}function Uo(e,t){if(1&e&&(r.TgZ(0,"option",10),r._uU(1),r.qZA()),2&e){const e=t.$implicit;r.Q6J("value",e.id),r.xp6(1),r.AsE("",e.iso," (",e.symbol,") ")}}function Qo(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"div",5)(1,"div",6)(2,"select",7),r.NdJ("ngModelChange",(function(t){r.CHM(e);const s=r.oxw();return r.KtG(s.value=t)})),r.YNc(3,Uo,2,3,"option",8),r.qZA()(),r._UZ(4,"field-messages",9),r.qZA()}if(2&e){const e=r.oxw();r.Q6J("ngClass",e.getFieldClass()),r.xp6(2),r.Q6J("ngModel",e.value),r.xp6(1),r.Q6J("ngForOf",e.currencies),r.xp6(1),r.Q6J("fieldname",e.fieldname)}}let Ro=(()=>{class fieldCurrencies extends d.O{model;view;language;metadata;router;currency;currencies=[];constructor(e,t,s,i,n,l){super(e,t,s,i,n),this.model=e,this.view=t,this.language=s,this.metadata=i,this.router=n,this.currency=l,this.currencies=this.currency.getCurrencies()}getCurrencySymbol(){let e=-99;return this.model.getField(this.fieldname)&&(e=this.model.getField(this.fieldname)),this.currency.getCurrencySmbol(e)}static ɵfac=function(e){return new(e||fieldCurrencies)(r.Y36(w.o),r.Y36(k.e),r.Y36(x.d),r.Y36(c.Pu),r.Y36(A.F0),r.Y36(Ae.A))};static ɵcmp=r.Xpm({type:fieldCurrencies,selectors:[["field-currencies"]],features:[r.qOj],decls:3,vars:3,consts:[[3,"fieldname","fieldconfig",4,"ngIf"],[3,"fielddisplayclass","fieldconfig","editable",4,"ngIf"],["class","slds-form-element__control",3,"ngClass",4,"ngIf"],[3,"fieldname","fieldconfig"],[3,"fielddisplayclass","fieldconfig","editable"],[1,"slds-form-element__control",3,"ngClass"],[1,"slds-select_container","slds-m-vertical--xx-small"],[1,"slds-select",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[3,"fieldname"],[3,"value"]],template:function(e,t){1&e&&(r.YNc(0,Yo,1,2,"field-label",0),r.YNc(1,Do,2,4,"field-generic-display",1),r.YNc(2,Qo,5,4,"div",2)),2&e&&(r.Q6J("ngIf",t.displayLabel),r.xp6(1),r.Q6J("ngIf",!t.isEditMode()),r.xp6(1),r.Q6J("ngIf",t.isEditable()&&t.isEditMode()))},dependencies:[i.mk,i.sg,i.O5,n.YN,n.Kr,n.EJ,n.JJ,n.On,u.q,C.D,M.a],encapsulation:2})}return fieldCurrencies})();var jo=s(21e3);function Bo(e,t){if(1&e&&r._UZ(0,"field-label",3),2&e){const e=r.oxw();r.Q6J("fieldname",e.fieldname)("fieldconfig",e.fieldconfig)}}function Go(e,t){if(1&e&&(r.TgZ(0,"field-generic-display",4)(1,"div",5),r._uU(2),r.qZA()()),2&e){const e=r.oxw();r.Q6J("fielddisplayclass",e.fielddisplayclass)("fieldconfig",e.fieldconfig)("editable",e.isEditable()),r.xp6(1),r.Q6J("id",e.value),r.xp6(1),r.Oqu(e.companyName)}}function Po(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"div",6)(1,"system-input-companycodes",7),r.NdJ("ngModelChange",(function(t){r.CHM(e);const s=r.oxw();return r.KtG(s.value=t)})),r.qZA(),r._UZ(2,"field-messages",8),r.qZA()}if(2&e){const e=r.oxw();r.Q6J("ngClass",e.getFieldClass()),r.xp6(1),r.Q6J("ngModel",e.value),r.xp6(1),r.Q6J("fieldname",e.fieldname)}}let Ho=(()=>{class fieldCompanies extends d.O{model;view;language;metadata;router;backend;configuration;userpreferences;constructor(e,t,s,i,n,l,o,a){super(e,t,s,i,n),this.model=e,this.view=t,this.language=s,this.metadata=i,this.router=n,this.backend=l,this.configuration=o,this.userpreferences=a}ngOnInit(){this.setDefault()}setDefault(){if(this.view.isEditMode()&&!this.model.getField(this.fieldname))if(this.userpreferences.companyCodeId)this.value=this.userpreferences.companyCodeId;else{let e=this.configuration.getData("companycodes");e&&e.length>0&&(e.sort(((e,t)=>e.name>t.name?-1:1)),this.value=e[0].id)}}get companyName(){let e="";return this.configuration.getData("companycodes").some((t=>{if(t.id==this.model.getField(this.fieldname))return e=t.name,!0})),e}static ɵfac=function(e){return new(e||fieldCompanies)(r.Y36(w.o),r.Y36(k.e),r.Y36(x.d),r.Y36(c.Pu),r.Y36(A.F0),r.Y36($.y),r.Y36(W.C),r.Y36(ye.z))};static ɵcmp=r.Xpm({type:fieldCompanies,selectors:[["field-companies"]],features:[r.qOj],decls:3,vars:3,consts:[[3,"fieldname","fieldconfig",4,"ngIf"],[3,"fielddisplayclass","fieldconfig","editable",4,"ngIf"],["class","slds-p-vertical--xx-small",3,"ngClass",4,"ngIf"],[3,"fieldname","fieldconfig"],[3,"fielddisplayclass","fieldconfig","editable"],["system-model-popover","","module","CompanyCodes",3,"id"],[1,"slds-p-vertical--xx-small",3,"ngClass"],[3,"ngModel","ngModelChange"],[3,"fieldname"]],template:function(e,t){1&e&&(r.YNc(0,Bo,1,2,"field-label",0),r.YNc(1,Go,3,5,"field-generic-display",1),r.YNc(2,Po,3,3,"div",2)),2&e&&(r.Q6J("ngIf",t.displayLabel),r.xp6(1),r.Q6J("ngIf",!t.isEditMode()),r.xp6(1),r.Q6J("ngIf",t.isEditable()&&t.isEditMode()))},dependencies:[i.mk,i.O5,n.JJ,n.On,jo.x,ps.g,u.q,C.D,M.a],encapsulation:2})}return fieldCompanies})();var zo=s(30494);function Vo(e,t){if(1&e&&r._UZ(0,"field-label",3),2&e){const e=r.oxw();r.Q6J("fieldname",e.fieldname)("fieldconfig",e.fieldconfig)}}function $o(e,t){if(1&e&&r._UZ(0,"system-tooltip",8),2&e){const e=r.oxw(2);r.Q6J("tooltiptext",e.vatInfo)}}function Ko(e,t){if(1&e&&(r.TgZ(0,"field-generic-display",4)(1,"div",5)(2,"div",6)(3,"span"),r._uU(4),r.qZA()(),r.YNc(5,$o,1,1,"system-tooltip",7),r.qZA()()),2&e){const e=r.oxw();r.Q6J("fielddisplayclass",e.fielddisplayclass)("editable",e.isEditable())("fieldconfig",e.fieldconfig)("fieldid",e.fieldid),r.xp6(4),r.Oqu(e.value),r.xp6(1),r.Q6J("ngIf",e.isvalid)}}function Xo(e,t){if(1&e&&r._UZ(0,"system-tooltip",8),2&e){const e=r.oxw(3);r.Q6J("tooltiptext",e.vatInfo)}}function Wo(e,t){if(1&e){const e=r.EpF();r.ynx(0),r.TgZ(1,"input",14,15),r.NdJ("ngModelChange",(function(t){r.CHM(e);const s=r.oxw(2);return r.KtG(s.value=t)})),r.qZA(),r.TgZ(3,"div",16),r.YNc(4,Xo,1,1,"system-tooltip",7),r.TgZ(5,"button",17),r.NdJ("click",(function(){r.CHM(e);const t=r.oxw(2);return r.KtG(t.validate())})),r._UZ(6,"system-label",18),r.qZA()(),r.BQk()}if(2&e){const e=r.oxw(2);r.xp6(1),r.Q6J("ngModel",e.value),r.xp6(3),r.Q6J("ngIf",e.isvalid),r.xp6(1),r.Q6J("disabled",!e.cancheck)}}function ea(e,t){if(1&e&&r._UZ(0,"input",19,15),2&e){const e=r.oxw(2);r.s9C("value",e.language.getLabel("LBL_VALIDATING"))}}function ta(e,t){if(1&e&&(r.TgZ(0,"div",9)(1,"div",10),r.YNc(2,Wo,7,3,"ng-container",11),r.YNc(3,ea,2,1,"ng-template",null,12,r.W1O),r.qZA(),r._UZ(5,"field-messages",13),r.qZA()),2&e){const e=r.MAs(4),t=r.oxw();r.Q6J("ngClass",t.getFieldClass()),r.xp6(2),r.Q6J("ngIf",!t.isvalidating)("ngIfElse",e),r.xp6(3),r.Q6J("fieldname",t.fieldname)}}let sa=(()=>{class fieldVat extends d.O{model;view;language;metadata;router;backend;toast;isvalidating=!1;constructor(e,t,s,i,n,l,o){super(e,t,s,i,n),this.model=e,this.view=t,this.language=s,this.metadata=i,this.router=n,this.backend=l,this.toast=o}get vatDetailsField(){return this.fieldconfig.vatdetails?this.fieldconfig.vatdetails:"vat_details"}validate(){this.isvalidating=!0,this.backend.getRequest(`common/VIES/${this.value}`).subscribe((e=>{"success"==e.status?(!0!==e.data.valid&&this.toast.sendToast(this.language.getLabel("ERR_INVALID_VAT"),"error"),this.model.setField("vat_details",JSON.stringify(e.data))):this.toast.sendToast(this.language.getLabel("ERR_CHECK_VAT"),"error"),this.isvalidating=!1}),(()=>{this.isvalidating=!1,this.toast.sendToast(this.language.getLabel("ERR_CHECK_VAT"),"error")}))}get cancheck(){return this.value&&this.value.length>3}get isvalid(){if(!this.model.getField(this.vatDetailsField))return!1;return JSON.parse(this.model.getField(this.vatDetailsField)).valid}get vatInfo(){let e=JSON.parse(this.model.getField(this.vatDetailsField));return e.name+"\n"+e.address}static ɵfac=function(e){return new(e||fieldVat)(r.Y36(w.o),r.Y36(k.e),r.Y36(x.d),r.Y36(c.Pu),r.Y36(A.F0),r.Y36($.y),r.Y36(K.A))};static ɵcmp=r.Xpm({type:fieldVat,selectors:[["field-vat"]],features:[r.qOj],decls:3,vars:3,consts:[[3,"fieldname","fieldconfig",4,"ngIf"],["field-generic-display-notruncate","",3,"fielddisplayclass","editable","fieldconfig","fieldid",4,"ngIf"],["class","slds-form-element__control slds-grid slds-grid--align-spread",3,"ngClass",4,"ngIf"],[3,"fieldname","fieldconfig"],["field-generic-display-notruncate","",3,"fielddisplayclass","editable","fieldconfig","fieldid"],[1,"slds-size--1-of-1","slds-grid","slds-grid--vertical-align-center","slds-grid--align-spread"],[1,"slds-grow","slds-truncate"],["class","slds-m-left--x-small",3,"tooltiptext",4,"ngIf"],[1,"slds-m-left--x-small",3,"tooltiptext"],[1,"slds-form-element__control","slds-grid","slds-grid--align-spread",3,"ngClass"],[1,"slds-grid","slds-size--1-of-1"],[4,"ngIf","ngIfElse"],["validating",""],[3,"fieldname"],["type","text",1,"slds-input",3,"ngModel","ngModelChange"],["focus",""],[1,"slds-col_bump-left","slds-grid","slds-grid--vertical-align-center"],[1,"slds-button","slds-button--neutral","slds-m-left--x-small",3,"disabled","click"],["label","LBL_CHECK"],["type","text","disabled","",1,"slds-input","slds-size--1-of-1",3,"value"]],template:function(e,t){1&e&&(r.YNc(0,Vo,1,2,"field-label",0),r.YNc(1,Ko,6,6,"field-generic-display",1),r.YNc(2,ta,6,4,"div",2)),2&e&&(r.Q6J("ngIf",t.displayLabel),r.xp6(1),r.Q6J("ngIf",!t.isEditMode()),r.xp6(1),r.Q6J("ngIf",t.isEditable()&&t.isEditMode()))},dependencies:[i.mk,i.O5,n.Fj,n.JJ,n.On,te._,zo.S,u.q,C.D,M.a],encapsulation:2})}return fieldVat})();var ia=s(42067);let na=(()=>{class fieldBarcodeRenderer{metadata;libloader;code="";fieldId="";constructor(e,t){this.metadata=e,this.libloader=t,this.libloader.loadLib("js-barcode").subscribe((e=>{JsBarcode("#"+this.fieldId,this.code,{width:1,height:15,displayValue:!1})}))}ngOnChanges(){if(!this.metadata.isLibLoaded("js-barcode"))return!1;document.getElementById(this.fieldId)&&JsBarcode("#"+this.fieldId,this.code,{width:1,height:15,displayValue:!1})}static ɵfac=function(e){return new(e||fieldBarcodeRenderer)(r.Y36(c.Pu),r.Y36(ia.$))};static ɵcmp=r.Xpm({type:fieldBarcodeRenderer,selectors:[["field-barcode-renderer"]],inputs:{code:"code",fieldId:"fieldId"},features:[r.TTD],decls:1,vars:1,consts:[[3,"id"]],template:function(e,t){1&e&&(r.O4$(),r._UZ(0,"svg",0)),2&e&&r.Q6J("id",t.fieldId)},encapsulation:2})}return fieldBarcodeRenderer})();function la(e,t){if(1&e&&r._UZ(0,"field-label",8),2&e){const e=r.oxw();r.Q6J("fieldname",e.fieldname)("fieldconfig",e.fieldconfig)}}function oa(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"input",9),r.NdJ("ngModelChange",(function(t){r.CHM(e);const s=r.oxw();return r.KtG(s.value=t)})),r.qZA()}if(2&e){const e=r.oxw();r.Q6J("ngModel",e.value)}}function aa(e,t){if(1&e&&(r.TgZ(0,"div",10),r._uU(1),r.qZA()),2&e){const e=r.oxw();r.xp6(1),r.Oqu(e.value)}}let da=(()=>{class fieldBarcode extends d.O{model;view;language;metadata;router;constructor(e,t,s,i,n){super(e,t,s,i,n),this.model=e,this.view=t,this.language=s,this.metadata=i,this.router=n}isEditMode(){return this.view.isEditMode()&&this.isEditable()}isEditable(){return this.view.isEditable&&!this.fieldconfig.readonly}static ɵfac=function(e){return new(e||fieldBarcode)(r.Y36(w.o),r.Y36(k.e),r.Y36(x.d),r.Y36(c.Pu),r.Y36(A.F0))};static ɵcmp=r.Xpm({type:fieldBarcode,selectors:[["field-barcode"]],features:[r.qOj],decls:8,vars:5,consts:[[3,"fieldname","fieldconfig",4,"ngIf"],[1,"slds-form-element__control","slds-p-top--xx-small"],[1,"slds-grid","slds-grid--align-spread","slds-grid_vertical-align-center"],[1,"slds-size--1-of-2"],["class","slds-input","type","text",3,"ngModel","ngModelChange",4,"ngIf"],["class","slds-truncate",4,"ngIf"],[1,"slds-size--1-of-2","slds-text-align--right"],[3,"code","fieldId"],[3,"fieldname","fieldconfig"],["type","text",1,"slds-input",3,"ngModel","ngModelChange"],[1,"slds-truncate"]],template:function(e,t){1&e&&(r.YNc(0,la,1,2,"field-label",0),r.TgZ(1,"div",1)(2,"div",2)(3,"div",3),r.YNc(4,oa,1,1,"input",4),r.YNc(5,aa,2,1,"div",5),r.qZA(),r.TgZ(6,"div",6),r._UZ(7,"field-barcode-renderer",7),r.qZA()()()),2&e&&(r.Q6J("ngIf",t.displayLabel),r.xp6(4),r.Q6J("ngIf",t.isEditMode()),r.xp6(1),r.Q6J("ngIf",!t.isEditMode()),r.xp6(2),r.Q6J("code",t.value)("fieldId","id_"+t.fieldid))},dependencies:[i.O5,n.Fj,n.JJ,n.On,u.q,na],encapsulation:2})}return fieldBarcode})();function ra(e,t){if(1&e&&r._UZ(0,"field-label",3),2&e){const e=r.oxw();r.Q6J("fieldname",e.fieldname)("fieldconfig",e.fieldconfig)}}function ca(e,t){1&e&&r._UZ(0,"system-stencil")}function ua(e,t){if(1&e&&r._UZ(0,"system-utility-icon",13),2&e){const e=r.oxw(4);r.Q6J("icon",e.ratingIcon)("size","x-small")}}function ma(e,t){if(1&e&&(r.TgZ(0,"span"),r._uU(1),r.qZA()),2&e){const e=r.oxw(4);r.xp6(1),r.hij(" (",e.value,")")}}function ga(e,t){if(1&e&&(r.TgZ(0,"div",10),r.YNc(1,ua,1,2,"system-utility-icon",11),r.YNc(2,ma,2,1,"span",12),r.qZA()),2&e){const e=r.oxw(3);r.xp6(1),r.Q6J("ngIf",e.value),r.xp6(1),r.Q6J("ngIf",e.value)}}function ha(e,t){if(1&e&&(r.TgZ(0,"span"),r._uU(1),r.qZA()),2&e){const e=r.oxw(4);r.xp6(1),r.hij(" (",e.value,")")}}function pa(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"div",10)(1,"a",14),r.NdJ("click",(function(){r.CHM(e);const t=r.oxw(3);return r.KtG(t.goRecord())})),r._UZ(2,"system-utility-icon",13),r.YNc(3,ha,2,1,"span",12),r.qZA()()}if(2&e){const e=r.oxw(3);r.xp6(2),r.Q6J("icon",e.ratingIcon)("size","x-small"),r.xp6(1),r.Q6J("ngIf",e.value)}}function fa(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"button",15),r.NdJ("click",(function(){r.CHM(e);const t=r.oxw(3);return r.KtG(t.setEditMode())})),r._UZ(1,"system-button-icon",16),r.qZA()}2&e&&(r.xp6(1),r.Q6J("icon","edit"))}function ba(e,t){if(1&e&&(r.TgZ(0,"div",7),r.YNc(1,ga,3,2,"div",8),r.YNc(2,pa,4,3,"div",8),r.YNc(3,fa,2,1,"button",9),r.qZA()),2&e){const e=r.oxw(2);r.xp6(1),r.Q6J("ngIf",!e.displayLink()),r.xp6(1),r.Q6J("ngIf",e.displayLink()),r.xp6(1),r.Q6J("ngIf",e.isEditable())}}function _a(e,t){if(1&e&&(r.TgZ(0,"div",4),r.YNc(1,ca,1,0,"system-stencil",5),r.YNc(2,ba,4,3,"ng-template",null,6,r.W1O),r.qZA()),2&e){const e=r.MAs(3),t=r.oxw();r.Q6J("ngClass",t.fielddisplayclass),r.xp6(1),r.Q6J("ngIf",t.model.isLoading)("ngIfElse",e)}}function va(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"div",22)(1,"div",23),r.NdJ("click",(function(){const t=r.CHM(e).$implicit,s=r.oxw(2);return r.KtG(s.setRatingValue(t))})),r._UZ(2,"input",24),r.TgZ(3,"label",25),r._UZ(4,"span",26),r.qZA()()()}if(2&e){const e=t.$implicit,s=r.oxw(2);r.xp6(2),r.Q6J("checked",e==s.value),r.xp6(1),r.uIk("for",s.fieldid+e)}}function ya(e,t){if(1&e&&(r.TgZ(0,"div",17)(1,"div",18),r._UZ(2,"system-utility-icon",19),r.YNc(3,va,5,2,"div",20),r._UZ(4,"system-utility-icon",13),r.qZA(),r._UZ(5,"field-messages",21),r.qZA()),2&e){const e=r.oxw();r.Q6J("ngClass",e.css_classes),r.xp6(2),r.Q6J("icon","sentiment_negative")("size","xx-small"),r.xp6(1),r.Q6J("ngForOf",e.options),r.xp6(1),r.Q6J("icon","smiley_and_people")("size","xx-small"),r.xp6(1),r.Q6J("fieldname",e.fieldname)}}let xa=(()=>{class fieldRating extends d.O{model;view;language;metadata;router;options=["1","2","3","4","5"];constructor(e,t,s,i,n){super(e,t,s,i,n),this.model=e,this.view=t,this.language=s,this.metadata=i,this.router=n}setRatingValue(e){this.value==e?this.value="":this.value=e}get ratingIcon(){return 3==parseInt(this.value,10)?"sentiment_neutral":parseInt(this.value,10)>3?"smiley_and_people":parseInt(this.value,10)<3?"sentiment_negative":void 0}static ɵfac=function(e){return new(e||fieldRating)(r.Y36(w.o),r.Y36(k.e),r.Y36(x.d),r.Y36(c.Pu),r.Y36(A.F0))};static ɵcmp=r.Xpm({type:fieldRating,selectors:[["field-rating"]],features:[r.qOj],decls:3,vars:3,consts:[[3,"fieldname","fieldconfig",4,"ngIf"],[3,"ngClass",4,"ngIf"],["class","slds-form-element__control slds-grid slds-grid--align-spread slds-p-around--xx-small",3,"ngClass",4,"ngIf"],[3,"fieldname","fieldconfig"],[3,"ngClass"],[4,"ngIf","ngIfElse"],["displaycontent",""],[1,"slds-grid","slds-grid--vertical-align-center","slds-grid--align-spread"],["class","slds-truncate",4,"ngIf"],["style","float: right","class","slds-button slds-button--icon slds-m-left--xx-small",3,"click",4,"ngIf"],[1,"slds-truncate"],[3,"icon","size",4,"ngIf"],[4,"ngIf"],[3,"icon","size"],["href","javascript:void(0);",3,"click"],[1,"slds-button","slds-button--icon","slds-m-left--xx-small",2,"float","right",3,"click"],[3,"icon"],[1,"slds-form-element__control","slds-grid","slds-grid--align-spread","slds-p-around--xx-small",3,"ngClass"],[1,"slds-grid","slds-grid--vertical-align-center"],[1,"slds-p-right--x-small",3,"icon","size"],["class","slds-form-element__control",4,"ngFor","ngForOf"],[3,"fieldname"],[1,"slds-form-element__control"],[1,"slds-radio",3,"click"],["type","radio","id","fieldid + option",3,"checked"],[1,"slds-radio__label"],[1,"slds-radio_faux"]],template:function(e,t){1&e&&(r.YNc(0,ra,1,2,"field-label",0),r.YNc(1,_a,4,3,"div",1),r.YNc(2,ya,6,7,"div",2)),2&e&&(r.Q6J("ngIf",t.displayLabel),r.xp6(1),r.Q6J("ngIf",!t.isEditMode()),r.xp6(1),r.Q6J("ngIf",t.isEditable()&&t.isEditMode()))},dependencies:[i.mk,i.sg,i.O5,Z.J,We.B,I.r,u.q,M.a],encapsulation:2})}return fieldRating})();var wa=s(83026),Za=s(26930),Ta=s(28016);const Ca=["popover"];function ka(e,t){1&e&&r._UZ(0,"system-spinner")}function Aa(e,t){if(1&e&&(r.TgZ(0,"div",14)(1,"dl")(2,"dt"),r._UZ(3,"field-label",15),r.qZA(),r.TgZ(4,"dd"),r._UZ(5,"field-container",16),r.qZA()()()),2&e){const e=t.$implicit;r.xp6(3),r.Q6J("fieldname",e.field)("fieldconfig",e.fieldconfig),r.xp6(2),r.Q6J("field",e.field)("fieldconfig",e.fieldconfig)("fielddisplayclass","slds-truncate")}}let La=(()=>{class fieldModelFooterPopover{model;view;metadata;popovermodule="";popoverid="";popoverside="right";styles=null;mouseover=!1;hidePopoverTimeout={};popover;parentElementRef=null;self=null;modelIsLoading=!1;fields=[];constructor(e,t,s){this.model=e,this.view=t,this.metadata=s}goDetail(){this.model.goDetail()}onMouseOver(){this.mouseover=!0,this.hidePopoverTimeout&&window.clearTimeout(this.hidePopoverTimeout)}onMouseOut(){this.mouseover=!1,this.self.destroy()}get popoverStyle(){let e=this.parentElementRef.nativeElement.getBoundingClientRect(),t=this.popover.element.nativeElement.getBoundingClientRect();return e.left<t.width?this.popoverside="right":this.popoverside="left",{top:e.top+(e.height-t.height)/2+"px",left:e.left<t.width?e.left+100+"px":e.left-t.width-15+"px"}}ngOnInit(){let e=this.metadata.getComponentConfig("fieldModelFooterPopover",this.popovermodule);e.fieldset?this.fields=this.metadata.getFieldSetFields(e.fieldset):(e=this.metadata.getComponentConfig("ObjectPageHeaderDetails",this.popovermodule),e.fieldset&&(this.fields=this.metadata.getFieldSetFields(e.fieldset))),this.modelIsLoading=!0,this.model.module=this.popovermodule,this.model.id=this.popoverid,this.model.getData().subscribe((()=>{this.modelIsLoading=!1})),this.styles=this.popoverStyle}getNubbinClass(){return"left"==this.popoverside?"slds-nubbin--right":"slds-nubbin--left"}closePopover(e=!1){e?this.self.destroy():this.hidePopoverTimeout=window.setTimeout((()=>this.self.destroy()),500)}static ɵfac=function(e){return new(e||fieldModelFooterPopover)(r.Y36(w.o),r.Y36(k.e),r.Y36(c.Pu))};static ɵcmp=r.Xpm({type:fieldModelFooterPopover,selectors:[["field-model-footer-popover"]],viewQuery:function(e,t){if(1&e&&r.Gf(Ca,7,r.s_b),2&e){let e;r.iGM(e=r.CRH())&&(t.popover=e.first)}},features:[r._Bn([w.o,k.e])],decls:15,vars:6,consts:[["role","dialog",1,"slds-popover","slds-popover_large","slds-popover--panel","slds-is-fixed",3,"ngStyle","ngClass","mouseenter","mouseleave"],[1,"slds-button","slds-button_icon","slds-button_icon","slds-button_icon-small","slds-float_right","slds-popover__close",3,"click"],["icon","close"],[1,"slds-popover__header"],["popover",""],[1,"slds-media","slds-m-bottom--small","slds-media--center"],[1,"slds-media__figure"],[3,"module"],[1,"slds-media__body","slds-truncate"],[4,"ngIf"],[1,"slds-text-heading--medium","slds-hyphenate"],["href","javascript:void(0);",3,"click"],[1,"slds-grid","slds-wrap","slds-grid--pull-padded"],["class","slds-p-horizontal--small slds-size--1-of-2 slds-p-bottom--x-small",4,"ngFor","ngForOf"],[1,"slds-p-horizontal--small","slds-size--1-of-2","slds-p-bottom--x-small"],[3,"fieldname","fieldconfig"],[3,"field","fieldconfig","fielddisplayclass"]],template:function(e,t){1&e&&(r.TgZ(0,"div",0),r.NdJ("mouseenter",(function(){return t.onMouseOver()}))("mouseleave",(function(){return t.onMouseOut()})),r.TgZ(1,"button",1),r.NdJ("click",(function(){return t.closePopover(!0)})),r._UZ(2,"system-button-icon",2),r.qZA(),r.TgZ(3,"div",3,4)(5,"div",5)(6,"div",6),r._UZ(7,"system-icon",7),r.qZA(),r.TgZ(8,"div",8),r.YNc(9,ka,1,0,"system-spinner",9),r.TgZ(10,"p",10)(11,"a",11),r.NdJ("click",(function(){return t.goDetail()})),r._uU(12),r.qZA()()()(),r.TgZ(13,"div",12),r.YNc(14,Aa,6,5,"div",13),r.qZA()()()),2&e&&(r.Q6J("ngStyle",t.popoverStyle)("ngClass",t.getNubbinClass()),r.xp6(7),r.Q6J("module",t.popovermodule),r.xp6(2),r.Q6J("ngIf",t.modelIsLoading),r.xp6(3),r.Oqu(t.model.data.summary_text),r.xp6(2),r.Q6J("ngForOf",t.fields))},dependencies:[i.mk,i.sg,i.O5,i.PC,Z.J,gs.f,Vl.W,u.q,m.j],encapsulation:2})}return fieldModelFooterPopover})();function Ia(e,t){1&e&&r._UZ(0,"system-stencil")}function Sa(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"button",8),r.NdJ("click",(function(){r.CHM(e);const t=r.oxw(3);return r.KtG(t.setEditMode())})),r._UZ(1,"system-button-icon",9),r.qZA()}2&e&&(r.xp6(1),r.Q6J("icon","edit"))}function Ma(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"span")(1,"a",6),r.NdJ("click",(function(){r.CHM(e);const t=r.oxw(2);return r.KtG(t.goToDetail())})),r._uU(2),r.qZA()(),r.YNc(3,Sa,2,1,"button",7)}if(2&e){const e=r.oxw(2);r.xp6(1),r.Q6J("module",e.module)("id",e.id),r.xp6(1),r.Oqu(e.value),r.xp6(1),r.Q6J("ngIf",e.isEditable())}}function Ja(e,t){if(1&e&&(r.TgZ(0,"div",3),r.YNc(1,Ia,1,0,"system-stencil",4),r.YNc(2,Ma,4,4,"ng-template",null,5,r.W1O),r.qZA()),2&e){const e=r.MAs(3),t=r.oxw();r.Q6J("ngClass",t.fielddisplayclass),r.xp6(1),r.Q6J("ngIf",t.model.isLoading)("ngIfElse",e)}}function Oa(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"div",16)(1,"div",17)(2,"span",18)(3,"span",19),r._UZ(4,"system-icon",20),r.qZA(),r.TgZ(5,"span",21),r._uU(6),r.qZA(),r.TgZ(7,"button",22),r.NdJ("click",(function(){r.CHM(e);const t=r.oxw(2);return r.KtG(t.clear())})),r._UZ(8,"system-button-icon",9),r.qZA()()()()}if(2&e){const e=r.oxw(2);r.xp6(4),r.Q6J("module",e.module)("size","small"),r.xp6(2),r.Oqu(e.item_summary_text),r.xp6(2),r.Q6J("icon","close")}}function Na(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"div",23)(1,"div",24),r._UZ(2,"system-utility-icon",25),r.TgZ(3,"input",26),r.NdJ("ngModelChange",(function(t){r.CHM(e);const s=r.oxw(2);return r.KtG(s.search_term=t)}))("blur",(function(){r.CHM(e);const t=r.oxw(2);return r.KtG(t.closePopups())}))("focus",(function(){r.CHM(e);const t=r.oxw(2);return r.KtG(t.onFocus())})),r.qZA()()()}if(2&e){const e=r.oxw(2);r.Q6J("ngClass",e.getFieldClass()),r.xp6(2),r.Q6J("icon","search")("addclasses","slds-input__icon"),r.xp6(1),r.Q6J("ngModel",e.search_term)("placeholder","Search "+e.language.getModuleName(e.module))}}function Fa(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"field-lookup-recent",30),r.NdJ("selectedObject",(function(t){r.CHM(e);const s=r.oxw(3);return r.KtG(s.selected_item=t)})),r.qZA()}if(2&e){const e=r.oxw(3);r.Q6J("module",e.module)}}function qa(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"field-lookup-search",31),r.NdJ("searchtermChange",(function(t){r.CHM(e);const s=r.oxw(3);return r.KtG(s.search_term=t)}))("selectedObject",(function(t){r.CHM(e);const s=r.oxw(3);return r.KtG(s.selected_item=t)})),r.qZA()}if(2&e){const e=r.oxw(3);r.Q6J("module",e.module)("searchterm",e.search_term)}}function Ea(e,t){if(1&e&&(r.TgZ(0,"div",27),r.YNc(1,Fa,1,1,"field-lookup-recent",28),r.YNc(2,qa,1,2,"field-lookup-search",29),r.qZA()),2&e){const e=r.oxw(2);r.Q6J("ngStyle",e.getSearchStyle()),r.xp6(1),r.Q6J("ngIf",!e.search_term),r.xp6(1),r.Q6J("ngIf",e.search_term)}}function Ya(e,t){if(1&e&&(r.TgZ(0,"div",10)(1,"div",11),r.YNc(2,Oa,9,4,"div",12),r.YNc(3,Na,4,5,"div",13),r.qZA(),r.YNc(4,Ea,3,3,"div",14),r._UZ(5,"field-messages",15),r.qZA()),2&e){const e=r.oxw();r.Q6J("ngClass",e.getFieldClass()),r.xp6(2),r.Q6J("ngIf",e.id),r.xp6(1),r.Q6J("ngIf",!e.id),r.xp6(1),r.Q6J("ngIf",e.show_search_results),r.xp6(1),r.Q6J("fieldname",e.fieldname)}}let Da=(()=>{class FieldModuleLookupComponent extends d.O{model;view;popup;language;metadata;router;elementRef;renderer;relateIdField="";relateNameField="";module="";_selected_item=null;clickListener;show_search_results=!1;search_term="";select=new r.vpe;constructor(e,t,s,i,n,l,o,a){super(e,t,i,n,l),this.model=e,this.view=t,this.popup=s,this.language=i,this.metadata=n,this.router=l,this.elementRef=o,this.renderer=a,this.popup.closePopup$.subscribe((()=>this.closePopups()))}ngOnInit(){let e=this.metadata.getFieldDefs(this.model.module,this.fieldname);this.relateIdField=e.id_name,this.relateNameField=this.fieldname,this.module||(this.module=e.module)}onClick(e){this.elementRef.nativeElement.contains(e.target)||this.closePopups()}closePopups(){this.clickListener(),this.model.getField(this.relateIdField)&&(this.search_term=""),this.show_search_results=!1}onFocus(){this.show_search_results=!0,this.clickListener=this.renderer.listen("document","click",(e=>this.onClick(e)))}set selected_item(e){e?(this._selected_item=e.data,this.relateNameField&&this.model.setField(this.relateNameField,e.text),this.relateIdField&&this.model.setField(this.relateIdField,e.id)):(this._selected_item=null,this.relateIdField&&this.model.setField(this.relateIdField,""),this.relateNameField&&this.model.setField(this.relateNameField,"")),this.select.emit(this.selected_item)}get selected_item(){return this._selected_item}get id(){return this.selected_item&&this.selected_item.id?this.selected_item.id:this.relateIdField?this.model.getField(this.relateIdField):""}get item_summary_text(){return this.selected_item&&this.selected_item.summary_text?this.selected_item.summary_text:this.relateNameField?this.model.getField(this.relateNameField):""}goToDetail(){this.router.navigate(["/module/"+this.module+"/"+this.selected_item.id])}getSearchStyle(){if(this.show_search_results){return{width:this.elementRef.nativeElement.getBoundingClientRect().width+"px",display:"block"}}}clear(){this.search_term="",this.selected_item=null}static ɵfac=function(e){return new(e||FieldModuleLookupComponent)(r.Y36(w.o),r.Y36(k.e),r.Y36(Ms.g),r.Y36(x.d),r.Y36(c.Pu),r.Y36(A.F0),r.Y36(r.SBq),r.Y36(r.Qsj))};static ɵcmp=r.Xpm({type:FieldModuleLookupComponent,selectors:[["field-module-lookup"]],inputs:{module:"module"},outputs:{select:"select"},features:[r._Bn([Ms.g]),r.qOj],decls:3,vars:2,consts:[[1,"slds-truncate"],[3,"ngClass",4,"ngIf"],["class","slds-form-element__control slds-m-vertical--xx-small",3,"ngClass",4,"ngIf"],[3,"ngClass"],[4,"ngIf","ngIfElse"],["displaycontent",""],["href","javascript:void(0);","system-model-popover","",3,"module","id","click"],["style","float: right","class","slds-button slds-button--icon",3,"click",4,"ngIf"],[1,"slds-button","slds-button--icon",2,"float","right",3,"click"],[3,"icon"],[1,"slds-form-element__control","slds-m-vertical--xx-small",3,"ngClass"],[1,"slds-form-element","slds-lookup"],["class","slds-form-element__control",4,"ngIf"],["class","slds-form-element__control slds-grid slds-box--border",3,"ngClass",4,"ngIf"],["class","slds-lookup__menu",3,"ngStyle",4,"ngIf"],[3,"fieldname"],[1,"slds-form-element__control"],[1,"slds-pill_container"],[1,"slds-pill","slds-size--1-of-1"],[1,"slds-icon_container","slds-icon-standard-account","slds-pill__icon_container"],[3,"module","size"],[1,"slds-pill__label"],[1,"slds-button","slds-button--icon","slds-pill__remove",3,"click"],[1,"slds-form-element__control","slds-grid","slds-box--border",3,"ngClass"],[1,"slds-input-has-icon","slds-input-has-icon--right","slds-grow"],[3,"icon","addclasses"],["type","search","role","combobox",1,"slds-lookup__search-input","slds-input--bare",3,"ngModel","placeholder","ngModelChange","blur","focus"],[1,"slds-lookup__menu",3,"ngStyle"],[3,"module","selectedObject",4,"ngIf"],[3,"module","searchterm","searchtermChange","selectedObject",4,"ngIf"],[3,"module","selectedObject"],[3,"module","searchterm","searchtermChange","selectedObject"]],template:function(e,t){1&e&&(r.TgZ(0,"div",0),r.YNc(1,Ja,4,3,"div",1),r.YNc(2,Ya,6,5,"div",2),r.qZA()),2&e&&(r.xp6(1),r.Q6J("ngIf",!t.isEditMode()),r.xp6(1),r.Q6J("ngIf",t.isEditable()&&t.isEditMode()))},dependencies:[i.mk,i.O5,i.PC,n.Fj,n.JJ,n.On,Z.J,gs.f,We.B,I.r,ps.g,fs.P,bs.$,M.a],encapsulation:2})}return FieldModuleLookupComponent})();const Ua=["canvas"];function Qa(e,t){if(1&e&&r._UZ(0,"field-label",12),2&e){const e=r.oxw();r.Q6J("fieldname",e.fieldname)("fieldconfig",e.fieldconfig)}}function Ra(e,t){if(1&e&&r._UZ(0,"img",17),2&e){const e=r.oxw(2);r.Q6J("src",e.src,r.LSH)}}function ja(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"button",18),r.NdJ("click",(function(){r.CHM(e);const t=r.oxw(2);return r.KtG(t.setEditMode())})),r._UZ(1,"system-button-icon",9),r.qZA()}2&e&&(r.xp6(1),r.Q6J("icon","edit"))}const Ba=function(e){return{width:e}};function Ga(e,t){if(1&e&&(r.TgZ(0,"div")(1,"div",13),r.YNc(2,Ra,1,1,"img",14),r.TgZ(3,"div",15),r.YNc(4,ja,2,1,"button",16),r.qZA()()()),2&e){const e=r.oxw();r.xp6(1),r.Q6J("ngStyle",r.VKq(3,Ba,e.signature_width+"px")),r.xp6(1),r.Q6J("ngIf",e.value),r.xp6(2),r.Q6J("ngIf",e.isEditable())}}function Pa(e,t){if(1&e&&(r.TgZ(0,"div",19),r._uU(1),r.qZA()),2&e){const e=r.oxw();r.xp6(1),r.hij(" ",e.model.data[e.display_name_field]," ")}}const Ha=function(e){return{"slds-hide":e}};let za=(()=>{class FieldSignatureComponent extends d.O{model;view;language;metadata;libloader;router;canvas;pad;display_name_field;signature_height=200;signature_width=400;constructor(e,t,s,i,n,l){super(e,t,s,i,l),this.model=e,this.view=t,this.language=s,this.metadata=i,this.libloader=n,this.router=l}ngAfterViewInit(){this.config&&(this.config.signature_width>0&&(this.signature_width=this.config.signature_width),this.config.signature_height>0&&(this.signature_height=this.config.signature_height),this.display_name_field=this.config.display_name_field),this.libloader.loadLib("signature_pad").subscribe((e=>{this.pad=new SignaturePad(this.canvas.nativeElement,{backgroundColor:"rgb(255, 255, 255)"}),this.model.isLoading||!this.model.id?this.model.data$.subscribe((e=>{this.pad.fromDataURL(this.src)})):this.pad.fromDataURL(this.src)}))}get config(){return this.fieldconfig}get src(){return this.value?"data:image/jpeg;base64,"+this.value:""}undo(){let e=this.pad.toData();e&&(e.pop(),this.pad.fromData(e),this.convert())}clear(){this.pad.clear(),this.convert()}convert(){let e=this.pad.toDataURL("image/jpeg"),t=e.split("base64,");this.pad.isEmpty()?this.value="":2!=t.length?(console.warn("Failed to parse base64 code from data:",e),this.value=""):(e=t[1],this.value=e)}static ɵfac=function(e){return new(e||FieldSignatureComponent)(r.Y36(w.o),r.Y36(k.e),r.Y36(x.d),r.Y36(c.Pu),r.Y36(ia.$),r.Y36(A.F0))};static ɵcmp=r.Xpm({type:FieldSignatureComponent,selectors:[["field-signature"]],viewQuery:function(e,t){if(1&e&&r.Gf(Ua,7),2&e){let e;r.iGM(e=r.CRH())&&(t.canvas=e.first)}},features:[r.qOj],decls:13,vars:13,consts:[[3,"fieldname","fieldconfig",4,"ngIf"],[4,"ngIf"],[3,"ngClass"],[3,"ngStyle"],[1,"slds-float_left"],[2,"border","1px solid",3,"width","height","mouseup","touchend"],["canvas",""],[2,"position","relative","bottom","3px","right","3px"],["title","undo",1,"slds-button","slds-button--icon",3,"click"],[3,"icon"],["title","clear",1,"slds-button","slds-button--icon",3,"click"],["class","slds-text-align--center",4,"ngIf"],[3,"fieldname","fieldconfig"],[1,"slds-float_left",3,"ngStyle"],[3,"src",4,"ngIf"],[2,"position","absolute","top","1px","right","1px"],["class","slds-button slds-button--icon",3,"click",4,"ngIf"],[3,"src"],[1,"slds-button","slds-button--icon",3,"click"],[1,"slds-text-align--center"]],template:function(e,t){1&e&&(r.YNc(0,Qa,1,2,"field-label",0),r.YNc(1,Ga,5,5,"div",1),r.TgZ(2,"div",2)(3,"div",3)(4,"div",4)(5,"canvas",5,6),r.NdJ("mouseup",(function(){return t.convert()}))("touchend",(function(){return t.convert()})),r.qZA(),r.TgZ(7,"div",7)(8,"button",8),r.NdJ("click",(function(){return t.undo()})),r._UZ(9,"system-button-icon",9),r.qZA(),r.TgZ(10,"button",10),r.NdJ("click",(function(){return t.clear()})),r._UZ(11,"system-button-icon",9),r.qZA()()(),r.YNc(12,Pa,2,1,"div",11),r.qZA()()),2&e&&(r.Q6J("ngIf",t.displayLabel),r.xp6(1),r.Q6J("ngIf",!t.isEditMode()),r.xp6(1),r.Q6J("ngClass",r.VKq(9,Ha,!t.isEditMode())),r.xp6(1),r.Q6J("ngStyle",r.VKq(11,Ba,t.signature_width+"px")),r.xp6(2),r.Q6J("width",t.signature_width)("height",t.signature_height),r.xp6(4),r.Q6J("icon","back"),r.xp6(2),r.Q6J("icon","close"),r.xp6(1),r.Q6J("ngIf",t.display_name_field))},dependencies:[i.mk,i.O5,i.PC,Z.J,u.q],encapsulation:2})}return FieldSignatureComponent})();var Va=s(91591),$a=s(64730);const Ka=function(e){return{"slds-theme--shade":e}};function Xa(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"div",7)(1,"div",8),r.NdJ("mouseenter",(function(){const t=r.CHM(e).$implicit,s=r.oxw(2);return r.KtG(s.select(0,t))}))("click",(function(){const t=r.CHM(e).$implicit,s=r.oxw(2);return r.KtG(s.choose(0,t))})),r.TgZ(2,"span",9),r._UZ(3,"system-label",10),r.qZA()()()}if(2&e){const e=t.$implicit,s=r.oxw(2);let i;r.Q6J("ngClass",r.VKq(4,Ka,s.isCategorySelected(0,e))),r.xp6(1),r.Q6J("title",null!==(i=e.node_description)&&void 0!==i?i:e.node_name),r.xp6(1),r.Q6J("ngStyle",s.nodeStyle(e)),r.xp6(1),r.Q6J("label",e.node_name)}}function Wa(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"div",7)(1,"div",8),r.NdJ("mouseenter",(function(){const t=r.CHM(e).$implicit,s=r.oxw(2);return r.KtG(s.select(1,t))}))("click",(function(){const t=r.CHM(e).$implicit,s=r.oxw(2);return r.KtG(s.choose(1,t))})),r.TgZ(2,"span",9),r._UZ(3,"system-label",10),r.qZA()()()}if(2&e){const e=t.$implicit,s=r.oxw(2);let i;r.Q6J("ngClass",r.VKq(4,Ka,s.isCategorySelected(1,e))),r.xp6(1),r.Q6J("title",null!==(i=e.node_description)&&void 0!==i?i:e.node_name),r.xp6(1),r.Q6J("ngStyle",s.nodeStyle(e)),r.xp6(1),r.Q6J("label",e.node_name)}}function ed(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"div",7)(1,"div",8),r.NdJ("mouseenter",(function(){const t=r.CHM(e).$implicit,s=r.oxw(2);return r.KtG(s.select(2,t))}))("click",(function(){const t=r.CHM(e).$implicit,s=r.oxw(2);return r.KtG(s.choose(2,t))})),r.TgZ(2,"span",9),r._UZ(3,"system-label",10),r.qZA()()()}if(2&e){const e=t.$implicit,s=r.oxw(2);let i;r.Q6J("ngClass",r.VKq(4,Ka,s.isCategorySelected(2,e))),r.xp6(1),r.Q6J("title",null!==(i=e.node_description)&&void 0!==i?i:e.node_name),r.xp6(1),r.Q6J("ngStyle",s.nodeStyle(e)),r.xp6(1),r.Q6J("label",e.node_name)}}function td(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"div",7)(1,"div",8),r.NdJ("mouseenter",(function(){const t=r.CHM(e).$implicit,s=r.oxw(2);return r.KtG(s.select(3,t))}))("click",(function(){const t=r.CHM(e).$implicit,s=r.oxw(2);return r.KtG(s.choose(3,t))})),r.TgZ(2,"span",9),r._UZ(3,"system-label",10),r.qZA()()()}if(2&e){const e=t.$implicit,s=r.oxw(2);let i;r.Q6J("ngClass",r.VKq(4,Ka,s.isCategorySelected(3,e))),r.xp6(1),r.Q6J("title",null!==(i=e.node_description)&&void 0!==i?i:e.node_name),r.xp6(1),r.Q6J("ngStyle",s.nodeStyle(e)),r.xp6(1),r.Q6J("label",e.node_name)}}function sd(e,t){if(1&e&&(r.TgZ(0,"div",2)(1,"div",3)(2,"div",4),r.YNc(3,Xa,4,6,"div",5),r.qZA(),r.TgZ(4,"div",4),r.YNc(5,Wa,4,6,"div",5),r.qZA(),r.TgZ(6,"div",4),r.YNc(7,ed,4,6,"div",5),r.qZA(),r.TgZ(8,"div",6),r.YNc(9,td,4,6,"div",5),r.qZA()()()),2&e){const e=r.oxw();r.xp6(1),r.Q6J("@treeanimation",e.shifttree)("ngStyle",e.boxStyle),r.xp6(2),r.Q6J("ngForOf",e.levelCategories(0))("ngForTrackBy",e.trackByFn),r.xp6(2),r.Q6J("ngForOf",e.levelCategories(1))("ngForTrackBy",e.trackByFn),r.xp6(2),r.Q6J("ngForOf",e.levelCategories(2))("ngForTrackBy",e.trackByFn),r.xp6(2),r.Q6J("ngForOf",e.levelCategories(3))("ngForTrackBy",e.trackByFn)}}function id(e,t){if(1&e&&(r.TgZ(0,"li",17),r._UZ(1,"system-label",10),r.qZA()),2&e){const e=t.$implicit;let s;r.Q6J("title",null!==(s=e.node_description)&&void 0!==s?s:e.node_name),r.xp6(1),r.Q6J("label",e.node_name)}}function nd(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"div",14)(1,"ul",15),r.NdJ("click",(function(){const t=r.CHM(e).$implicit,s=r.oxw(2);return r.KtG(s.selectNode(t))})),r.YNc(2,id,2,2,"li",16),r.qZA()()}if(2&e){const e=t.$implicit;r.xp6(2),r.Q6J("ngForOf",e.levels)}}function ld(e,t){1&e&&(r.TgZ(0,"div",18)(1,"system-illustration-no-records"),r._UZ(2,"system-label",19),r.qZA()())}function od(e,t){if(1&e&&(r.TgZ(0,"div",11),r.YNc(1,nd,3,1,"div",12),r.YNc(2,ld,3,0,"div",13),r.qZA()),2&e){const e=r.oxw();r.xp6(1),r.Q6J("ngForOf",e.getMatchedNodes())("ngForTrackBy",e.trackByCatId),r.xp6(1),r.Q6J("ngIf",0==e.getMatchedNodes().length)}}function ad(e,t){if(1&e&&(r.TgZ(0,"li",17),r._UZ(1,"system-label",10),r.qZA()),2&e){const e=t.$implicit;let s;r.Q6J("title",null!==(s=e.node_description)&&void 0!==s?s:e.node_name),r.xp6(1),r.Q6J("label",e.node_name)}}function dd(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"div",14)(1,"ul",15),r.NdJ("click",(function(){const t=r.CHM(e).$implicit,s=r.oxw(2);return r.KtG(s.selectNode(t))})),r.YNc(2,ad,2,2,"li",16),r.qZA()()}if(2&e){const e=t.$implicit;r.xp6(2),r.Q6J("ngForOf",e.levels)}}function rd(e,t){1&e&&(r.TgZ(0,"div",18)(1,"system-illustration-no-records"),r._UZ(2,"system-label",19),r.qZA()())}function cd(e,t){if(1&e&&(r.TgZ(0,"div",11),r.YNc(1,dd,3,1,"div",12),r.YNc(2,rd,3,0,"div",13),r.qZA()),2&e){const e=r.oxw();r.xp6(1),r.Q6J("ngForOf",e.getFavoriteNodes())("ngForTrackBy",e.trackByCatId),r.xp6(1),r.Q6J("ngIf",0==e.getFavoriteNodes().length)}}let ud=(()=>{class fieldCategoriesTree{model;backend;config;elementref;language;levels=[void 0,void 0,void 0,void 0];category=new r.vpe;loading=!0;categories=[];sortby="node_key";searchTerm;searchFavorites=!1;constructor(e,t,s,i,n){this.model=e,this.backend=t,this.config=s,this.elementref=i,this.language=n}get shifttree(){return!!this.levels[1]&&this.has4Levels(this.levels[1])}has4Levels(e){for(let t of this.categories.filter((t=>t.parent_id==e)))if(this.categories.filter((e=>e.parent_id==t.id)).length>0)return!0;return!1}get boxStyle(){let e=this.elementref.nativeElement.getBoundingClientRect();return{height:window.innerHeight-e.top-30+"px"}}nodeStyle(e){return e.selectable?{cursor:"pointer","text-decoration":"underline"}:{cursor:"default"}}hasChildren(e){return this.categories.filter((t=>t.parent_id==e.id)).length>0}levelCategories(e){return 0===e?this.sortCategories(this.categories.filter((e=>!e.parent_id||""==e.parent_id)),this.sortby):this.levels[e-1]?this.sortCategories(this.categories.filter((t=>t.parent_id==this.levels[e-1])),this.sortby):[]}sortCategories(e=[],t="node_key"){return"node_name"==t?this.sortCategoriesByTranslation(e):this.sortCategoriesByKey(e)}sortCategoriesByTranslation(e=[]){return e.sort(((e,t)=>this.language.getLabel(e.node_name).localeCompare(this.language.getLabel(t.node_name))))}sortCategoriesByKey(e=[]){return e.sort(((e,t)=>parseFloat(e.node_key)>parseFloat(t.node_key)?1:-1))}getMatchedNodes(){return this.buildSelectableCategories().filter((e=>this.matchTerms(e.levels.map((e=>this.language.getLabel(e.node_name))).join(),this.searchTerm))).sort(((e,t)=>this.compareFullCategories(e.levels,t.levels)))}matchTerms(e,t){let s=t.split(" ").map((e=>e.trim()));for(let t of s)if(e.toLowerCase().indexOf(t.toLowerCase())<0)return!1;return!0}getFavoriteNodes(){let e=this.buildSelectableCategories(!0);return this.searchTerm?e.filter((e=>this.matchTerms(e.levels.map((e=>e.node_name)).join(),this.searchTerm))):e.sort(((e,t)=>this.compareFullCategories(e.levels,t.levels)))}buildSelectableCategories(e=!1){let t=[];for(let s of this.categories.filter((e=>e.selectable))){let i=this.buildFullCategories(s);(!0!==e||i.filter((e=>e.favorite)).length>0)&&t.push({levels:i,cat:s})}return t}buildFullCategories(e){let t=e,s=[{id:t.id,node_name:t.node_name,favorite:t.favorite,node_key:t.node_key}];for(;t.parent_id&&(t=this.categories.find((e=>e.id==t.parent_id)),t);)s.unshift({id:t.id,node_name:t.node_name,favorite:t.favorite,node_key:t.node_key});return s}compareFullCategories(e,t,s="node_name"){return e.map((e=>e.node_name)).join().localeCompare(t.map((e=>e.node_name)).join())}compareFullCategorylevels(e,t,s,i="node_key"){}compareNodes(e,t,s="node_key"){switch(s){case"node_name":return e.node_name.localeCompare(t.node_name);case"node_key":return e.node_key==t.node_key?0:parseFloat(e.node_key)>parseFloat(t.node_key)?1:-1}}select(e,t){for(this.levels[e]=t.id,e++;e<3;)this.levels[e]=void 0,e++}isCategorySelected(e,t){return this.levels[e]==t.id}choose(e,t){t.selectable&&(this.select(e,t),this.category.emit({levels:[...this.levels],category:t}),this.levels=[void 0,void 0,void 0,void 0])}selectNode(e){let t=[];for(let s of e.levels)t.push(s.id);this.category.emit({levels:[...t],category:e.cat}),this.searchTerm="",this.searchFavorites=!1}trackByFn(e,t){return t.id}trackByCatId(e,t){return t.cat.id}static ɵfac=function(e){return new(e||fieldCategoriesTree)(r.Y36(w.o),r.Y36($.y),r.Y36(W.C),r.Y36(r.SBq),r.Y36(x.d))};static ɵcmp=r.Xpm({type:fieldCategoriesTree,selectors:[["field-categories-tree"]],inputs:{categories:"categories",sortby:"sortby",searchTerm:"searchTerm",searchFavorites:"searchFavorites"},outputs:{category:"category"},decls:3,vars:3,consts:[["style","overflow: hidden",4,"ngIf"],["class","slds-dropdown_length-10",4,"ngIf"],[2,"overflow","hidden"],[1,"slds-grid",3,"ngStyle"],[1,"slds-col","slds-size--1-of-3","slds-border--right","slds-height_full","slds-scrollable--y"],[3,"ngClass",4,"ngFor","ngForOf","ngForTrackBy"],[1,"slds-col","slds-size--1-of-3","slds-height_full","slds-scrollable--y"],[3,"ngClass"],[1,"slds-truncate","slds-p-around--xx-small",3,"title","mouseenter","click"],[3,"ngStyle"],[3,"label"],[1,"slds-dropdown_length-10"],["class","slds-truncate slds-p-around--xx-small","style","cursor: pointer",4,"ngFor","ngForOf","ngForTrackBy"],["class","slds-height_full slds-align--absolute-center slds-p-around--x-large",4,"ngIf"],[1,"slds-truncate","slds-p-around--xx-small",2,"cursor","pointer"],[1,"slds-list_horizontal","slds-has-dividers_left","slds-has-block-links",3,"click"],["class","slds-item",3,"title",4,"ngFor","ngForOf"],[1,"slds-item",3,"title"],[1,"slds-height_full","slds-align--absolute-center","slds-p-around--x-large"],["label","LBL_NO_RECORDS_FOUND"]],template:function(e,t){1&e&&(r.YNc(0,sd,10,10,"div",0),r.YNc(1,od,3,3,"div",1),r.YNc(2,cd,3,3,"div",1)),2&e&&(r.Q6J("ngIf",!t.searchTerm&&!t.searchFavorites),r.xp6(1),r.Q6J("ngIf",t.searchTerm&&!t.searchFavorites),r.xp6(1),r.Q6J("ngIf",t.searchFavorites))},dependencies:[i.mk,i.sg,i.O5,i.PC,$a.C,te._],encapsulation:2,data:{animation:[(0,Va.X$)("treeanimation",[(0,Va.SB)("true",(0,Va.oB)({"margin-left":"-34%","margin-right":"34%"})),(0,Va.SB)("false",(0,Va.oB)({"margin-left":"0px","margin-right":"0px"})),(0,Va.eR)("true => false",[(0,Va.jt)(".2s")]),(0,Va.eR)("false => true",[(0,Va.jt)(".2s")])])]}})}return fieldCategoriesTree})();const md=["focusEl"],gd=["categoryTree"];function hd(e,t){if(1&e&&r._UZ(0,"field-label",3),2&e){const e=r.oxw();r.Q6J("fieldname",e.fieldname)("fieldconfig",e.fieldconfig)}}function pd(e,t){if(1&e&&(r.TgZ(0,"div",7),r._uU(1),r.qZA()),2&e){const e=r.oxw(2);r.Q6J("title",e.display_value),r.xp6(1),r.Oqu(e.display_value)}}function fd(e,t){1&e&&r._UZ(0,"system-stencil")}function bd(e,t){if(1&e&&(r.TgZ(0,"field-generic-display",4),r.YNc(1,pd,2,2,"div",5),r.YNc(2,fd,1,0,"ng-template",null,6,r.W1O),r.qZA()),2&e){const e=r.MAs(3),t=r.oxw();r.Q6J("fielddisplayclass",t.fielddisplayclass)("fieldconfig",t.fieldconfig)("editable",t.isEditable()),r.xp6(1),r.Q6J("ngIf",t.categories.length>0)("ngIfElse",e)}}function _d(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"button",19),r.NdJ("click",(function(t){r.CHM(e);const s=r.oxw(3);return r.KtG(s.setFavorites(t))})),r._UZ(1,"system-button-icon",20),r.qZA()}if(2&e){const e=r.oxw(3);r.xp6(1),r.Q6J("addclasses",e.searchfavorites?"":"slds-icon-text-light")}}function vd(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"div",15)(1,"input",16,17),r.NdJ("focus",(function(){r.CHM(e);const t=r.oxw(2);return r.KtG(t.openDropDown())}))("click",(function(){r.CHM(e);const t=r.oxw(2);return r.KtG(t.openDropDown())}))("ngModelChange",(function(t){r.CHM(e);const s=r.oxw(2);return r.KtG(s.tempsearchterm=t)}))("keyup",(function(t){r.CHM(e);const s=r.oxw(2);return r.KtG(s.search(t))})),r.qZA(),r.YNc(3,_d,2,1,"button",18),r.qZA()}if(2&e){const e=r.oxw(2);r.xp6(1),r.s9C("placeholder",e.language.getLabel("LBL_SEARCH")),r.Q6J("disabled",0==e.categories.length)("ngModel",e.tempsearchterm),r.xp6(2),r.Q6J("ngIf",e.hasFavorites)}}function yd(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"div",15)(1,"div",21)(2,"span",22),r.NdJ("dblclick",(function(){r.CHM(e);const t=r.oxw(2);return t.clearCategories(),r.KtG(t.focusInputField())})),r.TgZ(3,"span",23),r._uU(4),r.qZA(),r.TgZ(5,"button",24),r.NdJ("click",(function(){r.CHM(e);const t=r.oxw(2);return r.KtG(t.clearCategories())})),r._UZ(6,"system-button-icon",25),r.qZA()()()()}if(2&e){const e=r.oxw(2);r.xp6(4),r.Oqu(e.display_value),r.xp6(2),r.Q6J("icon","close")}}function xd(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"field-categories-tree",26),r.NdJ("category",(function(t){r.CHM(e);const s=r.oxw(2);return r.KtG(s.chooseCategories(t))})),r.qZA()}if(2&e){const e=r.oxw(2);r.Q6J("categories",e.categories)("sortby",e.sortby)("searchTerm",e.searchterm)("searchFavorites",e.searchfavorites)}}const wd=function(e){return{"slds-is-open":e}};function Zd(e,t){if(1&e&&(r.TgZ(0,"div",8)(1,"div",9)(2,"div",10)(3,"div",11),r.YNc(4,vd,4,4,"div",12),r.YNc(5,yd,7,2,"div",12),r.TgZ(6,"div",13),r.YNc(7,xd,1,4,"field-categories-tree",14),r.qZA()()()()()),2&e){const e=r.oxw();r.Q6J("ngClass",e.getFieldClass()),r.xp6(3),r.Q6J("ngClass",r.VKq(5,wd,e.dropDownOpen)),r.xp6(1),r.Q6J("ngIf",!e.display_value),r.xp6(1),r.Q6J("ngIf",e.display_value),r.xp6(2),r.Q6J("ngIf",e.categories.length>0)}}let Td=(()=>{class fieldCategories extends d.O{model;view;language;metadata;router;backend;config;elementRef;renderer;changeDetectorRef;broadcast;searchterm;tempsearchterm;searchfavorites=!1;clickListener;dropDownOpen=!1;searchTimeOut=void 0;treeid;categoryFields=[];setFieldName=!1;escKeyListener;focusElement;categoryTree;constructor(e,t,s,i,n,l,o,a,d,r,c){super(e,t,s,i,n),this.model=e,this.view=t,this.language=s,this.metadata=i,this.router=n,this.backend=l,this.config=o,this.elementRef=a,this.renderer=d,this.changeDetectorRef=r,this.broadcast=c}ngOnInit(){super.ngOnInit();let e=this.config.getData("categories"),t=this.metadata.getModuleDefs(this.model.module);if(t.categorytrees){let e=t.categorytrees.find((e=>e.module_field==this.fieldname));e&&(this.treeid=e.syscategorytree_id,e.module_field_c1&&this.categoryFields.push(e.module_field_c1),e.module_field_c2&&this.categoryFields.push(e.module_field_c2),e.module_field_c3&&this.categoryFields.push(e.module_field_c3),e.module_field_c4&&this.categoryFields.push(e.module_field_c4),this.setFieldName=!0)}this.treeid||(this.treeid=this.fieldconfig.treeid,this.fieldconfig.category1&&this.categoryFields.push(this.fieldconfig.category1),this.fieldconfig.category2&&this.categoryFields.push(this.fieldconfig.category2),this.fieldconfig.category3&&this.categoryFields.push(this.fieldconfig.category3),this.fieldconfig.category4&&this.categoryFields.push(this.fieldconfig.category4)),!this.treeid||e&&e[this.treeid]||(e||(e={}),e[this.treeid]=[],this.config.setData("categories",e),this.backend.getRequest(`configuration/spiceui/core/categorytrees/${this.treeid}/categorytreenodes`).subscribe((t=>{e[this.treeid]=t,this.config.setData("categories",e),this.broadcast.broadcastMessage("categories.loaded",this.treeid)}))),this.subscriptions.add(this.broadcast.message$.subscribe((e=>{"categories.loaded"===e.messagetype&&e.messagedata===this.treeid&&this.changeDetectorRef.detectChanges()})))}ngOnDestroy(){super.ngOnDestroy(),this.escKeyListener&&this.escKeyListener(),this.clickListener&&this.clickListener()}get categories(){if(!this.treeid)return[];let e=this.config.getData("categories");return e?e[this.treeid]:[]}get sortby(){return this.fieldconfig.sortby}get hasFavorites(){return this.categories.filter((e=>e.favorite)).length>0}openDropDown(){this.dropDownOpen||(this.dropDownOpen=!0,this.subscribeToESCKeyUp())}subscribeToESCKeyUp(){this.escKeyListener=this.renderer.listen("document","keyup",(e=>{"Escape"==e.key&&(this.dropDownOpen=!1,this.resetTmpSearchTerm())}))}onClick(e){this.elementRef.nativeElement.contains(e.target)||(this.dropDownOpen=!1,this.clickListener())}get display_value(){let e,t=[],s=0;for(;s<this.categoryFields.length;){let i=this.model.getField(this.categoryFields[s]);if(!i)break;let n=this.categories.find((t=>t.node_key==i&&(!(!e&&""!=t.parent_id&&t.parent_id)&&(!e||t.parent_id==e))));if(!n)break;t.push(this.language.getLabel(n.node_name)),e=n.id,s++}let i=0==t.length?void 0:t.join("/");return i!=this.value&&this.model.setField(this.fieldname,i,!0),i}setFavorites(e){e.stopPropagation(),e.preventDefault(),this.searchfavorites=!this.searchfavorites,this.dropDownOpen||(this.dropDownOpen=!0)}chooseCategories(e){let t={},s=0,i=e.levels;for(;s<this.categoryFields.length;)i[s]?t[this.categoryFields[s]]=this.categories.find((e=>e.id==i[s])).node_key:t[this.categoryFields[s]]=void 0,s++;this.fieldconfig.addparams&&e.category?.add_params&&(t[this.fieldconfig.addparams]=e.category.add_params),this.model.setFields(t,!0),t=[],this.setFieldName&&(t[this.fieldname]=this.display_value),this.fieldconfig.setname&&(t.name=this.display_value),Object.getOwnPropertyNames(t).length>0&&this.model.setFields(t),this.dropDownOpen=!1,this.searchterm=void 0,this.searchfavorites=!1,this.escKeyListener&&this.escKeyListener(),this.clickListener&&this.clickListener()}clearCategories(){let e=0,t={};for(;e<this.categoryFields.length;)t[this.categoryFields[e]]="",e++;t[this.fieldname]=void 0,this.model.setFields(t),this.resetTmpSearchTerm()}focusInputField(){setTimeout((()=>{this.renderer.selectRootElement(this.focusElement.nativeElement).focus()}),200)}onPageClick(e){this.elementRef.nativeElement.contains(e)||(this.dropDownOpen=!1)}search(e){this.searchTimeOut&&window.clearTimeout(this.searchTimeOut),this.searchTimeOut=window.setTimeout((()=>{this.searchterm=this.tempsearchterm}),1e3),""!=this.tempsearchterm&&this.openDropDown()}resetTmpSearchTerm(){this.tempsearchterm=""}static ɵfac=function(e){return new(e||fieldCategories)(r.Y36(w.o),r.Y36(k.e),r.Y36(x.d),r.Y36(c.Pu),r.Y36(A.F0),r.Y36($.y),r.Y36(W.C),r.Y36(r.SBq),r.Y36(r.Qsj),r.Y36(r.sBO),r.Y36(X.f))};static ɵcmp=r.Xpm({type:fieldCategories,selectors:[["field-categories"]],viewQuery:function(e,t){if(1&e&&(r.Gf(md,5),r.Gf(gd,5)),2&e){let e;r.iGM(e=r.CRH())&&(t.focusElement=e.first),r.iGM(e=r.CRH())&&(t.categoryTree=e.first)}},hostBindings:function(e,t){1&e&&r.NdJ("click",(function(e){return t.onPageClick(e.target)}),!1,r.evT)},features:[r.qOj],decls:3,vars:3,consts:[[3,"fieldname","fieldconfig",4,"ngIf"],[3,"fielddisplayclass","fieldconfig","editable",4,"ngIf"],["class","slds-form-element__control slds-m-vertical--xx-small",3,"ngClass",4,"ngIf"],[3,"fieldname","fieldconfig"],[3,"fielddisplayclass","fieldconfig","editable"],[3,"title",4,"ngIf","ngIfElse"],["nocategories",""],[3,"title"],[1,"slds-form-element__control","slds-m-vertical--xx-small",3,"ngClass"],[1,"slds-form-element__control"],[1,"slds-combobox_container"],[1,"slds-combobox","slds-dropdown-trigger","slds-dropdown-trigger_click",3,"ngClass"],["class","slds-combobox__form-element slds-input-has-icon slds-input-has-icon_right",4,"ngIf"],["role","listbox",1,"slds-dropdown","slds-dropdown_fluid"],[3,"categories","sortby","searchTerm","searchFavorites","category",4,"ngIf"],[1,"slds-combobox__form-element","slds-input-has-icon","slds-input-has-icon_right"],[1,"slds-input","slds-combobox__input",3,"disabled","placeholder","ngModel","focus","click","ngModelChange","keyup"],["focusEl",""],["class","slds-button slds-button--icon slds-input__icon slds-input__icon_right",3,"click",4,"ngIf"],[1,"slds-button","slds-button--icon","slds-input__icon","slds-input__icon_right",3,"click"],["icon","favorite",3,"addclasses"],[1,"slds-pill_container"],[1,"slds-pill","slds-size--1-of-1",3,"dblclick"],[1,"slds-pill__label"],[1,"slds-button","slds-button--icon","slds-pill__remove",3,"click"],[3,"icon"],[3,"categories","sortby","searchTerm","searchFavorites","category"]],template:function(e,t){1&e&&(r.YNc(0,hd,1,2,"field-label",0),r.YNc(1,bd,4,5,"field-generic-display",1),r.YNc(2,Zd,8,7,"div",2)),2&e&&(r.Q6J("ngIf",t.displayLabel),r.xp6(1),r.Q6J("ngIf",!t.isEditMode()),r.xp6(1),r.Q6J("ngIf",t.isEditable()&&t.isEditMode()))},dependencies:[i.mk,i.O5,n.Fj,n.JJ,n.On,Z.J,We.B,u.q,C.D,ud],encapsulation:2})}return fieldCategories})();function Cd(e,t){if(1&e&&r._UZ(0,"field-label",4),2&e){const e=r.oxw();r.Q6J("fieldname",e.fieldname)("fieldconfig",e.fieldconfig)}}function kd(e,t){if(1&e&&(r.TgZ(0,"span",5),r._uU(1),r.qZA()),2&e){const e=r.oxw();r.Q6J("title",e.display_value),r.xp6(1),r.Oqu(e.display_value)}}function Ad(e,t){1&e&&r._UZ(0,"system-stencil")}let Ld=(()=>{class fieldCategory extends d.O{model;view;language;metadata;router;backend;config;elementRef;renderer;treeid;categoryFields=[];constructor(e,t,s,i,n,l,o,a,d){super(e,t,s,i,n),this.model=e,this.view=t,this.language=s,this.metadata=i,this.router=n,this.backend=l,this.config=o,this.elementRef=a,this.renderer=d}ngOnInit(){super.ngOnInit();let e=this.config.getData("categories"),t=this.metadata.getModuleDefs(this.model.module);if(t.categorytrees){let e=t.categorytrees.find((e=>e.module_field_c1==this.fieldname||e.module_field_c2==this.fieldname||e.module_field_c3==this.fieldname||e.module_field_c4==this.fieldname));e&&(this.treeid=e.syscategorytree_id)}!this.treeid||e&&e[this.treeid]||(e||(e={}),e[this.treeid]=[],this.config.setData("categories",e),this.backend.getRequest(`configuration/spiceui/core/categorytrees/${this.treeid}/categorytreenodes`).subscribe((t=>{e[this.treeid]=t,this.config.setData("categories",e)})))}get categories(){let e=this.config.getData("categories");return e?e[this.treeid]:[]}get display_value(){let e=this.categories.find((e=>e.node_key==this.value));return e?this.language.getLabel(e.node_name):this.value}static ɵfac=function(e){return new(e||fieldCategory)(r.Y36(w.o),r.Y36(k.e),r.Y36(x.d),r.Y36(c.Pu),r.Y36(A.F0),r.Y36($.y),r.Y36(W.C),r.Y36(r.SBq),r.Y36(r.Qsj))};static ɵcmp=r.Xpm({type:fieldCategory,selectors:[["field-category"]],features:[r.qOj],decls:5,vars:6,consts:[[3,"fieldname","fieldconfig",4,"ngIf"],[3,"fielddisplayclass","fieldconfig","editable"],[3,"title",4,"ngIf","ngIfElse"],["nocategories",""],[3,"fieldname","fieldconfig"],[3,"title"]],template:function(e,t){if(1&e&&(r.YNc(0,Cd,1,2,"field-label",0),r.TgZ(1,"field-generic-display",1),r.YNc(2,kd,2,2,"span",2),r.YNc(3,Ad,1,0,"ng-template",null,3,r.W1O),r.qZA()),2&e){const e=r.MAs(4);r.Q6J("ngIf",t.displayLabel),r.xp6(1),r.Q6J("fielddisplayclass",t.fielddisplayclass)("fieldconfig",t.fieldconfig)("editable",!1),r.xp6(1),r.Q6J("ngIf",t.categories.length>0)("ngIfElse",e)}},dependencies:[i.O5,We.B,u.q,C.D],encapsulation:2})}return fieldCategory})();function Id(e,t){1&e&&(r.TgZ(0,"div",3),r._UZ(1,"system-spinner"),r.qZA())}function Sd(e,t){if(1&e&&(r.TgZ(0,"span",11),r._UZ(1,"system-label",12),r.qZA()),2&e){const e=r.oxw().$implicit;r.xp6(1),r.Q6J("label",e.name)}}function Md(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"span",13),r.NdJ("click",(function(){r.CHM(e);const t=r.oxw().$implicit,s=r.oxw(2);return r.KtG(s.choose(t))})),r._UZ(1,"system-label",12),r.qZA()}if(2&e){const e=r.oxw().$implicit;r.xp6(1),r.Q6J("label",e.name)}}function Jd(e,t){1&e&&r._UZ(0,"system-utility-icon",14),2&e&&r.Q6J("icon","favorite")("size","xx-small")}function Od(e,t){1&e&&r._UZ(0,"system-utility-icon",15),2&e&&r.Q6J("icon","chevronright")("size","xx-small")}const Nd=function(e){return{"slds-theme--shade":e}};function Fd(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"div",5)(1,"div",6),r.NdJ("mouseenter",(function(){const t=r.CHM(e).$implicit,s=r.oxw(2);return r.KtG(s.select(t))})),r.YNc(2,Sd,2,1,"span",7),r.YNc(3,Md,2,1,"span",8),r.YNc(4,Jd,1,2,"system-utility-icon",9),r.YNc(5,Od,1,2,"system-utility-icon",10),r.qZA()()}if(2&e){const e=t.$implicit,s=r.oxw(2);r.Q6J("ngClass",r.VKq(5,Nd,s.isCategorySelected(e))),r.xp6(2),r.Q6J("ngIf",0==e.selectable&&e.categories),r.xp6(1),r.Q6J("ngIf",1==e.selectable||!e.categories),r.xp6(1),r.Q6J("ngIf",1==e.favorite),r.xp6(1),r.Q6J("ngIf",e.categories)}}function qd(e,t){if(1&e&&(r.TgZ(0,"div"),r.YNc(1,Fd,6,7,"div",4),r.qZA()),2&e){const e=t.$implicit,s=r.oxw();r.Gre("slds-col slds-size--1-of-",s.maxlevels,""),r.xp6(1),r.Q6J("ngForOf",e)}}let Ed=(()=>{class fieldServiceCategoryTree{model;backend;config;language;category_tree=[];maxlevels=4;levels=[];selected_categorys=[];choose_emitter=new r.vpe;loading=!0;constructor(e,t,s,i){this.model=e,this.backend=t,this.config=s,this.language=i,this.resetLevels(),this.config.getData("service_category_tree")?(this.category_tree=this.config.getData("service_category_tree"),this.levels[0]=this.category_tree,this.loading=!1):this.backend.getRequest("configuration/spiceui/core/servicecategories/tree").subscribe((e=>{this.config.setData("service_category_tree",e),this.category_tree=e,this.levels[0]=this.category_tree,this.loading=!1}))}resetLevels(e=0){for(let t=e;t<this.maxlevels;t++)this.levels[t]=[];this.selected_categorys.splice(e,this.maxlevels-e)}select(e){this.selected_categorys[e.level]=e,e.categories?(this.levels[e.level+1]=e.categories,this.resetLevels(e.level+2)):this.resetLevels(e.level+1)}choose(e){this.selected_categorys[e.level]=e,this.choose_emitter.emit(this.selected_categorys)}isCategorySelected(e){for(let t of this.selected_categorys)if(t.id==e.id)return!0;return!1}static ɵfac=function(e){return new(e||fieldServiceCategoryTree)(r.Y36(w.o),r.Y36($.y),r.Y36(W.C),r.Y36(x.d))};static ɵcmp=r.Xpm({type:fieldServiceCategoryTree,selectors:[["field-service-category-tree"]],inputs:{maxlevels:"maxlevels"},outputs:{choose_emitter:"choose"},decls:3,vars:2,consts:[["role","listbox",1,"slds-listbox","slds-listbox_vertical","slds-dropdown_fluid","slds-grid"],["class","slds-p-around--small slds-align--absolute-center",4,"ngIf"],[3,"class",4,"ngFor","ngForOf"],[1,"slds-p-around--small","slds-align--absolute-center"],[3,"ngClass",4,"ngFor","ngForOf"],[3,"ngClass"],[1,"slds-grid","slds-grid--vertical-align-center","slds-p-around--xx-small",3,"mouseenter"],["class","slds-truncate","style","cursor: default;",4,"ngIf"],["class","slds-truncate","style","cursor: pointer; text-decoration: underline;",3,"click",4,"ngIf"],["class","slds-m-left--small",3,"icon","size",4,"ngIf"],["class","slds-col--bump-left",3,"icon","size",4,"ngIf"],[1,"slds-truncate",2,"cursor","default"],[3,"label"],[1,"slds-truncate",2,"cursor","pointer","text-decoration","underline",3,"click"],[1,"slds-m-left--small",3,"icon","size"],[1,"slds-col--bump-left",3,"icon","size"]],template:function(e,t){1&e&&(r.TgZ(0,"div",0),r.YNc(1,Id,2,0,"div",1),r.YNc(2,qd,2,4,"div",2),r.qZA()),2&e&&(r.xp6(1),r.Q6J("ngIf",t.loading),r.xp6(1),r.Q6J("ngForOf",t.levels))},dependencies:[i.mk,i.sg,i.O5,te._,Vl.W,I.r],encapsulation:2})}return fieldServiceCategoryTree})();function Yd(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"li",4)(1,"span",5),r.NdJ("click",(function(){const t=r.CHM(e).$implicit,s=r.oxw();return r.KtG(s.choose(t))})),r.TgZ(2,"span",6),r._uU(3),r.qZA()()()}if(2&e){const e=t.$implicit,s=r.oxw();r.xp6(3),r.Oqu(s.language.getLabel(e.display_name))}}function Dd(e,t){1&e&&(r.TgZ(0,"li",7)(1,"span",8),r._uU(2,"No Matches found."),r.qZA()())}let Ud=(()=>{class fieldServiceCategorySearch{model;backend;config;language;search;categories=[];selected_categorys=[];choose_emitter=new r.vpe;constructor(e,t,s,i){this.model=e,this.backend=t,this.config=s,this.language=i,this.config.getData("service_category_tree")?this.flatteningOutCategoryTree(this.config.getData("service_category_tree")):this.backend.getRequest("configuration/spiceui/core/servicecategories/tree").subscribe((e=>{this.config.setData("service_category_tree",e),this.flatteningOutCategoryTree(e)}))}get results(){return this.categories.filter((e=>e.display_name.toLowerCase().includes(this.search.toLowerCase())))}flatteningOutCategoryTree(e){for(let t of e)t.parents=[],this.loopThroughTree(t)}loopThroughTree(e){if(e.display_name="",e.parents.length>0)for(let t of e.parents)e.display_name+=this.language.getLabel(t.name)+"\\";if(e.display_name+=this.language.getLabel(e.name),this.categories.push(e),e.categories)for(let t of e.categories)t.parents=[...e.parents],t.parents.push(e),this.loopThroughTree(t)}choose(e){let t=[...e.parents];t.push(e),this.choose_emitter.emit(t)}static ɵfac=function(e){return new(e||fieldServiceCategorySearch)(r.Y36(w.o),r.Y36($.y),r.Y36(W.C),r.Y36(x.d))};static ɵcmp=r.Xpm({type:fieldServiceCategorySearch,selectors:[["field-service-category-search"]],inputs:{search:"search"},outputs:{choose_emitter:"choose"},decls:4,vars:2,consts:[["role","listbox"],["role","presentation",1,"slds-listbox","slds-dropdown_fluid"],["class","slds-listbox__item","role","presentation",4,"ngFor","ngForOf"],["class","slds-listbox__item",4,"ngIf"],["role","presentation",1,"slds-listbox__item"],["role","option",1,"slds-listbox__option","slds-listbox__option_entity",3,"click"],[1,"slds-p-left--medium","slds-listbox__option-text","slds-listbox__option-text_entity"],[1,"slds-listbox__item"],[1,"slds-p-left--medium"]],template:function(e,t){1&e&&(r.TgZ(0,"div",0)(1,"ul",1),r.YNc(2,Yd,4,1,"li",2),r.YNc(3,Dd,3,0,"li",3),r.qZA()()),2&e&&(r.xp6(2),r.Q6J("ngForOf",t.results),r.xp6(1),r.Q6J("ngIf",0==t.results.length))},dependencies:[i.sg,i.O5],encapsulation:2})}return fieldServiceCategorySearch})();function Qd(e,t){if(1&e&&r._UZ(0,"field-label",3),2&e){const e=r.oxw();r.Q6J("fieldname",e.fieldname)("fieldconfig",e.fieldconfig)}}function Rd(e,t){if(1&e&&(r.TgZ(0,"field-generic-display",4),r._uU(1),r.qZA()),2&e){const e=r.oxw();r.Q6J("fielddisplayclass",e.fielddisplayclass)("fieldconfig",e.fieldconfig)("editable",e.isEditable()),r.xp6(1),r.hij(" ",e.display_value,"\n")}}function jd(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"div",11)(1,"div",12)(2,"span",13)(3,"span",14),r._uU(4),r.qZA(),r.TgZ(5,"button",15),r.NdJ("click",(function(){r.CHM(e);const t=r.oxw(2);return r.KtG(t.unchooseCategories())})),r._UZ(6,"system-button-icon",16),r.qZA()()()()}if(2&e){const e=r.oxw(2);r.xp6(4),r.Oqu(e.display_value),r.xp6(2),r.Q6J("icon","close")}}function Bd(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"div",11)(1,"input",17),r.NdJ("ngModelChange",(function(t){r.CHM(e);const s=r.oxw(2);return r.KtG(s.search=t)}))("click",(function(t){r.CHM(e);const s=r.oxw(2);return r.KtG(s.checkUserAction(t))}))("keyup",(function(t){r.CHM(e);const s=r.oxw(2);return r.KtG(s.checkUserAction(t))})),r.qZA()()}if(2&e){const e=r.oxw(2);r.xp6(1),r.s9C("placeholder",e.language.getLabel("LBL_SEARCH")),r.Q6J("ngModel",e.search)}}function Gd(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"div")(1,"field-service-category-tree",18),r.NdJ("choose",(function(t){r.CHM(e);const s=r.oxw(2);return r.KtG(s.chooseCategories(t))})),r.qZA()()}if(2&e){const e=r.oxw(2);r.xp6(1),r.Q6J("maxlevels",e.maxlevels)}}function Pd(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"div")(1,"field-service-category-search",19),r.NdJ("choose",(function(t){r.CHM(e);const s=r.oxw(2);return r.KtG(s.chooseCategories(t))})),r.qZA()()}if(2&e){const e=r.oxw(2);r.xp6(1),r.Q6J("search",e.search)}}function Hd(e,t){if(1&e&&(r.TgZ(0,"div",5)(1,"div",6)(2,"div",7)(3,"div",8),r.YNc(4,jd,7,2,"div",9),r.YNc(5,Bd,2,2,"div",9),r.YNc(6,Gd,2,1,"div",10),r.YNc(7,Pd,2,1,"div",10),r.qZA()()()()),2&e){const e=r.oxw();r.Q6J("ngClass",e.getFieldClass()),r.xp6(4),r.Q6J("ngIf",e.display_value),r.xp6(1),r.Q6J("ngIf",!e.display_value),r.xp6(1),r.Q6J("ngIf",e.show_tree),r.xp6(1),r.Q6J("ngIf",e.show_search)}}let zd=(()=>{class fieldServiceCategories extends d.O{model;view;language;metadata;router;backend;config;fields=["sysservicecategory_id1","sysservicecategory_id2","sysservicecategory_id3","sysservicecategory_id4"];show_tree=!1;show_search=!1;search;categories=[];constructor(e,t,s,i,n,l,o){super(e,t,s,i,n),this.model=e,this.view=t,this.language=s,this.metadata=i,this.router=n,this.backend=l,this.config=o,this.config.getData("service_categories")?this.categories=this.config.getData("service_categories"):(this.config.setData("service_categories",[]),this.backend.getRequest("configuration/spiceui/core/servicecategories").subscribe((e=>{this.categories=e,this.config.setData("service_categories",e)})))}get display_value(){let e="";for(let t of this.fields){if(!this.model.getField(t)||!this.categories[this.model.getField(t)])break;e+=this.language.getLabel(this.categories[this.model.getField(t)].name)+"\\"}return e=e.substring(0,e.length-1),e}get maxlevels(){return this.fieldconfig.maxlevels?this.fieldconfig.maxlevels:3}checkUserAction(e){this.search?(this.show_tree=!1,this.show_search=!0):(this.show_tree=!0,this.show_search=!1)}chooseCategories(e){this.show_search=!1,this.show_tree=!1;for(let t=0;t<this.fields.length;t++)e[t]?this.model.setField(this.fields[t],e[t].id):this.model.setField(this.fields[t],"");this.search=null;for(let t=e.length-1;t>=0;t--){let s=e[t];if(s.servicequeue_id){this.model.setField("servicequeue_id",s.servicequeue_id),this.model.setField("servicequeue_name",s.servicequeue_name);break}}}unchooseCategories(){let e={};for(let t of this.fields)e[t]="";this.model.setFields(e)}static ɵfac=function(e){return new(e||fieldServiceCategories)(r.Y36(w.o),r.Y36(k.e),r.Y36(x.d),r.Y36(c.Pu),r.Y36(A.F0),r.Y36($.y),r.Y36(W.C))};static ɵcmp=r.Xpm({type:fieldServiceCategories,selectors:[["field-service-categories"]],features:[r.qOj],decls:3,vars:3,consts:[[3,"fieldname","fieldconfig",4,"ngIf"],[3,"fielddisplayclass","fieldconfig","editable",4,"ngIf"],["class","slds-form-element__control slds-m-vertical--xx-small",3,"ngClass",4,"ngIf"],[3,"fieldname","fieldconfig"],[3,"fielddisplayclass","fieldconfig","editable"],[1,"slds-form-element__control","slds-m-vertical--xx-small",3,"ngClass"],[1,"slds-form-element__control"],[1,"slds-combobox_container","slds-has-inline-listbox"],[1,"slds-combobox","slds-dropdown-trigger","slds-dropdown-trigger_click","slds-combobox-lookup"],["class","slds-combobox__form-element slds-input-has-icon slds-input-has-icon_right",4,"ngIf"],[4,"ngIf"],[1,"slds-combobox__form-element","slds-input-has-icon","slds-input-has-icon_right"],[1,"slds-pill_container"],[1,"slds-pill","slds-size--1-of-1"],[1,"slds-pill__label"],[1,"slds-button","slds-button--icon","slds-pill__remove",3,"click"],[3,"icon"],["type","search",1,"slds-input","slds-combobox__input",3,"placeholder","ngModel","ngModelChange","click","keyup"],[3,"maxlevels","choose"],[3,"search","choose"]],template:function(e,t){1&e&&(r.YNc(0,Qd,1,2,"field-label",0),r.YNc(1,Rd,2,4,"field-generic-display",1),r.YNc(2,Hd,8,5,"div",2)),2&e&&(r.Q6J("ngIf",t.displayLabel),r.xp6(1),r.Q6J("ngIf",!t.isEditMode()),r.xp6(1),r.Q6J("ngIf",t.isEditable()&&t.isEditMode()))},dependencies:[i.mk,i.O5,n.Fj,n.JJ,n.On,Z.J,u.q,C.D,Ed,Ud],encapsulation:2})}return fieldServiceCategories})();const Vd=["componentcontainer"];function $d(e,t){if(1&e&&(r.TgZ(0,"span",2),r._uU(1),r.qZA()),2&e){const e=r.oxw();r.xp6(1),r.Oqu(e.language.getLabel(e.item.action_label))}}let Kd=(()=>{class fieldStatusNetworkItem{language;metadata;modal;model;injector;componentcontainer;item={};actioncomponent;initialized=!1;constructor(e,t,s,i,n){this.language=e,this.metadata=t,this.modal=s,this.model=i,this.injector=n}get id(){return this.item.id}get hasComponent(){return this.item.status_component&&""!=this.item.status_component}ngAfterViewInit(){this.hasComponent&&this.metadata.addComponent(this.item.status_component,this.componentcontainer,this.injector).subscribe((e=>{this.actioncomponent=e.instance,e.instance.item=this.item})),this.initialized=!0}ngOnChanges(){this.actioncomponent&&(this.actioncomponent.self.destroy(),this.actioncomponent=null),this.initialized&&this.hasComponent&&this.metadata.addComponent(this.item.status_component,this.componentcontainer,this.injector).subscribe((e=>{this.actioncomponent=e.instance,e.instance.item=this.item}))}setStatus(e){this.item.prompt_label?this.modal.confirm(this.language.getLabel(this.item.prompt_label,"","long"),this.language.getLabel(this.item.prompt_label,"")).subscribe((t=>{t&&this.executeChange(e)})):this.executeChange(e)}executeChange(e){this.actioncomponent&&this.actioncomponent.execute?this.actioncomponent.execute():(this.model.startEdit(!0,!1),this.model.setField(e,this.item.status_to),this.model.validate()?this.model.save():this.model.edit())}static ɵfac=function(e){return new(e||fieldStatusNetworkItem)(r.Y36(x.d),r.Y36(c.Pu),r.Y36(L.o),r.Y36(w.o),r.Y36(r.zs3))};static ɵcmp=r.Xpm({type:fieldStatusNetworkItem,selectors:[["field-statusnetwork-item"]],viewQuery:function(e,t){if(1&e&&r.Gf(Vd,7,r.s_b),2&e){let e;r.iGM(e=r.CRH())&&(t.componentcontainer=e.first)}},inputs:{item:"item"},features:[r.TTD],decls:3,vars:1,consts:[["class","slds-text-color_default",4,"ngIf"],["componentcontainer",""],[1,"slds-text-color_default"]],template:function(e,t){1&e&&(r.YNc(0,$d,2,1,"span",0),r._UZ(1,"div",null,1)),2&e&&r.Q6J("ngIf",!t.hasComponent)},dependencies:[i.O5],encapsulation:2})}return fieldStatusNetworkItem})();var Xd=s(95681);function Wd(e,t){if(1&e&&r._UZ(0,"field-label",5),2&e){const e=r.oxw();r.Q6J("fieldname",e.fieldname)("fieldconfig",e.fieldconfig)}}function er(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"li",12),r.NdJ("click",(function(){const t=r.CHM(e).$implicit,s=r.oxw(2);return r.KtG(s.propagateclick(t.id))})),r.TgZ(1,"a",13),r._UZ(2,"field-statusnetwork-item",14),r.qZA()()}if(2&e){const e=t.$implicit;r.xp6(2),r.Q6J("item",e)}}function tr(e,t){if(1&e&&(r.TgZ(0,"div",6)(1,"button",7),r._UZ(2,"system-button-icon",8),r.qZA(),r.TgZ(3,"div",9)(4,"ul",10),r.YNc(5,er,3,1,"li",11),r.qZA()()()),2&e){const e=r.oxw();r.xp6(1),r.Q6J("disabled",e.model.isEditing),r.xp6(4),r.Q6J("ngForOf",e.networkItems)}}let sr=(()=>{class fieldStatusNetwork extends Ge{model;view;language;metadata;router;buttonitemlist;options=[];statusNetwork=[];constructor(e,t,s,i,n){super(e,t,s,i,n),this.model=e,this.view=t,this.language=s,this.metadata=i,this.router=n,this.subscriptions.add(this.language.currentlanguage$.subscribe((e=>{this.getOptions()})))}ngOnInit(){super.ngOnInit(),this.initializeNetwork(),this.getOptions()}getValue(){return this.language.getFieldDisplayOptionValue(this.model.module,this.fieldname,this.value)}initializeNetwork(){let e=this.metadata.checkStatusManaged(this.model.module);0!=e&&e.statusField==this.fieldname&&(this.statusNetwork=e.statusNetwork)}get networkItems(){let e=[];for(let t of this.statusNetwork)t.status_from!=this.value||t.required_model_state&&!this.model.checkModelState(t.required_model_state)||e.push(t);return e}getOptions(){let e=[],t=this.language.getFieldDisplayOptions(this.model.module,this.fieldname);for(let s in t)e.push({value:s,display:t[s]});this.options=e}propagateclick(e){this.buttonitemlist.some((t=>{if(t.id==e)return t.setStatus(this.fieldname),!0}))}static ɵfac=function(e){return new(e||fieldStatusNetwork)(r.Y36(w.o),r.Y36(k.e),r.Y36(x.d),r.Y36(c.Pu),r.Y36(A.F0))};static ɵcmp=r.Xpm({type:fieldStatusNetwork,selectors:[["field-statusnetwork"]],viewQuery:function(e,t){if(1&e&&r.Gf(Kd,5),2&e){let e;r.iGM(e=r.CRH())&&(t.buttonitemlist=e)}},features:[r.qOj],decls:7,vars:7,consts:[[3,"fieldname","fieldconfig",4,"ngIf"],[3,"fielddisplayclass","editable","fieldconfig","fieldid"],[1,"slds-grid","slds-grid--vertical-align-center","slds-grid--align-spread"],[1,"slds-truncate"],["class","slds-dropdown-trigger slds-dropdown-trigger_click slds-button_last","system-dropdown-trigger","",4,"ngIf"],[3,"fieldname","fieldconfig"],["system-dropdown-trigger","",1,"slds-dropdown-trigger","slds-dropdown-trigger_click","slds-button_last"],["system-title","LBL_SET_STATUS",1,"slds-button","slds-button--icon-small","slds-button_icon-border-filled",3,"disabled"],["icon","stage"],[1,"slds-dropdown","slds-dropdown_right","slds-dropdown_actions"],["role","menu",1,"slds-dropdown__list"],["class","slds-dropdown__item","role","presentation",3,"click",4,"ngFor","ngForOf"],["role","presentation",1,"slds-dropdown__item",3,"click"],["href","javascript:void(0);","role","menuitem",1,"slds-truncate"],[3,"item"]],template:function(e,t){1&e&&(r.YNc(0,Wd,1,2,"field-label",0),r.TgZ(1,"field-generic-display",1)(2,"div",2)(3,"div",3)(4,"span"),r._uU(5),r.qZA()(),r.YNc(6,tr,6,2,"div",4),r.qZA()()),2&e&&(r.Q6J("ngIf",t.displayLabel),r.xp6(1),r.Q6J("fielddisplayclass",t.fielddisplayclass)("editable",!1)("fieldconfig",t.fieldconfig)("fieldid",t.fieldid),r.xp6(4),r.Oqu(t.getValue()),r.xp6(1),r.Q6J("ngIf",t.networkItems.length>0))},dependencies:[i.sg,i.O5,Z.J,Xd.l,Pn.S,u.q,C.D,Kd],encapsulation:2})}return fieldStatusNetwork})();function ir(e,t){if(1&e&&r._UZ(0,"field-label",2),2&e){const e=r.oxw();r.Q6J("fieldname",e.fieldname)("fieldconfig",e.fieldconfig)}}function nr(e,t){if(1&e&&(r.TgZ(0,"div",5)(1,"div",6),r._uU(2),r.qZA(),r.TgZ(3,"div",7),r._uU(4),r.qZA()()),2&e){const e=t.$implicit,s=r.oxw(2);r.xp6(2),r.AsE("",e.user_name," • ",s.formatTimestamp(e.timestamp),""),r.xp6(2),r.Oqu(e.text)}}function lr(e,t){if(1&e&&(r.TgZ(0,"div")(1,"div",3),r.YNc(2,nr,5,3,"div",4),r.qZA()()),2&e){const e=r.oxw();r.xp6(1),r.Q6J("ngStyle",e.styles),r.xp6(1),r.Q6J("ngForOf",e.logs)}}function or(e,t){if(1&e&&(r.TgZ(0,"div",5)(1,"div",6),r._uU(2),r.qZA(),r.TgZ(3,"div",13)(4,"pre"),r._uU(5),r.qZA()()()),2&e){const e=t.$implicit,s=r.oxw(2);r.xp6(2),r.AsE("",e.user_name," • ",s.formatTimestamp(e.timestamp),""),r.xp6(3),r.Oqu(e.text)}}function ar(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"div")(1,"div",8)(2,"div",9)(3,"div",10)(4,"textarea",11),r.NdJ("ngModelChange",(function(t){r.CHM(e);const s=r.oxw();return r.KtG(s.new_log_entry=t)})),r.qZA()()(),r.TgZ(5,"div",12),r.YNc(6,or,6,3,"div",4),r.qZA()()()}if(2&e){const e=r.oxw();r.xp6(4),r.Q6J("ngModel",e.new_log_entry)("ngStyle",e.styles),r.xp6(1),r.Q6J("ngStyle",e.styles),r.xp6(1),r.Q6J("ngForOf",e.logs)}}let dr=(()=>{class fieldWorklog extends d.O{model;view;language;metadata;router;session;userpreferences;_new_log_entry;origin_logs=[];initialized=!1;constructor(e,t,s,i,n,l,o){super(e,t,s,i,n),this.model=e,this.view=t,this.language=s,this.metadata=i,this.router=n,this.session=l,this.userpreferences=o,this.view.isEditMode()&&this.view.mode$.subscribe((e=>{"edit"==e&&(this.origin_logs=this.logs)}))}ngOnInit(){super.ngOnInit(),this.view.isEditMode()&&(this.view.mode$.subscribe((e=>{"edit"==e&&(this.origin_logs=this.logs)})),this.initialized=!0)}get logs(){return this.value?"string"==typeof this.value?JSON.parse(this.value):this.value:[]}set logs(e){"json"!=this.field_defs.type?this.value=JSON.stringify(e):this.value=e}set new_log_entry(e){this._new_log_entry=e,this.initialized||this.ngOnInit();let t=[...this.origin_logs];t.unshift({timestamp:+new Date,user_name:this.session.authData.userName,user_id:this.session.authData.userId,text:e}),this.logs=t}get styles(){return{height:this.fieldconfig.height?this.fieldconfig.height+"px":"200px"}}formatTimestamp(e){let t=moment(e);return this.userpreferences.formatDateTime(t)}static ɵfac=function(e){return new(e||fieldWorklog)(r.Y36(w.o),r.Y36(k.e),r.Y36(x.d),r.Y36(c.Pu),r.Y36(A.F0),r.Y36(Tl.n),r.Y36(ye.z))};static ɵcmp=r.Xpm({type:fieldWorklog,selectors:[["field-worklog"]],features:[r.qOj],decls:3,vars:3,consts:[[3,"fieldname","fieldconfig",4,"ngIf"],[4,"ngIf"],[3,"fieldname","fieldconfig"],[1,"slds-scrollable--y",3,"ngStyle"],["class","slds-p-around--x-small slds-border--bottom",4,"ngFor","ngForOf"],[1,"slds-p-around--x-small","slds-border--bottom"],[1,"slds-p-around--x-small","slds-theme--shade"],[1,"slds-p-around--x-small",2,"white-space","pre-line"],[1,"slds-grid"],[1,"slds-form-element","slds-size--1-of-2","slds-m-right--xx-small"],[1,"slds-form-element__control"],["placeholder","Write your log here...",1,"slds-textarea",3,"ngModel","ngStyle","ngModelChange"],[1,"slds-size--1-of-2","slds-scrollable--y","slds-m-left--xx-small",3,"ngStyle"],[1,"slds-p-around--x-small"]],template:function(e,t){1&e&&(r.YNc(0,ir,1,2,"field-label",0),r.YNc(1,lr,3,2,"div",1),r.YNc(2,ar,7,4,"div",1)),2&e&&(r.Q6J("ngIf",t.displayLabel),r.xp6(1),r.Q6J("ngIf",!t.isEditMode()),r.xp6(1),r.Q6J("ngIf",t.isEditMode()))},dependencies:[i.sg,i.O5,i.PC,n.Fj,n.JJ,n.On,u.q],encapsulation:2})}return fieldWorklog})(),rr=(()=>{class FieldModelInfoComponent{model;language;constructor(e,t){this.model=e,this.language=t}static ɵfac=function(e){return new(e||FieldModelInfoComponent)(r.Y36(w.o),r.Y36(x.d))};static ɵcmp=r.Xpm({type:FieldModelInfoComponent,selectors:[["field-model-info"]],decls:2,vars:2,consts:[["system-model-popover","",1,"slds-icon_container"],[3,"icon","size"]],template:function(e,t){1&e&&(r.TgZ(0,"div",0),r._UZ(1,"system-utility-icon",1),r.qZA()),2&e&&(r.xp6(1),r.Q6J("icon","info")("size","x-small"))},dependencies:[I.r,ps.g],encapsulation:2})}return FieldModelInfoComponent})();var cr=s(66898);function ur(e,t){if(1&e&&r._UZ(0,"field-label",3),2&e){const e=r.oxw();r.Q6J("fieldname",e.fieldname)("fieldconfig",e.fieldconfig)}}function mr(e,t){if(1&e&&(r.TgZ(0,"field-generic-display",4),r._uU(1),r.qZA()),2&e){const e=r.oxw();r.Q6J("fielddisplayclass",e.fielddisplayclass)("editable",e.isEditable())("fieldconfig",e.fieldconfig)("fieldid",e.fieldid),r.xp6(1),r.hij(" ",e.getValue(),"\n")}}function gr(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"div",5)(1,"div",6)(2,"system-input-module",7),r.NdJ("ngModelChange",(function(t){r.CHM(e);const s=r.oxw();return r.KtG(s.value=t)})),r.qZA(),r._UZ(3,"field-messages",8),r.qZA()()}if(2&e){const e=r.oxw();r.xp6(1),r.Q6J("ngClass",e.getFieldClass()),r.xp6(1),r.Q6J("ngModel",e.value)("technicalNameOnly",!1)("displayAsterisk",e.displayAsterisk),r.xp6(1),r.Q6J("fieldname",e.fieldname)}}let hr=(()=>{class FieldEnumModulesComponent extends Ge{model;view;language;metadata;router;constructor(e,t,s,i,n){super(e,t,s,i,n),this.model=e,this.view=t,this.language=s,this.metadata=i,this.router=n}get displayAsterisk(){return!!this.fieldconfig.displayAsterisk}static ɵfac=function(e){return new(e||FieldEnumModulesComponent)(r.Y36(w.o),r.Y36(k.e),r.Y36(x.d),r.Y36(c.Pu),r.Y36(A.F0))};static ɵcmp=r.Xpm({type:FieldEnumModulesComponent,selectors:[["field-enum-modules"]],features:[r.qOj],decls:3,vars:3,consts:[[3,"fieldname","fieldconfig",4,"ngIf"],[3,"fielddisplayclass","editable","fieldconfig","fieldid",4,"ngIf"],["class","slds-form-element",4,"ngIf"],[3,"fieldname","fieldconfig"],[3,"fielddisplayclass","editable","fieldconfig","fieldid"],[1,"slds-form-element"],[1,"slds-form-element__control",3,"ngClass"],[3,"ngModel","technicalNameOnly","displayAsterisk","ngModelChange"],[3,"fieldname"]],template:function(e,t){1&e&&(r.YNc(0,ur,1,2,"field-label",0),r.YNc(1,mr,2,5,"field-generic-display",1),r.YNc(2,gr,4,5,"div",2)),2&e&&(r.Q6J("ngIf",t.displayLabel),r.xp6(1),r.Q6J("ngIf",!t.isEditMode()),r.xp6(1),r.Q6J("ngIf",t.isEditMode()))},dependencies:[i.mk,i.O5,n.JJ,n.On,cr.a,u.q,C.D,M.a],encapsulation:2})}return FieldEnumModulesComponent})();function pr(e,t){if(1&e&&r._UZ(0,"field-label",5),2&e){const e=r.oxw();r.Q6J("fieldname",e.fieldname)("fieldconfig",e.fieldconfig)}}let fr=(()=>{class fieldGDPR extends d.O{model;view;language;metadata;router;backend;modal;injector;gdprData={};loaded=!1;marketingStyle;dataStyle;constructor(e,t,s,i,n,l,o,a){super(e,t,s,i,n),this.model=e,this.view=t,this.language=s,this.metadata=i,this.router=n,this.backend=l,this.modal=o,this.injector=a}ngOnInit(){this.backend.getRequest("common/gdpr/"+this.model.module+"/"+this.model.id).subscribe((e=>{this.gdprData=e,this.loaded=!0,this.setMarketingStyle(),this.setDataStyle()})),this.subscriptions.add(this.model.data$.subscribe((()=>{this.setMarketingStyle(),this.setDataStyle()})))}setDataStyle(){if(!this.loaded)return{};let e="#cc0000";("1"==this.model.data.gdpr_data_agreement||this.gdprData?.related?.some((e=>"1"==e.gdpr_data_agreement)))&&(e="#009900"),this.dataStyle={"background-color":e,color:"white",cursor:"pointer"}}setMarketingStyle(){if(!this.loaded)return{};const e=this.metadata.getModuleFields(this.model.module)?.gdpr_marketing_agreement;let t="#cc0000";("enum"==e?.type&&"g"==this.model.data.gdpr_marketing_agreement||e?.type?.startsWith("bool")&&1==this.model.data.gdpr_marketing_agreement||this.gdprData?.related?.some((e=>"1"==e.gdpr_marketing_agreement)))&&(t="#009900"),this.marketingStyle={"background-color":t,color:"white",cursor:"pointer"}}showDetails(){this.modal.openModal("ObjectGDPRModal",!0,this.injector).subscribe((e=>{e.instance.gdprRelatedLog=this.gdprData.related,e.instance.gdprAuditLog=this.gdprData.audit.map((e=>({...e,model:{module:this.model.module,id:this.model.id,[e.field_name]:this.model.utils.backend2spice(this.model.module,e.field_name,e.value)}})))}))}static ɵfac=function(e){return new(e||fieldGDPR)(r.Y36(w.o),r.Y36(k.e),r.Y36(x.d),r.Y36(c.Pu),r.Y36(A.F0),r.Y36($.y),r.Y36(L.o),r.Y36(r.zs3))};static ɵcmp=r.Xpm({type:fieldGDPR,selectors:[["field-gdpr"]],features:[r.qOj],decls:6,vars:3,consts:[[3,"fieldname","fieldconfig",4,"ngIf"],[1,"slds-grid","slds-grid--vertical-align-center","slds-p-vertical--xxx-small"],[1,"slds-badge","slds-badge__icon",3,"ngStyle","click"],["label","LBL_DATA"],["label","LBL_MARKETING"],[3,"fieldname","fieldconfig"]],template:function(e,t){1&e&&(r.YNc(0,pr,1,2,"field-label",0),r.TgZ(1,"div",1)(2,"span",2),r.NdJ("click",(function(){return t.showDetails()})),r._UZ(3,"system-label",3),r.qZA(),r.TgZ(4,"span",2),r.NdJ("click",(function(){return t.showDetails()})),r._UZ(5,"system-label",4),r.qZA()()),2&e&&(r.Q6J("ngIf",t.displayLabel),r.xp6(2),r.Q6J("ngStyle",t.dataStyle),r.xp6(2),r.Q6J("ngStyle",t.marketingStyle))},dependencies:[i.O5,i.PC,te._,u.q],encapsulation:2})}return fieldGDPR})();function br(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"li",4)(1,"span",5),r.NdJ("click",(function(){const t=r.CHM(e).$implicit,s=r.oxw();return r.KtG(s.choose(t))})),r.TgZ(2,"span",6),r._uU(3),r.qZA()()()}if(2&e){const e=t.$implicit,s=r.oxw();r.xp6(3),r.Oqu(s.language.getLabel(e.display_name))}}function _r(e,t){1&e&&(r.TgZ(0,"li",7)(1,"span",8),r._uU(2,"No Matches found."),r.qZA()())}let vr=(()=>{class fieldSelectTreeSearch{model;backend;config;language;search;treekey;sel_fields=[];selected_categorys=[];choose_emitter=new r.vpe;constructor(e,t,s,i){this.model=e,this.backend=t,this.config=s,this.language=i}ngOnInit(){this.config.getData("select_tree_tree")?this.flatteningOutCategoryTree(this.config.getData("select_tree_tree")):this.backend.getRequest("configuration/spiceui/core/selecttree/tree/"+this.treekey).subscribe((e=>{this.config.setData("select_tree_tree",e),this.flatteningOutCategoryTree(e)}))}get results(){return this.sel_fields.filter((e=>e.display_name.toLowerCase().includes(this.search.toLowerCase())))}flatteningOutCategoryTree(e){for(let t of e)t.parents=[],this.loopThroughTree(t)}loopThroughTree(e){if(e.display_name="",e.parents.length>0)for(let t of e.parents)e.display_name+=this.language.getLabel(t.name)+"\\";if(e.display_name+=this.language.getLabel(e.name),this.sel_fields.push(e),e.childs)for(let t of e.childs)t.parents=[...e.parents],t.parents.push(e),this.loopThroughTree(t)}choose(e){let t=[...e.parents];t.push(e),this.choose_emitter.emit(t)}static ɵfac=function(e){return new(e||fieldSelectTreeSearch)(r.Y36(w.o),r.Y36($.y),r.Y36(W.C),r.Y36(x.d))};static ɵcmp=r.Xpm({type:fieldSelectTreeSearch,selectors:[["select-tree-search"]],inputs:{search:"search",treekey:"treekey"},outputs:{choose_emitter:"choose"},decls:4,vars:2,consts:[["role","listbox",1,"slds-dropdown_fluid"],["role","presentation",1,"slds-listbox","slds-dropdown_fluid"],["class","slds-listbox__item","role","presentation",4,"ngFor","ngForOf"],["class","slds-listbox__item",4,"ngIf"],["role","presentation",1,"slds-listbox__item"],["role","option",1,"slds-listbox__option","slds-listbox__option_entity",3,"click"],[1,"slds-p-left--medium","slds-listbox__option-text","slds-listbox__option-text_entity"],[1,"slds-listbox__item"],[1,"slds-p-left--medium"]],template:function(e,t){1&e&&(r.TgZ(0,"div",0)(1,"ul",1),r.YNc(2,br,4,1,"li",2),r.YNc(3,_r,3,0,"li",3),r.qZA()()),2&e&&(r.xp6(2),r.Q6J("ngForOf",t.results),r.xp6(1),r.Q6J("ngIf",0==t.results.length))},dependencies:[i.sg,i.O5],encapsulation:2})}return fieldSelectTreeSearch})();function yr(e,t){1&e&&(r.TgZ(0,"div",3),r._UZ(1,"system-spinner"),r.qZA())}function xr(e,t){if(1&e&&(r.TgZ(0,"span",11),r._UZ(1,"system-label",12),r.qZA()),2&e){const e=r.oxw().$implicit;r.xp6(1),r.Q6J("label",e.name)}}function wr(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"span",13),r.NdJ("click",(function(){r.CHM(e);const t=r.oxw().$implicit,s=r.oxw(2);return r.KtG(s.choose(t))})),r._UZ(1,"system-label",12),r.qZA()}if(2&e){const e=r.oxw().$implicit;r.xp6(1),r.Q6J("label",e.name)}}function Zr(e,t){1&e&&r._UZ(0,"system-utility-icon",14),2&e&&r.Q6J("icon","favorite")("size","xx-small")}function Tr(e,t){1&e&&r._UZ(0,"system-utility-icon",15),2&e&&r.Q6J("icon","chevronright")("size","xx-small")}const Cr=function(e){return{"slds-theme--shade":e}};function kr(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"div",4)(1,"div",6),r.NdJ("mouseenter",(function(){const t=r.CHM(e).$implicit,s=r.oxw(2);return r.KtG(s.select(t))})),r.YNc(2,xr,2,1,"span",7),r.YNc(3,wr,2,1,"span",8),r.YNc(4,Zr,1,2,"system-utility-icon",9),r.YNc(5,Tr,1,2,"system-utility-icon",10),r.qZA()()}if(2&e){const e=t.$implicit,s=r.oxw(2);r.Q6J("ngClass",r.VKq(5,Cr,s.isCategorySelected(e))),r.xp6(2),r.Q6J("ngIf",0==e.selectable&&e.childs),r.xp6(1),r.Q6J("ngIf",1==e.selectable||!e.childs),r.xp6(1),r.Q6J("ngIf",1==e.favorite),r.xp6(1),r.Q6J("ngIf",e.childs)}}const Ar=function(e){return{"slds-border--right":e}};function Lr(e,t){if(1&e&&(r.TgZ(0,"div",4),r.YNc(1,kr,6,7,"div",5),r.qZA()),2&e){const e=t.$implicit,s=t.index,i=r.oxw();r.Gre("slds-col slds-size--1-of-",i.maxlevels,""),r.Q6J("ngClass",r.VKq(5,Ar,s<i.maxlevels-1)),r.xp6(1),r.Q6J("ngForOf",e)}}let Ir=(()=>{class fieldSelectTreeTree{model;backend;config;language;select_tree=[];maxlevels=4;treekey;levels=[];selected_fields=[];choose_emitter=new r.vpe;loading=!0;constructor(e,t,s,i){this.model=e,this.backend=t,this.config=s,this.language=i,this.resetLevels()}ngOnInit(){if(this.config.getData("select_tree_tree")){var e=this.config.getData("select_tree_tree");e.sort((function(e,t){var s=e.name.toLowerCase(),i=t.name.toLowerCase();return s<i?-1:s>i?1:0})),this.levels[0]=e,this.loading=!1}else this.backend.getRequest("configuration/spiceui/core/selecttree/tree/"+this.treekey).subscribe((e=>{this.config.setData("select_tree_tree",e),this.select_tree=e,this.select_tree.sort((function(e,t){var s=e.name.toLowerCase(),i=t.name.toLowerCase();return s<i?-1:s>i?1:0})),this.levels[0]=this.select_tree,this.loading=!1}))}resetLevels(e=0){for(let t=e;t<this.maxlevels;t++)this.levels[t]=[];this.selected_fields.splice(e,this.maxlevels-e)}select(e){this.selected_fields[e.level]=e,e.childs?(this.levels[e.level+1]=e.childs,this.resetLevels(e.level+2)):this.resetLevels(e.level+1)}choose(e){this.selected_fields[e.level]=e,this.choose_emitter.emit(this.selected_fields)}isCategorySelected(e){for(let t of this.selected_fields)if(t.id==e.id)return!0;return!1}static ɵfac=function(e){return new(e||fieldSelectTreeTree)(r.Y36(w.o),r.Y36($.y),r.Y36(W.C),r.Y36(x.d))};static ɵcmp=r.Xpm({type:fieldSelectTreeTree,selectors:[["select-tree-tree"]],inputs:{maxlevels:"maxlevels",treekey:"treekey"},outputs:{choose_emitter:"choose"},decls:3,vars:2,consts:[["role","listbox",1,"slds-dropdown_fluid"],["class","slds-p-around--small slds-align--absolute-center",4,"ngIf"],[3,"class","ngClass",4,"ngFor","ngForOf"],[1,"slds-p-around--small","slds-align--absolute-center"],[3,"ngClass"],[3,"ngClass",4,"ngFor","ngForOf"],[1,"slds-grid","slds-grid--vertical-align-center","slds-p-around--xx-small",3,"mouseenter"],["class","slds-truncate","style","cursor: default;",4,"ngIf"],["class","slds-truncate","style","cursor: pointer; text-decoration: underline;",3,"click",4,"ngIf"],["class","slds-m-left--small",3,"icon","size",4,"ngIf"],["class","slds-col--bump-left",3,"icon","size",4,"ngIf"],[1,"slds-truncate",2,"cursor","default"],[3,"label"],[1,"slds-truncate",2,"cursor","pointer","text-decoration","underline",3,"click"],[1,"slds-m-left--small",3,"icon","size"],[1,"slds-col--bump-left",3,"icon","size"]],template:function(e,t){1&e&&(r.TgZ(0,"div",0),r.YNc(1,yr,2,0,"div",1),r.YNc(2,Lr,2,7,"div",2),r.qZA()),2&e&&(r.xp6(1),r.Q6J("ngIf",t.loading),r.xp6(1),r.Q6J("ngForOf",t.levels))},dependencies:[i.mk,i.sg,i.O5,te._,Vl.W,I.r],encapsulation:2})}return fieldSelectTreeTree})();function Sr(e,t){if(1&e&&r._UZ(0,"field-label",3),2&e){const e=r.oxw();r.Q6J("fieldname",e.fieldname)("fieldconfig",e.fieldconfig)}}function Mr(e,t){if(1&e&&(r.TgZ(0,"field-generic-display",4),r._uU(1),r.qZA()),2&e){const e=r.oxw();r.Q6J("fielddisplayclass",e.fielddisplayclass)("fieldconfig",e.fieldconfig)("editable",e.isEditable()),r.xp6(1),r.hij(" ",e.display_value,"\n")}}function Jr(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"div",11)(1,"div",12)(2,"span",13)(3,"span",14),r._uU(4),r.qZA(),r.TgZ(5,"button",15),r.NdJ("click",(function(){r.CHM(e);const t=r.oxw(2);return r.KtG(t.unchooseSelField())})),r._UZ(6,"system-button-icon",16),r.qZA()()()()}if(2&e){const e=r.oxw(2);r.xp6(4),r.Oqu(e.display_value),r.xp6(2),r.Q6J("icon","close")}}function Or(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"div",11)(1,"input",17),r.NdJ("focus",(function(){r.CHM(e);const t=r.oxw(2);return r.KtG(t.onFocus())}))("ngModelChange",(function(t){r.CHM(e);const s=r.oxw(2);return r.KtG(s.search=t)}))("click",(function(t){r.CHM(e);const s=r.oxw(2);return r.KtG(s.checkUserAction(t))}))("keyup",(function(t){r.CHM(e);const s=r.oxw(2);return r.KtG(s.checkUserAction(t))})),r.qZA()()}if(2&e){const e=r.oxw(2);r.xp6(1),r.s9C("placeholder",e.language.getLabel("LBL_SEARCH")),r.Q6J("ngModel",e.search)}}function Nr(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"div",18)(1,"select-tree-tree",19),r.NdJ("choose",(function(t){r.CHM(e);const s=r.oxw(2);return r.KtG(s.chooseSelField(t))})),r.qZA()()}if(2&e){const e=r.oxw(2);r.xp6(1),r.Q6J("treekey",e.fieldconfig.key)("maxlevels",e.maxlevels)}}function Fr(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"div",18)(1,"select-tree-search",20),r.NdJ("choose",(function(t){r.CHM(e);const s=r.oxw(2);return r.KtG(s.chooseSelField(t))})),r.qZA()()}if(2&e){const e=r.oxw(2);r.xp6(1),r.Q6J("treekey",e.fieldconfig.key)("search",e.search)}}function qr(e,t){if(1&e&&(r.TgZ(0,"div",5)(1,"div",6)(2,"div",7)(3,"div",8),r.YNc(4,Jr,7,2,"div",9),r.YNc(5,Or,2,2,"div",9),r.YNc(6,Nr,2,2,"div",10),r.YNc(7,Fr,2,2,"div",10),r.qZA()()()()),2&e){const e=r.oxw();r.Q6J("ngClass",e.getFieldClass()),r.xp6(4),r.Q6J("ngIf",e.display_value),r.xp6(1),r.Q6J("ngIf",!e.display_value),r.xp6(1),r.Q6J("ngIf",e.show_tree),r.xp6(1),r.Q6J("ngIf",e.show_search)}}let Er=(()=>{class fieldSelectTree extends d.O{model;view;language;metadata;router;backend;config;elementRef;renderer;fields=[];show_tree=!1;show_search=!1;search;sel_fields=[];clickListener;constructor(e,t,s,i,n,l,o,a,d){super(e,t,s,i,n),this.model=e,this.view=t,this.language=s,this.metadata=i,this.router=n,this.backend=l,this.config=o,this.elementRef=a,this.renderer=d}ngOnInit(){this.fields.length<1&&(this.fields.push(this.fieldconfig.value1),this.fields.push(this.fieldconfig.value2),this.fields.push(this.fieldconfig.value3),this.fields.push(this.fieldconfig.value4)),this.config.getData("select_tree")?this.sel_fields=this.config.getData("select_tree"):(this.config.setData("select_tree",[]),this.backend.getRequest("configuration/spiceui/core/selecttree/list/"+this.fieldconfig.key).subscribe((e=>{this.sel_fields=e,this.config.setData("select_tree",e)})))}get display_value(){let e="";for(let t of this.fields){if(!this.model.getField(t))break;{let s="";for(let e in this.sel_fields)this.sel_fields[e].keyname===this.model.getField(t)&&(s=this.sel_fields[e].name);e+=this.language.getLabel(s)+" \\ "}}return e=e.substring(0,e.length-2),e}get maxlevels(){return this.fieldconfig.maxlevels?this.fieldconfig.maxlevels:4}checkUserAction(e){this.search?(this.show_tree=!1,this.show_search=!0):(this.show_tree=!0,this.show_search=!1)}chooseSelField(e){this.show_search=!1,this.show_tree=!1;for(let t=0;t<this.fields.length;t++)if(e[t]){let s=""!=e[t].keyname?e[t].keyname:e[t].name;this.model.setField(this.fields[t],s)}else this.model.setField(this.fields[t],"");this.search=null}unchooseSelField(){let e={};for(let t of this.fields)e[t]="";this.model.setFields(e)}onClick(e){this.elementRef.nativeElement.contains(e.target)||(this.show_tree=!1)}onFocus(){this.show_tree=!0,this.clickListener=this.renderer.listen("document","click",(e=>this.onClick(e)))}static ɵfac=function(e){return new(e||fieldSelectTree)(r.Y36(w.o),r.Y36(k.e),r.Y36(x.d),r.Y36(c.Pu),r.Y36(A.F0),r.Y36($.y),r.Y36(W.C),r.Y36(r.SBq),r.Y36(r.Qsj))};static ɵcmp=r.Xpm({type:fieldSelectTree,selectors:[["select-tree"]],features:[r.qOj],decls:3,vars:3,consts:[[3,"fieldname","fieldconfig",4,"ngIf"],[3,"fielddisplayclass","fieldconfig","editable",4,"ngIf"],["class","slds-form-element__control slds-m-vertical--xx-small",3,"ngClass",4,"ngIf"],[3,"fieldname","fieldconfig"],[3,"fielddisplayclass","fieldconfig","editable"],[1,"slds-form-element__control","slds-m-vertical--xx-small",3,"ngClass"],[1,"slds-form-element__control"],[1,"slds-combobox_container","slds-has-inline-listbox"],["aria-expanded","false","aria-haspopup","listbox","role","combobox",1,"slds-combobox","slds-dropdown-trigger","slds-dropdown-trigger_click","slds-combobox-lookup","slds-size_2-of-2"],["class","slds-combobox__form-element slds-input-has-icon slds-input-has-icon_right",4,"ngIf"],["class","slds-dropdown dropdown-trigger_click slds-dropdown_length-with-icon-1 slds-dropdown_fluid","style","display: block",4,"ngIf"],[1,"slds-combobox__form-element","slds-input-has-icon","slds-input-has-icon_right"],[1,"slds-pill_container"],[1,"slds-pill","slds-size--1-of-1"],[1,"slds-pill__label"],[1,"slds-button","slds-button--icon","slds-pill__remove",3,"click"],[3,"icon"],["type","search",1,"slds-input","slds-combobox__input",3,"placeholder","ngModel","focus","ngModelChange","click","keyup"],[1,"slds-dropdown","dropdown-trigger_click","slds-dropdown_length-with-icon-1","slds-dropdown_fluid",2,"display","block"],[3,"treekey","maxlevels","choose"],[3,"treekey","search","choose"]],template:function(e,t){1&e&&(r.YNc(0,Sr,1,2,"field-label",0),r.YNc(1,Mr,2,4,"field-generic-display",1),r.YNc(2,qr,8,5,"div",2)),2&e&&(r.Q6J("ngIf",t.displayLabel),r.xp6(1),r.Q6J("ngIf",!t.isEditMode()),r.xp6(1),r.Q6J("ngIf",t.isEditable()&&t.isEditMode()))},dependencies:[i.mk,i.O5,n.Fj,n.JJ,n.On,Z.J,u.q,C.D,vr,Ir],encapsulation:2})}return fieldSelectTree})();function Yr(e,t){if(1&e&&r._UZ(0,"field-label",3),2&e){const e=r.oxw();r.Q6J("fieldname",e.fieldname)("fieldconfig",e.fieldconfig)}}function Dr(e,t){if(1&e&&(r.TgZ(0,"field-generic-display",4),r._UZ(1,"div",5),r._uU(2),r.qZA()),2&e){const e=r.oxw();r.Q6J("fielddisplayclass",e.fielddisplayclass)("editable",e.isEditable())("fieldconfig",e.fieldconfig),r.xp6(1),r.Q6J("ngStyle",e.getColor),r.xp6(1),r.hij(" ",e.getValue(),"\n")}}function Ur(e,t){if(1&e&&(r.ynx(0),r.TgZ(1,"option",12),r._uU(2),r.qZA(),r.BQk()),2&e){const e=t.$implicit;r.xp6(1),r.Q6J("value",e.value),r.xp6(1),r.hij(" ",e.long,"")}}function Qr(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"div",6)(1,"div",7)(2,"div",8)(3,"select",9),r.NdJ("ngModelChange",(function(t){r.CHM(e);const s=r.oxw();return r.KtG(s.value=t)}))("change",(function(){r.CHM(e);const t=r.oxw();return r.KtG(t.changed())})),r.YNc(4,Ur,3,2,"ng-container",10),r.qZA()(),r._UZ(5,"field-messages",11),r.qZA()()}if(2&e){const e=r.oxw();r.xp6(1),r.Q6J("ngClass",e.getFieldClass()),r.xp6(2),r.Q6J("ngModel",e.value),r.xp6(1),r.Q6J("ngForOf",e.options),r.xp6(1),r.Q6J("fieldname",e.fieldname)}}let Rr=(()=>{class fieldColorEnum extends d.O{model;view;language;metadata;router;longOptions=[];options=[];colors=[];acolor={"background-color":""};constructor(e,t,s,i,n){super(e,t,s,i,n),this.model=e,this.view=t,this.language=s,this.metadata=i,this.router=n}ngOnInit(){this.getOptions()}getOptions(){this.longOptions=this.language.getFieldDisplayOptions(this.model.module,this.fieldname);let e=this.longOptions;if(e&&!this.fieldconfig.useShort||(e=this.language.getDisplayOptions(this.fieldconfig.shortEnum)),this.colors=this.language.getDisplayOptions(this.fieldconfig.colorEnum),void 0!==this.colors){let e="";e=this.colors[this.value],void 0!==e&&"#"!=e.substring(0,1)&&(e="#"+e),this.acolor["background-color"]=e}let t=[];for(let s in e){let i=void 0!==this.colors&&void 0!==this.colors[s]?"#"!=this.colors[s].substring(0,1)?"#"+this.colors[s]:this.colors[s]:"",n=void 0!==this.longOptions?this.longOptions[s]:"";t.push({value:s,color:i,display:e[s],long:n})}this.options=t}get getColor(){let e="";return void 0!==this.colors&&(e=this.colors[this.value],e&&"#"!=e.substring(0,1)&&(e="#"+e),this.acolor["background-color"]=e),this.acolor}getValue(){for(let e of this.options)if(e.value==this.value)return e.display}changed(){let e="";e=this.colors[this.value],void 0!==e&&"#"!=e.substring(0,1)&&(e="#"+e),this.acolor["background-color"]=e}static ɵfac=function(e){return new(e||fieldColorEnum)(r.Y36(w.o),r.Y36(k.e),r.Y36(x.d),r.Y36(c.Pu),r.Y36(A.F0))};static ɵcmp=r.Xpm({type:fieldColorEnum,selectors:[["field-enum"]],features:[r.qOj],decls:3,vars:3,consts:[[3,"fieldname","fieldconfig",4,"ngIf"],[3,"fielddisplayclass","editable","fieldconfig",4,"ngIf"],["class","slds-form-element",4,"ngIf"],[3,"fieldname","fieldconfig"],[3,"fielddisplayclass","editable","fieldconfig"],[2,"float","left","width","10px","height","10px","border-radius","5px","margin-top","5px","margin-right","5px",3,"ngStyle"],[1,"slds-form-element"],[1,"slds-form-element__control",3,"ngClass"],[1,"slds-select_container","slds-m-vertical--xx-small"],[1,"slds-select",3,"ngModel","ngModelChange","change"],[4,"ngFor","ngForOf"],[3,"fieldname"],[3,"value"]],template:function(e,t){1&e&&(r.YNc(0,Yr,1,2,"field-label",0),r.YNc(1,Dr,3,5,"field-generic-display",1),r.YNc(2,Qr,6,4,"div",2)),2&e&&(r.Q6J("ngIf",t.displayLabel),r.xp6(1),r.Q6J("ngIf",!t.isEditMode()),r.xp6(1),r.Q6J("ngIf",t.isEditMode()))},dependencies:[i.mk,i.sg,i.O5,i.PC,n.YN,n.Kr,n.EJ,n.JJ,n.On,u.q,C.D,M.a],encapsulation:2})}return fieldColorEnum})();var jr=s(46991);function Br(e,t){if(1&e&&r._UZ(0,"field-label",3),2&e){const e=r.oxw();r.Q6J("fieldname",e.fieldname)("fieldconfig",e.fieldconfig)}}function Gr(e,t){if(1&e&&(r.TgZ(0,"div",7),r._uU(1),r.qZA()),2&e){const e=r.oxw(2);r.xp6(1),r.hij(" ",e.displayValue," ")}}function Pr(e,t){if(1&e&&(r.TgZ(0,"div",8),r._uU(1),r.qZA()),2&e){const e=r.oxw(2);r.Q6J("title",e.displayValue),r.xp6(1),r.hij(" ",e.displayValue," ")}}function Hr(e,t){if(1&e&&(r.TgZ(0,"field-generic-display",4),r.YNc(1,Gr,2,1,"div",5),r.YNc(2,Pr,2,2,"ng-template",null,6,r.W1O),r.qZA()),2&e){const e=r.MAs(3),t=r.oxw();r.Q6J("fielddisplayclass",t.fielddisplayclass)("editable",t.isEditable())("fieldconfig",t.fieldconfig)("fieldid",t.fieldid),r.xp6(1),r.Q6J("ngIf",!t.truncated)("ngIfElse",e)}}function zr(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"div",9)(1,"system-input-base64",10),r.NdJ("ngModelChange",(function(t){r.CHM(e);const s=r.oxw();return r.KtG(s.value=t)})),r.qZA(),r._UZ(2,"field-messages",11),r.qZA()}if(2&e){const e=r.oxw();r.Q6J("ngClass",e.getFieldClass()),r.xp6(1),r.Q6J("ngModel",e.value)("minHeight",e.minHeight)("maxHeight",e.maxHeight),r.xp6(1),r.Q6J("fieldname",e.fieldname)}}let Vr=(()=>{class fieldBase64 extends d.O{model;view;language;metadata;router;footer;constructor(e,t,s,i,n,l){super(e,t,s,i,n),this.model=e,this.view=t,this.language=s,this.metadata=i,this.router=n,this.footer=l}get minHeight(){return this.fieldconfig.minheight?this.fieldconfig.minheight:150}get maxHeight(){return this.fieldconfig.maxheight?this.fieldconfig.maxheight:500}get truncated(){return!!this.fieldconfig.truncate}get displayValue(){try{return decodeURIComponent(window.atob(this.value))}catch(e){return""}}static ɵfac=function(e){return new(e||fieldBase64)(r.Y36(w.o),r.Y36(k.e),r.Y36(x.d),r.Y36(c.Pu),r.Y36(A.F0),r.Y36(he.M))};static ɵcmp=r.Xpm({type:fieldBase64,selectors:[["field-base64"]],features:[r.qOj],decls:3,vars:3,consts:[[3,"fieldname","fieldconfig",4,"ngIf"],[3,"fielddisplayclass","editable","fieldconfig","fieldid",4,"ngIf"],["class","slds-form-element__control","style","position:relative;",3,"ngClass",4,"ngIf"],[3,"fieldname","fieldconfig"],[3,"fielddisplayclass","editable","fieldconfig","fieldid"],["style","white-space: pre-line;",4,"ngIf","ngIfElse"],["truncatedDisplay",""],[2,"white-space","pre-line"],[1,"slds-truncate",2,"max-width","200px","text-overflow","ellipsis",3,"title"],[1,"slds-form-element__control",2,"position","relative",3,"ngClass"],[3,"ngModel","minHeight","maxHeight","ngModelChange"],[3,"fieldname"]],template:function(e,t){1&e&&(r.YNc(0,Br,1,2,"field-label",0),r.YNc(1,Hr,4,6,"field-generic-display",1),r.YNc(2,zr,3,5,"div",2)),2&e&&(r.Q6J("ngIf",t.displayLabel),r.xp6(1),r.Q6J("ngIf",!t.isEditMode()),r.xp6(1),r.Q6J("ngIf",t.isEditable()&&t.isEditMode()))},dependencies:[i.mk,i.O5,n.JJ,n.On,jr.V,u.q,C.D,M.a],encapsulation:2})}return fieldBase64})();function $r(e,t){1&e&&r._UZ(0,"system-stencil")}function Kr(e,t){if(1&e&&r._UZ(0,"system-icon",3),2&e){const e=r.oxw();r.Q6J("module",e.value)}}let Xr=(()=>{class fieldModuleIcon extends d.O{model;view;language;metadata;router;constructor(e,t,s,i,n){super(e,t,s,i,n),this.model=e,this.view=t,this.language=s,this.metadata=i,this.router=n}static ɵfac=function(e){return new(e||fieldModuleIcon)(r.Y36(w.o),r.Y36(k.e),r.Y36(x.d),r.Y36(c.Pu),r.Y36(A.F0))};static ɵcmp=r.Xpm({type:fieldModuleIcon,selectors:[["field-module-icon"]],features:[r.qOj],decls:4,vars:3,consts:[[3,"ngClass"],[4,"ngIf","ngIfElse"],["displaycontent",""],["size","xx-small",3,"module"]],template:function(e,t){if(1&e&&(r.TgZ(0,"div",0),r.YNc(1,$r,1,0,"system-stencil",1),r.YNc(2,Kr,1,1,"ng-template",null,2,r.W1O),r.qZA()),2&e){const e=r.MAs(3);r.Q6J("ngClass",t.fielddisplayclass),r.xp6(1),r.Q6J("ngIf",t.model.isLoading)("ngIfElse",e)}},dependencies:[i.mk,i.O5,gs.f,We.B],encapsulation:2})}return fieldModuleIcon})();var Wr=s(49808),ec=s(71574);function tc(e,t){if(1&e&&r._UZ(0,"field-label",5),2&e){const e=r.oxw();r.Q6J("fieldname",e.fieldname)("fieldconfig",e.fieldconfig)}}function sc(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"button",6),r.NdJ("click",(function(){r.CHM(e);const t=r.oxw();return r.KtG(t.setEditMode())})),r._UZ(1,"system-button-icon",7),r.qZA()}2&e&&(r.xp6(1),r.Q6J("icon","edit"))}function ic(e,t){if(1&e&&r._UZ(0,"system-richtext-editor",12),2&e){const e=r.oxw(2);r.Q6J("readOnly",!0)("ngModel",e.value)("css",e.styleTag)("stylesheetId",e.stylesheetId)("innerheight",e.fieldconfig.height)}}function nc(e,t){if(1&e&&r._UZ(0,"iframe",13),2&e){const e=r.oxw(2);r.Q6J("src",e.fieldconfig.iframe_as_blob_url?e.iframeUrl:e.sanitizedValue,r.uOi)("ngStyle",e.heightStyle)}}function lc(e,t){1&e&&(r.TgZ(0,"div",14),r._UZ(1,"system-stencil"),r.qZA())}function oc(e,t){if(1&e&&(r.TgZ(0,"field-generic-display",8),r.YNc(1,ic,1,5,"system-richtext-editor",9),r.YNc(2,nc,1,2,"iframe",10),r.YNc(3,lc,2,0,"div",11),r.qZA()),2&e){const e=r.oxw();r.Q6J("fielddisplayclass",e.fielddisplayclass)("editable",!1)("fieldconfig",e.fieldconfig)("field-generic-display-notruncate",!1),r.xp6(1),r.Q6J("ngIf",!e.fieldconfig.asiframe),r.xp6(1),r.Q6J("ngIf",e.fieldconfig.asiframe&&!e.isLoading),r.xp6(1),r.Q6J("ngIf",e.isLoading)}}function ac(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"li",31),r.NdJ("click",(function(){const t=r.CHM(e).$implicit,s=r.oxw(3);return s.selectedSignatureId=t.id,r.KtG(s.changeSignature())})),r.TgZ(1,"a",32)(2,"span",28),r._UZ(3,"system-label",33),r.qZA()()()}if(2&e){const e=t.$implicit;r.Q6J("value",e.id),r.xp6(3),r.Q6J("label",e.label)}}function dc(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"li",20)(1,"div",21)(2,"button",22),r._UZ(3,"system-button-icon",23),r.qZA(),r.TgZ(4,"div",24)(5,"ul",25)(6,"li",26),r.NdJ("click",(function(){r.CHM(e);const t=r.oxw(2);return t.selectedSignatureId="",r.KtG(t.changeSignature())})),r.TgZ(7,"a",27)(8,"span",28),r._UZ(9,"system-label",29),r.qZA()()(),r.YNc(10,ac,4,2,"li",30),r.qZA()()()()}if(2&e){const e=r.oxw(2);r.xp6(10),r.Q6J("ngForOf",e.signatures)}}function rc(e,t){if(1&e&&(r.TgZ(0,"option",43),r._UZ(1,"system-label",44),r.qZA()),2&e){const e=t.$implicit;r.Q6J("value",e.id),r.xp6(1),r.Q6J("label",e.label)}}function cc(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"li",34)(1,"div",35)(2,"label",36),r._UZ(3,"system-label",37),r._uU(4,": "),r.qZA(),r.TgZ(5,"div",38)(6,"div",39)(7,"select",40),r.NdJ("ngModelChange",(function(t){r.CHM(e);const s=r.oxw(2);return r.KtG(s.selectedSignatureId=t)}))("ngModelChange",(function(){r.CHM(e);const t=r.oxw(2);return r.KtG(t.changeSignature())})),r.TgZ(8,"option",41),r._UZ(9,"system-label",29),r.qZA(),r.YNc(10,rc,2,2,"option",42),r.qZA()()()()()}if(2&e){const e=r.oxw(2);r.xp6(7),r.Q6J("ngModel",e.selectedSignatureId)("disabled",0==(null==e.signatures?null:e.signatures.length)),r.xp6(3),r.Q6J("ngForOf",e.signatures)}}function uc(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"div",15)(1,"system-richtext-editor",16),r.NdJ("ngModelChange",(function(t){r.CHM(e);const s=r.oxw();return r.KtG(s.value=t)}))("save$",(function(t){r.CHM(e);const s=r.oxw();return r.KtG(s.save(t))})),r.YNc(2,dc,11,1,"li",17),r.YNc(3,cc,11,3,"li",18),r.qZA(),r._UZ(4,"field-messages",19),r.qZA()}if(2&e){const e=r.oxw();r.Q6J("ngClass",e.getFieldClass()),r.xp6(1),r.Q6J("ngModel",e.value)("css",e.styleTag)("stylesheetId",e.stylesheetId)("extendedmode",!e.fieldconfig.simplemode)("innerheight",e.fieldconfig.innerheight)("useMedialFile",e.metadata.checkModuleAcl("MediaFiles","list")&&e.metadata.checkModuleAcl("MediaFiles","view")),r.xp6(1),r.Q6J("ngIf",null==e.fieldconfig?null:e.fieldconfig.useSignature),r.xp6(1),r.Q6J("ngIf",null==e.fieldconfig?null:e.fieldconfig.useSignature),r.xp6(1),r.Q6J("fieldname",e.fieldname)}}let mc=(()=>{class fieldRichText extends d.O{model;view;language;metadata;backend;toast;router;injector;broadcast;configurationService;modal;cdRef;sanitized;selectedSignatureId="";signatures=[];sanitizedValue;fullValue_cached;fullValue="";stylesheetField="";stylesheetToUse="";stylesheets;useStylesheets;signaturePosition=-1;iframeUrl;isLoading=!1;constructor(e,t,s,i,n,l,o,a,d,r,c,u,m){super(e,t,s,i,o),this.model=e,this.view=t,this.language=s,this.metadata=i,this.backend=n,this.toast=l,this.router=o,this.injector=a,this.broadcast=d,this.configurationService=r,this.modal=c,this.cdRef=u,this.sanitized=m,this.stylesheets=this.metadata.getHtmlStylesheetNames()}get heightStyle(){return{height:this.fieldconfig.height?this.fieldconfig.height:"500px"}}_styleTag="";get styleTag(){return this._styleTag}get stylesheetId(){return _.isEmpty(this.model.getField(this.stylesheetField))?this.stylesheetId=this.stylesheetToUse:this.model.getField(this.stylesheetField)}set stylesheetId(e){e&&this.model.setField(this.stylesheetField,e)}get value(){return this.model.getField(this.fieldname)}set value(e){this.model.setField(this.fieldname,e)}ngOnInit(){this.fieldconfig.iframe_as_blob_url&&(this.isLoading=!0,this.model.generateFieldHtmlContentBlobUrl(this.fieldname).subscribe((e=>{this.isLoading=!1,this.iframeUrl=e,this.cdRef.detectChanges()}))),this.setStylesheetField(),this.setStylesheetsToUse(),this.setHtmlValue(),this.modelChangesSubscriber(),this.fieldconfig?.useSignature&&(this.addSignature("mailbox","","LBL_MAILBOX_SIGNATURE"),this.selectedSignatureId=this.model.getFieldValue("signature"),this.loadUserSignature("user"==this.selectedSignatureId),this.loadMailboxSignature(this.model.getField("mailbox_id"),"mailbox"==this.selectedSignatureId))}changeSignature(){"mailbox"==this.selectedSignatureId&&this.loadMailboxSignature(this.model.getField("mailbox_id"),!0),this.renderSelectedSignature()}renderSelectedSignature(){this.value||(this.value="");const e=document.createElement("div");e.innerHTML=this.value;let t=e.querySelectorAll("div[data-signature]"),s=e.querySelectorAll("div[data-spice-reply-quote]");if(this.signaturePosition=e.innerHTML.indexOf(s[0]?.outerHTML),t.length>0&&(this.signaturePosition=e.innerHTML.indexOf(t[0]?.outerHTML)),t[0]?.parentNode.removeChild(t[0]),this.value=e.innerHTML,this.model.setField("signature",this.selectedSignatureId),!this.selectedSignatureId)return;const i=`<div data-signature="" class="data-signature" style="margin: 10px 0">${this.signatures.find((e=>e.id==this.selectedSignatureId)).content}</div>`;this.value=[this.value.slice(0,this.signaturePosition),i,s[0]?.outerHTML].join("<p><br></p>")}setEditMode(){this.model.startEdit(),this.view.setEditMode(),this.cdRef.detectChanges()}encodeHtml(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}loadMailboxSignature(e,t){if(!this.isEditMode())return;if(!e)return;const s=this.configurationService.getData("mailbox_signature_"+e);if(!s)return(0,Wr.n)(this.backend.get("Mailboxes",e)).then((s=>{this.configurationService.setData("mailbox_signature_"+e,s.email_signature),this.addSignature("mailbox",s.email_signature,"LBL_MAILBOX_SIGNATURE"),t&&this.renderSelectedSignature()}));this.addSignature("mailbox",s,"LBL_MAILBOX"),t&&this.renderSelectedSignature()}addSignature(e,t,s){const i=this.signatures.find((t=>t.id==e));i?i.content=t:this.signatures.push({id:e,content:t,label:s})}loadUserSignature(e){if(!this.isEditMode())return;const t=this.configurationService.getData("usersignature");if(!t)return;this.signatures.length;this.addSignature("user",t,"LBL_MY_SIGNATURE"),e&&this.renderSelectedSignature()}setStylesheetField(){let e=this.metadata.getFieldDefs(this.model.module,this.fieldname);_.isEmpty(e.stylesheet_id_field)||(this.stylesheetField=e.stylesheet_id_field)}setStylesheetsToUse(){this.useStylesheets=!_.isEmpty(this.stylesheetField)&&!_.isEmpty(this.stylesheets),this.useStylesheets&&(1===this.stylesheets.length?this.stylesheetToUse=this.stylesheets[0].id:_.isEmpty(this.fieldconfig.stylesheetId)?this.stylesheetToUse=this.metadata.getHtmlStylesheetToUse(this.model.module,this.fieldname):this.stylesheetToUse=this.fieldconfig.stylesheetId)}setSanitizedValue(){this.value&&(this.value.includes("</html>")?this.fullValue=this.value:this.fullValue=`<html><head><base target="_blank"><style>${this.styleTag}</style></head><body class="spice">${this.value}</body></html>`),this.fullValue!=this.fullValue_cached&&(this.sanitizedValue=this.sanitized.bypassSecurityTrustResourceUrl(this.fullValue?"data:text/html;charset=UTF-8,"+encodeURIComponent(this.fullValue):""),this.fullValue_cached=this.fullValue)}modelChangesSubscriber(){this.subscriptions.add(this.model.observeFieldChanges(this.fieldname).subscribe({next:()=>this.setHtmlValue()})),this.subscriptions.add(this.model.observeFieldChanges("mailbox_id").subscribe((e=>{this.fieldconfig?.useSignature&&e&&"mailbox"==this.model.getField("signature")&&this.loadMailboxSignature(e,!0)})))}setHtmlValue(){if(!this.value?.includes("</html>")&&!this.fieldconfig.iframe_as_blob_url)return this.setSanitizedValue();let e=this.stylesheetId?this.metadata.getHtmlStylesheetCode(this.stylesheetId):"";const t=document.createElement("div");t.innerHTML=void 0===this.value?"":this.value;const s=t.getElementsByTagName("style")[0];e+=s?.innerHTML??"",s?.remove(),this.model.setField(this.fieldname,t.innerHTML,!0),this._styleTag=e,this.fieldconfig.iframe_as_blob_url||this.setSanitizedValue()}save(e){let t={date_modified:this.model.getField("date_modified"),[this.fieldname]:e};this.backend.save(this.model.module,this.model.id,t).subscribe({next:e=>{this.model.setField("date_modified",e.date_modified,!0),this.value=e[this.fieldname],this.toast.sendToast(this.language.getLabel("LBL_DATA_SAVED")+".","success")},error:e=>{this.toast.sendToast(this.language.getLabel("LBL_ERROR")+" "+e.status,"error",e.error.error.message)}})}static ɵfac=function(e){return new(e||fieldRichText)(r.Y36(w.o),r.Y36(k.e),r.Y36(x.d),r.Y36(c.Pu),r.Y36($.y),r.Y36(K.A),r.Y36(A.F0),r.Y36(r.zs3),r.Y36(X.f),r.Y36(W.C),r.Y36(L.o),r.Y36(r.sBO),r.Y36(ee.H7))};static ɵcmp=r.Xpm({type:fieldRichText,selectors:[["field-richtext"]],features:[r.qOj],decls:6,vars:4,consts:[[1,"slds-grid","slds-grid--vertical-align-center","slds-grid--align-spread"],[3,"fieldname","fieldconfig",4,"ngIf"],["class","slds-button slds-button--icon slds-m-left--xx-small spice-hover-button",3,"click",4,"ngIf"],[3,"fielddisplayclass","editable","fieldconfig","field-generic-display-notruncate",4,"ngIf"],["class","slds-form-element__control",3,"ngClass",4,"ngIf"],[3,"fieldname","fieldconfig"],[1,"slds-button","slds-button--icon","slds-m-left--xx-small","spice-hover-button",3,"click"],[3,"icon"],[3,"fielddisplayclass","editable","fieldconfig","field-generic-display-notruncate"],[3,"readOnly","ngModel","css","stylesheetId","innerheight",4,"ngIf"],["style","resize: vertical; border: 0","width","100%","frameborder","0","seamless","true","sandbox","",3,"src","ngStyle",4,"ngIf"],["class","slds-p-around--small",4,"ngIf"],[3,"readOnly","ngModel","css","stylesheetId","innerheight"],["width","100%","frameborder","0","seamless","true","sandbox","",2,"resize","vertical","border","0",3,"src","ngStyle"],[1,"slds-p-around--small"],[1,"slds-form-element__control",3,"ngClass"],[3,"ngModel","css","stylesheetId","extendedmode","innerheight","useMedialFile","ngModelChange","save$"],["id","signatureIcon",4,"ngIf"],["id","signatureSelector",4,"ngIf"],[3,"fieldname"],["id","signatureIcon"],["system-dropdown-trigger","",1,"slds-dropdown-trigger","slds-dropdown-trigger_click"],["aria-haspopup","true","aria-expanded","true",1,"slds-button","slds-button_icon","slds-button_icon-border-filled"],["icon","signature","aria-hidden","true",1,"slds-button__icon"],[1,"slds-dropdown","slds-dropdown_left","slds-dropdown_small"],["role","menu",1,"slds-dropdown__list"],[1,"slds-dropdown__item",3,"click"],["aria-checked","true","role","menuitemcheckbox","tabindex","0"],["title","Menu Item One",1,"slds-truncate"],["label","LBL_NONE"],["class","slds-dropdown__item slds-is-selected","role","presentation",3,"value","click",4,"ngFor","ngForOf"],["role","presentation",1,"slds-dropdown__item","slds-is-selected",3,"value","click"],["aria-checked","true","role","menuitemcheckbox","tabindex","-1"],[1,"slds-truncate",3,"label"],["id","signatureSelector"],[1,"slds-form-element","slds-grid"],[1,"slds-form-element__label"],["label","LBL_SIGNATURE"],[1,"slds-form-element__control"],[1,"slds-select_container"],[1,"slds-select",3,"ngModel","disabled","ngModelChange"],["value",""],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[3,"label"]],template:function(e,t){1&e&&(r.TgZ(0,"div",0)(1,"div"),r.YNc(2,tc,1,2,"field-label",1),r.qZA(),r.YNc(3,sc,2,1,"button",2),r.qZA(),r.YNc(4,oc,4,7,"field-generic-display",3),r.YNc(5,uc,5,10,"div",4)),2&e&&(r.xp6(2),r.Q6J("ngIf",t.displayLabel),r.xp6(1),r.Q6J("ngIf",!t.isEditMode()&&t.isEditable()),r.xp6(1),r.Q6J("ngIf",!t.isEditMode()),r.xp6(1),r.Q6J("ngIf",t.isEditable()&&t.isEditMode()))},dependencies:[i.mk,i.sg,i.O5,i.PC,n.YN,n.Kr,n.EJ,n.JJ,n.On,Z.J,te._,ec.z,We.B,Xd.l,u.q,C.D,M.a],encapsulation:2})}return fieldRichText})();function gc(e,t){if(1&e&&r._UZ(0,"field-label",3),2&e){const e=r.oxw();r.Q6J("fieldname",e.fieldname)("fieldconfig",e.fieldconfig)}}function hc(e,t){if(1&e&&(r.TgZ(0,"field-generic-display",4)(1,"span"),r._uU(2),r.qZA()()),2&e){const e=r.oxw();r.Q6J("fielddisplayclass",e.fielddisplayclass)("editable",e.isEditable())("fieldconfig",e.fieldconfig),r.xp6(2),r.Oqu(e.getValue())}}function pc(e,t){1&e&&(r.TgZ(0,"span",21)(1,"span",22),r._UZ(2,"system-icon",23),r.qZA()())}function fc(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"li",15),r.NdJ("click",(function(t){const s=r.CHM(e).$implicit,i=r.oxw(2);return r.KtG(i.clickedItem(s,t))})),r.TgZ(1,"div",16),r.YNc(2,pc,3,0,"span",17),r.TgZ(3,"span",18)(4,"span",19),r._UZ(5,"span",20),r._uU(6),r.qZA()()()()}if(2&e){const e=t.$implicit;r.xp6(2),r.Q6J("ngIf",e.selected),r.xp6(4),r.hij(" ",e.display," ")}}function bc(e,t){if(1&e&&(r.TgZ(0,"div",5)(1,"div",6)(2,"div",7)(3,"div",8)(4,"div",9),r._UZ(5,"input",10)(6,"system-icon",11),r.qZA(),r.TgZ(7,"div",12)(8,"ul",13),r.YNc(9,fc,7,2,"li",14),r.qZA()()()()()()),2&e){const e=r.oxw();r.xp6(5),r.Q6J("value",e.getValue()),r.xp6(4),r.Q6J("ngForOf",e.getValues())}}let _c=(()=>{class fieldEnumMulti extends d.O{model;view;language;metadata;router;elementRef;renderer;options=[];selectedValues=[];constructor(e,t,s,i,n,l,o){super(e,t,s,i,n),this.model=e,this.view=t,this.language=s,this.metadata=i,this.router=n,this.elementRef=l,this.renderer=o}showSelect=!1;clickListener;ngOnInit(){this.model.data$.subscribe((e=>{this.buildOptions()}))}getValue(){let e=[];for(let t of this.selectedValues)e.push(this.options[t]);return e.join(", ")}getValues(){let e=[];this.getValueArray();for(let t in this.options){let s=!1;for(let e of this.selectedValues)t==e&&(s=!0);e.push({id:this.model.generateGuid(),value:t,display:this.options[t],selected:s})}return e}getValueArray(){try{return this.model.getField(this.fieldname).substring(1,this.model.getField(this.fieldname).length-1).split("^,^")}catch(e){return[]}}buildOptions(){this.options=[],this.selectedValues=this.getValueArray(),this.options=this.language.getFieldDisplayOptions(this.model.module,this.fieldname)}clickedItem(e,t){t.stopPropagation(),""==this.selectedValues[0]&&(this.selectedValues=[]);var s=this.selectedValues.indexOf(e.value);-1==s?this.selectedValues.length>0?this.selectedValues.push(e.value):this.selectedValues=[e.value]:this.selectedValues.splice(s,1);let i=Object.assign([],this.selectedValues),n="";i.length>0&&(n="^"+i.join("^,^")+"^"),this.model.setField(this.fieldname,n)}static ɵfac=function(e){return new(e||fieldEnumMulti)(r.Y36(w.o),r.Y36(k.e),r.Y36(x.d),r.Y36(c.Pu),r.Y36(A.F0),r.Y36(r.SBq),r.Y36(r.Qsj))};static ɵcmp=r.Xpm({type:fieldEnumMulti,selectors:[["field-enummulti"]],features:[r.qOj],decls:3,vars:3,consts:[[3,"fieldname","fieldconfig",4,"ngIf"],[3,"fielddisplayclass","editable","fieldconfig",4,"ngIf"],["class","slds-form-element",4,"ngIf"],[3,"fieldname","fieldconfig"],[3,"fielddisplayclass","editable","fieldconfig"],[1,"slds-form-element"],[1,"slds-form-element__control"],[1,"slds-combobox_container"],["tabindex","-1","system-dropdown-trigger","","aria-expanded","true","aria-haspopup","listbox","role","combobox",1,"slds-combobox","slds-dropdown-trigger","slds-dropdown-trigger_click"],["role","none",1,"slds-combobox__form-element","slds-input-has-icon","slds-input-has-icon_right"],["type","text","role","textbox","placeholder","Select an Option",1,"slds-input","slds-combobox__input-value",3,"value"],["icon","down","sprite","utility","addclasses","slds-input__icon slds-input__icon_right"],["role","listbox",1,"slds-dropdown","slds-dropdown_length-5","slds-dropdown_fluid"],["role","presentation",1,"slds-listbox","slds-listbox_vertical"],["role","presentation","class","slds-listbox__item",3,"click",4,"ngFor","ngForOf"],["role","presentation",1,"slds-listbox__item",3,"click"],["id","option1","role","option",1,"slds-media","slds-listbox__option","slds-listbox__option_plain","slds-media_small","slds-is-selected"],["class","slds-media__figure slds-listbox__option-icon",4,"ngIf"],[1,"slds-media__body"],["title","Accounts",1,"slds-truncate"],[1,"slds-assistive-text"],[1,"slds-media__figure","slds-listbox__option-icon"],[1,"slds-icon_container","slds-icon-utility-check","slds-current-color"],["icon","check","size","xx-small","sprite","utility","addclasses","slds-input__icon slds-input__icon_right"]],template:function(e,t){1&e&&(r.YNc(0,gc,1,2,"field-label",0),r.YNc(1,hc,3,4,"field-generic-display",1),r.YNc(2,bc,10,2,"div",2)),2&e&&(r.Q6J("ngIf",t.displayLabel),r.xp6(1),r.Q6J("ngIf",!t.isEditMode()),r.xp6(1),r.Q6J("ngIf",t.isEditMode()))},dependencies:[i.sg,i.O5,gs.f,Xd.l,u.q,C.D],encapsulation:2})}return fieldEnumMulti})();var vc=s(8222);function yc(e,t){if(1&e&&r._UZ(0,"field-label",3),2&e){const e=r.oxw();r.Q6J("fieldname",e.fieldname)("fieldconfig",e.fieldconfig)}}function xc(e,t){if(1&e&&(r.TgZ(0,"field-generic-display",4),r._UZ(1,"system-input-cron-expression",5),r.qZA()),2&e){const e=r.oxw();r.Q6J("fielddisplayclass",e.fielddisplayclass)("editable",e.isEditable())("fieldconfig",e.fieldconfig),r.xp6(1),r.Q6J("readOnly",!0)("ngModel",e.value)}}function wc(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"div",6)(1,"system-input-cron-expression",7),r.NdJ("ngModelChange",(function(t){r.CHM(e);const s=r.oxw();return r.KtG(s.value=t)})),r.qZA(),r._UZ(2,"field-messages",8),r.qZA()}if(2&e){const e=r.oxw();r.Q6J("ngClass",e.css_classes),r.xp6(1),r.Q6J("ngModel",e.value),r.xp6(1),r.Q6J("fieldname",e.fieldname)}}let Zc=(()=>{class fieldCronInterval extends d.O{model;view;language;userPreferences;metadata;router;constructor(e,t,s,i,n,l){super(e,t,s,n,l),this.model=e,this.view=t,this.language=s,this.userPreferences=i,this.metadata=n,this.router=l}ngOnInit(){this.initializeValue()}initializeValue(){this.model.isNew&&(this.value="*::*::*::*::*")}static ɵfac=function(e){return new(e||fieldCronInterval)(r.Y36(w.o),r.Y36(k.e),r.Y36(x.d),r.Y36(ye.z),r.Y36(c.Pu),r.Y36(A.F0))};static ɵcmp=r.Xpm({type:fieldCronInterval,selectors:[["field-cron-interval"]],features:[r.qOj],decls:3,vars:3,consts:[[3,"fieldname","fieldconfig",4,"ngIf"],[3,"fielddisplayclass","editable","fieldconfig",4,"ngIf"],[3,"ngClass",4,"ngIf"],[3,"fieldname","fieldconfig"],[3,"fielddisplayclass","editable","fieldconfig"],[3,"readOnly","ngModel"],[3,"ngClass"],[3,"ngModel","ngModelChange"],[3,"fieldname"]],template:function(e,t){1&e&&(r.YNc(0,yc,1,2,"field-label",0),r.YNc(1,xc,2,5,"field-generic-display",1),r.YNc(2,wc,3,3,"div",2)),2&e&&(r.Q6J("ngIf",t.displayLabel),r.xp6(1),r.Q6J("ngIf",!t.isEditMode()),r.xp6(1),r.Q6J("ngIf",t.isEditMode()))},dependencies:[i.mk,i.O5,n.JJ,n.On,vc.b,u.q,C.D,M.a],encapsulation:2})}return fieldCronInterval})();var Tc=s(93845);function Cc(e,t){if(1&e&&r._UZ(0,"field-label",3),2&e){const e=r.oxw();r.Q6J("fieldname",e.fieldname)("fieldconfig",e.fieldconfig)}}function kc(e,t){if(1&e&&(r.TgZ(0,"field-generic-display",4),r._uU(1),r.qZA()),2&e){const e=r.oxw();r.Q6J("fielddisplayclass",e.fielddisplayclass)("editable",e.isEditable())("fieldconfig",e.fieldconfig)("title",e.value)("fieldid",e.fieldid),r.xp6(1),r.hij(" ",e.value,"\n")}}function Ac(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"div",5)(1,"system-googleplaces-search",6,7),r.NdJ("ngModelChange",(function(t){r.CHM(e);const s=r.oxw();return r.KtG(s.value=t)}))("details",(function(t){r.CHM(e);const s=r.oxw();return r.KtG(s.setDetails(t))})),r.qZA(),r._UZ(3,"field-messages",8),r.qZA()}if(2&e){const e=r.oxw();r.Q6J("ngClass",e.css_classes),r.xp6(1),r.Q6J("ngModel",e.value),r.xp6(2),r.Q6J("fieldname",e.fieldname)}}let Lc=(()=>{class fieldGooglePlacesSearch extends d.O{model;view;language;metadata;configurationService;router;options=[];constructor(e,t,s,i,n,l){super(e,t,s,i,l),this.model=e,this.view=t,this.language=s,this.metadata=i,this.configurationService=n,this.router=l}setDetails(e){let t={};this.fieldconfig.formatted_phone_number&&e.formatted_phone_number&&(t[this.fieldconfig.formatted_phone_number]=e.formatted_phone_number),this.fieldconfig.international_phone_number&&e.international_phone_number&&(t[this.fieldconfig.international_phone_number]=e.international_phone_number),this.fieldconfig.website&&e.website&&(t[this.fieldconfig.website]=e.website),e.address&&(this.fieldconfig.city&&e.address.city&&(t[this.fieldconfig.city]=e.address.city),this.fieldconfig.country&&e.address.country&&(t[this.fieldconfig.country]=e.address.country),this.fieldconfig.postalcode&&e.address.postalcode&&(t[this.fieldconfig.postalcode]=e.address.postalcode),this.fieldconfig.state&&e.address.state&&(t[this.fieldconfig.state]=e.address.state),this.fieldconfig.street&&e.address.street_name&&(t[this.fieldconfig.street]=e.address.street_name),!this.hideStreetNumber&&this.fieldconfig.street_number&&e.address.street_number?t[this.fieldconfig.street_number]=e.address.street_number:this.hideStreetNumber&&this.fieldconfig.street&&e.address.street_name&&e.address.street_number&&(t[this.fieldconfig.street]+=" "+e.address.street_number),this.fieldconfig.latitude&&e.address.latitude&&(t[this.fieldconfig.latitude]=e.address.latitude),this.fieldconfig.longitude&&e.address.longitude&&(t[this.fieldconfig.longitude]=e.address.longitude)),_.isEmpty(t)||this.model.setFields(t)}get hideStreetNumber(){const e=JSON.parse(this.configurationService.data.backendextensions.address_format?.config?.format||"{}");return!!e?.hidestreetnumber}static ɵfac=function(e){return new(e||fieldGooglePlacesSearch)(r.Y36(w.o),r.Y36(k.e),r.Y36(x.d),r.Y36(c.Pu),r.Y36(W.C),r.Y36(A.F0))};static ɵcmp=r.Xpm({type:fieldGooglePlacesSearch,selectors:[["field-google-places-search"]],features:[r.qOj],decls:3,vars:3,consts:[[3,"fieldname","fieldconfig",4,"ngIf"],[3,"fielddisplayclass","editable","fieldconfig","title","fieldid",4,"ngIf"],["class","slds-form-element__control",3,"ngClass",4,"ngIf"],[3,"fieldname","fieldconfig"],[3,"fielddisplayclass","editable","fieldconfig","title","fieldid"],[1,"slds-form-element__control",3,"ngClass"],[3,"ngModel","ngModelChange","details"],["focus",""],[3,"fieldname"]],template:function(e,t){1&e&&(r.YNc(0,Cc,1,2,"field-label",0),r.YNc(1,kc,2,6,"field-generic-display",1),r.YNc(2,Ac,4,3,"div",2)),2&e&&(r.Q6J("ngIf",t.displayLabel),r.xp6(1),r.Q6J("ngIf",!t.isEditMode()),r.xp6(1),r.Q6J("ngIf",t.isEditable()&&t.isEditMode()))},dependencies:[i.mk,i.O5,n.JJ,n.On,Tc.l,u.q,C.D,M.a],encapsulation:2})}return fieldGooglePlacesSearch})();function Ic(e,t){if(1&e&&r._UZ(0,"field-label",2),2&e){const e=r.oxw();r.Q6J("fieldname",e.fieldname)("fieldconfig",e.fieldconfig)}}let Sc=(()=>{class fieldTextID extends d.O{model;view;language;metadata;configurationService;router;constructor(e,t,s,i,n,l){super(e,t,s,i,l),this.model=e,this.view=t,this.language=s,this.metadata=i,this.configurationService=n,this.router=l}get textName(){let e=this.configurationService.getData("systextids"),t=e?e[this.value]:void 0;return t&&t.label?this.language.getLabel(t.label):this.value}static ɵfac=function(e){return new(e||fieldTextID)(r.Y36(w.o),r.Y36(k.e),r.Y36(x.d),r.Y36(c.Pu),r.Y36(W.C),r.Y36(A.F0))};static ɵcmp=r.Xpm({type:fieldTextID,selectors:[["field-textid"]],features:[r.qOj],decls:3,vars:7,consts:[[3,"fieldname","fieldconfig",4,"ngIf"],[3,"editable","fielddisplayclass","fieldconfig","title","fieldid"],[3,"fieldname","fieldconfig"]],template:function(e,t){1&e&&(r.YNc(0,Ic,1,2,"field-label",0),r.TgZ(1,"field-generic-display",1),r._uU(2),r.qZA()),2&e&&(r.Q6J("ngIf",t.displayLabel),r.xp6(1),r.Q6J("editable",!1)("fielddisplayclass",t.fielddisplayclass)("fieldconfig",t.fieldconfig)("title",t.value)("fieldid",t.fieldid),r.xp6(1),r.hij(" ",t.textName,"\n"))},dependencies:[i.O5,u.q,C.D],encapsulation:2})}return fieldTextID})();var Mc=s(28973);function Jc(e,t){if(1&e&&(r.TgZ(0,"field-generic-display",2),r._uU(1),r.qZA()),2&e){const e=r.oxw();r.Q6J("fielddisplayclass",e.fielddisplayclass)("editable",e.isEditable())("fieldconfig",e.fieldconfig)("title",e.value)("fieldid",e.fieldid),r.xp6(1),r.AsE(" ",e.className,"->",e.methodName,"\n")}}function Oc(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"div",3)(1,"system-input-backend-method",4),r.NdJ("ngModelChange",(function(t){r.CHM(e);const s=r.oxw();return r.KtG(s.value=t)})),r.qZA(),r._UZ(2,"field-messages",5),r.qZA()}if(2&e){const e=r.oxw();r.Q6J("ngClass",e.css_classes),r.xp6(1),r.Q6J("ngModel",e.value),r.xp6(1),r.Q6J("fieldname",e.fieldname)}}let Nc=(()=>{class fieldBackendMethod extends d.O{model;view;language;metadata;router;classexists=!1;publicMethods=[];constructor(e,t,s,i,n){super(e,t,s,i,n),this.model=e,this.view=t,this.language=s,this.metadata=i,this.router=n}get className(){return this.value?this.value.split("->")[0]:""}set className(e){this.value=e,this.validateNamespace()}get methodName(){if(this.value){if(2==this.value.split("->").length)return this.value.split("->")[1]}return""}set methodName(e){let t=this.value.split("->");this.value=t[0]+"->"+e}validateNamespace(){this.model.backend.getRequest("system/checkclass/"+btoa(this.className)).subscribe((e=>{this.classexists=e.classexists,this.publicMethods=e.methods}))}static ɵfac=function(e){return new(e||fieldBackendMethod)(r.Y36(w.o),r.Y36(k.e),r.Y36(x.d),r.Y36(c.Pu),r.Y36(A.F0))};static ɵcmp=r.Xpm({type:fieldBackendMethod,selectors:[["field-backend-method"]],features:[r.qOj],decls:2,vars:2,consts:[[3,"fielddisplayclass","editable","fieldconfig","title","fieldid",4,"ngIf"],["class","slds-form-element__control slds-p-around--xx-small",3,"ngClass",4,"ngIf"],[3,"fielddisplayclass","editable","fieldconfig","title","fieldid"],[1,"slds-form-element__control","slds-p-around--xx-small",3,"ngClass"],[3,"ngModel","ngModelChange"],[3,"fieldname"]],template:function(e,t){1&e&&(r.YNc(0,Jc,2,7,"field-generic-display",0),r.YNc(1,Oc,3,3,"div",1)),2&e&&(r.Q6J("ngIf",!t.isEditMode()),r.xp6(1),r.Q6J("ngIf",t.isEditable()&&t.isEditMode()))},dependencies:[i.mk,i.O5,n.JJ,n.On,Mc.N,C.D,M.a],encapsulation:2})}return fieldBackendMethod})();var Fc=s(83497);function qc(e,t){if(1&e&&(r.ynx(0),r._UZ(1,"system-label",5),r.BQk()),2&e){const e=r.oxw(2);r.xp6(1),r.Q6J("label",e.value)}}function Ec(e,t){if(1&e&&r._uU(0),2&e){const e=r.oxw(2);r.hij(" ",e.value," ")}}function Yc(e,t){if(1&e&&(r.TgZ(0,"field-generic-display",2),r.YNc(1,qc,2,1,"ng-container",3),r.YNc(2,Ec,1,1,"ng-template",null,4,r.W1O),r.qZA()),2&e){const e=r.MAs(3),t=r.oxw();r.Q6J("fielddisplayclass",t.fielddisplayclass)("editable",t.isEditable())("fieldconfig",t.fieldconfig)("title",t.value)("fieldid",t.fieldid),r.xp6(1),r.Q6J("ngIf",t.fieldconfig.display_as_translated)("ngIfElse",e)}}function Dc(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"div",6)(1,"system-input-label",7),r.NdJ("ngModelChange",(function(t){r.CHM(e);const s=r.oxw();return r.KtG(s.value=t)})),r.qZA(),r._UZ(2,"field-messages",8),r.qZA()}if(2&e){const e=r.oxw();r.Q6J("ngClass",e.css_classes),r.xp6(1),r.Q6J("ngModel",e.value),r.xp6(1),r.Q6J("fieldname",e.fieldname)}}let Uc=(()=>{class fieldSystemLabel extends d.O{static ɵfac=function(){let e;return function(t){return(e||(e=r.n5z(fieldSystemLabel)))(t||fieldSystemLabel)}}();static ɵcmp=r.Xpm({type:fieldSystemLabel,selectors:[["field-system-label"]],features:[r.qOj],decls:2,vars:2,consts:[[3,"fielddisplayclass","editable","fieldconfig","title","fieldid",4,"ngIf"],["class","slds-form-element__control",3,"ngClass",4,"ngIf"],[3,"fielddisplayclass","editable","fieldconfig","title","fieldid"],[4,"ngIf","ngIfElse"],["labelContainer",""],[3,"label"],[1,"slds-form-element__control",3,"ngClass"],[3,"ngModel","ngModelChange"],[3,"fieldname"]],template:function(e,t){1&e&&(r.YNc(0,Yc,4,7,"field-generic-display",0),r.YNc(1,Dc,3,3,"div",1)),2&e&&(r.Q6J("ngIf",!t.isEditMode()),r.xp6(1),r.Q6J("ngIf",t.isEditable()&&t.isEditMode()))},dependencies:[i.mk,i.O5,n.JJ,n.On,Fc.$,te._,C.D,M.a],encapsulation:2})}return fieldSystemLabel})();function Qc(e,t){if(1&e&&(r.TgZ(0,"field-generic-display",2),r._uU(1),r.qZA()),2&e){const e=r.oxw();r.Q6J("fielddisplayclass",e.fielddisplayclass)("editable",e.isEditable())("fieldconfig",e.fieldconfig)("title",e.value)("fieldid",e.fieldid),r.xp6(1),r.hij(" ",e.value,"\n")}}function Rc(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"div",3)(1,"div",4)(2,"input",5,6),r.NdJ("ngModelChange",(function(t){r.CHM(e);const s=r.oxw();return r.KtG(s.timedifferencespan=t)})),r.qZA(),r.TgZ(4,"div",7)(5,"select",8),r.NdJ("ngModelChange",(function(t){r.CHM(e);const s=r.oxw();return r.KtG(s.timedifferenceunit=t)})),r.TgZ(6,"option",9),r._UZ(7,"system-label",10),r.qZA(),r.TgZ(8,"option",11),r._UZ(9,"system-label",12),r.qZA(),r.TgZ(10,"option",13),r._UZ(11,"system-label",14),r.qZA(),r.TgZ(12,"option",15),r._UZ(13,"system-label",16),r.qZA(),r.TgZ(14,"option",17),r._UZ(15,"system-label",18),r.qZA(),r.TgZ(16,"option",19),r._UZ(17,"system-label",20),r.qZA(),r.TgZ(18,"option",21),r._UZ(19,"system-label",22),r.qZA(),r.TgZ(20,"option",23),r._UZ(21,"system-label",24),r.qZA()()()(),r._UZ(22,"field-messages",25),r.qZA()}if(2&e){const e=r.oxw();r.Q6J("ngClass",e.css_classes),r.xp6(2),r.Q6J("ngModel",e.timedifferencespan)("maxlength",e.fieldlength)("ngModelOptions",e.modelOptions),r.xp6(3),r.Q6J("ngModel",e.timedifferenceunit),r.xp6(17),r.Q6J("fieldname",e.fieldname)}}let jc=(()=>{class fieldTimeDifference extends d.O{model;view;language;metadata;router;_timedifferenceunit;_timedifferencespan;constructor(e,t,s,i,n){super(e,t,s,i,n),this.model=e,this.view=t,this.language=s,this.metadata=i,this.router=n}get timedifferenceunit(){return this._timedifferenceunit?this._timedifferenceunit:this.value?this.value.split(" ")[1]:"h"}set timedifferenceunit(e){this._timedifferenceunit=e,this.updateModel()}get timedifferencespan(){return this._timedifferencespan?this._timedifferencespan:this.value?this.value.split(" ")[0]:""}set timedifferencespan(e){this._timedifferencespan=e,this.updateModel()}updateModel(){this._timedifferencespan>0&&this.timedifferenceunit?this.value=this.timedifferencespan+" "+this._timedifferenceunit:this.value=""}static ɵfac=function(e){return new(e||fieldTimeDifference)(r.Y36(w.o),r.Y36(k.e),r.Y36(x.d),r.Y36(c.Pu),r.Y36(A.F0))};static ɵcmp=r.Xpm({type:fieldTimeDifference,selectors:[["field-time-difference"]],features:[r.qOj],decls:2,vars:2,consts:[[3,"fielddisplayclass","editable","fieldconfig","title","fieldid",4,"ngIf"],["class","slds-form-element__control slds-p-around--xx-small",3,"ngClass",4,"ngIf"],[3,"fielddisplayclass","editable","fieldconfig","title","fieldid"],[1,"slds-form-element__control","slds-p-around--xx-small",3,"ngClass"],[1,"slds-grid","slds-grid--vertical-align-center","slds-gutters_direct-xx-small"],["type","number",1,"slds-col","slds-size--1-of-2","slds-input","slds-text-align--right",3,"ngModel","maxlength","ngModelOptions","ngModelChange"],["focus",""],[1,"slds-col","slds-size--1-of-2","slds-select_container"],[1,"slds-select",3,"ngModel","ngModelChange"],["value","i"],["label","LBL_MINUTES"],["value","h"],["label","LBL_HOURS"],["value","H"],["label","LBL_WORKINGHOURS"],["value","d"],["label","LBL_DAYS"],["value","D"],["label","LBL_WORKINGDAYS"],["value","w"],["label","LBL_WEEKS"],["value","M"],["label","LBL_MONTHS"],["value","y"],["label","LBL_YEARS"],[3,"fieldname"]],template:function(e,t){1&e&&(r.YNc(0,Qc,2,6,"field-generic-display",0),r.YNc(1,Rc,23,6,"div",1)),2&e&&(r.Q6J("ngIf",!t.isEditMode()),r.xp6(1),r.Q6J("ngIf",t.isEditable()&&t.isEditMode()))},dependencies:[i.mk,i.O5,n.YN,n.Kr,n.Fj,n.wV,n.EJ,n.JJ,n.nD,n.On,te._,C.D,M.a],encapsulation:2})}return fieldTimeDifference})(),Bc=(()=>{class fieldIconPopover extends d.O{model;view;broadcast;language;metadata;router;elementRef;clickListener;parentTypeSelectOpen=!1;parentSearchOpen=!1;parentSearchTerm="";recentItems=[];constructor(e,t,s,i,n,l,o){super(e,t,i,n,l),this.model=e,this.view=t,this.broadcast=s,this.language=i,this.metadata=n,this.router=l,this.elementRef=o,this.broadcast.message$.subscribe((e=>this.handleMessage(e)))}get parentField(){return this.model.getField("grpaccount_id")}get parentIdField(){return this.fieldconfig.parentIdField?this.fieldconfig.parentIdField:"parent_id"}get memberCount(){return this.model.getField("grp_member_count")}get parentTypes(){let e=["Contacts","Accounts","Leads"];return this.fieldconfig.parenttypes&&(e=this.fieldconfig.parenttypes.replace(/\s/g,"").split(",")),e}handleMessage(e){if(e.messagedata.reference&&"model.save"===e.messagetype)if(this.fieldid===e.messagedata.reference){this.parentSearchTerm="";let t={};t[this.parentIdField]=e.messagedata.data.id,t[this.fieldname]=e.messagedata.data.summary_text,this.model.setFields(t)}}onClick(e){this.elementRef.nativeElement.contains(e.target)||this.closePopups()}closePopups(){this.model.getField(this.parentIdField)&&(this.parentSearchTerm=""),this.parentSearchOpen=!1,this.parentTypeSelectOpen=!1,this.clickListener()}static ɵfac=function(e){return new(e||fieldIconPopover)(r.Y36(w.o),r.Y36(k.e),r.Y36(X.f),r.Y36(x.d),r.Y36(c.Pu),r.Y36(A.F0),r.Y36(r.SBq))};static ɵcmp=r.Xpm({type:fieldIconPopover,selectors:[["field-icon-popover"]],features:[r.qOj],decls:3,vars:3,consts:[[3,"fielddisplayclass","editable","fieldconfig"],["system-model-popover",""],["size","x-small","icon","info"]],template:function(e,t){1&e&&(r.TgZ(0,"field-generic-display",0)(1,"div",1),r._UZ(2,"system-utility-icon",2),r.qZA()()),2&e&&r.Q6J("fielddisplayclass",t.fielddisplayclass)("editable",!1)("fieldconfig",t.fieldconfig)},dependencies:[I.r,ps.g,C.D],encapsulation:2})}return fieldIconPopover})();function Gc(e,t){if(1&e&&r._UZ(0,"field-label",3),2&e){const e=r.oxw();r.Q6J("fieldname",e.fieldname)("fieldconfig",e.fieldconfig)}}function Pc(e,t){if(1&e&&(r.TgZ(0,"field-generic-display",4),r._uU(1),r.qZA()),2&e){const e=r.oxw();r.Q6J("fielddisplayclass",e.fielddisplayclass)("editable",e.isEditable())("fieldconfig",e.fieldconfig)("fieldid",e.fieldid),r.xp6(1),r.hij(" ",e.getValue(),"\n")}}function Hc(e,t){if(1&e&&(r.TgZ(0,"option",13),r._uU(1),r.qZA()),2&e){const e=t.$implicit;r.s9C("value",e.id),r.xp6(1),r.Oqu(e.name)}}function zc(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"div",5)(1,"div",6)(2,"div",7)(3,"select",8,9),r.NdJ("ngModelChange",(function(t){r.CHM(e);const s=r.oxw();return r.KtG(s.value=t)})),r._UZ(5,"option",10),r.YNc(6,Hc,2,2,"option",11),r.qZA()(),r._UZ(7,"field-messages",12),r.qZA()()}if(2&e){const e=r.oxw();r.xp6(1),r.Q6J("ngClass",e.getFieldClass()),r.xp6(2),r.Q6J("ngModel",e.value),r.xp6(3),r.Q6J("ngForOf",e.stylesheets),r.xp6(1),r.Q6J("fieldname",e.fieldname)}}let Vc=(()=>{class fieldStylesheetID extends d.O{model;view;language;metadata;router;stylesheets=[];constructor(e,t,s,i,n){super(e,t,s,i,n),this.model=e,this.view=t,this.language=s,this.metadata=i,this.router=n,this.stylesheets=this.metadata.getHtmlStylesheetNames()}getValue(){if(this.value){let e=this.stylesheets.find((e=>e.id==this.value));if(e)return e.name}return this.value}static ɵfac=function(e){return new(e||fieldStylesheetID)(r.Y36(w.o),r.Y36(k.e),r.Y36(x.d),r.Y36(c.Pu),r.Y36(A.F0))};static ɵcmp=r.Xpm({type:fieldStylesheetID,selectors:[["field-stylesheetid"]],features:[r.qOj],decls:3,vars:3,consts:[[3,"fieldname","fieldconfig",4,"ngIf"],[3,"fielddisplayclass","editable","fieldconfig","fieldid",4,"ngIf"],["class","slds-form-element",4,"ngIf"],[3,"fieldname","fieldconfig"],[3,"fielddisplayclass","editable","fieldconfig","fieldid"],[1,"slds-form-element"],[1,"slds-form-element__control",3,"ngClass"],[1,"slds-select_container","slds-m-vertical--xx-small"],[1,"slds-select",3,"ngModel","ngModelChange"],["focus",""],["value",""],[3,"value",4,"ngFor","ngForOf"],[3,"fieldname"],[3,"value"]],template:function(e,t){1&e&&(r.YNc(0,Gc,1,2,"field-label",0),r.YNc(1,Pc,2,5,"field-generic-display",1),r.YNc(2,zc,8,4,"div",2)),2&e&&(r.Q6J("ngIf",t.displayLabel),r.xp6(1),r.Q6J("ngIf",!t.isEditMode()),r.xp6(1),r.Q6J("ngIf",t.isEditMode()))},dependencies:[i.mk,i.sg,i.O5,n.YN,n.Kr,n.EJ,n.JJ,n.On,u.q,C.D,M.a],encapsulation:2})}return fieldStylesheetID})();var $c=s(51691);function Kc(e,t){if(1&e&&r._UZ(0,"field-label",3),2&e){const e=r.oxw();r.Q6J("fieldname",e.fieldname)("fieldconfig",e.fieldconfig)}}function Xc(e,t){if(1&e&&(r.TgZ(0,"field-generic-display",4),r._uU(1),r.qZA()),2&e){const e=r.oxw();r.Q6J("fielddisplayclass",e.fielddisplayclass)("fieldconfig",e.fieldconfig)("editable",e.isEditable()),r.xp6(1),r.hij(" ",e.getUOMLabel(),"\n")}}function Wc(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"div",5)(1,"system-select-uom",6),r.NdJ("ngModelChange",(function(t){r.CHM(e);const s=r.oxw();return r.KtG(s.value=t)})),r.qZA(),r._UZ(2,"field-messages",7),r.qZA()}if(2&e){const e=r.oxw();r.Q6J("ngClass",e.getFieldClass()),r.xp6(1),r.Q6J("ngModel",e.value),r.xp6(1),r.Q6J("fieldname",e.fieldname)}}let eu=(()=>{class fieldUnitsOfMeasure extends d.O{model;view;language;metadata;router;configuration;uoms=[];constructor(e,t,s,i,n,l){super(e,t,s,i,n),this.model=e,this.view=t,this.language=s,this.metadata=i,this.router=n,this.configuration=l,this.uoms=this.configuration.getData("uomunits")}getUOMLabel(){if(this.value){let e=this.uoms.find((e=>e.id==this.value));if(e)return this.language.getLabel(e.label)}return this.value}static ɵfac=function(e){return new(e||fieldUnitsOfMeasure)(r.Y36(w.o),r.Y36(k.e),r.Y36(x.d),r.Y36(c.Pu),r.Y36(A.F0),r.Y36(W.C))};static ɵcmp=r.Xpm({type:fieldUnitsOfMeasure,selectors:[["field-units-of-measure"]],features:[r.qOj],decls:3,vars:3,consts:[[3,"fieldname","fieldconfig",4,"ngIf"],[3,"fielddisplayclass","fieldconfig","editable",4,"ngIf"],["class","slds-form-element__control",3,"ngClass",4,"ngIf"],[3,"fieldname","fieldconfig"],[3,"fielddisplayclass","fieldconfig","editable"],[1,"slds-form-element__control",3,"ngClass"],[3,"ngModel","ngModelChange"],[3,"fieldname"]],template:function(e,t){1&e&&(r.YNc(0,Kc,1,2,"field-label",0),r.YNc(1,Xc,2,4,"field-generic-display",1),r.YNc(2,Wc,3,3,"div",2)),2&e&&(r.Q6J("ngIf",t.displayLabel),r.xp6(1),r.Q6J("ngIf",!t.isEditMode()),r.xp6(1),r.Q6J("ngIf",t.isEditable()&&t.isEditMode()))},dependencies:[i.mk,i.O5,n.JJ,n.On,$c.E,u.q,C.D,M.a],encapsulation:2})}return fieldUnitsOfMeasure})();function tu(e,t){if(1&e&&r._UZ(0,"field-label",3),2&e){const e=r.oxw();r.Q6J("fieldname",e.fieldname)("fieldconfig",e.fieldconfig)}}function su(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"field-generic-display",4)(1,"div",5)(2,"div",6),r._UZ(3,"system-display-number",7),r.qZA(),r.TgZ(4,"system-select-uom",8),r.NdJ("ngModelChange",(function(t){r.CHM(e);const s=r.oxw();return r.KtG(s.uomid=t)})),r.qZA()()()}if(2&e){const e=r.oxw();r.Q6J("fielddisplayclass",e.fielddisplayclass)("fieldconfig",e.fieldconfig)("editable",e.isEditable()),r.xp6(3),r.Q6J("number",e.value)("precision",e.precision),r.xp6(1),r.Q6J("disabled",!0)("ngModel",e.uomid)}}function iu(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"div",9)(1,"div",10)(2,"div",11)(3,"system-input-number",12),r.NdJ("ngModelChange",(function(t){r.CHM(e);const s=r.oxw();return r.KtG(s.value=t)})),r.qZA()(),r.TgZ(4,"system-select-uom",13),r.NdJ("ngModelChange",(function(t){r.CHM(e);const s=r.oxw();return r.KtG(s.uomid=t)})),r.qZA()(),r._UZ(5,"field-messages",14),r.qZA()}if(2&e){const e=r.oxw();r.Q6J("ngClass",e.getFieldClass()),r.xp6(3),r.Q6J("ngModel",e.value)("asNumber",!0)("precision",e.precision),r.xp6(1),r.Q6J("ngModel",e.uomid),r.xp6(1),r.Q6J("fieldname",e.fieldname)}}let nu=(()=>{class fieldQuantity extends ke{model;view;language;metadata;router;userpreferences;configuration;uoms=[];constructor(e,t,s,i,n,l,o){super(e,t,s,i,n,l),this.model=e,this.view=t,this.language=s,this.metadata=i,this.router=n,this.userpreferences=l,this.configuration=o,this.uoms=this.configuration.getData("uomunits")}get uomidfield(){return this.fieldconfig.uomid_field?this.fieldconfig.uomid_field:this.metadata.getModuleFields(this.model.module).uom_id?"uom_id":void 0}get uomid(){return this.model.getField(this.uomidfield)}set uomid(e){this.model.setField(this.uomidfield,e)}get uomLabel(){if(this.value){let e=this.uoms.find((e=>e.id==this.uomid));return e?this.language.getLabel(e.label):this.uomid}return""}static ɵfac=function(e){return new(e||fieldQuantity)(r.Y36(w.o),r.Y36(k.e),r.Y36(x.d),r.Y36(c.Pu),r.Y36(A.F0),r.Y36(ye.z),r.Y36(W.C))};static ɵcmp=r.Xpm({type:fieldQuantity,selectors:[["field-quantity"]],features:[r.qOj],decls:3,vars:3,consts:[[3,"fieldname","fieldconfig",4,"ngIf"],[3,"fielddisplayclass","fieldconfig","editable",4,"ngIf"],["class","slds-form-element__control",3,"ngClass",4,"ngIf"],[3,"fieldname","fieldconfig"],[3,"fielddisplayclass","fieldconfig","editable"],[1,"slds-grid","slds-grid_vertical-align-center","slds-text-align_right"],[1,"slds-form-element","slds-size--1-of-2"],[3,"number","precision"],[1,"slds-size--1-of-2","slds-p-left--x-small",3,"disabled","ngModel","ngModelChange"],[1,"slds-form-element__control",3,"ngClass"],[1,"slds-grid","slds-grid--align-spread","slds-grid--vertical-align-center"],[1,"slds-form-element","slds-size--2-of-3"],[3,"ngModel","asNumber","precision","ngModelChange"],[1,"slds-size--1-of-3","slds-p-left--x-small",3,"ngModel","ngModelChange"],[3,"fieldname"]],template:function(e,t){1&e&&(r.YNc(0,tu,1,2,"field-label",0),r.YNc(1,su,5,7,"field-generic-display",1),r.YNc(2,iu,6,6,"div",2)),2&e&&(r.Q6J("ngIf",t.displayLabel),r.xp6(1),r.Q6J("ngIf",!t.isEditMode()),r.xp6(1),r.Q6J("ngIf",t.isEditable()&&t.isEditMode()))},dependencies:[i.mk,i.O5,n.JJ,n.On,xe.G,we.i,$c.E,u.q,C.D,M.a],encapsulation:2})}return fieldQuantity})();function lu(e,t){if(1&e&&r._UZ(0,"field-label",3),2&e){const e=r.oxw();r.Q6J("fieldname",e.fieldname)("fieldconfig",e.fieldconfig)}}function ou(e,t){1&e&&(r.TgZ(0,"span"),r._uU(1," • "),r.qZA())}function au(e,t){if(1&e&&(r.TgZ(0,"span"),r._uU(1),r.YNc(2,ou,2,0,"span",2),r.qZA()),2&e){const e=t.$implicit,s=t.last;r.xp6(1),r.AsE("",e.name,": ",e.value,""),r.xp6(1),r.Q6J("ngIf",!s)}}function du(e,t){if(1&e&&(r.TgZ(0,"span"),r.YNc(1,au,3,3,"span",4),r.qZA()),2&e){const e=r.oxw();r.xp6(1),r.Q6J("ngForOf",e.categories)}}function ru(e,t){1&e&&(r.TgZ(0,"span")(1,"i"),r._UZ(2,"system-label",5),r.qZA()())}let cu=(()=>{class fieldQuestionnaireEvaluation extends d.O{model;view;language;metadata;router;backend;categories=[];isEvaluationAvailable=!1;constructor(e,t,s,i,n,l){super(e,t,s,i,n),this.model=e,this.view=t,this.language=s,this.metadata=i,this.router=n,this.backend=l}ngOnInit(){super.ngOnInit();let e=this.model.getRelatedRecords("questionnaireevaluation");if(e&&e[0]&&e[0].questionnaireevaluationitems&&e[0].questionnaireevaluationitems.beans){e[0].questionnaireevaluationitems.beans;for(let t in e[0].questionnaireevaluationitems.beans)this.categories.push(e[0].questionnaireevaluationitems.beans[t]);this.isEvaluationAvailable=!0}}static ɵfac=function(e){return new(e||fieldQuestionnaireEvaluation)(r.Y36(w.o),r.Y36(k.e),r.Y36(x.d),r.Y36(c.Pu),r.Y36(A.F0),r.Y36($.y))};static ɵcmp=r.Xpm({type:fieldQuestionnaireEvaluation,selectors:[["field-questionnaire-evaluation"]],features:[r.qOj],decls:4,vars:7,consts:[[3,"fieldname","fieldconfig",4,"ngIf"],[3,"fielddisplayclass","editable","fieldconfig","fieldid"],[4,"ngIf"],[3,"fieldname","fieldconfig"],[4,"ngFor","ngForOf"],["label","LBL_NO_EVALUATION_AVAILABLE"]],template:function(e,t){1&e&&(r.YNc(0,lu,1,2,"field-label",0),r.TgZ(1,"field-generic-display",1),r.YNc(2,du,2,1,"span",2),r.YNc(3,ru,3,0,"span",2),r.qZA()),2&e&&(r.Q6J("ngIf",t.displayLabel),r.xp6(1),r.Q6J("fielddisplayclass",t.fielddisplayclass)("editable",!1)("fieldconfig",t.fieldconfig)("fieldid",t.fieldid),r.xp6(1),r.Q6J("ngIf",t.isEvaluationAvailable),r.xp6(1),r.Q6J("ngIf",!t.isEvaluationAvailable))},dependencies:[i.sg,i.O5,te._,u.q,C.D],encapsulation:2})}return fieldQuestionnaireEvaluation})();var uu=s(61078);function mu(e,t){if(1&e&&r._UZ(0,"field-label",3),2&e){const e=r.oxw();r.Q6J("fieldname",e.fieldname)("fieldconfig",e.fieldconfig)}}function gu(e,t){if(1&e&&(r.TgZ(0,"field-generic-display",4),r._uU(1),r.qZA()),2&e){const e=r.oxw();r.Q6J("fielddisplayclass",e.fielddisplayclass)("editable",e.isEditable())("fieldconfig",e.fieldconfig),r.xp6(1),r.hij(" ",e.displayTags,"\n")}}function hu(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"li")(1,"span",15),r._uU(2),r.TgZ(3,"span",16),r.NdJ("click",(function(){const t=r.CHM(e).index,s=r.oxw(3);return r.KtG(s.removeByIndex(t))})),r._UZ(4,"system-utility-icon",17),r.qZA()()()}if(2&e){const e=t.$implicit;r.xp6(2),r.hij(" ",e," ")}}function pu(e,t){if(1&e&&(r.TgZ(0,"ul",13),r.YNc(1,hu,5,1,"li",14),r.qZA()),2&e){const e=r.oxw(2);r.xp6(1),r.Q6J("ngForOf",e.objecttags)}}function fu(e,t){1&e&&(r.TgZ(0,"div",18),r._UZ(1,"system-label",19),r.qZA())}function bu(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"div",5)(1,"div",6)(2,"div",7),r.YNc(3,pu,2,1,"ul",8),r.YNc(4,fu,2,0,"div",9),r.qZA(),r.TgZ(5,"div",10)(6,"system-input-tags",11),r.NdJ("tagemitter",(function(t){r.CHM(e);const s=r.oxw();return r.KtG(s.addTag(t))})),r.qZA()()(),r._UZ(7,"field-messages",12),r.qZA()}if(2&e){const e=r.oxw();r.Q6J("ngClass",e.css_classes),r.xp6(3),r.Q6J("ngIf",e.objecttags.length),r.xp6(1),r.Q6J("ngIf",!e.objecttags.length),r.xp6(3),r.Q6J("fieldname",e.fieldname)}}let _u=(()=>{class fieldTags extends d.O{model;view;language;metadata;router;constructor(e,t,s,i,n){super(e,t,s,i,n),this.model=e,this.view=t,this.language=s,this.metadata=i,this.router=n}get displayTags(){let e,t=this.model.getField(this.fieldname);if(!t)return"";try{e=JSON.parse(t)}catch(e){return""}return e.join(", ")}get objecttags(){let e=this.model.getField("tags");if(!e||""===e)return[];try{return JSON.parse(e)}catch(e){return[]}}removeByIndex(e){let t=this.objecttags;t.splice(e,1),this.model.setField("tags",JSON.stringify(t))}addTag(e){if(""!==e){let t=this.objecttags;t.push(e),this.model.setField("tags",JSON.stringify(t))}}static ɵfac=function(e){return new(e||fieldTags)(r.Y36(w.o),r.Y36(k.e),r.Y36(x.d),r.Y36(c.Pu),r.Y36(A.F0))};static ɵcmp=r.Xpm({type:fieldTags,selectors:[["field-tags"]],features:[r.qOj],decls:3,vars:3,consts:[[3,"fieldname","fieldconfig",4,"ngIf"],[3,"fielddisplayclass","editable","fieldconfig",4,"ngIf"],["class","slds-form-element__control slds-p-around--xx-small",3,"ngClass",4,"ngIf"],[3,"fieldname","fieldconfig"],[3,"fielddisplayclass","editable","fieldconfig"],[1,"slds-form-element__control","slds-p-around--xx-small",3,"ngClass"],[1,"slds-grid","slds-grid--vertical-align-end"],[1,"slds-size--2-of-3"],["class","spice-taglist",4,"ngIf"],["style","font-style:italic",4,"ngIf"],[1,"slds-size--1-of-3","slds-p-left--x-small"],[3,"tagemitter"],[3,"fieldname"],[1,"spice-taglist"],[4,"ngFor","ngForOf"],[1,"slds-badge"],[1,"slds-badge__icon","slds-badge__icon_right",3,"click"],["icon","close","size","xx-small"],[2,"font-style","italic"],["label","LBL_NO_TAGS_ASSIGNED"]],template:function(e,t){1&e&&(r.YNc(0,mu,1,2,"field-label",0),r.YNc(1,gu,2,4,"field-generic-display",1),r.YNc(2,bu,8,4,"div",2)),2&e&&(r.Q6J("ngIf",t.displayLabel),r.xp6(1),r.Q6J("ngIf",!t.isEditMode()),r.xp6(1),r.Q6J("ngIf",t.isEditable()&&t.isEditMode()))},dependencies:[i.mk,i.sg,i.O5,uu.C,te._,I.r,u.q,C.D,M.a],encapsulation:2})}return fieldTags})();var vu=s(26951);let yu=(()=>{class fieldRelatedDetailsContainer{model;view;module;id;componentset;constructor(e,t){this.model=e,this.view=t}ngOnChanges(e){this.module==this.model.module&&this.id==this.model.id||(this.model.module=this.module,this.model.id=this.id,this.model.getData(!0))}static ɵfac=function(e){return new(e||fieldRelatedDetailsContainer)(r.Y36(w.o),r.Y36(k.e))};static ɵcmp=r.Xpm({type:fieldRelatedDetailsContainer,selectors:[["field-related-details-container"]],inputs:{module:"module",id:"id",componentset:"componentset"},features:[r._Bn([w.o,k.e]),r.TTD],decls:1,vars:1,consts:[[3,"componentset"]],template:function(e,t){1&e&&r._UZ(0,"system-componentset",0),2&e&&r.Q6J("componentset",t.componentset)},dependencies:[vu.E],encapsulation:2})}return fieldRelatedDetailsContainer})();function xu(e,t){if(1&e&&r._UZ(0,"field-label",5),2&e){const e=r.oxw(2);r.Q6J("fieldname",e.fieldname)("fieldconfig",e.fieldconfig)}}function wu(e,t){if(1&e&&r._UZ(0,"field-related-details-container",6),2&e){const e=r.oxw(2);r.Q6J("module",e.module)("componentset",e.componentset)("id",e.parentId)}}function Zu(e,t){if(1&e&&(r.TgZ(0,"div",1)(1,"div",2),r.YNc(2,xu,1,2,"field-label",3),r.qZA(),r.YNc(3,wu,1,3,"field-related-details-container",4),r.qZA()),2&e){const e=r.oxw();r.Q6J("ngClass",e.getClass()),r.xp6(2),r.Q6J("ngIf",e.displayLabel),r.xp6(1),r.Q6J("ngIf",e.parentId)}}let Tu=(()=>{class fieldParentDetails extends d.O{model;view;language;metadata;router;parentDefs={};constructor(e,t,s,i,n){super(e,t,s,i,n),this.model=e,this.view=t,this.language=s,this.metadata=i,this.router=n}ngOnInit(){super.ngOnInit(),this.getParentDefinition()}get module(){return this.fieldconfig.module}get componentset(){return this.fieldconfig.componentset}get display(){return this.parentId&&this.module==this.parentModule}get parentModule(){return this.parentDefs?.type_name?this.model.getField(this.parentDefs.type_name):void 0}get parentId(){return this.parentDefs?.id_name?this.model.getField(this.parentDefs.id_name):void 0}getParentDefinition(){this.parentDefs=this.metadata.getFieldDefs(this.model.module,this.fieldname)}getClass(){let e=[];return this.fieldconfig.cssclass?e.push(this.fieldconfig.cssclass):e.push("slds-box--border"),e}static ɵfac=function(e){return new(e||fieldParentDetails)(r.Y36(w.o),r.Y36(k.e),r.Y36(x.d),r.Y36(c.Pu),r.Y36(A.F0))};static ɵcmp=r.Xpm({type:fieldParentDetails,selectors:[["ng-component"]],features:[r.qOj],decls:1,vars:1,consts:[[3,"ngClass",4,"ngIf"],[3,"ngClass"],[1,"slds-p-around--xx-small","slds-text-heading--label"],[3,"fieldname","fieldconfig",4,"ngIf"],[3,"module","componentset","id",4,"ngIf"],[3,"fieldname","fieldconfig"],[3,"module","componentset","id"]],template:function(e,t){1&e&&r.YNc(0,Zu,4,3,"div",0),2&e&&r.Q6J("ngIf",t.display)},dependencies:[i.mk,i.O5,u.q,yu],encapsulation:2})}return fieldParentDetails})();function Cu(e,t){if(1&e&&r._UZ(0,"field-label",3),2&e){const e=r.oxw();r.Q6J("fieldname",e.fieldname)("fieldconfig",e.fieldconfig)}}function ku(e,t){if(1&e&&r._UZ(0,"field-related-details-container",4),2&e){const e=r.oxw();r.Q6J("module",e.module)("componentset",e.componentset)("id",e.value)}}let Au=(()=>{class fieldRelatedDetails extends d.O{model;view;language;metadata;router;constructor(e,t,s,i,n){super(e,t,s,i,n),this.model=e,this.view=t,this.language=s,this.metadata=i,this.router=n}get module(){return this.fieldconfig.module}get componentset(){return this.fieldconfig.componentset}static ɵfac=function(e){return new(e||fieldRelatedDetails)(r.Y36(w.o),r.Y36(k.e),r.Y36(x.d),r.Y36(c.Pu),r.Y36(A.F0))};static ɵcmp=r.Xpm({type:fieldRelatedDetails,selectors:[["ng-component"]],features:[r.qOj],decls:3,vars:2,consts:[[1,"slds-box--border"],[3,"fieldname","fieldconfig",4,"ngIf"],[3,"module","componentset","id",4,"ngIf"],[3,"fieldname","fieldconfig"],[3,"module","componentset","id"]],template:function(e,t){1&e&&(r.TgZ(0,"div",0),r.YNc(1,Cu,1,2,"field-label",1),r.YNc(2,ku,1,3,"field-related-details-container",2),r.qZA()),2&e&&(r.xp6(1),r.Q6J("ngIf",t.displayLabel),r.xp6(1),r.Q6J("ngIf",t.value))},dependencies:[i.O5,u.q,yu],encapsulation:2})}return fieldRelatedDetails})();var Lu=s(92251);function Iu(e,t){if(1&e&&r._UZ(0,"field-label",3),2&e){const e=r.oxw();r.Q6J("fieldname",e.fieldname)("fieldconfig",e.fieldconfig)}}function Su(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"div",10),r.NdJ("click",(function(t){r.CHM(e);const s=r.oxw(2);return r.KtG(s.initiateCall(t))})),r._UZ(1,"system-utility-icon",11),r.qZA()}}function Mu(e,t){if(1&e&&(r.TgZ(0,"a",12),r._uU(1),r.qZA()),2&e){const e=r.oxw(2);r.Q6J("href","tel:"+e.value,r.LSH),r.xp6(1),r.Oqu(e.value)}}function Ju(e,t){if(1&e&&(r.TgZ(0,"span"),r._uU(1),r.qZA()),2&e){const e=r.oxw(2);r.xp6(1),r.Oqu(e.value)}}function Ou(e,t){if(1&e&&(r.TgZ(0,"field-generic-display",4)(1,"div",5),r.YNc(2,Su,2,0,"div",6),r.TgZ(3,"div",7),r.YNc(4,Mu,2,2,"a",8),r.YNc(5,Ju,2,1,"span",9),r.qZA()()()),2&e){const e=r.oxw();r.Q6J("fielddisplayclass",e.fielddisplayclass)("editable",e.isEditable())("fieldconfig",e.fieldconfig)("title",e.value)("fieldid",e.fieldid),r.xp6(2),r.Q6J("ngIf",e.telehonyActive&&e.value),r.xp6(2),r.Q6J("ngIf",e.value&&!e.telehonyActive),r.xp6(1),r.Q6J("ngIf",e.value&&e.telehonyActive)}}function Nu(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"div",13)(1,"input",14,15),r.NdJ("ngModelChange",(function(t){r.CHM(e);const s=r.oxw();return r.KtG(s.value=t)})),r.qZA(),r._UZ(3,"field-messages",16),r.qZA()}if(2&e){const e=r.oxw();r.Q6J("ngClass",e.css_classes),r.xp6(1),r.Q6J("ngModel",e.value)("maxlength",e.fieldlength)("autocomplete",e.fieldid)("ngModelOptions",e.modelOptions),r.xp6(2),r.Q6J("fieldname",e.fieldname)}}let Fu=(()=>{class fieldPhone extends d.O{model;view;l;metadata;router;backend;telephony;constructor(e,t,s,i,n,l,o){super(e,t,s,i,n),this.model=e,this.view=t,this.l=s,this.metadata=i,this.router=n,this.backend=l,this.telephony=o}get telehonyActive(){return this.telephony.isActive}initiateCall(e){e.stopPropagation(),this.telephony.initiateCall(this.value,{relatedid:this.model.id,relatedmodule:this.model.module,relateddata:this.model.data})}static ɵfac=function(e){return new(e||fieldPhone)(r.Y36(w.o),r.Y36(k.e),r.Y36(x.d),r.Y36(c.Pu),r.Y36(A.F0),r.Y36($.y),r.Y36(Lu.n))};static ɵcmp=r.Xpm({type:fieldPhone,selectors:[["field-phone"]],features:[r.qOj],decls:3,vars:3,consts:[[3,"fieldname","fieldconfig",4,"ngIf"],[3,"fielddisplayclass","editable","fieldconfig","title","fieldid",4,"ngIf"],["class","slds-form-element__control slds-p-around--xx-small",3,"ngClass",4,"ngIf"],[3,"fieldname","fieldconfig"],[3,"fielddisplayclass","editable","fieldconfig","title","fieldid"],[1,"slds-grid","slds-grid--vertical-align-center"],["class","slds-p-right--x-small slds-text-link--reset",3,"click",4,"ngIf"],[1,"slds-truncate"],[3,"href",4,"ngIf"],[4,"ngIf"],[1,"slds-p-right--x-small","slds-text-link--reset",3,"click"],["icon","outbound_call","size","xx-small"],[3,"href"],[1,"slds-form-element__control","slds-p-around--xx-small",3,"ngClass"],["type","text",1,"slds-input",3,"ngModel","maxlength","autocomplete","ngModelOptions","ngModelChange"],["focus",""],[3,"fieldname"]],template:function(e,t){1&e&&(r.YNc(0,Iu,1,2,"field-label",0),r.YNc(1,Ou,6,8,"field-generic-display",1),r.YNc(2,Nu,4,6,"div",2)),2&e&&(r.Q6J("ngIf",t.displayLabel),r.xp6(1),r.Q6J("ngIf",!t.isEditMode()),r.xp6(1),r.Q6J("ngIf",t.isEditable()&&t.isEditMode()))},dependencies:[i.mk,i.O5,n.Fj,n.JJ,n.nD,n.On,I.r,u.q,C.D,M.a],encapsulation:2})}return fieldPhone})();var qu=s(4728);function Eu(e,t){if(1&e&&r._UZ(0,"field-label",3),2&e){const e=r.oxw();r.Q6J("fieldname",e.fieldname)("fieldconfig",e.fieldconfig)}}function Yu(e,t){if(1&e&&(r.TgZ(0,"field-generic-display",4),r._uU(1),r.qZA()),2&e){const e=r.oxw();r.Q6J("fielddisplayclass",e.fielddisplayclass)("editable",e.isEditable())("fieldconfig",e.fieldconfig)("fieldid",e.fieldid),r.xp6(1),r.hij(" ",e.displayValue,"\n")}}function Du(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"div",5)(1,"div",6)(2,"system-input-actionset",7),r.NdJ("ngModelChange",(function(t){r.CHM(e);const s=r.oxw();return r.KtG(s.value=t)})),r.qZA(),r._UZ(3,"field-messages",8),r.qZA()()}if(2&e){const e=r.oxw();r.xp6(1),r.Q6J("ngClass",e.getFieldClass()),r.xp6(1),r.Q6J("ngModel",e.value),r.xp6(1),r.Q6J("fieldname",e.fieldname)}}let Uu=(()=>{class fieldActionset extends d.O{model;view;language;metadata;router;constructor(e,t,s,i,n){super(e,t,s,i,n),this.model=e,this.view=t,this.language=s,this.metadata=i,this.router=n}get displayValue(){if(!this.value)return"";let e=this.metadata.getActionSet(this.value);return e?e.name:""}static ɵfac=function(e){return new(e||fieldActionset)(r.Y36(w.o),r.Y36(k.e),r.Y36(x.d),r.Y36(c.Pu),r.Y36(A.F0))};static ɵcmp=r.Xpm({type:fieldActionset,selectors:[["ng-component"]],features:[r.qOj],decls:3,vars:3,consts:[[3,"fieldname","fieldconfig",4,"ngIf"],[3,"fielddisplayclass","editable","fieldconfig","fieldid",4,"ngIf"],["class","slds-form-element",4,"ngIf"],[3,"fieldname","fieldconfig"],[3,"fielddisplayclass","editable","fieldconfig","fieldid"],[1,"slds-form-element"],[1,"slds-form-element__control","slds-m-vertical--xx-small",3,"ngClass"],[3,"ngModel","ngModelChange"],[3,"fieldname"]],template:function(e,t){1&e&&(r.YNc(0,Eu,1,2,"field-label",0),r.YNc(1,Yu,2,5,"field-generic-display",1),r.YNc(2,Du,4,3,"div",2)),2&e&&(r.Q6J("ngIf",t.displayLabel),r.xp6(1),r.Q6J("ngIf",!t.isEditMode()),r.xp6(1),r.Q6J("ngIf",t.isEditMode()))},dependencies:[i.mk,i.O5,n.JJ,n.On,qu.Q,u.q,C.D,M.a],encapsulation:2})}return fieldActionset})();var Qu=s(78026),Ru=s(86274);function ju(e,t){if(1&e&&r._UZ(0,"field-label",3),2&e){const e=r.oxw();r.Q6J("fieldname",e.fieldname)("fieldconfig",e.fieldconfig)}}function Bu(e,t){if(1&e&&(r.TgZ(0,"field-generic-display",4)(1,"div",5),r._UZ(2,"system-progress-bar",6),r.TgZ(3,"div",7),r._uU(4),r.qZA()()()),2&e){const e=r.oxw();r.Q6J("fielddisplayclass",e.fielddisplayclass)("editable",e.isEditable())("fieldconfig",e.fieldconfig),r.xp6(2),r.Q6J("progress",e.completion)("hideText",!0),r.xp6(2),r.Oqu(e.value)}}function Gu(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"div",8)(1,"system-slider",9),r.NdJ("ngModelChange",(function(t){r.CHM(e);const s=r.oxw();return r.KtG(s.value=t)})),r.qZA(),r._UZ(2,"field-messages",10),r.qZA()}if(2&e){const e=r.oxw();r.Q6J("ngClass",e.getFieldClass()),r.xp6(1),r.Q6J("min",e.min)("max",e.max)("step",e.step)("ngModel",e.value),r.xp6(1),r.Q6J("fieldname",e.fieldname)}}let Pu=(()=>{class fieldSlider extends d.O{model;view;language;metadata;router;constructor(e,t,s,i,n){super(e,t,s,i,n),this.model=e,this.view=t,this.language=s,this.metadata=i,this.router=n}get min(){return this.fieldconfig.min?parseInt(this.fieldconfig.min,10):0}get max(){return this.fieldconfig.max?parseInt(this.fieldconfig.max,10):100}get step(){return this.fieldconfig.step?parseInt(this.fieldconfig.step,10):10}get value(){let e=this.model.getField(this.fieldname);return e?"number"==typeof e?e:parseInt(e,10):0}set value(e){this.model.setField(this.fieldname,e)}get completion(){return(this.value-this.min)/(this.max-this.min)*100}static ɵfac=function(e){return new(e||fieldSlider)(r.Y36(w.o),r.Y36(k.e),r.Y36(x.d),r.Y36(c.Pu),r.Y36(A.F0))};static ɵcmp=r.Xpm({type:fieldSlider,selectors:[["field-slider"]],features:[r.qOj],decls:3,vars:3,consts:[[3,"fieldname","fieldconfig",4,"ngIf"],[3,"fielddisplayclass","editable","fieldconfig",4,"ngIf"],["class","slds-form-element__control slds-p-top--small",3,"ngClass",4,"ngIf"],[3,"fieldname","fieldconfig"],[3,"fielddisplayclass","editable","fieldconfig"],[1,"slds-grid","slds-grid_vertical-align-center"],[1,"slds-grow",3,"progress","hideText"],[1,"slds-p-left--x-small"],[1,"slds-form-element__control","slds-p-top--small",3,"ngClass"],[3,"min","max","step","ngModel","ngModelChange"],[3,"fieldname"]],template:function(e,t){1&e&&(r.YNc(0,ju,1,2,"field-label",0),r.YNc(1,Bu,5,6,"field-generic-display",1),r.YNc(2,Gu,3,6,"div",2)),2&e&&(r.Q6J("ngIf",t.displayLabel),r.xp6(1),r.Q6J("ngIf",!t.isEditMode()),r.xp6(1),r.Q6J("ngIf",t.isEditable()&&t.isEditMode()))},dependencies:[i.mk,i.O5,n.JJ,n.On,Qu.J,Ru.f,u.q,C.D,M.a],encapsulation:2})}return fieldSlider})();function Hu(e,t){if(1&e&&r._UZ(0,"field-label",4),2&e){const e=r.oxw();r.Q6J("fieldname",e.fieldname)("fieldconfig",e.fieldconfig)}}function zu(e,t){if(1&e&&r._UZ(0,"img",5),2&e){const e=r.oxw();r.Q6J("src",e.imageUrl,r.LSH)}}function Vu(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"button",8),r.NdJ("click",(function(){r.CHM(e);const t=r.oxw(3);return r.KtG(t.editImage())})),r._UZ(1,"system-button-icon",9),r.qZA()}if(2&e){const e=r.oxw(3);r.Q6J("disabled",!e.isEditMode()),r.xp6(1),r.Q6J("icon","image")}}function $u(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"div",10)(1,"button",11),r.NdJ("click",(function(){r.CHM(e);const t=r.oxw(3);return r.KtG(t.editImage())})),r._UZ(2,"system-button-icon",9),r.qZA(),r.TgZ(3,"button",12),r.NdJ("click",(function(){r.CHM(e);const t=r.oxw(3);return r.KtG(t.deleteImage())})),r._UZ(4,"system-button-icon",9),r.qZA()()}2&e&&(r.xp6(2),r.Q6J("icon","edit"),r.xp6(2),r.Q6J("icon","delete"))}function Ku(e,t){if(1&e&&(r.ynx(0),r.YNc(1,Vu,2,2,"button",6),r.YNc(2,$u,5,2,"div",7),r.BQk()),2&e){const e=r.oxw(2);r.xp6(1),r.Q6J("ngIf",e.fieldIsEmpty),r.xp6(1),r.Q6J("ngIf",!e.fieldIsEmpty)}}function Xu(e,t){if(1&e){const e=r.EpF();r.ynx(0),r.TgZ(1,"button",13),r.NdJ("click",(function(){r.CHM(e);const t=r.oxw(2);return r.KtG(t.setEditMode())})),r._UZ(2,"system-button-icon",9),r.qZA(),r.BQk()}2&e&&(r.xp6(2),r.Q6J("icon","edit"))}function Wu(e,t){if(1&e&&(r.ynx(0),r.YNc(1,Ku,3,2,"ng-container",3),r.YNc(2,Xu,3,1,"ng-container",3),r.BQk()),2&e){const e=r.oxw();r.xp6(1),r.Q6J("ngIf",e.isEditMode()),r.xp6(1),r.Q6J("ngIf",!e.isEditMode())}}let em=(()=>{class fieldImage extends d.O{model;view;language;metadata;router;elementRef;renderer;backend;elRef;changeDetRef;modalservice;sanitizer;labelComponent;get fieldIsEmpty(){return!this.value}height="";constructor(e,t,s,i,n,l,o,a,d,r,c,u){super(e,t,s,i,n),this.model=e,this.view=t,this.language=s,this.metadata=i,this.router=n,this.elementRef=l,this.renderer=o,this.backend=a,this.elRef=d,this.changeDetRef=r,this.modalservice=c,this.sanitizer=u}ngAfterViewInit(){this.fieldconfig.height&&(this.height="calc("+this.fieldconfig.height+" - 2px - 0.5rem )")}get imageUrl(){return this.sanitizer.bypassSecurityTrustResourceUrl("data:"+this.value)}get style(){return{height:this.height}}deleteImage(){this.value=""}editImage(e=null){this.modalservice.openModal("SystemImageModal").subscribe((t=>{this.field_defs.maxWidth&&(t.instance.maxWidth=this.field_defs.maxWidth),this.field_defs.maxHeight&&(t.instance.maxHeight=this.field_defs.maxHeight);let s=this.labelComponent.label;s||(s=this.language.getLabel("LBL_IMAGE")),t.instance.title=s,this.value&&(t.instance.imageData=this.value),t.instance.answer.subscribe((e=>{!1!==e&&(this.value=e)})),e&&(t.instance.droppedFiles=e)}))}onDrop(e){this.view.setEditMode(),this.editImage(e)}static ɵfac=function(e){return new(e||fieldImage)(r.Y36(w.o),r.Y36(k.e),r.Y36(x.d),r.Y36(c.Pu),r.Y36(A.F0),r.Y36(r.SBq),r.Y36(r.Qsj),r.Y36($.y),r.Y36(r.SBq),r.Y36(r.sBO),r.Y36(L.o),r.Y36(ee.H7))};static ɵcmp=r.Xpm({type:fieldImage,selectors:[["field-image"]],viewQuery:function(e,t){if(1&e&&r.Gf(u.q,5),2&e){let e;r.iGM(e=r.CRH())&&(t.labelComponent=e.first)}},features:[r.qOj],decls:4,vars:5,consts:[[3,"fieldname","fieldconfig",4,"ngIf"],[1,"slds-is-relative","slds-box--border","slds-align_absolute-center",3,"ngClass","ngStyle","system-drop-file"],["style","max-height:100%;padding:0.25rem",3,"src",4,"ngIf"],[4,"ngIf"],[3,"fieldname","fieldconfig"],[2,"max-height","100%","padding","0.25rem",3,"src"],["class","slds-button slds-button_icon slds-button_icon-container slds-button_icon-border-filled slds-align--absolute-center slds-m-around--medium",3,"disabled","click",4,"ngIf"],["class","slds-is-absolute spice-button-group-vertical slds-is-absolute","style","bottom:0.5rem;right:0.5rem;",4,"ngIf"],[1,"slds-button","slds-button_icon","slds-button_icon-container","slds-button_icon-border-filled","slds-align--absolute-center","slds-m-around--medium",3,"disabled","click"],[3,"icon"],[1,"slds-is-absolute","spice-button-group-vertical","slds-is-absolute",2,"bottom","0.5rem","right","0.5rem"],[1,"slds-button","slds-button_icon-container","slds-button_icon-border-filled","slds-button--icon-small",3,"click"],["title","Delete",1,"slds-button","slds-button_icon-container","slds-button_icon-border-filled","slds-button--icon-small",3,"click"],[1,"slds-button","slds-button_icon","slds-is-absolute",2,"bottom","0.75rem","right","0.75rem","background-color","#fff","box-shadow","0px 0px 2px 3px rgba(255,255,255,1)",3,"click"]],template:function(e,t){1&e&&(r.YNc(0,Hu,1,2,"field-label",0),r.TgZ(1,"div",1),r.NdJ("system-drop-file",(function(e){return t.onDrop(e)})),r.YNc(2,zu,1,1,"img",2),r.YNc(3,Wu,3,2,"ng-container",3),r.qZA()),2&e&&(r.Q6J("ngIf",t.displayLabel),r.xp6(1),r.Q6J("ngClass",t.fielddisplayclass)("ngStyle",t.style),r.xp6(1),r.Q6J("ngIf",!t.fieldIsEmpty),r.xp6(1),r.Q6J("ngIf",!t.model.isLoading))},dependencies:[i.mk,i.O5,i.PC,Z.J,Al.M,u.q],encapsulation:2})}return fieldImage})();const tm=["compound"];function sm(e,t){if(1&e&&(r.TgZ(0,"legend",4),r._uU(1),r.qZA()),2&e){const e=r.oxw();r.xp6(1),r.Oqu(e.label)}}let im=(()=>{class fieldCompound extends d.O{compound;ngOnInit(){super.ngOnInit(),this.metadata.addComponent("ObjectRecordFieldset",this.compound).subscribe((e=>{e.instance.fieldset=this.fieldconfig.fieldset,e.instance.direction="horizontal",e.instance.fieldpadding="xxx-small"}))}get label(){if(this.fieldconfig.label){if(this.fieldconfig.label.indexOf(":")>0){let e=this.fieldconfig.label.split(":");return this.language.getLabel(e[1],e[0],this.view.labels)}return this.language.getLabel(this.fieldconfig.label,this.model.module,this.view.labels)}return this.language.getFieldDisplayName(this.model.module,this.fieldname,this.fieldconfig,this.view.labels)}static ɵfac=function(){let e;return function(t){return(e||(e=r.n5z(fieldCompound)))(t||fieldCompound)}}();static ɵcmp=r.Xpm({type:fieldCompound,selectors:[["field-compound"]],viewQuery:function(e,t){if(1&e&&r.Gf(tm,7,r.s_b),2&e){let e;r.iGM(e=r.CRH())&&(t.compound=e.first)}},features:[r.qOj],decls:5,vars:1,consts:[[1,"slds-form-element","slds-form-element_compound","slds-box","slds-box_x-small","slds-p-top_none"],["class","slds-form-element__legend slds-form-element__label slds-p-left_xx-small","style","float:none",4,"ngIf"],[1,"slds-form-element__control"],["compound",""],[1,"slds-form-element__legend","slds-form-element__label","slds-p-left_xx-small",2,"float","none"]],template:function(e,t){1&e&&(r.TgZ(0,"fieldset",0),r.YNc(1,sm,2,1,"legend",1),r.TgZ(2,"div",2),r._UZ(3,"div",null,3),r.qZA()()),2&e&&(r.xp6(1),r.Q6J("ngIf",t.displayLabel))},dependencies:[i.O5],encapsulation:2})}return fieldCompound})();function nm(e,t){if(1&e&&r._UZ(0,"field-label",3),2&e){const e=r.oxw();r.Q6J("fieldname",e.fieldname)("fieldconfig",e.fieldconfig)}}function lm(e,t){if(1&e&&r._UZ(0,"system-utility-icon",4),2&e){const e=r.oxw();r.Q6J("size",e.fieldconfig.size)("icon",e.icon)("title",e.label)("colorclass",e.colorClass)}}let om=(()=>{class fieldIconCondition extends d.O{model;view;language;metadata;backend;router;cdRef;setterTimeout;icon;label;colorClass="slds-icon-text-default";fieldconfig={};constructor(e,t,s,i,n,l,o){super(e,t,s,i,l),this.model=e,this.view=t,this.language=s,this.metadata=i,this.backend=n,this.router=l,this.cdRef=o,this.subscriptions.add(this.subscribeToModelChanges())}ngOnInit(){super.ngOnInit(),this.setValues()}subscribeToModelChanges(){return this.model.data$.subscribe((()=>{this.setValues()}))}setValues(){window.clearTimeout(this.setterTimeout),this.setterTimeout=window.setTimeout((()=>{this.fieldconfig.modulefilter?this.model.checkModuleFilterMatch(this.fieldconfig.modulefilter)?(this.icon=this.fieldconfig.matchIcon,this.label=this.fieldconfig.matchLabel,this.fieldconfig.matchColorTheme&&(this.colorClass="slds-icon-text-"+this.fieldconfig.matchColorTheme)):(this.icon=this.fieldconfig.mismatchIcon,this.label=this.fieldconfig.mismatchLabel,this.fieldconfig.mismatchColorTheme&&(this.colorClass="slds-icon-text-"+this.fieldconfig.mismatchColorTheme)):(this.icon=this.fieldconfig.icon,this.label=this.fieldconfig.label,this.fieldconfig.colorTheme&&(this.colorClass="slds-icon-text-"+this.fieldconfig.colorTheme)),this.cdRef.detectChanges()}),1e3)}static ɵfac=function(e){return new(e||fieldIconCondition)(r.Y36(w.o),r.Y36(k.e),r.Y36(x.d),r.Y36(c.Pu),r.Y36($.y),r.Y36(A.F0),r.Y36(r.sBO))};static ɵcmp=r.Xpm({type:fieldIconCondition,selectors:[["field-icon-condition"]],inputs:{fieldconfig:"fieldconfig"},features:[r.qOj],decls:3,vars:4,consts:[[3,"fieldname","fieldconfig",4,"ngIf"],[3,"fielddisplayclass","fieldconfig"],[3,"size","icon","title","colorclass",4,"ngIf"],[3,"fieldname","fieldconfig"],[3,"size","icon","title","colorclass"]],template:function(e,t){1&e&&(r.YNc(0,nm,1,2,"field-label",0),r.TgZ(1,"field-generic-display",1),r.YNc(2,lm,1,4,"system-utility-icon",2),r.qZA()),2&e&&(r.Q6J("ngIf",t.displayLabel),r.xp6(1),r.Q6J("fielddisplayclass",t.fielddisplayclass)("fieldconfig",t.fieldconfig),r.xp6(1),r.Q6J("ngIf",!!t.icon))},dependencies:[i.O5,I.r,u.q,C.D],encapsulation:2,changeDetection:0})}return fieldIconCondition})();var am=s(18322);function dm(e,t){if(1&e&&r._UZ(0,"field-label",3),2&e){const e=r.oxw();r.Q6J("fieldname",e.fieldname)("fieldconfig",e.fieldconfig)}}let rm=(()=>{class fieldIndicator extends d.O{model;view;language;metadata;router;constructor(e,t,s,i,n){super(e,t,s,i,n),this.model=e,this.view=t,this.language=s,this.metadata=i,this.router=n}get indicatorValue(){return this.fieldconfig.up&&this.value==this.fieldconfig.up?"up":this.fieldconfig.down&&this.value==this.fieldconfig.down?"down":"neutral"}static ɵfac=function(e){return new(e||fieldIndicator)(r.Y36(w.o),r.Y36(k.e),r.Y36(x.d),r.Y36(c.Pu),r.Y36(A.F0))};static ɵcmp=r.Xpm({type:fieldIndicator,selectors:[["field-indicator"]],features:[r.qOj],decls:3,vars:7,consts:[[3,"fieldname","fieldconfig",4,"ngIf"],[3,"fielddisplayclass","editable","fieldconfig","title","fieldid"],[3,"trend"],[3,"fieldname","fieldconfig"]],template:function(e,t){1&e&&(r.YNc(0,dm,1,2,"field-label",0),r.TgZ(1,"field-generic-display",1),r._UZ(2,"system-trend-indicator",2),r.qZA()),2&e&&(r.Q6J("ngIf",t.displayLabel),r.xp6(1),r.Q6J("fielddisplayclass",t.fielddisplayclass)("editable",!1)("fieldconfig",t.fieldconfig)("title",t.value)("fieldid",t.fieldid),r.xp6(1),r.Q6J("trend",t.indicatorValue))},dependencies:[i.O5,am.E,u.q,C.D],encapsulation:2})}return fieldIndicator})();var cm=s(83398);const um=function(e){return{label:e}};function mm(e,t){if(1&e&&r._UZ(0,"field-label",13),2&e){const e=r.oxw();r.Q6J("fieldconfig",r.VKq(1,um,"LBL_"+e.addressType.toUpperCase()))}}function gm(e,t){if(1&e&&(r.TgZ(0,"span",20),r._UZ(1,"system-icon",21),r.qZA()),2&e){const e=r.oxw().$implicit;r.xp6(1),r.Q6J("module",e.parent_type)}}function hm(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"li",14),r.NdJ("cdkDragStarted",(function(){r.CHM(e);const t=r.oxw();return r.KtG(t.parent.dragging=!0)}))("cdkDragEnded",(function(){r.CHM(e);const t=r.oxw();return r.KtG(t.parent.dragging=!1)})),r.TgZ(1,"span",15),r.YNc(2,gm,2,1,"span",16),r.TgZ(3,"span",17),r._uU(4),r.qZA(),r.TgZ(5,"span",18)(6,"system-button-icon",19),r.NdJ("click",(function(t){const s=r.CHM(e).$implicit,i=r.oxw();return r.KtG(i.removeEmailAddress(t,s.email_address_id))})),r.qZA()()()()}if(2&e){const e=t.$implicit,s=r.oxw();r.Q6J("cdkDragData",e)("cdkDragBoundary",s.parent.elementRef),r.xp6(2),r.Q6J("ngIf",!!e.parent_id&&!!e.parent_type),r.xp6(2),r.hij(" ",e.email_address," "),r.xp6(2),r.Q6J("icon","close")}}function pm(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"li",22)(1,"div",23)(2,"div",24),r.Hsn(3),r.qZA(),r.TgZ(4,"input",25),r.NdJ("ngModelChange",(function(t){r.CHM(e);const s=r.oxw();return r.KtG(s.inputTextValue=t)}))("blur",(function(){r.CHM(e);const t=r.oxw();return r.KtG(t.onBlur())}))("keyup",(function(t){r.CHM(e);const s=r.oxw();return r.KtG(s.onKeyUp(t))}))("keydown.,",(function(e){return e.preventDefault()})),r.qZA()()()}if(2&e){const e=r.oxw();r.xp6(4),r.Q6J("ngModel",e.inputTextValue),r.uIk("system-autofocus","to"==e.addressType)}}function fm(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"div",28),r.NdJ("click",(function(){r.CHM(e);const t=r.oxw(2);return t.addEmailAddressFromInput(),r.KtG(t.hideDropdown())})),r._UZ(1,"system-label",29),r.TgZ(2,"div",30),r._uU(3),r.qZA()()}if(2&e){const e=r.oxw(2);r.xp6(2),r.Q6J("title",e.inputTextValue),r.xp6(1),r.hij(" ",e.inputTextValue," ")}}function bm(e,t){if(1&e&&(r.TgZ(0,"div",31),r._UZ(1,"system-utility-icon",32),r.TgZ(2,"div",33),r._UZ(3,"system-label",34),r.TgZ(4,"div",35),r._uU(5),r.qZA()()()),2&e){const e=r.oxw(2);r.xp6(2),r.Q6J("title",e.inputTextValue),r.xp6(3),r.hij(' "',e.inputTextValue,'" ')}}function _m(e,t){if(1&e&&(r.TgZ(0,"div"),r.YNc(1,fm,4,2,"div",26),r.YNc(2,bm,6,2,"ng-template",null,27,r.W1O),r.qZA()),2&e){const e=r.MAs(3),t=r.oxw();r.xp6(1),r.Q6J("ngIf",t.isValidEmailAddress)("ngIfElse",e)}}function vm(e,t){1&e&&r._UZ(0,"system-spinner",39)}function ym(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"li",42),r.NdJ("click",(function(){const t=r.CHM(e).$implicit,s=r.oxw(3);return r.KtG(s.selectEmailAddress(t))})),r.TgZ(1,"div",43),r._UZ(2,"system-icon",44),r.TgZ(3,"div",45)(4,"span",46),r._uU(5),r.qZA()()()()}if(2&e){const e=t.$implicit;r.xp6(2),r.Q6J("module",e.module),r.xp6(3),r.AsE(" ",e.email_address," • ",e.summary_text," ")}}function xm(e,t){if(1&e&&(r.TgZ(0,"ul",40),r.YNc(1,ym,6,3,"li",41),r.qZA()),2&e){const e=r.oxw(2);r.xp6(1),r.Q6J("ngForOf",e.searchResults)}}function wm(e,t){1&e&&(r.TgZ(0,"div",47),r._UZ(1,"system-label",48),r.qZA())}function Zm(e,t){if(1&e&&(r.YNc(0,vm,1,0,"system-spinner",36),r.YNc(1,xm,2,1,"ul",37),r.YNc(2,wm,2,0,"div",38)),2&e){const e=r.oxw();r.Q6J("ngIf",e.searchResultsLoading),r.xp6(1),r.Q6J("ngIf",(null==e.searchResults?null:e.searchResults.length)>0),r.xp6(1),r.Q6J("ngIf",0==(null==e.searchResults?null:e.searchResults.length)&&!e.searchResultsLoading)}}function Tm(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"button",49),r.NdJ("click",(function(){r.CHM(e);const t=r.oxw();return r.KtG(t.searchParentEmailAddresses())})),r._UZ(1,"system-button-icon",50),r.qZA()}}const Cm=["*"];let km=(()=>{class fieldEmailRecipientsInput{model;language;modal;injector;backend;renderer;elementRef;parent;zone;searchResults=[];isInputTextVisible=!1;isDropdownVisible=!1;inputTextValue="";inputCCTextValue="";previousInputTextValue="";searchTimeOut=void 0;searchResultsLoading=!1;searchAllowed=!1;isValidEmailAddress=!1;clickListener;addressType;displayValue=[];drop$=new r.vpe;constructor(e,t,s,i,n,l,o,a,d){this.model=e,this.language=t,this.modal=s,this.injector=i,this.backend=n,this.renderer=l,this.elementRef=o,this.parent=a,this.zone=d}get value(){return this.model.getField("recipient_addresses")}set value(e){this.model.setField("recipient_addresses",e),this.parent.setDisplayValue()}get hasParent(){return!!this.model.getField("parent_id")}ngOnChanges(){(["cc","bcc"].indexOf(this.addressType)>-1||"to"==this.addressType&&this.parent.focused)&&(this.displayValue=this.displayValue.filter((e=>e.address_type==this.addressType)))}searchParentEmailAddresses(){this.modal.openModal("EmailParentAddressesModal",!0,this.injector).subscribe((e=>{this.parent.clickListener&&(this.parent.clickListener(),this.parent.clickListener=void 0),e.instance.addAddresses.subscribe((e=>{for(let t of e){const e={id:this.model.generateGuid(),address_type:this.addressType,email_address:t.email_address,email_address_id:t.email_address_id,parent_type:t.module,parent_id:t.id};this.value=[...this.model.getField("recipient_addresses"),e],this.isInputTextVisible=!0,this.parent.focused=!0}}))}))}validateEmail(e){this.isValidEmailAddress=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(String(e).toLowerCase())}onBlur(){this.inputTextValue||(this.isInputTextVisible=!1)}onFieldClick(){this.isInputTextVisible=!0,this.showDropdown()}removeEmailAddress(e,t){this.model.getField("recipient_addresses")&&0!=this.model.getField("recipient_addresses").length&&(this.value=this.model.getField("recipient_addresses").filter((e=>e.email_address_id!=t)),e.preventDefault(),e.stopPropagation())}onKeyUp(e){switch(this.searchAllowed=this.inputTextValue.length>2&&-1==this.inputTextValue.indexOf("@"),this.validateEmail(this.inputTextValue),this.inputTextValue.length<3&&this.hideDropdown(),e.key){case"Enter":case",":this.searchAllowed=!1,this.addEmailAddressFromInput();break;case"Backspace":this.inputTextValue||this.previousInputTextValue||this.removeLastEmailAddress(),this.showDropdown(),this.doSearch();break;default:this.showDropdown(),this.doSearch()}this.previousInputTextValue=this.inputTextValue}removeLastEmailAddress(){this.value&&0!=this.value.length&&(this.value=this.model.getField("recipient_addresses").slice(0,this.model.getField("recipient_addresses").length-1))}addEmailAddressFromInput(){if(!this.isValidEmailAddress)return;this.searchTimeOut&&window.clearTimeout(this.searchTimeOut);const e={id:this.model.generateGuid(),address_type:this.addressType,email_address:this.inputTextValue};this.value=[...this.model.getField("recipient_addresses"),e],this.hideDropdown(),this.resetInputTextValue()}doSearch(){this.searchAllowed&&this.previousInputTextValue!=this.inputTextValue&&this.zone.runOutsideAngular((()=>{this.searchTimeOut&&window.clearTimeout(this.searchTimeOut),this.searchTimeOut=window.setTimeout((()=>{this.inputTextValue&&(this.zone.run((()=>{this.searchResults=[],this.searchResultsLoading=!0})),this.backend.getRequest("module/EmailAddresses/"+this.inputTextValue).subscribe((e=>{this.zone.run((()=>{e&&e.length>0&&(this.searchResults=e),this.searchResultsLoading=!1}))})))}),1e3)}))}selectEmailAddress(e){const t={id:this.model.generateGuid(),address_type:this.addressType,email_address:e.email_address,email_address_id:e.email_address_id,parent_type:e.module,parent_id:e.id};this.value=[...this.model.getField("recipient_addresses"),t],this.resetInputTextValue(),this.hideDropdown()}resetInputTextValue(){this.inputTextValue="",this.previousInputTextValue=""}addDocumentClickListener(){this.clickListener=this.renderer.listen("document","click",(e=>{this.elementRef.nativeElement.contains(e.target)||this.hideDropdown()}))}showDropdown(){this.inputTextValue.length<3||(this.isDropdownVisible=!0,this.clickListener||this.addDocumentClickListener())}hideDropdown(){this.isDropdownVisible=!1,(!this.inputTextValue||this.inputTextValue.length<3)&&(this.searchResults=[]),this.clickListener&&(this.clickListener(),this.clickListener=!1)}static ɵfac=function(e){return new(e||fieldEmailRecipientsInput)(r.Y36(w.o),r.Y36(x.d),r.Y36(L.o),r.Y36(r.zs3),r.Y36($.y),r.Y36(r.Qsj),r.Y36(r.SBq),r.Y36(ko,1),r.Y36(r.R0b))};static ɵcmp=r.Xpm({type:fieldEmailRecipientsInput,selectors:[["field-email-recipients-input"]],inputs:{addressType:"addressType",displayValue:"displayValue"},outputs:{drop$:"drop$"},features:[r.TTD],ngContentSelectors:Cm,decls:14,vars:9,consts:[[3,"fieldconfig",4,"ngIf"],[1,"slds-grid","slds-grid--vertical-align-center"],[1,"slds-combobox_container","slds-grow"],["role","combobox",1,"slds-combobox","slds-dropdown-trigger","slds-dropdown-trigger_click"],["role","none",1,"slds-combobox__form-element"],[1,"slds-pill_container",3,"click"],["cdkDropList","","cdkDropListOrientation","horizontal","role","listbox",1,"slds-listbox","slds-listbox_horizontal","slds-size--1-of-1",3,"cdkDropListData","cdkDropListDropped"],["cdkDrag","","class","slds-listbox-item slds-drag--preview","role","presentation","style","cursor: grab; list-style: none;",3,"cdkDragData","cdkDragBoundary","cdkDragStarted","cdkDragEnded",4,"ngFor","ngForOf"],["class","slds-listbox-item slds-grow","role","presentation",4,"ngIf"],["role","listbox",1,"slds-dropdown","slds-dropdown_fluid"],[4,"ngIf","ngIfElse"],["searchContainer",""],["system-title","LBL_SELECT_PARENT_EMAIL","class","slds-button--icon slds-button--icon-border-filled slds-m-left--xx-small",3,"click",4,"ngIf"],[3,"fieldconfig"],["cdkDrag","","role","presentation",1,"slds-listbox-item","slds-drag--preview",2,"cursor","grab","list-style","none",3,"cdkDragData","cdkDragBoundary","cdkDragStarted","cdkDragEnded"],["role","option",1,"slds-pill"],["class","slds-icon_container",4,"ngIf"],[1,"slds-pill__label"],[1,"slds-icon_container","slds-pill__remove",2,"cursor","pointer"],[3,"icon","click"],[1,"slds-icon_container"],["size","x-small","divClass","slds-p-right--x-small",3,"module"],["role","presentation",1,"slds-listbox-item","slds-grow"],[1,"slds-form-element__control","slds-input-has-icon--right","slds-input-has-icon_group-right","slds-grow"],[1,"slds-input__icon-group","slds-input__icon-group_right","slds-m-right--xx-small"],["type","text","autocomplete","new-email-address","system-title","LBL_ADD_EMAILADDRESS","system-placeholder","LBL_ADD_EMAILADDRESS",1,"slds-p-horizontal--x-small","slds-size--1-of-1",3,"ngModel","ngModelChange","blur","keyup","keydown.,"],["class","slds-size--1-of-1 slds-grid slds-grid--vertical-align-center slds-p-around--x-small","style","cursor:pointer;",3,"click",4,"ngIf","ngIfElse"],["invalidEmailAddressContainer",""],[1,"slds-size--1-of-1","slds-grid","slds-grid--vertical-align-center","slds-p-around--x-small",2,"cursor","pointer",3,"click"],["label","LBL_USE",2,"display","block"],[1,"slds-truncate","slds-grow","slds-m-left--xx-small",2,"font-family","sans-serif","font-weight","bold",3,"title"],[1,"slds-grid","slds-grid--vertical-align-center","slds-p-around--x-small"],["icon","warning","size","x-small","colorclass","slds-icon-text-warning",1,"slds-m-right--xx-small",2,"display","block"],[1,"slds-grow","slds-grid","slds-grid--vertical-align-center","slds-truncate",3,"title"],["label","LBL_INPUT_INVALID",2,"display","block","white-space","nowrap"],[1,"slds-truncate","slds-grow","slds-m-left--xx-small",2,"font-style","italic"],["size","12","class","slds-grid slds-p-around--small",4,"ngIf"],["class","slds-listbox slds-listbox_vertical","role","presentation",4,"ngIf"],["class","slds-p-around--x-small",4,"ngIf"],["size","12",1,"slds-grid","slds-p-around--small"],["role","presentation",1,"slds-listbox","slds-listbox_vertical"],["role","presentation","class","slds-listbox__item",3,"click",4,"ngFor","ngForOf"],["role","presentation",1,"slds-listbox__item",3,"click"],[1,"slds-listbox__option","slds-grid","slds-grid--vertical-align-center","slds-p-around--x-small"],["size","x-small",1,"slds-p-right--x-small",3,"module"],[1,"slds-media__body"],[1,"slds-listbox__option-text","slds-listbox__option-text_entity"],[1,"slds-p-around--x-small"],["label","MSG_NO_RECORDS_FOUND"],["system-title","LBL_SELECT_PARENT_EMAIL",1,"slds-button--icon","slds-button--icon-border-filled","slds-m-left--xx-small",3,"click"],["icon","record_lookup"]],template:function(e,t){if(1&e&&(r.F$t(),r.YNc(0,mm,1,3,"field-label",0),r.TgZ(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5),r.NdJ("click",(function(){return t.onFieldClick()})),r.TgZ(6,"ul",6),r.NdJ("cdkDropListDropped",(function(e){return t.drop$.emit(e)})),r.YNc(7,hm,7,5,"li",7),r.YNc(8,pm,5,2,"li",8),r.qZA()()(),r.TgZ(9,"div",9),r.YNc(10,_m,4,2,"div",10),r.YNc(11,Zm,3,3,"ng-template",null,11,r.W1O),r.qZA()()(),r.YNc(13,Tm,2,0,"button",12),r.qZA()),2&e){const e=r.MAs(12);r.Q6J("ngIf","cc"==t.addressType||"bcc"==t.addressType),r.xp6(3),r.ekj("slds-is-open",t.isDropdownVisible),r.xp6(3),r.Q6J("cdkDropListData",t.addressType),r.xp6(1),r.Q6J("ngForOf",t.displayValue),r.xp6(1),r.Q6J("ngIf",!t.parent.dragging),r.xp6(2),r.Q6J("ngIf",!t.searchAllowed)("ngIfElse",e),r.xp6(3),r.Q6J("ngIf",t.hasParent)}},dependencies:[i.sg,i.O5,n.Fj,n.JJ,n.On,Z.J,gs.f,te._,Vl.W,I.r,cm.A,Pn.S,l.Wj,l.Zt,u.q],styles:["input[_ngcontent-%COMP%], input[_ngcontent-%COMP%]:focus{border:none;outline:none}"]})}return fieldEmailRecipientsInput})();function Am(e,t){if(1&e&&r._UZ(0,"field-label",3),2&e){const e=r.oxw();r.Q6J("fieldname",e.fieldname)("fieldconfig",e.fieldconfig)}}let Lm=(()=>{class fieldJson extends d.O{model;view;language;metadata;router;constructor(e,t,s,i,n){super(e,t,s,i,n),this.model=e,this.view=t,this.language=s,this.metadata=i,this.router=n}get value(){return JSON.stringify(JSON.parse(this.model.getField(this.fieldname)),null,"\t")}set value(e){this.model.setField(this.fieldname,e)}static ɵfac=function(e){return new(e||fieldJson)(r.Y36(w.o),r.Y36(k.e),r.Y36(x.d),r.Y36(c.Pu),r.Y36(A.F0))};static ɵcmp=r.Xpm({type:fieldJson,selectors:[["field-json"]],features:[r.qOj],decls:4,vars:7,consts:[[3,"fieldname","fieldconfig",4,"ngIf"],[3,"fielddisplayclass","editable","fieldconfig","title","fieldid"],[2,"overflow-wrap","break-word","white-space","pre-wrap"],[3,"fieldname","fieldconfig"]],template:function(e,t){1&e&&(r.YNc(0,Am,1,2,"field-label",0),r.TgZ(1,"field-generic-display",1)(2,"div",2),r._uU(3),r.qZA()()),2&e&&(r.Q6J("ngIf",t.displayLabel),r.xp6(1),r.Q6J("fielddisplayclass",t.fielddisplayclass)("editable",!1)("fieldconfig",t.fieldconfig)("title",t.value)("fieldid",t.fieldid),r.xp6(2),r.Oqu(t.value))},dependencies:[i.O5,u.q,C.D],encapsulation:2})}return fieldJson})();function Im(e,t){if(1&e&&r._UZ(0,"field-label",3),2&e){const e=r.oxw();r.Q6J("fieldname",e.fieldname)("fieldconfig",e.fieldconfig)}}function Sm(e,t){if(1&e&&r._UZ(0,"system-icon",10),2&e){const e=r.oxw(3);r.Q6J("module",e.model.data[e.parentTypeField])("size","x-small")}}function Mm(e,t){if(1&e&&(r.TgZ(0,"span",11),r._uU(1),r.qZA()),2&e){const e=r.oxw(3);r.Q6J("module",e.parentType)("id",e.parentId),r.xp6(1),r.Oqu(e.value)}}function Jm(e,t){if(1&e&&(r.TgZ(0,"span"),r._UZ(1,"field-linked-details",12),r.qZA()),2&e){const e=r.oxw(3);r.xp6(1),r.Q6J("fieldset",e.fieldconfig.fieldset)("module",e.parentType)("data",e.relData)}}function Om(e,t){if(1&e&&(r.TgZ(0,"div",6),r.YNc(1,Sm,1,2,"system-icon",7),r.YNc(2,Mm,2,3,"span",8),r.YNc(3,Jm,2,3,"span",9),r.qZA()),2&e){const e=r.oxw(2);r.xp6(1),r.Q6J("ngIf",e.displayModuleIcon),r.xp6(1),r.Q6J("ngIf",!e.fieldconfig.fieldset),r.xp6(1),r.Q6J("ngIf",e.fieldconfig.fieldset&&e.relData)}}function Nm(e,t){if(1&e&&(r.TgZ(0,"field-generic-display",4),r.YNc(1,Om,4,3,"div",5),r.qZA()),2&e){const e=r.oxw();r.Q6J("fielddisplayclass",e.fielddisplayclass)("editable",e.isEditable())("fieldconfig",e.fieldconfig)("fieldid",e.fieldid),r.xp6(1),r.Q6J("ngIf",e.parentId)}}function Fm(e,t){if(1&e&&(r.ynx(0),r._uU(1),r.BQk()),2&e){const e=r.oxw(3);r.xp6(1),r.Oqu(e.value)}}function qm(e,t){if(1&e&&(r.ynx(0),r._UZ(1,"field-linked-details",12),r.BQk()),2&e){const e=r.oxw(3);r.xp6(1),r.Q6J("fieldset",e.fieldconfig.fieldset)("module",e.parentType)("data",e.relData)}}function Em(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"div",18)(1,"div",19)(2,"span",20)(3,"span",21),r._UZ(4,"system-icon",10),r.qZA(),r.TgZ(5,"span",22),r.YNc(6,Fm,2,1,"ng-container",9),r.YNc(7,qm,2,3,"ng-container",9),r.qZA(),r.TgZ(8,"button",23),r.NdJ("click",(function(){r.CHM(e);const t=r.oxw(2);return r.KtG(t.clearParent())})),r._UZ(9,"system-button-icon",24),r.qZA()()()()}if(2&e){const e=r.oxw(2);r.xp6(4),r.Q6J("module",e.model.data[e.parentTypeField])("size","small"),r.xp6(2),r.Q6J("ngIf",!e.fieldconfig.fieldset),r.xp6(1),r.Q6J("ngIf",e.fieldconfig.fieldset),r.xp6(2),r.Q6J("icon","close")}}function Ym(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"li",45),r.NdJ("click",(function(){const t=r.CHM(e).$implicit,s=r.oxw(4);return r.KtG(s.setParentType(t))})),r.TgZ(1,"div",46)(2,"div",47),r._UZ(3,"system-icon",48),r.TgZ(4,"div",49),r._UZ(5,"system-label-modulename",50),r.qZA()()()()}if(2&e){const e=t.$implicit;r.xp6(3),r.Q6J("module",e),r.xp6(2),r.Q6J("module",e)}}const Dm=function(e){return{"slds-is-open":e}};function Um(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"div",36)(1,"div",14)(2,"div",37)(3,"div",38)(4,"div",28)(5,"div",39),r.NdJ("click",(function(){r.CHM(e);const t=r.oxw(3);return r.KtG(t.openParentTypes())})),r._UZ(6,"input",40)(7,"system-icon",41),r.qZA(),r.TgZ(8,"div",42)(9,"ul",43),r.YNc(10,Ym,6,2,"li",44),r.qZA()()()()()()()}if(2&e){const e=r.oxw(3);r.xp6(4),r.Q6J("ngClass",r.VKq(3,Dm,e.parentTypeSelectOpen)),r.xp6(2),r.Q6J("value",e.language.getModuleName(e.parentType)),r.xp6(4),r.Q6J("ngForOf",e.parentTypes)}}function Qm(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"field-lookup-recent",51),r.NdJ("selectedObject",(function(t){r.CHM(e);const s=r.oxw(3);return r.KtG(s.setParent(t))})),r.qZA()}if(2&e){const e=r.oxw(3);r.Q6J("module",e.parentType)}}function Rm(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"field-lookup-search",52),r.NdJ("selectedObject",(function(t){r.CHM(e);const s=r.oxw(3);return r.KtG(s.setParent(t))}))("searchWithModal",(function(){r.CHM(e);const t=r.oxw(3);return r.KtG(t.searchWithModal())})),r.qZA()}if(2&e){const e=r.oxw(3);r.Q6J("module",e.parentType)("searchterm",e.parentSearchTerm)}}function jm(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"div",25),r.YNc(1,Um,11,5,"div",26),r.TgZ(2,"div",27)(3,"div",28)(4,"div",29)(5,"input",30,31),r.NdJ("focus",(function(){r.CHM(e);const t=r.oxw(2);return r.KtG(t.onFocusParent())}))("ngModelChange",(function(t){r.CHM(e);const s=r.oxw(2);return r.KtG(s.parentSearchTerm=t)})),r.qZA(),r.TgZ(7,"button",32),r.NdJ("click",(function(){r.CHM(e);const t=r.oxw(2);return r.KtG(t.searchWithModal())})),r._UZ(8,"system-button-icon",24),r.qZA()(),r.TgZ(9,"div",33),r.YNc(10,Qm,1,1,"field-lookup-recent",34),r.YNc(11,Rm,1,2,"field-lookup-search",35),r.qZA()()()()}if(2&e){const e=r.oxw(2);r.xp6(1),r.Q6J("ngIf",e.parentTypes.length>0),r.xp6(2),r.Q6J("ngClass",r.VKq(7,Dm,e.parentSearchOpen)),r.xp6(2),r.Q6J("ngModel",e.parentSearchTerm)("placeholder",e.language.getModuleCombinedLabel("LBL_SEARCH",e.parentType)),r.xp6(3),r.Q6J("icon","search"),r.xp6(2),r.Q6J("ngIf",""===e.parentSearchTerm),r.xp6(1),r.Q6J("ngIf",""!==e.parentSearchTerm)}}function Bm(e,t){if(1&e&&(r.TgZ(0,"div",13)(1,"div",14),r.YNc(2,Em,10,5,"div",15),r.YNc(3,jm,12,9,"div",16),r.qZA(),r._UZ(4,"field-messages",17),r.qZA()),2&e){const e=r.oxw();r.Q6J("ngClass",e.getFieldClass()),r.xp6(2),r.Q6J("ngIf",e.model.data[e.parentIdField]),r.xp6(1),r.Q6J("ngIf",!e.model.data[e.parentIdField]),r.xp6(1),r.Q6J("fieldname",e.fieldname)}}let Gm=(()=>{class fieldLinkedParent extends d.O{model;view;broadcast;language;metadata;router;elementRef;renderer;modal;clickListener;parentTypeSelectOpen=!1;parentSearchOpen=!1;parentSearchTerm="";recentItems=[];parentTypes=[];constructor(e,t,s,i,n,l,o,a,d){super(e,t,i,n,l),this.model=e,this.view=t,this.broadcast=s,this.language=i,this.metadata=n,this.router=l,this.elementRef=o,this.renderer=a,this.modal=d,this.subscriptions.add(this.broadcast.message$.subscribe({next:e=>this.handleMessage(e)})),this.subscriptions.add(this.model.data$.subscribe({next:()=>{this.getFieldSet()}}))}get parentIdField(){return this.fieldconfig.parentIdField?this.fieldconfig.parentIdField:"parent_id"}get parentTypeField(){return this.fieldconfig.parentTypeField?this.fieldconfig.parentTypeField:"parent_type"}get parentName(){return this.model.getField(this.fielddefs.rname??"summary_text")}get parentType(){return this.model.getField(this.parentTypeField)}get parentId(){return this.model.getField(this.parentIdField)}get displayModuleIcon(){return!this.fieldconfig.hidemoduleicon}get value(){let e=this.model.getField(this.fieldname);return e?this.fielddefs?.rname?e[this.fielddefs?.rname]:e.summary_text:""}set value(e){}get relData(){return this.model.getField(this.fieldname)??{}}ngOnInit(){this.determineParentTypes(),this.model.getField(this.parentTypeField)&&""!=this.model.getField(this.parentTypeField)||this.model.setField(this.parentTypeField,this.parentTypes[0])}getFieldSet(){this.fieldconfig.fieldset=void 0;let e=this.metadata.getComponentConfig("fieldLinkedParent",this.parentType);e.fieldset?this.fieldconfig.fieldset=e.fieldset:(e=this.metadata.getComponentConfig("fieldLinked",this.parentType),e.fieldset&&(this.fieldconfig.fieldset=e.fieldset))}determineParentTypes(){let e=[];this.fieldconfig.parenttypes?e=this.fieldconfig.parenttypes.replace(/\s/g,"").split(","):this.field_defs.parent_modules&&(e=this.field_defs.parent_modules),this.fieldconfig.sortbyparenttypes||e.sort(((e,t)=>this.language.getModuleName(e).toLowerCase()>this.language.getModuleName(t).toLowerCase()?1:-1)),this.parentTypes=e}handleMessage(e){if(e.messagedata.reference&&"model.save"===e.messagetype)if(this.fieldid===e.messagedata.reference){this.parentSearchTerm="";let t={};t[this.parentIdField]=e.messagedata.data.id,t[this.fieldname]=e.messagedata.data.summary_text,this.model.setFields(t,!0)}}onClick(e){this.elementRef.nativeElement.contains(e.target)||this.closePopups()}closePopups(){this.model.getField(this.parentIdField)&&(this.parentSearchTerm=""),this.parentSearchOpen=!1,this.parentTypeSelectOpen=!1,this.clickListener()}setParent(e){this.model.setField(this.fieldname,e.data),this.model.setField(this.parentIdField,e.id)}toggleParentTypeSelect(){this.parentTypeSelectOpen=!this.parentTypeSelectOpen,this.parentSearchOpen=!1}setParentType(e){this.parentSearchTerm="",this.model.setField(this.parentTypeField,e),this.parentTypeSelectOpen=!1}clearParent(){this.fieldconfig.promptondelete?this.modal.confirm(this.language.getLabelFormatted("LBL_PROMPT_DELETE_RELATIONSHIP",[this.language.getFieldDisplayName(this.model.module,this.fieldname,this.fieldconfig)],"long"),this.language.getLabelFormatted("LBL_PROMPT_DELETE_RELATIONSHIP",[this.language.getFieldDisplayName(this.model.module,this.fieldname,this.fieldconfig)])).subscribe((e=>{e&&this.removeRelated()})):this.removeRelated()}removeRelated(){this.model.setField(this.fieldname,""),this.model.setField(this.parentIdField,"")}openParentTypes(){this.parentTypeSelectOpen=!0,this.parentSearchOpen=!1,this.clickListener=this.renderer.listen("document","click",(e=>this.onClick(e)))}onFocusParent(){this.parentTypeSelectOpen=!1,this.parentSearchOpen=!0,this.clickListener=this.renderer.listen("document","click",(e=>this.onClick(e)))}searchWithModal(){this.parentSearchOpen=!1,this.modal.openModal("ObjectModalModuleLookup").subscribe((e=>{e.instance.module=this.parentType,e.instance.multiselect=!1,e.instance.selectedItems.subscribe((e=>{e.length&&this.setParent({id:e[0].id,text:e[0].summary_text,data:e[0]})})),e.instance.searchTerm=this.parentSearchTerm}))}static ɵfac=function(e){return new(e||fieldLinkedParent)(r.Y36(w.o),r.Y36(k.e),r.Y36(X.f),r.Y36(x.d),r.Y36(c.Pu),r.Y36(A.F0),r.Y36(r.SBq),r.Y36(r.Qsj),r.Y36(L.o))};static ɵcmp=r.Xpm({type:fieldLinkedParent,selectors:[["field-linked-parent"]],features:[r.qOj],decls:3,vars:3,consts:[[3,"fieldname","fieldconfig",4,"ngIf"],[3,"fielddisplayclass","editable","fieldconfig","fieldid",4,"ngIf"],["class","slds-form-element__control",3,"ngClass",4,"ngIf"],[3,"fieldname","fieldconfig"],[3,"fielddisplayclass","editable","fieldconfig","fieldid"],["class","slds-grid slds-grid_vertical-align-center",4,"ngIf"],[1,"slds-grid","slds-grid_vertical-align-center"],[3,"module","size",4,"ngIf"],["system-model-popover","",3,"module","id",4,"ngIf"],[4,"ngIf"],[3,"module","size"],["system-model-popover","",3,"module","id"],[3,"fieldset","module","data"],[1,"slds-form-element__control",3,"ngClass"],[1,"slds-form-element"],["class","slds-form-element__control slds-p-around--xx-small",4,"ngIf"],["class","slds-combobox-group slds-p-around--xx-small",4,"ngIf"],[3,"fieldname"],[1,"slds-form-element__control","slds-p-around--xx-small"],[1,"slds-pill_container"],[1,"slds-pill","slds-size--1-of-1"],[1,"slds-icon_container","slds-icon-standard-account","slds-pill__icon_container"],[1,"slds-pill__label"],[1,"slds-button","slds-button--icon","slds-pill__remove",3,"click"],[3,"icon"],[1,"slds-combobox-group","slds-p-around--xx-small"],["class","slds-combobox_object-switcher slds-combobox-addon_start",4,"ngIf"],[1,"slds-combobox_container","slds-combobox-addon_end"],["role","combobox",1,"slds-combobox","slds-dropdown-trigger","slds-dropdown-trigger_click",3,"ngClass"],["role","none",1,"slds-combobox__form-element","slds-input-has-icon","slds-input-has-icon_right"],["type","text","aria-autocomplete","list","autoComplete","off","role","textbox",1,"slds-input","slds-combobox__input",3,"ngModel","placeholder","focus","ngModelChange"],["focus",""],[1,"slds-button","slds-button_icon","slds-input__icon","slds-input__icon_right",3,"click"],["role","listbox",1,"slds-dropdown","slds-dropdown_length-with-icon-7","slds-dropdown_fluid"],[3,"module","selectedObject",4,"ngIf"],[3,"module","searchterm","selectedObject","searchWithModal",4,"ngIf"],[1,"slds-combobox_object-switcher","slds-combobox-addon_start"],[1,"slds-form-element__control"],[1,"slds-combobox_container"],[1,"slds-combobox__form-element","slds-input-has-icon","slds-input-has-icon--right",3,"click"],["type","text","readonly","","autoComplete","off","role","textbox",1,"slds-input","slds-combobox__input","slds-combobox__input-value",3,"value"],["icon","down","sprite","utility","addclasses","slds-input__icon slds-input__icon_right"],["role","listbox",1,"slds-dropdown","slds-dropdown_length-5","slds-dropdown_x-small","slds-dropdown_left"],["role","group","aria-label","Suggested for you",1,"slds-listbox","slds-listbox_vertical"],["role","presentation","class","slds-listbox__item",3,"click",4,"ngFor","ngForOf"],["role","presentation",1,"slds-listbox__item",3,"click"],["role","option",1,"slds-media","slds-listbox__option","slds-listbox__option_plain","slds-media_small"],[1,"slds-grid","slds-grid--vertical-align-center"],["size","x-small",3,"module"],[1,"slds-truncate"],[3,"module"],[3,"module","selectedObject"],[3,"module","searchterm","selectedObject","searchWithModal"]],template:function(e,t){1&e&&(r.YNc(0,Im,1,2,"field-label",0),r.YNc(1,Nm,2,5,"field-generic-display",1),r.YNc(2,Bm,5,4,"div",2)),2&e&&(r.Q6J("ngIf",t.displayLabel),r.xp6(1),r.Q6J("ngIf",!t.isEditMode()),r.xp6(1),r.Q6J("ngIf",t.isEditable()&&t.isEditMode()))},dependencies:[i.mk,i.sg,i.O5,n.Fj,n.JJ,n.On,Z.J,gs.f,hs.M,ps.g,u.q,C.D,ci,fs.P,bs.$,M.a],encapsulation:2})}return fieldLinkedParent})();function Pm(e,t){if(1&e&&r._UZ(0,"field-label",3),2&e){const e=r.oxw();r.Q6J("fieldname",e.fieldname)("fieldconfig",e.fieldconfig)}}function Hm(e,t){if(1&e&&(r.TgZ(0,"field-generic-display",4),r._uU(1),r.qZA()),2&e){const e=r.oxw();r.Q6J("fielddisplayclass",e.fielddisplayclass)("fieldconfig",e.fieldconfig)("editable",e.isEditable()),r.xp6(1),r.hij(" ",e.getSelectedCountry(),"\n")}}function zm(e,t){if(1&e&&(r.TgZ(0,"option",10),r._uU(1),r.qZA()),2&e){const e=t.$implicit;r.Q6J("value",e.cc),r.xp6(1),r.hij(" ",e.name," ")}}function Vm(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"div",5)(1,"div",6)(2,"select",7),r.NdJ("ngModelChange",(function(t){r.CHM(e);const s=r.oxw();return r.KtG(s.value=t)})),r.YNc(3,zm,2,2,"option",8),r.qZA()(),r._UZ(4,"field-messages",9),r.qZA()}if(2&e){const e=r.oxw();r.Q6J("ngClass",e.getFieldClass()),r.xp6(2),r.Q6J("ngModel",e.value),r.xp6(1),r.Q6J("ngForOf",e.countries),r.xp6(1),r.Q6J("fieldname",e.fieldname)}}let $m=(()=>{class fieldCountries extends d.O{model;view;language;metadata;router;currency;countries=[];constructor(e,t,s,i,n,l){super(e,t,s,i,n),this.model=e,this.view=t,this.language=s,this.metadata=i,this.router=n,this.currency=l;let o=this.metadata.getCountries();o.countries&&o.countries.forEach((e=>{this.countries.push({cc:e.cc,name:this.language.getLabel(e.label)})})),this.countries.sort(((e,t)=>e.name.localeCompare(t.name)))}getSelectedCountry(){if(!this.value)return"";let e=this.countries.filter((e=>e.cc==this.value));return e[0]?.name}static ɵfac=function(e){return new(e||fieldCountries)(r.Y36(w.o),r.Y36(k.e),r.Y36(x.d),r.Y36(c.Pu),r.Y36(A.F0),r.Y36(Ae.A))};static ɵcmp=r.Xpm({type:fieldCountries,selectors:[["field-countries"]],features:[r.qOj],decls:3,vars:3,consts:[[3,"fieldname","fieldconfig",4,"ngIf"],[3,"fielddisplayclass","fieldconfig","editable",4,"ngIf"],["class","slds-form-element__control",3,"ngClass",4,"ngIf"],[3,"fieldname","fieldconfig"],[3,"fielddisplayclass","fieldconfig","editable"],[1,"slds-form-element__control",3,"ngClass"],[1,"slds-select_container","slds-m-vertical--xx-small"],[1,"slds-select",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[3,"fieldname"],[3,"value"]],template:function(e,t){1&e&&(r.YNc(0,Pm,1,2,"field-label",0),r.YNc(1,Hm,2,4,"field-generic-display",1),r.YNc(2,Vm,5,4,"div",2)),2&e&&(r.Q6J("ngIf",t.displayLabel),r.xp6(1),r.Q6J("ngIf",!t.isEditMode()),r.xp6(1),r.Q6J("ngIf",t.isEditable()&&t.isEditMode()))},dependencies:[i.mk,i.sg,i.O5,n.YN,n.Kr,n.EJ,n.JJ,n.On,u.q,C.D,M.a],encapsulation:2})}return fieldCountries})();var Km=s(20528);function Xm(e,t){if(1&e&&r._UZ(0,"field-label",4),2&e){const e=r.oxw(2);r.Q6J("fieldname",e.fieldname)("fieldconfig",e.fieldconfig)}}function Wm(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"div",1),r.YNc(1,Xm,1,2,"field-label",2),r.TgZ(2,"system-checkbox-toggle",3),r.NdJ("ngModelChange",(function(t){r.CHM(e);const s=r.oxw();return r.KtG(s.value=t)}))("ngModelChange",(function(){r.CHM(e);const t=r.oxw();return r.KtG(t.setValue(t.value))})),r.qZA()()}if(2&e){const e=r.oxw();r.Q6J("ngClass",e.fieldconfig.formclass),r.xp6(1),r.Q6J("ngIf",e.displayLabel),r.xp6(1),r.Q6J("disabled",e.disabled)("ngModel",e.value)}}let eg=(()=>{class fieldToggle extends d.O{model;view;language;metadata;router;modal;hidden=!1;currentUser="";assignedUser="";createdBy="";constructor(e,t,s,i,n,l){super(e,t,s,i,n),this.model=e,this.view=t,this.language=s,this.metadata=i,this.router=n,this.modal=l}ngOnInit(){this.fieldconfig.acl&&!this.metadata.checkModuleAcl(this.model.module,this.fieldconfig.acl)&&(this.hidden=!0),this.currentUser=this.metadata.session.authData.user.id,this.currentUser=this.model.data.assigned_user_id,this.model.isNew?this.createdBy=this.model.data.created_by_id:this.createdBy=this.model.data.created_by}get disabled(){return!this.metadata.checkModuleAcl(this.model.module,"edit")||!this.userCanEdit()}userCanEdit(){return this.fieldconfig.assignedUserAccess?this.currentUser===this.assignedUser:this.currentUser===this.createdBy}setValue(e){this.model.setField(this.fieldname,e),this.fieldconfig.autoSave&&this.save()}save(){let e=this.modal.await("LBL_UPDATING");this.model.save(!0).subscribe({next:t=>{e.emit(!0)},error:()=>{e.emit(!0)},complete:()=>{e.emit(!0)}})}static ɵfac=function(e){return new(e||fieldToggle)(r.Y36(w.o),r.Y36(k.e),r.Y36(x.d),r.Y36(c.Pu),r.Y36(A.F0),r.Y36(L.o))};static ɵcmp=r.Xpm({type:fieldToggle,selectors:[["field-toggle"]],features:[r.qOj],decls:1,vars:1,consts:[[3,"ngClass",4,"ngIf"],[3,"ngClass"],[3,"fieldname","fieldconfig",4,"ngIf"],[3,"disabled","ngModel","ngModelChange"],[3,"fieldname","fieldconfig"]],template:function(e,t){1&e&&r.YNc(0,Wm,3,4,"div",0),2&e&&r.Q6J("ngIf",!t.hidden)},dependencies:[i.mk,i.O5,n.JJ,n.On,Km.v,u.q],encapsulation:2})}return fieldToggle})();function tg(e,t){if(1&e&&r._UZ(0,"field-label",3),2&e){const e=r.oxw();r.Q6J("fieldname",e.fieldname)("fieldconfig",e.fieldconfig)}}function sg(e,t){1&e&&r._UZ(0,"system-utility-icon",4)}let ig=(()=>{class fieldNotificationIndicator extends d.O{model;view;language;metadata;router;constructor(e,t,s,i,n){super(e,t,s,i,n),this.model=e,this.view=t,this.language=s,this.metadata=i,this.router=n}get hasNotification(){return!!this.model.getField("has_notification")}static ɵfac=function(e){return new(e||fieldNotificationIndicator)(r.Y36(w.o),r.Y36(k.e),r.Y36(x.d),r.Y36(c.Pu),r.Y36(A.F0))};static ɵcmp=r.Xpm({type:fieldNotificationIndicator,selectors:[["field-notification-indicator"]],features:[r.qOj],decls:3,vars:3,consts:[[3,"fieldname","fieldconfig",4,"ngIf"],[3,"fielddisplayclass"],["icon","warning","size","x-small","colorclass","slds-icon-text-warning",4,"ngIf"],[3,"fieldname","fieldconfig"],["icon","warning","size","x-small","colorclass","slds-icon-text-warning"]],template:function(e,t){1&e&&(r.YNc(0,tg,1,2,"field-label",0),r.TgZ(1,"field-generic-display",1),r.YNc(2,sg,1,0,"system-utility-icon",2),r.qZA()),2&e&&(r.Q6J("ngIf",t.displayLabel),r.xp6(1),r.Q6J("fielddisplayclass",t.fielddisplayclass),r.xp6(1),r.Q6J("ngIf",t.hasNotification))},dependencies:[i.O5,I.r,u.q,C.D],encapsulation:2})}return fieldNotificationIndicator})(),ng=(()=>{class ObjectFields{static ɵfac=function(e){return new(e||ObjectFields)};static ɵmod=r.oAB({type:ObjectFields});static ɵinj=r.cJS({imports:[i.ez,n.u5,o.SystemComponents,a.o,l._t]})}return ObjectFields})();("undefined"==typeof ngJitMode||ngJitMode)&&r.kYT(ng,{declarations:[v,h,y,js,u.q,T,m.j,d.O,C.D,B,z,ge,be,ve,ke,qe,Ye,Ue,Ro,Ho,Ge,$e,Xe,at,pt,At,Dt,bt,Bt,Wt,ns,ds,ms,Xi,ln,mn,vn,An,Qn,En,Ss,Qs,ii,ai,Si,Li,ci,Gm,ji,fs.P,wa.E,bs.$,Za.R,Ta.I,il,La,fl,wl,El,jl,zl,fo,ko,Eo,so,io,sa,da,na,xa,M.a,Da,za,Td,Ld,ud,zd,Ed,Ud,sr,Kd,dr,rr,hr,rr,fr,Er,vr,Ir,Rr,Vr,Xr,mc,_c,Zc,Lc,Sc,Nc,Uc,jc,Bc,Vc,eu,nu,cu,_u,Tu,Au,yu,Fu,Uu,em,Uu,Pu,im,om,rm,km,Lm,$m,eg,ig],imports:[i.ez,n.u5,o.SystemComponents,a.o,l._t],exports:[v,h,u.q,m.j,d.O,C.D,ge,M.a,Da,js,ji,fs.P,bs.$,Ta.I,_u,Td,ud,km,bt,eg]}),r.B6R(ko,[i.mk,i.sg,i.O5,l.Fd,u.q,C.D,M.a,km],[])},14505:(e,t,s)=>{"use strict";s.d(t,{y:()=>g});var i=s(3144),n=s(77579),l=s(18505),o=s(54004),a=s(62242),d=s(33369),r=s(26625),c=s(75920),u=s(29266),m=s(44044);let g=(()=>{class backend{http;broadcast;configurationService;session;modelutilities;modalservice;pendingRequestsCount=0;pendingCountChange$=new n.x;autoLogout={};reLogin=!1;reConnecting=!1;stageRequests=!1;stagedRequests=[];httpErrorsToReport=[];httpErrorReporting=!1;httpErrorReportingRetryTime=1e4;constructor(e,t,s,i,n,l){this.http=e,this.broadcast=t,this.configurationService=s,this.session=i,this.modelutilities=n,this.modalservice=l}getHeaders(){let e=this.session.getSessionHeader();return e=e.set("Accept","application/json"),e}prepareParams(e){let t=new i.LE;return e&&Object.keys(e).forEach((s=>{let i=e[s];null!=i&&(t="object"==typeof i?t.append(s,JSON.stringify(i)):"boolean"==typeof i?t.append(s,!0===i?"1":"0"):"number"==typeof i?t.append(s,i+""):t.append(s,i.toString()))})),t}getRequest(e="",t={},s){const i=new n.x;if(this.stageRequests)this.stageRequest("GET",e,{getParams:t},i);else{this.increasePendingCount();const n=this.http.get(this.configurationService.getBackendUrl()+"/"+encodeURI(e),{headers:this.getHeaders(),observe:"response",params:this.prepareParams(t)}).subscribe({next:e=>{this.decreasePendingCount(),delete this.pendingRequests[s],i.next(e.body),i.complete()},error:n=>{this.decreasePendingCount(),delete this.pendingRequests[s],0==this.handleError(n,e,"GET",{getParams:t},i)&&i.error(n)}});s&&(this.pendingRequests[s]=n)}return i.asObservable()}cancelPendingRequests(e){e.forEach((e=>{this.pendingRequests[e]&&(this.decreasePendingCount(),this.pendingRequests[e].unsubscribe(),delete this.pendingRequests[e])}))}pendingRequests={};getRawRequest(e="",t={},s="blob",i={}){let n=this.session.getSessionHeader();for(let e in i)n=n.set(e,i[e]);return this.increasePendingCount(),this.http.get(this.configurationService.getBackendUrl()+"/"+e,{headers:n,params:this.prepareParams(t),responseType:"blob"}).pipe((0,l.b)({next:()=>this.decreasePendingCount(),error:()=>this.decreasePendingCount()}))}postRequest(e="",t={},s={},i){const l=new n.x;if(this.stageRequests)this.stageRequest("GET",e,{getParams:t,body:s},l);else{this.increasePendingCount();let n=this.getHeaders();n=s?n.set("Content-Type","application/json"):n.set("Content-Type","application/x-www-form-urlencoded");const o=this.http.post(this.configurationService.getBackendUrl()+"/"+encodeURI(e),s,{headers:n,observe:"response",params:this.prepareParams(t)}).subscribe({next:e=>{this.decreasePendingCount(),delete this.pendingRequests[i],l.next(e.body),l.complete()},error:n=>{this.decreasePendingCount(),delete this.pendingRequests[i],this.handleError(n,e,"POST",{getParams:t,body:s},l)||l.error(n)}});i&&(this.pendingRequests[i]=o)}return l.asObservable()}patchRequest(e="",t={},s={},i){const l=new n.x;if(this.stageRequests)this.stageRequest("PATCH",e,{getParams:t,body:s},l);else{let n=this.getHeaders();n=s?n.set("Content-Type","application/json"):n.set("Content-Type","application/x-www-form-urlencoded"),this.increasePendingCount();const o=this.http.patch(this.configurationService.getBackendUrl()+"/"+encodeURI(e),s,{headers:n,observe:"response",params:this.prepareParams(t)}).subscribe({next:e=>{this.decreasePendingCount(),delete this.pendingRequests[i],l.next(e.body),l.complete()},error:n=>{this.decreasePendingCount(),delete this.pendingRequests[i],this.handleError(n,e,"POST",{getParams:t,body:s},l)||l.error(n)}});i&&(this.pendingRequests[i]=o)}return l.asObservable()}postRequestWithProgress(e="",t={},s={},l=null,o){const a=new n.x;if(this.stageRequests)this.stageRequest("POSTWITHPROGRESS",e,{getParams:t,body:s,progress:l},a);else{let n=this.getHeaders();n=s?n.set("Content-Type","application/json"):n.set("Content-Type","application/x-www-form-urlencoded"),null!==l&&l.next(0),this.increasePendingCount();const d=this.http.post(this.configurationService.getBackendUrl()+"/"+encodeURI(e),s,{headers:n,observe:"events",params:this.prepareParams(t),reportProgress:!!l}).subscribe({next:e=>{e.type===i.dt.UploadProgress?l.next(100*e.loaded/e.total):e.type===i.dt.Response&&(this.decreasePendingCount(),delete this.pendingRequests[o],a.next(e.body),a.complete())},error:i=>{this.decreasePendingCount(),delete this.pendingRequests[o],this.handleError(i,e,"POSTWITHPROGRESS",{getParams:t,body:s,progress:l},a)||a.error(i)}});o&&(this.pendingRequests[o]=d)}return a.asObservable()}getDownloadPostRequestFile(e="",t={},s={},i){let l=new n.x,o=this.getHeaders();o=o.set("Accept","*/*");const a=this.http.post(this.configurationService.getBackendUrl()+"/"+e,s,{headers:o,observe:"response",params:this.prepareParams(t),responseType:"blob"}).subscribe({next:e=>{delete this.pendingRequests[i];let t=window.URL.createObjectURL(e.body);l.next(t),l.complete()},error:n=>{delete this.pendingRequests[i],this.handleError(n,e,"POST",{getParams:t,body:s});let o=new FileReader;o.readAsText(n.error),o.onloadend=e=>{l.error(JSON.parse(o.result.toString()))}}});return i&&(this.pendingRequests[i]=a),l.asObservable()}getLinkToDownload(e,t="GET",s=null,i=null,l=null,o){let a=new n.x,d=this.getHeaders();d=d.set("Accept","*/*"),this.increasePendingCount();const r=this.http.request(t,this.configurationService.getBackendUrl()+"/"+e,{body:i,headers:d,observe:"response",params:this.prepareParams(s),responseType:"blob"}).subscribe({next:e=>{if(this.decreasePendingCount(),delete this.pendingRequests[o],200==e.status){let t=window.URL.createObjectURL(e.body);a.next(t),a.complete()}else a.error(e.statusText)},error:n=>{this.decreasePendingCount(),delete this.pendingRequests[o],this.handleError(n,e,t,{getParams:s,body:i}),a.error(n)}});return o&&(this.pendingRequests[o]=r),a.asObservable()}downloadFile(e,t=null,s=null){let i=new n.x;return this.getLinkToDownload(e.route,e.method,e.params,e.body,e.headers).subscribe({next:e=>{let n=e,l=document.createElement("a");document.body.appendChild(l),l.href=n,s&&(l.type=s),l.download=t,l.click(),l.remove(),i.next(),i.complete()},error:e=>i.error(e)}),i.asObservable()}putRequest(e="",t={},s={},i){const l=new n.x;if(this.stageRequests)this.stageRequest("PUT",e,{getParams:t,body:s},l);else{this.increasePendingCount();const n=this.http.put(this.configurationService.getBackendUrl()+"/"+e,s,{headers:this.getHeaders(),observe:"response",params:this.prepareParams(t)}).subscribe({next:e=>{this.decreasePendingCount(),delete this.pendingRequests[i],l.next(e.body),l.complete()},error:n=>{this.decreasePendingCount(),delete this.pendingRequests[i],this.handleError(n,e,"PUT",{getParams:t,body:s},l)||l.error(n)}});i&&(this.pendingRequests[i]=n)}return l.asObservable()}deleteRequest(e="",t={},s){const i=new n.x;if(this.stageRequests)this.stageRequest("DELETE",e,{getParams:t},i);else{this.increasePendingCount();const n=this.http.delete(this.configurationService.getBackendUrl()+"/"+e,{headers:this.getHeaders(),params:this.prepareParams(t)}).subscribe({next:e=>{this.decreasePendingCount(),delete this.pendingRequests[s],i.next(e||!0),i.complete()},error:n=>{this.decreasePendingCount(),delete this.pendingRequests[s],this.handleError(n,e,"DELETE",{getParams:t},i),i.error(n)}});s&&(this.pendingRequests[s]=n)}return i.asObservable()}handleError(e,t,s,i=null,n){switch(e.status){case 401:return this.stageRequest(s,t,i,n),this.stageRequests=!0,this.reLogin||(this.reLogin=!0,this.modalservice.openModal("GlobalReLogin",!1,null,!0).subscribe((e=>{e.instance.loggedin.subscribe((e=>{e&&(this.reLogin=!1,this.stageRequests=!1,this.processStagedRequests())}))}))),!0;case 0:return this.stageRequest(s,t,i,n),this.stageRequests=!0,this.reConnecting||(this.reConnecting=!0,this.modalservice.openModal("GlobalReConnect",!1,null,!0).subscribe((e=>{e.instance.connected.subscribe((e=>{e&&(this.reConnecting=!1,this.stageRequests=!1,this.processStagedRequests())}))}))),!0;case 403:return"noLegalNoticeAccepted"===e.error?.error?.errorCode&&(this.broadcast.broadcastMessage("backend.response.error","noLegalNoticeAccepted"),!0)}return!1}stageRequest(e,t,s,i,n){this.stagedRequests.push({method:e,route:t,data:s,responseSubject:i,refID:n})}processStagedRequests(){for(let e of this.stagedRequests)switch(e.method){case"GET":this.getRequest(e.route,e.data.getParams,e.refID).subscribe({next:t=>e.responseSubject.next(t),error:t=>e.responseSubject.error(t)});break;case"POST":this.postRequest(e.route,e.data.getParams,e.data.body,e.refID).subscribe({next:t=>e.responseSubject.next(t),error:t=>e.responseSubject.error(t)});break;case"PATCH":this.patchRequest(e.route,e.data.getParams,e.data.body,e.refID).subscribe({next:t=>e.responseSubject.next(t),error:t=>e.responseSubject.error(t)});break;case"POSTWITHPROGRESS":this.postRequestWithProgress(e.route,e.data.getParams,e.data.body,e.data.progress,e.refID).subscribe({next:t=>e.responseSubject.next(t),error:t=>e.responseSubject.error(t)});break;case"PUT":this.putRequest(e.route,e.data.getParams,e.data.body,e.refID).subscribe({next:t=>e.responseSubject.next(t),error:t=>e.responseSubject.error(t)});break;case"DELETE":this.deleteRequest(e.route,e.data.getParams,e.refID).subscribe({next:t=>e.responseSubject.next(t),error:t=>e.responseSubject.error(t)})}this.stagedRequests=[]}reportError(e,t,s,i){this.httpErrorsToReport.push({clientTime:(new Date).toISOString(),clientInfo:{sessionId:this.session.authData.sessionId,userId:this.session.authData.userId,userName:this.session.authData.userName},route:t,method:s,getParams:i.getParams?i.getParams:null,error:e,body:i.body?i.body:null}),this.httpErrorReporting||(this.httpErrorReporting=!0,window.setTimeout((()=>this.errorsToBackend()),this.httpErrorReportingRetryTime))}errorsToBackend(){this.httpErrorsToReport.length&&this.postRequest("system/httperrors",null,{errors:this.httpErrorsToReport}).subscribe({next:()=>{this.httpErrorsToReport.length=0,this.httpErrorReporting=!1},error:e=>{this.httpErrorReporting=!0,window.setTimeout((()=>this.errorsToBackend()),this.httpErrorReportingRetryTime)}})}increasePendingCount(){this.pendingRequestsCount++,this.pendingCountChange$.next(this.pendingRequestsCount)}decreasePendingCount(){this.pendingRequestsCount--,this.pendingCountChange$.next(this.pendingRequestsCount)}get(e,t,s="",i){let n={};return s&&(n.trackaction=s),this.getRequest("module/"+e+"/"+t,n).pipe((0,o.U)((t=>{for(let s in t)t[s]=this.backend2spice(e,s,t[s]);return t})))}getDuplicates(e,t,s){return this.getRequest("module/"+e+"/"+t+"/duplicates",null,s)}checkDuplicates(e,t,s){return this.postRequest("module/"+e+"/duplicates",{},t,s)}getList(e,t=[],s={},i){s.start&&s.start,s.limit&&s.limit;let n=s;return n.searchfields=s.searchfields,n.offset=s.start?s.start:0,n.limit=s.limit?s.limit:25,s.listid&&(n.listid=s.listid),t.length>0&&(n.sortfields=t),this.getRequest("module/"+e,n,i).pipe((0,o.U)((t=>{try{for(let s in t.list)for(let i in t.list[s])t.list[s][i]=this.backend2spice(e,i,t.list[s][i]);return t}catch(e){return{aggregations:[],buckets:[],source:[],totalcount:[],list:[]}}})))}save(e,t,s,i=null,n=null,l){return this.postRequestWithProgress("module/"+e+"/"+t,{templateId:n},this.modelutilities.spiceModel2backend(e,s),i,l).pipe((0,o.U)((t=>this.modelutilities.backendModel2spice(e,t))))}backend2spice(e,t,s){return this.modelutilities.backend2spice(e,t,s)}spice2backend(e,t,s){return this.modelutilities.spice2backend(e,t,s)}static ɵfac=function(e){return new(e||backend)(a.LFG(i.eN),a.LFG(d.f),a.LFG(r.C),a.LFG(c.n),a.LFG(u.A),a.LFG(m.o))};static ɵprov=a.Yz7({token:backend,factory:backend.ɵfac,providedIn:"root"})}return backend})()},33369:(e,t,s)=>{"use strict";s.d(t,{f:()=>n});var i=s(62242);let n=(()=>{class broadcast{message$=new i.vpe;broadcastMessage(e,t={}){this.message$.emit({messagetype:e,messagedata:t})}static ɵfac=function(e){return new(e||broadcast)};static ɵprov=i.Yz7({token:broadcast,factory:broadcast.ɵfac,providedIn:"root"})}return broadcast})()},26625:(e,t,s)=>{"use strict";s.d(t,{C:()=>m});var i=s(62242),n=s(61135),l=s(94338),o=s(3144),a=s(75920),d=s(33369),r=s(66550),c=s(9086),u=s(83348);let m=(()=>{class configurationService{http;session;broadcast;title;storeService;router;enableinstall=!1;initialized=!1;reloading=!1;data={backendUrl:"api",backendextensions:{},systemparameters:{},theme:{},name:"SpiceCRM",displayloginsidebar:!1};assets=[];appdata={};loaded$;datachanged$=new i.vpe;keysLoaderTaskID={};storeDBName="config";constructor(e,t,s,i,l,o){this.http=e,this.session=t,this.broadcast=s,this.title=i,this.storeService=l,this.router=o,this.loaded$=new n.X(!1),this.getSysinfo(),this.storeService.initializeStores(this.storeDBName,["appdata"],"id").then((()=>this.storeService.readStoreAll(this.storeDBName,"appdata"))).then((e=>{e.forEach((e=>this.appdata[e.id]=e.data))})),this.broadcast.message$.subscribe((e=>this.handleLogout(e)))}get systemName(){return this.data.name?this.data.name:"SpiceCRM"}handleLogout(e){"logout"==e.messagetype&&this.reset()}clearDB(){this.storeService.clearDB(this.storeDBName,["appdata"])}reset(){this.appdata={},this.clearDB()}getBackendUrl(){return this.data.backendUrl}getFrontendUrl(){return void 0!==this.data.frontendUrl?this.data.frontendUrl:""}getUser(){return this.data.user}getPassword(){return this.data.password}getSysinfo(){this.reloading=!0;let e=this.http.get(this.getBackendUrl()+"/sysinfo");return e.subscribe({next:e=>{e&&(this.data.languages=e.languages,this.data.backendextensions=e.extensions,this.data.systemparameters=e.systemsettings,this.data.socket_frontend=e.socket_frontend,this.data.unique_key=e.unique_key,this.data.displayloginsidebar=e.displayloginsidebar,this.data.loginSidebarUrl=e.loginSidebarUrl,this.data.allowForgotPass=e.allowForgotPass,this.data.name=e.name?e.name:"SpiceCRM",this.loaded$.next(!0)),this.initialized=!0,this.reloading=!1,e.assets&&this.setAssets(e.assets),this.setFavIcon(),this.title.setTitle(this.systemName)},error:e=>{"503"==e.status&&"crmNotInstalled"==e.error.error.errorCode&&(this.enableinstall=!0,this.router.config.unshift({path:"install",component:l.s}),this.router.navigate(["/install"]))}}),e}getAsset(e){if(this.assets&&this.assets.find((t=>t.assetkey==e))?.assetvalue)return this.assets.find((t=>t.assetkey==e)).assetvalue}setAsset(e,t){let s=this.assets.findIndex((t=>t.assetkey==e));s>=0?this.assets[s].assetvalue=t:this.assets.push({assetkey:e,assetvalue:t}),this.loaded$.next(!0)}setAssets(e,t=!1){this.assets=e,this.setColors(),t&&this.loaded$.next(!0)}getSystemParamater(e){try{return this.data.systemparameters[e]}catch(e){return!1}}checkCapability(e){return this.data.backendextensions&&this.data.backendextensions.hasOwnProperty(e)}getCapabilityConfig(e){try{return this.data.backendextensions[e]&&this.data.backendextensions[e].config?this.data.backendextensions[e].config:{}}catch(e){return{}}}hasCapabilityConfig(e){return this.data.backendextensions[e]&&this.data.backendextensions[e].config&&Object.keys(this.data.backendextensions[e].config).length>0}setData(e,t,s=!0){this.appdata[e]=t,this.storeService.writeStore(this.storeDBName,"appdata",{id:e,data:t}),this.datachanged$.emit(e),s&&this.keysLoaderTaskID[e]&&this.storeService.readStore("loaddata","loadtaskdata",this.keysLoaderTaskID[e]).subscribe({next:t=>{t[e]=this.appdata[e],this.storeService.writeStore("loaddata","loadtaskdata",{id:this.keysLoaderTaskID[e],data:t})}})}setDataFromStore(e,t,s){this.keysLoaderTaskID[t]=e,this.setData(t,s,!1)}getData(e){return!!this.appdata[e]&&this.appdata[e]}updateThemeColors(){let e,t=["color-white","color-grey-3","color-grey-9","color-grey-13","brand-background-primary","brand-primary","brand-primary-active","brand-accessible","brand-accessible-active","brand-header-contrast-cool","brand-text-link","color-background-inverse","color-border-inverse","color-background-success","color-background-success-dark","color-text-link-active","color-progressbar_item-completed","brand-primary-transparent","color-background-alt-inverse","color-border-brand","sds-c-button-brand-color-background","sds-c-button-neutral-color-background-hover","sds-c-button-brand-color-border-hover","sds-c-button-brand-color-background-active","sds-c-button-brand-color-border-active","sds-c-button-brand-color-background-hover","sds-c-input-shadow-focus","sds-c-textarea-shadow-focus","sds-c-select-shadow-focus","sds-c-button-text-color-hover","sds-c-icon-color-foreground"],s=this.getCapabilityConfig("theme");try{e=JSON.parse(s.colors)}catch(t){e={}}for(let s of t)document.documentElement.style.setProperty("--"+s,e[s]?e[s]:null);let i=getComputedStyle(document.documentElement).getPropertyValue("--brand-primary");i&&document.querySelector('meta[name="theme-color"]').setAttribute("content",i)}setFavIcon(){let e=document.querySelectorAll("link[ rel ~= 'icon' i]")[0];if(e){let t=this.getCapabilityConfig("theme");t.icon_image?e.setAttribute("href","data:"+t.icon_image):e.setAttribute("href","./config/favicon")}}setColors(){if(!this.getAsset("colors"))return;let e=JSON.parse(this.getAsset("colors"));for(let t in e)document.documentElement.style.setProperty("--"+t,e[t])}reloadTaskData(e){this.broadcast.message$.emit({messagetype:"configuration.reloadtaskdata",messagedata:e})}static ɵfac=function(e){return new(e||configurationService)(i.LFG(o.eN),i.LFG(a.n),i.LFG(d.f),i.LFG(r.Dx),i.LFG(c.d),i.LFG(u.F0))};static ɵprov=i.Yz7({token:configurationService,factory:configurationService.ɵfac,providedIn:"root"})}return configurationService})()},25547:(e,t,s)=>{"use strict";s.d(t,{A:()=>o});var i=s(62242),n=s(26625),l=s(14505);let o=(()=>{class currency{configuration;backend;currenciesFromBackend=[];constructor(e,t){this.configuration=e,this.backend=t}get currencies(){return this.configuration.getData("currencies")??[]}getCurrencies(){let e=[];for(let t of this.currencies)e.push({id:t.id,name:t.name,iso:t.iso,symbol:t.symbol});return e}getCurrencySmbol(e){let t=this.currencies.find((t=>t.id==e));return t?t.symbol:""}static ɵfac=function(e){return new(e||currency)(i.LFG(n.C),i.LFG(l.y))};static ɵprov=i.Yz7({token:currency,factory:currency.ɵfac,providedIn:"root"})}return currency})()},80788:(e,t,s)=>{"use strict";s.d(t,{m:()=>o});var i=s(62242),n=s(29266),l=s(33369);let o=(()=>{class dockedComposer{modelutilities;broadcast;composers=[];hiddenComposers=[];constructor(e,t){this.modelutilities=e,this.broadcast=t,this.broadcast.message$.subscribe((e=>this.handleLogout(e)))}handleLogout(e){"logout"==e.messagetype&&(this.composers=[],this.hiddenComposers=[])}addComposer(e,t,s){t?(t.data.acl=t.acl,this.composers.splice(0,0,{module:e,id:t.id,name:t.getField("summary_text"),model:{module:e,id:t.id,data:t.data},loadexpanded:s})):this.composers.splice(0,0,{module:e,id:this.modelutilities.generateGuid(),name:"",model:{},loadexpanded:s})}focusComposer(e){this.composers.some(((t,s)=>{if(t.id==e){let e=this.composers.splice(s,1);return this.composers.unshift(e.shift()),!0}}))}get maxComposers(){return Math.floor((window.innerWidth-70)/500)}static ɵfac=function(e){return new(e||dockedComposer)(i.LFG(n.A),i.LFG(l.f))};static ɵprov=i.Yz7({token:dockedComposer,factory:dockedComposer.ɵfac,providedIn:"root"})}return dockedComposer})()},64376:(e,t,s)=>{"use strict";s.d(t,{G:()=>d});var i=s(62242),n=s(14505),l=s(33369),o=s(26625),a=s(75920);let d=(()=>{class favorite{backend;broadcast;configuration;session;isEnabled=!1;module="";id="";constructor(e,t,s,i){this.backend=e,this.broadcast=t,this.configuration=s,this.session=i,this.broadcast.message$.subscribe((e=>this.handleMessage(e)))}get favorites(){let e=this.configuration.getData("favorites");return e||[]}get isFavorite(){return!!this.favorites.find((e=>e.module_name==this.module&&e.item_id==this.id))}handleMessage(e){if("model.save"===e.messagetype)this.favorites.some(((t,s)=>{if(t.module_name===e.messagedata.module&&t.item_id==e.messagedata.id)return this.favorites[s].item_summary=e.messagedata.data.summary_text,!0}))}enable(e,t){this.isEnabled=!0,this.module=e,this.id=t}disable(){this.isEnabled=!1,this.module=void 0,this.id=void 0}getFavorites(e){return this.favorites.filter((t=>t.module_name===e))}setFavorite(){this.backend.postRequest("common/spicefavorites/"+this.module+"/"+this.id).subscribe((e=>{this.favorites.splice(0,0,{item_id:e.id,module_name:e.module,item_summary:e.summary_text,data:e.data})}))}deleteFavorite(e,t){e||(e=this.module),t||(t=this.id),this.backend.deleteRequest("common/spicefavorites/"+e+"/"+t).subscribe((s=>{this.favorites.some(((s,i)=>{if(s.module_name===e&&s.item_id===t)return this.favorites.splice(i,1),!0}))}))}static ɵfac=function(e){return new(e||favorite)(i.LFG(n.y),i.LFG(l.f),i.LFG(o.C),i.LFG(a.n))};static ɵprov=i.Yz7({token:favorite,factory:favorite.ɵfac,providedIn:"root"})}return favorite})()},96701:(e,t,s)=>{"use strict";s.d(t,{O:()=>n});var i=s(62242);let n=(()=>{class fielderrorgrouping{fieldsWithErrors={};nrErrorsFields=0;change$=new i.vpe;constructor(){}setError(e,t){let s=!1;t?this.fieldsWithErrors[e]||(this.fieldsWithErrors[e]=!0,this.nrErrorsFields++,s=!0):this.fieldsWithErrors[e]&&(delete this.fieldsWithErrors[e],this.nrErrorsFields--,s=!0),s&&this.change$.emit(this.nrErrorsFields)}hasErrors(){return this.nrErrorsFields||!1}static ɵfac=function(e){return new(e||fielderrorgrouping)};static ɵprov=i.Yz7({token:fielderrorgrouping,factory:fielderrorgrouping.ɵfac})}return fielderrorgrouping})()},83917:(e,t,s)=>{"use strict";s.d(t,{M:()=>n});var i=s(62242);let n=(()=>{class footer{footercontainer=null;modalcontainer=null;modalbackdrop=null;visibleFooterHeight=0;static ɵfac=function(e){return new(e||footer)};static ɵprov=i.Yz7({token:footer,factory:footer.ɵfac,providedIn:"root"})}return footer})()},22487:(e,t,s)=>{"use strict";s.d(t,{Q:()=>u});var i=s(77579),n=s(62242),l=s(14505),o=s(26625),a=s(75920),d=s(29266),r=s(4154),c=s(55329);let u=(()=>{class fts{backend;configurationService;session;modelutilities;metadata;language;httpRequestsRefID=window._.uniqueId("fts_http_ref_");hits=[];found=0;runningsearch=void 0;runningmodulesearch=void 0;searchTerm="";searchSort={};searchOwner=!1;searchGeo={};searchAggregates={};searchModules=[];modulefilter="";buckets={};moduleSearchresults=[];lastSearchParams={};gloablSearchResults={};constructor(e,t,s,i,n,l){this.backend=e,this.configurationService=t,this.session=s,this.modelutilities=i,this.metadata=n,this.language=l,this.getSearchModules()}get loadedSearchModules(){return this.searchModules.filter((e=>this.metadata.checkModuleAcl(e,"list")))}checkForSearchTermErrors(e){let t=this.configurationService.getCapabilityConfig("search"),s=t.min_ngram?parseInt(t.min_ngram,10):3;const i=[];return e.split(" ").filter((e=>e.length<s)).length>0&&i.push({label:"MSG_SEARCH_TERM_TOO_SHORT",nestedValues:[String(s)]}),0==i.length?void 0:i}transformHits(e){let t=[];for(let s of e)t.push(this.tranformHit(s));return t}tranformHit(e){for(let t in e._source)e._source.hasOwnProperty(t)&&"string"==typeof e._source[t]&&(e._source[t]=e._source[t]);return e}search(e,t=5){this.searchTerm=e,this.runningsearch&&this.runningsearch.unsubscribe(),this.resetData();const s=this.httpRequestsRefID+"_search";this.backend.cancelPendingRequests([s]),this.runningsearch=this.backend.postRequest("search",{},{size:t,searchterm:e,modules:this.loadedSearchModules.join(",")},s).subscribe((e=>{this.hits=e.hits.hits,this.found=e.hits.total,this.runningsearch=void 0}))}searchByModules(e){let t=new i.x;e.modules&&0!==e.modules.length||(e.modules=this.loadedSearchModules),e.searchterm&&-1!=e.searchterm.indexOf("%")&&(e.searchterm=e.searchterm.replace(/%/g,"*")),e.searchterm=e.searchterm.trim(),this.searchTerm=e.searchterm,this.searchAggregates=e.aggregates,this.searchSort=e.sortparams,this.searchGeo=e.searchgeo,this.searchOwner=e.owner,this.modulefilter=e.modulefilter,this.buckets=e.buckets,this.runningmodulesearch&&this.runningmodulesearch.unsubscribe();const s=this.httpRequestsRefID+"_search_by_modules";return this.backend.cancelPendingRequests([s]),this.runningmodulesearch=this.backend.postRequest("search",{},{modules:e.modules.length>0?e.modules.join(","):"",searchterm:e.searchterm,searchgeo:e.searchgeo,records:e.size,owner:e.owner,aggregates:this.searchAggregates,sort:this.searchSort,modulefilter:e.modulefilter,buckets:e.buckets},s).subscribe((s=>{this.moduleSearchresults=[];for(let e in s)s.hasOwnProperty(e)&&this.moduleSearchresults.push({module:e,data:{hits:this.transformHits(s[e].hits),max_score:s[e].max_score,total:s[e].total}});this.moduleSearchresults.sort(((e,t)=>{let s=parseFloat(e.data.max_score),i=parseFloat(t.data.max_score);return isNaN(s)&&isNaN(i)?1:isNaN(i)?-1:isNaN(s)||i>s?1:-1})),this.lastSearchParams=e,this.runningmodulesearch=void 0,t.next(s),t.complete()})),t.asObservable()}export(e,t,s,n={},l={},o=!1){let a=new i.x;return-1!=e.indexOf("%")&&(e=e.replace(/%/g,"*")),e=e.trim(),this.searchTerm=e,this.searchAggregates=n,this.searchSort=l,this.runningmodulesearch=this.backend.getDownloadPostRequestFile("search/export",{},{module:t,searchterm:e,fields:s,owner:o,aggregates:n,sort:this.searchSort},this.httpRequestsRefID).subscribe((e=>{a.next(e),a.complete()})),a.asObservable()}loadMore(e){let t=new i.x;if(!this.runningmodulesearch){if(e){let t=!1;for(let s of e.bucketitems)(!s.total||s.total>s.items)&&(t=!0);if(!t)return}else if(this.moduleSearchresults[0].data.hits.length>=this.moduleSearchresults[0].data.total)return;return this.runningmodulesearch=this.backend.postRequest("search",{},{modules:this.lastSearchParams.modules.length>0?this.lastSearchParams.modules.join(","):"",searchterm:this.lastSearchParams.searchterm,aggregates:this.searchAggregates,sort:this.searchSort,owner:this.searchOwner,records:this.lastSearchParams.size,start:this.moduleSearchresults[0].data.hits.length,modulefilter:this.modulefilter,buckets:e},this.httpRequestsRefID).subscribe((e=>{for(let t of this.lastSearchParams.modules)for(let s of e[t].hits)this.moduleSearchresults[0].data.hits.push(this.tranformHit(s));this.runningmodulesearch=void 0,t.next(e),t.complete()})),t.asObservable()}}getSearchModules(){this.searchModules=this.metadata.getGlobalSearchModules().sort(((e,t)=>this.language.getModuleName(e).localeCompare(this.language.getModuleName(t))))}resetData(){this.found=0,this.hits=[]}static ɵfac=function(e){return new(e||fts)(n.LFG(l.y),n.LFG(o.C),n.LFG(a.n),n.LFG(d.A),n.LFG(r.Pu),n.LFG(c.d))};static ɵprov=n.Yz7({token:fts,factory:fts.ɵfac,providedIn:"root"})}return fts})()},93441:(e,t,s)=>{"use strict";s.d(t,{_:()=>a});var i=s(77579),n=s(62242),l=s(44044),o=s(66550);let a=(()=>{class helper{modalservice;sanitizer;dialog=null;_base64_keyStr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";blobUrl;constructor(e,t){this.modalservice=e,this.sanitizer=t}getRand(){return Math.random()}S4(){return(65536*(1+this.getRand())|0).toString(16).substring(1)}generateGuid(){return this.S4()+this.S4()+"-"+this.S4()+"-"+this.S4()+"-"+this.S4()+"-"+this.S4()+this.S4()+this.S4()}confirm(e,t){let s=new i.x;return this.modalservice.confirm(t,e).subscribe((e=>{s.next(e),s.complete()})),s.asObservable()}shuffle(e){let t,s,i=e.length;for(;i;)s=Math.floor(Math.random()*i--),t=e[i],e[i]=e[s],e[s]=t;return e}encodeBase64(e){let t,s,i,n,l,o,a,d="",r=0;for(e=this._utf8_encodeBase64(e);r<e.length;)t=e.charCodeAt(r++),s=e.charCodeAt(r++),i=e.charCodeAt(r++),n=t>>2,l=(3&t)<<4|s>>4,o=(15&s)<<2|i>>6,a=63&i,isNaN(s)?o=a=64:isNaN(i)&&(a=64),d=d+this._base64_keyStr.charAt(n)+this._base64_keyStr.charAt(l)+this._base64_keyStr.charAt(o)+this._base64_keyStr.charAt(a);return d}decodeBase64(e){let t,s,i,n,l,o,a,d="",r=0;for(e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");r<e.length;)n=this._base64_keyStr.indexOf(e.charAt(r++)),l=this._base64_keyStr.indexOf(e.charAt(r++)),o=this._base64_keyStr.indexOf(e.charAt(r++)),a=this._base64_keyStr.indexOf(e.charAt(r++)),t=n<<2|l>>4,s=(15&l)<<4|o>>2,i=(3&o)<<6|a,d+=String.fromCharCode(t),64!=o&&(d+=String.fromCharCode(s)),64!=a&&(d+=String.fromCharCode(i));return d=this._utf8_decodeBase64(d),d}_utf8_encodeBase64(e){let t="";e=e.replace(/\r\n/g,"\n");for(let s=0;s<e.length;s++){let i=e.charCodeAt(s);i<128?t+=String.fromCharCode(i):i>127&&i<2048?(t+=String.fromCharCode(i>>6|192),t+=String.fromCharCode(63&i|128)):(t+=String.fromCharCode(i>>12|224),t+=String.fromCharCode(i>>6&63|128),t+=String.fromCharCode(63&i|128))}return t}_utf8_decodeBase64(e){let t="",s=0,i=0,n=0,l=0;for(;s<e.length;)i=e.charCodeAt(s),i<128?(t+=String.fromCharCode(i),s++):i>191&&i<224?(n=e.charCodeAt(s+1),t+=String.fromCharCode((31&i)<<6|63&n),s+=2):(n=e.charCodeAt(s+1),l=e.charCodeAt(s+2),t+=String.fromCharCode((15&i)<<12|(63&n)<<6|63&l),s+=3);return t}determineFileIcon(e){if(e){let t,s;if([t,s]=e.split("/"),!t)return"unknown";switch(t){case"image":case"png":case"jpeg":return"image";case"text":return"html"===s?"html":"txt";case"audio":return"audio";case"video":return"video"}switch(s){case"xml":return"xml";case"pdf":return"pdf";case"vnd.ms-excel":case"vnd.openxmlformats-officedocument.spreadsheetml.sheet":return"excel";case"vnd.openxmlformats-officedocument.wordprocessingml.document":case"vnd.oasis.opendocument.text":return"word";case"vnd.oasis.opendocument.presentation":case"vnd.openxmlformats-officedocument.presentationml.presentation":return"ppt";case"x-zip-compressed":return"zip";case"x-msdownload":return"exe"}}return"unknown"}humanFileSize(e,t=1024){let s=e;if(Math.abs(e)<t)return s+" B";let i=["kB","MB","GB","TB","PB","EB","ZB","YB"],n=-1;do{s/=t,++n}while(Math.abs(s)>=t&&n<i.length-1);return s.toFixed(1)+" "+i[n]}generatePassword(e){let t=[],s=[];["upper","number","special","lower"].forEach((t=>{e["one"+t]&&s.push(t)}));let i=e.minpwdlength;return s.forEach(((e,n)=>{let l;l=n===s.length-1?i:Math.floor(Math.random()*(i-(s.length-n-1)))+1;for(let s=0;s<l;s++)t.push(this.pwRandomChar(e));i-=l})),this.shuffle(t).join("")}pwRandomChar(e){let t="!\"#$%&'()*+,-./:;<=>?@[\\]^_{|}~";switch(e){case"upper":return String.fromCharCode(Math.floor(26*Math.random())+65);case"lower":return String.fromCharCode(Math.floor(26*Math.random())+97);case"special":return t.charAt(Math.floor(31*Math.random()));case"number":return String.fromCharCode(Math.floor(10*Math.random())+48)}}datatoBlob(e,t="",s=512){let i=[];for(let t=0;t<e.length;t+=s){let n=e.slice(t,t+s),l=new Array(n.length);for(let e=0;e<n.length;e++)l[e]=n.charCodeAt(e);let o=new Uint8Array(l);i.push(o)}return new Blob(i,{type:t})}b64toBlob(e,t="",s=512){let i=atob(e),n=[];for(let e=0;e<i.length;e+=s){let t=i.slice(e,e+s),l=new Array(t.length);for(let e=0;e<t.length;e++)l[e]=t.charCodeAt(e);let o=new Uint8Array(l);n.push(o)}return new Blob(n,{type:t})}dataToBlobUrl(e){return this.blobUrl=this.sanitizer.bypassSecurityTrustResourceUrl(URL.createObjectURL(e)),this.blobUrl}static ɵfac=function(e){return new(e||helper)(n.LFG(l.o),n.LFG(o.H7))};static ɵprov=n.Yz7({token:helper,factory:helper.ɵfac,providedIn:"root"})}return helper})()},55329:(e,t,s)=>{"use strict";s.d(t,{d:()=>u});var i=s(62242),n=s(77579),l=s(3144),o=s(26625),a=s(75920),d=s(33369),r=s(9086),c=s(4154);let u=(()=>{class language{http;configurationService;session;broadcast;storeService;metadata;languagedata={};_currentlanguage="";currentlanguage$=new i.vpe;inlineEditEnabled=!1;storeDBName="language";constructor(e,t,s,i,n,l){this.http=e,this.configurationService=t,this.session=s,this.broadcast=i,this.storeService=n,this.metadata=l,this.storeService.initializeStores(this.storeDBName,["languages","applang","applist"],"language_code"),this.broadcast.message$.subscribe((e=>this.handleLogout(e)))}set currentlanguage(e){e||(e=this.getDefaultLanguage()),this._currentlanguage=e,this.storeService.readStoreAll(this.storeDBName,"languages").then((t=>{t.forEach((t=>{t.isCurrent=e==t.language_code,this.storeService.writeStore(this.storeDBName,"languages",{language_code:t.language_code,data:t})}))}))}get currentlanguage(){return this._currentlanguage}handleLogout(e){"logout"==e.messagetype&&this.clearDB()}clearDB(){this.storeService.clearDB(this.storeDBName,["languages","applang","applist"])}getLanguage(e){this.storeService.readStoreAll(this.storeDBName,"languages").then((t=>{this.languagedata.languages={available:t},this._currentlanguage=t.find((e=>e.isCurrent))?.language_code,this.storeService.readStore(this.storeDBName,"applang",this.currentlanguage).subscribe({next:e=>this.languagedata.applang=e,error:()=>!1}),this.storeService.readStore(this.storeDBName,"applist",this.currentlanguage).subscribe({next:e=>this.languagedata.applist=e,error:()=>!1}),e.next("getLanguage")})).catch((()=>{this.loadLanguage().subscribe((()=>{this.languagedata.languages.available.forEach((e=>{e.isCurrent=e.language_code==this.currentlanguage,this.storeService.writeStore(this.storeDBName,"languages",{language_code:e.language_code,data:e})})),e.next("getLanguage")}))}))}switchLanguage(e){let t=new n.x;return this.currentlanguage=e,this.storeService.readStore(this.storeDBName,"applang",e).subscribe({next:s=>{this.languagedata.applang=s,this.storeService.readStore(this.storeService,"applist",e).subscribe({next:e=>{this.languagedata.applist=e,this.currentlanguage$.emit(this.currentlanguage),t.next(!0),t.complete()},error:()=>{this.currentlanguage$.emit(this.currentlanguage),t.next(!0),t.complete()}})},error:()=>{this.loadLanguage().subscribe({next:()=>{t.next(!0),t.complete()}})}}),t.asObservable()}loadLanguage(){let e=new n.x,t=this.configurationService.getBackendUrl()+"/system/language";return this.currentlanguage&&(t+="/"+this.currentlanguage),this.http.get(t,{headers:this.session.getSessionHeader(),observe:"response"}).subscribe({next:t=>{let s=t.body;this.languagedata=s,this.currentlanguage||(this.currentlanguage=s.language),this.storeService.writeStore(this.storeDBName,"applang",{language_code:this.currentlanguage,data:this.languagedata.applang}),this.storeService.writeStore(this.storeDBName,"applist",{language_code:this.currentlanguage,data:this.languagedata.applist}),this.currentlanguage$.emit(this.currentlanguage),e.next(!0),e.complete()}}),e.asObservable()}getLabel(e,t="",s="default"){try{return""!=t&&void 0!==this.languagedata.mod&&null!=this.languagedata.mod[t]&&this.languagedata.mod[t][e]?this.languagedata.mod[t][e]||e:this.getAppLanglabel(e,s)}catch(t){return e}}getAppLanglabel(e,t="default"){return this.languagedata.applang[e]?"object"==typeof this.languagedata.applang[e]&&this.languagedata.applang[e][t]?this.getNestedLabel(e,t):this.getNestedLabel(e):e}getNestedLabel(e,t="default"){let s;if(this.languagedata.applang[e]&&(_.isObject(this.languagedata.applang[e])?s=this.languagedata.applang[e][t]?this.languagedata.applang[e][t]:this.languagedata.applang[e].default:_.isString(this.languagedata.applang[e])&&(s=this.languagedata.applang[e])),s){let e=this.getNestedTags(s);if(e)for(let i of e)s=s.replace("{LABEL:"+i+"}",this.getNestedLabel(i,t))}return s||e}getNestedTags(e){let t=e.indexOf("{LABEL:"),s=[];for(;t>=0;)if(t>=0){let i=e.indexOf("}",t);i>=0?(s.push(e.substring(t+7,i)),t=e.indexOf("{LABEL:",i)):t=-1}return s}getLabelFormatted(e,t,s="default"){let i;i=Array.isArray(t)?t:new Array(t);let n=0;return this.getLabel(e,"",s).replace(/%(s|%)/g,((...e)=>"s"===e[1]?i[n++]:"%"===e[1]?"%":e[0]))}getModuleName(e,t=!1,s="default"){try{let i=this.metadata.getModuleDefs(e);if(t){if(i.singular_label)return this.getLabel(i.singular_label,"",s);if(this.languagedata.applist.moduleListSingular[e])return this.languagedata.applist.moduleListSingular[e]||e}else if(i.module_label)return this.getLabel(i.module_label,"",s);return this.languagedata.applist.moduleList[e]||e}catch(t){return e}}getModuleCombinedLabel(e,t){return t?this.languagedata.applang[e+"_"+t.toUpperCase()]?this.getLabel(e+"_"+t.toUpperCase()):this.getLabel(e)+" "+this.getModuleName(t):"no module defined"}getFieldDisplayName(e,t,s={},i="default"){let n="";if(s.label)if(s.label.indexOf(":")>0){let e=s.label.split(":");n=this.getLabel(e[1],e[0])}else n=this.getLabel(s.label,e,i);else n=this.getLabel(this.metadata.getFieldlabel(e,t),e,i);return""===n?s.label?s.label:t:n}getFieldHelpText(e,t,s={}){let i="";if(s.popupHelp)if(s.popupHelp.indexOf(":")>0){let e=s.popupHelp.split(":");i=this.getLabel(e[1],e[0],"default")}else i=this.getLabel(s.popupHelp,e,"default");else i=this.getLabel(this.metadata.getFieldHelpText(e,t),e,"default");return""===i?s.popupHelp?s.popupHelp:t:i}getFieldDisplayOptions(e,t,s=!1){let i=this.metadata.getFieldOptions(e,t);if(!1===i)return[];try{let e=this.languagedata.applist[i];if(s){let t=e;e=[];for(let s in t)e.push({value:s,display:t[s]})}return e}catch(e){return[]}}getDisplayOptions(e,t=!1){let s=this.languagedata.applist[e];if(t){let e=s;s=[];for(let t in e)s.push({value:t,display:e[t]})}return s}getFieldDisplayOptionValue(e,t,s){let i=this.metadata.getFieldOptions(e,t);if(!1===i)return s;try{return this.languagedata.applist[i][s]?this.languagedata.applist[i][s]:s}catch(e){return s}}getAvialableLanguages(e=!1){let t=[];for(let s of this.languagedata.languages.available)(!e||s.system_language&&0!=s.system_language)&&t.push({language:s.language_code,text:s.language_name,system_language:s.system_language,communication_language:s.communication_language,default_language:s.language_code==this.languagedata.languages.default});return t}addAvailableLanguage(e){let t=!1;this.languagedata.languages.available.some((s=>{if(s.language_code==e.language_code)return s.system_language=e.system_language,s.default_language=e.default_language,e.default_language&&this.setDefaultLanguage(e.language_code),t=!0,!0})),t||(this.languagedata.languages.available.push(e),this.storeService.writeStore(this.storeDBName,"languages",{language_code:e.language_code,data:e}))}removeAvailableLanguage(e){this.languagedata.languages.available.some((e=>{if(e.language_code==e)return e.system_language=!1,!0}))}getDefaultLanguage(){return this.languagedata.languages.default}setDefaultLanguage(e){this.http.post(this.configurationService.getBackendUrl()+"/configuration/syslanguages/setdefault/"+e,{},{headers:this.session.getSessionHeader(),observe:"response"}).subscribe((t=>{t.body.success&&(this.languagedata.languages.default=e)}))}getLangText(e){let t=e;return this.languagedata.languages.available.some((s=>{if(s.language_code==e)return t=s.language_name,!0})),t}searchLabel(e,t=10){let s=[],i=e.toLowerCase().split(" ");for(let e in this.languagedata.applang){let n=!0;for(let t of i)if(e.toLocaleLowerCase().indexOf(t)<0){n=!1;break}if(n&&s.push({label:e,translation:this.getAppLanglabel(e)}),s.length>=t)break}return s}addLabel(e,t="",s="",i=""){this.languagedata.applang[e]={default:t,long:i,short:s}}compareStrings(e,t){return e.localeCompare(t,this._currentlanguage.slice(0,2))}sortArray(e,t=!1){e.sort(((e,s)=>this.compareStrings(e,s)*(t?-1:1)))}sortObjects(e,t,s=!1){e.sort(((e,i)=>this.compareStrings(e[t],i[t])*(s?-1:1)))}ucFirst(e){return e.charAt(0).toLocaleUpperCase(this._currentlanguage.slice(0,2))+e.slice(1)}lcFirst(e){return e.charAt(0).toLocaleLowerCase(this._currentlanguage.slice(0,2))+e.slice(1)}static ɵfac=function(e){return new(e||language)(i.LFG(l.eN),i.LFG(o.C),i.LFG(a.n),i.LFG(d.f),i.LFG(r.d),i.LFG(c.Pu))};static ɵprov=i.Yz7({token:language,factory:language.ɵfac,providedIn:"root"})}return language})()},26559:(e,t,s)=>{"use strict";s.d(t,{b:()=>n});var i=s(62242);let n=(()=>{class layout{headerheight=90;get screenwidth(){let e=window.innerWidth;return e>=1024?"large":e>=768?"medium":"small"}static ɵfac=function(e){return new(e||layout)};static ɵprov=i.Yz7({token:layout,factory:layout.ɵfac,providedIn:"root"})}return layout})()},42067:(e,t,s)=>{"use strict";s.d(t,{$:()=>d});var i=s(15861),n=s(62242),l=s(77579),o=s(39646),a=s(26625);let d=(()=>{class libloader{configuration;loadedLibs=[];loadedLibs$=new n.vpe;loadedDirect=[];constructor(e){this.configuration=e}get scripts(){return this.configuration.getData("scripts")}loadLibs(...e){let t=[];e.forEach((e=>{t.push(this.loadLib(e))}));let s=new l.x,i=0;for(let e of t)e.subscribe((e=>{i++,i==t.length&&(s.next(!0),s.complete())}),(e=>{i++,s.error(e)}));return i==t.length?(0,o.of)(s):s.asObservable()}loadLib(e){if(this.scripts[e]){if(this.isLibLoaded(e))return(0,o.of)({script:e,loaded:!0,status:"Already Loaded"});if(this.isLibLoading(e))return this.loadedLibs$;{this.loadedLibs.push({name:e,status:"loading"});let t=new l.x;return this.loadScriptsDirect(this.scripts[e]).then((s=>{t.next({script:e,loaded:!0,status:"Loaded"}),t.complete(),this.loadedLibs.find((t=>t.name==e)).status="loaded",this.loadedLibs$.emit({script:e,loaded:!0,status:"Loaded"})}),(s=>{t.error({script:e,loaded:!1,status:"error"}),t.complete(),this.loadedLibs.find((t=>t.name==e)).status="error",this.loadedLibs$.emit({script:e,loaded:!0,status:"error"})})),t.asObservable()}}return(0,o.of)({script:e,loaded:!1,status:"Unknown"})}loadScriptsDirect(e){var t=this;return(0,i.Z)((function*(){return new Promise(function(){var s=(0,i.Z)((function*(s,i){let n=0;for(let l of e)yield t.loadScriptDirect(l.src).then((t=>{n++,n==e.length&&s({script:l.name,loaded:!0,status:"Loaded"})}),(e=>{i({script:l.name,loaded:!1,status:"error"})}))}));return function(e,t){return s.apply(this,arguments)}}())}))()}loadFromSource(e){let t=new l.x,s=0;for(let i of e)this.loadScriptDirect(i).then((i=>{s++,s==e.length&&(t.next(!0),t.complete())}),(e=>{t.error(!1),t.complete()}));return t.asObservable()}loadScriptDirect(e){var t=this;return(0,i.Z)((function*(){return-1!=t.loadedDirect.indexOf(e)?Promise.resolve(!0):new Promise(((t,s)=>{let i={};e.endsWith(".css")?(i=document.createElement("link"),i.rel="stylesheet",i.href=e):(i=document.createElement("script"),i.type="text/javascript",i.src=e),i.readyState?i.onreadystatechange=()=>{"loaded"!==i.readyState&&"complete"!==i.readyState||(i.onreadystatechange=null,t(!0))}:i.onload=()=>{t(!0)},i.onerror=e=>{s(!1)},document.getElementsByTagName("head")[0].appendChild(i)}))}))()}isLibLoaded(e){return!!this.loadedLibs.find((t=>t.name==e&&"loaded"==t.status))}isLibLoading(e){return!!this.loadedLibs.find((t=>t.name==e&&"loading"==t.status))}static ɵfac=function(e){return new(e||libloader)(n.LFG(a.C))};static ɵprov=n.Yz7({token:libloader,factory:libloader.ɵfac,providedIn:"root"})}return libloader})()},4411:(e,t,s)=>{"use strict";s.d(t,{_:()=>m});var i=s(77579),n=s(62242),l=s(3144),o=s(33369),a=s(26625),d=s(75920),r=s(55329),c=s(14505),u=s(9086);let m=(()=>{class loader{http;broadcast;configuration;session;language;backend;storeService;module="";id="";data={};loaderHandler=new i.x;loadComplete;start="";counterCompleted=0;progress=0;activeLoader="";loadPhase="system";loadElements={system:[{name:"getLanguage",display:"Language",status:"initial",sequence:35,action:e=>{e.language.getLanguage(e.loaderHandler)}}],primary:[],secondary:[]};storeDBName="loaddata";constructor(e,t,s,i,n,l,o){this.http=e,this.broadcast=t,this.configuration=s,this.session=i,this.language=n,this.backend=l,this.storeService=o,this.loaderHandler.subscribe((e=>this.handleLoaderHandler())),this.storeService.initializeStores(this.storeDBName,["loadtaskdata","loadtasks"],"id"),this.broadcast.message$.subscribe((e=>{this.handleLogout(e),"configuration.reloadtaskdata"==e.messagetype&&this.loadTaskItemFromBackendByName(e.messagedata)}))}getLoadTasks(){let e=new i.x;return this.storeService.readStoreAll(this.storeDBName,"loadtasks").then((t=>{this.processLoadTasks(t,!1),e.next(!0),e.complete()})).catch((()=>{this.getLoadTasksFromBackend(e)})),e.asObservable()}getLoadTasksFromBackend(e){this.http.get(this.configuration.getBackendUrl()+"/system/spiceui/core/loadtasks",{headers:this.session.getSessionHeader()}).subscribe((t=>{this.processLoadTasks(t),e.next(!0),e.complete()}))}processLoadTasks(e,t=!0){this.loadElements.primary=[],this.loadElements.secondary=[];for(let s of e)s.status="initial",this.loadElements[s.phase].push(s),t&&this.storeService.writeStore(this.storeDBName,"loadtasks",{id:s.id,data:s});this.loadElements.primary.sort(((e,t)=>parseInt(e.sequence,10)>parseInt(t.sequence,10)?1:-1)),this.loadElements.secondary.sort(((e,t)=>parseInt(e.sequence,10)>parseInt(t.sequence,10)?1:-1))}clearDB(){this.storeService.clearDB(this.storeDBName,["loadtaskdata","loadtasks"])}handleLogout(e){"logout"==e.messagetype&&this.clearDB()}load(e=!0){return e&&(this.clearDB(),this.language.clearDB(),this.configuration.clearDB()),this.loadComplete=new i.x,this.getLoadTasks().subscribe((e=>{this.resetLoader(),this.start=performance.now(),this.handleLoaderHandler()})),this.loadComplete.asObservable()}reloadPrimary(){this.loadComplete=new i.x,this.loadPhase="primary",this.progress=0,this.counterCompleted=0;for(let e of this.loadElements.primary)e.status="initial";return this.start=performance.now(),this.handleLoaderHandler(),this.loadComplete.asObservable()}resetLoader(){this.counterCompleted=0,this.progress=0,this.loadPhase="system";for(let e of this.loadElements.system)e.status="initial";for(let e of this.loadElements.primary)e.status="initial";for(let e of this.loadElements.secondary)e.status="initial"}reset(){this.counterCompleted=0,this.progress=0;for(let e of this.loadElements.system)e.status="initial";for(let e of this.loadElements.primary)e.status="initial";for(let e of this.loadElements.secondary)e.status="initial"}setComplete(){performance.now()-this.start>500?this.complete():setTimeout((()=>this.complete()),500)}complete(){this.loadComplete.next(!0),this.loadComplete.complete()}handleLoaderHandler(){let e=!1;for(let t of this.loadElements[this.loadPhase])if("active"===t.status){t.status="completed";let e=++this.counterCompleted/(this.loadElements.primary.length+this.loadElements.system.length)*100;this.progress=e}else if("initial"===t.status){t.status="active",t.action?t.action(this):this.handleRouteElement(t),e=!0,this.activeLoader=t.display;break}!1===e&&"system"==this.loadPhase?(this.loadPhase="primary",this.handleLoaderHandler()):!1===e&&"primary"==this.loadPhase&&(this.setComplete(),this.loadPhase="secondary",this.broadcast.broadcastMessage("loader.primarycompleted"),this.handleLoaderHandler())}handleRouteElement(e){this.storeService.readStore(this.storeDBName,"loadtaskdata",e.id).subscribe({next:t=>{this.processLoadElementData(e.id,t),this.broadcast.broadcastMessage("loader.completed",e.name),this.loaderHandler.next(e.name)},error:()=>{this.loadRouteElementFromBackend(e)}})}loadRouteElementFromBackend(e){let t=e.route?e.route:"/system/spiceui/core/loadtasks/"+e.id;this.http.get(this.configuration.getBackendUrl()+t,{headers:this.session.getSessionHeader()}).subscribe({next:t=>{this.storeService.writeStore(this.storeDBName,"loadtaskdata",{id:e.id,data:t}),this.processLoadElementData(e.id,t),this.broadcast.broadcastMessage("loader.completed",e.name),this.loaderHandler.next(e.name)}})}processLoadElementData(e,t){for(let s in t)this.configuration.setDataFromStore(e,s,t[s])}loadTaskItemFromBackendByName(e){this.backend.getRequest(`system/spiceui/core/loadtaskitem/${e}`).subscribe({next:t=>{this.configuration.setData(e,t[e])}})}static ɵfac=function(e){return new(e||loader)(n.LFG(l.eN),n.LFG(o.f),n.LFG(a.C),n.LFG(d.n),n.LFG(r.d),n.LFG(c.y),n.LFG(u.d))};static ɵprov=n.Yz7({token:loader,factory:loader.ɵfac,providedIn:"root"})}return loader})()},12349:(e,t,s)=>{"use strict";s.d(t,{M:()=>l});var i=s(62242);const n=()=>{};let l=(()=>{class loggerService{sessionService;get info(){return this.isDev()?console.info.bind(console):n}get warn(){return this.isDev()?console.warn.bind(console):n}get log(){return this.isDev()?console.log.bind(console):n}get error(){return this.isDev()?console.error.bind(console):n}isDev(){return(0,i.X6Q)()||this.sessionService&&this.sessionService.isDev}setSession(e){this.sessionService=e}static ɵfac=function(e){return new(e||loggerService)};static ɵprov=i.Yz7({token:loggerService,factory:loggerService.ɵfac,providedIn:"root"})}return loggerService})()},64461:(e,t,s)=>{"use strict";s.d(t,{j:()=>b,q:()=>_});var i=s(3144),n=s(77579),l=s(62242),o=s(26625),a=s(83348),d=s(4411),r=s(13278),c=s(93441),u=s(75920),m=s(33369),g=s(29266),h=s(44044),p=s(4154),f=s(14505);let b=(()=>{class loginService{configurationService;http;router;loader;toast;helper;session;broadcast;modelutilities;modal;metadata;backend;redirectUrl="";authData={userName:"",password:"",rememberMe:!1};tokenObject;oauthIssuer="";constructor(e,t,s,i,n,l,o,a,d,r,c,u){this.configurationService=e,this.http=t,this.router=s,this.loader=i,this.toast=n,this.helper=l,this.session=o,this.broadcast=a,this.modelutilities=d,this.modal=r,this.metadata=c,this.backend=u,this.broadcast.message$.subscribe((e=>{"loader.completed"===e.messagetype&&"loadUserData"===e.messagedata&&this.session.authData.obtainGDPRconsent&&this.modal.openModal("GlobalObtainGDPRConsentContainer")}))}login(e=!0){let t,s=new n.x,l=this.configurationService.getBackendUrl()+"/authentication/login",o=new i.WM;if(this.authData.userName&&this.authData.password){let e=this.authData.userName.indexOf("#as#");e>-1&&(t=this.authData.userName.slice(0,e),this.authData.userName=this.authData.userName.slice(e+4)),o=o.set("Authorization","Basic "+this.helper.encodeBase64(this.authData.userName+":"+this.authData.password)),this.authData.code2fa&&(o=o.set("code2fa",this.authData.code2fa)),this.session.deviceID&&(o=o.set("device-id",this.session.deviceID))}else{if(!this.tokenObject)throw new Error("Cannot Log In");o=o.set("OAuth-Token",this.tokenObject.access_token).set("OAuth-Issuer",this.oauthIssuer).set("OAuth-Refresh-Token",this.tokenObject.refresh_token??"").set("OAuth-Token-Valid-Until",this.tokenObject.valid_until??"")}let a={};return t&&(a.impersonationuser=encodeURIComponent(t)),this.http.get(l,{headers:o,params:a}).subscribe({next:t=>{0==t.result&&this.toast.sendToast("error authenticating","error",t.error);let i=t;this.session.authData.sessionId=i.id,this.session.authData.userId=i.userid,this.session.authData.companycode_id=i.companycode_id,this.session.authData.tenant_id=i.tenant_id,this.session.authData.tenant_name=i.tenant_name,this.session.authData.tenant_accepted_legal_notice=i.tenant_accepted_legal_notice,this.session.authData.tenant_wizard_completed=i.tenant_wizard_completed,this.session.authData.userName=i.user_name,this.session.authData.email=i.email,this.session.authData.admin=i.admin,this.session.authData.dev=i.dev,this.session.authData.portalOnly=i.portal_only,this.session.authData.googleToken=i.access_token,this.session.authData.obtainGDPRconsent=i.obtainGDPRconsent,this.session.authData.canchangepassword=i.canchangepassword,this.session.authData.user=this.modelutilities.backendModel2spice("Users",i.user),this.session.storeToken(this.authData.rememberMe),sessionStorage[btoa(this.session.authData.sessionId+":backendurl")]=btoa(this.configurationService.getBackendUrl()),this.broadcast.broadcastMessage("login"),this.load(e),s.next(!0),s.complete()},error:e=>{if(401===e.status)s.error(e.error.error);else this.toast.sendToast("Application Error","error","Error Authenticating"),s.error(e.statusText);s.complete()}}),s.asObservable()}relogin(e,t){let s=this.configurationService.getBackendUrl()+"/authentication/login",l=new n.x,o=new i.WM;return e?(o=o.set("Authorization","Basic "+this.helper.encodeBase64(this.session.authData.userName+":"+e)),this.authData.code2fa&&(o=o.set("code2fa",this.authData.code2fa))):t&&(o=o.set("OAuth-Token",t.access_token).set("OAuth-Issuer",this.oauthIssuer).set("OAuth-Refresh-Token",this.tokenObject.refresh_token??"").set("OAuth-Token-Valid-Until",this.tokenObject.valid_until??"")),this.http.get(s,{headers:o}).subscribe({next:e=>{let t=e;this.session.authData.sessionId=t.id,this.session.storeToken(this.authData.rememberMe),l.next(!0),l.complete(),this.broadcast.broadcastMessage("relogin")},error:e=>{if(401===e.status)l.error(e.error.error);else this.toast.sendToast("Application Error","error","Error Authenticating"),l.error(e.statusText);l.complete()}}),l.asObservable()}renewPassword(e){let t=this.configurationService.getBackendUrl()+"/user/password/change";if(this.authData.userName&&this.authData.password){let s=new i.WM;s=s.set("Authorization","Basic "+this.helper.encodeBase64(this.authData.userName+":"+this.authData.password)),this.http.post(t,{newpwd:e},{headers:s}).subscribe({next:e=>{}})}}load(e=!0){this.loader.load(e).subscribe((e=>{this.redirect(e)}))}redirect(e){!0===e&&(this.session.authData.loaded=!0,this.toast.clearAll(),this.redirectUrl?(this.router.navigate([this.redirectUrl]),this.redirectUrl=""):this.router.navigate(["/"]))}logout(e=!1){e||this.backend.deleteRequest("authentication/login",{session_id:this.session.authData.sessionId}),this.session.endSession(),this.loader.reset(),this.broadcast.broadcastMessage("logout"),this.router.navigate(["/login"])}static ɵfac=function(e){return new(e||loginService)(l.LFG(o.C),l.LFG(i.eN),l.LFG(a.F0),l.LFG(d._),l.LFG(r.A),l.LFG(c._),l.LFG(u.n),l.LFG(m.f),l.LFG(g.A),l.LFG(h.o),l.LFG(p.Pu),l.LFG(f.y))};static ɵprov=l.Yz7({token:loginService,factory:loginService.ɵfac,providedIn:"root"})}return loginService})(),_=(()=>{class loginCheck{login;session;modal;router;loader;constructor(e,t,s,i,n){this.login=e,this.session=t,this.modal=s,this.router=i,this.loader=n}canActivate(e,t){return!(!this.session||!this.session.authData.sessionId)||("/"!=t.url&&(this.login.redirectUrl=t.url),this.router.navigate(["/login"]),!1)}static ɵfac=function(e){return new(e||loginCheck)(l.LFG(b),l.LFG(u.n),l.LFG(h.o),l.LFG(a.F0),l.LFG(d._))};static ɵprov=l.Yz7({token:loginCheck,factory:loginCheck.ɵfac,providedIn:"root"})}return loginCheck})()},4154:(e,t,s)=>{"use strict";s.d(t,{Pu:()=>x});var i=s(15861),n=s(62843),l=s(77579),o=s(32076),a=s(70262),d=s(63900),r=s(39646),c=s(62242),u=s(97516),m=s(54004),g=s(64988),h=s(30051),p=s(3144),f=s(75920),b=s(26625),v=s(83348),y=s(33369);let x=(()=>{class metadata{http;session;configuration;router;broadcast;Injector;role="";constructor(e,t,s,i,n,l){this.http=e,this.session=t,this.configuration=s,this.router=i,this.broadcast=n,this.Injector=l,this.broadcast.message$.subscribe((e=>this.handleMessage(e)))}get actionSets(){return this.configuration.getData("actionsets")}get componentDefaultConfigs(){return this.configuration.getData("componentdefaultconfigs")}get componentModuleConfigs(){return this.configuration.getData("componentmoduleconfigs")}get moduleDirectory(){return this.configuration.getData("modules")?this.configuration.getData("modules"):{}}get componentDirectory(){return this.configuration.getData("components")?this.configuration.getData("components"):{}}get componentSets(){return this.configuration.getData("componentsets")}get routes(){return this.configuration.getData("routes")}get scripts(){return this.configuration.getData("scripts")}get fieldSets(){return this.configuration.getData("fieldsets")}get validationRules(){return this.configuration.getData("validationrules")}get fieldDefs(){return this.configuration.getData("fielddefs")}get fieldTypeMappings(){return this.configuration.getData("fieldtypemappings")}get fieldStatusNetworks(){return this.configuration.getData("fieldstatusnetworks")}get moduleDefs(){return this.configuration.getData("moduledefs")}get moduleFilters(){return this.configuration.getData("modulefilters")}get sysroles(){return this.configuration.getData("sysroles")}get roles(){return this.configuration.getData("roles")}get rolemodules(){return this.configuration.getData("rolemodules")}get copyrules(){return this.configuration.getData("copyrules")}get htmlStyleData(){return this.configuration.getData("htmlstyles")}get countries(){return this.configuration.getData("countries")}addRoutes(){this.routes.forEach((e=>{this.router.config.unshift({path:e.path,component:g.y,canActivate:[w]}),this.router.config.unshift({path:"tab/:tabid/"+e.path,component:g.y,canActivate:[w]})}))}addComponentDirect(e,t,s){const i=this.hasRenderError(e,t);if(i)return this.renderMissingComponent(t,e),console.error(i),(0,n._)((()=>i));const o=new l.x,a=this.componentDirectory[e].module,d={name:this.moduleDirectory[a].module,path:this.moduleDirectory[a].path.replace("app/","")};return this.renderComponent(d,e,t,[],s).subscribe({next:e=>{e.instance.self=e,o.next(e),o.complete()},error:s=>{this.renderMissingComponent(t,e),o.error(s)}}),o.asObservable()}checkComponent(e){return!!this.componentDirectory[e]}importModule(e){return(0,i.Z)((function*(){return s(19456)(`./${e.path}.ts`).then((t=>t[e.name]))}))()}renderMissingComponent(e,t){e.createComponent(h.K).instance.component=t}loadComponentType(e,t){return(0,o.D)(this.importModule(e)).pipe((0,a.K)((()=>(0,n._)((()=>`Could not find the module file for path ${e.path}. Check if the module file exists or use a correct module path.`)))),(0,d.w)((s=>{if(!s)return(0,n._)((()=>`Module name ${e.name} in the config does not match the class name in the module file.`));let i;return Object.keys(s).some((e=>!!s[e].hasOwnProperty("declarations")&&(i=s[e].declarations.find((e=>e.name==t)),!0))),(0,r.of)(i)})))}renderComponent(e,t,s,i,n){return this.loadComponentType(e,t).pipe((0,m.U)((e=>{const t=s.createComponent(e,{injector:n});return i.forEach((e=>t.instance[e.property]=e.value)),t.changeDetectorRef.markForCheck(),t})))}hasRenderError(e,t){return t?this.componentDirectory[e]&&this.componentDirectory[e].module?void 0:`misconfiguration for component ${e} in object repository`:"ViewContainerRef was passed is undefined"}loadComponentContainer(e,t,s){const i=t.createComponent(u.m,{injector:s});return i.instance.containerComponent=e,i}addComponent(e,t,s){const i=this.hasRenderError(e,t);if(i)return this.renderMissingComponent(t,e),(0,n._)((()=>i));const o=new l.x,a=this.loadComponentContainer(e,t,s);return a.instance.containerRef.subscribe((t=>{a.changeDetectorRef.detectChanges(),this.addComponentDirect(e,t).subscribe((e=>{o.next(e),o.complete()}))})),a.instance.loaded=!0,a.changeDetectorRef.detectChanges(),a.changeDetectorRef.markForCheck(),o.asObservable()}getComponentSet(e){return this.componentSets[e]}getAllComponentsets(){try{return this.componentSets}catch(e){return""}}addComponentSet(e,t,s,i="custom"){this.componentSets[e]={name:s,module:t,type:i,items:[]}}getRawComponentSets(){return this.componentSets}getComponentSets(e=""){let t=[];for(let s in this.componentSets)""!==e&&this.componentSets[s].module!==e||t.push({id:s,name:this.componentSets[s].name,module:this.componentSets[s].module,type:this.componentSets[s].type});return t.sort(((e,t)=>e.name?e.name.localeCompare(t.name):1)),t}getComponentSetObjects(e){try{return this.componentSets[e].items}catch(e){return[]}}addComponentToComponentset(e,t,s,i={}){this.componentSets[t].items.push({id:e,component:s,componentconfig:i,sequence:0});let n=0;for(let e of this.componentSets[t].items)e.sequence=n,n++}getRawFieldSets(){return this.fieldSets}getFieldSets(e="",t=""){let s=[];for(let t in this.fieldSets)""!==e&&this.fieldSets[t].module!==e||s.push({id:t,name:this.fieldSets[t].name,module:this.fieldSets[t].module,type:this.fieldSets[t].type});return s.sort(((e,t)=>e.name>t.name?1:-1)),s}getFieldset(e){try{return this.fieldSets[e]}catch(e){return""}}getAllFieldsets(){try{return this.fieldSets}catch(e){return""}}setFieldset(e,t){this.fieldSets[e].name=t.name,this.fieldSets[e].package=t.package,this.configuration.setData("fieldsets",this.fieldSets)}addFieldset(e,t,s,i="custom",n=[]){this.fieldSets[e]={items:n,module:t,name:s,type:i},this.configuration.setData("fieldsets",this.fieldSets)}addFieldsetToFieldset(e,t,s,i={}){this.fieldSets[t].items.push({id:e,fieldset:s,fieldconfig:i,sequence:0});let n=0;for(let e of this.fieldSets[t].items)e.sequence=n,n++;this.configuration.setData("fieldsets",this.fieldSets)}addFieldToFieldset(e,t,s,i={}){this.fieldSets[t].items.push({id:e,field:s,fieldconfig:i,sequence:0});let n=0;for(let e of this.fieldSets[t].items)e.sequence=n,n++;this.configuration.setData("fieldsets",this.fieldSets)}removeFieldsetItem(e,t){let s=!1;if(this.fieldSets[e].items.some(((e,i)=>{if(e.id==t.id)return s=i,!0})),!1!==s){this.fieldSets[e].items.splice(s,1);let t=0;for(let s of this.fieldSets[e].items)s.sequence=t,t++;return this.configuration.setData("fieldsets",this.fieldSets),!0}return!1}getFieldsetName(e){try{return this.fieldSets[e].name}catch(e){return""}}getFieldSetFields(e,t=""){if(this.fieldSets[e]){let s=[];for(let i of this.fieldSets[e].items)i.field?s.push(i):i.fieldset&&t.indexOf(e)<0&&(s=s.concat(this.getFieldSetFields(i.fieldset,t+":"+e)));return s}return[]}getFieldSetItems(e){return this.fieldSets[e]?this.fieldSets[e].items:[]}getFieldlabel(e,t){try{return this.fieldDefs[e][t].vname?this.fieldDefs[e][t].vname:t}catch(e){return t}}getFieldHelpText(e,t){try{return this.fieldDefs[e][t].popupHelp}catch(e){return null}}hasField(e,t){return this.fieldDefs[e]&&this.fieldDefs[e][t]}getAppModules(){let e=[];for(let t in this.moduleDirectory)this.moduleDirectory.hasOwnProperty(t)&&e.push(this.moduleDirectory[t]);return e}getModuleDefs(e){return this.moduleDefs[e]?this.moduleDefs[e]:this.moduleDefs[this.getModuleById(e)]}getModuleDuplicatecheck(e){try{return"1"===this.moduleDefs[e].duplicatecheck||"2"===this.moduleDefs[e].duplicatecheck}catch(e){return!1}}getModuleDuplicatecheckOnChange(e){try{return"1"===this.moduleDefs[e].duplicatecheck}catch(e){return!1}}getModules(){let e=[];for(let t in this.moduleDefs)e.push(t);return e}getGlobalSearchModules(){let e=[];for(let t in this.moduleDefs)this.moduleDefs[t].ftsglobalsearch&&e.push(t);return e}getPhoneSearchModules(){let e=[];for(let t in this.moduleDefs)this.moduleDefs[t].ftsphonesearch&&e.push(t);return e}getModuleById(e){for(let t in this.moduleDefs)if(this.moduleDefs[t].id==e)return t;return""}getModuleIcon(e){try{return this.moduleDefs[e].icon}catch(e){return!1}}getModuleSingular(e){try{return this.moduleDefs[e].singular}catch(t){return e}}getModuleFromSingular(e){let t="";for(let s in this.moduleDefs)this.moduleDefs[s].singular==e&&(t=s);return t}getModuleTrackflag(e){try{return!!parseInt(this.moduleDefs[e].track,10)}catch(e){return!1}}getModuleFields(e){try{return this.fieldDefs[e]?this.fieldDefs[e]:{}}catch(e){return{}}}getModuleDuplicateCheckFields(e){let t=[],s=this.getModuleFields(e);for(let e in s)s[e].duplicatecheck&&t.push(e);return t}getModuleValidations(e){try{return this.validationRules[e].validations}catch(e){return[]}}getModuleMenu(e){try{let t=[];return this.moduleDefs[e].actionset&&(t=this.getActionSetItems(this.moduleDefs[e].actionset)),t}catch(e){return[]}}getModuleListTypes(e){try{return this.moduleDefs[e].listtypes}catch(e){return[]}}addModuleListType(e,t){this.moduleDefs[e].listtypes.push(t),this.configuration.setData("moduledefs",this.moduleDefs)}updateModuleListType(e,t){this.moduleDefs[e].listtypes.some((e=>{if(e.id==t.id){for(let s in t)t.hasOwnProperty(s)&&(e[s]=t[s]);return this.configuration.setData("moduledefs",this.moduleDefs),!0}}))}deleteModuleListType(e,t){let s=this.moduleDefs[e].listtypes.findIndex((e=>e.id==t));return s>=0&&this.moduleDefs[e].listtypes.splice(s,1),this.configuration.setData("moduledefs",this.moduleDefs),this.moduleDefs[e].listtypes}getModuleAggregates(e){return this.moduleDefs[e].ftsaggregates}getFieldDefs(e,t){try{return this.fieldDefs[e][t]}catch(e){return"varchar"}}checkStatusManaged(e){for(let t in this.fieldDefs[e])if(this.getFieldDefs(e,t).options&&this.fieldStatusNetworks[this.getFieldDefs(e,t).options])return{statusField:this.getFieldDefs(e,t).name,statusNetwork:this.fieldStatusNetworks[this.getFieldDefs(e,t).options]};return!1}getFieldType(e,t){try{return this.fieldDefs[e][t].type}catch(e){return"varchar"}}getFieldSource(e,t){try{return this.fieldDefs[e][t].source}catch(e){return""}}getFieldOptions(e,t){try{return this.fieldDefs[e][t].options}catch(e){return!1}}getFieldRequired(e,t){try{return this.fieldDefs[e][t].required}catch(e){return!1}}getSystemModules(){let e=[];for(let t in this.moduleDirectory)e.push(this.moduleDirectory[t]);return e.sort(((e,t)=>e.module>t.module?1:-1)),e}getSystemModuleByComponent(e){for(let t in this.componentDirectory)if(t==e)return this.componentDirectory[t].module;return null}getSystemComponents(e){let t=[];for(let s in this.componentDirectory)e&&e!=this.componentDirectory[s].module||t.push(this.componentDirectory[s]);return t.sort(((e,t)=>e.component>t.component?1:-1)),t}getComponentConfigOptions(e){try{return this.componentDirectory[e].componentconfig}catch(e){return{}}}getComponentConfigurations(e="*"){return"*"===e?this.componentDefaultConfigs:this.componentModuleConfigs[e]?this.componentModuleConfigs[e]:{}}getComponentConfig(e="",t="",s=""){return""===s&&(s=this.role?this.role:"*"),""!=t&&this.componentModuleConfigs[t]&&this.componentModuleConfigs[t][e]&&this.componentModuleConfigs[t][e][s]?this.componentModuleConfigs[t][e][s]:""!=t&&this.componentModuleConfigs[t]&&this.componentModuleConfigs[t][e]&&this.componentModuleConfigs[t][e]["*"]?this.componentModuleConfigs[t][e]["*"]:this.componentDefaultConfigs[e]&&this.componentDefaultConfigs[e][s]?this.componentDefaultConfigs[e][s]:this.componentDefaultConfigs[e]&&this.componentDefaultConfigs[e]["*"]?this.componentDefaultConfigs[e]["*"]:{}}getModuleDefaultComponentConfigByUsage(e,t){let s="";switch(t){case"list":s="ObjectList";break;case"details":s="ObjectRecordDetails"}return this.getComponentConfig(s,e)}getRawActionSets(){return this.actionSets}getActionSets(e=""){let t=[];for(let s in this.actionSets)""!==e&&this.actionSets[s].module!==e||t.push({id:s,name:this.actionSets[s].name,module:this.actionSets[s].module,type:this.actionSets[s].type,package:this.actionSets[s].package,actions:this.actionSets[s].actions});return t.sort(((e,t)=>e.name>t.name?1:-1)),t}getActionSet(e){return this.actionSets[e]}getActionSetItems(e){try{return this.actionSets[e].actions}catch(e){return[]}}setActionset(e,t){this.actionSets[e].name=t.name,this.actionSets[e].package=t.package,this.configuration.setData("actionsets",this.actionSets)}setActionSet(e,t){this.actionSets[e]={id:e,module:t.module,name:t.name,package:t.package,version:t.version,actions:t.actions,type:t.type},this.configuration.setData("actionsets",this.actionSets)}setActionSetItems(e,t){this.actionSets[e].actions=t,this.configuration.setData("actionsets",this.actionSets)}addActionset(e,t,s,i="custom",n=[]){this.actionSets[e]={items:n,module:t,name:s,type:i},this.configuration.setData("actionsets",this.actionSets)}removeActionset(e){delete this.actionSets[e],this.configuration.setData("actionsets",this.actionSets)}removeActionsetItem(e,t){let s=!1;if(this.actionSets[e].items.some(((e,i)=>{if(e.id==t.id)return s=i,!0})),!1!==s){this.actionSets[e].items.splice(s,1);let t=0;for(let s of this.actionSets[e].items)s.sequence=t,t++;return this.configuration.setData("actionsets",this.actionSets),!0}return!1}getActionsetName(e){try{return this.actionSets[e].name}catch(e){return""}}getModuleFilters(e=""){let t=[];for(let s in this.moduleFilters)if(this.moduleFilters.hasOwnProperty(s)){if(""!==e&&this.moduleFilters[s].module!==e)continue;t.push(this.moduleFilters[s])}return t.sort(((e,t)=>e.name-t.name)),t}getModuleFilter(e){try{return this.moduleFilters[e]}catch(e){return""}}setModuleFilter(e,t,s,i="custom"){this.moduleFilters||this.configuration.setData("modulefilters",{}),this.moduleFilters[e]={id:e,name:t,module:s,type:i},this.configuration.setData("modulefilters",this.moduleFilters)}removeModuleFilter(e){delete this.moduleFilters[e],this.configuration.setData("modulefilters",this.moduleFilters)}checkModuleAcl(e,t){try{return t?this.moduleDefs[e].acl[t]:!!this.moduleDefs[e]}catch(e){return!1}}getRoles(){return this.roles}getSysRoles(){return this.sysroles}getActiveRole(){let e={};return this.roles&&this.roles.some((t=>{if(this.role==t.id)return e=t,!0})),e}setActiveRole(e){return!!this.roles.find((t=>t.id==e))&&(this.role=e,!0)}getRoleModules(e=!1){let t=[];if(this.rolemodules[this.role])for(let s of this.rolemodules[this.role])(!1===e||null!==s.sequence)&&this.moduleDefs[s.module]&&this.moduleDefs[s.module].visible&&(!this.moduleDefs[s.module].visibleaclaction||this.moduleDefs[s.module].visibleaclaction&&this.checkModuleAcl(s.module,this.moduleDefs[s.module].visibleaclaction))&&this.moduleDefs[s.module].acl.list&&t.push(s.module);return t}getCopyRules(e,t){const s=this.copyrules[e]&&this.copyrules[e][t]?this.copyrules[e][t]:[];return s.forEach((e=>{if(e.params&&!_.isObject(e.params))try{e.params=JSON.parse(e.params)}catch(t){e.params={}}})),s}getFieldTypes(){let e=[];for(let t in this.fieldTypeMappings)e.push(t);return e}getFieldTypeComponent(e){return this.fieldTypeMappings[e]}getRouteDetails(e){return this.routes?.sort(((e,t)=>e.path.split(":").length>t.path.split(":").length?1:-1)).find((t=>{if(t.path==e)return!0;if(e.split("/").length==t.path.split("/").length){let s=e.split("/"),i=t.path.split("/"),n=!0,l=0;for(;l<s.length&&n;)":"!==i[l].substring(0,1)&&i[l]!==s[l]&&(n=!1),l++;if(n)return!0}}))}getRouteComponent(e){return!!this.routes&&this.routes.find((t=>{if(t.path==e)return!0;if(e.split("/").length==t.path.split("/").length){let s=e.split("/"),i=t.path.split("/"),n=!0,l=0;for(;l<s.length&&n;)":"!==i[l].substring(0,1)&&i[l]!==s[l]&&(n=!1),l++;if(n)return!0}}))?.component}checkTagging(e){try{return!!this.moduleDefs[e].tagging}catch(e){return!1}}loadLibs(...e){let t=[];e.forEach((e=>{t.push(this.loadLib(e))}));let s=new l.x,i=0;for(let e of t)e.subscribe((e=>{i++}),(e=>{i++,console.error(e),s.error(e)}),(()=>{i==t.length&&(s.next(),s.complete())}));return i==t.length?(0,r.of)(s):s.asObservable()}isLibLoaded(e){if(this.scripts[e]){for(let t of this.scripts[e])if(!t.loaded)return!1;return!0}return!1}getHtmlStylesheetCode(e){return e&&this.htmlStyleData&&this.htmlStyleData.stylesheets&&_.isObject(this.htmlStyleData.stylesheets[e])&&_.isString(this.htmlStyleData.stylesheets[e].csscode)?this.htmlStyleData.stylesheets[e].csscode:""}getHtmlFormats(e){return _.isObject(this.htmlStyleData.stylesheets[e])?(_.isArray(this.htmlStyleData.stylesheets[e].formats)||(this.htmlStyleData.stylesheets[e].formats=[]),this.htmlStyleData.stylesheets[e].stylesDecoded||this.htmlStylesToObjects(e),this.htmlStyleData.stylesheets[e].formats):(console.log("HTML Styling: Unknown style sheet with ID "+e+"."),[])}getHtmlStylesheetNames(){let e=[];for(let t in this.htmlStyleData.stylesheets)e.push({id:this.htmlStyleData.stylesheets[t].id,name:this.htmlStyleData.stylesheets[t].name});return _.sortBy(e,"name")}getHtmlStylesheetToUse(e,t){return _.isObject(this.htmlStyleData.stylesheetsToUse[e])&&this.htmlStyleData.stylesheetsToUse[e][t]?this.htmlStyleData.stylesheetsToUse[e][t]:""}getCountries(){return this.countries}handleMessage(e){switch(e.messagetype){case"loader.completed":"loadRepository"==e.messagedata&&this.addRoutes(),"loadModules"==e.messagedata&&(this.roles.some((e=>{if(1==e.defaultrole)return this.role=e.id,!0})),""===this.role&&this.roles.length>0&&(this.role=this.roles[0].id));break;case"metadata.updatefieldsets":for(let t in e.messagedata.add)this.fieldSets[t]=e.messagedata.add[t];for(let t in e.messagedata.update)this.fieldSets[t]=e.messagedata.update[t];for(let t in e.messagedata.delete)delete this.fieldSets[t];break;case"metadata.updatecomponentsets":for(let t in e.messagedata.add)this.componentSets[t]=e.messagedata.add[t];for(let t in e.messagedata.update)this.componentSets[t]=e.messagedata.update[t];for(let t in e.messagedata.delete)delete this.componentSets[t]}}loadLib(e){let t=new l.x;if(!this.scripts[e])return(0,r.of)({script:e,loaded:!1,status:"Unknown"});if(this.isLibLoaded(e))return(0,r.of)({script:e,loaded:!0,status:"Already Loaded"});if(this.isLibLoading(e)){for(let s of this.scripts[e])if(s.loading)return s.loading$.subscribe((s=>this.loadLib(e).subscribe((e=>{t.next(e),t.complete()})))),t.asObservable()}else{for(let s of this.scripts[e])if(!s.loaded)return this.loadScript(s).subscribe((s=>{this.loadLib(e).subscribe((e=>{t.next(e),t.complete()}))})),t.asObservable();t.next({script:e,loaded:!0,status:"Loaded"}),t.complete()}return t.asObservable()}loadScript(e){let t=new l.x;e.loading=!0,e.loading$=new c.vpe;let s={};return e.src.endsWith(".css")?(s=document.createElement("link"),s.rel="stylesheet",s.href=e.src):(s=document.createElement("script"),s.type="text/javascript",s.src=e.src),s.readyState?s.onreadystatechange=()=>{"loaded"!==s.readyState&&"complete"!==s.readyState||(s.onreadystatechange=null,e.loaded=!0,e.loading=!1,t.next({script:e.src,loaded:!0,status:"Loaded"}),t.complete(),e.loading$.emit("loaded"))}:s.onload=()=>{e.loaded=!0,e.loading=!1,t.next({script:e.src,loaded:!0,status:"Loaded"}),t.complete(),e.loading$.emit("loaded")},s.onerror=s=>{e.loading=!1,t.error({script:e.src,loaded:!1,status:"Failed"}),e.loading$.emit("failed")},document.getElementsByTagName("head")[0].appendChild(s),t.asObservable()}isLibLoading(e){if(this.scripts[e]){for(let t of this.scripts[e])if(t.loading)return!0;return!1}return!1}htmlStylesToObjects(e){for(let t of this.htmlStyleData.stylesheets[e].formats){let e;if(_.isEmpty(t.styles))t.styles=null;else{try{e=JSON.parse(t.styles)}catch(s){console.log("HTML Styling: Malformed style specification in table sysuihtmlformats (format id: "+t.id+")."),e={}}t.styles=e}}this.htmlStyleData.stylesheets[e].stylesDecoded=!0}static ɵfac=function(e){return new(e||metadata)(c.LFG(p.eN),c.LFG(f.n),c.LFG(b.C),c.LFG(v.F0),c.LFG(y.f),c.LFG(c.zs3))};static ɵprov=c.Yz7({token:metadata,factory:metadata.ɵfac,providedIn:"root"})}return metadata})(),w=(()=>{class aclCheck{metadata;router;session;configurationService;constructor(e,t,s,i){this.metadata=e,this.router=t,this.session=s,this.configurationService=i}canActivate(e,t){if(!this.session||!this.session.authData.sessionId)return!1;let s=this.configurationService.getSystemParamater("aclcontroller");return!(s&&"spiceacl"!=s&&!("Users"!==e.params.module||e.params.id&&e.params.id==this.session.authData.userId||this.session.authData.admin))&&(!(e.params.module&&"Home"!=e.params.module&&!this.metadata.checkModuleAcl(e.params.module,e.data.aclaction))||(this.router.navigate(["/modules/Home"]),!1))}static ɵfac=function(e){return new(e||aclCheck)(c.LFG(x),c.LFG(v.F0),c.LFG(f.n),c.LFG(b.C))};static ɵprov=c.Yz7({token:aclCheck,factory:aclCheck.ɵfac,providedIn:"root"})}return aclCheck})()},44044:(e,t,s)=>{"use strict";s.d(t,{o:()=>c});var i=s(62242),n=s(77579),l=s(39646),o=s(4154),a=s(83917),d=s(13278),r=s(55329);let c=(()=>{class modal{metadata;footer;toast;language;modalsArray=[];modalsObject={};constructor(e,t,s,i){this.metadata=e,this.footer=t,this.toast=s,this.language=i,window.addEventListener("keyup",(e=>{if(27===e.keyCode&&this.modalsArray.length){e.stopImmediatePropagation();let t=this.modalsArray[this.modalsArray.length-1].wrapper;!t.instance.escKey||t.instance.childComponent.instance.onModalEscX&&!1===t.instance.childComponent.instance.onModalEscX()||t.destroy()}}))}openModal(e,t=!0,s,i){if(this.metadata.checkComponent(e)){let l=new n.x;return this.metadata.addComponentDirect("SystemModalWrapper",this.footer.modalcontainer).subscribe((n=>{let o={};o.wrapper=n,o.blurBackdrop=i,n.instance.escKey=t,this.modalsArray.push(o),this.modalsObject[o.modalId]=o,this.metadata.addComponentDirect(e,n.instance.target,s).subscribe((e=>{e.instance.self=n,o.component=e,n.instance.childComponent=e,l.next(e),l.complete()}),(t=>{this.removeModal(n),this.sendError(e),l.error(t),l.complete()})),n.instance.zIndex=2*this.modalsArray.length+1})),l.asObservable()}return this.sendError(e),(0,l.of)(!1)}sendError(e){this.toast.sendToast('Component "'+e+'" not found.',"error","Misconfiguration on the system as the component should have been opened in a modal but is not avilable. Please contact your system administrator.")}removeModal(e){for(let t=0;t<this.modalsArray.length;t++)if(this.modalsArray[t].wrapper===e){this.modalsArray.splice(t,1);break}}closeModal(e){if("number"==typeof e)this.modalsArray[e]&&this.modalsArray[e].wrapper.destroy();else for(let t=0;t<this.modalsArray.length;t++)if(this.modalsArray[t].wrapper===e){this.modalsArray.splice(t,1);break}}closeAllModals(){for(let e=this.modalsArray.length-1;e>=0;e--)this.modalsArray[e].wrapper.destroy()}get backdropVisible(){return 0!==this.modalsArray.length}get backdropZindex(){return 2*this.modalsArray.length}get backdropBlurred(){return this.modalsArray.length>0&&!0===this.modalsArray[this.modalsArray.length-1].blurBackdrop?"blur(4px)":"none"}prompt(e,t,s=null,i="shade",l=null,o=null,a="select",d){let r=new n.x;return this.openModal("SystemPrompt").subscribe((n=>{n.instance.type=e,n.instance.text=t,n.instance.headertext=s,n.instance.theme=i,n.instance.value=l,n.instance.options=o,n.instance.regex=d,n.instance.optionsAs=!0===a?"radio":a,n.instance.answer.subscribe((e=>{r.next(e),r.complete()}))})),r.asObservable()}confirm(e,t=null,s=null){return this.prompt("confirm",e,t,s)}confirmDeleteRecord(){return this.prompt("confirm",this.language.getLabel("LBL_DELETE_RECORD","","long"),this.language.getLabel("LBL_DELETE_RECORD"))}input(e,t=null,s=null,i=null){return this.prompt("input",e,t,s,i)}info(e,t=null,s=null){return this.prompt("info",e,t,s)}await(e=null){let t=new i.vpe;return this.openModal("SystemLoadingModal",!1).subscribe((s=>{s.instance.messagelabel=e,t.subscribe((()=>{s.instance.self.destroy()}))})),t}static ɵfac=function(e){return new(e||modal)(i.LFG(o.Pu),i.LFG(a.M),i.LFG(d.A),i.LFG(r.d))};static ɵprov=i.Yz7({token:modal,factory:modal.ɵfac,providedIn:"root"})}return modal})()},58032:(e,t,s)=>{"use strict";s.d(t,{S:()=>n});var i=s(62242);let n=(()=>{class modalwindow{self;static ɵfac=function(e){return new(e||modalwindow)};static ɵprov=i.Yz7({token:modalwindow,factory:modalwindow.ɵfac})}return modalwindow})()},55710:(e,t,s)=>{"use strict";s.d(t,{o:()=>k});var i=s(62242),n=s(61135),l=s(50727),o=s(77579),a=s(39646),d=s(29266),r=s(39300),c=s(54004),u=s(14505),m=s(33369),g=s(4154),h=s(75920),p=s(10382),f=s(83348),b=s(13278),v=s(55329),y=s(44044),x=s(82032),w=s(26625),Z=s(12222),T=s(62422),C=s(66550);let k=(()=>{class model{backend;broadcast;metadata;utils;session;recent;router;toast;language;modal;navigation;configuration;injector;socket;userpreferences;sanitizer;httpRequestsRefID=_.uniqueId("model_http_ref_");_module="";_id="";acl={};acl_fieldcontrol={};data={};backupData={};data$;field$=new n.X({field:null,value:null});isSaving=!1;saved$=new i.vpe;mode$=new i.vpe;canceledit$=new i.vpe;isValid=!1;isLoading=!1;isEditing=!1;isGlobal=!1;isNew=!1;_fields_stati=[];_fields_stati_tmp=[];_model_stati_tmp=[];_messages=[];reference="";_fields=[];messageChange$=new i.vpe;duplicate=!1;templateId=null;duplicateChecking=!1;duplicates=[];parentmodel;duplicatecount=0;modelRegisterId;savingProgress=new n.X(1);subscriptions=new l.w0;loadingError=!1;validated$=new i.vpe;constructor(e,t,s,i,l,o,a,d,r,c,u,m,g,h,p,f){this.backend=e,this.broadcast=t,this.metadata=s,this.utils=i,this.session=l,this.recent=o,this.router=a,this.toast=d,this.language=r,this.modal=c,this.navigation=u,this.configuration=m,this.injector=g,this.socket=h,this.userpreferences=p,this.sanitizer=f,this.data$=new n.X(this.data),this.subscriptions.add(this.broadcast.message$.subscribe((e=>{"timezone.changed"===e.messagetype&&(this.utils.timezoneChanged(this.data,e.messagedata),this.utils.timezoneChanged(this.backupData,e.messagedata))})))}registerModel(){this.module&&this._id&&!this.navigation.modelregister.find((e=>e.model._id==this._id&&e.model.module==this.module))&&(this.modelRegisterId=this.navigation.registerModel(this))}get messages(){return this._messages}get module(){return this._module}set module(e){this._module=e,this.initializeFieldsStati(),this.registerModel()}get backendData(){return this.utils.spiceModel2backend(this.module,this.data)}get id(){return this._id}set id(e){this._id=e,this.registerModel()}get displayname(){return this.getFieldValue("summary_text")}get fields(){return this.module&&_.isEmpty(this._fields)&&(this._fields=this.metadata.getModuleFields(this.module)),this._fields}generateGuid(){return this.utils.generateGuid()}isFieldRequired(e){switch(e){case"date_entered":case"date_modified":return!0;default:return this.metadata.getFieldRequired(this.module,e)}}isRequired(e){return this.isFieldRequired(e)}checkAccess(e){return"detail"==e||"view"==e?this.acl.detail||this.acl.view:this.acl[e]}checkFieldAccess(e){return!(this.acl_fieldcontrol&&this.acl_fieldcontrol[e]&&"1"==this.acl_fieldcontrol[e])}getFieldAccess(e){return this.acl_fieldcontrol&&this.acl_fieldcontrol[e]?parseInt(this.acl_fieldcontrol[e],10):void 0}goDetail(e){if(!this.checkAccess("detail"))return!1;{let t="/module/"+this.module+"/"+this.id;e&&(t="/tab/"+e+"/"+t),this.router.navigate([t])}}goModule(){this.router.navigate(["/module/"+this.module])}getData(e=!0,t="",s=!0,i=!1){let n=new o.x;return e&&this.resetData(),this.isLoading=s,this.backend.get(this.module,this.id,t,this.httpRequestsRefID).subscribe({next:e=>{this.isLoading=!1,this.data=e,this.acl=e.acl,this.acl_fieldcontrol=e.acl_fieldcontrol,""!=t&&this.recent.trackItem(this.module,this.id,this.data),this.initializeFieldsStati(),this.evaluateValidationRules(null,"initialize"),this.emitFieldsChanges(e),this.data$.next(e),this.broadcast.broadcastMessage("model.loaded",{id:this.id,module:this.module,data:this.data}),n.next(e),n.complete()},error:e=>{i&&401!=e.status&&(this.toast.sendToast(this.language.getLabel("LBL_ERROR_LOADING_RECORD"),"error"),this.router.navigate(["/module/"+this.module])),401==e.status&&(this.loadingError=!0),n.error(e)}}),n.asObservable()}validate(e){this.resetMessages(),this.isValid=!0,this.evaluateValidationRules(null,"change");for(let e in this.fields)"id"!==e&&this.getFieldStati(e).required&&(!this.data[e]&&0!==this.data[e]||0===String(this.data[e]).length)&&(this.isValid=!1,this.addMessage("error",this.language.getLabel("MSG_INPUT_REQUIRED")+"!",e)),this.getFieldStati(e).invalid&&(this.isValid=!1);return this.isValid,this.validated$.next(),this.isValid}initializeFieldsStati(){let e=[];for(let t in this.fields)e[t]=this.evaluateFieldStati(t);this._fields_stati=e}getDefaultStati(){return{editable:this.checkAccess("edit"),invalid:!1,required:!1,incomplete:!1,disabled:!1,hidden:!1,readonly:!1}}evaluateFieldStati(e){let t=this.getDefaultStati();return this.acl_fieldcontrol&&this.acl_fieldcontrol[e]&&parseInt(this.acl_fieldcontrol[e],10)<3&&(t.editable=!1),this.isRequired(e)&&(t.required=!0),t}resetFieldStati(e){this._fields_stati[e]=this.evaluateFieldStati(e),this._fields_stati_tmp[e]={...this._fields_stati[e]},this.getFieldMessages(e,"error")&&(this._fields_stati_tmp[e].invalid=!0)}setFieldStatus(e,t,s=!0){try{let i=this._fields_stati[e];return i[t]&&!s?(console.warn("could not set status "+t+" to "+s+" because it has to be: "+i[t]),!1):(this._fields_stati_tmp[e]||(this._fields_stati_tmp[e]={...i}),this._fields_stati_tmp[e][t]=s,!0)}catch(e){return console.warn(e),!1}}setFieldStati(e,t){for(let s in t){if(!this.setFieldStatus(e,s,t[s]))return!1}return!0}getFieldStati(e){let t=this._fields_stati_tmp[e];return t||(t=this._fields_stati[e],t||(t=this.getDefaultStati(),this._fields_stati[e]=t)),t={...t},!t.invalid&&this.getFieldMessages(e,"error")&&(t.invalid=!0),t}evaluateValidationRules(e,t){let s=this.metadata.getModuleValidations(this.module);if(!s)return!0;this._fields_stati_tmp=[],this._model_stati_tmp=[],this.resetMessages();for(let e of s){if(!e.active)continue;let s=0,i=!0;if(e.onevents instanceof Array||(e.onevents=e.onevents.split(",")),!(e.onevents instanceof Array)||e.onevents.includes(t)){if(e.conditions instanceof Array)for(let t of e.conditions){let n=!1;if(n=this.evaluateCondition(t),s+=n?1:0,s>0&&"or"==e.logicoperator){i=!0;break}}if(e.conditions&&e.conditions.length>1&&"and"==e.logicoperator?s<e.conditions.length&&(i=!1):0==s&&e.conditions&&(i=!1),i)for(let t of e.actions){this.executeValidationAction(t)||console.warn("Action "+t.action+" for "+t.fieldname+" failed!")}}}}evaluateCondition(e){let t=!1;if("empty"!=e.comparator&&null==typeof this.data[e.fieldname])return!1;let s,i=this.data[e.fieldname];return s=e.comparator.match(/regex/g)?e.valuations:this.evaluateValidationParams(e.valuations),t=d.A.compare(i,e.comparator,s),t}executeValidationAction(e){let t=this.evaluateValidationParams(e.params);switch(e.action){case"set_value":return this.data[e.fieldname]=t,!0;case"set_value_from_field":return this.data[e.fieldname]=this.data[t],!0;case"set_value_from_user":return this.session.authData.user[t]?this.data[e.fieldname]=this.session.authData.user[t]:this.userpreferences.toUse[t]&&(this.data[e.fieldname]=this.userpreferences.toUse[t]),!0;case"set_message":return t instanceof Object&&(this._messages.push(t),this.messageChange$.emit(!0),!0);case"error":return this.addMessage("error",t,e.fieldname);case"warning":return this.addMessage("warning",t,e.fieldname);case"notice":return this.addMessage("notice",t,e.fieldname);case"hide":return t="string"==typeof t?d.A.strtobool(t):t,this.setFieldStatus(e.fieldname,"hidden",t);case"show":return t=!("string"==typeof t?d.A.strtobool(t):t),this.setFieldStatus(e.fieldname,"hidden",t);case"require":return t="string"==typeof t?d.A.strtobool(t):t,this.setFieldStatus(e.fieldname,"required",t);case"set_stati":return t="string"==typeof t?JSON.parse(t):t,this.setFieldStati(e.fieldname,t);case"set_model_state":if(t instanceof Array)for(let e of t)this.checkModelState(e)||this._model_stati_tmp.push(e);else this.checkModelState(t)||this._model_stati_tmp.push(t);return!0;default:return console.warn("action: "+e.action+" is not defined!"),!1}}evaluateValidationParams(e){if("string"==typeof e){if(/(\<[a-z\_]+\>)/.test(e))for(let t of e.match(/(\<[a-z\_]+\>)/g)){let s=t.replace("<","").replace(">",""),i=this.data[s]?this.data[s]:0;switch(this.metadata.getFieldDefs(this.module,s).type){case"datetimecombo":case"datetime":case"date":i&&(i=i.format("YYYY-MM-DD HH:mm:ss"))}e=e.replace(t,i)}if(/\d+[\.\-]\d+[\.\-]\d+/.test(e)&&/[\+\-]/.test(e)){let t=d.A.strtomoment(e);e=t||e}else if(/\d+\s*[\+\-\*\/\^]\s*\d+/.test(e)){let t=this.utils.compileMathExpression(e);e=t||e}}return e}checkModelState(e){return this._model_stati_tmp.includes(e)}startEdit(e=!0,t=!1){this.isEditing||(e&&!this.duplicate&&(this.backupData=this.buildBackup(this.data)),t||(this.isEditing=!0,this.mode$.emit("edit")),this.navigation.addModelEditing(this.id,this.module,this,this.getFieldValue("summary_text")))}getFieldValue(e){return this.data[e]}getField(e){return this.getFieldValue(e)}setFieldValue(e,t){return this.setField(e,t)}initializeField(e,t){if(!e)return!1;this.data[e]=t}setField(e,t,s=!1){if(!e)return!1;const i=this.data[e];this.data[e]=t,this.evaluateValidationRules(e,"change"),i===t||s||this.field$.next({field:e,value:t}),s||this.data$.next(this.data),this.duplicateCheckOnChange([e])}observeFieldChanges(e){return this.fields[e]?this.field$.pipe((0,r.h)((t=>t.field==e)),(0,c.U)((e=>e.value))):(0,a.of)(null)}setFields(e,t=!1){let s=[];for(let t in e){if(!e.hasOwnProperty(t))continue;let i=e[t];_.isString(i)&&(i=i.trim()),this.data[t]!=i&&this.field$.next({field:t,value:i}),this.data[t]=i,s.push(t)}!0!==t&&this.data$.next(this.data),this.evaluateValidationRules(null,"change"),this.duplicateCheckOnChange(s)}emitFieldsChanges(e){for(let t in e)e.hasOwnProperty(t)&&this.field$.next({field:t,value:e[t]})}cancelEdit(){this.isEditing=!1,this.navigation.removeModelEditing(this.module,this.id),this.backupData&&(this.data=this.backupData,this.data$.next(this.data),this.backupData=null,this.resetMessages()),this.mode$.emit("display"),this.canceledit$.emit(!0)}endEdit(){this.backupData=null,this.isEditing=!1,this.mode$.emit("display"),this.navigation.removeModelEditing(this.module,this.id)}getDirtyFields(){let e={};for(let t in this.data)!t||this.backupData&&_.isEqual(this.data[t],this.backupData[t])||(e[t]=this.data[t]);return e}save(e=!1){let t,s=new o.x;this.isSaving=!0;for(let e in this.data)_.isString(this.data[e])&&(this.data[e]=this.data[e].trim());return!this.isEditing&&_.isEmpty(this.backupData)||this.isNew?t=this.data:(t=this.getDirtyFields(),t.date_modified=this.data.date_modified),this.backend.save(this.module,this.id,t,this.savingProgress,this.templateId,this.httpRequestsRefID).subscribe({next:t=>{this.data=t,this.isNew=!1,this.data$.next(t),this.broadcast.broadcastMessage("model.save",{id:this.id,reference:this.reference,module:this.module,data:this.data,changed:this.getDirtyFields(),backupdata:this.backupData}),this.isSaving=!1,e&&this.toast.sendToast(this.language.getLabel("LBL_DATA_SAVED")+".","success"),this.saved$.emit({changed:this.getDirtyFields(),backupdata:this.backupData}),this.endEdit(),this.initializeFieldsStati(),s.next(!0),s.complete()},error:t=>{if(409===t.status)this.modal.openModal("ObjectOptimisticLockingModal",!1,this.injector).subscribe((e=>{e.instance.conflicts=t.error.error.conflicts,e.instance.responseSubject=s}));else e&&this.toast.sendToast(this.language.getLabel("LBL_ERROR")+" "+t.status,"error",t.error.error.lbl?this.language.getLabel(t.error.error.lbl):t.error.error.message),s.error(t),s.complete();this.isSaving=!1}}),s.asObservable()}delete(){let e=new o.x;return this.backend.deleteRequest(`module/${this.module}/${this.id}`,null,this.httpRequestsRefID).subscribe({next:()=>{this.broadcast.broadcastMessage("model.delete",{id:this.id,module:this.module,data:_.clone(this.data)}),e.next(!0),e.complete()},error:()=>{e.error("unable to delete record")}}),e.asObservable()}saveAndSend(e=!1,t="LBL_DATA_SENT"){let s=e,i=this.save(!1);return s&&this.toast.sendToast(this.language.getLabel(t)+".","success"),i}reset(){this.id=null,this.module=null,this._fields_stati_tmp=this._fields_stati=[],this._fields=[],this.isLoading=!1,this.isEditing=!1,this.mode$.emit("display"),this.resetMessages(),this.resetData()}clone(){return{module:this.module,id:this.id,data:{...this.data}}}getAuditLog(e={}){let t=new o.x;return this.backend.getRequest(`module/${this.module}/${this.id}/auditlog`,e,this.httpRequestsRefID).subscribe({next:e=>{t.next(e),t.complete()},error:e=>{t.next(e),t.complete()}}),t.asObservable()}resetData(){this.isValid=!0,this.data={}}initialize(e=null){return this.initializeModel(e)}initializeModel(e=null){this.id||(this.id=this.generateGuid(),this.isNew=!0),this.duplicates=[],this.data={};let t=this.metadata.getModuleFields(this.module);t.assigned_user_id&&(this.data.assigned_user_id=this.session.authData.userId,this.data.assigned_user_name=this.session.authData.userName,this.data.assigned_user=this.session.authData.user),t.assigned_orgunit_id&&this.session.authData.user.orgunit&&(this.data.assigned_orgunit_id=this.session.authData.user.orgunit.id,this.data.assigned_orgunit_name=this.session.authData.user.orgunit.name,this.data.assigned_orgunit=this.session.authData.user.orgunit),this.data.modified_by_id=this.session.authData.userId,this.data.modified_by_name=this.session.authData.userName,this.data.modified_by_user=this.session.authData.user,this.data.created_by_id=this.session.authData.userId,this.data.created_by_name=this.session.authData.userName,this.data.created_by_user=this.session.authData.user,this.data.date_entered=new moment,this.data.date_modified=new moment,this.executeCopyRules(e),this.setFieldsDefaultValues(),this.evaluateValidationRules(null,"initialize"),this.acl={create:!0,edit:!0,detail:!0},this.acl_fieldcontrol=this.metadata.moduleDefs[this.module]?.acl_fieldcontrol??[],this.initializeFieldsStati(),this.evaluateValidationRules(null,"initialize"),this.parentmodel=e}setData(e,t=!0,s){e.acl&&(this.acl=e.acl),e.acl_fieldcontrol&&(this.acl_fieldcontrol=e.acl_fieldcontrol,delete e.acl_fieldcontrol),this.data=t?this.utils.backendModel2spice(this.module,e):e,!0!==s&&this.data$.next(this.data),this.initializeFieldsStati()}addModel(e="",t=null,s={},i=!1,n){let l=new o.x;if(this.metadata.checkModuleAcl(this.module,"create")){this.initializeModel(t),this.reference=e;for(let e in s)this.data[e]=s[e];this.evaluateValidationRules(null,"initialize"),this.modal.openModal("ObjectEditModal",!1,this.injector).subscribe((e=>{e&&(e.instance.model.isNew=!0,e.instance.reference=this.reference,e.instance.preventGoingToRecord=i,n&&(e.instance.componentconfig=n),e.instance.action$.subscribe((e=>{"save"!=e&&"savegodetail"!=e||(l.next(this.data),this.recent.trackItem(this.module,this.id,this.data)),l.complete()})))}))}else this.toast.sendToast(this.language.getLabel("MSG_NOT_AUTHORIZED_TO_CREATE")+" "+this.language.getModuleName(this.module),"error"),window.setTimeout((()=>{l.complete()}),100);return l.asObservable()}executeCopyRules(e){if(this.copyParentReferenceAddresses(e),this.executeCopyRulesGeneric(),e)if(_.isArray(e))for(let t of e)t.data&&this.executeCopyRulesParent(t);else e.data&&this.executeCopyRulesParent(e)}copyParentReferenceAddresses(e){if(!e)return;const t=this.configuration.getData("spice_address_references");Array.isArray(t)&&t.forEach((t=>{t.child_module==this.module&&e.module==t.parent_module&&this.copyReferencedAddress(t,e.data)}))}copyReferencedAddress(e,t){const s={};["address_street","address_street_number","address_street_number_suffix","address_attn","address_city","address_district","address_postalcode","address_state","address_country","address_latitude","address_longitude"].forEach((i=>s[`${e.child_address_key}_${i}`]=t[`${e.parent_address_key}_${i}`])),s[e.child_address_key+"_address_reference_id"]=t.id,this.setFields(s)}setFieldsDefaultValues(){const e=this.metadata.getModuleFields(this.module);e&&_.each(e,(e=>{"default"in e&&null==this.data[e.name]&&"link"!=e.type&&"non-db"!=e.source&&this.setFixedValue(e.name,e.default)}))}executeCopyRulesGeneric(){let e=this.metadata.getCopyRules("*",this.module);for(let t of e)t.tofield&&t.fixedvalue?this.setFixedValue(t.tofield,t.fixedvalue):t.tofield&&t.calculatedvalue&&this.setField(t.tofield,this.getCalculatedValue(t))}executeCopyRulesParent(e){e.data.id||(e.data.id=e.id);let t=this.metadata.getCopyRules(e.module,this.module);for(let s of t)s.tofield&&(s.fromfield?this.copyValue(s.tofield,e.data[s.fromfield],s.params):s.fixedvalue&&this.setFixedValue(s.tofield,s.fixedvalue),s.calculatedvalue&&this.setField(s.tofield,this.getCalculatedValue(s,e.data[s.fromfield])))}copyValue(e,t,s={}){let i=this.metadata.getFieldDefs(this.module,e);if(i)switch(i.type){case"json":this.setField(e,JSON.parse(JSON.stringify(t)));break;case"link":if(_.isObject(t)&&t.beans){const i={beans:{}};for(let n in t.beans){if(!t.beans.hasOwnProperty(n))continue;let l=n;s?.generatenewid&&(l=this.utils.generateGuid()),i.beans[l]={...t.beans[n]},i.beans[l].id=l,this.setField(e,i)}}break;default:this.setField(e,t)}else this.setField(e,t)}setFixedValue(e,t){let s=this.metadata.getFieldDefs(this.module,e);if((!s||s&&!s.type)&&this.setField(e,t),s&&s.type)if("bool"===s.type)this.setField(e,"true"===t||"1"===t||"false"!==t&&"0"!==t&&null);else"(NULL)"==t&&(t=null),this.setField(e,t)}getCalculatedValue(e,t){let s=this.session.getSessionData("timezone",!1)||moment.tz.guess(!0);switch(e.calculatedvalue){case"now":return(new moment.utc).tz(s);case"nextfullhour":let i=(new moment.utc).tz(s);return 0!=i.minute()&&(i.minute(0),i.add(1,"h")),e.params?.number&&e.params?.unit&&i.add(e.params.number,e.params.unit),i;case"addDate":const n=moment.isMoment(t)?new moment(t):(new moment.utc).tz(s);return e.params?.number&&e.params?.unit?n.add(e.params.number,e.params.unit):n;case"nl2br":return t.replace(/\r\n/g,"<br>").replace(/\n\n/g,"<br>").replace(/\n/g,"<br>")}return""}edit(e=!1,t=""){if(!this.checkAccess("edit"))return(0,a.of)(!1);let s=new o.x;return this.modal.openModal("ObjectEditModal",!1,this.injector).subscribe((i=>{i&&(t&&""!=t&&(i.instance.componentSet=t),e&&i.instance.model.getData(!1,"editview",!1),i.instance.actionSubject.subscribe((e=>{s.next(e),s.complete()})))})),s.asObservable()}duplicateCheckOnChange(e,t=!1){if(this.isNew&&this.metadata.getModuleDuplicatecheckOnChange(this.module)){let s=this.metadata.getModuleDuplicateCheckFields(this.module);if(0==s.length)return;let i=!1,n=!1;for(let t of s)n||(n=e.indexOf(t)>=0),i||(i=this.getField(t));if(i&&n||t){let e=new o.x;return this.duplicateCheck(!0).subscribe({next:t=>{this.duplicates=t.records,this.duplicatecount=t.count,e.next(!0),e.complete()},error:()=>{e.next(!1),e.complete()}}),e.asObservable()}n&&!i&&(this.duplicates=[])}return(0,a.of)(!1)}duplicateCheck(e=!1){if(this.metadata.getModuleDuplicatecheck(this.module)){this.duplicateChecking=!0;let t=new o.x;if(e){let e=this.data;e.id=this.id,this.backend.checkDuplicates(this.module,e,this.httpRequestsRefID).subscribe({next:e=>{t.next(e),t.complete(),this.duplicateChecking=!1},error:()=>{t.next([]),t.complete(),this.duplicateChecking=!1}})}else this.backend.getDuplicates(this.module,this.id,this.httpRequestsRefID).subscribe({next:e=>{t.next(e),t.complete(),this.duplicateChecking=!1},error:()=>{t.next([]),t.complete(),this.duplicateChecking=!1}});return t.asObservable()}return(0,a.of)([])}addMessage(e,t,s=null,i="validation"){return this._messages.push({type:e,message:t,reference:s,source:i}),"error"==e&&s&&this.setFieldStatus(s,"invalid",!0),this.messageChange$.emit(!0),!0}getMessages(){return this.messages}setFieldMessage(e,t,s,i){return this.resetFieldMessages(s,e,i),"error"==e&&this.setFieldStatus(s,"invalid",!0),this.addMessage(e,t,s,i)}getFieldMessages(e,t){let s=this._messages.filter((s=>s.reference==e&&(!t||s.type==t)));return s.length>0&&s}resetFieldMessages(e,t,s){if(0==this._messages.length)return!0;for(let i=this._messages.length-1;i>=0;i--){let n=this._messages[i];n.reference!=e||t&&n.type!=t||s&&n.source!=s||(this._messages.splice(i,1),this.messageChange$.emit(!0))}return this.resetFieldStati(e),!0}public;resetMessages(e,t="validation"){if(0==this._messages.length)return!0;for(let s=this._messages.length-1;s>=0;s--){let i=this._messages[s];e&&i.type!=e||t&&i.source!=t||(this._messages.splice(s,1),this.messageChange$.emit(!0)),this.resetFieldStati(i.reference)}return!0}isFieldARelationLink(e){try{return"link"==this.fields[e].type}catch(e){return!1}}getRelatedRecords(e){let t=[];if(!this.isFieldARelationLink(e))return t;if(!this.data[e])return t;for(let s in this.data[e].beans)t.push(this.data[e].beans[s]);return t}setRelatedRecords(e,t=null){return!!this.isFieldARelationLink(e)&&(this.data[e]={beans:{}},t?this.addRelatedRecords(e,t):void this.field$.next({field:e,value:this.getRelatedRecords(e)}))}addRelatedRecords(e,t,s=!0){if(!this.isFieldARelationLink(e))return!1;this.data[e]||(this.data[e]={beans:{}});for(let i of t)!s&&this.data[e].beans[i.id]||(this.data[e].beans[i.id]=i);return this.field$.next({field:e,value:this.getRelatedRecords(e)}),!0}removeRelatedRecords(e,t){if(!this.isFieldARelationLink(e))return!1;this.data[e]||(this.data[e]={beans:[]}),this.data[e].beans_relations_to_delete||(this.data[e].beans_relations_to_delete={});for(let s of t)for(let t in this.data[e].beans)s==t&&(delete this.data[e].beans[t],this.data[e].beans_relations_to_delete[t]=s);return!0}rollbackRemovedRelatedRecords(e,t){return!(!this.isFieldARelationLink(e)||!this.data[e].beans_relations_to_delete)&&(t.forEach((t=>{delete this.data[e].beans_relations_to_delete[t]})),!0)}ngOnDestroy(){this.isEditing&&this.navigation.removeModelEditing(this.module,this.id),this.modelRegisterId&&this.navigation.unregisterModel(this.modelRegisterId),this.subscriptions.unsubscribe(),this.backend.cancelPendingRequests([this.httpRequestsRefID])}isDirty(){return this.isEditing&&_.values(this.getDirtyFields()).length}checkModuleFilterMatch(e){let t=this.configuration.getData("modulefilters");if(!t[e]||!t[e].filterdefs)return!1;let s=t[e].filterdefs;return s="string"==typeof s?JSON.parse(s):s,!!t&&this.checkModuleFilterGroupMatch(s)}checkModuleFilterGroupMatch(e){if("own"==e.groupscope&&this.data.assigned_user_id!=this.session.authData.userId)return!1;let t=!1;return!(!e||!e.conditions)&&(e.conditions.forEach((s=>(t=s.conditions?this.checkModuleFilterGroupMatch(s):this.checkModuleFilterConditionMatch(s),!("AND"==e.logicaloperator&&!t)&&(!!t||void 0)))),t)}checkModuleFilterConditionMatch(e){switch(e.operator){case"empty":return""==this.getFieldValue(e.field)||null==this.getFieldValue(e.field);case"equals":return this.getFieldValue(e.field)==e.filtervalue;case"oneof":return(e.filtervalue instanceof Array?e.filtervalue:e.filtervalue.split(",")).indexOf(this.getFieldValue(e.field))>-1;case"true":return 1==this.getFieldValue(e.field);case"false":return 0==this.getFieldValue(e.field);case"starts":return 0==this.getFieldValue(e.field).indexOf(e.filtervalue);case"contains":return this.getFieldValue(e.field).includes(e.filtervalue);case"ncontains":return!this.getFieldValue(e.field).includes(e.filtervalue);case"greater":return this.getFieldValue(e.field)>e.filtervalue;case"gequal":return this.getFieldValue(e.field)>=e.filtervalue;case"less":return this.getFieldValue(e.field)<e.filtervalue;case"lequal":return this.getFieldValue(e.field)<=e.filtervalue;case"today":return moment(this.getFieldValue(e.field)).isSame(new moment,"days");case"past":return moment(this.getFieldValue(e.field)).isBefore(new moment);case"future":return moment(this.getFieldValue(e.field)).isAfter(new moment);case"thismonth":return moment(this.getFieldValue(e.field)).isSame(new moment,"month");case"nextmonth":return moment(this.getFieldValue(e.field)).isAfter(new moment,"month");case"thisyear":return moment(this.getFieldValue(e.field)).isSame(new moment,"year");case"nextyear":return moment(this.getFieldValue(e.field)).isAfter(new moment,"year");case"inndays":return moment(this.getFieldValue(e.field)).isSame((new moment).add(+e.filtervalue,"d"),"days");case"ndaysago":return moment(this.getFieldValue(e.field)).isSame((new moment).subtract(+e.filtervalue,"d"),"days");case"inlessthandays":return moment(this.getFieldValue(e.field)).isBefore((new moment).add(+e.filtervalue,"d"),"days");case"inmorethandays":return moment(this.getFieldValue(e.field)).isAfter((new moment).add(+e.filtervalue,"d"),"days")}}buildBackup(e){let t={};return _.each(e,((s,i)=>{_.isObject(s)?_.isArray(s)?t[i]=s.map((e=>this.buildBackup(e))):moment.isMoment(s)?t[i]=moment(s):t[i]=this.buildBackup(s):t[i]=e[i]})),t}generateFieldHtmlContentBlobUrl(e){return this.backend.getRequest(`module/${this.module}/${this.id}/${e}/html`).pipe((0,c.U)((e=>{const t=new Blob([e.html],{type:"text/html"});return this.sanitizer.bypassSecurityTrustResourceUrl(window.URL.createObjectURL(t))})))}static ɵfac=function(e){return new(e||model)(i.LFG(u.y),i.LFG(m.f),i.LFG(g.Pu),i.LFG(d.A),i.LFG(h.n),i.LFG(p.h),i.LFG(f.F0),i.LFG(b.A),i.LFG(v.d),i.LFG(y.o),i.LFG(x.G),i.LFG(w.C),i.LFG(i.zs3),i.LFG(Z.W),i.LFG(T.z),i.LFG(C.H7))};static ɵprov=i.Yz7({token:model,factory:model.ɵfac})}return model})()},50323:(e,t,s)=>{"use strict";s.d(t,{H:()=>h});var i=s(50727),n=s(61135),l=s(77579),o=s(62242),a=s(14505),d=s(26625),r=s(75920),c=s(13278),u=s(33369),m=s(55329),g=s(44044);let h=(()=>{class modelattachments{backend;configurationService;session;toast;broadcast;language;modal;httpRequestsRefID=window._.uniqueId("model_attachments_http_ref_");module;id;count=0;files=[];loading=!1;loaded=!1;loaded$;subscriptions=new i.w0;constructor(e,t,s,i,l,o,a){this.backend=e,this.configurationService=t,this.session=s,this.toast=i,this.broadcast=l,this.language=o,this.modal=a,this.loaded$=new n.X(!1)}getCount(e){let t=new l.x;return this.backend.getRequest(`common/spiceattachments/module/${this.module}/${this.id}/count`,{categoryId:e},this.httpRequestsRefID).subscribe({next:e=>{this.count=e.count,t.next(this.count),t.complete()},error:()=>{t.complete()}}),t.asObservable()}broadcastAttachmentCount(){this.broadcast.broadcastMessage("attachments.loaded",{module:this.module,id:this.id,attachmentcount:this.count,reload:!0}),this.subscriptions.add(this.broadcast.message$.subscribe((e=>{this.handleMessage(e)})))}getAttachments(e){let t=new l.x;return this.files=[],this.loading=!0,this.backend.getRequest(`common/spiceattachments/module/${this.module}/${this.id}`,{categoryId:e},this.httpRequestsRefID).subscribe({next:e=>{for(let t in e)this.files.find((e=>e.id==t))||(e[t].date=new moment(e[t].date),this.files.push(e[t]));this.count=this.files.length,this.broadcastAttachmentCount(),this.loading=!1,t.next(this.files),t.complete(),this.loaded=!0,this.loaded$.next(!0)},error:e=>{this.loading=!1,t.error(e),t.complete()}}),t.asObservable()}cloneAttachments(e,t){let s=new l.x;return this.backend.postRequest(`common/spiceattachments/module/${this.module}/${this.id}/clone/${e.module}/${e.id}`,{},{categoryId:t},this.httpRequestsRefID).subscribe({next:e=>{for(let t in e)this.files.find((e=>e.id==t))||(e[t].date=new moment(e[t].date),this.files.push(e[t]));this.count=this.files.length,this.broadcastAttachmentCount(),s.next(this.files),s.complete()},error:e=>{this.loading=!1,s.error(e),s.complete()}}),s.asObservable()}humanFileSize(e){let t=1024,s=e;if(Math.abs(e)<t)return s+" B";let i=["kB","MB","GB","TB","PB","EB","ZB","YB"],n=-1;do{s/=t,++n}while(Math.abs(s)>=t&&n<i.length-1);return s.toFixed(1)+" "+i[n]}uploadAttachmentsBase64(e,t){if(0===e.length)return;let s=new l.x,i=this.configurationService.getSystemParamater("upload_maxsize");for(let n of e){if(i&&n.size>i){this.toast.sendToast(this.language.getLabelFormatted("LBL_EXCEEDS_MAX_UPLOADFILESIZE",[n.name,this.humanFileSize(i)]),"error");continue}let e={date:new moment,file:"",file_mime_type:n.type?n.type:"application/octet-stream",filesize:n.size,filename:n.name,category_ids:t,filemd5:void 0,id:"",text:"",thumbnail:"",user_id:"1",user_name:"admin",uploadprogress:0};this.files.unshift(e),this.count++,this.broadcastAttachmentCount(),this.readFile(n).subscribe((()=>{this.uploadForUploadAttachmentsBase64(e,s,n)}))}return s.asObservable()}uploadAttachmentsBase64FromArray(e){if(0===e.length)return;let t=new l.x,s=this.configurationService.getSystemParamater("upload_maxsize");for(let i of e){if(s&&i.size>s){this.toast.sendToast(this.language.getLabelFormatted("LBL_EXCEEDS_MAX_UPLOADFILESIZE",[i.name,this.humanFileSize(s)]),"error");continue}let e={date:new moment,file:"",file_mime_type:i.type?i.type:"application/octet-stream",filesize:i.size,filename:i.name,filemd5:void 0,id:"",text:"",thumbnail:"",user_id:this.session.authData.userId,user_name:this.session.authData.userName,uploadprogress:0};this.files.unshift(e),this.count++,this.broadcastAttachmentCount(),this.uploadForUploadAttachmentsBase64(e,t,i)}return t.asObservable()}addFiles(e){if(0!==e.length)for(let t of e){let e={date:new moment,file:"",file_mime_type:t.type?t.type:"application/octet-stream",filesize:t.size,filename:t.name,filemd5:t.filemd5,id:"",text:"",thumbnail:t.thumbnail,user_id:this.session.authData.userId,user_name:this.session.authData.userName};this.files.unshift(e)}}uploadForUploadAttachmentsBase64(e,t,s){let i=new n.X(0);i.subscribe((t=>{e.uploadprogress=Math.floor(t)}));let l={file:s.filecontent,filename:s.name,filemimetype:s.type?s.type:"application/octet-stream",category_ids:e.category_ids},o="common/spiceattachments";this.module&&this.id&&(o+=`/module/${this.module}/${this.id}`),this.backend.postRequestWithProgress(o,null,l,i,this.httpRequestsRefID).subscribe((s=>{e.id=s[0].id,e.thumbnail=s[0].thumbnail,e.filemd5=s[0].filemd5,e.user_id=s[0].user_id,e.user_name=s[0].user_name,delete e.uploadprogress,t.next({files:s}),t.complete()}))}uploadFileBase64(e,t,s,i){let o=new l.x,a=this.configurationService.getSystemParamater("upload_maxsize");if(a&&atob(e).length>a)return void this.toast.sendToast(this.language.getLabelFormatted("LBL_EXCEEDS_MAX_UPLOADFILESIZE",[t,this.humanFileSize(a)]),"error");let d={date:new moment,file:"",file_mime_type:s||"application/octet-stream",filesize:atob(e).length,filename:t,filemd5:void 0,id:"",text:"",thumbnail:"",user_id:"1",user_name:"admin",category_ids:i,uploadprogress:0};this.files.unshift(d),this.count++,this.broadcastAttachmentCount();let r=new n.X(0);r.subscribe((e=>{d.uploadprogress=Math.floor(e)}));let c={file:e,filename:t,filemimetype:s||"application/octet-stream",category_ids:d.category_ids},u="common/spiceattachments";return this.module&&this.id&&(u+=`/module/${this.module}/${this.id}`),this.backend.postRequestWithProgress(u,null,c,r,this.httpRequestsRefID).subscribe((e=>{d.id=e[0].id,d.thumbnail=e[0].thumbnail,d.filemd5=e[0].filemd5,d.user_id=e[0].user_id,d.user_name=e[0].user_name,delete d.uploadprogress,o.next({files:e}),o.complete()})),o.asObservable()}readFile(e){let t=new l.x,s=new FileReader;return s.file=e,s.onloadend=e=>{let i=s.result.toString();i=i.substring(i.indexOf("base64,")+7);let n=s.file;n.filecontent=i,t.next(n),t.complete()},s.readAsDataURL(e),t.asObservable()}deleteAttachment(e){this.backend.deleteRequest(`common/spiceattachments/module/${this.module}/${this.id}/${e}`,null,this.httpRequestsRefID).subscribe((t=>{let s=this.files.findIndex((t=>t.id==e));this.files.splice(s,1),this.count--,this.broadcastAttachmentCount()}),(e=>{this.toast.sendToast("Cannot delete attachment.","error",e.error.error.message,!1)}))}downloadAttachment(e,t){this.backend.getRequest(`common/spiceattachments/module/${this.module}/${this.id}/${e}`,null,this.httpRequestsRefID).subscribe((e=>{let t=this.b64toBlob(e.file,e.file_mime_type),s=URL.createObjectURL(t),i=document.createElement("a");document.body.appendChild(i),i.href=s,i.download=e.filename,i.type=e.file_mime_type,i.click(),i.remove()}))}downloadAttachmentForField(e,t,s,i){this.backend.getRequest(`common/spiceattachments/module/${e}/${t}/byfield/${s}`,null,this.httpRequestsRefID).subscribe((e=>{let t=this.b64toBlob(e.file,e.file_mime_type),s=URL.createObjectURL(t),i=document.createElement("a");document.body.appendChild(i),i.href=s,i.download=e.filename,i.type=e.file_mime_type,i.click(),i.remove()}))}getAttachment(e){let t=new l.x;return this.backend.getRequest(`common/spiceattachments/module/${this.module}/${this.id}/${e}`,null,this.httpRequestsRefID).subscribe({next:e=>{t.next(e.file),t.complete()},error:e=>{t.error(e),t.complete()}}),t.asObservable()}b64toBlob(e,t="",s=512){let i=atob(e),n=[];for(let e=0;e<i.length;e+=s){let t=i.slice(e,e+s),l=new Array(t.length);for(let e=0;e<t.length;e++)l[e]=t.charCodeAt(e);let o=new Uint8Array(l);n.push(o)}return new Blob(n,{type:t})}openAttachment(e,t){this.backend.getRequest(`common/spiceattachments/module/${this.module}/${this.id}/${e}`,null,this.httpRequestsRefID).subscribe((e=>{let t=this.b64toBlob(e.file,e.file_mime_type),s=URL.createObjectURL(t);window.open(s,"_blank")}))}getAttachmentData(e){let t=new l.x;return this.backend.getRequest(`common/spiceattachments/module/${this.module}/${this.id}/${e}`,null,this.httpRequestsRefID).subscribe({next:e=>{t.next(e),t.complete()},error:e=>{t.error(e),t.complete()}}),t.asObservable()}ngOnDestroy(){this.backend.cancelPendingRequests([this.httpRequestsRefID])}handleMessage(e){if("attachments.uploaded"===e.messagetype)e.messagedata.reload&&(this.files=e.messagedata.uploadedFiles)}static ɵfac=function(e){return new(e||modelattachments)(o.LFG(a.y),o.LFG(d.C),o.LFG(r.n),o.LFG(c.A),o.LFG(u.f),o.LFG(m.d),o.LFG(g.o))};static ɵprov=o.Yz7({token:modelattachments,factory:modelattachments.ɵfac})}return modelattachments})()},42644:(e,t,s)=>{"use strict";s.d(t,{t:()=>f});var i=s(62242),n=s(50727),l=s(61135),o=s(77579),a=s(39646),d=s(33369),r=s(14505),c=s(4154),u=s(55329),m=s(62422),g=s(75920),h=s(26625),p=s(13278);let f=(()=>{class modellist{broadcast;backend;metadata;language;userpreferences;session;configuration;toast;httpRequestsRefID=_.uniqueId("model_list_http_ref_");module="";modulefilter;relatefilter;listDataChanged$=new i.vpe;filtercontextbeanid;listType$;listTypeComponent$=new i.vpe;listData={list:[],totalcount:0};offset=0;listSelected={type:"",items:[]};selectionChanged$=new i.vpe;sortArray=[];lastLoad=new moment;loadlimit=50;isLoading=!1;cancelPendingRequests=!0;searchTerm="";moduleAggregates=[];moduleAggregatesByFieldname={};searchAggregates;selectedAggregates=[];reloadTimeOut=void 0;changedAggregates={added:[],deleted:[]};searchGeo;buckets={};useCache=!0;standardLists=[];currentList;serviceSubscriptions=new n.w0;displayAggregates=!1;displayFilters=!1;_listfields=[];listfield$=new i.vpe;embeddedByComponent;disableAutoloadListAll=!1;constructor(e,t,s,i,n,o,a,d){this.broadcast=e,this.backend=t,this.metadata=s,this.language=i,this.userpreferences=n,this.session=o,this.configuration=a,this.toast=d,this.setDisableAutoloadListAll(),this.subscribeToBroadcast(),this.generateStandardLists(),this.listType$=new l.X(this.standardLists[0])}subscribeToBroadcast(){this.serviceSubscriptions.add(this.broadcast.message$.subscribe((e=>{this.handleMessage(e)})))}setDisableAutoloadListAll(){this.disableAutoloadListAll=!!this.configuration.getCapabilityConfig("module").disableAutoloadListAll}initialize(e,t){this.module=e,this.generateStandardLists(),this.embeddedByComponent=t,this.resetListData(),this.loadModuleAggregates();let s="all",i=this.userpreferences.getPreference(e);i?.lastListTypeId&&this.listTypeExists(i.lastListTypeId)&&(s=i.lastListTypeId),this.setListType(s,!1)}loadModuleAggregates(){this.moduleAggregates=[];for(let e of this.metadata.getModuleAggregates(this.module))this.moduleAggregates.push({...e});this.moduleAggregates.forEach((e=>this.moduleAggregatesByFieldname[e.fieldname]=e)),this.moduleAggregates.sort(((e,t)=>e.priority||t.priority?!e.priority||e.priority>t.priority?1:-1:0))}handleMessage(e){if(e.messagedata.module===this.module)switch(e.messagetype){case"model.delete":let t=this.listData.list.findIndex((t=>t.id==e.messagedata.id));if(t>=0){if(this.listData.list.splice(t,1),this.listData.totalcount--,this.bucketfield){let t=[];if(this.bucketamountfield)for(let s of this.bucketamountfield)t.push({fieldname:s.name,value:e.messagedata.data[s.name]});this.removeItemFromBucket(e.messagedata.data[this.bucketfield],t)}this.listDataChanged$.next(!0)}break;case"model.save":let s=this.listData.list.findIndex((t=>t.id==e.messagedata.id));if(s>=0){let t=this.listData.list[s].selected;if(this.listData.list[s]=e.messagedata.data,t&&(this.listData.list[s].selected=!0),this.bucketfield){if(e.messagedata.changed&&e.messagedata.changed[this.bucketfield]){let t=[];for(let s of this.bucketamountfield)t.push({fieldname:s.name,valuefrom:e.messagedata.backupdata[s.name],valueto:e.messagedata.data[s.name]});this.updateBuckets(e.messagedata.backupdata[this.bucketfield],e.messagedata.data[this.bucketfield],t)}else if(this.bucketamountfield){let t=this.buckets.bucketitems.find((t=>t.bucket==e.messagedata.data[this.bucketfield]));for(let s of this.bucketamountfield)e.messagedata.changed&&e.messagedata.changed[s.name]&&(t.values["_bucket_agg_"+s.name]+=e.messagedata.data[s.name]-e.messagedata.backupdata[s.name])}this.listDataChanged$.next(!0)}}else this.reLoadList()}}ngOnDestroy(){this.serviceSubscriptions.unsubscribe(),this.backend.cancelPendingRequests([this.httpRequestsRefID,this.httpRequestsRefID+"_get_list_data"])}setSortField(e,t,s=!0,i=!1){if(!e||this.isLoading)return;const n=i?"DESC":"ASC",l=i?"ASC":"DESC";let o=this.sortArray.findIndex((t=>t.sortfield==e));if(o>=0){let e=this.sortArray[o];e.sortdirection==n?e.sortdirection=l:this.sortArray.splice(o,1)}else this.sortArray.push({sortfield:e,sortdirection:t||n})}getSortField(e){let t=this.sortArray.findIndex((t=>t.sortfield==e));if(t>=0){return{sortdirection:this.sortArray[t].sortdirection,sortindex:t,sortitems:this.sortArray.length}}return!1}getSortFields(){let e=[];for(let t of this.sortArray)e.push(this.language.getFieldDisplayName(this.module,t.sortfield));return e.join(", ")}get isSorted(){return this.sortArray.length>0}addCustomListType(e){this.metadata.addModuleListType(this.module,e)}listTypeExists(e){return!!this.getListTypes().find((t=>t.id==e))}setListType(e,t=!0,s=[]){if(e==this.currentList?.id)return;const i=this.currentList?.listcomponent;if(this.displayAggregates=!1,this.displayFilters=!1,this.currentList=this.getListTypes().find((t=>t.id===e)),this.currentList){if(this.determineListFields(),t){let t=this.userpreferences.getPreference(this.module);t||(t={}),t.lastListTypeId=e,this.userpreferences.setPreference(this.module,t)}this.currentList.aggregates?this.selectedAggregates=JSON.parse(atob(this.currentList.aggregates)):this.selectedAggregates=[],this.currentList.sortfields?this.sortArray=JSON.parse(atob(this.currentList.sortfields)):this.sortArray=s,this.emitListTypeChange(),this.currentList.listcomponent!=i&&this.emitListTypeComponentChange()}}determineListFields(){this._listfields=[];let e=this.getFieldDefs();const t=this.embeddedByComponent||this.currentList.listcomponent;let s=this.metadata.getComponentConfig(t,this.module),i=this.metadata.getFieldSetFields(s.fieldset);for(let t of i){let s=e?e.find((e=>e.id==t.id)):void 0;e&&s?this._listfields.push({id:t.id,field:t.field,fieldconfig:t.fieldconfig,sort:s.sort,width:s.width}):e||t.fieldconfig.hidden||this._listfields.push({id:t.id,field:t.field,fieldconfig:t.fieldconfig})}e&&this._listfields.sort(((t,s)=>e.findIndex((e=>e.id==t.id))>e.findIndex((e=>e.id==s.id))?1:-1))}isCustomList(e){return e||(e=this.currentList.id),!this.standardLists.some((t=>t.id==e))}set listfields(e){this._listfields=e;for(let e in this.sortArray)this._listfields.find((t=>t.field==this.sortArray[e].sortfield))||this.sortArray.splice(parseInt(e,10),1);this.listfield$.emit(this._listfields)}get listfields(){return this._listfields}canDelete(){try{return"all"!=this.currentList.id&&"owner"!=this.currentList.id}catch(e){return!1}}filterEnabled(){try{return"all"!=this.currentList.id&&"owner"!=this.currentList.id}catch(e){return!1}}aggregatesEnabled(){try{return!(!this.searchAggregates||_.isEmpty(this.searchAggregates))}catch(e){return!1}}setToSession(){this.useCache&&this.configuration.setData("lastlist"+this.module,JSON.stringify({listdata:this.listData,sortarray:this.sortArray,searchterm:this.searchTerm,searchaggregates:this.searchAggregates,selectedaggregates:this.selectedAggregates,buckets:this.buckets}))}loadFromSession(){if(!this.useCache)return!1;let e=JSON.parse(this.configuration.getData("lastlist"+this.module));return!(!e||e.buckets?.bucketfield!=this.buckets?.bucketfield)&&(this.listData=e.listdata,this.searchTerm=e.searchterm,this.searchAggregates=e.searchaggregates,this.selectedAggregates=e.selectedaggregates,this.sortArray=e.sortarray,this.buckets=e.buckets,!0)}getGlobal(){return"1"==this.currentList.global}getFieldDefs(){try{return JSON.parse(atob(this.currentList.fielddefs))}catch(e){return}}getFilterDefs(){try{return JSON.parse(this.currentList.filterdefs)}catch(e){return{logicaloperator:"and",groupscope:"all",conditions:[]}}}addListType(e){let t=new o.x;return this.backend.postRequest("configuration/spiceui/core/modules/"+this.module+"/listtypes",{},JSON.stringify(e),this.httpRequestsRefID).subscribe((e=>{this.addCustomListType(e),this.setListType(e.id),t.next(!0),t.complete()})),t.asObservable()}updateStandardListsComponent(e,t){this.standardLists[0].listcomponent!=t&&(this.standardLists.forEach((e=>{e.listcomponent=t})),this.determineListFields(),this.userpreferences.setPreference("defaultlisttype",t,!0,this.module),this.emitListTypeComponentChange())}updateListTypeComponent(e){this.currentList?.listcomponent!=e&&(this.metadata.updateModuleListType(this.module,{id:this.currentList.id,listcomponent:e}),this.currentList.listcomponent=e,this.determineListFields(),this.emitListTypeComponentChange())}emitListTypeComponentChange(){this.listTypeComponent$.next(this.currentList.listcomponent)}updateListType(e){let t=new o.x;e||(e={});const s=this.currentList?.listcomponent;return e.aggregates=btoa(JSON.stringify(this.selectedAggregates)),e.sortfields=btoa(JSON.stringify(this.sortArray)),e.fielddefs=btoa(JSON.stringify(this.listfields.map((e=>({id:e.id,width:e.width}))))),e.listcomponent||(e.listcomponent=this.currentList.listcomponent),this.backend.postRequest(`configuration/spiceui/core/modules/${this.module}/listtypes/${this.currentList.id}`,{},e,this.httpRequestsRefID).subscribe((i=>{this.metadata.getModuleListTypes(this.module).some((t=>{if(t.id==this.currentList.id){for(let s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);return this.currentList=t,!0}})),e.id=this.currentList.id,this.metadata.updateModuleListType(this.module,e),this.emitListTypeChange(),this.currentList.listcomponent!=s&&this.emitListTypeComponentChange(),t.next(!0),t.complete()})),t.asObservable()}emitListTypeChange(){this.listType$.next(this.currentList)}deleteListType(e=""){""===e&&(e=this.currentList.id),this.backend.deleteRequest("configuration/spiceui/core/modules/"+this.module+"/listtypes/"+e,null,this.httpRequestsRefID).subscribe({next:t=>{this.metadata.deleteModuleListType(this.module,e),this.setListType("all")},error:e=>{this.toast.sendToast(this.language.getLabel("LBL_ERROR"),"error")}})}getLastLoadTime(){return this.lastLoad.format(this.userpreferences.getTimeFormat())}scheduleReloadList(){this.reloadTimeOut&&(window.clearTimeout(this.reloadTimeOut),this.reloadTimeOut=void 0),this.reloadTimeOut=window.setTimeout((()=>{this.exceuteReload()}),1e3)}exceuteReload(){(this.changedAggregates.added.length>0||this.changedAggregates.deleted.length>0)&&this.reLoadList()}reLoadList(e=!1){if(this.isLoading){const e=this.httpRequestsRefID+"_get_list_data";return this.cancelPendingRequests&&this.backend.cancelPendingRequests([e]),this.isLoading=!1,(0,a.of)(!1)}return this.changedAggregates.added=[],this.changedAggregates.deleted=[],this.getListData(e)}resetListData(){if(this.buckets&&this.buckets.bucketitems)for(let e of this.buckets.bucketitems)e.count=0,e.items=0;this.listData={list:[],totalcount:0},this.listDataChanged$.next(!0)}getListTypes(e=!0){return e?this.standardLists.concat(this.metadata.getModuleListTypes(this.module)):this.metadata.getModuleListTypes(this.module)}generateStandardLists(){this.standardLists=[{id:"all",global:"1",name:`${this.language.getModuleCombinedLabel("LBL_ALL",this.module)}`,listcomponent:"ObjectList"}],this.metadata.getFieldDefs(this.module,"assigned_user_id")&&this.standardLists.push({id:"owner",global:"1",name:`${this.language.getModuleCombinedLabel("LBL_MY",this.module)}`,listcomponent:"ObjectList"})}get hasAggregates(){return this.selectedAggregates.length>0}get hasNonSysAggregates(){return this.selectedAggregates.some((e=>{let t=e.split("::",1)[0];if(!this.moduleAggregatesByFieldname[t]?.system)return!0}))}hasAggregate(e,t){let s=e+"::"+t;return this.selectedAggregates.some((e=>e===s))}setAggregate(e,t){this.selectedAggregates.push(e+"::"+t);let s=this.changedAggregates.deleted.indexOf(e+"::"+t);s>=0?this.changedAggregates.deleted.splice(s,1):this.changedAggregates.added.push(e+"::"+t)}getCheckedAggregateCount(e){return this.selectedAggregates.filter((t=>t.indexOf(e+"::")>-1)).length}checkAggregate(e,t){return this.selectedAggregates.indexOf(e+"::"+t.trim())>-1}removeAggregate(e,t){let s=this.selectedAggregates.indexOf(e+"::"+t);if(s<0)return!1;this.selectedAggregates.splice(s,1);let i=this.changedAggregates.added.indexOf(e+"::"+t);return i>=0?this.changedAggregates.added.splice(i,1):this.changedAggregates.deleted.push(e+"::"+t),!0}canChangeAggegate(e){return 0==this.changedAggregates.added.length&&0==this.changedAggregates.deleted.length||!(this.changedAggregates.added.filter((t=>0!=t.indexOf(e+"::"))).length>0)&&!(this.changedAggregates.deleted.filter((t=>0!=t.indexOf(e+"::"))).length>0)}removeAllAggregates(e=!1){this.selectedAggregates=e?this.selectedAggregates.filter((e=>{let t=e.split("::",1)[0];return!!this.moduleAggregatesByFieldname[t]?.system})):[]}removeAggregatesOfField(e){this.selectedAggregates=this.selectedAggregates.filter((t=>t.split("::",1)[0]!==e))}setAllSelected(){this.listSelected.type="all";for(let e of this.listData.list)e.selected=!0;this.selectionChanged$.emit(!0)}setAllUnselected(){this.listSelected.type="none";for(let e of this.listData.list.filter((e=>1==e.selected)))e.selected=!1;this.selectionChanged$.emit(!0)}setRangeSelected(e,t){for(let s=e;s<=t;s++)this.listData.list[s-1].selected=!0;this.selectionChanged$.emit(!0)}getSelectedCount(){return this.listData.list.filter((e=>1==e.selected)).length}getSelectedIDs(){let e=[];for(let t of this.listData.list)t.selected&&e.push(t.id);return e}getSelectedItems(){return this.listData.list.filter((e=>e.selected))}checkAccess(e){if(!("edit"!=e&&"delete"!=e||"all"!=this.currentList.id&&"owner"!=this.currentList.id))return!1;if(!this.getGlobal())return!0;switch(e){case"delete":return this.canDelete()&&(this.session.authData.admin||this.metadata.checkModuleAcl(this.module,"moduleadmin"));case"edit":return this.session.authData.admin||this.metadata.checkModuleAcl(this.module,"moduleadmin");default:return!1}}getListData(e=!1){let t=new o.x;if(e){if(this.buckets&&this.buckets.bucketitems)for(let e of this.buckets.bucketitems)e.items=0}else this.isLoading=!0,this.resetListData();let s={};s[this.module]=this.selectedAggregates;const i={modulefilter:this.modulefilter,filtercontextbeanid:this.filtercontextbeanid,start:0,limit:this.loadlimit,listid:this.currentList.id,searchterm:this.searchTerm,searchgeo:this.searchGeo,aggregates:s,buckets:this.buckets,relatefilter:this.relatefilter?.active?this.relatefilter:null},n=this.httpRequestsRefID+"_get_list_data";return this.cancelPendingRequests&&this.backend.cancelPendingRequests([n]),this.backend.getList(this.module,this.sortArray,i,n).subscribe({next:e=>{this.listData=e,this.lastLoad=new moment,this.isLoading=!1,this.searchAggregates=e.aggregations,this.buckets=e.buckets,this.setToSession(),t.next(!0),t.complete(),this.listDataChanged$.next(!0)},error:e=>{this.toast.sendToast("error loading list"),this.isLoading=!1,t.error(e),t.complete()}}),t.asObservable()}canLoadMore(){return!this.isLoading&&this.listData.list.length<this.listData.totalcount}loadMoreList(){if(this.isLoading||this.listData.list.length>=this.listData.totalcount)return!1;this.isLoading=!0;let e={};e[this.module]=this.selectedAggregates,this.backend.getList(this.module,this.sortArray,{modulefilter:this.modulefilter,filtercontextbeanid:this.filtercontextbeanid,start:this.listData.list.length,limit:this.loadlimit,listid:this.currentList.id,searchterm:this.searchTerm,searchgeo:this.searchGeo,aggregates:e,buckets:this.buckets,relatefilter:this.relatefilter?.active?this.relatefilter:null},this.httpRequestsRefID).subscribe((e=>{this.listData.list=this.listData.list.concat(e.list),this.lastLoad=new moment,this.isLoading=!1,this.listDataChanged$.next(!0)}))}loadMoreBucketList(e){const t=this.buckets.bucketitems.find((t=>t.bucket==e));if(!t||this.isLoading||t.items>=t.items.total)return!1;this.isLoading=!0;let s={};s[this.module]=this.selectedAggregates,this.backend.getList(this.module,this.sortArray,{modulefilter:this.modulefilter,filtercontextbeanid:this.filtercontextbeanid,start:this.listData.list.length,limit:this.loadlimit,listid:this.currentList.id,searchterm:this.searchTerm,searchgeo:this.searchGeo,aggregates:s,buckets:{bucketfield:this.buckets.bucketfield,bucketitems:[t]},relatefilter:this.relatefilter?.active?this.relatefilter:null},this.httpRequestsRefID).subscribe((e=>{t.items=e.buckets.bucketitems[0].items,this.listData.list=this.listData.list.concat(e.list),this.lastLoad=new moment,this.listDataChanged$.next(!0),this.isLoading=!1}))}exportList(e){let t=new o.x,s=this.getSelectedIDs();if(s.length>0)this.backend.getLinkToDownload(`module/${this.module}/export`,"POST",{},{ids:s,fields:e},{},this.httpRequestsRefID).subscribe((e=>{t.next(e),t.complete()}));else{let s={};s[this.module]=this.selectedAggregates,this.backend.getLinkToDownload(`module/${this.module}/export`,"POST",{},{listid:this.currentList.id,modulefilter:this.modulefilter,sortfields:this.sortArray,fields:e,searchterm:this.searchTerm,searchgeo:this.searchGeo,aggregates:s},null,this.httpRequestsRefID).subscribe((e=>{t.next(e),t.complete()}))}return t.asObservable()}get bucketfield(){return this.buckets?this.buckets.bucketfield:""}get bucketamountfield(){return this.buckets?this.buckets.buckettotal:""}updateBuckets(e,t,s=[]){let i=this.buckets.bucketitems.find((t=>t.bucket==e));i.items--,i.total--;let n=this.buckets.bucketitems.find((e=>e.bucket==t));n.items++,n.total++;for(let e of this.buckets.buckettotal)for(let t of s)"sum"==e.function&&e.name==t.fieldname&&(i.values["_bucket_agg_"+t.fieldname]-=t.valuefrom,n.values["_bucket_agg_"+t.fieldname]+=t.valueto)}removeItemFromBucket(e,t=[]){let s=this.buckets.bucketitems.find((t=>t.bucket==e));s.items--,s.total--;for(let e of t)s.values["_bucket_agg_"+e.fieldname]-=e.value}static ɵfac=function(e){return new(e||modellist)(i.LFG(d.f),i.LFG(r.y),i.LFG(c.Pu),i.LFG(u.d),i.LFG(m.z),i.LFG(g.n),i.LFG(h.C),i.LFG(p.A))};static ɵprov=i.Yz7({token:modellist,factory:modellist.ɵfac})}return modellist})()},71651:(e,t,s)=>{"use strict";s.d(t,{g:()=>g});var i=s(61135),n=s(77579),l=s(62242),o=s(14505),a=s(26625),d=s(75920),r=s(13278),c=s(33369),u=s(55329),m=s(44044);let g=(()=>{class modelurls{backend;configurationService;session;toast;broadcast;language;modal;httpRequestsRefID=window._.uniqueId("model_urls_http_ref_");module;id;count=0;urls=[];loading=!1;loaded=!1;loaded$;constructor(e,t,s,n,l,o,a){this.backend=e,this.configurationService=t,this.session=s,this.toast=n,this.broadcast=l,this.language=o,this.modal=a,this.loaded$=new i.X(!1)}getCount(){let e=new n.x;return this.backend.getRequest(`common/spiceurls/module/${this.module}/${this.id}/count`,null,this.httpRequestsRefID).subscribe({next:t=>{this.count=t.count,e.next(this.count),e.complete()},error:()=>{e.complete()}}),e.asObservable()}broadcastUrlCount(){this.broadcast.broadcastMessage("urls.loaded",{module:this.module,id:this.id,urlcount:this.count,reload:!0})}getUrls(){let e=new n.x;return this.urls=[],this.loading=!0,this.backend.getRequest(`common/spiceurls/module/${this.module}/${this.id}`,null,this.httpRequestsRefID).subscribe({next:t=>{for(let e in t)this.urls.find((t=>t.id==e))||(t[e].date=new moment(t[e].date),this.urls.push(t[e]));this.count=this.urls.length,this.broadcastUrlCount(),this.loading=!1,e.next(this.urls),e.complete(),this.loaded=!0,this.loaded$.next(!0)},error:t=>{this.loading=!1,e.error(t),e.complete()}}),e.asObservable()}deleteUrl(e){this.backend.deleteRequest(`common/spiceurls/module/${this.module}/${this.id}/${e}`,null,this.httpRequestsRefID).subscribe({next:t=>{let s=this.urls.findIndex((t=>t.id==e));this.urls.splice(s,1),this.count--,this.broadcastUrlCount()},error:e=>{this.toast.sendToast("ERR_URL_DELETE","error",e.error.error.message,!1)}})}getUrl(e){let t=new n.x;return this.backend.getRequest(`common/spiceurls/module/${this.module}/${this.id}/${e}`,null,this.httpRequestsRefID).subscribe({next:e=>{t.next(e.urlData),t.complete()},error:e=>{t.error(e),t.complete()}}),t.asObservable()}prepareUrlForSave(e){if(!e)return;let t=new n.x,s={date:new moment,url:e,id:"",url_name:"",user_id:"1",user_name:"admin",uploadprogress:0};return this.saveUrl(s,t),t.asObservable()}saveUrl(e,t){this.urls.unshift(e),this.count=this.urls.length,this.broadcastUrlCount();let s=new i.X(0);s.subscribe((t=>{e.uploadprogress=Math.floor(t)}));let n={data:e};this.backend.postRequestWithProgress(`common/spiceurls/module/${this.module}/${this.id}`,null,n,s,this.httpRequestsRefID).subscribe((s=>{e.id=s.id,e.user_id=s.user_id,e.user_name=s.user_name,e.url=s.url,e.url_name=s.url_name,delete e.uploadprogress,t.next({urls:s}),t.complete()}))}ngOnDestroy(){this.backend.cancelPendingRequests([this.httpRequestsRefID])}static ɵfac=function(e){return new(e||modelurls)(l.LFG(o.y),l.LFG(a.C),l.LFG(d.n),l.LFG(r.A),l.LFG(c.f),l.LFG(u.d),l.LFG(m.o))};static ɵprov=l.Yz7({token:modelurls,factory:modelurls.ɵfac})}return modelurls})()},29266:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});var i=s(62242),n=s(4154);let l=(()=>{class MathExpressionCompilerService{do(e){return this.evaluate(this.parse(this.lex(e)))}lex(e){let t,s=e=>/[+\-*\/\^%=(),]/.test(e),i=e=>/[0-9]/.test(e),n=e=>/\s/.test(e),l=e=>"string"==typeof e&&!s(e)&&!i(e)&&!n(e),o=[],a=0,d=()=>t=e[++a],r=(e,t)=>{o.push({type:e,value:t})};for(;a<e.length;){let t=e[a];if(n(t))d();else if(s(t))r(t),d();else if(i(t)){let e="";do{e+=t,t=d()}while(i(t));if("."===t)do{e+=t,t=d()}while(i(t));let s=parseFloat(e);if(!isFinite(s))throw"Number is too large or too small for a 64-bit double.";r("number",s)}else{if(!l(t))throw"Unrecognized token: "+t+" at "+a;{let e=t;for(;l(d());)e+=t;r("identifier",e)}}}return r("(end)"),o}parse(e){let t={},s=(e,s,i,n)=>{let l=t[e]||{};t[e]={lbp:l.lbp||i,nud:l.nud||s,led:l.led||n}};s("(",(()=>{let e=o(2);if(")"!==n().type)throw"Expected closing parenthesis ')'";return l(),e})),s("number",(e=>e)),s("identifier",(t=>{if("("===n().type){let s=[];if(")"===e[i+1].type)l();else{do{l(),s.push(o(2))}while(","===n().type);if(")"!==n().type)throw"Expected closing parenthesis ')'"}return l(),{type:"call",args:s,name:t.value}}return t})),s(","),s(")"),s("(end)");let i=0,n=()=>(e=>{let s=Object.create(t[e.type]);return s.type=e.type,s.value=e.value,s})(e[i]),l=()=>(i++,n()),o=e=>{let t,s=n();if(l(),!s.nud)throw"Unexpected token: "+s.type;for(t=s.nud(s);e<n().lbp;){if(s=n(),l(),!s.led)throw"Unexpected token: "+s.type;t=s.led(t)}return t},a=(e,t,i,n)=>{i=i||t,s(e,null,t,n||function(t){return{type:e,left:t,right:o(i)}})};var d,r;r=7,s(d="-",(()=>({type:d,right:o(r)}))),a("^",6,5),a("*",4),a("/",4),a("%",4),a("+",3),a("-",3),a("=",1,2,(e=>{if("call"===e.type){for(let t=0;t<e.args.length;t++)if("identifier"!==e.args[t].type)throw"Invalid argument name";return{type:"function",name:e.name,args:e.args,value:o(2)}}if("identifier"===e.type)return{type:"assign",name:e.value,value:o(2)};throw"Invalid lvalue"}));let c=[];for(;"(end)"!==n().type;)c.push(o(0));return c}evaluate(e){let t={"+":(e,t)=>e+t,"-":(e,t)=>e-t,"*":(e,t)=>e*t,"/":(e,t)=>e/t,"%":(e,t)=>e%t,"^":(e,t)=>Math.pow(e,t)},s={pi:Math.PI,e:Math.E},i={sin:Math.sin,cos:Math.cos,tan:Math.cos,asin:Math.asin,acos:Math.acos,atan:Math.atan,abs:Math.abs,round:Math.round,ceil:Math.ceil,floor:Math.floor,log:Math.log,exp:Math.exp,sqrt:Math.sqrt,max:Math.max,min:Math.min,random:Math.random},n={},l=e=>{if("number"===e.type)return e.value;if(t[e.type])return e.left?t[e.type](l(e.left),l(e.right)):t[e.type](l(e.right));if("identifier"===e.type){let t=n.hasOwnProperty(e.value)?n[e.value]:s[e.value];if(void 0===t)throw e.value+" is undefined";return t}if("assign"===e.type)s[e.name]=l(e.value);else{if("call"===e.type){for(let t=0;t<e.args.length;t++)e.args[t]=l(e.args[t]);return i[e.name].apply(null,e.args)}"function"===e.type&&(i[e.name]=function(){for(let t=0;t<e.args.length;t++)n[e.args[t].value]=arguments[t];let t=l(e.value);return n={},t})}},o="";for(let t=0;t<e.length;t++){let s=l(e[t]);void 0!==s&&(o+=s+"\n")}return o}static ɵfac=function(e){return new(e||MathExpressionCompilerService)};static ɵprov=i.Yz7({token:MathExpressionCompilerService,factory:MathExpressionCompilerService.ɵfac,providedIn:"root"})}return MathExpressionCompilerService})();var o=s(75920);moment.defaultFormat="YYYY-MM-DD HH:mm:ss";let a=(()=>{class modelutilities{metadata;mathcomp;session;constructor(e,t,s){this.metadata=e,this.mathcomp=t,this.session=s}getRand(){return Math.random()}S4(){return(65536*(1+this.getRand())|0).toString(16).substring(1)}generateGuid(){return this.S4()+this.S4()+"-"+this.S4()+"-"+this.S4()+"-"+this.S4()+"-"+this.S4()+this.S4()+this.S4()}backendModel2spice(e,t){let s=this.metadata.getModuleFields(e);for(let i in s)t[i]&&(t[i]=this.backend2spice(e,i,t[i]));return t}backend2spice(e,t,s){let i=this.metadata.getFieldDefs(e,t);if(!i||!i.type)return s;switch(i.type){case"date":if(moment.isMoment(s))return s;let e=moment(s);return e.isValid()?e:null;case"datetime":case"datetimecombo":if(moment.isMoment(s))return s;let t=this.session.getSessionData("timezone")||moment.tz.guess(!0),n="string"==typeof t&&t.length>0?moment.utc(s).tz(t):moment(s);return n.isValid()?n:null;case"double":case"currency":return s?parseFloat(s):0;case"int":return s?parseInt(s,10):0;case"bool":case"boolean":return"1"==s||s>0||1==s;case"json":try{return _.isObject(s)?s:s?JSON.parse(s):{}}catch(e){return{}}case"link":if(_.isObject(s)&&s.beans&&i.module)for(let e in s.beans)s.beans[e]=this.backendModel2spice(i.module,s.beans[e]);return s;default:return s}}spiceModel2backend(e,t){let s={...t},i=this.metadata.getModuleFields(e);for(let n in i)t.hasOwnProperty(n)&&(s[n]=this.spice2backend(e,n,t[n]));return s}spice2backend(e,t,s){let i=this.metadata.getFieldDefs(e,t);if(!i||!i.type)return s;switch(i.type){case"relate":case"parent":case"linked":case"linkedparent":return null;case"date":if("string"==typeof s){let e=moment(s);return e.isValid()?e.format("YYYY-MM-DD"):""}return s&&s._isAMomentObject&&s.isValid()?s.format("YYYY-MM-DD"):"";case"datetime":case"datetimecombo":if("string"==typeof s){let e=this.session.getSessionData("timezone")||moment.tz.guess(!0),t="string"==typeof e&&e.length>0?moment(s).tz(e):moment(s);return t.isValid()?t.utc().format("YYYY-MM-DD HH:mm:ss"):""}return s&&s._isAMomentObject&&s.isValid()?moment(s).utc().format("YYYY-MM-DD HH:mm:ss"):"";case"json":return s?JSON.stringify(s):"";case"link":if(_.isObject(s)&&s.beans&&i.module)for(let e in s.beans)s.beans[e]=this.spiceModel2backend(i.module,s.beans[e]);return s;case"bool":case"boolean":return s&&("1"==s||s>0||!0===s)?"1":"0";default:return s}}formatDate(e){return moment(e).format("YYYY-MM-DD")}cleanAccountName(e){let t=["ag","gmbh","gesmbh","corp","inc"],s=e.toLowerCase();s=s.replace(/[^\w\s]/gi,"");let i=s.split(" ");for(let e of t){let t=i.indexOf(e);t>=0&&i.splice(t,1)}return i.join(" ")}static compare(e,t,s){switch(t){case"in":case"between":break;case"empty":return!e;case"nempty":return!!e;case"notnull":return null!==e;case"null":return null===e;case"contain":return!!e&&-1!==e.indexOf(s);case"ncontain":return!e||-1==e.indexOf(s);case"greaterequal":return e>=s;case"greater":return e>s;case"lessequal":case"lesserequal":return e<=s;case"less":case"lesser":return e<s;case"unequal":return e!=s;case"regex":return new RegExp(s).test(e);case"notregex":return!new RegExp(s).test(e);default:return e==s}}static strtobool(e){if("string"!=typeof e)return!1;switch(e.toLowerCase().trim()){case"false":case"no":case"0":case"":return!1;default:return!0}}static strtomoment(e,t){return moment(modelutilities.strtotime(e,t),"X")}static strtotime(e,t){let s,i,n,l,o,a,d,r,c,u,m,g=!1;if(!e)return g;e=e.replace(/^\s+|\s+$/g,"").replace(/\s{2,}/g," ").replace(/[\t\r\n]/g,"").toLowerCase();let h=new RegExp(["^(\\d{1,4})","([\\-\\.\\/:])","(\\d{1,2})","([\\-\\.\\/:])","(\\d{1,4})","(?:\\s(\\d{1,2}):(\\d{2})?:?(\\d{2})?)?","(?:\\s([A-Z]+)?)?$"].join(""));if(i=e.match(h),i&&i[2]===i[4])if(i[1]>1901)switch(i[2]){case"-":case"/":return i[3]>12||i[5]>31?g:new Date(i[1],parseInt(i[3],10)-1,i[5],i[6]||0,i[7]||0,i[8]||0,i[9]||0).getTime()/1e3;case".":return g}else if(i[5]>1901)switch(i[2]){case"-":case".":return i[3]>12||i[1]>31?g:new Date(i[5],parseInt(i[3],10)-1,i[1],i[6]||0,i[7]||0,i[8]||0,i[9]||0).getTime()/1e3;case"/":return i[1]>12||i[3]>31?g:new Date(i[5],parseInt(i[1],10)-1,i[3],i[6]||0,i[7]||0,i[8]||0,i[9]||0).getTime()/1e3}else switch(i[2]){case"-":return i[3]>12||i[5]>31||i[1]<70&&i[1]>38?g:(l=i[1]>=0&&i[1]<=38?+i[1]+2e3:i[1],new Date(l,parseInt(i[3],10)-1,i[5],i[6]||0,i[7]||0,i[8]||0,i[9]||0).getTime()/1e3);case".":return i[5]>=70?i[3]>12||i[1]>31?g:new Date(i[5],parseInt(i[3],10)-1,i[1],i[6]||0,i[7]||0,i[8]||0,i[9]||0).getTime()/1e3:i[5]<60&&!i[6]?i[1]>23||i[3]>59?g:(n=new Date,new Date(n.getFullYear(),n.getMonth(),n.getDate(),i[1]||0,i[3]||0,i[5]||0,i[9]||0).getTime()/1e3):g;case"/":return i[1]>12||i[3]>31||i[5]<70&&i[5]>38?g:(l=i[5]>=0&&i[5]<=38?+i[5]+2e3:i[5],new Date(l,parseInt(i[1],10)-1,i[3],i[6]||0,i[7]||0,i[8]||0,i[9]||0).getTime()/1e3);case":":return i[1]>23||i[3]>59||i[5]>59?g:(n=new Date,new Date(n.getFullYear(),n.getMonth(),n.getDate(),i[1]||0,i[3]||0,i[5]||0).getTime()/1e3)}if("now"===e)return null===t||isNaN(t)?(new Date).getTime()/1e3|0:0|t;if(!isNaN(s=Date.parse(e)))return s/1e3|0;if(h=new RegExp(["^([0-9]{4}-[0-9]{2}-[0-9]{2})","[ t]","([0-9]{2}:[0-9]{2}:[0-9]{2}(\\.[0-9]+)?)","([\\+-][0-9]{2}(:[0-9]{2})?|z)"].join("")),i=e.match(h),i&&("z"===i[4]?i[4]="Z":i[4].match(/^([+-][0-9]{2})$/)&&(i[4]=i[4]+":00"),!isNaN(s=Date.parse(i[1]+"T"+i[2]+i[4]))))return s/1e3|0;function p(e){let t=e.split(" "),s=t[0],i=t[1].substring(0,3),n=/\d+/.test(s),l=("last"===s?-1:1)*("ago"===t[2]?-1:1);if(n&&(l*=parseInt(s,10)),d.hasOwnProperty(i)&&!t[1].match(/^mon(day|\.)?$/i))return o["set"+d[i]](o["get"+d[i]]()+l);if("wee"===i)return o.setDate(o.getDate()+7*l);if("next"===s||"last"===s)!function(e,t,s){let i,n=a[t];void 0!==n&&(i=n-o.getDay(),0===i?i=7*s:i>0&&"last"===e?i-=7:i<0&&"next"===e&&(i+=7),o.setDate(o.getDate()+i))}(s,i,l);else if(!n)return!1;return!0}if(o=t?new Date(1e3*t):new Date,a={sun:0,mon:1,tue:2,wed:3,thu:4,fri:5,sat:6},d={yea:"FullYear",mon:"Month",day:"Date",hou:"Hours",min:"Minutes",sec:"Seconds"},c="(years?|months?|weeks?|days?|hours?|minutes?|min|seconds?|sec|sunday|sun\\.?|monday|mon\\.?|tuesday|tue\\.?|wednesday|wed\\.?|thursday|thu\\.?|friday|fri\\.?|saturday|sat\\.?)",u="([+-]?\\d+\\s"+c+"|(last|next)\\s"+c+")(\\sago)?",i=e.match(new RegExp(u,"gi")),!i)return g;for(m=0,r=i.length;m<r;m++)if(!p(i[m]))return g;return o.getTime()/1e3}http_build_query(e,t="",s="&"){let i=[],n=(e,t,s)=>{let i=[];if(!0===t?t="1":!1===t&&(t="0"),null!==t){if("object"==typeof t){for(let l in t)null!==t[l]&&i.push(n(e+"["+l+"]",t[l],s));return i.join(s)}if("function"!=typeof t)return encodeURIComponent(e)+"="+encodeURIComponent(t);throw new Error("There was an error processing for http_build_query().")}return""};s||(s="&");for(let l in e){let o=e[l];t&&!isNaN(parseFloat(l))&&(l=String(t)+l);let a=n(l,o,s);""!==a&&i.push(a)}return i.join(s)}compileMathExpression(e){try{return this.mathcomp.do(e)}catch(e){return console.warn(e),!1}}timezoneChanged(e,t){for(let s in e)if(_.isObject(e[s]))if(e[s]&&e[s]._isAMomentObject)e[s]._isUTC&&e[s].tz(t);else if(e[s].beans&&_.isObject(e[s].beans))for(let i in e[s].beans)this.timezoneChanged(e[s].beans[i],t)}static ɵfac=function(e){return new(e||modelutilities)(i.LFG(n.Pu),i.LFG(l),i.LFG(o.n))};static ɵprov=i.Yz7({token:modelutilities,factory:modelutilities.ɵfac,providedIn:"root"})}return modelutilities})()},82032:(e,t,s)=>{"use strict";s.d(t,{G:()=>w});var i=s(62242),n=s(6204),l=s(50727),o=s(61135),a=s(77579),d=s(39646),r=s(66550),c=s(75920),u=s(44044),m=s(55329),g=s(33369),h=s(26625),p=s(4154),f=s(93441),b=s(12222),v=s(14505),y=s(62422),x=s(83348);let w=(()=>{class navigation{title;session;modal;language;broadcast;configurationService;metadata;helper;socket;backend;userpreferences;router;navigationparadigm="subtabbed";enforcednavigationparadigm=!1;activeModule="Home";activeModule$;modelsEditing=[];modelregister=[];modelregisterCounter=0;activeRoute;activeTab$;activeObject="";maintab={path:void 0,params:void 0,id:"main",active:!0,pinned:!1,enablesubtabs:!1,url:"module/Home"};objectTabs=[];objectTabsChange$=new i.vpe;subscriptions=new l.w0;constructor(e,t,s,n,l,a,d,r,c,u,m,g){this.title=e,this.session=t,this.modal=s,this.language=n,this.broadcast=l,this.configurationService=a,this.metadata=d,this.helper=r,this.socket=c,this.backend=u,this.userpreferences=m,this.router=g,this.activeModule$=new i.vpe,this.broadcast.message$.subscribe((e=>this.handleMessage(e))),window.setTimeout((()=>{addEventListener("beforeunload",(e=>{this.anyDirtyModel()&&(e.preventDefault(),e.returnValue="")}))}),1),this.activeTab$=new o.X("main"),this.setTabTitle()}setSessionData(){this.session.setSessionData("navigation",{main:this.maintab,tabs:this.objectTabs})}get activeTabObject(){return this.maintab.active?this.maintab:this.objectTabs.find((e=>e.active))}get activeTab(){return this.maintab.active?"main":this.objectTabs.find((e=>e.active))?.id}set activeTab(e){if(this.maintab.active)this.maintab.active=!1;else{let e=this.objectTabs.find((e=>e.active));e&&(e.active=!1)}if("main"==e)this.maintab.active=!0,this.activeTab$.next("main"),this.router.navigate([this.maintab.url]);else{let t=this.objectTabs.find((t=>t.id==e));t&&this.setTabActive(t)}this.setSessionData()}setTabActive(e){e.active=!0,this.activeTab$.next(e.id),this.setTabTitle(),this.router.navigate([e.url])}getSubTabs(e){return e?this.objectTabs.filter((t=>t.parentid==e)):[]}get displayTab(){if(this.maintab.active)return"main";let e=this.objectTabs.find((e=>e.active));return e?.id}setActiveModule(e,t="",s=""){this.activeModule=e,this.activeModule$.emit(e),this.title.setTitle(this.systemName+" / "+(""!==s?s:e))}get systemName(){return this.configurationService.systemName}enforceNavigationParadigm(e){this.enforcednavigationparadigm=!0,this.navigationparadigm=e}handleMessage(e){switch(e.messagetype){case"loader.completed":if(!this.enforcednavigationparadigm&&"loadUserData"==e.messagedata){this.userpreferences.getPreference("navigation_paradigm");this.navigationparadigm="subtabbed",this.session.setSessionData("navigation_paradigm",this.navigationparadigm)}break;case"userpreferences.save":let t=this.userpreferences.getPreference("navigation_paradigm");t="subtabbed",!this.enforcednavigationparadigm&&t&&this.navigationparadigm!=t&&("simple"==t&&this.navigationparadigm!=t?(this.objectTabs=[],this.router.navigate(["module/Home"])):"simple"!=t&&this.navigationparadigm!=t&&this.router.navigate(["module/Home"]),this.navigationparadigm=t,this.session.setSessionData("navigation_paradigm",this.navigationparadigm));break;case"logout":this.objectTabs=[],this.maintab={path:void 0,params:void 0,id:"main",pinned:!1,active:!0,enablesubtabs:!1,url:"module/Home"},this.subscriptions.unsubscribe();break;case"login":let s=this.session.getSessionData("navigation_paradigm");s&&(this.navigationparadigm=s);let i=this.session.getSessionData("navigation");_.isEmpty(i)||(this.maintab=i.main,this.objectTabs=i.tabs,this.maintab.params?.module&&(this.activeModule=this.maintab.params.module),this.activeTab$.next(this.activeTab),this.setTabTitle()),this.subscriptions.add(this.socket.initializeNamespace("module").subscribe((e=>this.handleSocketEvents(e))));break;case"model.delete":for(let t of this.objectTabs.filter((t=>t.params.module==e.messagedata.module&&t.params.id==e.messagedata.id)))this.closeObjectTab(t.id,!0)}}handleSocketEvents(e){switch(e.type){case"update":case"systemupdate":"systemupdate"!=e.type&&e.data.sessionId==n.V8.hashStr(this.session.authData.sessionId)||!this.modelregister.find((t=>t.model.module==e.data.module&&t.model.id==e.data.id&&!t.model.isEditing))||this.backend.get(e.data.module,e.data.id).subscribe((t=>{let s=this.modelregister.filter((t=>t.model.module==e.data.module&&t.model.id==e.data.id&&!t.model.isEditing));for(let e of s)e.model.setData({...t},!1),e.model.data$.next(e.model.data);this.broadcast.broadcastMessage("model.save",{id:e.data.id,module:e.data.module,data:t})}))}}addModelEditing(e,t,s,i){e&&t&&this.modelsEditing.push({id:e,module:t,model:s,summary_text:i,tabid:this.activeTab})}removeModelEditing(e,t){t&&e&&this.modelsEditing.some(((s,i)=>{if(s.id==t&&s.module==e)return this.modelsEditing.splice(i,1),!0}))}get editing(){return this.modelsEditing.length>0}discardAllChanges(){this.modelsEditing=[]}registerModel(e){let t=++this.modelregisterCounter;return this.modelregister.push({id:t,model:e,tabid:this.activeTab}),this.socket.joinRoom("module",n.V8.hashStr(`${e.module}:${e.id}`).toString()),t}unregisterModel(e){let t=this.modelregister.findIndex((t=>t.id==e));if(t>=0){let e=this.modelregister[t].model.module,s=this.modelregister[t].model.id;0==this.modelregister.filter((t=>t.id!=s&&t.model.module==e&&t.model.id==s)).length&&this.socket.leaveRoom("module",n.V8.hashStr(`${e}:${s}`).toString()),this.modelregister.splice(t,1)}}getRegisteredModel(e,t){return this.modelregister.find((s=>s.model.id==e&&s.model.module==t))?.model}anyDirtyModel(e){return this.modelsEditing.some((t=>{if(t.model.isDirty()&&(!e||e&&(t.tabid==e||this.parentTabId(e)==e)))return!0}))}parentTabId(e){return"main"==e?null:this.objectTabs.find((t=>t.id==e)).parentid}matchPath(e,t){if(e.path.replace("tab/:tabid/","")==t.path)return!0;if(e.path.replace("tab/:tabid/","")==t.referencepath)return!0;let s=this.metadata.getRouteDetails(e.path.replace("tab/:tabid/",""));return!(!s.referencepath||s.referencepath!=t.path)||!(!s.referencepath||s.referencepath!=t.referencepath)}buildUrl(e){let t="";return e.forEach((e=>{""!=t&&(t+="/"),t+=e.path})),t}matchRouteParams(e,t){if(1==e.path.split(":").length||_.isEqual(e.params,t))return!0;if(t.tabid&&t.tabid==e.id){let s={...t};return delete s.tabid,_.isEqual(e.params,s)}return!1}handleNavigation(e,t,s){let i=this.metadata.getRouteDetails(t.path.replace("tab/:tabid/",""));if("M"==i?.target||"Home"==e.module){if(this.maintab.path==t.path&&_.isEqual(this.maintab.params,e))return void(this.activeTab="main");this.mainTabChangeCheck().subscribe((i=>{i?(this.maintab.path=t.path,this.maintab.params={...e},this.maintab.url=this.buildUrl(s.url),this.activeTab="main",this.maintab.params?.module&&(this.activeModule=this.maintab.params.module)):this.router.navigate([this.maintab.url])}))}else{for(let n of this.objectTabs)if(this.matchPath(n,i)&&this.matchRouteParams(n,e))return n.path!=t.path.replace("tab/:tabid/","")&&(n.path=t.path,n.url=this.buildUrl(s.url)),void(this.activeTab=n.id);let n;e.tabid&&(n=this.objectTabs.find((t=>t.id==e.tabid)));let l=this.helper.generateGuid();this.objectTabs.unshift({id:l,parentid:n&&n.enablesubtabs?n.id:void 0,path:t.path,url:this.buildUrl(s.url),params:{...e},active:!1,pinned:!1,enablesubtabs:"1"==i.subtabs}),this.activeTab=l,this.objectTabsChange$.emit(!0)}}addObjectTab(e){this.objectTabs.unshift(e),this.activeTab=e.id}setActiveTab(e){this.activeTab=e,this.activeTab$.next(this.activeTab),this.setTabTitle()}setTabTitle(){let e=this.getTabById(this.activeTab),t="";e.displayname?t=e.displayname:e.displaymodule?t=this.language.getModuleName(e.displaymodule):this.activeModule&&(t=this.language.getModuleName(this.activeModule)),this.title.setTitle(this.systemName+(t?` / ${t}`:""))}cloneTab(e){let t=this.getTabById(e),s=this.helper.generateGuid();this.objectTabs.unshift({id:s,parentid:void 0,path:t.path,url:t.url,params:{...t.params},active:!1,pinned:!1,enablesubtabs:t.enablesubtabs}),this.activeTab=s}settabinfo(e,t){if("main"==e)t.displaymodule&&this.setActiveModule(t.displaymodule);else{let s=this.getTabById(e);s&&(s.displayname=t.displayname,s.displaymodule=t.displaymodule,s.displayicon=t.displayicon,this.objectTabsChange$.emit(!0))}}getTabById(e){return"main"==e?this.maintab:this.objectTabs.find((t=>t.id==e))}mainTabChangeCheck(){if(this.anyDirtyModel("main")){let e=new a.x;return this.modal.confirm(this.language.getLabel("MSG_NAVIGATIONSTOP","","long"),this.language.getLabel("MSG_NAVIGATIONSTOP")).subscribe((t=>{t?e.next(!0):e.next(!1),e.complete()})),e.asObservable()}return(0,d.of)(!0)}closeObjectTab(e,t=!1){"main"!=e&&(!t&&this.anyDirtyModel(e)?this.modal.confirm(this.language.getLabel("MSG_CLOSETAB","","long"),this.language.getLabel("MSG_CLOSETAB")).subscribe((t=>{t&&this.unsetObjectTab(e)})):this.unsetObjectTab(e))}unsetObjectTab(e){let t=this.objectTabs.findIndex((t=>t.id==e));if(t>=0){if(this.objectTabs[t].active||this.objectTabs.find((e=>e.active))?.parentid==e)if(this.objectTabs[t].parentid)this.setActiveTab(this.objectTabs[t].parentid);else if(0!=t){const e=t-1;this.setActiveTab(this.objectTabs[e].id)}else this.setActiveTab("main");this.objectTabs.splice(t,1);let s=-1;for(;(s=this.modelregister.findIndex((t=>t.tabid==e)))>=0;)this.modelregister.splice(s,1);for(t=this.objectTabs.length-1;t>=0;){if(this.objectTabs[t].parentid==e){this.objectTabs.splice(t,1);let s=-1;for(;(s=this.modelregister.findIndex((t=>t.tabid==e)))>=0;)this.modelregister.splice(s,1)}t--}this.objectTabsChange$.emit(!0),this.setSessionData()}}checkActiveRoute(e){return _.isEqual(e,this.activeRoute)}static ɵfac=function(e){return new(e||navigation)(i.LFG(r.Dx),i.LFG(c.n),i.LFG(u.o),i.LFG(m.d),i.LFG(g.f),i.LFG(h.C),i.LFG(p.Pu),i.LFG(f._),i.LFG(b.W),i.LFG(v.y),i.LFG(y.z),i.LFG(x.F0))};static ɵprov=i.Yz7({token:navigation,factory:navigation.ɵfac,providedIn:"root"})}return navigation})()},17017:(e,t,s)=>{"use strict";s.d(t,{d:()=>o});var i=s(62242),n=s(61135),l=s(82032);let o=(()=>{class navigationtab{navigation;activeRoute={params:void 0,path:void 0};activeRoute$;tabid;objecttab;tabinfo$=new i.vpe;close$=new i.vpe;constructor(e){this.navigation=e,this.activeRoute$=new n.X(this.activeRoute)}setTabInfo(e){this.tabinfo$.emit(e)}get tabdata(){return this.objecttab?.tabdata}set tabdata(e){this.objecttab.tabdata=e,this.navigation.setSessionData()}closeTab(){this.close$.emit(!0)}static ɵfac=function(e){return new(e||navigationtab)(i.LFG(l.G))};static ɵprov=i.Yz7({token:navigationtab,factory:navigationtab.ɵfac})}return navigationtab})()},83298:(e,t,s)=>{"use strict";s.d(t,{t:()=>m});var i=s(62242),n=s(14505),l=s(33369),o=s(26625),a=s(62422),d=s(55329),r=s(66550),c=s(12222),u=s(75920);let m=(()=>{class notification{backend;broadcast;configuration;preferences;language;sanitizer;socket;session;unreadCount=0;totalCount=0;notifications=[];unreadNotifications=[];desktopNotifications=[];isLoading=!1;newNotifications=[];constructor(e,t,s,i,n,l,o,a){this.backend=e,this.broadcast=t,this.configuration=s,this.preferences=i,this.language=n,this.sanitizer=l,this.socket=o,this.session=a,this.initializeDesktopNotification().then((()=>this.loadNotifications())),this.initializeSocket(),this.subscribeToBroadcast()}initializeDesktopNotification(){return"Notification"in window?"default"===Notification.permission?Notification.requestPermission().then((e=>{this.preferences.setPreference("displayDesktopNotifications","granted"==e,!0)})):Promise.resolve(null):(console.error("This browser does not support desktop notification"),Promise.resolve(null))}markAsRead(e){this.notifications.some((t=>{if(t.id==e)return t.notification_read=1,this.unreadCount--,!0})),this.unreadNotifications=this.unreadNotifications.filter((t=>t.id!==e)),this.backend.postRequest(`common/SpiceNotifications/${e}/markasread`)}markAllAsRead(){this.notifications.forEach((e=>{e.notification_read=1})),this.unreadNotifications=[],this.unreadCount=0,this.backend.postRequest("common/SpiceNotifications/all/read")}loadNotifications(){this.setInitialValues(this.configuration.getData("spicenotifications")),this.broadcast.message$.subscribe((e=>{"loader.completed"===e.messagetype&&"loadUserData"===e.messagedata&&this.setInitialValues(this.configuration.getData("spicenotifications"))}))}reloadNotifications(){this.notifications=[],this.unreadNotifications=[],this.desktopNotifications=[],this.loadNotificationsFromBackend()}loadMoreNotifications(){this.isLoading||this.notifications.length>=this.totalCount||this.loadNotificationsFromBackend()}loadNotificationsFromBackend(){this.isLoading=!0,this.backend.getRequest("common/SpiceNotifications",{offset:this.notifications.length}).subscribe({next:e=>{this.isLoading=!1,this.notifications=this.notifications.concat(e.records.map((e=>this.parseNotification(e)))),this.unreadNotifications=this.notifications.filter((e=>1!=e.notification_read)),this.setUnreadCount()},error:e=>{this.isLoading=!1}})}pushNotification(e){e=this.parseNotification(e),this.notifications.unshift(e),this.unreadNotifications.unshift(e),this.pushDesktopNotification(e),this.preferences.toUse.showRealtimeNotifications&&this.displayRealtimeNotification(e),this.unreadCount++}displayRealtimeNotification(e,t=!0){this.newNotifications.push(e),this.pushDesktopNotification(e),t&&window.setTimeout((()=>this.clearTempNotification(e)),1e4)}clearTempNotification(e){this.newNotifications=this.newNotifications.filter((t=>t!=e))}pushDesktopNotification(e){if(!this.preferences.toUse.displayDesktopNotifications)return;const t=e?this.generateDesktopNotificationTitle(e):this.language.getLabel("MSG_NEW_NOTIFICATIONS");this.desktopNotifications.unshift(new Notification(this.configuration.systemName,{body:t,icon:"config/headerimage"}))}setUnreadCount(){this.unreadCount=this.unreadNotifications.length}setInitialValues(e){e&&Array.isArray(e.records)&&(this.totalCount=e.count,this.notifications=e.records.map((e=>this.parseNotification(e))),this.unreadNotifications=this.notifications.filter((e=>1!=e.notification_read)),this.setUnreadCount(),this.unreadCount>0&&this.pushDesktopNotification())}initializeSocket(){this.socket.initializeNamespace("notifications").subscribe((e=>this.handleSocketEvents(e))),this.socket.joinRoom("notifications",this.session.authData.userId)}generateDesktopNotificationTitle(e){switch(e.notification_type){case"reminder":return`${this.language.getLabel("LBL_REMINDER")} ${e.bean_name}\n${e.notification_date}`;case"assign":return`${this.language.getLabel("LBL_ASSIGNED")} ${e.bean_name} ${this.language.getLabel("LBL_BY")} ${e.created_by_name}`;case"change":return`${this.language.getLabel("LBL_CHANGED")} ${e.bean_name} ${this.language.getLabel("LBL_BY")} ${e.created_by_name}`;case"delete":return`${this.language.getLabel("LBL_DELETED")} ${e.bean_name} ${this.language.getLabel("LBL_BY")} ${e.created_by_name}`}}subscribeToBroadcast(){this.broadcast.message$.subscribe((e=>{"login"===e.messagetype&&this.initializeSocket(),"logout"===e.messagetype&&this.socket.disconnect("notifications")}))}handleSocketEvents(e){if("new"===e.type)e.data&&this.pushNotification(e.data)}parseNotification(e){const t=this.session.getSessionData("timezone")||moment.tz.guess(!0),s=`${this.preferences.getDateFormat()} ${this.preferences.getTimeFormat()}`;let i="string"==typeof t&&t.length>0?moment.utc(e.notification_date).tz(t):moment(e.notification_date);return e.notification_date=i.isValid()?i.format(s):null,e.additional_infos&&"string"==typeof e.additional_infos&&(e.additional_infos=JSON.parse(e.additional_infos)),e}static ɵfac=function(e){return new(e||notification)(i.LFG(n.y),i.LFG(l.f),i.LFG(o.C),i.LFG(a.z),i.LFG(d.d),i.LFG(r.H7),i.LFG(c.W),i.LFG(u.n))};static ɵprov=i.Yz7({token:notification,factory:notification.ɵfac,providedIn:"root"})}return notification})()},99637:(e,t,s)=>{"use strict";s.d(t,{g:()=>n});var i=s(62242);let n=(()=>{class popup{closePopup$;constructor(){this.closePopup$=new i.vpe}close(){this.closePopup$.emit(!0)}static ɵfac=function(e){return new(e||popup)};static ɵprov=i.Yz7({token:popup,factory:popup.ɵfac})}return popup})()},10382:(e,t,s)=>{"use strict";s.d(t,{h:()=>h});var i=s(39646),n=s(77579),l=s(54004),o=s(15439),a=s.n(o),d=s(62242),r=s(14505),c=s(33369),u=s(26625),m=s(29266),g=s(75920);let h=(()=>{class recent{backend;broadcast;configuration;modelutils;session;httpRequestsRefID=window._.uniqueId("recent_items_http_ref_");moduleItems={};recentItems=[];isInitialized=!1;constructor(e,t,s,i,n){this.backend=e,this.broadcast=t,this.configuration=s,this.modelutils=i,this.session=n,this.broadcast.message$.subscribe((e=>this.handleMessage(e)))}handleMessage(e){switch(e.messagetype){case"model.save":let t=this.recentItems.find((t=>t.module_name==e.messagedata.module&&t.item_id==e.messagedata.id));if(t&&(t.data=e.messagedata.data,t.item_summary=e.messagedata.data.summary_text),this.moduleItems[e.messagedata.module]){let t=this.moduleItems[e.messagedata.module].find((t=>t.module_name==e.messagedata.module&&t.item_id==e.messagedata.id));t&&(t.data=e.messagedata.data,t.item_summary=e.messagedata.data.summary_text)}break;case"model.delete":let s=this.recentItems.findIndex((t=>t.module_name==e.messagedata.module&&t.item_id==e.messagedata.id));if(s&&this.recentItems.splice(s,1),this.moduleItems[e.messagedata.module]){let t=this.moduleItems[e.messagedata.module].findIndex((t=>t.module_name==e.messagedata.module&&t.item_id==e.messagedata.id));t&&this.recentItems.splice(t,1)}}}trackItem(e,t,s){this.pushTrackedItemToRecentItems(e,t,s),this.pushTrackedItemToModuleItems(e,t,s)}pushTrackedItemToModuleItems(e,t,s){const i=this.configuration.getData("moduleRecentItems");if(i&&i[e]){if(this.moduleItems[e]){this.moduleItems[e].some(((s,i)=>{if(s.item_id==t)return this.moduleItems[e].splice(i,1),!0})),i[e].some(((s,n)=>{if(s.item_id==t)return i[e].splice(n,1),!0}));const n={item_id:t,module_name:e,item_summary:s.summary_text,date_modified:a()().format("YYYY-MM-DD HH:mm:ss"),data:this.modelutils.spiceModel2backend(e,JSON.parse(JSON.stringify(s)))};for(this.moduleItems[e].unshift(n),i[e].unshift(n);this.moduleItems[e].length>5;)this.moduleItems[e].pop()}this.configuration.setData("moduleRecentItems",JSON.parse(JSON.stringify(i)),!1)}}pushTrackedItemToRecentItems(e,t,s){const i=this.configuration.getData("recentItems");if(!i)return;this.recentItems.some(((s,i)=>{if(s.module_name===e&&s.item_id==t)return this.recentItems.splice(i,1),!0})),i.some(((s,n)=>{if(s.module_name===e&&s.item_id==t)return i.splice(n,1),!0}));const n={item_id:t,module_name:e,item_summary:s.summary_text,date_modified:a()().format("YYYY-MM-DD HH:mm:ss"),data:this.backend.modelutilities.spiceModel2backend(e,JSON.parse(JSON.stringify(s)))};for(this.recentItems.unshift(n),i.unshift(n);this.recentItems.length>50;)this.recentItems.pop();this.configuration.setData("recentItems",JSON.parse(JSON.stringify(i)),!1)}getModuleRecent(e){if("Home"==e)return this.getRecentItems().pipe((0,l.U)((e=>e.slice(0,5))));{const t=this.configuration.getData("moduleRecentItems");if(t&&t[e])return this.moduleItems[e]=JSON.parse(JSON.stringify(t[e])),(0,i.of)(this.moduleItems[e]);{let t=new n.x;return this.backend.getRequest("module/Trackers/recent",{module:e,limit:5}).subscribe((s=>{this.moduleItems[e]=[];for(let t of s)this.moduleItems[e].push(t);t.next(this.moduleItems[e]),t.complete(),this.configuration.setData("moduleRecentItems",JSON.parse(JSON.stringify(this.moduleItems)),!1)})),t.asObservable()}}}getRecentItems(){let e=new n.x;const t=this.configuration.getData("recentItems");return t?(this.recentItems=JSON.parse(JSON.stringify(t)),this.isInitialized=!0,e.next(this.recentItems),e.complete()):this.backend.getRequest("module/Trackers/recentitems",{},this.httpRequestsRefID).subscribe((t=>{this.recentItems=t,this.configuration.setData("recentItems",JSON.parse(JSON.stringify(t)),!1),this.isInitialized=!0,e.next(this.recentItems),e.complete()})),e.asObservable()}static ɵfac=function(e){return new(e||recent)(d.LFG(r.y),d.LFG(c.f),d.LFG(u.C),d.LFG(m.A),d.LFG(g.n))};static ɵprov=d.Yz7({token:recent,factory:recent.ɵfac,providedIn:"root"})}return recent})()},66040:(e,t,s)=>{"use strict";s.d(t,{j:()=>m});var i=s(77579),n=s(39646),l=s(62242),o=s(4154),a=s(14505),d=s(33369),r=s(29266),c=s(13278),u=s(55329);let m=(()=>{class relatedmodels{metadata;backend;broadcast;modelutilities;toast;language;module="";id="";httpRequestsRefID=_.uniqueId("related_models_http_ref_");model;relatedModule="";linkName="";searchTerm="";linkEndPoint;modulefilter="";fieldfilters={};items=[];offset=0;count=0;loaditems=5;isloading=!1;isonlyfiltered=!1;saveToLinkOnly=!1;sort={sortfield:"",sortdirection:"ASC"};lastLoad=new moment;sequencefield=null;serviceSubscriptions=[];constructor(e,t,s,i,n,l){this.metadata=e,this.backend=t,this.broadcast=s,this.modelutilities=i,this.toast=n,this.language=l,this.serviceSubscriptions.push(this.broadcast.message$.subscribe((e=>{this.handleMessage(e)})))}ngOnDestroy(){this.stopSubscriptions()}stopSubscriptions(){for(let e of this.serviceSubscriptions)e.unsubscribe();this.serviceSubscriptions=[],this.backend.cancelPendingRequests([this.httpRequestsRefID])}get sortfield(){return this.sort.sortfield}set sortfield(e){this.sort.sortfield==e?this.sort.sortdirection="ASC"==this.sort.sortdirection?"DESC":"ASC":(this.sort.sortfield=e,this.sort.sortdirection="ASC"),this.getData()}get _linkName(){return""!=this.linkName?this.linkName:this.relatedModule.toLowerCase()}get sortBySequencefield(){return this.sequencefield&&!this.modulefilter&&!this.sort.sortfield}handleMessage(e){if(-1!==e.messagetype.indexOf("model")&&e.messagedata.module===this.relatedModule)switch(e.messagetype){case"model.delete":this.items.some(((t,s)=>{if(t.id===e.messagedata.id)return this.items.splice(s,1),this.count--,!0}));break;case"model.save":let t=!1;for(let s of this.items)if(s.id===e.messagedata.id){for(let t in s)s.hasOwnProperty(t)&&e.messagedata.data.hasOwnProperty(t)&&(s[t]=e.messagedata.data[t]);t=!0,this.sortItems()}!t||this.modulefilter?this.getData(!0):this.sortItems();break;case"relatedmodels.reload":this.getData(!0)}}getLastLoadTime(){return this.lastLoad.format("HH:mm")}getData(e=!1){let t=new i.x;if(!1===this.metadata.checkModuleAcl(this.relatedModule,"list")&&!1===this.metadata.checkModuleAcl(this.relatedModule,"listrelated"))return(0,n.of)(!1);e||(this.resetData(),this.isloading=!0);let s={module:this.relatedModule,getcount:!0,offset:this.offset,limit:this.loaditems,fieldfilters:this.fieldfilters,searchterm:this.searchTerm};this.modulefilter&&(s.modulefilter=this.modulefilter),this.sort.sortfield&&(s.sort=JSON.stringify(this.sort));let l=`module/${this.module}/${this.id}/`+(this.linkEndPoint?this.linkEndPoint:`related/${this._linkName}`);return this.backend.getRequest(l,s,this.httpRequestsRefID).subscribe({next:e=>{this.items=[],this.count=parseInt(e.count,10);for(let t in e.list)e.list.hasOwnProperty(t)&&(e.list[t].relid=t,e.list[t]=this.modelutilities.backendModel2spice(this.relatedModule,e.list[t]),this.items.push(e.list[t]));this.isloading=!1,this.sortItems(),this.lastLoad=new moment,t.next(!0),t.complete()},error:()=>{this.isloading=!1}}),t.asObservable()}get canloadmore(){return!this.isloading&&this.count&&this.count-this.items.length>0}getMoreData(e=5){if(!1===this.metadata.checkModuleAcl(this.relatedModule,"list"))return(0,n.of)(!0);this.isloading=!0;let t={module:this.relatedModule,getcount:!0,offset:this.items.length,limit:this.items.length+e};this.modulefilter&&(t.modulefilter=this.modulefilter),this.sort.sortfield&&(t.sort=JSON.stringify(this.sort));let s=new i.x,l=`module/${this.module}/${this.id}/`+(this.linkEndPoint?this.linkEndPoint:`related/${this._linkName}`);return this.backend.getRequest(l,t,this.httpRequestsRefID).subscribe((e=>{this.count=parseInt(e.count,10);for(let t in e.list)e.list.hasOwnProperty(t)&&(e.list[t].relid=t,e.list[t]=this.modelutilities.backendModel2spice(this.relatedModule,e.list[t]),this.items.push(e.list[t]));this.sortItems(),this.lastLoad=new moment,this.isloading=!1,s.next(!0),s.complete()})),s.asObservable()}sortItems(){let e,t;this.sort.sortfield?(e=this.sort.sortfield,t=this.sort.sortdirection):this.sortBySequencefield&&(e=this.sequencefield,t="ASC"),e&&this.items.sort(((s,i)=>{let n;return n=isNaN(parseInt(s[e],10))||isNaN(parseInt(i[e],10))?s[e]>i[e]?1:-1:parseInt(s[e],10)>parseInt(i[e],10)?1:-1,"ASC"==t?n:-1*n}))}resetData(){this.items=[]}addItems(e){let t=new i.x;if(this.saveToLinkOnly)return this.model.addRelatedRecords(this._linkName,e),this.items=this.items.concat(e),this.count=this.count+e.length,(0,n.of)(!1);let s=[];for(let t of e)s.push(t.id);return this.backend.postRequest("module/"+this.module+"/"+this.id+"/related/"+this._linkName,[],s,this.httpRequestsRefID).subscribe({next:()=>{for(let t of e){let e=!1;this.items.some((s=>{if(s.id==t.id)return e=!0,!0})),e||(this.items.push(t),this.count++)}t.next(!0),t.complete()},error:()=>{t.error("error adding items")}}),t.asObservable()}setItem(e){if(this.isonlyfiltered)return this.toast.sendToast(this.language.getLabel("LBL_NOT_POSSIBLE_TO_SET"),"error"),(0,n.of)(!0);{let t=new i.x;return this.backend.putRequest("module/"+this.module+"/"+this.id+"/related/"+this._linkName,[],this.modelutilities.spiceModel2backend(this.relatedModule,e),this.httpRequestsRefID).subscribe({next:()=>{t.next(!0),t.complete()},error:e=>{t.error(e),t.complete()}}),t.asObservable()}}updateItems(e){if(this.isonlyfiltered)return this.toast.sendToast(this.language.getLabel("LBL_NOT_POSSIBLE_TO_SET"),"error"),(0,n.of)(!0);{const t=new i.x;return e=e.map((e=>this.modelutilities.spiceModel2backend(this.relatedModule,e))),this.backend.putRequest(`module/${this.module}/${this.id}/related/beans/${this._linkName}`,[],{beans:e},this.httpRequestsRefID).subscribe({next:()=>{t.next(!0),t.complete()},error:e=>{t.error(e),t.complete()}}),t.asObservable()}}deleteItem(e){if(this.isonlyfiltered)this.toast.sendToast(this.language.getLabel("LBL_NOT_POSSIBLE_TO_SET"),"error");else{let t=[];t.push(e);let s={relatedids:t};this.backend.deleteRequest("module/"+this.module+"/"+this.id+"/related/"+this._linkName,s,this.httpRequestsRefID).subscribe((()=>{this.items.some(((t,s)=>{if(t.id==e)return this.items.splice(s,1),this.count--,!0}))}))}}static ɵfac=function(e){return new(e||relatedmodels)(l.LFG(o.Pu),l.LFG(a.y),l.LFG(d.f),l.LFG(r.A),l.LFG(c.A),l.LFG(u.d))};static ɵprov=l.Yz7({token:relatedmodels,factory:relatedmodels.ɵfac})}return relatedmodels})()},72057:(e,t,s)=>{"use strict";s.d(t,{U:()=>c});var i=s(62242),n=s(77579),l=s(14505),o=s(33369),a=s(26625),d=s(75920),r=s(29266);let c=(()=>{class reminder{backend;broadcast;configuration;session;modelutilities;reminders=[];loaded=!1;changed$=new i.vpe;constructor(e,t,s,i,n){this.backend=e,this.broadcast=t,this.configuration=s,this.session=i,this.modelutilities=n,this.broadcast.message$.subscribe((e=>this.handleMessage(e)))}handleMessage(e){switch(e.messagetype){case"loader.completed":if("loadUserDataStep2"==e.messagedata){this.reminders=[];for(let e of this.configuration.getData("reminders"))e.reminder_date=moment.utc(e.reminder_date),this.reminders.push(e);this.loaded=!0,this.changed$.emit(!0)}break;case"model.save":let t=this.reminders.findIndex((t=>t.module_name==e.messagedata.module&&t.item_id==e.messagedata.id));if(t>=0)return this.reminders[t].item_summary=e.messagedata.data.summary_text,this.reminders[t].data=e.messagedata.data,!0}}getReminder(e,t){let s=!1;return this.reminders.some((i=>{if(i.module_name===e&&i.item_id===t)return s=i.reminder_date,!0})),s}getReminders(e){let t=[];for(let s of this.reminders)s.module_name===e&&t.push({item_id:s.item_id,item_summary:s.item_summary});return t}setReminder(e,t){this.backend.postRequest("common/spicereminders/"+e.module+"/"+e.id+"/"+t.format("YYYY-MM-DD")).subscribe((s=>{let i=this.reminders.findIndex((t=>t.item_id==e.id&&t.module_name==e.module));i>=0?(this.reminders[i].reminder_date=t,this.reminders[i].data=e.backendData):this.reminders.splice(0,0,{item_id:e.id,module_name:e.module,item_summary:e.data.summary_text,reminder_date:t,data:e.backendData}),this.changed$.emit(!0)}))}deleteReminder(e,t){let s=new n.x;return this.backend.deleteRequest("common/spicereminders/"+e+"/"+t).subscribe((i=>{this.reminders.some(((s,i)=>{if(s.module_name===e&&s.item_id===t)return this.reminders.splice(i,1),!0})),s.next(!0),s.complete(),this.changed$.emit(!0)})),s.asObservable()}static ɵfac=function(e){return new(e||reminder)(i.LFG(l.y),i.LFG(o.f),i.LFG(a.C),i.LFG(d.n),i.LFG(r.A))};static ɵprov=i.Yz7({token:reminder,factory:reminder.ɵfac,providedIn:"root"})}return reminder})()},75920:(e,t,s)=>{"use strict";s.d(t,{n:()=>a});var i=s(3144),n=s(62242),l=s(12349),o=s(33369);let a=(()=>{class session{logger;broadcast;authData={tenant_wizard_completed:!1,tenant_accepted_legal_notice:!1,sessionId:null,loaded:!1,userId:null,userName:"",email:"",admin:!1,dev:!1,portalOnly:!1,googleToken:"",companycode_id:"",tenant_id:"",tenant_name:"",obtainGDPRconsent:!1,canchangepassword:!1,expiringPasswordValidityDays:!1,user:{}};deviceID;sessionData={};constructor(e,t){this.logger=e,this.broadcast=t,this.logger.setSession(this),this.generateDeviceID()}getRand(){return Math.random()}S4(){return(65536*(1+this.getRand())|0).toString(16).substring(1)}generateGuid(){return this.S4()+this.S4()+"-"+this.S4()+"-"+this.S4()+"-"+this.S4()+"-"+this.S4()+this.S4()+this.S4()}generateDeviceID(){const e=localStorage.getItem("Device-ID");e?this.deviceID=e:(this.deviceID=this.generateGuid(),localStorage.setItem("Device-ID",this.deviceID))}loadFromStorage(){this.authData.sessionId=sessionStorage.getItem("OAuth-Token")??localStorage.getItem("OAuth-Token")}storeToken(e){e?localStorage.setItem("OAuth-Token",this.authData.sessionId):sessionStorage.setItem("OAuth-Token",this.authData.sessionId)}getSessionHeader(){let e=new i.WM;return e=e.set("OAuth-Token",this.authData.sessionId),e=e.set("OAuth-Issuer","SpiceCRM"),e}setSessionData(e,t,s=!0){this.sessionData[e]=t,s&&sessionStorage.setItem(window.btoa(e+this.authData.sessionId),window.btoa(encodeURIComponent(JSON.stringify(t))))}clearSessionData(e){sessionStorage.removeItem(e)}getSessionData(e,t=!0){if(this.sessionData[e])return this.sessionData[e];try{return JSON.parse(decodeURIComponent(window.atob(sessionStorage.getItem(window.btoa(e+this.authData.sessionId)))))}catch(e){return!!t&&{}}}existsData(e){try{return sessionStorage[window.btoa(e+this.authData.sessionId)]&&sessionStorage[window.btoa(e+this.authData.sessionId)].length>0}catch(e){return!1}}endSession(){this.authData.tenant_id="",this.authData.tenant_name="",this.authData.tenant_accepted_legal_notice=!1,this.authData.tenant_wizard_completed=!1,this.authData.sessionId=null,this.authData.userId=null,this.authData.loaded=!1,this.authData.userName="",this.authData.email="",this.authData.admin=!1,this.authData.dev=!1,this.authData.companycode_id="",this.authData.tenant_id="",this.authData.tenant_name="",this.authData.obtainGDPRconsent=!1,this.authData.canchangepassword=!1,this.authData.expiringPasswordValidityDays=!1,this.authData.user={},this.sessionData={},localStorage.removeItem("OAuth-Token"),sessionStorage.clear()}get isAdmin(){return this.authData.admin}get isDev(){return this.authData.dev}setTimezone(e){this.getSessionData("timezone")!==e&&(this.setSessionData("timezone",e,!1),moment.tz.setDefault(e),this.broadcast.broadcastMessage("timezone.changed",e))}static ɵfac=function(e){return new(e||session)(n.LFG(l.M),n.LFG(o.f))};static ɵprov=n.Yz7({token:session,factory:session.ɵfac,providedIn:"root"})}return session})()},12222:(e,t,s)=>{"use strict";s.d(t,{W:()=>r});var i=s(39646),n=s(77579),l=s(62242),o=s(26625),a=s(33369),d=s(75920);let r=(()=>{class socket{configuration;broadcast;session;socketUrl;socketId;sockets={};constructor(e,t,s){this.configuration=e,this.broadcast=t,this.session=s}socketObject(e){return this.sockets[e]}get connected(){return!_.isEmpty(this.sockets)}disconnect(e){this.sockets[e]&&(this.sockets[e].instance.disconnect(),this.sockets[e].instance.destroy(),delete this.sockets[e])}initializeNamespace(e){return this.sockets[e]?this.sockets[e].event$:(this.setSocketData(),this.socketUrl&&this.socketId?(this.sockets[e]=this.initializeSocket(e),this.sockets[e].event$):(0,i.of)({type:null,data:null}))}joinRoom(e,t){e&&t&&this.sockets[e]&&(t in this.sockets[e].rooms?this.sockets[e].rooms[t]++:(this.sockets[e].instance.emit("join:room",t),this.sockets[e].rooms[t]=1))}leaveRoom(e,t){e&&t&&this.sockets[e]&&this.sockets[e].rooms[t]&&(this.sockets[e].rooms[t]--,this.sockets[e].rooms[t]<1&&(this.sockets[e].instance.emit("leave:room",t),delete this.sockets[e].rooms[t]))}setSocketData(){let e=this.configuration.getCapabilityConfig("socket");this.socketUrl=e.socket_frontend,this.socketId=e.socket_id}initializeSocket(e){const t=new n.x,s=e?`/ns-${e}`:"/",i=io(this.socketUrl+s,{query:{token:this.session.authData.sessionId,sysId:this.socketId}});return i.on("connect",(()=>this.handleConnectEvent(e,t))),i.onAny(((e,s)=>{s.token!=this.session.authData.sessionId&&this.handleCustomEvent(t,e,s.data)})),{instance:i,isConnected:()=>i.connected,event$:t.asObservable(),rooms:{}}}handleConnectEvent(e,t){this.sockets[e]?.rooms&&Object.keys(this.sockets[e].rooms).forEach((t=>{this.sockets[e].rooms[t]<1||this.sockets[e].instance.emit("join:room",t)}))}handleCustomEvent(e,t,s){e.next({type:t,data:s})}static ɵfac=function(e){return new(e||socket)(l.LFG(o.C),l.LFG(a.f),l.LFG(d.n))};static ɵprov=l.Yz7({token:socket,factory:socket.ɵfac,providedIn:"root"})}return socket})()},9086:(e,t,s)=>{"use strict";s.d(t,{d:()=>o});var i=s(62843),n=s(77579),l=s(62242);let o=(()=>{class StoreService{databases={};openDB(e){return new Promise(((t,s)=>{indexedDB||s("IndexedDB not available");const i=indexedDB.open(e,2);i.onsuccess=()=>{this.databases[e]=i.result,t({event:"success",db:i.result})},i.onerror=()=>{s(`IndexedDB error: ${i.error}`)},i.onupgradeneeded=()=>{this.databases[e]=i.result,t({event:"upgrade",db:i.result})}}))}initializeStores(e,t,s){return new Promise((i=>{if(this.databases[e])return t.forEach((t=>this.databases[e].createObjectStore(t,{keyPath:"id"}))),void i(!0);this.openDB(e).then((e=>{"upgrade"==e.event&&t.forEach((t=>e.db.createObjectStore(t,{keyPath:s}))),i(!0)}))}))}readStore(e,t,s){if(!this.databases[e]){const e=indexedDB?"Database with the given name does not exist":"no indexedDB Support";return(0,i._)((()=>new Error(e)))}const l=new n.x,o=this.databases[e].transaction([t],"readwrite").objectStore(t).get(s);return o.onerror=()=>l.error(!1),o.onsuccess=e=>{const t=e.target.result?.data;t?(l.next(t),l.complete()):l.error(!1)},l.asObservable()}readStoreAll(e,t){return new Promise(((s,i)=>{if(!this.databases[e])return i("no indexedDB Support");const n=this.databases[e].transaction([t],"readwrite").objectStore(t).getAll();n.onerror=()=>i(),n.onsuccess=e=>{const t=e.target.result;t?.length>0?s(t):i()}}))}writeStore(e,t,s){this.databases[e]&&this.databases[e].transaction([t],"readwrite").objectStore(t).put(s)}clearDB(e,t){if(!this.databases[e])return;const s=this.databases[e].transaction(t,"readwrite");t.forEach((e=>{s.objectStore(e).clear()}))}static ɵfac=function(e){return new(e||StoreService)};static ɵprov=l.Yz7({token:StoreService,factory:StoreService.ɵfac,providedIn:"root"})}return StoreService})()},32355:(e,t,s)=>{"use strict";s.d(t,{J:()=>m});var i=s(77579),n=s(62242),l=s(14505),o=s(33369),a=s(26625),d=s(13278),r=s(75920),c=s(4154),u=s(55329);let m=(()=>{class subscription{backend;broadcast;configuration;toast;session;metadata;language;_subscriptions={};auditedModules;constructor(e,t,s,i,n,l,o){this.backend=e,this.broadcast=t,this.configuration=s,this.toast=i,this.session=n,this.metadata=l,this.language=o,this.loadSubscriptions()}get subscriptions(){return Object.keys(this._subscriptions).map((e=>this._subscriptions[e]))}hasSubscription(e){return this._subscriptions?.[e]}subscribeBean(e){let t=new i.x;return this.backend.postRequest(`common/SpiceSubscriptions/${e.module}/${e.id}`).subscribe((()=>{this._subscriptions[e.id]={bean_id:e.id,bean_module:e.module,user_id:this.session.authData.userId,data:e.backendData},t.next(!0),t.complete()}),(()=>{this.toast.sendToast(this.language.getLabel("MSG_FAILED_TO_SUBSCRIBE"),"error"),t.error("subscribe failed"),t.complete()})),t.asObservable()}unsubscribeBean(e,t){let s=new i.x;return this.backend.deleteRequest(`common/SpiceSubscriptions/${t}/${e}`).subscribe((()=>{delete this._subscriptions[e],s.next(!0),s.complete()}),(()=>{this.toast.sendToast(this.language.getLabel("MSG_FAILED_TO_UNSUBSCRIBE"),"error"),s.error("subscribe failed"),s.complete()})),s.asObservable()}loadSubscriptions(){this._subscriptions=this.configuration.getData("spicesubscriptions"),this.broadcast.message$.subscribe((e=>{"loader.completed"===e.messagetype&&"loadUserData"===e.messagedata&&(this._subscriptions=this.configuration.getData("spicesubscriptions"))}))}static ɵfac=function(e){return new(e||subscription)(n.LFG(l.y),n.LFG(o.f),n.LFG(a.C),n.LFG(d.A),n.LFG(r.n),n.LFG(c.Pu),n.LFG(u.d))};static ɵprov=n.Yz7({token:subscription,factory:subscription.ɵfac,providedIn:"root"})}return subscription})()},92251:(e,t,s)=>{"use strict";s.d(t,{n:()=>l});var i=s(62242),n=s(33369);let l=(()=>{class telephony{broadcast;isActive=!1;calls=[];initiateCall$=new i.vpe;terminateCall$=new i.vpe;actions={hangup:!1,transfer:!1};constructor(e){this.broadcast=e,this.broadcast.message$.subscribe((e=>this.handleLogout(e)))}handleLogout(e){"logout"==e.messagetype&&(this.calls=[],this.isActive=!1)}initiateCall(e,t){this.initiateCall$.emit({msisdn:e,relatedid:t.relatedid,relatedmodule:t.relatedmodule,relateddata:t.relateddata})}terminateCall(e){let t=this.calls.find((t=>t.id==e||t.callid==e));t&&this.terminateCall$.emit(t)}removeCallById(e){let t=this.calls.findIndex((t=>t.id==e||t.callid==e));t>=0&&this.calls.splice(t,1)}static ɵfac=function(e){return new(e||telephony)(i.LFG(n.f))};static ɵprov=i.Yz7({token:telephony,factory:telephony.ɵfac,providedIn:"root"})}return telephony})()},13278:(e,t,s)=>{"use strict";s.d(t,{A:()=>l});var i=s(62242),n=s(29266);let l=(()=>{class toast{modelutilities;appref;activeToasts=[];constructor(e,t){this.modelutilities=e,this.appref=t}sendToast(e,t="default",s="",i=!0,n){return this.addToast(e,"toast",t,s,i,n)}sendAlert(e,t="default",s="",i=!0,n){return this.addToast(e,"alert",t,s,i,n)}addToast(e,t="toast",s="default",i="",n=!0,l){if(l&&this.activeToasts.filter((e=>e.code==l)).length>0)return"";"error"===s&&(n=!1),!0===n&&(n=5);let o=this.modelutilities.generateGuid();return this.activeToasts.push({id:o,type:s,theme:t,text:e,description:i,code:l}),this.appref.tick(),n&&window.setTimeout((()=>this.clearToast(o)),1e3*n),o}clearToast(e){e&&this.activeToasts.some(((t,s)=>{if(t.id===e)return this.activeToasts.splice(s,1),this.appref.tick(),!0}))}clearAll(){this.activeToasts=[],this.appref.tick()}static ɵfac=function(e){return new(e||toast)(i.LFG(n.A),i.LFG(i.z2F))};static ɵprov=i.Yz7({token:toast,factory:toast.ɵfac,providedIn:"root"})}return toast})()},62422:(e,t,s)=>{"use strict";s.d(t,{z:()=>h});var i=s(62242),n=s(39646),l=s(77579),o=s(14505),a=s(13278),d=s(26625),r=s(55329),c=s(33369),u=s(44044),m=s(75920),g=s(4154);let h=(()=>{class userpreferences{backend;toast;configuration;language;broadcast;modalservice;session;metadata;preferences={global:{}};toUse;unchangedPreferences={global:{}};preferencesComplete=!0;defaults={calendar_day_start_hour:"7",calendar_day_end_hour:"22",currency:-99,datef:"m/d/Y",currency_significant_digits:2,export_charset:"UTF-8",locale_name_format:"s f l",dec_sep:".",distance_unit_system:"METRIC",export_delimiter:",",help_icon:"visible",home_assistant:"visible",num_grp_sep:",",reminder_time:-1,timef:"H:i",timezone:"Europe/Vienna",week_day_start:0,week_days_count:5};formats={nameFormats:[],loaded:!1};preferences$=new i.vpe;constructor(e,t,s,i,n,l,o,a){this.backend=e,this.toast=t,this.configuration=s,this.language=i,this.broadcast=n,this.modalservice=l,this.session=o,this.metadata=a,this.toUse=this.preferences.global,this.broadcast.message$.subscribe((e=>{"loader.completed"===e.messagetype&&"loadUserData"===e.messagedata&&this.retrievePrefsFromConfigService()}))}retrievePrefsFromConfigService(){let e=this.configuration.getData("globaluserpreferences").global;if(this.preferences.global=_.extendOwn(this.preferences.global,e),this.unchangedPreferences.global=_.clone(e),this.defaults=_.extendOwn(this.defaults,this.configuration.getData("defaultuserpreferences")),!this.unchangedPreferences.global.timezone){let e=moment.tz.guess();this.setPreference("timezone",e,!0).subscribe((t=>{this.toast.sendToast(this.language.getLabel("LBL_TIMEZONE_WAS_SET_TO")+": "+t.timezone,"success",null,10),this.session.setTimezone(e)}))}this.completePreferencesWithDefaults(),this.session.setTimezone(this.toUse.timezone),this.preferences.global.userrole&&this.metadata.setActiveRole(this.preferences.global.userrole)}getPreferences(e){this.loadPreferences().subscribe((t=>{e.next("getPreferences")}))}loadPreferences(e="global"){return(0,n.of)(this.configuration.getData("globaluserpreferences")[e])}completePreferencesWithDefaults(){let e=!1;_.each(this.defaults,((t,s)=>{"string"==typeof this.preferences.global[s]?this.preferences.global[s]||(this.preferences.global[s]=t,e=!0):void 0!==this.preferences.global[s]&&null!==this.preferences.global[s]||(this.preferences.global[s]=t,e=!0)})),this.preferencesComplete=!e}getPreference(e,t="global"){try{return this.preferences[t][e]}catch(e){return!1}}setPreference(e,t,s=!0,i="global"){if(s){let s={};s[e]=t;const n=new l.x;return this.backend.postRequest("module/Users/"+this.session.authData.userId+"/preferences/"+i,{},s).subscribe((l=>{this.preferences[i]||(this.preferences[i]={}),this.preferences[i][e]=t,this.configuration.setData("globaluserpreferences",this.preferences),this.unchangedPreferences[i]||(this.unchangedPreferences[i]={}),this.unchangedPreferences[i][e]=t,this.completePreferencesWithDefaults(),"global"===i&&"timezone"===e&&this.session.setTimezone(this.toUse.timezone),n.next(l),this.preferences$.emit(s)}),(e=>{n.error(e)})),n}return this.preferences[i]||(this.preferences[i]={}),this.preferences[i][e]=t,this.completePreferencesWithDefaults(),"global"===i&&"timezone"===e&&this.session.setTimezone(this.toUse.timezone),null}setPreferences(e,t="global"){const s=new l.x;return this.backend.postRequest("module/Users/"+this.session.authData.userId+"/preferences/"+t,{},e).subscribe((i=>{for(let e in this.preferences[t])i.hasOwnProperty(e)?this.preferences[t][e]=i[e]:delete this.preferences[t][e];this.configuration.setData("globaluserpreferences",this.preferences),this.unchangedPreferences[t]=i,this.completePreferencesWithDefaults(),this.session.setTimezone(this.toUse.timezone),s.next(!0),this.preferences$.emit(e)}),(e=>{s.error(e)})),s}getDateFormat(){if(this.toUse.datef){let e=this.toUse.datef;return this.jsDateFormat2momentDateFormat(e)}return"YYYY-MM-DD"}jsDateFormat2momentDateFormat(e){return e.replace("Y","YYYY").replace("m","MM").replace("d","DD")}getTimeFormat(){if(this.toUse.timef){let e=this.toUse.timef;return this.jsTimeFormat2momentTimeFormat(e)}return"hh:mm"}jsTimeFormat2momentTimeFormat(e){return e.replace("H","HH").replace("h","hh").replace("i","mm")}needFormats(){this.formats.loaded||this.loadFormats()}loadFormats(){let e=new l.x;return this.formats.nameFormats.length=0,this.formats.loaded=!1,this.backend.getRequest("module/Users/preferencesformats").subscribe((t=>{if(Array.isArray(t.nameFormats))for(let e of t.nameFormats)this.formats.nameFormats.push({name:e,example:this.translateNameFormat(e)});this.formats.loaded=!0,e.next(!0)})),e.asObservable()}translateNameFormat(e){let t="";for(let s=0;s<e.length;s++)switch(e.charAt(s)){case"t":t+=this.language.getLabel("LBL_LOCALE_NAME_EXAMPLE_TITLE");break;case"f":t+=this.language.getLabel("LBL_LOCALE_NAME_EXAMPLE_FIRST");break;case"l":t+=this.language.getLabel("LBL_LOCALE_NAME_EXAMPLE_LAST");break;case"s":t+=this.language.getLabel("LBL_LOCALE_NAME_EXAMPLE_SALUTATION");break;default:t+=e.charAt(s)}return t}formatMoney(e,t=this.toUse.currency_significant_digits,s=3,i=this.toUse.num_grp_sep,n=this.toUse.dec_sep){let l="\\d(?=(\\d{"+s+"})+"+(t>0?"\\D":"$")+")";return e.toFixed(Math.max(0,~~t)).replace(".",n).replace(new RegExp(l,"g"),"$&"+i)}formatDate(e){if(moment.isMoment(e))return e.format(this.getDateFormat());let t=moment(e);return t.isValid()?t.format(this.getDateFormat()):e}formatDateTime(e){return moment.isMoment(e)?e.format(this.getDateFormat())+" "+e.format(this.getTimeFormat()):moment.utc(e).format(this.getDateFormat())+" "+moment.utc(e).format(this.getTimeFormat())}getPossibleDateFormats(){return[{name:moment().format(this.jsDateFormat2momentDateFormat("Y-m-d")),value:"Y-m-d"},{name:moment().format(this.jsDateFormat2momentDateFormat("m-d-Y")),value:"m-d-Y"},{name:moment().format(this.jsDateFormat2momentDateFormat("d-m-Y")),value:"d-m-Y"},{name:moment().format(this.jsDateFormat2momentDateFormat("Y/m/d")),value:"Y/m/d"},{name:moment().format(this.jsDateFormat2momentDateFormat("m/d/Y")),value:"m/d/Y"},{name:moment().format(this.jsDateFormat2momentDateFormat("d/m/Y")),value:"d/m/Y"},{name:moment().format(this.jsDateFormat2momentDateFormat("Y.m.d")),value:"Y.m.d"},{name:moment().format(this.jsDateFormat2momentDateFormat("d.m.Y")),value:"d.m.Y"},{name:moment().format(this.jsDateFormat2momentDateFormat("m.d.Y")),value:"m.d.Y"}]}getPossibleTimeFormats(){return[{name:moment().format(this.jsTimeFormat2momentTimeFormat("H:i")),value:"H:i"},{name:moment().format(this.jsTimeFormat2momentTimeFormat("h:ia")),value:"h:ia"},{name:moment().format(this.jsTimeFormat2momentTimeFormat("h:iA")),value:"h:iA"},{name:moment().format(this.jsTimeFormat2momentTimeFormat("h:i a")),value:"h:i a"},{name:moment().format(this.jsTimeFormat2momentTimeFormat("h:i A")),value:"h:i A"},{name:moment().format(this.jsTimeFormat2momentTimeFormat("H.i")),value:"H.i"},{name:moment().format(this.jsTimeFormat2momentTimeFormat("h.ia")),value:"h.ia"},{name:moment().format(this.jsTimeFormat2momentTimeFormat("h.iA")),value:"h.iA"},{name:moment().format(this.jsTimeFormat2momentTimeFormat("h.i a")),value:"h.i a"},{name:moment().format(this.jsTimeFormat2momentTimeFormat("h.i A")),value:"h.i A"}]}get companyCodeId(){return this.session.authData.companycode_id}static ɵfac=function(e){return new(e||userpreferences)(i.LFG(o.y),i.LFG(a.A),i.LFG(d.C),i.LFG(r.d),i.LFG(c.f),i.LFG(u.o),i.LFG(m.n),i.LFG(g.Pu))};static ɵprov=i.Yz7({token:userpreferences,factory:userpreferences.ɵfac,providedIn:"root"})}return userpreferences})()},32294:(e,t,s)=>{"use strict";s.d(t,{e:()=>a});var i=s(61135),n=s(62242),l=s(55710),o=s(26559);let a=(()=>{class view{model;layout;mode="view";mode$;isEditable=!1;displayLinks=!0;displayLabels=!0;editfieldid="";editfieldname="";labels="default";_size="regular";linkedToModel=!1;isLoading=!1;constructor(e,t){this.model=e,this.layout=t,this.mode$=new i.X(this.mode),this.model&&this.model.mode$.subscribe((e=>{this.linkedToModel&&"display"==e&&this.setViewMode()}))}set size(e){this._size=e}get size(){return"small"==this.layout.screenwidth?"small":this._size}getMode(){return this.mode}isEditMode(){return"edit"===this.mode}setEditMode(e=""){this.mode="edit",this.editfieldid=e,this.mode$.next(this.mode)}setViewMode(){this.mode="view",this.mode$.next(this.mode)}static ɵfac=function(e){return new(e||view)(n.LFG(l.o,8),n.LFG(o.b))};static ɵprov=n.Yz7({token:view,factory:view.ɵfac})}return view})()},93101:(e,t,s)=>{"use strict";var i=s(66550),n=s(4275),l=s(53629),o=s(62242),a=s(95030),d=s(83348),r=s(3144),c=s(44755),u=s(57239),m=s(34826),g=s(19784),h=s(5289),p=s(90512),f=s(30048),b=s(82956),_=s(64461),v=s(8070),y=s(30661);moment.defaultFormat="YYYY-MM-DD HH:mm:ss";const x=document.querySelector('meta[name="bootstrap"]')?.content;let w=(()=>{class SpiceUI{render;globalHeader;constructor(e){this.render=e,this.render.listen("window","dragover",(e=>{e.preventDefault(),e.dataTransfer.effectAllowed="none",e.dataTransfer.dropEffect="none"})),this.render.listen("window","drop",(e=>{e.preventDefault()}))}get outletstyle(){const e=this.globalHeader?this.globalHeader.headerHeight:0;return{"margin-top":e+"px",height:`calc(100vh - ${e}px)`}}static ɵfac=function(e){return new(e||SpiceUI)(o.Y36(o.Qsj))};static ɵcmp=o.Xpm({type:SpiceUI,selectors:[["spicecrm"]],viewQuery:function(e,t){if(1&e&&o.Gf(f.e,5),2&e){let e;o.iGM(e=o.CRH())&&(t.globalHeader=e.first)}},decls:5,vars:1,consts:[[3,"ngStyle"]],template:function(e,t){1&e&&(o._UZ(0,"global-header"),o.TgZ(1,"div",0),o._UZ(2,"router-outlet")(3,"system-navigation-manager"),o.qZA(),o._UZ(4,"global-footer")),2&e&&(o.xp6(1),o.Q6J("ngStyle",t.outletstyle))},dependencies:[c.PC,v.M,f.e,y.T,d.lC],encapsulation:2})}return SpiceUI})(),Z=(()=>{class SpiceUIModule{ngDoBootstrap(e){let t=w;e.bootstrap(t)}static ɵfac=function(e){return new(e||SpiceUIModule)};static ɵmod=o.oAB({type:SpiceUIModule});static ɵinj=o.cJS({providers:[{provide:c.S$,useClass:c.Do},i.Dx],imports:[i.b2,n.PW,r.JF,a.u5,u.SystemComponents,m.GlobalComponents,g.ObjectComponents,b.SpiceInstallerModule,d.Bz.forRoot([{path:"login",component:h.s},{path:"",redirectTo:"/module/Home",pathMatch:"full"},{path:"**",component:p.Y,canActivate:[_.q]}])]})}return SpiceUIModule})();("undefined"==typeof ngJitMode||ngJitMode)&&o.kYT(Z,{declarations:[w],imports:[i.b2,n.PW,r.JF,a.u5,u.SystemComponents,m.GlobalComponents,g.ObjectComponents,b.SpiceInstallerModule,d.Bz]}),l.N.production&&((0,o.G48)(),console.log("production mode enabled")),document.documentMode?(document.getElementsByClassName("loaderspinner")[0].setAttribute("style","display:none"),document.getElementById("loadstatus").innerHTML="",document.getElementById("loadermessage").innerHTML="Internet Explorer is not supported. Please use a supported Browser like Chrome, Safari, Edge, etc."):(document.getElementById("loadstatus").innerHTML="...preparing..","outlook"==x?window.Office.onReady().then((()=>{i.q6().bootstrapModule(Z).catch((e=>console.error(e)))})):i.q6().bootstrapModule(Z).catch((e=>console.error(e)))),window.name="SpiceCRM",(()=>{if(window.hasOwnProperty("BroadcastChannel")){let e=new BroadcastChannel("spiceCRM_channel");e.onmessage=t=>{t.data.url&&t.data.url.startsWith(window.location.origin+window.location.pathname)&&(window.location=t.data.url,e.postMessage({urlReceived:!0}))}}})()},76010:(e,t,s)=>{"use strict";s.d(t,{L:()=>u,s:()=>m});var i=s(62242),n=s(44755),l=s(74610),o=s(72656),a=s(83463);function d(e,t){if(1&e&&(i.ynx(0),i._uU(1),i._UZ(2,"system-label",11),i._uU(3," "),i.BQk()),2&e){const e=i.oxw(2);i.xp6(1),i.hij("",e.page," ")}}function r(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"div",3)(1,"span",4)(2,"button",5),i.NdJ("click",(function(){i.CHM(e);const t=i.oxw();return i.KtG(t.page=1)})),i._UZ(3,"system-button-custom-icon",6),i.qZA(),i.TgZ(4,"button",7),i.NdJ("click",(function(){i.CHM(e);const t=i.oxw();return i.KtG(t.pageDown())})),i._UZ(5,"system-button-icon",8),i.qZA()(),i.TgZ(6,"span"),i.YNc(7,d,4,1,"ng-container",9),i._uU(8),i._UZ(9,"system-label",10),i._uU(10),i._UZ(11,"system-label",11),i._uU(12),i._UZ(13,"system-label",12),i._uU(14,")"),i.qZA(),i.TgZ(15,"span",13)(16,"button",14),i.NdJ("click",(function(){i.CHM(e);const t=i.oxw();return i.KtG(t.pageUp())})),i._UZ(17,"system-button-icon",8),i.qZA(),i.TgZ(18,"button",5),i.NdJ("click",(function(){i.CHM(e);const t=i.oxw();return i.KtG(t.page=t.max_page)})),i._UZ(19,"system-button-custom-icon",15),i.qZA()()()}if(2&e){const e=i.oxw();i.xp6(2),i.Q6J("disabled",!e.canSwitch||e.page<2),i.xp6(1),i.Q6J("icon","chevrondoubleleft"),i.xp6(1),i.Q6J("disabled",!e.canSwitch||e.page<=1),i.xp6(1),i.Q6J("icon","chevronleft"),i.xp6(2),i.Q6J("ngIf",e.page),i.xp6(1),i.hij("",e.max_page," "),i.xp6(2),i.hij(" (",e.range," "),i.xp6(2),i.hij(" ",e.total_records," "),i.xp6(4),i.Q6J("disabled",!e.canSwitch||e.page>=e.max_page),i.xp6(1),i.Q6J("icon","chevronright"),i.xp6(1),i.Q6J("disabled",!e.canSwitch||e.page>=e.max_page-1),i.xp6(1),i.Q6J("icon","chevrondoubleright")}}function c(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"div",3)(1,"button",5),i.NdJ("click",(function(){i.CHM(e);const t=i.oxw();return i.KtG(t.pageDown())})),i._UZ(2,"system-button-icon",16),i.qZA(),i.TgZ(3,"div",17),i._uU(4),i._UZ(5,"system-label",11),i._uU(6),i._UZ(7,"system-label",10),i.qZA(),i.TgZ(8,"button",5),i.NdJ("click",(function(){i.CHM(e);const t=i.oxw();return i.KtG(t.pageUp())})),i._UZ(9,"system-button-icon",18),i.qZA()()}if(2&e){const e=i.oxw();i.xp6(1),i.Q6J("disabled",e.page<=1),i.xp6(1),i.Q6J("icon","chevronleft"),i.xp6(2),i.hij("",e.page," "),i.xp6(2),i.hij(" ",e.max_page," "),i.xp6(2),i.Q6J("disabled",e.page>=e.max_page),i.xp6(1),i.Q6J("icon","chevronright")}}let u=(()=>{class PaginationControlsComponent{_page=1;limit=1;total_records=0;variation="default";page$=new i.vpe;oldPage$=new i.vpe;canSwitch=!0;offset=0;max_page=0;range="0 - 0";get page(){return this._page}set page(e){this._page!==e&&(this.oldPage$.emit(this._page),this._page=e,this.page$.emit(this._page))}ngOnChanges(){this.total_records>0?this.max_page=Math.ceil(this.total_records/this.limit):this.max_page=0;const e=this._page*this.limit;this.range=`${e-this.limit} - ${e>this.total_records?this.total_records:e}`}pageUp(){if(!this.canSwitch||this.page>=this.max_page)return!1;this.page+=1}pageDown(){if(!this.canSwitch||this.page<=1)return!1;this.page-=1}static ɵfac=function(e){return new(e||PaginationControlsComponent)};static ɵcmp=i.Xpm({type:PaginationControlsComponent,selectors:[["pagination-controls"]],inputs:{_page:["page","_page"],limit:"limit",total_records:"total_records",variation:"variation",canSwitch:"canSwitch"},outputs:{page$:"pageChange",oldPage$:"leftPage"},features:[i.TTD],decls:3,vars:2,consts:[[1,"slds-grid_align-center",3,"ngSwitch"],["class","slds-grid slds-grid--vertical-align-center",4,"ngSwitchDefault"],["class","slds-grid slds-grid--vertical-align-center",4,"ngSwitchCase"],[1,"slds-grid","slds-grid--vertical-align-center"],[1,"slds-m-right--x-small"],[1,"slds-button","slds-button_icon","slds-button--icon-small",3,"disabled","click"],["title","go to first page",3,"icon"],["title","go to previous page",1,"slds-button","slds-button_icon","slds-button--icon-small",3,"disabled","click"],[3,"icon"],[4,"ngIf"],["label","LBL_PAGES"],["label","LBL_OF"],["label","LBL_RECORDS"],[1,"slds-m-left--x-small"],["title","go to next page",1,"slds-button","slds-button_icon","slds-button--icon-small",3,"disabled","click"],["title","go to last page",3,"icon"],["title","go to previous page",3,"icon"],[1,"slds-p-horizontal--x-small"],["title","go to next page",3,"icon"]],template:function(e,t){1&e&&(i.TgZ(0,"div",0),i.YNc(1,r,20,12,"div",1),i.YNc(2,c,10,6,"div",2),i.qZA()),2&e&&(i.Q6J("ngSwitch",t.variation),i.xp6(2),i.Q6J("ngSwitchCase","short"))},dependencies:[n.O5,n.RF,n.n9,n.ED,l.O,o.J,a._],encapsulation:2})}return PaginationControlsComponent})(),m=(()=>{class PaginationPipe{transform(e,t){let s=(t.page-1)*t.limit,i=s+t.limit;return e.slice(s,i)}static ɵfac=function(e){return new(e||PaginationPipe)};static ɵpipe=i.Yjl({name:"paginate",type:PaginationPipe,pure:!1})}return PaginationPipe})()},74994:(e,t,s)=>{"use strict";s.d(t,{g:()=>o});var i=s(62242),n=s(4154),l=s(44755);let o=(()=>{class SystemActionIcon{metadata;icon="";size="";title=void 0;constructor(e){this.metadata=e}get svgHRef(){return"./vendor/sldassets/icons/action-sprite/svg/symbols.svg#"+this.icon}get iconClass(){return this.icon?"slds-icon-action-"+this.icon.replace("_","-"):""}get sizeClass(){return"slds-icon--"+this.size}static ɵfac=function(e){return new(e||SystemActionIcon)(i.Y36(n.Pu))};static ɵcmp=i.Xpm({type:SystemActionIcon,selectors:[["system-action-icon"]],inputs:{icon:"icon",size:"size",title:"title"},decls:3,vars:3,consts:[[1,"slds-icon_container","slds-icon-action-change-record-type","slds-icon_container--circle",3,"ngClass"],["aria-hidden","true",1,"slds-icon",3,"ngClass"]],template:function(e,t){1&e&&(i.TgZ(0,"span",0),i.O4$(),i.TgZ(1,"svg",1),i._UZ(2,"use"),i.qZA()()),2&e&&(i.Q6J("ngClass",t.iconClass),i.xp6(1),i.Q6J("ngClass",t.sizeClass),i.xp6(1),i.uIk("href",t.svgHRef,null,"xlink"))},dependencies:[l.mk],encapsulation:2})}return SystemActionIcon})()},74610:(e,t,s)=>{"use strict";s.d(t,{O:()=>o});var i=s(62242),n=s(4154),l=s(44755);let o=(()=>{class SystemButtonCustomIcon{metadata;icon;size;position;inverse=!1;title="";file="./assets/icons/spicecrm.svg";constructor(e){this.metadata=e}getSvgHRef(){return this.file+"#"+this.icon}getClass(){let e=[];return this.size?e.push("slds-button__icon--"+this.size):e.push("slds-button__icon"),this.position&&e.push("slds-button__icon_"+this.position),this.inverse&&e.push("slds-button_icon-inverse"),e}static ɵfac=function(e){return new(e||SystemButtonCustomIcon)(i.Y36(n.Pu))};static ɵcmp=i.Xpm({type:SystemButtonCustomIcon,selectors:[["system-button-custom-icon"]],inputs:{icon:"icon",size:"size",position:"position",inverse:"inverse",title:"title",file:"file"},decls:4,vars:3,consts:[["aria-hidden","true",1,"slds-button__icon",3,"ngClass"]],template:function(e,t){1&e&&(i.O4$(),i.TgZ(0,"svg",0)(1,"title"),i._uU(2),i.qZA(),i._UZ(3,"use"),i.qZA()),2&e&&(i.Q6J("ngClass",t.getClass()),i.xp6(2),i.Oqu(t.title),i.xp6(1),i.uIk("href",t.getSvgHRef(),null,"xlink"))},dependencies:[l.mk],encapsulation:2})}return SystemButtonCustomIcon})()},72656:(e,t,s)=>{"use strict";s.d(t,{J:()=>o});var i=s(62242),n=s(4154),l=s(44755);let o=(()=>{class SystemButtonIcon{metadata;cdref;icon="";sprite="utility";size="";module="";position="";inverse=!1;title=void 0;addclasses="";constructor(e,t){this.metadata=e,this.cdref=t}ngOnChanges(e){this.cdref.detectChanges()}getSvgHRef(){return"./vendor/sldassets/icons/"+this.getSprite()+"-sprite/svg/symbols.svg#"+this.getIcon()}getIcon(){if(this.icon)return this.icon.indexOf(":")>0?this.icon.split(":")[1]:this.icon;if(this.module&&this.metadata.getModuleIcon(this.module)){let e=this.metadata.getModuleIcon(this.module);return e.indexOf(":")>0?e.split(":")[1]:e}return"empty"}getSprite(){return this.icon&&this.icon.indexOf(":")>0?this.icon.split(":")[0]:this.module&&this.metadata.getModuleIcon(this.module)&&this.metadata.getModuleIcon(this.module).indexOf(":")>0?this.metadata.getModuleIcon(this.module).split(":")[0]:this.module?"standard":this.sprite}getClass(){let e=[];return""!=this.size?e.push("slds-button__icon--"+this.size):e.push("slds-button__icon"),""!=this.position&&e.push("slds-button__icon_"+this.position),this.inverse&&e.push("slds-button_icon-inverse"),this.addclasses?this.addclasses+" "+e:e}static ɵfac=function(e){return new(e||SystemButtonIcon)(i.Y36(n.Pu),i.Y36(i.sBO))};static ɵcmp=i.Xpm({type:SystemButtonIcon,selectors:[["system-button-icon"]],inputs:{icon:"icon",sprite:"sprite",size:"size",module:"module",position:"position",inverse:"inverse",title:"title",addclasses:"addclasses"},features:[i.TTD],decls:4,vars:3,consts:[["aria-hidden","true",1,"slds-button__icon",3,"ngClass"]],template:function(e,t){1&e&&(i.O4$(),i.TgZ(0,"svg",0)(1,"title"),i._uU(2),i.qZA(),i._UZ(3,"use"),i.qZA()),2&e&&(i.Q6J("ngClass",t.getClass()),i.xp6(2),i.Oqu(t.title),i.xp6(1),i.uIk("href",t.getSvgHRef(),null,"xlink"))},dependencies:[l.mk],encapsulation:2,changeDetection:0})}return SystemButtonIcon})()},55399:(e,t,s)=>{"use strict";s.d(t,{x:()=>o});var i=s(62242);const n=[[["system-card-header"]],[["system-card-body"]],[["system-card-footer"]]],l=["system-card-header","system-card-body","system-card-footer"];let o=(()=>{class SystemCard{static ɵfac=function(e){return new(e||SystemCard)};static ɵcmp=i.Xpm({type:SystemCard,selectors:[["system-card"]],ngContentSelectors:l,decls:4,vars:0,consts:[[1,"slds-card","slds-card_boundary"]],template:function(e,t){1&e&&(i.F$t(n),i.TgZ(0,"article",0),i.Hsn(1),i.Hsn(2,1),i.Hsn(3,2),i.qZA())},encapsulation:2})}return SystemCard})()},78807:(e,t,s)=>{"use strict";s.d(t,{I:()=>l});var i=s(62242);const n=["*"];let l=(()=>{class SystemCardBody{static ɵfac=function(e){return new(e||SystemCardBody)};static ɵcmp=i.Xpm({type:SystemCardBody,selectors:[["system-card-body"]],ngContentSelectors:n,decls:2,vars:0,consts:[[1,"slds-card__body","slds-card__body_inner"]],template:function(e,t){1&e&&(i.F$t(),i.TgZ(0,"div",0),i.Hsn(1),i.qZA())},encapsulation:2})}return SystemCardBody})()},72400:(e,t,s)=>{"use strict";s.d(t,{Q:()=>o});var i=s(62242),n=s(44561);const l=["*"];let o=(()=>{class SystemCardHeader{icon;module;cardtitel;static ɵfac=function(e){return new(e||SystemCardHeader)};static ɵcmp=i.Xpm({type:SystemCardHeader,selectors:[["system-card-header"]],inputs:{icon:"icon",module:"module",cardtitel:"cardtitel"},ngContentSelectors:l,decls:10,vars:3,consts:[[1,"slds-card__header","slds-grid"],[1,"slds-media","slds-media_center","slds-has-flexi-truncate"],[1,"slds-media__figure"],[3,"module","icon"],[1,"slds-media__body"],[1,"slds-card__header-title"],[1,"slds-text-heading_small"],[1,"slds-no-flex"]],template:function(e,t){1&e&&(i.F$t(),i.TgZ(0,"div",0)(1,"header",1)(2,"div",2),i._UZ(3,"system-icon",3),i.qZA(),i.TgZ(4,"div",4)(5,"h2",5)(6,"span",6),i._uU(7),i.qZA()()(),i.TgZ(8,"div",7),i.Hsn(9),i.qZA()()()),2&e&&(i.xp6(3),i.Q6J("module",t.module)("icon",t.icon),i.xp6(4),i.hij(" ",t.cardtitel," "))},dependencies:[n.f],encapsulation:2})}return SystemCardHeader})()},20701:(e,t,s)=>{"use strict";s.d(t,{r:()=>a});var i=s(62242),n=s(44561),l=s(12803),o=s(42161);let a=(()=>{class SystemCardStencil{static ɵfac=function(e){return new(e||SystemCardStencil)};static ɵcmp=i.Xpm({type:SystemCardStencil,selectors:[["system-card-stencil"]],decls:23,vars:0,consts:[[1,"slds-card","slds-card_boundary","slds-m-bottom--medium"],[1,"slds-card__header","slds-grid"],[1,"slds-media","slds-media_center","slds-has-flexi-truncate"],[1,"slds-media__figure"],[1,"slds-media__body"],[1,"slds-card__header-title"],[1,"slds-card__header-link","slds-truncate"],[1,"slds-card__body"],["role","grid",1,"slds-table","slds-table_cell-buffer","slds-no-row-hover","slds-table_bordered","slds-table_fixed-layout"],[1,"slds-line-height_reset"],["scope","col",1,""],["system-table-stencils","","rows","3","columns","4"]],template:function(e,t){1&e&&(i.TgZ(0,"div",0)(1,"div",1)(2,"header",2)(3,"div",3),i._UZ(4,"system-icon"),i.qZA(),i.TgZ(5,"div",4)(6,"h2",5)(7,"div",6)(8,"span"),i._UZ(9,"system-stencil"),i.qZA()()()()()(),i.TgZ(10,"div",7)(11,"table",8)(12,"thead")(13,"tr",9)(14,"th",10),i._UZ(15,"system-stencil"),i.qZA(),i.TgZ(16,"th",10),i._UZ(17,"system-stencil"),i.qZA(),i.TgZ(18,"th",10),i._UZ(19,"system-stencil"),i.qZA(),i.TgZ(20,"th",10),i._UZ(21,"system-stencil"),i.qZA()()(),i._UZ(22,"tbody",11),i.qZA()()())},dependencies:[n.f,l.B,o.x],encapsulation:2})}return SystemCardStencil})()},7514:(e,t,s)=>{"use strict";s.d(t,{U:()=>c});var i=s(62242),n=s(95030),l=s(55329),o=s(44755);const a=["inputCheckbox"];function d(e,t){1&e&&(i.TgZ(0,"span",6),i.Hsn(1),i.qZA())}const r=["*"];let c=(()=>{class SystemCheckbox{language;cdRef;inputCheckbox;hidelabel=!1;indeterminate=!1;asinteger=!1;_disabled=!1;set disabled(e){this._disabled=!1!==e}click$=new i.vpe;change$=new i.vpe;id=_.uniqueId();_model_value;_value="1";get value(){return this._value}set value(e){this._value=e}get model_value(){return this.asinteger?1==this._model_value:this._model_value}set model_value(e){let t=this.asinteger?e?1:0:e;t!=this._model_value&&this.onChange(t),this.writeValue(t)}constructor(e,t){this.language=e,this.cdRef=t}ngAfterViewInit(){this.setCheckboxIndeterminate()}ngOnChanges(e){e.indeterminate&&this.setCheckboxIndeterminate()}setCheckboxIndeterminate(){this.inputCheckbox&&(this.inputCheckbox.nativeElement.indeterminate=this.indeterminate)}click(e){if(e.stopPropagation(),this.disabled)return!1;this.onTouched(),this.click$.emit(this.value)}onChange(e){}registerOnChange(e){this.onChange=t=>{e(t)}}onTouched(){}registerOnTouched(e){this.onTouched=e}setDisabledState(e){this.disabled=e}writeValue(e){this._model_value=e,this.cdRef.detectChanges()}static ɵfac=function(e){return new(e||SystemCheckbox)(i.Y36(l.d),i.Y36(i.sBO))};static ɵcmp=i.Xpm({type:SystemCheckbox,selectors:[["system-checkbox"]],viewQuery:function(e,t){if(1&e&&i.Gf(a,5),2&e){let e;i.iGM(e=i.CRH())&&(t.inputCheckbox=e.first)}},inputs:{hidelabel:"hidelabel",indeterminate:"indeterminate",asinteger:"asinteger",disabled:"disabled",value:"value"},outputs:{click$:"click",change$:"change"},features:[i._Bn([{provide:n.JU,useExisting:(0,i.Gpc)((()=>SystemCheckbox)),multi:!0}]),i.TTD],ngContentSelectors:r,decls:6,vars:8,consts:[[1,"slds-checkbox"],["type","checkbox",3,"id","disabled","value","ngModel","click","ngModelChange"],["inputCheckbox",""],[1,"slds-checkbox__label","slds-truncate",3,"for","id"],[1,"slds-checkbox_faux","slds-m-horizontal--xxx-small"],["class","slds-form-element__label slds-p-left--xx-small",4,"ngIf"],[1,"slds-form-element__label","slds-p-left--xx-small"]],template:function(e,t){1&e&&(i.F$t(),i.TgZ(0,"span",0)(1,"input",1,2),i.NdJ("click",(function(e){return t.click(e)}))("ngModelChange",(function(e){return t.model_value=e})),i.qZA(),i.TgZ(3,"label",3),i._UZ(4,"span",4),i.YNc(5,d,2,0,"span",5),i.qZA()()),2&e&&(i.xp6(1),i.MGl("id","checkbox-",t.id,""),i.Q6J("disabled",t._disabled)("value",t.value)("ngModel",t.model_value),i.uIk("aria-labelledby","checkbox-button-label-"+t.id+" check-group-header"),i.xp6(2),i.MGl("for","checkbox-",t.id,"")("id","checkbox-button-label-",t.id,""),i.xp6(2),i.Q6J("ngIf",!t.hidelabel))},dependencies:[o.O5,n.Wl,n.JJ,n.On],encapsulation:2})}return SystemCheckbox})()},69503:(e,t,s)=>{"use strict";s.d(t,{L:()=>o});var i=s(62242),n=s(95030);const l=["*"];let o=(()=>{class SystemCheckboxGroup{cdRef;valueEmitter=new i.vpe;onChange;onTouched;constructor(e){this.cdRef=e}_value=[];get value(){return this._value}set value(e){this.onChange(e),this.writeValue(e)}writeValue(e){e&&!_.isEqual(e,this._value)&&(this._value=_.clone(e),this.cdRef.detectChanges(),this.valueEmitter.emit())}registerOnChange(e){this.onChange=t=>e(t)}registerOnTouched(e){this.onTouched=e}ngAfterViewInit(){this.cdRef.detach()}ngOnDestroy(){this.cdRef.reattach()}static ɵfac=function(e){return new(e||SystemCheckboxGroup)(i.Y36(i.sBO))};static ɵcmp=i.Xpm({type:SystemCheckboxGroup,selectors:[["system-checkbox-group"]],features:[i._Bn([{provide:n.JU,useExisting:(0,i.Gpc)((()=>SystemCheckboxGroup)),multi:!0}])],ngContentSelectors:l,decls:1,vars:0,template:function(e,t){1&e&&(i.F$t(),i.Hsn(0))},encapsulation:2,changeDetection:0})}return SystemCheckboxGroup})()},88658:(e,t,s)=>{"use strict";s.d(t,{m:()=>a});var i=s(62242),n=s(69503),l=s(95030);const o=["*"];let a=(()=>{class SystemCheckboxGroupCheckbox{systemCheckboxGroup;cdRef;id=_.uniqueId("checkbox-group-checkbox-");value;disabled=!1;constructor(e,t){this.systemCheckboxGroup=e,this.cdRef=t,this.systemCheckboxGroup.valueEmitter.subscribe((()=>this.setCheckedValueFromGroup()))}_checked=!1;get checked(){return this._checked}set checked(e){this._checked=e,this.setGroupValue()}ngAfterViewInit(){this.cdRef.detectChanges(),this.cdRef.detach()}ngOnChanges(e){this.setCheckedValueFromGroup()}ngOnDestroy(){this.cdRef.reattach(),this.systemCheckboxGroup.valueEmitter.unsubscribe()}setCheckedValueFromGroup(){this._checked=(this.systemCheckboxGroup.value||[]).indexOf(this.value)>-1,this.cdRef.detectChanges()}setGroupValue(){!this.checked&&this.systemCheckboxGroup.value.indexOf(this.value)>-1?this.systemCheckboxGroup.value=this.systemCheckboxGroup.value.filter((e=>e!=this.value)):this.checked&&-1==this.systemCheckboxGroup.value.indexOf(this.value)&&(this.systemCheckboxGroup.value=[...this.systemCheckboxGroup.value,this.value])}static ɵfac=function(e){return new(e||SystemCheckboxGroupCheckbox)(i.Y36(n.L,1),i.Y36(i.sBO))};static ɵcmp=i.Xpm({type:SystemCheckboxGroupCheckbox,selectors:[["system-checkbox-group-checkbox"]],inputs:{value:"value",disabled:"disabled"},features:[i.TTD],ngContentSelectors:o,decls:6,vars:4,consts:[[1,"slds-checkbox","slds-truncate"],["type","checkbox",3,"id","disabled","ngModel","ngModelChange"],[1,"slds-checkbox__label",3,"for"],[1,"slds-checkbox_faux"],[1,"slds-form-element__label","slds-p-left--x-small"]],template:function(e,t){1&e&&(i.F$t(),i.TgZ(0,"span",0)(1,"input",1),i.NdJ("ngModelChange",(function(e){return t.checked=e})),i.qZA(),i.TgZ(2,"label",2),i._UZ(3,"span",3),i.TgZ(4,"span",4),i.Hsn(5),i.qZA()()()),2&e&&(i.xp6(1),i.Q6J("id",t.id)("disabled",t.disabled)("ngModel",t.checked),i.xp6(1),i.Q6J("for",t.id))},dependencies:[l.Wl,l.JJ,l.On],encapsulation:2,changeDetection:0})}return SystemCheckboxGroupCheckbox})()},20528:(e,t,s)=>{"use strict";s.d(t,{v:()=>o});var i=s(62242),n=s(95030),l=s(83463);let o=(()=>{class SystemCheckboxToggle{cdRef;name;label="";disabled=!1;localValue;onChange;onTouched;constructor(e){this.cdRef=e}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}writeValue(e){this.localValue=e,this.cdRef.detectChanges()}static ɵfac=function(e){return new(e||SystemCheckboxToggle)(i.Y36(i.sBO))};static ɵcmp=i.Xpm({type:SystemCheckboxToggle,selectors:[["system-checkbox-toggle"]],inputs:{name:"name",label:"label",disabled:"disabled"},features:[i._Bn([{provide:n.JU,useExisting:(0,i.Gpc)((()=>SystemCheckboxToggle)),multi:!0}])],decls:7,vars:4,consts:[[1,"slds-form-element"],[1,"slds-checkbox_toggle","slds-grid"],[1,"slds-form-element__label","slds-m-bottom_none","slds-grow"],[3,"label"],["type","checkbox",3,"ngModel","disabled","name","ngModelChange"],["aria-live","assertive",1,"slds-checkbox_faux_container"],[1,"slds-checkbox_faux"]],template:function(e,t){1&e&&(i.TgZ(0,"div",0)(1,"label",1)(2,"span",2),i._UZ(3,"system-label",3),i.qZA(),i.TgZ(4,"input",4),i.NdJ("ngModelChange",(function(e){return t.localValue=e}))("ngModelChange",(function(e){return t.onChange(e)})),i.qZA(),i.TgZ(5,"span",5),i._UZ(6,"span",6),i.qZA()()()),2&e&&(i.xp6(3),i.Q6J("label",t.label),i.xp6(1),i.Q6J("ngModel",t.localValue)("disabled",t.disabled)("name",t.name))},dependencies:[n.Wl,n.JJ,n.On,l._],encapsulation:2,changeDetection:0})}return SystemCheckboxToggle})()},61553:(e,t,s)=>{"use strict";s.d(t,{z:()=>y});var i=s(91591),n=s(62242),l=s(55329),o=s(44755),a=s(44561),d=s(83463),r=s(78859),c=s(98594);function u(e,t){if(1&e&&n._UZ(0,"system-icon",12),2&e){const e=n.oxw(3);n.Q6J("module",e.moduleicon)}}function m(e,t){if(1&e&&n._UZ(0,"system-icon-help-text",13),2&e){const e=n.oxw(3);n.Q6J("helpText",e._helpText)("verticalPositionBottom",e.tabHelpTextVerticalPositionBottom)}}function g(e,t){if(1&e){const e=n.EpF();n.ynx(0),n.TgZ(1,"button",5),n.NdJ("click",(function(){n.CHM(e);const t=n.oxw(2);return n.KtG(t.togglePanel())})),n._UZ(2,"system-utility-icon",6),n.TgZ(3,"div",7),n.YNc(4,u,1,1,"system-icon",8),n.TgZ(5,"span",9),n._UZ(6,"system-label",10),n.qZA(),n.YNc(7,m,1,2,"system-icon-help-text",11),n.qZA()(),n.BQk()}if(2&e){const e=n.oxw(2);n.xp6(4),n.Q6J("ngIf",e.moduleicon),n.xp6(2),n.Q6J("label",e._title),n.xp6(1),n.Q6J("ngIf",e._helpText)}}function h(e,t){if(1&e&&n._UZ(0,"system-icon",12),2&e){const e=n.oxw(3);n.Q6J("module",e.moduleicon)}}function p(e,t){if(1&e&&n._UZ(0,"system-icon-help-text",13),2&e){const e=n.oxw(3);n.Q6J("helpText",e._helpText)("verticalPositionBottom",e.tabHelpTextVerticalPositionBottom)}}function f(e,t){if(1&e&&(n.TgZ(0,"div",14),n.YNc(1,h,1,1,"system-icon",8),n.TgZ(2,"span",9),n._UZ(3,"system-label",10),n.qZA(),n.YNc(4,p,1,2,"system-icon-help-text",11),n.qZA()),2&e){const e=n.oxw(2);n.xp6(1),n.Q6J("ngIf",e.moduleicon),n.xp6(2),n.Q6J("label",e._title),n.xp6(1),n.Q6J("ngIf",e._helpText)}}function b(e,t){if(1&e&&(n.TgZ(0,"h3",2),n.YNc(1,g,8,3,"ng-container",3),n.YNc(2,f,5,3,"ng-template",null,4,n.W1O),n.qZA()),2&e){const e=n.MAs(3),t=n.oxw();n.xp6(1),n.Q6J("ngIf",t.collapsible)("ngIfElse",e)}}const _=function(e,t){return{"slds-is-open":e,"slds-m-around--none":t}},v=["*"];let y=(()=>{class SystemCollabsableTab{language;collapsible=!0;expanded=!0;margin="default";title="";moduleicon="";tabtitle="";tabhelptext="";tabHelpTextVerticalPositionBottom=!1;constructor(e){this.language=e}togglePanel(){this.expanded=!this.expanded}get _title(){return this.tabtitle?this.tabtitle:!!this.title&&this.title}get _helpText(){return this.tabhelptext?this.language.getLabel(this.tabhelptext):void 0}static ɵfac=function(e){return new(e||SystemCollabsableTab)(n.Y36(l.d))};static ɵcmp=n.Xpm({type:SystemCollabsableTab,selectors:[["system-collapsable-tab"]],inputs:{collapsible:"collapsible",expanded:"expanded",margin:"margin",title:"title",moduleicon:"moduleicon",tabtitle:"tabtitle",tabhelptext:"tabhelptext",tabHelpTextVerticalPositionBottom:"tabHelpTextVerticalPositionBottom"},ngContentSelectors:v,decls:4,vars:8,consts:[[1,"slds-section",3,"ngClass"],["class","slds-section__title",4,"ngIf"],[1,"slds-section__title"],[4,"ngIf","ngIfElse"],["simpleheader",""],["aria-expanded","true",1,"slds-button","slds-section__title-action",3,"click"],["icon","switch","size","x-small","addclasses","slds-section__title-action-icon slds-button__icon slds-button__icon_left"],[1,"slds-grid","slds-grid--vertical-align-center"],["size","x-small",3,"module",4,"ngIf"],[1,"slds-truncate"],[3,"label"],[3,"helpText","verticalPositionBottom",4,"ngIf"],["size","x-small",3,"module"],[3,"helpText","verticalPositionBottom"],[1,"slds-grid","slds-grid--vertical-align-center","slds-section__title-action",2,"cursor","default"]],template:function(e,t){1&e&&(n.F$t(),n.TgZ(0,"div",0),n.YNc(1,b,4,2,"h3",1),n.TgZ(2,"div"),n.Hsn(3),n.qZA()()),2&e&&(n.Q6J("ngClass",n.WLB(5,_,t.expanded,"none"==t.margin)),n.xp6(1),n.Q6J("ngIf",""!=t._title),n.xp6(1),n.Udp("display",t.expanded?"block":"none"),n.Q6J("@tabanimation",t.expanded))},dependencies:[o.mk,o.O5,a.f,d._,r.r,c.h],encapsulation:2,data:{animation:[(0,i.X$)("tabanimation",[(0,i.SB)("true",(0,i.oB)({height:"*",opacity:1})),(0,i.SB)("false",(0,i.oB)({height:"0px",opacity:0})),(0,i.eR)("true => false",[(0,i.oB)({overflow:"hidden"}),(0,i.jt)(".5s")]),(0,i.eR)("false => true",[(0,i.jt)(".5s"),(0,i.oB)({overflow:"inherit"})])])]}})}return SystemCollabsableTab})()},97516:(e,t,s)=>{"use strict";s.d(t,{m:()=>r});var i=s(62242),n=s(44755),l=s(94664);const o=["container"];function a(e,t){if(1&e&&(i.TgZ(0,"div",2),i._UZ(1,"system-spinner",3),i.qZA()),2&e){const e=i.oxw();i.Q6J("title",e.containerComponent)}}function d(e,t){}let r=(()=>{class SystemComponentContainer{container;containerRef=new i.vpe;loaded=!1;containerComponent="";ngAfterViewInit(){this.containerRef.emit(this.container),this.containerRef.complete()}static ɵfac=function(e){return new(e||SystemComponentContainer)};static ɵcmp=i.Xpm({type:SystemComponentContainer,selectors:[["system-component-container"]],viewQuery:function(e,t){if(1&e&&i.Gf(o,7,i.s_b),2&e){let e;i.iGM(e=i.CRH())&&(t.container=e.first)}},decls:3,vars:1,consts:[["style","width:100%;","class","slds-align--absolute-center slds-p-around--xx-small",3,"title",4,"ngIf"],["container",""],[1,"slds-align--absolute-center","slds-p-around--xx-small",2,"width","100%",3,"title"],["size","12"]],template:function(e,t){1&e&&(i.YNc(0,a,2,1,"div",0),i.YNc(1,d,0,0,"ng-template",null,1,i.W1O)),2&e&&i.Q6J("ngIf",!t.loaded)},dependencies:[n.O5,l.W],encapsulation:2})}return SystemComponentContainer})()},30051:(e,t,s)=>{"use strict";s.d(t,{K:()=>n});var i=s(62242);let n=(()=>{class SystemComponentMissing{component="";static ɵfac=function(e){return new(e||SystemComponentMissing)};static ɵcmp=i.Xpm({type:SystemComponentMissing,selectors:[["system-component-missing"]],decls:5,vars:1,consts:[[1,"slds-box","slds-align_absolute-center","slds-theme_alert-texture","slds-theme_error"]],template:function(e,t){1&e&&(i.TgZ(0,"div",0),i._uU(1," Component "),i.TgZ(2,"b"),i._uU(3),i.qZA(),i._uU(4," Missing\n"),i.qZA()),2&e&&(i.xp6(3),i.Oqu(t.component))},encapsulation:2})}return SystemComponentMissing})()},26951:(e,t,s)=>{"use strict";s.d(t,{E:()=>d});var i=s(62242),n=s(4154),l=s(44755),o=s(82995);function a(e,t){if(1&e&&i._UZ(0,"system-dynamic-component",1),2&e){const e=t.$implicit;i.Q6J("component",e.component)("componentconfig",e.componentconfig)}}let d=(()=>{class SystemComponentSet{metadata;componentset="";_componentset="";components=[];constructor(e){this.metadata=e}ngOnChanges(){this.renderComnponentset()}renderComnponentset(){this.componentset!=this._componentset&&(this.componentset?this.components=this.metadata.getComponentSetObjects(this.componentset):this.components=[],this._componentset=this.componentset)}static ɵfac=function(e){return new(e||SystemComponentSet)(i.Y36(n.Pu))};static ɵcmp=i.Xpm({type:SystemComponentSet,selectors:[["system-componentset"]],inputs:{componentset:"componentset"},features:[i.TTD],decls:1,vars:1,consts:[[3,"component","componentconfig",4,"ngFor","ngForOf"],[3,"component","componentconfig"]],template:function(e,t){1&e&&i.YNc(0,a,1,2,"system-dynamic-component",0),2&e&&i.Q6J("ngForOf",t.components)},dependencies:[l.sg,o.T],encapsulation:2})}return SystemComponentSet})()},30034:(e,t,s)=>{"use strict";s.d(t,{$:()=>o});var i=s(62242),n=s(4154),l=s(44755);let o=(()=>{class SystemCustomIcon{metadata;icon="info";file="./assets/icons/spicecrm.svg";size="";color="";desaturate=!1;addclasses="";divClass="slds-media__figure";constructor(e){this.metadata=e}getSizeClass(){return this.size?"slds-icon--"+this.size:""}getSvg(){return this.file+"#"+this.icon}get iconClass(){return"slds-icon"+(this.size?" slds-icon--"+this.size:"")+" slds-icon-text-default "+this.addclasses}get iconStyle(){let e={};return this.color&&(e.color=this.color),this.desaturate&&(e.filter="saturate(0)"),e}static ɵfac=function(e){return new(e||SystemCustomIcon)(i.Y36(n.Pu))};static ɵcmp=i.Xpm({type:SystemCustomIcon,selectors:[["system-custom-icon"]],inputs:{icon:"icon",file:"file",size:"size",color:"color",desaturate:"desaturate",addclasses:"addclasses",divClass:"divClass"},decls:3,vars:3,consts:[[1,"slds-p-horizontal--xxx-small","slds-current-color"],["aria-hidden","true",3,"ngClass","ngStyle"]],template:function(e,t){1&e&&(i.TgZ(0,"div",0),i.O4$(),i.TgZ(1,"svg",1),i._UZ(2,"use"),i.qZA()()),2&e&&(i.xp6(1),i.Q6J("ngClass",t.iconClass)("ngStyle",t.iconStyle),i.xp6(1),i.uIk("href",t.getSvg(),null,"xlink"))},dependencies:[l.mk,l.PC],encapsulation:2})}return SystemCustomIcon})()},87060:(e,t,s)=>{"use strict";s.d(t,{G:()=>l});var i=s(62242),n=s(25547);let l=(()=>{class SystemDisplayCurrencySymbol{cdRef;currency;currencyid;constructor(e,t){this.cdRef=e,this.currency=t}ngOnChanges(e){this.cdRef.detectChanges()}get currencySymbol(){if(!this.currencyid)return"";let e=this.currency.getCurrencies().find((e=>e.id==this.currencyid));return e?e.symbol:""}static ɵfac=function(e){return new(e||SystemDisplayCurrencySymbol)(i.Y36(i.sBO),i.Y36(n.A))};static ɵcmp=i.Xpm({type:SystemDisplayCurrencySymbol,selectors:[["system-display-currency-symbol"]],inputs:{currencyid:"currencyid"},features:[i.TTD],decls:1,vars:1,template:function(e,t){1&e&&i._uU(0),2&e&&i.Oqu(t.currencySymbol)},encapsulation:2})}return SystemDisplayCurrencySymbol})()},46538:(e,t,s)=>{"use strict";s.d(t,{a:()=>d});var i=s(50727),n=s(62242),l=s(55329),o=s(75920),a=s(62422);let d=(()=>{class SystemDisplayDatetime{language;cdRef;session;userpreferences;date;displayDate=!0;displayTime=!0;subscriptions=new i.w0;constructor(e,t,s,i){this.language=e,this.cdRef=t,this.session=s,this.userpreferences=i}ngOnChanges(e){this.detectChanges()}ngOnDestroy(){this.subscriptions.unsubscribe()}ngAfterViewInit(){this.subscribeToPrefs()}subscribeToPrefs(){this.subscriptions.add(this.userpreferences.preferences$.subscribe((e=>{this.prefChanges(e)})))}prefChanges(e){this.detectChanges()}detectChanges(){this.cdRef.detectChanges()}get displayValue(){if(!this.date||!this.displayDate&&!this.displayTime)return"";let e=[];if(this.displayDate&&e.push(this.userpreferences.getDateFormat()),this.displayTime&&e.push(this.userpreferences.getTimeFormat()),moment.isMoment(this.date))return this.date.format(e.join(" "));{let t=this.userpreferences.toUse.timezone||this.session.getSessionData("timezone")||moment.tz.guess(!0);return moment.utc(this.date).tz(t).format(e.join(" "))}}static ɵfac=function(e){return new(e||SystemDisplayDatetime)(n.Y36(l.d),n.Y36(n.sBO),n.Y36(o.n),n.Y36(a.z))};static ɵcmp=n.Xpm({type:SystemDisplayDatetime,selectors:[["system-display-datetime"]],inputs:{date:"date",displayDate:"displayDate",displayTime:"displayTime"},features:[n.TTD],decls:1,vars:1,template:function(e,t){1&e&&n._uU(0),2&e&&n.hij("",t.displayValue,"\n")},encapsulation:2,changeDetection:0})}return SystemDisplayDatetime})()},84270:(e,t,s)=>{"use strict";s.d(t,{G:()=>c});var i=s(62242),n=s(55329),l=s(25547),o=s(62422),a=s(44755),d=s(87060);function r(e,t){if(1&e&&(i.ynx(0),i._UZ(1,"system-display-currency-symbol",1),i.BQk()),2&e){const e=i.oxw();i.xp6(1),i.Q6J("currencyid",e.currency_id)}}let c=(()=>{class SystemDisplayNumber{language;cdRef;currency;userpreferences;number;set onPrecisionChange(e){this.precision=e}precision;currency_id;noDigits=!1;set inputGrow(e){this.noDigits=!1!==e}constructor(e,t,s,i){this.language=e,this.cdRef=t,this.currency=s,this.userpreferences=i}get currencySymbol(){if(!this.currency_id)return"";let e=this.currency.getCurrencies().find((e=>e.id==this.currency_id));return e?e.symbol:""}get value(){if(this.number&&""!=this.number||0===this.number)return"string"==typeof this.number&&(this.number=parseFloat(this.number)),void 0===this.precision&&(this.precision=this.userpreferences.toUse.currency_significant_digits),this.noDigits?this.userpreferences.formatMoney(this.number,0):this.userpreferences.formatMoney(this.number,this.precision)}ngOnChanges(e){this.detectChanges()}detectChanges(){this.cdRef.detectChanges()}static ɵfac=function(e){return new(e||SystemDisplayNumber)(i.Y36(n.d),i.Y36(i.sBO),i.Y36(l.A),i.Y36(o.z))};static ɵcmp=i.Xpm({type:SystemDisplayNumber,selectors:[["system-display-number"]],inputs:{number:"number",onPrecisionChange:["precision","onPrecisionChange"],currency_id:"currency_id",noDigits:"noDigits",inputGrow:["system-display-number-nodigits","inputGrow"]},features:[i.TTD],decls:2,vars:2,consts:[[4,"ngIf"],[1,"slds-p-right--xx-small",3,"currencyid"]],template:function(e,t){1&e&&(i.YNc(0,r,2,1,"ng-container",0),i._uU(1)),2&e&&(i.Q6J("ngIf",t.currency_id),i.xp6(1),i.hij("",t.value,"\n"))},dependencies:[a.O5,d.G],encapsulation:2,changeDetection:0})}return SystemDisplayNumber})()},82995:(e,t,s)=>{"use strict";s.d(t,{T:()=>o});var i=s(62242),n=s(4154);const l=["container"];let o=(()=>{class SystemDynamicComponent{metadata;container;component="";componentconfig;componentattributes;componentref=new i.vpe;_component;initialized=!1;constructor(e){this.metadata=e}ngAfterViewInit(){this.initialized||this.renderComponent()}ngOnChanges(e){this.container&&e.component&&(this._component&&(this._component.destroy(),this._component=void 0),this.renderComponent(),this.initialized=!0)}renderComponent(){this.component&&this.metadata.addComponent(this.component,this.container).subscribe((e=>{if(this.componentref.emit(e),this.componentconfig&&(e.instance.componentconfig=this.componentconfig),this.componentattributes)for(let t in this.componentattributes)e.instance[t]=this.componentattributes[t];this._component=e}))}static ɵfac=function(e){return new(e||SystemDynamicComponent)(i.Y36(n.Pu))};static ɵcmp=i.Xpm({type:SystemDynamicComponent,selectors:[["system-dynamic-component"]],viewQuery:function(e,t){if(1&e&&i.Gf(l,7,i.s_b),2&e){let e;i.iGM(e=i.CRH())&&(t.container=e.first)}},inputs:{component:"component",componentconfig:"componentconfig",componentattributes:"componentattributes"},outputs:{componentref:"componentref"},features:[i.TTD],decls:2,vars:0,consts:[["container",""]],template:function(e,t){1&e&&i._UZ(0,"div",null,0)},encapsulation:2})}return SystemDynamicComponent})()},90512:(e,t,s)=>{"use strict";s.d(t,{Y:()=>a});var i=s(62242),n=s(4154),l=s(83348);const o=["componentcontainer"];let a=(()=>{class SystemDynamicRouteInterceptor{metadata;route;router;componentcontainer;routercomponent=null;constructor(e,t,s){this.metadata=e,this.route=t,this.router=s}ngOnInit(){this.router.navigate(["/module/Home"])}static ɵfac=function(e){return new(e||SystemDynamicRouteInterceptor)(i.Y36(n.Pu),i.Y36(l.gz),i.Y36(l.F0))};static ɵcmp=i.Xpm({type:SystemDynamicRouteInterceptor,selectors:[["system-dynamicroute-container"]],viewQuery:function(e,t){if(1&e&&i.Gf(o,7,i.s_b),2&e){let e;i.iGM(e=i.CRH())&&(t.componentcontainer=e.first)}},decls:2,vars:0,consts:[["componentcontainer",""]],template:function(e,t){1&e&&i._UZ(0,"div",null,0)},encapsulation:2})}return SystemDynamicRouteInterceptor})()},87693:(e,t,s)=>{"use strict";s.d(t,{T:()=>a});var i=s(62242),n=s(4154),l=s(93441),o=s(44561);let a=(()=>{class SystemFileIcon{metadata;helper;filemimetype="";filename="";size="";addclasses="";divClass="slds-media__figure";fileicon={icon:"unknown",sprite:"doctype"};constructor(e,t){this.metadata=e,this.helper=t}ngOnInit(){this.determineIcon()}determineIcon(){let e=this.helper.determineFileIcon(this.filemimetype);if("unknown"==e){if("msg"===this.filename.split(".").splice(-1,1)[0].toLowerCase())return void(this.fileicon={icon:"email",sprite:"standard"})}this.fileicon={icon:e,sprite:"doctype"}}static ɵfac=function(e){return new(e||SystemFileIcon)(i.Y36(n.Pu),i.Y36(l._))};static ɵcmp=i.Xpm({type:SystemFileIcon,selectors:[["system-file-icon"]],inputs:{filemimetype:"filemimetype",filename:"filename",size:"size",addclasses:"addclasses",divClass:"divClass"},decls:1,vars:4,consts:[[3,"icon","divClass","sprite","size"]],template:function(e,t){1&e&&i._UZ(0,"system-icon",0),2&e&&i.Q6J("icon",t.fileicon.icon)("divClass",t.divClass)("sprite",t.fileicon.sprite)("size",t.size)},dependencies:[o.f],encapsulation:2})}return SystemFileIcon})()},37720:(e,t,s)=>{"use strict";s.d(t,{H:()=>h});var i=s(62242),n=s(14505),l=s(55329),o=s(4154),a=s(44755),d=s(95030),r=s(72656),c=s(83463),u=s(61230),m=s(47617);function g(e,t){if(1&e&&(i.TgZ(0,"option",15),i._UZ(1,"system-label",16),i.qZA()),2&e){const e=t.$implicit;i.Q6J("value",e.operator),i.xp6(1),i.Q6J("label",e.name)}}let h=(()=>{class SystemFilterBuilderFilterExpression{backend;language;metadata;module;filterexpression={};operatortype="default";expressionDeleted=new i.vpe;operators={default:[{operator:"equals",name:"LBL_OP_EQUALS",value1:"text"},{operator:"notequals",name:"LBL_OP_NOTEQUAL",value1:"text"},{operator:"starts",name:"LBL_STARTS",value1:"text"},{operator:"contains",name:"LBL_OP_CONTAINS",value1:"text"},{operator:"ncontains",name:"LBL_OP_NOTCONTAINS",value1:"text"},{operator:"greater",name:"LBL_OP_GREATER",value1:"text"},{operator:"gequal",name:"LBL_OP_GREATEREQUAL",value1:"text"},{operator:"less",name:"LBL_OP_LESS",value1:"text"},{operator:"lequal",name:"LBL_OP_LESSEQUAL",value1:"text"},{operator:"between",name:"LBL_OP_BETWEEN",value1:"text",value2:"text"},{operator:"empty",name:"LBL_OP_EMPTY"},{operator:"notempty",name:"LBL_OP_NOTEMPTY"}],numeric:[{operator:"equals",name:"LBL_OP_EQUALS",value1:"integer"},{operator:"notequals",name:"LBL_OP_NOTEQUAL",value1:"text"},{operator:"greater",name:"LBL_OP_GREATER",value1:"integer"},{operator:"gequal",name:"LBL_OP_GREATEREQUAL",value1:"integer"},{operator:"less",name:"LBL_OP_LESS",value1:"integer"},{operator:"lequal",name:"LBL_OP_LESSEQUAL",value1:"integer"},{operator:"between",name:"LBL_OP_BETWEEN",value1:"integer",value2:"integer"}],date:[{operator:"today",name:"LBL_TODAY"},{operator:"past",name:"LBL_PAST"},{operator:"future",name:"LBL_FUTURE"},{operator:"thismonth",name:"LBL_THIS_MONTH"},{operator:"thisyear",name:"LBL_THIS_YEAR"},{operator:"nextmonth",name:"LBL_NEXT_MONTH"},{operator:"nextyear",name:"LBL_NEXT_YEAR"},{operator:"ndaysago",name:"LBL_N_DAYS_AGO",value1:"integer"},{operator:"inlessthanndays",name:"LBL_IN_LESS_THAN_N_DAYS",value1:"integer"},{operator:"inlastndays",name:"LBL_IN_THE_LAST_N_DAYS",value1:"integer"},{operator:"inmorethanndays",name:"LBL_IN_MORE_THAN_N_DAYS",value1:"integer"},{operator:"inndays",name:"LBL_IN_N_DAYS",value1:"integer"},{operator:"thisday",name:"LBL_THIS_DAY"},{operator:"empty",name:"LBL_OP_ISEMPTY"},{operator:"greater",name:"LBL_OP_AFTER",value1:"date"},{operator:"less",name:"LBL_OP_BEFORE",value1:"date"},{operator:"betweend",name:"LBL_OP_BETWEEN",value1:"date",value2:"date"},{operator:"empty",name:"LBL_OP_ISEMPTY"},{operator:"notempty",name:"LBL_OP_NOTEMPTY"},{operator:"lastndays",name:"LBL_OP_LASTNDAYS",value1:"integer"},{operator:"lastnmonths",name:"LBL_OP_LASTNMONTHS",value1:"integer"},{operator:"untilyesterday",name:"LBL_OP_UNTILYESTERDAY"},{operator:"fromtomorrow",name:"LBL_OP_FROMTOMORROW"},{operator:"nyearsago",name:"LBL_N_YEARS_AGO",value1:"integer"}],bool:[{operator:"true",name:"LBL_TRUE"},{operator:"false",name:"LBL_FALSE"}],enum:[{operator:"equals",name:"LBL_OP_EQUALS",value1:"enum"},{operator:"notequals",name:"LBL_OP_NOTEQUAL",value1:"enum"},{operator:"oneof",name:"LBL_ONEOF",value1:"multienum"},{operator:"notoneof",name:"LBL_NOTONEOF",value1:"multienum"},{operator:"empty",name:"LBL_OP_ISEMPTY"},{operator:"notempty",name:"LBL_OP_NOTEMPTY"}],relate:[{operator:"equalr",name:"LBL_OP_EQUALS",value1:"relate"},{operator:"notequalr",name:"LBL_OP_NOTEQUAL",value1:"relate"},{operator:"emptyr",name:"LBL_OP_ISEMPTY"},{operator:"notemptyr",name:"LBL_OP_NOTEMPTY"},{operator:"equalrcu",name:"LBL_CURRENT_USER"},{operator:"notequalrcu",name:"LBL_NOT_CURRENT_USER"}]};constructor(e,t,s){this.backend=e,this.language=t,this.metadata=s}get field(){return this.filterexpression.field}set field(e){e!=this.filterexpression.field&&(this.filterexpression.field=e,this.determineOperatorType(e),this.operator=this.operators[this.operatortype][0].operator,this.filterexpression.filtervalue="")}get operator(){return this.filterexpression.operator}set operator(e){e!=this.filterexpression.operator&&(this.filterexpression.operator=e,this.filterexpression.filtervalue="",this.filterexpression.filtervalueto="")}determineOperatorType(e){let t=this.metadata.getFieldDefs(this.module,e);if(t)switch(t.type){case"date":case"datetime":case"datetimecombo":this.operatortype="date";break;case"bool":case"boolean":this.operatortype="bool";break;case"enum":case"multienum":this.operatortype="enum";break;case"int":case"double":case"currency":this.operatortype="numeric";break;case"relate":this.operatortype="relate";break;default:this.operatortype="default"}else this.operatortype="default"}ngOnInit(){this.determineOperatorType(this.field)}delete(){this.filterexpression.deleted=!0,this.expressionDeleted.emit(!0)}trackByFn(e,t){return t.value}static ɵfac=function(e){return new(e||SystemFilterBuilderFilterExpression)(i.Y36(n.y),i.Y36(l.d),i.Y36(o.Pu))};static ɵcmp=i.Xpm({type:SystemFilterBuilderFilterExpression,selectors:[["system-filter-builder-expression"]],inputs:{module:"module",filterexpression:"filterexpression"},outputs:{expressionDeleted:"expressionDeleted"},decls:19,vars:10,consts:[[1,"slds-grid","slds-gutters_xx-small","slds-grid--vertical-align-start"],[1,"slds-col","slds-size--1-of-4",3,"module","ngModel","ngModelChange"],[1,"slds-col","slds-size--1-of-4"],[1,"slds-form-element"],[1,"slds-form-element__label"],["label","LBL_OPERATOR"],[1,"slds-form-element__control"],[1,"slds-select_container"],[1,"slds-select",3,"disabled","ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[1,"slds-col",3,"operators","operator","filterexpression","module","field"],[1,"slds-col","slds-grow-none"],["aria-hidden","true",1,"slds-form-element__label","slds-hidden"],[1,"slds-button","slds-button_icon","slds-button_icon-border-filled",3,"click"],["icon","delete"],[3,"value"],[3,"label"]],template:function(e,t){1&e&&(i.TgZ(0,"div",0)(1,"system-filter-builder-expression-fields",1),i.NdJ("ngModelChange",(function(e){return t.field=e})),i.qZA(),i.TgZ(2,"div",2)(3,"div",3)(4,"label",4),i._UZ(5,"system-label",5),i.qZA(),i.TgZ(6,"div",6)(7,"div",7)(8,"select",8),i.NdJ("ngModelChange",(function(e){return t.operator=e})),i._UZ(9,"option"),i.YNc(10,g,2,2,"option",9),i.qZA()()()()(),i._UZ(11,"system-filter-builder-expression-values",10),i.TgZ(12,"div",11)(13,"div",3)(14,"span",12),i._uU(15,"delete"),i.qZA(),i.TgZ(16,"div",6)(17,"button",13),i.NdJ("click",(function(){return t.delete()})),i._UZ(18,"system-button-icon",14),i.qZA()()()()()),2&e&&(i.xp6(1),i.Q6J("module",t.module)("ngModel",t.field),i.xp6(7),i.Q6J("disabled",!t.filterexpression.field)("ngModel",t.operator),i.xp6(2),i.Q6J("ngForOf",t.operators[t.operatortype]),i.xp6(1),i.Q6J("operators",t.operators[t.operatortype])("operator",t.filterexpression.operator)("filterexpression",t.filterexpression)("module",t.module)("field",t.field))},dependencies:[a.sg,d.YN,d.Kr,d.EJ,d.JJ,d.On,r.J,c._,u.Y,m.w],encapsulation:2})}return SystemFilterBuilderFilterExpression})()},61230:(e,t,s)=>{"use strict";s.d(t,{Y:()=>m});var i=s(62242),n=s(95030),l=s(14505),o=s(55329),a=s(4154),d=s(44755),r=s(83463),c=s(7674);function u(e,t){if(1&e&&(i.TgZ(0,"option",7),i._UZ(1,"system-label-fieldname",8),i._uU(2),i.qZA()),2&e){const e=t.$implicit,s=i.oxw();i.Q6J("value",e.name),i.xp6(1),i.Q6J("module",s.module)("field",e.name),i.xp6(1),i.hij(" (",e.name,")")}}let m=(()=>{class SystemFilterBuilderFilterExpressionFields{backend;language;metadata;onChange;onTouched;module;fields=[];_field;constructor(e,t,s){this.backend=e,this.language=t,this.metadata=s}get field(){return this._field}set field(e){e!=this._field&&(this._field=e,this.onChange(e))}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}writeValue(e){this._field=e}getFieldDisplayOptions(){let e=[],t=this.language.getFieldDisplayOptions(this.module,this.field);for(let s in t)e.push({value:s,display:t[s]});return e.filter((e=>e.value.length>0))}ngOnInit(){let e=this.metadata.getModuleFields(this.module);for(let t in e)if("link"!=e[t].type){if("relate"==e[t].type){if(!e[t].module)continue;if(e[t].id_name&&e[e[t].id_name]&&"non-db"==e[e[t].id_name].source)continue}"id"!=e[t].type&&("non-db"==e[t].source&&"relate"!=e[t].type||this.fields.push(e[t]))}this.fields.sort(((e,t)=>this.language.getFieldDisplayName(this.module,e.name).toLowerCase()>this.language.getFieldDisplayName(this.module,t.name).toLowerCase()?1:-1))}static ɵfac=function(e){return new(e||SystemFilterBuilderFilterExpressionFields)(i.Y36(l.y),i.Y36(o.d),i.Y36(a.Pu))};static ɵcmp=i.Xpm({type:SystemFilterBuilderFilterExpressionFields,selectors:[["system-filter-builder-expression-fields"]],inputs:{module:"module"},features:[i._Bn([{provide:n.JU,useExisting:(0,i.Gpc)((()=>SystemFilterBuilderFilterExpressionFields)),multi:!0}])],decls:7,vars:2,consts:[[1,"slds-form-element"],[1,"slds-form-element__label"],["label","LBL_FIELD"],[1,"slds-form-element__control"],[1,"slds-select_container"],[1,"slds-select",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[3,"module","field"]],template:function(e,t){1&e&&(i.TgZ(0,"div",0)(1,"label",1),i._UZ(2,"system-label",2),i.qZA(),i.TgZ(3,"div",3)(4,"div",4)(5,"select",5),i.NdJ("ngModelChange",(function(e){return t.field=e})),i.YNc(6,u,3,4,"option",6),i.qZA()()()()),2&e&&(i.xp6(5),i.Q6J("ngModel",t.field),i.xp6(1),i.Q6J("ngForOf",t.fields))},dependencies:[d.sg,n.YN,n.Kr,n.EJ,n.JJ,n.On,r._,c.h],encapsulation:2})}return SystemFilterBuilderFilterExpressionFields})()},83617:(e,t,s)=>{"use strict";s.d(t,{s:()=>b});var i=s(62242),n=s(14505),l=s(55329),o=s(4154),a=s(44755),d=s(95030),r=s(72656),c=s(83463),u=s(37720);function m(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"button",31),i.NdJ("click",(function(){i.CHM(e);const t=i.oxw();return i.KtG(t.delete())})),i._UZ(1,"system-button-icon",32),i.qZA()}}function g(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"fieldset")(1,"system-filter-builder-expression",35),i.NdJ("expressionDeleted",(function(){i.CHM(e);const t=i.oxw(2);return i.KtG(t.filterchanged())})),i.qZA()()}if(2&e){const e=i.oxw().$implicit,t=i.oxw();i.xp6(1),i.Q6J("module",t.module)("filterexpression",e)}}function h(e,t){if(1&e&&(i.TgZ(0,"li",33),i.YNc(1,g,2,2,"fieldset",34),i.qZA()),2&e){const e=t.$implicit;i.xp6(1),i.Q6J("ngIf",!e.deleted)}}function p(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"system-filter-builder-expression-group",37),i.NdJ("expressionChanged",(function(){i.CHM(e);const t=i.oxw(2);return i.KtG(t.filterchanged())})),i.qZA()}if(2&e){const e=i.oxw().$implicit,t=i.oxw();i.Q6J("module",t.module)("filtergroup",e)("candelete",!0)}}function f(e,t){if(1&e&&(i.ynx(0),i.YNc(1,p,1,3,"system-filter-builder-expression-group",36),i.BQk()),2&e){const e=t.$implicit;i.xp6(1),i.Q6J("ngIf",!e.deleted)}}let b=(()=>{class SystemFilterBuilderFilterExpressionGroup{backend;language;metadata;module;filtergroup;candelete=!1;expressionChanged=new i.vpe;expressions=[];groups=[];constructor(e,t,s){this.backend=e,this.language=t,this.metadata=s}ngOnChanges(e){this.groups=[],this.expressions=[];for(let e of this.filtergroup.conditions)e.logicaloperator?this.groups.push(e):this.expressions.push(e)}addExpression(){let e={field:"",operator:"",filtervalue:""};this.filtergroup.conditions.push(e),this.expressions.push(e),this.expressionChanged.emit(!0)}addGroup(){let e={logicaloperator:"and",groupscope:"all",conditions:[]};this.filtergroup.conditions.push(e),this.groups.push(e)}delete(){this.filtergroup.deleted=!0,this.expressionChanged.emit(!0)}filterchanged(){this.cleanDeleted(),this.expressionChanged.emit(!0)}cleanDeleted(){let e=[];for(let t of this.filtergroup.conditions)!0!==t.deleted&&e.push(t);this.filtergroup.conditions=e}static ɵfac=function(e){return new(e||SystemFilterBuilderFilterExpressionGroup)(i.Y36(n.y),i.Y36(l.d),i.Y36(o.Pu))};static ɵcmp=i.Xpm({type:SystemFilterBuilderFilterExpressionGroup,selectors:[["system-filter-builder-expression-group"]],inputs:{module:"module",filtergroup:"filtergroup",candelete:"candelete"},outputs:{expressionChanged:"expressionChanged"},features:[i.TTD],decls:40,vars:5,consts:[[1,"slds-expression__group"],[1,"slds-grid","slds-gutters_direct-xx-small","slds-grid--vertical-align-end","slds-size--1-of-1"],[1,"slds-form-element","slds-col","slds-grow-none"],[1,"slds-form-element__label"],["label","LBL_GROUP_OPERATOR"],[1,"slds-form-element__control"],[1,"slds-select_container"],[1,"slds-select",3,"ngModel","ngModelChange"],["value","and"],["label","LBL_AND"],["value","or"],["label","LBL_OR"],["label","LBL_GROUP_SCOPE"],["value","all"],["label","LBL_ALL"],["value","own"],["label","LBL_OWN"],["value","ownorgunit"],["label","LBL_OWN_ORGUNIT"],["value","not_own"],["label","LBL_NOT_OWN"],["value","creator"],["label","LBL_CREATOR"],["class","slds-button slds-button_icon slds-button_icon-border-filled slds-col--bump-left",3,"click",4,"ngIf"],["class","slds-expression__row_group",4,"ngFor","ngForOf"],[4,"ngFor","ngForOf"],[1,"slds-expression__buttons"],[1,"slds-button","slds-button_neutral",3,"click"],["icon","add"],["label","LBL_ADD_CONDITION"],["label","LBL_ADD_GROUP"],[1,"slds-button","slds-button_icon","slds-button_icon-border-filled","slds-col--bump-left",3,"click"],["icon","delete"],[1,"slds-expression__row_group"],[4,"ngIf"],[3,"module","filterexpression","expressionDeleted"],[3,"module","filtergroup","candelete","expressionChanged",4,"ngIf"],[3,"module","filtergroup","candelete","expressionChanged"]],template:function(e,t){1&e&&(i.TgZ(0,"li",0)(1,"fieldset")(2,"div",1)(3,"div",2)(4,"label",3),i._UZ(5,"system-label",4),i.qZA(),i.TgZ(6,"div",5)(7,"div",6)(8,"select",7),i.NdJ("ngModelChange",(function(e){return t.filtergroup.logicaloperator=e})),i.TgZ(9,"option",8),i._UZ(10,"system-label",9),i.qZA(),i.TgZ(11,"option",10),i._UZ(12,"system-label",11),i.qZA()()()()(),i.TgZ(13,"div",2)(14,"label",3),i._UZ(15,"system-label",12),i.qZA(),i.TgZ(16,"div",5)(17,"div",6)(18,"select",7),i.NdJ("ngModelChange",(function(e){return t.filtergroup.groupscope=e})),i.TgZ(19,"option",13),i._UZ(20,"system-label",14),i.qZA(),i.TgZ(21,"option",15),i._UZ(22,"system-label",16),i.qZA(),i.TgZ(23,"option",17),i._UZ(24,"system-label",18),i.qZA(),i.TgZ(25,"option",19),i._UZ(26,"system-label",20),i.qZA(),i.TgZ(27,"option",21),i._UZ(28,"system-label",22),i.qZA()()()()(),i.YNc(29,m,2,0,"button",23),i.qZA(),i.TgZ(30,"ul"),i.YNc(31,h,2,1,"li",24),i.YNc(32,f,2,1,"ng-container",25),i.qZA(),i.TgZ(33,"div",26)(34,"button",27),i.NdJ("click",(function(){return t.addExpression()})),i._UZ(35,"system-button-icon",28)(36,"system-label",29),i.qZA(),i.TgZ(37,"button",27),i.NdJ("click",(function(){return t.addGroup()})),i._UZ(38,"system-button-icon",28)(39,"system-label",30),i.qZA()()()()),2&e&&(i.xp6(8),i.Q6J("ngModel",t.filtergroup.logicaloperator),i.xp6(10),i.Q6J("ngModel",t.filtergroup.groupscope),i.xp6(11),i.Q6J("ngIf",t.candelete),i.xp6(2),i.Q6J("ngForOf",t.expressions),i.xp6(1),i.Q6J("ngForOf",t.groups))},dependencies:[a.sg,a.O5,d.YN,d.Kr,d.EJ,d.JJ,d.On,r.J,c._,SystemFilterBuilderFilterExpressionGroup,u.H],encapsulation:2})}return SystemFilterBuilderFilterExpressionGroup})()},57706:(e,t,s)=>{"use strict";s.d(t,{U:()=>v});var i=s(62242),n=s(95030),l=s(4154),o=s(44755),a=s(3772),d=s(50638),r=s(25147),c=s(61555),u=s(16822),m=s(4846);function g(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"system-input-integer",5),i.NdJ("ngModelChange",(function(t){i.CHM(e);const s=i.oxw();return i.KtG(s.value=t)})),i.qZA()}if(2&e){const e=i.oxw();i.Q6J("ngModel",e.value)}}function h(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"system-input-date",5),i.NdJ("ngModelChange",(function(t){i.CHM(e);const s=i.oxw();return i.KtG(s.value=t)})),i.qZA()}if(2&e){const e=i.oxw();i.Q6J("ngModel",e.value)}}function p(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"system-input-enum",6),i.NdJ("ngModelChange",(function(t){i.CHM(e);const s=i.oxw();return i.KtG(s.value=t)})),i.qZA()}if(2&e){const e=i.oxw();i.Q6J("module",e.module)("field",e.field)("ngModel",e.value)}}function f(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"system-input-multienum",6),i.NdJ("ngModelChange",(function(t){i.CHM(e);const s=i.oxw();return i.KtG(s.value=t)})),i.qZA()}if(2&e){const e=i.oxw();i.Q6J("module",e.module)("field",e.field)("ngModel",e.value)}}function b(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"system-input-relate",7),i.NdJ("ngModelChange",(function(t){i.CHM(e);const s=i.oxw();return i.KtG(s.value=t)})),i.qZA()}if(2&e){const e=i.oxw();i.Q6J("module",e.relatedmodule)("ngModel",e.value)}}function _(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"system-input-text",5),i.NdJ("ngModelChange",(function(t){i.CHM(e);const s=i.oxw();return i.KtG(s.value=t)})),i.qZA()}if(2&e){const e=i.oxw();i.Q6J("ngModel",e.value)}}let v=(()=>{class SystemFilterBuilderFilterExpressionValue{metadata;module;field;onChange;onTouched;valueType;_value;constructor(e){this.metadata=e}get value(){return this._value}set value(e){switch(this._value=e,this.valueType){case"date":this.onChange(e.format("YYYY-MM-DD"));break;case"multienum":this.onChange(e.join(","));break;default:this.onChange(e)}}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}writeValue(e){switch(this._value=e,this.valueType){case"date":this._value=new moment(e);break;case"multienum":this._value=e?e.split(","):[];break;default:this._value=e}}get relatedmodule(){return this.metadata.getFieldDefs(this.module,this.field).module}static ɵfac=function(e){return new(e||SystemFilterBuilderFilterExpressionValue)(i.Y36(l.Pu))};static ɵcmp=i.Xpm({type:SystemFilterBuilderFilterExpressionValue,selectors:[["system-filter-builder-expression-value"]],inputs:{module:"module",field:"field",valueType:"valueType"},features:[i._Bn([{provide:n.JU,useExisting:(0,i.Gpc)((()=>SystemFilterBuilderFilterExpressionValue)),multi:!0}])],decls:7,vars:6,consts:[[3,"ngSwitch"],[3,"ngModel","ngModelChange",4,"ngSwitchCase"],[3,"module","field","ngModel","ngModelChange",4,"ngSwitchCase"],[3,"module","ngModel","ngModelChange",4,"ngSwitchCase"],[3,"ngModel","ngModelChange",4,"ngSwitchDefault"],[3,"ngModel","ngModelChange"],[3,"module","field","ngModel","ngModelChange"],[3,"module","ngModel","ngModelChange"]],template:function(e,t){1&e&&(i.ynx(0,0),i.YNc(1,g,1,1,"system-input-integer",1),i.YNc(2,h,1,1,"system-input-date",1),i.YNc(3,p,1,3,"system-input-enum",2),i.YNc(4,f,1,3,"system-input-multienum",2),i.YNc(5,b,1,2,"system-input-relate",3),i.YNc(6,_,1,1,"system-input-text",4),i.BQk()),2&e&&(i.Q6J("ngSwitch",t.valueType),i.xp6(1),i.Q6J("ngSwitchCase","integer"),i.xp6(1),i.Q6J("ngSwitchCase","date"),i.xp6(1),i.Q6J("ngSwitchCase","enum"),i.xp6(1),i.Q6J("ngSwitchCase","multienum"),i.xp6(1),i.Q6J("ngSwitchCase","relate"))},dependencies:[o.RF,o.n9,o.ED,n.JJ,n.On,a.Z,d.n,r.r,c.u,u.z,m.z],encapsulation:2})}return SystemFilterBuilderFilterExpressionValue})()},47617:(e,t,s)=>{"use strict";s.d(t,{w:()=>h});var i=s(62242),n=s(14505),l=s(55329),o=s(4154),a=s(44755),d=s(95030),r=s(83463),c=s(57706);function u(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"div",3)(1,"label",4),i._UZ(2,"system-label",5),i.qZA(),i.TgZ(3,"system-filter-builder-expression-value",6),i.NdJ("ngModelChange",(function(t){i.CHM(e);const s=i.oxw(2);return i.KtG(s.filterexpression.filtervalue=t)})),i.qZA()()}if(2&e){const e=i.oxw(2);i.xp6(3),i.Q6J("ngModel",e.filterexpression.filtervalue)("valueType",e.value1)("module",e.module)("field",e.field)}}function m(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"div",3)(1,"label",4),i._UZ(2,"system-label",5),i.qZA(),i.TgZ(3,"system-filter-builder-expression-value",6),i.NdJ("ngModelChange",(function(t){i.CHM(e);const s=i.oxw(2);return i.KtG(s.filterexpression.filtervalueto=t)})),i.qZA()()}if(2&e){const e=i.oxw(2);i.xp6(3),i.Q6J("ngModel",e.filterexpression.filtervalueto)("valueType",e.value2)("module",e.module)("field",e.field)}}function g(e,t){if(1&e&&(i.TgZ(0,"div",1),i.YNc(1,u,4,4,"div",2),i.YNc(2,m,4,4,"div",2),i.qZA()),2&e){const e=i.oxw();i.xp6(1),i.Q6J("ngIf",e.value1),i.xp6(1),i.Q6J("ngIf",e.value2)}}let h=(()=>{class SystemFilterBuilderFilterExpressionValues{backend;language;metadata;module;field;operator;operators;filterexpression={};constructor(e,t,s){this.backend=e,this.language=t,this.metadata=s}ngOnChanges(e){}get value1(){return this.operators.find((e=>e.operator==this.operator)).value1}get value2(){return this.operators.find((e=>e.operator==this.operator)).value2}showValues(){return this.operator.value1||this.operator.value2}static ɵfac=function(e){return new(e||SystemFilterBuilderFilterExpressionValues)(i.Y36(n.y),i.Y36(l.d),i.Y36(o.Pu))};static ɵcmp=i.Xpm({type:SystemFilterBuilderFilterExpressionValues,selectors:[["system-filter-builder-expression-values"]],inputs:{module:"module",field:"field",operator:"operator",operators:"operators",filterexpression:"filterexpression"},features:[i.TTD],decls:1,vars:1,consts:[["class","slds-col",4,"ngIf"],[1,"slds-col"],["class","slds-form-element",4,"ngIf"],[1,"slds-form-element"],[1,"slds-form-element__label"],["label","LBL_VALUE"],[3,"ngModel","valueType","module","field","ngModelChange"]],template:function(e,t){1&e&&i.YNc(0,g,3,2,"div",0),2&e&&i.Q6J("ngIf",""!=t.operator&&t.value1)},dependencies:[a.O5,d.JJ,d.On,r._,c.U],encapsulation:2})}return SystemFilterBuilderFilterExpressionValues})()},65659:(e,t,s)=>{"use strict";s.d(t,{t:()=>g});var i=s(62242),n=s(55329),l=s(14505),o=s(26625),a=s(44755),d=s(95030),r=s(30034);function c(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"li",11),i.NdJ("click",(function(){const t=i.CHM(e).$implicit,s=i.oxw(2);return i.KtG(s.getAddressDetail(t.place_id))})),i.TgZ(1,"div",12)(2,"a",13),i._uU(3),i.qZA()()()}if(2&e){const e=t.$implicit;i.xp6(3),i.Oqu(e.description)}}const u=function(e){return{"slds-is-open":e}};function m(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"div",1)(1,"div",2)(2,"div",3)(3,"div",4)(4,"div",5)(5,"input",6),i.NdJ("ngModelChange",(function(t){i.CHM(e);const s=i.oxw();return i.KtG(s.searchterm=t)}))("focus",(function(){i.CHM(e);const t=i.oxw();return i.KtG(t.onSearchFocus())})),i.qZA(),i._UZ(6,"system-custom-icon",7),i.qZA(),i.TgZ(7,"div",8)(8,"ul",9),i.YNc(9,c,4,1,"li",10),i.qZA()()()()()()}if(2&e){const e=i.oxw();i.xp6(3),i.Q6J("ngClass",i.VKq(6,u,e.displayAutocompleteResults)),i.xp6(2),i.Q6J("placeholder",e.language.getLabel("LBL_SEARCH_ADDRESS"))("ngModel",e.searchterm)("disabled",e.disabled),i.xp6(1),i.Q6J("desaturate",!e.isSearching),i.xp6(3),i.Q6J("ngForOf",e.autocompleteResults)}}let g=(()=>{class SystemGooglePlacesAutocomplete{language;backend;configuration;elementref;cdRef;renderer;address=new i.vpe;disabled=!1;isenabled=!1;autocompletesearchterm="";autocompleteTimeout=void 0;autocompleteResults=[];autocompleteClickListener=void 0;displayAutocompleteResults=!1;isSearching=!1;constructor(e,t,s,i,n,l){this.language=e,this.backend=t,this.configuration=s,this.elementref=i,this.cdRef=n,this.renderer=l;let o=this.configuration.getCapabilityConfig("google_api");o.key&&""!=o.key&&(this.isenabled=!0)}get searchterm(){return this.autocompletesearchterm}set searchterm(e){this.autocompletesearchterm=e,this.autocompleteTimeout&&window.clearTimeout(this.autocompleteTimeout),this.autocompleteTimeout=window.setTimeout((()=>this.doAutocomplete()),500)}ngOnDestroy(){this.autocompleteClickListener&&this.autocompleteClickListener()}onSearchFocus(){this.autocompletesearchterm.length>1&&this.autocompleteResults.length>0&&this.openSearchResults()}openSearchResults(){this.displayAutocompleteResults=!0,this.autocompleteClickListener=this.renderer.listen("document","click",(e=>this.onClick(e))),this.cdRef.detectChanges()}onClick(e){this.elementref.nativeElement.contains(e.target)||this.closeSearchResutls()}closeSearchResutls(){this.autocompleteClickListener&&this.autocompleteClickListener(),this.displayAutocompleteResults=!1,this.cdRef.detectChanges()}doAutocomplete(){if(this.autocompletesearchterm.length>5){this.isSearching=!0;const e=encodeURIComponent(this.autocompletesearchterm);this.backend.getRequest("channels/groupware/gsuite/places/autocomplete/"+e).subscribe((e=>{e.predictions&&e.predictions.length>0?(this.autocompleteResults=e.predictions,this.openSearchResults(),this.isSearching=!1):(this.autocompleteResults=[],this.closeSearchResutls(),this.isSearching=!1)}),(e=>{this.isSearching=!1}))}else this.closeSearchResutls()}getAddressDetail(e){this.displayAutocompleteResults=!1,this.autocompletesearchterm="",this.backend.getRequest("channels/groupware/gsuite/places/"+e).subscribe((e=>{let t={street:e.address.street,street_name:e.address.street_name,street_number:e.address.street_number,city:e.address.city,district:e.address.district,postalcode:e.address.postalcode,state:e.address.state,country:e.address.country,latitude:parseFloat(e.address.location.lat),longitude:parseFloat(e.address.location.lng)};this.address.emit(t),this.autocompletesearchterm=e.formatted_address,this.cdRef.detectChanges()}))}static ɵfac=function(e){return new(e||SystemGooglePlacesAutocomplete)(i.Y36(n.d),i.Y36(l.y),i.Y36(o.C),i.Y36(i.SBq),i.Y36(i.sBO),i.Y36(i.Qsj))};static ɵcmp=i.Xpm({type:SystemGooglePlacesAutocomplete,selectors:[["system-googleplaces-autocomplete"]],inputs:{disabled:"disabled"},outputs:{address:"address"},decls:1,vars:1,consts:[["class","slds-form-element",4,"ngIf"],[1,"slds-form-element"],[1,"slds-form-element__control"],[1,"slds-combobox_container"],["role","combobox",1,"slds-combobox","slds-dropdown-trigger","slds-dropdown-trigger_click",3,"ngClass"],["role","none",1,"slds-combobox__form-element","slds-input-has-icon","slds-input-has-icon_right"],["type","text","autocomplete","new-password",1,"slds-input","slds-combobox__input",3,"placeholder","ngModel","disabled","ngModelChange","focus"],["icon","google","addclasses","slds-input__icon slds-input__icon--left",3,"desaturate"],["role","listbox",1,"slds-dropdown","slds-dropdown_length-with-icon-7","slds-dropdown_fluid"],["role","presentation",1,"slds-listbox","slds-listbox_vertical"],["class","slds-listbox__item","role","presentation",3,"click",4,"ngFor","ngForOf"],["role","presentation",1,"slds-listbox__item",3,"click"],[1,"slds-lookup__result-text","slds-p-around--x-small"],["href","javascript:void(0)"]],template:function(e,t){1&e&&i.YNc(0,m,10,8,"div",0),2&e&&i.Q6J("ngIf",t.isenabled)},dependencies:[a.mk,a.sg,a.O5,d.Fj,d.JJ,d.On,r.$],encapsulation:2})}return SystemGooglePlacesAutocomplete})()},93845:(e,t,s)=>{"use strict";s.d(t,{l:()=>h});var i=s(62242),n=s(95030),l=s(55329),o=s(14505),a=s(26625),d=s(44755),r=s(30034);const c=["inputfield"];function u(e,t){if(1&e&&i._UZ(0,"system-custom-icon",11),2&e){const e=i.oxw();i.Q6J("desaturate",!e.isSearching)}}function m(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"li",12),i.NdJ("click",(function(){const t=i.CHM(e).$implicit,s=i.oxw();return i.KtG(s.getDetails(t))})),i.TgZ(1,"div",13)(2,"a",14),i._uU(3),i.qZA()()()}if(2&e){const e=t.$implicit;i.xp6(3),i.AsE("",e.name,", ",e.formatted_address,"")}}const g=function(e){return{"slds-is-open":e}};let h=(()=>{class SystemGooglePlacesSearch{language;backend;configuration;elementref;renderer;inputfield;details=new i.vpe;onChange;onTouched;isenabled=!1;autocompletesearchterm="";autocompleteTimeout=void 0;autocompleteResults=[];autocompleteClickListener=void 0;displayAutocompleteResults=!1;isSearching=!1;locationbias="ipbias ";constructor(e,t,s,i,n){this.language=e,this.backend=t,this.configuration=s,this.elementref=i,this.renderer=n;let l=this.configuration.getCapabilityConfig("google_api");l.key&&""!=l.key&&(this.isenabled=!0),navigator.geolocation.getCurrentPosition((e=>{this.locationbias=`point:${e.coords.latitude},${e.coords.longitude}`})),this.elementref.nativeElement.focus=()=>{this.focus()}}focus(){setTimeout((()=>{this.inputfield.element.nativeElement.tabIndex||this.renderer.setAttribute(this.inputfield.element.nativeElement,"tabIndex","-1"),this.inputfield.element.nativeElement.focus()}))}get searchterm(){return this.autocompletesearchterm}set searchterm(e){this.autocompletesearchterm=e,this.isenabled&&(this.autocompleteTimeout&&window.clearTimeout(this.autocompleteTimeout),this.autocompleteTimeout=window.setTimeout((()=>this.doAutocomplete()),500))}get placeholder(){return this.isenabled?this.language.getLabel("LBL_SEARCH"):""}updateModel(){this.onChange(this.autocompletesearchterm)}onSearchFocus(){this.autocompletesearchterm.length>1&&this.autocompleteResults.length>0&&this.openSearchResults()}openSearchResults(){this.displayAutocompleteResults=!0,this.autocompleteClickListener=this.renderer.listen("document","click",(e=>this.onClick(e)))}onClick(e){this.elementref.nativeElement.contains(e.target)||this.closeSearchResutls()}closeSearchResutls(){this.autocompleteClickListener&&this.autocompleteClickListener(),this.displayAutocompleteResults=!1,this.autocompleteResults=[]}doAutocomplete(){if(this.autocompletesearchterm.length>3){this.isSearching=!0;const e=encodeURIComponent(this.autocompletesearchterm),t=encodeURIComponent(this.locationbias);this.backend.getRequest(`channels/groupware/gsuite/places/search/${e}/${t}`).subscribe((e=>{e.candidates&&e.candidates.length>0?(this.autocompleteResults=e.candidates,this.openSearchResults(),this.isSearching=!1):(this.autocompleteResults=[],this.closeSearchResutls(),this.isSearching=!1)}),(e=>{this.isSearching=!1}))}}getDetails(e){this.displayAutocompleteResults=!1,this.autocompleteResults=[],this.autocompletesearchterm=e.name;e.formatted_address;this.onChange(e.name),this.isSearching=!0,this.backend.getRequest("channels/groupware/gsuite/places/"+e.place_id).subscribe((e=>{this.details.emit({address:{street:e.address.street,street_name:e.address.street_name,street_number:e.address.street_number,city:e.address.city,district:e.address.district,postalcode:e.address.postalcode,state:e.address.state,country:e.address.country,latitude:parseFloat(e.address.location.lat),longitude:parseFloat(e.address.location.lng)},formatted_phone_number:e.formatted_phone_number,formatted_address:e.formatted_address,international_phone_number:e.international_phone_number,website:e.website,name:e.name}),this.isSearching=!1}),(e=>{this.isSearching=!1}))}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}writeValue(e){this.autocompletesearchterm=e||""}static ɵfac=function(e){return new(e||SystemGooglePlacesSearch)(i.Y36(l.d),i.Y36(o.y),i.Y36(a.C),i.Y36(i.SBq),i.Y36(i.Qsj))};static ɵcmp=i.Xpm({type:SystemGooglePlacesSearch,selectors:[["system-googleplaces-search"]],viewQuery:function(e,t){if(1&e&&i.Gf(c,7,i.s_b),2&e){let e;i.iGM(e=i.CRH())&&(t.inputfield=e.first)}},hostAttrs:["focus","focus()"],outputs:{details:"details"},features:[i._Bn([{provide:n.JU,useExisting:(0,i.Gpc)((()=>SystemGooglePlacesSearch)),multi:!0}])],decls:11,vars:7,consts:[[1,"slds-form-element"],[1,"slds-form-element__control"],[1,"slds-combobox_container"],["role","combobox",1,"slds-combobox","slds-dropdown-trigger","slds-dropdown-trigger_click",3,"ngClass"],["role","none",1,"slds-combobox__form-element","slds-input-has-icon","slds-input-has-icon_right"],["type","text",1,"slds-input","slds-combobox__input",3,"placeholder","ngModel","ngModelChange","focus","blur"],["inputfield",""],["icon","google","addclasses","slds-input__icon slds-input__icon--left",3,"desaturate",4,"ngIf"],["role","listbox",1,"slds-dropdown","slds-dropdown_length-with-icon-7","slds-dropdown_fluid"],["role","presentation",1,"slds-listbox","slds-listbox_vertical"],["class","slds-listbox__item","role","presentation",3,"click",4,"ngFor","ngForOf"],["icon","google","addclasses","slds-input__icon slds-input__icon--left",3,"desaturate"],["role","presentation",1,"slds-listbox__item",3,"click"],[1,"slds-lookup__result-text","slds-p-around--x-small"],["href","javascript:void(0)"]],template:function(e,t){1&e&&(i.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"input",5,6),i.NdJ("ngModelChange",(function(e){return t.searchterm=e}))("focus",(function(){return t.onSearchFocus()}))("blur",(function(){return t.updateModel()})),i.qZA(),i.YNc(7,u,1,1,"system-custom-icon",7),i.qZA(),i.TgZ(8,"div",8)(9,"ul",9),i.YNc(10,m,4,2,"li",10),i.qZA()()()()()()),2&e&&(i.xp6(3),i.Q6J("ngClass",i.VKq(5,g,t.displayAutocompleteResults)),i.xp6(2),i.Q6J("placeholder",t.placeholder)("ngModel",t.searchterm),i.xp6(2),i.Q6J("ngIf",t.isenabled),i.xp6(3),i.Q6J("ngForOf",t.autocompleteResults))},dependencies:[d.mk,d.sg,d.O5,n.Fj,n.JJ,n.On,r.$],encapsulation:2})}return SystemGooglePlacesSearch})()},13091:(e,t,s)=>{"use strict";s.d(t,{e:()=>C});var i=s(62242),n=s(95030),l=s(44755),o=s(24817),a=s(95698),d=s(44044),r=s(4154),c=s(55329),u=s(26625),m=s(55710),g=s(93441),h=s(72656);const p=["htmleditor"];function f(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"button",29),i.NdJ("click",(function(){i.CHM(e);const t=i.oxw();return i.KtG(t.save$.emit(t._html))})),i._UZ(1,"system-button-icon",30),i.qZA()}if(2&e){const e=i.oxw();i.Q6J("title",e.language.getLabel("LBL_SAVE"))}}function b(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"ul",5)(1,"li")(2,"button",19),i.NdJ("click",(function(){i.CHM(e);const t=i.oxw();return i.KtG(t.executeCommand("undo"))})),i._UZ(3,"system-button-icon",31),i.TgZ(4,"span",32),i._uU(5,"undo"),i.qZA()()(),i.TgZ(6,"li")(7,"button",19),i.NdJ("click",(function(){i.CHM(e);const t=i.oxw();return i.KtG(t.executeCommand("redo"))})),i._UZ(8,"system-button-icon",33),i.TgZ(9,"span",32),i._uU(10,"redo"),i.qZA()()()()}if(2&e){const e=i.oxw();i.xp6(2),i.Q6J("title",e.language.getLabel("LBL_UNDO")),i.xp6(5),i.Q6J("title",e.language.getLabel("LBL_REDO"))}}function _(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"div",34)(1,"div",35)(2,"div",36)(3,"div",37)(4,"div",38)(5,"select",39),i.NdJ("ngModelChange",(function(t){i.CHM(e);const s=i.oxw();return i.KtG(s.block=t)}))("change",(function(){i.CHM(e);const t=i.oxw();return i.KtG(t.executeCommand(t.block))})),i.TgZ(6,"option",40)(7,"h1"),i._uU(8,"Heading 1"),i.qZA()(),i.TgZ(9,"option",41)(10,"h2"),i._uU(11,"Heading 2"),i.qZA()(),i.TgZ(12,"option",42)(13,"h3"),i._uU(14,"Heading 3"),i.qZA()(),i.TgZ(15,"option",43),i._uU(16,"Heading 4"),i.qZA(),i.TgZ(17,"option",44),i._uU(18,"Heading 5"),i.qZA(),i.TgZ(19,"option",45),i._uU(20,"Heading 6"),i.qZA(),i.TgZ(21,"option",46),i._uU(22,"Paragraph"),i.qZA(),i.TgZ(23,"option",47),i._uU(24,"Predefined"),i.qZA(),i.TgZ(25,"option",48),i._uU(26,"Standard"),i.qZA(),i.TgZ(27,"option",49),i._uU(28,"Default"),i.qZA()()()()()()()}if(2&e){const e=i.oxw();i.xp6(5),i.Q6J("ngModel",e.block)}}function v(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"li")(1,"button",19),i.NdJ("click",(function(){i.CHM(e);const t=i.oxw(2);return i.KtG(t.executeCommand("openMediaFilePicker"))})),i._UZ(2,"system-button-icon",53),i.qZA()()}if(2&e){const e=i.oxw(2);i.xp6(1),i.Q6J("title",e.language.getLabel("LBL_NEW_IMAGE"))}}function y(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"ul",5)(1,"li")(2,"button",19),i.NdJ("click",(function(){i.CHM(e);const t=i.oxw();return i.KtG(t.executeCommand("insertImage"))})),i._UZ(3,"system-button-icon",50),i.qZA()(),i.YNc(4,v,3,1,"li",22),i.TgZ(5,"li")(6,"button",19),i.NdJ("click",(function(){i.CHM(e);const t=i.oxw();return i.KtG(t.addVideo())})),i._UZ(7,"system-button-icon",51),i.qZA()(),i.TgZ(8,"li")(9,"button",19),i.NdJ("click",(function(){i.CHM(e);const t=i.oxw();return i.KtG(t.addCodeSnippet())})),i._UZ(10,"system-button-icon",52),i.qZA()()()}if(2&e){const e=i.oxw();i.xp6(2),i.Q6J("title",e.language.getLabel("LBL_NEW_IMAGE")),i.xp6(2),i.Q6J("ngIf",e.useMedialFile),i.xp6(2),i.Q6J("title",e.language.getLabel("LBL_ADD_VIDEO")),i.xp6(3),i.Q6J("title",e.language.getLabel("LBL_ADD_CODE_SNIPPET"))}}function x(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"li")(1,"button",19),i.NdJ("click",(function(){i.CHM(e);const t=i.oxw();return i.KtG(t.executeCommand("openTemplateVariableHelper"))})),i._UZ(2,"system-button-icon",54),i.qZA()()}if(2&e){const e=i.oxw();i.xp6(1),i.Q6J("title",e.language.getLabel("LBL_TEMPLATE_VARIABLE_HELPER"))}}function w(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"ul",5)(1,"li")(2,"button",19),i.NdJ("click",(function(){i.CHM(e);const t=i.oxw();return i.KtG(t.executeCommand("openSourceEditor"))})),i._UZ(3,"system-button-icon",55),i.qZA()(),i.TgZ(4,"li")(5,"button",19),i.NdJ("click",(function(){i.CHM(e);const t=i.oxw();return i.KtG(t.executeCommand("toggleFullscreen"))})),i._UZ(6,"system-button-icon",56),i.qZA()()()}if(2&e){const e=i.oxw();i.xp6(2),i.Q6J("title",e.language.getLabel("LBL_SOURCE_EDITOR")),i.xp6(3),i.Q6J("title",e.language.getLabel("LBL_EXPAND")),i.xp6(1),i.Q6J("icon",e.expandIcon)}}const Z=function(e){return{"slds-active":e}},T=["*"];let C=(()=>{class SystemHtmlEditor{modal;renderer;metadata;editorService;_document;elementRef;language;viewContainerRef;configurationService;model;helper;htmlEditor;extendedmode=!0;innerheight;useMedialFile=!1;onChange;onTouched;_html="";isActive=!1;clickListener;keydownListener;modalOpen=!1;isExpanded=!1;block="default";fontName="Tilium Web";fontSize="5";tagMap={BLOCKQUOTE:"indent",A:"link"};save$=new i.vpe;select=["H1","H2","H3","H4","H5","H6","P","PRE","DIV"];constructor(e,t,s,i,n,l,o,a,d,r,c){this.modal=e,this.renderer=t,this.metadata=s,this.editorService=i,this._document=n,this.elementRef=l,this.language=o,this.viewContainerRef=a,this.configurationService=d,this.model=r,this.helper=c}get useTemplateVariableHelper(){return"LandingPages"===this.model?.module||"OutputTemplates"===this.model?.module||"EmailTemplates"===this.model?.module||"CampaignTasks"===this.model?.module}get expandIcon(){return this.isExpanded?"contract_alt":"expand_alt"}get innerHeight(){return this.innerheight?this.innerheight:"250"}get richTextStyle(){return this.isExpanded?{height:"100vh",resize:"none",position:"fixed"}:{height:+this.innerHeight+50+"px"}}ngOnInit(){this.handleKeyboardShortcuts(),this.editorService.editorContainer=this.htmlEditor.element.nativeElement}ngOnDestroy(){this.clickListener&&this.clickListener(),this.keydownListener&&this.keydownListener()}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}writeValue(e){this._html=e||"",this.renderer.setProperty(this.htmlEditor.element.nativeElement,"innerHTML",this._html)}executeCommand(e){switch(e){case"openSourceEditor":this.openSourceEditor();break;case"toggleFullscreen":this.isExpanded=!this.isExpanded;break;case"openMediaFilePicker":this.openMediaFilePicker();break;case"insertImage":this.insertImage();break;case"openTemplateVariableHelper":this.openTemplateVariableHelper();break;default:this.isActive&&""!=e&&this.editorService.executeCommand(e),this.exec()}}onEditorClick(e){this.isActive||(this.isActive=!0,this.focusEditor(),this.clickListener=this.renderer.listen("document","click",(e=>this.onDocumentClick(e)))),e.stopPropagation()}onDocumentClick(e){this.modalOpen||this.elementRef.nativeElement.contains(e.target)||(this.isActive=!1,this.clickListener())}onContentChange(e){"function"==typeof this.onChange&&this.onChange(e),this._html=e}exec(){let e;window.getSelection&&(e=window.getSelection());let t=e.focusNode;const s=[];for(;t&&"editor"!==t.id;)s.unshift(t),t=t.parentNode;this.triggerBlocks(s)}insertImage(){this.editorService.saveSelection(),this.modal.input(this.language.getLabel("LBL_IMAGE_LINK",this.language.getLabel("LBL_IMAGE"))).pipe((0,a.q)(1)).subscribe((e=>{e&&(this.focusEditor(),this.editorService.restoreSelection(),this.editorService.insertImage(e,this.htmlEditor.element.nativeElement),this.onContentChange(this.htmlEditor.element.nativeElement.innerHTML))}))}openMediaFilePicker(){this.editorService.saveSelection(),this.modalOpen=!0,this.modal.openModal("MediaFilePicker").pipe((0,a.q)(1)).subscribe((e=>{e.instance.answer.subscribe((e=>{if(e)if(e.upload)this.modal.openModal("MediaFileUploader").subscribe((e=>{e.instance.answer.subscribe((e=>{if(e){const t=this.configurationService.getCapabilityConfig("mediafiles");this.focusEditor(),this.editorService.restoreSelection(),this.editorService.insertImage(t.public_url+e,this.htmlEditor.element.nativeElement),this.onContentChange(this.htmlEditor.element.nativeElement.innerHTML)}this.modalOpen=!1}))}));else{if(e.id){const t=this.configurationService.getCapabilityConfig("mediafiles");this.focusEditor(),this.editorService.restoreSelection(),this.editorService.insertImage(t.public_url+e.id,this.htmlEditor.element.nativeElement),this.onContentChange(this.htmlEditor.element.nativeElement.innerHTML)}this.modalOpen=!1}}))}))}openSourceEditor(){this.modal.openModal("SystemRichTextSourceModal",!0,this.viewContainerRef.injector).pipe((0,a.q)(1)).subscribe((e=>{e.instance._html=this._html,e.instance.html.subscribe((e=>{this._html=e,"function"==typeof this.onChange&&this.onChange(e),this.renderer.setProperty(this.htmlEditor.element.nativeElement,"innerHTML",this._html)}))}))}commandIsActive(e){return this.isActive&&this._document.queryCommandState(e)}triggerBlocks(e){if(!this.isActive)return;let t=!1;this.select.forEach((s=>{const i=e.find((e=>e.nodeName===s));void 0===i||s!==i.nodeName&&"code"!=i.nodeName?!1===t&&(this.block="default"):!1===t&&(this.block=i.nodeName.toLowerCase(),t=!0)})),t=!1}insertAnchor(){this.editorService.selectedText=this.getSelectedText(),this.editorService.saveSelection();let e=null;e="A"===this.editorService.savedSelectionParentElement.nodeName?this.editorService.savedSelectionParentElement:this.editorService.savedSelectionParentElement.closest("a"),this.modal.openModal("SystemRichTextLink",!0).subscribe((t=>{t.instance.text=e?.text??this.editorService.selectedText,t.instance.parent=this.model,t.instance.editorService=this.editorService,e&&(t.instance.alterMode=!0,t.instance.url=e.href,t.instance.trackingId=e.dataset.trackinglink,t.instance.trackByMethod=e.dataset.trackinglink?"id":"trackinglink"in e.dataset?"url":void 0,t.instance.marketingAction=e.dataset.marketingaction),t.instance.response.subscribe({next:t=>{if(t){if(e)e.href=t.url,"conv"===t.linkType&&t.trackByMethod?e.dataset.trackinglink=t.trackingId:delete e.dataset.trackinglink,t.marketingAction?e.dataset.marketingaction=t.marketingAction:delete e.dataset.marketingaction;else{t.text||(t.text=t.url),this.editorService.restoreSelection();let e=t.text;this.editorService.selectedText===t.text&&(e=this.editorService.selectedHtml);let s={};"conv"===t.linkType&&t.trackByMethod&&(s.trackinglink=t.trackingId),"mark"===t.linkType&&(s.marketingaction=t.marketingAction),this.editorService.insertAnchor(t.url,e,s)}this.onContentChange(this.htmlEditor.element.nativeElement.innerHTML)}}})}))}removeAnchor(){let e;this.editorService.selectedText=this.getSelectedText(),this.editorService.saveSelection(),e="A"===this.editorService.savedSelectionParentElement.nodeName?this.editorService.savedSelectionParentElement:this.editorService.savedSelectionParentElement.closest("a"),e&&(e.outerHTML=e.innerHTML,this.onContentChange(this.htmlEditor.element.nativeElement.innerHTML))}addVideo(){this.isActive&&(this.editorService.saveSelection(),this.modal.input("Add Video","Insert Video URL").pipe((0,a.q)(1)).subscribe((e=>{if(!e||0==e.length)return;this.focusEditor(),this.editorService.restoreSelection();let t=/https?:\/\/(?:www\.)?vimeo.com\/(?:channels\/(?:\w+\/)?|groups\/([^\/]*)\/videos\/|album\/(\d+)\/video\/|)(\d+)(?:$|\/|\?)/,s=/^.*((youtu.be\/)|(v\/)|(\/u\/\w\/)|(embed\/)|(watch\?))\??v?=?([^#\&\?]*).*/;e.match(t)&&(e="https://player.vimeo.com/video/"+e.match(t)[3]),e.match(s)&&(e="https://www.youtube.com/embed/"+e.match(s)[7]);let i=`<iframe src="${e}" frameborder="0" allow="encrypted-media" allowfullscreen></iframe>`;this._document.execCommand("insertHTML",!1,i)})))}getSelectedText(){return window.getSelection?window.getSelection().toString():this._document.selection&&"Control"!=this._document.selection.type?this._document.selection.createRange().text:void 0}insertColor(e,t){this.editorService.insertColor(e,t)}setFontName(e){this.editorService.setFontName(e)}setFontSize(e){this.editorService.setFontSize(e)}onFileChanged(e){}setCustomClass(e){}encodeHtml(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}addCodeSnippet(){if(!this.isActive)return;let e=`<br><pre style="background-color: #eee;border-radius: .2rem; border:1px solid #ccc; padding: .5rem"><code>${this.encodeHtml(this.getSelectedText())||"&nbsp;"}</code></pre><br>`;this._document.execCommand("insertHTML",!1,e)}onPaste(e){if("CODE"==e.target.nodeName){e.preventDefault();let t=(e.originalEvent||e).clipboardData.getData("text/plain");document.execCommand("insertHTML",!1,this.encodeHtml(t))}}handleKeyboardShortcuts(){this.keydownListener=this.renderer.listen("document","keydown",(e=>{(window.navigator.platform.match("Mac")?e.metaKey:e.ctrlKey)&&"s"==e.key.toLowerCase()&&(e.preventDefault(),this.save$.emit(this._html))}))}focusEditor(){this.htmlEditor.element.nativeElement.focus()}openTemplateVariableHelper(){this.isActive&&(this.editorService.saveSelection(),this.modalOpen=!0,this.modal.openModal("OutputTemplatesVariableHelper",null,this.viewContainerRef.injector).pipe((0,a.q)(1)).subscribe((e=>{e.instance.response.pipe((0,a.q)(1)).subscribe((e=>{this.focusEditor(),this.editorService.restoreSelection(),this._document.execCommand("insertText",!1,"{"+e+"}"),this.modalOpen=!1}))})))}getHtmlFromSelection(){let e,t=window.getSelection();t.getRangeAt?e=t.getRangeAt(0):(e=document.createRange(),e.setStart(t.anchorNode,t.anchorOffset),e.setEnd(t.focusNode,t.focusOffset));let s=e.cloneContents(),i=document.createElement("div");return i.appendChild(s),i.innerHTML}static ɵfac=function(e){return new(e||SystemHtmlEditor)(i.Y36(d.o),i.Y36(i.Qsj),i.Y36(r.Pu),i.Y36(o.L),i.Y36(l.K0),i.Y36(i.SBq),i.Y36(c.d),i.Y36(i.s_b),i.Y36(u.C),i.Y36(m.o,8),i.Y36(g._))};static ɵcmp=i.Xpm({type:SystemHtmlEditor,selectors:[["system-html-editor"]],viewQuery:function(e,t){if(1&e&&i.Gf(p,7,i.s_b),2&e){let e;i.iGM(e=i.CRH())&&(t.htmlEditor=e.first)}},inputs:{extendedmode:"extendedmode",innerheight:"innerheight",useMedialFile:"useMedialFile"},outputs:{save$:"save$"},features:[i._Bn([{provide:n.JU,useExisting:(0,i.Gpc)((()=>SystemHtmlEditor)),multi:!0},o.L])],ngContentSelectors:T,decls:66,vars:59,consts:[[1,"slds-rich-text-editor","slds-grid","slds-grid_vertical","slds-nowrap","slds-grid","slds-grid--vertical","slds-theme--default",2,"top","0","right","0","left","0","bottom","0","z-index","9999",3,"ngStyle","click"],["role","toolbar",1,"slds-rich-text-editor__toolbar","slds-shrink-none"],["class","slds-button slds-button_icon slds-button_icon-border-filled slds-m-right--xx-small","tabindex","-1",3,"title","click",4,"ngIf"],["class","slds-button-group-list",4,"ngIf"],["class","slds-grid slds-rich-text-editor__spacing-wrapper","role","group",4,"ngIf"],[1,"slds-button-group-list"],["tabindex","-1",1,"slds-button","slds-button_icon","slds-button_icon-border-filled",3,"title","ngClass","click"],["icon","bold"],["icon","italic"],["icon","underline"],["icon","strikethrough"],["icon","richtextbulletedlist"],["icon","richtextnumberedlist"],["icon","richtextindent"],["icon","richtextoutdent"],["icon","left_align_text"],["icon","center_align_text"],["icon","right_align_text"],["icon","justify_text"],["tabindex","-1",1,"slds-button","slds-button_icon","slds-button_icon-border-filled",3,"title","click"],["icon","link"],["icon","remove_link"],[4,"ngIf"],["icon","remove_formatting"],[1,"slds-button-group-list","slds-grid","slds-grid--align-end","slds-grow"],[1,"slds-rich-text-editor__textarea","slds-grid","slds-grow",2,"min-height","0"],[1,"slds-rich-text-area__content","slds-text-color_weak","slds-grow","slds-height_full",2,"min-height","100%"],["tabindex","0",2,"height","100%","cursor","text",3,"click","keyup","paste","input"],["htmleditor",""],["tabindex","-1",1,"slds-button","slds-button_icon","slds-button_icon-border-filled","slds-m-right--xx-small",3,"title","click"],["icon","save"],["icon","undo"],[1,"slds-assistive-text"],["icon","redo"],["role","group",1,"slds-grid","slds-rich-text-editor__spacing-wrapper"],[1,"slds-rich-text-editor__select"],[1,"slds-form-element"],[1,"slds-form-element__control"],[1,"slds-select_container"],[1,"slds-select",3,"ngModel","ngModelChange","change"],["value","h1"],["value","h2"],["value","h3"],["value","h4"],["value","h5"],["value","h6"],["value","p"],["value","pre"],["value","div"],["value","default"],["icon","image"],["icon","video"],["icon","snippet"],["icon","ad_set"],["icon","variable"],["icon","insert_tag_field"],[3,"icon"]],template:function(e,t){if(1&e){const e=i.EpF();i.F$t(),i.TgZ(0,"div",0),i.NdJ("click",(function(e){return t.onEditorClick(e)})),i.TgZ(1,"div",1),i.YNc(2,f,2,1,"button",2),i.YNc(3,b,11,2,"ul",3),i.YNc(4,_,29,1,"div",4),i.TgZ(5,"ul",5)(6,"li")(7,"button",6),i.NdJ("click",(function(){return t.executeCommand("bold")})),i._UZ(8,"system-button-icon",7),i.qZA()(),i.TgZ(9,"li")(10,"button",6),i.NdJ("click",(function(){return t.executeCommand("italic")})),i._UZ(11,"system-button-icon",8),i.qZA()(),i.TgZ(12,"li")(13,"button",6),i.NdJ("click",(function(){return t.executeCommand("underline")})),i._UZ(14,"system-button-icon",9),i.qZA()(),i.TgZ(15,"li")(16,"button",6),i.NdJ("click",(function(){return t.executeCommand("strikethrough")})),i._UZ(17,"system-button-icon",10),i.qZA()()(),i.TgZ(18,"ul",5)(19,"li")(20,"button",6),i.NdJ("click",(function(){return t.executeCommand("insertUnorderedList")})),i._UZ(21,"system-button-icon",11),i.qZA()(),i.TgZ(22,"li")(23,"button",6),i.NdJ("click",(function(){return t.executeCommand("insertOrderedList")})),i._UZ(24,"system-button-icon",12),i.qZA()()(),i.TgZ(25,"ul",5)(26,"li")(27,"button",6),i.NdJ("click",(function(){return t.executeCommand("indent")})),i._UZ(28,"system-button-icon",13),i.qZA()(),i.TgZ(29,"li")(30,"button",6),i.NdJ("click",(function(){return t.executeCommand("outdent")})),i._UZ(31,"system-button-icon",14),i.qZA()()(),i.TgZ(32,"ul",5)(33,"li")(34,"button",6),i.NdJ("click",(function(){return t.executeCommand("justifyLeft")})),i._UZ(35,"system-button-icon",15),i.qZA()(),i.TgZ(36,"li")(37,"button",6),i.NdJ("click",(function(){return t.executeCommand("justifyCenter")})),i._UZ(38,"system-button-icon",16),i.qZA()(),i.TgZ(39,"li")(40,"button",6),i.NdJ("click",(function(){return t.executeCommand("justifyRight")})),i._UZ(41,"system-button-icon",17),i.qZA()(),i.TgZ(42,"li")(43,"button",6),i.NdJ("click",(function(){return t.executeCommand("justifyFull")})),i._UZ(44,"system-button-icon",18),i.qZA()()(),i.TgZ(45,"ul",5)(46,"li")(47,"button",19),i.NdJ("click",(function(){return t.insertAnchor()})),i._UZ(48,"system-button-icon",20),i.qZA()(),i.TgZ(49,"li")(50,"button",19),i.NdJ("click",(function(){return t.removeAnchor()})),i._UZ(51,"system-button-icon",21),i.qZA()()(),i.YNc(52,y,11,4,"ul",3),i.TgZ(53,"ul",5),i.YNc(54,x,3,1,"li",22),i.qZA(),i.TgZ(55,"ul",5)(56,"li")(57,"button",19),i.NdJ("click",(function(){return t.executeCommand("removeFormat")})),i._UZ(58,"system-button-icon",23),i.qZA()()(),i.YNc(59,w,7,3,"ul",3),i.TgZ(60,"ul",24),i.Hsn(61),i.qZA()(),i.TgZ(62,"div",25)(63,"div",26)(64,"div",27,28),i.NdJ("click",(function(){return t.exec()}))("keyup",(function(){return t.exec()}))("paste",(function(e){return t.onPaste(e)}))("input",(function(){i.CHM(e);const s=i.MAs(65);return i.KtG(t.onContentChange(s.innerHTML))})),i.qZA()()()()}2&e&&(i.Q6J("ngStyle",t.richTextStyle),i.xp6(2),i.Q6J("ngIf",t.extendedmode),i.xp6(1),i.Q6J("ngIf",t.extendedmode),i.xp6(1),i.Q6J("ngIf",t.extendedmode),i.xp6(3),i.Q6J("title",t.language.getLabel("LBL_BOLD"))("ngClass",i.VKq(35,Z,t.commandIsActive("bold"))),i.xp6(3),i.Q6J("title",t.language.getLabel("LBL_ITALIC"))("ngClass",i.VKq(37,Z,t.commandIsActive("italic"))),i.xp6(3),i.Q6J("title",t.language.getLabel("LBL_UNDERLINE"))("ngClass",i.VKq(39,Z,t.commandIsActive("underline"))),i.xp6(3),i.Q6J("title",t.language.getLabel("LBL_STRIKETHROUGH"))("ngClass",i.VKq(41,Z,t.commandIsActive("strikethrough"))),i.xp6(4),i.Q6J("title",t.language.getLabel("LBL_BULLETED_LIST"))("ngClass",i.VKq(43,Z,t.commandIsActive("insertUnorderedList"))),i.xp6(3),i.Q6J("title",t.language.getLabel("LBL_NUMBERED_LIST"))("ngClass",i.VKq(45,Z,t.commandIsActive("insertOrderedList"))),i.xp6(4),i.Q6J("title",t.language.getLabel("LBL_TEXT_INDENT"))("ngClass",i.VKq(47,Z,t.commandIsActive("indent"))),i.xp6(3),i.Q6J("title",t.language.getLabel("LBL_TEXT_OUTDENT"))("ngClass",i.VKq(49,Z,t.commandIsActive("otdent"))),i.xp6(4),i.Q6J("title",t.language.getLabel("LBL_LEFT_ALIGN"))("ngClass",i.VKq(51,Z,t.commandIsActive("justifyLeft"))),i.xp6(3),i.Q6J("title",t.language.getLabel("LBL_CENTER_ALIGN"))("ngClass",i.VKq(53,Z,t.commandIsActive("justifyCenter"))),i.xp6(3),i.Q6J("title",t.language.getLabel("LBL_RIGHT_ALIGN"))("ngClass",i.VKq(55,Z,t.commandIsActive("justifyRight"))),i.xp6(3),i.Q6J("title",t.language.getLabel("LBL_ALIGN_TEXT"))("ngClass",i.VKq(57,Z,t.commandIsActive("justifyFull"))),i.xp6(4),i.Q6J("title",t.language.getLabel("LBL_LINK")),i.xp6(3),i.Q6J("title",t.language.getLabel("LBL_REMOVE_LINK")),i.xp6(2),i.Q6J("ngIf",t.extendedmode),i.xp6(2),i.Q6J("ngIf",t.useTemplateVariableHelper),i.xp6(3),i.Q6J("title",t.language.getLabel("LBL_REMOVE_FORMATTING")),i.xp6(2),i.Q6J("ngIf",t.extendedmode),i.xp6(5),i.uIk("contenteditable",t.isActive))},dependencies:[l.mk,l.O5,l.PC,n.YN,n.Kr,n.EJ,n.JJ,n.On,h.J],encapsulation:2})}return SystemHtmlEditor})()},44561:(e,t,s)=>{"use strict";s.d(t,{f:()=>o});var i=s(62242),n=s(4154),l=s(44755);let o=(()=>{class SystemIcon{metadata;module="";icon="";size="";sprite="standard";addclasses="";divClass="slds-media__figure";constructor(e){this.metadata=e}getSizeClass(){return this.size?"slds-icon--"+this.size:""}getSvgHRef(){return"./vendor/sldassets/icons/"+this.getSprite()+"-sprite/svg/symbols.svg#"+this.getIcon()}getIconClass(){switch(this.sprite){case"standard":case"action":case"custom":return"slds-icon slds-icon_container"+(this.size?" slds-icon--"+this.size:"")+" slds-icon-"+this.getSprite()+"-"+this.getIcon().replace(/_/g,"-")+" "+this.addclasses;default:return"slds-icon slds-icon_container"+(this.size?" slds-icon--"+this.size:"")+" slds-icon-text-default "+this.addclasses}}getIcon(){if(this.icon)return this.icon.indexOf(":")>0?this.icon.split(":")[1]:this.icon;if(this.module&&this.metadata.getModuleIcon(this.module)){let e=this.metadata.getModuleIcon(this.module);return e.indexOf(":")>0?e.split(":")[1]:e}return"empty"}getSprite(){return this.icon&&this.icon.indexOf(":")>0?this.icon.split(":")[0]:this.module&&this.metadata.getModuleIcon(this.module)&&this.metadata.getModuleIcon(this.module).indexOf(":")>0?this.metadata.getModuleIcon(this.module).split(":")[0]:this.sprite}static ɵfac=function(e){return new(e||SystemIcon)(i.Y36(n.Pu))};static ɵcmp=i.Xpm({type:SystemIcon,selectors:[["system-icon"]],inputs:{module:"module",icon:"icon",size:"size",sprite:"sprite",addclasses:"addclasses",divClass:"divClass"},decls:3,vars:3,consts:[[3,"ngClass"],["aria-hidden","true",3,"ngClass"]],template:function(e,t){1&e&&(i.TgZ(0,"div",0),i.O4$(),i.TgZ(1,"svg",1),i._UZ(2,"use"),i.qZA()()),2&e&&(i.Q6J("ngClass",t.divClass),i.xp6(1),i.Q6J("ngClass",t.getIconClass()),i.xp6(1),i.uIk("href",t.getSvgHRef(),null,"xlink"))},dependencies:[l.mk],encapsulation:2})}return SystemIcon})()},98594:(e,t,s)=>{"use strict";s.d(t,{h:()=>g});var i=s(62242),n=s(4154),l=s(44755),o=s(30034),a=s(83463);const d=function(e,t){return{"slds-nubbin_top-left":e,"slds-nubbin_bottom-left":t}},r=function(e,t,s){return{top:e,left:t,"max-width":s}},c=function(e,t,s){return{bottom:e,left:t,"max-width":s}};function u(e,t){if(1&e&&(i.TgZ(0,"div",5)(1,"div",6)(2,"span",7),i._UZ(3,"system-label",8),i.qZA()()()),2&e){const e=i.oxw();i.Q6J("ngClass",i.WLB(3,d,e.verticalPositionBottom,!e.verticalPositionBottom))("ngStyle",e.verticalPositionBottom?i.kEZ(6,r,e.bottomdistance,e.leftdistance,e.PopoverMaxWidth):i.kEZ(10,c,e.bottomdistance,e.leftdistance,e.PopoverMaxWidth)),i.xp6(3),i.Q6J("label",e.helpText)}}const m=function(e){return{color:e}};let g=(()=>{class SystemIconHelpText{metadata;icon="info";file="./assets/icons/spicecrm.svg";size="xx-small";popoverMaxWidth="300px";color="#bbb";hovercolor="#5B5B5B";desaturate=!1;addclasses="";divClass="slds-media__figure";verticalPositionBottom=!1;helpText="";showHelp=!1;constructor(e){this.metadata=e}get gicon(){if(this.icon)return this.icon}get gfile(){if(this.file)return this.file}get gsizeClass(){if(this.size)return this.size}get gcolor(){if(this.color)return this.color}get ghovercolor(){if(this.hovercolor)return this.hovercolor}get gdesaturate(){if(this.desaturate)return this.desaturate}get gaddClass(){if(this.addclasses)return this.addclasses}get gdivClass(){if(this.divClass)return this.divClass}get PopoverMaxWidth(){return this.popoverMaxWidth}get bottomdistance(){return"xx-small"==this.size||"x-small"==this.size?" 2.5em":"small"==this.size?" 2.8em":"large"==this.size?" 3.5em":void 0}get leftdistance(){return"xx-small"==this.size||"x-small"==this.size?"-65%":"small"==this.size?"-30%":"large"==this.size?"10%":void 0}static ɵfac=function(e){return new(e||SystemIconHelpText)(i.Y36(n.Pu))};static ɵcmp=i.Xpm({type:SystemIconHelpText,selectors:[["system-icon-help-text"]],inputs:{icon:"icon",file:"file",size:"size",popoverMaxWidth:"popoverMaxWidth",color:"color",hovercolor:"hovercolor",desaturate:"desaturate",addclasses:"addclasses",divClass:"divClass",verticalPositionBottom:"verticalPositionBottom",helpText:"helpText"},decls:5,vars:10,consts:[[1,"slds-is-relative",2,"display","inline"],[3,"mouseover","mouseout"],[1,"slds-icon_container","slds-icon-utility-info"],[3,"ngStyle","icon","file","size","desaturate","addclasses","divClass"],["class","slds-popover slds-popover_tooltip","role","tooltip","id","help","style","position: absolute; display: block; z-index: 50; width: max-content;",3,"ngClass","ngStyle",4,"ngIf"],["role","tooltip","id","help",1,"slds-popover","slds-popover_tooltip",2,"position","absolute","display","block","z-index","50","width","max-content",3,"ngClass","ngStyle"],[1,"slds-popover__body",2,"width","100%"],[2,"display","block","white-space","pre-wrap"],[3,"label"]],template:function(e,t){1&e&&(i.TgZ(0,"div",0)(1,"a",1),i.NdJ("mouseover",(function(){return t.showHelp=!!t.helpText}))("mouseout",(function(){return t.showHelp=!1})),i.TgZ(2,"span",2),i._UZ(3,"system-custom-icon",3),i.qZA()(),i.YNc(4,u,4,14,"div",4),i.qZA()),2&e&&(i.xp6(3),i.Q6J("ngStyle",i.VKq(8,m,1==t.showHelp?t.ghovercolor:t.gcolor))("icon",t.gicon)("file",t.gfile)("size",t.gsizeClass)("desaturate",t.gdesaturate)("addclasses",t.gaddClass)("divClass",t.gdivClass),i.xp6(1),i.Q6J("ngIf",t.showHelp))},dependencies:[l.mk,l.O5,l.PC,o.$,a._],encapsulation:2})}return SystemIconHelpText})()},84567:(e,t,s)=>{"use strict";s.d(t,{s:()=>o});var i=s(62242),n=s(55329),l=s(83463);let o=(()=>{class SystemIllustrationNoAccess{language;constructor(e){this.language=e}static ɵfac=function(e){return new(e||SystemIllustrationNoAccess)(i.Y36(n.d))};static ɵcmp=i.Xpm({type:SystemIllustrationNoAccess,selectors:[["system-illustration-no-access"]],decls:86,vars:0,consts:[[1,"slds-illustration","slds-illustration_small"],["viewBox","0 0 454 212","aria-hidden","true","xmlns","http://www.w3.org/2000/svg",0,"xmlns","xlink","http://www.w3.org/1999/xlink",1,"slds-illustration__svg"],["stroke","none","stroke-width","1","fill","none","fill-rule","evenodd"],["transform","translate(-70.000000, -95.000000)"],["transform","translate(124.500000, 222.000000)"],["fill","#FFFFFF"],["vector-effect","non-scaling-stroke","d","M18.9209988,1.95433401 L33.259296,51.443436 C33.5666778,52.5043744 32.9557995,53.613617 31.8948612,53.9209988 C31.7139843,53.9734036 31.5266126,54 31.3382972,54 L2.6617028,54 C1.5571333,54 0.661702805,53.1045695 0.661702805,52 C0.661702805,51.8116846 0.688299176,51.6243129 0.74070397,51.443436 L15.0790012,1.95433401 C15.386383,0.893395645 16.4956256,0.282517358 17.556564,0.589899164 C18.2152102,0.780726338 18.7301717,1.29568777 18.9209988,1.95433401 Z"],["stroke-linecap","round","stroke-width","3",1,"slds-illustration__stroke-secondary"],["vector-effect","non-scaling-stroke","stroke-linejoin","round","points","17 0.323943662 34 54 -1.81721305e-12 54"],["vector-effect","non-scaling-stroke","d","M17,4.6953125 C17,43.0456294 17,62.6471919 17,63.5 C17,62.6471919 17,43.0456294 17,4.6953125 Z"],["vector-effect","non-scaling-stroke","d","M17,29.3239437 C22.3333333,35.7851611 25,39.1184944 25,39.3239437 C25,39.1184944 22.3333333,35.7851611 17,29.3239437 Z","stroke-linejoin","round","transform","translate(21.000000, 34.323944) scale(-1, 1) translate(-21.000000, -34.323944) "],["transform","translate(145.000000, 194.000000)"],["transform","translate(1.000000, 0.000000)","fill","#FFFFFF"],["vector-effect","non-scaling-stroke","d","M25.6478873,0 L50.879042,84.4273253 C51.1953215,85.4856452 50.5937789,86.5999782 49.535459,86.9162577 C49.3496374,86.9717906 49.1567264,87 48.9627843,87 L2.33299037,87 C1.22842087,87 0.332990367,86.1045695 0.332990367,85 C0.332990367,84.8060578 0.361199757,84.6131469 0.416732643,84.4273253 L25.6478873,0 Z"],["vector-effect","non-scaling-stroke","stroke-linejoin","round","points","26.5 0 52.5 87 0.5 87"],["vector-effect","non-scaling-stroke","d","M26.5,2.58642578 C26.5,61.0261034 26.5,90.9972948 26.5,92.5 C26.5,90.9972948 26.5,61.0261034 26.5,2.58642578 Z"],["vector-effect","non-scaling-stroke","d","M15.6478873,42 C22.314554,49.078692 25.6478873,52.7453587 25.6478873,53 C25.6478873,52.7453587 22.314554,49.078692 15.6478873,42 Z","stroke-linejoin","round"],["vector-effect","non-scaling-stroke","d","M27.6478873,68 C36.9812207,57.078692 41.6478873,51.7453587 41.6478873,52 C41.6478873,51.7453587 36.9812207,57.078692 27.6478873,68 Z","stroke-linejoin","round"],["transform","translate(404.500000, 245.000000) scale(-1, 1) translate(-404.500000, -245.000000) translate(348.000000, 226.000000)","stroke-linecap","round","stroke-linejoin","round","stroke-width","3",1,"slds-illustration__stroke-secondary"],["vector-effect","non-scaling-stroke","points","0 38 47.5 0 80.5 26"],["vector-effect","non-scaling-stroke","points","71 17 80.5 9 113 36"],["transform","translate(72.000000, 262.500000)"],["vector-effect","non-scaling-stroke","d","M153.962142,26.4644491 C151.225735,20.0143094 144.944776,15.5029106 137.633892,15.5029106 C135.619663,15.5029106 133.683612,15.8453541 131.878328,16.4764392 C128.451481,11.1704266 122.567406,7.66985447 115.883789,7.66985447 C109.491267,7.66985447 103.830159,10.8721423 100.350851,15.7935668 C98.9589956,14.968161 97.3423157,14.4956341 95.6177606,14.4956341 C94.1083143,14.4956341 92.6815102,14.8576334 91.4157672,15.5014039 C87.9975328,6.58722215 79.5098304,0.275259875 69.5804557,0.275259875 C60.4632836,0.275259875 52.5615782,5.59684366 48.6837305,13.3681823 C46.3912034,12.266973 43.8314865,11.6515593 41.1312741,11.6515593 C32.4373504,11.6515593 25.1998844,18.0312998 23.6476214,26.4644491 L153.962142,26.4644491 Z",1,"slds-illustration__fill-secondary"],["vector-effect","non-scaling-stroke","d","M13,25 L143,25","stroke-width","3","stroke-linecap","round",1,"slds-illustration__stroke-secondary"],["vector-effect","non-scaling-stroke","d","M0,25 L450,25","stroke-width","3","stroke-linecap","round",1,"slds-illustration__stroke-secondary"],["transform","translate(344.000000, 247.000000)"],["transform","translate(0.293436, 0.054545)"],["vector-effect","non-scaling-stroke","d","M165.428708,41.9454545 L0.0995432562,41.9454545 C0.0336614956,41.2089487 0,40.4630069 0,39.7090909 C0,26.2132599 10.7866531,15.2727273 24.0926641,15.2727273 C27.7492016,15.2727273 31.215485,16.0989227 34.3199502,17.5772977 C39.5712028,7.14424616 50.271428,0 62.6175975,0 C76.0636257,0 87.5573893,8.47383452 92.1862485,20.441159 C93.9002755,19.5768947 95.8324059,19.0909091 97.8764479,19.0909091 C100.211783,19.0909091 102.401037,19.7252784 104.285841,20.8333889 C108.997403,14.2263569 116.663488,9.92727273 125.320028,9.92727273 C138.043441,9.92727273 148.627152,19.2146805 150.834755,31.4671412 C151.487388,31.3631046 152.156394,31.3090909 152.837838,31.3090909 C159.117096,31.3090909 164.340238,35.8953699 165.428708,41.9454545 Z",1,"slds-illustration__fill-secondary"],["vector-effect","non-scaling-stroke","d","M32.7065637,40.4454545 L173.706564,40.4454545","stroke-width","3","stroke-linecap","round",1,"slds-illustration__stroke-secondary"],["transform","translate(105.000000, 203.000000)"],["transform","translate(106.000000, 0.000000)","fill","#FFFFFF"],["vector-effect","non-scaling-stroke","points","121.5 48.5 158.5 48.5 158.5 34.5 47.5 34.5 47.5 48.5 93.5 48.5 93.5 69.5 121.5 69.5 121.5 48.5"],["vector-effect","non-scaling-stroke","d","M33.9882812,0.21875 C36.5611979,0.21875 70.6126302,0.21875 136.142578,0.21875 L152.384766,11.1132813 C155.083088,16.811292 155.656656,19.677503 154.105469,19.7119141 C152.554281,19.7463252 116.293865,17.6717809 45.3242187,13.4882812 C35.1940104,4.64192708 31.4153646,0.21875 33.9882812,0.21875 Z"],["vector-effect","non-scaling-stroke","d","M32.6708984,2.02246094 L21.5554199,0.374195518 L17.6036034,0.374195518 L5.77148437,7.90429688 C3.09089817,12.6737672 3.09089817,15.2284547 5.77148437,15.5683594 C8.45207058,15.9082641 16.1278518,14.3268839 28.7988281,10.8242188 L42.9921875,7.90429688 L41.0699892,5.68448183 L32.6708984,2.02246094 Z"],["x","0","y","34","width","48","height","14"],["transform","translate(106.000000, 5.000000)",1,"slds-illustration__fill-secondary"],["vector-effect","non-scaling-stroke","points","93.3109375 43.4566406 93.3109375 64.6722656 120.925 64.6722656 121.823047 44.1324219 158.5 43.4566406 158.5 97.5 48.5 97.5 48.5 43.6933594"],["vector-effect","non-scaling-stroke","d","M132.670898,7.66300119e-19 C125.172201,-2.55433373e-19 94.1907552,-2.55433373e-19 39.7265625,7.66300119e-19 L31.8183594,12.5058594 L29.7050781,28.2714844 L157.78125,28.2714844 L157.78125,15.4775391 C148.539714,5.15917969 140.169596,1.78803361e-18 132.670898,7.66300119e-19 Z"],["vector-effect","non-scaling-stroke","d","M37.8266602,0 C34.4632704,0 29.4181858,0 22.6914062,0 C16.1624349,0 9.53808594,3.83528646 2.81835938,11.5058594 L0.705078125,30.2714844 L48.4101562,30.2714844 L48.4101562,14.4775391 L48.1789909,12.3275853 C43.283405,4.10919509 39.832628,0 37.8266602,0 Z"],["x","0.5","y","43.5","width","48","height","54"],["stroke-width","3","stroke-linecap","round","stroke-linejoin","round","x","154.5","y","34.5","width","110","height","68",1,"slds-illustration__stroke-primary"],["vector-effect","non-scaling-stroke","stroke-width","3","stroke-linecap","round","stroke-linejoin","round","points","264.5 48.5 264.5 34.5 154.5 34.5 154.5 48.5 199.5 48.5 199.5 69.5 227.5 69.5 227.5 48.5",1,"slds-illustration__stroke-primary"],["vector-effect","non-scaling-stroke","d","M130.5,0.5 L234.5,0.5 C251.068542,0.5 264.5,13.9314575 264.5,30.5 L264.5,34.5 L106.5,34.5 L106.5,24.5 C106.5,11.245166 117.245166,0.5 130.5,0.5 Z","stroke-width","3","stroke-linecap","round","stroke-linejoin","round",1,"slds-illustration__stroke-primary"],["vector-effect","non-scaling-stroke","d","M130.5,0.5 L130.5,0.5 C143.754834,0.5 154.5,11.245166 154.5,24.5 L154.5,34.5 L106.5,34.5 L106.5,24.5 C106.5,11.245166 117.245166,0.5 130.5,0.5 Z","stroke-width","3","stroke-linecap","round","stroke-linejoin","round",1,"slds-illustration__stroke-primary"],["stroke-width","3","stroke-linecap","round","stroke-linejoin","round","x","106.5","y","48.5","width","48","height","54",1,"slds-illustration__stroke-primary"],["stroke-width","3","stroke-linecap","round","stroke-linejoin","round","x","106.5","y","34.5","width","48","height","14",1,"slds-illustration__stroke-primary"],["vector-effect","non-scaling-stroke","d","M219,52 C219,54.765 216.765,57 214,57 C211.235,57 209,54.765 209,52 C209,49.235 211.235,47 214,47 C216.765,47 219,49.235 219,52 Z",1,"slds-illustration__fill-primary"],["vector-effect","non-scaling-stroke","d","M214,55 L214,60","stroke-width","4","stroke-linecap","round",1,"slds-illustration__stroke-primary"],["vector-effect","non-scaling-stroke","cx","164","cy","58","r","3",1,"slds-illustration__fill-primary"],["vector-effect","non-scaling-stroke","cx","164","cy","93","r","3",1,"slds-illustration__fill-primary"],["vector-effect","non-scaling-stroke","cx","255","cy","58","r","3",1,"slds-illustration__fill-primary"],["vector-effect","non-scaling-stroke","cx","255","cy","93","r","3",1,"slds-illustration__fill-primary"],["vector-effect","non-scaling-stroke","cx","145","cy","58","r","3",1,"slds-illustration__fill-primary"],["vector-effect","non-scaling-stroke","cx","145","cy","93","r","3",1,"slds-illustration__fill-primary"],["vector-effect","non-scaling-stroke","cx","116","cy","58","r","3",1,"slds-illustration__fill-primary"],["vector-effect","non-scaling-stroke","cx","116","cy","93","r","3",1,"slds-illustration__fill-primary"],["vector-effect","non-scaling-stroke","d","M289.928751,82.2971422 L298,102.518658 L280,102.518658 L288.071249,82.2971422 C288.275982,81.784207 288.857768,81.5343604 289.370703,81.7390942 C289.625359,81.8407378 289.827108,82.0424867 289.928751,82.2971422 Z",1,"slds-illustration__fill-primary"],["vector-effect","non-scaling-stroke","d","M300.428751,89.8132712 L305.5,102.518658 L293.5,102.518658 L298.571249,89.8132712 C298.775982,89.300336 299.357768,89.0504894 299.870703,89.2552232 C300.125359,89.3568668 300.327108,89.5586158 300.428751,89.8132712 Z",1,"slds-illustration__fill-primary"],["vector-effect","non-scaling-stroke","d","M93.4287513,82.2971422 L101.5,102.518658 L83.5,102.518658 L91.5712487,82.2971422 C91.7759825,81.784207 92.3577681,81.5343604 92.8707033,81.7390942 C93.1253588,81.8407378 93.3271077,82.0424867 93.4287513,82.2971422 Z","transform","translate(92.500000, 92.517446) scale(-1, 1) translate(-92.500000, -92.517446) ",1,"slds-illustration__fill-primary"],["vector-effect","non-scaling-stroke","d","M76.9287513,89.8132712 L82,102.518658 L70,102.518658 L75.0712487,89.8132712 C75.2759825,89.300336 75.8577681,89.0504894 76.3707033,89.2552232 C76.6253588,89.3568668 76.8271077,89.5586158 76.9287513,89.8132712 Z","transform","translate(76.000000, 96.275510) scale(-1, 1) translate(-76.000000, -96.275510) ",1,"slds-illustration__fill-primary"],["vector-effect","non-scaling-stroke","d","M360,102.5 L372,102.5","stroke-width","3","stroke-linecap","round","stroke-linejoin","round",1,"slds-illustration__stroke-primary"],["vector-effect","non-scaling-stroke","d","M0,102.5 L350,102.5","stroke-width","3","stroke-linecap","round","stroke-linejoin","round",1,"slds-illustration__stroke-primary"],["transform","translate(150.000000, 96.000000)","stroke-linecap","round","stroke-width","3",1,"slds-illustration__stroke-secondary"],["vector-effect","non-scaling-stroke","d","M44,17.5 L63,17.5 C62.2789714,12.0723971 64.081543,7.53186978 68.4077148,3.87841797 C73.3754883,-0.195556641 79.2734375,0.717773438 82.440918,2.12353516 C85.6083984,3.52929687 87.9606934,5.46069336 89.5913086,9.10524041 C90.2822266,10.6397351 90.7517904,11.9379883 91,13"],["vector-effect","non-scaling-stroke","d","M83,20.5 C84.0558268,16.8461914 86.2227376,14.4572754 89.5007324,13.333252 C94.4177246,11.6472168 99.0800781,13.8925781 100.942383,16.1518555 C102.804687,18.4111328 103.39502,20.2260742 103.746582,22.1201172 C103.980957,23.3828125 104.06543,24.8427734 104,26.5 C108.141764,26.3313802 110.918945,27.1647135 112.331543,29 C114.040039,31.1936035 114.215332,33.817627 113.593018,35.75 C112.970703,37.682373 110.894531,40.5 107,40.5 L28,40.5"],["vector-effect","non-scaling-stroke","d","M18,27.5 L83.0004985,27.5"],["vector-effect","non-scaling-stroke","d","M0,27.5 L8,27.5"],["transform","translate(271.000000, 135.000000)","stroke-linecap","round","stroke-width","3",1,"slds-illustration__stroke-secondary"],["transform","translate(402.000000, 164.000000)","stroke-linecap","round","stroke-width","3",1,"slds-illustration__stroke-secondary"],["transform","translate(31.713442, 25.088326) rotate(-15.000000) translate(-31.713442, -25.088326) translate(4.713442, 6.588326)"],["vector-effect","non-scaling-stroke","d","M31.0360707,3.43528591 C31.0360707,3.43528591 40.5802283,0.671893051 42.6488424,10.6908663","transform","translate(36.842457, 6.888440) rotate(41.000000) translate(-36.842457, -6.888440) "],["vector-effect","non-scaling-stroke","d","M40.4282002,10.1797377 C40.4282002,10.1797377 49.9723578,7.4163448 52.0409719,17.435318","transform","translate(46.234586, 13.632892) scale(-1, 1) rotate(-41.000000) translate(-46.234586, -13.632892) "],["vector-effect","non-scaling-stroke","d","M0.730284783,29.5865514 C0.730284783,29.5865514 10.2744424,26.8231586 12.3430565,36.8421318"],["vector-effect","non-scaling-stroke","d","M12.7302848,29.5865514 C12.7302848,29.5865514 22.2744424,26.8231586 24.3430565,36.8421318","transform","translate(18.536671, 33.039705) scale(-1, 1) translate(-18.536671, -33.039705) "],[1,"slds-text-longform"],[1,"slds-text-heading--small"],["label","LBL_NO_ACCESS"]],template:function(e,t){1&e&&(i.TgZ(0,"div",0),i.O4$(),i.TgZ(1,"svg",1)(2,"g",2)(3,"g",3)(4,"g")(5,"g",4)(6,"g",5),i._UZ(7,"path",6),i.qZA(),i.TgZ(8,"g",7),i._UZ(9,"polygon",8)(10,"path",9)(11,"path",10),i.qZA()(),i.TgZ(12,"g",11)(13,"g",12),i._UZ(14,"path",13),i.qZA(),i.TgZ(15,"g",7),i._UZ(16,"polygon",14)(17,"path",15)(18,"path",16)(19,"path",17),i.qZA()(),i.TgZ(20,"g",18)(21,"g"),i._UZ(22,"polyline",19)(23,"polyline",20),i.qZA()(),i.TgZ(24,"g",21),i._UZ(25,"path",22)(26,"path",23)(27,"path",24),i.qZA(),i.TgZ(28,"g",25)(29,"g",26),i._UZ(30,"path",27)(31,"path",28),i.qZA()(),i.TgZ(32,"g",29)(33,"g",30),i._UZ(34,"polygon",31)(35,"path",32)(36,"path",33)(37,"rect",34),i.qZA(),i.TgZ(38,"g",35),i._UZ(39,"polygon",36)(40,"path",37)(41,"path",38)(42,"rect",39),i.qZA(),i.TgZ(43,"g"),i._UZ(44,"rect",40)(45,"polygon",41)(46,"path",42)(47,"path",43)(48,"rect",44)(49,"rect",45)(50,"path",46)(51,"path",47)(52,"circle",48)(53,"circle",49)(54,"circle",50)(55,"circle",51)(56,"circle",52)(57,"circle",53)(58,"circle",54)(59,"circle",55)(60,"path",56)(61,"path",57)(62,"path",58)(63,"path",59)(64,"path",60)(65,"path",61),i.qZA()(),i.TgZ(66,"g",62),i._UZ(67,"path",63)(68,"path",64)(69,"path",65)(70,"path",66),i.qZA(),i.TgZ(71,"g",67)(72,"g"),i._UZ(73,"path",63)(74,"path",64)(75,"path",65)(76,"path",66),i.qZA()(),i.TgZ(77,"g",68)(78,"g",69),i._UZ(79,"path",70)(80,"path",71)(81,"path",72)(82,"path",73),i.qZA()()()()()(),i.kcU(),i.TgZ(83,"div",74)(84,"h3",75),i._UZ(85,"system-label",76),i.qZA()()())},dependencies:[l._],encapsulation:2})}return SystemIllustrationNoAccess})()},12646:(e,t,s)=>{"use strict";s.d(t,{t:()=>l});var i=s(62242);const n=["*"];let l=(()=>{class SystemIllustrationNoData{static ɵfac=function(e){return new(e||SystemIllustrationNoData)};static ɵcmp=i.Xpm({type:SystemIllustrationNoData,selectors:[["system-illustration-no-data"]],ngContentSelectors:n,decls:56,vars:0,consts:[[1,"slds-illustration","slds-illustration_small"],["viewBox","0 0 468 194","aria-hidden","true","xmlns","http://www.w3.org/2000/svg",0,"xmlns","xlink","http://www.w3.org/1999/xlink",1,"slds-illustration__svg"],["stroke","none","stroke-width","1","fill","none","fill-rule","evenodd"],["transform","translate(-67.000000, -112.000000)"],["transform","translate(245.000000, 200.000000)","stroke-linecap","round","stroke-width","3",1,"slds-illustration__stroke-secondary"],["vector-effect","non-scaling-stroke","d","M44,17.5 L63,17.5 C62.2789714,12.0723971 64.081543,7.53186978 68.4077148,3.87841797 C73.3754883,-0.195556641 79.2734375,0.717773438 82.440918,2.12353516 C85.6083984,3.52929687 87.9606934,5.46069336 89.5913086,9.10524041 C90.2822266,10.6397351 90.7517904,11.9379883 91,13"],["vector-effect","non-scaling-stroke","d","M83,20.5 C84.0558268,16.8461914 86.2227376,14.4572754 89.5007324,13.333252 C94.4177246,11.6472168 99.0800781,13.8925781 100.942383,16.1518555 C102.804687,18.4111328 103.39502,20.2260742 103.746582,22.1201172 C103.980957,23.3828125 104.06543,24.8427734 104,26.5 C108.141764,26.3313802 110.918945,27.1647135 112.331543,29 C114.040039,31.1936035 114.215332,33.817627 113.593018,35.75 C112.970703,37.682373 110.894531,40.5 107,40.5 L28,40.5"],["vector-effect","non-scaling-stroke","d","M18,27.5 L83.0004985,27.5"],["vector-effect","non-scaling-stroke","d","M0,27.5 L8,27.5"],["transform","translate(135.000000, 152.000000)","stroke-linecap","round","stroke-width","3",1,"slds-illustration__stroke-secondary"],["transform","translate(69.000000, 256.000000)","stroke-linecap","round","stroke-width","3",1,"slds-illustration__stroke-secondary"],["vector-effect","non-scaling-stroke","d","M14,36.5 L464,36.5"],["vector-effect","non-scaling-stroke","d","M0,36.5 L6,36.5"],["vector-effect","non-scaling-stroke","stroke-linejoin","round","points","234.5 36 279.5 0 313.5 26"],["vector-effect","non-scaling-stroke","d","M279.5,1 L279.5,35","stroke-linejoin","round"],["vector-effect","non-scaling-stroke","d","M313.5,11 C313.5,20.7437888 313.5,25.7437888 313.5,26 C313.5,25.7437888 313.5,20.7437888 313.5,11 Z","stroke-linejoin","round"],["vector-effect","non-scaling-stroke","stroke-linejoin","round","points","303.5 17 313.5 9 347.5 36"],["transform","translate(113.000000, 178.000000)"],["transform","translate(30.000000, 8.000000)",1,"slds-illustration__fill-secondary"],["vector-effect","non-scaling-stroke","d","M29.5,60.5 L29.5,12 C29.5,5.372583 34.872583,0 41.5,0 C48.127417,0 53.5,5.372583 53.5,12 L53.5,40.5 L70.5,40.5 L70.5,27 C70.5,23.1340068 73.6340068,20 77.5,20 C81.3659932,20 84.5,23.1340068 84.5,27 L84.5,48.5 C84.5,51.8137085 81.8137085,54.5 78.5,54.5 L53.5,54.5 L53.5,118.5 L29.5,118.5 L29.5,74.5 L6.5,74.5 C3.1862915,74.5 0.5,71.8137085 0.5,68.5 L0.5,39 C0.5,35.1340068 3.63400675,32 7.5,32 C11.3659932,32 14.5,35.1340068 14.5,39 L14.5,60.5 L29.5,60.5 Z"],["transform","translate(59.000000, 7.000000)","fill","#FFFFFF"],["vector-effect","non-scaling-stroke","d","M2,11 C3.65332031,8.49145508 5.65181478,6.77364095 7.9954834,5.84655762 C11.5109863,4.45593262 15.2684326,4.95605469 17.8156738,6.2824707 C20.362915,7.60888672 22.3626709,9.64978027 23.2602539,11.81604 C23.8586426,13.2602132 23.8586426,11.7547201 23.2602539,7.29956055 L19.612793,3.56494141 L13.7923584,0.564331055 L8.765625,1.42663574 L4.67321777,3.19787598 C2.69893392,5.13902708 1.69559733,6.16722532 1.66320801,6.2824707 C1.61462402,6.45533878 0.856079102,9.49145508 0.813964844,9.66003418 C0.785888672,9.77242025 1.18123372,10.2190755 2,11 Z"],["stroke-width","3",1,"slds-illustration__stroke-primary"],["vector-effect","non-scaling-stroke","d","M0,126.5 L356,126.5","stroke-linecap","round"],["vector-effect","non-scaling-stroke","d","M362.5,126.5 L372.013149,126.5","stroke-linecap","round"],["vector-effect","non-scaling-stroke","d","M107.5,20 L107.5,28","stroke-linecap","round"],["vector-effect","non-scaling-stroke","d","M113,30.6568542 L118.656854,25","stroke-linecap","round"],["vector-effect","non-scaling-stroke","d","M37.5,32 L37.5,40","stroke-linecap","round"],["vector-effect","non-scaling-stroke","d","M44,42.6568542 L49.6568542,37","stroke-linecap","round"],["vector-effect","non-scaling-stroke","d","M25,42.6568542 L30.6568542,37","stroke-linecap","round","transform","translate(27.828427, 39.828427) scale(-1, 1) translate(-27.828427, -39.828427) "],["vector-effect","non-scaling-stroke","d","M71.5,0 L71.5,8","stroke-linecap","round"],["vector-effect","non-scaling-stroke","d","M79,10.6568542 L84.6568542,5","stroke-linecap","round"],["vector-effect","non-scaling-stroke","d","M58,10.6568542 L63.6568542,5","stroke-linecap","round","transform","translate(60.828427, 7.828427) scale(-1, 1) translate(-60.828427, -7.828427) "],["vector-effect","non-scaling-stroke","d","M59.5,68.5 L59.5,20 C59.5,13.372583 64.872583,8 71.5,8 C78.127417,8 83.5,13.372583 83.5,20 L83.5,48.5 L100.5,48.5 L100.5,35 C100.5,31.1340068 103.634007,28 107.5,28 C111.365993,28 114.5,31.1340068 114.5,35 L114.5,56.5 C114.5,59.8137085 111.813708,62.5 108.5,62.5 L83.5,62.5 L83.5,126.5 L59.5,126.5 L59.5,82.5 L36.5,82.5 C33.1862915,82.5 30.5,79.8137085 30.5,76.5 L30.5,47 C30.5,43.1340068 33.6340068,40 37.5,40 C41.3659932,40 44.5,43.1340068 44.5,47 L44.5,68.5 L59.5,68.5 Z"],["vector-effect","non-scaling-stroke","d","M77,88.5 L92.5,88.5 L92.5,81 C92.5,77.1340068 95.6340068,74 99.5,74 L99.5,74 C103.365993,74 106.5,77.1340068 106.5,81 L106.5,96.5 C106.5,99.8137085 103.813708,102.5 100.5,102.5 L77,102.5","stroke-linecap","round","stroke-linejoin","round",1,"slds-illustration__fill-secondary"],["transform","translate(429.000000, 242.000000)","stroke-linecap","round","stroke-width","3",1,"slds-illustration__stroke-secondary"],["vector-effect","non-scaling-stroke","d","M12.5,4 L12.5,50"],["vector-effect","non-scaling-stroke","stroke-linejoin","round","points","11 18.5 0.5 18.5 0.5 0"],["vector-effect","non-scaling-stroke","stroke-linejoin","round","points","14 25.5 24.5 25.5 24.5 8"],["vector-effect","non-scaling-stroke","stroke-linejoin","round","points","2.5 31 2.5 38.5 11 38.5"],["transform","translate(327.000000, 95.000000)"],["vector-effect","non-scaling-stroke","cx","64","cy","64","r","23",1,"slds-illustration__fill-secondary"],["vector-effect","non-scaling-stroke","stroke-width","3","stroke-linecap","round","stroke-linejoin","round","stroke-dasharray","135,1,1,18","transform","translate(64.000000, 64.000000) rotate(230.000000) translate(-64.000000, -64.000000) ","cx","64","cy","64","r","45",1,"slds-illustration__stroke-secondary"],["vector-effect","non-scaling-stroke","stroke-width","3","stroke-linecap","round","stroke-linejoin","round","stroke-dasharray","107,10","transform","translate(64.000000, 64.000000) rotate(150.000000) translate(-64.000000, -64.000000) ","cx","64","cy","64","r","33",1,"slds-illustration__stroke-secondary"],["transform","translate(41.000000, 41.000000)","stroke-width","3",1,"slds-illustration__stroke-primary"],["vector-effect","non-scaling-stroke","cx","23","cy","23","r","23"],[1,"slds-text-longform"],[1,"slds-text-heading_small"]],template:function(e,t){1&e&&(i.F$t(),i.TgZ(0,"div",0),i.O4$(),i.TgZ(1,"svg",1)(2,"g",2)(3,"g",3)(4,"g")(5,"g",4),i._UZ(6,"path",5)(7,"path",6)(8,"path",7)(9,"path",8),i.qZA(),i.TgZ(10,"g",9),i._UZ(11,"path",5)(12,"path",6)(13,"path",7)(14,"path",8),i.qZA(),i.TgZ(15,"g",10),i._UZ(16,"path",11)(17,"path",12)(18,"polyline",13)(19,"path",14)(20,"path",15)(21,"polyline",16),i.qZA(),i.TgZ(22,"g",17)(23,"g",18),i._UZ(24,"path",19),i.qZA(),i.TgZ(25,"g",20),i._UZ(26,"path",21),i.qZA(),i.TgZ(27,"g",22),i._UZ(28,"path",23)(29,"path",24)(30,"path",25)(31,"path",26)(32,"path",27)(33,"path",28)(34,"path",29)(35,"path",30)(36,"path",31)(37,"path",32)(38,"path",33)(39,"path",34),i.qZA()(),i.TgZ(40,"g",35)(41,"g"),i._UZ(42,"path",36)(43,"polyline",37)(44,"polyline",38)(45,"polyline",39),i.qZA()(),i.TgZ(46,"g",40)(47,"g"),i._UZ(48,"circle",41)(49,"circle",42)(50,"circle",43),i.qZA(),i.TgZ(51,"g",44),i._UZ(52,"circle",45),i.qZA()()()()()(),i.kcU(),i.TgZ(53,"div",46)(54,"h3",47),i.Hsn(55),i.qZA()()())},encapsulation:2})}return SystemIllustrationNoData})()},64730:(e,t,s)=>{"use strict";s.d(t,{C:()=>l});var i=s(62242);const n=["*"];let l=(()=>{class SystemIllustrationNoRecords{static ɵfac=function(e){return new(e||SystemIllustrationNoRecords)};static ɵcmp=i.Xpm({type:SystemIllustrationNoRecords,selectors:[["system-illustration-no-records"]],ngContentSelectors:n,decls:50,vars:0,consts:[[1,"slds-illustration","slds-illustration_small"],["viewBox","0 0 454 272","aria-hidden","true","xmlns","http://www.w3.org/2000/svg",0,"xmlns","xlink","http://www.w3.org/1999/xlink",1,"slds-illustration__svg"],["fill","none","fill-rule","evenodd","transform","translate(-65 -74)"],["transform","translate(77 180)"],["vector-effect","non-scaling-stroke","stroke-linecap","round","stroke-linejoin","round","stroke-width","3","points","21 74 111.5 0 177.5 54",1,"slds-illustration__stroke-secondary"],["vector-effect","non-scaling-stroke","stroke-linecap","round","stroke-linejoin","round","stroke-width","3","points","160 37 181.5 19 249 74",1,"slds-illustration__stroke-secondary"],["vector-effect","non-scaling-stroke","d","M5.83623454,54.8238008 C6.47896445,52.7119739 7.52041887,52.7099477 8.16376546,54.8238008 L14,74 L0,74 L5.83623454,54.8238008 Z",1,"slds-illustration__fill-secondary"],["vector-effect","non-scaling-stroke","d","M14.9699006 61.8628727C15.5388088 59.729467 16.4627585 59.7353443 17.0300994 61.8628727L20 73 12 73 14.9699006 61.8628727zM239.734375 56.5589921C240.43336 54.4620359 241.506942 54.4857215 242.128332 56.5984458L246 69.7621171 237 64.7621171 239.734375 56.5589921z",1,"slds-illustration__fill-secondary"],["vector-effect","non-scaling-stroke","d","M247.921591,53.8514618 C248.51718,51.7243582 249.484912,51.7318303 250.077772,53.8491859 L254.357732,69.1347569 L242,75 L247.921591,53.8514618 Z","transform","matrix(-1 0 0 1 496.358 0)",1,"slds-illustration__fill-secondary"],["transform","matrix(-1 0 0 1 496 216)"],["vector-effect","non-scaling-stroke","d","M5.9215907,18.8514618 C6.51717971,16.7243582 7.48113835,16.7183512 8.0784093,18.8514618 L14,40 L0,40 L5.9215907,18.8514618 Z","transform","matrix(-1 0 0 1 14 0)",1,"slds-illustration__fill-secondary"],["vector-effect","non-scaling-stroke","d","M123.136984,25.2363093 C123.613615,23.448945 124.38595,23.4473111 124.863437,25.237887 L126.693756,32.1015868 L120,37 L123.136984,25.2363093 Z","transform","matrix(-1 0 0 1 246.694 0)",1,"slds-illustration__fill-secondary"],["vector-effect","non-scaling-stroke","stroke-linecap","round","stroke-linejoin","round","stroke-width","3","points","13 37 59.5 0 92.5 27",1,"slds-illustration__stroke-secondary"],["vector-effect","non-scaling-stroke","stroke-linecap","round","stroke-linejoin","round","stroke-width","3","points","83 17 92.5 9 127 38",1,"slds-illustration__stroke-secondary"],["stroke-linecap","round","stroke-width","3","transform","translate(67 253)",1,"slds-illustration__stroke-primary"],["vector-effect","non-scaling-stroke","d","M0 1.5L450 1.5M284 2L419 61M282 2L65 91M443 1.5L449 1.5"],["transform","translate(73 163)"],["vector-effect","non-scaling-stroke","fill","#FFF","points","20.906 .73 24.63 2.34 27.093 9.155 11.046 19.877 .131 19.877","transform","translate(80 22)"],["stroke-linecap","round","stroke-width","3",1,"slds-illustration__stroke-secondary"],["vector-effect","non-scaling-stroke","d","M44,17.5 L63,17.5 C62.2789714,12.0723971 64.081543,7.53186978 68.4077148,3.87841797 C73.3754883,-0.195556641 79.2734375,0.717773438 82.440918,2.12353516 C85.6083984,3.52929687 87.9606934,5.46069336 89.5913086,9.10524041 C90.2822266,10.6397351 90.7517904,11.9379883 91,13"],["vector-effect","non-scaling-stroke","d","M83 20.5C84.0558268 16.8461914 86.2227376 14.4572754 89.5007324 13.333252 94.4177246 11.6472168 99.0800781 13.8925781 100.942383 16.1518555 102.804687 18.4111328 103.39502 20.2260742 103.746582 22.1201172 103.980957 23.3828125 104.06543 24.8427734 104 26.5 108.141764 26.3313802 110.918945 27.1647135 112.331543 29 114.040039 31.1936035 114.215332 33.817627 113.593018 35.75 112.970703 37.682373 110.894531 40.5 107 40.5L28 40.5M18 27.5L83.0004985 27.5M0 27.5L8 27.5"],["stroke-linecap","round","stroke-width","3","transform","translate(292 139)",1,"slds-illustration__stroke-secondary"],["transform","translate(204.5 228.5)"],["vector-effect","non-scaling-stroke","d","M18.9209988,1.95433401 L33.259296,51.443436 C33.5666778,52.5043744 32.9557995,53.613617 31.8948612,53.9209988 C31.7139843,53.9734036 31.5266126,54 31.3382972,54 L2.6617028,54 C1.5571333,54 0.661702805,53.1045695 0.661702805,52 C0.661702805,51.8116846 0.688299176,51.6243129 0.74070397,51.443436 L15.0790012,1.95433401 C15.386383,0.893395645 16.4956256,0.282517358 17.556564,0.589899164 C18.2152102,0.780726338 18.7301717,1.29568777 18.9209988,1.95433401 Z",1,"slds-illustration__fill-secondary"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","3",1,"slds-illustration__stroke-primary"],["points","17 .324 34 54 0 54"],["vector-effect","non-scaling-stroke","d","M17,6.32394366 C17,42.1378022 17,60.4711356 17,61.3239437 C17,60.4711356 17,42.1378022 17,6.32394366 Z"],["vector-effect","non-scaling-stroke","d","M17,29.3239437 C22.3333333,35.7851611 25,39.1184944 25,39.3239437 C25,39.1184944 22.3333333,35.7851611 17,29.3239437 Z","transform","matrix(-1 0 0 1 42 0)"],["transform","translate(439.5 227.5)"],["vector-effect","non-scaling-stroke","points","17 -4.676 34 54 0 54"],["vector-effect","non-scaling-stroke","d","M17,1.32394366 C17,40.3936076 17,60.3936076 17,61.3239437 C17,60.3936076 17,40.3936076 17,1.32394366 Z"],["transform","translate(141.852 213.5)"],["vector-effect","non-scaling-stroke","d","M25.6478873,0 L50.8997802,86.4391718 C51.2095171,87.4994249 50.6011034,88.6100213 49.5408502,88.9197582 C49.3586621,88.9729817 49.1698252,89 48.980022,89 L2.31575269,89 C1.21118319,89 0.315752686,88.1045695 0.315752686,87 C0.315752686,86.8101968 0.342770948,86.6213599 0.395994453,86.4391718 L25.6478873,0 Z","transform","translate(1)",1,"slds-illustration__fill-secondary"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","3","transform","translate(0 2)",1,"slds-illustration__stroke-primary"],["vector-effect","non-scaling-stroke","points","26.648 0 52.648 87 .648 87"],["vector-effect","non-scaling-stroke","d","M26.6478873 6C26.6478873 64.4972948 26.6478873 94.4972948 26.6478873 96 26.6478873 94.4972948 26.6478873 64.4972948 26.6478873 6zM15.6478873 42C22.9812207 49.078692 26.6478873 52.7453587 26.6478873 53 26.6478873 52.7453587 22.9812207 49.078692 15.6478873 42zM27.6478873 68C36.9812207 57.078692 41.6478873 51.7453587 41.6478873 52 41.6478873 51.7453587 36.9812207 57.078692 27.6478873 68z"],["transform","translate(168 57)"],["vector-effect","non-scaling-stroke","cx","64","cy","64","r","23",1,"slds-illustration__fill-secondary"],["vector-effect","non-scaling-stroke","stroke-dasharray","135 1 1 18","stroke-linecap","round","stroke-linejoin","round","stroke-width","3","d","M64,109 C88.8528137,109 109,88.8528137 109,64 C109,39.1471863 88.8528137,19 64,19 C39.1471863,19 19,39.1471863 19,64 C19,88.8528137 39.1471863,109 64,109 Z","transform","rotate(-130 64 64)",1,"slds-illustration__stroke-secondary"],["vector-effect","non-scaling-stroke","stroke-dasharray","107 10","stroke-linecap","round","stroke-linejoin","round","stroke-width","3","d","M64,97 C82.2253967,97 97,82.2253967 97,64 C97,45.7746033 82.2253967,31 64,31 C45.7746033,31 31,45.7746033 31,64 C31,82.2253967 45.7746033,97 64,97 Z","transform","rotate(150 64 64)",1,"slds-illustration__stroke-secondary"],["stroke-width","3","transform","translate(41 41)",1,"slds-illustration__stroke-primary"],["vector-effect","non-scaling-stroke","cx","23","cy","23","r","23"],[1,"slds-text-longform"],[1,"slds-text-heading_small"]],template:function(e,t){1&e&&(i.F$t(),i.TgZ(0,"div",0),i.O4$(),i.TgZ(1,"svg",1)(2,"g",2)(3,"g",3),i._UZ(4,"polyline",4)(5,"polyline",5)(6,"path",6)(7,"path",7)(8,"path",8),i.qZA(),i.TgZ(9,"g",9),i._UZ(10,"path",10)(11,"path",11)(12,"polyline",12)(13,"polyline",13),i.qZA(),i.TgZ(14,"g",14),i._UZ(15,"path",15),i.qZA(),i.TgZ(16,"g",16),i._UZ(17,"polygon",17),i.TgZ(18,"g",18),i._UZ(19,"path",19)(20,"path",20),i.qZA()(),i.TgZ(21,"g",21),i._UZ(22,"path",19)(23,"path",20),i.qZA(),i.TgZ(24,"g",22),i._UZ(25,"path",23),i.TgZ(26,"g",24),i._UZ(27,"polygon",25)(28,"path",26)(29,"path",27),i.qZA()(),i.TgZ(30,"g",28),i._UZ(31,"path",23),i.TgZ(32,"g",24),i._UZ(33,"polygon",29)(34,"path",30)(35,"path",27),i.qZA()(),i.TgZ(36,"g",31),i._UZ(37,"path",32),i.TgZ(38,"g",33),i._UZ(39,"polygon",34)(40,"path",35),i.qZA()(),i.TgZ(41,"g",36),i._UZ(42,"circle",37)(43,"path",38)(44,"path",39),i.TgZ(45,"g",40),i._UZ(46,"circle",41),i.qZA()()()(),i.kcU(),i.TgZ(47,"div",42)(48,"h3",43),i.Hsn(49),i.qZA()()())},encapsulation:2})}return SystemIllustrationNoRecords})()},59016:(e,t,s)=>{"use strict";s.d(t,{H:()=>o});var i=s(62242),n=s(55329),l=s(83463);let o=(()=>{class SystemIllustrationNoTask{language;constructor(e){this.language=e}static ɵfac=function(e){return new(e||SystemIllustrationNoTask)(i.Y36(n.d))};static ɵcmp=i.Xpm({type:SystemIllustrationNoTask,selectors:[["system-illustration-no-task"]],decls:67,vars:0,consts:[[1,"slds-illustration","slds-illustration_small"],["viewBox","0 0 454 182","aria-hidden","true","xmlns","http://www.w3.org/2000/svg",0,"xmlns","xlink","http://www.w3.org/1999/xlink",1,"slds-illustration__svg"],["stroke","none","stroke-width","1","fill","none","fill-rule","evenodd"],["transform","translate(-73.000000, -110.000000)"],["transform","translate(75.000000, 240.000000)"],["vector-effect","non-scaling-stroke","stroke-width","3","stroke-linecap","round","stroke-linejoin","round","transform","translate(375.250000, 18.000000) scale(-1, 1) translate(-375.250000, -18.000000) ","points","335.5 36 380 0 415 27",1,"slds-illustration__stroke-secondary"],["vector-effect","non-scaling-stroke","stroke-width","3","stroke-linecap","round","stroke-linejoin","round","transform","translate(324.500000, 22.500000) scale(-1, 1) translate(-324.500000, -22.500000) ","points","303 18 313.5 9 346 36",1,"slds-illustration__stroke-secondary"],["vector-effect","non-scaling-stroke","d","M0,36.5 L450,36.5","stroke-width","3","stroke-linecap","round",1,"slds-illustration__stroke-secondary"],["vector-effect","non-scaling-stroke","d","M406.04276,9.26543454 L413,32.7461193 L400.495829,23.8448556 L404.113561,9.30802252 C404.246938,8.772085 404.789525,8.44574518 405.325462,8.57912213 C405.669253,8.66468028 405.942114,8.9257539 406.04276,9.26543454 Z",1,"slds-illustration__fill-secondary"],["vector-effect","non-scaling-stroke","d","M311.962964,11.4391572 L318,33 L306.770218,23.1063642 L310.037036,11.4391572 C310.185948,10.9073269 310.7378,10.5969106 311.26963,10.7458231 C311.605963,10.8399963 311.868791,11.1028246 311.962964,11.4391572 Z","transform","translate(312.385109, 21.626882) scale(-1, 1) translate(-312.385109, -21.626882) ",1,"slds-illustration__fill-secondary"],["transform","translate(83.000000, 173.000000)","stroke-linecap","round","stroke-width","3",1,"slds-illustration__stroke-secondary"],["vector-effect","non-scaling-stroke","d","M44,17.5 L63,17.5 C62.2789714,12.0723971 64.081543,7.53186978 68.4077148,3.87841797 C73.3754883,-0.195556641 79.2734375,0.717773438 82.440918,2.12353516 C85.6083984,3.52929687 87.9606934,5.46069336 89.5913086,9.10524041 C90.2822266,10.6397351 90.7517904,11.9379883 91,13"],["vector-effect","non-scaling-stroke","d","M83,20.5 C84.0558268,16.8461914 86.2227376,14.4572754 89.5007324,13.333252 C94.4177246,11.6472168 99.0800781,13.8925781 100.942383,16.1518555 C102.804687,18.4111328 103.39502,20.2260742 103.746582,22.1201172 C103.980957,23.3828125 104.06543,24.8427734 104,26.5 C108.141764,26.3313802 110.918945,27.1647135 112.331543,29 C114.040039,31.1936035 114.215332,33.817627 113.593018,35.75 C112.970703,37.682373 110.894531,40.5 107,40.5 L28,40.5"],["vector-effect","non-scaling-stroke","d","M18,27.5 L83.0004985,27.5"],["vector-effect","non-scaling-stroke","d","M0,27.5 L8,27.5"],["transform","translate(274.000000, 111.000000)","stroke-linecap","round","stroke-width","3",1,"slds-illustration__stroke-secondary"],["transform","translate(115.000000, 191.000000)"],["transform","translate(148.000000, 32.000000) scale(-1, 1) translate(-148.000000, -32.000000) translate(116.000000, 0.000000)",1,"slds-illustration__fill-secondary"],["vector-effect","non-scaling-stroke","d","M25,53 C25,55.76 22.76125,58 20,58 C17.24,58 15,55.76 15,53 C15,50.24 17.24,48 20,48 C22.76125,48 25,50.24 25,53 Z"],["vector-effect","non-scaling-stroke","d","M8,58 C6.34130214,58 5,59.344354 5,61 C5,62.655646 6.34130214,64 8,64 C9.65717192,64 11,62.655646 11,61 C11,59.344354 9.65717192,58 8,58"],["vector-effect","non-scaling-stroke","d","M43.2932416,0 C35.2856577,0 28.3128049,4.40586521 24.6382957,10.9184604 C22.0889739,9.11222859 18.9814709,8.03886643 15.6213524,8.03886643 C6.99160591,8.03886643 0,15.0367986 0,23.6690948 C0,32.302472 6.99160591,39.3004042 15.6213524,39.3004042 C15.8077805,39.3004042 15.9920023,39.2777047 16.1806367,39.2712191 C19.0013272,43.3344299 23.6918145,46 29.011083,46 C32.7848734,46 36.2475826,44.6596485 38.9469293,42.4296926 C40.3512074,42.7193815 41.8051261,42.8739543 43.2932416,42.8739543 C55.1275661,42.8739543 64,33.4569038 64,21.6185732 C64,9.77916158 55.1275661,0 43.2932416,0 Z"],["transform","translate(0.000000, 18.000000)"],["vector-effect","non-scaling-stroke","d","M90.5057553,53.0538038 C90.5057553,53.0538038 116.215483,58.0701972 145.433002,58.0701972 C174.650521,58.0701972 204.505755,53.0538038 204.505755,53.0538038 C204.505755,53.0538038 192.222862,60.6378663 185.905056,63.0258453 C179.58725,65.4138243 166.637272,67.3671811 166.637272,67.3671811 C166.637272,67.3671811 153.865271,70.7987363 147.505755,70.9374424 C141.14624,71.0761485 132.54218,68.1108222 132.54218,68.1108222 L106.786672,63.0258453 L90.5057553,53.0538038 Z",1,"slds-illustration__fill-primary"],["vector-effect","non-scaling-stroke","d","M84.8198266,43.3368404 C84.8198266,43.3368404 99.4457512,70.425365 147.915957,70.425365 C196.386164,70.425365 214.819827,43.3368404 214.819827,43.3368404","stroke-width","4","stroke-linecap","round","stroke-linejoin","round",1,"slds-illustration__stroke-primary"],["vector-effect","non-scaling-stroke","d","M73,49.5 L88,49.5","stroke-width","3","stroke-linecap","round",1,"slds-illustration__stroke-primary"],["vector-effect","non-scaling-stroke","d","M211,49.5 L226,49.5","stroke-width","3","stroke-linecap","round",1,"slds-illustration__stroke-primary"],["vector-effect","non-scaling-stroke","d","M142.74548,0 L153.650377,2.22044605e-16 C154.478804,8.05656105e-16 155.150377,0.671572875 155.150377,1.5 L155.150377,2.98261094 C155.150377,3.11136765 155.100706,3.2351613 155.01171,3.32820944 L146.234757,12.5047677 L155.209827,12.5047677 C156.038254,12.5047677 156.709827,13.1763405 156.709827,14.0047677 L156.709827,14.4270108 C156.709827,15.2554379 156.038254,15.9270108 155.209827,15.9270108 L141.888626,15.9270108 C141.060199,15.9270108 140.388626,15.2554379 140.388626,14.4270108 L140.388626,12.8248256 C140.388626,12.696109 140.438265,12.5723507 140.527212,12.4793109 L149.20663,3.40051458 L142.74548,3.40051458 C141.917053,3.40051458 141.24548,2.7289417 141.24548,1.90051458 L141.24548,1.5 C141.24548,0.671572875 141.917053,1.52179594e-16 142.74548,0 Z",1,"slds-illustration__fill-primary"],["vector-effect","non-scaling-stroke","d","M20,81.5 L390,81.5","stroke-width","3","stroke-linecap","round",1,"slds-illustration__stroke-primary"],["vector-effect","non-scaling-stroke","d","M0,81.5 L12,81.5","stroke-width","3","stroke-linecap","round",1,"slds-illustration__stroke-primary"],["transform","translate(175.500000, 153.000000)"],["transform","translate(0.000000, 7.000000)",1,"slds-illustration__fill-secondary"],["vector-effect","non-scaling-stroke","d","M19.3444016,2.17529966 L32.8957957,84.445825 C33.0753185,85.5357082 32.3373256,86.5647651 31.2474424,86.7442879 C31.1399954,86.7619863 31.0312825,86.7708798 30.9223876,86.7708798 L2.12566435,86.7708798 C1.02109485,86.7708798 0.125664347,85.8754493 0.125664347,84.7708798 C0.125664347,84.6486417 0.136870913,84.526661 0.159143349,84.4064691 L15.4044726,2.13594377 C15.6057311,1.04986421 16.6493247,0.332574998 17.7354043,0.533833473 C18.5639901,0.687376483 19.2074411,1.34381197 19.3444016,2.17529966 Z"],["stroke-linecap","round","stroke-width","3",1,"slds-illustration__stroke-primary"],["vector-effect","non-scaling-stroke","stroke-linejoin","round","points","17 0.709590879 34 94.5 -1.82254212e-12 94.5"],["vector-effect","non-scaling-stroke","d","M17,8.09449405 C17,92.0999502 17,135.036706 17,136.904762 C17,135.036706 17,92.0999502 17,8.09449405 Z"],["vector-effect","non-scaling-stroke","d","M17,64.2334004 C24.3333333,71.7198767 28,75.6881307 28,76.1381623 C28,75.6881307 24.3333333,71.7198767 17,64.2334004 Z","stroke-linejoin","round","transform","translate(22.500000, 70.185781) scale(-1, 1) translate(-22.500000, -70.185781) "],["vector-effect","non-scaling-stroke","d","M8,50.2334004 C14,57.05321 17,60.6881307 17,61.1381623 C17,60.6881307 14,57.05321 8,50.2334004 Z","stroke-linejoin","round"],["transform","translate(307.500000, 135.000000)"],["transform","translate(0.000000, 2.000000)",1,"slds-illustration__fill-secondary"],["vector-effect","non-scaling-stroke","d","M29.524032,0.669921875 L55.6419593,108.305728 C55.9024257,109.379148 55.2433964,110.460477 54.1699762,110.720943 C54.0155692,110.75841 53.8572476,110.777344 53.69836,110.777344 L2.40272523,110.777344 C1.29815573,110.777344 0.402725233,109.881913 0.402725233,108.777344 C0.402725233,108.601258 0.42597945,108.425943 0.471884777,108.255946 L29.524032,0.669921875 Z"],["vector-effect","non-scaling-stroke","stroke-linejoin","round","points","29 0 56.572466 112.5 0 112.5"],["vector-effect","non-scaling-stroke","d","M29,6.09449405 C29,103.433283 29,153.036706 29,154.904762 C29,153.036706 29,103.433283 29,6.09449405 Z"],["vector-effect","non-scaling-stroke","d","M29,74.2334004 C41,87.05321 47,93.6881307 47,94.1381623 C47,93.6881307 41,87.05321 29,74.2334004 Z","stroke-linejoin","round","transform","translate(38.000000, 84.185781) scale(-1, 1) translate(-38.000000, -84.185781) "],["vector-effect","non-scaling-stroke","d","M14,61.2334004 C24,72.7198767 29,78.6881307 29,79.1381623 C29,78.6881307 24,72.7198767 14,61.2334004 Z","stroke-linejoin","round"],["vector-effect","non-scaling-stroke","d","M29,48.2334004 C36.3333333,57.05321 40,61.6881307 40,62.1381623 C40,61.6881307 36.3333333,57.05321 29,48.2334004 Z","stroke-linejoin","round","transform","translate(34.500000, 55.185781) scale(-1, 1) translate(-34.500000, -55.185781) "],["transform","translate(347.500000, 166.000000)"],["transform","translate(0.000000, 4.000000)",1,"slds-illustration__fill-secondary"],["vector-effect","non-scaling-stroke","stroke-linejoin","round","points","17 0.709590879 34 91.5 -1.82254212e-12 91.5"],["vector-effect","non-scaling-stroke","d","M17,5.09449405 C17,83.0999502 17,123.036706 17,124.904762 C17,123.036706 17,83.0999502 17,5.09449405 Z"],["vector-effect","non-scaling-stroke","d","M17,61.2334004 C24.3333333,68.7198767 28,72.6881307 28,73.1381623 C28,72.6881307 24.3333333,68.7198767 17,61.2334004 Z","stroke-linejoin","round","transform","translate(22.500000, 67.185781) scale(-1, 1) translate(-22.500000, -67.185781) "],["transform","translate(392.000000, 184.000000)","stroke-linecap","round","stroke-width","3",1,"slds-illustration__stroke-secondary"],["transform","translate(31.713442, 25.088326) rotate(-15.000000) translate(-31.713442, -25.088326) translate(4.713442, 6.588326)"],["vector-effect","non-scaling-stroke","d","M31.0360707,3.43528591 C31.0360707,3.43528591 40.5802283,0.671893051 42.6488424,10.6908663","transform","translate(36.842457, 6.888440) rotate(41.000000) translate(-36.842457, -6.888440) "],["vector-effect","non-scaling-stroke","d","M40.4282002,10.1797377 C40.4282002,10.1797377 49.9723578,7.4163448 52.0409719,17.435318","transform","translate(46.234586, 13.632892) scale(-1, 1) rotate(-41.000000) translate(-46.234586, -13.632892) "],["vector-effect","non-scaling-stroke","d","M0.730284783,29.5865514 C0.730284783,29.5865514 10.2744424,26.8231586 12.3430565,36.8421318"],["vector-effect","non-scaling-stroke","d","M12.7302848,29.5865514 C12.7302848,29.5865514 22.2744424,26.8231586 24.3430565,36.8421318","transform","translate(18.536671, 33.039705) scale(-1, 1) translate(-18.536671, -33.039705) "],[1,"slds-text-longform"],[1,"slds-text-heading--small"],["label","LBL_NO_ACTIVITIES"]],template:function(e,t){1&e&&(i.TgZ(0,"div",0),i.O4$(),i.TgZ(1,"svg",1)(2,"g",2)(3,"g",3)(4,"g")(5,"g",4),i._UZ(6,"polyline",5)(7,"polyline",6)(8,"path",7)(9,"path",8)(10,"path",9),i.qZA(),i.TgZ(11,"g",10),i._UZ(12,"path",11)(13,"path",12)(14,"path",13)(15,"path",14),i.qZA(),i.TgZ(16,"g",15),i._UZ(17,"path",11)(18,"path",12)(19,"path",13)(20,"path",14),i.qZA(),i.TgZ(21,"g",16)(22,"g",17),i._UZ(23,"path",18)(24,"path",19)(25,"path",20),i.qZA(),i.TgZ(26,"g",21),i._UZ(27,"path",22)(28,"path",23)(29,"path",24)(30,"path",25)(31,"path",26)(32,"path",27)(33,"path",28),i.qZA()(),i.TgZ(34,"g",29)(35,"g",30),i._UZ(36,"path",31),i.qZA(),i.TgZ(37,"g",32),i._UZ(38,"polygon",33)(39,"path",34)(40,"path",35)(41,"path",36),i.qZA()(),i.TgZ(42,"g",37)(43,"g",38),i._UZ(44,"path",39),i.qZA(),i.TgZ(45,"g",32),i._UZ(46,"polygon",40)(47,"path",41)(48,"path",42)(49,"path",43)(50,"path",44),i.qZA()(),i.TgZ(51,"g",45)(52,"g",46),i._UZ(53,"path",31),i.qZA(),i.TgZ(54,"g",32),i._UZ(55,"polygon",47)(56,"path",48)(57,"path",49),i.qZA()(),i.TgZ(58,"g",50)(59,"g",51),i._UZ(60,"path",52)(61,"path",53)(62,"path",54)(63,"path",55),i.qZA()()()()()(),i.kcU(),i.TgZ(64,"div",56)(65,"h3",57),i._UZ(66,"system-label",58),i.qZA()()())},dependencies:[l._],encapsulation:2})}return SystemIllustrationNoTask})()},59574:(e,t,s)=>{"use strict";s.d(t,{k:()=>l});var i=s(62242);const n=["*"];let l=(()=>{class SystemIllustrationPageNotAvailable{static ɵfac=function(e){return new(e||SystemIllustrationPageNotAvailable)};static ɵcmp=i.Xpm({type:SystemIllustrationPageNotAvailable,selectors:[["system-illustration-page-not-available"]],ngContentSelectors:n,decls:81,vars:0,consts:[[1,"slds-illustration","slds-illustration_small"],["viewBox","0 0 470 229","aria-hidden","true","xmlns","http://www.w3.org/2000/svg",1,"slds-illustration__svg"],["stroke","none","stroke-width","1","fill","none","fill-rule","evenodd"],["transform","translate(-65.000000, -89.000000)"],["transform","translate(67.000000, 266.000000)"],["vector-effect","non-scaling-stroke","d","M16,36.5 L466,36.5","stroke-width","3","stroke-linecap","round",1,"slds-illustration__stroke-secondary"],["vector-effect","non-scaling-stroke","d","M0,36.5 L6,36.5","stroke-width","3","stroke-linecap","round",1,"slds-illustration__stroke-secondary"],["vector-effect","non-scaling-stroke","stroke-width","3","stroke-linecap","round","stroke-linejoin","round","points","43 36 87.5 0 121.5 27",1,"slds-illustration__stroke-secondary"],["vector-effect","non-scaling-stroke","stroke-width","3","stroke-linecap","round","stroke-linejoin","round","points","111 17 121.5 9 153 36",1,"slds-illustration__stroke-secondary"],["vector-effect","non-scaling-stroke","d","M50.962964,14.4391572 L57,36 L45.770218,26.1063642 L49.037036,14.4391572 C49.1859485,13.9073269 49.7377996,13.5969106 50.2696299,13.7458231 C50.6059625,13.8399963 50.8687909,14.1028246 50.962964,14.4391572 Z","transform","translate(51.385109, 24.626882) scale(-1, 1) translate(-51.385109, -24.626882) ",1,"slds-illustration__fill-secondary"],["transform","translate(451.500000, 238.500000)"],["fill","#FFFFFF"],["vector-effect","non-scaling-stroke","d","M18.9209988,1.95433401 L33.259296,51.443436 C33.5666778,52.5043744 32.9557995,53.613617 31.8948612,53.9209988 C31.7139843,53.9734036 31.5266126,54 31.3382972,54 L2.6617028,54 C1.5571333,54 0.661702805,53.1045695 0.661702805,52 C0.661702805,51.8116846 0.688299176,51.6243129 0.74070397,51.443436 L15.0790012,1.95433401 C15.386383,0.893395645 16.4956256,0.282517358 17.556564,0.589899164 C18.2152102,0.780726338 18.7301717,1.29568777 18.9209988,1.95433401 Z"],["stroke-linecap","round","stroke-width","3",1,"slds-illustration__stroke-secondary"],["vector-effect","non-scaling-stroke","stroke-linejoin","round","points","17 0.323943662 34 54 -1.81721305e-12 54"],["vector-effect","non-scaling-stroke","d","M17,4.6953125 C17,43.0456294 17,62.6471919 17,63.5 C17,62.6471919 17,43.0456294 17,4.6953125 Z"],["vector-effect","non-scaling-stroke","d","M17,29.3239437 C22.3333333,35.7851611 25,39.1184944 25,39.3239437 C25,39.1184944 22.3333333,35.7851611 17,29.3239437 Z","stroke-linejoin","round","transform","translate(21.000000, 34.323944) scale(-1, 1) translate(-21.000000, -34.323944) "],["transform","translate(408.000000, 205.500000)"],["transform","translate(1.000000, 0.000000)","fill","#FFFFFF"],["vector-effect","non-scaling-stroke","d","M25.6478873,0 L50.879042,84.4273253 C51.1953215,85.4856452 50.5937789,86.5999782 49.535459,86.9162577 C49.3496374,86.9717906 49.1567264,87 48.9627843,87 L2.33299037,87 C1.22842087,87 0.332990367,86.1045695 0.332990367,85 C0.332990367,84.8060578 0.361199757,84.6131469 0.416732643,84.4273253 L25.6478873,0 Z"],["vector-effect","non-scaling-stroke","stroke-linejoin","round","points","26.5 0 52.5 87 0.5 87"],["vector-effect","non-scaling-stroke","d","M26.5,3.58642578 C26.5,64.0261034 26.5,94.9972948 26.5,96.5 C26.5,94.9972948 26.5,64.0261034 26.5,3.58642578 Z"],["vector-effect","non-scaling-stroke","d","M15.6478873,42 C22.9812207,49.078692 26.6478873,52.7453587 26.6478873,53 C26.6478873,52.7453587 22.9812207,49.078692 15.6478873,42 Z","stroke-linejoin","round"],["vector-effect","non-scaling-stroke","d","M27.6478873,68 C36.9812207,57.078692 41.6478873,51.7453587 41.6478873,52 C41.6478873,51.7453587 36.9812207,57.078692 27.6478873,68 Z","stroke-linejoin","round"],["transform","translate(323.317280, 164.835938) rotate(-45.000000) translate(-323.317280, -164.835938) translate(242.317280, 130.835938)"],["transform","translate(5.000000, 44.000000)","fill","#FFFFFF"],["vector-effect","non-scaling-stroke","d","M4.18947979,0.995611783 L0.115234375,11.9555255 C12.0957996,19.4577143 18.3338849,23.301537 18.8294904,23.4869936 C19.1669204,23.6132606 21.7612542,24.0399819 26.9701953,23.7763273 C28.5980425,23.6939326 31.6346656,23.3623612 36.0800647,22.7816131 C40.0461992,21.6828201 43.0275796,20.7161876 45.0242059,19.8817158 C47.0208321,19.0472439 50.3465588,17.377878 55.0013859,14.8736182 L47.5277368,3.21878589 L4.18947979,0.995611783 Z"],["transform","translate(1.000000, 0.000000)",1,"slds-illustration__fill-secondary"],["stroke-width","3","stroke-linecap","round","stroke-linejoin","round","x","0.973240311","y","10.995821","width","11.5","height","12",1,"slds-illustration__stroke-primary"],["vector-effect","non-scaling-stroke","d","M4.77755146,50.2284782 C13.286202,52.6362568 21.480957,53.7936597 29.3618164,53.7006867 C37.2426758,53.6077138 44.7765582,51.7400968 51.9634637,48.0978356 C50.0751252,44.4670451 48.7826758,41.7898449 48.0861155,40.0662351 C47.3895551,38.3426252 46.5236255,35.6790055 45.4883267,32.075376 L45.2946319,0.293204959 L12.5695367,0.148192827 L12.5726441,32.0166806 C11.5738974,36.4623212 10.6196945,39.7477667 9.71003558,41.8730172 C8.80037666,43.9982676 7.15621528,46.7834213 4.77755146,50.2284782 Z"],["vector-effect","non-scaling-stroke","d","M45.4341011,10.7997716 L160.934101,10.7997716 L160.934101,29.2075859 C138.796894,24.9149057 121.296894,22.8695992 108.434101,23.0716664 C103.947529,23.0716664 96.9638862,23.0716664 87.4831733,23.0716664 L45.4341011,23.0716664 L45.4341011,10.7997716 Z"],["transform","translate(0.000000, 0.000000)"],["vector-effect","non-scaling-stroke","d","M13.5015145,4.53816197e-13 L46.505417,4.53816197e-13 L46.505417,24.0516129 C46.0805407,29.6108858 47.016166,35.1227138 49.312293,40.5870968 C51.6084201,46.0514798 55.1733269,52.064383 60.0070135,58.6258065 C49.5057718,64.6387097 39.5045892,67.6451613 30.0034658,67.6451613 C20.5023423,67.6451613 10.5011597,64.6387097 -8.20017976e-05,58.6258065 C5.7540776,50.5948062 9.47046374,44.581903 11.1490764,40.5870968 C12.8276891,36.5922906 13.6118351,31.0804626 13.5015145,24.0516129 L13.5015145,4.53816197e-13 Z","stroke-width","3","stroke-linecap","round","stroke-linejoin","round",1,"slds-illustration__stroke-primary"],["stroke-width","3","stroke-linecap","round","stroke-linejoin","round","x","1.97324031","y","10.995821","width","11.5","height","12",1,"slds-illustration__stroke-primary"],["vector-effect","non-scaling-stroke","d","M46.4341011,10.7997716 L161.934101,10.7997716 L161.934101,29.2075859 C139.796894,24.9149057 122.296894,22.8695992 109.434101,23.0716664 C104.947529,23.0716664 97.9638862,23.0716664 88.4831733,23.0716664 L46.4341011,23.0716664 L46.4341011,10.7997716 Z","stroke-width","3","stroke-linecap","round","stroke-linejoin","round",1,"slds-illustration__stroke-primary"],["vector-effect","non-scaling-stroke","points","66 10.5225806 102 10.5225806 102.162282 23.0225806 66.0542614 22.8973803",1,"slds-illustration__fill-primary"],["transform","translate(124.000000, 219.518658)"],["transform","translate(117.000000, 0.000000)","fill","#FFFFFF"],["vector-effect","non-scaling-stroke","points","0.115234375 0.823139211 0.115234375 6.95790484 131.128906 21.124897 131.128906 14.975483"],["transform","translate(95.000000, 4.000000)",1,"slds-illustration__fill-secondary"],["vector-effect","non-scaling-stroke","points","21.9667969 0.213764211 152.662109 14.9813423 152.662109 65.9637642 160.867188 80.1434517 174.628906 92.3211861 0.63671875 92.3211861 13.7480469 80.1434517 21.9667969 61.2977486"],["vector-effect","non-scaling-stroke","d","M118.5,15.4813423 L118.5,61.4813423 C117.921224,71.8381104 115.333984,79.318309 110.738281,83.921938 C106.142578,88.525567 100.896484,92.8787018 95,96.9813423 L271,96.9813423 C264.389323,92.6555667 259.341797,87.3824891 255.857422,81.1621094 C252.373047,74.9417297 250.253906,67.5264029 249.5,58.916129 L249.5,0.481342336 L118.5,15.4813423 Z","stroke-width","3","stroke-linecap","round","stroke-linejoin","round","transform","translate(183.000000, 48.731342) scale(-1, 1) translate(-183.000000, -48.731342) ",1,"slds-illustration__stroke-primary"],["vector-effect","non-scaling-stroke","d","M271.928751,76.7784845 L280,97 L262,97 L270.071249,76.7784845 C270.275982,76.2655493 270.857768,76.0157027 271.370703,76.2204365 C271.625359,76.3220801 271.827108,76.5238291 271.928751,76.7784845 Z",1,"slds-illustration__fill-primary"],["vector-effect","non-scaling-stroke","d","M282.428751,84.2946136 L287.5,97 L275.5,97 L280.571249,84.2946136 C280.775982,83.7816784 281.357768,83.5318318 281.870703,83.7365656 C282.125359,83.8382092 282.327108,84.0399581 282.428751,84.2946136 Z",1,"slds-illustration__fill-primary"],["vector-effect","non-scaling-stroke","d","M90.4287513,76.7784845 L98.5,97 L80.5,97 L88.5712487,76.7784845 C88.7759825,76.2655493 89.3577681,76.0157027 89.8707033,76.2204365 C90.1253588,76.3220801 90.3271077,76.5238291 90.4287513,76.7784845 Z","transform","translate(89.500000, 86.998788) scale(-1, 1) translate(-89.500000, -86.998788) ",1,"slds-illustration__fill-primary"],["vector-effect","non-scaling-stroke","d","M76.9287513,84.2946136 L82,97 L70,97 L75.0712487,84.2946136 C75.2759825,83.7816784 75.8577681,83.5318318 76.3707033,83.7365656 C76.6253588,83.8382092 76.8271077,84.0399581 76.9287513,84.2946136 Z","transform","translate(76.000000, 90.756853) scale(-1, 1) translate(-76.000000, -90.756853) ",1,"slds-illustration__fill-primary"],["vector-effect","non-scaling-stroke","d","M20,96.9813423 L370,96.9813423","stroke-width","3","stroke-linecap","round","stroke-linejoin","round",1,"slds-illustration__stroke-primary"],["vector-effect","non-scaling-stroke","d","M0,96.9813423 L12,96.9813423","stroke-width","3","stroke-linecap","round","stroke-linejoin","round",1,"slds-illustration__stroke-primary"],["vector-effect","non-scaling-stroke","d","M226.5,14.4813423 L226.5,40.4813423 C226.854167,55.9423134 234.6875,67.6089801 250,75.4813423","stroke-width","3","stroke-linecap","round","stroke-linejoin","round",1,"slds-illustration__stroke-primary"],["vector-effect","non-scaling-stroke","d","M212.5,12.4813423 L212.5,51.4813423 C211.329427,75.4461105 226.830078,87.4461105 259.001953,87.4813423","stroke-width","3","stroke-linecap","round","stroke-linejoin","round",1,"slds-illustration__stroke-primary"],["vector-effect","non-scaling-stroke","d","M190.5,9.48134234 L190.5,96.4813423","stroke-width","3","stroke-linecap","round","stroke-linejoin","round",1,"slds-illustration__stroke-primary"],["vector-effect","non-scaling-stroke","d","M160.5,5.48134234 L160.5,96.4813423","stroke-width","3","stroke-linecap","round","stroke-linejoin","round",1,"slds-illustration__stroke-primary"],["vector-effect","non-scaling-stroke","d","M148.5,4.48134234 L148.5,60.4813423 C148.166667,84.3362203 131.634766,96.2636593 98.9042969,96.2636593","stroke-width","3","stroke-linecap","round","stroke-linejoin","round",1,"slds-illustration__stroke-primary"],["vector-effect","non-scaling-stroke","d","M131.5,2.48134234 L131.5,54.2203125 C132.691406,76.2363071 124.326172,87.2443044 106.404297,87.2443044","stroke-width","3","stroke-linecap","round","stroke-linejoin","round",1,"slds-illustration__stroke-primary"],["transform","translate(160.000000, 107.000000)","stroke-linecap","round","stroke-width","3",1,"slds-illustration__stroke-secondary"],["vector-effect","non-scaling-stroke","d","M44,17.5 L63,17.5 C62.2789714,12.0723971 64.081543,7.53186978 68.4077148,3.87841797 C73.3754883,-0.195556641 79.2734375,0.717773438 82.440918,2.12353516 C85.6083984,3.52929687 87.9606934,5.46069336 89.5913086,9.10524041 C90.2822266,10.6397351 90.7517904,11.9379883 91,13"],["vector-effect","non-scaling-stroke","d","M83,20.5 C84.0558268,16.8461914 86.2227376,14.4572754 89.5007324,13.333252 C94.4177246,11.6472168 99.0800781,13.8925781 100.942383,16.1518555 C102.804687,18.4111328 103.39502,20.2260742 103.746582,22.1201172 C103.980957,23.3828125 104.06543,24.8427734 104,26.5 C108.141764,26.3313802 110.918945,27.1647135 112.331543,29 C114.040039,31.1936035 114.215332,33.817627 113.593018,35.75 C112.970703,37.682373 110.894531,40.5 107,40.5 L28,40.5"],["vector-effect","non-scaling-stroke","d","M18,27.5 L83.0004985,27.5"],["vector-effect","non-scaling-stroke","d","M0,27.5 L8,27.5"],["transform","translate(319.000000, 147.000000)","stroke-linecap","round","stroke-width","3",1,"slds-illustration__stroke-secondary"],["transform","translate(179.000000, 216.518658)"],["transform","translate(6.000000, 2.000000)","fill","#FFFFFF"],["vector-effect","non-scaling-stroke","d","M20.8180195,40.0662428 L20.8180195,3.98882348 C14.8180195,9.37296043 11.8180195,15.3858637 11.8180195,22.0275332 C11.8180195,28.6692027 14.8180195,34.6821059 20.8180195,40.0662428 Z","transform","translate(16.318019, 22.027533) scale(-1, -1) rotate(-45.000000) translate(-16.318019, -22.027533) "],["vector-effect","non-scaling-stroke","d","M38.0732996,21.3284985 L38.0732996,-1.21988855 C34.3232996,2.14519704 32.4482996,5.90326156 32.4482996,10.054305 C32.4482996,14.2053484 34.3232996,17.963413 38.0732996,21.3284985 Z","transform","translate(35.260800, 10.054305) scale(1, -1) rotate(-45.000000) translate(-35.260800, -10.054305) "],["transform","translate(0.000000, 6.000000)",1,"slds-illustration__fill-secondary"],["vector-effect","non-scaling-stroke","d","M20.8180195,42.0662428 L20.8180195,5.98882348 C14.8180195,11.3729604 11.8180195,17.3858637 11.8180195,24.0275332 C11.8180195,30.6692027 14.8180195,36.6821059 20.8180195,42.0662428 Z","transform","translate(16.318019, 24.027533) rotate(-45.000000) translate(-16.318019, -24.027533) "],["vector-effect","non-scaling-stroke","d","M47.9262378,21.3284985 L47.9262378,-1.21988855 C44.1762378,2.14519704 42.3012378,5.90326156 42.3012378,10.054305 C42.3012378,14.2053484 44.1762378,17.963413 47.9262378,21.3284985 Z","transform","translate(45.113738, 10.054305) scale(-1, 1) rotate(-45.000000) translate(-45.113738, -10.054305) "],["stroke-linecap","round","stroke-linejoin","round","stroke-width","3",1,"slds-illustration__stroke-primary"],["vector-effect","non-scaling-stroke","d","M60,64.4813423 C42.5559896,58.4405997 33.7226563,49.4405997 33.5,37.4813423 L33.5,0.481342336"],["vector-effect","non-scaling-stroke","d","M19.5,44.8774194 C25.5,39.4932824 28.5,33.4803792 28.5,26.8387097 C28.5,20.1970402 25.5,14.1841369 19.5,8.8 C13.5,14.1841369 10.5,20.1970402 10.5,26.8387097 C10.5,33.4803792 13.5,39.4932824 19.5,44.8774194 Z","transform","translate(19.500000, 26.838710) rotate(-45.000000) translate(-19.500000, -26.838710) "],["vector-effect","non-scaling-stroke","d","M43.125,25.3354839 C46.875,21.9703983 48.75,18.2123338 48.75,14.0612903 C48.75,9.91024688 46.875,6.15218236 43.125,2.78709677 C39.375,6.15218236 37.5,9.91024688 37.5,14.0612903 C37.5,18.2123338 39.375,21.9703983 43.125,25.3354839 Z","transform","translate(43.125000, 14.061290) scale(-1, 1) rotate(-45.000000) translate(-43.125000, -14.061290) "],[1,"slds-text-longform"],[1,"slds-text-heading_medium"]],template:function(e,t){1&e&&(i.F$t(),i.TgZ(0,"div",0),i.O4$(),i.TgZ(1,"svg",1)(2,"g",2)(3,"g",3)(4,"g")(5,"g",4),i._UZ(6,"path",5)(7,"path",6)(8,"polyline",7)(9,"polyline",8)(10,"path",9),i.qZA(),i.TgZ(11,"g",10)(12,"g",11),i._UZ(13,"path",12),i.qZA(),i.TgZ(14,"g",13),i._UZ(15,"polygon",14)(16,"path",15)(17,"path",16),i.qZA()(),i.TgZ(18,"g",17)(19,"g",18),i._UZ(20,"path",19),i.qZA(),i.TgZ(21,"g",13),i._UZ(22,"polygon",20)(23,"path",21)(24,"path",22)(25,"path",23),i.qZA()(),i.TgZ(26,"g",24)(27,"g",25),i._UZ(28,"path",26),i.qZA(),i.TgZ(29,"g",27),i._UZ(30,"rect",28)(31,"path",29)(32,"path",30),i.qZA(),i.TgZ(33,"g",31),i._UZ(34,"path",32)(35,"rect",33)(36,"path",34)(37,"polygon",35),i.qZA()(),i.TgZ(38,"g",36)(39,"g",37),i._UZ(40,"polygon",38),i.qZA(),i.TgZ(41,"g",39),i._UZ(42,"polygon",40),i.qZA(),i.TgZ(43,"g"),i._UZ(44,"path",41)(45,"path",42)(46,"path",43)(47,"path",44)(48,"path",45)(49,"path",46)(50,"path",47)(51,"path",48)(52,"path",49)(53,"path",50)(54,"path",51)(55,"path",52)(56,"path",53),i.qZA()(),i.TgZ(57,"g",54),i._UZ(58,"path",55)(59,"path",56)(60,"path",57)(61,"path",58),i.qZA(),i.TgZ(62,"g",59),i._UZ(63,"path",55)(64,"path",56)(65,"path",57)(66,"path",58),i.qZA(),i.TgZ(67,"g",60)(68,"g",61),i._UZ(69,"path",62)(70,"path",63),i.qZA(),i.TgZ(71,"g",64),i._UZ(72,"path",65)(73,"path",66),i.qZA(),i.TgZ(74,"g",67),i._UZ(75,"path",68)(76,"path",69)(77,"path",70),i.qZA()()()()()(),i.kcU(),i.TgZ(78,"div",71)(79,"h3",72),i.Hsn(80),i.qZA()()())},encapsulation:2})}return SystemIllustrationPageNotAvailable})()},66267:(e,t,s)=>{"use strict";s.d(t,{w:()=>h});var i=s(62242),n=s(55329),l=s(93441),o=s(44755),a=s(59574),d=s(83463),r=s(94664);function c(e,t){1&e&&i._UZ(0,"system-spinner")}function u(e,t){1&e&&(i.TgZ(0,"system-illustration-page-not-available"),i._UZ(1,"system-label",4),i.qZA())}function m(e,t){if(1&e&&(i.TgZ(0,"div",2),i.YNc(1,c,1,0,"system-spinner",3),i.YNc(2,u,2,0,"system-illustration-page-not-available",3),i.qZA()),2&e){const e=i.oxw();i.xp6(1),i.Q6J("ngIf",!e.loadingerror),i.xp6(1),i.Q6J("ngIf",e.loadingerror)}}function g(e,t){if(1&e&&(i.TgZ(0,"div",5),i._UZ(1,"img",6),i.qZA()),2&e){const e=i.oxw();i.xp6(1),i.Q6J("src",e.imgsrc,i.LSH)}}let h=(()=>{class SystemImagePreview{language;helper;imgsrc="";loadingerror=!1;constructor(e,t){this.language=e,this.helper=t}set data(e){this.imgsrc=e}static ɵfac=function(e){return new(e||SystemImagePreview)(i.Y36(n.d),i.Y36(l._))};static ɵcmp=i.Xpm({type:SystemImagePreview,selectors:[["system-image-preview"]],inputs:{imgsrc:"imgsrc",loadingerror:"loadingerror",data:"data"},decls:2,vars:2,consts:[["style","height: 50vh;","class","slds-align--absolute-center",4,"ngIf"],["class","slds-p-around--small slds-text-align--center",4,"ngIf"],[1,"slds-align--absolute-center",2,"height","50vh"],[4,"ngIf"],["label","MSG_ERROR_LOADING_FILE"],[1,"slds-p-around--small","slds-text-align--center"],[2,"max-height","80vh","overflow","hidden",3,"src"]],template:function(e,t){1&e&&(i.YNc(0,m,3,2,"div",0),i.YNc(1,g,2,1,"div",1)),2&e&&(i.Q6J("ngIf",!t.imgsrc),i.xp6(1),i.Q6J("ngIf",t.imgsrc))},dependencies:[o.O5,a.k,d._,r.W],encapsulation:2})}return SystemImagePreview})()},4728:(e,t,s)=>{"use strict";s.d(t,{Q:()=>p});var i=s(62242),n=s(95030),l=s(55329),o=s(4154),a=s(44755),d=s(66898),r=s(34036),c=s(37302);function u(e,t){if(1&e&&(i.TgZ(0,"option",8),i._uU(1),i.qZA()),2&e){const e=t.$implicit;i.Q6J("value",e.id),i.xp6(1),i.Oqu(e.name)}}function m(e,t){if(1&e&&(i.TgZ(0,"optgroup",6),i.YNc(1,u,2,2,"option",7),i.ALo(2,"systemmodulecustompipe"),i.qZA()),2&e){const e=i.oxw();i.Q6J("label","custom "+e.language.getLabel("LBL_ACTIONSET")),i.xp6(1),i.Q6J("ngForOf",i.xi3(2,2,e._actionsets,e._module))}}function g(e,t){if(1&e&&(i.TgZ(0,"option",8),i._uU(1),i.qZA()),2&e){const e=t.$implicit;i.Q6J("value",e.id),i.xp6(1),i.Oqu(e.name)}}function h(e,t){if(1&e&&(i.TgZ(0,"optgroup",6),i.YNc(1,g,2,2,"option",7),i.ALo(2,"systemmoduleglobalpipe"),i.qZA()),2&e){const e=i.oxw();i.Q6J("label","global "+e.language.getLabel("LBL_ACTIONSET")),i.xp6(1),i.Q6J("ngForOf",i.xi3(2,2,e._actionsets,e._module))}}let p=(()=>{class SystemInputActionset{language;metadata;disabled=!1;onChange;onTouched;_actionset;_actionsets=[];_module="";constructor(e,t){this.language=e,this.metadata=t,this._actionsets=this.metadata.getActionSets()}get actionset(){return this._actionset}set actionset(e){this._actionset=e,this.onChange(e)}detectModule(){this._actionset&&(this._module=this.metadata.getActionSet(this._actionset).module)}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}writeValue(e){this._actionset=e,this.detectModule()}static ɵfac=function(e){return new(e||SystemInputActionset)(i.Y36(l.d),i.Y36(o.Pu))};static ɵcmp=i.Xpm({type:SystemInputActionset,selectors:[["system-input-actionset"]],inputs:{disabled:"disabled"},features:[i._Bn([{provide:n.JU,useExisting:(0,i.Gpc)((()=>SystemInputActionset)),multi:!0}])],decls:10,vars:12,consts:[[1,"slds-grid"],[1,"slds-p-right--xxx-small","slds-size--1-of-3",3,"ngModel","displayAsterisk","ngModelChange"],[1,"slds-form-element__control","slds-p-left--xxx-small","slds-size--2-of-3"],[1,"slds-select_container"],[1,"slds-select",3,"disabled","ngModel","ngModelChange"],[3,"label",4,"ngIf"],[3,"label"],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(e,t){1&e&&(i.TgZ(0,"div",0)(1,"system-input-module",1),i.NdJ("ngModelChange",(function(e){return t._module=e})),i.qZA(),i.TgZ(2,"div",2)(3,"div",3)(4,"select",4),i.NdJ("ngModelChange",(function(e){return t.actionset=e})),i._UZ(5,"option"),i.YNc(6,m,3,5,"optgroup",5),i.ALo(7,"systemmodulecustompipe"),i.YNc(8,h,3,5,"optgroup",5),i.ALo(9,"systemmoduleglobalpipe"),i.qZA()()()()),2&e&&(i.xp6(1),i.Q6J("ngModel",t._module)("displayAsterisk",!0),i.xp6(3),i.Q6J("disabled",!t._module||t.disabled)("ngModel",t.actionset),i.xp6(2),i.Q6J("ngIf",i.xi3(7,6,t._actionsets,t._module).length>0),i.xp6(2),i.Q6J("ngIf",i.xi3(9,9,t._actionsets,t._module).length>0))},dependencies:[a.sg,a.O5,n.YN,n.Kr,n.EJ,n.JJ,n.On,d.a,r.N,c.m],encapsulation:2})}return SystemInputActionset})()},28973:(e,t,s)=>{"use strict";s.d(t,{N:()=>c});var i=s(62242),n=s(95030),l=s(55329),o=s(4154),a=s(14505),d=s(44755);function r(e,t){if(1&e&&(i.TgZ(0,"option",6),i._uU(1),i.qZA()),2&e){const e=t.$implicit;i.Q6J("value",e),i.xp6(1),i.Oqu(e)}}let c=(()=>{class SystemInputBackendMethod{language;metadata;backend;disabled=!1;onChange;onTouched;_value;_class="";_method="";_classexists=!1;_methods=[];constructor(e,t,s){this.language=e,this.metadata=t,this.backend=s}get modelOptions(){return{updateOn:"blur"}}get classname(){return this._class}set classname(e){this._class=e,""!=this.classname?this.validateNamespace():(this._method="",this._methods=[],this._classexists=!1),this.joinValue()}get methodname(){return this._method}set methodname(e){this._method=e,this.joinValue()}validateNamespace(){this.backend.getRequest("system/checkclass/"+btoa(this._class)).subscribe((e=>{this._classexists=e.classexists,this._methods=e.methods}))}splitValue(){if(this._value){let e=this._value.split("->");this._class=e[0],this._method=e[1],this.validateNamespace()}}joinValue(){""!=this._class?this._value=this._class+"->"+this._method:this._value="",this.onChange(this._value)}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}writeValue(e){e!=this._value&&(this._value=e,this.splitValue())}static ɵfac=function(e){return new(e||SystemInputBackendMethod)(i.Y36(l.d),i.Y36(o.Pu),i.Y36(a.y))};static ɵcmp=i.Xpm({type:SystemInputBackendMethod,selectors:[["system-input-backend-method"]],inputs:{disabled:"disabled"},features:[i._Bn([{provide:n.JU,useExisting:(0,i.Gpc)((()=>SystemInputBackendMethod)),multi:!0}])],decls:6,vars:6,consts:[[1,"slds-grid","slds-grid--vertical-align-center","slds-gutters_direct-xx-small"],["type","text",1,"slds-col","slds-size--2-of-3","slds-input",3,"disabled","ngModel","ngModelOptions","ngModelChange"],["focus",""],[1,"slds-col","slds-size--1-of-3","slds-select_container"],[1,"slds-select",3,"disabled","ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(e,t){1&e&&(i.TgZ(0,"div",0)(1,"input",1,2),i.NdJ("ngModelChange",(function(e){return t.classname=e})),i.qZA(),i.TgZ(3,"div",3)(4,"select",4),i.NdJ("ngModelChange",(function(e){return t.methodname=e})),i.YNc(5,r,2,2,"option",5),i.qZA()()()),2&e&&(i.xp6(1),i.Q6J("disabled",t.disabled)("ngModel",t.classname)("ngModelOptions",t.modelOptions),i.xp6(3),i.Q6J("disabled",!t._classexists||0==t._methods.length||t.disabled)("ngModel",t.methodname),i.xp6(1),i.Q6J("ngForOf",t._methods))},dependencies:[d.sg,n.YN,n.Kr,n.Fj,n.EJ,n.JJ,n.On],encapsulation:2})}return SystemInputBackendMethod})()},46991:(e,t,s)=>{"use strict";s.d(t,{V:()=>a});var i=s(62242),n=s(95030),l=s(44755);const o={provide:n.JU,useExisting:(0,i.Gpc)((()=>a)),multi:!0};let a=(()=>{class SystemInputBase64{minHeight=150;maxHeight=500;disabled=!1;onChange;onTouched;_value="";get value(){if(!this._value||""==this._value)return"";try{return decodeURIComponent(window.atob(this._value))}catch(e){try{return window.atob(this._value)}catch(e){return""}}}set value(e){this._value=window.btoa(e),"function"==typeof this.onChange&&this.onChange(this._value)}get textAreaStyle(){return{"min-height":this.minHeight+"px","max-height":this.maxHeight+"px"}}registerOnChange(e){this.onChange=t=>{e(t)}}registerOnTouched(e){this.onTouched=e}writeValue(e){this._value=e}static ɵfac=function(e){return new(e||SystemInputBase64)};static ɵcmp=i.Xpm({type:SystemInputBase64,selectors:[["system-input-base64"]],inputs:{minHeight:"minHeight",maxHeight:"maxHeight",disabled:"disabled"},features:[i._Bn([o])],decls:2,vars:3,consts:[[1,"slds-form-element__control"],[1,"slds-textarea","slds-scrollable--y","slds-m-vertical--xx-small",3,"ngModel","ngStyle","disabled","ngModelChange"]],template:function(e,t){1&e&&(i.TgZ(0,"div",0)(1,"textarea",1),i.NdJ("ngModelChange",(function(e){return t.value=e})),i.qZA()()),2&e&&(i.xp6(1),i.Q6J("ngModel",t.value)("ngStyle",t.textAreaStyle)("disabled",t.disabled))},dependencies:[l.PC,n.Fj,n.JJ,n.On],encapsulation:2})}return SystemInputBase64})()},17302:(e,t,s)=>{"use strict";s.d(t,{K:()=>g});var i=s(62242),n=s(95030),l=s(4154),o=s(55329),a=s(26625),d=s(44755),r=s(72656);function c(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"li",14),i.NdJ("click",(function(){const t=i.CHM(e).$implicit,s=i.oxw(2);return i.KtG(s.setColor(t))})),i.TgZ(1,"span",15)(2,"span",16)(3,"span",17),i._uU(4),i.qZA()()()()}if(2&e){const e=t.$implicit;i.xp6(2),i.Udp("background-color","#"+e)("cursor","pointer"),i.xp6(2),i.Oqu(e)}}function u(e,t){if(1&e&&(i.TgZ(0,"section",8)(1,"div",9)(2,"div",10)(3,"div",11)(4,"ul",12),i.YNc(5,c,5,5,"li",13),i.qZA()()()()()),2&e){const e=i.oxw();i.xp6(5),i.Q6J("ngForOf",e.colorPalette)("ngForTrackBy",e.trackByFnIndex)}}const m=function(e){return{"slds-is-edited":e}};let g=(()=>{class SystemInputColor{metadata;language;configuration;colorPalette=["e3abec","c2dbf7","9fd6ff","9de7da","9df0c0","fff099","fed49a","d073e0","86baf3","5ebbff","44d8be","3be282","ffe654","ffb758","bd35bd","5779c1","5ebbff","00aea9","3cba4c","f5bc25","f99221","580d8c","001970","0a2399","0b7477","0b6b50","b67e11","b85d0d"];onChange;onTouched;_value;strict=!1;isOpen=!1;isedited=!1;constructor(e,t,s){this.metadata=e,this.language=t,this.configuration=s}get value(){return this._value}set value(e){e!=this._value&&(this._value=e,this.onChange(e))}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}writeValue(e){this._value=e}trackByFnIndex(e,t){return e}colorStyle(e){return{background:this._value}}setColor(e){this.value="#"+e,this.isOpen=!1}static ɵfac=function(e){return new(e||SystemInputColor)(i.Y36(l.Pu),i.Y36(o.d),i.Y36(a.C))};static ɵcmp=i.Xpm({type:SystemInputColor,selectors:[["system-input-color"]],inputs:{isedited:"isedited"},features:[i._Bn([{provide:n.JU,useExisting:(0,i.Gpc)((()=>SystemInputColor)),multi:!0}])],decls:8,vars:6,consts:[[1,"slds-form-element","slds-is-relative"],[1,"slds-color-picker"],[1,"slds-form-element__control","slds-grid","slds-grid--vertical-align-center"],[1,"slds-button","slds-color-picker__summary-button","slds-button_icon","slds-button_icon-more",3,"click"],[1,"slds-swatch",3,"ngStyle"],["icon","down",1,"slds-button__icon","slds-button__icon_small","slds-m-left_xx-small"],["type","text",1,"slds-grow","slds-input",3,"ngClass","ngModel","ngModelChange"],["class","slds-popover slds-color-picker__selector slds-is-absolute","role","dialog",4,"ngIf"],["role","dialog",1,"slds-popover","slds-color-picker__selector","slds-is-absolute"],["id","dialog-body-id-37"],[1,"slds-color-picker","slds-color-picker_swatches-only","slds-grid","slds-grid--vertical-align-center","slds-grow"],[1,"slds-color-picker__selector"],["role","menu",1,"slds-color-picker__swatches"],["class","slds-color-picker__swatch","role","presentation",3,"click",4,"ngFor","ngForOf","ngForTrackBy"],["role","presentation",1,"slds-color-picker__swatch",3,"click"],["role","menuitem",1,"slds-color-picker__swatch-trigger","slds-is-selected"],[1,"slds-swatch"],[1,"slds-assistive-text"]],template:function(e,t){1&e&&(i.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"button",3),i.NdJ("click",(function(){return t.isOpen=!t.isOpen})),i._UZ(4,"span",4)(5,"system-button-icon",5),i.qZA(),i.TgZ(6,"input",6),i.NdJ("ngModelChange",(function(e){return t.value=e})),i.qZA()(),i.YNc(7,u,6,2,"section",7),i.qZA()()),2&e&&(i.xp6(4),i.Q6J("ngStyle",t.colorStyle("brandprimary")),i.xp6(2),i.Q6J("ngClass",i.VKq(4,m,t.isedited))("ngModel",t.value),i.xp6(1),i.Q6J("ngIf",t.isOpen))},dependencies:[d.mk,d.sg,d.O5,d.PC,n.Fj,n.JJ,n.On,r.J],encapsulation:2})}return SystemInputColor})()},21e3:(e,t,s)=>{"use strict";s.d(t,{x:()=>r});var i=s(62242),n=s(95030),l=s(55329),o=s(26625),a=s(44755);function d(e,t){if(1&e&&(i.TgZ(0,"option",4),i._uU(1),i.qZA()),2&e){const e=t.$implicit;i.Q6J("value",e.id),i.xp6(1),i.Oqu(e.name)}}let r=(()=>{class SystemInputCompanycodes{language;configuration;disabled=!1;onChange;onTouched;_companycode;_companycodes=[];constructor(e,t){this.language=e,this.configuration=t,this._companycodes=this.configuration.getData("companycodes"),"object"==typeof this._companycodes&&this._companycodes.sort(((e,t)=>e.name>t.name?-1:1))}get companycode(){return this._companycode}set companycode(e){this._companycode=e,this.onChange&&this.onChange(e)}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}writeValue(e){this._companycode=e}static ɵfac=function(e){return new(e||SystemInputCompanycodes)(i.Y36(l.d),i.Y36(o.C))};static ɵcmp=i.Xpm({type:SystemInputCompanycodes,selectors:[["system-input-companycodes"]],inputs:{disabled:"disabled"},features:[i._Bn([{provide:n.JU,useExisting:(0,i.Gpc)((()=>SystemInputCompanycodes)),multi:!0}])],decls:4,vars:3,consts:[[1,"slds-form-element__control"],[1,"slds-select_container"],[1,"slds-select",3,"disabled","ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(e,t){1&e&&(i.TgZ(0,"div",0)(1,"div",1)(2,"select",2),i.NdJ("ngModelChange",(function(e){return t.companycode=e})),i.YNc(3,d,2,2,"option",3),i.qZA()()()),2&e&&(i.xp6(2),i.Q6J("disabled",t.disabled)("ngModel",t.companycode),i.xp6(1),i.Q6J("ngForOf",t._companycodes))},dependencies:[a.sg,n.YN,n.Kr,n.EJ,n.JJ,n.On],encapsulation:2})}return SystemInputCompanycodes})()},44665:(e,t,s)=>{"use strict";s.d(t,{C:()=>p});var i=s(62242),n=s(95030),l=s(55329),o=s(4154),a=s(44755),d=s(34036),r=s(37302);function c(e,t){if(1&e&&(i.TgZ(0,"option",8),i._uU(1),i.qZA()),2&e){const e=t.$implicit;i.Q6J("value",e),i.xp6(1),i.Oqu(e)}}function u(e,t){if(1&e&&(i.TgZ(0,"option",8),i._uU(1),i.qZA()),2&e){const e=t.$implicit;i.Q6J("value",e.id),i.xp6(1),i.Oqu(e.name)}}function m(e,t){if(1&e&&(i.TgZ(0,"optgroup",9),i.YNc(1,u,2,2,"option",5),i.ALo(2,"systemmodulecustompipe"),i.qZA()),2&e){const e=i.oxw();i.Q6J("label","custom "+e.language.getLabel("LBL_COMPONENTSET")),i.xp6(1),i.Q6J("ngForOf",i.xi3(2,2,e._componentsets,e._module))}}function g(e,t){if(1&e&&(i.TgZ(0,"option",8),i._uU(1),i.qZA()),2&e){const e=t.$implicit;i.Q6J("value",e.id),i.xp6(1),i.Oqu(e.name)}}function h(e,t){if(1&e&&(i.TgZ(0,"optgroup",9),i.YNc(1,g,2,2,"option",5),i.ALo(2,"systemmoduleglobalpipe"),i.qZA()),2&e){const e=i.oxw();i.Q6J("label","global "+e.language.getLabel("LBL_COMPONENTSET")),i.xp6(1),i.Q6J("ngForOf",i.xi3(2,2,e._componentsets,e._module))}}let p=(()=>{class SystemInputComponentset{language;metadata;disabled=!1;onChange;onTouched;_componentset;_componentsets=[];_modules=[];_module="";constructor(e,t){this.language=e,this.metadata=t,this._componentsets=this.metadata.getComponentSets(),this._modules=this.metadata.getModules(),this._modules.sort()}get componentset(){return this._componentset}set componentset(e){this._componentset=e,this.onChange(e)}detectModule(){this._componentset&&(this._module=this.metadata.getComponentSet(this._componentset).module)}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}writeValue(e){this._componentset=e,this.detectModule()}static ɵfac=function(e){return new(e||SystemInputComponentset)(i.Y36(l.d),i.Y36(o.Pu))};static ɵcmp=i.Xpm({type:SystemInputComponentset,selectors:[["system-input-componentset"]],inputs:{disabled:"disabled"},features:[i._Bn([{provide:n.JU,useExisting:(0,i.Gpc)((()=>SystemInputComponentset)),multi:!0}])],decls:15,vars:13,consts:[[1,"slds-grid"],[1,"slds-form-element__control","slds-p-right--xxx-small","slds-size--1-of-3"],[1,"slds-select_container"],[1,"slds-select",3,"disabled","ngModel","ngModelChange"],["value","*"],[3,"value",4,"ngFor","ngForOf"],[1,"slds-form-element__control","slds-p-left--xxx-small","slds-size--2-of-3"],[3,"label",4,"ngIf"],[3,"value"],[3,"label"]],template:function(e,t){1&e&&(i.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"select",3),i.NdJ("ngModelChange",(function(e){return t._module=e})),i.TgZ(4,"option",4),i._uU(5,"*"),i.qZA(),i.YNc(6,c,2,2,"option",5),i.qZA()()(),i.TgZ(7,"div",6)(8,"div",2)(9,"select",3),i.NdJ("ngModelChange",(function(e){return t.componentset=e})),i._UZ(10,"option"),i.YNc(11,m,3,5,"optgroup",7),i.ALo(12,"systemmodulecustompipe"),i.YNc(13,h,3,5,"optgroup",7),i.ALo(14,"systemmoduleglobalpipe"),i.qZA()()()()),2&e&&(i.xp6(3),i.Q6J("disabled",t.disabled)("ngModel",t._module),i.xp6(3),i.Q6J("ngForOf",t._modules),i.xp6(3),i.Q6J("disabled",!t._module||t.disabled)("ngModel",t.componentset),i.xp6(2),i.Q6J("ngIf",i.xi3(12,7,t._componentsets,t._module.length>0)),i.xp6(2),i.Q6J("ngIf",i.xi3(14,10,t._componentsets,t._module.length>0)))},dependencies:[a.sg,a.O5,n.YN,n.Kr,n.EJ,n.JJ,n.On,d.N,r.m],encapsulation:2})}return SystemInputComponentset})()},9422:(e,t,s)=>{"use strict";s.d(t,{y:()=>g});var i=s(62242),n=s(95030),l=s(4154),o=s(55329),a=s(26625),d=s(44755),r=s(83463);function c(e,t){if(1&e&&(i.TgZ(0,"option",8),i._UZ(1,"system-label",9),i.qZA()),2&e){const e=t.$implicit;i.Q6J("value",e.cc),i.xp6(1),i.Q6J("label",e.label)}}function u(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"div",3)(1,"select",4,5),i.NdJ("ngModelChange",(function(t){i.CHM(e);const s=i.oxw();return i.KtG(s.value=t)})),i._UZ(3,"option",6),i.YNc(4,c,2,2,"option",7),i.qZA()()}if(2&e){const e=i.oxw();i.xp6(1),i.Q6J("ngModel",e.value)("disabled",e.disabled),i.xp6(3),i.Q6J("ngForOf",e.countries)}}function m(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"div",10)(1,"input",11),i.NdJ("ngModelChange",(function(t){i.CHM(e);const s=i.oxw();return i.KtG(s.value=t)})),i.qZA()()}if(2&e){const e=i.oxw();i.xp6(1),i.Q6J("ngModel",e.value)("disabled",e.disabled)}}let g=(()=>{class SystemInputCountry{metadata;language;configuration;disabled=!1;countries=[];onChange;onTouched;_value;strict=!1;constructor(e,t,s){this.metadata=e,this.language=t,this.configuration=s,"strict"==this.configuration.data.backendextensions.spiceui.config.format&&(this.strict=!0)}get value(){return this._value}set value(e){e!=this._value&&(this._value=e,this.onChange(e))}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}writeValue(e){this._value=e}ngOnInit(){this.strict&&this.getCountries()}getCountries(){let e=this.configuration.getData("countries");this.countries=e?.countries?e.countries:[],this.countries.sort(((e,t)=>this.language.getLabel(e.label).localeCompare(this.language.getLabel(t.label))))}static ɵfac=function(e){return new(e||SystemInputCountry)(i.Y36(l.Pu),i.Y36(o.d),i.Y36(a.C))};static ɵcmp=i.Xpm({type:SystemInputCountry,selectors:[["system-input-country"]],inputs:{disabled:"disabled"},features:[i._Bn([{provide:n.JU,useExisting:(0,i.Gpc)((()=>SystemInputCountry)),multi:!0}])],decls:4,vars:2,consts:[[1,"slds-form-element"],["class","slds-select_container",4,"ngIf","ngIfElse"],["countryinput",""],[1,"slds-select_container"],[1,"slds-select",3,"ngModel","disabled","ngModelChange"],["focus",""],["value",""],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[3,"label"],[1,"slds-form-element__control"],["type","text",1,"slds-input",3,"ngModel","disabled","ngModelChange"]],template:function(e,t){if(1&e&&(i.TgZ(0,"div",0),i.YNc(1,u,5,3,"div",1),i.YNc(2,m,2,2,"ng-template",null,2,i.W1O),i.qZA()),2&e){const e=i.MAs(3);i.xp6(1),i.Q6J("ngIf",t.strict)("ngIfElse",e)}},dependencies:[d.sg,d.O5,n.YN,n.Kr,n.Fj,n.EJ,n.JJ,n.On,r._],encapsulation:2})}return SystemInputCountry})()},8222:(e,t,s)=>{"use strict";s.d(t,{b:()=>D});var i=s(62242),n=s(50727),l=s(95030),o=s(55329),a=s(62422),d=s(83398),r=s(44755),c=s(72006),u=s(83463),m=s(40116);function g(e,t){1&e&&i._UZ(0,"system-label",31)}function h(e,t){1&e&&i._UZ(0,"system-label",32)}function p(e,t){1&e&&i._UZ(0,"system-label",33)}function f(e,t){1&e&&i._UZ(0,"system-label",34)}function b(e,t){if(1&e&&(i.TgZ(0,"label",26),i.YNc(1,g,1,0,"system-label",27),i.YNc(2,h,1,0,"system-label",28),i.YNc(3,p,1,0,"system-label",29),i.YNc(4,f,1,0,"system-label",30),i.qZA()),2&e){const e=i.oxw(2);i.Q6J("ngSwitch",e.expression.recurrence),i.xp6(1),i.Q6J("ngSwitchCase","daily"),i.xp6(1),i.Q6J("ngSwitchCase","weekly"),i.xp6(1),i.Q6J("ngSwitchCase","annually")}}function _(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"div",40)(1,"label",4),i._UZ(2,"system-label",41),i.qZA(),i.TgZ(3,"div",6)(4,"input",42),i.NdJ("ngModelChange",(function(t){i.CHM(e);const s=i.oxw(3);return i.KtG(s.expression.everyQuantity=t)}))("ngModelChange",(function(){i.CHM(e);const t=i.oxw(3);return i.KtG(t.setFieldValue())})),i.qZA()()()}if(2&e){const e=i.oxw(3);i.xp6(4),i.Q6J("ngModel",e.expression.everyQuantity)}}function v(e,t){1&e&&(i.TgZ(0,"label",4),i._UZ(1,"system-label",43),i.qZA())}function y(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"div",44)(1,"div",6)(2,"div",7)(3,"select",8),i.NdJ("ngModelChange",(function(t){i.CHM(e);const s=i.oxw(3);return i.KtG(s.expression.every=t)}))("ngModelChange",(function(){i.CHM(e);const t=i.oxw(3);return i.KtG(t.onEverySet())})),i.TgZ(4,"option",45),i._UZ(5,"system-label",46),i.qZA(),i.TgZ(6,"option",47),i._UZ(7,"system-label",46),i.qZA(),i.TgZ(8,"option",48),i._UZ(9,"system-label",46),i.qZA(),i.TgZ(10,"option",49),i._UZ(11,"system-label",46),i.qZA(),i.TgZ(12,"option",50),i._UZ(13,"system-label",46),i.qZA(),i.TgZ(14,"option",51),i._UZ(15,"system-label",46),i.qZA(),i.TgZ(16,"option",52),i._UZ(17,"system-label",53),i.qZA()()()()()}if(2&e){const e=i.oxw(3);i.xp6(3),i.Q6J("ngModel",e.expression.every),i.xp6(2),i.Q6J("label",e.expression.everyQuantity>1?"LBL_MINUTES":"LBL_MINUTE"),i.xp6(2),i.Q6J("label",e.expression.everyQuantity>1?"LBL_HOURS":"LBL_HOUR"),i.xp6(2),i.Q6J("label",e.expression.everyQuantity>1?"LBL_DAYS":"LBL_DAY"),i.xp6(2),i.Q6J("label",e.expression.everyQuantity>1?"LBL_DAYS_AT":"LBL_DAY_AT"),i.xp6(2),i.Q6J("label",e.expression.everyQuantity>1?"LBL_MONTHS":"LBL_MONTH"),i.xp6(2),i.Q6J("label",e.expression.everyQuantity>1?"LBL_MONTHS_AT":"LBL_MONTH_AT")}}function x(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"div",54)(1,"div",55)(2,"system-input-time",56),i.NdJ("ngModelChange",(function(t){i.CHM(e);const s=i.oxw(3);return i.KtG(s.expression.everyAtValue=t)}))("ngModelChange",(function(){i.CHM(e);const t=i.oxw(3);return i.KtG(t.setFieldValue())})),i.qZA(),i.TgZ(3,"span",57),i._UZ(4,"system-label",58),i.qZA()()()}if(2&e){const e=i.oxw(3);i.xp6(2),i.Q6J("ngModel",e.expression.everyAtValue)}}function w(e,t){1&e&&i._UZ(0,"system-label",66)}function Z(e,t){1&e&&i._UZ(0,"system-label",67)}function T(e,t){1&e&&i._UZ(0,"system-label",68)}function C(e,t){1&e&&i._UZ(0,"system-label",69)}function k(e,t){if(1&e&&(i.ynx(0,61),i.YNc(1,w,1,0,"system-label",62),i.YNc(2,Z,1,0,"system-label",63),i.YNc(3,T,1,0,"system-label",64),i.YNc(4,C,1,0,"system-label",65),i.BQk()),2&e){const e=i.oxw(4);i.Q6J("ngSwitch",e.expression.everyAtValue),i.xp6(1),i.Q6J("ngSwitchCase",1==e.expression.everyAtValue||21==e.expression.everyAtValue||31==e.expression.everyAtValue?e.expression.everyAtValue:"1"),i.xp6(1),i.Q6J("ngSwitchCase",2==e.expression.everyAtValue||22==e.expression.everyAtValue?e.expression.everyAtValue:"2"),i.xp6(1),i.Q6J("ngSwitchCase",3==e.expression.everyAtValue||23==e.expression.everyAtValue?e.expression.everyAtValue:"3")}}function A(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"div",54)(1,"div",55)(2,"input",59),i.NdJ("ngModelChange",(function(t){i.CHM(e);const s=i.oxw(3);return i.KtG(s.expression.everyAtValue=t)}))("ngModelChange",(function(){i.CHM(e);const t=i.oxw(3);return i.KtG(t.setFieldValue())})),i.qZA(),i.TgZ(3,"span",57),i.YNc(4,k,5,4,"ng-container",60),i.qZA()()()}if(2&e){const e=i.oxw(3);i.xp6(2),i.Q6J("ngModel",e.expression.everyAtValue),i.xp6(2),i.Q6J("ngIf",!!e.expression.everyAtValue)}}const L=function(e,t,s,i,n,l,o){return{0:e,1:t,2:s,3:i,4:n,5:l,6:o}};function I(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"div",70)(1,"div",6)(2,"system-multiple-select",71),i.NdJ("ngModelChange",(function(t){i.CHM(e);const s=i.oxw(3);return i.KtG(s.expression.everyAtValue=t)}))("ngModelChange",(function(){i.CHM(e);const t=i.oxw(3);return i.KtG(t.setFieldValue())})),i.qZA()()()}if(2&e){const e=i.oxw(3);i.xp6(2),i.Q6J("showPills",!1)("ngModel",e.expression.everyAtValue)("listItems",i.Hh0(3,L,e.weekdays[0],e.weekdays[1],e.weekdays[2],e.weekdays[3],e.weekdays[4],e.weekdays[5],e.weekdays[6]))}}function S(e,t){if(1&e&&(i.TgZ(0,"option",73),i._uU(1),i.qZA()),2&e){const e=t.$implicit,s=t.index;i.Q6J("value",s),i.xp6(1),i.hij(" ",e," ")}}function M(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"div",70)(1,"div",6)(2,"div",7)(3,"select",8),i.NdJ("ngModelChange",(function(t){i.CHM(e);const s=i.oxw(3);return i.KtG(s.expression.everyAtValue=t)}))("ngModelChange",(function(){i.CHM(e);const t=i.oxw(3);return i.KtG(t.setFieldValue())})),i.YNc(4,S,2,2,"option",72),i.qZA()()()()}if(2&e){const e=i.oxw(3);i.xp6(3),i.Q6J("ngModel",e.expression.everyAtValue),i.xp6(1),i.Q6J("ngForOf",e.weekdays)}}function J(e,t){if(1&e&&(i.TgZ(0,"option",73),i._uU(1),i.qZA()),2&e){const e=t.$implicit,s=t.index;i.Q6J("value",s+1),i.xp6(1),i.hij(" ",e," ")}}function O(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"div",70)(1,"div",6)(2,"div",7)(3,"select",8),i.NdJ("ngModelChange",(function(t){i.CHM(e);const s=i.oxw(3);return i.KtG(s.expression.everyAtValue=t)}))("ngModelChange",(function(){i.CHM(e);const t=i.oxw(3);return i.KtG(t.setFieldValue())})),i.YNc(4,J,2,2,"option",72),i.qZA()()()()}if(2&e){const e=i.oxw(3);i.xp6(3),i.Q6J("ngModel",e.expression.everyAtValue),i.xp6(1),i.Q6J("ngForOf",e.months)}}function N(e,t){if(1&e&&(i.ynx(0),i.YNc(1,_,5,1,"div",35),i.YNc(2,v,2,0,"label",36),i.YNc(3,y,18,7,"div",37),i.YNc(4,x,5,1,"div",38),i.YNc(5,A,5,2,"div",38),i.YNc(6,I,3,11,"div",39),i.YNc(7,M,5,2,"div",39),i.YNc(8,O,5,2,"div",39),i.BQk()),2&e){const e=i.oxw(2);i.xp6(1),i.Q6J("ngIf","weekdays"!=e.expression.every&&"custom"==e.expression.recurrence),i.xp6(1),i.Q6J("ngIf","weekdays"==e.expression.every&&"custom"==e.expression.recurrence),i.xp6(1),i.Q6J("ngIf","custom"==e.expression.recurrence),i.xp6(1),i.Q6J("ngIf","daysAt"==e.expression.every||"daily"==e.expression.recurrence),i.xp6(1),i.Q6J("ngIf","monthsAt"==e.expression.every||"monthly"==e.expression.recurrence),i.xp6(1),i.Q6J("ngIf","weekdays"==e.expression.every),i.xp6(1),i.Q6J("ngIf","weekly"==e.expression.recurrence),i.xp6(1),i.Q6J("ngIf","annually"==e.expression.recurrence)}}function F(e,t){if(1&e){const e=i.EpF();i.ynx(0),i.TgZ(1,"div",74)(2,"div",75)(3,"div",6)(4,"input",76),i.NdJ("ngModelChange",(function(t){i.CHM(e);const s=i.oxw(2);return i.KtG(s.expression.minutes=t)}))("ngModelChange",(function(){i.CHM(e);const t=i.oxw(2);return i.KtG(t.setFieldValue())})),i.qZA()()(),i.TgZ(5,"div",77),i._uU(6,"::"),i.qZA(),i.TgZ(7,"div",75)(8,"div",6)(9,"input",78),i.NdJ("ngModelChange",(function(t){i.CHM(e);const s=i.oxw(2);return i.KtG(s.expression.hours=t)}))("ngModelChange",(function(){i.CHM(e);const t=i.oxw(2);return i.KtG(t.setFieldValue())})),i.qZA()()(),i.TgZ(10,"div",77),i._uU(11,"::"),i.qZA(),i.TgZ(12,"div",75)(13,"div",6)(14,"input",79),i.NdJ("ngModelChange",(function(t){i.CHM(e);const s=i.oxw(2);return i.KtG(s.expression.monthDay=t)}))("ngModelChange",(function(){i.CHM(e);const t=i.oxw(2);return i.KtG(t.setFieldValue())})),i.qZA()()(),i.TgZ(15,"div",77),i._uU(16,"::"),i.qZA(),i.TgZ(17,"div",75)(18,"div",6)(19,"input",80),i.NdJ("ngModelChange",(function(t){i.CHM(e);const s=i.oxw(2);return i.KtG(s.expression.month=t)}))("ngModelChange",(function(){i.CHM(e);const t=i.oxw(2);return i.KtG(t.setFieldValue())})),i.qZA()()(),i.TgZ(20,"div",77),i._uU(21,"::"),i.qZA(),i.TgZ(22,"div",75)(23,"div",6)(24,"input",81),i.NdJ("ngModelChange",(function(t){i.CHM(e);const s=i.oxw(2);return i.KtG(s.expression.weekDay=t)}))("ngModelChange",(function(){i.CHM(e);const t=i.oxw(2);return i.KtG(t.setFieldValue())})),i.qZA()()()(),i.BQk()}if(2&e){const e=i.oxw(2);i.xp6(4),i.Q6J("ngModel",e.expression.minutes),i.xp6(5),i.Q6J("ngModel",e.expression.hours),i.xp6(5),i.Q6J("ngModel",e.expression.monthDay),i.xp6(5),i.Q6J("ngModel",e.expression.month),i.xp6(5),i.Q6J("ngModel",e.expression.weekDay)}}function q(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"div",2)(1,"div",3)(2,"label",4),i._UZ(3,"system-label",5),i.qZA(),i.TgZ(4,"div",6)(5,"div",7)(6,"select",8),i.NdJ("ngModelChange",(function(t){i.CHM(e);const s=i.oxw();return i.KtG(s.expression.recurrence=t)}))("ngModelChange",(function(){i.CHM(e);const t=i.oxw();return i.KtG(t.onRecurrenceSet())})),i._UZ(7,"option",9),i.TgZ(8,"option",10),i._UZ(9,"system-label",11),i.qZA(),i.TgZ(10,"option",12),i._UZ(11,"system-label",13),i.qZA(),i.TgZ(12,"option",14),i._UZ(13,"system-label",15),i.qZA(),i.TgZ(14,"option",16),i._UZ(15,"system-label",17),i.qZA(),i.TgZ(16,"option",18),i._UZ(17,"system-label",19),i.qZA(),i.TgZ(18,"option",20),i._UZ(19,"system-label",21),i.qZA(),i.TgZ(20,"option",22),i._UZ(21,"system-label",23),i.qZA()()()()(),i.YNc(22,b,5,4,"label",24),i.YNc(23,N,9,8,"ng-container",25),i.YNc(24,F,25,5,"ng-container",25),i.qZA()}if(2&e){const e=i.oxw();i.xp6(6),i.Q6J("ngModel",e.expression.recurrence),i.xp6(16),i.Q6J("ngIf","custom"!=e.expression.recurrence&&"cron"!=e.expression.recurrence&&"everyWeekday"!=e.expression.recurrence),i.xp6(1),i.Q6J("ngIf","cron"!=e.expression.recurrence),i.xp6(1),i.Q6J("ngIf","cron"==e.expression.recurrence)}}function E(e,t){if(1&e&&(i.TgZ(0,"span"),i._uU(1),i.qZA()),2&e){const e=i.oxw(2);i.xp6(1),i.hij(" ",e.expression.displayValue," ")}}function Y(e,t){if(1&e&&i.YNc(0,E,2,1,"span",25),2&e){const e=i.oxw();i.Q6J("ngIf",null==e.expression?null:e.expression.displayValue)}}let D=(()=>{class SystemInputCronExpression{language;userPreferences;readOnly=!1;asObject=!1;expression={minutes:"",hours:"",monthDay:"",month:"",weekDay:"",stringValue:""};weekdays=[];months=[];everyLabels={minutes:"LBL_MINUTE{s}",hours:"LBL_HOUR{s}",days:"LBL_DAY{s}",months:"LBL_MONTH{s}",weekdays:"LBL_WEEKDAY{s}",daysAt:"LBL_DAY{s}_AT",monthsAt:"LBL_MONTH{s}_AT"};recurrenceLabels={daily:"LBL_DAILY",weekly:"LBL_WEEKLY",monthly:"LBL_MONTHLY",annually:"LBL_ANNUALLY",everyWeekday:"LBL_EVERY_WEEKDAY"};subscriptions=new n.w0;value;onChange;constructor(e,t){this.language=e,this.userPreferences=t}writeValue(e){this.value=e,this.setLocalValue(e),this.readOnly&&this.setDisplayValue()}registerOnChange(e){this.onChange=e}registerOnTouched(){}setDisabledState(){}ngOnInit(){this.setSelectOptionsFromMoment(),this.setLocalValue(this.value),this.subscribeToLanguageChanges()}resetEveryAtValue(){this.expression.everyAtValue=void 0}resetEveryQuantity(){this.expression.everyQuantity=void 0}onRecurrenceSet(){if(this.setExpressionProperties("*"),this.expression.every=void 0,this.expression.everyQuantity=void 0,this.expression.everyAtValue=void 0,!this.expression.recurrence)return this.expression.stringValue="",void this.onChange(this.asObject?this.getExpressionProperties():"");switch(this.expression.recurrence){case"custom":this.expression.every="minutes",this.expression.everyQuantity=1;break;case"cron":break;default:this.setDefaultRecurrenceEveryAtValue(),this.resetEveryQuantity()}this.setFieldValue()}onEverySet(){this.setExpressionProperties("*"),this.resetEveryAtValue(),"weekdays"==this.expression.every&&(this.resetEveryQuantity(),this.expression.everyAtValue||(this.expression.everyAtValue={})),"daysAt"==this.expression.every&&(this.expression.everyAtValue=moment().hour(0).minute(0).tz(this.userPreferences.toUse.timezone)),null!=this.expression.everyQuantity&&"daysAt"!=this.expression.every&&"monthsAt"!=this.expression.every&&this.setFieldValue()}setDefaultRecurrenceEveryAtValue(){switch(this.expression.recurrence){case"daily":this.expression.everyAtValue=moment(moment().utc().hour(0).minute(0));break;case"weekly":this.expression.everyAtValue="0";break;case"monthly":case"annually":this.expression.everyAtValue="1"}}subscribeToLanguageChanges(){this.subscriptions.add(this.language.currentlanguage$.subscribe((()=>{this.setSelectOptionsFromMoment()})))}setSelectOptionsFromMoment(){this.weekdays=moment.weekdays(),this.months=moment.months()}setFieldValue(){switch(this.expression.recurrence){case"custom":this.setCustomExpression();break;case"cron":break;default:this.setExpressionByRecurrenceUnit()}this.expression.stringValue=`${this.expression.minutes}::`,this.expression.stringValue+=`${this.expression.hours}::`,this.expression.stringValue+=`${this.expression.monthDay}::`,this.expression.stringValue+=`${this.expression.month}::`,this.expression.stringValue+=`${this.expression.weekDay}`,this.onChange(this.asObject?this.getExpressionProperties():this.expression.stringValue)}setCustomExpression(){if(!isNaN(this.expression.everyQuantity)||"weekdays"==this.expression.every)switch(this.expression.everyQuantity<1&&(this.expression.everyQuantity=1),this.expression.every){case"minutes":this.expression.everyQuantity>59&&(this.expression.everyQuantity=59),this.expression.minutes=`*/${this.expression.everyQuantity}`;break;case"hours":this.expression.everyQuantity>23&&(this.expression.everyQuantity=23),this.expression.minutes="0",this.expression.hours=`*/${this.expression.everyQuantity}`;break;case"days":this.expression.everyQuantity>31&&(this.expression.everyQuantity=31),this.expression.minutes="0",this.expression.hours="0",this.expression.monthDay=`*/${this.expression.everyQuantity}`;break;case"daysAt":if(!moment.isMoment(this.expression.everyAtValue))break;this.expression.everyQuantity>31&&(this.expression.everyQuantity=31),this.expression.hours=`${this.expression.everyAtValue.utc().hour()}`,this.expression.minutes=`${this.expression.everyAtValue.utc().minute()}`,this.expression.monthDay=`*/${this.expression.everyQuantity}`;break;case"months":this.expression.everyQuantity>12&&(this.expression.everyQuantity=12),this.expression.minutes="0",this.expression.hours="0",this.expression.month=`*/${this.expression.everyQuantity}`;break;case"monthsAt":this.expression.everyAtValue<1&&(this.expression.everyAtValue=1),this.expression.everyAtValue>31&&(this.expression.everyAtValue=31),this.expression.everyQuantity>12&&(this.expression.everyQuantity=12),this.expression.minutes="0",this.expression.hours="0",this.expression.monthDay=`${this.expression.everyAtValue}`,this.expression.month=`*/${this.expression.everyQuantity}`;break;case"weekdays":this.expression.minutes="0",this.expression.hours="0",this.expression.weekDay=this.expression.everyAtValue.join(",")}}setExpressionProperties(e){this.expression.minutes=e,this.expression.hours=e,this.expression.monthDay=e,this.expression.month=e,this.expression.weekDay=e}getExpressionProperties(){return{minutes:this.expression.minutes,hours:this.expression.hours,monthDay:this.expression.monthDay,month:this.expression.month,weekDay:this.expression.weekDay}}setExpressionByRecurrenceUnit(){switch(this.expression.recurrence){case"daily":this.expression.minutes=`${this.expression.everyAtValue.utc().minute()}`,this.expression.hours=`${this.expression.everyAtValue.utc().hour()}`;break;case"weekly":this.expression.minutes="0",this.expression.hours="0",this.expression.weekDay=this.expression.everyAtValue;break;case"everyWeekday":this.expression.minutes="0",this.expression.hours="0",this.expression.weekDay="1-5";break;case"monthly":this.expression.minutes="0",this.expression.hours="0",this.expression.monthDay=this.expression.everyAtValue;break;case"annually":this.expression.minutes="0",this.expression.hours="0",this.expression.month=this.expression.everyAtValue,this.expression.monthDay="1"}}setLocalValue(e){if(!e||e==this.expression?.stringValue)return;5==e.split("::").length&&this.parseExpressionFromString(e)}parseExpressionFromString(e){this.expression&&(this.expression.every=void 0,this.resetEveryAtValue(),this.resetEveryQuantity());const t=e.split("::");this.expression={minutes:t[0],hours:t[1],monthDay:t[2],month:t[3],weekDay:t[4],stringValue:e},this.setRecurrenceAtFromInput(e),"custom"==this.expression.recurrence&&this.setEveryValueFromExpression()}setRecurrenceAtFromInput(e){const t=!isNaN(+(this.expression.minutes+this.expression.hours))&&e.endsWith("::*::*::*"),s=!isNaN(+(this.expression.minutes+this.expression.hours+this.expression.weekDay))&&"*"==this.expression.month&&"*"==this.expression.monthDay,i="0::0::*::*::1-5"==e,n=!isNaN(+(this.expression.minutes+this.expression.hours+this.expression.monthDay))&&e.endsWith("::*::*"),l=!isNaN(+(this.expression.minutes+this.expression.hours+this.expression.month))&&"*"==this.expression.monthDay&&e.endsWith("::*");t?(this.expression.recurrence="daily",this.expression.everyAtValue=moment(moment.utc().hour(+this.expression.hours).minute(+this.expression.minutes)).tz(this.userPreferences.toUse.timezone)):s?(this.expression.recurrence="weekly",this.expression.everyAtValue=this.expression.weekDay):i?(this.expression.recurrence="everyWeekday",this.expression.everyAtValue=moment(moment.utc().hour(0).minute(0)).tz(this.userPreferences.toUse.timezone)):n?(this.expression.recurrence="monthly",this.expression.everyAtValue=this.expression.monthDay):l?(this.expression.recurrence="annually",this.expression.everyAtValue=this.expression.month):this.expression.recurrence="custom"}setEveryValueFromExpression(){const e=this.expression.minutes,t=this.expression.hours,s=this.expression.monthDay,i=this.expression.month,n=this.expression.weekDay;"*"==i&&"*"==n?(e.startsWith("*")&&"*"==t&&"*"==s&&(this.expression.every="minutes",this.expression.everyQuantity="*"==e?1:+e.substring(2)),t.startsWith("*/")&&0==+e&&"*"==s&&(this.expression.every="hours",this.expression.everyQuantity=+t.substring(2)),s.startsWith("*/")&&0==+e&&0==+t&&(this.expression.every="days",this.expression.everyQuantity=+s.substring(2)),s.startsWith("*/")&&+t>-1&&+e>-1&&(this.expression.every="daysAt",this.expression.everyQuantity=+s.substring(2),this.expression.everyAtValue=moment(moment.utc().hour(+t).minute(+e)).tz(this.userPreferences.toUse.timezone))):(i.startsWith("*/")&&0==+e&&0==+t&&"*"==n&&("*"==s&&(this.expression.every="months"),+s>0&&(this.expression.every="monthsAt",this.expression.everyAtValue=+s),this.expression.everyQuantity=+i.substring(2)),isNaN(+n.split(",")[0])||0!=+e||0!=+t||"*"!=i||"*"!=s||(this.expression.every="weekdays",this.expression.everyAtValue=n.split(","))),null==this.expression.every&&(this.expression.recurrence="cron")}setDisplayValue(){if(!this.expression.recurrence)return this.expression.displayValue="";if("cron"==this.expression.recurrence)return this.expression.displayValue=this.expression.stringValue;if("custom"!=this.expression.recurrence){switch(this.expression.displayValue=`${this.language.getLabel(this.recurrenceLabels[this.expression.recurrence])} `,this.expression.recurrence){case"daily":case"everyWeekday":this.expression.displayValue+=`${this.language.getLabel("LBL_AT_HOUR","","short")} `;break;case"weekly":this.expression.displayValue+=`${this.language.getLabel("LBL_DAY","","short")} `;break;case"annually":this.expression.displayValue+=`${this.language.getLabel("LBL_MONTH","","short")} `;break;default:this.expression.displayValue+=`${this.language.getLabel("LBL_ON_DATE","","short")} `}switch(this.expression.recurrence){case"daily":case"everyWeekday":if(!moment.isMoment(this.expression.everyAtValue))break;this.expression.displayValue+=`${this.expression.everyAtValue.tz(this.userPreferences.toUse.timezone).format(this.userPreferences.getTimeFormat())} ${this.language.getLabel("LBL_O_CLOCK")}`;break;case"monthly":this.expression.displayValue+=` ${this.expression.everyAtValue}${this.language.getLabel(1==this.expression.everyAtValue||21==this.expression.everyAtValue||31==this.expression.everyAtValue?"LBL_ST_DAY":2==this.expression.everyAtValue||22==this.expression.everyAtValue?"LBL_ND_DAY":3==this.expression.everyAtValue||23==this.expression.everyAtValue?"LBL_RD_DAY":"")}`;break;case"weekly":this.expression.displayValue+=` ${this.weekdays[this.expression.everyAtValue]}`;break;case"annually":this.expression.displayValue+=` ${this.months[this.expression.everyAtValue-1]}`;break;default:this.expression.displayValue+=`${this.expression.everyAtValue}`}return}this.expression.displayValue=`${this.language.getLabel("LBL_EVERY")} `;const e=this.expression.everyAtValue;if(this.expression.every&&"weekdays"!=this.expression.every){const e=this.language.getLabel(this.everyLabels[this.expression.every].replace("{s}",this.expression.everyQuantity>1?"S":""));this.expression.displayValue+=`${this.expression.everyQuantity} ${e}`}this.expression.everyAtValue&&("monthsAt"==this.expression.every?this.expression.displayValue+=` ${this.expression.everyAtValue}${this.language.getLabel(1==e||21==e||31==e?"LBL_ST_DAY":2==e||22==e?"LBL_ND_DAY":3==e||23==e?"LBL_RD_DAY":"LBL_TH_DAY")}`:"daysAt"==this.expression.every&&moment.isMoment(this.expression.everyAtValue)?this.expression.displayValue+=` ${e.tz(this.userPreferences.toUse.timezone).format(this.userPreferences.getTimeFormat())} ${this.language.getLabel("LBL_O_CLOCK")}`:"weekdays"==this.expression.every&&(this.expression.displayValue+=` ${this.expression.everyAtValue.map((e=>this.weekdays[e])).join(", ")}`))}static ɵfac=function(e){return new(e||SystemInputCronExpression)(i.Y36(o.d),i.Y36(a.z))};static ɵcmp=i.Xpm({type:SystemInputCronExpression,selectors:[["system-input-cron-expression"]],inputs:{readOnly:"readOnly",asObject:"asObject"},features:[i._Bn([{provide:l.JU,useExisting:(0,i.Gpc)((()=>SystemInputCronExpression)),multi:!0}])],decls:3,vars:2,consts:[["class","slds-grid",4,"ngIf","ngIfElse"],["readOnlyContainer",""],[1,"slds-grid"],[1,"slds-form-element","slds-grid","slds-grid--vertical-align-center","slds-grow"],[1,"slds-form-element__label"],["label","LBL_REPEAT"],[1,"slds-form-element__control","slds-grow"],[1,"slds-select_container"],[1,"slds-select",3,"ngModel","ngModelChange"],["value",""],["value","daily"],["label","LBL_DAILY"],["value","weekly"],["label","LBL_WEEKLY"],["value","monthly"],["label","LBL_MONTHLY"],["value","annually"],["label","LBL_ANNUALLY"],["value","everyWeekday"],["label","LBL_EVERY_WEEKDAY"],["value","custom"],["label","LBL_CUSTOM"],["value","cron"],["label","LBL_CRON_EXPRESSION"],["class","slds-form-element__label slds-align-middle slds-m-left--small",3,"ngSwitch",4,"ngIf"],[4,"ngIf"],[1,"slds-form-element__label","slds-align-middle","slds-m-left--small",3,"ngSwitch"],["label","LBL_AT_HOUR","length","short",4,"ngSwitchCase"],["label","LBL_DAY","length","short",4,"ngSwitchCase"],["label","LBL_MONTH","length","short",4,"ngSwitchCase"],["label","LBL_ON_DATE","length","short",4,"ngSwitchDefault"],["label","LBL_AT_HOUR","length","short"],["label","LBL_DAY","length","short"],["label","LBL_MONTH","length","short"],["label","LBL_ON_DATE","length","short"],["class","slds-form-element slds-grid slds-grid--vertical-align-center slds-m-left--xx-small slds-grow",4,"ngIf"],["class","slds-form-element__label",4,"ngIf"],["class","slds-form-element slds-grid slds-m-left--xx-small slds-grow",4,"ngIf"],["class","slds-form-element slds-m-left--xx-small slds-grow",4,"ngIf"],["class","slds-form-element slds-m-left--xx-small slds-grid slds-grid--vertical-align-center slds-grow",4,"ngIf"],[1,"slds-form-element","slds-grid","slds-grid--vertical-align-center","slds-m-left--xx-small","slds-grow"],["label","LBL_EVERY"],["type","text","size","3","maxlength","3",1,"slds-input",3,"ngModel","ngModelChange"],["label","LBL_EVERY",1,"slds-m-left--x-small"],[1,"slds-form-element","slds-grid","slds-m-left--xx-small","slds-grow"],["value","minutes"],[3,"label"],["value","hours"],["value","days"],["value","daysAt"],["value","months"],["value","monthsAt"],["value","weekdays"],["label","LBL_WEEK_ON"],[1,"slds-form-element","slds-m-left--xx-small","slds-grow"],[1,"slds-form-element__control","slds-input-has-fixed-addon","slds-grow"],[1,"slds-grow","slds-p-left--xxx-small",3,"ngModel","ngModelChange"],[1,"slds-form-element__addon",2,"white-space","nowrap"],["label","LBL_O_CLOCK"],["type","text","size","3","maxlength","6",1,"slds-input",3,"ngModel","ngModelChange"],[3,"ngSwitch",4,"ngIf"],[3,"ngSwitch"],["label","LBL_ST_DAY",4,"ngSwitchCase"],["label","LBL_ND_DAY",4,"ngSwitchCase"],["label","LBL_RD_DAY",4,"ngSwitchCase"],["label","LBL_TH_DAY",4,"ngSwitchDefault"],["label","LBL_ST_DAY"],["label","LBL_ND_DAY"],["label","LBL_RD_DAY"],["label","LBL_TH_DAY"],[1,"slds-form-element","slds-m-left--xx-small","slds-grid","slds-grid--vertical-align-center","slds-grow"],[3,"showPills","ngModel","listItems","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[1,"slds-m-left--xx-small","slds-grid","slds-grid--vertical-align-center","slds-grow"],[1,"slds-form-element","slds-grow"],["type","text","system-placeholder","LBL_MINUTES","size","3","maxlength","6",1,"slds-input",3,"ngModel","ngModelChange"],[1,"slds-m-horizontal--xx-small"],["type","text","system-placeholder","LBL_HOURS","size","3","maxlength","6",1,"slds-input",3,"ngModel","ngModelChange"],["type","text","system-placeholder","LBL_MONTH_DAY","size","3","maxlength","6",1,"slds-input",3,"ngModel","ngModelChange"],["type","text","system-placeholder","LBL_MONTH","size","3","maxlength","6",1,"slds-input",3,"ngModel","ngModelChange"],["type","text","system-placeholder","LBL_WEEK_DAY","size","3","maxlength","6",1,"slds-input",3,"ngModel","ngModelChange"]],template:function(e,t){if(1&e&&(i.YNc(0,q,25,4,"div",0),i.YNc(1,Y,1,1,"ng-template",null,1,i.W1O)),2&e){const e=i.MAs(2);i.Q6J("ngIf",!t.readOnly)("ngIfElse",e)}},dependencies:[d.A,r.sg,r.O5,r.RF,r.n9,r.ED,l.YN,l.Kr,l.Fj,l.EJ,l.JJ,l.nD,l.On,c.H,u._,m.I],encapsulation:2})}return SystemInputCronExpression})()},43095:(e,t,s)=>{"use strict";s.d(t,{F:()=>b});var i=s(62242),n=s(95030),l=s(55329),o=s(44044),a=s(14505),d=s(83398),r=s(44755),c=s(72656);function u(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"button",12),i.NdJ("click",(function(){i.CHM(e);const t=i.oxw(2);return i.KtG(t.clearField())})),i._UZ(1,"system-button-icon",13),i.qZA()}2&e&&(i.xp6(1),i.Q6J("icon","close"))}const m=function(e){return{"slds-theme--shade":e}};function g(e,t){if(1&e&&(i.TgZ(0,"div",7)(1,"div",8)(2,"span",9)(3,"span",10),i._uU(4),i.qZA(),i.YNc(5,u,2,1,"button",11),i.qZA()()()),2&e){const e=i.oxw();i.xp6(2),i.Q6J("ngClass",i.VKq(3,m,e._disabled)),i.xp6(2),i.Oqu(e.currentdashboard),i.xp6(1),i.Q6J("ngIf",!e._disabled)}}function h(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"div",14)(1,"input",15),i.NdJ("ngModelChange",(function(t){i.CHM(e);const s=i.oxw();return i.KtG(s.searchterm=t)}))("blur",(function(){i.CHM(e);const t=i.oxw();return i.KtG(t.onBlur())})),i.qZA()()}if(2&e){const e=i.oxw();i.xp6(1),i.Q6J("disabled",e._disabled)("ngModel",e.searchterm)}}function p(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"li",16),i.NdJ("mousedown",(function(){const t=i.CHM(e).$implicit,s=i.oxw();return i.KtG(s.setDashboardSet(t.id))})),i.TgZ(1,"div",17)(2,"span",18),i._uU(3),i.qZA()()()}if(2&e){const e=t.$implicit;i.xp6(3),i.Oqu(e.name)}}const f=function(e){return{"slds-is-open":e}};let b=(()=>{class SystemInputDashboard{language;modal;backend;_disabled=!1;set disabled(e){this._disabled=!1!==e}onChange;onTouched;_time={display:"",moment:null,offset:0,valid:!0};_searchterm="";dashboards=[];dashboard="";currentdashboard;clickListener;constructor(e,t,s){this.language=e,this.modal=t,this.backend=s,this.getDashboards()}getDashboards(){this.backend.getRequest("configuration/spiceui/core/module/dashboards").subscribe((e=>{this.dashboards=e,this.dashboard&&(this.currentdashboard=this.dashboards.find((e=>e.id==this.dashboard)).name)}))}get isOpen(){return""!=this._searchterm}get searchterm(){return this._searchterm}set searchterm(e){this._searchterm=e}get Dashboards(){let e=[];for(let t of this.dashboards)(""==this._searchterm||""!=this._searchterm&&-1!=t.name.toLowerCase().indexOf(this._searchterm.toLowerCase()))&&e.push(t);return e}ngOnDestroy(){this.clickListener&&this.clickListener()}onBlur(){this._searchterm=""}clearField(){this.dashboard="",this.onChange("")}setDashboardSet(e){this.dashboard=e,this.currentdashboard=this.dashboards.find((e=>e.id==this.dashboard)).name,this._searchterm="",this.onChange(e)}trackByFn(e,t){return t.id}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}writeValue(e){this.dashboard=e}static ɵfac=function(e){return new(e||SystemInputDashboard)(i.Y36(l.d),i.Y36(o.o),i.Y36(a.y))};static ɵcmp=i.Xpm({type:SystemInputDashboard,selectors:[["system-input-dashboard"]],inputs:{disabled:"disabled"},features:[i._Bn([{provide:n.JU,useExisting:(0,i.Gpc)((()=>SystemInputDashboard)),multi:!0}])],decls:7,vars:6,consts:[[1,"slds-combobox_container"],["role","combobox",1,"slds-combobox","slds-dropdown-trigger","slds-dropdown-trigger_click",3,"ngClass"],["class","slds-form-element__control",4,"ngIf"],["class","slds-combobox__form-element slds-input-has-icon slds-input-has-icon_right",4,"ngIf"],["role","listbox",1,"slds-dropdown","slds-dropdown_fluid","slds-dropdown--length-7"],["role","presentation",1,"slds-listbox","slds-listbox_vertical"],["role","presentation","class","slds-listbox__item",3,"mousedown",4,"ngFor","ngForOf"],[1,"slds-form-element__control"],[1,"slds-pill_container"],[1,"slds-pill","slds-size--1-of-1","slds-p-horizontal--xx-small",3,"ngClass"],[1,"slds-pill__label"],["class","slds-button slds-button--icon slds-pill__remove",3,"click",4,"ngIf"],[1,"slds-button","slds-button--icon","slds-pill__remove",3,"click"],[3,"icon"],[1,"slds-combobox__form-element","slds-input-has-icon","slds-input-has-icon_right"],["type","search","system-placeholder","LBL_SEARCH","role","combobox",1,"slds-input","slds-combobox__input",3,"disabled","ngModel","ngModelChange","blur"],["role","presentation",1,"slds-listbox__item",3,"mousedown"],["role","option",1,"slds-media","slds-listbox__option","slds-listbox__option_plain"],[1,"slds-truncate"]],template:function(e,t){1&e&&(i.TgZ(0,"div",0)(1,"div",1),i.YNc(2,g,6,5,"div",2),i.YNc(3,h,2,2,"div",3),i.TgZ(4,"div",4)(5,"ul",5),i.YNc(6,p,4,1,"li",6),i.qZA()()()()),2&e&&(i.xp6(1),i.Q6J("ngClass",i.VKq(4,f,t.isOpen)),i.xp6(1),i.Q6J("ngIf",t.dashboard),i.xp6(1),i.Q6J("ngIf",!t.dashboard),i.xp6(3),i.Q6J("ngForOf",t.Dashboards))},dependencies:[d.A,r.mk,r.sg,r.O5,n.Fj,n.JJ,n.On,c.J],encapsulation:2})}return SystemInputDashboard})()},43934:(e,t,s)=>{"use strict";s.d(t,{l:()=>_});var i=s(62242),n=s(95030),l=s(55329),o=s(44044),a=s(14505),d=s(4154),r=s(83398),c=s(44755),u=s(72656);function m(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"button",12),i.NdJ("click",(function(){i.CHM(e);const t=i.oxw(2);return i.KtG(t.clearField())})),i._UZ(1,"system-button-icon",13),i.qZA()}2&e&&(i.xp6(1),i.Q6J("icon","close"))}const g=function(e){return{"slds-theme--shade":e}};function h(e,t){if(1&e&&(i.TgZ(0,"div",7)(1,"div",8)(2,"span",9)(3,"span",10),i._uU(4),i.qZA(),i.YNc(5,m,2,1,"button",11),i.qZA()()()),2&e){const e=i.oxw();i.xp6(2),i.Q6J("ngClass",i.VKq(3,g,e._disabled)),i.xp6(2),i.Oqu(e.currentdashboardset),i.xp6(1),i.Q6J("ngIf",!e._disabled)}}function p(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"div",14)(1,"input",15),i.NdJ("ngModelChange",(function(t){i.CHM(e);const s=i.oxw();return i.KtG(s.searchterm=t)}))("blur",(function(){i.CHM(e);const t=i.oxw();return i.KtG(t.onBlur())})),i.qZA()()}if(2&e){const e=i.oxw();i.xp6(1),i.Q6J("disabled",e._disabled)("ngModel",e.searchterm)}}function f(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"li",16),i.NdJ("mousedown",(function(){const t=i.CHM(e).$implicit,s=i.oxw();return i.KtG(s.setDashboardSet(t.id))})),i.TgZ(1,"div",17)(2,"span",18),i._uU(3),i.qZA()()()}if(2&e){const e=t.$implicit;i.xp6(3),i.Oqu(e.name)}}const b=function(e){return{"slds-is-open":e}};let _=(()=>{class SystemInputDashboardset{language;modal;backend;metadata;_disabled=!1;set disabled(e){this._disabled=!1!==e}onChange;onTouched;_time={display:"",moment:null,offset:0,valid:!0};_searchterm="";dashboardSets=[];dashboardset="";currentdashboardset;clickListener;constructor(e,t,s,i){this.language=e,this.modal=t,this.backend=s,this.metadata=i,this.getDashboardSets()}getDashboardSets(){this.backend.getRequest("configuration/spiceui/core/module/dashboardsets").subscribe((e=>{this.dashboardSets=e,this.dashboardset&&(this.currentdashboardset=this.dashboardSets.find((e=>e.id==this.dashboardset)).name)}))}get isOpen(){return""!=this._searchterm}get searchterm(){return this._searchterm}set searchterm(e){this._searchterm=e}get dashboardsets(){let e=[];for(let t of this.dashboardSets)(""==this._searchterm||""!=this._searchterm&&-1!=t.name.toLowerCase().indexOf(this._searchterm.toLowerCase()))&&e.push(t);return e}ngOnDestroy(){this.clickListener&&this.clickListener()}onBlur(){this._searchterm=""}clearField(){this.dashboardset="",this.onChange("")}setDashboardSet(e){this.dashboardset=e,this.currentdashboardset=this.dashboardSets.find((e=>e.id==this.dashboardset)).name,this._searchterm="",this.onChange(e)}trackByFn(e,t){return t.id}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}writeValue(e){this.dashboardset=e}static ɵfac=function(e){return new(e||SystemInputDashboardset)(i.Y36(l.d),i.Y36(o.o),i.Y36(a.y),i.Y36(d.Pu))};static ɵcmp=i.Xpm({type:SystemInputDashboardset,selectors:[["system-input-dashboardset"]],inputs:{disabled:"disabled"},features:[i._Bn([{provide:n.JU,useExisting:(0,i.Gpc)((()=>SystemInputDashboardset)),multi:!0}])],decls:7,vars:6,consts:[[1,"slds-combobox_container"],["role","combobox",1,"slds-combobox","slds-dropdown-trigger","slds-dropdown-trigger_click",3,"ngClass"],["class","slds-form-element__control",4,"ngIf"],["class","slds-combobox__form-element slds-input-has-icon slds-input-has-icon_right",4,"ngIf"],["role","listbox",1,"slds-dropdown","slds-dropdown_fluid","slds-dropdown--length-7"],["role","presentation",1,"slds-listbox","slds-listbox_vertical"],["role","presentation","class","slds-listbox__item",3,"mousedown",4,"ngFor","ngForOf"],[1,"slds-form-element__control"],[1,"slds-pill_container"],[1,"slds-pill","slds-size--1-of-1","slds-p-horizontal--xx-small",3,"ngClass"],[1,"slds-pill__label"],["class","slds-button slds-button--icon slds-pill__remove",3,"click",4,"ngIf"],[1,"slds-button","slds-button--icon","slds-pill__remove",3,"click"],[3,"icon"],[1,"slds-combobox__form-element","slds-input-has-icon","slds-input-has-icon_right"],["type","search","system-placeholder","LBL_SEARCH","role","combobox",1,"slds-input","slds-combobox__input",3,"disabled","ngModel","ngModelChange","blur"],["role","presentation",1,"slds-listbox__item",3,"mousedown"],["role","option",1,"slds-media","slds-listbox__option","slds-listbox__option_plain"],[1,"slds-truncate"]],template:function(e,t){1&e&&(i.TgZ(0,"div",0)(1,"div",1),i.YNc(2,h,6,5,"div",2),i.YNc(3,p,2,2,"div",3),i.TgZ(4,"div",4)(5,"ul",5),i.YNc(6,f,4,1,"li",6),i.qZA()()()()),2&e&&(i.xp6(1),i.Q6J("ngClass",i.VKq(4,b,t.isOpen)),i.xp6(1),i.Q6J("ngIf",t.dashboardset),i.xp6(1),i.Q6J("ngIf",!t.dashboardset),i.xp6(3),i.Q6J("ngForOf",t.dashboardsets))},dependencies:[r.A,c.mk,c.sg,c.O5,n.Fj,n.JJ,n.On,u.J],encapsulation:2})}return SystemInputDashboardset})()},16822:(e,t,s)=>{"use strict";s.d(t,{z:()=>Z});var i=s(62242),n=s(95030),l=s(95698),o=s(62422),a=s(44044),d=s(14505),r=s(26625),c=s(95681),u=s(99573),m=s(44755),g=s(72656),h=s(24114),p=s(83463);function f(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"button",13),i.NdJ("click",(function(){i.CHM(e);const t=i.oxw(2);return i.KtG(t.clear())})),i._UZ(1,"system-button-icon",14),i.qZA()}}function b(e,t){if(1&e&&(i.TgZ(0,"div",9),i.YNc(1,f,2,0,"button",10),i.TgZ(2,"button",11),i._UZ(3,"system-button-icon",12),i.qZA()()),2&e){const e=i.oxw();i.xp6(1),i.Q6J("ngIf",e.canclear)}}function _(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"div",18)(1,"button",19),i.NdJ("click",(function(){i.CHM(e);const t=i.oxw(2);return i.KtG(t.openCalendar())})),i._UZ(2,"system-label",20),i.qZA()()}}function v(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"div",15)(1,"system-input-date-picker",16),i.NdJ("datePicked",(function(t){i.CHM(e);const s=i.oxw();return i.KtG(s.datePicked(t))})),i.qZA(),i.YNc(2,_,3,0,"div",17),i.qZA()}if(2&e){const e=i.oxw();i.Q6J("ngClass",e.dropdownside),i.xp6(1),i.Q6J("setDate",e._date.moment)("minDate",e.minDate)("maxDate",e.maxDate)("enabledDays",e.enabledDays)("holidayCalendarId",e.holidayCalendarId)("holidaysDisabled",e.holidaysDisabled),i.xp6(1),i.Q6J("ngIf",e.showCalendarButton)}}function y(e,t){1&e&&(i.TgZ(0,"div",21),i._UZ(1,"system-label",22),i.qZA())}const x=function(e){return{"slds-has-error":e}},w=function(e){return{"slds-is-edited":e}};let Z=(()=>{class SystemInputDate{elementref;renderer;userpreferences;modal;cdref;backend;config;elementRef;onChange;onTouched;showCalendarButton=!0;holidayCalendarId;holidaysDisabled=!0;holidays=[];_date={display:"",moment:null,valid:!0};isDisabled=!1;isDirty=!1;set disabled(e){this.isDisabled=!1!==e}minDate;maxDate;id;showClear=!1;hideErrorMessage=!1;set hideError(e){this.hideErrorMessage=!1!==e}enabledDays=[0,1,2,3,4,5,6];displayError=!0;valid=new i.vpe;constructor(e,t,s,i,n,l,o,a){this.elementref=e,this.renderer=t,this.userpreferences=s,this.modal=i,this.cdref=n,this.backend=l,this.config=o,this.elementRef=a}ngOnInit(){this.loadHolidays()}loadHolidays(){if(this.holidayCalendarId){let e=this.config.getData("holidays");e&&e[this.holidayCalendarId]?this.holidays=e[this.holidayCalendarId]:this.backend.getRequest(`module/SystemHolidayCalendars/${this.holidayCalendarId}/holidays`).subscribe({next:t=>{e||(e=[]),e[this.holidayCalendarId]=t,this.config.setData("holidays",e),this.holidays=t}})}}isHoliday(e){if(!e)return!1;let t=e.format("YYYY-MM-DD");return!!this.holidays.find((e=>e.holiday_date.substr(0,10)==t))}isEnabledDay(e){return!e||this.enabledDays.indexOf(parseInt(e.format("d"),10))>=0}get isValid(){return this._date.valid&&(!this._date.moment||!this.minDate||this._date.moment.isSameOrAfter(this.minDate))&&(!this._date.moment||!this.maxDate||this._date.moment.isSameOrBefore(this.maxDate))&&(!this.holidaysDisabled||!this.isHoliday(this._date.moment))&&this.isEnabledDay(this._date.moment)}get display(){return this._date.display?this._date.display:""}set display(e){if(e){let t=moment(e,this.userpreferences.getDateFormat(),!0);t.isValid()?(this._date.moment||(this._date.moment=new moment),this._date.moment.year(t.year()).month(t.month()).date(t.date()),this._date.valid=!0,"function"==typeof this.onChange&&this.onChange(this._date.moment)):(this._date.display=e,this._date.valid=!1)}else this.clear();this.valid.emit(this.isValid)}get canclear(){return this.showClear&&!!this._date.display}get dropdownside(){let e=this.elementref.nativeElement.getBoundingClientRect();return window.innerWidth-e.left<280?"slds-dropdown_right":"slds-dropdown_left"}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}writeValue(e){e&&e.isValid&&e.isValid()?(this._date.moment=new moment(e),this._date.display=this._date.moment.format(this.userpreferences.getDateFormat())):this.clear(!1),this.cdref.detectChanges()}clear(e=!0){this._date.moment=null,this._date.display="",this._date.valid=!0,this.valid.emit(!0),"function"==typeof this.onChange&&e&&this.onChange(this._date.moment)}datePicked(e,t){e&&(this._date.moment||(this._date.moment=new moment),moment.isMoment(e)||(e=moment(e)),this._date.moment.set("year",e.year()),this._date.moment.set("month",e.month()),this._date.moment.set("date",e.date()),t&&(this._date.moment.set("hour",e.hour()),this._date.moment.set("minute",e.minute())),this._date.display=this._date.moment.format(this.userpreferences.getDateFormat()),this._date.valid=!0,this.valid.emit(!0),"function"==typeof this.onChange&&this.onChange(this._date.moment)),this.valid.emit(this.isValid)}openCalendar(){this.modal.openModal("Calendar").subscribe((e=>{e.instance.calendar.asPicker=!0,e.instance.calendar.pickerDate$.pipe((0,l.q)(1)).subscribe((t=>{e.instance.self.destroy(),this.datePicked(t,!0)}))}))}emitBlur(){this.elementRef.nativeElement.dispatchEvent(new Event("blur",{bubbles:!0}))}static ɵfac=function(e){return new(e||SystemInputDate)(i.Y36(i.SBq),i.Y36(i.Qsj),i.Y36(o.z),i.Y36(a.o),i.Y36(i.sBO),i.Y36(d.y),i.Y36(r.C),i.Y36(i.SBq))};static ɵcmp=i.Xpm({type:SystemInputDate,selectors:[["system-input-date"]],inputs:{showCalendarButton:"showCalendarButton",holidayCalendarId:"holidayCalendarId",holidaysDisabled:"holidaysDisabled",isDirty:"isDirty",disabled:"disabled",minDate:"minDate",maxDate:"maxDate",id:"id",showClear:"showClear",hideError:["system-input-date-hide-error","hideError"],enabledDays:"enabledDays",displayError:"displayError"},outputs:{valid:"valid"},features:[i._Bn([{provide:n.JU,useExisting:(0,i.Gpc)((()=>SystemInputDate)),multi:!0}])],decls:9,vars:13,consts:[[1,"slds-form-element",3,"ngClass"],[1,"slds-form-element__control"],[1,"slds-combobox_container"],["system-dropdown-trigger","","role","combobox",1,"slds-combobox","slds-dropdown-trigger","slds-dropdown-trigger_click","slds-combobox-picklist","slds-timepicker",3,"stickyOnMobile"],["role","none",1,"slds-combobox__form-element","slds-input-has-icon","slds-input-has-icon_right"],["aria-controls","listbox-unique-id","autocomplete","off","role","textbox","type","text","placeholder"," ",1,"slds-input","slds-combobox__input",3,"disabled","ngModel","ngClass","id","ngModelChange","blur"],["class","slds-input__icon-group slds-input__icon-group_right slds-height_full slds-grid","style","top: 0; margin: 0; height: 100%",4,"ngIf"],["aria-hidden","false","class","slds-datepicker slds-dropdown slds-dropdown--large","role","dialog",3,"ngClass",4,"ngIf"],["class","slds-form-element__help",4,"ngIf"],[1,"slds-input__icon-group","slds-input__icon-group_right","slds-height_full","slds-grid",2,"top","0","margin","0","height","100%"],["class","slds-input__icon slds-input__icon_right slds-button slds-button_icon","style","position: relative;",3,"click",4,"ngIf"],["system-dropdown-trigger-button","",1,"slds-input__icon","slds-input__icon_right","slds-button","slds-button_icon",2,"position","relative"],["icon","event"],[1,"slds-input__icon","slds-input__icon_right","slds-button","slds-button_icon",2,"position","relative",3,"click"],["icon","clear"],["aria-hidden","false","role","dialog",1,"slds-datepicker","slds-dropdown","slds-dropdown--large",3,"ngClass"],[3,"setDate","minDate","maxDate","enabledDays","holidayCalendarId","holidaysDisabled","datePicked"],["class","slds-grid slds-grid--align-center",4,"ngIf"],[1,"slds-grid","slds-grid--align-center"],[1,"slds-button","slds-text-link","slds-p-around--xx-small",3,"click"],["label","LBL_CALENDAR"],[1,"slds-form-element__help"],["label","LBL_INPUT_INVALID"]],template:function(e,t){1&e&&(i.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"input",5),i.NdJ("ngModelChange",(function(e){return t.display=e}))("blur",(function(){return t.emitBlur()})),i.qZA(),i.YNc(6,b,4,1,"div",6),i.qZA(),i.YNc(7,v,3,8,"div",7),i.qZA()()(),i.YNc(8,y,2,0,"div",8),i.qZA()),2&e&&(i.Q6J("ngClass",i.VKq(9,x,!t.isValid)),i.xp6(3),i.Q6J("stickyOnMobile",!0),i.xp6(2),i.Q6J("disabled",t.isDisabled)("ngModel",t.display)("ngClass",i.VKq(11,w,t.isDirty))("id",t.id),i.xp6(1),i.Q6J("ngIf",!t.isDisabled),i.xp6(1),i.Q6J("ngIf",!t.isDisabled),i.xp6(1),i.Q6J("ngIf",!t.isValid&&!t.hideErrorMessage))},dependencies:[c.l,u.$,m.mk,m.O5,n.Fj,n.JJ,n.On,g.J,h.e,p._],encapsulation:2,changeDetection:0})}return SystemInputDate})()},24114:(e,t,s)=>{"use strict";s.d(t,{e:()=>A});var i=s(62242),n=s(55329),l=s(26559),o=s(62422),a=s(14505),d=s(26625),r=s(44755),c=s(95030),u=s(72656),m=s(83463),g=s(33543),h=s(84548);function p(e,t){if(1&e&&i._UZ(0,"system-select-option",17),2&e){const e=t.$implicit;i.Q6J("value",e.id)("display",e.name)}}function f(e,t){1&e&&i._UZ(0,"th",18)}function b(e,t){if(1&e&&(i.TgZ(0,"th",18)(1,"abbr",19),i._uU(2),i.qZA()()),2&e){const e=t.$implicit,s=t.index,n=i.oxw();i.xp6(1),i.Q6J("title",n.weekdayLong(s)),i.xp6(1),i.Oqu(e)}}function _(e,t){if(1&e&&(i.TgZ(0,"td",22)(1,"abbr",23),i._uU(2),i.qZA()()),2&e){const e=i.oxw().$implicit,t=i.oxw();i.xp6(1),i.Q6J("title",t.language.getLabel("LBL_WEEK")+" "+(null==e?null:e.number)),i.xp6(1),i.hij(" ",null==e?null:e.number," ")}}const v=function(e,t,s){return{"slds-disabled-text":e,"slds-is-today":t,"slds-is-selected":s}};function y(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"td",24),i.NdJ("click",(function(t){const s=i.CHM(e).$implicit,n=i.oxw(2);return i.KtG(n.pickDate(s,t))})),i.TgZ(1,"span",25),i._uU(2),i.qZA()()}if(2&e){const e=t.$implicit,s=i.oxw(2);i.Q6J("ngClass",i.kEZ(5,v,s.disabled(e),s.isToday(e),s.isCurrent(e))),i.xp6(1),i.Tol(s.notCurrentMonth(e)&&!s.disabled(e)?"slds-day_adjacent-month":"slds-day"),i.Q6J("ngStyle",s.getDayStyle(e)),i.xp6(1),i.Oqu(e.date())}}function x(e,t){if(1&e&&(i.TgZ(0,"tr"),i.YNc(1,_,3,2,"td",20),i.YNc(2,y,3,9,"td",21),i.qZA()),2&e){const e=t.$implicit,s=i.oxw();i.xp6(1),i.Q6J("ngIf","small"!=s.layout.screenwidth),i.xp6(1),i.Q6J("ngForOf",null==e?null:e.days)}}function w(e,t){if(1&e&&(i.TgZ(0,"td",22)(1,"abbr",23),i._uU(2),i.qZA()()),2&e){const e=i.oxw().$implicit,t=i.oxw(2);i.xp6(1),i.Q6J("title",t.language.getLabel("LBL_WEEK")+" "+(null==e?null:e.number)),i.xp6(1),i.hij(" ",null==e?null:e.number," ")}}function Z(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"td",24),i.NdJ("click",(function(t){const s=i.CHM(e).$implicit,n=i.oxw(3);return i.KtG(n.pickDate(s,t))})),i.TgZ(1,"span",25),i._uU(2),i.qZA()()}if(2&e){const e=t.$implicit,s=i.oxw(3);i.Q6J("ngClass",i.kEZ(5,v,s.disabled(e),s.isToday(e),s.isCurrent(e))),i.xp6(1),i.Tol(s.notCurrentMonth(e)&&!s.disabled(e)?"slds-day_adjacent-month":"slds-day"),i.Q6J("ngStyle",s.getDayStyle(e)),i.xp6(1),i.Oqu(e.date())}}function T(e,t){if(1&e&&(i.TgZ(0,"tr"),i.YNc(1,w,3,2,"td",20),i.YNc(2,Z,3,9,"td",21),i.qZA()),2&e){const e=t.$implicit,s=i.oxw(2);i.xp6(1),i.Q6J("ngIf","small"!=s.layout.screenwidth),i.xp6(1),i.Q6J("ngForOf",null==e?null:e.days)}}function C(e,t){if(1&e&&(i.TgZ(0,"tbody")(1,"tr")(2,"td",26)(3,"div",27)(4,"h2",28),i._uU(5),i.qZA(),i.TgZ(6,"div"),i._uU(7),i.qZA()()()(),i.YNc(8,T,3,2,"tr",14),i.qZA()),2&e){const e=i.oxw();i.xp6(2),i.uIk("colspan",e.weekdays.length+1),i.xp6(3),i.hij(" ",e.secondMonth," "),i.xp6(2),i.hij(" ",e.secondYearDisplay," "),i.xp6(1),i.Q6J("ngForOf",e.secondGrid)}}function k(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"button",29),i.NdJ("click",(function(t){i.CHM(e);const s=i.oxw();return i.KtG(s.goToday(t))})),i._UZ(1,"system-label",30),i.qZA()}}let A=(()=>{class SystemInputDatePicker{language;layout;userPreferences;backend;config;cdRef;currentGrid=[];secondGrid=[];yearsList=[];setDate;dual=!1;minDate;maxDate;weekStartDay=0;showTodayButton=!0;enabledDays=[0,1,2,3,4,5,6];holidayCalendarId;holidaysDisabled=!0;holidays=[];datePicked=new i.vpe;curDate=new moment;secondDate=new moment;constructor(e,t,s,i,n,l){this.language=e,this.layout=t,this.userPreferences=s,this.backend=i,this.config=n,this.cdRef=l;let o=this.userPreferences.unchangedPreferences.global;this.weekStartDay="Monday"==o.week_day_start?1:this.weekStartDay}_currentYear;get currentYear(){return this._currentYear}set currentYear(e){this._currentYear=e,this.curDate.year(e.name),this.buildGrids()}set secondYear(e){this.curDate.year(e.length?e:e.name),this.buildGrids()}get secondYearDisplay(){return this.secondDate.year()}get currentMonth(){return moment.localeData().months()[this.curDate.month()]}get secondMonth(){return moment.localeData().months()[this.secondDate.month()]}get weekdays(){let e=this.language.currentlanguage.substring(0,2);moment.locale(e);let t=moment.weekdaysMin();if(1===this.weekStartDay){let e=t.shift();return t.push(e),t}return t}ngOnInit(){this.loadHolidays(),this.initializeGrid()}ngOnChanges(){this.initializeGrid()}loadHolidays(){if(this.holidayCalendarId){let e=this.config.getData("holidays");e&&e[this.holidayCalendarId]?this.holidays=e[this.holidayCalendarId]:this.backend.getRequest(`module/SystemHolidayCalendars/${this.holidayCalendarId}/holidays`).subscribe({next:t=>{e||(e=[]),e[this.holidayCalendarId]=t,this.config.setData("holidays",e),this.holidays=t,this.cdRef.detectChanges()}})}}initializeGrid(){this.setDate?(this.curDate=new moment(this.setDate),this.secondDate=new moment(this.setDate)):(this.curDate=new moment,this.secondDate=new moment),this.secondDate.add(1,"month"),this.buildYearsList(),this.buildGrids(),this._currentYear={id:this.curDate.year(),name:this.curDate.year()}}buildYearsList(){this.yearsList=new Array(11).fill("").map(((e,t)=>{let s=t-5+ +this.curDate.year();return{id:s.toString(),name:s.toString()}}))}weekdayLong(e){let t=this.language.currentlanguage.substring(0,2);return moment.locale(t),moment.weekdays(e+this.weekStartDay)}notCurrentMonth(e){return!!e&&(e.isBefore(this.curDate,"month")||!this.dual&&e.isAfter(this.curDate,"month")||this.dual&&e.isAfter(this.secondDate,"month"))}disabled(e){if(!e)return!1;let t=new moment(e.format());return!(!this.minDate||!t.isBefore(this.minDate,"day"))||(!(!this.maxDate||!t.isAfter(this.maxDate,"day"))||(!(!this.holidaysDisabled||!this.isHoliday(e))||this.enabledDays.indexOf(parseInt(e.format("d"),10))<0))}getDayStyle(e){let t={cursor:this.disabled(e)?"default":"pointer"};return this.isHoliday(e)&&(t.border="1px solid",t["border-radius"]="2px"),t}isHoliday(e){let t=e.format("YYYY-MM-DD");return!!this.holidays.find((e=>e.holiday_date.substr(0,10)==t))}isToday(e){if(!e)return!1;let t=new moment;return t.isSame(e,"year")&&t.isSame(e,"month")&&t.isSame(e,"day")}isCurrent(e){return!!e&&(this.setDate&&this.setDate.isSame(e,"year")&&this.setDate.isSame(e,"month")&&this.setDate.isSame(e,"day"))}prevMonth(e){e.stopPropagation(),this.curDate.subtract(1,"months"),this.dual&&this.secondDate.subtract(1,"months"),this.buildGrids()}nextMonth(e){e.stopPropagation(),this.curDate.add(1,"months"),this.dual&&this.secondDate.add(1,"months"),this.buildGrids()}goToday(e){e.stopPropagation(),this.curDate=new moment,this.buildGrids()}pickDate(e,t){if(this.disabled(e))t.preventDefault(),t.stopPropagation();else{let t=new moment(e.format());this.datePicked.emit(t)}}buildGrids(){this.currentGrid=[],this.secondGrid=[],this.buildGridWeeks(this.currentGrid,this.curDate),this.dual&&this.buildGridWeeks(this.secondGrid,this.secondDate)}buildGridWeeks(e,t){let s=new moment(t);s.date(1),0==s.day()&&1==this.weekStartDay&&s.subtract(7,"d"),s.day(this.weekStartDay);let i=0;for(;i<6;){let n=0,l={days:[],number:s.format("w")};for(;n<7;)(t.isSame(this.curDate,"month")&&s.isSameOrBefore(this.curDate,"month")||!this.dual&&s.isAfter(this.curDate,"month")||this.dual&&t.isSame(this.secondDate,"month")&&s.isSameOrAfter(this.secondDate,"month"))&&(l.days[n]=moment(s.format())),5==s.format("d")&&(l.number=s.format("w")),s.add(1,"d"),n++;if(e.push(l),s.isAfter(t,"month")||s.isAfter(t,"year"))break;i++}}static ɵfac=function(e){return new(e||SystemInputDatePicker)(i.Y36(n.d),i.Y36(l.b),i.Y36(o.z),i.Y36(a.y),i.Y36(d.C),i.Y36(i.sBO))};static ɵcmp=i.Xpm({type:SystemInputDatePicker,selectors:[["system-input-date-picker"]],hostAttrs:[1,"slds-datepicker"],inputs:{setDate:"setDate",dual:"dual",minDate:"minDate",maxDate:"maxDate",weekStartDay:"weekStartDay",showTodayButton:"showTodayButton",enabledDays:"enabledDays",holidayCalendarId:"holidayCalendarId",holidaysDisabled:"holidaysDisabled"},outputs:{datePicked:"datePicked"},features:[i.TTD],decls:23,vars:12,consts:[[1,"slds-datepicker__filter","slds-grid"],[1,"slds-datepicker__filter_month","slds-grid","slds-grid_align-spread","slds-grow"],[1,"slds-align-middle"],["title","Previous Month",1,"slds-button","slds-button_icon","slds-button_icon-container",3,"click"],[3,"icon"],["aria-atomic","true","aria-live","assertive",1,"slds-align-middle"],["title","Next Month",1,"slds-button","slds-button_icon","slds-button_icon-container",3,"click"],[1,"slds-shrink-none"],[3,"ngModel","emitInputValueOnEnterPress","ngModelChange"],[3,"value","display",4,"ngFor","ngForOf"],[1,"slds-p-left--x-small"],["aria-labelledby","month","aria-multiselectable","true","role","grid",1,"slds-datepicker__month"],["scope","col",4,"ngIf"],["scope","col",4,"ngFor","ngForOf"],[4,"ngFor","ngForOf"],[4,"ngIf"],["class","slds-button slds-align_absolute-center slds-text-link",3,"click",4,"ngIf"],[3,"value","display"],["scope","col"],[3,"title"],["role","gridcell","class","slds-theme--shade",4,"ngIf"],["role","gridcell",3,"ngClass","click",4,"ngFor","ngForOf"],["role","gridcell",1,"slds-theme--shade"],[1,"slds-p-horizontal--xx-small",2,"cursor","default",3,"title"],["role","gridcell",3,"ngClass","click"],[3,"ngStyle"],[1,"slds-theme--shade"],[1,"slds-grid","slds-m-vertical--xx-small"],[1,"slds-size--1-of-2"],[1,"slds-button","slds-align_absolute-center","slds-text-link",3,"click"],["label","LBL_TODAY"]],template:function(e,t){1&e&&(i.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"button",3),i.NdJ("click",(function(e){return t.prevMonth(e)})),i._UZ(4,"system-button-icon",4),i.qZA()(),i.TgZ(5,"h2",5),i._uU(6),i.qZA(),i.TgZ(7,"div",2)(8,"button",6),i.NdJ("click",(function(e){return t.nextMonth(e)})),i._UZ(9,"system-button-icon",4),i.qZA()()(),i.TgZ(10,"div",7)(11,"system-select",8),i.NdJ("ngModelChange",(function(e){return t.currentYear=e})),i.YNc(12,p,1,2,"system-select-option",9),i.qZA()()(),i.TgZ(13,"div",10)(14,"table",11)(15,"thead")(16,"tr"),i.YNc(17,f,1,0,"th",12),i.YNc(18,b,3,2,"th",13),i.qZA()(),i.TgZ(19,"tbody"),i.YNc(20,x,3,2,"tr",14),i.qZA(),i.YNc(21,C,9,4,"tbody",15),i.qZA()(),i.YNc(22,k,2,0,"button",16)),2&e&&(i.xp6(4),i.Q6J("icon","left"),i.xp6(2),i.AsE("",t.currentMonth," (",t.curDate.year(),")"),i.xp6(3),i.Q6J("icon","right"),i.xp6(2),i.Q6J("ngModel",t.currentYear)("emitInputValueOnEnterPress",!0),i.xp6(1),i.Q6J("ngForOf",t.yearsList),i.xp6(5),i.Q6J("ngIf","small"!=t.layout.screenwidth),i.xp6(1),i.Q6J("ngForOf",t.weekdays),i.xp6(2),i.Q6J("ngForOf",t.currentGrid),i.xp6(1),i.Q6J("ngIf",t.dual),i.xp6(1),i.Q6J("ngIf",t.showTodayButton))},dependencies:[r.mk,r.sg,r.O5,r.PC,c.JJ,c.On,u.J,m._,g.R,h.X],encapsulation:2,changeDetection:0})}return SystemInputDatePicker})()},7758:(e,t,s)=>{"use strict";s.d(t,{y:()=>o});var i=s(62242),n=s(95030),l=s(83398);let o=(()=>{class SystemInputDelayed{onChange;onTouched;_value;_modeltimeout;delay=500;placeholder="";get value(){return this._value}set value(e){this._value=e,this._modeltimeout&&window.clearTimeout(this._modeltimeout),this._modeltimeout=window.setTimeout((()=>this.onChange(this._value)),this.delay)}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}writeValue(e){this._value=e}static ɵfac=function(e){return new(e||SystemInputDelayed)};static ɵcmp=i.Xpm({type:SystemInputDelayed,selectors:[["system-input-delayed"]],inputs:{delay:"delay",placeholder:"placeholder"},features:[i._Bn([{provide:n.JU,useExisting:(0,i.Gpc)((()=>SystemInputDelayed)),multi:!0}])],decls:3,vars:2,consts:[[1,"slds-form-element"],[1,"slds-form-element__control"],["type","text",1,"slds-input",3,"system-placeholder","ngModel","ngModelChange"]],template:function(e,t){1&e&&(i.TgZ(0,"div",0)(1,"div",1)(2,"input",2),i.NdJ("ngModelChange",(function(e){return t.value=e})),i.qZA()()()),2&e&&(i.xp6(2),i.Q6J("system-placeholder",t.placeholder)("ngModel",t.value))},dependencies:[l.A,n.Fj,n.JJ,n.On],encapsulation:2})}return SystemInputDelayed})()},25147:(e,t,s)=>{"use strict";s.d(t,{r:()=>r});var i=s(62242),n=s(95030),l=s(4154),o=s(55329),a=s(44755);function d(e,t){if(1&e&&(i.TgZ(0,"option",5),i._uU(1),i.qZA()),2&e){const e=t.$implicit;i.Q6J("value",e.value),i.xp6(1),i.Oqu(e.display)}}let r=(()=>{class SystemInputEnum{metadata;language;module;field;sortdirection;options=[];onChange;onTouched;_value;constructor(e,t){this.metadata=e,this.language=t}get value(){return this._value}set value(e){e!=this._value&&(this._value=e,this.onChange(e))}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}writeValue(e){this._value=e}ngOnInit(){this.getOptions()}getOptions(){let e=[],t=this.language.getFieldDisplayOptions(this.module,this.field);for(let s in t)e.push({value:s,display:t[s]});if(this.options=e,this.sortdirection)switch(this.sortdirection.toLowerCase()){case"desc":this.options.sort(((e,t)=>e.display.toLowerCase()<t.display.toLowerCase()?1:-1));break;case"asc":this.options.sort(((e,t)=>e.display.toLowerCase()>t.display.toLowerCase()?1:-1))}}static ɵfac=function(e){return new(e||SystemInputEnum)(i.Y36(l.Pu),i.Y36(o.d))};static ɵcmp=i.Xpm({type:SystemInputEnum,selectors:[["system-input-enum"]],inputs:{module:"module",field:"field",sortdirection:"sortdirection"},features:[i._Bn([{provide:n.JU,useExisting:(0,i.Gpc)((()=>SystemInputEnum)),multi:!0}])],decls:5,vars:2,consts:[[1,"slds-form-element"],[1,"slds-select_container"],[1,"slds-select",3,"ngModel","ngModelChange"],["focus",""],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(e,t){1&e&&(i.TgZ(0,"div",0)(1,"div",1)(2,"select",2,3),i.NdJ("ngModelChange",(function(e){return t.value=e})),i.YNc(4,d,2,2,"option",4),i.qZA()()()),2&e&&(i.xp6(2),i.Q6J("ngModel",t.value),i.xp6(2),i.Q6J("ngForOf",t.options))},dependencies:[a.sg,n.YN,n.Kr,n.EJ,n.JJ,n.On],encapsulation:2})}return SystemInputEnum})()},66659:(e,t,s)=>{"use strict";s.d(t,{a:()=>p});var i=s(62242),n=s(95030),l=s(55329),o=s(4154),a=s(44755),d=s(66898),r=s(34036),c=s(37302);function u(e,t){if(1&e&&(i.TgZ(0,"option",8),i._uU(1),i.qZA()),2&e){const e=t.$implicit;i.Q6J("value",e.id),i.xp6(1),i.Oqu(e.name)}}function m(e,t){if(1&e&&(i.TgZ(0,"optgroup",6),i.YNc(1,u,2,2,"option",7),i.ALo(2,"systemmodulecustompipe"),i.qZA()),2&e){const e=i.oxw();i.Q6J("label","custom "+e.language.getLabel("LBL_FIELDSET")),i.xp6(1),i.Q6J("ngForOf",i.xi3(2,2,e._fieldsets,e._module))}}function g(e,t){if(1&e&&(i.TgZ(0,"option",8),i._uU(1),i.qZA()),2&e){const e=t.$implicit;i.Q6J("value",e.id),i.xp6(1),i.Oqu(e.name)}}function h(e,t){if(1&e&&(i.TgZ(0,"optgroup",6),i.YNc(1,g,2,2,"option",7),i.ALo(2,"systemmoduleglobalpipe"),i.qZA()),2&e){const e=i.oxw();i.Q6J("label","global "+e.language.getLabel("LBL_FIELDSET")),i.xp6(1),i.Q6J("ngForOf",i.xi3(2,2,e._fieldsets,e._module))}}let p=(()=>{class SystemInputFieldset{language;metadata;disabled=!1;onChange;onTouched;_fieldset;_fieldsets=[];_module="";constructor(e,t){this.language=e,this.metadata=t,this._fieldsets=this.metadata.getFieldSets()}get fieldset(){return this._fieldset}set fieldset(e){this._fieldset=e,this.onChange(e)}detectModule(){this._fieldset&&(this._module=this.metadata.getFieldset(this._fieldset).module)}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}writeValue(e){this._fieldset=e,this.detectModule()}static ɵfac=function(e){return new(e||SystemInputFieldset)(i.Y36(l.d),i.Y36(o.Pu))};static ɵcmp=i.Xpm({type:SystemInputFieldset,selectors:[["system-input-fieldset"]],inputs:{disabled:"disabled"},features:[i._Bn([{provide:n.JU,useExisting:(0,i.Gpc)((()=>SystemInputFieldset)),multi:!0}])],decls:10,vars:12,consts:[[1,"slds-grid"],[1,"slds-p-right--xxx-small","slds-size--1-of-3",3,"ngModel","displayAsterisk","ngModelChange"],[1,"slds-form-element__control","slds-p-left--xxx-small","slds-size--2-of-3"],[1,"slds-select_container"],[1,"slds-select",3,"disabled","ngModel","ngModelChange"],[3,"label",4,"ngIf"],[3,"label"],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(e,t){1&e&&(i.TgZ(0,"div",0)(1,"system-input-module",1),i.NdJ("ngModelChange",(function(e){return t._module=e})),i.qZA(),i.TgZ(2,"div",2)(3,"div",3)(4,"select",4),i.NdJ("ngModelChange",(function(e){return t.fieldset=e})),i._UZ(5,"option"),i.YNc(6,m,3,5,"optgroup",5),i.ALo(7,"systemmodulecustompipe"),i.YNc(8,h,3,5,"optgroup",5),i.ALo(9,"systemmoduleglobalpipe"),i.qZA()()()()),2&e&&(i.xp6(1),i.Q6J("ngModel",t._module)("displayAsterisk",!0),i.xp6(3),i.Q6J("disabled",!t._module||t.disabled)("ngModel",t.fieldset),i.xp6(2),i.Q6J("ngIf",i.xi3(7,6,t._fieldsets,t._module.length>0)),i.xp6(2),i.Q6J("ngIf",i.xi3(9,9,t._fieldsets,t._module.length>0)))},dependencies:[a.sg,a.O5,n.YN,n.Kr,n.EJ,n.JJ,n.On,d.a,r.N,c.m],encapsulation:2})}return SystemInputFieldset})()},56041:(e,t,s)=>{"use strict";s.d(t,{K:()=>L});var i=s(15861),n=s(62242),l=s(95030),o=s(61135),a=s(26625),d=s(75920),r=s(13278),c=s(93441),u=s(55710),m=s(14505),g=s(44044),h=s(55329),p=s(69774),f=s(50151),b=s(44755),v=s(72656),y=s(87693),x=s(83463);const w=["inputFile"],Z=function(e){return{"slds-has-error":e}};function T(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"div",3)(1,"div",4),n.NdJ("system-drop-file",(function(t){n.CHM(e);const s=n.oxw();return n.KtG(s.uploadFile(t))})),n.TgZ(2,"input",5,6),n.NdJ("change",(function(){n.CHM(e);const t=n.MAs(3),s=n.oxw();return n.KtG(s.uploadFile(t.files))}))("click",(function(){n.CHM(e);const t=n.MAs(3);return n.KtG(t.value=null)})),n.qZA(),n.TgZ(4,"label",7)(5,"span",8),n._UZ(6,"system-button-icon",9)(7,"system-label",10),n.qZA(),n.TgZ(8,"span",11),n._UZ(9,"system-label",12)(10,"system-label",13),n.qZA()()()()}if(2&e){const e=n.oxw();n.xp6(1),n.Q6J("ngClass",n.VKq(5,Z,e.hasError)),n.xp6(1),n.Q6J("accept",e.accept)("disabled",e.disabled)("id",e.elementID),n.xp6(2),n.Q6J("for",e.elementID)}}function C(e,t){if(1&e){const e=n.EpF();n.ynx(0),n.TgZ(1,"span",17),n._UZ(2,"system-file-icon",18),n.qZA(),n.TgZ(3,"a",19)(4,"div",20),n._uU(5),n.qZA()(),n.TgZ(6,"button",21),n.NdJ("click",(function(){n.CHM(e);const t=n.oxw(2);return n.KtG(t.removeFile())})),n._UZ(7,"system-button-icon",22),n.qZA(),n.BQk()}if(2&e){const e=n.oxw(2);n.xp6(2),n.Q6J("filename",e.file.file_name)("filemimetype",e.file.file_mime_type),n.xp6(2),n.Q6J("system-title",e.file.file_name),n.xp6(1),n.hij(" ",e.file.file_name," ")}}function k(e,t){if(1&e&&(n.TgZ(0,"a",19)(1,"div",20),n._uU(2),n.qZA(),n.TgZ(3,"div",23)(4,"div",24),n._UZ(5,"span",25),n.qZA(),n.TgZ(6,"div",26),n._uU(7),n.qZA()()()),2&e){const e=n.oxw(2);n.xp6(1),n.Q6J("system-title",e.file.file_name),n.xp6(1),n.hij(" ",e.file.file_name," "),n.xp6(3),n.Udp("width",e.fileProgress,"%"),n.xp6(2),n.hij(" ",e.fileProgress," % ")}}function A(e,t){if(1&e&&(n.TgZ(0,"div",14),n.YNc(1,C,8,4,"ng-container",15),n.YNc(2,k,8,5,"ng-template",null,16,n.W1O),n.qZA()),2&e){const e=n.MAs(3),t=n.oxw();n.Q6J("ngClass",n.VKq(3,Z,t.hasError)),n.xp6(1),n.Q6J("ngIf",!t.isUploading)("ngIfElse",e)}}let L=(()=>{class SystemInputFile{configurationService;session;toast;helper;model;backend;modal;cdRef;language;inputFile;fieldName;accept="*";disabled=!1;hasError=!1;onRemove=new n.vpe;isUploading=!1;elementID=_.uniqueId("input-file");onChange;onTouched;fileProgress=0;file;constructor(e,t,s,i,n,l,o,a,d){this.configurationService=e,this.session=t,this.toast=s,this.helper=i,this.model=n,this.backend=l,this.modal=o,this.cdRef=a,this.language=d}registerOnChange(e){this.onChange=t=>{e(t)}}registerOnTouched(e){this.onTouched=e}writeValue(e){this.file=e}uploadFile(e){var t=this;return(0,i.Z)((function*(){if(0==e.length)return;t.isUploading=!0,t.cdRef.detectChanges(),t.file={file_name:e[0].name,file_mime_type:e[0].type,file_size:t.helper.humanFileSize(e[0].size)};let s=t.configurationService.getSystemParamater("upload_maxsize");if(s&&e[0].size>s)return void t.toast.sendToast(t.language.getLabelFormatted("LBL_EXCEEDS_MAX_UPLOADFILESIZE",[t.file.file_name,t.helper.humanFileSize(s)]),"error");let i=new o.X(0);i.subscribe((e=>{t.fileProgress=Math.floor(e),t.cdRef.detectChanges()}));const n=yield t.readFileAsync(e[0]),l={file:n.substring(n.indexOf("base64,")+7),filename:t.file.file_name,filemimetype:t.file.file_mime_type};t.backend.postRequestWithProgress("common/spiceattachments",null,l,i).subscribe((e=>{t.file.file_md5=e[0].filemd5,t.onChange({...t.file,remove:()=>t.removeFile(!0)}),t.isUploading=!1,t.cdRef.detectChanges()}))}))()}readFileAsync(e){return(0,i.Z)((function*(){return new Promise(((t,s)=>{const i=new FileReader;i.onload=()=>t(i.result.toString()),i.onerror=s,i.readAsDataURL(e)}))}))()}removeFile(e){this.file=void 0,this.cdRef.detectChanges(),e||this.onRemove.emit()}static ɵfac=function(e){return new(e||SystemInputFile)(n.Y36(a.C),n.Y36(d.n),n.Y36(r.A),n.Y36(c._),n.Y36(u.o),n.Y36(m.y),n.Y36(g.o),n.Y36(n.sBO),n.Y36(h.d))};static ɵcmp=n.Xpm({type:SystemInputFile,selectors:[["system-input-file"]],viewQuery:function(e,t){if(1&e&&n.Gf(w,5,n.s_b),2&e){let e;n.iGM(e=n.CRH())&&(t.inputFile=e.first)}},inputs:{fieldName:"fieldName",accept:"accept",disabled:"disabled",hasError:"hasError"},outputs:{onRemove:"onRemove"},features:[n._Bn([{provide:l.JU,useExisting:(0,n.Gpc)((()=>SystemInputFile)),multi:!0}])],decls:4,vars:2,consts:[[1,"slds-form-element__control","slds-grid","slds-grid--align-spread","slds-p-vertical--xx-small","slds-is-relative","slds-size--1-of-1"],["class","slds-file-selector slds-file-selector_files slds-is-relative slds-size--1-of-1",4,"ngIf","ngIfElse"],["fileContainer",""],[1,"slds-file-selector","slds-file-selector_files","slds-is-relative","slds-size--1-of-1"],[1,"slds-file-selector__dropzone","slds-p-around--small","slds-is-relative","slds-size--1-of-1",3,"ngClass","system-drop-file"],["type","file",1,"slds-file-selector__input","slds-assistive-text","slds-has-error",3,"accept","disabled","id","change","click"],["inputFile",""],[1,"slds-file-selector__body",2,"cursor","pointer",3,"for"],[1,"slds-file-selector__button","slds-button","slds-button_neutral"],["icon","upload",1,"slds-m-right--xx-small","slds-align--absolute-center"],["label","LBL_UPLOAD_FILE"],[1,"slds-file-selector__text","slds-medium-show"],["label","LBL_OR"],["label","LBL_DROP_FILE"],[1,"slds-pill","slds-pill_link","slds-size--1-of-1",3,"ngClass"],[4,"ngIf","ngIfElse"],["uploadingContainer",""],[1,"slds-pill__icon_container","slds-m-left--xxx-small"],["divClass","","size","small",3,"filename","filemimetype"],["href","javascript:void(0);",1,"slds-pill__action","slds-p-around--xx-small"],[1,"slds-pill__label","slds-truncate",2,"width","calc(100% - 20px)",3,"system-title"],["system-title","LBL_REMOVE",1,"slds-button","slds-button_icon","slds-button_icon","slds-pill__remove","slds-m-right--xx-small",3,"click"],["icon","close"],[1,"slds-grid","slds-grid_vertical-align-center","slds-grid--align-spread","slds-has-flexi-truncate","slds-size--1-of-1"],[1,"slds-progress-bar"],[1,"slds-progress-bar__value"],[1,"slds-p-left--xx-small",2,"width","50px"]],template:function(e,t){if(1&e&&(n.TgZ(0,"div",0),n.YNc(1,T,11,7,"div",1),n.YNc(2,A,4,5,"ng-template",null,2,n.W1O),n.qZA()),2&e){const e=n.MAs(3);n.xp6(1),n.Q6J("ngIf",!t.file)("ngIfElse",e)}},dependencies:[p.M,f.S,b.mk,b.O5,v.J,y.T,x._],encapsulation:2,changeDetection:0})}return SystemInputFile})()},50638:(e,t,s)=>{"use strict";s.d(t,{n:()=>l});var i=s(62242),n=s(95030);let l=(()=>{class SystemInputInteger{elementRef;onChange;onTouched;_value;disabled=!1;constructor(e){this.elementRef=e}get value(){return this._value}set value(e){e!=this._value&&(this._value=e,this.onChange(e))}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}writeValue(e){this._value=e}emitBlur(){this.elementRef.nativeElement.dispatchEvent(new Event("blur",{bubbles:!0}))}static ɵfac=function(e){return new(e||SystemInputInteger)(i.Y36(i.SBq))};static ɵcmp=i.Xpm({type:SystemInputInteger,selectors:[["system-input-integer"]],inputs:{disabled:"disabled"},features:[i._Bn([{provide:n.JU,useExisting:(0,i.Gpc)((()=>SystemInputInteger)),multi:!0}])],decls:3,vars:2,consts:[[1,"slds-form-element"],[1,"slds-form-element__control"],["type","number",1,"slds-input","slds-text-align--right",3,"ngModel","disabled","ngModelChange","blur"]],template:function(e,t){1&e&&(i.TgZ(0,"div",0)(1,"div",1)(2,"input",2),i.NdJ("ngModelChange",(function(e){return t.value=e}))("blur",(function(){return t.emitBlur()})),i.qZA()()()),2&e&&(i.xp6(2),i.Q6J("ngModel",t.value)("disabled",t.disabled))},dependencies:[n.Fj,n.wV,n.JJ,n.On],encapsulation:2})}return SystemInputInteger})()},83497:(e,t,s)=>{"use strict";s.d(t,{$:()=>v});var i=s(62242),n=s(95030),l=s(55329),o=s(44044),a=s(29266),d=s(83398),r=s(44755),c=s(72656),u=s(83463),m=s(78859);function g(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"button",16),i.NdJ("click",(function(){i.CHM(e);const t=i.oxw(2);return i.KtG(t.clearField())})),i._UZ(1,"system-button-icon",17),i.qZA()}2&e&&(i.xp6(1),i.Q6J("icon","close"))}const h=function(e){return{"slds-theme--shade":e}};function p(e,t){if(1&e&&(i.TgZ(0,"div",10)(1,"div",11)(2,"span",12)(3,"span",13),i._UZ(4,"system-label",14),i._uU(5),i.qZA(),i.YNc(6,g,2,1,"button",15),i.qZA()()()),2&e){const e=i.oxw();i.xp6(2),i.Q6J("ngClass",i.VKq(4,h,e._disabled)),i.xp6(2),i.Q6J("label",e.label),i.xp6(1),i.hij(" (",e.label,")"),i.xp6(1),i.Q6J("ngIf",!e._disabled)}}function f(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"div",18)(1,"input",19),i.NdJ("ngModelChange",(function(t){i.CHM(e);const s=i.oxw();return i.KtG(s.searchterm=t)}))("keyup",(function(t){i.CHM(e);const s=i.oxw();return i.KtG(s.keyup(t))}))("blur",(function(){i.CHM(e);const t=i.oxw();return i.KtG(t.onBlur())})),i.qZA()()}if(2&e){const e=i.oxw();i.xp6(1),i.Q6J("disabled",e._disabled)("ngModel",e.searchterm)}}function b(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"li",20),i.NdJ("mousedown",(function(){const t=i.CHM(e).$implicit,s=i.oxw();return i.KtG(s.selectLabel(t.label))})),i.TgZ(1,"div",21)(2,"span",22),i._uU(3),i.qZA()()()}if(2&e){const e=t.$implicit;i.xp6(3),i.AsE("",e.label," [",e.translation,"]")}}const _=function(e){return{"slds-is-open":e}};let v=(()=>{class SystemInputLabel{language;modal;modelutilities;_disabled=!1;set disabled(e){this._disabled=!1!==e}onChange;onTouched;_time={display:"",moment:null,offset:0,valid:!0};label="";_searchterm="";clickListener;foundlabels=[];constructor(e,t,s){this.language=e,this.modal=t,this.modelutilities=s}get isOpen(){return""!=this._searchterm}get searchterm(){return this._searchterm}set searchterm(e){this._searchterm=e,this.dosearch()}ngOnDestroy(){this.clickListener&&this.clickListener()}onBlur(){this._searchterm=""}dosearch(){this._searchterm?this.foundlabels=this.language.searchLabel(this._searchterm,50):this.foundlabels=[]}selectLabel(e){this.label=e,this._searchterm="",this.onChange(e)}clearField(){this.label="",this.onChange("")}keyup(e){if("Enter"===e.key)this.label=this._searchterm,this.onChange(this.label),this._searchterm=""}addLabel(){let e={id:this.modelutilities.generateGuid(),name:"",scope:"custom",custom_translations:[],global_translations:[]};e.custom_translations.push({id:this.modelutilities.generateGuid(),syslanguagelabel_id:e.id,syslanguage:this.language.languagedata.languages.default}),this.modal.openModal("LanguageLabelModal").subscribe((t=>{t.instance.label=e,t.instance.label$.subscribe((e=>{e&&(this.label=e.name,this.onChange(this.label))}))}))}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}writeValue(e){this.label=e}static ɵfac=function(e){return new(e||SystemInputLabel)(i.Y36(l.d),i.Y36(o.o),i.Y36(a.A))};static ɵcmp=i.Xpm({type:SystemInputLabel,selectors:[["system-input-label"]],inputs:{disabled:"disabled"},features:[i._Bn([{provide:n.JU,useExisting:(0,i.Gpc)((()=>SystemInputLabel)),multi:!0}])],decls:10,vars:8,consts:[[1,"slds-combobox_container"],["role","combobox",1,"slds-combobox","slds-dropdown-trigger","slds-dropdown-trigger_click",3,"ngClass"],["class","slds-form-element__control",4,"ngIf"],["class","slds-combobox__form-element slds-input-has-icon slds-input-has-icon_right",4,"ngIf"],["role","listbox",1,"slds-dropdown","slds-dropdown_fluid","slds-dropdown--length-7"],["role","presentation",1,"slds-listbox","slds-listbox_vertical"],["role","presentation","class","slds-listbox__item",3,"mousedown",4,"ngFor","ngForOf"],["role","presentation",1,"slds-listbox__item","slds-border_top","slds-p-vertical--xx-small",3,"mousedown"],[1,"slds-button","slds-button--icon","slds-align_absolute-center"],[3,"icon","size"],[1,"slds-form-element__control"],[1,"slds-pill_container"],[1,"slds-pill","slds-size--1-of-1","slds-p-horizontal--xx-small",3,"ngClass"],[1,"slds-pill__label"],[3,"label"],["class","slds-button slds-button--icon slds-pill__remove",3,"click",4,"ngIf"],[1,"slds-button","slds-button--icon","slds-pill__remove",3,"click"],[3,"icon"],[1,"slds-combobox__form-element","slds-input-has-icon","slds-input-has-icon_right"],["type","search","system-placeholder","LBL_SEARCH","role","combobox",1,"slds-input","slds-combobox__input",3,"disabled","ngModel","ngModelChange","keyup","blur"],["role","presentation",1,"slds-listbox__item",3,"mousedown"],["role","option",1,"slds-media","slds-listbox__option","slds-listbox__option_plain"],[1,"slds-truncate"]],template:function(e,t){1&e&&(i.TgZ(0,"div",0)(1,"div",1),i.YNc(2,p,7,6,"div",2),i.YNc(3,f,2,2,"div",3),i.TgZ(4,"div",4)(5,"ul",5),i.YNc(6,b,4,2,"li",6),i.TgZ(7,"li",7),i.NdJ("mousedown",(function(){return t.addLabel()})),i.TgZ(8,"button",8),i._UZ(9,"system-utility-icon",9),i.qZA()()()()()()),2&e&&(i.xp6(1),i.Q6J("ngClass",i.VKq(6,_,t.isOpen)),i.xp6(1),i.Q6J("ngIf",t.label),i.xp6(1),i.Q6J("ngIf",!t.label),i.xp6(3),i.Q6J("ngForOf",t.foundlabels),i.xp6(3),i.Q6J("icon","add")("size","x-small"))},dependencies:[d.A,r.mk,r.sg,r.O5,n.Fj,n.JJ,n.On,c.J,u._,m.r],encapsulation:2})}return SystemInputLabel})()},82547:(e,t,s)=>{"use strict";s.d(t,{l:()=>N});var i=s(62242),n=s(95030),l=s(55329),o=s(4154),a=s(66550),d=s(13278),r=s(62422),c=s(3144),u=s(42067),m=s(69774),g=s(54021),h=s(44755),p=s(74610),f=s(72656),b=s(7514),v=s(15621),y=s(83463);const x=["fileselector"],w=["imgelement"],Z=["bottomtoolbar"],T=["toolbar"];function C(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"li")(1,"button",11),i.NdJ("click",(function(){i.CHM(e);const t=i.oxw();return i.KtG(t.removeModifications())})),i._UZ(2,"system-button-icon",25),i.qZA()()}if(2&e){const e=i.oxw();i.xp6(1),i.s9C("title",e.language.getLabel("LBL_REMOVE_MODIFICATIONS")),i.Q6J("disabled",!e.cropper||!e.isEdited)}}function k(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"div",26)(1,"system-checkbox",27),i.NdJ("ngModelChange",(function(t){i.CHM(e);const s=i.oxw();return i.KtG(s.doResizeByUser=t)})),i._UZ(2,"system-label",28),i.qZA(),i.TgZ(3,"system-input-number",29),i.NdJ("ngModelChange",(function(t){i.CHM(e);const s=i.oxw();return i.KtG(s.maxWidthInput=t)}))("change",(function(){i.CHM(e);const t=i.oxw();return i.KtG(t.maxWidthChanged())})),i.qZA(),i.TgZ(4,"div",30),i._uU(5,"px"),i.qZA(),i.TgZ(6,"div",31),i._uU(7,"x"),i.qZA(),i.TgZ(8,"system-input-number",29),i.NdJ("ngModelChange",(function(t){i.CHM(e);const s=i.oxw();return i.KtG(s.maxHeightInput=t)}))("change",(function(){i.CHM(e);const t=i.oxw();return i.KtG(t.maxHeightChanged())})),i.qZA(),i.TgZ(9,"div",30),i._uU(10,"px"),i.qZA()()}if(2&e){const e=i.oxw();i.xp6(1),i.Q6J("ngModel",e.doResizeByUser)("disabled",!e.canResize),i.xp6(2),i.MGl("placeholder","",e.language.getLabel("LBL_WIDTH")," "),i.Q6J("ngModel",e.maxWidthInput)("disabled",!e.doResizeByUser||!e.canResize),i.xp6(5),i.MGl("placeholder","",e.language.getLabel("LBL_HEIGHT")," "),i.Q6J("ngModel",e.maxHeightInput)("disabled",!e.doResizeByUser||!e.canResize)}}function A(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"img",32,33),i.NdJ("load",(function(t){i.CHM(e);const s=i.oxw();return i.KtG(s.imageLoaded(t))})),i.qZA()}if(2&e){const e=i.oxw();i.Q6J("src",e.mediaBase64,i.LSH)}}function L(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"div",34)(1,"div",35)(2,"button",36),i.NdJ("click",(function(){i.CHM(e);const t=i.oxw();return i.KtG(t.triggerFileSelectionDialog())})),i._UZ(3,"system-label",37),i.qZA(),i.TgZ(4,"input",38,39),i.NdJ("change",(function(){i.CHM(e);const t=i.oxw();return i.KtG(t.fileSelectionChange())})),i.qZA(),i.TgZ(6,"div",31),i._UZ(7,"system-label",40),i.qZA()()()}}function I(e,t){if(1&e&&(i.TgZ(0,"div",41),i._uU(1),i.qZA()),2&e){const e=i.oxw();i.xp6(1),i.hij("Format: ",e.mediaMetaData.fileformat.toUpperCase(),"")}}function S(e,t){if(1&e&&(i.TgZ(0,"span"),i._uU(1),i.qZA()),2&e){const e=i.oxw(2);i.xp6(1),i.AsE("  →  ",e.mediaMetaData.width," × ",e.mediaMetaData.height," px")}}function M(e,t){if(1&e&&(i.TgZ(0,"div"),i._uU(1),i.YNc(2,S,2,2,"span",6),i.qZA()),2&e){const e=i.oxw();i.xp6(1),i.AsE("",e.mediaMetaData.originalWidth," × ",e.mediaMetaData.originalHeight," px"),i.xp6(1),i.Q6J("ngIf",e.isResized)}}function J(e,t){1&e&&(i.TgZ(0,"div"),i._uU(1," "),i.qZA())}const O=function(e){return{height:e}};let N=(()=>{class SystemInputMedia{language;metadata;sanitizer;toast;userprefs;componentElRef;renderer;http;cd;libloader;onChange;onTouched;componentHeight=500;set allowModifications(e){this.allowMirroring=this.allowResizing=this.allowRotating=this.allowCropping=e}allowCropping=!0;allowResizing=!0;allowRotating=!0;allowMirroring=!0;set _mimetype(e){this.mediaMetaData.mimetype=e,this.mediaMetaData.fileformat=this.getFileformatFromMimetype(this.mediaMetaData.mimetype)}mimetype=new i.vpe;fileSelector;imageElement;bottomToolbar;toolbar;mediaBase64=null;cropper=null;fileformatErrorMessageCode=null;fileFromBrowser=null;maxWidthInput="";maxHeightInput="";_maxWidthByUser=null;_maxHeightByUser=null;_maxWidthBySystem=null;get maxWidthBySystem(){return this._maxWidthBySystem}set maxWidthBySystem(e){this._maxWidthBySystem=e,this.calcTargetSize()}_maxHeightBySystem=null;get maxHeightBySystem(){return this._maxHeightBySystem}set maxHeightBySystem(e){this._maxHeightBySystem=e,this.calcTargetSize()}isCropped=!1;isImported=!1;mediaMetaData;_doResizeByUser=!1;isLoading=!1;unlistenPasteEvent;xMirrored=1;yMirrored=1;currentRotation=0;jpegCompressionLevel=.95;lastCropBoxData={};constructor(e,t,s,i,n,l,o,a,d,r){this.language=e,this.metadata=t,this.sanitizer=s,this.toast=i,this.userprefs=n,this.componentElRef=l,this.renderer=o,this.http=a,this.cd=d,this.libloader=r,this.resetMediaMetaData(),this.unlistenPasteEvent=this.renderer.listen("window","paste",(e=>{this.handlePaste(e)}))}handlePaste(e){if(e.preventDefault(),e.stopPropagation(),!this.isLoading&&(e.clipboardData.files&&e.clipboardData.files[0]&&(this.fileFromBrowser=e.clipboardData.files[0],this.fileSelectedOrDropped()),e.clipboardData.items&&e.clipboardData.items[0])){const t=e.clipboardData.items[0];if("string"===t.kind)t.getAsString((e=>{this.stringLooksLikeUrl(e)&&(this.resetFileNotAllowedError(),this.isLoading=!0,this.cd.detectChanges(),this.http.get("proxy/?useurl="+btoa(e),{observe:"response",responseType:"blob"}).subscribe((t=>{this.isLoading=!1,this.cd.detectChanges(),this.fileFromBrowser=null,this.checkMimetype(t.body.type)?(this.mediaBase64=this.sanitizer.bypassSecurityTrustResourceUrl(window.URL.createObjectURL(t.body)),this.cd.detectChanges(),this.resetMediaMetaData(),this.resetModificationStati(),this.isImported=!0,this.mediaMetaData.filename=e.substring(e.lastIndexOf("/")+1),this.mediaMetaData.mimetype=t.body.type,this.mediaMetaData.fileformat=this.getFileformatFromMimetype(t.body.type)):this.showFileNotAllowedError(t.body.type)}),(e=>{this.isLoading=!1})))}));else{this.resetFileNotAllowedError();const e=t.getAsFile();if(!this.checkMimetype(e.type))return void this.showFileNotAllowedError(e.type);this.mediaMetaData.fileformat=this.getFileformatFromMimetype(e),this.mediaMetaData.mimetype=e.type,this.resetModificationStati(),this.isImported=!0,this.mediaBase64=this.sanitizer.bypassSecurityTrustResourceUrl(window.URL.createObjectURL(e))}}}resetMediaMetaData(){this.mediaMetaData={mimetype:null,fileformat:null,filename:null,width:0,height:0,originalWidth:0,originalHeight:0}}stringLooksLikeUrl(e){return/^(http|https|ftp|file):\/\//.test(e)}get cropperHeight(){try{return this.componentHeight-this.toolbar.nativeElement.offsetHeight-this.bottomToolbar.nativeElement.offsetHeight-5+"px"}catch(e){return"0px"}}triggerFileSelectionDialog(){this.fileSelector.nativeElement.dispatchEvent(new MouseEvent("click",{bubbles:!0}))}getMediaFromFileSystem(){let e=new FileReader;e.onloadend=t=>{this.resetModificationStati(),this.isImported=!0,this.mediaBase64=e.result},e.readAsDataURL(this.fileFromBrowser)}imageLoaded(e){let t=this.imageElement.nativeElement;this.cropper&&this.cropper.destroy(),this.cropper=new Cropper(t,{autoCrop:!1,viewMode:1,toggleDragModeOnDblclick:this.allowCropping,dragMode:this.allowCropping?"crop":"move"}),this.cropper.crop(),t.addEventListener("ready",(()=>{this.cropper&&(this.mediaMetaData.originalWidth=this.cropper.getImageData().naturalWidth,this.mediaMetaData.originalHeight=this.cropper.getImageData().naturalHeight,this.calcTargetSize(),this.isDirty&&this.emitChange())})),this.allowCropping&&t.addEventListener("cropend",(()=>{let e=this.cropper.getCropBoxData();this.isCropped=!_.isEmpty(this.cropper.getCropBoxData()),_.isEqual(e,this.lastCropBoxData)||(this.lastCropBoxData=_.clone(e),this.emitChange(),this.calcTargetSize())})),t.addEventListener("zoom",(()=>{this.isEdited&&this.emitChange(),this.isCropped&&this.calcTargetSize()}))}onDrop(e){this.fileFromBrowser=e[0],this.fileSelectedOrDropped()}set onDropExtern(e){e&&this.onDrop(e)}getFileformatFromMimetype(e){if(null===e)return"";const t="object"==typeof e?e?.type:e;return"string"==typeof t&&/^image\/\w+/.test(t)?t.split("/").pop():""}checkMimetype(e){return"image/jpeg"===e||"image/png"===e||"image/gif"===e}showFileNotAllowedError(e){this.fileformatErrorMessageCode&&this.toast.clearToast(this.fileformatErrorMessageCode),this.fileformatErrorMessageCode=this.toast.sendToast("Not an image file or file type "+(e?'"'+e+'"':"")+" not supported.","error",null,!1,this.fileformatErrorMessageCode)}resetFileNotAllowedError(){this.fileformatErrorMessageCode&&this.toast.clearToast(this.fileformatErrorMessageCode)}fileSelectionChange(){return 1===this.fileSelector.nativeElement.files.length&&(this.fileFromBrowser=this.fileSelector.nativeElement.files[0],this.fileSelectedOrDropped()),this.fileSelector.nativeElement.value=null,!1}fileSelectedOrDropped(){if(this.resetFileNotAllowedError(),!this.checkMimetype(this.fileFromBrowser.type))return this.showFileNotAllowedError(this.getFileExtension(this.fileFromBrowser)),void(this.fileFromBrowser=null);this.resetMediaMetaData(),this.mediaMetaData.fileformat=this.getFileformatFromMimetype(this.fileFromBrowser),this.mediaMetaData.filename=this.fileFromBrowser.name,this.mediaMetaData.mimetype=this.fileFromBrowser.type,this.getMediaFromFileSystem()}getFileExtension(e){return e.name.split(".").pop()}removeImage(){this.resetMediaMetaData(),this.cropper&&(this.cropper.destroy(),this.cropper=void 0),this.mediaBase64=null,this.emitChange()}getImage(){if(!this.cropper)return null;let e;return e=this.isEdited||this.isResized?this.cropper.getCroppedCanvas({maxHeight:this.mediaMetaData.height,maxWidth:this.mediaMetaData.width,imageSmoothingEnabled:!0,imageSmoothingQuality:"high"}).toDataURL(this.mediaMetaData.mimetype,"image/jpeg"===this.mediaMetaData.mimetype?this.jpegCompressionLevel:void 0):this.mediaBase64.toString(),e.substring(e.indexOf("base64,")+7)}setMoveMode(){this.cropper.setDragMode("move")}setCropMode(){this.cropper.setDragMode("crop")}removeCropping(){this.cropper.clear(),this.isCropped=!1,this.lastCropBoxData={},this.calcTargetSize(),this.emitChange()}get canResize(){return this.allowResizing&&this.cropper}get canMirror(){return this.allowMirroring&&this.cropper}get canRotate(){return this.allowRotating&&this.cropper}maxHeightChanged(){let e;e=this.maxHeightInput.split(this.userprefs.toUse.num_grp_sep).join(""),e=parseInt(e,10),this._maxHeightByUser=isNaN(e)?null:e,this.calcTargetSize(),this.emitChange()}maxWidthChanged(){let e;e=this.maxWidthInput.split(this.userprefs.toUse.num_grp_sep).join(""),e=parseInt(e,10),this._maxWidthByUser=isNaN(e)?null:e,this.calcTargetSize(),this.emitChange()}get maxHeight(){return this.maxHeightBySystem&&this.maxHeightByUser?this.maxHeightBySystem<this.maxHeightByUser?this.maxHeightBySystem:this.maxHeightByUser:this.maxHeightBySystem?this.maxHeightBySystem:this.maxHeightByUser?this.maxHeightByUser:null}get maxWidth(){return this.maxWidthBySystem&&this.maxWidthByUser?this.maxWidthBySystem<this.maxWidthByUser?this.maxWidthBySystem:this.maxWidthByUser:this.maxWidthBySystem?this.maxWidthBySystem:this.maxWidthByUser?this.maxWidthByUser:null}get doResizeByUser(){return this._doResizeByUser}set doResizeByUser(e){this._doResizeByUser=e,this.calcTargetSize()}get maxWidthByUser(){return this.doResizeByUser?this._maxWidthByUser:void 0}get maxHeightByUser(){return this.doResizeByUser?this._maxHeightByUser:void 0}calcTargetSize(){if(!this.cropper)return;let e,t=1,s=this.cropper.getData(!0).width;0===s?(s=this.cropper.getImageData().naturalWidth,e=this.cropper.getImageData().naturalHeight):e=this.cropper.getData(!0).height,this.maxWidth&&s>this.maxWidth||this.maxHeight&&e>this.maxHeight?(t=this.maxWidth&&!this.maxHeight?this.maxWidth/s:this.maxHeight&&!this.maxWidth?this.maxHeight/e:this.maxWidth/s<this.maxHeight/e?this.maxWidth/s:this.maxHeight/e,this.mediaMetaData.width=Math.floor(s*t),this.mediaMetaData.height=Math.floor(e*t)):(this.mediaMetaData.width=s,this.mediaMetaData.height=e)}ngOnDestroy(){this.fileformatErrorMessageCode&&this.toast.clearToast(this.fileformatErrorMessageCode),this.unlistenPasteEvent()}zoomIn(){this.cropper.zoom(.1)}zoomOut(){this.cropper.zoom(-.1)}mirrorX(){90===this.currentRotation||270===this.currentRotation?this.cropper.scaleY(this.yMirrored=-1*this.yMirrored):this.cropper.scaleX(this.xMirrored=-1*this.xMirrored),this.emitChange()}mirrorY(){90===this.currentRotation||270===this.currentRotation?this.cropper.scaleX(this.xMirrored=-1*this.xMirrored):this.cropper.scaleY(this.yMirrored=-1*this.yMirrored),this.emitChange()}rotate(e){this.currentRotation+=e,this.currentRotation=this.currentRotation%360,this.currentRotation<0&&(this.currentRotation+=360),this.cropper.rotateTo(this.currentRotation),this.emitChange()}get isRotated(){return 0!==this.currentRotation}get isMirrored(){return-1===this.xMirrored||-1===this.yMirrored}get isResized(){return this.mediaMetaData.width!==this.mediaMetaData.originalWidth||this.mediaMetaData.height!==this.mediaMetaData.originalHeight}get isEdited(){return this.isRotated||this.isMirrored||this.isCropped}get isDirty(){return this.isEdited||this.isImported||this.isResized}emitChange(){this.mimetype.emit(this.mediaMetaData.mimetype),this.onChange(this.getImage())}resetModificationStati(){this.xMirrored=this.yMirrored=1,this.currentRotation=0,this.isCropped=!1,this.lastCropBoxData={}}removeModifications(){this.cropper.rotateTo(0),this.cropper.scale(1,1),this.cropper.clear(),this.isCropped=!1,this.lastCropBoxData={},this.calcTargetSize(),this.emitChange()}get allowEditing(){return this.allowCropping||this.allowRotating||this.allowMirroring}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}writeValue(e){e&&""!=e&&(this.mediaBase64=this.sanitizer.bypassSecurityTrustResourceUrl("data:"+this.mediaMetaData.mimetype+";base64,"+e),this.calcTargetSize()),this.resetModificationStati(),this.isImported=!1}static ɵfac=function(e){return new(e||SystemInputMedia)(i.Y36(l.d),i.Y36(o.Pu),i.Y36(a.H7),i.Y36(d.A),i.Y36(r.z),i.Y36(i.SBq),i.Y36(i.Qsj),i.Y36(c.eN),i.Y36(i.sBO),i.Y36(u.$))};static ɵcmp=i.Xpm({type:SystemInputMedia,selectors:[["system-input-media"]],viewQuery:function(e,t){if(1&e&&(i.Gf(x,5),i.Gf(w,5),i.Gf(Z,5),i.Gf(T,5)),2&e){let e;i.iGM(e=i.CRH())&&(t.fileSelector=e.first),i.iGM(e=i.CRH())&&(t.imageElement=e.first),i.iGM(e=i.CRH())&&(t.bottomToolbar=e.first),i.iGM(e=i.CRH())&&(t.toolbar=e.first)}},inputs:{componentHeight:"componentHeight",allowModifications:"allowModifications",allowCropping:"allowCropping",allowResizing:"allowResizing",allowRotating:"allowRotating",allowMirroring:"allowMirroring",_mimetype:["mimetype","_mimetype"],maxWidthBySystem:["maxWidth","maxWidthBySystem"],maxHeightBySystem:["maxHeight","maxHeightBySystem"],onDropExtern:["droppedFiles","onDropExtern"]},outputs:{mimetype:"mimetype"},features:[i._Bn([{provide:n.JU,useExisting:(0,i.Gpc)((()=>SystemInputMedia)),multi:!0}])],decls:49,vars:26,consts:[[1,"slds-rich-text-editor","slds-grid","slds-grid_vertical","slds-nowrap"],["role","toolbar",1,"slds-rich-text-editor__toolbar","slds-shrink-none"],["toolbar",""],[1,"slds-button-group-list"],[1,"slds-button","slds-button--icon-border","slds-button--neutral",3,"disabled","click"],["icon","delete"],[4,"ngIf"],["icon","zoomin"],["icon","zoomout"],["icon","move"],["icon","drag"],[1,"slds-button","slds-button--icon-border","slds-button--neutral",3,"disabled","title","click"],["icon","clear"],["icon","rotateleft","size","medium"],["icon","rotateright","size","medium"],["icon","mirrorhorizontal","size","medium"],["icon","mirrorvertical","size","medium"],["class","slds-grid slds-grid--vertical-align-center slds-col--bump-left",4,"ngIf"],[3,"ngStyle"],[1,"slds-height_full",2,"overflow","hidden",3,"system-overlay-loading-spinner","system-drop-file"],["style","display:block",3,"src","load",4,"ngIf","ngIfElse"],["uploadbutton",""],["role","toolbar",1,"slds-rich-text-editor__toolbar","slds-shrink-none","slds-rich-text-editor__toolbar_bottom"],["bottomtoolbar",""],["class","slds-col--bump-right",4,"ngIf"],["icon","undo"],[1,"slds-grid","slds-grid--vertical-align-center","slds-col--bump-left"],[3,"ngModel","disabled","ngModelChange"],["label","LBL_DOWNSIZE_TO_MAX"],["onlyField","true","precision","0","min","1","size","5",3,"ngModel","placeholder","disabled","ngModelChange","change"],[1,"slds-p-left--xxx-small"],[1,"slds-p-horizontal--x-small"],[2,"display","block",3,"src","load"],["imgelement",""],[1,"slds-size--1-of-1","slds-height_full","slds-align--absolute-center"],[1,"slds-grid","slds-grid--vertical-align-center"],[1,"slds-button","slds-button--neutral",3,"click"],["label","LBL_SELECT_FILE"],["type","file","accept","image/*",2,"display","none",3,"change"],["fileselector",""],["label","LBL_OR_PASTE_IMAGE_OR_DROP_FILE_HERE"],[1,"slds-col--bump-right"]],template:function(e,t){if(1&e&&(i.TgZ(0,"div",0)(1,"div",1,2)(3,"ul",3)(4,"li")(5,"button",4),i.NdJ("click",(function(){return t.removeImage()})),i._UZ(6,"system-button-icon",5),i.qZA()(),i.YNc(7,C,3,2,"li",6),i.qZA(),i.TgZ(8,"ul",3)(9,"li")(10,"button",4),i.NdJ("click",(function(){return t.zoomIn()})),i._UZ(11,"system-button-icon",7),i.qZA()(),i.TgZ(12,"li")(13,"button",4),i.NdJ("click",(function(){return t.zoomOut()})),i._UZ(14,"system-button-icon",8),i.qZA()()(),i.TgZ(15,"ul",3)(16,"li")(17,"button",4),i.NdJ("click",(function(){return t.setMoveMode()})),i._UZ(18,"system-button-icon",9),i.qZA()(),i.TgZ(19,"li")(20,"button",4),i.NdJ("click",(function(){return t.setCropMode()})),i._UZ(21,"system-button-icon",10),i.qZA()(),i.TgZ(22,"li")(23,"button",11),i.NdJ("click",(function(){return t.removeCropping()})),i._UZ(24,"system-button-icon",12),i.qZA()()(),i.TgZ(25,"ul",3)(26,"li")(27,"button",11),i.NdJ("click",(function(){return t.rotate(-90)})),i._UZ(28,"system-button-custom-icon",13),i.qZA()(),i.TgZ(29,"li")(30,"button",11),i.NdJ("click",(function(){return t.rotate(90)})),i._UZ(31,"system-button-custom-icon",14),i.qZA()(),i.TgZ(32,"li")(33,"button",11),i.NdJ("click",(function(){return t.mirrorX()})),i._UZ(34,"system-button-custom-icon",15),i.qZA()(),i.TgZ(35,"li")(36,"button",11),i.NdJ("click",(function(){return t.mirrorY()})),i._UZ(37,"system-button-custom-icon",16),i.qZA()()(),i.YNc(38,k,11,8,"div",17),i.qZA(),i.TgZ(39,"div",18)(40,"div",19),i.NdJ("system-drop-file",(function(e){return t.onDrop(e)})),i.YNc(41,A,2,1,"img",20),i.YNc(42,L,8,0,"ng-template",null,21,i.W1O),i.qZA()(),i.TgZ(44,"div",22,23),i.YNc(46,I,2,1,"div",24),i.YNc(47,M,3,3,"div",6),i.YNc(48,J,2,0,"div",6),i.qZA()()),2&e){const e=i.MAs(43);i.xp6(5),i.Q6J("disabled",!t.mediaBase64),i.xp6(2),i.Q6J("ngIf",t.allowEditing),i.xp6(3),i.Q6J("disabled",!t.mediaBase64),i.xp6(3),i.Q6J("disabled",!t.mediaBase64),i.xp6(4),i.Q6J("disabled",!t.cropper),i.xp6(3),i.Q6J("disabled",!t.cropper),i.xp6(3),i.s9C("title",t.language.getLabel("LBL_REMOVE_CROPPING")),i.Q6J("disabled",!t.cropper||!t.isCropped),i.xp6(4),i.s9C("title",t.language.getLabel("LBL_ROTATE_TO_LEFT")),i.Q6J("disabled",!t.canRotate),i.xp6(3),i.s9C("title",t.language.getLabel("LBL_ROTATE_TO_RIGHT")),i.Q6J("disabled",!t.canRotate),i.xp6(3),i.s9C("title",t.language.getLabel("LBL_MIRROR_HORIZONTALLY")),i.Q6J("disabled",!t.canMirror),i.xp6(3),i.s9C("title",t.language.getLabel("LBL_MIRROR_VERTICALLY")),i.Q6J("disabled",!t.canMirror),i.xp6(2),i.Q6J("ngIf",t.allowResizing),i.xp6(1),i.Q6J("ngStyle",i.VKq(24,O,t.cropperHeight)),i.xp6(1),i.Q6J("system-overlay-loading-spinner",t.isLoading),i.xp6(1),i.Q6J("ngIf",t.mediaBase64)("ngIfElse",e),i.xp6(5),i.Q6J("ngIf",t.mediaMetaData.fileformat),i.xp6(1),i.Q6J("ngIf",t.mediaBase64),i.xp6(1),i.Q6J("ngIf",!t.mediaBase64)}},dependencies:[m.M,g._,h.O5,h.PC,n.JJ,n.On,p.O,f.J,b.U,v.i,y._],encapsulation:2})}return SystemInputMedia})()},66898:(e,t,s)=>{"use strict";s.d(t,{a:()=>g});var i=s(62242),n=s(95030),l=s(50727),o=s(55329),a=s(4154),d=s(26625),r=s(44755),c=s(33543),u=s(84548);function m(e,t){if(1&e&&i._UZ(0,"system-select-option",2),2&e){const e=t.$implicit;i.Q6J("value",e.id)("display",e.name)}}let g=(()=>{class SystemInputModule{language;metadata;configuration;disabled=!1;technicalNameOnly=!0;displayAsterisk=!1;_filterModules=[];set filterModules(e){this._filterModules=e,this._modules=this._modules.filter((t=>!e.some((e=>e==t.id))))}onChange;onTouched;subscription=new l.w0;_module;_modules=[];constructor(e,t,s){this.language=e,this.metadata=t,this.configuration=s,this.subscription=this.language.currentlanguage$.subscribe((e=>{this.sortModules()}))}ngOnInit(){this._modules=this.metadata.getModules().map((e=>({id:e,name:this.technicalNameOnly?e:`${this.language.getModuleName(e)} (${e})`}))),this._filterModules.length>0&&(this._modules=this._modules.filter((e=>!this._filterModules.some((t=>t==e.id))))),this.displayAsterisk&&this._modules.unshift({id:"*",name:"*"}),this.sortModules()}ngOnDestroy(){this.subscription.unsubscribe()}sortModules(){this.technicalNameOnly?this._modules.sort(((e,t)=>e.name.toLowerCase()>t.name.toLowerCase()?1:-1)):this._modules.sort(((e,t)=>this.language.getModuleName(e.id).toLowerCase()>this.language.getModuleName(t.id).toLowerCase()?1:-1))}get module(){return this._module}set module(e){this._module=e,this.onChange&&this.onChange(e?.id)}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}writeValue(e){e&&(this._module={id:e,name:this.technicalNameOnly?e:`${this.language.getModuleName(e)} (${e})`})}static ɵfac=function(e){return new(e||SystemInputModule)(i.Y36(o.d),i.Y36(a.Pu),i.Y36(d.C))};static ɵcmp=i.Xpm({type:SystemInputModule,selectors:[["system-input-module"]],inputs:{disabled:"disabled",technicalNameOnly:"technicalNameOnly",displayAsterisk:"displayAsterisk",filterModules:"filterModules"},features:[i._Bn([{provide:n.JU,useExisting:(0,i.Gpc)((()=>SystemInputModule)),multi:!0}])],decls:2,vars:3,consts:[[3,"ngModel","disabled","ngModelChange"],[3,"value","display",4,"ngFor","ngForOf"],[3,"value","display"]],template:function(e,t){1&e&&(i.TgZ(0,"system-select",0),i.NdJ("ngModelChange",(function(e){return t.module=e})),i.YNc(1,m,1,2,"system-select-option",1),i.qZA()),2&e&&(i.Q6J("ngModel",t.module)("disabled",t.disabled),i.xp6(1),i.Q6J("ngForOf",t._modules))},dependencies:[r.sg,n.JJ,n.On,c.R,u.X],encapsulation:2})}return SystemInputModule})()},34375:(e,t,s)=>{"use strict";s.d(t,{s:()=>g});var i=s(62242),n=s(95030),l=s(50727),o=s(55329),a=s(4154),d=s(26625),r=s(44755),c=s(33543),u=s(84548);function m(e,t){if(1&e&&i._UZ(0,"system-select-option",2),2&e){const e=t.$implicit;i.Q6J("value",e.id)("display",e.name)}}let g=(()=>{class SystemInputModuleField{language;metadata;configuration;module;disabled=!1;displaytechnicalname=!0;onChange;onTouched;_field;_fields=[];subscription=new l.w0;constructor(e,t,s){this.language=e,this.metadata=t,this.configuration=s}ngOnInit(){let e=this.metadata.getModuleFields(this.module);for(let t in e)this.omittedFields.some((s=>e[t].name==s))||this._fields.push({id:e[t].name,name:this.getFieldDisplay(e[t].name)});this.sortFields(),this.subscription=this.language.currentlanguage$.subscribe((e=>{this.sortFields()}))}omittedFields=[];set omittedFieldsInput(e){this.omittedFields=e,this._fields=this._fields.filter((t=>this._field?.id==t.id||!e.some((e=>e==t.id))))}getFieldDisplay(e){return this.language.getFieldDisplayName(this.module,e)+(this.displaytechnicalname?` (${e})`:"")}sortFields(){this._fields.sort(((e,t)=>this.language.getFieldDisplayName(this.module,e.name).toLowerCase()>this.language.getFieldDisplayName(this.module,t.name).toLowerCase()?1:-1))}get field(){return this._field}set field(e){this._field=e,this.onChange&&this.onChange(e?.id)}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}writeValue(e){this._field=e?{id:e,name:this.getFieldDisplay(e)}:void 0}ngOnDestroy(){this.subscription.unsubscribe()}static ɵfac=function(e){return new(e||SystemInputModuleField)(i.Y36(o.d),i.Y36(a.Pu),i.Y36(d.C))};static ɵcmp=i.Xpm({type:SystemInputModuleField,selectors:[["system-input-module-field"]],inputs:{module:"module",disabled:"disabled",displaytechnicalname:"displaytechnicalname",omittedFieldsInput:["omittedFields","omittedFieldsInput"]},features:[i._Bn([{provide:n.JU,useExisting:(0,i.Gpc)((()=>SystemInputModuleField)),multi:!0}])],decls:2,vars:3,consts:[[3,"ngModel","disabled","ngModelChange"],[3,"value","display",4,"ngFor","ngForOf"],[3,"value","display"]],template:function(e,t){1&e&&(i.TgZ(0,"system-select",0),i.NdJ("ngModelChange",(function(e){return t.field=e})),i.YNc(1,m,1,2,"system-select-option",1),i.qZA()),2&e&&(i.Q6J("ngModel",t.field)("disabled",t.disabled),i.xp6(1),i.Q6J("ngForOf",t._fields))},dependencies:[r.sg,n.JJ,n.On,c.R,u.X],encapsulation:2})}return SystemInputModuleField})()},83673:(e,t,s)=>{"use strict";s.d(t,{l:()=>c});var i=s(62242),n=s(95030),l=s(55329),o=s(4154),a=s(44755);function d(e,t){if(1&e&&(i.TgZ(0,"option",8),i._uU(1),i.qZA()),2&e){const e=t.$implicit;i.Q6J("value",e),i.xp6(1),i.Oqu(e)}}function r(e,t){if(1&e&&(i.TgZ(0,"option",8),i._uU(1),i.qZA()),2&e){const e=t.$implicit;i.Q6J("value",e.id),i.xp6(1),i.Oqu(e.name)}}let c=(()=>{class SystemInputModuleFilter{language;metadata;disabled;onChange;onTouched;modules=[];_modulefilters=[];module="";_modulefilter="";constructor(e,t){this.language=e,this.metadata=t,this._modulefilters=this.metadata.getModuleFilters();for(let e of this._modulefilters)this.modules.find((t=>t==e.module))||this.modules.push(e.module);this.modules.sort()}get modulefilter(){return this._modulefilter}set modulefilter(e){this._modulefilter=e,this.onChange(e)}get modulefilters(){return this._modulefilters.filter((e=>e.module==this.module))}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}writeValue(e){this._modulefilter=e,this._modulefilter&&(this.module=this.metadata.getModuleFilter(this._modulefilter).module)}static ɵfac=function(e){return new(e||SystemInputModuleFilter)(i.Y36(l.d),i.Y36(o.Pu))};static ɵcmp=i.Xpm({type:SystemInputModuleFilter,selectors:[["system-input-module-filter"]],inputs:{disabled:"disabled"},features:[i._Bn([{provide:n.JU,useExisting:(0,i.Gpc)((()=>SystemInputModuleFilter)),multi:!0}])],decls:12,vars:6,consts:[[1,"slds-form-element","slds-m-vertical--xxx-small"],[1,"slds-grid"],[1,"slds-form-element__control","slds-p-right--xxx-small","slds-size--1-of-3"],[1,"slds-select_container"],[1,"slds-select",3,"disabled","ngModel","ngModelChange"],["value",""],[3,"value",4,"ngFor","ngForOf"],[1,"slds-form-element__control","slds-p-left--xxx-small","slds-size--2-of-3"],[3,"value"]],template:function(e,t){1&e&&(i.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"select",4),i.NdJ("ngModelChange",(function(e){return t.module=e})),i._UZ(5,"option",5),i.YNc(6,d,2,2,"option",6),i.qZA()()(),i.TgZ(7,"div",7)(8,"div",3)(9,"select",4),i.NdJ("ngModelChange",(function(e){return t.modulefilter=e})),i._UZ(10,"option"),i.YNc(11,r,2,2,"option",6),i.qZA()()()()()),2&e&&(i.xp6(4),i.Q6J("disabled",t.disabled)("ngModel",t.module),i.xp6(2),i.Q6J("ngForOf",t.modules),i.xp6(3),i.Q6J("disabled",!t.module||t.disabled)("ngModel",t.modulefilter),i.xp6(2),i.Q6J("ngForOf",t.modulefilters))},dependencies:[a.sg,n.YN,n.Kr,n.EJ,n.JJ,n.On],encapsulation:2})}return SystemInputModuleFilter})()},61555:(e,t,s)=>{"use strict";s.d(t,{u:()=>u});var i=s(62242),n=s(95030),l=s(4154),o=s(55329),a=s(44755),d=s(69503),r=s(88658);function c(e,t){if(1&e&&(i.TgZ(0,"div",2)(1,"system-checkbox-group-checkbox",3),i._uU(2),i.qZA()()),2&e){const e=t.$implicit;i.xp6(1),i.Q6J("value",e.value),i.xp6(1),i.hij(" ",e.display,"")}}let u=(()=>{class SystemInputMultiEnum{metadata;language;module;field;sortdirection;options=[];onChange;onTouched;_value;constructor(e,t){this.metadata=e,this.language=t}get value(){return this._value}set value(e){this._value=e,this.onChange(e)}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}writeValue(e){this._value=e}ngOnInit(){this.getOptions()}getOptions(){let e=[],t=this.language.getFieldDisplayOptions(this.module,this.field);for(let s in t)s&&t[s]&&e.push({value:s,display:t[s]});if(this.options=e,this.sortdirection)switch(this.sortdirection.toLowerCase()){case"desc":this.options.sort(((e,t)=>e.display.toLowerCase()<t.display.toLowerCase()?1:-1));break;case"asc":this.options.sort(((e,t)=>e.display.toLowerCase()>t.display.toLowerCase()?1:-1))}}static ɵfac=function(e){return new(e||SystemInputMultiEnum)(i.Y36(l.Pu),i.Y36(o.d))};static ɵcmp=i.Xpm({type:SystemInputMultiEnum,selectors:[["system-input-multienum"]],inputs:{module:"module",field:"field",sortdirection:"sortdirection"},features:[i._Bn([{provide:n.JU,useExisting:(0,i.Gpc)((()=>SystemInputMultiEnum)),multi:!0}])],decls:2,vars:2,consts:[[1,"slds-grid","slds-wrap",3,"ngModel","ngModelChange"],["class","slds-large-size--1-of-3 slds-medium-size--1-of-1 slds-truncate",4,"ngFor","ngForOf"],[1,"slds-large-size--1-of-3","slds-medium-size--1-of-1","slds-truncate"],[3,"value"]],template:function(e,t){1&e&&(i.TgZ(0,"system-checkbox-group",0),i.NdJ("ngModelChange",(function(e){return t.value=e})),i.YNc(1,c,3,2,"div",1),i.qZA()),2&e&&(i.Q6J("ngModel",t.value),i.xp6(1),i.Q6J("ngForOf",t.options))},dependencies:[a.sg,n.JJ,n.On,d.L,r.m],encapsulation:2})}return SystemInputMultiEnum})()},15621:(e,t,s)=>{"use strict";s.d(t,{i:()=>h});var i=s(62242),n=s(95030),l=s(62422),o=s(44755);const a=["numberinput"];function d(e,t){}function r(e,t){if(1&e&&(i.TgZ(0,"div",3)(1,"div",4),i.YNc(2,d,0,0,"ng-template",5),i.qZA()()),2&e){i.oxw();const e=i.MAs(3);i.xp6(2),i.Q6J("ngTemplateOutlet",e)}}function c(e,t){}function u(e,t){if(1&e&&i.YNc(0,c,0,0,"ng-template",5),2&e){i.oxw();const e=i.MAs(3);i.Q6J("ngTemplateOutlet",e)}}const m=function(e){return{width:e}};function g(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"input",6,7),i.NdJ("ngModelChange",(function(t){i.CHM(e);const s=i.oxw();return i.KtG(s.textValue=t)}))("keydown",(function(t){i.CHM(e);const s=i.oxw();return i.KtG(s.checkInput(t))}))("ngModelChange",(function(t){i.CHM(e);const s=i.oxw();return i.KtG(s.fieldChanged(t))})),i.qZA()}if(2&e){const e=i.oxw();i.Q6J("ngModel",e.textValue)("disabled",e.disabled)("ngStyle",i.VKq(5,m,e.size?"auto":void 0)),i.uIk("placeholder",e.placeholder)("size",e.size)}}let h=(()=>{class SystemInputNumber{userpreferences;renderer;numberinput;max;min;set onPrecisionChange(e){this.precision=e,this.textValue="number"!=typeof this.textValue?this.getValSanitized(this.textValue):this.textValue}precision=0;onlyField=!1;placeholder;disabled=!1;size;asNumber=!1;textValue="";lastTextValue="";allowedKeys=["ArrowRight","ArrowLeft","Backspace","Delete","Tab"];decimalKeyStroke="";curposStartDecimalKeyStroke=0;latestKeyStroke="";counterAfterdecimalKeyStroke=0;constructor(e,t){this.userpreferences=e,this.renderer=t}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}writeValue(e){this.textValue="number"==typeof e||this.asNumber?this.getValAsText(e):this.getValSanitized(e),this.lastTextValue=this.textValue}onChange(e){}onTouched(){}fieldChanged(e){let t=this.numberinput.nativeElement.selectionEnd,s=this.numberinput.nativeElement.selectionStart,i=this.textValue.indexOf(this.userpreferences.toUse.dec_sep),n=(this.textValue.length,this.textValue);i<0&&this.resetDecimalCounter(),this.textValue="number"!=typeof this.textValue?this.getValSanitized(this.textValue):this.textValue,this.textValue!==this.lastTextValue&&(this.asNumber?this.onChange(this.getNumberFromText(this.textValue)):this.onChange(this.textValue),this.lastTextValue=this.textValue,this.calculateCursorPosition(t,s,i,n))}getValSanitized(e){let t=this.userpreferences.toUse,s=(void 0===this.precision?t.default_currency_significant_digits:this.precision,this.textValue.split(t.num_grp_sep).join(""));return this.isInteger()||(s=s.split(t.dec_sep).join(".")),isNaN(s=parseFloat(s))&&(s=void 0,this.resetDecimalCounter()),s=s&&s>this.max?this.max:s,s=s&&s<this.min?this.min:s,this.getValAsText(s)}getNumberFromText(e){let t=this.userpreferences.toUse,s=(void 0===this.precision?t.default_currency_significant_digits:this.precision,this.textValue.split(t.num_grp_sep).join(""));return s=s.split(t.dec_sep).join("."),s=isNaN(parseFloat(s))?void 0:parseFloat(s),s}getValAsText(e){if(void 0===e)return"";let t;return t=this.isInteger()?parseInt(e,10):parseFloat(e),isNaN(t)?"":this.userpreferences.formatMoney(t,this.precision)}checkInput(e){if(this.latestKeyStroke=e.key,!new RegExp(this.defineInputPattern(),"g").test(e.key)&&this.allowedKeys.indexOf(e.key)<0)return this.resetDecimalCounter(),e.preventDefault(),!1;if(this.moveCursorOnDecimalSeparatorRemove())return e.preventDefault(),!1;if(this.removeDecimalDigits())return e.preventDefault(),!1;if(this.decimalKeyStroke==this.userpreferences.toUse.dec_sep&&(this.counterAfterdecimalKeyStroke++,this.counterAfterdecimalKeyStroke>this.precision&&(this.counterAfterdecimalKeyStroke=1)),e.key==this.userpreferences.toUse.dec_sep&&(this.decimalKeyStroke=e.key,this.counterAfterdecimalKeyStroke=0,this.textValue.split(this.userpreferences.toUse.dec_sep).length>0)){let t=this.textValue.indexOf(this.userpreferences.toUse.dec_sep)+1;return this.setCursorPosition(t),this.resetDecimalCounter(),e.preventDefault(),!1}}calculateCursorPosition(e,t,s,i){let n=this.textValue.indexOf(this.userpreferences.toUse.dec_sep),l=!1,o=this.textValue.length-i.length,a=i.split(this.userpreferences.toUse.num_grp_sep).length-this.textValue.split(this.userpreferences.toUse.num_grp_sep).length;this.allowedKeys.indexOf(this.latestKeyStroke)<0?this.isInteger()?(e=t+o,l=!0):""==this.decimalKeyStroke&&n>0&&(e=t,s>0&&(e+=n-s),l=!0):(this.onBackspace()||this.onDelete())&&(this.resetDecimalCounter(),e=t,o<0&&(e=t-a),o>0&&a<0&&(e+=Math.abs(a)),0==t&&(e=0),l=!0),l&&this.setCursorPosition(e)}setCursorPosition(e){setTimeout((()=>{this.renderer.setProperty(this.numberinput.nativeElement,"selectionStart",e),this.renderer.setProperty(this.numberinput.nativeElement,"selectionEnd",e)}))}isInteger(){return this.precision<=0||void 0===this.precision}defineInputPattern(){let e="^[-+]?[-0-9";return e+=this.userpreferences.toUse.num_grp_sep,this.isInteger()||(e+=this.userpreferences.toUse.dec_sep),e+="]+$",e}resetDecimalCounter(){this.decimalKeyStroke="",this.counterAfterdecimalKeyStroke=0}onDelete(){return"Delete"==this.latestKeyStroke}onBackspace(){return"Backspace"==this.latestKeyStroke}moveCursorOnDecimalSeparatorRemove(){if(!this.isInteger()){this.latestKeyStroke;if(!this.onBackspace()&&!this.onDelete())return!1;let e=this.numberinput.nativeElement.selectionStart,t=this.textValue.indexOf(this.userpreferences.toUse.dec_sep),s=0;if(this.onBackspace()&&e==t+1?s=-1:this.onDelete()&&e==t&&(s=1),0!=s)return this.setCursorPosition(e+s),!0}return!1}removeDecimalDigits(){if(this.isInteger()||this.textValue.length<=0)return!1;return this.numberinput.nativeElement.selectionStart==this.textValue.length&&this.allowedKeys.indexOf(this.latestKeyStroke)<0}static ɵfac=function(e){return new(e||SystemInputNumber)(i.Y36(l.z),i.Y36(i.Qsj))};static ɵcmp=i.Xpm({type:SystemInputNumber,selectors:[["system-input-number"]],viewQuery:function(e,t){if(1&e&&i.Gf(a,5),2&e){let e;i.iGM(e=i.CRH())&&(t.numberinput=e.first)}},inputs:{max:"max",min:"min",onPrecisionChange:["precision","onPrecisionChange"],onlyField:"onlyField",placeholder:"placeholder",disabled:"disabled",size:"size",asNumber:"asNumber"},features:[i._Bn([{provide:n.JU,useExisting:(0,i.Gpc)((()=>SystemInputNumber)),multi:!0}])],decls:4,vars:2,consts:[["class","slds-form-element__control",4,"ngIf"],[4,"ngIf"],["field",""],[1,"slds-form-element__control"],[1,"slds-form-element"],[3,"ngTemplateOutlet"],["type","text",1,"slds-input","slds-text-align--right",3,"ngModel","disabled","ngStyle","ngModelChange","keydown"],["numberinput",""]],template:function(e,t){1&e&&(i.YNc(0,r,3,1,"div",0),i.YNc(1,u,1,1,null,1),i.YNc(2,g,2,7,"ng-template",null,2,i.W1O)),2&e&&(i.Q6J("ngIf",!t.onlyField),i.xp6(1),i.Q6J("ngIf",t.onlyField))},dependencies:[o.O5,o.tP,o.PC,n.Fj,n.JJ,n.On],encapsulation:2})}return SystemInputNumber})()},57919:(e,t,s)=>{"use strict";s.d(t,{Z:()=>o});var i=s(62242),n=s(95030),l=s(72656);let o=(()=>{class SystemInputPassword{onChange;onTouched;_value;_inputtype="password";disabled=!1;constructor(){}get value(){return this._value}set value(e){e!=this._value&&(this._value=e,this.onChange(e))}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}writeValue(e){this._value=e}get inputtype(){return this.disabled?"password":this._inputtype}toggleType(){this._inputtype="text"==this._inputtype?"password":"text"}get toggleicon(){return"text"==this.inputtype?"hide":"preview"}static ɵfac=function(e){return new(e||SystemInputPassword)};static ɵcmp=i.Xpm({type:SystemInputPassword,selectors:[["system-input-password"]],inputs:{disabled:"disabled"},features:[i._Bn([{provide:n.JU,useExisting:(0,i.Gpc)((()=>SystemInputPassword)),multi:!0}])],decls:4,vars:5,consts:[[1,"slds-form-element__control","slds-input-has-icon","slds-input-has-icon_right"],[1,"slds-button","slds-button_icon","slds-input__icon","slds-input__icon_right",3,"disabled","click"],[3,"icon"],["autocomplete","new-password",1,"slds-input",3,"type","disabled","ngModel","ngModelChange"]],template:function(e,t){1&e&&(i.TgZ(0,"div",0)(1,"button",1),i.NdJ("click",(function(){return t.toggleType()})),i._UZ(2,"system-button-icon",2),i.qZA(),i.TgZ(3,"input",3),i.NdJ("ngModelChange",(function(e){return t.value=e})),i.qZA()()),2&e&&(i.xp6(1),i.Q6J("disabled",t.disabled),i.xp6(1),i.Q6J("icon",t.toggleicon),i.xp6(1),i.Q6J("type",t.inputtype)("disabled",t.disabled)("ngModel",t.value))},dependencies:[n.Fj,n.JJ,n.On,l.J],encapsulation:2})}return SystemInputPassword})()},69901:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});var i=s(62242),n=s(95030),l=s(29266);const o=["*"];let a=(()=>{class SystemInputRadio{modelutilities;name;value;disabled=!1;canUnset=!1;onChange;onTouched;checked;id;constructor(e){this.modelutilities=e,this.id=this.modelutilities.generateGuid()}setChecked(e){e.target.checked&&this.onChange(this.value)}registerOnChange(e){this.onChange=t=>{e(t)}}registerOnTouched(e){this.onTouched=e}writeValue(e){void 0!==e&&(e==this.value?this.checked=!0:this.checked=!1)}clickLabel(e){if(!this.canUnset)return;let t=e.target.parentElement.parentElement.firstChild;t.checked&&(t.checked=!1,this.onChange(null),e.preventDefault())}static ɵfac=function(e){return new(e||SystemInputRadio)(i.Y36(l.A))};static ɵcmp=i.Xpm({type:SystemInputRadio,selectors:[["system-input-radio"]],inputs:{name:"name",value:"value",disabled:"disabled",canUnset:"canUnset"},features:[i._Bn([{provide:n.JU,useExisting:(0,i.Gpc)((()=>SystemInputRadio)),multi:!0}])],ngContentSelectors:o,decls:6,vars:5,consts:[[1,"slds-radio","slds-truncate","slds-is-relative"],["type","radio",3,"id","name","checked","disabled","change"],[1,"slds-radio__label",3,"click"],[1,"slds-radio_faux","slds-m-horizontal--xxx-small"],[1,"slds-form-element__label"]],template:function(e,t){1&e&&(i.F$t(),i.TgZ(0,"div",0)(1,"input",1),i.NdJ("change",(function(e){return t.setChecked(e)})),i.qZA(),i.TgZ(2,"label",2),i.NdJ("click",(function(e){return t.clickLabel(e)})),i._UZ(3,"span",3),i.TgZ(4,"span",4),i.Hsn(5),i.qZA()()()),2&e&&(i.xp6(1),i.Q6J("id",t.id)("name",t.name)("checked",t.checked)("disabled",t.disabled),i.xp6(1),i.uIk("for",t.id))},encapsulation:2})}return SystemInputRadio})()},6271:(e,t,s)=>{"use strict";s.d(t,{p:()=>u});var i=s(62242),n=s(95030),l=s(44755),o=s(83463),a=s(78859);function d(e,t){if(1&e&&i._UZ(0,"system-label",8),2&e){const e=i.oxw().$implicit;i.Q6J("label",e.label)}}function r(e,t){if(1&e&&i._UZ(0,"system-utility-icon",9),2&e){const e=i.oxw().$implicit;i.Q6J("icon",e.icon||"choice")}}function c(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"span",2)(1,"input",3),i.NdJ("ngModelChange",(function(t){i.CHM(e);const s=i.oxw();return i.KtG(s.modelValue=t)})),i.qZA(),i.TgZ(2,"label",4)(3,"span",5),i.YNc(4,d,1,1,"system-label",6),i.YNc(5,r,1,1,"ng-template",null,7,i.W1O),i.qZA()()()}if(2&e){const e=t.$implicit,s=i.MAs(6),n=i.oxw();i.xp6(1),i.Q6J("ngModel",n.modelValue)("value",e.value)("disabled",n.disabled||e.disabled)("name",n.groupName)("id",e.id),i.xp6(1),i.Q6J("for",e.id),i.xp6(2),i.Q6J("ngIf",!!e.label)("ngIfElse",s)}}let u=(()=>{class SystemInputRadioButtonGroup{cdRef;inputOptions=[];disabled=!1;groupName;onChange;onTouched;constructor(e){this.cdRef=e,this.groupName=_.uniqueId("group-name-")}_modelValue;get modelValue(){return this._modelValue}set modelValue(e){this.onChange(e),this.writeValue(e)}ngAfterViewInit(){this.cdRef.detach()}ngOnChanges(e){e.inputOptions&&this.setItemsInitialValues(),this.cdRef.detectChanges()}registerOnChange(e){this.onChange=t=>{e(t)}}registerOnTouched(e){this.onTouched=e}writeValue(e){this._modelValue=e,this.cdRef.detectChanges()}setItemsInitialValues(){this.inputOptions.forEach((e=>{e.id||(e.id=_.uniqueId("input-id-")),e.label&&!e.title&&(e.title=e.label)}))}trackByFn(e,t){return t.id}static ɵfac=function(e){return new(e||SystemInputRadioButtonGroup)(i.Y36(i.sBO))};static ɵcmp=i.Xpm({type:SystemInputRadioButtonGroup,selectors:[["system-input-radio-button-group"]],inputs:{inputOptions:"inputOptions",disabled:"disabled"},features:[i._Bn([{provide:n.JU,useExisting:(0,i.Gpc)((()=>SystemInputRadioButtonGroup)),multi:!0}]),i.TTD],decls:2,vars:2,consts:[[1,"slds-radio_button-group","slds-m-right--x-small"],["class","slds-button slds-radio_button",4,"ngFor","ngForOf","ngForTrackBy"],[1,"slds-button","slds-radio_button"],["type","radio",3,"ngModel","value","disabled","name","id","ngModelChange"],[1,"slds-radio_button__label","slds-height_full",3,"for"],[1,"slds-radio_faux","slds-align--absolute-center",2,"padding","0 .5rem","display","initial"],["class","slds-truncate",3,"label",4,"ngIf","ngIfElse"],["iconContainer",""],[1,"slds-truncate",3,"label"],["size","x-small",3,"icon"]],template:function(e,t){1&e&&(i.TgZ(0,"div",0),i.YNc(1,c,7,8,"span",1),i.qZA()),2&e&&(i.xp6(1),i.Q6J("ngForOf",t.inputOptions)("ngForTrackBy",t.trackByFn))},dependencies:[l.sg,l.O5,n.Fj,n._,n.JJ,n.On,o._,a.r],encapsulation:2,changeDetection:0})}return SystemInputRadioButtonGroup})()},4846:(e,t,s)=>{"use strict";s.d(t,{z:()=>m});var i=s(62242),n=s(95030),l=s(55329),o=s(44044),a=s(44755),d=s(72656),r=s(44561);function c(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"div",5)(1,"div",6)(2,"span",7)(3,"span",8),i._UZ(4,"system-icon",9),i.qZA(),i.TgZ(5,"span",10),i._uU(6),i.qZA(),i.TgZ(7,"button",11),i.NdJ("click",(function(){i.CHM(e);const t=i.oxw();return i.KtG(t.clearField())})),i._UZ(8,"system-button-icon",12),i.qZA()()()()}if(2&e){const e=i.oxw();i.xp6(4),i.Q6J("module",e.module),i.xp6(2),i.Oqu(e._relatedname),i.xp6(2),i.Q6J("icon","close")}}function u(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"div",13)(1,"input",14),i.NdJ("focus",(function(){i.CHM(e);const t=i.oxw();return i.KtG(t.searchWithModal())})),i.qZA(),i.TgZ(2,"button",15),i.NdJ("click",(function(){i.CHM(e);const t=i.oxw();return i.KtG(t.searchWithModal())})),i._UZ(3,"system-button-icon",12),i.qZA()()}if(2&e){const e=i.oxw();i.xp6(1),i.Q6J("placeholder",e.language.getModuleCombinedLabel("LBL_SEARCH",e.module)),i.xp6(2),i.Q6J("icon","search")}}let m=(()=>{class SystemInputRelate{language;modal;onChange;onTouched;module;moduleFilter;nameField="summary_text";_relatedid;_relatedname;constructor(e,t){this.language=e,this.modal=t}clearField(){this._relatedid=void 0,this._relatedname=void 0,this.onChange(void 0)}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}writeValue(e){if(e){let t=e.split("::");this._relatedid=t[0],this._relatedname=t[1]}this._relatedid=e}searchWithModal(){this.modal.openModal("ObjectModalModuleLookup").subscribe((e=>{e.instance.module=this.module,e.instance.modulefilter=this.moduleFilter,e.instance.multiselect=!1,e.instance.selectedItems.subscribe((e=>{e.length&&(this._relatedid=e[0].id,this._relatedname=e[0][this.nameField],this.onChange(this._relatedid+"::"+this._relatedname))}))}))}static ɵfac=function(e){return new(e||SystemInputRelate)(i.Y36(l.d),i.Y36(o.o))};static ɵcmp=i.Xpm({type:SystemInputRelate,selectors:[["system-input-relate"]],inputs:{module:"module",moduleFilter:"moduleFilter",nameField:"nameField"},features:[i._Bn([{provide:n.JU,useExisting:(0,i.Gpc)((()=>SystemInputRelate)),multi:!0}])],decls:5,vars:2,consts:[[1,"slds-combobox_container"],[1,"slds-form-element","slds-lookup"],["role","combobox",1,"slds-combobox","slds-dropdown-trigger","slds-dropdown-trigger_click"],["class","slds-form-element__control",4,"ngIf"],["class","slds-combobox__form-element slds-input-has-icon slds-input-has-icon_right",4,"ngIf"],[1,"slds-form-element__control"],[1,"slds-pill_container"],[1,"slds-pill","slds-size--1-of-1"],[1,"slds-icon_container","slds-icon-standard-account","slds-pill__icon_container"],["size","small",3,"module"],[1,"slds-pill__label"],[1,"slds-button","slds-button--icon","slds-pill__remove",3,"click"],[3,"icon"],[1,"slds-combobox__form-element","slds-input-has-icon","slds-input-has-icon_right"],["type","text","autocomplete","none","role","combobox",1,"slds-input","slds-combobox__input",3,"placeholder","focus"],[1,"slds-button","slds-button_icon","slds-input__icon","slds-input__icon_right",3,"click"]],template:function(e,t){1&e&&(i.TgZ(0,"div",0)(1,"div",1)(2,"div",2),i.YNc(3,c,9,3,"div",3),i.YNc(4,u,4,2,"div",4),i.qZA()()()),2&e&&(i.xp6(3),i.Q6J("ngIf",t._relatedid),i.xp6(1),i.Q6J("ngIf",!t._relatedid))},dependencies:[a.O5,d.J,r.f],encapsulation:2})}return SystemInputRelate})()},79641:(e,t,s)=>{"use strict";s.d(t,{g:()=>v});var i=s(62242),n=s(95030),l=s(54968),o=s(95698),a=s(22487),d=s(26625),r=s(15982),c=s(83398),u=s(44755),m=s(72656),g=s(83463),h=s(78859);function p(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"button",10),i.NdJ("click",(function(){i.CHM(e);const t=i.oxw(),s=i.MAs(8);return i.KtG(t.toggleShowError(s))})),i._UZ(1,"system-button-icon",11),i.qZA()}}function f(e,t){if(1&e&&(i.TgZ(0,"div"),i._UZ(1,"system-label",14),i.qZA()),2&e){const e=t.$implicit;i.xp6(1),i.Q6J("label",e.label)("nestedValues",e.nestedValues)}}function b(e,t){if(1&e&&(i.TgZ(0,"div",12),i.YNc(1,f,2,2,"div",13),i.qZA()),2&e){const e=i.oxw();i.xp6(1),i.Q6J("ngForOf",e.searchTermErrors)}}const _=function(e){return{"slds-has-error":e}};let v=(()=>{class SystemInputSearchTerm{fts;configuration;searchTimeoutId;searchTermErrors;showError=!1;placeholder="LBL_SEARCH";timeoutSeconds=1e3;onSearchTermClear=new i.vpe;onFocusChange=new i.vpe;onEnterPress=new i.vpe;onChange;onTouched;constructor(e,t){this.fts=e,this.configuration=t}_searchTerm;get searchTerm(){return this._searchTerm}set searchTerm(e){this._searchTerm=e,window.clearTimeout(this.searchTimeoutId);const t=e?this.fts.checkForSearchTermErrors(e):void 0;t?this.searchTermErrors=t:(this.searchTermErrors=void 0,this.showError=!1,this.searchTimeoutId=window.setTimeout((()=>this.onChange(e)),this.timeoutSeconds))}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}writeValue(e){this._searchTerm=e}clearSearchTerm(){this.searchTimeoutId&&window.clearTimeout(this.searchTimeoutId),this._searchTerm="",this.onSearchTermClear.emit()}toggleShowError(e){this.showError=!this.showError,this.showError&&this.handleDocumentClick(e)}handleDocumentClick(e){(0,l.R)(window,"mousedown").pipe((0,o.q)(1)).subscribe((t=>{e.contains(t.target)?this.handleDocumentClick(e):this.showError=!1}))}static ɵfac=function(e){return new(e||SystemInputSearchTerm)(i.Y36(a.Q),i.Y36(d.C))};static ɵcmp=i.Xpm({type:SystemInputSearchTerm,selectors:[["system-input-search-term"]],inputs:{placeholder:"placeholder",timeoutSeconds:"timeoutSeconds"},outputs:{onSearchTermClear:"onSearchTermClear",onFocusChange:"onFocusChange",onEnterPress:"onEnterPress"},features:[i._Bn([{provide:n.JU,useExisting:(0,i.Gpc)((()=>SystemInputSearchTerm)),multi:!0}])],decls:10,vars:10,consts:[[1,"slds-form-element","slds-size--1-of-1",3,"ngClass"],[1,"slds-form-element__control","slds-input-has-icon","slds-input-has-icon--left-right","slds-size--1-of-1"],["icon","search","size","x-small","addclasses","slds-icon slds-input__icon slds-input__icon_left"],["system-autofocus","","type","search",1,"slds-input","slds-lookup__search-input",3,"ngModel","system-placeholder","ngModelChange","keyup.enter","focus","blur"],["class","slds-button slds-button_icon slds-input__icon slds-input__icon_right","style","right: 36px",3,"click",4,"ngIf"],[1,"slds-button","slds-button_icon","slds-input__icon","slds-input__icon_right",3,"disabled","click"],["icon","clear"],["role","tooltip",1,"slds-popover","slds-popover_tooltip","slds-nubbin--top-right","slds-rise-from-ground","slds-is-absolute",2,"top","36px","right","20px","width","320px","height","auto"],["errorContainer",""],["class","slds-popover__body slds-scrollable_y",4,"ngIf"],[1,"slds-button","slds-button_icon","slds-input__icon","slds-input__icon_right",2,"right","36px",3,"click"],["icon","warning"],[1,"slds-popover__body","slds-scrollable_y"],[4,"ngFor","ngForOf"],[3,"label","nestedValues"]],template:function(e,t){1&e&&(i.TgZ(0,"div",0)(1,"div",1),i._UZ(2,"system-utility-icon",2),i.TgZ(3,"input",3),i.NdJ("ngModelChange",(function(e){return t.searchTerm=e}))("keyup.enter",(function(){return t.onEnterPress.emit()}))("focus",(function(){return t.onFocusChange.emit(!0)}))("blur",(function(){return t.onFocusChange.emit(!1)})),i.qZA(),i.YNc(4,p,2,0,"button",4),i.TgZ(5,"button",5),i.NdJ("click",(function(){return t.clearSearchTerm()})),i._UZ(6,"system-button-icon",6),i.qZA(),i.TgZ(7,"div",7,8),i.YNc(9,b,2,1,"div",9),i.qZA()()()),2&e&&(i.Q6J("ngClass",i.VKq(8,_,t.searchTermErrors)),i.xp6(3),i.Q6J("ngModel",t.searchTerm)("system-placeholder",t.placeholder),i.xp6(1),i.Q6J("ngIf",t.searchTermErrors),i.xp6(1),i.Q6J("disabled",!t.searchTerm),i.xp6(2),i.ekj("slds-hide",!t.showError),i.xp6(2),i.Q6J("ngIf",t.searchTermErrors))},dependencies:[r.m,c.A,u.mk,u.sg,u.O5,n.Fj,n.JJ,n.On,m.J,g._,h.r],encapsulation:2})}return SystemInputSearchTerm})()},13144:(e,t,s)=>{"use strict";s.d(t,{H:()=>g});var i=s(62242),n=s(95030),l=s(4154),o=s(55329),a=s(26625),d=s(44755),r=s(83463);function c(e,t){if(1&e&&(i.TgZ(0,"option",8),i._UZ(1,"system-label",9),i.qZA()),2&e){const e=t.$implicit;i.Q6J("value",e.sc),i.xp6(1),i.Q6J("label",e.label)}}function u(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"div",3)(1,"select",4,5),i.NdJ("ngModelChange",(function(t){i.CHM(e);const s=i.oxw();return i.KtG(s.value=t)})),i._UZ(3,"option",6),i.YNc(4,c,2,2,"option",7),i.qZA()()}if(2&e){const e=i.oxw();i.xp6(1),i.Q6J("disabled",0==e.states.length||e.disabled)("ngModel",e.value),i.xp6(3),i.Q6J("ngForOf",e.states)}}function m(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"div",10)(1,"input",11),i.NdJ("ngModelChange",(function(t){i.CHM(e);const s=i.oxw();return i.KtG(s.value=t)})),i.qZA()()}if(2&e){const e=i.oxw();i.xp6(1),i.Q6J("ngModel",e.value)("disabled",e.disabled)}}let g=(()=>{class SystemInputState{metadata;language;configuration;country;disabled=!1;states=[];onChange;onTouched;_value;strict=!1;constructor(e,t,s){this.metadata=e,this.language=t,this.configuration=s,"strict"==this.configuration.data.backendextensions.spiceui.config.format&&(this.strict=!0)}get value(){return this._value}set value(e){e!=this._value&&(this._value=e,this.onChange(e))}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}writeValue(e){this._value=e}ngOnChanges(){this.strict&&this.getStates()}getStates(){if(this.states=[],this.country){let e=this.configuration.getData("countries");e.states&&(this.states=e.states.filter((e=>e.cc==this.country)),this.states.sort(((e,t)=>this.language.getLabel(e.label).localeCompare(this.language.getLabel(t.label)))))}}static ɵfac=function(e){return new(e||SystemInputState)(i.Y36(l.Pu),i.Y36(o.d),i.Y36(a.C))};static ɵcmp=i.Xpm({type:SystemInputState,selectors:[["system-input-state"]],inputs:{country:"country",disabled:"disabled"},features:[i._Bn([{provide:n.JU,useExisting:(0,i.Gpc)((()=>SystemInputState)),multi:!0}]),i.TTD],decls:4,vars:2,consts:[[1,"slds-form-element"],["class","slds-select_container",4,"ngIf","ngIfElse"],["countryinput",""],[1,"slds-select_container"],[1,"slds-select",3,"disabled","ngModel","ngModelChange"],["focus",""],["value",""],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[3,"label"],[1,"slds-form-element__control"],["type","text",1,"slds-input",3,"ngModel","disabled","ngModelChange"]],template:function(e,t){if(1&e&&(i.TgZ(0,"div",0),i.YNc(1,u,5,3,"div",1),i.YNc(2,m,2,2,"ng-template",null,2,i.W1O),i.qZA()),2&e){const e=i.MAs(3);i.xp6(1),i.Q6J("ngIf",t.strict)("ngIfElse",e)}},dependencies:[d.sg,d.O5,n.YN,n.Kr,n.Fj,n.EJ,n.JJ,n.On,r._],encapsulation:2})}return SystemInputState})()},61078:(e,t,s)=>{"use strict";s.d(t,{C:()=>u});var i=s(62242),n=s(62422),l=s(14505),o=s(55329),a=s(44755),d=s(95030);function r(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"li",7),i.NdJ("click",(function(){const t=i.CHM(e).$implicit,s=i.oxw();return i.KtG(s.addTag(t))})),i.TgZ(1,"div",8),i._uU(2),i.qZA()()}if(2&e){const e=t.$implicit;i.xp6(2),i.hij(" ",e," ")}}const c=function(e){return{"slds-is-open":e}};let u=(()=>{class SystemInputTags{elementref;renderer;userpreferences;backend;language;tagemitter=new i.vpe;querystring="";querytimeout=void 0;matchedtags=[];matchedtagindex;constructor(e,t,s,i,n){this.elementref=e,this.renderer=t,this.userpreferences=s,this.backend=i,this.language=n}get isOpen(){return this.matchedtags.length>0}search(e){switch(e.key){case"ArrowDown":case"ArrowUp":break;case",":case";":case"Enter":this.addTag(this.querystring.replace(/^[\s]+|[\s\W]+$/gm,""));break;default:this.querytimeout&&window.clearTimeout(this.querytimeout),this.querytimeout=window.setTimeout((()=>this.doSearch()),500)}}doSearch(){this.backend.postRequest("common/spicetags",{},{search:this.querystring.trim()}).subscribe((e=>{this.matchedtags=e,this.matchedtags.sort(((e,t)=>e.toLowerCase()>t.toLowerCase()?1:-1))}))}addTag(e){this.querytimeout&&window.clearTimeout(this.querytimeout),this.matchedtags=[],this.tagemitter.emit(e),this.querystring=""}static ɵfac=function(e){return new(e||SystemInputTags)(i.Y36(i.SBq),i.Y36(i.Qsj),i.Y36(n.z),i.Y36(l.y),i.Y36(o.d))};static ɵcmp=i.Xpm({type:SystemInputTags,selectors:[["system-input-tags"]],outputs:{tagemitter:"tagemitter"},decls:7,vars:6,consts:[[1,"slds-combobox_container"],["role","combobox",1,"slds-combobox","slds-dropdown-trigger","slds-dropdown-trigger_click",3,"ngClass"],["role","none",1,"slds-combobox__form-element"],["type","search",1,"slds-input","slds-combobox__input",3,"placeholder","ngModel","ngModelChange","keyup"],["role","listbox",1,"slds-dropdown","slds-dropdown_fluid"],["role","presentation",1,"slds-listbox","slds-listbox_vertical"],["role","presentation","class","slds-listbox__item",3,"click",4,"ngFor","ngForOf"],["role","presentation",1,"slds-listbox__item",3,"click"],["role","option",1,"slds-media","slds-listbox__option","slds-listbox__option_plain"]],template:function(e,t){1&e&&(i.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"input",3),i.NdJ("ngModelChange",(function(e){return t.querystring=e}))("keyup",(function(e){return t.search(e)})),i.qZA()(),i.TgZ(4,"div",4)(5,"ul",5),i.YNc(6,r,3,1,"li",6),i.qZA()()()()),2&e&&(i.xp6(1),i.Q6J("ngClass",i.VKq(4,c,t.isOpen)),i.xp6(2),i.Q6J("placeholder",t.language.getLabel("LBL_SEARCH_TAG"))("ngModel",t.querystring),i.xp6(3),i.Q6J("ngForOf",t.matchedtags))},dependencies:[a.mk,a.sg,d.Fj,d.JJ,d.On],encapsulation:2})}return SystemInputTags})()},3772:(e,t,s)=>{"use strict";s.d(t,{Z:()=>m});var i=s(62242),n=s(95030),l=s(29266),o=s(98280),a=s(83398),d=s(44755),r=s(72656);function c(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"button",4),i.NdJ("click",(function(){i.CHM(e);const t=i.oxw();return i.KtG(t.value="")})),i._UZ(1,"system-button-icon",5),i.qZA()}}const u=function(e,t){return{"slds-input-has-icon":e,"slds-input-has-icon_right":t}};let m=(()=>{class SystemInputText{modelutilities;elementRef;onChange;onTouched;_value;disabled=!1;placeholder;maxlength;autocomplete;showClear=!1;set _trimInput(e){this.trimInput=!!e&&"blur"}trimInput=!1;id;autocompletebreaker="";constructor(e,t){this.modelutilities=e,this.elementRef=t}get value(){return this._value}set value(e){e!=this._value&&(this._value=e,this.onChange(e))}ngOnInit(){this.autocomplete&&(this.autocompletebreaker="off"==this.autocomplete?this.modelutilities.generateGuid():this.autocomplete)}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}writeValue(e){this._value=e}emitBlur(){this.elementRef.nativeElement.dispatchEvent(new Event("blur",{bubbles:!0}))}showClearButton(){return!this.disabled&&this.showClear&&this.value}static ɵfac=function(e){return new(e||SystemInputText)(i.Y36(l.A),i.Y36(i.SBq))};static ɵcmp=i.Xpm({type:SystemInputText,selectors:[["system-input-text"]],inputs:{disabled:"disabled",placeholder:"placeholder",maxlength:"maxlength",autocomplete:"autocomplete",showClear:"showClear",_trimInput:["trim","_trimInput"],id:"id"},features:[i._Bn([{provide:n.JU,useExisting:(0,i.Gpc)((()=>SystemInputText)),multi:!0}])],decls:4,vars:12,consts:[[1,"slds-form-element"],[1,"slds-form-element__control",3,"ngClass"],["type","text",1,"slds-input",3,"system-trim-input","autocomplete","maxlength","system-placeholder","disabled","ngModel","id","ngModelChange","blur"],["class","slds-button slds-button_icon slds-input__icon slds-input__icon_right",3,"click",4,"ngIf"],[1,"slds-button","slds-button_icon","slds-input__icon","slds-input__icon_right",3,"click"],["icon","clear"]],template:function(e,t){1&e&&(i.TgZ(0,"div",0)(1,"div",1)(2,"input",2),i.NdJ("ngModelChange",(function(e){return t.value=e}))("blur",(function(){return t.emitBlur()})),i.qZA(),i.YNc(3,c,2,0,"button",3),i.qZA()()),2&e&&(i.xp6(1),i.Q6J("ngClass",i.WLB(9,u,t.showClearButton(),t.showClearButton())),i.xp6(1),i.Q6J("system-trim-input",t.trimInput)("autocomplete",t.autocompletebreaker)("maxlength",t.maxlength)("system-placeholder",t.placeholder)("disabled",t.disabled)("ngModel",t.value)("id",t.id),i.xp6(1),i.Q6J("ngIf",t.showClearButton()))},dependencies:[o.t,a.A,d.mk,d.O5,n.Fj,n.JJ,n.nD,n.On,r.J],encapsulation:2})}return SystemInputText})()},72006:(e,t,s)=>{"use strict";s.d(t,{H:()=>_});var i=s(62242),n=s(95030),l=s(62422),o=s(55329),a=s(44755),d=s(72656),r=s(44561),c=s(83463);function u(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"button",8),i.NdJ("click",(function(){i.CHM(e);const t=i.oxw();return i.KtG(t.clear())})),i._UZ(1,"system-button-icon",14),i.qZA()}}const m=function(e){return{"slds-is-selected":e}};function g(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"li",15),i.NdJ("click",(function(){const t=i.CHM(e).$implicit,s=i.oxw();return i.KtG(s.display=t.display)})),i.TgZ(1,"div",16)(2,"span",17),i._UZ(3,"system-icon",18),i.qZA(),i.TgZ(4,"span",19)(5,"span",20),i._uU(6),i.qZA()()()()}if(2&e){const e=t.$implicit,s=i.oxw();i.xp6(1),i.Q6J("ngClass",i.VKq(3,m,e.offset==s._time.offset)),i.xp6(4),i.Q6J("title",e.display),i.xp6(1),i.Oqu(e.display)}}function h(e,t){1&e&&(i.TgZ(0,"div",21),i._UZ(1,"system-label",22),i.qZA())}const p=function(e){return{"slds-has-error":e}},f=function(e){return{"slds-is-open":e}},b=function(){return{updateOn:"blur"}};let _=(()=>{class SystemInputTime{elementref;renderer;userpreferences;language;onChange;onTouched;_time={display:"",moment:null,offset:0,valid:!0};dropdownValues=[];valid=new i.vpe;isOpen=!1;minutes_interval=30;hideErrorMessage=!1;set hideError(e){this.hideErrorMessage=!1!==e}constructor(e,t,s,i){this.elementref=e,this.renderer=t,this.userpreferences=s,this.language=i,this.dropdownValues=this.getDropdownValues()}ngOnDestroy(){}get isValid(){return this._time.valid}getDropdownValues(){let e=0,t=[];for(;e<=1440;){let s=(new moment).hour(0).minute(0).second(0);s.add(e,"minutes"),t.push({offset:e,display:s.format(this.userpreferences.getTimeFormat()),current:!1}),e+=this.minutes_interval}return t}getDropDownValueByOffset(e){return this.dropdownValues.find((t=>t.offset==e))}getNextDropDownValue(){return this.getDropDownValueByOffset(this._time.offset+this.minutes_interval)}setDisplayToNextDropDownValue(){this.display=this.getNextDropDownValue().display}setDisplayToPreviousDropDownValue(){this.display=this.getDropDownValueByOffset(this._time.offset-this.minutes_interval).display}get display(){return this._time.display}set display(e){if(e){let t=moment(e,this.userpreferences.getTimeFormat(),!0);if(t.isValid())this._time.moment||(this._time.moment=new moment),this._time.moment.set("hour",t.hour()),this._time.moment.set("minute",t.minute()),this._time.valid=!0,this._time.offset=this.calculateOffset(this._time.moment),this._time.display=e,this.closeDropDown(),this.onChange(this._time.moment);else{if("string"==typeof e&&e.length<=2&&e.length>0)return e=parseInt(e,10)<10?`0${e}:00`:`${e}:00`,void(this.display=e);this._time.valid=!1}}else this.clear();this.valid.emit(this._time.valid)}get canclear(){return!!this._time.display}clear(e=!0){this._time.moment||(this._time.moment=new moment),this._time.moment=null,this._time.display="",this._time.valid=!0,"function"==typeof this.onChange&&e&&this.onChange(this._time.moment)}toggleDropDown(){this.isOpen=!this.isOpen,this.isOpen}closeDropDown(){this.isOpen=!1}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}writeValue(e){e&&e.isValid&&e.isValid()?(this._time.moment=new moment(e),this._time.offset=this.calculateOffset(this._time.moment),this._time.display=this._time.moment.format(this.userpreferences.getTimeFormat())):this.clear(!1)}selectValue(e){this._time.moment||(this._time.moment=new moment),this._time.moment.hour(0).minute(0).second(0),this._time.moment.add(e,"minutes"),this._time.offset=e,this._time.display=this._time.moment.format(this.userpreferences.getTimeFormat()),"function"==typeof this.onChange&&this.onChange(this._time.moment),this.closeDropDown()}calculateOffset(e){let t=60*e.hour()+e.minute();return Math.floor(t/this.minutes_interval)*this.minutes_interval}static ɵfac=function(e){return new(e||SystemInputTime)(i.Y36(i.SBq),i.Y36(i.Qsj),i.Y36(l.z),i.Y36(o.d))};static ɵcmp=i.Xpm({type:SystemInputTime,selectors:[["system-input-time"]],inputs:{hideError:["system-input-time-hide-error","hideError"]},outputs:{valid:"valid"},features:[i._Bn([{provide:n.JU,useExisting:(0,i.Gpc)((()=>SystemInputTime)),multi:!0}])],decls:14,vars:12,consts:[[1,"slds-form-element",3,"ngClass"],[1,"slds-form-element__control"],[1,"slds-combobox_container"],["role","combobox",1,"slds-combobox","slds-dropdown-trigger","slds-dropdown-trigger_click","slds-combobox-picklist","slds-timepicker",3,"ngClass"],["role","none",1,"slds-combobox__form-element","slds-input-has-icon","slds-input-has-icon_right"],["aria-controls","listbox-unique-id","autocomplete","off","role","textbox","type","text",1,"slds-input","slds-combobox__input",3,"ngModelOptions","ngModel","ngModelChange","keyup.arrowup","keyup.arrowdown"],[1,"slds-input__icon-group","slds-input__icon-group_right","slds-height_full","slds-grid",2,"top","0","margin","0","height","100%"],["class","slds-input__icon slds-input__icon_right slds-button slds-button_icon","style","position: relative;",3,"click",4,"ngIf"],[1,"slds-input__icon","slds-input__icon_right","slds-button","slds-button_icon",2,"position","relative",3,"click"],["icon","clock"],["role","listbox",3,"mouseleave"],["role","presentation",1,"slds-listbox","slds-listbox_vertical","slds-dropdown","slds-dropdown--fluid","slds-dropdown--length-7"],["role","presentation","class","slds-listbox__item",3,"click",4,"ngFor","ngForOf"],["class","slds-form-element__help",4,"ngIf"],["icon","clear"],["role","presentation",1,"slds-listbox__item",3,"click"],["role","option",1,"slds-media","slds-listbox__option","slds-listbox__option_plain","slds-media_small","slds-media_center",3,"ngClass"],[1,"slds-media__figure"],["addclasses","slds-icon slds-listbox__icon-selected","icon","check","sprite","utility","size","x-small"],[1,"slds-media__body"],[1,"slds-truncate",3,"title"],[1,"slds-form-element__help"],["label","LBL_INPUT_INVALID"]],template:function(e,t){1&e&&(i.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"input",5),i.NdJ("ngModelChange",(function(e){return t.display=e}))("keyup.arrowup",(function(){return t.setDisplayToNextDropDownValue()}))("keyup.arrowdown",(function(){return t.setDisplayToPreviousDropDownValue()})),i.qZA(),i.TgZ(6,"div",6),i.YNc(7,u,2,0,"button",7),i.TgZ(8,"button",8),i.NdJ("click",(function(){return t.toggleDropDown()})),i._UZ(9,"system-button-icon",9),i.qZA()()(),i.TgZ(10,"div",10),i.NdJ("mouseleave",(function(){return t.closeDropDown()})),i.TgZ(11,"ul",11),i.YNc(12,g,7,5,"li",12),i.qZA()()()()(),i.YNc(13,h,2,0,"div",13),i.qZA()),2&e&&(i.Q6J("ngClass",i.VKq(7,p,!t.isValid)),i.xp6(3),i.Q6J("ngClass",i.VKq(9,f,t.isOpen)),i.xp6(2),i.Q6J("ngModelOptions",i.DdM(11,b))("ngModel",t.display),i.xp6(2),i.Q6J("ngIf",t.canclear),i.xp6(5),i.Q6J("ngForOf",t.dropdownValues),i.xp6(1),i.Q6J("ngIf",!t.isValid&&!t.hideErrorMessage))},dependencies:[a.mk,a.sg,a.O5,n.Fj,n.JJ,n.On,d.J,r.f,c._],encapsulation:2})}return SystemInputTime})()},46449:(e,t,s)=>{"use strict";s.d(t,{R:()=>d});var i=s(62242),n=s(95030),l=s(44755);function o(e,t){1&e&&i._UZ(0,"option",5),2&e&&i.Q6J("value",null)}function a(e,t){if(1&e&&(i.TgZ(0,"option",5),i._uU(1),i.qZA()),2&e){const e=t.$implicit,s=t.index,n=i.oxw();i.Q6J("value",e),i.xp6(1),i.AsE("",e," (GMT",n.offsetTimezones[s],")")}}let d=(()=>{class SystemInputTimezone{disabled=!1;id="";propagateChange=e=>{};propagateTouch=e=>{};_timezone;timezones=[];offsetTimezones=[];denyEmpty=!1;constructor(){this.timezones=moment.tz.names(),this.timezones=this.timezones.filter((e=>e.match(/^((Africa|America|Antarctica|Arctic|Asia|Atlantic|Australia|Europe|Pacific)\/.+|UTC)$/))),this.timezones.forEach((e=>this.offsetTimezones.push(moment.tz(e).format("Z"))))}get timezone(){return this._timezone}set timezone(e){this._timezone=e,this.propagateChange(e)}registerOnChange(e){this.propagateChange=e}registerOnTouched(e){this.propagateTouch=e}writeValue(e){this._timezone=e}static ɵfac=function(e){return new(e||SystemInputTimezone)};static ɵcmp=i.Xpm({type:SystemInputTimezone,selectors:[["system-input-timezone"]],inputs:{disabled:"disabled",id:"id",denyEmpty:"denyEmpty"},features:[i._Bn([{provide:n.JU,useExisting:(0,i.Gpc)((()=>SystemInputTimezone)),multi:!0}])],decls:5,vars:5,consts:[[1,"slds-form-element__control"],[1,"slds-select_container"],[1,"slds-select",3,"disabled","ngModel","id","ngModelChange"],[3,"value",4,"ngIf"],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(e,t){1&e&&(i.TgZ(0,"div",0)(1,"div",1)(2,"select",2),i.NdJ("ngModelChange",(function(e){return t.timezone=e})),i.YNc(3,o,1,1,"option",3),i.YNc(4,a,2,3,"option",4),i.qZA()()()),2&e&&(i.xp6(2),i.s9C("id",t.id),i.Q6J("disabled",t.disabled)("ngModel",t.timezone),i.xp6(1),i.Q6J("ngIf",!t.denyEmpty),i.xp6(1),i.Q6J("ngForOf",t.timezones))},dependencies:[l.sg,l.O5,n.YN,n.Kr,n.EJ,n.JJ,n.On],encapsulation:2})}return SystemInputTimezone})()},83463:(e,t,s)=>{"use strict";s.d(t,{_:()=>f});var i=s(50727),n=s(62242),l=s(55329),o=s(44044),a=s(83917),d=s(66550),r=s(44755);function c(e,t){if(1&e&&n._UZ(0,"span",4),2&e){const e=n.oxw(2);n.Q6J("innerHTML",e.sanitizer.bypassSecurityTrustHtml(e.getLabel()),n.oJD)}}function u(e,t){if(1&e&&n._uU(0),2&e){const e=n.oxw(2);n.Oqu(e.getLabel())}}function m(e,t){if(1&e&&(n.ynx(0),n.YNc(1,c,1,1,"span",2),n.YNc(2,u,1,1,"ng-template",null,3,n.W1O),n.BQk()),2&e){const e=n.MAs(3),t=n.oxw();n.xp6(1),n.Q6J("ngIf","long"===t.length)("ngIfElse",e)}}function g(e,t){if(1&e&&n._UZ(0,"span",4),2&e){const e=n.oxw(2);n.Q6J("innerHTML",e.sanitizer.bypassSecurityTrustHtml(e.getLabel()),n.oJD)}}function h(e,t){if(1&e&&n._uU(0),2&e){const e=n.oxw(2);n.Oqu(e.getLabel())}}function p(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"span",5),n.NdJ("dblclick",(function(t){n.CHM(e);const s=n.oxw();return n.KtG(s.onDblClick(t))}))("contextmenu",(function(t){n.CHM(e);const s=n.oxw();return n.KtG(s.onRightClick(t))})),n.YNc(1,g,1,1,"span",2),n.YNc(2,h,1,1,"ng-template",null,6,n.W1O),n.qZA()}if(2&e){const e=n.MAs(3),t=n.oxw();n.xp6(1),n.Q6J("ngIf","long"===t.length)("ngIfElse",e)}}let f=(()=>{class SystemLabel{language;modal;footer;renderer;cdRef;sanitizer;label;length="default";nestedValues;subsciptions=new i.w0;constructor(e,t,s,i,n,l){this.language=e,this.modal=t,this.footer=s,this.renderer=i,this.cdRef=n,this.sanitizer=l,this.subsciptions.add(this.language.currentlanguage$.subscribe((()=>this.detectChanges())))}ngAfterViewInit(){this.cdRef.detach()}ngOnDestroy(){this.cdRef.reattach(),this.subsciptions.unsubscribe()}ngOnChanges(e){this.detectChanges()}openModal(){this.modal.openModal("SystemLabelEditorModal",!0).subscribe((e=>{e.instance.labelData={name:this.label,global_translations:[],custom_translations:[]}}))}detectChanges(){this.cdRef.detectChanges()}onDblClick(e){this.openModal(),e.preventDefault()}onRightClick(e){e.preventDefault();const t=this.createDropdown(e);this.renderer.appendChild(this.footer.footercontainer.element.nativeElement,t);const s=this.renderer.listen("document","click",(e=>{this.closeDropdown(e,t),s()}))}closeDropdown(e,t){this.footer.footercontainer.element.nativeElement.contains(t)&&this.renderer.removeChild(this.footer.footercontainer.element.nativeElement,t)}createDropdown(e){const t=this.renderer.createElement("div"),s=(e,t)=>t.forEach((t=>this.renderer.addClass(e,t)));this.renderer.setStyle(t,"top",e.pageY+"px"),this.renderer.setStyle(t,"left",e.pageX+"px"),s(t,["slds-dropdown--inverse","slds-dropdown","slds-theme--inverse"]);const i=this.renderer.createElement("ul");this.renderer.addClass(i,"slds-dropdown__list");const n=this.renderer.createElement("li");return s(n,["slds-slds-dropdown__item","slds-p-around--xx-small"]),this.renderer.setProperty(n,"onclick",(()=>this.openModal())),this.renderer.setProperty(n,"innerHTML",`<a>${this.language.getLabel("LBL_EDIT_LABEL")}</a>`),this.renderer.appendChild(i,n),this.renderer.appendChild(t,i),t}getLabel(){return this.nestedValues?this.language.getLabelFormatted(this.label,this.nestedValues,this.length):this.language.getLabel(this.label,void 0,this.length)}static ɵfac=function(e){return new(e||SystemLabel)(n.Y36(l.d),n.Y36(o.o),n.Y36(a.M),n.Y36(n.Qsj),n.Y36(n.sBO),n.Y36(d.H7))};static ɵcmp=n.Xpm({type:SystemLabel,selectors:[["system-label"]],inputs:{label:"label",length:"length",nestedValues:"nestedValues"},features:[n.TTD],decls:3,vars:2,consts:[[4,"ngIf","ngIfElse"],["labelListenerContainer",""],[3,"innerHTML",4,"ngIf","ngIfElse"],["notLong",""],[3,"innerHTML"],[3,"dblclick","contextmenu"],["notLong2",""]],template:function(e,t){if(1&e&&(n.YNc(0,m,4,2,"ng-container",0),n.YNc(1,p,4,2,"ng-template",null,1,n.W1O)),2&e){const e=n.MAs(2);n.Q6J("ngIf",!t.language.inlineEditEnabled)("ngIfElse",e)}},dependencies:[r.O5],encapsulation:2,changeDetection:0})}return SystemLabel})()},7674:(e,t,s)=>{"use strict";s.d(t,{h:()=>m});var i=s(50727),n=s(62242),l=s(55329),o=s(44044),a=s(4154),d=s(83917),r=s(44755);function c(e,t){if(1&e&&(n.ynx(0),n._uU(1),n.BQk()),2&e){const e=n.oxw();n.xp6(1),n.Oqu(e.language.getFieldDisplayName(e.module,e.field,e.fieldconfig,e.length))}}function u(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"span",2),n.NdJ("dblclick",(function(t){n.CHM(e);const s=n.oxw();return n.KtG(s.onDblClick(t))}))("contextmenu",(function(t){n.CHM(e);const s=n.oxw();return n.KtG(s.onRightClick(t))})),n._uU(1),n.qZA()}if(2&e){const e=n.oxw();n.xp6(1),n.hij(" ",e.language.getFieldDisplayName(e.module,e.field,e.fieldconfig,e.length)," ")}}let m=(()=>{class SystemLabelFieldname{language;modal;metadata;renderer;footer;cdRef;module;field;fieldconfig={};length="default";subsciptions=new i.w0;constructor(e,t,s,i,n,l){this.language=e,this.modal=t,this.metadata=s,this.renderer=i,this.footer=n,this.cdRef=l,this.subsciptions.add(this.language.currentlanguage$.subscribe((()=>this.detectChanges())))}ngAfterViewInit(){this.cdRef.detach()}ngOnDestroy(){this.subsciptions.unsubscribe()}ngOnChanges(e){this.detectChanges()}openModal(){this.modal.openModal("SystemLabelEditorModal",!0).subscribe((e=>{const t=this.fieldconfig.label||this.metadata.getFieldlabel(this.module,this.field);e.instance.labelData={name:t,global_translations:[],custom_translations:[]}}))}onDblClick(e){this.openModal(),e.preventDefault()}detectChanges(){this.cdRef.detectChanges()}onRightClick(e){const t=this.createDropdown(e);this.renderer.appendChild(this.footer.footercontainer.element.nativeElement,t);const s=this.renderer.listen("document","click",(e=>{this.closeDropdown(e,t),s()}));e.preventDefault()}closeDropdown(e,t){this.footer.footercontainer.element.nativeElement.contains(t)&&this.renderer.removeChild(this.footer.footercontainer.element.nativeElement,t)}createDropdown(e){const t=this.renderer.createElement("div"),s=(e,t)=>t.forEach((t=>this.renderer.addClass(e,t)));this.renderer.setStyle(t,"top",e.pageY+"px"),this.renderer.setStyle(t,"left",e.pageX+"px"),s(t,["slds-dropdown--inverse","slds-dropdown","slds-theme--inverse"]);const i=this.renderer.createElement("ul");this.renderer.addClass(i,"slds-dropdown__list");const n=this.renderer.createElement("li");return s(n,["slds-slds-dropdown__item","slds-p-around--xx-small"]),this.renderer.setProperty(n,"onclick",(()=>this.openModal())),this.renderer.setProperty(n,"innerHTML",`<a>${this.language.getLabel("LBL_EDIT_LABEL")}</a>`),this.renderer.appendChild(i,n),this.renderer.appendChild(t,i),t}static ɵfac=function(e){return new(e||SystemLabelFieldname)(n.Y36(l.d),n.Y36(o.o),n.Y36(a.Pu),n.Y36(n.Qsj),n.Y36(d.M),n.Y36(n.sBO))};static ɵcmp=n.Xpm({type:SystemLabelFieldname,selectors:[["system-label-fieldname"]],inputs:{module:"module",field:"field",fieldconfig:"fieldconfig",length:"length"},features:[n.TTD],decls:3,vars:2,consts:[[4,"ngIf","ngIfElse"],["labelListenerContainer",""],[3,"dblclick","contextmenu"]],template:function(e,t){if(1&e&&(n.YNc(0,c,2,1,"ng-container",0),n.YNc(1,u,2,1,"ng-template",null,1,n.W1O)),2&e){const e=n.MAs(2);n.Q6J("ngIf",!t.language.inlineEditEnabled)("ngIfElse",e)}},dependencies:[r.O5],encapsulation:2,changeDetection:0})}return SystemLabelFieldname})()},93333:(e,t,s)=>{"use strict";s.d(t,{M:()=>m});var i=s(50727),n=s(62242),l=s(55329),o=s(44044),a=s(83917),d=s(4154),r=s(44755);function c(e,t){if(1&e&&(n.ynx(0),n._uU(1),n.BQk()),2&e){const e=n.oxw();n.xp6(1),n.Oqu(e.language.getModuleName(e.module,e.singular,e.length))}}function u(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"span",2),n.NdJ("dblclick",(function(t){n.CHM(e);const s=n.oxw();return n.KtG(s.onDblClick(t))}))("contextmenu",(function(t){n.CHM(e);const s=n.oxw();return n.KtG(s.onRightClick(t))})),n._uU(1),n.qZA()}if(2&e){const e=n.oxw();n.xp6(1),n.hij(" ",e.language.getModuleName(e.module,e.singular,e.length)," ")}}let m=(()=>{class SystemLabelModulename{language;modal;footer;metadata;renderer;cdRef;module;singular=!1;length="default";subsciptions=new i.w0;constructor(e,t,s,i,n,l){this.language=e,this.modal=t,this.footer=s,this.metadata=i,this.renderer=n,this.cdRef=l,this.subsciptions.add(this.language.currentlanguage$.subscribe((()=>this.detectChanges())))}ngAfterViewInit(){this.cdRef.detach()}ngOnDestroy(){this.subsciptions.unsubscribe()}ngOnChanges(e){this.detectChanges()}onDblClick(e){this.openModal(),e.preventDefault()}openModal(){let e=this.metadata.getModuleDefs(this.module);const t=this.singular?e.singular_label:e.module_label;this.modal.openModal("SystemLabelEditorModal",!0).subscribe((e=>{e.instance.labelData={name:t,global_translations:[],custom_translations:[]}}))}detectChanges(){this.cdRef.detectChanges()}onRightClick(e){const t=this.createDropdown(e);this.renderer.appendChild(this.footer.footercontainer.element.nativeElement,t);const s=this.renderer.listen("document","click",(e=>{this.closeDropdown(e,t),s()}));e.preventDefault()}closeDropdown(e,t){this.footer.footercontainer.element.nativeElement.contains(t)&&this.renderer.removeChild(this.footer.footercontainer.element.nativeElement,t)}createDropdown(e){const t=this.renderer.createElement("div"),s=(e,t)=>t.forEach((t=>this.renderer.addClass(e,t)));this.renderer.setStyle(t,"top",e.pageY+"px"),this.renderer.setStyle(t,"left",e.pageX+"px"),s(t,["slds-dropdown--inverse","slds-dropdown","slds-theme--inverse"]);const i=this.renderer.createElement("ul");this.renderer.addClass(i,"slds-dropdown__list");const n=this.renderer.createElement("li");return s(n,["slds-slds-dropdown__item","slds-p-around--xx-small"]),this.renderer.setProperty(n,"onclick",(()=>this.openModal())),this.renderer.setProperty(n,"innerHTML",`<a>${this.language.getLabel("LBL_EDIT_LABEL")}</a>`),this.renderer.appendChild(i,n),this.renderer.appendChild(t,i),t}static ɵfac=function(e){return new(e||SystemLabelModulename)(n.Y36(l.d),n.Y36(o.o),n.Y36(a.M),n.Y36(d.Pu),n.Y36(n.Qsj),n.Y36(n.sBO))};static ɵcmp=n.Xpm({type:SystemLabelModulename,selectors:[["system-label-modulename"]],inputs:{module:"module",singular:"singular",length:"length"},features:[n.TTD],decls:3,vars:2,consts:[[4,"ngIf","ngIfElse"],["labelListenerContainer",""],[3,"dblclick","contextmenu"]],template:function(e,t){if(1&e&&(n.YNc(0,c,2,1,"ng-container",0),n.YNc(1,u,2,1,"ng-template",null,1,n.W1O)),2&e){const e=n.MAs(2);n.Q6J("ngIf",!t.language.inlineEditEnabled)("ngIfElse",e)}},dependencies:[r.O5],encapsulation:2,changeDetection:0})}return SystemLabelModulename})()},82892:(e,t,s)=>{"use strict";s.d(t,{M:()=>h});var i=s(62242),n=s(55329),l=s(44044),o=s(62422),a=s(44755),d=s(95030),r=s(72656),c=s(83463);function u(e,t){if(1&e&&(i.TgZ(0,"label",10),i._UZ(1,"system-label",11),i.qZA()),2&e){const e=i.oxw(2);i.MGl("for","",e.compId,"-select-lang")}}function m(e,t){if(1&e&&(i.TgZ(0,"option",12),i._uU(1),i.qZA()),2&e){const e=t.$implicit;i.Q6J("value",e.language),i.xp6(1),i.hij(" ",e.text," ")}}function g(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"div",1),i.YNc(1,u,2,1,"label",2),i.TgZ(2,"div",3)(3,"div",4)(4,"div",5)(5,"select",6),i.NdJ("ngModelChange",(function(t){i.CHM(e);const s=i.oxw();return i.KtG(s.currentlanguage=t)})),i.YNc(6,m,2,2,"option",7),i.qZA()()(),i.TgZ(7,"button",8),i.NdJ("click",(function(){i.CHM(e);const t=i.oxw();return i.KtG(t.reloadCurrentLanguage())})),i._UZ(8,"system-button-icon",9),i.qZA()()()}if(2&e){const e=i.oxw();i.xp6(1),i.Q6J("ngIf",e.displaylabel),i.xp6(4),i.MGl("id","",e.compId,"-select-lang"),i.Q6J("disabled",e.availableLanguages.length<=1)("ngModel",e.currentlanguage),i.xp6(1),i.Q6J("ngForOf",e.availableLanguages)}}let h=(()=>{class SystemLanguageSelector{language;modal;userpreferences;compId;availableLanguages=[];selected=new i.vpe;displaylabel=!0;constructor(e,t,s){this.language=e,this.modal=t,this.userpreferences=s,this.compId=_.uniqueId()}ngOnInit(){this.getAvialableLanguages()}getAvialableLanguages(){this.availableLanguages=this.language.getAvialableLanguages(!0)}get currentlanguage(){return this.language.currentlanguage}set currentlanguage(e){let t=this.modal.await("LBL_LOADING");this.language.switchLanguage(e).subscribe({next:()=>{t.emit(!0),this.userpreferences.setPreference("language",e)}}),this.selected.emit(!0)}reloadCurrentLanguage(){let e=this.modal.await("LBL_LOADING");this.language.loadLanguage().subscribe({next:()=>{e.emit(!0)}})}static ɵfac=function(e){return new(e||SystemLanguageSelector)(i.Y36(n.d),i.Y36(l.o),i.Y36(o.z))};static ɵcmp=i.Xpm({type:SystemLanguageSelector,selectors:[["system-language-selector"]],inputs:{displaylabel:"displaylabel"},outputs:{selected:"selected"},decls:1,vars:1,consts:[["class","slds-form-element slds-p-bottom--x-small",4,"ngIf"],[1,"slds-form-element","slds-p-bottom--x-small"],["class","slds-form-element__label",3,"for",4,"ngIf"],[1,"slds-grid","slds-grid--vertical-align-center"],[1,"slds-form-element__control","slds-grow"],[1,"slds-select_container"],[1,"slds-select",3,"disabled","ngModel","id","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[1,"slds-button","slds-button--icon","slds-button--icon-border","slds-m-left--x-small",3,"click"],["icon","refresh"],[1,"slds-form-element__label",3,"for"],["label","LBL_SELECT_LANGUAGE"],[3,"value"]],template:function(e,t){1&e&&i.YNc(0,g,9,5,"div",0),2&e&&i.Q6J("ngIf",t.availableLanguages.length>1)},dependencies:[a.sg,a.O5,d.YN,d.Kr,d.EJ,d.JJ,d.On,r.J,c._],encapsulation:2})}return SystemLanguageSelector})()},60655:(e,t,s)=>{"use strict";s.d(t,{A:()=>l});var i=s(62242);const n=["*"];let l=(()=>{class SystemLink{click=new i.vpe;clicked(e){this.click.emit(e)}static ɵfac=function(e){return new(e||SystemLink)};static ɵcmp=i.Xpm({type:SystemLink,selectors:[["system-link"]],outputs:{click:"click"},ngContentSelectors:n,decls:2,vars:0,consts:[[1,"slds-text-link_reset",3,"click"]],template:function(e,t){1&e&&(i.F$t(),i.TgZ(0,"span",0),i.NdJ("click",(function(e){return t.clicked(e)})),i.Hsn(1),i.qZA())},encapsulation:2})}return SystemLink})()},80515:(e,t,s)=>{"use strict";s.d(t,{e:()=>l});var i=s(62242),n=s(4411);let l=(()=>{class SystemLoaderProgress{loader;constructor(e){this.loader=e}get progress(){return this.loader.progress>100?100:this.loader.progress}static ɵfac=function(e){return new(e||SystemLoaderProgress)(i.Y36(n._))};static ɵcmp=i.Xpm({type:SystemLoaderProgress,selectors:[["system-loader-progress"]],decls:6,vars:3,consts:[[1,"slds-align--absolute-center"],[1,"slds-size--2-of-3"],[1,"slds-progress-bar","slds-progress-bar_circular","slds-progress-bar_medium"],[1,"slds-progress-bar__value",2,"background-color","#aaa"],[1,"slds-text-align--center","slds-p-vertical--small"]],template:function(e,t){1&e&&(i.TgZ(0,"div",0)(1,"div",1)(2,"div",2),i._UZ(3,"span",3),i.qZA(),i.TgZ(4,"div",4),i._uU(5),i.qZA()()()),2&e&&(i.xp6(3),i.Udp("width",t.progress+"%"),i.xp6(2),i.hij("... loading ",t.loader.activeLoader," ... "))},encapsulation:2})}return SystemLoaderProgress})()},59621:(e,t,s)=>{"use strict";s.d(t,{j:()=>c});var i=s(91591),n=s(62242),l=s(4154),o=s(26559),a=s(44755);const d=[[["system-modal-header"]],[["system-modal-header-empty"]],[["system-modal-content"]],[["system-modal-footer"]]],r=["system-modal-header","system-modal-header-empty","system-modal-content","system-modal-footer"];let c=(()=>{class SystemModal{metadata;layout;size="medium";class="";constructor(e,t){this.metadata=e,this.layout=t}get sizeClass(){return this.size&&"small"!=this.size?this.class+" slds-modal_"+this.size:this.class}get containerStyle(){return"small"==this.layout.screenwidth?{padding:"0px",margin:"0px","border-radius":"0px"}:{}}static ɵfac=function(e){return new(e||SystemModal)(n.Y36(l.Pu),n.Y36(o.b))};static ɵcmp=n.Xpm({type:SystemModal,selectors:[["system-modal"]],inputs:{size:"size",class:"class"},ngContentSelectors:r,decls:6,vars:3,consts:[["role","dialog",1,"slds-modal","slds-fade-in-open",3,"ngClass"],[1,"slds-modal__container",3,"ngStyle"]],template:function(e,t){1&e&&(n.F$t(d),n.TgZ(0,"section",0)(1,"div",1),n.Hsn(2),n.Hsn(3,1),n.Hsn(4,2),n.Hsn(5,3),n.qZA()()),2&e&&(n.Q6J("ngClass",t.sizeClass),n.xp6(1),n.Q6J("@modalanimation",void 0)("ngStyle",t.containerStyle))},dependencies:[a.mk,a.PC],encapsulation:2,data:{animation:[(0,i.X$)("modalanimation",[(0,i.eR)(":enter",[(0,i.oB)({opacity:0}),(0,i.jt)(".3s",(0,i.oB)({opacity:1}))]),(0,i.eR)(":leave",[(0,i.jt)(".3s",(0,i.oB)({opacity:0}))])])]}})}return SystemModal})()},83499:(e,t,s)=>{"use strict";s.d(t,{x:()=>o});var i=s(62242),n=s(44755);const l=["*"];let o=(()=>{class SystemModalContent{margin="medium";grow=!1;scrollable=!0;overflowVisible=!1;set inputGrow(e){this.grow=!1!==e}set inputOverflowVisible(e){this.overflowVisible=!1!==e}get modalStyle(){return this.overflowVisible?{overflow:"visible"}:{}}get contentclass(){return"slds-modal__content"+(this.grow?" slds-grow":"")+(this.scrollable?"":" slds-scrollable--none")}static ɵfac=function(e){return new(e||SystemModalContent)};static ɵcmp=i.Xpm({type:SystemModalContent,selectors:[["system-modal-content"]],hostVars:2,hostBindings:function(e,t){2&e&&i.Tol(t.contentclass)},inputs:{margin:"margin",grow:"grow",scrollable:"scrollable",overflowVisible:"overflowVisible",inputGrow:["system-modal-content-grow","inputGrow"],inputOverflowVisible:["system-modal-overvlow-visible","inputOverflowVisible"]},ngContentSelectors:l,decls:2,vars:3,consts:[[1,"slds-height_full",3,"ngClass"]],template:function(e,t){1&e&&(i.F$t(),i.TgZ(0,"div",0),i.Hsn(1),i.qZA()),2&e&&(i.ekj("slds-scrollable--y",t.scrollable),i.Q6J("ngClass","slds-p-around--"+t.margin))},dependencies:[n.mk],styles:["[_nghost-%COMP%]{position:relative}"]})}return SystemModalContent})()},75767:(e,t,s)=>{"use strict";s.d(t,{p:()=>l});var i=s(62242);const n=["*"];let l=(()=>{class SystemModalFooter{static ɵfac=function(e){return new(e||SystemModalFooter)};static ɵcmp=i.Xpm({type:SystemModalFooter,selectors:[["system-modal-footer"]],ngContentSelectors:n,decls:2,vars:0,consts:[[1,"slds-modal__footer"]],template:function(e,t){1&e&&(i.F$t(),i.TgZ(0,"footer",0),i.Hsn(1),i.qZA())},encapsulation:2})}return SystemModalFooter})()},1916:(e,t,s)=>{"use strict";s.d(t,{y:()=>p});var i=s(62242),n=s(55329),l=s(26559),o=s(44755),a=s(72656),d=s(44561),r=s(83463);function c(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"button",7),i.NdJ("click",(function(){i.CHM(e);const t=i.oxw();return i.KtG(t.close.emit(!0))})),i._UZ(1,"system-button-icon",8),i.TgZ(2,"span",9),i._UZ(3,"system-label",10),i.qZA()()}}function u(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"button",11),i.NdJ("click",(function(){i.CHM(e);const t=i.oxw();return i.KtG(t.close.emit(!0))})),i._UZ(1,"system-button-icon",12),i.TgZ(2,"span",9),i._UZ(3,"system-label",10),i.qZA()()}}function m(e,t){if(1&e&&(i.TgZ(0,"div",13),i._UZ(1,"system-icon",14),i.qZA()),2&e){const e=i.oxw();i.xp6(1),i.Q6J("module",e.module)}}const g=["*",[["system-modal-header-right"]],[["system-modal-header-tagline"]]],h=["*","system-modal-header-right","system-modal-header-tagline"];let p=(()=>{class SystemModalHeader{language;layout;module="";hiddenCloseButton=!1;close=new i.vpe;set hideClose(e){this.hiddenCloseButton=!1!==e}constructor(e,t){this.language=e,this.layout=t}get isSmall(){return"small"==this.layout.screenwidth}get headerStyle(){return"small"==this.layout.screenwidth?{"border-radius":"0px"}:{}}static ɵfac=function(e){return new(e||SystemModalHeader)(i.Y36(n.d),i.Y36(l.b))};static ɵcmp=i.Xpm({type:SystemModalHeader,selectors:[["system-modal-header"]],inputs:{module:"module",hiddenCloseButton:"hiddenCloseButton",hideClose:["system-modal-header-noclose","hideClose"]},outputs:{close:"close"},ngContentSelectors:h,decls:11,vars:4,consts:[[1,"slds-modal__header","slds-theme--shade",3,"ngStyle"],["class","slds-button slds-button_icon slds-modal__close slds-button--icon-inverse","style","color:white;",3,"click",4,"ngIf"],["class","slds-button slds-button_icon slds-is-absolute","style","top: 3px; right: 3px;",3,"click",4,"ngIf"],[1,"slds-grid","slds-grid--align-spread","slds-grid_vertical-align-center"],[1,"slds-media__figure","slds-m-right_x-small"],["class","slds-icon_container",4,"ngIf"],[1,"slds-text-heading_medium","slds-hyphenate"],[1,"slds-button","slds-button_icon","slds-modal__close","slds-button--icon-inverse",2,"color","white",3,"click"],["icon","close","size","large"],[1,"slds-assistive-text"],["label","LBL_CLOSE"],[1,"slds-button","slds-button_icon","slds-is-absolute",2,"top","3px","right","3px",3,"click"],["icon","close"],[1,"slds-icon_container"],["size","small",3,"module"]],template:function(e,t){1&e&&(i.F$t(g),i.TgZ(0,"header",0),i.YNc(1,c,4,0,"button",1),i.YNc(2,u,4,0,"button",2),i.TgZ(3,"div",3)(4,"div",4),i.YNc(5,m,2,1,"div",5),i.qZA(),i.TgZ(6,"span",6),i.Hsn(7),i.qZA(),i.TgZ(8,"div"),i.Hsn(9,1),i.qZA()(),i.Hsn(10,2),i.qZA()),2&e&&(i.Q6J("ngStyle",t.headerStyle),i.xp6(1),i.Q6J("ngIf",!t.hiddenCloseButton&&!t.isSmall),i.xp6(1),i.Q6J("ngIf",!t.hiddenCloseButton&&t.isSmall),i.xp6(3),i.Q6J("ngIf",t.module))},dependencies:[o.O5,o.PC,a.J,d.f,r._],encapsulation:2})}return SystemModalHeader})()},11604:(e,t,s)=>{"use strict";s.d(t,{O:()=>l});var i=s(62242);const n=["*"];let l=(()=>{class SystemModalHeaderRight{static ɵfac=function(e){return new(e||SystemModalHeaderRight)};static ɵcmp=i.Xpm({type:SystemModalHeaderRight,selectors:[["system-modal-header-right"]],ngContentSelectors:n,decls:1,vars:0,template:function(e,t){1&e&&(i.F$t(),i.Hsn(0))},encapsulation:2})}return SystemModalHeaderRight})()},96933:(e,t,s)=>{"use strict";s.d(t,{J:()=>l});var i=s(62242);const n=["*"];let l=(()=>{class SystemModalHeaderTagline{static ɵfac=function(e){return new(e||SystemModalHeaderTagline)};static ɵcmp=i.Xpm({type:SystemModalHeaderTagline,selectors:[["system-modal-header-tagline"]],ngContentSelectors:n,decls:2,vars:0,consts:[[1,"slds-m-top_x-small"]],template:function(e,t){1&e&&(i.F$t(),i.TgZ(0,"p",0),i.Hsn(1),i.qZA())},encapsulation:2})}return SystemModalHeaderTagline})()},64947:(e,t,s)=>{"use strict";s.d(t,{w:()=>o});var i=s(62242),n=s(55329);const l=function(){return{nodeId:"root"}};let o=(()=>{class SystemModuleTree{language;displayAuditFields=!1;displayRelationshipFields=!1;module;itemSelected=new i.vpe;selectedNodeId="";isLoading=!1;constructor(e){this.language=e}ngAfterViewInit(){this.selectedNodeId="root",this.itemSelected.emit({path:"root:"+this.module,module:this.module,nodeId:"root"})}emitSelected(e){this.selectedNodeId=e.nodeId,this.itemSelected.emit(e)}static ɵfac=function(e){return new(e||SystemModuleTree)(i.Y36(n.d))};static ɵcmp=i.Xpm({type:SystemModuleTree,selectors:[["system-module-tree"]],inputs:{displayAuditFields:"displayAuditFields",displayRelationshipFields:"displayRelationshipFields",module:"module"},outputs:{itemSelected:"itemSelected"},decls:3,vars:8,consts:[["role","tree",1,"slds-tree"],[3,"module","name","path","nodedata","selectedNodeId","displayAuditFields","displayRelationshipFields","itemSelected"]],template:function(e,t){1&e&&(i.TgZ(0,"div")(1,"ul",0)(2,"system-module-tree-item",1),i.NdJ("itemSelected",(function(e){return t.emitSelected(e)})),i.qZA()()()),2&e&&(i.xp6(2),i.Q6J("module",t.module)("name",t.language.getModuleName(t.module))("path","root:"+t.module)("nodedata",i.DdM(7,l))("selectedNodeId",t.selectedNodeId)("displayAuditFields",t.displayAuditFields)("displayRelationshipFields",t.displayRelationshipFields))},encapsulation:2})}return SystemModuleTree})()},40116:(e,t,s)=>{"use strict";s.d(t,{I:()=>T});var i=s(62242),n=s(95030),l=s(55329),o=s(83398),a=s(50151),d=s(44755),r=s(72656),c=s(78859);function u(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"div",8),i.NdJ("click",(function(){i.CHM(e);const t=i.oxw();return i.KtG(t.onclick())})),i.TgZ(1,"input",9),i.NdJ("mouseleave",(function(){i.CHM(e);const t=i.oxw();return i.KtG(t.onMouseLeave())}))("keydown",(function(e){return e.preventDefault()})),i.qZA(),i._UZ(2,"system-utility-icon",10),i.qZA()}if(2&e){const e=i.oxw();i.xp6(1),i.Q6J("disabled",e.disabled)("system-placeholder",e.selectedCountText)("ngStyle",e.inputTagStyle),i.xp6(1),i.Udp("transform",e.isOpen?"rotate(180deg)":"none")}}function m(e,t){if(1&e){const e=i.EpF();i.ynx(0),i.TgZ(1,"span",16),i.NdJ("click",(function(e){return e.stopPropagation()})),i.TgZ(2,"a",17)(3,"span",18),i._uU(4),i.qZA()(),i.TgZ(5,"button",19),i.NdJ("click",(function(){const t=i.CHM(e),s=t.index,n=t.$implicit,l=i.oxw(2);return i.KtG(l.removeItem(s,n))})),i._UZ(6,"system-button-icon",20),i.qZA()(),i.BQk()}if(2&e){const e=t.$implicit,s=i.oxw(2);i.xp6(3),i.Q6J("system-title",s.listItems[e]),i.xp6(1),i.hij(" ",s.listItems[e]," ")}}function g(e,t){if(1&e&&(i.TgZ(0,"div",21),i._uU(1),i.qZA()),2&e){const e=i.oxw(2);i.xp6(1),i.hij(" ",e.selectedCountText," ")}}function h(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"div",11),i.NdJ("click",(function(){i.CHM(e);const t=i.oxw();return i.KtG(t.onclick())}))("mouseleave",(function(){i.CHM(e);const t=i.oxw();return i.KtG(t.onMouseLeave())})),i.YNc(1,m,7,2,"ng-container",12),i.YNc(2,g,2,1,"div",13),i.TgZ(3,"div",14),i._uU(4," "),i.qZA(),i.TgZ(5,"system-utility-icon",15),i.NdJ("click",(function(){i.CHM(e);const t=i.oxw();return i.KtG(t.onclick())})),i.qZA()()}if(2&e){const e=i.oxw();i.xp6(1),i.Q6J("ngForOf",e.valueArray)("ngForTrackBy",e.trackByFn),i.xp6(1),i.Q6J("ngIf",0==e.valueArray.length),i.xp6(3),i.Udp("transform",e.isOpen?"rotate(180deg)":"none")}}function p(e,t){1&e&&i._UZ(0,"system-utility-icon",28)}function f(e,t){1&e&&i._UZ(0,"system-utility-icon",34)}function b(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"li",23),i.NdJ("click",(function(){const t=i.CHM(e).$implicit,s=i.oxw().$implicit,n=i.oxw(2);return i.KtG(n.toggleAddRemoveItem(t.value,s.value))})),i.TgZ(1,"div",29)(2,"span",30),i.YNc(3,f,1,0,"system-utility-icon",31),i.qZA(),i.TgZ(4,"span",32)(5,"span",33),i._uU(6),i.qZA()()()()}if(2&e){const e=t.$implicit,s=i.oxw(3);i.xp6(3),i.Q6J("ngIf",s.selectedItems[e.value]),i.xp6(2),i.Udp("font-weight",s.selectedItems[e.value]?600:"initial"),i.Q6J("system-title",e.display),i.xp6(1),i.hij(" ",e.display," ")}}function v(e,t){if(1&e){const e=i.EpF();i.ynx(0),i.TgZ(1,"li",23),i.NdJ("click",(function(){const t=i.CHM(e).$implicit,s=i.oxw(2);return i.KtG(s.toggleAddRemoveGroup(t.value))})),i.TgZ(2,"div",24),i.YNc(3,p,1,0,"system-utility-icon",25),i.TgZ(4,"h3",26),i._uU(5),i.qZA()()(),i.YNc(6,b,7,5,"li",27),i.BQk()}if(2&e){const e=t.$implicit,s=i.oxw(2);i.xp6(3),i.Q6J("ngIf",s.selectedItems[e.value]),i.xp6(1),i.Q6J("system-title",e.display),i.xp6(1),i.hij(" ",e.display," "),i.xp6(1),i.Q6J("ngForOf",e.items)("ngForTrackBy",s.trackByFn)}}function y(e,t){if(1&e&&(i.TgZ(0,"ul",22),i.YNc(1,v,7,5,"ng-container",12),i.qZA()),2&e){const e=i.oxw();i.xp6(1),i.Q6J("ngForOf",e.parsedListItems)("ngForTrackBy",e.trackByFn)}}function x(e,t){1&e&&i._UZ(0,"system-utility-icon",34)}function w(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"li",23),i.NdJ("click",(function(){const t=i.CHM(e).$implicit,s=i.oxw(2);return i.KtG(s.toggleAddRemoveItem(t.value))})),i.TgZ(1,"div",29)(2,"span",30),i.YNc(3,x,1,0,"system-utility-icon",31),i.qZA(),i.TgZ(4,"span",32)(5,"span",33),i._uU(6),i.qZA()()()()}if(2&e){const e=t.$implicit,s=i.oxw(2);i.xp6(3),i.Q6J("ngIf",s.selectedItems[e.value]),i.xp6(2),i.Udp("font-weight",s.selectedItems[e.value]?600:"initial"),i.Q6J("system-title",e.display),i.xp6(1),i.hij(" ",e.display," ")}}function Z(e,t){if(1&e&&(i.TgZ(0,"ul",22),i.YNc(1,w,7,5,"li",35),i.qZA()),2&e){const e=i.oxw();i.xp6(1),i.Q6J("ngForOf",e.parsedListItems)("ngForTrackBy",e.trackByFn)}}let T=(()=>{class SystemMultipleSelect{elementRef;renderer;language;disabled=!1;grouped=!1;set groupedSetter(e){this.grouped=!1!==e}showPills=!0;set showPillsSetter(e){this.showPills=!1!==e}listItems={};set dropdownLengthClassSetter(e){this.dropdownLengthClass=e?"slds-dropdown_length-"+e:"slds-dropdown_length-7"}groupSeparator="_";set groupSeparatorSetter(e){this.groupSeparator=e||"_"}parsedListItems=[];valueArray=[];isOpen=!1;clickListener;selectedItems={};selectedCountText="0 Selected Items";inputTagStyle={color:"transparent",cursor:"pointer"};dropdownLengthClass="slds-dropdown_length-7";escKeyListener;onChange;onTouched;constructor(e,t,s){this.elementRef=e,this.renderer=t,this.language=s}ngOnChanges(){this.buildOptionGroups()}ngAfterViewInit(){this.subscribeToESCKeyUp()}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}writeValue(e){e&&e.length&&(this.valueArray=e,this.selectedItems=_.object(e.map((e=>[e,!0])))),this.setSelectedCountText()}buildOptionGroups(){let e;if(this.parsedListItems=[],this.grouped){e={};for(let t in this.listItems)this.listItems.hasOwnProperty(t)&&!t.includes(this.groupSeparator)&&(e[t]={value:t,display:this.listItems[t],items:[]});for(let t in this.listItems)if(this.listItems.hasOwnProperty(t)){const s=t.split(this.groupSeparator);2==s.length&&e[s[0]]&&e[s[0]].items.push({value:t,display:this.listItems[t]})}this.parsedListItems=_.toArray(e)}else{e=[];for(let t in this.listItems)this.listItems.hasOwnProperty(t)&&e.push({value:t,display:this.listItems[t]});this.parsedListItems=e}}onclick(){this.isOpen=!this.isOpen}subscribeToESCKeyUp(){this.escKeyListener=this.renderer.listen("document","keyup",(e=>{"Escape"==e.key&&(this.isOpen=!1)}))}onMouseLeave(){this.clickListener&&this.clickListener(),this.isOpen&&(this.clickListener=this.renderer.listen("document","click",(e=>this.handleCloseDropdown(e))))}handleCloseDropdown(e){this.elementRef.nativeElement.contains(e.target)||(this.isOpen=!1,this.clickListener())}toggleAddRemoveItem(e,t){const s=this.valueArray.indexOf(e);let i=this.valueArray.indexOf(t);s>-1?(this.valueArray.splice(s,1),this.selectedItems[e]=!1,t&&!this.groupHasItems(t)&&(i=this.valueArray.indexOf(t),this.valueArray.splice(i,1),this.selectedItems[t]=!1)):(t&&-1==i&&(this.valueArray.push(t),this.selectedItems[t]=!0),this.valueArray.push(e),this.selectedItems[e]=!0),this.setSelectedCountText(),this.onChange(this.valueArray)}toggleAddRemoveGroup(e){if(this.groupHasItems(e))return;const t=this.valueArray.indexOf(e);t>-1?(this.valueArray.splice(t,1),this.selectedItems[e]=!1):(this.valueArray.push(e),this.selectedItems[e]=!0),this.setSelectedCountText(),this.onChange(this.valueArray)}groupHasItems(e){return this.valueArray.some((t=>{const s=t.split(this.groupSeparator);return 2==s.length&&s[0]==e}))}trackByFn(e,t){return e}removeItem(e,t){if(this.valueArray.splice(e,1),this.selectedItems[t]=!1,this.grouped&&t.split(this.groupSeparator).length>1){const e=t.split(this.groupSeparator)[0];if(!this.groupHasItems(e)){const t=this.valueArray.indexOf(e);this.valueArray.splice(t,1),this.selectedItems[e]=!1}}this.setSelectedCountText(),this.onChange(this.valueArray)}setSelectedCountText(){this.grouped?this.selectedCountText=`${this.valueArray.filter((e=>e.includes(this.groupSeparator))).length} ${this.language.getLabel("LBL_SELECTED_ITEMS")}`:this.selectedCountText=`${this.valueArray.length} ${this.language.getLabel("LBL_SELECTED_ITEMS")}`}ngOnDestroy(){this.escKeyListener&&this.escKeyListener()}static ɵfac=function(e){return new(e||SystemMultipleSelect)(i.Y36(i.SBq),i.Y36(i.Qsj),i.Y36(l.d))};static ɵcmp=i.Xpm({type:SystemMultipleSelect,selectors:[["system-multiple-select"]],inputs:{disabled:"disabled",groupedSetter:["grouped","groupedSetter"],showPillsSetter:["showPills","showPillsSetter"],listItems:"listItems",dropdownLengthClassSetter:["listHeight","dropdownLengthClassSetter"],groupSeparatorSetter:["groupSeparator","groupSeparatorSetter"]},features:[i._Bn([{provide:n.JU,useExisting:(0,i.Gpc)((()=>SystemMultipleSelect)),multi:!0}]),i.TTD],decls:9,vars:7,consts:[[1,"slds-form-element"],[1,"slds-form-element__control"],[1,"slds-combobox_container"],["aria-expanded","true","aria-haspopup","listbox","role","combobox",1,"slds-combobox","slds-dropdown-trigger","slds-dropdown-trigger_click"],["class","slds-combobox__form-element slds-input-has-icon slds-input-has-icon_right","role","none",3,"click",4,"ngIf"],["class","slds-grid slds-grid--vertical-align-center slds-wrap slds-pill_container",3,"click","mouseleave",4,"ngIf"],["role","listbox",1,"slds-dropdown","slds-dropdown_fluid","spice-scrollbar",3,"ngClass"],["class","slds-listbox slds-listbox_vertical","role","group",4,"ngIf"],["role","none",1,"slds-combobox__form-element","slds-input-has-icon","slds-input-has-icon_right",3,"click"],["type","text","autoComplete","off","role","textbox",1,"slds-input","slds-combobox__input","slds-has-focus","slds-combobox__input-value",3,"disabled","system-placeholder","ngStyle","mouseleave","keydown"],["icon","down","addclasses","slds-input__icon slds-input__icon_right"],[1,"slds-grid","slds-grid--vertical-align-center","slds-wrap","slds-pill_container",3,"click","mouseleave"],[4,"ngFor","ngForOf","ngForTrackBy"],["class","slds-grow slds-m-left--xx-small","style","cursor: default;",4,"ngIf"],[1,"slds-grow"],["icon","down","size","xx-small",1,"slds-col--bump-left","slds-p-right--xx-small",3,"click"],[1,"slds-pill","slds-pill_link",2,"max-width","130px",3,"click"],["href","javascript:void(0);",1,"slds-pill__action"],[1,"slds-pill__label",3,"system-title"],["system-title","LBL_REMOVE",1,"slds-button","slds-button_icon","slds-pill__remove",3,"click"],["icon","close"],[1,"slds-grow","slds-m-left--xx-small",2,"cursor","default"],["role","group",1,"slds-listbox","slds-listbox_vertical"],["role","presentation",1,"slds-listbox__item",3,"click"],["role","presentation",1,"slds-media","slds-listbox__option","slds-listbox__option_plain","slds-media_small"],["icon","check","size","xx-small","class","slds-m-right--xx-small",4,"ngIf"],["role","presentation",1,"slds-listbox__option-header","slds-truncate","slds-text-title_caps",3,"system-title"],["role","presentation","class","slds-listbox__item",3,"click",4,"ngFor","ngForOf","ngForTrackBy"],["icon","check","size","xx-small",1,"slds-m-right--xx-small"],["role","option",1,"slds-media","slds-listbox__option","slds-listbox__option_plain","slds-media_small","slds-is-selected"],[1,"slds-media__figure","slds-listbox__option-icon"],["icon","check","size","xx-small",4,"ngIf"],[1,"slds-media__body"],[1,"slds-truncate",3,"system-title"],["icon","check","size","xx-small"],["class","slds-listbox__item","role","presentation",3,"click",4,"ngFor","ngForOf","ngForTrackBy"]],template:function(e,t){1&e&&(i.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),i.YNc(4,u,3,5,"div",4),i.YNc(5,h,6,5,"div",5),i.TgZ(6,"div",6),i.YNc(7,y,2,2,"ul",7),i.YNc(8,Z,2,2,"ul",7),i.qZA()()()()()),2&e&&(i.xp6(3),i.ekj("slds-is-open",t.isOpen),i.xp6(1),i.Q6J("ngIf",!t.showPills),i.xp6(1),i.Q6J("ngIf",t.showPills),i.xp6(1),i.Q6J("ngClass",t.dropdownLengthClass),i.xp6(1),i.Q6J("ngIf",t.grouped),i.xp6(1),i.Q6J("ngIf",!t.grouped))},dependencies:[o.A,a.S,d.mk,d.sg,d.O5,d.PC,r.J,c.r],encapsulation:2})}return SystemMultipleSelect})()},64988:(e,t,s)=>{"use strict";s.d(t,{y:()=>o});var i=s(62242),n=s(83348),l=s(82032);let o=(()=>{class SystemNavigationCollector{activatedRoute;navigation;constructor(e,t){this.activatedRoute=e,this.navigation=t,this.activatedRoute.params.subscribe((e=>{this.activatedRoute.routeConfig&&this.navigation.handleNavigation(e,this.activatedRoute.routeConfig,this.activatedRoute.snapshot)}))}static ɵfac=function(e){return new(e||SystemNavigationCollector)(i.Y36(n.gz),i.Y36(l.G))};static ɵcmp=i.Xpm({type:SystemNavigationCollector,selectors:[["ng-component"]],decls:1,vars:0,template:function(e,t){1&e&&i._UZ(0,"span")},encapsulation:2})}return SystemNavigationCollector})()},8070:(e,t,s)=>{"use strict";s.d(t,{M:()=>c});var i=s(62242),n=s(75920),l=s(82032),o=s(44755),a=s(55383);function d(e,t){if(1&e&&(i.ynx(0),i._UZ(1,"system-navigation-manager-route-container",3),i.BQk()),2&e){const e=t.$implicit;i.xp6(1),i.Q6J("tabid",e.id)("parentttabid",e.parentid)("object",e)}}function r(e,t){if(1&e&&(i.ynx(0),i._UZ(1,"system-navigation-manager-route-container",1),i.YNc(2,d,2,3,"ng-container",2),i.BQk()),2&e){const e=i.oxw();i.xp6(2),i.Q6J("ngForOf",e.navigation.objectTabs)}}let c=(()=>{class SystemNavigationManager{session;navigation;constructor(e,t){this.session=e,this.navigation=t}get authenticated(){return this.session.authData.sessionId&&!0===this.session.authData.loaded}static ɵfac=function(e){return new(e||SystemNavigationManager)(i.Y36(n.n),i.Y36(l.G))};static ɵcmp=i.Xpm({type:SystemNavigationManager,selectors:[["system-navigation-manager"]],decls:1,vars:1,consts:[[4,"ngIf"],["tabid","main"],[4,"ngFor","ngForOf"],[3,"tabid","parentttabid","object"]],template:function(e,t){1&e&&i.YNc(0,r,3,1,"ng-container",0),2&e&&i.Q6J("ngIf",t.authenticated)},dependencies:[o.sg,o.O5,a.j],encapsulation:2})}return SystemNavigationManager})()},55383:(e,t,s)=>{"use strict";s.d(t,{j:()=>h});var i=s(50727),n=s(17017),l=s(62242),o=s(4154),a=s(55329),d=s(83348),r=s(33369),c=s(82032),u=s(44755),m=s(82995);const g=function(e){return{"slds-hide":e}};let h=(()=>{class SystemNavigationManagerRouteContainer{metadata;language;router;broadcast;navigation;navigationtab;changeDetectorRef;object;tabid;parentttabid;loaded=!1;routercomponent;renderedPath;rendererParams;subscriptions=new i.w0;constructor(e,t,s,i,n,l,o){this.metadata=e,this.language=t,this.router=s,this.broadcast=i,this.navigation=n,this.navigationtab=l,this.changeDetectorRef=o,this.changeDetectorRef.detach(),this.subscriptions.add(this.navigationtab.tabinfo$.subscribe((e=>{this.navigation.settabinfo(this.tabid,e)}))),this.subscriptions.add(this.navigationtab.close$.subscribe((e=>{this.navigation.closeObjectTab(this.tabid,!0)})))}ngOnInit(){this.setParentTabId(),this.object&&(this.navigationtab.objecttab=this.object),this.subscriptions.add(this.navigation.activeTab$.subscribe((e=>{if(e==this.tabid){let e;if("main"===this.tabid)this.renderedPath==this.navigation.maintab.path&&_.isEqual(this.rendererParams,this.navigation.maintab.params)||(e=this.metadata.getRouteComponent(this.navigation.maintab.path),this.routercomponent=e||void 0,this.navigationtab.activeRoute={path:this.navigation.maintab.path,params:this.navigation.maintab.params},this.navigationtab.activeRoute$.next(this.navigationtab.activeRoute),this.renderedPath=this.navigation.maintab.path,this.rendererParams={...this.navigation.maintab.params});else this.renderedPath==this.object.path&&_.isEqual(this.rendererParams,this.object.params)||(e=this.metadata.getRouteComponent(this.object.path.replace("tab/:tabid/","")),this.routercomponent=e||void 0,this.navigationtab.activeRoute={path:this.object.path,params:this.object.params},this.navigationtab.activeRoute$.next(this.navigationtab.activeRoute),this.renderedPath=this.object.path,this.rendererParams={...this.object.params});this.loaded=!0,this.changeDetectorRef.reattach(),this.changeDetectorRef.markForCheck()}else this.changeDetectorRef.detach(),this.changeDetectorRef.detectChanges()})))}setParentTabId(){"main"!=this.tabid&&"subtabbed"==this.navigation.navigationparadigm&&this.object.enablesubtabs&&(this.navigationtab.tabid=this.parentttabid?this.parentttabid:this.tabid)}ngOnDestroy(){this.subscriptions.unsubscribe()}get isActive(){return this.navigation.displayTab==this.tabid}static ɵfac=function(e){return new(e||SystemNavigationManagerRouteContainer)(l.Y36(o.Pu),l.Y36(a.d),l.Y36(d.F0),l.Y36(r.f),l.Y36(c.G,4),l.Y36(n.d),l.Y36(l.sBO))};static ɵcmp=l.Xpm({type:SystemNavigationManagerRouteContainer,selectors:[["system-navigation-manager-route-container"]],inputs:{object:"object",tabid:"tabid",parentttabid:"parentttabid"},features:[l._Bn([n.d])],decls:2,vars:4,consts:[[1,"slds-height_full",3,"ngClass"],[3,"component"]],template:function(e,t){1&e&&(l.TgZ(0,"div",0),l._UZ(1,"system-dynamic-component",1),l.qZA()),2&e&&(l.Q6J("ngClass",l.VKq(2,g,!t.isActive)),l.xp6(1),l.Q6J("component",t.routercomponent))},dependencies:[u.mk,m.T],encapsulation:2})}return SystemNavigationManagerRouteContainer})()},25320:(e,t,s)=>{"use strict";s.d(t,{H:()=>a});var i=s(17445),n=s(95698),l=s(62242),o=s(62422);let a=(()=>{class SystemNumberSpinner{userpreferences;cdref;_value=0;value;steps=20;duration=300;constructor(e,t){this.userpreferences=e,this.cdref=t}ngOnChanges(e){const t=(parseFloat(this.value)-this._value)/this.steps;(0,i.F)(this.duration/this.steps).pipe((0,n.q)(this.steps)).subscribe((e=>{this._value!=parseFloat(this.value)&&(this._value+=t,Math.abs(this._value-parseFloat(this.value))<1&&(this._value=parseFloat(this.value)),this.cdref.detectChanges())}),(e=>{this._value=parseFloat(this.value),this.cdref.detectChanges()}),(()=>{this._value=parseFloat(this.value),this.cdref.detectChanges()}))}get displayvalue(){return this.userpreferences.formatMoney(this._value,0)}static ɵfac=function(e){return new(e||SystemNumberSpinner)(l.Y36(o.z),l.Y36(l.sBO))};static ɵcmp=l.Xpm({type:SystemNumberSpinner,selectors:[["system-number-spinner"]],inputs:{value:"value",steps:"steps",duration:"duration"},features:[l.TTD],decls:1,vars:1,template:function(e,t){1&e&&l._uU(0),2&e&&l.Oqu(t.displayvalue)},encapsulation:2,changeDetection:0})}return SystemNumberSpinner})()},1148:(e,t,s)=>{"use strict";s.d(t,{s:()=>x});var i=s(62242),n=s(50727),l=s(55329),o=s(66550),a=s(93441),d=s(44755),r=s(59574),c=s(83463),u=s(94664);const m=["downloadlink"];function g(e,t){1&e&&i._UZ(0,"system-spinner")}function h(e,t){1&e&&(i.TgZ(0,"system-illustration-page-not-available"),i._UZ(1,"system-label",4),i.qZA())}function p(e,t){if(1&e&&(i.TgZ(0,"div",2),i.YNc(1,g,1,0,"system-spinner",3),i.YNc(2,h,2,0,"system-illustration-page-not-available",3),i.qZA()),2&e){const e=i.oxw();i.xp6(1),i.Q6J("ngIf",!e.loadingerror),i.xp6(1),i.Q6J("ngIf",e.loadingerror)}}function f(e,t){if(1&e&&(i.TgZ(0,"div",9)(1,"audio",10),i._UZ(2,"source",11),i.qZA()()),2&e){const e=i.oxw(2);i.xp6(2),i.Q6J("src",e.blobUrl,i.LSH)("type",e.type)}}function b(e,t){if(1&e&&(i.TgZ(0,"div",9)(1,"video",12),i._UZ(2,"source",11),i.qZA()()),2&e){const e=i.oxw(2);i.xp6(2),i.Q6J("src",e.blobUrl,i.LSH)("type",e.type)}}function _(e,t){if(1&e&&(i.TgZ(0,"div",13),i._UZ(1,"object",14),i.qZA()),2&e){const e=i.oxw(2);i.Q6J("ngStyle",e.objectContainerStyle),i.xp6(1),i.Q6J("data",e.blobUrl,i.uOi)("type",e.type)}}function v(e,t){if(1&e&&i._UZ(0,"a",15,16),2&e){const e=i.oxw(2);i.Q6J("href",e.blobUrl,i.LSH)("download",e.name)}}function y(e,t){if(1&e&&(i.ynx(0,5),i.YNc(1,f,3,2,"div",6),i.YNc(2,b,3,2,"div",6),i.YNc(3,_,2,3,"div",7),i.YNc(4,v,2,2,"a",8),i.BQk()),2&e){const e=i.oxw();i.Q6J("ngSwitch",e.objecttype),i.xp6(1),i.Q6J("ngSwitchCase","audio"),i.xp6(1),i.Q6J("ngSwitchCase","video"),i.xp6(2),i.Q6J("ngIf",e.downloadTrigger$&&e.downloadReady)}}let x=(()=>{class SystemObjectPreview{language;sanitizer;helper;blobUrl;name="";loadingerror=!1;rawData;downloadReady=!1;downloadlink;subscriptions=new n.w0;objectContainerHeight="80vh";constructor(e,t,s){this.language=e,this.sanitizer=t,this.helper=s}_type="";get type(){return this._type}set type(e){this._type=e,!this.blobUrl&&e&&this.setBlobUrl(this.rawData)}set data(e){this.rawData=e,this.setBlobUrl(e)}downloadTrigger$;ngOnInit(){this.downloadTrigger$&&this.subscriptions.add(this.downloadTrigger$.subscribe({next:()=>{this.downloadReady&&this.downloadlink.element.nativeElement.click()}}))}get objecttype(){if(!this.type)return"";let e=this.type.split("/");switch(e[0]){case"audio":case"video":return e[0];default:return"object"}}setBlobUrl(e){if(e&&this.type){const t=this.helper.datatoBlob(e,this.type);this.blobUrl=this.helper.dataToBlobUrl(t),this.downloadReady=!0}}ngOnDestroy(){this.subscriptions.unsubscribe()}get objectContainerStyle(){return{height:this.objectContainerHeight,overflow:"hidden"}}static ɵfac=function(e){return new(e||SystemObjectPreview)(i.Y36(l.d),i.Y36(o.H7),i.Y36(a._))};static ɵcmp=i.Xpm({type:SystemObjectPreview,selectors:[["system-object-preview"]],viewQuery:function(e,t){if(1&e&&i.Gf(m,5,i.s_b),2&e){let e;i.iGM(e=i.CRH())&&(t.downloadlink=e.first)}},inputs:{name:"name",loadingerror:"loadingerror",objectContainerHeight:"objectContainerHeight",type:"type",data:"data",downloadTrigger$:"downloadTrigger$"},decls:2,vars:2,consts:[["style","height: 50vh;","class","slds-align--absolute-center",4,"ngIf"],[3,"ngSwitch",4,"ngIf"],[1,"slds-align--absolute-center",2,"height","50vh"],[4,"ngIf"],["label","MSG_ERROR_LOADING_FILE"],[3,"ngSwitch"],["class","slds-p-around--small slds-text-align--center",4,"ngSwitchCase"],[3,"ngStyle",4,"ngSwitchDefault"],["style","display:none",3,"href","download",4,"ngIf"],[1,"slds-p-around--small","slds-text-align--center"],["controls","",2,"width","100%"],[3,"src","type"],["controls","",2,"max-height","80%","max-width","80%"],[3,"ngStyle"],["width","100%","height","100%",3,"data","type"],[2,"display","none",3,"href","download"],["downloadlink",""]],template:function(e,t){1&e&&(i.YNc(0,p,3,2,"div",0),i.YNc(1,y,5,4,"ng-container",1)),2&e&&(i.Q6J("ngIf",!t.blobUrl),i.xp6(1),i.Q6J("ngIf",t.blobUrl))},dependencies:[d.O5,d.PC,d.RF,d.n9,d.ED,r.k,c._,u.W],encapsulation:2})}return SystemObjectPreview})()},1819:(e,t,s)=>{"use strict";s.d(t,{W:()=>ie});var i=s(62242),n=s(14505),l=s(32294),o=s(13278),a=s(25547),d=s(55329),r=s(62422),c=s(26625),u=s(7763),m=s(54021),g=s(44755),h=s(95030),p=s(61553),f=s(82995),b=s(83463),_=s(46449),v=s(84211),y=s(96268),x=s(94845);function w(e,t){if(1&e&&i._UZ(0,"system-label",45),2&e){const e=i.oxw();i.Q6J("label","LBL_"+e.getPrefValue("distance_unit_system"))}}function Z(e,t){1&e&&i._UZ(0,"option")}function T(e,t){1&e&&i._UZ(0,"option")}function C(e,t){if(1&e&&(i.TgZ(0,"option",46),i._uU(1),i.qZA()),2&e){const e=t.$implicit;i.Q6J("value",e.value),i.xp6(1),i.hij(" ",e.name," ")}}function k(e,t){1&e&&i._UZ(0,"option")}function A(e,t){if(1&e&&(i.TgZ(0,"option",46),i._uU(1),i.qZA()),2&e){const e=t.$implicit;i.Q6J("value",e.value),i.xp6(1),i.hij(" ",e.name," ")}}function L(e,t){if(1&e&&(i.ynx(0),i._uU(1),i.BQk()),2&e){const e=t.$implicit,s=i.oxw();i.xp6(1),i.hij(" ",e.id==s.getPrefValue("currency")?e.name:""," ")}}function I(e,t){1&e&&i._UZ(0,"option")}function S(e,t){if(1&e&&(i.TgZ(0,"option",46),i._uU(1),i.qZA()),2&e){const e=t.$implicit;i.Q6J("value",e.id),i.xp6(1),i.hij(" ",e.name," ")}}function M(e,t){1&e&&i._UZ(0,"option")}function J(e,t){if(1&e&&(i.TgZ(0,"option",46),i._uU(1),i.qZA()),2&e){const e=t.$implicit;i.Q6J("value",e),i.xp6(1),i.hij(" ",e," ")}}function O(e,t){if(1&e&&i._UZ(0,"option",47),2&e){const e=i.oxw();i.Q6J("selected",!e.numberDelimitation)}}function N(e,t){if(1&e&&(i.TgZ(0,"option",48),i._uU(1),i.qZA()),2&e){const e=t.$implicit,s=i.oxw();i.Q6J("ngValue",e)("selected",s.numberDelimitation===e),i.xp6(1),i.hij(" ",e.show," ")}}function F(e,t){1&e&&i._UZ(0,"option")}function q(e,t){if(1&e&&(i.TgZ(0,"option",46),i._uU(1),i.qZA()),2&e){const e=t.$implicit;i.Q6J("value",e),i.xp6(1),i.hij(" ",e," ")}}function E(e,t){1&e&&i._UZ(0,"option")}function Y(e,t){if(1&e&&(i.TgZ(0,"option",46),i._uU(1),i.qZA()),2&e){const e=t.$implicit;i.Q6J("value",e),i.xp6(1),i.hij(" ",e," ")}}function D(e,t){1&e&&i._UZ(0,"option")}function U(e,t){if(1&e&&(i.TgZ(0,"option",46),i._uU(1),i.qZA()),2&e){const e=t.$implicit;i.Q6J("value",e.name),i.xp6(1),i.Oqu(e.example)}}function Q(e,t){1&e&&i._UZ(0,"system-label",34)}function R(e,t){1&e&&i._UZ(0,"system-label",36)}function j(e,t){1&e&&i._UZ(0,"option")}function B(e,t){1&e&&i._UZ(0,"option")}function G(e,t){if(1&e&&(i.TgZ(0,"option",46),i._UZ(1,"system-label",45),i.qZA()),2&e){const e=t.$implicit;i.Q6J("value",e),i.xp6(1),i.Q6J("label",("LBL_"+e).toUpperCase())}}function P(e,t){1&e&&i._UZ(0,"option")}function H(e,t){if(1&e&&(i.TgZ(0,"option",46),i._uU(1),i._UZ(2,"system-label",49),i.qZA()),2&e){const e=t.$implicit;i.Q6J("value",e),i.xp6(1),i.hij(" ",e," ")}}function z(e,t){1&e&&i._UZ(0,"option")}function V(e,t){if(1&e&&(i.TgZ(0,"option",50),i._uU(1),i.qZA()),2&e){const e=t.$implicit,s=i.oxw();i.Q6J("value",e)("disabled",s.preferences.calendar_day_end_hour<=e),i.xp6(1),i.hij(" ",e," ")}}function $(e,t){1&e&&i._UZ(0,"option")}function K(e,t){if(1&e&&(i.TgZ(0,"option",50),i._uU(1),i.qZA()),2&e){const e=t.$implicit,s=i.oxw();i.Q6J("value",e)("disabled",s.preferences.calendar_day_start_hour>=e),i.xp6(1),i.hij(" ",e," ")}}function X(e,t){if(1&e&&i._UZ(0,"system-label",45),2&e){const e=i.oxw();i.Q6J("label",e.display_reminderTime)}}const W=function(e){return{reminder_time:e}},ee=function(e){return{module:"Calls",id:"",data:e}},te=function(e){return{hidelabel:!0,showEmptyOption:e}},se=function(e){return{fieldname:"reminder_time",fieldconfig:e}};let ie=(()=>{class SystemPreferencesPanel{backend;view;toast;currency;language;userpreferences;configurationService;currencySignificantDigitsList=["1","2","3","4","5","6"];thousandDelimiterList=[",","."];timeFormatList=[{name:moment().format("HH:mm"),value:"H:i"},{name:moment().format("hh:mma"),value:"h:ia"},{name:moment().format("hh:mmA"),value:"h:iA"},{name:moment().format("hh:mm a"),value:"h:i a"},{name:moment().format("hh:mm A"),value:"h:i A"},{name:moment().format("HH.mm"),value:"H.i"},{name:moment().format("hh.mma"),value:"h.ia"},{name:moment().format("hh.mmA"),value:"h.iA"},{name:moment().format("hh.mm a"),value:"h.i a"},{name:moment().format("hh.mm A"),value:"h.i A"}];dateFormatList=[{name:moment().format("YYYY-MM-DD"),value:"Y-m-d"},{name:moment().format("MM-DD-YYYY"),value:"m-d-Y"},{name:moment().format("DD-MM-YYYY"),value:"d-m-Y"},{name:moment().format("Y/MM/DD"),value:"Y/m/d"},{name:moment().format("MM/DD/YYYY"),value:"m/d/Y"},{name:moment().format("DD/MM/YYYY"),value:"d/m/Y"},{name:moment().format("YYYY.MM.DD"),value:"Y.m.d"},{name:moment().format("DD.MM.YYYY"),value:"d.m.Y"},{name:moment().format("MM.DD.YYYY"),value:"m.d.Y"}];currencyList=[];preferences={};weekDayStartList=["Sunday","Monday"];weekDaysCountList=[5,6,7];dayHoursList=[];reminderTimeOptions={"-1":"LBL_REMINDER_NONE",60:"LBL_REMINDER_1MINUTE",300:"LBL_REMINDER_5MINUTES",600:"LBL_REMINDER_10MINUTES",900:"LBL_REMINDER_15MINUTES",1800:"LBL_REMINDER_30MINUTES",3600:"LBL_REMINDER_1HOUR",7200:"LBL_REMINDER_2HOURS",10800:"LBL_REMINDER_3HOURS",18e3:"LBL_REMINDER_5HOURS",86400:"LBL_REMINDER_1DAY"};exportDelimiterList=[",",";"];charsetList=["BIG-5","CP1251","CP1252","EUC-CN","EUC-JP","EUC-KR","EUC-TW","ISO-2022-JP","ISO-2022-KR","ISO-8859-1","ISO-8859-2","ISO-8859-3","ISO-8859-4","ISO-8859-5","ISO-8859-6","ISO-8859-7","ISO-8859-8","ISO-8859-9","ISO-8859-10","ISO-8859-13","ISO-8859-14","ISO-8859-15","KOI8-R","KOI8-U","SJIS","UTF-8"];numberDelimitationsList=[{show:"1.000.000,00",num_grp_sep:".",dec_sep:","},{show:"1,000,000.00",num_grp_sep:",",dec_sep:"."},{show:"1 000 000,00",num_grp_sep:" ",dec_sep:","}];nameFormats=[];display_name;get numberDelimitation(){const e=this.numberDelimitationsList.find((e=>e.dec_sep==this.preferences.dec_sep&&e.num_grp_sep==this.preferences.num_grp_sep));return e||void 0}set numberDelimitation(e){this.preferences.dec_sep=e.dec_sep,this.preferences.num_grp_sep=e.num_grp_sep,this.setDisplay_numberDelimitation()}display_dateFormat;display_timeFormat;display_reminderTime;display_numberDelimitation;isPersonalContext=!1;defaultPreferences;preferencesNames=["calendar_day_start_hour","calendar_day_end_hour","currency","datef","export_charset","locale_name_format","dec_sep","currency_significant_digits","distance_unit_system","export_delimiter","help_icon","home_assistant","num_grp_sep","reminder_time","timef","timezone","week_day_start","week_days_count"];isLoading=!1;constructor(e,t,s,i,n,l,o){this.backend=e,this.view=t,this.toast=s,this.currency=i,this.language=n,this.userpreferences=l,this.configurationService=o,this.setInitialValues()}ngOnInit(){this.setDisplayValues()}ngOnChanges(){this.preferences&&this.setDisplayValues()}setDisplayValues(){this.setDisplay_reminderTime(),this.setDisplay_dateFormat(),this.setDisplay_timeFormat(),this.setDisplay_name(),this.setDisplay_numberDelimitation()}prefChanged(){}setInitialValues(){this.view.isEditable=!0,this.createNameFormats(),this.currencyList=this.currency.getCurrencies();for(let e=0;e<24;e++)this.dayHoursList.push(e);this.defaultPreferences=this.configurationService.getData("defaultuserpreferences")}createNameFormats(){const e={t:"LBL_LOCALE_NAME_EXAMPLE_TITLE",f:"LBL_LOCALE_NAME_EXAMPLE_FIRST",l:"LBL_LOCALE_NAME_EXAMPLE_LAST",s:"LBL_LOCALE_NAME_EXAMPLE_SALUTATION",d:"LBL_LOCALE_NAME_EXAMPLE_DEGREE_BEFORE",a:"LBL_LOCALE_NAME_EXAMPLE_DEGREE_AFTER"};this.nameFormats=["s f l","f l","s l","l, s f","l, f","s l, f","l s f","l f s","s d f l a"].map((t=>({name:t,example:t.replace(/t|f|l|s|d|a/g,(t=>this.language.getLabel(e[t])))})))}setDisplay_dateFormat(){const e=this.getPrefValue("datef");this.display_dateFormat=e?moment().format(e.replace("Y","YYYY").replace("m","MM").replace("d","DD")):""}setDisplay_timeFormat(){const e=this.getPrefValue("timef");this.display_timeFormat=e?moment().format(e.replace("H","HH").replace("h","hh").replace("i","mm")):""}setDisplay_reminderTime(){const e=this.getPrefValue("reminder_time");this.display_reminderTime=e?this.reminderTimeOptions[e]:""}setDisplay_numberDelimitation(){const e=this.getPrefValue("_numberDelimitation");this.display_numberDelimitation=e?e.show:""}setDisplay_name(){this.display_name="";const e=this.getPrefValue("locale_name_format");e&&this.nameFormats&&this.nameFormats.some((t=>{if(e===t.name)return this.display_name=t.example,!0}))}getPrefValue(e){if("_numberDelimitation"!==e)return this.prefValueIsGlobalFallback(e)?this.defaultPreferences[e]:this.preferences[e];{let t;return t=this.prefValueIsGlobalFallback(e)?this.numberDelimitationsList.find((e=>e.dec_sep==this.defaultPreferences.dec_sep&&e.num_grp_sep==this.defaultPreferences.num_grp_sep)):this.numberDelimitationsList.find((e=>e.dec_sep==this.preferences.dec_sep&&e.num_grp_sep==this.preferences.num_grp_sep)),t||void 0}}prefValueIsGlobalFallback(e){return!(!this.isPersonalContext||!this.defaultPreferences)&&("_numberDelimitation"!==e?!this.isSet(this.preferences[e])&&this.isSet(this.defaultPreferences[e]):(!this.isSet(this.preferences.num_grp_sep)||!this.isSet(this.preferences.dec_sep))&&this.isSet(this.defaultPreferences.num_grp_sep)&&this.isSet(this.defaultPreferences.dec_sep))}isSet(e){return void 0!==e&&("string"!=typeof e||0!==e.length)}atLeastOnePrefMissing(){return this.preferencesNames.some((e=>!this.isSet(this.preferences[e])))}reminderTimeChanged(e){this.preferences.reminder_time=e.reminder_time,this.setDisplay_reminderTime()}static ɵfac=function(e){return new(e||SystemPreferencesPanel)(i.Y36(n.y),i.Y36(l.e),i.Y36(o.A),i.Y36(a.A),i.Y36(d.d),i.Y36(r.z),i.Y36(c.C))};static ɵcmp=i.Xpm({type:SystemPreferencesPanel,selectors:[["system-preferences-panel"]],inputs:{preferences:"preferences",isPersonalContext:"isPersonalContext"},features:[i.TTD],decls:141,vars:90,consts:[[3,"system-overlay-loading-spinner"],["tabtitle","LBL_LOCALE_PREFERENCES",3,"collapsible"],[1,"slds-grid","slds-grid--align-spread"],["itemlabel","LBL_TIMEZONE",1,"slds-size--1-of-4"],[3,"global"],[3,"ngModel","denyEmpty","ngModelChange"],["itemlabel","LBL_DISTANCE_UNIT_SYSTEM",1,"slds-size--1-of-4"],[3,"label",4,"ngIf"],[1,"slds-select_container"],[1,"slds-select",3,"ngModel","ngModelChange"],[4,"ngIf"],["value","METRIC"],["label","LBL_METRIC"],["value","IMPERIAL"],["label","LBL_IMPERIAL"],["itemlabel","LBL_DATE_FORMAT",1,"slds-size--1-of-4"],[3,"value",4,"ngFor","ngForOf"],["itemlabel","LBL_TIME_FORMAT",1,"slds-size--1-of-4"],["itemlabel","LBL_CURRENCY",1,"slds-size--2-of-5"],[1,"slds-form-element__static"],[4,"ngFor","ngForOf"],["itemlabel","LBL_DECIMAL_DIGITS",1,"slds-size--1-of-5"],["itemlabel","LBL_NUMBER_FORMAT",1,"slds-size--2-of-5"],[3,"selected",4,"ngIf"],[3,"ngValue","selected",4,"ngFor","ngForOf"],["tabtitle","LBL_EXPORT_PREFERENCES",3,"collapsible"],["itemlabel","LBL_EXPORT_DELIMITER",1,"slds-size--1-of-2"],["itemlabel","LBL_EXPORT_CHARSET",1,"slds-size--1-of-2"],["tabtitle","LBL_OTHER_PREFERENCES",3,"collapsible"],["itemlabel","LBL_NAME_FORMAT",1,"slds-size--1-of-2"],["itemlabel","LBL_HELP_ICON",1,"slds-size--1-of-2"],["label","LBL_VISIBLE",4,"ngIf"],["label","LBL_HIDDEN",4,"ngIf"],["value","visible"],["label","LBL_VISIBLE"],["value","hidden"],["label","LBL_HIDDEN"],["tabtitle","LBL_CALENDAR_PREFERENCES",3,"collapsible"],["itemlabel","LBL_WEEK_START_DAY",1,"slds-size--1-of-4"],["itemlabel","LBL_WEEK_DAYS_COUNT",1,"slds-size--1-of-4"],["itemlabel","LBL_DAY_START_HOUR",1,"slds-size--1-of-4"],[3,"value","disabled",4,"ngFor","ngForOf"],["itemlabel","LBL_DAY_END_HOUR",1,"slds-size--1-of-4"],["itemlabel","LBL_DEFAULT_REMINDER_TIME",1,"slds-size--1-of-4"],["component","fieldActivityReminder",3,"system-model-provider","componentattributes","data$"],[3,"label"],[3,"value"],[3,"selected"],[3,"ngValue","selected"],["label","LBL_DAYS"],[3,"value","disabled"]],template:function(e,t){1&e&&(i.TgZ(0,"div",0)(1,"system-collapsable-tab",1)(2,"div",2)(3,"system-preferences-panel-item",3)(4,"system-preferences-panel-item-display",4),i._uU(5),i.qZA(),i.TgZ(6,"system-preferences-panel-item-edit")(7,"system-input-timezone",5),i.NdJ("ngModelChange",(function(e){return t.preferences.timezone=e})),i.qZA()()(),i.TgZ(8,"system-preferences-panel-item",6)(9,"system-preferences-panel-item-display",4),i.YNc(10,w,1,1,"system-label",7),i.qZA(),i.TgZ(11,"system-preferences-panel-item-edit")(12,"div",8)(13,"select",9),i.NdJ("ngModelChange",(function(e){return t.preferences.distance_unit_system=e}))("ngModelChange",(function(){return t.prefChanged()})),i.YNc(14,Z,1,0,"option",10),i.TgZ(15,"option",11),i._UZ(16,"system-label",12),i.qZA(),i.TgZ(17,"option",13),i._UZ(18,"system-label",14),i.qZA()()()()(),i.TgZ(19,"system-preferences-panel-item",15)(20,"system-preferences-panel-item-display",4),i._uU(21),i.qZA(),i.TgZ(22,"system-preferences-panel-item-edit")(23,"div",8)(24,"select",9),i.NdJ("ngModelChange",(function(e){return t.preferences.datef=e}))("ngModelChange",(function(){return t.prefChanged(),t.setDisplay_dateFormat()})),i.YNc(25,T,1,0,"option",10),i.YNc(26,C,2,2,"option",16),i.qZA()()()(),i.TgZ(27,"system-preferences-panel-item",17)(28,"system-preferences-panel-item-display",4),i._uU(29),i.qZA(),i.TgZ(30,"system-preferences-panel-item-edit")(31,"div",8)(32,"select",9),i.NdJ("ngModelChange",(function(e){return t.preferences.timef=e}))("ngModelChange",(function(){return t.prefChanged(),t.setDisplay_timeFormat()})),i.YNc(33,k,1,0,"option",10),i.YNc(34,A,2,2,"option",16),i.qZA()()()()(),i.TgZ(35,"div",2)(36,"system-preferences-panel-item",18)(37,"system-preferences-panel-item-display",4)(38,"span",19),i.YNc(39,L,2,1,"ng-container",20),i.qZA()(),i.TgZ(40,"system-preferences-panel-item-edit")(41,"div",8)(42,"select",9),i.NdJ("ngModelChange",(function(e){return t.preferences.currency=e}))("ngModelChange",(function(){return t.prefChanged()})),i.YNc(43,I,1,0,"option",10),i.YNc(44,S,2,2,"option",16),i.qZA()()()(),i.TgZ(45,"system-preferences-panel-item",21)(46,"system-preferences-panel-item-display",4),i._uU(47),i.qZA(),i.TgZ(48,"system-preferences-panel-item-edit")(49,"div",8)(50,"select",9),i.NdJ("ngModelChange",(function(e){return t.preferences.currency_significant_digits=e}))("ngModelChange",(function(){return t.prefChanged()})),i.YNc(51,M,1,0,"option",10),i.YNc(52,J,2,2,"option",16),i.qZA()()()(),i.TgZ(53,"system-preferences-panel-item",22)(54,"system-preferences-panel-item-display",4),i._uU(55),i.qZA(),i.TgZ(56,"system-preferences-panel-item-edit")(57,"div",8)(58,"select",9),i.NdJ("ngModelChange",(function(e){return t.numberDelimitation=e})),i.YNc(59,O,1,1,"option",23),i.YNc(60,N,2,3,"option",24),i.qZA()()()()()(),i.TgZ(61,"system-collapsable-tab",25)(62,"div",2)(63,"system-preferences-panel-item",26)(64,"system-preferences-panel-item-display",4),i._uU(65),i.qZA(),i.TgZ(66,"system-preferences-panel-item-edit")(67,"div",8)(68,"select",9),i.NdJ("ngModelChange",(function(e){return t.preferences.export_delimiter=e}))("ngModelChange",(function(){return t.prefChanged()})),i.YNc(69,F,1,0,"option",10),i.YNc(70,q,2,2,"option",16),i.qZA()()()(),i.TgZ(71,"system-preferences-panel-item",27)(72,"system-preferences-panel-item-display",4),i._uU(73),i.qZA(),i.TgZ(74,"system-preferences-panel-item-edit")(75,"div",8)(76,"select",9),i.NdJ("ngModelChange",(function(e){return t.preferences.export_charset=e}))("ngModelChange",(function(){return t.prefChanged()})),i.YNc(77,E,1,0,"option",10),i.YNc(78,Y,2,2,"option",16),i.qZA()()()()()(),i.TgZ(79,"system-collapsable-tab",28)(80,"div",2)(81,"system-preferences-panel-item",29)(82,"system-preferences-panel-item-display",4),i._uU(83),i.qZA(),i.TgZ(84,"system-preferences-panel-item-edit")(85,"div",8)(86,"select",9),i.NdJ("ngModelChange",(function(e){return t.preferences.locale_name_format=e}))("ngModelChange",(function(){return t.prefChanged(),t.setDisplay_name()})),i.YNc(87,D,1,0,"option",10),i.YNc(88,U,2,2,"option",16),i.qZA()()()(),i.TgZ(89,"system-preferences-panel-item",30)(90,"system-preferences-panel-item-display",4),i.YNc(91,Q,1,0,"system-label",31),i.YNc(92,R,1,0,"system-label",32),i.qZA(),i.TgZ(93,"system-preferences-panel-item-edit")(94,"div",8)(95,"select",9),i.NdJ("ngModelChange",(function(e){return t.preferences.help_icon=e}))("ngModelChange",(function(){return t.prefChanged()})),i.YNc(96,j,1,0,"option",10),i.TgZ(97,"option",33),i._UZ(98,"system-label",34),i.qZA(),i.TgZ(99,"option",35),i._UZ(100,"system-label",36),i.qZA()()()()()()(),i.TgZ(101,"system-collapsable-tab",37)(102,"div",2)(103,"system-preferences-panel-item",38)(104,"system-preferences-panel-item-display",4),i._uU(105),i.qZA(),i.TgZ(106,"system-preferences-panel-item-edit")(107,"div",8)(108,"select",9),i.NdJ("ngModelChange",(function(e){return t.preferences.week_day_start=e}))("ngModelChange",(function(){return t.prefChanged()})),i.YNc(109,B,1,0,"option",10),i.YNc(110,G,2,2,"option",16),i.qZA()()()(),i.TgZ(111,"system-preferences-panel-item",39)(112,"system-preferences-panel-item-display",4),i._uU(113),i.qZA(),i.TgZ(114,"system-preferences-panel-item-edit")(115,"div",8)(116,"select",9),i.NdJ("ngModelChange",(function(e){return t.preferences.week_days_count=e}))("ngModelChange",(function(){return t.prefChanged()})),i.YNc(117,P,1,0,"option",10),i.YNc(118,H,3,2,"option",16),i.qZA()()()(),i.TgZ(119,"system-preferences-panel-item",40)(120,"system-preferences-panel-item-display",4),i._uU(121),i.qZA(),i.TgZ(122,"system-preferences-panel-item-edit")(123,"div",8)(124,"select",9),i.NdJ("ngModelChange",(function(e){return t.preferences.calendar_day_start_hour=e}))("ngModelChange",(function(){return t.prefChanged()})),i.YNc(125,z,1,0,"option",10),i.YNc(126,V,2,3,"option",41),i.qZA()()()(),i.TgZ(127,"system-preferences-panel-item",42)(128,"system-preferences-panel-item-display",4),i._uU(129),i.qZA(),i.TgZ(130,"system-preferences-panel-item-edit")(131,"div",8)(132,"select",9),i.NdJ("ngModelChange",(function(e){return t.preferences.calendar_day_end_hour=e}))("ngModelChange",(function(){return t.prefChanged()})),i.YNc(133,$,1,0,"option",10),i.YNc(134,K,2,3,"option",41),i.qZA()()()()(),i.TgZ(135,"div",2)(136,"system-preferences-panel-item",43)(137,"system-preferences-panel-item-display",4),i.YNc(138,X,1,1,"system-label",7),i.qZA(),i.TgZ(139,"system-preferences-panel-item-edit")(140,"system-dynamic-component",44),i.NdJ("data$",(function(e){return t.reminderTimeChanged(e)})),i.qZA()()()()()()),2&e&&(i.Q6J("system-overlay-loading-spinner",t.isLoading),i.xp6(1),i.Q6J("collapsible",!1),i.xp6(3),i.Q6J("global",t.prefValueIsGlobalFallback("timezone")),i.xp6(1),i.hij(" ",t.getPrefValue("timezone")," "),i.xp6(2),i.Q6J("ngModel",t.preferences.timezone)("denyEmpty",!t.isPersonalContext),i.xp6(2),i.Q6J("global",t.prefValueIsGlobalFallback("distance_unit_system")),i.xp6(1),i.Q6J("ngIf",!!t.getPrefValue("distance_unit_system")),i.xp6(3),i.Q6J("ngModel",t.preferences.distance_unit_system),i.xp6(1),i.Q6J("ngIf",t.isPersonalContext),i.xp6(6),i.Q6J("global",t.prefValueIsGlobalFallback("datef")),i.xp6(1),i.hij(" ",t.display_dateFormat," "),i.xp6(3),i.Q6J("ngModel",t.preferences.datef),i.xp6(1),i.Q6J("ngIf",t.isPersonalContext),i.xp6(1),i.Q6J("ngForOf",t.dateFormatList),i.xp6(2),i.Q6J("global",t.prefValueIsGlobalFallback("timef")),i.xp6(1),i.hij(" ",t.display_timeFormat," "),i.xp6(3),i.Q6J("ngModel",t.preferences.timef),i.xp6(1),i.Q6J("ngIf",t.isPersonalContext),i.xp6(1),i.Q6J("ngForOf",t.timeFormatList),i.xp6(3),i.Q6J("global",t.prefValueIsGlobalFallback("currency")),i.xp6(2),i.Q6J("ngForOf",t.currencyList),i.xp6(3),i.Q6J("ngModel",t.preferences.currency),i.xp6(1),i.Q6J("ngIf",t.isPersonalContext),i.xp6(1),i.Q6J("ngForOf",t.currencyList),i.xp6(2),i.Q6J("global",t.prefValueIsGlobalFallback("currency_significant_digits")),i.xp6(1),i.hij(" ",t.getPrefValue("currency_significant_digits")," "),i.xp6(3),i.Q6J("ngModel",t.preferences.currency_significant_digits),i.xp6(1),i.Q6J("ngIf",t.isPersonalContext),i.xp6(1),i.Q6J("ngForOf",t.currencySignificantDigitsList),i.xp6(2),i.Q6J("global",t.prefValueIsGlobalFallback("_numberDelimitation")),i.xp6(1),i.hij(" ",t.display_numberDelimitation," "),i.xp6(3),i.Q6J("ngModel",t.numberDelimitation),i.xp6(1),i.Q6J("ngIf",t.isPersonalContext),i.xp6(1),i.Q6J("ngForOf",t.numberDelimitationsList),i.xp6(1),i.Q6J("collapsible",!1),i.xp6(3),i.Q6J("global",t.prefValueIsGlobalFallback("export_delimiter")),i.xp6(1),i.hij(" ",t.getPrefValue("export_delimiter")," "),i.xp6(3),i.Q6J("ngModel",t.preferences.export_delimiter),i.xp6(1),i.Q6J("ngIf",t.isPersonalContext),i.xp6(1),i.Q6J("ngForOf",t.exportDelimiterList),i.xp6(2),i.Q6J("global",t.prefValueIsGlobalFallback("export_charset")),i.xp6(1),i.hij(" ",t.getPrefValue("export_charset")," "),i.xp6(3),i.Q6J("ngModel",t.preferences.export_charset),i.xp6(1),i.Q6J("ngIf",t.isPersonalContext),i.xp6(1),i.Q6J("ngForOf",t.charsetList),i.xp6(1),i.Q6J("collapsible",!1),i.xp6(3),i.Q6J("global",t.prefValueIsGlobalFallback("locale_name_format")),i.xp6(1),i.hij(" ",t.display_name," "),i.xp6(3),i.Q6J("ngModel",t.preferences.locale_name_format),i.xp6(1),i.Q6J("ngIf",t.isPersonalContext),i.xp6(1),i.Q6J("ngForOf",t.nameFormats),i.xp6(2),i.Q6J("global",t.prefValueIsGlobalFallback("help_icon")),i.xp6(1),i.Q6J("ngIf","visible"===t.getPrefValue("help_icon")),i.xp6(1),i.Q6J("ngIf","hidden"===t.getPrefValue("help_icon")),i.xp6(3),i.Q6J("ngModel",t.preferences.help_icon),i.xp6(1),i.Q6J("ngIf",t.isPersonalContext),i.xp6(5),i.Q6J("collapsible",!1),i.xp6(3),i.Q6J("global",t.prefValueIsGlobalFallback("week_day_start")),i.xp6(1),i.hij(" ",t.getPrefValue("week_day_start")," "),i.xp6(3),i.Q6J("ngModel",t.preferences.week_day_start),i.xp6(1),i.Q6J("ngIf",t.isPersonalContext),i.xp6(1),i.Q6J("ngForOf",t.weekDayStartList),i.xp6(2),i.Q6J("global",t.prefValueIsGlobalFallback("week_days_count")),i.xp6(1),i.hij(" ",t.getPrefValue("week_days_count")," "),i.xp6(3),i.Q6J("ngModel",t.preferences.week_days_count),i.xp6(1),i.Q6J("ngIf",t.isPersonalContext),i.xp6(1),i.Q6J("ngForOf",t.weekDaysCountList),i.xp6(2),i.Q6J("global",t.prefValueIsGlobalFallback("calendar_day_start_hour")),i.xp6(1),i.hij(" ",t.getPrefValue("calendar_day_start_hour")," "),i.xp6(3),i.Q6J("ngModel",t.preferences.calendar_day_start_hour),i.xp6(1),i.Q6J("ngIf",t.isPersonalContext),i.xp6(1),i.Q6J("ngForOf",t.dayHoursList),i.xp6(2),i.Q6J("global",t.prefValueIsGlobalFallback("calendar_day_end_hour")),i.xp6(1),i.hij(" ",t.getPrefValue("calendar_day_end_hour")," "),i.xp6(3),i.Q6J("ngModel",t.preferences.calendar_day_end_hour),i.xp6(1),i.Q6J("ngIf",t.isPersonalContext),i.xp6(1),i.Q6J("ngForOf",t.dayHoursList),i.xp6(3),i.Q6J("global",t.prefValueIsGlobalFallback("reminder_time")),i.xp6(1),i.Q6J("ngIf",t.display_reminderTime),i.xp6(2),i.Q6J("system-model-provider",i.VKq(84,ee,i.VKq(82,W,t.preferences.reminder_time)))("componentattributes",i.VKq(88,se,i.VKq(86,te,t.isPersonalContext))))},dependencies:[u.u,m._,g.sg,g.O5,h.YN,h.Kr,h.EJ,h.JJ,h.On,p.z,f.T,b._,_.R,v.w,y.f,x.z],encapsulation:2})}return SystemPreferencesPanel})()},84211:(e,t,s)=>{"use strict";s.d(t,{w:()=>m});var i=s(62242),n=s(32294),l=s(55329),o=s(44755),a=s(83463);function d(e,t){1&e&&i.Hsn(0,0,["*ngIf","!view.isEditMode()"])}function r(e,t){1&e&&i.Hsn(0,1,["*ngIf","view.isEditMode()"])}const c=[[["system-preferences-panel-item-display"]],[["system-preferences-panel-item-edit"]]],u=["system-preferences-panel-item-display","system-preferences-panel-item-edit"];let m=(()=>{class SystemPreferencesPanelItem{view;language;itemlabel="";constructor(e,t){this.view=e,this.language=t}static ɵfac=function(e){return new(e||SystemPreferencesPanelItem)(i.Y36(n.e),i.Y36(l.d))};static ɵcmp=i.Xpm({type:SystemPreferencesPanelItem,selectors:[["system-preferences-panel-item"]],inputs:{itemlabel:"itemlabel"},ngContentSelectors:u,decls:5,vars:3,consts:[[1,"slds-form-element","slds-p-around--x-small"],[1,"slds-form-element__label"],[3,"label"],[4,"ngIf"]],template:function(e,t){1&e&&(i.F$t(c),i.TgZ(0,"div",0)(1,"label",1),i._UZ(2,"system-label",2),i.qZA(),i.YNc(3,d,1,0,"ng-content",3),i.YNc(4,r,1,0,"ng-content",3),i.qZA()),2&e&&(i.xp6(2),i.Q6J("label",t.itemlabel),i.xp6(1),i.Q6J("ngIf",!t.view.isEditMode()),i.xp6(1),i.Q6J("ngIf",t.view.isEditMode()))},dependencies:[o.O5,a._],encapsulation:2})}return SystemPreferencesPanelItem})()},96268:(e,t,s)=>{"use strict";s.d(t,{f:()=>c});var i=s(62242),n=s(32294),l=s(44755),o=s(72656),a=s(30034);function d(e,t){1&e&&i._UZ(0,"system-custom-icon",5)}const r=["*"];let c=(()=>{class SystemPreferencesPanelItemDisplay{view;global=!1;constructor(e){this.view=e}static ɵfac=function(e){return new(e||SystemPreferencesPanelItemDisplay)(i.Y36(n.e))};static ɵcmp=i.Xpm({type:SystemPreferencesPanelItemDisplay,selectors:[["system-preferences-panel-item-display"]],inputs:{global:"global"},ngContentSelectors:r,decls:6,vars:2,consts:[[1,"slds-form-element__control","slds-has-divider--bottom","slds-grid","slds-p-vertical--x-small",3,"dblclick"],[1,"slds-form-element__static","slds-grid"],["icon","global","size","x-small","class","slds-p-right--xx-small",4,"ngIf"],[1,"slds-button","slds-button--icon","slds-m-left--xx-small",2,"float","right",3,"click"],[3,"icon"],["icon","global","size","x-small",1,"slds-p-right--xx-small"]],template:function(e,t){1&e&&(i.F$t(),i.TgZ(0,"div",0),i.NdJ("dblclick",(function(){return t.view.setEditMode()})),i.TgZ(1,"span",1),i.YNc(2,d,1,0,"system-custom-icon",2),i.Hsn(3),i.qZA(),i.TgZ(4,"button",3),i.NdJ("click",(function(){return t.view.setEditMode()})),i._UZ(5,"system-button-icon",4),i.qZA()()),2&e&&(i.xp6(2),i.Q6J("ngIf",t.global),i.xp6(3),i.Q6J("icon","edit"))},dependencies:[l.O5,o.J,a.$],styles:[".slds-button--icon[_ngcontent-%COMP%]{color:#eee}.slds-button--icon[_ngcontent-%COMP%]:hover{color:#5b5b5b}"]})}return SystemPreferencesPanelItemDisplay})()},94845:(e,t,s)=>{"use strict";s.d(t,{z:()=>l});var i=s(62242);const n=["*"];let l=(()=>{class SystemPreferencesPanelItemEdit{static ɵfac=function(e){return new(e||SystemPreferencesPanelItemEdit)};static ɵcmp=i.Xpm({type:SystemPreferencesPanelItemEdit,selectors:[["system-preferences-panel-item-edit"]],ngContentSelectors:n,decls:2,vars:0,consts:[[1,"slds-form-element__control"]],template:function(e,t){1&e&&(i.F$t(),i.TgZ(0,"div",0),i.Hsn(1),i.qZA())},encapsulation:2})}return SystemPreferencesPanelItemEdit})()},78026:(e,t,s)=>{"use strict";s.d(t,{J:()=>c});var i=s(62242),n=s(55329),l=s(62422),o=s(44755);function a(e,t){if(1&e&&(i.TgZ(0,"div",3)(1,"span",4),i.Hsn(2),i.qZA(),i.TgZ(3,"strong",5),i._uU(4),i.qZA()()),2&e){const e=i.oxw();i.xp6(4),i.AsE("",e.progressText," ",e.lang.getLabel("LBL_COMPLETED"),"")}}const d=function(e,t){return{"width.%":e,background:t}},r=["*"];let c=(()=>{class SystemProgressBar{lang;userprefs;hideText=!1;color;progress=0;decimals=2;size="medium";total=null;constructor(e,t){this.lang=e,this.userprefs=t}get displayPercents(){return null===this.total}get _progress(){return void 0===this.progress?0:this.progress}get _total(){return void 0===this.total?0:this.total}get progressText(){let e;return e=this.displayPercents?this._progress.toFixed(this.decimals)+" %":this._progress.toFixed(this.decimals)+"/"+this._total.toFixed(this.decimals),e.split(".").join(this.userprefs.toUse.dec_sep)}get progressWidth(){return this.displayPercents?this._progress>100?100:this._progress:(this._progress>this._total?this._total:this._progress)/this._total*100}get sizeClass(){return"slds-progress-bar_"+this.size}static ɵfac=function(e){return new(e||SystemProgressBar)(i.Y36(n.d),i.Y36(l.z))};static ɵcmp=i.Xpm({type:SystemProgressBar,selectors:[["system-progress-bar"]],hostAttrs:[2,"display","block"],inputs:{hideText:"hideText",color:"color",progress:"progress",decimals:"decimals",size:"size",total:"total"},ngContentSelectors:r,decls:4,vars:6,consts:[["class","slds-grid slds-grid_align-spread slds-p-bottom_x-small",4,"ngIf"],[1,"slds-progress-bar","slds-progress-bar_circular",3,"ngClass"],[1,"slds-progress-bar__value",3,"ngStyle"],[1,"slds-grid","slds-grid_align-spread","slds-p-bottom_x-small"],[1,"slds-m-left--xx-small"],[1,"slds-m-right--x-small"]],template:function(e,t){1&e&&(i.F$t(),i.TgZ(0,"div"),i.YNc(1,a,5,2,"div",0),i.TgZ(2,"div",1),i._UZ(3,"span",2),i.qZA()()),2&e&&(i.xp6(1),i.Q6J("ngIf",!t.hideText),i.xp6(1),i.Q6J("ngClass",t.sizeClass),i.xp6(1),i.Q6J("ngStyle",i.WLB(3,d,t.progressWidth,t.color)))},dependencies:[o.mk,o.O5,o.PC],encapsulation:2})}return SystemProgressBar})()},15718:(e,t,s)=>{"use strict";s.d(t,{s:()=>c});var i=s(62242),n=s(44755),l=s(72656);function o(e,t){1&e&&i._UZ(0,"system-button-icon",8),2&e&&i.Q6J("icon","success")}const a=function(e){return{"slds-button--icon slds-progress__marker--icon":e}};function d(e,t){if(1&e&&(i.TgZ(0,"li",5)(1,"button",6),i.YNc(2,o,1,1,"system-button-icon",7),i.qZA()()),2&e){const e=t.$implicit,s=i.oxw();i.Q6J("ngClass",s.getStepClass(e)),i.xp6(1),i.Q6J("ngClass",i.VKq(3,a,s.getStepComplete(e))),i.xp6(1),i.Q6J("ngIf",s.getStepComplete(e))}}const r=function(e){return{"slds-progress--shade":e}};let c=(()=>{class SystemProgressList{step=0;steps=[];_shade=!1;set shade(e){this._shade=!1!==e}constructor(){}getStepClass(e){let t=this.steps.indexOf(e);return t==this.step?"slds-is-active":t<this.step?"slds-is-completed":void 0}getStepComplete(e){return this.steps.indexOf(e)<this.step}get progressBarWidth(){return{width:this.step/(this.steps.length-1)*100+"%"}}static ɵfac=function(e){return new(e||SystemProgressList)};static ɵcmp=i.Xpm({type:SystemProgressList,selectors:[["system-progress-list"]],inputs:{step:"step",steps:"steps",shade:["system-progress-list-shade","shade"]},decls:5,vars:5,consts:[[1,"slds-progress",3,"ngClass"],[1,"slds-progress__list"],["class","slds-progress__item",3,"ngClass",4,"ngFor","ngForOf"],["role","progressbar",1,"slds-progress-bar","slds-progress-bar_x-small"],[1,"slds-progress-bar__value",3,"ngStyle"],[1,"slds-progress__item",3,"ngClass"],[1,"slds-button","slds-progress__marker",3,"ngClass"],[3,"icon",4,"ngIf"],[3,"icon"]],template:function(e,t){1&e&&(i.TgZ(0,"div",0)(1,"ol",1),i.YNc(2,d,3,5,"li",2),i.qZA(),i.TgZ(3,"div",3),i._UZ(4,"div",4),i.qZA()()),2&e&&(i.Q6J("ngClass",i.VKq(3,r,t._shade)),i.xp6(2),i.Q6J("ngForOf",t.steps),i.xp6(2),i.Q6J("ngStyle",t.progressBarWidth))},dependencies:[n.mk,n.sg,n.O5,n.PC,l.J],encapsulation:2})}return SystemProgressList})()},71574:(e,t,s)=>{"use strict";s.d(t,{z:()=>E});var i=s(62242),n=s(95030),l=s(44755),o=s(24817),a=s(95698),d=s(45179),r=s(44044),c=s(42067),u=s(4154),m=s(55329),g=s(66550),h=s(26625),p=s(55710),f=s(93441),b=s(50151),_=s(72656),v=s(80121);const y=["ckEditor"];function x(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"ul",9)(1,"li")(2,"button",30),i.NdJ("click",(function(){i.CHM(e);const t=i.oxw(2);return i.KtG(t.executeCommand("undo"))})),i._UZ(3,"system-button-icon",31),i.TgZ(4,"span",32),i._uU(5,"undo"),i.qZA()()(),i.TgZ(6,"li")(7,"button",25),i.NdJ("click",(function(){i.CHM(e);const t=i.oxw(2);return i.KtG(t.executeCommand("redo"))})),i._UZ(8,"system-button-icon",33),i.TgZ(9,"span",32),i._uU(10,"redo"),i.qZA()()()()}if(2&e){const e=i.oxw(2);i.xp6(2),i.Q6J("title",e.language.getLabel("LBL_UNDO")),i.xp6(5),i.Q6J("title",e.language.getLabel("LBL_REDO"))}}function w(e,t){if(1&e&&(i.TgZ(0,"option",47),i._uU(1),i.qZA()),2&e){const e=t.$implicit;i.s9C("value",e.id),i.xp6(1),i.Oqu(e.display)}}function Z(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"div",34)(1,"div",35)(2,"div",36)(3,"div",37)(4,"div",38)(5,"select",39),i.NdJ("ngModelChange",(function(t){i.CHM(e);const s=i.oxw(2);return i.KtG(s.block=t)}))("change",(function(){i.CHM(e);const t=i.oxw(2);return i.KtG(t.heading(t.block))})),i.TgZ(6,"option",40),i._uU(7,"Heading 2"),i.qZA(),i.TgZ(8,"option",41),i._uU(9,"Heading 3"),i.qZA(),i.TgZ(10,"option",42),i._uU(11,"Heading 4"),i.qZA(),i.TgZ(12,"option",43),i._uU(13,"Paragraph"),i.qZA()()()()()(),i.TgZ(14,"div",35)(15,"div",36)(16,"div",37)(17,"div",38)(18,"select",44),i.NdJ("change",(function(t){i.CHM(e);const s=i.oxw(2);return i.KtG(s.customStyle(t.target.value))})),i.TgZ(19,"option",45),i._uU(20,"—"),i.qZA(),i.YNc(21,w,2,2,"option",46),i.qZA()()()()()()}if(2&e){const e=i.oxw(2);i.xp6(5),i.Q6J("ngModel",e.block),i.xp6(16),i.Q6J("ngForOf",e.customStyleDefinitions)}}const T=function(e){return{selected:e}};function C(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"li",62)(1,"span",63),i.NdJ("click",(function(){const t=i.CHM(e).$implicit,s=i.oxw().$implicit,n=i.oxw(3);return i.KtG(n.selectTable(s,t))})),i._UZ(2,"span",64),i.qZA()()}if(2&e){const e=t.$implicit,s=i.oxw().$implicit,n=i.oxw(3);i.xp6(1),i.Q6J("ngClass",i.VKq(1,T,s<=n.selectedRow&&e<=n.selectedColumn))}}const k=function(){return[1,2,3,4,5,6,7,8,9,10]};function A(e,t){1&e&&(i.TgZ(0,"li")(1,"ul",60),i.YNc(2,C,3,3,"li",61),i.qZA()()),2&e&&(i.xp6(2),i.Q6J("ngForOf",i.DdM(1,k)))}function L(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"div")(1,"section",48)(2,"div",49)(3,"div",50)(4,"div",51)(5,"div",52),i._uU(6),i.qZA(),i.TgZ(7,"div",53)(8,"ul"),i.YNc(9,A,3,2,"li",54),i.qZA()(),i._UZ(10,"div",55),i.qZA()()(),i.TgZ(11,"footer",56)(12,"div",57)(13,"button",58),i.NdJ("click",(function(){i.CHM(e);const t=i.oxw(2);return i.KtG(t.cancelTable())})),i._uU(14,"Cancel"),i.qZA(),i.TgZ(15,"button",59),i.NdJ("click",(function(){i.CHM(e);const t=i.oxw(2);return i.KtG(t.insertTable())})),i._uU(16,"Done"),i.qZA()()()()()}if(2&e){const e=i.oxw(2);i.xp6(6),i.AsE("",e.selectedRow," × ",e.selectedColumn,""),i.xp6(3),i.Q6J("ngForOf",i.DdM(3,k))}}function I(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"li")(1,"button",25),i.NdJ("click",(function(){i.CHM(e);const t=i.oxw(3);return i.KtG(t.openMediaFilePicker())})),i._UZ(2,"system-button-icon",69),i.qZA()()}if(2&e){const e=i.oxw(3);i.xp6(1),i.Q6J("title",e.language.getLabel("LBL_NEW_IMAGE"))}}function S(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"ul",9)(1,"li")(2,"button",25),i.NdJ("click",(function(){i.CHM(e);const t=i.oxw(2);return i.KtG(t.insertImage())})),i._UZ(3,"system-button-icon",65),i.qZA()(),i.YNc(4,I,3,1,"li",18),i.TgZ(5,"li")(6,"button",66),i.NdJ("click",(function(){i.CHM(e);const t=i.oxw(2);return i.KtG(t.addVideo())})),i._UZ(7,"system-button-icon",67),i.qZA()(),i.TgZ(8,"li")(9,"button",25),i.NdJ("click",(function(){i.CHM(e);const t=i.oxw(2);return i.KtG(t.addCodeSnippet())})),i._UZ(10,"system-button-icon",68),i.qZA()()()}if(2&e){const e=i.oxw(2);i.xp6(2),i.Q6J("title",e.language.getLabel("LBL_NEW_IMAGE")),i.xp6(2),i.Q6J("ngIf",e.useMedialFile),i.xp6(2),i.Q6J("title",e.language.getLabel("LBL_ADD_VIDEO")),i.xp6(3),i.Q6J("title",e.language.getLabel("LBL_ADD_CODE_SNIPPET"))}}function M(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"ul",9)(1,"li")(2,"button",66),i.NdJ("click",(function(){i.CHM(e);const t=i.oxw(2);return i.KtG(t.openTemplateVariableHelper())})),i._UZ(3,"system-button-icon",70),i.qZA()()()}if(2&e){const e=i.oxw(2);i.xp6(2),i.Q6J("title",e.language.getLabel("LBL_TEMPLATE_VARIABLE_HELPER"))}}function J(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"ul",9)(1,"li")(2,"button",71),i.NdJ("click",(function(){i.CHM(e);const t=i.oxw(2);return i.KtG(t.openSourceEditor())})),i._UZ(3,"system-button-icon",72),i.qZA()(),i.TgZ(4,"li")(5,"button",25),i.NdJ("click",(function(){i.CHM(e);const t=i.oxw(2);return i.KtG(t.toggleFullscreen())})),i._UZ(6,"system-button-icon",73),i.qZA()()()}if(2&e){const e=i.oxw(2);i.xp6(5),i.Q6J("title",e.language.getLabel("LBL_EXPAND")),i.xp6(1),i.Q6J("icon",e.expandIcon)}}const O=function(e){return{"slds-active":e}};function N(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"div",6),i.YNc(1,x,11,2,"ul",7),i.YNc(2,Z,22,2,"div",8),i.TgZ(3,"ul",9)(4,"li")(5,"button",10),i.NdJ("click",(function(){i.CHM(e);const t=i.oxw();return i.KtG(t.executeCommand("bold"))})),i._UZ(6,"system-button-icon",11),i.qZA()(),i.TgZ(7,"li")(8,"button",10),i.NdJ("click",(function(){i.CHM(e);const t=i.oxw();return i.KtG(t.executeCommand("italic"))})),i._UZ(9,"system-button-icon",12),i.qZA()(),i.TgZ(10,"li")(11,"button",10),i.NdJ("click",(function(){i.CHM(e);const t=i.oxw();return i.KtG(t.executeCommand("underline"))})),i._UZ(12,"system-button-icon",13),i.qZA()(),i.TgZ(13,"li")(14,"button",10),i.NdJ("click",(function(){i.CHM(e);const t=i.oxw();return i.KtG(t.executeCommand("strikethrough"))})),i._UZ(15,"system-button-icon",14),i.qZA()()(),i.TgZ(16,"ul",9)(17,"li")(18,"button",10),i.NdJ("click",(function(){i.CHM(e);const t=i.oxw();return i.KtG(t.executeCommand("bulletedList"))})),i._UZ(19,"system-button-icon",15),i.qZA()(),i.TgZ(20,"li")(21,"button",10),i.NdJ("click",(function(){i.CHM(e);const t=i.oxw();return i.KtG(t.executeCommand("numberedList"))})),i._UZ(22,"system-button-icon",16),i.qZA()(),i.TgZ(23,"li")(24,"button",10),i.NdJ("click",(function(){i.CHM(e);const t=i.oxw();return i.KtG(t.openTable())})),i._UZ(25,"system-button-icon",17),i.qZA(),i.YNc(26,L,17,4,"div",18),i.qZA()(),i.TgZ(27,"ul",9)(28,"li")(29,"button",10),i.NdJ("click",(function(){i.CHM(e);const t=i.oxw();return i.KtG(t.executeCommand("indent"))})),i._UZ(30,"system-button-icon",19),i.qZA()(),i.TgZ(31,"li")(32,"button",10),i.NdJ("click",(function(){i.CHM(e);const t=i.oxw();return i.KtG(t.executeCommand("outdent"))})),i._UZ(33,"system-button-icon",20),i.qZA()()(),i.TgZ(34,"ul",9)(35,"li")(36,"button",10),i.NdJ("click",(function(){i.CHM(e);const t=i.oxw();return i.KtG(t.alignment("left"))})),i._UZ(37,"system-button-icon",21),i.qZA()(),i.TgZ(38,"li")(39,"button",10),i.NdJ("click",(function(){i.CHM(e);const t=i.oxw();return i.KtG(t.alignment("center"))})),i._UZ(40,"system-button-icon",22),i.qZA()(),i.TgZ(41,"li")(42,"button",10),i.NdJ("click",(function(){i.CHM(e);const t=i.oxw();return i.KtG(t.alignment("right"))})),i._UZ(43,"system-button-icon",23),i.qZA()(),i.TgZ(44,"li")(45,"button",10),i.NdJ("click",(function(){i.CHM(e);const t=i.oxw();return i.KtG(t.alignment("justify"))})),i._UZ(46,"system-button-icon",24),i.qZA()()(),i.TgZ(47,"ul",9)(48,"li")(49,"button",25),i.NdJ("click",(function(){i.CHM(e);const t=i.oxw();return i.KtG(t.insertLink())})),i._UZ(50,"system-button-icon",26),i.qZA()(),i.TgZ(51,"li")(52,"button",25),i.NdJ("click",(function(){i.CHM(e);const t=i.oxw();return i.KtG(t.executeCommand("unlink"))})),i._UZ(53,"system-button-icon",27),i.qZA()()(),i.YNc(54,S,11,4,"ul",7),i.YNc(55,M,4,1,"ul",7),i.TgZ(56,"ul",9)(57,"li")(58,"button",25),i.NdJ("click",(function(){i.CHM(e);const t=i.oxw();return i.KtG(t.executeCommand("removeFormat"))})),i._UZ(59,"system-button-icon",28),i.qZA()()(),i.YNc(60,J,7,2,"ul",7),i.TgZ(61,"ul",29),i.Hsn(62),i.qZA()()}if(2&e){const e=i.oxw();i.xp6(1),i.Q6J("ngIf",e.extendedmode),i.xp6(1),i.Q6J("ngIf",e.extendedmode),i.xp6(3),i.Q6J("title",e.language.getLabel("LBL_BOLD"))("ngClass",i.VKq(35,O,e.commandIsActive("bold"))),i.xp6(3),i.Q6J("title",e.language.getLabel("LBL_ITALIC"))("ngClass",i.VKq(37,O,e.commandIsActive("italic"))),i.xp6(3),i.Q6J("title",e.language.getLabel("LBL_UNDERLINE"))("ngClass",i.VKq(39,O,e.commandIsActive("underline"))),i.xp6(3),i.Q6J("title",e.language.getLabel("LBL_STRIKETHROUGH"))("ngClass",i.VKq(41,O,e.commandIsActive("strikethrough"))),i.xp6(4),i.Q6J("title",e.language.getLabel("LBL_BULLETED_LIST"))("ngClass",i.VKq(43,O,e.commandIsActive("bulletedList"))),i.xp6(3),i.Q6J("title",e.language.getLabel("LBL_NUMBERED_LIST"))("ngClass",i.VKq(45,O,e.commandIsActive("numberedList"))),i.xp6(3),i.Q6J("title",e.language.getLabel("LBL_TABLE"))("ngClass",i.VKq(47,O,e.commandIsActive("insertTable"))),i.xp6(2),i.Q6J("ngIf",e.isShow),i.xp6(3),i.Q6J("title",e.language.getLabel("LBL_TEXT_INDENT"))("ngClass",i.VKq(49,O,e.commandIsActive("indentBlock"))),i.xp6(3),i.Q6J("title",e.language.getLabel("LBL_TEXT_OUTDENT"))("ngClass",i.VKq(51,O,e.commandIsActive("outdentBlock"))),i.xp6(4),i.Q6J("title",e.language.getLabel("LBL_LEFT_ALIGN"))("ngClass",i.VKq(53,O,e.commandIsActive("justifyLeft"))),i.xp6(3),i.Q6J("title",e.language.getLabel("LBL_CENTER_ALIGN"))("ngClass",i.VKq(55,O,e.commandIsActive("justifyCenter"))),i.xp6(3),i.Q6J("title",e.language.getLabel("LBL_RIGHT_ALIGN"))("ngClass",i.VKq(57,O,e.commandIsActive("justifyRight"))),i.xp6(3),i.Q6J("title",e.language.getLabel("LBL_ALIGN_TEXT"))("ngClass",i.VKq(59,O,e.commandIsActive("justifyFull"))),i.xp6(4),i.Q6J("title",e.language.getLabel("LBL_LINK")),i.xp6(3),i.Q6J("title",e.language.getLabel("LBL_REMOVE_LINK")),i.xp6(2),i.Q6J("ngIf",e.extendedmode),i.xp6(1),i.Q6J("ngIf",e.useTemplateVariableHelper),i.xp6(3),i.Q6J("title",e.language.getLabel("LBL_REMOVE_FORMATTING")),i.xp6(2),i.Q6J("ngIf",e.extendedmode)}}function F(e,t){if(1&e&&i._UZ(0,"link",74),2&e){const e=i.oxw();i.Q6J("href",e.cssContent,i.uOi)}}const q=["*"];let E=(()=>{class SystemRichTextEditor{modal;renderer;libLoader;metadata;editorService;_document;elementRef;language;zone;sanitizer;viewContainerRef;configurationService;model;helper;ckEditor;extendedmode=!0;readOnly=!1;innerheight;useMedialFile=!1;stylesheetId;get useTemplateVariableHelper(){return this.model?.module in{OutputTemplates:!0,EmailTemplates:!0,CampaignTasks:!0,LandingPages:!0,Mailboxes:!0}}onChange;onTouched;_html="";isActive=!1;isShow=!1;clickListener;keydownListener;modalOpen=!1;isExpanded=!1;selectedColumn;selectedRow;block="default";fontName="Tilium Web";fontSize="5";tagMap={BLOCKQUOTE:"indent",A:"link"};save$=new i.vpe;select=["H1","H2","H3","H4","H5","H6","P","PRE","DIV"];constructor(e,t,s,i,n,l,o,a,d,r,c,u,m,g){this.modal=e,this.renderer=t,this.libLoader=s,this.metadata=i,this.editorService=n,this._document=l,this.elementRef=o,this.language=a,this.zone=d,this.sanitizer=r,this.viewContainerRef=c,this.configurationService=u,this.model=m,this.helper=g}get expandIcon(){return this.isExpanded?"contract_alt":"expand_alt"}get innerHeight(){return this.innerheight&&this.innerheight.indexOf("px")>-1?this.innerheight.substring(0,this.innerheight.indexOf("px")):this.innerheight?this.innerheight:"250"}get richTextStyle(){return this.isExpanded?{height:"100vh",resize:"none",position:"fixed"}:{height:+this.innerHeight+(this.readOnly?0:50)+"px"}}editor;customStyleDefinitions=[];ngOnInit(){this.loadCustomStyleDefinitions(),this.libLoader.loadLib("ckeditor").subscribe((e=>{this.zone.runOutsideAngular((()=>{ClassicEditor.create(this.ckEditor.element.nativeElement,{removePlugins:["Markdown","Title"],style:{definitions:this.customStyleDefinitions.map((e=>({name:e.id,element:e.element,classes:e.classes})))},image:{styles:["alignCenter","alignLeft","alignRight"],resizeOptions:[{name:"resizeImage:original",label:"Original size",value:null},{name:"resizeImage:50",label:"50%",value:"50"},{name:"resizeImage:75",label:"75%",value:"75"}],toolbar:["imageTextAlternative","|","imageStyle:inline","imageStyle:wrapText","imageStyle:breakText","imageStyle:side","|","resizeImage"]},toolbar:[],htmlSupport:{allow:this.generateHtmlTagsAllowAttributes(["div","img","span","table","p","h1","h2","h3","h4","input","fieldset","button","label","textarea","select","option","optgroup"])},autosave:{save:e=>this.onChange(e.getData())}}).then((e=>{this.editor=e,this.readOnly&&this.editor.enableReadOnlyMode("efsjeflksjefloikjse"),this.editor.editing.view.change((e=>{e.setStyle("height","100%",this.editor.editing.view.document.getRoot())})),this.editor.setData(this._html)}))}))})),this.handleKeyboardShortcuts()}loadCustomStyleDefinitions(){this.stylesheetId&&this.metadata.getHtmlFormats(this.stylesheetId).forEach((e=>{this.customStyleDefinitions.push({display:e.name,id:e.id,classes:e.classes?e.classes.trim().split(/\s+/):[],element:e.block?e.block:e.inline?e.inline:""})}))}generateHtmlTagsAllowAttributes(e){return e.map((e=>({name:e,attributes:{"data-trackinglink":!0,"data-marketingaction":!0,"data-spicefor":!0,"data-spiceif":!0,"data-spicefor-first":!0,"data-spicefor-last":!0,"data-spicetemplate":!0,"data-signature":!0,"data-spice-reply-quote":!0,"data-spice-temp-quote":!0,class:!0,style:!0,value:!0,type:!0,id:!0,name:!0,for:!0,checked:!0,selected:!0,size:!0,autocomplete:!0,autofocus:!0,placeholder:!0,max:!0,maxlength:!0,min:!0,minlength:!0,multiple:!0,required:!0,disabled:!0,form:!0,step:!0,readonly:!0,cols:!0,rows:!0,wrap:!0,label:!0,width:!0,height:!0}})))}ngOnDestroy(){this.clickListener&&this.clickListener(),this.keydownListener&&this.keydownListener()}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}writeValue(e){this._html=e||"",this.editor&&this.editor.setData(e)}executeCommand(e){this.isActive&&e&&this.editor.execute(e)}toggleFullscreen(){this.isExpanded=!this.isExpanded}heading(e){this.editor.execute("heading",{value:e})}customStyle(e){e&&this.editor.execute("style",e)}openTable(){this.isShow=!this.isShow,this.selectedColumn=this.selectedRow=0}selectTable(e,t){this.selectedColumn=t,this.selectedRow=e}insertTable(){this.editor.execute("insertTable",{rows:this.selectedRow,columns:this.selectedColumn}),this.isShow=!1}cancelTable(){this.isShow=!1}alignment(e){this.editor.execute("alignment",{value:e})}onEditorClick(e){this.isActive||(this.isActive=!0,this.clickListener=this.renderer.listen("document","click",(e=>this.onDocumentClick(e)))),e.stopPropagation()}onDocumentClick(e){this.modalOpen||this.elementRef.nativeElement.contains(e.target)||(this.isActive=!1,this.clickListener())}exec(){let e;window.getSelection&&(e=window.getSelection());let t=e.focusNode;const s=[];for(;t&&"editor"!==t.id;)s.unshift(t),t=t.parentNode;this.triggerBlocks(s)}insertImage(){this.modal.input(this.language.getLabel("LBL_IMAGE_LINK",this.language.getLabel("LBL_IMAGE"))).subscribe((e=>{e&&this.editor.execute("imageInsert",{source:[{src:e}]})}))}openMediaFilePicker(){this.modalOpen=!0,this.modal.openModal("MediaFilePicker").subscribe((e=>{e.instance.answer.subscribe((e=>{if(!e)return;const t=this.configurationService.getCapabilityConfig("mediafiles");e.upload?this.modal.openModal("MediaFileUploader").subscribe((e=>{e.instance.answer.subscribe((e=>{e&&this.editor.execute("imageInsert",{source:[{src:t.public_url+e}]}),this.modalOpen=!1}))})):(e.id&&this.editor.execute("imageInsert",{source:[{src:t.public_url+e.id}]}),this.modalOpen=!1)}))}))}openSourceEditor(){this.modal.openModal("SystemRichTextSourceModal",!0,this.viewContainerRef.injector).pipe((0,a.q)(1)).subscribe((e=>{e.instance._html=this.editor.getData(),e.instance.html.subscribe((e=>{this._html=e,this.editor.setData(e),"function"==typeof this.onChange&&this.onChange(e)}))}))}commandIsActive(e){return this.isActive&&this._document.queryCommandState(e)}triggerBlocks(e){if(!this.isActive)return;let t=!1;this.select.forEach((s=>{const i=e.find((e=>e.nodeName===s));void 0===i||s!==i.nodeName&&"code"!=i.nodeName?!1===t&&(this.block="default"):!1===t&&(this.block=i.nodeName.toLowerCase(),t=!0)})),t=!1}insertLink(){this.modal.input("","LBL_ADD_LINK").subscribe((e=>{e&&this.editor.execute("link",e)}))}addVideo(){this.isActive&&this.modal.input("","LBL_ADD_VIDEO").subscribe((e=>{e&&this.editor.execute("mediaEmbed",e)}))}getSelectedText(){return window.getSelection?window.getSelection().toString():this._document.selection&&"Control"!=this._document.selection.type?this._document.selection.createRange().text:void 0}insertColor(e,t){this.editorService.insertColor(e,t)}setFontName(e){this.editorService.setFontName(e)}setFontSize(e){this.editorService.setFontSize(e)}onFileChanged(e){}setCustomClass(e){}encodeHtml(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}addCodeSnippet(){if(!this.isActive)return;this.modal.prompt("input","","LBL_SELECT_LANGUAGE","shade",void 0,[{value:"plaintext",display:"Plain text"},{value:"c",display:"C"},{value:"cs",display:"C#"},{value:"cpp",display:"C++"},{value:"css",display:"CSS"},{value:"diff",display:"Diff"},{value:"html",display:"HTML"},{value:"java",display:"Java"},{value:"javascript",display:"JavaScript"},{value:"php",display:"PHP"},{value:"python",display:"Python"},{value:"ruby",display:"Ruby"},{value:"typescript",display:"TypeScript"},{value:"xml",display:"XML"}],!0).subscribe((e=>{e&&this.editor.execute("codeBlock",{language:e,forceValue:!0})}))}handleKeyboardShortcuts(){this.keydownListener=this.renderer.listen("document","keydown",(e=>{(window.navigator.platform.match("Mac")?e.metaKey:e.ctrlKey)&&"s"==e.key.toLowerCase()&&(e.preventDefault(),this.save$.emit(this._html))}))}openTemplateVariableHelper(){this.isActive&&(this.modalOpen=!0,this.modal.openModal("OutputTemplatesVariableHelper",null,this.viewContainerRef.injector).subscribe((e=>{e.instance.response.pipe((0,a.q)(1)).subscribe((e=>{this.modalOpen=!1,this.editor.model.change((t=>{this.editor.model.insertContent(t.createText(`{${e}}`))}))}))})))}getHtmlFromSelection(){let e,t=window.getSelection();t.getRangeAt?e=t.getRangeAt(0):(e=document.createRange(),e.setStart(t.anchorNode,t.anchorOffset),e.setEnd(t.focusNode,t.focusOffset));let s=e.cloneContents(),i=document.createElement("div");return i.appendChild(s),i.innerHTML}save(){this.save$.emit(this.editor.getData())}cssContent;set css(e){e&&d.render(`.slds-rich-text-editor__textarea {${e}}`).then((e=>this.cssContent=this.sanitizer.bypassSecurityTrustResourceUrl("data:text/css;base64,"+btoa(e.css))))}static ɵfac=function(e){return new(e||SystemRichTextEditor)(i.Y36(r.o),i.Y36(i.Qsj),i.Y36(c.$),i.Y36(u.Pu),i.Y36(o.L),i.Y36(l.K0),i.Y36(i.SBq),i.Y36(m.d),i.Y36(i.R0b),i.Y36(g.H7),i.Y36(i.s_b),i.Y36(h.C),i.Y36(p.o,8),i.Y36(f._))};static ɵcmp=i.Xpm({type:SystemRichTextEditor,selectors:[["system-richtext-editor"]],viewQuery:function(e,t){if(1&e&&i.Gf(y,7,i.s_b),2&e){let e;i.iGM(e=i.CRH())&&(t.ckEditor=e.first)}},inputs:{extendedmode:"extendedmode",readOnly:"readOnly",innerheight:"innerheight",useMedialFile:"useMedialFile",stylesheetId:"stylesheetId",css:"css"},outputs:{save$:"save$"},features:[i._Bn([{provide:n.JU,useExisting:(0,i.Gpc)((()=>SystemRichTextEditor)),multi:!0},o.L])],ngContentSelectors:q,decls:8,vars:3,consts:[[1,"slds-rich-text-editor","slds-grid","slds-grid_vertical","slds-nowrap","slds-grid","slds-grid--vertical","slds-theme--default",2,"top","0","right","0","left","0","bottom","0","z-index","9999",3,"ngStyle","click"],["role","toolbar","style","top: 0; z-index: 2; position: sticky","class","slds-rich-text-editor__toolbar slds-shrink-none",4,"ngIf"],[1,"slds-grid","slds-grow",2,"min-height","0"],[1,"slds-text-color_weak","slds-grow","slds-height_full","spice-richtext-editor","slds-rich-text-editor__textarea"],["rel","stylesheet","type","text/css",3,"href",4,"ngIf"],["ckEditor",""],["role","toolbar",1,"slds-rich-text-editor__toolbar","slds-shrink-none",2,"top","0","z-index","2","position","sticky"],["class","slds-button-group-list",4,"ngIf"],["class","slds-grid slds-rich-text-editor__spacing-wrapper","role","group",4,"ngIf"],[1,"slds-button-group-list"],["aria-pressed","true","tabindex","-1",1,"slds-button","slds-button_icon","slds-button_icon-border-filled",3,"title","ngClass","click"],["icon","bold"],["icon","italic"],["icon","underline"],["icon","strikethrough"],["icon","richtextbulletedlist"],["icon","richtextnumberedlist"],["icon","table"],[4,"ngIf"],["icon","richtextindent"],["icon","richtextoutdent"],["icon","left_align_text"],["icon","center_align_text"],["icon","right_align_text"],["icon","justify_text"],["aria-pressed","true","tabindex","-1",1,"slds-button","slds-button_icon","slds-button_icon-border-filled",3,"title","click"],["icon","link"],["icon","remove_link"],["icon","remove_formatting"],[1,"slds-button-group-list","slds-grow"],["tabindex","-1","aria-pressed","true",1,"slds-button","slds-button_icon","slds-button_icon-border-filled",3,"title","click"],["icon","undo"],[1,"slds-assistive-text"],["icon","redo"],["role","group",1,"slds-grid","slds-rich-text-editor__spacing-wrapper"],[1,"slds-rich-text-editor__select"],[1,"slds-form-element"],[1,"slds-form-element__control"],[1,"slds-select_container"],[1,"slds-select",3,"ngModel","ngModelChange","change"],["value","heading2"],["value","heading3"],["value","heading4"],["value","paragraph"],[1,"slds-select",3,"change"],["value",""],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["aria-describedby","dialog-body-id-35","aria-label","Choose a color","role","dialog",1,"slds-popover","slds-color-picker__selector","slds-show",2,"position","absolute"],["id","dialog-body-id-35",1,"slds-popover__body"],[1,"slds-media"],[1,"slds-media__body"],[1,"slds-text-align--center"],["id","color-picker-default","role","tabpanel","aria-labelledby","color-picker-default__item",1,"slds-tabs_default__content","slds-show"],[4,"ngFor","ngForOf"],["id","color-picker-custom","role","tabpanel","aria-labelledby","color-picker-custom__item",1,"slds-tabs_default__content","slds-hide"],[1,"slds-popover__footer"],[1,"slds-color-picker__selector-footer","slds-p-bottom--x-small","slds-float--right"],[1,"slds-button-small","slds-m-right--small","slds-button_neutral",3,"click"],[1,"slds-button-small","slds-button_destructive",3,"click"],["role","listbox","aria-label","Preset colors",1,"slds-color-picker__swatches"],["class","slds-color-picker__swatch","role","presentation",4,"ngFor","ngForOf"],["role","presentation",1,"slds-color-picker__swatch"],["href","#","role","option","tabindex","0",1,"slds-color-picker__swatch-trigger",3,"ngClass","click"],[1,"slds-swatch",2,"height","9px","width","9px","border","solid 1px black"],["icon","image"],["tabindex","-1",1,"slds-button","slds-button_icon","slds-button_icon-border-filled",3,"title","click"],["icon","video"],["icon","snippet"],["icon","ad_set"],["icon","variable"],["aria-pressed","true","tabindex","-1","system-title","LBL_SOURCE_EDITOR",1,"slds-button","slds-button_icon","slds-button_icon-border-filled",3,"click"],["icon","insert_tag_field"],[3,"icon"],["rel","stylesheet","type","text/css",3,"href"]],template:function(e,t){1&e&&(i.F$t(),i.TgZ(0,"div",0),i.NdJ("click",(function(e){return t.onEditorClick(e)})),i.YNc(1,N,63,61,"div",1),i.TgZ(2,"div",2)(3,"div",3)(4,"system-richtext-editor-content"),i.YNc(5,F,1,1,"link",4),i._UZ(6,"div",null,5),i.qZA()()()()),2&e&&(i.Q6J("ngStyle",t.richTextStyle),i.xp6(1),i.Q6J("ngIf",!t.readOnly),i.xp6(4),i.Q6J("ngIf",t.cssContent))},dependencies:[b.S,l.mk,l.sg,l.O5,l.PC,n.YN,n.Kr,n.EJ,n.JJ,n.On,_.J,v.m],encapsulation:2})}return SystemRichTextEditor})()},80121:(e,t,s)=>{"use strict";s.d(t,{m:()=>l});var i=s(62242);const n=["*"];let l=(()=>{class SystemRichTextEditorContent{cdRef;constructor(e){this.cdRef=e,e.detach()}static ɵfac=function(e){return new(e||SystemRichTextEditorContent)(i.Y36(i.sBO))};static ɵcmp=i.Xpm({type:SystemRichTextEditorContent,selectors:[["system-richtext-editor-content"]],ngContentSelectors:n,decls:1,vars:0,template:function(e,t){1&e&&(i.F$t(),i.Hsn(0))},encapsulation:2,changeDetection:0})}return SystemRichTextEditorContent})()},29151:(e,t,s)=>{"use strict";s.d(t,{v:()=>o});var i=s(62242),n=s(44561),l=s(12803);let o=(()=>{class SystemSearchresultStencil{static ɵfac=function(e){return new(e||SystemSearchresultStencil)};static ɵcmp=i.Xpm({type:SystemSearchresultStencil,selectors:[["system-searchresult-stencil"]],decls:14,vars:0,consts:[["role","option",1,"slds-lookup__item-action","slds-media","slds-media--center"],["icon","empty","size","small"],[1,"slds-media__body"],[1,"slds-lookup__result-text"],[1,"slds-p-around--xx-small"],[1,"slds-lookup__result-meta","slds-text-body--small"],[1,"slds-list_horizontal","slds-has-dividers_right","slds-truncate"],[1,"slds-item"]],template:function(e,t){1&e&&(i.TgZ(0,"span",0),i._UZ(1,"system-icon",1),i.TgZ(2,"div",2)(3,"div",3)(4,"div",4),i._UZ(5,"system-stencil"),i.qZA()(),i.TgZ(6,"div",5)(7,"ul",6)(8,"li",7)(9,"div",4),i._UZ(10,"system-stencil"),i.qZA()(),i.TgZ(11,"li",7)(12,"div",4),i._UZ(13,"system-stencil"),i.qZA()()()()()())},dependencies:[n.f,l.B],encapsulation:2})}return SystemSearchresultStencil})()},72868:(e,t,s)=>{"use strict";s.d(t,{P:()=>h});var i=s(62242),n=s(55329),l=s(44755),o=s(83463),a=s(78859);function d(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"button",6),i.NdJ("click",(function(){i.CHM(e);const t=i.oxw(2);return i.KtG(t.togglePanel())})),i._UZ(1,"system-utility-icon",7),i.TgZ(2,"span",8),i._UZ(3,"system-label",9),i.qZA()()}if(2&e){const e=i.oxw(2);i.xp6(1),i.Q6J("icon","switch")("size","x-small")("addclasses","slds-section__title-action-icon slds-button__icon slds-button__icon_left"),i.xp6(1),i.s9C("title",e.language.getLabel(e.titlelabel)),i.xp6(1),i.Q6J("label",e.titlelabel)}}function r(e,t){if(1&e&&(i.TgZ(0,"span",10),i._UZ(1,"system-label",9),i.qZA()),2&e){const e=i.oxw(2);i.s9C("title",e.language.getLabel(e.titlelabel)),i.xp6(1),i.Q6J("label",e.titlelabel)}}const c=function(e){return{"slds-theme_shade":e}};function u(e,t){if(1&e&&(i.TgZ(0,"h3",3),i.YNc(1,d,4,5,"button",4),i.YNc(2,r,2,2,"span",5),i.qZA()),2&e){const e=i.oxw();i.Q6J("ngClass",i.VKq(3,c,e.alwaysExpanded)),i.xp6(1),i.Q6J("ngIf",!e.alwaysExpanded),i.xp6(1),i.Q6J("ngIf",e.alwaysExpanded)}}const m=function(e){return{"slds-is-open":e}},g=["*"];let h=(()=>{class SystemSection{language;titlelabel="";expanded=!0;alwaysExpanded=!1;constructor(e){this.language=e}togglePanel(){this.expanded=!this.expanded}getTabStyle(){if(!this.expanded)return{height:"0px",transform:"rotateX(90deg)"}}static ɵfac=function(e){return new(e||SystemSection)(i.Y36(n.d))};static ɵcmp=i.Xpm({type:SystemSection,selectors:[["system-section"]],inputs:{titlelabel:"titlelabel",expanded:"expanded",alwaysExpanded:"alwaysExpanded"},ngContentSelectors:g,decls:4,vars:5,consts:[[1,"slds-section",3,"ngClass"],["class","slds-section__title",3,"ngClass",4,"ngIf"],[3,"ngStyle"],[1,"slds-section__title",3,"ngClass"],["aria-controls","expando-unique-id","aria-expanded","true","class","slds-button slds-section__title-action",3,"click",4,"ngIf"],["class","slds-truncate slds-p-horizontal_small",3,"title",4,"ngIf"],["aria-controls","expando-unique-id","aria-expanded","true",1,"slds-button","slds-section__title-action",3,"click"],[3,"icon","size","addclasses"],[1,"slds-truncate",3,"title"],[3,"label"],[1,"slds-truncate","slds-p-horizontal_small",3,"title"]],template:function(e,t){1&e&&(i.F$t(),i.TgZ(0,"div",0),i.YNc(1,u,3,5,"h3",1),i.TgZ(2,"div",2),i.Hsn(3),i.qZA()()),2&e&&(i.Q6J("ngClass",i.VKq(3,m,t.expanded)),i.xp6(1),i.Q6J("ngIf",t.titlelabel),i.xp6(1),i.Q6J("ngStyle",t.getTabStyle()))},dependencies:[l.mk,l.O5,l.PC,o._,a.r],encapsulation:2})}return SystemSection})()},33543:(e,t,s)=>{"use strict";s.d(t,{R:()=>x});var i=s(62242),n=s(95030),l=s(95681),o=s(84548),a=s(99573),d=s(83398),r=s(50151),c=s(44755),u=s(72656),m=s(83463),g=s(78859);const h=["resultList"];function p(e,t){if(1&e&&(i.TgZ(0,"label",14),i._UZ(1,"system-label",15),i.qZA()),2&e){const e=i.oxw();i.xp6(1),i.Q6J("label",e.label)}}function f(e,t){if(1&e&&(i.TgZ(0,"li",18)(1,"div",19)(2,"span",20),i._uU(3),i.qZA()()()),2&e){const e=i.oxw().$implicit;i.uIk("data-is-group",!0),i.xp6(3),i.hij(" ",e.name," ")}}function b(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"li",21),i.NdJ("mousedown",(function(e){return e.preventDefault()}))("click",(function(t){i.CHM(e);const s=i.oxw().$implicit,n=i.oxw();return i.KtG(n.itemClicked(s,t))})),i.TgZ(1,"div",22)(2,"span",23)(3,"span",24),i._UZ(4,"span",25),i.qZA()()()()}if(2&e){const e=i.oxw().$implicit,t=i.oxw();i.xp6(1),i.ekj("slds-has-focus",e.id==t.focusedItemId),i.xp6(3),i.Q6J("innerHTML",e.content,i.oJD)}}function v(e,t){if(1&e&&(i.ynx(0),i.YNc(1,f,4,2,"li",16),i.YNc(2,b,5,3,"li",17),i.BQk()),2&e){const e=t.$implicit;i.xp6(1),i.Q6J("ngIf",e.isGroup),i.xp6(1),i.Q6J("ngIf",!e.isGroup)}}function y(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"div",26),i.NdJ("click",(function(t){i.CHM(e);const s=i.oxw(),n=i.MAs(7);return i.KtG(s.setInputVisible(n,t))})),i.TgZ(1,"span",27)(2,"a",28)(3,"span",29),i._uU(4),i.qZA()(),i.TgZ(5,"button",30),i.NdJ("click",(function(t){i.CHM(e);const s=i.oxw();return i.KtG(s.clearValue(t))})),i._UZ(6,"system-button-icon",31),i.qZA()()()}if(2&e){const e=i.oxw();i.xp6(2),i.Q6J("system-title",e.value),i.xp6(2),i.Oqu(e.value)}}let x=(()=>{class SystemSelect{elementRef;cdRef;renderer;dropdownTrigger;idOnly=!1;label="";value;listHeight="7";disabled=!1;emitInputValueOnEnterPress=!1;searchList=[];searchListIsVisible=!1;focusedItemId;onChange;resultListContainer;inputIsVisible=!1;options;constructor(e,t,s){this.elementRef=e,this.cdRef=t,this.renderer=s}get dropdownLength(){return`calc(((1rem * 1.5) + 1rem) * ${this.listHeight})`}ngAfterContentInit(){this.searchList=this.generateSearchList()}registerOnChange(e){this.onChange=e}registerOnTouched(e){}writeValue(e){e&&("string"==typeof e&&(e=this.searchList.find((t=>t.id==e))),this.value=e.name,this.focusedItemId=e.id,this.cdRef.detectChanges())}emitValue(e){this.idOnly?this.onChange(e?.id):this.onChange({id:e.id,name:e.name,group:e.group})}outsideClickHandler(e){this.elementRef.nativeElement.contains(e.target)||this.setSearchListVisible(!1)}onKeyup(e){switch(e.key){case"ArrowUp":case"ArrowDown":return this.navigateThroughResultList(e);case"Enter":this.handleEnterPress();break;case"Escape":e.stopPropagation(),this.setSearchListVisible(!1);break;default:this.value||this.onChange(void 0),this.filterSearchList()}0!=this.searchList.length&&"Enter"!=e.key||this.setSearchListVisible(!1),this.cdRef.detectChanges()}onFocus(){this.setSearchListVisible(!0),this.inputIsVisible=!0}onBlur(e){this.inputIsVisible=!1,this.setSearchListVisible(!1)}onInputClick(e){this.searchListIsVisible||(this.searchList=this.generateSearchList()),this.setSearchListVisible(!0),e.stopPropagation()}itemClicked(e,t){this.setSearchListVisible(!1),this.emitValue(e),this.value=e.name,this.focusedItemId=e.id,this.inputIsVisible=!1,t.stopPropagation&&t.stopPropagation()}setSearchListVisible(e){this.searchListIsVisible=e&&this.searchList.length>0,!e&&this.dropdownTrigger.dropDownOpen&&this.dropdownTrigger.toggleDropdown(),e&&!this.dropdownTrigger.dropDownOpen&&this.dropdownTrigger.toggleDropdown()}filterSearchList(){this.setSearchListVisible(!0),this.focusedItemId=void 0,this.searchList=this.generateSearchList(),this.value&&0!=this.searchList.length&&(this.searchList=this.searchList.filter((e=>e.name.toLowerCase().indexOf(this.value.toLowerCase())>-1)),this.searchList.forEach((e=>{const t=e.name.toLowerCase().indexOf(this.value.toLowerCase());-1!=t&&(e.content=this.generateHighlightHTMLContent(e.name,t))})))}generateHighlightHTMLContent(e,t){return[e.slice(0,t),"<mark>",e.slice(t,t+this.value.length),"</mark>",e.slice(t+this.value.length)].join("")}handleEnterPress(){this.focusedItemId?(this.emitValue(this.searchList.find((e=>e.id==this.focusedItemId))),this.inputIsVisible=!1):this.emitInputValueOnEnterPress&&(this.onChange(this.value),this.inputIsVisible=!1)}generateSearchList(){const e=[],t=_.uniq(this.options.map((e=>e.group))).sort();return t.forEach((s=>{(s||!s&&t.length>1)&&e.push({id:`${s}`,name:`${s}`,isGroup:!0}),this.options.filter((e=>e.group==s)).sort(((e,t)=>e.display>t.display?1:-1)).forEach((t=>e.push({id:t.value,name:t.display,content:t.display,group:s})))})),e}navigateThroughResultList(e){let t=this.searchListIsVisible?this.searchList:this.generateSearchList();if(t=t.filter((e=>!e.isGroup)),0==t.length)return;const s="ArrowDown"==e.key?"down":"up",i=this.focusedItemId?t.findIndex((e=>e.id==this.focusedItemId)):0;let n="down"==s?t[i+1]:t[i-1];this.focusedItemId&&n?n&&(this.focusedItemId=n.id,this.value=n.name):(n=t[0],this.focusedItemId=n.id,this.value=n.name),!this.searchListIsVisible&&n&&this.emitValue(n),this.scrollToFocusedSearchItem(s)}scrollToFocusedSearchItem(e){if(!this.resultListContainer)return;const t=Array.from(this.resultListContainer.element.nativeElement.children).filter((e=>!e.hasAttribute("data-is-group")));let s=t.findIndex((e=>e.firstElementChild.classList.contains("slds-has-focus")));s=s+1==t.length&&"down"==e||0==s&&"up"==e?0:"down"==e?s+1:s-1,t[s]?.scrollIntoView()}clearValue(e){e.stopPropagation(),this.value=void 0,this.focusedItemId=void 0,this.onChange(void 0),this.inputIsVisible=!0}setInputVisible(e,t){t.stopPropagation(),this.inputIsVisible=!0,this.cdRef.detectChanges(),e.focus()}static ɵfac=function(e){return new(e||SystemSelect)(i.Y36(i.SBq),i.Y36(i.sBO),i.Y36(i.Qsj))};static ɵcmp=i.Xpm({type:SystemSelect,selectors:[["system-select"]],contentQueries:function(e,t,s){if(1&e&&i.Suo(s,o.X,4),2&e){let e;i.iGM(e=i.CRH())&&(t.options=e)}},viewQuery:function(e,t){if(1&e&&(i.Gf(l.l,5),i.Gf(h,5,i.s_b)),2&e){let e;i.iGM(e=i.CRH())&&(t.dropdownTrigger=e.first),i.iGM(e=i.CRH())&&(t.resultListContainer=e.first)}},inputs:{idOnly:"idOnly",label:"label",listHeight:"listHeight",disabled:"disabled",emitInputValueOnEnterPress:"emitInputValueOnEnterPress"},features:[i._Bn([{provide:n.JU,useExisting:(0,i.Gpc)((()=>SystemSelect)),multi:!0}])],decls:14,vars:9,consts:[[1,"slds-form-element","slds-size_2-of-2"],["class","slds-form-element__label",4,"ngIf"],[1,"slds-form-element__control","slds-size_2-of-2"],[1,"slds-combobox_container","slds-size--1-of-1"],["system-dropdown-trigger","","aria-expanded","true","aria-haspopup","listbox","role","combobox",1,"slds-combobox","slds-dropdown-trigger","slds-dropdown-trigger_click","slds-size--1-of-1"],["role","none",1,"slds-combobox__form-element","slds-input-has-icon","slds-input-has-icon_right"],["system-dropdown-trigger-button","","type","text","system-placeholder","LBL_SEARCH","aria-autocomplete","list","autoComplete","off","role","textbox",1,"slds-input","slds-combobox__input","slds-combobox__input-value",3,"ngModel","disabled","focus","blur","click","ngModelChange","keyup"],["inputElement",""],[3,"icon","addclasses"],["role","listbox",1,"slds-dropdown","slds-dropdown_fluid","slds-scrollable--y"],["role","presentation",1,"slds-listbox","slds-listbox_vertical"],["resultList",""],[4,"ngFor","ngForOf"],["class","slds-pill_container",3,"click",4,"ngIf"],[1,"slds-form-element__label"],[3,"label"],["role","presentation",4,"ngIf"],["role","presentation","class","slds-listbox__item",3,"mousedown","click",4,"ngIf"],["role","presentation"],[1,"slds-border_bottom","slds-border_top","slds-p-left_small",2,"background-color","#ecebea"],[1,"slds-truncate","size-xx-small",2,"font-weight","bold","font-size","12px"],["role","presentation",1,"slds-listbox__item",3,"mousedown","click"],["role","option",1,"slds-media","slds-listbox__option","slds-listbox__option_plain","slds-media_small"],[1,"slds-media__body"],[1,"slds-truncate"],[3,"innerHTML"],[1,"slds-pill_container",3,"click"],[1,"slds-pill","slds-pill_link","slds-size--1-of-1"],[1,"slds-pill__action",3,"system-title"],[1,"slds-pill__label"],["tabindex","-1","system-title","LBL_CLEAR",1,"slds-button","slds-button_icon","slds-button_icon","slds-pill__remove",3,"click"],["icon","close"]],template:function(e,t){1&e&&(i.TgZ(0,"div",0),i.YNc(1,p,2,1,"label",1),i.TgZ(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"input",6,7),i.NdJ("focus",(function(){return t.onFocus()}))("blur",(function(e){return t.onBlur(e)}))("click",(function(e){return t.onInputClick(e)}))("ngModelChange",(function(e){return t.value=e}))("keyup",(function(e){return t.onKeyup(e)})),i.qZA(),i._UZ(8,"system-utility-icon",8),i.qZA(),i.TgZ(9,"div",9)(10,"ul",10,11),i.YNc(12,v,3,2,"ng-container",12),i.qZA()()()()()(),i.YNc(13,y,7,2,"div",13)),2&e&&(i.ekj("slds-hide",!t.inputIsVisible&&(t.emitInputValueOnEnterPress?!!t.value:!!t.focusedItemId)),i.xp6(1),i.Q6J("ngIf",t.label),i.xp6(5),i.Q6J("ngModel",t.value)("disabled",t.disabled),i.xp6(2),i.Q6J("icon","search")("addclasses","slds-input__icon slds-input__icon--left"),i.xp6(4),i.Q6J("ngForOf",t.searchList),i.xp6(1),i.Q6J("ngIf",!t.inputIsVisible&&(t.emitInputValueOnEnterPress?!!t.value:!!t.focusedItemId)))},dependencies:[l.l,a.$,d.A,r.S,c.sg,c.O5,n.Fj,n.JJ,n.On,u.J,m._,g.r],encapsulation:2,changeDetection:0})}return SystemSelect})()},85185:(e,t,s)=>{"use strict";s.d(t,{E:()=>g});var i=s(62242),n=s(95030),l=s(13577),o=s(14361),a=s(44755),d=s(78859);function r(e,t){1&e&&(i.TgZ(0,"span",10),i._uU(1,"-"),i.qZA())}const c=function(e){return{"slds-hidden":e}};function u(e,t){if(1&e&&i._UZ(0,"system-utility-icon",11),2&e){const e=i.oxw();i.Q6J("ngClass",i.VKq(3,c,!e.selectedItem.value))("icon",e.selectedItem.icon)("colorclass",e.selectedItem.colorclass)}}function m(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"li",12),i.NdJ("click",(function(t){const s=i.CHM(e).$implicit,n=i.oxw();return i.KtG(n.itemClicked(s.value,t))})),i.TgZ(1,"div",13)(2,"span",14),i._UZ(3,"system-utility-icon",11),i.qZA()()()}if(2&e){const e=t.$implicit;i.xp6(3),i.Q6J("ngClass",i.VKq(3,c,!e.value))("icon",e.icon)("colorclass",e.colorclass)}}let g=(()=>{class SystemSelectIcon{elementRef;cdRef;renderer;selectItemlist;selectList=[];label="";value="";listHeight="7";disabled=!1;focusedItemId;onChange;constructor(e,t,s){this.elementRef=e,this.cdRef=t,this.renderer=s}ngAfterContentInit(){this.selectItemlist.forEach((e=>this.selectList.push({value:e.value??"",icon:e.icon,colorclass:e.colorclass})))}registerOnChange(e){this.onChange=e}registerOnTouched(e){}writeValue(e){e&&(this.value=e,this.cdRef.detectChanges())}get selectedItem(){return this.selectItemlist.find((e=>e.value==this.value))??void 0}itemClicked(e,t){this.value=e,this.onChange(e)}static ɵfac=function(e){return new(e||SystemSelectIcon)(i.Y36(i.SBq),i.Y36(i.sBO),i.Y36(i.Qsj))};static ɵcmp=i.Xpm({type:SystemSelectIcon,selectors:[["system-select-icon"]],contentQueries:function(e,t,s){if(1&e&&i.Suo(s,l.s,4),2&e){let e;i.iGM(e=i.CRH())&&(t.selectItemlist=e)}},inputs:{selectList:"selectList",label:"label",listHeight:"listHeight",disabled:"disabled"},features:[i._Bn([{provide:n.JU,useExisting:(0,i.Gpc)((()=>SystemSelectIcon)),multi:!0}])],decls:10,vars:3,consts:[[1,"slds-combobox_container"],["system-dropdown-trigger-simple","",1,"slds-combobox","slds-dropdown-trigger","slds-dropdown-trigger_click"],["role","none",1,"slds-combobox__form-element","slds-input-has-icon","slds-input-has-icon_right"],["type","button",1,"slds-input_faux","slds-combobox__input"],["class","slds-truncate",4,"ngIf"],["size","x-small",3,"ngClass","icon","colorclass",4,"ngIf"],["addclasses","slds-icon_container slds-icon-utility-down slds-input__icon slds-input__icon_right","icon","down","size","x-small"],["role","listbox",1,"slds-dropdown","slds-dropdown_length-5","slds-dropdown_fluid",2,"min-width","auto"],["role","presentation",1,"slds-listbox","slds-listbox_vertical"],["role","presentation","class","slds-listbox__item",3,"click",4,"ngFor","ngForOf"],[1,"slds-truncate"],["size","x-small",3,"ngClass","icon","colorclass"],["role","presentation",1,"slds-listbox__item",3,"click"],["role","option",1,"slds-media","slds-listbox__option","slds-listbox__option_plain","slds-media_small"],[1,"slds-media__figure","slds-listbox__option-icon"]],template:function(e,t){1&e&&(i.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"button",3),i.YNc(4,r,2,0,"span",4),i.YNc(5,u,1,5,"system-utility-icon",5),i.qZA(),i._UZ(6,"system-utility-icon",6),i.qZA(),i.TgZ(7,"div",7)(8,"ul",8),i.YNc(9,m,4,5,"li",9),i.qZA()()()()),2&e&&(i.xp6(4),i.Q6J("ngIf",!t.selectedItem),i.xp6(1),i.Q6J("ngIf",t.selectedItem),i.xp6(4),i.Q6J("ngForOf",t.selectList))},dependencies:[o.w,a.mk,a.sg,a.O5,d.r],encapsulation:2,changeDetection:0})}return SystemSelectIcon})()},13577:(e,t,s)=>{"use strict";s.d(t,{s:()=>n});var i=s(62242);let n=(()=>{class SystemSelectIconItem{value="";icon="dash";colorclass="slds-icon-text-default";static ɵfac=function(e){return new(e||SystemSelectIconItem)};static ɵcmp=i.Xpm({type:SystemSelectIconItem,selectors:[["system-select-icon-item"]],inputs:{value:"value",icon:"icon",colorclass:"colorclass"},decls:0,vars:0,template:function(e,t){},encapsulation:2})}return SystemSelectIconItem})()},84548:(e,t,s)=>{"use strict";s.d(t,{X:()=>n});var i=s(62242);let n=(()=>{class SystemSelectOption{value;display;group;static ɵfac=function(e){return new(e||SystemSelectOption)};static ɵcmp=i.Xpm({type:SystemSelectOption,selectors:[["system-select-option"]],inputs:{value:"value",display:"display",group:"group"},decls:0,vars:0,template:function(e,t){},encapsulation:2})}return SystemSelectOption})()},51691:(e,t,s)=>{"use strict";s.d(t,{E:()=>c});var i=s(62242),n=s(95030),l=s(26625),o=s(55329),a=s(44755),d=s(83463);function r(e,t){if(1&e&&(i.TgZ(0,"option",3),i._UZ(1,"system-label",4),i.qZA()),2&e){const e=t.$implicit;i.Q6J("value",e.id),i.xp6(1),i.Q6J("label",e.label)}}let c=(()=>{class SystemSelectUOM{configuration;language;uoms=[];onChange;onTouched;disabled=!1;_uom="";constructor(e,t){this.configuration=e,this.language=t,this.uoms=this.configuration.getData("uomunits")}get uom(){return this._uom}set uom(e){this._uom=e,this.onChange(e)}registerOnChange(e){this.onChange=t=>{e(t)}}registerOnTouched(e){this.onTouched=e}writeValue(e){this._uom=e||""}static ɵfac=function(e){return new(e||SystemSelectUOM)(i.Y36(l.C),i.Y36(o.d))};static ɵcmp=i.Xpm({type:SystemSelectUOM,selectors:[["system-select-uom"]],inputs:{disabled:"disabled"},features:[i._Bn([{provide:n.JU,useExisting:(0,i.Gpc)((()=>SystemSelectUOM)),multi:!0}])],decls:3,vars:3,consts:[[1,"slds-select_container","slds-m-vertical--xx-small"],[1,"slds-select",3,"disabled","ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[3,"label"]],template:function(e,t){1&e&&(i.TgZ(0,"div",0)(1,"select",1),i.NdJ("ngModelChange",(function(e){return t.uom=e})),i.YNc(2,r,2,2,"option",2),i.qZA()()),2&e&&(i.xp6(1),i.Q6J("disabled",t.disabled)("ngModel",t.uom),i.xp6(1),i.Q6J("ngForOf",t.uoms))},dependencies:[a.sg,n.YN,n.Kr,n.EJ,n.JJ,n.On,d._],encapsulation:2})}return SystemSelectUOM})()},86274:(e,t,s)=>{"use strict";s.d(t,{f:()=>a});var i=s(62242),n=s(95030),l=s(44755);function o(e,t){if(1&e&&(i.ynx(0),i.TgZ(1,"span",8),i._uU(2),i.qZA(),i.BQk()),2&e){const e=i.oxw();i.xp6(2),i.Oqu(e.value)}}let a=(()=>{class SystemSlider{onChange;onTouched;max;min;step;disabled=!1;displayValue=!0;_value=0;constructor(){}get value(){return this._value}set value(e){e!=this._value&&(this._value=e,this.onChange(e))}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}writeValue(e){this._value=e}setDisabledState(e){this.disabled=e}static ɵfac=function(e){return new(e||SystemSlider)};static ɵcmp=i.Xpm({type:SystemSlider,selectors:[["system-slider"]],inputs:{max:"max",min:"min",step:"step",disabled:"disabled",displayValue:"displayValue"},features:[i._Bn([{provide:n.JU,useExisting:(0,i.Gpc)((()=>SystemSlider)),multi:!0}])],decls:8,vars:8,consts:[[1,"slds-form-element"],[1,"slds-form-element__control"],[1,"slds-slider","slds-grid"],[1,"slds-align--absolute-center","slds-grow","slds-is-relative"],["type","range",1,"slds-slider__range",3,"min","step","max","ngModel","disabled","ngModelChange"],[1,"slds-grid","slds-grid--align-end",2,"width","100%","top","calc(50% - 2px)","position","absolute","padding-left","16px","pointer-events","none"],[2,"background","#f3f3f3","height","4px"],[4,"ngIf"],["aria-hidden","true",1,"slds-slider__value"]],template:function(e,t){1&e&&(i.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"input",4),i.NdJ("ngModelChange",(function(e){return t.value=e})),i.qZA(),i.TgZ(5,"div",5),i._UZ(6,"div",6),i.qZA()(),i.YNc(7,o,3,1,"ng-container",7),i.qZA()()()),2&e&&(i.xp6(4),i.Q6J("min",t.min)("step",t.step)("max",t.max)("ngModel",t.value)("disabled",t.disabled),i.xp6(2),i.Udp("width",100-t.value,"%"),i.xp6(1),i.Q6J("ngIf",t.displayValue))},dependencies:[l.O5,n.Fj,n.eT,n.JJ,n.On],encapsulation:2})}return SystemSlider})()},94664:(e,t,s)=>{"use strict";s.d(t,{W:()=>d});var i=s(62242);function n(e,t){if(1&e&&(i.TgZ(0,"div",6),i._UZ(1,"system-label",7),i.qZA()),2&e){const e=i.oxw(2);i.xp6(1),i.Q6J("label",e.message)}}function l(e,t){if(1&e&&(i.TgZ(0,"div",2)(1,"div",3),i._UZ(2,"div",4),i.qZA(),i.YNc(3,n,2,1,"div",5),i.qZA()),2&e){const e=i.oxw();i.xp6(2),i.Q6J("ngStyle",e.spinnerStyle),i.xp6(1),i.Q6J("ngIf",e.message)}}function o(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"button",12),i.NdJ("click",(function(){i.CHM(e);const t=i.oxw(2);return i.KtG(t.onCancel())})),i._UZ(1,"system-label",13),i.qZA()}}function a(e,t){if(1&e&&(i.TgZ(0,"div",8)(1,"div",9)(2,"div",3),i._UZ(3,"div",10),i.qZA()(),i.YNc(4,o,2,0,"button",11),i.qZA()),2&e){const e=i.oxw();i.xp6(4),i.Q6J("ngIf",e.cancellable)}}let d=(()=>{class SystemSpinner{asOverlay=!1;onCancel$=new i.vpe;size=0;border=0;inverse="false";message;spinnerStyle={};cancellable=!1;ngOnInit(){return 0!=this.size&&(this.spinnerStyle.width=this.size+"px",this.spinnerStyle.height=this.size+"px"),0!=this.border&&(this.spinnerStyle["border-width"]=this.border+"px"),"true"==this.inverse&&(this.spinnerStyle["border-right-color"]="#fff",this.spinnerStyle["border-left-color"]="#fff",this.spinnerStyle["border-bottom-color"]="#fff"),{}}onCancel(){this.onCancel$.emit()}static ɵfac=function(e){return new(e||SystemSpinner)};static ɵcmp=i.Xpm({type:SystemSpinner,selectors:[["system-spinner"]],hostVars:2,hostBindings:function(e,t){2&e&&i.ekj("spice-overlay-spinner-container",t.asOverlay)},inputs:{size:"size",border:"border",inverse:"inverse",message:"message"},outputs:{onCancel$:"onCancel$"},decls:3,vars:2,consts:[["class","slds-grid slds-grid--vertical",4,"ngIf","ngIfElse"],["overlayContainer",""],[1,"slds-grid","slds-grid--vertical"],[1,"cssload-container"],[1,"cssload-double-torus",3,"ngStyle"],["class","slds-m-top--x-small",4,"ngIf"],[1,"slds-m-top--x-small"],[3,"label"],[1,"slds-grid","slds-grid--vertical","slds-grid--vertical-align-center"],[2,"width","48px","border-radius","50%","box-shadow","0 0 5px 0 #555","padding",".5rem","background-color","#fff","color","#080707"],[1,"cssload-double-torus",2,"width","32px","height","32px"],["class","slds-button slds-button--brand slds-m-top--x-small",3,"click",4,"ngIf"],[1,"slds-button","slds-button--brand","slds-m-top--x-small",3,"click"],["label","LBL_CANCEL"]],template:function(e,t){if(1&e&&(i.YNc(0,l,4,2,"div",0),i.YNc(1,a,5,1,"ng-template",null,1,i.W1O)),2&e){const e=i.MAs(2);i.Q6J("ngIf",!t.asOverlay)("ngIfElse",e)}},encapsulation:2})}return SystemSpinner})()},9159:(e,t,s)=>{"use strict";s.d(t,{n:()=>r});var i=s(62242),n=s(42235),l=s(72637),o=s(72656);const a=[[["system-split-container-left"]],[["system-split-container-right"]]],d=["system-split-container-left","system-split-container-right"];let r=(()=>{class SystemSplitContainer{onExpand=new i.vpe;childLeft;childRight;expand(e){"left"!=e||this.childRight.expanded?"right"!=e||this.childLeft.expanded?(this.childLeft.hidden=!1,this.childLeft.expanded=!1,this.childRight.hidden=!1,this.childRight.expanded=!1):(this.childLeft.hidden=!0,this.childLeft.expanded=!1,this.childRight.expanded=!0,this.childRight.hidden=!1):(this.childRight.hidden=!0,this.childRight.expanded=!1,this.childLeft.hidden=!1,this.childLeft.expanded=!0),this.onExpand.emit(e)}static ɵfac=function(e){return new(e||SystemSplitContainer)};static ɵcmp=i.Xpm({type:SystemSplitContainer,selectors:[["system-split-container"]],contentQueries:function(e,t,s){if(1&e&&(i.Suo(s,n.j,5),i.Suo(s,l.I,5)),2&e){let e;i.iGM(e=i.CRH())&&(t.childLeft=e.first),i.iGM(e=i.CRH())&&(t.childRight=e.first)}},hostAttrs:[1,"slds-size--1-of-1","slds-height_full","slds-grid",2,"padding-right","13px"],outputs:{onExpand:"onExpand"},ngContentSelectors:d,decls:11,vars:10,consts:[[1,"slds-split-view_container"],[1,"slds-split-view__toggle-button","slds-align--absolute-center"],["aria-expanded","false",1,"slds-button","slds-button_icon","slds-button_icon",2,"width","0.75rem","margin-left","0",3,"disabled","click"],["icon","left"],["icon","right"],["aria-hidden","true",1,"slds-split-view","slds-height_full"],[1,"slds-height_full",2,"margin-left","12px"]],template:function(e,t){1&e&&(i.F$t(a),i.TgZ(0,"div",0)(1,"div",1)(2,"div")(3,"button",2),i.NdJ("click",(function(){return t.expand("right")})),i._UZ(4,"system-button-icon",3),i.qZA(),i.TgZ(5,"button",2),i.NdJ("click",(function(){return t.expand("left")})),i._UZ(6,"system-button-icon",4),i.qZA()()(),i.TgZ(7,"article",5),i.Hsn(8),i.qZA()(),i.TgZ(9,"div",6),i.Hsn(10,1),i.qZA()),2&e&&(i.Tol(t.childLeft.containerClass),i.Udp("width",t.childRight.expanded?0:t.childLeft.expanded?"100%":null),i.xp6(3),i.Q6J("disabled",t.childRight.expanded),i.xp6(2),i.Q6J("disabled",t.childLeft.expanded),i.xp6(4),i.Tol(t.childRight.containerClass),i.Udp("width",t.childLeft.expanded?0:t.childRight.expanded?"100%":null))},dependencies:[o.J],encapsulation:2})}return SystemSplitContainer})()},42235:(e,t,s)=>{"use strict";s.d(t,{j:()=>l});var i=s(62242);const n=["*"];let l=(()=>{class SystemSplitContainerLeft{hidden=!1;expanded=!1;containerClass;static ɵfac=function(e){return new(e||SystemSplitContainerLeft)};static ɵcmp=i.Xpm({type:SystemSplitContainerLeft,selectors:[["system-split-container-left"]],hostVars:4,hostBindings:function(e,t){2&e&&(i.Akn(t.expanded?"width: 100%":null),i.ekj("slds-hide",t.hidden))},inputs:{containerClass:"containerClass"},ngContentSelectors:n,decls:1,vars:0,template:function(e,t){1&e&&(i.F$t(),i.Hsn(0))},encapsulation:2})}return SystemSplitContainerLeft})()},72637:(e,t,s)=>{"use strict";s.d(t,{I:()=>l});var i=s(62242);const n=["*"];let l=(()=>{class SystemSplitContainerRight{hidden=!1;expanded=!1;containerClass;static ɵfac=function(e){return new(e||SystemSplitContainerRight)};static ɵcmp=i.Xpm({type:SystemSplitContainerRight,selectors:[["system-split-container-right"]],hostVars:4,hostBindings:function(e,t){2&e&&(i.Akn(t.expanded?"width: 100%":null),i.ekj("slds-hide",t.hidden))},inputs:{containerClass:"containerClass"},ngContentSelectors:n,decls:1,vars:0,template:function(e,t){1&e&&(i.F$t(),i.Hsn(0))},encapsulation:2})}return SystemSplitContainerRight})()},12803:(e,t,s)=>{"use strict";s.d(t,{B:()=>n});var i=s(62242);let n=(()=>{class SystemStencil{static ɵfac=function(e){return new(e||SystemStencil)};static ɵcmp=i.Xpm({type:SystemStencil,selectors:[["system-stencil"]],decls:2,vars:0,consts:[[1,"slds-theme--shade",2,"background-color","#e4e9f3","min-width","100px"]],template:function(e,t){1&e&&(i.TgZ(0,"div",0),i._uU(1," "),i.qZA())},encapsulation:2})}return SystemStencil})()},42161:(e,t,s)=>{"use strict";s.d(t,{x:()=>g});var i=s(62242),n=s(44755),l=s(12803);const o=["system-table-stencils",""];function a(e,t){1&e&&i._UZ(0,"td",5)}function d(e,t){1&e&&i._UZ(0,"td")}function r(e,t){1&e&&i._UZ(0,"td",5)}function c(e,t){1&e&&(i.TgZ(0,"td"),i._UZ(1,"system-stencil"),i.qZA())}function u(e,t){1&e&&i._UZ(0,"td",5)}function m(e,t){if(1&e&&(i.TgZ(0,"tr",1),i.YNc(1,a,1,0,"td",2),i.YNc(2,d,1,0,"td",3),i.YNc(3,r,1,0,"td",2),i.YNc(4,c,2,0,"td",4),i.YNc(5,u,1,0,"td",2),i.qZA()),2&e){const e=t.$implicit,s=i.oxw();i.Q6J("ngStyle",s.linestyle(e)),i.xp6(1),i.Q6J("ngIf",s.dragHandles),i.xp6(1),i.Q6J("ngIf",s.rownumbers),i.xp6(1),i.Q6J("ngIf",s.select),i.xp6(1),i.Q6J("ngForOf",s.colArray),i.xp6(1),i.Q6J("ngIf",s.tools)}}let g=(()=>{class SystemTableStencils{columns=1;rows=5;tools=!1;select=!1;rownumbers=!1;dragHandles=!1;colArray=[];rowArray=[];ngOnInit(){let e=1;do{this.rowArray.push(e),e++}while(e<=this.rows);let t=1;do{this.colArray.push(t),t++}while(t<=this.columns)}linestyle(e){return{opacity:.2+.8/e}}static ɵfac=function(e){return new(e||SystemTableStencils)};static ɵcmp=i.Xpm({type:SystemTableStencils,selectors:[["","system-table-stencils",""]],inputs:{columns:"columns",rows:"rows",tools:"tools",select:"select",rownumbers:"rownumbers",dragHandles:"dragHandles"},attrs:o,decls:1,vars:1,consts:[[3,"ngStyle",4,"ngFor","ngForOf"],[3,"ngStyle"],["class","slds-cell-shrink",4,"ngIf"],[4,"ngIf"],[4,"ngFor","ngForOf"],[1,"slds-cell-shrink"]],template:function(e,t){1&e&&i.YNc(0,m,6,6,"tr",0),2&e&&i.Q6J("ngForOf",t.rowArray)},dependencies:[n.sg,n.O5,n.PC,l.B],encapsulation:2})}return SystemTableStencils})()},92403:(e,t,s)=>{"use strict";s.d(t,{t:()=>m});var i=s(62242),n=s(13278),l=s(26559),o=s(44755),a=s(72656),d=s(83463),r=s(78859);function c(e,t){if(1&e&&(i.TgZ(0,"p",11),i._UZ(1,"system-label",12),i.qZA()),2&e){const e=i.oxw().$implicit;i.xp6(1),i.Q6J("label",e.description)}}function u(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"div",2)(1,"button",3),i.NdJ("click",(function(){const t=i.CHM(e).$implicit,s=i.oxw();return i.KtG(s.toast.clearToast(t.id))})),i._UZ(2,"system-button-icon",4),i.qZA(),i.TgZ(3,"div",5),i._UZ(4,"system-utility-icon",6),i.TgZ(5,"div",7)(6,"h2",8),i._UZ(7,"system-label",9),i.qZA(),i.YNc(8,c,2,1,"p",10),i.qZA()()()}if(2&e){const e=t.$implicit,s=i.oxw();i.Q6J("ngStyle",s.toastStyle)("ngClass",s.getToastClass(e.type,e.theme)),i.xp6(2),i.Q6J("icon","close")("size","large"),i.xp6(2),i.Q6J("icon",s.getToastIcon(e.type))("size","small")("addclasses","slds-m-right--small slds-col slds-no-flex")("colorclass","slds-icon"),i.xp6(3),i.Q6J("label",e.text),i.xp6(1),i.Q6J("ngIf",e.description)}}let m=(()=>{class SystemToastContainer{toast;layout;renderer;cdr;constructor(e,t,s,i){this.toast=e,this.layout=t,this.renderer=s,this.cdr=i,this.renderer.listen("window","resize",(()=>this.cdr.detectChanges()))}get isnarrow(){return"small"==this.layout.screenwidth}get toastContainerStyle(){return this.isnarrow?{}:{width:"30rem","margin-left":"calc(50% - 15rem)"}}get toastStyle(){return this.isnarrow?{"min-width":"unset","border-radius":0,"border-bottom":"1px solid #fff"}:{}}getToastClass(e,t){let s="";if("alert"===t)s="slds-notify--alert slds-theme--alert-texture ";else s="slds-notify--toast ";switch(e){case"success":s+="slds-theme--success";break;case"warning":s+="slds-theme--warning";break;case"error":s+="slds-theme--error"}return this.isnarrow?s+" slds-size--1-of-1 slds-m-around--none":s}getToastIcon(e){switch(e){case"success":return"success";case"warning":return"warning";case"error":return"error";default:return"info"}}static ɵfac=function(e){return new(e||SystemToastContainer)(i.Y36(n.A),i.Y36(l.b),i.Y36(i.Qsj),i.Y36(i.sBO))};static ɵcmp=i.Xpm({type:SystemToastContainer,selectors:[["system-toast-container"]],decls:2,vars:2,consts:[[1,"slds-notify_container",3,"ngStyle"],["class","slds-notify","role","alert",3,"ngStyle","ngClass",4,"ngFor","ngForOf"],["role","alert",1,"slds-notify",3,"ngStyle","ngClass"],[1,"slds-button","slds-notify__close","slds-button--icon-inverse",3,"click"],[3,"icon","size"],[1,"slds-notify__content","slds-grid"],[3,"icon","size","addclasses","colorclass"],[1,"slds-col","slds-align-middle"],[1,"slds-text-heading--small"],[3,"label"],["style","max-width: 400px;overflow-wrap: break-word; white-space: normal;",4,"ngIf"],[2,"max-width","400px","overflow-wrap","break-word","white-space","normal"],["length","long",3,"label"]],template:function(e,t){1&e&&(i.TgZ(0,"div",0),i.YNc(1,u,9,10,"div",1),i.qZA()),2&e&&(i.Q6J("ngStyle",t.toastContainerStyle),i.xp6(1),i.Q6J("ngForOf",t.toast.activeToasts))},dependencies:[o.mk,o.sg,o.O5,o.PC,a.J,d._,r.r],encapsulation:2})}return SystemToastContainer})()},30494:(e,t,s)=>{"use strict";s.d(t,{S:()=>a});var i=s(62242),n=s(44755),l=s(72656);function o(e,t){if(1&e&&(i.TgZ(0,"div",7)(1,"div",8),i._uU(2),i.qZA()()),2&e){const e=i.oxw();i.xp6(2),i.Oqu(e.tooltiptext)}}let a=(()=>{class SystemTooltip{tooltiptext="";displayHelp=!1;toggleHelp(){this.displayHelp=!this.displayHelp}openHelp(){this.displayHelp=!0}closeHelp(){this.displayHelp=!1}static ɵfac=function(e){return new(e||SystemTooltip)};static ɵcmp=i.Xpm({type:SystemTooltip,selectors:[["system-tooltip"]],inputs:{tooltiptext:"tooltiptext"},decls:8,vars:2,consts:[[1,"slds-is-relative"],[1,"slds-form-element"],[1,"slds-form-element__icon","slds-align-middle"],[1,"slds-button","slds-button_icon","slds-button","slds-button_icon",3,"mouseover","mouseout"],[3,"icon"],[1,"slds-assistive-text"],["class","slds-popover slds-popover_tooltip slds-nubbin_bottom-left slds-is-absolute","role","tooltip","style","word-wrap: break-word;white-space: normal;width: 300px;bottom: 30px;left: -15px;",4,"ngIf"],["role","tooltip",1,"slds-popover","slds-popover_tooltip","slds-nubbin_bottom-left","slds-is-absolute",2,"word-wrap","break-word","white-space","normal","width","300px","bottom","30px","left","-15px"],[1,"slds-popover__body"]],template:function(e,t){1&e&&(i.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"button",3),i.NdJ("mouseover",(function(){return t.openHelp()}))("mouseout",(function(){return t.closeHelp()})),i._UZ(4,"system-button-icon",4),i.TgZ(5,"span",5),i._uU(6,"Help"),i.qZA()()()(),i.YNc(7,o,3,1,"div",6),i.qZA()),2&e&&(i.xp6(4),i.Q6J("icon","info"),i.xp6(3),i.Q6J("ngIf",t.displayHelp))},dependencies:[n.O5,l.J],encapsulation:2})}return SystemTooltip})()},58574:(e,t,s)=>{"use strict";s.d(t,{O:()=>u});var i=s(62242),n=s(13418),l=s(44755),o=s(72656),a=s(73361);function d(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"li",4),i.NdJ("cdkDragStarted",(function(){i.CHM(e);const t=i.oxw();return i.KtG(t.setIsDragging(!0))}))("cdkDragEnded",(function(){i.CHM(e);const t=i.oxw();return i.KtG(t.setIsDragging(!1))})),i.TgZ(1,"system-tree-item",5),i.NdJ("click",(function(){const t=i.CHM(e).$implicit,s=i.oxw();return i.KtG(s.handleClick(t.id))}))("toggleExpandedChange",(function(t){i.CHM(e);const s=i.oxw();return i.KtG(s.handleExpand(t))}))("dragPositionChange",(function(t){i.CHM(e);const s=i.oxw();return i.KtG(s.handleDragPosition(t))}))("onItemAdd",(function(t){i.CHM(e);const s=i.oxw();return i.KtG(s.onItemAdd.emit(t))})),i.qZA()()}if(2&e){const e=t.$implicit,s=i.oxw();i.Q6J("cdkDragData",e)("cdkDragDisabled",!s.config.draggable||e.systemTreeDefs.hasChildren),i.uIk("aria-level",e.systemTreeDefs.level)("aria-selected",e.systemTreeDefs.isSelected),i.xp6(1),i.Q6J("item",e)("customButtonsContainer",s.customButtonsContainer)("config",s.config)("isDragging",s.isDragging)("title",e.name)}}function r(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"div",6)(1,"button",7),i.NdJ("click",(function(){i.CHM(e);const t=i.oxw();return i.KtG(t.onItemAdd.emit(null))})),i._UZ(2,"system-button-icon",8),i.qZA()()}2&e&&(i.xp6(2),i.Q6J("icon","add")("size","small"))}const c=["*"];let u=(()=>{class SystemTree{sourceList=[];customButtonsContainer;selectedItem="";selectedItemChange=new i.vpe;onItemAdd=new i.vpe;onTreeDrop=new i.vpe;tree=[];dragPosition;isDragging=!1;treeConfig={draggable:!1,canadd:!1,expandall:!1,collapsible:!0};get config(){return this.treeConfig}set config(e){this.treeConfig.draggable=e.draggable||!1,this.treeConfig.canadd=e.canadd||!1,this.treeConfig.expandall=e.expandall||!1,this.treeConfig.collapsible=!e.hasOwnProperty("collapsible")||e.collapsible}ngOnChanges(e){e.sourceList&&this.buildTree(),e.selectedItem&&this.handleClick(this.selectedItem,!0)}buildTree(){this.tree=[],this.sortBySequence(),this.addTreeItem(),this.setHasChildren()}sortBySequence(){this.sourceList.sort(((e,t)=>e.name&&t.name?e.name>t.name?1:-1:0));let e=_.groupBy(this.sourceList,(e=>e.parent_id));this.sourceList=[];for(let t in e)e.hasOwnProperty(t)&&(e[t].sort(((e,t)=>e.parent_sequence&&t.parent_sequence?+e.parent_sequence>+t.parent_sequence?1:-1:0)),this.sourceList=[...this.sourceList,...e[t]])}addTreeItem(e="",t=1){for(let s of this.sourceList)(!s.parent_id&&""==e||s.parent_id==e)&&(s.systemTreeDefs||(s.systemTreeDefs={}),s.systemTreeDefs.expanded=!!this.config.collapsible&&(!!this.config.expandall||!!s.systemTreeDefs.expanded),s.systemTreeDefs.clickable=!s.systemTreeDefs.hasOwnProperty("clickable")||s.systemTreeDefs.clickable,s.systemTreeDefs.level=t,s.systemTreeDefs.isSelected=this.selectedItem==s.id,this.tree.push(s),s.systemTreeDefs.expanded&&this.addTreeItem(s.id,t+1))}setHasChildren(){this.tree.forEach((e=>{e.systemTreeDefs.hasChildren=this.sourceList.some((t=>t.parent_id==e.id))}))}handleDrop(e){if(this.isDragging=!1,!this.dragPosition)return;let t,s,i=e.item.data.parent_id,l=this.tree.find((e=>e.id==this.dragPosition.id)),o=this.tree.findIndex((e=>e.id==this.dragPosition.id));switch(this.dragPosition.position){case"before":let t=o-1<=0,s=this.tree[t?0:o-1];e.item.data.parent_id=t?null:s.systemTreeDefs.hasChildren?s.id:s.parent_id,e.item.data.systemTreeDefs.level=t?1:s.systemTreeDefs.hasChildren?s.systemTreeDefs.level+1:s.systemTreeDefs.level,o=t?0:o;break;case"item":e.previousIndex>o&&o++,e.item.data.systemTreeDefs.level=l.systemTreeDefs.level+1,e.item.data.parent_id=l.id,l.systemTreeDefs.hasChildren=!0;break;case"after":let i=o>=this.tree.length-1,n=this.tree[i?this.tree.length-1:o];e.item.data.systemTreeDefs.level=i?1:n.systemTreeDefs.hasChildren?n.systemTreeDefs.level+1:n.systemTreeDefs.level,e.item.data.parent_id=i?null:n.systemTreeDefs.hasChildren?n.id:n.parent_id,o=i?this.tree.length-1:e.previousIndex>o?o+1:o}e.previousIndex!=o&&(this.tree.some((e=>{if(e.id==i)return e.systemTreeDefs.hasChildren=this.sourceList.some((e=>e.parent_id==i)),!0})),(0,n.bA)(this.tree,e.previousIndex,o),t=this.tree.filter((t=>t.parent_id==e.item.data.parent_id||t.parent_id==i)).map(((e,t)=>({id:e.id,index:t}))),this.tree=this.tree.map((e=>{let s=t.findIndex((t=>t.id==e.id));return s>-1&&(e.parent_sequence=s),e}))),e.item.data.parent_id!=i&&(s={id:e.item.data.id,parent_id:e.item.data.parent_id}),this.dragPosition=null,this.onTreeDrop.emit({itemWithNewParent:s,newSortSequences:t})}setIsDragging(e){this.isDragging=e}handleDragPosition(e){this.dragPosition=e}handleExpand(e){this.sourceList.some((t=>{if(t.id==e)return t.systemTreeDefs.expanded=!t.systemTreeDefs.expanded,!0})),this.buildTree()}handleClick(e,t){this.tree.some((s=>{if(s.id==e)return s.systemTreeDefs&&s.systemTreeDefs.clickable?(s.systemTreeDefs.isSelected=!0,t||this.selectedItemChange.emit(e),this.selectedItem=e):this.handleExpand(e),!0})),this.tree.some((t=>{if(t.id!=e&&t.systemTreeDefs&&t.systemTreeDefs.isSelected)return t.systemTreeDefs.isSelected=!1,!0}))}trackByFn(e,t){return t.id}static ɵfac=function(e){return new(e||SystemTree)};static ɵcmp=i.Xpm({type:SystemTree,selectors:[["system-tree"]],inputs:{sourceList:"sourceList",customButtonsContainer:"customButtonsContainer",selectedItem:"selectedItem",config:"config"},outputs:{selectedItemChange:"selectedItemChange",onItemAdd:"onItemAdd",onTreeDrop:"onTreeDrop"},features:[i.TTD],ngContentSelectors:c,decls:5,vars:4,consts:[["role","tree",1,"tree-list-drag-boundary"],["cdkDropList","","cdkDropListSortingDisabled","","role","tree","aria-labelledby","treeheading",1,"slds-tree","slds-p-top--xxx-small",3,"cdkDropListData","cdkDropListDropped"],["role","treeitem","cdkDrag","","cdkDragBoundary",".tree-list-drag-boundary","class","slds-grid slds-drag--preview",3,"cdkDragData","cdkDragDisabled","cdkDragStarted","cdkDragEnded",4,"ngFor","ngForOf","ngForTrackBy"],["class","slds-grid slds-align-content-center slds-border--top slds-m-top--x-small slds-p-top--x-small",4,"ngIf"],["role","treeitem","cdkDrag","","cdkDragBoundary",".tree-list-drag-boundary",1,"slds-grid","slds-drag--preview",3,"cdkDragData","cdkDragDisabled","cdkDragStarted","cdkDragEnded"],[1,"slds-grid--vertical","slds-p-vertical--none","slds-tree__item",2,"width","100%",3,"item","customButtonsContainer","config","isDragging","title","click","toggleExpandedChange","dragPositionChange","onItemAdd"],[1,"slds-grid","slds-align-content-center","slds-border--top","slds-m-top--x-small","slds-p-top--x-small"],[1,"slds-button","slds-button--icon","slds-button--icon-border","slds-p-around--xx-small",3,"click"],[3,"icon","size"]],template:function(e,t){1&e&&(i.F$t(),i.TgZ(0,"div",0)(1,"ul",1),i.NdJ("cdkDropListDropped",(function(e){return t.handleDrop(e)})),i.YNc(2,d,2,9,"li",2),i.qZA()(),i.YNc(3,r,3,2,"div",3),i.Hsn(4)),2&e&&(i.xp6(1),i.Q6J("cdkDropListData",t.tree),i.xp6(1),i.Q6J("ngForOf",t.tree)("ngForTrackBy",t.trackByFn),i.xp6(1),i.Q6J("ngIf",t.config.canadd))},dependencies:[l.sg,l.O5,n.Wj,n.Zt,o.J,a.u],styles:[".cdk-drag-animating[_ngcontent-%COMP%]{transition:none}"]})}return SystemTree})()},73361:(e,t,s)=>{"use strict";s.d(t,{u:()=>m});var i=s(62242),n=s(44755),l=s(72656),o=s(78859);function a(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"button",11),i.NdJ("click",(function(t){i.CHM(e);const s=i.oxw();return i.KtG(s.expand(s.item,t))})),i._UZ(1,"system-button-icon",12),i.qZA()}if(2&e){const e=i.oxw();i.Q6J("disabled",e.config.expandall),i.xp6(1),i.Q6J("icon",e.item.systemTreeDefs.expanded?"chevrondown":"chevronright")}}function d(e,t){if(1&e&&i._UZ(0,"system-utility-icon",13),2&e){const e=i.oxw();i.Q6J("icon",e.config.icon||e.item.systemTreeDefs.icon||"record")("addclasses","slds-p-around--xxx-small slds-m-right--xx-small")}}function r(e,t){1&e&&i.GkF(0)}function c(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"div",14)(1,"button",15),i.NdJ("click",(function(){i.CHM(e);const t=i.oxw();return i.KtG(t.addItem(t.item.id,t.item.name))})),i._UZ(2,"system-button-icon",16),i.qZA()()}}const u=function(e){return{$implicit:e}};let m=(()=>{class SystemTreeItem{customButtonsContainer;onItemAdd=new i.vpe;toggleExpandedChange=new i.vpe;dragPositionChange=new i.vpe;item;config={};isDragging=!1;dragPosition="";addItem(e,t){this.onItemAdd.emit({id:e,name:t})}expand(e,t){this.toggleExpandedChange.emit(e.id),t&&t.stopPropagation&&t.stopPropagation()}setPosition(e){this.dragPosition=e,this.isDragging&&this.dragPositionChange.emit(e?{id:this.item.id,position:e}:null)}static ɵfac=function(e){return new(e||SystemTreeItem)};static ɵcmp=i.Xpm({type:SystemTreeItem,selectors:[["system-tree-item"]],inputs:{customButtonsContainer:"customButtonsContainer",item:"item",config:"config",isDragging:"isDragging"},outputs:{onItemAdd:"onItemAdd",toggleExpandedChange:"toggleExpandedChange",dragPositionChange:"dragPositionChange"},decls:13,vars:14,consts:[[1,"slds-p-left--x-small",3,"mouseleave"],[2,"height","0.37rem","width","100%",3,"mouseenter"],[1,"slds-grid","slds-grid--align-spread","slds-grid_vertical-align-center",3,"mouseenter"],[1,"slds-grid","slds-grid_vertical-align-center","slds-grow","slds-truncate"],[2,"min-width","16px"],["class","slds-button slds-button_icon slds-m-right--xx-small slds-m-top--none","aria-expanded","true","aria-hidden","true","tabindex","-1",3,"disabled","click",4,"ngIf"],["size","small",3,"icon","addclasses",4,"ngIf"],[1,"slds-truncate"],[1,"slds-tree__item-label","slds-truncate"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["class","slds-m-right--xx-small",4,"ngIf"],["aria-expanded","true","aria-hidden","true","tabindex","-1",1,"slds-button","slds-button_icon","slds-m-right--xx-small","slds-m-top--none",3,"disabled","click"],["size","xx-small",3,"icon"],["size","small",3,"icon","addclasses"],[1,"slds-m-right--xx-small"],[1,"slds-button","slds-button_icon","slds-m-top--none",3,"click"],["icon","add","size","xx-small"]],template:function(e,t){1&e&&(i.TgZ(0,"div",0),i.NdJ("mouseleave",(function(){return t.setPosition(null)})),i.TgZ(1,"div",1),i.NdJ("mouseenter",(function(){return t.setPosition("before")})),i.qZA(),i.TgZ(2,"article",2),i.NdJ("mouseenter",(function(){return t.setPosition("item")})),i.TgZ(3,"div",3)(4,"div",4),i.YNc(5,a,2,2,"button",5),i.YNc(6,d,1,2,"system-utility-icon",6),i.qZA(),i.TgZ(7,"div",7)(8,"span",8),i._uU(9),i.qZA()()(),i.YNc(10,r,1,0,"ng-container",9),i.YNc(11,c,3,0,"div",10),i.qZA(),i.TgZ(12,"div",1),i.NdJ("mouseenter",(function(){return t.setPosition("after")})),i.qZA()()),2&e&&(i.xp6(1),i.Udp("box-shadow",t.isDragging&&"before"==t.dragPosition?"0 -2px":"none"),i.xp6(1),i.Udp("box-shadow",t.isDragging&&"item"==t.dragPosition?"0 0 0 2.5px":"none"),i.xp6(3),i.Q6J("ngIf",t.config.collapsible&&t.item.systemTreeDefs.hasChildren),i.xp6(1),i.Q6J("ngIf",!t.config.collapsible),i.xp6(3),i.Oqu(t.item.name),i.xp6(1),i.Q6J("ngTemplateOutlet",t.customButtonsContainer)("ngTemplateOutletContext",i.VKq(12,u,t.item.id)),i.xp6(1),i.Q6J("ngIf",t.config.canadd&&t.item.systemTreeDefs.isSelected),i.xp6(1),i.Udp("box-shadow",t.isDragging&&"after"==t.dragPosition?"0 2px":"none"))},dependencies:[n.O5,n.tP,l.J,o.r],encapsulation:2})}return SystemTreeItem})()},18322:(e,t,s)=>{"use strict";s.d(t,{E:()=>l});var i=s(62242);const n=["*"];let l=(()=>{class SystemTrendIndicator{trend="neutral";static ɵfac=function(e){return new(e||SystemTrendIndicator)};static ɵcmp=i.Xpm({type:SystemTrendIndicator,selectors:[["system-trend-indicator"]],inputs:{trend:"trend"},ngContentSelectors:n,decls:6,vars:1,consts:[[1,"slds-icon-trend","slds-is-animated"],["viewBox","0 0 16 16","aria-hidden","true"],["d","M.75 8H11M8 4.5L11.5 8 8 11.5",1,"slds-icon-trend__arrow"],["cy","8","cx","8","r","7.375","transform","rotate(-28 8 8) scale(-1 1) translate(-16 0)",1,"slds-icon-trend__circle"],[1,"slds-assistive-text"]],template:function(e,t){1&e&&(i.F$t(),i.TgZ(0,"span",0),i.O4$(),i.TgZ(1,"svg",1),i._UZ(2,"path",2)(3,"circle",3),i.qZA(),i.kcU(),i.TgZ(4,"span",4),i.Hsn(5),i.qZA()()),2&e&&i.uIk("data-slds-trend",t.trend)},encapsulation:2})}return SystemTrendIndicator})()},78859:(e,t,s)=>{"use strict";s.d(t,{r:()=>o});var i=s(62242),n=s(50151),l=s(44755);let o=(()=>{class SystemUtilityIcon{cdref;icon="";size="small";addclasses="";colorclass="slds-icon-text-default";title="";click=new i.vpe;constructor(e){this.cdref=e}ngOnChanges(e){this.cdref.detectChanges()}getSvgHRef(){return"./vendor/sldassets/icons/"+this._sprite+"-sprite/svg/symbols.svg#"+this._icon}getIconClass(){return"slds-icon slds-icon_container  slds-icon--"+this._size+" "+this.colorclass+" "+this.addclasses}get _icon(){return this.icon&&this.icon.indexOf(":")>0?this.icon.split(":")[1]:this.icon}get _sprite(){return this.icon&&this.icon.indexOf(":")>0?this.icon.split(":")[0]:"utility"}get _size(){return this.icon&&this.icon.indexOf(":")>0&&this.icon.split(":").length>2?this.icon.split(":")[2]:this.size?this.size:"small"}static ɵfac=function(e){return new(e||SystemUtilityIcon)(i.Y36(i.sBO))};static ɵcmp=i.Xpm({type:SystemUtilityIcon,selectors:[["system-utility-icon"]],inputs:{icon:"icon",size:"size",addclasses:"addclasses",colorclass:"colorclass",title:"title"},outputs:{click:"click"},features:[i.TTD],decls:3,vars:3,consts:[[1,"slds-icon_container","slds-icon-text-error",3,"system-title","click"],["aria-hidden","true",3,"ngClass"]],template:function(e,t){1&e&&(i.TgZ(0,"div",0),i.NdJ("click",(function(e){return t.click.emit(e)})),i.O4$(),i.TgZ(1,"svg",1),i._UZ(2,"use"),i.qZA()()),2&e&&(i.Q6J("system-title",t.title),i.xp6(1),i.Q6J("ngClass",t.getIconClass()),i.xp6(1),i.uIk("href",t.getSvgHRef(),null,"xlink"))},dependencies:[n.S,l.mk],encapsulation:2,changeDetection:0})}return SystemUtilityIcon})()},34036:(e,t,s)=>{"use strict";s.d(t,{N:()=>n});var i=s(62242);let n=(()=>{class SystemModuleCustomPipe{transform(e,t){let s=[];for(let i of e)i.module==t&&"custom"==i.type&&s.push(i);return s}static ɵfac=function(e){return new(e||SystemModuleCustomPipe)};static ɵpipe=i.Yjl({name:"systemmodulecustompipe",type:SystemModuleCustomPipe,pure:!1})}return SystemModuleCustomPipe})()},37302:(e,t,s)=>{"use strict";s.d(t,{m:()=>n});var i=s(62242);let n=(()=>{class SystemModuleGlobalPipe{transform(e,t){let s=[];for(let i of e)i.module==t&&"global"==i.type&&s.push(i);return s}static ɵfac=function(e){return new(e||SystemModuleGlobalPipe)};static ɵpipe=i.Yjl({name:"systemmoduleglobalpipe",type:SystemModuleGlobalPipe,pure:!0})}return SystemModuleGlobalPipe})()},75572:(e,t,s)=>{"use strict";s.d(t,{u:()=>n});var i=s(62242);let n=(()=>{class SystemStripHtmlTagsPipe{transform(e){return e.replace(/<.*?>/g,"")}static ɵfac=function(e){return new(e||SystemStripHtmlTagsPipe)};static ɵpipe=i.Yjl({name:"systemstriphtmltagspipe",type:SystemStripHtmlTagsPipe,pure:!1})}return SystemStripHtmlTagsPipe})()},24817:(e,t,s)=>{"use strict";s.d(t,{L:()=>o});var i=s(44755),n=s(62242),l=s(14505);let o=(()=>{class systemrichtextservice{_document;backend;savedSelection;selectedText;selectedHtml;uploadUrl;dummyHtmlElement;editorContainer;savedSelectionParentElement;constructor(e,t){this._document=e,this.backend=t,this.dummyHtmlElement=document.createElement("div")}executeCommand(e){"h1"!==e&&"h2"!==e&&"h3"!==e&&"h4"!==e&&"h5"!==e&&"h6"!==e&&"p"!==e&&"pre"!==e&&"div"!==e||this._document.execCommand("formatBlock",!1,e),this._document.execCommand(e,!1,null)}insertColor(e,t){this.restoreSelection()&&("textColor"===t?this._document.execCommand("foreColor",!1,e):this._document.execCommand("hiliteColor",!1,e))}setFontName(e){this._document.execCommand("fontName",!1,e)}setFontSize(e){this._document.execCommand("fontSize",!1,e)}insertHtml(e){if(!this._document.execCommand("insertHTML",!1,e))throw new Error("Unable to perform the operation")}saveSelection(){if(window.getSelection){const e=window.getSelection();if(this.savedSelectionParentElement=e.anchorNode.parentElement,e.getRangeAt&&e.rangeCount){this.savedSelection=e.getRangeAt(0),this.selectedText=e.toString();let t=document.createElement("div");t.appendChild(this.savedSelection.cloneContents()),this.selectedHtml=t.innerHTML}}else this._document.getSelection&&this._document.createRange?this.savedSelection=document.createRange():this.savedSelection=null}restoreSelection(){if(!this.savedSelection)return!1;if(window.getSelection){const e=window.getSelection();return e.removeAllRanges(),e.addRange(this.savedSelection),!0}return!!this._document.getSelection||void 0}checkSelection(){if(0===this.savedSelection.toString().length)throw new Error("No Selection Made");return!0}insertImage(e,t){const s=document.createElement("IMG");s.src=e,this.insertElement(s)}insertAnchor(e,t,s={}){const i=document.createElement("A");i.href=e,this.addDataAttributes(i,s),i.innerHTML=t,this.insertElement(i)}addDataAttributes(e,t){for(let s in t)e.dataset[s]=t[s]}insertElement(e){if(this.savedSelection){this.resetRangeBoundaries(this.editorContainer);let t=this.getRangeCurrentTarget(this.savedSelection.startContainer,this.editorContainer);const s=this.savedSelection.collapsed&&0==this.savedSelection.startOffset;let i;this.editorContainer.isEqualNode(t)?(i=s?this.editorContainer.firstChild:null,this.insertElementForNode(e,this.editorContainer,i)):(i=s?t:t.nextSibling,this.insertElementForNode(e,t.parentElement,i)),this.clearSelection()}else this.insertElementForNode(e,this.editorContainer)}clearSelection(){this.savedSelection=void 0,window.getSelection?window.getSelection().removeAllRanges():document.getSelection&&document.getSelection().removeAllRanges()}resetRangeBoundaries(e){this.savedSelection&&(e.contains(this.savedSelection.startContainer)||this.savedSelection.setStart(e,0),e.contains(this.savedSelection.endContainer)||this.savedSelection.setEnd(e,0))}insertElementForNode(e,t,s){this.savedSelection&&this.savedSelection.deleteContents(),s?t.insertBefore(e,s):t.appendChild(e)}getRangeCurrentTarget(e,t){let s=e;if(t.isEqualNode(s))return t;for(;1!==s.nodeType;)s=s.parentElement;return s}createCustomClass(e){const t=e.tag?e.tag:"span",s="<"+t+' class="'+e.class+'">'+this.selectedText+"</"+t+">";this.insertHtml(s)}decodeHTMLEntities(e){return this.dummyHtmlElement.innerHTML=e,this.dummyHtmlElement.innerText}encodeHTMLEntities(e){return this.dummyHtmlElement.innerText=e,this.dummyHtmlElement.innerHTML}marketingActions=null;loadMarketingActions(e=!1){!e&&_.isArray(this.marketingActions)||this.backend.getRequest("module/MarketingActions/all/actions").subscribe((e=>{this.marketingActions=e.actions}))}static ɵfac=function(e){return new(e||systemrichtextservice)(n.LFG(i.K0),n.LFG(l.y))};static ɵprov=n.Yz7({token:systemrichtextservice,factory:systemrichtextservice.ɵfac})}return systemrichtextservice})()},57239:(e,t,s)=>{"use strict";s.r(t),s.d(t,{SystemComponents:()=>el});var i=s(13418),n=s(44755),l=s(95030),o=s(84357),a=s(34036),d=s(37302),r=s(75572),c=s(76010),u=s(62242),m=s(55329),g=s(4154),h=s(13278),p=s(72656),f=s(83463),b=s(59621),v=s(83499),y=s(75767),x=s(1916);function w(e,t){if(1&e&&(u.TgZ(0,"div",19),u._UZ(1,"system-label",20),u.qZA()),2&e){const e=u.oxw();u.Udp("visibility",e.pausing?"hidden":"visible")}}function Z(e,t){if(1&e&&u._UZ(0,"div",21),2&e){const e=u.oxw();u.Q6J("innerHTML",e.theTextHtml,u.oJD)}}function T(e,t){if(1&e&&(u.TgZ(0,"option",22),u._uU(1),u.qZA()),2&e){const e=t.$implicit,s=t.index,i=u.oxw();u.Q6J("value",e.id)("selected",s==i.selectedLanguage),u.xp6(1),u.Oqu(e.name)}}function C(e,t){1&e&&(u.ynx(0),u._UZ(1,"system-button-icon",16)(2,"system-label",23),u.BQk()),2&e&&(u.xp6(1),u.Q6J("icon","pause")("position","left"))}function k(e,t){1&e&&(u.ynx(0),u._UZ(1,"system-button-icon",16)(2,"system-label",24),u.BQk()),2&e&&(u.xp6(1),u.Q6J("icon","record")("position","left"))}let A=(()=>{class SpeechRecognition{language;metadata;toast;changeDetRef;applicationRef;self;recognition;start_timestamp;textfield;part1fromField;part2fromField;theText="";theTextNewest="";theTextHtml="";dirty=!1;errorOccurred=!1;toRestart=!1;recognizing=!1;cancelling=!1;stopping=!1;pausing=!1;working=!1;languages=[{id:"de_DE",name:"Deutsch"},{id:"en_US",name:"English"}];selectedLanguage=0;constructor(e,t,s,i,n){this.language=e,this.metadata=t,this.toast=s,this.changeDetRef=i,this.applicationRef=n}ngOnInit(){window.SpeechRecognition||window.webkitSpeechRecognition||(this.toast.sendToast("Sorry, speech recognition is not possible with your web browser.","error"),this.self.destroy()),"de_DE"===this.language.currentlanguage?this.selectedLanguage=0:this.selectedLanguage=1,this.recognition=new(window.SpeechRecognition||window.webkitSpeechRecognition),this.recognition.continuous=!0,this.recognition.lang=this.languages[this.selectedLanguage].id.replace("_","-"),this.recognition.interimResults=!0,this.recognition.maxAlternatives=1,this.part1fromField=this.textfield.element.nativeElement.value.substring(0,this.textfield.element.nativeElement.selectionStart),this.part2fromField=this.textfield.element.nativeElement.value.substring(this.textfield.element.nativeElement.selectionEnd),this.recognition.onresult=e=>{this.working=!0,this.changeDetRef.detectChanges();let t="",s=!0;for(let i of e.results)i.isFinal||(s=!1),t+=i[0].transcript,this.theTextNewest=t;s&&(this.working=!1,this.changeDetRef.detectChanges()),!this.dirty&&this.theTextNewest&&(this.dirty=!0),this.dirty&&(this.theTextHtml="<p>"+this.linebreaks2html(this.capitalize(this.theText+" "+this.theTextNewest))+"</p>",this.changeDetRef.detectChanges())},this.recognition.onerror=e=>{switch(e.error){case"network":this.errorOccurred=!0,this.sendErrorToast(this.language.getLabel("MSG_NO_NETWORK"),"warning");break;case"no-speech":return void(this.stopping||this.recognition.stop());case"audio-capture":this.errorOccurred=!0,this.sendErrorToast(this.language.getLabel("MSG_NO_MICROPHONE"));break;case"not-allowed":this.errorOccurred=!0,e.timeStamp-this.start_timestamp<100?this.sendErrorToast(this.language.getLabel("LBL_BLOCKED")):this.sendErrorToast(this.language.getLabel("LBL_DENIED"))}this.applicationRef.tick()},this.recognition.onend=e=>{this.working=!1,this.cancelling?this.self.destroy():!this.pausing||this.stopping?this.acceptAndClose():this.applyText()},this.start()}doRestart(){this.toRestart=!0,this.recognition.stop()}applyText(){this.theText+=""===this.theText?this.capitalize(this.theTextNewest):this.theTextNewest,this.theTextNewest=""}acceptAndClose(){if(this.applyText(),this.errorOccurred)""===this.theText&&""===this.theTextNewest&&this.self.destroy();else{if(!this.stopping)return this.recognition.start(),void(this.toRestart&&(this.toRestart=!1));this.recognizing=!1,this.textfield.element.nativeElement.value=this.part1fromField+this.theText+this.part2fromField,this.textfield.element.nativeElement.dispatchEvent(new Event("change")),this.self.destroy()}}start(e=null){this.recognizing||(this.recognizing=!0,this.recognition.start(),e&&(this.start_timestamp=e.timeStamp))}buttonAcceptClose(){this.stopping=!0,this.pausing?this.acceptAndClose():this.recognition.stop()}buttonPause(){this.pausing=!this.pausing,this.changeDetRef.detectChanges(),this.applicationRef.tick(),this.pausing&&this.recognition.stop(),!this.pausing&&this.recognition.start()}buttonCancel(){this.cancelling=!0,this.pausing&&this.recognition.start(),this.recognition.abort(),this.self.destroy()}changeLang(e){this.selectedLanguage=e.target.selectedIndex,this.recognition.lang=this.languages[this.selectedLanguage].id,this.doRestart()}capitalize(e){return 0===this.part1fromField.length?e.replace(/\S/,(e=>e.toUpperCase())):e}linebreaks2html(e){return e.replace(/\n\n/g,"</p><p>").replace(/\n/g,"<br>")}sendErrorToast(e,t="error"){this.toast.sendToast(this.language.getLabel("ERR_SPEECH_RECOGNITION")+": "+e+".",t,"","error"!==t)}static ɵfac=function(e){return new(e||SpeechRecognition)(u.Y36(m.d),u.Y36(g.Pu),u.Y36(h.A),u.Y36(u.sBO),u.Y36(u.z2F))};static ɵcmp=u.Xpm({type:SpeechRecognition,selectors:[["ng-component"]],decls:24,vars:9,consts:[["size","large"],[3,"close"],["label","LBL_SPEECH_RECOGNITION"],[2,"min-height","300px"],["class","slds-text-align_center slds-m-vertical--x-large","style","margin-bottom:3rem",3,"visibility",4,"ngIf"],["class","slds-text-longform",3,"innerHTML",4,"ngIf"],[1,"slds-grid","slds-grid_align-spread"],[1,"slds-col"],[1,"slds-select_container"],[1,"slds-select",3,"change"],[3,"value","selected",4,"ngFor","ngForOf"],[1,"slds-button","slds-button--neutral",3,"click"],["label","LBL_CANCEL"],[1,"slds-button","slds-button--neutral",3,"disabled","click"],[4,"ngIf"],[1,"slds-button","slds-button--brand",3,"disabled","click"],[3,"icon","position"],["label","LBL_ACCEPT"],["label","LBL_CLOSE"],[1,"slds-text-align_center","slds-m-vertical--x-large",2,"margin-bottom","3rem"],["label","LBL_WAITING_START_SPEAKING"],[1,"slds-text-longform",3,"innerHTML"],[3,"value","selected"],["label","LBL_PAUSE"],["label","LBL_CONTINUE"]],template:function(e,t){1&e&&(u.TgZ(0,"system-modal",0)(1,"system-modal-header",1),u.NdJ("close",(function(){return t.buttonCancel()})),u._UZ(2,"system-label",2),u.qZA(),u.TgZ(3,"system-modal-content")(4,"div",3),u.YNc(5,w,2,2,"div",4),u.YNc(6,Z,1,1,"div",5),u.qZA()(),u.TgZ(7,"system-modal-footer")(8,"div",6)(9,"div",7)(10,"div",8)(11,"select",9),u.NdJ("change",(function(e){return t.changeLang(e)})),u.YNc(12,T,2,3,"option",10),u.qZA()()(),u.TgZ(13,"div",7)(14,"button",11),u.NdJ("click",(function(){return t.buttonCancel()})),u._UZ(15,"system-label",12),u.qZA(),u.TgZ(16,"button",13),u.NdJ("click",(function(){return t.buttonPause()})),u.YNc(17,C,3,2,"ng-container",14),u.YNc(18,k,3,2,"ng-container",14),u.qZA(),u.TgZ(19,"button",15),u.NdJ("click",(function(){return t.buttonAcceptClose()})),u._UZ(20,"system-button-icon",16)(21,"system-label",17),u._uU(22," & "),u._UZ(23,"system-label",18),u.qZA()()()()()),2&e&&(u.xp6(5),u.Q6J("ngIf",!t.dirty),u.xp6(1),u.Q6J("ngIf",t.dirty),u.xp6(6),u.Q6J("ngForOf",t.languages),u.xp6(4),u.Q6J("disabled",t.cancelling),u.xp6(1),u.Q6J("ngIf",!t.pausing),u.xp6(1),u.Q6J("ngIf",t.pausing),u.xp6(1),u.Q6J("disabled",!t.dirty||t.cancelling),u.xp6(1),u.Q6J("icon","stop")("position","left"))},dependencies:[n.sg,n.O5,l.YN,l.Kr,p.J,f._,b.j,v.x,y.p,x.y],encapsulation:2})}return SpeechRecognition})();var L=s(74994),I=s(74610);const S=function(e){return{"slds-is-open":e}};let M=(()=>{class SystemButtonGroup{metadata;items=[];action=new u.vpe;isopen=!1;constructor(e){this.metadata=e}toggleOpen(){this.isopen=!this.isopen}static ɵfac=function(e){return new(e||SystemButtonGroup)(u.Y36(g.Pu))};static ɵcmp=u.Xpm({type:SystemButtonGroup,selectors:[["system-button-group"]],inputs:{items:"items"},outputs:{action:"action"},decls:20,vars:3,consts:[["role","group",1,"slds-button-group"],[1,"slds-button","slds-button_neutral"],[1,"slds-dropdown-trigger","slds-dropdown-trigger_click","slds-button_last",3,"ngClass"],[1,"slds-button","slds-button_icon","slds-button_icon-border-filled",3,"click"],["icon","down"],[1,"slds-dropdown","slds-dropdown_right","slds-dropdown_actions"],["role","menu",1,"slds-dropdown__list"],["role","presentation",1,"slds-dropdown__item"],["href","javascript:void(0);","role","menuitem","tabindex","0"],["title","Overflow Item One",1,"slds-truncate"],["href","javascript:void(0);","role","menuitem","tabindex","-1"],["title","Overflow Item Two",1,"slds-truncate"],["title","Overflow Item Three",1,"slds-truncate"]],template:function(e,t){1&e&&(u.TgZ(0,"div",0)(1,"button",1),u._uU(2,"Refresh"),u.qZA(),u.TgZ(3,"div",2)(4,"button",3),u.NdJ("click",(function(){return t.toggleOpen()})),u._UZ(5,"system-button-icon",4),u.qZA(),u.TgZ(6,"div",5)(7,"ul",6)(8,"li",7)(9,"a",8)(10,"span",9),u._uU(11,"Overflow Item One"),u.qZA()()(),u.TgZ(12,"li",7)(13,"a",10)(14,"span",11),u._uU(15,"Overflow Item Two"),u.qZA()()(),u.TgZ(16,"li",7)(17,"a",10)(18,"span",12),u._uU(19,"Overflow Item Three"),u.qZA()()()()()()()),2&e&&(u.xp6(3),u.Q6J("ngClass",u.VKq(1,S,t.isopen)))},dependencies:[n.mk,p.J],encapsulation:2})}return SystemButtonGroup})();var J=s(55399),O=s(72400),N=s(78807);const F=["*"];let q=(()=>{class SystemCardFooter{static ɵfac=function(e){return new(e||SystemCardFooter)};static ɵcmp=u.Xpm({type:SystemCardFooter,selectors:[["system-card-footer"]],ngContentSelectors:F,decls:2,vars:0,consts:[[1,"slds-card__footer"]],template:function(e,t){1&e&&(u.F$t(),u.TgZ(0,"footer",0),u.Hsn(1),u.qZA())},encapsulation:2})}return SystemCardFooter})();var E=s(20701),Y=s(69503),D=s(88658),U=s(7514),Q=s(20528),R=s(61553),j=s(97516),B=s(30051),G=s(26951),P=s(77579);let H=(()=>{class SystemConfirmDialog{language;self={};answer=null;answerSubject=null;title="title";message="message";constructor(e){this.language=e,this.answerSubject=new P.x,this.answer=this.answerSubject.asObservable()}ok(){this.answerSubject.next(!0),this.answerSubject.complete(),this.self.destroy()}cancel(){this.answerSubject.next(!1),this.answerSubject.complete(),this.self.destroy()}static ɵfac=function(e){return new(e||SystemConfirmDialog)(u.Y36(m.d))};static ɵcmp=u.Xpm({type:SystemConfirmDialog,selectors:[["system-confirm-dialog"]],decls:13,vars:2,consts:[[1,"slds-backdrop","slds-backdrop--open"],["role","dialog","tabindex","-1",1,"slds-modal","slds-fade-in-open"],[1,"slds-modal__container"],[1,"slds-modal__header"],[1,"slds-text-heading--medium"],[1,"slds-modal__content","slds-p-around--medium"],[1,"slds-modal__footer"],[1,"slds-button","slds-button--neutral",3,"click"],["label","LBL_CANCEL"],[1,"slds-button","slds-button--brand",3,"click"],["label","LBL_OK"]],template:function(e,t){1&e&&(u._UZ(0,"div",0),u.TgZ(1,"div",1)(2,"div",2)(3,"div",3)(4,"h2",4),u._uU(5),u.qZA()(),u.TgZ(6,"div",5),u._uU(7),u.qZA(),u.TgZ(8,"div",6)(9,"button",7),u.NdJ("click",(function(){return t.cancel()})),u._UZ(10,"system-label",8),u.qZA(),u.TgZ(11,"button",9),u.NdJ("click",(function(){return t.ok()})),u._UZ(12,"system-label",10),u.qZA()()()()),2&e&&(u.xp6(5),u.Oqu(t.title),u.xp6(2),u.hij(" ",t.message," "))},dependencies:[f._],styles:["[_nghost-%COMP%]{position:relative;z-index:9100}"]})}return SystemConfirmDialog})();var z=s(30034),V=s(87060),$=s(46538),K=s(84270);let X=(()=>{class SystemDuelingPicklistItem{id="";label="";static ɵfac=function(e){return new(e||SystemDuelingPicklistItem)};static ɵcmp=u.Xpm({type:SystemDuelingPicklistItem,selectors:[["system-dueling-picklist-item"]],inputs:{id:"id",label:"label"},decls:0,vars:0,template:function(e,t){},encapsulation:2})}return SystemDuelingPicklistItem})();function W(e,t){if(1&e){const e=u.EpF();u.TgZ(0,"li",10),u.NdJ("click",(function(){const t=u.CHM(e).$implicit,s=u.oxw();return u.KtG(s.selectItem(t.id,"left"))})),u.TgZ(1,"div",11)(2,"span",12),u._UZ(3,"system-label",13),u.qZA()()()}if(2&e){const e=t.$implicit,s=u.oxw();u.xp6(1),u.uIk("aria-selected",s.isSelected(e.id,"left")),u.xp6(2),u.Q6J("label",e.label)}}function ee(e,t){if(1&e){const e=u.EpF();u.TgZ(0,"li",10),u.NdJ("click",(function(){const t=u.CHM(e).$implicit,s=u.oxw();return u.KtG(s.selectItem(t.id,"right"))})),u.TgZ(1,"div",11)(2,"span",12),u._UZ(3,"system-label",13),u.qZA()()()}if(2&e){const e=t.$implicit,s=u.oxw();u.xp6(1),u.uIk("aria-selected",s.isSelected(e.id,"right")),u.xp6(2),u.Q6J("label",e.label)}}let te=(()=>{class SystemDuelingPicklist{elementRef;cdRef;renderer;selectItemlist;selectList=[];selectedleft=[];selectedright=[];selectedIDs=[];label="";listHeight="7";disabled=!1;focusedItemId;onChange;constructor(e,t,s){this.elementRef=e,this.cdRef=t,this.renderer=s}ngAfterContentInit(){this.selectItemlist.forEach((e=>this.selectList.push({id:e.id,label:e.label})))}registerOnChange(e){this.onChange=e}registerOnTouched(e){}writeValue(e){e&&(this.selectedIDs=e.split(","))}get availableItems(){return this.selectItemlist.filter((e=>this.selectedIDs.indexOf(e.id)<0))}get selectedItems(){return this.selectItemlist.filter((e=>this.selectedIDs.indexOf(e.id)>=0))}selectItem(e,t){let s=this["selected"+t].indexOf(e);s>=0?this["selected"+t].splice(s,1):this["selected"+t].push(e)}onFieldDrop(e){let t=e.previousContainer.data.splice(e.previousIndex,1);e.container.data.splice(e.currentIndex,0,t[0])}isSelected(e,t){return this["selected"+t].indexOf(e)>=0}addItems(){this.selectedleft.forEach((e=>this.selectedIDs.push(e))),this.selectedleft=[],this.onChange(this.selectedIDs.join(","))}removeItems(){this.selectedright.forEach((e=>this.selectedIDs.splice(this.selectedIDs.indexOf(e),1))),this.selectedright=[],this.onChange(this.selectedIDs.join(","))}static ɵfac=function(e){return new(e||SystemDuelingPicklist)(u.Y36(u.SBq),u.Y36(u.sBO),u.Y36(u.Qsj))};static ɵcmp=u.Xpm({type:SystemDuelingPicklist,selectors:[["system-dueling-picklist"]],contentQueries:function(e,t,s){if(1&e&&u.Suo(s,X,4),2&e){let e;u.iGM(e=u.CRH())&&(t.selectItemlist=e)}},inputs:{selectList:"selectList",label:"label",listHeight:"listHeight",disabled:"disabled"},features:[u._Bn([{provide:l.JU,useExisting:(0,u.Gpc)((()=>SystemDuelingPicklist)),multi:!0}])],decls:14,vars:4,consts:[[1,"slds-dueling-list"],[1,"slds-dueling-list__column",2,"width","calc(50% - 20px)"],[1,"slds-dueling-list__options","slds-size--1-of-1"],["aria-describedby","option-drag-label","role","listbox",1,"slds-listbox","slds-listbox_vertical"],["role","presentation","class","slds-listbox__item",3,"click",4,"ngFor","ngForOf"],[1,"slds-dueling-list__column"],[1,"slds-button","slds-button_icon","slds-button_icon-container",3,"disabled","click"],["icon","right"],["icon","left"],["aria-describedby","option-drag-label","aria-multiselectable","true","role","listbox",1,"slds-listbox","slds-listbox_vertical"],["role","presentation",1,"slds-listbox__item",3,"click"],["role","option","tabindex","0",1,"slds-listbox__option","slds-p-around--xx-small"],[1,"slds-truncate"],[3,"label"]],template:function(e,t){1&e&&(u.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"ul",3),u.YNc(4,W,4,2,"li",4),u.qZA()()(),u.TgZ(5,"div",5)(6,"button",6),u.NdJ("click",(function(){return t.addItems()})),u._UZ(7,"system-button-icon",7),u.qZA(),u.TgZ(8,"button",6),u.NdJ("click",(function(){return t.removeItems()})),u._UZ(9,"system-button-icon",8),u.qZA()(),u.TgZ(10,"div",1)(11,"div",2)(12,"ul",9),u.YNc(13,ee,4,2,"li",4),u.qZA()()()()),2&e&&(u.xp6(4),u.Q6J("ngForOf",t.availableItems),u.xp6(2),u.Q6J("disabled",0==t.selectedleft.length),u.xp6(2),u.Q6J("disabled",0==t.selectedright.length),u.xp6(5),u.Q6J("ngForOf",t.selectedItems))},dependencies:[n.sg,p.J,f._],encapsulation:2})}return SystemDuelingPicklist})();var se=s(82995),ie=s(75920),ne=s(83348);const le=["componentcontainer"];let oe=(()=>{class SystemDynamicRouteContainer{metadata;session;router;route;componentcontainer;routercomponent=null;constructor(e,t,s,i){this.metadata=e,this.session=t,this.router=s,this.route=i,this.session&&this.session.authData.sessionId||this.router.navigate(["/login"])}ngAfterViewInit(){if(!this.routercomponent){let e=this.metadata.getRouteComponent(this.route.snapshot.routeConfig.path);this.metadata.addComponent(e,this.componentcontainer).subscribe((e=>{this.routercomponent=e}))}}static ɵfac=function(e){return new(e||SystemDynamicRouteContainer)(u.Y36(g.Pu),u.Y36(ie.n),u.Y36(ne.F0),u.Y36(ne.gz))};static ɵcmp=u.Xpm({type:SystemDynamicRouteContainer,selectors:[["system-dynamicroute-container"]],viewQuery:function(e,t){if(1&e&&u.Gf(le,7,u.s_b),2&e){let e;u.iGM(e=u.CRH())&&(t.componentcontainer=e.first)}},decls:2,vars:0,consts:[["componentcontainer",""]],template:function(e,t){1&e&&u._UZ(0,"div",null,0)},encapsulation:2})}return SystemDynamicRouteContainer})();var ae=s(90512),de=s(65659),re=s(93845),ce=s(44561),ue=s(87693),me=s(84567),ge=s(12646),he=s(64730),pe=s(59016),fe=s(59574),be=s(93441),_e=s(66267);let ve=(()=>{class SystemImagePreviewModal{language;helper;self={};imgsrc="";imgtype="";imgname="";constructor(e,t){this.language=e,this.helper=t}closeModal(){this.self.destroy()}download(){let e=this.helper.b64toBlob(this.imgsrc.replace("data:"+this.imgtype+";base64,",""),this.imgtype),t=URL.createObjectURL(e),s=document.createElement("a");document.body.appendChild(s),s.href=t,s.download=this.imgname,s.click(),s.remove()}static ɵfac=function(e){return new(e||SystemImagePreviewModal)(u.Y36(m.d),u.Y36(be._))};static ɵcmp=u.Xpm({type:SystemImagePreviewModal,selectors:[["system-image-preview-modal"]],inputs:{imgsrc:"imgsrc",imgtype:"imgtype",imgname:"imgname"},decls:8,vars:2,consts:[["size","large"],[3,"close"],["margin","none"],[3,"data"],[1,"slds-button","slds-button--icon","slds-button--icon-border",3,"click"],["icon","download","size","small"]],template:function(e,t){1&e&&(u.TgZ(0,"system-modal",0)(1,"system-modal-header",1),u.NdJ("close",(function(){return t.closeModal()})),u._uU(2),u.qZA(),u.TgZ(3,"system-modal-content",2),u._UZ(4,"system-image-preview",3),u.qZA(),u.TgZ(5,"system-modal-footer")(6,"button",4),u.NdJ("click",(function(){return t.download()})),u._UZ(7,"system-button-icon",5),u.qZA()()()),2&e&&(u.xp6(2),u.Oqu(t.imgname),u.xp6(2),u.Q6J("data",t.imgsrc))},dependencies:[p.J,b.j,v.x,y.p,x.y,_e.w],encapsulation:2})}return SystemImagePreviewModal})();var ye=s(3772),xe=s(25147),we=s(61555),Ze=s(50638),Te=s(4728),Ce=s(44665),ke=s(9422),Ae=s(26625);function Le(e,t){if(1&e&&(u.TgZ(0,"option",8),u._uU(1),u.qZA()),2&e){const e=t.$implicit;u.Q6J("value","+"+e),u.xp6(1),u.hij("+",e,"")}}function Ie(e,t){if(1&e){const e=u.EpF();u.TgZ(0,"div",3)(1,"select",4,5),u.NdJ("ngModelChange",(function(t){u.CHM(e);const s=u.oxw();return u.KtG(s.value=t)})),u._UZ(3,"option",6),u.YNc(4,Le,2,2,"option",7),u.qZA()()}if(2&e){const e=u.oxw();u.xp6(1),u.Q6J("ngModel",e.value),u.xp6(3),u.Q6J("ngForOf",e.countrycodes)}}function Se(e,t){if(1&e){const e=u.EpF();u.TgZ(0,"div",9)(1,"input",10),u.NdJ("ngModelChange",(function(t){u.CHM(e);const s=u.oxw();return u.KtG(s.value=t)})),u.qZA()()}if(2&e){const e=u.oxw();u.xp6(1),u.Q6J("ngModel",e.value)}}let Me=(()=>{class SystemInputCountryCode{metadata;language;configuration;countrycodes=[];onChange;onTouched;_value;strict=!1;constructor(e,t,s){this.metadata=e,this.language=t,this.configuration=s,"strict"==this.configuration.data.backendextensions.spiceui.config.format&&(this.strict=!0)}get value(){return this._value}set value(e){e!=this._value&&(this._value=e,this.onChange(e))}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}writeValue(e){this._value=e}ngOnInit(){this.strict&&this.getCountries()}getCountries(){this.countrycodes=[];let e=this.configuration.getData("countries");for(let t of e.countries)!t.e164||this.countrycodes.indexOf(t.e164)>=0||this.countrycodes.push(t.e164);this.countrycodes.sort()}static ɵfac=function(e){return new(e||SystemInputCountryCode)(u.Y36(g.Pu),u.Y36(m.d),u.Y36(Ae.C))};static ɵcmp=u.Xpm({type:SystemInputCountryCode,selectors:[["system-input-country-code"]],features:[u._Bn([{provide:l.JU,useExisting:(0,u.Gpc)((()=>SystemInputCountryCode)),multi:!0}])],decls:4,vars:2,consts:[[1,"slds-form-element"],["class","slds-select_container",4,"ngIf","ngIfElse"],["countryinput",""],[1,"slds-select_container"],[1,"slds-select",3,"ngModel","ngModelChange"],["focus",""],["value",""],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[1,"slds-form-element__control"],["type","text",1,"slds-input",3,"ngModel","ngModelChange"]],template:function(e,t){if(1&e&&(u.TgZ(0,"div",0),u.YNc(1,Ie,5,2,"div",1),u.YNc(2,Se,2,1,"ng-template",null,2,u.W1O),u.qZA()),2&e){const e=u.MAs(3);u.xp6(1),u.Q6J("ngIf",t.strict)("ngIfElse",e)}},dependencies:[n.sg,n.O5,l.YN,l.Kr,l.Fj,l.EJ,l.JJ,l.On],encapsulation:2})}return SystemInputCountryCode})();var Je=s(24114),Oe=s(16822),Ne=s(7758),Fe=s(66659),qe=s(83497),Ee=s(66898),Ye=s(83673),De=s(34375),Ue=s(15621),Qe=s(57919),Re=s(69901),je=s(6271),Be=s(4846),Ge=s(13144),Pe=s(61078);function He(e,t){if(1&e&&(u.TgZ(0,"option",5),u._uU(1),u.qZA()),2&e){const e=t.$implicit;u.Q6J("value",e.taxcategoryid),u.xp6(1),u.AsE("",e.taxcategoryname," (",e.taxcategoryid,")")}}let ze=(()=>{class SystemInputTaxCode{configuration;disabled=!1;taxcodes=[];onChange;onTouched;_value;constructor(e){this.configuration=e}get value(){return this._value}set value(e){e!=this._value&&(this._value=e,this.onChange(e))}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}writeValue(e){this._value=e}ngOnInit(){this.getTaxCodes()}getTaxCodes(){this.taxcodes=this.configuration.getData("salesdoctaxcategories")}static ɵfac=function(e){return new(e||SystemInputTaxCode)(u.Y36(Ae.C))};static ɵcmp=u.Xpm({type:SystemInputTaxCode,selectors:[["system-input-taxcode"]],inputs:{disabled:"disabled"},features:[u._Bn([{provide:l.JU,useExisting:(0,u.Gpc)((()=>SystemInputTaxCode)),multi:!0}])],decls:5,vars:3,consts:[[1,"slds-form-element"],[1,"slds-select_container"],[1,"slds-select",3,"disabled","ngModel","ngModelChange"],["value",""],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(e,t){1&e&&(u.TgZ(0,"div",0)(1,"div",1)(2,"select",2),u.NdJ("ngModelChange",(function(e){return t.value=e})),u._UZ(3,"option",3),u.YNc(4,He,2,3,"option",4),u.qZA()()()),2&e&&(u.xp6(2),u.Q6J("disabled",0==t.taxcodes.length||t.disabled)("ngModel",t.value),u.xp6(2),u.Q6J("ngForOf",t.taxcodes))},dependencies:[n.sg,l.YN,l.Kr,l.EJ,l.JJ,l.On],encapsulation:2})}return SystemInputTaxCode})();var Ve=s(72006),$e=s(21e3),Ke=s(28973);let Xe=(()=>{class SystemInstallerComponent{static ɵfac=function(e){return new(e||SystemInstallerComponent)};static ɵcmp=u.Xpm({type:SystemInstallerComponent,selectors:[["system-installer-component"]],decls:1,vars:1,consts:[[3,"component"]],template:function(e,t){1&e&&u._UZ(0,"system-dynamic-component",0),2&e&&u.Q6J("component","SpiceInstaller")},dependencies:[se.T],encapsulation:2})}return SystemInstallerComponent})();var We=s(14505),et=s(29266),tt=s(44044),st=s(54021),it=s(50151);function nt(e,t){if(1&e){const e=u.EpF();u.TgZ(0,"system-input-radio",16),u.NdJ("ngModelChange",(function(t){u.CHM(e);const s=u.oxw(2);return u.KtG(s.currentScope=t)}))("ngModelChange",(function(){u.CHM(e);const t=u.oxw(2);return u.KtG(t.setUntranslatedLanguages())})),u._uU(1),u.qZA()}if(2&e){const e=t.$implicit,s=u.oxw(2);u.Q6J("ngModel",s.currentScope)("value",e)("disabled","global"==e&&"custom"==s.labelData.scope),u.xp6(1),u.hij(" ",e," ")}}function lt(e,t){if(1&e&&(u.TgZ(0,"div",14),u.YNc(1,nt,2,4,"system-input-radio",15),u.qZA()),2&e){const e=u.oxw();u.xp6(1),u.Q6J("ngForOf",e.scopes)}}function ot(e,t){if(1&e){const e=u.EpF();u.TgZ(0,"article")(1,"div",18)(2,"div",19)(3,"h2"),u._uU(4),u.qZA()(),u.TgZ(5,"div",20)(6,"div",21)(7,"label"),u._UZ(8,"system-label",22),u._uU(9,": "),u.qZA(),u.TgZ(10,"input",23),u.NdJ("ngModelChange",(function(t){const s=u.CHM(e).$implicit;return u.KtG(s.translation_short=t)})),u.qZA()(),u.TgZ(11,"div",21)(12,"label")(13,"abbr",24),u._uU(14,"*"),u.qZA(),u._UZ(15,"system-label",25),u._uU(16,": "),u.qZA(),u.TgZ(17,"input",26),u.NdJ("ngModelChange",(function(t){const s=u.CHM(e).$implicit;return u.KtG(s.translation_default=t)})),u.qZA()(),u.TgZ(18,"div",21)(19,"label"),u._UZ(20,"system-label",27),u._uU(21,": "),u.qZA(),u.TgZ(22,"textarea",28),u.NdJ("ngModelChange",(function(t){const s=u.CHM(e).$implicit;return u.KtG(s.translation_long=t)})),u.qZA()()()()()}if(2&e){const e=t.$implicit,s=u.oxw(2);u.xp6(4),u.Oqu(s.languagesNames[e.syslanguage]),u.xp6(6),u.Q6J("ngModel",e.translation_short),u.xp6(7),u.Q6J("ngModel",e.translation_default),u.xp6(5),u.Q6J("ngModel",e.translation_long)}}function at(e,t){if(1&e&&(u.ynx(0),u.YNc(1,ot,23,4,"article",17),u.BQk()),2&e){const e=u.oxw();u.xp6(1),u.Q6J("ngForOf",e.translations)("ngForTrackBy",e.trackByFn)}}function dt(e,t){if(1&e&&(u.TgZ(0,"option",37),u._uU(1),u.qZA()),2&e){const e=t.$implicit;u.s9C("value",e.language),u.xp6(1),u.hij(" ",e.text," ")}}function rt(e,t){if(1&e){const e=u.EpF();u.TgZ(0,"div",29)(1,"div",29)(2,"div",30)(3,"div",31)(4,"select",32,33),u.YNc(6,dt,2,2,"option",34),u.qZA()()(),u.TgZ(7,"button",35),u.NdJ("click",(function(){u.CHM(e);const t=u.MAs(5),s=u.oxw();return u.KtG(s.addTranslation(t.value))})),u._UZ(8,"system-label",36),u.qZA()()()}if(2&e){const e=u.oxw();u.xp6(6),u.Q6J("ngForOf",e.untranslatedLanguages)}}let ct=(()=>{class SystemLabelEditorModal{backend;metadata;language;utils;toast;modal;availableLanguages=[];currentScope="global";scopes=["global","custom"];languagesNames={};untranslatedLanguages=[];isLoading=!1;self;constructor(e,t,s,i,n,l){this.backend=e,this.metadata=t,this.language=s,this.utils=i,this.toast=n,this.modal=l}_labelData=null;get labelData(){return this._labelData}set labelData(e){if(this._labelData=e,e&&0!=e[this.currentScope+"_translations"].length){for(let t of this.scopes)if(e[t+"_translations"].length>0){this.currentScope=t;break}e[this.currentScope+"_translations"].sort(((e,t)=>e.syslanguage==this.language.languagedata.languages.default||e.syslanguage<t.syslanguage?-1:e.syslanguage>t.syslanguage?1:void 0))}}get translations(){return this.labelData[`${this.currentScope}_translations`]}addTranslation(e){this.labelData[this.currentScope+"_translations"]||(this.labelData[this.currentScope+"_translations"]=[]),e||(e=this.untranslatedLanguages[0]),this.labelData[this.currentScope+"_translations"].push({id:this.utils.generateGuid(),syslanguagelabel_id:this.labelData.id,syslanguage:e}),this.setUntranslatedLanguages()}ngOnInit(){this.loadAvailableLanguages(),this.retrieveLabelData()}trackByFn(e,t){return e}retrieveLabelData(){this.isLoading=!0,this.backend.getRequest("configuration/syslanguages/labels/"+this.labelData.name).subscribe((e=>{this.isLoading=!1,e?this.labelData=e:this.modal.openModal("SystemLabelEditorGlobalCustomModal",!1).subscribe((e=>{e.instance.labelscope.subscribe((e=>{this.currentScope=e,this.labelData={id:this.utils.generateGuid(),name:this.labelData.name,scope:this.currentScope,global_translations:[],custom_translations:[]},this.addTranslation(this.language.currentlanguage)}))})),this.setUntranslatedLanguages()}),(()=>this.isLoading=!1))}save(){this.close(),this.backend.postRequest("configuration/syslanguages/labels",null,[this.labelData]).subscribe((()=>{let e=this.translations.find((e=>e.syslanguage==this.language.currentlanguage));this.language.addLabel(this.labelData.name,e.translation_default,e.translation_short,e.translation_long),this.language.currentlanguage$.emit(this.language.currentlanguage),this.toast.sendToast(this.language.getLabel("LBL_DATA_SAVED"),"success")}))}setUntranslatedLanguages(){this.untranslatedLanguages=this.translations?this.availableLanguages.filter((e=>!this.translations.some((t=>t.syslanguage==e.language)))):this.availableLanguages}loadAvailableLanguages(){this.availableLanguages=this.language.getAvialableLanguages(),this.availableLanguages.forEach((e=>this.languagesNames[e.language]=e.text))}close(){this.self.destroy()}static ɵfac=function(e){return new(e||SystemLabelEditorModal)(u.Y36(We.y),u.Y36(g.Pu),u.Y36(m.d),u.Y36(et.A),u.Y36(h.A),u.Y36(tt.o))};static ɵcmp=u.Xpm({type:SystemLabelEditorModal,selectors:[["system-label-editor-modal"]],decls:17,vars:6,consts:[["size","large"],[3,"close"],["margin","none",3,"grow"],[1,"slds-size--1-of-1","slds-p-around--small","slds-height_full",3,"system-overlay-loading-spinner"],[1,"slds-grid","slds-grid--vertical-align-center","slds-p-bottom--small"],[1,"slds-p-vertical--small","slds-text-heading--small"],["label","LBL_TRANSLATIONS"],["class","slds-grid slds-col--bump-left",4,"ngIf"],[4,"ngIf"],["class","slds-grid",4,"ngIf"],[1,"slds-button","slds-button--neutral",3,"click"],["label","LBL_CANCEL"],[1,"slds-button","slds-button--brand",3,"click"],["label","LBL_SAVE"],[1,"slds-grid","slds-col--bump-left"],["name","label-editor-modal-translation-scope",3,"ngModel","value","disabled","ngModelChange",4,"ngFor","ngForOf"],["name","label-editor-modal-translation-scope",3,"ngModel","value","disabled","ngModelChange"],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"slds-card","slds-m-bottom--small"],[1,"slds-card__header"],[1,"slds-card__body","slds-p-around--small"],[1,"slds-form-element"],["label","LBL_TEXT_SHORT"],["type","text",1,"slds-input",3,"ngModel","ngModelChange"],[1,"slds-required"],["label","LBL_DEFAULT"],["type","text","required","required",1,"slds-input",3,"ngModel","ngModelChange"],["label","LBL_TEXT_LONG"],[1,"slds-textarea",3,"ngModel","ngModelChange"],[1,"slds-grid"],[1,"slds-form-element__control","slds-p-right--x-small"],[1,"slds-select_container"],[1,"slds-select"],["add_translation_language",""],[3,"value",4,"ngFor","ngForOf"],["system-title","LBL_ADD_TRANSLATION",1,"slds-button","slds-button--neutral",3,"click"],["label","LBL_ADD"],[3,"value"]],template:function(e,t){1&e&&(u.TgZ(0,"system-modal",0)(1,"system-modal-header",1),u.NdJ("close",(function(){return t.close()})),u._uU(2),u.qZA(),u.TgZ(3,"system-modal-content",2)(4,"div",3)(5,"div",4)(6,"h2",5),u._UZ(7,"system-label",6),u._uU(8,": "),u.qZA(),u.YNc(9,lt,2,1,"div",7),u.qZA(),u.YNc(10,at,2,2,"ng-container",8),u.YNc(11,rt,9,1,"div",9),u.qZA()(),u.TgZ(12,"system-modal-footer")(13,"button",10),u.NdJ("click",(function(){return t.close()})),u._UZ(14,"system-label",11),u.qZA(),u.TgZ(15,"button",12),u.NdJ("click",(function(){return t.save()})),u._UZ(16,"system-label",13),u.qZA()()()),2&e&&(u.xp6(2),u.hij(" ",t.labelData.name," "),u.xp6(1),u.Q6J("grow",!0),u.xp6(1),u.Q6J("system-overlay-loading-spinner",t.isLoading),u.xp6(5),u.Q6J("ngIf",!t.isLoading),u.xp6(1),u.Q6J("ngIf",t.translations),u.xp6(1),u.Q6J("ngIf",!t.isLoading&&(null==t.availableLanguages?null:t.availableLanguages.length)>(null==t.translations?null:t.translations.length)))},dependencies:[st._,it.S,n.sg,n.O5,l.YN,l.Kr,l.Fj,l.JJ,l.Q7,l.On,Re.A,f._,b.j,v.x,y.p,x.y],encapsulation:2})}return SystemLabelEditorModal})(),ut=(()=>{class SystemLabelEditorGlobalCustomModal{self;labelscope=new u.vpe;constructor(){}setLabel(e){this.labelscope.emit(e),this.self.destroy()}static ɵfac=function(e){return new(e||SystemLabelEditorGlobalCustomModal)};static ɵcmp=u.Xpm({type:SystemLabelEditorGlobalCustomModal,selectors:[["ng-component"]],decls:11,vars:0,consts:[["size","prompt"],["label","LBL_SELECT_SCOPE"],[1,"slds-p-around--small","slds-align--absolute-center"],["label","LBL_SELECT_SCOPE","length","long"],[1,"slds-button","slds-button--brand",3,"click"],["label","LBL_GLOBAL"],["label","LBL_CUSTOM"]],template:function(e,t){1&e&&(u.TgZ(0,"system-modal",0)(1,"system-modal-header"),u._UZ(2,"system-label",1),u.qZA(),u.TgZ(3,"system-modal-content")(4,"div",2),u._UZ(5,"system-label",3),u.qZA()(),u.TgZ(6,"system-modal-footer")(7,"button",4),u.NdJ("click",(function(){return t.setLabel("global")})),u._UZ(8,"system-label",5),u.qZA(),u.TgZ(9,"button",4),u.NdJ("click",(function(){return t.setLabel("custom")})),u._UZ(10,"system-label",6),u.qZA()()())},dependencies:[f._,b.j,v.x,y.p,x.y],encapsulation:2})}return SystemLabelEditorGlobalCustomModal})();var mt=s(7674),gt=s(93333),ht=s(82892),pt=s(60655),ft=s(80515),bt=s(94664);let _t=(()=>{class SystemLoadingModal{language;messagelabel="LBL_LOADING";constructor(e){this.language=e}static ɵfac=function(e){return new(e||SystemLoadingModal)(u.Y36(m.d))};static ɵcmp=u.Xpm({type:SystemLoadingModal,selectors:[["ng-component"]],decls:9,vars:1,consts:[["role","dialog","tabindex","-1",1,"slds-modal","slds-fade-in-open"],[1,"slds-modal__container"],[1,"slds-modal__header","slds-modal__header_empty"],[1,"slds-modal__content","slds-p-around_medium"],[1,"slds-align--absolute-center"],[1,"slds-grid","slds-grid--vertical-align-center"],["size","16"],[1,"slds-p-left--small"],[3,"label"]],template:function(e,t){1&e&&(u.TgZ(0,"section",0)(1,"div",1),u._UZ(2,"div",2),u.TgZ(3,"div",3)(4,"div",4)(5,"div",5),u._UZ(6,"system-spinner",6),u.TgZ(7,"div",7),u._UZ(8,"system-label",8),u.qZA()()()()()()),2&e&&(u.xp6(8),u.Q6J("label",t.messagelabel))},dependencies:[f._,bt.W],encapsulation:2})}return SystemLoadingModal})();var vt=s(11604),yt=s(96933),xt=s(26559);function wt(e,t){if(1&e){const e=u.EpF();u.TgZ(0,"button",4),u.NdJ("click",(function(){u.CHM(e);const t=u.oxw(2);return u.KtG(t.close.emit(!0))})),u._UZ(1,"system-button-icon",5),u.TgZ(2,"span",6),u._UZ(3,"system-label",7),u.qZA()()}}function Zt(e,t){if(1&e){const e=u.EpF();u.TgZ(0,"button",8),u.NdJ("click",(function(){u.CHM(e);const t=u.oxw(2);return u.KtG(t.close.emit(!0))})),u._UZ(1,"system-button-icon",9),u.TgZ(2,"span",6),u._UZ(3,"system-label",7),u.qZA()()}}function Tt(e,t){if(1&e&&(u.ynx(0),u.YNc(1,wt,4,0,"button",2),u.YNc(2,Zt,4,0,"button",3),u.BQk()),2&e){const e=u.oxw();u.xp6(1),u.Q6J("ngIf",!e.isSmall),u.xp6(1),u.Q6J("ngIf",e.isSmall)}}let Ct=(()=>{class SystemModalHeaderEmpty{language;layout;emptyheader=!0;close=new u.vpe;hiddenCloseButton=!1;set hideClose(e){this.hiddenCloseButton=!1!==e}constructor(e,t){this.language=e,this.layout=t}get isSmall(){return"small"==this.layout.screenwidth}static ɵfac=function(e){return new(e||SystemModalHeaderEmpty)(u.Y36(m.d),u.Y36(xt.b))};static ɵcmp=u.Xpm({type:SystemModalHeaderEmpty,selectors:[["system-modal-header-empty"]],hostVars:2,hostBindings:function(e,t){2&e&&u.ekj("slds-modal__header_empty",t.emptyheader)},inputs:{hiddenCloseButton:"hiddenCloseButton",hideClose:["system-modal-header-noclose","hideClose"]},outputs:{close:"close"},decls:2,vars:1,consts:[[1,"slds-modal__header","slds-modal__header--empty"],[4,"ngIf"],["class","slds-button slds-button_icon slds-modal__close slds-button--icon-inverse","style","color:white;",3,"click",4,"ngIf"],["class","slds-button slds-button_icon slds-is-absolute","style","top: 3px; right: 3px;",3,"click",4,"ngIf"],[1,"slds-button","slds-button_icon","slds-modal__close","slds-button--icon-inverse",2,"color","white",3,"click"],["icon","close","size","large"],[1,"slds-assistive-text"],["label","LBL_CLOSE"],[1,"slds-button","slds-button_icon","slds-is-absolute",2,"top","3px","right","3px",3,"click"],["icon","close"]],template:function(e,t){1&e&&(u.TgZ(0,"header",0),u.YNc(1,Tt,3,2,"ng-container",1),u.qZA()),2&e&&(u.xp6(1),u.Q6J("ngIf",!t.hiddenCloseButton))},dependencies:[n.O5,p.J,f._],encapsulation:2})}return SystemModalHeaderEmpty})();const kt=["target"];let At=(()=>{class SystemModalWrapper{modalservice;application;self=null;zIndex;childComponent;escKey=!0;target;constructor(e,t){this.modalservice=e,this.application=t}closeModal(){this.self.destroy()}ngOnDestroy(){this.modalservice.removeModal(this.self),this.application.tick()}setEscKey(e=!0){this.escKey=e}static ɵfac=function(e){return new(e||SystemModalWrapper)(u.Y36(tt.o),u.Y36(u.z2F))};static ɵcmp=u.Xpm({type:SystemModalWrapper,selectors:[["system-modal-wrapper"]],viewQuery:function(e,t){if(1&e&&u.Gf(kt,7,u.s_b),2&e){let e;u.iGM(e=u.CRH())&&(t.target=e.first)}},decls:3,vars:2,consts:[[2,"position","fixed"],["target",""]],template:function(e,t){1&e&&(u.TgZ(0,"div",0),u._UZ(1,"span",null,1),u.qZA()),2&e&&u.Udp("z-index",t.zIndex)},encapsulation:2})}return SystemModalWrapper})();var Lt=s(25320),It=s(66550),St=s(1148);let Mt=(()=>{class SystemObjectPreviewModal{language;sanitizer;self={};type="";name="";loadingerror=!1;data;downloadTrigger$=new u.vpe;constructor(e,t){this.language=e,this.sanitizer=t}closeModal(){this.self.destroy()}static ɵfac=function(e){return new(e||SystemObjectPreviewModal)(u.Y36(m.d),u.Y36(It.H7))};static ɵcmp=u.Xpm({type:SystemObjectPreviewModal,selectors:[["system-object-preview-modal"]],inputs:{type:"type",name:"name",loadingerror:"loadingerror",data:"data"},decls:9,vars:5,consts:[["size","large"],[3,"close"],["margin","none"],[3,"data","type","downloadTrigger$","name"],[1,"slds-text-align--right"],[1,"slds-button","slds-button--icon","slds-button--icon-border",3,"click"],["icon","download","size","small"]],template:function(e,t){1&e&&(u.TgZ(0,"system-modal",0)(1,"system-modal-header",1),u.NdJ("close",(function(){return t.closeModal()})),u._uU(2),u.qZA(),u.TgZ(3,"system-modal-content",2),u._UZ(4,"system-object-preview",3),u.qZA(),u.TgZ(5,"system-modal-footer")(6,"div",4)(7,"button",5),u.NdJ("click",(function(){return t.downloadTrigger$.emit()})),u._UZ(8,"system-button-icon",6),u.qZA()()()()),2&e&&(u.xp6(2),u.Oqu(t.name),u.xp6(2),u.Q6J("data",t.data)("type",t.type)("downloadTrigger$",t.downloadTrigger$)("name",t.name))},dependencies:[p.J,b.j,v.x,y.p,x.y,St.s],encapsulation:2})}return SystemObjectPreviewModal})();var Jt=s(15718);function Ot(e,t){1&e&&(u.TgZ(0,"span",8),u.O4$(),u.TgZ(1,"svg",9),u._UZ(2,"use",10),u.qZA(),u.kcU(),u.TgZ(3,"span",11),u._UZ(4,"system-label",12),u.qZA()())}function Nt(e,t){1&e&&(u.TgZ(0,"span",13),u.O4$(),u.TgZ(1,"svg",9),u._UZ(2,"use",14),u.qZA(),u.kcU(),u.TgZ(3,"span",11),u._UZ(4,"system-label",15),u.qZA()())}function Ft(e,t){1&e&&(u.TgZ(0,"span",16),u.O4$(),u.TgZ(1,"svg",9),u._UZ(2,"use",17),u.qZA(),u.kcU(),u.TgZ(3,"span",11),u._UZ(4,"system-label",18),u.qZA()())}let qt=(()=>{class SystemProgressRing{language;percentage=100;size=24;status="";backgroundcolor;constructor(e){this.language=e}get style(){return{height:this.size+"px",width:this.size+"px"}}get innerStyle(){return this.backgroundcolor?{background:this.backgroundcolor}:{}}get fillPercentage(){return this.percentage/100}get d(){return"M 1 0 A 1 1 0 "+(this.percentage>50?"1":"0")+" 1 "+Math.cos(2*Math.PI*this.fillPercentage)+" "+Math.sin(2*Math.PI*this.fillPercentage)+" L 0 0"}get ringClass(){if(""==this.status&&this.percentage>=100)return"slds-progress-ring_complete";switch(this.status){case"warning":return"slds-progress-ring_warning";case"expired":return"slds-progress-ring_expired"}}get iconstatus(){return this.percentage>=100?"complete":this.status}static ɵfac=function(e){return new(e||SystemProgressRing)(u.Y36(m.d))};static ɵcmp=u.Xpm({type:SystemProgressRing,selectors:[["system-progress-ring"]],inputs:{percentage:"percentage",size:"size",status:"status",backgroundcolor:"backgroundcolor"},decls:8,vars:6,consts:[[1,"slds-progress-ring",3,"ngClass"],["role","progressbar","aria-valuemin","0","aria-valuemax","100","aria-valuenow","88",1,"slds-progress-ring__progress"],["viewBox","-1 -1 2 2"],[1,"slds-progress-ring__path"],[1,"slds-progress-ring__content",3,"ngStyle"],["class","slds-icon_container slds-icon-utility-warning","title","Warning",4,"ngIf"],["class","slds-icon_container slds-icon-utility-error","title","Expired",4,"ngIf"],["class","slds-icon_container slds-icon-utility-check","title","Complete",4,"ngIf"],["title","Warning",1,"slds-icon_container","slds-icon-utility-warning"],["aria-hidden","true",1,"slds-icon"],[0,"xmlns","xlink","http://www.w3.org/1999/xlink",0,"xlink","href","vendor/sldassets/icons/utility-sprite/svg/symbols.svg#warning"],[1,"slds-assistive-text"],["label","LBL_WARNING"],["title","Expired",1,"slds-icon_container","slds-icon-utility-error"],[0,"xmlns","xlink","http://www.w3.org/1999/xlink",0,"xlink","href","vendor/sldassets/icons/utility-sprite/svg/symbols.svg#error"],["label","LBL_EXPIRED"],["title","Complete",1,"slds-icon_container","slds-icon-utility-check"],[0,"xmlns","xlink","http://www.w3.org/1999/xlink",0,"xlink","href","vendor/sldassets/icons/utility-sprite/svg/symbols.svg#check"],["label","LBL_COMPLETE"]],template:function(e,t){1&e&&(u.TgZ(0,"div",0)(1,"div",1),u.O4$(),u.TgZ(2,"svg",2),u._UZ(3,"path",3),u.qZA()(),u.kcU(),u.TgZ(4,"div",4),u.YNc(5,Ot,5,0,"span",5),u.YNc(6,Nt,5,0,"span",6),u.YNc(7,Ft,5,0,"span",7),u.qZA()()),2&e&&(u.Q6J("ngClass",t.ringClass),u.xp6(3),u.uIk("d",t.d),u.xp6(1),u.Q6J("ngStyle",t.innerStyle),u.xp6(1),u.Q6J("ngIf","warning"==t.iconstatus),u.xp6(1),u.Q6J("ngIf","expired"==t.iconstatus),u.xp6(1),u.Q6J("ngIf","complete"==t.iconstatus))},dependencies:[n.mk,n.O5,n.PC,f._],encapsulation:2})}return SystemProgressRing})();var Et=s(78026);const Yt=["cancelButton"],Dt=["okButton"],Ut=["inputField"],Qt=["selectField"];function Rt(e,t){if(1&e&&(u.TgZ(0,"h2",7),u._UZ(1,"system-label",8),u.qZA()),2&e){const e=u.oxw();u.xp6(1),u.Q6J("label",e.headertext)}}function jt(e,t){if(1&e&&(u.TgZ(0,"div"),u._uU(1),u.qZA()),2&e){const e=t.$implicit;u.xp6(1),u.Oqu(e)}}function Bt(e,t){if(1&e&&(u.TgZ(0,"div",12),u.YNc(1,jt,2,1,"div",13),u.qZA()),2&e){const e=u.oxw(2);u.xp6(1),u.Q6J("ngForOf",e.splitText)}}function Gt(e,t){if(1&e){const e=u.EpF();u.TgZ(0,"system-input-date",23),u.NdJ("ngModelChange",(function(t){u.CHM(e);const s=u.oxw(4);return u.KtG(s.value=t)})),u.qZA()}if(2&e){const e=u.oxw(4);u.Q6J("ngModel",e.value)}}function Pt(e,t){if(1&e){const e=u.EpF();u.TgZ(0,"div",24)(1,"div",15)(2,"textarea",25),u.NdJ("ngModelChange",(function(t){u.CHM(e);const s=u.oxw(4);return u.KtG(s.value=t)})),u.qZA()()()}if(2&e){const e=u.oxw(4);u.xp6(2),u.Q6J("ngModel",e.value)}}function Ht(e,t){if(1&e){const e=u.EpF();u.ynx(0),u.TgZ(1,"input",26,27),u.NdJ("ngModelChange",(function(t){u.CHM(e);const s=u.oxw(4);return u.KtG(s.value=t)})),u.qZA(),u.TgZ(3,"button",28),u.NdJ("click",(function(){u.CHM(e);const t=u.oxw(4);return u.KtG(t.value="")})),u._UZ(4,"system-button-icon",29),u.qZA(),u.BQk()}if(2&e){const e=u.oxw(4);u.xp6(1),u.Q6J("ngModel",e.value),u.xp6(2),u.Q6J("disabled",!e.value)}}function zt(e,t){if(1&e&&(u.TgZ(0,"div",18),u.ynx(1,19),u.YNc(2,Gt,1,1,"system-input-date",20),u.YNc(3,Pt,3,1,"div",21),u.YNc(4,Ht,5,2,"ng-container",22),u.BQk(),u.qZA()),2&e){const e=u.oxw(3);u.xp6(1),u.Q6J("ngSwitch",e.type),u.xp6(1),u.Q6J("ngSwitchCase","input_date"),u.xp6(1),u.Q6J("ngSwitchCase","input_text")}}function Vt(e,t){if(1&e&&(u.TgZ(0,"option",36),u._uU(1),u.qZA()),2&e){const e=t.$implicit;u.Q6J("value",e.value),u.xp6(1),u.hij(" ",e.display," ")}}function $t(e,t){if(1&e){const e=u.EpF();u.TgZ(0,"div",32)(1,"select",33,34),u.NdJ("ngModelChange",(function(t){u.CHM(e);const s=u.oxw(4);return u.KtG(s.value=t)})),u.YNc(3,Vt,2,2,"option",35),u.qZA()()}if(2&e){const e=u.oxw(4);u.xp6(1),u.Q6J("ngModel",e.value),u.xp6(2),u.Q6J("ngForOf",e.options)}}function Kt(e,t){if(1&e){const e=u.EpF();u.TgZ(0,"system-input-radio",38),u.NdJ("ngModelChange",(function(t){u.CHM(e);const s=u.oxw(5);return u.KtG(s.value=t)})),u._uU(1),u.qZA()}if(2&e){const e=t.$implicit,s=u.oxw(5);u.Q6J("name",s.radioGroupName)("value",e.value)("ngModel",s.value),u.xp6(1),u.hij(" ",e.display," ")}}function Xt(e,t){if(1&e&&u.YNc(0,Kt,2,4,"system-input-radio",37),2&e){const e=u.oxw(4);u.Q6J("ngForOf",e.options)}}function Wt(e,t){if(1&e&&(u.ynx(0),u.YNc(1,$t,4,2,"div",30),u.YNc(2,Xt,1,1,"ng-template",null,31,u.W1O),u.BQk()),2&e){const e=u.MAs(3),t=u.oxw(3);u.xp6(1),u.Q6J("ngIf","radio"!==t.optionsAs)("ngIfElse",e)}}function es(e,t){if(1&e&&(u.TgZ(0,"div",14)(1,"div",15),u.YNc(2,zt,5,3,"div",16),u.YNc(3,Wt,4,2,"ng-container",17),u.qZA()()),2&e){const e=u.oxw(2);u.xp6(2),u.Q6J("ngIf",!e.options),u.xp6(1),u.Q6J("ngIf",e.options&&"button"!==e.optionsAs)}}function ts(e,t){if(1&e&&(u.TgZ(0,"div",9),u.YNc(1,Bt,2,1,"div",10),u.YNc(2,es,4,2,"div",11),u.qZA()),2&e){const e=u.oxw();u.xp6(1),u.Q6J("ngIf",e.text),u.xp6(1),u.Q6J("ngIf",e.type.startsWith("input"))}}function ss(e,t){if(1&e){const e=u.EpF();u.TgZ(0,"button",42,43),u.NdJ("click",(function(){u.CHM(e);const t=u.oxw(2);return u.KtG(t.clickCancel())})),u._UZ(2,"system-label",44),u.qZA()}}function is(e,t){if(1&e){const e=u.EpF();u.ynx(0),u.YNc(1,ss,3,0,"button",39),u.TgZ(2,"button",40,41),u.NdJ("click",(function(){u.CHM(e);const t=u.oxw();return u.KtG(t.clickOK())})),u._uU(4,"OK"),u.qZA(),u.BQk()}if(2&e){const e=u.oxw();u.xp6(1),u.Q6J("ngIf","info"!==e.type),u.xp6(1),u.Q6J("disabled",!e.canSubmit)}}function ns(e,t){if(1&e){const e=u.EpF();u.TgZ(0,"button",46),u.NdJ("click",(function(){const t=u.CHM(e).$implicit,s=u.oxw(2);return u.KtG(s.clickButtonGroup(t.value))})),u._UZ(1,"system-label",8),u.qZA()}if(2&e){const e=t.$implicit;u.xp6(1),u.Q6J("label",e.display)}}function ls(e,t){if(1&e&&u.YNc(0,ns,2,1,"button",45),2&e){const e=u.oxw();u.Q6J("ngForOf",e.options)}}let os=(()=>{class SystemPrompt{language;type;text;headertext;theme;radioGroupName;value=null;options;optionsAsRadio=!1;optionsAs;answer=null;answerSubject=null;regex;self;cancelButton;okButton;inputField;selectField;constructor(e){this.language=e,this.answerSubject=new P.x,this.answer=this.answerSubject.asObservable(),this.radioGroupName=_.uniqueId("system-prompt-group-name-")}get splitText(){return this.text?this.language.getLabel(this.text,void 0,"long").split(/(?:\r\n|\r|\n)/g):[]}ngOnInit(){this.theme||(this.theme="shade"),!0===this.optionsAsRadio&&(this.optionsAs="radio")}ngAfterViewInit(){"confirm"===this.type?this.cancelButton.nativeElement.focus():"info"===this.type?this.okButton.nativeElement.focus():this.type.startsWith("input")&&(this.inputField?this.inputField.nativeElement.focus():this.selectField&&this.selectField.nativeElement.focus())}get canSubmit(){if(!this.type.startsWith("input"))return!0;if(!this.value)return!1;if(this.regex){return new RegExp(this.regex).test(String(this.value))}return!0}clickOK(){this.type.startsWith("input")?this.answerSubject.next(this.value):this.answerSubject.next(!0),this.answerSubject.complete(),this.self.destroy()}clickCancel(){this.answerSubject.next(!1),this.answerSubject.complete(),this.self.destroy()}onModalEscX(){if("info"===this.type||"button"===this.optionsAs)return!1;this.clickCancel()}clickButtonGroup(e){this.answerSubject.next(e),this.answerSubject.complete(),this.self.destroy()}static ɵfac=function(e){return new(e||SystemPrompt)(u.Y36(m.d))};static ɵcmp=u.Xpm({type:SystemPrompt,selectors:[["system-prompt"]],viewQuery:function(e,t){if(1&e&&(u.Gf(Yt,5),u.Gf(Dt,5),u.Gf(Ut,5),u.Gf(Qt,5)),2&e){let e;u.iGM(e=u.CRH())&&(t.cancelButton=e.first),u.iGM(e=u.CRH())&&(t.okButton=e.first),u.iGM(e=u.CRH())&&(t.inputField=e.first),u.iGM(e=u.CRH())&&(t.selectField=e.first)}},inputs:{type:"type",text:"text",headertext:"headertext",theme:"theme",value:"value",options:"options",optionsAsRadio:"optionsAsRadio",optionsAs:"optionsAs"},decls:9,vars:9,consts:[["role","alertdialog","tabindex","-1",1,"slds-modal","slds-fade-in-open","slds-modal_prompt"],[1,"slds-modal__container"],["class","slds-text-heading_medium slds-hyphenate",4,"ngIf"],["class","slds-modal__content slds-text-align_center ",4,"ngIf"],[1,"slds-modal__footer"],[4,"ngIf","ngIfElse"],["optionButtonContainer",""],[1,"slds-text-heading_medium","slds-hyphenate"],[3,"label"],[1,"slds-modal__content","slds-text-align_center"],["class","slds-m-vertical_medium",4,"ngIf"],["class","slds-form-element slds-m-vertical_medium",4,"ngIf"],[1,"slds-m-vertical_medium"],[4,"ngFor","ngForOf"],[1,"slds-form-element","slds-m-vertical_medium"],[1,"slds-form-element__control"],["class","slds-form-element__control slds-input-has-icon slds-input-has-icon_right",4,"ngIf"],[4,"ngIf"],[1,"slds-form-element__control","slds-input-has-icon","slds-input-has-icon_right"],[3,"ngSwitch"],[3,"ngModel","ngModelChange",4,"ngSwitchCase"],["class","slds-form-element",4,"ngSwitchCase"],[4,"ngSwitchDefault"],[3,"ngModel","ngModelChange"],[1,"slds-form-element"],[1,"slds-textarea",2,"height","200px",3,"ngModel","ngModelChange"],["type","text","tabindex","1",1,"slds-input",3,"ngModel","ngModelChange"],["inputField",""],[1,"slds-input__icon","slds-input__icon_right","slds-button","slds-button--icon",3,"disabled","click"],["icon","clear"],["class","slds-select_container",4,"ngIf","ngIfElse"],["radioGroupContainer",""],[1,"slds-select_container"],["tabindex","1",1,"slds-select",3,"ngModel","ngModelChange"],["selectField",""],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["style","display: block",3,"name","value","ngModel","ngModelChange",4,"ngFor","ngForOf"],[2,"display","block",3,"name","value","ngModel","ngModelChange"],["class","slds-button slds-button--neutral",3,"click",4,"ngIf"],[1,"slds-button","slds-button--brand",3,"disabled","click"],["okButton",""],[1,"slds-button","slds-button--neutral",3,"click"],["cancelButton",""],["label","LBL_CANCEL"],["class","slds-button slds-button--brand",3,"click",4,"ngFor","ngForOf"],[1,"slds-button","slds-button--brand",3,"click"]],template:function(e,t){if(1&e&&(u.TgZ(0,"section",0)(1,"div",1)(2,"header"),u.YNc(3,Rt,2,1,"h2",2),u.qZA(),u.YNc(4,ts,3,2,"div",3),u.TgZ(5,"footer",4),u.YNc(6,is,5,2,"ng-container",5),u.YNc(7,ls,1,1,"ng-template",null,6,u.W1O),u.qZA()()()),2&e){const e=u.MAs(8);u.xp6(2),u.Gre("slds-modal__header slds-theme_",t.theme,""),u.Udp("height",t.headertext?"auto":"1rem"),u.xp6(1),u.Q6J("ngIf",t.headertext),u.xp6(1),u.Q6J("ngIf",t.text||t.type.startsWith("input")),u.xp6(2),u.Q6J("ngIf","button"!==t.optionsAs)("ngIfElse",e)}},dependencies:[n.sg,n.O5,n.RF,n.n9,n.ED,l.YN,l.Kr,l.Fj,l.EJ,l.JJ,l.On,p.J,Oe.z,Re.A,f._],encapsulation:2})}return SystemPrompt})();var as=s(71574),ds=s(55710);function rs(e,t){1&e&&u._UZ(0,"system-label",25)}function cs(e,t){1&e&&u._UZ(0,"system-label",26)}function us(e,t){if(1&e&&(u.TgZ(0,"div",32),u._UZ(1,"system-label",33),u.qZA()),2&e){const e=u.oxw(2);u.xp6(1),u.Q6J("label",e.urlErrorLabel)}}const ms=function(e){return{"slds-has-error":e}};function gs(e,t){if(1&e){const e=u.EpF();u.TgZ(0,"div",27)(1,"label",10)(2,"abbr",28),u._uU(3,"*"),u.qZA(),u._UZ(4,"system-label",29),u.qZA(),u.TgZ(5,"system-input-text",30),u.NdJ("ngModelChange",(function(t){u.CHM(e);const s=u.oxw();return u.KtG(s.url=t)}))("ngModelChange",(function(){u.CHM(e);const t=u.oxw();return u.KtG(t.checkUrl())})),u.qZA(),u.YNc(6,us,2,1,"div",31),u.qZA()}if(2&e){const e=u.oxw();u.Q6J("ngClass",u.VKq(3,ms,!!e.urlErrorLabel)),u.xp6(5),u.Q6J("ngModel",e.url),u.xp6(1),u.Q6J("ngIf",e.urlErrorLabel)}}function hs(e,t){if(1&e){const e=u.EpF();u.TgZ(0,"div",34)(1,"label",10),u._UZ(2,"system-label",35),u.qZA(),u.TgZ(3,"system-input-text",36),u.NdJ("ngModelChange",(function(t){u.CHM(e);const s=u.oxw();return u.KtG(s.text=t)}))("blur",(function(){u.CHM(e);const t=u.oxw();return u.KtG(t.changeTextIsUrl())})),u.qZA()()}if(2&e){const e=u.oxw();u.xp6(3),u.Q6J("ngModel",e.text)}}function ps(e,t){if(1&e&&(u.TgZ(0,"option",44),u._uU(1),u.qZA()),2&e){const e=t.$implicit;u.Q6J("ngValue",e.id),u.xp6(1),u.Oqu(e.name)}}function fs(e,t){if(1&e&&(u.TgZ(0,"div",32),u._UZ(1,"system-label",33),u.qZA()),2&e){const e=u.oxw(2);u.xp6(1),u.Q6J("label",e.marketingActionErrorLabel)}}function bs(e,t){if(1&e){const e=u.EpF();u.TgZ(0,"div",37)(1,"label",38),u._UZ(2,"system-label",39),u.qZA(),u.TgZ(3,"div",40)(4,"div",41)(5,"select",42),u.NdJ("ngModelChange",(function(t){u.CHM(e);const s=u.oxw();return u.KtG(s.marketingAction=t)})),u.YNc(6,ps,2,2,"option",43),u.qZA()()(),u.YNc(7,fs,2,1,"div",31),u.qZA()}if(2&e){const e=u.oxw();u.Q6J("ngClass",u.VKq(5,ms,!!e.marketingActionErrorLabel)),u.xp6(5),u.Q6J("ngModel",e.marketingAction)("disabled",null==e.editorService.marketingActions),u.xp6(1),u.Q6J("ngForOf",e.editorService.marketingActions),u.xp6(1),u.Q6J("ngIf",e.marketingActionErrorLabel)}}const _s=function(){return{value:"id",label:"LBL_BY_ID"}},vs=function(){return{value:void 0,icon:"topic2",label:"LBL_NONE"}},ys=function(){return{value:"url",icon:"link",label:"LBL_BY_URL"}},xs=function(e,t,s){return[e,t,s]};function ws(e,t){if(1&e){const e=u.EpF();u.ynx(0),u.TgZ(1,"div",45)(2,"label",10),u._UZ(3,"system-label",46),u.qZA(),u.TgZ(4,"system-input-radio-button-group",47),u.NdJ("ngModelChange",(function(t){u.CHM(e);const s=u.oxw();return u.KtG(s.setTrackByMethod(t))})),u.qZA()(),u.BQk()}if(2&e){const e=u.oxw();u.xp6(4),u.Q6J("ngModel",e.trackByMethod)("inputOptions",u.kEZ(5,xs,u.DdM(2,_s),u.DdM(3,vs),u.DdM(4,ys)))}}let Zs=(()=>{class SystemRichTextLink{model;backend;modal;url="";text="";toTrack=!1;marketingAction="";trackingId="";parent;urlErrorLabel="";marketingActionErrorLabel="";canSubmit=!1;alterMode=!1;textIsUrl=!1;response=new P.x;self;linkType="conv";editorService;trackByMethod;constructor(e,t,s){this.model=e,this.backend=t,this.modal=s}setTrackByMethod(e){this.trackByMethod=e,"id"==e?this.openTrackingLinkSelectModal():this.trackingId=void 0}openTrackingLinkSelectModal(){const e=[{value:"select",display:"LBL_SELECT"},{value:"new",display:"LBL_NEW"},{value:void 0,display:"LBL_CANCEL"}];this.modal.prompt("input","LBL_MAKE_SELECTION","LBL_TRACKINGLINKS","shade","select",e,"button").subscribe((e=>{if(e)switch(e){case"new":const e={name:this.text,url:this.url};this.model.addModel("",null,e,!0).subscribe((e=>{this.trackingId=e.id}));break;case"select":this.modal.openModal("ObjectModalModuleLookup").subscribe((e=>{e.instance.module="EmailTrackingLinks",e.instance.multiselect=!1,e.instance.selectedItems.subscribe((e=>{this.trackingId=e[0].id}))}))}}))}ngOnInit(){this.model.module="EmailTrackingLinks",this.url=this.url.trim(),this.text=this.text.trim(),this.urlHasProtocol(this.url)||(this.url="https://"),this.textIsUrl=!this.text,this.url&&(this.url=this.url.trim()),this.marketingAction&&(this.linkType="mark"),this.loadMarketingActions()}urlHasProtocol(e){return/^[a-zA-Z]+\:\/\//.test(e.trim())}urlIsValid(e){return/^[a-zA-Z]+\:\/\/.+/.test(e.trim())}checkUrl(){let e=this.url.trim();return e?this.urlIsValid(e)?this.urlErrorLabel="":this.urlErrorLabel="LBL_INPUT_INVALID":this.urlErrorLabel="MSG_INPUT_REQUIRED",this.textIsUrl&&(this.text=this.url),!this.urlErrorLabel}checkMarketingAction(){return this.marketingAction?this.marketingActionErrorLabel="":this.marketingActionErrorLabel="MSG_INPUT_REQUIRED",!this.marketingActionErrorLabel}changeTextIsUrl(){this.text?this.url!=this.text&&(this.textIsUrl=!1):this.textIsUrl=!0}submit(){if("conv"===this.linkType&&!this.checkUrl())return;if("mark"===this.linkType&&!this.checkMarketingAction())return;let e={url:"conv"===this.linkType?this.url.trim():"",trackingId:"conv"===this.linkType?this.trackingId??"":void 0,text:void 0,linkType:this.linkType,trackByMethod:this.trackByMethod,marketingAction:"mark"===this.linkType?this.marketingAction:void 0};this.alterMode||(e.text=this.text.trim()),this.response.next(e),this.response.complete(),this.self.destroy()}cancel(){this.response.next(null),this.response.complete(),this.self.destroy()}loadMarketingActions(){this.editorService.loadMarketingActions()}static ɵfac=function(e){return new(e||SystemRichTextLink)(u.Y36(ds.o),u.Y36(We.y),u.Y36(tt.o))};static ɵcmp=u.Xpm({type:SystemRichTextLink,selectors:[["ng-component"]],inputs:{url:"url",text:"text",toTrack:"toTrack",marketingAction:"marketingAction",trackingId:"trackingId",parent:"parent"},features:[u._Bn([ds.o])],decls:29,vars:8,consts:[["size","small"],[3,"close"],["label","LBL_ADD_LINK",4,"ngIf"],["label","LBL_EDIT_LINK",4,"ngIf"],[1,"slds-form-element","slds-m-bottom--x-small"],[1,"slds-form-element__control","slds-grid"],[1,"slds-radio"],["type","radio","id","radioConvLink","name","linkType","value","conv",3,"ngModel","ngModelChange"],["for","radioConvLink",1,"slds-radio__label"],[1,"slds-radio_faux"],[1,"slds-form-element__label"],["label","LBL_CONVENTIONAL_LINK"],[1,"slds-radio","slds-m-left--small"],["type","radio","id","radioMarketingLink","name","linkType","value","mark",3,"ngModel","ngModelChange"],["for","radioMarketingLink",1,"slds-radio__label"],["label","LBL_MARKETING_ACTION_LINK"],["class","slds-form-element__control",3,"ngClass",4,"ngIf"],[1,"slds-grid","slds-m-top--small","slds-gutters_x-small"],["class","slds-form-element__control slds-col",4,"ngIf"],["class","slds-form-element slds-col",3,"ngClass",4,"ngIf"],[4,"ngIf"],[1,"slds-button","slds-button--neutral",3,"click"],["label","LBL_CANCEL"],[1,"slds-button","slds-button--brand",3,"click"],["label","LBL_OK"],["label","LBL_ADD_LINK"],["label","LBL_EDIT_LINK"],[1,"slds-form-element__control",3,"ngClass"],[1,"slds-required"],["label","LBL_URL"],[3,"ngModel","ngModelChange"],["class","slds-form-element__help",4,"ngIf"],[1,"slds-form-element__help"],[3,"label"],[1,"slds-form-element__control","slds-col"],["label","LBL_TEXT"],[3,"ngModel","ngModelChange","blur"],[1,"slds-form-element","slds-col",3,"ngClass"],["for","marketingAction",1,"slds-form-element__label"],["label","LBL_MARKETING_ACTION"],[1,"slds-form-element__control"],[1,"slds-select_container"],["id","marketingAction",1,"slds-select",3,"ngModel","disabled","ngModelChange"],[3,"ngValue",4,"ngFor","ngForOf"],[3,"ngValue"],[1,"slds-form-element","slds-col","slds-grow-none"],["label","LBL_CLICKS_TRACKABLE"],[1,"spice-display-block",3,"ngModel","inputOptions","ngModelChange"]],template:function(e,t){1&e&&(u.TgZ(0,"system-modal",0)(1,"system-modal-header",1),u.NdJ("close",(function(){return t.cancel()})),u.YNc(2,rs,1,0,"system-label",2),u.YNc(3,cs,1,0,"system-label",3),u.qZA(),u.TgZ(4,"system-modal-content")(5,"fieldset",4)(6,"div",5)(7,"span",6)(8,"input",7),u.NdJ("ngModelChange",(function(e){return t.linkType=e})),u.qZA(),u.TgZ(9,"label",8),u._UZ(10,"span",9),u.TgZ(11,"span",10),u._UZ(12,"system-label",11),u.qZA()()(),u.TgZ(13,"span",12)(14,"input",13),u.NdJ("ngModelChange",(function(e){return t.linkType=e})),u.qZA(),u.TgZ(15,"label",14),u._UZ(16,"span",9),u.TgZ(17,"span",10),u._UZ(18,"system-label",15),u.qZA()()()()(),u.YNc(19,gs,7,5,"div",16),u.TgZ(20,"div",17),u.YNc(21,hs,4,1,"div",18),u.YNc(22,bs,8,7,"div",19),u.YNc(23,ws,5,9,"ng-container",20),u.qZA()(),u.TgZ(24,"system-modal-footer")(25,"button",21),u.NdJ("click",(function(){return t.cancel()})),u._UZ(26,"system-label",22),u.qZA(),u.TgZ(27,"button",23),u.NdJ("click",(function(){return t.submit()})),u._UZ(28,"system-label",24),u.qZA()()()),2&e&&(u.xp6(2),u.Q6J("ngIf",!t.alterMode),u.xp6(1),u.Q6J("ngIf",t.alterMode),u.xp6(5),u.Q6J("ngModel",t.linkType),u.xp6(6),u.Q6J("ngModel",t.linkType),u.xp6(5),u.Q6J("ngIf","conv"===t.linkType),u.xp6(2),u.Q6J("ngIf",!t.alterMode),u.xp6(1),u.Q6J("ngIf","mark"===t.linkType),u.xp6(1),u.Q6J("ngIf","conv"===t.linkType))},dependencies:[n.mk,n.sg,n.O5,l.YN,l.Kr,l.Fj,l.EJ,l._,l.JJ,l.On,ye.Z,je.p,f._,b.j,v.x,y.p,x.y],encapsulation:2})}return SystemRichTextLink})();var Ts=s(95698),Cs=s(24817),ks=s(42067),As=s(78859);const Ls=["sourceeditor"];function Is(e,t){if(1&e){const e=u.EpF();u.TgZ(0,"div",19)(1,"button",20),u.NdJ("click",(function(){u.CHM(e);const t=u.oxw();return u.KtG(t.nextResult())})),u._UZ(2,"system-button-icon",21),u.qZA(),u.TgZ(3,"button",20),u.NdJ("click",(function(){u.CHM(e);const t=u.oxw();return u.KtG(t.previewResult())})),u._UZ(4,"system-button-icon",22),u.qZA()()}if(2&e){const e=u.oxw();u.xp6(1),u.Q6J("disabled",e.nextDisabled)("title",e.language.getLabel("LBL_NEXT")),u.xp6(2),u.Q6J("disabled",e.previewDisabled)("title",e.language.getLabel("LBL_PREVIEW"))}}function Ss(e,t){if(1&e){const e=u.EpF();u.TgZ(0,"button",23),u.NdJ("click",(function(){u.CHM(e);const t=u.oxw();return u.KtG(t.openTemplateVariableHelper())})),u._UZ(1,"system-button-icon",24),u.qZA()}if(2&e){const e=u.oxw();u.Q6J("disabled",!e.isUserInsideEditor)("title",e.language.getLabel("LBL_TEMPLATE_VARIABLE_HELPER"))}}let Ms=(()=>{class SystemRichTextSourceModal{language;renderer;sanitized;libloader;injector;model;modal;editorService;_document;self={};_html="";searchtext="";foundIndices=[];currentIndex=-1;html=new u.vpe;isUserInsideEditor=!1;editorId=_.uniqueId();eventListener=[];beautifyenabled=!1;sourceEditor;constructor(e,t,s,i,n,l,o,a,d){this.language=e,this.renderer=t,this.sanitized=s,this.libloader=i,this.injector=n,this.model=l,this.modal=o,this.editorService=a,this._document=d,this.libloader.loadLib("jsbeautify").subscribe((e=>{this.beautifyenabled=!0}))}get nextDisabled(){return this.currentIndex==this.foundIndices.length-1}get previewDisabled(){return 0==this.currentIndex}get searchText(){return this.searchtext}set searchText(e){this.currentIndex=0,this.searchtext=e}get sanitizedHtml(){return this.sanitized.bypassSecurityTrustHtml(this._html)}ngOnInit(){this.renderer.setProperty(this.sourceEditor.nativeElement,"innerText",this._html),this.eventListener.push(this.renderer.listen("document","click",(()=>this.isUserInsideEditor=this.testIsUserInsideEditor()))),this.eventListener.push(this.renderer.listen("document","keyup",(()=>(this.isUserInsideEditor=this.testIsUserInsideEditor(),!0))))}keyUp(e){(13==e.which||13==e.keyCode&&this.searchText.length>0)&&(this.currentIndex=0,this.selectFoundText())}findTextIndices(e,t){this.foundIndices=[],e=e.toLowerCase();let s,i=0;for(;i<t.length&&(s=t.indexOf(e,i),s>-1);)this.foundIndices.push(s),i=s+e.length}getTextNodesIn(e){let t=[];if(3==e.nodeType)t.push(e);else{let s=e.childNodes;s.forEach(((e,i)=>t.concat(this.getTextNodesIn(s[i]))));for(let e=0,i=s.length;e<i;++e)t.push.apply(t,this.getTextNodesIn(s[e]))}return t}selectFoundText(){let e=this.sourceEditor.nativeElement;if(document.createRange&&window.getSelection){let t=document.createRange();t.selectNodeContents(e);let s=this.getTextNodesIn(e);this.findTextIndices(this.searchText,s.map((e=>e.data)).join(""));let i=this.foundIndices[this.currentIndex],n=i+this.searchText.length,l=0;s.some((e=>{let s=l+e.length;if(i<s&&n>l)return t.setStart(e,i-l),t.setEnd(e,n-l),!0;l+=e.length}));let o=window.getSelection();o.removeAllRanges(),o.addRange(t)}else if(document.hasOwnProperty("selection")&&document.body.hasOwnProperty("createTextRange")){let t=document.body.createTextRange();t.moveToElementText(e),t.collapse(!0),this.findTextIndices(this.searchText,this._html);let s=this.foundIndices[this.currentIndex],i=s+this.searchText.length;t.moveEnd("character",i),t.moveStart("character",s),t.select()}}beautify(){this.renderer.setProperty(this.sourceEditor.nativeElement,"innerText",html_beautify(this.sourceEditor.nativeElement.innerText,{indent_size:4,indent_char:" ",indent_with_tabs:!1,end_with_newline:!1,indent_level:0,preserve_newlines:!0,max_preserve_newlines:10,space_in_paren:!1,space_in_empty_paren:!1,unindent_chained_methods:!1,break_chained_methods:!1,keep_array_indentation:!1,unescape_strings:!1,wrap_line_length:100,e4x:!1,comma_first:!1,operator_position:"before-newline",indent_empty_lines:!1,templating:["auto"]}))}nextResult(){this.currentIndex<this.foundIndices.length&&(this.currentIndex++,this.selectFoundText())}previewResult(){this.currentIndex>0&&(this.currentIndex--,this.selectFoundText())}onContentChange(e){this._html=e}close(){this.html.emit(this._html),this.self.destroy()}get useTemplateVariableHelper(){return"OutputTemplates"===this.model?.module||"EmailTemplates"===this.model?.module||"CampaignTasks"===this.model?.module}openTemplateVariableHelper(){this.editorService.saveSelection(),this.modal.openModal("OutputTemplatesVariableHelper",null,this.injector).pipe((0,Ts.q)(1)).subscribe((e=>{e.instance.response.pipe((0,Ts.q)(1)).subscribe((e=>{this.focusEditor(),this.editorService.restoreSelection(),this._document.execCommand("insertText",!1,"{"+e+"}")}))}))}focusEditor(){this.sourceEditor.nativeElement.focus()}testIsUserInsideEditor(){if(window.getSelection){let e=window.getSelection().focusNode;for(;e&&e.id!==this.editorId&&e.parentNode;)e=e.parentNode;return e?.id===this.editorId}return!1}ngOnDestroy(){this.eventListener.forEach((e=>e()))}onModalEscX(){this.close()}static ɵfac=function(e){return new(e||SystemRichTextSourceModal)(u.Y36(m.d),u.Y36(u.Qsj),u.Y36(It.H7),u.Y36(ks.$),u.Y36(u.zs3),u.Y36(ds.o,8),u.Y36(tt.o),u.Y36(Cs.L),u.Y36(n.K0))};static ɵcmp=u.Xpm({type:SystemRichTextSourceModal,selectors:[["system-richtext-sourcemodal"]],viewQuery:function(e,t){if(1&e&&u.Gf(Ls,7),2&e){let e;u.iGM(e=u.CRH())&&(t.sourceEditor=e.first)}},features:[u._Bn([Cs.L])],decls:21,vars:8,consts:[["size","large"],[3,"close"],["label","LBL_SOURCE_EDITOR"],[1,"slds-grid",2,"height","70vh"],[1,"slds-size--1-of-2","slds-p-right--xx-small"],[1,"slds-box","slds-theme--default","slds-scrollable_y","slds-rich-text-editor__output",2,"height","100%",3,"innerHtml"],[1,"slds-size--1-of-2","slds-p-left--x-small"],[1,"slds-p-bottom--xx-small","slds-grid"],["role","none",1,"slds-grow","slds-combobox__form-element","slds-input-has-icon","slds-input-has-icon_left-right","slds-global-search__form-element"],["icon","search","addclasses","slds-input__icon slds-input__icon--left"],["type","text",1,"slds-input",3,"placeholder","ngModel","keyup","ngModelChange"],["class","slds-grid slds-grid--align-spread slds-input__icon_right slds-is-absolute__top","style","height: 100%",4,"ngIf"],["class","slds-m-left--xx-small slds-button slds-button--icon-border slds-button--neutral",3,"disabled","title","click",4,"ngIf"],[1,"slds-m-left--xx-small","slds-button","slds-button--icon-border","slds-button--neutral",3,"disabled","click"],["icon","right_align_text"],[1,"slds-box","slds-m-around--none","slds-theme--default","slds-scrollable_y",2,"height","calc(100% - 36px)",3,"id","input"],["sourceeditor",""],[1,"slds-button","slds-button--neutral",3,"click"],["label","LBL_CLOSE"],[1,"slds-grid","slds-grid--align-spread","slds-input__icon_right","slds-is-absolute__top",2,"height","100%"],[1,"slds-button","slds-button_icon","slds-input__icon",2,"position","relative",3,"disabled","title","click"],["icon","arrowdown"],["icon","arrowup"],[1,"slds-m-left--xx-small","slds-button","slds-button--icon-border","slds-button--neutral",3,"disabled","title","click"],["icon","variable"]],template:function(e,t){1&e&&(u.TgZ(0,"system-modal",0)(1,"system-modal-header",1),u.NdJ("close",(function(){return t.close()})),u._UZ(2,"system-label",2),u.qZA(),u.TgZ(3,"system-modal-content")(4,"div",3)(5,"div",4),u._UZ(6,"div",5),u.qZA(),u.TgZ(7,"div",6)(8,"div",7)(9,"div",8),u._UZ(10,"system-utility-icon",9),u.TgZ(11,"input",10),u.NdJ("keyup",(function(e){return t.keyUp(e)}))("ngModelChange",(function(e){return t.searchText=e})),u.qZA(),u.YNc(12,Is,5,4,"div",11),u.qZA(),u.YNc(13,Ss,2,2,"button",12),u.TgZ(14,"button",13),u.NdJ("click",(function(){return t.beautify()})),u._UZ(15,"system-button-icon",14),u.qZA()(),u.TgZ(16,"pre",15,16),u.NdJ("input",(function(e){return t.onContentChange(e.target.innerText)})),u.qZA()()()(),u.TgZ(18,"system-modal-footer")(19,"button",17),u.NdJ("click",(function(){return t.close()})),u._UZ(20,"system-label",18),u.qZA()()()),2&e&&(u.xp6(6),u.Q6J("innerHtml",t.sanitizedHtml,u.oJD),u.xp6(5),u.Q6J("placeholder",t.language.getLabel("LBL_SEARCH"))("ngModel",t.searchText),u.xp6(1),u.Q6J("ngIf",t.foundIndices.length>1),u.xp6(1),u.Q6J("ngIf",t.useTemplateVariableHelper),u.xp6(1),u.Q6J("disabled",!t.beautifyenabled),u.xp6(2),u.Q6J("id",t.editorId),u.uIk("contenteditable",!0))},dependencies:[n.O5,l.Fj,l.JJ,l.On,p.J,f._,b.j,v.x,y.p,x.y,As.r],encapsulation:2})}return SystemRichTextSourceModal})();var Js=s(33369),Os=s(62422),Ns=s(14361);function Fs(e,t){if(1&e){const e=u.EpF();u.TgZ(0,"li",7),u.NdJ("click",(function(){const t=u.CHM(e).$implicit,s=u.oxw();return u.KtG(s.setActiveRole(t.id))})),u.TgZ(1,"a",8)(2,"div")(3,"span",2),u._UZ(4,"system-label",3),u.qZA()(),u._UZ(5,"system-label",9),u.qZA()()}if(2&e){const e=t.$implicit;u.xp6(3),u.Q6J("ngClass",e.icon),u.xp6(1),u.Q6J("label",e.label),u.xp6(1),u.Q6J("label",e.label)}}let qs=(()=>{class SystemRoleSelector{language;metadata;broadcast;userpreferences;roles=[];constructor(e,t,s,i){this.language=e,this.metadata=t,this.broadcast=s,this.userpreferences=i}ngOnInit(){this.getRoles()}getRoles(){this.roles=this.metadata.getRoles()}get activeRole(){return this.metadata.getActiveRole()}setActiveRole(e){this.metadata.setActiveRole(e),this.userpreferences.setPreference("userrole",e),this.broadcast.broadcastMessage("applauncher.setrole",e)}static ɵfac=function(e){return new(e||SystemRoleSelector)(u.Y36(m.d),u.Y36(g.Pu),u.Y36(Js.f),u.Y36(Os.z))};static ɵcmp=u.Xpm({type:SystemRoleSelector,selectors:[["system-role-selector"]],decls:7,vars:5,consts:[["system-dropdown-trigger-simple","",1,"slds-dropdown-trigger","slds-dropdown-trigger_click"],[1,"slds-button","slds-p-horizontal--xx-small",3,"disabled","title"],[1,"slds-avatar--small","slds-align--absolute-center","slds-line-height_reset",2,"line-height","25px",3,"ngClass"],["length","short",3,"label"],[1,"slds-dropdown","slds-dropdown--bottom","slds-dropdown_right"],["role","menu","aria-label","Show More",1,"slds-dropdown__list"],["class","slds-dropdown__item","role","presentation",3,"click",4,"ngFor","ngForOf"],["role","presentation",1,"slds-dropdown__item",3,"click"],["href","javascript:void(0);","role","menuitem"],[1,"slds-grow","slds-p-left--x-small",3,"label"]],template:function(e,t){1&e&&(u.TgZ(0,"div",0)(1,"button",1)(2,"span",2),u._UZ(3,"system-label",3),u.qZA()(),u.TgZ(4,"div",4)(5,"ul",5),u.YNc(6,Fs,6,3,"li",6),u.qZA()()()),2&e&&(u.xp6(1),u.Q6J("disabled",t.roles.length<2)("title",t.language.getLabel(t.activeRole.label,void 0,"short")),u.xp6(1),u.Q6J("ngClass",t.activeRole.icon),u.xp6(1),u.Q6J("label",t.activeRole.label),u.xp6(3),u.Q6J("ngForOf",t.roles))},dependencies:[Ns.w,n.mk,n.sg,f._],encapsulation:2})}return SystemRoleSelector})();var Es=s(72868),Ys=s(33543),Ds=s(85185),Us=s(13577),Qs=s(51691);function Rs(e,t){if(1&e&&u._UZ(0,"system-componentset",3),2&e){const e=u.oxw();u.Q6J("componentset",e.componentSetLeft)}}function js(e,t){if(1&e&&u._UZ(0,"system-componentset",3),2&e){const e=u.oxw();u.Q6J("componentset",e.componentSetRight)}}let Bs=(()=>{class SystemSplitView{componentconfig={};get componentSetLeft(){return this.componentconfig.left}get componentSetRight(){return this.componentconfig.right}static ɵfac=function(e){return new(e||SystemSplitView)};static ɵcmp=u.Xpm({type:SystemSplitView,selectors:[["system-split-view"]],inputs:{componentconfig:"componentconfig"},decls:5,vars:2,consts:[[1,"slds-grid","slds-gutters_direct-xx-small"],[1,"slds-col","slds-size--1-of-1","slds-large-size--1-of-2"],[3,"componentset",4,"ngIf"],[3,"componentset"]],template:function(e,t){1&e&&(u.TgZ(0,"div",0)(1,"div",1),u.YNc(2,Rs,1,1,"system-componentset",2),u.qZA(),u.TgZ(3,"div",1),u.YNc(4,js,1,1,"system-componentset",2),u.qZA()()),2&e&&(u.xp6(2),u.Q6J("ngIf",t.componentSetLeft),u.xp6(2),u.Q6J("ngIf",t.componentSetRight))},dependencies:[n.O5,G.E],encapsulation:2})}return SystemSplitView})();var Gs=s(12803),Ps=s(42161),Hs=s(29151);let zs=(()=>{class SystemTinyMCE{metadata;configurationService;elementid="mytinymce";height="250px";stylesheetId="";elementContent="new content";tinymceConfig={selector:"#"+this.elementid,remove_script_host:!0,relative_urls:!1,document_base_url:this.configurationService.getFrontendUrl(),menubar:!1,statusbar:!0,resize:!0,browser_spellcheck:!0,image_advtab:!0,paste_as_text:!0,paste_filter_drop:!0,plugins:["link","code","image","lists","paste","table"],toolbar:"undo redo | formatselect | styleselect bold italic removeformat | bullist numlist | link image table | code",skin_url:"vendor/tinymce/skins/lightgray",setup:e=>{this.editor=e,e.on("keyup",(()=>{const t=e.getContent();this.content=t}))},formats:{alignleft:{selector:"p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li,table,img",classes:"align-left"},aligncenter:{selector:"p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li,table,img",classes:"align-center"},alignright:{selector:"p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li,table,img",classes:"align-right"},alignjustify:{selector:"p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li,table,img",classes:"align-justify"},strikethrough:{inline:"del"}},style_formats:[{title:"Inline",items:[{title:"fett",icon:"bold",format:"bold"},{title:"kursiv",icon:"italic",format:"italic"},{title:"unterstrichen",icon:"underline",format:"underline"},{title:"strikethrough",icon:"strikethrough",format:"strikethrough"},{title:"hochgestellt",icon:"superscript",format:"superscript"},{title:"tiefgestellt",icon:"subscript",format:"subscript"}]},{title:"Ausrichtung",items:[{title:"links",icon:"alignleft",format:"alignleft"},{title:"mittig",icon:"aligncenter",format:"aligncenter"},{title:"rechts",icon:"alignright",format:"alignright"},{title:"Blocksatz",icon:"alignjustify",format:"alignjustify"}]}],style_formats_merge:!1,body_class:"spice"};get content(){return this.elementContent}set content(e){this.elementContent=e,this.contentChange.emit(this.elementContent)}contentChange=new u.vpe;editor;constructor(e,t){this.metadata=e,this.configurationService=t}setStylesheet(){let e=[];if(_.isEmpty(this.stylesheetId))delete this.tinymceConfig.content_style;else{if(e=this.metadata.getHtmlFormats(this.stylesheetId),e.length){let t=0;this.tinymceConfig.block_formats="",this.tinymceConfig.extended_valid_elements=[],this.tinymceConfig.custom_elements=[],this.tinymceConfig.block_formats+="Absatz=p;",this.tinymceConfig.style_formats.push({title:"Weiteres",items:[]});for(let s of e)if(_.isEmpty(s.block))this.tinymceConfig.style_formats[2].items.push({title:s.name,inline:s.inline,classes:s.classes,styles:s.styles});else{let e;t++,this.tinymceConfig.formats[e="custom_format_"+t]={title:s.name,inline:s.inline,block:s.block,classes:s.classes,styles:s.styles,wrapper:Boolean(Number(s.wrapper))},this.tinymceConfig.block_formats+=s.name+"="+e+";",this.tinymceConfig.extended_valid_elements.indexOf(s.block)&&this.tinymceConfig.extended_valid_elements.push(s.block),this.tinymceConfig.custom_elements.indexOf(s.block)&&this.tinymceConfig.custom_elements.push(s.block)}0===this.tinymceConfig.style_formats[2].items.length&&this.tinymceConfig.style_formats.splice(2,1)}this.tinymceConfig.content_style=this.metadata.getHtmlStylesheetCode(this.stylesheetId)}}updateevent(){this.content=this.editor.getContent()}getStyle(){return{height:this.height}}ngAfterViewInit(){this.metadata.loadLibs("tinymce").subscribe((e=>{this.setStylesheet(),tinymce.init(this.tinymceConfig)}))}ngOnDestroy(){tinymce.remove(this.editor)}ngOnInit(){this.tinymceConfig.selector="#"+this.elementid,this.tinymceConfig.document_base_url=this.configurationService.getFrontendUrl()}static ɵfac=function(e){return new(e||SystemTinyMCE)(u.Y36(g.Pu),u.Y36(Ae.C))};static ɵcmp=u.Xpm({type:SystemTinyMCE,selectors:[["system-tinymce"]],hostBindings:function(e,t){1&e&&u.NdJ("click",(function(){return t.updateevent()}))("keyup",(function(){return t.updateevent()}))},inputs:{elementid:"elementid",height:"height",stylesheetId:"stylesheetId",content:"content"},outputs:{contentChange:"contentChange"},decls:2,vars:3,consts:[[3,"id","ngStyle"]],template:function(e,t){1&e&&(u.TgZ(0,"textarea",0),u._uU(1),u.qZA()),2&e&&(u.s9C("id",t.elementid),u.Q6J("ngStyle",t.getStyle()),u.xp6(1),u.Oqu(t.content))},dependencies:[n.PC],styles:["[_nghost-%COMP%]   .mce-ico[_ngcontent-%COMP%]{color:#54698d;font-size:12px}","[_nghost-%COMP%]   .mce-text[_ngcontent-%COMP%]{color:#54698d;font-size:12px}","[_nghost-%COMP%]   .mce-btn[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{color:#54698d;font-size:12px}","[_nghost-%COMP%]   .mce-tinymce[_ngcontent-%COMP%]{border-radius:4px}","[_nghost-%COMP%]   .mce-widget[_ngcontent-%COMP%]{font-family:Titillium Web,sans-serif}"]})}return SystemTinyMCE})(),Vs=(()=>{class SystemTinyMCEModal{language;self={};content="";stylesheetId;updateContent=new u.vpe;title="";constructor(e){this.language=e}ngOnInit(){0===this.title.length&&(this.title=this.language.getLabel("LBL_EDITOR"))}closeModal(){this.self.destroy()}contentChange(e){this.content=e,this.updateContent.emit(e)}static ɵfac=function(e){return new(e||SystemTinyMCEModal)(u.Y36(m.d))};static ɵcmp=u.Xpm({type:SystemTinyMCEModal,selectors:[["ng-component"]],decls:8,vars:4,consts:[["size","large"],[3,"close"],[3,"content","stylesheetId","height","contentChange"],[1,"slds-button","slds-button--neutral",3,"click"],["label","LBL_OK"]],template:function(e,t){1&e&&(u.TgZ(0,"system-modal",0)(1,"system-modal-header",1),u.NdJ("close",(function(){return t.closeModal()})),u._uU(2),u.qZA(),u.TgZ(3,"system-modal-content")(4,"system-tinymce",2),u.NdJ("contentChange",(function(e){return t.content=e}))("contentChange",(function(e){return t.contentChange(e)})),u.qZA()(),u.TgZ(5,"system-modal-footer")(6,"button",3),u.NdJ("click",(function(){return t.closeModal()})),u._UZ(7,"system-label",4),u.qZA()()()),2&e&&(u.xp6(2),u.Oqu(t.title),u.xp6(2),u.Q6J("content",t.content)("stylesheetId",t.stylesheetId)("height","80%"))},dependencies:[f._,b.j,v.x,y.p,x.y,zs],encapsulation:2})}return SystemTinyMCEModal})();var $s=s(92403),Ks=s(30494),Xs=s(73361),Ws=s(58574);const ei=["imgupload"];function ti(e,t){if(1&e){const e=u.EpF();u.TgZ(0,"div")(1,"button",5),u.NdJ("click",(function(){u.CHM(e);const t=u.oxw();return u.KtG(t.showUpload())})),u._UZ(2,"system-label",9),u.qZA(),u.TgZ(3,"input",10,11),u.NdJ("click",(function(){u.CHM(e);const t=u.MAs(4);return u.KtG(t.value=null)}))("change",(function(t){u.CHM(e);const s=u.oxw();return u.KtG(s.uploadImage(t))})),u.qZA()()}}function si(e,t){if(1&e){const e=u.EpF();u.TgZ(0,"img",12),u.NdJ("load",(function(t){u.CHM(e);const s=u.oxw();return u.KtG(s.doCrop(t))})),u.qZA()}if(2&e){const e=u.oxw();u.Q6J("src",e.imageBase64,u.LSH)}}let ii=(()=>{class SystemUploadImage{language;libloader;renderer;sanitizer;imgupload;cropheight=200;cropwidth=200;croptype="circle";cropresize=!1;imagedata=new u.vpe;self;imageBase64;croppie;pasteListener;constructor(e,t,s,i){this.language=e,this.libloader=t,this.renderer=s,this.sanitizer=i,this.pasteListener=this.renderer.listen("window","paste",(e=>{e.preventDefault(),e.stopPropagation();let t=e.clipboardData.items[0].getAsFile(),s=window.URL;this.imageBase64=this.sanitizer.bypassSecurityTrustResourceUrl(s.createObjectURL(t))}))}get croppiestyle(){return{height:2*this.cropheight+"px"}}ngOnDestroy(){this.pasteListener()}close(e=!0){e&&this.imagedata.emit(!1),this.self.destroy()}showUpload(){let e=new MouseEvent("click",{bubbles:!0});this.imgupload.element.nativeElement.dispatchEvent(e)}uploadImage(e){let t=new FileReader;t.onloadend=e=>{this.imageBase64=t.result},t.readAsDataURL(e.target.files[0])}doCrop(e){this.croppie||(this.croppie=new Croppie(document.getElementById("croppieimage"),{enableExif:!0,enableOrientation:!0,enableZoom:!0,enforceBoundary:!1,mouseWheelZoom:!0,showZoomer:!0,enableResize:this.cropresize,viewport:{width:this.cropwidth,height:this.cropheight,type:this.croptype},boundary:{height:2*this.cropheight}}))}getcroppedImage(){this.croppie.result({type:"base64",size:"viewport"}).then((e=>{this.imagedata.emit(e),this.close(!1)}))}static ɵfac=function(e){return new(e||SystemUploadImage)(u.Y36(m.d),u.Y36(ks.$),u.Y36(u.Qsj),u.Y36(It.H7))};static ɵcmp=u.Xpm({type:SystemUploadImage,selectors:[["system-upload-image"]],viewQuery:function(e,t){if(1&e&&u.Gf(ei,5,u.s_b),2&e){let e;u.iGM(e=u.CRH())&&(t.imgupload=e.first)}},inputs:{cropheight:"cropheight",cropwidth:"cropwidth",croptype:"croptype",cropresize:"cropresize"},outputs:{imagedata:"imagedata"},decls:12,vars:4,consts:[[3,"close"],["label","LBL_UPLOAD_IMAGE"],[1,"slds-align--absolute-center","slds-scrollable--none",3,"ngStyle"],[4,"ngIf"],["id","croppieimage",3,"src","load",4,"ngIf"],[1,"slds-button","slds-button--neutral",3,"click"],["label","LBL_CANCEL"],[1,"slds-button","slds-button--brand",3,"disabled","click"],["label","LBL_USE"],["label","LBL_SELECT_IMAGE"],["type","file","accept","image/*",2,"display","none",3,"click","change"],["imgupload",""],["id","croppieimage",3,"src","load"]],template:function(e,t){1&e&&(u.TgZ(0,"system-modal")(1,"system-modal-header",0),u.NdJ("close",(function(){return t.close()})),u._UZ(2,"system-label",1),u.qZA(),u.TgZ(3,"system-modal-content")(4,"div",2),u.YNc(5,ti,5,0,"div",3),u.YNc(6,si,1,1,"img",4),u.qZA()(),u.TgZ(7,"system-modal-footer")(8,"button",5),u.NdJ("click",(function(){return t.close()})),u._UZ(9,"system-label",6),u.qZA(),u.TgZ(10,"button",7),u.NdJ("click",(function(){return t.getcroppedImage()})),u._UZ(11,"system-label",8),u.qZA()()()),2&e&&(u.xp6(4),u.Q6J("ngStyle",t.croppiestyle),u.xp6(1),u.Q6J("ngIf",!t.imageBase64),u.xp6(1),u.Q6J("ngIf",t.imageBase64),u.xp6(4),u.Q6J("disabled",!t.imageBase64))},dependencies:[n.O5,n.PC,f._,b.j,v.x,y.p,x.y],encapsulation:2})}return SystemUploadImage})();const ni=["popover"],li=["popoverbody"];let oi=(()=>{class SystemPopover{metadata;popoverside="right";popoverpos="top";styles=null;hidePopoverTimeout={};popover;popoverbody;parentElementRef=null;self=null;componentset;component;heightcorrection=30;widthcorrection=30;constructor(e){this.metadata=e}onMouseOver(){this.hidePopoverTimeout&&window.clearTimeout(this.hidePopoverTimeout)}onMouseOut(){this.closePopover(!0)}get popoverStyle(){let e=this.parentElementRef.nativeElement.getBoundingClientRect(),t=this.popover.element.nativeElement.getBoundingClientRect();return window.innerWidth-e.left>t.width?this.popoverside="right":this.popoverside="left",e.top-30+t.height>window.innerHeight&&e.top-t.height+this.heightcorrection>0?(this.popoverpos="bottom",{top:e.top-t.height+this.heightcorrection+"px",left:"right"==this.popoverside?e.left+100+"px":e.left-t.width-this.widthcorrection+"px"}):(this.popoverpos="top",{top:e.top-this.heightcorrection+"px",left:"right"==this.popoverside?e.left+100+"px":e.left-t.width-this.widthcorrection+"px"})}get popoverBodyStyle(){return{"max-height":`calc(100vh - ${this.popoverbody.element.nativeElement.getBoundingClientRect().top+5}px)`}}ngOnInit(){this.styles=this.popoverStyle}getNubbinClass(){return("left"==this.popoverside?"slds-nubbin--right-":"slds-nubbin--left-")+this.popoverpos}closePopover(e=!1){e?this.self.destroy():this.hidePopoverTimeout=window.setTimeout((()=>this.self.destroy()),500)}static ɵfac=function(e){return new(e||SystemPopover)(u.Y36(g.Pu))};static ɵcmp=u.Xpm({type:SystemPopover,selectors:[["ng-component"]],viewQuery:function(e,t){if(1&e&&(u.Gf(ni,7,u.s_b),u.Gf(li,7,u.s_b)),2&e){let e;u.iGM(e=u.CRH())&&(t.popover=e.first),u.iGM(e=u.CRH())&&(t.popoverbody=e.first)}},decls:8,vars:4,consts:[["role","dialog",1,"slds-popover","slds-popover_large","slds-is-fixed",2,"transition",".5s",3,"ngStyle","ngClass","mouseenter","mouseleave"],[1,"slds-button","slds-button_icon","slds-button_icon","slds-button_icon-small","slds-float_right","slds-popover__close",3,"click"],["icon","close"],["popover",""],[1,"slds-popover__body","slds-scrollable--y",3,"ngStyle"],["popoverbody",""],[3,"componentset"]],template:function(e,t){1&e&&(u.TgZ(0,"div",0),u.NdJ("mouseenter",(function(){return t.onMouseOver()}))("mouseleave",(function(){return t.onMouseOut()})),u.TgZ(1,"button",1),u.NdJ("click",(function(){return t.closePopover(!0)})),u._UZ(2,"system-button-icon",2),u.qZA(),u.TgZ(3,"div",null,3)(5,"div",4,5),u._UZ(7,"system-componentset",6),u.qZA()()()),2&e&&(u.Q6J("ngStyle",t.popoverStyle)("ngClass",t.getNubbinClass()),u.xp6(5),u.Q6J("ngStyle",t.popoverBodyStyle),u.xp6(2),u.Q6J("componentset",t.componentset))},dependencies:[n.mk,n.PC,p.J,G.E],encapsulation:2})}return SystemPopover})();var ai=s(32294),di=s(23814);function ri(e,t){if(1&e&&u._UZ(0,"system-componentset",3),2&e){const e=u.oxw();u.Q6J("componentset",e.componentset)}}function ci(e,t){if(1&e){const e=u.EpF();u.TgZ(0,"div",4)(1,"button",5),u.NdJ("click",(function(){u.CHM(e);const t=u.oxw();return u.KtG(t.cancel())})),u._UZ(2,"system-label",6),u.qZA(),u.TgZ(3,"button",7),u.NdJ("click",(function(){u.CHM(e);const t=u.oxw();return u.KtG(t.save())})),u._UZ(4,"system-label",8),u.qZA()()}}const ui=function(e){return{editable:e}};let mi=(()=>{class SystemViewContainer{view;language;model;componentconfig={};constructor(e,t,s){this.view=e,this.language=t,this.model=s}get componentset(){return this.componentconfig.componentset}get editable(){return!(!this.model||!this.componentconfig.editable)}cancel(){this.model&&(this.model.cancelEdit(),this.view.setViewMode())}save(){this.model&&this.model.validate()&&(this.model.save(!0),this.view.setViewMode())}static ɵfac=function(e){return new(e||SystemViewContainer)(u.Y36(ai.e),u.Y36(m.d),u.Y36(ds.o,8))};static ɵcmp=u.Xpm({type:SystemViewContainer,selectors:[["system-view-container"]],inputs:{componentconfig:"componentconfig"},decls:3,vars:5,consts:[[3,"system-view-provider"],[3,"componentset",4,"ngIf"],["class","slds-text-align--center slds-p-bottom--small",4,"ngIf"],[3,"componentset"],[1,"slds-text-align--center","slds-p-bottom--small"],[1,"slds-button","slds-button--neutral",3,"click"],["label","LBL_CANCEL"],[1,"slds-button","slds-button--brand","slds-button-space-left",3,"click"],["label","LBL_SAVE"]],template:function(e,t){1&e&&(u.TgZ(0,"div",0),u.YNc(1,ri,1,1,"system-componentset",1),u.YNc(2,ci,5,0,"div",2),u.qZA()),2&e&&(u.Q6J("system-view-provider",u.VKq(3,ui,t.editable)),u.xp6(1),u.Q6J("ngIf",t.componentset),u.xp6(1),u.Q6J("ngIf",t.view.isEditMode()))},dependencies:[di.V,n.O5,G.E,f._],encapsulation:2})}return SystemViewContainer})();var gi=s(98594),hi=s(40116);let pi=(()=>{class SystemWrappedText{sanitizer;text="";constructor(e){this.sanitizer=e}getHtml(){let e=this.text;return e=this.escapeHtml(e),e=e.replace(/ *\n( *\n)+ */g,'</div><div style="margin-top:0.5em">'),e=e.replace(/ *\n */g,"<br>"),this.sanitizer.bypassSecurityTrustHtml("<div>"+e+"</div>")}escapeHtml(e){let t={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#039;"};return e.replace(/[&<>"']/g,(e=>t[e]))}static ɵfac=function(e){return new(e||SystemWrappedText)(u.Y36(It.H7))};static ɵcmp=u.Xpm({type:SystemWrappedText,selectors:[["system-wrapped-text"]],inputs:{text:"text"},decls:1,vars:1,consts:[[3,"innerHTML"]],template:function(e,t){1&e&&u._UZ(0,"div",0),2&e&&u.Q6J("innerHTML",t.getHtml(),u.oJD)},encapsulation:2})}return SystemWrappedText})();var fi=s(95681),bi=s(31058),_i=s(4411);function vi(e,t){1&e&&u._UZ(0,"system-spinner",10)}function yi(e,t){if(1&e){const e=u.EpF();u.TgZ(0,"system-custom-icon",16),u.NdJ("click",(function(){u.CHM(e);const t=u.oxw(2);return u.KtG(t.setDefault())})),u.qZA()}if(2&e){const e=u.oxw(2);u.Q6J("icon",e.isDefault?"light-bulb-on":"light-bulb-off")}}function xi(e,t){if(1&e){const e=u.EpF();u.TgZ(0,"button",17),u.NdJ("click",(function(){u.CHM(e);const t=u.oxw(2);return u.KtG(t.loadLanguage(t.package.language_code))})),u._UZ(1,"system-button-icon",18),u.qZA()}}function wi(e,t){if(1&e){const e=u.EpF();u.TgZ(0,"button",19),u.NdJ("click",(function(){u.CHM(e);const t=u.oxw(2);return u.KtG(t.deleteLanguage(t.package.language_code))})),u._UZ(1,"system-button-icon",20),u.qZA()}if(2&e){const e=u.oxw(2);u.Q6J("disabled",e.deletedisabled)}}function Zi(e,t){if(1&e){const e=u.EpF();u.TgZ(0,"button",17),u.NdJ("click",(function(){u.CHM(e);const t=u.oxw(2);return u.KtG(t.loadLanguage(t.package.language_code))})),u._UZ(1,"system-button-icon",21),u.qZA()}}function Ti(e,t){if(1&e&&(u.TgZ(0,"div",11),u.YNc(1,yi,1,1,"system-custom-icon",12),u.TgZ(2,"div",13),u.YNc(3,xi,2,0,"button",14),u.YNc(4,wi,2,1,"button",15),u.YNc(5,Zi,2,0,"button",14),u.qZA()()),2&e){const e=u.oxw();u.xp6(1),u.Q6J("ngIf",e.package.installed),u.xp6(2),u.Q6J("ngIf",!e.package.installed),u.xp6(1),u.Q6J("ngIf",e.package.installed&&!e.isDefault),u.xp6(1),u.Q6J("ngIf",e.package.installed)}}let Ci=(()=>{class PackageLoaderLanguage{language;backend;configurationService;loader;broadcast;package;repository;loading=!1;constructor(e,t,s,i,n){this.language=e,this.backend=t,this.configurationService=s,this.loader=i,this.broadcast=n}get isDefault(){return this.package.language_code==this.language.getDefaultLanguage()}get deletedisabled(){return this.isDefault||this.package.language_code==this.language.currentlanguage}get repositoryaddurl(){return this.repository&&this.repository.id?"/"+this.repository.id:""}setDefault(){this.isDefault||this.language.setDefaultLanguage(this.package.language_code)}loadLanguage(e){this.loading=!0,this.backend.getRequest("configuration/packages/language/"+e+this.repositoryaddurl).subscribe((t=>{this.loading=!1,t.success&&(this.package.installed=!0,this.language.addAvailableLanguage(t.languages[e]),this.language.currentlanguage==e?this.language.loadLanguage().subscribe((e=>{this.package.installed=!0})):this.package.installed=!0)}))}deleteLanguage(e){this.loading=!0,this.backend.deleteRequest("configuration/packages/language/"+e).subscribe((t=>{this.loading=!1,t&&(this.package.installed=!1,this.language.removeAvailableLanguage(e))}))}static ɵfac=function(e){return new(e||PackageLoaderLanguage)(u.Y36(m.d),u.Y36(We.y),u.Y36(Ae.C),u.Y36(_i._),u.Y36(Js.f))};static ɵcmp=u.Xpm({type:PackageLoaderLanguage,selectors:[["package-loader-language"]],inputs:{package:"package",repository:"repository"},decls:11,vars:4,consts:[[1,"slds-card"],[1,"slds-card__header","slds-grid"],[1,"slds-media","slds-media_center","slds-has-flexi-truncate"],["size","small","icon","custom68","sprite","custom",1,"slds-p-right--xx-small"],[1,"slds-media__body"],[1,"slds-card__header-title"],[1,"slds-card__header-link","slds-truncate",3,"title"],[1,"slds-no-flex"],["size","12",4,"ngIf"],["class","slds-grid slds-grid_vertical-align-center",4,"ngIf"],["size","12"],[1,"slds-grid","slds-grid_vertical-align-center"],["class","slds-p-horizontal--xx-small","size","x-small",3,"icon","click",4,"ngIf"],["role","group",1,"slds-button-group"],["class","slds-button slds-button_icon slds-button_icon-border-filled",3,"click",4,"ngIf"],["class","slds-button slds-button_icon slds-button_icon-border-filled",3,"disabled","click",4,"ngIf"],["size","x-small",1,"slds-p-horizontal--xx-small",3,"icon","click"],[1,"slds-button","slds-button_icon","slds-button_icon-border-filled",3,"click"],["icon","download"],[1,"slds-button","slds-button_icon","slds-button_icon-border-filled",3,"disabled","click"],["icon","delete"],["icon","refresh"]],template:function(e,t){1&e&&(u.TgZ(0,"article",0)(1,"div",1)(2,"header",2),u._UZ(3,"system-icon",3),u.TgZ(4,"div",4)(5,"h2",5)(6,"div",6),u._uU(7),u.qZA()()(),u.TgZ(8,"div",7),u.YNc(9,vi,1,0,"system-spinner",8),u.YNc(10,Ti,6,4,"div",9),u.qZA()()()()),2&e&&(u.xp6(6),u.Q6J("title",t.package.language_name),u.xp6(1),u.hij(" ",t.package.language_name," "),u.xp6(2),u.Q6J("ngIf",t.loading),u.xp6(1),u.Q6J("ngIf",!t.loading))},dependencies:[n.O5,p.J,z.$,ce.f,bt.W],encapsulation:2})}return PackageLoaderLanguage})();function ki(e,t){if(1&e&&(u.TgZ(0,"div",3),u._UZ(1,"package-loader-language",4),u.qZA()),2&e){const e=t.$implicit,s=u.oxw();u.xp6(1),u.Q6J("package",e)("repository",s.repository)}}let Ai=(()=>{class PackageLoaderLanguages{languages=[];repository;static ɵfac=function(e){return new(e||PackageLoaderLanguages)};static ɵcmp=u.Xpm({type:PackageLoaderLanguages,selectors:[["package-loader-languages"]],inputs:{languages:"languages",repository:"repository"},decls:3,vars:1,consts:[["system-to-bottom","","role","tabpanel"],[1,"slds-grid","slds-wrap"],["class","slds-size--1-of-2 slds-p-around--xx-small",4,"ngFor","ngForOf"],[1,"slds-size--1-of-2","slds-p-around--xx-small"],[3,"package","repository"]],template:function(e,t){1&e&&(u.TgZ(0,"div",0)(1,"div",1),u.YNc(2,ki,2,2,"div",2),u.qZA()()),2&e&&(u.xp6(2),u.Q6J("ngForOf",t.languages))},dependencies:[bi.H,n.sg,Ci],encapsulation:2})}return PackageLoaderLanguages})();function Li(e,t){if(1&e){const e=u.EpF();u.TgZ(0,"button",21),u.NdJ("click",(function(){u.CHM(e);const t=u.oxw();return u.KtG(t.loadPackage(t.package.package))})),u._UZ(1,"system-button-icon",22),u.qZA()}if(2&e){const e=u.oxw();u.Q6J("disabled",e.disabled)}}function Ii(e,t){if(1&e){const e=u.EpF();u.TgZ(0,"button",21),u.NdJ("click",(function(){u.CHM(e);const t=u.oxw();return u.KtG(t.deletePackage(t.package.package))})),u._UZ(1,"system-button-icon",23),u.qZA()}if(2&e){const e=u.oxw();u.Q6J("disabled",e.disabled)}}function Si(e,t){if(1&e){const e=u.EpF();u.TgZ(0,"button",21),u.NdJ("click",(function(){u.CHM(e);const t=u.oxw();return u.KtG(t.loadPackage(t.package.package))})),u._UZ(1,"system-button-icon",24),u.qZA()}if(2&e){const e=u.oxw();u.Q6J("disabled",e.disabled)}}function Mi(e,t){if(1&e&&(u.TgZ(0,"div",25)(1,"div",26),u._UZ(2,"system-utility-icon",27),u._uU(3),u.qZA(),u.TgZ(4,"div",28),u._UZ(5,"system-utility-icon",29),u.qZA()()),2&e){const e=t.$implicit,s=u.oxw();u.xp6(2),u.Q6J("colorclass",s.disabled?"slds-icon-text-light":"slds-icon-text-default"),u.xp6(1),u.hij(" ",e.name,""),u.xp6(2),u.Q6J("icon",e.status?"check":"close")("colorclass",s.disabled?"slds-icon-text-light":"slds-icon-text-default")}}function Ji(e,t){if(1&e&&(u.TgZ(0,"div",25)(1,"div",26),u._UZ(2,"system-utility-icon",30),u._uU(3),u.qZA(),u.TgZ(4,"div",28),u._UZ(5,"system-utility-icon",29),u.qZA()()),2&e){const e=t.$implicit,s=u.oxw();u.xp6(2),u.Q6J("colorclass",s.disabled?"slds-icon-text-light":"slds-icon-text-default"),u.xp6(1),u.hij(" ",e.package,""),u.xp6(2),u.Q6J("icon",e.installed?"check":"close")("colorclass",s.disabled?"slds-icon-text-light":"slds-icon-text-default")}}function Oi(e,t){1&e&&(u.TgZ(0,"div",31),u._UZ(1,"system-label",32),u.qZA())}function Ni(e,t){1&e&&(u.TgZ(0,"div",36),u._UZ(1,"system-spinner",37),u.TgZ(2,"span",38),u._UZ(3,"system-label",39),u.qZA()())}function Fi(e,t){1&e&&u._UZ(0,"system-loader-progress",40)}function qi(e,t){if(1&e&&(u.TgZ(0,"div",33),u.YNc(1,Ni,4,0,"div",34),u.YNc(2,Fi,1,0,"system-loader-progress",35),u.qZA()),2&e){const e=u.oxw();u.xp6(1),u.Q6J("ngIf","package"==e.loading),u.xp6(1),u.Q6J("ngIf","configuration"==e.loading)}}const Ei=function(e){return{"slds-disabled-text":e}},Yi=function(e){return{"slds-hidden":e}};let Di=(()=>{class PackageLoaderPackage{language;backend;configurationService;loader;modal;broadcast;package;packages=[];repository;extensions=[];requiredpackages=[];loading="";constructor(e,t,s,i,n,l){this.language=e,this.backend=t,this.configurationService=s,this.loader=i,this.modal=n,this.broadcast=l}get disabled(){if(this.package.package.installed)return!1;let e=!1;return this.extensions.forEach((t=>{t.status||(e=!0)})),this.requiredpackages.forEach((t=>{t.installed||(e=!0)})),e}get repositoryaddurl(){return this.repository&&this.repository.id?"/"+this.repository.id:""}ngOnInit(){if(this.package.extensions)for(let e of this.package.extensions.split(",")){let t=this.configurationService.checkCapability(e);this.extensions.push({name:e,status:t})}this.package.packages&&(this.requiredpackages=this.packages.filter((e=>this.package.packages.split(",").indexOf(e.package)>=0)))}loadPackage(e){this.loading="package",this.backend.getRequest("configuration/packages/package/"+e+this.repositoryaddurl).subscribe((e=>{this.loading="configuration",this.loader.load().subscribe((e=>{this.package.installed=!0,this.broadcast.broadcastMessage("loader.reloaded"),this.loading=""}))}),(e=>{this.executeDB(),this.loading=""}))}executeDB(){this.modal.confirm("MSG_PACKAGE_REPAIR_DB","LBL_REPAIR_DATABASE","error").subscribe((e=>{if(!e)return;const t=this.modal.await(this.language.getLabel("LBL_PROCESSING"));this.backend.getRequest("admin/repair/sql").subscribe((e=>{t.next(!0),t.complete(),e&&this.modal.openModal("AdministrationDictRepairModal",!0).subscribe((t=>{t.instance.sql=e.sql,t.instance.wholeSQL=e.wholeSQL}))}))}))}deletePackage(e){this.loading="package",this.backend.deleteRequest("configuration/packages/package/"+e).subscribe((e=>{this.loading="configuration",this.package.installed=!1,this.loader.load().subscribe((e=>{this.broadcast.broadcastMessage("loader.reloaded"),this.loading=""}))}))}static ɵfac=function(e){return new(e||PackageLoaderPackage)(u.Y36(m.d),u.Y36(We.y),u.Y36(Ae.C),u.Y36(_i._),u.Y36(tt.o),u.Y36(Js.f))};static ɵcmp=u.Xpm({type:PackageLoaderPackage,selectors:[["package-loader-package"]],inputs:{package:"package",packages:"packages",repository:"repository"},decls:28,vars:16,consts:[[1,"slds-card",3,"ngClass"],[3,"ngClass"],[1,"slds-card__header","slds-grid"],[1,"slds-media","slds-media_center","slds-has-flexi-truncate"],["size","small","icon","custom13","sprite","custom",1,"slds-p-right--xx-small"],[1,"slds-media__body"],[1,"slds-card__header-title"],[1,"slds-card__header-link","slds-truncate",3,"title"],[1,"slds-no-flex"],["role","group",1,"slds-button-group"],["class","slds-button slds-button_icon slds-button_icon-border-filled",3,"disabled","click",4,"ngIf"],[1,"slds-card__body","slds-p-horizontal--small"],[1,"slds-grid","slds-gutters_direct-x-small"],[1,"slds-size--1-of-2","slds-col"],[1,"slds-text-heading_small","slds-p-vertical--xx-small"],["label","LBL_DETAILS"],[1,"slds-text-align--justify"],["label","LBL_PREREQUISITES"],["class","slds-grid slds-grid_vertical-align-center slds-p-vertical--xxx-small",4,"ngFor","ngForOf"],["class","slds-disabled-text",4,"ngIf"],["class","slds-is-absolute__top slds-size_full slds-height_full slds-align_absolute-center",4,"ngIf"],[1,"slds-button","slds-button_icon","slds-button_icon-border-filled",3,"disabled","click"],["icon","download"],["icon","delete"],["icon","refresh"],[1,"slds-grid","slds-grid_vertical-align-center","slds-p-vertical--xxx-small"],[1,"slds-size--1-of-2","slds-truncate"],["icon","apex_plugin","size","xx-small",3,"colorclass"],[1,"slds-size--1-of-2","slds-text-align--right"],["size","xx-small",3,"icon","colorclass"],["icon","archive","size","xx-small",3,"colorclass"],[1,"slds-disabled-text"],["label","LBL_NO_PREREQUISITES"],[1,"slds-is-absolute__top","slds-size_full","slds-height_full","slds-align_absolute-center"],["class","slds-grid slds-grid_vertical-align-center",4,"ngIf"],["class","slds-size_full",4,"ngIf"],[1,"slds-grid","slds-grid_vertical-align-center"],["size","16"],[1,"slds-p-left--small"],["label","LBL_LOADING"],[1,"slds-size_full"]],template:function(e,t){1&e&&(u.TgZ(0,"article",0)(1,"div",1)(2,"div",2)(3,"header",3),u._UZ(4,"system-icon",4),u.TgZ(5,"div",5)(6,"h2",6)(7,"div",7),u._uU(8),u.qZA()()(),u.TgZ(9,"div",8)(10,"div",9),u.YNc(11,Li,2,1,"button",10),u.YNc(12,Ii,2,1,"button",10),u.YNc(13,Si,2,1,"button",10),u.qZA()()()(),u.TgZ(14,"div",11)(15,"div",12)(16,"div",13)(17,"div",14),u._UZ(18,"system-label",15),u.qZA(),u.TgZ(19,"div",16),u._uU(20),u.qZA()(),u.TgZ(21,"div",13)(22,"div",14),u._UZ(23,"system-label",17),u.qZA(),u.YNc(24,Mi,6,4,"div",18),u.YNc(25,Ji,6,4,"div",18),u.YNc(26,Oi,2,0,"div",19),u.qZA()()()(),u.YNc(27,qi,3,2,"div",20),u.qZA()),2&e&&(u.Q6J("ngClass",u.VKq(12,Ei,t.disabled)),u.xp6(1),u.Q6J("ngClass",u.VKq(14,Yi,t.loading)),u.xp6(6),u.Q6J("title",t.package.name),u.xp6(1),u.hij(" ",t.package.name," "),u.xp6(3),u.Q6J("ngIf",!t.package.installed),u.xp6(1),u.Q6J("ngIf",t.package.installed&&"core"!=t.package.package),u.xp6(1),u.Q6J("ngIf",t.package.installed),u.xp6(7),u.Oqu(t.package.description),u.xp6(4),u.Q6J("ngForOf",t.extensions),u.xp6(1),u.Q6J("ngForOf",t.requiredpackages),u.xp6(1),u.Q6J("ngIf",0==t.requiredpackages.length&&0==t.extensions.length),u.xp6(1),u.Q6J("ngIf",t.loading))},dependencies:[n.mk,n.sg,n.O5,p.J,ce.f,f._,ft.e,bt.W,As.r],encapsulation:2})}return PackageLoaderPackage})(),Ui=(()=>{class PackageLoaderPipe{transform(e,t,s){return e.filter((e=>(!s||e.type==s)&&!(t&&!(t&&e.name.toLowerCase().indexOf(t.toLowerCase())>=0))))}static ɵfac=function(e){return new(e||PackageLoaderPipe)};static ɵpipe=u.Yjl({name:"packageloaderpipe",type:PackageLoaderPipe,pure:!0})}return PackageLoaderPipe})();function Qi(e,t){if(1&e&&(u.TgZ(0,"div",7),u._UZ(1,"package-loader-package",8),u.qZA()),2&e){const e=t.$implicit,s=u.oxw();u.xp6(1),u.Q6J("package",e)("packages",s.packages)("repository",s.repository)}}let Ri=(()=>{class PackageLoaderPackages{language;packagescope="";packagefilterterm="";packages=[];repository;constructor(e){this.language=e}static ɵfac=function(e){return new(e||PackageLoaderPackages)(u.Y36(m.d))};static ɵcmp=u.Xpm({type:PackageLoaderPackages,selectors:[["package-loader-packages"]],inputs:{packagescope:"packagescope",packages:"packages",repository:"repository"},decls:8,vars:7,consts:[["system-to-bottom","","role","tabpanel"],[1,"slds-p-vertical--x-small","slds-p-horizontal--xx-small"],[1,"slds-form-element"],[1,"slds-form-element__control"],["type","text",1,"slds-input",3,"ngModel","placeholder","ngModelChange"],[1,"slds-grid","slds-wrap"],["class","slds-size--1-of-2 slds-p-around--xx-small",4,"ngFor","ngForOf"],[1,"slds-size--1-of-2","slds-p-around--xx-small"],[3,"package","packages","repository"]],template:function(e,t){1&e&&(u.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"input",4),u.NdJ("ngModelChange",(function(e){return t.packagefilterterm=e})),u.qZA()()()(),u.TgZ(5,"div",5),u.YNc(6,Qi,2,3,"div",6),u.ALo(7,"packageloaderpipe"),u.qZA()()),2&e&&(u.xp6(4),u.Q6J("ngModel",t.packagefilterterm)("placeholder",t.language.getLabel("LBL_SEARCH")),u.xp6(2),u.Q6J("ngForOf",u.Dn7(7,3,t.packages,t.packagefilterterm,t.packagescope)))},dependencies:[bi.H,n.sg,l.Fj,l.JJ,l.On,Di,Ui],encapsulation:2})}return PackageLoaderPackages})();function ji(e,t){1&e&&(u.TgZ(0,"div",17),u._UZ(1,"system-icon",18),u.TgZ(2,"span",19),u._UZ(3,"system-label",20),u.qZA()())}function Bi(e,t){if(1&e&&(u.TgZ(0,"div",21),u._UZ(1,"system-icon",18),u.TgZ(2,"span",19),u._UZ(3,"system-label",22),u._uU(4),u.qZA()()),2&e){const e=u.oxw();u.xp6(4),u.hij(": ",e.errorpackagesdisplay,"")}}function Gi(e,t){if(1&e){const e=u.EpF();u.TgZ(0,"li",34),u.NdJ("click",(function(){const t=u.CHM(e).$implicit,s=u.oxw(2);return u.KtG(s.selectRepository(t))})),u.TgZ(1,"div",35)(2,"div",36),u._uU(3),u.qZA()()()}if(2&e){const e=t.$implicit;u.xp6(3),u.Oqu(e.name)}}function Pi(e,t){if(1&e){const e=u.EpF();u.TgZ(0,"div",23)(1,"div",24)(2,"div",25)(3,"div",26)(4,"div",27)(5,"div",28)(6,"input",29),u.NdJ("ngModelChange",(function(t){u.CHM(e);const s=u.oxw();return u.KtG(s.repositoryname=t)})),u.qZA(),u._UZ(7,"system-icon",30),u.qZA(),u.TgZ(8,"div",31)(9,"ul",32),u.YNc(10,Gi,4,1,"li",33),u.qZA()()()()()()()}if(2&e){const e=u.oxw();u.xp6(4),u.Q6J("system-dropdown-trigger",e.repositories.length<=1),u.xp6(2),u.Q6J("ngModel",e.repositoryname)("disabled",e.repositories.length<=1),u.xp6(4),u.Q6J("ngForOf",e.repositories)}}const Hi=function(e){return{"slds-is-active":e}},zi=function(e,t){return{"slds-show":e,"slds-hide":t}};function Vi(e,t){if(1&e){const e=u.EpF();u.TgZ(0,"div",37)(1,"ul",38)(2,"li",39)(3,"a",40),u.NdJ("click",(function(){u.CHM(e);const t=u.oxw();return u.KtG(t.scope="essentials")})),u._UZ(4,"system-label",41),u.qZA()(),u.TgZ(5,"li",39)(6,"a",40),u.NdJ("click",(function(){u.CHM(e);const t=u.oxw();return u.KtG(t.scope="packages")})),u._UZ(7,"system-label",42),u.qZA()(),u.TgZ(8,"li",43)(9,"a",40),u.NdJ("click",(function(){u.CHM(e);const t=u.oxw();return u.KtG(t.scope="languages")})),u._UZ(10,"system-label",44),u.qZA()(),u.TgZ(11,"li",39)(12,"a",40),u.NdJ("click",(function(){u.CHM(e);const t=u.oxw();return u.KtG(t.scope="content")})),u._UZ(13,"system-label",45),u.qZA()()(),u._UZ(14,"package-loader-packages",46)(15,"package-loader-packages",47)(16,"package-loader-languages",48)(17,"package-loader-packages",49),u.qZA()}if(2&e){const e=u.oxw();u.xp6(2),u.Q6J("ngClass",u.VKq(19,Hi,"essentials"==e.scope))("title",e.language.getLabel("LBL_ESSENTIALS")),u.xp6(3),u.Q6J("ngClass",u.VKq(21,Hi,"packages"==e.scope))("title",e.language.getLabel("LBL_PACKAGES")),u.xp6(3),u.Q6J("ngClass",u.VKq(23,Hi,"languages"==e.scope)),u.xp6(3),u.Q6J("ngClass",u.VKq(25,Hi,"content"==e.scope))("title",e.language.getLabel("LBL_CONTENT")),u.xp6(3),u.Q6J("ngClass",u.WLB(27,zi,"essentials"==e.scope,"essentials"!=e.scope))("packages",e.packages)("repository",e.repository),u.xp6(1),u.Q6J("ngClass",u.WLB(30,zi,"packages"==e.scope,"packages"!=e.scope))("packages",e.packages)("repository",e.repository),u.xp6(1),u.Q6J("ngClass",u.WLB(33,zi,"languages"==e.scope,"languages"!=e.scope))("languages",e.languages)("repository",e.repository),u.xp6(1),u.Q6J("ngClass",u.WLB(36,zi,"content"==e.scope,"content"!=e.scope))("packages",e.packages)("repository",e.repository)}}function $i(e,t){1&e&&(u.TgZ(0,"div",50)(1,"h2",51),u._uU(2,"Please select a Repository"),u.qZA()())}function Ki(e,t){1&e&&(u.TgZ(0,"div",52)(1,"div",21),u._UZ(2,"system-spinner",53),u.TgZ(3,"div",54),u._UZ(4,"system-label",55),u.qZA()()())}let Xi=(()=>{class PackageLoader{language;backend;toast;metadata;scope="essentials";loading=!0;packagefilterterm="";repositories=[];repository;packages=[];versions=[];languages=[];opencrs=!1;errorpackages=[];constructor(e,t,s,i){this.language=e,this.backend=t,this.toast=s,this.metadata=i,this.backend.getRequest("configuration/packages/repositories").subscribe((e=>{this.loading=!1,this.repositories=e,0==this.repositories.length?(this.repository="default",this.loadpackages()):1==this.repositories.length&&(this.repository=this.repositories[0],this.loadpackages())}),(e=>{this.loading=!1}))}get errorpackagesdisplay(){return this.errorpackages.join(", ")}set repositoryname(e){this.repository.name=e}get repositoryname(){return this.repository&&this.repository.name?this.repository.name:""}get repositoryaddurl(){return this.repository&&this.repository.id?"/"+this.repository.id:""}loadpackages(){this.loading=!0,this.packages=[],this.languages=[],this.opencrs=!1,this.errorpackages=[],this.backend.getRequest("configuration/packages"+this.repositoryaddurl).subscribe((e=>{this.loading=!1;try{let t=this.language.getAvialableLanguages(!0);for(let s of e.languages)t.some((e=>{if(e.language==s.language_code)return s.installed=!0,!0})),this.languages.push(s);for(let t of e.packages){let s=e.loaded.packages.indexOf(t.package);s>=0?(t.installed=!0,e.loaded.packages.splice(s,1)):t.installed=!1,this.packages.push(t)}this.versions=e.versions,this.opencrs=e.opencrs,this.errorpackages=e.loaded.packages}catch(e){console.error(e)}}),(e=>{this.loading=!1}))}selectRepository(e){this.repository=e,this.loadpackages()}static ɵfac=function(e){return new(e||PackageLoader)(u.Y36(m.d),u.Y36(We.y),u.Y36(h.A),u.Y36(g.Pu))};static ɵcmp=u.Xpm({type:PackageLoader,selectors:[["package-loader"]],decls:18,vars:6,consts:[[1,"slds-p-around--medium","slds-theme--shade"],[1,"slds-page-header__row"],[1,"slds-page-header__col-title"],[1,"slds-media"],["icon","custom19","sprite","custom"],[1,"slds-media__body"],[1,"slds-page-header__name"],[1,"slds-page-header__name-title"],[1,"slds-page-header__title","slds-truncate"],["label","LBL_PACKAGE_LOADER"],[1,"slds-page-header__name-meta","slds-grid"],["class","slds-grid slds-grid_vertical-align-center slds-p-right--small",4,"ngIf"],["class","slds-grid slds-grid_vertical-align-center",4,"ngIf"],["class","slds-page-header__col-actions",4,"ngIf"],["class","slds-theme--default",4,"ngIf"],["system-to-bottom","","class","slds-theme--default slds-align--absolute-center",4,"ngIf"],["system-to-bottom","","class","slds-align_absolute-center",4,"ngIf"],[1,"slds-grid","slds-grid_vertical-align-center","slds-p-right--small"],["addclasses","slds-icon slds-icon-text-warning","divClass","","icon","warning","sprite","utility","size","xx-small"],[1,"slds-p-left--xx-small"],["label","LBL_OPEN_CHANGEREQUESTS"],[1,"slds-grid","slds-grid_vertical-align-center"],["label","LBL_ERRONEUOS_PACKAGES"],[1,"slds-page-header__col-actions"],[1,"slds-form-element"],[1,"slds-form-element__control"],[1,"slds-combobox_container"],["role","combobox",1,"slds-combobox","slds-dropdown-trigger","slds-dropdown-trigger_click",3,"system-dropdown-trigger"],["role","none",1,"slds-combobox__form-element","slds-input-has-icon","slds-input-has-icon_right"],["type","text","autoComplete","off","role","textbox",1,"slds-input","slds-combobox__input",3,"ngModel","disabled","ngModelChange"],["icon","down","sprite","utility","size","x-small","addclasses","slds-icon_container slds-icon-utility-down slds-input__icon slds-input__icon_right"],["role","listbox",1,"slds-dropdown","slds-dropdown_length-5","slds-dropdown--x-small"],["role","presentation",1,"slds-listbox","slds-listbox_vertical"],["role","presentation","class","slds-listbox__item",3,"click",4,"ngFor","ngForOf"],["role","presentation",1,"slds-listbox__item",3,"click"],["role","option",1,"slds-listbox__option","slds-listbox__option_plain"],["title","Express Logistics and Transport",1,"slds-truncate"],[1,"slds-theme--default"],["role","tablist",1,"slds-tabs_default__nav"],["role","presentation",1,"slds-tabs_default__item",3,"ngClass","title"],["href","javascript:void(0);","role","tab",1,"slds-tabs_default__link",3,"click"],["label","LBL_ESSENTIALS"],["label","LBL_PACKAGES"],["title","language.getLabel('LBL_LANGUAGES')","role","presentation",1,"slds-tabs_default__item",3,"ngClass"],["label","LBL_LANGUAGES"],["label","LBL_CONTENT"],["packagescope","essentials",3,"ngClass","packages","repository"],["packagescope","config",3,"ngClass","packages","repository"],[3,"ngClass","languages","repository"],["packagescope","content",3,"ngClass","packages","repository"],["system-to-bottom","",1,"slds-theme--default","slds-align--absolute-center"],[1,"slds-text-heading--medium","slds-p-vertical--small"],["system-to-bottom","",1,"slds-align_absolute-center"],["size","16"],[1,"slds-p-horizontal--small"],["label","LBL_RETRIEVING_PACKAGES"]],template:function(e,t){1&e&&(u.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),u._UZ(4,"system-icon",4),u.TgZ(5,"div",5)(6,"div",6)(7,"div",7)(8,"h1")(9,"span",8),u._UZ(10,"system-label",9),u.qZA()()()(),u.TgZ(11,"div",10),u.YNc(12,ji,4,0,"div",11),u.YNc(13,Bi,5,1,"div",12),u.qZA()()()(),u.YNc(14,Pi,11,4,"div",13),u.qZA()(),u.YNc(15,Vi,18,39,"div",14),u.YNc(16,$i,3,0,"div",15),u.YNc(17,Ki,5,0,"div",16)),2&e&&(u.xp6(12),u.Q6J("ngIf",t.opencrs),u.xp6(1),u.Q6J("ngIf",t.errorpackages.length>0),u.xp6(1),u.Q6J("ngIf",t.repositories.length>0),u.xp6(1),u.Q6J("ngIf",!t.loading&&t.repository),u.xp6(1),u.Q6J("ngIf",!t.loading&&!t.repository),u.xp6(1),u.Q6J("ngIf",t.loading))},dependencies:[fi.l,bi.H,n.mk,n.sg,n.O5,l.Fj,l.JJ,l.On,Ai,Ri,ce.f,f._,bt.W],encapsulation:2})}return PackageLoader})();var Wi=s(83617);let en=(()=>{class SystemFilterBuilder{module;onChange;onTouched;_conditions={logicaloperator:"and",groupscope:"all",conditions:[]};registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}writeValue(e){if(e&&!_.isEmpty(e)){let t={logicaloperator:e.logicaloperator,groupscope:e.groupscope,conditions:[...e.conditions]};this._conditions=t}}expressionChanged(){let e=[];for(let t of this._conditions.conditions)!0!==t.deleted&&e.push(t);this._conditions.conditions=e,_.isEmpty(this._conditions.conditions)?this.onChange(null):this.onChange({...this._conditions})}static ɵfac=function(e){return new(e||SystemFilterBuilder)};static ɵcmp=u.Xpm({type:SystemFilterBuilder,selectors:[["system-filter-builder"]],inputs:{module:"module"},features:[u._Bn([{provide:l.JU,useExisting:(0,u.Gpc)((()=>SystemFilterBuilder)),multi:!0}])],decls:1,vars:2,consts:[[3,"filtergroup","module","expressionChanged"]],template:function(e,t){1&e&&(u.TgZ(0,"system-filter-builder-expression-group",0),u.NdJ("expressionChanged",(function(){return t.expressionChanged()})),u.qZA()),2&e&&u.Q6J("filtergroup",t._conditions)("module",t.module)},dependencies:[Wi.s],encapsulation:2})}return SystemFilterBuilder})();var tn=s(61230),sn=s(57706),nn=s(47617),ln=s(37720),on=s(82547),an=s(46449),dn=s(46991),rn=s(56041),cn=s(15861),un=s(69774);const mn=["inputFile"];function gn(e,t){if(1&e){const e=u.EpF();u.TgZ(0,"div",3)(1,"div",4),u.NdJ("system-drop-file",(function(t){u.CHM(e);const s=u.oxw();return u.KtG(s.uploadFile(t))})),u.TgZ(2,"input",5,6),u.NdJ("change",(function(){u.CHM(e);const t=u.MAs(3),s=u.oxw();return u.KtG(s.uploadFile(t.files))}))("click",(function(){u.CHM(e);const t=u.MAs(3);return u.KtG(t.value=null)})),u.qZA(),u.TgZ(4,"label",7)(5,"span",8),u._UZ(6,"system-button-icon",9)(7,"system-label",10),u.qZA(),u.TgZ(8,"span",11),u._UZ(9,"system-label",12)(10,"system-label",13),u.qZA()()()()}if(2&e){const e=u.oxw();u.xp6(2),u.Q6J("accept",e.accept)("disabled",e.disabled)("id",e.elementID),u.xp6(2),u.Q6J("for",e.elementID)}}function hn(e,t){if(1&e){const e=u.EpF();u.TgZ(0,"div",14)(1,"span",15),u._UZ(2,"system-file-icon",16),u.qZA(),u.TgZ(3,"a",17)(4,"div",18),u._uU(5),u.qZA()(),u.TgZ(6,"button",19),u.NdJ("click",(function(){u.CHM(e);const t=u.oxw();return u.KtG(t.removeFile())})),u._UZ(7,"system-button-icon",20),u.qZA()()}if(2&e){const e=u.oxw();u.xp6(2),u.Q6J("filename",e.file.file_name)("filemimetype",e.file.file_mime_type),u.xp6(2),u.Q6J("system-title",e.file.file_name),u.xp6(1),u.hij(" ",e.file.file_name," ")}}let pn=(()=>{class SystemInputFileContent{configurationService;session;toast;helper;modal;cdRef;language;inputFile;fieldName;accept="*";disabled=!1;contenttype="base64";persistens=!1;isUploading=!1;elementID=_.uniqueId("input-file");onChange;onTouched;file;constructor(e,t,s,i,n,l,o){this.configurationService=e,this.session=t,this.toast=s,this.helper=i,this.modal=n,this.cdRef=l,this.language=o}registerOnChange(e){this.onChange=t=>{e(t)}}registerOnTouched(e){this.onTouched=e}writeValue(e){this.file=e}uploadFile(e){var t=this;return(0,cn.Z)((function*(){if(0==e.length)return;t.isUploading=!0,t.cdRef.detectChanges(),t.file={file_name:e[0].name,file_mime_type:e[0].type,file_size:t.helper.humanFileSize(e[0].size)};let s=t.configurationService.getSystemParamater("upload_maxsize");if(s&&e[0].size>s)return void t.toast.sendToast(t.language.getLabelFormatted("LBL_EXCEEDS_MAX_UPLOADFILESIZE",[t.file.file_name,t.helper.humanFileSize(s)]),"error");const i=yield t.readFileAsync(e[0]);t.onChange(i),t.persistens||(t.file=void 0,t.cdRef.detectChanges())}))()}readFileAsync(e){var t=this;return(0,cn.Z)((function*(){return new Promise(((s,i)=>{const n=new FileReader;if(n.onload=()=>s(n.result.toString()),n.onerror=i,"text"===t.contenttype)n.readAsText(e);else n.readAsDataURL(e)}))}))()}removeFile(){this.file=void 0,this.cdRef.detectChanges(),this.onChange(null)}static ɵfac=function(e){return new(e||SystemInputFileContent)(u.Y36(Ae.C),u.Y36(ie.n),u.Y36(h.A),u.Y36(be._),u.Y36(tt.o),u.Y36(u.sBO),u.Y36(m.d))};static ɵcmp=u.Xpm({type:SystemInputFileContent,selectors:[["system-input-file-content"]],viewQuery:function(e,t){if(1&e&&u.Gf(mn,5,u.s_b),2&e){let e;u.iGM(e=u.CRH())&&(t.inputFile=e.first)}},inputs:{fieldName:"fieldName",accept:"accept",disabled:"disabled",contenttype:"contenttype",persistens:"persistens"},features:[u._Bn([{provide:l.JU,useExisting:(0,u.Gpc)((()=>SystemInputFileContent)),multi:!0}])],decls:4,vars:2,consts:[[1,"slds-form-element__control","slds-grid","slds-grid--align-spread","slds-p-vertical--xx-small","slds-is-relative","slds-size--1-of-1"],["class","slds-file-selector slds-file-selector_files slds-is-relative slds-size--1-of-1",4,"ngIf","ngIfElse"],["fileContainer",""],[1,"slds-file-selector","slds-file-selector_files","slds-is-relative","slds-size--1-of-1"],[1,"slds-file-selector__dropzone","slds-p-around--small","slds-is-relative","slds-size--1-of-1",3,"system-drop-file"],["type","file",1,"slds-file-selector__input","slds-assistive-text","slds-has-error",3,"accept","disabled","id","change","click"],["inputFile",""],[1,"slds-file-selector__body",2,"cursor","pointer",3,"for"],[1,"slds-file-selector__button","slds-button","slds-button_neutral"],["icon","upload",1,"slds-m-right--xx-small","slds-align--absolute-center"],["label","LBL_UPLOAD_FILE"],[1,"slds-file-selector__text","slds-medium-show"],["label","LBL_OR"],["label","LBL_DROP_FILE"],[1,"slds-pill","slds-pill_link","slds-size--1-of-1"],[1,"slds-pill__icon_container","slds-m-left--xxx-small"],["divClass","","size","small",3,"filename","filemimetype"],["href","javascript:void(0);",1,"slds-pill__action","slds-p-around--xx-small"],[1,"slds-pill__label","slds-truncate",2,"width","calc(100% - 20px)",3,"system-title"],["system-title","LBL_REMOVE",1,"slds-button","slds-button_icon","slds-button_icon","slds-pill__remove","slds-m-right--xx-small",3,"click"],["icon","close"]],template:function(e,t){if(1&e&&(u.TgZ(0,"div",0),u.YNc(1,gn,11,4,"div",1),u.YNc(2,hn,8,4,"ng-template",null,2,u.W1O),u.qZA()),2&e){const e=u.MAs(3);u.xp6(1),u.Q6J("ngIf",!t.file)("ngIfElse",e)}},dependencies:[un.M,it.S,n.O5,p.J,ue.T,f._],encapsulation:2,changeDetection:0})}return SystemInputFileContent})();var fn=s(64947);function bn(e,t){if(1&e){const e=u.EpF();u.TgZ(0,"button",7),u.NdJ("click",(function(){u.CHM(e);const t=u.oxw();return u.KtG(t.expandItem())})),u._UZ(1,"system-button-icon",8),u.qZA()}if(2&e){const e=u.oxw();u.Q6J("disabled",e.disabled),u.xp6(1),u.Q6J("icon",e.icon)}}function _n(e,t){if(1&e){const e=u.EpF();u.TgZ(0,"system-module-tree-item",9),u.NdJ("itemSelected",(function(t){u.CHM(e);const s=u.oxw();return u.KtG(s.emitSelected(t))})),u.qZA()}if(2&e){const e=t.$implicit,s=u.oxw();u.Q6J("module",e.module)("name",e.displayname)("nodedata",e)("level",s.level+1)("path",e.path)("selectedNodeId",s.selectedNodeId)("displayAuditFields",s.displayAuditFields)("displayRelationshipFields",s.displayRelationshipFields)}}let vn=(()=>{class SystemModuleTreeItem{backend;language;metadata;moduleTree;modelUtilities;displayRelationshipFields=!1;displayAuditFields=!1;selectedNodeId="";level=1;path;module;name;nodedata;expanded=!1;nodeitems=[];isLoaded=!1;isLoading=!1;disabled=!1;itemSelected=new u.vpe;constructor(e,t,s,i,n){this.backend=e,this.language=t,this.metadata=s,this.moduleTree=i,this.modelUtilities=n}get isSelected(){return this.selectedNodeId==this.nodedata.nodeId}get icon(){return this.isLoading?"spinner":"chevronright"}loadItems(){this.isLoading=!0,this.moduleTree.isLoading=!0,this.backend.getRequest("dictionary/browser/"+this.module+"/nodes").subscribe((e=>{e&&(this.nodeitems=e.map((e=>(e.nodeId=this.modelUtilities.generateGuid(),e.displayname=e.label?this.language.getLabel(e.label):this.language.getModuleName(e.module),e))).sort(((e,t)=>e.displayname&&t.displayname?e.displayname>t.displayname?1:-1:0)),this.displayRelationshipFields&&this.nodedata.hasRelationshipFields&&(this.nodeitems=[{displayname:this.language.getLabel("LBL_RELATIONSHIP_FIELDS"),leaf:!0,relationshipNode:!0,module:this.module,parentModule:this.nodedata.parentModule,link:this.nodedata.link,nodeId:this.nodedata?this.nodedata.nodeId:"root",path:`relationship:${this.nodedata.parentModule}:${this.nodedata.link}`},...this.nodeitems]),this.displayAuditFields&&1==this.metadata.getModuleDefs(this.module).audited&&(this.nodeitems=[{displayname:this.language.getLabel("LBL_AUDIT_FIELDS"),leaf:!0,auditNode:!0,module:this.module,link:this.nodedata.link,nodeId:this.nodedata?this.nodedata.nodeId:"root",path:`audit:${this.module}:audit`},...this.nodeitems])),this.isLoading=!1,this.moduleTree.isLoading=!1,this.isLoaded=!0,this.nodeitems.length>0?this.expanded=!0:this.disabled=!0}))}expandItem(){this.isLoading||(this.isLoaded?this.expanded=!this.expanded:this.loadItems())}nodeSelected(){this.itemSelected.emit({path:this.path,module:this.module,parentModule:this.nodedata.parentModule,link:this.nodedata.link,nodeId:this.nodedata?this.nodedata.nodeId:"root",relationshipNode:this.nodedata.relationshipNode,auditNode:this.nodedata.auditNode})}emitSelected(e){e.path=this.path+"::"+e.path,this.itemSelected.emit(e)}trackByFn(e,t){return t.nodeId}static ɵfac=function(e){return new(e||SystemModuleTreeItem)(u.Y36(We.y),u.Y36(m.d),u.Y36(g.Pu),u.Y36(fn.w),u.Y36(et.A))};static ɵcmp=u.Xpm({type:SystemModuleTreeItem,selectors:[["system-module-tree-item"]],inputs:{displayRelationshipFields:"displayRelationshipFields",displayAuditFields:"displayAuditFields",selectedNodeId:"selectedNodeId",level:"level",path:"path",module:"module",name:"name",nodedata:"nodedata"},outputs:{itemSelected:"itemSelected"},decls:8,vars:8,consts:[["role","treeitem","tabindex","0"],[1,"slds-tree__item"],["class","slds-button slds-button_icon slds-m-right_x-small",3,"disabled","click",4,"ngIf"],[1,"slds-has-flexi-truncate"],[1,"slds-tree__item-label","slds-truncate",3,"click"],["role","group"],[3,"module","name","nodedata","level","path","selectedNodeId","displayAuditFields","displayRelationshipFields","itemSelected",4,"ngFor","ngForOf","ngForTrackBy"],[1,"slds-button","slds-button_icon","slds-m-right_x-small",3,"disabled","click"],[3,"icon"],[3,"module","name","nodedata","level","path","selectedNodeId","displayAuditFields","displayRelationshipFields","itemSelected"]],template:function(e,t){1&e&&(u.TgZ(0,"li",0)(1,"div",1),u.YNc(2,bn,2,2,"button",2),u.TgZ(3,"span",3)(4,"span",4),u.NdJ("click",(function(){return t.nodeSelected()})),u._uU(5),u.qZA()()(),u.TgZ(6,"ul",5),u.YNc(7,_n,1,8,"system-module-tree-item",6),u.qZA()()),2&e&&(u.uIk("aria-expanded",t.expanded)("aria-level",t.level),u.xp6(1),u.ekj("slds-is-selected",t.isSelected),u.xp6(1),u.Q6J("ngIf",!t.nodedata.leaf),u.xp6(3),u.Oqu(t.name),u.xp6(2),u.Q6J("ngForOf",t.nodeitems)("ngForTrackBy",t.trackByFn))},dependencies:[n.sg,n.O5,p.J,SystemModuleTreeItem],encapsulation:2})}return SystemModuleTreeItem})();var yn=s(18322);let xn=(()=>{class SystemImageModal{language;title="";maxWidth=null;maxHeight=null;droppedFiles=null;set imageData(e){if(this.mimetype=this.imageData_onlyBase64code="",e){let t=e.split(";",2);this.mimetype=t[0],this.imageData_onlyBase64code=t[1].slice(7)}}imageData_onlyBase64code=null;answer=null;answerSubject=null;mimetype;self;systemInputMedia;constructor(e){this.language=e,this.answerSubject=new P.x,this.answer=this.answerSubject.asObservable()}cancel(){this.answerSubject.next(!1),this.answerSubject.complete(),this.self.destroy()}get canSave(){return!!this.imageData_onlyBase64code}save(){this.canSave&&(this.answerSubject.next(this.systemInputMedia.mediaMetaData.mimetype+";base64,"+this.imageData_onlyBase64code),this.answerSubject.complete(),this.self.destroy())}onModalEscX(){this.cancel()}static ɵfac=function(e){return new(e||SystemImageModal)(u.Y36(m.d))};static ɵcmp=u.Xpm({type:SystemImageModal,selectors:[["system-image-modal"]],viewQuery:function(e,t){if(1&e&&u.Gf(on.l,5),2&e){let e;u.iGM(e=u.CRH())&&(t.systemInputMedia=e.first)}},inputs:{title:"title",maxWidth:"maxWidth",maxHeight:"maxHeight",droppedFiles:"droppedFiles",imageData:"imageData"},decls:10,vars:7,consts:[["size","large"],[3,"close"],[1,"slds-height_full",3,"ngModel","maxWidth","maxHeight","droppedFiles","mimetype","ngModelChange"],[1,"slds-button","slds-button--brand",3,"disabled","click"],["label","LBL_SAVE"],[1,"slds-button","slds-button--neutral",3,"click"],["label","LBL_CANCEL"]],template:function(e,t){1&e&&(u.TgZ(0,"system-modal",0)(1,"system-modal-header",1),u.NdJ("close",(function(){return t.cancel()})),u._uU(2),u.qZA(),u.TgZ(3,"system-modal-content")(4,"system-input-media",2),u.NdJ("ngModelChange",(function(e){return t.imageData_onlyBase64code=e}))("mimetype",(function(e){return t.mimetype=e})),u.qZA()(),u.TgZ(5,"system-modal-footer")(6,"button",3),u.NdJ("click",(function(){return t.save()})),u._UZ(7,"system-label",4),u.qZA(),u.TgZ(8,"button",5),u.NdJ("click",(function(){return t.cancel()})),u._UZ(9,"system-label",6),u.qZA()()()),2&e&&(u.xp6(2),u.hij(" ",t.title," "),u.xp6(2),u.Q6J("ngModel",t.imageData_onlyBase64code)("maxWidth",t.maxWidth)("maxHeight",t.maxHeight)("droppedFiles",t.droppedFiles)("mimetype",t.mimetype),u.xp6(2),u.Q6J("disabled",!t.canSave))},dependencies:[l.JJ,l.On,f._,b.j,v.x,y.p,x.y,on.l],encapsulation:2})}return SystemImageModal})();var wn=s(86274),Zn=s(64988),Tn=s(8070),Cn=s(55383),kn=s(1819),An=s(84211),Ln=s(96268),In=s(94845);function Sn(e,t){if(1&e&&u._UZ(0,"object",2),2&e){const e=u.oxw();u.Q6J("data",e.blobUrl,u.uOi)}}let Mn=(()=>{class SystemPDFContainer{sanitizer;pdf;blobUrl;constructor(e){this.sanitizer=e}ngOnChanges(e){if(this.blobUrl=null,this.pdf){let e=this.dataToBlob(atob(this.pdf));this.blobUrl=this.sanitizer.bypassSecurityTrustResourceUrl(URL.createObjectURL(e))}}dataToBlob(e){let t=[];for(let s=0;s<e.length;s+=512){let i=e.slice(s,s+512),n=new Array(i.length);for(let e=0;e<i.length;e++)n[e]=i.charCodeAt(e);let l=new Uint8Array(n);t.push(l)}return new Blob(t)}static ɵfac=function(e){return new(e||SystemPDFContainer)(u.Y36(It.H7))};static ɵcmp=u.Xpm({type:SystemPDFContainer,selectors:[["system-pdf-container"]],inputs:{pdf:"pdf"},features:[u.TTD],decls:2,vars:1,consts:[[1,"slds-size--1-of-1","slds-height_full"],["type","application/pdf","width","100%","height","99%",3,"data",4,"ngIf"],["type","application/pdf","width","100%","height","99%",3,"data"]],template:function(e,t){1&e&&(u.TgZ(0,"div",0),u.YNc(1,Sn,1,1,"object",1),u.qZA()),2&e&&(u.xp6(1),u.Q6J("ngIf",t.blobUrl))},dependencies:[n.O5],encapsulation:2})}return SystemPDFContainer})();function Jn(e,t){if(1&e&&u._UZ(0,"iframe",4),2&e){const e=u.oxw();u.Q6J("src",e.iframeSource,u.uOi)}}let On=(()=>{class SystemIframeModal{sanitizer;cdref;self;iframeSource;source;constructor(e,t){this.sanitizer=e,this.cdref=t}close(){this.self.destroy()}ngOnInit(){this.iframeSource=this.sanitizer.bypassSecurityTrustResourceUrl(this.source),this.cdref.detectChanges()}static ɵfac=function(e){return new(e||SystemIframeModal)(u.Y36(It.H7),u.Y36(u.sBO))};static ɵcmp=u.Xpm({type:SystemIframeModal,selectors:[["system-iframe-modal"]],inputs:{source:"source"},decls:4,vars:1,consts:[["size","large"],[3,"close"],["system-modal-content-grow","","margin","none"],["class","slds-size--1-of-1 slds-height_full","style","border: none;",3,"src",4,"ngIf"],[1,"slds-size--1-of-1","slds-height_full",2,"border","none",3,"src"]],template:function(e,t){1&e&&(u.TgZ(0,"system-modal",0)(1,"system-modal-header-empty",1),u.NdJ("close",(function(){return t.close()})),u.qZA(),u.TgZ(2,"system-modal-content",2),u.YNc(3,Jn,1,1,"iframe",3),u.qZA()()),2&e&&(u.xp6(3),u.Q6J("ngIf",t.source))},dependencies:[n.O5,b.j,v.x,Ct],encapsulation:2,changeDetection:0})}return SystemIframeModal})();var Nn=s(17302),Fn=s(80121),qn=s(13091),En=s(43934),Yn=s(43095),Dn=s(9159),Un=s(72637),Qn=s(42235),Rn=s(79641),jn=s(8222);let Bn=(()=>{class SystemChartService{libLoader;zone;onValueClick$=new P.x;wrapper;options;chartType;chartContainer;data;constructor(e,t){this.libLoader=e,this.zone=t}loadChart(e,t,s,i){this.chartContainer=e,this.options={legend:s.legend??{position:"none"},colors:s.colors,fontSize:s.fontSize??11,isStacked:s.isStacked,is3D:s.is3D},this.chartType=t,this.data=i,this.libLoader.loadLib("googlecharts").subscribe((()=>{this.zone.runOutsideAngular((()=>{google.charts.load("current",{packages:["corechart"]}),google.charts.setOnLoadCallback((()=>this.renderChart()))}))}))}renderChart(){const e={chartType:this.chartType+"Chart",dataTable:this.data,options:this.options};this.wrapper=new google.visualization.ChartWrapper(e),this.drawChart(),this.addValueClickListener()}addValueClickListener(){google.visualization.events.addListener(this.wrapper,"select",(e=>{const t=e.getSelection();this.onValueClick$.next(0==t.length?void 0:t[0])}))}drawChart(){this.wrapper.draw(this.chartContainer)}static ɵfac=function(e){return new(e||SystemChartService)(u.LFG(ks.$),u.LFG(u.R0b))};static ɵprov=u.Yz7({token:SystemChartService,factory:SystemChartService.ɵfac})}return SystemChartService})();var Gn=s(50727);let Pn=(()=>{class SystemChartDataRow{label;value;static ɵfac=function(e){return new(e||SystemChartDataRow)};static ɵcmp=u.Xpm({type:SystemChartDataRow,selectors:[["system-chart-data-row"]],inputs:{label:"label",value:"value"},decls:0,vars:0,template:function(e,t){},encapsulation:2})}return SystemChartDataRow})();const Hn=["chartContainer"];function zn(e,t){1&e&&(u.TgZ(0,"div",4)(1,"system-illustration-no-data"),u._UZ(2,"system-label",5),u.qZA()())}let Vn=(()=>{class SystemChartOneDimensional{chartService;language;hasData=!0;chartContainer;rowChildren;chartType;legend;colors;fontSize;is3D=!1;onValueClick=new u.vpe;data;subscriptions=new Gn.w0;constructor(e,t){this.chartService=e,this.language=t}get options(){return{legend:this.legend,colors:this.colors,fontSize:this.fontSize,is3D:this.is3D}}ngAfterViewInit(){this.loadChart()}ngAfterContentInit(){this.loadDataFromContentChildren()}ngOnDestroy(){this.subscriptions.unsubscribe()}loadDataFromContentChildren(){if(0==this.rowChildren.length)return this.hasData=!1;this.data={rows:[],cols:[{id:"label",label:"label",type:"string"},{id:"value",label:"value",type:"number"}]},this.colors&&"Bar"==this.chartType&&this.data.cols.push({id:"style",type:"string",role:"style"});let e=0;this.rowChildren.forEach((t=>{const s={c:[{v:this.language.getLabel(t.label)},{v:Number(t.value)}]};this.colors&&"Bar"==this.chartType&&(s.c.push({v:`color: ${this.colors[e]}`}),e=e>this.colors.length?0:e+1),this.data.rows.push(s)}))}loadChart(){this.chartService.loadChart(this.chartContainer.element.nativeElement,this.chartType,this.options,this.data),this.subscriptions.add(this.chartService.onValueClick$.subscribe({next:e=>this.chartService.zone.run((()=>this.onValueClick.emit(e)))}))}static ɵfac=function(e){return new(e||SystemChartOneDimensional)(u.Y36(Bn),u.Y36(m.d))};static ɵcmp=u.Xpm({type:SystemChartOneDimensional,selectors:[["system-chart-one-dimensional"]],contentQueries:function(e,t,s){if(1&e&&u.Suo(s,Pn,4),2&e){let e;u.iGM(e=u.CRH())&&(t.rowChildren=e)}},viewQuery:function(e,t){if(1&e&&u.Gf(Hn,5,u.s_b),2&e){let e;u.iGM(e=u.CRH())&&(t.chartContainer=e.first)}},inputs:{chartType:"chartType",legend:"legend",colors:"colors",fontSize:"fontSize",is3D:"is3D"},outputs:{onValueClick:"onValueClick"},features:[u._Bn([Bn])],decls:4,vars:3,consts:[[1,"slds-p-vertical--small","slds-p-horizontal--small","slds-height_full"],[1,"slds-size--1-of-1","slds-height_full"],["chartContainer",""],["class","slds-size--1-of-1 slds-height_full slds-align_absolute-center slds-theme--default",4,"ngIf"],[1,"slds-size--1-of-1","slds-height_full","slds-align_absolute-center","slds-theme--default"],["label","LBL_NO_DATA"]],template:function(e,t){1&e&&(u.TgZ(0,"div",0),u._UZ(1,"div",1,2),u.YNc(3,zn,3,0,"div",3),u.qZA()),2&e&&(u.xp6(1),u.ekj("slds-hide",!t.hasData),u.xp6(2),u.Q6J("ngIf",!t.hasData))},dependencies:[n.O5,ge.t,f._],encapsulation:2})}return SystemChartOneDimensional})();var $n=s(84548);let Kn=(()=>{class SystemChartDataColumn{rowChildren;value;static ɵfac=function(e){return new(e||SystemChartDataColumn)};static ɵcmp=u.Xpm({type:SystemChartDataColumn,selectors:[["system-chart-data-column"]],contentQueries:function(e,t,s){if(1&e&&u.Suo(s,Pn,4),2&e){let e;u.iGM(e=u.CRH())&&(t.rowChildren=e)}},inputs:{value:"value"},decls:0,vars:0,template:function(e,t){},encapsulation:2})}return SystemChartDataColumn})();function Xn(e,t){1&e&&(u.TgZ(0,"div",4)(1,"system-illustration-no-data"),u._UZ(2,"system-label",5),u.qZA()())}let Wn=(()=>{class SystemChartMultiDimensional extends Vn{chartType;isStacked=!1;cols=[];columnChildren;get options(){return{legend:this.legend,colors:this.colors,fontSize:this.fontSize,is3D:this.is3D,isStacked:this.isStacked}}loadDataFromContentChildren(){if(0==this.columnChildren.length)return this.hasData=!1;this.data={rows:[],cols:[{id:"AxisY",label:"AxisY",type:"string"}]},this.data.cols=this.data.cols.concat(this.cols.map((e=>({...e,type:"number"})))),this.columnChildren.forEach((e=>{const t={c:[{v:e.value}]};this.cols.forEach(((s,i)=>{const n=e.rowChildren.find((e=>e.label==s.label));t.c[i+1]=n?{v:Number(n.value)}:null})),this.data.rows.push(t)}))}static ɵfac=function(){let e;return function(t){return(e||(e=u.n5z(SystemChartMultiDimensional)))(t||SystemChartMultiDimensional)}}();static ɵcmp=u.Xpm({type:SystemChartMultiDimensional,selectors:[["system-chart-multi-dimensional"]],contentQueries:function(e,t,s){if(1&e&&u.Suo(s,Kn,4),2&e){let e;u.iGM(e=u.CRH())&&(t.columnChildren=e)}},inputs:{chartType:"chartType",isStacked:"isStacked",cols:"cols"},features:[u._Bn([Bn]),u.qOj],decls:4,vars:3,consts:[[1,"slds-p-vertical--small","slds-p-horizontal--small","slds-height_full"],[1,"slds-size--1-of-1","slds-height_full"],["chartContainer",""],["class","slds-size--1-of-1 slds-height_full slds-align_absolute-center slds-theme--default",4,"ngIf"],[1,"slds-size--1-of-1","slds-height_full","slds-align_absolute-center","slds-theme--default"],["label","LBL_NO_DATA"]],template:function(e,t){1&e&&(u.TgZ(0,"div",0),u._UZ(1,"div",1,2),u.YNc(3,Xn,3,0,"div",3),u.qZA()),2&e&&(u.xp6(1),u.ekj("slds-hide",!t.hasData),u.xp6(2),u.Q6J("ngIf",!t.hasData))},dependencies:[n.O5,ge.t,f._],encapsulation:2})}return SystemChartMultiDimensional})(),el=(()=>{class SystemComponents{static ɵfac=function(e){return new(e||SystemComponents)};static ɵmod=u.oAB({type:SystemComponents});static ɵinj=u.cJS({imports:[o.o,n.ez,l.u5,i._t]})}return SystemComponents})();("undefined"==typeof ngJitMode||ngJitMode)&&u.kYT(el,{declarations:[Xi,Ci,Ai,Di,Ri,Ui,c.L,c.s,A,L.g,I.O,M,p.J,J.x,N.I,q,O.Q,E.r,U.U,Y.L,D.m,Q.v,R.z,j.m,B.K,G.E,H,z.$,V.G,$.a,K.G,te,X,se.T,oe,ae.Y,de.t,re.l,ce.f,ue.T,On,me.s,ge.t,he.C,pe.H,fe.k,ve,ze,ye.Z,Ze.n,xe.r,we.u,Te.Q,Nn.K,Ce.C,ke.y,Me,Oe.z,Je.e,Ne.y,Fe.a,qe.$,Ee.a,Ye.l,De.s,Ue.i,Qe.Z,Re.A,je.p,Be.z,Ge.H,Pe.C,Ve.H,$e.x,Ke.N,dn.V,Xe,f._,mt.h,gt.M,ht.M,pt.A,ft.e,_t,b.j,v.x,y.p,x.y,Ct,vt.O,yt.J,At,a.N,d.m,Lt.H,Mt,St.s,Mn,Ye.l,en,Wi.s,ln.H,tn.Y,nn.w,sn.U,oi,Jt.s,qt,Et.J,os,as.z,Ms,Zs,qs,Es.P,Ys.R,Ds.E,Us.s,Qs.E,bt.W,Bs,Gs.B,Hs.v,Ps.x,zs,Vs,$s.t,Ks.S,Ws.O,Xs.u,ii,As.r,mi,gi.h,hi.I,fn.w,vn,on.l,an.R,yn.E,wn.f,yn.E,xn,_e.w,Zn.y,Tn.M,Cn.j,ct,ut,kn.W,An.w,Ln.f,In.z,rn.K,pn,pi,Fn.m,qn.e,r.u,En.l,Yn.F,Dn.n,Qn.j,Un.I,Rn.g,jn.b,Vn,Pn,Kn,Wn,$n.X],imports:[o.o,n.ez,l.u5,i._t],exports:[c.L,c.s,r.u,A,L.g,I.O,M,p.J,J.x,N.I,q,O.Q,U.U,Y.L,D.m,Q.v,R.z,B.K,G.E,z.$,$.a,K.G,te,X,se.T,ln.H,tn.Y,nn.w,Wi.s,de.t,re.l,ce.f,ue.T,me.s,ge.t,he.C,pe.H,fe.k,ye.Z,Ze.n,xe.r,we.u,Te.Q,Ce.C,ke.y,Me,Oe.z,Je.e,Ne.y,Fe.a,qe.$,Ee.a,Ye.l,De.s,Ue.i,Qe.Z,Re.A,je.p,Be.z,Ge.H,Pe.C,Ve.H,$e.x,Ke.N,dn.V,Xe,f._,mt.h,gt.M,ht.M,pt.A,ft.e,b.j,v.x,y.p,x.y,Ct,vt.O,yt.J,At,Lt.H,Jt.s,qt,Et.J,os,as.z,qs,Es.P,Ys.R,bt.W,Bs,Gs.B,Hs.v,Ps.x,zs,$s.t,Ks.S,Ws.O,Xs.u,As.r,mi,gi.h,hi.I,Ye.l,en,Wi.s,ln.H,Qs.E,on.l,Qs.E,fn.w,vn,an.R,yn.E,wn.f,yn.E,xn,Zn.y,Tn.M,ke.y,Ge.H,kn.W,An.w,Ln.f,In.z,rn.K,pn,Ct,pi,Mn,Nn.K,ct,qn.e,E.r,Ds.E,Us.s,ze,V.G,En.l,Yn.F,Dn.n,Qn.j,Un.I,Rn.g,Us.s,St.s,_e.w,jn.b,Vn,Pn,Kn,Wn,$n.X]}),u.B6R(bt.W,[n.O5,n.PC,f._],[]),u.B6R(fn.w,[vn],[])},46700:(e,t,s)=>{var i={"./af":27088,"./af.js":27088,"./ar":17038,"./ar-dz":52502,"./ar-dz.js":52502,"./ar-kw":30128,"./ar-kw.js":30128,"./ar-ly":84519,"./ar-ly.js":84519,"./ar-ma":65443,"./ar-ma.js":65443,"./ar-sa":17642,"./ar-sa.js":17642,"./ar-tn":68592,"./ar-tn.js":68592,"./ar.js":17038,"./az":51213,"./az.js":51213,"./be":69191,"./be.js":69191,"./bg":90322,"./bg.js":90322,"./bm":28042,"./bm.js":28042,"./bn":59620,"./bn-bd":65903,"./bn-bd.js":65903,"./bn.js":59620,"./bo":69645,"./bo.js":69645,"./br":45020,"./br.js":45020,"./bs":64792,"./bs.js":64792,"./ca":47980,"./ca.js":47980,"./cs":47322,"./cs.js":47322,"./cv":90365,"./cv.js":90365,"./cy":32092,"./cy.js":32092,"./da":77387,"./da.js":77387,"./de":54307,"./de-at":29459,"./de-at.js":29459,"./de-ch":73694,"./de-ch.js":73694,"./de.js":54307,"./dv":39659,"./dv.js":39659,"./el":3460,"./el.js":3460,"./en-au":94369,"./en-au.js":94369,"./en-ca":60530,"./en-ca.js":60530,"./en-gb":9998,"./en-gb.js":9998,"./en-ie":13391,"./en-ie.js":13391,"./en-il":75414,"./en-il.js":75414,"./en-in":19615,"./en-in.js":19615,"./en-nz":21248,"./en-nz.js":21248,"./en-sg":13767,"./en-sg.js":13767,"./eo":84530,"./eo.js":84530,"./es":86866,"./es-do":18944,"./es-do.js":18944,"./es-mx":29116,"./es-mx.js":29116,"./es-us":83609,"./es-us.js":83609,"./es.js":86866,"./et":96725,"./et.js":96725,"./eu":67931,"./eu.js":67931,"./fa":56417,"./fa.js":56417,"./fi":20944,"./fi.js":20944,"./fil":61766,"./fil.js":61766,"./fo":95867,"./fo.js":95867,"./fr":1636,"./fr-ca":16848,"./fr-ca.js":16848,"./fr-ch":77773,"./fr-ch.js":77773,"./fr.js":1636,"./fy":14940,"./fy.js":14940,"./ga":91402,"./ga.js":91402,"./gd":46924,"./gd.js":46924,"./gl":16398,"./gl.js":16398,"./gom-deva":72457,"./gom-deva.js":72457,"./gom-latn":52545,"./gom-latn.js":52545,"./gu":42641,"./gu.js":42641,"./he":7536,"./he.js":7536,"./hi":96335,"./hi.js":96335,"./hr":7458,"./hr.js":7458,"./hu":56540,"./hu.js":56540,"./hy-am":65283,"./hy-am.js":65283,"./id":98780,"./id.js":98780,"./is":14205,"./is.js":14205,"./it":34211,"./it-ch":29985,"./it-ch.js":29985,"./it.js":34211,"./ja":31003,"./ja.js":31003,"./jv":60420,"./jv.js":60420,"./ka":40851,"./ka.js":40851,"./kk":16074,"./kk.js":16074,"./km":53343,"./km.js":53343,"./kn":44799,"./kn.js":44799,"./ko":13549,"./ko.js":13549,"./ku":91037,"./ku.js":91037,"./ky":93125,"./ky.js":93125,"./lb":69586,"./lb.js":69586,"./lo":32349,"./lo.js":32349,"./lt":92400,"./lt.js":92400,"./lv":39991,"./lv.js":39991,"./me":28477,"./me.js":28477,"./mi":55118,"./mi.js":55118,"./mk":15943,"./mk.js":15943,"./ml":13849,"./ml.js":13849,"./mn":31977,"./mn.js":31977,"./mr":66184,"./mr.js":66184,"./ms":70485,"./ms-my":64524,"./ms-my.js":64524,"./ms.js":70485,"./mt":36681,"./mt.js":36681,"./my":52024,"./my.js":52024,"./nb":42688,"./nb.js":42688,"./ne":68914,"./ne.js":68914,"./nl":11758,"./nl-be":52272,"./nl-be.js":52272,"./nl.js":11758,"./nn":41510,"./nn.js":41510,"./oc-lnc":52797,"./oc-lnc.js":52797,"./pa-in":37944,"./pa-in.js":37944,"./pl":1605,"./pl.js":1605,"./pt":54225,"./pt-br":73840,"./pt-br.js":73840,"./pt.js":54225,"./ro":45128,"./ro.js":45128,"./ru":35127,"./ru.js":35127,"./sd":32525,"./sd.js":32525,"./se":59893,"./se.js":59893,"./si":33123,"./si.js":33123,"./sk":59635,"./sk.js":59635,"./sl":78106,"./sl.js":78106,"./sq":88799,"./sq.js":88799,"./sr":97949,"./sr-cyrl":52872,"./sr-cyrl.js":52872,"./sr.js":97949,"./ss":86167,"./ss.js":86167,"./sv":39713,"./sv.js":39713,"./sw":41982,"./sw.js":41982,"./ta":22732,"./ta.js":22732,"./te":43636,"./te.js":43636,"./tet":2115,"./tet.js":2115,"./tg":69801,"./tg.js":69801,"./th":2868,"./th.js":2868,"./tk":31310,"./tk.js":31310,"./tl-ph":22360,"./tl-ph.js":22360,"./tlh":66645,"./tlh.js":66645,"./tr":98374,"./tr.js":98374,"./tzl":256,"./tzl.js":256,"./tzm":61595,"./tzm-latn":61631,"./tzm-latn.js":61631,"./tzm.js":61595,"./ug-cn":6050,"./ug-cn.js":6050,"./uk":65610,"./uk.js":65610,"./ur":86077,"./ur.js":86077,"./uz":22862,"./uz-latn":12207,"./uz-latn.js":12207,"./uz.js":22862,"./vi":48093,"./vi.js":48093,"./x-pseudo":25590,"./x-pseudo.js":25590,"./yo":9058,"./yo.js":9058,"./zh-cn":77908,"./zh-cn.js":77908,"./zh-hk":8867,"./zh-hk.js":8867,"./zh-mo":31133,"./zh-mo.js":31133,"./zh-tw":83291,"./zh-tw.js":83291};function n(e){var t=l(e);return s(t)}function l(e){if(!s.o(i,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return i[e]}n.keys=function(){return Object.keys(i)},n.resolve=l,e.exports=n,n.id=46700},19456:(e,t,s)=>{var i={"./admincomponents/admincomponents.module.ts":[34093,"default-src_workbench_workbench_module_ts","src_admincomponents_admincomponents_module_ts"],"./globalcomponents/globalcomponents.ts":[34826],"./include/groupware/groupware.ts":[12149,"src_include_groupware_groupware_ts"],"./include/sendinblue/sendinbluemodule.ts":[71887,"src_include_sendinblue_sendinbluemodule_ts"],"./include/spiceattachments/spiceattachments.ts":[3719,"default-src_include_spiceattachments_spiceattachments_ts"],"./include/spicecharts/spicecharts.ts":[24972,"src_include_spicecharts_spicecharts_ts"],"./include/spicefavorites/spicefavorites.ts":[28009,"src_include_spicefavorites_spicefavorites_ts"],"./include/spiceimporter/spiceimporter.ts":[4877,"src_include_spiceimporter_spiceimporter_ts"],"./include/spiceinstaller/spiceinstallermodule.ts":[82956],"./include/spicemap/spicemap.ts":[33106,"src_include_spicemap_spicemap_ts"],"./include/spicemath/spicemath.ts":[47109,"src_include_spicemath_spicemath_ts"],"./include/spicemerge/spicemerge.ts":[38494,"src_include_spicemerge_spicemerge_ts"],"./include/spicenotes/spicenotes.ts":[98467,"src_include_spicenotes_spicenotes_ts"],"./include/spicepagebuilder/modulespicepagebuilder.ts":[99524,"src_include_spicepagebuilder_modulespicepagebuilder_ts"],"./include/spicepath/spicepath.ts":[23264,"src_include_spicepath_spicepath_ts"],"./include/spicetexts/spicetexts.ts":[5388,"src_include_spicetexts_spicetexts_ts"],"./include/spicetimeline/spicetimeline.ts":[97135,"src_include_spicetimeline_spicetimeline_ts"],"./include/spicetimestream/spicetimestream.ts":[7846,"src_include_spicetimestream_spicetimestream_ts"],"./include/spiceurls/spiceurls.ts":[86190,"src_include_spiceurls_spiceurls_ts"],"./include/totpauthentication/moduletotpauthentication.ts":[38127,"src_include_totpauthentication_moduletotpauthentication_ts"],"./modules/accounts/moduleaccounts.ts":[66035,"default-node_modules_underscore_modules_index-all_js","src_modules_accounts_moduleaccounts_ts"],"./modules/acl/moduleacl.ts":[62116,"src_modules_acl_moduleacl_ts"],"./modules/activities/moduleactivities.ts":[88772,"default-src_modules_activities_moduleactivities_ts"],"./modules/agreements/moduleagreements.ts":[92273,"src_modules_agreements_moduleagreements_ts"],"./modules/calendar/modulecalendar.ts":[22114,"src_modules_calendar_modulecalendar_ts"],"./modules/contacts/modulecontacts.ts":[1435,"src_modules_contacts_modulecontacts_ts"],"./modules/currencies/modulecurrencies.ts":[92022,"src_modules_currencies_modulecurrencies_ts"],"./modules/dashboard/moduledashboard.ts":[24023,"src_modules_dashboard_moduledashboard_ts"],"./modules/documents/moduledocuments.ts":[46340,"default-src_modules_outputtemplates_components_objectactionoutputbeanmodal_ts","src_modules_documents_moduledocuments_ts"],"./modules/emails/moduleemails.ts":[11268,"default-src_include_spiceattachments_spiceattachments_ts","src_modules_emails_moduleemails_ts"],"./modules/folders/modulefolders.ts":[3061,"src_modules_folders_modulefolders_ts"],"./modules/googleapi/modulegoogleapi.ts":[58725,"src_modules_googleapi_modulegoogleapi_ts"],"./modules/holidaycalendars/moduleholidaycalendars.ts":[48395,"src_modules_holidaycalendars_moduleholidaycalendars_ts"],"./modules/home/modulehome.ts":[8373,"default-src_modules_activities_moduleactivities_ts","src_modules_home_modulehome_ts"],"./modules/leads/moduleleads.ts":[49443,"src_modules_leads_moduleleads_ts"],"./modules/mailboxes/modulemailboxes.ts":[89028,"src_modules_mailboxes_modulemailboxes_ts"],"./modules/mediafiles/modulemediafiles.ts":[91546,"src_modules_mediafiles_modulemediafiles_ts"],"./modules/opportunities/moduleopportunities.ts":[42257,"src_modules_opportunities_moduleopportunities_ts"],"./modules/orgunits/moduleorgunits.ts":[46814,"src_modules_orgunits_moduleorgunits_ts"],"./modules/outputtemplates/moduleoutputtemplates.ts":[89637,"default-src_modules_outputtemplates_components_objectactionoutputbeanmodal_ts","src_modules_outputtemplates_moduleoutputtemplates_ts"],"./modules/prospectlists/moduleprospectlists.ts":[73768,"default-node_modules_underscore_modules_index-all_js","src_modules_prospectlists_moduleprospectlists_ts"],"./modules/reports/modulereports.ts":[45032,"default-src_modules_reports_modulereports_ts"],"./modules/reportsdesigner/modulereportsdesigner.ts":[53158,"default-src_modules_reports_modulereports_ts","src_modules_reportsdesigner_modulereportsdesigner_ts"],"./modules/scrum/modulescrum.ts":[28836,"src_modules_scrum_modulescrum_ts"],"./modules/spiceimports/modulespiceimports.ts":[69678,"src_modules_spiceimports_modulespiceimports_ts"],"./modules/systemcalendars/modulesystemcalendars.ts":[39109,"src_modules_systemcalendars_modulesystemcalendars_ts"],"./modules/users/moduleusers.ts":[36426,"src_modules_users_moduleusers_ts"],"./objectcomponents/objectcomponents.ts":[19784],"./objectfields/objectfields.ts":[53190],"./portalcomponents/portalcomponents.ts":[77862,"src_portalcomponents_portalcomponents_ts"],"./systemcomponents/systemcomponents.ts":[57239],"./workbench/workbench.module.ts":[27388,"default-src_workbench_workbench_module_ts"]};function n(e){if(!s.o(i,e))return Promise.resolve().then((()=>{var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=i[e],n=t[0];return Promise.all(t.slice(1).map(s.e)).then((()=>s(n)))}n.keys=()=>Object.keys(i),n.id=19456,e.exports=n}},e=>{e.O(0,["vendor"],(()=>{return t=93101,e(e.s=t);var t}));e.O()}]);