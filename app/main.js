/*!
 * 
 *                     SpiceCRM
 *
 *                     release: 2024.01.001
 *
 *                     date: 2024-06-07 18:47:00
 *
 *                     build: 2024.01.001.1717778820753
 *
 */
(self.webpackChunkcore=self.webpackChunkcore||[]).push([["main"],{14699:(e,t,s)=>{"use strict";s.d(t,{c:()=>i});const i={production:!0,buildNumber:"2024.01.001.1717778820753",copyright:"© 2015 -  2024 SpiceCRM FlexCo All rights reserved."}},71341:(e,t,s)=>{"use strict";s.d(t,{h:()=>C});var i=s(60177),n=s(33325),l=s(1510),o=s(98427),a=s(81086),r=s(80256),d=s(86532),c=s(54546),u=s(28933),m=s(69139),h=s(20883),g=s(37263),p=s(30012),f=s(32130),b=s(87395),y=s(22465),v=s(90154),_=s(62335),k=s(54438),R=s(50531),I=s(48849);let x=(()=>{class SystemCalculatorTriggerDirective{set setCalculator(e){this.formattedNumber=!1!==e}constructor(e,t,s){this.modal=e,this.userpreferences=t,this.elementRef=s,this.formattedNumber=!1}openCalculator(){this.elementRef.nativeElement.previousSibling&&this.elementRef.nativeElement.previousSibling.tagName in{INPUT:1,TEXTAREA:1}&&this.modal.openModal("SpiceCalculatorModal").subscribe((e=>{e.instance.value=this.elementRef.nativeElement.previousSibling.value,e.instance.trigger=!0,e.instance.value$.subscribe((e=>{isNaN(e)||(this.elementRef.nativeElement.previousSibling.value=this.formattedNumber?this.userpreferences.formatMoney(e,2):e,this.elementRef.nativeElement.previousSibling.dispatchEvent(new Event("input")))}))}))}static#e=this.ɵfac=function(e){return new(e||SystemCalculatorTriggerDirective)(k.rXU(R.y),k.rXU(I.S),k.rXU(k.aKT))};static#t=this.ɵdir=k.FsC({type:SystemCalculatorTriggerDirective,selectors:[["","system-calculator-trigger",""]],hostBindings:function(e,t){1&e&&k.bIt("click",(function(){return t.openCalculator()}))},inputs:{setCalculator:[k.Mj6.None,"system-calculator-trigger-formatted","setCalculator"]}})}return SystemCalculatorTriggerDirective})(),j=(()=>{class SystemStopClickPropagationDirective{onClick(e){e.stopPropagation()}static#e=this.ɵfac=function(e){return new(e||SystemStopClickPropagationDirective)};static#t=this.ɵdir=k.FsC({type:SystemStopClickPropagationDirective,selectors:[["","system-stop-click-propagation",""]],hostBindings:function(e,t){1&e&&k.bIt("click",(function(e){return t.onClick(e)}))}})}return SystemStopClickPropagationDirective})();var G=s(2061);let C=(()=>{class DirectivesModule{static#e=this.ɵfac=function(e){return new(e||DirectivesModule)};static#t=this.ɵmod=k.$C({type:DirectivesModule});static#s=this.ɵinj=k.G2t({imports:[i.MD]})}return DirectivesModule})();("undefined"==typeof ngJitMode||ngJitMode)&&k.Obh(C,{declarations:[n.j,l.m,o.v,a.a,r.q,d.C,c.C,u.b,m.p,h.D,g.x,p.H,f.M,b.T,v.m,y.L,_.p,x,j,G._],imports:[i.MD],exports:[n.j,l.m,o.v,a.a,r.q,d.C,c.C,u.b,m.p,h.D,g.x,p.H,f.M,b.T,v.m,y.L,_.p,x,j,G._]})},81086:(e,t,s)=>{"use strict";s.d(t,{a:()=>n});var i=s(54438);let n=(()=>{class SystemAutofocusDirective{constructor(e){this.elementRef=e}ngAfterViewInit(){setTimeout((()=>{this.elementRef.nativeElement.tabIndex||(this.elementRef.nativeElement.tabIndex="-1"),this.elementRef.nativeElement.focus()}))}static#e=this.ɵfac=function(e){return new(e||SystemAutofocusDirective)(i.rXU(i.aKT))};static#t=this.ɵdir=i.FsC({type:SystemAutofocusDirective,selectors:[["","system-autofocus",""]]})}return SystemAutofocusDirective})()},80256:(e,t,s)=>{"use strict";s.d(t,{q:()=>o});var i=s(54438),n=s(4921),l=s(71692);let o=(()=>{class SystemDropdownTriggerDirective{constructor(e,t,s,i,n){this.renderer=e,this.elementRef=t,this.footer=s,this.layout=i,this.cdRef=n,this.dropDownOpen=!1,this.hasTriggerButton=!1,this.stickyOnMobile=!1,this.dropdowntriggerdisabled=!1}get triggerElement(){return this.hasTriggerButton?this.triggerElementButton.nativeElement:this.elementRef.nativeElement}ngOnInit(){this.setDropdownElement()}ngOnDestroy(){this.removeScrollListener(),this.restoreDropdownFromFooter(),this.clickListener&&this.clickListener(),this.triggerClickListener&&this.triggerClickListener()}removeScrollListener(){window.removeEventListener("scroll",this.scrollHandlerFn,{capture:!0})}toggleDropdown(e){if(this.dropdownElement||this.setDropdownElement(),this.dropdowntriggerdisabled||!this.dropdownElement)return!1;this.dropDownOpen=!this.dropDownOpen,this.dropDownOpen?(this.moveDropdownToFooter(),this.setDropdownElementPosition(),this.scrollHandlerFn=()=>requestAnimationFrame((()=>this.setDropdownElementPosition())),this.clickListener=this.renderer.listen("document","click",(e=>this.onClick(e))),window.addEventListener("scroll",this.scrollHandlerFn,{capture:!0})):(this.removeScrollListener(),this.restoreDropdownFromFooter(),this.clickListener())}hostClick(e){this.hasTriggerButton||this.toggleDropdown(e)}moveDropdownToFooter(){this.renderer.removeChild(this.elementRef.nativeElement,this.dropdownElement),this.renderer.appendChild(this.footer.footercontainer.element.nativeElement,this.dropdownElement)}restoreDropdownFromFooter(){this.dropdownElement&&this.footer.footercontainer.element.nativeElement.contains(this.dropdownElement)&&(this.renderer.removeChild(this.footer.footercontainer.element.nativeElement,this.dropdownElement),this.renderer.appendChild(this.elementRef.nativeElement,this.dropdownElement))}setDropdownElement(){if(!this.dropdownElement)for(let e of this.elementRef.nativeElement.children)if(e.classList.contains("slds-dropdown")){this.dropdownElement=e;break}}setDropdownElementPosition(){if(this.stickyOnMobile&&"small"==this.layout.screenwidth)return void this.renderer.addClass(this.dropdownElement,"spice-dropdown-mobile");this.renderer.removeClass(this.dropdownElement,"spice-dropdown-mobile");let e=this.triggerElement.getBoundingClientRect();this.previousTriggerRect&&JSON.stringify(this.previousTriggerRect)==JSON.stringify(e)||(this.previousTriggerRect=e,this.renderer.setStyle(this.dropdownElement,"transform","translateX(0)"),this.renderer.setStyle(this.dropdownElement,"z-index","999999"),this.renderer.addClass(this.dropdownElement,"slds-scrollable"),e.bottom>.7*window.innerHeight&&e.bottom+this.dropdownElement.clientHeight>window.innerHeight?(this.renderer.setStyle(this.dropdownElement,"bottom",window.innerHeight-e.top+"px"),this.renderer.setStyle(this.dropdownElement,"top","auto"),this.renderer.setStyle(this.dropdownElement,"max-height",e.top-10+"px")):(this.renderer.setStyle(this.dropdownElement,"top",e.bottom+"px"),this.renderer.setStyle(this.dropdownElement,"bottom","auto"),e.bottom<.7*window.innerHeight&&this.renderer.setStyle(this.dropdownElement,"max-height",window.innerHeight-e.bottom-10+"px")),e.right-this.dropdownElement.clientWidth>10||e.right>.3*window.innerWidth?(this.renderer.setStyle(this.dropdownElement,"right",window.innerWidth-e.right+"px"),this.renderer.setStyle(this.dropdownElement,"left","auto"),"INPUT"==this.triggerElement.nodeName&&this.renderer.setStyle(this.dropdownElement,"max-width",e.width+"px")):(this.renderer.setStyle(this.dropdownElement,"left",e.left+"px"),this.renderer.setStyle(this.dropdownElement,"right","auto"),e.right<.7*window.innerWidth&&this.renderer.setStyle(this.dropdownElement,"max-width",window.innerWidth-e.right-10+"px")),this.cdRef.markForCheck())}onClick(e){this.elementRef.nativeElement.contains(e.target)||(this.dropDownOpen=!1,this.removeScrollListener(),this.restoreDropdownFromFooter(),this.clickListener(),this.cdRef.markForCheck())}static#e=this.ɵfac=function(e){return new(e||SystemDropdownTriggerDirective)(i.rXU(i.sFG),i.rXU(i.aKT),i.rXU(n.q),i.rXU(l.Z),i.rXU(i.gRc))};static#t=this.ɵdir=i.FsC({type:SystemDropdownTriggerDirective,selectors:[["","system-dropdown-trigger",""]],hostVars:2,hostBindings:function(e,t){1&e&&i.bIt("click",(function(e){return t.hostClick(e)})),2&e&&i.AVh("slds-is-open",t.dropDownOpen)},inputs:{stickyOnMobile:"stickyOnMobile",dropdowntriggerdisabled:[i.Mj6.None,"system-dropdown-trigger","dropdowntriggerdisabled"]}})}return SystemDropdownTriggerDirective})()},86532:(e,t,s)=>{"use strict";s.d(t,{C:()=>l});var i=s(54438),n=s(80256);let l=(()=>{class SystemDropdownTriggerButtonDirective{constructor(e,t){this.elementRef=e,this.trigger=t}ngOnInit(){this.trigger&&(this.trigger.hasTriggerButton=!0,this.trigger.triggerElementButton=this.elementRef)}onClick(e){this.trigger&&this.trigger.toggleDropdown(e)}static#e=this.ɵfac=function(e){return new(e||SystemDropdownTriggerButtonDirective)(i.rXU(i.aKT),i.rXU(n.q,9))};static#t=this.ɵdir=i.FsC({type:SystemDropdownTriggerButtonDirective,selectors:[["","system-dropdown-trigger-button",""]],hostBindings:function(e,t){1&e&&i.bIt("click",(function(e){return t.onClick(e)}))}})}return SystemDropdownTriggerButtonDirective})()},54546:(e,t,s)=>{"use strict";s.d(t,{C:()=>n});var i=s(54438);let n=(()=>{class SystemDropdownTriggerSimpleDirective{constructor(e,t,s){this.renderer=e,this.cdRef=t,this.elementRef=s,this.dropdowntriggerdisabled=!1,this.dropDownOpen=!1}openDropdown(e){this.dropdowntriggerdisabled?(this.dropDownOpen=!1,this.clickListener&&this.clickListener(),this.cdRef.detectChanges()):(this.dropDownOpen=!this.dropDownOpen,this.dropDownOpen?(e.preventDefault(),this.clickListener=this.renderer.listen("document","click",(e=>this.onClick(e)))):this.clickListener())}onClick(e){this.elementRef.nativeElement.contains(e.target)||(this.dropDownOpen=!1,this.cdRef.detectChanges(),this.clickListener())}ngOnDestroy(){this.clickListener&&this.clickListener()}static#e=this.ɵfac=function(e){return new(e||SystemDropdownTriggerSimpleDirective)(i.rXU(i.sFG),i.rXU(i.gRc),i.rXU(i.aKT))};static#t=this.ɵdir=i.FsC({type:SystemDropdownTriggerSimpleDirective,selectors:[["","system-dropdown-trigger-simple",""]],hostVars:2,hostBindings:function(e,t){1&e&&i.bIt("click",(function(e){return t.openDropdown(e)})),2&e&&i.AVh("slds-is-open",t.dropDownOpen)},inputs:{dropdowntriggerdisabled:[i.Mj6.None,"system-dropdown-trigger-simple","dropdowntriggerdisabled"]}})}return SystemDropdownTriggerSimpleDirective})()},30012:(e,t,s)=>{"use strict";s.d(t,{H:()=>o});var i=s(54438),n=s(69904),l=s(41081);let o=(()=>{class SystemDropFile{constructor(e,t,s,n){this.renderer=e,this.elementRef=t,this.language=s,this.toast=n,this.filesDrop=new i.bkB,this.dragDepth=0,this.defineOverlayElement(),this.listenWindowEvents()}ngOnChanges(){this.renderer.setProperty(this.overlayElement,"textContent",this.dropMessage)}ngOnDestroy(){this.removeWindowEventsListeners()}set disabled(e){e?this.removeWindowEventsListeners():this.listenWindowEvents()}removeWindowEventsListeners(){this.dragStartListener&&(this.dragStartListener(),this.dragEnterListener(),this.dragOverListener(),this.dragLeaveListener(),this.dragEndListener(),this.dragDropListener(),this.dragGlobalDropListener())}defineOverlayElement(){this.overlayElement=this.renderer.createElement("div"),this.renderer.setStyle(this.overlayElement,"height","100%"),this.renderer.setStyle(this.overlayElement,"width","100%"),this.renderer.setStyle(this.overlayElement,"top","0"),this.renderer.setStyle(this.overlayElement,"left","0"),this.renderer.setStyle(this.overlayElement,"position","absolute"),this.renderer.setStyle(this.overlayElement,"background","rgba(135,135,135,0.8)"),this.renderer.setStyle(this.overlayElement,"color","#fff"),this.renderer.setStyle(this.overlayElement,"border","dashed 2px #fff"),this.renderer.setProperty(this.overlayElement,"textContent",this.language.getLabel("LBL_DROP_FILES")),this.renderer.addClass(this.overlayElement,"slds-align--absolute-center"),this.renderer.addClass(this.elementRef.nativeElement,"slds-is-relative")}listenWindowEvents(){this.dragStartListener=this.renderer.listen("window","dragstart",(()=>{this.dragDepth=-10})),this.dragEnterListener=this.renderer.listen("window","dragenter",(e=>{this.dragDepth++,1==this.dragDepth&&e.dataTransfer.types.find((e=>"Files"==e))&&this.renderer.appendChild(this.elementRef.nativeElement,this.overlayElement)})),this.dragOverListener=this.renderer.listen(this.overlayElement,"dragover",(e=>{e.preventDefault(),e.stopPropagation(),e.dataTransfer.dropEffect="copy"})),this.dragLeaveListener=this.renderer.listen("window","dragleave",(()=>{this.dragDepth--,0==this.dragDepth&&this.renderer.removeChild(this.elementRef.nativeElement,this.overlayElement)})),this.dragEndListener=this.renderer.listen("window","dragend",(()=>{this.dragDepth=0,this.renderer.removeChild(this.elementRef.nativeElement,this.overlayElement)})),this.dragDropListener=this.renderer.listen(this.overlayElement,"drop",(e=>{this.dragDepth=0,e.dataTransfer.files.length>0&&this.filesDrop.emit(e.dataTransfer.files),this.renderer.removeChild(this.elementRef.nativeElement,this.overlayElement)})),this.dragGlobalDropListener=this.renderer.listen("window","drop",(e=>{this.dragDepth=0,this.renderer.removeChild(this.elementRef.nativeElement,this.overlayElement)}))}hasOneItemsFile(e){for(let t of e)if("file"==t.kind)return!0;return!1}static#e=this.ɵfac=function(e){return new(e||SystemDropFile)(i.rXU(i.sFG),i.rXU(i.aKT),i.rXU(n.B),i.rXU(l.o))};static#t=this.ɵdir=i.FsC({type:SystemDropFile,selectors:[["","system-drop-file",""]],inputs:{dropMessage:"dropMessage",disabled:"disabled"},outputs:{filesDrop:"system-drop-file"},features:[i.OA$]})}return SystemDropFile})()},2061:(e,t,s)=>{"use strict";s.d(t,{_:()=>o});var i=s(54438),n=s(69904),l=s(41081);let o=(()=>{class SystemDropUrl{constructor(e,t,s,n){this.renderer=e,this.elementRef=t,this.language=s,this.toast=n,this.urlsDrop=new i.bkB,this.dragDepth=0,this.defineOverlayElement(),this.listenWindowEvents()}ngOnChanges(){this.renderer.setProperty(this.overlayElement,"textContent",this.dropMessage)}ngOnDestroy(){this.dragStartListener(),this.dragEnterListener(),this.dragOverListener(),this.dragLeaveListener(),this.dragEndListener(),this.dragDropListener(),this.dragGlobalDropListener()}defineOverlayElement(){this.overlayElement=this.renderer.createElement("div"),this.renderer.setStyle(this.overlayElement,"height","100%"),this.renderer.setStyle(this.overlayElement,"width","100%"),this.renderer.setStyle(this.overlayElement,"top","0"),this.renderer.setStyle(this.overlayElement,"left","0"),this.renderer.setStyle(this.overlayElement,"position","absolute"),this.renderer.setStyle(this.overlayElement,"background","rgba(135,135,135,0.8)"),this.renderer.setStyle(this.overlayElement,"color","#fff"),this.renderer.setStyle(this.overlayElement,"border","dashed 2px #fff"),this.renderer.setProperty(this.overlayElement,"textContent",this.language.getLabel("LBL_DROP_URLS")),this.renderer.addClass(this.overlayElement,"slds-align--absolute-center"),this.renderer.addClass(this.elementRef.nativeElement,"slds-is-relative")}listenWindowEvents(){this.dragStartListener=this.renderer.listen("window","dragstart",(()=>{this.dragDepth=-10})),this.dragEnterListener=this.renderer.listen("window","dragenter",(e=>{this.dragDepth++,1==this.dragDepth&&-1==e.dataTransfer.types.indexOf("Files")&&this.renderer.appendChild(this.elementRef.nativeElement,this.overlayElement)})),this.dragOverListener=this.renderer.listen(this.overlayElement,"dragover",(e=>{e.preventDefault(),e.stopPropagation(),e.dataTransfer.dropEffect="copy"})),this.dragLeaveListener=this.renderer.listen("window","dragleave",(()=>{this.dragDepth--,0==this.dragDepth&&this.renderer.removeChild(this.elementRef.nativeElement,this.overlayElement)})),this.dragEndListener=this.renderer.listen("window","dragend",(()=>{this.dragDepth=0,this.renderer.removeChild(this.elementRef.nativeElement,this.overlayElement)})),this.dragDropListener=this.renderer.listen(this.overlayElement,"drop",(e=>{this.dragDepth=0,e.dataTransfer.items.length>0?this.urlsDrop.emit(e.dataTransfer):this.toast.sendToast("LBL_ERROR","error"),this.renderer.removeChild(this.elementRef.nativeElement,this.overlayElement)})),this.dragGlobalDropListener=this.renderer.listen("window","drop",(e=>{this.dragDepth=0,this.renderer.removeChild(this.elementRef.nativeElement,this.overlayElement)}))}hasOneItemsUrls(e){for(let t of e)if("string"==t.kind)return!0;return!1}static#e=this.ɵfac=function(e){return new(e||SystemDropUrl)(i.rXU(i.sFG),i.rXU(i.aKT),i.rXU(n.B),i.rXU(l.o))};static#t=this.ɵdir=i.FsC({type:SystemDropUrl,selectors:[["","system-drop-url",""]],inputs:{dropMessage:"dropMessage"},outputs:{urlsDrop:"system-drop-url"},features:[i.OA$]})}return SystemDropUrl})()},33325:(e,t,s)=>{"use strict";s.d(t,{j:()=>u});var i=s(54438),n=s(35911),l=s(83935),o=s(4921),a=s(50531),r=s(66031),d=s(41731),c=s(57363);let u=(()=>{class SystemModelPopOverDirective{constructor(e,t,s,n,l,o,a,r,d,c){this.metadata=e,this.footer=t,this.modal=s,this.model=n,this.navigationtab=l,this.popovermodel=o,this.elementRef=a,this.view=r,this.router=d,this.injector=c,this.enablelink=!0,this.modelPopOver=!0,this.clicked=new i.bkB,this.popoverCmp=null,this.showPopoverTimeout={},this.popoverModelInitialized=!1}onMouseOver(){!1!==this.modelPopOver&&(this.showPopoverTimeout=window.setTimeout((()=>this.renderPopover()),1e3))}onMouseOut(){this.showPopoverTimeout&&window.clearTimeout(this.showPopoverTimeout),this.popoverCmp&&this.popoverCmp.closePopover()}goRelated(){if(!1===this.modelPopOver||this.disableLink)return!1;if(this.popoverCmp&&this.popoverCmp.closePopover(),this.showPopoverTimeout&&window.clearTimeout(this.showPopoverTimeout),this.model&&(!this.id||this.id&&this.module&&this.model.id==this.id&&this.model.module==this.module))this.model.goDetail(this.navigationtab?.tabid);else if(this.popoverModelInitialized)this.popovermodel.goDetail(this.navigationtab?.tabid);else if(!this.popovermodel.isLoading){let e=this.modal.await("LBL_LOADING");this.popovermodel.getData(!0).subscribe({next:t=>{this.popovermodel.goDetail(this.navigationtab?.tabid),e.emit(!0)},error:()=>{e.emit(!0)}})}this.clicked.emit(!0)}get disableLink(){return this.view&&!1===this.view.displayLinks||!1===this.enablelink}renderPopover(){this.footer.footercontainer&&(this.popoverModelInitialized||(!this.model||this.model&&this.id&&(this.model.module!=this.module||this.model.id!=this.id)?this.popovermodel.getData().subscribe((()=>{this.popoverModelInitialized=!0})):(this.popovermodel.module=this.model.module,this.popovermodel.id=this.model.id,this.popovermodel.initialize(),this.popovermodel.setData(this.model.data,!1),this.popoverModelInitialized=!0)),this.metadata.addComponent("ObjectModelPopover",this.footer.footercontainer,this.injector).subscribe((e=>{e.instance.parentElementRef=this.elementRef,this.popoverCmp=e.instance})))}ngOnChanges(){this.id&&this.module&&this.id!=this.popovermodel.id&&this.module!=this.popovermodel.module&&(this.popoverModelInitialized=!1,this.popovermodel.initialize(),this.popovermodel.id=this.id,this.popovermodel.module=this.module)}ngOnDestroy(){this.showPopoverTimeout&&window.clearTimeout(this.showPopoverTimeout),this.popoverCmp&&this.popoverCmp.closePopover(!0)}static#e=this.ɵfac=function(e){return new(e||SystemModelPopOverDirective)(i.rXU(l.yu),i.rXU(o.q),i.rXU(a.y),i.rXU(n.g,12),i.rXU(r._,8),i.rXU(n.g),i.rXU(i.aKT),i.rXU(d.U,8),i.rXU(c.Ix),i.rXU(i.zZn))};static#t=this.ɵdir=i.FsC({type:SystemModelPopOverDirective,selectors:[["","system-model-popover",""]],hostVars:2,hostBindings:function(e,t){1&e&&i.bIt("mouseenter",(function(){return t.onMouseOver()}))("mouseleave",(function(){return t.onMouseOut()}))("click",(function(){return t.goRelated()})),2&e&&i.AVh("slds-text-link_faux",!t.disableLink)},inputs:{module:"module",id:"id",enablelink:"enablelink",modelPopOver:[i.Mj6.None,"system-model-popover","modelPopOver"]},outputs:{clicked:"clicked"},features:[i.Jv_([n.g]),i.OA$]})}return SystemModelPopOverDirective})()},98427:(e,t,s)=>{"use strict";s.d(t,{v:()=>o});var i=s(54438),n=s(35911),l=s(18359);let o=(()=>{class SystemModelProviderDirective{constructor(e){this.model=e,this.data$=new i.bkB,this.subscription=new l.yU,this.model.isLoading=!0,this.subscription.add(this.model.data$.subscribe((e=>this.data$.next(e))))}set provided_model(e){e.module&&(this.model.module=e.module,this.model.id=e.id,!e.id&&e.data&&(this.model.id=e.data.id),e.data?(this.model.initialize(),this.model.setData(!0===e.clone?{...e.data}:e.data),this.model.isLoading=!1):this.model.id?this.model.getData():(this.model.initialize(),this.model.isLoading=!1))}ngOnDestroy(){this.subscription.unsubscribe()}static#e=this.ɵfac=function(e){return new(e||SystemModelProviderDirective)(i.rXU(n.g))};static#t=this.ɵdir=i.FsC({type:SystemModelProviderDirective,selectors:[["","system-model-provider",""]],inputs:{provided_model:[i.Mj6.None,"system-model-provider","provided_model"]},outputs:{data$:"data$"},exportAs:["system-model-provider"],features:[i.Jv_([n.g])]})}return SystemModelProviderDirective})()},62335:(e,t,s)=>{"use strict";s.d(t,{p:()=>n});var i=s(54438);let n=(()=>{class SystemMultiSelectCheckboxesDirective{constructor(e){this.elementRef=e}onClick(e){let t=null;if(e.target.parentElement.classList?.contains("slds-checkbox__label")?t=e.target.parentElement:e.target.parentElement.parentElement?.classList?.contains("slds-checkbox__label")?t=e.target.parentElement.parentElement:e.target.classList.contains("slds-checkbox__label")&&(t=e.target),t){if(document.getSelection().removeAllRanges(),!this.lastChecked)return void(this.lastChecked=t);if(e.shiftKey){let s=this.getAllLabels(),i=s.indexOf(t),n=s.indexOf(this.lastChecked),l=Math.min(i,n),o=Math.max(i,n),a=this.lastChecked.parentElement.getElementsByTagName("input")[0].checked;for(let e=l;e<=o;e++)s[e].parentElement.getElementsByTagName("input")[0].checked=a,s[e].parentElement.getElementsByTagName("input")[0].dispatchEvent(new Event("change"));e.preventDefault()}this.lastChecked=t}}getAllLabels(){let e=[],t=this.elementRef.nativeElement.getElementsByTagName("label");for(let s of t)s.classList.contains("slds-checkbox__label")&&e.push(s);return e}static#e=this.ɵfac=function(e){return new(e||SystemMultiSelectCheckboxesDirective)(i.rXU(i.aKT))};static#t=this.ɵdir=i.FsC({type:SystemMultiSelectCheckboxesDirective,selectors:[["","system-multi-select-checkboxes",""]],hostBindings:function(e,t){1&e&&i.bIt("click",(function(e){return t.onClick(e)}))}})}return SystemMultiSelectCheckboxesDirective})()},32130:(e,t,s)=>{"use strict";s.d(t,{M:()=>l});var i=s(54438),n=s(48717);let l=(()=>{class SystemOverlayLoadingSpinnerDirective{constructor(e,t,s){this.renderer=e,this.appRef=t,this.elementRef=s,this.onCancel=new i.bkB,this.spinnerContainer=document.createElement("div"),this.cancellable=!1}set isLoadingChange(e){e?this.renderSpinner():this.destroySpinner()}set cancellableChange(e){this.cancellable=e,this.spinnerRef&&(this.spinnerRef.instance.cancellable=e)}destroySpinner(){this.spinnerRef&&(this.spinnerRef.instance.onCancel$.unsubscribe(),this.spinnerRef.destroy(),this.spinnerRef=void 0,this.renderer.removeChild(this.elementRef.nativeElement,this.spinnerContainer))}renderSpinner(){this.spinnerRef||(this.renderer.appendChild(this.elementRef.nativeElement,this.spinnerContainer),this.spinnerRef=(0,i.a0P)(n.P,{environmentInjector:this.appRef.injector,hostElement:this.spinnerContainer}),this.spinnerRef.instance.asOverlay=!0,this.spinnerRef.instance.cancellable=this.cancellable,this.spinnerRef.instance.onCancel$.subscribe((()=>this.onCancel.emit())),this.appRef.attachView(this.spinnerRef.hostView),this.spinnerRef.changeDetectorRef.detectChanges())}static#e=this.ɵfac=function(e){return new(e||SystemOverlayLoadingSpinnerDirective)(i.rXU(i.sFG),i.rXU(i.o8S),i.rXU(i.aKT))};static#t=this.ɵdir=i.FsC({type:SystemOverlayLoadingSpinnerDirective,selectors:[["","system-overlay-loading-spinner",""]],hostAttrs:[1,"slds-is-relative"],inputs:{isLoadingChange:[i.Mj6.None,"system-overlay-loading-spinner","isLoadingChange"],cancellableChange:[i.Mj6.None,"cancellable","cancellableChange"]},outputs:{onCancel:"onCancel"}})}return SystemOverlayLoadingSpinnerDirective})()},90154:(e,t,s)=>{"use strict";s.d(t,{m:()=>o});var i=s(18359),n=s(54438),l=s(69904);let o=(()=>{class SystemPlaceholderDirective{constructor(e,t){this.language=e,this.elementRef=t,this.subscription=new i.yU,this.subscribeToCurrentLanguageChange()}ngOnDestroy(){this.subscription.unsubscribe()}ngOnChanges(e){e.label.previousValue!==e.label.currentValue&&e.label.currentValue&&this.setElementTitleAttribute()}subscribeToCurrentLanguageChange(){this.subscription=this.language.currentlanguage$.subscribe((()=>this.setElementTitleAttribute()))}setElementTitleAttribute(){this.label?this.elementRef.nativeElement.setAttribute("placeholder",this.language.getLabel(this.label)):this.elementRef.nativeElement.setAttribute("placeholder","")}static#e=this.ɵfac=function(e){return new(e||SystemPlaceholderDirective)(n.rXU(l.B),n.rXU(n.aKT))};static#t=this.ɵdir=n.FsC({type:SystemPlaceholderDirective,selectors:[["","system-placeholder",""]],inputs:{label:[n.Mj6.None,"system-placeholder","label"]},features:[n.OA$]})}return SystemPlaceholderDirective})()},1510:(e,t,s)=>{"use strict";s.d(t,{m:()=>o});var i=s(54438),n=s(83935),l=s(4921);let o=(()=>{class SystemPopOverDirective{set popoverSettings(e){this._popoverSettings.injector=e.injector,this._popoverSettings.componentset=e.componentset,this._popoverSettings.component=e.component}constructor(e,t,s){this.metadata=e,this.footer=t,this.elementRef=s,this.popoverCmp=null,this.showPopoverTimeout={},this._popoverSettings={injector:{},componentset:{},component:""}}onMouseOver(){this.showPopoverTimeout=window.setTimeout((()=>this.renderPopover()),500)}onMouseOut(){this.showPopoverTimeout&&window.clearTimeout(this.showPopoverTimeout),this.popoverCmp&&this.popoverCmp.closePopover()}renderPopover(){this.metadata.addComponent("SystemPopover",this.footer.footercontainer,this._popoverSettings.injector).subscribe((e=>{e.instance.parentElementRef=this.elementRef,e.instance.componentset=this._popoverSettings.componentset,this.popoverCmp=e.instance}))}ngOnDestroy(){this.popoverCmp&&this.popoverCmp.closePopover(!0)}static#e=this.ɵfac=function(e){return new(e||SystemPopOverDirective)(i.rXU(n.yu),i.rXU(l.q),i.rXU(i.aKT))};static#t=this.ɵdir=i.FsC({type:SystemPopOverDirective,selectors:[["","system-pop-over",""]],hostBindings:function(e,t){1&e&&i.bIt("mouseenter",(function(){return t.onMouseOver()}))("mouseleave",(function(){return t.onMouseOut()}))},inputs:{popoverSettings:[i.Mj6.None,"system-pop-over","popoverSettings"]}})}return SystemPopOverDirective})()},87395:(e,t,s)=>{"use strict";s.d(t,{T:()=>n});var i=s(54438);let n=(()=>{class SystemResizeDirective{constructor(e,t){this.elementRef=e,this.renderer=t,this.resizeemitter=new i.bkB}ngOnDestroy(){this.mouseListener&&this.mouseListener()}onMouseDown(e){let t=this.elementRef.nativeElement.getClientRects()[0];this.elementWidth=t.width,this.elementHeight=t.height,this.mouseListener=this.renderer.listen("document","mouseup",(e=>{this.onMouseup()}))}onMouseup(){if(!this.elementWidth||!this.elementWidth)return;let e=this.elementRef.nativeElement.getClientRects()[0];(this.elementWidth&&e.width!=this.elementWidth||this.elementHeight&&e.height!=this.elementHeight)&&this.resizeemitter.emit({width:e.width,height:e.height,id:this.resizeid}),this.elementWidth=void 0,this.elementHeight=void 0,this.mouseListener(),this.mouseListener=void 0}getElementWidth(){return this.elementRef.nativeElement.getClientRects()[0].width}static#e=this.ɵfac=function(e){return new(e||SystemResizeDirective)(i.rXU(i.aKT),i.rXU(i.sFG))};static#t=this.ɵdir=i.FsC({type:SystemResizeDirective,selectors:[["","system-resize",""]],hostBindings:function(e,t){1&e&&i.bIt("mousedown",(function(e){return t.onMouseDown(e)}))},inputs:{resizeid:"resizeid"},outputs:{resizeemitter:"system-resize"}})}return SystemResizeDirective})()},22465:(e,t,s)=>{"use strict";s.d(t,{L:()=>o});var i=s(18359),n=s(54438),l=s(69904);let o=(()=>{class SystemTitleDirective{constructor(e,t){this.language=e,this.elementRef=t,this.subscription=new i.yU,this.subscribeToCurrentLanguageChange()}ngOnDestroy(){this.subscription.unsubscribe()}ngOnChanges(e){e.label.previousValue!==e.label.currentValue&&e.label.currentValue&&this.setElementTitleAttribute()}subscribeToCurrentLanguageChange(){this.subscription=this.language.currentlanguage$.subscribe((()=>this.setElementTitleAttribute()))}setElementTitleAttribute(){this.elementRef.nativeElement.setAttribute("title",this.language.getLabel(this.label))}static#e=this.ɵfac=function(e){return new(e||SystemTitleDirective)(n.rXU(l.B),n.rXU(n.aKT))};static#t=this.ɵdir=n.FsC({type:SystemTitleDirective,selectors:[["","system-title",""]],inputs:{label:[n.Mj6.None,"system-title","label"]},features:[n.OA$]})}return SystemTitleDirective})()},28933:(e,t,s)=>{"use strict";s.d(t,{b:()=>l});var i=s(54438),n=s(4921);let l=(()=>{class SystemToBottomDirective{constructor(e,t,s){this.element=e,this.renderer=t,this.footer=s,this.more=new i.bkB,this.marginBottom=0,this.elementClass=!0}ngDoCheck(){let e=this.element.nativeElement.getBoundingClientRect(),t=Math.floor(window.innerHeight-e.top-this.marginBottom-parseInt(getComputedStyle(this.element.nativeElement).marginBottom,10)-parseInt(getComputedStyle(this.element.nativeElement).paddingBottom,10)-this.footer.visibleFooterHeight);this.renderer.setStyle(this.element.nativeElement,"height",t+"px")}onScroll(e){let t=this.element.nativeElement;t.scrollTop+t.clientHeight+50>t.scrollHeight&&this.more.emit(!0)}static#e=this.ɵfac=function(e){return new(e||SystemToBottomDirective)(i.rXU(i.aKT),i.rXU(i.sFG),i.rXU(n.q))};static#t=this.ɵdir=i.FsC({type:SystemToBottomDirective,selectors:[["","system-to-bottom",""]],hostVars:2,hostBindings:function(e,t){1&e&&i.bIt("scroll",(function(e){return t.onScroll(e)})),2&e&&i.AVh("slds-scrollable--y",t.elementClass)},inputs:{marginBottom:"marginBottom"},outputs:{more:"system-to-bottom"}})}return SystemToBottomDirective})()},69139:(e,t,s)=>{"use strict";s.d(t,{p:()=>l});var i=s(54438),n=s(4921);let l=(()=>{class SystemToBottomNoScrollDirective{constructor(e,t,s){this.element=e,this.renderer=t,this.footer=s,this.toBottomNoScroll=!0,this.marginBottom=0}ngDoCheck(){if(!1===this.toBottomNoScroll)return;let e=this.element.nativeElement.getBoundingClientRect(),t=Math.floor(window.innerHeight-e.top-this.marginBottom-parseInt(getComputedStyle(this.element.nativeElement).marginBottom,10)-parseInt(getComputedStyle(this.element.nativeElement).paddingBottom,10)-this.footer.visibleFooterHeight);this.renderer.setStyle(this.element.nativeElement,"height",t+"px")}static#e=this.ɵfac=function(e){return new(e||SystemToBottomNoScrollDirective)(i.rXU(i.aKT),i.rXU(i.sFG),i.rXU(n.q))};static#t=this.ɵdir=i.FsC({type:SystemToBottomNoScrollDirective,selectors:[["","system-to-bottom-noscroll",""]],inputs:{toBottomNoScroll:[i.Mj6.None,"system-to-bottom-noscroll","toBottomNoScroll"],marginBottom:"marginBottom"}})}return SystemToBottomNoScrollDirective})()},20883:(e,t,s)=>{"use strict";s.d(t,{D:()=>n});var i=s(54438);let n=(()=>{class SystemTrimInputDirective{getCaret(e){return{start:e.selectionStart,end:e.selectionEnd}}setCaret(e,t,s){e.selectionStart=t,e.selectionEnd=s,e.focus()}dispatchEvent(e,t){const s=document.createEvent("Event");s.initEvent(t,!1,!1),e.dispatchEvent(s)}trimValue(e,t){e.value=t.trim(),this.dispatchEvent(e,"input")}onBlur(e,t){!1===this.trim||this.trim&&"blur"!==this.trim||"function"!=typeof t.trim||t.trim()===t||(this.trimValue(e,t),this.dispatchEvent(e,"blur"))}onInput(e,t){if(!1!==this.trim&&!this.trim&&"function"==typeof t.trim&&t.trim()!==t){let{start:s,end:i}=this.getCaret(e);" "===t[0]&&1===s&&1===i&&(s=0,i=0),this.trimValue(e,t),this.setCaret(e,s,i)}}static#e=this.ɵfac=function(e){return new(e||SystemTrimInputDirective)};static#t=this.ɵdir=i.FsC({type:SystemTrimInputDirective,selectors:[["input","system-trim-input",""],["textarea","system-trim-input",""]],hostBindings:function(e,t){1&e&&i.bIt("blur",(function(e){return t.onBlur(e.target,e.target.value)}))("input",(function(e){return t.onInput(e.target,e.target.value)}))},inputs:{trim:[i.Mj6.None,"system-trim-input","trim"]}})}return SystemTrimInputDirective})()},37263:(e,t,s)=>{"use strict";s.d(t,{x:()=>l});var i=s(41731),n=s(54438);let l=(()=>{class SystemViewProviderDirective{constructor(e,t,s){this.renderer=e,this.elementRef=t,this.view=s}set viewSettings(e){e.editable&&(this.view.isEditable=!0),!1===e.displayLabels&&(this.view.displayLabels=!1),!1===e.displayLinks&&(this.view.displayLinks=!1)}ngAfterViewInit(){this.setviewSize(),this.resizeHandler=this.renderer.listen("window","resize",(()=>this.setviewSize()))}ngOnDestroy(){this.resizeHandler&&this.resizeHandler()}setviewSize(){this.elementRef.nativeElement.getBoundingClientRect().width<500?this.view.size="small":this.view.size="regular"}static#e=this.ɵfac=function(e){return new(e||SystemViewProviderDirective)(n.rXU(n.sFG),n.rXU(n.aKT),n.rXU(i.U))};static#t=this.ɵdir=n.FsC({type:SystemViewProviderDirective,selectors:[["","system-view-provider",""]],inputs:{viewSettings:[n.Mj6.None,"system-view-provider","viewSettings"]},exportAs:["system-view-provider"],features:[n.Jv_([i.U])]})}return SystemViewProviderDirective})()},18063:(e,t,s)=>{"use strict";s.d(t,{$:()=>u});var i=s(54438),n=s(83935),l=s(50531),o=s(69904),a=s(48849),r=s(57363),d=s(60177);function c(e,t){if(1&e){const e=i.RV6();i.j41(0,"span",14)(1,"span",15),i.bIt("click",(function(){i.eBV(e);const t=i.XpG();return i.Njj(t.navigateHome())})),i.EFF(2),i.k0s()()}if(2&e){const e=i.XpG();i.R7$(2),i.JRh(e.roleName)}}let u=(()=>{class GlobalAppLauncher{quickLaunch(e){this.showAppLauncher()}constructor(e,t,s,i,n){this.metadata=e,this.modal=t,this.language=s,this.userPreferences=i,this.router=n}get roleName(){let e=this.metadata.getActiveRole();return e.label&&""!=e.label?this.language.getLabel(e.label):this.metadata.getActiveRole().name}showAppLauncher(){this.modal.openModal("GlobalAppLauncherDialog")}navigateHome(){this.router.navigate(["module/Home"])}static#e=this.ɵfac=function(e){return new(e||GlobalAppLauncher)(i.rXU(n.yu),i.rXU(l.y),i.rXU(o.B),i.rXU(a.S),i.rXU(r.Ix))};static#t=this.ɵcmp=i.VBU({type:GlobalAppLauncher,selectors:[["global-app-launcher"]],hostAttrs:[1,"slds-context-bar__primary","slds-context-bar__item--divider-right"],hostBindings:function(e,t){1&e&&i.bIt("keydown.control.space",(function(){return t.quickLaunch()}),!1,i.EBC)},decls:14,vars:1,consts:[[1,"slds-context-bar__item","slds-context-bar__dropdown-trigger","slds-dropdown-trigger","slds-dropdown-trigger--click","slds-no-hover"],[1,"slds-context-bar__icon-action","slds-m-top_small",3,"click"],["href","javascript:void(0);",1,"slds-icon-waffle_container","slds-context-bar__button"],[1,"slds-icon-waffle"],[1,"slds-r1"],[1,"slds-r2"],[1,"slds-r3"],[1,"slds-r4"],[1,"slds-r5"],[1,"slds-r6"],[1,"slds-r7"],[1,"slds-r8"],[1,"slds-r9"],["class","slds-context-bar__label-action slds-context-bar__app-name",4,"ngIf"],[1,"slds-context-bar__label-action","slds-context-bar__app-name"],[1,"slds-truncate","slds-text-link--reset",3,"click"]],template:function(e,t){1&e&&(i.j41(0,"div",0)(1,"div",1),i.bIt("click",(function(){return t.showAppLauncher()})),i.j41(2,"a",2)(3,"div",3),i.nrm(4,"div",4)(5,"div",5)(6,"div",6)(7,"div",7)(8,"div",8)(9,"div",9)(10,"div",10)(11,"div",11)(12,"div",12),i.k0s()()(),i.DNE(13,c,3,1,"span",13),i.k0s()),2&e&&(i.R7$(13),i.Y8G("ngIf",!t.userPreferences.toUse.globalHeaderCollapsed))},dependencies:[d.bT],encapsulation:2})}return GlobalAppLauncher})()},38845:(e,t,s)=>{"use strict";s.d(t,{T:()=>l});var i=s(14699),n=s(54438);let l=(()=>{class GlobalCopyright{constructor(){this.buildNumber="",this.copyright="",this.buildNumber=i.c.buildNumber,this.copyright=i.c.copyright}static#e=this.ɵfac=function(e){return new(e||GlobalCopyright)};static#t=this.ɵcmp=n.VBU({type:GlobalCopyright,selectors:[["global-copyright"]],decls:9,vars:2,consts:[[1,"slds-align_absolute-center"],["href","https://www.spicecrm.com","target","”_blank”"]],template:function(e,t){1&e&&(n.j41(0,"div")(1,"div",0),n.EFF(2,"SpiceCRM - "),n.j41(3,"a",1),n.EFF(4,"www.spicecrm.com"),n.k0s()(),n.j41(5,"div",0),n.EFF(6),n.k0s(),n.j41(7,"div",0),n.EFF(8),n.k0s()()),2&e&&(n.R7$(6),n.JRh(t.copyright),n.R7$(2),n.SpI("version ",t.buildNumber,""))},encapsulation:2})}return GlobalCopyright})()},63710:(e,t,s)=>{"use strict";s.d(t,{M:()=>y});var i=s(54438),n=s(35911),l=s(41731),o=s(83935),a=s(47866),r=s(69904),d=s(50531),c=s(60177),u=s(25863),m=s(68823),h=s(44261),g=s(33159);const p=["containercontent"];function f(e,t){if(1&e){const e=i.RV6();i.j41(0,"button",9),i.bIt("click",(function(){i.eBV(e);const t=i.XpG();return i.Njj(t.expand())})),i.nrm(1,"system-button-icon",10),i.k0s()}2&e&&(i.R7$(),i.Y8G("icon","expand_alt"))}const b=(e,t)=>({"slds-is-closed":e,"slds-is-open":t});let y=(()=>{class GlobalDockedComposer{constructor(e,t,s,i,n,l,o){this.metadata=e,this.dockedComposer=t,this.language=s,this.model=i,this.view=n,this.modal=l,this.ViewContainerRef=o,this.composerdata={},this.isClosed=!1,this.view.isEditable=!0,this.view.setEditMode(),this.model.isEditing=!0,this.model.isGlobal=!0}ngOnInit(){this.model.module=this.composerdata.module,this.model.id=this.composerdata.id,this.composerdata.model.data?this.model.setData(this.composerdata.model.data,!1):this.model.initializeModel(),this.dockedComposer.composers[this.composerindex].model=this.model;let e=this.metadata.getComponentConfig("GlobalDockedComposer",this.model.module);if(e.componentset){let t=this.metadata.getComponentSetObjects(e.componentset);for(let e of t)this.metadata.addComponent("ObjectRecordFieldset",this.containercontent).subscribe((t=>{t.instance.componentconfig=e.componentconfig}))}else e.fieldset&&this.metadata.addComponent("ObjectRecordFieldset",this.containercontent).subscribe((t=>{t.instance.direction="vertical",t.instance.fieldset=e.fieldset}));this.actionset=e.actionset,this.composerdata.loadexpanded&&this.canExpand&&(this.expand(),this.composerdata.loadexpanded=!1)}get displayLabel(){return this.model.getField("name")?this.model.getField("name"):this.language.getModuleName(this.model.module,!0)}toggleClosed(){this.isClosed=!this.isClosed}get toggleIcon(){return this.isClosed?"erect_window":"minimize_window"}get canExpand(){return!_.isEmpty(this.metadata.getComponentConfig("GlobalDockedComposerModal",this.model.module))}expand(){this.modal.openModal("GlobalDockedComposerModal",!0,this.ViewContainerRef.injector)}handleaction(e){if("savegodetail"===e)this.model.goDetail(),this.closeComposer();else this.closeComposer()}promptClose(){this.modal.prompt("confirm",this.language.getLabel("MSG_CANCEL","","long"),this.language.getLabel("MSG_CANCEL")).subscribe((e=>{e&&this.closeComposer()}))}closeComposer(){for(let e=0;e<this.dockedComposer.composers.length;e++)this.dockedComposer.composers[e].id===this.composerdata.id&&this.dockedComposer.composers.splice(e,1)}static#e=this.ɵfac=function(e){return new(e||GlobalDockedComposer)(i.rXU(o.yu),i.rXU(a.n),i.rXU(r.B),i.rXU(n.g),i.rXU(l.U),i.rXU(d.y),i.rXU(i.c1b))};static#t=this.ɵcmp=i.VBU({type:GlobalDockedComposer,selectors:[["global-docked-composer"]],viewQuery:function(e,t){if(1&e&&i.GBs(p,7,i.c1b),2&e){let e;i.mGM(e=i.lsd())&&(t.containercontent=e.first)}},inputs:{composerdata:"composerdata",composerindex:"composerindex"},features:[i.Jv_([n.g,l.U])],decls:23,vars:11,consts:[["role","dialog",1,"slds-docked-composer","slds-grid","slds-grid_vertical","slds-m-horizontal--x-small",2,"transition",".5s",3,"ngClass"],["aria-live","assertive",1,"slds-docked-composer__header","slds-grid","slds-shrink-none"],[1,"slds-media","slds-media_center","slds-no-space"],[1,"slds-media__figure","slds-m-right_x-small"],[1,"slds-icon_container"],[3,"module","size"],[1,"slds-media__body"],[1,"slds-truncate"],[1,"slds-col_bump-left","slds-shrink-none"],[1,"slds-button","slds-button_icon","slds-button_icon",3,"click"],[3,"icon"],["class","slds-button slds-button_icon slds-button_icon",3,"click",4,"ngIf"],[1,"slds-docked-composer__body","slds-theme--default","slds-scrollable",2,"height","380px"],["containercontent",""],[1,"slds-docked-composer__footer","slds-shrink-none","slds-grid","slds-grid--vertical-align-center","slds-grid--align-spread"],[1,"slds-col"],[1,"slds-col_bump-left"],[3,"actionset","actionemitter"]],template:function(e,t){1&e&&(i.j41(0,"section",0)(1,"header",1)(2,"div",2)(3,"div",3)(4,"span",4),i.nrm(5,"system-icon",5),i.k0s()(),i.j41(6,"div",6)(7,"div",7),i.EFF(8),i.k0s()()(),i.j41(9,"div",8)(10,"button",9),i.bIt("click",(function(){return t.toggleClosed()})),i.nrm(11,"system-button-icon",10),i.k0s(),i.DNE(12,f,2,1,"button",11),i.j41(13,"button",9),i.bIt("click",(function(){return t.promptClose()})),i.nrm(14,"system-button-icon",10),i.k0s()()(),i.j41(15,"div",12),i.nrm(16,"div",null,13),i.k0s(),i.j41(18,"footer",14)(19,"div",15),i.nrm(20,"global-docked-composer-messages-badge"),i.k0s(),i.j41(21,"div",16)(22,"object-action-container",17),i.bIt("actionemitter",(function(e){return t.handleaction(e)})),i.k0s()()()()),2&e&&(i.Y8G("ngClass",i.l_i(8,b,t.isClosed,!t.isClosed)),i.R7$(5),i.Y8G("module",t.model.module)("size","small"),i.R7$(3),i.JRh(t.displayLabel),i.R7$(3),i.Y8G("icon",t.toggleIcon),i.R7$(),i.Y8G("ngIf",t.canExpand),i.R7$(2),i.Y8G("icon","close"),i.R7$(8),i.Y8G("actionset",t.actionset))},dependencies:[c.YU,c.bT,u.t,m.J,h.l,g.f],encapsulation:2})}return GlobalDockedComposer})()},51003:(e,t,s)=>{"use strict";s.d(t,{l:()=>g});var i=s(54438),n=s(47866),l=s(66586),o=s(60177),a=s(10650),r=s(63710),d=s(41620);function c(e,t){1&e&&i.nrm(0,"global-docked-composer-overflow")}function u(e,t){if(1&e&&i.nrm(0,"global-docked-composer",3),2&e){const e=t.$implicit,s=t.index,n=i.XpG();i.Y8G("composerindex",s)("composerdata",e)("ngStyle",n.getComposerStyle(s))}}const m=e=>({calldata:e});function h(e,t){if(1&e&&(i.qex(0),i.nrm(1,"system-dynamic-component",4),i.bVm()),2&e){const e=t.$implicit;i.R7$(),i.Y8G("componentattributes",i.eq3(1,m,e))}}let g=(()=>{class GlobalDockedComposerContainer{constructor(e,t){this.dockedComposer=e,this.telephony=t}get isVisible(){return this.dockedComposer.composers.length>0||this.telephony.calls.length>0}getComposerStyle(e){if(e>=this.dockedComposer.maxComposers-this.telephony.calls.length)return{display:"none"}}get displayOverflow(){return this.dockedComposer.composers.length+this.telephony.calls.length>this.dockedComposer.maxComposers}static#e=this.ɵfac=function(e){return new(e||GlobalDockedComposerContainer)(i.rXU(n.n),i.rXU(l.V))};static#t=this.ɵcmp=i.VBU({type:GlobalDockedComposerContainer,selectors:[["global-docked-composer-container"]],hostAttrs:[2,"z-index","9999"],hostVars:2,hostBindings:function(e,t){2&e&&i.AVh("slds-docked_container",t.isVisible)},decls:3,vars:3,consts:[[4,"ngIf"],[3,"composerindex","composerdata","ngStyle",4,"ngFor","ngForOf"],[4,"ngFor","ngForOf"],[3,"composerindex","composerdata","ngStyle"],["component","TelephonyDockedCall",3,"componentattributes"]],template:function(e,t){1&e&&i.DNE(0,c,1,0,"global-docked-composer-overflow",0)(1,u,1,3,"global-docked-composer",1)(2,h,2,3,"ng-container",2),2&e&&(i.Y8G("ngIf",t.displayOverflow),i.R7$(),i.Y8G("ngForOf",t.dockedComposer.composers),i.R7$(),i.Y8G("ngForOf",t.telephony.calls))},dependencies:[o.Sq,o.bT,o.B3,a.s,r.M,d.s],encapsulation:2})}return GlobalDockedComposerContainer})()},33159:(e,t,s)=>{"use strict";s.d(t,{f:()=>g});var i=s(54438),n=s(35911),l=s(69904),o=s(60177),a=s(25863),r=s(32062),d=s(45915),c=s(18521);function u(e,t){if(1&e&&(i.j41(0,"tr",16)(1,"td",17)(2,"div",18),i.nrm(3,"system-utility-icon",19),i.k0s()(),i.j41(4,"td",20)(5,"div",18),i.nrm(6,"system-label-fieldname",21),i.k0s()(),i.j41(7,"td",22)(8,"div",18),i.EFF(9),i.k0s()()()),2&e){const e=t.$implicit,s=i.XpG(3);i.R7$(3),i.Y8G("icon",e.type),i.R7$(3),i.Y8G("module",s.model.module)("field",e.reference),i.R7$(3),i.JRh(e.message)}}function m(e,t){if(1&e){const e=i.RV6();i.j41(0,"section",4)(1,"button",5),i.bIt("click",(function(){i.eBV(e);const t=i.XpG(2);return i.Njj(t.showpopover=!1)})),i.nrm(2,"system-button-icon",6),i.k0s(),i.j41(3,"header",7)(4,"div",8),i.nrm(5,"system-utility-icon",9),i.j41(6,"div",10)(7,"h2",11),i.nrm(8,"system-label",12),i.k0s()()()(),i.j41(9,"div",13)(10,"table",14)(11,"tbody"),i.DNE(12,u,10,4,"tr",15),i.k0s()()()()}if(2&e){const e=i.XpG(2);i.Y8G("ngClass",e.nubbinClass)("ngStyle",e.popoverStyle),i.R7$(2),i.Y8G("inverse",!0),i.R7$(10),i.Y8G("ngForOf",e.messages)}}function h(e,t){if(1&e){const e=i.RV6();i.j41(0,"div",1)(1,"span",2),i.bIt("click",(function(){i.eBV(e);const t=i.XpG();return i.Njj(t.showpopover=!t.showpopover)})),i.EFF(2),i.k0s(),i.DNE(3,m,13,4,"section",3),i.k0s()}if(2&e){const e=i.XpG();i.R7$(2),i.JRh(e.messagecount),i.R7$(),i.Y8G("ngIf",e.showpopover)}}let g=(()=>{class GlobalDockedComposerMessagesBadge{constructor(e,t){this.model=e,this.language=t,this.showpopover=!1,this.side="left"}get messagecount(){return this.model.getMessages().length}get messages(){return this.model.getMessages()}get nubbinClass(){return"right"==this.side?"slds-nubbin_bottom-right":"slds-nubbin_bottom-left"}get popoverStyle(){return"right"==this.side?{bottom:"37px",right:"-10px"}:{bottom:"37px",left:"-10px"}}static#e=this.ɵfac=function(e){return new(e||GlobalDockedComposerMessagesBadge)(i.rXU(n.g),i.rXU(l.B))};static#t=this.ɵcmp=i.VBU({type:GlobalDockedComposerMessagesBadge,selectors:[["global-docked-composer-messages-badge"]],inputs:{side:"side"},decls:1,vars:1,consts:[["class","slds-is-relative",4,"ngIf"],[1,"slds-is-relative"],[1,"slds-badge","slds-theme_warning","slds-m-horizontal--xx-small",3,"click"],["aria-label","Model Errors","class","slds-popover slds-popover_error slds-nubbin_bottom-left slds-is-absolute","role","dialog",3,"ngClass","ngStyle",4,"ngIf"],["aria-label","Model Errors","role","dialog",1,"slds-popover","slds-popover_error","slds-nubbin_bottom-left","slds-is-absolute",3,"ngClass","ngStyle"],["title","Close dialog",1,"slds-button","slds-button_icon","slds-button_icon-small","slds-float_right","slds-popover__close",3,"click"],["icon","close",3,"inverse"],[1,"slds-popover__header"],[1,"slds-media","slds-media_center","slds-has-flexi-truncate"],["icon","error","size","x-small","colorclass","slds-icon-utility-error"],[1,"slds-media__body","slds-text-align--left","slds-p-left--x-small"],["title","Resolve error",1,"slds-truncate","slds-text-heading_medium"],["label","LBL_VALIDATION_ERRORS"],[1,"slds-popover__body","slds-p-horizontal--none"],[1,"slds-table","slds-table_cell-buffer","slds-table_bordered"],["class","slds-hint-parent",4,"ngFor","ngForOf"],[1,"slds-hint-parent"],["data-label","type"],[1,"slds-truncate"],["size","x-small",3,"icon"],["data-label","Field"],[3,"module","field"],["data-label","Message"]],template:function(e,t){1&e&&i.DNE(0,h,4,2,"div",0),2&e&&i.Y8G("ngIf",t.messagecount)},dependencies:[o.YU,o.Sq,o.bT,o.B3,a.t,r.W,d.P,c.B],encapsulation:2})}return GlobalDockedComposerMessagesBadge})()},41620:(e,t,s)=>{"use strict";s.d(t,{s:()=>m});var i=s(54438),n=s(47866),l=s(66586),o=s(69904),a=s(60177),r=s(25863),d=s(68823);function c(e,t){if(1&e){const e=i.RV6();i.j41(0,"li",8)(1,"a",9),i.bIt("click",(function(){const t=i.eBV(e).$implicit,s=i.XpG(2);return i.Njj(s.focusComposer(t.id))})),i.j41(2,"div",10)(3,"div",11)(4,"span",12),i.nrm(5,"system-icon",13),i.k0s()(),i.j41(6,"div",14)(7,"h2",15),i.EFF(8),i.k0s()()()()()}if(2&e){const e=t.$implicit,s=i.XpG(2);i.R7$(5),i.Y8G("module",e.module)("size","small"),i.R7$(3),i.JRh(s.displayLabel(e))}}function u(e,t){if(1&e&&(i.j41(0,"div",5)(1,"ul",6),i.DNE(2,c,9,3,"li",7),i.k0s()()),2&e){const e=i.XpG();i.R7$(2),i.Y8G("ngForOf",e.overflowComposers)}}let m=(()=>{class GlobalDockedComposerOverflow{constructor(e,t,s,i,n){this.renderer=e,this.elementRef=t,this.dockedComposer=s,this.telephony=i,this.language=n,this.showHiddenComposers=!1}ngOnDestroy(){this.clickListener&&this.clickListener()}get hiddenCount(){return this.dockedComposer.composers.length+this.telephony.calls.length-this.dockedComposer.maxComposers}toggleHiddenComoposers(){this.showHiddenComposers=!this.showHiddenComposers,this.showHiddenComposers?this.clickListener=this.renderer.listen("document","click",(e=>this.onClick(e))):this.clickListener&&this.clickListener()}onClick(e){this.elementRef.nativeElement.contains(e.target)||(this.showHiddenComposers=!1,this.clickListener())}get overflowComposers(){return this.dockedComposer.composers.slice(this.dockedComposer.maxComposers-this.telephony.calls.length)}displayLabel(e){return e.model.data.name?e.model.data.name:this.language.getModuleName(e.model.module,!0)}focusComposer(e){this.dockedComposer.focusComposer(e),this.showHiddenComposers=!1}static#e=this.ɵfac=function(e){return new(e||GlobalDockedComposerOverflow)(i.rXU(i.sFG),i.rXU(i.aKT),i.rXU(n.n),i.rXU(l.V),i.rXU(o.B))};static#t=this.ɵcmp=i.VBU({type:GlobalDockedComposerOverflow,selectors:[["global-docked-composer-overflow"]],decls:6,vars:3,consts:[[1,"slds-docked-composer","slds-docked-composer_overflow","slds-m-horizontal--x-small"],[1,"slds-button","slds-button_icon","slds-docked-composer_overflow__button",3,"click"],[3,"icon"],[1,"slds-text-body_small","slds-m-left_xx-small"],["class","slds-dropdown slds-dropdown_left slds-dropdown_bottom slds-dropdown_medium slds-nubbin_bottom-left",4,"ngIf"],[1,"slds-dropdown","slds-dropdown_left","slds-dropdown_bottom","slds-dropdown_medium","slds-nubbin_bottom-left"],["role","menu",1,"slds-dropdown__list","slds-dropdown_length-with-icon-7"],["class","slds-dropdown__item","role","presentation",4,"ngFor","ngForOf"],["role","presentation",1,"slds-dropdown__item"],["href","javascript:void(0);","role","menuitem",3,"click"],[1,"slds-media","slds-media_center","slds-no-space"],[1,"slds-media__figure","slds-m-right_x-small"],[1,"slds-icon_container"],[3,"module","size"],[1,"slds-media__body"],[1,"slds-truncate"]],template:function(e,t){1&e&&(i.j41(0,"div",0)(1,"button",1),i.bIt("click",(function(){return t.toggleHiddenComoposers()})),i.nrm(2,"system-button-icon",2),i.j41(3,"span",3),i.EFF(4),i.k0s()(),i.DNE(5,u,3,1,"div",4),i.k0s()),2&e&&(i.R7$(2),i.Y8G("icon","standard_objects"),i.R7$(2),i.JRh(t.hiddenCount),i.R7$(),i.Y8G("ngIf",t.showHiddenComposers))},dependencies:[a.Sq,a.bT,r.t,d.J],encapsulation:2})}return GlobalDockedComposerOverflow})()},62165:(e,t,s)=>{"use strict";s.d(t,{T:()=>b});var i=s(54438),n=s(29994),l=s(4921),o=s(50531),a=s(83935),r=s(40553),d=s(60177),c=s(89468),u=s(51003);const m=["footercontainer"],h=["modalcontainer"],g=["modalbackdrop"],p=["hiddenContainer"];function f(e,t){1&e&&i.nrm(0,"global-docked-composer-container")}let b=(()=>{class GlobalFooter{constructor(e,t,s,i,n){this.session=e,this.footer=t,this.modalservice=s,this.metadata=i,this.broadcast=n,this.loadedComponents=[]}ngOnInit(){this.subscribeToLoader()}loadCustomComponentset(e){this.metadata.getComponentSetObjects(e).forEach((e=>{this.loadedComponents.some((t=>t.component==e.component&&_.isEqual(t.componentconfig,e.componentconfig)))||this.metadata.addComponent(e.component,this.hiddenContainer).subscribe((t=>{t.instance.componentconfig=e.componentconfig,this.loadedComponents.push(e)}))}))}ngAfterViewInit(){this.footer.footercontainer=this.footercontainer,this.footer.modalcontainer=this.modalcontainer,this.footer.modalbackdrop=this.modalbackdrop}subscribeToLoader(){this.broadcast.message$.subscribe((e=>{if("loader.primarycompleted"!=e.messagetype)return;const t=this.metadata.getComponentConfig("GlobalFooter");t?.componentset&&this.loadCustomComponentset(t.componentset)}))}static#e=this.ɵfac=function(e){return new(e||GlobalFooter)(i.rXU(n.d),i.rXU(l.q),i.rXU(o.y),i.rXU(a.yu),i.rXU(r.m))};static#t=this.ɵcmp=i.VBU({type:GlobalFooter,selectors:[["global-footer"]],viewQuery:function(e,t){if(1&e&&(i.GBs(m,7,i.c1b),i.GBs(h,7,i.c1b),i.GBs(g,7,i.c1b),i.GBs(p,7,i.c1b)),2&e){let e;i.mGM(e=i.lsd())&&(t.footercontainer=e.first),i.mGM(e=i.lsd())&&(t.modalcontainer=e.first),i.mGM(e=i.lsd())&&(t.modalbackdrop=e.first),i.mGM(e=i.lsd())&&(t.hiddenContainer=e.first)}},decls:12,vars:7,consts:[[4,"ngIf"],["footercontainer",""],["data-info","ModalContainer",2,"position","fixed","z-index","10000"],[1,"slds-backdrop"],["backdrop",""],["modalcontainer",""],[1,"slds-notify_container"],[2,"display","none"],["hiddenContainer",""]],template:function(e,t){1&e&&(i.j41(0,"footer"),i.DNE(1,f,1,0,"global-docked-composer-container",0),i.nrm(2,"div",null,1),i.j41(4,"div",2),i.nrm(5,"div",3,4)(7,"span",null,5),i.k0s(),i.nrm(9,"system-toast-container",6)(10,"div",7,8),i.k0s()),2&e&&(i.R7$(),i.Y8G("ngIf",t.session.authData.sessionId&&!0===t.session.authData.loaded),i.R7$(4),i.xc7("z-index",t.modalservice.backdropZindex)("backdrop-filter",t.modalservice.backdropBlurred),i.AVh("slds-backdrop_open",t.modalservice.backdropVisible))},dependencies:[d.bT,c.m,u.l],encapsulation:2})}return GlobalFooter})()},84551:(e,t,s)=>{"use strict";s.d(t,{Z:()=>G});var i=s(54438),n=s(57363),l=s(18359),o=s(29994),a=s(41081),r=s(71692),d=s(48849),c=s(60968),u=s(49722),m=s(53584),h=s(60177),g=s(76642),p=s(76064),f=s(45184),b=s(18638);const y=["header"];function v(e,t){1&e&&i.nrm(0,"global-header-trial-bar")}function k(e,t){1&e&&i.nrm(0,"global-header-top")}function R(e,t){if(1&e&&i.nrm(0,"global-navigation-tabbed",6),2&e){const e=i.XpG(2);i.Y8G("progressWidth",e.progressWidth)("showProgressBar",e.pendingRequestsTotal>0)}}function I(e,t){1&e&&i.nrm(0,"global-navigation")}function x(e,t){if(1&e&&(i.j41(0,"div",7),i.nrm(1,"div",8),i.k0s()),2&e){const e=i.XpG(2);i.R7$(),i.xc7("width",e.progressWidth,"%")}}function j(e,t){if(1&e&&(i.j41(0,"div"),i.DNE(1,v,1,0,"global-header-trial-bar",2)(2,k,1,0,"global-header-top",2)(3,R,1,2,"global-navigation-tabbed",3)(4,I,1,0,"global-navigation",2),i.j41(5,"div",4),i.DNE(6,x,2,2,"div",5),i.k0s()()),2&e){const e=i.XpG();i.R7$(),i.Y8G("ngIf",e.isTenant),i.R7$(),i.Y8G("ngIf",!e.userPreferences.toUse.globalHeaderCollapsed||e.issmall),i.R7$(),i.Y8G("ngIf",!e.issmall&&e.tabbed),i.R7$(),i.Y8G("ngIf",!e.issmall&&!e.tabbed),i.R7$(2),i.Y8G("ngIf",e.issmall&&e.pendingRequestsTotal>0)}}let G=(()=>{class GlobalHeader{constructor(e,t,s,i,o,a,r,d,c){this.session=e,this.router=t,this.toast=s,this.layout=i,this.userPreferences=o,this.navigation=a,this.backend=r,this.cdRef=d,this.configurationService=c,this.subscriptions=new l.yU,this.pendingRequestsTotal=0,this.progressWidth=0,this.router.events.subscribe((e=>{if(e instanceof n.vG){let t=this.configurationService.getSystemParamater("aclcontroller");t&&"spiceacl"!=t&&"Users"===e.snapshot.params.module&&e.snapshot.params.id&&(this.session.authData.admin||e.snapshot.params.id==this.session.authData.userId||(this.toast.sendToast("You are not allowed to view or edit foreign user data.","warning",null,3),this.router.navigate(["/module/Users"])))}}))}get headerHeight(){return this.header?this.header.element.nativeElement.getBoundingClientRect().height:0}get tabbed(){return"subtabbed"==this.navigation.navigationparadigm}get issmall(){return"small"==this.layout.screenwidth}get isTenant(){return!_.isEmpty(this.configurationService.getData("tenantconfig"))}ngAfterViewInit(){this.subscribeToBackendPendingRequests()}ngOnDestroy(){this.subscriptions.unsubscribe()}subscribeToBackendPendingRequests(){this.subscriptions.add(this.backend.pendingCountChange$.subscribe((e=>{e>this.pendingRequestsTotal?this.pendingRequestsTotal=e:0==e&&(this.pendingRequestsTotal=0),this.progressWidth=0==e?100:100/this.pendingRequestsTotal*(this.pendingRequestsTotal-this.backend.pendingRequestsCount),this.cdRef.detectChanges()})))}static#e=this.ɵfac=function(e){return new(e||GlobalHeader)(i.rXU(o.d),i.rXU(n.Ix),i.rXU(a.o),i.rXU(r.Z),i.rXU(d.S),i.rXU(c.L),i.rXU(u.H),i.rXU(i.gRc),i.rXU(m.i))};static#t=this.ɵcmp=i.VBU({type:GlobalHeader,selectors:[["global-header"]],viewQuery:function(e,t){if(1&e&&i.GBs(y,5,i.c1b),2&e){let e;i.mGM(e=i.lsd())&&(t.header=e.first)}},decls:3,vars:1,consts:[[1,"slds-global-header_container"],["header",""],[4,"ngIf"],[3,"progressWidth","showProgressBar",4,"ngIf"],[1,"slds-hide--medium","slds-context-bar",2,"height","0"],["class","slds-context-bar-progress-bar",4,"ngIf"],[3,"progressWidth","showProgressBar"],[1,"slds-context-bar-progress-bar"],[1,"slds-height_full"]],template:function(e,t){1&e&&(i.j41(0,"header",0,1),i.DNE(2,j,7,5,"div",2),i.k0s()),2&e&&(i.R7$(2),i.Y8G("ngIf",t.session.authData.sessionId&&!0===t.session.authData.loaded))},dependencies:[h.bT,g.s,p.m,f.K,b.q],encapsulation:2})}return GlobalHeader})()},28666:(e,t,s)=>{"use strict";s.d(t,{K:()=>o});var i=s(54438),n=s(345),l=s(53584);let o=(()=>{class GlobalHeaderImage{constructor(e,t,s){this.sanitizer=e,this.cdref=t,this.configuration=s,this.defaultImageUrl="config/headerimage",this.imageUrl=this.defaultImageUrl,this.configuration.hasCapabilityConfig("theme")&&this.setImageUrl(),this.subscription=this.configuration.loaded$.subscribe((e=>{e&&this.setImageUrl()}))}setImageUrl(){this.configuration.getAsset("headerimage")?this.imageUrl=this.sanitizer.bypassSecurityTrustResourceUrl(this.configuration.getAsset("headerimage")):this.configuration.getCapabilityConfig("theme").header_image?this.imageUrl=this.sanitizer.bypassSecurityTrustResourceUrl("data:"+this.configuration.getCapabilityConfig("theme").header_image):this.imageUrl=this.defaultImageUrl}ngOnDestroy(){this.subscription.unsubscribe()}static#e=this.ɵfac=function(e){return new(e||GlobalHeaderImage)(i.rXU(n.up),i.rXU(i.gRc),i.rXU(l.i))};static#t=this.ɵcmp=i.VBU({type:GlobalHeaderImage,selectors:[["global-header-image"]],decls:1,vars:1,consts:[[1,"slds-show--large",2,"max-height","25px",3,"src"]],template:function(e,t){1&e&&i.nrm(0,"img",0),2&e&&i.Y8G("src",t.imageUrl,i.B4B)},encapsulation:2})}return GlobalHeaderImage})()},70455:(e,t,s)=>{"use strict";s.d(t,{d:()=>M});var i=s(54438),n=s(65029),l=s(57363),o=s(40553),a=s(53584),r=s(48849),d=s(69904),c=s(60177),u=s(84341),m=s(80256),h=s(90154),g=s(68823),p=s(32062),f=s(44985),b=s(18521),y=s(11713),v=s(27366);const _=["searchfield"];function k(e,t){1&e&&i.nrm(0,"system-utility-icon",31)}function R(e,t){1&e&&i.nrm(0,"system-utility-icon",31)}function I(e,t){if(1&e){const e=i.RV6();i.j41(0,"li",23),i.bIt("click",(function(){const t=i.eBV(e).$implicit,s=i.XpG(2);return i.Njj(s.searchmodule=t)})),i.j41(1,"div",24)(2,"div",25),i.DNE(3,R,1,0,"system-utility-icon",26),i.k0s(),i.j41(4,"div",27)(5,"div",28),i.nrm(6,"system-label-modulename",32),i.k0s()()()()}if(2&e){const e=t.$implicit,s=i.XpG(2);i.R7$(3),i.Y8G("ngIf",e==s._searchmodule),i.R7$(3),i.Y8G("module",e)}}function x(e,t){if(1&e){const e=i.RV6();i.j41(0,"div",15)(1,"div",1)(2,"div",2)(3,"div",16)(4,"div",17)(5,"div",18)(6,"input",19),i.mxI("ngModelChange",(function(t){i.eBV(e);const s=i.XpG();return i.DH7(s.searchmodule,t)||(s.searchmodule=t),i.Njj(t)})),i.k0s(),i.nrm(7,"system-icon",20),i.k0s(),i.j41(8,"div",21)(9,"ul",22)(10,"li",23),i.bIt("click",(function(){i.eBV(e);const t=i.XpG();return i.Njj(t.searchmodule="all")})),i.j41(11,"div",24)(12,"div",25),i.DNE(13,k,1,0,"system-utility-icon",26),i.k0s(),i.j41(14,"div",27)(15,"div",28),i.nrm(16,"system-label",29),i.k0s()()()(),i.DNE(17,I,7,2,"li",30),i.k0s()()()()()()()}if(2&e){const e=i.XpG();i.R7$(6),i.R50("ngModel",e.searchmodule),i.R7$(7),i.Y8G("ngIf","all"==e.searchmodule),i.R7$(4),i.Y8G("ngForOf",e.fts.loadedSearchModules)}}function j(e,t){if(1&e&&(i.j41(0,"div"),i.nrm(1,"system-label",41),i.k0s()),2&e){const e=t.$implicit;i.R7$(),i.Y8G("label",e.label)("nestedValues",e.nestedValues)}}function G(e,t){if(1&e&&(i.j41(0,"div",39),i.DNE(1,j,2,2,"div",40),i.k0s()),2&e){const e=i.XpG(2);i.R7$(),i.Y8G("ngForOf",e.searchTermErrors)}}function C(e,t){if(1&e&&(i.j41(0,"ul",33)(1,"li",34)(2,"span",35),i.nrm(3,"system-utility-icon",36),i.j41(4,"div",37),i.DNE(5,G,2,1,"div",38),i.k0s()()()()),2&e){const e=i.XpG();i.R7$(5),i.Y8G("ngIf",e.searchTermErrors)}}function w(e,t){if(1&e){const e=i.RV6();i.j41(0,"global-header-search-recent-items",42),i.bIt("selected",(function(t){i.eBV(e);const s=i.XpG();return i.Njj(s.selected(t))})),i.k0s()}}function S(e,t){if(1&e){const e=i.RV6();i.j41(0,"global-header-search-results-items",43),i.bIt("selected",(function(t){i.eBV(e);const s=i.XpG();return i.Njj(s.selected(t))})),i.k0s()}if(2&e){const e=i.XpG();i.Y8G("searchTerm",e.searchTerm)("searchResults",e.searchresults)}}const E=e=>({"slds-combobox-group":e}),L=e=>({"slds-combobox-addon_end":e}),D=e=>({"slds-is-open":e}),F=e=>({"slds-has-error":e});let M=(()=>{class GlobalHeaderSearch{quickLaunch(e){this.searchfield.element.nativeElement.focus()}get searchmodule(){return"all"==this._searchmodule?this.language.getLabel("LBL_ALL"):this.language.getModuleName(this._searchmodule)}set searchmodule(e){this._searchmodule=e,this.searchTerm&&this.showRecent&&this.executeSearch()}constructor(e,t,s,i,n,l,o,a){this.router=e,this.broadcast=t,this.fts=s,this.configuration=i,this.elementRef=n,this.renderer=l,this.userPreferences=o,this.language=a,this.showError=!1,this.isFocused=!1,this.showRecent=!1,this.searchTimeOut=void 0,this.searchTerm="",this.searchTermUntrimmed="",this._searchmodule="all",this.searchresults={hits:[],total:0}}get minNGram(){return this.configuration.getCapabilityConfig("search").min_ngram??3}get showModuleSelector(){return window.innerWidth>=768&&!this.userPreferences.toUse.globalHeaderCollapsed}onFocus(){this.showRecent=!0,this.isFocused=!0,this.clickListener=this.renderer.listen("document","click",(e=>this.onClick(e)))}closePopup(){this.clickListener(),this.showRecent=!1,this.searchTerm="",this.searchTermUntrimmed=""}doSearch(){this.searchTerm=this.searchTermUntrimmed.trim(),this.searchTerm.length&&this.searchTerm!==this.fts.searchTerm&&this.executeSearch()}executeSearch(){let e=[];this.showModuleSelector&&"all"!=this._searchmodule&&e.push(this._searchmodule),this.searchresults={hits:[],total:0},this.fts.searchByModules({searchterm:this.searchTerm,modules:e,size:10}).subscribe((e=>{for(let e of this.fts.moduleSearchresults)this.searchresults.hits=this.searchresults.hits.concat(e.data.hits),this.searchresults.total+=e.data.total.value;this.searchresults.hits.sort(((e,t)=>e._score>t._score?-1:1)),this.searchresults.hits=this.searchresults.hits.splice(0,10)}))}clearSearchTerm(){this.searchTimeOut&&window.clearTimeout(this.searchTimeOut),this.searchTerm="",this.searchTermUntrimmed="",this.fts.searchTerm=""}search(e){let t;switch(this.showRecent=!0,e.key){case"ArrowDown":case"ArrowUp":break;case"Enter":this.searchTerm=this.searchTermUntrimmed.trim(),t=this.fts.checkForSearchTermErrors(this.searchTerm),t?this.searchTermErrors=t:(this.searchTermErrors=void 0,this.searchTerm.length&&(this.searchTimeOut&&window.clearTimeout(this.searchTimeOut),this.showRecent=!1,this.searchTerm.length>0&&this.router.navigate(["/search/"+encodeURIComponent(btoa(this.searchTerm))])));break;default:this.searchTimeOut&&window.clearTimeout(this.searchTimeOut),t=this.fts.checkForSearchTermErrors(this.searchTermUntrimmed.trim()),t?""==this.searchTermUntrimmed.trim()?(this.searchTerm="",this.searchTermErrors=void 0):this.searchTimeOut=window.setTimeout((()=>this.searchTermErrors=t),1e3):(this.searchTermErrors=void 0,this.searchTimeOut=window.setTimeout((()=>this.doSearch()),1e3))}}onClick(e){this.elementRef.nativeElement.contains(e.target)||this.closePopup()}selected(e){this.showRecent=!1,this.clearSearchTerm()}onBlur(){window.setTimeout((()=>this.isFocused=!1),200)}static#e=this.ɵfac=function(e){return new(e||GlobalHeaderSearch)(i.rXU(l.Ix),i.rXU(o.m),i.rXU(n.s),i.rXU(a.i),i.rXU(i.aKT),i.rXU(i.sFG),i.rXU(r.S),i.rXU(d.B))};static#t=this.ɵcmp=i.VBU({type:GlobalHeaderSearch,selectors:[["global-header-search"]],viewQuery:function(e,t){if(1&e&&i.GBs(_,5,i.c1b),2&e){let e;i.mGM(e=i.lsd())&&(t.searchfield=e.first)}},hostBindings:function(e,t){1&e&&i.bIt("keydown.control.s",(function(){return t.quickLaunch()}),!1,i.EBC)},features:[i.Jv_([n.s])],decls:15,vars:17,consts:[[1,"slds-global-header__item_search",2,"min-width","15rem"],[1,"slds-form-element"],[1,"slds-form-element__control"],[1,"",3,"ngClass"],["class","slds-combobox_object-switcher slds-combobox-addon_start",4,"ngIf"],[1,"slds-combobox_container",3,"ngClass"],["role","combobox",1,"slds-combobox","slds-dropdown-trigger","slds-dropdown-trigger_click",3,"ngClass"],["role","none",1,"slds-is-relative","slds-combobox__form-element","slds-input-has-icon","slds-input-has-icon_left","slds-global-search__form-element",3,"ngClass"],["icon","search","addclasses","slds-input__icon slds-input__icon--left"],["role","textbox","type","search","system-placeholder","LBL_SEARCH_SPICE",1,"slds-input","slds-combobox__input",3,"ngModel","focus","blur","ngModelChange","keyup"],["searchfield",""],["role","listbox",1,"slds-dropdown","slds-dropdown_fluid"],["role","listbox",4,"ngIf"],[3,"selected",4,"ngIf"],[3,"searchTerm","searchResults","selected",4,"ngIf"],[1,"slds-combobox_object-switcher","slds-combobox-addon_start"],[1,"slds-combobox_container"],["system-dropdown-trigger","","role","combobox",1,"slds-combobox","slds-dropdown-trigger","slds-dropdown-trigger_click"],["role","none",1,"slds-combobox__form-element","slds-input-has-icon","slds-input-has-icon_right"],["type","text","readonly","","role","textbox",1,"slds-input","slds-combobox__input","slds-combobox__input-value",3,"ngModel","ngModelChange"],["icon","down","sprite","utility","size","x-small","addclasses","slds-icon_container slds-icon-utility-down slds-input__icon slds-input__icon_right"],[1,"slds-dropdown","slds-dropdown_x-small","slds-dropdown_left"],["role","group",1,"slds-listbox","slds-listbox_vertical"],["role","presentation",1,"slds-listbox__item",3,"click"],["role","option",1,"slds-media","slds-listbox__option","slds-listbox__option_plain","slds-media_small"],[1,"slds-media__figure","slds-listbox__option-icon"],["icon","check","size","x-small",4,"ngIf"],[1,"slds-media__body"],[1,"slds-truncate"],["label","LBL_ALL"],["role","presentation","class","slds-listbox__item",3,"click",4,"ngFor","ngForOf"],["icon","check","size","x-small"],[3,"module"],["role","listbox"],["role","presentation"],["role","option",1,"slds-lookup__item-action","slds-media","slds-media--center"],["icon","warning","size","small","colorclass","slds-icon-text-error"],[1,"slds-media__body","slds-p-left--x-small"],["class","slds-lookup__result-text",4,"ngIf"],[1,"slds-lookup__result-text"],[4,"ngFor","ngForOf"],[3,"label","nestedValues"],[3,"selected"],[3,"searchTerm","searchResults","selected"]],template:function(e,t){1&e&&(i.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),i.DNE(4,x,18,3,"div",4),i.j41(5,"div",5)(6,"div",6)(7,"div",7),i.nrm(8,"system-utility-icon",8),i.j41(9,"input",9,10),i.bIt("focus",(function(){return t.onFocus()}))("blur",(function(){return t.onBlur()})),i.mxI("ngModelChange",(function(e){return i.DH7(t.searchTermUntrimmed,e)||(t.searchTermUntrimmed=e),e})),i.bIt("keyup",(function(e){return t.search(e)})),i.k0s()(),i.j41(11,"div",11),i.DNE(12,C,6,1,"ul",12)(13,w,1,0,"global-header-search-recent-items",13)(14,S,1,2,"global-header-search-results-items",14),i.k0s()()()()()()()),2&e&&(i.R7$(3),i.Y8G("ngClass",i.eq3(9,E,t.showModuleSelector)),i.R7$(),i.Y8G("ngIf",t.showModuleSelector),i.R7$(),i.Y8G("ngClass",i.eq3(11,L,t.showModuleSelector)),i.R7$(),i.Y8G("ngClass",i.eq3(13,D,t.showRecent)),i.R7$(),i.Y8G("ngClass",i.eq3(15,F,t.searchTermErrors)),i.R7$(2),i.R50("ngModel",t.searchTermUntrimmed),i.R7$(3),i.Y8G("ngIf",t.searchTermErrors),i.R7$(),i.Y8G("ngIf",t.showRecent&&""===t.searchTerm),i.R7$(),i.Y8G("ngIf",""!==t.searchTerm&&!t.searchTermErrors))},dependencies:[c.YU,c.Sq,c.bT,u.me,u.BC,u.vS,m.q,h.m,g.J,p.W,f.r,b.B,y.V,v.C],encapsulation:2})}return GlobalHeaderSearch})()},81583:(e,t,s)=>{"use strict";s.d(t,{t:()=>y});var i=s(54438),n=s(35911),l=s(41731),o=s(57363),a=s(69904),r=s(83935),d=s(60177),c=s(15091),u=s(68823),m=s(44985),h=s(29895);const g=["global-header-search-recent-item",""];function p(e,t){if(1&e&&(i.j41(0,"span"),i.EFF(1),i.k0s()),2&e){const e=i.XpG();i.R7$(),i.JRh(e.model.data.summary_text)}}function f(e,t){if(1&e&&(i.j41(0,"li",8),i.nrm(1,"field-container",12),i.k0s()),2&e){const e=i.XpG().$implicit;i.R7$(),i.Y8G("field",e.field)("fieldconfig",e.fieldconfig)}}function b(e,t){if(1&e&&(i.qex(0),i.DNE(1,f,2,2,"li",11),i.bVm()),2&e){const e=t.$implicit,s=i.XpG();i.R7$(),i.Y8G("ngIf",s.model.getField(e.field))}}let y=(()=>{class GlobalHeaderSearchRecentItem{constructor(e,t,s,n,l){this.model=e,this.router=t,this.language=s,this.metadata=n,this.view=l,this.item={},this.selected=new i.bkB,this.view.displayLabels=!1}navigateTo(){this.selected.emit(!0),this.router.navigate(["/module/"+this.model.module+"/"+this.model.id])}gethref(){return"#/module/"+this.model.module+"/"+this.model.id}ngOnInit(){this.model.module=this.item.module_name,this.model.id=this.item.item_id,this.model.setData(this.item.data);let e=this.metadata.getComponentConfig("GlobalHeaderSearchResultsItem",this.model.module);this.mainfieldset=e.mainfieldset,e&&e.subfieldset&&(this.subfieldsetfields=this.metadata.getFieldSetItems(e.subfieldset))}static#e=this.ɵfac=function(e){return new(e||GlobalHeaderSearchRecentItem)(i.rXU(n.g),i.rXU(o.Ix),i.rXU(a.B),i.rXU(r.yu),i.rXU(l.U))};static#t=this.ɵcmp=i.VBU({type:GlobalHeaderSearchRecentItem,selectors:[["","global-header-search-recent-item",""]],hostBindings:function(e,t){1&e&&i.bIt("click",(function(){return t.navigateTo()}))},inputs:{item:"item"},outputs:{selected:"selected"},features:[i.Jv_([n.g,l.U])],attrs:g,decls:11,vars:6,consts:[["role","option",1,"slds-lookup__item-action","slds-media","slds-media--center"],["size","small",3,"module"],[1,"slds-media__body"],[1,"slds-lookup__result-text"],[4,"ngIf"],[3,"fieldset"],[1,"slds-lookup__result-meta","slds-text-body--small"],[1,"slds-list_horizontal","slds-has-dividers_right","slds-truncate"],[1,"slds-item"],[3,"module","singular"],[4,"ngFor","ngForOf"],["class","slds-item",4,"ngIf"],["fielddisplayclass","slds-truncate",3,"field","fieldconfig"]],template:function(e,t){1&e&&(i.j41(0,"span",0),i.nrm(1,"system-icon",1),i.j41(2,"div",2)(3,"div",3),i.DNE(4,p,2,1,"span",4),i.nrm(5,"object-record-fieldset-horizontal-list",5),i.k0s(),i.j41(6,"span",6)(7,"ul",7)(8,"li",8),i.nrm(9,"system-label-modulename",9),i.k0s(),i.DNE(10,b,2,1,"ng-container",10),i.k0s()()()()),2&e&&(i.R7$(),i.Y8G("module",t.model.module),i.R7$(3),i.Y8G("ngIf",!t.mainfieldset),i.R7$(),i.Y8G("fieldset",t.mainfieldset),i.R7$(4),i.Y8G("module",t.model.module)("singular",!0),i.R7$(),i.Y8G("ngForOf",t.subfieldsetfields))},dependencies:[d.Sq,d.bT,c.y,u.J,m.r,h.b],encapsulation:2})}return GlobalHeaderSearchRecentItem})()},27366:(e,t,s)=>{"use strict";s.d(t,{C:()=>y});var i=s(54438),n=s(69904),l=s(72541),o=s(57363),a=s(60177),r=s(68823),d=s(58461),c=s(32062),u=s(15059),m=s(81583);function h(e,t){if(1&e){const e=i.RV6();i.j41(0,"li",6),i.bIt("click",(function(){i.eBV(e);const t=i.XpG(2);return i.Njj(t.goRecent())})),i.j41(1,"span",7),i.nrm(2,"system-icon",8),i.j41(3,"div",9)(4,"div",10),i.nrm(5,"system-label",11),i.k0s()()()()}}function g(e,t){if(1&e){const e=i.RV6();i.j41(0,"li",12),i.bIt("selected",(function(){i.eBV(e);const t=i.XpG(2);return i.Njj(t.selected.emit(!0))})),i.k0s()}if(2&e){const e=t.$implicit;i.Y8G("item",e)}}function p(e,t){1&e&&(i.j41(0,"li")(1,"div",13)(2,"system-illustration-no-records"),i.nrm(3,"system-label",14),i.k0s()()())}function f(e,t){if(1&e&&(i.j41(0,"ul",2),i.DNE(1,h,6,0,"li",3)(2,g,1,1,"li",4)(3,p,4,0,"li",5),i.k0s()),2&e){const e=i.XpG();i.R7$(),i.Y8G("ngIf",e.recent.recentItems.length>0),i.R7$(),i.Y8G("ngForOf",e.recent.recentItems.slice(0,10)),i.R7$(),i.Y8G("ngIf",0==e.recent.recentItems.length)}}function b(e,t){1&e&&(i.j41(0,"ul",2)(1,"li",15),i.nrm(2,"system-searchresult-stencil"),i.k0s(),i.j41(3,"li",16),i.nrm(4,"system-searchresult-stencil"),i.k0s(),i.j41(5,"li",17),i.nrm(6,"system-searchresult-stencil"),i.k0s()())}let y=(()=>{class GlobalHeaderSearchRecentItems{constructor(e,t,s){this.language=e,this.recent=t,this.router=s,this.selected=new i.bkB,this.recentItems=[],this.isInitialized=!1,this.getRecent()}getRecent(){this.recent.getRecentItems()}goRecent(){this.selected.emit(!1),this.router.navigate(["/recent"])}static#e=this.ɵfac=function(e){return new(e||GlobalHeaderSearchRecentItems)(i.rXU(n.B),i.rXU(l._),i.rXU(o.Ix))};static#t=this.ɵcmp=i.VBU({type:GlobalHeaderSearchRecentItems,selectors:[["global-header-search-recent-items"]],outputs:{selected:"selected"},decls:3,vars:2,consts:[["role","listbox",4,"ngIf","ngIfElse"],["loading",""],["role","listbox"],["role","presentation",3,"click",4,"ngIf"],["global-header-search-recent-item","",3,"item","selected",4,"ngFor","ngForOf"],[4,"ngIf"],["role","presentation",3,"click"],["role","option",1,"slds-lookup__item-action","slds-media","slds-media--center"],["icon","breadcrumbs","size","small","sprite","utility"],[1,"slds-media__body"],[1,"slds-lookup__result-text"],["label","LBL_RECENTLYVIEWED"],["global-header-search-recent-item","",3,"item","selected"],[1,"slds-p-around--medium","slds-align--absolute-center"],["label","LBL_NO_RECENT_ITEMS"],[2,"opacity","1"],[2,"opacity","0.6"],[2,"opacity","0.2"]],template:function(e,t){if(1&e&&i.DNE(0,f,4,3,"ul",0)(1,b,7,0,"ng-template",null,1,i.C5r),2&e){const e=i.sdS(2);i.Y8G("ngIf",t.recent.isInitialized)("ngIfElse",e)}},dependencies:[a.Sq,a.bT,r.J,d.b,c.W,u.V,m.t],encapsulation:2})}return GlobalHeaderSearchRecentItems})()},28154:(e,t,s)=>{"use strict";s.d(t,{c:()=>y});var i=s(54438),n=s(41731),l=s(35911),o=s(57363),a=s(69904),r=s(83935),d=s(60177),c=s(15091),u=s(68823),m=s(44985),h=s(29895);const g=["global-header-search-results-item",""];function p(e,t){if(1&e&&(i.j41(0,"span"),i.EFF(1),i.k0s()),2&e){const e=i.XpG();i.R7$(),i.JRh(e.model.data.summary_text)}}function f(e,t){if(1&e&&(i.j41(0,"li",8),i.nrm(1,"field-container",12),i.k0s()),2&e){const e=i.XpG().$implicit;i.R7$(),i.Y8G("field",e.field)("fieldconfig",e.fieldconfig)}}function b(e,t){if(1&e&&(i.qex(0),i.DNE(1,f,2,2,"li",11),i.bVm()),2&e){const e=t.$implicit,s=i.XpG();i.R7$(),i.Y8G("ngIf",s.model.getField(e.field))}}let y=(()=>{class GlobalHeaderSearchResultsItem{set noNavigaton(e){this._noNavigaton=!1!==e}constructor(e,t,s,n,l){this.model=e,this.view=t,this.router=s,this.language=n,this.metadata=l,this.hit={},this.selected=new i.bkB,this._noNavigaton=!1,this.view.displayLabels=!1,this.view.displayLinks=!1}ngOnInit(){this.model.module=this.hit._type&&"_doc"!=this.hit._type?this.hit._type:this.hit._source._module,this.model.id=this.hit._id;let e=this.metadata.getComponentConfig("GlobalHeaderSearchResultsItem",this.model.module);this.mainfieldset=e.mainfieldset,e&&e.subfieldset&&(this.subfieldsetfields=this.metadata.getFieldSetItems(e.subfieldset)),this.model.setData(this.hit._source)}navigateTo(){this._noNavigaton?this.selected.emit(this.model):(this.selected.emit(!0),this.router.navigate(["/module/"+this.model.module+"/"+this.model.id]))}static#e=this.ɵfac=function(e){return new(e||GlobalHeaderSearchResultsItem)(i.rXU(l.g),i.rXU(n.U),i.rXU(o.Ix),i.rXU(a.B),i.rXU(r.yu))};static#t=this.ɵcmp=i.VBU({type:GlobalHeaderSearchResultsItem,selectors:[["","global-header-search-results-item",""]],hostBindings:function(e,t){1&e&&i.bIt("click",(function(){return t.navigateTo()}))},inputs:{hit:"hit",noNavigaton:[i.Mj6.None,"global-header-search-results-item-nonavigation","noNavigaton"]},outputs:{selected:"selected"},features:[i.Jv_([l.g,n.U])],attrs:g,decls:11,vars:6,consts:[["role","option",1,"slds-lookup__item-action","slds-media","slds-media--center"],["size","small",3,"module"],[1,"slds-media__body"],[1,"slds-lookup__result-text"],[4,"ngIf"],[3,"fieldset"],[1,"slds-lookup__result-meta","slds-text-body--small"],[1,"slds-list_horizontal","slds-has-dividers_right","slds-truncate"],[1,"slds-item"],[3,"module","singular"],[4,"ngFor","ngForOf"],["class","slds-item",4,"ngIf"],["fielddisplayclass","slds-truncate",3,"field","fieldconfig"]],template:function(e,t){1&e&&(i.j41(0,"span",0),i.nrm(1,"system-icon",1),i.j41(2,"div",2)(3,"div",3),i.DNE(4,p,2,1,"span",4),i.nrm(5,"object-record-fieldset-horizontal-list",5),i.k0s(),i.j41(6,"div",6)(7,"ul",7)(8,"li",8),i.nrm(9,"system-label-modulename",9),i.k0s(),i.DNE(10,b,2,1,"ng-container",10),i.k0s()()()()),2&e&&(i.R7$(),i.Y8G("module",t.model.module),i.R7$(3),i.Y8G("ngIf",!t.mainfieldset),i.R7$(),i.Y8G("fieldset",t.mainfieldset),i.R7$(4),i.Y8G("module",t.model.module)("singular",!0),i.R7$(),i.Y8G("ngForOf",t.subfieldsetfields))},dependencies:[d.Sq,d.bT,c.y,u.J,m.r,h.b],encapsulation:2})}return GlobalHeaderSearchResultsItem})()},11713:(e,t,s)=>{"use strict";s.d(t,{V:()=>k});var i=s(54438),n=s(57363),l=s(69904),o=s(65029),a=s(60177),r=s(68823),d=s(58461),c=s(32062),u=s(48717),m=s(15059),h=s(28154);function g(e,t){1&e&&i.nrm(0,"system-spinner",10),2&e&&i.Y8G("size",24)}function p(e,t){1&e&&i.nrm(0,"system-icon",11)}function f(e,t){if(1&e&&(i.j41(0,"span"),i.EFF(1),i.nrm(2,"system-label",12),i.EFF(3,")"),i.k0s()),2&e){const e=i.XpG();i.R7$(),i.SpI("(",e.searchResults.total," ")}}function b(e,t){1&e&&(i.qex(0),i.j41(1,"li",13),i.nrm(2,"system-searchresult-stencil"),i.k0s(),i.j41(3,"li",14),i.nrm(4,"system-searchresult-stencil"),i.k0s(),i.j41(5,"li",15),i.nrm(6,"system-searchresult-stencil"),i.k0s(),i.bVm())}function y(e,t){1&e&&(i.j41(0,"div",16)(1,"system-illustration-no-records"),i.nrm(2,"system-label",17),i.k0s()())}function v(e,t){if(1&e){const e=i.RV6();i.j41(0,"li",19),i.bIt("selected",(function(){i.eBV(e);const t=i.XpG(2);return i.Njj(t.selected.emit(!0))})),i.k0s()}if(2&e){const e=t.$implicit;i.Y8G("hit",e)}}function _(e,t){if(1&e&&(i.qex(0),i.DNE(1,v,1,1,"li",18),i.bVm()),2&e){const e=i.XpG();i.R7$(),i.Y8G("ngForOf",e.searchResults.hits)}}let k=(()=>{class GlobalHeaderSearchResultsItems{constructor(e,t,s){this.router=e,this.language=t,this.fts=s,this.searchTerm="",this.searchModule="",this.searchResults={hits:[],total:0},this.selected=new i.bkB}get searchModuleName(){return this.language.getLabel("LBL_INSPICECRM")}goSearch(){!this.fts.runningsearch&&this.searchTerm.length>0&&this.searchResults.total>0&&(this.selected.emit(!0),this.router.navigate(["/search/"+encodeURIComponent(btoa(this.searchTerm))]))}static#e=this.ɵfac=function(e){return new(e||GlobalHeaderSearchResultsItems)(i.rXU(n.Ix),i.rXU(l.B),i.rXU(o.s))};static#t=this.ɵcmp=i.VBU({type:GlobalHeaderSearchResultsItems,selectors:[["global-header-search-results-items"]],inputs:{searchTerm:"searchTerm",searchModule:"searchModule",searchResults:"searchResults"},outputs:{selected:"selected"},decls:13,vars:8,consts:[["role","listbox"],["role","presentation",3,"click"],["role","option",1,"slds-lookup__item-action","slds-media","slds-media--center"],["class","slds-p-right--x-small",3,"size",4,"ngIf"],["icon","search","size","small","sprite","utility",4,"ngIf"],[1,"slds-media__body"],[1,"slds-lookup__result-text"],["label","LBL_SEARCH"],[4,"ngIf"],["class","slds-align--absolute-center slds-p-around--small",4,"ngIf"],[1,"slds-p-right--x-small",3,"size"],["icon","search","size","small","sprite","utility"],["label","LBL_RECORDS"],[2,"opacity","1"],[2,"opacity","0.6"],[2,"opacity","0.2"],[1,"slds-align--absolute-center","slds-p-around--small"],["label","MSG_NO_RECORDS_FOUND"],["global-header-search-results-item","",3,"hit","selected",4,"ngFor","ngForOf"],["global-header-search-results-item","",3,"hit","selected"]],template:function(e,t){1&e&&(i.j41(0,"ul",0)(1,"li",1),i.bIt("click",(function(){return t.goSearch()})),i.j41(2,"span",2),i.DNE(3,g,1,1,"system-spinner",3)(4,p,1,0,"system-icon",4),i.j41(5,"div",5)(6,"div",6),i.nrm(7,"system-label",7),i.EFF(8),i.DNE(9,f,4,1,"span",8),i.k0s()()()(),i.DNE(10,b,7,0,"ng-container",8)(11,y,3,0,"div",9)(12,_,2,1,"ng-container",8),i.k0s()),2&e&&(i.R7$(3),i.Y8G("ngIf",t.fts.runningmodulesearch),i.R7$(),i.Y8G("ngIf",!t.fts.runningmodulesearch),i.R7$(4),i.Lme(' "',t.searchTerm,'" ',t.searchModuleName," "),i.R7$(),i.Y8G("ngIf",!t.fts.runningmodulesearch),i.R7$(),i.Y8G("ngIf",t.fts.runningmodulesearch),i.R7$(),i.Y8G("ngIf",!t.fts.runningmodulesearch&&0==t.searchResults.total),i.R7$(),i.Y8G("ngIf",!t.fts.runningmodulesearch))},dependencies:[a.Sq,a.bT,r.J,d.b,c.W,u.P,m.V,h.c],encapsulation:2})}return GlobalHeaderSearchResultsItems})()},83448:(e,t,s)=>{"use strict";s.d(t,{U:()=>u});var i=s(54438),n=s(83935),l=s(48849),o=s(40553),a=s(60177),r=s(10650);function d(e,t){if(1&e&&i.nrm(0,"system-dynamic-component",3),2&e){const e=i.XpG().$implicit;i.Y8G("component",e.component)("componentconfig",e.componentconfig)}}function c(e,t){if(1&e&&(i.qex(0),i.DNE(1,d,1,2,"system-dynamic-component",2),i.bVm()),2&e){const e=t.$implicit,s=i.XpG();i.R7$(),i.Y8G("ngIf",!s.userPreferences.toUse.globalHeaderCollapsed||!(null!=e.componentconfig&&e.componentconfig.hideInCollapsedHeader))}}let u=(()=>{class GlobalHeaderTools{constructor(e,t,s){this.metadata=e,this.userPreferences=t,this.broadcast=s,this.components=[],this.broadcast.message$.subscribe((e=>{this.handleMessage(e)}))}ngOnInit(){this.buildTools()}handleMessage(e){switch(e.messagetype){case"applauncher.setrole":case"loader.reloaded":this.buildTools()}}buildTools(){let e=this.metadata.getComponentConfig("GlobalHeaderTools");e.componentset&&(this.components=this.metadata.getComponentSetObjects(e.componentset))}static#e=this.ɵfac=function(e){return new(e||GlobalHeaderTools)(i.rXU(n.yu),i.rXU(l.S),i.rXU(o.m))};static#t=this.ɵcmp=i.VBU({type:GlobalHeaderTools,selectors:[["global-header-tools"]],decls:2,vars:1,consts:[[1,"slds-grid","slds-grid--vertical-align-center"],[4,"ngFor","ngForOf"],[3,"component","componentconfig",4,"ngIf"],[3,"component","componentconfig"]],template:function(e,t){1&e&&(i.j41(0,"div",0),i.DNE(1,c,2,1,"ng-container",1),i.k0s()),2&e&&(i.R7$(),i.Y8G("ngForOf",t.components))},dependencies:[a.Sq,a.bT,r.s],encapsulation:2})}return GlobalHeaderTools})()},76064:(e,t,s)=>{"use strict";s.d(t,{m:()=>b});var i=s(54438),n=s(83935),l=s(71692),o=s(53584),a=s(60177),r=s(70455),d=s(83448),c=s(45507),u=s(59397),m=s(28666);function h(e,t){1&e&&(i.j41(0,"div",6)(1,"div",7),i.nrm(2,"global-navigation-compact"),i.k0s()())}function g(e,t){1&e&&(i.j41(0,"div",8)(1,"div",9),i.nrm(2,"global-header-search"),i.k0s()())}function p(e,t){1&e&&(i.j41(0,"div",10)(1,"div",11),i.nrm(2,"global-header-tools")(3,"global-user"),i.k0s()())}const f=(e,t,s)=>({"slds-theme--error":e,"slds-theme--warning":t,"slds-theme--default":s});let b=(()=>{class GlobalHeaderTop{constructor(e,t,s){this.metadata=e,this.layout=t,this.configurationService=s}get showSearch(){return this.metadata.getActiveRole().showsearch&&"0"!=this.metadata.getActiveRole().showsearch}get isSmall(){return"small"==this.layout.screenwidth}static#e=this.ɵfac=function(e){return new(e||GlobalHeaderTop)(i.rXU(n.yu),i.rXU(l.Z),i.rXU(o.i))};static#t=this.ɵcmp=i.VBU({type:GlobalHeaderTop,selectors:[["global-header-top"]],decls:7,vars:8,consts:[[1,"slds-global-header","slds-grid","slds-grid--align-spread","slds-p-left--medium",3,"ngClass"],[1,"slds-show--large","slds-large-size--1-of-6"],[1,"slds-global-header__item","slds-p-left--none"],["class","slds-x-small-size--1-of-12",4,"ngIf"],["class","slds-x-small-size--11-of-12 slds-medium-size--4-of-6 slds-large-size--3-of-6",4,"ngIf"],["class","slds-medium-size--2-of-6 slds-large-size--1-of-6",4,"ngIf"],[1,"slds-x-small-size--1-of-12"],[1,"slds-global-header__item","slds-p-horizontal--none"],[1,"slds-x-small-size--11-of-12","slds-medium-size--4-of-6","slds-large-size--3-of-6"],[1,"slds-global-header__item"],[1,"slds-medium-size--2-of-6","slds-large-size--1-of-6"],[1,"slds-global-header__item","slds-grid","slds-grid--align-end","slds-grid--vertical-align-center"]],template:function(e,t){1&e&&(i.j41(0,"div",0)(1,"div",1)(2,"div",2),i.nrm(3,"global-header-image"),i.k0s()(),i.DNE(4,h,3,0,"div",3)(5,g,3,0,"div",4)(6,p,4,0,"div",5),i.k0s()),2&e&&(i.Y8G("ngClass",i.sMw(4,f,"recovery"==t.configurationService.data.startupMode,"maintenance"==t.configurationService.data.startupMode,"maintenance"!=t.configurationService.data.startupMode&&"recovery"!=t.configurationService.data.startupMode)),i.R7$(4),i.Y8G("ngIf",t.isSmall),i.R7$(),i.Y8G("ngIf",t.showSearch),i.R7$(),i.Y8G("ngIf",!t.isSmall))},dependencies:[a.YU,a.bT,r.d,d.U,c.p,u.j,m.K],encapsulation:2})}return GlobalHeaderTop})()},76642:(e,t,s)=>{"use strict";s.d(t,{s:()=>r});var i=s(54438),n=s(83935),l=s(71692),o=s(10650),a=s(32062);let r=(()=>{class GlobalHeaderTrialBar{constructor(e,t){this.metadata=e,this.layout=t}static#e=this.ɵfac=function(e){return new(e||GlobalHeaderTrialBar)(i.rXU(n.yu),i.rXU(l.Z))};static#t=this.ɵcmp=i.VBU({type:GlobalHeaderTrialBar,selectors:[["global-header-trial-bar"]],decls:6,vars:0,consts:[[1,"slds-trial-header","slds-theme--info","slds-grid","slds-grid--vertical-align-center"],[1,"slds-grid"],[1,"slds-button","slds-m-right_small"],["label","LBL_WELCOME_TO_SPICECRM"],[1,"slds-col_bump-left"],["component","SystemTenantHeaderBarValidity"]],template:function(e,t){1&e&&(i.j41(0,"div",0)(1,"div",1)(2,"button",2),i.nrm(3,"system-label",3),i.k0s()(),i.j41(4,"div",4),i.nrm(5,"system-dynamic-component",5),i.k0s()())},dependencies:[o.s,a.W],encapsulation:2})}return GlobalHeaderTrialBar})()},27533:(e,t,s)=>{"use strict";s.d(t,{R:()=>Q});var i=s(54438),n=s(18359),l=s(5220),o=s(83942),a=s(42919),r=s(54095),d=s(21626),c=s(53584),u=s(29994),m=s(41081),h=s(40553),g=s(345),p=s(50531),f=s(69904),b=s(60177),y=s(84341),v=s(32130),k=s(90154),R=s(25863),I=s(84359),x=s(68823),j=s(32062),G=s(71614),C=s(18521),w=s(38845),S=s(80329),E=s(72217),L=s(16535),D=s(11280),F=s(18122);const M=["twofactorinput"];function T(e,t){1&e&&i.nrm(0,"global-login-loading",2)}function B(e,t){1&e&&(i.j41(0,"div",33),i.nrm(1,"system-icon",34),i.j41(2,"h2"),i.nrm(3,"system-label",35),i.k0s()())}function $(e,t){1&e&&(i.j41(0,"div",36),i.nrm(1,"system-icon",34),i.j41(2,"h2"),i.nrm(3,"system-label",37),i.k0s()())}function O(e,t){if(1&e){const e=i.RV6();i.j41(0,"system-checkbox",44),i.mxI("ngModelChange",(function(t){i.eBV(e);const s=i.XpG(5);return i.DH7(s.rememberDevice,t)||(s.rememberDevice=t),i.Njj(t)})),i.nrm(1,"system-label",45),i.k0s()}if(2&e){const e=i.XpG(5);i.R50("ngModel",e.rememberDevice)}}function X(e,t){if(1&e){const e=i.RV6();i.j41(0,"div",38)(1,"div",39),i.nrm(2,"system-utility-icon",40),i.j41(3,"input",41,42),i.mxI("ngModelChange",(function(t){i.eBV(e);const s=i.XpG(4);return i.DH7(s.code2fa,t)||(s.code2fa=t),i.Njj(t)})),i.k0s()(),i.DNE(5,O,2,1,"system-checkbox",43),i.k0s()}if(2&e){const e=i.XpG(4);i.R7$(3),i.Y8G("disabled",e.loggingIn),i.R50("ngModel",e.code2fa),i.R7$(2),i.Y8G("ngIf",e.rememberDeviceVisible)}}function U(e,t){if(1&e){const e=i.RV6();i.j41(0,"form",16),i.bIt("submit",(function(){i.eBV(e);const t=i.XpG(3);return i.Njj(t.login())})),i.DNE(1,B,4,0,"div",17)(2,$,4,0,"div",18),i.j41(3,"div",19)(4,"div",20),i.nrm(5,"system-utility-icon",21),i.j41(6,"input",22),i.mxI("ngModelChange",(function(t){i.eBV(e);const s=i.XpG(3);return i.DH7(s.username,t)||(s.username=t),i.Njj(t)})),i.k0s()()(),i.j41(7,"div",19)(8,"div",20),i.nrm(9,"system-utility-icon",23),i.j41(10,"input",24),i.mxI("ngModelChange",(function(t){i.eBV(e);const s=i.XpG(3);return i.DH7(s.password,t)||(s.password=t),i.Njj(t)})),i.k0s()()(),i.DNE(11,X,6,3,"div",25),i.j41(12,"div",26)(13,"system-checkbox",27),i.mxI("ngModelChange",(function(t){i.eBV(e);const s=i.XpG(3);return i.DH7(s.keepMeLoggedIn,t)||(s.keepMeLoggedIn=t),i.Njj(t)})),i.nrm(14,"system-label",28),i.k0s()(),i.j41(15,"button",29),i.nrm(16,"system-label",30),i.k0s(),i.j41(17,"div",31)(18,"global-login-oauth2",32),i.bIt("token",(function(t){i.eBV(e);const s=i.XpG(3);return i.Njj(s.login(t))})),i.k0s()()()}if(2&e){const e=i.XpG(3);i.R7$(),i.Y8G("ngIf","recovery"==e.configuration.data.startupMode),i.R7$(),i.Y8G("ngIf","maintenance"==e.configuration.data.startupMode),i.R7$(4),i.Y8G("disabled",e.loggingIn),i.R50("ngModel",e.username),i.R7$(4),i.Y8G("disabled",e.loggingIn),i.R50("ngModel",e.password),i.R7$(),i.Y8G("ngIf",e.twoFactorAuthCodeRequired),i.R7$(2),i.R50("ngModel",e.keepMeLoggedIn),i.R7$(2),i.Y8G("disabled",e.loggingIn)}}function Y(e,t){1&e&&i.nrm(0,"system-button-icon",50),2&e&&i.Y8G("icon","chevrondown")("size","xx-small")}function N(e,t){1&e&&i.nrm(0,"system-button-icon",50),2&e&&i.Y8G("icon","chevronup")("size","xx-small")}function V(e,t){if(1&e){const e=i.RV6();i.j41(0,"div",46)(1,"div",47),i.EFF(2,"Forgot password"),i.k0s(),i.j41(3,"button",48),i.bIt("click",(function(){i.eBV(e);const t=i.XpG(3);return i.Njj(t.showForgotPassword())})),i.DNE(4,Y,1,2,"system-button-icon",49)(5,N,1,2,"system-button-icon",49),i.k0s()()}if(2&e){const e=i.XpG(3);i.R7$(3),i.Y8G("disabled",e.loggingIn),i.R7$(),i.Y8G("ngIf",!e.showForgotPass),i.R7$(),i.Y8G("ngIf",e.showForgotPass)}}function A(e,t){if(1&e){const e=i.RV6();i.j41(0,"global-login-forgot-password",51),i.bIt("close",(function(t){i.eBV(e);const s=i.XpG(3);return i.Njj(s.showForgotPass=!t)})),i.k0s()}}function P(e,t){if(1&e&&(i.j41(0,"div",11)(1,"div",12),i.DNE(2,U,19,9,"form",13)(3,V,6,3,"div",14)(4,A,1,0,"global-login-forgot-password",15),i.k0s()()),2&e){const e=i.XpG(2);i.Y8G("system-overlay-loading-spinner",e.loggingIn),i.R7$(),i.Y8G("system-overlay-loading-spinner",e.configuration.reloading),i.R7$(),i.Y8G("ngIf",!e.showForgotPass),i.R7$(),i.Y8G("ngIf",e.configuration.data.allowForgotPass),i.R7$(),i.Y8G("ngIf",e.showForgotPass)}}function z(e,t){1&e&&(i.qex(0),i.nrm(1,"system-loader-progress"),i.bVm())}function H(e,t){if(1&e&&i.nrm(0,"iframe",54),2&e){const e=i.XpG(3);i.Y8G("src",e.externalSidebarUrl,i.f$h)}}function q(e,t){1&e&&(i.qex(0),i.nrm(1,"global-newsfeed"),i.bVm())}function J(e,t){if(1&e&&(i.j41(0,"div",52),i.DNE(1,H,1,1,"iframe",53)(2,q,2,0,"ng-container",8),i.k0s()),2&e){const e=i.XpG(2);i.AVh("slds-scrollable--y",!e.showExternalSidebar),i.R7$(),i.Y8G("ngIf",e.showExternalSidebar),i.R7$(),i.Y8G("ngIf",e.showNewsfeed)}}const W=(e,t,s)=>({"slds-theme--error":e,"slds-theme--warning":t,"slds-theme--default":s});function K(e,t){if(1&e&&(i.j41(0,"div",3)(1,"div",4)(2,"div",5)(3,"div",6),i.nrm(4,"global-login-image"),i.k0s(),i.DNE(5,P,5,5,"div",7)(6,z,2,0,"ng-container",8),i.k0s(),i.j41(7,"div",9),i.nrm(8,"global-copyright"),i.k0s()(),i.DNE(9,J,3,4,"div",10),i.k0s()),2&e){const e=i.XpG();i.Y8G("ngClass",i.sMw(4,W,"recovery"==e.configuration.data.startupMode,"maintenance"==e.configuration.data.startupMode,"maintenance"!=e.configuration.data.startupMode&&"recovery"!=e.configuration.data.startupMode)),i.R7$(5),i.Y8G("ngIf",!e.loginService.session.authData.sessionId&&e.promptUser),i.R7$(),i.Y8G("ngIf",e.loginService.session.authData.sessionId),i.R7$(3),i.Y8G("ngIf",e.promptUser&&e.showSidebar)}}let Q=(()=>{class GlobalLogin{constructor(e,t,s,i,l,o,a,r,d,c,u){this.loginService=e,this.http=t,this.configuration=s,this.session=i,this.toast=l,this.broadcast=o,this.sanitizer=a,this.changeDetectorRef=r,this.modal=d,this.injector=c,this.language=u,this.twoFactorAuthCodeRequired=!1,this.promptUser=!1,this.username="",this.password="",this.keepMeLoggedIn=!1,this.rememberDevice=!1,this.rememberDeviceVisible=!1,this.showForgotPass=!1,this.externalSidebarUrl=null,this.loggingIn=!1,this.subscriptions=new n.yU,this.session.loadFromStorage(),this.session.authData.sessionId?(this.loginService.tokenObject={access_token:this.session.authData.sessionId},this.loginService.oauthIssuer="SpiceCRM",this.loginService.login(!1).subscribe({next:()=>{this.broadcast.broadcastMessage("login")},error:e=>{this.handleError(e),this.loginService.tokenObject=null,this.loginService.oauthIssuer=null,this.promptUser=!0}})):this.promptUser=!0,this.initializeNecessaryLanguageData(),this.load2FAConfig(),this.subscriptions=this.configuration.loaded$.subscribe((()=>{this.initializeNecessaryLanguageData(),this.load2FAConfig()}))}ngOnDestroy(){this.subscriptions.unsubscribe()}load2FAConfig(){const e=this.configuration.getCapabilityConfig("login")?.twofactor;window._.isEmpty(e)||(this.rememberDevice="device_change"==e.onlogin.enforced,this.rememberDeviceVisible=e.onlogin.trustenabled&&"always"!=e.onlogin.enforced)}initializeNecessaryLanguageData(){this.configuration.data.languages&&window._.isEmpty(this.language.languagedata?.applang)&&(this.language.languagedata.applang={},Object.keys(this.configuration.data.languages.required_labels).forEach((e=>{this.language.languagedata.applang[e]=this.configuration.data.languages.required_labels[e]})))}get showSidebar(){return!1!==this.configuration.data.displayloginsidebar&&window.innerWidth>=1024}get showExternalSidebar(){try{let e=!_.isEmpty(this.configuration.data.loginSidebarUrl);return e&&null===this.externalSidebarUrl&&(this.externalSidebarUrl=this.sanitizer.bypassSecurityTrustResourceUrl(this.configuration.data.loginSidebarUrl)),e}catch(e){return!1}}get showNewsfeed(){try{return!!this.configuration.initialized&&_.isEmpty(this.configuration.data.loginSidebarUrl)}catch(e){return!1}}get showProgressBar(){return this.configuration.data.loginProgressBar}handleResize(){this.changeDetectorRef.detectChanges()}login(e){(e||this.username&&this.password)&&(this.messageId&&this.toast.clearToast(this.messageId),this.toast.clearAll(),this.loggingIn=!0,e?(this.loginService.authData.userName=null,this.loginService.authData.password=null,this.loginService.tokenObject=e.tokenObject,this.loginService.oauthIssuer=e.issuer):(this.loginService.authData.rememberDevice=this.rememberDevice,this.loginService.authData.code2fa=this.code2fa,this.loginService.authData.userName=this.username,this.loginService.authData.password=this.password,this.loginService.authData.keepMeLoggedIn=this.keepMeLoggedIn,this.loginService.tokenObject=null,this.loginService.oauthIssuer=null),this.loginService.login().subscribe({next:()=>{this.toast.clearAll(),this.loggingIn=!1},error:e=>{this.handleError(e),this.loggingIn=!1}}))}showForgotPassword(){this.showForgotPass=!this.showForgotPass}handleError(e){switch(e.errorCode){case 1:this.messageId=this.toast.sendToast("error logging on with username and password","error");break;case 2:this.modal.openStaticModal(l.y,!0,this.injector).subscribe((e=>{e.instance.username=this.username,e.instance.password=this.password,e.instance.oldPasswordUserInputEnabled=!1}));break;case 3:this.messageId=this.toast.sendToast("invalid token","error");break;case 4:this.messageId=this.toast.sendToast(e.message,"success"),this.twoFactorAuthCodeRequired=!0,setTimeout((()=>{this.twofactorinput&&this.twofactorinput.element.nativeElement.focus()}));break;case 7:this.modal.openStaticModal(o.Y,!0,this.injector).subscribe((t=>{t.instance.methods=e.details?.methods,t.instance.credentials={username:this.username,password:this.password}}));break;case 12:this.modal.openStaticModal(a.C,!0,this.injector).subscribe((e=>{e.instance.credentials={username:this.username,password:this.password},this.code2fa=e.instance.code,this.twoFactorAuthCodeRequired=!0,e.instance.onValidationSuccess.subscribe((()=>this.login()))}));break;default:this.messageId=this.toast.sendToast("error logging on","error",e.message)}this.session.endSession()}static#e=this.ɵfac=function(e){return new(e||GlobalLogin)(i.rXU(r.B),i.rXU(d.Qq),i.rXU(c.i),i.rXU(u.d),i.rXU(m.o),i.rXU(h.m),i.rXU(g.up),i.rXU(i.gRc),i.rXU(p.y),i.rXU(i.zZn),i.rXU(f.B))};static#t=this.ɵcmp=i.VBU({type:GlobalLogin,selectors:[["global-login"]],viewQuery:function(e,t){if(1&e&&i.GBs(M,5,i.c1b),2&e){let e;i.mGM(e=i.lsd())&&(t.twofactorinput=e.first)}},hostBindings:function(e,t){1&e&&i.bIt("resize",(function(){return t.handleResize()}),!1,i.tSv)},decls:2,vars:2,consts:[["class","slds-size--1-of-1",4,"ngIf"],["class","slds-grid slds-wrap slds-is-absolute slds-size--1-of-1","style","height:100vh; top: 0px;",3,"ngClass",4,"ngIf"],[1,"slds-size--1-of-1"],[1,"slds-grid","slds-wrap","slds-is-absolute","slds-size--1-of-1",2,"height","100vh","top","0px",3,"ngClass"],[1,"slds-align--absolute-center","slds-size--1-of-1","slds-large-size--1-of-2"],[1,"slds-size--1-of-1","slds-medium-size--2-of-3","slds-p-around--medium",2,"max-width","500px"],[1,"slds-align--absolute-center","slds-p-vertical--medium"],["class","slds-box--border slds-theme--shade",3,"system-overlay-loading-spinner",4,"ngIf"],[4,"ngIf"],[1,"slds-is-absolute",2,"bottom","10px"],["class","slds-size--1-of-1 slds-large-size--1-of-2 slds-height_full",3,"slds-scrollable--y",4,"ngIf"],[1,"slds-box--border","slds-theme--shade",3,"system-overlay-loading-spinner"],[1,"slds-p-around--medium",3,"system-overlay-loading-spinner"],[3,"submit",4,"ngIf"],["class","slds-p-vertical--x-small slds-grid slds-grid--align-spread slds-grid_vertical-align-center",4,"ngIf"],["class","slds-col",3,"close",4,"ngIf"],[3,"submit"],["class","slds-notify slds-notify_alert slds-alert_error","role","alert",4,"ngIf"],["class","slds-notify slds-notify_alert slds-alert_warning","role","alert",4,"ngIf"],[1,"slds-form-element","slds-m-vertical--small"],[1,"slds-form-element__control","slds-input-has-icon","slds-input-has-icon_left"],["icon","user","addclasses","slds-input__icon slds-icon-text-default"],["type","text","name","username","autocomplete","","tabindex","1","system-placeholder","LBL_USER_NAME",1,"slds-input","slds-p-vertical--xx-small",3,"disabled","ngModel","ngModelChange"],["icon","lock","addclasses","slds-icon slds-input__icon slds-input__icon_left slds-icon-text-default"],["type","password","name","password","autocomplete","","tabindex","2","system-placeholder","LBL_PASSWORD",1,"slds-input","slds-p-vertical--xx-small","slds-theme--default",3,"disabled","ngModel","ngModelChange"],["class","slds-form-element slds-m-vertical--small slds-grid slds-grid--vertical-align-center",4,"ngIf"],[1,"slds-m-bottom--small"],["name","keep-me-logged-in","label","LBL_KEEP_ME_LOGGED_IN",3,"ngModel","ngModelChange"],["label","LBL_KEEP_ME_LOGGED_IN"],["type","submit","value","Submit","tabindex","0",1,"slds-button","slds-button--brand","slds-button_stretch",3,"disabled"],["label","LBL_LOGIN"],[1,"slds-p-top--small"],[1,"slds-size--1-of-1",3,"token"],["role","alert",1,"slds-notify","slds-notify_alert","slds-alert_error"],["icon","error","sprite","utility","addclasses","slds-m-right_x-small slds-icon-text-warning","divClass","slds-icon-utility-error"],["label","ERR_RECOVERY_MODE_ENABLED"],["role","alert",1,"slds-notify","slds-notify_alert","slds-alert_warning"],["label","ERR_MAINTENANCE_MODE_ENABLED"],[1,"slds-form-element","slds-m-vertical--small","slds-grid","slds-grid--vertical-align-center"],[1,"slds-form-element__control","slds-input-has-icon","slds-input-has-icon_left","slds-grow"],["icon","scan","addclasses","slds-icon slds-input__icon slds-input__icon_left slds-icon-text-default"],["type","text","name","code2fa","autocomplete","off","tabindex","2","system-placeholder","LBL_ENTER_CODE",1,"slds-input","slds-p-vertical--xx-small",3,"disabled","ngModel","ngModelChange"],["twofactorinput",""],["name","remember-device","class","slds-m-left--xx-small",3,"ngModel","ngModelChange",4,"ngIf"],["name","remember-device",1,"slds-m-left--xx-small",3,"ngModel","ngModelChange"],["label","LBL_REMEMBER_DEVICE"],[1,"slds-p-vertical--x-small","slds-grid","slds-grid--align-spread","slds-grid_vertical-align-center"],["title","Forgot password",1,"slds-truncate","slds-text-body_small"],[1,"slds-button",3,"disabled","click"],[3,"icon","size",4,"ngIf"],[3,"icon","size"],[1,"slds-col",3,"close"],[1,"slds-size--1-of-1","slds-large-size--1-of-2","slds-height_full"],["style","border:none;width:100%;height:100%",3,"src",4,"ngIf"],[2,"border","none","width","100%","height","100%",3,"src"]],template:function(e,t){1&e&&i.DNE(0,T,1,0,"global-login-loading",0)(1,K,10,8,"div",1),2&e&&(i.Y8G("ngIf",!t.configuration.initialized),i.R7$(),i.Y8G("ngIf",t.configuration.initialized))},dependencies:[b.YU,b.bT,y.qT,y.me,y.BC,y.cb,y.vS,y.cV,v.M,k.m,R.t,I.f,x.J,j.W,G.S,C.B,w.T,S.D,E.p,L.X,D.A,F.q],encapsulation:2})}return GlobalLogin})()},83942:(e,t,s)=>{"use strict";s.d(t,{Y:()=>v});var i=s(42919),n=s(54438),l=s(50531),o=s(49722),a=s(41081),r=s(27533),d=s(60177),c=s(84341),u=s(66589),m=s(32062),h=s(40713),g=s(25028),p=s(88418),f=s(83524);function b(e,t){if(1&e&&(n.j41(0,"span",11),n.EFF(1),n.k0s()),2&e){const e=n.XpG().$implicit;n.R7$(),n.SpI("(",e.address,")")}}function y(e,t){if(1&e){const e=n.RV6();n.j41(0,"system-input-radio",8),n.mxI("ngModelChange",(function(t){n.eBV(e);const s=n.XpG();return n.DH7(s.selectedMethod,t)||(s.selectedMethod=t),n.Njj(t)})),n.nrm(1,"system-label",9),n.DNE(2,b,2,1,"span",10),n.k0s()}if(2&e){const e=t.$implicit,s=n.XpG();n.R50("ngModel",s.selectedMethod),n.Y8G("value",e.value),n.R7$(),n.Y8G("label",e.label),n.R7$(),n.Y8G("ngIf",!!e.address)}}let v=(()=>{class GlobalLogin2FAMethodSelectModal{constructor(e,t,s,i,n){this.modal=e,this.injector=t,this.backend=s,this.toast=i,this.loginComponent=n,this.methods=[]}close(){this.self.destroy()}confirm(){switch(this.selectedMethod){case"one_time_password":this.modal.openStaticModal(i.C,!0,this.injector).subscribe((e=>{e.instance.credentials=this.credentials,e.instance.onValidationSuccess.subscribe((()=>{this.loginComponent.code2fa=e.instance.code,this.loginComponent.twoFactorAuthCodeRequired=!0,this.loginComponent.login(),this.close()}))}));break;case"sms":case"email":this.sendCode()}}sendCode(){const e=this.modal.await("LBL_SENDING");this.backend.postRequest(`authentication/2fa/${this.selectedMethod}/send`,null,this.credentials).subscribe({next:()=>{e.next(!0),e.complete(),this.toast.sendToast("LBL_SENT","success"),this.validateCode()},error:()=>{e.next(!0),e.complete(),this.toast.sendToast("ERR_FAILED_TO_EXECUTE","error")}})}validateCode(){this.modal.input("LBL_ENTER_CODE","LBL_CODE").subscribe((e=>{if(!e)return;const t=this.modal.await("LBL_VALIDATING");this.backend.postRequest(`authentication/2fa/${this.selectedMethod}/validate/${e}`,null,this.credentials).subscribe({next:()=>{t.next(!0),t.complete(),this.loginComponent.code2fa=e,this.loginComponent.twoFactorAuthCodeRequired=!0,this.loginComponent.login(),this.close()},error:()=>{t.next(!0),t.complete(),this.toast.sendToast("LBL_INVALID_CODE","error"),this.validateCode()}})}))}static#e=this.ɵfac=function(e){return new(e||GlobalLogin2FAMethodSelectModal)(n.rXU(l.y),n.rXU(n.zZn),n.rXU(o.H),n.rXU(a.o),n.rXU(r.R))};static#t=this.ɵcmp=n.VBU({type:GlobalLogin2FAMethodSelectModal,selectors:[["global-login-2fa-method-select-modal"]],decls:10,vars:2,consts:[["size","small"],[3,"close"],["label","LBL_SELECT_2FA_METHOD"],["name","select_2fa_method","class","spice-display-block",3,"ngModel","value","ngModelChange",4,"ngFor","ngForOf"],[1,"slds-button","slds-button--neutral",3,"click"],["label","LBL_CANCEL"],[1,"slds-button","slds-button--brand",3,"disabled","click"],["label","LBL_CONFIRM"],["name","select_2fa_method",1,"spice-display-block",3,"ngModel","value","ngModelChange"],[3,"label"],["class","slds-m-left--xx-small",4,"ngIf"],[1,"slds-m-left--xx-small"]],template:function(e,t){1&e&&(n.j41(0,"system-modal",0)(1,"system-modal-header",1),n.bIt("close",(function(){return t.close()})),n.nrm(2,"system-label",2),n.k0s(),n.j41(3,"system-modal-content"),n.DNE(4,y,3,4,"system-input-radio",3),n.k0s(),n.j41(5,"system-modal-footer")(6,"button",4),n.bIt("click",(function(){return t.close()})),n.nrm(7,"system-label",5),n.k0s(),n.j41(8,"button",6),n.bIt("click",(function(){return t.confirm()})),n.nrm(9,"system-label",7),n.k0s()()()),2&e&&(n.R7$(4),n.Y8G("ngForOf",t.methods),n.R7$(4),n.Y8G("disabled",!t.selectedMethod))},dependencies:[d.Sq,d.bT,c.BC,c.vS,u.J,m.W,h.D,g.I,p.Q,f.C],encapsulation:2})}return GlobalLogin2FAMethodSelectModal})()},5220:(e,t,s)=>{"use strict";s.d(t,{y:()=>F});var i=s(18359),n=s(54438),l=s(54095),o=s(21626),a=s(53584),r=s(41081),d=s(29994),c=s(69904),u=s(49722),m=s(27533),h=s(60177),g=s(84341),p=s(81086),f=s(32130),b=s(90154),y=s(40145),v=s(32062),_=s(40713),k=s(25028),R=s(88418),I=s(83524),x=s(18521);function j(e,t){if(1&e&&(n.j41(0,"div",19),n.nrm(1,"system-label",20),n.EFF(2,":"),n.nrm(3,"br"),n.EFF(4),n.k0s()),2&e){const e=n.XpG();n.R7$(4),n.SpI("",e.pwdGuideline," ")}}function G(e,t){if(1&e){const e=n.RV6();n.j41(0,"div",21)(1,"label",7),n.nrm(2,"system-label",22),n.k0s(),n.j41(3,"system-input-password",9),n.mxI("ngModelChange",(function(t){n.eBV(e);const s=n.XpG();return n.DH7(s.password,t)||(s.password=t),n.Njj(t)})),n.k0s()()}if(2&e){const e=n.XpG();n.R7$(3),n.R50("ngModel",e.password)}}function C(e,t){if(1&e&&(n.j41(0,"div",23),n.EFF(1),n.k0s()),2&e){const e=n.XpG();n.R7$(),n.JRh(e.pwderror)}}function w(e,t){if(1&e&&(n.j41(0,"div",23),n.EFF(1),n.k0s()),2&e){const e=n.XpG();n.R7$(),n.JRh(e.oldPwError)}}function S(e,t){if(1&e&&(n.j41(0,"div",23),n.EFF(1),n.k0s()),2&e){const e=n.XpG();n.R7$(),n.JRh(e.pwdreperror)}}function E(e,t){if(1&e){const e=n.RV6();n.j41(0,"div",24),n.nrm(1,"system-utility-icon",25),n.j41(2,"input",26),n.mxI("ngModelChange",(function(t){n.eBV(e);const s=n.XpG();return n.DH7(s.code2fa,t)||(s.code2fa=t),n.Njj(t)})),n.k0s()()}if(2&e){const e=n.XpG();n.R7$(2),n.R50("ngModel",e.code2fa)}}function L(e,t){if(1&e){const e=n.RV6();n.qex(0),n.j41(1,"button",27),n.bIt("click",(function(){n.eBV(e);const t=n.XpG();return n.Njj(t.setPassword())})),n.nrm(2,"system-label",28),n.k0s(),n.bVm()}if(2&e){const e=n.XpG();n.R7$(),n.Y8G("disabled",!e.canSavePwd)}}const D=e=>({"slds-has-error":e});let F=(()=>{class GlobalLoginChangePassword{constructor(e,t,s,n,l,o,a,r){this.loginService=e,this.http=t,this.configuration=s,this.toast=n,this.session=l,this.language=o,this.backend=a,this.loginComponent=r,this.pwdCheck=new RegExp("//"),this.isPosting=!1,this.isLoading=!1,this.subscriptions=new i.yU,this.oldPasswordUserInputEnabled=!0,this.twoFactorAuthCodeRequired=!1,this.buildGuidelineText()}get oldPwError(){return!(!this.oldPasswordUserInputEnabled||!this.password||this.password!=this.newPassword)&&this.getLabel("MSG_OLD_PWD_NOT_AS_NEW")}get pwderror(){return!(!this.newPassword||this.pwdCheck.test(this.newPassword))&&this.getLabel("MSG_PWD_NOT_LEGAL")}get pwdreperror(){return this.newPassword!=this.repeatPassword&&this.getLabel("MSG_PWDS_DONT_MATCH")}get canSavePwd(){return this.newPassword&&0==this.oldPwError&&0==this.pwderror&&0==this.pwdreperror&&!this.isPosting}close(e){e&&this.loginComponent&&(this.loginComponent.password=e,this.loginComponent.login()),this.self.destroy()}buildGuidelineText(){let e=this.configuration.getCapabilityConfig("userpassword");this.pwdCheck=new RegExp(e.regex);let t=[];e.onelower&&t.push(this.getLabel("LBL_ONE_LOWERCASE")),e.oneupper&&t.push(this.getLabel("LBL_ONE_UPPERCASE")),e.onenumber&&t.push(this.getLabel("LBL_ONE_DIGIT")),e.onespecial&&t.push(this.getLabel("LBL_ONE_SPECIALCHAR")),e.minpwdlength&&t.push(this.getLabel("LBL_MIN_LENGTH")+" "+e.minpwdlength),this.pwdGuideline=t.join(", ")}setPassword(){this.canSavePwd&&(this.isPosting=!0,this.subscriptions.add(this.backend.postRequest("authentication/changepassword",null,{username:this.username??this.session.authData.userName,password:this.password,newPassword:this.newPassword,code2fa:this.code2fa}).subscribe({next:e=>{this.toast.sendToast(this.getLabel("MSG_PWD_CHANGED_SUCCESSFULLY"),"success","",5),this.close(this.newPassword)},error:e=>{switch(e.error?.error?.errorCode){case"no2FACode":this.twoFactorAuthCodeRequired=!0,this.toast.sendToast(e.error.error.message,"success");break;case"invalid2FACode":this.toast.sendToast("MSG_INVALID_CODE","error")}this.isPosting=!1}})))}getLabel(e,t="default"){return this.language.getLabel(e,void 0,t)}ngOnDestroy(){this.subscriptions.unsubscribe()}static#e=this.ɵfac=function(e){return new(e||GlobalLoginChangePassword)(n.rXU(l.B),n.rXU(o.Qq),n.rXU(a.i),n.rXU(r.o),n.rXU(d.d),n.rXU(c.B),n.rXU(u.H),n.rXU(m.R,8))};static#t=this.ɵcmp=n.VBU({type:GlobalLoginChangePassword,selectors:[["global-login-change-password"]],inputs:{password:"password",username:"username",oldPasswordUserInputEnabled:"oldPasswordUserInputEnabled"},decls:25,vars:16,consts:[["size","small"],[3,"close"],["label","LBL_CHANGE_PASSWORD"],[3,"system-overlay-loading-spinner"],["class","slds-m-top--xx-small",4,"ngIf"],["class","slds-form-element slds-m-vertical--small",4,"ngIf"],[1,"slds-form-element","slds-m-vertical--small",3,"ngClass"],[1,"slds-form-element__label"],["label","LBL_NEW_PWD"],[3,"ngModel","ngModelChange"],["class","slds-form-element__help slds-text-color--error",4,"ngIf"],[1,"slds-form-element","slds-m-bottom--x-small",3,"ngClass"],["label","LBL_NEW_PWD_REPEATED"],["class","slds-m-top--medium slds-form-element__control slds-input-has-icon slds-input-has-icon_left slds-grow",4,"ngIf"],[1,"slds-grid","slds-grid--vertical-align-center","slds-grid--align-spread"],[1,"slds-grid","slds-col--bump-left"],[1,"slds-button","slds-button--neutral",3,"click"],["label","LBL_CANCEL"],[4,"ngIf"],[1,"slds-m-top--xx-small"],["label","LBL_PWD_GUIDELINE"],[1,"slds-form-element","slds-m-vertical--small"],["label","LBL_OLD_PWD"],[1,"slds-form-element__help","slds-text-color--error"],[1,"slds-m-top--medium","slds-form-element__control","slds-input-has-icon","slds-input-has-icon_left","slds-grow"],["icon","scan","addclasses","slds-icon slds-input__icon slds-input__icon_left slds-icon-text-default"],["type","text","name","code2fa","system-autofocus","","autocomplete","off","tabindex","2","system-placeholder","LBL_ENTER_CODE",1,"slds-input","slds-p-vertical--xx-small",3,"ngModel","ngModelChange"],[1,"slds-button","slds-button--brand",3,"disabled","click"],["label","LBL_SET_PASSWORD"]],template:function(e,t){1&e&&(n.j41(0,"system-modal",0)(1,"system-modal-header",1),n.bIt("close",(function(){return t.close()})),n.nrm(2,"system-label",2),n.k0s(),n.j41(3,"system-modal-content")(4,"div",3),n.DNE(5,j,5,1,"div",4)(6,G,4,1,"div",5),n.j41(7,"div",6)(8,"label",7),n.nrm(9,"system-label",8),n.k0s(),n.j41(10,"system-input-password",9),n.mxI("ngModelChange",(function(e){return n.DH7(t.newPassword,e)||(t.newPassword=e),e})),n.k0s(),n.DNE(11,C,2,1,"div",10)(12,w,2,1,"div",10),n.k0s(),n.j41(13,"div",11)(14,"label",7),n.nrm(15,"system-label",12),n.k0s(),n.j41(16,"system-input-password",9),n.mxI("ngModelChange",(function(e){return n.DH7(t.repeatPassword,e)||(t.repeatPassword=e),e})),n.k0s(),n.DNE(17,S,2,1,"div",10),n.k0s(),n.DNE(18,E,3,1,"div",13),n.k0s()(),n.j41(19,"system-modal-footer")(20,"div",14)(21,"div",15)(22,"button",16),n.bIt("click",(function(){return t.close()})),n.nrm(23,"system-label",17),n.k0s(),n.DNE(24,L,3,1,"ng-container",18),n.k0s()()()()),2&e&&(n.R7$(4),n.Y8G("system-overlay-loading-spinner",t.isLoading),n.R7$(),n.Y8G("ngIf",t.pwdGuideline),n.R7$(),n.Y8G("ngIf",t.oldPasswordUserInputEnabled),n.R7$(),n.Y8G("ngClass",n.eq3(12,D,t.pwderror||t.oldPwError)),n.R7$(3),n.R50("ngModel",t.newPassword),n.R7$(),n.Y8G("ngIf",""!=t.newPassword&&t.pwderror),n.R7$(),n.Y8G("ngIf",""!=t.newPassword&&t.oldPwError),n.R7$(),n.Y8G("ngClass",n.eq3(14,D,t.pwdreperror)),n.R7$(3),n.R50("ngModel",t.repeatPassword),n.R7$(),n.Y8G("ngIf",""!=t.repeatPassword&&t.pwdreperror),n.R7$(),n.Y8G("ngIf",t.twoFactorAuthCodeRequired),n.R7$(6),n.Y8G("ngIf",!t.isLoading))},dependencies:[h.YU,h.bT,g.me,g.BC,g.vS,p.a,f.M,b.m,y.B,v.W,_.D,k.I,R.Q,I.C,x.B],encapsulation:2})}return GlobalLoginChangePassword})()},16535:(e,t,s)=>{"use strict";s.d(t,{X:()=>b});var i=s(54438),n=s(21626),l=s(53584),o=s(41081),a=s(60177),r=s(84341),d=s(32130),c=s(18521);function u(e,t){if(1&e){const e=i.RV6();i.j41(0,"div",1)(1,"div",2)(2,"div",3),i.nrm(3,"system-utility-icon",4),i.j41(4,"input",5),i.mxI("ngModelChange",(function(t){i.eBV(e);const s=i.XpG();return i.DH7(s.emailOrUsername,t)||(s.emailOrUsername=t),i.Njj(t)})),i.k0s()()(),i.j41(5,"button",6),i.bIt("click",(function(){i.eBV(e);const t=i.XpG();return i.Njj(t.sendEmail())})),i.EFF(6,"Send"),i.k0s()()}if(2&e){const e=i.XpG();i.Y8G("system-overlay-loading-spinner",e.sending),i.R7$(3),i.Y8G("icon","email")("addclasses","slds-input__icon slds-icon-text-default"),i.R7$(),i.Y8G("disabled",e.sending),i.R50("ngModel",e.emailOrUsername),i.R7$(),i.Y8G("disabled",!e.emailOrUsernameValid||e.sending)}}function m(e,t){if(1&e&&(i.j41(0,"div",14),i.EFF(1," Password Guideline:"),i.nrm(2,"br"),i.EFF(3),i.k0s()),2&e){const e=i.XpG(2);i.R7$(3),i.SpI(" ",e.pwdGuideline," ")}}function h(e,t){if(1&e&&(i.j41(0,"div",15),i.EFF(1),i.k0s()),2&e){const e=i.XpG(2);i.R7$(),i.JRh(e.pwderror)}}function g(e,t){if(1&e&&(i.j41(0,"div",15),i.EFF(1),i.k0s()),2&e){const e=i.XpG(2);i.R7$(),i.JRh(e.pwdreperror)}}const p=e=>({"slds-has-error":e});function f(e,t){if(1&e){const e=i.RV6();i.j41(0,"div",1)(1,"form",7)(2,"div",2)(3,"div",3),i.nrm(4,"system-utility-icon",4),i.j41(5,"input",8),i.mxI("ngModelChange",(function(t){i.eBV(e);const s=i.XpG();return i.DH7(s.token,t)||(s.token=t),i.Njj(t)})),i.k0s()()(),i.DNE(6,m,4,1,"div",9),i.k0s(),i.j41(7,"form",7)(8,"div",10)(9,"div",3),i.nrm(10,"system-utility-icon",4),i.j41(11,"input",11),i.mxI("ngModelChange",(function(t){i.eBV(e);const s=i.XpG();return i.DH7(s.password,t)||(s.password=t),i.Njj(t)})),i.k0s()(),i.DNE(12,h,2,1,"div",12),i.k0s(),i.j41(13,"div",10)(14,"div",3),i.nrm(15,"system-utility-icon",4),i.j41(16,"input",13),i.mxI("ngModelChange",(function(t){i.eBV(e);const s=i.XpG();return i.DH7(s.repeatPassword,t)||(s.repeatPassword=t),i.Njj(t)})),i.k0s()(),i.DNE(17,g,2,1,"div",12),i.k0s(),i.j41(18,"button",6),i.bIt("click",(function(){i.eBV(e);const t=i.XpG();return i.Njj(t.resetPassword())})),i.EFF(19,"Reset Password"),i.k0s()()()}if(2&e){const e=i.XpG();i.Y8G("system-overlay-loading-spinner",e.sending),i.R7$(4),i.Y8G("icon","shield")("addclasses","slds-input__icon slds-icon-text-default"),i.R7$(),i.Y8G("disabled",e.sending),i.R50("ngModel",e.token),i.R7$(),i.Y8G("ngIf",e.pwdGuideline),i.R7$(2),i.Y8G("ngClass",i.eq3(19,p,e.pwderror)),i.R7$(2),i.Y8G("icon","lock")("addclasses","slds-input__icon slds-icon-text-default"),i.R7$(),i.Y8G("disabled",e.sending),i.R50("ngModel",e.password),i.R7$(),i.Y8G("ngIf",e.password&&e.pwderror),i.R7$(),i.Y8G("ngClass",i.eq3(21,p,e.pwdreperror)),i.R7$(2),i.Y8G("icon","lock")("addclasses","slds-input__icon slds-icon-text-default"),i.R7$(),i.Y8G("disabled",e.sending),i.R50("ngModel",e.repeatPassword),i.R7$(),i.Y8G("ngIf",e.repeatPassword&&e.pwdreperror),i.R7$(),i.Y8G("disabled",!e.canSendToken||e.sending)}}let b=(()=>{class GlobalLoginForgotPassword{constructor(e,t,s){this.http=e,this.configuration=t,this.toast=s,this.emailOrUsername="",this.token="",this.password=void 0,this.repeatPassword=void 0,this.pwdCheck=new RegExp("//"),this.tokenLength=6,this.sending=!1,this.display="email",this.close=new i.bkB,this.getInfo()}getInfo(){let e=this.configuration.getCapabilityConfig("userpassword");this.pwdCheck=new RegExp(e.regex);let t=[];e.onelower&&t.push("one lower case"),e.oneupper&&t.push("one upper case"),e.onenumber&&t.push("one number"),e.onespecial&&t.push("one special"),e.minpwdlength&&(t.push("minimum length "+e.minpwdlength),this.tokenLength=parseInt(e.minpwdlength,10)),this.pwdGuideline=t.join(", ")}get pwderror(){return!(!this.password||this.pwdCheck.test(this.password))&&"Password does not match the Guideline."}get pwdreperror(){return this.password!=this.repeatPassword&&"Inputs for the new Password does not match."}get emailOrUsernameValid(){return this.emailOrUsername&&this.emailOrUsername.length>0}sendEmail(){this.emailOrUsernameValid&&(this.activeToast&&this.toast.clearToast(this.activeToast),this.sending=!0,this.http.get(this.configuration.getBackendUrl()+`/authentication/passwordtoken/email/${this.emailOrUsername}`).subscribe((e=>{this.display="token",this.toast.sendToast("Successfully sent, check your inbox to get the token code","success"),this.sending=!1}),(e=>{this.activeToast=this.toast.sendToast("There was an error sending the token.","error","Please verify that the mail address or user name is correct - or contact a system administrator."),this.sending=!1})))}get canSendToken(){return this.token.length==this.tokenLength&&this.password&&!this.pwderror&&!this.pwdreperror}resetPassword(){this.canSendToken&&(this.activeToast&&this.toast.clearToast(this.activeToast),this.sending=!0,this.http.post(this.configuration.getBackendUrl()+`/authentication/passwordtoken/token/${this.token}`,{newPassword:this.password}).subscribe((e=>{this.close.emit(!0),this.sending=!1}),(e=>{this.activeToast=this.toast.sendToast("there was an error resetting your password","error","please contact a system administrator"),this.sending=!1})))}static#e=this.ɵfac=function(e){return new(e||GlobalLoginForgotPassword)(i.rXU(n.Qq),i.rXU(l.i),i.rXU(o.o))};static#t=this.ɵcmp=i.VBU({type:GlobalLoginForgotPassword,selectors:[["global-login-forgot-password"]],outputs:{close:"close"},decls:2,vars:2,consts:[[3,"system-overlay-loading-spinner",4,"ngIf"],[3,"system-overlay-loading-spinner"],[1,"slds-form-element","slds-m-vertical--small"],[1,"slds-form-element__control","slds-input-has-icon","slds-input-has-icon--left"],[3,"icon","addclasses"],["type","email","placeholder","Email address of your user account or your user name",1,"slds-input","slds-p-vertical--xx-small",3,"disabled","ngModel","ngModelChange"],[1,"slds-button","slds-button--brand","slds-button_stretch",3,"disabled","click"],["autocomplete","off"],["type","text","name","token","placeholder","Token that was sent via email",1,"slds-input","slds-p-vertical--xx-small",3,"disabled","ngModel","ngModelChange"],["class","slds-m-vertical--medium",4,"ngIf"],[1,"slds-form-element","slds-m-vertical--small",3,"ngClass"],["type","password","name","password","placeholder","enter new password",1,"slds-input","slds-p-vertical--xx-small",3,"disabled","ngModel","ngModelChange"],["class","slds-form-element__help slds-text-color--error",4,"ngIf"],["type","password","name","resetPassword","placeholder","repeat new password",1,"slds-input","slds-p-vertical--xx-small",3,"disabled","ngModel","ngModelChange"],[1,"slds-m-vertical--medium"],[1,"slds-form-element__help","slds-text-color--error"]],template:function(e,t){1&e&&i.DNE(0,u,7,6,"div",0)(1,f,20,23,"div",0),2&e&&(i.Y8G("ngIf","email"==t.display),i.R7$(),i.Y8G("ngIf","token"==t.display))},dependencies:[a.YU,a.bT,r.qT,r.me,r.BC,r.cb,r.vS,r.cV,d.M,c.B],encapsulation:2})}return GlobalLoginForgotPassword})()},11280:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});var i=s(18359),n=s(54438),l=s(345),o=s(53584);let a=(()=>{class GlobalLoginImage{constructor(e,t,s){this.sanitizer=e,this.configuration=t,this.cdRef=s,this.defaultImageUrl="config/loginimage",this.imageUrl=this.defaultImageUrl,this.subscriptions=new i.yU}ngAfterViewInit(){this.configuration.hasCapabilityConfig("theme")&&this.setImageUrl(),this.subscriptions.add(this.configuration.loaded$.subscribe((e=>{e&&this.setImageUrl()})))}ngOnDestroy(){this.subscriptions.unsubscribe()}setImageUrl(){this.configuration.getAsset("loginimage")?this.imageUrl=this.sanitizer.bypassSecurityTrustResourceUrl(this.configuration.getAsset("loginimage")):this.configuration.getCapabilityConfig("theme").login_image?this.imageUrl=this.sanitizer.bypassSecurityTrustResourceUrl("data:"+this.configuration.getCapabilityConfig("theme").login_image):this.imageUrl=this.defaultImageUrl,this.cdRef.detectChanges()}static#e=this.ɵfac=function(e){return new(e||GlobalLoginImage)(n.rXU(l.up),n.rXU(o.i),n.rXU(n.gRc))};static#t=this.ɵcmp=n.VBU({type:GlobalLoginImage,selectors:[["global-login-image"]],decls:1,vars:1,consts:[[2,"max-height","25vh",3,"src"]],template:function(e,t){1&e&&n.nrm(0,"img",0),2&e&&n.Y8G("src",t.imageUrl,n.B4B)},encapsulation:2})}return GlobalLoginImage})()},72217:(e,t,s)=>{"use strict";s.d(t,{p:()=>l});var i=s(54438),n=s(38845);let l=(()=>{class GlobalLoginLoading{static#e=this.ɵfac=function(e){return new(e||GlobalLoginLoading)};static#t=this.ɵcmp=i.VBU({type:GlobalLoginLoading,selectors:[["global-login-loading"]],decls:15,vars:0,consts:[[1,"slds-align--absolute-center","slds-size--1-of-1","slds-theme--default",2,"height","100vh"],[1,"slds-grid--vertical"],[1,"slds-text-align_center","slds-is-relative","slds-p-around--medium",2,"height","400px"],[1,"slds-p-around--small","slds-align--absolute-center","loader-logo-image"],["width","100%","height","auto","src","./config/loginimage"],[1,"loaderspinner"],["height","400","width","400",1,"bag"],["cx","200","cy","200","r","100","stroke-width","5","fill","none"],["height","400","width","400",1,"over"],["cx","200","cy","200","r","100","stroke-width","6","fill","none"],["id","loadstatus",1,"slds-text-align_center","slds-is-relative","slds-p-around--medium",2,"margin-top","-80px"],["id","loadermessage",1,"slds-text-align_center","slds-is-relative","slds-p-around--medium","slds-text-heading--medium","slds-text-color--error"],[1,"slds-is-absolute",2,"bottom","10px"]],template:function(e,t){1&e&&(i.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),i.nrm(4,"img",4),i.k0s(),i.j41(5,"div",5),i.qSk(),i.j41(6,"svg",6),i.nrm(7,"circle",7),i.k0s(),i.j41(8,"svg",8),i.nrm(9,"circle",9),i.k0s()()(),i.joV(),i.j41(10,"div",10),i.EFF(11,"...connecting..."),i.k0s(),i.nrm(12,"div",11),i.k0s(),i.j41(13,"div",12),i.nrm(14,"global-copyright"),i.k0s()())},dependencies:[n.T],encapsulation:2})}return GlobalLoginLoading})()},18122:(e,t,s)=>{"use strict";s.d(t,{q:()=>d});var i=s(54438),n=s(18359),l=s(53584),o=s(40553),a=s(54095);function r(e,t){if(1&e&&i.nrm(0,"global-login-oauth2-button",1),2&e){const e=t.$implicit,s=i.XpG();i.Y8G("service",e)("authenticatedUser",s.authenticatedUser)}}let d=(()=>{class GlobalLoginOAuth2{constructor(e,t,s){this.configuration=e,this.broadcast=t,this.loginService=s,this.services=[],this.subscription=new n.yU,this.token=new i.bkB,this.subscribeToBroadcast()}set setSingleIssuer(e){e&&(this.services=[this.services.find((t=>e==t.issuer))])}ngOnDestroy(){this.subscription.unsubscribe()}loadServices(){const e=this.configuration.getCapabilityConfig("oauth2");Array.isArray(e)&&(this.services=e.map((e=>{const t={...e};return t.config=JSON.parse(t.config),t})))}subscribeToBroadcast(){this.subscription.add(this.configuration.loaded$.subscribe((e=>{e&&this.loadServices()})))}static#e=this.ɵfac=function(e){return new(e||GlobalLoginOAuth2)(i.rXU(l.i),i.rXU(o.m),i.rXU(a.B))};static#t=this.ɵcmp=i.VBU({type:GlobalLoginOAuth2,selectors:[["global-login-oauth2"]],inputs:{authenticatedUser:"authenticatedUser",setSingleIssuer:[i.Mj6.None,"issuer","setSingleIssuer"]},outputs:{token:"token"},decls:1,vars:1,consts:[[3,"service","authenticatedUser",4,"ngFor","ngForOf"],[3,"service","authenticatedUser"]],template:function(e,t){1&e&&i.DNE(0,r,1,2,"global-login-oauth2-button",0),2&e&&i.Y8G("ngForOf",t.services)},encapsulation:2})}return GlobalLoginOAuth2})()},45184:(e,t,s)=>{"use strict";s.d(t,{K:()=>a});var i=s(54438),n=s(83935),l=s(91175),o=s(18063);let a=(()=>{class GlobalNavigation{constructor(e){this.metadata=e}static#e=this.ɵfac=function(e){return new(e||GlobalNavigation)(i.rXU(n.yu))};static#t=this.ɵcmp=i.VBU({type:GlobalNavigation,selectors:[["global-navigation"]],decls:3,vars:0,consts:[[1,"slds-context-bar"],["role","navigation",1,"slds-context-bar__secondary"]],template:function(e,t){1&e&&(i.j41(0,"div",0),i.nrm(1,"global-app-launcher")(2,"global-navigation-menu",1),i.k0s())},dependencies:[l.Z,o.$],encapsulation:2})}return GlobalNavigation})()},45507:(e,t,s)=>{"use strict";s.d(t,{p:()=>S});var i=s(54438),n=s(35911),l=s(18359),o=s(96697),a=s(83935),r=s(69904),d=s(54095),c=s(60968),u=s(17266),m=s(72541),h=s(29994),g=s(50531),p=s(40553),f=s(57363),b=s(60177),y=s(84341),v=s(25863),_=s(68823),k=s(44985),R=s(18521);const I=["containermiddle"],x=["containerbottom"],j=["menucontainer"];function G(e,t){if(1&e){const e=i.RV6();i.j41(0,"div",33)(1,"div",34),i.nrm(2,"system-icon",35),i.j41(3,"a",36)(4,"span",37),i.nrm(5,"system-label-modulename",38),i.k0s()()(),i.j41(6,"ul",39),i.bIt("click",(function(){i.eBV(e);const t=i.XpG();return i.Njj(t.closeMenu())})),i.eu8(7,null,40),i.k0s()()}if(2&e){const e=i.XpG();i.R7$(2),i.Y8G("module",e.activeItem),i.R7$(3),i.Y8G("module",e.activeItem)}}function C(e,t){if(1&e){const e=i.RV6();i.j41(0,"div",41),i.bIt("click",(function(){const t=i.eBV(e).$implicit,s=i.XpG();return i.Njj(s.navigateTo(t))})),i.nrm(1,"system-icon",35),i.j41(2,"a",36)(3,"span",42),i.nrm(4,"system-label-modulename",38),i.k0s()()()}if(2&e){const e=t.$implicit;i.R7$(),i.Y8G("module",e),i.R7$(3),i.Y8G("module",e)}}function w(e,t){if(1&e&&(i.j41(0,"option",43),i.EFF(1),i.k0s()),2&e){const e=t.$implicit;i.Y8G("value",e.language),i.R7$(),i.SpI(" ",e.text," ")}}let S=(()=>{class GlobalNavigationCompact{constructor(e,t,s,i,n,o,a,r,d,c,u,m){this.metadata=e,this.language=t,this.loginService=s,this.navigation=i,this.favorite=n,this.model=o,this.recent=a,this.session=r,this.modal=d,this.cdr=c,this.broadcast=u,this.router=m,this.showmenu=!1,this.menuitems=[],this.activeItem="",this.activeItemMenu=[],this.activeItemMenucomponents=[],this.subscriptions=new l.yU,this.buildMenuItems();let h=this.navigation.activeModule$.subscribe((e=>this.buildModuleMenuItems()));this.subscriptions.add(h);let g=this.broadcast.message$.subscribe((e=>{this.handleMessage(e)}));this.subscriptions.add(g)}get activeItemIsModule(){return!!this.metadata.getModuleDefs(this.activeItem)}set currentlanguage(e){this.language.currentlanguage=e,this.language.loadLanguage()}get currentlanguage(){return this.language.currentlanguage}get menuItems(){return this.menuitems.filter((e=>e!=this.activeItem))}get activeRoleName(){let e=this.metadata.getActiveRole();return e.label&&""!=e.label?this.language.getLabel(e.label):this.metadata.getActiveRole().name}get containerMiddleStyle(){return{height:`calc(100vh - ${this.containermiddle.element.nativeElement.offsetTop+this.containerbottom.element.nativeElement.offsetHeight}px)`}}get menuStyle(){return{left:this.showmenu?"0px":"-250px","box-shadow":this.showmenu?"5px 0 15px #888":"none"}}ngAfterViewInit(){this.buildModuleMenuItems(),this.cdr.detectChanges()}handleMessage(e){switch(e.messagetype){case"applauncher.setrole":case"loader.reloaded":this.buildMenuItems()}}navigateTo(e){this.router.navigate(["/module/"+e]),this.showmenu=!1}buildMenuItems(){this.menuitems=[];let e=this.metadata.getRoleModules(!0);for(let t of e)this.menuitems.push(t)}buildModuleMenuItems(){this.activeItem=this.navigation.activeModule,this.destroyActiveItemMenu(),this.activeItemMenu=[],this.activeItemIsModule&&this.menucontainer&&(this.model.module=this.activeItem,this.activeItemMenu=this.metadata.getModuleMenu(this.activeItem),this.buildActiveItemMenu())}showAppLauncher(){this.showmenu=!1,this.modal.openModal("GlobalAppLauncherDialog")}getAvialableLanguages(){return this.language.getAvialableLanguages(!0)}toggleMenu(){this.showmenu=!this.showmenu}closeMenu(){this.showmenu=!1}logout(){this.loginService.logout()}trackByFn(e,t){return t.id}buildActiveItemMenu(){for(let e of this.activeItemMenu)switch(e.action){case"NEW":this.metadata.checkModuleAcl(this.activeItem,"create")&&this.metadata.addComponent("GlobalNavigationMenuItemNew",this.menucontainer).pipe((0,o.s)(1)).subscribe((e=>{this.activeItemMenucomponents.push(e)}));break;case"ROUTE":this.metadata.addComponent("GlobalNavigationMenuItemRoute",this.menucontainer).pipe((0,o.s)(1)).subscribe((t=>{t.instance.actionconfig=e.actionconfig,this.activeItemMenucomponents.push(t)}))}}destroyActiveItemMenu(){for(let e of this.activeItemMenucomponents)e.destroy()}ngOnDestroy(){this.subscriptions.unsubscribe(),this.destroyActiveItemMenu(),this.cdr.detach()}static#e=this.ɵfac=function(e){return new(e||GlobalNavigationCompact)(i.rXU(a.yu),i.rXU(r.B),i.rXU(d.B),i.rXU(c.L),i.rXU(u.B),i.rXU(n.g),i.rXU(m._),i.rXU(h.d),i.rXU(g.y),i.rXU(i.gRc),i.rXU(p.m),i.rXU(f.Ix))};static#t=this.ɵcmp=i.VBU({type:GlobalNavigationCompact,selectors:[["global-navigation-compact"]],viewQuery:function(e,t){if(1&e&&(i.GBs(I,7,i.c1b),i.GBs(x,7,i.c1b),i.GBs(j,7,i.c1b)),2&e){let e;i.mGM(e=i.lsd())&&(t.containermiddle=e.first),i.mGM(e=i.lsd())&&(t.containerbottom=e.first),i.mGM(e=i.lsd())&&(t.menucontainer=e.first)}},features:[i.Jv_([n.g])],decls:35,vars:10,consts:[[1,"slds-button","slds-button--icon",3,"click"],["icon","rows","size","small"],[1,"slds-is-absolute","slds-theme--shade",2,"width","250px","top","0","z-index","998","height","100vh","transition","left 1s",3,"ngStyle"],[1,"slds-grid","slds-grid--align-spread","slds-grid--vertical-align-start","slds-p-around--x-small"],[1,"slds-grid","slds-grid--vertical-align-center"],[2,"transform","scale(0.8)",3,"click"],["href","javascript:void(0);",1,"slds-icon-waffle_container"],[1,"slds-icon-waffle"],[1,"slds-r1"],[1,"slds-r2"],[1,"slds-r3"],[1,"slds-r4"],[1,"slds-r5"],[1,"slds-r6"],[1,"slds-r7"],[1,"slds-r8"],[1,"slds-r9"],[1,"slds-truncate","slds-p-left--xx-small","slds-text-heading_small"],["icon","close"],["class","slds-theme--default slds-p-vertical--x-small",4,"ngIf"],[1,"slds-grid",3,"ngStyle"],["containermiddle",""],[1,"slds-has-divider--bottom-space","slds-scrollable--y","spice-scrollbar",2,"width","100%"],["class","slds-grid slds-grid--vertical-align-center slds-p-vertical--x-small  slds-p-left--small",3,"click",4,"ngFor","ngForOf","ngForTrackBy"],[1,"slds-grid","slds-grid--vertical-align-center","slds-p-around--xx-small"],["containerbottom",""],[1,"slds-form-element","slds-grow"],[1,"slds-form-element__control"],[1,"slds-select_container"],[1,"slds-select",3,"disabled","ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[1,"slds-grid","slds-grid--align-end","slds-p-horizontal--small","slds-col--bump-left"],["icon","logout","size","x-small",3,"title","click"],[1,"slds-theme--default","slds-p-vertical--x-small"],[1,"slds-grid","slds-grid--vertical-align-center","slds-p-left--small","slds-p-vertical--xx-small"],["size","x-small","divClass","",3,"module"],["href","javascript:void(0);",1,"slds-p-left--small","slds-text-heading_small"],[1,"slds-truncate",2,"font-weight","bold"],[3,"module"],["role","menu",3,"click"],["menucontainer",""],[1,"slds-grid","slds-grid--vertical-align-center","slds-p-vertical--x-small","slds-p-left--small",3,"click"],[1,"slds-truncate"],[3,"value"]],template:function(e,t){1&e&&(i.j41(0,"button",0),i.bIt("click",(function(){return t.toggleMenu()})),i.nrm(1,"system-utility-icon",1),i.k0s(),i.j41(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5),i.bIt("click",(function(){return t.showAppLauncher()})),i.j41(6,"a",6)(7,"div",7),i.nrm(8,"div",8)(9,"div",9)(10,"div",10)(11,"div",11)(12,"div",12)(13,"div",13)(14,"div",14)(15,"div",15)(16,"div",16),i.k0s()()(),i.j41(17,"div",17),i.EFF(18),i.k0s()(),i.j41(19,"button",0),i.bIt("click",(function(){return t.closeMenu()})),i.nrm(20,"system-button-icon",18),i.k0s()(),i.DNE(21,G,9,2,"div",19),i.j41(22,"div",20,21)(24,"div",22),i.DNE(25,C,5,2,"div",23),i.k0s()(),i.j41(26,"div",24,25)(28,"div",26)(29,"div",27)(30,"div",28)(31,"select",29),i.mxI("ngModelChange",(function(e){return i.DH7(t.currentlanguage,e)||(t.currentlanguage=e),e})),i.DNE(32,w,2,2,"option",30),i.k0s()()()(),i.j41(33,"div",31)(34,"system-utility-icon",32),i.bIt("click",(function(){return t.logout()})),i.k0s()()()()),2&e&&(i.R7$(2),i.Y8G("ngStyle",t.menuStyle),i.R7$(16),i.JRh(t.activeRoleName),i.R7$(3),i.Y8G("ngIf",t.activeItemIsModule),i.R7$(),i.Y8G("ngStyle",t.containerMiddleStyle),i.R7$(3),i.Y8G("ngForOf",t.menuItems)("ngForTrackBy",t.trackByFn),i.R7$(6),i.Y8G("disabled",t.getAvialableLanguages().length<=1),i.R50("ngModel",t.currentlanguage),i.R7$(),i.Y8G("ngForOf",t.getAvialableLanguages()),i.R7$(2),i.Y8G("title",t.language.getLabel("LBL_LOGOFF")))},dependencies:[b.Sq,b.bT,b.B3,y.xH,y.y7,y.wz,y.BC,y.vS,v.t,_.J,k.r,R.B],encapsulation:2})}return GlobalNavigationCompact})()},91175:(e,t,s)=>{"use strict";s.d(t,{Z:()=>d});var i=s(54438),n=s(83935),l=s(40553),o=s(60968);const a=["menucontainer"],r=["morecontainer"];let d=(()=>{class GlobalNavigationMenu{constructor(e,t,s,i){this.metadata=e,this.elementRef=t,this.broadcast=s,this.navigation=i,this.moreComponentRef=void 0,this.menuItems=[],this.renderedItems=[],this.moreItems=[],this.movingActive=!1,this.rendering=!1,this.resizeTimeOut=void 0,this.broadcast.message$.subscribe((e=>{this.handleMessage(e)})),this.navigation.activeModule$.subscribe((e=>this.checkActiveModule()))}ngAfterViewInit(){this.buildMenuItems(),this.renderMenu()}buildMenuItems(){this.menuItems=[];let e=this.metadata.getRoleModules(!0);for(let t of e)this.menuItems.push(t)}handleResize(){this.buildMenuItems(),this.resizeTimeOut&&window.clearTimeout(this.resizeTimeOut),this.resizeTimeOut=window.setTimeout((()=>this.renderMenu()),250)}checkActiveModule(){if(this.movingActive||this.rendering)return!1;let e=this.menuItems.indexOf(this.navigation.activeModule),t=!1;for(let e of this.renderedItems)if(e.module==this.navigation.activeModule){t=!0;break}if(!t&&0!=e&&e+1>this.renderedItems.length){let t=this.menuItems.splice(e,1),s=this.renderedItems.pop();return s&&(s.componentRef.destroy(),this.menuItems.splice(this.renderedItems.length,0,t[0]),this.movingActive=!0,this.destroyMoreItem(),this.addMenuItem(this.menuItems[this.renderedItems.length],this.menuItems[this.renderedItems.length])),!1}return!0}destroyMenu(){for(let e of this.renderedItems)e.componentRef.destroy();this.renderedItems=[],this.destroyMoreItem(),this.movingActive=!1}renderMenu(){this.destroyMenu(),this.rendering=!0,this.addMenuItem(this.menuItems[0],this.menuItems[0])}addMenuItem(e,t){this.metadata.addComponentDirect("GlobalNavigationMenuItem",this.menucontainer).subscribe((s=>{s.instance.item={module:e,name:t},this.renderedItems.push({module:e,componentRef:s})}))}addMoreItem(){this.destroyMoreItem(),this.metadata.addComponentDirect("GlobalNavigationMenuMore",this.menucontainer).subscribe((e=>{this.moreItems=[];let t=this.renderedItems.length;for(;t<this.menuItems.length;)this.moreItems.push(this.menuItems[t]),t++;e.instance.moreMenuItems=this.moreItems,this.moreComponentRef={componentRef:e}}))}destroyMoreItem(){this.moreComponentRef&&(this.moreComponentRef.componentRef.destroy(),this.moreComponentRef=void 0)}getRenderedWidth(){let e=0;for(let t of this.renderedItems)e+=t.width;return e}handleMessage(e){switch(e.messagetype){case"applauncher.setrole":case"loader.reloaded":this.buildMenuItems(),this.renderMenu();break;case"navigation.itemadded":for(let t of this.renderedItems)t.module===e.messagedata.module&&(t.width=e.messagedata.width);let t=this.getRenderedWidth();if(this.movingActive)this.elementRef.nativeElement.offsetWidth,this.movingActive=!1,this.addMoreItem();else if(t>this.elementRef.nativeElement.offsetWidth){this.renderedItems.pop().componentRef.destroy(),this.menuItems.length>this.renderedItems.length?this.addMoreItem():this.rendering=!1}else this.menuItems.length>this.renderedItems.length&&this.addMenuItem(this.menuItems[this.renderedItems.length],this.menuItems[this.renderedItems.length]);break;case"navigation.moreadded":if(this.moreComponentRef.width=e.messagedata.width,this.renderedItems.length>0&&this.getRenderedWidth()+e.messagedata.width>this.elementRef.nativeElement.offsetWidth){this.renderedItems.pop().componentRef.destroy(),this.checkActiveModule()&&this.addMoreItem()}}}static#e=this.ɵfac=function(e){return new(e||GlobalNavigationMenu)(i.rXU(n.yu),i.rXU(i.aKT),i.rXU(l.m),i.rXU(o.L))};static#t=this.ɵcmp=i.VBU({type:GlobalNavigationMenu,selectors:[["global-navigation-menu"]],viewQuery:function(e,t){if(1&e&&(i.GBs(a,7,i.c1b),i.GBs(r,7,i.c1b)),2&e){let e;i.mGM(e=i.lsd())&&(t.menucontainer=e.first),i.mGM(e=i.lsd())&&(t.morecontainer=e.first)}},hostBindings:function(e,t){1&e&&i.bIt("resize",(function(){return t.handleResize()}),!1,i.tSv)},decls:5,vars:0,consts:[[1,"slds-grid"],["menucontainer",""],["morecontainer",""]],template:function(e,t){1&e&&(i.j41(0,"ul",0),i.nrm(1,"div",null,1)(3,"div",null,2),i.k0s())},encapsulation:2})}return GlobalNavigationMenu})()},67515:(e,t,s)=>{"use strict";s.d(t,{l:()=>r});var i=s(54438),n=s(69904),l=s(83935),o=s(35911);const a=["actioncontainer"];let r=(()=>{class GlobalNavigationMenuItemActionContainer{constructor(e,t,s,n,l){this.language=e,this.metadata=t,this.model=s,this.ngZone=n,this.cdr=l,this.actionemitter=new i.bkB,this.standardActions={NEW:"GlobalNavigationMenuItemActionNew",ROUTE:"GlobalNavigationMenuItemActionRoute"},this.stable=!1}get id(){return this.actionitem.id}get disabled(){return!this.componentref||!!this.componentref.instance.disabled}get hidden(){return!this.componentref||!!this.componentref.instance.hidden}ngAfterViewInit(){this.metadata.addComponent(this.actionitem.action?this.standardActions[this.actionitem.action]:this.actionitem.component,this.actioncontainer).subscribe((e=>{e.instance.parent=this.model,e.instance.actionconfig=this.actionitem.actionconfig,e.instance.actionemitter&&e.instance.actionemitter.subscribe((e=>{this.actionemitter.emit(e)})),this.componentref=e,this.cdr.detectChanges()}))}execute(){this.componentref&&this.componentref.instance.execute&&this.componentref.instance.execute()}static#e=this.ɵfac=function(e){return new(e||GlobalNavigationMenuItemActionContainer)(i.rXU(n.B),i.rXU(l.yu),i.rXU(o.g),i.rXU(i.SKi),i.rXU(i.gRc))};static#t=this.ɵcmp=i.VBU({type:GlobalNavigationMenuItemActionContainer,selectors:[["global-navigation-menu-item-action-container"]],viewQuery:function(e,t){if(1&e&&i.GBs(a,7,i.c1b),2&e){let e;i.mGM(e=i.lsd())&&(t.actioncontainer=e.first)}},inputs:{actionitem:"actionitem"},outputs:{actionemitter:"actionemitter"},decls:2,vars:0,consts:[["actioncontainer",""]],template:function(e,t){1&e&&i.nrm(0,"div",null,0)},encapsulation:2})}return GlobalNavigationMenuItemActionContainer})()},18638:(e,t,s)=>{"use strict";s.d(t,{q:()=>x});var i=s(18359),n=s(49969),l=s(64761),o=s(18039),a=s(54438),r=s(83935),d=s(60968),c=s(48849),u=s(53584),m=s(60177),h=s(25863),g=s(70455),p=s(83448),f=s(59397),b=s(18063),y=s(60074);function v(e,t){if(1&e&&(a.j41(0,"div",10)(1,"div",11),a.nrm(2,"global-header-search",12,13),a.k0s(),a.nrm(4,"global-header-tools")(5,"global-user"),a.k0s()),2&e){const e=a.sdS(3);a.R7$(2),a.Y8G("@isFocused",e.isFocused?"expand":"collapse")}}function _(e,t){if(1&e&&(a.j41(0,"div",14),a.nrm(1,"div",15),a.k0s()),2&e){const e=a.XpG();a.R7$(),a.xc7("width",e.progressWidth,"%")}}function k(e,t){if(1&e){const e=a.RV6();a.j41(0,"div",16),a.bIt("cdkDropListDropped",(function(t){a.eBV(e);const s=a.XpG();return a.Njj(s.drop(t))})),a.nrm(1,"global-navigation-tabbed-subtabs",17,18),a.k0s()}if(2&e){const e=a.sdS(2),t=a.XpG();a.Y8G("cdkDropListData",e.subtabs),a.R7$(),a.Y8G("parenttab",t.parentTab)}}const R=(e,t,s)=>({"slds-theme--error":e,"slds-theme--warning":t,"slds-theme--default":s}),I=[(0,n.hZ)("isFocused",[(0,n.wk)("expand",(0,n.iF)({position:"absolute",width:"calc(100vw / 2)","box-shadow":"#565555 -2px 0px 9px 0px","z-index":10})),(0,n.wk)("collapse",(0,n.iF)({position:"initial",width:"15rem"})),(0,n.kY)("collapse <=> expand",[(0,n.i0)("200ms")])])];let x=(()=>{class GlobalNavigationTabbed{constructor(e,t,s,n,l){this.metadata=e,this.navigation=t,this.userPreferences=s,this.configurationService=n,this.cdRef=l,this.displaySubTabs=!1,this.subscriptions=new i.yU,this.progressWidth=0,this.showProgressBar=!1}ngAfterViewInit(){this.subscribeToNavigationChanges()}ngOnDestroy(){this.subscriptions.unsubscribe()}get contextbarStyle(){return this.userPreferences.toUse.globalHeaderCollapsed?{"border-top":"0px"}:{}}setDisplaySubTabs(e){this.displaySubTabs="subtabbed"==this.navigation.navigationparadigm&&!!e&&(!!e.parentid||this.navigation.getSubTabs(e.id).length>0),this.cdRef.detectChanges()}setParentTab(e){this.parentTab=e&&e.parentid?this.navigation.getTabById(e.parentid):e}subscribeToNavigationChanges(){this.subscriptions.add(this.navigation.activeTab$.subscribe((e=>{this.handleNavigationChanges(e)}))),this.subscriptions.add(this.navigation.objectTabsChange$.subscribe((()=>{this.handleNavigationChanges(this.navigation.activeTab)})))}handleNavigationChanges(e){const t=this.navigation.getTabById(e);this.setParentTab(t),this.setDisplaySubTabs(t)}toggleCollapse(){this.userPreferences.toUse.globalHeaderCollapsed=!this.userPreferences.toUse.globalHeaderCollapsed,this.userPreferences.setPreference("globalHeaderCollapsed",this.userPreferences.toUse.globalHeaderCollapsed),setTimeout((()=>this.menuContainer.handleResize()),200)}drop(e){e.previousContainer==e.container?(0,o.HD)(e.container.data,e.previousIndex,e.currentIndex):(0,o.eg)(e.previousContainer.data,e.container.data,e.previousIndex,e.currentIndex);const t=this.navigation.objectTabs.findIndex((t=>t.id==e.item.data.id)),s=this.navigation.objectTabs.splice(t,1)[0],i=this.navigation.getTabById(s.id),n=e.currentIndex-1,l=e.container.data[n],a=l?this.navigation.objectTabs.findIndex((e=>e.id==l.id))+1:0;this.navigation.objectTabs.splice(a,0,s),e.previousContainer!==e.container&&(e.item.data.parentid=void 0,this.setDisplaySubTabs(i)),this.navigation.setSessionData()}static#e=this.ɵfac=function(e){return new(e||GlobalNavigationTabbed)(a.rXU(r.yu),a.rXU(d.L),a.rXU(c.S),a.rXU(u.i),a.rXU(a.gRc))};static#t=this.ɵcmp=a.VBU({type:GlobalNavigationTabbed,selectors:[["global-navigation-tabbed"]],viewQuery:function(e,t){if(1&e&&a.GBs(l.J,5),2&e){let e;a.mGM(e=a.lsd())&&(t.menuContainer=e.first)}},inputs:{progressWidth:"progressWidth",showProgressBar:"showProgressBar"},decls:10,vars:11,consts:[["cdkDropListGroup","",1,"globalnavigationtabbeddsubtabsragboundary"],[1,"slds-context-bar","slds-context-bar_tabs","slds-p-left--xx-small",3,"ngClass","ngStyle"],[1,"slds-context-bar__primary"],["role","navigation","cdkDropList","","cdkDropListOrientation","horizontal",1,"slds-context-bar__secondary","globalnavigationtabbeddragboundary",3,"cdkDropListData","cdkDropListDropped"],["tabbedMenuComponent",""],[1,"slds-button","slds-button--icon","slds-m-right--xx-small",3,"click"],[3,"icon"],["class","slds-global-header__item slds-p-horizontal--xx-small slds-grid slds-grid--align-end slds-grid--vertical-align-center",4,"ngIf"],["class","slds-context-bar-progress-bar",4,"ngIf"],["class","slds-tabs_default slds-sub-tabs","cdkDropList","","cdkDropListOrientation","horizontal",3,"cdkDropListData","cdkDropListDropped",4,"ngIf"],[1,"slds-global-header__item","slds-p-horizontal--xx-small","slds-grid","slds-grid--align-end","slds-grid--vertical-align-center"],[1,"slds-global-header__item","slds-is-relative","slds-height_full","slds-p-top--xxx-small","slds-p-horizontal--none",2,"min-width","15rem"],[1,"spice-display-block",2,"right","0","z-index","1"],["searchContainer",""],[1,"slds-context-bar-progress-bar"],[1,"slds-height_full"],["cdkDropList","","cdkDropListOrientation","horizontal",1,"slds-tabs_default","slds-sub-tabs",3,"cdkDropListData","cdkDropListDropped"],[3,"parenttab"],["subTabsComponent",""]],template:function(e,t){if(1&e&&(a.qex(0,0),a.j41(1,"div",1),a.nrm(2,"global-app-launcher",2),a.j41(3,"global-navigation-tabbed-menu",3,4),a.bIt("cdkDropListDropped",(function(e){return t.drop(e)})),a.k0s(),a.j41(5,"button",5),a.bIt("click",(function(){return t.toggleCollapse()})),a.nrm(6,"system-button-icon",6),a.k0s(),a.DNE(7,v,6,1,"div",7)(8,_,2,2,"div",8),a.k0s(),a.DNE(9,k,3,2,"div",9),a.bVm()),2&e){const e=a.sdS(4);a.R7$(),a.Y8G("ngClass",a.sMw(7,R,"recovery"==t.configurationService.data.startupMode,"maintenance"==t.configurationService.data.startupMode,"maintenance"!=t.configurationService.data.startupMode&&"recovery"!=t.configurationService.data.startupMode))("ngStyle",t.contextbarStyle),a.R7$(2),a.Y8G("cdkDropListData",e.objectTabs),a.R7$(3),a.Y8G("icon",t.userPreferences.toUse.globalHeaderCollapsed?"chevrondown":"chevronup"),a.R7$(),a.Y8G("ngIf",t.userPreferences.toUse.globalHeaderCollapsed),a.R7$(),a.Y8G("ngIf",t.showProgressBar),a.R7$(),a.Y8G("ngIf",t.displaySubTabs)}},dependencies:[m.YU,m.bT,m.B3,h.t,o.O7,o.RK,g.d,p.U,f.j,b.$,l.J,y.U],encapsulation:2,data:{animation:I}})}return GlobalNavigationTabbed})()},51108:(e,t,s)=>{"use strict";s.d(t,{M:()=>c});var i=s(49969),n=s(54438),l=s(60968),o=s(50531),a=s(60177),r=s(18521);function d(e,t){if(1&e){const e=n.RV6();n.j41(0,"system-utility-icon",1),n.bIt("click",(function(){n.eBV(e);const t=n.XpG();return n.Njj(t.openModal())})),n.k0s()}2&e&&n.Y8G("@browsertabbutton",void 0)}let c=(()=>{class GlobalNavigationTabbedBrowser{constructor(e,t,s){this.navigation=e,this.modal=t,this.elementRef=s}get tabWidth(){return this.elementRef.nativeElement.getBoundingClientRect().width}get hasTabs(){return this.navigation.objectTabs.length>0}openModal(){this.modal.openModal("GlobalNavigationTabbedBrowserModal")}static#e=this.ɵfac=function(e){return new(e||GlobalNavigationTabbedBrowser)(n.rXU(l.L),n.rXU(o.y),n.rXU(n.aKT))};static#t=this.ɵcmp=n.VBU({type:GlobalNavigationTabbedBrowser,selectors:[["global-navigation-tabbed-browser"]],hostVars:2,hostBindings:function(e,t){1&e&&n.bIt("click",(function(){return t.openModal()})),2&e&&n.AVh("slds-context-bar__item",1)},decls:1,vars:1,consts:[["icon","tabset","size","x-small","class","slds-p-around--x-small slds-border--left",3,"click",4,"ngIf"],["icon","tabset","size","x-small",1,"slds-p-around--x-small","slds-border--left",3,"click"]],template:function(e,t){1&e&&n.DNE(0,d,1,1,"system-utility-icon",0),2&e&&n.Y8G("ngIf",t.hasTabs)},dependencies:[a.bT,r.B],encapsulation:2,data:{animation:[(0,i.hZ)("browsertabbutton",[(0,i.kY)(":enter",[(0,i.iF)({opacity:0}),(0,i.i0)(".5s",(0,i.iF)({opacity:1}))]),(0,i.kY)(":leave",[(0,i.i0)(".5s",(0,i.iF)({opacity:0}))])])]}})}return GlobalNavigationTabbedBrowser})()},64761:(e,t,s)=>{"use strict";s.d(t,{J:()=>p});var i=s(30976),n=s(45320),l=s(26606),o=s(51108),a=s(18359),r=s(54438),d=s(83935),c=s(40553),u=s(60968),m=s(60177),h=s(18039);function g(e,t){if(1&e&&r.nrm(0,"global-navigation-tabbed-menu-tab",3),2&e){const e=t.$implicit;r.Y8G("object",e)("cdkDragDisabled",e.pinned)("cdkDragData",e)}}let p=(()=>{class GlobalNavigationTabbedMenu{constructor(e,t,s,i){this.metadata=e,this.elementRef=t,this.broadcast=s,this.navigation=i,this.resizeTimeOut=void 0,this.subscriptions=new a.yU,this.subscriptions.add(this.navigation.objectTabsChange$.subscribe((e=>{window.setTimeout((()=>{this.handleResize()}))})))}ngAfterViewInit(){setTimeout((()=>this.handleResize()))}ngOnDestroy(){this.subscriptions.unsubscribe()}get objectTabs(){return this.navigation.objectTabs.filter((e=>!e.parentid)).sort(((e,t)=>e.pinned&&t.pinned||!e.pinned&&!t.pinned?0:e.pinned?-1:1))}trackByFn(e,t){return t.id}handleResize(){let e=this.elementRef.nativeElement.getBoundingClientRect().width-this.menuModules.tabWidth-this.menuBrowser.tabWidth;this.menuMore.elementRef.nativeElement.classList.remove("slds-hide"),this.menuMore.elementRef.nativeElement.classList.add("slds-hidden"),this.menuMore.moreObjects=[];let t=this.menuMore.tabWidth;this.menuTabs.forEach((e=>{e.elementRef.nativeElement.classList.remove("slds-hide"),e.elementRef.nativeElement.classList.add("slds-hidden")}));let s=0,i=!1;return this.menuTabs.forEach(((n,l)=>{let o=n.elementRef.nativeElement.getBoundingClientRect().width;s+=o,(i||l+1==this.menuTabs.length&&s>e||l+1<this.menuTabs.length&&s>e-t)&&(n.elementRef.nativeElement.classList.add("slds-hide"),i=!0,this.menuMore.moreObjects.push(n.object)),n.elementRef.nativeElement.classList.remove("slds-hidden")})),i?this.menuMore.elementRef.nativeElement.classList.remove("slds-hidden"):this.menuMore.elementRef.nativeElement.classList.add("slds-hide"),!0}static#e=this.ɵfac=function(e){return new(e||GlobalNavigationTabbedMenu)(r.rXU(d.yu),r.rXU(r.aKT),r.rXU(c.m),r.rXU(u.L))};static#t=this.ɵcmp=r.VBU({type:GlobalNavigationTabbedMenu,selectors:[["global-navigation-tabbed-menu"]],viewQuery:function(e,t){if(1&e&&(r.GBs(i.e,5),r.GBs(n.E,5),r.GBs(o.M,5),r.GBs(l.i,5)),2&e){let e;r.mGM(e=r.lsd())&&(t.menuModules=e.first),r.mGM(e=r.lsd())&&(t.menuMore=e.first),r.mGM(e=r.lsd())&&(t.menuBrowser=e.first),r.mGM(e=r.lsd())&&(t.menuTabs=e)}},hostBindings:function(e,t){1&e&&r.bIt("resize",(function(){return t.handleResize()}),!1,r.tSv)},decls:4,vars:2,consts:[["cdkDrag","","cdkDragBoundary",".globalnavigationtabbeddragboundary",3,"object","cdkDragDisabled","cdkDragData",4,"ngFor","ngForOf","ngForTrackBy"],[1,"slds-hidden"],[1,"slds-col--bump-left"],["cdkDrag","","cdkDragBoundary",".globalnavigationtabbeddragboundary",3,"object","cdkDragDisabled","cdkDragData"]],template:function(e,t){1&e&&(r.nrm(0,"global-navigation-tabbed-menu-modules"),r.DNE(1,g,1,3,"global-navigation-tabbed-menu-tab",0),r.nrm(2,"global-navigation-tabbed-more-tab",1)(3,"global-navigation-tabbed-browser",2)),2&e&&(r.R7$(),r.Y8G("ngForOf",t.objectTabs)("ngForTrackBy",t.trackByFn))},dependencies:[m.Sq,h.T1,i.e,l.i,n.E,o.M],encapsulation:2})}return GlobalNavigationTabbedMenu})()},4446:(e,t,s)=>{"use strict";s.d(t,{S:()=>M});var i=s(54438),n=s(35911),l=s(41731),o=s(67515),a=s(83935),r=s(40553),d=s(60968),c=s(57363),u=s(69904),m=s(72541),h=s(17266),g=s(60177),p=s(98427),f=s(32062),b=s(48717),y=s(29895);const v=e=>({"slds-hide":e}),_=e=>({"slds-disabled-text":e});function k(e,t){if(1&e){const e=i.RV6();i.j41(0,"li",5),i.bIt("click",(function(){const t=i.eBV(e).$implicit,s=i.XpG(2);return i.Njj(s.propagateclick(t.id))})),i.j41(1,"a",6),i.nrm(2,"global-navigation-menu-item-action-container",7),i.k0s()()}if(2&e){const e=t.$implicit,s=i.XpG(2);i.Y8G("ngClass",i.eq3(3,v,s.isHidden(e.id))),i.R7$(2),i.Y8G("ngClass",i.eq3(5,_,s.isDisabled(e.id)))("actionitem",e)}}function R(e,t){if(1&e&&(i.qex(0),i.DNE(1,k,3,7,"li",4),i.bVm()),2&e){const e=i.XpG();i.R7$(),i.Y8G("ngForOf",e.itemMenu)}}function I(e,t){if(1&e&&(i.j41(0,"span",15),i.EFF(1),i.k0s()),2&e){const e=i.XpG().$implicit;i.R7$(),i.JRh(e.item_summary)}}function x(e,t){if(1&e&&i.nrm(0,"object-record-fieldset-horizontal-list",16),2&e){const e=i.XpG(3);i.Y8G("fieldset",e.displayfieldset)}}const j=(e,t,s)=>({module:e,id:t,data:s});function G(e,t){if(1&e){const e=i.RV6();i.j41(0,"li",12),i.bIt("click",(function(){const t=i.eBV(e).$implicit,s=i.XpG(2);return i.Njj(s.openRecord(t.item_id))})),i.j41(1,"a",6),i.DNE(2,I,2,1,"span",13)(3,x,1,1,"object-record-fieldset-horizontal-list",14),i.k0s()()}if(2&e){const e=t.$implicit,s=i.XpG(2);i.Y8G("system-model-provider",i.sMw(3,j,s.module,e.id,e.data)),i.R7$(2),i.Y8G("ngIf",!s.displayfieldset),i.R7$(),i.Y8G("ngIf",s.displayfieldset)}}function C(e,t){if(1&e&&(i.qex(0),i.j41(1,"li",8)(2,"span",9),i.nrm(3,"system-label",10),i.k0s()(),i.DNE(4,G,4,7,"li",11),i.bVm()),2&e){const e=i.XpG();i.R7$(4),i.Y8G("ngForOf",e.favorites)}}function w(e,t){if(1&e&&(i.j41(0,"span",15),i.EFF(1),i.k0s()),2&e){const e=i.XpG().$implicit;i.R7$(),i.JRh(e.data.summary_text)}}function S(e,t){if(1&e&&i.nrm(0,"object-record-fieldset-horizontal-list",16),2&e){const e=i.XpG(3);i.Y8G("fieldset",e.displayfieldset)}}function E(e,t){if(1&e){const e=i.RV6();i.j41(0,"li",12),i.bIt("click",(function(){const t=i.eBV(e).$implicit,s=i.XpG(2);return i.Njj(s.openRecord(t.item_id))})),i.j41(1,"a",6),i.DNE(2,w,2,1,"span",13)(3,S,1,1,"object-record-fieldset-horizontal-list",14),i.k0s()()}if(2&e){const e=t.$implicit,s=i.XpG(2);i.Y8G("system-model-provider",i.sMw(3,j,s.module,e.id,e.data)),i.R7$(2),i.Y8G("ngIf",!s.displayfieldset),i.R7$(),i.Y8G("ngIf",s.displayfieldset)}}function L(e,t){1&e&&(i.j41(0,"li",20),i.nrm(1,"system-label",21),i.k0s())}function D(e,t){1&e&&i.nrm(0,"system-spinner",22)}function F(e,t){if(1&e&&(i.qex(0),i.j41(1,"li",8)(2,"span",9),i.nrm(3,"system-label",17),i.k0s()(),i.DNE(4,E,4,7,"li",11)(5,L,2,0,"li",18)(6,D,1,0,"system-spinner",19),i.bVm()),2&e){const e=i.XpG();i.R7$(4),i.Y8G("ngForOf",e.recentitems),i.R7$(),i.Y8G("ngIf",!e.loadingRecent&&0==e.recentitems.length),i.R7$(),i.Y8G("ngIf",e.loadingRecent)}}let M=(()=>{class GlobalNavigationTabbedMenuModuleMenu{constructor(e,t,s,n,l,o,a,r,d,c){this.metadata=e,this.model=t,this.view=s,this.broadcast=n,this.navigation=l,this.router=o,this.language=a,this.recent=r,this.favorite=d,this.cdRef=c,this.actionTriggered=new i.bkB,this.itemMenu=[],this.loadingRecent=!1,this.recentitems=[],this.favorites=[],this.view.displayLabels=!1}get trackRecent(){return!!this.module&&"1"==this.metadata.getModuleDefs(this.module)?.track}ngOnChanges(){this.model.reset(),this.model.module=this.module;let e=this.metadata.getComponentConfig("GlobalNavigationMenuItem",this.module);if(e.actionset?this.itemMenu=this.metadata.getActionSetItems(e.actionset):this.itemMenu=this.metadata.getModuleMenu(this.module),e.displayfieldset)this.displayfieldset=e.displayfieldset;else{let e=this.metadata.getComponentConfig("GlobalHeaderSearchResultsItem",this.module);this.displayfieldset=e.mainfieldset}this.recentitems=[],this.trackRecent?this.recent.moduleItems[this.module]?this.recentitems=this.recent.moduleItems[this.module]:(this.loadingRecent=!0,this.recent.getModuleRecent(this.module).subscribe((e=>{this.loadingRecent=!1;let t=this.recent.moduleItems[this.module];this.recentitems=t||[],this.cdRef.detectChanges()}),(e=>{this.loadingRecent=!1}))):this.recentitems=[],this.favorites=this.favorite.getFavorites(this.module)}propagateclick(e){this.menuItemlist.find((t=>t.id==e))?.execute(),this.actionTriggered.emit(!0)}isDisabled(e){return!!this.menuItemlist&&this.menuItemlist.find((t=>t.id==e))?.disabled}isHidden(e){return!!this.menuItemlist&&this.menuItemlist.find((t=>t.id==e))?.hidden}openRecord(e){this.router.navigate(["/module/"+this.module+"/"+e]),this.actionTriggered.emit(!0)}static#e=this.ɵfac=function(e){return new(e||GlobalNavigationTabbedMenuModuleMenu)(i.rXU(a.yu),i.rXU(n.g),i.rXU(l.U),i.rXU(r.m),i.rXU(d.L),i.rXU(c.Ix),i.rXU(u.B),i.rXU(m._),i.rXU(h.B),i.rXU(i.gRc))};static#t=this.ɵcmp=i.VBU({type:GlobalNavigationTabbedMenuModuleMenu,selectors:[["global-navigation-tabbed-module-menu"]],viewQuery:function(e,t){if(1&e&&i.GBs(o.l,5),2&e){let e;i.mGM(e=i.lsd())&&(t.menuItemlist=e)}},inputs:{module:"module"},outputs:{actionTriggered:"actionTriggered"},features:[i.Jv_([n.g,l.U]),i.OA$],decls:7,vars:3,consts:[["role","menu",1,"slds-dropdown__list"],["menulist",""],["menucontainer",""],[4,"ngIf"],["class","slds-dropdown__item","role","presentation",3,"ngClass","click",4,"ngFor","ngForOf"],["role","presentation",1,"slds-dropdown__item",3,"ngClass","click"],["href","javascript:void(0);","role","menuitem"],[1,"slds-truncate",3,"ngClass","actionitem"],["role","separator",1,"slds-dropdown__header"],[1,"slds-text-title--caps"],["label","LBL_FAVORITES"],["class","slds-dropdown__item","role","presentation",3,"system-model-provider","click",4,"ngFor","ngForOf"],["role","presentation",1,"slds-dropdown__item",3,"system-model-provider","click"],["class","slds-truncate",4,"ngIf"],[3,"fieldset",4,"ngIf"],[1,"slds-truncate"],[3,"fieldset"],["label","LBL_RECENTLYVIEWED"],["class","slds-dropdown__item slds-align--absolute-center slds-text-color_inverse-weak slds-p-around--xx-small",4,"ngIf"],["size","16",4,"ngIf"],[1,"slds-dropdown__item","slds-align--absolute-center","slds-text-color_inverse-weak","slds-p-around--xx-small"],["label","LBL_NO_ENTRIES"],["size","16"]],template:function(e,t){1&e&&(i.j41(0,"ul",0,1),i.nrm(2,"div",null,2),i.DNE(4,R,2,1,"ng-container",3)(5,C,5,1,"ng-container",3)(6,F,7,3,"ng-container",3),i.k0s()),2&e&&(i.R7$(4),i.Y8G("ngIf",t.itemMenu.length>0),i.R7$(),i.Y8G("ngIf",t.favorites.length>0),i.R7$(),i.Y8G("ngIf",t.trackRecent))},dependencies:[g.YU,g.Sq,g.bT,p.v,f.W,b.P,y.b,o.l],encapsulation:2,changeDetection:0})}return GlobalNavigationTabbedMenuModuleMenu})()},30976:(e,t,s)=>{"use strict";s.d(t,{e:()=>R});var i=s(54438),n=s(83935),l=s(40553),o=s(60968),a=s(57363),r=s(69904),d=s(72541),c=s(17266),u=s(60177),m=s(22465),h=s(25863),g=s(68823),p=s(32062),f=s(44985),b=s(4446);const y=e=>({"slds-is-active":e});function v(e,t){if(1&e){const e=i.RV6();i.j41(0,"li",17),i.bIt("click",(function(){i.eBV(e);const t=i.XpG();return i.Njj(t.navigateTo(t.navModule))})),i.j41(1,"a",18)(2,"div",19),i.nrm(3,"system-icon",3),i.j41(4,"span"),i.nrm(5,"system-label-modulename",4),i.k0s(),i.j41(6,"button",20),i.bIt("click",(function(t){i.eBV(e);const s=i.XpG();return i.Njj(s.setActiveModule(t,s.navModule))})),i.nrm(7,"system-button-icon",21),i.k0s()()()()}if(2&e){const e=i.XpG();i.Y8G("ngClass",i.eq3(4,y,e.navModule==e.activeModule)),i.R7$(2),i.Y8G("title",e.navModule),i.R7$(),i.Y8G("module",e.navModule),i.R7$(2),i.Y8G("module",e.navModule)}}function _(e,t){if(1&e){const e=i.RV6();i.j41(0,"li",22),i.bIt("click",(function(){const t=i.eBV(e).$implicit,s=i.XpG();return i.Njj(s.navigateTo(t))})),i.j41(1,"a",18)(2,"div",19),i.nrm(3,"system-icon",3),i.j41(4,"span"),i.nrm(5,"system-label-modulename",4),i.k0s(),i.j41(6,"button",20),i.bIt("click",(function(t){const s=i.eBV(e).$implicit,n=i.XpG();return i.Njj(n.setActiveModule(t,s))})),i.nrm(7,"system-button-icon",21),i.k0s()()()()}if(2&e){const e=t.$implicit,s=i.XpG();i.Y8G("ngClass",i.eq3(4,y,e==s.activeModule)),i.R7$(2),i.Y8G("title",e),i.R7$(),i.Y8G("module",e),i.R7$(2),i.Y8G("module",e)}}const k=e=>({"slds-is-open":e});let R=(()=>{class GlobalNavigationTabbedMenuModules{quickLaunch(e){this.toggleMenu()}constructor(e,t,s,i,n,l,o,a,r){this.metadata=e,this.broadcast=t,this.navigation=s,this.router=i,this.language=n,this.recent=l,this.favorite=o,this.elementRef=a,this.renderer=r,this.menuItems=[],this.isopen=!1,this.activeModule="",this.initialized=!1,this.broadcast.message$.subscribe((e=>{this.handleMessage(e)}))}buildMenuItems(){this.menuItems=[];let e=this.metadata.getRoleModules(!0);for(let t of e)this.menuItems.push(t)}get isActive(){return"main"==this.navigation.activeTab}get tabWidth(){return this.elementRef.nativeElement.getBoundingClientRect().width}setActive(){this.navigation.setActiveTab("main")}get activeModuleVisible(){return this.menuItems.find((e=>e==this.navModule))}handleMessage(e){if("applauncher.setrole"===e.messagetype)this.buildMenuItems()}get navModule(){return this.navigation.activeModule}toggleMenu(){this.isopen?this.closeMenu():(this.openMenu(),this.elementRef.nativeElement.focus())}openMenu(){this.isopen=!0,this.initialized||(this.buildMenuItems(),this.initialized=!0),this.activeModule=this.navigation.activeModule,this.keyboardListener||(this.keyboardListener=this.renderer.listen("document","keyup",(e=>this.handleKeyBoardEvent(e))))}setActiveModule(e,t){e.stopPropagation(),this.activeModule=t}closeMenu(){this.isopen=!1,this.keyboardListener&&(this.keyboardListener(),this.keyboardListener=null)}handleKeyBoardEvent(e){let t=this.menuItems.indexOf(this.activeModule);switch(e.key){case"ArrowDown":this.activeModule=this.menuItems[t+1>=this.menuItems.length?0:t+1];break;case"ArrowUp":this.activeModule=this.menuItems[t-1<0?this.menuItems.length-1:t-1];break;case"Enter":this.navigateTo(this.activeModule)}}navigateTo(e){this.closeMenu(),this.router.navigate(["/module/"+e])}static#e=this.ɵfac=function(e){return new(e||GlobalNavigationTabbedMenuModules)(i.rXU(n.yu),i.rXU(l.m),i.rXU(o.L),i.rXU(a.Ix),i.rXU(r.B),i.rXU(d._),i.rXU(c.B),i.rXU(i.aKT),i.rXU(i.sFG))};static#t=this.ɵcmp=i.VBU({type:GlobalNavigationTabbedMenuModules,selectors:[["global-navigation-tabbed-menu-modules"]],hostVars:4,hostBindings:function(e,t){1&e&&i.bIt("mouseenter",(function(){return t.openMenu()}))("mouseleave",(function(){return t.closeMenu()}))("keydown.control.m",(function(){return t.quickLaunch()}),!1,i.EBC),2&e&&i.AVh("slds-context-bar__item",1)("slds-is-active",t.isActive)},decls:18,vars:9,consts:[[1,"slds-context-bar__item","slds-context-bar__item_divider-right","slds-dropdown-trigger","slds-dropdown-trigger_click",3,"ngClass"],["href","javascript:void(0);",1,"slds-context-bar__label-action",3,"click"],[1,"slds-truncate","slds-grid","slds-grid--vertical-align-center",3,"title"],["size","x-small",3,"module"],[3,"module"],[1,"slds-context-bar__icon-action"],["system-title","LBL_MAIN_MENU","aria-haspopup","true",1,"slds-button","slds-button_icon","slds-button_icon-container","slds-button_icon-x-small"],["icon","chevrondown"],[1,"slds-assistive-text"],["label","LBL_MAIN_MENU"],[1,"slds-dropdown","slds-dropdown_left","slds-dropdown--large"],[1,"slds-grid"],["role","menu",1,"slds-dropdown__list","slds-size--1-of-2","slds-border--right"],["class","slds-dropdown__item slds-nav-vertical__item slds-has-divider--bottom",3,"ngClass","click",4,"ngIf"],["class","slds-dropdown__item slds-nav-vertical__item","role","presentation",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"slds-size--1-of-2"],[3,"module","actionTriggered"],[1,"slds-dropdown__item","slds-nav-vertical__item","slds-has-divider--bottom",3,"ngClass","click"],["href","javascript:void(0);","role","menuitem","tabindex","-1"],[1,"slds-truncate","slds-size--1-of-1","slds-grid","slds-grid--vertical-align-center",3,"title"],[1,"slds-button","slds-button--icon","slds-col--bump-left",3,"click"],["icon","chevronright","addclasses","slds-icon-text-light"],["role","presentation",1,"slds-dropdown__item","slds-nav-vertical__item",3,"ngClass","click"]],template:function(e,t){1&e&&(i.j41(0,"div",0)(1,"a",1),i.bIt("click",(function(){return t.setActive()})),i.j41(2,"div",2),i.nrm(3,"system-icon",3),i.j41(4,"span"),i.nrm(5,"system-label-modulename",4),i.k0s()()(),i.j41(6,"div",5)(7,"button",6),i.nrm(8,"system-button-icon",7),i.j41(9,"span",8),i.nrm(10,"system-label",9),i.k0s()()(),i.j41(11,"div",10)(12,"div",11)(13,"ul",12),i.DNE(14,v,8,6,"li",13)(15,_,8,6,"li",14),i.k0s(),i.j41(16,"div",15)(17,"global-navigation-tabbed-module-menu",16),i.bIt("actionTriggered",(function(){return t.closeMenu()})),i.k0s()()()()()),2&e&&(i.Y8G("ngClass",i.eq3(7,k,t.isopen)),i.R7$(2),i.Y8G("title",t.navModule),i.R7$(),i.Y8G("module",t.navModule),i.R7$(2),i.Y8G("module",t.navModule),i.R7$(9),i.Y8G("ngIf",!t.activeModuleVisible),i.R7$(),i.Y8G("ngForOf",t.menuItems),i.R7$(2),i.Y8G("module",t.activeModule))},dependencies:[u.YU,u.Sq,u.bT,m.L,h.t,g.J,p.W,f.r,b.S],encapsulation:2})}return GlobalNavigationTabbedMenuModules})()},26606:(e,t,s)=>{"use strict";s.d(t,{i:()=>v});var i=s(54438),n=s(60968),l=s(69904),o=s(60177),a=s(22465),r=s(25863),d=s(68823),c=s(32062),u=s(48717),m=s(18521),h=s(16533);function g(e,t){if(1&e&&i.nrm(0,"system-utility-icon",17),2&e){const e=i.XpG(2);i.Y8G("icon",e.tabicon)}}function p(e,t){if(1&e&&i.nrm(0,"system-icon",18),2&e){const e=i.XpG(2);i.Y8G("module",e.tabmodule)}}function f(e,t){1&e&&(i.j41(0,"span",19)(1,"abbr",20),i.EFF(2,"*"),i.k0s()())}function b(e,t){if(1&e&&(i.qex(0),i.DNE(1,g,1,1,"system-utility-icon",12)(2,p,1,1,"system-icon",13),i.j41(3,"div",14),i.DNE(4,f,3,0,"span",15),i.nrm(5,"system-label",16),i.k0s(),i.bVm()),2&e){const e=i.XpG();i.R7$(),i.Y8G("ngIf",e.tabicon),i.R7$(),i.Y8G("ngIf",e.tabmodule),i.R7$(2),i.Y8G("ngIf",e.isDirty),i.R7$(),i.Y8G("label",e.tabname)}}function y(e,t){1&e&&(i.nrm(0,"system-spinner",21),i.j41(1,"div"),i.nrm(2,"system-label",22),i.k0s())}let v=(()=>{class GlobalNavigationTabbedMenuTab{constructor(e,t,s){this.navigation=e,this.language=t,this.elementRef=s,this.showContextMenu=!1}get isActive(){if(this.object.id==this.navigation.activeTab)return!0;let e=this.navigation.getTabById(this.navigation.activeTab);return!(!e||!e.parentid||this.object.id!=e.parentid)}setActive(){this.navigation.setActiveTab(this.object.id)}closetab(){this.navigation.closeObjectTab(this.object.id)}get pinned(){return this.object.pinned}pintab(){this.object.pinned=!this.object.pinned,this.navigation.objectTabs.sort(((e,t)=>e.pinned?-1:1))}get tabname(){return this.object.displayname?this.object.displayname:void 0}get tabmodule(){return this.object.displaymodule?this.object.displaymodule:void 0}get tabicon(){return this.object.displayicon?this.object.displayicon:void 0}get mainTabs(){return this.navigation.objectTabs.filter((e=>null==e.parentid))}get isDirty(){return this.navigation.anyDirtyModel(this.object.id)}static#e=this.ɵfac=function(e){return new(e||GlobalNavigationTabbedMenuTab)(i.rXU(n.L),i.rXU(l.B),i.rXU(i.aKT))};static#t=this.ɵcmp=i.VBU({type:GlobalNavigationTabbedMenuTab,selectors:[["global-navigation-tabbed-menu-tab"]],hostVars:6,hostBindings:function(e,t){2&e&&i.AVh("slds-context-bar__item",1)("slds-context-bar__item_tab",1)("slds-is-active",t.isActive)},inputs:{object:"object"},decls:13,vars:4,consts:[[1,"slds-context-bar__item","slds-no-hover",3,"contextmenu"],["href","javascript:void(0);",1,"slds-context-bar__label-action","slds-scrollable--none",3,"click"],[1,"slds-grid","slds-grid--vertical-align-center"],[4,"ngIf","ngIfElse"],["tabloading",""],[1,"slds-context-bar__icon-action"],["system-title","LBL_PIN_TAB",1,"slds-button","slds-button_icon","slds-button_icon-container","slds-button_icon-x-small","slds-m-around--none",3,"click"],[3,"icon"],["aria-haspopup","true","system-title","LBL_CLOSE_TAB",1,"slds-button","slds-button_icon","slds-button_icon-container","slds-button_icon-x-small","slds-m-around--none",3,"click"],["icon","close"],["scope","main",3,"object"],["contextMenuComponent",""],["size","x-small","class","slds-p-right--x-small",3,"icon",4,"ngIf"],["size","x-small","divClass","slds-p-right--x-small",3,"module",4,"ngIf"],[1,"slds-truncate",2,"white-space","nowrap","max-width","200px"],["class","slds-indicator-container",4,"ngIf"],[3,"label"],["size","x-small",1,"slds-p-right--x-small",3,"icon"],["size","x-small","divClass","slds-p-right--x-small",3,"module"],[1,"slds-indicator-container"],["system-title","LBL_TAB_NOT_SAVED",1,"slds-indicator_unsaved"],["size","10",1,"slds-p-right--x-small"],["label","LBL_LOADING"]],template:function(e,t){if(1&e){const e=i.RV6();i.j41(0,"div",0),i.bIt("contextmenu",(function(t){i.eBV(e);const s=i.sdS(12);return i.Njj(s.openContextMenu(t))})),i.j41(1,"a",1),i.bIt("click",(function(){return t.setActive()})),i.j41(2,"div",2),i.DNE(3,b,6,4,"ng-container",3)(4,y,3,0,"ng-template",null,4,i.C5r),i.k0s()(),i.j41(6,"div",5)(7,"button",6),i.bIt("click",(function(){return t.pintab()})),i.nrm(8,"system-button-icon",7),i.k0s(),i.j41(9,"button",8),i.bIt("click",(function(){return t.closetab()})),i.nrm(10,"system-button-icon",9),i.k0s()(),i.nrm(11,"global-navigation-tab-context-menu",10,11),i.k0s()}if(2&e){const e=i.sdS(5);i.R7$(3),i.Y8G("ngIf",t.tabname)("ngIfElse",e),i.R7$(5),i.Y8G("icon",t.pinned?"pinned":"pin"),i.R7$(3),i.Y8G("object",t.object)}},dependencies:[o.bT,a.L,r.t,d.J,c.W,u.P,m.B,h.x],encapsulation:2})}return GlobalNavigationTabbedMenuTab})()},45320:(e,t,s)=>{"use strict";s.d(t,{E:()=>f});var i=s(54438),n=s(60968),l=s(69904),o=s(60177),a=s(80256),r=s(25863),d=s(68823),c=s(32062),u=s(18521);function m(e,t){if(1&e&&i.nrm(0,"system-utility-icon",16),2&e){const e=i.XpG().$implicit;i.Y8G("icon",e.displayicon)}}function h(e,t){if(1&e&&i.nrm(0,"system-icon",17),2&e){const e=i.XpG().$implicit;i.Y8G("module",e.displaymodule)}}const g=e=>({"slds-is-active":e});function p(e,t){if(1&e){const e=i.RV6();i.j41(0,"li",8)(1,"a",9),i.DNE(2,m,1,1,"system-utility-icon",10)(3,h,1,1,"system-icon",11),i.j41(4,"div",12),i.bIt("click",(function(){const t=i.eBV(e).$implicit,s=i.XpG();return i.Njj(s.setActiveTab(t.id))})),i.nrm(5,"system-label",13),i.k0s(),i.j41(6,"button",14),i.bIt("click",(function(){const t=i.eBV(e).$implicit,s=i.XpG();return i.Njj(s.closeObjectTab(t.id))})),i.nrm(7,"system-button-icon",15),i.k0s()()()}if(2&e){const e=t.$implicit,s=i.XpG();i.Y8G("ngClass",i.eq3(4,g,s.isActive(e.id))),i.R7$(2),i.Y8G("ngIf",e.displayicon),i.R7$(),i.Y8G("ngIf",e.displaymodule),i.R7$(2),i.Y8G("label",e.displayname)}}let f=(()=>{class GlobalNavigationTabbedMoreTab{constructor(e,t,s){this.navigation=e,this.language=t,this.elementRef=s,this.moreObjects=[]}get tabWidth(){return this.elementRef.nativeElement.getBoundingClientRect().width}setActiveTab(e){this.navigation.setActiveTab(e)}closeObjectTab(e){this.navigation.closeObjectTab(e)}isActive(e){if(e==this.navigation.activeTab)return!0;let t=this.navigation.getTabById(this.navigation.activeTab);return!(!t||!t.parentid||e!=t.parentid)}get activeItem(){let e=this.navigation.activeTabObject;return!!this.moreObjects.find((t=>t.active||e&&e?.parentid==t.id))}static#e=this.ɵfac=function(e){return new(e||GlobalNavigationTabbedMoreTab)(i.rXU(n.L),i.rXU(l.B),i.rXU(i.aKT))};static#t=this.ɵcmp=i.VBU({type:GlobalNavigationTabbedMoreTab,selectors:[["global-navigation-tabbed-more-tab"]],hostVars:4,hostBindings:function(e,t){2&e&&i.AVh("slds-context-bar__item",1)("slds-is-active",t.activeItem)},decls:9,vars:2,consts:[["system-dropdown-trigger","",1,"slds-context-bar__item","slds-context-bar__dropdown-trigger","slds-dropdown-trigger","slds-dropdown-trigger_click"],["aria-haspopup","true",1,"slds-context-bar__label-action"],["title","More Tabs",1,"slds-truncate"],["label","LBL_MORE"],["icon","chevrondown",1,"slds-p-left--x-small"],[1,"slds-dropdown","slds-dropdown_right",2,"min-width","min-content"],["role","menu",1,"slds-dropdown__list"],["class","slds-dropdown__item slds-nav-vertical__item","role","presentation",3,"ngClass",4,"ngFor","ngForOf"],["role","presentation",1,"slds-dropdown__item","slds-nav-vertical__item",3,"ngClass"],["href","javascript:void(0);","role","menuitem"],["size","x-small","class","slds-p-right--x-small",3,"icon",4,"ngIf"],["size","x-small","divClass","slds-p-right--x-small",3,"module",4,"ngIf"],[1,"slds-grow",3,"click"],[3,"label"],["aria-haspopup","true",1,"slds-button","slds-button_icon","slds-button_icon-container","slds-button_icon-x-small","slds-m-around--none",3,"click"],["icon","close"],["size","x-small",1,"slds-p-right--x-small",3,"icon"],["size","x-small","divClass","slds-p-right--x-small",3,"module"]],template:function(e,t){1&e&&(i.j41(0,"div",0)(1,"div",1)(2,"span",2),i.nrm(3,"system-label",3),i.EFF(4),i.k0s(),i.nrm(5,"system-button-icon",4),i.k0s(),i.j41(6,"div",5)(7,"ul",6),i.DNE(8,p,8,6,"li",7),i.k0s()()()),2&e&&(i.R7$(4),i.SpI(" (",t.moreObjects.length,")"),i.R7$(4),i.Y8G("ngForOf",t.moreObjects))},dependencies:[o.YU,o.Sq,o.bT,a.q,r.t,d.J,c.W,u.B],encapsulation:2})}return GlobalNavigationTabbedMoreTab})()},93712:(e,t,s)=>{"use strict";s.d(t,{g:()=>R});var i=s(54438),n=s(83935),l=s(69904),o=s(60968),a=s(60177),r=s(22465),d=s(25863),c=s(68823),u=s(32062),m=s(48717),h=s(18521),g=s(16533);function p(e,t){if(1&e&&i.nrm(0,"system-utility-icon",13),2&e){const e=i.XpG(2);i.Y8G("icon",e.tabicon)}}function f(e,t){if(1&e&&i.nrm(0,"system-icon",14),2&e){const e=i.XpG(2);i.Y8G("module",e.tabmodule)}}function b(e,t){1&e&&(i.j41(0,"span",15)(1,"abbr",16),i.EFF(2,"*"),i.k0s()())}function y(e,t){if(1&e&&(i.qex(0),i.DNE(1,p,1,1,"system-utility-icon",8)(2,f,1,1,"system-icon",9),i.j41(3,"div",10),i.DNE(4,b,3,0,"span",11),i.nrm(5,"system-label",12),i.k0s(),i.bVm()),2&e){const e=i.XpG();i.R7$(),i.Y8G("ngIf",e.tabicon),i.R7$(),i.Y8G("ngIf",e.tabmodule),i.R7$(2),i.Y8G("ngIf",e.isDirty),i.R7$(),i.Y8G("label",e.tabname)}}function v(e,t){1&e&&(i.nrm(0,"system-spinner",17),i.j41(1,"div"),i.nrm(2,"system-label",18),i.k0s())}function _(e,t){if(1&e){const e=i.RV6();i.j41(0,"div",19)(1,"button",20),i.bIt("click",(function(){i.eBV(e);const t=i.XpG();return i.Njj(t.pintab())})),i.nrm(2,"system-button-icon",21),i.k0s(),i.j41(3,"button",22),i.bIt("click",(function(){i.eBV(e);const t=i.XpG();return i.Njj(t.closeSubTab())})),i.nrm(4,"system-button-icon",23),i.k0s()()}if(2&e){const e=i.XpG();i.R7$(2),i.Y8G("icon",e.pinned?"pinned":"pin")}}const k=(e,t)=>({"slds-active":e,"slds-border--left":t});let R=(()=>{class GlobalNavigationTabbedSubtabItem{constructor(e,t,s,i){this.metadata=e,this.language=t,this.navigation=s,this.elementRef=i,this.showContextMenu=!1,this.ismain=!1}get tabname(){return this.object?.displayname?this.object.displayname:void 0}get tabmodule(){return this.object?.displaymodule?this.object.displaymodule:void 0}get tabicon(){return this.object?.displayicon?this.object.displayicon:void 0}get isActive(){return this.object&&this.object.id==this.navigation.activeTab}setActive(){this.navigation.setActiveTab(this.object.id)}closeSubTab(){this.navigation.closeObjectTab(this.object.id)}get pinned(){return this.object.pinned}pintab(){this.object.pinned=!this.object.pinned}get subTabs(){return this.navigation.objectTabs.filter((e=>void 0!==e.parentid))}get isDirty(){return this.navigation.anyDirtyModel(this.object.id)}static#e=this.ɵfac=function(e){return new(e||GlobalNavigationTabbedSubtabItem)(i.rXU(n.yu),i.rXU(l.B),i.rXU(o.L),i.rXU(i.aKT))};static#t=this.ɵcmp=i.VBU({type:GlobalNavigationTabbedSubtabItem,selectors:[["global-navigation-tabbed-subtab-item"]],inputs:{object:"object",ismain:"ismain"},decls:9,vars:8,consts:[["role","presentation",1,"slds-tabs_default__item","slds-sub-tabs__item","slds-grid","slds-grid_vertical-align-center",3,"ngClass","contextmenu"],["href","javascript:void(0);","role","tab",1,"slds-tabs_default__link","slds-p-horizontal_xx-small",3,"click"],[1,"slds-truncate","slds-grid","slds-grid--vertical-align-center"],[4,"ngIf","ngIfElse"],["tabloading",""],["class","slds-col_bump-left slds-p-left_none slds-p-right_none slds-grid",4,"ngIf"],["scope","sub",3,"object"],["contextMenuComponent",""],["size","x-small","class","slds-p-right--x-small",3,"icon",4,"ngIf"],["size","x-small","divClass","slds-p-right--x-small",3,"module",4,"ngIf"],[1,"slds-truncate",2,"white-space","nowrap","max-width","200px"],["class","slds-indicator-container",4,"ngIf"],[3,"label"],["size","x-small",1,"slds-p-right--x-small",3,"icon"],["size","x-small","divClass","slds-p-right--x-small",3,"module"],[1,"slds-indicator-container"],["title","Tab Not Saved","aria-label","Tab Not Saved",1,"slds-indicator_unsaved"],["size","10",1,"slds-p-right--x-small"],["label","LBL_LOADING"],[1,"slds-col_bump-left","slds-p-left_none","slds-p-right_none","slds-grid"],["system-title","LBL_PIN_TAB",1,"slds-button","slds-button_icon","slds-button_icon-container","slds-button_icon-x-small","slds-m-around--none",3,"click"],[3,"icon"],["tabindex","0","system-title","LBL_CLOSE_TAB",1,"slds-button","slds-button_icon","slds-button_icon-container","slds-button_icon-x-small",3,"click"],["icon","close"]],template:function(e,t){if(1&e){const e=i.RV6();i.j41(0,"li",0),i.bIt("contextmenu",(function(t){i.eBV(e);const s=i.sdS(8);return i.Njj(s.openContextMenu(t))})),i.j41(1,"a",1),i.bIt("click",(function(){return t.setActive()})),i.j41(2,"div",2),i.DNE(3,y,6,4,"ng-container",3)(4,v,3,0,"ng-template",null,4,i.C5r),i.k0s()(),i.DNE(6,_,5,1,"div",5),i.nrm(7,"global-navigation-tab-context-menu",6,7),i.k0s()}if(2&e){const e=i.sdS(5);i.Y8G("ngClass",i.l_i(5,k,t.isActive,!t.ismain)),i.R7$(3),i.Y8G("ngIf",t.tabname)("ngIfElse",e),i.R7$(3),i.Y8G("ngIf",!t.ismain),i.R7$(),i.Y8G("object",t.object)}},dependencies:[a.YU,a.bT,r.L,d.t,c.J,u.W,m.P,h.B,g.x],encapsulation:2})}return GlobalNavigationTabbedSubtabItem})()},25435:(e,t,s)=>{"use strict";s.d(t,{l:()=>h});var i=s(45320),n=s(54438),l=s(60177),o=s(80256),a=s(25863),r=s(68823),d=s(32062);function c(e,t){if(1&e&&n.nrm(0,"system-icon",15),2&e){const e=n.XpG().$implicit;n.Y8G("module",e.displaymodule)}}const u=e=>({"slds-is-active":e});function m(e,t){if(1&e){const e=n.RV6();n.j41(0,"li",9)(1,"a",10),n.DNE(2,c,1,1,"system-icon",11),n.j41(3,"div",12),n.bIt("click",(function(){const t=n.eBV(e).$implicit,s=n.XpG();return n.Njj(s.setActiveTab(t.id))})),n.EFF(4),n.k0s(),n.j41(5,"button",13),n.bIt("click",(function(){const t=n.eBV(e).$implicit,s=n.XpG();return n.Njj(s.closeObjectTab(t.id))})),n.nrm(6,"system-button-icon",14),n.k0s()()()}if(2&e){const e=t.$implicit,s=n.XpG();n.Y8G("ngClass",n.eq3(3,u,s.isActive(e.id))),n.R7$(2),n.Y8G("ngIf",e.displaymodule),n.R7$(2),n.JRh(e.displayname)}}let h=(()=>{class GlobalNavigationTabbedSubTabMoreTab extends i.E{get moreActive(){let e=!1;return this.moreObjects.some((t=>{if(t.active)return e=!0,!0})),e}static#e=this.ɵfac=(()=>{let e;return function(t){return(e||(e=n.xGo(GlobalNavigationTabbedSubTabMoreTab)))(t||GlobalNavigationTabbedSubTabMoreTab)}})();static#t=this.ɵcmp=n.VBU({type:GlobalNavigationTabbedSubTabMoreTab,selectors:[["global-navigation-tabbed-sub-tab-more-tab"]],features:[n.Vt3],decls:11,vars:5,consts:[["role","presentation","system-dropdown-trigger","",1,"slds-tabs_default__item","slds-sub-tabs__item","slds-grid","slds-grid_vertical-align-center","slds-dropdown-trigger","slds-dropdown-trigger_click","slds-border--left",3,"ngClass"],["href","javascript:void(0);","role","tab",1,"slds-tabs_default__link","slds-p-horizontal_xx-small"],["label","LBL_MORE"],[1,"slds-col_bump-left","slds-p-left_none","slds-p-right_none"],["tabindex","0",1,"slds-button","slds-button_icon","slds-button_icon-container","slds-button_icon-x-small"],["icon","chevrondown"],[1,"slds-dropdown","slds-dropdown_right"],["role","menu",1,"slds-dropdown__list"],["class","slds-dropdown__item slds-nav-vertical__item","role","presentation",3,"ngClass",4,"ngFor","ngForOf"],["role","presentation",1,"slds-dropdown__item","slds-nav-vertical__item",3,"ngClass"],["href","javascript:void(0);","role","menuitem"],["size","x-small","divClass","slds-p-right--x-small",3,"module",4,"ngIf"],[1,"slds-grow",3,"click"],["aria-haspopup","true",1,"slds-button","slds-button_icon","slds-button_icon-container","slds-button_icon-x-small","slds-m-around--none",3,"click"],["icon","close"],["size","x-small","divClass","slds-p-right--x-small",3,"module"]],template:function(e,t){1&e&&(n.j41(0,"li",0)(1,"a",1)(2,"div"),n.nrm(3,"system-label",2),n.EFF(4),n.k0s()(),n.j41(5,"div",3)(6,"button",4),n.nrm(7,"system-button-icon",5),n.k0s()(),n.j41(8,"div",6)(9,"ul",7),n.DNE(10,m,7,5,"li",8),n.k0s()()()),2&e&&(n.Y8G("ngClass",n.eq3(3,u,t.moreActive)),n.R7$(4),n.SpI(" (",t.moreObjects.length,")"),n.R7$(6),n.Y8G("ngForOf",t.moreObjects))},dependencies:[l.YU,l.Sq,l.bT,o.q,a.t,r.J,d.W],encapsulation:2})}return GlobalNavigationTabbedSubTabMoreTab})()},60074:(e,t,s)=>{"use strict";s.d(t,{U:()=>h});var i=s(93712),n=s(25435),l=s(18359),o=s(54438),a=s(83935),r=s(69904),d=s(60968),c=s(60177),u=s(18039);function m(e,t){if(1&e&&o.nrm(0,"global-navigation-tabbed-subtab-item",3),2&e){const e=t.$implicit;o.Y8G("object",e)("cdkDragDisabled",e.pinned)("cdkDragData",e)}}let h=(()=>{class GlobalNavigationTabbedSubtabs{constructor(e,t,s,i,n){this.metadata=e,this.language=t,this.navigation=s,this.elementRef=i,this.ngZone=n,this.subscriptions=new l.yU,this.stable=!0,this.subscriptions.add(this.navigation.objectTabsChange$.subscribe((e=>{window.setTimeout((()=>{this.handleResize()}))})))}ngOnDestroy(){this.subscriptions.unsubscribe()}get subtabs(){return this.navigation.getSubTabs(this.parenttab?.id).sort(((e,t)=>e.pinned&&t.pinned||!e.pinned&&!t.pinned?0:e.pinned?-1:t.pinned?1:void 0))}trackByFn(e,t){return t.id}handleResize(){let e=this.elementRef.nativeElement.getBoundingClientRect().left,t=window.innerWidth-e;this.subMenuMore.elementRef.nativeElement.classList.remove("slds-hide"),this.subMenuMore.elementRef.nativeElement.classList.add("slds-hidden"),this.subMenuMore.moreObjects=[];let s=this.subMenuMore.tabWidth;this.subMenuTabs.forEach((e=>{e.elementRef.nativeElement.classList.remove("slds-hide"),e.elementRef.nativeElement.classList.add("slds-hidden")}));let i=0,n=!1;return this.subMenuTabs.forEach(((e,l)=>{let o=e.elementRef.nativeElement.getBoundingClientRect().width;i+=o,(n||l+1==this.subMenuTabs.length&&i>t||l+1<this.subMenuTabs.length&&i>t-s)&&(e.elementRef.nativeElement.classList.add("slds-hide"),n=!0,this.subMenuMore.moreObjects.push(e.object)),e.elementRef.nativeElement.classList.remove("slds-hidden")})),n?this.subMenuMore.elementRef.nativeElement.classList.remove("slds-hidden"):this.subMenuMore.elementRef.nativeElement.classList.add("slds-hide"),!0}static#e=this.ɵfac=function(e){return new(e||GlobalNavigationTabbedSubtabs)(o.rXU(a.yu),o.rXU(r.B),o.rXU(d.L),o.rXU(o.aKT),o.rXU(o.SKi))};static#t=this.ɵcmp=o.VBU({type:GlobalNavigationTabbedSubtabs,selectors:[["global-navigation-tabbed-subtabs"]],viewQuery:function(e,t){if(1&e&&(o.GBs(n.l,5),o.GBs(i.g,5)),2&e){let e;o.mGM(e=o.lsd())&&(t.subMenuMore=e.first),o.mGM(e=o.lsd())&&(t.subMenuTabs=e)}},hostBindings:function(e,t){1&e&&o.bIt("resize",(function(){return t.handleResize()}),!1,o.tSv)},inputs:{parenttab:"parenttab"},decls:4,vars:4,consts:[["role","tablist",1,"slds-tabs_default__nav"],[3,"object","ismain"],["cdkDrag","","cdkDragBoundary",".globalnavigationtabbeddsubtabsragboundary",3,"object","cdkDragDisabled","cdkDragData",4,"ngFor","ngForOf","ngForTrackBy"],["cdkDrag","","cdkDragBoundary",".globalnavigationtabbeddsubtabsragboundary",3,"object","cdkDragDisabled","cdkDragData"]],template:function(e,t){1&e&&(o.j41(0,"ul",0),o.nrm(1,"global-navigation-tabbed-subtab-item",1),o.DNE(2,m,1,3,"global-navigation-tabbed-subtab-item",2),o.nrm(3,"global-navigation-tabbed-sub-tab-more-tab"),o.k0s()),2&e&&(o.R7$(),o.Y8G("object",t.parenttab)("ismain",!0),o.R7$(),o.Y8G("ngForOf",t.subtabs)("ngForTrackBy",t.trackByFn))},dependencies:[c.Sq,u.T1,i.g,n.l],encapsulation:2})}return GlobalNavigationTabbedSubtabs})()},16533:(e,t,s)=>{"use strict";s.d(t,{x:()=>g});var i=s(33726),n=s(96697),l=s(54438),o=s(60968),a=s(60177),r=s(22465),d=s(32062);function c(e,t){if(1&e){const e=l.RV6();l.j41(0,"li",3)(1,"a",4),l.bIt("click",(function(){l.eBV(e);const t=l.XpG(2);return l.Njj(t.closeTabs("other",t.object.id))})),l.j41(2,"span",12),l.nrm(3,"system-label",13),l.k0s()()()}}function u(e,t){if(1&e){const e=l.RV6();l.j41(0,"li",3)(1,"a",4),l.bIt("click",(function(){l.eBV(e);const t=l.XpG(2);return l.Njj(t.closeTabs("left",t.object.id))})),l.j41(2,"span",14),l.nrm(3,"system-label",15),l.k0s()()()}}function m(e,t){if(1&e){const e=l.RV6();l.j41(0,"li",3)(1,"a",4),l.bIt("click",(function(){l.eBV(e);const t=l.XpG(2);return l.Njj(t.closeTabs("right",t.object.id))})),l.j41(2,"span",16),l.nrm(3,"system-label",17),l.k0s()()()}}function h(e,t){if(1&e){const e=l.RV6();l.j41(0,"div",1)(1,"ul",2)(2,"li",3)(3,"a",4),l.bIt("click",(function(){l.eBV(e);const t=l.XpG();return l.Njj(t.clonetab())})),l.j41(4,"span",5),l.nrm(5,"system-label",6),l.k0s()()(),l.j41(6,"li",3)(7,"a",4),l.bIt("click",(function(){l.eBV(e);const t=l.XpG();return l.Njj(t.closetab())})),l.j41(8,"span",7),l.nrm(9,"system-label",8),l.k0s()()(),l.DNE(10,c,4,0,"li",9)(11,u,4,0,"li",9)(12,m,4,0,"li",9),l.j41(13,"li",3)(14,"a",4),l.bIt("click",(function(){l.eBV(e);const t=l.XpG();return l.Njj(t.moveSubTabToMainTabs())})),l.j41(15,"span",10),l.nrm(16,"system-label",11),l.k0s()()()()()}if(2&e){const e=l.XpG();l.AVh("slds-hide",!e.showContextMenu),l.R7$(2),l.AVh("slds-hide",e.buttonCloneDisabled),l.R7$(8),l.Y8G("ngIf",e.buttonCloseOtherTabsDisabled),l.R7$(),l.Y8G("ngIf",e.buttonCloseTabsToLeftDisabled),l.R7$(),l.Y8G("ngIf",e.buttonCloseTabsToRightDisabled),l.R7$(),l.AVh("slds-hide",e.buttonMoveTabToMainTabsHidden)}}let g=(()=>{class GlobalNavigationTabContextMenu{constructor(e,t){this.navigation=e,this.elementRef=t,this.showContextMenu=!1,this.buttonCloseOtherTabsDisabled=!1,this.buttonCloseTabsToLeftDisabled=!1,this.buttonCloseTabsToRightDisabled=!1,this.buttonMoveTabToMainTabsHidden=!1,this.buttonCloneDisabled=!1}get isDirty(){return this.navigation.anyDirtyModel(this.object.id)}get isMainTab(){return!this.object.parentid}get isActive(){if(this.object.id==this.navigation.activeTab)return!0;let e=this.navigation.getTabById(this.navigation.activeTab);return!(!e||!e.parentid||this.object.id!=e.parentid)}setActive(){this.navigation.setActiveTab(this.object.id)}closetab(){this.navigation.closeObjectTab(this.object.id)}clonetab(){this.navigation.cloneTab(this.object.id),this.closeContextMenu()}openContextMenu(e){e.preventDefault(),e.stopPropagation(),this.setButtonsToClose(),this.showContextMenu=!0,this.handleDocumentClick()}closeContextMenu(){this.showContextMenu=!1}moveSubTabToMainTabs(){this.navigation.moveSubTabToMainTabs(this.object.id),this.setActive(),this.closeContextMenu()}setButtonsToClose(){this.buttonCloseOtherTabsDisabled=this.navigation.hasCloseableTabs(this.object.id,"other",this.scope),this.buttonCloseTabsToLeftDisabled=this.navigation.hasCloseableTabs(this.object.id,"left",this.scope),this.buttonCloseTabsToRightDisabled=this.navigation.hasCloseableTabs(this.object.id,"right",this.scope),this.buttonMoveTabToMainTabsHidden="main"==this.scope||this.isMainTab,this.buttonCloneDisabled=!this.isMainTab}closeTabs(e,t){this.navigation.closeTabs(e,t,this.scope),this.closeContextMenu()}handleDocumentClick(){const e=this.elementRef.nativeElement;(0,i.R)(window,"mousedown").pipe((0,n.s)(1)).subscribe((t=>{e.contains(t.target)||(this.showContextMenu=!1)}))}static#e=this.ɵfac=function(e){return new(e||GlobalNavigationTabContextMenu)(l.rXU(o.L),l.rXU(l.aKT))};static#t=this.ɵcmp=l.VBU({type:GlobalNavigationTabContextMenu,selectors:[["global-navigation-tab-context-menu"]],hostBindings:function(e,t){1&e&&l.bIt("contextmenu",(function(e){return t.openContextMenu(e)}))},inputs:{object:"object",scope:"scope"},decls:1,vars:1,consts:[["class","slds-popover slds-p-vertical--xx-small slds-nubbin--top-left slds-is-absolute","role","tooltip","style","top: 41px; left: 10px;",3,"slds-hide",4,"ngIf"],["role","tooltip",1,"slds-popover","slds-p-vertical--xx-small","slds-nubbin--top-left","slds-is-absolute",2,"top","41px","left","10px"],["role","menu",1,"slds-dropdown__list"],["role","presentation",1,"slds-dropdown__item"],["href","javascript:void(0);","role","menuitem",3,"click"],["system-title","LBL_CLONE_TAB",1,"slds-truncate"],["label","LBL_CLONE_TAB"],["system-title","LBL_CLOSE_TAB",1,"slds-truncate"],["label","LBL_CLOSE_TAB"],["class","slds-dropdown__item","role","presentation",4,"ngIf"],["system-title","LBL_MOVE_TO_MAINTABS",1,"slds-truncate"],["label","LBL_MOVE_TO_MAINTABS"],["system-title","LBL_CLOSE_OTHER_TABS",1,"slds-truncate"],["label","LBL_CLOSE_OTHER_TABS"],["system-title","LBL_CLOSE_TABS_TO_THE_LEFT",1,"slds-truncate"],["label","LBL_CLOSE_TABS_TO_THE_LEFT"],["system-title","LBL_CLOSE_TABS_TO_THE_RIGHT",1,"slds-truncate"],["label","LBL_CLOSE_TABS_TO_THE_RIGHT"]],template:function(e,t){1&e&&l.DNE(0,h,17,9,"div",0),2&e&&l.Y8G("ngIf",t.showContextMenu)},dependencies:[a.bT,r.L,d.W],encapsulation:2})}return GlobalNavigationTabContextMenu})()},80329:(e,t,s)=>{"use strict";s.d(t,{D:()=>c});var i=s(54438),n=s(21626),l=s(60177),o=s(48717),a=s(29694);function r(e,t){1&e&&(i.j41(0,"div",3),i.nrm(1,"system-spinner"),i.k0s())}function d(e,t){if(1&e&&i.nrm(0,"global-newsfeed-item",4),2&e){const e=t.$implicit;i.Y8G("item",e)}}let c=(()=>{class GlobalNewsFeed{constructor(e){this.http=e,this.news=[],this.isLoading=!0,this.loadNewsFeed()}loadNewsFeed(){let e=btoa("https://www.spicecrm.com/wp-json/wp/v2/posts?context=embed");this.http.get("proxy?useurl="+e).subscribe((e=>{this.news=e,this.isLoading=!1}))}static#e=this.ɵfac=function(e){return new(e||GlobalNewsFeed)(i.rXU(n.Qq))};static#t=this.ɵcmp=i.VBU({type:GlobalNewsFeed,selectors:[["global-newsfeed"]],decls:3,vars:2,consts:[[1,"slds-p-around--medium","slds-theme--shade","slds-scrollable--y",2,"height","100vh"],["class","slds-align--absolute-center slds-height_full",4,"ngIf"],[3,"item",4,"ngFor","ngForOf"],[1,"slds-align--absolute-center","slds-height_full"],[3,"item"]],template:function(e,t){1&e&&(i.j41(0,"div",0),i.DNE(1,r,2,0,"div",1)(2,d,1,1,"global-newsfeed-item",2),i.k0s()),2&e&&(i.R7$(),i.Y8G("ngIf",t.isLoading),i.R7$(),i.Y8G("ngForOf",t.news))},dependencies:[l.Sq,l.bT,o.P,a.u],encapsulation:2})}return GlobalNewsFeed})()},29694:(e,t,s)=>{"use strict";s.d(t,{u:()=>l});var i=s(54438),n=s(49380);let l=(()=>{class GlobalNewsFeedItem{constructor(){this.item={}}getDate(){return moment(this.item.date).fromNow()}getExcerpt(){return this.item.excerpt.rendered.replace("<a",'<a target="_blank"')}static#e=this.ɵfac=function(e){return new(e||GlobalNewsFeedItem)};static#t=this.ɵcmp=i.VBU({type:GlobalNewsFeedItem,selectors:[["global-newsfeed-item"]],inputs:{item:"item"},decls:10,vars:4,consts:[[1,"slds-card","slds-m-bottom--medium"],[1,"slds-card__header"],[1,"slds-grid","slds-grid_vertical-align-center"],["icon","wordpress","size","small"],[1,"slds-text-heading--medium","slds-truncate"],["target","_blank",3,"innerHTML"],[1,"slds-card__body","slds-p-vertical--xx-small","slds-p-horizontal--small"],[1,"slds-card__body--inner","slds-grid","slds-wrap","slds-grid--pull-padded",2,"text-align","justify",3,"innerHTML"],[1,"slds-card__footer"]],template:function(e,t){1&e&&(i.j41(0,"article",0)(1,"div",1)(2,"div",2),i.nrm(3,"system-custom-icon",3),i.j41(4,"h2",4),i.nrm(5,"a",5),i.k0s()()(),i.j41(6,"div",6),i.nrm(7,"div",7),i.k0s(),i.j41(8,"div",8),i.EFF(9),i.k0s()()),2&e&&(i.R7$(5),i.Y8G("innerHTML",t.item.title.rendered,i.npT),i.BMQ("href",t.item.link,i.B4B),i.R7$(2),i.Y8G("innerHTML",t.getExcerpt(),i.npT),i.R7$(2),i.JRh(t.getDate()))},dependencies:[n.k],encapsulation:2})}return GlobalNewsFeedItem})()},59397:(e,t,s)=>{"use strict";s.d(t,{j:()=>p});var i=s(54438),n=s(54095),l=s(57363),o=s(29994),a=s(53584),r=s(48849),d=s(60177),c=s(18521),u=s(9531);function m(e,t){if(1&e&&(i.j41(0,"span",5),i.nrm(1,"system-utility-icon",6),i.k0s()),2&e){const e=i.XpG();i.AVh("slds-theme--default","maintenance"==e.configurationService.data.startupMode||"recovery"==e.configurationService.data.startupMode)}}function h(e,t){if(1&e&&i.nrm(0,"img",7),2&e){const e=i.XpG();i.Y8G("src",e.userimage,i.B4B)}}function g(e,t){if(1&e){const e=i.RV6();i.j41(0,"global-user-panel",8),i.bIt("closepopup",(function(){i.eBV(e);const t=i.XpG();return i.Njj(t.closepopup())})),i.k0s()}}let p=(()=>{class GlobalUser{constructor(e,t,s,i,n,l,o){this.loginService=e,this.router=t,this.elementRef=s,this.renderer=i,this.session=n,this.configurationService=l,this.userpreferences=o,this.hideUserDetails=!0}toggleUserDetails(){this.hideUserDetails=!this.hideUserDetails,this.hideUserDetails?this.clickListener&&this.clickListener():this.clickListener=this.renderer.listen("document","click",(e=>this.onClick(e)))}closepopup(){this.hideUserDetails=!0}onClick(e){this.elementRef.nativeElement.contains(e.target)||(this.hideUserDetails=!0,this.clickListener())}get userimage(){return this.session.authData.user.user_image}static#e=this.ɵfac=function(e){return new(e||GlobalUser)(i.rXU(n.B),i.rXU(l.Ix),i.rXU(i.aKT),i.rXU(i.sFG),i.rXU(o.d),i.rXU(a.i),i.rXU(r.S))};static#t=this.ɵcmp=i.VBU({type:GlobalUser,selectors:[["global-user"]],decls:5,vars:3,consts:[[1,"slds-is-relative",3,"mouseenter","mouseleave"],["aria-haspopup","true",2,"min-width","32px","cursor","pointer",3,"click"],["class","slds-icon_container slds-icon-standard-empty slds-icon_container--circle",3,"slds-theme--default",4,"ngIf"],["style","height: 32px; width: 32px",3,"src",4,"ngIf"],["class","slds-is-absolute","style","top: 0px; right: 15px;",3,"closepopup",4,"ngIf"],[1,"slds-icon_container","slds-icon-standard-empty","slds-icon_container--circle"],["icon","user","size","x-small","addclasses","slds-icon","colorclass",""],[2,"height","32px","width","32px",3,"src"],[1,"slds-is-absolute",2,"top","0px","right","15px",3,"closepopup"]],template:function(e,t){1&e&&(i.j41(0,"div",0),i.bIt("mouseenter",(function(){return t.hideUserDetails=!1}))("mouseleave",(function(){return t.hideUserDetails=!0})),i.j41(1,"div",1),i.bIt("click",(function(){return t.toggleUserDetails()})),i.DNE(2,m,2,2,"span",2)(3,h,1,1,"img",3),i.k0s(),i.DNE(4,g,1,0,"global-user-panel",4),i.k0s()),2&e&&(i.R7$(2),i.Y8G("ngIf",!t.userimage),i.R7$(),i.Y8G("ngIf",t.userimage),i.R7$(),i.Y8G("ngIf",!t.hideUserDetails))},dependencies:[d.bT,c.B,u.f],encapsulation:2})}return GlobalUser})()},9531:(e,t,s)=>{"use strict";s.d(t,{f:()=>D});var i=s(54438),n=s(35911),l=s(5220),o=s(54095),a=s(29994),r=s(57363),d=s(83935),c=s(49722),u=s(53584),m=s(50531),h=s(48849),g=s(41081),p=s(71475),f=s(69904),b=s(20673),y=s(60177),v=s(84341),_=s(22465),k=s(25863),R=s(32062),I=s(90609),x=s(18521),j=s(17427),G=s(81572);function C(e,t){if(1&e){const e=i.RV6();i.j41(0,"li",6)(1,"button",25),i.bIt("click",(function(){i.eBV(e);const t=i.XpG();return i.Njj(t.changePassword())})),i.nrm(2,"system-button-icon",26),i.k0s()()}}function w(e,t){if(1&e){const e=i.RV6();i.j41(0,"li",6)(1,"button",27),i.bIt("click",(function(){i.eBV(e);const t=i.XpG();return i.Njj(t.set2FA())})),i.nrm(2,"system-utility-icon",28),i.k0s()()}if(2&e){const e=i.XpG();i.R7$(2),i.Y8G("colorclass",e.session.authData.user.user_2fa_method?"slds-icon-text-success":"slds-icon-text-light")}}function S(e,t){if(1&e){const e=i.RV6();i.j41(0,"ul",29)(1,"li",6)(2,"button",30),i.bIt("click",(function(){i.eBV(e);const t=i.XpG();return i.Njj(t.clearCache())})),i.nrm(3,"system-button-icon",31),i.k0s()(),i.j41(4,"li",6)(5,"button",32),i.bIt("click",(function(){i.eBV(e);const t=i.XpG();return i.Njj(t.goAdmin())})),i.nrm(6,"system-button-icon",33),i.k0s()()()}}function E(e,t){1&e&&i.nrm(0,"system-utility-icon",34)}const L=e=>({"slds-text-link--reset":e});let D=(()=>{class GlobaUserPanel{constructor(e,t,s,n,l,o,a,r,d,c,u,m,h){this.loginService=e,this.session=t,this.router=s,this.metadata=n,this.backend=l,this.config=o,this.modal=a,this.userprefs=r,this.toast=d,this.socket=c,this.language=u,this.loader=m,this.model=h,this.closepopup=new i.bkB,this.canOpenUser=!1,this.model.module="Users",this.model.id=this.session.authData.userId,this.model.setData(this.session.authData.user),this.canOpenUser=this.model.checkAccess("view")}logoff(){this.loginService.logout()}changeImage(){this.modal.openModal("SystemUploadImage").subscribe((e=>{e.instance.cropheight=150,e.instance.cropwidth=150,e.instance.imagedata.subscribe((e=>{if(!1!==e){let t=this.session.authData.user.user_image;this.session.authData.user.user_image="",this.backend.postRequest("module/Users/"+this.session.authData.userId+"/image",{},{imagedata:e}).subscribe((t=>{this.session.authData.user.user_image=e}),(e=>{this.session.authData.user.user_image=t}))}}))}))}get displayName(){return this.session.authData.user.full_name?this.session.authData.user.full_name:this.session.authData.userName}get userName(){return this.session.authData.userName}get systemName(){return this.session.authData.tenant_name?this.session.authData.tenant_name:this.config.systemName}get canChangePassword(){return this.session.authData.canchangepassword}get canChange2fa(){let e=this.config.getCapabilityConfig("login");return this.canChangePassword&&(!e.twofactor.onlogin.enforced||""==e.twofactor.onlogin.method||"user_defined"==e.twofactor.onlogin.method)}goDetails(){this.canOpenUser&&(this.router.navigate(["/module/Users/"+this.session.authData.userId]),this.close())}openPreferences(){this.modal.openModal("UserPreferencesModal")}editSignature(){this.modal.openModal("UserSignatureModal")}changePassword(){this.canChangePassword&&this.modal.openStaticModal(l.y)}change2FA(){let e=this.modal.await(this.language.getLabel("MSG_TOTP_STATUSCHECK"));this.backend.getRequest("authentication/totp",{onBehalfUserId:this.session.authData.userId}).subscribe((t=>{e.emit(!0),t.active?this.modal.confirm(this.language.getLabel("MSG_TOTP_DELETE",null,"long"),this.language.getLabel("MSG_TOTP_DELETE")).subscribe((t=>{t&&(e=this.modal.await(this.language.getLabel("MSG_TOTP_DELETING")),this.backend.deleteRequest("authentication/totp",{onBehalfUserId:this.session.authData.userId}).subscribe({next:t=>{e.emit(!0),this.session.authData.user.user_2fa_method=void 0,this.generateTOTP()},error:()=>{e.emit(!0)}}))})):this.generateTOTP()}),(()=>{e.emit(!0)}))}set2FA(){this.modal.openModal("UserSet2FAModal")}generateTOTP(){this.modal.openModal("TOTPAuthenticationGenerateModal").subscribe((e=>{e.instance.onBehalfUserId=this.session.authData.userId}))}get userimage(){return this.session.authData.user.user_image}get displayDeveloperMode(){return this.session.authData.admin}set currentTz(e){this.userprefs.unchangedPreferences.global&&this.userprefs.unchangedPreferences.global.timezone===e||(this.userprefs.setPreference("timezone",e,!0).subscribe((e=>{this.toast.sendToast(this.language.getLabel("LBL_TIMEZONE_WAS_SET_TO")+": "+e.timezone,"success")}),(e=>{this.toast.sendToast("Error setting timezone.","error")})),this.session.setTimezone(e),this.close())}get currentTz(){return this.userprefs.unchangedPreferences&&this.userprefs.unchangedPreferences.global?this.userprefs.unchangedPreferences.global.timezone:""}clearCache(){this.modal.confirm("MSG_RESET_CACHE","MSG_RESET_CACHE").subscribe({next:e=>{if(e){let e=this.modal.await("LBL_LOADING");this.backend.deleteRequest("system/cache").subscribe((t=>{e.emit(!0),t?this.modal.openModal("GlobalHeaderReloadModal",!1).subscribe((e=>{this.loader.load().subscribe((t=>{!0===t?(this.toast.sendToast("LBL_DATA_RELOADED"),e.instance.self.destroy()):(this.toast.sendToast("error","error","Reload failed"),e.instance.self.destroy())}))})):this.toast.sendToast("LBL_ERROR","error")}))}}})}goAdmin(){this.router.navigate(["/admin"])}close(){this.closepopup.emit(!0)}static#e=this.ɵfac=function(e){return new(e||GlobaUserPanel)(i.rXU(o.B),i.rXU(a.d),i.rXU(r.Ix),i.rXU(d.yu),i.rXU(c.H),i.rXU(u.i),i.rXU(m.y),i.rXU(h.S),i.rXU(g.o),i.rXU(p.s),i.rXU(f.B),i.rXU(b.w),i.rXU(n.g))};static#t=this.ɵcmp=i.VBU({type:GlobaUserPanel,selectors:[["global-user-panel"]],outputs:{closepopup:"closepopup"},features:[i.Jv_([n.g])],decls:29,vars:10,consts:[[1,"slds-is-fixed","slds-box--border","slds-dropdown","slds-dropdown--right","slds-m-right--small","slds-m-top--medium"],[1,"slds-grid","slds-p-around--small","slds-grid--vertical-align-center"],[1,"slds-m-left--small"],[1,"slds-text-heading--medium",3,"ngClass","title","click"],[1,"slds-theme--shade","slds-p-around--small","slds-border--top","slds-border--bottom","slds-grid","slds-grid--vertical-align-center"],[1,"slds-list--horizontal","slds-has-dividers--left","slds-col--bump-right"],[1,"slds-item"],["system-title","LBL_PREFERENCES",1,"slds-button","slds-button--icon",3,"click"],["icon","user_role"],["system-title","LBL_SIGNATURE",1,"slds-button","slds-button--icon",3,"click"],["icon","signature"],["class","slds-item",4,"ngIf"],["class","slds-list--horizontal slds-has-dividers--left",4,"ngIf"],[1,"slds-p-around--small","slds-form--stacked"],[3,"selected"],[1,"slds-form-element"],[1,"slds-form-element__label"],["label","LBL_SELECT_TIMEZONE"],["denyEmpty","true",3,"ngModel","ngModelChange"],[1,"slds-theme--shade","slds-p-around--x-small","slds-grid"],[1,"slds-grid","slds-grid--vertical-align-center"],["class","slds-p-right--xx-small","size","xx-small","system-title","LBL_SOCKET_CONNECTED","icon","omni_channel",4,"ngIf"],[1,"slds-col--bump-left"],["system-title","LBL_LOGOFF",1,"slds-button","slds-button--icon",3,"click"],["icon","logout"],["system-title","LBL_CHANGE_PASSWORD",1,"slds-button","slds-button--icon",3,"click"],["icon","password"],["system-title","LBL_2FA",1,"slds-button","slds-button--icon",3,"click"],["icon","key","size","xx-small",3,"colorclass"],[1,"slds-list--horizontal","slds-has-dividers--left"],["system-title","LBL_RESET_AND_RELOAD",1,"slds-button","slds-button--icon",3,"click"],["icon","refresh"],["system-title","LBL_WORKBENCH",1,"slds-button","slds-button--icon",3,"click"],["icon","settings"],["size","xx-small","system-title","LBL_SOCKET_CONNECTED","icon","omni_channel",1,"slds-p-right--xx-small"]],template:function(e,t){1&e&&(i.j41(0,"div",0)(1,"div",1),i.nrm(2,"global-user-panel-icon"),i.j41(3,"div",2)(4,"h1",3),i.bIt("click",(function(){return t.goDetails()})),i.EFF(5),i.k0s()()(),i.j41(6,"div",4)(7,"ul",5)(8,"li",6)(9,"button",7),i.bIt("click",(function(){return t.openPreferences()})),i.nrm(10,"system-button-icon",8),i.k0s()(),i.j41(11,"li",6)(12,"button",9),i.bIt("click",(function(){return t.editSignature()})),i.nrm(13,"system-button-icon",10),i.k0s()(),i.DNE(14,C,3,0,"li",11)(15,w,3,1,"li",11),i.k0s(),i.DNE(16,S,7,0,"ul",12),i.k0s(),i.j41(17,"div",13)(18,"system-language-selector",14),i.bIt("selected",(function(){return t.close()})),i.k0s(),i.j41(19,"div",15)(20,"label",16),i.nrm(21,"system-label",17),i.k0s(),i.j41(22,"system-input-timezone",18),i.mxI("ngModelChange",(function(e){return i.DH7(t.currentTz,e)||(t.currentTz=e),e})),i.k0s()()(),i.j41(23,"div",19)(24,"div",20),i.DNE(25,E,1,0,"system-utility-icon",21),i.k0s(),i.j41(26,"div",22)(27,"button",23),i.bIt("click",(function(){return t.logoff()})),i.nrm(28,"system-button-icon",24),i.k0s()()()()),2&e&&(i.R7$(4),i.Y8G("ngClass",i.eq3(8,L,t.canOpenUser))("title",t.userName),i.R7$(),i.JRh(t.displayName),i.R7$(9),i.Y8G("ngIf",t.canChangePassword),i.R7$(),i.Y8G("ngIf",t.canChange2fa),i.R7$(),i.Y8G("ngIf",t.displayDeveloperMode),i.R7$(6),i.R50("ngModel",t.currentTz),i.R7$(3),i.Y8G("ngIf",t.socket.connected))},dependencies:[y.YU,y.bT,v.BC,v.vS,_.L,k.t,R.W,I.r,x.B,j.p,G.G],encapsulation:2})}return GlobaUserPanel})()},81572:(e,t,s)=>{"use strict";s.d(t,{G:()=>u});var i=s(54438),n=s(29994),l=s(50531),o=s(49722),a=s(60177),r=s(18521);function d(e,t){1&e&&(i.j41(0,"span",6),i.nrm(1,"system-utility-icon",7),i.k0s())}function c(e,t){if(1&e&&i.nrm(0,"img",8),2&e){const e=i.XpG();i.Y8G("src",e.userimage,i.B4B)}}let u=(()=>{class GlobaUserPanelIcon{constructor(e,t,s){this.session=e,this.modalservice=t,this.backend=s,this.showEdit=!1}changeImage(){this.modalservice.openModal("SystemUploadImage").subscribe((e=>{e.instance.cropheight=150,e.instance.cropwidth=150,e.instance.imagedata.subscribe((e=>{if(!1!==e){let t=this.session.authData.user.user_image;this.session.authData.user.user_image="",this.backend.postRequest("module/Users/"+this.session.authData.userId+"/image",{},{imagedata:e}).subscribe((t=>{this.session.authData.user.user_image=e}),(e=>{this.session.authData.user.user_image=t}))}}))}))}get editstyle(){return{opacity:this.showEdit?1:0}}get userimage(){return this.session.authData.user.user_image}onMouseEnter(){this.showEdit=!0}onMouseLeave(){this.showEdit=!1}static#e=this.ɵfac=function(e){return new(e||GlobaUserPanelIcon)(i.rXU(n.d),i.rXU(l.y),i.rXU(o.H))};static#t=this.ɵcmp=i.VBU({type:GlobaUserPanelIcon,selectors:[["global-user-panel-icon"]],decls:7,vars:3,consts:[[1,"slds-is-relative",3,"mouseenter","mouseleave"],["class","slds-icon_container slds-icon-standard-empty slds-icon_container--circle","style","width:40px;height:40px;",4,"ngIf"],["style","height: 40px; width: 40px",3,"src",4,"ngIf"],[1,"slds-is-absolute__top","slds-align--absolute-center",2,"transition",".5s","height","40px","width","40px",3,"ngStyle","click"],[1,"slds-is-absolute__top",2,"background","white","height","40px","width","40px","opacity",".7"],["icon","edit","size","x-small",2,"z-index","1"],[1,"slds-icon_container","slds-icon-standard-empty","slds-icon_container--circle",2,"width","40px","height","40px"],["icon","user","size","small","addclasses","slds-icon","colorclass",""],[2,"height","40px","width","40px",3,"src"]],template:function(e,t){1&e&&(i.j41(0,"div",0),i.bIt("mouseenter",(function(){return t.onMouseEnter()}))("mouseleave",(function(){return t.onMouseLeave()})),i.j41(1,"div"),i.DNE(2,d,2,0,"span",1)(3,c,1,1,"img",2),i.k0s(),i.j41(4,"div",3),i.bIt("click",(function(){return t.changeImage()})),i.nrm(5,"div",4)(6,"system-utility-icon",5),i.k0s()()),2&e&&(i.R7$(2),i.Y8G("ngIf",!t.userimage),i.R7$(),i.Y8G("ngIf",t.userimage),i.R7$(),i.Y8G("ngStyle",t.editstyle))},dependencies:[a.bT,a.B3,r.B],encapsulation:2})}return GlobaUserPanelIcon})()},12948:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalComponents:()=>ol});var i=s(60177),n=s(84341),l=s(71341),o=s(7745),a=s(37328),r=s(70569),d=s(38845),c=s(84551),u=s(76642),m=s(76064),h=s(70455),g=s(11713),p=s(28154),f=s(27366),b=s(81583),y=s(83448),v=s(54438),k=s(29994),R=s(83935),I=s(69904),x=s(22465),j=s(32062),G=s(18521);const C=["actioncontainerheader"],w=e=>({"slds-is-open":e});let S=(()=>{class GlobalHeaderActions{constructor(e,t,s,i,n){this.renderer=e,this.elementRef=t,this.session=s,this.metadata=i,this.language=n,this.isOpen=!1,this.isVisible=!1,this.isInitialized=!1}initialize(){let e=this.metadata.getComponentConfig("GlobalHeaderActions");if(e&&e.actionset){let t=this.metadata.getActionSetItems(e.actionset);for(let e of t)e.actionconfig?.module&&!this.metadata.checkModuleAcl(e.actionconfig?.module,"create")||(this.isVisible=!0,this.metadata.addComponent(e.component,this.actioncontainerheader).subscribe((t=>{t.instance.actionconfig=e.actionconfig,t.instance.closemenu&&t.instance.closemenu.subscribe((e=>{this.isOpen=!1}))})))}this.isInitialized=!0}toggleOpen(){this.isOpen=!this.isOpen,this.isOpen?(this.isInitialized||this.initialize(),this.clickListener=this.renderer.listen("document","click",(e=>this.onClick(e)))):this.clickListener&&this.clickListener()}onClick(e){this.elementRef.nativeElement.contains(e.target)||(this.isOpen=!1,this.clickListener())}static#e=this.ɵfac=function(e){return new(e||GlobalHeaderActions)(v.rXU(v.sFG),v.rXU(v.aKT),v.rXU(k.d),v.rXU(R.yu),v.rXU(I.B))};static#t=this.ɵcmp=v.VBU({type:GlobalHeaderActions,selectors:[["global-header-actions"]],viewQuery:function(e,t){if(1&e&&v.GBs(C,7,v.c1b),2&e){let e;v.mGM(e=v.lsd())&&(t.actioncontainerheader=e.first)}},decls:9,vars:5,consts:[[1,"slds-show--medium","slds-dropdown-trigger","slds-dropdown-trigger_click","slds-p-horizontal--xxx-small",2,"cursor","pointer",3,"ngClass"],[1,"slds-p-around--xx-small",3,"click"],["system-title","LBL_ADD",3,"icon","size"],[1,"slds-is-absolute","slds-dropdown--medium","slds-dropdown","slds-dropdown_right","slds-nubbin_top-right",2,"right","-11px","top","29px"],["role","menu",1,"slds-dropdown__list"],["role","separator",1,"slds-dropdown__header"],["actioncontainerheader",""],[1,"slds-text-title_caps"],["label","LBL_CREATE"]],template:function(e,t){1&e&&(v.j41(0,"div",0)(1,"div",1),v.bIt("click",(function(){return t.toggleOpen()})),v.nrm(2,"system-utility-icon",2),v.k0s(),v.j41(3,"div",3)(4,"ul",4)(5,"li",5,6)(7,"span",7),v.nrm(8,"system-label",8),v.k0s()()()()()),2&e&&(v.Y8G("ngClass",v.eq3(3,w,t.isOpen)),v.R7$(2),v.Y8G("icon","add")("size","x-small"))},dependencies:[i.YU,x.L,j.W,G.B],encapsulation:2})}return GlobalHeaderActions})();var E=s(35911),L=s(47866),D=s(68823);let F=(()=>{class GlobalHeaderActionItem{constructor(e,t,s,i,n){this.session=e,this.metadata=t,this.model=s,this.language=i,this.dockedComposer=n,this.actionconfig={},this.closemenu=new v.bkB}ngOnInit(){this.actionconfig.module&&(this.model.module=this.actionconfig.module)}click(){this.dockedComposer.addComposer(this.model.module),this.closemenu.emit(!0)}get label(){return this.actionconfig.label?this.language.getLabel(this.actionconfig.label):this.language.getLabel(this.model.module,"LBL_NEW_FORM_TITLE")}static#e=this.ɵfac=function(e){return new(e||GlobalHeaderActionItem)(v.rXU(k.d),v.rXU(R.yu),v.rXU(E.g),v.rXU(I.B),v.rXU(L.n))};static#t=this.ɵcmp=v.VBU({type:GlobalHeaderActionItem,selectors:[["global-header-action-item"]],features:[v.Jv_([E.g])],decls:5,vars:2,consts:[["role","presentation",1,"slds-dropdown__item"],["href","javascript:void(0)",1,"slds-grid","slds-grid_vertical-align-center","slds-p-horizontal--x-small","slds-p-vertical--xx-small",3,"click"],["addclasses","'slds-icon slds-icon_small",3,"module"],[1,"slds-truncate","slds-size--1-of-1"]],template:function(e,t){1&e&&(v.j41(0,"li",0)(1,"a",1),v.bIt("click",(function(){return t.click()})),v.nrm(2,"system-icon",2),v.j41(3,"div",3),v.EFF(4),v.k0s()()()),2&e&&(v.R7$(2),v.Y8G("module",t.model.module),v.R7$(2),v.JRh(t.label))},dependencies:[D.J],encapsulation:2})}return GlobalHeaderActionItem})();var M=s(17266),T=s(60968),B=s(57363),$=s(50531),O=s(25863);const X=["favbutton"];function U(e,t){if(1&e){const e=v.RV6();v.j41(0,"li",20),v.bIt("selected",(function(){v.eBV(e);const t=v.XpG(2);return v.Njj(t.closeFavorites())})),v.k0s()}if(2&e){const e=t.$implicit;v.Y8G("item",e)}}function Y(e,t){if(1&e){const e=v.RV6();v.j41(0,"section",8)(1,"div",9)(2,"ul",10)(3,"li",11)(4,"div",12)(5,"h3",13),v.nrm(6,"system-label",14),v.k0s()()(),v.DNE(7,U,1,1,"li",15),v.k0s()(),v.j41(8,"footer",16)(9,"ul")(10,"li")(11,"button",17),v.bIt("click",(function(){v.eBV(e);const t=v.XpG();return v.Njj(t.openEditModal())})),v.nrm(12,"system-button-icon",18)(13,"system-label",19),v.k0s()()()()()}if(2&e){const e=v.XpG();v.R7$(7),v.Y8G("ngForOf",e.favorite.favorites)}}const N=e=>({"slds-is-selected":e});let V=(()=>{class GlobalHeaderFavorite{constructor(e,t,s,i,n,l,o,a){this.metadata=e,this.favorite=t,this.navigation=s,this.router=i,this.renderer=n,this.elementRef=l,this.language=o,this.modal=a,this.showFavorites=!1,this.navigation.activeTab$.subscribe((e=>this.handleNavigationChange()))}get canShowFavorites(){return this.metadata.getActiveRole().showfavorites&&"0"!=this.metadata.getActiveRole().showfavorites}get nofavorites(){return 0==this.favorite.favorites.length}handleNavigationChange(){let e=this.navigation.activeTabObject;if("main"==e.id)return this.favorite.disable();"module/:module/:id"==this.metadata.getRouteDetails(e.path.replace("tab/:tabid/","")).path?this.favorite.enable(e.params.module,e.params.id):this.favorite.disable()}toggleFavorite(){this.favorite.isFavorite?this.favorite.deleteFavorite():this.favorite.setFavorite(),this.favbutton.element.nativeElement.blur()}closeFavorites(){this.showFavorites=!1}toggleFavorites(){this.showFavorites=!this.showFavorites,this.showFavorites?this.clickListener=this.renderer.listen("document","click",(e=>this.onClick(e))):this.clickListener&&this.clickListener()}onClick(e){this.elementRef.nativeElement.contains(e.target)||(this.showFavorites=!1,this.clickListener())}openEditModal(){this.modal.openModal("SpiceFavoritesEditModal")}static#e=this.ɵfac=function(e){return new(e||GlobalHeaderFavorite)(v.rXU(R.yu),v.rXU(M.B),v.rXU(T.L),v.rXU(B.Ix),v.rXU(v.sFG),v.rXU(v.aKT),v.rXU(I.B),v.rXU($.y))};static#t=this.ɵcmp=v.VBU({type:GlobalHeaderFavorite,selectors:[["global-header-favorite"]],viewQuery:function(e,t){if(1&e&&v.GBs(X,5,v.c1b),2&e){let e;v.mGM(e=v.lsd())&&(t.favbutton=e.first)}},decls:8,vars:6,consts:[[1,"slds-global-actions__favorites","slds-m-around--none","slds-dropdown-trigger","slds-dropdown-trigger_click"],[1,"slds-button-group"],["system-title","LBL_MARK_FAVORITE",1,"slds-button","slds-button_icon","slds-global-actions__favorites-action","slds-button_icon","slds-button_icon-border","slds-button_icon-small",3,"disabled","ngClass","click"],["favbutton",""],["icon","favorite"],["system-title","LBL_ALL_FAVORITES",1,"slds-button","slds-button_icon","slds-global-actions__favorites-more","slds-button_icon","slds-button_icon-border","slds-button_icon-small",3,"disabled","click"],["icon","down"],["class","slds-popover slds-nubbin--top-right slds-dynamic-menu","role","dialog","style","position:absolute;right:-15px;top:37px",4,"ngIf"],["role","dialog",1,"slds-popover","slds-nubbin--top-right","slds-dynamic-menu",2,"position","absolute","right","-15px","top","37px"],[1,"slds-popover__body","slds-p-horizontal_none"],[1,"slds-listbox","slds-listbox_vertical","slds-dropdown_length-10"],["role","presentation",1,"slds-listbox__item"],["role","presentation",1,"slds-media","slds-listbox__option","slds-listbox__option_plain"],["role","presentation",1,"slds-listbox__option-header"],["label","LBL_FAVORITES"],["global-header-search-recent-item","","role","presentation","class","slds-listbox__item",3,"item","selected",4,"ngFor","ngForOf"],[1,"slds-popover__footer"],[1,"slds-button","slds-button_reset","slds-p-vertical_xx-small","slds-size_1-of-1",3,"click"],["icon","edit",1,"slds-p-right--xx-small"],["label","LBL_EDIT_FAVORITES"],["global-header-search-recent-item","","role","presentation",1,"slds-listbox__item",3,"item","selected"]],template:function(e,t){1&e&&(v.j41(0,"div",0)(1,"div",1)(2,"button",2,3),v.bIt("click",(function(){return t.toggleFavorite()})),v.nrm(4,"system-button-icon",4),v.k0s(),v.j41(5,"button",5),v.bIt("click",(function(){return t.toggleFavorites()})),v.nrm(6,"system-button-icon",6),v.k0s()(),v.DNE(7,Y,14,1,"section",7),v.k0s()),2&e&&(v.R7$(2),v.Y8G("disabled",!t.favorite.isEnabled)("ngClass",v.eq3(4,N,t.favorite.isFavorite)),v.R7$(3),v.Y8G("disabled",t.nofavorites),v.R7$(2),v.Y8G("ngIf",t.showFavorites))},dependencies:[i.YU,i.Sq,i.bT,x.L,O.t,j.W,b.t],encapsulation:2})}return GlobalHeaderFavorite})();function A(e,t){if(1&e){const e=v.RV6();v.j41(0,"button",1),v.bIt("click",(function(){v.eBV(e);const t=v.XpG();return v.Njj(t.toggleEnabled())})),v.nrm(1,"system-button-icon",2),v.k0s()}if(2&e){const e=v.XpG();v.AVh("slds-is-selected",e.language.inlineEditEnabled),v.R7$(),v.Y8G("addclasses","slds-button--icon-xx-small "+(e.language.inlineEditEnabled?"slds-text-color_success":"slds-text-color--inverse-weak"))}}let P=(()=>{class GlobalHeaderLabelInlineEdit{constructor(e,t){this.language=e,this.session=t}toggleEnabled(){this.language.inlineEditEnabled=!this.language.inlineEditEnabled,this.language.currentlanguage$.emit(this.language.currentlanguage)}static#e=this.ɵfac=function(e){return new(e||GlobalHeaderLabelInlineEdit)(v.rXU(I.B),v.rXU(k.d))};static#t=this.ɵcmp=v.VBU({type:GlobalHeaderLabelInlineEdit,selectors:[["global-header-label-inline-edit"]],decls:1,vars:1,consts:[["system-title","LBL_ENABLE_INLINE_EDIT","class","slds-button slds-button_icon slds-button_icon slds-button_icon-small",3,"slds-is-selected","click",4,"ngIf"],["system-title","LBL_ENABLE_INLINE_EDIT",1,"slds-button","slds-button_icon","slds-button_icon","slds-button_icon-small",3,"click"],["icon","text",3,"addclasses"]],template:function(e,t){1&e&&v.DNE(0,A,2,3,"button",0),2&e&&v.Y8G("ngIf",t.session.isAdmin)},dependencies:[i.bT,x.L,O.t],encapsulation:2})}return GlobalHeaderLabelInlineEdit})();function z(e,t){if(1&e){const e=v.RV6();v.j41(0,"div",1),v.bIt("click",(function(){v.eBV(e);const t=v.XpG();return v.Njj(t.goAdmin())})),v.nrm(1,"system-utility-icon",2),v.k0s()}if(2&e){const e=v.XpG();v.Y8G("title",e.language.getLabel("LBL_WORKBENCH")),v.R7$(),v.Y8G("icon","setup")("size","x-small")}}let H=(()=>{class GlobalHeaderWorkbench{constructor(e,t,s){this.session=e,this.router=t,this.language=s}isAdmin(){return this.session.isAdmin}goAdmin(){this.router.navigate(["/admin"])}static#e=this.ɵfac=function(e){return new(e||GlobalHeaderWorkbench)(v.rXU(k.d),v.rXU(B.Ix),v.rXU(I.B))};static#t=this.ɵcmp=v.VBU({type:GlobalHeaderWorkbench,selectors:[["global-header-workbench"]],decls:1,vars:1,consts:[["class","slds-p-around--xx-small","style","cursor: pointer;",3,"title","click",4,"ngIf"],[1,"slds-p-around--xx-small",2,"cursor","pointer",3,"title","click"],[3,"icon","size"]],template:function(e,t){1&e&&v.DNE(0,z,2,3,"div",0),2&e&&v.Y8G("ngIf",t.isAdmin())},dependencies:[i.bT,G.B],encapsulation:2})}return GlobalHeaderWorkbench})();var q=s(20673),J=s(53584),W=s(41081),K=s(48717);function Q(e,t){if(1&e){const e=v.RV6();v.j41(0,"div",2),v.bIt("click",(function(){v.eBV(e);const t=v.XpG();return v.Njj(t.reloadConf())})),v.nrm(1,"system-utility-icon",3),v.k0s()}2&e&&(v.R7$(),v.Y8G("icon","sync")("size","x-small"))}function Z(e,t){1&e&&(v.j41(0,"div",4),v.nrm(1,"system-spinner",5),v.k0s())}let ee=(()=>{class GlobalHeaderReload{constructor(e,t,s,i,n,l){this.session=e,this.router=t,this.loader=s,this.modal=i,this.configuration=n,this.toast=l,this.loadTasks=!1}isAdmin(){return this.session.isAdmin}reloadConf(){this.loadTasks=!0,this.modal.openModal("GlobalHeaderReloadModal",!1).subscribe((e=>{this.loadermodal=e})),this.loader.load().subscribe((e=>{!0===e?(this.toast.sendToast("LBL_DATA_RELOADED"),this.loadTasks=!1,this.loadermodal.instance.self.destroy()):(this.toast.sendToast("error","error","Reload failed"),this.loadTasks=!1,this.loadermodal.instance.self.destroy())}))}static#e=this.ɵfac=function(e){return new(e||GlobalHeaderReload)(v.rXU(k.d),v.rXU(B.Ix),v.rXU(q.w),v.rXU($.y),v.rXU(J.i),v.rXU(W.o))};static#t=this.ɵcmp=v.VBU({type:GlobalHeaderReload,selectors:[["global-header-reload"]],decls:2,vars:2,consts:[["class","slds-p-around--xx-small","system-title","LBL_RELOAD_CONFIGURATION",3,"click",4,"ngIf"],["class","slds-p-around--xx-small","system-title","LBL_RELOAD_CONFIGURATION",4,"ngIf"],["system-title","LBL_RELOAD_CONFIGURATION",1,"slds-p-around--xx-small",3,"click"],[3,"icon","size"],["system-title","LBL_RELOAD_CONFIGURATION",1,"slds-p-around--xx-small"],["size","12"]],template:function(e,t){1&e&&v.DNE(0,Q,2,2,"div",0)(1,Z,2,0,"div",1),2&e&&(v.Y8G("ngIf",t.isAdmin()&&!t.loadTasks),v.R7$(),v.Y8G("ngIf",t.isAdmin()&&t.loadTasks))},dependencies:[i.bT,x.L,K.P,G.B],encapsulation:2})}return GlobalHeaderReload})();var te=s(62165);let se=(()=>{class GlobalSetup{static#e=this.ɵfac=function(e){return new(e||GlobalSetup)};static#t=this.ɵcmp=v.VBU({type:GlobalSetup,selectors:[["global-setup"]],decls:0,vars:0,template:function(e,t){},encapsulation:2})}return GlobalSetup})();var ie=s(27533),ne=s(72217),le=s(5220),oe=s(16535),ae=s(21626),re=s(54095),de=s(40145);function ce(e,t){if(1&e&&(v.j41(0,"div",17),v.EFF(1),v.nrm(2,"br"),v.k0s()),2&e){const e=v.XpG();v.R7$(),v.SpI(" password Requirements: ",e.pwdGuideline,"")}}function ue(e,t){if(1&e&&(v.j41(0,"div",18),v.EFF(1),v.k0s()),2&e){const e=v.XpG();v.R7$(),v.JRh(e.pwderror)}}function me(e,t){if(1&e&&(v.j41(0,"div",18),v.EFF(1),v.k0s()),2&e){const e=v.XpG();v.R7$(),v.JRh(e.oldPwError)}}function he(e,t){if(1&e&&(v.j41(0,"div",18),v.EFF(1),v.k0s()),2&e){const e=v.XpG();v.R7$(),v.JRh(e.pwdreperror)}}const ge=e=>({"slds-has-error":e});let pe=(()=>{class GlobalLoginResetPassword{constructor(e,t,s,i,n,l){this.loginService=e,this.http=t,this.configuration=s,this.toast=i,this.session=n,this.language=l,this.closeRenewDialog=new v.bkB,this.pwdCheck=new RegExp("//"),this.posting=!1,this.getInfo()}get oldPwError(){return this.oldPassword==this.password&&"Old password is not allowed to be used as a new password"}get pwderror(){return!(!this.password||this.pwdCheck.test(this.password))&&"Password does not match the Guideline."}get pwdreperror(){return this.password!=this.repeatPassword&&"Inputs for the new Password does not match."}closeDialog(){this.closeRenewDialog.emit(!0)}keypressed(e){"Enter"===e.key&&this.sendNewPass(),"Escape"===e.key&&this.closeDialog()}getInfo(){let e=this.configuration.getCapabilityConfig("userpassword");this.pwdCheck=new RegExp(e.regex);let t=[];e.onelower&&t.push("one lower case"),e.oneupper&&t.push("one upper case"),e.onespecial&&t.push("one special"),e.onenumber&&t.push("one number"),e.minpwdlength&&t.push("minimum length "+e.minpwdlength),this.pwdGuideline=t.join(", ")}get canSave(){return this.password&&0==this.oldPwError&&0==this.pwderror&&0==this.pwdreperror&&!this.posting}sendNewPass(){if(this.canSave){let e=new ae.Lr;e=e.set("OAuth-Token",this.session.authData.sessionId),this.posting=!0,this.http.post(this.configuration.getBackendUrl()+"/resetTempPass",{password:this.password},{headers:e}).subscribe((e=>{this.toast.sendToast("Password was successfully changed","success","",5),this.loginService.load()}),(e=>{this.posting=!1}))}}static#e=this.ɵfac=function(e){return new(e||GlobalLoginResetPassword)(v.rXU(re.B),v.rXU(ae.Qq),v.rXU(J.i),v.rXU(W.o),v.rXU(k.d),v.rXU(I.B))};static#t=this.ɵcmp=v.VBU({type:GlobalLoginResetPassword,selectors:[["global-login-reset-password"]],hostBindings:function(e,t){1&e&&v.bIt("keyup",(function(e){return t.keypressed(e)}),!1,v.tSv)},inputs:{oldPassword:[v.Mj6.None,"oldpassword","oldPassword"]},outputs:{closeRenewDialog:"closeRenewDialog"},decls:24,vars:14,consts:[["id","reset-password"],[2,"height","640px"],["role","dialog","tabindex","-1","aria-labelledby","modal-heading-01","aria-describedby","modal-content-id-1",1,"slds-modal","slds-fade-in-open"],[1,"slds-modal__container"],[1,"slds-modal__header"],["title","Close",1,"slds-button","slds-button_icon","slds-modal__close","slds-button_icon-inverse",3,"click"],[3,"icon"],[1,"slds-assistive-text"],["id","modal-heading-01",1,"slds-text-heading_medium","slds-hyphenate"],["id","modal-content-id-1",1,"slds-modal__content","slds-p-around_medium"],["class","slds-m-vertical--medium",4,"ngIf"],[1,"slds-form-element","slds-m-vertical--small",3,"ngClass"],[3,"ngModel","ngModelChange"],["class","slds-form-element__help slds-text-color--error",4,"ngIf"],[1,"slds-modal__footer"],["tabindex","3",1,"slds-button","slds-button--brand",3,"disabled","click"],[1,"slds-backdrop","slds-backdrop_open"],[1,"slds-m-vertical--medium"],[1,"slds-form-element__help","slds-text-color--error"]],template:function(e,t){1&e&&(v.j41(0,"div",0)(1,"div",1)(2,"section",2)(3,"div",3)(4,"header",4)(5,"button",5),v.bIt("click",(function(){return t.closeDialog()})),v.nrm(6,"system-button-icon",6),v.j41(7,"span",7),v.EFF(8,"Close"),v.k0s()(),v.j41(9,"h2",8),v.EFF(10,"New password"),v.k0s()(),v.j41(11,"div",9),v.DNE(12,ce,3,1,"div",10),v.j41(13,"div",11)(14,"system-input-password",12),v.mxI("ngModelChange",(function(e){return v.DH7(t.password,e)||(t.password=e),e})),v.k0s(),v.DNE(15,ue,2,1,"div",13)(16,me,2,1,"div",13),v.k0s(),v.j41(17,"div",11)(18,"system-input-password",12),v.mxI("ngModelChange",(function(e){return v.DH7(t.repeatPassword,e)||(t.repeatPassword=e),e})),v.k0s(),v.DNE(19,he,2,1,"div",13),v.k0s()(),v.j41(20,"footer",14)(21,"button",15),v.bIt("click",(function(){return t.sendNewPass()})),v.EFF(22,"Save"),v.k0s()()()(),v.nrm(23,"div",16),v.k0s()()),2&e&&(v.R7$(6),v.Y8G("icon","close"),v.R7$(6),v.Y8G("ngIf",t.pwdGuideline),v.R7$(),v.Y8G("ngClass",v.eq3(10,ge,t.pwderror||t.oldPwError)),v.R7$(),v.R50("ngModel",t.password),v.R7$(),v.Y8G("ngIf",""!=t.password&&t.pwderror),v.R7$(),v.Y8G("ngIf",""!=t.password&&t.oldPwError),v.R7$(),v.Y8G("ngClass",v.eq3(12,ge,t.pwdreperror)),v.R7$(),v.R50("ngModel",t.repeatPassword),v.R7$(),v.Y8G("ngIf",""!=t.repeatPassword&&t.pwdreperror),v.R7$(2),v.Y8G("disabled",!t.canSave))},dependencies:[i.YU,i.bT,n.BC,n.vS,O.t,de.B],encapsulation:2})}return GlobalLoginResetPassword})();var fe=s(49722),be=s(82802);function ye(e,t){if(1&e){const e=v.RV6();v.j41(0,"button",1),v.bIt("click",(function(t){v.eBV(e);const s=v.XpG();return v.Njj(s.signIn(t))})),v.j41(1,"div",2),v.nrm(2,"img",3),v.j41(3,"div"),v.EFF(4,"Sign in with Google"),v.k0s()()()}}let ve=(()=>{class GlobalLoginGoogle{constructor(e,t,s,i,n,l,o){this.backend=e,this.configuration=t,this.http=s,this.loginService=i,this.session=n,this.libloader=l,this.toast=o,this.visible=!1,this.disabled=!0,this.token=new v.bkB,this.configuration.loaded$.subscribe((e=>{e&&this.googleInit()}))}googleInit(){let e=this.configuration.getCapabilityConfig("google_oauth");e?.clientid&&(this.visible=!0,this.libloader.loadFromSource(["https://apis.google.com/js/platform.js"]).subscribe((t=>{gapi.load("auth2",(()=>{this.auth2=gapi.auth2.init({client_id:e.clientid,cookiepolicy:"single_host_origin"}),this.disabled=!1}))}),(e=>{this.disabled=!0})))}signIn(e){e.preventDefault(),e.stopPropagation(),Promise.resolve(this.auth2.signIn()).then((e=>{let t=this.auth2.currentUser.get().getBasicProfile().getEmail();!this.authenticatedUser||this.authenticatedUser&&this.authenticatedUser==t?this.token.emit(e.getAuthResponse().id_token):this.authenticatedUser&&this.authenticatedUser!=t&&this.toast.sendToast("Wrong username","warning","usernames do not match, pleas elogin with the proper user")})).catch((e=>{this.toast.sendToast("Error with Google Login","error")}))}static#e=this.ɵfac=function(e){return new(e||GlobalLoginGoogle)(v.rXU(fe.H),v.rXU(J.i),v.rXU(ae.Qq),v.rXU(re.B),v.rXU(k.d),v.rXU(be.b),v.rXU(W.o))};static#t=this.ɵcmp=v.VBU({type:GlobalLoginGoogle,selectors:[["global-login-google"]],inputs:{authenticatedUser:"authenticatedUser"},outputs:{token:"token"},decls:1,vars:1,consts:[["class","slds-button slds-button_neutral slds-size--1-of-1",3,"click",4,"ngIf"],[1,"slds-button","slds-button_neutral","slds-size--1-of-1",3,"click"],[1,"slds-align--absolute-center","slds-grid","slds-grid--vertical-align-center"],["src","https://developers.google.com/identity/images/g-logo.png",2,"height","18px","width","18px","margin-right","24px"]],template:function(e,t){1&e&&v.DNE(0,ye,5,0,"button",0),2&e&&v.Y8G("ngIf",t.visible)},dependencies:[i.bT],encapsulation:2})}return GlobalLoginGoogle})();var _e=s(11280),ke=s(32130),Re=s(84359),Ie=s(40713),xe=s(25028),je=s(83524),Ge=s(18122);const Ce=["twofactorinput"];function we(e,t){if(1&e&&(v.j41(0,"div",18),v.nrm(1,"system-icon",19),v.j41(2,"h2"),v.EFF(3),v.k0s()()),2&e){const e=v.XpG();let t;v.R7$(3),v.JRh(null!==(t=null==e.loginLabels.ERR_RECOVERY_MODE_ENABLED?null:e.loginLabels.ERR_RECOVERY_MODE_ENABLED.default)&&void 0!==t?t:"The system is currently in recovery mode. Only admin login allowed.")}}function Se(e,t){if(1&e&&(v.j41(0,"div",20),v.nrm(1,"system-icon",19),v.j41(2,"h2"),v.EFF(3),v.k0s()()),2&e){const e=v.XpG();let t;v.R7$(3),v.JRh(null!==(t=null==e.loginLabels.ERR_MAINTENANCE_MODE_ENABLED?null:e.loginLabels.ERR_MAINTENANCE_MODE_ENABLED.default)&&void 0!==t?t:"The system is currently in maintenance mode. Only admin login allowed.")}}function Ee(e,t){if(1&e){const e=v.RV6();v.j41(0,"system-checkbox",33),v.mxI("ngModelChange",(function(t){v.eBV(e);const s=v.XpG(3);return v.DH7(s.rememberDevice,t)||(s.rememberDevice=t),v.Njj(t)})),v.nrm(1,"system-label",34),v.k0s()}if(2&e){const e=v.XpG(3);v.R50("ngModel",e.rememberDevice)}}function Le(e,t){if(1&e){const e=v.RV6();v.j41(0,"div",27)(1,"div",28),v.nrm(2,"system-utility-icon",29),v.j41(3,"input",30,31),v.mxI("ngModelChange",(function(t){v.eBV(e);const s=v.XpG(2);return v.DH7(s.code2fa,t)||(s.code2fa=t),v.Njj(t)})),v.k0s()(),v.DNE(5,Ee,2,1,"system-checkbox",32),v.k0s()}if(2&e){const e=v.XpG(2);let t;v.R7$(3),v.Y8G("disabled",e.loggingIn),v.R50("ngModel",e.code2fa),v.Y8G("placeholder",null!==(t=null==e.loginLabels.LBL_ENTER_CODE?null:e.loginLabels.LBL_ENTER_CODE.default)&&void 0!==t?t:"Enter code"),v.R7$(2),v.Y8G("ngIf",e.rememberDeviceVisible)}}function De(e,t){if(1&e){const e=v.RV6();v.qex(0),v.j41(1,"div",9)(2,"div",10),v.nrm(3,"system-utility-icon",21),v.j41(4,"input",22),v.mxI("ngModelChange",(function(t){v.eBV(e);const s=v.XpG();return v.DH7(s.password,t)||(s.password=t),v.Njj(t)})),v.k0s()(),v.DNE(5,Le,6,4,"div",23),v.k0s(),v.j41(6,"div",24)(7,"button",25),v.bIt("click",(function(){v.eBV(e);const t=v.XpG();return v.Njj(t.relogin())})),v.nrm(8,"system-label",26),v.k0s()(),v.bVm()}if(2&e){const e=v.XpG();v.R7$(4),v.Y8G("disabled",e.loggingIn),v.R50("ngModel",e.password),v.R7$(),v.Y8G("ngIf",e.twoFactorAuthCodeRequired),v.R7$(2),v.Y8G("disabled",!e.password)}}function Fe(e,t){if(1&e){const e=v.RV6();v.j41(0,"div",35)(1,"global-login-oauth2",36),v.bIt("token",(function(t){v.eBV(e);const s=v.XpG();return v.Njj(s.tokenLogin(t))})),v.k0s()()}if(2&e){const e=v.XpG();v.R7$(),v.Y8G("authenticatedUser",e.session.authData.userName)("issuer",e.login.oauthIssuer)}}let Me=(()=>{class GlobalReLogin{constructor(e,t,s,i){this.login=e,this.toast=t,this.session=s,this.configuration=i,this.loggedin=new v.bkB,this.loggingIn=!1,this.twoFactorAuthCodeRequired=!1,this.rememberDevice=!1,this.rememberDeviceVisible=!1,this.load2FAConfig()}get loginLabels(){return this.configuration.data.languages?.required_labels??{}}load2FAConfig(){const e=this.configuration.getCapabilityConfig("login")?.twofactor;window._.isEmpty(e)||(this.rememberDevice="device_change"==e.onlogin.enforced,this.rememberDeviceVisible="always"!=e.onlogin.enforced)}tokenLogin(e){this.loggingIn=!0,this.login.relogin(null,e.tokenObject).subscribe({next:e=>{this.loggedin.emit(!0),this.close()},error:()=>{this.loggingIn=!1}})}relogin(){this.loggingIn=!0,this.login.authData.code2fa=this.code2fa,this.login.authData.rememberDevice=this.rememberDevice,this.login.relogin(this.password,null).subscribe({next:e=>{this.loggedin.emit(!0),this.close()},error:e=>{4==e.errorCode&&(this.toast.sendToast(e.message,"success"),this.twoFactorAuthCodeRequired=!0,setTimeout((()=>{this.twofactorinput&&this.twofactorinput.element.nativeElement.focus()}))),this.loggingIn=!1}})}logout(){this.login.logout(!0),this.close()}close(){this.self.destroy()}static#e=this.ɵfac=function(e){return new(e||GlobalReLogin)(v.rXU(re.B),v.rXU(W.o),v.rXU(k.d),v.rXU(J.i))};static#t=this.ɵcmp=v.VBU({type:GlobalReLogin,selectors:[["global-re-login"]],viewQuery:function(e,t){if(1&e&&v.GBs(Ce,5,v.c1b),2&e){let e;v.mGM(e=v.lsd())&&(t.twofactorinput=e.first)}},outputs:{loggedin:"loggedin"},decls:18,vars:7,consts:[["size","prompt"],[3,"hiddenCloseButton"],["label","MSG_SESSIONEXPIRED"],["margin","medium",3,"system-overlay-loading-spinner"],[1,"slds-grid","slds-grid--vertical"],["class","slds-notify slds-notify_alert slds-alert_error","role","alert",4,"ngIf"],["class","slds-notify slds-notify_alert slds-alert_warning","role","alert",4,"ngIf"],[1,"slds-p-vertical--small","slds-align--absolute-center"],["label","MSG_SESSIONEXPIRED","length","long"],[1,"slds-form-element","slds-m-vertical--small"],[1,"slds-form-element__control","slds-input-has-icon","slds-input-has-icon_left"],["icon","user","addclasses","slds-input__icon slds-icon-text-default"],["disabled","","type","text","name","username",1,"slds-input","slds-p-vertical--xx-small",3,"ngModel","ngModelChange"],[4,"ngIf"],["class","slds-p-top--small",4,"ngIf"],[1,"slds-p-top--small","slds-m-top--small","slds-border--top"],[1,"slds-button","slds-button--neutral","slds-button_stretch",3,"click"],["label","LBL_LOGOUT"],["role","alert",1,"slds-notify","slds-notify_alert","slds-alert_error"],["icon","error","sprite","utility","addclasses","slds-m-right_x-small slds-icon-text-warning","divClass","slds-icon-utility-error"],["role","alert",1,"slds-notify","slds-notify_alert","slds-alert_warning"],["icon","lock","addclasses","slds-icon slds-input__icon slds-input__icon_left slds-icon-text-default"],["type","password","name","password","autocomplete","","tabindex","2","placeholder","Password",1,"slds-input","slds-p-vertical--xx-small",3,"disabled","ngModel","ngModelChange"],["class","slds-form-element slds-m-vertical--small slds-grid slds-grid--vertical-align-center",4,"ngIf"],[1,"slds-p-vertical--xx-small"],[1,"slds-button","slds-button--brand","slds-button_stretch",3,"disabled","click"],["label","LBL_LOGIN"],[1,"slds-form-element","slds-m-vertical--small","slds-grid","slds-grid--vertical-align-center"],[1,"slds-form-element__control","slds-input-has-icon","slds-input-has-icon_left","slds-grow"],["icon","scan","addclasses","slds-icon slds-input__icon slds-input__icon_left slds-icon-text-default"],["type","text","name","code2fa","autocomplete","off","tabindex","2",1,"slds-input","slds-p-vertical--xx-small",3,"disabled","ngModel","placeholder","ngModelChange"],["twofactorinput",""],["name","remember-device","class","slds-m-left--xx-small",3,"ngModel","ngModelChange",4,"ngIf"],["name","remember-device",1,"slds-m-left--xx-small",3,"ngModel","ngModelChange"],["label","LBL_REMEMBER_DEVICE"],[1,"slds-p-top--small"],[3,"authenticatedUser","issuer","token"]],template:function(e,t){1&e&&(v.j41(0,"system-modal",0)(1,"system-modal-header",1),v.nrm(2,"system-label",2),v.k0s(),v.j41(3,"system-modal-content",3)(4,"div",4),v.DNE(5,we,4,1,"div",5)(6,Se,4,1,"div",6),v.j41(7,"div",7),v.nrm(8,"system-label",8),v.k0s(),v.j41(9,"div",9)(10,"div",10),v.nrm(11,"system-utility-icon",11),v.j41(12,"input",12),v.mxI("ngModelChange",(function(e){return v.DH7(t.session.authData.userName,e)||(t.session.authData.userName=e),e})),v.k0s()()(),v.DNE(13,De,9,4,"ng-container",13)(14,Fe,2,2,"div",14),v.j41(15,"div",15)(16,"button",16),v.bIt("click",(function(){return t.logout()})),v.nrm(17,"system-label",17),v.k0s()()()()()),2&e&&(v.R7$(),v.Y8G("hiddenCloseButton",!0),v.R7$(2),v.Y8G("system-overlay-loading-spinner",t.loggingIn),v.R7$(2),v.Y8G("ngIf","recovery"==t.configuration.data.startupMode),v.R7$(),v.Y8G("ngIf","maintenance"==t.configuration.data.startupMode),v.R7$(6),v.R50("ngModel",t.session.authData.userName),v.R7$(),v.Y8G("ngIf",!t.login.oauthIssuer||"SpiceCRM"==t.login.oauthIssuer),v.R7$(),v.Y8G("ngIf","SpiceCRM"!=t.login.oauthIssuer))},dependencies:[i.bT,n.me,n.BC,n.vS,ke.M,Re.f,D.J,j.W,Ie.D,xe.I,je.C,G.B,Ge.q],encapsulation:2})}return GlobalReLogin})();var Te=s(40605),Be=s(88418),$e=s(37804);function Oe(e,t){1&e&&(v.j41(0,"div",6),v.nrm(1,"system-spinner",14)(2,"system-label",15),v.k0s())}function Xe(e,t){if(1&e&&v.nrm(0,"system-progress-bar",16),2&e){const e=v.XpG();v.Y8G("progress",e.progress)("hideText",!0)}}let Ue=(()=>{class GlobalReConnect{constructor(e,t,s){this.http=e,this.configuration=t,this.login=s,this.connected=new v.bkB,this.timeToNextCheck=1e3}ngOnInit(){this.timerSubscription=(0,Te.Y)(10).subscribe((e=>{this.timeToNextCheck--,this.checkReconnect()}))}ngOnDestroy(){this.timerSubscription.unsubscribe()}checkReconnect(){0==this.timeToNextCheck&&this.reconnect()}get progress(){return this.timeToNextCheck/10}reconnect(){let e=this.configuration.getBackendUrl()+"/sysinfo";this.http.get(e).subscribe((e=>{this.connected.emit(!0),this.close()}),(e=>{console.log(e),this.timeToNextCheck=1e3}))}logout(){this.login.logout(!0),this.close()}close(){this.self.destroy()}static#e=this.ɵfac=function(e){return new(e||GlobalReConnect)(v.rXU(ae.Qq),v.rXU(J.i),v.rXU(re.B))};static#t=this.ɵcmp=v.VBU({type:GlobalReConnect,selectors:[["global-re-connect"]],outputs:{connected:"connected"},decls:15,vars:3,consts:[["size","prompt"],[3,"hiddenCloseButton"],["label","MSG_CONNECTION_LOST"],["margin","large"],[1,"slds-grid","slds-grid_vertical","slds-size--1-of-1","slds-align_absolute-center"],["label","MSG_CONNECTION_LOST","length","long"],[1,"slds-grid","slds-grid_vertical-align-center"],[1,"slds-grow","slds-p-right--small"],["class","slds-grid slds-grid_vertical-align-center",4,"ngIf"],[3,"progress","hideText",4,"ngIf"],[1,"slds-button","slds-button--neutral",3,"click"],["label","LBL_LOGOUT"],[1,"slds-button","slds-button--brand",3,"click"],["label","LBL_RECONNECT_NOW"],["size","16"],["label","LBL_RECONNECTING",1,"slds-p-left--small"],[3,"progress","hideText"]],template:function(e,t){1&e&&(v.j41(0,"system-modal",0)(1,"system-modal-header",1),v.nrm(2,"system-label",2),v.k0s(),v.j41(3,"system-modal-content",3)(4,"div",4),v.nrm(5,"system-label",5),v.k0s()(),v.j41(6,"system-modal-footer")(7,"div",6)(8,"div",7),v.DNE(9,Oe,3,0,"div",8)(10,Xe,1,2,"system-progress-bar",9),v.k0s(),v.j41(11,"button",10),v.bIt("click",(function(){return t.logout()})),v.nrm(12,"system-label",11),v.k0s(),v.j41(13,"button",12),v.bIt("click",(function(){return t.reconnect()})),v.nrm(14,"system-label",13),v.k0s()()()()),2&e&&(v.R7$(),v.Y8G("hiddenCloseButton",!0),v.R7$(8),v.Y8G("ngIf",t.timeToNextCheck<0),v.R7$(),v.Y8G("ngIf",t.timeToNextCheck>0))},dependencies:[i.bT,j.W,Ie.D,xe.I,Be.Q,je.C,$e.Y,K.P],encapsulation:2})}return GlobalReConnect})();var Ye=s(45184),Ne=s(91175),Ve=s(67515),Ae=s(41731),Pe=s(40553),ze=s(72541),He=s(98427),qe=s(44985);const Je=["menulist"],We=["menucontainer"];function Ke(e,t){if(1&e){const e=v.RV6();v.j41(0,"div",11)(1,"button",12),v.bIt("click",(function(){v.eBV(e);const t=v.XpG();return v.Njj(t.toggleOpen())})),v.nrm(2,"system-button-icon",13),v.k0s()()}2&e&&(v.R7$(2),v.Y8G("icon","chevrondown"))}const Qe=e=>({"slds-hide":e}),Ze=e=>({"slds-disabled-text":e});function et(e,t){if(1&e){const e=v.RV6();v.j41(0,"li",15),v.bIt("click",(function(){const t=v.eBV(e).$implicit,s=v.XpG(2);return v.Njj(s.propagateclick(t.id))})),v.j41(1,"a",16),v.nrm(2,"global-navigation-menu-item-action-container",17),v.k0s()()}if(2&e){const e=t.$implicit,s=v.XpG(2);v.Y8G("ngClass",v.eq3(3,Qe,s.isHidden(e.id))),v.R7$(2),v.Y8G("ngClass",v.eq3(5,Ze,s.isDisabled(e.id)))("actionitem",e)}}function tt(e,t){if(1&e&&(v.qex(0),v.DNE(1,et,3,7,"li",14),v.bVm()),2&e){const e=v.XpG();v.R7$(),v.Y8G("ngForOf",e.itemMenu)}}function st(e,t){if(1&e){const e=v.RV6();v.j41(0,"li",23),v.bIt("click",(function(){const t=v.eBV(e).$implicit,s=v.XpG(2);return v.Njj(s.navigateRecent(t.item_id))})),v.j41(1,"a",16)(2,"span",2),v.EFF(3),v.k0s()()()}if(2&e){const e=t.$implicit;v.R7$(3),v.JRh(e.item_summary)}}function it(e,t){if(1&e&&(v.qex(0),v.nrm(1,"li",18),v.j41(2,"li",19)(3,"span",20),v.nrm(4,"system-label",21),v.k0s()(),v.DNE(5,st,4,1,"li",22),v.bVm()),2&e){const e=v.XpG();v.R7$(5),v.Y8G("ngForOf",e.favorites)}}const nt=(e,t,s)=>({module:e,data:t,id:s});function lt(e,t){if(1&e){const e=v.RV6();v.j41(0,"li",27),v.bIt("click",(function(){const t=v.eBV(e).$implicit,s=v.XpG(2);return v.Njj(s.navigateRecent(t.item_id))})),v.j41(1,"a",16)(2,"span",2),v.EFF(3),v.k0s()()()}if(2&e){const e=t.$implicit,s=v.XpG(2);v.Y8G("system-model-provider",v.sMw(2,nt,s.model.module,e.data,e.id)),v.R7$(3),v.JRh(e.data.summary_text)}}function ot(e,t){1&e&&(v.j41(0,"li",28),v.nrm(1,"system-label",29),v.k0s())}function at(e,t){if(1&e&&(v.qex(0),v.nrm(1,"li",18),v.j41(2,"li",19)(3,"span",20),v.nrm(4,"system-label",24),v.k0s()(),v.DNE(5,lt,4,6,"li",25)(6,ot,2,0,"li",26),v.bVm()),2&e){const e=v.XpG();v.R7$(5),v.Y8G("ngForOf",e.recentitems),v.R7$(),v.Y8G("ngIf",0==e.recentitems.length&&e.isInitialized)}}function rt(e,t){1&e&&v.nrm(0,"system-spinner",30)}const dt=e=>({"slds-is-open":e});let ct=(()=>{class GlobalNavigationMenuItem{constructor(e,t,s,i,n,l,o,a,r,d,c){this.metadata=e,this.language=t,this.router=s,this.elementRef=i,this.broadcast=n,this.navigation=l,this.model=o,this.view=a,this.recent=r,this.favorite=d,this.renderer=c,this.itemtext="test",this.item={module:null,name:null},this.isOpen=!1,this.isInitialized=!1,this.itemMenu=[],this.favorites=[],this.menucomponents=[],this.view.displayLabels=!1}executeMenuItem(e){this.itemMenu.some(((t,s)=>{if(t.id===e){if("add"===t.action)this.isOpen=!1,this.model.addModel();return!0}}))}navigateTo(){this.isOpen=!1,this.router.navigate(["/module/"+this.item.module])}navigateRecent(e){this.isOpen=!1,this.router.navigate(["/module/"+this.item.module+"/"+e])}ngOnInit(){let e=this.metadata.getComponentConfig("GlobalNavigationMenuItem",this.item.module);e.actionset?this.itemMenu=this.metadata.getActionSetItems(e.actionset):this.itemMenu=this.metadata.getModuleMenu(this.item.module),this.model.module=this.item.module}toggleOpen(){this.isInitialized||this.initialize(),this.isOpen=!this.isOpen,this.isOpen?(this.favorites=this.getFavorites(),this.buildMenu(),this.clickListener=this.renderer.listen("document","click",(e=>this.onClick(e)))):this.clickListener&&this.clickListener()}initialize(){"Home"!=this.item.module?this.recent.getModuleRecent(this.item.module).subscribe((e=>{this.isInitialized=!0})):this.isInitialized=!0}get recentitems(){return this.recent.moduleItems[this.item.module]?this.recent.moduleItems[this.item.module]:[]}getFavorites(){return this.favorite.getFavorites(this.item.module)}onClick(e){(!this.elementRef.nativeElement.contains(e.target)||this.elementRef.nativeElement.contains(e.target)&&this.menulist.element.nativeElement.contains(e.target))&&(this.isOpen=!1)}hasMenu(){return this.itemMenu.length>0||this.metadata.getModuleTrackflag(this.item.module)}getMenuLabel(e){return this.language.getLabel(this.item.module,e)}isActive(){return this.navigation.activeModule==this.item.module}ngAfterViewInit(){this.broadcast.broadcastMessage("navigation.itemadded",{module:this.item.module,width:this.elementRef.nativeElement.offsetWidth}),this.model.module=this.item.module}buildMenu(){return!0}ngOnDestroy(){this.destroyMenu()}destroyMenu(){for(let e of this.menucomponents)e.destroy()}isDisabled(e){return!!this.menuItemlist&&this.menuItemlist.find((t=>t.id==e))?.disabled}isHidden(e){return!!this.menuItemlist&&this.menuItemlist.find((t=>t.id==e))?.hidden}propagateclick(e){this.menuItemlist.some((t=>{if(t.id==e)return t.disabled||t.execute(),!0}))}static#e=this.ɵfac=function(e){return new(e||GlobalNavigationMenuItem)(v.rXU(R.yu),v.rXU(I.B),v.rXU(B.Ix),v.rXU(v.aKT),v.rXU(Pe.m),v.rXU(T.L),v.rXU(E.g),v.rXU(Ae.U),v.rXU(ze._),v.rXU(M.B),v.rXU(v.sFG))};static#t=this.ɵcmp=v.VBU({type:GlobalNavigationMenuItem,selectors:[["global-navigation-menu-item"]],viewQuery:function(e,t){if(1&e&&(v.GBs(Je,7,v.c1b),v.GBs(We,7,v.c1b),v.GBs(Ve.l,5)),2&e){let e;v.mGM(e=v.lsd())&&(t.menulist=e.first),v.mGM(e=v.lsd())&&(t.menucontainer=e.first),v.mGM(e=v.lsd())&&(t.menuItemlist=e)}},hostVars:4,hostBindings:function(e,t){2&e&&v.AVh("slds-context-bar__item",!0)("slds-is-active",t.isActive())},inputs:{itemtext:"itemtext",item:"item"},features:[v.Jv_([E.g,Ae.U])],decls:14,vars:9,consts:[["aria-haspopup","true",1,"slds-context-bar__dropdown-trigger","slds-dropdown-trigger","slds-dropdown-trigger--click",3,"ngClass"],["href","javascript:void(0);",1,"slds-context-bar__label-action",3,"click"],[1,"slds-truncate"],[3,"module"],["class","slds-context-bar__icon-action slds-p-left--none",4,"ngIf"],[1,"slds-dropdown","slds-nubbin--top"],["role","menu",1,"slds-dropdown__list"],["menulist",""],["menucontainer",""],[4,"ngIf"],["size","16",4,"ngIf"],[1,"slds-context-bar__icon-action","slds-p-left--none"],[1,"slds-button","slds-button--icon","slds-context-bar__button",3,"click"],[3,"icon"],["class","slds-dropdown__item","role","presentation",3,"ngClass","click",4,"ngFor","ngForOf"],["role","presentation",1,"slds-dropdown__item",3,"ngClass","click"],["href","javascript:void(0);","role","menuitem"],[1,"slds-truncate",3,"ngClass","actionitem"],["role","separator",1,"slds-has-divider--top-space"],["role","separator",1,"slds-dropdown__header"],[1,"slds-text-title--caps"],["label","LBL_FAVORITES"],["class","slds-dropdown__item","role","presentation",3,"click",4,"ngFor","ngForOf"],["role","presentation",1,"slds-dropdown__item",3,"click"],["label","LBL_RECENTLYVIEWED"],["class","slds-dropdown__item","role","presentation",3,"system-model-provider","click",4,"ngFor","ngForOf"],["class","slds-dropdown__item slds-align--absolute-center slds-text-color_inverse-weak slds-p-around--xx-small",4,"ngIf"],["role","presentation",1,"slds-dropdown__item",3,"system-model-provider","click"],[1,"slds-dropdown__item","slds-align--absolute-center","slds-text-color_inverse-weak","slds-p-around--xx-small"],["label","LBL_NO_ENTRIES"],["size","16"]],template:function(e,t){1&e&&(v.j41(0,"li",0)(1,"a",1),v.bIt("click",(function(){return t.navigateTo()})),v.j41(2,"span",2),v.nrm(3,"system-label-modulename",3),v.k0s()(),v.DNE(4,Ke,3,1,"div",4),v.j41(5,"div",5)(6,"ul",6,7),v.nrm(8,"div",null,8),v.DNE(10,tt,2,1,"ng-container",9)(11,it,6,1,"ng-container",9)(12,at,7,2,"ng-container",9),v.k0s(),v.DNE(13,rt,1,0,"system-spinner",10),v.k0s()()),2&e&&(v.Y8G("ngClass",v.eq3(7,dt,t.isOpen)),v.R7$(3),v.Y8G("module",t.item.name),v.R7$(),v.Y8G("ngIf",t.hasMenu()),v.R7$(6),v.Y8G("ngIf",t.itemMenu.length>0),v.R7$(),v.Y8G("ngIf",t.favorites.length>0),v.R7$(),v.Y8G("ngIf","Home"!=t.item.module),v.R7$(),v.Y8G("ngIf",!t.isInitialized))},dependencies:[i.YU,i.Sq,i.bT,He.v,O.t,j.W,qe.r,K.P,Ve.l],encapsulation:2})}return GlobalNavigationMenuItem})(),ut=(()=>{class GlobalNavigationMenuItemIcon{constructor(){this.icon=""}getSvgHRef(){return"./vendor/sldassets/icons/utility-sprite/svg/symbols.svg#"+this.icon}static#e=this.ɵfac=function(e){return new(e||GlobalNavigationMenuItemIcon)};static#t=this.ɵcmp=v.VBU({type:GlobalNavigationMenuItemIcon,selectors:[["global-nevigation-menu-item-icon"]],inputs:{icon:"icon"},decls:2,vars:1,consts:[["aria-hidden","true",1,"slds-icon","slds-icon--x-small","slds-icon-text-default","slds-m-right--x-small"]],template:function(e,t){1&e&&(v.qSk(),v.j41(0,"svg",0),v.nrm(1,"use"),v.k0s()),2&e&&(v.R7$(),v.BMQ("href",t.getSvgHRef(),null,"xlink"))},encapsulation:2})}return GlobalNavigationMenuItemIcon})(),mt=(()=>{class GlobalNavigationMenuItemNew{constructor(e,t){this.language=e,this.model=t}exceuteItem(){this.model.id="",this.model.addModel()}static#e=this.ɵfac=function(e){return new(e||GlobalNavigationMenuItemNew)(v.rXU(I.B),v.rXU(E.g))};static#t=this.ɵcmp=v.VBU({type:GlobalNavigationMenuItemNew,selectors:[["global-navigation-menu-item-new"]],decls:5,vars:3,consts:[["role","presentation",1,"slds-dropdown__item",3,"click"],["href","javascript:void(0);","role","menuitem"],[1,"slds-truncate"],[3,"icon"],[3,"module","singular"]],template:function(e,t){1&e&&(v.j41(0,"li",0),v.bIt("click",(function(){return t.exceuteItem()})),v.j41(1,"a",1)(2,"span",2),v.nrm(3,"global-nevigation-menu-item-icon",3)(4,"system-label-modulename",4),v.k0s()()()),2&e&&(v.R7$(3),v.Y8G("icon","add"),v.R7$(),v.Y8G("module",t.model.module)("singular",!0))},dependencies:[qe.r,ut],encapsulation:2})}return GlobalNavigationMenuItemNew})(),ht=(()=>{class GlobalNavigationMenuItemActionNew{constructor(e,t,s,i){this.language=e,this.model=t,this.metadata=s,this.navigation=i,this.disabled=!0}execute(){this.actionconfig.newtab?this.addNewTab():(this.model.id="",this.model.addModel())}ngOnInit(){this.model.module&&this.metadata.checkModuleAcl(this.model.module,"create")&&(this.disabled=!1)}addNewTab(){this.model.id=this.model.generateGuid(),this.navigation.addObjectTab({path:"module/:module/create/:id",params:{module:this.model.module,id:this.model.id},id:this.model.generateGuid(),active:!0,pinned:!1,enablesubtabs:!1,url:`module/${this.model.module}/create/${this.model.id}`,tabdata:{module:this.model.module,id:this.model.id}})}static#e=this.ɵfac=function(e){return new(e||GlobalNavigationMenuItemActionNew)(v.rXU(I.B),v.rXU(E.g),v.rXU(R.yu),v.rXU(T.L))};static#t=this.ɵcmp=v.VBU({type:GlobalNavigationMenuItemActionNew,selectors:[["global-navigation-menu-item-action-new"]],decls:3,vars:2,consts:[[1,"slds-truncate","slds-grid","slds-grid--vertical-align-center"],["icon","add","size","x-small",1,"slds-p-right--x-small"],[3,"module","singular"]],template:function(e,t){1&e&&(v.j41(0,"div",0),v.nrm(1,"system-utility-icon",1)(2,"system-label-modulename",2),v.k0s()),2&e&&(v.R7$(2),v.Y8G("module",t.model.module)("singular",!0))},dependencies:[qe.r,G.B],encapsulation:2})}return GlobalNavigationMenuItemActionNew})(),gt=(()=>{class GlobalNavigationMenuItemRoute{constructor(e,t,s,i){this.metadata=e,this.language=t,this.model=s,this.router=i,this.actionconfig={}}get actionicon(){return this.actionconfig.icon?this.actionconfig.icon:"chevronright"}get actionlabel(){if(this.actionconfig.label&&this.actionconfig.label.indexOf(":")>-1){let e=this.actionconfig.label.split(":");return this.language.getLabel(e[0],e[1])}return this.language.getLabel(this.actionconfig.label)}exceuteItem(){this.router.navigate([this.actionconfig.route])}static#e=this.ɵfac=function(e){return new(e||GlobalNavigationMenuItemRoute)(v.rXU(R.yu),v.rXU(I.B),v.rXU(E.g),v.rXU(B.Ix))};static#t=this.ɵcmp=v.VBU({type:GlobalNavigationMenuItemRoute,selectors:[["global-navigation-menu-item-route"]],decls:5,vars:2,consts:[["role","presentation",1,"slds-dropdown__item",3,"click"],["href","javascript:void(0);","role","menuitem"],[1,"slds-truncate"],[3,"icon"]],template:function(e,t){1&e&&(v.j41(0,"li",0),v.bIt("click",(function(){return t.exceuteItem()})),v.j41(1,"a",1)(2,"span",2),v.nrm(3,"global-nevigation-menu-item-icon",3),v.EFF(4),v.k0s()()()),2&e&&(v.R7$(3),v.Y8G("icon",t.actionicon),v.R7$(),v.SpI(" ",t.actionlabel," "))},dependencies:[ut],encapsulation:2})}return GlobalNavigationMenuItemRoute})(),pt=(()=>{class GlobalNavigationMenuItemActionRoute{constructor(e,t,s,i){this.language=e,this.model=t,this.metadata=s,this.router=i,this.actionconfig={}}get actionicon(){return this.actionconfig.icon?this.actionconfig.icon:"chevronright"}get disabled(){return this.actionconfig.acl&&!this.metadata.checkModuleAcl(this.model.module,this.actionconfig.acl)}get hidden(){return this.actionconfig.acl&&!this.metadata.checkModuleAcl(this.model.module,this.actionconfig.acl)}get actionlabel(){if(this.actionconfig.label&&this.actionconfig.label.indexOf(":")>-1){let e=this.actionconfig.label.split(":");return this.language.getLabel(e[0],e[1])}return this.language.getLabel(this.actionconfig.label)}execute(){this.disabled||this.router.navigate([this.actionconfig.route])}static#e=this.ɵfac=function(e){return new(e||GlobalNavigationMenuItemActionRoute)(v.rXU(I.B),v.rXU(E.g),v.rXU(R.yu),v.rXU(B.Ix))};static#t=this.ɵcmp=v.VBU({type:GlobalNavigationMenuItemActionRoute,selectors:[["ng-component"]],decls:3,vars:2,consts:[[1,"slds-truncate","slds-grid","slds-grid--vertical-align-center"],["size","x-small",1,"slds-p-right--x-small",3,"icon"]],template:function(e,t){1&e&&(v.j41(0,"div",0),v.nrm(1,"system-utility-icon",1),v.EFF(2),v.k0s()),2&e&&(v.R7$(),v.Y8G("icon",t.actionicon),v.R7$(),v.SpI(" ",t.actionlabel,"\n"))},dependencies:[G.B],encapsulation:2})}return GlobalNavigationMenuItemActionRoute})();function ft(e,t){if(1&e){const e=v.RV6();v.j41(0,"li",10),v.bIt("click",(function(){const t=v.eBV(e).$implicit,s=v.XpG();return v.Njj(s.navigateTo(t))})),v.j41(1,"a",11)(2,"span",2),v.nrm(3,"system-label-modulename",12),v.k0s()()()}if(2&e){const e=t.$implicit;v.R7$(3),v.Y8G("module",e)}}let bt=(()=>{class GlobalNavigationMenuMore{constructor(e,t,s,i){this.language=e,this.router=t,this.elementRef=s,this.broadcast=i,this.moreMenuItems=[]}navigateTo(e){this.router.navigate(["/module/"+e])}ngAfterViewInit(){this.broadcast.broadcastMessage("navigation.moreadded",{module:"more",width:this.elementRef.nativeElement.offsetWidth})}static#e=this.ɵfac=function(e){return new(e||GlobalNavigationMenuMore)(v.rXU(I.B),v.rXU(B.Ix),v.rXU(v.aKT),v.rXU(Pe.m))};static#t=this.ɵcmp=v.VBU({type:GlobalNavigationMenuMore,selectors:[["global-navigation-menu-more"]],hostVars:2,hostBindings:function(e,t){2&e&&v.AVh("slds-context-bar__item",!0)},decls:10,vars:2,consts:[["aria-haspopup","true",1,"slds-context-bar__dropdown-trigger","slds-dropdown-trigger","slds-dropdown-trigger--hover"],["href","javascript:void(0);",1,"slds-context-bar__label-action"],[1,"slds-truncate"],["label","LBL_MORE"],[1,"slds-context-bar__icon-action","slds-p-left--none"],[1,"slds-button","slds-button--icon","slds-context-bar__button"],[3,"icon"],[1,"slds-dropdown","slds-dropdown--right"],["role","menu",1,"slds-dropdown__list"],["class","slds-dropdown__item","role","presentation",3,"click",4,"ngFor","ngForOf"],["role","presentation",1,"slds-dropdown__item",3,"click"],["href","javascript:void(0);","role","menuitem"],[3,"module"]],template:function(e,t){1&e&&(v.j41(0,"li",0)(1,"a",1)(2,"span",2),v.nrm(3,"system-label",3),v.k0s()(),v.j41(4,"div",4)(5,"button",5),v.nrm(6,"system-button-icon",6),v.k0s()(),v.j41(7,"div",7)(8,"ul",8),v.DNE(9,ft,4,1,"li",9),v.k0s()()()),2&e&&(v.R7$(6),v.Y8G("icon","down"),v.R7$(3),v.Y8G("ngForOf",t.moreMenuItems))},dependencies:[i.Sq,O.t,j.W,qe.r],encapsulation:2})}return GlobalNavigationMenuMore})();var yt=s(45507),vt=s(51003),_t=s(63710),kt=s(66586),Rt=s(10650);const It=["containercontent"],xt=(e,t)=>({"slds-is-closed":e,"slds-is-open":t}),jt=e=>({calldata:e});let Gt=(()=>{class GlobalDockedComposerCall{constructor(e,t,s,i,n){this.backend=e,this.dockedComposer=t,this.telephony=s,this.language=i,this.ViewContainerRef=n,this.isClosed=!1}get callicon(){if("disconnected"==this.calldata.status)return"end_call";switch(this.calldata.direction){case"inbound":return"incoming_call";case"outbound":return"outbound_call"}return"call"}closeComposer(){this.telephony.removeCallById(this.calldata.id)}endCall(){this.telephony.terminateCall(this.calldata.id)}toggleClosed(){this.isClosed=!this.isClosed}get toggleIcon(){return this.isClosed?"erect_window":"minimize_window"}get canEndCall(){return this.calldata.callid&&"disconnected"!=this.calldata.status&&"error"!=this.calldata.status}static#e=this.ɵfac=function(e){return new(e||GlobalDockedComposerCall)(v.rXU(fe.H),v.rXU(L.n),v.rXU(kt.V),v.rXU(I.B),v.rXU(v.c1b))};static#t=this.ɵcmp=v.VBU({type:GlobalDockedComposerCall,selectors:[["global-docked-composer-call"]],viewQuery:function(e,t){if(1&e&&v.GBs(It,7,v.c1b),2&e){let e;v.mGM(e=v.lsd())&&(t.containercontent=e.first)}},inputs:{calldata:"calldata"},decls:22,vars:13,consts:[["role","dialog",1,"slds-docked-composer","slds-grid","slds-grid_vertical","slds-m-horizontal--x-small",3,"ngClass"],["aria-live","assertive",1,"slds-docked-composer__header","slds-grid","slds-shrink-none"],[1,"slds-media","slds-media_center","slds-no-space"],[1,"slds-media__figure","slds-m-right_x-small"],[1,"slds-icon_container"],["sprite","utility","size","x-small",3,"icon"],[1,"slds-media__body"],[1,"slds-truncate"],[1,"slds-col_bump-left","slds-shrink-none"],[1,"slds-button","slds-button_icon","slds-button_icon",3,"click"],[3,"icon"],[1,"slds-grow"],["component","TelephonyCallPanel",3,"componentattributes"],[1,"slds-docked-composer__footer","slds-shrink-none"],[1,"slds-button","slds-button--neutral","slds-col_bump-left",3,"disabled","click"],["icon","end_call"],["label","LBL_END"],[1,"slds-button","slds-button--brand","slds-col_bump-left",3,"click"],["label","LBL_CLOSE"]],template:function(e,t){1&e&&(v.j41(0,"section",0)(1,"header",1)(2,"div",2)(3,"div",3)(4,"span",4),v.nrm(5,"system-icon",5),v.k0s()(),v.j41(6,"div",6)(7,"h2",7),v.EFF(8),v.k0s()()(),v.j41(9,"div",8)(10,"button",9),v.bIt("click",(function(){return t.toggleClosed()})),v.nrm(11,"system-button-icon",10),v.k0s(),v.j41(12,"button",9),v.bIt("click",(function(){return t.closeComposer()})),v.nrm(13,"system-button-icon",10),v.k0s()()(),v.j41(14,"div",11),v.nrm(15,"system-dynamic-component",12),v.k0s(),v.j41(16,"footer",13)(17,"button",14),v.bIt("click",(function(){return t.endCall()})),v.nrm(18,"system-button-icon",15)(19,"system-label",16),v.k0s(),v.j41(20,"button",17),v.bIt("click",(function(){return t.closeComposer()})),v.nrm(21,"system-label",18),v.k0s()()()),2&e&&(v.Y8G("ngClass",v.l_i(8,xt,t.isClosed,!t.isClosed)),v.R7$(5),v.Y8G("icon",t.callicon),v.R7$(3),v.Lme("",t.calldata.direction," Call ",t.calldata.status,""),v.R7$(3),v.Y8G("icon",t.toggleIcon),v.R7$(2),v.Y8G("icon","close"),v.R7$(2),v.Y8G("componentattributes",v.eq3(11,jt,t.calldata)),v.R7$(2),v.Y8G("disabled",!t.canEndCall))},dependencies:[i.YU,O.t,Rt.s,D.J,j.W],encapsulation:2})}return GlobalDockedComposerCall})();var Ct=s(60595),wt=s(88980),St=s(44261),Et=s(33159);let Lt=(()=>{class GlobalDockedComposerModal{constructor(e,t,s,i,n,l,o){this.metadata=e,this.dockedComposer=t,this.language=s,this.modal=i,this.model=n,this.view=l,this.telephony=o,this.self={},this.view.isEditable=!0,this.view.setEditMode()}ngOnInit(){this.loadConfig()}loadConfig(){this.componentconfig=this.metadata.getComponentConfig("GlobalDockedComposerModal",this.model.module)}get displayLabel(){return this.model.getField("name")?this.model.getField("name"):this.language.getModuleName(this.model.module,!0)}minimize(){this.dockedComposer.composers.find((e=>e.id==this.model.id))||this.telephony.calls.find((e=>e.id))||this.dockedComposer.addComposer(this.model.module,this.model),this.self.destroy()}promptClose(){this.modal.prompt("confirm",this.language.getLabel("MSG_CANCEL","","long"),this.language.getLabel("MSG_CANCEL")).subscribe((e=>{e&&this.closeComposer()}))}closeComposer(){for(let e=0;e<this.dockedComposer.composers.length;e++)this.dockedComposer.composers[e].id===this.model.id&&this.dockedComposer.composers.splice(e,1);this.self.destroy()}handleaction(e){if("savegodetail"===e)this.model.goDetail(),this.closeComposer();else this.closeComposer()}static#e=this.ɵfac=function(e){return new(e||GlobalDockedComposerModal)(v.rXU(R.yu),v.rXU(L.n),v.rXU(I.B),v.rXU($.y),v.rXU(E.g),v.rXU(Ae.U),v.rXU(kt.V))};static#t=this.ɵcmp=v.VBU({type:GlobalDockedComposerModal,selectors:[["global-docked-composer-modal"]],decls:18,vars:5,consts:[["size","medium"],[3,"module","close"],[1,"slds-button","slds-button_icon",3,"title","click"],["icon","dock_panel"],[1,"slds-assistive-text"],["label","LBL_DOCK"],["margin","none"],["containercontent",""],[3,"componentset"],[1,"slds-grid","slds-grid--vertical-align-center","slds-grid--align-spread"],[1,"slds-text-align_right"],["containerclass","",3,"actionset","actionemitter"]],template:function(e,t){1&e&&(v.j41(0,"system-modal",0)(1,"system-modal-header",1),v.bIt("close",(function(){return t.promptClose()})),v.EFF(2),v.j41(3,"system-modal-header-right")(4,"button",2),v.bIt("click",(function(){return t.minimize()})),v.nrm(5,"system-button-icon",3),v.j41(6,"span",4),v.nrm(7,"system-label",5),v.k0s()()()(),v.j41(8,"system-modal-content",6),v.nrm(9,"div",null,7)(11,"system-componentset",8),v.k0s(),v.j41(12,"system-modal-footer")(13,"div",9)(14,"div"),v.nrm(15,"global-docked-composer-messages-badge"),v.k0s(),v.j41(16,"div",10)(17,"object-action-container",11),v.bIt("actionemitter",(function(e){return t.handleaction(e)})),v.k0s()()()()()),2&e&&(v.R7$(),v.Y8G("module",t.model.module),v.R7$(),v.SpI(" ",t.displayLabel," "),v.R7$(2),v.Y8G("title",t.language.getLabel("LBL_DOCK")),v.R7$(7),v.Y8G("componentset",t.componentconfig.componentset),v.R7$(6),v.Y8G("actionset",t.componentconfig.actionset))},dependencies:[O.t,Ct.F,j.W,Ie.D,xe.I,Be.Q,je.C,wt.s,St.l,Et.f],encapsulation:2})}return GlobalDockedComposerModal})();var Dt=s(41620);let Ft=(()=>{class GlobalComposeButton{constructor(e){this.dockedComposer=e,this.module=""}showComposer(){this.dockedComposer.addComposer(this.module)}static#e=this.ɵfac=function(e){return new(e||GlobalComposeButton)(v.rXU(L.n))};static#t=this.ɵcmp=v.VBU({type:GlobalComposeButton,selectors:[["global-compose-button"]],inputs:{module:"module"},decls:3,vars:0,consts:[[1,"slds-no-flex"],[1,"slds-button","slds-button--neutral",3,"click"]],template:function(e,t){1&e&&(v.j41(0,"div",0)(1,"button",1),v.bIt("click",(function(){return t.showComposer()})),v.EFF(2,"New"),v.k0s()())},encapsulation:2})}return GlobalComposeButton})();var Mt=s(18063),Tt=s(48849),Bt=s(81086);function $t(e,t){if(1&e&&(v.j41(0,"div",9)(1,"div",10),v.EFF(2),v.k0s()()),2&e){const e=v.XpG();v.R7$(2),v.JRh(e.descriptionfull)}}let Ot=(()=>{class GlobalAppLauncherDialogRoleTile{constructor(e,t){this.language=e,this.metadata=t}ngOnInit(){this.buildRoleLabels()}buildRoleLabels(){this.metadata.getRoles().some((e=>{if(e.id==this.role.id)return this.identifier=this.language.getAppLanglabel(e.label,"short"),this.name=this.language.getAppLanglabel(e.label),this.description=this.language.getAppLanglabel(e.label,"long"),this.name===this.description&&(this.description=null),this.description&&this.description.length>75&&(this.descriptionfull=this.description,this.description=this.description.substring(0,75)+"..."),!0}))}static#e=this.ɵfac=function(e){return new(e||GlobalAppLauncherDialogRoleTile)(v.rXU(I.B),v.rXU(R.yu))};static#t=this.ɵcmp=v.VBU({type:GlobalAppLauncherDialogRoleTile,selectors:[["global-app-launcher-dialog-role-tile"]],inputs:{role:"role"},decls:10,vars:9,consts:[[1,"slds-app-launcher__tile","slds-text-link_reset","slds-is-relative"],[1,"slds-app-launcher__tile-figure"],["length","short",3,"label"],[1,"slds-app-launcher__tile-body"],["href","javascript:void(0);"],[3,"label"],[1,"slds-hyphenate","slds-line-clamp_x-small"],["length","long",3,"label"],["class","slds-popover slds-popover_tooltip slds-nubbin_top slds-hide","role","tooltip","style","position:absolute;top:100px;left:165px",4,"ngIf"],["role","tooltip",1,"slds-popover","slds-popover_tooltip","slds-nubbin_top","slds-hide",2,"position","absolute","top","100px","left","165px"],[1,"slds-popover__body"]],template:function(e,t){1&e&&(v.j41(0,"div",0)(1,"div",1)(2,"span"),v.nrm(3,"system-label",2),v.k0s()(),v.j41(4,"div",3)(5,"a",4),v.nrm(6,"system-label",5),v.k0s(),v.j41(7,"div",6),v.nrm(8,"system-label",7),v.k0s(),v.DNE(9,$t,3,1,"div",8),v.k0s()()),2&e&&(v.xc7("box-shadow",t.metadata.role!=t.role.id?null:"0 0 2px 2px var(--brand-primary-active)"),v.R7$(2),v.ZvI("slds-avatar slds-avatar--large slds-align--absolute-center ",t.role.icon,""),v.R7$(),v.Y8G("label",t.role.label),v.R7$(3),v.Y8G("label",t.role.label),v.R7$(2),v.Y8G("label",t.role.label),v.R7$(),v.Y8G("ngIf",t.descriptionfull))},dependencies:[i.bT,j.W],encapsulation:2})}return GlobalAppLauncherDialogRoleTile})();function Xt(e,t){if(1&e){const e=v.RV6();v.j41(0,"li",22),v.bIt("click",(function(){const t=v.eBV(e).$implicit,s=v.XpG(2);return v.Njj(s.setRole(t.id))})),v.nrm(1,"global-app-launcher-dialog-role-tile",23),v.k0s()}if(2&e){const e=t.$implicit;v.R7$(),v.Y8G("role",e)}}function Ut(e,t){if(1&e&&(v.j41(0,"div")(1,"ul",20),v.DNE(2,Xt,2,1,"li",21),v.k0s()()),2&e){const e=v.XpG();v.R7$(2),v.Y8G("ngForOf",e.getRoles())}}function Yt(e,t){if(1&e){const e=v.RV6();v.j41(0,"li",24),v.bIt("click",(function(){const t=v.eBV(e).$implicit,s=v.XpG();return v.Njj(s.gotoModule(t))})),v.j41(1,"div",25),v.nrm(2,"system-icon",26),v.k0s(),v.j41(3,"div",27)(4,"div",28),v.nrm(5,"system-label-modulename",29),v.k0s()()()}if(2&e){const e=t.$implicit,s=v.XpG();v.Y8G("title",s.language.getModuleName(e,!1,"long")),v.R7$(2),v.Y8G("module",e)("size","large"),v.R7$(3),v.Y8G("module",e)}}let Nt=(()=>{class GlobalAppLauncherDialog{constructor(e,t,s,i,n){this.metadata=e,this.language=t,this.router=s,this.broadcast=i,this.userpreferences=n,this.searchTerm="",this.self=void 0}get showRoles(){return this.metadata.getRoles().length>1}close(){this.self.destroy()}getRoles(){return this.metadata.getRoles()}setRole(e){this.metadata.setActiveRole(e),this.userpreferences.setPreference("userrole",e),this.broadcast.broadcastMessage("applauncher.setrole",e),this.close()}getModules(){let e=[];for(let t of this.metadata.getModules()){let s=this.metadata.getModuleDefs(t);s.visible&&(!s.visibleaclaction||s.visibleaclaction&&this.metadata.checkModuleAcl(t,s.visibleaclaction))&&this.metadata.checkModuleAcl(t,"list")&&(""===this.searchTerm||""!==this.searchTerm&&this.language.getModuleName(t)&&this.language.getModuleName(t).toLowerCase().indexOf(this.searchTerm.toLowerCase())>=0)&&e.push(t)}return e.sort(((e,t)=>this.language.getModuleName(e)>this.language.getModuleName(t)?1:-1)),e}gotoModule(e){this.router.navigate(["/module/"+e]),this.close()}static#e=this.ɵfac=function(e){return new(e||GlobalAppLauncherDialog)(v.rXU(R.yu),v.rXU(I.B),v.rXU(B.Ix),v.rXU(Pe.m),v.rXU(Tt.S))};static#t=this.ɵcmp=v.VBU({type:GlobalAppLauncherDialog,selectors:[["global-app-launcher-dialog"]],decls:22,vars:9,consts:[["role","dialog","tabindex","-1","aria-modal","true",1,"slds-modal","slds-fade-in-open","slds-modal_large","slds-app-launcher__content"],[1,"slds-modal__container"],[1,"slds-modal__header","slds-theme--shade"],[1,"slds-button","slds-button_icon","slds-modal__close","slds-button--icon-inverse",2,"color","#fff",3,"click"],[3,"icon","size"],[1,"slds-assistive-text"],["label","LBL_CLOSE"],[1,"slds-grid","slds-grid--align-spread","slds-grid--vertical-align-center"],[1,"slds-text-heading--medium","slds-show--medium"],["label","LBL_APP_LAUNCHER"],[1,"slds-app-launcher__header-search"],[1,"slds-form-element"],[1,"slds-form-element__control","slds-input-has-icon","slds-input-has-icon--left"],[3,"icon","addclasses"],["system-autofocus","","type","search",1,"slds-input",3,"ngModel","placeholder","ngModelChange"],["disabled","",1,"slds-button","slds-button--neutral","slds-show--medium","slds-hidden"],["margin","small",3,"grow"],[4,"ngIf"],[1,"slds-grid","slds-grid--pull-padded-xx-small","slds-wrap","slds-align--absolute-center"],["class","slds-p-horizontal--small slds-p-vertical--xx-small slds-size--xx-small slds-align-top",3,"title","click",4,"ngFor","ngForOf"],[1,"slds-grid","slds-grid--pull-padded-xx-small","slds-wrap"],["class","slds-p-horizontal--small slds-size--1-of-1 slds-medium-size--1-of-3",3,"click",4,"ngFor","ngForOf"],[1,"slds-p-horizontal--small","slds-size--1-of-1","slds-medium-size--1-of-3",3,"click"],[3,"role"],[1,"slds-p-horizontal--small","slds-p-vertical--xx-small","slds-size--xx-small","slds-align-top",3,"title","click"],[1,"slds-app-launcher__tile-figure","slds-app-launcher__tile-figure--small","slds-text-link_reset"],[3,"module","size"],[1,"slds-align_absolute-center","slds-p-top--xx-small"],[1,"slds-text-align--center","slds-text-link_reset","slds-size--1-of-1","slds-hyphenate","slds-text-body--small","slds-line-clamp_x-small"],[3,"module"]],template:function(e,t){1&e&&(v.j41(0,"section",0)(1,"div",1)(2,"header",2)(3,"button",3),v.bIt("click",(function(){return t.close()})),v.nrm(4,"system-button-icon",4),v.j41(5,"span",5),v.nrm(6,"system-label",6),v.k0s()(),v.j41(7,"div",7)(8,"h2",8),v.nrm(9,"system-label",9),v.k0s(),v.j41(10,"div",10)(11,"div",11)(12,"div",12),v.nrm(13,"system-utility-icon",13),v.j41(14,"input",14),v.mxI("ngModelChange",(function(e){return v.DH7(t.searchTerm,e)||(t.searchTerm=e),e})),v.k0s()()()(),v.j41(15,"button",15),v.EFF(16,"App Store"),v.k0s()()(),v.j41(17,"system-modal-content",16),v.DNE(18,Ut,3,1,"div",17),v.j41(19,"div")(20,"ul",18),v.DNE(21,Yt,6,4,"li",19),v.k0s()()()()()),2&e&&(v.R7$(4),v.Y8G("icon","close")("size","large"),v.R7$(9),v.Y8G("icon","search")("addclasses","slds-input__icon slds-input__icon--left"),v.R7$(),v.R50("ngModel",t.searchTerm),v.Y8G("placeholder",t.language.getLabel("LBL_FIND_CONFMODULE")),v.R7$(3),v.Y8G("grow",!0),v.R7$(),v.Y8G("ngIf",t.showRoles),v.R7$(3),v.Y8G("ngForOf",t.getModules()))},dependencies:[i.Sq,i.bT,n.me,n.BC,n.vS,Bt.a,O.t,D.J,j.W,qe.r,xe.I,G.B,Ot],encapsulation:2})}return GlobalAppLauncherDialog})();var Vt=s(18638),At=s(51108),Pt=s(18039);function zt(e,t){if(1&e&&v.nrm(0,"system-utility-icon",7),2&e){const e=v.XpG();v.Y8G("icon",e.tab.displayicon)("title",e.modelCount()+" "+e.language.getLabel("LBL_MODELS"))}}function Ht(e,t){if(1&e&&v.nrm(0,"system-icon",8),2&e){const e=v.XpG();v.Y8G("module",e.tab.displaymodule)}}function qt(e,t){1&e&&v.nrm(0,"system-utility-icon",9)}let Jt=(()=>{class GlobalNavigationTabbedBrowserModalTab{constructor(e,t){this.navigation=e,this.language=t,this.subtab=!1,this.activate=new v.bkB}modelCount(){return this.navigation.modelregister.filter((e=>e.tabid==this.tab.id)).length}activateTab(){this.activate.emit(this.tab.id)}static#e=this.ɵfac=function(e){return new(e||GlobalNavigationTabbedBrowserModalTab)(v.rXU(T.L),v.rXU(I.B))};static#t=this.ɵcmp=v.VBU({type:GlobalNavigationTabbedBrowserModalTab,selectors:[["global-navigation-tabbed-browser-modal-tab"]],inputs:{tab:"tab",subtab:"subtab"},outputs:{activate:"activate"},decls:7,vars:5,consts:[[1,"slds-grid","slds-grid--vertical-align-center"],[3,"title"],["size","x-small","class","slds-p-right--x-small",3,"icon","title",4,"ngIf"],["size","x-small","divClass","slds-p-right--x-small",3,"module",4,"ngIf"],[1,"slds-truncate","slds-text-link_faux",3,"click"],[3,"label"],["class","slds-p-left--x-small","size","x-small","icon","warning","addclasses","slds-icon-text-error",4,"ngIf"],["size","x-small",1,"slds-p-right--x-small",3,"icon","title"],["size","x-small","divClass","slds-p-right--x-small",3,"module"],["size","x-small","icon","warning","addclasses","slds-icon-text-error",1,"slds-p-left--x-small"]],template:function(e,t){1&e&&(v.j41(0,"div",0)(1,"div",1),v.DNE(2,zt,1,2,"system-utility-icon",2)(3,Ht,1,1,"system-icon",3),v.k0s(),v.j41(4,"div",4),v.bIt("click",(function(){return t.activateTab()})),v.nrm(5,"system-label",5),v.k0s(),v.DNE(6,qt,1,0,"system-utility-icon",6),v.k0s()),2&e&&(v.R7$(),v.Y8G("title",t.modelCount()+" "+t.language.getLabel("LBL_MODELS")),v.R7$(),v.Y8G("ngIf",t.tab.displayicon),v.R7$(),v.Y8G("ngIf",t.tab.displaymodule),v.R7$(2),v.FS9("label",t.tab.displayname),v.R7$(),v.Y8G("ngIf",t.navigation.anyDirtyModel(t.tab.id)))},dependencies:[i.bT,D.J,j.W,G.B],encapsulation:2})}return GlobalNavigationTabbedBrowserModalTab})(),Wt=(()=>{class GlobalNavigationTabbedBrowserModalTabActions{constructor(e,t){this.navigation=e,this.language=t}closetab(e){this.navigation.closeObjectTab(e)}pintab(e){e.pinned=!e.pinned}clonetab(e){this.navigation.cloneTab(e.id)}static#e=this.ɵfac=function(e){return new(e||GlobalNavigationTabbedBrowserModalTabActions)(v.rXU(T.L),v.rXU(I.B))};static#t=this.ɵcmp=v.VBU({type:GlobalNavigationTabbedBrowserModalTabActions,selectors:[["global-navigation-tabbed-browser-modal-tab-actions"]],inputs:{tab:"tab"},decls:6,vars:1,consts:[["system-title","LBL_CLONE_TAB",1,"slds-button","slds-button_icon","slds-button_icon-container","slds-button_icon-x-small","slds-m-around--none",3,"click"],["icon","copy"],["system-title","LBL_PIN_TAB",1,"slds-button","slds-button_icon","slds-button_icon-container","slds-button_icon-x-small","slds-m-around--none",3,"click"],[3,"icon"],["system-title","LBL_CLOSE_TAB",1,"slds-button","slds-button--icon","slds-col--bump-left",3,"click"],["icon","close"]],template:function(e,t){1&e&&(v.j41(0,"button",0),v.bIt("click",(function(){return t.clonetab(t.tab)})),v.nrm(1,"system-button-icon",1),v.k0s(),v.j41(2,"button",2),v.bIt("click",(function(){return t.pintab(t.tab)})),v.nrm(3,"system-button-icon",3),v.k0s(),v.j41(4,"button",4),v.bIt("click",(function(){return t.closetab(t.tab.id)})),v.nrm(5,"system-button-icon",5),v.k0s()),2&e&&(v.R7$(3),v.Y8G("icon",t.tab.pinned?"pinned":"pin"))},dependencies:[x.L,O.t],encapsulation:2})}return GlobalNavigationTabbedBrowserModalTabActions})();function Kt(e,t){if(1&e){const e=v.RV6();v.j41(0,"tr",26)(1,"td",27),v.nrm(2,"system-utility-icon",17),v.k0s(),v.j41(3,"td")(4,"global-navigation-tabbed-browser-modal-tab",28),v.bIt("activate",(function(t){v.eBV(e);const s=v.XpG(3);return v.Njj(s.activateTab(t))})),v.k0s()(),v.j41(5,"td",29),v.nrm(6,"global-navigation-tabbed-browser-modal-tab-actions",20),v.k0s()()}if(2&e){const e=t.$implicit;v.Y8G("cdkDragData",e),v.R7$(2),v.Y8G("icon","rows")("size","x-small"),v.R7$(2),v.Y8G("tab",e)("subtab",!0),v.R7$(2),v.Y8G("tab",e)}}function Qt(e,t){if(1&e){const e=v.RV6();v.j41(0,"tr")(1,"td",22)(2,"div",23)(3,"table",24),v.bIt("cdkDropListDropped",(function(t){v.eBV(e);const s=v.XpG(2);return v.Njj(s.drop(t))})),v.DNE(4,Kt,7,6,"tr",25),v.k0s()()()()}if(2&e){const e=v.XpG().$implicit,t=v.XpG();v.R7$(3),v.Y8G("cdkDropListData",t.subtabs(e.id)),v.R7$(),v.Y8G("ngForOf",t.subtabs(e.id))("ngForTrackBy",t.trackByFn)}}function Zt(e,t){if(1&e){const e=v.RV6();v.qex(0),v.j41(1,"tr",15)(2,"td",16),v.nrm(3,"system-utility-icon",17),v.k0s(),v.j41(4,"td")(5,"global-navigation-tabbed-browser-modal-tab",18),v.bIt("activate",(function(t){v.eBV(e);const s=v.XpG();return v.Njj(s.activateTab(t))})),v.k0s()(),v.j41(6,"td",19),v.nrm(7,"global-navigation-tabbed-browser-modal-tab-actions",20),v.k0s()(),v.DNE(8,Qt,5,3,"tr",21),v.bVm()}if(2&e){const e=t.$implicit,s=v.XpG();v.R7$(),v.Y8G("cdkDragData",e),v.R7$(2),v.Y8G("icon","rows")("size","x-small"),v.R7$(2),v.Y8G("tab",e),v.R7$(2),v.Y8G("tab",e),v.R7$(),v.Y8G("ngIf",s.hasSubtabs(e.id))}}let es=(()=>{class GlobalNavigationTabbedBrowserModal{constructor(e,t){this.navigation=e,this.language=t}get tabs(){return this.navigation.objectTabs.length}get models(){return this.navigation.modelregister.length}get maintabs(){return this.navigation.objectTabs.filter((e=>!e.parentid))}hasSubtabs(e){return this.navigation.objectTabs.some((t=>t.parentid==e))}subtabs(e){return this.navigation.objectTabs.filter((t=>t.parentid==e))}closetab(e){this.navigation.closeObjectTab(e)}activateTab(e){this.navigation.setActiveTab(e),this.close()}pintab(e){e.pinned=!e.pinned,this.navigation.objectTabs.sort(((e,t)=>e.pinned?-1:1))}clonetab(e){this.navigation.cloneTab(e.id)}close(){this.self.destroy()}drop(e){(0,Pt.HD)(e.container.data,e.previousIndex,e.currentIndex);const t=this.navigation.objectTabs.findIndex((t=>t.id==e.item.data.id)),s=this.navigation.objectTabs.splice(t,1)[0],i=(this.navigation.getTabById(s.id),e.currentIndex-1),n=e.container.data[i],l=n?this.navigation.objectTabs.findIndex((e=>e.id==n.id))+1:0;this.navigation.objectTabs.splice(l,0,s),this.navigation.setSessionData()}trackByFn(e,t){return t.id}static#e=this.ɵfac=function(e){return new(e||GlobalNavigationTabbedBrowserModal)(v.rXU(T.L),v.rXU(I.B))};static#t=this.ɵcmp=v.VBU({type:GlobalNavigationTabbedBrowserModal,selectors:[["ng-component"]],inputs:{object:"object"},decls:23,vars:5,consts:[[3,"close"],["label","LBL_TABS"],["margin","none"],[1,"slds-table","slds-table--header-fixed"],[1,"slds-line-height_reset"],["scope","col"],[1,"slds-truncate","slds-p-vertical--xx-small","slds-align_absolute-center"],["label","LBL_TAB"],["scope","col",2,"width","5.5rem"],["cdkDropList","",1,"globalnavigationtabsmodalMAINTABSdragboundary",3,"cdkDropListData","cdkDropListDropped"],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"slds-grid","slds-grid--vertical-align-center"],["label","LBL_MODELS"],[1,"slds-col--bump-left","slds-button","slds-button--neutral",3,"click"],["label","LBL_OK"],["cdkDrag","","cdkDragBoundary",".globalnavigationtabsmodalMAINTABSdragboundary",1,"spice-drag-placeholder-visible","slds-hint-parent","slds-p-vertical--xx-small",3,"cdkDragData"],[1,"slds-align-top",2,"width","30px"],["cdkDragHandle","",1,"slds-p-right--xx-small",2,"cursor","move",3,"icon","size"],[3,"tab","activate"],[1,"slds-p-horizontal--none","slds-text-align--center",2,"display","flex"],[3,"tab"],[4,"ngIf"],["colspan","3",1,"slds-p-right--none"],[1,"slds-size--1-of-1",2,"padding-left","2.2rem"],["cdkDropList","",1,"globalnavigationtabsmodalSUBTABSdragboundary","slds-table","slds-table--header-fixed","slds-p-left--medium",3,"cdkDropListData","cdkDropListDropped"],["cdkDrag","","class","slds-hint-parent","cdkDragBoundary",".globalnavigationtabsmodalSUBTABSdragboundary",3,"cdkDragData",4,"ngFor","ngForOf","ngForTrackBy"],["cdkDrag","","cdkDragBoundary",".globalnavigationtabsmodalSUBTABSdragboundary",1,"slds-hint-parent",3,"cdkDragData"],[1,"slds-p-left--none",2,"width","30px"],[3,"tab","subtab","activate"],[1,"slds-p-horizontal--none",2,"width","5.5rem"]],template:function(e,t){1&e&&(v.j41(0,"system-modal")(1,"system-modal-header",0),v.bIt("close",(function(){return t.close()})),v.nrm(2,"system-label",1),v.k0s(),v.j41(3,"system-modal-content",2)(4,"table",3)(5,"thead")(6,"tr",4),v.nrm(7,"th",5),v.j41(8,"th",5)(9,"div",6),v.nrm(10,"system-label",7),v.k0s()(),v.nrm(11,"th",8),v.k0s()(),v.j41(12,"tbody",9),v.bIt("cdkDropListDropped",(function(e){return t.drop(e)})),v.DNE(13,Zt,9,6,"ng-container",10),v.k0s()()(),v.j41(14,"system-modal-footer")(15,"div",11)(16,"div"),v.EFF(17),v.nrm(18,"system-label",1),v.EFF(19),v.nrm(20,"system-label",12),v.k0s(),v.j41(21,"button",13),v.bIt("click",(function(){return t.close()})),v.nrm(22,"system-label",14),v.k0s()()()()),2&e&&(v.R7$(12),v.Y8G("cdkDropListData",t.maintabs),v.R7$(),v.Y8G("ngForOf",t.maintabs)("ngForTrackBy",t.trackByFn),v.R7$(4),v.SpI("",t.tabs," "),v.R7$(2),v.SpI(" / ",t.models," "))},dependencies:[i.Sq,i.bT,j.W,Ie.D,xe.I,Be.Q,je.C,G.B,Pt.Fb,Pt.O7,Pt.T1,Jt,Wt],encapsulation:2})}return GlobalNavigationTabbedBrowserModal})();var ts=s(30976),ss=s(4446),is=s(26606),ns=s(45320),ls=s(64761),os=s(93712),as=s(25435),rs=s(60074),ds=s(59397),cs=s(9531),us=s(81572),ms=s(66031),hs=s(33325),gs=s(28933),ps=s(16435);function fs(e,t){1&e&&(v.j41(0,"tr",22),v.nrm(1,"system-spinner",23),v.k0s())}const bs=(e,t)=>({module:e,data:t});function ys(e,t){if(1&e){const e=v.RV6();v.j41(0,"tr",24)(1,"td",25),v.nrm(2,"system-icon",26),v.k0s(),v.j41(3,"td")(4,"a",27),v.bIt("click",(function(){const t=v.eBV(e).$implicit,s=v.XpG();return v.Njj(s.goRecent(t.module_name,t.item_id))})),v.j41(5,"div",28),v.EFF(6),v.k0s()()(),v.j41(7,"td")(8,"div",29),v.nrm(9,"system-label-modulename",30),v.k0s()(),v.j41(10,"td")(11,"div",29),v.nrm(12,"system-display-datetime",31),v.k0s()()()}if(2&e){const e=t.$implicit;v.Y8G("system-model-provider",v.l_i(8,bs,e.module_name,e.data)),v.R7$(2),v.Y8G("module",e.module_name),v.R7$(3),v.Y8G("module",e.module_name)("id",e.item_id),v.R7$(),v.SpI(" ",e.summary_text?e.summary_text:e.item_summary," "),v.R7$(3),v.Y8G("module",e.module_name)("singular",!0),v.R7$(3),v.Y8G("date",e.date_modified)}}let vs=(()=>{class GlobalRecentItems{constructor(e,t,s,i){this.language=e,this.navigationtab=t,this.router=s,this.recent=i,t.setTabInfo({displayname:this.language.getLabel("LBL_RECENTLYVIEWED"),displayicon:"breadcrumbs"}),this.getRecent()}goRecent(e,t){this.router.navigate(["/module/"+e+"/"+t])}getRecent(){this.recent.getRecentItems()}static#e=this.ɵfac=function(e){return new(e||GlobalRecentItems)(v.rXU(I.B),v.rXU(ms._),v.rXU(B.Ix),v.rXU(ze._))};static#t=this.ɵcmp=v.VBU({type:GlobalRecentItems,selectors:[["global-recent-items"]],decls:30,vars:3,consts:[[1,"slds-page-header"],[1,"slds-page-header__row"],[1,"slds-page-header__col-title"],[1,"slds-media"],[1,"slds-media__body"],[1,"slds-page-header__name"],[1,"slds-page-header__name-title"],[1,"slds-page-header__title","slds-truncate"],["label","LBL_RECENT_ITEMS"],[1,"slds-page-header__name-meta"],["label","LBL_ITEMS"],["system-to-bottom",""],["role","grid",1,"slds-table","slds-table--bordered","slds-table--fixed-layout","slds-table--header-fixed"],[1,"slds-text-title--caps"],["scope","col",1,"slds-cell-shrink"],["scope","col",1,"slds-is-sortable","slds-is-resizable"],[1,"slds-truncate","slds-th__action"],["label","LBL_NAME"],["label","LBL_MODULE"],["label","LBL_VIEWED"],["class","slds-p-bottom--small",4,"ngIf"],["class","slds-hint-parent",3,"system-model-provider",4,"ngFor","ngForOf"],[1,"slds-p-bottom--small"],["size","16"],[1,"slds-hint-parent",3,"system-model-provider"],["role","gridcell",1,"slds-cell-shrink"],["size","small","divClass","",3,"module"],["href","javascript:void(0);",1,"slds-text-link--reset",3,"click"],["system-model-popover","",1,"slds-truncate",3,"module","id"],[1,"slds-truncate"],[3,"module","singular"],[3,"date"]],template:function(e,t){1&e&&(v.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"h1")(8,"span",7),v.nrm(9,"system-label",8),v.k0s()()()(),v.j41(10,"p",9),v.EFF(11),v.nrm(12,"system-label",10),v.k0s()()()()()(),v.j41(13,"div",11)(14,"table",12)(15,"thead")(16,"tr",13),v.nrm(17,"th",14),v.j41(18,"th",15)(19,"span",16),v.nrm(20,"system-label",17),v.k0s()(),v.j41(21,"th",15)(22,"span",16),v.nrm(23,"system-label",18),v.k0s()(),v.j41(24,"th",15)(25,"span",16),v.nrm(26,"system-label",19),v.k0s()()()(),v.j41(27,"tbody"),v.DNE(28,fs,2,0,"tr",20)(29,ys,13,11,"tr",21),v.k0s()()()),2&e&&(v.R7$(11),v.SpI("",t.recent.recentItems.length," "),v.R7$(17),v.Y8G("ngIf",!t.recent.isInitialized),v.R7$(),v.Y8G("ngForOf",t.recent.recentItems))},dependencies:[i.Sq,i.bT,hs.j,He.v,gs.b,ps.f,D.J,j.W,qe.r,K.P],encapsulation:2})}return GlobalRecentItems})();var _s=s(65029),ks=s(58461),Rs=s(42205),Is=s(71692),xs=s(45915),js=s(15091);const Gs=["global-search-module-item",""];function Cs(e,t){if(1&e){const e=v.RV6();v.j41(0,"td",7),v.bIt("click",(function(t){v.eBV(e);const s=v.XpG(2);return v.Njj(s.navigateDetail(t))})),v.nrm(1,"field-container",8),v.k0s()}if(2&e){const e=t.$implicit,s=v.XpG(2);v.BMQ("data-label",s.language.getFieldDisplayName(s.module,e.field)),v.R7$(),v.Y8G("field",e.field)("fieldconfig",e.fieldconfig)("fielddisplayclass","slds-truncate")}}function ws(e,t){if(1&e&&(v.qex(0),v.DNE(1,Cs,2,4,"td",6),v.bVm()),2&e){const e=v.XpG();v.R7$(),v.Y8G("ngForOf",e.listfields)}}let Ss=(()=>{class GlobalSearchModuleItem{constructor(e,t,s,i,n,l){this.elementref=e,this.router=t,this.view=s,this.model=i,this.language=n,this.layout=l,this.module="",this.listfields=[],this.listitem={},this.expanded=!1,this.view.isEditable=!1,this.view.displayLabels=!1}ngOnInit(){this.model.module=this.listitem._source._module,this.model.id=this.listitem._id,this.model.setData(this.listitem._source),this.model.acl=this.listitem.acl,this.model.acl_fieldcontrol=this.listitem.acl_fieldcontrol}navigateDetail(e){e.stopPropagation(),this.model.checkAccess("detail")&&this.model.goDetail()}toggleexpanded(){this.expanded=!this.expanded}get isexpanded(){return"small"!=this.layout.screenwidth||this.expanded}get expandicon(){return this.expanded?"chevronup":"chevrondown"}static#e=this.ɵfac=function(e){return new(e||GlobalSearchModuleItem)(v.rXU(v.aKT),v.rXU(B.Ix),v.rXU(Ae.U),v.rXU(E.g),v.rXU(I.B),v.rXU(Is.Z))};static#t=this.ɵcmp=v.VBU({type:GlobalSearchModuleItem,selectors:[["","global-search-module-item",""]],inputs:{module:"module",listfields:"listfields",listitem:"listitem"},features:[v.Jv_([Ae.U,E.g])],attrs:Gs,decls:7,vars:4,consts:[[1,"slds-hide--medium"],[1,"slds-grid","slds-grid--vertical-align-center","slds-p-around--xx-small"],["size","xx-small","divClass","slds-p-right--xx-small",3,"module"],[1,"slds-text-align--left","slds-truncate","slds-grow",3,"click"],["size","xx-small",3,"icon","click"],[4,"ngIf"],["scope","row",3,"click",4,"ngFor","ngForOf"],["scope","row",3,"click"],[3,"field","fieldconfig","fielddisplayclass"]],template:function(e,t){1&e&&(v.j41(0,"td",0)(1,"div",1),v.nrm(2,"system-icon",2),v.j41(3,"div",3),v.bIt("click",(function(e){return t.navigateDetail(e)})),v.EFF(4),v.k0s(),v.j41(5,"system-utility-icon",4),v.bIt("click",(function(){return t.toggleexpanded()})),v.k0s()()(),v.DNE(6,ws,2,1,"ng-container",5)),2&e&&(v.R7$(2),v.Y8G("module",t.model.module),v.R7$(2),v.JRh(t.model.data.summary_text),v.R7$(),v.Y8G("icon",t.expandicon),v.R7$(),v.Y8G("ngIf",t.isexpanded))},dependencies:[i.Sq,i.bT,js.y,D.J,G.B],encapsulation:2})}return GlobalSearchModuleItem})();function Es(e,t){if(1&e){const e=v.RV6();v.j41(0,"li",21),v.bIt("click",(function(){v.eBV(e);const t=v.XpG();return v.Njj(t.setSearchScope())})),v.nrm(1,"system-label",22),v.k0s()}}function Ls(e,t){if(1&e&&(v.j41(0,"th",23)(1,"div",24),v.nrm(2,"system-label-fieldname",25),v.k0s()()),2&e){const e=t.$implicit,s=t.index,i=v.XpG();v.Y8G("ngClass",i.sizeClass(s)),v.R7$(2),v.Y8G("module",i.module)("field",e.field)}}function Ds(e,t){if(1&e&&v.nrm(0,"tr",26),2&e){const e=t.$implicit,s=v.XpG();v.Y8G("module",s.module)("listfields",s.listfields)("listitem",e)}}function Fs(e,t){1&e&&v.nrm(0,"system-spinner")}const Ms=e=>({"slds-hide":e}),Ts=e=>({"slds-table--bordered":e});let Bs=(()=>{class GlobalSearchModule{constructor(e,t,s,i,n,l){this.metadata=e,this.elementref=t,this.fts=s,this.language=i,this.layout=n,this.view=l,this.module="",this.scope=new v.bkB,this.listfields=[]}get issmall(){return"small"==this.layout.screenwidth}ngOnInit(){this.listfields=[];let e=this.metadata.getComponentConfig("GlobalSearchModule",this.module);_.isEmpty(e)&&(e=this.metadata.getModuleDefaultComponentConfigByUsage(this.module,"list"));for(let t of this.metadata.getFieldSetFields(e.fieldset))t.fieldconfig.hidden||this.listfields.push(t)}getCount(){let e={};return this.fts.moduleSearchresults.some((t=>{if(t.module===this.module)return e={total:_.isNumber(t.data.total)?t.data.total:t.data.total.value,hits:t.data.hits.length},!0})),e}get hidepanel(){return!(!this.fts.runningmodulesearch&&this.getCount().total>0)}canViewMore(){return this.getCount().total>5}getItems(){let e=[];return this.fts.moduleSearchresults.some((t=>{if(t.module===this.module)return e=t.data.hits,!0})),e}setSearchScope(){this.scope.emit(this.module)}sizeClass(e){if("small"==this.view.size)return"slds-size--1-of-1";let t=this.listfields[e].fieldconfig.width;return t||(t="1"),"slds-col slds-size--"+t+"-of-12"}static#e=this.ɵfac=function(e){return new(e||GlobalSearchModule)(v.rXU(R.yu),v.rXU(v.aKT),v.rXU(_s.s),v.rXU(I.B),v.rXU(Is.Z),v.rXU(Ae.U))};static#t=this.ɵcmp=v.VBU({type:GlobalSearchModule,selectors:[["global-search-module"]],inputs:{module:"module"},outputs:{scope:"scope"},features:[v.Jv_([Ae.U])],decls:27,vars:14,consts:[[3,"ngClass"],[1,"slds-grid","slds-grid--vertical-align-center","slds-theme--default"],[1,"slds-p-left--small","slds-show--medium"],["divClass","",3,"module"],[1,"slds-p-around--small","slds-theme--default","slds-grow"],[1,"slds-grid"],[1,"slds-col","slds-has-flexi-truncate"],[1,"slds-page-header__title","slds-truncate"],[3,"module"],[1,"slds-col","slds-align-bottom"],[1,"slds-list--horizontal","slds-has-dividers--left"],[1,"slds-item"],["label","LBL_OF"],["label","LBL_ITEMS"],["class","slds-item slds-text-link--reset",3,"click",4,"ngIf"],["role","grid",1,"slds-table","slds-table--fixed-layout","slds-max-medium-table--stacked-horizontal",3,"ngClass"],[1,"slds-show--medium"],[1,"slds-text-title--caps"],["scope","col","class","slds-resizable",3,"ngClass",4,"ngFor","ngForOf"],["global-search-module-item","",3,"module","listfields","listitem",4,"ngFor","ngForOf"],[4,"ngIf"],[1,"slds-item","slds-text-link--reset",3,"click"],["label","LBL_VIEWALL"],["scope","col",1,"slds-resizable",3,"ngClass"],[1,"slds-truncate","slds-p-around--x-small"],[3,"module","field"],["global-search-module-item","",3,"module","listfields","listitem"]],template:function(e,t){1&e&&(v.j41(0,"div",0)(1,"div",1)(2,"div",2),v.nrm(3,"system-icon",3),v.k0s(),v.j41(4,"div",4)(5,"div",5)(6,"div",6)(7,"h1",7),v.nrm(8,"system-label-modulename",8),v.k0s()()(),v.j41(9,"div",5)(10,"div",9)(11,"ul",10)(12,"li",11)(13,"span"),v.EFF(14),v.nrm(15,"system-label",12),v.EFF(16),v.nrm(17,"system-label",13),v.k0s()(),v.DNE(18,Es,2,0,"li",14),v.k0s()()()()(),v.j41(19,"div")(20,"table",15)(21,"thead",16)(22,"tr",17),v.DNE(23,Ls,3,3,"th",18),v.k0s()(),v.j41(24,"tbody"),v.DNE(25,Ds,1,3,"tr",19),v.k0s()(),v.DNE(26,Fs,1,0,"system-spinner",20),v.k0s()()),2&e&&(v.Y8G("ngClass",v.eq3(10,Ms,t.hidepanel)),v.R7$(3),v.Y8G("module",t.module),v.R7$(5),v.Y8G("module",t.module),v.R7$(6),v.SpI("",t.getCount().hits," "),v.R7$(2),v.SpI(" ",t.getCount().total," "),v.R7$(2),v.Y8G("ngIf",t.canViewMore()),v.R7$(2),v.Y8G("ngClass",v.eq3(12,Ts,!t.issmall)),v.R7$(3),v.Y8G("ngForOf",t.listfields),v.R7$(2),v.Y8G("ngForOf",t.getItems()),v.R7$(),v.Y8G("ngIf",t.fts.runningmodulesearch))},dependencies:[i.YU,i.Sq,i.bT,D.J,j.W,xs.P,qe.r,K.P,Ss],encapsulation:2})}return GlobalSearchModule})();const $s=["tablecontent"];function Os(e,t){if(1&e&&(v.j41(0,"th",22)(1,"div",23),v.nrm(2,"system-label-fieldname",24),v.k0s()()),2&e){const e=t.$implicit,s=v.XpG();v.R7$(2),v.Y8G("module",s.module)("field",e.field)}}function Xs(e,t){if(1&e&&v.nrm(0,"tr",25),2&e){const e=t.$implicit,s=v.XpG();v.Y8G("module",s.module)("listfields",s.listfields)("listitem",e)}}function Us(e,t){if(1&e&&v.nrm(0,"tbody",26),2&e){const e=v.XpG();v.Y8G("columns",null==e.listfields?null:e.listfields.length)("select",!1)("tools",!1)("rows",5)}}function Ys(e,t){1&e&&(v.j41(0,"div",27)(1,"system-illustration-no-records"),v.nrm(2,"system-label",28),v.k0s()())}const Ns=e=>({"slds-table--bordered":e});let Vs=(()=>{class GlobalSearchModuleOnly{constructor(e,t,s,i,n,l,o){this.broadcast=e,this.metadata=t,this.elementref=s,this.fts=n,this.language=l,this.layout=o,this.module="",this.listfields=[]}get issmall(){return"small"==this.layout.screenwidth}ngOnChanges(){this.listfields=[];let e=this.metadata.getComponentConfig("GlobalSearchModule",this.module);_.isEmpty(e)&&(e=this.metadata.getModuleDefaultComponentConfigByUsage(this.module,"list"));for(let t of this.metadata.getFieldSetFields(e.fieldset))t.fieldconfig.hidden||this.listfields.push(t)}getCount(){let e={};return this.fts.moduleSearchresults.some((t=>{if(t.module===this.module)return e={total:t.data.total,hits:t.data.hits.length},!0})),e}getItems(){let e=[];return this.fts.moduleSearchresults.some((t=>{if(t.module===this.module)return e=t.data.hits,!0})),e}onScroll(e){let t=this.tablecontent.element.nativeElement;t.scrollTop+t.clientHeight+50>t.scrollHeight&&this.fts.loadMore()}static#e=this.ɵfac=function(e){return new(e||GlobalSearchModuleOnly)(v.rXU(Pe.m),v.rXU(R.yu),v.rXU(v.aKT),v.rXU(B.Ix),v.rXU(_s.s),v.rXU(I.B),v.rXU(Is.Z))};static#t=this.ɵcmp=v.VBU({type:GlobalSearchModuleOnly,selectors:[["global-search-module-only"]],viewQuery:function(e,t){if(1&e&&v.GBs($s,7,v.c1b),2&e){let e;v.mGM(e=v.lsd())&&(t.tablecontent=e.first)}},inputs:{module:"module"},features:[v.OA$],decls:29,vars:11,consts:[[1,"slds-theme--default","slds-border--top","slds-grid","slds-grid--vertical-align-center"],[1,"slds-p-left--small","slds-show--medium"],["divClass","",3,"module"],[1,"slds-p-around--small"],[1,"slds-grid"],[1,"slds-col","slds-has-flexi-truncate"],[1,"slds-page-header__title","slds-truncate"],[3,"module"],[1,"slds-col","slds-align-bottom"],[1,"slds-list--horizontal","slds-has-dividers--left"],[1,"slds-item"],["label","LBL_OF"],["label","LBL_ITEMS"],["role","grid",1,"slds-show--medium","slds-table","slds-table--bordered","slds-table--fixed-layout"],[1,"slds-text-title--caps"],["scope","col",4,"ngFor","ngForOf"],["system-to-bottom","",3,"scroll"],["role","grid",1,"slds-table","slds-table--fixed-layout","slds-max-medium-table--stacked-horizontal",3,"ngClass"],["tablecontent",""],["global-search-module-item","",3,"module","listfields","listitem",4,"ngFor","ngForOf"],["system-table-stencils","",3,"columns","select","tools","rows",4,"ngIf"],["class","slds-align--absolute-center slds-height_full",4,"ngIf"],["scope","col"],[1,"slds-truncate","slds-p-around--x-small"],[3,"module","field"],["global-search-module-item","",3,"module","listfields","listitem"],["system-table-stencils","",3,"columns","select","tools","rows"],[1,"slds-align--absolute-center","slds-height_full"],["label","MSG_NO_RECORDS_FOUND"]],template:function(e,t){1&e&&(v.j41(0,"div",0)(1,"div",1),v.nrm(2,"system-icon",2),v.k0s(),v.j41(3,"div",3)(4,"div",4)(5,"div",5)(6,"h1",6),v.nrm(7,"system-label-modulename",7),v.k0s()()(),v.j41(8,"div",4)(9,"div",8)(10,"ul",9)(11,"li",10)(12,"span"),v.EFF(13),v.nrm(14,"system-label",11),v.EFF(15),v.nrm(16,"system-label",12),v.k0s()()()()()()(),v.j41(17,"div")(18,"table",13)(19,"thead")(20,"tr",14),v.DNE(21,Os,3,2,"th",15),v.k0s()()(),v.j41(22,"div",16),v.bIt("scroll",(function(e){return t.onScroll(e)})),v.j41(23,"table",17,18)(25,"tbody"),v.DNE(26,Xs,1,3,"tr",19),v.k0s(),v.DNE(27,Us,1,4,"tbody",20),v.k0s(),v.DNE(28,Ys,3,0,"div",21),v.k0s()()),2&e&&(v.R7$(2),v.Y8G("module",t.module),v.R7$(5),v.Y8G("module",t.module),v.R7$(6),v.SpI("",t.getCount().hits," "),v.R7$(2),v.SpI(" ",null==t.getCount().total?null:t.getCount().total.value," "),v.R7$(6),v.Y8G("ngForOf",t.listfields),v.R7$(2),v.Y8G("ngClass",v.eq3(9,Ns,!t.issmall)),v.R7$(3),v.Y8G("ngForOf",t.getItems()),v.R7$(),v.Y8G("ngIf",t.fts.runningmodulesearch),v.R7$(),v.Y8G("ngIf",!t.fts.runningmodulesearch&&0==t.getCount().total))},dependencies:[i.YU,i.Sq,i.bT,gs.b,D.J,ks.b,j.W,xs.P,qe.r,Rs.t,Ss],encapsulation:2})}return GlobalSearchModuleOnly})();function As(e,t){if(1&e){const e=v.RV6();v.j41(0,"li",4)(1,"a",5),v.bIt("click",(function(){const t=v.eBV(e).$implicit,s=v.XpG();return v.Njj(s.setSearchScope(t))})),v.nrm(2,"system-label-modulename",22),v.k0s()()}if(2&e){const e=t.$implicit,s=v.XpG();v.Y8G("ngClass",s.getScopeClass(e)),v.R7$(2),v.Y8G("module",e)}}function Ps(e,t){1&e&&(v.j41(0,"table",27),v.nrm(1,"tbody",28),v.k0s()),2&e&&(v.R7$(),v.Y8G("columns",7)("select",!1)("tools",!1)("rows",15))}function zs(e,t){if(1&e){const e=v.RV6();v.j41(0,"global-search-module",29),v.bIt("scope",(function(t){v.eBV(e);const s=v.XpG(2);return v.Njj(s.setSearchScope(t))})),v.k0s()}if(2&e){const e=t.$implicit;v.Y8G("module",e.module)}}function Hs(e,t){1&e&&(v.j41(0,"div",30)(1,"system-illustration-no-records"),v.nrm(2,"system-label",31),v.k0s()())}function qs(e,t){if(1&e&&(v.j41(0,"div",23),v.DNE(1,Ps,2,4,"table",24)(2,zs,1,1,"global-search-module",25)(3,Hs,3,0,"div",26),v.k0s()),2&e){const e=v.XpG();v.R7$(),v.Y8G("ngIf",e.fts.runningmodulesearch),v.R7$(),v.Y8G("ngForOf",e.fts.moduleSearchresults),v.R7$(),v.Y8G("ngIf",!e.fts.runningmodulesearch&&0==e.totalcount)}}function Js(e,t){if(1&e&&(v.j41(0,"div"),v.nrm(1,"global-search-module-only",22),v.k0s()),2&e){const e=v.XpG();v.R7$(),v.Y8G("module",e.searchScope)}}let Ws=(()=>{class GlobalSearch{constructor(e,t,s,i,n,l,o){this.navigation=e,this.navigationtab=t,this.elementref=s,this.activatedRoute=n,this.fts=l,this.language=o,this.searchScope="*",this.searchTimeOut=void 0,this.searchTerm=""}ngOnInit(){this.routeSubscription=this.navigationtab.activeRoute$.subscribe((e=>{const t=e.params;if(t.searchterm){try{this.searchTerm=atob(decodeURIComponent(t.searchterm))}catch(e){this.searchTerm=t.searchterm}this.doSearch()}else this.navigationtab.setTabInfo({displayname:"global search",displayicon:"search"})}))}ngOnDestroy(){this.routeSubscription.unsubscribe()}search(e){if("Enter"===e.key)this.searchTimeOut&&window.clearTimeout(this.searchTimeOut),this.fts.searchTerm=this.searchTerm,this.doSearch();else this.searchTimeOut&&window.clearTimeout(this.searchTimeOut),this.searchTimeOut=window.setTimeout((()=>this.doSearch()),1e3)}get totalcount(){let e=0;for(let t of this.fts.moduleSearchresults)e+=_.isNumber(t.data.total)?t.data.total:t.data.total.value;return e}get totalmodules(){let e=0;for(let t of this.fts.moduleSearchresults)(_.isNumber(t.data.total)?t.data.total:t.data.total.value)>0&&e++;return e}doSearch(){"*"===this.searchScope?this.fts.searchByModules({searchterm:this.searchTerm}).subscribe((e=>{let t=0;for(let e of this.fts.moduleSearchresults)t+=_.isNumber(e.data.total)?e.data.total:e.data.total.value;this.setTabName(t)})):this.fts.searchByModules({searchterm:this.searchTerm,modules:[this.searchScope],size:50}).subscribe((e=>{let t=0;for(let e of this.fts.moduleSearchresults)t+=_.isNumber(e.data.total)?e.data.total:e.data.total.value;this.setTabName(t)})),this.setTabName()}setTabName(e){this.navigationtab.setTabInfo({displayname:"search "+this.searchTerm+(e?" ("+e+")":""),displayicon:"search"})}getScopeClass(e){if(e===this.searchScope)return"slds-is-active"}setSearchScope(e){e!==this.searchScope&&(this.searchScope=e,this.doSearch())}infiniteScroll(){return"*"!==this.searchScope}static#e=this.ɵfac=function(e){return new(e||GlobalSearch)(v.rXU(T.L),v.rXU(ms._),v.rXU(v.aKT),v.rXU(B.Ix),v.rXU(B.nX),v.rXU(_s.s),v.rXU(I.B))};static#t=this.ɵcmp=v.VBU({type:GlobalSearch,selectors:[["global-search"]],features:[v.Jv_([_s.s])],decls:23,vars:5,consts:[[1,"slds-grid"],["system-to-bottom","",1,"slds-show--large","slds-size--1-of-12","slds-grid","slds-grid--vertical","slds-navigation-list--vertical","slds-navigation-list--vertical-inverse"],[1,"slds-text-title--caps","slds-p-around--medium"],["label","LBL_SEARCHRESULTS"],[3,"ngClass"],["href","javascript:void(0);",1,"slds-navigation-list--vertical__action","slds-text-link--reset",3,"click"],["label","LBL_TOPRESULTS"],[3,"ngClass",4,"ngFor","ngForOf"],[1,"slds-size--1-of-1","slds-large-size--11-of-12","slds-border--left"],[1,"slds-p-around--medium","slds-theme--shade","slds-border--bottom"],[1,"slds-page-header__row"],[1,"slds-page-header__col-title"],[1,"slds-media"],[1,"slds-media__figure"],["icon","search",3,"click"],[1,"slds-media__body"],[1,"slds-grid","slds-grid--vertical-align-center"],[1,"slds-form-element","slds-size--1-of-1"],[1,"slds-form-element__control"],["system-autofocus","","type","text","spellcheck","false",1,"slds-input",3,"ngModel","ngModelChange","keyup"],["system-to-bottom","",4,"ngIf"],[4,"ngIf"],[3,"module"],["system-to-bottom",""],["class","slds-table slds-table--bordered slds-table--fixed-layout","role","grid",4,"ngIf"],["class","slds-m-bottom--medium",3,"module","scope",4,"ngFor","ngForOf"],["class","slds-align--absolute-center slds-height_full",4,"ngIf"],["role","grid",1,"slds-table","slds-table--bordered","slds-table--fixed-layout"],["system-table-stencils","",3,"columns","select","tools","rows"],[1,"slds-m-bottom--medium",3,"module","scope"],[1,"slds-align--absolute-center","slds-height_full"],["label","MSG_NO_RECORDS_FOUND"]],template:function(e,t){1&e&&(v.j41(0,"div",0)(1,"div",1)(2,"h2",2),v.nrm(3,"system-label",3),v.k0s(),v.j41(4,"ul")(5,"li",4)(6,"a",5),v.bIt("click",(function(){return t.setSearchScope("*")})),v.nrm(7,"system-label",6),v.k0s()(),v.DNE(8,As,3,2,"li",7),v.k0s()(),v.j41(9,"div",8)(10,"div",9)(11,"div",10)(12,"div",11)(13,"div",12)(14,"div",13)(15,"system-icon",14),v.bIt("click",(function(){return t.setSearchScope("*")})),v.k0s()(),v.j41(16,"div",15)(17,"h1",16)(18,"div",17)(19,"div",18)(20,"input",19),v.mxI("ngModelChange",(function(e){return v.DH7(t.searchTerm,e)||(t.searchTerm=e),e})),v.bIt("keyup",(function(e){return t.search(e)})),v.k0s()()()()()()()()(),v.DNE(21,qs,4,3,"div",20)(22,Js,2,1,"div",21),v.k0s()()),2&e&&(v.R7$(5),v.Y8G("ngClass",t.getScopeClass("*")),v.R7$(3),v.Y8G("ngForOf",t.fts.searchModules),v.R7$(12),v.R50("ngModel",t.searchTerm),v.R7$(),v.Y8G("ngIf","*"==t.searchScope),v.R7$(),v.Y8G("ngIf","*"!=t.searchScope))},dependencies:[i.YU,i.Sq,i.bT,n.me,n.BC,n.vS,Bt.a,gs.b,D.J,ks.b,j.W,qe.r,Rs.t,Bs,Vs],encapsulation:2})}return GlobalSearch})();var Ks=s(80329),Qs=s(29694),Zs=s(17427);function ei(e,t){if(1&e){const e=v.RV6();v.j41(0,"div",12)(1,"label",13),v.EFF(2),v.k0s(),v.j41(3,"system-input-timezone",14),v.mxI("ngModelChange",(function(t){v.eBV(e);const s=v.XpG(2);return v.DH7(s.preferences.timezone,t)||(s.preferences.timezone=t),v.Njj(t)})),v.k0s()()}if(2&e){const e=v.XpG(2);v.R7$(),v.Mz_("for","",e.componentId,"-timezone"),v.R7$(),v.JRh(e.lang.getLabel("LBL_TIMEZONE")),v.R7$(),v.R50("ngModel",e.preferences.timezone)}}function ti(e,t){if(1&e&&(v.j41(0,"option",18),v.EFF(1),v.k0s()),2&e){const e=t.$implicit;v.Y8G("value",e.value),v.R7$(),v.JRh(e.name)}}function si(e,t){if(1&e){const e=v.RV6();v.j41(0,"div",12)(1,"label",13),v.EFF(2),v.k0s(),v.j41(3,"div",15)(4,"select",16),v.mxI("ngModelChange",(function(t){v.eBV(e);const s=v.XpG(2);return v.DH7(s.preferences.datef,t)||(s.preferences.datef=t),v.Njj(t)})),v.DNE(5,ti,2,2,"option",17),v.k0s()()()}if(2&e){const e=v.XpG(2);v.R7$(),v.Mz_("for","",e.componentId,"-datef"),v.R7$(),v.JRh(e.lang.getLabel("LBL_DATE_FORMAT")),v.R7$(2),v.Mz_("id","",e.componentId,"-datef"),v.R50("ngModel",e.preferences.datef),v.R7$(),v.Y8G("ngForOf",e.dateFormatList)}}function ii(e,t){if(1&e&&(v.j41(0,"option",18),v.EFF(1),v.k0s()),2&e){const e=t.$implicit;v.Y8G("value",e.value),v.R7$(),v.JRh(e.name)}}function ni(e,t){if(1&e){const e=v.RV6();v.j41(0,"div",12)(1,"label",13),v.EFF(2),v.k0s(),v.j41(3,"div",15)(4,"select",16),v.mxI("ngModelChange",(function(t){v.eBV(e);const s=v.XpG(2);return v.DH7(s.preferences.timef,t)||(s.preferences.timef=t),v.Njj(t)})),v.DNE(5,ii,2,2,"option",17),v.k0s()()()}if(2&e){const e=v.XpG(2);v.R7$(),v.Mz_("for","",e.componentId,"-timef"),v.R7$(),v.JRh(e.lang.getLabel("LBL_TIME_FORMAT")),v.R7$(2),v.Mz_("id","",e.componentId,"-timef"),v.R50("ngModel",e.preferences.timef),v.R7$(),v.Y8G("ngForOf",e.timeFormatList)}}function li(e,t){if(1&e&&(v.j41(0,"div",5)(1,"h3",6)(2,"span",7),v.EFF(3),v.k0s()(),v.j41(4,"div",8)(5,"p",9),v.EFF(6),v.k0s(),v.j41(7,"div",10),v.DNE(8,ei,4,3,"div",11)(9,si,6,5,"div",11)(10,ni,6,5,"div",11),v.k0s()()()),2&e){const e=v.XpG();v.R7$(3),v.SpI("",e.lang.getLabel("LBL_SOME_SETTINGS_ARE_MISSING")," …"),v.R7$(3),v.JRh(e.lang.getLabel("MSG_NOT_CONFIGURED_USER_SETTINGS")),v.R7$(2),v.Y8G("ngIf",e.isPrefMissing("timezone")),v.R7$(),v.Y8G("ngIf",e.isPrefMissing("datef")),v.R7$(),v.Y8G("ngIf",e.isPrefMissing("timef"))}}function oi(e,t){if(1&e&&(v.j41(0,"option",18),v.EFF(1),v.k0s()),2&e){const e=t.$implicit,s=v.XpG(2);v.FS9("value",e),v.R7$(),v.JRh(s.timezones[e])}}const ai=e=>[e];function ri(e,t){if(1&e){const e=v.RV6();v.j41(0,"div",5)(1,"h3",6)(2,"span",7),v.EFF(3),v.k0s()(),v.j41(4,"div",8)(5,"p",19),v.EFF(6),v.k0s(),v.j41(7,"div",20)(8,"span",21)(9,"input",22),v.mxI("ngModelChange",(function(t){v.eBV(e);const s=v.XpG();return v.DH7(s.timeshiftAction,t)||(s.timeshiftAction=t),v.Njj(t)})),v.k0s(),v.j41(10,"label",23),v.nrm(11,"span",24),v.k0s()(),v.j41(12,"div",25)(13,"div",15)(14,"select",26),v.mxI("ngModelChange",(function(t){v.eBV(e);const s=v.XpG();return v.DH7(s.selectedTimezone,t)||(s.selectedTimezone=t),v.Njj(t)})),v.bIt("change",(function(){v.eBV(e);const t=v.XpG();return v.Njj(t.timeshiftAction="takeSelected")})),v.DNE(15,oi,2,2,"option",17),v.k0s()()(),v.j41(16,"span",27)(17,"input",28),v.mxI("ngModelChange",(function(t){v.eBV(e);const s=v.XpG();return v.DH7(s.timeshiftAction,t)||(s.timeshiftAction=t),v.Njj(t)})),v.k0s(),v.j41(18,"label",23),v.nrm(19,"span",24),v.j41(20,"span",29),v.EFF(21),v.k0s()()()()()()}if(2&e){const e=v.XpG();v.R7$(3),v.JRh(e.lang.getLabel("LBL_TIME_SHIFT")),v.R7$(3),v.JRh(e.lang.getLabelFormatted("MSG_TIME_SHIFT",v.eq3(12,ai,e.timeshift))),v.R7$(3),v.Mz_("id","",e.componentId,"-timeshift-radio-2"),v.R50("ngModel",e.timeshiftAction),v.R7$(),v.Mz_("for","",e.componentId,"-timeshift-radio-2"),v.R7$(4),v.R50("ngModel",e.selectedTimezone),v.R7$(),v.Y8G("ngForOf",e.timezoneKeys),v.R7$(2),v.Mz_("id","",e.componentId,"-timeshift-radio-1"),v.R50("ngModel",e.timeshiftAction),v.R7$(),v.Mz_("for","",e.componentId,"-timeshift-radio-1"),v.R7$(3),v.Lme("",e.guessedTimezone," (GMT",e.guessedTimezoneGmtDiff,")")}}function di(e,t){if(1&e){const e=v.RV6();v.j41(0,"div",30)(1,"div",31)(2,"div",32)(3,"input",33),v.mxI("ngModelChange",(function(t){v.eBV(e);const s=v.XpG();return v.DH7(s.navigateToUserPrefs,t)||(s.navigateToUserPrefs=t),v.Njj(t)})),v.k0s(),v.j41(4,"label",34),v.nrm(5,"span",35),v.j41(6,"span",29),v.EFF(7),v.k0s()()()()()}if(2&e){const e=v.XpG();v.R7$(3),v.R50("ngModel",e.navigateToUserPrefs),v.R7$(4),v.JRh(e.lang.getLabel("MSG_AFTER_SAVING_NAVIGATE_USERPREFS"))}}let ci=(()=>{class GlobalObtainImportantPreferences{constructor(e,t,s,i,n,l){this.backend=e,this.lang=t,this.prefservice=s,this.session=i,this.router=n,this.toastservice=l,this.componentId=_.uniqueId(),this.namesOfMissingPrefs=[],this.timeshift=0,this.preferences={},this.navigateToUserPrefs=!1,this.guessedTimezone=moment.tz.guess(),this.guessedTimezoneGmtDiff=moment.tz(this.guessedTimezone).format("Z"),this.timeshiftAction="takeSelected",this.dateFormatList=[{name:moment().format(this.prefservice.jsDateFormat2momentDateFormat("Y-m-d")),value:"Y-m-d"},{name:moment().format(this.prefservice.jsDateFormat2momentDateFormat("m-d-Y")),value:"m-d-Y"},{name:moment().format(this.prefservice.jsDateFormat2momentDateFormat("d-m-Y")),value:"d-m-Y"},{name:moment().format(this.prefservice.jsDateFormat2momentDateFormat("Y/m/d")),value:"Y/m/d"},{name:moment().format(this.prefservice.jsDateFormat2momentDateFormat("m/d/Y")),value:"m/d/Y"},{name:moment().format(this.prefservice.jsDateFormat2momentDateFormat("d/m/Y")),value:"d/m/Y"},{name:moment().format(this.prefservice.jsDateFormat2momentDateFormat("Y.m.d")),value:"Y.m.d"},{name:moment().format(this.prefservice.jsDateFormat2momentDateFormat("d.m.Y")),value:"d.m.Y"},{name:moment().format(this.prefservice.jsDateFormat2momentDateFormat("m.d.Y")),value:"m.d.Y"}],this.timeFormatList=[{name:moment().format(this.prefservice.jsTimeFormat2momentTimeFormat("H:i")),value:"H:i"},{name:moment().format(this.prefservice.jsTimeFormat2momentTimeFormat("h:ia")),value:"h:ia"},{name:moment().format(this.prefservice.jsTimeFormat2momentTimeFormat("h:iA")),value:"h:iA"},{name:moment().format(this.prefservice.jsTimeFormat2momentTimeFormat("h:i a")),value:"h:i a"},{name:moment().format(this.prefservice.jsTimeFormat2momentTimeFormat("h:i A")),value:"h:i A"},{name:moment().format(this.prefservice.jsTimeFormat2momentTimeFormat("H.i")),value:"H.i"},{name:moment().format(this.prefservice.jsTimeFormat2momentTimeFormat("h.ia")),value:"h.ia"},{name:moment().format(this.prefservice.jsTimeFormat2momentTimeFormat("h.iA")),value:"h.iA"},{name:moment().format(this.prefservice.jsTimeFormat2momentTimeFormat("h.i a")),value:"h.i a"},{name:moment().format(this.prefservice.jsTimeFormat2momentTimeFormat("h.i A")),value:"h.i A"}]}ngOnInit(){this.timeshift&&(this.selectedTimezone=this.configuredTimezone=this.prefservice.unchangedPreferences.global.timezone);for(let e of this.namesOfMissingPrefs)this.preferences[e]=this.prefservice.defaults[e]}save(){this.timeshift&&("takeSelected"===this.timeshiftAction&&this.configuredTimezone!==this.selectedTimezone&&(this.preferences.timezone=this.selectedTimezone),"takeGuessed"===this.timeshiftAction&&(this.preferences.timezone=this.guessedTimezone)),_.isEmpty(this.preferences)||this.prefservice.setPreferences(this.preferences).subscribe((()=>{this.toastservice.sendToast(this.lang.getLabel("LBL_DATA_SAVED"),"success")})),this.navigateToUserPrefs&&this.router.navigate(["/module/Users/"+this.session.authData.userId]),this.self.destroy()}canSave(){if(this.namesOfMissingPrefs)for(let e of this.namesOfMissingPrefs)if(!this.preferences[e])return!1;return!0}isPrefMissing(e){return-1!==this.namesOfMissingPrefs.indexOf(e)}onModalEscX(){return!1}static#e=this.ɵfac=function(e){return new(e||GlobalObtainImportantPreferences)(v.rXU(fe.H),v.rXU(I.B),v.rXU(Tt.S),v.rXU(k.d),v.rXU(B.Ix),v.rXU(W.o))};static#t=this.ɵcmp=v.VBU({type:GlobalObtainImportantPreferences,selectors:[["global-obtain-important-preferences"]],inputs:{namesOfMissingPrefs:"namesOfMissingPrefs",timeshift:"timeshift"},decls:11,vars:6,consts:[["hiddenCloseButton","true"],["class","slds-section slds-is-open",4,"ngIf"],[1,"slds-grid","slds-grid--align-spread","slds-grid--align-center","slds-grid--align-end"],["class","slds-form-element slds-p-horizontal--medium slds-p-vertical--x-small slds-col--bump-right",4,"ngIf"],[1,"slds-button","slds-button--brand",3,"disabled","click"],[1,"slds-section","slds-is-open"],[1,"slds-section__title","slds-theme_shade"],["title","Section Title",1,"slds-truncate","slds-p-horizontal_small"],[1,"slds-section__content"],[1,"slds-p-horizontal--medium","slds-p-vertical--x-small"],[1,"slds-grid","slds-p-horizontal--x-small"],["class","slds-form-element slds-p-horizontal--x-small slds-p-bottom--x-small slds-size--1-of-3",4,"ngIf"],[1,"slds-form-element","slds-p-horizontal--x-small","slds-p-bottom--x-small","slds-size--1-of-3"],[1,"slds-form-element__label",3,"for"],[3,"ngModel","ngModelChange"],[1,"slds-select_container"],[1,"slds-select",3,"id","ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[1,"slds-p-horizontal--medium","slds-p-vertical--x-small","slds-m-bottom--x-small"],[1,"slds-grid","slds-p-horizontal--medium","slds-grid--vertical-align-center"],[1,"slds-radio"],["type","radio","checked","true","name","timeshift","value","takeSelected",3,"id","ngModel","ngModelChange"],[1,"slds-radio__label",3,"for"],[1,"slds-radio_faux"],[1,"slds-form-element"],["name","timezone",1,"slds-select",3,"ngModel","ngModelChange","change"],[1,"slds-radio","slds-m-left--medium"],["type","radio","name","timeshift","value","takeGuessed",3,"id","ngModel","ngModelChange"],[1,"slds-form-element__label"],[1,"slds-form-element","slds-p-horizontal--medium","slds-p-vertical--x-small","slds-col--bump-right"],[1,"slds-form-element__control"],[1,"slds-checkbox"],["type","checkbox","id","ask-userprefs-navigate",3,"ngModel","ngModelChange"],["for","ask-userprefs-navigate",1,"slds-checkbox__label"],[1,"slds-checkbox_faux"]],template:function(e,t){1&e&&(v.j41(0,"system-modal")(1,"system-modal-header",0),v.EFF(2),v.k0s(),v.j41(3,"system-modal-content"),v.DNE(4,li,11,5,"div",1)(5,ri,22,14,"div",1),v.k0s(),v.j41(6,"system-modal-footer")(7,"div",2),v.DNE(8,di,8,2,"div",3),v.j41(9,"button",4),v.bIt("click",(function(){return t.save()})),v.EFF(10),v.k0s()()()()),2&e&&(v.R7$(2),v.SpI(" ",t.lang.getLabel("LBL_IMPORTANT_USER_SETTINGS")," "),v.R7$(2),v.Y8G("ngIf",t.namesOfMissingPrefs.length),v.R7$(),v.Y8G("ngIf",t.timeshift),v.R7$(3),v.Y8G("ngIf",t.namesOfMissingPrefs.length),v.R7$(),v.Y8G("disabled",!t.canSave()),v.R7$(),v.JRh(t.lang.getLabel("LBL_OK")))},dependencies:[i.Sq,i.bT,n.xH,n.y7,n.me,n.Zm,n.wz,n.Fm,n.BC,n.vS,Ie.D,xe.I,Be.Q,je.C,Zs.p],encapsulation:2})}return GlobalObtainImportantPreferences})();var ui=s(345);function mi(e,t){if(1&e&&v.nrm(0,"div",2),2&e){const e=v.XpG();v.Y8G("innerHTML",e.sanitizer.bypassSecurityTrustHtml(e.consentText),v.npT)}}let hi=(()=>{class GlobalObtainGDPRConsent{constructor(e,t,s,i,n,l,o,a,r){this.sanitizer=e,this.metadata=t,this.language=s,this.backend=i,this.loginService=n,this.http=l,this.configuration=o,this.session=a,this.toast=r,this.isSaving=!1,this.retrieveConsentText()}retrieveConsentText(){let e=new ae.Lr;e=e.set("OAuth-Token",this.session.authData.sessionId),this.http.get(this.configuration.getBackendUrl()+"/common/gdpr/portalGDPRconsentText",{headers:e}).subscribe((e=>{this.consentText=e.portalGDPRconsentText}))}save(){this.isSaving||(this.isSaving=!0,this.backend.postRequest("common/gdpr/portalGDPRconsent",null,{consentText:this.consentText}).subscribe((e=>{this.loginService.session.authData.obtainGDPRconsent=!1}),(e=>{this.isSaving=!1,"wrongConsentText"===e.error.error.errorCode?this.consentText=e.error.error.details.properConsentText:this.toast.sendToast("Error saving the GDPR consent.","error","Try again or consult the administrator.")})))}canSave(){return this.consentText&&!this.isSaving}static#e=this.ɵfac=function(e){return new(e||GlobalObtainGDPRConsent)(v.rXU(ui.up),v.rXU(R.yu),v.rXU(I.B),v.rXU(fe.H),v.rXU(re.B),v.rXU(ae.Qq),v.rXU(J.i),v.rXU(k.d),v.rXU(W.o))};static#t=this.ɵcmp=v.VBU({type:GlobalObtainGDPRConsent,selectors:[["global-obtain-gdpr-consent"]],decls:2,vars:2,consts:[[2,"min-height","80px",3,"system-overlay-loading-spinner"],[3,"innerHTML",4,"ngIf"],[3,"innerHTML"]],template:function(e,t){1&e&&(v.j41(0,"div",0),v.DNE(1,mi,1,1,"div",1),v.k0s()),2&e&&(v.Y8G("system-overlay-loading-spinner",!t.consentText),v.R7$(),v.Y8G("ngIf",t.consentText))},dependencies:[i.bT,ke.M],encapsulation:2})}return GlobalObtainGDPRConsent})();var gi=s(17368);const pi=["container"];function fi(e,t){1&e&&v.nrm(0,"global-obtain-gdpr-consent")}let bi=(()=>{class GlobalObtainGDPRConsentContainer{constructor(e,t,s){this.metadata=e,this.language=t,this.login=s,this.showDefault=!1,this.headerLabel="LBL_GDPR_DATA_AGREEMENT",this.taglineLabel="MSG_TO_CONTINUE_AGREE_TO_GDPR_CONSENT",this.saveButtonLabel="LBL_I_AGREE",this.canSave=()=>!!this.childComponent&&this.childComponent.canSave(),this.isSaving=()=>!!this.childComponent&&this.childComponent.isSaving}ngAfterViewInit(){this.displayComponent()}displayComponent(){this.componentConfig=this.metadata.getComponentConfig("GlobalObtainGDPRConsentContainer"),this.componentConfig&&this.componentConfig.customComponent?(this.nameOfCustomComponent=this.componentConfig.customComponent,this.metadata.addComponent(this.nameOfCustomComponent,this.container).subscribe((e=>{e.instance.headerLabel&&(this.headerLabel=e.instance.headerLabel),e.instance.taglineLabel&&(this.taglineLabel=e.instance.taglineLabel),e.instance.saveButtonLabel&&(this.saveButtonLabel=e.instance.saveButtonLabel),e.instance.finished.subscribe((e=>this.finished(e))),this.childComponent=e.instance}))):this.showDefault=!0}save(){this.childComponent.save()}finished(e){e||this.login.logout(),this.self.destroy()}static#e=this.ɵfac=function(e){return new(e||GlobalObtainGDPRConsentContainer)(v.rXU(R.yu),v.rXU(I.B),v.rXU(re.B))};static#t=this.ɵcmp=v.VBU({type:GlobalObtainGDPRConsentContainer,selectors:[["global-obtain-gdpr-consent-container"]],viewQuery:function(e,t){if(1&e&&(v.GBs(pi,5,v.c1b),v.GBs(hi,5)),2&e){let e;v.mGM(e=v.lsd())&&(t.container=e.first),v.mGM(e=v.lsd())&&(t.childComponent=e.first)}},decls:14,vars:7,consts:[["size","small"],["hiddenCloseButton","true"],[3,"system-overlay-loading-spinner"],["container",""],[4,"ngIf"],[1,"slds-button","slds-button--neutral",3,"click"],[1,"slds-button","slds-button--brand",3,"disabled","click"]],template:function(e,t){1&e&&(v.j41(0,"system-modal",0)(1,"system-modal-header",1),v.EFF(2),v.j41(3,"system-modal-header-tagline"),v.EFF(4),v.k0s()(),v.j41(5,"system-modal-content",2),v.nrm(6,"div",null,3),v.DNE(8,fi,1,0,"global-obtain-gdpr-consent",4),v.k0s(),v.j41(9,"system-modal-footer")(10,"button",5),v.bIt("click",(function(){return t.finished(!1)})),v.EFF(11),v.k0s(),v.j41(12,"button",6),v.bIt("click",(function(){return t.save()})),v.EFF(13),v.k0s()()()),2&e&&(v.R7$(2),v.SpI(" ",t.language.getLabel(t.headerLabel)," "),v.R7$(2),v.JRh(t.language.getLabel(t.taglineLabel)),v.R7$(),v.Y8G("system-overlay-loading-spinner",t.isSaving()),v.R7$(3),v.Y8G("ngIf",t.showDefault),v.R7$(3),v.JRh(t.language.getLabel("LBL_CANCEL")),v.R7$(),v.Y8G("disabled",!t.canSave()),v.R7$(),v.JRh(t.language.getLabel(t.saveButtonLabel)))},dependencies:[i.bT,ke.M,Ie.D,xe.I,Be.Q,je.C,gi.I,hi],encapsulation:2})}return GlobalObtainGDPRConsentContainer})();var yi=s(28666),vi=s(97317);function _i(e,t){1&e&&(v.j41(0,"span",15),v.nrm(1,"system-icon",16),v.k0s())}function ki(e,t){1&e&&(v.j41(0,"abbr",17),v.EFF(1,"●"),v.k0s())}function Ri(e,t){if(1&e&&(v.j41(0,"div",2)(1,"div",3),v.DNE(2,_i,2,0,"span",4),v.k0s(),v.j41(3,"div",5)(4,"div",6)(5,"a",7)(6,"h3",8)(7,"span",9),v.EFF(8),v.k0s(),v.j41(9,"span",10),v.nrm(10,"system-label",11),v.k0s(),v.j41(11,"span",12),v.EFF(12),v.k0s()(),v.j41(13,"p",13),v.EFF(14),v.DNE(15,ki,2,0,"abbr",14),v.k0s()()()()()),2&e){const e=v.XpG();v.R7$(2),v.Y8G("ngIf",e.notification.bean_module),v.R7$(2),v.AVh("slds-text-title_bold",1!=e.notification.notification_read),v.R7$(3),v.Y8G("id",e.notification.bean_id)("module",e.notification.bean_module)("system-title",e.notification.bean_name),v.R7$(),v.SpI(" ",e.notification.bean_name," "),v.R7$(3),v.Y8G("id",e.notification.created_by)("system-title",e.notification.created_by_name),v.R7$(),v.SpI(" ",e.notification.created_by_name," "),v.R7$(2),v.SpI(" ",e.notification.notification_date," "),v.R7$(),v.Y8G("ngIf",1!=e.notification.notification_read)}}function Ii(e,t){if(1&e){const e=v.RV6();v.j41(0,"section",18)(1,"div",19)(2,"a",20),v.nrm(3,"system-icon",16),v.j41(4,"div",5)(5,"h2",21)(6,"span",22),v.EFF(7),v.k0s(),v.j41(8,"span",10),v.nrm(9,"system-label",11),v.k0s(),v.j41(10,"span",23),v.EFF(11),v.k0s()(),v.j41(12,"p"),v.EFF(13),v.k0s()()(),v.j41(14,"button",24),v.bIt("click",(function(){v.eBV(e);const t=v.XpG();return v.Njj(t.notificationService.clearTempNotification(t.notification))})),v.nrm(15,"system-button-icon",25),v.k0s()()()}if(2&e){const e=v.XpG();v.R7$(6),v.Y8G("id",e.notification.bean_id)("module",e.notification.bean_module)("system-title",e.notification.bean_name),v.R7$(),v.SpI(" ",e.notification.bean_name," "),v.R7$(3),v.Y8G("id",e.notification.created_by)("system-title",e.notification.created_by_name),v.R7$(),v.SpI(" ",e.notification.created_by_name," "),v.R7$(2),v.SpI(" ",e.notification.notification_date," ")}}let xi=(()=>{class GlobalHeaderNotificationsItemGeneric{constructor(e){this.notificationService=e,this.asBox=!1}static#e=this.ɵfac=function(e){return new(e||GlobalHeaderNotificationsItemGeneric)(v.rXU(vi.E))};static#t=this.ɵcmp=v.VBU({type:GlobalHeaderNotificationsItemGeneric,selectors:[["global-header-notifications-item-generic"]],inputs:{notification:"notification",asBox:"asBox"},decls:3,vars:2,consts:[["class","slds-media slds-has-flexi-truncate slds-p-around_x-small",4,"ngIf","ngIfElse"],["boxContainer",""],[1,"slds-media","slds-has-flexi-truncate","slds-p-around_x-small"],[1,"slds-media__figure"],["class","slds-icon_container","style","width:40px;height:40px;",4,"ngIf"],[1,"slds-media__body"],[1,"slds-grid","slds-grid_align-spread"],["href","javascript:void(0);",1,"slds-text-link_reset","slds-has-flexi-truncate"],[1,"slds-truncate"],["system-model-popover","",1,"slds-m-right--xxx-small",3,"id","module","system-title"],["system-title","MSG_NOTIFICATION_GENERIC"],["label","MSG_NOTIFICATION_GENERIC"],["system-model-popover","","module","Users",1,"slds-m-right--xxx-small",3,"id","system-title"],[1,"slds-text-color_weak"],["system-title","LBL_UNREAD","class","slds-text-link slds-m-horizontal_xxx-small slds-text-color_success",4,"ngIf"],[1,"slds-icon_container",2,"width","40px","height","40px"],["icon","all"],["system-title","LBL_UNREAD",1,"slds-text-link","slds-m-horizontal_xxx-small","slds-text-color_success"],["role","dialog",1,"slds-notification","slds-m-vertical--xxx-small"],[1,"slds-notification__body"],[1,"slds-notification__target","slds-media"],[1,"slds-text-heading_small","slds-m-bottom_xx-small"],["system-model-popover","",1,"slds-m-right--xxx-small",2,"text-decoration","underline",3,"id","module","system-title"],["system-model-popover","","module","Users",1,"slds-m-right--xxx-small",2,"text-decoration","underline",3,"id","system-title"],["system-title","LBL_CLOSE",1,"slds-button","slds-button_icon","slds-button_icon-container","slds-notification__close",3,"click"],["icon","close"]],template:function(e,t){if(1&e&&v.DNE(0,Ri,16,12,"div",0)(1,Ii,16,8,"ng-template",null,1,v.C5r),2&e){const e=v.sdS(2);v.Y8G("ngIf",!t.asBox)("ngIfElse",e)}},dependencies:[i.bT,hs.j,x.L,O.t,D.J,j.W],encapsulation:2})}return GlobalHeaderNotificationsItemGeneric})();function ji(e,t){1&e&&(v.j41(0,"div",15),v.nrm(1,"system-icon",16),v.k0s())}function Gi(e,t){1&e&&(v.j41(0,"abbr",17),v.EFF(1,"●"),v.k0s())}function Ci(e,t){if(1&e&&(v.j41(0,"div",2)(1,"div",3),v.DNE(2,ji,2,0,"div",4),v.k0s(),v.j41(3,"div",5)(4,"div",6)(5,"h3",7)(6,"span",8),v.nrm(7,"system-label",9),v.k0s(),v.j41(8,"span",10),v.EFF(9),v.k0s(),v.nrm(10,"system-label",11),v.j41(11,"span",12),v.EFF(12),v.k0s()(),v.j41(13,"p",13),v.EFF(14),v.DNE(15,Gi,2,0,"abbr",14),v.k0s()()()()),2&e){const e=v.XpG();v.R7$(2),v.Y8G("ngIf",e.notification.bean_module),v.R7$(2),v.AVh("slds-text-title_bold",1!=e.notification.notification_read),v.R7$(4),v.Y8G("id",e.notification.bean_id)("module",e.notification.bean_module)("system-title",e.notification.bean_name),v.R7$(),v.SpI(" ",e.notification.bean_name," "),v.R7$(2),v.Y8G("id",e.notification.created_by)("system-title",e.notification.created_by_name),v.R7$(),v.SpI(" ",e.notification.created_by_name," "),v.R7$(2),v.SpI(" ",e.notification.notification_date," "),v.R7$(),v.Y8G("ngIf",1!=e.notification.notification_read)}}function wi(e,t){if(1&e){const e=v.RV6();v.j41(0,"section",18)(1,"div",19)(2,"a",20),v.nrm(3,"system-icon",16),v.j41(4,"div",5)(5,"h2",21)(6,"span",22),v.nrm(7,"system-label",23),v.k0s(),v.j41(8,"span",24),v.EFF(9),v.k0s(),v.nrm(10,"system-label",25),v.j41(11,"span",26),v.EFF(12),v.k0s()(),v.j41(13,"p"),v.EFF(14),v.k0s()()(),v.j41(15,"button",27),v.bIt("click",(function(){v.eBV(e);const t=v.XpG();return v.Njj(t.notificationService.clearTempNotification(t.notification))})),v.nrm(16,"system-button-icon",28),v.k0s()()()}if(2&e){const e=v.XpG();v.R7$(8),v.Y8G("id",e.notification.bean_id)("module",e.notification.bean_module)("system-title",e.notification.bean_name),v.R7$(),v.SpI(" ",e.notification.bean_name," "),v.R7$(2),v.Y8G("id",e.notification.created_by)("system-title",e.notification.created_by_name),v.R7$(),v.SpI(" ",e.notification.created_by_name," "),v.R7$(2),v.SpI(" ",e.notification.notification_date," ")}}let Si=(()=>{class GlobalHeaderNotificationsItemChange{constructor(e){this.notificationService=e,this.asBox=!1}static#e=this.ɵfac=function(e){return new(e||GlobalHeaderNotificationsItemChange)(v.rXU(vi.E))};static#t=this.ɵcmp=v.VBU({type:GlobalHeaderNotificationsItemChange,selectors:[["global-header-notifications-item-change"]],inputs:{notification:"notification",asBox:"asBox"},decls:3,vars:2,consts:[["class","slds-media slds-has-flexi-truncate slds-p-around_x-small",4,"ngIf","ngIfElse"],["boxContainer",""],[1,"slds-media","slds-has-flexi-truncate","slds-p-around_x-small"],[1,"slds-media__figure"],["class","slds-icon_container","style","width:40px;height:40px;",4,"ngIf"],[1,"slds-media__body"],[1,"slds-grid","slds-grid_align-spread"],[1,"slds-truncate"],["system-title","LBL_CHANGED",1,"slds-m-right--xx-small"],["label","LBL_CHANGED"],["system-model-popover","",1,"slds-m-right--xxx-small",3,"id","module","system-title"],["label","LBL_BY",1,"slds-m-right--xxx-small","slds-m-left--xxx-small"],["system-model-popover","","module","Users",1,"slds-m-right--xxx-small",3,"id","system-title"],[1,"slds-text-color_weak"],["system-title","LBL_UNREAD","class","slds-text-link slds-m-horizontal_xxx-small slds-text-color_success",4,"ngIf"],[1,"slds-icon_container",2,"width","40px","height","40px"],["icon","custom18","sprite","custom"],["system-title","LBL_UNREAD",1,"slds-text-link","slds-m-horizontal_xxx-small","slds-text-color_success"],["role","dialog",1,"slds-notification","slds-m-vertical--xxx-small"],[1,"slds-notification__body"],[1,"slds-notification__target","slds-media"],[1,"slds-text-heading_small","slds-m-bottom_xx-small"],["system-title","LBL_CHANGED"],["label","LBL_ASSIGNED"],["system-model-popover","",1,"slds-m-right--xxx-small",2,"text-decoration","underline",3,"id","module","system-title"],["label","LBL_BY"],["system-model-popover","","module","Users",1,"slds-m-right--xxx-small",2,"text-decoration","underline",3,"id","system-title"],["system-title","LBL_CLOSE",1,"slds-button","slds-button_icon","slds-button_icon-container","slds-notification__close",3,"click"],["icon","close"]],template:function(e,t){if(1&e&&v.DNE(0,Ci,16,12,"div",0)(1,wi,17,8,"ng-template",null,1,v.C5r),2&e){const e=v.sdS(2);v.Y8G("ngIf",!t.asBox)("ngIfElse",e)}},dependencies:[i.bT,hs.j,x.L,O.t,D.J,j.W],encapsulation:2})}return GlobalHeaderNotificationsItemChange})();function Ei(e,t){1&e&&(v.j41(0,"span",16),v.nrm(1,"system-icon",17),v.k0s())}function Li(e,t){1&e&&(v.j41(0,"abbr",18),v.EFF(1,"●"),v.k0s())}function Di(e,t){if(1&e&&(v.j41(0,"div",2)(1,"div",3),v.DNE(2,Ei,2,0,"span",4),v.k0s(),v.j41(3,"div",5)(4,"div",6)(5,"a",7)(6,"h3",8)(7,"span",9),v.nrm(8,"system-label",10),v.k0s(),v.j41(9,"span",11),v.EFF(10),v.k0s(),v.nrm(11,"system-label",12),v.j41(12,"span",13),v.EFF(13),v.k0s()(),v.j41(14,"p",14),v.EFF(15),v.DNE(16,Li,2,0,"abbr",15),v.k0s()()()()()),2&e){const e=v.XpG();v.R7$(2),v.Y8G("ngIf",e.notification.bean_module),v.R7$(2),v.AVh("slds-text-title_bold",1!=e.notification.notification_read),v.R7$(5),v.Y8G("id",e.notification.bean_id)("module",e.notification.bean_module)("system-title",e.notification.bean_name),v.R7$(),v.SpI(" ",e.notification.bean_name," "),v.R7$(2),v.Y8G("id",e.notification.created_by)("system-title",e.notification.created_by_name),v.R7$(),v.SpI(" ",e.notification.created_by_name," "),v.R7$(2),v.SpI(" ",e.notification.notification_date," "),v.R7$(),v.Y8G("ngIf",1!=e.notification.notification_read)}}function Fi(e,t){if(1&e){const e=v.RV6();v.j41(0,"section",19)(1,"div",20)(2,"a",21),v.nrm(3,"system-icon",17),v.j41(4,"div",5)(5,"h2",22)(6,"span",23),v.nrm(7,"system-label",10),v.k0s(),v.j41(8,"span",24),v.EFF(9),v.k0s(),v.nrm(10,"system-label",12),v.j41(11,"span",25),v.EFF(12),v.k0s()(),v.j41(13,"p"),v.EFF(14),v.k0s()()(),v.j41(15,"button",26),v.bIt("click",(function(){v.eBV(e);const t=v.XpG();return v.Njj(t.notificationService.clearTempNotification(t.notification))})),v.nrm(16,"system-button-icon",27),v.k0s()()()}if(2&e){const e=v.XpG();v.R7$(8),v.Y8G("id",e.notification.bean_id)("module",e.notification.bean_module)("system-title",e.notification.bean_name),v.R7$(),v.SpI(" ",e.notification.bean_name," "),v.R7$(2),v.Y8G("id",e.notification.created_by)("system-title",e.notification.created_by_name),v.R7$(),v.SpI(" ",e.notification.created_by_name," "),v.R7$(2),v.SpI(" ",e.notification.notification_date," ")}}let Mi=(()=>{class GlobalHeaderNotificationsItemAssign{constructor(e){this.notificationService=e,this.asBox=!1}static#e=this.ɵfac=function(e){return new(e||GlobalHeaderNotificationsItemAssign)(v.rXU(vi.E))};static#t=this.ɵcmp=v.VBU({type:GlobalHeaderNotificationsItemAssign,selectors:[["global-header-notifications-item-assign"]],inputs:{notification:"notification",asBox:"asBox"},decls:3,vars:2,consts:[["class","slds-media slds-has-flexi-truncate slds-p-around_x-small",4,"ngIf","ngIfElse"],["boxContainer",""],[1,"slds-media","slds-has-flexi-truncate","slds-p-around_x-small"],[1,"slds-media__figure"],["class","slds-icon_container","style","width:40px;height:40px;",4,"ngIf"],[1,"slds-media__body"],[1,"slds-grid","slds-grid_align-spread"],["href","javascript:void(0);",1,"slds-text-link_reset","slds-has-flexi-truncate"],[1,"slds-truncate"],["system-title","LBL_ASSIGNED",1,"slds-m-right--xx-small"],["label","LBL_ASSIGNED"],["system-model-popover","",1,"slds-m-right--xxx-small",3,"id","module","system-title"],["label","LBL_BY"],["system-model-popover","","module","Users",1,"slds-m-right--xxx-small",3,"id","system-title"],[1,"slds-text-color_weak"],["system-title","LBL_UNREAD","class","slds-text-link slds-m-horizontal_xxx-small slds-text-color_success",4,"ngIf"],[1,"slds-icon_container",2,"width","40px","height","40px"],["icon","individual"],["system-title","LBL_UNREAD",1,"slds-text-link","slds-m-horizontal_xxx-small","slds-text-color_success"],["role","dialog",1,"slds-notification","slds-m-vertical--xxx-small"],[1,"slds-notification__body"],[1,"slds-notification__target","slds-media"],[1,"slds-text-heading_small","slds-m-bottom_xx-small"],["system-title","LBL_ASSIGNED"],["system-model-popover","",1,"slds-m-right--xxx-small",2,"text-decoration","underline",3,"id","module","system-title"],["system-model-popover","","module","Users",1,"slds-m-right--xxx-small",2,"text-decoration","underline",3,"id","system-title"],["system-title","LBL_CLOSE",1,"slds-button","slds-button_icon","slds-button_icon-container","slds-notification__close",3,"click"],["icon","close"]],template:function(e,t){if(1&e&&v.DNE(0,Di,17,12,"div",0)(1,Fi,17,8,"ng-template",null,1,v.C5r),2&e){const e=v.sdS(2);v.Y8G("ngIf",!t.asBox)("ngIfElse",e)}},dependencies:[i.bT,hs.j,x.L,O.t,D.J,j.W],encapsulation:2})}return GlobalHeaderNotificationsItemAssign})();function Ti(e,t){1&e&&(v.j41(0,"span",16),v.nrm(1,"system-icon",17),v.k0s())}function Bi(e,t){1&e&&(v.j41(0,"abbr",18),v.EFF(1,"●"),v.k0s())}function $i(e,t){if(1&e&&(v.j41(0,"div",2)(1,"div",3),v.DNE(2,Ti,2,0,"span",4),v.k0s(),v.j41(3,"div",5)(4,"div",6)(5,"a",7)(6,"h3",8)(7,"span",9),v.nrm(8,"system-label",10),v.k0s(),v.j41(9,"span",11),v.EFF(10),v.k0s(),v.nrm(11,"system-label",12),v.j41(12,"span",13),v.EFF(13),v.k0s()(),v.j41(14,"p",14),v.EFF(15),v.DNE(16,Bi,2,0,"abbr",15),v.k0s()()()()()),2&e){const e=v.XpG();v.R7$(2),v.Y8G("ngIf",e.notification.bean_module),v.R7$(2),v.AVh("slds-text-title_bold",1!=e.notification.notification_read),v.R7$(5),v.Y8G("system-title",e.notification.bean_name),v.R7$(),v.SpI(" ",e.notification.bean_name," "),v.R7$(2),v.Y8G("id",e.notification.created_by)("system-title",e.notification.created_by_name),v.R7$(),v.SpI(" ",e.notification.created_by_name," "),v.R7$(2),v.SpI(" ",e.notification.notification_date," "),v.R7$(),v.Y8G("ngIf",1!=e.notification.notification_read)}}function Oi(e,t){if(1&e){const e=v.RV6();v.j41(0,"section",19)(1,"div",20)(2,"a",21),v.nrm(3,"system-icon",17),v.j41(4,"div",5)(5,"h2",22)(6,"span",23),v.nrm(7,"system-label",24),v.k0s(),v.j41(8,"span",25),v.EFF(9),v.k0s(),v.nrm(10,"system-label",12),v.j41(11,"span",26),v.EFF(12),v.k0s()(),v.j41(13,"p"),v.EFF(14),v.k0s()()(),v.j41(15,"button",27),v.bIt("click",(function(){v.eBV(e);const t=v.XpG();return v.Njj(t.notificationService.clearTempNotification(t.notification))})),v.nrm(16,"system-button-icon",28),v.k0s()()()}if(2&e){const e=v.XpG();v.R7$(8),v.Y8G("id",e.notification.bean_id)("module",e.notification.bean_module)("system-title",e.notification.bean_name),v.R7$(),v.SpI(" ",e.notification.bean_name," "),v.R7$(2),v.Y8G("id",e.notification.created_by)("system-title",e.notification.created_by_name),v.R7$(),v.SpI(" ",e.notification.created_by_name," "),v.R7$(2),v.SpI(" ",e.notification.notification_date," ")}}let Xi=(()=>{class GlobalHeaderNotificationsItemDelete{constructor(e){this.notificationService=e,this.asBox=!1}static#e=this.ɵfac=function(e){return new(e||GlobalHeaderNotificationsItemDelete)(v.rXU(vi.E))};static#t=this.ɵcmp=v.VBU({type:GlobalHeaderNotificationsItemDelete,selectors:[["global-header-notifications-item-delete"]],inputs:{notification:"notification",asBox:"asBox"},decls:3,vars:2,consts:[["class","slds-media slds-has-flexi-truncate slds-p-around_x-small",4,"ngIf","ngIfElse"],["boxContainer",""],[1,"slds-media","slds-has-flexi-truncate","slds-p-around_x-small"],[1,"slds-media__figure"],["class","slds-icon_container","style","width:40px;height:40px;",4,"ngIf"],[1,"slds-media__body"],[1,"slds-grid","slds-grid_align-spread"],["href","javascript:void(0);",1,"slds-text-link_reset","slds-has-flexi-truncate"],[1,"slds-truncate"],["system-title","LBL_DELETED",1,"slds-m-right--xx-small"],["label","LBL_DELETED"],[1,"slds-m-right--xxx-small",3,"system-title"],["label","LBL_BY"],["system-model-popover","","module","Users",1,"slds-m-right--xxx-small",3,"id","system-title"],[1,"slds-text-color_weak"],["system-title","LBL_UNREAD","class","slds-text-link slds-m-horizontal_xxx-small slds-text-color_success",4,"ngIf"],[1,"slds-icon_container",2,"width","40px","height","40px"],["icon","record_delete"],["system-title","LBL_UNREAD",1,"slds-text-link","slds-m-horizontal_xxx-small","slds-text-color_success"],["role","dialog",1,"slds-notification","slds-m-vertical--xxx-small"],[1,"slds-notification__body"],[1,"slds-notification__target","slds-media"],[1,"slds-text-heading_small","slds-m-bottom_xx-small"],["system-title","LBL_ASSIGNED"],["label","LBL_ASSIGNED"],["system-model-popover","",1,"slds-m-right--xxx-small",2,"text-decoration","underline",3,"id","module","system-title"],["system-model-popover","","module","Users",1,"slds-m-right--xxx-small",2,"text-decoration","underline",3,"id","system-title"],["system-title","LBL_CLOSE",1,"slds-button","slds-button_icon","slds-button_icon-container","slds-notification__close",3,"click"],["icon","close"]],template:function(e,t){if(1&e&&v.DNE(0,$i,17,10,"div",0)(1,Oi,17,8,"ng-template",null,1,v.C5r),2&e){const e=v.sdS(2);v.Y8G("ngIf",!t.asBox)("ngIfElse",e)}},dependencies:[i.bT,hs.j,x.L,O.t,D.J,j.W],encapsulation:2})}return GlobalHeaderNotificationsItemDelete})();function Ui(e,t){if(1&e&&v.nrm(0,"system-icon",12),2&e){const e=v.XpG();v.Y8G("module",e.notification.bean_module)}}let Yi=(()=>{class GlobalHeaderNotificationsItemReminder{constructor(e){this.notificationService=e,this.asBox=!1}static#e=this.ɵfac=function(e){return new(e||GlobalHeaderNotificationsItemReminder)(v.rXU(vi.E))};static#t=this.ɵcmp=v.VBU({type:GlobalHeaderNotificationsItemReminder,selectors:[["global-header-notifications-item-reminder"]],inputs:{notification:"notification",asBox:"asBox"},decls:14,vars:6,consts:[["role","dialog",1,"slds-notification","slds-m-vertical--xxx-small"],[1,"slds-notification__body"],[1,"slds-notification__target","slds-media"],[3,"module",4,"ngIf"],[1,"slds-media__body"],[1,"slds-text-color_weak","slds-text-body_small"],["icon","custom25","sprite","custom"],[1,"slds-truncate"],["system-model-popover","",1,"slds-m-right--xxx-small",3,"id","module","system-title"],[3,"date"],["system-title","LBL_CLOSE",1,"slds-button","slds-button_icon","slds-button_icon-container","slds-notification__close",3,"click"],["icon","close"],[3,"module"]],template:function(e,t){1&e&&(v.j41(0,"section",0)(1,"div",1)(2,"a",2),v.DNE(3,Ui,1,1,"system-icon",3),v.j41(4,"div",4)(5,"div",5),v.nrm(6,"system-icon",6),v.k0s(),v.j41(7,"h3",7)(8,"span",8),v.EFF(9),v.k0s()(),v.j41(10,"p",5),v.nrm(11,"system-display-datetime",9),v.k0s()()(),v.j41(12,"button",10),v.bIt("click",(function(){return t.notificationService.clearTempNotification(t.notification)})),v.nrm(13,"system-button-icon",11),v.k0s()()()),2&e&&(v.R7$(3),v.Y8G("ngIf",t.notification.bean_module),v.R7$(5),v.Y8G("id",t.notification.bean_id)("module",t.notification.bean_module)("system-title",t.notification.bean_name),v.R7$(),v.SpI(" ",t.notification.bean_name," "),v.R7$(2),v.Y8G("date",t.notification.notification_date))},dependencies:[i.bT,hs.j,x.L,O.t,ps.f,D.J],encapsulation:2})}return GlobalHeaderNotificationsItemReminder})();var Ni=s(73455),Vi=s(70335);function Ai(e,t){if(1&e&&(v.j41(0,"div",7),v.EFF(1),v.k0s()),2&e){const e=v.XpG();v.R7$(),v.SpI(" ",e.notificationService.unreadCount," ")}}function Pi(e,t){if(1&e){const e=v.RV6();v.j41(0,"a",20),v.bIt("click",(function(){v.eBV(e);const t=v.XpG(2);return v.Njj(t.markAllAsRead())})),v.nrm(1,"system-label",21),v.k0s()}}function zi(e,t){1&e&&(v.j41(0,"div",32),v.nrm(1,"system-label",33),v.k0s())}function Hi(e,t){if(1&e&&v.nrm(0,"global-header-notifications-item-assign",41),2&e){const e=v.XpG(2).$implicit;v.Y8G("notification",e)}}function qi(e,t){if(1&e&&v.nrm(0,"global-header-notifications-item-change",41),2&e){const e=v.XpG(2).$implicit;v.Y8G("notification",e)}}function Ji(e,t){if(1&e&&v.nrm(0,"global-header-notifications-item-delete",41),2&e){const e=v.XpG(2).$implicit;v.Y8G("notification",e)}}function Wi(e,t){if(1&e&&v.nrm(0,"global-header-notifications-item-generic",41),2&e){const e=v.XpG(2).$implicit;v.Y8G("notification",e)}}function Ki(e,t){if(1&e){const e=v.RV6();v.j41(0,"li",35),v.DNE(1,Hi,1,1,"global-header-notifications-item-assign",36)(2,qi,1,1,"global-header-notifications-item-change",36)(3,Ji,1,1,"global-header-notifications-item-delete",36)(4,Wi,1,1,"global-header-notifications-item-generic",37),v.j41(5,"div",38),v.bIt("click",(function(t){v.eBV(e);const s=v.XpG().$implicit;return v.XpG(3).markAsRead(s.id),v.Njj(t.stopPropagation())})),v.j41(6,"button",39),v.nrm(7,"system-button-icon",40),v.k0s()()()}if(2&e){const e=v.XpG().$implicit;v.Y8G("ngSwitch",e.notification_type),v.R7$(),v.Y8G("ngSwitchCase","assign"),v.R7$(),v.Y8G("ngSwitchCase","change"),v.R7$(),v.Y8G("ngSwitchCase","delete")}}function Qi(e,t){if(1&e&&(v.qex(0),v.DNE(1,Ki,8,4,"li",34),v.bVm()),2&e){const e=t.$implicit;v.R7$(),v.Y8G("ngIf","reminder"!=e.notification_type)}}function Zi(e,t){1&e&&(v.j41(0,"div",42),v.nrm(1,"system-spinner"),v.k0s())}function en(e,t){if(1&e){const e=v.RV6();v.j41(0,"li",29)(1,"a",20),v.bIt("click",(function(){v.eBV(e);const t=v.XpG(3);return v.Njj(t.manageSubscriptions())})),v.nrm(2,"system-label",43),v.k0s()()}}function tn(e,t){if(1&e){const e=v.RV6();v.j41(0,"div",22),v.DNE(1,zi,2,0,"div",23),v.j41(2,"ul",24),v.DNE(3,Qi,2,1,"ng-container",25),v.k0s(),v.DNE(4,Zi,2,0,"div",26),v.j41(5,"div",27)(6,"ul",28)(7,"li",29)(8,"a",20),v.bIt("click",(function(){v.eBV(e);const t=v.XpG(2);return v.Njj(t.showAllNotifications())})),v.nrm(9,"system-label",30),v.k0s()(),v.DNE(10,en,3,0,"li",31),v.k0s()()()}if(2&e){const e=v.XpG(2);v.R7$(),v.Y8G("ngIf",0===(null==e.notificationService.unreadNotifications?null:e.notificationService.unreadNotifications.length)),v.R7$(2),v.Y8G("ngForOf",e.notificationService.unreadNotifications),v.R7$(),v.Y8G("ngIf",e.notificationService.isLoading),v.R7$(6),v.Y8G("ngIf",e.hasSubscriptions)}}function sn(e,t){if(1&e){const e=v.RV6();v.j41(0,"system-checkbox-toggle",47),v.bIt("ngModelChange",(function(t){v.eBV(e);const s=v.XpG(3);return v.Njj(s.setDisplayDesktopNotification(t))})),v.k0s()}if(2&e){const e=v.XpG(3);v.Y8G("ngModel",e.userPreferences.toUse.displayDesktopNotifications)}}function nn(e,t){1&e&&(v.j41(0,"div",48)(1,"span",49),v.nrm(2,"system-label",50),v.k0s(),v.j41(3,"span",51),v.nrm(4,"system-label",52),v.k0s()())}function ln(e,t){if(1&e){const e=v.RV6();v.j41(0,"div",32)(1,"system-checkbox-toggle",44),v.bIt("ngModelChange",(function(t){v.eBV(e);const s=v.XpG(2);return v.Njj(s.setSetting("showRealtimeNotifications",t))})),v.k0s(),v.DNE(2,sn,1,1,"system-checkbox-toggle",45)(3,nn,5,0,"ng-template",null,46,v.C5r),v.k0s()}if(2&e){const e=v.sdS(4),t=v.XpG(2);v.R7$(),v.Y8G("ngModel",t.userPreferences.toUse.showRealtimeNotifications),v.R7$(),v.Y8G("ngIf","denied"!==t.desktopNotificationsStatus&&!t.desktopNotificationsDisabled)("ngIfElse",e)}}function on(e,t){if(1&e){const e=v.RV6();v.j41(0,"section",8)(1,"div",9)(2,"header",10)(3,"h2",11),v.nrm(4,"system-label",12),v.k0s(),v.DNE(5,Pi,2,0,"a",13),v.k0s(),v.j41(6,"button",14),v.bIt("click",(function(){v.eBV(e);const t=v.XpG();return v.Njj(t.toggleShowSettings())})),v.nrm(7,"system-button-icon",15),v.k0s(),v.j41(8,"button",16),v.bIt("click",(function(){v.eBV(e);const t=v.XpG();return v.Njj(t.closePopover())})),v.nrm(9,"system-button-icon",17),v.k0s()(),v.DNE(10,tn,11,4,"div",18)(11,ln,5,3,"ng-template",null,19,v.C5r),v.k0s()}if(2&e){const e=v.sdS(12),t=v.XpG();v.Y8G("ngStyle",t.popoverStyle),v.R7$(5),v.Y8G("ngIf",t.notificationService.unreadNotifications.length>0),v.R7$(2),v.Y8G("addclasses",t.showSettings?"slds-text-color--error":""),v.R7$(3),v.Y8G("ngIf",!t.showSettings)("ngIfElse",e)}}function an(e,t){if(1&e&&v.nrm(0,"global-header-notifications-item-assign",56),2&e){const e=v.XpG().$implicit;v.Y8G("asBox",!0)("notification",e)}}function rn(e,t){if(1&e&&v.nrm(0,"global-header-notifications-item-change",56),2&e){const e=v.XpG().$implicit;v.Y8G("asBox",!0)("notification",e)}}function dn(e,t){if(1&e&&v.nrm(0,"global-header-notifications-item-delete",56),2&e){const e=v.XpG().$implicit;v.Y8G("asBox",!0)("notification",e)}}function cn(e,t){if(1&e&&v.nrm(0,"global-header-notifications-item-reminder",56),2&e){const e=v.XpG().$implicit;v.Y8G("asBox",!0)("notification",e)}}function un(e,t){if(1&e&&v.nrm(0,"global-header-notifications-item-generic",56),2&e){const e=v.XpG().$implicit;v.Y8G("asBox",!0)("notification",e)}}function mn(e,t){if(1&e&&(v.qex(0,53),v.DNE(1,an,1,2,"global-header-notifications-item-assign",54)(2,rn,1,2,"global-header-notifications-item-change",54)(3,dn,1,2,"global-header-notifications-item-delete",54)(4,cn,1,2,"global-header-notifications-item-reminder",54)(5,un,1,2,"global-header-notifications-item-generic",55),v.bVm()),2&e){const e=t.$implicit;v.Y8G("ngSwitch",e.notification_type),v.R7$(),v.Y8G("ngSwitchCase","assign"),v.R7$(),v.Y8G("ngSwitchCase","change"),v.R7$(),v.Y8G("ngSwitchCase","delete"),v.R7$(),v.Y8G("ngSwitchCase","reminder")}}const hn=e=>({"slds-p-right--x-small":e});let gn=(()=>{class GlobalHeaderNotifications{constructor(e,t,s,i,n,l,o,a){this.notificationService=e,this.elementRef=t,this.modal=s,this.subscription=i,this.userPreferences=n,this.cdRef=l,this.router=o,this.renderer=a,this.isOpen=!1,this.showSettings=!1,this.right=0}ngOnInit(){this.notificationService.reloadNotifications()}get desktopNotificationsDisabled(){return!("Notification"in window)}get desktopNotificationsStatus(){return Notification.permission}markAsRead(e){this.notificationService.markAsRead(e)}markAllAsRead(){this.notificationService.markAllAsRead()}toggleOpenPopover(){let e=this.elementRef.nativeElement.getBoundingClientRect();this.right=window.innerWidth-e.right+(e.left-e.right)/2-3,this.isOpen=!this.isOpen,this.isOpen?(this.showSettings=!1,this.clickListener=this.renderer.listen("document","click",(e=>{this.elementRef.nativeElement.contains(e.target)||(this.isOpen=!1,this.clickListener())}))):this.clickListener&&this.clickListener()}get popoverStyle(){return{right:this.right+"px"}}closePopover(){this.isOpen=!1,this.clickListener&&this.clickListener()}toggleShowSettings(){this.showSettings=!this.showSettings}setSetting(e,t){this.userPreferences.setPreference(e,t)}setDisplayDesktopNotification(e){"default"===this.desktopNotificationsStatus?Notification.requestPermission().then((t=>{"granted"==t&&this.setSetting("displayDesktopNotifications",e),this.cdRef.detectChanges()})):this.setSetting("displayDesktopNotifications",e)}showAllNotifications(){this.closePopover(),this.router.navigate(["notifications"])}get hasSubscriptions(){return this.subscription.subscriptions.length>0}manageSubscriptions(){this.closePopover(),this.modal.openModal("GlobalSubscriptionsManager")}static#e=this.ɵfac=function(e){return new(e||GlobalHeaderNotifications)(v.rXU(vi.E),v.rXU(v.aKT),v.rXU($.y),v.rXU(Ni.g),v.rXU(Tt.S),v.rXU(v.gRc),v.rXU(B.Ix),v.rXU(v.sFG))};static#t=this.ɵcmp=v.VBU({type:GlobalHeaderNotifications,selectors:[["global-header-notifications"]],decls:7,vars:8,consts:[[1,"slds-dropdown-trigger","slds-dropdown-trigger_click","slds-m-right--xx-small",2,"cursor","pointer",3,"ngClass"],["system-title","LBL_NOTIFICATIONS",1,"slds-global-actions__notifications","slds-global-actions__item-action","slds-incoming-notification",3,"click"],["icon","notification","size","x-small"],["style","top:-5px; right:0px;","class","slds-notification-badge slds-incoming-notification slds-show-notification",4,"ngIf"],["class","slds-popover slds-popover_large slds-nubbin_top-right slds-is-absolute slds-grid slds-grid--vertical","role","dialog","style","top: 48px; max-height: calc(100vh - 55px);",3,"ngStyle",4,"ngIf"],[1,"slds-notification-container"],[3,"ngSwitch",4,"ngFor","ngForOf"],[1,"slds-notification-badge","slds-incoming-notification","slds-show-notification",2,"top","-5px","right","0px"],["role","dialog",1,"slds-popover","slds-popover_large","slds-nubbin_top-right","slds-is-absolute","slds-grid","slds-grid--vertical",2,"top","48px","max-height","calc(100vh - 55px)",3,"ngStyle"],[1,"slds-grid","slds-border--bottom"],[1,"slds-popover__header","slds-grow","slds-grid","slds-grid--align-spread",2,"border-bottom","0"],[1,"slds-text-heading_small"],["label","LBL_UNREAD_NOTIFICATIONS"],["class","slds-text-link",3,"click",4,"ngIf"],["system-title","LBL_SETTINGS",1,"slds-button","slds-button--icon","slds-float_right","slds-popover__close",3,"click"],["icon","settings",3,"addclasses"],["system-title","LBL_CLOSE",1,"slds-button","slds-button--icon","slds-float_right","slds-m-right--x-small",3,"click"],["icon","close"],["class","slds-popover__body slds-p-around_none slds-grow slds-grid slds-grid--vertical","style","min-height: 0",4,"ngIf","ngIfElse"],["showSettingsContainer",""],[1,"slds-text-link",3,"click"],["label","LBL_MARK_ALL_READ"],[1,"slds-popover__body","slds-p-around_none","slds-grow","slds-grid","slds-grid--vertical",2,"min-height","0"],["class","slds-p-around--small",4,"ngIf"],[1,"slds-scrollable--y","slds-grow",2,"min-height","0"],[4,"ngFor","ngForOf"],["class","slds-align--absolute-center slds-p-around--small",4,"ngIf"],[1,"slds-has-divider--top","slds-p-around--x-small","slds-size--1-of-1","slds-align--absolute-center"],[1,"slds-list_horizontal","slds-has-dividers_right","slds-has-block-links"],[1,"slds-item"],["label","LBL_SHOW_ALL"],["class","slds-item",4,"ngIf"],[1,"slds-p-around--small"],["label","LBL_NO_ENTRIES"],["class","slds-global-header__notification spice-hover-display-children slds-is-relative",3,"ngSwitch",4,"ngIf"],[1,"slds-global-header__notification","spice-hover-display-children","slds-is-relative",3,"ngSwitch"],[3,"notification",4,"ngSwitchCase"],[3,"notification",4,"ngSwitchDefault"],[1,"slds-is-absolute","slds-height_full","spice-hover-child","slds-grid","slds-grid--vertical-align-center","slds-p-right--x-small",2,"right","0","top","0",3,"click"],["system-title","LBL_MARK_AS_READ",1,"slds-theme--default","slds-button","slds-button_icon","slds-button_icon-small","slds-float_right","slds-popover__close","slds-button--icon-border"],["icon","check","size","small"],[3,"notification"],[1,"slds-align--absolute-center","slds-p-around--small"],["label","LBL_MANAGE_MODEL_SUBSCRIPTIONS"],["label","LBL_REALTIME_NOTIFICATIONS",1,"slds-m-bottom--xx-small","spice-display-block",3,"ngModel","ngModelChange"],["label","LBL_DESKTOP_NOTIFICATIONS","class","slds-m-bottom--xx-small spice-display-block",3,"ngModel","ngModelChange",4,"ngIf","ngIfElse"],["desktopNotificationDeniedContainer",""],["label","LBL_DESKTOP_NOTIFICATIONS",1,"slds-m-bottom--xx-small","spice-display-block",3,"ngModel","ngModelChange"],[1,"slds-grid","slds-grid--align-spread"],[1,"slds-grow","slds-text-body--small"],["label","LBL_DESKTOP_NOTIFICATIONS"],[1,"slds-text-color_error"],["label","LBL_DENIED"],[3,"ngSwitch"],[3,"asBox","notification",4,"ngSwitchCase"],[3,"asBox","notification",4,"ngSwitchDefault"],[3,"asBox","notification"]],template:function(e,t){1&e&&(v.j41(0,"div",0)(1,"div",1),v.bIt("click",(function(){return t.toggleOpenPopover()})),v.nrm(2,"system-utility-icon",2),v.k0s(),v.DNE(3,Ai,2,1,"div",3),v.k0s(),v.DNE(4,on,13,5,"section",4),v.j41(5,"div",5),v.DNE(6,mn,6,5,"ng-container",6),v.k0s()),2&e&&(v.Y8G("ngClass",v.eq3(6,hn,t.notificationService.unreadCount>0)),v.R7$(3),v.Y8G("ngIf",t.notificationService.unreadCount>0),v.R7$(),v.Y8G("ngIf",t.isOpen),v.R7$(),v.AVh("slds-hidden",0===t.notificationService.newNotifications.length),v.R7$(),v.Y8G("ngForOf",t.notificationService.newNotifications))},dependencies:[i.YU,i.Sq,i.bT,i.B3,i.ux,i.e1,i.fG,n.BC,n.vS,x.L,O.t,Vi.x,j.W,K.P,G.B,xi,Yi,Si,Mi,Xi],encapsulation:2})}return GlobalHeaderNotifications})();var pn=s(80256),fn=s(69139);function bn(e,t){if(1&e){const e=v.RV6();v.j41(0,"system-checkbox-toggle",39),v.bIt("ngModelChange",(function(t){v.eBV(e);const s=v.XpG();return v.Njj(s.setDisplayDesktopNotification(t))})),v.k0s()}if(2&e){const e=v.XpG();v.Y8G("ngModel",e.userPreferences.toUse.displayDesktopNotifications)}}function yn(e,t){1&e&&(v.j41(0,"div",40)(1,"span",41),v.nrm(2,"system-label",42),v.k0s(),v.j41(3,"span",43),v.nrm(4,"system-label",44),v.k0s()())}function vn(e,t){1&e&&(v.j41(0,"div",20),v.nrm(1,"system-label",45),v.k0s())}function _n(e,t){1&e&&v.nrm(0,"system-icon",68)}function kn(e,t){1&e&&v.nrm(0,"system-icon",69)}function Rn(e,t){1&e&&v.nrm(0,"system-icon",70)}function In(e,t){1&e&&v.nrm(0,"system-icon",71)}function xn(e,t){1&e&&v.nrm(0,"system-icon",72)}function jn(e,t){1&e&&v.nrm(0,"system-label",73)}function Gn(e,t){1&e&&v.nrm(0,"system-label",74)}function Cn(e,t){1&e&&v.nrm(0,"system-label",75)}function wn(e,t){1&e&&v.nrm(0,"system-label",76)}function Sn(e,t){1&e&&v.nrm(0,"system-label",77)}function En(e,t){if(1&e){const e=v.RV6();v.j41(0,"tr",46)(1,"td",47)(2,"div",48),v.DNE(3,_n,1,0,"system-icon",49)(4,kn,1,0,"system-icon",50)(5,Rn,1,0,"system-icon",51)(6,In,1,0,"system-icon",52)(7,xn,1,0,"system-icon",53),v.k0s()(),v.j41(8,"td")(9,"div",54),v.DNE(10,jn,1,0,"system-label",55)(11,Gn,1,0,"system-label",56)(12,Cn,1,0,"system-label",57)(13,wn,1,0,"system-label",58)(14,Sn,1,0,"system-label",59),v.k0s()(),v.j41(15,"td",60)(16,"div",61),v.nrm(17,"system-label-modulename",62),v.k0s()(),v.j41(18,"td",60)(19,"div",61),v.EFF(20),v.k0s()(),v.j41(21,"td",63)(22,"div",61),v.EFF(23),v.k0s()(),v.j41(24,"td",64)(25,"div",61),v.EFF(26),v.k0s()(),v.j41(27,"td",65)(28,"button",66),v.bIt("click",(function(){const t=v.eBV(e).$implicit,s=v.XpG();return v.Njj(s.markAsRead(t.id))})),v.nrm(29,"system-button-icon",67),v.k0s()()()}if(2&e){const e=t.$implicit;v.AVh("slds-text-title_bold",1!=e.notification_read),v.R7$(2),v.Y8G("ngSwitch",e.notification_type),v.R7$(),v.Y8G("ngSwitchCase","assign"),v.R7$(),v.Y8G("ngSwitchCase","change"),v.R7$(),v.Y8G("ngSwitchCase","delete"),v.R7$(),v.Y8G("ngSwitchCase","reminder"),v.R7$(3),v.Y8G("ngSwitch",e.notification_type),v.R7$(),v.Y8G("ngSwitchCase","assign"),v.R7$(),v.Y8G("ngSwitchCase","change"),v.R7$(),v.Y8G("ngSwitchCase","delete"),v.R7$(),v.Y8G("ngSwitchCase","reminder"),v.R7$(2),v.Y8G("id",e.bean_id)("module",e.bean_module)("system-title",e.bean_module),v.R7$(2),v.Y8G("module",e.bean_module),v.R7$(),v.Y8G("id",e.bean_id)("module",e.bean_module)("system-title",e.bean_name),v.R7$(2),v.SpI(" ",e.bean_name," "),v.R7$(),v.Y8G("id",e.created_by_name)("system-title",e.created_by_name),v.R7$(2),v.SpI(" ",e.created_by_name," "),v.R7$(),v.Y8G("system-title",e.notification_date),v.R7$(2),v.SpI(" ",e.notification_date," "),v.R7$(2),v.Y8G("disabled",1==e.notification_read)}}function Ln(e,t){1&e&&(v.j41(0,"div",78),v.nrm(1,"system-spinner"),v.k0s())}let Dn=(()=>{class GlobalNotificationsListView{constructor(e,t,s,i,n){this.notificationService=e,this.navigationTab=t,this.language=s,this.cdRef=i,this.userPreferences=n,this.setTabInfo()}get desktopNotificationsDisabled(){return!("Notification"in window)}get desktopNotificationsStatus(){return Notification.permission}setTabInfo(){this.navigationTab.setTabInfo({displayname:this.language.getLabel("LBL_NOTIFICATIONS"),displayicon:"notification"})}reload(){this.notificationService.reloadNotifications()}markAsRead(e){this.notificationService.markAsRead(e)}markAllAsRead(){this.notificationService.markAllAsRead()}onScroll(e){e.scrollTop+e.clientHeight+50>e.scrollHeight&&this.notificationService.loadMoreNotifications()}setSetting(e,t){this.userPreferences.setPreference(e,t)}setDisplayDesktopNotification(e){"default"===this.desktopNotificationsStatus?Notification.requestPermission().then((t=>{"granted"==t&&this.setSetting("displayDesktopNotifications",e),this.cdRef.detectChanges()})):this.setSetting("displayDesktopNotifications",e)}static#e=this.ɵfac=function(e){return new(e||GlobalNotificationsListView)(v.rXU(vi.E),v.rXU(ms._),v.rXU(I.B),v.rXU(v.gRc),v.rXU(Tt.S))};static#t=this.ɵcmp=v.VBU({type:GlobalNotificationsListView,selectors:[["global-notifications-list-view"]],decls:54,vars:8,consts:[["system-to-bottom-noscroll","",1,"slds-grid","slds-grid--vertical"],[1,"slds-grid","slds-border--bottom","slds-p-around--medium"],[1,"slds-grow","slds-grid","slds-grid--align-spread",2,"border-bottom","0"],[1,"slds-page-header__title"],["icon","notification","size","x-small"],["label","LBL_NOTIFICATIONS"],[1,"slds-text-body--small","slds-m-left--large"],["label","LBL_OF"],["label","LBL_ITEMS"],[1,"slds-grid","slds-grid--vertical-align-center"],[1,"slds-text-link",3,"click"],["label","LBL_MARK_ALL_READ"],["system-title","LBL_RELOAD",1,"slds-button","slds-button--icon","slds-m-left--xx-small","slds-button--icon-border-filled",3,"click"],["icon","refresh"],["system-dropdown-trigger","","role","combobox",1,"slds-dropdown-trigger","slds-dropdown-trigger_click"],["system-title","LBL_SETTINGS",1,"slds-button","slds-button--icon","slds-m-left--xx-small","slds-button--icon-border-filled"],["icon","settings"],[1,"slds-dropdown","slds-dropdown_x-small","slds-dropdown_left",3,"click"],[1,"slds-has-divider--bottom-space","slds-p-horizontal--small","slds-p-top--xx-small","slds-text-title--caps"],["label","LBL_SETTINGS"],[1,"slds-p-around--small"],["label","LBL_REALTIME_NOTIFICATIONS",1,"slds-m-bottom--xx-small","spice-display-block",3,"ngModel","ngModelChange"],["label","LBL_DESKTOP_NOTIFICATIONS","class","slds-m-bottom--xx-small spice-display-block",3,"ngModel","ngModelChange",4,"ngIf","ngIfElse"],["desktopNotificationDeniedContainer",""],[1,"slds-scrollable--y","slds-theme--default","slds-height_full",3,"scroll"],["scrollContainer",""],["class","slds-p-around--small",4,"ngIf"],[1,"slds-table","slds-table_bordered","slds-max-medium-table_stacked-horizontal","slds-table--header-fixed"],[1,"slds-text-title--caps"],["scope","col",1,"slds-cell-shrink"],["scope","col"],[1,"slds-truncate","slds-p-around--x-small"],["label","LBL_TYPE"],["label","LBL_MODULE"],["label","LBL_RECORD"],["label","LBL_CREATED_BY"],["label","LBL_DATE"],["class","spice-hover-display-children",3,"slds-text-title_bold",4,"ngFor","ngForOf"],["class","slds-align--absolute-center slds-p-around--small slds-height_full",4,"ngIf"],["label","LBL_DESKTOP_NOTIFICATIONS",1,"slds-m-bottom--xx-small","spice-display-block",3,"ngModel","ngModelChange"],[1,"slds-grid","slds-grid--align-spread"],[1,"slds-grow","slds-text-body--small"],["label","LBL_DESKTOP_NOTIFICATIONS"],[1,"slds-text-color_error"],["label","LBL_DENIED"],["label","LBL_NO_ENTRIES"],[1,"spice-hover-display-children"],[1,"slds-cell-shrink"],[3,"ngSwitch"],["icon","individual",4,"ngSwitchCase"],["icon","custom18","sprite","custom",4,"ngSwitchCase"],["icon","record_delete",4,"ngSwitchCase"],["icon","custom25","sprite","custom",4,"ngSwitchCase"],["icon","all",4,"ngSwitchDefault"],[1,"slds-truncate",3,"ngSwitch"],["label","LBL_ASSIGNMENT",4,"ngSwitchCase"],["label","LBL_CHANGE",4,"ngSwitchCase"],["label","LBL_DELETION",4,"ngSwitchCase"],["label","LBL_REMINDER",4,"ngSwitchCase"],["label","LBL_NOT_SET",4,"ngSwitchDefault"],["system-model-popover","",3,"id","module","system-title"],[1,"slds-truncate"],[3,"module"],["system-model-popover","","module","Users",3,"id","system-title"],[3,"system-title"],["system-title","LBL_MARK_AS_READ",1,"slds-cell-shrink"],[1,"slds-button","slds-button_icon","slds-button--icon-border","spice-hover-child",3,"disabled","click"],["icon","check","size","small"],["icon","individual"],["icon","custom18","sprite","custom"],["icon","record_delete"],["icon","custom25","sprite","custom"],["icon","all"],["label","LBL_ASSIGNMENT"],["label","LBL_CHANGE"],["label","LBL_DELETION"],["label","LBL_REMINDER"],["label","LBL_NOT_SET"],[1,"slds-align--absolute-center","slds-p-around--small","slds-height_full"]],template:function(e,t){if(1&e){const e=v.RV6();v.j41(0,"div",0)(1,"div",1)(2,"header",2)(3,"div")(4,"h2",3),v.nrm(5,"system-utility-icon",4)(6,"system-label",5),v.k0s(),v.j41(7,"p",6),v.EFF(8),v.nrm(9,"system-label",7),v.EFF(10),v.nrm(11,"system-label",8),v.k0s()(),v.j41(12,"div",9)(13,"a",10),v.bIt("click",(function(){return t.markAllAsRead()})),v.nrm(14,"system-label",11),v.k0s(),v.j41(15,"button",12),v.bIt("click",(function(){return t.reload()})),v.nrm(16,"system-button-icon",13),v.k0s(),v.j41(17,"div",14)(18,"button",15),v.nrm(19,"system-button-icon",16),v.k0s(),v.j41(20,"div",17),v.bIt("click",(function(e){return e.stopPropagation()})),v.j41(21,"div",18),v.nrm(22,"system-label",19),v.k0s(),v.j41(23,"div",20)(24,"system-checkbox-toggle",21),v.bIt("ngModelChange",(function(e){return t.setSetting("showRealtimeNotifications",e)})),v.k0s(),v.DNE(25,bn,1,1,"system-checkbox-toggle",22)(26,yn,5,0,"ng-template",null,23,v.C5r),v.k0s()()()()()(),v.j41(28,"div",24,25),v.bIt("scroll",(function(){v.eBV(e);const s=v.sdS(29);return v.Njj(t.onScroll(s))})),v.DNE(30,vn,2,0,"div",26),v.j41(31,"table",27)(32,"thead")(33,"tr",28),v.nrm(34,"th",29),v.j41(35,"th",30)(36,"div",31),v.nrm(37,"system-label",32),v.k0s()(),v.j41(38,"th",30)(39,"div",31),v.nrm(40,"system-label",33),v.k0s()(),v.j41(41,"th",30)(42,"div",31),v.nrm(43,"system-label",34),v.k0s()(),v.j41(44,"th",30)(45,"div",31),v.nrm(46,"system-label",35),v.k0s()(),v.j41(47,"th",30)(48,"div",31),v.nrm(49,"system-label",36),v.k0s()(),v.nrm(50,"th",29),v.k0s()(),v.j41(51,"tbody"),v.DNE(52,En,30,26,"tr",37),v.k0s()(),v.DNE(53,Ln,2,0,"div",38),v.k0s()()}if(2&e){const e=v.sdS(27);v.R7$(8),v.SpI(" ",t.notificationService.notifications.length," "),v.R7$(2),v.SpI(" ",t.notificationService.totalCount," "),v.R7$(14),v.Y8G("ngModel",t.userPreferences.toUse.showRealtimeNotifications),v.R7$(),v.Y8G("ngIf","denied"!==t.desktopNotificationsStatus&&!t.desktopNotificationsDisabled)("ngIfElse",e),v.R7$(5),v.Y8G("ngIf",0===(null==t.notificationService.notifications?null:t.notificationService.notifications.length)&&!t.notificationService.isLoading),v.R7$(22),v.Y8G("ngForOf",t.notificationService.notifications),v.R7$(),v.Y8G("ngIf",t.notificationService.isLoading)}},dependencies:[i.Sq,i.bT,i.ux,i.e1,i.fG,n.BC,n.vS,hs.j,pn.q,fn.p,x.L,O.t,Vi.x,D.J,j.W,qe.r,K.P,G.B],encapsulation:2})}return GlobalNotificationsListView})();function Fn(e,t){if(1&e&&(v.j41(0,"div",1)(1,"div"),v.EFF(2),v.k0s(),v.j41(3,"div",2)(4,"div",3),v.EFF(5),v.k0s(),v.j41(6,"div",3),v.EFF(7),v.k0s(),v.j41(8,"div",3),v.EFF(9),v.k0s(),v.j41(10,"div"),v.EFF(11),v.k0s()()()),2&e){const e=v.XpG();v.R7$(2),v.JRh(e.event),v.R7$(3),v.SpI("",e.timeleft.daysToDday,"d"),v.R7$(2),v.SpI("",e.timeleft.hoursToDday,"h"),v.R7$(2),v.SpI("",e.timeleft.minutesToDday,"m"),v.R7$(2),v.SpI("",e.timeleft.secondsToDday,"s")}}let Mn=(()=>{class GlobalCountdown{constructor(e,t){this.zone=e,this.cdref=t,this.visible=!1}ngOnInit(){let e=new moment(this.targetdate);this.visible=moment().isBefore(e),this.visible&&this.zone.runOutsideAngular((()=>{this.timer=setInterval((()=>{this.update()}),1e3)}))}update(){this.timeleft=this.calcDateDiff(),this.cdref.detectChanges()}calcDateDiff(){let e=new moment(this.targetdate),t=moment.duration(e.diff(new moment));return{secondsToDday:t.get("seconds").toString().padStart(2,"0"),minutesToDday:t.get("minutes").toString().padStart(2,"0"),hoursToDday:t.get("hours").toString().padStart(2,"0"),daysToDday:Math.floor(t.as("days")).toString()}}static#e=this.ɵfac=function(e){return new(e||GlobalCountdown)(v.rXU(v.SKi),v.rXU(v.gRc))};static#t=this.ɵcmp=v.VBU({type:GlobalCountdown,selectors:[["global-countdown"]],inputs:{event:"event",targetdate:"targetdate"},decls:1,vars:1,consts:[["class","slds-grid--vertical slds-text-body--small slds-p-horizontal--small slds-m-left--small slds-border--left",4,"ngIf"],[1,"slds-grid--vertical","slds-text-body--small","slds-p-horizontal--small","slds-m-left--small","slds-border--left"],[1,"slds-grid"],[1,"slds-p-right--xxx-small"]],template:function(e,t){1&e&&v.DNE(0,Fn,12,5,"div",0),2&e&&v.Y8G("ngIf",t.timeleft&&t.visible)},dependencies:[i.bT],encapsulation:2,changeDetection:0})}return GlobalCountdown})();var Tn=s(18396);function Bn(e,t){1&e&&(v.j41(0,"div",17),v.nrm(1,"system-label",18),v.k0s())}const $n=(e,t,s)=>({module:e,id:t,data:s});function On(e,t){if(1&e){const e=v.RV6();v.j41(0,"li",19)(1,"div",20),v.nrm(2,"system-icon",21),v.j41(3,"div",22),v.bIt("clicked",(function(){v.eBV(e);const t=v.XpG(3);return v.Njj(t.closePopover())})),v.EFF(4),v.k0s(),v.nrm(5,"system-display-datetime",23),v.j41(6,"button",24),v.bIt("click",(function(){const t=v.eBV(e).$implicit,s=v.XpG(3);return v.Njj(s.deleteReminder(t))})),v.nrm(7,"system-button-icon",25),v.k0s()()()}if(2&e){const e=t.$implicit;v.R7$(),v.Y8G("system-model-provider",v.sMw(5,$n,e.module_name,e.item_id,e.data)),v.R7$(),v.Y8G("module",e.module_name),v.R7$(2),v.JRh(e.data.summary_text),v.R7$(),v.Y8G("date",e.reminder_date)("displayTime",!1)}}function Xn(e,t){if(1&e){const e=v.RV6();v.j41(0,"section",6)(1,"div",7)(2,"header",8)(3,"h2",9),v.nrm(4,"system-label",10),v.k0s()(),v.j41(5,"button",11),v.bIt("click",(function(){v.eBV(e);const t=v.XpG(2);return v.Njj(t.closePopover())})),v.nrm(6,"system-button-icon",12),v.k0s()(),v.j41(7,"div",13),v.DNE(8,Bn,2,0,"div",14),v.j41(9,"ul",15),v.DNE(10,On,8,9,"li",16),v.k0s()()()}if(2&e){const e=v.XpG(2);v.Y8G("ngStyle",e.popoverStyle),v.R7$(8),v.Y8G("ngIf",0===e.currentReminders.length),v.R7$(2),v.Y8G("ngForOf",e.currentReminders)}}function Un(e,t){if(1&e){const e=v.RV6();v.j41(0,"div")(1,"div",1)(2,"div",2),v.bIt("click",(function(){v.eBV(e);const t=v.XpG();return v.Njj(t.toggleOpenPopover())})),v.nrm(3,"system-utility-icon",3),v.k0s(),v.j41(4,"div",4),v.EFF(5),v.k0s()(),v.DNE(6,Xn,11,3,"section",5),v.k0s()}if(2&e){const e=v.XpG();v.R7$(5),v.SpI(" ",e.currentReminders.length," "),v.R7$(),v.Y8G("ngIf",e.isOpen)}}let Yn=(()=>{class GlobalHeaderReminders{constructor(e,t,s,i,n,l){this.reminder=e,this.elementRef=t,this.userPreferences=s,this.cdRef=i,this.router=n,this.renderer=l,this.isOpen=!1,this.right=0}get currentReminders(){return this.reminder.reminders?this.reminder.reminders.filter((e=>moment(e.reminder_date).isSameOrBefore(new moment,"day"))).sort(((e,t)=>moment(e.reminder_date).isBefore(moment(t.reminder_date))?-1:1)):[]}toggleOpenPopover(){let e=this.elementRef.nativeElement.getBoundingClientRect();this.right=window.innerWidth-e.right+(e.left-e.right)/2+10,this.isOpen=!this.isOpen,this.isOpen?this.clickListener=this.renderer.listen("window","click",(e=>{this.elementRef.nativeElement.contains(e.target)||(this.isOpen=!1,this.clickListener())})):this.clickListener&&this.clickListener()}deleteReminder(e){this.reminder.deleteReminder(e.module_name,e.item_id)}get popoverStyle(){return{right:this.right+"px"}}closePopover(){this.isOpen=!1,this.clickListener&&this.clickListener()}static#e=this.ɵfac=function(e){return new(e||GlobalHeaderReminders)(v.rXU(Tn.z),v.rXU(v.aKT),v.rXU(Tt.S),v.rXU(v.gRc),v.rXU(B.Ix),v.rXU(v.sFG))};static#t=this.ɵcmp=v.VBU({type:GlobalHeaderReminders,selectors:[["global-header-reminders"]],decls:1,vars:1,consts:[[4,"ngIf"],[1,"slds-dropdown-trigger","slds-dropdown-trigger_click","slds-m-right--xx-small","slds-p-right--x-small",2,"cursor","pointer"],["system-title","LBL_NOTIFICATIONS",1,"slds-global-actions__notifications","slds-global-actions__item-action","slds-incoming-notification",3,"click"],["icon","reminder","size","x-small"],[1,"slds-notification-badge","slds-incoming-notification","slds-show-notification",2,"top","-5px","right","0px"],["class","slds-popover slds-popover_large slds-nubbin_top-right slds-is-absolute slds-grid slds-grid--vertical","role","dialog","style","top: 48px; max-height: calc(100vh - 55px);",3,"ngStyle",4,"ngIf"],["role","dialog",1,"slds-popover","slds-popover_large","slds-nubbin_top-right","slds-is-absolute","slds-grid","slds-grid--vertical",2,"top","48px","max-height","calc(100vh - 55px)",3,"ngStyle"],[1,"slds-grid","slds-border--bottom"],[1,"slds-popover__header","slds-grow","slds-grid","slds-grid--align-spread",2,"border-bottom","0"],[1,"slds-text-heading_small"],["label","LBL_CURRENT_REMINDERS"],["system-title","LBL_CLOSE",1,"slds-button","slds-button--icon","slds-float_right","slds-m-right--x-small",3,"click"],["icon","close"],[1,"slds-popover__body","slds-p-around_none","slds-grow","slds-grid","slds-grid--vertical",2,"min-height","0"],["class","slds-p-around--small",4,"ngIf"],[1,"slds-scrollable--y","slds-grow",2,"min-height","0"],["class","slds-global-header__notification spice-hover-display-children slds-is-relative",4,"ngFor","ngForOf"],[1,"slds-p-around--small"],["label","LBL_NO_ENTRIES"],[1,"slds-global-header__notification","spice-hover-display-children","slds-is-relative"],[1,"slds-grid","slds-p-around--xx-small","slds-grid--vertical-align-center",3,"system-model-provider"],["size","xx-small",3,"module"],["system-model-popover","",1,"slds-grow","slds-p-right--xx-small",3,"clicked"],[3,"date","displayTime"],[1,"slds-m-left--x-small","slds-button","slds-button--icon",3,"click"],["icon","clear"]],template:function(e,t){1&e&&v.DNE(0,Un,7,2,"div",0),2&e&&v.Y8G("ngIf",t.currentReminders.length>0)},dependencies:[i.Sq,i.bT,i.B3,hs.j,He.v,x.L,O.t,ps.f,D.J,j.W,G.B],encapsulation:2})}return GlobalHeaderReminders})();const Nn=(e,t,s)=>({module:e,id:t,data:s});function Vn(e,t){if(1&e){const e=v.RV6();v.j41(0,"div",7),v.nrm(1,"system-icon",8),v.j41(2,"div",9),v.bIt("clicked",(function(){v.eBV(e);const t=v.XpG();return v.Njj(t.close())})),v.EFF(3),v.k0s(),v.j41(4,"button",10),v.bIt("click",(function(){const t=v.eBV(e).$implicit,s=v.XpG();return v.Njj(s.deleteSubscription(t))})),v.nrm(5,"system-button-icon",11),v.k0s()()}if(2&e){const e=t.$implicit;v.Y8G("system-model-provider",v.sMw(3,Nn,e.bean_module,e.bean_id,e.data)),v.R7$(),v.Y8G("module",e.bean_module),v.R7$(2),v.JRh(e.data.summary_text)}}let An=(()=>{class GlobalSubscriptionsManager{constructor(e){this.subscriptions=e,this.loading=!1}deleteSubscription(e){this.loading=!0,this.subscriptions.unsubscribeBean(e.bean_id,e.bean_module).subscribe((()=>{this.loading=!1,0==this.subscriptions.subscriptions.length&&this.close()}),(()=>{this.loading=!1}))}close(){this.self.destroy()}static#e=this.ɵfac=function(e){return new(e||GlobalSubscriptionsManager)(v.rXU(Ni.g))};static#t=this.ɵcmp=v.VBU({type:GlobalSubscriptionsManager,selectors:[["global-subscriptions-manager"]],decls:8,vars:2,consts:[["size","small"],[3,"close"],["label","LBL_MANAGE_MODEL_SUBSCRIPTIONS"],["system-modal-content-grow","","margin","none",3,"system-overlay-loading-spinner"],["class","slds-p-around--x-small slds-grid slds-grid--vertical-align-center slds-border--bottom",3,"system-model-provider",4,"ngFor","ngForOf"],[1,"slds-button","slds-button--brand"],["label","LBL_CLOSE"],[1,"slds-p-around--x-small","slds-grid","slds-grid--vertical-align-center","slds-border--bottom",3,"system-model-provider"],["size","xx-small",3,"module"],["system-model-popover","",1,"slds-grow",3,"clicked"],[1,"slds-button","slds-button--icon",3,"click"],["icon","clear"]],template:function(e,t){1&e&&(v.j41(0,"system-modal",0)(1,"system-modal-header",1),v.bIt("close",(function(){return t.close()})),v.nrm(2,"system-label",2),v.k0s(),v.j41(3,"system-modal-content",3),v.DNE(4,Vn,6,7,"div",4),v.k0s(),v.j41(5,"system-modal-footer")(6,"button",5),v.nrm(7,"system-label",6),v.k0s()()()),2&e&&(v.R7$(3),v.Y8G("system-overlay-loading-spinner",t.loading),v.R7$(),v.Y8G("ngForOf",t.subscriptions.subscriptions))},dependencies:[i.Sq,hs.j,He.v,ke.M,O.t,D.J,j.W,Ie.D,xe.I,Be.Q,je.C],encapsulation:2})}return GlobalSubscriptionsManager})();var Pn=s(21413);let zn=(()=>{class OAuth2Service{constructor(e,t){this.renderer=e,this.http=t}codeFlowLogin(){const e=new Pn.B;let t;const s=this.generateState(),i=this.generateLoginUrl(s),n=window.open(i,"SpiceCRM OAuth2 login",this.popupWindowRect());n?t=window.setInterval((()=>{n?.closed&&(o(),e.error("window closed"))}),500):e.error("window blocked");const l=this.renderer.listen("window","message",(t=>{if(t.source!=n||t.origin!=window.origin||"SpiceCRMOAuthWindow"!=t.data?.source)return;o();const i=this.parseRedirectQueryString(t.data.hash);i.error?e.error(i.error):i.state!==s?e.error("Invalid state"):i?(e.next(i.code),e.complete()):e.error("invalid redirect uri data")})),o=()=>{window.clearInterval(t),l(),n&&n.close()};return e.asObservable()}generateState(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";let t=new Uint8Array(40);window.crypto.getRandomValues(t),t=t.map((t=>e.charCodeAt(t%62)));const s=String.fromCharCode.apply(null,t);return btoa(s)}generateLoginUrl(e){const t=new URLSearchParams({state:e,response_type:"code",client_id:this.config.client_id,redirect_uri:this.config.redirect_uri,scope:this.config.scope});return`${this.config.login_url}?${t.toString()}`}popupWindowRect(){const e=window.screenLeft+(window.outerWidth-500)/2;return`width=500,height=600,top=${window.screenTop+(window.outerHeight-600)/2},left=${e}`}parseRedirectQueryString(e){const t=e.substring(1).split("&"),s={};return t.forEach((e=>{const t=e.split("=");s[t[0]]=decodeURIComponent(t[1])})),s}static#e=this.ɵfac=function(e){return new(e||OAuth2Service)(v.KVO(v.sFG),v.KVO(ae.Qq))};static#t=this.ɵprov=v.jDH({token:OAuth2Service,factory:OAuth2Service.ɵfac})}return OAuth2Service})();function Hn(e,t){if(1&e&&v.nrm(0,"img",2),2&e){const e=v.XpG();v.Y8G("src",e.service.icon,v.B4B)("alt",e.service.name)}}let qn=(()=>{class GlobalLoginOAuth2Button{constructor(e,t,s,i,n){this.http=e,this.oauth2Service=t,this.configurationService=s,this.parent=i,this.toast=n,this.visible=!1,this.disabled=!0}get service(){return this._service}set service(e){e&&(this._service=e,this.initialize(e.config))}initialize(e){if(!(e?.client_id&&e.login_url&&e.userinfo_endpoint&&e.token_endpoint))return this.disabled=!0;this.visible=!0,this.oauth2Service.config={client_id:e.client_id,scope:e.scope,token_endpoint:e.token_endpoint,userinfo_endpoint:e.userinfo_endpoint,login_url:e.login_url,redirect_uri:e.redirect_uri,client_secret:e.client_secret},this.disabled=!1}signIn(e){e.preventDefault(),e.stopPropagation();const t=this.configurationService.getBackendUrl()+"/authentication/oauth2/accessToken";this.oauth2Service.codeFlowLogin().subscribe((e=>{this.http.post(t,{issuer:this.service.issuer,code:e}).subscribe((e=>{this.authenticatedUser?this.authenticatedUser==e.profile.email?this.parent.token.emit({issuer:this.service.issuer,tokenObject:e.tokenObject}):this.toast.sendToast("Wrong username","warning","usernames do not match, please relogin with the proper user"):this.parent.token.emit({issuer:this.service.issuer,tokenObject:e.tokenObject})}))}))}static#e=this.ɵfac=function(e){return new(e||GlobalLoginOAuth2Button)(v.rXU(ae.Qq),v.rXU(zn),v.rXU(J.i),v.rXU(Ge.q,1),v.rXU(W.o))};static#t=this.ɵcmp=v.VBU({type:GlobalLoginOAuth2Button,selectors:[["global-login-oauth2-button"]],inputs:{authenticatedUser:"authenticatedUser",service:"service"},features:[v.Jv_([zn])],decls:3,vars:2,consts:[[1,"slds-button","slds-button_neutral","slds-size--1-of-1","slds-m-bottom--xx-small",3,"click"],["class","slds-m-right--x-small","style","height: 16px; width: 16px",3,"src","alt",4,"ngIf"],[1,"slds-m-right--x-small",2,"height","16px","width","16px",3,"src","alt"]],template:function(e,t){1&e&&(v.j41(0,"button",0),v.bIt("click",(function(e){return t.signIn(e)})),v.DNE(1,Hn,1,2,"img",1),v.EFF(2),v.k0s()),2&e&&(v.R7$(),v.Y8G("ngIf",!!t.service.icon),v.R7$(),v.SpI(" ",t.service.name,"\n"))},dependencies:[i.bT],encapsulation:2})}return GlobalLoginOAuth2Button})();var Jn=s(71614);let Wn=(()=>{class GlobalHeaderReloadModal{static#e=this.ɵfac=function(e){return new(e||GlobalHeaderReloadModal)};static#t=this.ɵcmp=v.VBU({type:GlobalHeaderReloadModal,selectors:[["global-header-reload-modal"]],decls:5,vars:0,consts:[["size","prompt"],["system-modal-header-noclose",""],["label","LBL_RELOAD_CONFIGURATION"]],template:function(e,t){1&e&&(v.j41(0,"system-modal",0)(1,"system-modal-header",1),v.nrm(2,"system-label",2),v.k0s(),v.j41(3,"system-modal-content"),v.nrm(4,"system-loader-progress"),v.k0s()())},dependencies:[j.W,Jn.S,Ie.D,xe.I,je.C],encapsulation:2})}return GlobalHeaderReloadModal})();function Kn(e,t){if(1&e&&(v.j41(0,"div",4),v.EFF(1),v.k0s()),2&e){const e=v.XpG();v.R7$(),v.SpI(" ",e.relatedRevisions.length," ")}}const Qn=e=>({"slds-p-right--x-small":e}),Zn=e=>({"slds-hide":e});let el=(()=>{class GlobalHeaderDocumentRevisions{constructor(e,t,s,i,n,l,o,a,r,d,c){this.notificationService=e,this.elementRef=t,this.modal=s,this.viewContainerRef=i,this.model=n,this.subscription=l,this.cdRef=o,this.renderer=a,this.backend=r,this.session=d,this.injector=c,this.relatedRevisions=[]}ngOnInit(){this.model.module="DocumentRevisions",this.model.initialize(),this.loadRelated()}loadRelated(){this.backend.getRequest(`module/documentrevisions/${this.session.authData.userId}/relateduserrevisions`).subscribe((e=>{this.relatedRevisions=e}))}openModal(){this.modal.openModal("GlobalHeaderDocumentRevisionsModal",!0,this.injector).subscribe((e=>{e.instance.relatedRevisions=this.relatedRevisions}))}get hasSubscriptions(){return this.subscription.subscriptions.length>0}static#e=this.ɵfac=function(e){return new(e||GlobalHeaderDocumentRevisions)(v.rXU(vi.E),v.rXU(v.aKT),v.rXU($.y),v.rXU(v.c1b),v.rXU(E.g),v.rXU(Ni.g),v.rXU(v.gRc),v.rXU(v.sFG),v.rXU(fe.H),v.rXU(k.d),v.rXU(v.zZn))};static#t=this.ɵcmp=v.VBU({type:GlobalHeaderDocumentRevisions,selectors:[["global-header-document-revisions"]],features:[v.Jv_([E.g])],decls:4,vars:7,consts:[[1,"slds-dropdown-trigger","slds-dropdown-trigger_click","slds-m-right--xx-small",3,"ngClass"],["system-title","LBL_NOTIFICATIONS",1,"slds-global-actions__notifications","slds-global-actions__item-action","slds-incoming-notification",3,"ngClass","click"],["icon","approval","size","x-small"],["style","top:-5px; right:0px;","class","slds-notification-badge slds-incoming-notification slds-show-notification",4,"ngIf"],[1,"slds-notification-badge","slds-incoming-notification","slds-show-notification",2,"top","-5px","right","0px"]],template:function(e,t){1&e&&(v.j41(0,"div",0)(1,"div",1),v.bIt("click",(function(){return t.openModal()})),v.nrm(2,"system-utility-icon",2),v.k0s(),v.DNE(3,Kn,2,1,"div",3),v.k0s()),2&e&&(v.Y8G("ngClass",v.eq3(3,Qn,t.notificationService.unreadCount>0)),v.R7$(),v.Y8G("ngClass",v.eq3(5,Zn,0==t.relatedRevisions.length)),v.R7$(2),v.Y8G("ngIf",t.relatedRevisions.length>0))},dependencies:[i.YU,i.bT,x.L,G.B],encapsulation:2})}return GlobalHeaderDocumentRevisions})();var tl=s(74547);function sl(e,t){if(1&e){const e=v.RV6();v.j41(0,"div",8)(1,"a",9),v.bIt("click",(function(){const t=v.eBV(e).$implicit,s=v.XpG();return v.Njj(s.process(t.id))})),v.j41(2,"div",10)(3,"div",11)(4,"h3",12),v.nrm(5,"system-label",13),v.EFF(6,": "),v.nrm(7,"system-label",14),v.k0s(),v.j41(8,"p",15),v.nrm(9,"system-label",16),v.EFF(10,": "),v.nrm(11,"system-label",14),v.k0s(),v.j41(12,"p",15),v.nrm(13,"system-label",17),v.EFF(14,": "),v.nrm(15,"system-label",14),v.k0s(),v.j41(16,"p",15),v.nrm(17,"system-label",18),v.EFF(18,": "),v.nrm(19,"system-label",14),v.k0s()()()(),v.j41(20,"a",19),v.bIt("click",(function(){const t=v.eBV(e).$implicit,s=v.XpG();return v.Njj(s.acceptance(t.id))})),v.nrm(21,"system-utility-icon",20),v.k0s()()}if(2&e){const e=t.$implicit;v.R7$(7),v.Y8G("label",e.document_name),v.R7$(4),v.Y8G("label",e.name),v.R7$(4),v.Y8G("label",e.revision),v.R7$(4),v.Y8G("label",e.date_entered)}}let il=(()=>{class GlobalHeaderDocumentRevisionsModal{constructor(e,t,s,i,n,l,o){this.backend=e,this.metadata=t,this.model=s,this.modal=i,this.modelattachments=n,this.session=l,this.toast=o,this.fieldset="",this.model.module="DocumentRevisions",this.model.initialize()}ngOnInit(){this.relatedRevisions;let e=this.metadata.getComponentConfig("GlobalHeaderDocumentRevisionsModal","DocumentRevisions");this.fieldset=e.fieldset}process(e){let t=new Pn.B,s=this.relatedRevisions.find((t=>t.id==e));return this.backend.getRequest(`common/spiceattachments/module/${this.model.module}/${s.id}/byfield/file`).subscribe((e=>{t.next(e.file);let i=e.file_mime_type.toLowerCase().split("/");switch(i[0].trim()){case"image":this.modal.openModal("SystemImagePreviewModal").subscribe((t=>{t.instance.imgname=e.file_name,t.instance.imgtype=e.file_mime_type.toLowerCase(),t.instance.imgsrc="data:"+e.file_mime_type.toLowerCase()+";base64,"+e}));break;case"text":case"audio":case"video":this.modal.openModal("SystemObjectPreviewModal").subscribe((t=>{t.instance.name=e.file_name,t.instance.type=e.file_mime_type.toLowerCase(),t.instance.data=atob(e.file)}));break;case"application":if("pdf"===i[1])this.modal.openModal("SystemObjectPreviewModal").subscribe((t=>{t.instance.name=e.file_name,t.instance.type=e.file_mime_type.toLowerCase(),t.instance.data=atob(e.file)}));else this.modelattachments.downloadAttachmentForField(this.model.module,s.id,"file");break;default:this.modelattachments.downloadAttachmentForField(this.model.module,s.id,"file")}t.complete()}),(e=>{t.error(e),t.complete()})),t}acceptance(e){this.relatedRevisions.splice(this.relatedRevisions.findIndex((t=>t.id===e)),1);let t={userid:this.session.authData.userId};this.backend.postRequest(`module/documentrevisions/${e}/revisionaccepted`,"",t),this.toast.sendToast("revision accepted")}closeModal(){this.self.destroy()}static#e=this.ɵfac=function(e){return new(e||GlobalHeaderDocumentRevisionsModal)(v.rXU(fe.H),v.rXU(R.yu),v.rXU(E.g),v.rXU($.y),v.rXU(tl.S),v.rXU(k.d),v.rXU(W.o))};static#t=this.ɵcmp=v.VBU({type:GlobalHeaderDocumentRevisionsModal,selectors:[["global-header-document-revisions-modal"]],inputs:{relatedRevisions:"relatedRevisions"},features:[v.Jv_([E.g,tl.S])],decls:10,vars:2,consts:[[3,"close"],["label","LBL_UNAPPROVED_REVISIONS"],[1,"slds-scrollable_none",3,"system-modal-content-grow"],[1,"slds-scrollable--y"],[1,"slds-scrollable--y","slds-height_full"],["class","slds-cell slds-grid",4,"ngFor","ngForOf"],[1,"slds-button","slds-button--neutral",3,"click"],["label","LBL_CLOSE"],[1,"slds-cell","slds-grid"],["href","javascript:void(0);",1,"slds-box_link","slds-media","slds-size_11-of-12",3,"click"],[1,"slds-media__body"],[1,"slds-welcome-mat__tile-body"],[1,"slds-welcome-mat__tile-title"],["label","LBL_DOCUMENT_NAME"],[3,"label"],[1,"slds-welcome-mat__tile-description"],["label","LBL_REVISION_NAME"],["label","LBL_REVISION_NUMBER"],["label","LBL_DATE"],["href","javascript:void(0);",1,"slds-box_link","slds-media","slds-size_1-of-12",3,"click"],["icon","check","size","medium",1,"slds-align--absolute-center"]],template:function(e,t){1&e&&(v.j41(0,"system-modal")(1,"system-modal-header",0),v.bIt("close",(function(){return t.closeModal()})),v.nrm(2,"system-label",1),v.k0s(),v.j41(3,"system-modal-content",2)(4,"div",3)(5,"div",4),v.DNE(6,sl,22,4,"div",5),v.k0s()()(),v.j41(7,"system-modal-footer")(8,"button",6),v.bIt("click",(function(){return t.closeModal()})),v.nrm(9,"system-label",7),v.k0s()()()),2&e&&(v.R7$(3),v.Y8G("system-modal-content-grow",!1),v.R7$(3),v.Y8G("ngForOf",t.relatedRevisions))},dependencies:[i.Sq,j.W,Ie.D,xe.I,Be.Q,je.C,G.B],encapsulation:2})}return GlobalHeaderDocumentRevisionsModal})();var nl=s(16533),ll=s(83942);let ol=(()=>{class GlobalComponents{static#e=this.ɵfac=function(e){return new(e||GlobalComponents)};static#t=this.ɵmod=v.$C({type:GlobalComponents});static#s=this.ɵinj=v.G2t({imports:[i.MD,n.YN,o.ObjectFields,l.h,r.SystemComponents,a.ObjectComponents]})}return GlobalComponents})();("undefined"==typeof ngJitMode||ngJitMode)&&v.Obh(ol,{declarations:[d.T,Ks.D,Qs.u,c.Z,u.s,m.m,h.d,g.V,p.c,f.C,b.t,y.U,S,F,V,P,H,ee,Wn,Yn,te.T,Ye.K,Ne.Z,ct,Ve.l,mt,ht,gt,pt,ut,bt,yt.p,ie.R,ne.p,le.y,Me,Ue,se,oe.X,pe,ds.j,cs.f,us.G,Mt.$,Nt,Ot,vt.l,_t.M,Gt,Lt,Dt.s,Et.f,Ft,vs,Ws,Bs,Vs,Ss,ve,ci,hi,bi,Vt.q,ls.J,nl.x,ts.e,ss.S,is.i,ns.E,At.M,es,Jt,Wt,rs.U,os.g,as.l,yi.K,_e.A,gn,xi,Yi,Si,Mi,Xi,Dn,Mn,An,Ge.q,qn,el,il,ll.Y],imports:[i.MD,n.YN,o.ObjectFields,l.h,r.SystemComponents,a.ObjectComponents,Pt.Fb,Pt.O7,Pt.T1,Pt.RK],exports:[d.T,Ks.D,c.Z,te.T,vt.l,_t.M,Dt.s,Ft,p.c,il]}),v.wjB(Ge.q,[i.Sq,qn],[])},77795:(e,t,s)=>{"use strict";s.d(t,{F:()=>a});var i=s(96254),n=s(54438),l=s(53584),o=s(57363);let a=(()=>{class SpiceInstaller{constructor(e,t,s){this.spiceinstaller=e,this.configuration=t,this.router=s,this.configuration.enableinstall||s.navigate([""])}static#e=this.ɵfac=function(e){return new(e||SpiceInstaller)(n.rXU(i.R),n.rXU(l.i),n.rXU(o.Ix))};static#t=this.ɵcmp=n.VBU({type:SpiceInstaller,selectors:[["spice-installer"]],features:[n.Jv_([i.R])],decls:5,vars:0,consts:[["system-to-bottom-noscroll","","system-to-bottom-noscroll","",1,"slds-grid"],[1,"slds-border--right","slds-size--1-of-6","slds-p-horizontal--small"],[1,"slds-size--5-of-6","slds-m-vertical--medium"]],template:function(e,t){1&e&&(n.j41(0,"div",0)(1,"div",1),n.nrm(2,"spice-installer-progress-indicator"),n.k0s(),n.j41(3,"div",2),n.nrm(4,"spice-installer-detail-container"),n.k0s()())},encapsulation:2})}return SpiceInstaller})()},96254:(e,t,s)=>{"use strict";s.d(t,{R:()=>l});var i=s(21413),n=s(54438);let l=(()=>{class spiceinstaller{constructor(){let e;this.steps=[],this.systemid="000",this.systemname="SpiceCRM",this.systemurl=window.location.href.split("#")[0]+"api",this.systemproxy=0,this.systemdevmode=!1,this.systemloginprogressbar=0,this.systemloginsidebar=0,this.systemallowforgotpass=0,this.frontendUrl=window.location.href.split("#")[0],this.rpPassword="",this.dbdrivers=[],this.db_host_name="",this.db_host_instance="",this.db_user_name="",this.db_password="",this.db_name="",this.db_type="",this.db_port="",this.db_manager="",this.persistent=!0,this.autofree=!1,this.debug=0,this.ssl=!1,this.collation="",this.lc_collate="en_US.UTF-8",this.lc_ctype="en_US.UTF-8",this.db_schema="SpiceCRM",this.server="",this.port="9200",this.prefix="",this.transferProtocol="http",this.elasticUser="",this.elasticpassword="",this.elastichttps=!1,this.elasticSSLVerify=!1,this.username="admin",this.password="",this.firstname="",this.surname="Administrator",this.email="",this.language={language_code:"en_us",language_name:"English (US)"},this.configObject={},this.jumpSubject=new i.B,this.nameFormats={"s f l":"Mr. David Livingstone","f l":"David Livingstone","s l":"Mr. Livingstone","l, s f":"Livingstone, Mr. David","l, f":"Livingstone, David","s l, f":"Mr. Livingstone, David","l s f":"Livingstone Mr. David","l f s":"Livingstone David Mr."},this.configObject={backendconfig:{},database:{},dboptions:{},fts:{},credentials:{},preferences:{},language:""},this.steps=[{id:"setbackend",name:"Set Backend",completed:!1},{id:"systemcheck",name:"System Requirements",completed:!1},{id:"licence",name:"Licence",completed:!1},{id:"database",name:"Database",completed:!1},{id:"fts",name:"FTS",completed:!1},{id:"credentials",name:"Credentials",completed:!1},{id:"preferences",name:"Output & Export",completed:!1},{id:"review",name:"Review & Install",completed:!1}],this.selectedStep=this.steps[0],this.steps.forEach(((t,s)=>{t.pos=s,t.prev=e||void 0,t.prev&&(t.prev.next=t),e=t}))}keyToLabel(e){let t=e.charAt(0).toUpperCase()+e.slice(1);return e.includes("dir")&&(t=t.replace("dir","directory")),e.includes("_")&&(t=t.split("_").join(" ")),e.match(/(?=[A-Z])/)&&(t=t.split(/(?=[A-Z])/).join(" ")),e.includes("db")&&(t=t.replace("Db","Database")),t}jump(e){e&&(this.selectedStep=e)}static#e=this.ɵfac=function(e){return new(e||spiceinstaller)};static#t=this.ɵprov=n.jDH({token:spiceinstaller,factory:spiceinstaller.ɵfac})}return spiceinstaller})()},11812:(e,t,s)=>{"use strict";s.r(t),s.d(t,{SpiceInstallerModule:()=>He});var i=s(60177),n=s(84341),l=s(71341),o=s(96254),a=s(70569),r=s(77795),d=s(54438);function c(e,t){1&e&&(d.j41(0,"span",10),d.qSk(),d.j41(1,"svg",11),d.nrm(2,"use",12),d.k0s(),d.joV(),d.j41(3,"span",13),d.EFF(4,"Complete"),d.k0s()())}function u(e,t){1&e&&d.nrm(0,"div",14)}function m(e,t){if(1&e){const e=d.RV6();d.j41(0,"a",15),d.bIt("click",(function(){d.eBV(e);const t=d.XpG().$implicit,s=d.XpG();return d.Njj(s.jump(t))})),d.EFF(1),d.k0s()}if(2&e){const e=d.XpG().$implicit;d.R7$(),d.JRh(e.name)}}function h(e,t){if(1&e&&d.EFF(0),2&e){const e=d.XpG().$implicit;d.JRh(e.name)}}const g=(e,t)=>({"slds-is-active":e,"slds-is-completed":t});function p(e,t){if(1&e&&(d.j41(0,"li",4),d.DNE(1,c,5,0,"span",5)(2,u,1,0,"ng-template",null,6,d.C5r),d.j41(4,"div",7),d.DNE(5,m,2,1,"a",8)(6,h,1,1,"ng-template",null,9,d.C5r),d.k0s()()),2&e){const e=t.$implicit,s=d.sdS(3),i=d.sdS(7),n=d.XpG();d.Y8G("ngClass",d.l_i(5,g,n.isCurrentStep(e),e.completed)),d.R7$(),d.Y8G("ngIf",e.completed&&e!=n.spiceinstaller.selectedStep)("ngIfElse",s),d.R7$(4),d.Y8G("ngIf",(e.completed||(null==e.prev?null:e.prev.completed))&&!n.isCurrentStep(e))("ngIfElse",i)}}let f=(()=>{class SpiceInstallerProgressIndicator{constructor(e){this.spiceinstaller=e}jump(e){e!==this.spiceinstaller.selectedStep&&(!this.spiceinstaller.selectedStep.completed&&e.pos>this.spiceinstaller.selectedStep.pos||this.spiceinstaller.jumpSubject.next({from:this.spiceinstaller.selectedStep,to:e}))}isCurrentStep(e){return e===this.spiceinstaller.selectedStep}static#e=this.ɵfac=function(e){return new(e||SpiceInstallerProgressIndicator)(d.rXU(o.R))};static#t=this.ɵcmp=d.VBU({type:SpiceInstallerProgressIndicator,selectors:[["spice-installer-progress-indicator"]],decls:4,vars:1,consts:[[1,"slds-progress","slds-progress_vertical","slds-align_absolute-center","slds-p-horizontal--large","slds-m-vertical--x-small"],[1,"slds-progress__list"],["class","slds-progress__item",3,"ngClass",4,"ngFor","ngForOf"],["aria-valuemin","0","aria-valuemax","100","aria-valuenow","100","role","progressbar"],[1,"slds-progress__item",3,"ngClass"],["class","slds-icon_container slds-icon-utility-success slds-progress__marker slds-progress__marker_icon","title","Complete",4,"ngIf","ngIfElse"],["notCompleted",""],[1,"slds-progress__item_content","slds-grid","slds-grid_align-spread"],["href","javascript:void(0)",3,"click",4,"ngIf","ngIfElse"],["noLink",""],["title","Complete",1,"slds-icon_container","slds-icon-utility-success","slds-progress__marker","slds-progress__marker_icon"],["aria-hidden","true",1,"slds-icon","slds-icon_xx-small"],[0,"xlink","href","./vendor/sldassets/icons/utility-sprite/svg/symbols.svg#success"],[1,"slds-assistive-text"],[1,"slds-progress__marker"],["href","javascript:void(0)",3,"click"]],template:function(e,t){1&e&&(d.j41(0,"div",0)(1,"ol",1),d.DNE(2,p,8,8,"li",2),d.k0s(),d.nrm(3,"div",3),d.k0s()),2&e&&(d.R7$(2),d.Y8G("ngForOf",t.spiceinstaller.steps))},dependencies:[i.YU,i.Sq,i.bT],encapsulation:2})}return SpiceInstallerProgressIndicator})();var b=s(41731),y=s(41081),v=s(21626),_=s(57363),k=s(53584),R=s(49722),I=s(20883);function x(e,t){1&e&&(d.j41(0,"div",15),d.EFF(1,"Input required."),d.k0s())}const j=e=>({"slds-has-error":e}),G=e=>({"slds-hide":e});let C=(()=>{class SpiceInstallerSetBackEnd{constructor(e,t,s,i,n){this.toast=e,this.http=t,this.router=s,this.configurationService=i,this.spiceinstaller=n,this.checking=!1,this.apiurl="",this.apiFound=!1,this.systemNameCondition=!0,this.spiceinstaller.jumpSubject.subscribe((e=>{e.to&&e.from===this.selfStep&&(this.selfStep.completed||e.to.pos<this.selfStep.pos||this.tryComplete())&&this.spiceinstaller.jump(e.to)}))}ngOnInit(){let e=window.location.href;this.apiurl=e.replace("#/install","api")}tryComplete(){return this.systemNameCondition=this.spiceinstaller.systemname?.length>0,!!this.systemNameCondition&&(this.spiceinstaller.systemurl=this.apiurl,this.spiceinstaller.configObject.backendconfig={backendUrl:this.spiceinstaller.systemurl,frontendUrl:this.spiceinstaller.frontendUrl},this.selfStep.completed=!0,!0)}static#e=this.ɵfac=function(e){return new(e||SpiceInstallerSetBackEnd)(d.rXU(y.o),d.rXU(v.Qq),d.rXU(_.Ix),d.rXU(k.i),d.rXU(o.R))};static#t=this.ɵcmp=d.VBU({type:SpiceInstallerSetBackEnd,selectors:[["spice-installer-set-backend"]],inputs:{selfStep:"selfStep"},decls:41,vars:16,consts:[[1,"slds-m-horizontal--medium"],[1,"slds-text-heading--medium","slds-m-bottom_medium"],[1,"slds-text-body--regular","slds-p-bottom--xx-small"],[1,"slds-form-element","slds-p-vertical--xx-small",3,"ngClass"],[1,"slds-form-element__label"],[1,"slds-required"],[1,"slds-form-element__control"],["type","text","system-trim-input","blur",1,"slds-input",3,"disabled","ngModel","ngModelChange","change"],["class","slds-form-element__help",4,"ngIf"],[1,"slds-select_container"],[1,"slds-select",3,"disabled","ngModel","ngModelChange"],["value","1"],["value","0"],[1,"slds-p-vertical--small","slds-text-align--right"],[1,"slds-button","slds-button--brand",3,"click"],[1,"slds-form-element__help"]],template:function(e,t){1&e&&(d.j41(0,"div",0)(1,"h2",1)(2,"div",2),d.EFF(3,"Welcome to SpiceCRM"),d.nrm(4,"br"),d.k0s(),d.EFF(5," Set Backend "),d.k0s(),d.j41(6,"div",3)(7,"label",4)(8,"abbr",5),d.EFF(9,"*"),d.k0s(),d.EFF(10,"Name"),d.k0s(),d.j41(11,"div",6)(12,"input",7),d.mxI("ngModelChange",(function(e){return d.DH7(t.spiceinstaller.systemname,e)||(t.spiceinstaller.systemname=e),e})),d.bIt("change",(function(){return t.selfStep.completed=!1})),d.k0s(),d.DNE(13,x,2,0,"div",8),d.k0s()(),d.j41(14,"div",3)(15,"label",4)(16,"abbr",5),d.EFF(17,"*"),d.k0s(),d.EFF(18,"Show Forgot Password on Login Screen"),d.k0s(),d.j41(19,"div",6)(20,"div",9)(21,"select",10),d.mxI("ngModelChange",(function(e){return d.DH7(t.spiceinstaller.systemallowforgotpass,e)||(t.spiceinstaller.systemallowforgotpass=e),e})),d.j41(22,"option",11),d.EFF(23,"Yes"),d.k0s(),d.j41(24,"option",12),d.EFF(25,"No"),d.k0s()()()()(),d.j41(26,"div",3)(27,"label",4)(28,"abbr",5),d.EFF(29,"*"),d.k0s(),d.EFF(30,"Show LoginSidebar"),d.k0s(),d.j41(31,"div",6)(32,"div",9)(33,"select",10),d.mxI("ngModelChange",(function(e){return d.DH7(t.spiceinstaller.systemloginsidebar,e)||(t.spiceinstaller.systemloginsidebar=e),e})),d.j41(34,"option",12),d.EFF(35,"No"),d.k0s(),d.j41(36,"option",11),d.EFF(37,"Yes"),d.k0s()()()()(),d.j41(38,"div",13)(39,"button",14),d.bIt("click",(function(){return t.spiceinstaller.jumpSubject.next({from:t.selfStep,to:t.selfStep.next})})),d.EFF(40,"next"),d.k0s()()()),2&e&&(d.R7$(6),d.Y8G("ngClass",d.eq3(10,j,!t.systemNameCondition)),d.R7$(6),d.Y8G("disabled",t.checking),d.R50("ngModel",t.spiceinstaller.systemname),d.R7$(),d.Y8G("ngIf",!t.systemNameCondition),d.R7$(),d.Y8G("ngClass",d.eq3(12,G,t.apiFound)),d.R7$(7),d.Y8G("disabled",t.checking),d.R50("ngModel",t.spiceinstaller.systemallowforgotpass),d.R7$(5),d.Y8G("ngClass",d.eq3(14,G,t.apiFound)),d.R7$(7),d.Y8G("disabled",t.checking),d.R50("ngModel",t.spiceinstaller.systemloginsidebar))},dependencies:[i.YU,i.bT,n.xH,n.y7,n.me,n.wz,n.BC,n.vS,I.D],encapsulation:2})}return SpiceInstallerSetBackEnd})();var w=s(32130),S=s(18521);const E=e=>({"slds-theme--error":e});function L(e,t){if(1&e&&(d.j41(0,"tr",8)(1,"td")(2,"div",9),d.nrm(3,"system-utility-icon",10),d.k0s()(),d.j41(4,"td")(5,"div",9),d.EFF(6),d.k0s()()()),2&e){const e=t.$implicit,s=d.XpG();d.Y8G("ngClass",d.eq3(4,E,!e.value)),d.R7$(3),d.Y8G("size","x-small")("icon",e.value?"check":"error"),d.R7$(3),d.SpI(" ",s.spiceinstaller.keyToLabel(e.key),"")}}let D=(()=>{class SpiceInstallerSystemCheck{constructor(e,t,s){this.toast=e,this.http=t,this.spiceinstaller=s,this.loading=!1,this.requirements=[],this.spiceinstaller.jumpSubject.subscribe((e=>{e.to&&e.from===this.selfStep&&(this.selfStep.completed||e.to?.pos<this.selfStep.pos)&&this.spiceinstaller.jump(e.to)})),this.checkSystem()}get checkFailed(){for(let e of Object.values(this.requirements))if(!e)return!0;return!1}checkSystem(){this.loading=!0,this.http.get(`${this.spiceinstaller.systemurl}/install/check`).subscribe((e=>{this.loading=!1;let t=e;this.requirements=t.requirements,t.success?(this.selfStep.completed=!0,this.spiceinstaller.dbdrivers=this.requirements.dbdrivers):this.toast.sendToast("error, missing requirements","error")}),(e=>{if(this.loading=!1,500===e.status)this.toast.sendAlert(e.message,"error")}))}static#e=this.ɵfac=function(e){return new(e||SpiceInstallerSystemCheck)(d.rXU(y.o),d.rXU(v.Qq),d.rXU(o.R))};static#t=this.ɵcmp=d.VBU({type:SpiceInstallerSystemCheck,selectors:[["spice-installer-systemcheck"]],inputs:{selfStep:"selfStep"},decls:20,vars:5,consts:[[3,"system-overlay-loading-spinner"],[1,"slds-text-heading--medium","slds-m-bottom_medium","slds-m-horizontal_medium"],[1,"slds-table","slds-table_cell-buffer","slds-table_bordered","slds-table_col-bordered"],[3,"ngClass",4,"ngFor","ngForOf"],[1,"slds-text-align--right","slds-m-top--medium","slds-m-horizontal--medium"],[1,"slds-button","slds-button--neutral","slds-col_bump-left",3,"click"],[1,"slds-button","slds-m-right--xx-small","slds-button--neutral",3,"click"],[1,"slds-button","slds-button--brand",3,"disabled","click"],[3,"ngClass"],[1,"slds-truncate"],[3,"size","icon"]],template:function(e,t){1&e&&(d.j41(0,"div",0)(1,"h2",1),d.EFF(2," System Requirements "),d.k0s(),d.j41(3,"table",2)(4,"thead")(5,"tr")(6,"th"),d.EFF(7,"Status"),d.k0s(),d.j41(8,"th"),d.EFF(9,"Extension"),d.k0s()()(),d.j41(10,"tbody"),d.DNE(11,L,7,6,"tr",3),d.nI1(12,"keyvalue"),d.k0s()(),d.j41(13,"div",4)(14,"button",5),d.bIt("click",(function(){return t.spiceinstaller.jumpSubject.next({from:t.selfStep,to:t.selfStep.prev})})),d.EFF(15,"back"),d.k0s(),d.j41(16,"button",6),d.bIt("click",(function(){return t.checkSystem()})),d.EFF(17,"recheck"),d.k0s(),d.j41(18,"button",7),d.bIt("click",(function(){return t.spiceinstaller.jumpSubject.next({from:t.selfStep,to:t.selfStep.next})})),d.EFF(19,"next"),d.k0s()()()),2&e&&(d.Y8G("system-overlay-loading-spinner",t.loading),d.R7$(11),d.Y8G("ngForOf",d.bMT(12,3,t.requirements)),d.R7$(7),d.Y8G("disabled",t.checkFailed))},dependencies:[i.YU,i.Sq,w.M,S.B,i.lG],encapsulation:2})}return SpiceInstallerSystemCheck})();var F=s(28933),M=s(84359);let T=(()=>{class SpiceInstallerLicence{constructor(e){this.spiceinstaller=e,this.year=new Date,this.author="",this.author="SpiceCRM",this.year=this.year.getFullYear(),this.spiceinstaller.jumpSubject.subscribe((e=>{e.to&&e.from===this.selfStep&&(this.selfStep.completed||e.to?.pos<this.selfStep.pos)&&this.spiceinstaller.jump(e.to)}))}static#e=this.ɵfac=function(e){return new(e||SpiceInstallerLicence)(d.rXU(o.R))};static#t=this.ɵcmp=d.VBU({type:SpiceInstallerLicence,selectors:[["spice-installer-licence"]],inputs:{selfStep:"selfStep"},decls:257,vars:4,consts:[[1,"slds-text-heading--medium","slds-p-bottom_medium","slds-border--bottom","slds-p-horizontal--medium"],["system-to-bottom",""],[1,"slds-p-around--medium","slds-theme--default"],["href","http://fsf.org/"],[1,"slds-text-longform"],["href","http://www.gnu.org/licenses/"],[1,"slds-grid","slds-p-around--medium","slds-border--top"],[3,"ngModel","ngModelChange"],[1,"slds-button","slds-button--neutral","slds-col_bump-left",3,"click"],[1,"slds-button","slds-button--brand",3,"disabled","click"]],template:function(e,t){1&e&&(d.j41(0,"h2",0),d.EFF(1," License Agreement\n"),d.k0s(),d.j41(2,"div",1)(3,"div",2)(4,"p"),d.EFF(5,"GNU AFFERO GENERAL PUBLIC LICENSE Version 3, 19 November 2007"),d.k0s(),d.j41(6,"p"),d.EFF(7," Copyright (C) 2007 Free Software Foundation, Inc. "),d.j41(8,"a",3),d.EFF(9,"fsf.org"),d.k0s(),d.EFF(10," Everyone is permitted to copy and distribute verbatim copies of this license document, but changing it is not allowed."),d.k0s(),d.j41(11,"p"),d.EFF(12," Preamble"),d.k0s(),d.j41(13,"p"),d.EFF(14," The GNU Affero General Public License is a free, copyleft license for software and other kinds of works, specifically designed to ensure cooperation with the community in the case of network server software."),d.k0s(),d.j41(15,"p"),d.EFF(16," The licenses for most software and other practical works are designed to take away your freedom to share and change the works. By contrast, our General Public Licenses are intended to guarantee your freedom to share and change all versions of a program--to make sure it remains free software for all its users."),d.k0s(),d.j41(17,"p"),d.EFF(18," When we speak of free software, we are referring to freedom, not price. Our General Public Licenses are designed to make sure that you have the freedom to distribute copies of free software (and charge for them if you wish), that you receive source code or can get it if you want it, that you can change the software or use pieces of it in new free programs, and that you know you can do these things."),d.k0s(),d.j41(19,"div",4)(20,"p"),d.EFF(21," Developers that use our General Public Licenses protect your rights with two steps: (1) assert copyright on the software, and (2) offer you this License which gives you legal permission to copy, distribute and/or modify the software."),d.k0s(),d.j41(22,"p"),d.EFF(23," A secondary benefit of defending all users' freedom is that improvements made in alternate versions of the program, if they receive widespread use, become available for other developers to incorporate. Many developers of free software are heartened and encouraged by the resulting cooperation. However, in the case of software used on network servers, this result may fail to come about. The GNU General Public License permits making a modified version and letting the public access it on a server without ever releasing its source code to the public."),d.k0s(),d.j41(24,"p"),d.EFF(25," The GNU Affero General Public License is designed specifically to ensure that, in such cases, the modified source code becomes available to the community. It requires the operator of a network server to provide the source code of the modified version running there to the users of that server. Therefore, public use of a modified version, on a publicly accessible server, gives the public access to the source code of the modified version."),d.k0s(),d.j41(26,"p"),d.EFF(27," An older license, called the Affero General Public License and published by Affero, was designed to accomplish similar goals. This is a different license, not a version of the Affero GPL, but Affero has released a new version of the Affero GPL which permits relicensing under this license."),d.k0s(),d.j41(28,"p"),d.EFF(29," The precise terms and conditions for copying, distribution and modification follow."),d.k0s(),d.j41(30,"p"),d.EFF(31," TERMS AND CONDITIONS"),d.k0s(),d.j41(32,"p"),d.EFF(33," 0. Definitions."),d.k0s(),d.j41(34,"p"),d.EFF(35,' "This License" refers to version 3 of the GNU Affero General Public License.'),d.k0s(),d.j41(36,"p"),d.EFF(37,' "Copyright" also means copyright-like laws that apply to other kinds of works, such as semiconductor masks.'),d.k0s(),d.j41(38,"p"),d.EFF(39,' "The Program" refers to any copyrightable work licensed under this License. Each licensee is addressed as "you". "Licensees" and "recipients" may be individuals or organizations.'),d.k0s(),d.j41(40,"p"),d.EFF(41,' To "modify" a work means to copy from or adapt all or part of the work in a fashion requiring copyright permission, other than the making of an exact copy. The resulting work is called a "modified version" of the earlier work or a work "based on" the earlier work.'),d.k0s(),d.j41(42,"p"),d.EFF(43,' A "covered work" means either the unmodified Program or a work based on the Program.'),d.k0s(),d.j41(44,"p"),d.EFF(45,' To "propagate" a work means to do anything with it that, without permission, would make you directly or secondarily liable for infringement under applicable copyright law, except executing it on a computer or modifying a public copy. Propagation includes copying, distribution (with or without modification), making available to the public, and in some countries other activities as well.'),d.k0s(),d.j41(46,"p"),d.EFF(47,' To "convey" a work means any kind of propagation that enables other parties to make or receive copies. Mere interaction with a user through a computer network, with no transfer of a copy, is not conveying.'),d.k0s(),d.j41(48,"p"),d.EFF(49,' An interactive user interface displays "Appropriate Legal Notices" to the extent that it includes a convenient and prominently visible feature that (1) displays an appropriate copyright notice, and (2) tells the user that there is no warranty for the work (except to the extent that warranties are provided), that licensees may convey the work under this License, and how to view a copy of this License. If the interface presents a list of user commands or options, such as a menu, a prominent item in the list meets this criterion.'),d.k0s(),d.j41(50,"p"),d.EFF(51," 1. Source Code."),d.k0s(),d.j41(52,"p"),d.EFF(53,' The "source code" for a work means the preferred form of the work for making modifications to it. "Object code" means any non-source form of a work.'),d.k0s(),d.j41(54,"p"),d.EFF(55,' A "Standard Interface" means an interface that either is an official standard defined by a recognized standards body, or, in the case of interfaces specified for a particular programming language, one that is widely used among developers working in that language.'),d.k0s(),d.j41(56,"p"),d.EFF(57,' The "System Libraries" of an executable work include anything, other than the work as a whole, that (a) is included in the normal form of packaging a Major Component, but which is not part of that Major Component, and (b) serves only to enable use of the work with that Major Component, or to implement a Standard Interface for which an implementation is available to the public in source code form. A "Major Component", in this context, means a major essential component (kernel, window system, and so on) of the specific operating system (if any) on which the executable work runs, or a compiler used to produce the work, or an object code interpreter used to run it.'),d.k0s(),d.j41(58,"p"),d.EFF(59,' The "Corresponding Source" for a work in object code form means all the source code needed to generate, install, and (for an executable work) run the object code and to modify the work, including scripts to control those activities. However, it does not include the work\'s System Libraries, or general-purpose tools or generally available free programs which are used unmodified in performing those activities but which are not part of the work. For example, Corresponding Source includes interface definition files associated with source files for the work, and the source code for shared libraries and dynamically linked subprograms that the work is specifically designed to require, such as by intimate data communication or control flow between those subprograms and other parts of the work.'),d.k0s(),d.j41(60,"p"),d.EFF(61," The Corresponding Source need not include anything that users can regenerate automatically from other parts of the Corresponding Source."),d.k0s(),d.j41(62,"p"),d.EFF(63," The Corresponding Source for a work in source code form is that same work."),d.k0s(),d.j41(64,"p"),d.EFF(65," 2. Basic Permissions."),d.k0s(),d.j41(66,"p"),d.EFF(67," All rights granted under this License are granted for the term of copyright on the Program, and are irrevocable provided the stated conditions are met. This License explicitly affirms your unlimited permission to run the unmodified Program. The output from running a covered work is covered by this License only if the output, given its content, constitutes a covered work. This License acknowledges your rights of fair use or other equivalent, as provided by copyright law."),d.k0s(),d.j41(68,"p"),d.EFF(69," You may make, run and propagate covered works that you do not convey, without conditions so long as your license otherwise remains in force. You may convey covered works to others for the sole purpose of having them make modifications exclusively for you, or provide you with facilities for running those works, provided that you comply with the terms of this License in conveying all material for which you do not control copyright. Those thus making or running the covered works for you must do so exclusively on your behalf, under your direction and control, on terms that prohibit them from making any copies of your copyrighted material outside their relationship with you."),d.k0s(),d.j41(70,"p"),d.EFF(71," Conveying under any other circumstances is permitted solely under the conditions stated below. Sublicensing is not allowed; section 10 makes it unnecessary."),d.k0s(),d.j41(72,"p"),d.EFF(73," 3. Protecting Users' Legal Rights From Anti-Circumvention Law."),d.k0s(),d.j41(74,"p"),d.EFF(75," No covered work shall be deemed part of an effective technological measure under any applicable law fulfilling obligations under article 11 of the WIPO copyright treaty adopted on 20 December 1996, or similar laws prohibiting or restricting circumvention of such measures."),d.k0s(),d.j41(76,"p"),d.EFF(77," When you convey a covered work, you waive any legal power to forbid circumvention of technological measures to the extent such circumvention is effected by exercising rights under this License with respect to the covered work, and you disclaim any intention to limit operation or modification of the work as a means of enforcing, against the work's users, your or third parties' legal rights to forbid circumvention of technological measures."),d.k0s(),d.j41(78,"p"),d.EFF(79," 4. Conveying Verbatim Copies."),d.k0s(),d.j41(80,"p"),d.EFF(81," You may convey verbatim copies of the Program's source code as you receive it, in any medium, provided that you conspicuously and appropriately publish on each copy an appropriate copyright notice; keep intact all notices stating that this License and any non-permissive terms added in accord with section 7 apply to the code; keep intact all notices of the absence of any warranty; and give all recipients a copy of this License along with the Program."),d.k0s(),d.j41(82,"p"),d.EFF(83," You may charge any price or no price for each copy that you convey, and you may offer support or warranty protection for a fee."),d.k0s(),d.j41(84,"p"),d.EFF(85," 5. Conveying Modified Source Versions."),d.k0s(),d.j41(86,"p"),d.EFF(87," You may convey a work based on the Program, or the modifications to produce it from the Program, in the form of source code under the terms of section 4, provided that you also meet all of these conditions:"),d.k0s(),d.j41(88,"p"),d.EFF(89," a) The work must carry prominent notices stating that you modified it, and giving a relevant date."),d.k0s(),d.j41(90,"p"),d.EFF(91,' b) The work must carry prominent notices stating that it is released under this License and any conditions added under section 7. This requirement modifies the requirement in section 4 to "keep intact all notices".'),d.k0s(),d.j41(92,"p"),d.EFF(93," c) You must license the entire work, as a whole, under this License to anyone who comes into possession of a copy. This License will therefore apply, along with any applicable section 7 additional terms, to the whole of the work, and all its parts, regardless of how they are packaged. This License gives no permission to license the work in any other way, but it does not invalidate such permission if you have separately received it."),d.k0s(),d.j41(94,"p"),d.EFF(95," d) If the work has interactive user interfaces, each must display Appropriate Legal Notices; however, if the Program has interactive interfaces that do not display Appropriate Legal Notices, your work need not make them do so."),d.k0s(),d.j41(96,"p"),d.EFF(97,' A compilation of a covered work with other separate and independent works, which are not by their nature extensions of the covered work, and which are not combined with it such as to form a larger program, in or on a volume of a storage or distribution medium, is called an "aggregate" if the compilation and its resulting copyright are not used to limit the access or legal rights of the compilation\'s users beyond what the individual works permit. Inclusion of a covered work in an aggregate does not cause this License to apply to the other parts of the aggregate.'),d.k0s(),d.j41(98,"p"),d.EFF(99," 6. Conveying Non-Source Forms."),d.k0s(),d.j41(100,"p"),d.EFF(101," You may convey a covered work in object code form under the terms of sections 4 and 5, provided that you also convey the machine-readable Corresponding Source under the terms of this License, in one of these ways:"),d.k0s(),d.j41(102,"p"),d.EFF(103," a) Convey the object code in, or embodied in, a physical product (including a physical distribution medium), accompanied by the Corresponding Source fixed on a durable physical medium customarily used for software interchange."),d.k0s(),d.j41(104,"p"),d.EFF(105," b) Convey the object code in, or embodied in, a physical product (including a physical distribution medium), accompanied by a written offer, valid for at least three years and valid for as long as you offer spare parts or customer support for that product model, to give anyone who possesses the object code either (1) a copy of the Corresponding Source for all the software in the product that is covered by this License, on a durable physical medium customarily used for software interchange, for a price no more than your reasonable cost of physically performing this conveying of source, or (2) access to copy the Corresponding Source from a network server at no charge."),d.k0s(),d.j41(106,"p"),d.EFF(107," c) Convey individual copies of the object code with a copy of the written offer to provide the Corresponding Source. This alternative is allowed only occasionally and noncommercially, and only if you received the object code with such an offer, in accord with subsection 6b."),d.k0s(),d.j41(108,"p"),d.EFF(109," d) Convey the object code by offering access from a designated place (gratis or for a charge), and offer equivalent access to the Corresponding Source in the same way through the same place at no further charge. You need not require recipients to copy the Corresponding Source along with the object code. If the place to copy the object code is a network server, the Corresponding Source may be on a different server (operated by you or a third party) that supports equivalent copying facilities, provided you maintain clear directions next to the object code saying where to find the Corresponding Source. Regardless of what server hosts the Corresponding Source, you remain obligated to ensure that it is available for as long as needed to satisfy these requirements."),d.k0s(),d.j41(110,"p"),d.EFF(111," e) Convey the object code using peer-to-peer transmission, provided you inform other peers where the object code and Corresponding Source of the work are being offered to the general public at no charge under subsection 6d."),d.k0s(),d.j41(112,"p"),d.EFF(113," A separable portion of the object code, whose source code is excluded from the Corresponding Source as a System Library, need not be included in conveying the object code work."),d.k0s(),d.j41(114,"p"),d.EFF(115,' A "User Product" is either (1) a "consumer product", which means any tangible personal property which is normally used for personal, family, or household purposes, or (2) anything designed or sold for incorporation into a dwelling. In determining whether a product is a consumer product, doubtful cases shall be resolved in favor of coverage. For a particular product received by a particular user, "normally used" refers to a typical or common use of that class of product, regardless of the status of the particular user or of the way in which the particular user actually uses, or expects or is expected to use, the product. A product is a consumer product regardless of whether the product has substantial commercial, industrial or non-consumer uses, unless such uses represent the only significant mode of use of the product.'),d.k0s(),d.j41(116,"p"),d.EFF(117,' "Installation Information" for a User Product means any methods, procedures, authorization keys, or other information required to install and execute modified versions of a covered work in that User Product from a modified version of its Corresponding Source. The information must suffice to ensure that the continued functioning of the modified object code is in no case prevented or interfered with solely because modification has been made.'),d.k0s(),d.j41(118,"p"),d.EFF(119," If you convey an object code work under this section in, or with, or specifically for use in, a User Product, and the conveying occurs as part of a transaction in which the right of possession and use of the User Product is transferred to the recipient in perpetuity or for a fixed term (regardless of how the transaction is characterized), the Corresponding Source conveyed under this section must be accompanied by the Installation Information. But this requirement does not apply if neither you nor any third party retains the ability to install modified object code on the User Product (for example, the work has been installed in ROM)."),d.k0s(),d.j41(120,"p"),d.EFF(121," The requirement to provide Installation Information does not include a requirement to continue to provide support service, warranty, or updates for a work that has been modified or installed by the recipient, or for the User Product in which it has been modified or installed. Access to a network may be denied when the modification itself materially and adversely affects the operation of the network or violates the rules and protocols for communication across the network."),d.k0s(),d.j41(122,"p"),d.EFF(123," Corresponding Source conveyed, and Installation Information provided, in accord with this section must be in a format that is publicly documented (and with an implementation available to the public in source code form), and must require no special password or key for unpacking, reading or copying."),d.k0s(),d.j41(124,"p"),d.EFF(125," 7. Additional Terms."),d.k0s(),d.j41(126,"p"),d.EFF(127,' "Additional permissions" are terms that supplement the terms of this License by making exceptions from one or more of its conditions. Additional permissions that are applicable to the entire Program shall be treated as though they were included in this License, to the extent that they are valid under applicable law. If additional permissions apply only to part of the Program, that part may be used separately under those permissions, but the entire Program remains governed by this License without regard to the additional permissions.'),d.k0s(),d.j41(128,"p"),d.EFF(129," When you convey a copy of a covered work, you may at your option remove any additional permissions from that copy, or from any part of it. (Additional permissions may be written to require their own removal in certain cases when you modify the work.) You may place additional permissions on material, added by you to a covered work, for which you have or can give appropriate copyright permission."),d.k0s(),d.j41(130,"p"),d.EFF(131," Notwithstanding any other provision of this License, for material you add to a covered work, you may (if authorized by the copyright holders of that material) supplement the terms of this License with terms:"),d.k0s(),d.j41(132,"p"),d.EFF(133," a) Disclaiming warranty or limiting liability differently from the terms of sections 15 and 16 of this License; or"),d.k0s(),d.j41(134,"p"),d.EFF(135," b) Requiring preservation of specified reasonable legal notices or author attributions in that material or in the Appropriate Legal Notices displayed by works containing it; or"),d.k0s(),d.j41(136,"p"),d.EFF(137," c) Prohibiting misrepresentation of the origin of that material, or requiring that modified versions of such material be marked in reasonable ways as different from the original version; or"),d.k0s(),d.j41(138,"p"),d.EFF(139," d) Limiting the use for publicity purposes of names of licensors or authors of the material; or"),d.k0s(),d.j41(140,"p"),d.EFF(141," e) Declining to grant rights under trademark law for use of some trade names, trademarks, or service marks; or"),d.k0s(),d.j41(142,"p"),d.EFF(143," f) Requiring indemnification of licensors and authors of that material by anyone who conveys the material (or modified versions of it) with contractual assumptions of liability to the recipient, for any liability that these contractual assumptions directly impose on those licensors and authors."),d.k0s(),d.j41(144,"p"),d.EFF(145,' All other non-permissive additional terms are considered "further restrictions" within the meaning of section 10. If the Program as you received it, or any part of it, contains a notice stating that it is governed by this License along with a term that is a further restriction, you may remove that term. If a license document contains a further restriction but permits relicensing or conveying under this License, you may add to a covered work material governed by the terms of that license document, provided that the further restriction does not survive such relicensing or conveying.'),d.k0s(),d.j41(146,"p"),d.EFF(147," If you add terms to a covered work in accord with this section, you must place, in the relevant source files, a statement of the additional terms that apply to those files, or a notice indicating where to find the applicable terms."),d.k0s(),d.j41(148,"p"),d.EFF(149," Additional terms, permissive or non-permissive, may be stated in the form of a separately written license, or stated as exceptions; the above requirements apply either way."),d.k0s(),d.j41(150,"p"),d.EFF(151," 8. Termination."),d.k0s(),d.j41(152,"p"),d.EFF(153," You may not propagate or modify a covered work except as expressly provided under this License. Any attempt otherwise to propagate or modify it is void, and will automatically terminate your rights under this License (including any patent licenses granted under the third paragraph of section 11)."),d.k0s(),d.j41(154,"p"),d.EFF(155," However, if you cease all violation of this License, then your license from a particular copyright holder is reinstated (a) provisionally, unless and until the copyright holder explicitly and finally terminates your license, and (b) permanently, if the copyright holder fails to notify you of the violation by some reasonable means prior to 60 days after the cessation."),d.k0s(),d.j41(156,"p"),d.EFF(157," Moreover, your license from a particular copyright holder is reinstated permanently if the copyright holder notifies you of the violation by some reasonable means, this is the first time you have received notice of violation of this License (for any work) from that copyright holder, and you cure the violation prior to 30 days after your receipt of the notice."),d.k0s(),d.j41(158,"p"),d.EFF(159," Termination of your rights under this section does not terminate the licenses of parties who have received copies or rights from you under this License. If your rights have been terminated and not permanently reinstated, you do not qualify to receive new licenses for the same material under section 10."),d.k0s(),d.j41(160,"p"),d.EFF(161," 9. Acceptance Not Required for Having Copies."),d.k0s(),d.j41(162,"p"),d.EFF(163," You are not required to accept this License in order to receive or run a copy of the Program. Ancillary propagation of a covered work occurring solely as a consequence of using peer-to-peer transmission to receive a copy likewise does not require acceptance. However, nothing other than this License grants you permission to propagate or modify any covered work. These actions infringe copyright if you do not accept this License. Therefore, by modifying or propagating a covered work, you indicate your acceptance of this License to do so."),d.k0s(),d.j41(164,"p"),d.EFF(165," 10. Automatic Licensing of Downstream Recipients."),d.k0s(),d.j41(166,"p"),d.EFF(167," Each time you convey a covered work, the recipient automatically receives a license from the original licensors, to run, modify and propagate that work, subject to this License. You are not responsible for enforcing compliance by third parties with this License."),d.k0s(),d.j41(168,"p"),d.EFF(169,' An "entity transaction" is a transaction transferring control of an organization, or substantially all assets of one, or subdividing an organization, or merging organizations. If propagation of a covered work results from an entity transaction, each party to that transaction who receives a copy of the work also receives whatever licenses to the work the party\'s predecessor in interest had or could give under the previous paragraph, plus a right to possession of the Corresponding Source of the work from the predecessor in interest, if the predecessor has it or can get it with reasonable efforts.'),d.k0s(),d.j41(170,"p"),d.EFF(171," You may not impose any further restrictions on the exercise of the rights granted or affirmed under this License. For example, you may not impose a license fee, royalty, or other charge for exercise of rights granted under this License, and you may not initiate litigation (including a cross-claim or counterclaim in a lawsuit) alleging that any patent claim is infringed by making, using, selling, offering for sale, or importing the Program or any portion of it."),d.k0s(),d.j41(172,"p"),d.EFF(173," 11. Patents."),d.k0s(),d.j41(174,"p"),d.EFF(175,' A "contributor" is a copyright holder who authorizes use under this License of the Program or a work on which the Program is based. The work thus licensed is called the contributor\'s "contributor version".'),d.k0s(),d.j41(176,"p"),d.EFF(177,' A contributor\'s "essential patent claims" are all patent claims owned or controlled by the contributor, whether already acquired or hereafter acquired, that would be infringed by some manner, permitted by this License, of making, using, or selling its contributor version, but do not include claims that would be infringed only as a consequence of further modification of the contributor version. For purposes of this definition, "control" includes the right to grant patent sublicenses in a manner consistent with the requirements of this License.'),d.k0s(),d.j41(178,"p"),d.EFF(179," Each contributor grants you a non-exclusive, worldwide, royalty-free patent license under the contributor's essential patent claims, to make, use, sell, offer for sale, import and otherwise run, modify and propagate the contents of its contributor version."),d.k0s(),d.j41(180,"p"),d.EFF(181,' In the following three paragraphs, a "patent license" is any express agreement or commitment, however denominated, not to enforce a patent (such as an express permission to practice a patent or covenant not to sue for patent infringement). To "grant" such a patent license to a party means to make such an agreement or commitment not to enforce a patent against the party.'),d.k0s(),d.j41(182,"p"),d.EFF(183,' If you convey a covered work, knowingly relying on a patent license, and the Corresponding Source of the work is not available for anyone to copy, free of charge and under the terms of this License, through a publicly available network server or other readily accessible means, then you must either (1) cause the Corresponding Source to be so available, or (2) arrange to deprive yourself of the benefit of the patent license for this particular work, or (3) arrange, in a manner consistent with the requirements of this License, to extend the patent license to downstream recipients. "Knowingly relying" means you have actual knowledge that, but for the patent license, your conveying the covered work in a country, or your recipient\'s use of the covered work in a country, would infringe one or more identifiable patents in that country that you have reason to believe are valid.'),d.k0s(),d.j41(184,"p"),d.EFF(185," If, pursuant to or in connection with a single transaction or arrangement, you convey, or propagate by procuring conveyance of, a covered work, and grant a patent license to some of the parties receiving the covered work authorizing them to use, propagate, modify or convey a specific copy of the covered work, then the patent license you grant is automatically extended to all recipients of the covered work and works based on it."),d.k0s(),d.j41(186,"p"),d.EFF(187,' A patent license is "discriminatory" if it does not include within the scope of its coverage, prohibits the exercise of, or is conditioned on the non-exercise of one or more of the rights that are specifically granted under this License. You may not convey a covered work if you are a party to an arrangement with a third party that is in the business of distributing software, under which you make payment to the third party based on the extent of your activity of conveying the work, and under which the third party grants, to any of the parties who would receive the covered work from you, a discriminatory patent license (a) in connection with copies of the covered work conveyed by you (or copies made from those copies), or (b) primarily for and in connection with specific products or compilations that contain the covered work, unless you entered into that arrangement, or that patent license was granted, prior to 28 March 2007.'),d.k0s(),d.j41(188,"p"),d.EFF(189," Nothing in this License shall be construed as excluding or limiting any implied license or other defenses to infringement that may otherwise be available to you under applicable patent law."),d.k0s(),d.j41(190,"p"),d.EFF(191," 12. No Surrender of Others' Freedom."),d.k0s(),d.j41(192,"p"),d.EFF(193," If conditions are imposed on you (whether by court order, agreement or otherwise) that contradict the conditions of this License, they do not excuse you from the conditions of this License. If you cannot convey a covered work so as to satisfy simultaneously your obligations under this License and any other pertinent obligations, then as a consequence you may not convey it at all. For example, if you agree to terms that obligate you to collect a royalty for further conveying from those to whom you convey the Program, the only way you could satisfy both those terms and this License would be to refrain entirely from conveying the Program."),d.k0s(),d.j41(194,"p"),d.EFF(195," 13. Remote Network Interaction; Use with the GNU General Public License."),d.k0s(),d.j41(196,"p"),d.EFF(197," Notwithstanding any other provision of this License, if you modify the Program, your modified version must prominently offer all users interacting with it remotely through a computer network (if your version supports such interaction) an opportunity to receive the Corresponding Source of your version by providing access to the Corresponding Source from a network server at no charge, through some standard or customary means of facilitating copying of software. This Corresponding Source shall include the Corresponding Source for any work covered by version 3 of the GNU General Public License that is incorporated pursuant to the following paragraph."),d.k0s(),d.j41(198,"p"),d.EFF(199," Notwithstanding any other provision of this License, you have permission to link or combine any covered work with a work licensed under version 3 of the GNU General Public License into a single combined work, and to convey the resulting work. The terms of this License will continue to apply to the part which is the covered work, but the work with which it is combined will remain governed by version 3 of the GNU General Public License."),d.k0s(),d.j41(200,"p"),d.EFF(201," 14. Revised Versions of this License."),d.k0s(),d.j41(202,"p"),d.EFF(203," The Free Software Foundation may publish revised and/or new versions of the GNU Affero General Public License from time to time. Such new versions will be similar in spirit to the present version, but may differ in detail to address new problems or concerns."),d.k0s(),d.j41(204,"p"),d.EFF(205,' Each version is given a distinguishing version number. If the Program specifies that a certain numbered version of the GNU Affero General Public License "or any later version" applies to it, you have the option of following the terms and conditions either of that numbered version or of any later version published by the Free Software Foundation. If the Program does not specify a version number of the GNU Affero General Public License, you may choose any version ever published by the Free Software Foundation.'),d.k0s(),d.j41(206,"p"),d.EFF(207," If the Program specifies that a proxy can decide which future versions of the GNU Affero General Public License can be used, that proxy's public statement of acceptance of a version permanently authorizes you to choose that version for the Program."),d.k0s(),d.j41(208,"p"),d.EFF(209," Later license versions may give you additional or different permissions. However, no additional obligations are imposed on any author or copyright holder as a result of your choosing to follow a later version."),d.k0s(),d.j41(210,"p"),d.EFF(211," 15. Disclaimer of Warranty."),d.k0s(),d.j41(212,"p"),d.EFF(213,' THERE IS NO WARRANTY FOR THE PROGRAM, TO THE EXTENT PERMITTED BY APPLICABLE LAW. EXCEPT WHEN OTHERWISE STATED IN WRITING THE COPYRIGHT HOLDERS AND/OR OTHER PARTIES PROVIDE THE PROGRAM "AS IS" WITHOUT WARRANTY OF ANY KIND, EITHER EXPRESSED OR IMPLIED, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE. THE ENTIRE RISK AS TO THE QUALITY AND PERFORMANCE OF THE PROGRAM IS WITH YOU. SHOULD THE PROGRAM PROVE DEFECTIVE, YOU ASSUME THE COST OF ALL NECESSARY SERVICING, REPAIR OR CORRECTION.'),d.k0s(),d.j41(214,"p"),d.EFF(215," 16. Limitation of Liability."),d.k0s(),d.j41(216,"p"),d.EFF(217," IN NO EVENT UNLESS REQUIRED BY APPLICABLE LAW OR AGREED TO IN WRITING WILL ANY COPYRIGHT HOLDER, OR ANY OTHER PARTY WHO MODIFIES AND/OR CONVEYS THE PROGRAM AS PERMITTED ABOVE, BE LIABLE TO YOU FOR DAMAGES, INCLUDING ANY GENERAL, SPECIAL, INCIDENTAL OR CONSEQUENTIAL DAMAGES ARISING OUT OF THE USE OR INABILITY TO USE THE PROGRAM (INCLUDING BUT NOT LIMITED TO LOSS OF DATA OR DATA BEING RENDERED INACCURATE OR LOSSES SUSTAINED BY YOU OR THIRD PARTIES OR A FAILURE OF THE PROGRAM TO OPERATE WITH ANY OTHER PROGRAMS), EVEN IF SUCH HOLDER OR OTHER PARTY HAS BEEN ADVISED OF THE POSSIBILITY OF SUCH DAMAGES."),d.k0s(),d.j41(218,"p"),d.EFF(219," 17. Interpretation of Sections 15 and 16."),d.k0s(),d.j41(220,"p"),d.EFF(221," If the disclaimer of warranty and limitation of liability provided above cannot be given local legal effect according to their terms, reviewing courts shall apply local law that most closely approximates an absolute waiver of all civil liability in connection with the Program, unless a warranty or assumption of liability accompanies a copy of the Program in return for a fee."),d.k0s(),d.j41(222,"p"),d.EFF(223," END OF TERMS AND CONDITIONS"),d.k0s(),d.j41(224,"p"),d.EFF(225," How to Apply These Terms to Your New Programs"),d.k0s(),d.j41(226,"p"),d.EFF(227," If you develop a new program, and you want it to be of the greatest possible use to the public, the best way to achieve this is to make it free software which everyone can redistribute and change under these terms."),d.k0s(),d.j41(228,"p"),d.EFF(229,' To do so, attach the following notices to the program. It is safest to attach them to the start of each source file to most effectively state the exclusion of warranty; and each file should have at least the "copyright" line and a pointer to where the full notice is found.'),d.k0s(),d.j41(230,"p"),d.EFF(231),d.k0s(),d.j41(232,"p"),d.EFF(233," This program is free software: you can redistribute it and/or modify it under the terms of the GNU Affero General Public License as published by the Free Software Foundation, either version 3 of the License, or (at your option) any later version."),d.k0s(),d.j41(234,"p"),d.EFF(235," This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero General Public License for more details."),d.k0s(),d.j41(236,"p"),d.EFF(237," You should have received a copy of the GNU Affero General Public License along with this program. If not, see "),d.j41(238,"a",5),d.EFF(239,"gnu.org/licenses"),d.k0s(),d.EFF(240,"."),d.k0s(),d.j41(241,"p"),d.EFF(242,"Also add information on how to contact you by electronic and paper mail."),d.k0s(),d.j41(243,"p"),d.EFF(244,' If your software can interact with users remotely through a computer network, you should also make sure that it provides a way for users to get its source. For example, if your program is a web application, its interface could display a "Source" link that leads users to an archive of the code. There are many ways you could offer source, and different solutions will be better for different programs; see section 13 for the specific requirements.'),d.k0s(),d.j41(245,"p"),d.EFF(246,' You should also get your employer (if you work as a programmer) or school, if any, to sign a "copyright disclaimer" for the program, if necessary. For more information on this, and how to apply and follow the GNU AGPL, see '),d.j41(247,"a",5),d.EFF(248,"gnu.org/licenses"),d.k0s(),d.EFF(249,"."),d.k0s()()(),d.j41(250,"div",6)(251,"system-checkbox",7),d.mxI("ngModelChange",(function(e){return d.DH7(t.spiceinstaller.selectedStep.completed,e)||(t.spiceinstaller.selectedStep.completed=e),e})),d.EFF(252,"agree to Terms & Conditions"),d.k0s(),d.j41(253,"button",8),d.bIt("click",(function(){return t.spiceinstaller.jumpSubject.next({from:t.selfStep,to:t.selfStep.prev})})),d.EFF(254,"back"),d.k0s(),d.j41(255,"button",9),d.bIt("click",(function(){return t.spiceinstaller.jumpSubject.next({from:t.selfStep,to:t.selfStep.next})})),d.EFF(256,"next"),d.k0s()()()),2&e&&(d.R7$(231),d.Lme(" one line to give the programs name and a brief idea of what it does Copyright (C) ",t.year," ",t.author,""),d.R7$(20),d.R50("ngModel",t.spiceinstaller.selectedStep.completed),d.R7$(4),d.Y8G("disabled",!t.spiceinstaller.selectedStep.completed))},dependencies:[n.BC,n.vS,F.b,M.f],encapsulation:2})}return SpiceInstallerLicence})();function B(e,t){1&e&&(d.j41(0,"div",12),d.EFF(1,"Input required."),d.k0s())}function $(e,t){1&e&&(d.j41(0,"div",12),d.EFF(1,"Input required."),d.k0s())}function O(e,t){1&e&&(d.j41(0,"div",12),d.EFF(1,"Input required."),d.k0s())}const X=e=>({"slds-has-error":e});let U=(()=>{class SpiceinstallerMySQLi{constructor(e){this.spiceinstaller=e,this.spiceinstaller.db_port||(this.spiceinstaller.db_port="3306"),this.spiceinstaller.collation||(this.spiceinstaller.collation="utf8mb4_general_ci"),this.spiceinstaller.db_user_name||(this.spiceinstaller.db_user_name="root"),this.spiceinstaller.db_host_name||(this.spiceinstaller.db_host_name="127.0.0.1"),this.spiceinstaller.db_name||(this.spiceinstaller.db_name=this.spiceinstaller.systemname.toLowerCase().replace(/\s/g,""))}static#e=this.ɵfac=function(e){return new(e||SpiceinstallerMySQLi)(d.rXU(o.R))};static#t=this.ɵcmp=d.VBU({type:SpiceinstallerMySQLi,selectors:[["spice-installer-mysqli"]],inputs:{selfStep:"selfStep",hostNameCondition:"hostNameCondition",userNameCondition:"userNameCondition",dbNameCondition:"dbNameCondition"},decls:46,vars:18,consts:[[1,"slds-form-element","slds-p-vertical--small",3,"ngClass"],[1,"slds-form-element__label"],[1,"slds-required"],[1,"slds-form-element__control"],["type","text","system-trim-input","",1,"slds-input",3,"ngModel","ngModelChange","change"],["class","slds-form-element__help",4,"ngIf"],[1,"slds-form-element","slds-p-vertical--small"],["type","password","system-trim-input","",1,"slds-input",3,"ngModel","ngModelChange","change"],[1,"slds-select_container"],[1,"slds-select",3,"ngModel","ngModelChange"],["value","utf8mb4_general_ci"],["value","utf8_general_ci"],[1,"slds-form-element__help"]],template:function(e,t){1&e&&(d.j41(0,"div",0)(1,"label",1)(2,"abbr",2),d.EFF(3,"*"),d.k0s(),d.EFF(4,"Host Name"),d.k0s(),d.j41(5,"div",3)(6,"input",4),d.mxI("ngModelChange",(function(e){return d.DH7(t.spiceinstaller.db_host_name,e)||(t.spiceinstaller.db_host_name=e),e})),d.bIt("change",(function(){return t.selfStep.completed=!1})),d.k0s(),d.DNE(7,B,2,0,"div",5),d.k0s()(),d.j41(8,"div",0)(9,"label",1)(10,"abbr",2),d.EFF(11,"*"),d.k0s(),d.EFF(12,"Administrator User Name"),d.k0s(),d.j41(13,"div",3)(14,"input",4),d.mxI("ngModelChange",(function(e){return d.DH7(t.spiceinstaller.db_user_name,e)||(t.spiceinstaller.db_user_name=e),e})),d.bIt("change",(function(){return t.selfStep.completed=!1})),d.k0s(),d.DNE(15,$,2,0,"div",5),d.k0s()(),d.j41(16,"div",6)(17,"label",1),d.nrm(18,"abbr",2),d.EFF(19,"Administrator Password"),d.k0s(),d.j41(20,"div",3)(21,"input",7),d.mxI("ngModelChange",(function(e){return d.DH7(t.spiceinstaller.db_password,e)||(t.spiceinstaller.db_password=e),e})),d.bIt("change",(function(){return t.selfStep.completed=!1})),d.k0s()()(),d.j41(22,"div",6)(23,"label",1),d.nrm(24,"abbr",2),d.EFF(25,"Port"),d.k0s(),d.j41(26,"div",3)(27,"input",4),d.mxI("ngModelChange",(function(e){return d.DH7(t.spiceinstaller.db_port,e)||(t.spiceinstaller.db_port=e),e})),d.bIt("change",(function(){return t.selfStep.completed=!1})),d.k0s()()(),d.j41(28,"div",0)(29,"label",1)(30,"abbr",2),d.EFF(31,"*"),d.k0s(),d.EFF(32,"Database Name"),d.k0s(),d.j41(33,"div",3)(34,"input",4),d.mxI("ngModelChange",(function(e){return d.DH7(t.spiceinstaller.db_name,e)||(t.spiceinstaller.db_name=e),e})),d.bIt("change",(function(){return t.selfStep.completed=!1})),d.k0s(),d.DNE(35,O,2,0,"div",5),d.k0s()(),d.j41(36,"div",6)(37,"label",1),d.EFF(38,"Collation"),d.k0s(),d.j41(39,"div",3)(40,"div",8)(41,"select",9),d.mxI("ngModelChange",(function(e){return d.DH7(t.spiceinstaller.collation,e)||(t.spiceinstaller.collation=e),e})),d.j41(42,"option",10),d.EFF(43,"utf8mb4"),d.k0s(),d.j41(44,"option",11),d.EFF(45,"utf8"),d.k0s()()()()()),2&e&&(d.Y8G("ngClass",d.eq3(12,X,!t.hostNameCondition)),d.R7$(6),d.R50("ngModel",t.spiceinstaller.db_host_name),d.R7$(),d.Y8G("ngIf",!t.hostNameCondition),d.R7$(),d.Y8G("ngClass",d.eq3(14,X,!t.userNameCondition)),d.R7$(6),d.R50("ngModel",t.spiceinstaller.db_user_name),d.R7$(),d.Y8G("ngIf",!t.userNameCondition),d.R7$(6),d.R50("ngModel",t.spiceinstaller.db_password),d.R7$(6),d.R50("ngModel",t.spiceinstaller.db_port),d.R7$(),d.Y8G("ngClass",d.eq3(16,X,!t.dbNameCondition)),d.R7$(6),d.R50("ngModel",t.spiceinstaller.db_name),d.R7$(),d.Y8G("ngIf",!t.dbNameCondition),d.R7$(6),d.R50("ngModel",t.spiceinstaller.collation))},dependencies:[i.YU,i.bT,n.xH,n.y7,n.me,n.wz,n.BC,n.vS,I.D],encapsulation:2})}return SpiceinstallerMySQLi})();function Y(e,t){1&e&&(d.j41(0,"div",8),d.EFF(1,"Input required."),d.k0s())}function N(e,t){1&e&&(d.j41(0,"div",8),d.EFF(1,"Input required."),d.k0s())}function V(e,t){1&e&&(d.j41(0,"div",8),d.EFF(1,"Input required."),d.k0s())}const A=e=>({"slds-has-error":e});let P=(()=>{class SpiceinstallerPostgreSQL{constructor(e){this.spiceinstaller=e}static#e=this.ɵfac=function(e){return new(e||SpiceinstallerPostgreSQL)(d.rXU(o.R))};static#t=this.ɵcmp=d.VBU({type:SpiceinstallerPostgreSQL,selectors:[["spice-installer-pgsql"]],inputs:{selfStep:"selfStep",hostNameCondition:"hostNameCondition",userNameCondition:"userNameCondition",dbNameCondition:"dbNameCondition"},decls:50,vars:19,consts:[[1,"slds-form-element","slds-p-vertical--small",3,"ngClass"],[1,"slds-form-element__label"],[1,"slds-required"],[1,"slds-form-element__control"],["type","text","system-trim-input","",1,"slds-input",3,"ngModel","ngModelChange","change"],["class","slds-form-element__help",4,"ngIf"],[1,"slds-form-element","slds-p-vertical--small"],["type","password","system-trim-input","",1,"slds-input",3,"ngModel","ngModelChange","change"],[1,"slds-form-element__help"]],template:function(e,t){1&e&&(d.j41(0,"div",0)(1,"label",1)(2,"abbr",2),d.EFF(3,"*"),d.k0s(),d.EFF(4,"Host Name"),d.k0s(),d.j41(5,"div",3)(6,"input",4),d.mxI("ngModelChange",(function(e){return d.DH7(t.spiceinstaller.db_host_name,e)||(t.spiceinstaller.db_host_name=e),e})),d.bIt("change",(function(){return t.selfStep.completed=!1})),d.k0s(),d.DNE(7,Y,2,0,"div",5),d.k0s()(),d.j41(8,"div",0)(9,"label",1)(10,"abbr",2),d.EFF(11,"*"),d.k0s(),d.EFF(12,"Administrator User Name"),d.k0s(),d.j41(13,"div",3)(14,"input",4),d.mxI("ngModelChange",(function(e){return d.DH7(t.spiceinstaller.db_user_name,e)||(t.spiceinstaller.db_user_name=e),e})),d.bIt("change",(function(){return t.selfStep.completed=!1})),d.k0s(),d.DNE(15,N,2,0,"div",5),d.k0s()(),d.j41(16,"div",6)(17,"label",1),d.nrm(18,"abbr",2),d.EFF(19,"Administrator Password"),d.k0s(),d.j41(20,"div",3)(21,"input",7),d.mxI("ngModelChange",(function(e){return d.DH7(t.spiceinstaller.db_password,e)||(t.spiceinstaller.db_password=e),e})),d.bIt("change",(function(){return t.selfStep.completed=!1})),d.k0s()()(),d.j41(22,"div",6)(23,"label",1),d.nrm(24,"abbr",2),d.EFF(25,"Port"),d.k0s(),d.j41(26,"div",3)(27,"input",4),d.mxI("ngModelChange",(function(e){return d.DH7(t.spiceinstaller.db_port,e)||(t.spiceinstaller.db_port=e),e})),d.bIt("change",(function(){return t.selfStep.completed=!1})),d.k0s()()(),d.j41(28,"div",0)(29,"label",1)(30,"abbr",2),d.EFF(31,"*"),d.k0s(),d.EFF(32,"Database Name"),d.k0s(),d.j41(33,"div",3)(34,"input",4),d.mxI("ngModelChange",(function(e){return d.DH7(t.spiceinstaller.db_name,e)||(t.spiceinstaller.db_name=e),e})),d.bIt("change",(function(){return t.selfStep.completed=!1})),d.k0s(),d.DNE(35,V,2,0,"div",5),d.k0s()(),d.j41(36,"div",6)(37,"label",1)(38,"abbr",2),d.EFF(39,"*"),d.k0s(),d.EFF(40,"Collation"),d.k0s(),d.j41(41,"div",3)(42,"input",4),d.mxI("ngModelChange",(function(e){return d.DH7(t.spiceinstaller.lc_collate,e)||(t.spiceinstaller.lc_collate=e),e})),d.bIt("change",(function(){return t.selfStep.completed=!1})),d.k0s()()(),d.j41(43,"div",6)(44,"label",1)(45,"abbr",2),d.EFF(46,"*"),d.k0s(),d.EFF(47,"Character Classification"),d.k0s(),d.j41(48,"div",3)(49,"input",4),d.mxI("ngModelChange",(function(e){return d.DH7(t.spiceinstaller.lc_ctype,e)||(t.spiceinstaller.lc_ctype=e),e})),d.bIt("change",(function(){return t.selfStep.completed=!1})),d.k0s()()()),2&e&&(d.Y8G("ngClass",d.eq3(13,A,!t.hostNameCondition)),d.R7$(6),d.R50("ngModel",t.spiceinstaller.db_host_name),d.R7$(),d.Y8G("ngIf",!t.hostNameCondition),d.R7$(),d.Y8G("ngClass",d.eq3(15,A,!t.userNameCondition)),d.R7$(6),d.R50("ngModel",t.spiceinstaller.db_user_name),d.R7$(),d.Y8G("ngIf",!t.userNameCondition),d.R7$(6),d.R50("ngModel",t.spiceinstaller.db_password),d.R7$(6),d.R50("ngModel",t.spiceinstaller.db_port),d.R7$(),d.Y8G("ngClass",d.eq3(17,A,!t.dbNameCondition)),d.R7$(6),d.R50("ngModel",t.spiceinstaller.db_name),d.R7$(),d.Y8G("ngIf",!t.dbNameCondition),d.R7$(7),d.R50("ngModel",t.spiceinstaller.lc_collate),d.R7$(7),d.R50("ngModel",t.spiceinstaller.lc_ctype))},dependencies:[i.YU,i.bT,n.me,n.BC,n.vS,I.D],encapsulation:2})}return SpiceinstallerPostgreSQL})();function z(e,t){1&e&&(d.j41(0,"div",12),d.EFF(1,"Input required."),d.k0s())}function H(e,t){1&e&&(d.j41(0,"div",12),d.EFF(1,"Input required."),d.k0s())}function q(e,t){1&e&&(d.j41(0,"div",12),d.EFF(1,"Input required."),d.k0s())}const J=e=>({"slds-has-error":e});let W=(()=>{class SpiceinstallerOCI8{constructor(e){this.spiceinstaller=e}static#e=this.ɵfac=function(e){return new(e||SpiceinstallerOCI8)(d.rXU(o.R))};static#t=this.ɵcmp=d.VBU({type:SpiceinstallerOCI8,selectors:[["spice-installer-oci8"]],inputs:{selfStep:"selfStep",hostNameCondition:"hostNameCondition",userNameCondition:"userNameCondition",dbNameCondition:"dbNameCondition"},decls:53,vars:19,consts:[[1,"slds-form-element","slds-p-vertical--small",3,"ngClass"],[1,"slds-form-element__label"],[1,"slds-required"],[1,"slds-form-element__control"],["type","text","system-trim-input","",1,"slds-input",3,"ngModel","ngModelChange","change"],["class","slds-form-element__help",4,"ngIf"],[1,"slds-form-element","slds-p-vertical--small"],["type","password","system-trim-input","",1,"slds-input",3,"ngModel","ngModelChange","change"],[1,"slds-select_container"],[1,"slds-select",3,"ngModel","ngModelChange","change"],["value","utf8mb4_general_ci"],["value","utf8_general_ci"],[1,"slds-form-element__help"]],template:function(e,t){1&e&&(d.j41(0,"div",0)(1,"label",1)(2,"abbr",2),d.EFF(3,"*"),d.k0s(),d.EFF(4,"Host Name"),d.k0s(),d.j41(5,"div",3)(6,"input",4),d.mxI("ngModelChange",(function(e){return d.DH7(t.spiceinstaller.db_host_name,e)||(t.spiceinstaller.db_host_name=e),e})),d.bIt("change",(function(){return t.selfStep.completed=!1})),d.k0s(),d.DNE(7,z,2,0,"div",5),d.k0s()(),d.j41(8,"div",0)(9,"label",1)(10,"abbr",2),d.EFF(11,"*"),d.k0s(),d.EFF(12,"Administrator User Name"),d.k0s(),d.j41(13,"div",3)(14,"input",4),d.mxI("ngModelChange",(function(e){return d.DH7(t.spiceinstaller.db_user_name,e)||(t.spiceinstaller.db_user_name=e),e})),d.bIt("change",(function(){return t.selfStep.completed=!1})),d.k0s(),d.DNE(15,H,2,0,"div",5),d.k0s()(),d.j41(16,"div",6)(17,"label",1),d.nrm(18,"abbr",2),d.EFF(19,"Administrator Password"),d.k0s(),d.j41(20,"div",3)(21,"input",7),d.mxI("ngModelChange",(function(e){return d.DH7(t.spiceinstaller.db_password,e)||(t.spiceinstaller.db_password=e),e})),d.bIt("change",(function(){return t.selfStep.completed=!1})),d.k0s()()(),d.j41(22,"div",6)(23,"label",1),d.nrm(24,"abbr",2),d.EFF(25,"Port"),d.k0s(),d.j41(26,"div",3)(27,"input",4),d.mxI("ngModelChange",(function(e){return d.DH7(t.spiceinstaller.db_port,e)||(t.spiceinstaller.db_port=e),e})),d.bIt("change",(function(){return t.selfStep.completed=!1})),d.k0s()()(),d.j41(28,"div",0)(29,"label",1)(30,"abbr",2),d.EFF(31,"*"),d.k0s(),d.EFF(32,"Database Name"),d.k0s(),d.j41(33,"div",3)(34,"input",4),d.mxI("ngModelChange",(function(e){return d.DH7(t.spiceinstaller.db_name,e)||(t.spiceinstaller.db_name=e),e})),d.bIt("change",(function(){return t.selfStep.completed=!1})),d.k0s(),d.DNE(35,q,2,0,"div",5),d.k0s()(),d.j41(36,"div",6)(37,"label",1)(38,"abbr",2),d.EFF(39,"*"),d.k0s(),d.EFF(40,"Database Schema"),d.k0s(),d.j41(41,"div",3)(42,"input",4),d.mxI("ngModelChange",(function(e){return d.DH7(t.spiceinstaller.db_schema,e)||(t.spiceinstaller.db_schema=e),e})),d.bIt("change",(function(){return t.selfStep.completed=!1})),d.k0s()()(),d.j41(43,"div",6)(44,"label",1),d.EFF(45,"Collation"),d.k0s(),d.j41(46,"div",3)(47,"div",8)(48,"select",9),d.mxI("ngModelChange",(function(e){return d.DH7(t.spiceinstaller.collation,e)||(t.spiceinstaller.collation=e),e})),d.bIt("change",(function(){return t.selfStep.completed=!1})),d.j41(49,"option",10),d.EFF(50,"utf8mb4"),d.k0s(),d.j41(51,"option",11),d.EFF(52,"utf8"),d.k0s()()()()()),2&e&&(d.Y8G("ngClass",d.eq3(13,J,!t.hostNameCondition)),d.R7$(6),d.R50("ngModel",t.spiceinstaller.db_host_name),d.R7$(),d.Y8G("ngIf",!t.hostNameCondition),d.R7$(),d.Y8G("ngClass",d.eq3(15,J,!t.userNameCondition)),d.R7$(6),d.R50("ngModel",t.spiceinstaller.db_user_name),d.R7$(),d.Y8G("ngIf",!t.userNameCondition),d.R7$(6),d.R50("ngModel",t.spiceinstaller.db_password),d.R7$(6),d.R50("ngModel",t.spiceinstaller.db_port),d.R7$(),d.Y8G("ngClass",d.eq3(17,J,!t.dbNameCondition)),d.R7$(6),d.R50("ngModel",t.spiceinstaller.db_name),d.R7$(),d.Y8G("ngIf",!t.dbNameCondition),d.R7$(7),d.R50("ngModel",t.spiceinstaller.db_schema),d.R7$(6),d.R50("ngModel",t.spiceinstaller.collation))},dependencies:[i.YU,i.bT,n.xH,n.y7,n.me,n.wz,n.BC,n.vS,I.D],encapsulation:2})}return SpiceinstallerOCI8})();function K(e,t){if(1&e&&(d.j41(0,"option",12),d.EFF(1),d.k0s()),2&e){const e=t.$implicit;d.FS9("value",e.extension),d.R7$(),d.JRh(e.name)}}function Q(e,t){if(1&e&&(d.j41(0,"div"),d.nrm(1,"spice-installer-mysqli",13),d.k0s()),2&e){const e=d.XpG();d.R7$(),d.Y8G("selfStep",e.selfStep)("dbNameCondition",e.dbNameCondition)("hostNameCondition",e.hostNameCondition)("userNameCondition",e.userNameCondition)}}function Z(e,t){if(1&e&&(d.j41(0,"div"),d.nrm(1,"spice-installer-mysqli",13),d.k0s()),2&e){const e=d.XpG();d.R7$(),d.Y8G("selfStep",e.selfStep)("dbNameCondition",e.dbNameCondition)("hostNameCondition",e.hostNameCondition)("userNameCondition",e.userNameCondition)}}function ee(e,t){if(1&e&&(d.j41(0,"div"),d.nrm(1,"spice-installer-pgsql",13),d.k0s()),2&e){const e=d.XpG();d.R7$(),d.Y8G("selfStep",e.selfStep)("dbNameCondition",e.dbNameCondition)("hostNameCondition",e.hostNameCondition)("userNameCondition",e.userNameCondition)}}function te(e,t){if(1&e&&(d.j41(0,"div"),d.nrm(1,"spice-installer-oci8",13),d.k0s()),2&e){const e=d.XpG();d.R7$(),d.Y8G("selfStep",e.selfStep)("dbNameCondition",e.dbNameCondition)("hostNameCondition",e.hostNameCondition)("userNameCondition",e.userNameCondition)}}let se=(()=>{class SpiceInstallerDatabase{constructor(e,t,s){this.toast=e,this.http=t,this.spiceinstaller=s,this.hostNameCondition=!0,this.userNameCondition=!0,this.dbNameCondition=!0,this.loading=!1,this.charset="",1==s.dbdrivers.length&&(s.db_type=s.dbdrivers[0].extension),this.spiceinstaller.jumpSubject.subscribe((e=>{e.from===this.selfStep&&(this.selfStep.completed||e.to?.pos<this.selfStep.pos?this.spiceinstaller.jump(e.to):this.checkDB())}))}checkDB(){switch(this.spiceinstaller.db_type){case"mysql":case"mysqli":this.spiceinstaller.db_host_instance="SQLEXPRESS",this.spiceinstaller.db_manager="MysqliManager";break;case"pgsql":this.spiceinstaller.db_manager="PostgreSQLManager";break;case"mssql":this.spiceinstaller.db_manager="SqlsrvManager";break;case"oci8":this.spiceinstaller.db_host_instance="SQLEXPRESS",this.spiceinstaller.db_manager="OCI8Manager"}switch(this.spiceinstaller.collation){case"utf8mb4_general_ci":this.charset="utf8mb4";break;case"utf8_general_ci":this.charset="utf8"}let e={db_host_name:this.spiceinstaller.db_host_name,db_host_instance:this.spiceinstaller.db_host_instance,db_user_name:this.spiceinstaller.db_user_name,db_password:this.spiceinstaller.db_password,db_name:this.spiceinstaller.db_name,db_type:this.spiceinstaller.db_type,db_port:this.spiceinstaller.db_port,db_manager:this.spiceinstaller.db_manager,db_schema:this.spiceinstaller.db_schema,lc_collate:this.spiceinstaller.lc_collate,lc_ctype:this.spiceinstaller.lc_ctype};this.hostNameCondition=this.spiceinstaller.db_host_name.length>0,this.userNameCondition=this.spiceinstaller.db_user_name.length>0,this.dbNameCondition=this.spiceinstaller.db_name.length>0,this.hostNameCondition&&this.userNameCondition&&this.dbNameCondition&&(this.loading=!0,this.http.post(`${this.spiceinstaller.systemurl}/install/checkdb`,e).subscribe((e=>{this.loading=!1;let t=e;if(t.success)this.spiceinstaller.configObject.database=t.config,this.spiceinstaller.configObject.dboptions={persistance:this.spiceinstaller.persistent,autofree:this.spiceinstaller.autofree,debug:this.spiceinstaller.debug,ssl:this.spiceinstaller.ssl,collation:this.spiceinstaller.collation,charset:this.charset},this.selfStep.completed=!0,this.spiceinstaller.jumpSubject.next({from:this.selfStep,to:this.selfStep.next});else for(let e in t.errors)this.toast.sendAlert("Error: "+t.errors[e],"error")}),(e=>{if(this.loading=!1,500===e.status)this.toast.sendAlert(e.message,"error")})))}static#e=this.ɵfac=function(e){return new(e||SpiceInstallerDatabase)(d.rXU(y.o),d.rXU(v.Qq),d.rXU(o.R))};static#t=this.ɵcmp=d.VBU({type:SpiceInstallerDatabase,selectors:[["spice-installer-database"]],inputs:{selfStep:"selfStep"},decls:19,vars:8,consts:[[1,"slds-p-horizontal_medium",3,"system-overlay-loading-spinner"],[1,"slds-text-heading--medium","slds-m-bottom_medium"],[1,"slds-form-element","slds-p-vertical--small"],[1,"slds-form-element__label"],[1,"slds-form-element__control"],[1,"slds-select_container"],[1,"slds-select",3,"disabled","ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[4,"ngIf"],[1,"slds-p-vertical--small","slds-text-align--right"],[1,"slds-button","slds-button--neutral","slds-col_bump-left",3,"click"],[1,"slds-button","slds-button--brand",3,"click"],[3,"value"],[3,"selfStep","dbNameCondition","hostNameCondition","userNameCondition"]],template:function(e,t){1&e&&(d.j41(0,"div",0)(1,"h2",1),d.EFF(2," Database Configuration "),d.k0s(),d.j41(3,"div",2)(4,"label",3),d.EFF(5,"Database Type"),d.k0s(),d.j41(6,"div",4)(7,"div",5)(8,"select",6),d.mxI("ngModelChange",(function(e){return d.DH7(t.spiceinstaller.db_type,e)||(t.spiceinstaller.db_type=e),e})),d.DNE(9,K,2,2,"option",7),d.k0s()()()(),d.DNE(10,Q,2,4,"div",8)(11,Z,2,4,"div",8)(12,ee,2,4,"div",8)(13,te,2,4,"div",8),d.j41(14,"div",9)(15,"button",10),d.bIt("click",(function(){return t.spiceinstaller.jumpSubject.next({from:t.selfStep,to:t.selfStep.prev})})),d.EFF(16,"back"),d.k0s(),d.j41(17,"button",11),d.bIt("click",(function(){return t.checkDB()})),d.EFF(18,"next"),d.k0s()()()),2&e&&(d.Y8G("system-overlay-loading-spinner",t.loading),d.R7$(8),d.Y8G("disabled",t.spiceinstaller.dbdrivers.length<2),d.R50("ngModel",t.spiceinstaller.db_type),d.R7$(),d.Y8G("ngForOf",t.spiceinstaller.dbdrivers),d.R7$(),d.Y8G("ngIf","mysql"==t.spiceinstaller.db_type),d.R7$(),d.Y8G("ngIf","mssql"==t.spiceinstaller.db_type),d.R7$(),d.Y8G("ngIf","pgsql"==t.spiceinstaller.db_type),d.R7$(),d.Y8G("ngIf","oci8"==t.spiceinstaller.db_type))},dependencies:[i.Sq,i.bT,n.xH,n.y7,n.wz,n.BC,n.vS,w.M,U,P,W],encapsulation:2})}return SpiceInstallerDatabase})();function ie(e,t){1&e&&(d.j41(0,"div",15),d.EFF(1,"Input required."),d.k0s())}function ne(e,t){1&e&&(d.j41(0,"div",15),d.EFF(1,"Input required."),d.k0s())}function le(e,t){1&e&&(d.j41(0,"div",15),d.EFF(1,"Input required."),d.k0s())}const oe=e=>({"slds-has-error":e});let ae=(()=>{class SpiceInstallerFTS{constructor(e,t,s){this.toast=e,this.http=t,this.spiceinstaller=s,this.serverCondition=!0,this.portCondition=!0,this.prefixCondition=!0,this.loading=!1,this.protocolOptions=[{type:"http",name:"HTTP"},{type:"https",name:"HTTPS"}],this.spiceinstaller.prefix||(this.spiceinstaller.prefix=this.spiceinstaller.db_name+"_"),this.spiceinstaller.server||(this.spiceinstaller.server="127.0.0.1"),this.spiceinstaller.jumpSubject.subscribe((e=>{e.from===this.selfStep&&(this.selfStep.completed||e.to?.pos<this.selfStep.pos?this.spiceinstaller.jump(e.to):this.checkFTS())}))}checkFTS(){let e={server:this.spiceinstaller.server,port:this.spiceinstaller.port,prefix:this.spiceinstaller.prefix,username:this.spiceinstaller.elasticUser,password:this.spiceinstaller.elasticpassword,https:this.spiceinstaller.elastichttps,sslverify:this.spiceinstaller.elasticSSLVerify,loglevel:1,schedulerpackagesize:2500,protocol:this.spiceinstaller.transferProtocol};this.serverCondition=this.spiceinstaller.server.length>0,this.portCondition=this.spiceinstaller.port.length>0,this.prefixCondition=this.spiceinstaller.prefix.length>0,this.serverCondition&&this.portCondition&&this.prefixCondition&&(this.loading=!0,this.http.post(`${this.spiceinstaller.systemurl}/install/checkfts`,e).subscribe((e=>{this.loading=!1;let t=e;if(t.success)this.selfStep.completed=!0,this.spiceinstaller.configObject.fts=t.config,this.spiceinstaller.jumpSubject.next({from:this.selfStep,to:this.selfStep.next});else for(let e in t.errors)this.toast.sendAlert("Error with: "+t.errors[e],"error")})))}static#e=this.ɵfac=function(e){return new(e||SpiceInstallerFTS)(d.rXU(y.o),d.rXU(v.Qq),d.rXU(o.R))};static#t=this.ɵcmp=d.VBU({type:SpiceInstallerFTS,selectors:[["spice-installer-fts"]],inputs:{selfStep:"selfStep"},decls:50,vars:20,consts:[[1,"slds-p-horizontal_medium",3,"system-overlay-loading-spinner"],[1,"slds-text-heading--medium","slds-m-bottom_medium"],[1,"slds-form-element","slds-p-vertical--small"],[1,"slds-form-element__control"],[3,"ngModel","ngModelChange"],[3,"disabled","ngModel","ngModelChange"],[1,"slds-form-element","slds-p-vertical--small",3,"ngClass"],[1,"slds-form-element__label"],[1,"slds-required"],["type","text","system-trim-input","",1,"slds-input",3,"ngModel","ngModelChange"],["class","slds-form-element__help",4,"ngIf"],["type","password","system-trim-input","",1,"slds-input",3,"ngModel","ngModelChange"],[1,"slds-p-vertical--small","slds-text-align--right"],[1,"slds-button","slds-button--neutral","slds-col_bump-left",3,"click"],[1,"slds-button","slds-button--brand",3,"click"],[1,"slds-form-element__help"]],template:function(e,t){1&e&&(d.j41(0,"div",0)(1,"h2",1),d.EFF(2," FTS Configuration "),d.k0s(),d.j41(3,"div",2)(4,"div",3)(5,"system-checkbox",4),d.mxI("ngModelChange",(function(e){return d.DH7(t.spiceinstaller.elastichttps,e)||(t.spiceinstaller.elastichttps=e),e})),d.EFF(6,"use https"),d.k0s()()(),d.j41(7,"div",2)(8,"div",3)(9,"system-checkbox",5),d.mxI("ngModelChange",(function(e){return d.DH7(t.spiceinstaller.elasticSSLVerify,e)||(t.spiceinstaller.elasticSSLVerify=e),e})),d.EFF(10,"SSL verify"),d.k0s()()(),d.j41(11,"div",6)(12,"label",7)(13,"abbr",8),d.EFF(14,"*"),d.k0s(),d.EFF(15,"Server"),d.k0s(),d.j41(16,"div",3)(17,"input",9),d.mxI("ngModelChange",(function(e){return d.DH7(t.spiceinstaller.server,e)||(t.spiceinstaller.server=e),e})),d.k0s(),d.DNE(18,ie,2,0,"div",10),d.k0s()(),d.j41(19,"div",6)(20,"label",7)(21,"abbr",8),d.EFF(22,"*"),d.k0s(),d.EFF(23,"Port"),d.k0s(),d.j41(24,"div",3)(25,"input",9),d.mxI("ngModelChange",(function(e){return d.DH7(t.spiceinstaller.port,e)||(t.spiceinstaller.port=e),e})),d.k0s(),d.DNE(26,ne,2,0,"div",10),d.k0s()(),d.j41(27,"div",6)(28,"label",7)(29,"abbr",8),d.EFF(30,"*"),d.k0s(),d.EFF(31,"Prefix"),d.k0s(),d.j41(32,"div",3)(33,"input",9),d.mxI("ngModelChange",(function(e){return d.DH7(t.spiceinstaller.prefix,e)||(t.spiceinstaller.prefix=e),e})),d.k0s(),d.DNE(34,le,2,0,"div",10),d.k0s()(),d.j41(35,"div",2)(36,"label",7),d.EFF(37,"User"),d.k0s(),d.j41(38,"div",3)(39,"input",9),d.mxI("ngModelChange",(function(e){return d.DH7(t.spiceinstaller.elasticUser,e)||(t.spiceinstaller.elasticUser=e),e})),d.k0s()()(),d.j41(40,"div",2)(41,"label",7),d.EFF(42,"Password"),d.k0s(),d.j41(43,"div",3)(44,"input",11),d.mxI("ngModelChange",(function(e){return d.DH7(t.spiceinstaller.elasticpassword,e)||(t.spiceinstaller.elasticpassword=e),e})),d.k0s()()(),d.j41(45,"div",12)(46,"button",13),d.bIt("click",(function(){return t.spiceinstaller.jumpSubject.next({from:t.selfStep,to:t.selfStep.prev})})),d.EFF(47,"back"),d.k0s(),d.j41(48,"button",14),d.bIt("click",(function(){return t.checkFTS()})),d.EFF(49,"next"),d.k0s()()()),2&e&&(d.Y8G("system-overlay-loading-spinner",t.loading),d.R7$(5),d.R50("ngModel",t.spiceinstaller.elastichttps),d.R7$(4),d.R50("ngModel",t.spiceinstaller.elasticSSLVerify),d.R7$(2),d.Y8G("ngClass",d.eq3(14,oe,!t.serverCondition)),d.R7$(6),d.R50("ngModel",t.spiceinstaller.server),d.R7$(),d.Y8G("ngIf",!t.serverCondition),d.R7$(),d.Y8G("ngClass",d.eq3(16,oe,!t.portCondition)),d.R7$(6),d.R50("ngModel",t.spiceinstaller.port),d.R7$(),d.Y8G("ngIf",!t.portCondition),d.R7$(),d.Y8G("ngClass",d.eq3(18,oe,!t.prefixCondition)),d.R7$(6),d.R50("ngModel",t.spiceinstaller.prefix),d.R7$(),d.Y8G("ngIf",!t.prefixCondition),d.R7$(5),d.R50("ngModel",t.spiceinstaller.elasticUser),d.R7$(5),d.R50("ngModel",t.spiceinstaller.elasticpassword))},dependencies:[i.YU,i.bT,n.me,n.BC,n.vS,I.D,w.M,M.f],encapsulation:2})}return SpiceInstallerFTS})();function re(e,t){1&e&&(d.j41(0,"div",14),d.EFF(1,"Input required."),d.k0s())}function de(e,t){1&e&&(d.j41(0,"div",14),d.EFF(1,"Password guideline: One uppercase character, one lowercase character, one digit, 6 characters."),d.k0s())}function ce(e,t){1&e&&(d.j41(0,"div",14),d.EFF(1,"Repeated Password doesn´t match."),d.k0s())}function ue(e,t){1&e&&(d.j41(0,"div",14),d.EFF(1,"Input required."),d.k0s())}function me(e,t){1&e&&(d.j41(0,"div",14),d.EFF(1,"Input required."),d.k0s())}const he=e=>({"slds-has-error":e});let ge=(()=>{class SpiceInstallerCredentials{constructor(e){this.spiceinstaller=e,this.usernameCondition=!0,this.passwordCondition=!0,this.rpPasswordCondition=!0,this.surnameCondition=!0,this.emailCondition=!0,this.pwRegexp=new RegExp("(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.{6,})"),this.spiceinstaller.jumpSubject.subscribe((e=>{e.from===this.selfStep&&(this.selfStep.completed||e.to?.pos<this.selfStep.pos?this.spiceinstaller.jump(e.to):this.saveUser())}))}saveUser(){this.usernameCondition=this.spiceinstaller.username.length>0,this.passwordCondition=this.spiceinstaller.password.length>0&&this.pwRegexp.test(this.spiceinstaller.password),this.rpPasswordCondition=this.spiceinstaller.rpPassword==this.spiceinstaller.password,this.surnameCondition=this.spiceinstaller.surname.length>0,this.emailCondition=this.spiceinstaller.email.length>0,this.usernameCondition&&this.passwordCondition&&this.rpPasswordCondition&&this.surnameCondition&&this.emailCondition&&(this.spiceinstaller.configObject.credentials={username:this.spiceinstaller.username,password:this.spiceinstaller.password,firstname:this.spiceinstaller.firstname,surname:this.spiceinstaller.surname,email:this.spiceinstaller.email},this.spiceinstaller.selectedStep.completed=!0,this.spiceinstaller.jumpSubject.next({from:this.selfStep,to:this.selfStep.next}))}static#e=this.ɵfac=function(e){return new(e||SpiceInstallerCredentials)(d.rXU(o.R))};static#t=this.ɵcmp=d.VBU({type:SpiceInstallerCredentials,selectors:[["spice-installer-credentials"]],inputs:{selfStep:"selfStep"},decls:54,vars:26,consts:[[1,"slds-p-horizontal--medium"],[1,"slds-text-heading--medium","slds-m-bottom_medium"],[1,"slds-form-element","slds-p-vertical--small",3,"ngClass"],[1,"slds-form-element__label"],[1,"slds-required"],[1,"slds-form-element__control"],["type","text","system-trim-input","",1,"slds-input",3,"ngModel","ngModelChange","change"],["class","slds-form-element__help",4,"ngIf"],["type","password","system-trim-input","",1,"slds-input",3,"ngModel","ngModelChange","change"],["type","password","system-trim-input","",1,"slds-input",3,"ngModel","ngModelChange"],[1,"slds-form-element","slds-p-vertical--small"],[1,"slds-p-vertical--small","slds-text-align--right"],[1,"slds-button","slds-button--neutral","slds-col_bump-left",3,"click"],[1,"slds-button","slds-button--brand",3,"click"],[1,"slds-form-element__help"]],template:function(e,t){1&e&&(d.j41(0,"div",0)(1,"h2",1),d.EFF(2," CRM User Credentials "),d.k0s(),d.j41(3,"div",2)(4,"label",3)(5,"abbr",4),d.EFF(6,"*"),d.k0s(),d.EFF(7,"User Name"),d.k0s(),d.j41(8,"div",5)(9,"input",6),d.mxI("ngModelChange",(function(e){return d.DH7(t.spiceinstaller.username,e)||(t.spiceinstaller.username=e),e})),d.bIt("change",(function(){return t.selfStep.completed=!1})),d.k0s(),d.DNE(10,re,2,0,"div",7),d.k0s()(),d.j41(11,"div",2)(12,"label",3)(13,"abbr",4),d.EFF(14,"*"),d.k0s(),d.EFF(15,"Password"),d.k0s(),d.j41(16,"div",5)(17,"input",8),d.mxI("ngModelChange",(function(e){return d.DH7(t.spiceinstaller.password,e)||(t.spiceinstaller.password=e),e})),d.bIt("change",(function(){return t.selfStep.completed=!1,t.spiceinstaller.rpPassword=""})),d.k0s(),d.DNE(18,de,2,0,"div",7),d.k0s()(),d.j41(19,"div",2)(20,"label",3)(21,"abbr",4),d.EFF(22,"*"),d.k0s(),d.EFF(23,"Repeat Password"),d.k0s(),d.j41(24,"div",5)(25,"input",9),d.mxI("ngModelChange",(function(e){return d.DH7(t.spiceinstaller.rpPassword,e)||(t.spiceinstaller.rpPassword=e),e})),d.k0s(),d.DNE(26,ce,2,0,"div",7),d.k0s()(),d.j41(27,"div",10)(28,"label",3),d.nrm(29,"abbr",4),d.EFF(30,"First Name"),d.k0s(),d.j41(31,"div",5)(32,"input",6),d.mxI("ngModelChange",(function(e){return d.DH7(t.spiceinstaller.firstname,e)||(t.spiceinstaller.firstname=e),e})),d.bIt("change",(function(){return t.selfStep.completed=!1})),d.k0s()()(),d.j41(33,"div",2)(34,"label",3)(35,"abbr",4),d.EFF(36,"*"),d.k0s(),d.EFF(37,"Last Name"),d.k0s(),d.j41(38,"div",5)(39,"input",6),d.mxI("ngModelChange",(function(e){return d.DH7(t.spiceinstaller.surname,e)||(t.spiceinstaller.surname=e),e})),d.bIt("change",(function(){return t.selfStep.completed=!1})),d.k0s(),d.DNE(40,ue,2,0,"div",7),d.k0s()(),d.j41(41,"div",2)(42,"label",3)(43,"abbr",4),d.EFF(44,"*"),d.k0s(),d.EFF(45,"Email"),d.k0s(),d.j41(46,"div",5)(47,"input",6),d.mxI("ngModelChange",(function(e){return d.DH7(t.spiceinstaller.email,e)||(t.spiceinstaller.email=e),e})),d.bIt("change",(function(){return t.selfStep.completed=!1})),d.k0s(),d.DNE(48,me,2,0,"div",7),d.k0s()(),d.j41(49,"div",11)(50,"button",12),d.bIt("click",(function(){return t.spiceinstaller.jumpSubject.next({from:t.selfStep,to:t.selfStep.prev})})),d.EFF(51,"back"),d.k0s(),d.j41(52,"button",13),d.bIt("click",(function(){return t.saveUser()})),d.EFF(53,"next"),d.k0s()()()),2&e&&(d.R7$(3),d.Y8G("ngClass",d.eq3(16,he,!t.usernameCondition)),d.R7$(6),d.R50("ngModel",t.spiceinstaller.username),d.R7$(),d.Y8G("ngIf",!t.usernameCondition),d.R7$(),d.Y8G("ngClass",d.eq3(18,he,!t.passwordCondition)),d.R7$(6),d.R50("ngModel",t.spiceinstaller.password),d.R7$(),d.Y8G("ngIf",!t.passwordCondition),d.R7$(),d.Y8G("ngClass",d.eq3(20,he,!t.rpPasswordCondition)),d.R7$(6),d.R50("ngModel",t.spiceinstaller.rpPassword),d.R7$(),d.Y8G("ngIf",!t.rpPasswordCondition),d.R7$(6),d.R50("ngModel",t.spiceinstaller.firstname),d.R7$(),d.Y8G("ngClass",d.eq3(22,he,!t.surnameCondition)),d.R7$(6),d.R50("ngModel",t.spiceinstaller.surname),d.R7$(),d.Y8G("ngIf",!t.surnameCondition),d.R7$(),d.Y8G("ngClass",d.eq3(24,he,!t.emailCondition)),d.R7$(6),d.R50("ngModel",t.spiceinstaller.email),d.R7$(),d.Y8G("ngIf",!t.emailCondition))},dependencies:[i.YU,i.bT,n.me,n.BC,n.vS,I.D],encapsulation:2})}return SpiceInstallerCredentials})();var pe=s(17427);function fe(e,t){if(1&e&&(d.j41(0,"option",21),d.EFF(1),d.k0s()),2&e){const e=t.$implicit;d.Y8G("ngValue",e.language_code),d.R7$(),d.JRh(e.language_name)}}function be(e,t){if(1&e&&(d.j41(0,"option",22),d.EFF(1),d.k0s()),2&e){const e=t.$implicit;d.Y8G("value",e.value),d.R7$(),d.SpI(" ",e.name," ")}}function ye(e,t){if(1&e&&(d.j41(0,"option",22),d.EFF(1),d.k0s()),2&e){const e=t.$implicit;d.Y8G("value",e.value),d.R7$(),d.SpI(" ",e.name," ")}}function ve(e,t){if(1&e&&(d.j41(0,"option",23),d.EFF(1),d.k0s()),2&e){const e=t.$implicit;d.Y8G("value",e)("selected",2==e),d.R7$(),d.SpI(" ",e," ")}}function _e(e,t){if(1&e&&(d.j41(0,"option",21),d.EFF(1),d.k0s()),2&e){const e=t.$implicit;d.Y8G("ngValue",e),d.R7$(),d.SpI(" ",e.show," ")}}function ke(e,t){if(1&e&&(d.j41(0,"option",22),d.EFF(1),d.k0s()),2&e){const e=t.$implicit;d.Y8G("value",e.key),d.R7$(),d.SpI(" ",e.value," ")}}function Re(e,t){if(1&e&&(d.j41(0,"option",22),d.EFF(1),d.k0s()),2&e){const e=t.$implicit;d.Y8G("value",e),d.R7$(),d.SpI(" ",e," ")}}function Ie(e,t){if(1&e&&(d.j41(0,"option",22),d.EFF(1),d.k0s()),2&e){const e=t.$implicit;d.Y8G("value",e),d.R7$(),d.SpI(" ",e," ")}}function xe(e,t){if(1&e&&(d.j41(0,"option",22),d.EFF(1),d.k0s()),2&e){const e=t.$implicit;d.Y8G("value",e),d.R7$(),d.SpI(" ",e," ")}}function je(e,t){if(1&e&&(d.j41(0,"option",22),d.EFF(1),d.k0s()),2&e){const e=t.$implicit;d.Y8G("value",e),d.R7$(),d.SpI(" ",e," ")}}let Ge=(()=>{class SpiceInstallerSetPreferences{get numberDelimitation(){const e=this.numberDelimitationsList.find((e=>e.dec_sep==this.spiceinstaller.configObject.preferences.dec_sep&&e.num_grp_sep==this.spiceinstaller.configObject.preferences.num_grp_sep));return e||void 0}set numberDelimitation(e){this.spiceinstaller.configObject.preferences.dec_sep=e.dec_sep,this.spiceinstaller.configObject.preferences.num_grp_sep=e.num_grp_sep}updateNumberDelimitationsList(){for(let e of this.numberDelimitationsList)e.show="1"+e.num_grp_sep+"000"+e.num_grp_sep+"000"+e.dec_sep+"0".repeat(void 0!==this.spiceinstaller.configObject.preferences.currency_significant_digits?this.spiceinstaller.configObject.preferences.currency_significant_digits:2)}constructor(e,t,s,i,n,l){this.toast=e,this.http=t,this.router=s,this.configurationService=i,this.backend=n,this.spiceinstaller=l,this.languages=[],this.loading=!1,this.currencySignificantDigitsList=[1,2,3,4,5,6],this.thousandDelimiterList=[",","."],this.now=moment(),this.currencyList=[],this.weekDayStartList=["Sunday","Monday"],this.weekDaysCountList=[5,6,7],this.exportDelimiterList=[",",";"],this.charsetList=["BIG-5","CP1251","CP1252","EUC-CN","EUC-JP","EUC-KR","EUC-TW","ISO-2022-JP","ISO-2022-KR","ISO-8859-1","ISO-8859-2","ISO-8859-3","ISO-8859-4","ISO-8859-5","ISO-8859-6","ISO-8859-7","ISO-8859-8","ISO-8859-9","ISO-8859-10","ISO-8859-13","ISO-8859-14","ISO-8859-15","KOI8-R","KOI8-U","SJIS","UTF-8"],this.numberDelimitationsList=[{show:"1.000.000,00",num_grp_sep:".",dec_sep:","},{show:"1,000,000.00",num_grp_sep:",",dec_sep:"."},{show:"1 000 000,00",num_grp_sep:" ",dec_sep:","}],this.browserLanguages={de:"de_DE",en:"en_us"},this.setDateTimeExamples();let o=navigator.language;this.browserLanguages[o]&&(this.spiceinstaller.configObject.language=this.browserLanguages[o]),this.spiceinstaller.configObject.preferences.timezone=moment.tz.guess(),"de"===o&&this.preSetPreferences(),this.checkReference(),this.http.get(`${this.spiceinstaller.systemurl}/install/getlanguages`).subscribe((e=>{this.languages=e.languages})),this.spiceinstaller.jumpSubject.subscribe((e=>{e.from===this.selfStep&&(this.selfStep.completed||e.to?.pos<this.selfStep.pos?this.spiceinstaller.jump(e.to):this.setPreferences())}))}checkReference(){this.loading=!0,this.http.get(`${this.spiceinstaller.systemurl}/install/checkreference`).subscribe((e=>{this.loading=!1,e||this.toast.sendToast("cannot connect to reference server","error")}))}setPreferences(){this.spiceinstaller.selectedStep.completed=!0,this.spiceinstaller.jumpSubject.next({from:this.selfStep,to:this.selfStep.next})}preSetPreferences(){this.spiceinstaller.configObject.preferences.datef="d.m.Y",this.spiceinstaller.configObject.preferences.timef="H:i",this.spiceinstaller.configObject.preferences.export_charset="UTF-8",this.spiceinstaller.configObject.preferences.currency_significant_digits=2,this.spiceinstaller.configObject.preferences.dec_sep=",",this.spiceinstaller.configObject.preferences.num_grp_sep=".",this.spiceinstaller.configObject.preferences.distance_unit_system="METRIC",this.spiceinstaller.configObject.preferences.week_day_start="Monday",this.spiceinstaller.configObject.preferences.week_days_count=5}setDateTimeExamples(){this.now.format("MM-DD")===this.now.format("DD-MM")&&(this.now=moment(moment().format("YYYY-12-31"))),this.dateFormatList=[{name:this.now.format("YYYY-MM-DD"),value:"Y-m-d"},{name:this.now.format("MM-DD-YYYY"),value:"m-d-Y"},{name:this.now.format("DD-MM-YYYY"),value:"d-m-Y"},{name:this.now.format("Y/MM/DD"),value:"Y/m/d"},{name:this.now.format("MM/DD/YYYY"),value:"m/d/Y"},{name:this.now.format("DD/MM/YYYY"),value:"d/m/Y"},{name:this.now.format("YYYY.MM.DD"),value:"Y.m.d"},{name:this.now.format("DD.MM.YYYY"),value:"d.m.Y"},{name:this.now.format("MM.DD.YYYY"),value:"m.d.Y"}],this.timeFormatList=[{name:this.now.format("HH:mm"),value:"H:i"},{name:this.now.format("hh:mma"),value:"h:ia"},{name:this.now.format("hh:mmA"),value:"h:iA"},{name:this.now.format("hh:mm a"),value:"h:i a"},{name:this.now.format("hh:mm A"),value:"h:i A"},{name:this.now.format("HH.mm"),value:"H.i"},{name:this.now.format("hh.mma"),value:"h.ia"},{name:this.now.format("hh.mmA"),value:"h.iA"},{name:this.now.format("hh.mm a"),value:"h.i a"},{name:this.now.format("hh.mm A"),value:"h.i A"}]}static#e=this.ɵfac=function(e){return new(e||SpiceInstallerSetPreferences)(d.rXU(y.o),d.rXU(v.Qq),d.rXU(_.Ix),d.rXU(k.i),d.rXU(R.H),d.rXU(o.R))};static#t=this.ɵcmp=d.VBU({type:SpiceInstallerSetPreferences,selectors:[["spice-installer-set-preferences"]],inputs:{selfStep:"selfStep"},decls:121,vars:24,consts:[[1,"slds-m-horizontal--medium"],[1,"slds-text-heading--medium"],[1,"slds-m-top_medium","slds-m-bottom_small"],[2,"width","fit-content"],[1,"slds-form-element","slds-m-top_xx-small"],[1,"slds-form-element__label"],[1,"slds-required"],[1,"slds-form-element__control"],[1,"slds-select_container"],[1,"slds-select",3,"ngModel","ngModelChange"],[3,"ngValue",4,"ngFor","ngForOf"],[1,"slds-form-element"],["denyEmpty","true",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["value","METRIC","selected",""],["value","IMPERIAL"],[1,"slds-select",3,"ngModel","ngModelChange","change"],[3,"value","selected",4,"ngFor","ngForOf"],[1,"slds-m-top--medium","slds-text-align_right"],[1,"slds-button","slds-button--neutral","slds-col_bump-left",3,"click"],[1,"slds-button","slds-button--brand",3,"click"],[3,"ngValue"],[3,"value"],[3,"value","selected"]],template:function(e,t){1&e&&(d.j41(0,"div",0)(1,"h2",1),d.EFF(2,"Screen Output & Data Export"),d.k0s(),d.j41(3,"div",2),d.EFF(4,"Set the most important settings for screen output and data export. These settings also apply automatically to each user as long as a user does not make any individual settings."),d.k0s(),d.j41(5,"div",3)(6,"div",4)(7,"label",5)(8,"abbr",6),d.EFF(9,"*"),d.k0s(),d.EFF(10,"Language"),d.k0s(),d.j41(11,"div",7)(12,"div",8)(13,"select",9),d.mxI("ngModelChange",(function(e){return d.DH7(t.spiceinstaller.configObject.language,e)||(t.spiceinstaller.configObject.language=e),e})),d.DNE(14,fe,2,2,"option",10),d.k0s()()()(),d.j41(15,"div",4)(16,"label",5)(17,"abbr",6),d.EFF(18,"*"),d.k0s(),d.EFF(19,"Timezone"),d.k0s(),d.j41(20,"div",11)(21,"system-input-timezone",12),d.mxI("ngModelChange",(function(e){return d.DH7(t.spiceinstaller.configObject.preferences.timezone,e)||(t.spiceinstaller.configObject.preferences.timezone=e),e})),d.k0s()()(),d.j41(22,"div",4)(23,"label",5)(24,"abbr",6),d.EFF(25,"*"),d.k0s(),d.EFF(26,"Date Format"),d.k0s(),d.j41(27,"div",11)(28,"div",8)(29,"select",9),d.mxI("ngModelChange",(function(e){return d.DH7(t.spiceinstaller.configObject.preferences.datef,e)||(t.spiceinstaller.configObject.preferences.datef=e),e})),d.DNE(30,be,2,2,"option",13),d.k0s()()()(),d.j41(31,"div",4)(32,"label",5)(33,"abbr",6),d.EFF(34,"*"),d.k0s(),d.EFF(35,"Time Format"),d.k0s(),d.j41(36,"div",11)(37,"div",8)(38,"select",9),d.mxI("ngModelChange",(function(e){return d.DH7(t.spiceinstaller.configObject.preferences.timef,e)||(t.spiceinstaller.configObject.preferences.timef=e),e})),d.DNE(39,ye,2,2,"option",13),d.k0s()()()(),d.j41(40,"div",4)(41,"label",5)(42,"abbr",6),d.EFF(43,"*"),d.k0s(),d.EFF(44,"Distance Unit System"),d.k0s(),d.j41(45,"div",11)(46,"div",8)(47,"select",9),d.mxI("ngModelChange",(function(e){return d.DH7(t.spiceinstaller.configObject.preferences.distance_unit_system,e)||(t.spiceinstaller.configObject.preferences.distance_unit_system=e),e})),d.j41(48,"option",14),d.EFF(49,"metric"),d.k0s(),d.j41(50,"option",15),d.EFF(51,"imperial"),d.k0s()()()()(),d.j41(52,"div",4)(53,"label",5)(54,"abbr",6),d.EFF(55,"*"),d.k0s(),d.EFF(56,"Decimal Digits"),d.k0s(),d.j41(57,"div",11)(58,"div",8)(59,"select",16),d.mxI("ngModelChange",(function(e){return d.DH7(t.spiceinstaller.configObject.preferences.currency_significant_digits,e)||(t.spiceinstaller.configObject.preferences.currency_significant_digits=e),e})),d.bIt("change",(function(){return t.updateNumberDelimitationsList()})),d.DNE(60,ve,2,3,"option",17),d.k0s()()()(),d.j41(61,"div",4)(62,"label",5)(63,"abbr",6),d.EFF(64,"*"),d.k0s(),d.EFF(65,"Number Format"),d.k0s(),d.j41(66,"div",11)(67,"div",8)(68,"select",9),d.mxI("ngModelChange",(function(e){return d.DH7(t.numberDelimitation,e)||(t.numberDelimitation=e),e})),d.DNE(69,_e,2,2,"option",10),d.k0s()()()(),d.j41(70,"div",4)(71,"label",5)(72,"abbr",6),d.EFF(73,"*"),d.k0s(),d.EFF(74,"Name Format"),d.k0s(),d.j41(75,"div",11)(76,"div",8)(77,"select",9),d.mxI("ngModelChange",(function(e){return d.DH7(t.spiceinstaller.configObject.preferences.locale_name_format,e)||(t.spiceinstaller.configObject.preferences.locale_name_format=e),e})),d.DNE(78,ke,2,2,"option",13),d.nI1(79,"keyvalue"),d.k0s()()()(),d.j41(80,"div",4)(81,"label",5)(82,"abbr",6),d.EFF(83,"*"),d.k0s(),d.EFF(84,"Week Start Day"),d.k0s(),d.j41(85,"div",11)(86,"div",8)(87,"select",9),d.mxI("ngModelChange",(function(e){return d.DH7(t.spiceinstaller.configObject.preferences.week_day_start,e)||(t.spiceinstaller.configObject.preferences.week_day_start=e),e})),d.DNE(88,Re,2,2,"option",13),d.k0s()()()(),d.j41(89,"div",4)(90,"label",5)(91,"abbr",6),d.EFF(92,"*"),d.k0s(),d.EFF(93,"Week Days Count"),d.k0s(),d.j41(94,"div",11)(95,"div",8)(96,"select",9),d.mxI("ngModelChange",(function(e){return d.DH7(t.spiceinstaller.configObject.preferences.week_days_count,e)||(t.spiceinstaller.configObject.preferences.week_days_count=e),e})),d.DNE(97,Ie,2,2,"option",13),d.k0s()()()(),d.j41(98,"div",4)(99,"label",5)(100,"abbr",6),d.EFF(101,"*"),d.k0s(),d.EFF(102,"Export Delimiter"),d.k0s(),d.j41(103,"div",11)(104,"div",8)(105,"select",9),d.mxI("ngModelChange",(function(e){return d.DH7(t.spiceinstaller.configObject.preferences.export_delimiter,e)||(t.spiceinstaller.configObject.preferences.export_delimiter=e),e})),d.DNE(106,xe,2,2,"option",13),d.k0s()()()(),d.j41(107,"div",4)(108,"label",5)(109,"abbr",6),d.EFF(110,"*"),d.k0s(),d.EFF(111,"Export Charset"),d.k0s(),d.j41(112,"div",11)(113,"div",8)(114,"select",9),d.mxI("ngModelChange",(function(e){return d.DH7(t.spiceinstaller.configObject.preferences.export_charset,e)||(t.spiceinstaller.configObject.preferences.export_charset=e),e})),d.DNE(115,je,2,2,"option",13),d.k0s()()()()(),d.j41(116,"div",18)(117,"button",19),d.bIt("click",(function(){return t.spiceinstaller.jumpSubject.next({from:t.selfStep,to:t.selfStep.prev})})),d.EFF(118,"back"),d.k0s(),d.j41(119,"button",20),d.bIt("click",(function(){return t.setPreferences()})),d.EFF(120,"next"),d.k0s()()()),2&e&&(d.R7$(13),d.R50("ngModel",t.spiceinstaller.configObject.language),d.R7$(),d.Y8G("ngForOf",t.languages),d.R7$(7),d.R50("ngModel",t.spiceinstaller.configObject.preferences.timezone),d.R7$(8),d.R50("ngModel",t.spiceinstaller.configObject.preferences.datef),d.R7$(),d.Y8G("ngForOf",t.dateFormatList),d.R7$(8),d.R50("ngModel",t.spiceinstaller.configObject.preferences.timef),d.R7$(),d.Y8G("ngForOf",t.timeFormatList),d.R7$(8),d.R50("ngModel",t.spiceinstaller.configObject.preferences.distance_unit_system),d.R7$(12),d.R50("ngModel",t.spiceinstaller.configObject.preferences.currency_significant_digits),d.R7$(),d.Y8G("ngForOf",t.currencySignificantDigitsList),d.R7$(8),d.R50("ngModel",t.numberDelimitation),d.R7$(),d.Y8G("ngForOf",t.numberDelimitationsList),d.R7$(8),d.R50("ngModel",t.spiceinstaller.configObject.preferences.locale_name_format),d.R7$(),d.Y8G("ngForOf",d.bMT(79,22,t.spiceinstaller.nameFormats)),d.R7$(9),d.R50("ngModel",t.spiceinstaller.configObject.preferences.week_day_start),d.R7$(),d.Y8G("ngForOf",t.weekDayStartList),d.R7$(8),d.R50("ngModel",t.spiceinstaller.configObject.preferences.week_days_count),d.R7$(),d.Y8G("ngForOf",t.weekDaysCountList),d.R7$(8),d.R50("ngModel",t.spiceinstaller.configObject.preferences.export_delimiter),d.R7$(),d.Y8G("ngForOf",t.exportDelimiterList),d.R7$(8),d.R50("ngModel",t.spiceinstaller.configObject.preferences.export_charset),d.R7$(),d.Y8G("ngForOf",t.charsetList))},dependencies:[i.Sq,n.xH,n.y7,n.wz,n.BC,n.vS,pe.p,i.lG],encapsulation:2})}return SpiceInstallerSetPreferences})();var Ce=s(50531);function we(e,t){if(1&e&&(d.j41(0,"tr",5)(1,"td")(2,"div",6),d.EFF(3),d.k0s()(),d.j41(4,"td")(5,"div",6),d.EFF(6),d.k0s()()()),2&e){const e=t.$implicit,s=d.XpG();d.R7$(3),d.JRh(s.spiceinstaller.keyToLabel(e.key)),d.R7$(3),d.JRh(e.value)}}function Se(e,t){if(1&e&&(d.j41(0,"tr",5)(1,"td")(2,"div",6),d.EFF(3),d.k0s()(),d.j41(4,"td")(5,"div",6),d.EFF(6),d.k0s()()()),2&e){const e=t.$implicit,s=d.XpG();d.R7$(3),d.JRh(s.spiceinstaller.keyToLabel(e.key)),d.R7$(3),d.JRh(e.value)}}function Ee(e,t){if(1&e&&(d.j41(0,"tr",5)(1,"td")(2,"div",6),d.EFF(3),d.k0s()(),d.j41(4,"td")(5,"div",6),d.EFF(6),d.k0s()()()),2&e){const e=t.$implicit,s=d.XpG();d.R7$(3),d.JRh(s.spiceinstaller.keyToLabel(e.key)),d.R7$(3),d.JRh(e.value)}}function Le(e,t){if(1&e&&(d.j41(0,"tr",5)(1,"td")(2,"div",6),d.EFF(3),d.k0s()(),d.j41(4,"td")(5,"div",6),d.EFF(6),d.k0s()()()),2&e){const e=t.$implicit,s=d.XpG();d.R7$(3),d.JRh(s.spiceinstaller.keyToLabel(e.key)),d.R7$(3),d.JRh(e.value)}}function De(e,t){if(1&e&&(d.j41(0,"tr",5)(1,"td")(2,"div",6),d.EFF(3),d.k0s()(),d.j41(4,"td")(5,"div",6),d.EFF(6),d.k0s()()()),2&e){const e=t.$implicit,s=d.XpG();d.R7$(3),d.JRh(s.spiceinstaller.keyToLabel(e.key)),d.R7$(3),d.JRh(e.value)}}function Fe(e,t){if(1&e&&(d.j41(0,"tr",5)(1,"td")(2,"div",6),d.EFF(3),d.k0s()(),d.j41(4,"td")(5,"div",6),d.EFF(6),d.k0s()()()),2&e){const e=t.$implicit,s=d.XpG();d.R7$(3),d.JRh(e.key),d.R7$(3),d.JRh(s.showPreference(e.key))}}function Me(e,t){1&e&&(d.qex(0),d.j41(1,"section",12)(2,"div",13),d.nrm(3,"div",14),d.j41(4,"div",15)(5,"div",16),d.nrm(6,"div",17),d.j41(7,"div",18),d.EFF(8,"Installing"),d.k0s()()()()(),d.nrm(9,"div",19),d.bVm())}let Te=(()=>{class SpiceInstallerReview{constructor(e,t,s,i,n,l){this.toast=e,this.modal=t,this.http=s,this.router=i,this.configurationService=n,this.spiceinstaller=l,this.installing=!1,this.prefsToReview={Timezone:"timezone","Date Format":"datef","Time Format":"timef","Distance Unit System":"distance_unit_system","Name Format":"locale_name_format","Week Start Day":"week_day_start","Week Days Count":"week_days_count","Export Delimiter":"export_delimiter","Export Charset":"export_charset"},this.spiceinstaller.jumpSubject.subscribe((e=>{e.from===this.selfStep&&(this.selfStep.completed||e.to?.pos<this.selfStep.pos)&&this.spiceinstaller.jump(e.to)}))}ngAfterViewInit(){this.spiceinstaller.selectedStep.completed=!0,this.spiceinstaller.steps[7]=this.spiceinstaller.selectedStep}install(){this.installing=!0,this.http.post(`${this.spiceinstaller.systemurl}/install/process`,this.spiceinstaller.configObject).subscribe((e=>{let t=e;if(this.installing=!1,t.success)window.location.href=window.location.href.replace("#/install","");else for(let e in t.errors)this.toast.sendAlert("Error with: "+e,"error")}),(e=>{if(500===e.status)this.toast.sendAlert(e.message,"error");this.installing=!1}))}showPreference(e){return"function"==typeof this.prefsToReview[e]?this.prefsToReview[e]():this.spiceinstaller.configObject.preferences[this.prefsToReview[e]]}getNumberFormat(){return"1"+this.spiceinstaller.configObject.preferences.num_grp_sep+"000"+this.spiceinstaller.configObject.preferences.num_grp_sep+"000"+this.spiceinstaller.configObject.preferences.dec_sep+"0".repeat(this.spiceinstaller.configObject.preferences.currency_significant_digits)}static#e=this.ɵfac=function(e){return new(e||SpiceInstallerReview)(d.rXU(y.o),d.rXU(Ce.y),d.rXU(v.Qq),d.rXU(_.Ix),d.rXU(k.i),d.rXU(o.R))};static#t=this.ɵcmp=d.VBU({type:SpiceInstallerReview,selectors:[["spice-installer-review"]],inputs:{selfStep:"selfStep"},decls:54,vars:20,consts:[[1,"slds-text-heading_medium","slds-m-horizontal--medium","slds-m-bottom_medium"],[1,"slds-table","slds-table_cell-buffer","slds-table_bordered","slds-table_col-bordered"],["colspan","2",1,"slds-text-heading_small"],["class","slds-hint-parent",4,"ngFor","ngForOf"],["colspan","2",1,"slds-text-heading_small","slds-border_top"],[1,"slds-hint-parent"],[1,"slds-truncate"],[1,"slds-text-align_right","slds-align-bottom","slds-grid","slds-grid--vertical-align-center","slds-p-vertical--small","slds-p-horizontal_medium"],[1,"slds-size--1-of-1"],[1,"slds-button","slds-button--neutral","slds-col_bump-left",3,"click"],[1,"slds-button","slds-button--brand",3,"click"],[4,"ngIf"],["role","dialog","aria-modal","true",1,"slds-modal","slds-fade-in-open"],[1,"slds-modal__container"],[1,"slds-modal__header","slds-modal__header_empty"],[1,"slds-modal__content","slds-p-around_medium","slds-align--absolute-center"],[1,"slds-p-horizontal--x-large","slds-grid","slds-grid--vertical-align-center"],[1,"cssload-double-torus",2,"width","16px","height","16px"],[1,"slds-p-left--medium"],[1,"slds-backdrop","slds-backdrop_open"]],template:function(e,t){1&e&&(d.j41(0,"h2",0),d.EFF(1,"Review & Install"),d.k0s(),d.j41(2,"table",1)(3,"thead")(4,"tr")(5,"th",2),d.EFF(6,"Backend Configuration Settings"),d.k0s()()(),d.j41(7,"tbody"),d.DNE(8,we,7,2,"tr",3),d.nI1(9,"keyvalue"),d.k0s(),d.j41(10,"thead")(11,"tr")(12,"th",4),d.EFF(13,"Database Configuration Settings"),d.k0s()()(),d.j41(14,"tbody"),d.DNE(15,Se,7,2,"tr",3),d.nI1(16,"keyvalue"),d.DNE(17,Ee,7,2,"tr",3),d.nI1(18,"keyvalue"),d.k0s(),d.j41(19,"thead")(20,"tr")(21,"th",4),d.EFF(22,"FTS Configuration Settings"),d.k0s()()(),d.j41(23,"tbody"),d.DNE(24,Le,7,2,"tr",3),d.nI1(25,"keyvalue"),d.k0s(),d.j41(26,"thead")(27,"tr")(28,"th",4),d.EFF(29,"Credentials"),d.k0s()()(),d.j41(30,"tbody"),d.DNE(31,De,7,2,"tr",3),d.nI1(32,"keyvalue"),d.k0s(),d.j41(33,"thead")(34,"tr")(35,"th",4),d.EFF(36,"Output & Export Settings"),d.k0s()()(),d.j41(37,"tbody")(38,"tr",5)(39,"td")(40,"div",6),d.EFF(41,"Language"),d.k0s()(),d.j41(42,"td")(43,"div",6),d.EFF(44),d.k0s()()(),d.DNE(45,Fe,7,2,"tr",3),d.nI1(46,"keyvalue"),d.k0s()(),d.j41(47,"div",7)(48,"div",8)(49,"button",9),d.bIt("click",(function(){return t.spiceinstaller.jumpSubject.next({from:t.selfStep,to:t.selfStep.prev})})),d.EFF(50,"back"),d.k0s(),d.j41(51,"button",10),d.bIt("click",(function(){return t.install()})),d.EFF(52,"Begin Installation"),d.k0s()()(),d.DNE(53,Me,10,0,"ng-container",11)),2&e&&(d.R7$(8),d.Y8G("ngForOf",d.bMT(9,8,t.spiceinstaller.configObject.backendconfig)),d.R7$(7),d.Y8G("ngForOf",d.bMT(16,10,t.spiceinstaller.configObject.database)),d.R7$(2),d.Y8G("ngForOf",d.bMT(18,12,t.spiceinstaller.configObject.dboptions)),d.R7$(7),d.Y8G("ngForOf",d.bMT(25,14,t.spiceinstaller.configObject.fts)),d.R7$(7),d.Y8G("ngForOf",d.bMT(32,16,t.spiceinstaller.configObject.credentials)),d.R7$(13),d.JRh(t.spiceinstaller.configObject.language),d.R7$(),d.Y8G("ngForOf",d.bMT(46,18,t.prefsToReview)),d.R7$(8),d.Y8G("ngIf",t.installing))},dependencies:[i.Sq,i.bT,i.lG],encapsulation:2})}return SpiceInstallerReview})();function Be(e,t){if(1&e&&(d.j41(0,"div",2),d.nrm(1,"spice-installer-set-backend",3),d.k0s()),2&e){const e=d.XpG(2);d.R7$(),d.Y8G("selfStep",e.spiceinstaller.selectedStep)}}function $e(e,t){if(1&e&&(d.j41(0,"div",2),d.nrm(1,"spice-installer-systemcheck",3),d.k0s()),2&e){const e=d.XpG(2);d.R7$(),d.Y8G("selfStep",e.spiceinstaller.selectedStep)}}function Oe(e,t){if(1&e&&(d.j41(0,"div",2),d.nrm(1,"spice-installer-licence",3),d.k0s()),2&e){const e=d.XpG(2);d.R7$(),d.Y8G("selfStep",e.spiceinstaller.selectedStep)}}function Xe(e,t){if(1&e&&(d.j41(0,"div",2),d.nrm(1,"spice-installer-database",3),d.k0s()),2&e){const e=d.XpG(2);d.R7$(),d.Y8G("selfStep",e.spiceinstaller.selectedStep)}}function Ue(e,t){if(1&e&&(d.j41(0,"div",2),d.nrm(1,"spice-installer-fts",3),d.k0s()),2&e){const e=d.XpG(2);d.R7$(),d.Y8G("selfStep",e.spiceinstaller.selectedStep)}}function Ye(e,t){if(1&e&&(d.j41(0,"div",2),d.nrm(1,"spice-installer-credentials",3),d.k0s()),2&e){const e=d.XpG(2);d.R7$(),d.Y8G("selfStep",e.spiceinstaller.selectedStep)}}function Ne(e,t){if(1&e&&(d.j41(0,"div",2),d.nrm(1,"spice-installer-set-preferences",3),d.k0s()),2&e){const e=d.XpG(2);d.R7$(),d.Y8G("selfStep",e.spiceinstaller.selectedStep)}}function Ve(e,t){if(1&e&&(d.j41(0,"div",2),d.nrm(1,"spice-installer-review",3),d.k0s()),2&e){const e=d.XpG(2);d.R7$(),d.Y8G("selfStep",e.spiceinstaller.selectedStep)}}function Ae(e,t){if(1&e&&(d.j41(0,"div"),d.DNE(1,Be,2,1,"div",1)(2,$e,2,1,"div",1)(3,Oe,2,1,"div",1)(4,Xe,2,1,"div",1)(5,Ue,2,1,"div",1)(6,Ye,2,1,"div",1)(7,Ne,2,1,"div",1)(8,Ve,2,1,"div",1),d.k0s()),2&e){const e=t.$implicit,s=d.XpG();d.R7$(),d.Y8G("ngIf","setbackend"==e.id&&"setbackend"==s.spiceinstaller.selectedStep.id),d.R7$(),d.Y8G("ngIf","systemcheck"==e.id&&"systemcheck"==s.spiceinstaller.selectedStep.id),d.R7$(),d.Y8G("ngIf","licence"==e.id&&"licence"==s.spiceinstaller.selectedStep.id),d.R7$(),d.Y8G("ngIf","database"==e.id&&"database"==s.spiceinstaller.selectedStep.id),d.R7$(),d.Y8G("ngIf","fts"==e.id&&"fts"==s.spiceinstaller.selectedStep.id),d.R7$(),d.Y8G("ngIf","credentials"==e.id&&"credentials"==s.spiceinstaller.selectedStep.id),d.R7$(),d.Y8G("ngIf","preferences"==e.id&&"preferences"==s.spiceinstaller.selectedStep.id),d.R7$(),d.Y8G("ngIf","review"==e.id&&"review"==s.spiceinstaller.selectedStep.id)}}let Pe=(()=>{class SpiceInstallerDetailContainer{constructor(e,t,s,i,n,l,o){this.toast=e,this.http=t,this.router=s,this.configurationService=i,this.backend=n,this.spiceinstaller=l,this.view=o,this.view.setEditMode()}static#e=this.ɵfac=function(e){return new(e||SpiceInstallerDetailContainer)(d.rXU(y.o),d.rXU(v.Qq),d.rXU(_.Ix),d.rXU(k.i),d.rXU(R.H),d.rXU(o.R),d.rXU(b.U))};static#t=this.ɵcmp=d.VBU({type:SpiceInstallerDetailContainer,selectors:[["spice-installer-detail-container"]],features:[d.Jv_([b.U])],decls:1,vars:1,consts:[[4,"ngFor","ngForOf"],["class","slds-grid slds-grid_vertical",4,"ngIf"],[1,"slds-grid","slds-grid_vertical"],[3,"selfStep"]],template:function(e,t){1&e&&d.DNE(0,Ae,9,8,"div",0),2&e&&d.Y8G("ngForOf",t.spiceinstaller.steps)},dependencies:[i.Sq,i.bT,C,D,T,se,ae,ge,Ge,Te],encapsulation:2})}return SpiceInstallerDetailContainer})();var ze=s(69139);let He=(()=>{class SpiceInstallerModule{static#e=this.ɵfac=function(e){return new(e||SpiceInstallerModule)};static#t=this.ɵmod=d.$C({type:SpiceInstallerModule});static#s=this.ɵinj=d.G2t({providers:[o.R],imports:[i.MD,n.YN,l.h,a.SystemComponents]})}return SpiceInstallerModule})();("undefined"==typeof ngJitMode||ngJitMode)&&d.Obh(He,{declarations:[r.F,f,Pe,C,D,T,se,U,P,W,ae,ge,Ge,Te],imports:[i.MD,n.YN,l.h,a.SystemComponents],exports:[r.F]}),d.wjB(r.F,[ze.p,f,Pe],[])},42919:(e,t,s)=>{"use strict";s.d(t,{C:()=>_});var i=s(21413),n=s(54438),l=s(69904),o=s(83935),a=s(50531),r=s(49722),d=s(41081),c=s(29994),u=s(60177),m=s(84341),h=s(32062),g=s(40713),p=s(25028),f=s(88418),b=s(83524);function y(e,t){if(1&e&&n.nrm(0,"img",18),2&e){const e=n.XpG(2);n.Y8G("src",e.QRCode,n.B4B)}}function v(e,t){if(1&e){const e=n.RV6();n.j41(0,"system-modal",1)(1,"system-modal-header",2),n.bIt("close",(function(){n.eBV(e);const t=n.XpG();return n.Njj(t.close())})),n.nrm(2,"system-label",3),n.k0s(),n.j41(3,"system-modal-content")(4,"div",4)(5,"div",5),n.nrm(6,"system-label",6),n.k0s(),n.j41(7,"div",7)(8,"div",8),n.EFF(9),n.k0s(),n.DNE(10,y,1,1,"img",9),n.j41(11,"div",8),n.EFF(12),n.k0s()()()(),n.j41(13,"system-modal-footer")(14,"div",10)(15,"div",11),n.nrm(16,"system-label",12),n.j41(17,"input",13),n.mxI("ngModelChange",(function(t){n.eBV(e);const s=n.XpG();return n.DH7(s.code,t)||(s.code=t),n.Njj(t)})),n.k0s()(),n.j41(18,"div",4)(19,"button",14),n.bIt("click",(function(){n.eBV(e);const t=n.XpG();return n.Njj(t.close())})),n.nrm(20,"system-label",15),n.k0s(),n.j41(21,"button",16),n.bIt("click",(function(){n.eBV(e);const t=n.XpG();return n.Njj(t.save())})),n.nrm(22,"system-label",17),n.k0s()()()()()}if(2&e){const e=n.XpG();n.R7$(9),n.JRh(e.name),n.R7$(),n.Y8G("ngIf",e.QRCode),n.R7$(2),n.JRh(e.secret),n.R7$(5),n.R50("ngModel",e.code),n.R7$(4),n.Y8G("disabled",6!=e.code.length)}}let _=(()=>{class TOTPAuthenticationGenerateModal{constructor(e,t,s,n,l,o){this.language=e,this.metadata=t,this.modal=s,this.backend=n,this.toast=l,this.session=o,this.code="",this.onValidationSuccess=new i.B,this.response=new i.B}ngOnInit(){this.onBehalfUserId&&this.onBehalfUserId;let e=this.modal.await(this.language.getLabel("MSG_TOTP_GENERATING_CODE"));this.backend.postRequest("authentication/totp/generate",{onBehalfUserId:this.onBehalfUserId},this.credentials).subscribe({next:t=>{e.emit(!0),t.secret?(this.QRCode="data:image/png;base64,"+t.qrcode,this.secret=t.secret,this.name=t.name,this.response.next(!0)):(this.toast.sendToast("Error generating Code","error"),this.response.next(!1),this.close())},error:()=>{this.toast.sendToast("Error generating Code","error"),this.response.next(!1),this.close(),e.emit(!0)}})}close(){this.self.destroy()}save(){this.backend.putRequest(`authentication/totp/validate/${this.code}`,{onBehalfUserId:this.onBehalfUserId},this.credentials).subscribe({next:e=>{e.validated?(this.response.next(!0),this.onBehalfUserId==this.session.authData.userId&&(this.session.authData.user.user_2fa_method="one_time_password"),this.onValidationSuccess.next(),this.onValidationSuccess.complete(),this.close()):(this.response.next(!1),this.toast.sendToast("Error validating your code","warning","the code you entered is not valid, please try again",!0)),this.code=""},error:()=>{this.response.next(!1),this.toast.sendToast("Error validating your code","error","there as an internal error validating your request",!0),this.code=""}})}static#e=this.ɵfac=function(e){return new(e||TOTPAuthenticationGenerateModal)(n.rXU(l.B),n.rXU(o.yu),n.rXU(a.y),n.rXU(r.H),n.rXU(d.o),n.rXU(c.d))};static#t=this.ɵcmp=n.VBU({type:TOTPAuthenticationGenerateModal,selectors:[["totp-authentication-generate-modal"]],inputs:{onBehalfUserId:"onBehalfUserId"},outputs:{onValidationSuccess:"onValidationSuccess"},decls:1,vars:1,consts:[["size","small",4,"ngIf"],["size","small"],[3,"close"],["label","LBL_TOTP_AUTHENTICATION"],[1,"slds-grid"],[1,"slds-size--1-of-2"],["label","MSG_AUTHENTICATOR_INSTRUCTIONS","length","long"],[1,"slds-size--1-of-2","slds-align--absolute-center","slds-grid","slds-grid--vertical"],[1,"slds-p-vertical--small"],["style","width: 200px; height: 200px;",3,"src",4,"ngIf"],[1,"slds-grid","slds-grid--vertical-align-center","slds-grid--align-spread"],[1,"slds-grid","slds-grid--vertical-align-center"],["label","LBL_CODE"],["maxlength","6",1,"slds-m-left--x-small","slds-input",2,"width","6rem",3,"ngModel","ngModelChange"],[1,"slds-button","slds-button--neutral",3,"click"],["label","LBL_CANCEL"],[1,"slds-button","slds-button--brand",3,"disabled","click"],["label","LBL_SAVE"],[2,"width","200px","height","200px",3,"src"]],template:function(e,t){1&e&&n.DNE(0,v,23,5,"system-modal",0),2&e&&n.Y8G("ngIf",t.secret)},dependencies:[u.bT,m.me,m.BC,m.tU,m.vS,h.W,g.D,p.I,f.Q,b.C],encapsulation:2})}return TOTPAuthenticationGenerateModal})()},23338:(e,t,s)=>{"use strict";s.r(t),s.d(t,{ModuleTOTPAuthentication:()=>v});var i=s(60177),n=s(84341),l=s(71341),o=s(7745),a=s(12948),r=s(37328),d=s(70569),c=s(54438),u=s(69904),m=s(35911),h=s(50531),g=s(49722),p=s(29994),f=s(32062);let b=(()=>{class TOTPAuthenticationGenerateButton{constructor(e,t,s,i,n,l){this.language=e,this.model=t,this.modal=s,this.backend=i,this.injector=n,this.session=l}execute(){this.onBehalfUserId=this.session.authData.userId!=this.model.id?this.model.id:void 0;let e=this.modal.await(this.language.getLabel("MSG_TOTP_STATUSCHECK"));this.backend.getRequest("authentication/totp",{onBehalfUserId:this.onBehalfUserId}).subscribe((t=>{e.emit(!0),t.active?this.modal.confirm(this.language.getLabel("MSG_TOTP_DELETE",null,"long"),this.language.getLabel("MSG_TOTP_DELETE")).subscribe((t=>{t&&(e=this.modal.await(this.language.getLabel("MSG_TOTP_DELETING")),this.backend.deleteRequest("authentication/totp",{onBehalfUserId:this.onBehalfUserId}).subscribe((t=>{e.emit(!0),this.generateTOTP()}),(()=>{e.emit(!0)})))})):this.generateTOTP()}),(()=>{e.emit(!0)}))}generateTOTP(){this.modal.openModal("TOTPAuthenticationGenerateModal",!0,this.injector).subscribe((e=>{e.instance.onBehalfUserId=this.onBehalfUserId}))}static#e=this.ɵfac=function(e){return new(e||TOTPAuthenticationGenerateButton)(c.rXU(u.B),c.rXU(m.g),c.rXU(h.y),c.rXU(g.H),c.rXU(c.zZn),c.rXU(p.d))};static#t=this.ɵcmp=c.VBU({type:TOTPAuthenticationGenerateButton,selectors:[["totp-authenticatio-generate-button"]],decls:1,vars:0,consts:[["label","LBL_TOTP_AUTHENTICATION"]],template:function(e,t){1&e&&c.nrm(0,"system-label",0)},dependencies:[f.W],encapsulation:2})}return TOTPAuthenticationGenerateButton})();var y=s(42919);let v=(()=>{class ModuleTOTPAuthentication{static#e=this.ɵfac=function(e){return new(e||ModuleTOTPAuthentication)};static#t=this.ɵmod=c.$C({type:ModuleTOTPAuthentication});static#s=this.ɵinj=c.G2t({imports:[i.MD,n.YN,o.ObjectFields,a.GlobalComponents,r.ObjectComponents,d.SystemComponents,l.h]})}return ModuleTOTPAuthentication})();("undefined"==typeof ngJitMode||ngJitMode)&&c.Obh(v,{declarations:[b,y.C],imports:[i.MD,n.YN,o.ObjectFields,a.GlobalComponents,r.ObjectComponents,d.SystemComponents,l.h]})},44261:(e,t,s)=>{"use strict";s.d(t,{l:()=>_});var i=s(54438),n=s(53394),l=s(69904),o=s(83935),a=s(35911),r=s(60177),d=s(25863),c=s(32062),u=s(80256),m=s(22465);function h(e,t){if(1&e){const e=i.RV6();i.j41(0,"button",3),i.bIt("click",(function(){const t=i.eBV(e).$implicit,s=i.XpG();return i.Njj(s.propagateclick(t.id))})),i.j41(1,"object-action-container-item",4),i.bIt("actionemitter",(function(t){i.eBV(e);const s=i.XpG();return i.Njj(s.emitaction(t))})),i.k0s()()}if(2&e){const e=t.$implicit,s=i.XpG();i.Y8G("ngClass",s.addclasses(e))("disabled",s.isDisabled(e.id)),i.R7$(),i.Y8G("actionitem",e)("displayasicon",s.displayasicon)}}function g(e,t){if(1&e&&(i.j41(0,"div",15),i.nrm(1,"system-label",16),i.k0s()),2&e){const e=i.XpG().$implicit;i.R7$(),i.Y8G("label","undefined"==e.name?"LBL_DEFAULT":e.name)}}const p=e=>({"slds-hide":e}),f=e=>({"slds-disabled-text":e});function b(e,t){if(1&e){const e=i.RV6();i.j41(0,"li",17),i.bIt("click",(function(){const t=i.eBV(e).$implicit,s=i.XpG(3);return i.Njj(s.propagateclick(t.id))})),i.j41(1,"a",18)(2,"object-action-container-item",19),i.bIt("actionemitter",(function(t){i.eBV(e);const s=i.XpG(3);return i.Njj(s.emitaction(t))})),i.k0s()()()}if(2&e){const e=t.$implicit,s=i.XpG(3);i.Y8G("ngClass",i.eq3(3,p,s.isHidden(e.id))),i.R7$(2),i.Y8G("ngClass",i.eq3(5,f,s.isDisabled(e.id)))("actionitem",e)}}function y(e,t){if(1&e&&(i.j41(0,"div"),i.DNE(1,g,2,1,"div",12),i.j41(2,"ul",13),i.DNE(3,b,3,7,"li",14),i.k0s()()),2&e){const e=t.$implicit,s=t.last,n=i.XpG(2);i.xc7("width","horizontal"==n.grouped?"160px":"initial")("min-width","horizontal"==n.grouped?"160px":"initial"),i.AVh("slds-hide",e.hidden)("slds-border--right",!s&&"horizontal"==n.grouped),i.R7$(),i.Y8G("ngIf",n.groups.length>1),i.R7$(),i.AVh("slds-hide",e.hidden),i.R7$(),i.Y8G("ngForOf",e.items)}}function v(e,t){if(1&e&&(i.j41(0,"div",5)(1,"button",6),i.nrm(2,"system-button-icon",7),i.j41(3,"span",8),i.nrm(4,"system-label",9),i.k0s()(),i.j41(5,"div",10),i.DNE(6,y,4,12,"div",11),i.k0s()()),2&e){const e=i.XpG();i.R7$(),i.Y8G("disabled",e.opendisabled),i.R7$(4),i.AVh("slds-grid","horizontal"==e.grouped),i.R7$(),i.Y8G("ngForOf",e.groups)}}let _=(()=>{class ObjectActionContainer{constructor(e,t,s,n,l){this.language=e,this.metadata=t,this.model=s,this.ngZone=n,this.cdRef=l,this.disabled=!1,this.containerclass="slds-button-group",this.displayasicon=!1,this.actionset="",this.mainactionitems=[],this.actionemitter=new i.bkB,this.stable=!1,this.horizontalView=!1,this.groups=[]}ngDoCheck(){this.stable&&this.groups.forEach((e=>{e.hidden=0==this.actionitemlist.filter((t=>(t.actionitem.actionconfig?.group==e.name||!t.actionitem.actionconfig?.group&&"undefined"==e.name)&&!t.hidden)).length}))}buildItems(){const e=this.metadata.getActionSetItems(this.actionset).sort(((e,t)=>e.sequence>t.sequence?1:-1));this.mainactionitems=[];let t=!0;this.groups=[];const s={};for(const i of e){const e={disabled:!0,id:i.id,sequence:i.sequence,action:i.action,component:i.component,actionconfig:i.actionconfig};if(t||"1"==i.singlebutton)this.mainactionitems.push(e),t=!1;else if(!this.isHidden(i.id)){const t=["horizontal","vertical"].indexOf(this.grouped)>-1&&i.actionconfig?.group?i.actionconfig?.group:"undefined";s[t]?s[t].items.push(e):s[t]={name:t,sequence:"undefined"==t?1e3:Object.keys(s).length+1,items:[e],hidden:!1}}}this.groups=Object.values(s).sort(((e,t)=>e.sequence>t.sequence?1:-1))}ngOnChanges(){this.grouped=this.metadata.getActionSet(this.actionset)?.grouped,this.buildItems()}ngAfterViewInit(){this.stableSub=this.ngZone.onStable.subscribe((e=>{this.stable=!0,this.stableSub.unsubscribe(),this.cdRef.detectChanges()}))}get opendisabled(){let e=!0;return this.groups.some((t=>t.items.some((t=>{if(!1===this.isDisabled(t.id))return e=!1,!0})))),e}get hasAddItems(){return this.groups.some((e=>e.items.length>0))}addclasses(e,t,s,i){let n=e.actionconfig.addclasses;return this.isHidden(e.id)&&(n+=" slds-hide"),(e.displayasicon||e.singlebutton)&&(s&&i?n+=" ":s&&!i?n+=" slds-button_first ":!s&&i?n+=" slds-button_last ":s||i||(n+=" slds-button_middle ")),t&&(n+=" slds-button--icon-"+t),n}isDisabled(e){if(this.disabled)return!0;let t=!0;return this.actionitemlist&&this.actionitemlist.some((s=>{if(s.id==e)return t=s.disabled,!0})),t}isHidden(e){if(!this.stable)return!1;let t=!1;if(this.actionitemlist){let s=this.actionitemlist.find((t=>t.id==e));s&&(t=s.hidden)}return t}isGroupHidden(e,t){return!!this.stable&&0==Array.from(t.children).filter((e=>!e.classList.contains("slds-hide"))).length}propagateclick(e){this.actionitemlist.some((t=>{if(t.id==e)return t.disabled||t.execute(),!0}))}emitaction(e){this.actionemitter.emit(e)}static#e=this.ɵfac=function(e){return new(e||ObjectActionContainer)(i.rXU(l.B),i.rXU(o.yu),i.rXU(a.g),i.rXU(i.SKi),i.rXU(i.gRc))};static#t=this.ɵcmp=i.VBU({type:ObjectActionContainer,selectors:[["object-action-container"]],viewQuery:function(e,t){if(1&e&&i.GBs(n.C,5),2&e){let e;i.mGM(e=i.lsd())&&(t.actionitemlist=e)}},inputs:{disabled:"disabled",containerclass:"containerclass",displayasicon:"displayasicon",actionset:"actionset"},outputs:{actionemitter:"actionemitter"},features:[i.OA$],decls:3,vars:3,consts:[["role","group",3,"ngClass"],["class","slds-button slds-button_neutral",3,"ngClass","disabled","click",4,"ngFor","ngForOf"],["class","slds-dropdown-trigger slds-dropdown-trigger_click slds-button_last","system-dropdown-trigger","",4,"ngIf"],[1,"slds-button","slds-button_neutral",3,"ngClass","disabled","click"],[3,"actionitem","displayasicon","actionemitter"],["system-dropdown-trigger","",1,"slds-dropdown-trigger","slds-dropdown-trigger_click","slds-button_last"],["aria-haspopup","true","system-title","LBL_MORE",1,"slds-button","slds-button_icon","slds-button_icon-border-filled",3,"disabled"],["icon","down"],[1,"slds-assistive-text"],["label","LBL_MORE"],[1,"slds-dropdown","slds-dropdown_right","slds-dropdown_actions","slds-p-around--none",2,"max-width","initial"],[3,"slds-hide","slds-border--right","width","min-width",4,"ngFor","ngForOf"],["class","slds-p-around--x-small slds-theme--shade slds-text-title--caps",4,"ngIf"],["role","menu",1,"slds-dropdown__list"],["class","slds-dropdown__item","role","presentation",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"slds-p-around--x-small","slds-theme--shade","slds-text-title--caps"],[3,"label"],["role","presentation",1,"slds-dropdown__item",3,"ngClass","click"],["href","javascript:void(0);","role","menuitem","tabindex","0"],[1,"slds-truncate",3,"ngClass","actionitem","actionemitter"]],template:function(e,t){1&e&&(i.j41(0,"div",0),i.DNE(1,h,2,4,"button",1)(2,v,7,4,"div",2),i.k0s()),2&e&&(i.Y8G("ngClass",t.containerclass),i.R7$(),i.Y8G("ngForOf",t.mainactionitems),i.R7$(),i.Y8G("ngIf",t.hasAddItems))},dependencies:[r.YU,r.Sq,r.bT,d.t,c.W,u.q,m.L,n.C],encapsulation:2})}return ObjectActionContainer})()},53394:(e,t,s)=>{"use strict";s.d(t,{C:()=>d});var i=s(54438),n=s(18359),l=s(69904),o=s(83935),a=s(35911);const r=["actioncontainer"];let d=(()=>{class ObjectActionContainerItem{constructor(e,t,s,l,o,a){this.language=e,this.metadata=t,this.model=s,this.ngZone=l,this.injector=o,this.cdr=a,this.displayasicon=!1,this.actionemitter=new i.bkB,this.subscriptions=new n.yU,this.standardActions={NEW:"ObjectActionNewButton",DUPLICATE:"ObjectActionDuplicateButton",NEWRELATED:"ObjectActionNewrelatedButton",EDIT:"ObjectActionEditButton",DELETE:"ObjectActionDeleteButton",AUDIT:"ObjectActionAuditlogButton",IMPORT:"SpiceImporterImportButton",MAIL:"ObjectActionBeanToMailButton",PRINT:"ObjectActionOutputBeanButton",SELECT:"ObjectActionSelectButton",OPEN:"ObjectActionOpenButton",CANCEL:"ObjectActionCancelButton",SAVE:"ObjectActionSaveButton",SAVERELATED:"ObjectActionSaveRelatedButton"},this.stable=!1}get id(){return this.actionitem.id}get disabled(){return!this.stable||!this.componentref||!!this.componentref.instance.disabled}get hidden(){return!this.stable||!this.componentref||!!this.componentref.instance.hidden}ngAfterViewInit(){this.metadata.addComponent(this.actionitem.action?this.standardActions[this.actionitem.action]:this.actionitem.component,this.actioncontainer,this.injector).subscribe((e=>{e.instance.parent=this.model,e.instance.actionconfig=this.actionitem.actionconfig,e.instance.displayasicon=this.displayasicon,e.instance.actionemitter&&this.subscriptions.add(e.instance.actionemitter.subscribe((e=>{this.actionemitter.emit(e)}))),this.componentref=e,this.cdr.detectChanges()})),this.stableSub=this.ngZone.onStable.subscribe((e=>{this.stable=!0,this.stableSub.unsubscribe()}))}ngOnDestroy(){this.subscriptions.unsubscribe()}execute(){this.componentref&&this.componentref.instance.execute&&this.componentref.instance.execute()}static#e=this.ɵfac=function(e){return new(e||ObjectActionContainerItem)(i.rXU(l.B),i.rXU(o.yu),i.rXU(a.g),i.rXU(i.SKi),i.rXU(i.zZn),i.rXU(i.gRc))};static#t=this.ɵcmp=i.VBU({type:ObjectActionContainerItem,selectors:[["object-action-container-item"]],viewQuery:function(e,t){if(1&e&&i.GBs(r,7,i.c1b),2&e){let e;i.mGM(e=i.lsd())&&(t.actioncontainer=e.first)}},inputs:{actionitem:"actionitem",displayasicon:"displayasicon"},outputs:{actionemitter:"actionemitter"},decls:2,vars:0,consts:[["actioncontainer",""]],template:function(e,t){1&e&&i.nrm(0,"div",null,0)},encapsulation:2})}return ObjectActionContainerItem})()},23855:(e,t,s)=>{"use strict";s.d(t,{P:()=>C});var i=s(13562),n=s(44261),l=s(54438),o=s(69904),a=s(40553),r=s(35911),d=s(41731),c=s(83935),u=s(71692),m=s(60177),h=s(25863),g=s(80256),p=s(53394);function f(e,t){if(1&e){const e=l.RV6();l.j41(0,"button",7),l.bIt("click",(function(){l.eBV(e);const t=l.XpG().$implicit,s=l.XpG(3);return l.Njj(s.propagateclick(t.id))})),l.j41(1,"object-action-container-item",8),l.bIt("actionemitter",(function(t){l.eBV(e);const s=l.XpG(4);return l.Njj(s.emitaction(t))})),l.k0s()()}if(2&e){const e=l.XpG(),t=e.$implicit,s=e.first,i=e.last,n=l.XpG(3);l.Y8G("ngClass",n.addclasses(t,n.buttonsize,s,i))("disabled",n.isDisabled(t.id)),l.R7$(),l.Y8G("actionitem",t)("displayasicon",!0)}}function b(e,t){if(1&e&&(l.j41(0,"span"),l.DNE(1,f,2,4,"button",6),l.k0s()),2&e){const e=t.$implicit;l.R7$(),l.Y8G("ngIf",1==e.singlebutton||1==e.displayasicon&&null!=e.displayasicon)}}function y(e,t){if(1&e&&(l.j41(0,"div"),l.DNE(1,b,2,1,"span",5),l.k0s()),2&e){const e=l.XpG(2);l.R7$(),l.Y8G("ngForOf",e.allActionItems)}}const v=e=>({"slds-hide":e}),_=e=>({"slds-disabled-text":e});function k(e,t){if(1&e){const e=l.RV6();l.j41(0,"li",15),l.bIt("click",(function(){const t=l.eBV(e).$implicit,s=l.XpG(3);return l.Njj(s.propagateclick(t.id))})),l.j41(1,"a",16)(2,"object-action-container-item",17),l.bIt("actionemitter",(function(t){l.eBV(e);const s=l.XpG(3);return l.Njj(s.emitaction(t))})),l.k0s()()()}if(2&e){const e=t.$implicit,s=l.XpG(3);l.Y8G("ngClass",l.eq3(3,v,s.isHidden(e.id))),l.R7$(2),l.Y8G("ngClass",l.eq3(5,_,s.isDisabled(e.id)))("actionitem",e)}}function R(e,t){if(1&e&&(l.j41(0,"div",9)(1,"button",10),l.nrm(2,"system-button-icon",11),l.k0s(),l.j41(3,"div",12)(4,"ul",13),l.qex(5),l.DNE(6,k,3,7,"li",14),l.bVm(),l.k0s()()()),2&e){const e=l.XpG(2);l.R7$(),l.Y8G("ngClass",e.getButtonSizeClass()),l.R7$(),l.Y8G("icon","down"),l.R7$(),l.AVh("slds-grid","horizontal"),l.R7$(3),l.Y8G("ngForOf",e.dropdownItems)}}function I(e,t){if(1&e&&(l.j41(0,"div",2),l.DNE(1,y,2,1,"div",3)(2,R,7,5,"div",4),l.k0s()),2&e){const e=l.XpG();l.Y8G("ngClass",e.getGroupButtonClass()),l.R7$(),l.Y8G("ngIf",e.singleitems.length>0),l.R7$(),l.Y8G("ngIf",e.dropdownItems.length>0)}}function x(e,t){if(1&e){const e=l.RV6();l.j41(0,"button",22),l.bIt("click",(function(){const t=l.eBV(e).$implicit,s=l.XpG(3);return l.Njj(s.propagateclick(t.id))})),l.j41(1,"object-action-container-item",23),l.bIt("actionemitter",(function(t){l.eBV(e);const s=l.XpG(3);return l.Njj(s.emitaction(t))})),l.k0s()()}if(2&e){const e=t.$implicit,s=l.XpG(3);l.Y8G("ngClass",l.eq3(4,v,s.isHidden(e.id))),l.R7$(),l.Y8G("displayasicon",!0)("ngClass",l.eq3(6,_,s.isDisabled(e.id)))("actionitem",e)}}function j(e,t){if(1&e&&(l.j41(0,"div",20),l.DNE(1,x,2,8,"button",21),l.k0s()),2&e){const e=l.XpG(2);l.R7$(),l.Y8G("ngForOf",e.allActionItems)}}function G(e,t){if(1&e&&(l.j41(0,"div",18),l.DNE(1,j,2,1,"div",19),l.k0s()),2&e){const e=l.XpG();l.R7$(),l.Y8G("ngIf",e.allActionItems.length>0)}}let C=(()=>{class ObjectActionMenu extends n.l{constructor(e,t,s,i,n,l,o,a,r,d,c){super(e,n,s,c,d),this.language=e,this.broadcast=t,this.model=s,this.view=i,this.metadata=n,this.elementRef=l,this.renderer=o,this.helper=a,this.layout=r,this.cdRef=d,this.ngZone=c,this.buttonsize="",this.actionset="",this.allActionItems=[],this.singleitems=[],this.dropdownItems=[],this.componentconfig={},this.singleButtonSequence=0}ngOnInit(){""==this.actionset&&(this.componentconfig=this.metadata.getComponentConfig("ObjectActionMenu",this.model.module),this.actionset=this.componentconfig.actionset_default,this.setActionsets())}ngOnChanges(){this.setActionsets()}setActionsets(){let e=this.metadata.getActionSetItems(this.actionset);for(let t of e)this.allActionItems.push({disabled:!0,id:t.id,sequence:t.sequence,action:t.action,component:t.component,actionconfig:t.actionconfig,singlebutton:t.singlebutton,displayasicon:t.actionconfig?.displayasicon});this.singleitems=[...this.allActionItems].filter((e=>1==e.singlebutton||1==e.displayasicon)),this.dropdownItems=[...this.allActionItems].filter((e=>0==e.singlebutton&&(0==e.displayasicon||void 0===e.displayasicon))),this.cdRef.detectChanges()}get isSmall(){return"small"==this.layout.screenwidth}getButtonSizeClass(){if(""!==this.buttonsize)return"slds-button--icon-"+this.buttonsize}getGroupButtonClass(){const e=this.singleitems.find((e=>1==this.isHidden(e.id)));if(this.singleitems.length>0&&this.allActionItems.length>0&&null==e&&!this.isSmall)return" slds-button-group "}isHidden(e){if(!this.stable)return!1;let t=!1;if(this.actionitemlist){let s=this.actionitemlist.find((t=>t.id==e));s&&(t=s.hidden)}return t}static#e=this.ɵfac=function(e){return new(e||ObjectActionMenu)(l.rXU(o.B),l.rXU(a.m),l.rXU(r.g),l.rXU(d.U),l.rXU(c.yu),l.rXU(l.aKT),l.rXU(l.sFG),l.rXU(i.d),l.rXU(u.Z),l.rXU(l.gRc),l.rXU(l.SKi))};static#t=this.ɵcmp=l.VBU({type:ObjectActionMenu,selectors:[["object-action-menu"]],inputs:{buttonsize:"buttonsize",actionset:"actionset"},features:[l.Jv_([i.d]),l.Vt3,l.OA$],decls:3,vars:2,consts:[["role","group",3,"ngClass",4,"ngIf","ngIfElse"],["smallformfactor",""],["role","group",3,"ngClass"],[4,"ngIf"],["class","slds-dropdown-trigger slds-dropdown-trigger_click slds-button_last","system-dropdown-trigger","",4,"ngIf"],[4,"ngFor","ngForOf"],["class","slds-button slds-button_icon slds-button_icon-border-filled",3,"ngClass","disabled","click",4,"ngIf"],[1,"slds-button","slds-button_icon","slds-button_icon-border-filled",3,"ngClass","disabled","click"],[1,"slds-truncate",3,"actionitem","displayasicon","actionemitter"],["system-dropdown-trigger","",1,"slds-dropdown-trigger","slds-dropdown-trigger_click","slds-button_last"],["aria-haspopup","true",1,"slds-button","slds-button_icon","slds-button_icon-border-filled",3,"ngClass"],[3,"icon"],[1,"slds-dropdown","slds-dropdown_right","slds-dropdown_actions","slds-p-around--none",2,"max-width","initial"],["role","menu",1,"slds-dropdown__list","slds-button_stretch"],["class","slds-dropdown__item","role","presentation",3,"ngClass","click",4,"ngFor","ngForOf"],["role","presentation",1,"slds-dropdown__item",3,"ngClass","click"],["href","javascript:void(0);","role","menuitem","tabindex","-1"],[1,"slds-truncate",3,"ngClass","actionitem","actionemitter"],[1,"slds-size--1-of-1","slds-text-align--right"],["class"," slds-p-top--xx-small slds-p-horizontal--x-small slds-button-group",4,"ngIf"],[1,"slds-p-top--xx-small","slds-p-horizontal--x-small","slds-button-group"],["class","slds-button slds-button_neutral",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"slds-button","slds-button_neutral",3,"ngClass","click"],[1,"slds-truncate",3,"displayasicon","ngClass","actionitem","actionemitter"]],template:function(e,t){if(1&e&&l.DNE(0,I,3,3,"div",0)(1,G,2,1,"ng-template",null,1,l.C5r),2&e){const e=l.sdS(2);l.Y8G("ngIf",!t.isSmall)("ngIfElse",e)}},dependencies:[m.YU,m.Sq,m.bT,h.t,g.q,p.C],encapsulation:2})}return ObjectActionMenu})()},81332:(e,t,s)=>{"use strict";s.d(t,{O:()=>u});var i=s(35911),n=s(18359),l=s(54438),o=s(83935),a=s(69904),r=s(50531),d=s(91107),c=s(32062);let u=(()=>{class ObjectActionSelectButton{constructor(e,t,s,i,l,o){this.metadata=e,this.language=t,this.modal=s,this.model=i,this.parent=l,this.relatedmodels=o,this.actionconfig={},this.disabled=!0,this.subscriptions=new n.yU}ngOnInit(){this.model.module=this.relatedmodels.relatedModule,this.model.module&&this.metadata.checkModuleAcl(this.model.module,"list")&&(this.disabled=!1)}execute(){this.modal.openModal("ObjectModalModuleLookup").subscribe((e=>{if(e.instance.module=this.model.module,e.instance.multiselect=!0,e.instance.modulefilter=this.actionconfig.modulefilter,this.actionconfig.relatefilterfield){let t=this.metadata.getFieldDefs(this.model.module,this.actionconfig.relatefilterfield);t&&(e.instance.relatefilter={module:t.module,relationship:this.actionconfig.relatefilterrelationship,id:this.parent.getField(t.id_name),display:this.parent.getField(this.actionconfig.relatefilterfield),active:!!this.parent.getField(t.id_name),required:this.actionconfig.relatedfilterrequired})}e.instance.selectedItems.subscribe((e=>{this.addSelectedItems(e)}))}))}ngOnDestroy(){this.subscriptions.unsubscribe()}addSelectedItems(e){this.relatedmodels.addItems(e)}static#e=this.ɵfac=function(e){return new(e||ObjectActionSelectButton)(l.rXU(o.yu),l.rXU(a.B),l.rXU(r.y),l.rXU(i.g),l.rXU(i.g,4),l.rXU(d.K))};static#t=this.ɵcmp=l.VBU({type:ObjectActionSelectButton,selectors:[["object-action-select-button"]],features:[l.Jv_([i.g])],decls:2,vars:0,consts:[["label","LBL_SELECT"]],template:function(e,t){1&e&&(l.j41(0,"span"),l.nrm(1,"system-label",0),l.k0s())},dependencies:[c.W],encapsulation:2})}return ObjectActionSelectButton})()},76073:(e,t,s)=>{"use strict";s.d(t,{L:()=>p});var i=s(54438),n=s(56420),l=s(13562),o=s(69904),a=s(35911),r=s(83935),d=s(60177),c=s(25863),u=s(7766);const m=["acionsetcontainer"];function h(e,t){if(1&e&&(i.j41(0,"div",4),i.nrm(1,"object-actionset-menu-container",5),i.k0s()),2&e){const e=i.XpG();i.Y8G("ngClass",e.getDropdownLocationClass()),i.R7$(),i.Y8G("actionset",e.actionset)}}const g=e=>({"slds-is-open":e});let p=(()=>{class ObjectActionsetMenu{constructor(e,t,s,n,l,o,a){this.language=e,this.model=t,this.metadata=s,this.elementRef=n,this.renderer=l,this.popup=o,this.helper=a,this.actionset="",this.buttonsize="",this.action=new i.bkB,this.isOpen=!1,this.popupSubscription=this.popup.closePopup$.subscribe((e=>{this.isOpen=!1}))}ngOnDestroy(){this.popupSubscription.unsubscribe()}hasNoActions(){return!1}toggleOpen(){this.isOpen=!this.isOpen,this.isOpen?this.clickListener=this.renderer.listen("document","click",(e=>this.onClick(e))):this.clickListener&&this.clickListener()}onClick(e){this.elementRef.nativeElement.contains(e.target)||(this.isOpen=!1)}getButtonSizeClass(){if(""!==this.buttonsize)return"slds-button--icon-"+this.buttonsize}getDropdownLocationClass(){let e=this.elementRef.nativeElement.getBoundingClientRect();if(window.innerHeight-e.bottom<100)return"slds-dropdown--bottom"}static#e=this.ɵfac=function(e){return new(e||ObjectActionsetMenu)(i.rXU(o.B),i.rXU(a.g),i.rXU(r.yu),i.rXU(i.aKT),i.rXU(i.sFG),i.rXU(n.l),i.rXU(l.d))};static#t=this.ɵcmp=i.VBU({type:ObjectActionsetMenu,selectors:[["object-actionset-menu"]],viewQuery:function(e,t){if(1&e&&i.GBs(m,7,i.c1b),2&e){let e;i.mGM(e=i.lsd())&&(t.acionsetcontainer=e.first)}},inputs:{actionset:"actionset",buttonsize:"buttonsize"},outputs:{action:"action"},features:[i.Jv_([n.l,l.d])],decls:4,vars:7,consts:[[1,"slds-dropdown-trigger","slds-dropdown-trigger--click",3,"ngClass"],["aria-haspopup","true",1,"slds-button","slds-button--icon-border-filled",3,"ngClass","disabled","click"],[3,"icon"],["class","slds-dropdown slds-dropdown--right",3,"ngClass",4,"ngIf"],[1,"slds-dropdown","slds-dropdown--right",3,"ngClass"],[3,"actionset"]],template:function(e,t){1&e&&(i.j41(0,"div",0)(1,"button",1),i.bIt("click",(function(){return t.toggleOpen()})),i.nrm(2,"system-button-icon",2),i.k0s(),i.DNE(3,h,2,2,"div",3),i.k0s()),2&e&&(i.Y8G("ngClass",i.eq3(5,g,t.isOpen)),i.R7$(),i.Y8G("ngClass",t.getButtonSizeClass())("disabled",t.hasNoActions()),i.R7$(),i.Y8G("icon","down"),i.R7$(),i.Y8G("ngIf",t.isOpen))},dependencies:[d.YU,d.bT,c.t,u.M],encapsulation:2})}return ObjectActionsetMenu})()},7766:(e,t,s)=>{"use strict";s.d(t,{M:()=>c});var i=s(54438),n=s(56420),l=s(13562),o=s(69904),a=s(35911),r=s(83935);const d=["acionsetcontainer"];let c=(()=>{class ObjectActionsetMenuContainer{constructor(e,t,s,n,l,o){this.language=e,this.model=t,this.metadata=s,this.elementRef=n,this.popup=l,this.helper=o,this.actionset="",this.action=new i.bkB}ngAfterViewInit(){if(""!=this.actionset){let e=this.metadata.getActionSetItems(this.actionset);for(let t of e)if(t.component)this.metadata.addComponent(t.component,this.acionsetcontainer);else switch(t.action){case"EDIT":this.metadata.addComponent("ObjectActionsetMenuContainerEdit",this.acionsetcontainer);break;case"DELETE":this.metadata.addComponent("ObjectActionsetMenuContainerDelete",this.acionsetcontainer)}}}static#e=this.ɵfac=function(e){return new(e||ObjectActionsetMenuContainer)(i.rXU(o.B),i.rXU(a.g),i.rXU(r.yu),i.rXU(i.aKT),i.rXU(n.l),i.rXU(l.d))};static#t=this.ɵcmp=i.VBU({type:ObjectActionsetMenuContainer,selectors:[["object-actionset-menu-container"]],viewQuery:function(e,t){if(1&e&&i.GBs(d,7,i.c1b),2&e){let e;i.mGM(e=i.lsd())&&(t.acionsetcontainer=e.first)}},inputs:{actionset:"actionset"},outputs:{action:"action"},features:[i.Jv_([n.l,l.d])],decls:3,vars:0,consts:[["role","menu",1,"slds-dropdown__list"],["acionsetcontainer",""]],template:function(e,t){1&e&&(i.j41(0,"ul",0),i.nrm(1,"div",null,1),i.k0s())},encapsulation:2})}return ObjectActionsetMenuContainer})()},28134:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});var i=s(54438),n=s(35911),l=s(83935),o=s(60595);let a=(()=>{class ObjectEditModalDialogContainer{constructor(e,t){this.model=e,this.metadata=t,this.componentSet=""}ngOnInit(){if(!this.componentSet||""==this.componentSet){let e=this.metadata.getComponentConfig("ObjectRecordDetails",this.model.module);this.componentSet=e.componentset}}static#e=this.ɵfac=function(e){return new(e||ObjectEditModalDialogContainer)(i.rXU(n.g),i.rXU(l.yu))};static#t=this.ɵcmp=i.VBU({type:ObjectEditModalDialogContainer,selectors:[["object-edit-modal-dialog-container"]],inputs:{componentSet:"componentSet"},decls:1,vars:1,consts:[[3,"componentset"]],template:function(e,t){1&e&&i.nrm(0,"system-componentset",0),2&e&&i.Y8G("componentset",t.componentSet)},dependencies:[o.F],encapsulation:2})}return ObjectEditModalDialogContainer})()},64914:(e,t,s)=>{"use strict";s.d(t,{Y:()=>S});var i=s(18359),n=s(65245),l=s(54438),o=s(57363),a=s(83935),r=s(75103),d=s(69904),c=s(50531),u=s(71692),m=s(60177),h=s(18039),g=s(25863),p=s(58461),f=s(32062),b=s(42205),y=s(28933),v=s(76115),_=s(94861);function k(e,t){if(1&e&&l.nrm(0,"tr",8),2&e){const e=t.$implicit,s=t.index,i=l.XpG(2);l.Y8G("rownumbers",i.rowNumbers)("rowNumber",s+1)("listItem",e)("inlineedit",i.inlineedit)("rowselect",!0)}}function R(e,t){if(1&e&&(l.qex(0),l.DNE(1,k,1,5,"tr",7),l.bVm()),2&e){const e=l.XpG();l.R7$(),l.Y8G("ngForOf",e.modellist.listData.list)}}function I(e,t){if(1&e&&l.nrm(0,"tr",10),2&e){const e=t.$implicit,s=t.index,i=l.XpG(2);l.Y8G("cdkDragData",e)("rownumbers",i.rowNumbers)("dragHandles",i.dragAndDrop)("rowNumber",s+1)("listItem",e)("inlineedit",i.inlineedit)("rowselect",!0)}}function x(e,t){if(1&e&&(l.qex(0),l.DNE(1,I,1,7,"tr",9),l.bVm()),2&e){const e=l.XpG();l.R7$(),l.Y8G("ngForOf",e.modellist.listData.list)}}function j(e,t){if(1&e&&l.nrm(0,"tbody",11),2&e){const e=l.XpG();l.Y8G("columns",e.modellist.listfields.length)("select",!0)("rownumbers",e.rowNumbers)("dragHandles",e.dragAndDrop)("tools",!0)("rows",20)}}function G(e,t){if(1&e){const e=l.RV6();l.j41(0,"div",12)(1,"button",13),l.bIt("click",(function(){l.eBV(e);const t=l.XpG();return l.Njj(t.loadMore())})),l.nrm(2,"system-button-icon",14)(3,"system-label",15),l.k0s()()}}function C(e,t){1&e&&(l.j41(0,"div",16)(1,"system-illustration-no-records"),l.nrm(2,"system-label",17),l.k0s()())}const w=e=>({"slds-table--bordered":e});let S=(()=>{class ObjectList{constructor(e,t,s,n,l,o,a,r){this.router=e,this.cdRef=t,this.metadata=s,this.modellist=n,this.language=l,this.injector=o,this.modal=a,this.layout=r,this.subscriptions=new i.yU,this.componentconfig={},this.dragAndDrop=!1}get actionset(){return this.componentconfig.actionset}get isloading(){return this.modellist.isLoading}get inlineedit(){return this.componentconfig.inlineedit}get issmall(){return"small"==this.layout.screenwidth}get sortfield(){return this.componentconfig.sortfield}get sortdirection(){return this.componentconfig.sortdirection?this.componentconfig.sortdirection:"ASC"}get rowNumbers(){return!0===this.componentconfig.rownumbers}get noAutoLoad(){return!0===this.componentconfig.noautoload}get canLoadMore(){return this.modellist.canLoadMore()}ngOnInit(){this.initialize()}ngOnDestroy(){this.subscriptions.unsubscribe(),this.modellist.useCache=!1}loadMore(){this.modellist.loadMoreList()}onScroll(){this.noAutoLoad||this.modellist.loadMoreList()}trackbyfn(e,t){return t.id}initialize(){this.loadComponentConfig(),this.chooseFields(),this.modellist.loadlimit=50,this.modellist.buckets={},this.modellist.loadFromSession()||(this.componentconfig.sortfield&&(this.modellist.sortArray=[{sortfield:this.componentconfig.sortfield,sortdirection:this.componentconfig.sortdirection??"ASC"}]),this.getListData()),this.subscriptions.add(this.modellist.listType$.pipe((0,n.i)(1)).subscribe((e=>this.handleListTypeChange(e)))),this.subscriptions.add(this.modellist.listDataChanged$.subscribe((()=>{this.cdRef.detectChanges()})))}handleListTypeChange(e){this.cdRef.detectChanges(),"ObjectList"==e.listcomponent&&(this.chooseFields(),this.getListData())}loadComponentConfig(){this.componentconfig=this.metadata.getComponentConfig("ObjectList",this.modellist.module),"disableAutoloadListAll"in this.componentconfig||(this.componentconfig.disableAutoloadListAll=this.modellist.disableAutoloadListAll)}getListData(){"all"==this.modellist.currentList.id&&this.componentconfig?.disableAutoloadListAll?this.modellist.resetListData():this.modellist.getListData().subscribe((()=>this.cdRef.detectChanges()))}chooseFields(){this.modellist.isCustomList()&&0==this.modellist.listfields.length&&0==this.modellist.getFieldDefs()?.length&&this.modellist.checkAccess("edit")&&this.modal.openModal("ObjectListViewSettingsSetfieldsModal",!0,this.injector)}static#e=this.ɵfac=function(e){return new(e||ObjectList)(l.rXU(o.Ix),l.rXU(l.gRc),l.rXU(a.yu),l.rXU(r.K),l.rXU(d.B),l.rXU(l.zZn),l.rXU(c.y),l.rXU(u.Z))};static#t=this.ɵcmp=l.VBU({type:ObjectList,selectors:[["object-list"]],inputs:{dragAndDrop:"dragAndDrop"},decls:11,vars:11,consts:[[1,"slds-theme--default",2,"min-height","100px",3,"system-to-bottom"],["cdkDropList","","cdkDropListSortingDisabled","","role","grid",1,"slds-table","slds-table--fixed-layout","slds-max-medium-table--stacked-horizontal","slds-table--header-fixed",3,"ngClass"],["object-list-header","",1,"slds-text-title--caps",3,"actionset","showRowNumber","showDragHandle"],[4,"ngIf"],["system-table-stencils","",3,"columns","select","rownumbers","dragHandles","tools","rows",4,"ngIf"],["class","slds-size--1-of-1 slds-p-around--small slds-align--absolute-center",4,"ngIf"],["class","slds-align--absolute-center","style","height: calc(100% - 35px)",4,"ngIf"],["object-list-item","","class","slds-hint-parent",3,"rownumbers","rowNumber","listItem","inlineedit","rowselect",4,"ngFor","ngForOf"],["object-list-item","",1,"slds-hint-parent",3,"rownumbers","rowNumber","listItem","inlineedit","rowselect"],["object-list-item","","cdkDrag","","class","slds-hint-parent slds-drag--preview",3,"cdkDragData","rownumbers","dragHandles","rowNumber","listItem","inlineedit","rowselect",4,"ngFor","ngForOf"],["object-list-item","","cdkDrag","",1,"slds-hint-parent","slds-drag--preview",3,"cdkDragData","rownumbers","dragHandles","rowNumber","listItem","inlineedit","rowselect"],["system-table-stencils","",3,"columns","select","rownumbers","dragHandles","tools","rows"],[1,"slds-size--1-of-1","slds-p-around--small","slds-align--absolute-center"],[1,"slds-button","slds-button--neutral",3,"click"],["icon","skip_forward",1,"slds-p-right--x-small"],["label","LBL_LOAD_MORE"],[1,"slds-align--absolute-center",2,"height","calc(100% - 35px)"],["label","MSG_NO_RECORDS_FOUND"]],template:function(e,t){1&e&&(l.qex(0),l.j41(1,"div",0),l.bIt("system-to-bottom",(function(){return t.onScroll()})),l.j41(2,"table",1)(3,"thead"),l.nrm(4,"tr",2),l.k0s(),l.j41(5,"tbody"),l.DNE(6,R,2,1,"ng-container",3)(7,x,2,1,"ng-container",3),l.k0s(),l.DNE(8,j,1,6,"tbody",4),l.k0s(),l.DNE(9,G,4,0,"div",5)(10,C,3,0,"div",6),l.k0s(),l.bVm()),2&e&&(l.R7$(2),l.Y8G("ngClass",l.eq3(9,w,!t.issmall)),l.R7$(2),l.Y8G("actionset",t.actionset)("showRowNumber",t.rowNumbers)("showDragHandle",t.dragAndDrop),l.R7$(2),l.Y8G("ngIf",!t.dragAndDrop),l.R7$(),l.Y8G("ngIf",t.dragAndDrop),l.R7$(),l.Y8G("ngIf",t.isloading),l.R7$(),l.Y8G("ngIf",t.noAutoLoad&&t.canLoadMore),l.R7$(),l.Y8G("ngIf",!t.modellist.isLoading&&0==t.modellist.listData.totalcount))},dependencies:[m.YU,m.Sq,m.bT,h.O7,h.T1,g.t,p.b,f.W,b.t,y.b,v.Z,_.R],encapsulation:2,changeDetection:0})}return ObjectList})()},76115:(e,t,s)=>{"use strict";s.d(t,{Z:()=>I});var i=s(41731),n=s(87395),l=s(18359),o=s(54438),a=s(75103),r=s(69904),d=s(71692),c=s(60177),u=s(766),m=s(37507),h=s(74406);const g=["object-list-header",""];function p(e,t){1&e&&o.nrm(0,"th",5)}function f(e,t){1&e&&(o.j41(0,"th",6)(1,"div",7),o.EFF(2,"#"),o.k0s()())}function b(e,t){if(1&e&&o.nrm(0,"object-list-header-actionmenu",10),2&e){const e=o.XpG(2);o.Y8G("actionset",e.actionset)("displayasicon",e.isSmall)}}function y(e,t){if(1&e&&(o.j41(0,"th",8),o.DNE(1,b,1,2,"object-list-header-actionmenu",9),o.k0s()),2&e){const e=o.XpG();o.R7$(),o.Y8G("ngIf",e.actionset)}}function v(e,t){if(1&e){const e=o.RV6();o.qex(0),o.j41(1,"a",14),o.bIt("click",(function(){o.eBV(e);const t=o.XpG().$implicit,s=o.XpG();return o.Njj(s.setSortField(t))})),o.nrm(2,"field-label",15)(3,"object-list-header-sort",16),o.k0s(),o.bVm()}if(2&e){const e=o.XpG().$implicit;o.R7$(2),o.Y8G("fieldname",e.field)("fieldconfig",e.fieldconfig),o.R7$(),o.Y8G("field",e)}}function _(e,t){if(1&e&&o.nrm(0,"field-label",17),2&e){const e=o.XpG().$implicit;o.Y8G("fieldname",e.field)("fieldconfig",e.fieldconfig)}}function k(e,t){if(1&e){const e=o.RV6();o.j41(0,"th",11),o.bIt("system-resize",(function(t){o.eBV(e);const s=o.XpG();return o.Njj(s.onresize(t))})),o.DNE(1,v,4,3,"ng-container",12)(2,_,1,2,"ng-template",null,13,o.C5r),o.k0s()}if(2&e){const e=t.$implicit,s=o.sdS(3),i=o.XpG();o.Y8G("resizeid",e.id)("width",i.columnWidth(e.id)),o.R7$(),o.Y8G("ngIf",i.isSortable(e))("ngIfElse",s)}}function R(e,t){if(1&e&&o.nrm(0,"th",18),2&e){const e=o.XpG();o.Y8G("ngClass",e.getHeaderWidth)}}let I=(()=>{class ObjectListHeader{constructor(e,t,s,i,n,o){this.modellist=e,this.language=t,this.view=s,this.elementRef=i,this.layout=n,this.cdref=o,this.actionset="",this.showSelectColumn=!0,this.showRowNumber=!1,this.showDragHandle=!1,this.showRowActionMenu=!0,this.subscriptions=new l.yU,this.view.labels="short",this.subscriptions.add(this.modellist.listfield$.subscribe((e=>this.cdref.detectChanges())))}ngOnDestroy(){this.subscriptions.unsubscribe()}get isSmall(){return"small"==this.layout.screenwidth}get listfields(){return this.modellist.listfields}get module(){return this.modellist.module}columnWidth(e){let t=this.listfields.find((t=>t.id==e));return t.width?t.width+"%":100/this.listfields.length+"%"}isSortable(e){return!0===e.fieldconfig.sortable}hasRevertedSortOrder(e){return!!e.fieldconfig.sortordersequence}setSortField(e){this.isSortable(e)&&(this.modellist.setSortField(e.field,null,!0,this.hasRevertedSortOrder(e)),this.reloadTimeOut&&window.clearTimeout(this.reloadTimeOut),this.reloadTimeOut=window.setTimeout((()=>this.modellist.reLoadList()),500))}onresize(e){let t={},s=0;this.resizeElements.forEach((e=>{let i=e.getElementWidth();s+=i,t[e.resizeid]=e.getElementWidth()}));for(let e of this.listfields)e.width=Math.round(t[e.id]/s*100)}get getHeaderWidth(){return"edit"==this.modellist.listItemMode?"slds-size_1-of-12":"slds-cell-shrink"}static#e=this.ɵfac=function(e){return new(e||ObjectListHeader)(o.rXU(a.K),o.rXU(r.B),o.rXU(i.U),o.rXU(o.aKT),o.rXU(d.Z),o.rXU(o.gRc))};static#t=this.ɵcmp=o.VBU({type:ObjectListHeader,selectors:[["","object-list-header",""]],viewQuery:function(e,t){if(1&e&&o.GBs(n.T,5),2&e){let e;o.mGM(e=o.lsd())&&(t.resizeElements=e)}},inputs:{actionset:"actionset",showSelectColumn:"showSelectColumn",showRowNumber:"showRowNumber",showDragHandle:"showDragHandle",showRowActionMenu:"showRowActionMenu"},features:[o.Jv_([i.U])],attrs:g,decls:5,vars:5,consts:[["scope","col","style","width:1.5rem",4,"ngIf"],["style","width:4rem","scope","col",4,"ngIf"],["style","width:2rem","scope","col",4,"ngIf"],["scope","col","class","slds-resizable",3,"resizeid","width","system-resize",4,"ngFor","ngForOf"],["scope","col",3,"ngClass",4,"ngIf"],["scope","col",2,"width","1.5rem"],["scope","col",2,"width","4rem"],[1,"slds-text-align--center","slds-text-body--small","slds-text-color--inverse-weak"],["scope","col",2,"width","2rem"],["class","slds-p-left--x-small",3,"actionset","displayasicon",4,"ngIf"],[1,"slds-p-left--x-small",3,"actionset","displayasicon"],["scope","col",1,"slds-resizable",3,"resizeid","width","system-resize"],[4,"ngIf","ngIfElse"],["nosort",""],["href","javascript:void(0);",1,"slds-th__action","slds-text-link--reset",3,"click"],["addclasses","slds-truncate",1,"slds-truncate",3,"fieldname","fieldconfig"],[3,"field"],["addclasses","slds-truncate slds-p-vertical--xx-small slds-p-horizontal--x-small",3,"fieldname","fieldconfig"],["scope","col",3,"ngClass"]],template:function(e,t){1&e&&o.DNE(0,p,1,0,"th",0)(1,f,3,0,"th",1)(2,y,2,1,"th",2)(3,k,4,4,"th",3)(4,R,1,1,"th",4),2&e&&(o.Y8G("ngIf",t.showDragHandle),o.R7$(),o.Y8G("ngIf",t.showRowNumber),o.R7$(),o.Y8G("ngIf",t.showSelectColumn),o.R7$(),o.Y8G("ngForOf",t.listfields),o.R7$(),o.Y8G("ngIf",t.showRowActionMenu))},dependencies:[c.YU,c.Sq,c.bT,u.b,n.T,m.P,h.c],encapsulation:2})}return ObjectListHeader})()},74406:(e,t,s)=>{"use strict";s.d(t,{c:()=>_});var i=s(44261),n=s(54438),l=s(75103),o=s(69904),a=s(83935),r=s(35911),d=s(50531),c=s(60177),u=s(25863),m=s(32062),h=s(54546),g=s(22465),p=s(53394);const f=e=>({"slds-hide":e}),b=e=>({"slds-disabled-text":e});function y(e,t){if(1&e){const e=n.RV6();n.j41(0,"li",12),n.bIt("click",(function(){const t=n.eBV(e).$implicit,s=n.XpG(2);return n.Njj(s.propagateclick(t.id))})),n.j41(1,"a",7)(2,"object-action-container-item",13),n.bIt("actionemitter",(function(t){n.eBV(e);const s=n.XpG(2);return n.Njj(s.emitaction(t))})),n.k0s()()()}if(2&e){const e=t.$implicit,s=n.XpG(2);n.Y8G("ngClass",n.eq3(4,f,s.isHidden(e.id))),n.R7$(2),n.Y8G("displayasicon",s.displayasicon)("ngClass",n.eq3(6,b,s.isDisabled(e.id)))("actionitem",e)}}function v(e,t){if(1&e&&(n.qex(0),n.DNE(1,y,3,8,"li",10),n.nrm(2,"li",11),n.bVm()),2&e){const e=n.XpG();n.R7$(),n.Y8G("ngForOf",e.actionitems)}}let _=(()=>{class ObjectListHeaderActionMenu extends i.l{constructor(e,t,s,i,n,l,o,a){super(t,s,i,n,l),this.modellist=e,this.language=t,this.metadata=s,this.model=i,this.ngZone=n,this.cdRef=l,this.modal=o,this.injector=a,this.actionitems=[]}ngOnChanges(){let e=this.metadata.getActionSetItems(this.actionset);this.actionitems=[];for(let t of e)this.actionitems.push({disabled:!0,id:t.id,sequence:t.sequence,action:t.action,component:t.component,actionconfig:t.actionconfig})}get selectAll(){return"all"===this.modellist.listSelected.type}get hasSelection(){return this.modellist.getSelectedCount()>0}chooseFields(){if(!this.canChooseFields)return!1;this.modal.openModal("ObjectListViewSettingsSetfieldsModal",!0,this.injector)}get canChooseFields(){return"all"!=this.modellist.currentList.id&&"owner"!=this.modellist.currentList.id&&this.modellist.checkAccess("edit")}static#e=this.ɵfac=function(e){return new(e||ObjectListHeaderActionMenu)(n.rXU(l.K),n.rXU(o.B),n.rXU(a.yu),n.rXU(r.g),n.rXU(n.SKi),n.rXU(n.gRc),n.rXU(d.y),n.rXU(n.zZn))};static#t=this.ɵcmp=n.VBU({type:ObjectListHeaderActionMenu,selectors:[["object-list-header-actionmenu"]],features:[n.Vt3,n.OA$],decls:10,vars:5,consts:[["system-dropdown-trigger-simple","",1,"slds-dropdown-trigger","slds-dropdown-trigger--click"],["system-title","LBL_SETTINGS",1,"slds-button","slds-button--icon"],[3,"icon"],[1,"slds-dropdown","slds-dropdown--left","slds-m-top--x-small"],["role","menu",1,"slds-dropdown__list"],[4,"ngIf"],["role","presentation",1,"slds-dropdown__item",3,"click"],["href","javascript:void(0);","role","menuitem","tabindex","-1"],[3,"ngClass"],["label","LBL_SETFIELDS"],["class","slds-dropdown__item","role","presentation",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"slds-has-divider--bottom-space"],["role","presentation",1,"slds-dropdown__item",3,"ngClass","click"],[1,"slds-truncate",3,"displayasicon","ngClass","actionitem","actionemitter"]],template:function(e,t){1&e&&(n.j41(0,"div",0)(1,"button",1),n.nrm(2,"system-button-icon",2),n.k0s(),n.j41(3,"div",3)(4,"ul",4),n.DNE(5,v,3,1,"ng-container",5),n.j41(6,"li",6),n.bIt("click",(function(){return t.chooseFields()})),n.j41(7,"a",7)(8,"span",8),n.nrm(9,"system-label",9),n.k0s()()()()()()),2&e&&(n.R7$(2),n.Y8G("icon","down"),n.R7$(3),n.Y8G("ngIf",t.actionitems.length>0),n.R7$(3),n.Y8G("ngClass",n.eq3(3,b,!t.canChooseFields)))},dependencies:[c.YU,c.Sq,c.bT,u.t,m.W,h.C,g.L,p.C],encapsulation:2})}return ObjectListHeaderActionMenu})()},37507:(e,t,s)=>{"use strict";s.d(t,{P:()=>u});var i=s(54438),n=s(75103),l=s(60177),o=s(18521);function a(e,t){1&e&&i.nrm(0,"system-utility-icon",5)}function r(e,t){if(1&e&&i.nrm(0,"system-utility-icon",6),2&e){const e=i.XpG(2);i.Y8G("icon",e.sortIcon)}}function d(e,t){if(1&e&&(i.j41(0,"div",7),i.EFF(1),i.k0s()),2&e){const e=i.XpG(2);i.R7$(),i.JRh(e.sortindex)}}function c(e,t){if(1&e&&(i.j41(0,"div",1),i.DNE(1,a,1,0,"system-utility-icon",2)(2,r,1,1,"system-utility-icon",3)(3,d,2,1,"div",4),i.k0s()),2&e){const e=i.XpG();i.R7$(),i.Y8G("ngIf",!e.sortIcon),i.R7$(),i.Y8G("ngIf",e.sortIcon),i.R7$(),i.Y8G("ngIf",e.sortindex>0)}}let u=(()=>{class ObjectListHeaderSort{constructor(e){this.modellist=e}get module(){return this.modellist.module}get isSortable(){return!0===this.field.fieldconfig.sortable}get sortIcon(){let e=this.modellist.getSortField(this.field.field);return e?"ASC"==e.sortdirection?"arrowup":"arrowdown":""}get sortindex(){let e=this.modellist.getSortField(this.field.field);return e&&e.sortitems>1?e.sortindex+1:""}static#e=this.ɵfac=function(e){return new(e||ObjectListHeaderSort)(i.rXU(n.K))};static#t=this.ɵcmp=i.VBU({type:ObjectListHeaderSort,selectors:[["object-list-header-sort"]],inputs:{field:"field"},decls:1,vars:1,consts:[["class","slds-grid slds-grid--vertical-align-center slds-p-horizontal--xx-small",4,"ngIf"],[1,"slds-grid","slds-grid--vertical-align-center","slds-p-horizontal--xx-small"],["icon","sort","size","xx-small","colorclass","slds-icon-text-light",4,"ngIf"],["size","xx-small",3,"icon",4,"ngIf"],["class","slds-align--absolute-center slds-theme--info","style","height: 18px; width: 18px; border-radius: 9px",4,"ngIf"],["icon","sort","size","xx-small","colorclass","slds-icon-text-light"],["size","xx-small",3,"icon"],[1,"slds-align--absolute-center","slds-theme--info",2,"height","18px","width","18px","border-radius","9px"]],template:function(e,t){1&e&&i.DNE(0,c,4,3,"div",0),2&e&&i.Y8G("ngIf",t.isSortable)},dependencies:[l.bT,o.B],encapsulation:2})}return ObjectListHeaderSort})()},94861:(e,t,s)=>{"use strict";s.d(t,{R:()=>I});var i=s(54438),n=s(35911),l=s(41731),o=s(92462),a=s(75103),r=s(57363),d=s(69904),c=s(60177),u=s(18039),m=s(84341),h=s(15091),g=s(84359),p=s(18521),f=s(23855);const b=["object-list-item",""];function y(e,t){if(1&e&&(i.j41(0,"td",4)(1,"div",5),i.EFF(2),i.k0s()()),2&e){const e=i.XpG();i.Y8G("ngClass",e.model.alert),i.R7$(2),i.JRh(e.rowNumber)}}function v(e,t){if(1&e&&(i.j41(0,"td",6),i.nrm(1,"system-utility-icon",7),i.k0s()),2&e){const e=i.XpG();i.Y8G("ngClass",e.model.alert),i.R7$(),i.Y8G("icon","drag_and_drop")("size","x-small")}}function _(e,t){if(1&e){const e=i.RV6();i.j41(0,"td",6)(1,"system-checkbox",8),i.mxI("ngModelChange",(function(t){i.eBV(e);const s=i.XpG();return i.DH7(s.listItem.selected,t)||(s.listItem.selected=t),i.Njj(t)})),i.k0s()()}if(2&e){const e=i.XpG();i.Y8G("ngClass",e.model.alert),i.R7$(),i.Y8G("disabled",e.rowselectdisabled),i.R50("ngModel",e.listItem.selected)}}function k(e,t){if(1&e&&(i.j41(0,"td",9),i.nrm(1,"field-container",10),i.k0s()),2&e){const e=t.$implicit,s=i.XpG();i.Y8G("ngClass",s.model.alert),i.BMQ("data-label",s.language.getFieldDisplayName(s.model.module,e.field)),i.R7$(),i.Y8G("field",e.field)("fieldconfig",e.fieldconfig)("fielddisplayclass","slds-truncate slds-p-horizontal--x-small")}}function R(e,t){if(1&e&&(i.j41(0,"td",11),i.nrm(1,"object-action-menu",12),i.k0s()),2&e){const e=i.XpG();i.Y8G("ngClass",e.model.alert),i.R7$(),i.Y8G("buttonsize","small")}}let I=(()=>{class ObjectListItem{constructor(e,t,s,n,l,o,a){this.model=e,this.modelutilities=t,this.modellist=s,this.view=n,this.router=l,this.language=o,this.cdref=a,this.rowselect=!1,this.rownumbers=!1,this.dragHandles=!1,this.rowselectdisabled=!1,this.listItem={},this.inlineedit=!1,this.displaylinks=!0,this.showActionMenu=!0,this.subscriptions=[],this.listItemEditing=new i.bkB,this.view.displayLabels=!1}get listFields(){return this.editing,this._listFields??this.modellist.listfields}ngOnInit(){this.model.module=this.modellist.module,this.model.id=this.listItem.id,this.model.setData(this.listItem),this.model.validate("change"),this.model.initializeFieldsStati(),this.model.initializeFieldsAlertStyles(this.listItem),this.view.isEditable=this.inlineedit&&this.model.checkAccess("edit"),this.view.displayLinks=this.displaylinks,this.subscriptions.push(this.model.data$.subscribe((e=>this.cdref.detectChanges()))),this.subscriptions.push(this.modellist.listfield$.subscribe((e=>this.cdref.detectChanges()))),this.subscriptions.push(this.modellist.selectionChanged$.subscribe((e=>this.cdref.detectChanges())))}ngOnDestroy(){for(let e of this.subscriptions)e.unsubscribe()}navigateDetail(){this.router.navigate(["/module/"+this.model.module+"/"+this.model.id])}get editing(){return this.view.mode$.subscribe((e=>{this.modellist.listItemMode=e})),""}static#e=this.ɵfac=function(e){return new(e||ObjectListItem)(i.rXU(n.g),i.rXU(o.g),i.rXU(a.K),i.rXU(l.U),i.rXU(r.Ix),i.rXU(d.B),i.rXU(i.gRc))};static#t=this.ɵcmp=i.VBU({type:ObjectListItem,selectors:[["","object-list-item",""]],inputs:{_listFields:[i.Mj6.None,"listFields","_listFields"],rowselect:"rowselect",rownumbers:"rownumbers",dragHandles:"dragHandles",rowselectdisabled:"rowselectdisabled",listItem:"listItem",inlineedit:"inlineedit",displaylinks:"displaylinks",rowNumber:"rowNumber",showActionMenu:"showActionMenu"},outputs:{listItemEditing:"object-list-item"},features:[i.Jv_([n.g,l.U])],attrs:b,decls:5,vars:5,consts:[["role","gridcell","class","slds-show--medium","style","min-width: 3rem; display: table-cell;",3,"ngClass",4,"ngIf"],["role","gridcell","class","slds-show--medium","style","display: table-cell;",3,"ngClass",4,"ngIf"],["style","min-width: 2rem; display: table-cell;","scope","row",3,"ngClass",4,"ngFor","ngForOf"],["role","gridcell","style","display: table-cell;",3,"ngClass",4,"ngIf"],["role","gridcell",1,"slds-show--medium",2,"min-width","3rem","display","table-cell",3,"ngClass"],[1,"slds-text-align--center","slds-text-body--small","slds-text-color--inverse-weak"],["role","gridcell",1,"slds-show--medium",2,"display","table-cell",3,"ngClass"],["cdkDragHandle","",2,"cursor","move",3,"icon","size"],[3,"disabled","ngModel","ngModelChange"],["scope","row",2,"min-width","2rem","display","table-cell",3,"ngClass"],[3,"field","fieldconfig","fielddisplayclass"],["role","gridcell",2,"display","table-cell",3,"ngClass"],[3,"buttonsize"]],template:function(e,t){1&e&&i.DNE(0,y,3,2,"td",0)(1,v,2,3,"td",1)(2,_,2,3,"td",1)(3,k,2,5,"td",2)(4,R,2,2,"td",3),2&e&&(i.Y8G("ngIf",t.rownumbers),i.R7$(),i.Y8G("ngIf",t.dragHandles),i.R7$(),i.Y8G("ngIf",t.rowselect),i.R7$(),i.Y8G("ngForOf",t.listFields),i.R7$(),i.Y8G("ngIf",t.showActionMenu))},dependencies:[c.YU,c.Sq,c.bT,u.Fb,m.BC,m.vS,h.y,g.f,p.B,f.P],styles:["\n\n\n\n\n\n\n\n\n\n\n[_nghost-%COMP%]   field-container[_ngcontent-%COMP%]   global-button-icon[_ngcontent-%COMP%]{display:none}","\n\n\n\n\n\n\n\n\n\n\n[_nghost-%COMP%]:hover   field-container[_ngcontent-%COMP%]   global-button-icon[_ngcontent-%COMP%]{display:inline}"],changeDetection:0})}return ObjectListItem})()},37265:(e,t,s)=>{"use strict";s.d(t,{f:()=>p});var i=s(18359),n=s(54438),l=s(75103),o=s(69904),a=s(60177),r=s(25863),d=s(32062),c=s(18521),u=s(54546);const m=e=>({"slds-is-selected":e});function h(e,t){if(1&e){const e=n.RV6();n.j41(0,"li",11),n.bIt("click",(function(){const t=n.eBV(e).$implicit,s=n.XpG();return n.Njj(s.setListType(t.id))})),n.j41(1,"a",12)(2,"span",13),n.nrm(3,"system-utility-icon",14),n.EFF(4),n.k0s()()()}if(2&e){const e=t.$implicit,s=n.XpG();n.Y8G("ngClass",n.eq3(2,m,s.modellist.currentList.id==e.id)),n.R7$(4),n.SpI(" ",e.name," ")}}function g(e,t){if(1&e){const e=n.RV6();n.j41(0,"li",11),n.bIt("click",(function(){const t=n.eBV(e).$implicit,s=n.XpG();return n.Njj(s.setListType(t.id))})),n.j41(1,"a",12)(2,"span",13),n.nrm(3,"system-utility-icon",14),n.EFF(4),n.k0s(),n.nrm(5,"system-utility-icon",15),n.k0s()()}if(2&e){const e=t.$implicit,s=n.XpG();n.Y8G("ngClass",n.eq3(3,m,e.id==s.modellist.currentList.id)),n.R7$(4),n.SpI(" ",e.name," "),n.R7$(),n.Y8G("icon",e.icon)}}let p=(()=>{class ObjectListTypes{constructor(e,t,s,n){this.modellist=e,this.elementRef=t,this.renderer=s,this.language=n,this.listTypes=[],this.subscription=new i.yU,this.showMenu=!1,this.initialize()}get disabled(){return this.modellist.standardLists.length+this.listTypes.length<=1}initialize(){this.setListTypes(),this.subscription=this.modellist.listType$.subscribe((()=>{this.setListTypes()}))}setListTypes(){this.listTypes=this.modellist.getListTypes(!1).map((e=>({...e,icon:e.global&&"0"!=e.global?"world":"user"}))).sort(((e,t)=>e.name.toLowerCase()>t.name.toLowerCase()?1:-1))}setListType(e="all"){this.modellist.setListType(e),this.showMenu=!1}onClick(e){if(!e.target)return;this.elementRef.nativeElement.contains(e.target)||(this.showMenu=!1)}getListtypeIcon(e){return e.global&&"0"!=e.global?"world":"user"}static#e=this.ɵfac=function(e){return new(e||ObjectListTypes)(n.rXU(l.K),n.rXU(n.aKT),n.rXU(n.sFG),n.rXU(o.B))};static#t=this.ɵcmp=n.VBU({type:ObjectListTypes,selectors:[["object-list-types"]],decls:13,vars:5,consts:[[1,"slds-media__body","slds-dropdown-trigger","slds-dropdown-trigger--click",3,"system-dropdown-trigger-simple"],[1,"slds-grid","slds-grid--vertical-align-center","slds-truncate","slds-p-right--small"],[1,"slds-page-header__title","slds-show--medium","slds-p-right--xx-small"],[1,"slds-button",3,"disabled"],["icon","down","size","small"],[1,"slds-dropdown","slds-dropdown--left","slds-dropdown--medium"],["role","menu",1,"slds-dropdown__list"],["role","separator",1,"slds-dropdown__header","slds-has-divider--bottom"],[1,"slds-text-title--caps"],["label","LBL_LIST_TYPES"],["class","slds-dropdown__item","role","presentation",3,"ngClass","click",4,"ngFor","ngForOf"],["role","presentation",1,"slds-dropdown__item",3,"ngClass","click"],["href","javascript:void(0);","role","menuitemcheckbox"],[1,"slds-truncate"],["size","x-small","icon","check","addclasses","slds-icon slds-icon_selected slds-icon_x-small slds-icon-text-default slds-m-right_x-small"],["size","x-small",3,"icon"]],template:function(e,t){1&e&&(n.j41(0,"div",0)(1,"div",1)(2,"h1",2),n.EFF(3),n.k0s(),n.j41(4,"button",3),n.nrm(5,"system-button-icon",4),n.k0s()(),n.j41(6,"div",5)(7,"ul",6)(8,"li",7)(9,"span",8),n.nrm(10,"system-label",9),n.k0s()(),n.DNE(11,h,5,4,"li",10)(12,g,6,5,"li",10),n.k0s()()()),2&e&&(n.Y8G("system-dropdown-trigger-simple",t.disabled),n.R7$(3),n.JRh(t.modellist.currentList.name),n.R7$(),n.Y8G("disabled",t.disabled),n.R7$(7),n.Y8G("ngForOf",t.modellist.standardLists),n.R7$(),n.Y8G("ngForOf",t.listTypes))},dependencies:[a.YU,a.Sq,r.t,d.W,c.B,u.C],encapsulation:2})}return ObjectListTypes})()},28460:(e,t,s)=>{"use strict";s.d(t,{q:()=>M});var i=s(54438),n=s(69904),l=s(75103),o=s(35911),a=s(83935),r=s(60177),d=s(84341),c=s(66589),u=s(32062),m=s(45915),h=s(18521),g=s(32130),p=s(57714),f=s(56367);function b(e,t){if(1&e&&(i.j41(0,"li",9),i.EFF(1),i.k0s()),2&e){const e=t.$implicit;i.R7$(),i.JRh(e)}}function y(e,t){if(1&e&&(i.j41(0,"div",10),i.EFF(1),i.nrm(2,"system-label",11),i.EFF(3,")"),i.k0s()),2&e){const e=i.XpG();i.R7$(),i.SpI("(",e.checkdCount," ")}}function v(e,t){if(1&e){const e=i.RV6();i.j41(0,"system-utility-icon",12),i.bIt("click",(function(){i.eBV(e);const t=i.XpG();return i.Njj(t.toggleMetrics())})),i.k0s()}if(2&e){const e=i.XpG();i.Y8G("colorclass",e.showMetrics?"slds-icon-text-success":"slds-icon-text-light")}}function k(e,t){if(1&e){const e=i.RV6();i.j41(0,"system-utility-icon",13),i.bIt("click",(function(){i.eBV(e);const t=i.XpG();return i.Njj(t.toggleChart())}))("contextmenu",(function(t){i.eBV(e);const s=i.XpG();return i.Njj(s.toggleChartTypes(t))})),i.k0s()}if(2&e){const e=i.XpG();i.Y8G("colorclass",e.showChart?"slds-icon-text-success":"slds-icon-text-light")}}function R(e,t){if(1&e){const e=i.RV6();i.j41(0,"system-input-radio",20),i.mxI("ngModelChange",(function(t){i.eBV(e);const s=i.XpG(3);return i.DH7(s.metric,t)||(s.metric=t),i.Njj(t)})),i.nrm(1,"system-label",21),i.EFF(2," "),i.nrm(3,"system-label-fieldname",22),i.k0s()}if(2&e){const e=t.$implicit,s=i.XpG(3);i.Y8G("name",s.aggregateID+"metric")("value","metric_"+e.function+"_"+e.field),i.R50("ngModel",s.metric),i.R7$(),i.Y8G("label","LBL_METRIC_"+e.function.toUpperCase()),i.R7$(2),i.Y8G("module",e.module)("field",e.field)}}function I(e,t){if(1&e){const e=i.RV6();i.j41(0,"div",16)(1,"system-input-radio",17),i.mxI("ngModelChange",(function(t){i.eBV(e);const s=i.XpG(2);return i.DH7(s.metric,t)||(s.metric=t),i.Njj(t)})),i.nrm(2,"system-label",18),i.k0s(),i.DNE(3,R,4,6,"system-input-radio",19),i.k0s()}if(2&e){const e=i.XpG(2);i.R7$(),i.Y8G("name",e.aggregateID+"metric"),i.R50("ngModel",e.metric),i.R7$(2),i.Y8G("ngForOf",e.getMetrics())}}function x(e,t){if(1&e){const e=i.RV6();i.j41(0,"system-input-radio",20),i.mxI("ngModelChange",(function(t){i.eBV(e);const s=i.XpG(3);return i.DH7(s.chartType,t)||(s.chartType=t),i.Njj(t)})),i.EFF(1),i.k0s()}if(2&e){const e=t.$implicit,s=i.XpG(3);i.Y8G("name",s.aggregateID+"charttype")("value",e),i.R50("ngModel",s.chartType),i.R7$(),i.JRh(e)}}function j(e,t){if(1&e&&(i.j41(0,"div",16),i.DNE(1,x,2,4,"system-input-radio",19),i.k0s()),2&e){const e=i.XpG(2);i.R7$(),i.Y8G("ngForOf",e.chartTypes)}}function G(e,t){if(1&e&&i.nrm(0,"object-listview-aggregate-chart",15),2&e){const e=i.XpG(2);i.Y8G("aggregate",e.aggregate)("metric",e.metric)("chartType",e.chartType)}}function C(e,t){if(1&e&&(i.j41(0,"div",25),i.nrm(1,"object-listview-aggregate-item",26),i.k0s()),2&e){const e=t.$implicit,s=i.XpG(3);i.R7$(),i.Y8G("metric",s.metric)("bucketitem",e)("aggregate",s.aggregate)}}function w(e,t){if(1&e&&(i.j41(0,"span"),i.EFF(1),i.k0s()),2&e){const e=i.XpG(5);i.R7$(),i.SpI(" (+",e.aggregateBucketCount-5,")")}}function S(e,t){if(1&e){const e=i.RV6();i.j41(0,"a",30),i.bIt("click",(function(){i.eBV(e);const t=i.XpG(4);return i.Njj(t.showall=!t.showall)})),i.nrm(1,"system-label",21),i.DNE(2,w,2,1,"span",31),i.k0s()}if(2&e){const e=i.XpG(4);i.R7$(),i.Y8G("label",e.showall?"LBL_LESS":"LBL_MORE"),i.R7$(),i.Y8G("ngIf",!e.showall)}}function E(e,t){if(1&e&&(i.j41(0,"p",32),i.EFF(1),i.nrm(2,"system-label",33),i.EFF(3," ... "),i.k0s()),2&e){const e=i.XpG(4);i.R7$(),i.SpI("",e.otherDocCount," ")}}function L(e,t){if(1&e&&(i.j41(0,"div",27)(1,"div"),i.DNE(2,S,3,2,"a",28),i.k0s(),i.j41(3,"div"),i.DNE(4,E,4,1,"p",29),i.k0s()()),2&e){const e=i.XpG(3);i.R7$(2),i.Y8G("ngIf",e.aggregateBucketCount>e.aggregateDefaultItems),i.R7$(2),i.Y8G("ngIf",e.otherDocCount>0)}}function D(e,t){if(1&e&&i.DNE(0,C,2,3,"div",23)(1,L,5,2,"div",24),2&e){const e=i.XpG(2);i.Y8G("ngForOf",e.aggregateBuckets),i.R7$(),i.Y8G("ngIf",e.aggregateBucketCount>e.aggregateDefaultItems||e.otherDocCount>0)}}function F(e,t){if(1&e&&i.DNE(0,I,4,3,"div",14)(1,j,2,1,"div",14)(2,G,1,3,"object-listview-aggregate-chart",15)(3,D,2,2),2&e){const e=i.XpG();i.vxM(0,e.showMetrics?0:-1),i.R7$(),i.vxM(1,e.showChartTypes?1:-1),i.R7$(),i.vxM(2,e.showChart?2:3)}}let M=(()=>{class ObjectListViewAggregate{constructor(e,t,s,i){this.language=e,this.modellist=t,this.model=s,this.metadata=i,this.aggregateID=_.uniqueId(),this.chartTypes=["Bar","Column","Pie","Doughnut","Line"],this.showMetrics=!1,this.showChartTypes=!1,this.aggregate={},this.aggregateDefaultItems=5}get showall(){return this.aggregate.showall??!1}set showall(e){this.aggregate.showall=e,this.modellist.setModuleAggregatePreferences()}get metric(){return this.aggregate.metric??"doc_count"}set metric(e){this.aggregate.metric=e,this.modellist.setModuleAggregatePreferences()}get chartType(){return this.aggregate.chartType??this.chartTypes[0]}set chartType(e){this.aggregate.chartType=e,this.modellist.setModuleAggregatePreferences()}get showChart(){return this.aggregate.showChart??!1}set showChart(e){this.aggregate.showChart=e,this.modellist.setModuleAggregatePreferences()}get aggregateNameItems(){let e=[];return this.aggregate.fielddetails&&(this.model.module!=this.aggregate.fielddetails.module&&e.push(this.language.getModuleName(this.aggregate.fielddetails.module,!0)),e.push(this.language.getFieldDisplayName(this.aggregate.fielddetails.module,this.aggregate.fielddetails.field))),e}get aggregatename(){return this.aggregate.indexfieldname?.replace(/>/g,"")}get hasMetrics(){return this.metadata.getModuleAggregateMetrics(this.modellist.module).length>0}getMetrics(){return this.metadata.getModuleAggregateMetrics(this.modellist.module)}get aggregateBucketCount(){return this.aggregatename&&this.modellist.searchAggregates?.[this.aggregatename]?this.modellist.searchAggregates?.[this.aggregatename].buckets.length:0}get aggregateBuckets(){return this.aggregatename&&this.modellist.searchAggregates?.[this.aggregatename]?this.modellist.searchAggregates?.[this.aggregatename].buckets.filter(((e,t)=>this.showall||t<this.aggregateDefaultItems||this.modellist.checkAggregate(this.aggregatename,e.aggdata))):[]}get otherDocCount(){return this.aggregatename&&this.modellist.searchAggregates?.[this.aggregatename]?this.modellist.searchAggregates?.[this.aggregatename].sum_other_doc_count:0}get checkdCount(){return this.modellist.getCheckedAggregateCount(this.aggregatename)}get collapsed(){return!!this.aggregate.collapsed}toggleCollapsed(){this.aggregate.collapsed=!this.aggregate.collapsed,this.collapsed&&(this.showChartTypes=!1,this.showMetrics=!1),this.modellist.setModuleAggregatePreferences()}toggleChart(){this.collapsed?this.showChart=!1:this.showChartTypes?this.showChartTypes=!1:this.showChart=!this.showChart}toggleMetrics(){this.collapsed?this.showMetrics=!1:this.showMetrics=!this.showMetrics,this.showMetrics&&(this.showChartTypes=!1)}toggleChartTypes(e){this.showChart&&(e.preventDefault(),e.stopPropagation(),this.collapsed?this.showChartTypes=!1:this.showChartTypes=!this.showChartTypes,this.showChartTypes&&(this.showMetrics=!1))}static#e=this.ɵfac=function(e){return new(e||ObjectListViewAggregate)(i.rXU(n.B),i.rXU(l.K),i.rXU(o.g),i.rXU(a.yu))};static#t=this.ɵcmp=i.VBU({type:ObjectListViewAggregate,selectors:[["object-listview-aggregate"]],inputs:{aggregate:"aggregate"},decls:10,vars:7,consts:[[1,"slds-filters__item","slds-p-horizontal--small","slds-p-vertical--xx-small",3,"system-overlay-loading-spinner"],[1,"slds-p-vertical--xx-small","slds-grid","slds-grid--vertical-align-center","slds-grid--align-spread"],[1,"slds-grid","slds-col","slds-size--10-of-12",3,"click"],[1,"slds-list_horizontal","slds-has-dividers_right"],["class","slds-item",4,"ngFor","ngForOf"],["class","slds-p-left--xx-small",4,"ngIf"],["class","slds-m-horizontal--xxx-small","icon","metrics","size","x-small",3,"colorclass","click",4,"ngIf"],["class","slds-m-horizontal--xxx-small","icon","chart","size","x-small",3,"colorclass","click","contextmenu",4,"ngIf"],["size","x-small",3,"icon","click"],[1,"slds-item"],[1,"slds-p-left--xx-small"],["label","LBL_SELECTED"],["icon","metrics","size","x-small",1,"slds-m-horizontal--xxx-small",3,"colorclass","click"],["icon","chart","size","x-small",1,"slds-m-horizontal--xxx-small",3,"colorclass","click","contextmenu"],["class","slds-grid slds-grid--vertical slds-border--bottom slds-m-bottom--xx-small"],[3,"aggregate","metric","chartType"],[1,"slds-grid","slds-grid--vertical","slds-border--bottom","slds-m-bottom--xx-small"],["value","doc_count",3,"name","ngModel","ngModelChange"],["label","LBL_COUNT"],[3,"name","value","ngModel","ngModelChange",4,"ngFor","ngForOf"],[3,"name","value","ngModel","ngModelChange"],[3,"label"],[3,"module","field"],["class","slds-form-element",4,"ngFor","ngForOf"],["class","slds-grid slds-grid--vertical-align-center slds-grid--align-spread slds-p-top--xx-small",4,"ngIf"],[1,"slds-form-element"],[1,"slds-form-element__control",3,"metric","bucketitem","aggregate"],[1,"slds-grid","slds-grid--vertical-align-center","slds-grid--align-spread","slds-p-top--xx-small"],["class","slds-text-body--small","href","javascript:void(0);",3,"click",4,"ngIf"],["class","slds-text-body--small slds-text-color--weak",4,"ngIf"],["href","javascript:void(0);",1,"slds-text-body--small",3,"click"],[4,"ngIf"],[1,"slds-text-body--small","slds-text-color--weak"],["label","LBL_ARE_NOT_INCLUDED"]],template:function(e,t){1&e&&(i.j41(0,"div",0)(1,"div",1)(2,"div",2),i.bIt("click",(function(){return t.toggleCollapsed()})),i.j41(3,"ul",3),i.DNE(4,b,2,1,"li",4),i.k0s(),i.DNE(5,y,4,1,"div",5),i.k0s(),i.DNE(6,v,1,1,"system-utility-icon",6)(7,k,1,1,"system-utility-icon",7),i.j41(8,"system-utility-icon",8),i.bIt("click",(function(){return t.toggleCollapsed()})),i.k0s()(),i.DNE(9,F,4,3),i.k0s()),2&e&&(i.Y8G("system-overlay-loading-spinner",t.modellist.isLoading&&!t.collapsed&&t.showChart),i.R7$(4),i.Y8G("ngForOf",t.aggregateNameItems),i.R7$(),i.Y8G("ngIf",t.collapsed&&t.checkdCount>0),i.R7$(),i.Y8G("ngIf",t.hasMetrics&&!t.collapsed),i.R7$(),i.Y8G("ngIf",!t.collapsed),i.R7$(),i.Y8G("icon",t.collapsed?"down":"up"),i.R7$(),i.vxM(9,t.collapsed?-1:9))},dependencies:[r.Sq,r.bT,d.BC,d.vS,c.J,u.W,m.P,h.B,g.M,p.I,f.F],encapsulation:2})}return ObjectListViewAggregate})()},57714:(e,t,s)=>{"use strict";s.d(t,{I:()=>u});var i=s(18359),n=s(54438),l=s(75103),o=s(69904),a=s(60177),r=s(52684),d=s(31886);function c(e,t){if(1&e&&n.nrm(0,"system-chart-data-row",3),2&e){const e=t.$implicit;n.Y8G("label",e.label)("value",e.value)}}let u=(()=>{class ObjectListViewAggregateChart{constructor(e,t,s){this.modellist=e,this.language=t,this.cdref=s,this.metric="doc_count",this.buckets=[],this.subscriptions=new i.yU,this.subscriptions.add(this.language.currentlanguage$.subscribe((()=>{this.buildBuckets()})))}ngOnInit(){this.buildBuckets(),this.subscriptions.add(this.modellist.listDataChanged$.subscribe((e=>{this.buildBuckets()})))}ngOnChanges(e){e.metric&&this.buildBuckets()}ngOnDestroy(){this.subscriptions.unsubscribe()}buildBuckets(){this.aggregate&&(this.buckets=this.modellist.searchAggregates?.[this.aggregate.fielddetails.field].buckets.map((e=>({label:this.language.getFieldDisplayOptionValue(this.modellist.module,this.aggregate.fieldname,e.displayName),value:"doc_count"==this.metric?e.doc_count:e[this.metric].value}))),this.cdref.detectChanges())}static#e=this.ɵfac=function(e){return new(e||ObjectListViewAggregateChart)(n.rXU(l.K),n.rXU(o.B),n.rXU(n.gRc))};static#t=this.ɵcmp=n.VBU({type:ObjectListViewAggregateChart,selectors:[["object-listview-aggregate-chart"]],inputs:{aggregate:"aggregate",metric:"metric",chartType:"chartType"},features:[n.OA$],decls:3,vars:2,consts:[[1,"slds-grow"],["padding","none",3,"chartType"],[3,"label","value",4,"ngFor","ngForOf"],[3,"label","value"]],template:function(e,t){1&e&&(n.j41(0,"div",0)(1,"system-chart-js-one-dimensional",1),n.DNE(2,c,1,2,"system-chart-data-row",2),n.k0s()()),2&e&&(n.R7$(),n.Y8G("chartType",t.chartType),n.R7$(),n.Y8G("ngForOf",t.buckets))},dependencies:[a.Sq,r.y,d.k],encapsulation:2,changeDetection:0})}return ObjectListViewAggregateChart})()},56367:(e,t,s)=>{"use strict";s.d(t,{F:()=>f});var i=s(54438),n=s(69904),l=s(83935),o=s(75103),a=s(60177),r=s(84341),d=s(84359),c=s(38431),u=s(44149),m=s(74);function h(e,t){if(1&e&&i.nrm(0,"object-listview-aggregate-item-range",7),2&e){const e=i.XpG();i.Y8G("aggregate",e.aggregate)("item",e.bucketitem)}}function g(e,t){if(1&e&&i.nrm(0,"object-listview-aggregate-item-term",7),2&e){const e=i.XpG();i.Y8G("aggregate",e.aggregate)("item",e.bucketitem)}}function p(e,t){if(1&e&&(i.j41(0,"div"),i.EFF(1),i.k0s()),2&e){const e=i.XpG();i.R7$(),i.JRh(e.bucketitem.displayName)}}let f=(()=>{class ObjectListViewAggregateItem{constructor(e,t,s,i){this.elementRef=e,this.language=t,this.metadata=s,this.modellist=i,this.bucketitem={},this.aggregate={},this.metric="doc_count",this.isChecked=!1}get aggregatename(){return this.aggregate.indexfieldname?.replace(/>/g,"")}get disabled(){return this.modellist.isLoading||!this.modellist.canChangeAggegate(this.aggregatename)}set checked(e){if(this.isChecked=e,e)this.modellist.setAggregate(this.aggregatename,this.bucketitem.aggdata),this.modellist.scheduleReloadList();else{this.modellist.removeAggregate(this.aggregatename,this.bucketitem.aggdata)&&this.modellist.scheduleReloadList()}}get checked(){return this.modellist.checkAggregate(this.aggregatename,this.bucketitem.aggdata)}get metricValue(){return"doc_count"===this.metric?this.bucketitem.doc_count:this.bucketitem[this.metric].value}static#e=this.ɵfac=function(e){return new(e||ObjectListViewAggregateItem)(i.rXU(i.aKT),i.rXU(n.B),i.rXU(l.yu),i.rXU(o.K))};static#t=this.ɵcmp=i.VBU({type:ObjectListViewAggregateItem,selectors:[["object-listview-aggregate-item"]],inputs:{bucketitem:"bucketitem",aggregate:"aggregate",metric:"metric"},decls:10,vars:8,consts:[[1,"slds-grid","slds-grid--vertical-align-center"],[3,"disabled","ngModel","hidelabel","ngModelChange"],[1,"slds-grow","slds-truncate",3,"ngSwitch"],[3,"aggregate","item",4,"ngSwitchCase"],[4,"ngSwitchDefault"],[1,"slds-p-left--xx-small","slds-text-align--right",2,"min-width","45px"],[3,"number","noDigits"],[3,"aggregate","item"]],template:function(e,t){1&e&&(i.j41(0,"div",0)(1,"system-checkbox",1),i.mxI("ngModelChange",(function(e){return i.DH7(t.checked,e)||(t.checked=e),e})),i.k0s(),i.j41(2,"div",2),i.DNE(3,h,1,2,"object-listview-aggregate-item-range",3)(4,g,1,2,"object-listview-aggregate-item-term",3)(5,p,2,1,"div",4),i.k0s(),i.j41(6,"div",5),i.EFF(7,"("),i.nrm(8,"system-display-number",6),i.EFF(9,")"),i.k0s()()),2&e&&(i.R7$(),i.Y8G("disabled",t.disabled),i.R50("ngModel",t.checked),i.Y8G("hidelabel",!0),i.R7$(),i.Y8G("ngSwitch",t.aggregate.type),i.R7$(),i.Y8G("ngSwitchCase","range"),i.R7$(),i.Y8G("ngSwitchCase","term"),i.R7$(4),i.Y8G("number",t.metricValue)("noDigits",!0))},dependencies:[a.ux,a.e1,a.fG,r.BC,r.vS,d.f,c.B,u.B,m.o],encapsulation:2})}return ObjectListViewAggregateItem})()},74:(e,t,s)=>{"use strict";s.d(t,{o:()=>p});var i=s(54438),n=s(35911),l=s(60177),o=s(32062),a=s(44149);function r(e,t){if(1&e&&(i.j41(0,"div"),i.nrm(1,"system-label",3),i.k0s()),2&e){const e=i.XpG();i.R7$(),i.Y8G("label",e.item.displayName)}}const d=e=>({key:e});function c(e,t){if(1&e&&i.nrm(0,"object-listview-aggregate-item-term",7),2&e){const e=i.XpG(2);i.Y8G("aggregate",e.aggregate)("item",i.eq3(2,d,e.item.from))}}function u(e,t){1&e&&(i.j41(0,"span"),i.EFF(1,"*"),i.k0s())}function m(e,t){if(1&e&&i.nrm(0,"object-listview-aggregate-item-term",7),2&e){const e=i.XpG(2);i.Y8G("aggregate",e.aggregate)("item",i.eq3(2,d,e.item.to))}}function h(e,t){1&e&&(i.j41(0,"span"),i.EFF(1,"*"),i.k0s())}function g(e,t){if(1&e&&(i.j41(0,"div"),i.DNE(1,c,1,4,"object-listview-aggregate-item-term",4)(2,u,2,0,"span",5),i.k0s(),i.j41(3,"div",6),i.EFF(4," - "),i.k0s(),i.j41(5,"div"),i.DNE(6,m,1,4,"object-listview-aggregate-item-term",4)(7,h,2,0,"span",5),i.k0s()),2&e){const e=i.XpG();i.R7$(),i.Y8G("ngIf",e.item.from),i.R7$(),i.Y8G("ngIf",!e.item.from),i.R7$(4),i.Y8G("ngIf",e.item.to),i.R7$(),i.Y8G("ngIf",!e.item.to)}}let p=(()=>{class ObjectListViewAggregateItemRange{constructor(e){this.model=e,this.item={},this.aggregate={}}static#e=this.ɵfac=function(e){return new(e||ObjectListViewAggregateItemRange)(i.rXU(n.g))};static#t=this.ɵcmp=i.VBU({type:ObjectListViewAggregateItemRange,selectors:[["object-listview-aggregate-item-range"]],inputs:{item:"item",aggregate:"aggregate"},decls:4,vars:2,consts:[[1,"slds-grid","slds-grid--vertical-align-center"],[4,"ngIf","ngIfElse"],["noDisplayname",""],[3,"label"],[3,"aggregate","item",4,"ngIf"],[4,"ngIf"],[1,"slds-p-horizontal--xx-small"],[3,"aggregate","item"]],template:function(e,t){if(1&e&&(i.j41(0,"div",0),i.DNE(1,r,2,1,"div",1)(2,g,8,4,"ng-template",null,2,i.C5r),i.k0s()),2&e){const e=i.sdS(3);i.R7$(),i.Y8G("ngIf",t.item.displayName)("ngIfElse",e)}},dependencies:[l.bT,o.W,a.B],encapsulation:2})}return ObjectListViewAggregateItemRange})()},44149:(e,t,s)=>{"use strict";s.d(t,{B:()=>u});var i=s(35911),n=s(41731),l=s(54438),o=s(60177),a=s(15091),r=s(32062);function d(e,t){1&e&&(l.j41(0,"span",2),l.nrm(1,"system-label",3),l.k0s())}function c(e,t){if(1&e&&l.nrm(0,"field-container",4),2&e){const e=l.XpG();l.Y8G("fieldname",e.aggregate.fielddetails.field)}}let u=(()=>{class ObjectListViewAggregateItemTerm{constructor(e,t){this.model=e,this.view=t,this.item={},this.aggregate={},this.view.displayLabels=!1}ngOnInit(){this.model.module=this.aggregate.fielddetails.module,this.model.setField(this.aggregate.fielddetails.field,this.model.utils.backend2spice(this.model.module,this.aggregate.fielddetails.field,this.item.key))}static#e=this.ɵfac=function(e){return new(e||ObjectListViewAggregateItemTerm)(l.rXU(i.g),l.rXU(n.U))};static#t=this.ɵcmp=l.VBU({type:ObjectListViewAggregateItemTerm,selectors:[["object-listview-aggregate-item-term"]],inputs:{item:"item",aggregate:"aggregate"},features:[l.Jv_([n.U,i.g])],decls:2,vars:2,consts:[["style","font-style: italic;",4,"ngIf"],["fielddisplayclass","slds-truncate",3,"fieldname",4,"ngIf"],[2,"font-style","italic"],["label","LBL_NOT_SET"],["fielddisplayclass","slds-truncate",3,"fieldname"]],template:function(e,t){1&e&&l.DNE(0,d,2,0,"span",0)(1,c,1,1,"field-container",1),2&e&&(l.Y8G("ngIf","#not#set#"==t.item.key),l.R7$(),l.Y8G("ngIf","#not#set#"!=t.item.key))},dependencies:[o.bT,a.y,r.W],encapsulation:2})}return ObjectListViewAggregateItemTerm})()},4467:(e,t,s)=>{"use strict";s.d(t,{f:()=>r});var i=s(54438),n=s(75103),l=s(60177),o=s(25863),a=s(22465);let r=(()=>{class ObjectListViewAggregatesButton{constructor(e){this.modellist=e}toggleaggregates(){this.modellist.displayFilters=!1,this.modellist.displayAggregates=!this.modellist.displayAggregates}get enabled(){return this.modellist.aggregatesEnabled()}get buttonclasses(){return this.modellist.displayAggregates?"slds-is-selected":""}static#e=this.ɵfac=function(e){return new(e||ObjectListViewAggregatesButton)(i.rXU(n.K))};static#t=this.ɵcmp=i.VBU({type:ObjectListViewAggregatesButton,selectors:[["object-listview-aggregates-button"]],decls:2,vars:2,consts:[["system-title","LBL_AGGREGATES",1,"slds-button","slds-button--neutral","slds-button--icon-border","slds-m-horizontal--xxx-small",3,"disabled","ngClass","click"],["icon","bucket"]],template:function(e,t){1&e&&(i.j41(0,"button",0),i.bIt("click",(function(){return t.toggleaggregates()})),i.nrm(1,"system-button-icon",1),i.k0s()),2&e&&i.Y8G("disabled",!t.enabled)("ngClass",t.buttonclasses)},dependencies:[l.YU,o.t,a.L],encapsulation:2})}return ObjectListViewAggregatesButton})()},99438:(e,t,s)=>{"use strict";s.d(t,{S:()=>h});var i=s(54438),n=s(75103),l=s(69904),o=s(71692),a=s(60177),r=s(38431),d=s(32062),c=s(18521);function u(e,t){1&e&&i.nrm(0,"system-label",9)}function m(e,t){if(1&e&&(i.j41(0,"li",10)(1,"span"),i.EFF(2),i.nrm(3,"system-label",11),i.k0s()()),2&e){const e=i.XpG();i.R7$(2),i.SpI("",e.modellist.getSelectedCount()," ")}}let h=(()=>{class ObjectListViewHeaderDetails{constructor(e,t,s){this.modellist=e,this.language=t,this.layout=s}static#e=this.ɵfac=function(e){return new(e||ObjectListViewHeaderDetails)(i.rXU(n.K),i.rXU(l.B),i.rXU(o.Z))};static#t=this.ɵcmp=i.VBU({type:ObjectListViewHeaderDetails,selectors:[["object-listview-header-details"]],decls:10,vars:9,consts:[[1,"slds-list_horizontal","slds-has-dividers_left","slds-has-block-links_space"],[1,"slds-item",3,"title"],[1,"slds-p-right--xxx-small",3,"number","noDigits"],["label","LBL_OF"],[1,"slds-p-horizontal--xxx-small",3,"number","noDigits"],["label","LBL_ITEMS",4,"ngIf"],["class","slds-item slds-show--medium",4,"ngIf"],[1,"slds-item"],["size","xx-small",3,"icon","title"],["label","LBL_ITEMS"],[1,"slds-item","slds-show--medium"],["label","LBL_SELECTED"]],template:function(e,t){1&e&&(i.j41(0,"ul",0)(1,"li",1)(2,"span"),i.nrm(3,"system-display-number",2)(4,"system-label",3)(5,"system-display-number",4),i.DNE(6,u,1,0,"system-label",5),i.k0s()(),i.DNE(7,m,4,1,"li",6),i.j41(8,"li",7),i.nrm(9,"system-utility-icon",8),i.k0s()()),2&e&&(i.R7$(),i.Y8G("title",t.language.getLabel("LBL_SORTEDBY")+" "+t.modellist.getSortFields()+"\n"+t.language.getLabel("LBL_LASTUPDATE")+" "+t.modellist.getLastLoadTime()),i.R7$(2),i.Y8G("number",t.modellist.listData.list.length)("noDigits",!0),i.R7$(2),i.Y8G("number",t.modellist.listData.totalcount)("noDigits",!0),i.R7$(),i.Y8G("ngIf","small"!=t.layout.screenwidth),i.R7$(),i.Y8G("ngIf",t.modellist.getSelectedCount()>0),i.R7$(2),i.Y8G("icon","db"==t.modellist.listData.source?"database":"feed")("title","db"==t.modellist.listData.source?"Database":"Search Engine"))},dependencies:[a.bT,r.B,d.W,c.B],encapsulation:2})}return ObjectListViewHeaderDetails})()},53471:(e,t,s)=>{"use strict";s.d(t,{L:()=>p});var i=s(28460),n=s(54438),l=s(69904),o=s(75103),a=s(35911),r=s(83935),d=s(60177),c=s(32062);const u=e=>({"slds-badge_inverse":e});function m(e,t){if(1&e){const e=n.RV6();n.j41(0,"div",4)(1,"div",5),n.bIt("click",(function(){const t=n.eBV(e).$implicit,s=n.XpG(2);return n.Njj(s.toggle(t))})),n.j41(2,"div",6)(3,"div",7),n.EFF(4),n.k0s(),n.j41(5,"div",8),n.EFF(6),n.k0s()()()()}if(2&e){const e=t.$implicit,s=n.XpG(2);n.R7$(),n.Y8G("title",e.displayName)("ngClass",n.eq3(4,u,s.isactive(e))),n.R7$(3),n.JRh(e.displayName),n.R7$(2),n.SpI("(",e.doc_count,")")}}function h(e,t){if(1&e&&(n.qex(0),n.DNE(1,m,7,6,"div",3),n.bVm()),2&e){const e=n.XpG();n.R7$(),n.Y8G("ngForOf",e.aggregateBuckets)}}function g(e,t){1&e&&(n.j41(0,"div",9),n.nrm(1,"system-label",10),n.k0s())}let p=(()=>{class ObjectListViewTagsAggregate extends i.q{constructor(e,t,s,i){super(e,t,s,i),this.language=e,this.modellist=t,this.model=s,this.metadata=i,this.aggregate={indexfieldname:"tags"}}get showall(){return!0}get hasItems(){try{return this.aggregateBuckets.length>0}catch(e){return!1}}isactive(e){return this.modellist.checkAggregate("tags",e.aggdata)}toggle(e){if(this.isactive(e)){this.modellist.removeAggregate("tags",e.aggdata)&&this.modellist.scheduleReloadList()}else this.modellist.setAggregate("tags",e.aggdata),this.modellist.scheduleReloadList()}static#e=this.ɵfac=function(e){return new(e||ObjectListViewTagsAggregate)(n.rXU(l.B),n.rXU(o.K),n.rXU(a.g),n.rXU(r.yu))};static#t=this.ɵcmp=n.VBU({type:ObjectListViewTagsAggregate,selectors:[["object-listview-tags-aggregate"]],features:[n.Vt3],decls:3,vars:2,consts:[[1,"slds-filters__item","slds-grid","slds-wrap","slds-grid--align-cente"],[4,"ngIf"],["class","slds-align--absolute-center",4,"ngIf"],["class","slds-p-around--xxx-small slds-truncate","style","max-width: 50%;",4,"ngFor","ngForOf"],[1,"slds-p-around--xxx-small","slds-truncate",2,"max-width","50%"],[1,"slds-badge","slds-truncate",3,"title","ngClass","click"],[1,"slds-grid"],[1,"slds-truncate","slds-text-link_reset"],[1,"slds-p-left--xxx-small"],[1,"slds-align--absolute-center"],["label","MSG_NO_RECORDS_TAGGED"]],template:function(e,t){1&e&&(n.j41(0,"div",0),n.DNE(1,h,2,1,"ng-container",1)(2,g,2,0,"div",2),n.k0s()),2&e&&(n.R7$(),n.Y8G("ngIf",t.hasItems),n.R7$(),n.Y8G("ngIf",!t.hasItems))},dependencies:[d.YU,d.Sq,d.bT,c.W],encapsulation:2})}return ObjectListViewTagsAggregate})()},82379:(e,t,s)=>{"use strict";s.d(t,{d:()=>k});var i=s(54438),n=s(35911),l=s(75103),o=s(41731),a=s(18359),r=s(21413),d=s(33778),c=s(69904),u=s(83935),m=s(92462),h=s(71692);const g=["tablecontent"];function p(e,t){if(1&e&&(i.j41(0,"thead"),i.nrm(1,"tr",15),i.k0s()),2&e){const e=i.XpG();i.R7$(),i.Y8G("showSelectColumn",e.multiselect)("showRowActionMenu",!1)}}function f(e,t){if(1&e){const e=i.RV6();i.j41(0,"tr",16),i.bIt("click",(function(t){const s=i.eBV(e).$implicit,n=i.XpG();return i.Njj(n.clickRow(t,s))})),i.k0s()}if(2&e){const e=t.$implicit,s=i.XpG();i.Y8G("listItem",e)("showActionMenu",!1)("rowselect",s.multiselect)("displaylinks",!1)}}function b(e,t){if(1&e&&i.nrm(0,"tbody",17),2&e){const e=i.XpG();i.Y8G("columns",null==e.modellist.listfields?null:e.modellist.listfields.length)("select",e.multiselect)("tools",!1)("rows",10)}}function y(e,t){if(1&e){const e=i.RV6();i.j41(0,"button",18),i.bIt("click",(function(){i.eBV(e);const t=i.XpG();return i.Njj(t.createNew())})),i.nrm(1,"system-label",19),i.k0s()}}function v(e,t){if(1&e){const e=i.RV6();i.j41(0,"button",20),i.bIt("click",(function(){i.eBV(e);const t=i.XpG();return i.Njj(t.selectItems())})),i.nrm(1,"system-label",21),i.k0s()}if(2&e){const e=i.XpG();i.Y8G("disabled",0==e.selectedCount)}}const _=(e,t,s)=>({"slds-no-row-hover":e,singleselect:t,"slds-table--header-fixed":s});let k=(()=>{class ObjectModalModuleLookup{constructor(e,t,s,n,l,o){this.language=e,this.modellist=t,this.metadata=s,this.modelutilities=n,this.model=l,this.layout=o,this.searchTerm="",this.self={},this.componentConfig={},this.multiselect=!1,this.module="",this.modulefilter="",this.subscriptions=new a.yU,this.selectedItems=new i.bkB,this.onClose=new r.B,this.usedSearchTerm=new i.bkB,this.subscriptions.add(this.modellist.listType$.subscribe((e=>this.switchListtype())))}contentStyle(){if(this.headercontent){return{height:`calc(100% - ${this.headercontent.element.nativeElement.getBoundingClientRect().height}px)`}}return{height:"100%"}}get smallView(){return"small"==this.layout.screenwidth}ngOnInit(){this.modellist.modulefilter=this.modulefilter,this.modellist.relatefilter=this.relatefilter,this.modellist.filtercontext=this.filtercontext,this.modellist.useCache=!1,this.modellist.initialize(this.module),this.modellist.getListData(),this.componentConfig=this.metadata.getComponentConfig("ObjectModalModuleLookup",this.module),this.model.module=this.module,""!=this.searchTerm&&this.doSearch()}ngOnDestroy(){this.subscriptions.unsubscribe()}get canAdd(){return this.metadata.checkModuleAcl(this.model.module,"create")}switchListtype(){}doSearch(){this.modellist.searchTerm=this.searchTerm,this.modellist.getListData()}onScroll(e){let t=this.tablecontent.element.nativeElement;t.scrollTop+t.clientHeight+50>t.scrollHeight&&this.modellist.loadMoreList()}closePopup(){this.usedSearchTerm.emit(this.modellist.searchTerm),this.onClose.next(),this.onClose.complete(),this.self.destroy()}createNew(){this.model.initialize(),this.model.addModel("",null,{},!0).subscribe({next:e=>{this.selectedItems.emit([e]),this.usedSearchTerm.emit(this.searchTerm),this.self.destroy()}})}get selectedCount(){return this.modellist.getSelectedCount()}selectItems(){this.selectedItems.emit(this.modellist.getSelectedItems()),this.usedSearchTerm.emit(this.searchTerm),this.self.destroy()}clickRow(e,t){this.multiselect||(this.selectedItems.emit([t]),this.usedSearchTerm.emit(this.searchTerm),this.self.destroy())}static#e=this.ɵfac=function(e){return new(e||ObjectModalModuleLookup)(i.rXU(c.B),i.rXU(l.K),i.rXU(u.yu),i.rXU(m.g),i.rXU(n.g),i.rXU(h.Z))};static#t=this.ɵcmp=i.VBU({type:ObjectModalModuleLookup,selectors:[["object-modal-module-lookup"]],viewQuery:function(e,t){if(1&e&&(i.GBs(g,7,i.c1b),i.GBs(d.W,5)),2&e){let e;i.mGM(e=i.lsd())&&(t.tablecontent=e.first),i.mGM(e=i.lsd())&&(t.headercontent=e.first)}},inputs:{relatefilter:"relatefilter"},outputs:{selectedItems:"selectedItems",usedSearchTerm:"usedSearchTerm"},features:[i.Jv_([o.U,l.K,n.g])],decls:20,vars:13,consts:[["size","large"],[3,"close"],["margin","none",3,"grow"],[1,"slds-height_full"],[1,"slds-is-relative",3,"ngStyle"],[1,"slds-scrollable--y","slds-height_full",3,"scroll"],["tablecontent",""],["role","listbox",1,"slds-table","slds-table--fixed-layout","slds-table--bordered","slds-max-medium-table--stacked-horizontal",3,"ngClass"],[4,"ngIf"],["object-list-item","","class","slds-hint-parent slds-p-horizontal--x-small",3,"listItem","showActionMenu","rowselect","displaylinks","click",4,"ngFor","ngForOf"],["system-table-stencils","",3,"columns","select","tools","rows",4,"ngIf"],[1,"slds-button","slds-button--neutral",3,"click"],["label","LBL_CANCEL"],["class","slds-button slds-button--brand",3,"click",4,"ngIf"],["class","slds-button slds-button--brand",3,"disabled","click",4,"ngIf"],["object-list-header","",3,"showSelectColumn","showRowActionMenu"],["object-list-item","",1,"slds-hint-parent","slds-p-horizontal--x-small",3,"listItem","showActionMenu","rowselect","displaylinks","click"],["system-table-stencils","",3,"columns","select","tools","rows"],[1,"slds-button","slds-button--brand",3,"click"],["label","LBL_NEW"],[1,"slds-button","slds-button--brand",3,"disabled","click"],["label","LBL_SELECT"]],template:function(e,t){1&e&&(i.j41(0,"system-modal",0)(1,"system-modal-header",1),i.bIt("close",(function(){return t.closePopup()})),i.EFF(2),i.k0s(),i.j41(3,"system-modal-content",2)(4,"div",3),i.nrm(5,"object-modal-module-lookup-header"),i.j41(6,"div",4)(7,"div",5,6),i.bIt("scroll",(function(e){return t.onScroll(e)})),i.j41(9,"table",7),i.DNE(10,p,2,2,"thead",8),i.j41(11,"tbody"),i.DNE(12,f,1,4,"tr",9),i.k0s(),i.DNE(13,b,1,4,"tbody",10),i.k0s()(),i.nrm(14,"object-modal-module-lookup-aggregates"),i.k0s()()(),i.j41(15,"system-modal-footer")(16,"button",11),i.bIt("click",(function(){return t.closePopup()})),i.nrm(17,"system-label",12),i.k0s(),i.DNE(18,y,2,0,"button",13)(19,v,2,1,"button",14),i.k0s()()),2&e&&(i.R7$(2),i.JRh(t.language.getModuleCombinedLabel("LBL_SEARCH",t.modellist.module)),i.R7$(),i.Y8G("grow",!0),i.R7$(3),i.Y8G("ngStyle",t.contentStyle()),i.R7$(3),i.Y8G("ngClass",i.sMw(9,_,t.multiselect,!t.multiselect,!t.smallView)),i.R7$(),i.Y8G("ngIf",!t.smallView),i.R7$(2),i.Y8G("ngForOf",t.modellist.listData.list),i.R7$(),i.Y8G("ngIf",t.modellist.isLoading),i.R7$(5),i.Y8G("ngIf",t.canAdd),i.R7$(),i.Y8G("ngIf",t.multiselect))},styles:["\n\n\n\n\n\n\n\n\n\n\n  table.singleselect tr:hover td{cursor:pointer}"]})}return ObjectModalModuleLookup})()},6815:(e,t,s)=>{"use strict";s.d(t,{H:()=>p});var i=s(49969),n=s(54438),l=s(75103),o=s(83935),a=s(60177),r=s(98427),d=s(28460),c=s(53471);function u(e,t){1&e&&n.nrm(0,"object-listview-tags-aggregate")}function m(e,t){if(1&e&&(n.j41(0,"div",5),n.nrm(1,"object-listview-aggregate",6),n.k0s()),2&e){const e=t.$implicit;n.R7$(),n.Y8G("aggregate",e)}}const h=e=>({module:e});function g(e,t){if(1&e&&(n.j41(0,"div",1)(1,"div",2),n.DNE(2,u,1,0,"object-listview-tags-aggregate",3)(3,m,2,1,"div",4),n.k0s()()),2&e){const e=n.XpG();n.Y8G("@animatepanel",void 0)("system-model-provider",n.eq3(4,h,e.modellist.module)),n.R7$(2),n.Y8G("ngIf",e.hasTags),n.R7$(),n.Y8G("ngForOf",e.getAggregates())}}let p=(()=>{class ObjectModalModuleLookupAggregates{constructor(e,t){this.modellist=e,this.metadata=t}get hasTags(){return this.metadata.checkTagging(this.modellist.module)}getAggregates(){return this.modellist.moduleAggregates}static#e=this.ɵfac=function(e){return new(e||ObjectModalModuleLookupAggregates)(n.rXU(l.K),n.rXU(o.yu))};static#t=this.ɵcmp=n.VBU({type:ObjectModalModuleLookupAggregates,selectors:[["object-modal-module-lookup-aggregates"]],decls:1,vars:1,consts:[["class","slds-is-absolute slds-panel slds-panel--filters slds-filters__body slds-nowrap  slds-scrollable--y","style","width: 320px; height: 100%; top:0px; right: 0px;z-index: 99;",3,"system-model-provider",4,"ngIf"],[1,"slds-is-absolute","slds-panel","slds-panel--filters","slds-filters__body","slds-nowrap","slds-scrollable--y",2,"width","320px","height","100%","top","0px","right","0px","z-index","99",3,"system-model-provider"],[1,"slds-filters__body","slds-grid_vertical"],[4,"ngIf"],["class","slds-m-vertical--xx-small",4,"ngFor","ngForOf"],[1,"slds-m-vertical--xx-small"],[3,"aggregate"]],template:function(e,t){1&e&&n.DNE(0,g,4,6,"div",0),2&e&&n.Y8G("ngIf",t.modellist.displayAggregates)},dependencies:[a.Sq,a.bT,r.v,d.q,c.L],encapsulation:2,data:{animation:[(0,i.hZ)("animatepanel",[(0,i.kY)(":enter",[(0,i.iF)({right:"-320px",overflow:"hidden"}),(0,i.i0)(".5s",(0,i.iF)({right:"0px"})),(0,i.iF)({overflow:"unset"})]),(0,i.kY)(":leave",[(0,i.iF)({overflow:"hidden"}),(0,i.i0)(".5s",(0,i.iF)({right:"-320px"}))])])]}})}return ObjectModalModuleLookupAggregates})()},33778:(e,t,s)=>{"use strict";s.d(t,{W:()=>m});var i=s(54438),n=s(18359),l=s(69904),o=s(75103),a=s(92462),r=s(83935),d=s(53584);function c(e,t){if(1&e){const e=i.RV6();i.j41(0,"system-checkbox",8),i.mxI("ngModelChange",(function(t){i.eBV(e);const s=i.XpG();return i.DH7(s.relatefilterActive,t)||(s.relatefilterActive=t),i.Njj(t)})),i.nrm(1,"system-label",9)(2,"system-label-modulename",10),i.EFF(3),i.k0s()}if(2&e){const e=i.XpG();i.Y8G("disabled",e.relatefilter.required),i.R50("ngModel",e.relatefilterActive),i.R7$(2),i.Y8G("module",e.relatefilter.module)("singular",!0),i.R7$(),i.SpI(" ",e.relatefilter.display,"")}}function u(e,t){if(1&e){const e=i.RV6();i.j41(0,"system-checkbox",8),i.mxI("ngModelChange",(function(t){i.eBV(e);const s=i.XpG();return i.DH7(s.modulefilterActive,t)||(s.modulefilterActive=t),i.Njj(t)})),i.nrm(1,"system-label",11),i.k0s()}if(2&e){const e=i.XpG();i.Y8G("disabled",!1),i.R50("ngModel",e.modulefilterActive),i.R7$(),i.Y8G("label",e.moduleFilterName)}}let m=(()=>{class ObjectModalModuleLookupHeader{constructor(e,t,s,l,o,a){this.language=e,this.modellist=t,this.modelutilities=s,this.metadata=l,this.element=o,this.configuration=a,this.searchTerm="",this.searchTermOld="",this.searchTimeOut=void 0,this.subscriptions=new n.yU,this.moduleFilter="",this.moduleFilterName="",this.usedSearchTerm=new i.bkB,this.autoCompleteKiller=this.modelutilities.generateGuid()}get modulefilter(){return this.modellist.modulefilter}get modulefilterActive(){return!!this.modellist.modulefilter}set modulefilterActive(e){e?this.modellist.modulefilter=this.moduleFilter:(this.moduleFilter=this.modellist.modulefilter,this.modellist.modulefilter=""),this.modellist.reLoadList()}get relatefilter(){return this.modellist.relatefilter}get relatefilterActive(){return this.relatefilter?.active}set relatefilterActive(e){this.relatefilter.active=e,this.modellist.relatefilter.active=e,this.modellist.reLoadList()}ngOnInit(){this.searchTerm=this.modellist.searchTerm,this.searchTermOld=this.modellist.searchTerm,this.getModuleFilterName()}ngOnDestroy(){this.subscriptions.unsubscribe()}doSearch(){this.searchTermOld=this.searchTerm,this.modellist.searchTerm=this.searchTerm,this.modellist.getListData()}triggerSearch(e){if(this.searchTerm!==this.searchTermOld)if("Enter"===e.key)this.searchTerm.length>0&&(this.searchTimeOut&&window.clearTimeout(this.searchTimeOut),this.doSearch());else this.searchTimeOut&&window.clearTimeout(this.searchTimeOut),this.searchTimeOut=window.setTimeout((()=>this.doSearch()),1e3)}getModuleFilterName(){if(this.modellist.modulefilter){let e=this.configuration.getData("modulefilters");this.moduleFilterName=e[this.modellist.modulefilter].name}}static#e=this.ɵfac=function(e){return new(e||ObjectModalModuleLookupHeader)(i.rXU(l.B),i.rXU(o.K),i.rXU(a.g),i.rXU(r.yu),i.rXU(i.aKT),i.rXU(d.i))};static#t=this.ɵcmp=i.VBU({type:ObjectModalModuleLookupHeader,selectors:[["object-modal-module-lookup-header"]],outputs:{usedSearchTerm:"usedSearchTerm"},decls:12,vars:6,consts:[[1,"slds-form-element","slds-p-top--medium","slds-p-horizontal--medium","slds-m-bottom--small","slds-grid","slds-grid--vertical-align-center"],[1,"slds-form-element__control","slds-input-has-icon","slds-input-has-icon--right","slds-grow"],["icon","search","size","x-small","addclasses","slds-input__icon"],["type","text","id","lookup",1,"slds-input",3,"ngModel","autocomplete","placeholder","ngModelChange","keyup"],[1,"slds-button","slds-button--neutral","slds-button--icon-border","slds-m-horizontal--xxx-small",3,"click"],[3,"icon"],[1,"slds-theme--shade","slds-p-around--x-small","slds-border--top","slds-grid","slds-grid--vertical-align-center","slds","slds-grid--align-spread"],[3,"disabled","ngModel","ngModelChange",4,"ngIf"],[3,"disabled","ngModel","ngModelChange"],["label","LBL_RELATED_TO"],[3,"module","singular"],[3,"label"]],template:function(e,t){1&e&&(i.j41(0,"div",0),i.nrm(1,"object-list-types"),i.j41(2,"div",1),i.nrm(3,"system-utility-icon",2),i.j41(4,"input",3),i.mxI("ngModelChange",(function(e){return i.DH7(t.searchTerm,e)||(t.searchTerm=e),e})),i.bIt("keyup",(function(e){return t.triggerSearch(e)})),i.k0s()(),i.j41(5,"button",4),i.bIt("click",(function(){return t.modellist.reLoadList()})),i.nrm(6,"system-button-icon",5),i.k0s(),i.nrm(7,"object-listview-aggregates-button"),i.k0s(),i.j41(8,"div",6),i.nrm(9,"object-listview-header-details"),i.DNE(10,c,4,5,"system-checkbox",7)(11,u,2,3,"system-checkbox",7),i.k0s()),2&e&&(i.R7$(4),i.R50("ngModel",t.searchTerm),i.Y8G("autocomplete",t.autoCompleteKiller)("placeholder",t.language.getModuleName(t.modellist.module)),i.R7$(2),i.Y8G("icon","refresh"),i.R7$(4),i.Y8G("ngIf",t.relatefilter&&t.relatefilter.id),i.R7$(),i.Y8G("ngIf",t.modulefilter||t.moduleFilter))},encapsulation:2})}return ObjectModalModuleLookupHeader})()},1876:(e,t,s)=>{"use strict";s.d(t,{e:()=>C});var i=s(41731),n=s(54438),l=s(57363),o=s(35911),a=s(83935),r=s(60177),d=s(68823),c=s(44985),u=s(37263),m=s(44261),h=s(46649),g=s(74045),p=s(48842),f=s(29895),b=s(99064),y=s(58379),v=s(1036);function k(e,t){if(1&e&&n.nrm(0,"system-label-modulename",18),2&e){const e=n.XpG();n.Y8G("module",e.moduleName)}}function R(e,t){if(1&e){const e=n.RV6();n.j41(0,"a",19),n.bIt("click",(function(){n.eBV(e);const t=n.XpG();return n.Njj(t.goToModule())})),n.nrm(1,"system-label-modulename",20),n.k0s()}if(2&e){const e=n.XpG();n.R7$(),n.Y8G("module",e.moduleName)("singular",!0)}}function I(e,t){1&e&&(n.j41(0,"li",7),n.nrm(1,"object-set-inactive-icon"),n.k0s())}function x(e,t){if(1&e&&(n.qex(0),n.EFF(1),n.bVm()),2&e){const e=n.XpG();n.R7$(),n.JRh(e.model.data.summary_text)}}const j=()=>({displayLabels:!1});function G(e,t){if(1&e&&n.nrm(0,"object-record-fieldset-horizontal-list",21),2&e){const e=n.XpG();n.Y8G("fieldset",e.fieldset)("system-view-provider",n.lJ4(2,j))}}let C=(()=>{class ObjectPageHeader{constructor(e,t,s){this.router=e,this.model=t,this.metadata=s,this.componentconfig={},this.actionSet="",this.fieldset=""}ngOnInit(){let e=this.componentconfig&&!_.isEmpty(this.componentconfig)?this.componentconfig:this.metadata.getComponentConfig("ObjectPageHeader",this.model.module);this.actionSet=e.actionset,this.fieldset=e.fieldset}get moduleName(){return this.model.module}get hasInactiveFieldProperty(){return this.metadata.hasField(this.model._module,"is_inactive")}get canGoToModule(){return this.metadata.getModuleDefs(this.moduleName).visible&&this.metadata.checkModuleAcl(this.moduleName,"list")}goToModule(){this.canGoToModule&&this.router.navigate(["/module/"+this.moduleName])}static#e=this.ɵfac=function(e){return new(e||ObjectPageHeader)(n.rXU(l.Ix),n.rXU(o.g),n.rXU(a.yu))};static#t=this.ɵcmp=n.VBU({type:ObjectPageHeader,selectors:[["object-page-header"]],features:[n.Jv_([i.U])],decls:25,vars:7,consts:[[1,"slds-page-header"],[1,"slds-grid"],[1,"slds-col","slds-has-flexi-truncate"],[1,"slds-media","slds-no-space","slds-grow"],[3,"module","click"],[1,"slds-media__body"],[1,"slds-list_horizontal","slds-has-dividers_left","slds-line-height--reset"],[1,"slds-item"],[1,"slds-text-title--caps"],[3,"module",4,"ngIf"],["href","javascript:void(0);",3,"click",4,"ngIf"],["class","slds-item",4,"ngIf"],[1,"slds-grid","slds-grid--vertical-align-center"],[1,"slds-page-header__title","slds-m-right--small","slds-align-middle","slds-truncate"],[4,"ngIf"],[3,"fieldset","system-view-provider",4,"ngIf"],[1,"slds-m-horizontal--x-small","slds-show--medium","slds-align--absolute-center"],[3,"actionset"],[3,"module"],["href","javascript:void(0);",3,"click"],[3,"module","singular"],[3,"fieldset","system-view-provider"]],template:function(e,t){1&e&&(n.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"system-icon",4),n.bIt("click",(function(){return t.goToModule()})),n.k0s(),n.j41(5,"div",5)(6,"ul",6)(7,"li",7)(8,"p",8),n.DNE(9,k,1,1,"system-label-modulename",9)(10,R,2,2,"a",10),n.k0s()(),n.j41(11,"li",7),n.nrm(12,"object-subscription-icon"),n.k0s(),n.j41(13,"li",7),n.nrm(14,"object-reminder-icon"),n.k0s(),n.DNE(15,I,2,0,"li",11),n.k0s(),n.j41(16,"div",12)(17,"h1",13),n.DNE(18,x,2,1,"ng-container",14)(19,G,1,3,"object-record-fieldset-horizontal-list",15),n.k0s(),n.nrm(20,"object-page-header-tags"),n.k0s()()()(),n.j41(21,"div",16),n.nrm(22,"object-workflow-button")(23,"object-status-network-button")(24,"object-action-container",17),n.k0s()()()),2&e&&(n.R7$(4),n.Y8G("module",t.moduleName),n.R7$(5),n.Y8G("ngIf",!t.canGoToModule),n.R7$(),n.Y8G("ngIf",t.canGoToModule),n.R7$(5),n.Y8G("ngIf",t.hasInactiveFieldProperty),n.R7$(3),n.Y8G("ngIf",!t.fieldset),n.R7$(),n.Y8G("ngIf",t.fieldset),n.R7$(5),n.Y8G("actionset",t.actionSet))},dependencies:[r.bT,d.J,c.r,u.x,m.l,h.R,g.b,p.I,f.b,b.Y,y.t,v.i],encapsulation:2})}return ObjectPageHeader})()},46649:(e,t,s)=>{"use strict";s.d(t,{R:()=>I});var i=s(54438),n=s(35911),l=s(83935),o=s(69904),a=s(41081),r=s(60177),d=s(25863),c=s(31033),u=s(32062),m=s(43308),h=s(18521);function g(e,t){1&e&&i.nrm(0,"system-stencil")}function p(e,t){if(1&e){const e=i.RV6();i.j41(0,"span",14),i.bIt("click",(function(){i.eBV(e);const t=i.XpG().index,s=i.XpG(4);return i.Njj(s.removeByIndex(t))})),i.nrm(1,"system-utility-icon",15),i.k0s()}}function f(e,t){if(1&e&&(i.j41(0,"div",11)(1,"span",12),i.EFF(2),i.DNE(3,p,2,0,"span",13),i.k0s()()),2&e){const e=t.$implicit,s=i.XpG(4);i.R7$(2),i.SpI(" ",e," "),i.R7$(),i.Y8G("ngIf",s.isEditing)}}function b(e,t){if(1&e&&(i.j41(0,"div",9),i.DNE(1,f,4,2,"div",10),i.k0s()),2&e){const e=i.XpG(3);i.R7$(),i.Y8G("ngForOf",e.objecttags)}}function y(e,t){1&e&&(i.j41(0,"div",16)(1,"div",17),i.nrm(2,"system-label",18),i.k0s()())}function v(e,t){if(1&e){const e=i.RV6();i.j41(0,"div")(1,"button",19),i.bIt("click",(function(){i.eBV(e);const t=i.XpG(3);return i.Njj(t.editTags())})),i.nrm(2,"system-button-icon",20),i.k0s()()}2&e&&(i.R7$(2),i.Y8G("icon","edit"))}function _(e,t){if(1&e){const e=i.RV6();i.j41(0,"div",21)(1,"div",22)(2,"system-input-tags",23),i.bIt("tagemitter",(function(t){i.eBV(e);const s=i.XpG(3);return i.Njj(s.addTag(t))})),i.k0s()(),i.j41(3,"button",24),i.bIt("click",(function(){i.eBV(e);const t=i.XpG(3);return i.Njj(t.cancelEdit())})),i.nrm(4,"system-button-icon",20),i.k0s(),i.j41(5,"button",19),i.bIt("click",(function(){i.eBV(e);const t=i.XpG(3);return i.Njj(t.saveTags())})),i.nrm(6,"system-button-icon",20),i.k0s()()}2&e&&(i.R7$(4),i.Y8G("icon","close"),i.R7$(2),i.Y8G("icon","check"))}function k(e,t){if(1&e&&(i.j41(0,"div",4),i.DNE(1,b,2,1,"div",5)(2,y,3,0,"div",6)(3,v,3,1,"div",7)(4,_,7,2,"div",8),i.k0s()),2&e){const e=i.XpG(2);i.R7$(),i.Y8G("ngIf",e.objecttags.length),i.R7$(),i.Y8G("ngIf",0==e.objecttags.length&&!e.isEditing),i.R7$(),i.Y8G("ngIf",!e.isEditing&&e.canEdit),i.R7$(),i.Y8G("ngIf",e.isEditing)}}function R(e,t){if(1&e&&(i.j41(0,"div",1),i.DNE(1,g,1,0,"system-stencil",2)(2,k,5,4,"ng-template",null,3,i.C5r),i.k0s()),2&e){const e=i.sdS(3),t=i.XpG();i.R7$(),i.Y8G("ngIf",t.model.isLoading)("ngIfElse",e)}}let I=(()=>{class ObjectPageHeaderTags{constructor(e,t,s,i){this.model=e,this.metadata=t,this.language=s,this.toast=i,this.isEditing=!1,this.taggingEnabled=!1,this.taggingEnabled=this.checkTaggingEnabled()}get objecttags(){let e=this.model.getField("tags");if(!e||""===e)return[];try{return JSON.parse(e)}catch(e){return[]}}checkTaggingEnabled(){return this.metadata.checkTagging(this.model.module)}get canEdit(){return this.model.checkAccess("edit")&&!this.model.isEditing}editTags(){this.isEditing=!0,this.model.startEdit()}cancelEdit(){this.isEditing=!1,this.model.cancelEdit()}saveTags(){this.model.save(),this.isEditing=!1}removeByIndex(e){let t=this.objecttags;t.splice(e,1),this.model.setField("tags",JSON.stringify(t))}addTag(e){let t=this.objecttags.map((e=>e.toLowerCase()));t.includes(e.toLowerCase())?this.toast.sendToast(this.language.getLabel("LBL_TAG_EXISTS","","short"),"warning"):(this.objecttags.indexOf(e),t.push(e),this.model.setField("tags",JSON.stringify(t)))}static#e=this.ɵfac=function(e){return new(e||ObjectPageHeaderTags)(i.rXU(n.g),i.rXU(l.yu),i.rXU(o.B),i.rXU(a.o))};static#t=this.ɵcmp=i.VBU({type:ObjectPageHeaderTags,selectors:[["object-page-header-tags"]],decls:1,vars:1,consts:[["class","slds-show--medium slds-p-top--xx-small",4,"ngIf"],[1,"slds-show--medium","slds-p-top--xx-small"],[4,"ngIf","ngIfElse"],["displayContent",""],[1,"slds-grid","slds-grid--vertical-align-center"],["class","slds-p-right--xx-small slds-grid slds-gutters_direct-xxx-small",4,"ngIf"],["class","slds-p-right--xx-small",4,"ngIf"],[4,"ngIf"],["class","slds-grid slds-grow",4,"ngIf"],[1,"slds-p-right--xx-small","slds-grid","slds-gutters_direct-xxx-small"],["class","slds-col",4,"ngFor","ngForOf"],[1,"slds-col"],[1,"slds-badge","slds-badge_lightest"],["class","slds-badge__icon slds-badge__icon_right",3,"click",4,"ngIf"],[1,"slds-badge__icon","slds-badge__icon_right",3,"click"],["icon","close","size","xx-small"],[1,"slds-p-right--xx-small"],[2,"font-style","italic"],["label","LBL_NO_TAGS_ASSIGNED"],[1,"slds-button","slds-button_icon",3,"click"],[3,"icon"],[1,"slds-grid","slds-grow"],[1,"slds-form-element","slds-grow"],[3,"tagemitter"],[1,"slds-p-left--xx-small","slds-button","slds-button_icon",3,"click"]],template:function(e,t){1&e&&i.DNE(0,R,4,2,"div",0),2&e&&i.Y8G("ngIf",t.taggingEnabled)},dependencies:[r.Sq,r.bT,d.t,c.j,u.W,m.O,h.B],encapsulation:2})}return ObjectPageHeaderTags})()},46433:(e,t,s)=>{"use strict";s.d(t,{B:()=>g});var i=s(41731),n=s(18359),l=s(54438),o=s(83935),a=s(35911),r=s(69904),d=s(60177),c=s(60595),u=s(32130),m=s(45658);function h(e,t){if(1&e&&(l.j41(0,"h3",3),l.EFF(1),l.k0s()),2&e){const e=l.XpG();l.R7$(),l.JRh(e.header)}}let g=(()=>{class ObjectRecordDetails{constructor(e,t,s,i,l,o){this.view=e,this.metadata=t,this.componentFactoryResolver=s,this.model=i,this.language=l,this.renderer=o,this.componentconfig={},this.subscriptions=new n.yU}ngOnInit(){this.buildContainer(),!0===this.readonly||this.componentconfig.readonly?this.view.isEditable=!1:(this.view.isEditable=!0,this.view.linkedToModel=!0,this.subscriptions.add(this.view.mode$.subscribe((e=>{"edit"!=e||this.model.isEditing||this.model.startEdit()}))))}ngOnDestroy(){this.subscriptions.unsubscribe()}buildContainer(){this.componentSet||(this.componentconfig.componentset||(this.componentconfig=this.metadata.getComponentConfig("ObjectRecordDetails",this.model.module)),this.componentSet=this.componentconfig.componentset)}getBoxStyle(){return this.view.isEditMode()?{"box-shadow":"0 2px 4px 4px rgba(0,0,0,.16)"}:{}}get showHeader(){return!!this.componentconfig.header}get header(){return this.language.getLabel(this.componentconfig.header,this.model.module)}static#e=this.ɵfac=function(e){return new(e||ObjectRecordDetails)(l.rXU(i.U),l.rXU(o.yu),l.rXU(l.OM3),l.rXU(a.g),l.rXU(r.B),l.rXU(l.sFG))};static#t=this.ɵcmp=l.VBU({type:ObjectRecordDetails,selectors:[["object-record-details"]],inputs:{componentSet:"componentSet",readonly:"readonly"},features:[l.Jv_([i.U])],decls:4,vars:4,consts:[["class","slds-text-heading_small slds-theme_shade slds-p-around--x-small",4,"ngIf"],[1,"slds-is-relative",3,"ngStyle","system-overlay-loading-spinner"],[3,"componentset"],[1,"slds-text-heading_small","slds-theme_shade","slds-p-around--x-small"]],template:function(e,t){1&e&&(l.DNE(0,h,2,1,"h3",0),l.j41(1,"div",1),l.nrm(2,"system-componentset",2)(3,"object-record-details-footer"),l.k0s()),2&e&&(l.Y8G("ngIf",t.showHeader),l.R7$(),l.Y8G("ngStyle",t.getBoxStyle())("system-overlay-loading-spinner",t.model.isSaving),l.R7$(),l.Y8G("componentset",t.componentSet))},dependencies:[d.bT,d.B3,c.F,u.M,m.W],encapsulation:2})}return ObjectRecordDetails})()},45658:(e,t,s)=>{"use strict";s.d(t,{W:()=>m});var i=s(54438),n=s(41731),l=s(35911),o=s(69904),a=s(83935),r=s(60177),d=s(44261),c=s(34796);function u(e,t){if(1&e&&(i.j41(0,"div",1),i.nrm(1,"object-action-container",2)(2,"object-record-messages-badge"),i.k0s()),2&e){const e=i.XpG();i.R7$(),i.Y8G("actionset",e.actionset)}}let m=(()=>{class ObjectRecordDetailsFooter{constructor(e,t,s,i){this.view=e,this.model=t,this.language=s,this.metadata=i}ngOnInit(){let e=this.metadata.getComponentConfig("ObjectRecordDetailsFooter",this.model.module);this.actionset=e.actionset}cancel(){this.model.cancelEdit(),this.view.setViewMode()}save(){this.model.validate()&&(this.model.save(!0),this.view.setViewMode())}static#e=this.ɵfac=function(e){return new(e||ObjectRecordDetailsFooter)(i.rXU(n.U),i.rXU(l.g),i.rXU(o.B),i.rXU(a.yu))};static#t=this.ɵcmp=i.VBU({type:ObjectRecordDetailsFooter,selectors:[["object-record-details-footer"]],decls:1,vars:1,consts:[["class","slds-text-align--center slds-p-bottom--small slds-grid slds-grid--align-center slds-grid--vertical-align-center",4,"ngIf"],[1,"slds-text-align--center","slds-p-bottom--small","slds-grid","slds-grid--align-center","slds-grid--vertical-align-center"],[3,"actionset"]],template:function(e,t){1&e&&i.DNE(0,u,3,1,"div",0),2&e&&i.Y8G("ngIf",t.view.isEditMode())},dependencies:[r.bT,d.l,c.o],encapsulation:2})}return ObjectRecordDetailsFooter})()},3719:(e,t,s)=>{"use strict";s.d(t,{D:()=>b});var i=s(54438),n=s(83935),l=s(35911),o=s(41731),a=s(60177),r=s(46371);function d(e,t){if(1&e&&i.nrm(0,"object-record-fieldset-field",5),2&e){const e=i.XpG().$implicit,t=i.XpG(2);i.Y8G("fieldsetitem",e)("fielddisplayclass",t.fielddisplayclass)("fieldpadding",t.fieldpadding)}}function c(e,t){if(1&e&&i.nrm(0,"object-record-fieldset",6),2&e){const e=i.XpG().$implicit,t=i.XpG(2);i.Y8G("fieldset",e.fieldset)("fielddisplayclass",t.fielddisplayclass)("fieldpadding",t.fieldpadding)("direction",e.fieldconfig.direction)}}function u(e,t){if(1&e&&(i.j41(0,"div"),i.DNE(1,d,1,3,"object-record-fieldset-field",3)(2,c,1,4,"object-record-fieldset",4),i.k0s()),2&e){const e=t.$implicit,s=i.XpG(2);i.R7$(),i.Y8G("ngIf",s.isField(e)),i.R7$(),i.Y8G("ngIf",!s.isField(e))}}function m(e,t){if(1&e&&(i.j41(0,"div"),i.DNE(1,u,3,2,"div",2),i.k0s()),2&e){const e=i.XpG();i.R7$(),i.Y8G("ngForOf",e.fieldsetitems)}}function h(e,t){if(1&e&&i.nrm(0,"object-record-fieldset-field",5),2&e){const e=i.XpG().$implicit,t=i.XpG(2);i.Y8G("fieldsetitem",e)("fielddisplayclass",t.fielddisplayclass)("fieldpadding",t.fieldpadding)}}function g(e,t){if(1&e&&i.nrm(0,"object-record-fieldset",6),2&e){const e=i.XpG().$implicit,t=i.XpG(2);i.Y8G("fieldset",e.fieldset)("fielddisplayclass",t.fielddisplayclass)("fieldpadding",t.fieldpadding)("direction",e.fieldconfig.direction)}}function p(e,t){if(1&e&&(i.j41(0,"div",9),i.DNE(1,h,1,3,"object-record-fieldset-field",3)(2,g,1,4,"object-record-fieldset",4),i.k0s()),2&e){const e=t.$implicit,s=t.index,n=i.XpG(2);i.Y8G("ngClass",n.sizeClass(s)),i.R7$(),i.Y8G("ngIf",n.isField(e)),i.R7$(),i.Y8G("ngIf",!n.isField(e))}}function f(e,t){if(1&e&&(i.j41(0,"div",7),i.DNE(1,p,3,3,"div",8),i.k0s()),2&e){const e=i.XpG();i.R7$(),i.Y8G("ngForOf",e.fieldsetitems)}}let b=(()=>{class ObjectRecordFieldset{constructor(e,t,s){this.metadata=e,this.model=t,this.view=s,this.fieldset="",this.direction="horizontal",this.fieldpadding="xx-small",this.fielddisplayclass="slds-has-divider--bottom slds-p-vertical--x-small spice-fieldminheight",this.fieldsetitems=[],this.numberOfColumns=0}ngOnInit(){this.fieldsetitems=this.metadata.getFieldSetItems(this.fieldset);for(let e of this.fieldsetitems)this.numberOfColumns=this.numberOfColumns+(e.fieldconfig.width?1*e.fieldconfig.width:e.fieldconfig.width=1);!this.renderVertical&&this.numberOfColumns>8&&12!==this.numberOfColumns&&console.warn("wrong fieldset grid ("+this.fieldset+")")}get renderVertical(){return"vertical"==this.direction}isField(e){return!!e.field}sizeClass(e){return this.renderVertical?"":"small"==this.view.size?"slds-size--1-of-1":"slds-size--"+this.fieldsetitems[e].fieldconfig.width+"-of-"+this.numberOfColumns}static#e=this.ɵfac=function(e){return new(e||ObjectRecordFieldset)(i.rXU(n.yu),i.rXU(l.g),i.rXU(o.U))};static#t=this.ɵcmp=i.VBU({type:ObjectRecordFieldset,selectors:[["object-record-fieldset"]],inputs:{fieldset:"fieldset",direction:"direction",fieldpadding:"fieldpadding",fielddisplayclass:"fielddisplayclass"},decls:2,vars:2,consts:[[4,"ngIf"],["class","slds-grid slds-wrap",4,"ngIf"],[4,"ngFor","ngForOf"],[3,"fieldsetitem","fielddisplayclass","fieldpadding",4,"ngIf"],[3,"fieldset","fielddisplayclass","fieldpadding","direction",4,"ngIf"],[3,"fieldsetitem","fielddisplayclass","fieldpadding"],[3,"fieldset","fielddisplayclass","fieldpadding","direction"],[1,"slds-grid","slds-wrap"],[3,"ngClass",4,"ngFor","ngForOf"],[3,"ngClass"]],template:function(e,t){1&e&&i.DNE(0,m,2,1,"div",0)(1,f,2,1,"div",1),2&e&&(i.Y8G("ngIf",t.renderVertical),i.R7$(),i.Y8G("ngIf",!t.renderVertical))},dependencies:[a.YU,a.Sq,a.bT,ObjectRecordFieldset,r.b],encapsulation:2})}return ObjectRecordFieldset})()},46371:(e,t,s)=>{"use strict";s.d(t,{b:()=>o});var i=s(54438),n=s(60177),l=s(15091);let o=(()=>{class ObjectRecordFieldsetField{constructor(){this.fieldpadding="x-small",this.fielddisplayclass="slds-has-divider--bottom slds-p-vertical--x-small spice-fieldminheight"}showLabel(e){return!0!==e.hidelabel}get padding(){return this.fieldpadding?"slds-p-around--"+this.fieldpadding:""}static#e=this.ɵfac=function(e){return new(e||ObjectRecordFieldsetField)};static#t=this.ɵcmp=i.VBU({type:ObjectRecordFieldsetField,selectors:[["object-record-fieldset-field"]],inputs:{fieldsetitem:"fieldsetitem",fieldpadding:"fieldpadding",fielddisplayclass:"fielddisplayclass"},decls:2,vars:4,consts:[[3,"ngClass"],[3,"field","fieldconfig","fielddisplayclass"]],template:function(e,t){1&e&&(i.j41(0,"div",0),i.nrm(1,"field-container",1),i.k0s()),2&e&&(i.Y8G("ngClass",t.padding),i.R7$(),i.Y8G("field",t.fieldsetitem.field)("fieldconfig",t.fieldsetitem.fieldconfig)("fielddisplayclass",t.fielddisplayclass))},dependencies:[n.YU,l.y],encapsulation:2})}return ObjectRecordFieldsetField})()},29895:(e,t,s)=>{"use strict";s.d(t,{b:()=>c});var i=s(54438),n=s(83935),l=s(35911),o=s(60177),a=s(15091);function r(e,t){if(1&e&&(i.j41(0,"li",3),i.nrm(1,"field-container",4),i.k0s()),2&e){const e=i.XpG().$implicit;i.R7$(),i.Y8G("field",e.field)("fieldconfig",e.fieldconfig)}}function d(e,t){if(1&e&&(i.qex(0),i.DNE(1,r,2,2,"li",2),i.bVm()),2&e){const e=t.$implicit,s=i.XpG();i.R7$(),i.Y8G("ngIf",s.model.getField(e.field))}}let c=(()=>{class ObjectRecordFieldsetHorizontalList{constructor(e,t){this.metadata=e,this.model=t,this.fieldset="",this.fieldsetitems=[]}ngOnInit(){this.fieldsetitems=this.metadata.getFieldSetItems(this.fieldset)}static#e=this.ɵfac=function(e){return new(e||ObjectRecordFieldsetHorizontalList)(i.rXU(n.yu),i.rXU(l.g))};static#t=this.ɵcmp=i.VBU({type:ObjectRecordFieldsetHorizontalList,selectors:[["object-record-fieldset-horizontal-list"]],inputs:{fieldset:"fieldset"},decls:2,vars:1,consts:[[1,"slds-list_horizontal","slds-has-dividers_left"],[4,"ngFor","ngForOf"],["class","slds-item",4,"ngIf"],[1,"slds-item"],["fielddisplayclass","slds-align_absolute-center",3,"field","fieldconfig"]],template:function(e,t){1&e&&(i.j41(0,"ul",0),i.DNE(1,d,2,1,"ng-container",1),i.k0s()),2&e&&(i.R7$(),i.Y8G("ngForOf",t.fieldsetitems))},dependencies:[o.Sq,o.bT,a.y],encapsulation:2})}return ObjectRecordFieldsetHorizontalList})()},34796:(e,t,s)=>{"use strict";s.d(t,{o:()=>g});var i=s(54438),n=s(35911),l=s(69904),o=s(60177),a=s(25863),r=s(32062),d=s(45915),c=s(18521);function u(e,t){if(1&e&&(i.j41(0,"tr",17)(1,"td",18)(2,"div",19),i.nrm(3,"system-utility-icon",20),i.k0s()(),i.j41(4,"td",21)(5,"div",19),i.nrm(6,"system-label-fieldname",22),i.k0s()(),i.j41(7,"td",23)(8,"div",19),i.EFF(9),i.k0s()()()),2&e){const e=t.$implicit,s=i.XpG(3);i.R7$(3),i.Y8G("icon",e.type),i.R7$(3),i.Y8G("module",s.model.module)("field",e.reference),i.R7$(3),i.JRh(e.message)}}function m(e,t){if(1&e){const e=i.RV6();i.j41(0,"section",5)(1,"button",6),i.bIt("click",(function(){i.eBV(e);const t=i.XpG(2);return i.Njj(t.showpopover=!1)})),i.nrm(2,"system-button-icon",7),i.k0s(),i.j41(3,"header",8)(4,"div",9),i.nrm(5,"system-utility-icon",10),i.j41(6,"div",11)(7,"h2",12),i.nrm(8,"system-label",13),i.k0s()()()(),i.j41(9,"div",14)(10,"table",15)(11,"tbody"),i.DNE(12,u,10,4,"tr",16),i.k0s()()()()}if(2&e){const e=i.XpG(2);i.Y8G("ngClass",e.nubbinClass)("ngStyle",e.popoverStyle),i.R7$(2),i.Y8G("inverse",!0),i.R7$(10),i.Y8G("ngForOf",e.messages)}}function h(e,t){if(1&e){const e=i.RV6();i.j41(0,"div",1)(1,"span",2),i.bIt("click",(function(){i.eBV(e);const t=i.XpG();return i.Njj(t.showpopover=!t.showpopover)})),i.EFF(2),i.nrm(3,"system-label",3),i.k0s(),i.DNE(4,m,13,4,"section",4),i.k0s()}if(2&e){const e=i.XpG();i.R7$(2),i.SpI("",e.messagecount," "),i.R7$(2),i.Y8G("ngIf",e.showpopover)}}let g=(()=>{class ObjectRecordMessagesBadge{constructor(e,t){this.model=e,this.language=t,this.side="left",this.showpopover=!1}get messagecount(){return this.model.getMessages().length}get messages(){return this.model.getMessages()}get nubbinClass(){return"right"==this.side?"slds-nubbin_bottom-right":"slds-nubbin_bottom-left"}get popoverStyle(){return"right"==this.side?{bottom:"37px",right:"-10px"}:{bottom:"37px",left:"-10px"}}static#e=this.ɵfac=function(e){return new(e||ObjectRecordMessagesBadge)(i.rXU(n.g),i.rXU(l.B))};static#t=this.ɵcmp=i.VBU({type:ObjectRecordMessagesBadge,selectors:[["object-record-messages-badge"]],inputs:{side:"side"},decls:1,vars:1,consts:[["class","slds-is-relative",4,"ngIf"],[1,"slds-is-relative"],[1,"slds-badge","slds-theme--error","slds-m-horizontal--xx-small",3,"click"],["label","LBL_ERRORS"],["aria-label","Model Errors","class","slds-popover slds-popover_error slds-nubbin_bottom-left slds-is-absolute","role","dialog",3,"ngClass","ngStyle",4,"ngIf"],["aria-label","Model Errors","role","dialog",1,"slds-popover","slds-popover_error","slds-nubbin_bottom-left","slds-is-absolute",3,"ngClass","ngStyle"],["title","Close dialog",1,"slds-button","slds-button_icon","slds-button_icon-small","slds-float_right","slds-popover__close",3,"click"],["icon","close",3,"inverse"],[1,"slds-popover__header"],[1,"slds-media","slds-media_center","slds-has-flexi-truncate"],["icon","error","size","x-small","colorclass","slds-icon-utility-error"],[1,"slds-media__body","slds-text-align--left","slds-p-left--x-small"],["title","Resolve error",1,"slds-truncate","slds-text-heading_small"],["label","LBL_VALIDATION_ERRORS"],[1,"slds-popover__body","slds-p-horizontal--none"],[1,"slds-table","slds-table_cell-buffer","slds-table_bordered"],["class","slds-hint-parent",4,"ngFor","ngForOf"],[1,"slds-hint-parent"],["data-label","type"],[1,"slds-truncate"],["size","x-small",3,"icon"],["data-label","Field"],[3,"module","field"],["data-label","Message"]],template:function(e,t){1&e&&i.DNE(0,h,5,2,"div",0),2&e&&i.Y8G("ngIf",t.messagecount)},dependencies:[o.YU,o.Sq,o.bT,o.B3,a.t,r.W,d.P,c.B],encapsulation:2})}return ObjectRecordMessagesBadge})()},57949:(e,t,s)=>{"use strict";s.d(t,{B:()=>f});var i=s(49969),n=s(14800),l=s(56990),o=s(54438),a=s(69904),r=s(83935),d=s(91107),c=s(35911),u=s(60177),m=s(32130);function h(e,t){if(1&e&&(o.j41(0,"div")(1,"div",4),o.SdG(2),o.k0s(),o.nrm(3,"object-related-card-footer",2),o.k0s()),2&e){const e=o.XpG(2);o.Y8G("@displaycard",void 0),o.R7$(),o.Y8G("system-overlay-loading-spinner",e.paginating),o.R7$(2),o.Y8G("componentconfig",e.componentconfig)}}function g(e,t){if(1&e&&(o.j41(0,"div",1),o.nrm(1,"object-related-card-header",2),o.DNE(2,h,4,3,"div",3),o.k0s()),2&e){const e=o.XpG();o.R7$(),o.Y8G("componentconfig",e.componentconfig),o.R7$(),o.Y8G("ngIf",e.isopen)}}const p=["*"];let f=(()=>{class ObjectRelatedCard{constructor(e,t,s,i){this.language=e,this.metadata=t,this.relatedmodels=s,this.model=i}get module(){return this.componentconfig.object}get hidden(){return!this.checkModelState()||!this.aclAccess()}get isloading(){return this.relatedmodels.isloading}get isopen(){return!(this.cardheader&&!this.cardheader.isopen)&&(this.relatedmodels.count>0||this.isloading)}get paginating(){return!(this.relatedmodels.isloading||!this.cardfooter||!this.cardfooter.paginating)}checkModelState(){return!(this.componentconfig.requiredmodelstate&&!this.model.checkModelState(this.componentconfig.requiredmodelstate))}aclAccess(){if(this.module){let e=""!=this.relatedmodels.linkName?this.relatedmodels.linkName:this.relatedmodels.relatedModule?.toLowerCase();return(this.metadata.checkModuleAcl(this.module,"list")||this.metadata.checkModuleAcl(this.module,"listrelated"))&&this.model.checkAccess("detail")&&this.model.checkFieldAccess(e)}return!1}static#e=this.ɵfac=function(e){return new(e||ObjectRelatedCard)(o.rXU(a.B),o.rXU(r.yu),o.rXU(d.K),o.rXU(c.g))};static#t=this.ɵcmp=o.VBU({type:ObjectRelatedCard,selectors:[["object-related-card"]],viewQuery:function(e,t){if(1&e&&(o.GBs(n.A,5),o.GBs(l.k,5)),2&e){let e;o.mGM(e=o.lsd())&&(t.cardheader=e.first),o.mGM(e=o.lsd())&&(t.cardfooter=e.first)}},inputs:{componentconfig:"componentconfig"},ngContentSelectors:p,decls:1,vars:1,consts:[["class","slds-card slds-card_boundary slds-m-bottom--medium",4,"ngIf"],[1,"slds-card","slds-card_boundary","slds-m-bottom--medium"],[3,"componentconfig"],[4,"ngIf"],[1,"slds-card__body","slds-size--1-of-1",3,"system-overlay-loading-spinner"]],template:function(e,t){1&e&&(o.NAR(),o.DNE(0,g,3,2,"div",0)),2&e&&o.Y8G("ngIf",!t.hidden)},dependencies:[u.bT,m.M,n.A,l.k],encapsulation:2,data:{animation:[(0,i.hZ)("displaycard",[(0,i.kY)(":enter",[(0,i.iF)({opacity:0,height:"0px",overflow:"hidden"}),(0,i.i0)(".5s",(0,i.iF)({height:"*",opacity:1})),(0,i.iF)({overflow:"unset"})]),(0,i.kY)(":leave",[(0,i.iF)({overflow:"hidden"}),(0,i.i0)(".5s",(0,i.iF)({height:"0px",opacity:0}))])])]}})}return ObjectRelatedCard})()},56990:(e,t,s)=>{"use strict";s.d(t,{k:()=>g});var i=s(54438),n=s(69904),l=s(91107),o=s(35911),a=s(57363),r=s(66031),d=s(60177),c=s(25863),u=s(32062);function m(e,t){if(1&e){const e=i.RV6();i.j41(0,"div",10)(1,"button",8),i.bIt("click",(function(){i.eBV(e);const t=i.XpG();return i.Njj(t.firstPage())})),i.nrm(2,"system-button-icon",11),i.k0s(),i.j41(3,"button",8),i.bIt("click",(function(){i.eBV(e);const t=i.XpG();return i.Njj(t.previousPage())})),i.nrm(4,"system-button-icon",12),i.k0s(),i.j41(5,"div",13),i.nrm(6,"system-label",14),i.j41(7,"div",15),i.EFF(8),i.k0s(),i.nrm(9,"system-label",16),i.j41(10,"div",15),i.EFF(11),i.k0s()(),i.j41(12,"button",8),i.bIt("click",(function(){i.eBV(e);const t=i.XpG();return i.Njj(t.nextPage())})),i.nrm(13,"system-button-icon",17),i.k0s(),i.j41(14,"button",8),i.bIt("click",(function(){i.eBV(e);const t=i.XpG();return i.Njj(t.lastPage())})),i.nrm(15,"system-button-icon",18),i.k0s()()}if(2&e){const e=i.XpG();i.R7$(),i.Y8G("disabled",e.previousDisabled||e.paginating),i.R7$(2),i.Y8G("disabled",e.previousDisabled||e.paginating),i.R7$(5),i.JRh(e.page),i.R7$(3),i.JRh(e.pages),i.R7$(),i.Y8G("disabled",e.nextDisabled||e.paginating),i.R7$(2),i.Y8G("disabled",e.nextDisabled||e.paginating)}}function h(e,t){if(1&e){const e=i.RV6();i.j41(0,"a",19),i.bIt("click",(function(){i.eBV(e);const t=i.XpG();return i.Njj(t.showAll())})),i.nrm(1,"system-label",20),i.k0s()}}let g=(()=>{class ObjectRelatedCardFooter{constructor(e,t,s,i,n){this.language=e,this.relatedmodels=t,this.model=s,this.router=i,this.navigationtab=n,this.disableReload=!1,this.module="",this.fieldset=void 0,this._displayitems=5,this.paginating=!1,this.componentid=this.model.utils.generateGuid()}ngOnInit(){this.fieldset=this.componentconfig.fieldset,this.module=this.componentconfig.object}get displayitems(){return this._displayitems}set displayitems(e){e!==this.displayitems&&(this.displayitems=e,this.relatedmodels.loaditems=e,this.relatedmodels.getData())}get canViewAll(){return this.relatedmodels.count>0&&this.relatedmodels.count>this.relatedmodels.items.length}canSetCount(){return this.relatedmodels.count>this.relatedmodels.items.length}showAll(){let e="";this.navigationtab?.tabid&&(e="/tab/"+this.navigationtab.tabid),this.fieldset&&""!=this.fieldset?this.router.navigate([e+"/module/"+this.model.module+"/"+this.model.id+"/"+this.relatedmodels.relatedModule+"/"+this.relatedmodels._linkName+"/"+this.fieldset]):this.router.navigate([e+"/module/"+this.model.module+"/"+this.model.id+"/"+this.relatedmodels.relatedModule+"/"+this.relatedmodels._linkName])}reload(){this.disableReload||(this.relatedmodels.offset=0,this.paginating=!0,this.relatedmodels.getData().subscribe((()=>this.paginating=!1)))}get nextDisabled(){return this.relatedmodels.offset+this.relatedmodels.loaditems>=this.relatedmodels.count}nextPage(){this.nextDisabled||(this.relatedmodels.offset=this.relatedmodels.offset+this.relatedmodels.loaditems,this.paginating=!0,this.relatedmodels.getData(!0).subscribe((()=>this.paginating=!1)))}lastPage(){if(!this.nextDisabled){let e=Math.floor(this.relatedmodels.count/this.relatedmodels.loaditems)*this.relatedmodels.loaditems;this.relatedmodels.offset=e,this.paginating=!0,this.relatedmodels.getData(!0).subscribe((()=>this.paginating=!1))}}get previousDisabled(){return 0==this.relatedmodels.offset}previousPage(){this.previousDisabled||(this.relatedmodels.offset=this.relatedmodels.offset-this.relatedmodels.loaditems,this.relatedmodels.offset<0&&(this.relatedmodels.offset=0),this.paginating=!0,this.relatedmodels.getData(!0).subscribe((()=>this.paginating=!1)))}firstPage(){this.previousDisabled||(this.relatedmodels.offset=0,this.paginating=!0,this.relatedmodels.getData(!0).subscribe((()=>this.paginating=!1)))}get page(){return this.relatedmodels.offset/this.relatedmodels.loaditems+1}get pages(){return Math.ceil(this.relatedmodels.count/this.relatedmodels.loaditems)}static#e=this.ɵfac=function(e){return new(e||ObjectRelatedCardFooter)(i.rXU(n.B),i.rXU(l.K),i.rXU(o.g),i.rXU(a.Ix),i.rXU(r._))};static#t=this.ɵcmp=i.VBU({type:ObjectRelatedCardFooter,selectors:[["object-related-card-footer"]],inputs:{componentconfig:"componentconfig",disableReload:"disableReload"},decls:10,vars:3,consts:[[1,"slds-card__footer"],[1,"slds-grid","slds-grid_vertical-align-center"],[1,"slds-size--1-of-3","slds-text-align--left",2,"min-width","140px"],["class","slds-grid slds-grid--vertical-align-center",4,"ngIf"],[1,"slds-grid","slds-grow"],[1,"slds-grow","slds-text-align_center",2,"min-width","75px"],["href","javascript:void(0);",3,"click",4,"ngIf"],[1,"slds-text-align--right","slds-grow"],[1,"slds-button","slds-button_icon",3,"disabled","click"],["icon","refresh"],[1,"slds-grid","slds-grid--vertical-align-center"],["icon","jump_to_left"],["icon","chevronleft"],[1,"slds-p-horizontal--xx-small","slds-grid","slds-grid--vertical-align-center","slds-gutters_direct-xxx-small"],["label","LBL_PAGE",1,"slds-col"],[1,"slds-col"],["label","LBL_OF",1,"slds-col"],["icon","chevronright"],["icon","jump_to_right"],["href","javascript:void(0);",3,"click"],["label","LBL_VIEWALL"]],template:function(e,t){1&e&&(i.j41(0,"footer",0)(1,"div",1)(2,"div",2),i.DNE(3,m,16,6,"div",3),i.k0s(),i.j41(4,"div",4)(5,"div",5),i.DNE(6,h,2,0,"a",6),i.k0s(),i.j41(7,"div",7)(8,"button",8),i.bIt("click",(function(){return t.reload()})),i.nrm(9,"system-button-icon",9),i.k0s()()()()()),2&e&&(i.R7$(3),i.Y8G("ngIf",t.relatedmodels.count>t.relatedmodels.loaditems&&t.canViewAll),i.R7$(3),i.Y8G("ngIf",t.canViewAll),i.R7$(2),i.Y8G("disabled",t.paginating||t.relatedmodels.isloading))},dependencies:[d.bT,c.t,u.W],encapsulation:2})}return ObjectRelatedCardFooter})()},14800:(e,t,s)=>{"use strict";s.d(t,{A:()=>k});var i=s(49969),n=s(54438),l=s(69904),o=s(91107),a=s(35911),r=s(83935),d=s(60177),c=s(84341),u=s(25863),m=s(68823),h=s(18521),g=s(24834),p=s(44261);function f(e,t){if(1&e&&(n.j41(0,"span",13),n.EFF(1),n.k0s()),2&e){const e=n.XpG();n.R7$(),n.SpI("(",e.relatedmodels.count,")")}}function b(e,t){if(1&e){const e=n.RV6();n.j41(0,"system-utility-icon",14),n.bIt("click",(function(t){n.eBV(e);const s=n.XpG();return n.Njj(s.toggleOpen(t))})),n.k0s()}if(2&e){const e=n.XpG();n.Y8G("@animateicon",e.isopen?"open":"closed")}}function y(e,t){if(1&e&&n.nrm(0,"object-action-container",15),2&e){const e=n.XpG();n.Y8G("actionset",e.actionset)}}function v(e,t){if(1&e){const e=n.RV6();n.j41(0,"div",8)(1,"button",16),n.bIt("click",(function(){n.eBV(e);const t=n.XpG();return n.Njj(t.reload())})),n.nrm(2,"system-button-icon",17),n.k0s()()}}const _=["*"];let k=(()=>{class ObjectRelatedCardHeader{constructor(e,t,s,i){this.language=e,this.relatedmodels=t,this.model=s,this.metadata=i,this.componentconfig={},this.isopen=!0,this.disabled=!0}ngOnInit(){this.componentconfig.collapsed&&setTimeout((()=>this.isopen=!this.componentconfig.collapsed)),this.componentconfig.displaysearch&&(this.disabled=!1)}get panelTitle(){return this.componentconfig.title?this.language.getLabel(this.componentconfig.title):this.relatedmodels._linkName&&this.metadata.fieldDefs[this.relatedmodels.module][this.relatedmodels._linkName]&&this.metadata.fieldDefs[this.relatedmodels.module][this.relatedmodels._linkName].vname?this.language.getLabel(this.metadata.fieldDefs[this.relatedmodels.module][this.relatedmodels._linkName].vname):this.language.getModuleName(this.module)}get actionset(){return this.componentconfig.actionset}get module(){return this.componentconfig.object}toggleOpen(e){e.stopPropagation(),this.isopen=!this.isopen}reload(){this.relatedmodels.getData()}get isEditable(){let e=""!=this.relatedmodels.linkName?this.relatedmodels.linkName:this.relatedmodels.relatedModule?.toLowerCase(),t=this.model.getFieldAccess(e);return!t||t>2}set searchTerm(e){e!=this.relatedmodels.searchTerm&&(this.relatedmodels.searchTerm=e,this.reloadList())}get searchTerm(){return this.relatedmodels.searchTerm}clearSearchTerm(){this.searchTerm=""}reloadList(){this.relatedmodels.offset=0,this.relatedmodels.getData()}static#e=this.ɵfac=function(e){return new(e||ObjectRelatedCardHeader)(n.rXU(l.B),n.rXU(o.K),n.rXU(a.g),n.rXU(r.yu))};static#t=this.ɵcmp=n.VBU({type:ObjectRelatedCardHeader,selectors:[["object-related-card-header"]],inputs:{componentconfig:"componentconfig"},ngContentSelectors:_,decls:16,vars:11,consts:[[1,"slds-card__header","slds-grid","slds-grid--vertical-align-center"],[1,"slds-media","slds-media--center","slds-has-flexi-truncate"],[3,"module","size"],[1,"slds-media__body","slds-truncate","slds-grid","slds-grid--vertical-align-center"],["href","javascript:void(0);",1,"slds-text-link--reset"],[1,"slds-text-heading--small"],["class","slds-p-left--xx-small",4,"ngIf"],["class","slds-m-horizontal--xx-small","icon","up","size","x-small",3,"click",4,"ngIf"],[1,"slds-m-left--x-small"],["ngContent",""],[1,"slds-grow",3,"ngModel","placeholder","ngModelChange","onSearchTermClear","onEnterPress"],["class","slds-m-left--x-small",3,"actionset",4,"ngIf"],["class","slds-m-left--x-small",4,"ngIf"],[1,"slds-p-left--xx-small"],["icon","up","size","x-small",1,"slds-m-horizontal--xx-small",3,"click"],[1,"slds-m-left--x-small",3,"actionset"],[1,"slds-button","slds-button_icon","x-slds-m-right--medium",3,"click"],["icon","refresh"]],template:function(e,t){1&e&&(n.NAR(),n.j41(0,"div",0)(1,"header",1),n.nrm(2,"system-icon",2),n.j41(3,"div",3)(4,"h2")(5,"a",4)(6,"span",5),n.EFF(7),n.DNE(8,f,2,1,"span",6),n.k0s()()(),n.DNE(9,b,1,1,"system-utility-icon",7),n.k0s()(),n.j41(10,"div",8,9),n.SdG(12),n.j41(13,"system-input-search-term",10),n.mxI("ngModelChange",(function(e){return n.DH7(t.searchTerm,e)||(t.searchTerm=e),e})),n.bIt("onSearchTermClear",(function(){return t.clearSearchTerm()}))("onEnterPress",(function(){return t.reloadList()})),n.k0s()(),n.DNE(14,y,1,1,"object-action-container",11)(15,v,3,0,"div",12),n.k0s()),2&e&&(n.R7$(2),n.Y8G("module",t.module)("size","small"),n.R7$(5),n.SpI(" ",t.panelTitle,""),n.R7$(),n.Y8G("ngIf",!t.relatedmodels.isloading),n.R7$(),n.Y8G("ngIf",t.relatedmodels.count>0),n.R7$(4),n.AVh("slds-hide",t.disabled),n.R50("ngModel",t.searchTerm),n.Y8G("placeholder",t.language.getModuleCombinedLabel("LBL_SEARCH",t.relatedmodels.relatedModule)),n.R7$(),n.Y8G("ngIf",t.actionset&&t.isEditable),n.R7$(),n.Y8G("ngIf",!t.relatedmodels.isloading&&0===t.relatedmodels.count))},dependencies:[d.bT,c.BC,c.vS,u.t,m.J,h.B,g.w,p.l],encapsulation:2,data:{animation:[(0,i.hZ)("animateicon",[(0,i.wk)("open",(0,i.iF)({transform:"scale(1, 1)"})),(0,i.wk)("closed",(0,i.iF)({transform:"scale(1, -1)"})),(0,i.kY)("open => closed",[(0,i.i0)(".5s")]),(0,i.kY)("closed => open",[(0,i.i0)(".5s")])])]}})}return ObjectRelatedCardHeader})()},6179:(e,t,s)=>{"use strict";s.d(t,{F:()=>g});var i=s(91107),n=s(18359),l=s(54438),o=s(69904),a=s(83935),r=s(35911),d=s(60177),c=s(13269),u=s(91879);function m(e,t){if(1&e&&(l.j41(0,"div",2),l.nrm(1,"object-relatedlist-table",3),l.k0s()),2&e){const e=l.XpG();l.R7$(),l.Y8G("listfields",e.listfields)("editable",e.editable)("editcomponentset",e.editcomponentset)("hideActions",e.hideactions)}}function h(e,t){1&e&&l.nrm(0,"system-illustration-no-access")}let g=(()=>{class ObjectRelatedList{constructor(e,t,s,i,l){this.language=e,this.metadata=t,this.relatedmodels=s,this.model=i,this.cdref=l,this.componentconfig={},this.listfields=[],this.editcomponentset="",this.hideactions=!1,this.loadsubscription=new n.yU,this.loaded=!1}get aclAccess(){let e=""!=this.relatedmodels.linkName?this.relatedmodels.linkName:this.relatedmodels.relatedModule?.toLowerCase();return(this.metadata.checkModuleAcl(this.relatedmodels.relatedModule,"listrelated")||this.metadata.checkModuleAcl(this.relatedmodels.relatedModule,"list"))&&this.model.checkAccess("detail")&&this.model.checkFieldAccess(e)}ngOnInit(){this.loadConfig(),this.initializeRelatedModelService(),this.loadsubscription=this.model.data$.subscribe((e=>{this.loadRelated()}))}loadConfig(){let e=this.componentconfig.fieldset;this.listfields=this.metadata.getFieldSetFields(e),this.componentconfig.editcomponentset&&(this.editcomponentset=this.componentconfig.editcomponentset),this.hideactions=!!this.componentconfig.hideactions}initializeRelatedModelService(){this.relatedmodels.module=this.model.module,this.relatedmodels.id=this.model.id,this.relatedmodels.model=this.model,this.relatedmodels.relatedModule=this.componentconfig.object,this.componentconfig.linkEndPoint?this.relatedmodels.linkEndPoint=this.componentconfig.linkEndPoint:this.componentconfig.link&&(this.relatedmodels.linkName=this.componentconfig.link),this.componentconfig.sequencefield?this.relatedmodels.sequencefield=this.componentconfig.sequencefield:this.relatedmodels._linkName&&this.model.fields[this.relatedmodels._linkName]&&this.model.fields[this.relatedmodels._linkName].sequence_field&&(this.relatedmodels.sequencefield=this.model.fields[this.relatedmodels._linkName].sequence_field),this.componentconfig.sortfield&&(this.relatedmodels.sort.sortfield=this.componentconfig.sortfield,this.relatedmodels.sort.sortdirection=this.componentconfig.sortdirection?this.componentconfig.sortdirection:"ASC"),this.componentconfig.items&&(this.relatedmodels.loaditems=this.componentconfig.items),this.componentconfig.modulefilter&&(this.relatedmodels.modulefilter=this.componentconfig.modulefilter),this.relatedmodels.saveToLinkOnly=!!this.componentconfig.saveToLinkOnly}checkModelState(){return!(this.componentconfig.requiredmodelstate&&(_.isEmpty(this.model.data)||!this.model.checkModelState(this.componentconfig.requiredmodelstate)))}loadRelated(){this.loaded||!this.aclAccess||this.componentconfig.requiredmodelstate&&!this.checkModelState()||(this.loaded=!0,this.loadsubscription.unsubscribe(),this.relatedmodels.getData())}get editable(){try{return this.componentconfig.editable&&this.model.checkAccess("edit")}catch(e){return!1}}addSelectedItems(e){this.relatedmodels.addItems(e)}get listitemactionset(){return this.componentconfig&&this.componentconfig.listitemactionset?this.componentconfig.listitemactionset:""}static#e=this.ɵfac=function(e){return new(e||ObjectRelatedList)(l.rXU(o.B),l.rXU(a.yu),l.rXU(i.K),l.rXU(r.g),l.rXU(l.gRc))};static#t=this.ɵcmp=l.VBU({type:ObjectRelatedList,selectors:[["object-related-list"]],inputs:{componentconfig:"componentconfig"},features:[l.Jv_([i.K])],decls:3,vars:2,consts:[["class","slds-scrollable",4,"ngIf","ngIfElse"],["noaccess",""],[1,"slds-scrollable"],[3,"listfields","editable","editcomponentset","hideActions"]],template:function(e,t){if(1&e&&l.DNE(0,m,2,4,"div",0)(1,h,1,0,"ng-template",null,1,l.C5r),2&e){const e=l.sdS(2);l.Y8G("ngIf",t.aclAccess)("ngIfElse",e)}},dependencies:[d.bT,c.r,u.r],encapsulation:2})}return ObjectRelatedList})()},52872:(e,t,s)=>{"use strict";s.d(t,{W:()=>k});var i=s(35911),n=s(41731),l=s(54438),o=s(83935),a=s(4921),r=s(91107),d=s(57363),c=s(69904),u=s(71692),m=s(50531),h=s(60177),g=s(15091),p=s(18521),f=s(23855);const b=["object-related-list-item",""];function y(e,t){if(1&e&&(l.j41(0,"td",7),l.nrm(1,"field-container",8),l.k0s()),2&e){const e=t.$implicit,s=l.XpG(2);l.BMQ("data-label",s.language.getFieldDisplayName(s.model.module,e.field)),l.R7$(),l.Y8G("field",e.field)("fieldconfig",e.fieldconfig)("fielddisplayclass","slds-truncate")}}function v(e,t){if(1&e&&(l.j41(0,"td",9),l.nrm(1,"object-action-menu",10),l.k0s()),2&e){const e=l.XpG(2);l.R7$(),l.Y8G("buttonsize","x-small")("actionset",e.actionset)}}function _(e,t){if(1&e&&(l.qex(0),l.DNE(1,y,2,4,"td",5)(2,v,2,2,"td",6),l.bVm()),2&e){const e=l.XpG();l.R7$(),l.Y8G("ngForOf",e.listfields),l.R7$(),l.Y8G("ngIf",!e.hideActions)}}let k=(()=>{class ObjectRelatedListItem{constructor(e,t,s,i,n,l,o,a,r){this.metadata=e,this.footer=t,this.model=s,this.relatedmodels=i,this.view=n,this.router=l,this.language=o,this.layout=a,this.modalservice=r,this.listfields=[],this.listitem={},this.module="",this.editable=!1,this.editcomponentset="",this.hideActions=!1,this.customEditActions=[],this.customActions=[],this.expanded=!1,this.componentconfig={}}ngOnInit(){this.view.displayLabels=!1,this.view.isEditable=this.editable,this.model.module=this.module,this.model.id=this.listitem.id,this.model.setData(this.listitem),this.componentconfig=this.metadata.getComponentConfig("ObjectRelatedListItem",this.model.module)}get actionset(){return this.listitemactionset?this.listitemactionset:this.componentconfig.actionset}navigateDetail(){this.router.navigate(["/module/"+this.model.module+"/"+this.model.id])}handleAction(e){switch(e){case"canceledit":this.model.cancelEdit(),this.view.setViewMode();break;case"edit":this.metadata.addComponentDirect("ObjectEditModalWReference",this.footer.footercontainer).subscribe((e=>{e.instance.model.module=this.module,e.instance.model.id=this.model.id,e.instance.model.setData(this.model.data,!1),this.editcomponentset&&""!=this.editcomponentset&&(e.instance.componentSet=this.editcomponentset),this.model.startEdit(),e.instance.modalAction$.subscribe((t=>{!1===t?(e.destroy(),this.model.cancelEdit()):(this.relatedmodels.setItem(this.model.data),this.model.endEdit(),e.destroy())}))}));break;case"remove":this.modalservice.confirm(this.language.getLabel("QST_REMOVE_ENTRY"),this.language.getLabel("QST_REMOVE_ENTRY",null,"short")).subscribe((e=>{e&&this.relatedmodels.deleteItem(this.model.id)}));break;case"saverelated":if(this.model.validate()){let e=this.model.getDirtyFields();e.date_modified=this.model.getField("date_modified"),e.id=this.model.id,this.relatedmodels.setItem(e),this.model.endEdit(),this.view.setViewMode()}}}toggleexpanded(e){e.stopPropagation(),this.expanded=!this.expanded}get isexpanded(){return"small"!=this.layout.screenwidth||this.expanded}get expandicon(){return this.expanded?"chevronup":"chevrondown"}static#e=this.ɵfac=function(e){return new(e||ObjectRelatedListItem)(l.rXU(o.yu),l.rXU(a.q),l.rXU(i.g),l.rXU(r.K),l.rXU(n.U),l.rXU(d.Ix),l.rXU(c.B),l.rXU(u.Z),l.rXU(m.y))};static#t=this.ɵcmp=l.VBU({type:ObjectRelatedListItem,selectors:[["","object-related-list-item",""]],inputs:{listfields:"listfields",listitem:"listitem",module:"module",editable:"editable",editcomponentset:"editcomponentset",listitemactionset:"listitemactionset",hideActions:"hideActions"},features:[l.Jv_([i.g,n.U])],attrs:b,decls:6,vars:3,consts:[[1,"slds-hide--medium"],[1,"slds-grid","slds-grid--vertical-align-center","slds-p-around--xx-small"],[1,"slds-text-align--left","slds-truncate","slds-grow",3,"click"],["size","xx-small",3,"icon","click"],[4,"ngIf"],["scope","row",4,"ngFor","ngForOf"],["role","gridcell","class","slds-align--absolute-center",4,"ngIf"],["scope","row"],[3,"field","fieldconfig","fielddisplayclass"],["role","gridcell",1,"slds-align--absolute-center"],[3,"buttonsize","actionset"]],template:function(e,t){1&e&&(l.j41(0,"td",0)(1,"div",1)(2,"div",2),l.bIt("click",(function(){return t.navigateDetail()})),l.EFF(3),l.k0s(),l.j41(4,"system-utility-icon",3),l.bIt("click",(function(e){return t.toggleexpanded(e)})),l.k0s()()(),l.DNE(5,_,3,2,"ng-container",4)),2&e&&(l.R7$(3),l.JRh(t.model.data.summary_text),l.R7$(),l.Y8G("icon",t.expandicon),l.R7$(),l.Y8G("ngIf",t.isexpanded))},dependencies:[h.Sq,h.bT,g.y,p.B,f.P],encapsulation:2})}return ObjectRelatedListItem})()},68159:(e,t,s)=>{"use strict";s.d(t,{p:()=>f});var i=s(35911),n=s(41731),l=s(54438),o=s(57363),a=s(69904),r=s(83935),d=s(60177),c=s(18039),u=s(15091),m=s(18521),h=s(23855);const g=["object-related-list-sequenced-item",""];function p(e,t){if(1&e&&(l.j41(0,"td",0),l.nrm(1,"field-container",5),l.k0s()),2&e){const e=t.$implicit;l.R7$(),l.Y8G("field",e.field)("fieldconfig",e.fieldconfig)("fielddisplayclass","slds-truncate")}}let f=(()=>{class ObjectRelatedListSequencedItem{constructor(e,t,s,i,n){this.model=e,this.view=t,this.router=s,this.language=i,this.metadata=n,this.listfields=[],this.listitem={},this.module="",this.componentconfig={},this.view.isEditable=!1}get actionset(){return this.listItemActionset?this.listItemActionset:this.componentconfig.actionset}ngOnInit(){this.view.displayLabels=!1,this.model.module=this.module,this.model.id=this.listitem.id,this.model.setData(this.listitem),this.componentconfig=this.metadata.getComponentConfig("ObjectRelatedListSequencedItem",this.model.module)}navigateDetail(){this.router.navigate(["/module/"+this.model.module+"/"+this.model.id])}static#e=this.ɵfac=function(e){return new(e||ObjectRelatedListSequencedItem)(l.rXU(i.g),l.rXU(n.U),l.rXU(o.Ix),l.rXU(a.B),l.rXU(r.yu))};static#t=this.ɵcmp=l.VBU({type:ObjectRelatedListSequencedItem,selectors:[["","object-related-list-sequenced-item",""]],inputs:{listfields:"listfields",listitem:"listitem",module:"module",listItemActionset:"listItemActionset"},features:[l.Jv_([i.g,n.U])],attrs:g,decls:5,vars:5,consts:[["scope","row"],["cdkDragHandle","",2,"cursor","move",3,"icon","size"],["scope","row",4,"ngFor","ngForOf"],["role","gridcell","data-label","Actions",1,"slds-cell-shrink"],[3,"buttonsize","actionset"],[3,"field","fieldconfig","fielddisplayclass"]],template:function(e,t){1&e&&(l.j41(0,"td",0),l.nrm(1,"system-utility-icon",1),l.k0s(),l.DNE(2,p,2,3,"td",2),l.j41(3,"td",3),l.nrm(4,"object-action-menu",4),l.k0s()),2&e&&(l.R7$(),l.Y8G("icon","rows")("size","x-small"),l.R7$(),l.Y8G("ngForOf",t.listfields),l.R7$(2),l.Y8G("buttonsize","x-small")("actionset",t.actionset))},dependencies:[d.Sq,c.Fb,u.y,m.B,h.P],encapsulation:2})}return ObjectRelatedListSequencedItem})()},91879:(e,t,s)=>{"use strict";s.d(t,{r:()=>M});var i=s(54438),n=s(69904),l=s(83935),o=s(91107),a=s(35911),r=s(71692),d=s(49722),c=s(2),u=s(60177),m=s(18039),h=s(13269),g=s(45915),p=s(42205),f=s(18521),b=s(52872),y=s(68159);function v(e,t){1&e&&i.nrm(0,"th",8)}function _(e,t){if(1&e&&(i.j41(0,"th",10)(1,"span",11),i.nrm(2,"system-label-fieldname",12),i.k0s()()),2&e){const e=t.$implicit,s=i.XpG(3);i.Y8G("ngStyle",s.getColumnStyle(e)),i.R7$(2),i.Y8G("module",s.module)("field",e.field)("fieldconfig",e.fieldconfig)}}function k(e,t){if(1&e&&(i.qex(0),i.DNE(1,_,3,4,"th",9),i.bVm()),2&e){const e=i.XpG(2);i.R7$(),i.Y8G("ngForOf",e.listfields)}}function R(e,t){if(1&e&&i.nrm(0,"system-utility-icon",18),2&e){const e=i.XpG().$implicit,t=i.XpG(3);i.Y8G("icon",t.getSortIcon(e))("colorclass","sort"==t.getSortIcon(e)?"slds-icon-text-light":"slds-icon-text-default")}}function I(e,t){if(1&e){const e=i.RV6();i.j41(0,"th",14)(1,"a",15),i.bIt("click",(function(){const t=i.eBV(e).$implicit,s=i.XpG(3);return i.Njj(s.setSortField(t))})),i.j41(2,"span",16),i.nrm(3,"system-label-fieldname",12),i.k0s(),i.DNE(4,R,1,2,"system-utility-icon",17),i.k0s()()}if(2&e){const e=t.$implicit,s=i.XpG(3);i.Y8G("ngStyle",s.getColumnStyle(e)),i.R7$(3),i.Y8G("module",s.module)("field",e.field)("fieldconfig",e.fieldconfig),i.R7$(),i.Y8G("ngIf",s.isSortable(e))}}function x(e,t){if(1&e&&(i.qex(0),i.DNE(1,I,5,5,"th",13),i.bVm()),2&e){const e=i.XpG(2);i.R7$(),i.Y8G("ngForOf",e.listfields)}}function j(e,t){if(1&e&&i.nrm(0,"th",19),2&e){const e=i.XpG(2);i.Y8G("ngClass",e.getButtonColumnStyle())}}function G(e,t){if(1&e&&i.nrm(0,"tr",21),2&e){const e=t.$implicit,s=i.XpG(3);i.Y8G("module",s.module)("editable",s.editable)("editcomponentset",s.editcomponentset)("listfields",s.listfields)("listitem",e)("hideActions",s.hideActions)("listitemactionset",s.listitemactionset)}}function C(e,t){if(1&e&&(i.qex(0),i.j41(1,"tbody"),i.DNE(2,G,1,7,"tr",20),i.k0s(),i.bVm()),2&e){const e=i.XpG(2);i.R7$(2),i.Y8G("ngForOf",e.relatedmodels.items)}}function w(e,t){if(1&e){const e=i.RV6();i.j41(0,"tr",24),i.bIt("cdkDragStarted",(function(t){i.eBV(e);const s=i.XpG(3);return i.Njj(s.dragStarted(t))}))("cdkDragEnded",(function(t){i.eBV(e);const s=i.XpG(3);return i.Njj(s.dragEnded(t))})),i.k0s()}if(2&e){const e=t.$implicit,s=i.XpG(3);i.Y8G("module",s.module)("listfields",s.listfields)("listitem",e)("listItemActionset",s.listitemactionset)}}function S(e,t){if(1&e){const e=i.RV6();i.qex(0),i.j41(1,"tbody",22),i.bIt("cdkDropListDropped",(function(t){i.eBV(e);const s=i.XpG(2);return i.Njj(s.drop(t))})),i.DNE(2,w,1,4,"tr",23),i.k0s(),i.bVm()}if(2&e){const e=i.XpG(2);i.R7$(2),i.Y8G("ngForOf",e.relatedmodels.items)("ngForTrackBy",e.getIdOfRow)}}function E(e,t){if(1&e&&i.nrm(0,"tbody",25),2&e){const e=i.XpG(2);i.Y8G("columns",e.listfields.length)("select",e.isSequenced)("tools",!e.hideActions)}}const L=(e,t)=>({"slds-table--bordered":e,"slds-no-row-hover":t});function D(e,t){if(1&e&&(i.j41(0,"table",2)(1,"thead")(2,"tr",3),i.DNE(3,v,1,0,"th",4)(4,k,2,1,"ng-container",5)(5,x,2,1,"ng-container",5)(6,j,1,1,"th",6),i.k0s()(),i.DNE(7,C,3,1,"ng-container",5)(8,S,3,2,"ng-container",5)(9,E,1,3,"tbody",7),i.k0s()),2&e){const e=i.XpG();i.Y8G("ngClass",i.l_i(8,L,!e.isSmall,e.nowDragging)),i.R7$(3),i.Y8G("ngIf",e.isSequenced),i.R7$(),i.Y8G("ngIf",e.isSequenced),i.R7$(),i.Y8G("ngIf",!e.isSequenced),i.R7$(),i.Y8G("ngIf",!e.hideActions),i.R7$(),i.Y8G("ngIf",!e.isSequenced),i.R7$(),i.Y8G("ngIf",e.isSequenced),i.R7$(),i.Y8G("ngIf",e.isloading)}}function F(e,t){1&e&&i.nrm(0,"system-illustration-no-access")}let M=(()=>{class ObjectRelatedlistTable{constructor(e,t,s,i,n,l,o){this.language=e,this.metadata=t,this.relatedmodels=s,this.model=i,this.layout=n,this.backend=l,this.logger=o,this.listfields=[],this.editable=!1,this.editcomponentset="",this.sequencefield=null,this.hideActions=!1,this.duplicateTable=!1,this.noAccess=!1,this.nowDragging=!1,this.isSequenced=!1,this.singlebutton=!1}ngOnInit(){this.metadata.checkModuleAcl(this.relatedmodels.relatedModule,"listrelated")||this.metadata.checkModuleAcl(this.relatedmodels.relatedModule,"list")?(this.metadata.fieldDefs[this.model.module][this.relatedmodels._linkName]||this.relatedmodels.linkEndPoint||this.duplicateTable?!this.sequencefield&&this.metadata.fieldDefs[this.model.module][this.relatedmodels._linkName]?.sequence_field&&(this.sequencefield=this.metadata.fieldDefs[this.model.module][this.relatedmodels._linkName].sequence_field):this.logger.error('Missing link or wrong link name ("'+this.relatedmodels._linkName+'")!'),this.sequencefield&&(this.isSequenced=!0),this.getActionsetData()):this.noAccess=!0}get isloading(){return this.relatedmodels.isloading}get isSmall(){return"small"===this.layout.screenwidth}get module(){return this.relatedmodels.relatedModule}getColumnStyle(e){return e.fieldconfig?.widthdimension&&e.fieldconfig?.width?{width:e.fieldconfig?.width+e.fieldconfig.widthdimension}:{}}getButtonColumnStyle(){return this.singlebutton?"slds-size_1-of-6":"slds-size_1-of-12"}isSortable(e){return!this.relatedmodels.sortBySequencefield&&!0===e.fieldconfig.sortable}setSortField(e){this.relatedmodels.sortBySequencefield||this.isSortable(e)&&(this.relatedmodels.sortfield=e.fieldconfig&&e.fieldconfig.sortfield?e.fieldconfig.sortfield:e.field)}getSortIcon(e){return this.relatedmodels.sortfield==(e.fieldconfig&&e.fieldconfig.sortfield?e.fieldconfig.sortfield:e.field)?"ASC"===this.relatedmodels.sort.sortdirection?"arrowup":"arrowdown":"sort"}getIdOfRow(e,t){return t.id}drop(e){let t=this.relatedmodels.items.splice(e.previousIndex,1);this.relatedmodels.items.splice(e.currentIndex,0,t[0]);let s=[],i=0;for(let e of this.relatedmodels.items)e[this.sequencefield]=i,s.push({id:e.id,[this.sequencefield]:i}),i++;this.relatedmodels.updateItems(s)}dragStarted(e){this.nowDragging=!0,e.source.element.nativeElement.classList.add("slds-is-selected")}dragEnded(e){this.nowDragging=!1,e.source.element.nativeElement.classList.remove("slds-is-selected")}getActionsetData(){let e=this.metadata.getActionSetItems(this.listitemactionset);for(let t of e)(t.actionconfig.singlebutton||t.actionconfig.displayasicon)&&(this.singlebutton=!0)}static#e=this.ɵfac=function(e){return new(e||ObjectRelatedlistTable)(i.rXU(n.B),i.rXU(l.yu),i.rXU(o.K),i.rXU(a.g),i.rXU(r.Z),i.rXU(d.H),i.rXU(c.O))};static#t=this.ɵcmp=i.VBU({type:ObjectRelatedlistTable,selectors:[["object-relatedlist-table"]],inputs:{listfields:"listfields",editable:"editable",editcomponentset:"editcomponentset",sequencefield:"sequencefield",hideActions:"hideActions",listitemactionset:"listitemactionset",duplicateTable:"duplicateTable"},decls:3,vars:2,consts:[["class","slds-table slds-table--fixed-layout slds-table--header-fixed slds-max-medium-table_stacked-horizontal",3,"ngClass",4,"ngIf","ngIfElse"],["noaccess",""],[1,"slds-table","slds-table--fixed-layout","slds-table--header-fixed","slds-max-medium-table_stacked-horizontal",3,"ngClass"],[1,"slds-text-title--caps"],["class","slds-cell-shrink","scope","col",4,"ngIf"],[4,"ngIf"],["scope","col",3,"ngClass",4,"ngIf"],["system-table-stencils","",3,"columns","select","tools",4,"ngIf"],["scope","col",1,"slds-cell-shrink"],["class","slds-resizable","scope","col",3,"ngStyle",4,"ngFor","ngForOf"],["scope","col",1,"slds-resizable",3,"ngStyle"],[1,"slds-th__action","slds-truncate"],["length","short",3,"module","field","fieldconfig"],["class","slds-is-sortable slds-resizable","scope","col",3,"ngStyle",4,"ngFor","ngForOf"],["scope","col",1,"slds-is-sortable","slds-resizable",3,"ngStyle"],["href","javascript:void(0);",1,"slds-th__action","slds-text-link--reset",3,"click"],[1,"slds-truncate"],["size","xx-small",3,"icon","colorclass",4,"ngIf"],["size","xx-small",3,"icon","colorclass"],["scope","col",3,"ngClass"],["object-related-list-item","","class","slds-hint-parent",3,"module","editable","editcomponentset","listfields","listitem","hideActions","listitemactionset",4,"ngFor","ngForOf"],["object-related-list-item","",1,"slds-hint-parent",3,"module","editable","editcomponentset","listfields","listitem","hideActions","listitemactionset"],["cdkDropList","",1,"dragboundary",3,"cdkDropListDropped"],["object-related-list-sequenced-item","","cdkDrag","","cdkDragBoundary",".dragboundary","class","slds-hint-parent",3,"module","listfields","listitem","listItemActionset","cdkDragStarted","cdkDragEnded",4,"ngFor","ngForOf","ngForTrackBy"],["object-related-list-sequenced-item","","cdkDrag","","cdkDragBoundary",".dragboundary",1,"slds-hint-parent",3,"module","listfields","listitem","listItemActionset","cdkDragStarted","cdkDragEnded"],["system-table-stencils","",3,"columns","select","tools"]],template:function(e,t){if(1&e&&i.DNE(0,D,10,11,"table",0)(1,F,1,0,"ng-template",null,1,i.C5r),2&e){const e=i.sdS(2);i.Y8G("ngIf",!t.noAccess)("ngIfElse",e)}},dependencies:[u.YU,u.Sq,u.bT,u.B3,m.O7,m.T1,h.r,g.P,p.t,f.B,b.W,y.p],encapsulation:2})}return ObjectRelatedlistTable})()},74045:(e,t,s)=>{"use strict";s.d(t,{b:()=>k});var i=s(18359),n=s(54438),l=s(69904),o=s(83935),a=s(35911),r=s(18396),d=s(48849),c=s(60177),u=s(16435),m=s(1626),h=s(48717),g=s(18521),p=s(22465);function f(e,t){if(1&e){const e=n.RV6();n.j41(0,"system-utility-icon",6),n.bIt("click",(function(){n.eBV(e);const t=n.XpG();return n.Njj(t.toggleDatePicker())})),n.k0s()}}function b(e,t){if(1&e){const e=n.RV6();n.j41(0,"div",7)(1,"system-utility-icon",8),n.bIt("click",(function(){n.eBV(e);const t=n.XpG();return n.Njj(t.clearReminder())})),n.k0s(),n.j41(2,"system-display-datetime",9),n.bIt("click",(function(){n.eBV(e);const t=n.XpG();return n.Njj(t.toggleDatePicker())})),n.k0s()()}if(2&e){const e=n.XpG();n.R7$(2),n.Y8G("date",e.reminderDate)("displayTime",!1)}}function y(e,t){1&e&&n.nrm(0,"system-spinner",10)}function v(e,t){if(1&e){const e=n.RV6();n.j41(0,"system-input-date-picker",11),n.bIt("datePicked",(function(t){n.eBV(e);const s=n.XpG();return n.Njj(s.setReminder(t))})),n.k0s()}if(2&e){const e=n.XpG();n.Y8G("setDate",e.reminderDate)}}const _=e=>({"slds-is-open":e});let k=(()=>{class ObjectReminderIcon{constructor(e,t,s,n,l,o,a){this.language=e,this.metadata=t,this.model=s,this.renderer=n,this.elementRef=l,this.reminder=o,this.userpreferences=a,this.showDialog=!1,this.reminderDate=new moment,this.hasReminder=!1,this.processing=!1,this.subscriptions=new i.yU,this.subscriptions.add(this.reminder.changed$.subscribe((e=>{this.loadReminder()}))),this.loadReminder()}ngOnDestroy(){this.subscriptions.unsubscribe()}loadReminder(){let e=this.reminder.getReminder(this.model.module,this.model.id);!1!==e?(this.hasReminder=!0,this.reminderDate=new moment(e)):this.hasReminder=!1}toggleDatePicker(){this.showDialog=!this.showDialog,this.showDialog?this.clickListener=this.renderer.listen("document","click",(e=>this.onClick(e))):this.clickListener&&this.clickListener()}onClick(e){this.elementRef.nativeElement.contains(e.target)||(this.showDialog=!1)}clearReminder(){this.processing=!0,this.reminder.deleteReminder(this.model.module,this.model.id).subscribe({next:()=>{this.hasReminder=!1,this.reminderDate=new moment,this.processing=!1},error:()=>{this.processing=!1}})}setReminder(e){this.showDialog=!1,this.processing=!0;let t=new moment(e);this.reminder.setReminder(this.model,t).subscribe({next:()=>{this.hasReminder=!0,this.reminderDate=t,this.processing=!1},error:()=>{this.processing=!1}})}static#e=this.ɵfac=function(e){return new(e||ObjectReminderIcon)(n.rXU(l.B),n.rXU(o.yu),n.rXU(a.g),n.rXU(n.sFG),n.rXU(n.aKT),n.rXU(r.z),n.rXU(d.S))};static#t=this.ɵcmp=n.VBU({type:ObjectReminderIcon,selectors:[["object-reminder-icon"]],decls:6,vars:7,consts:[[1,"slds-form-element","slds-dropdown-trigger","slds-dropdown-trigger_click",3,"ngClass"],["icon","reminder","size","xx-small","system-title","LBL_REMINDER_SET",3,"click",4,"ngIf"],["class","slds-grid slds-grid--vertical-align-center","system-title","LBL_REMINDER_CLEAR",4,"ngIf"],["size","14",4,"ngIf"],["role","dialog",1,"slds-datepicker","slds-dropdown","slds-dropdown_left"],[3,"setDate","datePicked",4,"ngIf"],["icon","reminder","size","xx-small","system-title","LBL_REMINDER_SET",3,"click"],["system-title","LBL_REMINDER_CLEAR",1,"slds-grid","slds-grid--vertical-align-center"],["icon","clear","size","xx-small",3,"click"],[1,"slds-p-left--xx-small","slds-text-link--reset",3,"date","displayTime","click"],["size","14"],[3,"setDate","datePicked"]],template:function(e,t){1&e&&(n.j41(0,"div",0),n.DNE(1,f,1,0,"system-utility-icon",1)(2,b,3,2,"div",2)(3,y,1,0,"system-spinner",3),n.j41(4,"div",4),n.DNE(5,v,1,1,"system-input-date-picker",5),n.k0s()()),2&e&&(n.Y8G("ngClass",n.eq3(5,_,t.showDialog)),n.R7$(),n.Y8G("ngIf",!t.hasReminder&&!t.processing),n.R7$(),n.Y8G("ngIf",t.hasReminder&&!t.processing),n.R7$(),n.Y8G("ngIf",t.processing),n.R7$(2),n.Y8G("ngIf",t.showDialog))},dependencies:[c.YU,c.bT,u.f,m.Q,h.P,g.B,p.L],encapsulation:2})}return ObjectReminderIcon})()},1036:(e,t,s)=>{"use strict";s.d(t,{i:()=>p});var i=s(54438),n=s(49722),l=s(35911),o=s(50531),a=s(69904),r=s(41081),d=s(53584),c=s(60177),u=s(48717),m=s(18521);function h(e,t){if(1&e){const e=i.RV6();i.j41(0,"system-utility-icon",2),i.bIt("click",(function(){i.eBV(e);const t=i.XpG();return i.Njj(t.manageActiveState())})),i.k0s()}if(2&e){const e=i.XpG();i.Y8G("icon",e.manageIcon)("colorclass",e.filterColorClass)("title",e.language.getLabel("LBL_DEACTIVATE"))}}function g(e,t){1&e&&i.nrm(0,"system-spinner",3)}let p=(()=>{class ObjectSetInactiveIcon{constructor(e,t,s,i,n,l){this.backend=e,this.model=t,this.modal=s,this.language=i,this.toast=n,this.configuration=l,this.inProcess=!1}get manageIcon(){return"1"==this.model.data.is_inactive?"toggle_off":"toggle_on"}get filterColorClass(){return"1"==this.model.data.is_inactive?"slds-icon-text-error":"slds-icon-text-default"}manageActiveState(){this.model.isEditing||(this.inProcess=!0,"1"!=this.model.data.is_inactive?this.modal.confirm("MSG_DEACTIVATE_RECORD","MSG_DEACTIVATE_RECORD","error").subscribe((e=>{e?(this.backend.putRequest(`module/${this.model.module}/${this.model.id}/inactive`,null,{isInactive:"1"}).subscribe({next:()=>{this.model.data.is_inactive="1"},error:e=>{this.toast.sendToast(e.error.error.message,"error")}}),this.inProcess=!1,"EmailTemplates"!=this.model.module&&"OutputTemplates"!=this.model.module||this.configuration.setData(this.model.module,void 0)):this.inProcess=!1})):this.modal.confirm("MSG_REACTIVATE_RECORD","MSG_REACTIVATE_RECORD","warning").subscribe((e=>{e?(this.backend.putRequest(`module/${this.model.module}/${this.model.id}/inactive`,null,{isInactive:"0"}).subscribe({next:()=>{this.model.data.is_inactive="0"},error:e=>{this.toast.sendToast(e.error.error.message,"error")}}),this.inProcess=!1,"EmailTemplates"!=this.model.module&&"OutputTemplates"!=this.model.module||this.configuration.setData(this.model.module,void 0)):this.inProcess=!1})))}static#e=this.ɵfac=function(e){return new(e||ObjectSetInactiveIcon)(i.rXU(n.H),i.rXU(l.g),i.rXU(o.y),i.rXU(a.B),i.rXU(r.o),i.rXU(d.i))};static#t=this.ɵcmp=i.VBU({type:ObjectSetInactiveIcon,selectors:[["object-set-inactive-icon"]],decls:2,vars:2,consts:[["size","xx-small",3,"icon","colorclass","title","click",4,"ngIf"],["size","14",4,"ngIf"],["size","xx-small",3,"icon","colorclass","title","click"],["size","14"]],template:function(e,t){1&e&&i.DNE(0,h,1,3,"system-utility-icon",0)(1,g,1,0,"system-spinner",1),2&e&&(i.Y8G("ngIf",!t.inProcess),i.R7$(),i.Y8G("ngIf",t.inProcess))},dependencies:[c.bT,u.P,m.B],encapsulation:2})}return ObjectSetInactiveIcon})()},99064:(e,t,s)=>{"use strict";s.d(t,{Y:()=>p});var i=s(61795),n=s(54438),l=s(69904),o=s(83935),a=s(35911),r=s(50531),d=s(57363),c=s(60177),u=s(25863),m=s(80256);function h(e,t){if(1&e){const e=n.RV6();n.j41(0,"li",10),n.bIt("click",(function(){const t=n.eBV(e).$implicit,s=n.XpG(2);return n.Njj(s.propagateclick(t.id))})),n.j41(1,"a",11),n.nrm(2,"object-status-network-button-item",3),n.k0s()()}if(2&e){const e=t.$implicit;n.R7$(2),n.Y8G("item",e)}}function g(e,t){if(1&e){const e=n.RV6();n.j41(0,"div",1)(1,"button",2),n.bIt("click",(function(){n.eBV(e);const t=n.XpG();return n.Njj(t.propagateclick(t.primaryItem.id))})),n.nrm(2,"object-status-network-button-item",3),n.k0s(),n.j41(3,"div",4)(4,"button",5),n.nrm(5,"system-button-icon",6),n.k0s(),n.j41(6,"div",7)(7,"ul",8),n.DNE(8,h,3,1,"li",9),n.k0s()()()()}if(2&e){const e=n.XpG();n.R7$(),n.Y8G("disabled",e.isDisabled),n.R7$(),n.Y8G("item",e.primaryItem),n.R7$(2),n.Y8G("disabled",e.isDisabled||0==e.secondaryItems.length),n.R7$(4),n.Y8G("ngForOf",e.secondaryItems)}}let p=(()=>{class ObjectStatusNetworkButton{constructor(e,t,s,i,n,l,o){this.language=e,this.metadata=t,this.model=s,this.modal=i,this.router=n,this.renderer=l,this.elementRef=o,this.statusField="",this.statusNetwork=[]}get isDisabled(){return this.model.isEditing||!this.model.checkAccess("edit")}get isManaged(){return""!=this.statusField&&!1!==this.primaryItem&&!this.isDisabled}get primaryItem(){for(let e of this.statusNetwork)if(e.status_from==this.model.getField(this.statusField)&&(!e.required_model_state||this.model.checkModelState(e.required_model_state)))return e;return!1}get secondaryItems(){let e=[],t=!1;for(let s of this.statusNetwork)s.status_from!=this.model.getField(this.statusField)||s.required_model_state&&!this.model.checkModelState(s.required_model_state)||(t&&e.push(s),t||(t=!0));return e}ngOnInit(){let e=this.metadata.checkStatusManaged(this.model.module);0!=e&&(this.statusField=e.statusField,this.statusNetwork=e.statusNetwork)}propagateclick(e){this.buttonitemlist.some((t=>{if(t.id==e)return t.setStatus(this.statusField),!0}))}static#e=this.ɵfac=function(e){return new(e||ObjectStatusNetworkButton)(n.rXU(l.B),n.rXU(o.yu),n.rXU(a.g),n.rXU(r.y),n.rXU(d.Ix),n.rXU(n.sFG),n.rXU(n.aKT))};static#t=this.ɵcmp=n.VBU({type:ObjectStatusNetworkButton,selectors:[["object-status-network-button"]],viewQuery:function(e,t){if(1&e&&n.GBs(i.F,5),2&e){let e;n.mGM(e=n.lsd())&&(t.buttonitemlist=e)}},decls:1,vars:1,consts:[["class","slds-button-group slds-m-horizontal--xxx-small",4,"ngIf"],[1,"slds-button-group","slds-m-horizontal--xxx-small"],[1,"slds-button","slds-button_neutral",3,"disabled","click"],[3,"item"],["system-dropdown-trigger","",1,"slds-dropdown-trigger","slds-dropdown-trigger_click","slds-button_last"],[1,"slds-button","slds-button_icon","slds-button_icon-border-filled",3,"disabled"],["icon","down"],[1,"slds-dropdown","slds-dropdown_right","slds-dropdown_actions",2,"min-width","min-content"],["role","menu",1,"slds-dropdown__list"],["class","slds-dropdown__item","role","presentation",3,"click",4,"ngFor","ngForOf"],["role","presentation",1,"slds-dropdown__item",3,"click"],["href","javascript:void(0);","role","menuitem",1,"slds-truncate"]],template:function(e,t){1&e&&n.DNE(0,g,9,4,"div",0),2&e&&n.Y8G("ngIf",t.isManaged)},dependencies:[c.Sq,c.bT,u.t,m.q,i.F],encapsulation:2})}return ObjectStatusNetworkButton})()},61795:(e,t,s)=>{"use strict";s.d(t,{F:()=>m});var i=s(54438),n=s(69904),l=s(83935),o=s(50531),a=s(35911),r=s(41081),d=s(60177);const c=["componentcontainer"];function u(e,t){if(1&e&&(i.j41(0,"span",2),i.EFF(1),i.k0s()),2&e){const e=i.XpG();i.R7$(),i.JRh(e.language.getLabel(e.item.action_label))}}let m=(()=>{class ObjectStatusNetworkButtonItem{constructor(e,t,s,i,n,l){this.language=e,this.metadata=t,this.modal=s,this.model=i,this.toast=n,this.injector=l,this.item={},this.initialized=!1}get id(){return this.item.id}get hasComponent(){return this.item.status_component&&""!=this.item.status_component}ngAfterViewInit(){this.hasComponent&&this.componentcontainer&&this.metadata.addComponent(this.item.status_component,this.componentcontainer,this.injector).subscribe((e=>{this.actioncomponent=e.instance,e.instance.item=this.item})),this.initialized=!0}ngOnChanges(){this.actioncomponent&&(this.actioncomponent.self.destroy(),this.actioncomponent=null),this.initialized&&this.hasComponent&&this.metadata.addComponent(this.item.status_component,this.componentcontainer,this.injector).subscribe((e=>{this.actioncomponent=e.instance,e.instance.item=this.item}))}setStatus(e){this.item.prompt_label?this.modal.confirm(this.language.getLabel(this.item.prompt_label,"","long"),this.language.getLabel(this.item.prompt_label,"")).subscribe((t=>{t&&this.executeChange(e)})):this.executeChange(e)}executeChange(e){if(this.actioncomponent&&this.actioncomponent.execute)this.actioncomponent.execute();else if(this.model.startEdit(!0,!1),this.model.setField(e,this.item.status_to),this.model.validate()){let e=this.modal.await("LBL_SAVING");this.model.save().subscribe({next:()=>{e.emit(!0)},error:()=>{e.emit(!0),this.toast.sendToast("MSG_ERROR_SETTING_STATUS","error")}})}else this.model.edit()}static#e=this.ɵfac=function(e){return new(e||ObjectStatusNetworkButtonItem)(i.rXU(n.B),i.rXU(l.yu),i.rXU(o.y),i.rXU(a.g),i.rXU(r.o),i.rXU(i.zZn))};static#t=this.ɵcmp=i.VBU({type:ObjectStatusNetworkButtonItem,selectors:[["object-status-network-button-item"]],viewQuery:function(e,t){if(1&e&&i.GBs(c,7,i.c1b),2&e){let e;i.mGM(e=i.lsd())&&(t.componentcontainer=e.first)}},inputs:{item:"item"},features:[i.OA$],decls:3,vars:1,consts:[["class","slds-text-color_default",4,"ngIf"],["componentcontainer",""],[1,"slds-text-color_default"]],template:function(e,t){1&e&&(i.DNE(0,u,2,1,"span",0),i.nrm(1,"div",null,1)),2&e&&i.Y8G("ngIf",!t.hasComponent)},dependencies:[d.bT],encapsulation:2})}return ObjectStatusNetworkButtonItem})()},48842:(e,t,s)=>{"use strict";s.d(t,{I:()=>h});var i=s(54438),n=s(73455),l=s(83935),o=s(35911),a=s(60177),r=s(48717),d=s(18521),c=s(22465);function u(e,t){if(1&e){const e=i.RV6();i.j41(0,"system-utility-icon",2),i.bIt("click",(function(){i.eBV(e);const t=i.XpG();return i.Njj(t.toggleSubscribe())})),i.k0s()}if(2&e){const e=i.XpG();i.Y8G("system-title",e.subscribed?"LBL_UNSUBSCRIBE_FROM_OBJECT":"LBL_SUBSCRIBE_TO_OBJECT")("icon",e.subscribed?"alert":"notification_off")("colorclass",e.subscribed?"slds-icon-text-success":"slds-icon-text-light")}}function m(e,t){1&e&&i.nrm(0,"system-spinner",3)}let h=(()=>{class ObjectSubscriptionIcon{constructor(e,t,s){this.subscriptionService=e,this.metadata=t,this.model=s,this.inProcess=!1}get subscribed(){return this.subscriptionService.hasSubscription(this.model.id)}toggleSubscribe(){this.inProcess=!0,this.subscriptionService.hasSubscription(this.model.id)?this.subscriptionService.unsubscribeBean(this.model.id,this.model.module).subscribe((e=>this.inProcess=!1),(e=>this.inProcess=!1)):this.subscriptionService.subscribeBean(this.model).subscribe((e=>this.inProcess=!1),(e=>this.inProcess=!1))}static#e=this.ɵfac=function(e){return new(e||ObjectSubscriptionIcon)(i.rXU(n.g),i.rXU(l.yu),i.rXU(o.g))};static#t=this.ɵcmp=i.VBU({type:ObjectSubscriptionIcon,selectors:[["object-subscription-icon"]],decls:2,vars:2,consts:[["size","xx-small",3,"system-title","icon","colorclass","click",4,"ngIf"],["size","14",4,"ngIf"],["size","xx-small",3,"system-title","icon","colorclass","click"],["size","14"]],template:function(e,t){1&e&&i.DNE(0,u,1,3,"system-utility-icon",0)(1,m,1,0,"system-spinner",1),2&e&&(i.Y8G("ngIf",!t.inProcess),i.R7$(),i.Y8G("ngIf",t.inProcess))},dependencies:[a.bT,r.P,d.B,c.L],encapsulation:2})}return ObjectSubscriptionIcon})()},58379:(e,t,s)=>{"use strict";s.d(t,{t:()=>p});var i=s(18359),n=s(54438),l=s(83935),o=s(66031),a=s(57363),r=s(49722),d=s(40553),c=s(35911),u=s(60177),m=s(68823);function h(e,t){if(1&e&&(n.j41(0,"span",5),n.EFF(1),n.k0s()),2&e){const e=n.XpG(2);n.R7$(),n.SpI(" ",e.openWorkflowsCount," ")}}function g(e,t){if(1&e){const e=n.RV6();n.j41(0,"div",1)(1,"button",2),n.bIt("click",(function(){n.eBV(e);const t=n.XpG();return n.Njj(t.open())})),n.nrm(2,"system-icon",3),n.k0s(),n.DNE(3,h,2,1,"span",4),n.k0s()}if(2&e){const e=n.XpG();n.R7$(3),n.Y8G("ngIf",e.openWorkflowsCount>0)}}let p=(()=>{class ObjectWorkflowButton{constructor(e,t,s,n,l,o){this.metadata=e,this.navigationTab=t,this.router=s,this.backend=n,this.broadcast=l,this.model=o,this.workflowEnabled=!1,this.openWorkflowsCount=0,this.subscriptions=new i.yU,this.initialize()}ngOnDestroy(){this.subscriptions.unsubscribe()}initialize(){this.workflowEnabled=this.metadata.getModuleDefs("Workflows")&&this.metadata.getModuleDefs(this.model.module).workflow,this.workflowEnabled&&(this.getOpenWorkflowsCount(),this.subscriptions.add(this.broadcast.message$.subscribe((e=>this.handleMessage(e)))))}open(){const e=this.navigationTab?.tabid?"/tab/"+this.navigationTab.tabid:"";this.router.navigate([`${e}/module/${this.model.module}/${this.model.id}/workflows`])}getOpenWorkflowsCount(){this.backend.getRequest(`module/Workflows/forparent/${this.model.module}/${this.model.id}/open`).subscribe({next:e=>this.openWorkflowsCount=e.count})}handleMessage(e){if("workflows.reload"==e.messagetype)return this.getOpenWorkflowsCount();if(e.messagedata.module===this.model.module||e.messagedata.id===this.model.id)switch(e.messagetype){case"model.save":this.getOpenWorkflowsCount();break;case"workflows.loaded":this.openWorkflowsCount=e.messagedata.workflowcount}}static#e=this.ɵfac=function(e){return new(e||ObjectWorkflowButton)(n.rXU(l.yu),n.rXU(o._),n.rXU(a.Ix),n.rXU(r.H),n.rXU(d.m),n.rXU(c.g))};static#t=this.ɵcmp=n.VBU({type:ObjectWorkflowButton,selectors:[["object-workflow-button"]],decls:1,vars:1,consts:[["class","slds-is-relative slds-m-horizontal--x-small",4,"ngIf"],[1,"slds-is-relative","slds-m-horizontal--x-small"],[1,"slds-button",2,"text-transform","capitalize",3,"click"],["icon","process","divClass",""],["style","box-shadow: 0 0 0 2px #fff;","aria-hidden","true","class","slds-notification-badge slds-incoming-notification slds-show-notification",4,"ngIf"],["aria-hidden","true",1,"slds-notification-badge","slds-incoming-notification","slds-show-notification",2,"box-shadow","0 0 0 2px #fff"]],template:function(e,t){1&e&&n.DNE(0,g,4,1,"div",0),2&e&&n.Y8G("ngIf",t.workflowEnabled)},dependencies:[u.bT,m.J],encapsulation:2})}return ObjectWorkflowButton})()},37328:(e,t,s)=>{"use strict";s.r(t),s.d(t,{ObjectComponents:()=>Jc});var i=s(60177),n=s(18039),l=s(84341),o=s(57363),a=s(71341),r=s(7745),d=s(70569),c=s(67333),u=s(97021),m=s(54438),h=s(69904),g=s(35911);let p=(()=>{class ObjectFieldFilterPipe{constructor(e,t){this.languange=e,this.model=t}transform(e,t){let s=[];for(let i of e)(i.toLowerCase().indexOf(t.toLowerCase())>=0||this.languange.getFieldDisplayName(this.model.module,i).toLowerCase().indexOf(t.toLowerCase())>0)&&s.push(i);return s}static#e=this.ɵfac=function(e){return new(e||ObjectFieldFilterPipe)(m.rXU(h.B,16),m.rXU(g.g,16))};static#t=this.ɵpipe=m.EJ8({name:"objectfieldfilter",type:ObjectFieldFilterPipe,pure:!1})}return ObjectFieldFilterPipe})();var f=s(49969),b=s(83935),y=s(53584),v=s(75103),k=s(71692),R=s(25863),I=s(68823),x=s(24834),j=s(22465),G=s(37265),C=s(99438),w=s(48849),S=s(32062),E=s(18521),L=s(54546);function D(e,t){if(1&e){const e=m.RV6();m.j41(0,"li",10),m.bIt("click",(function(){const t=m.eBV(e).$implicit,s=m.XpG();return m.Njj(s.setListComponent(t.component))})),m.j41(1,"a",11)(2,"span",12),m.nrm(3,"system-label",13),m.k0s(),m.nrm(4,"system-utility-icon",14),m.k0s()()}if(2&e){const e=t.$implicit;m.R7$(3),m.Y8G("label",e.label),m.R7$(),m.Y8G("icon",e.icon)}}let F=(()=>{class ObjectListViewHeaderListSelector{constructor(e,t,s,i,n,l,o){this.metadata=e,this.userpreferences=t,this.modellist=s,this.language=i,this.model=n,this.elementRef=l,this.renderer=o}ngOnInit(){this.initialize()}initialize(){this.loadComponentConfig(),this.modellist.currentList&&-1!=["all","owner"].indexOf(this.modellist.currentList.id)&&this.modellist.updateStandardListsComponent(this.modellist.currentList.id,this.getDefaultComponent())}getDefaultComponent(){return this.userpreferences.getPreference("defaultlisttype",this.modellist.module)||this.componentconfig.lists[0].component}loadComponentConfig(){let e=this.metadata.getComponentConfig("ObjectListView",this.model.module),t=this.metadata.getComponentSetObjects(e.componentset);this.componentconfig={lists:t.map((e=>({component:e.component,icon:e.componentconfig.icon?e.componentconfig.icon:"list",label:e.componentconfig.name})))}}get currentListIcon(){let e="";if(this.componentconfig.lists){let t=this.componentconfig.lists.find((e=>e.component==this.modellist.currentList.listcomponent));e=t?.icon}return e}get disabled(){return this.componentconfig.lists.length<=1}setListComponent(e){this.modellist.currentList&&(-1!=["all","owner"].indexOf(this.modellist.currentList.id)?this.modellist.updateStandardListsComponent(this.modellist.currentList.id,e):this.modellist.updateListTypeComponent(e))}static#e=this.ɵfac=function(e){return new(e||ObjectListViewHeaderListSelector)(m.rXU(b.yu),m.rXU(w.S),m.rXU(v.K),m.rXU(h.B),m.rXU(g.g),m.rXU(m.aKT),m.rXU(m.sFG))};static#t=this.ɵcmp=m.VBU({type:ObjectListViewHeaderListSelector,selectors:[["object-listview-header-list-selector"]],decls:10,vars:3,consts:[["aria-expanded","false","system-dropdown-trigger-simple","",1,"slds-dropdown-trigger","slds-dropdown-trigger--click","slds-m-horizontal--xxx-small"],["aria-haspopup","true","system-title","LBL_CHANGE_VIEW",1,"slds-button","slds-button--icon","slds-button--icon-border","slds-button--neutral",3,"disabled"],["size","small",3,"icon"],["icon","down","size","x-small",1,"slds-p-left--xxx-small"],[1,"slds-dropdown","slds-dropdown--right","slds-dropdown--small"],["role","menu",1,"slds-dropdown__list"],["role","separator",1,"slds-dropdown__header"],[1,"slds-text-title--caps"],["label","LBL_DISPLAYAS"],["class","slds-dropdown__item slds-is-selected","role","presentation",3,"click",4,"ngFor","ngForOf"],["role","presentation",1,"slds-dropdown__item","slds-is-selected",3,"click"],["href","javascript:void(0);","role","menuitemcheckbox","aria-checked","true","tabindex","0"],[1,"slds-truncate"],[3,"label"],["size","x-small",3,"icon"]],template:function(e,t){1&e&&(m.j41(0,"div",0)(1,"button",1),m.nrm(2,"system-button-icon",2)(3,"system-button-icon",3),m.k0s(),m.j41(4,"div",4)(5,"ul",5)(6,"li",6)(7,"span",7),m.nrm(8,"system-label",8),m.k0s()(),m.DNE(9,D,5,2,"li",9),m.k0s()()()),2&e&&(m.R7$(),m.Y8G("disabled",t.disabled),m.R7$(),m.Y8G("icon",t.currentListIcon),m.R7$(7),m.Y8G("ngForOf",t.componentconfig.lists))},dependencies:[i.Sq,R.t,S.W,E.B,L.C,j.L],encapsulation:2})}return ObjectListViewHeaderListSelector})();var M=s(44261),T=s(4467),B=s(28933),$=s(28460),O=s(53471);function X(e,t){1&e&&m.nrm(0,"object-listview-tags-aggregate")}function U(e,t){if(1&e&&m.nrm(0,"object-listview-aggregate",14),2&e){const e=m.XpG().$implicit;m.Y8G("aggregate",e)}}function Y(e,t){if(1&e&&(m.j41(0,"div",12),m.DNE(1,U,1,1,"object-listview-aggregate",13),m.k0s()),2&e){const e=t.$implicit;m.R7$(),m.Y8G("ngIf",!e.system)}}let N=(()=>{class ObjectListViewAggregatesPanel{constructor(e,t,s,i){this.elementRef=e,this.language=t,this.metadata=s,this.modellist=i}get aggregates(){return this.modellist.moduleAggregates}get hasTags(){return this.metadata.checkTagging(this.modellist.module)}clearAggregates(){this.modellist.removeAllAggregates(!0),this.modellist.reLoadList()}static#e=this.ɵfac=function(e){return new(e||ObjectListViewAggregatesPanel)(m.rXU(m.aKT),m.rXU(h.B),m.rXU(b.yu),m.rXU(v.K))};static#t=this.ɵcmp=m.VBU({type:ObjectListViewAggregatesPanel,selectors:[["object-listview-aggregates-panel"]],hostAttrs:[1,"slds-is-fixed"],decls:12,vars:3,consts:[[1,"slds-panel","slds-size--large","slds-grid","slds-grid--vertical","slds-nowrap","slds-panel--filters"],[1,"slds-form--stacked","slds-grow","slds-scrollable--y","slds-grid","slds-grid--vertical"],[1,"slds-filters"],[1,"slds-filters__header","slds-grid","slds-grid--align-spread","slds-has-divider--bottom"],[1,"slds-align-middle","slds-text-heading--small"],["label","LBL_AGGREGATES"],[1,"slds-button","slds-button--brand",3,"disabled","click"],["label","LBL_CLEARALL"],["system-to-bottom","",1,"slds-filters__body"],[1,"slds-grid_vertical"],[4,"ngIf"],["class","slds-m-vertical--xx-small",4,"ngFor","ngForOf"],[1,"slds-m-vertical--xx-small"],[3,"aggregate",4,"ngIf"],[3,"aggregate"]],template:function(e,t){1&e&&(m.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h4",4),m.nrm(5,"system-label",5),m.k0s(),m.j41(6,"button",6),m.bIt("click",(function(){return t.clearAggregates()})),m.nrm(7,"system-label",7),m.k0s()(),m.j41(8,"div",8)(9,"div",9),m.DNE(10,X,1,0,"object-listview-tags-aggregate",10)(11,Y,2,1,"div",11),m.k0s()()()()()),2&e&&(m.R7$(6),m.Y8G("disabled",!t.modellist.hasNonSysAggregates),m.R7$(4),m.Y8G("ngIf",t.hasTags),m.R7$(),m.Y8G("ngForOf",t.aggregates))},dependencies:[i.Sq,i.bT,S.W,B.b,$.q,O.L],encapsulation:2})}return ObjectListViewAggregatesPanel})(),V=(()=>{class ObjectListViewFilterButton{constructor(e){this.modellist=e}togglefilters(){this.modellist.displayAggregates=!1,this.modellist.displayFilters=!this.modellist.displayFilters}get enabled(){return this.modellist.filterEnabled()}get buttonclasses(){return this.modellist.displayFilters?"slds-is-selected":""}static#e=this.ɵfac=function(e){return new(e||ObjectListViewFilterButton)(m.rXU(v.K))};static#t=this.ɵcmp=m.VBU({type:ObjectListViewFilterButton,selectors:[["object-listview-filter-button"]],decls:2,vars:2,consts:[["system-title","LBL_FILTER",1,"slds-button","slds-button--neutral","slds-button--icon-border","slds-m-horizontal--xxx-small",3,"disabled","ngClass","click"],["icon","filterList"]],template:function(e,t){1&e&&(m.j41(0,"button",0),m.bIt("click",(function(){return t.togglefilters()})),m.nrm(1,"system-button-icon",1),m.k0s()),2&e&&m.Y8G("disabled",!t.enabled)("ngClass",t.buttonclasses)},dependencies:[i.YU,R.t,j.L],encapsulation:2})}return ObjectListViewFilterButton})();var A=s(18359),P=s(50531),z=s(66589);const H=["popover"];function q(e,t){if(1&e){const e=m.RV6();m.j41(0,"fieldset",13)(1,"div",14)(2,"span",15)(3,"input",31),m.mxI("ngModelChange",(function(t){m.eBV(e);const s=m.XpG(2);return m.DH7(s.filterValue.groupstate,t)||(s.filterValue.groupstate=t),m.Njj(t)})),m.k0s(),m.j41(4,"label",32),m.nrm(5,"span",18),m.j41(6,"span",19),m.nrm(7,"system-label",33),m.k0s()()(),m.j41(8,"span",15)(9,"input",34),m.mxI("ngModelChange",(function(t){m.eBV(e);const s=m.XpG(2);return m.DH7(s.filterValue.groupstate,t)||(s.filterValue.groupstate=t),m.Njj(t)})),m.k0s(),m.j41(10,"label",35),m.nrm(11,"span",18),m.j41(12,"span",19),m.nrm(13,"system-label",36),m.k0s()()(),m.j41(14,"span",15)(15,"input",37),m.mxI("ngModelChange",(function(t){m.eBV(e);const s=m.XpG(2);return m.DH7(s.filterValue.groupstate,t)||(s.filterValue.groupstate=t),m.Njj(t)})),m.k0s(),m.j41(16,"label",38),m.nrm(17,"span",18),m.j41(18,"span",19),m.nrm(19,"system-label",39),m.k0s()()()()()}if(2&e){const e=m.XpG(2);m.R7$(3),m.R50("ngModel",e.filterValue.groupstate),m.R7$(6),m.R50("ngModel",e.filterValue.groupstate),m.R7$(6),m.R50("ngModel",e.filterValue.groupstate)}}function J(e,t){if(1&e){const e=m.RV6();m.j41(0,"div",9)(1,"div",10)(2,"legend",11),m.nrm(3,"system-label",5),m.k0s(),m.j41(4,"div",12)(5,"fieldset",13)(6,"div",14)(7,"span",15)(8,"input",16),m.mxI("ngModelChange",(function(t){m.eBV(e);const s=m.XpG();return m.DH7(s.filterValue.groupscope,t)||(s.filterValue.groupscope=t),m.Njj(t)})),m.k0s(),m.j41(9,"label",17),m.nrm(10,"span",18),m.j41(11,"span",19),m.nrm(12,"system-label",20),m.k0s()()(),m.j41(13,"span",15)(14,"input",21),m.mxI("ngModelChange",(function(t){m.eBV(e);const s=m.XpG();return m.DH7(s.filterValue.groupscope,t)||(s.filterValue.groupscope=t),m.Njj(t)})),m.k0s(),m.j41(15,"label",22),m.nrm(16,"span",18),m.j41(17,"span",19),m.nrm(18,"system-label",23),m.k0s()()(),m.j41(19,"span",15)(20,"input",24),m.mxI("ngModelChange",(function(t){m.eBV(e);const s=m.XpG();return m.DH7(s.filterValue.groupscope,t)||(s.filterValue.groupscope=t),m.Njj(t)})),m.k0s(),m.j41(21,"label",25),m.nrm(22,"span",18),m.j41(23,"span",19),m.nrm(24,"system-label",26),m.k0s()()()()(),m.DNE(25,q,20,3,"fieldset",27),m.k0s(),m.j41(26,"div",28)(27,"button",29),m.bIt("click",(function(){m.eBV(e);const t=m.XpG();return m.Njj(t.closePopover())})),m.nrm(28,"system-label",30),m.k0s()()()()}if(2&e){const e=m.XpG();m.Y8G("@animatepopover",void 0),m.R7$(8),m.R50("ngModel",e.filterValue.groupscope),m.R7$(6),m.R50("ngModel",e.filterValue.groupscope),m.R7$(6),m.R50("ngModel",e.filterValue.groupscope),m.R7$(5),m.Y8G("ngIf",e.hasInactiveProperty)}}let W=(()=>{class ObjectListViewFilterPanelFilterMyItems{constructor(e,t,s,i,n){this.renderer=e,this.elementRef=t,this.language=s,this.modellist=i,this.metadata=n,this.showPopover=!1,this._filterValue={logicaloperator:"and",groupscope:"all",groupstate:"active",geography:{},conditions:[]},this.clickListener=null,this.hasInactiveProperty=!1,this.hasInactiveProperty=this.metadata.hasField(this.modellist.module,"is_inactive")}onClick(){if(!this.showPopover)return this.showPopover=!0,void(this.clickListener=this.renderer.listen("document","click",(e=>this.onDocumentClick(e))))}get filterValue(){return this._filterValue}set filterValue(e){this._filterValue=e,this.onChange(e)}get getLabel(){return this.hasInactiveProperty?this.language.getLabel("LBL_"+this.filterValue.groupscope.toUpperCase()+" & "+this.filterValue.groupstate.toUpperCase()):this.language.getLabel("LBL_"+this.filterValue.groupscope.toUpperCase())}closePopover(){this.showPopover=!1,this.clickListener&&this.clickListener()}onDocumentClick(e){if(this.showPopover){this.elementRef.nativeElement.contains(e.target)||this.closePopover()}}getPopoverStyle(){let e=this.elementRef.nativeElement.getBoundingClientRect(),t=this.popover.element.nativeElement.getBoundingClientRect();return{position:"fixed",top:e.top+(e.height-t.height)/2+"px",left:e.left-t.width-15+"px"}}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}writeValue(e){this._filterValue=e||{logicaloperator:"and",groupscope:"all",groupstate:"active",geography:{},conditions:[]}}static#e=this.ɵfac=function(e){return new(e||ObjectListViewFilterPanelFilterMyItems)(m.rXU(m.sFG),m.rXU(m.aKT),m.rXU(h.B),m.rXU(v.K),m.rXU(b.yu))};static#t=this.ɵcmp=m.VBU({type:ObjectListViewFilterPanelFilterMyItems,selectors:[["object-listview-filter-panel-filter-myitems"]],viewQuery:function(e,t){if(1&e&&m.GBs(H,7,m.c1b),2&e){let e;m.mGM(e=m.lsd())&&(t.popover=e.first)}},features:[m.Jv_([{provide:l.kq,useExisting:(0,m.Rfq)((()=>ObjectListViewFilterPanelFilterMyItems)),multi:!0}])],decls:10,vars:3,consts:[[1,"slds-list--vertical","slds-list--vertical-space"],[1,"slds-item","slds-hint-parent",3,"click"],[1,"slds-filters__item","slds-grid","slds-grid--vertical-align-center"],["href","javascript:void(0);",1,"slds-grow","slds-has-blur-focus"],[1,"slds-text-body--small"],["label","LBL_DISPLAY"],[3,"ngStyle"],["popover",""],["class","slds-popover slds-nubbin--right","role","dialog",4,"ngIf"],["role","dialog",1,"slds-popover","slds-nubbin--right"],[1,"slds-popover__body","slds-grid","slds-wrap"],[1,"slds-form-element__legend","slds-form-element__label","slds-size_1-of-1"],[1,"slds-grid","slds-gutters"],[1,"slds-form-element","slds-col"],[1,"slds-form-element__control"],[1,"slds-radio"],["type","radio","id","radioall","name","scope","value","all",3,"ngModel","ngModelChange"],["for","radioall",1,"slds-radio__label"],[1,"slds-radio--faux"],[1,"slds-form-element__label"],["label","LBL_ALL"],["type","radio","id","radioown","name","scope","value","own",3,"ngModel","ngModelChange"],["for","radioown",1,"slds-radio__label"],["label","LBL_OWN"],["type","radio","id","radiocre","name","scope","value","creator",3,"ngModel","ngModelChange"],["for","radiocre",1,"slds-radio__label"],["label","LBL_CREATOR"],["class","slds-form-element slds-col",4,"ngIf"],[1,"slds-text-align--right","slds-p-top--x-small","slds-size_1-of-1"],["type","button",1,"slds-button","slds-button--brand","slds-button-space-left",3,"click"],["label","LBL_OK"],["type","radio","id","radioactive","name","state","value","active",3,"ngModel","ngModelChange"],["for","radioactive",1,"slds-radio__label"],["label","LBL_ACTIVE"],["type","radio","id","radioinactive","name","state","value","inactive",3,"ngModel","ngModelChange"],["for","radioinactive",1,"slds-radio__label"],["label","LBL_INACTIVE"],["type","radio","id","radioactiveAndInactive","name","state","value","activeAndInactive",3,"ngModel","ngModelChange"],["for","radioactiveAndInactive",1,"slds-radio__label"],["label","LBL_ACTIVE_AND_INACTIVE"]],template:function(e,t){1&e&&(m.j41(0,"ol",0)(1,"li",1),m.bIt("click",(function(){return t.onClick()})),m.j41(2,"div",2)(3,"a",3)(4,"p",4),m.nrm(5,"system-label",5),m.EFF(6),m.k0s()()()(),m.j41(7,"div",6,7),m.DNE(9,J,29,5,"div",8),m.k0s()()),2&e&&(m.R7$(6),m.SpI(": ",t.getLabel,""),m.R7$(),m.Y8G("ngStyle",t.getPopoverStyle()),m.R7$(2),m.Y8G("ngIf",t.showPopover))},dependencies:[i.bT,i.B3,l.me,l.Fm,l.BC,l.vS,S.W],encapsulation:2,data:{animation:[(0,f.hZ)("animatepopover",[(0,f.kY)(":enter",[(0,f.iF)({opacity:0}),(0,f.i0)(".25s",(0,f.iF)({opacity:1}))]),(0,f.kY)(":leave",[(0,f.iF)({opacity:"1"}),(0,f.i0)(".25s",(0,f.iF)({opacity:0}))])])]}})}return ObjectListViewFilterPanelFilterMyItems})();function K(e,t){if(1&e){const e=m.RV6();m.j41(0,"ol",1)(1,"li",2),m.bIt("click",(function(){m.eBV(e);const t=m.XpG();return m.Njj(t.onClick())})),m.j41(2,"div",3),m.nrm(3,"system-button-icon",4),m.j41(4,"p",5),m.EFF(5),m.k0s()()()()}if(2&e){const e=m.XpG();m.R7$(5),m.SpI(" ",e.geodata," ")}}let Q=(()=>{class ObjectListViewFilterPanelFilterGeo{constructor(e,t,s,i){this.model=e,this.modal=t,this.language=s,this.metadata=i,this.geography={},this.geographyChange=new m.bkB}get geoEnabled(){return!(!this.model||!this.model.module)&&this.metadata.getModuleDefs(this.model.module).ftsgeo}onClick(){this.modal.openModal("SpiceMapSelector").subscribe((e=>{this.hasGeogrpahy&&(e.instance.lat=this.geography.lat,e.instance.lng=this.geography.lng,e.instance._radius=this.geography.radius,e.instance.address=this.geography.address),e.instance.geoSearchemitter.subscribe((e=>{e?(this.geography.radius=e.radius,this.geography.lat=e.lat,this.geography.lng=e.lng,this.geography.address=e.address):this.geography={},this.geographyChange.emit(this.geography)}))}))}get hasGeogrpahy(){return!_.isEmpty(this.geography)}get geodata(){return this.hasGeogrpahy?this.geography.radius+"km around "+this.geography.address:"no geodata set"}static#e=this.ɵfac=function(e){return new(e||ObjectListViewFilterPanelFilterGeo)(m.rXU(g.g),m.rXU(P.y),m.rXU(h.B),m.rXU(b.yu))};static#t=this.ɵcmp=m.VBU({type:ObjectListViewFilterPanelFilterGeo,selectors:[["object-listview-filter-panel-filter-geo"]],inputs:{geography:"geography"},outputs:{geographyChange:"geographyChange"},decls:1,vars:1,consts:[["class","slds-list--vertical slds-list--vertical-space slds-p-vertical--x-small",4,"ngIf"],[1,"slds-list--vertical","slds-list--vertical-space","slds-p-vertical--x-small"],[1,"slds-item","slds-hint-parent","slds-text-link--reset",3,"click"],[1,"slds-filters__item","slds-grid"],["icon","world",1,"slds-p-right--x-small"],[1,"slds-text-body--small","slds-p-vertical--xxx-small"]],template:function(e,t){1&e&&m.DNE(0,K,6,1,"ol",0),2&e&&m.Y8G("ngIf",t.geoEnabled)},dependencies:[i.bT,R.t],encapsulation:2})}return ObjectListViewFilterPanelFilterGeo})();var Z=s(58829),ee=s(49722),te=s(67392),se=s(51099);const ie=["popover"];function ne(e,t){if(1&e&&(m.j41(0,"span"),m.nrm(1,"system-label",16),m.EFF(2),m.k0s()),2&e){const e=m.XpG();m.R7$(2),m.SpI(" ",e.interpretvalue(e.filterexpression.filtervalueto),"")}}function le(e,t){if(1&e&&(m.j41(0,"option",30),m.nrm(1,"system-label",3),m.k0s()),2&e){const e=t.$implicit;m.Y8G("value",e.operator),m.R7$(),m.Y8G("label",e.name)}}function oe(e,t){if(1&e){const e=m.RV6();m.j41(0,"div",17)(1,"div",18)(2,"fieldset",19)(3,"system-filter-builder-expression-fields",20),m.mxI("ngModelChange",(function(t){m.eBV(e);const s=m.XpG();return m.DH7(s.field,t)||(s.field=t),m.Njj(t)})),m.k0s(),m.j41(4,"div",5)(5,"label",21),m.nrm(6,"system-label",22),m.k0s(),m.j41(7,"div",6)(8,"div",23)(9,"select",24),m.mxI("ngModelChange",(function(t){m.eBV(e);const s=m.XpG();return m.DH7(s.operator,t)||(s.operator=t),m.Njj(t)})),m.DNE(10,le,2,2,"option",25),m.k0s()()()(),m.nrm(11,"system-filter-builder-expression-values",26),m.k0s(),m.j41(12,"div",27)(13,"button",28),m.bIt("click",(function(){m.eBV(e);const t=m.XpG();return m.Njj(t.closePopover())})),m.nrm(14,"system-label",29),m.k0s()()()()}if(2&e){const e=m.XpG();m.Y8G("@animatepopover",void 0),m.R7$(3),m.Y8G("module",e.module),m.R50("ngModel",e.field),m.R7$(6),m.Y8G("disabled",!e.filterexpression.field),m.R50("ngModel",e.operator),m.R7$(),m.Y8G("ngForOf",e.operators[e.operatortype]),m.R7$(),m.Y8G("operators",e.operators[e.operatortype])("operator",e.filterexpression.operator)("filterexpression",e.filterexpression)("module",e.module)("field",e.field)}}let ae=(()=>{class ObjectListViewFilterPanelFilterItem extends Z.H{constructor(e,t,s,i,n,l,o){super(e,t,s),this.backend=e,this.language=t,this.metadata=s,this.elementRef=i,this.modellist=n,this.renderer=l,this.userpreferences=o,this.showPopover=!1,this.clickListener=null,this.excludedFieldtypes=["link","relate","email"],this.deleteItem=new m.bkB,this.module=this.modellist.module}get operatorLabel(){return this.operator?this.operators[this.operatortype].find((e=>e.operator==this.operator)).name:""}ngAfterViewInit(){this.field&&""!=this.field||this.openPopover()}ngOnDestroy(){this.clickListener&&this.clickListener()}onClick(){this.openPopover()}openPopover(){this.showPopover||(this.showPopover=!0)}onFocus(e){window.setTimeout((()=>{e.target.blur()}),250)}closePopover(){this.showPopover=!1}onDocumentClick(e){this.showPopover&&(this.elementRef.nativeElement.contains(e.target)||(this.showPopover=!1,this.clickListener()))}getPopoverStyle(){let e=this.elementRef.nativeElement.getBoundingClientRect(),t=this.popover.element.nativeElement.getBoundingClientRect();return{position:"fixed",top:e.top+(e.height-t.height)/2+"px",left:e.left-t.width-15+"px"}}getDisplayName(){return this.field?this.language.getFieldDisplayName(this.modellist.module,this.field):this.language.getLabel("LBL_NEW_FILTER")}deleteFilter(){this.deleteItem.emit(!0)}interpretvalue(e){try{switch(this.operators[this.operatortype].find((e=>e.operator==this.operator)).value1){case"date":return this.userpreferences.formatDate(e);case"integer":return this.userpreferences.formatMoney(parseInt(e,10));case"enum":return this.language.getFieldDisplayOptionValue(this.module,this.field,e);case"relate":if(!e)return"";let t=e.split("::");return t.length<2?e:t[1];case"multienum":let s=[],i=_.isArray(e)?e:e.split(",");for(let e of i)s.push(this.language.getFieldDisplayOptionValue(this.module,this.field,e));return s.join(", ");default:return e}}catch(t){return e}}static#e=this.ɵfac=function(e){return new(e||ObjectListViewFilterPanelFilterItem)(m.rXU(ee.H),m.rXU(h.B),m.rXU(b.yu),m.rXU(m.aKT),m.rXU(v.K),m.rXU(m.sFG),m.rXU(w.S))};static#t=this.ɵcmp=m.VBU({type:ObjectListViewFilterPanelFilterItem,selectors:[["object-listview-filter-panel-filter-item"]],viewQuery:function(e,t){if(1&e&&m.GBs(ie,7,m.c1b),2&e){let e;m.mGM(e=m.lsd())&&(t.popover=e.first)}},outputs:{deleteItem:"deleteItem"},features:[m.Vt3],decls:18,vars:7,consts:[[1,"slds-filters__item","slds-m-vertical--xx-small","slds-grid","slds-grid--vertical-align-center"],["href","javascript:void(0);",1,"slds-grow","slds-has-blur-focus",3,"click","focus"],[1,"slds-text-body--small"],[3,"label"],[4,"ngIf"],[1,"slds-form-element"],[1,"slds-form-element__control"],[1,"slds-checkbox"],["type","checkbox","name","options","checked",""],[1,"slds-button","slds-button--icon","slds-button--icon-small",3,"click"],[3,"icon"],[1,"slds-assistive-text"],["label","LBL_REMOVE"],[3,"ngStyle"],["popover",""],["class","slds-popover slds-nubbin--right","role","dialog",4,"ngIf"],["label","LBL_AND"],["role","dialog",1,"slds-popover","slds-nubbin--right"],[1,"slds-popover__body"],[1,"slds-form--stacked"],[3,"module","ngModel","ngModelChange"],[1,"slds-form-element__label"],["label","LBL_OPERATOR"],[1,"slds-select_container"],[1,"slds-select",3,"disabled","ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[3,"operators","operator","filterexpression","module","field"],[1,"slds-text-align--right","slds-p-top--x-small","slds-has-divider--top"],["type","button",1,"slds-button","slds-button--brand","slds-button-space-left",3,"click"],["label","LBL_OK"],[3,"value"]],template:function(e,t){1&e&&(m.j41(0,"div",0)(1,"a",1),m.bIt("click",(function(){return t.onClick()}))("focus",(function(e){return t.onFocus(e)})),m.j41(2,"p",2),m.EFF(3),m.nrm(4,"system-label",3),m.EFF(5),m.DNE(6,ne,3,1,"span",4),m.k0s()(),m.j41(7,"div",5)(8,"div",6)(9,"span",7),m.nrm(10,"input",8),m.k0s()()(),m.j41(11,"button",9),m.bIt("click",(function(){return t.deleteFilter()})),m.nrm(12,"system-button-icon",10),m.j41(13,"span",11),m.nrm(14,"system-label",12),m.k0s()()(),m.j41(15,"div",13,14),m.DNE(17,oe,15,11,"div",15),m.k0s()),2&e&&(m.R7$(3),m.SpI("",t.getDisplayName()," "),m.R7$(),m.Y8G("label",t.operatorLabel),m.R7$(),m.SpI(" ",t.interpretvalue(t.filterexpression.filtervalue)," "),m.R7$(),m.Y8G("ngIf",t.filterexpression.filtervalueto),m.R7$(6),m.Y8G("icon","close"),m.R7$(3),m.Y8G("ngStyle",t.getPopoverStyle()),m.R7$(2),m.Y8G("ngIf",t.showPopover))},dependencies:[i.Sq,i.bT,i.B3,l.xH,l.y7,l.wz,l.BC,l.vS,R.t,te.q,se.N,S.W],encapsulation:2,data:{animation:[(0,f.hZ)("animatepopover",[(0,f.kY)(":enter",[(0,f.iF)({opacity:0}),(0,f.i0)(".25s",(0,f.iF)({opacity:1}))]),(0,f.kY)(":leave",[(0,f.iF)({opacity:"1"}),(0,f.i0)(".25s",(0,f.iF)({opacity:0}))])])]}})}return ObjectListViewFilterPanelFilterItem})();function re(e,t){if(1&e){const e=m.RV6();m.j41(0,"object-listview-filter-panel-filter-item",26),m.bIt("deleteItem",(function(){const t=m.eBV(e).index,s=m.XpG(2);return m.Njj(s.deleteItem(t))})),m.k0s()}if(2&e){const e=t.$implicit;m.Y8G("filterexpression",e)}}function de(e,t){if(1&e){const e=m.RV6();m.j41(0,"div",27)(1,"a",28),m.bIt("click",(function(t){m.eBV(e);const s=m.XpG(2);return m.Njj(s.addExpression(t))})),m.nrm(2,"system-label",29),m.k0s(),m.j41(3,"a",30),m.bIt("click",(function(){m.eBV(e);const t=m.XpG(2);return m.Njj(t.removeAllFilters())})),m.nrm(4,"system-label",31),m.k0s()()}}function ce(e,t){if(1&e&&(m.qex(0),m.j41(1,"div",23),m.DNE(2,re,1,1,"object-listview-filter-panel-filter-item",24),m.k0s(),m.DNE(3,de,5,0,"div",25),m.bVm()),2&e){const e=m.XpG();m.R7$(2),m.Y8G("ngForOf",e.filter.conditions),m.R7$(),m.Y8G("ngIf",e.canEdit)}}function ue(e,t){if(1&e){const e=m.RV6();m.j41(0,"div",33)(1,"a",28),m.bIt("click",(function(t){m.eBV(e);const s=m.XpG(2);return m.Njj(s.addExpression(t))})),m.nrm(2,"system-label",29),m.k0s()()}}function me(e,t){if(1&e&&m.DNE(0,ue,3,0,"div",32),2&e){const e=m.XpG();m.Y8G("ngIf",e.canEdit)}}const he=e=>({"slds-hidden":e});let ge=(()=>{class ObjectListViewFilterPanel{constructor(e,t,s,i,n,l,o){this.elementRef=e,this.language=t,this.metadata=s,this.modellist=i,this.model=n,this.renderer=l,this.modal=o,this.filter={logicaloperator:"and",groupscope:"all",geography:{},conditions:[]},this.subcriptions=new A.yU,this.subcriptions.add(this.modellist.listType$.subscribe((e=>{this.setFilter()})))}ngOnDestroy(){this.subcriptions.unsubscribe()}setFilter(){this.filter={...this.modellist.getFilterDefs()},this.filter&&!_.isEmpty(this.filter)||(this.modellist.hasInactiveFieldProperty?this.filter={logicaloperator:"and",groupscope:"all",groupstate:"active",geography:{},conditions:[]}:this.filter={logicaloperator:"and",groupscope:"all",geography:{},conditions:[]})}get geography(){return this.filter.geography?this.filter.geography:{}}set geography(e){this.filter.geography=e}get isChanged(){return!_.isEqual(this.filter,this.modellist.getFilterDefs())}get canEdit(){return this.modellist.checkAccess("edit")}save(){const e=this.modal.await("LBL_SAVING_FILTER");this.isChanged&&(this.modellist.updateListType({filterdefs:JSON.stringify(this.filter)}).subscribe((()=>{e.emit(),e.complete(),this.modellist.cancelPendingRequests=!1,this.modellist.reLoadList()})),this.modellist.displayFilters=!1)}cancel(){this.filter={...this.modellist.getFilterDefs()},this.modellist.displayFilters=!1}removeAllFilters(){this.filter.conditions=[]}addExpression(e){e.preventDefault(),e.stopPropagation();this.filter.conditions.push({field:"",operator:"",filtervalue:""})}deleteItem(e){this.filter.conditions.splice(e,1)}static#e=this.ɵfac=function(e){return new(e||ObjectListViewFilterPanel)(m.rXU(m.aKT),m.rXU(h.B),m.rXU(b.yu),m.rXU(v.K),m.rXU(g.g),m.rXU(m.sFG),m.rXU(P.y))};static#t=this.ɵcmp=m.VBU({type:ObjectListViewFilterPanel,selectors:[["object-listview-filter-panel"]],hostAttrs:[1,"slds-is-fixed"],decls:24,vars:11,consts:[["system-to-bottom","",1,"slds-panel","slds-size--medium","slds-grid","slds-grid--vertical","slds-nowrap","slds-panel--filters","slds-size_medium"],[1,"slds-form--stacked","slds-grow","slds-scrollable--y","slds-grid","slds-grid--vertical"],[1,"slds-filters"],[1,"slds-filters__header","slds-grid","slds-grid--align-spread","slds-has-divider--bottom-space"],[1,"slds-align-middle","slds-text-heading--small"],["label","LBL_FILTER"],[1,"slds-button-group",3,"ngClass"],[1,"slds-button","slds-button--icon","slds-button_icon-border-filled",3,"click"],["icon","close"],[1,"slds-button","slds-button--icon","slds-button_icon-border-filled","slds-is-selected",3,"click"],["icon","check"],[1,"slds-p-around--xx-small"],[3,"ngModel","ngModelChange"],[3,"geography","geographyChange"],[1,"slds-grid","slds-p-around--xx-small"],[1,"slds-form-element__label"],["label","LBL_MATCHING"],["name","operator","value","and",3,"disabled","ngModel","ngModelChange"],["label","LBL_ALL"],["name","operator","value","or",3,"disabled","ngModel","ngModelChange"],["label","LBL_ANY"],[4,"ngIf","ngIfElse"],["nofilter",""],[1,"slds-grid_vertical"],[3,"filterexpression","deleteItem",4,"ngFor","ngForOf"],["class","slds-filters__footer slds-grid slds-shrink-none",4,"ngIf"],[3,"filterexpression","deleteItem"],[1,"slds-filters__footer","slds-grid","slds-shrink-none"],["href","javascript:void(0);",3,"click"],["label","LBL_ADDFILTER"],["href","javascript:void(0);",1,"slds-col--bump-left",3,"click"],["label","LBL_REMOVEALL"],["class","slds-p-around--small slds-align--absolute-center",4,"ngIf"],[1,"slds-p-around--small","slds-align--absolute-center"]],template:function(e,t){if(1&e&&(m.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h4",4),m.nrm(5,"system-label",5),m.k0s(),m.j41(6,"div",6)(7,"button",7),m.bIt("click",(function(){return t.cancel()})),m.nrm(8,"system-button-icon",8),m.k0s(),m.j41(9,"button",9),m.bIt("click",(function(){return t.save()})),m.nrm(10,"system-button-icon",10),m.k0s()()(),m.j41(11,"div",11)(12,"object-listview-filter-panel-filter-myitems",12),m.mxI("ngModelChange",(function(e){return m.DH7(t.filter,e)||(t.filter=e),e})),m.k0s(),m.j41(13,"object-listview-filter-panel-filter-geo",13),m.mxI("geographyChange",(function(e){return m.DH7(t.geography,e)||(t.geography=e),e})),m.k0s(),m.j41(14,"div",14)(15,"label",15),m.nrm(16,"system-label",16),m.k0s(),m.j41(17,"system-input-radio",17),m.mxI("ngModelChange",(function(e){return m.DH7(t.filter.logicaloperator,e)||(t.filter.logicaloperator=e),e})),m.nrm(18,"system-label",18),m.k0s(),m.j41(19,"system-input-radio",19),m.mxI("ngModelChange",(function(e){return m.DH7(t.filter.logicaloperator,e)||(t.filter.logicaloperator=e),e})),m.nrm(20,"system-label",20),m.k0s()(),m.DNE(21,ce,4,2,"ng-container",21)(22,me,1,1,"ng-template",null,22,m.C5r),m.k0s()()()()),2&e){const e=m.sdS(23);m.R7$(6),m.Y8G("ngClass",m.eq3(9,he,!t.isChanged)),m.R7$(6),m.R50("ngModel",t.filter),m.R7$(),m.R50("geography",t.geography),m.R7$(4),m.Y8G("disabled",!t.canEdit),m.R50("ngModel",t.filter.logicaloperator),m.R7$(2),m.Y8G("disabled",!t.canEdit),m.R50("ngModel",t.filter.logicaloperator),m.R7$(2),m.Y8G("ngIf",t.filter.conditions.length>0)("ngIfElse",e)}},dependencies:[i.YU,i.Sq,i.bT,l.BC,l.vS,R.t,z.J,S.W,B.b,W,Q,ae],encapsulation:2})}return ObjectListViewFilterPanel})();var pe=s(41081);let fe=(()=>{class ObjectListViewSettings{constructor(e,t,s,i,n,l,o){this.language=e,this.elementRef=t,this.modal=s,this.modellist=i,this.renderer=n,this.injector=l,this.toast=o}add(){this.modal.openModal("ObjectListViewSettingsAddlistModal",!0,this.injector).subscribe((e=>{e.instance.modalmode="add"}))}edit(){if(!this.modellist.checkAccess("edit"))return!1;this.modal.openModal("ObjectListViewSettingsAddlistModal",!0,this.injector).subscribe((e=>{e.instance.modalmode="edit"}))}save(){this.modellist.updateListType().subscribe((e=>{this.toast.sendToast("List Saved")}))}setfields(){if(!this.modellist.checkAccess("edit"))return!1;this.modal.openModal("ObjectListViewSettingsSetfieldsModal",!0,this.injector)}delete(){if(!this.modellist.checkAccess("delete"))return!1;this.modal.prompt("confirm",this.language.getLabel("MSG_DELETE_RECORD",void 0,"long"),this.language.getLabel("MSG_DELETE_RECORD")).subscribe((e=>{e&&this.modellist.deleteListType()}))}static#e=this.ɵfac=function(e){return new(e||ObjectListViewSettings)(m.rXU(h.B),m.rXU(m.aKT),m.rXU(P.y),m.rXU(v.K),m.rXU(m.sFG),m.rXU(m.zZn),m.rXU(pe.o))};static#t=this.ɵcmp=m.VBU({type:ObjectListViewSettings,selectors:[["object-listview-settings"]],decls:29,vars:4,consts:[[1,"slds-dropdown-trigger","slds-dropdown-trigger--click","slds-m-horizontal--xxx-small",3,"system-dropdown-trigger-simple"],["system-title","LBL_SETTING",1,"slds-button","slds-button--icon","slds-button--icon-border","slds-button--neutral"],["icon","settings"],["icon","down","size","x-small"],[1,"slds-dropdown","slds-dropdown--right"],["role","menu",1,"slds-dropdown__list"],["role","separator",1,"slds-dropdown__header"],[1,"slds-text-title--caps"],["label","LBL_SETTINGS"],["role","presentation",1,"slds-dropdown__item"],["role","menuitem",3,"click"],[1,"slds-truncate"],["icon","add","size","x-small",1,"slds-p-right--xx-small"],["label","LBL_NEW"],["icon","edit","size","x-small",1,"slds-p-right--xx-small"],["label","LBL_EDIT"],["icon","save","size","x-small",1,"slds-p-right--xx-small"],["label","LBL_SAVE"],["icon","delete","size","x-small",1,"slds-p-right--xx-small"],["label","LBL_DELETE"]],template:function(e,t){1&e&&(m.j41(0,"div",0)(1,"button",1),m.nrm(2,"system-button-icon",2)(3,"system-button-icon",3),m.k0s(),m.j41(4,"div",4)(5,"ul",5)(6,"li",6)(7,"span",7),m.nrm(8,"system-label",8),m.k0s()(),m.j41(9,"li",9)(10,"a",10),m.bIt("click",(function(){return t.add()})),m.j41(11,"span",11),m.nrm(12,"system-utility-icon",12)(13,"system-label",13),m.k0s()()(),m.j41(14,"li",9)(15,"a",10),m.bIt("click",(function(){return t.edit()})),m.j41(16,"span",11),m.nrm(17,"system-utility-icon",14)(18,"system-label",15),m.k0s()()(),m.j41(19,"li",9)(20,"a",10),m.bIt("click",(function(){return t.save()})),m.j41(21,"span",11),m.nrm(22,"system-utility-icon",16)(23,"system-label",17),m.k0s()()(),m.j41(24,"li",9)(25,"a",10),m.bIt("click",(function(){return t.delete()})),m.j41(26,"span",11),m.nrm(27,"system-utility-icon",18)(28,"system-label",19),m.k0s()()()()()()),2&e&&(m.Y8G("system-dropdown-trigger-simple",t.modellist.isLoading),m.R7$(15),m.BMQ("aria-disabled",!t.modellist.checkAccess("edit")),m.R7$(5),m.BMQ("aria-disabled",!t.modellist.checkAccess("edit")),m.R7$(5),m.BMQ("aria-disabled",!t.modellist.checkAccess("delete")))},dependencies:[R.t,S.W,E.B,L.C,j.L],encapsulation:2})}return ObjectListViewSettings})();function be(e,t){1&e&&m.nrm(0,"object-listview-filter-panel"),2&e&&m.Y8G("@animatepanel",void 0)}function ye(e,t){1&e&&m.nrm(0,"object-listview-aggregates-panel"),2&e&&m.Y8G("@animatepanel",void 0)}let ve=(()=>{class ObjectListViewHeader{constructor(e,t,s,i,n,l){this.metadata=e,this.configuration=t,this.modellist=s,this.layout=i,this.language=n,this.model=l,this.actionSet={};let o=this.metadata.getComponentConfig("ObjectListViewHeader",this.model.module);this.actionSet=o.actionset}set searchTerm(e){e!=this.modellist.searchTerm&&(this.modellist.searchTerm=e,this.reloadList())}get searchTerm(){return this.modellist.searchTerm}clearSearchTerm(){this.searchTerm=""}reloadList(){this.modellist.getListData()}static#e=this.ɵfac=function(e){return new(e||ObjectListViewHeader)(m.rXU(b.yu),m.rXU(y.i),m.rXU(v.K),m.rXU(k.Z),m.rXU(h.B),m.rXU(g.g))};static#t=this.ɵcmp=m.VBU({type:ObjectListViewHeader,selectors:[["object-listview-header"]],decls:19,vars:9,consts:[["role","banner",1,"slds-page-header","slds-page-header--object-home"],[1,"slds-grid","slds-grid--align-spread","slds-p-bottom--xx-small","slds-wrap"],[1,"slds-grid","slds-grid--vertical-align-center","slds-grow"],[1,"slds-grid","slds-grid--vertical-align-center","slds-no-space"],[3,"module"],[1,"slds-grow",3,"ngModel","placeholder","ngModelChange","onSearchTermClear","onEnterPress"],[1,"slds-grid","slds-grid--vertical-align-center","slds-grow","slds-grid--align-end","slds-p-left--small"],[1,"slds-col","slds-no-flex","slds-grid","slds-align-bottom","slds-p-left--small"],[1,"slds-show--medium"],["system-title","LBL_RELOAD",1,"slds-button","slds-button--neutral","slds-button--icon-border","slds-m-horizontal--xxx-small",3,"click"],[3,"icon"],[1,"slds-m-left--xx-small",3,"actionset"],[4,"ngIf"]],template:function(e,t){1&e&&(m.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),m.nrm(4,"system-icon",4)(5,"object-list-types"),m.k0s(),m.j41(6,"system-input-search-term",5),m.mxI("ngModelChange",(function(e){return m.DH7(t.searchTerm,e)||(t.searchTerm=e),e})),m.bIt("onSearchTermClear",(function(){return t.clearSearchTerm()}))("onEnterPress",(function(){return t.reloadList()})),m.k0s()(),m.j41(7,"div",6),m.nrm(8,"object-listview-header-details"),m.j41(9,"div",7),m.nrm(10,"object-listview-settings",8)(11,"object-listview-header-list-selector"),m.j41(12,"button",9),m.bIt("click",(function(){return t.modellist.reLoadList()})),m.nrm(13,"system-button-icon",10),m.k0s(),m.nrm(14,"object-listview-aggregates-button",8)(15,"object-listview-filter-button",8),m.k0s(),m.nrm(16,"object-action-container",11),m.k0s()()(),m.DNE(17,be,1,1,"object-listview-filter-panel",12)(18,ye,1,1,"object-listview-aggregates-panel",12)),2&e&&(m.R7$(4),m.Y8G("module",t.model.module),m.R7$(2),m.R50("ngModel",t.searchTerm),m.Y8G("placeholder",t.language.getModuleCombinedLabel("LBL_SEARCH",t.model.module)),m.R7$(),m.AVh("slds-m-top--x-small","small"==t.layout.screenwidth),m.R7$(6),m.Y8G("icon",t.modellist.isLoading?"close":"refresh"),m.R7$(3),m.Y8G("actionset",t.actionSet),m.R7$(),m.Y8G("ngIf",t.modellist.displayFilters),m.R7$(),m.Y8G("ngIf",t.modellist.displayAggregates))},dependencies:[i.bT,l.BC,l.vS,R.t,I.J,x.w,j.L,G.f,C.S,F,M.l,T.f,N,V,ge,fe],encapsulation:2,data:{animation:[(0,f.hZ)("animatepanel",[(0,f.kY)(":enter",[(0,f.iF)({right:"-320px",overflow:"hidden"}),(0,f.i0)(".5s",(0,f.iF)({right:"0px"})),(0,f.iF)({overflow:"unset"})]),(0,f.kY)(":leave",[(0,f.iF)({overflow:"hidden"}),(0,f.i0)(".5s",(0,f.iF)({right:"-320px"}))])])]}})}return ObjectListViewHeader})();var _e=s(64914),ke=s(40553),Re=s(60968),Ie=s(66031);const xe=["container"];let je=(()=>{class ObjectListViewContainer{constructor(e,t,s,i,n){this.metadata=e,this.broadcast=t,this.navigation=s,this.navigationtab=i,this.language=n,this.moduleName="",this.initialized=!1,this.componentRefs=[],this.componentSubscriptions=new A.yU,this.componentSubscriptions.add(this.navigationtab.activeRoute$.subscribe((e=>{this.moduleName=e.params.module,this.moduleName||(this.moduleName=e.path.split("/").pop(),this.navigationtab.activeRoute.params.module=this.moduleName),this.navigationtab.setTabInfo({displaymodule:this.moduleName,displayname:this.metadata.getModuleDefs(this.moduleName).module_label}),this.initialized&&this.buildContainer()}))),this.componentSubscriptions.add(this.broadcast.message$.subscribe((e=>{this.handleMessage(e)})))}ngAfterViewInit(){this.initialized=!0,this.buildContainer()}ngOnDestroy(){for(let e of this.componentRefs)e.destroy();this.componentSubscriptions.unsubscribe()}buildContainer(){for(let e of this.componentRefs)e.destroy();this.componentRefs=[];let e=this.metadata.getComponentConfig("ObjectListViewContainer",this.moduleName);for(let t of this.metadata.getComponentSetObjects(e.componentset))this.metadata.addComponent(t.component,this.container).subscribe((e=>{t.componentconfig&&Object.keys(t.componentconfig).length>0?e.instance.componentconfig=t.componentconfig:e.instance.componentconfig=this.metadata.getComponentConfig(t.component,this.moduleName),this.componentRefs.push(e)}))}handleMessage(e){if("applauncher.setrole"===e.messagetype)this.buildContainer()}static#e=this.ɵfac=function(e){return new(e||ObjectListViewContainer)(m.rXU(b.yu),m.rXU(ke.m),m.rXU(Re.L),m.rXU(Ie._),m.rXU(h.B))};static#t=this.ɵcmp=m.VBU({type:ObjectListViewContainer,selectors:[["object-listview-container"]],viewQuery:function(e,t){if(1&e&&m.GBs(xe,7,m.c1b),2&e){let e;m.mGM(e=m.lsd())&&(t.container=e.first)}},decls:2,vars:0,consts:[["container",""]],template:function(e,t){1&e&&m.nrm(0,"div",null,0)},encapsulation:2})}return ObjectListViewContainer})();var Ge=s(69139);const Ce=["container"];let we=(()=>{class ObjectListView{constructor(e,t,s,i,n,l,o){this.navigation=e,this.navigationtab=t,this.activatedRoute=s,this.metadata=i,this.modellist=n,this.model=l,this.userpreferences=o,this.componentRefs=[],this.viewInitialized=!1,this.modellistSubscription=new A.yU,this.initialize()}initialize(){this.model.module=this.navigationtab.activeRoute.params.module,this.modellist.initialize(this.model.module),this.modellistSubscription=this.modellist.listTypeComponent$.subscribe((()=>this.handleListTypeChange()))}handleListTypeChange(){this.viewInitialized&&this.buildContainer()}ngAfterViewInit(){this.viewInitialized=!0,this.buildContainer()}ngOnDestroy(){this.modellistSubscription.unsubscribe()}buildContainer(){if(this.modellist.currentList?.listcomponent){for(let e of this.componentRefs)e.destroy();this.metadata.addComponent(this.modellist.currentList?.listcomponent,this.container).subscribe((e=>{this.componentRefs.push(e)}))}}static#e=this.ɵfac=function(e){return new(e||ObjectListView)(m.rXU(Re.L),m.rXU(Ie._),m.rXU(o.nX),m.rXU(b.yu),m.rXU(v.K),m.rXU(g.g),m.rXU(w.S))};static#t=this.ɵcmp=m.VBU({type:ObjectListView,selectors:[["object-listview"]],viewQuery:function(e,t){if(1&e&&m.GBs(Ce,7,m.c1b),2&e){let e;m.mGM(e=m.lsd())&&(t.container=e.first)}},features:[m.Jv_([v.K,g.g])],decls:4,vars:0,consts:[["system-to-bottom-noscroll",""],["container",""]],template:function(e,t){1&e&&(m.nrm(0,"object-listview-header"),m.j41(1,"div",0),m.nrm(2,"div",null,1),m.k0s())},dependencies:[Ge.p,ve],encapsulation:2})}return ObjectListView})();var Se=s(53394),Ee=s(76115),Le=s(37507),De=s(74406);let Fe=(()=>{class ObjectListHeaderActionsAssignButton{constructor(e,t,s,i,n,l){this.language=e,this.metadata=t,this.model=s,this.modellist=i,this.modal=n,this.injector=l,this.actionconfig={},this.hidden=!1}get disabled(){return!this.metadata.checkModuleAcl(this.model.module,"edit")||this.modellist.getSelectedCount()<1||this.modellist.getSelectedCount()>this.maxAllowed}get selectedCount(){return this.modellist.getSelectedCount()}get maxAllowed(){return this.actionconfig.maxAllowed?parseInt(this.actionconfig.maxAllowed,10):50}execute(){if(!this.disabled){this.modellist.getSelectedItems().filter((e=>!e.acl?.edit)).length>0?this.modal.info(this.language.getLabel("MSG_NO_EDIT_RIGHTS",null,"long"),this.language.getLabel("MSG_NO_EDIT_RIGHTS")):this.modal.openModal("ObjectListHeaderActionsAssignModal",!0,this.injector)}}static#e=this.ɵfac=function(e){return new(e||ObjectListHeaderActionsAssignButton)(m.rXU(h.B),m.rXU(b.yu),m.rXU(g.g),m.rXU(v.K),m.rXU(P.y),m.rXU(m.zZn))};static#t=this.ɵcmp=m.VBU({type:ObjectListHeaderActionsAssignButton,selectors:[["object-list-header-actions-assign-button"]],decls:3,vars:1,consts:[["label","LBL_ASSIGN"]],template:function(e,t){1&e&&(m.j41(0,"span"),m.nrm(1,"system-label",0),m.EFF(2),m.k0s()),2&e&&(m.R7$(2),m.SpI(" (",t.selectedCount,")"))},dependencies:[S.W],encapsulation:2})}return ObjectListHeaderActionsAssignButton})();var Me=s(41731),Te=s(15091),Be=s(40713),$e=s(25028),Oe=s(88418),Xe=s(83524);let Ue=(()=>{class ObjectListHeaderActionsAssignModal{constructor(e,t,s,i,n,l,o){this.view=e,this.broadcast=t,this.backend=s,this.toast=i,this.modal=n,this.model=l,this.modellist=o,this.self={},this.submitting=!1}ngOnInit(){this.model.module=this.modellist.module,this.model.initialize(),this.view.isEditable=!0,this.view.setEditMode()}close(){this.self.destroy()}get canSubmit(){return!this.submitting&&this.model.getField("assigned_user_id")}reassign(){this.submitting=!0;let e=this.modellist.getSelectedIDs(),t={assigned_user_id:this.model.getField("assigned_user_id"),ids:e},s=this.modal.await("updating");this.backend.postRequest(`module/${this.model.module}/massupdate/assign`,{},t).subscribe((e=>{if(e.success){for(let t of e.data)this.broadcast.broadcastMessage("model.save",{id:t.id,module:this.model.module,data:t});this.close()}else this.toast.sendToast("ERROR reassigning records","error"),this.submitting=!1;s.emit(!0)}),(e=>{this.toast.sendToast("ERROR reassigning records","error"),this.submitting=!1,s.emit(!0)}))}static#e=this.ɵfac=function(e){return new(e||ObjectListHeaderActionsAssignModal)(m.rXU(Me.U),m.rXU(ke.m),m.rXU(ee.H),m.rXU(pe.o),m.rXU(P.y),m.rXU(g.g),m.rXU(v.K))};static#t=this.ɵcmp=m.VBU({type:ObjectListHeaderActionsAssignModal,selectors:[["object-list-header-actions-assign-modal"]],features:[m.Jv_([g.g,Me.U])],decls:10,vars:1,consts:[["size","small"],[3,"close"],["label","LBL_ASSIGN"],["system-modal-overvlow-visible","",2,"overflow","visible"],["field","assigned_user_name"],[1,"slds-button","slds-button--neutral",3,"click"],["label","LBL_CANCEL"],[1,"slds-button","slds-button--brand",3,"disabled","click"]],template:function(e,t){1&e&&(m.j41(0,"system-modal",0)(1,"system-modal-header",1),m.bIt("close",(function(){return t.close()})),m.nrm(2,"system-label",2),m.k0s(),m.j41(3,"system-modal-content",3),m.nrm(4,"field-container",4),m.k0s(),m.j41(5,"system-modal-footer")(6,"button",5),m.bIt("click",(function(){return t.close()})),m.nrm(7,"system-label",6),m.k0s(),m.j41(8,"button",7),m.bIt("click",(function(){return t.reassign()})),m.nrm(9,"system-label",2),m.k0s()()()),2&e&&(m.R7$(8),m.Y8G("disabled",!t.canSubmit))},dependencies:[Te.y,S.W,Be.D,$e.I,Oe.Q,Xe.C],encapsulation:2})}return ObjectListHeaderActionsAssignModal})(),Ye=(()=>{class ObjectListHeaderActionsDeleteButton{constructor(e,t,s,i,n,l,o,a){this.language=e,this.metadata=t,this.model=s,this.modellist=i,this.modal=n,this.backend=l,this.broadcast=o,this.toast=a,this.actionconfig={},this.hidden=!0,this.metadata.checkModuleAcl(this.model.module,"delete")&&(this.hidden=!1)}get disabled(){return!this.metadata.checkModuleAcl(this.model.module,"delete")||this.modellist.getSelectedCount()<1||this.modellist.getSelectedCount()>this.maxAllowed}get selectedCount(){return this.modellist.getSelectedCount()}get maxAllowed(){return this.actionconfig.maxAllowed?parseInt(this.actionconfig.maxAllowed,10):100}execute(){if(!this.disabled){this.modellist.getSelectedItems().filter((e=>!e.acl?.delete)).length>0?this.modal.info(this.language.getLabel("MSG_NO_EDIT_RIGHTS",null,"long"),this.language.getLabel("MSG_NO_EDIT_RIGHTS")):this.modal.confirm(this.language.getLabelFormatted("MSG_DELETE_RECORDS",[this.modellist.getSelectedCount()],"long"),this.language.getLabel("MSG_DELETE_RECORDS")).subscribe((e=>{if(e){let e=this.modal.await("... processing ..."),t={ids:this.modellist.getSelectedIDs(),action:"DELETE"};this.backend.patchRequest(`module/${this.model.module}`,{},t).subscribe((t=>{for(let e of this.modellist.getSelectedIDs())this.broadcast.broadcastMessage("model.delete",{id:e,module:this.model.module});e.emit(!0)}),(()=>{this.toast.sendToast("ERROR deleting records","error"),e.emit(!0)}))}}))}}static#e=this.ɵfac=function(e){return new(e||ObjectListHeaderActionsDeleteButton)(m.rXU(h.B),m.rXU(b.yu),m.rXU(g.g),m.rXU(v.K),m.rXU(P.y),m.rXU(ee.H),m.rXU(ke.m),m.rXU(pe.o))};static#t=this.ɵcmp=m.VBU({type:ObjectListHeaderActionsDeleteButton,selectors:[["object-list-header-actions-delete-button"]],decls:3,vars:1,consts:[["label","LBL_DELETE"]],template:function(e,t){1&e&&(m.j41(0,"span"),m.nrm(1,"system-label",0),m.EFF(2),m.k0s()),2&e&&(m.R7$(2),m.SpI(" (",t.selectedCount,")"))},dependencies:[S.W],encapsulation:2})}return ObjectListHeaderActionsDeleteButton})(),Ne=(()=>{class ObjectListHeaderActionsMergeButton{constructor(e,t,s,i,n,l){this.language=e,this.metadata=t,this.model=s,this.modellist=i,this.modal=n,this.injector=l,this.actionconfig={},this.hidden=!1}get disabled(){return!this.metadata.checkModuleAcl(this.model.module,"delete")||this.modellist.getSelectedCount()<1||this.modellist.getSelectedCount()>this.maxAllowed}get maxAllowed(){return this.actionconfig.maxAllowed?parseInt(this.actionconfig.maxAllowed,10):3}get mergeCount(){return this.modellist.getSelectedCount()}execute(){if(!this.disabled){this.modellist.getSelectedItems().filter((e=>e.acl?.delete)).length<this.modellist.getSelectedCount()-1?this.modal.info(this.language.getLabel("MSG_NO_MERGE_DELETE",null,"long"),this.language.getLabel("MSG_NO_MERGE_DELETE")):this.modal.openModal("ObjectMergeModal",!0,this.injector).subscribe((e=>{e.instance.mergemodels=this.modellist.getSelectedItems()}))}}static#e=this.ɵfac=function(e){return new(e||ObjectListHeaderActionsMergeButton)(m.rXU(h.B),m.rXU(b.yu),m.rXU(g.g),m.rXU(v.K),m.rXU(P.y),m.rXU(m.zZn))};static#t=this.ɵcmp=m.VBU({type:ObjectListHeaderActionsMergeButton,selectors:[["object-list-header-actions-merge-button"]],decls:3,vars:1,consts:[["label","LBL_MERGE"]],template:function(e,t){1&e&&(m.j41(0,"span"),m.nrm(1,"system-label",0),m.EFF(2),m.k0s()),2&e&&(m.R7$(2),m.SpI(" (",t.mergeCount,")"))},dependencies:[S.W],encapsulation:2})}return ObjectListHeaderActionsMergeButton})(),Ve=(()=>{class ObjectListHeaderActionsExportCSVButton{constructor(e,t,s,i,n,l){this.language=e,this.metadata=t,this.model=s,this.modellist=i,this.modal=n,this.injector=l,this.hidden=!1}get disabled(){return!this.metadata.checkModuleAcl(this.model.module,"export")||0==this.modellist.getSelectedCount()}get exportcount(){let e=this.modellist.getSelectedCount();return e||this.modellist.listData.totalcount}execute(){this.disabled||this.modal.openModal("ObjectListHeaderActionsExportCSVSelectFields",!0,this.injector)}static#e=this.ɵfac=function(e){return new(e||ObjectListHeaderActionsExportCSVButton)(m.rXU(h.B),m.rXU(b.yu),m.rXU(g.g),m.rXU(v.K),m.rXU(P.y),m.rXU(m.zZn))};static#t=this.ɵcmp=m.VBU({type:ObjectListHeaderActionsExportCSVButton,selectors:[["object-list-header-actions-export-csv-button"]],decls:3,vars:1,consts:[["label","LBL_EXPORT"]],template:function(e,t){1&e&&(m.j41(0,"span"),m.nrm(1,"system-label",0),m.EFF(2),m.k0s()),2&e&&(m.R7$(2),m.SpI(" (",t.exportcount,")"))},dependencies:[S.W],encapsulation:2})}return ObjectListHeaderActionsExportCSVButton})();var Ae=s(45915);function Pe(e,t){if(1&e){const e=m.RV6();m.j41(0,"div",15),m.bIt("click",(function(){const t=m.eBV(e).$implicit,s=m.XpG();return m.Njj(s.selectField("available",t))})),m.j41(1,"span",16),m.nrm(2,"system-label-fieldname",17),m.EFF(3),m.k0s()()}if(2&e){const e=t.$implicit,s=m.XpG();m.Y8G("cdkDragData",e),m.BMQ("aria-selected",s.isSelected("available",e)),m.R7$(2),m.Y8G("module",s.model.module)("field",e),m.R7$(),m.SpI(" (",e,")")}}function ze(e,t){if(1&e){const e=m.RV6();m.j41(0,"div",15),m.bIt("click",(function(){const t=m.eBV(e).$implicit,s=m.XpG();return m.Njj(s.selectField("list",t))})),m.j41(1,"span",16),m.nrm(2,"system-label-fieldname",17),m.EFF(3),m.k0s()()}if(2&e){const e=t.$implicit,s=m.XpG();m.Y8G("cdkDragData",e),m.BMQ("aria-selected",s.isSelected("list",e)),m.R7$(2),m.Y8G("module",s.model.module)("field",e),m.R7$(),m.SpI(" (",e,")")}}const He=e=>[e];let qe=(()=>{class ObjectListHeaderActionsExportCSVSelectFields{constructor(e,t,s,i,n){this.language=e,this.metadata=t,this.model=s,this.modellist=i,this.modal=n,this.multiselect=!0,this.selectedAvailableFields=[],this.selectedListFields=[],this.availableFields=[],this.exportFields=[],this.exportFields=[];for(let e of this.modellist.listfields)this.exportFields.push(e.field);let l=this.metadata.getComponentConfig("ObjectListHeaderActionsExportCSVSelectFields",this.model.module);if(l.enableall){let e=this.metadata.getModuleFields(this.model.module);for(let t in e)this.isExportable(e[t])&&-1==this.exportFields.indexOf(t)&&this.availableFields.push(t)}else if(l.fieldset){let e=this.metadata.getFieldSetFields(l.fieldset);for(let t of e)this.isExportable(t)&&-1==this.exportFields.indexOf(t.field)&&this.availableFields.push(t.field)}else{let e=this.metadata.getComponentConfig("ObjectList",this.modellist.module),t=this.metadata.getFieldSetFields(e.fieldset);for(let e of t)this.isExportable(e)&&-1==this.exportFields.indexOf(e.field)&&this.availableFields.push(e.field)}this.sortAvailableFields()}isExportable(e){return"link"!=e.type}onFieldDrop(e){let t=e.previousContainer.data.splice(e.previousIndex,1);e.container.data.splice(e.currentIndex,0,t[0])}selectField(e,t){switch(e){case"available":!1===this.multiselect?this.selectedAvailableFields=[t]:this.selectedAvailableFields.indexOf(t)>=0?this.selectedAvailableFields.splice(this.selectedAvailableFields.indexOf(t),1):this.selectedAvailableFields.push(t);break;case"list":!1===this.multiselect?this.selectedListFields=[t]:this.selectedListFields.indexOf(t)>=0?this.selectedListFields.splice(this.selectedListFields.indexOf(t),1):this.selectedListFields.push(t)}}isSelected(e,t){switch(e){case"available":return this.selectedAvailableFields.indexOf(t)>=0;case"list":return this.selectedListFields.indexOf(t)>=0}}moveFields(e){switch(e){case"available":this.selectedAvailableFields.forEach((e=>{this.availableFields.some(((t,s)=>{if(e==t)return this.exportFields.push(this.availableFields.splice(s,1)[0]),!0}))})),this.selectedAvailableFields=[];break;case"list":this.selectedListFields.forEach((e=>{this.exportFields.some(((t,s)=>{if(e==t)return this.availableFields.push(this.exportFields.splice(s,1)[0]),!0}))})),this.selectedListFields=[],this.sortAvailableFields()}}sortAvailableFields(){this.availableFields=this.availableFields.sort(((e,t)=>this.language.getFieldDisplayName(this.model.module,e).toLowerCase()>this.language.getFieldDisplayName(this.model.module,t).toLowerCase()?1:-1))}cancel(){this.self.destroy()}export(){this.modal.openModal("SystemLoadingModal").subscribe((e=>{e.instance.messagelabel="LBL_EXPORTING",this.modellist.exportList(this.exportFields).subscribe((t=>{e.instance.self.destroy();let s=document.createElement("a");document.body.appendChild(s),s.href=t,s.download=this.model.module+"_"+(new moment).format("YYYY_MM_DD_HH_mm")+".csv",s.click(),s.remove(),this.self.destroy()}))}))}static#e=this.ɵfac=function(e){return new(e||ObjectListHeaderActionsExportCSVSelectFields)(m.rXU(h.B),m.rXU(b.yu),m.rXU(g.g),m.rXU(v.K),m.rXU(P.y))};static#t=this.ɵcmp=m.VBU({type:ObjectListHeaderActionsExportCSVSelectFields,selectors:[["ng-component"]],decls:22,vars:10,consts:[[3,"close"],["label","LBL_EXPORT"],[1,"slds-grid","slds-p-horizontal--x-small"],[1,"slds-form-element","slds-m-horizontal--small","slds-size--1-of-2"],[1,"slds-form-element__label"],["label","LBL_AVAILABLE_FIELDS"],["cdkDropList","",1,"slds-picklist","slds-picklist__options","slds-size--1-of-1",2,"height","50vh",3,"cdkDropListData","cdkDropListConnectedTo","cdkDropListDropped"],["listOne","cdkDropList"],["cdkDrag","","class","slds-drag--preview slds-picklist__item","role","option",3,"cdkDragData","click",4,"ngFor","ngForOf"],["label","LBL_EXPORT_FIELDS"],["cdkDropList","",1,"slds-picklist","slds-picklist__options","slds-size--1-of-1","cdk-drag",2,"height","50vh",3,"cdkDropListData","cdkDropListConnectedTo","cdkDropListDropped"],["listTwo","cdkDropList"],[1,"slds-button","slds-button--neutral",3,"click"],["label","LBL_CANCEL"],[1,"slds-button","slds-button--brand",3,"click"],["cdkDrag","","role","option",1,"slds-drag--preview","slds-picklist__item",3,"cdkDragData","click"],[1,"slds-truncate"],[3,"module","field"]],template:function(e,t){if(1&e&&(m.j41(0,"system-modal")(1,"system-modal-header",0),m.bIt("close",(function(){return t.cancel()})),m.nrm(2,"system-label",1),m.k0s(),m.j41(3,"system-modal-content")(4,"div",2)(5,"div",3)(6,"span",4),m.nrm(7,"system-label",5),m.k0s(),m.j41(8,"div",6,7),m.bIt("cdkDropListDropped",(function(e){return t.onFieldDrop(e)})),m.DNE(10,Pe,4,5,"div",8),m.k0s()(),m.j41(11,"div",3)(12,"span",4),m.nrm(13,"system-label",9),m.k0s(),m.j41(14,"div",10,11),m.bIt("cdkDropListDropped",(function(e){return t.onFieldDrop(e)})),m.DNE(16,ze,4,5,"div",8),m.k0s()()()(),m.j41(17,"system-modal-footer")(18,"button",12),m.bIt("click",(function(){return t.cancel()})),m.nrm(19,"system-label",13),m.k0s(),m.j41(20,"button",14),m.bIt("click",(function(){return t.export()})),m.nrm(21,"system-label",1),m.k0s()()()),2&e){const e=m.sdS(9),s=m.sdS(15);m.R7$(8),m.Y8G("cdkDropListData",t.availableFields)("cdkDropListConnectedTo",m.eq3(6,He,s)),m.R7$(2),m.Y8G("ngForOf",t.availableFields),m.R7$(4),m.Y8G("cdkDropListData",t.exportFields)("cdkDropListConnectedTo",m.eq3(8,He,e)),m.R7$(2),m.Y8G("ngForOf",t.exportFields)}},dependencies:[i.Sq,n.O7,n.T1,S.W,Ae.P,Be.D,$e.I,Oe.Q,Xe.C],encapsulation:2})}return ObjectListHeaderActionsExportCSVSelectFields})(),Je=(()=>{class ObjectListHeaderActionsExportTargetlistButton{constructor(e,t,s,i,n,l){this.language=e,this.metadata=t,this.model=s,this.modellist=i,this.modal=n,this.injector=l}get hidden(){if(!this.metadata.checkModuleAcl("ProspectLists","create"))return!0;let e=!1,t=this.metadata.getModuleFields(this.modellist.module);for(let s in t){let i=t[s];if("link"==i.type&&"ProspectLists"==i.module){e=!0;break}}return!e||!this.metadata.checkModuleAcl(this.model.module,"export")}get disabled(){return 0==this.modellist.getSelectedCount()}get exportcount(){let e=this.modellist.getSelectedCount();return e||this.modellist.listData.totalcount}execute(){this.modal.openModal("ObjectListHeaderActionsExportTargetlistModal",!0,this.injector)}static#e=this.ɵfac=function(e){return new(e||ObjectListHeaderActionsExportTargetlistButton)(m.rXU(h.B),m.rXU(b.yu),m.rXU(g.g),m.rXU(v.K),m.rXU(P.y),m.rXU(m.zZn))};static#t=this.ɵcmp=m.VBU({type:ObjectListHeaderActionsExportTargetlistButton,selectors:[["object-list-header-actions-export-targetlist-button"]],decls:3,vars:1,consts:[["label","LBL_EXPORT_PROSPECTLIST"]],template:function(e,t){1&e&&(m.j41(0,"span"),m.nrm(1,"system-label",0),m.EFF(2),m.k0s()),2&e&&(m.R7$(2),m.SpI(" (",t.exportcount,")"))},dependencies:[S.W],encapsulation:2})}return ObjectListHeaderActionsExportTargetlistButton})(),We=(()=>{class ObjectListHeaderActionsExportTargetlistModal{constructor(e,t,s,i,n,l,o){this.language=e,this.router=t,this.metadata=s,this.backend=i,this.toast=n,this.modal=l,this.modellist=o,this.self={},this.targetlistname=""}close(){this.self.destroy()}get itemcount(){let e=this.modellist.getSelectedCount();return e||this.modellist.listData.totalcount}export(){this.modal.openModal("SystemLoadingModal").subscribe((e=>{e.instance.messagelabel="LBL_EXPORTING";let t=this.modellist.getSelectedIDs(),s={listtype:this.modellist.currentList.id,targetlistname:this.targetlistname,owner:"owner"==this.modellist.currentList.id,module:this.modellist.module,modulefilter:this.modellist.modulefilter,searchterm:this.modellist.searchTerm,aggregates:this.modellist.selectedAggregates,listid:this.modellist.currentList.id,ids:t};this.backend.postRequest("module/ProspectLists/exportfromlist",{},s).subscribe((t=>{e.instance.self.destroy(),"success"==t.status?(this.router.navigate(["/module/ProspectLists/"+t.id]),this.close()):this.toast.sendToast(t.msg,"error")}))}))}static#e=this.ɵfac=function(e){return new(e||ObjectListHeaderActionsExportTargetlistModal)(m.rXU(h.B),m.rXU(o.Ix),m.rXU(b.yu),m.rXU(ee.H),m.rXU(pe.o),m.rXU(P.y),m.rXU(v.K))};static#t=this.ɵcmp=m.VBU({type:ObjectListHeaderActionsExportTargetlistModal,selectors:[["object-list-header-actions-export-targetlist-modal"]],features:[m.Jv_([g.g])],decls:19,vars:3,consts:[[3,"close"],["label","LBL_EXPORT_PROSPECTLIST"],["label","LBL_RECORDS"],[1,"slds-form-element"],[1,"slds-form-element__label"],["title","required",1,"slds-required"],["label","LBL_PROSPECTLIST"],[1,"slds-form-element__control"],["type","text",1,"slds-input",3,"ngModel","ngModelChange"],[1,"slds-button","slds-button--neutral",3,"click"],["label","LBL_CANCEL"],[1,"slds-button","slds-button--brand",3,"disabled","click"],["label","LBL_EXPORT"]],template:function(e,t){1&e&&(m.j41(0,"system-modal")(1,"system-modal-header",0),m.bIt("close",(function(){return t.close()})),m.nrm(2,"system-label",1),m.EFF(3),m.nrm(4,"system-label",2),m.EFF(5,")"),m.k0s(),m.j41(6,"system-modal-content")(7,"div",3)(8,"label",4)(9,"abbr",5),m.EFF(10,"*"),m.k0s(),m.nrm(11,"system-label",6),m.k0s(),m.j41(12,"div",7)(13,"input",8),m.mxI("ngModelChange",(function(e){return m.DH7(t.targetlistname,e)||(t.targetlistname=e),e})),m.k0s()()()(),m.j41(14,"system-modal-footer")(15,"button",9),m.bIt("click",(function(){return t.close()})),m.nrm(16,"system-label",10),m.k0s(),m.j41(17,"button",11),m.bIt("click",(function(){return t.export()})),m.nrm(18,"system-label",12),m.k0s()()()),2&e&&(m.R7$(3),m.SpI(" (",t.itemcount," "),m.R7$(10),m.R50("ngModel",t.targetlistname),m.R7$(4),m.Y8G("disabled",!t.targetlistname))},dependencies:[l.me,l.BC,l.vS,S.W,Be.D,$e.I,Oe.Q,Xe.C],encapsulation:2})}return ObjectListHeaderActionsExportTargetlistModal})(),Ke=(()=>{class ObjectListHeaderActionsSelectAllButton{constructor(e,t,s,i,n){this.language=e,this.metadata=t,this.model=s,this.modellist=i,this.modal=n,this.hidden=!1}get disabled(){return 0==this.modellist.listData.list.length}execute(){this.modellist.setAllSelected()}static#e=this.ɵfac=function(e){return new(e||ObjectListHeaderActionsSelectAllButton)(m.rXU(h.B),m.rXU(b.yu),m.rXU(g.g),m.rXU(v.K),m.rXU(P.y))};static#t=this.ɵcmp=m.VBU({type:ObjectListHeaderActionsSelectAllButton,selectors:[["object-list-header-actions-select-all-button"]],decls:2,vars:0,consts:[[1,"slds-truncate"],["label","LBL_SELECT_ALL"]],template:function(e,t){1&e&&(m.j41(0,"span",0),m.nrm(1,"system-label",1),m.k0s())},dependencies:[S.W],encapsulation:2})}return ObjectListHeaderActionsSelectAllButton})(),Qe=(()=>{class ObjectListHeaderActionsUnselectAllButton{constructor(e,t,s,i,n){this.language=e,this.metadata=t,this.model=s,this.modellist=i,this.modal=n,this.disabled=!1}get hasSelection(){return this.modellist.getSelectedCount()>0}get hidden(){return!this.hasSelection}execute(){this.modellist.setAllUnselected()}static#e=this.ɵfac=function(e){return new(e||ObjectListHeaderActionsUnselectAllButton)(m.rXU(h.B),m.rXU(b.yu),m.rXU(g.g),m.rXU(v.K),m.rXU(P.y))};static#t=this.ɵcmp=m.VBU({type:ObjectListHeaderActionsUnselectAllButton,selectors:[["object-list-header-actions-unselect-all-button"]],decls:2,vars:0,consts:[[1,"slds-truncate"],["label","LBL_UNSELECT_ALL"]],template:function(e,t){1&e&&(m.j41(0,"span",0),m.nrm(1,"system-label",1),m.k0s())},dependencies:[S.W],encapsulation:2})}return ObjectListHeaderActionsUnselectAllButton})(),Ze=(()=>{class ObjectListHeaderActionsSelectRangeButton{constructor(e,t,s,i){this.model=e,this.modellist=t,this.modal=s,this.injector=i,this.hidden=!1}get disabled(){return 0==this.modellist.listData.list.length}execute(){this.modal.openModal("ObjectListHeaderActionsSelectRangeModal",!0,this.injector)}static#e=this.ɵfac=function(e){return new(e||ObjectListHeaderActionsSelectRangeButton)(m.rXU(g.g),m.rXU(v.K),m.rXU(P.y),m.rXU(m.zZn))};static#t=this.ɵcmp=m.VBU({type:ObjectListHeaderActionsSelectRangeButton,selectors:[["object-list-header-actions-select-range-button"]],decls:2,vars:0,consts:[[1,"slds-truncate"],["label","LBL_SELECT_RANGE"]],template:function(e,t){1&e&&(m.j41(0,"span",0),m.nrm(1,"system-label",1),m.k0s())},dependencies:[S.W],encapsulation:2})}return ObjectListHeaderActionsSelectRangeButton})(),et=(()=>{class ObjectListHeaderActionsSelectRangeModal{constructor(e,t){this.model=e,this.modellist=t,this.from=1}ngOnInit(){this.to=this.modellist.listData.list.length}close(){this.self.destroy()}get canSelect(){return!(!this.from||!this.to)&&(!(this.from<1||this.to<1)&&(!(this.to<=this.from)&&!(this.to>this.modellist.listData.list.length)))}select(){this.canSelect&&(this.modellist.setRangeSelected(this.from,this.to),this.close())}static#e=this.ɵfac=function(e){return new(e||ObjectListHeaderActionsSelectRangeModal)(m.rXU(g.g),m.rXU(v.K))};static#t=this.ɵcmp=m.VBU({type:ObjectListHeaderActionsSelectRangeModal,selectors:[["object-list-header-actions-select-range-modal"]],decls:18,vars:3,consts:[["size","small"],[3,"close"],["label","LBL_SELECT_RANGE"],[1,"slds-grid","slds-grid--vertical-align-center","slds-gutters_direct-small"],[1,"slds-col","slds-size--1-of-2","slds-grid","slds-grid--vertical-align-center"],[1,"slds-size--1-of-3","slds-text-align--center"],["label","LBL_FROM"],["type","number",1,"slds-input","slds-size--2-of-3",3,"ngModel","ngModelChange"],["label","LBL_TO"],[1,"slds-button","slds-button--neutral",3,"click"],["label","LBL_CLOSE"],[1,"slds-button","slds-button--brand",3,"disabled","click"],["label","LBL_SELECT"]],template:function(e,t){1&e&&(m.j41(0,"system-modal",0)(1,"system-modal-header",1),m.bIt("close",(function(){return t.close()})),m.nrm(2,"system-label",2),m.k0s(),m.j41(3,"system-modal-content")(4,"div",3)(5,"div",4)(6,"div",5),m.nrm(7,"system-label",6),m.k0s(),m.j41(8,"input",7),m.mxI("ngModelChange",(function(e){return m.DH7(t.from,e)||(t.from=e),e})),m.k0s()(),m.j41(9,"div",4)(10,"div",5),m.nrm(11,"system-label",8),m.k0s(),m.j41(12,"input",7),m.mxI("ngModelChange",(function(e){return m.DH7(t.to,e)||(t.to=e),e})),m.k0s()()()(),m.j41(13,"system-modal-footer")(14,"button",9),m.bIt("click",(function(){return t.close()})),m.nrm(15,"system-label",10),m.k0s(),m.j41(16,"button",11),m.bIt("click",(function(){return t.select()})),m.nrm(17,"system-label",12),m.k0s()()()),2&e&&(m.R7$(8),m.R50("ngModel",t.from),m.R7$(4),m.R50("ngModel",t.to),m.R7$(4),m.Y8G("disabled",!t.canSelect))},dependencies:[l.me,l.Q0,l.BC,l.vS,S.W,Be.D,$e.I,Oe.Q,Xe.C],encapsulation:2})}return ObjectListHeaderActionsSelectRangeModal})();var tt=s(94861);const st=["fieldcontainer"];let it=(()=>{class ObjectListItemField{constructor(e,t,s){this.model=e,this.language=t,this.metadata=s,this.field=""}ngAfterViewInit(){this.buildContainer()}buildContainer(){this.metadata.addComponent("fieldGeneric",this.fieldcontainer).subscribe((e=>{e.instance.fieldname=this.field}))}static#e=this.ɵfac=function(e){return new(e||ObjectListItemField)(m.rXU(g.g),m.rXU(h.B),m.rXU(b.yu))};static#t=this.ɵcmp=m.VBU({type:ObjectListItemField,selectors:[["object-list-item--field"]],viewQuery:function(e,t){if(1&e&&m.GBs(st,7,m.c1b),2&e){let e;m.mGM(e=m.lsd())&&(t.fieldcontainer=e.first)}},inputs:{field:"field"},decls:3,vars:1,consts:[[1,"slds-truncate",3,"title"],["fieldcontainer",""]],template:function(e,t){1&e&&(m.j41(0,"div",0),m.nrm(1,"div",null,1),m.k0s()),2&e&&m.FS9("title",t.field)},encapsulation:2})}return ObjectListItemField})();var nt=s(23855),lt=s(76073),ot=s(7766);let at=(()=>{class ObjectActionsetMenuContainerEdit{constructor(e,t){this.language=e,this.model=t}doAction(){this.model.checkAccess("edit")&&this.model.edit(!0)}static#e=this.ɵfac=function(e){return new(e||ObjectActionsetMenuContainerEdit)(m.rXU(h.B),m.rXU(g.g))};static#t=this.ɵcmp=m.VBU({type:ObjectActionsetMenuContainerEdit,selectors:[["object-actionset-menu-container-edit"]],decls:4,vars:0,consts:[["role","presentation",1,"slds-dropdown__item",3,"click"],["href","javascript:void(0);","role","menuitem"],[1,"slds-truncate"],["label","LBL_EDIT"]],template:function(e,t){1&e&&(m.j41(0,"li",0),m.bIt("click",(function(){return t.doAction()})),m.j41(1,"a",1)(2,"span",2),m.nrm(3,"system-label",3),m.k0s()()())},dependencies:[S.W],encapsulation:2})}return ObjectActionsetMenuContainerEdit})();var rt=s(13562);let dt=(()=>{class ObjectActionsetMenuContainerDelete{constructor(e,t,s){this.language=e,this.model=t,this.helper=s}doAction(){this.model.checkAccess("delete")&&this.helper.confirm(this.language.getLabel("LBL_DELETE_RECORD"),this.language.getLabel("MSG_DELETE_CONFIRM")).subscribe((e=>{e&&this.model.delete()}))}static#e=this.ɵfac=function(e){return new(e||ObjectActionsetMenuContainerDelete)(m.rXU(h.B),m.rXU(g.g),m.rXU(rt.d))};static#t=this.ɵcmp=m.VBU({type:ObjectActionsetMenuContainerDelete,selectors:[["ng-component"]],decls:4,vars:0,consts:[["role","presentation",1,"slds-dropdown__item",3,"click"],["href","javascript:void(0);","role","menuitem"],[1,"slds-truncate"],["label","LBL_DELETE"]],template:function(e,t){1&e&&(m.j41(0,"li",0),m.bIt("click",(function(){return t.doAction()})),m.j41(1,"a",1)(2,"span",2),m.nrm(3,"system-label",3),m.k0s()()())},dependencies:[S.W],encapsulation:2})}return ObjectActionsetMenuContainerDelete})();function ct(e,t){1&e&&m.nrm(0,"system-button-icon",2)}function ut(e,t){1&e&&(m.j41(0,"span"),m.nrm(1,"system-label",3),m.k0s())}let mt=(()=>{class ObjectActionEditButton{constructor(e,t,s){this.language=e,this.metadata=t,this.model=s,this.displayasicon=!1}get hidden(){return this.model.isEditing}get disabled(){return!this.model.checkAccess("edit")||(this.model.isEditing||this.model.isSaving)}execute(){this.model.edit()}static#e=this.ɵfac=function(e){return new(e||ObjectActionEditButton)(m.rXU(h.B),m.rXU(b.yu),m.rXU(g.g))};static#t=this.ɵcmp=m.VBU({type:ObjectActionEditButton,selectors:[["object-action-edit-button"]],decls:2,vars:2,consts:[["icon","edit",4,"ngIf"],[4,"ngIf"],["icon","edit"],["label","LBL_EDIT"]],template:function(e,t){1&e&&m.DNE(0,ct,1,0,"system-button-icon",0)(1,ut,2,0,"span",1),2&e&&(m.Y8G("ngIf",t.displayasicon),m.R7$(),m.Y8G("ngIf",!t.displayasicon))},dependencies:[i.bT,R.t,S.W],encapsulation:2})}return ObjectActionEditButton})(),ht=(()=>{class ObjectActionEditRelatedButton{constructor(e,t,s,i){this.language=e,this.metadata=t,this.parent=s,this.model=i,this.disabled=!0,this.actionconfig={},this.subscriptions=new A.yU}ngOnInit(){this.handleDisabled(this.parent.isEditing?"edit":"display"),this.subscriptions.add(this.parent.mode$.subscribe((e=>{this.handleDisabled(e)}))),this.subscriptions.add(this.parent.data$.subscribe((e=>{this.model.module=this.actionconfig.module,this.model.id=this.parent.getFieldValue(this.actionconfig.parent_field),this.handleDisabled(this.parent.isEditing?"edit":"display")})))}get hidden(){return!this.model.id}execute(){this.model.edit(!0)}ngOnDestroy(){this.subscriptions.unsubscribe()}handleDisabled(e){this.parent.checkAccess("edit")?this.disabled="edit"==e:this.disabled=!0}static#e=this.ɵfac=function(e){return new(e||ObjectActionEditRelatedButton)(m.rXU(h.B),m.rXU(b.yu),m.rXU(g.g,4),m.rXU(g.g))};static#t=this.ɵcmp=m.VBU({type:ObjectActionEditRelatedButton,selectors:[["object-action-edit-related-button"]],features:[m.Jv_([g.g])],decls:2,vars:0,consts:[["label","LBL_EDIT_RELATED"]],template:function(e,t){1&e&&(m.j41(0,"span"),m.nrm(1,"system-label",0),m.k0s())},dependencies:[S.W],encapsulation:2})}return ObjectActionEditRelatedButton})();function gt(e,t){1&e&&m.nrm(0,"system-button-icon",2)}function pt(e,t){1&e&&(m.j41(0,"span"),m.nrm(1,"system-label",3),m.k0s())}let ft=(()=>{class ObjectActionDeleteButton{constructor(e,t,s,i,n,l,o){this.metadata=e,this.model=t,this.navigationtab=s,this.router=i,this.modal=n,this.toast=l,this.injector=o,this.displayasicon=!1,this.actionconfig={}}get disabled(){return!this.canDelete}get canDelete(){try{return this.model.checkAccess("delete")&&!this.model.isEditing}catch(e){return!1}}execute(){this.modal.confirm("MSG_DELETE_RECORD","MSG_DELETE_RECORD").subscribe((e=>{e&&this.delete()}))}delete(){this.model.delete().subscribe((e=>{this.completeAction()}),(()=>{this.toast.sendToast("LBL_ERROR_DELETING_RECORD","error")}))}completeAction(){1!=this.actionconfig.noredirectoncomplete&&(this.navigationtab&&"main"!=this.navigationtab.tabid?this.navigationtab.closeTab():this.router.navigate(["/module/"+this.model.module]))}static#e=this.ɵfac=function(e){return new(e||ObjectActionDeleteButton)(m.rXU(b.yu),m.rXU(g.g),m.rXU(Ie._,8),m.rXU(o.Ix),m.rXU(P.y),m.rXU(pe.o),m.rXU(m.zZn))};static#t=this.ɵcmp=m.VBU({type:ObjectActionDeleteButton,selectors:[["object-action-delete-button"]],decls:2,vars:2,consts:[["icon","delete",4,"ngIf"],[4,"ngIf"],["icon","delete"],["label","LBL_DELETE"]],template:function(e,t){1&e&&m.DNE(0,gt,1,0,"system-button-icon",0)(1,pt,2,0,"span",1),2&e&&(m.Y8G("ngIf",t.displayasicon),m.R7$(),m.Y8G("ngIf",!t.displayasicon))},dependencies:[i.bT,R.t,S.W],encapsulation:2})}return ObjectActionDeleteButton})(),bt=(()=>{class ObjectActionAuditlogButton{constructor(e,t,s,i,n){this.language=e,this.metadata=t,this.model=s,this.modal=i,this.ViewContainerRef=n,this.disabled=!0,this.hidden=!0}ngOnInit(){this.metadata.getModuleDefs(this.model.module).audited&&(this.disabled=!1,this.hidden=!1)}execute(){this.modal.openModal("ObjectActionAuditlogModal",!0,this.ViewContainerRef.injector)}static#e=this.ɵfac=function(e){return new(e||ObjectActionAuditlogButton)(m.rXU(h.B),m.rXU(b.yu),m.rXU(g.g),m.rXU(P.y),m.rXU(m.c1b))};static#t=this.ɵcmp=m.VBU({type:ObjectActionAuditlogButton,selectors:[["object-action-auditlog-button"]],decls:2,vars:0,consts:[["label","LBL_AUDITLOG"]],template:function(e,t){1&e&&(m.j41(0,"span"),m.nrm(1,"system-label",0),m.k0s())},dependencies:[S.W],encapsulation:2})}return ObjectActionAuditlogButton})();function yt(e,t){1&e&&m.nrm(0,"system-button-icon",2)}function vt(e,t){1&e&&(m.j41(0,"span"),m.nrm(1,"system-label",3),m.k0s())}let _t=(()=>{class ObjectActionOpenButton{constructor(e,t,s,i,n,l,o){this.language=e,this.metadata=t,this.model=s,this.router=i,this.helper=n,this.view=l,this.navigationtab=o,this.displayasicon=!1}get disabled(){return!this.model.checkAccess("detail")||this.view.isEditMode()}execute(){this.model.goDetail(this.navigationtab.tabid)}static#e=this.ɵfac=function(e){return new(e||ObjectActionOpenButton)(m.rXU(h.B),m.rXU(b.yu),m.rXU(g.g),m.rXU(o.Ix),m.rXU(rt.d),m.rXU(Me.U),m.rXU(Ie._))};static#t=this.ɵcmp=m.VBU({type:ObjectActionOpenButton,selectors:[["object-action-open-button"]],features:[m.Jv_([rt.d])],decls:2,vars:2,consts:[["icon","open",4,"ngIf"],[4,"ngIf"],["icon","open"],["label","LBL_OPEN"]],template:function(e,t){1&e&&m.DNE(0,yt,1,0,"system-button-icon",0)(1,vt,2,0,"span",1),2&e&&(m.Y8G("ngIf",t.displayasicon),m.R7$(),m.Y8G("ngIf",!t.displayasicon))},dependencies:[i.bT,R.t,S.W],encapsulation:2})}return ObjectActionOpenButton})(),kt=(()=>{class ObjectActionBooleanToggleButton{constructor(e,t,s,i){this.language=e,this.model=t,this.viewContainerRef=s,this.toast=i}execute(){if(this.actionconfig.fieldtotoggle)if(this.model.getField(this.actionconfig.fieldtotoggle)&&!this.actionconfig.onlysettoone)this.model.setField(this.actionconfig.fieldtotoggle,0),this.model.save();else{if(1==this.model.getField(this.actionconfig.fieldtotoggle))return;this.model.setField(this.actionconfig.fieldtotoggle,1),this.model.save()}}static#e=this.ɵfac=function(e){return new(e||ObjectActionBooleanToggleButton)(m.rXU(h.B),m.rXU(g.g),m.rXU(m.c1b),m.rXU(pe.o))};static#t=this.ɵcmp=m.VBU({type:ObjectActionBooleanToggleButton,selectors:[["object-action-boolean-toggle-button"]],decls:2,vars:0,consts:[["label","LBL_TOGGLE"]],template:function(e,t){1&e&&(m.j41(0,"span"),m.nrm(1,"system-label",0),m.k0s())},dependencies:[S.W],encapsulation:2})}return ObjectActionBooleanToggleButton})();var Rt=s(70315);function It(e,t){if(1&e&&m.nrm(0,"system-button-icon",2),2&e){const e=m.XpG();m.Y8G("title",e.language.getLabel("LBL_CANCEL"))}}function xt(e,t){1&e&&(m.j41(0,"span"),m.nrm(1,"system-label",3),m.k0s())}let jt=(()=>{class ObjectActionCancelButton{constructor(e,t,s,i,n,l,o){this.language=e,this.metadata=t,this.model=s,this.router=i,this.helper=n,this.view=l,this.modalwindow=o,this.actionemitter=new m.bkB,this.displayasicon=!1}get disabled(){return this.model.isSaving}get hidden(){return!this.model.isEditing}execute(){this.model.cancelEdit(),this.view.setViewMode(),this.actionemitter.emit("cancel"),this.modalwindow&&this.modalwindow.self.destroy()}static#e=this.ɵfac=function(e){return new(e||ObjectActionCancelButton)(m.rXU(h.B),m.rXU(b.yu),m.rXU(g.g),m.rXU(o.Ix),m.rXU(rt.d),m.rXU(Me.U),m.rXU(Rt.w,8))};static#t=this.ɵcmp=m.VBU({type:ObjectActionCancelButton,selectors:[["object-action-cancel-button"]],outputs:{actionemitter:"actionemitter"},features:[m.Jv_([rt.d])],decls:2,vars:2,consts:[["icon","close",3,"title",4,"ngIf"],[4,"ngIf"],["icon","close",3,"title"],["label","LBL_CANCEL"]],template:function(e,t){1&e&&m.DNE(0,It,1,1,"system-button-icon",0)(1,xt,2,0,"span",1),2&e&&(m.Y8G("ngIf",t.displayasicon),m.R7$(),m.Y8G("ngIf",!t.displayasicon))},dependencies:[i.bT,R.t,S.W],encapsulation:2})}return ObjectActionCancelButton})(),Gt=(()=>{class ObjectActionModalSaveButton{constructor(e,t,s,i,n){this.language=e,this.metadata=t,this.model=s,this.modal=i,this.modalwindow=n,this.actionemitter=new m.bkB,this.actionconfig={}}get displayLabel(){return this.actionconfig.label?this.actionconfig.label:this.actionconfig.gorelated?"LBL_SAVE_AND_GO_TO_RECORD":"LBL_SAVE"}execute(){this.model.validate()&&(this.model.isNew&&this.metadata.getModuleDuplicatecheck(this.model.module)?this.modal.openModal("SystemLoadingModal").subscribe((e=>{e.instance.messagelabel="LBL_CHECKING_DUPLICATES",this.model.duplicateCheck(!0).subscribe((t=>{e.instance.self.destroy(),t.count>0?(this.model.duplicates=t.records,this.model.duplicatecount=t.count,this.modal.confirm(this.language.getLabel("MSG_DUPLICATES_FOUND",null,"long"),this.language.getLabel("MSG_DUPLICATES_FOUND")).subscribe((e=>{e&&this.saveModel()}))):this.saveModel()}))})):this.saveModel())}saveModel(){this.modal.openModal("SystemLoadingModal").subscribe((e=>{e.instance.messagelabel="LBL_SAVING_DATA",this.model.save(!0).subscribe((t=>{this.model.endEdit(),t&&this.actionconfig.gorelated&&this.actionemitter.emit("savegodetail"),e.instance.self.destroy(),this.actionemitter.emit("save")}),(t=>{e.instance.self.destroy()}))}))}static#e=this.ɵfac=function(e){return new(e||ObjectActionModalSaveButton)(m.rXU(h.B),m.rXU(b.yu),m.rXU(g.g),m.rXU(P.y),m.rXU(Rt.w,8))};static#t=this.ɵcmp=m.VBU({type:ObjectActionModalSaveButton,selectors:[["object-action-modal-save-button"]],outputs:{actionemitter:"actionemitter"},features:[m.Jv_([rt.d])],decls:2,vars:1,consts:[[3,"label"]],template:function(e,t){1&e&&(m.j41(0,"span"),m.nrm(1,"system-label",0),m.k0s()),2&e&&(m.R7$(),m.Y8G("label",t.displayLabel))},dependencies:[S.W],encapsulation:2})}return ObjectActionModalSaveButton})();var Ct=s(91107);function wt(e,t){1&e&&m.nrm(0,"system-button-icon",2)}function St(e,t){1&e&&(m.j41(0,"span"),m.nrm(1,"system-label",3),m.k0s())}let Et=(()=>{class ObjectActionRemoveButton{constructor(e,t,s,i,n,l){this.language=e,this.metadata=t,this.model=s,this.view=i,this.relatedmodels=n,this.modalservice=l,this.actionemitter=new m.bkB,this.disabled=!0,this.displayasicon=!1,this.subscriptions=new A.yU,this.subscriptions.add(this.model.mode$.subscribe((e=>{this.handleDisabled(e)}))),this.subscriptions.add(this.model.data$.subscribe((e=>{this.handleDisabled(this.model.isEditing?"edit":"display")})))}get canDelete(){try{let e=this.model.checkAccess("deleterelated");return e||(e=this.model.checkAccess("delete")),e}catch(e){return!1}}ngAfterViewInit(){this.handleDisabled(this.model.isEditing?"edit":"display")}execute(){this.modalservice.confirm(this.language.getLabel("QST_REMOVE_ENTRY"),this.language.getLabel("QST_REMOVE_ENTRY",null,"short")).subscribe((e=>{e&&this.relatedmodels.deleteItem(this.model.id)}))}handleDisabled(e){this.canDelete?this.disabled="edit"==e:this.disabled=!0}ngOnDestroy(){this.subscriptions.unsubscribe()}static#e=this.ɵfac=function(e){return new(e||ObjectActionRemoveButton)(m.rXU(h.B),m.rXU(b.yu),m.rXU(g.g),m.rXU(Me.U),m.rXU(Ct.K),m.rXU(P.y))};static#t=this.ɵcmp=m.VBU({type:ObjectActionRemoveButton,selectors:[["object-action-remove-button"]],outputs:{actionemitter:"actionemitter"},decls:2,vars:2,consts:[["icon","remove_link",4,"ngIf"],[4,"ngIf"],["icon","remove_link"],["label","LBL_REMOVE"]],template:function(e,t){1&e&&m.DNE(0,wt,1,0,"system-button-icon",0)(1,St,2,0,"span",1),2&e&&(m.Y8G("ngIf",t.displayasicon),m.R7$(),m.Y8G("ngIf",!t.displayasicon))},dependencies:[i.bT,R.t,S.W],encapsulation:2})}return ObjectActionRemoveButton})();var Lt=s(16435),Dt=s(48717);function Ft(e,t){1&e&&m.nrm(0,"system-spinner",9)}function Mt(e,t){if(1&e&&(m.j41(0,"tr")(1,"td",21)(2,"div",13),m.EFF(3),m.k0s()(),m.j41(4,"td",22)(5,"div",23),m.EFF(6),m.k0s()(),m.j41(7,"td",21)(8,"div",23),m.EFF(9),m.k0s()()()),2&e){const e=t.$implicit,s=m.XpG(3);m.R7$(3),m.SpI("",s.language.getFieldDisplayName(s.model.module,e.field_name)," "),m.R7$(3),m.JRh(e.before_value_string),m.R7$(3),m.JRh(e.after_value_string)}}function Tt(e,t){if(1&e&&(m.qex(0),m.j41(1,"tr")(2,"td",18)(3,"div",19),m.EFF(4),m.nrm(5,"system-display-datetime",20),m.k0s()()(),m.DNE(6,Mt,10,3,"tr",17),m.bVm()),2&e){const e=t.$implicit;m.R7$(4),m.SpI(" ",e.user_name," / "),m.R7$(),m.Y8G("date",e.date_created),m.R7$(),m.Y8G("ngForOf",e.audit_log)}}function Bt(e,t){if(1&e&&(m.j41(0,"table",10)(1,"thead")(2,"tr",11)(3,"th",12)(4,"div",13),m.nrm(5,"system-label",14),m.k0s()(),m.j41(6,"th",12)(7,"div",13),m.nrm(8,"system-label",15),m.k0s()(),m.j41(9,"th",12)(10,"div",13),m.nrm(11,"system-label",16),m.k0s()()()(),m.j41(12,"tbody"),m.DNE(13,Tt,7,3,"ng-container",17),m.k0s()()),2&e){const e=m.XpG();m.R7$(13),m.Y8G("ngForOf",e.auditLog)}}function $t(e,t){1&e&&(m.j41(0,"div",24),m.nrm(1,"system-label",25),m.EFF(2,". "),m.k0s())}let Ot=(()=>{class ObjectActionAuditlogModal{constructor(e,t,s){this.language=e,this.metadata=t,this.model=s,this.self=null,this.auditLog=[],this.auditTransactions=[],this.loading=!0,this.moduleFields=[],this._userfilter="",this._fieldfilter=""}get userfilter(){return this._userfilter}set userfilter(e){this._userfilter=e,this.loadAuditLog()}get fieldfilter(){return this._fieldfilter}set fieldfilter(e){this._fieldfilter=e,this.loadAuditLog()}ngOnInit(){this.loadAuditLog();for(let e in this.metadata.getModuleFields(this.model.module))this.moduleFields.push({name:e,display:this.language.getFieldDisplayName(this.model.module,e)});this.moduleFields.sort(((e,t)=>e.display.toLowerCase()>t.display.toLowerCase()?1:-1))}hideAuditLog(){this.self.destroy()}loadAuditLog(){this.model&&(this.auditLog=[],this.auditTransactions=[],this.loading=!0,this.model.getAuditLog({user:this._userfilter,field:this._fieldfilter,grouped:!0}).subscribe((e=>{this.auditLog=e;for(let e of this.auditLog)-1==this.auditTransactions.indexOf(e.transaction_id)&&this.auditTransactions.push({transaction_id:e.transaction_id,created_by:e.created_by,user_name:e.user_name,date_created:e.date_created});this.loading=!1}),(e=>{this.loading=!1})))}static#e=this.ɵfac=function(e){return new(e||ObjectActionAuditlogModal)(m.rXU(h.B),m.rXU(b.yu),m.rXU(g.g,8))};static#t=this.ɵcmp=m.VBU({type:ObjectActionAuditlogModal,selectors:[["object-action-auditlog-modal"]],decls:10,vars:3,consts:[["size","large"],[3,"close"],["label","LBL_LOGGED_CHANGES"],["margin","none"],["class","slds-p-around--medium",4,"ngIf"],["class","slds-table slds-table--bordered slds-table--cell-buffer",4,"ngIf"],["class","slds-text-heading--small slds-p-around--medium",4,"ngIf"],[1,"slds-button","slds-button--brand",3,"click"],["label","LBL_CLOSE"],[1,"slds-p-around--medium"],[1,"slds-table","slds-table--bordered","slds-table--cell-buffer"],[1,"slds-text-title--caps"],["scope","col"],[1,"slds-truncate"],["label","LBL_FIELD"],["label","LBL_BEFOREVALUE"],["label","LBL_AFTERVALUE"],[4,"ngFor","ngForOf"],["colspan","3",1,"slds-theme--shade"],[1,"slds-text-heading--label"],[3,"date"],["scope","row"],["scope","row",1,"slds-cell-wrap"],[1,"slds-line-clamp"],[1,"slds-text-heading--small","slds-p-around--medium"],["label","MSG_NOAUDITRECORDS_FOUND"]],template:function(e,t){1&e&&(m.j41(0,"system-modal",0)(1,"system-modal-header",1),m.bIt("close",(function(){return t.hideAuditLog()})),m.nrm(2,"system-label",2),m.k0s(),m.j41(3,"system-modal-content",3),m.DNE(4,Ft,1,0,"system-spinner",4)(5,Bt,14,1,"table",5)(6,$t,3,0,"div",6),m.k0s(),m.j41(7,"system-modal-footer")(8,"button",7),m.bIt("click",(function(){return t.hideAuditLog()})),m.nrm(9,"system-label",8),m.k0s()()()),2&e&&(m.R7$(4),m.Y8G("ngIf",t.loading),m.R7$(),m.Y8G("ngIf",!t.loading),m.R7$(),m.Y8G("ngIf",!t.loading&&0===t.auditLog.length))},dependencies:[i.Sq,i.bT,Lt.f,S.W,Be.D,$e.I,Oe.Q,Xe.C,Dt.P],encapsulation:2})}return ObjectActionAuditlogModal})();function Xt(e,t){1&e&&m.nrm(0,"system-button-icon",2)}function Ut(e,t){1&e&&(m.j41(0,"span"),m.nrm(1,"system-label",3),m.k0s())}let Yt=(()=>{class ObjectActionNewButton{constructor(e,t,s,i,n){this.language=e,this.metadata=t,this.model=s,this.parentmodel=i,this.injector=n,this.disabled=!0,this.displayasicon=!1}execute(){this.actionconfig.newtab?this.addNewTab():(this.model.module=this.parentmodel.module,this.model.id=void 0,this.model.initialize(),this.model.addModel("",this.parentmodel))}ngOnInit(){this.parentmodel.module&&this.metadata.checkModuleAcl(this.parentmodel.module,"create")&&(this.disabled=!1)}addNewTab(){this.navigation=this.injector.get(Re.L),this.model.id=this.model.generateGuid(),this.model.module=this.parentmodel.module,this.navigation.addObjectTab({path:"module/:module/create/:id",params:{module:this.model.module,id:this.model.id},id:this.model.generateGuid(),active:!0,pinned:!1,enablesubtabs:!1,url:`module/${this.model.module}/create/${this.model.id}`,tabdata:{module:this.model.module,id:this.model.id}})}static#e=this.ɵfac=function(e){return new(e||ObjectActionNewButton)(m.rXU(h.B),m.rXU(b.yu),m.rXU(g.g),m.rXU(g.g,4),m.rXU(m.zZn))};static#t=this.ɵcmp=m.VBU({type:ObjectActionNewButton,selectors:[["object-action-new-button"]],features:[m.Jv_([g.g])],decls:2,vars:2,consts:[["icon","add",4,"ngIf"],[4,"ngIf"],["icon","add"],["label","LBL_NEW"]],template:function(e,t){1&e&&m.DNE(0,Xt,1,0,"system-button-icon",0)(1,Ut,2,0,"span",1),2&e&&(m.Y8G("ngIf",t.displayasicon),m.R7$(),m.Y8G("ngIf",!t.displayasicon))},dependencies:[i.bT,R.t,S.W],encapsulation:2})}return ObjectActionNewButton})();var Nt=s(29994);let Vt=(()=>{class ObjectActionDuplicateButton{constructor(e,t,s,i,n){this.parent=e,this.language=t,this.metadata=s,this.model=i,this.session=n}get hidden(){return this.parent.isEditing}get disabled(){return!this.metadata.checkModuleAcl(this.parent.module,"create")||(this.parent.isEditing||this.parent.isSaving)}execute(){let e=this.model.utils.generateGuid();this.model.module=this.parent.module,this.model.initializeModel();let t=JSON.parse(JSON.stringify(this.parent.data));t.id=this.model.id,t.assigned_user_id=this.session.authData.userId,t.assigned_user_name=this.session.authData.userName,t.modified_by_id=this.session.authData.userId,t.modified_by_name=this.session.authData.userName,t.date_entered=new Date,t.date_modified=new Date,this.model.setData(t,!1);for(let t in this.parent.fields)if("link"==this.parent.fields[t].type&&this.model.data[t]&&this.model.data[t].beans)for(let s in this.model.data[t].beans){for(let i in this.model.data[t].beans[s])this.model.data[t].beans[s][i]==this.parent.id&&(this.model.data[t].beans[s][i]=e,this.model.data[t].beans[s].id=this.model.utils.generateGuid()),this.model.data[t].beans[s][i].beans&&(this.model.data[t].beans[s][i].beans={});this.model.data[t].beans[s].id!=s&&(this.model.data[t].beans[this.model.data[t].beans[s].id]=this.model.data[t].beans[s],delete this.model.data[t].beans[s])}this.model.duplicate=!0,this.model.templateId=this.parent.id,this.model.edit()}static#e=this.ɵfac=function(e){return new(e||ObjectActionDuplicateButton)(m.rXU(g.g,4),m.rXU(h.B),m.rXU(b.yu),m.rXU(g.g),m.rXU(Nt.d))};static#t=this.ɵcmp=m.VBU({type:ObjectActionDuplicateButton,selectors:[["object-action-duplicate-button"]],features:[m.Jv_([g.g])],decls:2,vars:0,consts:[["label","LBL_DUPLICATE"]],template:function(e,t){1&e&&(m.j41(0,"span"),m.nrm(1,"system-label",0),m.k0s())},dependencies:[S.W],encapsulation:2})}return ObjectActionDuplicateButton})();function At(e,t){if(1&e&&m.nrm(0,"system-button-icon",2),2&e){const e=m.XpG();m.Y8G("title",e.language.getLabel(e.label))}}function Pt(e,t){if(1&e&&(m.j41(0,"span"),m.nrm(1,"system-label",3),m.k0s()),2&e){const e=m.XpG();m.R7$(),m.Y8G("label",e.label)}}let zt=(()=>{class ObjectActionSaveSendButton{constructor(e,t,s,i){this.language=e,this.metadata=t,this.model=s,this.view=i,this.actionemitter=new m.bkB,this.displayasicon=!1,this.actionconfig={}}get disabled(){return this.model.isSaving}get hidden(){return!this.model.isEditing}get label(){return this.actionconfig.label&&""!==this.actionconfig.label?this.actionconfig.label:"LBL_SEND"}get toastLabel(){return this.actionconfig.toastlabel&&""!==this.actionconfig.toastlabel?this.actionconfig.toastlabel:"LBL_DATA_SENT"}execute(){this.model.isSaving||this.model.validate()&&this.model.saveAndSend(!0,this.toastLabel).subscribe((e=>{this.model.endEdit(),this.view.setViewMode(),this.actionemitter.emit("save")}))}static#e=this.ɵfac=function(e){return new(e||ObjectActionSaveSendButton)(m.rXU(h.B),m.rXU(b.yu),m.rXU(g.g),m.rXU(Me.U))};static#t=this.ɵcmp=m.VBU({type:ObjectActionSaveSendButton,selectors:[["object-action-save-send-button"]],outputs:{actionemitter:"actionemitter"},decls:2,vars:2,consts:[["icon","email",3,"title",4,"ngIf"],[4,"ngIf"],["icon","email",3,"title"],[3,"label"]],template:function(e,t){1&e&&m.DNE(0,At,1,1,"system-button-icon",0)(1,Pt,2,1,"span",1),2&e&&(m.Y8G("ngIf",t.displayasicon),m.R7$(),m.Y8G("ngIf",!t.displayasicon))},dependencies:[i.bT,R.t,S.W],encapsulation:2})}return ObjectActionSaveSendButton})();function Ht(e,t){1&e&&m.nrm(0,"system-button-icon",2)}function qt(e,t){1&e&&(m.j41(0,"span"),m.nrm(1,"system-label",3),m.k0s())}let Jt=(()=>{class ObjectActionSaveButton{constructor(e,t,s,i){this.language=e,this.metadata=t,this.model=s,this.view=i,this.actionemitter=new m.bkB,this.displayasicon=!1}get disabled(){return this.model.isSaving}get hidden(){return!this.model.isEditing}execute(){this.model.isSaving||this.model.validate()&&this.model.save(!0).subscribe((e=>{this.model.endEdit(),this.view.setViewMode(),this.actionemitter.emit("save")}))}static#e=this.ɵfac=function(e){return new(e||ObjectActionSaveButton)(m.rXU(h.B),m.rXU(b.yu),m.rXU(g.g),m.rXU(Me.U))};static#t=this.ɵcmp=m.VBU({type:ObjectActionSaveButton,selectors:[["object-action-save-button"]],outputs:{actionemitter:"actionemitter"},decls:2,vars:2,consts:[["system-title","LBL_SAVE","icon","save",4,"ngIf"],[4,"ngIf"],["system-title","LBL_SAVE","icon","save"],["label","LBL_SAVE"]],template:function(e,t){1&e&&m.DNE(0,Ht,1,0,"system-button-icon",0)(1,qt,2,0,"span",1),2&e&&(m.Y8G("ngIf",t.displayasicon),m.R7$(),m.Y8G("ngIf",!t.displayasicon))},dependencies:[i.bT,R.t,S.W,j.L],encapsulation:2})}return ObjectActionSaveButton})(),Wt=(()=>{class ObjectActionSaveRelatedButton{constructor(e,t,s,i,n){this.language=e,this.metadata=t,this.model=s,this.view=i,this.relatedmodels=n,this.actionemitter=new m.bkB,this.module="",this.saving=!1}get hidden(){return!this.view.isEditMode()}execute(){if(!this.saving)if(this.model.validate()){this.saving=!0;let e=this.model.getDirtyFields();e.date_modified=this.model.getField("date_modified"),e.id=this.model.id,this.actionemitter.emit(!0),this.view.setViewMode(),this.relatedmodels.setItem(e).subscribe((e=>{this.model.endEdit(),this.saving=!1}),(e=>{this.view.setEditMode(),this.saving=!1}))}else this.saving=!1,this.model.edit().subscribe((e=>{e?this.execute():(this.model.cancelEdit(),this.view.setViewMode())}))}static#e=this.ɵfac=function(e){return new(e||ObjectActionSaveRelatedButton)(m.rXU(h.B),m.rXU(b.yu),m.rXU(g.g),m.rXU(Me.U),m.rXU(Ct.K))};static#t=this.ɵcmp=m.VBU({type:ObjectActionSaveRelatedButton,selectors:[["object-action-save-related-button"]],outputs:{actionemitter:"actionemitter"},decls:2,vars:0,consts:[["label","LBL_SAVE"]],template:function(e,t){1&e&&(m.j41(0,"span"),m.nrm(1,"system-label",0),m.k0s())},dependencies:[S.W],encapsulation:2})}return ObjectActionSaveRelatedButton})();function Kt(e,t){1&e&&m.nrm(0,"system-button-icon",2)}function Qt(e,t){1&e&&(m.j41(0,"span"),m.nrm(1,"system-label",3),m.k0s())}let Zt=(()=>{class ObjectActionNewrelatedButton{constructor(e,t,s,i,n,l){this.parent=e,this.language=t,this.metadata=s,this.model=i,this.relatedmodels=n,this.injector=l,this.disabled=!0,this.displayasicon=!1}ngOnInit(){this.model.module=this.relatedmodels.relatedModule,this.model.module&&this.metadata.checkModuleAcl(this.model.module,"create")&&(!this.actionconfig?.required_model_state||this.model.checkModelState(this.actionconfig.required_model_state))&&(this.disabled=!1)}execute(){this.parent.getField("id")||this.parent.setField("id",this.parent.id),this.actionconfig.newtab?this.addNewTab():(this.model.id="",this.model.addModel("",this.parent).subscribe((e=>{0!=e&&this.relatedmodels.addItems([e])})))}addNewTab(){this.navigation=this.injector.get(Re.L),this.navigationtab=this.injector.get(Ie._),this.model.id=this.model.generateGuid(),this.model.initialize(this.parent),this.navigation.addObjectTab({path:"module/:module/create/:id",params:{module:this.model.module,id:this.model.id},parentid:this.navigationtab?this.navigationtab.tabid:void 0,id:this.model.generateGuid(),active:!0,pinned:!1,enablesubtabs:!1,url:`module/${this.model.module}/create/${this.model.id}`,tabdata:{module:this.model.module,id:this.model.id,data:this.model.data}})}static#e=this.ɵfac=function(e){return new(e||ObjectActionNewrelatedButton)(m.rXU(g.g,4),m.rXU(h.B),m.rXU(b.yu),m.rXU(g.g),m.rXU(Ct.K),m.rXU(m.zZn))};static#t=this.ɵcmp=m.VBU({type:ObjectActionNewrelatedButton,selectors:[["object-action-newrelated-button"]],features:[m.Jv_([g.g])],decls:2,vars:2,consts:[["icon","add",4,"ngIf"],[4,"ngIf"],["icon","add"],["label","LBL_NEW"]],template:function(e,t){1&e&&m.DNE(0,Kt,1,0,"system-button-icon",0)(1,Qt,2,0,"span",1),2&e&&(m.Y8G("ngIf",t.displayasicon),m.R7$(),m.Y8G("ngIf",!t.displayasicon))},dependencies:[i.bT,R.t,S.W],encapsulation:2})}return ObjectActionNewrelatedButton})(),es=(()=>{class ObjectActionNewCopyRuleBeanButtonModelHelper{constructor(e){this.model=e}static#e=this.ɵfac=function(e){return new(e||ObjectActionNewCopyRuleBeanButtonModelHelper)(m.rXU(g.g))};static#t=this.ɵdir=m.FsC({type:ObjectActionNewCopyRuleBeanButtonModelHelper,selectors:[["object-action-new-copy-rule-bean-button-model-helper"]],features:[m.Jv_([g.g])]})}return ObjectActionNewCopyRuleBeanButtonModelHelper})(),ts=(()=>{class ObjectActionNewCopyRuleBeanButton{constructor(e,t,s,i){this.language=e,this.metadata=t,this.model=s,this.relatedmodels=i,this.parent={},this.disabled=!0,this.actionconfig={}}ngOnInit(){this.actionconfig.module&&this.metadata.checkModuleAcl(this.actionconfig.module,"create")&&(this.disabled=!1)}execute(){this.child.model.module=this.actionconfig.module;let e=[this.parent];this.relatedmodels&&this.relatedmodels.model&&e.push(this.relatedmodels.model),this.child.model.addModel("",e)}static#e=this.ɵfac=function(e){return new(e||ObjectActionNewCopyRuleBeanButton)(m.rXU(h.B),m.rXU(b.yu),m.rXU(g.g),m.rXU(Ct.K,8))};static#t=this.ɵcmp=m.VBU({type:ObjectActionNewCopyRuleBeanButton,selectors:[["object-action-new-copy-rule-bean-button"]],viewQuery:function(e,t){if(1&e&&m.GBs(es,7),2&e){let e;m.mGM(e=m.lsd())&&(t.child=e.first)}},decls:3,vars:1,consts:[[3,"label"]],template:function(e,t){1&e&&(m.j41(0,"span"),m.nrm(1,"system-label",0),m.k0s(),m.nrm(2,"object-action-new-copy-rule-bean-button-model-helper")),2&e&&(m.R7$(),m.Y8G("label",t.actionconfig.label))},dependencies:[S.W,es],encapsulation:2})}return ObjectActionNewCopyRuleBeanButton})();var ss=s(18396),is=s(1626);function ns(e,t){if(1&e){const e=m.RV6();m.j41(0,"system-input-date-picker",12),m.bIt("datePicked",(function(t){m.eBV(e);const s=m.XpG();return m.Njj(s.setReminder(t))})),m.k0s()}if(2&e){const e=m.XpG();m.Y8G("setDate",e.reminderDate)}}const ls=e=>({"slds-is-open":e}),os=(e,t)=>({"slds-not-selected":e,"slds-is-selected":t});let as=(()=>{class ObjectReminderButton{constructor(e,t,s,i,n,l,o){this.language=e,this.metadata=t,this.model=s,this.renderer=i,this.elementRef=n,this.reminder=l,this.userpreferences=o,this.showDialog=!1,this.reminderDate=new moment,this.hasReminder=!1,this.subscriptions=new A.yU,this.subscriptions.add(this.reminder.changed$.subscribe((e=>{this.loadReminder()}))),this.loadReminder()}ngOnDestroy(){this.subscriptions.unsubscribe()}loadReminder(){let e=this.reminder.getReminder(this.model.module,this.model.id);!1!==e?(this.hasReminder=!0,this.reminderDate=new moment(e)):this.hasReminder=!1}toggleDatePicker(){this.showDialog=!this.showDialog,this.showDialog?this.clickListener=this.renderer.listen("document","click",(e=>this.onClick(e))):this.clickListener&&this.clickListener()}onClick(e){this.elementRef.nativeElement.contains(e.target)||(this.showDialog=!1)}get isEditing(){return this.model.isEditing}clearReminder(){this.reminder.deleteReminder(this.model.module,this.model.id),this.hasReminder=!1}setReminder(e){this.showDialog=!1,this.hasReminder=!0,this.reminderDate=new moment(e),this.reminder.setReminder(this.model,this.reminderDate)}getReminderDate(){return this.reminderDate.format(this.userpreferences.getDateFormat())}static#e=this.ɵfac=function(e){return new(e||ObjectReminderButton)(m.rXU(h.B),m.rXU(b.yu),m.rXU(g.g),m.rXU(m.sFG),m.rXU(m.aKT),m.rXU(ss.z),m.rXU(w.S))};static#t=this.ɵcmp=m.VBU({type:ObjectReminderButton,selectors:[["object-reminder-button"]],decls:14,vars:10,consts:[[1,"slds-form-element","slds-dropdown-trigger","slds-dropdown-trigger_click",3,"ngClass"],[1,"slds-button","slds-button_stateful","slds-button--neutral","slds-m-horizontal--xxx-small",3,"ngClass"],[1,"slds-text-not-selected",3,"click"],["icon","add",1,"slds-p-right--xx-small"],["label","LBL_REMINDER"],[1,"slds-text-selected"],["icon","check",1,"slds-p-right--xx-small"],[1,"slds-text-selected-focus"],["icon","close",1,"slds-p-right--xx-small",3,"click"],[3,"click"],["role","dialog",1,"slds-datepicker","slds-dropdown","slds-dropdown_right"],[3,"setDate","datePicked",4,"ngIf"],[3,"setDate","datePicked"]],template:function(e,t){1&e&&(m.j41(0,"div",0)(1,"a",1)(2,"span",2),m.bIt("click",(function(){return t.toggleDatePicker()})),m.nrm(3,"system-button-icon",3)(4,"system-label",4),m.k0s(),m.j41(5,"span",5),m.nrm(6,"system-button-icon",6),m.EFF(7),m.k0s(),m.j41(8,"span",7)(9,"system-button-icon",8),m.bIt("click",(function(){return t.clearReminder()})),m.k0s(),m.j41(10,"span",9),m.bIt("click",(function(){return t.toggleDatePicker()})),m.EFF(11),m.k0s()()(),m.j41(12,"div",10),m.DNE(13,ns,1,1,"system-input-date-picker",11),m.k0s()()),2&e&&(m.Y8G("ngClass",m.eq3(5,ls,t.showDialog)),m.R7$(),m.Y8G("ngClass",m.l_i(7,os,!t.hasReminder,t.hasReminder)),m.R7$(6),m.SpI("",t.getReminderDate()," "),m.R7$(4),m.JRh(t.getReminderDate()),m.R7$(2),m.Y8G("ngIf",t.showDialog))},dependencies:[i.YU,i.bT,R.t,is.Q,S.W],encapsulation:2})}return ObjectReminderButton})();var rs=s(74045),ds=s(73455);const cs=(e,t)=>({"slds-is-selected":e,"slds-not-selected":t});let us=(()=>{class ObjectSubscriptionButton{constructor(e,t,s){this.subscriptionService=e,this.metadata=t,this.model=s,this.inProcess=!1}toggleSubscribe(){this.inProcess=!0,this.subscriptionService.hasSubscription(this.model.id)?this.subscriptionService.unsubscribeBean(this.model.id,this.model.module).subscribe((e=>this.inProcess=!1),(e=>this.inProcess=!1)):this.subscriptionService.subscribeBean(this.model).subscribe((e=>this.inProcess=!1),(e=>this.inProcess=!1))}static#e=this.ɵfac=function(e){return new(e||ObjectSubscriptionButton)(m.rXU(ds.g),m.rXU(b.yu),m.rXU(g.g))};static#t=this.ɵcmp=m.VBU({type:ObjectSubscriptionButton,selectors:[["object-subscription-button"]],decls:10,vars:5,consts:[[1,"slds-button","slds-button_neutral","slds-button_stateful",2,"text-transform","capitalize",3,"disabled","ngClass","click"],[1,"slds-text-not-selected"],["icon","add",1,"slds-p-right--xx-small"],["label","LBL_FOLLOW"],[1,"slds-text-selected"],["icon","check",1,"slds-p-right--xx-small"],["label","LBL_FOLLOWING"],[1,"slds-text-selected-focus"],["icon","close",1,"slds-p-right--xx-small"],["label","LBL_UNFOLLOW"]],template:function(e,t){1&e&&(m.j41(0,"button",0),m.bIt("click",(function(){return t.toggleSubscribe()})),m.j41(1,"span",1),m.nrm(2,"system-button-icon",2)(3,"system-label",3),m.k0s(),m.j41(4,"span",4),m.nrm(5,"system-button-icon",5)(6,"system-label",6),m.k0s(),m.j41(7,"span",7),m.nrm(8,"system-button-icon",8)(9,"system-label",9),m.k0s()()),2&e&&m.Y8G("disabled",t.inProcess)("ngClass",m.l_i(2,cs,t.subscriptionService.hasSubscription(t.model.id),!t.subscriptionService.hasSubscription(t.model.id)))},dependencies:[i.YU,R.t,S.W],encapsulation:2})}return ObjectSubscriptionButton})();var ms=s(48842),hs=s(81332);let gs=(()=>{class ObjectActionBeanToMailButton{constructor(e,t,s,i){this.language=e,this.modal=t,this.model=s,this.viewContainerRef=i}execute(){this.modal.openModal("ObjectActionMailModal",!0,this.viewContainerRef.injector).subscribe((e=>e.instance.parent=this.model))}static#e=this.ɵfac=function(e){return new(e||ObjectActionBeanToMailButton)(m.rXU(h.B),m.rXU(P.y),m.rXU(g.g),m.rXU(m.c1b))};static#t=this.ɵcmp=m.VBU({type:ObjectActionBeanToMailButton,selectors:[["object-action-beantomail-button"]],decls:2,vars:0,consts:[["label","LBL_EMAIL"]],template:function(e,t){1&e&&(m.j41(0,"span"),m.nrm(1,"system-label",0),m.k0s())},dependencies:[S.W],encapsulation:2})}return ObjectActionBeanToMailButton})();var ps=s(74547),fs=s(4921),bs=s(30012),ys=s(67469),vs=s(80256);let _s=(()=>{class ObjectFileActionMenu{constructor(e,t,s,i,n,l,o,a,r,d,c){this.broadcast=e,this.modelattachments=t,this.language=s,this.elementRef=i,this.modalservice=n,this.injector=l,this.router=o,this.navigationtab=a,this.toast=r,this.modal=d,this.metadata=c,this.currentUser=this.metadata.session.authData.user.id}get uploading(){return this.file.hasOwnProperty("uploadprogress")}getDropdownLocationClass(){let e=this.elementRef.nativeElement.getBoundingClientRect();if(window.innerHeight-e.bottom<100)return"slds-dropdown--bottom"}get hidden(){return!this.metadata.checkModuleAcl("Application","manageattachments")&&this.currentUser!=this.file.user_id}deleteFile(){this.modalservice.confirm(this.language.getLabel("QST_DELETE_FILE"),this.language.getLabel("QST_DELETE_FILE",null,"short")).subscribe((e=>{e&&this.modelattachments.deleteAttachment(this.file.id)}))}downloadFile(){this.modelattachments.downloadAttachment(this.file.id,this.file.name)}edit(){this.modalservice.openModal("SpiceAttachmentsEditModal",!0,this.injector).subscribe((e=>{e.instance.attachment=this.file,e.instance.inputData={text:this.file.text,display_name:this.file.display_name,category_ids:this.file.category_ids?this.file.category_ids.split(","):[]}}))}previewFile(){if(this.uploading)this.toast.sendToast("upload still in progress","info");else if(this.file.file_mime_type){let e=this.file.file_mime_type.toLowerCase().split("/");switch(e[0].trim()){case"image":if("svg+xml"===e[1])this.modal.openModal("SystemObjectPreviewModal").subscribe((e=>{e.instance.name=this.file.filename,e.instance.type=this.file.file_mime_type.toLowerCase(),this.modelattachments.getAttachment(this.file.id).subscribe({next:t=>{e.instance.data=atob(t)},error:t=>{e.instance.loadingerror=!0}})}));else this.modal.openModal("SystemImagePreviewModal").subscribe((e=>{e.instance.imgname=this.file.filename,e.instance.imgtype=this.file.file_mime_type.toLowerCase(),this.modelattachments.getAttachment(this.file.id).subscribe({next:t=>{e.instance.imgsrc="data:"+this.file.file_mime_type.toLowerCase()+";base64,"+t},error:t=>{e.instance.loadingerror=!0}})}));break;case"text":case"audio":case"video":this.modal.openModal("SystemObjectPreviewModal").subscribe((e=>{e.instance.name=this.file.filename,e.instance.type=this.file.file_mime_type.toLowerCase(),this.modelattachments.getAttachment(this.file.id).subscribe({next:t=>{e.instance.data=atob(t)},error:t=>{e.instance.loadingerror=!0}})}));break;case"application":if("pdf"===e[1])this.modal.openModal("SystemObjectPreviewModal").subscribe((e=>{e.instance.name=this.file.filename,e.instance.type=this.file.file_mime_type.toLowerCase(),this.modelattachments.getAttachment(this.file.id).subscribe({next:t=>{e.instance.data=atob(t)},error:t=>{e.instance.loadingerror=!0}})}));else{if("msg"===this.file.filename.split(".").splice(-1,1)[0].toLowerCase())this.modal.openModal("EmailPreviewModal",!0,this.injector).subscribe((e=>{e.instance.name=this.file.filename,e.instance.type=this.file.file_mime_type.toLowerCase(),e.instance.file=this.file}));else this.downloadFile()}break;default:this.downloadFile()}}}static#e=this.ɵfac=function(e){return new(e||ObjectFileActionMenu)(m.rXU(ke.m),m.rXU(ps.S),m.rXU(h.B),m.rXU(m.aKT),m.rXU(P.y),m.rXU(m.zZn),m.rXU(o.Ix),m.rXU(Ie._),m.rXU(pe.o),m.rXU(P.y),m.rXU(b.yu))};static#t=this.ɵcmp=m.VBU({type:ObjectFileActionMenu,selectors:[["object-file-action-menu"]],inputs:{file:"file"},decls:21,vars:3,consts:[["system-dropdown-trigger","",1,"slds-dropdown-trigger","slds-dropdown-trigger--click"],["aria-haspopup","true",1,"slds-button","slds-button--icon-border-filled","slds-button--icon-x-small"],[3,"icon"],[1,"slds-dropdown","slds-dropdown--right",3,"ngClass"],["role","menu",1,"slds-dropdown__list"],["role","presentation",1,"slds-dropdown__item",3,"click"],["href","javascript:void(0);","role","menuitem","tabindex","0"],[1,"slds-truncate"],["label","LBL_EDIT"],["href","javascript:void(0);","role","menuitem","tabindex","-1"],["label","LBL_DOWNLOAD"],["role","presentation",1,"slds-dropdown__item",3,"hidden","click"],["href","javascript:void(0);","role","menuitem","tabindex","-2"],["label","LBL_DELETE"],["href","javascript:void(0);","role","menuitem","tabindex","-3"],["label","LBL_PREVIEW"]],template:function(e,t){1&e&&(m.j41(0,"div",0)(1,"button",1),m.nrm(2,"system-button-icon",2),m.k0s(),m.j41(3,"div",3)(4,"ul",4)(5,"li",5),m.bIt("click",(function(){return t.edit()})),m.j41(6,"a",6)(7,"span",7),m.nrm(8,"system-label",8),m.k0s()()(),m.j41(9,"li",5),m.bIt("click",(function(){return t.downloadFile()})),m.j41(10,"a",9)(11,"span",7),m.nrm(12,"system-label",10),m.k0s()()(),m.j41(13,"li",11),m.bIt("click",(function(){return t.deleteFile()})),m.j41(14,"a",12)(15,"span",7),m.nrm(16,"system-label",13),m.k0s()()(),m.j41(17,"li",5),m.bIt("click",(function(){return t.previewFile()})),m.j41(18,"a",14)(19,"span",7),m.nrm(20,"system-label",15),m.k0s()()()()()()),2&e&&(m.R7$(2),m.Y8G("icon","down"),m.R7$(),m.Y8G("ngClass",t.getDropdownLocationClass()),m.R7$(10),m.Y8G("hidden",t.hidden))},dependencies:[i.YU,R.t,S.W,vs.q],encapsulation:2})}return ObjectFileActionMenu})();const ks=["object-related-card-file",""];function Rs(e,t){if(1&e&&m.nrm(0,"img",15),2&e){const e=m.XpG(2);m.Y8G("src","data:image/jpg;base64,"+e.file.thumbnail,m.B4B)}}function Is(e,t){if(1&e){const e=m.RV6();m.j41(0,"div",16),m.bIt("click",(function(){m.eBV(e);const t=m.XpG(2);return m.Njj(t.openInTab())})),m.EFF(1),m.k0s()}if(2&e){const e=m.XpG(2);m.Y8G("system-title",e.file.display_name),m.R7$(),m.SpI(" ",e.file.display_name," ")}}function xs(e,t){if(1&e){const e=m.RV6();m.j41(0,"div",16),m.bIt("click",(function(){m.eBV(e);const t=m.XpG(2);return m.Njj(t.openInTab())})),m.EFF(1),m.k0s()}if(2&e){const e=m.XpG(2);m.Y8G("system-title",e.file.filename),m.R7$(),m.SpI(" ",e.file.filename," ")}}function js(e,t){if(1&e&&(m.j41(0,"div",21),m.EFF(1),m.k0s()),2&e){const e=m.XpG(3);m.Y8G("system-title",e.file.filename),m.R7$(),m.SpI(" ",e.file.filename," ")}}function Gs(e,t){if(1&e&&(m.j41(0,"div",17)(1,"ul",18)(2,"li",19),m.EFF(3),m.k0s(),m.j41(4,"li",19),m.EFF(5),m.k0s()(),m.DNE(6,js,2,2,"div",20),m.k0s()),2&e){const e=m.XpG(2);m.R7$(2),m.Y8G("system-title",e.filedate),m.R7$(),m.JRh(e.filedate),m.R7$(),m.Y8G("system-title",e.humanFileSize),m.R7$(),m.JRh(e.humanFileSize),m.R7$(),m.Y8G("ngIf",!!e.file.display_name)}}function Cs(e,t){if(1&e&&(m.j41(0,"div",22)(1,"div",23)(2,"span",24)(3,"span",25),m.EFF(4,"Progress: 25%"),m.k0s()()(),m.j41(5,"div",26),m.EFF(6),m.k0s()()),2&e){const e=m.XpG(2);m.R7$(2),m.Y8G("ngStyle",e.progressbarstyle),m.R7$(4),m.SpI(" ",e.file.uploadprogress," % ")}}function ws(e,t){if(1&e&&(m.j41(0,"div",27),m.nrm(1,"object-file-action-menu",28),m.k0s()),2&e){const e=m.XpG(2);m.R7$(),m.Y8G("file",e.file)}}function Ss(e,t){if(1&e){const e=m.RV6();m.j41(0,"div",2)(1,"figure",3)(2,"a",4),m.bIt("click",(function(){m.eBV(e);const t=m.XpG();return m.Njj(t.openInTab())})),m.DNE(3,Rs,1,1,"img",5),m.k0s(),m.j41(4,"figcaption",6)(5,"div",7)(6,"div",8),m.nrm(7,"system-file-icon",9),m.k0s(),m.j41(8,"div",10),m.DNE(9,Is,2,2,"div",11)(10,xs,2,2,"div",11)(11,Gs,7,5,"div",12)(12,Cs,7,2,"div",13),m.k0s()()()(),m.DNE(13,ws,2,1,"div",14),m.k0s()}if(2&e){const e=m.XpG();m.R7$(3),m.Y8G("ngIf",e.file.thumbnail),m.R7$(4),m.Y8G("filename",e.file.filename)("filemimetype",e.file.file_mime_type),m.R7$(2),m.Y8G("ngIf",!!e.file.display_name),m.R7$(),m.Y8G("ngIf",!e.file.display_name),m.R7$(),m.Y8G("ngIf",!e.uploading),m.R7$(),m.Y8G("ngIf",e.uploading),m.R7$(),m.Y8G("ngIf",!e.uploading)}}function Es(e,t){if(1&e&&m.nrm(0,"system-file-icon",9),2&e){const e=m.XpG(2);m.Y8G("filename",e.file.filename)("filemimetype",e.file.file_mime_type)}}function Ls(e,t){if(1&e&&(m.j41(0,"div"),m.nrm(1,"img",15),m.k0s()),2&e){const e=m.XpG(2);m.R7$(),m.Y8G("src","data:image/jpg;base64,"+e.file.thumbnail,m.B4B)}}function Ds(e,t){if(1&e&&(m.j41(0,"a",39),m.EFF(1),m.k0s()),2&e){const e=m.XpG(2);m.R7$(),m.SpI(" ",e.file.display_name," ")}}function Fs(e,t){if(1&e&&(m.j41(0,"a",39),m.EFF(1),m.k0s()),2&e){const e=m.XpG(2);m.R7$(),m.SpI(" ",e.file.filename," ")}}function Ms(e,t){if(1&e&&(m.j41(0,"div",40),m.nrm(1,"object-file-action-menu",28),m.k0s()),2&e){const e=m.XpG(2);m.R7$(),m.Y8G("file",e.file)}}function Ts(e,t){if(1&e&&(m.j41(0,"div",21),m.EFF(1),m.k0s()),2&e){const e=m.XpG(3);m.Y8G("system-title",e.file.filename),m.R7$(),m.SpI(" ",e.file.filename," ")}}function Bs(e,t){if(1&e&&(m.j41(0,"div",41)(1,"ul",18)(2,"li",19),m.EFF(3),m.k0s(),m.j41(4,"li",19),m.EFF(5),m.k0s()(),m.DNE(6,Ts,2,2,"div",20),m.k0s()),2&e){const e=m.XpG(2);m.R7$(2),m.Y8G("system-title",e.filedate),m.R7$(),m.JRh(e.filedate),m.R7$(),m.Y8G("system-title",e.humanFileSize),m.R7$(),m.JRh(e.humanFileSize),m.R7$(),m.Y8G("ngIf",!!e.file.display_name)}}function $s(e,t){if(1&e&&(m.j41(0,"div",22)(1,"div",23)(2,"span",24)(3,"span",25),m.EFF(4,"Progress: 25%"),m.k0s()()(),m.j41(5,"div",26),m.EFF(6),m.k0s()()),2&e){const e=m.XpG(2);m.R7$(2),m.Y8G("ngStyle",e.progressbarstyle),m.R7$(4),m.SpI(" ",e.file.uploadprogress," % ")}}function Os(e,t){if(1&e){const e=m.RV6();m.j41(0,"div",29)(1,"div",30),m.DNE(2,Es,1,2,"system-file-icon",31)(3,Ls,2,1,"div",32),m.k0s(),m.j41(4,"div",33)(5,"div",22)(6,"h3",34),m.bIt("click",(function(){m.eBV(e);const t=m.XpG();return m.Njj(t.openInTab())})),m.DNE(7,Ds,2,1,"a",35)(8,Fs,2,1,"ng-template",null,36,m.C5r),m.k0s(),m.DNE(10,Ms,2,1,"div",37),m.k0s(),m.DNE(11,Bs,7,5,"div",38)(12,$s,7,2,"div",13),m.k0s()()}if(2&e){const e=m.sdS(9),t=m.XpG();m.R7$(2),m.Y8G("ngIf",!t.file.thumbnail),m.R7$(),m.Y8G("ngIf",t.file.thumbnail),m.R7$(3),m.Y8G("system-title",t.file.text),m.R7$(),m.Y8G("ngIf",!!t.file.display_name)("ngIfElse",e),m.R7$(3),m.Y8G("ngIf",!t.uploading),m.R7$(),m.Y8G("ngIf",!t.uploading),m.R7$(),m.Y8G("ngIf",t.uploading)}}let Xs=(()=>{class ObjectRelatedCardFile{constructor(e,t,s,i,n,l,o,a){this.modelattachments=e,this.userpreferences=t,this.modal=s,this.toast=i,this.helper=n,this.injector=l,this.navigationtab=o,this.router=a,this.file={},this.bigThumbnail=!1,this.disabled=!1}get humanFileSize(){return this.modelattachments.humanFileSize(this.file.filesize)}get filedate(){return this.file.date?this.file.date.format(this.userpreferences.getDateFormat()):""}get uploading(){return this.file.hasOwnProperty("uploadprogress")}get progressbarstyle(){return{width:this.file.uploadprogress+"%"}}downloadFile(){this.uploading||this.modelattachments.downloadAttachment(this.file.id,this.file.filename)}openInTab(){if(this.disabled)return;let e=this.file.file_mime_type.toLowerCase().split("/");const t="application"==e[0]&&"pdf"!=e[1]&&"msg"!=e[1],s="text"==e[0]&&"csv"==e[1];if(t||s)return this.downloadFile();let i="";this.navigationtab?.tabid&&(i="/tab/"+this.navigationtab.tabid),this.router.navigate([`${i}/attachment/${this.file.id}/${this.modelattachments.module}/${this.modelattachments.id}`])}static#e=this.ɵfac=function(e){return new(e||ObjectRelatedCardFile)(m.rXU(ps.S),m.rXU(w.S),m.rXU(P.y),m.rXU(pe.o),m.rXU(rt.d),m.rXU(m.zZn),m.rXU(Ie._),m.rXU(o.Ix))};static#t=this.ɵcmp=m.VBU({type:ObjectRelatedCardFile,selectors:[["","object-related-card-file",""]],inputs:{file:"file",bigThumbnail:"bigThumbnail",disabled:"disabled"},attrs:ks,decls:3,vars:2,consts:[["class","slds-file slds-file_card slds-has-title slds-m-left--small","style","width: 300px",4,"ngIf","ngIfElse"],["smallThumbnailContainer",""],[1,"slds-file","slds-file_card","slds-has-title","slds-m-left--small",2,"width","300px"],[2,"height","300px"],["href","javascript:void(0)",1,"slds-file__crop",2,"padding-top","245px",3,"click"],[3,"src",4,"ngIf"],[1,"slds-file__title","slds-file__title_card","slds-file-has-actions",2,"height","55px"],[1,"slds-media","slds-media_small","slds-media_center","slds-size--1-of-1"],[1,"slds-media__figure","slds-line-height_reset"],["divClass","","size","'small'",3,"filename","filemimetype"],[1,"slds-media__body"],["class","slds-file__text slds-truncate",3,"system-title","click",4,"ngIf"],["class","slds-tile__detail slds-text-body--small slds-truncate",4,"ngIf"],["class","slds-grid slds-grid_vertical-align-center slds-grid--align-spread slds-has-flexi-truncate",4,"ngIf"],["class","slds-file__actions-menu",4,"ngIf"],[3,"src"],[1,"slds-file__text","slds-truncate",3,"system-title","click"],[1,"slds-tile__detail","slds-text-body--small","slds-truncate"],[1,"slds-list--horizontal","slds-has-dividers--left"],[1,"slds-item",3,"system-title"],["class","slds-text-color--inverse-weak slds-truncate",3,"system-title",4,"ngIf"],[1,"slds-text-color--inverse-weak","slds-truncate",3,"system-title"],[1,"slds-grid","slds-grid_vertical-align-center","slds-grid--align-spread","slds-has-flexi-truncate"],[1,"slds-progress-bar"],[1,"slds-progress-bar__value",3,"ngStyle"],[1,"slds-assistive-text"],[1,"slds-text-align--right",2,"width","50px"],[1,"slds-file__actions-menu"],[3,"file"],[1,"slds-media","slds-truncate",2,"width","300px"],[1,"slds-m-right--x-small","slds-align--absolute-center",2,"width","30px","height","30px"],["divClass","","size","'small'",3,"filename","filemimetype",4,"ngIf"],[4,"ngIf"],[1,"slds-media__body",2,"width","260px"],[1,"slds-truncate","slds-text-heading--x-small","slds-p-right--xxx-small",3,"system-title","click"],["href","javascript:void(0);",4,"ngIf","ngIfElse"],["fileNameContainer",""],["class","slds-shrink-none",4,"ngIf"],["class","slds-tile__detail slds-text-body--small",4,"ngIf"],["href","javascript:void(0);"],[1,"slds-shrink-none"],[1,"slds-tile__detail","slds-text-body--small"]],template:function(e,t){if(1&e&&m.DNE(0,Ss,14,8,"div",0)(1,Os,13,8,"ng-template",null,1,m.C5r),2&e){const e=m.sdS(2);m.Y8G("ngIf",t.bigThumbnail)("ngIfElse",e)}},dependencies:[i.bT,i.B3,ys.z,j.L,_s],encapsulation:2})}return ObjectRelatedCardFile})();const Us=["fileupload"];function Ys(e,t){if(1&e&&(m.j41(0,"a",16)(1,"span",17),m.nrm(2,"system-label",18),m.EFF(3),m.k0s()()),2&e){const e=m.XpG();m.R7$(2),m.Y8G("label",e.componentconfig.label?e.componentconfig.label+"":"LBL_FILES"),m.R7$(),m.Lme(" (",e.filteredFiles.length,"/",e.modelattachments.files.length,")")}}function Ns(e,t){if(1&e&&(m.j41(0,"span",17),m.nrm(1,"system-label",18),m.EFF(2),m.k0s()),2&e){const e=m.XpG();m.R7$(),m.Y8G("label",e.componentconfig.label?e.componentconfig.label+"":"LBL_FILES"),m.R7$(),m.Lme(" (",e.filteredFiles.length,"/",e.modelattachments.files.length,")")}}function Vs(e,t){if(1&e){const e=m.RV6();m.j41(0,"system-utility-icon",19),m.bIt("click",(function(t){m.eBV(e);const s=m.XpG();return m.Njj(s.toggleOpen(t))})),m.k0s()}if(2&e){const e=m.XpG();m.Y8G("@animateicon",e.isopen?"open":"closed")}}function As(e,t){if(1&e){const e=m.RV6();m.j41(0,"div",20)(1,"div",21),m.nrm(2,"system-utility-icon",22),m.j41(3,"input",23),m.bIt("ngModelChange",(function(t){m.eBV(e);const s=m.XpG();return m.Njj(s.setFilteredFiles("input",t))})),m.k0s()()()}if(2&e){const e=m.XpG();m.R7$(3),m.Y8G("ngModel",e.filterTerm)}}function Ps(e,t){1&e&&(m.j41(0,"div",31),m.nrm(1,"system-utility-icon",32),m.k0s())}function zs(e,t){if(1&e&&(m.j41(0,"option",33),m.nrm(1,"system-label",18),m.k0s()),2&e){const e=t.$implicit;m.Y8G("value",e.id),m.R7$(),m.Y8G("label",e.label)}}function Hs(e,t){if(1&e){const e=m.RV6();m.j41(0,"div",24),m.DNE(1,Ps,2,0,"div",25),m.j41(2,"div",26)(3,"select",27),m.bIt("ngModelChange",(function(t){m.eBV(e);const s=m.XpG();return m.Njj(s.setFilteredFiles("category",t))})),m.j41(4,"option",28),m.nrm(5,"system-label",29),m.k0s(),m.DNE(6,zs,2,2,"option",30),m.k0s()()()}if(2&e){const e=m.XpG();m.R7$(),m.Y8G("ngIf",e.width>600),m.R7$(2),m.Y8G("ngModel",e.selectedCategoryId),m.R7$(3),m.Y8G("ngForOf",e.categories)}}function qs(e,t){if(1&e){const e=m.RV6();m.j41(0,"button",34),m.bIt("click",(function(){m.eBV(e);const t=m.XpG();return m.Njj(t.selectFile())})),m.nrm(1,"system-utility-icon",35),m.k0s()}}function Js(e,t){if(1&e&&m.nrm(0,"div",40),2&e){const e=t.$implicit,s=m.XpG(2);m.Y8G("file",e)("bigThumbnail",null==s.componentconfig?null:s.componentconfig.bigThumbnail)}}function Ws(e,t){1&e&&(m.j41(0,"div",41),m.nrm(1,"system-spinner"),m.k0s())}function Ks(e,t){if(1&e&&(m.j41(0,"div",36)(1,"div",37),m.DNE(2,Js,1,2,"div",38),m.k0s(),m.DNE(3,Ws,2,0,"div",39),m.k0s()),2&e){const e=m.XpG();m.Y8G("@displaycard",void 0),m.R7$(2),m.Y8G("ngForOf",e.filteredFiles),m.R7$(),m.Y8G("ngIf",e.modelattachments.loading)}}let Qs=(()=>{class ObjectRelatedlistFiles{constructor(e,t,s,i,n,l,o,a,r,d,c,u,m,h){this.modelattachments=e,this.language=t,this.model=s,this.renderer=i,this.toast=n,this.footer=l,this.metadata=o,this.backend=a,this.broadcast=r,this.elementRef=d,this.configurationService=c,this.modal=u,this.injector=m,this.cdRef=h,this.files=[],this.filteredFiles=[],this.componentconfig={},this.isopen=!0,this.selectedCategoryId="",this.defaultCategoryId="",this.broadcastSubscription={},this.filterTerm="",this.categories=[],this.subscriptions=new A.yU,this.broadcastSubscription=this.broadcast.message$.subscribe((e=>{this.handleMessage(e)})),this.componentconfig.hasOwnProperty("defaultcategory")&&this.componentconfig.defaultcategory&&(this.defaultCategoryId=this.componentconfig.defaultcategory),this.defaultCategoryId||this.selectedCategoryId||(this.selectedCategoryId="*")}ngAfterViewInit(){this.setModelData(),setTimeout((()=>this.loadFiles()),10),this.subscriptions.add(this.broadcast.message$.subscribe((e=>this.handleMessage(e))))}ngOnChanges(e){this.componentconfig.hasOwnProperty("defaultcategory")&&this.componentconfig.defaultcategory&&(this.defaultCategoryId=this.componentconfig.defaultcategory),this.defaultCategoryId||this.selectedCategoryId||(this.selectedCategoryId="*")}loadCategories(){!this.selectedCategoryId&&this.defaultCategoryId&&(this.selectedCategoryId=this.defaultCategoryId),this.configurationService.getData("spiceattachments_categories")&&(this.categories=this.configurationService.getData("spiceattachments_categories")),this.backend.getRequest("common/spiceattachments/categories/"+this.model.module).subscribe((e=>{e&&Array.isArray(e)&&(this.categories=e,this.configurationService.setData("spiceattachments_categories",e))}))}handleMessage(e){switch("model.merge"==e.messagetype&&e.messagedata.module==this.model.module&&e.messagedata.id==this.model.id&&this.loadFiles(),e.messagetype){case"attachments.loaded":e.messagedata.reload&&this.setFilteredFiles("category",this.selectedCategoryId);break;case"attachments.cloned":e.messagedata.clonedFiles.forEach((e=>{this.filteredFiles.find((t=>t.id==e.id))||(this.filteredFiles.push(e),this.cdRef.detectChanges())}))}}loadFiles(){this.files.length>0&&this.doupload(this.files),this.modelattachments.getAttachments().subscribe((e=>{this.filteredFiles=e,this.loadCategories(),this.setFilteredFiles("category",this.selectedCategoryId)}))}setModelData(){this.modelattachments.module=this.model.module,this.modelattachments.id=this.model.id}toggleOpen(e){e.stopPropagation(),this.isopen=!this.isopen}get width(){return this.elementRef.nativeElement.getBoundingClientRect().width}preventdefault(e){(e.dataTransfer.items.length>=1&&this.hasOneItemsFile(e.dataTransfer.items)||e.dataTransfer.files.length>0)&&(e.preventDefault(),e.stopPropagation(),e.dataTransfer.dropEffect="copy")}hasOneItemsFile(e){for(let t of e)if("file"==t.kind)return!0;return!1}onDrop(e){this.preventdefault(e);let t=e.dataTransfer.files;t&&t.length>=1&&this.doupload(t)}fileDrop(e){if(this.componentconfig.disableupload&&!0===this.componentconfig.disableupload)return this.toast.sendToast(this.language.getLabel("LBL_UPLOAD_IS_DISABLED"),"error"),!1;e&&e.length>=1&&this.doupload(e)}selectFile(){let e=new MouseEvent("click",{bubbles:!0});this.fileupload.element.nativeElement.dispatchEvent(e)}uploadFile(){let e=this.fileupload.element.nativeElement.files;this.doupload(e)}doupload(e){if(this.componentconfig.revComponent&&1!=e.length)return this.toast.sendToast(this.language.getLabel("LBL_ONE_FILE_ONLY"),"error"),!1;!this.selectedCategoryId&&this.defaultCategoryId&&(this.selectedCategoryId=this.defaultCategoryId),this.modelattachments.uploadAttachmentsBase64(e,"*"==this.selectedCategoryId?this.defaultCategoryId:this.selectedCategoryId).subscribe({next:t=>{this.componentconfig.revComponent&&this.openRevisionModal(e)},error:()=>{this.toast.sendToast(this.language.getLabel("LBL_ERROR"),"error")}})}openRevisionModal(e){let t=this.modal.await(this.language.getLabel("LBL_LOADING"));this.backend.getRequest("common/spiceattachments/module/"+this.model.module+"/"+this.model.id).subscribe((s=>{t.emit(!0),s?this.modal.openModal("AgreementsAddRevisionModal",!0,this.injector).subscribe((t=>{t.instance.files=e,t.instance.revComponent=this.componentconfig,t.instance.spiceattachment=s[0],t.instance.responseSubject.subscribe({next:e=>{e&&(this.toast.sendToast("MSG_REVISION_CREATED","success"),this.setModelData())}})})):this.toast.sendToast(this.language.getLabel("LBL_ERROR"),"error")}))}setFilteredFiles(e,t){switch(e){case"category":this.selectedCategoryId=t,this.filteredFiles="*"!=t&&t?this.modelattachments.files.filter((e=>!!e.category_ids&&e.category_ids.includes(t))):this.modelattachments.files;break;case"input":const e=t.toLowerCase();this.filterTerm=t,window.clearTimeout(this.filterTimeout),this.filterTimeout=window.setTimeout((()=>{this.filteredFiles=0==t.length?this.modelattachments.files:this.modelattachments.files.filter((t=>t.filename.toLowerCase().includes(e)||!!t.display_name&&t.display_name.toLowerCase().includes(e)||!!t.text&&t.text.toLowerCase().includes(e)))}),600)}}toggleBigThumbnail(){this.componentconfig||(this.componentconfig={}),this.componentconfig.bigThumbnail=!this.componentconfig.bigThumbnail}ngOnDestroy(){this.broadcastSubscription.unsubscribe()}static#e=this.ɵfac=function(e){return new(e||ObjectRelatedlistFiles)(m.rXU(ps.S),m.rXU(h.B),m.rXU(g.g),m.rXU(m.sFG),m.rXU(pe.o),m.rXU(fs.q),m.rXU(b.yu),m.rXU(ee.H),m.rXU(ke.m),m.rXU(m.aKT),m.rXU(y.i),m.rXU(P.y),m.rXU(m.zZn),m.rXU(m.gRc))};static#t=this.ɵcmp=m.VBU({type:ObjectRelatedlistFiles,selectors:[["object-relatedlist-files"]],viewQuery:function(e,t){if(1&e&&m.GBs(Us,7,m.c1b),2&e){let e;m.mGM(e=m.lsd())&&(t.fileupload=e.first)}},inputs:{files:"files",componentconfig:"componentconfig"},features:[m.Jv_([ps.S]),m.OA$],decls:17,vars:10,consts:[[1,"slds-card","slds-card_boundary","slds-m-bottom--medium",3,"system-drop-file"],[1,"slds-card__header","slds-grid"],[1,"slds-size--1-of-1","slds-grid","slds-grid--vertical-align-center"],[3,"icon","size"],[1,"slds-media__body","slds-truncate","slds-grid","slds-grid--vertical-align-center"],["href","javascript:void(0);","class","slds-text-link--reset",4,"ngIf"],["class","slds-text-heading--small",4,"ngIf"],["class","slds-m-horizontal--xx-small","icon","up","size","x-small",3,"click",4,"ngIf"],["system-title","LBL_TOGGLE_BIG_THUMBNAIL",1,"slds-col--bump-left","slds-button","slds-button--icon-border","slds-m-right--xxx-small",3,"click"],["size","x-small",3,"icon"],["class","slds-form-element slds-m-horizontal--xxx-small",4,"ngIf"],["class","slds-form-element slds-m-horizontal--xxx-small slds-grid slds-grid--vertical-align-center",4,"ngIf"],["class","slds-m-left--xxx-small slds-button slds-button--icon-border","system-title","LBL_UPLOAD",3,"click",4,"ngIf"],["type","file","multiple","",2,"display","none",3,"click","change"],["fileupload",""],["class","slds-card__body slds-card__body_inner",4,"ngIf"],["href","javascript:void(0);",1,"slds-text-link--reset"],[1,"slds-text-heading--small"],[3,"label"],["icon","up","size","x-small",1,"slds-m-horizontal--xx-small",3,"click"],[1,"slds-form-element","slds-m-horizontal--xxx-small"],[1,"slds-form-element__control","slds-input-has-icon","slds-input-has-icon_left-right"],["icon","search","addclasses","slds-input__icon slds-input__icon--left"],["type","text",1,"slds-input",3,"ngModel","ngModelChange"],[1,"slds-form-element","slds-m-horizontal--xxx-small","slds-grid","slds-grid--vertical-align-center"],["system-title","LBL_CATEGORIES","class","slds-m-horizontal--xxx-small",4,"ngIf"],[1,"slds-select_container","slds-m-horizontal--xxx-small"],[1,"slds-select",2,"min-width","70px",3,"ngModel","ngModelChange"],["value","*"],["label","LBL_ALL"],[3,"value",4,"ngFor","ngForOf"],["system-title","LBL_CATEGORIES",1,"slds-m-horizontal--xxx-small"],["icon","tile_card_list","size","x-small"],[3,"value"],["system-title","LBL_UPLOAD",1,"slds-m-left--xxx-small","slds-button","slds-button--icon-border",3,"click"],["size","x-small","icon","upload"],[1,"slds-card__body","slds-card__body_inner"],[1,"slds-card__body--inner","slds-grid","slds-wrap","slds-grid--pull-padded"],["object-related-card-file","","class","slds-tile slds-card__tile slds-p-horizontal--small slds-hint-parent",3,"file","bigThumbnail",4,"ngFor","ngForOf"],["class","slds-p-around--large slds-align--absolute-center",4,"ngIf"],["object-related-card-file","",1,"slds-tile","slds-card__tile","slds-p-horizontal--small","slds-hint-parent",3,"file","bigThumbnail"],[1,"slds-p-around--large","slds-align--absolute-center"]],template:function(e,t){if(1&e){const e=m.RV6();m.j41(0,"div",0),m.bIt("system-drop-file",(function(e){return t.fileDrop(e)})),m.j41(1,"div",1)(2,"header",2),m.nrm(3,"system-icon",3),m.j41(4,"div",4)(5,"h2"),m.DNE(6,Ys,4,3,"a",5)(7,Ns,3,3,"span",6),m.k0s(),m.DNE(8,Vs,1,1,"system-utility-icon",7),m.k0s(),m.j41(9,"button",8),m.bIt("click",(function(){return t.toggleBigThumbnail()})),m.nrm(10,"system-utility-icon",9),m.k0s(),m.DNE(11,As,4,1,"div",10)(12,Hs,7,3,"div",11)(13,qs,2,0,"button",12),m.k0s(),m.j41(14,"input",13,14),m.bIt("click",(function(){m.eBV(e);const t=m.sdS(15);return m.Njj(t.value=null)}))("change",(function(){return t.uploadFile()})),m.k0s()(),m.DNE(16,Ks,4,3,"div",15),m.k0s()}2&e&&(m.R7$(3),m.Y8G("icon","file")("size","small"),m.R7$(3),m.Y8G("ngIf",!t.componentconfig.alwaysExpanded),m.R7$(),m.Y8G("ngIf",t.componentconfig.alwaysExpanded),m.R7$(),m.Y8G("ngIf",t.modelattachments.files.length>0&&!t.componentconfig.alwaysExpanded),m.R7$(2),m.Y8G("icon",null!=t.componentconfig&&t.componentconfig.bigThumbnail?"file":"ad_set"),m.R7$(),m.Y8G("ngIf",!t.componentconfig.disableFilter&&t.width>500),m.R7$(),m.Y8G("ngIf",!t.componentconfig.disableCategories),m.R7$(),m.Y8G("ngIf",!t.componentconfig.disableupload),m.R7$(3),m.Y8G("ngIf",t.isopen))},dependencies:[i.Sq,i.bT,l.xH,l.y7,l.me,l.wz,l.BC,l.vS,I.J,S.W,Dt.P,E.B,bs.H,j.L,Xs],encapsulation:2,data:{animation:[(0,f.hZ)("animateicon",[(0,f.wk)("open",(0,f.iF)({transform:"scale(1, 1)"})),(0,f.wk)("closed",(0,f.iF)({transform:"scale(1, -1)"})),(0,f.kY)("open => closed",[(0,f.i0)(".5s")]),(0,f.kY)("closed => open",[(0,f.i0)(".5s")])]),(0,f.hZ)("displaycard",[(0,f.kY)(":enter",[(0,f.iF)({opacity:0,height:"0px",overflow:"hidden"}),(0,f.i0)(".5s",(0,f.iF)({height:"*",opacity:1})),(0,f.iF)({overflow:"unset"})]),(0,f.kY)(":leave",[(0,f.iF)({overflow:"hidden"}),(0,f.i0)(".5s",(0,f.iF)({height:"0px",opacity:0}))])])]}})}return ObjectRelatedlistFiles})();var Zs=s(3719);let ei=(()=>{class ObjectActionMailModal{constructor(e,t,s,i,n,l,o){this.language=e,this.metadata=t,this.model=s,this.view=i,this.backend=n,this.prefs=l,this.modal=o,this.parent=null,this.self=null,this.sending=!1,this.titlelabel="LBL_BEANTOMAIL",this.mailsent=new m.bkB,this.model.module="Emails",this.view.isEditable=!0,this.view.setEditMode();let a=this.metadata.getComponentConfig("ObjectActionMailModal");this.fieldset=a.fieldset}ngOnInit(){this.model.initializeModel(this.parent),this.setParentData()}get isDisabled(){let e=this.model.getFieldValue("recipient_addresses"),t=this.model.getFieldValue("mailbox_id"),s=this.model.getFieldValue("name"),i=this.model.getFieldValue("body"),n=e?e.find((e=>"to"==e.address_type)):void 0;return!(s&&i&&t&&e&&n)||this.sending}setParentData(){this.model.setField("parent_type",this.parent.module),this.model.setField("parent_id",this.parent.id),this.model.setField("parent_name",this.parent.data.summary_text)}close(){this.self.destroy()}sendEmail(){this.modal.openModal("SystemLoadingModal",!1).subscribe((e=>{e.instance.messagelabel="LBL_SENDING",this.sending=!0,this.model.setFields({type:"out",to_be_sent:"1",from_addr:this.model.getField("from_addr_name"),to_addrs:this.model.getField("to_addrs_names")}),this.model.save().subscribe((t=>{e.instance.self.destroy(),this.mailsent.emit(!0),this.close()}),(t=>{e.instance.self.destroy(),this.sending=!1}))}))}static#e=this.ɵfac=function(e){return new(e||ObjectActionMailModal)(m.rXU(h.B),m.rXU(b.yu),m.rXU(g.g),m.rXU(Me.U),m.rXU(ee.H),m.rXU(w.S),m.rXU(P.y))};static#t=this.ɵcmp=m.VBU({type:ObjectActionMailModal,selectors:[["object-action-mail-modal"]],inputs:{parent:"parent",titlelabel:"titlelabel"},outputs:{mailsent:"mailsent"},features:[m.Jv_([Me.U,g.g])],decls:11,vars:3,consts:[["size","large"],[3,"close"],[3,"label"],["direction","vertical",3,"fieldset"],[1,"slds-p-around_xx-small"],[1,"slds-button","slds-button--neutral",3,"click"],["label","LBL_CANCEL"],[1,"slds-button","slds-button--brand",3,"disabled","click"],["label","LBL_SEND"]],template:function(e,t){1&e&&(m.j41(0,"system-modal",0)(1,"system-modal-header",1),m.bIt("close",(function(){return t.close()})),m.nrm(2,"system-label",2),m.k0s(),m.j41(3,"system-modal-content"),m.nrm(4,"object-record-fieldset",3)(5,"object-relatedlist-files",4),m.k0s(),m.j41(6,"system-modal-footer")(7,"button",5),m.bIt("click",(function(){return t.close()})),m.nrm(8,"system-label",6),m.k0s(),m.j41(9,"button",7),m.bIt("click",(function(){return t.sendEmail()})),m.nrm(10,"system-label",8),m.k0s()()()),2&e&&(m.R7$(2),m.Y8G("label",t.titlelabel),m.R7$(2),m.Y8G("fieldset",t.fieldset),m.R7$(5),m.Y8G("disabled",t.isDisabled))},dependencies:[S.W,Be.D,$e.I,Oe.Q,Xe.C,Qs,Zs.D],encapsulation:2})}return ObjectActionMailModal})();var ti=s(21413),si=s(71985),ii=s(88980),ni=s(28134),li=s(98427);function oi(e,t){if(1&e){const e=m.RV6();m.j41(0,"button",9),m.bIt("click",(function(){m.eBV(e);const t=m.XpG();return m.Njj(t.navigateDetails())})),m.nrm(1,"system-button-icon",10),m.k0s()}}function ai(e,t){if(1&e&&(m.qex(0),m.j41(1,"dt",11)(2,"span",12),m.nrm(3,"system-label-fieldname",13),m.k0s()(),m.j41(4,"dd",14),m.nrm(5,"field-container",15),m.k0s(),m.bVm()),2&e){const e=t.$implicit,s=m.XpG();m.R7$(3),m.Y8G("module",s.model.module)("field",e.field),m.R7$(2),m.Y8G("field",e.field)("fieldconfig",e.fieldconfig)("fielddisplayclass","slds-truncate")}}let ri=(()=>{class ObjectRelatedDuplicateTile{constructor(e,t,s,i,n){this.model=e,this.modal=t,this.view=s,this.language=i,this.metadata=n,this.enableLink=!0,this.enableButtonLink=!1,this.fieldset="",this.view.displayLabels=!1}ngOnInit(){let e=this.metadata.getComponentConfig("ObjectRelatedDuplicateTile",this.model.module);this.fieldset=e.fieldset}getFields(){return this.metadata.getFieldSetFields(this.fieldset)}navigateDetails(){this.modal.closeAllModals(),this.model.goDetail()}static#e=this.ɵfac=function(e){return new(e||ObjectRelatedDuplicateTile)(m.rXU(g.g),m.rXU(P.y),m.rXU(Me.U),m.rXU(h.B),m.rXU(b.yu))};static#t=this.ɵcmp=m.VBU({type:ObjectRelatedDuplicateTile,selectors:[["object-related-duplicate-tile"]],inputs:{enableLink:"enableLink",enableButtonLink:"enableButtonLink"},features:[m.Jv_([Me.U])],decls:11,vars:5,consts:[[1,"slds-tile","slds-box","slds-media","slds-card__tile","slds-p-vertical--small","slds-p-horizontal--small","slds-hint-parent"],[3,"module","size"],[1,"slds-media__body"],[1,"slds-grid","slds-grid--align-spread","slds-has-flexi-truncate"],[1,"slds-truncate","slds-text-heading--small","slds-m-bottom--small"],["class","slds-button slds-button--icon-border",3,"click",4,"ngIf"],[1,"slds-tile__detail","slds-text-body--small"],[1,"slds-dl--horizontal"],[4,"ngFor","ngForOf"],[1,"slds-button","slds-button--icon-border",3,"click"],["icon","open"],[1,"slds-dl--horizontal__label","slds-truncate"],[1,"slds-truncate"],[3,"module","field"],[1,"slds-dl--horizontal__detail","slds-tile__meta"],[3,"field","fieldconfig","fielddisplayclass"]],template:function(e,t){1&e&&(m.j41(0,"div",0),m.nrm(1,"system-icon",1),m.j41(2,"div",2)(3,"div",3)(4,"h3",4)(5,"span"),m.EFF(6),m.k0s()(),m.DNE(7,oi,2,0,"button",5),m.k0s(),m.j41(8,"div",6)(9,"dl",7),m.DNE(10,ai,6,5,"ng-container",8),m.k0s()()()()),2&e&&(m.R7$(),m.Y8G("module",t.model.module)("size","small"),m.R7$(5),m.JRh(t.model.data.summary_text),m.R7$(),m.Y8G("ngIf",t.enableButtonLink),m.R7$(3),m.Y8G("ngForOf",t.getFields()))},dependencies:[i.Sq,i.bT,Te.y,R.t,I.J,Ae.P],encapsulation:2})}return ObjectRelatedDuplicateTile})();const di=(e,t)=>({module:e,data:t});function ci(e,t){if(1&e&&m.nrm(0,"object-related-duplicate-tile",10),2&e){const e=t.$implicit,s=m.XpG();m.Y8G("system-model-provider",m.l_i(3,di,s.model.module,e))("enableLink",!1)("enableButtonLink",!0)}}let ui=(()=>{class ObjectEditModalDialogDuplicatesPanel{constructor(e,t,s,i){this.model=e,this.metadata=t,this.language=s,this.view=i,this.close=new m.bkB,this.fieldset="",this.view.isEditable=!1}ngOnInit(){let e=this.metadata.getComponentConfig("GlobalModalDialogDuplicates",this.model.module);this.fieldset=e.fieldset}hidePanel(){this.close.emit(!0)}static#e=this.ɵfac=function(e){return new(e||ObjectEditModalDialogDuplicatesPanel)(m.rXU(g.g),m.rXU(b.yu),m.rXU(h.B),m.rXU(Me.U))};static#t=this.ɵcmp=m.VBU({type:ObjectEditModalDialogDuplicatesPanel,selectors:[["object-edit-modal-dialog-duplicates-panel"]],outputs:{close:"close"},features:[m.Jv_([Me.U])],decls:12,vars:3,consts:[[1,"slds-card"],[1,"slds-card__header","slds-p-around--small","slds-theme--info","slds-grid","slds-grid_vertical-align-center","slds-grid--align-spread"],[1,"slds-text-heading--small"],["label","LBL_DUPLICATES"],["label","LBL_OF"],[1,"slds-button","slds-button--icon","slds-button--icon-border-filled",3,"click"],["icon","close"],[1,"slds-card__body","slds-card__body_inner"],[1,"slds-grid","slds-wrap","slds-grid_pull-padded"],["class","slds-size--1-of-1",3,"system-model-provider","enableLink","enableButtonLink",4,"ngFor","ngForOf"],[1,"slds-size--1-of-1",3,"system-model-provider","enableLink","enableButtonLink"]],template:function(e,t){1&e&&(m.j41(0,"div",0)(1,"div",1)(2,"h2",2),m.nrm(3,"system-label",3),m.EFF(4),m.nrm(5,"system-label",4),m.EFF(6),m.k0s(),m.j41(7,"button",5),m.bIt("click",(function(){return t.hidePanel()})),m.nrm(8,"system-button-icon",6),m.k0s()(),m.j41(9,"div",7)(10,"ul",8),m.DNE(11,ci,1,6,"object-related-duplicate-tile",9),m.k0s()()()),2&e&&(m.R7$(4),m.SpI(" (",t.model.duplicates.length," "),m.R7$(2),m.SpI(" ",t.model.duplicatecount,")"),m.R7$(5),m.Y8G("ngForOf",t.model.duplicates))},dependencies:[i.Sq,R.t,S.W,li.v,ri],encapsulation:2})}return ObjectEditModalDialogDuplicatesPanel})();var mi=s(34796);const hi=["modalContent"],gi=e=>({"slds-hidden":e});function pi(e,t){if(1&e){const e=m.RV6();m.j41(0,"button",9),m.bIt("click",(function(){m.eBV(e);const t=m.XpG();return m.Njj(t.showDuplicates=!t.showDuplicates)})),m.j41(1,"span",10),m.EFF(2),m.k0s(),m.nrm(3,"system-label",11),m.k0s()}if(2&e){const e=m.XpG();m.Y8G("disabled",0==e.model.duplicates.length)("ngClass",m.eq3(3,gi,e.showDuplicatesTable)),m.R7$(2),m.JRh(e.model.duplicateChecking?"":e.model.duplicatecount)}}function fi(e,t){if(1&e){const e=m.RV6();m.j41(0,"div",16)(1,"object-edit-modal-dialog-duplicates-panel",1),m.bIt("close",(function(){m.eBV(e);const t=m.XpG(2);return m.Njj(t.showDuplicates=!1)})),m.k0s()()}}function bi(e,t){if(1&e&&(m.j41(0,"div",12)(1,"div",13),m.nrm(2,"object-edit-modal-dialog-container",14),m.k0s(),m.DNE(3,fi,2,0,"div",15),m.k0s()),2&e){const e=m.XpG();m.R7$(2),m.Y8G("componentSet",e.componentconfig.componentset),m.R7$(),m.Y8G("ngIf",e.showDuplicates)}}let yi=(()=>{class ObjectEditModal{constructor(e,t,s,i,n,l,o,a){this.router=e,this.language=t,this.model=s,this.view=i,this.metadata=n,this.modal=l,this.modalwindow=o,this.navigationtab=a,this.actionSetItems=[],this.actionSubject=new ti.B,this.action$=new si.c,this.duplicates=[],this.showDuplicates=!1,this.showDuplicatesTable=!1,this.preventGoingToRecord=!1,this.self={},this.view.isEditable=!0,this.view.displayLinks=!1,this.view.setEditMode(),this.model.startEdit(),this.action$=this.actionSubject.asObservable()}ngOnInit(){this.componentconfig||(this.componentconfig=this.metadata.getComponentConfig(this.constructor.name,this.model.module)),this.actionSetItems=this.metadata.getActionSetItems(this.componentconfig.actionset),this.modalwindow.self=this.self}get actionset(){return this.componentconfig.actionset}closeModal(){this.model.cancelEdit(),this.actionSubject.next(!1),this.actionSubject.complete(),this.self.destroy()}get modalHeader(){return""!=this.model.module?this.language.getModuleName(this.model.module,!0):""}get grow(){return this.componentconfig.grow}handleAction(e){switch(e){case"savegodetail":this.actionSubject.next(e),this.model.goDetail(this.navigationtab?.tabid);break;case"save":this.actionSubject.next(e);break;default:this.actionSubject.next(!1)}this.actionSubject.complete(),this.self.destroy()}get duplicateCheckEnabled(){return this.model.isNew&&this.metadata.getModuleDuplicatecheck(this.model.module)}static#e=this.ɵfac=function(e){return new(e||ObjectEditModal)(m.rXU(o.Ix),m.rXU(h.B),m.rXU(g.g),m.rXU(Me.U),m.rXU(b.yu),m.rXU(P.y),m.rXU(Rt.w),m.rXU(Ie._,8))};static#t=this.ɵcmp=m.VBU({type:ObjectEditModal,selectors:[["ng-component"]],viewQuery:function(e,t){if(1&e&&m.GBs(hi,7,m.c1b),2&e){let e;m.mGM(e=m.lsd())&&(t.modalContent=e.first)}},inputs:{preventGoingToRecord:"preventGoingToRecord"},features:[m.Jv_([Me.U,Rt.w])],decls:14,vars:5,consts:[["size","large"],[3,"close"],["class","slds-button slds-button--brand",3,"disabled","ngClass","click",4,"ngIf"],["margin","none",3,"grow"],["modalContent",""],["class","slds-grid",4,"ngIf"],[1,"slds-grid","slds-grid--vertical-align-center","slds-grid--align-spread"],[1,"slds-col"],["containerclass","slds-button-group-row",3,"actionset","actionemitter"],[1,"slds-button","slds-button--brand",3,"disabled","ngClass","click"],[1,"slds-p-right--xx-small"],["label","LBL_DUPLICATES"],[1,"slds-grid"],[1,"slds-grid--vertical","slds-grow"],[3,"componentSet"],["class","slds-size--1-of-3 slds-border--left",4,"ngIf"],[1,"slds-size--1-of-3","slds-border--left"]],template:function(e,t){1&e&&(m.j41(0,"system-modal",0)(1,"system-modal-header",1),m.bIt("close",(function(){return t.closeModal()})),m.EFF(2),m.j41(3,"system-modal-header-right"),m.DNE(4,pi,4,5,"button",2),m.k0s()(),m.j41(5,"system-modal-content",3,4),m.DNE(7,bi,4,2,"div",5),m.k0s(),m.j41(8,"system-modal-footer")(9,"div",6)(10,"div",7),m.nrm(11,"object-record-messages-badge"),m.k0s(),m.j41(12,"div",7)(13,"object-action-container",8),m.bIt("actionemitter",(function(e){return t.handleAction(e)})),m.k0s()()()()()),2&e&&(m.R7$(2),m.SpI(" ",t.modalHeader," "),m.R7$(2),m.Y8G("ngIf",t.duplicateCheckEnabled),m.R7$(),m.Y8G("grow",t.grow),m.R7$(2),m.Y8G("ngIf",!t.showDuplicatesTable),m.R7$(6),m.Y8G("actionset",t.componentconfig.actionset))},dependencies:[i.YU,i.bT,S.W,Be.D,$e.I,Oe.Q,Xe.C,ii.s,M.l,ni.A,ui,mi.o],encapsulation:2})}return ObjectEditModal})();var vi=s(84359),_i=s(43308);const ki=["object-table-row",""];function Ri(e,t){if(1&e){const e=m.RV6();m.j41(0,"td",2)(1,"system-checkbox",3),m.bIt("ngModelChange",(function(){m.eBV(e);const t=m.XpG();return m.Njj(t.toggleSelection())})),m.k0s()()}if(2&e){const e=m.XpG();m.R7$(),m.Y8G("ngModel",e.selected)}}function Ii(e,t){if(1&e&&(m.j41(0,"td")(1,"div",4),m.nrm(2,"field-container",5),m.k0s()()),2&e){const e=t.$implicit,s=m.XpG();m.BMQ("data-label",s.language.getFieldDisplayName(s.model.module,e.field,e.fieldconfig)),m.R7$(2),m.Y8G("fieldname",e.field)("fieldconfig",e.fieldconfig)("fielddisplayclass","slds-truncate")}}let xi=(()=>{class ObjectTableRow{constructor(e,t,s){this.language=e,this.model=t,this.view=s,this.fields=[],this.selected=!1,this.select$=new m.bkB,this.unselect$=new m.bkB,this.selectable=!1,this.view.isEditable=!1,this.view.displayLabels=!1}ngOnInit(){this.selectable=null!==this.attr_selectable}toggleSelection(){if(!this.selectable)return!1;this.selected=!this.selected,this.selected?this.select$.emit(this.model.data):this.unselect$.emit(this.model.data)}static#e=this.ɵfac=function(e){return new(e||ObjectTableRow)(m.rXU(h.B),m.rXU(g.g),m.rXU(Me.U))};static#t=this.ɵcmp=m.VBU({type:ObjectTableRow,selectors:[["","object-table-row",""]],hostAttrs:[1,"slds-hint-parent"],inputs:{fields:"fields",selected:"selected",attr_selectable:[m.Mj6.None,"selectable","attr_selectable"]},outputs:{select$:"select",unselect$:"unselect"},features:[m.Jv_([Me.U])],attrs:ki,decls:2,vars:2,consts:[["class","slds-cell-shrink","system-title","LBL_SELECT_ROW",4,"ngIf"],[4,"ngFor","ngForOf"],["system-title","LBL_SELECT_ROW",1,"slds-cell-shrink"],[3,"ngModel","ngModelChange"],[1,"slds-truncate"],[3,"fieldname","fieldconfig","fielddisplayclass"]],template:function(e,t){1&e&&m.DNE(0,Ri,2,1,"td",0)(1,Ii,3,4,"td",1),2&e&&(m.Y8G("ngIf",t.selectable),m.R7$(),m.Y8G("ngForOf",t.fields))},dependencies:[i.Sq,i.bT,l.BC,l.vS,Te.y,vi.f,j.L],encapsulation:2})}return ObjectTableRow})();function ji(e,t){if(1&e){const e=m.RV6();m.j41(0,"th",6)(1,"span",7),m.nrm(2,"system-label",8),m.k0s(),m.j41(3,"system-checkbox",9),m.bIt("ngModelChange",(function(){m.eBV(e);const t=m.XpG();return m.Njj(t.toggleAll())})),m.k0s()()}if(2&e){const e=m.XpG();m.R7$(3),m.Y8G("ngModel",e.areAllObjectsSelected())("disabled",e.objects.length>e.max_selections)}}function Gi(e,t){if(1&e&&(m.j41(0,"div",12),m.nrm(1,"system-label-fieldname",13),m.k0s()),2&e){const e=m.XpG().$implicit,t=m.XpG();m.AVh("slds-p-around--xx-small",t.fixedHeader),m.R7$(),m.Y8G("module",t.module)("field",e.field)("fieldconfig",e.fieldconfig)}}function Ci(e,t){if(1&e&&(m.j41(0,"th",10),m.DNE(1,Gi,2,5,"div",11),m.k0s()),2&e){const e=t.$implicit;m.R7$(),m.Y8G("ngIf",!e.fieldconfig||!e.fieldconfig.hidelabel)}}const wi=(e,t)=>({module:e,data:t});function Si(e,t){if(1&e){const e=m.RV6();m.j41(0,"tr",15),m.bIt("select",(function(t){m.eBV(e);const s=m.XpG(2);return m.Njj(s.select(t))}))("unselect",(function(t){m.eBV(e);const s=m.XpG(2);return m.Njj(s.unselect(t))})),m.k0s()}if(2&e){const e=t.$implicit,s=m.XpG(2);m.Y8G("fields",s.fields)("system-model-provider",m.l_i(4,wi,s.module,e))("selectable",s.selectable?"true":null)("selected",s.isObjectSelected(e))}}function Ei(e,t){if(1&e&&(m.j41(0,"tbody"),m.DNE(1,Si,1,7,"tr",14),m.k0s()),2&e){const e=m.XpG();m.R7$(),m.Y8G("ngForOf",e.objects)}}function Li(e,t){1&e&&(m.j41(0,"td",20),m.nrm(1,"system-stencil"),m.k0s())}function Di(e,t){if(1&e&&(m.j41(0,"tr"),m.DNE(1,Li,2,0,"td",19),m.k0s()),2&e){const e=m.XpG(2);m.R7$(),m.Y8G("ngForOf",e.fields)}}const Fi=()=>[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15];function Mi(e,t){1&e&&(m.j41(0,"tbody",16),m.nrm(1,"tr",17),m.DNE(2,Di,2,1,"tr",18),m.k0s()),2&e&&(m.R7$(2),m.Y8G("ngForOf",m.lJ4(1,Fi)))}let Ti=(()=>{class ObjectTable{constructor(e,t,s,i){this.language=e,this.metadata=t,this.fields=[],this.objects=[],this.selected_objects=[],this.fixedHeader=!1,this.isLoading=!1,this.selected_objects$=new m.bkB,this.max_selections=0,this.select$=new m.bkB,this.selectable=!1,this.multiselect=!1,this.selectable=null!==s,this.multiselect=null!==i}ngOnInit(){if(!this.fields||0==this.fields.length)if(this.fieldset_id)this.fields=this.metadata.getFieldSetFields(this.fieldset_id);else{let e=this.metadata.getComponentConfig("ObjectList",this.module);this.fields=this.metadata.getFieldSetFields(e.fieldset)}if(!this.fields||0==this.fields.length)throw new Error(`No fields given, nor found for module ${this.module}`);this.selectable&&this.max_selections<1&&(this.max_selections=1),this.multiselect&&this.max_selections<2&&(this.max_selections=99)}toggleAll(){this.selected_objects.length<this.objects.length?this.selected_objects=[...this.objects]:this.selected_objects=[],this.selected_objects$.emit(this.selected_objects),this.select$.emit(this.selected_objects)}select(e){!this.findSelectedObject(e)&&this.selected_objects.length<this.max_selections&&(this.selected_objects.push(e),this.selected_objects$.emit(this.selected_objects),this.select$.emit(this.selected_objects))}unselect(e){let t=this.selected_objects.findIndex((t=>t.id==e.id));t>-1&&(this.selected_objects.splice(t,1),this.selected_objects$.emit(this.selected_objects),this.select$.emit(this.selected_objects))}isObjectSelected(e){return!!this.findSelectedObject(e)}areAllObjectsSelected(){return this.selected_objects.length==this.objects.length}findSelectedObject(e){return this.selected_objects.find((t=>t.id==e.id))}static#e=this.ɵfac=function(e){return new(e||ObjectTable)(m.rXU(h.B),m.rXU(b.yu),m.kS0("selectable"),m.kS0("multiselect"))};static#t=this.ɵcmp=m.VBU({type:ObjectTable,selectors:[["object-table"]],inputs:{fields:"fields",objects:"objects",selected_objects:"selected_objects",fixedHeader:"fixedHeader",fieldset_id:"fieldset_id",module:"module",isLoading:"isLoading",max_selections:[m.Mj6.None,"max-selections","max_selections"]},outputs:{selected_objects$:"selected_objectsChange",select$:"select"},decls:7,vars:6,consts:[[1,"slds-table","slds-table_bordered","slds-max-medium-table_stacked-horizontal","slds-table_fixed-layout"],[1,"slds-text-title--caps"],["class","slds-cell-shrink","scope","col",4,"ngIf"],["scope","col",4,"ngFor","ngForOf"],[4,"ngIf"],["class","slds-is-relative",4,"ngIf"],["scope","col",1,"slds-cell-shrink"],["id","check-group-header",1,"slds-assistive-text"],["label","LBL_CHOOSE_ROWS_TO_SELECT"],[3,"ngModel","disabled","ngModelChange"],["scope","col"],["class","slds-truncate",3,"slds-p-around--xx-small",4,"ngIf"],[1,"slds-truncate"],[3,"module","field","fieldconfig"],["object-table-row","",3,"fields","system-model-provider","selectable","selected","select","unselect",4,"ngFor","ngForOf"],["object-table-row","",3,"fields","system-model-provider","selectable","selected","select","unselect"],[1,"slds-is-relative"],[2,"position","absolute","background","linear-gradient(rgba(0,0,0,0) 0%, rgba(255,255,255,.8) 100%)","width","100%","height","100%","z-index","1"],[4,"ngFor","ngForOf"],["style","overflow: hidden",4,"ngFor","ngForOf"],[2,"overflow","hidden"]],template:function(e,t){1&e&&(m.j41(0,"table",0)(1,"thead")(2,"tr",1),m.DNE(3,ji,4,2,"th",2)(4,Ci,2,1,"th",3),m.k0s()(),m.DNE(5,Ei,2,1,"tbody",4)(6,Mi,3,2,"tbody",5),m.k0s()),2&e&&(m.AVh("slds-table--header-fixed",t.fixedHeader),m.R7$(3),m.Y8G("ngIf",t.selectable),m.R7$(),m.Y8G("ngForOf",t.fields),m.R7$(),m.Y8G("ngIf",!t.isLoading),m.R7$(),m.Y8G("ngIf",t.isLoading))},dependencies:[i.Sq,i.bT,l.BC,l.vS,vi.f,S.W,Ae.P,_i.O,li.v,xi],encapsulation:2})}return ObjectTable})(),Bi=(()=>{class ObjectEditModalDialogDuplicates{constructor(e,t,s){this.model=e,this.metadata=t,this.language=s,this.module="",this.duplicates=[],this.fieldset=""}ngOnInit(){let e=this.metadata.getComponentConfig("GlobalModalDialogDuplicates",this.model.module);this.fieldset=e.fieldset}static#e=this.ɵfac=function(e){return new(e||ObjectEditModalDialogDuplicates)(m.rXU(g.g),m.rXU(b.yu),m.rXU(h.B))};static#t=this.ɵcmp=m.VBU({type:ObjectEditModalDialogDuplicates,selectors:[["object-edit-modal-dialog-duplicates"]],inputs:{module:"module",duplicates:"duplicates"},decls:1,vars:3,consts:[[3,"module","fieldset_id","objects"]],template:function(e,t){1&e&&m.nrm(0,"object-table",0),2&e&&m.Y8G("module",t.model.module)("fieldset_id",t.fieldset)("objects",t.duplicates)},dependencies:[Ti],encapsulation:2})}return ObjectEditModalDialogDuplicates})();const $i=["modalContent"];function Oi(e,t){if(1&e&&m.nrm(0,"object-edit-modal-dialog-duplicates",16),2&e){const e=m.XpG();m.Y8G("duplicates",e.duplicates)}}let Xi=(()=>{class ObjectEditModalWReference{constructor(e,t,s,i,n,l){this.router=e,this.language=t,this.model=s,this.view=i,this.metadata=n,this.elementref=l,this.componentRefs=[],this.componentSet="",this.module="",this.reference="",this.showDuplicates=!1,this.doDuplicateCheck=!0,this.duplicates=[],this.modalAction$=new m.bkB,this.self={},this.view.isEditable=!0,this.view.setEditMode()}closeModal(){this.modalAction$.emit(!1)}get modalHeader(){return""!=this.model.module?this.language.getModuleName(this.model.module,!0):""}save(e=!1){this.model.validate()&&this.modalAction$.emit(this.model.data)}get contentStyle(){if(this.showDuplicates)return{"overflow-y":"hidden"}}static#e=this.ɵfac=function(e){return new(e||ObjectEditModalWReference)(m.rXU(o.Ix),m.rXU(h.B),m.rXU(g.g),m.rXU(Me.U),m.rXU(b.yu),m.rXU(m.aKT))};static#t=this.ɵcmp=m.VBU({type:ObjectEditModalWReference,selectors:[["ng-component"]],viewQuery:function(e,t){if(1&e&&m.GBs($i,7,m.c1b),2&e){let e;m.mGM(e=m.lsd())&&(t.modalContent=e.first)}},features:[m.Jv_([g.g,Me.U])],decls:17,vars:6,consts:[["role","dialog",1,"slds-modal","slds-fade-in-open","slds-modal--large"],[1,"slds-modal__container"],[1,"slds-modal__header"],[1,"slds-button","slds-modal__close","slds-button--icon-inverse",3,"click"],[3,"icon","size"],[1,"slds-text-heading--medium"],[1,"slds-modal__content","slds-is-relative",3,"ngStyle"],["modalContent",""],[3,"componentSet"],["class","slds-is-absolute slds-theme--shade",3,"duplicates",4,"ngIf"],[1,"slds-modal__footer"],[1,"slds-button","slds-button--neutral",3,"click"],["label","LBL_CANCEL"],[1,"slds-button","slds-button--brand",3,"click"],["label","LBL_SAVE"],[1,"slds-backdrop","slds-backdrop--open"],[1,"slds-is-absolute","slds-theme--shade",3,"duplicates"]],template:function(e,t){1&e&&(m.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"button",3),m.bIt("click",(function(){return t.closeModal()})),m.nrm(4,"system-button-icon",4),m.k0s(),m.j41(5,"h2",5),m.EFF(6),m.k0s()(),m.j41(7,"div",6,7),m.nrm(9,"object-edit-modal-dialog-container",8),m.DNE(10,Oi,1,1,"object-edit-modal-dialog-duplicates",9),m.k0s(),m.j41(11,"div",10)(12,"button",11),m.bIt("click",(function(){return t.closeModal()})),m.nrm(13,"system-label",12),m.k0s(),m.j41(14,"button",13),m.bIt("click",(function(){return t.save()})),m.nrm(15,"system-label",14),m.k0s()()()(),m.nrm(16,"div",15)),2&e&&(m.R7$(4),m.Y8G("icon","close")("size","large"),m.R7$(2),m.JRh(t.modalHeader),m.R7$(),m.Y8G("ngStyle",t.contentStyle),m.R7$(2),m.Y8G("componentSet",t.componentSet),m.R7$(),m.Y8G("ngIf",t.showDuplicates))},dependencies:[i.bT,i.B3,R.t,S.W,ni.A,Bi],encapsulation:2})}return ObjectEditModalWReference})();var Ui=s(766);let Yi=(()=>{class ObjectOptimisticLockingModalDataField{constructor(e){this.model=e,this.fieldname="",this.fieldmodule=""}ngOnInit(){this.model.module=this.fieldmodule,this.model.setField(this.fieldname,this.fieldvalue)}static#e=this.ɵfac=function(e){return new(e||ObjectOptimisticLockingModalDataField)(m.rXU(g.g))};static#t=this.ɵcmp=m.VBU({type:ObjectOptimisticLockingModalDataField,selectors:[["object-optimisitclocking-modal-data-field"]],inputs:{fieldname:"fieldname",fieldmodule:"fieldmodule",fieldvalue:"fieldvalue"},features:[m.Jv_([g.g])],decls:1,vars:2,consts:[[3,"field","fielddisplayclass"]],template:function(e,t){1&e&&m.nrm(0,"field-container",0),2&e&&m.Y8G("field",t.fieldname)("fielddisplayclass","slds-truncate")},dependencies:[Te.y],encapsulation:2})}return ObjectOptimisticLockingModalDataField})();var Ni=s(49380);let Vi=(()=>{class ObjectOptimisticLockingModalChange{constructor(e,t,s){this.model=e,this.language=t,this.userpreferences=s,this.change={}}get changeDate(){let e=moment(this.change.date_created).tz(this.userpreferences.toUse.timezone);return e.add(e.utcOffset(),"m"),e.format(this.userpreferences.getDateFormat()+" "+this.userpreferences.getTimeFormat())}static#e=this.ɵfac=function(e){return new(e||ObjectOptimisticLockingModalChange)(m.rXU(g.g),m.rXU(h.B),m.rXU(w.S))};static#t=this.ɵcmp=m.VBU({type:ObjectOptimisticLockingModalChange,selectors:[["object-optimisitclocking-modal-change"]],inputs:{change:"change"},features:[m.Jv_([Me.U])],decls:15,vars:4,consts:[[1,"slds-p-vertical--xx-small"],[1,"slds-box--border"],[1,"slds-p-around--x-small"],[1,"slds-grid"],[1,"slds-m-top--xx-small"],["icon","history","size","x-small"],[1,"slds-col_bump-right","slds-m-left--xx-small"],["label","LBL_BY"],["icon","forward","size","xx-small"]],template:function(e,t){1&e&&(m.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4),m.nrm(5,"system-custom-icon",5),m.k0s(),m.j41(6,"div",6)(7,"div"),m.EFF(8),m.nrm(9,"system-label",7),m.EFF(10),m.k0s(),m.j41(11,"div"),m.EFF(12),m.nrm(13,"system-utility-icon",8),m.EFF(14),m.k0s()()()()()()),2&e&&(m.R7$(8),m.SpI("",t.changeDate,", "),m.R7$(2),m.SpI(" ",t.change.user_name,""),m.R7$(2),m.SpI("",t.change.before_value_string,"   "),m.R7$(2),m.SpI("   ",t.change.after_value_string,""))},dependencies:[Ni.k,S.W,E.B],encapsulation:2})}return ObjectOptimisticLockingModalChange})();function Ai(e,t){if(1&e&&m.nrm(0,"object-optimisitclocking-modal-change",42),2&e){const e=t.$implicit;m.Y8G("change",e)}}function Pi(e,t){if(1&e&&(m.j41(0,"tr")(1,"td",40),m.DNE(2,Ai,1,1,"object-optimisitclocking-modal-change",41),m.k0s()()),2&e){const e=m.XpG().$implicit;m.R7$(2),m.Y8G("ngForOf",e.changes)}}function zi(e,t){if(1&e){const e=m.RV6();m.qex(0),m.j41(1,"tr",23)(2,"td")(3,"div",24),m.nrm(4,"field-label",25),m.j41(5,"div",26),m.bIt("click",(function(){const t=m.eBV(e).$implicit,s=m.XpG();return m.Njj(s.toggleChangeDetails(t.field))})),m.nrm(6,"system-utility-icon",27),m.k0s()()(),m.j41(7,"td")(8,"div",28)(9,"div",29)(10,"input",30),m.bIt("click",(function(){const t=m.eBV(e).$implicit,s=m.XpG();return m.Njj(s.unselect(t.field))})),m.k0s(),m.j41(11,"label",31),m.nrm(12,"span",32),m.k0s()(),m.j41(13,"div",33),m.nrm(14,"object-optimisitclocking-modal-data-field",34),m.k0s()()(),m.j41(15,"td",35),m.nrm(16,"system-utility-icon",36),m.k0s(),m.j41(17,"td")(18,"div",28)(19,"div",29)(20,"input",37),m.bIt("click",(function(){const t=m.eBV(e).$implicit,s=m.XpG();return m.Njj(s.select(t.field))})),m.k0s(),m.j41(21,"label",31),m.nrm(22,"span",32),m.k0s()(),m.j41(23,"div",33),m.nrm(24,"field-container",38),m.k0s()()()(),m.DNE(25,Pi,3,1,"tr",39),m.bVm()}if(2&e){const e=t.$implicit,s=t.index,i=m.XpG();m.R7$(4),m.Y8G("fieldname",e.field),m.R7$(6),m.Mz_("id","radio",s,"1"),m.FS9("name",s),m.R7$(),m.Mz_("for","radio",s,"1"),m.R7$(3),m.Y8G("fieldmodule",i.model.module)("fieldname",e.field)("fieldvalue",e.value),m.R7$(6),m.Mz_("id","radio",s,"2"),m.FS9("name",s),m.R7$(),m.Mz_("for","radio",s,"2"),m.R7$(3),m.Y8G("fieldname",e.field)("fielddisplayclass","slds-truncate"),m.R7$(),m.Y8G("ngIf",i.channgeOpen(e.field))}}let Hi=(()=>{class ObjectOptimisticLockingModal{constructor(e,t,s,i,n){this.language=e,this.model=t,this.view=s,this.metadata=i,this.modal=n,this.self={},this.conflicts={},this._conflicts=[],this.originaldata={},this.fieldsToCopy={},this.view.displayLabels=!1}ngOnInit(){for(let e in this.conflicts)this._conflicts.push({field:e,value:this.conflicts[e].value,changes:this.conflicts[e].changes}),this.originaldata[e]=this.conflicts[e].value}cancel(){this.responseSubject.error(!0),this.responseSubject.complete(),this.self.destroy()}edit(){this.model.edit(),this.self.destroy()}save(e=!1){this.copyFields(),this.modal.openModal("SystemLoadingModal").subscribe((t=>{t.instance.messagelabel="LBL_SAVING_DATA",this.model.setField("date_modified",new moment),this.model.save().subscribe((s=>{s&&(e&&this.model.goDetail(),this.self.destroy()),t.instance.self.destroy()})),this.responseSubject.next(!0),this.responseSubject.complete()}))}copyFields(){for(let e in this.conflicts)this.fieldsToCopy[e]||this.model.setField(e,this.conflicts[e].value)}toggleChangeDetails(e){this.conflicts[e].open=!this.conflicts[e].open}select(e){this.fieldsToCopy[e]=!0}unselect(e){delete this.fieldsToCopy[e]}changeDetailsIcon(e){return this.conflicts[e].open?"chevronup":"chevrondown"}channgeOpen(e){return!!this.conflicts[e].open}static#e=this.ɵfac=function(e){return new(e||ObjectOptimisticLockingModal)(m.rXU(h.B),m.rXU(g.g),m.rXU(Me.U),m.rXU(b.yu),m.rXU(P.y))};static#t=this.ɵcmp=m.VBU({type:ObjectOptimisticLockingModal,selectors:[["ng-component"]],features:[m.Jv_([Me.U])],decls:29,vars:2,consts:[["size","large"],[3,"hiddenCloseButton"],["label","LBL_OPTIMISTICLOCKING_CONFLICT"],["margin","none"],[1,"slds-p-around--small"],[1,"slds-text-heading--label"],["label","MSG_OPTIMISTIC_LOCKING"],[1,"slds-p-vertical--xx-small"],["label","MSG_OPTIMISTIC_LOCKING","length","long"],[1,"slds-table","slds-table_cell-buffer","slds-table_bordered","slds-no-row-hover"],[1,"slds-line-height_reset"],["scope","col",1,"slds-text-title_caps"],[1,"slds-truncate"],["label","LBL_FIELD"],["scope","col",1,"slds-text-title_caps",2,"width","33%"],["label","LBL_CURRENT_VALUE"],["scope","col",1,"slds-text-title_caps",2,"width","3.25rem"],["label","LBL_NEW_VALUE"],[4,"ngFor","ngForOf"],[1,"slds-button","slds-button--neutral",3,"click"],["label","LBL_CANCEL"],[1,"slds-button","slds-button--brand",3,"click"],["label","LBL_SAVE"],[1,"slds-hint-parent"],[1,"slds-grid","slds-grid--align-spread","slds-grid--vertical-align-center"],[2,"margin-right","0",3,"fieldname"],[3,"click"],["icon","clock","size","x-small"],[1,"slds-grid","slds-grid--vertical-align-center"],[1,"slds-radio","slds-p-right--x-small"],["type","radio","checked","",3,"id","name","click"],[1,"slds-radio__label",3,"for"],[1,"slds-radio_faux"],[1,"slds-box","slds-box--xx-small","slds-p-vertical--x-small",2,"width","100%"],[3,"fieldmodule","fieldname","fieldvalue"],[1,"slds-text-align--center"],["icon","forward","size","x-small"],["type","radio",3,"id","name","click"],[3,"fieldname","fielddisplayclass"],[4,"ngIf"],["colspan","4",2,"border-top","none"],[3,"change",4,"ngFor","ngForOf"],[3,"change"]],template:function(e,t){1&e&&(m.j41(0,"system-modal",0)(1,"system-modal-header",1),m.nrm(2,"system-label",2),m.k0s(),m.j41(3,"system-modal-content",3)(4,"div",4)(5,"div",5),m.nrm(6,"system-label",6),m.k0s(),m.j41(7,"div",7),m.nrm(8,"system-label",8),m.k0s()(),m.j41(9,"table",9)(10,"thead")(11,"tr",10)(12,"th",11)(13,"div",12),m.nrm(14,"system-label",13),m.k0s()(),m.j41(15,"th",14)(16,"div",12),m.nrm(17,"system-label",15),m.k0s()(),m.nrm(18,"th",16),m.j41(19,"th",14)(20,"div",12),m.nrm(21,"system-label",17),m.k0s()()()(),m.j41(22,"tbody"),m.DNE(23,zi,26,13,"ng-container",18),m.k0s()()(),m.j41(24,"system-modal-footer")(25,"button",19),m.bIt("click",(function(){return t.cancel()})),m.nrm(26,"system-label",20),m.k0s(),m.j41(27,"button",21),m.bIt("click",(function(){return t.save()})),m.nrm(28,"system-label",22),m.k0s()()()),2&e&&(m.R7$(),m.Y8G("hiddenCloseButton",!0),m.R7$(22),m.Y8G("ngForOf",t._conflicts))},dependencies:[i.Sq,i.bT,Ui.b,Te.y,S.W,Be.D,$e.I,Oe.Q,Xe.C,E.B,Yi,Vi],styles:["\n\n\n\n\n\n\n\n\n\n\ntable[_ngcontent-%COMP%]{border-bottom:none}","\n\n\n\n\n\n\n\n\n\n\ntable[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:last-child   td[_ngcontent-%COMP%]{border-bottom:none}"]})}return ObjectOptimisticLockingModal})();var qi=s(56367),Ji=s(44149),Wi=s(74),Ki=s(57714);function Qi(e,t){if(1&e&&(m.j41(0,"option",19),m.nrm(1,"system-label",1),m.k0s()),2&e){const e=t.$implicit;m.Y8G("value",e.component),m.R7$(),m.Y8G("label",e.label)}}function Zi(e,t){if(1&e){const e=m.RV6();m.j41(0,"div",20)(1,"div",7)(2,"system-checkbox",21),m.mxI("ngModelChange",(function(t){m.eBV(e);const s=m.XpG();return m.DH7(s.globallist,t)||(s.globallist=t),m.Njj(t)})),m.nrm(3,"system-label",22),m.k0s()()()}if(2&e){const e=m.XpG();m.R7$(2),m.R50("ngModel",e.globallist)}}let en=(()=>{class ObjectListViewSettingsAddlistModal{constructor(e,t,s,i){this.language=e,this.session=t,this.metadata=s,this.modellist=i,this.modalmode="add",this.listname="",this.globallist=!1,this.self={},this.componentListOptions=[]}ngOnInit(){this.loadComponentListOptions(),"edit"===this.modalmode&&(this.listname=this.modellist.currentList.name,this.globallist=this.modellist.getGlobal(),this.listcomponent=this.modellist.currentList.listcomponent)}loadComponentListOptions(){let e=this.modellist.metadata.getComponentConfig("ObjectListView",this.modellist.module),t=this.modellist.metadata.getComponentSetObjects(e.componentset);this.componentListOptions=t.map((e=>({component:e.component,label:e.componentconfig.name}))),this.listcomponent=this.componentListOptions[0].component}close(){this.self.destroy()}canSave(){return!(this.listname.length>0)}get isadmin(){return this.session.isAdmin||this.metadata.checkModuleAcl(this.modellist.module,"moduleadmin")}save(){if(this.listname.length>0){const e={name:this.listname,listcomponent:this.listcomponent,global:this.globallist?"1":"0"};switch(this.modalmode){case"add":this.modellist.addListType(e).subscribe((e=>{this.close()}));break;case"edit":this.modellist.updateListType(e).subscribe((e=>{this.close()}))}}}static#e=this.ɵfac=function(e){return new(e||ObjectListViewSettingsAddlistModal)(m.rXU(h.B),m.rXU(Nt.d),m.rXU(b.yu),m.rXU(v.K))};static#t=this.ɵcmp=m.VBU({type:ObjectListViewSettingsAddlistModal,selectors:[["object-listview-settings-addlistmodal"]],inputs:{modalmode:"modalmode"},decls:25,vars:6,consts:[[3,"close"],[3,"label"],[1,"slds-form--stacked"],[1,"slds-form-element"],[1,"slds-form-element__label"],[1,"slds-required"],["label","LBL_NEWLISTNAME"],[1,"slds-form-element__control"],["type","text","autofocus","",1,"slds-input",3,"ngModel","ngModelChange"],[1,"slds-form-element","slds-p-vertical--small"],["label","LBL_TYPE"],[1,"slds-select_container"],[1,"slds-select",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["class","slds-form-element slds-m-vertical--x-small",4,"ngIf"],[1,"slds-button","slds-button--neutral",3,"click"],["label","LBL_CANCEL"],[1,"slds-button","slds-button--brand",3,"disabled","click"],["label","LBL_SAVE"],[3,"value"],[1,"slds-form-element","slds-m-vertical--x-small"],[3,"ngModel","ngModelChange"],["label","LBL_GLOBALVISIBLE"]],template:function(e,t){1&e&&(m.j41(0,"system-modal")(1,"system-modal-header",0),m.bIt("close",(function(){return t.close()})),m.nrm(2,"system-label",1),m.k0s(),m.j41(3,"system-modal-content")(4,"div",2)(5,"div",3)(6,"label",4)(7,"abbr",5),m.EFF(8,"*"),m.k0s(),m.nrm(9,"system-label",6),m.k0s(),m.j41(10,"div",7)(11,"input",8),m.mxI("ngModelChange",(function(e){return m.DH7(t.listname,e)||(t.listname=e),e})),m.k0s()()(),m.j41(12,"div",9)(13,"label",4),m.nrm(14,"system-label",10),m.k0s(),m.j41(15,"div",7)(16,"div",11)(17,"select",12),m.mxI("ngModelChange",(function(e){return m.DH7(t.listcomponent,e)||(t.listcomponent=e),e})),m.DNE(18,Qi,2,2,"option",13),m.k0s()()()(),m.DNE(19,Zi,4,1,"div",14),m.k0s()(),m.j41(20,"system-modal-footer")(21,"button",15),m.bIt("click",(function(){return t.close()})),m.nrm(22,"system-label",16),m.k0s(),m.j41(23,"button",17),m.bIt("click",(function(){return t.save()})),m.nrm(24,"system-label",18),m.k0s()()()),2&e&&(m.R7$(2),m.Y8G("label","LBL_"+t.modalmode.toUpperCase()+"LIST"),m.R7$(9),m.R50("ngModel",t.listname),m.R7$(6),m.R50("ngModel",t.listcomponent),m.R7$(),m.Y8G("ngForOf",t.componentListOptions),m.R7$(),m.Y8G("ngIf",t.isadmin),m.R7$(4),m.Y8G("disabled",t.canSave()))},dependencies:[i.Sq,i.bT,l.xH,l.y7,l.me,l.wz,l.BC,l.vS,vi.f,S.W,Be.D,$e.I,Oe.Q,Xe.C],encapsulation:2})}return ObjectListViewSettingsAddlistModal})();function tn(e,t){if(1&e){const e=m.RV6();m.j41(0,"div",18),m.bIt("click",(function(){const t=m.eBV(e).$implicit,s=m.XpG();return m.Njj(s.selectField("available",t.id))})),m.j41(1,"span",19),m.nrm(2,"system-label-fieldname",20),m.j41(3,"span",21),m.EFF(4),m.k0s()()()}if(2&e){const e=t.$implicit,s=m.XpG();m.Y8G("cdkDragData",e),m.BMQ("aria-selected",s.isSelected("available",e.id)),m.R7$(2),m.Y8G("module",s.modellist.module)("field",e.field)("fieldconfig",e.fieldconfig),m.R7$(2),m.SpI("(",e.field,")")}}function sn(e,t){if(1&e){const e=m.RV6();m.j41(0,"div",18),m.bIt("click",(function(){const t=m.eBV(e).$implicit,s=m.XpG();return m.Njj(s.selectField("list",t.id))})),m.j41(1,"span",19),m.nrm(2,"system-label-fieldname",20),m.j41(3,"span",21),m.EFF(4),m.k0s()()()}if(2&e){const e=t.$implicit,s=m.XpG();m.Y8G("cdkDragData",e),m.BMQ("aria-selected",s.isSelected("list",e.id)),m.R7$(2),m.Y8G("module",s.modellist.module)("field",e.field)("fieldconfig",e.fieldconfig),m.R7$(2),m.SpI("(",e.field,")")}}const nn=e=>[e];let ln=(()=>{class ObjectListViewSettingsSetfieldsModal{constructor(e,t,s){this.metadata=e,this.language=t,this.modellist=s,this.self={},this.listFields=[],this.availableFields=[],this.selectedAvailableFields=[],this.selectedListFields=[],this.listFields=_.clone(this.modellist.listfields);let i=this.metadata.getComponentConfig("ObjectList",this.modellist.module),n=this.metadata.getFieldSetFields(i.fieldset);for(let e of n)this.listFields.find((t=>t.id==e.id))||this.availableFields.push({id:e.id,field:e.field,fieldconfig:e.fieldconfig});this.availableFields.length>0&&this.sortAvailableFields()}sortAvailableFields(){this.availableFields=this.availableFields.sort(((e,t)=>this.language.getFieldDisplayName(this.modellist.module,e.field,e.fieldconfig).toLowerCase()>this.language.getFieldDisplayName(this.modellist.module,t.field,t.fieldconfig).toLowerCase()?1:-1))}close(){this.self.destroy()}canSet(){return this.listFields.length>0}set(){this.canSet()&&(this.modellist.listfields=this.listFields,this.close())}saveAndSet(){this.canSet()&&(this.modellist.listfields=this.listFields,this.modellist.updateListType().subscribe((()=>this.close())))}onFieldDrop(e){let t=e.previousContainer.data.splice(e.previousIndex,1);e.container.data.splice(e.currentIndex,0,t[0])}selectField(e,t){switch(e){case"available":this.selectedAvailableFields=[t];break;case"list":this.selectedListFields=[t]}}isSelected(e,t){switch(e){case"available":return this.selectedAvailableFields.indexOf(t)>=0;case"list":return this.selectedListFields.indexOf(t)>=0}}moveFields(e){switch(e){case"available":this.selectedAvailableFields.forEach((e=>{this.availableFields.some(((t,s)=>{if(e==t.field)return this.listFields.push(this.availableFields.splice(s,1)[0]),!0}))})),this.selectedAvailableFields=[];break;case"list":this.selectedListFields.forEach((e=>{this.listFields.some(((t,s)=>{if(e==t.field)return this.availableFields.push(this.listFields.splice(s,1)[0]),!0}))})),this.selectedListFields=[],this.sortAvailableFields()}}static#e=this.ɵfac=function(e){return new(e||ObjectListViewSettingsSetfieldsModal)(m.rXU(b.yu),m.rXU(h.B),m.rXU(v.K))};static#t=this.ɵcmp=m.VBU({type:ObjectListViewSettingsSetfieldsModal,selectors:[["object-listview-settings-setfields-modal"]],decls:24,vars:12,consts:[[3,"close"],["label","LBL_SETFIELDS"],[1,"slds-grid"],[1,"slds-form-element","slds-p-horizontal--small","slds-size--1-of-2"],[1,"slds-form-element__label"],["label","LBL_AVAILABLE_FIELDS"],["cdkDropList","",1,"slds-picklist","slds-picklist__options","slds-size--1-of-1",2,"height","50vh",3,"cdkDropListData","cdkDropListConnectedTo","cdkDropListDropped"],["listOne","cdkDropList"],["cdkDrag","","class","slds-drag--preview slds-picklist__item","role","option",3,"cdkDragData","click",4,"ngFor","ngForOf"],["label","LBL_SELECTED_FIELDS"],["cdkDropList","",1,"slds-picklist","slds-picklist__options","slds-size--1-of-1","cdk-drag",2,"height","50vh",3,"cdkDropListData","cdkDropListConnectedTo","cdkDropListDropped"],["listTwo","cdkDropList"],[1,"slds-button","slds-button--neutral",3,"click"],["label","LBL_CANCEL"],[1,"slds-button","slds-button--neutral",3,"disabled","click"],["label","LBL_SAVE_AND_SET"],[1,"slds-button","slds-button--brand",3,"disabled","click"],["label","LBL_SET"],["cdkDrag","","role","option",1,"slds-drag--preview","slds-picklist__item",3,"cdkDragData","click"],[1,"slds-truncate"],[3,"module","field","fieldconfig"],[1,"slds-text-color--inverse-weak"]],template:function(e,t){if(1&e&&(m.j41(0,"system-modal")(1,"system-modal-header",0),m.bIt("close",(function(){return t.close()})),m.nrm(2,"system-label",1),m.k0s(),m.j41(3,"system-modal-content")(4,"div",2)(5,"div",3)(6,"span",4),m.nrm(7,"system-label",5),m.k0s(),m.j41(8,"div",6,7),m.bIt("cdkDropListDropped",(function(e){return t.onFieldDrop(e)})),m.DNE(10,tn,5,6,"div",8),m.k0s()(),m.j41(11,"div",3)(12,"span",4),m.nrm(13,"system-label",9),m.k0s(),m.j41(14,"div",10,11),m.bIt("cdkDropListDropped",(function(e){return t.onFieldDrop(e)})),m.DNE(16,sn,5,6,"div",8),m.k0s()()()(),m.j41(17,"system-modal-footer")(18,"button",12),m.bIt("click",(function(){return t.close()})),m.nrm(19,"system-label",13),m.k0s(),m.j41(20,"button",14),m.bIt("click",(function(){return t.saveAndSet()})),m.nrm(21,"system-label",15),m.k0s(),m.j41(22,"button",16),m.bIt("click",(function(){return t.set()})),m.nrm(23,"system-label",17),m.k0s()()()),2&e){const e=m.sdS(9),s=m.sdS(15);m.R7$(8),m.Y8G("cdkDropListData",t.availableFields)("cdkDropListConnectedTo",m.eq3(8,nn,s)),m.R7$(2),m.Y8G("ngForOf",t.availableFields),m.R7$(4),m.Y8G("cdkDropListData",t.listFields)("cdkDropListConnectedTo",m.eq3(10,nn,e)),m.R7$(2),m.Y8G("ngForOf",t.listFields),m.R7$(4),m.Y8G("disabled",!t.canSet()),m.R7$(2),m.Y8G("disabled",!t.canSet())}},dependencies:[i.Sq,n.O7,n.T1,S.W,Ae.P,Be.D,$e.I,Oe.Q,Xe.C],encapsulation:2})}return ObjectListViewSettingsSetfieldsModal})();const on=["container"];let an=(()=>{class ObjectRecordViewContainer{constructor(e,t,s,i,n,l,o){this.navigation=e,this.navigationtab=t,this.activatedRoute=s,this.metadata=i,this.model=n,this.broadcast=l,this.elementref=o,this.module="",this.id="",this.initialized=!1,this.componentset="",this.componentRefs=[],this.componentSubscriptions=new A.yU,this.componentSubscriptions.add(this.navigationtab.activeRoute$.subscribe((e=>{this.module==e.params.module&&this.id==e.params.id||(this.module=e.params.module,this.id=e.params.id,this.initialized&&this.buildContainer())}))),this.componentSubscriptions.add(this.broadcast.message$.subscribe((e=>{this.handleMessage(e)})))}handleMessage(e){if("applauncher.setrole"===e.messagetype)this.buildContainer()}ngAfterViewInit(){this.initialized=!0,this.buildContainer()}ngOnDestroy(){this.componentSubscriptions.unsubscribe()}buildContainer(){for(let e of this.componentRefs)e.destroy();let e=this.metadata.getComponentConfig("ObjectRecordViewContainer",this.module);this.componentset=e.componentset;for(let e of this.metadata.getComponentSetObjects(this.componentset))this.metadata.addComponent(e.component,this.container).subscribe((t=>{t.instance.componentconfig=e.componentconfig,this.componentRefs.push(t)}))}static#e=this.ɵfac=function(e){return new(e||ObjectRecordViewContainer)(m.rXU(Re.L),m.rXU(Ie._),m.rXU(o.nX),m.rXU(b.yu),m.rXU(g.g),m.rXU(ke.m),m.rXU(m.aKT))};static#t=this.ɵcmp=m.VBU({type:ObjectRecordViewContainer,selectors:[["object-recordview-container"]],viewQuery:function(e,t){if(1&e&&m.GBs(on,7,m.c1b),2&e){let e;m.mGM(e=m.lsd())&&(t.container=e.first)}},features:[m.Jv_([g.g])],decls:2,vars:0,consts:[["container",""]],template:function(e,t){1&e&&m.nrm(0,"div",null,0)},encapsulation:2})}return ObjectRecordViewContainer})();var rn=s(17266),dn=s(60595);let cn=(()=>{class ObjectRecordView{constructor(e,t,s,i,n,l,o){this.broadcast=e,this.navigation=t,this.navigationtab=s,this.activatedRoute=i,this.metadata=n,this.model=l,this.favorite=o,this.moduleName="",this.componentconfig={},this.componentSubscriptions=new A.yU,this.modelloaded=!1}ngOnInit(){this.moduleName=this.navigationtab.activeRoute.params.module,this.model.module=this.moduleName,this.model.id=this.navigationtab.activeRoute.params.id,this.model.getData(!0,"detailview",!0,!0).subscribe({next:e=>{this.modelloaded=!0},error:()=>{this.navigationtab.closeTab()}}),this.componentconfig=this.metadata.getComponentConfig("ObjectRecordView",this.moduleName),this.componentSubscriptions.add(this.broadcast.message$.subscribe((e=>{this.handleMessage(e)}))),this.componentSubscriptions.add(this.model.data$.subscribe((()=>this.setTabTitle())))}ngOnDestroy(){this.componentSubscriptions.unsubscribe()}handleMessage(e){if("model.save"===e.messagetype)this.model.module===e.messagedata.module&&this.model.id===e.messagedata.id&&(this.model.setData(e.messagedata.data),this.navigationtab.setTabInfo({displayname:e.messagedata.data.summary_text,displaymodule:this.model.module}))}setTabTitle(){this.navigationtab.setTabInfo({displayname:this.model.getField("summary_text"),displaymodule:this.model.module})}static#e=this.ɵfac=function(e){return new(e||ObjectRecordView)(m.rXU(ke.m),m.rXU(Re.L),m.rXU(Ie._),m.rXU(o.nX),m.rXU(b.yu),m.rXU(g.g),m.rXU(rn.B))};static#t=this.ɵcmp=m.VBU({type:ObjectRecordView,selectors:[["object-recordview"]],features:[m.Jv_([g.g])],decls:3,vars:2,consts:[[3,"componentset"],["system-to-bottom","",1,"slds-theme--default"]],template:function(e,t){1&e&&(m.nrm(0,"system-componentset",0),m.j41(1,"div",1),m.nrm(2,"system-componentset",0),m.k0s()),2&e&&(m.Y8G("componentset",t.componentconfig.header),m.R7$(2),m.Y8G("componentset",t.componentconfig.main))},dependencies:[dn.F,B.b],encapsulation:2})}return ObjectRecordView})();const un=["contentcontainer"];let mn=(()=>{class ObjectRecordViewDetail1{constructor(e,t,s){this.metadata=e,this.model=t,this.elementRef=s,this.initialized=!1,this.componentconfig={}}ngOnInit(){this.getComponentconfig()}getComponentconfig(){_.isEmpty(this.componentconfig)&&(this.componentconfig=this.metadata.getComponentConfig("ObjectRecordViewDetail1",this.model.module))}static#e=this.ɵfac=function(e){return new(e||ObjectRecordViewDetail1)(m.rXU(b.yu),m.rXU(g.g),m.rXU(m.aKT))};static#t=this.ɵcmp=m.VBU({type:ObjectRecordViewDetail1,selectors:[["object-recordview-detail-1"]],viewQuery:function(e,t){if(1&e&&m.GBs(un,7,m.c1b),2&e){let e;m.mGM(e=m.lsd())&&(t.contentcontainer=e.first)}},decls:2,vars:1,consts:[[1,"slds-p-around--small","slds-height_full"],[3,"componentset"]],template:function(e,t){1&e&&(m.j41(0,"div",0),m.nrm(1,"system-componentset",1),m.k0s()),2&e&&(m.R7$(),m.Y8G("componentset",t.componentconfig.main))},dependencies:[dn.F],encapsulation:2})}return ObjectRecordViewDetail1})(),hn=(()=>{class ObjectRecordViewDetail2and1{constructor(e,t){this.metadata=e,this.model=t,this.initialized=!1,this.componentconfig={}}ngOnInit(){this.getComponentconfig()}getComponentconfig(){_.isEmpty(this.componentconfig)&&(this.componentconfig=this.metadata.getComponentConfig("ObjectRecordViewDetail2and1",this.model.module))}static#e=this.ɵfac=function(e){return new(e||ObjectRecordViewDetail2and1)(m.rXU(b.yu),m.rXU(g.g))};static#t=this.ɵcmp=m.VBU({type:ObjectRecordViewDetail2and1,selectors:[["object-recordview-detail-2and1"]],decls:5,vars:2,consts:[[1,"slds-grid","slds-wrap","slds-p-top--small","slds-height_full"],[1,"slds-col","slds-p-horizontal--small","slds-size--1-of-1","slds-medium-size--1-of-2","slds-large-size--2-of-3","slds-height_full"],[3,"componentset"],[1,"slds-col","slds-p-horizontal--small","slds-size--1-of-1","slds-medium-size--1-of-2","slds-large-size--1-of-3","slds-height_full"]],template:function(e,t){1&e&&(m.j41(0,"div",0)(1,"div",1),m.nrm(2,"system-componentset",2),m.k0s(),m.j41(3,"div",3),m.nrm(4,"system-componentset",2),m.k0s()()),2&e&&(m.R7$(2),m.Y8G("componentset",t.componentconfig.main),m.R7$(2),m.Y8G("componentset",t.componentconfig.sidebar))},dependencies:[dn.F],encapsulation:2})}return ObjectRecordViewDetail2and1})(),gn=(()=>{class ObjectRecordViewDetailsplit{constructor(e,t){this.metadata=e,this.model=t,this.componentconfig={}}ngOnInit(){this.getComponentconfig()}getComponentconfig(){(_.isEmpty(this.componentconfig)||!this.componentconfig.left&&!this.componentconfig.right)&&(this.componentconfig=this.metadata.getComponentConfig("ObjectRecordViewDetailsplit",this.model.module))}static#e=this.ɵfac=function(e){return new(e||ObjectRecordViewDetailsplit)(m.rXU(b.yu),m.rXU(g.g))};static#t=this.ɵcmp=m.VBU({type:ObjectRecordViewDetailsplit,selectors:[["object-recordview-detail-split"]],decls:5,vars:2,consts:[[1,"slds-grid","slds-wrap","slds-p-top--small","slds-height_full"],[1,"slds-col","slds-p-horizontal--small","slds-size--1-of-1","slds-medium-size--1-of-2","slds-large-size--1-of-2","slds-height_full"],[3,"componentset"]],template:function(e,t){1&e&&(m.j41(0,"div",0)(1,"div",1),m.nrm(2,"system-componentset",2),m.k0s(),m.j41(3,"div",1),m.nrm(4,"system-componentset",2),m.k0s()()),2&e&&(m.R7$(2),m.Y8G("componentset",t.componentconfig.left),m.R7$(2),m.Y8G("componentset",t.componentconfig.right))},dependencies:[dn.F],encapsulation:2})}return ObjectRecordViewDetailsplit})();var pn=s(44985),fn=s(37263),bn=s(32130),yn=s(29895);function vn(e,t){if(1&e&&(m.j41(0,"span"),m.EFF(1),m.k0s()),2&e){const e=m.XpG();m.R7$(),m.JRh(e.model.data.summary_text)}}function _n(e,t){1&e&&(m.j41(0,"span"),m.nrm(1,"system-label",17),m.k0s())}function kn(e,t){if(1&e){const e=m.RV6();m.j41(0,"div",18)(1,"object-edit-modal-dialog-duplicates-panel",19),m.bIt("close",(function(){m.eBV(e);const t=m.XpG();return m.Njj(t.showDuplicates=!1)})),m.k0s()()}}const Rn=()=>({displayLabels:!1});let In=(()=>{class ObjectRecordCreateContainer{constructor(e,t,s,i,n,l,o){this.router=e,this.language=t,this.model=s,this.view=i,this.metadata=n,this.modal=l,this.navigationtab=o,this.duplicates=[],this.showDuplicates=!1,this.showDuplicatesTable=!1,this.preventGoingToRecord=!1,this.view.isEditable=!0,this.view.displayLinks=!1,this.view.setEditMode()}ngOnInit(){let e=this.navigationtab.activeRoute.params;this.model.module=e.module,this.model.id=e.id,this.model.initialize(),this.model.isNew=!0,this.model.startEdit(),this.navigationtab.tabdata?.data&&this.model.setData(this.navigationtab.tabdata.data),this.componentconfig||(this.componentconfig=this.metadata.getComponentConfig(this.constructor.name,this.model.module)),this.metadata.getActionSetItems(this.componentconfig.actionset),this.setHeader()}setHeader(){this.navigationtab.setTabInfo({displaymodule:this.model.module,displayname:""!=this.model.module?this.language.getModuleName(this.model.module,!0):""})}get duplicateCheckEnabled(){return this.model.isNew&&this.metadata.getModuleDuplicatecheck(this.model.module)}handleAction(e){switch(console.log(e),e){case"cancel":this.navigationtab.closeTab();break;case"save":this.navigationtab.closeTab(),this.model.goDetail(this.navigationtab?this.navigationtab.objecttab.parentid:null)}}static#e=this.ɵfac=function(e){return new(e||ObjectRecordCreateContainer)(m.rXU(o.Ix),m.rXU(h.B),m.rXU(g.g),m.rXU(Me.U),m.rXU(b.yu),m.rXU(P.y),m.rXU(Ie._,8))};static#t=this.ɵcmp=m.VBU({type:ObjectRecordCreateContainer,selectors:[["object-record-create-container"]],inputs:{preventGoingToRecord:"preventGoingToRecord"},features:[m.Jv_([g.g,Me.U])],decls:19,vars:11,consts:[[1,"slds-page-header"],[1,"slds-grid"],[1,"slds-col","slds-has-flexi-truncate"],[1,"slds-media","slds-no-space","slds-grow"],[3,"module"],[1,"slds-media__body"],[1,"slds-text-title--caps","slds-line-height--reset"],[1,"slds-grid","slds-grid--vertical-align-center"],[1,"slds-page-header__title","slds-m-right--small","slds-align-middle","slds-truncate"],[3,"fieldset","system-view-provider"],[4,"ngIf"],[1,"slds-m-horizontal--x-small","slds-show--medium","slds-align--absolute-center"],[3,"actionset","actionemitter"],["system-to-bottom","",1,"slds-grid",3,"system-overlay-loading-spinner"],[1,"slds-grid--vertical","slds-grow"],[3,"componentSet"],["class","slds-size--1-of-3 slds-border--left",4,"ngIf"],["label","LBL_NEW"],[1,"slds-size--1-of-3","slds-border--left"],[3,"close"]],template:function(e,t){1&e&&(m.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),m.nrm(4,"system-icon",4),m.j41(5,"div",5)(6,"p",6),m.nrm(7,"system-label-modulename",4),m.k0s(),m.j41(8,"div",7)(9,"h1",8),m.nrm(10,"object-record-fieldset-horizontal-list",9),m.DNE(11,vn,2,1,"span",10)(12,_n,2,0,"span",10),m.k0s()()()()(),m.j41(13,"div",11)(14,"object-action-container",12),m.bIt("actionemitter",(function(e){return t.handleAction(e)})),m.k0s()()()(),m.j41(15,"div",13)(16,"div",14),m.nrm(17,"object-edit-modal-dialog-container",15),m.k0s(),m.DNE(18,kn,2,0,"div",16),m.k0s()),2&e&&(m.R7$(4),m.Y8G("module",t.model.module),m.R7$(3),m.Y8G("module",t.model.module),m.R7$(3),m.Y8G("fieldset",t.componentconfig.fieldset)("system-view-provider",m.lJ4(10,Rn)),m.R7$(),m.Y8G("ngIf",!t.componentconfig.fieldset&&t.model.data.summary_text),m.R7$(),m.Y8G("ngIf",!t.componentconfig.fieldset&&!t.model.data.summary_text),m.R7$(2),m.Y8G("actionset",t.componentconfig.actionset),m.R7$(),m.Y8G("system-overlay-loading-spinner",t.model.isSaving),m.R7$(2),m.Y8G("componentSet",t.componentconfig.componentset),m.R7$(),m.Y8G("ngIf",t.showDuplicates))},dependencies:[i.bT,I.J,S.W,pn.r,B.b,fn.x,bn.M,M.l,ni.A,ui,yn.b],encapsulation:2})}return ObjectRecordCreateContainer})();var xn=s(1876),jn=s(46649);function Gn(e,t){if(1&e){const e=m.RV6();m.j41(0,"li")(1,"span",19),m.bIt("click",(function(){const t=m.eBV(e).index,s=m.XpG(3);return m.Njj(s.removeTag(t))})),m.EFF(2),m.k0s()()}if(2&e){const e=t.$implicit;m.R7$(2),m.SpI(" ",e," ")}}function Cn(e,t){if(1&e&&(m.qex(0),m.j41(1,"ul",17),m.DNE(2,Gn,3,1,"li",18),m.k0s(),m.bVm()),2&e){const e=m.XpG(2);m.R7$(2),m.Y8G("ngForOf",e.tags)}}function wn(e,t){1&e&&(m.j41(0,"div",20),m.nrm(1,"system-label",21),m.k0s())}function Sn(e,t){if(1&e){const e=m.RV6();m.j41(0,"li",25),m.bIt("click",(function(){const t=m.eBV(e).index,s=m.XpG(3);return m.Njj(s.addTag(t))})),m.j41(1,"span",26),m.EFF(2),m.k0s()()}if(2&e){const e=t.$implicit;m.R7$(2),m.SpI(" ",e,"")}}const En=(e,t)=>[e,t];function Ln(e,t){if(1&e&&(m.j41(0,"div",27),m.EFF(1),m.k0s()),2&e){const e=m.XpG(3);m.R7$(),m.JRh(e.language.getLabelFormatted("LBL_NUMBER_OF_SHOWN_TAGS",m.l_i(1,En,e.offeredTags.length,e.numberFilteredTags)))}}function Dn(e,t){if(1&e&&(m.qex(0),m.j41(1,"ul",22),m.DNE(2,Sn,3,1,"li",23),m.k0s(),m.DNE(3,Ln,2,4,"div",24),m.bVm()),2&e){const e=m.XpG(2);m.R7$(2),m.Y8G("ngForOf",e.offeredTags),m.R7$(),m.Y8G("ngIf",e.numberFilteredTags-e.offeredTagsMaxLength>0)}}function Fn(e,t){1&e&&(m.j41(0,"div",28),m.nrm(1,"system-label",29),m.k0s())}function Mn(e,t){if(1&e){const e=m.RV6();m.qex(0),m.j41(1,"div",8),m.DNE(2,Cn,3,1,"ng-container",2)(3,wn,2,0,"ng-template",null,9,m.C5r),m.k0s(),m.j41(5,"div",10)(6,"div",11)(7,"system-utility-icon",12),m.bIt("click",(function(){m.eBV(e);const t=m.XpG();return m.Njj(t.clearFilter())})),m.k0s(),m.j41(8,"input",13,14),m.mxI("ngModelChange",(function(t){m.eBV(e);const s=m.XpG();return m.DH7(s.filter,t)||(s.filter=t),m.Njj(t)})),m.bIt("keyup",(function(){m.eBV(e);const t=m.XpG();return m.Njj(t.changeFilter())})),m.k0s()()(),m.j41(10,"div",15),m.DNE(11,Dn,4,2,"ng-container",2)(12,Fn,2,0,"ng-template",null,16,m.C5r),m.k0s(),m.bVm()}if(2&e){const e=m.sdS(4),t=m.sdS(13),s=m.XpG();m.R7$(2),m.Y8G("ngIf",s.tags.length)("ngIfElse",e),m.R7$(5),m.Y8G("icon","clear")("size","x-small")("addclasses","slds-input__icon slds-input__icon_right slds-icon-text-default"),m.R7$(),m.FS9("placeholder",s.language.getLabel("LBL_ENTER_TAGS_FOR_TAGS")),m.R50("ngModel",s.filter),m.R7$(3),m.Y8G("ngIf",s.offeredTags.length)("ngIfElse",t)}}function Tn(e,t){1&e&&m.nrm(0,"system-spinner")}let Bn=(()=>{class ObjectPageHeaderTagPicker{constructor(e,t,s){this.language=e,this.backend=t,this.toast=s,this.model={},this.self={},this.tags=[],this.allTags=[],this.offeredTags=[],this.offeredTagsMaxLength=20,this.filter="",this.tagsAreParsed=!1,this.allTagsAreLoaded=!1}ngOnInit(){this.backend.getRequest("systags").subscribe((e=>{e.systags&&(this.allTags=e.systags),this.allTagsAreLoaded=!0,this.doFilter()}),(e=>{this.toast.sendToast("Error loading list of available tags.","error",null),this.closeModal()})),this.model.isLoading?this.model.data$.subscribe((()=>{window.setTimeout((()=>{this.parseTags()}),5e3)})):this.parseTags()}parseTags(){try{this.tags=JSON.parse(this.model.data.tags)}catch(e){this.tags=[]}this.tagsAreParsed=!0,this.doFilter()}changeFilter(){this.doFilter()}clearFilter(){this.filter="",this.doFilter()}doFilter(){if(this.tagsAreParsed&&this.allTagsAreLoaded){this.offeredTags.length=0,this.numberFilteredTags=0;for(let e of this.allTags)(0===this.filter.length||e.toLowerCase().indexOf(this.filter.toLowerCase())>=0)&&-1===this.tags.indexOf(e)&&this.numberFilteredTags++<this.offeredTagsMaxLength&&this.offeredTags.push(e)}}addTag(e){-1===this.tags.indexOf(this.offeredTags[e])&&(this.tags.push(this.offeredTags[e]),this.tags.sort(),this.offeredTags.splice(e,1))}removeTag(e){this.tags.splice(e,1),this.doFilter()}saveAndClose(){this.model.setField("tags",JSON.stringify(this.tags)),this.model.save(),this.closeModal()}closeModal(){this.self.destroy()}onModalEscX(){this.closeModal()}static#e=this.ɵfac=function(e){return new(e||ObjectPageHeaderTagPicker)(m.rXU(h.B),m.rXU(ee.H),m.rXU(pe.o))};static#t=this.ɵcmp=m.VBU({type:ObjectPageHeaderTagPicker,selectors:[["object-page-header-tag-picker"]],decls:12,vars:2,consts:[[3,"close"],["label","LBL_ASSIGN_TAGS"],[4,"ngIf","ngIfElse"],["notReady",""],[1,"slds-button","slds-button--neutral",3,"click"],["label","LBL_CANCEL"],[1,"slds-button","slds-button--brand",3,"click"],["label","LBL_SAVE"],[1,"slds-m-bottom--medium"],["noAssignedTags",""],[1,"slds-form-element"],[1,"slds-form-element__control","slds-input-has-icon","slds-input-has-icon_right"],[3,"icon","size","addclasses","click"],["type","text",1,"slds-input",3,"placeholder","ngModel","ngModelChange","keyup"],["fieldFilter",""],[1,"slds-m-top--small"],["noOfferedTags",""],["role","presentation",1,"selectedTags","slds-listbox","slds-listbox_horizontal",2,"line-height","1.7rem"],[4,"ngFor","ngForOf"],[1,"slds-badge",3,"click"],[2,"font-style","italic"],["label","LBL_NO_TAGS_ASSIGNED"],["role","listbox",1,"slds-listbox","slds-listbox_horizontal","offeredTags",2,"line-height","1.5rem"],["role","presentation","style","margin-top:0.2rem",3,"click",4,"ngFor","ngForOf"],["class","slds-m-top--xx-small","style","font-style:italic;text-align:right",4,"ngIf"],["role","presentation",2,"margin-top","0.2rem",3,"click"],[1,"slds-badge","slds-badge_inverse"],[1,"slds-m-top--xx-small",2,"font-style","italic","text-align","right"],[1,"slds-m-top--xx-small",2,"font-style","italic"],["label","LBL_NO_TAGS_FOUND"]],template:function(e,t){if(1&e&&(m.j41(0,"system-modal")(1,"system-modal-header",0),m.bIt("close",(function(){return t.closeModal()})),m.nrm(2,"system-label",1),m.k0s(),m.j41(3,"system-modal-content"),m.DNE(4,Mn,14,9,"ng-container",2)(5,Tn,1,0,"ng-template",null,3,m.C5r),m.k0s(),m.j41(7,"system-modal-footer")(8,"button",4),m.bIt("click",(function(){return t.closeModal()})),m.nrm(9,"system-label",5),m.k0s(),m.j41(10,"button",6),m.bIt("click",(function(){return t.saveAndClose()})),m.nrm(11,"system-label",7),m.k0s()()()),2&e){const e=m.sdS(6);m.R7$(4),m.Y8G("ngIf",t.allTagsAreLoaded&&t.tagsAreParsed)("ngIfElse",e)}},dependencies:[i.Sq,i.bT,l.me,l.BC,l.vS,S.W,Be.D,$e.I,Oe.Q,Xe.C,Dt.P,E.B],styles:["\n\n\n\n\n\n\n\n\n\n\n.offeredTags[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{cursor:pointer}","\n\n\n\n\n\n\n\n\n\n\n.selectedTags[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-bottom:.125rem}","\n\n\n\n\n\n\n\n\n\n\n.selectedTags[_ngcontent-%COMP%]{margin-bottom:-.125rem}","\n\n\n\n\n\n\n\n\n\n\n[_ngcontent-%COMP%]::placeholder{font-style:italic}","\n\n\n\n\n\n\n\n\n\n\n.slds-badge[_ngcontent-%COMP%]{font-size:.75rem;line-height:2;padding-top:.1875rem;text-transform:none}","\n\n\n\n\n\n\n\n\n\n\n.slds-badge[_ngcontent-%COMP%]:hover{cursor:pointer;filter:brightness(90%)}","\n\n\n\n\n\n\n\n\n\n\n.slds-badge.slds-badge_inverse[_ngcontent-%COMP%]:hover{filter:brightness(133%)}"]})}return ObjectPageHeaderTagPicker})();const $n=["object-page-header-detail-row-field",""];let On=(()=>{class ObjectPageHeaderDetailRowField{constructor(){this.moduleName="",this.field={}}static#e=this.ɵfac=function(e){return new(e||ObjectPageHeaderDetailRowField)};static#t=this.ɵcmp=m.VBU({type:ObjectPageHeaderDetailRowField,selectors:[["","object-page-header-detail-row-field",""]],inputs:{moduleName:"moduleName",field:"field"},attrs:$n,decls:2,vars:3,consts:[[1,""],[3,"field","fieldconfig","fielddisplayclass"]],template:function(e,t){1&e&&(m.j41(0,"div",0),m.nrm(1,"field-container",1),m.k0s()),2&e&&(m.R7$(),m.Y8G("field",t.field.field)("fieldconfig",t.field.fieldconfig)("fielddisplayclass","slds-text-body--regular slds-truncate slds-m-vertical--xx-small"))},dependencies:[Te.y],encapsulation:2})}return ObjectPageHeaderDetailRowField})();function Xn(e,t){if(1&e&&m.nrm(0,"li",9),2&e){const e=m.XpG().$implicit;m.Y8G("field",e)}}function Un(e,t){if(1&e&&(m.qex(0),m.DNE(1,Xn,1,1,"li",8),m.bVm()),2&e){const e=t.$implicit,s=m.XpG(2);m.R7$(),m.Y8G("ngIf",s.displayField(e))}}function Yn(e,t){if(1&e&&(m.j41(0,"ul",6),m.DNE(1,Un,2,1,"ng-container",7),m.k0s()),2&e){const e=m.XpG();m.R7$(),m.Y8G("ngForOf",e.getFields())}}function Nn(e,t){if(1&e&&m.nrm(0,"field-label",16),2&e){const e=m.XpG(2).$implicit;m.Y8G("fieldname",e.field)("fieldconfig",e.fieldconfig)("addclasses","slds-truncate")}}function Vn(e,t){1&e&&(m.j41(0,"span",17),m.EFF(1,":"),m.k0s())}function An(e,t){if(1&e&&(m.j41(0,"li",12),m.DNE(1,Nn,1,3,"field-label",13)(2,Vn,2,0,"span",14),m.nrm(3,"field-container",15),m.k0s()),2&e){const e=m.XpG().$implicit,t=m.XpG(2);m.R7$(),m.Y8G("ngIf",t.showLabel(e.fieldconfig)),m.R7$(),m.Y8G("ngIf",!e.fieldconfig.hidelabel),m.R7$(),m.Y8G("field",e.field)("fieldconfig",e.fieldconfig)("fielddisplayclass","slds-truncate")}}function Pn(e,t){if(1&e&&(m.qex(0),m.DNE(1,An,4,5,"li",11),m.bVm()),2&e){const e=t.$implicit,s=m.XpG(2);m.R7$(),m.Y8G("ngIf",s.model.data[e.field]&&s.displayField(e))}}function zn(e,t){if(1&e&&(m.j41(0,"ul",10),m.DNE(1,Pn,2,1,"ng-container",7),m.k0s()),2&e){const e=m.XpG();m.R7$(),m.Y8G("ngForOf",e.fields)}}let Hn=(()=>{class ObjectPageHeaderDetailRow{constructor(e,t,s){this.metadata=e,this.model=t,this.view=s,this.fieldSet="",this.collapsed=!0,this.fields=[]}ngOnInit(){this.setLabelLength(),this.fields=this.getFields()}getFields(){let e=this.metadata.getFieldSetFields(this.fieldSet);if(this.model.acl_fieldcontrol){let t=[];for(let s in e)this.metadata.hasField(this.model.module,e[s].field)&&(this.model.acl_fieldcontrol[e[s].field]&&"1"===this.model.acl_fieldcontrol[e[s].field]||t.push(e[s]));return t}return e}displayField(e){return!e.fieldconfig?.requiredmodelstate||this.model.checkModelState(e.fieldconfig.requiredmodelstate)}toggleCollapsed(){this.collapsed=!this.collapsed,this.setLabelLength()}get toggleIcon(){return this.collapsed?"chevrondown":"chevronup"}setLabelLength(){this.collapsed?(this.view.displayLabels=!1,this.view.labels="short"):(this.view.displayLabels=!0,this.view.labels="default")}showLabel(e){return!0!==e.hidelabel}static#e=this.ɵfac=function(e){return new(e||ObjectPageHeaderDetailRow)(m.rXU(b.yu),m.rXU(g.g),m.rXU(Me.U))};static#t=this.ɵcmp=m.VBU({type:ObjectPageHeaderDetailRow,selectors:[["object-page-header-detail-row"]],inputs:{fieldSet:"fieldSet",collapsed:"collapsed"},features:[m.Jv_([Me.U])],decls:7,vars:3,consts:[[1,"slds-grid","slds-grid--vertical-align-start"],["class","slds-grid",4,"ngIf"],["class","slds-list--horizontal slds-has-dividers--left",4,"ngIf"],[1,"slds-col--bump-left"],[1,"slds-button","slds-button--icon",3,"click"],[3,"icon"],[1,"slds-grid"],[4,"ngFor","ngForOf"],["object-page-header-detail-row-field","","class","slds-m-right--medium",3,"field",4,"ngIf"],["object-page-header-detail-row-field","",1,"slds-m-right--medium",3,"field"],[1,"slds-list--horizontal","slds-has-dividers--left"],["class","slds-item slds-grid slds-grid--vertical-align-center",4,"ngIf"],[1,"slds-item","slds-grid","slds-grid--vertical-align-center"],[3,"fieldname","fieldconfig","addclasses",4,"ngIf"],["class","slds-p-right--xx-small",4,"ngIf"],[3,"field","fieldconfig","fielddisplayclass"],[3,"fieldname","fieldconfig","addclasses"],[1,"slds-p-right--xx-small"]],template:function(e,t){1&e&&(m.j41(0,"div",0)(1,"div"),m.DNE(2,Yn,2,1,"ul",1)(3,zn,2,1,"ul",2),m.k0s(),m.j41(4,"div",3)(5,"button",4),m.bIt("click",(function(){return t.toggleCollapsed()})),m.nrm(6,"system-button-icon",5),m.k0s()()()),2&e&&(m.R7$(2),m.Y8G("ngIf",!t.collapsed),m.R7$(),m.Y8G("ngIf",t.collapsed),m.R7$(3),m.Y8G("icon",t.toggleIcon))},dependencies:[i.Sq,i.bT,Ui.b,Te.y,R.t,On],encapsulation:2})}return ObjectPageHeaderDetailRow})(),qn=(()=>{class ObjectPageHeaderDetails{constructor(e,t,s,i,n){this.elementref=e,this.activatedRoute=t,this.router=s,this.model=i,this.metadata=n,this.componentconfig={},this.collapsed=!1}ngOnInit(){"{}"==JSON.stringify(this.componentconfig)&&(this.componentconfig=this.metadata.getComponentConfig("ObjectPageHeaderDetails",this.model.module),this.collapsed=!!this.componentconfig.collapsed&&this.componentconfig.collapsed,this.fieldset=this.componentconfig.fieldset?this.componentconfig.fieldset:"")}static#e=this.ɵfac=function(e){return new(e||ObjectPageHeaderDetails)(m.rXU(m.aKT),m.rXU(o.nX),m.rXU(o.Ix),m.rXU(g.g),m.rXU(b.yu))};static#t=this.ɵcmp=m.VBU({type:ObjectPageHeaderDetails,selectors:[["object-page-header-details"]],decls:2,vars:2,consts:[[1,"slds-p-horizontal--medium","slds-p-vertical--xx-small","slds-border--bottom","slds-scrollable--x"],[3,"fieldSet","collapsed"]],template:function(e,t){1&e&&(m.j41(0,"div",0),m.nrm(1,"object-page-header-detail-row",1),m.k0s()),2&e&&(m.R7$(),m.Y8G("fieldSet",t.fieldset)("collapsed",t.collapsed))},dependencies:[Hn],encapsulation:2})}return ObjectPageHeaderDetails})();var Jn=s(88457);let Wn=(()=>{class ObjectTabContainerItem{constructor(e,t,s){this.metadata=e,this.fielderrorgroup=t,this.model=s,this.componentRefs=[],this.initialized=!1,this.taberrors=new m.bkB}ngOnInit(){this.fielderrorgroup.change$.subscribe((e=>{this.taberrors.emit(e)}))}ngAfterViewInit(){this.initialized=!0}ngOnDestroy(){for(let e of this.componentRefs)e.destroy()}static#e=this.ɵfac=function(e){return new(e||ObjectTabContainerItem)(m.rXU(b.yu),m.rXU(Jn.W),m.rXU(g.g))};static#t=this.ɵcmp=m.VBU({type:ObjectTabContainerItem,selectors:[["object-tab-container-item"]],inputs:{componentset:"componentset"},outputs:{taberrors:"taberrors"},features:[m.Jv_([Jn.W])],decls:1,vars:1,consts:[[3,"componentset"]],template:function(e,t){1&e&&m.nrm(0,"system-componentset",0),2&e&&m.Y8G("componentset",t.componentset)},dependencies:[dn.F],encapsulation:2})}return ObjectTabContainerItem})();var Kn=s(10650);function Qn(e,t){if(1&e&&(m.qex(0),m.nrm(1,"system-label",2),m.bVm()),2&e){const e=m.XpG();m.R7$(),m.Y8G("label",e.tab.name)}}let Zn=(()=>{class ObjectTabContainerItemHeader{constructor(e,t){this.metadata=e,this.language=t,this.tab=[]}get displayName(){return!this.tab.headercomponent&&this.tab.name&&""!=this.tab.name}static#e=this.ɵfac=function(e){return new(e||ObjectTabContainerItemHeader)(m.rXU(b.yu),m.rXU(h.B))};static#t=this.ɵcmp=m.VBU({type:ObjectTabContainerItemHeader,selectors:[["object-tab-container-item-header"]],inputs:{tab:"tab"},decls:2,vars:2,consts:[[4,"ngIf"],[3,"component"],[3,"label"]],template:function(e,t){1&e&&(m.DNE(0,Qn,2,1,"ng-container",0),m.nrm(1,"system-dynamic-component",1)),2&e&&(m.Y8G("ngIf",t.displayName),m.R7$(),m.Y8G("component",t.tab.headercomponent))},dependencies:[i.bT,Kn.s,S.W],encapsulation:2})}return ObjectTabContainerItemHeader})();const el=(e,t)=>({"slds-active":e,"slds-hide":t});function tl(e,t){if(1&e){const e=m.RV6();m.j41(0,"li",4),m.bIt("click",(function(){const t=m.eBV(e).index,s=m.XpG();return m.Njj(s.setActiveTab(t))})),m.j41(1,"a",5),m.nrm(2,"object-tab-container-item-header",6),m.k0s()()}if(2&e){const e=t.$implicit,s=t.index,i=m.XpG();m.Y8G("ngClass",m.l_i(2,el,s===i.activeTab,i.isHidden(e))),m.R7$(2),m.Y8G("tab",e)}}function sl(e,t){if(1&e&&m.nrm(0,"object-tab-container-item",10),2&e){const e=m.XpG(2).$implicit;m.Y8G("componentset",e.componentset)}}const il=(e,t,s)=>({"slds-show":e,"slds-hide":t,"slds-p-bottom--none":s});function nl(e,t){if(1&e&&(m.j41(0,"div",8),m.DNE(1,sl,1,1,"object-tab-container-item",9),m.k0s()),2&e){const e=m.XpG(),t=e.index,s=e.$implicit,i=m.XpG();m.Y8G("ngClass",m.sMw(2,il,t==i.activeTab,t!=i.activeTab,null==i.componentconfig?null:i.componentconfig.noBottomPadding)),m.R7$(),m.Y8G("ngIf",s.componentset)}}function ll(e,t){if(1&e&&(m.qex(0),m.DNE(1,nl,2,6,"div",7),m.bVm()),2&e){const e=t.index,s=m.XpG();m.R7$(),m.Y8G("ngIf",s.checkRenderTab(e))}}let ol=(()=>{class ObjectTabContainer{constructor(e,t,s,i){this.language=e,this.metadata=t,this.model=s,this.session=i,this.activeTab=0,this.activatedTabs=[0],this.tabs=[]}ngOnInit(){if(this.componentconfig&&this.componentconfig.componentset){let e=this.metadata.getComponentSetObjects(this.componentconfig.componentset);this.tabs=[];for(let t of e)t.componentconfig.adminonly&&!this.session.isAdmin||this.tabs.push(t.componentconfig)}else{let e=this.metadata.getComponentConfig("ObjectTabContainer",this.model.module),t=this.metadata.getComponentSetObjects(e.componentset);this.tabs=[];for(let e of t)e.componentconfig.adminonly&&!this.session.isAdmin||this.tabs.push(e.componentconfig)}}isHidden(e){return!(!e.acl||this.model.checkAccess(e.acl))||!(!e.requiredmodelstate||this.model.checkModelState(e.requiredmodelstate))}setActiveTab(e){this.activatedTabs.push(e),this.activeTab=e}checkRenderTab(e){return e==this.activeTab||this.activatedTabs.indexOf(e)>-1||this.tabs&&this.tabs[e].forcerender}static#e=this.ɵfac=function(e){return new(e||ObjectTabContainer)(m.rXU(h.B),m.rXU(b.yu),m.rXU(g.g),m.rXU(Nt.d))};static#t=this.ɵcmp=m.VBU({type:ObjectTabContainer,selectors:[["object-tab-container"]],decls:4,vars:2,consts:[[1,"slds-tabs--default","slds-height_full","slds-grid","slds-grid--vertical"],["role","tablist",1,"slds-tabs--default__nav"],["class","slds-tabs--default__item slds-text-title--caps","role","presentation",3,"ngClass","click",4,"ngFor","ngForOf"],[4,"ngFor","ngForOf"],["role","presentation",1,"slds-tabs--default__item","slds-text-title--caps",3,"ngClass","click"],["href","javascript:void(0);","role","tab","aria-selected","false",1,"slds-tabs--default__link"],[3,"tab"],["class","slds-tabs--default__content slds-grow","style","min-height: 0","role","tabpanel",3,"ngClass",4,"ngIf"],["role","tabpanel",1,"slds-tabs--default__content","slds-grow",2,"min-height","0",3,"ngClass"],[3,"componentset",4,"ngIf"],[3,"componentset"]],template:function(e,t){1&e&&(m.j41(0,"div",0)(1,"ul",1),m.DNE(2,tl,3,5,"li",2),m.k0s(),m.DNE(3,ll,2,1,"ng-container",3),m.k0s()),2&e&&(m.R7$(2),m.Y8G("ngForOf",t.tabs),m.R7$(),m.Y8G("ngForOf",t.tabs))},dependencies:[i.YU,i.Sq,i.bT,Wn,Zn],encapsulation:2})}return ObjectTabContainer})();const al=["container"];let rl=(()=>{class ObjectVerticalTabContainerItem{constructor(e,t){this.metadata=e,this.fielderrorgroup=t,this.taberrors=new m.bkB}ngOnInit(){this.fielderrorgroup.change$.subscribe((e=>{this.taberrors.emit(e)}))}ngAfterViewInit(){for(let e of this.metadata.getComponentSetObjects(this.componentset))this.metadata.addComponent(e.component,this.container).subscribe((t=>{t.instance.componentconfig=e.componentconfig}))}static#e=this.ɵfac=function(e){return new(e||ObjectVerticalTabContainerItem)(m.rXU(b.yu),m.rXU(Jn.W))};static#t=this.ɵcmp=m.VBU({type:ObjectVerticalTabContainerItem,selectors:[["object-vertical-tab-container-item"]],viewQuery:function(e,t){if(1&e&&m.GBs(al,7,m.c1b),2&e){let e;m.mGM(e=m.lsd())&&(t.container=e.first)}},inputs:{componentset:"componentset"},outputs:{taberrors:"taberrors"},features:[m.Jv_([Jn.W])],decls:2,vars:0,consts:[["container",""]],template:function(e,t){1&e&&m.nrm(0,"div",null,0)},encapsulation:2})}return ObjectVerticalTabContainerItem})();function dl(e,t){if(1&e&&(m.qex(0),m.nrm(1,"system-label",1),m.bVm()),2&e){const e=m.XpG();m.R7$(),m.Y8G("label",e.tab.name)}}let cl=(()=>{class ObjectVerticalTabContainerItemHeader{constructor(e){this.language=e,this.tab=[]}get displayName(){return this.tab.name&&""!=this.tab.name}static#e=this.ɵfac=function(e){return new(e||ObjectVerticalTabContainerItemHeader)(m.rXU(h.B))};static#t=this.ɵcmp=m.VBU({type:ObjectVerticalTabContainerItemHeader,selectors:[["object-vertical-tab-container-item-header"]],inputs:{tab:"tab"},decls:1,vars:1,consts:[[4,"ngIf"],[3,"label"]],template:function(e,t){1&e&&m.DNE(0,dl,2,1,"ng-container",0),2&e&&m.Y8G("ngIf",t.displayName)},dependencies:[i.bT,S.W],encapsulation:2})}return ObjectVerticalTabContainerItemHeader})();const ul=["tabscontainer"];function ml(e,t){if(1&e&&(m.j41(0,"span",9),m.EFF(1),m.k0s()),2&e){const e=m.XpG().$implicit;m.R7$(),m.JRh(e.hasErrors)}}const hl=(e,t)=>({"slds-is-active":e,"slds-hide":t});function gl(e,t){if(1&e){const e=m.RV6();m.j41(0,"li",5),m.bIt("click",(function(){const t=m.eBV(e).index,s=m.XpG();return m.Njj(s.setActiveTab(t))})),m.j41(1,"a",6),m.DNE(2,ml,2,1,"span",7),m.nrm(3,"object-vertical-tab-container-item-header",8),m.k0s()()}if(2&e){const e=t.$implicit,s=t.index,i=m.XpG();m.Y8G("ngClass",m.l_i(3,hl,s===i.activeTab,i.isHidden(e))),m.R7$(2),m.Y8G("ngIf",e.hasErrors),m.R7$(),m.Y8G("tab",e)}}function pl(e,t){if(1&e){const e=m.RV6();m.j41(0,"object-vertical-tab-container-item",13),m.bIt("taberrors",(function(t){m.eBV(e);const s=m.XpG(2).index,i=m.XpG();return m.Njj(i.showErrorsOnTab(s,t))})),m.k0s()}if(2&e){const e=m.XpG(2).$implicit;m.Y8G("componentset",e.componentset)}}function fl(e,t){if(1&e&&(m.j41(0,"div",11),m.DNE(1,pl,1,1,"object-vertical-tab-container-item",12),m.k0s()),2&e){const e=m.XpG(),t=e.index,s=e.$implicit,i=m.XpG();m.Y8G("ngStyle",i.getDisplay(t)),m.R7$(),m.Y8G("ngIf",s.componentset)}}function bl(e,t){if(1&e&&(m.qex(0),m.DNE(1,fl,2,2,"div",10),m.bVm()),2&e){const e=t.index,s=m.XpG();m.R7$(),m.Y8G("ngIf",s.checkRenderTab(e))}}let yl=(()=>{class ObjectVerticalTabContainer{constructor(e,t,s,i){this.language=e,this.metadata=t,this.session=s,this.model=i,this.activeTab=0,this.activatedTabs=[0],this.tabs=[]}ngOnInit(){if(this.componentconfig&&this.componentconfig.componentset){let e=this.metadata.getComponentSetObjects(this.componentconfig.componentset);this.componentconfig=[];for(let t of e)t.componentconfig.adminonly&&!this.session.isAdmin||this.tabs.push(t.componentconfig)}}isHidden(e){return!(!e.acl||this.model.checkAccess(e.acl))||!(!e.requiredmodelstate||this.model.checkModelState(e.requiredmodelstate))}setActiveTab(e){this.activatedTabs.push(e),this.activeTab=e}checkRenderTab(e){return e==this.activeTab||this.activatedTabs.indexOf(e)>-1||this.tabs&&this.tabs[e].forcerender}getDisplay(e){let t=this.tabscontainer.element.nativeElement.getBoundingClientRect();return e!==this.activeTab?{display:"none"}:{height:"calc(99.9vh - "+t.top+"px)"}}getTabsStyle(){return{height:"calc(99.9vh - "+this.tabscontainer.element.nativeElement.getBoundingClientRect().top+"px)",overflow:"auto","overflow-x":"hidden"}}showErrorsOnTab(e,t){this.componentconfig[e].hasErrors=t}static#e=this.ɵfac=function(e){return new(e||ObjectVerticalTabContainer)(m.rXU(h.B),m.rXU(b.yu),m.rXU(Nt.d),m.rXU(g.g))};static#t=this.ɵcmp=m.VBU({type:ObjectVerticalTabContainer,selectors:[["object-vertical-tab-container"]],viewQuery:function(e,t){if(1&e&&m.GBs(ul,7,m.c1b),2&e){let e;m.mGM(e=m.lsd())&&(t.tabscontainer=e.first)}},decls:5,vars:3,consts:[[1,"slds-vertical-tabs",2,"border","none"],["role","tablist","aria-orientation","vertical",1,"slds-vertical-tabs__nav","slds-scrollable--y",3,"ngStyle"],["tabscontainer",""],["class","slds-vertical-tabs__nav-item slds-text-title--caps","role","presentation",3,"ngClass","click",4,"ngFor","ngForOf"],[4,"ngFor","ngForOf"],["role","presentation",1,"slds-vertical-tabs__nav-item","slds-text-title--caps",3,"ngClass","click"],["href","javascript:void(0)","role","tab","tabindex","-1","aria-selected","false",1,"slds-vertical-tabs__link"],["class","slds-badge","title","Invalid fields!",4,"ngIf"],[3,"tab"],["title","Invalid fields!",1,"slds-badge"],["class","slds-vertical-tabs__content slds-scrollable--y slds-p-around--xx-small slds-show","role","tabpanel",3,"ngStyle",4,"ngIf"],["role","tabpanel",1,"slds-vertical-tabs__content","slds-scrollable--y","slds-p-around--xx-small","slds-show",3,"ngStyle"],[3,"componentset","taberrors",4,"ngIf"],[3,"componentset","taberrors"]],template:function(e,t){1&e&&(m.j41(0,"div",0)(1,"ul",1,2),m.DNE(3,gl,4,6,"li",3),m.k0s(),m.DNE(4,bl,2,1,"ng-container",4),m.k0s()),2&e&&(m.R7$(),m.Y8G("ngStyle",t.getTabsStyle()),m.R7$(2),m.Y8G("ngForOf",t.tabs),m.R7$(),m.Y8G("ngForOf",t.tabs))},dependencies:[i.YU,i.Sq,i.bT,i.B3,rl,cl],styles:["\n\n\n\n\n\n\n\n\n\n\n.slds-is-active[_ngcontent-%COMP%]{border-left:6px solid #ca1b21;border-right:1px solid #dddbda;color:#3e3e3c;font-weight:600}.slds-is-active[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none!important}","\n\n\n\n\n\n\n\n\n\n\n.slds-badge[_ngcontent-%COMP%]{background-color:#c00;color:#fff;font-weight:700;padding:.125rem .4rem}"]})}return ObjectVerticalTabContainer})();var vl=s(70923),_l=s(90342);function kl(e,t){1&e&&(m.j41(0,"div",4),m.nrm(1,"system-card-stencil")(2,"system-card-stencil")(3,"system-card-stencil"),m.k0s())}function Rl(e,t){if(1&e&&m.nrm(0,"system-componentset",5),2&e){const e=m.XpG(2);m.Y8G("componentset",e.componentset)}}function Il(e,t){if(1&e&&(m.qex(0),m.DNE(1,kl,4,0,"div",2)(2,Rl,1,1,"ng-template",null,3,m.C5r),m.bVm()),2&e){const e=m.sdS(3),t=m.XpG();m.R7$(),m.Y8G("ngIf",!t.hasAccess||t.model.isLoading)("ngIfElse",e)}}function xl(e,t){1&e&&(m.j41(0,"div",6)(1,"system-illustration-no-data",7),m.nrm(2,"system-label",8),m.k0s()())}let jl=(()=>{class ObjectRelateContainer{constructor(e,t){this.model=e,this.metadata=t,this.componentconfig={}}ngOnInit(){if(this.componentconfig.componentset)this.componentset=this.componentconfig.componentset;else{let e=this.metadata.getComponentConfig("ObjectRelateContainer",this.model.module);this.componentset=e.componentset}}get hasAccess(){return this.model.checkAccess("detail")}static#e=this.ɵfac=function(e){return new(e||ObjectRelateContainer)(m.rXU(g.g),m.rXU(b.yu))};static#t=this.ɵcmp=m.VBU({type:ObjectRelateContainer,selectors:[["ng-component"]],decls:3,vars:2,consts:[[4,"ngIf","ngIfElse"],["nocomponentset",""],["class","slds-grid slds-grid--vertical",4,"ngIf","ngIfElse"],["content",""],[1,"slds-grid","slds-grid--vertical"],[3,"componentset"],[1,"slds-box","slds-box--border","slds-align--absolute-center"],[1,"slds-m-around--medium"],["label","LBL_NO_RELATED_ITEMS"]],template:function(e,t){if(1&e&&m.DNE(0,Il,4,2,"ng-container",0)(1,xl,3,0,"ng-template",null,1,m.C5r),2&e){const e=m.sdS(2);m.Y8G("ngIf",t.componentset)("ngIfElse",e)}},dependencies:[i.bT,dn.F,vl.L,S.W,_l.u],encapsulation:2})}return ObjectRelateContainer})();var Gl=s(14800),Cl=s(56990),wl=s(57949),Sl=s(6179),El=s(13269),Ll=s(91879);function Dl(e,t){if(1&e&&(m.qex(0),m.j41(1,"div",3),m.nrm(2,"object-relatedlist-table",4),m.k0s(),m.bVm()),2&e){const e=m.XpG();m.R7$(2),m.Y8G("listfields",e.listfields)("editable",e.editable)("editcomponentset",e.editcomponentset)("sequencefield",e.componentconfig.sequencefield)("listitemactionset",e.listitemactionset)}}function Fl(e,t){1&e&&m.nrm(0,"system-illustration-no-access")}const Ml=e=>({"slds-hide":e});let Tl=(()=>{class ObjectRelatedlistList extends Sl.F{get hide(){return this.componentconfig.hideempty&&0==this.relatedmodels.count}get panelTitle(){return this.componentconfig.title?this.language.getLabel(this.componentconfig.title):this.relatedmodels._linkName&&this.metadata.fieldDefs[this.relatedmodels.module][this.relatedmodels._linkName]&&this.metadata.fieldDefs[this.relatedmodels.module][this.relatedmodels._linkName].vname?this.language.getLabel(this.metadata.fieldDefs[this.relatedmodels.module][this.relatedmodels._linkName].vname):this.language.getModuleName(this.relatedmodels.module)}static#e=this.ɵfac=(()=>{let e;return function(t){return(e||(e=m.xGo(ObjectRelatedlistList)))(t||ObjectRelatedlistList)}})();static#t=this.ɵcmp=m.VBU({type:ObjectRelatedlistList,selectors:[["object-relatedlist-list"]],features:[m.Jv_([Ct.K]),m.Vt3],decls:4,vars:6,consts:[[3,"ngClass","componentconfig"],[4,"ngIf","ngIfElse"],["noaccess",""],[1,"slds-border--top"],[3,"listfields","editable","editcomponentset","sequencefield","listitemactionset"]],template:function(e,t){if(1&e&&(m.j41(0,"object-related-card",0),m.DNE(1,Dl,3,5,"ng-container",1)(2,Fl,1,0,"ng-template",null,2,m.C5r),m.k0s()),2&e){const e=m.sdS(3);m.Y8G("ngClass",m.eq3(4,Ml,t.hide))("componentconfig",t.componentconfig),m.R7$(),m.Y8G("ngIf",t.aclAccess)("ngIfElse",e)}},dependencies:[i.YU,i.bT,El.r,wl.B,Ll.r],encapsulation:2})}return ObjectRelatedlistList})();var Bl=s(52872),$l=s(33325);const Ol=["object-related-card-tile",""];function Xl(e,t){if(1&e&&(m.qex(0),m.j41(1,"dt",10),m.nrm(2,"system-label-fieldname",11),m.k0s(),m.j41(3,"dd",12),m.nrm(4,"field-container",13),m.k0s(),m.bVm()),2&e){const e=t.$implicit,s=m.XpG();m.R7$(2),m.Y8G("module",s.model.module)("field",e.field),m.R7$(2),m.Y8G("field",e.field)("fieldconfig",e.fieldconfig)("fielddisplayclass","slds-truncate")}}let Ul=(()=>{class ObjectRelatedCardTile{constructor(e,t,s,i,n,l){this.model=e,this.relatedmodels=t,this.view=s,this.language=i,this.metadata=n,this.router=l,this.data={},this.fieldset="",this.fields=[],this.view.displayLabels=!1}ngOnInit(){this.initalizeModel(),this.loadConfig()}initalizeModel(){this.model.module=this.relatedmodels.relatedModule,this.model.id=this.data.id,this.model.setData(this.data)}loadConfig(){let e=this.metadata.getComponentConfig("ObjectRelatedCardTile",this.model.module);this.actionset=e.actionset,this.fields=this.metadata.getFieldSetFields(this.fieldset)}static#e=this.ɵfac=function(e){return new(e||ObjectRelatedCardTile)(m.rXU(g.g),m.rXU(Ct.K),m.rXU(Me.U),m.rXU(h.B),m.rXU(b.yu),m.rXU(o.Ix))};static#t=this.ɵcmp=m.VBU({type:ObjectRelatedCardTile,selectors:[["","object-related-card-tile",""]],inputs:{data:"data",fieldset:"fieldset"},features:[m.Jv_([g.g,Me.U])],attrs:Ol,decls:11,vars:8,consts:[[3,"module","size"],[1,"slds-media__body","slds-grow",2,"min-width","0 !important"],[1,"slds-grid","slds-grid--align-spread","slds-has-flexi-truncate"],["system-model-popover","",1,"slds-truncate","slds-text-heading--small","slds-p-top--xxx-small","slds-m-bottom--small"],[1,"slds-shrink-none","slds-show--medium"],[3,"buttonsize","actionset"],[1,"slds-tile__detail","slds-text-body--small"],[1,"slds-dl--horizontal"],[4,"ngFor","ngForOf"],[1,"slds-hide--medium",3,"buttonsize","actionset"],[1,"slds-dl--horizontal__label","slds-truncate"],[3,"module","field"],[1,"slds-dl--horizontal__detail","slds-tile__meta"],[3,"field","fieldconfig","fielddisplayclass"]],template:function(e,t){1&e&&(m.nrm(0,"system-icon",0),m.j41(1,"div",1)(2,"div",2)(3,"h3",3),m.EFF(4),m.k0s(),m.j41(5,"div",4),m.nrm(6,"object-action-menu",5),m.k0s()(),m.j41(7,"div",6)(8,"dl",7),m.DNE(9,Xl,5,5,"ng-container",8),m.k0s()(),m.nrm(10,"object-action-menu",9),m.k0s()),2&e&&(m.Y8G("module",t.model.module)("size","small"),m.R7$(4),m.JRh(t.data.summary_text),m.R7$(2),m.Y8G("buttonsize","x-small")("actionset",t.actionset),m.R7$(3),m.Y8G("ngForOf",t.fields),m.R7$(),m.Y8G("buttonsize","x-small")("actionset",t.actionset))},dependencies:[i.Sq,Te.y,I.J,Ae.P,$l.j,nt.P],encapsulation:2})}return ObjectRelatedCardTile})();const Yl=["mainContainer"];function Nl(e,t){if(1&e&&(m.j41(0,"div",6),m.nrm(1,"div",7),m.k0s()),2&e){const e=t.$implicit,s=m.XpG(2);m.Y8G("ngClass",s.getTileWidthClass),m.R7$(),m.Y8G("fieldset",s.componentconfig.fieldset)("data",e)}}function Vl(e,t){if(1&e&&(m.qex(0),m.DNE(1,Nl,2,3,"div",5),m.bVm()),2&e){const e=m.XpG();m.R7$(),m.Y8G("ngForOf",e.relatedmodels.items)}}function Al(e,t){1&e&&m.nrm(0,"system-illustration-no-access")}let Pl=(()=>{class ObjectRelatedlistTiles extends Sl.F{constructor(e,t,s,i,n,l){super(e,t,s,i,n),this.language=e,this.metadata=t,this.relatedmodels=s,this.model=i,this.cdref=n,this.el=l}get getTileWidthClass(){return this.mainContainer?.element.nativeElement.clientWidth<=550?"slds-size--1-of-1":this.mainContainer?.element.nativeElement.clientWidth<=730?"slds-size--1-of-2":"slds-size--1-of-3"}static#e=this.ɵfac=function(e){return new(e||ObjectRelatedlistTiles)(m.rXU(h.B),m.rXU(b.yu),m.rXU(Ct.K),m.rXU(g.g),m.rXU(m.gRc),m.rXU(m.aKT))};static#t=this.ɵcmp=m.VBU({type:ObjectRelatedlistTiles,selectors:[["object-relatedlist-tiles"]],viewQuery:function(e,t){if(1&e&&m.GBs(Yl,7,m.c1b),2&e){let e;m.mGM(e=m.lsd())&&(t.mainContainer=e.first)}},features:[m.Jv_([Ct.K]),m.Vt3],decls:6,vars:3,consts:[[3,"componentconfig"],[1,"slds-card__body","slds-card__body_inner","slds-grid","slds-wrap","slds-grid--pull-padded"],["mainContainer",""],[4,"ngIf","ngIfElse"],["noaccess",""],["class","slds-p-around--xx-small",3,"ngClass",4,"ngFor","ngForOf"],[1,"slds-p-around--xx-small",3,"ngClass"],["object-related-card-tile","",1,"slds-box","slds-box--x-small","slds-media","slds-card__tile","slds-grid",3,"fieldset","data"]],template:function(e,t){if(1&e&&(m.j41(0,"object-related-card",0)(1,"div",1,2),m.DNE(3,Vl,2,1,"ng-container",3),m.k0s(),m.DNE(4,Al,1,0,"ng-template",null,4,m.C5r),m.k0s()),2&e){const e=m.sdS(5);m.Y8G("componentconfig",t.componentconfig),m.R7$(3),m.Y8G("ngIf",t.aclAccess)("ngIfElse",e)}},dependencies:[i.YU,i.Sq,i.bT,El.r,wl.B,Ul],encapsulation:2})}return ObjectRelatedlistTiles})(),zl=(()=>{class duplicatedmodels{constructor(e,t,s,i,n,l,o){this.metadata=e,this.model=t,this.relatedmodels=s,this.backend=i,this.broadcast=n,this.toast=l,this.language=o,this.httpRequestsRefID=window._.uniqueId("duplicated_items_http_ref_"),this.showPanel=!1,this.acceptedDuplicates=[],this.foundDuplicates=[],this.selectedStatus="all"}checkDuplicates(){let e=new ti.B;return this.relatedmodels.isloading=!0,this.model.duplicateCheck().subscribe({next:t=>{this.acceptedDuplicates=[...t.acceptedDuplicates],this.foundDuplicates=[...t.foundDuplicates],this.showDuplicatesByStatus(this.selectedStatus),e.next(!0),e.complete(),(this.foundDuplicates?.length>0||this.acceptedDuplicates?.length>0)&&(this.showPanel=!0),this.relatedmodels.isloading=!1},error:()=>{this.relatedmodels.isloading=!0,this.toast.sendToast(this.language.getLabel("LBL_ERROR"),"error")}}),e.asObservable()}showDuplicatesByStatus(e){this.relatedmodels.items="accepted"===e?this.acceptedDuplicates:"found"===e?this.foundDuplicates:[...this.acceptedDuplicates].concat([...this.foundDuplicates])}static#e=this.ɵfac=function(e){return new(e||duplicatedmodels)(m.KVO(b.yu),m.KVO(g.g),m.KVO(Ct.K),m.KVO(ee.H),m.KVO(ke.m),m.KVO(pe.o),m.KVO(h.B))};static#t=this.ɵprov=m.jDH({token:duplicatedmodels,factory:duplicatedmodels.ɵfac})}return duplicatedmodels})(),Hl=(()=>{class ObjectMergeButton{constructor(e,t,s,i,n){this.language=e,this.metadata=t,this.model=s,this.modal=i,this.injector=n,this.merged=new m.bkB}get enabled(){return this.mergemodels?.length>0&&this.model.checkAccess("edit")&&this.mergemodels.filter((e=>1==e.acl?.delete)).length>0}doMerge(){this.modal.openModal("ObjectMergeModal",!0,this.injector).subscribe((e=>{e.instance.mergemodels=this.mergemodels}))}static#e=this.ɵfac=function(e){return new(e||ObjectMergeButton)(m.rXU(h.B),m.rXU(b.yu),m.rXU(g.g),m.rXU(P.y),m.rXU(m.zZn))};static#t=this.ɵcmp=m.VBU({type:ObjectMergeButton,selectors:[["object-merge-button"]],inputs:{mergemodels:"mergemodels"},outputs:{merged:"merged"},decls:3,vars:1,consts:[[1,"slds-button","slds-button--neutral","slds-show--large",3,"disabled","click"],["label","LBL_MERGE"]],template:function(e,t){1&e&&(m.j41(0,"button",0),m.bIt("click",(function(){return t.doMerge()})),m.j41(1,"span"),m.nrm(2,"system-label",1),m.k0s()()),2&e&&m.Y8G("disabled",!t.enabled)},dependencies:[S.W],encapsulation:2})}return ObjectMergeButton})();function ql(e,t){if(1&e&&(m.j41(0,"option",9),m.EFF(1),m.k0s()),2&e){const e=t.$implicit;m.Y8G("value",e.key),m.R7$(),m.JRh(e.value)}}let Jl=(()=>{class ObjectRelatedDuplicatesCardFooter{constructor(e,t,s){this.relatedmodels=e,this.language=t,this.duplicatedModels=s,this.duplicateStatusDom={}}ngOnInit(){this.duplicateStatusDom=this.language.languagedata.applist.duplicate_status_dom}static#e=this.ɵfac=function(e){return new(e||ObjectRelatedDuplicatesCardFooter)(m.rXU(Ct.K),m.rXU(h.B),m.rXU(zl))};static#t=this.ɵcmp=m.VBU({type:ObjectRelatedDuplicatesCardFooter,selectors:[["object-related-duplicates-card-footer"]],features:[m.Jv_([])],decls:17,vars:7,consts:[[1,"slds-card__footer"],[1,"slds-grid","slds-form--inline","slds-grid_vertical-align-center"],[1,"slds-size--1-of-3","slds-text-align--left"],[1,"slds-form-element"],[1,"slds-form-element__label"],[3,"label"],[1,"slds-form-element__control"],[1,"slds-select_container","slds-m-vertical--xx-small"],[1,"slds-select",3,"ngModel","ngModelChange"],[3,"value"],["label","LBL_ALL"],[3,"value",4,"ngFor","ngForOf"],[1,"slds-grid","slds-grow"],[1,"slds-text-align--right","slds-grow"],[1,"slds-button","slds-button_icon",3,"disabled","click"],["icon","refresh"]],template:function(e,t){1&e&&(m.j41(0,"footer",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"label",4),m.nrm(5,"system-label",5),m.k0s(),m.j41(6,"div",6)(7,"div",7)(8,"select",8),m.mxI("ngModelChange",(function(e){return m.DH7(t.duplicatedModels.selectedStatus,e)||(t.duplicatedModels.selectedStatus=e),e})),m.bIt("ngModelChange",(function(e){return t.duplicatedModels.showDuplicatesByStatus(e)})),m.j41(9,"option",9),m.nrm(10,"system-label",10),m.k0s(),m.DNE(11,ql,2,2,"option",11),m.nI1(12,"keyvalue"),m.k0s()()()()(),m.j41(13,"div",12)(14,"div",13)(15,"button",14),m.bIt("click",(function(){return t.duplicatedModels.checkDuplicates()})),m.nrm(16,"system-button-icon",15),m.k0s()()()()()),2&e&&(m.R7$(5),m.Y8G("label","LBL_SELECT_STATUS"),m.R7$(3),m.R50("ngModel",t.duplicatedModels.selectedStatus),m.R7$(),m.Y8G("value","all"),m.R7$(2),m.Y8G("ngForOf",m.bMT(12,5,t.duplicateStatusDom)),m.R7$(4),m.Y8G("disabled",t.relatedmodels.isloading))},dependencies:[i.Sq,l.xH,l.y7,l.wz,l.BC,l.vS,R.t,S.W,i.lG],encapsulation:2})}return ObjectRelatedDuplicatesCardFooter})();function Wl(e,t){if(1&e&&(m.j41(0,"span"),m.EFF(1),m.k0s()),2&e){const e=m.XpG(2);m.R7$(),m.Lme(" (",e.duplicatedModels.foundDuplicates.length,"/",e.duplicatedModels.acceptedDuplicates.length,")")}}function Kl(e,t){if(1&e){const e=m.RV6();m.j41(0,"system-utility-icon",15),m.bIt("click",(function(t){m.eBV(e);const s=m.XpG(2);return m.Njj(s.showDuplicates(t))})),m.k0s()}if(2&e){const e=m.XpG(2);m.Y8G("ngStyle",e.arrowIconStyle)}}const Ql=(e,t)=>({module:e,data:t});function Zl(e,t){if(1&e&&m.nrm(0,"object-related-duplicate-tile",19),2&e){const e=t.$implicit,s=m.XpG(4);m.Y8G("system-model-provider",m.l_i(1,Ql,s.model.module,e))}}function eo(e,t){if(1&e&&(m.j41(0,"div",17),m.DNE(1,Zl,1,4,"object-related-duplicate-tile",18),m.k0s()),2&e){const e=m.XpG(3);m.R7$(),m.Y8G("ngForOf",e.duplicatedModels.foundDuplicates)}}function to(e,t){if(1&e&&m.DNE(0,eo,2,1,"div",16),2&e){m.XpG();const e=m.sdS(15),t=m.XpG();m.Y8G("ngIf",t.fieldset)("ngIfElse",e)}}function so(e,t){if(1&e&&(m.j41(0,"div",1)(1,"div",2)(2,"header",3),m.nrm(3,"system-icon",4),m.j41(4,"div",5)(5,"h2")(6,"a",6)(7,"span",7),m.nrm(8,"system-label",8),m.DNE(9,Wl,2,2,"span",9),m.k0s()()(),m.DNE(10,Kl,1,1,"system-utility-icon",10),m.k0s()(),m.nrm(11,"object-merge-button",11),m.k0s(),m.j41(12,"div",12),m.nrm(13,"object-relatedlist-table",13),m.DNE(14,to,1,2,"ng-template",null,14,m.C5r),m.k0s(),m.nrm(16,"object-related-duplicates-card-footer"),m.k0s()),2&e){const e=m.XpG();m.R7$(3),m.Y8G("icon","merge")("size","small")("sprite","standard"),m.R7$(6),m.Y8G("ngIf",!e.relatedmodels.isloading),m.R7$(),m.Y8G("ngIf",e.duplicatedModels.foundDuplicates.length>0||e.duplicatedModels.acceptedDuplicates.length>0),m.R7$(),m.Y8G("mergemodels",e.duplicatedModels.foundDuplicates),m.R7$(),m.Y8G("hidden",e.hideDuplicates),m.R7$(),m.Y8G("duplicateTable",!0)("listfields",e.listfields)("listitemactionset",e.componentconfig.listitemactionset)}}let io=(()=>{class ObjectRelatedDuplicates{constructor(e,t,s,i,n){this.model=e,this.metadata=t,this.broadcast=s,this.relatedmodels=i,this.duplicatedModels=n,this.componentconfig={},this.showPanel=!1,this.duplicates=[],this.hideDuplicates=!1,this.subscriptions=new A.yU}ngOnInit(){this.metadata.getModuleDuplicatecheck(this.model.module)&&(this.getRelatedData(),this.duplicatedModels.checkDuplicates(),this.subscriptions.add(this.broadcast.message$.subscribe((e=>this.handleMessage(e))))),this.componentconfig=this.metadata.getComponentConfig("ObjectRelatedDuplicates",this.model.module),this.componentconfig.fieldset&&(this.fieldset=this.componentconfig.fieldset,this.listfields=this.metadata.getFieldSetFields(this.componentconfig.fieldset))}ngOnDestroy(){this.subscriptions.unsubscribe()}get arrowIconStyle(){return this.hideDuplicates?{transform:"scale(1, -1)"}:{}}getRelatedData(){this.relatedmodels.module=this.model.module,this.relatedmodels.id=this.model.id,this.relatedmodels.relatedModule=this.model.module}handleMessage(e){switch(e.messagetype){case"model.delete":if(e.messagedata.module==this.model.module){let t=this.duplicates.findIndex((t=>t.id==e.messagedata.id));t>=0&&(this.duplicates.splice(t,1),this.relatedmodels.count--)}break;case"duplicates.reload":this.duplicatedModels.showDuplicatesByStatus(this.duplicatedModels.selectedStatus)}}showDuplicates(e){e.stopPropagation(),this.hideDuplicates=!this.hideDuplicates}static#e=this.ɵfac=function(e){return new(e||ObjectRelatedDuplicates)(m.rXU(g.g),m.rXU(b.yu),m.rXU(ke.m),m.rXU(Ct.K),m.rXU(zl))};static#t=this.ɵcmp=m.VBU({type:ObjectRelatedDuplicates,selectors:[["object-relatedlist-duplicates"]],features:[m.Jv_([Ct.K,zl])],decls:1,vars:1,consts:[["class","slds-card slds-card_boundary slds-m-bottom--medium",4,"ngIf"],[1,"slds-card","slds-card_boundary","slds-m-bottom--medium"],[1,"slds-card__header","slds-grid","slds-grid--vertical-align-center"],[1,"slds-media","slds-media--center","slds-has-flexi-truncate"],[3,"icon","size","sprite"],[1,"slds-grid","slds-grid--vertical-align-center","slds-media__body","slds-truncate"],["href","javascript:void(0);",1,"slds-text-link--reset"],[1,"slds-text-heading--small"],["label","LBL_DUPLICATES"],[4,"ngIf"],["class","slds-m-horizontal--xx-small","icon","up","style","transition: .5s;","size","x-small",3,"ngStyle","click",4,"ngIf"],[3,"mergemodels"],[1,"slds-card__body",3,"hidden"],[3,"duplicateTable","listfields","listitemactionset"],["showDuplicateTile",""],["icon","up","size","x-small",1,"slds-m-horizontal--xx-small",2,"transition",".5s",3,"ngStyle","click"],["class","slds-card__body--inner slds-grid slds-wrap slds-gutters_direct-xx-small",4,"ngIf","ngIfElse"],[1,"slds-card__body--inner","slds-grid","slds-wrap","slds-gutters_direct-xx-small"],["class","slds-size--1-of-1 slds-large-size--1-of-3 slds-col",3,"system-model-provider",4,"ngFor","ngForOf"],[1,"slds-size--1-of-1","slds-large-size--1-of-3","slds-col",3,"system-model-provider"]],template:function(e,t){1&e&&m.DNE(0,so,17,10,"div",0),2&e&&m.Y8G("ngIf",t.duplicatedModels.showPanel)},dependencies:[i.Sq,i.bT,i.B3,I.J,S.W,E.B,li.v,ri,Ll.r,Hl,Jl],encapsulation:2})}return ObjectRelatedDuplicates})();const no=["tablecontent"];let lo=(()=>{class ObjectRelatedlistAll{constructor(e,t,s,i,n){this.navigationtab=e,this.language=t,this.metadata=s,this.model=i,this.relatedmodels=n,this.module="",this.id="",this.link="",this.related="",this.fieldset=void 0,this.componentconfig={},this.listfields=[]}ngOnInit(){this.module=this.navigationtab.activeRoute.params.module,this.link=this.navigationtab.activeRoute.params.link,this.related=this.navigationtab.activeRoute.params.related,this.fieldset=this.navigationtab.activeRoute.params.fieldset,this.model.module=this.module,this.model.id=this.navigationtab.activeRoute.params.id,this.model.getData(!0,"detailview").subscribe((e=>{this.navigationtab.setTabInfo({displaymodule:this.module,displayname:e.summary_text+" • "+this.language.getModuleName(this.related)})})),this.componentconfig=this.metadata.getComponentConfig("ObjectRelatedlistAll",this.related),this.componentconfig.fieldset||(this.componentconfig=this.metadata.getModuleDefaultComponentConfigByUsage(this.related,"list")),_.isEmpty(this.componentconfig)&&console.warn(`no componentconfig found for ObjectRelatedlistAll nor ObjectList with module ${this.related}`),this.listfields=this.metadata.getFieldSetFields(this.fieldset?this.fieldset:this.componentconfig.fieldset),_.isEmpty(this.listfields)&&console.warn("no fieldset to use!"),this.relatedmodels.module=this.model.module,this.relatedmodels.id=this.model.id,this.relatedmodels.model=this.model,this.relatedmodels.relatedModule=this.related,this.relatedmodels.linkName=this.link,this.relatedmodels.loaditems=50,this.componentconfig.sequencefield?this.relatedmodels.sequencefield=this.componentconfig.sequencefield:this.model.fields[this.relatedmodels._linkName]?.sequence_field&&(this.relatedmodels.sequencefield=this.model.fields[this.relatedmodels._linkName].sequence_field),this.relatedmodels.getData()}goModule(){this.model.goModule()}goModel(){this.model.goDetail()}get listingTitle(){return this.metadata.fieldDefs[this.model.module][this.link].vname?this.language.getLabel(this.metadata.fieldDefs[this.model.module][this.link].vname):this.language.getModuleName(this.related)}onScroll(e){if(this.relatedmodels.canloadmore){let e=this.tablecontent.element.nativeElement;e.scrollTop+e.clientHeight+50>e.scrollHeight&&this.relatedmodels.getMoreData(25)}}set searchTerm(e){e!=this.relatedmodels.searchTerm&&(this.relatedmodels.searchTerm=e,this.reloadList())}get searchTerm(){return this.relatedmodels.searchTerm}clearSearchTerm(){this.searchTerm=""}reloadList(){this.relatedmodels.offset=0,this.relatedmodels.getData()}static#e=this.ɵfac=function(e){return new(e||ObjectRelatedlistAll)(m.rXU(Ie._),m.rXU(h.B),m.rXU(b.yu),m.rXU(g.g),m.rXU(Ct.K))};static#t=this.ɵcmp=m.VBU({type:ObjectRelatedlistAll,selectors:[["object-relatedlist-all"]],viewQuery:function(e,t){if(1&e&&m.GBs(no,7,m.c1b),2&e){let e;m.mGM(e=m.lsd())&&(t.tablecontent=e.first)}},features:[m.Jv_([g.g,Ct.K])],decls:33,vars:11,consts:[[1,"slds-page-header"],[1,"slds-grid","slds-grid--align-spread","slds-p-bottom--xx-small","slds-wrap"],[1,"slds-grid","slds-grid--vertical-align-center","slds-grow"],[1,"slds-m-right--medium"],["role","navigation","aria-label","Breadcrumbs"],[1,"slds-breadcrumb","slds-list_horizontal","slds-wrap"],[1,"slds-breadcrumb__item","slds-text-title_caps"],["href","javascript:void(0);",3,"click"],[3,"module"],[1,"slds-media"],[1,"slds-media__body"],[1,"slds-page-header__title","slds-truncate","slds-align-middle","slds-p-vertical--xx-small"],[1,"slds-col","slds-align-bottom"],[1,"slds-text-body--small"],["label","LBL_OF"],["label","LBL_ITEMS"],["label","LBL_SORTEDBY"],[3,"module","field"],["label","LBL_LASTUPDATE"],[1,"slds-col","slds-size--1-of-3"],[1,"slds-grow",3,"ngModel","placeholder","ngModelChange","onSearchTermClear","onEnterPress"],["system-to-bottom","",3,"scroll"],["tablecontent",""],[3,"listfields"]],template:function(e,t){1&e&&(m.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"nav",4)(5,"ol",5)(6,"li",6)(7,"a",7),m.bIt("click",(function(){return t.goModule()})),m.nrm(8,"system-label-modulename",8),m.k0s()(),m.j41(9,"li",6)(10,"a",7),m.bIt("click",(function(){return t.goModel()})),m.EFF(11),m.k0s()()()(),m.j41(12,"div",9)(13,"div",10)(14,"h1",11),m.EFF(15),m.k0s()()(),m.j41(16,"div",12)(17,"p",13),m.EFF(18),m.nrm(19,"system-label",14),m.EFF(20),m.nrm(21,"system-label",15),m.EFF(22," • "),m.nrm(23,"system-label",16)(24,"system-label-fieldname",17),m.EFF(25," • "),m.nrm(26,"system-label",18),m.EFF(27),m.k0s()()(),m.j41(28,"div",19)(29,"system-input-search-term",20),m.mxI("ngModelChange",(function(e){return m.DH7(t.searchTerm,e)||(t.searchTerm=e),e})),m.bIt("onSearchTermClear",(function(){return t.clearSearchTerm()}))("onEnterPress",(function(){return t.reloadList()})),m.k0s()()()()(),m.j41(30,"div",21,22),m.bIt("scroll",(function(e){return t.onScroll(e)})),m.nrm(32,"object-relatedlist-table",23),m.k0s()),2&e&&(m.R7$(8),m.Y8G("module",t.module),m.R7$(3),m.JRh(t.model.data.summary_text),m.R7$(4),m.JRh(t.listingTitle),m.R7$(3),m.SpI("",t.relatedmodels.items.length," "),m.R7$(2),m.SpI(" ",t.relatedmodels.count," "),m.R7$(4),m.Y8G("module",t.related)("field",t.relatedmodels.sortfield),m.R7$(3),m.SpI(" ",t.relatedmodels.getLastLoadTime(),""),m.R7$(2),m.R50("ngModel",t.searchTerm),m.Y8G("placeholder",t.language.getModuleCombinedLabel("LBL_SEARCH",t.relatedmodels.relatedModule)),m.R7$(3),m.Y8G("listfields",t.listfields))},dependencies:[l.BC,l.vS,S.W,Ae.P,pn.r,x.w,B.b,Ll.r],encapsulation:2})}return ObjectRelatedlistAll})(),oo=(()=>{class ObjectRelatedlistSequenced{constructor(){this.componentconfig={}}static#e=this.ɵfac=function(e){return new(e||ObjectRelatedlistSequenced)};static#t=this.ɵcmp=m.VBU({type:ObjectRelatedlistSequenced,selectors:[["object-relatedlist-sequenced"]],inputs:{componentconfig:"componentconfig"},decls:1,vars:1,consts:[[3,"componentconfig"]],template:function(e,t){1&e&&m.nrm(0,"object-relatedlist-list",0),2&e&&m.Y8G("componentconfig",t.componentconfig)},dependencies:[Tl],encapsulation:2})}return ObjectRelatedlistSequenced})();var ao=s(68159),ro=s(61795),co=s(99064),uo=s(46371);function mo(e,t){if(1&e&&(m.j41(0,"legend",6),m.nrm(1,"system-label",7),m.k0s()),2&e){const e=m.XpG(2);m.R7$(),m.Y8G("label",e.componentconfig.name)}}function ho(e,t){if(1&e&&(m.j41(0,"fieldset",2),m.DNE(1,mo,2,1,"legend",3),m.j41(2,"div",4),m.nrm(3,"object-record-fieldset",5),m.k0s()()),2&e){const e=m.XpG();m.R7$(),m.Y8G("ngIf",e.componentconfig.name),m.R7$(2),m.Y8G("fieldset",e.fieldset)("direction",e.direction)}}const go=e=>({"slds-theme--shade slds-p-around--small":e});let po=(()=>{class ObjectRecordFieldsetContainer{get fieldset(){return this.componentconfig.fieldset}get direction(){return this.componentconfig.direction}constructor(e,t,s){this.metadata=e,this.model=t,this.view=s,this.componentconfig={}}get hidden(){return this.componentconfig.requiredmodelstate&&!this.model.checkModelState(this.componentconfig.requiredmodelstate)}static#e=this.ɵfac=function(e){return new(e||ObjectRecordFieldsetContainer)(m.rXU(b.yu),m.rXU(g.g),m.rXU(Me.U))};static#t=this.ɵcmp=m.VBU({type:ObjectRecordFieldsetContainer,selectors:[["object-record-fieldset-container"]],inputs:{componentconfig:"componentconfig"},decls:2,vars:4,consts:[[3,"ngClass"],["class","slds-form-element slds-form-element_compound",4,"ngIf"],[1,"slds-form-element","slds-form-element_compound"],["class","slds-form-element__legend slds-form-element__label slds-p-horizontal--xx-small",4,"ngIf"],[1,"slds-form-element__control"],[3,"fieldset","direction"],[1,"slds-form-element__legend","slds-form-element__label","slds-p-horizontal--xx-small"],[3,"label"]],template:function(e,t){1&e&&(m.j41(0,"div",0),m.DNE(1,ho,4,3,"fieldset",1),m.k0s()),2&e&&(m.Y8G("ngClass",m.eq3(2,go,t.componentconfig.embedded)),m.R7$(),m.Y8G("ngIf",!t.hidden))},dependencies:[i.YU,i.bT,S.W,Zs.D],encapsulation:2})}return ObjectRecordFieldsetContainer})();var fo=s(92462);let bo=(()=>{class ObjectRecordChecklistItem{constructor(e,t,s,i,n){this.view=e,this.model=t,this.modelutilities=s,this.language=i,this.backend=n,this.checkitem={},this.checkfield="",this.checkid="",this.checkid=this.modelutilities.generateGuid()}get checked(){try{return JSON.parse(this.model.getField(this.checkfield))[this.checkitem.item]}catch(e){return!1}}checkItem(e){let t={};try{t=JSON.parse(this.model.getField(this.checkfield))}catch(e){t={}}t[this.checkitem.item]=e.target.checked,this.model.setField(this.checkfield,JSON.stringify(t)),e.target.checked?this.backend.postRequest("module/"+this.model.module+"/"+this.model.id+"/checklist/"+this.checkfield+"/"+this.checkitem.item):this.backend.deleteRequest("module/"+this.model.module+"/"+this.model.id+"/checklist/"+this.checkfield+"/"+this.checkitem.item)}get disabled(){return!this.model.checkAccess("edit")||this.model.isEditing||this.model.isLoading}static#e=this.ɵfac=function(e){return new(e||ObjectRecordChecklistItem)(m.rXU(Me.U),m.rXU(g.g),m.rXU(fo.g),m.rXU(h.B),m.rXU(ee.H))};static#t=this.ɵcmp=m.VBU({type:ObjectRecordChecklistItem,selectors:[["object-record-checklist-item"]],inputs:{checkitem:"checkitem",checkfield:"checkfield"},features:[m.Jv_([Me.U])],decls:8,vars:5,consts:[[1,"slds-form-element","slds-p-vertical--xx-small"],[1,"slds-form-element__control"],[1,"slds-checkbox"],["type","checkbox","name","options",3,"id","ngModel","disabled","change"],[1,"slds-checkbox__label"],[1,"slds-checkbox_faux"],[1,"slds-form-element__label"],[3,"label"]],template:function(e,t){1&e&&(m.j41(0,"div",0)(1,"div",1)(2,"span",2)(3,"input",3),m.bIt("change",(function(e){return t.checkItem(e)})),m.k0s(),m.j41(4,"label",4),m.nrm(5,"span",5),m.j41(6,"span",6),m.nrm(7,"system-label",7),m.k0s()()()()()),2&e&&(m.R7$(3),m.Y8G("id",t.checkid)("ngModel",t.checked)("disabled",t.disabled),m.R7$(),m.BMQ("for",t.checkid),m.R7$(3),m.Y8G("label",t.checkitem.name))},dependencies:[l.Zm,l.BC,l.vS,S.W],encapsulation:2})}return ObjectRecordChecklistItem})();function yo(e,t){if(1&e&&m.nrm(0,"object-record-checklist-item",4),2&e){const e=t.$implicit,s=m.XpG();m.Y8G("checkfield",s.modelfield)("checkitem",e)}}let vo=(()=>{class ObjectRecordChecklist{constructor(e){this.language=e,this.componentconfig={}}get checkitems(){return this.componentconfig.checkitems?this.componentconfig.checkitems:[]}get modelfield(){return this.componentconfig.field}static#e=this.ɵfac=function(e){return new(e||ObjectRecordChecklist)(m.rXU(h.B))};static#t=this.ɵcmp=m.VBU({type:ObjectRecordChecklist,selectors:[["object-record-checklist"]],features:[m.Jv_([Me.U])],decls:4,vars:1,consts:[[1,"slds-box","slds-m-bottom--small"],[1,"slds-text-heading_small","slds-p-vertical--xx-small"],["label","LBL_CHECKLIST"],[3,"checkfield","checkitem",4,"ngFor","ngForOf"],[3,"checkfield","checkitem"]],template:function(e,t){1&e&&(m.j41(0,"div",0)(1,"h3",1),m.nrm(2,"system-label",2),m.k0s(),m.DNE(3,yo,1,2,"object-record-checklist-item",3),m.k0s()),2&e&&(m.R7$(3),m.Y8G("ngForOf",t.checkitems))},dependencies:[i.Sq,S.W,bo],encapsulation:2})}return ObjectRecordChecklist})();var _o=s(46433),ko=s(2187);function Ro(e,t){if(1&e&&(m.j41(0,"system-collapsable-tab",3)(1,"div",4),m.nrm(2,"object-record-fieldset",5),m.k0s()()),2&e){const e=m.XpG(2);m.Y8G("title",e.componentconfig.name)("expanded",e.expanded),m.R7$(2),m.Y8G("fieldset",e.fieldSet)("direction","vertical")}}function Io(e,t){if(1&e&&(m.j41(0,"div",6)(1,"div",4),m.nrm(2,"object-record-fieldset",5),m.k0s()()),2&e){const e=m.XpG(2);m.R7$(2),m.Y8G("fieldset",e.fieldSet)("direction","vertical")}}function xo(e,t){if(1&e&&(m.j41(0,"div"),m.DNE(1,Ro,3,4,"system-collapsable-tab",1)(2,Io,3,2,"div",2),m.k0s()),2&e){const e=m.XpG();m.R7$(),m.Y8G("ngIf",e.showTitle),m.R7$(),m.Y8G("ngIf",!e.showTitle)}}let jo=(()=>{class ObjectRecordDetailsTab{constructor(e,t,s){this.metadata=e,this.model=t,this.language=s,this.componentconfig={},this.expanded=!0}ngOnInit(){this.componentconfig.collapsed&&(this.expanded=!1)}get fieldSet(){try{return this.componentconfig.fieldset}catch(e){return""}}get showTitle(){try{return!this.componentconfig.hidelabel}catch(e){return!1}}get hidden(){return this.componentconfig.requiredmodelstate&&!this.model.checkModelState(this.componentconfig.requiredmodelstate)}static#e=this.ɵfac=function(e){return new(e||ObjectRecordDetailsTab)(m.rXU(b.yu),m.rXU(g.g),m.rXU(h.B))};static#t=this.ɵcmp=m.VBU({type:ObjectRecordDetailsTab,selectors:[["object-record-details-tab"]],decls:1,vars:1,consts:[[4,"ngIf"],[3,"title","expanded",4,"ngIf"],["class","slds-section",4,"ngIf"],[3,"title","expanded"],[1,"slds-p-horizontal--xx-small"],[3,"fieldset","direction"],[1,"slds-section"]],template:function(e,t){1&e&&m.DNE(0,xo,3,2,"div",0),2&e&&m.Y8G("ngIf",!t.hidden)},dependencies:[i.bT,ko.p,Zs.D],encapsulation:2})}return ObjectRecordDetailsTab})();function Go(e,t){if(1&e&&(m.j41(0,"system-collapsable-tab",3)(1,"div",4),m.nrm(2,"object-record-fieldset",5),m.k0s()()),2&e){const e=m.XpG(2);m.Y8G("title",e.componentconfig.name)("expanded",e.expanded),m.R7$(2),m.Y8G("fieldset",e.fieldSet)("direction","vertical")}}function Co(e,t){if(1&e&&(m.j41(0,"div",6)(1,"div",4),m.nrm(2,"object-record-fieldset",5),m.k0s()()),2&e){const e=m.XpG(2);m.R7$(2),m.Y8G("fieldset",e.fieldSet)("direction","vertical")}}function wo(e,t){if(1&e&&(m.j41(0,"div"),m.DNE(1,Go,3,4,"system-collapsable-tab",1)(2,Co,3,2,"div",2),m.k0s()),2&e){const e=m.XpG();m.Y8G("@displayanimation",void 0),m.R7$(),m.Y8G("ngIf",e.showTitle),m.R7$(),m.Y8G("ngIf",!e.showTitle)}}let So=(()=>{class ObjectRecordDetailsModelstateTab extends jo{static#e=this.ɵfac=(()=>{let e;return function(t){return(e||(e=m.xGo(ObjectRecordDetailsModelstateTab)))(t||ObjectRecordDetailsModelstateTab)}})();static#t=this.ɵcmp=m.VBU({type:ObjectRecordDetailsModelstateTab,selectors:[["object-record-details-modelstate-tab"]],features:[m.Vt3],decls:1,vars:1,consts:[[4,"ngIf"],[3,"title","expanded",4,"ngIf"],["class","slds-section",4,"ngIf"],[3,"title","expanded"],[1,"slds-p-horizontal--xx-small"],[3,"fieldset","direction"],[1,"slds-section"]],template:function(e,t){1&e&&m.DNE(0,wo,3,3,"div",0),2&e&&m.Y8G("ngIf",!t.hidden)},dependencies:[i.bT,ko.p,Zs.D],encapsulation:2,data:{animation:[(0,f.hZ)("displayanimation",[(0,f.kY)(":enter",[(0,f.iF)({opacity:0,height:"0px",overflow:"hidden"}),(0,f.i0)(".5s",(0,f.iF)({height:"*",opacity:1})),(0,f.iF)({overflow:"unset"})]),(0,f.kY)(":leave",[(0,f.iF)({overflow:"hidden"}),(0,f.i0)(".5s",(0,f.iF)({height:"0px",opacity:0}))])])]}})}return ObjectRecordDetailsModelstateTab})();var Eo=s(45658);let Lo=(()=>{class territories{constructor(e,t,s,i){this.backend=e,this.metadata=t,this.configurationService=s,this.session=i,this.addTerritories={}}checkModuleManaged(e){return!!this.getModuleParamaters(e)}getModuleParamaters(e){let t=this.configurationService.getData("aclterritorymoduletypes");if(t){return t.find((t=>t.module==e))}return!1}get userTerritories(){return this.configurationService.getData("aclterritoryuserterritories")}getRecentTerritories(e,t=5,s){let i=this.userTerritories;if(s&&!this.session.isAdmin){let n=i[e]&&i[e].length>0?i[e].filter((e=>-1!=e.actions.indexOf(s))):[];return n&&n.length>0?n.slice(0,t):[]}return i[e]&&i[e].length>0?i[e].slice(0,t):[]}loadTerritoryName(e){this.addTerritories[e]="...",this.backend.getRequest("module/SpiceACLTerritories/"+e).subscribe((t=>{t.id===e?this.addTerritories[e]=t.name:this.addTerritories[e]="error"}))}searchTerritories(e,t,s=5,i=[],n){let l=[];for(let o of this.userTerritories[e])if(o.name.toLowerCase().indexOf(t.toLowerCase())>=0&&i.indexOf(o.id)<0&&(this.session.isAdmin||!n||n&&-1!=o.actions.indexOf(n))&&l.push(o),l.length>=s)return l;return l}isUserTerritory(e,t){let s=!1;return this.userTerritories[e].some((e=>{if(e.id===t)return s=!0,!0})),s}getTerritoryName(e,t){let s="";return this.userTerritories[e].some((e=>{if(e.id===t)return s=e.name,!0})),""===s&&(this.addTerritories[t]||this.loadTerritoryName(t),s=this.addTerritories[t]),s}static#e=this.ɵfac=function(e){return new(e||territories)(m.KVO(ee.H),m.KVO(b.yu),m.KVO(y.i),m.KVO(Nt.d))};static#t=this.ɵprov=m.jDH({token:territories,factory:territories.ɵfac,providedIn:"root"})}return territories})();function Do(e,t){if(1&e&&(m.j41(0,"div",8),m.nrm(1,"object-record-fieldset-field",7),m.k0s()),2&e){const e=m.XpG(2);m.R7$(),m.Y8G("fieldsetitem",e.fields.spiceacl_territories_hash)}}function Fo(e,t){if(1&e&&(m.j41(0,"div",3)(1,"div",8),m.nrm(2,"object-record-fieldset-field",7),m.k0s(),m.DNE(3,Do,2,1,"div",9),m.k0s()),2&e){const e=m.XpG();m.R7$(2),m.Y8G("fieldsetitem",e.fields.spiceacl_primary_territory),m.R7$(),m.Y8G("ngIf",e.multipleterritories)}}function Mo(e,t){if(1&e&&(m.j41(0,"div"),m.nrm(1,"object-record-fieldset-field",7),m.k0s()),2&e){const e=m.XpG();m.R7$(),m.Y8G("fieldsetitem",e.fields.spiceacl_users_hash)}}const To=(e,t)=>({"slds-size--1-of-1":e,"slds-size--1-of-2":t});function Bo(e,t){if(1&e&&(m.j41(0,"div",12),m.nrm(1,"object-record-fieldset-field",7),m.k0s()),2&e){const e=m.XpG(2);m.Y8G("ngClass",m.l_i(2,To,!e.hasFieldAssignedOrgunit,e.hasFieldAssignedOrgunit)),m.R7$(),m.Y8G("fieldsetitem",e.fields.assigned_user)}}function $o(e,t){if(1&e&&(m.j41(0,"div",12),m.nrm(1,"object-record-fieldset-field",7),m.k0s()),2&e){const e=m.XpG(2);m.Y8G("ngClass",m.l_i(2,To,!e.hasFieldAssignedUser,e.hasFieldAssignedUser)),m.R7$(),m.Y8G("fieldsetitem",e.fields.assigned_orgunit)}}function Oo(e,t){if(1&e&&(m.j41(0,"div",10),m.DNE(1,Bo,2,5,"div",11)(2,$o,2,5,"div",11),m.k0s()),2&e){const e=m.XpG();m.R7$(),m.Y8G("ngIf",e.hasFieldAssignedUser),m.R7$(),m.Y8G("ngIf",e.hasFieldAssignedOrgunit)}}const Xo=(e,t)=>({"slds-size--1-of-1":e,"slds-size--1-of-1 slds-medium-size--1-of-2":t});let Uo=(()=>{class ObjectRecordAdministrationTab{constructor(e,t,s){this.metadata=e,this.model=t,this.territories=s,this.componentconfig={},this.expanded=!0,this.hasFieldAssignedUser=!1,this.hasFieldAssignedOrgunit=!1,this.linkOrgunitToAssignedUser=!0,this.fields={spiceacl_primary_territory:{field:"spiceacl_primary_territory",fieldconfig:{}},spiceacl_territories_hash:{field:"spiceacl_territories_hash",fieldconfig:{}},spiceacl_users_hash:{field:"spiceacl_users_hash",fieldconfig:{}},assigned_user:{field:"assigned_user",fieldconfig:{fieldtype:"linked",modulefilter:""}},assigned_orgunit:{field:"assigned_orgunit",fieldconfig:{}},created_by_user:{field:"created_by_user",fieldconfig:{fieldtype:"modifiedby",field_date:"date_entered"}},modified_by_user:{field:"modified_by_user",fieldconfig:{fieldtype:"modifiedby",field_date:"date_modified"}}}}ngOnInit(){this.componentconfig.collapsed&&(this.expanded=!1),this.componentconfig.unlinkorgunit&&(this.linkOrgunitToAssignedUser=!this.componentconfig.unlinkorgunit),this.componentconfig.moduleFilterAssignedUser&&(this.fields.assigned_user.fieldconfig.modulefilter=this.componentconfig.moduleFilterAssignedUser),this.hasFieldAssignedUser=this.metadata.hasField(this.model.module,"assigned_user_id"),this.hasFieldAssignedOrgunit=this.metadata.hasField(this.model.module,"assigned_orgunit_id"),this.hasFieldAssignedOrgunit&&this.linkOrgunitToAssignedUser&&this.model.data$.subscribe({next:e=>{this.model.getField("assigned_user_id")?(this.model._fields_stati.assigned_orgunit.readonly=!0,this.model.getField("assigned_orgunit_id")!=this.model.getField("assigned_user").orgunit_id&&this.model.setFields({assigned_orgunit_id:this.model.getField("assigned_user").orgunit_id,assigned_orgunit:this.model.getField("assigned_user").orgunit},!0)):this.model._fields_stati.assigned_orgunit.readonly=!1}})}getTypeParameters(){return this.territories.getModuleParamaters(this.model.module)}get territorymanaged(){return this.territories.checkModuleManaged(this.model.module)}get multipleterritories(){return 1==this.getTypeParameters().multipleobjects}get multipleusers(){return 1==this.metadata.getModuleDefs(this.model.module).acl_multipleusers}get hidden(){return this.componentconfig.requiredmodelstate&&!this.model.checkModelState(this.componentconfig.requiredmodelstate)}static#e=this.ɵfac=function(e){return new(e||ObjectRecordAdministrationTab)(m.rXU(b.yu),m.rXU(g.g),m.rXU(Lo))};static#t=this.ɵcmp=m.VBU({type:ObjectRecordAdministrationTab,selectors:[["object-record-administration-tab"]],decls:10,vars:11,consts:[[3,"title","expanded"],["class","slds-grid slds-wrap",4,"ngIf"],[4,"ngIf"],[1,"slds-grid","slds-wrap"],["class","slds-grid slds-size--1-of-1 slds-medium-size--1-of-2",4,"ngIf"],[1,"slds-grid",3,"ngClass"],[1,"slds-size--1-of-2"],[3,"fieldsetitem"],[1,"slds-size--1-of-1","slds-medium-size--1-of-2"],["class","slds-size--1-of-1 slds-medium-size--1-of-2",4,"ngIf"],[1,"slds-grid","slds-size--1-of-1","slds-medium-size--1-of-2"],[3,"ngClass",4,"ngIf"],[3,"ngClass"]],template:function(e,t){1&e&&(m.j41(0,"system-collapsable-tab",0),m.DNE(1,Fo,4,2,"div",1)(2,Mo,2,1,"div",2),m.j41(3,"div",3),m.DNE(4,Oo,3,2,"div",4),m.j41(5,"div",5)(6,"div",6),m.nrm(7,"object-record-fieldset-field",7),m.k0s(),m.j41(8,"div",6),m.nrm(9,"object-record-fieldset-field",7),m.k0s()()()()),2&e&&(m.Y8G("title",t.componentconfig.name)("expanded",t.expanded),m.R7$(),m.Y8G("ngIf",t.territorymanaged),m.R7$(),m.Y8G("ngIf",t.multipleusers),m.R7$(2),m.Y8G("ngIf",t.hasFieldAssignedUser||t.hasFieldAssignedOrgunit),m.R7$(),m.Y8G("ngClass",m.l_i(8,Xo,!t.hasFieldAssignedUser&&!t.hasFieldAssignedOrgunit,t.hasFieldAssignedUser||!t.hasFieldAssignedOrgunit)),m.R7$(2),m.Y8G("fieldsetitem",t.fields.created_by_user),m.R7$(2),m.Y8G("fieldsetitem",t.fields.modified_by_user))},dependencies:[i.YU,i.bT,ko.p,uo.b],encapsulation:2})}return ObjectRecordAdministrationTab})();function Yo(e,t){if(1&e&&m.nrm(0,"field-label",4),2&e){const e=m.XpG().$implicit;m.Y8G("fieldname",e.field)("fieldconfig",e.fieldconfig)}}function No(e,t){if(1&e&&(m.j41(0,"div",1),m.DNE(1,Yo,1,2,"field-label",2),m.nrm(2,"field-container",3),m.k0s()),2&e){const e=t.$implicit,s=m.XpG();m.Y8G("ngClass",s.getFieldSizeClass()),m.R7$(),m.Y8G("ngIf",s.showLabel(e.fieldconfig)&&"blank"!==e.field),m.R7$(),m.Y8G("field",e.field)("fieldconfig",e.fieldconfig)("fielddisplayclass","slds-has-divider--bottom slds-p-vertical--x-small spice-fieldminheight")}}let Vo=(()=>{class ObjectRecordDetailsTabRow{constructor(e,t,s,i){this.activatedRoute=e,this.metadata=t,this.componentFactoryResolver=s,this.model=i,this.initialized=!1,this.componentconfig={},this.componentRefs=[],this.rowFields=[],this.fieldset=""}ngOnInit(){this.rowFields=this.metadata.getFieldSetFields(this.fieldset.fieldset)}getFieldSizeClass(){return"slds-size--1-of-"+this.rowFields.length}getFieldWidth(){return{width:Math.round(1/this.rowFields.length*100)+"%"}}showLabel(e){return!0!==e.hidelabel}static#e=this.ɵfac=function(e){return new(e||ObjectRecordDetailsTabRow)(m.rXU(o.nX),m.rXU(b.yu),m.rXU(m.OM3),m.rXU(g.g))};static#t=this.ɵcmp=m.VBU({type:ObjectRecordDetailsTabRow,selectors:[["object-record-details-tab-row"]],inputs:{fieldset:"fieldset"},decls:1,vars:1,consts:[["class","slds-p-around--x-small",3,"ngClass",4,"ngFor","ngForOf"],[1,"slds-p-around--x-small",3,"ngClass"],[3,"fieldname","fieldconfig",4,"ngIf"],[3,"field","fieldconfig","fielddisplayclass"],[3,"fieldname","fieldconfig"]],template:function(e,t){1&e&&m.DNE(0,No,3,5,"div",0),2&e&&m.Y8G("ngForOf",t.rowFields)},dependencies:[i.YU,i.Sq,i.bT,Ui.b,Te.y],encapsulation:2})}return ObjectRecordDetailsTabRow})(),Ao=(()=>{class ObjectRecordDetailsTabRowField{constructor(){this.field={}}static#e=this.ɵfac=function(e){return new(e||ObjectRecordDetailsTabRowField)};static#t=this.ɵcmp=m.VBU({type:ObjectRecordDetailsTabRowField,selectors:[["object-record-details-tab-row-field"]],inputs:{field:"field"},decls:2,vars:5,consts:[[3,"fieldname","fieldconfig"],[3,"field","fieldconfig","fielddisplayclass"]],template:function(e,t){1&e&&m.nrm(0,"field-label",0)(1,"field-container",1),2&e&&(m.Y8G("fieldname",t.field.field)("fieldconfig",t.field.fieldconfig),m.R7$(),m.Y8G("field",t.field.field)("fieldconfig",t.field.fieldconfig)("fielddisplayclass","slds-text-body--regular slds-truncate slds-m-vertical--x-small"))},dependencies:[Ui.b,Te.y],encapsulation:2})}return ObjectRecordDetailsTabRowField})();function Po(e,t){if(1&e&&(m.j41(0,"span",7),m.EFF(1),m.k0s()),2&e){const e=m.XpG().$implicit;m.R7$(),m.JRh(e.hasErrors)}}const zo=e=>({"slds-active":e});function Ho(e,t){if(1&e){const e=m.RV6();m.j41(0,"li",4),m.bIt("click",(function(){const t=m.eBV(e).index,s=m.XpG();return m.Njj(s.setActiveTab(t))})),m.j41(1,"a",5),m.DNE(2,Po,2,1,"span",6),m.EFF(3),m.k0s()()}if(2&e){const e=t.$implicit,s=t.index,i=m.XpG();m.Y8G("ngClass",m.eq3(3,zo,s===i.activeTab)),m.R7$(2),m.Y8G("ngIf",e.hasErrors),m.R7$(),m.SpI(" ",i.language.getLabel(e.name,i.model.module),"")}}function qo(e,t){if(1&e){const e=m.RV6();m.j41(0,"object-tab-container-item",11),m.bIt("taberrors",(function(t){m.eBV(e);const s=m.XpG(2).index,i=m.XpG();return m.Njj(i.showErrorsOnTab(s,t))})),m.k0s()}if(2&e){const e=m.XpG(2).$implicit;m.Y8G("componentset",e.componentset)}}function Jo(e,t){if(1&e&&(m.j41(0,"div",9),m.DNE(1,qo,1,1,"object-tab-container-item",10),m.k0s()),2&e){const e=m.XpG(),t=e.index,s=e.$implicit,i=m.XpG();m.Y8G("ngClass",m.eq3(3,zo,i.showTab(t)))("hidden",!i.showTab(t)),m.R7$(),m.Y8G("ngIf",s.componentset)}}function Wo(e,t){if(1&e&&(m.qex(0),m.DNE(1,Jo,2,5,"div",8),m.bVm()),2&e){const e=t.index,s=m.XpG();m.R7$(),m.Y8G("ngIf",s.checkRenderTab(e))}}const Ko=e=>({"slds-p-around--small":e});let Qo=(()=>{class ObjectRecordTabbedDetails{constructor(e,t,s,i,n){this.view=e,this.metadata=t,this.componentFactoryResolver=s,this.model=i,this.language=n,this.componentconfig={},this.activeTab=0,this.activatedTabs=[0],this.componentTabs=[],this.view.isEditable=!0}get tabs(){return this.componentTabs?this.componentTabs:[]}ngOnInit(){if(0==this.getTabs().length)if(this.componentconfig&&this.componentconfig.componentset){let e=this.metadata.getComponentSetObjects(this.componentconfig.componentset);this.componentTabs=[];for(let t of e)this.componentTabs.push(t.componentconfig)}else if(this.componentconfig.tabs)this.componentTabs=this.componentconfig.tabs;else{let e=this.metadata.getComponentConfig("ObjectRecordTabbedDetails",this.model.module);this.componentTabs=e.tabs}else this.componentTabs=this.getTabs()}getTabs(){try{return this.componentconfig.tabs?this.componentconfig.tabs:[]}catch(e){return[]}}setActiveTab(e){this.activatedTabs.push(e),this.activeTab=e}checkRenderTab(e){return e==this.activeTab||this.activatedTabs.indexOf(e)>-1}showTab(e){return e===this.activeTab}getDisplay(e){if(e!==this.activeTab)return{display:"none"}}cancel(){this.model.cancelEdit(),this.view.setViewMode()}save(){this.model.validate()&&(this.model.save(!0),this.view.setViewMode())}showErrorsOnTab(e,t){this.componentTabs[e].hasErrors=t}static#e=this.ɵfac=function(e){return new(e||ObjectRecordTabbedDetails)(m.rXU(Me.U),m.rXU(b.yu),m.rXU(m.OM3),m.rXU(g.g),m.rXU(h.B))};static#t=this.ɵcmp=m.VBU({type:ObjectRecordTabbedDetails,selectors:[["object-record-tabbed-details"]],decls:4,vars:5,consts:[[1,"slds-tabs--scoped","slds-p-bottom--small","slds-p-around--xx-small",3,"ngClass"],["role","tablist",1,"slds-tabs--scoped__nav"],["class","slds-tabs--scoped__item slds-text-title--caps slds-active","role","presentation",3,"ngClass","click",4,"ngFor","ngForOf"],[4,"ngFor","ngForOf"],["role","presentation",1,"slds-tabs--scoped__item","slds-text-title--caps","slds-active",3,"ngClass","click"],["href","javascript:void(0);","role","tab","aria-selected","false",1,"slds-tabs--scoped__link"],["class","slds-badge","title","Invalid fields!",4,"ngIf"],["title","Invalid fields!",1,"slds-badge"],["class","slds-tabs--scoped__content slds-p-vertical--xxx-small slds-p-horizontal--none","role","tabpanel",3,"ngClass","hidden",4,"ngIf"],["role","tabpanel",1,"slds-tabs--scoped__content","slds-p-vertical--xxx-small","slds-p-horizontal--none",3,"ngClass","hidden"],[3,"componentset","taberrors",4,"ngIf"],[3,"componentset","taberrors"]],template:function(e,t){1&e&&(m.j41(0,"div",0)(1,"ul",1),m.DNE(2,Ho,4,5,"li",2),m.k0s(),m.DNE(3,Wo,2,1,"ng-container",3),m.k0s()),2&e&&(m.Y8G("ngClass",m.eq3(3,Ko,t.componentconfig.inModal)),m.R7$(2),m.Y8G("ngForOf",t.tabs),m.R7$(),m.Y8G("ngForOf",t.tabs))},dependencies:[i.YU,i.Sq,i.bT,Wn],styles:["\n\n\n\n\n\n\n\n\n\n\n.slds-badge[_ngcontent-%COMP%]{background-color:#c00;color:#fff;font-weight:700;padding:.125rem .4rem}"]})}return ObjectRecordTabbedDetails})();const Zo=["panelcontainer"];let ea=(()=>{class ObjectRecordTabbedDetailsTab{constructor(e,t,s,i,n){this.view=e,this.metadata=t,this.componentFactoryResolver=s,this.model=i,this.language=n,this.componentset="",this.componentRefs=[]}ngAfterViewInit(){this.buildContainer()}buildContainer(){for(let e of this.componentRefs)e.destroy();for(let e of this.metadata.getComponentSetObjects(this.componentset))this.metadata.addComponent(e.component,this.panelcontainer).subscribe((t=>{t.instance.componentconfig=e.componentconfig,this.componentRefs.push(t)}))}static#e=this.ɵfac=function(e){return new(e||ObjectRecordTabbedDetailsTab)(m.rXU(Me.U),m.rXU(b.yu),m.rXU(m.OM3),m.rXU(g.g),m.rXU(h.B))};static#t=this.ɵcmp=m.VBU({type:ObjectRecordTabbedDetailsTab,selectors:[["object-record-tabbed-details-tab"]],viewQuery:function(e,t){if(1&e&&m.GBs(Zo,7,m.c1b),2&e){let e;m.mGM(e=m.lsd())&&(t.panelcontainer=e.first)}},inputs:{componentset:"componentset"},decls:2,vars:0,consts:[["panelcontainer",""]],template:function(e,t){1&e&&m.nrm(0,"div",null,0)},encapsulation:2})}return ObjectRecordTabbedDetailsTab})(),ta=(()=>{class ObjectRecordDetailsRelatedListTab{constructor(e){this.language=e,this.componentconfig={}}static#e=this.ɵfac=function(e){return new(e||ObjectRecordDetailsRelatedListTab)(m.rXU(h.B))};static#t=this.ɵcmp=m.VBU({type:ObjectRecordDetailsRelatedListTab,selectors:[["object-record-details-related-list-tab"]],decls:3,vars:2,consts:[[3,"title"],[1,"slds-p-horizontal--xx-small"],[3,"componentconfig"]],template:function(e,t){1&e&&(m.j41(0,"system-collapsable-tab",0)(1,"div",1),m.nrm(2,"object-related-list",2),m.k0s()()),2&e&&(m.Y8G("title",t.componentconfig.name),m.R7$(2),m.Y8G("componentconfig",t.componentconfig))},dependencies:[ko.p,Sl.F],encapsulation:2})}return ObjectRecordDetailsRelatedListTab})();var sa=s(33778),ia=s(6815),na=s(82379);function la(e,t){if(1&e){const e=m.RV6();m.j41(0,"object-modal-module-lookup",3),m.bIt("selectedItems",(function(t){m.eBV(e);const s=m.XpG();return m.Njj(s.emitSelectedItems(t))})),m.k0s()}}let oa=(()=>{class ObjectSelectButton{constructor(e,t){this.metadata=e,this.model=t,this.module="",this.displaymodulename=!0,this.selectedItems=new m.bkB,this.displayModal=!1,this.popupSubscribe=void 0}ngOnInit(){this.model.module=this.module}openModal(){}emitSelectedItems(e){this.selectedItems.emit(e)}static#e=this.ɵfac=function(e){return new(e||ObjectSelectButton)(m.rXU(b.yu),m.rXU(g.g))};static#t=this.ɵcmp=m.VBU({type:ObjectSelectButton,selectors:[["object-select-button"]],inputs:{module:"module",displaymodulename:"displaymodulename"},outputs:{selectedItems:"selectedItems"},features:[m.Jv_([g.g])],decls:3,vars:1,consts:[[1,"slds-button","slds-button--neutral",3,"click"],["label","LBL_SELECT"],[3,"selectedItems",4,"ngIf"],[3,"selectedItems"]],template:function(e,t){1&e&&(m.j41(0,"button",0),m.bIt("click",(function(){return t.openModal()})),m.nrm(1,"system-label",1),m.k0s(),m.DNE(2,la,1,0,"object-modal-module-lookup",2)),2&e&&(m.R7$(2),m.Y8G("ngIf",t.displayModal))},dependencies:[i.bT,S.W,na.d],encapsulation:2})}return ObjectSelectButton})();function aa(e,t){if(1&e){const e=m.RV6();m.j41(0,"div",3)(1,"a",4),m.bIt("click",(function(){m.eBV(e);const t=m.XpG();return m.Njj(t.deleteAddress())})),m.nrm(2,"system-label",5),m.k0s()()}}let ra=(()=>{class ObjectAddress{constructor(e,t,s,i,n,l){this.language=e,this.metadata=t,this.model=s,this.view=i,this.modelutilities=n,this.footer=l,this.componentconfig={},this.address={},this.parent={},this.fieldset="",this.model.module="Addresses"}ngOnInit(){if(this.model.id=this.address.id,this.model.setData(this.address),null==this.fieldset||""==this.fieldset){let e=this.metadata.getComponentConfig("ObjectAddress",this.parent.module);null==e.fieldset&&""==e.fieldset||(this.fieldset=e.fieldset)}}deleteAddress(){this.metadata.addComponent("SystemConfirmDialog",this.footer.footercontainer).subscribe((e=>{e.instance.title=this.language.getLabel("LBL_DELETE_ADDRESS_TITLE","Addresses"),e.instance.message=this.language.getLabel("LBL_DELETE_ADDRESS_TEXT","Addresses"),e.instance.answer.subscribe((e=>{e&&this.model.setField("deleted",!0)}))}))}static#e=this.ɵfac=function(e){return new(e||ObjectAddress)(m.rXU(h.B),m.rXU(b.yu),m.rXU(g.g),m.rXU(Me.U),m.rXU(fo.g),m.rXU(fs.q))};static#t=this.ɵcmp=m.VBU({type:ObjectAddress,selectors:[["object-address"]],inputs:{address:"address",parent:"parent",fieldset:"fieldset"},features:[m.Jv_([g.g])],decls:3,vars:3,consts:[[1,"slds-box","slds-m-around--x-small",2,"padding","0px"],[3,"fieldset","direction"],["class","slds-text-align_right slds-m-around--x-small",4,"ngIf"],[1,"slds-text-align_right","slds-m-around--x-small"],["href","javascript:void(0);",1,"slds-text-link_reset",3,"click"],["label","LBL_DELETE"]],template:function(e,t){1&e&&(m.j41(0,"div",0),m.nrm(1,"object-record-fieldset",1),m.DNE(2,aa,3,0,"div",2),m.k0s()),2&e&&(m.R7$(),m.Y8G("fieldset",t.fieldset)("direction","vertical"),m.R7$(),m.Y8G("ngIf",t.view.isEditMode()))},dependencies:[i.bT,S.W,Zs.D],encapsulation:2})}return ObjectAddress})();function da(e,t){if(1&e&&m.nrm(0,"object-address",10),2&e){const e=t.$implicit,s=m.XpG(2);m.Y8G("address",e)("parent",s.model)("fieldset",s.componentconfig.fieldset)}}function ca(e,t){if(1&e&&(m.qex(0),m.DNE(1,da,1,3,"object-address",9),m.bVm()),2&e){const e=m.XpG();m.R7$(),m.Y8G("ngForOf",e.addresses)}}function ua(e,t){if(1&e){const e=m.RV6();m.j41(0,"div",11)(1,"a",12),m.bIt("click",(function(){m.eBV(e);const t=m.XpG();return m.Njj(t.addAddress())})),m.nrm(2,"system-label",13),m.k0s()()}}const ma=(e,t)=>({"slds-is-open":e,"slds-hide":t});let ha=(()=>{class ObjectAddressesPipe{transform(e){let t=[];for(let s in e)t.push(e[s]);return t}static#e=this.ɵfac=function(e){return new(e||ObjectAddressesPipe)};static#t=this.ɵpipe=m.EJ8({name:"objectaddressespipe",type:ObjectAddressesPipe,pure:!1})}return ObjectAddressesPipe})(),ga=(()=>{class ObjectAddresses{constructor(e,t,s,i,n){this.language=e,this.metadata=t,this.model=s,this.view=i,this.modelutilities=n,this.componentconfig={},this.expanded=!0}get hasAddresses(){try{return null!=this.model.data.addresses.beans}catch(e){return!1}}ngOnInit(){this.componentconfig.collapsed&&(this.expanded=!1)}get hidden(){return this.componentconfig.requiredmodelstate&&!this.model.checkModelState(this.componentconfig.requiredmodelstate)}getDisplay(){return this.addresses.length>0||this.view.isEditMode()?"inherit":"none"}get addresses(){let e=[];try{for(let t in this.model.data.addresses.beans)0==this.model.data.addresses.beans[t].deleted&&e.push(this.model.data.addresses.beans[t])}catch(e){}return e}togglePanel(){this.expanded=!this.expanded}getChevronStyle(){if(!this.expanded)return{transform:"rotate(45deg)","margin-top":"4px"}}getTabStyle(){if(!this.expanded)return{height:"0px",transform:"rotateX(90deg)"}}addAddress(){let e=this.modelutilities.generateGuid();null==this.model.data.addresses&&(this.model.data.addresses={beans:[]}),this.model.data.addresses.beans[e]={id:e,deleted:!1}}static#e=this.ɵfac=function(e){return new(e||ObjectAddresses)(m.rXU(h.B),m.rXU(b.yu),m.rXU(g.g),m.rXU(Me.U),m.rXU(fo.g))};static#t=this.ɵcmp=m.VBU({type:ObjectAddresses,selectors:[["object-addresses"]],hostVars:2,hostBindings:function(e,t){2&e&&m.xc7("display",t.getDisplay())},decls:10,vars:10,consts:[[1,"slds-section",3,"ngClass"],[1,"slds-section__title"],["aria-controls","expando-unique-id","aria-expanded","true",1,"slds-button","slds-section__title-action",3,"click"],[3,"icon","size","addclasses"],[1,"slds-truncate"],["label","LBL_ADDRESSES"],[3,"ngStyle"],[4,"ngIf"],["class","slds-box slds-m-around--x-small slds-align--absolute-center","style","padding:0.5rem;",4,"ngIf"],[3,"address","parent","fieldset",4,"ngFor","ngForOf"],[3,"address","parent","fieldset"],[1,"slds-box","slds-m-around--x-small","slds-align--absolute-center",2,"padding","0.5rem"],["href","javascript:void(0);",1,"slds-text-link_reset",3,"click"],["label","LBL_ADD_ADDRESS"]],template:function(e,t){1&e&&(m.j41(0,"div",0)(1,"h3",1)(2,"button",2),m.bIt("click",(function(){return t.togglePanel()})),m.nrm(3,"system-utility-icon",3),m.j41(4,"span",4),m.nrm(5,"system-label",5),m.k0s()()(),m.j41(6,"div")(7,"div",6),m.DNE(8,ca,2,1,"ng-container",7)(9,ua,3,0,"div",8),m.k0s()()()),2&e&&(m.Y8G("ngClass",m.l_i(7,ma,t.expanded,t.hidden)),m.R7$(3),m.Y8G("icon","switch")("size","x-small")("addclasses","slds-section__title-action-icon slds-button__icon slds-button__icon_left"),m.R7$(4),m.Y8G("ngStyle",t.getTabStyle()),m.R7$(),m.Y8G("ngIf",t.hasAddresses),m.R7$(),m.Y8G("ngIf",t.view.isEditMode()))},dependencies:[i.YU,i.Sq,i.bT,i.B3,S.W,E.B,ra],encapsulation:2})}return ObjectAddresses})();function pa(e,t){if(1&e&&(m.j41(0,"system-collapsable-tab",27),m.nrm(1,"object-record-fieldset",28),m.k0s()),2&e){const e=m.XpG();m.Y8G("title",e.language.getLabel("LBL_DETAILS")),m.R7$(),m.Y8G("fieldset",e.fieldset)}}function fa(e,t){if(1&e&&(m.j41(0,"tr")(1,"td",29),m.nrm(2,"system-display-datetime",30),m.k0s(),m.j41(3,"td",29)(4,"div",9),m.EFF(5),m.k0s()(),m.j41(6,"td",29)(7,"div",31),m.nrm(8,"system-icon",32),m.j41(9,"div",9),m.EFF(10),m.k0s()()(),m.j41(11,"td",29)(12,"div",9),m.EFF(13),m.k0s()(),m.j41(14,"td",29),m.nrm(15,"system-checkbox",33),m.k0s(),m.j41(16,"td",29),m.nrm(17,"system-checkbox",33),m.k0s()()),2&e){const e=t.$implicit;m.R7$(2),m.Y8G("date",e.date_entered),m.R7$(3),m.JRh(e.created_by_name),m.R7$(3),m.Y8G("module",e.module),m.R7$(2),m.JRh(e.module),m.R7$(3),m.JRh(e.summary_text),m.R7$(2),m.Y8G("ngModel",1==e.gdpr_data_agreement)("disabled",!0),m.R7$(2),m.Y8G("ngModel",1==e.gdpr_marketing_agreement||"g"==e.gdpr_marketing_agreement)("disabled",!0)}}function ba(e,t){1&e&&(m.j41(0,"div",34),m.nrm(1,"system-label",35),m.k0s())}const ya=(e,t)=>({id:null,module:e,data:t});function va(e,t){if(1&e&&(m.j41(0,"tr",36)(1,"td",29),m.nrm(2,"system-display-datetime",30),m.k0s(),m.j41(3,"td",29)(4,"div",9),m.EFF(5),m.k0s()(),m.j41(6,"td",29)(7,"div",9),m.nrm(8,"field-label",37),m.k0s()(),m.j41(9,"td",29)(10,"div",9),m.nrm(11,"field-container",38),m.k0s()()()),2&e){const e=t.$implicit,s=m.XpG();m.Y8G("system-model-provider",m.l_i(5,ya,s.model.module,e.model)),m.R7$(2),m.Y8G("date",e.date_created),m.R7$(3),m.JRh(e.created_by_name),m.R7$(3),m.Y8G("fieldname",e.field_name),m.R7$(3),m.Y8G("field",e.field_name)}}function _a(e,t){1&e&&(m.j41(0,"div",34),m.nrm(1,"system-label",39),m.k0s())}const ka=()=>({displayLabels:!1,displayLinks:!0,editable:!1});let Ra=(()=>{class ObjectGDPRModal{constructor(e,t,s,i){this.language=e,this.metadata=t,this.model=s,this.view=i,this.componentconfig={},this.self={},this.gdprRelatedLog=[],this.gdprAuditLog=[],this.view.isEditable=!1}ngOnInit(){this.componentconfig=this.metadata.getComponentConfig("ObjectGDPRModal",this.model.module)}get fieldset(){return this.componentconfig.fieldset}closeModal(){this.self.destroy()}static#e=this.ɵfac=function(e){return new(e||ObjectGDPRModal)(m.rXU(h.B),m.rXU(b.yu),m.rXU(g.g),m.rXU(Me.U))};static#t=this.ɵcmp=m.VBU({type:ObjectGDPRModal,selectors:[["ng-component"]],features:[m.Jv_([Me.U])],decls:52,vars:9,consts:[["size","large"],[3,"close"],["label","LBL_GDPR"],["margin","none",3,"grow"],[3,"title",4,"ngIf"],["margin","none",3,"title"],[1,"slds-table","slds-table--bordered","slds-table--cell-buffer"],[1,"slds-text-title--caps"],["scope","col"],[1,"slds-truncate"],["label","LBL_DATE_ENTERED"],["label","LBL_CREATED_BY"],["label","LBL_MODULE"],["label","LBL_NAME"],["label","LBL_DATA"],["label","LBL_MARKETING"],[4,"ngFor","ngForOf"],["class","slds-text-heading--small slds-p-around--medium slds-align--absolute-center",4,"ngIf"],["system-title","LBL_AUDITLOG","margin","none"],["label","LBL_DATE_MODIFIED"],["label","LBL_MODIFIED_BY"],["label","LBL_FIELD"],["label","LBL_VALUE"],[3,"system-view-provider"],[3,"system-model-provider",4,"ngFor","ngForOf"],[1,"slds-button","slds-button--neutral",3,"click"],["label","LBL_CLOSE"],[3,"title"],["direction","vertical",3,"fieldset"],["scope","row"],[3,"date"],[1,"slds-grid","slds-grid--vertical-align-center"],["size","xx-small",3,"module"],[3,"ngModel","disabled"],[1,"slds-text-heading--small","slds-p-around--medium","slds-align--absolute-center"],["label","MSG_NO_GDPRRECORDS_FOUND"],[3,"system-model-provider"],[3,"fieldname"],["fielddisplayclass","slds-truncate",3,"field"],["label","MSG_NOAUDITRECORDS_FOUND"]],template:function(e,t){1&e&&(m.j41(0,"system-modal",0)(1,"system-modal-header",1),m.bIt("close",(function(){return t.closeModal()})),m.nrm(2,"system-label",2),m.k0s(),m.j41(3,"system-modal-content",3),m.DNE(4,pa,2,2,"system-collapsable-tab",4),m.j41(5,"system-collapsable-tab",5)(6,"table",6)(7,"thead")(8,"tr",7)(9,"th",8)(10,"div",9),m.nrm(11,"system-label",10),m.k0s()(),m.j41(12,"th",8)(13,"div",9),m.nrm(14,"system-label",11),m.k0s()(),m.j41(15,"th",8)(16,"div",9),m.nrm(17,"system-label",12),m.k0s()(),m.j41(18,"th",8)(19,"div",9),m.nrm(20,"system-label",13),m.k0s()(),m.j41(21,"th",8)(22,"div",9),m.nrm(23,"system-label",14),m.k0s()(),m.j41(24,"th",8)(25,"div",9),m.nrm(26,"system-label",15),m.k0s()()()(),m.j41(27,"tbody"),m.DNE(28,fa,18,9,"tr",16),m.k0s()(),m.DNE(29,ba,2,0,"div",17),m.k0s(),m.j41(30,"system-collapsable-tab",18)(31,"table",6)(32,"thead")(33,"tr",7)(34,"th",8)(35,"div",9),m.nrm(36,"system-label",19),m.k0s()(),m.j41(37,"th",8)(38,"div",9),m.nrm(39,"system-label",20),m.k0s()(),m.j41(40,"th",8)(41,"div",9),m.nrm(42,"system-label",21),m.k0s()(),m.j41(43,"th",8)(44,"div",9),m.nrm(45,"system-label",22),m.k0s()()()(),m.j41(46,"tbody",23),m.DNE(47,va,12,8,"tr",24),m.k0s()(),m.DNE(48,_a,2,0,"div",17),m.k0s()(),m.j41(49,"system-modal-footer")(50,"button",25),m.bIt("click",(function(){return t.closeModal()})),m.nrm(51,"system-label",26),m.k0s()()()),2&e&&(m.R7$(3),m.Y8G("grow",!0),m.R7$(),m.Y8G("ngIf",t.fieldset),m.R7$(),m.Y8G("title",t.language.getLabel("LBL_GDPR_RECORDS")),m.R7$(23),m.Y8G("ngForOf",t.gdprRelatedLog),m.R7$(),m.Y8G("ngIf",0===t.gdprRelatedLog.length),m.R7$(17),m.Y8G("system-view-provider",m.lJ4(8,ka)),m.R7$(),m.Y8G("ngForOf",t.gdprAuditLog),m.R7$(),m.Y8G("ngIf",0===t.gdprAuditLog.length))},dependencies:[i.Sq,i.bT,l.BC,l.vS,Ui.b,Te.y,vi.f,ko.p,Lt.f,I.J,S.W,Be.D,$e.I,Oe.Q,Xe.C,li.v,fn.x,j.L,Zs.D],encapsulation:2})}return ObjectGDPRModal})();const Ia=["object-row-item",""];function xa(e,t){if(1&e){const e=m.RV6();m.j41(0,"td",2)(1,"label",3)(2,"input",4),m.mxI("ngModelChange",(function(t){m.eBV(e);const s=m.XpG();return m.DH7(s.selected,t)||(s.selected=t),m.Njj(t)})),m.k0s(),m.nrm(3,"span",5),m.k0s()()}if(2&e){const e=m.XpG();m.R7$(2),m.R50("ngModel",e.selected)}}function ja(e,t){if(1&e&&(m.j41(0,"td",6),m.nrm(1,"field-container",7),m.k0s()),2&e){const e=t.$implicit;m.R7$(),m.Y8G("field",e.field)("fieldconfig",e.fieldconfig)("fielddisplayclass","slds-truncate slds-p-horizontal--x-small")}}function Ga(e,t){1&e&&(m.j41(0,"td",2),m.nrm(1,"object-action-menu",8),m.k0s()),2&e&&(m.R7$(),m.Y8G("buttonsize","small"))}let Ca=(()=>{class ObjectRowItemComponent{constructor(e,t,s,i){this.model=e,this.view=t,this.router=s,this.language=i,this.rowselect=!1,this.listFields=[],this.listItem={},this.inlineedit=!1,this.showActionMenu=!0,this._selected=!1,this.select=new m.bkB}ngOnInit(){this.model.module=this.module,this.model.id=this.listItem.id,this.model.setData(this.listItem),this.view.isEditable=this.inlineedit&&this.model.checkAccess("edit")}set selected(e){this._selected=e,this.select.emit(e)}get selected(){return this._selected}navigateDetail(){this.router.navigate(["/module/"+this.model.module+"/"+this.model.id])}static#e=this.ɵfac=function(e){return new(e||ObjectRowItemComponent)(m.rXU(g.g),m.rXU(Me.U),m.rXU(o.Ix),m.rXU(h.B))};static#t=this.ɵcmp=m.VBU({type:ObjectRowItemComponent,selectors:[["","object-row-item",""]],hostVars:4,hostBindings:function(e,t){2&e&&m.AVh("slds-is-active",t._selected)("slds-is-selected",t._selected)},inputs:{rowselect:[m.Mj6.None,"rowselection","rowselect"],listFields:[m.Mj6.None,"fields","listFields"],listItem:[m.Mj6.None,"itemdata","listItem"],module:"module",inlineedit:"inlineedit",showActionMenu:"showActionMenu",_selected:[m.Mj6.None,"selected","_selected"]},outputs:{select:"select"},features:[m.Jv_([g.g,Me.U])],attrs:Ia,decls:3,vars:3,consts:[["role","gridcell","class","slds-cell-shrink",4,"ngIf"],["scope","row",4,"ngFor","ngForOf"],["role","gridcell",1,"slds-cell-shrink"],[1,"slds-checkbox"],["type","checkbox",3,"ngModel","ngModelChange"],[1,"slds-checkbox--faux"],["scope","row"],[3,"field","fieldconfig","fielddisplayclass"],[3,"buttonsize"]],template:function(e,t){1&e&&m.DNE(0,xa,4,1,"td",0)(1,ja,2,3,"td",1)(2,Ga,2,1,"td",0),2&e&&(m.Y8G("ngIf",t.rowselect),m.R7$(),m.Y8G("ngForOf",t.listFields),m.R7$(),m.Y8G("ngIf",t.showActionMenu))},dependencies:[i.Sq,i.bT,l.Zm,l.BC,l.vS,Te.y,nt.P],encapsulation:2})}return ObjectRowItemComponent})(),wa=(()=>{class ObjectActionVCardButton{constructor(e,t,s,i){this.language=e,this.model=t,this.modal=s,this.backend=i}execute(){let e=this.model.module+"_"+this.model.getField("summary_text")+".vcf";this.modal.openModal("SystemLoadingModal").subscribe((t=>{t.instance.messagelabel="MSG_GENERATING_VCARD",this.backend.downloadFile({route:`/module/${this.model.module}/${this.model.id}/vcard`},e,"text/bin").subscribe((e=>{t.instance.self.destroy()}),(e=>{t.instance.self.destroy()}))}))}static#e=this.ɵfac=function(e){return new(e||ObjectActionVCardButton)(m.rXU(h.B),m.rXU(g.g),m.rXU(P.y),m.rXU(ee.H))};static#t=this.ɵcmp=m.VBU({type:ObjectActionVCardButton,selectors:[["object-action-output-bean-button"]],decls:2,vars:0,template:function(e,t){1&e&&(m.j41(0,"span"),m.EFF(1,"VCARD"),m.k0s())},encapsulation:2})}return ObjectActionVCardButton})();function Sa(e,t){1&e&&m.nrm(0,"system-stencil")}let Ea=(()=>{class ObjectModelPopoverHeader{constructor(e){this.model=e}static#e=this.ɵfac=function(e){return new(e||ObjectModelPopoverHeader)(m.rXU(g.g))};static#t=this.ɵcmp=m.VBU({type:ObjectModelPopoverHeader,selectors:[["object-model-popover-header"]],decls:7,vars:3,consts:[[1,"slds-media","slds-media_center","slds-m-bottom_small","slds-p-right--large"],["size","small",3,"module"],[1,"slds-media__body"],[4,"ngIf"],[1,"slds-text-heading_small","slds-hyphenate"],["href","javascript:void(0);",3,"click"]],template:function(e,t){1&e&&(m.j41(0,"header",0),m.nrm(1,"system-icon",1),m.j41(2,"div",2),m.DNE(3,Sa,1,0,"system-stencil",3),m.j41(4,"h2",4)(5,"a",5),m.bIt("click",(function(){return t.model.goDetail()})),m.EFF(6),m.k0s()()()()),2&e&&(m.R7$(),m.Y8G("module",t.model.module),m.R7$(2),m.Y8G("ngIf",t.model.isLoading),m.R7$(3),m.JRh(t.model.data.summary_text))},dependencies:[i.bT,I.J,_i.O],encapsulation:2})}return ObjectModelPopoverHeader})();const La=["popover"],Da=["relatedcontainer"];function Fa(e,t){if(1&e&&m.nrm(0,"system-componentset",11),2&e){const e=m.XpG();m.Y8G("componentset",e.headercomponentset)}}function Ma(e,t){1&e&&m.nrm(0,"object-model-popover-header")}const Ta=(e,t)=>({"slds-size--1-of-2":e,"slds-size--1-of-1":t});function Ba(e,t){if(1&e&&(m.j41(0,"div",12)(1,"dl")(2,"dd"),m.nrm(3,"field-container",13),m.k0s()()()),2&e){const e=t.$implicit,s=m.XpG();m.Y8G("ngClass",m.l_i(4,Ta,s.fields.length>1,1==s.fields.length)),m.R7$(3),m.Y8G("field",e.field)("fieldconfig",e.fieldconfig)("fielddisplayclass","slds-truncate")}}let $a=(()=>{class ObjectModelPopover{constructor(e,t,s){this.model=e,this.view=t,this.metadata=s,this.popoverside="right",this.popoverpos="top",this.styles=null,this.hidePopoverTimeout={},this.parentElementRef=null,this.self=null,this.fields=[],this.fieldset="",this.componentset="",this.headercomponentset="",this.heightcorrection=30,this.widthcorrection=30,this.view.displayLinks=!1}get relatedStyle(){return{"max-height":`calc(100vh - ${this.relatedContainer.element.nativeElement.getBoundingClientRect().top+5}px)`}}onMouseOver(){this.hidePopoverTimeout&&window.clearTimeout(this.hidePopoverTimeout)}onMouseOut(){this.closePopover()}get popoverStyle(){let e=this.parentElementRef.nativeElement.getBoundingClientRect(),t=this.popover.element.nativeElement.getBoundingClientRect();return window.innerWidth-e.left>t.width?this.popoverside="right":this.popoverside="left",e.top-30+t.height>window.innerHeight&&e.top-t.height+this.heightcorrection>0?(this.popoverpos="bottom",{top:e.top-t.height+this.heightcorrection+"px",left:"right"==this.popoverside?e.left+100+"px":e.left-t.width-this.widthcorrection+"px"}):(this.popoverpos="top",{top:e.top-this.heightcorrection+"px",left:"right"==this.popoverside?e.left+100+"px":e.left-t.width-this.widthcorrection+"px"})}ngOnInit(){let e=this.metadata.getComponentConfig("ObjectModelPopover",this.model.module);this.popoverid&&this.popovermodule&&(this.model.module=this.popovermodule,this.model.id=this.popoverid,this.model.getData()),e.fieldset||e.componentset?(this.fields=this.metadata.getFieldSetFields(e.fieldset),this.fieldset=e.fieldset,this.componentset=e.componentset,this.headercomponentset=e.headercomponentset):(e=this.metadata.getComponentConfig("ObjectPageHeaderDetails",this.model.module),e.fieldset&&(this.fields=this.metadata.getFieldSetFields(e.fieldset),this.fieldset=e.fieldset)),e.forcereload&&this.model.getData(!1),this.styles=this.popoverStyle}getNubbinClass(){return("left"==this.popoverside?"slds-nubbin--right-":"slds-nubbin--left-")+this.popoverpos}closePopover(e=!1){e?this.self.destroy():this.hidePopoverTimeout=window.setTimeout((()=>this.self.destroy()),500)}static#e=this.ɵfac=function(e){return new(e||ObjectModelPopover)(m.rXU(g.g),m.rXU(Me.U),m.rXU(b.yu))};static#t=this.ɵcmp=m.VBU({type:ObjectModelPopover,selectors:[["object-model-popover"]],viewQuery:function(e,t){if(1&e&&(m.GBs(La,7,m.c1b),m.GBs(Da,7,m.c1b)),2&e){let e;m.mGM(e=m.lsd())&&(t.popover=e.first),m.mGM(e=m.lsd())&&(t.relatedContainer=e.first)}},features:[m.Jv_([Me.U])],decls:13,vars:7,consts:[["role","dialog",1,"slds-popover","slds-popover_large","slds-popover--panel","slds-is-fixed",2,"transition",".5s","z-index","11000",3,"ngStyle","ngClass","mouseenter","mouseleave"],[1,"slds-button","slds-button_icon","slds-button_icon","slds-button_icon-small","slds-float_right","slds-popover__close",3,"click"],["icon","close"],["popover",""],[1,"slds-popover__header"],[3,"componentset",4,"ngIf"],[4,"ngIf"],[1,"slds-grid","slds-wrap","slds-p-right--large"],["class","slds-p-horizontal--small slds-size--1-of-2 slds-p-bottom--x-small",3,"ngClass",4,"ngFor","ngForOf"],[1,"slds-popover__body","slds-scrollable--y","spice-scrollbar",3,"ngStyle"],["relatedcontainer",""],[3,"componentset"],[1,"slds-p-horizontal--small","slds-size--1-of-2","slds-p-bottom--x-small",3,"ngClass"],[3,"field","fieldconfig","fielddisplayclass"]],template:function(e,t){1&e&&(m.j41(0,"div",0),m.bIt("mouseenter",(function(){return t.onMouseOver()}))("mouseleave",(function(){return t.onMouseOut()})),m.j41(1,"button",1),m.bIt("click",(function(){return t.closePopover(!0)})),m.nrm(2,"system-button-icon",2),m.k0s(),m.j41(3,"div",null,3)(5,"div",4),m.DNE(6,Fa,1,1,"system-componentset",5)(7,Ma,1,0,"object-model-popover-header",6),m.j41(8,"footer",7),m.DNE(9,Ba,4,7,"div",8),m.k0s()(),m.j41(10,"div",9,10),m.nrm(12,"system-componentset",11),m.k0s()()()),2&e&&(m.Y8G("ngStyle",t.popoverStyle)("ngClass",t.getNubbinClass()),m.R7$(6),m.Y8G("ngIf",t.headercomponentset),m.R7$(),m.Y8G("ngIf",!t.headercomponentset),m.R7$(2),m.Y8G("ngForOf",t.fields),m.R7$(),m.Y8G("ngStyle",t.relatedStyle),m.R7$(2),m.Y8G("componentset",t.componentset))},dependencies:[i.YU,i.Sq,i.bT,i.B3,Te.y,R.t,dn.F,Ea],encapsulation:2})}return ObjectModelPopover})();const Oa=e=>({"slds-hide":e});function Xa(e,t){if(1&e&&(m.j41(0,"div",1),m.nrm(1,"field-label",2)(2,"field-container",2),m.k0s()),2&e){const e=m.XpG();m.Y8G("ngClass",m.eq3(3,Oa,e.hidden)),m.R7$(),m.Y8G("fieldname",e.fieldname),m.R7$(),m.Y8G("fieldname",e.fieldname)}}let Ua=(()=>{class ObjectModelPopoverField{constructor(e,t){this.model=e,this.view=t,this.componentconfig={}}get hidden(){return this.componentconfig.hideempty&&!this.model.getFieldValue(this.componentconfig.field)}get fieldname(){return this.componentconfig.field?this.componentconfig.field:""}static#e=this.ɵfac=function(e){return new(e||ObjectModelPopoverField)(m.rXU(g.g),m.rXU(Me.U))};static#t=this.ɵcmp=m.VBU({type:ObjectModelPopoverField,selectors:[["ng-component"]],features:[m.Jv_([Me.U])],decls:1,vars:1,consts:[["class","slds-p-vertical--xx-small slds-p-horizontal--large",3,"ngClass",4,"ngIf"],[1,"slds-p-vertical--xx-small","slds-p-horizontal--large",3,"ngClass"],[3,"fieldname"]],template:function(e,t){1&e&&m.DNE(0,Xa,3,5,"div",0),2&e&&m.Y8G("ngIf",t.fieldname)},dependencies:[i.YU,i.bT,Ui.b,Te.y],encapsulation:2})}return ObjectModelPopoverField})();function Ya(e,t){if(1&e&&(m.qex(0),m.j41(1,"dt",5),m.nrm(2,"field-label",6),m.k0s(),m.j41(3,"dd",7),m.nrm(4,"field-container",8),m.k0s(),m.bVm()),2&e){const e=t.$implicit;m.R7$(2),m.Y8G("fieldname",e.field)("fieldconfig",e.fieldconfig),m.R7$(2),m.Y8G("field",e.field)("fieldconfig",e.fieldconfig)("fielddisplayclass","slds-truncate")}}let Na=(()=>{class ObjectModelPopoverRelatedItem{constructor(e,t,s,i){this.language=e,this.metadata=t,this.model=s,this.view=i,this.module="",this.item={},this.fields=[],this.view.displayLabels=!1}ngOnInit(){this.model.module=this.module,this.model.id=this.item.id,this.model.setData(this.item)}goDetail(){this.model.goDetail()}static#e=this.ɵfac=function(e){return new(e||ObjectModelPopoverRelatedItem)(m.rXU(h.B),m.rXU(b.yu),m.rXU(g.g),m.rXU(Me.U))};static#t=this.ɵcmp=m.VBU({type:ObjectModelPopoverRelatedItem,selectors:[["object-model-popover-related-item"]],inputs:{module:"module",item:"item",fields:"fields"},features:[m.Jv_([g.g,Me.U])],decls:6,vars:3,consts:[[1,"slds-m-top_x-small"],[1,"slds-truncate",3,"title"],["href","javascript:void(0);",3,"click"],[1,"slds-list_horizontal","slds-wrap","slds-text-body_small"],[4,"ngFor","ngForOf"],[1,"slds-item_label","slds-text-color_weak","slds-truncate"],[3,"fieldname","fieldconfig"],["title","$500,000",1,"slds-item_detail","slds-text-color_weak","slds-truncate"],[3,"field","fieldconfig","fielddisplayclass"]],template:function(e,t){1&e&&(m.j41(0,"dd",0)(1,"p",1)(2,"a",2),m.bIt("click",(function(){return t.goDetail()})),m.EFF(3),m.k0s()(),m.j41(4,"dl",3),m.DNE(5,Ya,5,5,"ng-container",4),m.k0s()()),2&e&&(m.R7$(),m.Y8G("title",t.model.displayname),m.R7$(2),m.JRh(t.model.displayname),m.R7$(2),m.Y8G("ngForOf",t.fields))},dependencies:[i.Sq,Ui.b,Te.y],encapsulation:2})}return ObjectModelPopoverRelatedItem})();function Va(e,t){if(1&e&&(m.qex(0),m.EFF(1),m.bVm()),2&e){const e=m.XpG(2);m.R7$(),m.SpI(" (",e.relatedmodels.count,")")}}function Aa(e,t){1&e&&(m.j41(0,"div",13),m.nrm(1,"system-spinner",14),m.k0s())}function Pa(e,t){if(1&e&&m.nrm(0,"object-model-popover-related-item",15),2&e){const e=t.$implicit,s=m.XpG(2);m.Y8G("module",s.relatedmodels.relatedModule)("item",e)("fields",s.listfields)}}function za(e,t){if(1&e){const e=m.RV6();m.j41(0,"dd",16)(1,"a",17),m.bIt("click",(function(){m.eBV(e);const t=m.XpG(2);return m.Njj(t.showAll())})),m.nrm(2,"system-label",18),m.k0s()()}}function Ha(e,t){if(1&e&&(m.j41(0,"dl",1)(1,"dt",2)(2,"div",3)(3,"div",4),m.nrm(4,"system-icon",5),m.k0s(),m.j41(5,"div",6)(6,"p",7),m.nrm(7,"system-label",8),m.DNE(8,Va,2,1,"ng-container",9),m.k0s()()()(),m.DNE(9,Aa,2,0,"div",10)(10,Pa,1,3,"object-model-popover-related-item",11)(11,za,3,0,"dd",12),m.k0s()),2&e){const e=m.XpG();m.R7$(4),m.Y8G("module",e.relatedmodels.relatedModule),m.R7$(3),m.Y8G("label",e.panelTitle),m.R7$(),m.Y8G("ngIf",!e.relatedmodels.isloading),m.R7$(),m.Y8G("ngIf",e.relatedmodels.isloading),m.R7$(),m.Y8G("ngForOf",e.relatedmodels.items),m.R7$(),m.Y8G("ngIf",e.canViewAll)}}let qa=(()=>{class ObjectModelPopoverRelated extends Tl{constructor(e,t,s,i,n,l){super(e,t,s,i,n),this.language=e,this.metadata=t,this.relatedmodels=s,this.model=i,this.cdref=n,this.router=l}get canViewAll(){return this.relatedmodels.count>0&&this.relatedmodels.count>this.relatedmodels.loaditems}showAll(){this.router.navigate(["/module/"+this.model.module+"/"+this.model.id+"/"+this.relatedmodels.relatedModule+"/"+this.relatedmodels._linkName])}static#e=this.ɵfac=function(e){return new(e||ObjectModelPopoverRelated)(m.rXU(h.B),m.rXU(b.yu),m.rXU(Ct.K),m.rXU(g.g),m.rXU(m.gRc),m.rXU(o.Ix))};static#t=this.ɵcmp=m.VBU({type:ObjectModelPopoverRelated,selectors:[["object-model-popover-related"]],features:[m.Jv_([Ct.K]),m.Vt3],decls:1,vars:1,consts:[["class","slds-popover__body-list",4,"ngIf"],[1,"slds-popover__body-list"],[1,"slds-m-bottom_small"],[1,"slds-media","slds-media_center"],[1,"slds-media__figure"],["size","small",3,"module"],[1,"slds-media__body"],[1,"slds-text-heading_small","slds-hyphenate"],[3,"label"],[4,"ngIf"],["class","slds-align_absolute-center",4,"ngIf"],[3,"module","item","fields",4,"ngFor","ngForOf"],["class","slds-m-top_x-small slds-text-align_right",4,"ngIf"],[1,"slds-align_absolute-center"],["size","12"],[3,"module","item","fields"],[1,"slds-m-top_x-small","slds-text-align_right"],["href","javascript:void(0);",3,"click"],["label","LBL_VIEWALL"]],template:function(e,t){1&e&&m.DNE(0,Ha,12,6,"dl",0),2&e&&m.Y8G("ngIf",t.aclAccess)},dependencies:[i.Sq,i.bT,I.J,S.W,Dt.P,Na],encapsulation:2})}return ObjectModelPopoverRelated})(),Ja=(()=>{class ObjectActionDeactivateBeansButton{constructor(e,t,s,i,n,l){this.language=e,this.metadata=t,this.modal=s,this.injector=i,this.modellist=n,this.modalwindow=l,this.saving=!1,this.selectedItems=[]}get disabled(){return!1}get hasSelection(){return this.modellist.getSelectedCount()>1}get hidden(){return!this.hasSelection}execute(){this.saving||(this.selectedItems=this.modellist.getSelectedItems(),this.modal.openModal("ObjectActionDeactivateBeansModal",!0,this.injector).subscribe((e=>{e&&(e.instance.selectedItems=this.selectedItems,e.instance.module=this.modellist.module)})))}static#e=this.ɵfac=function(e){return new(e||ObjectActionDeactivateBeansButton)(m.rXU(h.B),m.rXU(b.yu),m.rXU(P.y),m.rXU(m.zZn),m.rXU(v.K),m.rXU(Rt.w,8))};static#t=this.ɵcmp=m.VBU({type:ObjectActionDeactivateBeansButton,selectors:[["object-action-deactivate-beans-button"]],decls:2,vars:0,consts:[["label","LBL_DEACTIVATE_BEANS"]],template:function(e,t){1&e&&(m.j41(0,"span"),m.nrm(1,"system-label",0),m.k0s())},dependencies:[S.W],encapsulation:2})}return ObjectActionDeactivateBeansButton})();function Wa(e,t){1&e&&(m.j41(0,"div",12),m.nrm(1,"system-label",13)(2,"system-button-icon",14),m.k0s()),2&e&&(m.R7$(2),m.Y8G("icon","check"))}function Ka(e,t){1&e&&(m.j41(0,"div",12),m.nrm(1,"system-label",15)(2,"system-button-icon",14),m.k0s()),2&e&&(m.R7$(2),m.Y8G("icon","close"))}function Qa(e,t){if(1&e){const e=m.RV6();m.j41(0,"system-input-radio",10),m.mxI("ngModelChange",(function(t){m.eBV(e);const s=m.XpG();return m.DH7(s.value,t)||(s.value=t),m.Njj(t)})),m.EFF(1),m.DNE(2,Wa,3,1,"div",11)(3,Ka,3,1,"div",11),m.k0s()}if(2&e){const e=t.$implicit,s=m.XpG();m.Y8G("value",e.id),m.R50("ngModel",s.value),m.R7$(),m.SpI("",s.fieldname(e)," "),m.R7$(),m.Y8G("ngIf","deactivated"==e.itemsaved),m.R7$(),m.Y8G("ngIf","error"==e.itemsaved)}}function Za(e,t){if(1&e){const e=m.RV6();m.j41(0,"button",16),m.bIt("click",(function(){m.eBV(e);const t=m.XpG();return m.Njj(t.closeModal())})),m.nrm(1,"system-label",17),m.k0s()}}function er(e,t){if(1&e){const e=m.RV6();m.j41(0,"button",18),m.bIt("click",(function(){m.eBV(e);const t=m.XpG();return m.Njj(t.select())})),m.nrm(1,"system-label",19),m.k0s()}}function tr(e,t){if(1&e){const e=m.RV6();m.j41(0,"button",18),m.bIt("click",(function(){m.eBV(e);const t=m.XpG();return m.Njj(t.closeModal())})),m.nrm(1,"system-label",20),m.k0s()}}let sr=(()=>{class ObjectActionDeactivateBeansModal{constructor(e,t,s){this.language=e,this.model=t,this.metadata=s,this.componentconfig={},this.selectedItems=[],this.module=[],this.showfinish=!1,this.self={},this.value=""}ngOnInit(){this.componentconfig=this.metadata.getComponentConfig("ObjectActionDeactivateBeansModal",this.model.module),this.value=this.selectedItems[0].id}fieldname(e){return e[this.componentconfig.fieldname]}closeModal(){this.self.destroy()}select(){let e=0;for(let t of this.selectedItems)t.id!=this.value?(t.successor_id=this.value,t.is_inactive=1,this.model.reset(),this.model.id=t.id,this.model.initialize(),this.model.module=this.module,this.model.setData(t),this.model.validate()?this.model.save().subscribe((s=>{e++,t.itemsaved="deactivated",e==this.selectedItems.length-1&&(this.showfinish=!0)}),(s=>{e++,t.itemsaved="error",e==this.selectedItems.length-1&&(this.showfinish=!0)})):e++):e++}static#e=this.ɵfac=function(e){return new(e||ObjectActionDeactivateBeansModal)(m.rXU(h.B),m.rXU(g.g),m.rXU(b.yu))};static#t=this.ɵcmp=m.VBU({type:ObjectActionDeactivateBeansModal,selectors:[["ng-component"]],inputs:{selectedItems:"selectedItems",module:"module"},features:[m.Jv_([g.g])],decls:12,vars:4,consts:[["size","x-small"],[3,"close"],["label","LBL_SELECT_ACTIVE"],["margin","none"],[1,"slds-m-left_x-small","slds-m-vertical_large"],[1,"slds-form-element"],[1,"slds-form-element__control"],["name","module",3,"value","ngModel","ngModelChange",4,"ngFor","ngForOf"],["class","slds-button slds-button--neutral",3,"click",4,"ngIf"],["class","slds-button slds-button--brand",3,"click",4,"ngIf"],["name","module",3,"value","ngModel","ngModelChange"],["class","slds-float--right slds-m-right_small",4,"ngIf"],[1,"slds-float--right","slds-m-right_small"],["label","LBL_DEACTIVATED"],[1,"slds-m-left_small",3,"icon"],["label","LBL_ERROR"],[1,"slds-button","slds-button--neutral",3,"click"],["label","LBL_CANCEL"],[1,"slds-button","slds-button--brand",3,"click"],["label","LBL_EXECUTE"],["label","LBL_FINISH"]],template:function(e,t){1&e&&(m.j41(0,"system-modal",0)(1,"system-modal-header",1),m.bIt("close",(function(){return t.closeModal()})),m.nrm(2,"system-label",2),m.k0s(),m.j41(3,"system-modal-content",3)(4,"div",4)(5,"div",5)(6,"div",6),m.DNE(7,Qa,4,5,"system-input-radio",7),m.k0s()()()(),m.j41(8,"system-modal-footer"),m.DNE(9,Za,2,0,"button",8)(10,er,2,0,"button",9)(11,tr,2,0,"button",9),m.k0s()()),2&e&&(m.R7$(7),m.Y8G("ngForOf",t.selectedItems),m.R7$(2),m.Y8G("ngIf",!t.showfinish),m.R7$(),m.Y8G("ngIf",!t.showfinish),m.R7$(),m.Y8G("ngIf",t.showfinish))},dependencies:[i.Sq,i.bT,l.BC,l.vS,R.t,z.J,S.W,Be.D,$e.I,Oe.Q,Xe.C],encapsulation:2})}return ObjectActionDeactivateBeansModal})();var ir=s(81086);function nr(e,t){if(1&e){const e=m.RV6();m.j41(0,"div",13)(1,"input",14,15),m.bIt("keyup.enter",(function(){m.eBV(e);const t=m.sdS(2),s=m.XpG();return m.Njj(s.addChecklist(t.value))})),m.k0s(),m.j41(3,"button",16),m.bIt("click",(function(){m.eBV(e);const t=m.sdS(2),s=m.XpG();return m.Njj(s.addChecklist(t.value))})),m.nrm(4,"system-button-icon",17),m.k0s(),m.j41(5,"button",18),m.bIt("click",(function(){m.eBV(e);const t=m.XpG();return m.Njj(t.setShowAddChecklist(!1))})),m.nrm(6,"system-button-icon",19),m.k0s()()}if(2&e){const e=m.sdS(2);m.R7$(3),m.Y8G("disabled",!e.value)}}function lr(e,t){if(1&e){const e=m.RV6();m.j41(0,"div",38)(1,"span",39),m.bIt("click",(function(t){m.eBV(e);const s=m.XpG().$implicit;return m.XpG(2).setCurrentEditingChecklist(s),m.Njj(t.stopPropagation())})),m.EFF(2),m.k0s()()}if(2&e){const e=m.XpG().$implicit;m.R7$(),m.Y8G("system-title",e.name),m.R7$(),m.JRh(e.name)}}function or(e,t){if(1&e){const e=m.RV6();m.j41(0,"input",40),m.bIt("click",(function(e){return e.stopPropagation()}))("ngModelChange",(function(t){m.eBV(e);const s=m.XpG().$implicit,i=m.XpG(2);return m.Njj(i.setChecklistName(t,s))}))("keyup.enter",(function(){m.eBV(e);const t=m.XpG().$implicit,s=m.XpG(2);return m.Njj(s.save(t))}))("blur",(function(){m.eBV(e);const t=m.XpG().$implicit,s=m.XpG(2);return m.Njj(s.save(t))})),m.k0s()}if(2&e){const e=m.XpG().$implicit;m.Y8G("ngModel",e.name)}}function ar(e,t){if(1&e){const e=m.RV6();m.j41(0,"button",41),m.bIt("click",(function(){m.eBV(e);const t=m.XpG().$implicit,s=m.XpG(2);return m.Njj(s.setShowAddButton(t,!1))})),m.nrm(1,"system-button-icon",9),m.k0s()}if(2&e){const e=m.XpG().$implicit,t=m.XpG(2);m.AVh("spice-hover-child",e!=t.activeChecklist)}}function rr(e,t){if(1&e){const e=m.RV6();m.j41(0,"div",51)(1,"input",52),m.bIt("ngModelChange",(function(t){m.eBV(e);const s=m.XpG().$implicit,i=m.XpG(3);return m.Njj(i.setItemTextValue(t,s))}))("keyup.enter",(function(){m.eBV(e);const t=m.XpG().$implicit,s=m.XpG(3);return m.Njj(s.save(t))}))("blur",(function(t){m.eBV(e),m.XpG();const s=m.sdS(1),i=m.XpG(3);return m.Njj(i.onItemBlur(t,s))})),m.k0s(),m.j41(2,"button",53),m.bIt("click",(function(t){m.eBV(e);const s=m.XpG().$implicit;return m.XpG(3).save(s),m.Njj(t.stopPropagation())})),m.nrm(3,"system-button-icon",17),m.k0s(),m.j41(4,"button",54),m.bIt("click",(function(t){m.eBV(e);const s=m.XpG().$implicit,i=m.XpG(3);return m.Njj(i.cancelItemChanges(s,t))})),m.nrm(5,"system-button-icon",19),m.k0s()()}if(2&e){const e=m.XpG().$implicit;m.R7$(),m.Y8G("ngModel",e.text),m.R7$(),m.Y8G("disabled",!e.isChanged)}}function dr(e,t){if(1&e&&(m.j41(0,"div",55),m.EFF(1),m.k0s()),2&e){const e=m.XpG().$implicit;m.xc7("text-decoration",e.isCompleted?"line-through":"initial"),m.Y8G("system-title",e.text),m.R7$(),m.SpI(" ",e.text," ")}}function cr(e,t){if(1&e){const e=m.RV6();m.j41(0,"div",56),m.bIt("click",(function(){m.eBV(e);const t=m.XpG().$implicit,s=m.XpG(3);return m.Njj(s.setCurrentEditingItem(t))})),m.nrm(1,"system-label",57),m.k0s()}}function ur(e,t){if(1&e){const e=m.RV6();m.j41(0,"div",42,43)(2,"div",44),m.bIt("click",(function(t){const s=m.eBV(e).$implicit;return m.XpG(3).setCurrentEditingItem(s),m.Njj(t.stopPropagation())})),m.j41(3,"div",25),m.nrm(4,"system-utility-icon",26),m.k0s(),m.j41(5,"system-checkbox",45),m.mxI("ngModelChange",(function(t){const s=m.eBV(e).$implicit;return m.DH7(s.isCompleted,t)||(s.isCompleted=t),m.Njj(t)})),m.bIt("ngModelChange",(function(){const t=m.eBV(e).$implicit,s=m.XpG(3);return m.Njj(s.save(t))})),m.k0s(),m.DNE(6,rr,6,2,"div",46)(7,dr,2,4,"ng-template",null,47,m.C5r),m.j41(9,"div",48)(10,"button",49),m.bIt("click",(function(){const t=m.eBV(e).$implicit,s=m.XpG().$implicit,i=m.XpG(2);return m.Njj(i.deleteChecklistItem(t,s))})),m.nrm(11,"system-button-icon",31),m.k0s()()(),m.DNE(12,cr,2,0,"div",50),m.k0s()}if(2&e){const e=t.$implicit,s=m.sdS(8),i=m.XpG().$implicit,n=m.XpG(2);m.AVh("slds-hide",!i.showCompleted&&e.isCompleted)("slds-theme--warning",n.currentEditingItem!=e&&e.isChanged),m.R7$(2),m.Y8G("cdkDragData",e),m.R7$(2),m.AVh("spice-hover-child",e!=n.currentEditingItem),m.R7$(),m.R50("ngModel",e.isCompleted),m.R7$(),m.Y8G("ngIf",e==n.currentEditingItem)("ngIfElse",s),m.R7$(4),m.AVh("spice-hover-child",e!=n.currentEditingItem),m.R7$(2),m.Y8G("ngIf",n.currentEditingItem!=e&&e.isChanged)}}function mr(e,t){if(1&e){const e=m.RV6();m.j41(0,"div",58)(1,"div",59,60)(3,"input",61,62),m.bIt("keyup.enter",(function(){m.eBV(e);const t=m.sdS(4),s=m.XpG().$implicit,i=m.XpG(2);return m.Njj(i.addChecklistItem(s,t))}))("blur",(function(t){m.eBV(e);const s=m.sdS(2),i=m.sdS(4),n=m.XpG().$implicit,l=m.XpG(2);return m.Njj(l.onChecklistBlur(n,t,s,i))})),m.k0s(),m.j41(5,"button",63),m.bIt("click",(function(){m.eBV(e);const t=m.sdS(4),s=m.XpG().$implicit,i=m.XpG(2);return m.Njj(i.addChecklistItem(s,t))})),m.nrm(6,"system-button-icon",64),m.k0s(),m.j41(7,"button",65),m.bIt("click",(function(){m.eBV(e);const t=m.XpG().$implicit,s=m.XpG(2);return m.Njj(s.setShowAddButton(t,!0))})),m.nrm(8,"system-button-icon",66),m.k0s()()()}if(2&e){const e=m.sdS(4);m.R7$(5),m.Y8G("disabled",!e.value)}}function hr(e,t){if(1&e){const e=m.RV6();m.j41(0,"div",23),m.bIt("click",(function(){const t=m.eBV(e).$implicit,s=m.XpG(2);return m.Njj(s.setActiveChecklist(t))})),m.j41(1,"div",24)(2,"div",25),m.nrm(3,"system-utility-icon",26),m.k0s(),m.DNE(4,lr,3,2,"div",27)(5,or,1,1,"input",28)(6,ar,2,2,"button",29),m.j41(7,"button",30),m.bIt("click",(function(){const t=m.eBV(e).$implicit,s=m.XpG(2);return m.Njj(s.deleteChecklist(t))})),m.nrm(8,"system-button-icon",31),m.k0s(),m.j41(9,"button",32),m.bIt("click",(function(){const t=m.eBV(e).$implicit,s=m.XpG(2);return m.Njj(s.toggleShowCompleted(t))})),m.nrm(10,"system-button-icon",33)(11,"system-label",34),m.k0s()(),m.j41(12,"div",35),m.bIt("cdkDropListDropped",(function(t){m.eBV(e);const s=m.XpG(2);return m.Njj(s.onDrop(t))})),m.DNE(13,ur,13,13,"div",36),m.k0s(),m.DNE(14,mr,9,1,"div",37),m.k0s()}if(2&e){const e=t.$implicit,s=m.XpG(2);m.Y8G("cdkDragData",e),m.R7$(3),m.AVh("spice-hover-child",e!=s.activeChecklist),m.R7$(),m.Y8G("ngIf",s.currentEditingChecklist!=e),m.R7$(),m.Y8G("ngIf",s.currentEditingChecklist==e),m.R7$(),m.Y8G("ngIf",e.showAddButton),m.R7$(),m.AVh("spice-hover-child",e!=s.activeChecklist),m.R7$(2),m.AVh("spice-hover-child",e!=s.activeChecklist),m.Y8G("system-title",e.showCompleted?"LBL_HIDE_COMPLETED":"LBL_SHOW_COMPLETED"),m.R7$(2),m.Y8G("label",e.showCompleted?"LBL_HIDE_COMPLETED":"LBL_SHOW_COMPLETED"),m.R7$(),m.Y8G("cdkDropListData",e.items),m.R7$(),m.Y8G("ngForOf",e.items),m.R7$(),m.Y8G("ngIf",!e.showAddButton)}}function gr(e,t){if(1&e){const e=m.RV6();m.j41(0,"div",20)(1,"div",21),m.bIt("cdkDropListDropped",(function(t){m.eBV(e);const s=m.XpG();return m.Njj(s.onDrop(t))})),m.DNE(2,hr,15,15,"div",22),m.k0s()()}if(2&e){const e=m.XpG();m.Y8G("system-overlay-loading-spinner",e.model.isLoading||e.isSaving),m.R7$(),m.Y8G("cdkDropListData",e.checklists),m.R7$(),m.Y8G("ngForOf",e.checklists)}}function pr(e,t){if(1&e&&(m.j41(0,"div",67)(1,"system-illustration-no-data"),m.nrm(2,"system-label",68),m.k0s()()),2&e){const e=m.XpG();m.Y8G("system-overlay-loading-spinner",e.model.isLoading)}}let fr=(()=>{class ObjectChecklists{constructor(e,t,s){this.model=e,this.language=t,this.metadata=s,this.isAddingChecklist=!1,this.isSaving=!1,this.checklists=[],this.subscriptions=new A.yU,this.fieldName="checklists",this.panelExpanded=!0}ngOnInit(){this.setFieldName(),this.loadData()}ngOnDestroy(){this.subscriptions.unsubscribe()}addChecklist(e){if(this.checklists||(this.checklists=[]),!e)return;const t={id:this.model.generateGuid(),name:e,showCompleted:!0,items:[]};this.checklists=[t,...this.checklists],this.isAddingChecklist=!1,this.setActiveChecklist(t),this.save(t)}addChecklistItem(e,t){if(!t.value)return;const s={id:this.model.generateGuid(),isCompleted:!1,text:t.value,isChanged:!0};e.items.push(s),t.value="",this.save(s)}deleteChecklist(e){this.checklists=this.checklists.filter((t=>t!=e)),this.save(e)}deleteChecklistItem(e,t){t.items=t.items.filter((t=>t!=e)),e.isChanged=!0,this.save(e)}setCurrentEditingItem(e){e.isChanged||(e.textBackup=e.text),this.currentEditingItem=e}onItemBlur(e,t){t.contains(e.relatedTarget)||(this.currentEditingItem=void 0)}onChecklistBlur(e,t,s,i){s.contains(t.relatedTarget)||!s.contains(t.relatedTarget)&&i.value||(e.showAddButton=!0)}setShowAddChecklist(e){this.isAddingChecklist=e}setCurrentEditingChecklist(e){this.currentEditingChecklist=e}save(e){if("isChanged"in e&&!1===e?.isChanged||"items"in e&&!e.name)return;this.isSaving=!0,"items"in e&&this.setCurrentEditingChecklist(void 0);const t=this.checklists.map((t=>{const s={...t};return s.items=s.items.map((t=>{const s={...t};return e!=t&&s.isChanged&&(s.text=t.textBackup),delete s.isChanged,delete s.textBackup,s})),s}));"isChanged"in e&&delete e.isChanged,"textBackup"in e&&delete e.textBackup,this.model.backend.save(this.model.module,this.model.id,{[this.fieldName]:t}).subscribe((()=>this.isSaving=!1)),this.currentEditingItem=void 0}cancelItemChanges(e,t){t.stopPropagation(),e.text=e.textBackup,e.isChanged=!1,this.currentEditingItem=void 0}setActiveChecklist(e){e!=this.activeChecklist&&(this.activeChecklist&&(this.activeChecklist.showAddButton=!0),e&&this.setShowAddButton(e,!1),this.activeChecklist=e)}setShowAddButton(e,t){e.showAddButton=t}setItemTextValue(e,t){t.isChanged=e!=t.text,t.text=e}setChecklistName(e,t){t.name=e}toggleShowCompleted(e){e.showCompleted=!e.showCompleted,this.currentEditingItem=void 0,this.save(e)}setFieldName(){let e=this.metadata.getComponentConfig("ObjectChecklists",this.model.module)?.fieldName;e&&(this.fieldName=e)}loadData(){this.model.backend.get(this.model.module,this.model.id).subscribe((e=>{Array.isArray(e?.[this.fieldName])&&(this.checklists=e[this.fieldName])}))}onDrop(e){e.previousContainer===e.container?(0,n.HD)(e.container.data,e.container.data.indexOf(e.item.data),e.currentIndex):(0,n.eg)(e.previousContainer.data,e.container.data,e.previousContainer.data.indexOf(e.item.data),e.currentIndex),e.item.data.isChanged=!0,this.save(e.item.data)}toggleExpansion(){this.panelExpanded=!this.panelExpanded}static#e=this.ɵfac=function(e){return new(e||ObjectChecklists)(m.rXU(g.g),m.rXU(h.B),m.rXU(b.yu))};static#t=this.ɵcmp=m.VBU({type:ObjectChecklists,selectors:[["object-checklists"]],decls:14,vars:10,consts:[[1,"slds-section"],[1,"slds-section__title","slds-m-bottom--small"],["aria-expanded","true",1,"slds-section__title-action","slds-grid",3,"click"],["icon","switch","size","x-small","addclasses","slds-section__title-action-icon slds-button__icon slds-button__icon_left"],[1,"slds-grid","slds-grid--vertical-align-center","slds-grow"],[1,"slds-truncate"],["label","LBL_CHECKLISTS"],[1,"slds-grid","slds-grid--align-end",3,"click"],["system-title","LBL_ADD_CHECKLIST",1,"slds-button","slds-button--icon","slds-button--icon-border","slds-button","slds-align--absolute-center",2,"height","1.4rem","width","1.6rem",3,"click"],["icon","add","size","medium"],["class","slds-grid slds-grid--vertical-align-center",4,"ngIf"],["class","slds-form-element__control objectchecklistdragboundary",3,"system-overlay-loading-spinner",4,"ngIf"],["class","slds-box slds-align--absolute-center","style","min-height: 250px",3,"system-overlay-loading-spinner",4,"ngIf"],[1,"slds-grid","slds-grid--vertical-align-center"],["system-autofocus","","type","text",1,"slds-input","slds-grow","slds-truncate","slds-m-right--xx-small",2,"min-height","0","height","1.6rem",3,"keyup.enter"],["addChecklistInput",""],["system-title","LBL_CHECK",1,"slds-button","slds-button--icon","slds-button--icon-border-filled",2,"height","1.4rem","width","1.6rem",3,"disabled","click"],["icon","check"],["system-title","LBL_CANCEL",1,"slds-button","slds-button--icon","slds-button--icon-border-filled",2,"height","1.4rem","width","1.6rem",3,"click"],["icon","close","size","medium"],[1,"slds-form-element__control","objectchecklistdragboundary",3,"system-overlay-loading-spinner"],["cdkDropList","","cdkDropListLockAxis","y","cdkDropListGroup","",3,"cdkDropListData","cdkDropListDropped"],["cdkDrag","","cdkDragBoundary",".objectchecklistdragboundary","class","slds-box slds-p-around--none slds-m-bottom--small slds-drag--preview",3,"cdkDragData","click",4,"ngFor","ngForOf"],["cdkDrag","","cdkDragBoundary",".objectchecklistdragboundary",1,"slds-box","slds-p-around--none","slds-m-bottom--small","slds-drag--preview",3,"cdkDragData","click"],[1,"slds-grid","slds-grid--vertical-align-center","slds-m-bottom--large","slds-border--bottom","slds-p-around--small","slds-theme--shade","spice-hover-display-children",2,"min-height","58px"],[2,"min-width","32px"],["cdkDragHandle","","icon","drag_and_drop","size","x-small",1,"slds-p-horizontal--x-small",2,"cursor","move"],["class","slds-grow slds-truncate",4,"ngIf"],["system-autofocus","","type","text","class","slds-input slds-m-right--xx-small",3,"ngModel","click","ngModelChange","keyup.enter","blur",4,"ngIf"],["system-title","LBL_ADD_ITEM","class","slds-button slds-button--icon slds-button--icon-border-filled slds-button slds-align--absolute-center",3,"spice-hover-child","click",4,"ngIf"],["system-title","LBL_DELETE",1,"slds-button","slds-button--icon","slds-button--icon-border-filled",3,"click"],["icon","delete","size","medium"],[1,"slds-button","slds-button--neutral",3,"system-title","click"],["icon","toggle","size","medium","addclasses","slds-button__icon_left"],[1,"slds-truncate",3,"label"],["cdkDropList","","cdkDropListLockAxis","y",2,"min-height","20px",3,"cdkDropListData","cdkDropListDropped"],["class","slds-p-vertical--xx-small spice-hover-display-children",3,"slds-hide","slds-theme--warning",4,"ngFor","ngForOf"],["class","slds-box slds-m-top--large slds-m-around--small",4,"ngIf"],[1,"slds-grow","slds-truncate"],[2,"min-width","20px",3,"system-title","click"],["system-autofocus","","type","text",1,"slds-input","slds-m-right--xx-small",3,"ngModel","click","ngModelChange","keyup.enter","blur"],["system-title","LBL_ADD_ITEM",1,"slds-button","slds-button--icon","slds-button--icon-border-filled","slds-button","slds-align--absolute-center",3,"click"],[1,"slds-p-vertical--xx-small","spice-hover-display-children"],["itemContainer",""],["cdkDrag","","cdkDragBoundary",".objectchecklistdragboundary",1,"slds-grid","slds-grid--vertical-align-center","slds-drag--preview","slds-p-right--x-small",3,"cdkDragData","click"],[3,"ngModel","ngModelChange"],["class","slds-grid slds-grow slds-p-right--xx-small",4,"ngIf","ngIfElse"],["itemTextContainer",""],[2,"width","32px","height","32px"],[1,"slds-button","slds-button--icon","slds-button--icon-border-filled",3,"click"],["class","slds-p-horizontal--small slds-p-bottom--xx-small",3,"click",4,"ngIf"],[1,"slds-grid","slds-grow","slds-p-right--xx-small"],["type","text","system-autofocus","",1,"slds-input","slds-m-right--xx-small",3,"ngModel","ngModelChange","keyup.enter","blur"],["system-title","LBL_CHECK",1,"slds-button","slds-button--icon","slds-button--icon-border-filled",3,"disabled","click"],["system-title","LBL_CANCEL",1,"slds-button","slds-button--icon","slds-button--icon-border-filled",3,"click"],[1,"slds-grow","slds-p-right--xx-small","slds-truncate",3,"system-title"],[1,"slds-p-horizontal--small","slds-p-bottom--xx-small",3,"click"],["label","MSG_HAS_UNSAVED"],[1,"slds-box","slds-m-top--large","slds-m-around--small"],[1,"slds-grid"],["addItemContainer",""],["system-autofocus","","type","text",1,"slds-input","slds-m-right--x-small",3,"keyup.enter","blur"],["addItemInput",""],["system-title","LBL_SAVE",1,"slds-button","slds-button--icon","slds-button--icon-border-filled","slds-button","slds-align--absolute-center",3,"disabled","click"],["icon","check","size","medium"],["system-title","LBL_CANCEL",1,"slds-button","slds-button--icon","slds-button--icon-border-filled","slds-button","slds-align--absolute-center",3,"click"],["icon","clear","size","medium"],[1,"slds-box","slds-align--absolute-center",2,"min-height","250px",3,"system-overlay-loading-spinner"],["label","LBL_NO_CHECKLISTS"]],template:function(e,t){1&e&&(m.j41(0,"div",0)(1,"div",1)(2,"div",2),m.bIt("click",(function(){return t.toggleExpansion()})),m.nrm(3,"system-utility-icon",3),m.j41(4,"div",4)(5,"span",5),m.nrm(6,"system-label",6),m.k0s()(),m.j41(7,"div",7),m.bIt("click",(function(e){return e.stopPropagation()})),m.j41(8,"button",8),m.bIt("click",(function(){return t.setShowAddChecklist(!0)})),m.nrm(9,"system-button-icon",9),m.k0s(),m.DNE(10,nr,7,1,"div",10),m.k0s()()(),m.j41(11,"div"),m.DNE(12,gr,3,3,"div",11)(13,pr,3,1,"div",12),m.k0s()()),2&e&&(m.AVh("slds-is-open",t.panelExpanded),m.R7$(8),m.AVh("slds-hide",t.isAddingChecklist),m.R7$(2),m.Y8G("ngIf",t.isAddingChecklist),m.R7$(),m.xc7("display",t.panelExpanded?"block":"none"),m.Y8G("@tabAnimation",t.panelExpanded),m.R7$(),m.Y8G("ngIf",t.checklists.length>0),m.R7$(),m.Y8G("ngIf",0==t.checklists.length))},dependencies:[i.Sq,i.bT,n.O7,n.RK,n.T1,n.Fb,l.me,l.BC,l.vS,R.t,vi.f,vl.L,S.W,E.B,ir.a,bn.M,j.L],encapsulation:2,data:{animation:[(0,f.hZ)("tabAnimation",[(0,f.wk)("true",(0,f.iF)({height:"*",opacity:1})),(0,f.wk)("false",(0,f.iF)({height:"0px",opacity:0})),(0,f.kY)("true => false",[(0,f.iF)({overflow:"hidden"}),(0,f.i0)(".5s")]),(0,f.kY)("false => true",[(0,f.i0)(".5s"),(0,f.iF)({overflow:"inherit"})])])]}})}return ObjectChecklists})(),br=(()=>{class timeline{constructor(e,t,s,i,n){this.modelutilities=e,this.backend=t,this.metadata=s,this.broadcast=i,this.model=n,this.smartView=!1,this.smartFontSize=!1,this.records=[],this.checking=!1,this.loading=!1,this.loadingMore=!1,this.startDate=null,this.timeRangeStart=new moment,this.timelineModules=[],this.onlyAudits=!1,this.filters={searchterm:"",objectfilters:["auditLog","Modules"],own:""},this.searchTerm="",this.auditLogEnabled=!1,this.initial=!0,this.totalModuleRecords=0,this.loadedAuditRecords=0,this.totalAuditRecords=0,this.loadedModuleRecords=0,this.moduleSearch=!0,this.auditSearch=!0,this.broadcast.message$.subscribe((e=>this.handleMessage(e)))}get rangeStart(){return console.log(this.timeRangeStart.format()),this.timeRangeStart.format()}get getModuleSearch(){return this.totalModuleRecords!==this.loadedModuleRecords}get getAuditSearch(){return this.totalAuditRecords!==this.loadedAuditRecords}get totalRecords(){return this.totalAuditRecords+this.totalModuleRecords}reload(e=!1,t=""){this.initial=!0,this.startDate=this.rangeStart,this.loadedModuleRecords=0,this.loadedAuditRecords=0,this.totalAuditRecords=0,this.totalModuleRecords=0,this.moduleSearch=!0,this.auditSearch=!0,e||(this.records=[]),this.getTimelineData(e,t)}getTimelineData(e=!1,t=""){e||(this.loading=!0);let s={endDate:t,startDate:this.startDate,searchTerm:this.filters.searchterm,moduleSearch:this.moduleSearch,auditSearch:this.auditSearch,own:this.filters.own,objects:JSON.stringify(this.filters.objectfilters),timeRangeStart:this.rangeStart};console.log(s),this.backend.postRequest("module/Timeline/"+this.parent.module+"/"+this.parent.id,{},s).subscribe((t=>{console.log(t);for(let e of t.records)e.hasOwnProperty("module")&&(e.data=this.modelutilities.backendModel2spice(e.module,e.data));this.getBody(t,this.initial),this.addRecords(t.records,e),this.loading=!1}))}loadMore(){this.loadingMore=!0;let e={endDate:"",startDate:this.startDate,searchTerm:this.filters.searchterm,moduleSearch:this.getModuleSearch,auditSearch:this.getAuditSearch,own:this.filters.own,objects:JSON.stringify(this.filters.objectfilters),timeRangeStart:this.rangeStart};this.backend.postRequest("module/Timeline/"+this.parent.module+"/"+this.parent.id,{},e).subscribe((e=>{console.log(e);for(let t of e.records)t.data=this.modelutilities.backendModel2spice(t.module,t.data);this.getBody(e,this.initial),this.addRecords(e.records),this.loadingMore=!1}))}setRecord(e){if(!e.hasOwnProperty("data"))return this.recordModule=this.parent.module,this.recordId=this.parent.id,void(this.recordData=e);this.recordModule=e.hasOwnProperty("module")?e.module:"Audit",this.recordId=e.id,this.recordData=e.hasOwnProperty("module")?e.data:e}clearRecord(){this.recordModule="",this.recordId="",this.recordData=""}canLoadMore(){return!(this.loading||this.loadingMore||this.totalAuditRecords===this.loadedAuditRecords&&this.totalModuleRecords===this.loadedModuleRecords||!this.moduleSearch&&!this.auditSearch)}handleMessage(e){let t=e.messagetype.split(".");if("model"===t[0])switch(t[1]){case"merge":this.reload(!0,this.startDate),console.log(1);break;case"save":this.reload(!0,this.startDate),console.log(2);break;case"delete":console.log(3);let t=!1;this.timelineModules.indexOf(e.messagedata.module)>=0&&this.records.some(((s,i)=>{if(s.hasOwnProperty("date")&&(s.module,e.messagedata.module,s.id===e.messagedata.id))return this.records.splice(i,1),this.reload(!0,this.startDate),t=!0,!0}))}}addRecords(e,t=!1){if(this.totalAuditRecords===this.loadedAuditRecords&&this.totalModuleRecords===this.loadedModuleRecords&&""===this.searchTerm&&""===this.filters.own&&this.filters.objectfilters.indexOf("Modules")>=0&&this.timeRangeStart.isAfter(this.parent.getField("date_entered"))){let t=this.parent.data;0!==e.length&&t.date_entered.format("YYYY-MM")!==e.slice(-1)[0].date.substring(0,7)&&(t.divider=t.date_entered.format("YYYY-MM")),e.push(t)}this.records=t?e:this.records.concat(e)}getBody(e,t){t&&(this.totalModuleRecords=e.counts.totalModules,this.totalAuditRecords=e.counts.totalAudits,this.timelineModules=e.timelineModules,this.auditLogEnabled=!1,e.timelineModules.indexOf("auditLog")>=0&&(this.timelineModules.splice(e.timelineModules.indexOf("auditLog"),1),this.auditLogEnabled=!0),this.initial=!1),this.startDate=e.endDate,this.loadedModuleRecords+=e.counts.modulesTook,this.loadedAuditRecords+=e.counts.auditsTook,this.auditSearch=e.auditSearch,this.moduleSearch=e.moduleSearch}static#e=this.ɵfac=function(e){return new(e||timeline)(m.KVO(fo.g),m.KVO(ee.H),m.KVO(b.yu),m.KVO(ke.m),m.KVO(g.g))};static#t=this.ɵprov=m.jDH({token:timeline,factory:timeline.ɵfac})}return timeline})();function yr(e,t){if(1&e&&(m.j41(0,"div",18)(1,"p"),m.EFF(2),m.k0s()()),2&e){const e=m.XpG();m.R7$(2),m.JRh(e.date)}}function vr(e,t){1&e&&m.nrm(0,"div",19)}function _r(e,t){if(1&e){const e=m.RV6();m.j41(0,"div",20)(1,"button",21),m.bIt("click",(function(){m.eBV(e);const t=m.XpG();return m.Njj(t.openModal())})),m.nrm(2,"system-button-icon",22),m.k0s()()}}function kr(e,t){if(1&e){const e=m.RV6();m.j41(0,"button",21),m.bIt("click",(function(){m.eBV(e);const t=m.XpG();return m.Njj(t.openModal())})),m.nrm(1,"system-button-icon",22),m.k0s()}}function Rr(e,t){1&e&&m.nrm(0,"div",23)}function Ir(e,t){if(1&e&&(m.j41(0,"div",18)(1,"p"),m.EFF(2),m.k0s()()),2&e){const e=m.XpG();m.R7$(2),m.JRh(e.date)}}const xr=e=>({"slds-grid--align-spread":e}),jr=(e,t)=>({"slds-text-heading--medium":e,"slds-text-heading--small":t});let Gr=(()=>{class ObjectTimelineItemAudit{constructor(e,t,s,i,n,l,o){this.timeline=e,this.model=t,this.language=s,this.metadata=i,this.userpreferences=n,this.modal=l,this.ViewContainerRef=o,this.date=""}get fieldCount(){return this.auditCount>1?this.auditCount+" changes":this.auditCount+" change"}get user_name(){let e=this.record.user_name;return e.charAt(0).toUpperCase()+e.substring(1)}get description(){let e="";for(let t of this.record.data)e+=this.record.data.length>1?this.language.getFieldDisplayName(this.model.module,t.field_name)+", ":this.language.getFieldDisplayName(this.model.module,t.field_name);return e}get module(){return this.model.module.slice(0,-1)}ngOnInit(){this.side?this.itemside={"slds-m-right--xx-small":!0,"slds-grid--align-end":!0}:this.itemside={"slds-m-left--xx-small":!0},this.calculateDate(),this.auditCount=this.record.data.length}openModal(){this.modal.openModal("ObjectTimelineAuditlogModal",!0,this.ViewContainerRef.injector).subscribe((e=>{e.instance.auditLog=this.record}))}calculateDate(){const e=moment.utc(this.record.date),t=moment.utc(e.format("YYYY M D")).isSame((new moment).format("YYYY M D")),s=e.isSame(new moment,"year");this.date=t?e.format(this.userpreferences.getTimeFormat()):s?e.format("MMM D"):e.format(this.userpreferences.getDateFormat())}static#e=this.ɵfac=function(e){return new(e||ObjectTimelineItemAudit)(m.rXU(br),m.rXU(g.g),m.rXU(h.B),m.rXU(b.yu),m.rXU(w.S),m.rXU(P.y),m.rXU(m.c1b))};static#t=this.ɵcmp=m.VBU({type:ObjectTimelineItemAudit,selectors:[["object-timeline-item-audit"]],inputs:{record:"record",side:"side"},decls:23,vars:19,consts:[[1,"slds-grid",3,"ngClass"],["style","width: 70px","class","slds-align--absolute-center slds-m-horizontal--none",4,"ngIf"],["class","objecttimeline-item-nubbin-right slds-align--absolute-center",4,"ngIf"],[1,"objecttimeline-item","slds-m-vertical--medium","slds-height_full",3,"click"],[1,"slds-popover__body","slds-grid",2,"height","90px",3,"ngClass"],[1,"slds-grid","slds-grid--vertical","slds-grid--vertical-align-center",2,"width","32px"],[1,"slds-m-horizontal--xx-small",2,"width","32px"],["icon","record_update"],["class","slds-height_full slds-align--absolute-center",4,"ngIf"],[1,"slds-grid","slds-grid--align-spread",2,"width","calc(100% - 32px)"],[1,"slds-grid--vertical","slds-size--1-of-1","slds-p-left--small"],[1,"slds-grid","slds-grid--align-spread","slds-size--1-of-1",2,"min-height","32px"],[1,"slds-popover__header","slds-p-around--none",2,"border","0"],[3,"ngClass"],["system-model-popover","",3,"module","id"],["class","slds-button slds-button--icon-border-filled slds-p-horizontal--medium slds-button--icon slds-button--icon-small",3,"click",4,"ngIf"],[1,"slds-truncate","slds-p-top--xxx-small",2,"width","calc(100% - 12px)"],["class","objecttimeline-item-nubbin-left slds-align--absolute-center",4,"ngIf"],[1,"slds-align--absolute-center","slds-m-horizontal--none",2,"width","70px"],[1,"objecttimeline-item-nubbin-right","slds-align--absolute-center"],[1,"slds-height_full","slds-align--absolute-center"],[1,"slds-button","slds-button--icon-border-filled","slds-p-horizontal--medium","slds-button--icon","slds-button--icon-small",3,"click"],["icon","search"],[1,"objecttimeline-item-nubbin-left","slds-align--absolute-center"]],template:function(e,t){1&e&&(m.j41(0,"div",0),m.DNE(1,yr,3,1,"div",1)(2,vr,1,0,"div",2),m.j41(3,"section",3),m.bIt("click",(function(){return t.timeline.setRecord(t.record)})),m.j41(4,"div",4)(5,"div",5)(6,"div",6),m.nrm(7,"system-icon",7),m.k0s(),m.DNE(8,_r,3,0,"div",8),m.k0s(),m.j41(9,"div",9)(10,"div",10)(11,"div",11)(12,"header",12)(13,"h2",13)(14,"span",14),m.EFF(15),m.k0s(),m.EFF(16),m.k0s()(),m.DNE(17,kr,2,0,"button",15),m.k0s(),m.j41(18,"div",16)(19,"span"),m.EFF(20),m.k0s()()()()()(),m.DNE(21,Rr,1,0,"div",17)(22,Ir,3,1,"div",1),m.k0s()),2&e&&(m.Y8G("ngClass",t.itemside),m.R7$(),m.Y8G("ngIf",!t.side),m.R7$(),m.Y8G("ngIf",!t.side),m.R7$(2),m.Y8G("ngClass",m.eq3(14,xr,t.side)),m.R7$(4),m.Y8G("ngIf",t.timeline.smartFontSize),m.R7$(5),m.Y8G("ngClass",m.l_i(16,jr,!t.timeline.smartFontSize,t.timeline.smartFontSize)),m.R7$(),m.Y8G("module","Users")("id",t.record.created_by),m.R7$(),m.JRh(t.user_name),m.R7$(),m.SpI(" - ",t.fieldCount,""),m.R7$(),m.Y8G("ngIf",!t.timeline.smartFontSize),m.R7$(3),m.JRh(t.description),m.R7$(),m.Y8G("ngIf",t.side),m.R7$(),m.Y8G("ngIf",t.side))},dependencies:[i.YU,i.bT,R.t,I.J,$l.j],styles:["\n\n\n\n\n\n\n\n\n\n\n.objecttimeline-item[_ngcontent-%COMP%]{background-color:var(--color-white);border:1px solid var(--color-grey-5);border-radius:.25rem;box-shadow:0 2px 3px 0 rgb(0 0 16%);width:calc(100% - 86px)}","\n\n\n\n\n\n\n\n\n\n\n.objecttimeline-item-nubbin-right[_ngcontent-%COMP%]{background-color:var(--color-white);border-bottom:1px solid var(--color-grey-5);border-left:1px solid var(--color-grey-5);height:20px;margin-right:-10px;transform:rotate(45deg);width:20px}","\n\n\n\n\n\n\n\n\n\n\n.objecttimeline-item-nubbin-left[_ngcontent-%COMP%]{background-color:var(--color-white);border-bottom:1px solid var(--color-grey-5);border-left:1px solid var(--color-grey-5);height:20px;margin-left:-10px;transform:rotate(-135deg);width:20px}"]})}return ObjectTimelineItemAudit})();function Cr(e,t){if(1&e&&(m.j41(0,"div",14)(1,"span"),m.EFF(2),m.k0s()()),2&e){const e=m.XpG();m.R7$(2),m.JRh(e.recordDate)}}function wr(e,t){1&e&&m.nrm(0,"div",15)}function Sr(e,t){1&e&&m.nrm(0,"div",16)}function Er(e,t){if(1&e&&(m.j41(0,"div",14)(1,"span"),m.EFF(2),m.k0s()()),2&e){const e=m.XpG();m.R7$(2),m.JRh(e.recordDate)}}const Lr=e=>({"slds-grid--align-spread":e}),Dr=e=>({"slds-m-left--small":e}),Fr=(e,t)=>({"slds-text-heading--medium":e,"slds-text-heading--small":t});let Mr=(()=>{class ObjectTimelineItemCreated{constructor(e,t,s,i,n,l){this.timeline=e,this.model=t,this.language=s,this.metadata=i,this.userpreferences=n,this.session=l,this.date=""}get user_name(){let e=this.record.user_name;return e.charAt(0).toUpperCase()+e.substring(1)}get module(){return this.model.module.slice(0,-1)}get recordDate(){const e=new moment.utc(this.record.date_entered).tz(this.session.getSessionData("timezone")||moment.tz.guess(!0)),t=e.format("YYYYMMDD")==(new moment).format("YYYYMMDD"),s=e.format("YYYY")==(new moment).format("YYYY");return t?e.format(this.userpreferences.getTimeFormat()):s?e.format("MMM D"):e.format(this.userpreferences.getDateFormat())}ngOnInit(){this.side?this.itemside={"slds-m-right--xx-small":!0,"slds-grid--align-end":!0}:this.itemside={"slds-m-left--xx-small":!0}}static#e=this.ɵfac=function(e){return new(e||ObjectTimelineItemCreated)(m.rXU(br),m.rXU(g.g),m.rXU(h.B),m.rXU(b.yu),m.rXU(w.S),m.rXU(Nt.d))};static#t=this.ɵcmp=m.VBU({type:ObjectTimelineItemCreated,selectors:[["object-timeline-item-created"]],inputs:{record:"record",side:"side"},decls:16,vars:17,consts:[[1,"slds-grid","slds-grid",3,"ngClass"],["style","width: 70px","class","slds-align--absolute-center slds-m-horizontal--none",4,"ngIf"],["class","objecttimeline-item-nubbin-right slds-align--absolute-center",4,"ngIf"],[1,"objecttimeline-item","slds-m-vertical--medium","slds-height_full",3,"click"],[1,"slds-popover__body","slds-grid",2,"height","90px",3,"ngClass"],[1,"slds-grid","slds-grid--vertical","slds-grid--vertical-align-center",2,"width","32px"],[1,"slds-m-horizontal--xx-small",2,"width","32px"],[3,"module"],[1,"slds-grid","slds-grid--align-spread","slds-size--7-of-8",2,"width","calc(100% - 32px)"],[1,"slds-m-horizontal--small","slds-media",3,"ngClass"],[1,"slds-media__body",2,"height","45%"],[1,"slds-p-left--none","slds-popover__header","slds-p-top--none",2,"border","0"],[3,"ngClass"],["class","objecttimeline-item-nubbin-left slds-align--absolute-center",4,"ngIf"],[1,"slds-align--absolute-center","slds-m-horizontal--none",2,"width","70px"],[1,"objecttimeline-item-nubbin-right","slds-align--absolute-center"],[1,"objecttimeline-item-nubbin-left","slds-align--absolute-center"]],template:function(e,t){1&e&&(m.j41(0,"div",0),m.DNE(1,Cr,3,1,"div",1)(2,wr,1,0,"div",2),m.j41(3,"section",3),m.bIt("click",(function(){return t.timeline.setRecord(t.record)})),m.j41(4,"div",4)(5,"div",5)(6,"div",6),m.nrm(7,"system-icon",7),m.k0s()(),m.j41(8,"div",8)(9,"div",9)(10,"div",10)(11,"header",11)(12,"h2",12),m.EFF(13),m.k0s()()()()()()(),m.DNE(14,Sr,1,0,"div",13)(15,Er,3,1,"div",1),m.k0s()),2&e&&(m.Y8G("ngClass",t.itemside),m.R7$(),m.Y8G("ngIf",!t.side),m.R7$(),m.Y8G("ngIf",!t.side),m.R7$(2),m.Y8G("ngClass",m.eq3(10,Lr,t.side)),m.R7$(3),m.Y8G("module",t.model.module),m.R7$(2),m.Y8G("ngClass",m.eq3(12,Dr,!t.side)),m.R7$(3),m.Y8G("ngClass",m.l_i(14,Fr,!t.timeline.smartFontSize,t.timeline.smartFontSize)),m.R7$(),m.SpI("This ",t.module," was created"),m.R7$(),m.Y8G("ngIf",t.side),m.R7$(),m.Y8G("ngIf",t.side))},dependencies:[i.YU,i.bT,I.J],styles:["\n\n\n\n\n\n\n\n\n\n\n.objecttimeline-item[_ngcontent-%COMP%]{background-color:var(--color-white);border:1px solid var(--color-grey-5);border-radius:.25rem;box-shadow:0 2px 3px 0 rgb(0 0 16%);width:calc(100% - 86px)}","\n\n\n\n\n\n\n\n\n\n\n.objecttimeline-item-nubbin-right[_ngcontent-%COMP%]{background-color:var(--color-white);border-bottom:1px solid var(--color-grey-5);border-left:1px solid var(--color-grey-5);height:20px;margin-right:-10px;transform:rotate(45deg);width:20px}","\n\n\n\n\n\n\n\n\n\n\n.objecttimeline-item-nubbin-left[_ngcontent-%COMP%]{background-color:var(--color-white);border-bottom:1px solid var(--color-grey-5);border-left:1px solid var(--color-grey-5);height:20px;margin-left:-10px;transform:rotate(-135deg);width:20px}"]})}return ObjectTimelineItemCreated})();function Tr(e,t){if(1&e){const e=m.RV6();m.j41(0,"div",7)(1,"div",8),m.bIt("click",(function(t){const s=m.eBV(e).$implicit,i=m.XpG();return m.Njj(i.setFilter(t,s))})),m.j41(2,"span",9),m.nrm(3,"input",38),m.j41(4,"label",39),m.nrm(5,"span",12),m.j41(6,"span",13),m.EFF(7),m.k0s()()()()()}if(2&e){const e=t.$implicit,s=m.XpG();m.R7$(3),m.Y8G("id",e)("checked",s.getChecked(e)),m.R7$(),m.BMQ("for",e),m.R7$(3),m.JRh(e)}}function Br(e,t){if(1&e){const e=m.RV6();m.j41(0,"div",7)(1,"div",8),m.bIt("click",(function(t){m.eBV(e);const s=m.XpG();return m.Njj(s.setFilter(t,"auditLog"))})),m.j41(2,"span",9),m.nrm(3,"input",38),m.j41(4,"label",39),m.nrm(5,"span",12),m.j41(6,"span",13),m.nrm(7,"system-label",40),m.k0s()()()()()}if(2&e){const e=m.XpG();m.R7$(3),m.Y8G("id","auditLog")("checked",e.getChecked("auditLog")),m.R7$(),m.BMQ("for","auditLog")}}const $r=e=>({"slds-is-open":e});let Or=(()=>{class ObjectTimelineFilter{constructor(e,t,s,i,n){this.renderer=e,this.elementRef=t,this.language=s,this.metadata=i,this.timeline=n,this.isOpen=!1,this.moduleTypes=[],this.objectfilters=[],this.onlyAuditObjects=!1,this.setFromService()}get filterColorClass(){return this.timeline.filters.objectfilters.indexOf("Modules")>=0&&this.timeline.filters.objectfilters.indexOf("auditLog")>=0&&!this.timeline.filters.own?"slds-icon-text-default":"slds-icon-text-error"}onClick(e){this.elementRef.nativeElement.contains(e.target)||(this.isOpen=!1,this.clickListener())}setFromService(){this.objectfilters=JSON.parse(JSON.stringify(this.timeline.filters.objectfilters)),this.ownerfilter=this.timeline.filters.own}setToService(){this.timeline.filters.objectfilters=JSON.parse(JSON.stringify(this.objectfilters)),this.timeline.filters.own=this.ownerfilter,this.timeline.onlyAudits=this.onlyAuditObjects,this.timeline.reload()}toggleOpen(e){e.stopPropagation(),this.isOpen=!this.isOpen,this.isOpen?this.clickListener=this.renderer.listen("document","click",(e=>this.onClick(e))):this.clickListener&&this.clickListener(),this.isOpen&&(this.moduleTypes=this.timeline.timelineModules)}setFilter(e,t){if(e.preventDefault(),"Modules"==t){let e=this.objectfilters.indexOf(t);if(e>=0){if(this.objectfilters.length<=1)return;this.objectfilters.splice(e,1)}else this.objectfilters=this.objectfilters.indexOf("auditLog")>=0?["auditLog","Modules"]:["Modules"]}else if("auditLog"==t){let e=this.objectfilters.indexOf(t);if(e>=0){if(this.objectfilters.length<=1)return;this.objectfilters.splice(e,1)}else this.objectfilters.push(t)}else{this.objectfilters.indexOf("Modules")>=0&&this.objectfilters.splice(this.objectfilters.indexOf("Modules"),1);let e=this.objectfilters.indexOf(t);if(e>=0){if(this.objectfilters.length<=1)return;this.objectfilters.splice(e,1)}else this.objectfilters.push(t)}}getChecked(e){return"Modules"==e?1===this.objectfilters.length&&this.objectfilters.indexOf("Modules")>=0||2===this.objectfilters.length&&this.objectfilters.indexOf("Modules")>=0&&this.objectfilters.indexOf("auditLog")>=0:"auditLog"==e?this.objectfilters.indexOf("auditLog")>=0:this.objectfilters.indexOf(e)>=0}closeDialog(e){this.clickListener&&this.clickListener(),e?this.setToService():this.setFromService(),this.isOpen=!1}static#e=this.ɵfac=function(e){return new(e||ObjectTimelineFilter)(m.rXU(m.sFG),m.rXU(m.aKT),m.rXU(h.B),m.rXU(b.yu),m.rXU(br))};static#t=this.ɵcmp=m.VBU({type:ObjectTimelineFilter,selectors:[["object-timeline-filter"]],decls:47,vars:11,consts:[[1,"slds-dropdown-trigger","slds-dropdown-trigger_click","slds-p-horizontal--xxx-small",3,"ngClass"],["icon","filterList","size","x-small",3,"colorclass","title","click"],[1,"slds-is-absolute","slds-dropdown","slds-dropdown_right","slds-nubbin_top-right",2,"right","-10px","top","25px"],[1,"slds-grid"],[1,"slds-p-horizontal--small","slds-border--right",2,"min-width","180px"],[1,"slds-p-vertical--x-small"],["label","LBL_TYPE"],[1,"slds-form-element","slds-p-vertical--xx-small"],[1,"slds-form-element__control",3,"click"],[1,"slds-checkbox"],["type","checkbox","id","alltypes",3,"checked"],["for","alltypes",1,"slds-checkbox__label"],[1,"slds-checkbox_faux"],[1,"slds-form-element__label"],["label","LBL_ALL"],["class","slds-form-element slds-p-vertical--xx-small",4,"ngFor","ngForOf"],[1,"slds-size--1-of-1","slds-border-top"],["class","slds-form-element slds-p-vertical--xx-small",4,"ngIf"],[1,"slds-p-horizontal--small",2,"min-width","180px"],["label","LBL_FILTER"],[1,"slds-form-element"],[1,"slds-form-element__control"],[1,"slds-radio"],["type","radio","id","timelineownerall","name","filter","value","",3,"ngModel","ngModelChange"],["for","timelineownerall",1,"slds-radio__label"],[1,"slds-radio_faux"],["type","radio","id","timelineownerassignedtome","name","filter","value","assigned",3,"ngModel","ngModelChange"],["for","timelineownerassignedtome",1,"slds-radio__label"],[1,"slds-form-element__label","slds-truncate"],["label","LBL_ASSIGNEDTOME"],["type","radio","id","timelineownercreatedbyme","name","filter","value","created",3,"ngModel","ngModelChange"],["for","timelineownercreatedbyme",1,"slds-radio__label"],["label","LBL_CREATEDBYME"],[1,"slds-popover__footer"],[1,"slds-col--bump-left","slds-button","slds-button_neutral",3,"click"],["label","LBL_CANCEL"],[1,"slds-button","slds-button--brand",3,"click"],["label","LBL_APPLY"],["type","checkbox",3,"id","checked"],[1,"slds-checkbox__label"],["label","LBL_AUDIT_LOG"]],template:function(e,t){1&e&&(m.j41(0,"div",0)(1,"system-utility-icon",1),m.bIt("click",(function(e){return t.toggleOpen(e)})),m.k0s(),m.j41(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5),m.nrm(6,"system-label",6),m.k0s(),m.j41(7,"div",7)(8,"div",8),m.bIt("click",(function(e){return t.setFilter(e,"Modules")})),m.j41(9,"span",9),m.nrm(10,"input",10),m.j41(11,"label",11),m.nrm(12,"span",12),m.j41(13,"span",13),m.nrm(14,"system-label",14),m.k0s()()()()(),m.DNE(15,Tr,8,4,"div",15),m.nrm(16,"div",16),m.DNE(17,Br,8,3,"div",17),m.k0s(),m.j41(18,"div",18)(19,"div",5),m.nrm(20,"system-label",19),m.k0s(),m.j41(21,"fieldset",20)(22,"div",21)(23,"span",22)(24,"input",23),m.mxI("ngModelChange",(function(e){return m.DH7(t.ownerfilter,e)||(t.ownerfilter=e),e})),m.k0s(),m.j41(25,"label",24),m.nrm(26,"span",25),m.j41(27,"span",13),m.nrm(28,"system-label",14),m.k0s()()(),m.j41(29,"span",22)(30,"input",26),m.mxI("ngModelChange",(function(e){return m.DH7(t.ownerfilter,e)||(t.ownerfilter=e),e})),m.k0s(),m.j41(31,"label",27),m.nrm(32,"span",25),m.j41(33,"span",28),m.nrm(34,"system-label",29),m.k0s()()(),m.j41(35,"span",22)(36,"input",30),m.mxI("ngModelChange",(function(e){return m.DH7(t.ownerfilter,e)||(t.ownerfilter=e),e})),m.k0s(),m.j41(37,"label",31),m.nrm(38,"span",25),m.j41(39,"span",28),m.nrm(40,"system-label",32),m.k0s()()()()()()(),m.j41(41,"footer",33)(42,"div",3)(43,"button",34),m.bIt("click",(function(){return t.closeDialog(!1)})),m.nrm(44,"system-label",35),m.k0s(),m.j41(45,"button",36),m.bIt("click",(function(){return t.closeDialog(!0)})),m.nrm(46,"system-label",37),m.k0s()()()()()),2&e&&(m.Y8G("ngClass",m.eq3(9,$r,t.isOpen)),m.R7$(),m.Y8G("colorclass",t.filterColorClass)("title",t.language.getLabel("LBL_FILTER")),m.R7$(9),m.Y8G("checked",t.getChecked("Modules")),m.R7$(5),m.Y8G("ngForOf",t.moduleTypes),m.R7$(2),m.Y8G("ngIf",t.timeline.auditLogEnabled),m.R7$(7),m.R50("ngModel",t.ownerfilter),m.R7$(6),m.R50("ngModel",t.ownerfilter),m.R7$(6),m.R50("ngModel",t.ownerfilter))},dependencies:[i.YU,i.Sq,i.bT,l.me,l.Fm,l.BC,l.vS,S.W,E.B],encapsulation:2})}return ObjectTimelineFilter})();var Xr=s(58461),Ur=s(26024),Yr=s(95096);function Nr(e,t){if(1&e&&(m.j41(0,"div",7)(1,"span"),m.EFF(2),m.k0s()()),2&e){const e=m.XpG();m.R7$(2),m.JRh(e.recordDate)}}function Vr(e,t){1&e&&m.nrm(0,"div",8)}const Ar=e=>({"slds-grid--align-spread":e}),Pr=e=>({"slds-m-left--small":e}),zr=(e,t)=>({"slds-text-heading--medium":e,"slds-text-heading--small":t}),Hr=()=>({displayLabels:!1}),qr=(e,t)=>({"slds-text-heading--small":e,"slds-text-heading--x-small":t});function Jr(e,t){if(1&e&&(m.j41(0,"div",9)(1,"div",10)(2,"div",11),m.nrm(3,"system-icon",12),m.k0s()(),m.j41(4,"div",13)(5,"div",14)(6,"div",15),m.nrm(7,"object-record-fieldset-horizontal-list",16),m.k0s(),m.j41(8,"article",17),m.nrm(9,"object-record-fieldset-horizontal-list",16),m.k0s()(),m.nrm(10,"object-action-menu",18),m.k0s()()),2&e){const e=m.XpG();m.Y8G("ngClass",m.eq3(11,Ar,e.side)),m.R7$(3),m.Y8G("module",e.model.module),m.R7$(2),m.Y8G("ngClass",m.eq3(13,Pr,!e.side)),m.R7$(),m.Y8G("ngClass",m.l_i(15,zr,!e.timeline.smartFontSize,e.timeline.smartFontSize))("system-view-provider",m.lJ4(18,Hr)),m.R7$(),m.Y8G("fieldset",e.headerFieldSet),m.R7$(),m.Y8G("ngClass",m.l_i(19,qr,!e.timeline.smartFontSize,e.timeline.smartFontSize))("system-view-provider",m.lJ4(22,Hr)),m.R7$(),m.Y8G("fieldset",e.subHeaderFieldSet),m.R7$(),m.Y8G("buttonsize","small")("actionset",e.actionset)}}function Wr(e,t){1&e&&m.nrm(0,"div",19)}function Kr(e,t){if(1&e&&(m.j41(0,"div",7)(1,"span"),m.EFF(2),m.k0s()()),2&e){const e=m.XpG();m.R7$(2),m.JRh(e.recordDate)}}function Qr(e,t){if(1&e&&(m.j41(0,"div",20)(1,"div",21)(2,"div",10)(3,"div",11),m.nrm(4,"system-icon",12),m.k0s()(),m.j41(5,"div",13)(6,"div",14)(7,"div",15),m.nrm(8,"object-record-fieldset-horizontal-list",16),m.k0s(),m.j41(9,"article",17),m.nrm(10,"object-record-fieldset-horizontal-list",16),m.k0s()()()(),m.j41(11,"div",22),m.nrm(12,"object-action-menu",18),m.k0s()()),2&e){const e=m.XpG();m.R7$(4),m.Y8G("module",e.model.module),m.R7$(2),m.Y8G("ngClass",m.eq3(10,Pr,!e.side)),m.R7$(),m.Y8G("ngClass",m.l_i(12,zr,!e.timeline.smartFontSize,e.timeline.smartFontSize))("system-view-provider",m.lJ4(15,Hr)),m.R7$(),m.Y8G("fieldset",e.headerFieldSet),m.R7$(),m.Y8G("ngClass",m.l_i(16,qr,!e.timeline.smartFontSize,e.timeline.smartFontSize))("system-view-provider",m.lJ4(19,Hr)),m.R7$(),m.Y8G("fieldset",e.subHeaderFieldSet),m.R7$(2),m.Y8G("buttonsize","xx-small")("actionset",e.actionset)}}let Zr=(()=>{class ObjectTimelineItemModule{constructor(e,t,s,i,n,l,o,a){this.timeline=e,this.view=t,this.modelattachments=s,this.model=i,this.language=n,this.metadata=l,this.userpreferences=o,this.session=a,this.date="",this.headerDescription="Someone edited this"}get data(){return this.record.data}get actionset(){return this.componentconfig.actionset}get user_name(){let e=this.record.user_name;return e.charAt(0).toUpperCase()+e.substring(1)}get module(){return this.model.module}get recordDate(){const e=new moment.utc(this.record.date).tz(this.session.getSessionData("timezone")||moment.tz.guess(!0)),t=e.format("YYYYMMDD")==(new moment).format("YYYYMMDD"),s=e.format("YYYY")==(new moment).format("YYYY");return t?e.format(this.userpreferences.getTimeFormat()):s?e.format("MMM D"):e.format(this.userpreferences.getDateFormat())}ngOnInit(){this.model.module=this.record.module,this.model.id=this.record.id,this.model.setData(this.record.data),this.modelattachments.module=this.model.module,this.modelattachments.id=this.model.id,this.side?this.itemside={"slds-m-right--xx-small":!0,"slds-grid--align-end":!0}:this.itemside={"slds-m-left--xx-small":!0},this.componentconfig=this.metadata.getComponentConfig("ObjectTimelineItemModule","Accounts"),this.headerFieldSet=this.componentconfig.headerFieldSet,this.subHeaderFieldSet=this.componentconfig.subHeaderFieldSet}static#e=this.ɵfac=function(e){return new(e||ObjectTimelineItemModule)(m.rXU(br),m.rXU(Me.U),m.rXU(ps.S),m.rXU(g.g),m.rXU(h.B),m.rXU(b.yu),m.rXU(w.S),m.rXU(Nt.d))};static#t=this.ɵcmp=m.VBU({type:ObjectTimelineItemModule,selectors:[["object-timeline-item-module"]],inputs:{record:"record",side:"side"},features:[m.Jv_([g.g,ps.S,Me.U])],decls:9,vars:7,consts:[[1,"slds-grid",3,"ngClass"],["style","width: 70px","class","slds-align--absolute-center slds-m-horizontal--none",4,"ngIf"],["class","objecttimeline-item-nubbin-right slds-align--absolute-center",4,"ngIf"],[1,"objecttimeline-item","slds-m-vertical--medium","slds-height_full",3,"click"],["class","slds-popover__body slds-grid","style","height: 90px",3,"ngClass",4,"ngIf","ngIfElse"],["class","objecttimeline-item-nubbin-left slds-align--absolute-center",4,"ngIf"],["smallview",""],[1,"slds-align--absolute-center","slds-m-horizontal--none",2,"width","70px"],[1,"objecttimeline-item-nubbin-right","slds-align--absolute-center"],[1,"slds-popover__body","slds-grid",2,"height","90px",3,"ngClass"],[1,"slds-grid","slds-grid--vertical","slds-grid--vertical-align-center",2,"width","32px"],[1,"slds-m-horizontal--xx-small",2,"width","32px"],[3,"module"],[1,"slds-grid","slds-grid--align-spread","slds-size--7-of-8",2,"width","calc(100% - 32px)"],[1,"slds-m-horizontal--small","slds-media","slds-grid--vertical",3,"ngClass"],[1,"slds-media__body",2,"height","45%",3,"ngClass","system-view-provider"],[3,"fieldset"],[2,"height","55%",3,"ngClass","system-view-provider"],[3,"buttonsize","actionset"],[1,"objecttimeline-item-nubbin-left","slds-align--absolute-center"],[1,"slds-popover__body","slds-grid--vertical",2,"height","90px"],[1,"slds-grid"],[1,"slds-align--absolute-center"]],template:function(e,t){if(1&e&&(m.j41(0,"div",0),m.DNE(1,Nr,3,1,"div",1)(2,Vr,1,0,"div",2),m.j41(3,"section",3),m.bIt("click",(function(){return t.timeline.setRecord(t.record)})),m.DNE(4,Jr,11,23,"div",4),m.k0s(),m.DNE(5,Wr,1,0,"div",5)(6,Kr,3,1,"div",1),m.k0s(),m.DNE(7,Qr,13,20,"ng-template",null,6,m.C5r)),2&e){const e=m.sdS(8);m.Y8G("ngClass",t.itemside),m.R7$(),m.Y8G("ngIf",!t.side),m.R7$(),m.Y8G("ngIf",!t.side),m.R7$(2),m.Y8G("ngIf",!t.timeline.smartFontSize)("ngIfElse",e),m.R7$(),m.Y8G("ngIf",t.side),m.R7$(),m.Y8G("ngIf",t.side)}},dependencies:[i.YU,i.bT,I.J,fn.x,nt.P,yn.b],styles:["\n\n\n\n\n\n\n\n\n\n\n.objecttimeline-item[_ngcontent-%COMP%]{background-color:var(--color-white);border:1px solid var(--color-grey-5);border-radius:.25rem;box-shadow:0 2px 3px 0 rgb(0 0 16%);width:calc(100% - 86px)}","\n\n\n\n\n\n\n\n\n\n\n.objecttimeline-item-nubbin-right[_ngcontent-%COMP%]{background-color:var(--color-white);border-bottom:1px solid var(--color-grey-5);border-left:1px solid var(--color-grey-5);height:20px;margin-right:-10px;transform:rotate(45deg);width:20px}","\n\n\n\n\n\n\n\n\n\n\n.objecttimeline-item-nubbin-left[_ngcontent-%COMP%]{background-color:var(--color-white);border-bottom:1px solid var(--color-grey-5);border-left:1px solid var(--color-grey-5);height:20px;margin-left:-10px;transform:rotate(-135deg);width:20px}"]})}return ObjectTimelineItemModule})();function ed(e,t){if(1&e&&(m.j41(0,"div",11)(1,"span",12),m.EFF(2),m.k0s()()),2&e){const e=m.XpG(3);m.R7$(2),m.SpI(" ",e.record.divider," ")}}function td(e,t){if(1&e&&m.nrm(0,"object-timeline-item-module",13),2&e){const e=m.XpG(3);m.Y8G("record",e.record)("side",!1)}}function sd(e,t){if(1&e&&m.nrm(0,"object-timeline-item-audit",13),2&e){const e=m.XpG(3);m.Y8G("record",e.record)("side",!1)}}function id(e,t){if(1&e&&m.nrm(0,"object-timeline-item-created",13),2&e){const e=m.XpG(3);m.Y8G("record",e.record)("side",!1)}}function nd(e,t){if(1&e&&(m.j41(0,"div",3),m.nrm(1,"div",4),m.j41(2,"div",5),m.DNE(3,ed,3,1,"div",6),m.nrm(4,"div",7),m.k0s(),m.j41(5,"div",8),m.DNE(6,td,1,2,"object-timeline-item-module",9)(7,sd,1,2,"object-timeline-item-audit",9)(8,id,1,2,"object-timeline-item-created",10),m.k0s()()),2&e){const e=m.XpG(2);m.R7$(3),m.Y8G("ngIf",e.divider),m.R7$(2),m.Y8G("ngSwitch",e.record.record_Type),m.R7$(),m.Y8G("ngSwitchCase","module"),m.R7$(),m.Y8G("ngSwitchCase","audit")}}function ld(e,t){if(1&e&&m.nrm(0,"object-timeline-item-module",13),2&e){const e=m.XpG(3);m.Y8G("record",e.record)("side",!0)}}function od(e,t){if(1&e&&m.nrm(0,"object-timeline-item-audit",13),2&e){const e=m.XpG(3);m.Y8G("record",e.record)("side",!0)}}function ad(e,t){if(1&e&&m.nrm(0,"object-timeline-item-created",13),2&e){const e=m.XpG(3);m.Y8G("record",e.record)("side",!0)}}function rd(e,t){if(1&e&&(m.j41(0,"div",11)(1,"span",12),m.EFF(2),m.k0s()()),2&e){const e=m.XpG(3);m.R7$(2),m.SpI(" ",e.record.divider," ")}}function dd(e,t){if(1&e&&(m.j41(0,"div",3)(1,"div",8),m.DNE(2,ld,1,2,"object-timeline-item-module",9)(3,od,1,2,"object-timeline-item-audit",9)(4,ad,1,2,"object-timeline-item-created",10),m.k0s(),m.j41(5,"div",5),m.DNE(6,rd,3,1,"div",6),m.nrm(7,"div",14),m.k0s(),m.nrm(8,"div",4),m.k0s()),2&e){const e=m.XpG(2);m.R7$(),m.Y8G("ngSwitch",e.record.record_Type),m.R7$(),m.Y8G("ngSwitchCase","module"),m.R7$(),m.Y8G("ngSwitchCase","audit"),m.R7$(3),m.Y8G("ngIf",e.divider)}}function cd(e,t){if(1&e&&(m.j41(0,"div"),m.DNE(1,nd,9,4,"div",2)(2,dd,9,4,"div",2),m.k0s()),2&e){const e=m.XpG();m.R7$(),m.Y8G("ngIf",e.side),m.R7$(),m.Y8G("ngIf",!e.side)}}function ud(e,t){if(1&e&&(m.j41(0,"div",21)(1,"span",12),m.EFF(2),m.k0s()()),2&e){const e=m.XpG(2);m.R7$(2),m.SpI(" ",e.record.divider," ")}}function md(e,t){if(1&e&&m.nrm(0,"object-timeline-item-module",13),2&e){const e=m.XpG(2);m.Y8G("record",e.record)("side",!1)}}function hd(e,t){if(1&e&&m.nrm(0,"object-timeline-item-audit",13),2&e){const e=m.XpG(2);m.Y8G("record",e.record)("side",!1)}}function gd(e,t){if(1&e&&m.nrm(0,"object-timeline-item-created",13),2&e){const e=m.XpG(2);m.Y8G("record",e.record)("side",!1)}}function pd(e,t){if(1&e&&(m.j41(0,"div",15)(1,"div",16)(2,"div",17),m.nrm(3,"div",14),m.k0s(),m.DNE(4,ud,3,1,"div",18),m.k0s(),m.j41(5,"div",19)(6,"div",17),m.nrm(7,"div",14),m.k0s(),m.j41(8,"div",20),m.DNE(9,md,1,2,"object-timeline-item-module",9)(10,hd,1,2,"object-timeline-item-audit",9)(11,gd,1,2,"object-timeline-item-created",10),m.k0s()()()),2&e){const e=m.XpG();m.R7$(4),m.Y8G("ngIf",e.divider),m.R7$(4),m.Y8G("ngSwitch",e.record.record_Type),m.R7$(),m.Y8G("ngSwitchCase","module"),m.R7$(),m.Y8G("ngSwitchCase","audit")}}let fd=(()=>{class ObjectTimelineItemLine{constructor(e){this.timeline=e,this.buttons=!0}get side(){return this.index%2==0}get divider(){return this.record.hasOwnProperty("divider")}get record(){return this.Record}get recordType(){return this.Record.hasOwnProperty("audit_log")?"audit":this.Record.hasOwnProperty("module")?"moduleRecord":"moduleCreated"}static#e=this.ɵfac=function(e){return new(e||ObjectTimelineItemLine)(m.rXU(br))};static#t=this.ɵcmp=m.VBU({type:ObjectTimelineItemLine,selectors:[["object-timeline-item-line"]],inputs:{Record:"Record",index:"index",buttons:"buttons"},decls:3,vars:2,consts:[[4,"ngIf","ngIfElse"],["thinView",""],["class","slds-grid","style","height: 70px",4,"ngIf"],[1,"slds-grid",2,"height","70px"],[2,"width","calc(50% - 2px)"],[1,"slds-grid--vertical","slds-align--absolute-center",2,"width","4px","height","85px"],["style","width: 60px","class","slds-m-top--medium",4,"ngIf"],[1,"slds-color__background_gray-9","slds-height_full","slds-align--absolute-center",2,"width","2px","height","85px"],[2,"width","calc(50% - 2px)",3,"ngSwitch"],[3,"record","side",4,"ngSwitchCase"],[3,"record","side",4,"ngSwitchDefault"],[1,"slds-m-top--medium",2,"width","60px"],[1,"slds-color__text_gray-6","slds-align--absolute-center",2,"font-size","14px"],[3,"record","side"],[1,"slds-color__background_gray-9","slds-height_full","slds-align--absolute-center",2,"width","2px"],[1,"slds-grid--vertical"],[1,"slds-grid"],[1,"slds-grid--vertical",2,"width","4px"],["style","width: 60px","class","slds-m-left--xx-small",4,"ngIf"],[1,"slds-grid","slds-m-right--small"],[2,"width","calc(100% - 4px)",3,"ngSwitch"],[1,"slds-m-left--xx-small",2,"width","60px"]],template:function(e,t){if(1&e&&m.DNE(0,cd,3,2,"div",0)(1,pd,12,4,"ng-template",null,1,m.C5r),2&e){const e=m.sdS(2);m.Y8G("ngIf",!t.timeline.smartView)("ngIfElse",e)}},dependencies:[i.bT,i.ux,i.e1,i.fG,Zr,Gr,Mr],encapsulation:2})}return ObjectTimelineItemLine})();function bd(e,t){1&e&&(m.j41(0,"div")(1,"div",2),m.nrm(2,"div",3),m.j41(3,"div",4),m.nrm(4,"div",5),m.k0s(),m.j41(5,"div",3)(6,"div",6)(7,"div",7)(8,"span",8),m.nrm(9,"system-stencil"),m.k0s()(),m.j41(10,"section",9)(11,"div",10)(12,"div",11)(13,"div",12),m.nrm(14,"system-icon",13),m.k0s()(),m.j41(15,"div",14)(16,"div",15)(17,"div",16)(18,"header",17)(19,"h2",18),m.nrm(20,"system-stencil"),m.k0s()(),m.j41(21,"p",19),m.nrm(22,"system-stencil"),m.k0s()()(),m.nrm(23,"system-icon",20),m.k0s()()()()()(),m.j41(24,"div",21)(25,"div",3)(26,"div",22)(27,"section",23)(28,"div",24)(29,"div",11)(30,"div",12),m.nrm(31,"system-icon",13),m.k0s()(),m.j41(32,"div",14)(33,"div",15)(34,"div",16)(35,"header",17)(36,"h2",18),m.nrm(37,"system-stencil"),m.k0s()(),m.j41(38,"p",19),m.nrm(39,"system-stencil"),m.k0s()()(),m.nrm(40,"system-icon",20),m.k0s()()(),m.j41(41,"div",7)(42,"span",8),m.nrm(43,"system-stencil"),m.k0s()()()(),m.j41(44,"div",25),m.nrm(45,"div",5),m.k0s(),m.nrm(46,"div",3),m.k0s(),m.j41(47,"div",26),m.nrm(48,"div",3),m.j41(49,"div",4),m.nrm(50,"div",5),m.k0s(),m.j41(51,"div",3)(52,"div",6)(53,"div",7)(54,"span",8),m.nrm(55,"system-stencil"),m.k0s()(),m.j41(56,"section",9)(57,"div",10)(58,"div",11)(59,"div",12),m.nrm(60,"system-icon",13),m.k0s()(),m.j41(61,"div",14)(62,"div",15)(63,"div",16)(64,"header",17)(65,"h2",18),m.nrm(66,"system-stencil"),m.k0s()(),m.j41(67,"p",19),m.nrm(68,"system-stencil"),m.k0s()()(),m.nrm(69,"system-icon",27),m.k0s()()()()()(),m.j41(70,"div",28)(71,"div",3)(72,"div",22)(73,"section",23)(74,"div",24)(75,"div",11)(76,"div",12),m.nrm(77,"system-icon",13),m.k0s()(),m.j41(78,"div",14)(79,"div",15)(80,"div",16)(81,"header",17)(82,"h2",18),m.nrm(83,"system-stencil"),m.k0s()(),m.j41(84,"p",19),m.nrm(85,"system-stencil"),m.k0s()()(),m.nrm(86,"system-icon",20),m.k0s()()(),m.j41(87,"div",7)(88,"span",8),m.nrm(89,"system-stencil"),m.k0s()()()(),m.j41(90,"div",25),m.nrm(91,"div",5),m.k0s(),m.nrm(92,"div",3),m.k0s(),m.j41(93,"div",29),m.nrm(94,"div",3),m.j41(95,"div",4),m.nrm(96,"div",5),m.k0s(),m.j41(97,"div",3)(98,"div",6)(99,"div",7)(100,"span",8),m.nrm(101,"system-stencil"),m.k0s()(),m.j41(102,"section",9)(103,"div",30)(104,"div",11)(105,"div",12),m.nrm(106,"system-icon",13),m.k0s()(),m.j41(107,"div",14)(108,"div",15)(109,"div",16)(110,"header",17)(111,"h2",18),m.nrm(112,"system-stencil"),m.k0s()(),m.j41(113,"p",19),m.nrm(114,"system-stencil"),m.k0s()()(),m.j41(115,"button",31),m.nrm(116,"system-button-icon",13),m.k0s()()()()()()()()),2&e&&(m.R7$(23),m.Y8G("icon","down"),m.R7$(17),m.Y8G("icon","down"),m.R7$(46),m.Y8G("icon","down"))}function yd(e,t){1&e&&(m.j41(0,"div",2)(1,"div",4),m.nrm(2,"div",5),m.k0s(),m.j41(3,"div",32)(4,"div",6)(5,"div",7)(6,"span",8),m.nrm(7,"system-stencil"),m.k0s()(),m.j41(8,"section",9)(9,"div",10)(10,"div",11)(11,"div",12),m.nrm(12,"system-icon",13),m.k0s()(),m.j41(13,"div",14)(14,"div",15)(15,"div",16)(16,"header",17)(17,"h2",18),m.nrm(18,"system-stencil"),m.k0s()(),m.j41(19,"p",19),m.nrm(20,"system-stencil"),m.k0s()()(),m.nrm(21,"system-icon",20),m.k0s()()()()()(),m.j41(22,"div",2)(23,"div",4),m.nrm(24,"div",5),m.k0s(),m.j41(25,"div",32)(26,"div",6)(27,"div",7)(28,"span",8),m.nrm(29,"system-stencil"),m.k0s()(),m.j41(30,"section",9)(31,"div",10)(32,"div",11)(33,"div",12),m.nrm(34,"system-icon",13),m.k0s()(),m.j41(35,"div",14)(36,"div",15)(37,"div",16)(38,"header",17)(39,"h2",18),m.nrm(40,"system-stencil"),m.k0s()(),m.j41(41,"p",19),m.nrm(42,"system-stencil"),m.k0s()()(),m.nrm(43,"system-icon",20),m.k0s()()()()()(),m.j41(44,"div",2)(45,"div",4),m.nrm(46,"div",5),m.k0s(),m.j41(47,"div",32)(48,"div",6)(49,"div",7)(50,"span",8),m.nrm(51,"system-stencil"),m.k0s()(),m.j41(52,"section",9)(53,"div",10)(54,"div",11)(55,"div",12),m.nrm(56,"system-icon",13),m.k0s()(),m.j41(57,"div",14)(58,"div",15)(59,"div",16)(60,"header",17)(61,"h2",18),m.nrm(62,"system-stencil"),m.k0s()(),m.j41(63,"p",19),m.nrm(64,"system-stencil"),m.k0s()()(),m.nrm(65,"system-icon",20),m.k0s()()()()()(),m.j41(66,"div",2)(67,"div",4),m.nrm(68,"div",5),m.k0s(),m.j41(69,"div",32)(70,"div",6)(71,"div",7)(72,"span",8),m.nrm(73,"system-stencil"),m.k0s()(),m.j41(74,"section",9)(75,"div",10)(76,"div",11)(77,"div",12),m.nrm(78,"system-icon",13),m.k0s()(),m.j41(79,"div",14)(80,"div",15)(81,"div",16)(82,"header",17)(83,"h2",18),m.nrm(84,"system-stencil"),m.k0s()(),m.j41(85,"p",19),m.nrm(86,"system-stencil"),m.k0s()()(),m.nrm(87,"system-icon",20),m.k0s()()()()()(),m.j41(88,"div",2)(89,"div",4),m.nrm(90,"div",5),m.k0s(),m.j41(91,"div",32)(92,"div",6)(93,"div",7)(94,"span",8),m.nrm(95,"system-stencil"),m.k0s()(),m.j41(96,"section",9)(97,"div",10)(98,"div",11)(99,"div",12),m.nrm(100,"system-icon",13),m.k0s()(),m.j41(101,"div",14)(102,"div",15)(103,"div",16)(104,"header",17)(105,"h2",18),m.nrm(106,"system-stencil"),m.k0s()(),m.j41(107,"p",19),m.nrm(108,"system-stencil"),m.k0s()()(),m.nrm(109,"system-icon",20),m.k0s()()()()()()),2&e&&(m.R7$(21),m.Y8G("icon","down"),m.R7$(22),m.Y8G("icon","down"),m.R7$(22),m.Y8G("icon","down"),m.R7$(22),m.Y8G("icon","down"),m.R7$(22),m.Y8G("icon","down"))}let vd=(()=>{class ObjectTimelineStencil{constructor(e){this.timeline=e}static#e=this.ɵfac=function(e){return new(e||ObjectTimelineStencil)(m.rXU(br))};static#t=this.ɵcmp=m.VBU({type:ObjectTimelineStencil,selectors:[["object-timeline-stencil"]],decls:3,vars:2,consts:[[4,"ngIf","ngIfElse"],["smallview",""],[1,"slds-grid","slds-m-right--small",2,"height","125px"],[2,"width","calc(50% - 2px)"],[1,"slds-height_full","slds-size--2-of-12",2,"width","4px"],[1,"slds-color__background_gray-9","slds-height_full","slds-align--absolute-center",2,"width","2px"],[1,"slds-grid","slds-grid"],[1,"slds-align--absolute-center","slds-m-horizontal--none",2,"width","70px"],[2,"width","30px","overflow","hidden"],[1,"slds-m-vertical--medium","slds-popover","slds-height_full","slds-nubbin--left",2,"width","calc(100% - 70px)"],[1,"slds-popover__body","slds-grid",2,"height","90px"],[1,"slds-grid","slds-grid--vertical","slds-grid--vertical-align-center",2,"width","32px"],[1,"slds-m-horizontal--xx-small",2,"width","32px"],["icon","generic_loading"],[1,"slds-grid","slds-grid--align-spread","slds-size--7-of-8",2,"width","calc(100% - 32px)"],[1,"slds-m-horizontal--small","slds-media","slds-left--small","slds-size--1-of-1"],[1,"slds-media__body","slds-size--1-of-1"],[1,"slds-p-left--none","slds-popover__header","slds-p-top--none","slds-size--3-of-5",2,"border","0"],[1,"slds-text-heading_medium"],[1,"slds-size--2-of-5"],[3,"icon"],[1,"slds-grid","slds-m-right--small",2,"height","125px","opacity","0.8"],[1,"slds-grid","slds-grid","slds-grid--align-end"],[1,"slds-m-vertical--medium","slds-popover","slds-height_full","slds-nubbin--right",2,"width","calc(100% - 70px)"],[1,"slds-popover__body","slds-grid","slds-grid--align-spread",2,"height","90px"],[1,"slds-height_full",2,"width","4px"],[1,"slds-grid","slds-m-right--small",2,"height","125px","opacity","0.6"],["icon","down"],[1,"slds-grid","slds-m-right--small",2,"height","125px","opacity","0.4"],[1,"slds-grid","slds-m-right--small",2,"height","125px","opacity","0.2"],[1,"slds-popover__body","slds-grid","slds-size--1-of-1",2,"height","90px"],[1,"slds-button","slds-button--icon-border-filled","slds-button--icon-x-small"],[2,"width","calc(100% - 2px)"]],template:function(e,t){if(1&e&&m.DNE(0,bd,117,3,"div",0)(1,yd,110,5,"ng-template",null,1,m.C5r),2&e){const e=m.sdS(2);m.Y8G("ngIf",!t.timeline.smartView)("ngIfElse",e)}},dependencies:[i.bT,R.t,I.J,_i.O],encapsulation:2})}return ObjectTimelineStencil})();const _d=["detailContainer"];let kd=(()=>{class ObjecttimelineFullScreenDetail{constructor(e,t,s,i,n,l){this.metadata=e,this.parent=t,this.model=s,this.language=i,this.timeline=n,this.activatedRoute=l,this.componentRefs=[]}ngOnChanges(){this.model.module=this.module,this.model.id=this.id,this.model.setData(this.data);for(let e of this.componentRefs)e.destroy();let e=this.metadata.getComponentConfig("ObjectTimelineFullScreen",this.module);if(e&&e.componentset)for(let t of e.componentset)for(let e of this.metadata.getComponentSetObjects(t))this.metadata.addComponent(e.component,this.detailContainer).subscribe((t=>{t.instance.componentconfig=e.componentconfig,this.componentRefs.push(t)}))}static#e=this.ɵfac=function(e){return new(e||ObjecttimelineFullScreenDetail)(m.rXU(b.yu),m.rXU(g.g),m.rXU(g.g),m.rXU(h.B),m.rXU(br),m.rXU(o.nX))};static#t=this.ɵcmp=m.VBU({type:ObjecttimelineFullScreenDetail,selectors:[["object-timeline-full-screen-detail"]],viewQuery:function(e,t){if(1&e&&m.GBs(_d,7,m.c1b),2&e){let e;m.mGM(e=m.lsd())&&(t.detailContainer=e.first)}},inputs:{module:"module",id:"id",data:"data"},features:[m.Jv_([g.g]),m.OA$],decls:14,vars:3,consts:[[1,"slds-border_bottom","slds-p-around--medium","slds-theme--shade"],[1,"slds-grid"],[1,"slds-col","slds-has-flexi-truncate"],[1,"slds-media","slds-no-space","slds-grow"],[3,"module"],[1,"slds-media__body"],[1,"slds-text-title--caps","slds-line-height--reset"],[1,"slds-page-header__title","slds-m-right--small","slds-align-middle","slds-truncate"],[1,"slds-p-around--xx-small"],["detailContainer",""]],template:function(e,t){1&e&&(m.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),m.nrm(4,"system-icon",4),m.j41(5,"div",5)(6,"p",6),m.nrm(7,"system-label-modulename",4),m.k0s(),m.j41(8,"div")(9,"h1",7),m.EFF(10),m.k0s()()()()()()(),m.j41(11,"div",8),m.nrm(12,"div",null,9),m.k0s()),2&e&&(m.R7$(4),m.Y8G("module",t.model.module),m.R7$(3),m.Y8G("module",t.model.module),m.R7$(3),m.SpI(" ",t.model.data.name,""))},dependencies:[I.J,pn.r],encapsulation:2})}return ObjecttimelineFullScreenDetail})();function Rd(e,t){if(1&e&&(m.j41(0,"tr")(1,"td",11)(2,"div",6),m.EFF(3),m.k0s()(),m.j41(4,"td",11)(5,"div",6),m.EFF(6),m.k0s()(),m.j41(7,"td",11)(8,"div",6),m.EFF(9),m.k0s()()()),2&e){const e=t.$implicit,s=m.XpG(2);m.R7$(3),m.SpI("",s.language.getFieldDisplayName(s.model.module,e.field_name)," "),m.R7$(3),m.JRh(e.before_value_string),m.R7$(3),m.JRh(e.after_value_string)}}function Id(e,t){if(1&e&&(m.j41(0,"table",1)(1,"thead")(2,"tr")(3,"td",2)(4,"div",3),m.EFF(5),m.k0s()()(),m.j41(6,"tr",4)(7,"th",5)(8,"div",6),m.nrm(9,"system-label",7),m.k0s()(),m.j41(10,"th",5)(11,"div",6),m.nrm(12,"system-label",8),m.k0s()(),m.j41(13,"th",5)(14,"div",6),m.nrm(15,"system-label",9),m.k0s()()()(),m.j41(16,"tbody"),m.DNE(17,Rd,10,3,"tr",10),m.k0s()()),2&e){const e=m.XpG();m.R7$(5),m.Lme(" ",e.auditLog.user_name," / ",e.auditLog.date," "),m.R7$(12),m.Y8G("ngForOf",e.auditLog.data)}}let xd=(()=>{class ObjectTimelineAuditDetail{constructor(e,t,s){this.language=e,this.metadata=t,this.model=s,this.loading=!0}ngOnChanges(){this.loading=!1}static#e=this.ɵfac=function(e){return new(e||ObjectTimelineAuditDetail)(m.rXU(h.B),m.rXU(b.yu),m.rXU(g.g,8))};static#t=this.ɵcmp=m.VBU({type:ObjectTimelineAuditDetail,selectors:[["object-timeline-audit-detail"]],inputs:{auditLog:"auditLog"},features:[m.OA$],decls:2,vars:1,consts:[["class","slds-table slds-table--bordered slds-table--cell-buffer",4,"ngIf"],[1,"slds-table","slds-table--bordered","slds-table--cell-buffer"],["colspan","3",1,"slds-theme--shade"],[1,"slds-text-heading--label"],[1,"slds-text-title--caps"],["scope","col"],[1,"slds-truncate"],["label","LBL_FIELD"],["label","LBL_BEFOREVALUE"],["label","LBL_AFTERVALUE"],[4,"ngFor","ngForOf"],["scope","row"]],template:function(e,t){1&e&&(m.j41(0,"div"),m.DNE(1,Id,18,3,"table",0),m.k0s()),2&e&&(m.R7$(),m.Y8G("ngIf",!t.loading))},dependencies:[i.Sq,i.bT,S.W],encapsulation:2})}return ObjectTimelineAuditDetail})();const jd=["listContainer"];function Gd(e,t){if(1&e){const e=m.RV6();m.j41(0,"system-input-delayed",27),m.mxI("ngModelChange",(function(t){m.eBV(e);const s=m.XpG();return m.DH7(s.ftsSearchTerm,t)||(s.ftsSearchTerm=t),m.Njj(t)})),m.k0s()}if(2&e){const e=m.XpG();m.Y8G("placeholder",e.language.getLabel("LBL_SEARCH")),m.R50("ngModel",e.ftsSearchTerm)}}function Cd(e,t){if(1&e&&(m.j41(0,"li"),m.nrm(1,"object-timeline-item-line",32),m.k0s()),2&e){const e=t.$implicit,s=t.index;m.R7$(),m.Y8G("Record",e)("index",s)}}function wd(e,t){1&e&&(m.j41(0,"li",33),m.nrm(1,"system-spinner"),m.k0s())}function Sd(e,t){if(1&e&&(m.j41(0,"ul"),m.DNE(1,Cd,2,2,"li",30)(2,wd,2,0,"li",31),m.k0s()),2&e){const e=m.XpG(2);m.R7$(),m.Y8G("ngForOf",e.timeline.records)("ngForTrackBy",e.trackByFunction),m.R7$(),m.Y8G("ngIf",e.timeline.loadingMore)}}function Ed(e,t){if(1&e&&(m.j41(0,"div",28),m.DNE(1,Sd,3,3,"ul",29),m.k0s()),2&e){const e=m.XpG(),t=m.sdS(42);m.R7$(),m.Y8G("ngIf",0!==e.timeline.records.length)("ngIfElse",t)}}function Ld(e,t){if(1&e&&m.nrm(0,"object-timeline-full-screen-detail",36),2&e){const e=m.XpG(2);m.Y8G("module",e.timeline.recordModule)("id",e.timeline.recordId)("data",e.timeline.recordData)}}function Dd(e,t){if(1&e&&(m.j41(0,"div",34),m.DNE(1,Ld,1,3,"object-timeline-full-screen-detail",35),m.k0s()),2&e){const e=m.XpG(),t=m.sdS(38);m.R7$(),m.Y8G("ngIf","Audit"!==e.timeline.recordModule)("ngIfElse",t)}}function Fd(e,t){if(1&e&&m.nrm(0,"object-timeline-audit-detail",37),2&e){const e=m.XpG();m.Y8G("auditLog",e.timeline.recordData)}}function Md(e,t){1&e&&m.nrm(0,"object-timeline-stencil")}function Td(e,t){1&e&&(m.j41(0,"div",38),m.nrm(1,"system-illustration-no-records",39),m.k0s())}const Bd=(e,t)=>({"slds-p-horizontal--small":e,"slds-p-left--small":t});let $d=(()=>{class ObjectTimelineFullScreen{constructor(e,t,s,i,n){this.timeline=e,this.parent=t,this.navigationTab=s,this.language=i,this.layout=n}get parentName(){return this.parent.getField("name")}get displayDetailsPanel(){return"small"!=this.layout.screenwidth}get ftsSearchTerm(){return this.timeline.filters.searchterm}set ftsSearchTerm(e){this.timeline.filters.searchterm=e,this.timeline.reload()}get date(){return this.timeline.timeRangeStart}set date(e){this.timeline.timeRangeStart=e,this.timeline.reload()}trackByFunction(e,t){return t.id}ngOnInit(){this.onResize(),this.dateInput=this.timeline.startDate,this.initialize(this.navigationTab.activeRoute.params),this.timeline.getTimelineData()}ngAfterViewInit(){this.onResize()}goModule(){this.parent.goModule()}goModel(){this.parent.goDetail()}initialize(e){this.parent.module=e.module,this.parent.id=e.id,this.timeline.parent=this.parent,this.parent.getData(!0,"",!0).subscribe((e=>{this.timeline.parent.setData(e),this.navigationTab.setTabInfo({displayname:this.parent.getField("summary_text")+" • timeline"})}))}onScroll(e){let t=this.listContainer.element.nativeElement;t.scrollTop+t.clientHeight+50>t.scrollHeight&&this.timeline.canLoadMore()&&this.timeline.loadMore()}reload(){this.timeline.reload(),this.timeline.clearRecord()}onResize(){this.timeline.smartView=this.listContainer.element.nativeElement.clientWidth<742,this.timeline.smartFontSize=this.listContainer.element.nativeElement.clientWidth<413}static#e=this.ɵfac=function(e){return new(e||ObjectTimelineFullScreen)(m.rXU(br),m.rXU(g.g),m.rXU(Ie._),m.rXU(h.B),m.rXU(k.Z))};static#t=this.ɵcmp=m.VBU({type:ObjectTimelineFullScreen,selectors:[["object-timeline-full-screen"]],viewQuery:function(e,t){if(1&e&&m.GBs(jd,7,m.c1b),2&e){let e;m.mGM(e=m.lsd())&&(t.listContainer=e.first)}},hostBindings:function(e,t){1&e&&m.bIt("resize",(function(e){return t.onResize(e)}),!1,m.tSv)},features:[m.Jv_([br,g.g])],decls:43,vars:13,consts:[[1,"slds-page-header","slds-grid","slds-grid--align-spread"],[1,"slds-col"],["role","navigation","aria-label","Breadcrumbs"],[1,"slds-breadcrumb","slds-list_horizontal","slds-wrap"],[1,"slds-breadcrumb__item","slds-text-title_caps"],["href","javascript:void(0);",3,"click"],[3,"module"],[1,"slds-p-horizontal--x-small"],["label","LBL_TIMELINE"],[1,"slds-p-vertical--xx-small","slds-text-heading--x-small"],[1,"slds-p-horizontal--xx-small"],[1,"slds-page-header__col-actions","slds-grid"],["delay","1000",3,"placeholder","ngModel","ngModelChange",4,"ngIf"],[1,"slds-page-header__controls"],[1,"slds-page-header__control"],[3,"disabled","ngModel","ngModelChange"],[1,"slds-align--absolute-center","slds-button","slds-button--icon","slds-button--icon-border-filled"],[1,"slds-button","slds-button--icon","slds-button--icon-border-filled"],["icon","refresh",3,"click"],[1,"slds-grid"],["system-to-bottom","",1,"slds-size--1-of-1","slds-medium-size--5-of-12","slds-border--right","slds-scrollable",3,"ngClass","scroll"],["listContainer",""],["class","slds-height_full",4,"ngIf","ngIfElse"],["class","slds-size--7-of-12","system-to-bottom","",4,"ngIf"],["auditpanel",""],["currentlyloading",""],["nocontent",""],["delay","1000",3,"placeholder","ngModel","ngModelChange"],[1,"slds-height_full"],[4,"ngIf","ngIfElse"],[4,"ngFor","ngForOf","ngForTrackBy"],["class","slds-p-top--large",4,"ngIf"],[3,"Record","index"],[1,"slds-p-top--large"],["system-to-bottom","",1,"slds-size--7-of-12"],[3,"module","id","data",4,"ngIf","ngIfElse"],[3,"module","id","data"],[3,"auditLog"],[1,"slds-p-top_large"],[1,"slds-m-top_large"]],template:function(e,t){if(1&e&&(m.j41(0,"div",0)(1,"div",1)(2,"nav",2)(3,"ol",3)(4,"li",4)(5,"a",5),m.bIt("click",(function(){return t.goModule()})),m.nrm(6,"system-label-modulename",6),m.k0s()(),m.j41(7,"li",4)(8,"a",5),m.bIt("click",(function(){return t.goModel()})),m.EFF(9),m.k0s()(),m.j41(10,"li",4)(11,"span",7),m.nrm(12,"system-label",8),m.k0s()()()(),m.j41(13,"div",9)(14,"span"),m.EFF(15),m.k0s(),m.j41(16,"span",10),m.EFF(17,"records found "),m.k0s()()(),m.j41(18,"div",11),m.DNE(19,Gd,1,2,"system-input-delayed",12),m.j41(20,"div",13),m.nrm(21,"div",14),m.k0s(),m.j41(22,"div",13)(23,"div",14)(24,"system-input-date",15),m.mxI("ngModelChange",(function(e){return m.DH7(t.date,e)||(t.date=e),e})),m.k0s()()(),m.j41(25,"div",13)(26,"div",14),m.nrm(27,"object-timeline-filter",16),m.k0s()(),m.j41(28,"div",13)(29,"div",14)(30,"button",17)(31,"system-button-icon",18),m.bIt("click",(function(){return t.reload()})),m.k0s()()()()()(),m.j41(32,"div",19)(33,"div",20,21),m.bIt("scroll",(function(e){return t.onScroll(e)})),m.DNE(35,Ed,2,2,"div",22),m.k0s(),m.DNE(36,Dd,2,2,"div",23),m.k0s(),m.DNE(37,Fd,1,1,"ng-template",null,24,m.C5r)(39,Md,1,0,"ng-template",null,25,m.C5r)(41,Td,2,0,"ng-template",null,26,m.C5r)),2&e){const e=m.sdS(40);m.R7$(6),m.Y8G("module",t.parent.module),m.R7$(3),m.JRh(t.parent.data.summary_text),m.R7$(6),m.JRh(t.timeline.totalRecords),m.R7$(4),m.Y8G("ngIf",!t.timeline.onlyAudits),m.R7$(5),m.Y8G("disabled",t.timeline.loading),m.R50("ngModel",t.date),m.R7$(9),m.Y8G("ngClass",m.l_i(10,Bd,!t.timeline.smartView,t.timeline.smartView)),m.R7$(2),m.Y8G("ngIf",!t.timeline.loading)("ngIfElse",e),m.R7$(),m.Y8G("ngIf",t.displayDetailsPanel&&!!t.timeline.recordModule)}},dependencies:[i.YU,i.Sq,i.bT,l.BC,l.vS,R.t,Xr.b,Ur.M,Yr._,S.W,pn.r,Dt.P,B.b,fd,vd,Or,kd,xd],encapsulation:2})}return ObjectTimelineFullScreen})();const Od=["timelinecontent"];function Xd(e,t){if(1&e&&(m.j41(0,"li"),m.nrm(1,"object-timeline-item-line",19),m.k0s()),2&e){const e=t.$implicit,s=t.index;m.R7$(),m.Y8G("Record",e)("index",s)}}function Ud(e,t){1&e&&(m.j41(0,"li",20),m.nrm(1,"system-spinner"),m.k0s())}function Yd(e,t){if(1&e&&(m.j41(0,"ul"),m.DNE(1,Xd,2,2,"li",17)(2,Ud,2,0,"li",18),m.k0s()),2&e){const e=m.XpG(2);m.R7$(),m.Y8G("ngForOf",e.timeline.records)("ngForTrackBy",e.trackByFunction),m.R7$(),m.Y8G("ngIf",e.timeline.loadingMore)}}function Nd(e,t){if(1&e&&(m.j41(0,"div",15),m.DNE(1,Yd,3,3,"ul",16),m.k0s()),2&e){const e=m.XpG(),t=m.sdS(18);m.R7$(),m.Y8G("ngIf",0!==e.timeline.records.length)("ngIfElse",t)}}function Vd(e,t){if(1&e){const e=m.RV6();m.j41(0,"button",21),m.bIt("click",(function(){m.eBV(e);const t=m.XpG();return m.Njj(t.timeline.loadMore())})),m.j41(1,"span"),m.nrm(2,"system-label",22),m.k0s()()}}function Ad(e,t){1&e&&(m.j41(0,"div",23),m.nrm(1,"system-illustration-no-records"),m.k0s())}function Pd(e,t){1&e&&m.nrm(0,"object-timeline-stencil")}const zd=(e,t)=>({"slds-p-horizontal--small":e,"slds-p-left--small":t});let Hd=(()=>{class ObjectTimeline{constructor(e,t,s,i,n){this.element=e,this.timeline=t,this.language=s,this.model=i,this.el=n}ngOnInit(){this.timeline.parent=this.model,this.timeline.getTimelineData()}ngAfterViewInit(){this.onResize()}reload(){this.timeline.reload()}trackByFunction(e,t){return t.id}get ftsSearchTerm(){return this.timeline.filters.searchterm}set ftsSearchTerm(e){this.timeline.filters.searchterm=e,this.timeline.reload()}closeDialog(){this.timeline.reload()}get date(){return this.timeline.timeRangeStart}set date(e){this.timeline.timeRangeStart=e,this.timeline.reload()}onResize(){this.timeline.smartView=this.el.nativeElement.getBoundingClientRect().width<730,this.timeline.smartFontSize=this.el.nativeElement.getBoundingClientRect().width<380}static#e=this.ɵfac=function(e){return new(e||ObjectTimeline)(m.rXU(m.aKT),m.rXU(br),m.rXU(h.B),m.rXU(g.g),m.rXU(m.aKT))};static#t=this.ɵcmp=m.VBU({type:ObjectTimeline,selectors:[["object-timeline"]],viewQuery:function(e,t){if(1&e&&m.GBs(Od,5),2&e){let e;m.mGM(e=m.lsd())&&(t.content=e.first)}},hostBindings:function(e,t){1&e&&m.bIt("resize",(function(e){return t.onResize(e)}),!1,m.tSv)},features:[m.Jv_([Me.U,br])],decls:21,vars:13,consts:[[1,"slds-grid","slds-grid--vertical-align-center","slds-grid--align-end"],["timelineheader",""],[3,"disabled","ngModel","ngModelChange"],["delay","1000",1,"slds-p-horizontal--xx-small",3,"placeholder","ngModel","ngModelChange"],[1,"slds-button","slds-button--icon",3,"title","click"],["icon","refresh",1,"slds-p-horizontal--xxx-small","slds-icon-text-default"],[1,"slds-is-relative","spiceActivitiyTimelineHeader"],[1,"slds-p-vertical--xx-small","slds-text-heading--x-small"],[1,"slds-p-horizontal--xx-small"],[1,"slds-size--1-of-1","slds-border--right",3,"ngClass"],["class","slds-height_full",4,"ngIf","ngIfElse"],[1,"slds-align--absolute-center","slds-m-top--x-large","slds-m-right--small"],["class","slds-button slds-button--neutral","type","button",3,"click",4,"ngIf"],["norecords",""],["loading",""],[1,"slds-height_full"],[4,"ngIf","ngIfElse"],[4,"ngFor","ngForOf","ngForTrackBy"],["class","slds-m-top--xx-large slds-p-top--medium",4,"ngIf"],[3,"Record","index"],[1,"slds-m-top--xx-large","slds-p-top--medium"],["type","button",1,"slds-button","slds-button--neutral",3,"click"],["label","LBL_MORE"],[1,"slds-p-top--large"]],template:function(e,t){if(1&e&&(m.j41(0,"div",0,1)(2,"system-input-date",2),m.mxI("ngModelChange",(function(e){return m.DH7(t.date,e)||(t.date=e),e})),m.k0s(),m.j41(3,"system-input-delayed",3),m.mxI("ngModelChange",(function(e){return m.DH7(t.ftsSearchTerm,e)||(t.ftsSearchTerm=e),e})),m.k0s(),m.j41(4,"button",4),m.bIt("click",(function(){return t.reload()})),m.nrm(5,"system-button-icon",5),m.k0s(),m.nrm(6,"object-timeline-filter"),m.k0s(),m.j41(7,"div",6)(8,"div",7)(9,"span"),m.EFF(10),m.k0s(),m.j41(11,"span",8),m.EFF(12,"records found "),m.k0s()()(),m.j41(13,"div",9),m.DNE(14,Nd,2,2,"div",10),m.k0s(),m.j41(15,"div",11),m.DNE(16,Vd,3,0,"button",12),m.k0s(),m.DNE(17,Ad,2,0,"ng-template",null,13,m.C5r)(19,Pd,1,0,"ng-template",null,14,m.C5r)),2&e){const e=m.sdS(20);m.R7$(2),m.Y8G("disabled",t.timeline.loading),m.R50("ngModel",t.date),m.R7$(),m.Y8G("placeholder",t.language.getLabel("LBL_SEARCH")),m.R50("ngModel",t.ftsSearchTerm),m.R7$(),m.Y8G("title",t.language.getLabel("LBL_RELOAD")),m.R7$(6),m.JRh(t.timeline.totalRecords),m.R7$(3),m.Y8G("ngClass",m.l_i(10,zd,!t.timeline.smartView,t.timeline.smartView)),m.R7$(),m.Y8G("ngIf",!t.timeline.loading)("ngIfElse",e),m.R7$(2),m.Y8G("ngIf",t.timeline.canLoadMore()&&!t.timeline.loadingMore)}},dependencies:[i.YU,i.Sq,i.bT,l.BC,l.vS,R.t,Xr.b,Ur.M,Yr._,S.W,Dt.P,fd,vd,Or],encapsulation:2})}return ObjectTimeline})();function qd(e,t){1&e&&m.nrm(0,"system-spinner",8)}function Jd(e,t){if(1&e&&(m.j41(0,"tr")(1,"td",19)(2,"div",14),m.EFF(3),m.k0s()(),m.j41(4,"td",19)(5,"div",14),m.EFF(6),m.k0s()(),m.j41(7,"td",19)(8,"div",14),m.EFF(9),m.k0s()()()),2&e){const e=t.$implicit,s=m.XpG(2);m.R7$(3),m.SpI("",s.language.getFieldDisplayName(s.model.module,e.field_name)," "),m.R7$(3),m.JRh(e.before_value_string),m.R7$(3),m.JRh(e.after_value_string)}}function Wd(e,t){if(1&e&&(m.j41(0,"table",9)(1,"thead")(2,"tr")(3,"td",10)(4,"div",11),m.EFF(5),m.k0s()()(),m.j41(6,"tr",12)(7,"th",13)(8,"div",14),m.nrm(9,"system-label",15),m.k0s()(),m.j41(10,"th",13)(11,"div",14),m.nrm(12,"system-label",16),m.k0s()(),m.j41(13,"th",13)(14,"div",14),m.nrm(15,"system-label",17),m.k0s()()()(),m.j41(16,"tbody"),m.DNE(17,Jd,10,3,"tr",18),m.k0s()()),2&e){const e=m.XpG();m.R7$(5),m.Lme(" ",e.auditLog.user_name," / ",e.auditLog.date," "),m.R7$(12),m.Y8G("ngForOf",e.auditLog.data)}}let Kd=(()=>{class ObjectTimelineAuditlogModal{constructor(e,t,s){this.language=e,this.metadata=t,this.model=s,this.self=null,this.loading=!0,this.moduleFields=[]}ngOnInit(){for(let e in this.metadata.getModuleFields(this.model.module))this.moduleFields.push({name:e,display:this.language.getFieldDisplayName(this.model.module,e)});this.moduleFields.sort(((e,t)=>e.display.toLowerCase()>t.display.toLowerCase()?1:-1)),this.loading=!1}hideAuditLog(){this.self.destroy()}static#e=this.ɵfac=function(e){return new(e||ObjectTimelineAuditlogModal)(m.rXU(h.B),m.rXU(b.yu),m.rXU(g.g,8))};static#t=this.ɵcmp=m.VBU({type:ObjectTimelineAuditlogModal,selectors:[["object-timeline-auditlog-modal"]],decls:9,vars:2,consts:[["size","large"],[3,"close"],["label","LBL_LOGGED_CHANGES"],["margin","none"],["class","slds-p-around--medium",4,"ngIf"],["class","slds-table slds-table--bordered slds-table--cell-buffer",4,"ngIf"],[1,"slds-button","slds-button--brand",3,"click"],["label","LBL_CLOSE"],[1,"slds-p-around--medium"],[1,"slds-table","slds-table--bordered","slds-table--cell-buffer"],["colspan","3",1,"slds-theme--shade"],[1,"slds-text-heading--label"],[1,"slds-text-title--caps"],["scope","col"],[1,"slds-truncate"],["label","LBL_FIELD"],["label","LBL_BEFOREVALUE"],["label","LBL_AFTERVALUE"],[4,"ngFor","ngForOf"],["scope","row"]],template:function(e,t){1&e&&(m.j41(0,"system-modal",0)(1,"system-modal-header",1),m.bIt("close",(function(){return t.hideAuditLog()})),m.nrm(2,"system-label",2),m.k0s(),m.j41(3,"system-modal-content",3),m.DNE(4,qd,1,0,"system-spinner",4)(5,Wd,18,3,"table",5),m.k0s(),m.j41(6,"system-modal-footer")(7,"button",6),m.bIt("click",(function(){return t.hideAuditLog()})),m.nrm(8,"system-label",7),m.k0s()()()),2&e&&(m.R7$(4),m.Y8G("ngIf",t.loading),m.R7$(),m.Y8G("ngIf",!t.loading))},dependencies:[i.Sq,i.bT,S.W,Be.D,$e.I,Oe.Q,Xe.C,Dt.P],encapsulation:2})}return ObjectTimelineAuditlogModal})();const Qd=["object-popover-body-item",""];function Zd(e,t){1&e&&m.nrm(0,"system-spinner")}function ec(e,t){if(1&e&&(m.j41(0,"div",10)(1,"dl")(2,"dt"),m.nrm(3,"field-label",11),m.k0s(),m.j41(4,"dd"),m.nrm(5,"field-container",12),m.k0s()()()),2&e){const e=t.$implicit;m.R7$(3),m.Y8G("fieldname",e.field)("fieldconfig",e.fieldconfig),m.R7$(2),m.Y8G("field",e.field)("fieldconfig",e.fieldconfig)("fielddisplayclass","slds-truncate")}}function tc(e,t){if(1&e&&(m.j41(0,"div",8),m.DNE(1,ec,6,5,"div",9),m.k0s()),2&e){const e=m.XpG();m.R7$(),m.Y8G("ngForOf",e.fields)}}let sc=(()=>{class ObjectPopoverBodyItem{constructor(e,t,s){this.language=e,this.model=t,this.metadata=s,this.module="",this.id="",this.modelIsLoading=!0,this.fields=[]}ngOnInit(){this.model.module=this.module,this.model.id=this.id,this.modelIsLoading=!0,this.model.getData(!0).subscribe((e=>{this.modelIsLoading=!1}));let e=this.metadata.getComponentConfig("ObjectPopoverBodyItem",this.model.module);e.fieldset&&(this.fields=this.metadata.getFieldSetFields(e.fieldset))}static#e=this.ɵfac=function(e){return new(e||ObjectPopoverBodyItem)(m.rXU(h.B),m.rXU(g.g),m.rXU(b.yu))};static#t=this.ɵcmp=m.VBU({type:ObjectPopoverBodyItem,selectors:[["","object-popover-body-item",""]],hostAttrs:[1,"slds-popover__body-list"],inputs:{module:"module",id:"id"},features:[m.Jv_([g.g,Me.U])],attrs:Qd,decls:9,vars:4,consts:[[1,"slds-media","slds-m-bottom--small","slds-media--center"],[1,"slds-media__figure"],[3,"module"],[1,"slds-media__body"],[4,"ngIf"],[1,"slds-text-heading--medium","slds-truncate"],["href","javascript:void(0);",3,"click"],["class","slds-grid slds-wrap slds-grid--pull-padded",4,"ngIf"],[1,"slds-grid","slds-wrap","slds-grid--pull-padded"],["class","slds-p-horizontal--small slds-size--1-of-2 slds-p-bottom--x-small",4,"ngFor","ngForOf"],[1,"slds-p-horizontal--small","slds-size--1-of-2","slds-p-bottom--x-small"],[3,"fieldname","fieldconfig"],[3,"field","fieldconfig","fielddisplayclass"]],template:function(e,t){1&e&&(m.j41(0,"div",0)(1,"div",1),m.nrm(2,"system-icon",2),m.k0s(),m.j41(3,"div",3),m.DNE(4,Zd,1,0,"system-spinner",4),m.j41(5,"p",5)(6,"a",6),m.bIt("click",(function(){return t.model.goDetail()})),m.EFF(7),m.k0s()()()(),m.DNE(8,tc,2,1,"div",7)),2&e&&(m.R7$(2),m.Y8G("module",t.model.module),m.R7$(2),m.Y8G("ngIf",t.modelIsLoading),m.R7$(3),m.JRh(t.model.data.summary_text),m.R7$(),m.Y8G("ngIf",!t.modelIsLoading))},dependencies:[i.Sq,i.bT,Ui.b,Te.y,I.J,Dt.P],encapsulation:2})}return ObjectPopoverBodyItem})();const ic=["object-popover-header",""];function nc(e,t){if(1&e&&(m.j41(0,"div",8)(1,"dl")(2,"dt"),m.nrm(3,"field-label",9),m.k0s(),m.j41(4,"dd"),m.nrm(5,"field-container",10),m.k0s()()()),2&e){const e=t.$implicit;m.R7$(3),m.Y8G("fieldname",e.field)("fieldconfig",e.fieldconfig),m.R7$(2),m.Y8G("field",e.field)("fieldconfig",e.fieldconfig)("fielddisplayclass","slds-truncate")}}let lc=(()=>{class ObjectPopoverHeader{constructor(e,t,s){this.language=e,this.model=t,this.metadata=s,this.fields=[]}ngOnInit(){let e=this.metadata.getComponentConfig("ObjectPopoverHeader",this.model.module);e.fieldset&&(this.fields=this.metadata.getFieldSetFields(e.fieldset))}static#e=this.ɵfac=function(e){return new(e||ObjectPopoverHeader)(m.rXU(h.B),m.rXU(g.g),m.rXU(b.yu))};static#t=this.ɵcmp=m.VBU({type:ObjectPopoverHeader,selectors:[["","object-popover-header",""]],hostAttrs:[1,"slds-popover__header"],features:[m.Jv_([Me.U])],attrs:ic,decls:9,vars:3,consts:[[1,"slds-media","slds-m-bottom--small","slds-media--center"],[1,"slds-media__figure"],[3,"module"],[1,"slds-media__body"],[1,"slds-text-heading--medium","slds-hyphenate"],["href","javascript:void(0);",3,"click"],[1,"slds-grid","slds-wrap","slds-grid--pull-padded"],["class","slds-p-horizontal--small slds-size--1-of-2 slds-p-bottom--x-small",4,"ngFor","ngForOf"],[1,"slds-p-horizontal--small","slds-size--1-of-2","slds-p-bottom--x-small"],[3,"fieldname","fieldconfig"],[3,"field","fieldconfig","fielddisplayclass"]],template:function(e,t){1&e&&(m.j41(0,"div",0)(1,"div",1),m.nrm(2,"system-icon",2),m.k0s(),m.j41(3,"div",3)(4,"p",4)(5,"a",5),m.bIt("click",(function(){return t.model.goDetail()})),m.EFF(6),m.k0s()()()(),m.j41(7,"div",6),m.DNE(8,nc,6,5,"div",7),m.k0s()),2&e&&(m.R7$(2),m.Y8G("module",t.model.module),m.R7$(4),m.JRh(t.model.data.summary_text),m.R7$(2),m.Y8G("ngForOf",t.fields))},dependencies:[i.Sq,Ui.b,Te.y,I.J],encapsulation:2})}return ObjectPopoverHeader})();const oc=e=>({module:e,id:null,data:null});function ac(e,t){if(1&e&&(m.j41(0,"th",15),m.nrm(1,"field-label",16),m.k0s()),2&e){const e=t.$implicit,s=m.XpG(2);m.Y8G("system-model-provider",m.eq3(3,oc,s.module)),m.R7$(),m.Y8G("fieldname",e.field)("fieldconfig",e.fieldconfig)}}function rc(e,t){1&e&&(m.j41(0,"th"),m.nrm(1,"field-label",17),m.k0s())}function dc(e,t){if(1&e&&(m.j41(0,"thead")(1,"tr"),m.DNE(2,ac,2,5,"th",14)(3,rc,2,0,"th",8),m.k0s()()),2&e){const e=m.XpG();m.R7$(2),m.Y8G("ngForOf",e.listFields),m.R7$(),m.Y8G("ngIf",0==e.listFields.length)}}function cc(e,t){if(1&e){const e=m.RV6();m.j41(0,"td",22)(1,"system-checkbox",23),m.mxI("ngModelChange",(function(t){m.eBV(e);const s=m.XpG().$implicit;return m.DH7(s.selected,t)||(s.selected=t),m.Njj(t)})),m.k0s()()}if(2&e){const e=m.XpG().$implicit;m.R7$(),m.R50("ngModel",e.selected)}}function uc(e,t){if(1&e&&(m.j41(0,"td",24),m.nrm(1,"field-container",25),m.k0s()),2&e){const e=t.$implicit;m.R7$(),m.Y8G("field",e.field)("fieldconfig",e.fieldconfig)}}function mc(e,t){1&e&&(m.j41(0,"td",24),m.nrm(1,"field-container",26),m.k0s())}const hc=(e,t,s)=>({module:e,id:t,data:s});function gc(e,t){if(1&e){const e=m.RV6();m.j41(0,"tr",18),m.bIt("click",(function(){const t=m.eBV(e).$implicit,s=m.XpG();return m.Njj(s.onRowClick(t))})),m.DNE(1,cc,2,1,"td",19)(2,uc,2,2,"td",20)(3,mc,2,0,"td",21),m.k0s()}if(2&e){const e=t.$implicit,s=m.XpG();m.xc7("cursor",s.multiselect?"initial":"pointer"),m.Y8G("system-model-provider",m.sMw(6,hc,s.module,e.id,e)),m.R7$(),m.Y8G("ngIf",s.multiselect),m.R7$(),m.Y8G("ngForOf",s.listFields),m.R7$(),m.Y8G("ngIf",0==s.listFields.length)}}const pc=(e,t,s)=>({"slds-no-row-hover":e,singleselect:t,"slds-table--header-fixed":s});let fc=(()=>{class ObjectSelectBeanListModal{constructor(e,t,s,i){this.layout=e,this.model=t,this.view=s,this.metadata=i,this.multiselect=!1,this.listFields=[],this.selectedIds$=new ti.B,this.selectedIds=[]}get smallView(){return"small"==this.layout.screenwidth}ngOnInit(){this.view.displayLabels=!1;const e=this.metadata.getComponentConfig("ObjectSelectBeanListModal",this.model.module);e&&(this.listFields=this.metadata.getFieldSetItems(e))}close(){this.selectedIds$.next(void 0),this.selectedIds$.complete(),this.self.destroy()}onRowClick(e){this.multiselect||(this.selectedIds=[e.id],this.confirmSelection())}confirmSelection(){this.selectedIds$.next(this.selectedIds),this.selectedIds$.complete(),this.self.destroy()}static#e=this.ɵfac=function(e){return new(e||ObjectSelectBeanListModal)(m.rXU(k.Z),m.rXU(g.g),m.rXU(Me.U),m.rXU(b.yu))};static#t=this.ɵcmp=m.VBU({type:ObjectSelectBeanListModal,selectors:[["object-select-bean-list-modal"]],features:[m.Jv_([Me.U])],decls:16,vars:9,consts:[["size","large"],[3,"close"],["label","LBL_MAKE_SELECTION"],["margin","none",3,"grow"],[1,"slds-height_full"],[1,"slds-is-relative"],[1,"slds-scrollable--y","slds-height_full"],["role","listbox",1,"slds-table","slds-table--fixed-layout","slds-table--bordered","slds-max-medium-table--stacked-horizontal",3,"ngClass"],[4,"ngIf"],["class","slds-hint-parent slds-p-horizontal--x-small",3,"system-model-provider","cursor","click",4,"ngFor","ngForOf"],[1,"slds-button","slds-button--neutral",3,"click"],["label","LBL_CANCEL"],[1,"slds-button","slds-button--brand",3,"disabled","click"],["label","LBL_SELECT"],["scope","col","class","slds-resizable",3,"system-model-provider",4,"ngFor","ngForOf"],["scope","col",1,"slds-resizable",3,"system-model-provider"],["addclasses","slds-truncate slds-p-vertical--xx-small slds-p-horizontal--x-small",3,"fieldname","fieldconfig"],["fieldname","name","addclasses","slds-truncate slds-p-vertical--xx-small slds-p-horizontal--x-small"],[1,"slds-hint-parent","slds-p-horizontal--x-small",3,"system-model-provider","click"],["role","gridcell","class","slds-show--medium",4,"ngIf"],["style","min-width: 2rem",4,"ngFor","ngForOf"],["style","min-width: 2rem",4,"ngIf"],["role","gridcell",1,"slds-show--medium"],[3,"ngModel","ngModelChange"],[2,"min-width","2rem"],["fielddisplayclass","slds-truncate slds-p-horizontal--x-small",3,"field","fieldconfig"],["field","name","fielddisplayclass","slds-truncate slds-p-horizontal--x-small"]],template:function(e,t){1&e&&(m.j41(0,"system-modal",0)(1,"system-modal-header",1),m.bIt("close",(function(){return t.close()})),m.nrm(2,"system-label",2),m.k0s(),m.j41(3,"system-modal-content",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"table",7),m.DNE(8,dc,4,2,"thead",8),m.j41(9,"tbody"),m.DNE(10,gc,4,10,"tr",9),m.k0s()()()()()(),m.j41(11,"system-modal-footer")(12,"button",10),m.bIt("click",(function(){return t.close()})),m.nrm(13,"system-label",11),m.k0s(),m.j41(14,"button",12),m.bIt("click",(function(){return t.confirmSelection()})),m.nrm(15,"system-label",13),m.k0s()()()),2&e&&(m.R7$(3),m.Y8G("grow",!0),m.R7$(4),m.Y8G("ngClass",m.sMw(5,pc,t.multiselect,!t.multiselect,!t.smallView)),m.R7$(),m.Y8G("ngIf",!t.smallView),m.R7$(2),m.Y8G("ngForOf",t.listData),m.R7$(4),m.Y8G("disabled",0==t.selectedIds.length))},dependencies:[i.YU,i.Sq,i.bT,l.BC,l.vS,Ui.b,Te.y,vi.f,S.W,Be.D,$e.I,Oe.Q,Xe.C,li.v],encapsulation:2})}return ObjectSelectBeanListModal})(),bc=(()=>{class ObjectActionHelpTextButton{constructor(e,t,s,i){this.modal=e,this.injector=t,this.language=s,this.toast=i,this.actionconfig=""}execute(){this.actionconfig.helpLabel?this.modal.openModal("ObjectHelpTextModal",!0,this.injector).subscribe((e=>{""!=this.actionconfig&&(e.instance.helpLabel=this.actionconfig.helpLabel)})):this.toast.sendToast("LBL_HELP_LABEL_MISSING","error")}static#e=this.ɵfac=function(e){return new(e||ObjectActionHelpTextButton)(m.rXU(P.y),m.rXU(m.zZn),m.rXU(h.B),m.rXU(pe.o))};static#t=this.ɵcmp=m.VBU({type:ObjectActionHelpTextButton,selectors:[["object-action-help-button"]],decls:2,vars:2,consts:[["size","small",3,"icon","title"]],template:function(e,t){1&e&&(m.j41(0,"span"),m.nrm(1,"system-utility-icon",0),m.k0s()),2&e&&(m.R7$(),m.Y8G("icon","in_app_assistant")("title",t.language.getLabel("LBL_HELP_BUTTON")))},dependencies:[E.B],encapsulation:2})}return ObjectActionHelpTextButton})(),yc=(()=>{class ObjectHelpTextModal{constructor(e,t){this.language=e,this.model=t,this.translation="",this.helpLabel=""}ngOnInit(){this.initialize()}initialize(){this.translation=this.language.getLabel(this.helpLabel,this.model.module,"long")}close(){this.self.destroy()}static#e=this.ɵfac=function(e){return new(e||ObjectHelpTextModal)(m.rXU(h.B),m.rXU(g.g))};static#t=this.ɵcmp=m.VBU({type:ObjectHelpTextModal,selectors:[["object-help-text-modal"]],decls:9,vars:2,consts:[["size","medium"],[3,"close"],["label","LBL_HELPTEXT"],["length","long",3,"label"],[1,"slds-button","slds-button--neutral",3,"click"],["label","LBL_CANCEL"]],template:function(e,t){1&e&&(m.j41(0,"system-modal",0)(1,"system-modal-header",1),m.bIt("close",(function(){return t.close()})),m.EFF(2),m.nrm(3,"system-label",2),m.k0s(),m.j41(4,"system-modal-content"),m.nrm(5,"system-label",3),m.k0s(),m.j41(6,"system-modal-footer")(7,"button",4),m.bIt("click",(function(){return t.close()})),m.nrm(8,"system-label",5),m.k0s()()()),2&e&&(m.R7$(2),m.SpI("",t.model.module," "),m.R7$(3),m.FS9("label",t.translation))},dependencies:[S.W,Be.D,$e.I,Oe.Q,Xe.C],encapsulation:2})}return ObjectHelpTextModal})();function vc(e,t){1&e&&(m.qex(0),m.j41(1,"system-illustration-no-records"),m.nrm(2,"system-label",10),m.k0s(),m.bVm())}function _c(e,t){if(1&e&&m.nrm(0,"object-record-fieldset",11),2&e){const e=m.XpG();m.Y8G("fieldset",e.componentConfig.fieldset)}}function kc(e,t){if(1&e&&m.nrm(0,"system-componentset",12),2&e){const e=m.XpG();m.Y8G("componentset",e.componentConfig.componentset)}}let Rc=(()=>{class ObjectStatusNetworkModal{constructor(e,t,s,i,n,l){this.model=e,this.metadata=t,this.view=s,this.toast=i,this.language=n,this.modal=l,this.statusFieldDomain="",this.statusTo="",this.response=new ti.B}ngOnInit(){this.view.isEditable=!0,this.view.setEditMode(),this.model.startEdit(),this.getConfig(),this.componentConfig&&this.changeStatusVal()}getConfig(){this.componentConfig||(this.componentConfig=this.metadata.getComponentConfig("ObjectStatusNetworkModal",this.model.module))}changeStatusVal(){const e=this.statusFieldDomain.split("_dom")[0];this.model.setField(e,this.statusTo)}save(){if(!this.model.validate())return;let e=this.modal.await(this.language.getLabel("LBL_SAVING"));this.model.save(!0).subscribe((t=>{e.next(!0),e.complete(),this.close()}))}close(){this.model.cancelEdit(),this.response.next(this.model.data),this.self.destroy()}static#e=this.ɵfac=function(e){return new(e||ObjectStatusNetworkModal)(m.rXU(g.g),m.rXU(b.yu),m.rXU(Me.U),m.rXU(pe.o),m.rXU(h.B),m.rXU(P.y))};static#t=this.ɵcmp=m.VBU({type:ObjectStatusNetworkModal,selectors:[["object-status-network-modal"]],features:[m.Jv_([g.g,Me.U])],decls:15,vars:4,consts:[["size","medium"],[3,"close"],[4,"ngIf"],["direction","vertical",3,"fieldset",4,"ngIf"],[3,"componentset",4,"ngIf"],[1,"slds-is-absolute"],[1,"slds-col--bump-left","slds-button","slds-button--neutral",3,"click"],["label","LBL_CANCEL"],[1,"slds-col--bump-left","slds-button","slds-button--brand",3,"click"],["label","LBL_SAVE"],["label","MSG_NO_RECORDS_FOUND"],["direction","vertical",3,"fieldset"],[3,"componentset"]],template:function(e,t){1&e&&(m.j41(0,"system-modal",0)(1,"system-modal-header",1),m.bIt("close",(function(){return t.close()})),m.EFF(2),m.k0s(),m.j41(3,"system-modal-content"),m.DNE(4,vc,3,0,"ng-container",2)(5,_c,1,1,"object-record-fieldset",3)(6,kc,1,1,"system-componentset",4),m.k0s(),m.j41(7,"system-modal-footer")(8,"div",5),m.nrm(9,"object-record-messages-badge"),m.k0s(),m.j41(10,"div")(11,"button",6),m.bIt("click",(function(){return t.close()})),m.nrm(12,"system-label",7),m.k0s(),m.j41(13,"button",8),m.bIt("click",(function(){return t.save()})),m.nrm(14,"system-label",9),m.k0s()()()()),2&e&&(m.R7$(2),m.JRh(t.model.module),m.R7$(2),m.Y8G("ngIf",!(null!=t.componentConfig&&t.componentConfig.fieldset||null!=t.componentConfig&&t.componentConfig.componentset)),m.R7$(),m.Y8G("ngIf",null==t.componentConfig?null:t.componentConfig.fieldset),m.R7$(),m.Y8G("ngIf",null==t.componentConfig?null:t.componentConfig.componentset))},dependencies:[i.bT,dn.F,Xr.b,S.W,Be.D,$e.I,Oe.Q,Xe.C,Zs.D,mi.o],encapsulation:2})}return ObjectStatusNetworkModal})(),Ic=(()=>{class ObjectStatusNetworkOpenModalButton extends ro.F{constructor(e,t,s,i,n,l,o){super(n,e,i,t,l,s),this.metadata=e,this.model=t,this.injector=s,this.modal=i,this.language=n,this.toast=l,this.view=o}execute(){this.modal.openModal("ObjectStatusNetworkModal",!0,this.injector).subscribe((e=>{e.instance.componentConfig=JSON.parse(this.item.componentconfig),e.instance.statusFieldDomain=this.item.domain,e.instance.statusTo=this.item.status_to,e.instance.model.id=this.model.id,e.instance.model.module=this.model.module,e.instance.model.initialize(),e.instance.model.setFields(this.model.data,!0),e.instance.response.subscribe({next:e=>{e&&this.model.setData(e)}})}))}static#e=this.ɵfac=function(e){return new(e||ObjectStatusNetworkOpenModalButton)(m.rXU(b.yu),m.rXU(g.g),m.rXU(m.zZn),m.rXU(P.y),m.rXU(h.B),m.rXU(pe.o),m.rXU(Me.U))};static#t=this.ɵcmp=m.VBU({type:ObjectStatusNetworkOpenModalButton,selectors:[["object-status-network-open-modal-button"]],features:[m.Vt3],decls:2,vars:1,consts:[[3,"label"]],template:function(e,t){1&e&&(m.j41(0,"span"),m.nrm(1,"system-label",0),m.k0s()),2&e&&(m.R7$(),m.Y8G("label",t.item.action_label))},dependencies:[S.W],encapsulation:2})}return ObjectStatusNetworkOpenModalButton})();var xc=s(58379),jc=s(82293),Gc=s(2061);let Cc=(()=>{class ObjectUrlActionMenu{constructor(e,t,s,i,n,l,o){this.broadcast=e,this.modelurls=t,this.language=s,this.elementRef=i,this.modal=n,this.injector=l,this.model=o}getDropdownLocationClass(){let e=this.elementRef.nativeElement.getBoundingClientRect();if(window.innerHeight-e.bottom<100)return"slds-dropdown--bottom"}deleteFile(){this.modal.confirm(this.language.getLabel("QST_DELETE_FILE"),this.language.getLabel("QST_DELETE_FILE",null,"short")).subscribe((e=>{e&&this.modelurls.deleteUrl(this.url.id)}))}edit(){this.modal.openModal("SpiceUrlsEditModal",!0,this.injector).subscribe((e=>{e.instance.url=this.url,e.instance.inputData={url:this.url.url,description:this.url.description,url_name:this.url.url_name}}))}static#e=this.ɵfac=function(e){return new(e||ObjectUrlActionMenu)(m.rXU(ke.m),m.rXU(jc.c),m.rXU(h.B),m.rXU(m.aKT),m.rXU(P.y),m.rXU(m.zZn),m.rXU(g.g))};static#t=this.ɵcmp=m.VBU({type:ObjectUrlActionMenu,selectors:[["object-url-action-menu"]],inputs:{url:"url"},decls:13,vars:2,consts:[["system-dropdown-trigger","",1,"slds-dropdown-trigger","slds-dropdown-trigger--click"],["aria-haspopup","true",1,"slds-button","slds-button--icon-border-filled","slds-button--icon-x-small"],[3,"icon"],[1,"slds-dropdown","slds-dropdown--right",3,"ngClass"],["role","menu",1,"slds-dropdown__list"],["role","presentation",1,"slds-dropdown__item",3,"click"],["href","javascript:void(0);","role","menuitem","tabindex","0"],[1,"slds-truncate"],["label","LBL_EDIT"],["href","javascript:void(0);","role","menuitem","tabindex","-1"],["label","LBL_DELETE"]],template:function(e,t){1&e&&(m.j41(0,"div",0)(1,"button",1),m.nrm(2,"system-button-icon",2),m.k0s(),m.j41(3,"div",3)(4,"ul",4)(5,"li",5),m.bIt("click",(function(){return t.edit()})),m.j41(6,"a",6)(7,"span",7),m.nrm(8,"system-label",8),m.k0s()()(),m.j41(9,"li",5),m.bIt("click",(function(){return t.deleteFile()})),m.j41(10,"a",9)(11,"span",7),m.nrm(12,"system-label",10),m.k0s()()()()()()),2&e&&(m.R7$(2),m.Y8G("icon","down"),m.R7$(),m.Y8G("ngClass",t.getDropdownLocationClass()))},dependencies:[i.YU,R.t,S.W,vs.q],encapsulation:2})}return ObjectUrlActionMenu})();const wc=["object-related-card-url",""];function Sc(e,t){if(1&e&&(m.j41(0,"a",11),m.EFF(1),m.k0s()),2&e){const e=m.XpG();m.R7$(),m.SpI(" ",e.url.url_name,"")}}function Ec(e,t){if(1&e&&(m.j41(0,"a",11),m.EFF(1),m.k0s()),2&e){const e=m.XpG();m.R7$(),m.JRh(e.url.url)}}function Lc(e,t){if(1&e&&(m.j41(0,"div",12),m.nrm(1,"object-url-action-menu",13),m.k0s()),2&e){const e=m.XpG();m.R7$(),m.Y8G("url",e.url)}}function Dc(e,t){if(1&e&&(m.j41(0,"div",18),m.EFF(1),m.k0s()),2&e){const e=m.XpG(2);m.Y8G("system-title",e.url.url),m.R7$(),m.JRh(e.url.url)}}function Fc(e,t){if(1&e&&(m.j41(0,"div",14)(1,"ul",15)(2,"li",16),m.EFF(3),m.k0s()(),m.DNE(4,Dc,2,2,"div",17),m.k0s()),2&e){const e=m.XpG();m.R7$(2),m.Y8G("system-title",e.urlDate),m.R7$(),m.JRh(e.urlDate),m.R7$(),m.Y8G("ngIf",!!e.url.url_name)}}function Mc(e,t){if(1&e&&(m.j41(0,"div",4)(1,"div",19)(2,"span",20)(3,"span",21),m.EFF(4,"Progress: 25%"),m.k0s()()(),m.j41(5,"div",22),m.EFF(6),m.k0s()()),2&e){const e=m.XpG();m.R7$(2),m.Y8G("ngStyle",e.progressbarstyle),m.R7$(4),m.SpI(" ",e.url.uploadprogress," % ")}}let Tc=(()=>{class ObjectRelatedCardUrl{constructor(e,t,s){this.modelurls=e,this.userpreferences=t,this.toast=s,this.url={}}get urlDate(){return this.url.date?this.url.date.format(this.userpreferences.getDateFormat()):""}get uploading(){return this.url.hasOwnProperty("uploadprogress")}get progressbarstyle(){return{width:this.url.uploadprogress+"%"}}openUrl(){this.uploading?this.toast.sendToast("LBL_UPLOAD_IN_PROGRESS","info"):this.url&&window.open(this.url.url,"_blank").focus()}static#e=this.ɵfac=function(e){return new(e||ObjectRelatedCardUrl)(m.rXU(jc.c),m.rXU(w.S),m.rXU(pe.o))};static#t=this.ɵcmp=m.VBU({type:ObjectRelatedCardUrl,selectors:[["","object-related-card-url",""]],inputs:{url:"url"},attrs:wc,decls:12,vars:6,consts:[[1,"slds-media","slds-truncate",2,"width","300px"],[1,"slds-m-right--x-small","slds-align--absolute-center",2,"width","30px","height","30px"],["size","'small'"],[1,"slds-media__body",2,"width","260px"],[1,"slds-grid","slds-grid_vertical-align-center","slds-grid--align-spread","slds-has-flexi-truncate"],[1,"slds-truncate","slds-text-heading--x-small","slds-p-right--xxx-small",3,"system-title","click"],["href","javascript:void(0);",4,"ngIf","ngIfElse"],["urlNameContainer",""],["class","slds-shrink-none",4,"ngIf"],["class","slds-tile__detail slds-text-body--small",4,"ngIf"],["class","slds-grid slds-grid_vertical-align-center slds-grid--align-spread slds-has-flexi-truncate",4,"ngIf"],["href","javascript:void(0);"],[1,"slds-shrink-none"],[3,"url"],[1,"slds-tile__detail","slds-text-body--small"],[1,"slds-list--vertical"],[1,"slds-item",3,"system-title"],["class","slds-text-color--inverse-weak slds-truncate",3,"system-title",4,"ngIf"],[1,"slds-text-color--inverse-weak","slds-truncate",3,"system-title"],[1,"slds-progress-bar"],[1,"slds-progress-bar__value",3,"ngStyle"],[1,"slds-assistive-text"],[1,"slds-text-align--right",2,"width","50px"]],template:function(e,t){if(1&e&&(m.j41(0,"div",0)(1,"div",1),m.nrm(2,"system-file-icon",2),m.k0s(),m.j41(3,"div",3)(4,"div",4)(5,"h3",5),m.bIt("click",(function(){return t.openUrl()})),m.DNE(6,Sc,2,1,"a",6)(7,Ec,2,1,"ng-template",null,7,m.C5r),m.k0s(),m.DNE(9,Lc,2,1,"div",8),m.k0s(),m.DNE(10,Fc,5,3,"div",9)(11,Mc,7,2,"div",10),m.k0s()()),2&e){const e=m.sdS(8);m.R7$(5),m.Y8G("system-title",t.url.description),m.R7$(),m.Y8G("ngIf",!!t.url.url_name)("ngIfElse",e),m.R7$(3),m.Y8G("ngIf",!t.uploading),m.R7$(),m.Y8G("ngIf",!t.uploading),m.R7$(),m.Y8G("ngIf",t.uploading)}},dependencies:[i.bT,i.B3,ys.z,j.L,Cc],encapsulation:2})}return ObjectRelatedCardUrl})();const Bc=["urlupload"];function $c(e,t){if(1&e&&(m.j41(0,"a",9)(1,"span",10),m.nrm(2,"system-label",11),m.EFF(3),m.k0s()()),2&e){const e=m.XpG();m.R7$(2),m.Y8G("label",e.componentconfig.label?e.componentconfig.label+"":"LBL_URLS"),m.R7$(),m.SpI(" (",e.modelurls.urls.length,")")}}function Oc(e,t){if(1&e&&(m.j41(0,"span",10),m.nrm(1,"system-label",11),m.EFF(2),m.k0s()),2&e){const e=m.XpG();m.R7$(),m.Y8G("label",e.componentconfig.label?e.componentconfig.label+"":"LBL_URLS"),m.R7$(),m.SpI(" ",e.modelurls.urls.length,")")}}function Xc(e,t){if(1&e){const e=m.RV6();m.j41(0,"system-utility-icon",12),m.bIt("click",(function(t){m.eBV(e);const s=m.XpG();return m.Njj(s.toggleOpen(t))})),m.k0s()}if(2&e){const e=m.XpG();m.Y8G("@animateicon",e.isopen?"open":"closed")}}function Uc(e,t){if(1&e&&m.nrm(0,"div",17),2&e){const e=t.$implicit;m.Y8G("url",e)}}function Yc(e,t){1&e&&(m.j41(0,"div",18),m.nrm(1,"system-spinner"),m.k0s())}function Nc(e,t){if(1&e&&(m.j41(0,"div",13)(1,"div",14),m.DNE(2,Uc,1,1,"div",15),m.k0s(),m.DNE(3,Yc,2,0,"div",16),m.k0s()),2&e){const e=m.XpG();m.Y8G("@displaycard",void 0),m.R7$(2),m.Y8G("ngForOf",e.urls),m.R7$(),m.Y8G("ngIf",e.modelurls.loading)}}let Vc=(()=>{class ObjectRelatedListUrls{constructor(e,t,s,i,n,l,o,a){this.modelurls=e,this.language=t,this.model=s,this.renderer=i,this.toast=n,this.footer=l,this.broadcast=o,this.elementRef=a,this.urls=[],this.isopen=!0,this.componentconfig={},this.broadcastSubscription={},this.subscriptions=new A.yU,this.broadcastSubscription=this.broadcast.message$.subscribe((e=>{this.handleMessage(e)}))}get width(){return this.elementRef.nativeElement.getBoundingClientRect().width}ngAfterViewInit(){this.setModelData(),setTimeout((()=>this.loadUrls()),10),this.subscriptions.add(this.broadcast.message$.subscribe((e=>this.handleMessage(e))))}handleMessage(e){if("model.merge"==e.messagetype&&e.messagedata.module==this.model.module&&e.messagedata.id==this.model.id&&this.loadUrls(),"urls.loaded"===e.messagetype)e.messagedata.reload&&(this.urls=this.modelurls.urls)}loadUrls(){this.modelurls.getUrls().subscribe((e=>{this.urls=e}))}setModelData(){this.modelurls.module=this.model.module,this.modelurls.id=this.model.id}toggleOpen(e){e.stopPropagation(),this.isopen=!this.isopen}urlDrop(e){if(this.componentconfig.disableupload&&!0===this.componentconfig.disableupload)return this.toast.sendToast(this.language.getLabel("LBL_UPLOAD_IS_DISABLED"),"error"),!1;const t=e.getData("URL");t&&this.modelurls.prepareUrlForSave(t)}selectUrl(){let e=new MouseEvent("click",{bubbles:!0});this.urlupload.element.nativeElement.dispatchEvent(e)}ngOnDestroy(){this.broadcastSubscription.unsubscribe()}static#e=this.ɵfac=function(e){return new(e||ObjectRelatedListUrls)(m.rXU(jc.c),m.rXU(h.B),m.rXU(g.g),m.rXU(m.sFG),m.rXU(pe.o),m.rXU(fs.q),m.rXU(ke.m),m.rXU(m.aKT))};static#t=this.ɵcmp=m.VBU({type:ObjectRelatedListUrls,selectors:[["object-related-list-urls"]],viewQuery:function(e,t){if(1&e&&m.GBs(Bc,7,m.c1b),2&e){let e;m.mGM(e=m.lsd())&&(t.urlupload=e.first)}},inputs:{componentconfig:"componentconfig"},features:[m.Jv_([jc.c])],decls:10,vars:6,consts:[[1,"slds-card","slds-card_boundary","slds-m-bottom--medium",3,"system-drop-url"],[1,"slds-card__header","slds-grid"],[1,"slds-size--1-of-1","slds-grid","slds-grid--vertical-align-center"],[3,"icon","size"],[1,"slds-media__body","slds-truncate","slds-grid","slds-grid--vertical-align-center"],["href","javascript:void(0);","class","slds-text-link--reset",4,"ngIf"],["class","slds-text-heading--small",4,"ngIf"],["class","slds-m-horizontal--xx-small","icon","up","size","x-small",3,"click",4,"ngIf"],["class","slds-card__body slds-card__body_inner",4,"ngIf"],["href","javascript:void(0);",1,"slds-text-link--reset"],[1,"slds-text-heading--small"],[3,"label"],["icon","up","size","x-small",1,"slds-m-horizontal--xx-small",3,"click"],[1,"slds-card__body","slds-card__body_inner"],[1,"slds-card__body--inner","slds-grid","slds-wrap","slds-grid--pull-padded"],["object-related-card-url","","class","slds-tile slds-card__tile slds-p-horizontal--small slds-hint-parent",3,"url",4,"ngFor","ngForOf"],["class","slds-p-around--large slds-align--absolute-center",4,"ngIf"],["object-related-card-url","",1,"slds-tile","slds-card__tile","slds-p-horizontal--small","slds-hint-parent",3,"url"],[1,"slds-p-around--large","slds-align--absolute-center"]],template:function(e,t){1&e&&(m.j41(0,"div",0),m.bIt("system-drop-url",(function(e){return t.urlDrop(e)})),m.j41(1,"div",1)(2,"header",2),m.nrm(3,"system-icon",3),m.j41(4,"div",4)(5,"h2"),m.DNE(6,$c,4,2,"a",5)(7,Oc,3,2,"span",6),m.k0s(),m.DNE(8,Xc,1,1,"system-utility-icon",7),m.k0s()()(),m.DNE(9,Nc,4,3,"div",8),m.k0s()),2&e&&(m.R7$(3),m.Y8G("icon","channel_program_history")("size","small"),m.R7$(3),m.Y8G("ngIf",!t.componentconfig.alwaysExpanded),m.R7$(),m.Y8G("ngIf",t.componentconfig.alwaysExpanded),m.R7$(),m.Y8G("ngIf",t.modelurls.urls.length>0&&!t.componentconfig.alwaysExpanded),m.R7$(),m.Y8G("ngIf",t.isopen))},dependencies:[i.Sq,i.bT,I.J,S.W,Dt.P,E.B,Gc._,Tc],encapsulation:2,data:{animation:[(0,f.hZ)("animateicon",[(0,f.wk)("open",(0,f.iF)({transform:"scale(1, 1)"})),(0,f.wk)("closed",(0,f.iF)({transform:"scale(1, -1)"})),(0,f.kY)("open => closed",[(0,f.i0)(".5s")]),(0,f.kY)("closed => open",[(0,f.i0)(".5s")])]),(0,f.hZ)("displaycard",[(0,f.kY)(":enter",[(0,f.iF)({opacity:0,height:"0px",overflow:"hidden"}),(0,f.i0)(".5s",(0,f.iF)({height:"*",opacity:1})),(0,f.iF)({overflow:"unset"})]),(0,f.kY)(":leave",[(0,f.iF)({overflow:"hidden"}),(0,f.i0)(".5s",(0,f.iF)({height:"0px",opacity:0}))])])]}})}return ObjectRelatedListUrls})();var Ac=s(1036);function Pc(e,t){if(1&e&&m.nrm(0,"system-button-icon",2),2&e){const e=m.XpG();m.FS9("system-title",e.manageLabel),m.Y8G("colorclass",e.manageBtnClass)}}function zc(e,t){if(1&e&&(m.j41(0,"span"),m.nrm(1,"system-label",3),m.k0s()),2&e){const e=m.XpG();m.R7$(),m.Y8G("label",e.manageLabel)}}let Hc=(()=>{class ObjectActionCheckDuplicateButton{constructor(e,t,s,i,n,l,o,a,r){this.backend=e,this.model=t,this.parentmodel=s,this.modal=i,this.toast=n,this.relatedmodels=l,this.language=o,this.broadcast=a,this.duplicatedModels=r,this.inProcess=!1,this._deleteCheck=!1,this.actionconfig={}}ngOnInit(){this.parentmodel.module=this.relatedmodels.module,this.parentmodel.id=this.relatedmodels.id}get manageLabel(){return this.deleteCheck?"LBL_DELETE_DUPLICATE_CHECK":"LBL_CHECK_AS_DUPLICATE"}get deleteCheck(){return this._deleteCheck}get manageBtnClass(){return this.duplicatedModels.acceptedDuplicates.find((e=>e.id==this.model.id))?(this._deleteCheck=!0,"slds-icon-text-success"):(this._deleteCheck=!1,this.duplicatedModels.foundDuplicates.find((e=>e.id==this.model.id))?"slds-icon-text-default":void 0)}get confirmModalLabel(){return this.deleteCheck?"MSG_DELETE_DUPLICATE_CHECK":"MSG_ACCEPT_AS_DUPLICATE"}execute(){this.inProcess=!0,this.modal.confirm(this.confirmModalLabel,this.confirmModalLabel,"error").subscribe((e=>{if(e){let e=this.modal.await(this.language.getLabel("LBL_SAVING_DATA"));this.backend.postRequest(`module/${this.parentmodel.module}/${this.parentmodel.id}/${this.model.id}/acceptasduplicate`,{deleted:this._deleteCheck}).subscribe({next:t=>{this._deleteCheck?(this.duplicatedModels.acceptedDuplicates=this.duplicatedModels.acceptedDuplicates.filter((e=>e.id!=t.checkedDuplicate.rightBean.id)),this.duplicatedModels.foundDuplicates=this.duplicatedModels.foundDuplicates.filter((e=>e.id!=t.checkedDuplicate.rightBean.id)),this.broadcast.broadcastMessage("duplicates.reload",{deletedAcceptedDuplicate:t.checkedDuplicate.rightBean,status:t.checkedDuplicate.status}),this.inProcess=!1,e.emit(!0),this.toast.sendToast(this.language.getLabel("LBL_DUPLICATE_CHECK_DELETED"),"info")):(this.duplicatedModels.acceptedDuplicates.push(t.checkedDuplicate.rightBean),this.duplicatedModels.foundDuplicates=this.duplicatedModels.foundDuplicates.filter((e=>e.id!=t.checkedDuplicate.rightBean.id)),this.broadcast.broadcastMessage("duplicates.reload",{newAcceptedDuplicate:t.checkedDuplicate.rightBean,status:t.checkedDuplicate.status}),this.inProcess=!1,e.emit(!0),this.toast.sendToast(this.language.getLabel("LBL_DUPLICATE_CHECKED"),"success"))},error:()=>{this.inProcess=!1,e.emit(!0),this.toast.sendToast(this.language.getLabel("ERR_FAILED_TO_EXECUTE"),"error")}})}else this.inProcess=!1}))}static#e=this.ɵfac=function(e){return new(e||ObjectActionCheckDuplicateButton)(m.rXU(ee.H),m.rXU(g.g,4),m.rXU(g.g),m.rXU(P.y),m.rXU(pe.o),m.rXU(Ct.K),m.rXU(h.B),m.rXU(ke.m),m.rXU(zl))};static#t=this.ɵcmp=m.VBU({type:ObjectActionCheckDuplicateButton,selectors:[["object-action-check-duplicate-button"]],features:[m.Jv_([g.g])],decls:2,vars:2,consts:[["icon","success",3,"colorclass","system-title",4,"ngIf"],[4,"ngIf"],["icon","success",3,"colorclass","system-title"],[3,"label"]],template:function(e,t){1&e&&m.DNE(0,Pc,1,2,"system-button-icon",0)(1,zc,2,1,"span",1),2&e&&(m.Y8G("ngIf",t.actionconfig.displayasicon),m.R7$(),m.Y8G("ngIf",!t.actionconfig.displayasicon))},dependencies:[i.bT,R.t,S.W,j.L],encapsulation:2})}return ObjectActionCheckDuplicateButton})();var qc=s(42205);let Jc=(()=>{class ObjectComponents{static#e=this.ɵfac=function(e){return new(e||ObjectComponents)};static#t=this.ɵmod=m.$C({type:ObjectComponents});static#s=this.ɵinj=m.G2t({imports:[i.MD,n.ad,l.YN,r.ObjectFields,d.SystemComponents,a.h,c.E9,o.iI]})}return ObjectComponents})();("undefined"==typeof ngJitMode||ngJitMode)&&m.Obh(Jc,{declarations:[fc,je,we,G.f,ve,C.S,F,_e.Y,Ee.Z,Le.P,M.l,Se.C,De.c,Fe,Ue,Ye,Ne,Ve,p,qe,Je,We,Ke,Qe,Ze,et,tt.R,it,nt.P,lt.L,ot.M,at,dt,T.f,N,$.q,Ki.I,qi.F,Ji.B,Wi.o,O.L,V,ge,W,Q,ae,fe,en,ln,mt,ht,zt,Jt,Wt,ft,bt,_t,jt,Gt,Et,Ot,Ra,Yt,kt,Vt,Zt,ts,es,hs.O,In,yi,Xi,ni.A,Bi,ui,Hi,Yi,Vi,an,cn,mn,hn,gn,xn.e,jn.R,Bn,qn,Hn,On,ol,Wn,Zn,yl,rl,cl,jl,wl.B,Gl.A,Cl.k,Sl.F,Tl,Bl.W,Pl,Ul,Qs,Xs,io,ri,lo,Ll.r,oo,ao.p,_s,_o.B,jo,So,Eo.W,Uo,Vo,Ao,vo,bo,Qo,ea,ta,na.d,sa.W,ia.H,oa,as,rs.b,us,ms.I,gs,ei,Hl,ga,ha,ra,Zs.D,uo.b,yn.b,po,Ca,wa,co.Y,ro.F,u.x,xi,Ti,Hd,Zr,fd,Gr,Mr,vd,Or,$d,kd,Kd,xd,$a,Ea,Ua,qa,Na,mi.o,Ja,sr,fr,sc,lc,bc,yc,Rc,Ic,xc.t,lc,Vc,Tc,Cc,Ac.i,Hc,Jl],imports:[i.MD,n.ad,l.YN,r.ObjectFields,d.SystemComponents,a.h,c.E9,o.iI],exports:[ve,_e.Y,tt.R,xn.e,qn,Hn,M.l,nt.P,lt.L,oa,Sl.F,Ll.r,Bl.W,Zs.D,uo.b,yn.b,Ca,Zn,xi,Ti,wl.B,Gl.A,Cl.k,Ul,_o.B,Eo.W,ni.A,Ee.Z,De.c,mi.o,Qs,G.f,$.q,T.f,C.S,Le.P,Qs,u.x,jn.R,na.d,sa.W,ia.H,Ea,fr,Vc,Tc,Yt,po]}),m.wjB(na.d,[i.YU,i.Sq,i.bT,i.B3,S.W,Be.D,$e.I,Oe.Q,Xe.C,qc.t,Ee.Z,tt.R,sa.W,ia.H],[]),m.wjB(sa.W,[i.bT,l.me,l.BC,l.vS,R.t,vi.f,S.W,pn.r,E.B,G.f,C.S,T.f],[])},97021:(e,t,s)=>{"use strict";s.d(t,{x:()=>n});var i=s(54438);let n=(()=>{class ObjectKeyValuesPipe{transform(e){let t=[];for(let s in e)t.push({key:s,value:e[s]});return t}static#e=this.ɵfac=function(e){return new(e||ObjectKeyValuesPipe)};static#t=this.ɵpipe=i.EJ8({name:"objectkeyvalues",type:ObjectKeyValuesPipe,pure:!0})}return ObjectKeyValuesPipe})()},15091:(e,t,s)=>{"use strict";s.d(t,{y:()=>u});var i=s(54438),n=s(35911),l=s(69904),o=s(83935),a=s(41731),r=s(60177);const d=["fieldcontainer"],c=e=>({"slds-hidden":e});let u=(()=>{class fieldContainer{constructor(e,t,s,i){this.model=e,this.language=t,this.metadata=s,this.view=i,this.fieldconfig={},this.fielddisplayclass="slds-text-body--regular slds-truncate slds-m-vertical--small spice-fieldbody"}set fieldname(e){this.field=e}get fieldname(){return this.field}get stati(){return this.model.getFieldStati(this.field)}ngAfterViewInit(){this.buildContainer()}buildContainer(){this.metadata.addComponent(this.getFieldType(),this.fieldcontainer).subscribe((e=>{e.instance.fieldname=this.field,e.instance.fieldconfig=this.fieldconfig,e.instance.fielddisplayclass=this.fielddisplayclass}))}getFieldType(){let e="";if(!this.model.checkFieldAccess(this.field))return"fieldNotAuthorized";e="blank"===this.field?"blank":this.fieldconfig.fieldtype?this.fieldconfig.fieldtype:this.metadata.getFieldType(this.model.module,this.field);let t=this.metadata.getFieldTypeComponent(e);return t||"fieldGeneric"}static#e=this.ɵfac=function(e){return new(e||fieldContainer)(i.rXU(n.g),i.rXU(l.B),i.rXU(o.yu),i.rXU(a.U))};static#t=this.ɵcmp=i.VBU({type:fieldContainer,selectors:[["field-container"]],viewQuery:function(e,t){if(1&e&&i.GBs(d,7,i.c1b),2&e){let e;i.mGM(e=i.lsd())&&(t.fieldcontainer=e.first)}},inputs:{field:"field",fieldconfig:"fieldconfig",fielddisplayclass:"fielddisplayclass",fieldname:"fieldname"},decls:3,vars:3,consts:[[3,"ngClass"],["fieldcontainer",""]],template:function(e,t){1&e&&(i.j41(0,"div",0),i.nrm(1,"div",null,1),i.k0s()),2&e&&i.Y8G("ngClass",i.eq3(1,c,t.stati.hidden))},dependencies:[r.YU],encapsulation:2})}return fieldContainer})()},11022:(e,t,s)=>{"use strict";s.d(t,{N:()=>l});var i=s(54438),n=s(18521);let l=(()=>{class fieldEmailEmailAddressStatus{get statusColor(){switch(this.status){case"opted_in":return"slds-icon-text-success";case"pending":return"slds-icon-text-warning";case"opted_out":return"slds-icon-text-error";default:return"slds-icon-text-light"}}get statusIcon(){switch(this.status){case"opted_in":return"success";case"pending":return"warning";case"opted_out":return"error";default:return"routing_offline"}}get statusLabel(){switch(this.status){case"opted_in":return"LBL_OPTED_IN";case"pending":return"LBL_PENDING";case"opted_out":return"LBL_OPTED_OUT";default:return"LBL_OPT_IN_STATUS"}}static#e=this.ɵfac=function(e){return new(e||fieldEmailEmailAddressStatus)};static#t=this.ɵcmp=i.VBU({type:fieldEmailEmailAddressStatus,selectors:[["field-email-emailaddress-status"]],inputs:{status:"status"},decls:1,vars:3,consts:[["size","x-small",3,"icon","colorclass","title"]],template:function(e,t){1&e&&i.nrm(0,"system-utility-icon",0),2&e&&i.Y8G("icon",t.statusIcon)("colorclass",t.statusColor)("title",t.statusLabel)},dependencies:[n.B],encapsulation:2,changeDetection:0})}return fieldEmailEmailAddressStatus})()},13921:(e,t,s)=>{"use strict";s.d(t,{s:()=>v});var i=s(54438),n=s(18359),l=s(35911),o=s(41731),a=s(69904),r=s(83935),d=s(57363),c=s(60177),u=s(84341),m=s(766),h=s(66935),g=s(89166);const p=["focus"];function f(e,t){if(1&e&&i.nrm(0,"field-label",3),2&e){const e=i.XpG();i.Y8G("fieldname",e.fieldname)("fieldconfig",e.fieldconfig)}}function b(e,t){if(1&e&&(i.j41(0,"field-generic-display",4),i.EFF(1),i.k0s()),2&e){const e=i.XpG();i.Y8G("fielddisplayclass",e.fielddisplayclass)("editable",e.isEditable())("fieldconfig",e.fieldconfig)("title",e.value)("fieldid",e.fieldid),i.R7$(),i.SpI(" ",e.value,"\n")}}function y(e,t){if(1&e){const e=i.RV6();i.j41(0,"div",5)(1,"input",6,7),i.mxI("ngModelChange",(function(t){i.eBV(e);const s=i.XpG();return i.DH7(s.value,t)||(s.value=t),i.Njj(t)})),i.k0s(),i.nrm(3,"field-messages",8),i.k0s()}if(2&e){const e=i.XpG();i.Y8G("ngClass",e.css_classes),i.R7$(),i.Y8G("placeholder",e.displayLabel?"":e.language.getFieldDisplayName(e.model.module,e.fieldname)),i.R50("ngModel",e.value),i.Y8G("maxlength",e.fieldlength)("autocomplete",e.fieldid)("ngModelOptions",e.modelOptions),i.R7$(2),i.Y8G("fieldname",e.fieldname)}}let v=(()=>{class fieldGeneric{constructor(e,t,s,i,l){this.model=e,this.view=t,this.language=s,this.metadata=i,this.router=l,this.fieldname="",this.fieldconfig={},this.fielddisplayclass="",this.fieldid="",this.fielddefs={},this.fieldlength=999,this.subscriptions=new n.yU,this._css_classes=[],this.fieldid=this.model.generateGuid()}handleViewModeChange(e){"edit"==e&&this.view.editfieldid&&this.view.editfieldid==this.fieldid&&this.setFocus()}get field_defs(){return this._field_defs||(this._field_defs=this.metadata.getFieldDefs(this.model.module,this.fieldname)),this._field_defs}get css_classes(){return this.getStati().invalid?this.addCssClass("slds-has-error"):this.removeCssClass("slds-has-error"),this._css_classes}get modelOptions(){return{updateOn:"blur"}}get value(){return this.model.getField(this.fieldname)}set value(e){this.model.setField(this.fieldname,e)}get errors(){return this.model.getFieldMessages(this.fieldname,"error")}get displayLabel(){return this.view.displayLabels&&!0!==this.fieldconfig.hidelabel}ngOnInit(){this.fielddefs=this.metadata.getFieldDefs(this.model.module,this.fieldname),this.fielddefs&&this.fielddefs.len&&(this.fieldlength=this.fielddefs.len),this.subscriptions.add(this.view.mode$.subscribe((e=>this.handleViewModeChange(e))))}ngAfterViewInit(){this.view.isEditMode()&&this.view.editfieldname&&this.view.editfieldname==this.fieldname&&this.setFocus()}setFocus(){setTimeout((()=>{this.focuselement&&this.focuselement.element.nativeElement.focus()}))}getStati(e=this.fieldname){let t=this.model.getFieldStati(e);return t.editable&&(!this.view.isEditable||t.readonly||this.fieldconfig.readonly)&&(t.editable=!1),t}isEditable(e=this.fieldname){return(this.model.checkAccess("edit")||this.model.checkAccess("create"))&&this.getStati(e).editable&&!this.getStati(e).readonly&&!this.getStati(e).disabled&&!this.getStati(e).hidden}isEditMode(){return this.view.isEditMode()&&this.isEditable()}displayLink(){try{return this.view.displayLinks&&this.fieldconfig.link&&this.model.checkAccess("detail")}catch(e){return!1}}setEditMode(){this.model.startEdit(),this.view.setEditMode()}getFieldClass(){return this.css_classes}fieldHasError(e){return this.hasFieldErrors(e)}hasFieldErrors(e=this.fieldname){return!(!this.getStati(e).invalid&&!this.errors)}goRecord(){this.router.navigate(["/module/"+this.model.module+"/"+this.model.id])}addCssClass(e){return this._css_classes.includes(e)||this._css_classes.push(e),!0}removeCssClass(e){return this._css_classes.includes(e)&&this._css_classes.splice(this._css_classes.indexOf(e),1),!0}toggleCssClass(e){return this._css_classes.includes(e)?this.removeCssClass(e):this.addCssClass(e),!0}setFieldError(e){return this.model.setFieldMessage("error",e,this.fieldname,this.fieldid)}clearFieldError(){return this.model.resetFieldMessages(this.fieldname,"error",this.fieldid)}ngOnDestroy(){this.subscriptions.unsubscribe()}static#e=this.ɵfac=function(e){return new(e||fieldGeneric)(i.rXU(l.g),i.rXU(o.U),i.rXU(a.B),i.rXU(r.yu),i.rXU(d.Ix))};static#t=this.ɵcmp=i.VBU({type:fieldGeneric,selectors:[["field-generic"]],viewQuery:function(e,t){if(1&e&&i.GBs(p,5,i.c1b),2&e){let e;i.mGM(e=i.lsd())&&(t.focuselement=e.first)}},inputs:{fieldname:"fieldname",fieldconfig:"fieldconfig",fielddisplayclass:"fielddisplayclass"},decls:3,vars:3,consts:[[3,"fieldname","fieldconfig",4,"ngIf"],[3,"fielddisplayclass","editable","fieldconfig","title","fieldid",4,"ngIf"],["class","slds-form-element__control slds-m-vertical--xx-small",3,"ngClass",4,"ngIf"],[3,"fieldname","fieldconfig"],[3,"fielddisplayclass","editable","fieldconfig","title","fieldid"],[1,"slds-form-element__control","slds-m-vertical--xx-small",3,"ngClass"],["type","text",1,"slds-input",3,"placeholder","ngModel","maxlength","autocomplete","ngModelOptions","ngModelChange"],["focus",""],[3,"fieldname"]],template:function(e,t){1&e&&i.DNE(0,f,1,2,"field-label",0)(1,b,2,6,"field-generic-display",1)(2,y,4,7,"div",2),2&e&&(i.Y8G("ngIf",t.displayLabel),i.R7$(),i.Y8G("ngIf",!t.isEditMode()),i.R7$(),i.Y8G("ngIf",t.isEditable()&&t.isEditMode()))},dependencies:[c.YU,c.bT,u.me,u.BC,u.tU,u.vS,m.b,h.K,g.A],encapsulation:2})}return fieldGeneric})()},66935:(e,t,s)=>{"use strict";s.d(t,{K:()=>R});var i=s(54438),n=s(35911),l=s(41731),o=s(69904),a=s(66031),r=s(60177),d=s(25863),c=s(43308),u=s(33325);function m(e,t){1&e&&i.nrm(0,"system-stencil")}function h(e,t){1&e&&i.eu8(0)}function g(e,t){if(1&e&&(i.j41(0,"span",9),i.DNE(1,h,1,0,"ng-container",10),i.k0s()),2&e){i.XpG(2);const e=i.sdS(5);i.R7$(),i.Y8G("ngTemplateOutlet",e)}}function p(e,t){1&e&&i.eu8(0)}function f(e,t){if(1&e&&i.DNE(0,p,1,0,"ng-container",10),2&e){i.XpG(2);const e=i.sdS(5);i.Y8G("ngTemplateOutlet",e)}}function b(e,t){if(1&e){const e=i.RV6();i.j41(0,"button",11),i.bIt("click",(function(){i.eBV(e);const t=i.XpG(2);return i.Njj(t.setEditMode())})),i.nrm(1,"system-button-icon",12),i.k0s()}2&e&&(i.R7$(),i.Y8G("icon","edit"))}const y=e=>({"slds-truncate":e});function v(e,t){if(1&e&&(i.j41(0,"div",4)(1,"div",5),i.DNE(2,g,2,1,"span",6)(3,f,1,1,"ng-template",null,7,i.C5r),i.k0s(),i.DNE(5,b,2,1,"button",8),i.k0s()),2&e){const e=i.sdS(4),t=i.XpG();i.R7$(),i.Y8G("ngClass",i.eq3(5,y,t._truncate))("ngStyle",t.fieldMaxWidth),i.R7$(),i.Y8G("ngIf",t.link)("ngIfElse",e),i.R7$(3),i.Y8G("ngIf",t.editable)}}function _(e,t){1&e&&i.SdG(0)}const k=["*"];let R=(()=>{class fieldGenericDisplay{set truncate(e){this._truncate=!1}constructor(e,t,s,i){this.model=e,this.view=t,this.language=s,this.navigationtab=i,this.editable=!1,this.fieldconfig={},this.fielddisplayclass="",this.fieldid="",this.fieldname="",this._truncate=!0}isEditMode(){return!(!this.view.isEditMode()||!this.editable)}get fieldMaxWidth(){if(this.editable)return{"max-width":"calc(100% - 20px)"}}get link(){try{return this.fieldconfig.link&&this.model.checkAccess("detail")}catch(e){return!1}}setEditMode(){this.editable&&(this.model.startEdit(),this.view.setEditMode(this.fieldid))}goRecord(){this.link&&this.model.goDetail(this.navigationtab?.tabid)}static#e=this.ɵfac=function(e){return new(e||fieldGenericDisplay)(i.rXU(n.g),i.rXU(l.U),i.rXU(o.B),i.rXU(a._,8))};static#t=this.ɵcmp=i.VBU({type:fieldGenericDisplay,selectors:[["field-generic-display"]],inputs:{editable:"editable",fieldconfig:"fieldconfig",fielddisplayclass:"fielddisplayclass",fieldid:"fieldid",fieldname:"fieldname",truncate:[i.Mj6.None,"field-generic-display-notruncate","truncate"]},ngContentSelectors:k,decls:6,vars:3,consts:[[3,"ngClass","dblclick"],[4,"ngIf","ngIfElse"],["displaycontent",""],["content",""],[1,"slds-size--1-of-1","slds-grid","slds-grid--vertical-align-center","slds-grid--align-spread",2,"min-height","19px"],[1,"slds-grow",3,"ngClass","ngStyle"],["system-model-popover","",4,"ngIf","ngIfElse"],["nolink",""],["class","slds-button slds-button--icon spice-button-icon-light slds-m-left--xx-small",3,"click",4,"ngIf"],["system-model-popover",""],[4,"ngTemplateOutlet"],[1,"slds-button","slds-button--icon","spice-button-icon-light","slds-m-left--xx-small",3,"click"],[3,"icon"]],template:function(e,t){if(1&e&&(i.NAR(),i.j41(0,"div",0),i.bIt("dblclick",(function(){return t.setEditMode()})),i.DNE(1,m,1,0,"system-stencil",1)(2,v,6,7,"ng-template",null,2,i.C5r)(4,_,1,0,"ng-template",null,3,i.C5r),i.k0s()),2&e){const e=i.sdS(3);i.Y8G("ngClass",t.fielddisplayclass),i.R7$(),i.Y8G("ngIf",t.model.isLoading||t.view.isLoading)("ngIfElse",e)}},dependencies:[r.YU,r.bT,r.T3,r.B3,d.t,c.O,u.j],encapsulation:2})}return fieldGenericDisplay})()},766:(e,t,s)=>{"use strict";s.d(t,{b:()=>y});var i=s(54438),n=s(35911),l=s(83935),o=s(41731),a=s(48849),r=s(69904),d=s(4921),c=s(60177),u=s(32062),m=s(45915),h=s(59851);function g(e,t){1&e&&(i.j41(0,"abbr",6),i.EFF(1,"*"),i.k0s())}function p(e,t){if(1&e&&i.nrm(0,"system-label-fieldname",7),2&e){const e=i.XpG();i.Y8G("field",e.fieldname)("fieldconfig",e.fieldconfig)("module",e.model.module)("length",e.view.labels)}}function f(e,t){if(1&e&&i.nrm(0,"system-label",8),2&e){const e=i.XpG();i.Y8G("label",e.fieldconfig.label)("length",e.view.labels)}}function b(e,t){if(1&e&&i.nrm(0,"system-icon-help-text",9),2&e){const e=i.XpG();i.Y8G("helpText",e.helpText)}}let y=(()=>{class fieldLabel{constructor(e,t,s,i,n,l,o){this.model=e,this.metadata=t,this.view=s,this.userPreferences=i,this.language=n,this.footer=l,this.injector=o,this.fieldname="",this.fieldconfig={},this.addclasses="slds-form-element__label",this.showHelp=!1}get stati(){let e=this.model.getFieldStati(this.fieldname);return!e.editable||this.view.isEditable&&!this.fieldconfig.readonly||(e.editable=!1),this.fieldconfig.required&&(e.required=!0),e}isRequired(){return this.stati.editable&&this.stati.required}isEditable(){return this.stati.editable}isEditMode(){return!(!this.view.isEditMode()||!this.isEditable())}get hidden(){return!!this.fieldconfig.hidelabel}get label(){if(this.fieldconfig.label){if(this.fieldconfig.label.indexOf(":")>0){let e=this.fieldconfig.label.split(":");return this.language.getLabel(e[1],e[0],this.view.labels)}return this.language.getLabel(this.fieldconfig.label,this.model.module,this.view.labels)}return this.language.getFieldDisplayName(this.model.module,this.fieldname,this.fieldconfig,this.view.labels)}get helpText(){if(this.userPreferences.toUse.help_icon&&"hidden"==this.userPreferences.toUse.help_icon)return!1;if(this.fieldconfig.helpText){if(this.fieldconfig.helpText.indexOf(":")>0){let e=this.fieldconfig.helpText.split(":");return this.language.getLabel(e[1],e[0],this.view.labels)}return this.language.getLabel(this.fieldconfig.helpText,this.model.module,this.view.labels)}return this.language.getFieldHelpText(this.model.module,this.fieldname,this.fieldconfig)}showContext(e){}static#e=this.ɵfac=function(e){return new(e||fieldLabel)(i.rXU(n.g),i.rXU(l.yu),i.rXU(o.U),i.rXU(a.S),i.rXU(r.B),i.rXU(d.q),i.rXU(i.zZn))};static#t=this.ɵcmp=i.VBU({type:fieldLabel,selectors:[["field-label"]],inputs:{fieldname:"fieldname",fieldconfig:"fieldconfig",addclasses:"addclasses"},decls:6,vars:5,consts:[[2,"display","flow-root",3,"contextmenu"],[1,"slds-truncate","slds-float_left",3,"ngClass"],["class","slds-required",4,"ngIf"],[3,"field","fieldconfig","module","length",4,"ngIf"],[3,"label","length",4,"ngIf"],[3,"helpText",4,"ngIf"],[1,"slds-required"],[3,"field","fieldconfig","module","length"],[3,"label","length"],[3,"helpText"]],template:function(e,t){1&e&&(i.j41(0,"div",0),i.bIt("contextmenu",(function(e){return t.showContext(e)})),i.j41(1,"label",1),i.DNE(2,g,2,0,"abbr",2)(3,p,1,4,"system-label-fieldname",3)(4,f,1,2,"system-label",4),i.k0s(),i.DNE(5,b,1,1,"system-icon-help-text",5),i.k0s()),2&e&&(i.R7$(),i.Y8G("ngClass",t.addclasses),i.R7$(),i.Y8G("ngIf",t.stati.editable&&t.stati.required),i.R7$(),i.Y8G("ngIf",!t.fieldconfig.label),i.R7$(),i.Y8G("ngIf",t.fieldconfig.label),i.R7$(),i.Y8G("ngIf",t.helpText))},dependencies:[c.YU,c.bT,u.W,m.P,h.N],encapsulation:2})}return fieldLabel})()},53915:(e,t,s)=>{"use strict";s.d(t,{_:()=>_});var i=s(54438),n=s(35911),l=s(72541),o=s(69904),a=s(29994),r=s(60177),d=s(25863),c=s(58461),u=s(32062),m=s(15059),h=s(22465),g=s(85152);function p(e,t){if(1&e){const e=i.RV6();i.j41(0,"button",6),i.bIt("mousedown",(function(t){i.eBV(e);const s=i.XpG();return i.Njj(s.setCurrentUser(t))})),i.nrm(1,"system-button-icon",7),i.k0s()}}function f(e,t){1&e&&(i.j41(0,"div",8)(1,"system-illustration-no-records"),i.nrm(2,"system-label",9),i.k0s()())}const b=e=>({"slds-is-selected slds-color__background_gray-5":e});function y(e,t){if(1&e){const e=i.RV6();i.j41(0,"li",10),i.bIt("mousedown",(function(t){const s=i.eBV(e).$implicit,n=i.XpG();return i.Njj(n.setParent(t,s))})),i.nrm(1,"field-lookup-recent-item",11),i.k0s()}if(2&e){const e=t.$implicit,s=i.XpG();i.Y8G("ngClass",i.eq3(2,b,s.selectedItem==e)),i.R7$(),i.Y8G("item",e)}}function v(e,t){1&e&&(i.qex(0),i.j41(1,"li",12),i.nrm(2,"system-searchresult-stencil"),i.k0s(),i.j41(3,"li",13),i.nrm(4,"system-searchresult-stencil"),i.k0s(),i.j41(5,"li",14),i.nrm(6,"system-searchresult-stencil"),i.k0s(),i.bVm())}let _=(()=>{class fieldLookupRecent{constructor(e,t,s,n,l){this.model=e,this.recent=t,this.language=s,this.session=n,this.renderer=l,this.module="",this.selectedObject=new i.bkB,this.recentItems=[],this.loading=!1}ngOnInit(){this.inputElement&&(this.listener=this.renderer.listen(this.inputElement,"keyup",(e=>{const t=this.recentItems.findIndex((e=>e==this.selectedItem));switch(e.key){case"Enter":1==this.recentItems.length&&(this.selectedItem=this.recentItems[0]),this.selectedObject.emit({id:this.selectedItem.data.id,text:this.selectedItem.data.summary_text,data:this.selectedItem.data});break;case"ArrowDown":this.selectedItem=this.recentItems[t+1>=this.recentItems.length?0:t+1];break;case"ArrowUp":this.selectedItem=this.recentItems[t-1<0?this.recentItems.length-1:t-1];break;case"Escape":this.selectedItem={data:{id:"",summary_text:""}}}})))}ngOnChanges(){this.getRecent()}setCurrentUser(e){e.preventDefault(),this.selectedObject.emit({id:this.session.authData.userId,text:this.session.authData.user.full_name,data:this.session.authData.user})}setParent(e,t){e.preventDefault(),this.selectedObject.emit({id:t.data.id,text:t.data.summary_text,data:t.data})}getRecent(){this.loading=!0,this.recentItems=[];this.recent.getModuleRecent(this.module).subscribe((e=>{this.recentItems=e,this.loading=!1}))}ngOnDestroy(){this.listener&&this.listener()}static#e=this.ɵfac=function(e){return new(e||fieldLookupRecent)(i.rXU(n.g),i.rXU(l._),i.rXU(o.B),i.rXU(a.d),i.rXU(i.sFG))};static#t=this.ɵcmp=i.VBU({type:fieldLookupRecent,selectors:[["field-lookup-recent"]],inputs:{module:"module",inputElement:"inputElement"},outputs:{selectedObject:"selectedObject"},features:[i.OA$],decls:7,vars:5,consts:[[1,"slds-lookup__item--label","slds-text-body--small","slds-grid","slds-grid--vertical-align-center","slds-grid--align-spread","slds-border--bottom"],["system-title","LBL_SET_CURRENT_USER","class","slds-button slds-button--icon","size","xx-small",3,"mousedown",4,"ngIf"],["class","slds-align--absolute-center slds-p-around--small",4,"ngIf"],["role","listbox",1,"slds-lookup__list"],["role","presentation",3,"ngClass","mousedown",4,"ngFor","ngForOf"],[4,"ngIf"],["system-title","LBL_SET_CURRENT_USER","size","xx-small",1,"slds-button","slds-button--icon",3,"mousedown"],["icon","user"],[1,"slds-align--absolute-center","slds-p-around--small"],["label","MSG_NO_RECORDS_FOUND"],["role","presentation",3,"ngClass","mousedown"],[3,"item"],[2,"opacity","1"],[2,"opacity","0.6"],[2,"opacity","0.2"]],template:function(e,t){1&e&&(i.j41(0,"div",0),i.EFF(1),i.DNE(2,p,2,0,"button",1),i.k0s(),i.DNE(3,f,3,0,"div",2),i.j41(4,"ul",3),i.DNE(5,y,2,4,"li",4)(6,v,7,0,"ng-container",5),i.k0s()),2&e&&(i.R7$(),i.SpI(" ",t.language.getModuleCombinedLabel("LBL_RECENTLYVIEWED",t.module)," "),i.R7$(),i.Y8G("ngIf","Users"==t.module),i.R7$(),i.Y8G("ngIf",!t.loading&&0==t.recentItems.length),i.R7$(2),i.Y8G("ngForOf",t.recentItems),i.R7$(),i.Y8G("ngIf",t.loading))},dependencies:[r.YU,r.Sq,r.bT,d.t,c.b,u.W,m.V,h.L,g.J],encapsulation:2})}return fieldLookupRecent})()},85152:(e,t,s)=>{"use strict";s.d(t,{J:()=>v});var i=s(35911),n=s(41731),l=s(54438),o=s(57363),a=s(69904),r=s(83935),d=s(60177),c=s(68823),u=s(44985),m=s(15091);function h(e,t){if(1&e&&(l.j41(0,"span"),l.EFF(1),l.k0s()),2&e){const e=l.XpG();l.R7$(),l.JRh(e.model.data.summary_text)}}function g(e,t){if(1&e&&(l.j41(0,"li",8),l.nrm(1,"field-container",12),l.k0s()),2&e){const e=l.XpG().$implicit;l.R7$(),l.Y8G("field",e.field)("fieldconfig",e.fieldconfig)}}function p(e,t){if(1&e&&(l.qex(0),l.DNE(1,g,2,2,"li",11),l.bVm()),2&e){const e=t.$implicit,s=l.XpG(2);l.R7$(),l.Y8G("ngIf",s.model.getField(e.field))}}function f(e,t){if(1&e&&(l.j41(0,"ul",7),l.DNE(1,p,2,1,"ng-container",10),l.k0s()),2&e){const e=l.XpG();l.R7$(),l.Y8G("ngForOf",e.mainfieldsetfields)}}function b(e,t){if(1&e&&(l.j41(0,"li",8),l.nrm(1,"field-container",12),l.k0s()),2&e){const e=l.XpG().$implicit;l.R7$(),l.Y8G("field",e.field)("fieldconfig",e.fieldconfig)}}function y(e,t){if(1&e&&(l.qex(0),l.DNE(1,b,2,2,"li",11),l.bVm()),2&e){const e=t.$implicit,s=l.XpG();l.R7$(),l.Y8G("ngIf",s.model.getField(e.field))}}let v=(()=>{class fieldLookupRecentItem{constructor(e,t,s,i,n){this.model=e,this.router=t,this.language=s,this.metadata=i,this.view=n,this.item={},this.view.displayLabels=!1}ngOnInit(){this.model.module=this.item.module_name,this.model.id=this.item.item_id,this.model.setData(this.item.data);let e=this.metadata.getComponentConfig("GlobalHeaderSearchResultsItem",this.model.module);e&&e.mainfieldset&&(this.mainfieldsetfields=this.metadata.getFieldSetItems(e.mainfieldset)),e&&e.subfieldset&&(this.subfieldsetfields=this.metadata.getFieldSetItems(e.subfieldset))}static#e=this.ɵfac=function(e){return new(e||fieldLookupRecentItem)(l.rXU(i.g),l.rXU(o.Ix),l.rXU(a.B),l.rXU(r.yu),l.rXU(n.U))};static#t=this.ɵcmp=l.VBU({type:fieldLookupRecentItem,selectors:[["field-lookup-recent-item"]],inputs:{item:"item"},features:[l.Jv_([i.g,n.U])],decls:11,vars:6,consts:[["role","option",1,"slds-lookup__item-action","slds-media","slds-media--center"],["size","small",3,"module"],[1,"slds-media__body"],[1,"slds-lookup__result-text"],[4,"ngIf"],["class","slds-list_horizontal slds-has-dividers_right slds-truncate",4,"ngIf"],[1,"slds-lookup__result-meta","slds-text-body--small"],[1,"slds-list_horizontal","slds-has-dividers_right","slds-truncate"],[1,"slds-item"],[3,"module","singular"],[4,"ngFor","ngForOf"],["class","slds-item",4,"ngIf"],["fielddisplayclass","slds-truncate",3,"field","fieldconfig"]],template:function(e,t){1&e&&(l.j41(0,"span",0),l.nrm(1,"system-icon",1),l.j41(2,"div",2)(3,"div",3),l.DNE(4,h,2,1,"span",4)(5,f,2,1,"ul",5),l.k0s(),l.j41(6,"span",6)(7,"ul",7)(8,"li",8),l.nrm(9,"system-label-modulename",9),l.k0s(),l.DNE(10,y,2,1,"ng-container",10),l.k0s()()()()),2&e&&(l.R7$(),l.Y8G("module",t.model.module),l.R7$(3),l.Y8G("ngIf",!t.mainfieldsetfields),l.R7$(),l.Y8G("ngIf",t.mainfieldsetfields),l.R7$(4),l.Y8G("module",t.model.module)("singular",!0),l.R7$(),l.Y8G("ngForOf",t.subfieldsetfields))},dependencies:[d.Sq,d.bT,c.J,u.r,m.y],encapsulation:2})}return fieldLookupRecentItem})()},29836:(e,t,s)=>{"use strict";s.d(t,{T:()=>x});var i=s(54438),n=s(75103),l=s(18359),o=s(83935),a=s(35911),r=s(69904),d=s(50531),c=s(60177),u=s(68823),m=s(58461),h=s(32062),g=s(44985),p=s(15059),f=s(72495),b=s(10725);function y(e,t){if(1&e&&(i.j41(0,"span",12),i.nrm(1,"system-label",13),i.EFF(2),i.k0s()),2&e){const e=i.XpG();i.R7$(2),i.SpI(" ",e.relatefilter.display,"")}}const v=e=>({"slds-is-selected slds-color__background_gray-5":e});function _(e,t){if(1&e){const e=i.RV6();i.j41(0,"li",14),i.bIt("mousedown",(function(){const t=i.eBV(e).$implicit,s=i.XpG();return i.Njj(s.setItem(t))})),i.k0s()}if(2&e){const e=t.$implicit,s=i.XpG();i.Y8G("module",s.module)("item",e)("ngClass",i.eq3(3,v,s.selectedItem==e))}}function k(e,t){1&e&&(i.qex(0),i.j41(1,"li",15),i.nrm(2,"system-searchresult-stencil"),i.k0s(),i.j41(3,"li",16),i.nrm(4,"system-searchresult-stencil"),i.k0s(),i.j41(5,"li",17),i.nrm(6,"system-searchresult-stencil"),i.k0s(),i.bVm())}function R(e,t){1&e&&(i.j41(0,"div",18)(1,"system-illustration-no-records"),i.nrm(2,"system-label",19),i.k0s()())}function I(e,t){if(1&e){const e=i.RV6();i.j41(0,"li",20),i.bIt("added",(function(t){i.eBV(e);const s=i.XpG();return i.Njj(s.recordAdded(t))})),i.k0s()}if(2&e){const e=i.XpG();i.Y8G("module",e.module)("parent",e.model)}}let x=(()=>{class fieldLookupSearch{set searchterm(e){this.searchTerm=e,this.searchTimeout&&window.clearTimeout(this.searchTimeout),this.searchTimeout=window.setTimeout((()=>this.doSearch()),500)}constructor(e,t,s,n,o,a){this.metadata=e,this.model=t,this.modellist=s,this.language=n,this.modal=o,this.renderer=a,this.searchTerm="",this.searchTimeout={},this.module="",this.modulefilter="",this.disableadd=!1,this.selectedObject=new i.bkB,this.searchWithModal=new i.bkB,this.searchtermChange=new i.bkB,this.subscriptions=new l.yU}ngOnInit(){this.modellist.modulefilter=this.modulefilter,this.relatefilter&&(this.modellist.relatefilter=this.relatefilter),this.modellist.loadlimit=5,this.modellist.initialize(this.module),this.modellist.getListData(),this.inputElement&&(this.listener=this.renderer.listen(this.inputElement,"keyup",(e=>{const t=this.modellist.listData.list.findIndex((e=>e==this.selectedItem));switch(e.key){case"Enter":1==this.modellist.listData.list.length&&(this.selectedItem=this.modellist.listData.list[0]),this.selectedObject.emit({id:this.selectedItem.id,text:this.selectedItem.summary_text,data:this.selectedItem});break;case"ArrowDown":this.selectedItem=this.modellist.listData.list[t+1>=this.modellist.listData.list.length?0:t+1];break;case"ArrowUp":this.selectedItem=this.modellist.listData.list[t-1<0?this.modellist.listData.list.length-1:t-1];break;case"Escape":this.selectedItem={id:"",summary_text:""}}})))}ngOnChanges(e){e.relateId&&this.modellist.currentList&&this.modellist.getListData()}get canAdd(){return!this.disableadd&&this.metadata.checkModuleAcl(this.module,"edit")}doSearch(){""!==this.searchTerm&&this.searchTerm!==this.modellist.searchTerm&&(this.modellist.searchTerm=this.searchTerm,this.modellist.getListData())}setItem(e){this.searchTerm="",this.searchtermChange.emit(this.searchTerm),this.selectedObject.emit({id:e.id,text:e.summary_text,data:e})}recordAdded(e){this.setItem(e.data)}ngOnDestroy(){this.listener&&this.listener()}static#e=this.ɵfac=function(e){return new(e||fieldLookupSearch)(i.rXU(o.yu),i.rXU(a.g),i.rXU(n.K),i.rXU(r.B),i.rXU(d.y),i.rXU(i.sFG))};static#t=this.ɵcmp=i.VBU({type:fieldLookupSearch,selectors:[["field-lookup-search"]],inputs:{inputElement:"inputElement",module:"module",modulefilter:"modulefilter",disableadd:"disableadd",relatefilter:"relatefilter",relateId:"relateId",searchterm:"searchterm"},outputs:{selectedObject:"selectedObject",searchWithModal:"searchWithModal",searchtermChange:"searchtermChange"},features:[i.Jv_([n.K]),i.OA$],decls:12,vars:10,consts:[["role","listbox",1,"slds-lookup__list"],["role","presentation"],["role","option",1,"slds-p-horizontal--small","slds-p-vertical--xx-small","slds-grid","slds-grid--vertical-align-center","slds-border--bottom",3,"mousedown"],[3,"icon","sprite","size","addclasses"],[1,"slds-media__body"],[1,"slds-lookup__result-text"],[3,"module"],["class","slds-p-horizontal--xx-small",4,"ngIf"],["field-lookup-search-item","",3,"module","item","ngClass","mousedown",4,"ngFor","ngForOf"],[4,"ngIf"],["class","slds-align--absolute-center slds-p-around--small",4,"ngIf"],["field-lookup-search-add","","role","presentation",3,"module","parent","added",4,"ngIf"],[1,"slds-p-horizontal--xx-small"],["label","LBL_RELATED_TO"],["field-lookup-search-item","",3,"module","item","ngClass","mousedown"],[2,"opacity","1"],[2,"opacity","0.6"],[2,"opacity","0.2"],[1,"slds-align--absolute-center","slds-p-around--small"],["label","MSG_NO_RECORDS_FOUND"],["field-lookup-search-add","","role","presentation",3,"module","parent","added"]],template:function(e,t){1&e&&(i.j41(0,"ul",0)(1,"li",1)(2,"div",2),i.bIt("mousedown",(function(){return t.searchWithModal.emit()})),i.nrm(3,"system-icon",3),i.j41(4,"div",4)(5,"div",5),i.nrm(6,"system-label-modulename",6),i.DNE(7,y,3,1,"span",7),i.k0s()()()(),i.DNE(8,_,1,5,"li",8)(9,k,7,0,"ng-container",9)(10,R,3,0,"div",10)(11,I,1,2,"li",11),i.k0s()),2&e&&(i.R7$(3),i.Y8G("icon","search")("sprite","utility")("size","x-small")("addclasses","slds-m-vertical--xxx-small slds-m-horizontal--xx-small"),i.R7$(3),i.Y8G("module",t.module),i.R7$(),i.Y8G("ngIf",null==t.relatefilter?null:t.relatefilter.active),i.R7$(),i.Y8G("ngForOf",t.modellist.listData.list),i.R7$(),i.Y8G("ngIf",t.modellist.isLoading),i.R7$(),i.Y8G("ngIf",!t.modellist.isLoading&&0==t.modellist.listData.totalcount),i.R7$(),i.Y8G("ngIf",t.canAdd))},dependencies:[c.YU,c.Sq,c.bT,u.J,m.b,h.W,g.r,p.V,f.g,b.m],encapsulation:2})}return fieldLookupSearch})()},10725:(e,t,s)=>{"use strict";s.d(t,{m:()=>c});var i=s(54438),n=s(35911),l=s(69904),o=s(68823),a=s(32062),r=s(44985);const d=["field-lookup-search-add",""];let c=(()=>{class fieldLookupSearchAdd{constructor(e,t){this.model=e,this.language=t,this.module="",this.added$=new i.bkB}ngOnInit(){this.model.module=this.module}addParent(){this.model.addModel("",this.parent,null,!0).subscribe((e=>{this.added$.emit({id:e.id,text:e.summary_text,data:e})}))}static#e=this.ɵfac=function(e){return new(e||fieldLookupSearchAdd)(i.rXU(n.g),i.rXU(l.B))};static#t=this.ɵcmp=i.VBU({type:fieldLookupSearchAdd,selectors:[["","field-lookup-search-add",""]],inputs:{module:"module",parent:"parent"},outputs:{added$:"added"},features:[i.Jv_([n.g])],attrs:d,decls:7,vars:6,consts:[["role","option",1,"slds-grid","slds-grid--vertical-align-center","slds-p-horizontal--small","slds-p-vertical--xx-small","slds-border--top",3,"mousedown"],[3,"icon","sprite","size","addclasses"],[1,"slds-media__body"],[1,"slds-lookup__result-text"],["label","LBL_CREATE"],[3,"module","singular"]],template:function(e,t){1&e&&(i.j41(0,"div",0),i.bIt("mousedown",(function(){return t.addParent()})),i.nrm(1,"system-icon",1),i.j41(2,"div",2)(3,"div",3),i.nrm(4,"system-label",4),i.EFF(5,": "),i.nrm(6,"system-label-modulename",5),i.k0s()()()),2&e&&(i.R7$(),i.Y8G("icon","add")("sprite","utility")("size","x-small")("addclasses","slds-m-vertical--xxx-small slds-m-horizontal--xx-small"),i.R7$(5),i.Y8G("module",t.module)("singular",!0))},dependencies:[o.J,a.W,r.r],encapsulation:2})}return fieldLookupSearchAdd})()},72495:(e,t,s)=>{"use strict";s.d(t,{g:()=>y});var i=s(35911),n=s(41731),l=s(54438),o=s(69904),a=s(83935),r=s(60177),d=s(68823),c=s(15091);const u=["field-lookup-search-item",""];function m(e,t){if(1&e&&(l.j41(0,"span"),l.EFF(1),l.k0s()),2&e){const e=l.XpG();l.R7$(),l.JRh(e.model.data.summary_text)}}function h(e,t){if(1&e&&(l.j41(0,"li",10),l.nrm(1,"field-container",11),l.k0s()),2&e){const e=l.XpG().$implicit;l.R7$(),l.Y8G("field",e.field)("fieldconfig",e.fieldconfig)}}function g(e,t){if(1&e&&(l.qex(0),l.DNE(1,h,2,2,"li",9),l.bVm()),2&e){const e=t.$implicit,s=l.XpG(2);l.R7$(),l.Y8G("ngIf",s.model.getField(e.field))}}function p(e,t){if(1&e&&(l.j41(0,"ul",7),l.DNE(1,g,2,1,"ng-container",8),l.k0s()),2&e){const e=l.XpG();l.R7$(),l.Y8G("ngForOf",e.mainfieldsetfields)}}function f(e,t){if(1&e&&(l.j41(0,"li",10),l.nrm(1,"field-container",11),l.k0s()),2&e){const e=l.XpG().$implicit;l.R7$(),l.Y8G("field",e.field)("fieldconfig",e.fieldconfig)}}function b(e,t){if(1&e&&(l.qex(0),l.DNE(1,f,2,2,"li",9),l.bVm()),2&e){const e=t.$implicit,s=l.XpG();l.R7$(),l.Y8G("ngIf",s.model.getField(e.field))}}let y=(()=>{class fieldLookupSearchItem{constructor(e,t,s,i){this.model=e,this.view=t,this.language=s,this.metadata=i,this.item={},this.view.displayLabels=!1}ngOnInit(){this.model.module=this.module,this.model.id=this.item.id,this.model.setData(this.item);let e=this.metadata.getComponentConfig("GlobalHeaderSearchResultsItem",this.model.module);e&&e.mainfieldset&&(this.mainfieldsetfields=this.metadata.getFieldSetItems(e.mainfieldset)),e&&e.subfieldset&&(this.subfieldsetfields=this.metadata.getFieldSetItems(e.subfieldset))}static#e=this.ɵfac=function(e){return new(e||fieldLookupSearchItem)(l.rXU(i.g),l.rXU(n.U),l.rXU(o.B),l.rXU(a.yu))};static#t=this.ɵcmp=l.VBU({type:fieldLookupSearchItem,selectors:[["","field-lookup-search-item",""]],inputs:{item:"item",module:"module"},features:[l.Jv_([i.g,n.U])],attrs:u,decls:9,vars:4,consts:[["role","option",1,"slds-lookup__item-action","slds-media","slds-media--center"],["size","small",3,"module"],[1,"slds-media__body"],[1,"slds-lookup__result-text"],[4,"ngIf"],["class","slds-list_horizontal slds-has-dividers_right slds-truncate",4,"ngIf"],[1,"slds-lookup__result-meta","slds-text-body--small"],[1,"slds-list_horizontal","slds-has-dividers_right","slds-truncate"],[4,"ngFor","ngForOf"],["class","slds-item",4,"ngIf"],[1,"slds-item"],["fielddisplayclass","slds-truncate",3,"field","fieldconfig"]],template:function(e,t){1&e&&(l.j41(0,"span",0),l.nrm(1,"system-icon",1),l.j41(2,"div",2)(3,"div",3),l.DNE(4,m,2,1,"span",4)(5,p,2,1,"ul",5),l.k0s(),l.j41(6,"div",6)(7,"ul",7),l.DNE(8,b,2,1,"ng-container",8),l.k0s()()()()),2&e&&(l.R7$(),l.Y8G("module",t.model.module),l.R7$(3),l.Y8G("ngIf",!t.mainfieldsetfields),l.R7$(),l.Y8G("ngIf",t.mainfieldsetfields),l.R7$(3),l.Y8G("ngForOf",t.subfieldsetfields))},dependencies:[r.Sq,r.bT,d.J,c.y],encapsulation:2})}return fieldLookupSearchItem})()},89166:(e,t,s)=>{"use strict";s.d(t,{A:()=>b});var i=s(54438),n=s(35911),l=s(41731),o=s(69904),a=s(88457),r=s(60177),d=s(32062),c=s(18521);function u(e,t){if(1&e&&(i.j41(0,"div",8),i.nrm(1,"system-label",9),i.k0s()),2&e){const e=t.$implicit;i.R7$(),i.Y8G("label",e.message)}}function m(e,t){if(1&e&&(i.j41(0,"div",3)(1,"div",4)(2,"span",5),i.nrm(3,"system-utility-icon",6),i.k0s()(),i.DNE(4,u,2,1,"div",7),i.k0s()),2&e){const e=i.XpG();i.R7$(3),i.Y8G("icon","error")("size","x-small")("colorclass","slds-icon-text-error"),i.R7$(),i.Y8G("ngForOf",e.errors)}}function h(e,t){if(1&e&&(i.j41(0,"div",8),i.nrm(1,"system-label",9),i.k0s()),2&e){const e=t.$implicit;i.R7$(),i.Y8G("label",e.message)}}function g(e,t){if(1&e&&(i.j41(0,"div",10)(1,"div",4)(2,"span",5),i.nrm(3,"system-utility-icon",6),i.k0s()(),i.DNE(4,h,2,1,"div",7),i.k0s()),2&e){const e=i.XpG();i.R7$(3),i.Y8G("icon","warning")("size","x-small")("colorclass","slds-icon-text-warning"),i.R7$(),i.Y8G("ngForOf",e.warnings)}}function p(e,t){if(1&e&&(i.j41(0,"div",8),i.nrm(1,"system-label",9),i.k0s()),2&e){const e=t.$implicit;i.R7$(),i.Y8G("label",e.message)}}function f(e,t){if(1&e&&(i.j41(0,"div",11)(1,"div",4)(2,"span",5),i.nrm(3,"system-utility-icon",12),i.k0s()(),i.DNE(4,p,2,1,"div",7),i.k0s()),2&e){const e=i.XpG();i.R7$(3),i.Y8G("icon","info")("size","x-small"),i.R7$(),i.Y8G("ngForOf",e.notices)}}let b=(()=>{class FieldMessagesComponent{constructor(e,t,s,i){this.model=e,this.view=t,this.language=s,this.fielderrorgroup=i,this.fieldname="",this._messages=[],this.errors=[],this.warnings=[],this.notices=[]}ngOnInit(){this.model.messageChange$.subscribe((()=>{this.updateMessages()}))}ngOnChanges(){this.updateMessages()}ngOnDestroy(){this.fielderrorgroup&&this.fielderrorgroup.setError(this.fieldname,!1)}updateMessages(){let e;e=0==this._messages.length&&this.fieldname?this.model.getFieldMessages(this.fieldname)||[]:this._messages,this.errors=this.filterMessages(e,"error"),this.warnings=this.filterMessages(e,"warning"),this.notices=this.filterMessages(e,"notice"),this.fielderrorgroup&&this.fielderrorgroup.setError(this.fieldname,0!==this.errors.length)}filterMessages(e,t){return e.filter((e=>!t||e.type==t))}static#e=this.ɵfac=function(e){return new(e||FieldMessagesComponent)(i.rXU(n.g),i.rXU(l.U),i.rXU(o.B),i.rXU(a.W,8))};static#t=this.ɵcmp=i.VBU({type:FieldMessagesComponent,selectors:[["field-messages"]],inputs:{fieldname:"fieldname",_messages:[i.Mj6.None,"messages","_messages"]},features:[i.OA$],decls:3,vars:3,consts:[["class","slds-media slds-media-center slds-inline_icon_text slds-form-element__help",4,"ngIf"],["class","slds-media slds-media-center slds-inline_icon_text slds-inline_icon_text--warning",4,"ngIf"],["class","slds-media slds-media-center slds-inline_icon_text",4,"ngIf"],[1,"slds-media","slds-media-center","slds-inline_icon_text","slds-form-element__help"],[1,"slds-media__figure"],[1,"slds-icon_container"],[3,"icon","size","colorclass"],["class","slds-media__body",4,"ngFor","ngForOf"],[1,"slds-media__body"],[3,"label"],[1,"slds-media","slds-media-center","slds-inline_icon_text","slds-inline_icon_text--warning"],[1,"slds-media","slds-media-center","slds-inline_icon_text"],[3,"icon","size"]],template:function(e,t){1&e&&i.DNE(0,m,5,4,"div",0)(1,g,5,4,"div",1)(2,f,5,3,"div",2),2&e&&(i.Y8G("ngIf",t.errors.length>0),i.R7$(),i.Y8G("ngIf",t.warnings.length>0),i.R7$(),i.Y8G("ngIf",t.notices.length>0))},dependencies:[r.Sq,r.bT,d.W,c.B],encapsulation:2})}return FieldMessagesComponent})()},7745:(e,t,s)=>{"use strict";s.r(t),s.d(t,{ObjectFields:()=>dh});var i=s(60177),n=s(84341),l=s(18039),o=s(70569),a=s(71341),r=s(13921),d=s(54438),c=s(83935),u=s(766),m=s(15091);function h(e,t){if(1&e&&d.nrm(0,"field-label",4),2&e){const e=d.XpG();d.Y8G("fieldname",e.field.field)("fieldconfig",e.field.fieldconfig)}}let g=(()=>{class field{constructor(){this.field={}}static#e=this.ɵfac=function(e){return new(e||field)};static#t=this.ɵcmp=d.VBU({type:field,selectors:[["field"]],hostVars:2,hostBindings:function(e,t){2&e&&d.AVh("slds-form-element",!0)},inputs:{field:"field"},decls:4,vars:3,consts:[[1,"slds-form-element"],[3,"fieldname","fieldconfig",4,"ngIf"],[1,"slds-form-element__control"],[3,"field","fieldconfig"],[3,"fieldname","fieldconfig"]],template:function(e,t){1&e&&(d.j41(0,"div",0),d.DNE(1,h,1,2,"field-label",1),d.j41(2,"div",2),d.nrm(3,"field-container",3),d.k0s()()),2&e&&(d.R7$(),d.Y8G("ngIf",!0!==t.field.fieldconfig.hidelabel),d.R7$(2),d.Y8G("field",t.field.field)("fieldconfig",t.field.fieldconfig))},dependencies:[i.bT,u.b,m.y],encapsulation:2})}return field})();function p(e,t){if(1&e&&d.nrm(0,"field",4),2&e){const e=d.XpG().$implicit;d.Y8G("field",e)}}function f(e,t){if(1&e&&d.nrm(0,"field-set",5),2&e){const e=d.XpG().$implicit;d.Y8G("fieldset",e.fieldset)("fieldsetconfig",e.fieldconfig)}}function b(e,t){if(1&e&&(d.qex(0),d.DNE(1,p,1,1,"field",2)(2,f,1,2,"field-set",3),d.bVm()),2&e){const e=t.$implicit;d.R7$(),d.Y8G("ngIf",e.field),d.R7$(),d.Y8G("ngIf",!e.field)}}let y=(()=>{class fieldSet{constructor(e){this.metadata=e,this.fieldset="",this.fieldsetconfig={},this.fieldsetItems=[]}ngOnInit(){this.fieldsetItems=this.metadata.getFieldSetItems(this.fieldset)}getFormClass(){if(this.fieldsetconfig.formclass)return this.fieldsetconfig.formclass}static#e=this.ɵfac=function(e){return new(e||fieldSet)(d.rXU(c.yu))};static#t=this.ɵcmp=d.VBU({type:fieldSet,selectors:[["field-set"]],hostVars:2,hostBindings:function(e,t){2&e&&d.AVh("slds-form-element",!0)},inputs:{fieldset:"fieldset",fieldsetconfig:"fieldsetconfig"},decls:2,vars:2,consts:[[3,"ngClass"],[4,"ngFor","ngForOf"],[3,"field",4,"ngIf"],[3,"fieldset","fieldsetconfig",4,"ngIf"],[3,"field"],[3,"fieldset","fieldsetconfig"]],template:function(e,t){1&e&&(d.j41(0,"div",0),d.DNE(1,b,3,2,"ng-container",1),d.k0s()),2&e&&(d.Y8G("ngClass",t.getFormClass()),d.R7$(),d.Y8G("ngForOf",t.fieldsetItems))},dependencies:[i.YU,i.Sq,i.bT,fieldSet,g],encapsulation:2})}return fieldSet})(),v=(()=>{class fieldBlank{static#e=this.ɵfac=function(e){return new(e||fieldBlank)};static#t=this.ɵcmp=d.VBU({type:fieldBlank,selectors:[["field-blank"]],decls:1,vars:0,consts:[[1,"slds-truncate"]],template:function(e,t){1&e&&d.nrm(0,"div",0)},encapsulation:2})}return fieldBlank})();var k=s(69904),R=s(35911),I=s(25863);let x=(()=>{class fieldLabelPopover{constructor(e,t,s,i){this.language=e,this.elementRef=t,this.renderer=s,this.model=i,this.fieldlabel="",this.fieldname="",this.fieldconfig={},this.top="0px",this.left="0px"}ngOnInit(){this.top=this.event.pageY-22+"px",this.left=this.event.pageX+8+"px",this.clickListener=this.renderer.listen("document","click",(e=>this.onClick(e)))}ngOnDestroy(){this.clickListener&&this.clickListener(),this.contextmenulistener&&this.contextmenulistener()}onClick(e){this.elementRef.nativeElement.contains(e.target)||(this.clickListener&&this.clickListener(),this.contextmenulistener&&this.contextmenulistener(),this.close())}get popoverStyle(){return{top:this.top,left:this.left}}close(){this.self.destroy()}static#e=this.ɵfac=function(e){return new(e||fieldLabelPopover)(d.rXU(k.B),d.rXU(d.aKT),d.rXU(d.sFG),d.rXU(R.g,8))};static#t=this.ɵcmp=d.VBU({type:fieldLabelPopover,selectors:[["ng-component"]],decls:8,vars:3,consts:[["role","dialog",1,"slds-is-fixed","slds-popover","slds-nubbin_left-top",3,"ngStyle"],[1,"slds-button","slds-button_icon","slds-button_icon-small","slds-float_right","slds-popover__close",3,"click"],["icon","close"],[1,"slds-popover__header"],[1,"slds-text-heading_small"],[1,"slds-popover__body"]],template:function(e,t){1&e&&(d.j41(0,"div",0)(1,"button",1),d.bIt("click",(function(){return t.close()})),d.nrm(2,"system-button-icon",2),d.k0s(),d.j41(3,"header",3)(4,"h2",4),d.EFF(5),d.k0s()(),d.j41(6,"div",5),d.EFF(7),d.k0s()()),2&e&&(d.Y8G("ngStyle",t.popoverStyle),d.R7$(5),d.JRh(t.fieldlabel),d.R7$(2),d.SpI(" fieldname: ",t.fieldname," fieldtype: "))},dependencies:[i.B3,I.t],encapsulation:2})}return fieldLabelPopover})();var j=s(66935),G=s(41731),C=s(57363),w=s(50531),S=s(13562),E=s(18521),L=s(87395),D=s(89166),F=s(20941);const M=["textField"];function T(e,t){if(1&e&&d.nrm(0,"field-label",8),2&e){const e=d.XpG();d.Y8G("fieldname",e.fieldname)("fieldconfig",e.fieldconfig)}}function B(e,t){if(1&e){const e=d.RV6();d.j41(0,"div",9),d.bIt("click",(function(){d.eBV(e);const t=d.XpG();return d.Njj(t.toSpeech())})),d.nrm(1,"system-utility-icon",10),d.k0s()}}function $(e,t){if(1&e){const e=d.RV6();d.j41(0,"div",9),d.bIt("click",(function(){d.eBV(e);const t=d.XpG(2);return d.Njj(t.openTextSnippetModal())})),d.nrm(1,"system-utility-icon",11),d.k0s()}}function O(e,t){if(1&e){const e=d.RV6();d.j41(0,"div",9),d.bIt("click",(function(){d.eBV(e);const t=d.XpG(2);return d.Njj(t.openTemplateVariableHelper())})),d.nrm(1,"system-utility-icon",12),d.k0s()}}function X(e,t){if(1&e&&(d.qex(0),d.DNE(1,$,2,0,"div",4)(2,O,2,0,"div",4),d.bVm()),2&e){const e=d.XpG();d.R7$(),d.Y8G("ngIf",e.displayTextSnippet),d.R7$(),d.Y8G("ngIf",e.displayTemplateVariableHelper)}}function U(e,t){if(1&e&&(d.j41(0,"div",16),d.EFF(1),d.k0s()),2&e){const e=d.XpG(2);d.R7$(),d.JRh(e.value)}}function Y(e,t){if(1&e&&(d.j41(0,"div",18),d.EFF(1),d.k0s()),2&e){const e=d.XpG(3);d.Y8G("title",e.value),d.R7$(),d.SpI(" ",e.value," ")}}function N(e,t){if(1&e&&(d.j41(0,"div",18),d.nI1(1,"systemstriphtmltagspipe"),d.EFF(2),d.nI1(3,"systemstriphtmltagspipe"),d.k0s()),2&e){const e=d.XpG(3);d.Y8G("title",d.bMT(1,2,e.value)),d.R7$(2),d.SpI(" ",d.bMT(3,4,e.value)," ")}}function V(e,t){if(1&e&&d.DNE(0,Y,2,2,"div",17)(1,N,4,6,"div",17),2&e){const e=d.XpG(2);d.Y8G("ngIf",!e.striphtml),d.R7$(),d.Y8G("ngIf",e.striphtml)}}function A(e,t){if(1&e&&(d.j41(0,"field-generic-display",13),d.DNE(1,U,2,1,"div",14)(2,V,2,2,"ng-template",null,15,d.C5r),d.k0s()),2&e){const e=d.sdS(3),t=d.XpG();d.Y8G("fielddisplayclass",t.fielddisplayclass)("editable",t.isEditable())("fieldconfig",t.fieldconfig)("fieldid",t.fieldid),d.R7$(),d.Y8G("ngIf",!t.truncated)("ngIfElse",e)}}function P(e,t){if(1&e){const e=d.RV6();d.j41(0,"button",25),d.bIt("click",(function(){d.eBV(e);const t=d.XpG(2);return d.Njj(t.speechRecognitionStart())})),d.nrm(1,"system-button-icon",26),d.k0s()}2&e&&(d.R7$(),d.Y8G("size","small")("icon","unmuted"))}function z(e,t){if(1&e&&(d.j41(0,"span"),d.EFF(1),d.k0s()),2&e){const e=d.XpG(2);d.R7$(),d.Lme("",e.textLength,"/",e.fieldlength,"")}}function H(e,t){if(1&e){const e=d.RV6();d.j41(0,"div",19)(1,"textarea",20,21),d.mxI("ngModelChange",(function(t){d.eBV(e);const s=d.XpG();return d.DH7(s.value,t)||(s.value=t),d.Njj(t)})),d.bIt("system-resize",(function(t){d.eBV(e);const s=d.XpG();return d.Njj(s.resize(t))}))("change",(function(t){d.eBV(e);const s=d.XpG();return d.Njj(s.change(t))})),d.k0s(),d.DNE(4,P,2,2,"button",22),d.j41(5,"div",23),d.nrm(6,"field-messages",24),d.DNE(7,z,2,2,"span",5),d.k0s()()}if(2&e){const e=d.XpG();d.Y8G("ngClass",e.getFieldClass()),d.R7$(),d.Y8G("maxlength",e.maxLength),d.R50("ngModel",e.value),d.Y8G("ngStyle",e.getTextAreaStyle()),d.R7$(3),d.Y8G("ngIf",e.speechRecognition),d.R7$(2),d.Y8G("fieldname",e.fieldname),d.R7$(),d.Y8G("ngIf",e.fieldlength>0)}}let q=(()=>{class fieldText extends r.s{get displayTemplateVariableHelper(){return this.model?.module in{OutputTemplates:!0,EmailTemplates:!0,CampaignTasks:!0,LandingPages:!0,Mailboxes:!0,TextSnippets:!0}}get displayTextSnippet(){return this.metadata.checkModuleAcl("TextSnippets","list")&&this.metadata.checkModuleAcl("TextSnippets","view")}constructor(e,t,s,i,n,l,o,a){super(e,t,s,i,n),this.model=e,this.view=t,this.language=s,this.metadata=i,this.router=n,this.modal=l,this.viewContainerRef=o,this.helper=a,this.speechRecognition=!1,this.hideVolumeIcon=!1,this.fieldlength=0,this.striphtml=!1}ngOnInit(){super.ngOnInit(),(window.SpeechRecognition||window.webkitSpeechRecognition)&&(this.speechRecognition=this.fieldconfig.speechRecognition),this.hideVolumeIcon=this.fieldconfig.hideVolumeIcon,this.getFieldLength(),this.setStripHtml()}setStripHtml(){this.fieldconfig.striphtml&&(this.striphtml=this.fieldconfig.striphtml)}getFieldLength(){let e=this.metadata.getFieldDefs(this.model.module,this.fieldname);e.len&&(this.fieldlength=parseInt(e.len,10)),this.fieldconfig.maxlength&&(!this.fieldlength||parseInt(this.fieldconfig.maxlength,10)<this.fieldlength)&&(this.fieldlength=this.fieldconfig.maxlength)}get maxLength(){return this.fieldlength>0?this.fieldlength:65e3}resize(e){this.fixedHeight=e.height}getTextAreaStyle(){let e=this.fieldconfig.minheight?this.fieldconfig.minheight.replace("px",""):80,t={"min-height":e+"px","max-height":(this.fieldconfig.maxheight?this.fieldconfig.maxheight.replace("px",""):300)+"px",height:this.fixedHeight?this.fixedHeight+"px":e+"px"};return!this.fixedHeight&&this.textField&&this.fieldconfig.maxheight&&(t.height=(this.textField.element.nativeElement.scrollHeight+2<this.fieldconfig.maxheight?this.textField.element.nativeElement.scrollHeight+2:this.fieldconfig.maxheight)+"px"),t}toSpeech(){let e=new SpeechSynthesisUtterance;e.text=this.value,e.lang=this.getSpeechLanguage(),speechSynthesis.speak(e)}getSpeechLanguage(){let e=this.language.currentlanguage.split("_");return 2!=e.length?"en-US":e[0]+"-"+e[1].toUpperCase()}get truncated(){return!!this.fieldconfig.truncate}speechRecognitionStart(){this.modal.openModal("SpeechRecognition",!1).subscribe((e=>{e.instance.textfield=this.textField}))}change(e){e.target.value&&(this.value=e.target.value)}get textLength(){return this.value?this.value.length:0}get currentPosition(){return this.focuselement.element.nativeElement.selectionStart}openTemplateVariableHelper(){this.helper.addTemplateVariables(this.modal,this.model,this.viewContainerRef.injector).subscribe({next:e=>{const t=this.value??"";this.value=t.substring(0,this.currentPosition)+e+t.substring(this.currentPosition)},error:()=>{this.model.toast.sendToast("ERR_FAILED_TO_EXECUTE","error")}})}openTextSnippetModal(){const e=this.metadata.getComponentConfig("SystemRichTextEditor","TextSnippets")?.textSnippetsModuleFilter;this.helper.addTextSnippet("PLAIN",e,this.modal,this.model,this.viewContainerRef.injector).subscribe({next:e=>{const t=this.value??"";this.value=t.substring(0,this.currentPosition)+e+t.substring(this.currentPosition)},error:()=>{this.model.toast.sendToast("ERR_FAILED_TO_EXECUTE","error")}})}static#e=this.ɵfac=function(e){return new(e||fieldText)(d.rXU(R.g),d.rXU(G.U),d.rXU(k.B),d.rXU(c.yu),d.rXU(C.Ix),d.rXU(w.y),d.rXU(d.c1b),d.rXU(S.d))};static#t=this.ɵcmp=d.VBU({type:fieldText,selectors:[["field-text"]],viewQuery:function(e,t){if(1&e&&d.GBs(M,5,d.c1b),2&e){let e;d.mGM(e=d.lsd())&&(t.textField=e.first)}},features:[d.Vt3],decls:8,vars:5,consts:[[1,"slds-grid","slds-grid--vertical-align-center"],[1,"slds-col--bump-right"],[3,"fieldname","fieldconfig",4,"ngIf"],[1,"slds-grid","slds-gutters_xxx-small"],["class","slds-col",3,"click",4,"ngIf"],[4,"ngIf"],[3,"fielddisplayclass","editable","fieldconfig","fieldid",4,"ngIf"],["class","slds-form-element__control slds-is-relative","style","position:relative;",3,"ngClass",4,"ngIf"],[3,"fieldname","fieldconfig"],[1,"slds-col",3,"click"],["icon","volume_high","size","xx-small"],["icon","quick_text","size","xx-small"],["icon","variable","size","xx-small"],[3,"fielddisplayclass","editable","fieldconfig","fieldid"],["style","white-space: pre-line;",4,"ngIf","ngIfElse"],["truncateddisplay",""],[2,"white-space","pre-line"],["style","max-width: 200px; text-overflow: ellipsis","class","slds-truncate",3,"title",4,"ngIf"],[1,"slds-truncate",2,"max-width","200px","text-overflow","ellipsis",3,"title"],[1,"slds-form-element__control","slds-is-relative",2,"position","relative",3,"ngClass"],[1,"slds-textarea","slds-scrollable--y","slds-m-vertical--xx-small",3,"maxlength","ngModel","ngStyle","ngModelChange","system-resize","change"],["focus","","textField",""],["class","slds-button slds-button_small slds-button_icon slds-is-absolute","style","right:8px;",3,"click",4,"ngIf"],[1,"slds-grid","slds-grid--vertical-align-center","slds-grid--align-spread"],[1,"slds-grow",3,"fieldname"],[1,"slds-button","slds-button_small","slds-button_icon","slds-is-absolute",2,"right","8px",3,"click"],[3,"size","icon"]],template:function(e,t){1&e&&(d.j41(0,"div",0)(1,"div",1),d.DNE(2,T,1,2,"field-label",2),d.k0s(),d.j41(3,"div",3),d.DNE(4,B,2,0,"div",4)(5,X,3,2,"ng-container",5),d.k0s()(),d.DNE(6,A,4,6,"field-generic-display",6)(7,H,8,7,"div",7)),2&e&&(d.R7$(2),d.Y8G("ngIf",t.displayLabel),d.R7$(2),d.Y8G("ngIf",t.value&&!t.hideVolumeIcon),d.R7$(),d.Y8G("ngIf",t.isEditMode()&&t.isEditable()),d.R7$(),d.Y8G("ngIf",!t.isEditMode()),d.R7$(),d.Y8G("ngIf",t.isEditable()&&t.isEditMode()))},dependencies:[i.YU,i.bT,i.B3,n.me,n.BC,n.tU,n.vS,I.t,E.B,L.T,u.b,j.K,D.A,F.M],encapsulation:2})}return fieldText})();function J(e,t){if(1&e&&d.nrm(0,"field-label",3),2&e){const e=d.XpG();d.Y8G("fieldname",e.fieldname)("fieldconfig",e.fieldconfig)}}function W(e,t){if(1&e&&(d.j41(0,"field-generic-display",4)(1,"div",5),d.EFF(2),d.k0s()()),2&e){const e=d.XpG();d.Y8G("fielddisplayclass",e.fielddisplayclass)("editable",e.isEditable())("fieldconfig",e.fieldconfig),d.R7$(2),d.SpI(" ",e.value," ")}}function K(e,t){if(1&e){const e=d.RV6();d.j41(0,"div",6)(1,"input",7),d.mxI("ngModelChange",(function(t){d.eBV(e);const s=d.XpG();return d.DH7(s.value,t)||(s.value=t),d.Njj(t)})),d.k0s(),d.nrm(2,"field-messages",8),d.k0s()}if(2&e){const e=d.XpG();d.Y8G("ngClass",e.getFieldClass()),d.R7$(),d.Y8G("min",e.min)("max",e.max),d.R50("ngModel",e.value),d.R7$(),d.Y8G("fieldname",e.fieldname)}}let Q=(()=>{class fieldNumber extends r.s{constructor(e,t,s,i,n){super(e,t,s,i,n),this.model=e,this.view=t,this.language=s,this.metadata=i,this.router=n}get min(){return 0}get max(){return 120}static#e=this.ɵfac=function(e){return new(e||fieldNumber)(d.rXU(R.g),d.rXU(G.U),d.rXU(k.B),d.rXU(c.yu),d.rXU(C.Ix))};static#t=this.ɵcmp=d.VBU({type:fieldNumber,selectors:[["field-number"]],features:[d.Vt3],decls:3,vars:3,consts:[[3,"fieldname","fieldconfig",4,"ngIf"],[3,"fielddisplayclass","editable","fieldconfig",4,"ngIf"],["class","slds-form-element__control slds-grid slds-grid--align-spread slds-p-around--xx-small",3,"ngClass",4,"ngIf"],[3,"fieldname","fieldconfig"],[3,"fielddisplayclass","editable","fieldconfig"],[1,"slds-text-align_right"],[1,"slds-form-element__control","slds-grid","slds-grid--align-spread","slds-p-around--xx-small",3,"ngClass"],["type","number",1,"slds-input","slds-text-align_right",3,"min","max","ngModel","ngModelChange"],[3,"fieldname"]],template:function(e,t){1&e&&d.DNE(0,J,1,2,"field-label",0)(1,W,3,4,"field-generic-display",1)(2,K,3,5,"div",2),2&e&&(d.Y8G("ngIf",t.displayLabel),d.R7$(),d.Y8G("ngIf",!t.isEditMode()),d.R7$(),d.Y8G("ngIf",t.isEditable()&&t.isEditMode()))},dependencies:[i.YU,i.bT,n.me,n.Q0,n.BC,n.VZ,n.zX,n.vS,u.b,j.K,D.A],encapsulation:2})}return fieldNumber})();var Z=s(10467),ee=s(49722),te=s(41081),se=s(40553),ie=s(53584),ne=s(345),le=s(32062),oe=s(73978);function ae(e,t){if(1&e&&d.nrm(0,"field-label",5),2&e){const e=d.XpG();d.Y8G("fieldname",e.fieldname)("fieldconfig",e.fieldconfig)}}function re(e,t){if(1&e){const e=d.RV6();d.j41(0,"button",6),d.bIt("click",(function(){d.eBV(e);const t=d.XpG();return d.Njj(t.setEditMode())})),d.nrm(1,"system-button-icon",7),d.k0s()}2&e&&(d.R7$(),d.Y8G("icon","edit"))}function de(e,t){if(1&e&&(d.j41(0,"div",13),d.bIt("click",(function(e){return e.preventDefault()})),d.k0s()),2&e){const e=d.XpG(3);d.Y8G("innerHTML",e.parsedHtml,d.npT)}}function ce(e,t){if(1&e&&d.nrm(0,"iframe",14),2&e){const e=d.XpG(3);d.Y8G("src",e.sanitizedValue,d.f$h)("ngStyle",e.heightStyle)}}function ue(e,t){if(1&e&&(d.j41(0,"div"),d.DNE(1,de,1,1,"div",11)(2,ce,1,2,"iframe",12),d.k0s()),2&e){const e=d.XpG(2);d.R7$(),d.Y8G("ngIf",!e.fieldconfig.asiframe),d.R7$(),d.Y8G("ngIf",e.fieldconfig.asiframe)}}function me(e,t){if(1&e&&d.nrm(0,"div",15),2&e){const e=d.XpG(2);d.Y8G("title",e.value)("innerHTML",e.parsedHtml,d.npT)}}function he(e,t){if(1&e&&(d.j41(0,"field-generic-display",8),d.DNE(1,ue,3,2,"div",9)(2,me,1,2,"ng-template",null,10,d.C5r),d.k0s()),2&e){const e=d.sdS(3),t=d.XpG();d.Y8G("fielddisplayclass",t.fielddisplayclass)("editable",!1)("fieldconfig",t.fieldconfig),d.R7$(),d.Y8G("ngIf",!t.truncated)("ngIfElse",e)}}function ge(e,t){if(1&e&&(d.j41(0,"option",29),d.nrm(1,"system-label",30),d.k0s()),2&e){const e=t.$implicit;d.Y8G("value",e.id),d.R7$(),d.Y8G("label",e.label)}}function pe(e,t){if(1&e){const e=d.RV6();d.j41(0,"li")(1,"div",20)(2,"label",21),d.nrm(3,"system-label",22),d.EFF(4," : "),d.k0s(),d.j41(5,"div",23)(6,"div",24)(7,"select",25),d.mxI("ngModelChange",(function(t){d.eBV(e);const s=d.XpG(2);return d.DH7(s.selectedSignatureId,t)||(s.selectedSignatureId=t),d.Njj(t)})),d.bIt("ngModelChange",(function(){d.eBV(e);const t=d.XpG(2);return d.Njj(t.renderSelectedSignature())})),d.j41(8,"option",26),d.nrm(9,"system-label",27),d.k0s(),d.DNE(10,ge,2,2,"option",28),d.k0s()()()()()}if(2&e){const e=d.XpG(2);d.R7$(7),d.R50("ngModel",e.selectedSignatureId),d.Y8G("disabled",0==(null==e.signatures?null:e.signatures.length)),d.R7$(3),d.Y8G("ngForOf",e.signatures)}}function fe(e,t){if(1&e){const e=d.RV6();d.j41(0,"div",16)(1,"system-html-editor",17),d.mxI("ngModelChange",(function(t){d.eBV(e);const s=d.XpG();return d.DH7(s.value,t)||(s.value=t),d.Njj(t)})),d.bIt("save$",(function(t){d.eBV(e);const s=d.XpG();return d.Njj(s.save(t))})),d.DNE(2,pe,11,3,"li",18),d.k0s(),d.nrm(3,"field-messages",19),d.k0s()}if(2&e){const e=d.XpG();d.Y8G("ngClass",e.getFieldClass()),d.R7$(),d.R50("ngModel",e.value),d.Y8G("extendedmode",!e.fieldconfig.simplemode)("innerheight",e.fieldconfig.innerheight)("useMedialFile",e.metadata.checkModuleAcl("MediaFiles","list")&&e.metadata.checkModuleAcl("MediaFiles","view")),d.R7$(),d.Y8G("ngIf",null==e.fieldconfig?null:e.fieldconfig.useSignature),d.R7$(),d.Y8G("fieldname",e.fieldname)}}let be=(()=>{class fieldHtml extends r.s{constructor(e,t,s,i,n,l,o,a,r,d,c,u,m){super(e,t,s,i,o),this.model=e,this.view=t,this.language=s,this.metadata=i,this.backend=n,this.toast=l,this.router=o,this.injector=a,this.broadcast=r,this.configurationService=d,this.modal=c,this.cdRef=u,this.sanitized=m,this.selectedSignatureId="",this.signatures=[],this.parsedHtml="",this.fullValue="",this.stylesheetField="",this.stylesheetToUse="",this.signaturePreviousPosition=-1,this.stylesheets=this.metadata.getHtmlStylesheetNames()}get heightStyle(){return{height:this.fieldconfig.height?this.fieldconfig.height:"500px"}}get styleTag(){return this.stylesheetId?"<style>"+this.metadata.getHtmlStylesheetCode(this.stylesheetId)+"</style>":""}get stylesheetId(){return _.isEmpty(this.model.getField(this.stylesheetField))?this.stylesheetId=this.stylesheetToUse:this.model.getField(this.stylesheetField)}set stylesheetId(e){e&&this.model.setField(this.stylesheetField,e)}get value(){return this.model.getField(this.fieldname)}set value(e){this.model.setField(this.fieldname,e),this.setHtmlValue()}get truncated(){return!!this.fieldconfig.truncate}ngOnInit(){var e=this;return(0,Z.A)((function*(){e.setStylesheetField(),e.setStylesheetsToUse(),e.setHtmlValue(),e.fieldconfig?.useSignature&&(e.model.getField("mailbox_id")&&(yield e.loadMailboxSignature()),e.loadUserSignature()),e.modelChangesSubscriber()}))()}renderSelectedSignature(){if(this.clearSignature(),!this.selectedSignatureId)return;this.value||(this.value="");const e=`<div data-signature="" style="margin: 10px 0">${this.signatures.find((e=>e.id==this.selectedSignatureId)).content}</div>`;this.signaturePreviousPosition>-1?this.value=`${this.value.slice(0,this.signaturePreviousPosition)} ${e} ${this.value.slice(e.length+this.signaturePreviousPosition)}`:this.value=`<p><br></p> ${e} ${this.value}`}setEditMode(){this.model.startEdit(),this.view.setEditMode(),this.cdRef.detectChanges()}encodeHtml(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}loadMailboxSignature(){if(!this.isEditMode())return;const e=this.model.getField("mailbox_id");if(!e)return;const t=this.configurationService.getData("mailbox_signature_"+e);if(!t)return this.backend.get("Mailboxes",e).subscribe({next:t=>{t.email_signature&&(this.configurationService.setData("mailbox_signature_"+e,t.email_signature),this.addSignature(e,t.email_signature,"LBL_MAILBOX"),this.selectedSignatureId=e,this.renderSelectedSignature())}});this.addSignature(e,t,"LBL_MAILBOX"),this.selectedSignatureId=e,this.renderSelectedSignature()}addSignature(e,t,s){const i=this.signatures.find((t=>t.id==e));i?i.content=t:this.signatures.push({id:e,content:t,label:s})}loadUserSignature(){if(!this.isEditMode())return;const e=this.configurationService.getData("usersignature");if(!e)return;this.signatures.length;this.addSignature("user",e,"LBL_MY_SIGNATURE")}clearSignature(){if(!this.value)return;const e=document.createElement("div");e.innerHTML=this.value,Array.from(e.querySelectorAll("div[data-signature]")).forEach((t=>{this.signaturePreviousPosition=e.innerHTML.indexOf(t.outerHTML),t.parentNode.removeChild(t)})),this.value=e.innerHTML}setStylesheetField(){let e=this.metadata.getFieldDefs(this.model.module,this.fieldname);_.isEmpty(e.stylesheet_id_field)||(this.stylesheetField=e.stylesheet_id_field)}setStylesheetsToUse(){this.useStylesheets=!_.isEmpty(this.stylesheetField)&&!_.isEmpty(this.stylesheets),this.useStylesheets&&(1===this.stylesheets.length?this.stylesheetToUse=this.stylesheets[0].id:_.isEmpty(this.fieldconfig.stylesheetId)?this.stylesheetToUse=this.metadata.getHtmlStylesheetToUse(this.model.module,this.fieldname):this.stylesheetToUse=this.fieldconfig.stylesheetId)}setSanitizedValue(){return this.value&&(this.value.includes("</html>")?this.fullValue=this.value:this.fullValue=`<html><head><base target="_blank">${this.styleTag}</head><body class="spice">${this.value}</body></html>`),this.fullValue!=this.fullValue_cached&&(this.sanitizedValue=this.sanitized.bypassSecurityTrustResourceUrl(this.fullValue?"data:text/html;charset=UTF-8,"+encodeURIComponent(this.fullValue):""),this.fullValue_cached=this.fullValue),this.sanitizedValue}modelChangesSubscriber(){this.subscriptions.add(this.model.observeFieldChanges(this.fieldname).subscribe({next:e=>{this.setHtmlValue()}})),this.subscriptions.add(this.model.observeFieldChanges("mailbox_id").subscribe({next:e=>{this.fieldconfig?.useSignature&&e&&!this.signatures.some((t=>t.id==e))&&this.loadMailboxSignature()}}))}setHtmlValue(){let e=/<code>[\s\S]*?<\/code>/g,t=e.exec(this.value);for(;null!=t;)this.value=this.value.replace(t,this.encodeHtml(t)).replace("&lt;code&gt;","<code>").replace("&lt;/code&gt;","</code>"),t=e.exec(this.value);this.parsedHtml=this.sanitized.bypassSecurityTrustHtml(this.value),this.setSanitizedValue()}save(e){let t={date_modified:this.model.getField("date_modified"),[this.fieldname]:e};this.backend.save(this.model.module,this.model.id,t).subscribe({next:e=>{this.model.endEdit(),this.model.setField("date_modified",e.date_modified,!0),this.value=e[this.fieldname],this.model.startEdit(),this.toast.sendToast(this.language.getLabel("LBL_DATA_SAVED")+".","success")},error:e=>{this.toast.sendToast(this.language.getLabel("LBL_ERROR")+" "+e.status,"error",e.error.error.message)}})}static#e=this.ɵfac=function(e){return new(e||fieldHtml)(d.rXU(R.g),d.rXU(G.U),d.rXU(k.B),d.rXU(c.yu),d.rXU(ee.H),d.rXU(te.o),d.rXU(C.Ix),d.rXU(d.zZn),d.rXU(se.m),d.rXU(ie.i),d.rXU(w.y),d.rXU(d.gRc),d.rXU(ne.up))};static#t=this.ɵcmp=d.VBU({type:fieldHtml,selectors:[["field-html"]],features:[d.Vt3],decls:6,vars:4,consts:[[1,"slds-grid","slds-grid--vertical-align-center","slds-grid--align-spread"],[3,"fieldname","fieldconfig",4,"ngIf"],["class","slds-button slds-button--icon slds-m-left--xx-small spice-hover-button",3,"click",4,"ngIf"],[3,"fielddisplayclass","editable","fieldconfig",4,"ngIf"],["class","slds-form-element__control",3,"ngClass",4,"ngIf"],[3,"fieldname","fieldconfig"],[1,"slds-button","slds-button--icon","slds-m-left--xx-small","spice-hover-button",3,"click"],[3,"icon"],[3,"fielddisplayclass","editable","fieldconfig"],[4,"ngIf","ngIfElse"],["truncateddisplay",""],["class","slds-size--1-of-1 slds-rich-text-editor__output","style","white-space: normal; resize: vertical; overflow-y: auto;",3,"innerHTML","click",4,"ngIf"],["style","resize: vertical;","width","100%","frameborder","0","seamless","true","sandbox","",3,"src","ngStyle",4,"ngIf"],[1,"slds-size--1-of-1","slds-rich-text-editor__output",2,"white-space","normal","resize","vertical","overflow-y","auto",3,"innerHTML","click"],["width","100%","frameborder","0","seamless","true","sandbox","",2,"resize","vertical",3,"src","ngStyle"],[1,"slds-truncate",2,"max-width","200px","text-overflow","ellipsis",3,"title","innerHTML"],[1,"slds-form-element__control",3,"ngClass"],[3,"ngModel","extendedmode","innerheight","useMedialFile","ngModelChange","save$"],[4,"ngIf"],[3,"fieldname"],[1,"slds-form-element","slds-grid"],[1,"slds-form-element__label"],["label","LBL_SIGNATURE"],[1,"slds-form-element__control"],[1,"slds-select_container"],[1,"slds-select",3,"ngModel","disabled","ngModelChange"],["value",""],["label","LBL_NONE"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[3,"label"]],template:function(e,t){1&e&&(d.j41(0,"div",0)(1,"div"),d.DNE(2,ae,1,2,"field-label",1),d.k0s(),d.DNE(3,re,2,1,"button",2),d.k0s(),d.DNE(4,he,4,5,"field-generic-display",3)(5,fe,4,7,"div",4)),2&e&&(d.R7$(2),d.Y8G("ngIf",t.displayLabel),d.R7$(),d.Y8G("ngIf",!t.isEditMode()&&t.isEditable()),d.R7$(),d.Y8G("ngIf",!t.isEditMode()),d.R7$(),d.Y8G("ngIf",t.isEditable()&&t.isEditMode()))},dependencies:[i.YU,i.Sq,i.bT,i.B3,n.xH,n.y7,n.wz,n.BC,n.vS,I.t,le.W,oe.U,u.b,j.K,D.A],encapsulation:2})}return fieldHtml})();var ye=s(4921);function ve(e,t){if(1&e&&(d.j41(0,"option",6),d.EFF(1),d.k0s()),2&e){const e=t.$implicit;d.FS9("value",e.id),d.R7$(),d.JRh(e.name)}}function _e(e,t){if(1&e){const e=d.RV6();d.j41(0,"select",3),d.mxI("ngModelChange",(function(t){d.eBV(e);const s=d.XpG();return d.DH7(s.stylesheetId,t)||(s.stylesheetId=t),d.Njj(t)})),d.bIt("change",(function(){d.eBV(e);const t=d.XpG();return d.Njj(t.changeStylesheet())})),d.nrm(1,"option",4),d.DNE(2,ve,2,2,"option",5),d.k0s()}if(2&e){const e=d.XpG();d.R50("ngModel",e.stylesheetId),d.R7$(2),d.Y8G("ngForOf",e.stylesheets)}}let ke=(()=>{class fieldHtmlEditor{get content(){return this.fieldvalue}set content(e){this.fieldvalue=e,this.contentchange.emit(e)}set input_stylesheetId(e){this.stylesheetIdValue=e}set stylesheetId(e){this.stylesheetIdValue=e,this.stylesheetIdChange.emit(e)}get stylesheetId(){return this.stylesheetIdValue}constructor(e,t,s,i){this.metadata=e,this.footer=t,this.configurationService=s,this.modal=i,this.fieldvalue="",this.fieldid="",this.fieldconfig={},this.editor=null,this.stylesheets=[],this.stylesheetIdValue="",this.tinymceConfig={remove_script_host:!0,relative_urls:!1,menubar:!1,statusbar:!0,resize:!0,browser_spellcheck:!0,image_advtab:!0,paste_as_text:!0,paste_filter_drop:!0,plugins:["link","code","image","lists","paste","table"],toolbar:"undo redo | formatselect | styleselect bold italic removeformat | bullist numlist | link image table | code",skin_url:"vendor/tinymce/skins/lightgray",setup:e=>{this.editor=e,e.on("change",(()=>{const t=e.getContent();this.content=t})),e.on("init",(()=>{this.fieldvalue&&this.editor.setContent(this.fieldvalue)}))},formats:{alignleft:{selector:"p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li,table,img",classes:"align-left"},aligncenter:{selector:"p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li,table,img",classes:"align-center"},alignright:{selector:"p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li,table,img",classes:"align-right"},alignjustify:{selector:"p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li,table,img",classes:"align-justify"},strikethrough:{inline:"del"}},style_formats:[{title:"Inline",items:[{title:"fett",icon:"bold",format:"bold"},{title:"kursiv",icon:"italic",format:"italic"},{title:"unterstrichen",icon:"underline",format:"underline"},{title:"strikethrough",icon:"strikethrough",format:"strikethrough"},{title:"hochgestellt",icon:"superscript",format:"superscript"},{title:"tiefgestellt",icon:"subscript",format:"subscript"}]},{title:"Ausrichtung",items:[{title:"links",icon:"alignleft",format:"alignleft"},{title:"mittig",icon:"aligncenter",format:"aligncenter"},{title:"rechts",icon:"alignright",format:"alignright"},{title:"Blocksatz",icon:"alignjustify",format:"alignjustify"}]}],style_formats_merge:!1,body_class:"spice"},this.oldStylesheetId="",this.contentchange=new d.bkB,this.stylesheetIdChange=new d.bkB,this.stylesheets=this.metadata.getHtmlStylesheetNames()}ngOnInit(){this.tinymceConfig.selector="#"+this.fieldid,this.tinymceConfig.document_base_url=this.configurationService.getFrontendUrl()}ngAfterViewInit(){this.metadata.loadLibs("tinymce").subscribe((e=>{this.useStylesheets&&this.setStylesheet(),tinymce.init(this.tinymceConfig)}))}changeStylesheet(){this.editor&&tinymce.remove(this.editor),this.setStylesheet(),tinymce.init(this.tinymceConfig)}setStylesheet(){let e=[];if(this.oldStylesheetId=this.stylesheetId,_.isEmpty(this.stylesheetId))delete this.tinymceConfig.content_style;else{if(e=this.metadata.getHtmlFormats(this.stylesheetId),e.length){let t=0;this.tinymceConfig.block_formats="",this.tinymceConfig.extended_valid_elements=[],this.tinymceConfig.custom_elements=[],this.tinymceConfig.block_formats+="Absatz=p;",this.tinymceConfig.style_formats.push({title:"Weiteres",items:[]});for(let s of e)if(_.isEmpty(s.block))this.tinymceConfig.style_formats[2].items.push({title:s.name,inline:s.inline,classes:s.classes,styles:s.styles});else{let e;t++,this.tinymceConfig.formats[e="custom_format_"+t]={title:s.name,inline:s.inline,block:s.block,classes:s.classes,styles:s.styles,wrapper:Boolean(Number(s.wrapper))},this.tinymceConfig.block_formats+=s.name+"="+e+";",this.tinymceConfig.extended_valid_elements.indexOf(s.block)&&this.tinymceConfig.extended_valid_elements.push(s.block),this.tinymceConfig.custom_elements.indexOf(s.block)&&this.tinymceConfig.custom_elements.push(s.block)}0===this.tinymceConfig.style_formats[2].items.length&&this.tinymceConfig.style_formats.splice(2,1)}this.tinymceConfig.content_style=this.metadata.getHtmlStylesheetCode(this.stylesheetId)}}fullScreen(){this.modal.openModal("SystemTinyMCEModal").subscribe((e=>{e.instance.content=this.fieldvalue,e.instance.updateContent.subscribe((e=>{this.fieldvalue=e,this.editor.setContent(e)}))}))}ngOnDestroy(){tinymce.remove(this.editor)}ngOnChanges(){this.editor&&this.fieldvalue&&this.editor.getContent()!==this.fieldvalue&&this.editor.setContent(this.fieldvalue),this.oldStylesheetId.length&&this.oldStylesheetId!=this.stylesheetId&&this.changeStylesheet()}static#e=this.ɵfac=function(e){return new(e||fieldHtmlEditor)(d.rXU(c.yu),d.rXU(ye.q),d.rXU(ie.i),d.rXU(w.y))};static#t=this.ɵcmp=d.VBU({type:fieldHtmlEditor,selectors:[["field-html-editor"]],inputs:{fieldvalue:"fieldvalue",fieldid:"fieldid",fieldconfig:"fieldconfig",useStylesheetSwitcher:"useStylesheetSwitcher",useStylesheets:"useStylesheets",input_stylesheetId:[d.Mj6.None,"stylesheetId","input_stylesheetId"]},outputs:{contentchange:"contentchange",stylesheetIdChange:"stylesheetIdChange"},features:[d.OA$],decls:3,vars:2,consts:[[1,"slds-m-vertical--xx-small"],[1,"slds-textarea","slds-scrollable--y","slds-m-vertical--xx-small",2,"height","250px",3,"id"],["class","slds-select slds-m-top--x-small",3,"ngModel","ngModelChange","change",4,"ngIf"],[1,"slds-select","slds-m-top--x-small",3,"ngModel","ngModelChange","change"],["value",""],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(e,t){1&e&&(d.j41(0,"div",0),d.nrm(1,"textarea",1),d.DNE(2,_e,3,2,"select",2),d.k0s()),2&e&&(d.R7$(),d.Y8G("id",t.fieldid),d.R7$(),d.Y8G("ngIf",t.useStylesheetSwitcher))},dependencies:[i.Sq,i.bT,n.xH,n.y7,n.wz,n.BC,n.vS],styles:["\n\n\n\n\n\n\n\n\n\n\n[_nghost-%COMP%]   .mce-ico[_ngcontent-%COMP%]{color:#54698d;font-size:12px}","\n\n\n\n\n\n\n\n\n\n\n[_nghost-%COMP%]   .mce-text[_ngcontent-%COMP%]{color:#54698d;font-size:12px}","\n\n\n\n\n\n\n\n\n\n\n[_nghost-%COMP%]   .mce-btn[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{color:#54698d;font-size:12px}","\n\n\n\n\n\n\n\n\n\n\n[_nghost-%COMP%]   .mce-tinymce[_ngcontent-%COMP%]{border-radius:4px}","\n\n\n\n\n\n\n\n\n\n\n[_nghost-%COMP%]   .mce-widget[_ngcontent-%COMP%]{font-family:Titillium Web,sans-serif}"]})}return fieldHtmlEditor})();const Re=["editor"];let Ie=(()=>{class fieldWYSIWYGEditor{constructor(e,t,s){this.model=e,this.view=t,this.language=s,this.fieldname="",this.fieldSelection=void 0}get fieldcontent(){return this.model.getField(this.fieldname)}ngAfterViewInit(){this.editor.element.nativeElement.innerHTML=this.model.getField(this.fieldname)}eventHandler(e){this.fieldSelection=window.getSelection(),this.model.setField(this.fieldname,e.srcElement.innerHTML)}static#e=this.ɵfac=function(e){return new(e||fieldWYSIWYGEditor)(d.rXU(R.g),d.rXU(G.U),d.rXU(k.B))};static#t=this.ɵcmp=d.VBU({type:fieldWYSIWYGEditor,selectors:[["field-wysiwyg-editor"]],viewQuery:function(e,t){if(1&e&&d.GBs(Re,7,d.c1b),2&e){let e;d.mGM(e=d.lsd())&&(t.editor=e.first)}},inputs:{fieldname:"fieldname"},decls:54,vars:9,consts:[[1,"demo-only",2,"min-height","180px"],[1,"slds-rich-text-editor","slds-form-element","slds-grid","slds-grid_vertical","slds-nowrap"],["role","toolbar",1,"slds-rich-text-editor__toolbar","slds-shrink-none"],["aria-label","Format text",1,"slds-button-group-list"],["tabindex","0","title","Provide description of action",1,"slds-button","slds-button_icon","slds-button_icon-border-filled"],[3,"icon"],[1,"slds-assistive-text"],["tabindex","-1","title","Provide description of action",1,"slds-button","slds-button_icon","slds-button_icon-border-filled"],["aria-label","Format body",1,"slds-button-group-list"],["aria-label","Remove Formatting",1,"slds-button-group-list"],[1,"slds-rich-text-editor__textarea","slds-grid"],["aria-label","Compose text","contenteditable","true",1,"slds-rich-text-area__content","slds-text-color_weak","slds-grow",3,"input"],["editor",""]],template:function(e,t){1&e&&(d.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"ul",3)(4,"li")(5,"button",4),d.nrm(6,"system-button-icon",5),d.j41(7,"span",6),d.EFF(8,"Bold"),d.k0s()()(),d.j41(9,"li")(10,"button",7),d.nrm(11,"system-button-icon",5),d.j41(12,"span",6),d.EFF(13,"Italic"),d.k0s()()(),d.j41(14,"li")(15,"button",7),d.nrm(16,"system-button-icon",5),d.j41(17,"span",6),d.EFF(18,"Underline"),d.k0s()()(),d.j41(19,"li")(20,"button",7),d.nrm(21,"system-button-icon",5),d.j41(22,"span",6),d.EFF(23,"Strike Through"),d.k0s()()()(),d.j41(24,"ul",8)(25,"li")(26,"button",7),d.nrm(27,"system-button-icon",5),d.j41(28,"span",6),d.EFF(29,"Bulleted List"),d.k0s()()(),d.j41(30,"li")(31,"button",7),d.nrm(32,"system-button-icon",5),d.j41(33,"span",6),d.EFF(34,"Numbered List"),d.k0s()()(),d.j41(35,"li")(36,"button",7),d.nrm(37,"system-button-icon",5),d.j41(38,"span",6),d.EFF(39,"Indent"),d.k0s()()(),d.j41(40,"li")(41,"button",7),d.nrm(42,"system-button-icon",5),d.j41(43,"span",6),d.EFF(44,"Outdent"),d.k0s()()()(),d.j41(45,"ul",9)(46,"li")(47,"button",7),d.nrm(48,"system-button-icon",5),d.j41(49,"span",6),d.EFF(50,"Remove Formatting"),d.k0s()()()()(),d.j41(51,"div",10)(52,"div",11,12),d.bIt("input",(function(e){return t.eventHandler(e)})),d.k0s()()()()),2&e&&(d.R7$(6),d.Y8G("icon","bold"),d.R7$(5),d.Y8G("icon","italic"),d.R7$(5),d.Y8G("icon","underline"),d.R7$(5),d.Y8G("icon","strikethrough"),d.R7$(6),d.Y8G("icon","richtextbulletedlist"),d.R7$(5),d.Y8G("icon","richtextnumberedlist"),d.R7$(5),d.Y8G("icon","richtextindent"),d.R7$(5),d.Y8G("icon","richtextoutdent"),d.R7$(6),d.Y8G("icon","remove_formatting"))},dependencies:[I.t],encapsulation:2})}return fieldWYSIWYGEditor})();var xe=s(48849),je=s(38431),Ge=s(2265);function Ce(e,t){if(1&e&&d.nrm(0,"field-label",3),2&e){const e=d.XpG();d.Y8G("fieldname",e.fieldname)("fieldconfig",e.fieldconfig)}}function we(e,t){if(1&e&&(d.j41(0,"field-generic-display",4)(1,"div",5),d.nrm(2,"system-display-number",6),d.k0s()()),2&e){const e=d.XpG();d.Y8G("fielddisplayclass",e.fielddisplayclass)("fieldconfig",e.fieldconfig)("editable",e.isEditable()),d.R7$(2),d.Y8G("number",e.value)("precision",e.precision)}}function Se(e,t){if(1&e){const e=d.RV6();d.j41(0,"div",7)(1,"div",8)(2,"system-input-number",9),d.mxI("ngModelChange",(function(t){d.eBV(e);const s=d.XpG();return d.DH7(s.value,t)||(s.value=t),d.Njj(t)})),d.k0s()(),d.nrm(3,"field-messages",10),d.k0s()}if(2&e){const e=d.XpG();d.Y8G("ngClass",e.getFieldClass()),d.R7$(2),d.R50("ngModel",e.value),d.Y8G("asNumber",!0)("precision",e.precision),d.R7$(),d.Y8G("fieldname",e.fieldname)}}let Ee=(()=>{class fieldFloat extends r.s{constructor(e,t,s,i,n,l){super(e,t,s,i,n),this.model=e,this.view=t,this.language=s,this.metadata=i,this.router=n,this.userpreferences=l,this.precision=0}ngOnInit(){this.precision=void 0===this.fieldconfig.precision||""===this.fieldconfig.precision?parseInt(this.userpreferences.toUse.currency_significant_digits,10):parseInt(this.fieldconfig.precision,10)}static#e=this.ɵfac=function(e){return new(e||fieldFloat)(d.rXU(R.g),d.rXU(G.U),d.rXU(k.B),d.rXU(c.yu),d.rXU(C.Ix),d.rXU(xe.S))};static#t=this.ɵcmp=d.VBU({type:fieldFloat,selectors:[["field-float"]],features:[d.Vt3],decls:3,vars:3,consts:[[3,"fieldname","fieldconfig",4,"ngIf"],[3,"fielddisplayclass","fieldconfig","editable",4,"ngIf"],["class","slds-form-element__control",3,"ngClass",4,"ngIf"],[3,"fieldname","fieldconfig"],[3,"fielddisplayclass","fieldconfig","editable"],[1,"slds-text-align_right"],[3,"number","precision"],[1,"slds-form-element__control",3,"ngClass"],[1,"slds-form-element","slds-m-vertical--xx-small"],[3,"ngModel","asNumber","precision","ngModelChange"],[3,"fieldname"]],template:function(e,t){1&e&&d.DNE(0,Ce,1,2,"field-label",0)(1,we,3,5,"field-generic-display",1)(2,Se,4,5,"div",2),2&e&&(d.Y8G("ngIf",t.displayLabel),d.R7$(),d.Y8G("ngIf",!t.isEditMode()),d.R7$(),d.Y8G("ngIf",t.isEditable()&&t.isEditMode()))},dependencies:[i.YU,i.bT,n.BC,n.vS,je.B,Ge.N,u.b,j.K,D.A],encapsulation:2})}return fieldFloat})();var Le=s(88421);function De(e,t){if(1&e&&d.nrm(0,"field-label",3),2&e){const e=d.XpG();d.Y8G("fieldname",e.fieldname)("fieldconfig",e.fieldconfig)}}function Fe(e,t){if(1&e&&(d.j41(0,"field-generic-display",4)(1,"div",5),d.nrm(2,"system-display-number",6),d.k0s()()),2&e){const e=d.XpG();d.Y8G("fielddisplayclass",e.fielddisplayclass)("fieldconfig",e.fieldconfig)("editable",e.isEditable()),d.R7$(2),d.Y8G("number",e.value)("currency_id",e.currencyId)("precision",e.precision)}}function Me(e,t){if(1&e&&(d.j41(0,"div",16),d.EFF(1),d.k0s()),2&e){const e=d.XpG(3);d.R7$(),d.SpI(" ",e.getCurrencySymbol(),"  ")}}function Te(e,t){if(1&e&&(d.j41(0,"option",21),d.EFF(1),d.k0s()),2&e){const e=t.$implicit;d.Y8G("value",e.id),d.R7$(),d.Lme("",e.iso," (",e.symbol,") ")}}function Be(e,t){if(1&e){const e=d.RV6();d.j41(0,"div",17)(1,"div",18)(2,"select",19),d.mxI("ngModelChange",(function(t){d.eBV(e);const s=d.XpG(3);return d.DH7(s.currencyId,t)||(s.currencyId=t),d.Njj(t)})),d.DNE(3,Te,2,3,"option",20),d.k0s()()()}if(2&e){const e=d.XpG(3);d.R7$(2),d.R50("ngModel",e.currencyId),d.R7$(),d.Y8G("ngForOf",e.currencies)}}const $e=e=>({"slds-size--1-of-4":e});function Oe(e,t){if(1&e&&(d.j41(0,"div",13),d.DNE(1,Me,2,1,"div",14)(2,Be,4,2,"div",15),d.k0s()),2&e){const e=d.XpG(2);d.Y8G("ngClass",d.eq3(3,$e,!e.fieldconfig.currencyReadonly)),d.R7$(),d.Y8G("ngIf",e.fieldconfig.currencyReadonly),d.R7$(),d.Y8G("ngIf",!e.fieldconfig.currencyReadonly)}}function Xe(e,t){if(1&e){const e=d.RV6();d.j41(0,"system-input-number",22),d.mxI("ngModelChange",(function(t){d.eBV(e);const s=d.XpG(2);return d.DH7(s.value,t)||(s.value=t),d.Njj(t)})),d.k0s()}if(2&e){const e=d.XpG(2);d.R50("ngModel",e.value),d.Y8G("asNumber",!0)("precision",e.precision)}}function Ue(e,t){if(1&e){const e=d.RV6();d.j41(0,"system-input-number",23),d.mxI("ngModelChange",(function(t){d.eBV(e);const s=d.XpG(2);return d.DH7(s.value,t)||(s.value=t),d.Njj(t)})),d.k0s()}if(2&e){const e=d.XpG(2);d.R50("ngModel",e.value),d.Y8G("asNumber",!0)("precision",e.precision)}}function Ye(e,t){if(1&e&&(d.j41(0,"div",7)(1,"div",8),d.DNE(2,Oe,3,5,"div",9),d.j41(3,"div",10),d.DNE(4,Xe,1,3,"system-input-number",11)(5,Ue,1,3),d.k0s()(),d.nrm(6,"field-messages",12),d.k0s()),2&e){const e=d.XpG();d.Y8G("ngClass",e.getFieldClass()),d.R7$(2),d.Y8G("ngIf",e.currencyidfield),d.R7$(2),d.vxM(4,e.displayCalculator?4:5),d.R7$(2),d.Y8G("fieldname",e.fieldname)}}let Ne=(()=>{class fieldCurrency extends r.s{constructor(e,t,s,i,n,l,o){super(e,t,s,i,n),this.model=e,this.view=t,this.language=s,this.metadata=i,this.router=n,this.currency=l,this.userpreferences=o,this.currencies=[],this.precision=0,this.currencyFormat=!0,this.currencyidfield="",this.displayCalculator=!1,this.currencies=this.currency.getCurrencies()}ngOnInit(){if(this.precision=void 0===this.fieldconfig.precision||""===this.fieldconfig.precision?parseInt(this.userpreferences.toUse.currency_significant_digits,10):parseInt(this.fieldconfig.precision,10),this.currencyidfield=this.fieldconfig.field_currencyid,!this.currencyidfield){this.metadata.getModuleFields(this.model.module).currency_id&&(this.currencyidfield="currency_id")}this.setDefaultCurrencyId(),this.setCurrencyFromPreferences(),this.fieldconfig.withcalculator&&(this.displayCalculator=!0)}setDefaultCurrencyId(){if(this.currencyidfield&&!this.model.getField(this.currencyidfield)){let e=this.userpreferences.getPreference("currency");this.currencyId=e||"-99"}}set currencyId(e){this.currencyidfield&&this.model.setField(this.currencyidfield,e)}get currencyId(){return this.currencyidfield?this.model.getField(this.currencyidfield):-99}getCurrencySymbol(){let e,t=-99;if(this.currencyidfield){if(!this.model.getField(this.currencyidfield))return"";t=this.model.getField(this.currencyidfield)}return this.currencies.some((s=>{if(s.id==t)return e=s.symbol,!0})),e}handleViewModeChange(e){"edit"==e&&this.setCurrencyFromPreferences(),super.handleViewModeChange(e)}setCurrencyFromPreferences(){this.currencyidfield&&!this.model.getField(this.currencyidfield)&&this.model.setField(this.currencyidfield,this.userpreferences.toUse.currency)}static#e=this.ɵfac=function(e){return new(e||fieldCurrency)(d.rXU(R.g),d.rXU(G.U),d.rXU(k.B),d.rXU(c.yu),d.rXU(C.Ix),d.rXU(Le.G),d.rXU(xe.S))};static#t=this.ɵcmp=d.VBU({type:fieldCurrency,selectors:[["field-currency"]],features:[d.Vt3],decls:3,vars:3,consts:[[3,"fieldname","fieldconfig",4,"ngIf"],[3,"fielddisplayclass","fieldconfig","editable",4,"ngIf"],["class","slds-form-element__control",3,"ngClass",4,"ngIf"],[3,"fieldname","fieldconfig"],[3,"fielddisplayclass","fieldconfig","editable"],[1,"slds-grid","slds-grid--align-end"],[3,"number","currency_id","precision"],[1,"slds-form-element__control",3,"ngClass"],[1,"slds-grid","slds-m-vertical--xx-small"],["class","slds-form-element slds-p-right--x-small",3,"ngClass",4,"ngIf"],[1,"slds-form-element","slds-grow"],["system-input-number-with-calculator","",3,"ngModel","asNumber","precision"],[3,"fieldname"],[1,"slds-form-element","slds-p-right--x-small",3,"ngClass"],["class","slds-height_full slds-align--absolute-center slds-p-around--none","style","border-color:transparent",4,"ngIf"],["class","slds-form-element__control",4,"ngIf"],[1,"slds-height_full","slds-align--absolute-center","slds-p-around--none",2,"border-color","transparent"],[1,"slds-form-element__control"],[1,"slds-select_container"],[1,"slds-select",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["system-input-number-with-calculator","",3,"ngModel","asNumber","precision","ngModelChange"],[3,"ngModel","asNumber","precision","ngModelChange"]],template:function(e,t){1&e&&d.DNE(0,De,1,2,"field-label",0)(1,Fe,3,6,"field-generic-display",1)(2,Ye,7,4,"div",2),2&e&&(d.Y8G("ngIf",t.displayLabel),d.R7$(),d.Y8G("ngIf",!t.isEditMode()),d.R7$(),d.Y8G("ngIf",t.isEditable()&&t.isEditMode()))},dependencies:[i.YU,i.Sq,i.bT,n.xH,n.y7,n.wz,n.BC,n.vS,je.B,Ge.N,u.b,j.K,D.A],encapsulation:2})}return fieldCurrency})();function Ve(e,t){if(1&e&&d.nrm(0,"field-label",4),2&e){const e=d.XpG();d.Y8G("fieldname",e.fieldname)("fieldconfig",e.fieldconfig)}}let Ae=(()=>{class fieldWeightedAmount extends Ne{constructor(e,t,s,i,n,l,o){super(e,t,s,i,n,l,o),this.model=e,this.view=t,this.language=s,this.metadata=i,this.router=n,this.currency=l,this.userpreferences=o,this.currencies=this.currency.getCurrencies()}get amountfield(){return this.fieldconfig.field_amount?this.fieldconfig.field_amount:"amount"}get probabilityfield(){return this.fieldconfig.field_probability?this.fieldconfig.field_probability:"probability"}getValue(){try{let e=this.model.getFieldValue("amount")?parseFloat(this.model.getFieldValue(this.amountfield)):0,t=this.model.getFieldValue("amount")?parseFloat(this.model.getFieldValue(this.probabilityfield)):0;return this.userpreferences.formatMoney(e*t/100)}catch(e){return 0}}static#e=this.ɵfac=function(e){return new(e||fieldWeightedAmount)(d.rXU(R.g),d.rXU(G.U),d.rXU(k.B),d.rXU(c.yu),d.rXU(C.Ix),d.rXU(Le.G),d.rXU(xe.S))};static#t=this.ɵcmp=d.VBU({type:fieldWeightedAmount,selectors:[["field-currency"]],features:[d.Vt3],decls:8,vars:6,consts:[[3,"fieldname","fieldconfig",4,"ngIf"],[3,"fielddisplayclass","fieldconfig","editable"],[1,"slds-grid","slds-grid--align-spread"],["cass","slds-text-align--right"],[3,"fieldname","fieldconfig"]],template:function(e,t){1&e&&(d.DNE(0,Ve,1,2,"field-label",0),d.j41(1,"field-generic-display",1)(2,"div",2)(3,"div"),d.EFF(4),d.k0s(),d.j41(5,"div",3)(6,"span"),d.EFF(7),d.k0s()()()()),2&e&&(d.Y8G("ngIf",t.displayLabel),d.R7$(),d.Y8G("fielddisplayclass",t.fielddisplayclass)("fieldconfig",t.fieldconfig)("editable",!1),d.R7$(3),d.SpI(" ",t.getCurrencySymbol()," "),d.R7$(3),d.JRh(t.getValue()))},dependencies:[i.bT,u.b,j.K],encapsulation:2})}return fieldWeightedAmount})();function Pe(e,t){if(1&e&&d.nrm(0,"field-label",4),2&e){const e=d.XpG();d.Y8G("fieldname",e.fieldname)("fieldconfig",e.fieldconfig)}}let ze=(()=>{class fieldTotalAmount extends Ne{constructor(e,t,s,i,n,l,o){super(e,t,s,i,n,l,o),this.model=e,this.view=t,this.language=s,this.metadata=i,this.router=n,this.currency=l,this.userpreferences=o,this.currencies=[],this.currencies=this.currency.getCurrencies()}get sumfields(){let e=[];if(this.fieldconfig.sumfields){let t=this.fieldconfig.sumfields.split(",");for(let s of t)e.push(s.trim())}return e}getValue(){let e=0;for(let t of this.sumfields){let s=this.model.getFieldValue(t);s&&(e+=parseFloat(s))}return this.model.setField(this.fieldname,e),this.userpreferences.formatMoney(e)}static#e=this.ɵfac=function(e){return new(e||fieldTotalAmount)(d.rXU(R.g),d.rXU(G.U),d.rXU(k.B),d.rXU(c.yu),d.rXU(C.Ix),d.rXU(Le.G),d.rXU(xe.S))};static#t=this.ɵcmp=d.VBU({type:fieldTotalAmount,selectors:[["field-currency"]],features:[d.Vt3],decls:8,vars:6,consts:[[3,"fieldname","fieldconfig",4,"ngIf"],[3,"fielddisplayclass","fieldconfig","editable"],[1,"slds-grid","slds-grid--align-spread"],["cass","slds-text-align--right"],[3,"fieldname","fieldconfig"]],template:function(e,t){1&e&&(d.DNE(0,Pe,1,2,"field-label",0),d.j41(1,"field-generic-display",1)(2,"div",2)(3,"div"),d.EFF(4),d.k0s(),d.j41(5,"div",3)(6,"span"),d.EFF(7),d.k0s()()()()),2&e&&(d.Y8G("ngIf",t.displayLabel),d.R7$(),d.Y8G("fielddisplayclass",t.fielddisplayclass)("fieldconfig",t.fieldconfig)("editable",!1),d.R7$(3),d.SpI(" ",t.getCurrencySymbol()," "),d.R7$(3),d.JRh(t.getValue()))},dependencies:[i.bT,u.b,j.K],encapsulation:2})}return fieldTotalAmount})();function He(e,t){if(1&e&&d.nrm(0,"field-label",3),2&e){const e=d.XpG();d.Y8G("fieldname",e.fieldname)("fieldconfig",e.fieldconfig)}}function qe(e,t){if(1&e&&(d.j41(0,"field-generic-display",4),d.EFF(1),d.k0s()),2&e){const e=d.XpG();d.Y8G("fielddisplayclass",e.fielddisplayclass)("editable",e.isEditable())("fieldconfig",e.fieldconfig)("fieldid",e.fieldid)("fieldname",e.fieldname),d.R7$(),d.SpI(" ",e.getValue(),"\n")}}function Je(e,t){if(1&e&&(d.j41(0,"option",12),d.EFF(1),d.k0s()),2&e){const e=t.$implicit;d.Y8G("ngValue",e.value),d.R7$(),d.JRh(e.display)}}function We(e,t){if(1&e){const e=d.RV6();d.j41(0,"div",5)(1,"div",6)(2,"div",7)(3,"select",8,9),d.mxI("ngModelChange",(function(t){d.eBV(e);const s=d.XpG();return d.DH7(s.value,t)||(s.value=t),d.Njj(t)})),d.DNE(5,Je,2,2,"option",10),d.k0s()(),d.nrm(6,"field-messages",11),d.k0s()()}if(2&e){const e=d.XpG();d.R7$(),d.Y8G("ngClass",e.getFieldClass()),d.R7$(2),d.R50("ngModel",e.value),d.R7$(2),d.Y8G("ngForOf",e.options),d.R7$(),d.Y8G("fieldname",e.fieldname)}}let Ke=(()=>{class fieldEnum extends r.s{constructor(e,t,s,i,n){super(e,t,s,i,n),this.model=e,this.view=t,this.language=s,this.metadata=i,this.router=n,this.options=[],this.subscriptions.add(this.language.currentlanguage$.subscribe((e=>{this.getOptions()})))}ngOnInit(){super.ngOnInit(),this.getOptions()}getValue(){return this.language.getFieldDisplayOptionValue(this.model.module,this.fieldname,this.value)}getOptions(){let e=[],t=this.language.getFieldDisplayOptions(this.model.module,this.fieldname);for(let s in t)e.push({value:s,display:t[s]});if(this.options=e,this.fieldconfig.sortdirection)switch(this.fieldconfig.sortdirection.toLowerCase()){case"desc":this.options.sort(((e,t)=>e.display.toLowerCase()<t.display.toLowerCase()?1:-1));break;case"asc":this.options.sort(((e,t)=>e.display.toLowerCase()>t.display.toLowerCase()?1:-1))}}static#e=this.ɵfac=function(e){return new(e||fieldEnum)(d.rXU(R.g),d.rXU(G.U),d.rXU(k.B),d.rXU(c.yu),d.rXU(C.Ix))};static#t=this.ɵcmp=d.VBU({type:fieldEnum,selectors:[["field-enum"]],features:[d.Vt3],decls:3,vars:3,consts:[[3,"fieldname","fieldconfig",4,"ngIf"],[3,"fielddisplayclass","editable","fieldconfig","fieldid","fieldname",4,"ngIf"],["class","slds-form-element",4,"ngIf"],[3,"fieldname","fieldconfig"],[3,"fielddisplayclass","editable","fieldconfig","fieldid","fieldname"],[1,"slds-form-element"],[1,"slds-form-element__control",3,"ngClass"],[1,"slds-select_container","slds-m-vertical--xx-small"],[1,"slds-select",3,"ngModel","ngModelChange"],["focus",""],[3,"ngValue",4,"ngFor","ngForOf"],[3,"fieldname"],[3,"ngValue"]],template:function(e,t){1&e&&d.DNE(0,He,1,2,"field-label",0)(1,qe,2,6,"field-generic-display",1)(2,We,7,4,"div",2),2&e&&(d.Y8G("ngIf",t.displayLabel),d.R7$(),d.Y8G("ngIf",!t.isEditMode()),d.R7$(),d.Y8G("ngIf",t.isEditMode()))},dependencies:[i.YU,i.Sq,i.bT,n.xH,n.y7,n.wz,n.BC,n.vS,u.b,j.K,D.A],encapsulation:2})}return fieldEnum})();function Qe(e,t){if(1&e&&d.nrm(0,"field-label",3),2&e){const e=d.XpG();d.Y8G("fieldname",e.fieldname)("fieldconfig",e.fieldconfig)}}function Ze(e,t){if(1&e&&(d.j41(0,"field-generic-display",4),d.EFF(1),d.k0s()),2&e){const e=d.XpG();d.Y8G("fielddisplayclass",e.fielddisplayclass)("editable",e.isEditable())("fieldconfig",e.fieldconfig),d.R7$(),d.SpI(" ",e.displayValue,"\n")}}function et(e,t){if(1&e&&(d.j41(0,"option",11),d.EFF(1),d.k0s()),2&e){const e=t.$implicit;d.Y8G("value",e.value),d.R7$(),d.JRh(e.display)}}function tt(e,t){if(1&e){const e=d.RV6();d.j41(0,"div",5)(1,"div",6)(2,"div",7)(3,"select",8),d.mxI("ngModelChange",(function(t){d.eBV(e);const s=d.XpG();return d.DH7(s.value,t)||(s.value=t),d.Njj(t)})),d.DNE(4,et,2,2,"option",9),d.k0s()(),d.nrm(5,"field-messages",10),d.k0s()()}if(2&e){const e=d.XpG();d.R7$(),d.Y8G("ngClass",e.getFieldClass()),d.R7$(2),d.R50("ngModel",e.value),d.R7$(),d.Y8G("ngForOf",e.options),d.R7$(),d.Y8G("fieldname",e.fieldname)}}let st=(()=>{class fieldLanguage extends r.s{constructor(e,t,s,i,n){super(e,t,s,i,n),this.model=e,this.view=t,this.language=s,this.metadata=i,this.router=n,this.displayValue="",this.options=[]}ngOnInit(){super.ngOnInit(),this.getOptions(),this.subscribeToDataChanges()}getOptions(){this.options=this.language.getAvialableLanguages().map((e=>({value:e.language,display:this.language.getLabel("LANG_"+e.language.toUpperCase())}))),this.fieldconfig.canBeEmpty&&this.options.unshift({value:"",display:""}),this.options.sort(((e,t)=>e.display.localeCompare(t.display)))}subscribeToDataChanges(){this.subscriptions.add(this.model.data$.subscribe((e=>{e[this.fieldname]&&this.value!=e[this.fieldname]&&(this.value=e[this.fieldname]),this.displayValue!=this.value&&this.setDisplayValue()})))}setDisplayValue(){const e=this.options.find((e=>e.value==this.model.getField(this.fieldname)));this.displayValue=e?.display||""}static#e=this.ɵfac=function(e){return new(e||fieldLanguage)(d.rXU(R.g),d.rXU(G.U),d.rXU(k.B),d.rXU(c.yu),d.rXU(C.Ix))};static#t=this.ɵcmp=d.VBU({type:fieldLanguage,selectors:[["field-enum"]],features:[d.Vt3],decls:3,vars:3,consts:[[3,"fieldname","fieldconfig",4,"ngIf"],[3,"fielddisplayclass","editable","fieldconfig",4,"ngIf"],["class","slds-form-element",4,"ngIf"],[3,"fieldname","fieldconfig"],[3,"fielddisplayclass","editable","fieldconfig"],[1,"slds-form-element"],[1,"slds-form-element__control",3,"ngClass"],[1,"slds-select_container","slds-m-vertical--xx-small"],[1,"slds-select",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[3,"fieldname"],[3,"value"]],template:function(e,t){1&e&&d.DNE(0,Qe,1,2,"field-label",0)(1,Ze,2,4,"field-generic-display",1)(2,tt,6,4,"div",2),2&e&&(d.Y8G("ngIf",t.displayLabel),d.R7$(),d.Y8G("ngIf",!t.isEditMode()),d.R7$(),d.Y8G("ngIf",t.isEditMode()))},dependencies:[i.YU,i.Sq,i.bT,n.xH,n.y7,n.wz,n.BC,n.vS,u.b,j.K,D.A],encapsulation:2})}return fieldLanguage})();function it(e,t){if(1&e&&(d.j41(0,"div",4)(1,"span",5)(2,"a",6),d.EFF(3),d.k0s(),d.j41(4,"button",7),d.nrm(5,"system-button-icon",8),d.k0s()()()),2&e){const e=t.$implicit;d.R7$(3),d.JRh(e.displayname),d.R7$(2),d.Y8G("icon","close")}}let nt=(()=>{class fieldEmailTo extends r.s{constructor(e,t,s,i,n,l){super(e,t,s,i,n),this.model=e,this.view=t,this.language=s,this.metadata=i,this.router=n,this.backend=l,this.loadingOptions=!1}static#e=this.ɵfac=function(e){return new(e||fieldEmailTo)(d.rXU(R.g),d.rXU(G.U),d.rXU(k.B),d.rXU(c.yu),d.rXU(C.Ix),d.rXU(ee.H))};static#t=this.ɵcmp=d.VBU({type:fieldEmailTo,selectors:[["field-email-to"]],features:[d.Vt3],decls:4,vars:2,consts:[[1,"slds-form-element"],[3,"fieldname"],[1,"slds-form-element__control"],["class","slds-pill_container",4,"ngFor","ngForOf"],[1,"slds-pill_container"],[1,"slds-pill"],["href","javascript:void(0);",1,"slds-pill__label"],[1,"slds-button","slds-button--icon","slds-pill__remove"],[3,"icon"]],template:function(e,t){1&e&&(d.j41(0,"div",0),d.nrm(1,"field-label",1),d.j41(2,"div",2),d.DNE(3,it,6,2,"div",3),d.k0s()()),2&e&&(d.R7$(),d.Y8G("fieldname","to_addrs_names"),d.R7$(2),d.Y8G("ngForOf",t.model.data.to_addrs_names))},dependencies:[i.Sq,I.t,u.b],encapsulation:2})}return fieldEmailTo})();var lt=s(43308);function ot(e,t){if(1&e&&d.nrm(0,"field-label",3),2&e){const e=d.XpG();d.Y8G("fieldname",e.fieldname)("fieldconfig",e.fieldconfig)}}function at(e,t){1&e&&d.nrm(0,"system-stencil")}function rt(e,t){if(1&e){const e=d.RV6();d.j41(0,"button",9),d.bIt("click",(function(){d.eBV(e);const t=d.XpG(3);return d.Njj(t.setEditMode())})),d.nrm(1,"system-button-icon",10),d.k0s()}2&e&&(d.R7$(),d.Y8G("icon","edit"))}function dt(e,t){if(1&e&&(d.j41(0,"div",6)(1,"div",7),d.EFF(2),d.k0s(),d.DNE(3,rt,2,1,"button",8),d.k0s()),2&e){const e=d.XpG(2);d.Y8G("ngClass",e.fielddisplayclass),d.R7$(2),d.JRh(e.getValue()),d.R7$(),d.Y8G("ngIf",e.isEditable())}}function ct(e,t){if(1&e&&(d.j41(0,"div"),d.DNE(1,at,1,0,"system-stencil",4)(2,dt,4,3,"ng-template",null,5,d.C5r),d.k0s()),2&e){const e=d.sdS(3),t=d.XpG();d.R7$(),d.Y8G("ngIf",t.model.isLoading)("ngIfElse",e)}}function ut(e,t){if(1&e&&(d.j41(0,"option",18),d.EFF(1),d.k0s()),2&e){const e=t.$implicit;d.Y8G("ngValue",e.id),d.R7$(),d.JRh(e.summary_text)}}function mt(e,t){if(1&e){const e=d.RV6();d.j41(0,"div",11)(1,"div",12)(2,"div",13)(3,"select",14),d.mxI("ngModelChange",(function(t){d.eBV(e);const s=d.XpG();return d.DH7(s.value,t)||(s.value=t),d.Njj(t)})),d.bIt("change",(function(t){d.eBV(e);const s=d.XpG();return d.Njj(s.chooseTemplate(t))})),d.nrm(4,"option",15),d.DNE(5,ut,2,2,"option",16),d.k0s()(),d.nrm(6,"field-messages",17),d.k0s()()}if(2&e){const e=d.XpG();d.R7$(),d.Y8G("ngClass",e.getFieldClass()),d.R7$(2),d.Y8G("disabled",e.isDisabled),d.R50("ngModel",e.value),d.R7$(2),d.Y8G("ngForOf",e.availableTemplates),d.R7$(),d.Y8G("fieldname",e.fieldname)}}let ht=(()=>{class fieldEmailTemplates extends r.s{constructor(e,t,s,i,n,l,o,a){super(e,t,s,i,n),this.model=e,this.view=t,this.language=s,this.metadata=i,this.router=n,this.backend=l,this.modal=o,this.configuration=a,this.isLoaded=!1,this.availableTemplates=[]}get subjectField(){return this.fieldconfig.subject?this.fieldconfig.subject:"name"}get bodyField(){return this.fieldconfig.body?this.fieldconfig.body:"body"}get addtocurrentquote(){return 1==this.fieldconfig.addtocurrentquote}get isDisabled(){return!this.model.getFieldValue("parent_type")||""==this.model.getFieldValue("parent_type")||!this.isLoaded||0==this.availableTemplates.length}getValue(){for(let e of this.availableTemplates)if(e.id==this.value)return e.name}ngOnInit(){let e=this.configuration.getData("EmailTemplates");if(e&&!this.fieldconfig?.ignoreCache)this.availableTemplates=e.filter((e=>"email"==e.type&&("*"==e.for_bean||e.for_bean==this.model.getFieldValue("parent_type")))),this.availableTemplates.sort(((e,t)=>e.name.localeCompare(t.name))),this.isLoaded=!0;else{let e={start:0,limit:500,listid:"all"};this.backend.getRequest("module/EmailTemplates",e).subscribe((e=>{this.configuration.setData("EmailTemplates",e.list),this.availableTemplates=e.list.filter((e=>"email"==e.type&&("*"==e.for_bean||e.for_bean==this.model.getFieldValue("parent_type")))),this.availableTemplates.sort(((e,t)=>e.name.localeCompare(t.name))),this.isLoaded=!0}))}}chooseTemplate(e){""!=this.value?this.modal.openModal("SystemLoadingModal",!1).subscribe((e=>{this.backend.getRequest("module/EmailTemplates/"+this.value+"/parse/"+this.model.getFieldValue("parent_type")+"/"+this.model.getFieldValue("parent_id")).subscribe((t=>{this.model.getField(this.subjectField)||this.model.setField(this.subjectField,t.subject);let s=document.implementation.createHTMLDocument("Virtual Document");s.documentElement.innerHTML=this.model.getFieldValue(this.bodyField);let i=s.querySelectorAll("div[data-spice-temp-quote]"),n=s.querySelectorAll("div[data-signature]"),l=s.querySelectorAll("div[data-spice-reply-quote]");i[0]?.parentNode.removeChild(i[0]);let o=['<div class="spicecrm_temp_quote">'+t.body_html+"</div>",n[0]?.outerHTML,l[0]?.outerHTML].join("<p><br></p>");this.model.setField(this.bodyField,o),e.instance.self.destroy()}))})):this.model.setField(this.bodyField,"")}static#e=this.ɵfac=function(e){return new(e||fieldEmailTemplates)(d.rXU(R.g),d.rXU(G.U),d.rXU(k.B),d.rXU(c.yu),d.rXU(C.Ix),d.rXU(ee.H),d.rXU(w.y),d.rXU(ie.i))};static#t=this.ɵcmp=d.VBU({type:fieldEmailTemplates,selectors:[["field-email-templates"]],features:[d.Vt3],decls:3,vars:3,consts:[[3,"fieldname","fieldconfig",4,"ngIf"],[4,"ngIf"],["class","slds-form-element",4,"ngIf"],[3,"fieldname","fieldconfig"],[4,"ngIf","ngIfElse"],["displaycontent",""],[1,"slds-grid",3,"ngClass"],[1,"slds-truncate"],["class","slds-button slds-button--icon slds-col_bump-left slds-p-left--xx-small",3,"click",4,"ngIf"],[1,"slds-button","slds-button--icon","slds-col_bump-left","slds-p-left--xx-small",3,"click"],[3,"icon"],[1,"slds-form-element"],[1,"slds-form-element__control",3,"ngClass"],[1,"slds-select_container","slds-m-vertical--xx-small"],[1,"slds-select",3,"disabled","ngModel","ngModelChange","change"],["value",""],[3,"ngValue",4,"ngFor","ngForOf"],[3,"fieldname"],[3,"ngValue"]],template:function(e,t){1&e&&d.DNE(0,ot,1,2,"field-label",0)(1,ct,4,2,"div",1)(2,mt,7,5,"div",2),2&e&&(d.Y8G("ngIf",t.displayLabel),d.R7$(),d.Y8G("ngIf",!t.isEditMode()),d.R7$(),d.Y8G("ngIf",t.isEditMode()))},dependencies:[i.YU,i.Sq,i.bT,n.xH,n.y7,n.wz,n.BC,n.vS,I.t,lt.O,u.b,D.A],encapsulation:2})}return fieldEmailTemplates})();function gt(e,t){if(1&e&&d.nrm(0,"field-label",3),2&e){const e=d.XpG();d.Y8G("fieldname",e.fieldname)("fieldconfig",e.fieldconfig)}}function pt(e,t){1&e&&d.nrm(0,"system-stencil")}function ft(e,t){if(1&e){const e=d.RV6();d.j41(0,"button",9),d.bIt("click",(function(){d.eBV(e);const t=d.XpG(3);return d.Njj(t.setEditMode())})),d.nrm(1,"system-button-icon",10),d.k0s()}2&e&&(d.R7$(),d.Y8G("icon","edit"))}function bt(e,t){if(1&e&&(d.j41(0,"div",6)(1,"div",7),d.EFF(2),d.k0s(),d.DNE(3,ft,2,1,"button",8),d.k0s()),2&e){const e=d.XpG(2);d.Y8G("ngClass",e.fielddisplayclass),d.R7$(2),d.JRh(e.getValue()),d.R7$(),d.Y8G("ngIf",e.isEditable())}}function yt(e,t){if(1&e&&(d.j41(0,"div"),d.DNE(1,pt,1,0,"system-stencil",4)(2,bt,4,3,"ng-template",null,5,d.C5r),d.k0s()),2&e){const e=d.sdS(3),t=d.XpG();d.R7$(),d.Y8G("ngIf",t.model.isLoading)("ngIfElse",e)}}function vt(e,t){if(1&e&&(d.j41(0,"option",17),d.EFF(1),d.k0s()),2&e){const e=t.$implicit;d.Y8G("ngValue",e.id),d.R7$(),d.JRh(e.name)}}function _t(e,t){if(1&e){const e=d.RV6();d.j41(0,"div",11)(1,"div",12)(2,"div",13)(3,"select",14),d.mxI("ngModelChange",(function(t){d.eBV(e);const s=d.XpG();return d.DH7(s.value,t)||(s.value=t),d.Njj(t)})),d.bIt("change",(function(t){d.eBV(e);const s=d.XpG();return d.Njj(s.chooseTemplate(t))})),d.DNE(4,vt,2,2,"option",15),d.k0s()(),d.nrm(5,"field-messages",16),d.k0s()()}if(2&e){const e=d.XpG();d.R7$(),d.Y8G("ngClass",e.getFieldClass()),d.R7$(2),d.Y8G("disabled",e.isDisabled),d.R50("ngModel",e.value),d.R7$(),d.Y8G("ngForOf",e.availableTemplates),d.R7$(),d.Y8G("fieldname",e.fieldname)}}let kt=(()=>{class fieldTextMessageTemplates extends r.s{constructor(e,t,s,i,n,l,o,a){super(e,t,s,i,n),this.model=e,this.view=t,this.language=s,this.metadata=i,this.router=n,this.backend=l,this.modal=o,this.configuration=a,this.isLoaded=!1,this.availableTemplates=[]}get bodyField(){return this.fieldconfig.body?this.fieldconfig.body:"description"}get isDisabled(){return!this.model.getFieldValue("parent_type")||""==this.model.getFieldValue("parent_type")||!this.isLoaded||0==this.availableTemplates.length}getValue(){for(let e of this.availableTemplates)if(e.id==this.value)return e.name}ngOnInit(){let e=this.configuration.getData("TextMessageTemplates");if(e)this.availableTemplates=e.filter((e=>"*"==e.parent_type||e.parent_type==this.model.getFieldValue("parent_type"))),this.isLoaded=!0;else{let e={start:0,limit:500,listid:"all"};this.backend.getRequest("module/TextMessageTemplates",e).subscribe((e=>{this.configuration.setData("TextMessageTemplates",e.list),this.availableTemplates=e.list.filter((e=>"*"==e.parent_type||e.parent_type==this.model.getFieldValue("parent_type"))),this.isLoaded=!0}))}}chooseTemplate(e){""!=this.value&&this.modal.openModal("SystemLoadingModal",!1).subscribe((e=>{this.backend.getRequest("module/TextMessageTemplates/"+this.value+"/parse/"+this.model.getFieldValue("parent_type")+"/"+this.model.getFieldValue("parent_id")).subscribe((t=>{this.model.setField(this.bodyField,t.description),e.instance.self.destroy()}))}))}static#e=this.ɵfac=function(e){return new(e||fieldTextMessageTemplates)(d.rXU(R.g),d.rXU(G.U),d.rXU(k.B),d.rXU(c.yu),d.rXU(C.Ix),d.rXU(ee.H),d.rXU(w.y),d.rXU(ie.i))};static#t=this.ɵcmp=d.VBU({type:fieldTextMessageTemplates,selectors:[["field-textmessage-templates"]],features:[d.Vt3],decls:3,vars:3,consts:[[3,"fieldname","fieldconfig",4,"ngIf"],[4,"ngIf"],["class","slds-form-element",4,"ngIf"],[3,"fieldname","fieldconfig"],[4,"ngIf","ngIfElse"],["displaycontent",""],[1,"slds-grid",3,"ngClass"],[1,"slds-truncate"],["class","slds-button slds-button--icon slds-col_bump-left slds-p-left--xx-small",3,"click",4,"ngIf"],[1,"slds-button","slds-button--icon","slds-col_bump-left","slds-p-left--xx-small",3,"click"],[3,"icon"],[1,"slds-form-element"],[1,"slds-form-element__control",3,"ngClass"],[1,"slds-select_container","slds-m-vertical--xx-small"],[1,"slds-select",3,"disabled","ngModel","ngModelChange","change"],[3,"ngValue",4,"ngFor","ngForOf"],[3,"fieldname"],[3,"ngValue"]],template:function(e,t){1&e&&d.DNE(0,gt,1,2,"field-label",0)(1,yt,4,2,"div",1)(2,_t,6,5,"div",2),2&e&&(d.Y8G("ngIf",t.displayLabel),d.R7$(),d.Y8G("ngIf",!t.isEditMode()),d.R7$(),d.Y8G("ngIf",t.isEditMode()))},dependencies:[i.YU,i.Sq,i.bT,n.xH,n.y7,n.wz,n.BC,n.vS,I.t,lt.O,u.b,D.A],encapsulation:2})}return fieldTextMessageTemplates})();var Rt=s(84359);let It=(()=>{class fieldMultienumCheckBox{constructor(e,t,s,i){this.model=e,this.view=t,this.language=s,this.metadata=i,this.fieldname="",this.option="",this.disabled=!1,this.fieldid="",this.fieldid=this.model.generateGuid()}getValueArray(){return this.model.getField(this.fieldname)?this.model.getField(this.fieldname).substring(1,this.model.getField(this.fieldname).length-1).split("^,^"):[]}get checked(){if(this.model.getField(this.fieldname)){let e=!1;return this.model.getField(this.fieldname)==this.option.value&&(e=!0),this.model.getField(this.fieldname).indexOf("^"+this.option.value+"^")>-1&&(e=!0),e}return!1}set checked(e){let t=this.getValueArray(),s=t.indexOf(this.option.value);-1===s?t.push(this.option.value):t.splice(s,1),this.model.setField(this.fieldname,"^"+t.join("^,^")+"^")}static#e=this.ɵfac=function(e){return new(e||fieldMultienumCheckBox)(d.rXU(R.g),d.rXU(G.U),d.rXU(k.B),d.rXU(c.yu))};static#t=this.ɵcmp=d.VBU({type:fieldMultienumCheckBox,selectors:[["field-multienum-checkbox"]],inputs:{fieldname:"fieldname",option:"option",disabled:"disabled"},decls:2,vars:3,consts:[[3,"disabled","ngModel","ngModelChange"]],template:function(e,t){1&e&&(d.j41(0,"system-checkbox",0),d.mxI("ngModelChange",(function(e){return d.DH7(t.checked,e)||(t.checked=e),e})),d.EFF(1),d.k0s()),2&e&&(d.Y8G("disabled",t.disabled),d.R50("ngModel",t.checked),d.R7$(),d.JRh(t.option.display))},dependencies:[n.BC,n.vS,Rt.f],encapsulation:2})}return fieldMultienumCheckBox})();function xt(e,t){if(1&e&&d.nrm(0,"field-label",3),2&e){const e=d.XpG();d.Y8G("fieldname",e.fieldname)("fieldconfig",e.fieldconfig)}}function jt(e,t){if(1&e&&(d.j41(0,"span"),d.EFF(1),d.k0s()),2&e){const e=d.XpG(2);d.R7$(),d.JRh(e.getValue())}}function Gt(e,t){if(1&e&&d.nrm(0,"field-multienum-checkbox",11),2&e){const e=t.$implicit,s=d.XpG(4);d.Y8G("fieldname",s.fieldname)("option",e)}}function Ct(e,t){if(1&e&&(d.j41(0,"div",9),d.DNE(1,Gt,1,2,"field-multienum-checkbox",10),d.k0s()),2&e){const e=t.$implicit,s=d.XpG(3);d.Y8G("ngClass",s.getFieldClass()),d.R7$(),d.Y8G("ngForOf",e)}}function wt(e,t){if(1&e&&(d.j41(0,"div",7),d.DNE(1,Ct,2,2,"div",8),d.k0s()),2&e){const e=d.XpG(2);d.R7$(),d.Y8G("ngForOf",e.options)}}function St(e,t){if(1&e&&(d.j41(0,"field-generic-display",4),d.DNE(1,jt,2,1,"span",5)(2,wt,2,1,"div",6),d.k0s()),2&e){const e=d.XpG();d.Y8G("fielddisplayclass",e.fielddisplayclass)("editable",e.isEditable())("fieldconfig",e.fieldconfig),d.R7$(),d.Y8G("ngIf",!e.displayCheckboxes),d.R7$(),d.Y8G("ngIf",e.displayCheckboxes)}}function Et(e,t){if(1&e&&d.nrm(0,"field-multienum-checkbox",15),2&e){const e=t.$implicit,s=d.XpG(3);d.Y8G("fieldname",s.fieldname)("option",e)}}function Lt(e,t){if(1&e&&(d.j41(0,"div",9),d.DNE(1,Et,1,2,"field-multienum-checkbox",14),d.k0s()),2&e){const e=t.$implicit,s=d.XpG(2);d.Y8G("ngClass",s.getFieldClass()),d.R7$(),d.Y8G("ngForOf",e)}}function Dt(e,t){if(1&e&&(d.j41(0,"div",12)(1,"div",7),d.DNE(2,Lt,2,2,"div",8),d.k0s(),d.nrm(3,"field-messages",13),d.k0s()),2&e){const e=d.XpG();d.R7$(2),d.Y8G("ngForOf",e.options),d.R7$(),d.Y8G("fieldname",e.fieldname)}}let Ft=(()=>{class fieldMultienum extends r.s{constructor(e,t,s,i,n){super(e,t,s,i,n),this.model=e,this.view=t,this.language=s,this.metadata=i,this.router=n,this.options=[],this.subscriptions.add(this.language.currentlanguage$.subscribe((e=>{this.buildOptions()})))}ngOnInit(){this.buildOptions()}get columns(){return this.fieldconfig.columns?parseInt(this.fieldconfig.columns,10):4}get displayCheckboxes(){return!!this.fieldconfig.displaycheckboxes}getValue(){let e=[],t=this.getValueArray();for(let s of t){let t=this.language.getFieldDisplayOptionValue(this.model.module,this.fieldname,s);t&&e.push(t)}if(this.fieldconfig.sortdirection)switch(this.fieldconfig.sortdirection.toLowerCase()){case"desc":e.sort(((e,t)=>e.toLowerCase()<t.toLowerCase()?1:-1));break;case"asc":e.sort(((e,t)=>e.toLowerCase()>t.toLowerCase()?1:-1))}return e.join(", ")}getValueArray(){try{let e=this.model.getFieldValue(this.fieldname);return"^"==e.substring(0,1)&&(e=e.substring(1,e.length-1)),e.split("^,^")}catch(e){return[]}}buildOptions(){let e=[],t=this.language.getFieldDisplayOptions(this.model.module,this.fieldname);for(let s in t)e.push({id:this.model.generateGuid(),value:s,display:t[s]});if(this.options=e,this.fieldconfig.sortdirection)switch(this.fieldconfig.sortdirection.toLowerCase()){case"desc":this.options.sort(((e,t)=>e.display.toLowerCase()<t.display.toLowerCase()?1:-1));break;case"asc":this.options.sort(((e,t)=>e.display.toLowerCase()>t.display.toLowerCase()?1:-1))}let s=0;for(let e in this.options)s++;this.options=[];let i=Math.round(s/this.columns),n=0,l=[];for(let t of e)l.push(t),l.length>=i&&n!=this.columns-1&&(this.options.push(l),n++,l=[]);(n==this.columns||l.length>0)&&this.options.push(l)}static#e=this.ɵfac=function(e){return new(e||fieldMultienum)(d.rXU(R.g),d.rXU(G.U),d.rXU(k.B),d.rXU(c.yu),d.rXU(C.Ix))};static#t=this.ɵcmp=d.VBU({type:fieldMultienum,selectors:[["field-multienum"]],features:[d.Vt3],decls:3,vars:3,consts:[[3,"fieldname","fieldconfig",4,"ngIf"],[3,"fielddisplayclass","editable","fieldconfig",4,"ngIf"],["class","slds-form-element",4,"ngIf"],[3,"fieldname","fieldconfig"],[3,"fielddisplayclass","editable","fieldconfig"],[4,"ngIf"],["class","slds-grid slds-grid--align-spread",4,"ngIf"],[1,"slds-grid","slds-grid--align-spread"],["class","slds-form-element__control",3,"ngClass",4,"ngFor","ngForOf"],[1,"slds-form-element__control",3,"ngClass"],["disabled","true","class","slds-checkbox",3,"fieldname","option",4,"ngFor","ngForOf"],["disabled","true",1,"slds-checkbox",3,"fieldname","option"],[1,"slds-form-element"],[3,"fieldname"],["class","slds-checkbox",3,"fieldname","option",4,"ngFor","ngForOf"],[1,"slds-checkbox",3,"fieldname","option"]],template:function(e,t){1&e&&d.DNE(0,xt,1,2,"field-label",0)(1,St,3,5,"field-generic-display",1)(2,Dt,4,2,"div",2),2&e&&(d.Y8G("ngIf",t.displayLabel),d.R7$(),d.Y8G("ngIf",!t.isEditMode()),d.R7$(),d.Y8G("ngIf",t.isEditMode()))},dependencies:[i.YU,i.Sq,i.bT,u.b,j.K,It,D.A],encapsulation:2})}return fieldMultienum})();var Mt=s(55480),Tt=s(79413);function Bt(e,t){if(1&e&&d.nrm(0,"field-label",3),2&e){const e=d.XpG();d.Y8G("fieldname",e.fieldname)("fieldconfig",e.fieldconfig)}}function $t(e,t){if(1&e&&(d.j41(0,"span"),d.EFF(1),d.k0s()),2&e){const e=d.XpG(2);d.R7$(),d.JRh(e.localValue.valueDisplay)}}function Ot(e,t){if(1&e&&(d.j41(0,"div",13)(1,"system-checkbox-group-checkbox",14),d.EFF(2),d.k0s()()),2&e){const e=t.$implicit,s=d.XpG(4);d.Y8G("ngClass",s.columnsClass),d.R7$(),d.Y8G("value",e.value)("disabled",!0),d.R7$(),d.SpI(" ",e.display,"")}}function Xt(e,t){if(1&e&&(d.j41(0,"div",7)(1,"div",8)(2,"system-checkbox",9),d.EFF(3),d.k0s()(),d.j41(4,"div",10)(5,"system-checkbox-group",11),d.DNE(6,Ot,3,4,"div",12),d.k0s()()()),2&e){const e=t.$implicit,s=d.XpG(3);d.R7$(2),d.Y8G("ngModel",e.value)("disabled",!0),d.R7$(),d.JRh(e.display),d.R7$(),d.Y8G("ngClass",s.css_classes),d.R7$(),d.Y8G("ngModel",s.localValue.valueArray),d.R7$(),d.Y8G("ngForOf",e.options)("ngForTrackBy",s.trackByFn)}}function Ut(e,t){if(1&e&&(d.j41(0,"div"),d.DNE(1,Xt,7,7,"div",6),d.k0s()),2&e){const e=d.XpG(2);d.R7$(),d.Y8G("ngForOf",e.groups)("ngForTrackBy",e.trackByFn)}}function Yt(e,t){if(1&e&&(d.j41(0,"field-generic-display",4),d.DNE(1,$t,2,1,"span",5)(2,Ut,2,2,"div",5),d.k0s()),2&e){const e=d.XpG();d.Y8G("fielddisplayclass",e.fielddisplayclass)("editable",e.isEditable())("fieldconfig",e.fieldconfig),d.R7$(),d.Y8G("ngIf",!e.fieldconfig.displayCheckboxes),d.R7$(),d.Y8G("ngIf",!!e.fieldconfig.displayCheckboxes)}}function Nt(e,t){if(1&e&&(d.j41(0,"div",13)(1,"system-checkbox-group-checkbox",19),d.EFF(2),d.k0s()()),2&e){const e=t.$implicit,s=d.XpG(3);d.Y8G("ngClass",s.columnsClass),d.R7$(),d.Y8G("value",e.value),d.R7$(),d.SpI(" ",e.display," ")}}function Vt(e,t){if(1&e){const e=d.RV6();d.j41(0,"div",7)(1,"div",8)(2,"system-checkbox",17),d.bIt("ngModelChange",(function(t){const s=d.eBV(e).$implicit,i=d.XpG(2);return d.Njj(i.setGroupValue(t,s))})),d.EFF(3),d.k0s()(),d.j41(4,"div",10)(5,"system-checkbox-group",18),d.bIt("ngModelChange",(function(t){const s=d.eBV(e).$implicit,i=d.XpG(2);return d.Njj(i.setItemValue(t,s.value))})),d.DNE(6,Nt,3,3,"div",12),d.k0s()()()}if(2&e){const e=t.$implicit,s=d.XpG(2);d.R7$(2),d.Y8G("ngModel",s.localValue.valueGroups[e.value]),d.R7$(),d.SpI(" ",e.display," "),d.R7$(),d.Y8G("ngClass",s.css_classes),d.R7$(),d.Y8G("ngModel",s.localValue.valueArray),d.R7$(),d.Y8G("ngForOf",e.options)("ngForTrackBy",s.trackByFn)}}function At(e,t){if(1&e&&(d.j41(0,"div",15),d.DNE(1,Vt,7,6,"div",6),d.nrm(2,"field-messages",16),d.k0s()),2&e){const e=d.XpG();d.R7$(),d.Y8G("ngForOf",e.groups)("ngForTrackBy",e.trackByFn),d.R7$(),d.Y8G("fieldname",e.fieldname)}}let Pt=(()=>{class fieldGroupedEnum extends r.s{constructor(){super(...arguments),this.groups=[],this.fieldconfig={},this.localValue={valueText:"",valueArray:[],valueDisplay:"",valueGroups:{}},this.columnsClass="slds-size--1-of-4"}ngOnInit(){this.setColumnsClass(),this.buildOptionGroups(),this.setLocalValues(this.value),this.subscribeToLanguage(),this.subscribeToModelChanges()}setColumnsClass(){const e=+this.fieldconfig.columns<13&&+this.fieldconfig.columns>0?this.fieldconfig.columns:"4";this.columnsClass=`slds-size--1-of-${e}`}subscribeToLanguage(){this.subscriptions.add(this.language.currentlanguage$.subscribe((()=>this.buildOptionGroups())))}setLocalValues(e){if(!e)return this.localValue={valueText:"",valueArray:[],valueDisplay:"",valueGroups:{}};const t=this.language.getFieldDisplayOptions(this.model.module,this.fieldname),s=e.replace(/\^/g,"").split(",").map((e=>e.trim()));this.localValue={valueText:e,valueArray:s,valueDisplay:s.map((e=>t[e]??e)).join(", "),valueGroups:{}};const i=this.fieldconfig.groupSeparator??"_";this.localValue.valueArray.forEach((e=>{this.localValue.valueGroups[e]=!e.includes(i)}))}subscribeToModelChanges(){this.subscriptions.add(this.model.data$.subscribe((e=>{this.localValue.valueText!==e[this.fieldname]&&this.setLocalValues(e[this.fieldname])})))}setItemValue(e,t){e.some((e=>e!==t&&e.startsWith(t)))&&!e.some((e=>e==t))?e.push(t):e.some((e=>e!==t&&e.startsWith(t)))||(e=e.filter((e=>e!==t)));const s=e.map((e=>`^${e}^`)).join(",");this.setLocalValues(s),this.value=s}setGroupValue(e,t){let s=this.value;e?e&&-1==this.localValue.valueArray.indexOf(t.value)&&(s=`${this.localValue.valueText},^${t.value}^`):s=this.localValue.valueArray.filter((e=>e!==t.value)).map((e=>`^${e}^`)).join(","),this.setLocalValues(s),this.value=s}trackByFn(e,t){return t.value}buildOptionGroups(){this.groups=[];const e=this.language.getFieldDisplayOptions(this.model.module,this.fieldname,!0),t=this.fieldconfig.groupSeparator??"_",s=e.filter((e=>e.value.includes(t)));this.groups=e.filter((e=>!e.value.includes(t))).map((e=>({...e,options:s.filter((t=>t.value.startsWith(e.value)))})))}static#e=this.ɵfac=(()=>{let e;return function(t){return(e||(e=d.xGo(fieldGroupedEnum)))(t||fieldGroupedEnum)}})();static#t=this.ɵcmp=d.VBU({type:fieldGroupedEnum,selectors:[["field-grouped-enum"]],inputs:{fieldconfig:"fieldconfig"},features:[d.Vt3],decls:3,vars:3,consts:[[3,"fieldname","fieldconfig",4,"ngIf"],[3,"fielddisplayclass","editable","fieldconfig",4,"ngIf"],["class","slds-form-element",4,"ngIf"],[3,"fieldname","fieldconfig"],[3,"fielddisplayclass","editable","fieldconfig"],[4,"ngIf"],["class","slds-m-bottom--medium",4,"ngFor","ngForOf","ngForTrackBy"],[1,"slds-m-bottom--medium"],[1,"slds-p-vertical--xx-small","slds-text-title_bold"],[3,"ngModel","disabled"],[1,"slds-form-element__control",3,"ngClass"],[1,"slds-grid","slds-wrap","slds-p-vertical--xxx-small",3,"ngModel"],["class","slds-truncate",3,"ngClass",4,"ngFor","ngForOf","ngForTrackBy"],[1,"slds-truncate",3,"ngClass"],[3,"value","disabled"],[1,"slds-form-element"],[3,"fieldname"],[3,"ngModel","ngModelChange"],[1,"slds-grid","slds-wrap","slds-p-vertical--xxx-small",3,"ngModel","ngModelChange"],[3,"value"]],template:function(e,t){1&e&&d.DNE(0,Bt,1,2,"field-label",0)(1,Yt,3,5,"field-generic-display",1)(2,At,3,3,"div",2),2&e&&(d.Y8G("ngIf",t.displayLabel),d.R7$(),d.Y8G("ngIf",!t.isEditMode()),d.R7$(),d.Y8G("ngIf",t.isEditMode()))},dependencies:[i.YU,i.Sq,i.bT,n.BC,n.vS,Rt.f,Mt.G,Tt.h,u.b,j.K,D.A],encapsulation:2})}return fieldGroupedEnum})();var zt=s(95218);function Ht(e,t){if(1&e&&d.nrm(0,"field-label",3),2&e){const e=d.XpG();d.Y8G("fieldname",e.fieldname)("fieldconfig",e.fieldconfig)}}function qt(e,t){if(1&e&&(d.j41(0,"field-generic-display",4)(1,"span"),d.EFF(2),d.k0s()()),2&e){const e=d.XpG();d.Y8G("fielddisplayclass",e.fielddisplayclass)("editable",e.isEditable())("fieldconfig",e.fieldconfig),d.R7$(2),d.JRh(e.viewModeValueText)}}function Jt(e,t){if(1&e){const e=d.RV6();d.j41(0,"system-multiple-select",5),d.bIt("ngModelChange",(function(t){d.eBV(e);const s=d.XpG();return d.Njj(s.setFieldValue(t))})),d.k0s()}if(2&e){const e=d.XpG();d.Y8G("ngModel",e.valueArray)("listItems",e.listItems)("groupSeparator",e.fieldconfig.groupSeparator)("grouped",e.fieldconfig.grouped)("showPills",e.fieldconfig.showPills)("listHeight",e.fieldconfig.listHeight)}}let Wt=(()=>{class fieldMultipleEnumDropdown extends r.s{constructor(e,t,s,i,n){super(e,t,s,i,n),this.model=e,this.view=t,this.language=s,this.metadata=i,this.router=n,this.valueArray=[],this.viewModeValueText=""}ngOnInit(){this.setSubscriptions()}setSubscriptions(){this.subscriptions.add(this.model.data$.subscribe((()=>{this.createValueArray(),this.createViewModeValueText()}))),this.subscriptions.add(this.language.currentlanguage$.subscribe((()=>{this.createViewModeValueText()})))}get listItems(){return this.language.getFieldDisplayOptions(this.model.module,this.fieldname)}setFieldValue(e){this.value=e.map((e=>`^${e}^`)).join(","),this.createValueArray(),this.createViewModeValueText()}createValueArray(){this.valueArray=this.value?this.value.replace(/\^/g,"").split(","):[]}createViewModeValueText(){let e=this.language.getFieldDisplayOptions(this.model.module,this.fieldname);this.viewModeValueText=this.valueArray.map((t=>e[t])).join(", ")}get grouped(){return void 0===this.fieldconfig.grouped||!0===this.fieldconfig.grouped}ngOnDestroy(){this.subscriptions.unsubscribe()}static#e=this.ɵfac=function(e){return new(e||fieldMultipleEnumDropdown)(d.rXU(R.g),d.rXU(G.U),d.rXU(k.B),d.rXU(c.yu),d.rXU(C.Ix))};static#t=this.ɵcmp=d.VBU({type:fieldMultipleEnumDropdown,selectors:[["field-multiple-enum-dropdown"]],features:[d.Vt3],decls:3,vars:3,consts:[[3,"fieldname","fieldconfig",4,"ngIf"],[3,"fielddisplayclass","editable","fieldconfig",4,"ngIf"],[3,"ngModel","listItems","groupSeparator","grouped","showPills","listHeight","ngModelChange",4,"ngIf"],[3,"fieldname","fieldconfig"],[3,"fielddisplayclass","editable","fieldconfig"],[3,"ngModel","listItems","groupSeparator","grouped","showPills","listHeight","ngModelChange"]],template:function(e,t){1&e&&d.DNE(0,Ht,1,2,"field-label",0)(1,qt,3,4,"field-generic-display",1)(2,Jt,1,6,"system-multiple-select",2),2&e&&(d.Y8G("ngIf",t.displayLabel),d.R7$(),d.Y8G("ngIf",!t.isEditMode()),d.R7$(),d.Y8G("ngIf",t.isEditMode()))},dependencies:[i.bT,n.BC,n.vS,zt.M,u.b,j.K],encapsulation:2})}return fieldMultipleEnumDropdown})();var Kt=s(66589);function Qt(e,t){if(1&e&&d.nrm(0,"field-label",3),2&e){const e=d.XpG();d.Y8G("fieldname",e.fieldname)("fieldconfig",e.fieldconfig)}}function Zt(e,t){1&e&&d.nrm(0,"system-stencil")}function es(e,t){if(1&e){const e=d.RV6();d.j41(0,"button",8),d.bIt("click",(function(){d.eBV(e);const t=d.XpG(3);return d.Njj(t.setEditMode())})),d.nrm(1,"system-button-icon",9),d.k0s()}2&e&&(d.R7$(),d.Y8G("icon","edit"))}function ts(e,t){if(1&e&&(d.j41(0,"span"),d.EFF(1),d.k0s(),d.DNE(2,es,2,1,"button",7)),2&e){const e=d.XpG(2);d.R7$(),d.JRh(e.getValue()),d.R7$(),d.Y8G("ngIf",e.view.isEditable)}}function ss(e,t){if(1&e&&(d.j41(0,"div",4),d.DNE(1,Zt,1,0,"system-stencil",5)(2,ts,3,2,"ng-template",null,6,d.C5r),d.k0s()),2&e){const e=d.sdS(3),t=d.XpG();d.R7$(),d.Y8G("ngIf",t.model.isLoading)("ngIfElse",e)}}function is(e,t){if(1&e){const e=d.RV6();d.j41(0,"system-input-radio",14),d.mxI("ngModelChange",(function(t){d.eBV(e);const s=d.XpG(2);return d.DH7(s.value,t)||(s.value=t),d.Njj(t)})),d.EFF(1),d.k0s()}if(2&e){const e=t.$implicit,s=d.XpG(2);d.Y8G("name",s.fieldid)("value",e.value),d.R50("ngModel",s.value),d.R7$(),d.JRh(e.display)}}function ns(e,t){if(1&e&&(d.j41(0,"div",10)(1,"div",11)(2,"div",12),d.DNE(3,is,2,4,"system-input-radio",13),d.k0s()()()),2&e){const e=d.XpG();d.R7$(3),d.Y8G("ngForOf",e.options)}}let ls=(()=>{class fieldEnumAlternate extends Ke{setValue(e){this.value=e}static#e=this.ɵfac=(()=>{let e;return function(t){return(e||(e=d.xGo(fieldEnumAlternate)))(t||fieldEnumAlternate)}})();static#t=this.ɵcmp=d.VBU({type:fieldEnumAlternate,selectors:[["field-enum-alternate"]],features:[d.Vt3],decls:3,vars:3,consts:[[3,"fieldname","fieldconfig",4,"ngIf"],["class","slds-text-body--regular slds-truncate slds-m-vertical--small spice-fieldbody",4,"ngIf"],["class","slds-form-element",4,"ngIf"],[3,"fieldname","fieldconfig"],[1,"slds-text-body--regular","slds-truncate","slds-m-vertical--small","spice-fieldbody"],[4,"ngIf","ngIfElse"],["displaycontent",""],["style","float: right","class","slds-button slds-button--icon",3,"click",4,"ngIf"],[1,"slds-button","slds-button--icon",2,"float","right",3,"click"],[3,"icon"],[1,"slds-form-element"],[1,"slds-form-element__control"],[1,"slds-grid--vertical"],[3,"name","value","ngModel","ngModelChange",4,"ngFor","ngForOf"],[3,"name","value","ngModel","ngModelChange"]],template:function(e,t){1&e&&d.DNE(0,Qt,1,2,"field-label",0)(1,ss,4,2,"div",1)(2,ns,4,1,"div",2),2&e&&(d.Y8G("ngIf",t.displayLabel),d.R7$(),d.Y8G("ngIf",!t.isEditMode()),d.R7$(),d.Y8G("ngIf",t.isEditMode()))},dependencies:[i.Sq,i.bT,n.BC,n.vS,I.t,Kt.J,lt.O,u.b],encapsulation:2})}return fieldEnumAlternate})();function os(e,t){if(1&e){const e=d.RV6();d.j41(0,"div",6)(1,"input",7),d.mxI("ngModelChange",(function(t){d.eBV(e);const s=d.XpG(2);return d.DH7(s.value,t)||(s.value=t),d.Njj(t)})),d.k0s(),d.j41(2,"label",8),d.nrm(3,"span",9),d.j41(4,"span",10),d.EFF(5),d.k0s()()()}if(2&e){const e=t.$implicit,s=d.XpG(2);d.R7$(),d.Y8G("id",s.fieldid+e.value)("value",e.value),d.R50("ngModel",s.value),d.R7$(),d.BMQ("for",s.fieldid+e.value),d.R7$(3),d.JRh(e.display)}}function as(e,t){if(1&e&&(d.j41(0,"field-generic-display",2)(1,"div",3),d.DNE(2,os,6,5,"div",4),d.nrm(3,"field-messages",5),d.k0s()()),2&e){const e=d.XpG();d.Y8G("fielddisplayclass",e.fielddisplayclass)("editable",e.isEditable())("fieldconfig",e.fieldconfig)("fieldid",e.fieldid),d.R7$(),d.Y8G("ngClass",e.getFieldClass()),d.R7$(),d.Y8G("ngForOf",e.options),d.R7$(),d.Y8G("fieldname",e.fieldname)}}function rs(e,t){if(1&e){const e=d.RV6();d.j41(0,"div",6)(1,"input",12),d.mxI("ngModelChange",(function(t){d.eBV(e);const s=d.XpG(2);return d.DH7(s.value,t)||(s.value=t),d.Njj(t)})),d.k0s(),d.j41(2,"label",8),d.nrm(3,"span",9),d.j41(4,"span",10),d.EFF(5),d.k0s()()()}if(2&e){const e=t.$implicit,s=d.XpG(2);d.R7$(),d.Y8G("id",s.fieldid+e.value)("value",e.value),d.R50("ngModel",s.value),d.R7$(),d.BMQ("for",s.fieldid+e.value),d.R7$(3),d.JRh(e.display)}}function ds(e,t){if(1&e&&(d.j41(0,"div",11)(1,"div",3),d.DNE(2,rs,6,5,"div",4),d.nrm(3,"field-messages",5),d.k0s()()),2&e){const e=d.XpG();d.R7$(),d.Y8G("ngClass",e.getFieldClass()),d.R7$(),d.Y8G("ngForOf",e.options),d.R7$(),d.Y8G("fieldname",e.fieldname)}}let cs=(()=>{class fieldEnumRadio extends r.s{constructor(e,t,s,i,n){super(e,t,s,i,n),this.model=e,this.view=t,this.language=s,this.metadata=i,this.router=n,this.options=[],this.subscriptions.add(this.language.currentlanguage$.subscribe((e=>{this.getOptions()})))}ngOnInit(){this.getOptions()}getValue(){return this.language.getFieldDisplayOptionValue(this.model.module,this.fieldname,this.value)}getOptions(){let e=[],t=this.language.getFieldDisplayOptions(this.model.module,this.fieldname);for(let s in t)e.push({value:s,display:t[s]});this.options=e}static#e=this.ɵfac=function(e){return new(e||fieldEnumRadio)(d.rXU(R.g),d.rXU(G.U),d.rXU(k.B),d.rXU(c.yu),d.rXU(C.Ix))};static#t=this.ɵcmp=d.VBU({type:fieldEnumRadio,selectors:[["field-enum-radio"]],features:[d.Vt3],decls:2,vars:2,consts:[[3,"fielddisplayclass","editable","fieldconfig","fieldid",4,"ngIf"],["class","slds-form-element",4,"ngIf"],[3,"fielddisplayclass","editable","fieldconfig","fieldid"],[1,"slds-form-element__control","slds-grid",3,"ngClass"],["class","slds-radio",4,"ngFor","ngForOf"],[3,"fieldname"],[1,"slds-radio"],["disabled","","type","radio","name","options",3,"id","value","ngModel","ngModelChange"],[1,"slds-radio__label"],[1,"slds-radio_faux"],[1,"slds-form-element__label"],[1,"slds-form-element"],["type","radio","name","options",3,"id","value","ngModel","ngModelChange"]],template:function(e,t){1&e&&d.DNE(0,as,4,7,"field-generic-display",0)(1,ds,4,3,"div",1),2&e&&(d.Y8G("ngIf",!t.isEditMode()),d.R7$(),d.Y8G("ngIf",t.isEditMode()))},dependencies:[i.YU,i.Sq,i.bT,n.me,n.Fm,n.BC,n.vS,j.K,D.A],encapsulation:2})}return fieldEnumRadio})();function us(e,t){if(1&e&&d.nrm(0,"field-label",3),2&e){const e=d.XpG();d.Y8G("fieldname",e.fieldname)("fieldconfig",e.fieldconfig)}}function ms(e,t){if(1&e){const e=d.RV6();d.j41(0,"field-generic-display",4)(1,"system-checkbox",5),d.mxI("ngModelChange",(function(t){d.eBV(e);const s=d.XpG();return d.DH7(s.value,t)||(s.value=t),d.Njj(t)})),d.k0s()()}if(2&e){const e=d.XpG();d.Y8G("fielddisplayclass",e.fieldbooldisplayclass)("fieldconfig",e.fieldconfig)("editable",e.isEditable()),d.R7$(),d.R50("ngModel",e.value)}}function hs(e,t){if(1&e){const e=d.RV6();d.j41(0,"div",6)(1,"div",7)(2,"system-checkbox",8),d.mxI("ngModelChange",(function(t){d.eBV(e);const s=d.XpG();return d.DH7(s.value,t)||(s.value=t),d.Njj(t)})),d.k0s()(),d.nrm(3,"field-messages",9),d.k0s()}if(2&e){const e=d.XpG();d.Y8G("ngClass",e.getFieldClass()),d.R7$(2),d.R50("ngModel",e.value),d.R7$(),d.Y8G("fieldname",e.fieldname)}}let gs=(()=>{class fieldBool extends r.s{get fieldbooldisplayclass(){return this.fielddisplayclass.replace("slds-p-vertical--x-small","slds-p-bottom--xxx-small slds-p-top--x-small")}static#e=this.ɵfac=(()=>{let e;return function(t){return(e||(e=d.xGo(fieldBool)))(t||fieldBool)}})();static#t=this.ɵcmp=d.VBU({type:fieldBool,selectors:[["field-bool"]],features:[d.Vt3],decls:3,vars:3,consts:[[3,"fieldname","fieldconfig",4,"ngIf"],[3,"fielddisplayclass","fieldconfig","editable",4,"ngIf"],["class","slds-form-element__control",3,"ngClass",4,"ngIf"],[3,"fieldname","fieldconfig"],[3,"fielddisplayclass","fieldconfig","editable"],["disabled","",3,"ngModel","ngModelChange"],[1,"slds-form-element__control",3,"ngClass"],[1,"slds-p-vertical--x-small"],[3,"ngModel","ngModelChange"],[3,"fieldname"]],template:function(e,t){1&e&&d.DNE(0,us,1,2,"field-label",0)(1,ms,2,4,"field-generic-display",1)(2,hs,4,3,"div",2),2&e&&(d.Y8G("ngIf",t.displayLabel),d.R7$(),d.Y8G("ngIf",!t.isEditMode()),d.R7$(),d.Y8G("ngIf",t.isEditable()&&t.isEditMode()))},dependencies:[i.YU,i.bT,n.BC,n.vS,Rt.f,u.b,j.K,D.A],encapsulation:2})}return fieldBool})();var ps=s(45915);function fs(e,t){if(1&e){const e=d.RV6();d.j41(0,"field-generic-display",2)(1,"system-checkbox",3),d.mxI("ngModelChange",(function(t){d.eBV(e);const s=d.XpG();return d.DH7(s.value,t)||(s.value=t),d.Njj(t)})),d.nrm(2,"system-label-fieldname",4),d.k0s()()}if(2&e){const e=d.XpG();d.Y8G("fielddisplayclass",e.fieldbooldisplayclass)("fieldconfig",e.fieldconfig)("editable",e.isEditable()),d.R7$(),d.R50("ngModel",e.value),d.R7$(),d.Y8G("module",e.model.module)("field",e.fieldname)("fieldconfig",e.fieldconfig)}}function bs(e,t){if(1&e){const e=d.RV6();d.j41(0,"div",5)(1,"div",6)(2,"system-checkbox",7),d.mxI("ngModelChange",(function(t){d.eBV(e);const s=d.XpG();return d.DH7(s.value,t)||(s.value=t),d.Njj(t)})),d.nrm(3,"system-label-fieldname",4),d.k0s()(),d.nrm(4,"field-messages",8),d.k0s()}if(2&e){const e=d.XpG();d.Y8G("ngClass",e.getFieldClass()),d.R7$(2),d.R50("ngModel",e.value),d.R7$(),d.Y8G("module",e.model.module)("field",e.fieldname)("fieldconfig",e.fieldconfig),d.R7$(),d.Y8G("fieldname",e.fieldname)}}let ys=(()=>{class fieldBoolLabelAligned extends r.s{get fieldbooldisplayclass(){return this.fielddisplayclass.replace("slds-p-vertical--x-small","slds-p-bottom--xxx-small slds-p-top--x-small")}static#e=this.ɵfac=(()=>{let e;return function(t){return(e||(e=d.xGo(fieldBoolLabelAligned)))(t||fieldBoolLabelAligned)}})();static#t=this.ɵcmp=d.VBU({type:fieldBoolLabelAligned,selectors:[["ng-component"]],features:[d.Vt3],decls:2,vars:2,consts:[[3,"fielddisplayclass","fieldconfig","editable",4,"ngIf"],["class","slds-form-element__control",3,"ngClass",4,"ngIf"],[3,"fielddisplayclass","fieldconfig","editable"],["disabled","",3,"ngModel","ngModelChange"],[3,"module","field","fieldconfig"],[1,"slds-form-element__control",3,"ngClass"],[1,"slds-p-vertical--x-small"],[3,"ngModel","ngModelChange"],[3,"fieldname"]],template:function(e,t){1&e&&d.DNE(0,fs,3,7,"field-generic-display",0)(1,bs,5,6,"div",1),2&e&&(d.Y8G("ngIf",!t.isEditMode()),d.R7$(),d.Y8G("ngIf",t.isEditable()&&t.isEditMode()))},dependencies:[i.YU,i.bT,n.BC,n.vS,Rt.f,ps.P,j.K,D.A],encapsulation:2})}return fieldBoolLabelAligned})();var vs=s(68823),_s=s(44985),ks=s(33325),Rs=s(53915),Is=s(29836);function xs(e,t){if(1&e&&d.nrm(0,"field-label",3),2&e){const e=d.XpG();d.Y8G("fieldname",e.fieldname)("fieldconfig",e.fieldconfig)}}function js(e,t){if(1&e&&d.nrm(0,"system-icon",9),2&e){const e=d.XpG(3);d.Y8G("module",e.model.data[e.parentTypeField])("size","x-small")}}function Gs(e,t){if(1&e&&(d.j41(0,"div",6),d.DNE(1,js,1,2,"system-icon",7),d.j41(2,"span",8),d.EFF(3),d.k0s()()),2&e){const e=d.XpG(2);d.R7$(),d.Y8G("ngIf",e.displayModuleIcon),d.R7$(),d.Y8G("module",e.parentType)("id",e.parentId),d.R7$(),d.JRh(e.value)}}function Cs(e,t){if(1&e&&(d.j41(0,"field-generic-display",4),d.DNE(1,Gs,4,4,"div",5),d.k0s()),2&e){const e=d.XpG();d.Y8G("fielddisplayclass",e.fielddisplayclass)("editable",e.isEditable())("fieldconfig",e.fieldconfig)("fieldid",e.fieldid),d.R7$(),d.Y8G("ngIf",e.parentId)}}function ws(e,t){if(1&e){const e=d.RV6();d.j41(0,"div",15)(1,"div",16)(2,"span",17)(3,"span",18),d.nrm(4,"system-icon",9),d.k0s(),d.j41(5,"span",19),d.EFF(6),d.k0s(),d.j41(7,"button",20),d.bIt("click",(function(){d.eBV(e);const t=d.XpG(2);return d.Njj(t.clearParent())})),d.nrm(8,"system-button-icon",21),d.k0s()()()()}if(2&e){const e=d.XpG(2);d.R7$(4),d.Y8G("module",e.model.data[e.parentTypeField])("size","small"),d.R7$(2),d.JRh(e.parentName),d.R7$(2),d.Y8G("icon","close")}}function Ss(e,t){if(1&e){const e=d.RV6();d.j41(0,"li",42),d.bIt("click",(function(){const t=d.eBV(e).$implicit,s=d.XpG(4);return d.Njj(s.setParentType(t))})),d.j41(1,"div",43)(2,"div",44),d.nrm(3,"system-icon",45),d.j41(4,"div",46),d.nrm(5,"system-label-modulename",47),d.k0s()()()()}if(2&e){const e=t.$implicit;d.R7$(3),d.Y8G("module",e),d.R7$(2),d.Y8G("module",e)}}const Es=e=>({"slds-is-open":e});function Ls(e,t){if(1&e){const e=d.RV6();d.j41(0,"div",33)(1,"div",11)(2,"div",34)(3,"div",35)(4,"div",25)(5,"div",36),d.bIt("click",(function(){d.eBV(e);const t=d.XpG(3);return d.Njj(t.openParentTypes())})),d.nrm(6,"input",37)(7,"system-icon",38),d.k0s(),d.j41(8,"div",39)(9,"ul",40),d.DNE(10,Ss,6,2,"li",41),d.k0s()()()()()()()}if(2&e){const e=d.XpG(3);d.R7$(4),d.Y8G("ngClass",d.eq3(3,Es,e.parentTypeSelectOpen)),d.R7$(2),d.Y8G("value",e.language.getModuleName(e.parentType)),d.R7$(4),d.Y8G("ngForOf",e.parentTypes)}}function Ds(e,t){if(1&e){const e=d.RV6();d.j41(0,"field-lookup-recent",48),d.bIt("selectedObject",(function(t){d.eBV(e);const s=d.XpG(3);return d.Njj(s.setParent(t))})),d.k0s()}if(2&e){d.XpG();const e=d.sdS(6),t=d.XpG(2);d.Y8G("module",t.parentType)("inputElement",e)}}function Fs(e,t){if(1&e){const e=d.RV6();d.j41(0,"field-lookup-search",49),d.bIt("selectedObject",(function(t){d.eBV(e);const s=d.XpG(3);return d.Njj(s.setParent(t))}))("searchWithModal",(function(){d.eBV(e);const t=d.XpG(3);return d.Njj(t.searchWithModal())})),d.k0s()}if(2&e){d.XpG();const e=d.sdS(6),t=d.XpG(2);d.Y8G("module",t.parentType)("inputElement",e)("searchterm",t.parentSearchTerm)}}function Ms(e,t){if(1&e){const e=d.RV6();d.j41(0,"div",22),d.DNE(1,Ls,11,5,"div",23),d.j41(2,"div",24)(3,"div",25)(4,"div",26)(5,"input",27,28),d.bIt("focus",(function(){d.eBV(e);const t=d.XpG(2);return d.Njj(t.onFocusParent())})),d.mxI("ngModelChange",(function(t){d.eBV(e);const s=d.XpG(2);return d.DH7(s.parentSearchTerm,t)||(s.parentSearchTerm=t),d.Njj(t)})),d.k0s(),d.j41(7,"button",29),d.bIt("click",(function(){d.eBV(e);const t=d.XpG(2);return d.Njj(t.searchWithModal())})),d.nrm(8,"system-button-icon",21),d.k0s()(),d.j41(9,"div",30),d.DNE(10,Ds,1,2,"field-lookup-recent",31)(11,Fs,1,3,"field-lookup-search",32),d.k0s()()()()}if(2&e){const e=d.XpG(2);d.R7$(),d.Y8G("ngIf",e.parentTypes.length>0),d.R7$(2),d.Y8G("ngClass",d.eq3(8,Es,e.parentSearchOpen)),d.R7$(2),d.R50("ngModel",e.parentSearchTerm),d.Y8G("placeholder",e.language.getModuleCombinedLabel("LBL_SEARCH",e.parentType)),d.R7$(3),d.Y8G("icon","search"),d.R7$(),d.Y8G("ngStyle",e.dropdownStyle),d.R7$(),d.Y8G("ngIf",""===e.parentSearchTerm),d.R7$(),d.Y8G("ngIf",""!==e.parentSearchTerm)}}function Ts(e,t){if(1&e&&(d.j41(0,"div",10)(1,"div",11),d.DNE(2,ws,9,4,"div",12)(3,Ms,12,10,"div",13),d.k0s(),d.nrm(4,"field-messages",14),d.k0s()),2&e){const e=d.XpG();d.Y8G("ngClass",e.getFieldClass()),d.R7$(2),d.Y8G("ngIf",e.model.data[e.parentIdField]),d.R7$(),d.Y8G("ngIf",!e.model.data[e.parentIdField]),d.R7$(),d.Y8G("fieldname",e.fieldname)}}let Bs=(()=>{class fieldParent extends r.s{constructor(e,t,s,i,n,l,o,a,r,d,c){super(e,t,l,o,a),this.model=e,this.view=t,this.backend=s,this.toast=i,this.broadcast=n,this.language=l,this.metadata=o,this.router=a,this.elementRef=r,this.renderer=d,this.modal=c,this.parentTypeSelectOpen=!1,this.parentSearchOpen=!1,this.parentSearchTerm="",this.recentItems=[],this.parentTypes=[],this.broadcast.message$.subscribe((e=>this.handleMessage(e)))}get parentIdField(){let e=this.metadata.getFieldDefs(this.model.module,this.fieldname);return this.fieldconfig.parentIdField?this.fieldconfig.parentIdField:e?.id_name?e.id_name:"parent_id"}get parentTypeField(){let e=this.metadata.getFieldDefs(this.model.module,this.fieldname);return this.fieldconfig.parentTypeField?this.fieldconfig.parentTypeField:e?.type_name?e.type_name:"parent_type"}get parentName(){return this.model.getField(this.fieldname)}get parentType(){return this.model.getField(this.parentTypeField)}get parentId(){return this.model.getField(this.parentIdField)}get displayModuleIcon(){return!this.fieldconfig.hidemoduleicon}ngOnInit(){super.ngOnInit(),this.determineParentTypes(),!this.view.isEditMode()||this.model.getField(this.parentTypeField)&&""!=this.model.getField(this.parentTypeField)||this.model.setField(this.parentTypeField,this.parentTypes[0])}get dropdownStyle(){let e=this.elementRef.nativeElement.getBoundingClientRect();return{"max-width":"initial",left:"initial",width:e.width-5+"px",right:"-"+(e.width/2-5)+"px"}}handleViewModeChange(e){"edit"==e&&this.view.editfieldid&&this.view.editfieldid==this.fieldid&&this.setFocus(),"edit"!=e||this.model.getField(this.parentTypeField)&&""!=this.model.getField(this.parentTypeField)||this.model.setField(this.parentTypeField,this.parentTypes[0])}determineParentTypes(){let e=[];this.fieldconfig.parenttypes?e=this.fieldconfig.parenttypes.replace(/\s/g,"").split(","):this.field_defs.parent_modules&&(e=this.field_defs.parent_modules),this.fieldconfig.sortbyparenttypes||e.sort(((e,t)=>this.language.getModuleName(e).toLowerCase()>this.language.getModuleName(t).toLowerCase()?1:-1)),this.parentTypes=e}handleMessage(e){if(e.messagedata.reference&&"model.save"===e.messagetype)if(this.fieldid===e.messagedata.reference){this.parentSearchTerm="";let t={};t[this.parentIdField]=e.messagedata.data.id,t[this.fieldname]=e.messagedata.data.summary_text,this.model.setFields(t,!0)}}onClick(e){this.elementRef.nativeElement.contains(e.target)||this.closePopups()}closePopups(){this.model.getField(this.parentIdField)&&(this.parentSearchTerm=""),this.parentSearchOpen=!1,this.parentTypeSelectOpen=!1,this.clickListener()}setParent(e){this.model.setField(this.fieldname,e.text),this.model.setField(this.parentIdField,e.id),2==this.fieldconfig.executeCopyRules?this.executeCopyRules(e.id):1==this.fieldconfig.executeCopyRules&&this.modal.confirm(this.language.getLabel("MSG_COPY_DATA","","long"),this.language.getLabel("MSG_COPY_DATA")).subscribe((t=>t&&this.executeCopyRules(e.id)))}executeCopyRules(e){let t=this.modal.await("LBL_LOADING");this.backend.get(this.parentType,e).subscribe((e=>{let s={module:this.parentType,id:e.id,data:e};this.model.executeCopyRulesParent(s),t.emit()}),(()=>{this.toast.sendToast("ERR_LOADING_RECORD","error"),t.emit()}))}toggleParentTypeSelect(){this.parentTypeSelectOpen=!this.parentTypeSelectOpen,this.parentSearchOpen=!1}setParentType(e){this.parentSearchTerm="",this.model.setField(this.parentTypeField,e),this.parentTypeSelectOpen=!1}clearParent(){this.fieldconfig.promptondelete?this.modal.confirm(this.language.getLabelFormatted("LBL_PROMPT_DELETE_RELATIONSHIP",[this.language.getFieldDisplayName(this.model.module,this.fieldname,this.fieldconfig)],"long"),this.language.getLabelFormatted("LBL_PROMPT_DELETE_RELATIONSHIP",[this.language.getFieldDisplayName(this.model.module,this.fieldname,this.fieldconfig)])).subscribe((e=>{e&&this.removeRelated()})):this.removeRelated()}removeRelated(){this.model.setField(this.fieldname,""),this.model.setField(this.parentIdField,"")}openParentTypes(){this.parentTypeSelectOpen=!0,this.parentSearchOpen=!1,this.clickListener=this.renderer.listen("document","click",(e=>this.onClick(e)))}onFocusParent(){this.parentTypeSelectOpen=!1,this.parentSearchOpen=!0,this.clickListener=this.renderer.listen("document","click",(e=>this.onClick(e)))}searchWithModal(){this.parentSearchOpen=!1,this.modal.openModal("ObjectModalModuleLookup").subscribe((e=>{e.instance.module=this.parentType,e.instance.multiselect=!1,e.instance.selectedItems.subscribe((e=>{e.length&&this.setParent({id:e[0].id,text:e[0].summary_text,data:e[0]})})),e.instance.searchTerm=this.parentSearchTerm}))}static#e=this.ɵfac=function(e){return new(e||fieldParent)(d.rXU(R.g),d.rXU(G.U),d.rXU(ee.H),d.rXU(te.o),d.rXU(se.m),d.rXU(k.B),d.rXU(c.yu),d.rXU(C.Ix),d.rXU(d.aKT),d.rXU(d.sFG),d.rXU(w.y))};static#t=this.ɵcmp=d.VBU({type:fieldParent,selectors:[["field-parent"]],features:[d.Vt3],decls:3,vars:3,consts:[[3,"fieldname","fieldconfig",4,"ngIf"],[3,"fielddisplayclass","editable","fieldconfig","fieldid",4,"ngIf"],["class","slds-form-element__control",3,"ngClass",4,"ngIf"],[3,"fieldname","fieldconfig"],[3,"fielddisplayclass","editable","fieldconfig","fieldid"],["class","slds-grid slds-grid_vertical-align-center",4,"ngIf"],[1,"slds-grid","slds-grid_vertical-align-center"],[3,"module","size",4,"ngIf"],["system-model-popover","",3,"module","id"],[3,"module","size"],[1,"slds-form-element__control",3,"ngClass"],[1,"slds-form-element"],["class","slds-form-element__control slds-p-around--xx-small",4,"ngIf"],["class","slds-combobox-group slds-p-around--xx-small",4,"ngIf"],[3,"fieldname"],[1,"slds-form-element__control","slds-p-around--xx-small"],[1,"slds-pill_container"],[1,"slds-pill","slds-size--1-of-1"],[1,"slds-icon_container","slds-icon-standard-account","slds-pill__icon_container"],[1,"slds-pill__label"],[1,"slds-button","slds-button--icon","slds-pill__remove",3,"click"],[3,"icon"],[1,"slds-combobox-group","slds-p-around--xx-small"],["class","slds-combobox_object-switcher slds-combobox-addon_start",4,"ngIf"],[1,"slds-combobox_container","slds-combobox-addon_end"],["role","combobox",1,"slds-combobox","slds-dropdown-trigger","slds-dropdown-trigger_click",3,"ngClass"],["role","none",1,"slds-combobox__form-element","slds-input-has-icon","slds-input-has-icon_right"],["type","text","aria-autocomplete","list","autoComplete","off","role","textbox",1,"slds-input","slds-combobox__input",3,"ngModel","placeholder","focus","ngModelChange"],["focus",""],[1,"slds-button","slds-button_icon","slds-input__icon","slds-input__icon_right",3,"click"],["role","listbox",1,"slds-dropdown","slds-dropdown_fluid",3,"ngStyle"],[3,"module","inputElement","selectedObject",4,"ngIf"],[3,"module","inputElement","searchterm","selectedObject","searchWithModal",4,"ngIf"],[1,"slds-combobox_object-switcher","slds-combobox-addon_start"],[1,"slds-form-element__control"],[1,"slds-combobox_container"],[1,"slds-combobox__form-element","slds-input-has-icon","slds-input-has-icon--right",3,"click"],["type","text","readonly","","autoComplete","off","role","textbox",1,"slds-input","slds-combobox__input","slds-combobox__input-value",3,"value"],["icon","down","sprite","utility","addclasses","slds-input__icon slds-input__icon_right"],["role","listbox",1,"slds-dropdown","slds-dropdown_length-5","slds-dropdown_x-small","slds-dropdown_left"],["role","group","aria-label","Suggested for you",1,"slds-listbox","slds-listbox_vertical"],["role","presentation","class","slds-listbox__item",3,"click",4,"ngFor","ngForOf"],["role","presentation",1,"slds-listbox__item",3,"click"],["role","option",1,"slds-media","slds-listbox__option","slds-listbox__option_plain","slds-media_small"],[1,"slds-grid","slds-grid--vertical-align-center"],["size","x-small",3,"module"],[1,"slds-truncate"],[3,"module"],[3,"module","inputElement","selectedObject"],[3,"module","inputElement","searchterm","selectedObject","searchWithModal"]],template:function(e,t){1&e&&d.DNE(0,xs,1,2,"field-label",0)(1,Cs,2,5,"field-generic-display",1)(2,Ts,5,4,"div",2),2&e&&(d.Y8G("ngIf",t.displayLabel),d.R7$(),d.Y8G("ngIf",!t.isEditMode()),d.R7$(),d.Y8G("ngIf",t.isEditable()&&t.isEditMode()))},dependencies:[i.YU,i.Sq,i.bT,i.B3,n.me,n.BC,n.vS,I.t,vs.J,_s.r,ks.j,u.b,j.K,Rs._,Is.T,D.A],encapsulation:2})}return fieldParent})();var $s=s(56420);function Os(e,t){if(1&e&&d.nrm(0,"field-label",3),2&e){const e=d.XpG();d.Y8G("fieldname",e.fieldname)("fieldconfig",e.fieldconfig)}}function Xs(e,t){if(1&e&&(d.j41(0,"field-generic-display",4)(1,"a",5),d.EFF(2),d.k0s()()),2&e){const e=d.XpG();d.Y8G("fielddisplayclass",e.fielddisplayclass)("editable",e.isEditable())("fieldconfig",e.fieldconfig),d.R7$(2),d.JRh(e.value)}}function Us(e,t){if(1&e){const e=d.RV6();d.j41(0,"div",11)(1,"div",12)(2,"span",13)(3,"span",14),d.nrm(4,"system-icon",15),d.k0s(),d.j41(5,"span",16),d.EFF(6),d.k0s(),d.j41(7,"button",17),d.bIt("click",(function(){d.eBV(e);const t=d.XpG(2);return d.Njj(t.clearFilter())})),d.nrm(8,"system-button-icon",18),d.k0s()()()()}if(2&e){const e=d.XpG(2);d.R7$(4),d.Y8G("module",e.model.data.module)("size","small"),d.R7$(2),d.JRh(e.moduleFilterName),d.R7$(2),d.Y8G("icon","close")}}function Ys(e,t){if(1&e){const e=d.RV6();d.j41(0,"li",35),d.bIt("click",(function(){const t=d.eBV(e).$implicit,s=d.XpG(4);return d.Njj(s.setModule(t))})),d.j41(1,"div",36)(2,"div",37),d.nrm(3,"system-icon",38),d.j41(4,"div",39),d.nrm(5,"system-label-modulename",40),d.k0s()()()()}if(2&e){const e=t.$implicit;d.R7$(3),d.Y8G("module",e),d.R7$(2),d.Y8G("module",e)}}const Ns=e=>({"slds-is-open":e});function Vs(e,t){if(1&e){const e=d.RV6();d.j41(0,"div",26)(1,"div",7)(2,"div",22)(3,"div",27)(4,"div",28)(5,"div",29),d.bIt("click",(function(){d.eBV(e);const t=d.XpG(3);return d.Njj(t.openModules())})),d.nrm(6,"input",30)(7,"system-icon",31),d.k0s(),d.j41(8,"div",32)(9,"ul",33),d.DNE(10,Ys,6,2,"li",34),d.k0s()()()()()()()}if(2&e){const e=d.XpG(3);d.R7$(4),d.Y8G("ngClass",d.eq3(3,Ns,e.moduleSelectOpen)),d.R7$(2),d.Y8G("value",e.language.getModuleName(e.module)),d.R7$(4),d.Y8G("ngForOf",e.modules)}}function As(e,t){if(1&e&&(d.j41(0,"option",41),d.EFF(1),d.k0s()),2&e){const e=t.$implicit;d.Y8G("value",e.id),d.R7$(),d.JRh(e.name)}}function Ps(e,t){if(1&e){const e=d.RV6();d.j41(0,"div",19),d.DNE(1,Vs,11,5,"div",20),d.j41(2,"div",21)(3,"div",22)(4,"div",23)(5,"select",24),d.bIt("click",(function(){d.eBV(e);const t=d.XpG(2);return d.Njj(t.moduleSelectOpen=!1)})),d.mxI("ngModelChange",(function(t){d.eBV(e);const s=d.XpG(2);return d.DH7(s.moduleFilter,t)||(s.moduleFilter=t),d.Njj(t)})),d.DNE(6,As,2,2,"option",25),d.k0s()()()()()}if(2&e){const e=d.XpG(2);d.R7$(),d.Y8G("ngIf",e.modules.length>1),d.R7$(4),d.Y8G("disabled",!e.module||0==e.moduleFilters.length),d.R50("ngModel",e.moduleFilter),d.R7$(),d.Y8G("ngForOf",e.moduleFilters)}}function zs(e,t){if(1&e&&(d.j41(0,"div",6)(1,"div",7),d.DNE(2,Us,9,4,"div",8)(3,Ps,7,4,"div",9),d.k0s(),d.nrm(4,"field-messages",10),d.k0s()),2&e){const e=d.XpG();d.Y8G("ngClass",e.getFieldClass()),d.R7$(2),d.Y8G("ngIf",e.model.data.module_filter),d.R7$(),d.Y8G("ngIf",!e.model.data.module_filter),d.R7$(),d.Y8G("fieldname",e.fieldname)}}let Hs=(()=>{class fieldModuleFilter extends r.s{constructor(e,t,s,i,n,l,o,a,r,d){super(e,t,n,l,o),this.model=e,this.view=t,this.popup=s,this.broadcast=i,this.language=n,this.metadata=l,this.router=o,this.elementRef=a,this.renderer=r,this.modal=d,this.moduleSelectOpen=!1,this.modules=[],this.popup.closePopup$.subscribe((()=>this.closePopups())),this.broadcast.message$.subscribe((e=>this.handleMessage(e)))}get moduleFilterName(){let e=this.metadata.getModuleFilter(this.moduleFilter);return e?e.name:""}get module(){return this.model.getField("module")||this.modules[0]}get value(){return this.moduleFilterName}get moduleFilters(){return this.metadata.getModuleFilters(this.module)}set moduleFilter(e){this.model.setField("module_filter",e)}get moduleFilter(){return this.model.getField("module_filter")}ngOnInit(){this.modules=this.parentTypes,this.setModule(this.module)}get parentTypes(){let e=["Contacts","Accounts","Leads","Users"];return this.fieldconfig.parenttypes&&(e=this.fieldconfig.parenttypes.replace(/\s/g,"").split(",")),e}setModule(e){this.model.setField("module",e),this.moduleSelectOpen=!1}clearFilter(){this.model.setField("module_filter","")}handleMessage(e){if(e.messagedata.reference&&"model.save"===e.messagetype)if(this.fieldid===e.messagedata.reference){let t={module_filter:e.messagedata.data.id};t[this.fieldname]=e.messagedata.data.summary_text,this.model.setFields(t)}}onClick(e){this.elementRef.nativeElement.contains(e.target)||this.closePopups()}openModules(){this.moduleSelectOpen=!0,this.clickListener=this.renderer.listen("document","click",(e=>this.onClick(e)))}closePopups(){this.moduleSelectOpen=!1,this.clickListener()}static#e=this.ɵfac=function(e){return new(e||fieldModuleFilter)(d.rXU(R.g),d.rXU(G.U),d.rXU($s.l),d.rXU(se.m),d.rXU(k.B),d.rXU(c.yu),d.rXU(C.Ix),d.rXU(d.aKT),d.rXU(d.sFG),d.rXU(w.y))};static#t=this.ɵcmp=d.VBU({type:fieldModuleFilter,selectors:[["field-modulefilter"]],features:[d.Jv_([$s.l]),d.Vt3],decls:3,vars:3,consts:[[3,"fieldname","fieldconfig",4,"ngIf"],[3,"fielddisplayclass","editable","fieldconfig",4,"ngIf"],["class","slds-form-element__control",3,"ngClass",4,"ngIf"],[3,"fieldname","fieldconfig"],[3,"fielddisplayclass","editable","fieldconfig"],["href","javascript:void(0)"],[1,"slds-form-element__control",3,"ngClass"],[1,"slds-form-element"],["class","slds-form-element__control slds-p-around--xx-small",4,"ngIf"],["class","slds-combobox-group slds-p-around--xx-small",4,"ngIf"],[3,"fieldname"],[1,"slds-form-element__control","slds-p-around--xx-small"],[1,"slds-pill_container"],[1,"slds-pill","slds-size--1-of-1"],[1,"slds-icon_container","slds-icon-standard-account","slds-pill__icon_container"],[3,"module","size"],[1,"slds-pill__label"],[1,"slds-button","slds-button--icon","slds-pill__remove",3,"click"],[3,"icon"],[1,"slds-combobox-group","slds-p-around--xx-small"],["class","slds-combobox_object-switcher slds-combobox-addon_start",4,"ngIf"],[1,"slds-form-element","slds-grow","slds-m-left--small"],[1,"slds-form-element__control"],[1,"slds-select_container"],[1,"slds-select",3,"disabled","ngModel","click","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[1,"slds-combobox_object-switcher","slds-combobox-addon_start"],[1,"slds-combobox_container"],["role","combobox",1,"slds-combobox","slds-dropdown-trigger","slds-dropdown-trigger_click",3,"ngClass"],[1,"slds-combobox__form-element","slds-input-has-icon","slds-input-has-icon--right",3,"click"],["type","text","readonly","","autoComplete","off","role","textbox",1,"slds-input","slds-combobox__input","slds-combobox__input-value",3,"value"],["icon","down","sprite","utility","addclasses","slds-input__icon slds-input__icon_right"],["role","listbox",1,"slds-dropdown","slds-dropdown_length-5","slds-dropdown_x-small","slds-dropdown_left"],["role","group","aria-label","Suggested for you",1,"slds-listbox","slds-listbox_vertical"],["role","presentation","class","slds-listbox__item",3,"click",4,"ngFor","ngForOf"],["role","presentation",1,"slds-listbox__item",3,"click"],["role","option",1,"slds-media","slds-listbox__option","slds-listbox__option_plain","slds-media_small"],[1,"slds-grid","slds-grid--vertical-align-center"],["size","x-small",3,"module"],[1,"slds-truncate"],[3,"module"],[3,"value"]],template:function(e,t){1&e&&d.DNE(0,Os,1,2,"field-label",0)(1,Xs,3,4,"field-generic-display",1)(2,zs,5,4,"div",2),2&e&&(d.Y8G("ngIf",t.displayLabel),d.R7$(),d.Y8G("ngIf",!t.isEditMode()),d.R7$(),d.Y8G("ngIf",t.isEditable()&&t.isEditMode()))},dependencies:[i.YU,i.Sq,i.bT,n.xH,n.y7,n.wz,n.BC,n.vS,I.t,vs.J,_s.r,u.b,j.K,D.A],encapsulation:2})}return fieldModuleFilter})();function qs(e,t){if(1&e&&d.nrm(0,"field-label",4),2&e){const e=d.XpG();d.Y8G("fieldname",e.fieldname)("fieldconfig",e.fieldconfig)}}let Js=(()=>{class fieldNotAuthorized extends r.s{constructor(e,t,s,i,n){super(e,t,s,i,n),this.model=e,this.view=t,this.language=s,this.metadata=i,this.router=n}static#e=this.ɵfac=function(e){return new(e||fieldNotAuthorized)(d.rXU(R.g),d.rXU(G.U),d.rXU(k.B),d.rXU(c.yu),d.rXU(C.Ix))};static#t=this.ɵcmp=d.VBU({type:fieldNotAuthorized,selectors:[["field-not-authorized"]],features:[d.Vt3],decls:4,vars:2,consts:[[3,"fieldname","fieldconfig",4,"ngIf"],[3,"fielddisplayclass"],[1,"slds-text-color_inverse-weak"],["label","LBL_NOTAUTHORIZED"],[3,"fieldname","fieldconfig"]],template:function(e,t){1&e&&(d.DNE(0,qs,1,2,"field-label",0),d.j41(1,"field-generic-display",1)(2,"span",2),d.nrm(3,"system-label",3),d.k0s()()),2&e&&(d.Y8G("ngIf",t.displayLabel),d.R7$(),d.Y8G("fielddisplayclass",t.fielddisplayclass))},dependencies:[i.bT,le.W,u.b,j.K],encapsulation:2})}return fieldNotAuthorized})();function Ws(e,t){if(1&e&&d.nrm(0,"field-label",3),2&e){const e=d.XpG();d.Y8G("fieldname",e.fieldname)("fieldconfig",e.fieldconfig)}}function Ks(e,t){1&e&&d.nrm(0,"field-not-authorized")}function Qs(e,t){if(1&e&&d.nrm(0,"system-icon",11),2&e){const e=d.XpG(3);d.Y8G("module",e.relateType)}}function Zs(e,t){if(1&e&&(d.j41(0,"span"),d.EFF(1),d.k0s()),2&e){const e=d.XpG(3);d.R7$(),d.JRh(e.value)}}function ei(e,t){1&e&&d.nrm(0,"system-label",12)}function ti(e,t){if(1&e&&(d.j41(0,"field-generic-display",6)(1,"div",7),d.DNE(2,Qs,1,1,"system-icon",8),d.j41(3,"span",9),d.DNE(4,Zs,2,1,"span",1)(5,ei,1,0,"ng-template",null,10,d.C5r),d.k0s()()()),2&e){const e=d.sdS(6),t=d.XpG(2);d.Y8G("fielddisplayclass",t.fielddisplayclass)("editable",t.isEditable())("fieldconfig",t.fieldconfig)("fieldid",t.fieldid),d.R7$(2),d.Y8G("ngIf",t.displayicon),d.R7$(),d.Y8G("module",t.relateType)("id",t.id),d.R7$(),d.Y8G("ngIf",t.value&&t.id||!t.id)("ngIfElse",e)}}function si(e,t){if(1&e){const e=d.RV6();d.j41(0,"div",25)(1,"div",26)(2,"span",27)(3,"span",28),d.nrm(4,"system-icon",29),d.k0s(),d.j41(5,"span",30),d.EFF(6),d.k0s(),d.j41(7,"button",31),d.bIt("click",(function(){d.eBV(e);const t=d.XpG(3);return d.Njj(t.clearField())})),d.nrm(8,"system-button-icon",32),d.k0s()()()()}if(2&e){const e=d.XpG(3);d.R7$(4),d.Y8G("module",e.relateType)("size","small"),d.R7$(2),d.JRh(e.model.data[e.relateNameField]),d.R7$(2),d.Y8G("icon","close")}}function ii(e,t){if(1&e){const e=d.RV6();d.j41(0,"field-lookup-recent",36),d.bIt("selectedObject",(function(t){d.eBV(e);const s=d.XpG(4);return d.Njj(s.setRelated(t))})),d.k0s()}if(2&e){d.XpG(2);const e=d.sdS(7),t=d.XpG(2);d.Y8G("inputElement",e)("module",t.relateType)}}function ni(e,t){if(1&e){const e=d.RV6();d.j41(0,"field-lookup-search",37),d.bIt("selectedObject",(function(t){d.eBV(e);const s=d.XpG(4);return d.Njj(s.setRelated(t))}))("searchWithModal",(function(){d.eBV(e);const t=d.XpG(4);return d.Njj(t.searchWithModal())})),d.k0s()}if(2&e){d.XpG(2);const e=d.sdS(7),t=d.XpG(2);d.Y8G("module",t.relateType)("inputElement",e)("modulefilter",t.fieldconfig.modulefilter)("relatefilter",t.relateFilter)("relateId",null==t.relateFilter?null:t.relateFilter.id)("disableadd",t.disableadd)("searchterm",t.relateSearchTerm)}}function li(e,t){if(1&e&&(d.j41(0,"div",33),d.DNE(1,ii,1,2,"field-lookup-recent",34)(2,ni,1,7,"field-lookup-search",35),d.k0s()),2&e){const e=d.XpG(3);d.R7$(),d.Y8G("ngIf",!e.disablerecent&&""===e.relateSearchTerm&&!e.fieldconfig.modulefilter&&!e.relatedfilterrequired),d.R7$(),d.Y8G("ngIf",!e.disablesearch&&(""!==e.relateSearchTerm||e.fieldconfig.modulefilter||e.relatedfilterrequired))}}const oi=e=>({"slds-is-open":e});function ai(e,t){if(1&e){const e=d.RV6();d.j41(0,"div",13)(1,"div",14)(2,"div",15)(3,"div",16),d.DNE(4,si,9,4,"div",17),d.j41(5,"div",18)(6,"input",19,20),d.mxI("ngModelChange",(function(t){d.eBV(e);const s=d.XpG(2);return d.DH7(s.relateSearchTerm,t)||(s.relateSearchTerm=t),d.Njj(t)})),d.bIt("blur",(function(){d.eBV(e);const t=d.XpG(2);return d.Njj(t.closePopups())}))("focus",(function(){d.eBV(e);const t=d.XpG(2);return d.Njj(t.onFocus())})),d.k0s(),d.j41(8,"button",21),d.bIt("click",(function(){d.eBV(e);const t=d.XpG(2);return d.Njj(t.searchWithModal())})),d.nrm(9,"system-button-icon",22),d.k0s()(),d.DNE(10,li,3,2,"div",23),d.k0s()()(),d.nrm(11,"field-messages",24),d.k0s()}if(2&e){const e=d.XpG(2);d.Y8G("ngClass",e.getFieldClass()),d.R7$(3),d.Y8G("ngClass",d.eq3(12,oi,e.relateSearchOpen)),d.R7$(),d.Y8G("ngIf",e.id),d.R7$(),d.AVh("slds-hide",!!e.model.data[e.relateIdField]),d.Y8G("ngClass",e.getFieldClass()),d.R7$(),d.Y8G("disabled",e.disabled),d.R50("ngModel",e.relateSearchTerm),d.Y8G("placeholder",e.placeholder)("autocomplete",e.fieldid),d.R7$(4),d.Y8G("ngIf",!e.disablerecent||!e.disablesearch),d.R7$(),d.Y8G("fieldname",e.fieldname)}}function ri(e,t){if(1&e&&d.DNE(0,ti,7,9,"field-generic-display",4)(1,ai,12,14,"div",5),2&e){const e=d.XpG();d.Y8G("ngIf",!e.isEditMode()),d.R7$(),d.Y8G("ngIf",e.isEditable()&&e.isEditMode())}}let di=(()=>{class fieldRelate extends r.s{constructor(e,t,s,i,n,l,o,a,r){super(e,t,s,i,n),this.model=e,this.view=t,this.language=s,this.metadata=i,this.router=n,this.elementRef=l,this.modal=o,this.backend=a,this.toast=r,this.relateIdField="",this.relateNameField="",this.relateType="",this.relateSearchOpen=!1,this.relateSearchTerm="",this.isAuthorized=!0}get displayicon(){return!!this.fieldconfig.displayicon}get disableadd(){return this.fieldconfig.disableadd}get disablerecent(){return!!this.fieldconfig.disablerecent}get disablesearch(){return!!this.fieldconfig.disablesearch}get id(){return this.model.getField(this.relateIdField)}ngOnInit(){const e=this.metadata.getFieldDefs(this.model.module,this.fieldname);this.relateIdField=e.id_name,this.relateNameField=this.fieldname,this.relateType=e.module,this.isAuthorized=this.metadata.checkModuleAcl(e.module,"list")||this.metadata.checkModuleAcl(e.module,"listrelated"),this.handleRelateFIlterField()}handleRelateFIlterField(){this.fieldconfig.relatefilterfield&&(this.createRelateFilter(),this.subscriptions.add(this.model.data$.subscribe((e=>{this.updateRelateFilter()}))))}createRelateFilter(){let e=this.metadata.getFieldDefs(this.model.module,this.fieldconfig.relatefilterfield);e&&(this.relateFilter={module:e.module,relationship:this.fieldconfig.relatefilterrelationship,id:this.model.getField(e.id_name),display:this.model.getField(this.fieldconfig.relatefilterfield),active:!!this.model.getField(e.id_name),required:!!this.fieldconfig.relatedfilterrequired})}get placeholder(){if(this.relateFilter&&this.fieldconfig.relatedfilterrequired){let e=this.metadata.getFieldDefs(this.model.module,this.fieldconfig.relatefilterfield);if(!this.model.getField(e.id_name))return this.language.getLabelFormatted("LBL_SELECT_FIELD_FIRST",[this.language.getFieldDisplayName(this.model.module,this.fieldconfig.relatefilterfield)])}return this.language.getModuleCombinedLabel("LBL_SEARCH",this.relateType)}get relatedfilterrequired(){return this.fieldconfig.relatedfilterrequired}get disabled(){if(this.relateFilter&&this.relatedfilterrequired){let e=this.metadata.getFieldDefs(this.model.module,this.fieldconfig.relatefilterfield);if(!this.model.getField(e.id_name))return!0}return!1}updateRelateFilter(){let e=this.metadata.getFieldDefs(this.model.module,this.fieldconfig.relatefilterfield);this.relateFilter.id=this.model.getField(e.id_name),this.relateFilter.display=this.model.getField(this.fieldconfig.relatefilterfield),this.fieldconfig.relatedfilterrequired&&!this.relateFilter.id&&this.id&&this.removeRelated(),this.relateFilter.active=!!this.relateFilter.id}closePopups(){this.model.getField(this.relateIdField)&&(this.relateSearchTerm=""),this.relateSearchOpen=!1}clearField(){this.fieldconfig.promptondelete?this.modal.confirm(this.language.getLabelFormatted("LBL_PROMPT_DELETE_RELATIONSHIP",[this.language.getFieldDisplayName(this.model.module,this.fieldname,this.fieldconfig)],"long"),this.language.getLabelFormatted("LBL_PROMPT_DELETE_RELATIONSHIP",[this.language.getFieldDisplayName(this.model.module,this.fieldname,this.fieldconfig)])).subscribe((e=>{e&&this.removeRelated()})):this.removeRelated()}removeRelated(){let e={};e[this.relateNameField]="",e[this.relateIdField]="",this.model.setFields(e)}onFocus(){this.relateSearchOpen=!0}setRelated(e){let t={};t[this.relateIdField]=e.id,t[this.relateNameField]=e.text,this.model.setFields(t),2==this.fieldconfig.executeCopyRules?this.executeCopyRules(e.id):1==this.fieldconfig.executeCopyRules&&this.modal.confirm(this.language.getLabel("MSG_COPY_DATA","","long"),this.language.getLabel("MSG_COPY_DATA")).subscribe((t=>t&&this.executeCopyRules(e.id))),this.closePopups()}executeCopyRules(e){let t=this.modal.await("LBL_LOADING");this.backend.get(this.relateType,e).subscribe((e=>{let s={module:this.relateType,id:e.id,data:e};this.model.executeCopyRulesParent(s),t.emit()}),(()=>{this.toast.sendToast("ERR_LOADING_RECORD","error"),t.emit()}))}goRelated(){this.router.navigate(["/module/"+this.relateType+"/"+this.model.getField(this.relateIdField)])}searchWithModal(){this.relateSearchOpen=!1,this.modal.openModal("ObjectModalModuleLookup").subscribe((e=>{e.instance.module=this.relateType,e.instance.modulefilter=this.fieldconfig.modulefilter,e.instance.multiselect=!1,e.instance.relatefilter=this.relateFilter,this.subscriptions.add(e.instance.selectedItems.subscribe((e=>{e.length&&this.setRelated({id:e[0].id,text:e[0].summary_text,data:e[0]})}))),e.instance.searchTerm=this.relateSearchTerm}))}static#e=this.ɵfac=function(e){return new(e||fieldRelate)(d.rXU(R.g),d.rXU(G.U),d.rXU(k.B),d.rXU(c.yu),d.rXU(C.Ix),d.rXU(d.aKT),d.rXU(w.y),d.rXU(ee.H),d.rXU(te.o))};static#t=this.ɵcmp=d.VBU({type:fieldRelate,selectors:[["field-relate"]],features:[d.Jv_([$s.l]),d.Vt3],decls:4,vars:3,consts:[[3,"fieldname","fieldconfig",4,"ngIf"],[4,"ngIf","ngIfElse"],["fieldContainer",""],[3,"fieldname","fieldconfig"],[3,"fielddisplayclass","editable","fieldconfig","fieldid",4,"ngIf"],["class","slds-form-element__control slds-m-vertical--xx-small",3,"ngClass",4,"ngIf"],[3,"fielddisplayclass","editable","fieldconfig","fieldid"],[1,"slds-grid","slds-grid--vertical-align-center"],["size","x-small","divClass","slds-align--absolute-center slds-p-right--xx-small",3,"module",4,"ngIf"],["system-model-popover","",3,"module","id"],["emptyString",""],["size","x-small","divClass","slds-align--absolute-center slds-p-right--xx-small",3,"module"],["label","LBL_RECORD_WITHOUT_NAME",2,"font-style","italic"],[1,"slds-form-element__control","slds-m-vertical--xx-small",3,"ngClass"],[1,"slds-combobox_container"],[1,"slds-form-element","slds-lookup"],["role","combobox",1,"slds-combobox","slds-dropdown-trigger","slds-dropdown-trigger_click",3,"ngClass"],["class","slds-form-element__control",4,"ngIf"],[1,"slds-combobox__form-element","slds-input-has-icon","slds-input-has-icon_right",3,"ngClass"],["type","text","role","combobox",1,"slds-input","slds-combobox__input",3,"disabled","ngModel","placeholder","autocomplete","ngModelChange","blur","focus"],["focus",""],[1,"slds-button","slds-button_icon","slds-input__icon","slds-input__icon_right",3,"click"],["icon","search"],["class","slds-dropdown slds-dropdown_fluid","role","listbox",4,"ngIf"],[3,"fieldname"],[1,"slds-form-element__control"],[1,"slds-pill_container"],[1,"slds-pill","slds-size--1-of-1"],[1,"slds-icon_container","slds-icon-standard-account","slds-pill__icon_container"],[3,"module","size"],[1,"slds-pill__label"],[1,"slds-button","slds-button--icon","slds-pill__remove",3,"click"],[3,"icon"],["role","listbox",1,"slds-dropdown","slds-dropdown_fluid"],[3,"inputElement","module","selectedObject",4,"ngIf"],[3,"module","inputElement","modulefilter","relatefilter","relateId","disableadd","searchterm","selectedObject","searchWithModal",4,"ngIf"],[3,"inputElement","module","selectedObject"],[3,"module","inputElement","modulefilter","relatefilter","relateId","disableadd","searchterm","selectedObject","searchWithModal"]],template:function(e,t){if(1&e&&d.DNE(0,Ws,1,2,"field-label",0)(1,Ks,1,0,"field-not-authorized",1)(2,ri,2,2,"ng-template",null,2,d.C5r),2&e){const e=d.sdS(3);d.Y8G("ngIf",t.displayLabel),d.R7$(),d.Y8G("ngIf",!t.isAuthorized)("ngIfElse",e)}},dependencies:[i.YU,i.bT,n.me,n.BC,n.vS,I.t,vs.J,le.W,ks.j,Js,u.b,j.K,Rs._,Is.T,D.A],encapsulation:2})}return fieldRelate})();function ci(e,t){if(1&e&&(d.j41(0,"field-generic-display",2)(1,"a",3),d.EFF(2),d.k0s()()),2&e){const e=d.XpG();d.Y8G("fielddisplayclass",e.fielddisplayclass)("editable",e.isEditable())("fieldconfig",e.fieldconfig)("fieldid",e.fieldid),d.R7$(),d.Y8G("module",e.relateType)("id",e.relatedFieldId),d.R7$(),d.JRh(e.value)}}function ui(e,t){if(1&e&&(d.j41(0,"option",10),d.EFF(1),d.k0s()),2&e){const e=t.$implicit,s=d.XpG(2);d.Y8G("value",e.id),d.R7$(),d.SpI(" ",s.language.getLabel(e.summary_text)," ")}}function mi(e,t){if(1&e){const e=d.RV6();d.j41(0,"div",4)(1,"div",5)(2,"div",6)(3,"select",7),d.mxI("ngModelChange",(function(t){d.eBV(e);const s=d.XpG();return d.DH7(s.relatedFieldId,t)||(s.relatedFieldId=t),d.Njj(t)})),d.nrm(4,"option"),d.DNE(5,ui,2,2,"option",8),d.k0s()()(),d.nrm(6,"field-messages",9),d.k0s()}if(2&e){const e=d.XpG();d.R7$(3),d.R50("ngModel",e.relatedFieldId),d.R7$(2),d.Y8G("ngForOf",e.relatedList)("ngForTrackBy",e.trackByFn),d.R7$(),d.Y8G("fieldname",e.fieldname)}}let hi=(()=>{class fieldRelateList extends r.s{constructor(e,t,s,i,n,l,o,a,r){super(e,t,s,i,n),this.model=e,this.view=t,this.language=s,this.metadata=i,this.router=n,this.elementRef=l,this.modal=o,this.backend=a,this.toast=r,this.relatedList=[],this.relateIdField="",this.relateNameField="",this.relateType=""}get relatedFieldId(){return this.model.getField(this.relateIdField)}set relatedFieldId(e){let t=this.relatedList.find((t=>t.id==e));t&&(this.model.setField(this.relateIdField,t.id),this.model.setField(this.relateNameField,t.summary_text),this.relateType&&(2==this.fieldconfig.executeCopyRules?this.executeCopyRules(t.id):1==this.fieldconfig.executeCopyRules&&this.modal.confirm("Copy the data from related record?","Copy data?").subscribe((e=>e&&this.executeCopyRules(t.id)))))}ngOnInit(){this.setFieldDefs(),this.getRelatedList()}setFieldDefs(){const e=this.metadata.getFieldDefs(this.model.module,this.fieldname);this.relateIdField=e.id_name,this.relateNameField=this.fieldname,this.relateType=e.module}getRelatedList(){if(!this.relateType)return;let e={limit:this.fieldconfig.limit||-1,modulefilter:this.fieldconfig.modulefilter};this.backend.getList(this.relateType,[{sortfield:"name",sortirection:"ASC"}],e).subscribe((e=>{e&&e.list&&(this.relatedList=e.list)}))}executeCopyRules(e){let t=this.modal.await("LBL_LOADING");this.backend.get(this.relateType,e).subscribe((e=>{let s={module:this.relateType,id:e.id,data:e};this.model.executeCopyRulesParent(s),t.emit()}),(()=>{this.toast.sendToast("ERR_LOADING_RECORD","error"),t.emit()}))}trackByFn(e,t){return t.id}static#e=this.ɵfac=function(e){return new(e||fieldRelateList)(d.rXU(R.g),d.rXU(G.U),d.rXU(k.B),d.rXU(c.yu),d.rXU(C.Ix),d.rXU(d.aKT),d.rXU(w.y),d.rXU(ee.H),d.rXU(te.o))};static#t=this.ɵcmp=d.VBU({type:fieldRelateList,selectors:[["field-relate-list"]],features:[d.Vt3],decls:2,vars:2,consts:[[3,"fielddisplayclass","editable","fieldconfig","fieldid",4,"ngIf"],["class","slds-form-element",4,"ngIf"],[3,"fielddisplayclass","editable","fieldconfig","fieldid"],["href","javascript:void(0);","system-model-popover","",3,"module","id"],[1,"slds-form-element"],[1,"slds-form-element__control"],[1,"slds-select_container"],[1,"slds-select",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf","ngForTrackBy"],[3,"fieldname"],[3,"value"]],template:function(e,t){1&e&&d.DNE(0,ci,3,7,"field-generic-display",0)(1,mi,7,4,"div",1),2&e&&(d.Y8G("ngIf",!t.isEditMode()),d.R7$(),d.Y8G("ngIf",t.isEditable()&&t.isEditMode()))},dependencies:[i.Sq,i.bT,n.xH,n.y7,n.wz,n.BC,n.vS,ks.j,j.K,D.A],encapsulation:2})}return fieldRelateList})();function gi(e,t){if(1&e&&(d.j41(0,"li",3),d.nrm(1,"field-container",4),d.k0s()),2&e){const e=d.XpG().$implicit;d.R7$(),d.Y8G("field",e.field)("fieldconfig",e.fieldconfig)}}function pi(e,t){if(1&e&&(d.qex(0),d.DNE(1,gi,2,2,"li",2),d.bVm()),2&e){const e=t.$implicit,s=d.XpG();d.R7$(),d.Y8G("ngIf",s.model.getField(e.field))}}let fi=(()=>{class fieldLinkedDetails{constructor(e,t,s){this.model=e,this.view=t,this.metadata=s,this.fieldsetitems=[]}ngOnInit(){this.fieldsetitems=this.metadata.getFieldSetFields(this.fieldset,this.module),this.view.isEditable=!1,this.view.displayLabels=!1}ngOnChanges(e){this.model.module=this.module,this.model.id=this.data.id,this.model.setData(this.data)}static#e=this.ɵfac=function(e){return new(e||fieldLinkedDetails)(d.rXU(R.g),d.rXU(G.U),d.rXU(c.yu))};static#t=this.ɵcmp=d.VBU({type:fieldLinkedDetails,selectors:[["field-linked-details"]],inputs:{data:"data",module:"module",fieldset:"fieldset"},features:[d.Jv_([R.g,G.U]),d.OA$],decls:2,vars:1,consts:[[1,"slds-list_horizontal","slds-has-dividers_left"],[4,"ngFor","ngForOf"],["class","slds-item",4,"ngIf"],[1,"slds-item"],["fielddisplayclass","slds-align_absolute-center",3,"field","fieldconfig"]],template:function(e,t){1&e&&(d.j41(0,"ul",0),d.DNE(1,pi,2,1,"ng-container",1),d.k0s()),2&e&&(d.R7$(),d.Y8G("ngForOf",t.fieldsetitems))},dependencies:[i.Sq,i.bT,m.y],encapsulation:2})}return fieldLinkedDetails})();function bi(e,t){if(1&e&&d.nrm(0,"field-label",3),2&e){const e=d.XpG();d.Y8G("fieldname",e.fieldname)("fieldconfig",e.fieldconfig)}}function yi(e,t){1&e&&d.nrm(0,"field-not-authorized")}function vi(e,t){if(1&e&&d.nrm(0,"system-icon",11),2&e){const e=d.XpG(3);d.Y8G("module",e.relateType)}}function _i(e,t){if(1&e&&(d.j41(0,"span"),d.EFF(1),d.k0s()),2&e){const e=d.XpG(4);d.R7$(),d.JRh(e.value)}}function ki(e,t){1&e&&d.nrm(0,"system-label",14)}function Ri(e,t){if(1&e&&(d.j41(0,"span",12),d.DNE(1,_i,2,1,"span",1)(2,ki,1,0,"ng-template",null,13,d.C5r),d.k0s()),2&e){const e=d.sdS(3),t=d.XpG(3);d.Y8G("module",t.relateType)("id",t.id),d.R7$(),d.Y8G("ngIf",t.value&&t.id||!t.id)("ngIfElse",e)}}function Ii(e,t){if(1&e&&(d.j41(0,"span"),d.nrm(1,"field-linked-details",15),d.k0s()),2&e){const e=d.XpG(3);d.R7$(),d.Y8G("fieldset",e.fieldconfig.fieldset)("module",e.fielddefs.module)("data",e.relData)}}function xi(e,t){if(1&e&&(d.j41(0,"field-generic-display",6)(1,"div",7),d.DNE(2,vi,1,1,"system-icon",8)(3,Ri,4,4,"span",9)(4,Ii,2,3,"span",10),d.k0s()()),2&e){const e=d.XpG(2);d.Y8G("fielddisplayclass",e.fielddisplayclass)("editable",e.isEditable())("fieldconfig",e.fieldconfig)("fieldid",e.fieldid),d.R7$(2),d.Y8G("ngIf",e.displayicon),d.R7$(),d.Y8G("ngIf",!e.fieldconfig.fieldset),d.R7$(),d.Y8G("ngIf",e.fieldconfig.fieldset&&e.relData)}}function ji(e,t){if(1&e&&(d.j41(0,"span",34),d.EFF(1),d.k0s()),2&e){const e=d.XpG(4);d.R7$(),d.JRh(e.value)}}function Gi(e,t){if(1&e&&(d.j41(0,"span",34),d.nrm(1,"field-linked-details",15),d.k0s()),2&e){const e=d.XpG(4);d.R7$(),d.Y8G("fieldset",e.fieldconfig.fieldset)("module",e.fielddefs.module)("data",e.relData)}}function Ci(e,t){if(1&e){const e=d.RV6();d.j41(0,"div",26)(1,"div",27)(2,"span",28)(3,"span",29),d.nrm(4,"system-icon",30),d.k0s(),d.DNE(5,ji,2,1,"span",31)(6,Gi,2,3,"span",31),d.j41(7,"button",32),d.bIt("click",(function(){d.eBV(e);const t=d.XpG(3);return d.Njj(t.clearField())})),d.nrm(8,"system-button-icon",33),d.k0s()()()()}if(2&e){const e=d.XpG(3);d.R7$(4),d.Y8G("module",e.relateType)("size","small"),d.R7$(),d.Y8G("ngIf",!e.fieldconfig.fieldset),d.R7$(),d.Y8G("ngIf",e.fieldconfig.fieldset&&e.relData),d.R7$(2),d.Y8G("icon","close")}}function wi(e,t){if(1&e){const e=d.RV6();d.j41(0,"div",35)(1,"input",36,37),d.mxI("ngModelChange",(function(t){d.eBV(e);const s=d.XpG(3);return d.DH7(s.relateSearchTerm,t)||(s.relateSearchTerm=t),d.Njj(t)})),d.bIt("blur",(function(){d.eBV(e);const t=d.XpG(3);return d.Njj(t.closePopups())}))("focus",(function(){d.eBV(e);const t=d.XpG(3);return d.Njj(t.onFocus())})),d.k0s(),d.j41(3,"button",38),d.bIt("click",(function(){d.eBV(e);const t=d.XpG(3);return d.Njj(t.searchWithModal())})),d.nrm(4,"system-button-icon",39),d.k0s()()}if(2&e){const e=d.XpG(3);d.Y8G("ngClass",e.getFieldClass()),d.R7$(),d.Y8G("disabled",e.disabled),d.R50("ngModel",e.relateSearchTerm),d.Y8G("placeholder",e.placeholder)("autocomplete",e.fieldid)}}function Si(e,t){if(1&e){const e=d.RV6();d.j41(0,"field-lookup-recent",40),d.bIt("selectedObject",(function(t){d.eBV(e);const s=d.XpG(3);return d.Njj(s.setRelated(t))})),d.k0s()}if(2&e){const e=d.XpG(3);d.Y8G("module",e.relateType)}}function Ei(e,t){if(1&e){const e=d.RV6();d.j41(0,"field-lookup-search",41),d.bIt("selectedObject",(function(t){d.eBV(e);const s=d.XpG(3);return d.Njj(s.setRelated(t))}))("searchWithModal",(function(){d.eBV(e);const t=d.XpG(3);return d.Njj(t.searchWithModal())})),d.k0s()}if(2&e){const e=d.XpG(3);d.Y8G("module",e.relateType)("modulefilter",e.fieldconfig.modulefilter)("relatefilter",e.relateFilter)("relateId",null==e.relateFilter?null:e.relateFilter.id)("disableadd",e.disableadd)("searchterm",e.relateSearchTerm)}}const Li=e=>({"slds-is-open":e});function Di(e,t){if(1&e&&(d.j41(0,"div",16)(1,"div",17)(2,"div",18)(3,"div",19),d.DNE(4,Ci,9,5,"div",20)(5,wi,5,5,"div",21),d.j41(6,"div",22),d.DNE(7,Si,1,1,"field-lookup-recent",23)(8,Ei,1,6,"field-lookup-search",24),d.k0s()()()(),d.nrm(9,"field-messages",25),d.k0s()),2&e){const e=d.XpG(2);d.Y8G("ngClass",e.getFieldClass()),d.R7$(3),d.Y8G("ngClass",d.eq3(7,Li,e.relateSearchOpen)),d.R7$(),d.Y8G("ngIf",e.id),d.R7$(),d.Y8G("ngIf",!e.model.data[e.relateIdField]),d.R7$(2),d.Y8G("ngIf",""===e.relateSearchTerm&&!e.fieldconfig.modulefilter&&!e.relatedfilterrequired),d.R7$(),d.Y8G("ngIf",""!==e.relateSearchTerm||e.fieldconfig.modulefilter||e.relatedfilterrequired),d.R7$(),d.Y8G("fieldname",e.fieldname)}}function Fi(e,t){if(1&e&&d.DNE(0,xi,5,7,"field-generic-display",4)(1,Di,10,9,"div",5),2&e){const e=d.XpG();d.Y8G("ngIf",!e.isEditMode()),d.R7$(),d.Y8G("ngIf",e.isEditable()&&e.isEditMode())}}let Mi=(()=>{class fieldLinked extends r.s{constructor(e,t,s,i,n,l,o,a,r){super(e,t,s,i,n),this.model=e,this.view=t,this.language=s,this.metadata=i,this.router=n,this.elementRef=l,this.modal=o,this.backend=a,this.toast=r,this.relateIdField="",this.relateNameField="",this.relateType="",this.relateSearchOpen=!1,this.relateSearchTerm="",this.isAuthorized=!0}get displayicon(){return!!this.fieldconfig.displayicon}get disableadd(){return this.fieldconfig.disableadd}get id(){return this.model.getField(this.relateIdField)}get value(){let e=this.model.getField(this.fieldname);return this.fielddefs?.rname&&e&&e[this.fielddefs.rname]?e[this.fielddefs.rname]:""}set value(e){}get relData(){return this.model.getField(this.fieldname)??{}}ngOnInit(){if(super.ngOnInit(),this.relateIdField=this.fielddefs.id_name,this.relateNameField=this.fieldname,this.relateType=this.fielddefs.module,this.isAuthorized=this.metadata.checkModuleAcl(this.fielddefs.module,"list")||this.metadata.checkModuleAcl(this.fielddefs.module,"listrelated"),!this.fieldconfig.fieldset){let e=this.metadata.getComponentConfig("fieldLinked",this.fielddefs.module);e.fieldset&&(this.fieldconfig.fieldset=e.fieldset)}this.handleRelateFilterField()}handleRelateFilterField(){this.fieldconfig.relatefilterfield&&(this.createRelateFilter(),this.subscriptions.add(this.model.data$.subscribe((e=>{this.updateRelateFilter()}))))}createRelateFilter(){let e=this.metadata.getFieldDefs(this.model.module,this.fieldconfig.relatefilterfield);e&&(this.relateFilter={module:e.module,relationship:this.fieldconfig.relatefilterrelationship,id:this.model.getField(e.id_name),display:this.model.getField(this.fieldconfig.relatefilterfield),active:!!this.model.getField(e.id_name),required:!!this.fieldconfig.relatedfilterrequired})}get placeholder(){if(this.relateFilter&&this.fieldconfig.relatedfilterrequired){let e=this.metadata.getFieldDefs(this.model.module,this.fieldconfig.relatefilterfield);if(!this.model.getField(e.id_name))return this.language.getLabelFormatted("LBL_SELECT_FIELD_FIRST",[this.language.getFieldDisplayName(this.model.module,this.fieldconfig.relatefilterfield)])}return this.language.getModuleCombinedLabel("LBL_SEARCH",this.relateType)}get relatedfilterrequired(){return this.fieldconfig.relatedfilterrequired}get disabled(){if(this.relateFilter&&this.relatedfilterrequired){let e=this.metadata.getFieldDefs(this.model.module,this.fieldconfig.relatefilterfield);if(!this.model.getField(e.id_name))return!0}return!1}updateRelateFilter(){let e=this.metadata.getFieldDefs(this.model.module,this.fieldconfig.relatefilterfield);this.relateFilter.id=this.model.getField(e.id_name),this.relateFilter.display=this.model.getField(this.fieldconfig.relatefilterfield),this.fieldconfig.relatedfilterrequired&&!this.relateFilter.id&&this.id&&this.removeRelated(),this.relateFilter.active=!!this.relateFilter.id}closePopups(){this.model.getField(this.relateIdField)&&(this.relateSearchTerm=""),this.relateSearchOpen=!1}clearField(){this.fieldconfig.promptondelete?this.modal.confirm(this.language.getLabelFormatted("LBL_PROMPT_DELETE_RELATIONSHIP",[this.language.getFieldDisplayName(this.model.module,this.fieldname,this.fieldconfig)],"long"),this.language.getLabelFormatted("LBL_PROMPT_DELETE_RELATIONSHIP",[this.language.getFieldDisplayName(this.model.module,this.fieldname,this.fieldconfig)])).subscribe((e=>{e&&this.removeRelated()})):this.removeRelated()}removeRelated(){let e={};e[this.relateNameField]="",e[this.relateIdField]="",this.model.setFields(e)}onFocus(){this.relateSearchOpen=!0}setRelated(e){let t={};t[this.relateIdField]=e.id,t[this.relateNameField]=e.data,this.model.setFields(t),2==this.fieldconfig.executeCopyRules?this.executeCopyRules(e.id):1==this.fieldconfig.executeCopyRules&&this.modal.confirm(this.language.getLabel("MSG_COPY_DATA","","long"),this.language.getLabel("MSG_COPY_DATA")).subscribe((t=>t&&this.executeCopyRules(e.id))),this.closePopups()}executeCopyRules(e){let t=this.modal.await("LBL_LOADING");this.backend.get(this.relateType,e).subscribe((e=>{let s={module:this.relateType,id:e.id,data:e};this.model.executeCopyRulesParent(s),t.emit()}),(()=>{this.toast.sendToast("ERR_LOADING_RECORD","error"),t.emit()}))}goRelated(){this.router.navigate(["/module/"+this.relateType+"/"+this.model.getField(this.relateIdField)])}searchWithModal(){this.relateSearchOpen=!1,this.modal.openModal("ObjectModalModuleLookup").subscribe((e=>{e.instance.module=this.relateType,e.instance.modulefilter=this.fieldconfig.modulefilter,e.instance.multiselect=!1,e.instance.relatefilter=this.relateFilter,this.subscriptions.add(e.instance.selectedItems.subscribe((e=>{e.length&&this.setRelated({id:e[0].id,text:e[0].summary_text,data:e[0]})}))),e.instance.searchTerm=this.relateSearchTerm}))}static#e=this.ɵfac=function(e){return new(e||fieldLinked)(d.rXU(R.g),d.rXU(G.U),d.rXU(k.B),d.rXU(c.yu),d.rXU(C.Ix),d.rXU(d.aKT),d.rXU(w.y),d.rXU(ee.H),d.rXU(te.o))};static#t=this.ɵcmp=d.VBU({type:fieldLinked,selectors:[["field-linked"]],features:[d.Vt3],decls:4,vars:3,consts:[[3,"fieldname","fieldconfig",4,"ngIf"],[4,"ngIf","ngIfElse"],["fieldContainer",""],[3,"fieldname","fieldconfig"],[3,"fielddisplayclass","editable","fieldconfig","fieldid",4,"ngIf"],["class","slds-form-element__control slds-m-vertical--xx-small",3,"ngClass",4,"ngIf"],[3,"fielddisplayclass","editable","fieldconfig","fieldid"],[1,"slds-grid","slds-grid--vertical-align-center"],["size","x-small","divClass","slds-align--absolute-center slds-p-right--xx-small",3,"module",4,"ngIf"],["system-model-popover","",3,"module","id",4,"ngIf"],[4,"ngIf"],["size","x-small","divClass","slds-align--absolute-center slds-p-right--xx-small",3,"module"],["system-model-popover","",3,"module","id"],["emptyString",""],["label","LBL_RECORD_WITHOUT_NAME",2,"font-style","italic"],[3,"fieldset","module","data"],[1,"slds-form-element__control","slds-m-vertical--xx-small",3,"ngClass"],[1,"slds-combobox_container"],[1,"slds-form-element","slds-lookup"],["role","combobox",1,"slds-combobox","slds-dropdown-trigger","slds-dropdown-trigger_click",3,"ngClass"],["class","slds-form-element__control",4,"ngIf"],["class","slds-combobox__form-element slds-input-has-icon slds-input-has-icon_right",3,"ngClass",4,"ngIf"],["role","listbox",1,"slds-dropdown","slds-dropdown_fluid"],[3,"module","selectedObject",4,"ngIf"],[3,"module","modulefilter","relatefilter","relateId","disableadd","searchterm","selectedObject","searchWithModal",4,"ngIf"],[3,"fieldname"],[1,"slds-form-element__control"],[1,"slds-pill_container"],[1,"slds-pill","slds-size--1-of-1"],[1,"slds-icon_container","slds-icon-standard-account","slds-pill__icon_container"],[3,"module","size"],["class","slds-pill__label",4,"ngIf"],[1,"slds-button","slds-button--icon","slds-pill__remove",3,"click"],[3,"icon"],[1,"slds-pill__label"],[1,"slds-combobox__form-element","slds-input-has-icon","slds-input-has-icon_right",3,"ngClass"],["type","text","role","combobox",1,"slds-input","slds-combobox__input",3,"disabled","ngModel","placeholder","autocomplete","ngModelChange","blur","focus"],["focus",""],[1,"slds-button","slds-button_icon","slds-input__icon","slds-input__icon_right",3,"click"],["icon","search"],[3,"module","selectedObject"],[3,"module","modulefilter","relatefilter","relateId","disableadd","searchterm","selectedObject","searchWithModal"]],template:function(e,t){if(1&e&&d.DNE(0,bi,1,2,"field-label",0)(1,yi,1,0,"field-not-authorized",1)(2,Fi,2,2,"ng-template",null,2,d.C5r),2&e){const e=d.sdS(3);d.Y8G("ngIf",t.displayLabel),d.R7$(),d.Y8G("ngIf",!t.isAuthorized)("ngIfElse",e)}},dependencies:[i.YU,i.bT,n.me,n.BC,n.vS,I.t,vs.J,le.W,ks.j,Js,u.b,j.K,fi,Rs._,Is.T,D.A],encapsulation:2})}return fieldLinked})();function Ti(e,t){if(1&e&&d.nrm(0,"field-label",6),2&e){const e=d.XpG();d.Y8G("fieldname",e.fieldname)("fieldconfig",e.fieldconfig)}}let Bi=(()=>{class fieldModifiedBy extends Mi{constructor(e,t,s,i,n,l,o,a,r,d){super(e,t,s,i,n,l,o,a,r),this.model=e,this.view=t,this.language=s,this.metadata=i,this.router=n,this.elementRef=l,this.modal=o,this.backend=a,this.toast=r,this.userpreferences=d}get userid(){return this.relData?.id}get datefield(){return this.fieldconfig.field_date?this.fieldconfig.field_date:"date_modified"}get displayDate(){try{if(this.model.getField(this.fieldname)){let e=this.model.getFieldValue(this.datefield);return e.isValid()?e.format(this.userpreferences.getDateFormat()):""}return""}catch(e){return""}}get displayTime(){try{if(this.model.getField(this.fieldname)){let e=this.model.getFieldValue(this.datefield);return e.isValid()?e.format(this.userpreferences.getTimeFormat()):""}return""}catch(e){return""}}static#e=this.ɵfac=function(e){return new(e||fieldModifiedBy)(d.rXU(R.g),d.rXU(G.U),d.rXU(k.B),d.rXU(c.yu),d.rXU(C.Ix),d.rXU(d.aKT),d.rXU(w.y),d.rXU(ee.H),d.rXU(te.o),d.rXU(xe.S))};static#t=this.ɵcmp=d.VBU({type:fieldModifiedBy,selectors:[["field-generic"]],features:[d.Vt3],decls:11,vars:8,consts:[[3,"fieldname","fieldconfig",4,"ngIf"],[3,"fielddisplayclass","editable","fieldconfig"],[1,"slds-grid","slds-grid--vertical-align-center"],["href","javascript:void(0);","system-model-popover","","module","Users",3,"id"],[1,"slds-p-right--xx-small"],[1,"slds-p-left--xxx-small"],[3,"fieldname","fieldconfig"]],template:function(e,t){1&e&&(d.DNE(0,Ti,1,2,"field-label",0),d.j41(1,"field-generic-display",1)(2,"div",2)(3,"a",3),d.EFF(4),d.k0s(),d.j41(5,"span",4),d.EFF(6,","),d.k0s(),d.j41(7,"span"),d.EFF(8),d.k0s(),d.j41(9,"span",5),d.EFF(10),d.k0s()()()),2&e&&(d.Y8G("ngIf",t.displayLabel),d.R7$(),d.Y8G("fielddisplayclass",t.fielddisplayclass)("editable",!1)("fieldconfig",t.fieldconfig),d.R7$(2),d.Y8G("id",t.userid),d.R7$(),d.JRh(t.value),d.R7$(4),d.JRh(t.displayDate),d.R7$(2),d.JRh(t.displayTime))},dependencies:[i.bT,ks.j,u.b,j.K],encapsulation:2})}return fieldModifiedBy})();function $i(e,t){if(1&e&&d.nrm(0,"field-label",3),2&e){const e=d.XpG();d.Y8G("fieldname",e.fieldname)("fieldconfig",e.fieldconfig)}}function Oi(e,t){if(1&e&&(d.j41(0,"span",6)(1,"span",7),d.nrm(2,"system-icon",8),d.k0s(),d.j41(3,"span",9),d.EFF(4),d.k0s()()),2&e){const e=t.$implicit;d.R7$(2),d.Y8G("module",e.module)("size","small"),d.R7$(2),d.JRh(e.summary_text)}}function Xi(e,t){if(1&e&&(d.j41(0,"field-generic-display",4),d.DNE(1,Oi,5,3,"span",5),d.k0s()),2&e){const e=d.XpG();d.Y8G("fielddisplayclass",e.fielddisplayclass)("editable",e.isEditable())("fieldconfig",e.fieldconfig)("fieldid",e.fieldid),d.R7$(),d.Y8G("ngForOf",e.pills)}}function Ui(e,t){if(1&e){const e=d.RV6();d.j41(0,"li",34),d.bIt("click",(function(){const t=d.eBV(e).index,s=d.XpG(3);return d.Njj(s.setLookupType(t))})),d.j41(1,"div",35)(2,"div",36),d.nrm(3,"system-icon",37),d.j41(4,"div",38),d.nrm(5,"system-label-modulename",39),d.k0s()()()()}if(2&e){const e=t.$implicit;d.R7$(3),d.Y8G("module",e.module),d.R7$(2),d.Y8G("module",e.module)}}const Yi=e=>({"slds-is-open":e});function Ni(e,t){if(1&e){const e=d.RV6();d.j41(0,"div",24)(1,"div",25)(2,"div",26)(3,"div",27)(4,"div",14)(5,"div",28),d.bIt("click",(function(){d.eBV(e);const t=d.XpG(2);return d.Njj(t.toggleLookupTypeSelect())})),d.nrm(6,"input",29)(7,"system-icon",30),d.k0s(),d.j41(8,"div",31)(9,"ul",32),d.DNE(10,Ui,6,2,"li",33),d.k0s()()()()()()()}if(2&e){const e=d.XpG(2);d.R7$(4),d.Y8G("ngClass",d.eq3(3,Yi,e.lookuplinkSelectOpen)),d.R7$(2),d.Y8G("value",e.lookupTypeName),d.R7$(4),d.Y8G("ngForOf",e.lookuplinks)}}function Vi(e,t){if(1&e){const e=d.RV6();d.j41(0,"field-lookup-recent",40),d.bIt("selectedObject",(function(t){d.eBV(e);const s=d.XpG(2);return d.Njj(s.addItem(t))})),d.k0s()}if(2&e){const e=d.XpG(2);d.Y8G("module",e.lookuplinks[e.lookupType].module)}}function Ai(e,t){if(1&e){const e=d.RV6();d.j41(0,"field-lookup-search",41),d.bIt("selectedObject",(function(t){d.eBV(e);const s=d.XpG(2);return d.Njj(s.addItem(t))}))("searchWithModal",(function(){d.eBV(e);const t=d.XpG(2);return d.Njj(t.searchWithModal())})),d.k0s()}if(2&e){const e=d.XpG(2);d.Y8G("module",e.lookuplinks[e.lookupType].module)("searchterm",e.lookupSearchTerm)}}function Pi(e,t){if(1&e){const e=d.RV6();d.j41(0,"li",44)(1,"span",45)(2,"span",7),d.nrm(3,"system-icon",8),d.k0s(),d.j41(4,"span",9),d.EFF(5),d.k0s(),d.j41(6,"button",46),d.bIt("click",(function(){const t=d.eBV(e).$implicit,s=d.XpG(3);return d.Njj(s.removeItem(t))})),d.nrm(7,"system-button-icon",18),d.k0s()()()}if(2&e){const e=t.$implicit;d.R7$(3),d.Y8G("module",e.module)("size","small"),d.R7$(2),d.JRh(e.summary_text),d.R7$(2),d.Y8G("icon","close")}}function zi(e,t){if(1&e&&(d.j41(0,"ul",42),d.DNE(1,Pi,8,4,"li",43),d.k0s()),2&e){const e=d.XpG(2);d.R7$(),d.Y8G("ngForOf",e.pills)("ngForTrackBy",e.pillid)}}const Hi=e=>({"slds-combobox__input":e});function qi(e,t){if(1&e){const e=d.RV6();d.j41(0,"div",10)(1,"div",11),d.DNE(2,Ni,11,5,"div",12),d.j41(3,"div",13)(4,"div",14)(5,"div",15)(6,"input",16),d.bIt("focus",(function(){d.eBV(e);const t=d.XpG();return d.Njj(t.onFocus())})),d.mxI("ngModelChange",(function(t){d.eBV(e);const s=d.XpG();return d.DH7(s.lookupSearchTerm,t)||(s.lookupSearchTerm=t),d.Njj(t)})),d.k0s(),d.j41(7,"button",17),d.bIt("click",(function(){d.eBV(e);const t=d.XpG();return d.Njj(t.searchWithModal())})),d.nrm(8,"system-button-icon",18),d.k0s()(),d.j41(9,"div",19),d.DNE(10,Vi,1,1,"field-lookup-recent",20)(11,Ai,1,2,"field-lookup-search",21),d.k0s()()()(),d.DNE(12,zi,2,2,"ul",22),d.nrm(13,"field-messages",23),d.k0s()}if(2&e){const e=d.XpG();d.Y8G("ngClass",e.getFieldClass()),d.R7$(2),d.Y8G("ngIf",e.lookuplinks.length>1),d.R7$(2),d.Y8G("ngClass",d.eq3(11,Yi,e.lookupSearchOpen)),d.R7$(2),d.Y8G("ngClass",d.eq3(13,Hi,e.lookuplinks.length>1)),d.R50("ngModel",e.lookupSearchTerm),d.Y8G("placeholder",e.language.getModuleCombinedLabel("LBL_SEARCH",e.lookuplinks[e.lookupType].module)),d.R7$(2),d.Y8G("icon","search"),d.R7$(2),d.Y8G("ngIf",e.lookupSearchOpen&&""===e.lookupSearchTerm),d.R7$(),d.Y8G("ngIf",e.lookupSearchOpen&&""!==e.lookupSearchTerm),d.R7$(),d.Y8G("ngIf",e.pills.length>0),d.R7$(),d.Y8G("fieldname",e.fieldname)}}let Ji=(()=>{class fieldLookup extends r.s{constructor(e,t,s,i,n,l,o,a,r){super(e,t,i,n,l),this.model=e,this.view=t,this.broadcast=s,this.language=i,this.metadata=n,this.router=l,this.elementRef=o,this.renderer=a,this.modal=r,this.lookuplinks=[],this.lookupType=0,this.lookuplinkSelectOpen=!1,this.lookupSearchOpen=!1,this.lookupSearchTerm="",this.pills=[],this.broadcast.message$.subscribe((e=>this.handleMessage(e))),this.model.data$.subscribe((e=>{this.setPills()}))}ngOnInit(){this.lookuplinks=this.getLookuplinks()}get displayAssignedUser(){return this.fieldconfig.displayassigneduser}get lookupTypeName(){return this.language.getModuleName(this.lookuplinks[this.lookupType].module)}getLookupmodules(){let e;return this.fieldconfig.lookupmodules&&(e=this.fieldconfig.lookupmodules.replace(/\s/g,"").split(",")),e||(e=["Contacts","Users"]),e}getLookuplinks(){let e;if(this.fieldconfig.lookuplinks&&(e=this.fieldconfig.lookuplinks.replace(/\s/g,"").split(",")),!e){e=[];for(let t of this.getLookupmodules())e.push(t.toLowerCase())}let t=[];for(let s of e)t.push({name:s,module:this.metadata.getFieldDefs(this.model.module,s).module});return t}setPills(){for(let e of this.lookuplinks)if(this.model.data[e.name]&&this.model.data[e.name].beans)for(let t in this.model.data[e.name].beans){let s=this.model.data[e.name].beans[t];("Users"!=e.module||this.displayAssignedUser||t!=this.model.data.assigned_user_id)&&(this.pills.findIndex((e=>e.id==s.id))<0&&this.pills.push({module:e.module,id:s.id,summary_text:s.summary_text,link:e.name}))}}addItem(e){this.model.data[this.lookuplinks[this.lookupType].name]||(this.model.data[this.lookuplinks[this.lookupType].name]={beans:{}}),this.model.data[this.lookuplinks[this.lookupType].name].beans[e.id]={id:e.id,summary_text:e.text},this.lookupSearchOpen=!1,this.setPills()}handleMessage(e){if(e.messagedata.reference&&"model.save"===e.messagetype)this.fieldid===e.messagedata.reference&&(this.lookupSearchTerm="",this.addItem({id:e.messagedata.data.id,text:e.messagedata.data.summary_text}))}onClick(e){this.elementRef.nativeElement.contains(e.target)||this.closePopups()}closePopups(){this.lookupSearchOpen=!1,this.lookuplinkSelectOpen=!1,this.clickListener()}toggleLookupTypeSelect(){this.lookuplinkSelectOpen=!this.lookuplinkSelectOpen,this.lookupSearchOpen=!1}setLookupType(e){this.lookupSearchTerm="",this.lookupType=e,this.lookuplinkSelectOpen=!1}removeItem(e){this.model.data[e.link].beans_relations_to_delete||(this.model.data[e.link].beans_relations_to_delete={}),this.model.data[e.link].beans_relations_to_delete[e.id]=e,delete this.model.data[e.link].beans[e.id];let t=this.pills.findIndex((t=>t.id==e.id));this.pills.splice(t,1)}onFocus(){this.openSearchDropDown()}openSearchDropDown(){this.lookuplinkSelectOpen=!1,this.lookupSearchOpen=!0,this.clickListener=this.renderer.listen("document","click",(e=>this.onClick(e)))}searchWithModal(){this.modal.openModal("ObjectModalModuleLookup").subscribe((e=>{e.instance.module=this.lookuplinks[this.lookupType].module,e.instance.multiselect=!1,e.instance.selectedItems.subscribe((e=>{this.addItem({id:e[0].id,text:e[0].summary_text,data:e[0]})})),e.instance.usedSearchTerm.subscribe((e=>{this.lookupSearchTerm=e})),e.instance.searchTerm=this.lookupSearchTerm}))}pillid(e){return e.id}static#e=this.ɵfac=function(e){return new(e||fieldLookup)(d.rXU(R.g),d.rXU(G.U),d.rXU(se.m),d.rXU(k.B),d.rXU(c.yu),d.rXU(C.Ix),d.rXU(d.aKT),d.rXU(d.sFG),d.rXU(w.y))};static#t=this.ɵcmp=d.VBU({type:fieldLookup,selectors:[["field-lookup"]],features:[d.Vt3],decls:3,vars:3,consts:[[3,"fieldname","fieldconfig",4,"ngIf"],[3,"fielddisplayclass","editable","fieldconfig","fieldid",4,"ngIf"],["class","slds-form-element__control",3,"ngClass",4,"ngIf"],[3,"fieldname","fieldconfig"],[3,"fielddisplayclass","editable","fieldconfig","fieldid"],["class","slds-pill slds-m-right--xx-small slds-p-around--xx-small",4,"ngFor","ngForOf"],[1,"slds-pill","slds-m-right--xx-small","slds-p-around--xx-small"],[1,"slds-icon_container","slds-icon-standard-account","slds-pill__icon_container"],[3,"module","size"],[1,"slds-pill__label"],[1,"slds-form-element__control",3,"ngClass"],[1,"slds-combobox-group","slds-p-vertical--xx-small"],["class","slds-combobox_object-switcher slds-combobox-addon_start",4,"ngIf"],[1,"slds-combobox_container","slds-combobox-addon_end"],["role","combobox",1,"slds-combobox","slds-dropdown-trigger","slds-dropdown-trigger_click",3,"ngClass"],["role","none",1,"slds-combobox__form-element","slds-input-has-icon","slds-input-has-icon_right"],["type","text","aria-autocomplete","list","autoComplete","off","role","textbox",1,"slds-input",3,"ngClass","ngModel","placeholder","focus","ngModelChange"],[1,"slds-button","slds-button_icon","slds-input__icon","slds-input__icon_right",3,"click"],[3,"icon"],["role","listbox",1,"slds-dropdown","slds-dropdown_length-with-icon-7","slds-dropdown_fluid"],[3,"module","selectedObject",4,"ngIf"],[3,"module","searchterm","selectedObject","searchWithModal",4,"ngIf"],["class","slds-listbox slds-listbox_horizontal","role","group",4,"ngIf"],[3,"fieldname"],[1,"slds-combobox_object-switcher","slds-combobox-addon_start"],[1,"slds-form-element"],[1,"slds-form-element__control"],[1,"slds-combobox_container"],[1,"slds-combobox__form-element","slds-input-has-icon","slds-input-has-icon--right",3,"click"],["type","text","readonly","","autoComplete","off","role","textbox",1,"slds-input","slds-combobox__input","slds-combobox__input-value",3,"value"],["icon","down","sprite","utility","addclasses","slds-input__icon slds-input__icon_right"],["role","listbox",1,"slds-dropdown","slds-dropdown_length-5","slds-dropdown_x-small","slds-dropdown_left"],["role","group","aria-label","Suggested for you",1,"slds-listbox","slds-listbox_vertical"],["role","presentation","class","slds-listbox__item",3,"click",4,"ngFor","ngForOf"],["role","presentation",1,"slds-listbox__item",3,"click"],["role","option",1,"slds-media","slds-listbox__option","slds-listbox__option_plain","slds-media_small"],[1,"slds-grid","slds-grid--vertical-align-center"],["size","x-small",3,"module"],[1,"slds-truncate"],[3,"module"],[3,"module","selectedObject"],[3,"module","searchterm","selectedObject","searchWithModal"],["role","group",1,"slds-listbox","slds-listbox_horizontal"],["role","presentation","class","slds-listbox__item slds-p-top_xxx-small",4,"ngFor","ngForOf","ngForTrackBy"],["role","presentation",1,"slds-listbox__item","slds-p-top_xxx-small"],[1,"slds-pill"],[1,"slds-button","slds-button--icon","slds-pill__remove",3,"click"]],template:function(e,t){1&e&&d.DNE(0,$i,1,2,"field-label",0)(1,Xi,2,5,"field-generic-display",1)(2,qi,14,15,"div",2),2&e&&(d.Y8G("ngIf",t.displayLabel),d.R7$(),d.Y8G("ngIf",!t.isEditMode()),d.R7$(),d.Y8G("ngIf",t.isEditable()&&t.isEditMode()))},dependencies:[i.YU,i.Sq,i.bT,n.me,n.BC,n.vS,I.t,vs.J,_s.r,u.b,j.K,Rs._,Is.T,D.A],encapsulation:2})}return fieldLookup})();var Wi=s(16435),Ki=s(26024);function Qi(e,t){if(1&e&&d.nrm(0,"field-label",3),2&e){const e=d.XpG();d.Y8G("fieldname",e.fieldname)("fieldconfig",e.fieldconfig)}}const Zi=e=>({"slds-text-color_error":e});function en(e,t){if(1&e&&(d.j41(0,"div",6)(1,"span",7),d.nrm(2,"system-display-datetime",8),d.k0s()()),2&e){const e=d.XpG(2);d.R7$(),d.Y8G("ngClass",d.eq3(3,Zi,e.highlightdate)),d.R7$(),d.Y8G("date",e.value)("displayTime",!1)}}function tn(e,t){if(1&e){const e=d.RV6();d.j41(0,"div",6)(1,"a",9),d.bIt("click",(function(){d.eBV(e);const t=d.XpG(2);return d.Njj(t.goRecord())})),d.j41(2,"span",7),d.nrm(3,"system-display-datetime",8),d.k0s()()()}if(2&e){const e=d.XpG(2);d.R7$(2),d.Y8G("ngClass",d.eq3(3,Zi,e.highlightdate)),d.R7$(),d.Y8G("date",e.value)("displayTime",!1)}}function sn(e,t){if(1&e&&(d.j41(0,"field-generic-display",4),d.DNE(1,en,3,5,"div",5)(2,tn,4,5,"div",5),d.k0s()),2&e){const e=d.XpG();d.Y8G("fielddisplayclass",e.fielddisplayclass)("editable",e.isEditable())("fieldconfig",e.fieldconfig),d.R7$(),d.Y8G("ngIf",!e.displayLink()),d.R7$(),d.Y8G("ngIf",e.displayLink())}}function nn(e,t){if(1&e){const e=d.RV6();d.j41(0,"div",10)(1,"system-input-date",11),d.mxI("ngModelChange",(function(t){d.eBV(e);const s=d.XpG();return d.DH7(s.value,t)||(s.value=t),d.Njj(t)})),d.bIt("valid",(function(t){d.eBV(e);const s=d.XpG();return d.Njj(s.setValid(t))})),d.k0s(),d.nrm(2,"field-messages",12),d.k0s()}if(2&e){const e=d.XpG();d.Y8G("ngClass",e.css_classes),d.R7$(),d.R50("ngModel",e.value),d.R7$(),d.Y8G("fieldname",e.fieldname)}}let ln=(()=>{class fieldDate extends r.s{constructor(e,t,s,i,n){super(e,t,s,i,n),this.model=e,this.view=t,this.language=s,this.metadata=i,this.router=n}setValid(e){e?this.clearFieldError():this.setFieldError(this.language.getLabel("LBL_INPUT_INVALID"))}get highlightdate(){return!!(this.fieldconfig.highlightpast&&this.value&&new moment>new moment(this.model.getField(this.fieldname)))}setValidity(e){e?this.clearFieldError():this.setFieldError(this.language.getLabel("LBL_INPUT_INVALID"))}static#e=this.ɵfac=function(e){return new(e||fieldDate)(d.rXU(R.g),d.rXU(G.U),d.rXU(k.B),d.rXU(c.yu),d.rXU(C.Ix))};static#t=this.ɵcmp=d.VBU({type:fieldDate,selectors:[["field-date"]],features:[d.Vt3],decls:3,vars:3,consts:[[3,"fieldname","fieldconfig",4,"ngIf"],[3,"fielddisplayclass","editable","fieldconfig",4,"ngIf"],["class","slds-form-element__control slds-p-around--xx-small",3,"ngClass",4,"ngIf"],[3,"fieldname","fieldconfig"],[3,"fielddisplayclass","editable","fieldconfig"],["class","slds-truncate",4,"ngIf"],[1,"slds-truncate"],[3,"ngClass"],[3,"date","displayTime"],["href","javascript:void(0);",3,"click"],[1,"slds-form-element__control","slds-p-around--xx-small",3,"ngClass"],["system-input-date-hide-error","",3,"ngModel","ngModelChange","valid"],[3,"fieldname"]],template:function(e,t){1&e&&d.DNE(0,Qi,1,2,"field-label",0)(1,sn,3,5,"field-generic-display",1)(2,nn,3,3,"div",2),2&e&&(d.Y8G("ngIf",t.displayLabel),d.R7$(),d.Y8G("ngIf",!t.isEditMode()),d.R7$(),d.Y8G("ngIf",t.isEditable()&&t.isEditMode()))},dependencies:[i.YU,i.bT,n.BC,n.vS,Wi.f,Ki.M,u.b,j.K,D.A],encapsulation:2})}return fieldDate})();var on=s(64029);function an(e,t){if(1&e&&d.nrm(0,"field-label",3),2&e){const e=d.XpG();d.Y8G("fieldname",e.fieldname)("fieldconfig",e.fieldconfig)}}function rn(e,t){if(1&e&&(d.j41(0,"div",6)(1,"span",7),d.EFF(2),d.k0s()()),2&e){const e=d.XpG(2);d.R7$(2),d.JRh(e.displayTime)}}function dn(e,t){if(1&e&&(d.j41(0,"field-generic-display",4),d.DNE(1,rn,3,1,"div",5),d.k0s()),2&e){const e=d.XpG();d.Y8G("fielddisplayclass",e.fielddisplayclass)("editable",e.isEditable())("fieldconfig",e.fieldconfig),d.R7$(),d.Y8G("ngIf",!e.displayLink())}}function cn(e,t){if(1&e){const e=d.RV6();d.j41(0,"div",8)(1,"system-input-time",9),d.mxI("ngModelChange",(function(t){d.eBV(e);const s=d.XpG();return d.DH7(s.value,t)||(s.value=t),d.Njj(t)})),d.k0s(),d.nrm(2,"field-messages",10),d.k0s()}if(2&e){const e=d.XpG();d.Y8G("ngClass",e.getFieldClass()),d.R7$(),d.R50("ngModel",e.value),d.R7$(),d.FS9("fieldname",e.fieldname)}}let un=(()=>{class fieldTime extends r.s{constructor(e,t,s,i,n,l){super(e,t,s,i,n),this.model=e,this.view=t,this.language=s,this.metadata=i,this.router=n,this.userpreferences=l}get displayTime(){return this.value.format(this.userpreferences.getTimeFormat())}static#e=this.ɵfac=function(e){return new(e||fieldTime)(d.rXU(R.g),d.rXU(G.U),d.rXU(k.B),d.rXU(c.yu),d.rXU(C.Ix),d.rXU(xe.S))};static#t=this.ɵcmp=d.VBU({type:fieldTime,selectors:[["field-time"]],features:[d.Vt3],decls:3,vars:3,consts:[[3,"fieldname","fieldconfig",4,"ngIf"],[3,"fielddisplayclass","editable","fieldconfig",4,"ngIf"],["class","slds-form-element__control slds-p-around--xx-small",3,"ngClass",4,"ngIf"],[3,"fieldname","fieldconfig"],[3,"fielddisplayclass","editable","fieldconfig"],["class","slds-truncate",4,"ngIf"],[1,"slds-truncate"],[1,"slds-p-left--x-small",2,"font-style","italic"],[1,"slds-form-element__control","slds-p-around--xx-small",3,"ngClass"],[3,"ngModel","ngModelChange"],[3,"fieldname"]],template:function(e,t){1&e&&d.DNE(0,an,1,2,"field-label",0)(1,dn,2,4,"field-generic-display",1)(2,cn,3,3,"div",2),2&e&&(d.Y8G("ngIf",t.displayLabel),d.R7$(),d.Y8G("ngIf",!t.isEditMode()),d.R7$(),d.Y8G("ngIf",t.isEditable()&&t.isEditMode()))},dependencies:[i.YU,i.bT,n.BC,n.vS,on.T,u.b,j.K,D.A],encapsulation:2})}return fieldTime})();function mn(e,t){if(1&e&&d.nrm(0,"field-label",3),2&e){const e=d.XpG();d.Y8G("fieldname",e.fieldname)("fieldconfig",e.fieldconfig)}}function hn(e,t){if(1&e&&(d.j41(0,"span"),d.EFF(1),d.k0s()),2&e){const e=d.XpG(2);d.R7$(),d.JRh(e.displaySpan)}}function gn(e,t){if(1&e&&(d.j41(0,"span"),d.EFF(1),d.k0s()),2&e){const e=d.XpG(2);d.R7$(),d.JRh(e.displayDate)}}function pn(e,t){if(1&e&&(d.j41(0,"span",7),d.EFF(1),d.k0s()),2&e){const e=d.XpG(2);d.R7$(),d.JRh(e.displayTime)}}function fn(e,t){if(1&e&&(d.j41(0,"field-generic-display",4),d.DNE(1,hn,2,1,"span",5)(2,gn,2,1,"span",5)(3,pn,2,1,"span",6),d.k0s()),2&e){const e=d.XpG();d.Y8G("fielddisplayclass",e.fielddisplayclass)("editable",e.isEditable())("fieldconfig",e.fieldconfig),d.R7$(),d.Y8G("ngIf",e.fieldconfig.displayfromnow),d.R7$(),d.Y8G("ngIf",!e.fieldconfig.displayfromnow),d.R7$(),d.Y8G("ngIf",!e.fieldconfig.displayfromnow)}}function bn(e,t){if(1&e){const e=d.RV6();d.j41(0,"div",8)(1,"div",9)(2,"system-input-date",10),d.mxI("ngModelChange",(function(t){d.eBV(e);const s=d.XpG();return d.DH7(s.value,t)||(s.value=t),d.Njj(t)})),d.bIt("valid",(function(t){d.eBV(e);const s=d.XpG();return d.Njj(s.setValid(t))})),d.k0s(),d.j41(3,"system-input-time",11),d.mxI("ngModelChange",(function(t){d.eBV(e);const s=d.XpG();return d.DH7(s.value,t)||(s.value=t),d.Njj(t)})),d.bIt("valid",(function(t){d.eBV(e);const s=d.XpG();return d.Njj(s.setValid(t))})),d.k0s()(),d.nrm(4,"field-messages",12),d.k0s()}if(2&e){const e=d.XpG();d.Y8G("ngClass",e.css_classes),d.R7$(2),d.R50("ngModel",e.value),d.R7$(),d.R50("ngModel",e.value),d.R7$(),d.Y8G("fieldname",e.fieldname)}}let yn=(()=>{class fieldDateTime extends r.s{constructor(e,t,s,i,n,l){super(e,t,s,i,n),this.model=e,this.view=t,this.language=s,this.metadata=i,this.router=n,this.userpreferences=l}get displayValue(){try{if(this.model.getField(this.fieldname)){let e=this.model.getField(this.fieldname);return e.isValid()?this.fieldconfig.displayfromnow?e.fromNow():e.format(this.userpreferences.getDateFormat()+" "+this.userpreferences.getTimeFormat()):""}return""}catch(e){return""}}get displaySpan(){try{if(this.model.getField(this.fieldname)){let e=this.model.getField(this.fieldname);return e.isValid()?e.fromNow():""}return""}catch(e){return""}}get displayDate(){try{if(this.model.getField(this.fieldname)){let e=this.model.getField(this.fieldname);return e.isValid()?e.format(this.userpreferences.getDateFormat()):""}return""}catch(e){return""}}get displayTime(){try{if(this.model.getField(this.fieldname)){let e=this.model.getField(this.fieldname);return e.isValid()?e.format(this.userpreferences.getTimeFormat()):""}return""}catch(e){return""}}setValid(e){e?this.clearFieldError():this.setFieldError(this.language.getLabel("LBL_INPUT_INVALID"))}get highlightdate(){return(1==this.fieldconfig.highlightpast||!0===this.fieldconfig.highlightpast)&&new moment>new moment(this.model.getField(this.fieldname))}static#e=this.ɵfac=function(e){return new(e||fieldDateTime)(d.rXU(R.g),d.rXU(G.U),d.rXU(k.B),d.rXU(c.yu),d.rXU(C.Ix),d.rXU(xe.S))};static#t=this.ɵcmp=d.VBU({type:fieldDateTime,selectors:[["field-date-time"]],features:[d.Vt3],decls:3,vars:3,consts:[[3,"fieldname","fieldconfig",4,"ngIf"],[3,"fielddisplayclass","editable","fieldconfig",4,"ngIf"],["class","slds-form-element__control slds-p-around--xx-small",3,"ngClass",4,"ngIf"],[3,"fieldname","fieldconfig"],[3,"fielddisplayclass","editable","fieldconfig"],[4,"ngIf"],["class","slds-p-left--x-small","style","font-style: italic",4,"ngIf"],[1,"slds-p-left--x-small",2,"font-style","italic"],[1,"slds-form-element__control","slds-p-around--xx-small",3,"ngClass"],[1,"slds-grid"],["system-input-date-hide-error","",1,"slds-size--1-of-2","slds-p-right--xxx-small",3,"ngModel","ngModelChange","valid"],["system-input-time-hide-error","",1,"slds-size--1-of-2","slds-p-left--xxx-small",3,"ngModel","ngModelChange","valid"],[3,"fieldname"]],template:function(e,t){1&e&&d.DNE(0,mn,1,2,"field-label",0)(1,fn,4,6,"field-generic-display",1)(2,bn,5,4,"div",2),2&e&&(d.Y8G("ngIf",t.displayLabel),d.R7$(),d.Y8G("ngIf",!t.isEditMode()),d.R7$(),d.Y8G("ngIf",t.isEditable()&&t.isEditMode()))},dependencies:[i.YU,i.bT,n.BC,n.vS,Ki.M,on.T,u.b,j.K,D.A],encapsulation:2})}return fieldDateTime})();function vn(e,t){if(1&e&&d.nrm(0,"field-label",3),2&e){const e=d.XpG();d.Y8G("fieldname",e.fieldname)("fieldconfig",e.fieldconfig)}}function _n(e,t){if(1&e&&(d.j41(0,"span"),d.EFF(1," - "),d.nrm(2,"system-display-datetime",7),d.k0s()),2&e){const e=d.XpG(2);d.R7$(2),d.Y8G("date",e.dateEnd)("displayDate",!1)}}function kn(e,t){if(1&e&&(d.j41(0,"field-generic-display",4),d.nrm(1,"system-display-datetime",5),d.DNE(2,_n,3,2,"span",6),d.k0s()),2&e){const e=d.XpG();d.Y8G("fielddisplayclass",e.fielddisplayclass)("editable",e.isEditable())("fieldconfig",e.fieldconfig),d.R7$(),d.Y8G("date",e.value),d.R7$(),d.Y8G("ngIf",e.dateEnd)}}function Rn(e,t){if(1&e&&(d.j41(0,"option"),d.EFF(1),d.k0s()),2&e){const e=t.$implicit;d.R7$(),d.JRh(e)}}function In(e,t){if(1&e&&(d.j41(0,"option"),d.EFF(1),d.k0s()),2&e){const e=t.$implicit;d.R7$(),d.JRh(e)}}function xn(e,t){if(1&e){const e=d.RV6();d.j41(0,"div",8)(1,"div",9)(2,"system-input-date",10),d.mxI("ngModelChange",(function(t){d.eBV(e);const s=d.XpG();return d.DH7(s.value,t)||(s.value=t),d.Njj(t)})),d.k0s(),d.j41(3,"system-input-time",11),d.mxI("ngModelChange",(function(t){d.eBV(e);const s=d.XpG();return d.DH7(s.value,t)||(s.value=t),d.Njj(t)})),d.k0s(),d.j41(4,"div",12)(5,"div",13)(6,"select",14),d.mxI("ngModelChange",(function(t){d.eBV(e);const s=d.XpG();return d.DH7(s.editDurationHours,t)||(s.editDurationHours=t),d.Njj(t)})),d.DNE(7,Rn,2,1,"option",15),d.k0s()()(),d.j41(8,"div",12)(9,"div",13)(10,"select",14),d.mxI("ngModelChange",(function(t){d.eBV(e);const s=d.XpG();return d.DH7(s.editDurationMinutes,t)||(s.editDurationMinutes=t),d.Njj(t)})),d.DNE(11,In,2,1,"option",15),d.k0s()()()(),d.nrm(12,"field-messages",16),d.k0s()}if(2&e){const e=d.XpG();d.Y8G("ngClass",e.css_classes),d.R7$(2),d.R50("ngModel",e.value),d.R7$(),d.R50("ngModel",e.value),d.R7$(3),d.R50("ngModel",e.editDurationHours),d.R7$(),d.Y8G("ngForOf",e.durationHours),d.R7$(3),d.R50("ngModel",e.editDurationMinutes),d.R7$(),d.Y8G("ngForOf",e.durationMinutes),d.R7$(),d.Y8G("fieldname",e.fieldname)}}let jn=(()=>{class fieldDateTimeDuration extends r.s{constructor(e,t,s,i,n,l){super(e,t,s,i,n),this.model=e,this.view=t,this.language=s,this.metadata=i,this.router=n,this.userpreferences=l,this.durationHours=["0","1","2","3","4","5","6","7","8","9","10","11","12"],this.durationMinutes=["0","5","10","15","20","25","30","35","40","45","50","55"]}ngOnInit(){super.ngOnInit(),this.subscriptions.add(this.model.data$.subscribe((e=>{if(this.value&&this.dateEnd){let e=0;e="string"==typeof this.dateEnd?moment(this.dateEnd).diff(this.value):this.dateEnd.diff(this.value),this.duration=moment.duration(e)}})))}get fieldend(){return this.fieldconfig.field_end?this.fieldconfig.field_end:"date_end"}get value(){return this.model.getField(this.fieldname)}set value(e){let t={};if(t[this.fieldname]=e,this.duration){let s=new moment(e).add(this.duration.asSeconds(),"s");t[this.fieldend]=s}this.model.setFields(t)}get dateEnd(){return this.model.getField(this.fieldend)}get currentHours(){return this.duration?this.duration.get("hours"):0}get currentMinutes(){return this.duration?this.duration.get("minutes"):0}get editDurationHours(){return this.currentHours}set editDurationHours(e){let t=this.currentMinutes,s=new moment(this.value);s.add(e,"h").add(t,"m"),this.model.setField(this.fieldend,s)}get editDurationMinutes(){return this.currentMinutes}set editDurationMinutes(e){let t=this.currentHours,s=new moment(this.value);s.add(t,"h").add(e,"m"),this.model.setField(this.fieldend,s)}static#e=this.ɵfac=function(e){return new(e||fieldDateTimeDuration)(d.rXU(R.g),d.rXU(G.U),d.rXU(k.B),d.rXU(c.yu),d.rXU(C.Ix),d.rXU(xe.S))};static#t=this.ɵcmp=d.VBU({type:fieldDateTimeDuration,selectors:[["field-date-time-duration"]],features:[d.Vt3],decls:3,vars:3,consts:[[3,"fieldname","fieldconfig",4,"ngIf"],[3,"fielddisplayclass","editable","fieldconfig",4,"ngIf"],["class","slds-form-element__control slds-p-around--xx-small",3,"ngClass",4,"ngIf"],[3,"fieldname","fieldconfig"],[3,"fielddisplayclass","editable","fieldconfig"],[3,"date"],[4,"ngIf"],[3,"date","displayDate"],[1,"slds-form-element__control","slds-p-around--xx-small",3,"ngClass"],[1,"slds-grid"],[3,"ngModel","ngModelChange"],[1,"slds-p-left--x-small",3,"ngModel","ngModelChange"],[1,"slds-form-element__control","slds-p-left--x-small","slds-size--1-of-6"],[1,"slds-select_container"],[1,"slds-select",3,"ngModel","ngModelChange"],[4,"ngFor","ngForOf"],[3,"fieldname"]],template:function(e,t){1&e&&d.DNE(0,vn,1,2,"field-label",0)(1,kn,3,5,"field-generic-display",1)(2,xn,13,8,"div",2),2&e&&(d.Y8G("ngIf",t.displayLabel),d.R7$(),d.Y8G("ngIf",!t.isEditMode()),d.R7$(),d.Y8G("ngIf",t.isEditable()&&t.isEditMode()))},dependencies:[i.YU,i.Sq,i.bT,n.xH,n.y7,n.wz,n.BC,n.vS,Wi.f,Ki.M,on.T,u.b,j.K,D.A],encapsulation:2})}return fieldDateTimeDuration})();function Gn(e,t){if(1&e&&d.nrm(0,"field-label",3),2&e){const e=d.XpG();d.Y8G("fieldname",e.fieldname)("fieldconfig",e.fieldconfig)}}function Cn(e,t){if(1&e&&(d.j41(0,"field-generic-display",4),d.EFF(1),d.k0s()),2&e){const e=d.XpG();d.Y8G("fielddisplayclass",e.fielddisplayclass)("editable",e.isEditable())("fieldconfig",e.fieldconfig),d.R7$(),d.SpI(" ",e.getDisplay(),"\n")}}function wn(e,t){if(1&e&&(d.j41(0,"option"),d.EFF(1),d.k0s()),2&e){const e=t.$implicit;d.R7$(),d.JRh(e)}}function Sn(e,t){if(1&e&&(d.j41(0,"option"),d.EFF(1),d.k0s()),2&e){const e=t.$implicit;d.R7$(),d.JRh(e)}}function En(e,t){if(1&e){const e=d.RV6();d.j41(0,"div",8)(1,"div",9)(2,"div",10)(3,"select",11),d.mxI("ngModelChange",(function(t){d.eBV(e);const s=d.XpG(2);return d.DH7(s.editDurationHours,t)||(s.editDurationHours=t),d.Njj(t)})),d.DNE(4,wn,2,1,"option",12),d.k0s()()(),d.j41(5,"div",13)(6,"div",10)(7,"select",11),d.mxI("ngModelChange",(function(t){d.eBV(e);const s=d.XpG(2);return d.DH7(s.editDurationMinutes,t)||(s.editDurationMinutes=t),d.Njj(t)})),d.DNE(8,Sn,2,1,"option",12),d.k0s()()()()}if(2&e){const e=d.XpG(2);d.R7$(3),d.R50("ngModel",e.editDurationHours),d.R7$(),d.Y8G("ngForOf",e.durationHours),d.R7$(3),d.R50("ngModel",e.editDurationMinutes),d.R7$(),d.Y8G("ngForOf",e.durationMinutes)}}function Ln(e,t){if(1&e){const e=d.RV6();d.j41(0,"div",8)(1,"div",14)(2,"div",15)(3,"input",16),d.mxI("ngModelChange",(function(t){d.eBV(e);const s=d.XpG(2);return d.DH7(s.editDurationHours,t)||(s.editDurationHours=t),d.Njj(t)})),d.k0s(),d.j41(4,"span",17),d.EFF(5,"h"),d.k0s()()(),d.j41(6,"div",18)(7,"div",15)(8,"input",19),d.mxI("ngModelChange",(function(t){d.eBV(e);const s=d.XpG(2);return d.DH7(s.editDurationMinutes,t)||(s.editDurationMinutes=t),d.Njj(t)})),d.k0s(),d.j41(9,"span",20),d.EFF(10,"min"),d.k0s()()()()}if(2&e){const e=d.XpG(2);d.R7$(3),d.R50("ngModel",e.editDurationHours),d.Y8G("ngModelOptions",e.modelOptions),d.R7$(5),d.R50("ngModel",e.editDurationMinutes),d.Y8G("ngModelOptions",e.modelOptions)}}function Dn(e,t){if(1&e&&(d.j41(0,"div",5),d.DNE(1,En,9,4,"div",6)(2,Ln,11,4,"div",6),d.nrm(3,"field-messages",7),d.k0s()),2&e){const e=d.XpG();d.Y8G("ngClass",e.css_classes),d.R7$(),d.Y8G("ngIf",!e.fieldconfig.freeentry),d.R7$(),d.Y8G("ngIf",e.fieldconfig.freeentry),d.R7$(),d.FS9("fieldname",e.fieldname)}}let Fn=(()=>{class fieldDuration extends r.s{get fieldminutes(){return this.fieldconfig.field_minutes?this.fieldconfig.field_minutes:"duration_minutes"}get fieldhours(){return this.fieldconfig.field_hours?this.fieldconfig.field_hours:"duration_hours"}constructor(e,t,s,i,n){super(e,t,s,i,n),this.model=e,this.view=t,this.language=s,this.metadata=i,this.router=n,this.isValid=!0,this.durationHours=["00","01","02","03","04","05","06","07","08","09","10","11","12"],this.durationMinutes=["00","15","30","45"]}getDisplay(){if(this.model.getField(this.fieldminutes)||this.model.getField(this.fieldhours))return("00"+this.model.getField(this.fieldhours)).slice(-2)+":"+("00"+this.model.getField(this.fieldminutes)).slice(-2)}get editDurationHours(){return this.model.getField(this.fieldhours)}set editDurationHours(e){this.model.setField(this.fieldhours,e)}get editDurationMinutes(){return this.model.getField(this.fieldminutes)}set editDurationMinutes(e){this.model.setField(this.fieldminutes,e)}static#e=this.ɵfac=function(e){return new(e||fieldDuration)(d.rXU(R.g),d.rXU(G.U),d.rXU(k.B),d.rXU(c.yu),d.rXU(C.Ix))};static#t=this.ɵcmp=d.VBU({type:fieldDuration,selectors:[["field-duration"]],features:[d.Vt3],decls:3,vars:3,consts:[[3,"fieldname","fieldconfig",4,"ngIf"],[3,"fielddisplayclass","editable","fieldconfig",4,"ngIf"],["class","slds-form-element__control slds-p-around--xx-small",3,"ngClass",4,"ngIf"],[3,"fieldname","fieldconfig"],[3,"fielddisplayclass","editable","fieldconfig"],[1,"slds-form-element__control","slds-p-around--xx-small",3,"ngClass"],["class","slds-grid",4,"ngIf"],[3,"fieldname"],[1,"slds-grid"],[1,"slds-form-element__control","slds-size--1-of-2"],[1,"slds-select_container"],[1,"slds-select",3,"ngModel","ngModelChange"],[4,"ngFor","ngForOf"],[1,"slds-form-element__control","slds-m-left--x-small","slds-size--1-of-2"],[1,"slds-form-element","slds-size--1-of-2"],[1,"slds-form-element__control","slds-input-has-fixed-addon"],["type","number","min","0","title","hours",1,"slds-input",2,"padding","0 0.25rem 0 0.25rem",3,"ngModel","ngModelOptions","ngModelChange"],["id","fixed-text-addon-post",1,"slds-form-element__addon"],[1,"slds-form-element","slds-m-left--x-small","slds-size--1-of-2"],["type","number","min","0","max","59","title","minutes",1,"slds-input",2,"padding","0 0.25rem 0 0.25rem",3,"ngModel","ngModelOptions","ngModelChange"],["id","fixed-text-addon-post2",1,"slds-form-element__addon"]],template:function(e,t){1&e&&d.DNE(0,Gn,1,2,"field-label",0)(1,Cn,2,4,"field-generic-display",1)(2,Dn,4,4,"div",2),2&e&&(d.Y8G("ngIf",t.displayLabel),d.R7$(),d.Y8G("ngIf",!t.isEditMode()),d.R7$(),d.Y8G("ngIf",t.isEditable()&&t.isEditMode()))},dependencies:[i.YU,i.Sq,i.bT,n.xH,n.y7,n.me,n.Q0,n.wz,n.BC,n.VZ,n.zX,n.vS,u.b,j.K,D.A],encapsulation:2})}return fieldDuration})();function Mn(e,t){if(1&e&&d.nrm(0,"field-label",6),2&e){const e=d.XpG(2);d.Y8G("fieldname",e.fieldname)("fieldconfig",e.fieldconfig)}}function Tn(e,t){if(1&e&&(d.qex(0),d.DNE(1,Mn,1,2,"field-label",2),d.j41(2,"field-generic-display",3),d.nrm(3,"system-display-datetime",4),d.EFF(4," - "),d.nrm(5,"system-display-datetime",5),d.k0s(),d.bVm()),2&e){const e=d.XpG();d.R7$(),d.Y8G("ngIf",e.displayLabel),d.R7$(),d.Y8G("fielddisplayclass",e.fielddisplayclass)("editable",e.isEditable())("fieldconfig",e.fieldconfig),d.R7$(),d.Y8G("date",e.startDate),d.R7$(2),d.Y8G("date",e.endDate)("displayDate",e.showToDate)}}function Bn(e,t){1&e&&(d.j41(0,"abbr",23),d.EFF(1,"*"),d.k0s())}function $n(e,t){1&e&&(d.j41(0,"abbr",23),d.EFF(1,"*"),d.k0s())}function On(e,t){if(1&e){const e=d.RV6();d.j41(0,"div",11)(1,"div",12)(2,"div",13)(3,"label",14),d.DNE(4,Bn,2,0,"abbr",15),d.nrm(5,"system-label",16),d.k0s(),d.j41(6,"system-input-date",17),d.mxI("ngModelChange",(function(t){d.eBV(e);const s=d.XpG(2);return d.DH7(s.startDate,t)||(s.startDate=t),d.Njj(t)})),d.bIt("valid",(function(t){d.eBV(e);const s=d.XpG(2);return d.Njj(s.setDateValid("start",t))})),d.k0s()(),d.j41(7,"div",18)(8,"label",14),d.nrm(9,"system-label",19),d.k0s(),d.j41(10,"system-input-time",20),d.mxI("ngModelChange",(function(t){d.eBV(e);const s=d.XpG(2);return d.DH7(s.startDate,t)||(s.startDate=t),d.Njj(t)})),d.bIt("valid",(function(t){d.eBV(e);const s=d.XpG(2);return d.Njj(s.setDateValid("start",t))})),d.k0s()()(),d.j41(11,"div",12)(12,"div",13)(13,"label",14),d.DNE(14,$n,2,0,"abbr",15),d.nrm(15,"system-label",21),d.k0s(),d.j41(16,"system-input-date",17),d.mxI("ngModelChange",(function(t){d.eBV(e);const s=d.XpG(2);return d.DH7(s.endDate,t)||(s.endDate=t),d.Njj(t)})),d.bIt("valid",(function(t){d.eBV(e);const s=d.XpG(2);return d.Njj(s.setDateValid("end",t))})),d.k0s()(),d.j41(17,"div",18)(18,"label",14),d.nrm(19,"system-label",22),d.k0s(),d.j41(20,"system-input-time",20),d.mxI("ngModelChange",(function(t){d.eBV(e);const s=d.XpG(2);return d.DH7(s.endDate,t)||(s.endDate=t),d.Njj(t)})),d.bIt("valid",(function(t){d.eBV(e);const s=d.XpG(2);return d.Njj(s.setDateValid("end",t))})),d.k0s()()()()}if(2&e){const e=d.XpG(2);d.R7$(4),d.Y8G("ngIf",e.stati.editable&&e.stati.required),d.R7$(2),d.R50("ngModel",e.startDate),d.R7$(4),d.R50("ngModel",e.startDate),d.R7$(4),d.Y8G("ngIf",e.stati.editable&&e.stati.required),d.R7$(2),d.R50("ngModel",e.endDate),d.R7$(4),d.R50("ngModel",e.endDate)}}function Xn(e,t){1&e&&(d.j41(0,"abbr",23),d.EFF(1,"*"),d.k0s())}function Un(e,t){1&e&&(d.j41(0,"abbr",23),d.EFF(1,"*"),d.k0s())}function Yn(e,t){if(1&e){const e=d.RV6();d.j41(0,"div",24)(1,"div",25)(2,"div",13)(3,"label",14),d.DNE(4,Xn,2,0,"abbr",15),d.nrm(5,"system-label",16),d.k0s(),d.j41(6,"system-input-date",17),d.mxI("ngModelChange",(function(t){d.eBV(e);const s=d.XpG(2);return d.DH7(s.startDate,t)||(s.startDate=t),d.Njj(t)})),d.bIt("valid",(function(t){d.eBV(e);const s=d.XpG(2);return d.Njj(s.setDateValid("start",t))})),d.k0s()(),d.j41(7,"div",18)(8,"label",14),d.nrm(9,"system-label",19),d.k0s(),d.j41(10,"system-input-time",20),d.mxI("ngModelChange",(function(t){d.eBV(e);const s=d.XpG(2);return d.DH7(s.startDate,t)||(s.startDate=t),d.Njj(t)})),d.bIt("valid",(function(t){d.eBV(e);const s=d.XpG(2);return d.Njj(s.setDateValid("start",t))})),d.k0s()()(),d.j41(11,"div",25)(12,"div",13)(13,"label",14),d.DNE(14,Un,2,0,"abbr",15),d.nrm(15,"system-label",21),d.k0s(),d.j41(16,"system-input-date",17),d.mxI("ngModelChange",(function(t){d.eBV(e);const s=d.XpG(2);return d.DH7(s.endDate,t)||(s.endDate=t),d.Njj(t)})),d.bIt("valid",(function(t){d.eBV(e);const s=d.XpG(2);return d.Njj(s.setDateValid("end",t))})),d.k0s()(),d.j41(17,"div",18)(18,"label",14),d.nrm(19,"system-label",22),d.k0s(),d.j41(20,"system-input-time",20),d.mxI("ngModelChange",(function(t){d.eBV(e);const s=d.XpG(2);return d.DH7(s.endDate,t)||(s.endDate=t),d.Njj(t)})),d.bIt("valid",(function(t){d.eBV(e);const s=d.XpG(2);return d.Njj(s.setDateValid("end",t))})),d.k0s()()()()}if(2&e){const e=d.XpG(2);d.R7$(4),d.Y8G("ngIf",e.stati.editable&&e.stati.required),d.R7$(2),d.R50("ngModel",e.startDate),d.R7$(4),d.R50("ngModel",e.startDate),d.R7$(4),d.Y8G("ngIf",e.stati.editable&&e.stati.required),d.R7$(2),d.R50("ngModel",e.endDate),d.R7$(4),d.R50("ngModel",e.endDate)}}function Nn(e,t){if(1&e&&(d.j41(0,"div",7),d.DNE(1,On,21,6,"div",8)(2,Yn,21,6,"ng-template",null,9,d.C5r),d.nrm(4,"field-messages",10),d.k0s()),2&e){const e=d.sdS(3),t=d.XpG();d.Y8G("ngClass",t.css_classes),d.R7$(),d.Y8G("ngIf",t.vertical)("ngIfElse",e),d.R7$(3),d.Y8G("fieldname",t.fieldname)}}let Vn=(()=>{class fieldDateTimeSpan extends r.s{constructor(e,t,s,i,n){super(e,t,s,i,n),this.model=e,this.view=t,this.language=s,this.metadata=i,this.router=n,this.isValid=!0,this.errorMessage="",this.startDateValid=!0,this.endDateValid=!0}ngOnInit(){super.ngOnInit(),this.subscriptions.add(this.model.data$.subscribe((e=>{if(this.startDate&&this.endDate){let e=0;e="string"==typeof this.endDate?moment(this.endDate).diff(this.startDate):this.endDate.diff(this.startDate),this.duration=moment.duration(e)}})))}get vertical(){return!0!==this.fieldconfig.horizontal}get showToDate(){return!this.startDate||!this.endDate||!this.startDate.isSame(this.endDate,"day")}get fieldstart(){return this.fieldconfig.date_start?this.fieldconfig.date_start:"date_start"}get fieldend(){return this.fieldconfig.date_end?this.fieldconfig.date_end:"date_end"}get startDate(){return this.model.getField(this.fieldstart)}set startDate(e){let t={};if(t[this.fieldstart]=e,this.duration){let s=new moment(e).add(this.duration.asSeconds(),"s");t[this.fieldend]=s}else this.model.getField(this.fieldend)||(t[this.fieldend]=new moment(e));this.model.setFields(t)}get endDate(){return this.model.getField(this.fieldend)}set endDate(e){this.model.getFieldValue(this.fieldstart)||(this.startDate=new moment(e)),e.isBefore(this.model.getFieldValue(this.fieldstart))?(this.isValid=!1,this.errorMessage="enddate cannot be before startdate",this.model.setFieldMessage("error","enddate cannot be before startdate",this.fieldname,"sequencecheck")):(this.model.resetFieldMessages(this.fieldname,"error","sequencecheck"),this.model.setField(this.fieldend,e),this.isValid=!0)}setDateValid(e,t){switch(e){case"start":this.startDateValid=t;break;case"end":this.endDateValid=t}this.endDateValid&&this.startDateValid?this.model.resetFieldMessages(this.fieldname,"error","validitycheck"):this.model.setFieldMessage("error",this.language.getLabel("LBL_INPUT_INVALID"),this.fieldname,"validitycheck")}get stati(){let e=this.model.getFieldStati(this.fieldname);return!e.editable||this.view.isEditable&&!this.fieldconfig.readonly||(e.editable=!1),this.fieldconfig.required&&(e.required=!0),e}static#e=this.ɵfac=function(e){return new(e||fieldDateTimeSpan)(d.rXU(R.g),d.rXU(G.U),d.rXU(k.B),d.rXU(c.yu),d.rXU(C.Ix))};static#t=this.ɵcmp=d.VBU({type:fieldDateTimeSpan,selectors:[["field-date-time-span"]],features:[d.Vt3],decls:2,vars:2,consts:[[4,"ngIf"],["class","slds-form-element__control slds-p-around--xx-small",3,"ngClass",4,"ngIf"],[3,"fieldname","fieldconfig",4,"ngIf"],[3,"fielddisplayclass","editable","fieldconfig"],[3,"date"],[3,"date","displayDate"],[3,"fieldname","fieldconfig"],[1,"slds-form-element__control","slds-p-around--xx-small",3,"ngClass"],["class","slds-grid slds-grid--vertical",4,"ngIf","ngIfElse"],["horizontal",""],[3,"fieldname"],[1,"slds-grid","slds-grid--vertical"],[1,"slds-grid","slds-gutters_xx-small"],[1,"slds-form-element","slds-col","slds-size--1-of-2"],[1,"slds-form-element__label"],["class","slds-required",4,"ngIf"],["label","LBL_DATE_START"],["system-input-date-hide-error","",3,"ngModel","ngModelChange","valid"],[1,"slds-form-element","slds-col","slds-size--1-of-2","slds-m-top--none"],["label","LBL_TIME_START"],["system-input-time-hide-error","",3,"ngModel","ngModelChange","valid"],["label","LBL_DATE_END"],["label","LBL_TIME_END"],[1,"slds-required"],[1,"slds-grid","slds-wrap","slds-gutters_xx-small"],[1,"slds-grid","slds-col","slds-gutters_xx-small","slds-size--1-of-1","slds-large-size--1-of-2"]],template:function(e,t){1&e&&d.DNE(0,Tn,6,7,"ng-container",0)(1,Nn,5,4,"div",1),2&e&&(d.Y8G("ngIf",!t.isEditMode()),d.R7$(),d.Y8G("ngIf",t.isEditable()&&t.isEditMode()))},dependencies:[i.YU,i.bT,n.BC,n.vS,Wi.f,Ki.M,on.T,le.W,u.b,j.K,D.A],encapsulation:2})}return fieldDateTimeSpan})();function An(e,t){if(1&e&&d.nrm(0,"field-label",5),2&e){const e=d.XpG(2);d.Y8G("fieldname",e.fieldname)("fieldconfig",e.fieldconfig)}}function Pn(e,t){if(1&e&&(d.qex(0),d.DNE(1,An,1,2,"field-label",2),d.j41(2,"field-generic-display",3),d.nrm(3,"system-display-datetime",4),d.EFF(4,"  - "),d.nrm(5,"system-display-datetime",4),d.k0s(),d.bVm()),2&e){const e=d.XpG();d.R7$(),d.Y8G("ngIf",e.displayLabel),d.R7$(),d.Y8G("fielddisplayclass",e.fielddisplayclass)("editable",e.isEditable())("fieldconfig",e.fieldconfig),d.R7$(),d.Y8G("date",e.startDate)("displayTime",!1),d.R7$(2),d.Y8G("date",e.endDate)("displayTime",!1)}}function zn(e,t){if(1&e){const e=d.RV6();d.j41(0,"div",6)(1,"div",7)(2,"div",8)(3,"div",9)(4,"label",10),d.nrm(5,"system-label",11),d.k0s(),d.j41(6,"system-input-date",12),d.mxI("ngModelChange",(function(t){d.eBV(e);const s=d.XpG();return d.DH7(s.startDate,t)||(s.startDate=t),d.Njj(t)})),d.bIt("valid",(function(t){d.eBV(e);const s=d.XpG();return d.Njj(s.setDateValid("start",t))})),d.k0s()()(),d.j41(7,"div",8)(8,"div",9)(9,"label",10),d.nrm(10,"system-label",13),d.k0s(),d.j41(11,"system-input-date",12),d.mxI("ngModelChange",(function(t){d.eBV(e);const s=d.XpG();return d.DH7(s.endDate,t)||(s.endDate=t),d.Njj(t)})),d.bIt("valid",(function(t){d.eBV(e);const s=d.XpG();return d.Njj(s.setDateValid("end",t))})),d.k0s()()()(),d.nrm(12,"field-messages",14),d.k0s()}if(2&e){const e=d.XpG();d.Y8G("ngClass",e.css_classes),d.R7$(6),d.R50("ngModel",e.startDate),d.R7$(5),d.R50("ngModel",e.endDate),d.R7$(),d.Y8G("fieldname",e.fieldname)}}let Hn=(()=>{class fieldDateSpan extends r.s{constructor(e,t,s,i,n){super(e,t,s,i,n),this.model=e,this.view=t,this.language=s,this.metadata=i,this.router=n,this.isValid=!0,this.errorMessage="",this.startDateValid=!0,this.endDateValid=!0}ngOnInit(){super.ngOnInit(),this.subscriptions.add(this.model.data$.subscribe((e=>{this.startDate&&this.endDate&&(this.duration=moment.duration(this.endDate.diff(this.startDate)))})))}get fieldstart(){return this.fieldconfig.date_start?this.fieldconfig.date_start:"date_start"}get fieldend(){return this.fieldconfig.date_end?this.fieldconfig.date_end:"date_end"}get startDate(){return this.model.getField(this.fieldstart)}set startDate(e){let t={};if(t[this.fieldstart]=e,this.duration){let s=new moment(e).add(this.duration.asSeconds(),"s");t[this.fieldend]=s}this.model.setFields(t)}get endDate(){return this.model.getField(this.fieldend)}set endDate(e){this.model.getFieldValue(this.fieldstart)||(this.startDate=new moment(e)),e.isBefore(this.model.getFieldValue(this.fieldstart))?(this.isValid=!1,this.errorMessage="enddate cannot be before startdate",this.model.setFieldMessage("error","enddate cannot be before startdate",this.fieldname,"sequencecheck")):(this.model.resetFieldMessages(this.fieldname,"error","sequencecheck"),this.model.setField(this.fieldend,e),this.isValid=!0)}setDateValid(e,t){switch(e){case"start":this.startDateValid=t;break;case"end":this.endDateValid=t}this.endDateValid&&this.startDateValid?this.model.resetFieldMessages(this.fieldname,"error","validitycheck"):this.model.setFieldMessage("error",this.language.getLabel("LBL_INPUT_INVALID"),this.fieldname,"validitycheck")}static#e=this.ɵfac=function(e){return new(e||fieldDateSpan)(d.rXU(R.g),d.rXU(G.U),d.rXU(k.B),d.rXU(c.yu),d.rXU(C.Ix))};static#t=this.ɵcmp=d.VBU({type:fieldDateSpan,selectors:[["field-date-span"]],features:[d.Vt3],decls:2,vars:2,consts:[[4,"ngIf"],["class","slds-form-element__control slds-p-around--xx-small",3,"ngClass",4,"ngIf"],[3,"fieldname","fieldconfig",4,"ngIf"],[3,"fielddisplayclass","editable","fieldconfig"],[3,"date","displayTime"],[3,"fieldname","fieldconfig"],[1,"slds-form-element__control","slds-p-around--xx-small",3,"ngClass"],[1,"slds-grid","slds-gutters_direct-xx-small"],[1,"slds-size--1-of-2","slds-col"],[1,"slds-form-element"],[1,"slds-form-element__label"],["label","LBL_DATE_START"],["system-input-date-hide-error","",3,"ngModel","ngModelChange","valid"],["label","LBL_DATE_END"],[3,"fieldname"]],template:function(e,t){1&e&&d.DNE(0,Pn,6,8,"ng-container",0)(1,zn,13,4,"div",1),2&e&&(d.Y8G("ngIf",!t.isEditMode()),d.R7$(),d.Y8G("ngIf",t.isEditable()&&t.isEditMode()))},dependencies:[i.YU,i.bT,n.BC,n.vS,Wi.f,Ki.M,le.W,u.b,j.K,D.A],encapsulation:2})}return fieldDateSpan})();var qn=s(87285),Jn=s(4656),Wn=s(92695),Kn=s(32130),Qn=s(22465);function Zn(e,t){if(1&e&&d.nrm(0,"field-label",3),2&e){const e=d.XpG();d.Y8G("fieldname",e.fieldname)("fieldconfig",e.fieldconfig)}}function el(e,t){if(1&e){const e=d.RV6();d.j41(0,"system-checkbox",7),d.mxI("ngModelChange",(function(t){d.eBV(e);const s=d.XpG(2);return d.DH7(s.isReferenced,t)||(s.isReferenced=t),d.Njj(t)})),d.nrm(1,"system-label",8),d.k0s()}if(2&e){const e=d.XpG(2);d.R50("ngModel",e.isReferenced),d.Y8G("disabled",!0)}}function tl(e,t){if(1&e&&(d.j41(0,"div")(1,"field-generic-display",4)(2,"div",5)(3,"span"),d.EFF(4),d.k0s(),d.DNE(5,el,2,2,"system-checkbox",6),d.k0s()()()),2&e){const e=d.XpG();d.R7$(),d.Y8G("fielddisplayclass",e.fielddisplayclass)("fieldconfig",e.fieldconfig)("editable",e.isEditable())("fieldid",e.fieldid),d.R7$(3),d.JRh(e.value),d.R7$(),d.Y8G("ngIf",!!e.referenceMetadata&&!e.fieldconfig.referenceCheckboxDisplayNone)}}function sl(e,t){if(1&e){const e=d.RV6();d.j41(0,"div",30),d.nrm(1,"field-label",15),d.j41(2,"div",16)(3,"input",17,18),d.mxI("ngModelChange",(function(t){d.eBV(e);const s=d.XpG(2);return d.DH7(s.street_number,t)||(s.street_number=t),d.Njj(t)})),d.k0s()(),d.nrm(5,"field-messages",19),d.k0s()}if(2&e){const e=d.XpG(2);d.R7$(),d.Y8G("fieldname",e.fieldName("street_number")),d.R7$(2),d.R50("ngModel",e.street_number),d.Y8G("disabled",e.isReferenced)("ngModelOptions",e.modelOptions),d.R7$(2),d.Y8G("fieldname",e.fieldName("street_number"))}}function il(e,t){if(1&e){const e=d.RV6();d.j41(0,"div",30),d.nrm(1,"field-label",15),d.j41(2,"div",16)(3,"input",17,18),d.mxI("ngModelChange",(function(t){d.eBV(e);const s=d.XpG(2);return d.DH7(s.street_number_suffix,t)||(s.street_number_suffix=t),d.Njj(t)})),d.k0s()(),d.nrm(5,"field-messages",19),d.k0s()}if(2&e){const e=d.XpG(2);d.R7$(),d.Y8G("fieldname",e.fieldName("street_number_suffix")),d.R7$(2),d.R50("ngModel",e.street_number_suffix),d.Y8G("disabled",e.isReferenced)("ngModelOptions",e.modelOptions),d.R7$(2),d.Y8G("fieldname",e.fieldName("street_number_suffix"))}}function nl(e,t){if(1&e){const e=d.RV6();d.j41(0,"div",30)(1,"label",31),d.nrm(2,"system-label",32),d.k0s(),d.j41(3,"system-checkbox",33),d.mxI("ngModelChange",(function(t){d.eBV(e);const s=d.XpG(2);return d.DH7(s.isReferenced,t)||(s.isReferenced=t),d.Njj(t)})),d.k0s()()}if(2&e){const e=d.XpG(2);d.R7$(3),d.R50("ngModel",e.isReferenced),d.Y8G("disabled",e.model.isNew&&!e.isReferenced)}}function ll(e,t){if(1&e){const e=d.RV6();d.j41(0,"div",34),d.nrm(1,"field-label",15),d.j41(2,"div",16)(3,"input",17),d.mxI("ngModelChange",(function(t){d.eBV(e);const s=d.XpG(2);return d.DH7(s.attn,t)||(s.attn=t),d.Njj(t)})),d.k0s()(),d.nrm(4,"field-messages",19),d.k0s()}if(2&e){const e=d.XpG(2);d.R7$(),d.Y8G("fieldname",e.fieldName("attn")),d.R7$(2),d.R50("ngModel",e.attn),d.Y8G("disabled",e.isReferenced)("ngModelOptions",e.modelOptions),d.R7$(),d.Y8G("fieldname",e.fieldName("attn"))}}function ol(e,t){if(1&e){const e=d.RV6();d.j41(0,"div",35),d.nrm(1,"field-label",15),d.j41(2,"div",16)(3,"input",17),d.mxI("ngModelChange",(function(t){d.eBV(e);const s=d.XpG(2);return d.DH7(s.district,t)||(s.district=t),d.Njj(t)})),d.k0s()(),d.nrm(4,"field-messages",19),d.k0s()}if(2&e){const e=d.XpG(2);d.R7$(),d.Y8G("fieldname",e.fieldName("district")),d.R7$(2),d.R50("ngModel",e.district),d.Y8G("disabled",e.isReferenced)("ngModelOptions",e.modelOptions),d.R7$(),d.Y8G("fieldname",e.fieldName("district"))}}function al(e,t){if(1&e){const e=d.RV6();d.j41(0,"div",36),d.nrm(1,"field-label",15),d.j41(2,"system-input-state",37),d.mxI("ngModelChange",(function(t){d.eBV(e);const s=d.XpG(2);return d.DH7(s.state,t)||(s.state=t),d.Njj(t)})),d.k0s(),d.nrm(3,"field-messages",19),d.k0s()}if(2&e){const e=d.XpG(2);d.R7$(),d.Y8G("fieldname",e.fieldName("state")),d.R7$(),d.R50("ngModel",e.state),d.Y8G("disabled",e.isReferenced)("country",e.country),d.R7$(),d.Y8G("fieldname",e.fieldName("state"))}}function rl(e,t){if(1&e){const e=d.RV6();d.j41(0,"div",9)(1,"div",10)(2,"div",11)(3,"system-googleplaces-autocomplete",12),d.bIt("address",(function(t){d.eBV(e);const s=d.XpG();return d.Njj(s.addressSelected(t))})),d.k0s()(),d.j41(4,"div",13)(5,"div",14),d.nrm(6,"field-label",15),d.j41(7,"div",16)(8,"input",17,18),d.mxI("ngModelChange",(function(t){d.eBV(e);const s=d.XpG();return d.DH7(s.street,t)||(s.street=t),d.Njj(t)})),d.k0s()(),d.nrm(10,"field-messages",19),d.k0s(),d.DNE(11,sl,6,5,"div",20)(12,il,6,5,"div",20)(13,nl,4,2,"div",20),d.k0s(),d.DNE(14,ll,5,5,"div",21),d.j41(15,"div",22)(16,"div",23),d.nrm(17,"field-label",15),d.j41(18,"div",16)(19,"input",17),d.mxI("ngModelChange",(function(t){d.eBV(e);const s=d.XpG();return d.DH7(s.postalcode,t)||(s.postalcode=t),d.Njj(t)})),d.k0s()(),d.nrm(20,"field-messages",19),d.k0s(),d.j41(21,"div",24),d.nrm(22,"field-label",15),d.j41(23,"div",16)(24,"input",17),d.mxI("ngModelChange",(function(t){d.eBV(e);const s=d.XpG();return d.DH7(s.city,t)||(s.city=t),d.Njj(t)})),d.k0s()(),d.nrm(25,"field-messages",19),d.k0s(),d.DNE(26,ol,5,5,"div",25),d.k0s(),d.j41(27,"div",22),d.DNE(28,al,4,5,"div",26),d.j41(29,"div",24)(30,"label",27),d.nrm(31,"system-label",28),d.k0s(),d.j41(32,"system-input-country",29),d.mxI("ngModelChange",(function(t){d.eBV(e);const s=d.XpG();return d.DH7(s.country,t)||(s.country=t),d.Njj(t)})),d.k0s(),d.nrm(33,"field-messages",19),d.k0s()()()()}if(2&e){const e=d.XpG();d.Y8G("system-overlay-loading-spinner",e.isLoading)("ngClass",e.getFieldClass()),d.R7$(3),d.Y8G("disabled",e.isReferenced),d.R7$(3),d.Y8G("fieldname",e.fieldName("street")),d.R7$(2),d.R50("ngModel",e.street),d.Y8G("disabled",e.isReferenced)("ngModelOptions",e.modelOptions),d.R7$(2),d.Y8G("fieldname",e.fieldName("street")),d.R7$(),d.Y8G("ngIf",!e.hidestreetnumber),d.R7$(),d.Y8G("ngIf",!e.hidenumbersuffix),d.R7$(),d.Y8G("ngIf",!!e.referenceMetadata),d.R7$(),d.Y8G("ngIf",!e.hideattn),d.R7$(3),d.Y8G("fieldname",e.fieldName("postalcode")),d.R7$(2),d.R50("ngModel",e.postalcode),d.Y8G("disabled",e.isReferenced)("ngModelOptions",e.modelOptions),d.R7$(),d.Y8G("fieldname",e.fieldName("postalcode")),d.R7$(2),d.Y8G("fieldname",e.fieldName("city")),d.R7$(2),d.R50("ngModel",e.city),d.Y8G("disabled",e.isReferenced)("ngModelOptions",e.modelOptions),d.R7$(),d.Y8G("fieldname",e.fieldName("city")),d.R7$(),d.Y8G("ngIf",!e.hidedistrict),d.R7$(2),d.Y8G("ngIf",!e.hidestate),d.R7$(4),d.R50("ngModel",e.country),d.Y8G("disabled",e.isReferenced),d.R7$(),d.Y8G("fieldname",e.fieldName("country"))}}let dl=(()=>{class fieldAddress extends r.s{constructor(e,t,s,i,n,l,o,a,r,d){super(e,t,s,i,n),this.model=e,this.view=t,this.language=s,this.metadata=i,this.router=n,this.configuration=l,this.backend=o,this.toast=a,this.modal=r,this.injector=d,this.strict=!1,this.isLoading=!1,this.config_address_format={},this.addressFormat="{street} {street_number}, {postalcode} {city}, {statename}, {countryname}",this._isReferenced=!1;let c=this.configuration.data.backendextensions.spiceui.config.format;"strict"==c&&(this.strict=!0),c.addressformat&&(this.addressFormat=c.addressformat),this.getAddressConfig()}ngOnInit(){super.ngOnInit(),this.handleReferenceAddress()}ngAfterViewInit(){super.ngAfterViewInit(),this.referenceMetadata&&(this._isReferenced=this.model.getField(this.addresskey+"address_reference_id"))}handleReferenceAddress(){const e=this.configuration.getData("spice_address_references");if(!Array.isArray(e))return;const t=e.find((e=>e.child_module==this.model.module&&e.child_address_key==this.fieldconfig.key));t&&(this.referenceMetadata=t,this.subscriptions.add(this.model.observeFieldChanges(t.child_address_key+"_address_reference_id").subscribe((e=>{this._isReferenced=!!e}))))}set isReferenced(e){e!=this._isReferenced&&(this._isReferenced=e,this.model.isNew||(e?this.handleReferenceActivation():this.model.setField(this.addresskey+"address_reference_id","")))}get isReferenced(){return this._isReferenced}handleReferenceActivation(){this.isLoading=!0;const e=`module/${this.model.module}/${this.model.id}/related/${this.referenceMetadata.child_link_name}`;this.backend.getRequest(e).subscribe({next:e=>{this.isLoading=!1,this.handleReferenceResponse(_.toArray(e))},error:()=>{this.isLoading=!1,this._isReferenced=!1,this.toast.sendToast("MSG_NO_RECORDS_FOUND","warning")}})}handleReferenceResponse(e){e.length>1?this.modal.openModal("ObjectSelectBeanListModal",!0,this.injector).subscribe((t=>{t.instance.listData=e,t.instance.selectedIds$.subscribe({next:t=>{t?this.model.copyReferencedAddress(this.referenceMetadata,e.find((e=>e.id==t[0]))):this._isReferenced=!1}})})):1==e.length?this.model.copyReferencedAddress(this.referenceMetadata,e[0]):(this._isReferenced=!1,this.toast.sendToast("MSG_NO_RECORDS_FOUND","warning"))}getAddressConfig(){this.config_address_format=JSON.parse(this.configuration.data?.backendextensions?.address_format?.config?.format??"{}")}get value(){return this.buildAddress()}get addresskey(){return this.fieldconfig.key?this.fieldconfig.key+"_":""}buildAddress(){let e=this.addressFormat;if(this.strict&&this.country){let t=this.configuration.getData("countries");if(t){let s=t.countries.find((e=>e.cc==this.country));s&&s.addressformat&&(e=s.addressformat)}}let t=e.match(/\{(.*?)\}/g);for(let s of t){let t=this[s.slice(1,-1)];e=e.replace(s,t||"")}return e.replace(new RegExp(/^([\s,]*)|(,[\s,]*,)|$([\s,]*)/gm),"").trim()}get countryname(){if(this.strict){let e=this.country;if(e){let t=this.configuration.getData("countries");if(t){let s=t.countries.find((t=>t.cc==e));s&&(e=this.language.getLabel(s.label))}}return e}return this.country}get statename(){if(this.strict){let e=this.country,t=this.state;if(t){let s=this.configuration.getData("countries");if(s){let i=s.states.find((s=>s.cc==e&&s.sc==t));i&&(t=this.language.getLabel(i.label))}}return t}return this.state}addressSelected(e){this.hidestreetnumber?this.street=e.street:(this.street=e.street_name,this.street_number=e.street_number),this.city=e.city,this.district=e.district,this.postalcode=e.postalcode,this.country=e.country,this.state=e.state,this.latitude=e.latitude,this.longitude=e.longitude}getAddressLabel(){return this.language.getLabel(this.fieldconfig.label)}fieldName(e){return this.addresskey+"address_"+e}get street(){return this.model.getField(this.addresskey+"address_street")}set street(e){this.model.setField(this.addresskey+"address_street",e)}get street_number(){return this.model.getField(this.addresskey+"address_street_number")}set street_number(e){this.model.setField(this.addresskey+"address_street_number",e)}get street_number_suffix(){return this.model.getField(this.addresskey+"address_street_number_suffix")}set street_number_suffix(e){this.model.setField(this.addresskey+"address_street_number_suffix",e)}get attn(){return this.model.getField(this.addresskey+"address_attn")}set attn(e){this.model.setField(this.addresskey+"address_attn",e)}get city(){return this.model.getField(this.addresskey+"address_city")}set city(e){this.model.setField(this.addresskey+"address_city",e)}set district(e){this.model.setField(this.addresskey+"address_district",e)}get district(){return this.model.getField(this.addresskey+"address_district")}get postalcode(){return this.model.getField(this.addresskey+"address_postalcode")}set postalcode(e){this.model.setField(this.addresskey+"address_postalcode",e)}get state(){return this.model.getField(this.addresskey+"address_state")}set state(e){this.model.setField(this.addresskey+"address_state",e)}get country(){return this.model.getField(this.addresskey+"address_country")}set country(e){this.model.setField(this.addresskey+"address_country",e)}get latitude(){return this.model.getField(this.addresskey+"address_latitude")}set latitude(e){this.model.setField(this.addresskey+"address_latitude",e)}get longitude(){return this.model.getField(this.addresskey+"address_longitude")}set longitude(e){this.model.setField(this.addresskey+"address_longitude",e)}get hideattn(){return!!this.fieldconfig.hideattn||!!this.config_address_format?.hideattn}get hidestate(){return!!this.fieldconfig.hidestate||!!this.config_address_format?.hidestate}get hidestreetnumber(){return!!this.fieldconfig.hidestreetnumber||!!this.config_address_format?.hidestreetnumber}get hidedistrict(){return!!this.fieldconfig.hidedistrict||!!this.config_address_format?.hidedistrict}get hidenumbersuffix(){return!!this.fieldconfig.hidenumbersuffix||!!this.config_address_format?.hidenumbersuffix}static#e=this.ɵfac=function(e){return new(e||fieldAddress)(d.rXU(R.g),d.rXU(G.U),d.rXU(k.B),d.rXU(c.yu),d.rXU(C.Ix),d.rXU(ie.i),d.rXU(ee.H),d.rXU(te.o),d.rXU(w.y),d.rXU(d.zZn))};static#t=this.ɵcmp=d.VBU({type:fieldAddress,selectors:[["field-address"]],features:[d.Vt3],decls:3,vars:3,consts:[[3,"fieldname","fieldconfig",4,"ngIf"],[4,"ngIf"],["class","slds-form-element__control",3,"system-overlay-loading-spinner","ngClass",4,"ngIf"],[3,"fieldname","fieldconfig"],[3,"fielddisplayclass","fieldconfig","editable","fieldid"],[1,"slds-grid","slds-grid--align-spread"],["class","slds-m-left--xx-small",3,"ngModel","disabled","ngModelChange",4,"ngIf"],[1,"slds-m-left--xx-small",3,"ngModel","disabled","ngModelChange"],["system-title","LBL_REFERENCE","label","LBL_REFERENCE"],[1,"slds-form-element__control",3,"system-overlay-loading-spinner","ngClass"],[1,"slds-form-element__group"],[1,"slds-grid","slds-grid--vertical-align-center"],[1,"slds-grow",3,"disabled","address"],[1,"slds-grid","slds-gutters_direct-xx-small"],[1,"slds-form-element","slds-col"],["labellength","short",3,"fieldname"],[1,"slds-form-element__control"],["type","text",1,"slds-input",3,"ngModel","disabled","ngModelOptions","ngModelChange"],["focus",""],[3,"fieldname"],["class","slds-form-element slds-col slds-size--1-of-6 ",4,"ngIf"],["class","slds-form-element slds-col slds-size--1-of-1",4,"ngIf"],[1,"slds-grid"],[1,"slds-form-element","slds-size--1-of-5","slds-col","slds-p-right--xx-small"],[1,"slds-form-element","slds-p-left--xx-small","slds-col"],["class","slds-form-element slds-col slds-size--2-of-5 slds-p-left--xx-small",4,"ngIf"],["class","slds-form-element slds-col slds-size--1-of-2 slds-p-right--xx-small",4,"ngIf"],[1,"slds-form-element__label"],["label","LBL_COUNTRY"],[3,"ngModel","disabled","ngModelChange"],[1,"slds-form-element","slds-col","slds-size--1-of-6"],["system-title","LBL_REFERENCE",1,"slds-truncate","slds-form-element__label"],["label","LBL_REFERENCE"],["hidelabel","",1,"slds-m-left--xx-small","spice-display-block",3,"ngModel","disabled","ngModelChange"],[1,"slds-form-element","slds-col","slds-size--1-of-1"],[1,"slds-form-element","slds-col","slds-size--2-of-5","slds-p-left--xx-small"],[1,"slds-form-element","slds-col","slds-size--1-of-2","slds-p-right--xx-small"],[3,"ngModel","disabled","country","ngModelChange"]],template:function(e,t){1&e&&d.DNE(0,Zn,1,2,"field-label",0)(1,tl,6,6,"div",1)(2,rl,34,27,"div",2),2&e&&(d.Y8G("ngIf",t.displayLabel),d.R7$(),d.Y8G("ngIf",!t.isEditMode()),d.R7$(),d.Y8G("ngIf",t.isEditable()&&t.isEditMode()))},dependencies:[i.YU,i.bT,n.me,n.BC,n.vS,Rt.f,qn.Z,Jn.g,Wn.V,le.W,Kn.M,Qn.L,u.b,j.K,D.A],encapsulation:2})}return fieldAddress})();function cl(e,t){if(1&e&&d.nrm(0,"field-label",3),2&e){const e=d.XpG(2);d.Y8G("fieldname",e.fieldname)("fieldconfig",e.fieldconfig)}}function ul(e,t){if(1&e&&(d.qex(0),d.DNE(1,cl,1,2,"field-label",1),d.j41(2,"field-generic-display",2),d.EFF(3),d.k0s(),d.bVm()),2&e){const e=d.XpG();d.R7$(),d.Y8G("ngIf",e.displayLabel),d.R7$(),d.Y8G("fielddisplayclass",e.fielddisplayclass)("editable",e.isEditable())("fieldconfig",e.fieldconfig)("title",e.value)("fieldid",e.fieldid),d.R7$(),d.SpI(" ",e.value," ")}}function ml(e,t){if(1&e&&d.nrm(0,"field-label",10),2&e){const e=d.XpG(2);d.Y8G("fieldname",e.fieldsalutation)}}function hl(e,t){if(1&e&&(d.j41(0,"option",15),d.EFF(1),d.k0s()),2&e){const e=t.$implicit;d.Y8G("ngValue",e.value),d.R7$(),d.JRh(e.display)}}function gl(e,t){if(1&e&&d.nrm(0,"field-label",10),2&e){const e=d.XpG(3);d.Y8G("fieldname",e.fielddegree)}}function pl(e,t){if(1&e){const e=d.RV6();d.j41(0,"div",13),d.DNE(1,gl,1,1,"field-label",6),d.j41(2,"input",16),d.mxI("ngModelChange",(function(t){d.eBV(e);const s=d.XpG(2);return d.DH7(s.degree1,t)||(s.degree1=t),d.Njj(t)})),d.k0s(),d.nrm(3,"field-messages",10),d.k0s()}if(2&e){const e=d.XpG(2);d.Y8G("ngClass",e.getClassesForSubField(e.fielddegree)),d.R7$(),d.Y8G("ngIf",e.displayLabel),d.R7$(),d.R50("ngModel",e.degree1),d.R7$(),d.Y8G("fieldname",e.fielddegree)}}function fl(e,t){if(1&e&&d.nrm(0,"field-label",10),2&e){const e=d.XpG(2);d.Y8G("fieldname",e.fieldfirstname)}}function bl(e,t){if(1&e&&d.nrm(0,"field-label",10),2&e){const e=d.XpG(2);d.Y8G("fieldname",e.fieldlastname)}}function yl(e,t){if(1&e&&d.nrm(0,"field-label",10),2&e){const e=d.XpG(3);d.Y8G("fieldname",e.fieldlasttitle)}}function vl(e,t){if(1&e){const e=d.RV6();d.j41(0,"div",13),d.DNE(1,yl,1,1,"field-label",6),d.j41(2,"input",16),d.mxI("ngModelChange",(function(t){d.eBV(e);const s=d.XpG(2);return d.DH7(s.degree2,t)||(s.degree2=t),d.Njj(t)})),d.k0s(),d.nrm(3,"field-messages",10),d.k0s()}if(2&e){const e=d.XpG(2);d.Y8G("ngClass",e.getClassesForSubField(e.fieldlasttitle)),d.R7$(),d.Y8G("ngIf",e.displayLabel),d.R7$(),d.R50("ngModel",e.degree2),d.R7$(),d.Y8G("fieldname",e.fieldlasttitle)}}const _l=()=>({updateOn:"blur"});function kl(e,t){if(1&e){const e=d.RV6();d.j41(0,"div")(1,"div",4)(2,"div",5),d.DNE(3,ml,1,1,"field-label",6),d.j41(4,"div",7)(5,"select",8),d.mxI("ngModelChange",(function(t){d.eBV(e);const s=d.XpG();return d.DH7(s.salutation,t)||(s.salutation=t),d.Njj(t)})),d.DNE(6,hl,2,2,"option",9),d.k0s()(),d.nrm(7,"field-messages",10),d.k0s(),d.DNE(8,pl,4,4,"div",11),d.j41(9,"div",5),d.DNE(10,fl,1,1,"field-label",6),d.j41(11,"input",12),d.mxI("ngModelChange",(function(t){d.eBV(e);const s=d.XpG();return d.DH7(s.first_name,t)||(s.first_name=t),d.Njj(t)})),d.k0s(),d.nrm(12,"field-messages",10),d.k0s(),d.j41(13,"div",13),d.DNE(14,bl,1,1,"field-label",6),d.j41(15,"input",12,14),d.mxI("ngModelChange",(function(t){d.eBV(e);const s=d.XpG();return d.DH7(s.last_name,t)||(s.last_name=t),d.Njj(t)})),d.k0s(),d.nrm(17,"field-messages",10),d.k0s(),d.DNE(18,vl,4,4,"div",11),d.k0s()()}if(2&e){const e=d.XpG();d.R7$(2),d.Y8G("ngClass",e.getClassesForSubField(e.fieldsalutation)),d.R7$(),d.Y8G("ngIf",e.displayLabel),d.R7$(2),d.R50("ngModel",e.salutation),d.R7$(),d.Y8G("ngForOf",e.getSalutations()),d.R7$(),d.Y8G("fieldname",e.fieldsalutation),d.R7$(),d.Y8G("ngIf",!e.isSimple),d.R7$(),d.Y8G("ngClass",e.getClassesForSubField(e.fieldfirstname)),d.R7$(),d.Y8G("ngIf",e.displayLabel),d.R7$(),d.R50("ngModel",e.first_name),d.Y8G("ngModelOptions",d.lJ4(17,_l)),d.R7$(),d.Y8G("fieldname",e.fieldfirstname),d.R7$(),d.Y8G("ngClass",e.getClassesForSubField(e.fieldlastname)),d.R7$(),d.Y8G("ngIf",e.displayLabel),d.R7$(),d.R50("ngModel",e.last_name),d.Y8G("ngModelOptions",d.lJ4(18,_l)),d.R7$(2),d.Y8G("fieldname",e.fieldlastname),d.R7$(),d.Y8G("ngIf",!e.isSimple)}}let Rl=(()=>{class fieldFullName extends r.s{get fieldsalutation(){return this.fieldconfig.field_salutation?this.fieldconfig.field_salutation:"salutation"}get fielddegree(){return this.fieldconfig.field_degree?this.fieldconfig.field_degree:"degree1"}get fieldfirstname(){return this.fieldconfig.field_firstname?this.fieldconfig.field_firstname:"first_name"}get fieldlastname(){return this.fieldconfig.field_lastname?this.fieldconfig.field_lastname:"last_name"}get fieldlasttitle(){return this.fieldconfig.field_lasttitle?this.fieldconfig.field_lasttitle:"degree2"}get salutationdisplay(){return this.language.getFieldDisplayOptionValue(this.model.module,this.fieldsalutation,this.model.getField(this.fieldsalutation))}get value(){return this.filterUndefined(this.getNameFormat())}get salutation(){return this.model.getField(this.fieldsalutation)}set salutation(e){this.model.setField(this.fieldsalutation,e)}get degree1(){return this.model.getField(this.fielddegree)}set degree1(e){this.model.setField(this.fielddegree,e)}get first_name(){return this.model.getField(this.fieldfirstname)}set first_name(e){this.model.setField(this.fieldfirstname,e)}get last_name(){return this.model.getField(this.fieldlastname)}set last_name(e){this.model.setField(this.fieldlastname,e)}get degree2(){return this.model.getField(this.fieldlasttitle)}set degree2(e){this.model.setField(this.fieldlasttitle,e)}filterUndefined(e){return e||""}constructor(e,t,s,i,n,l){super(e,t,s,i,n),this.model=e,this.view=t,this.language=s,this.metadata=i,this.router=n,this.userpreferences=l,this.isValid=!0,this.errorMessage=""}getNameFormat(){const e=this.userpreferences.toUse.locale_name_format,t=this.model.getField(this.fieldsalutation),s=this.model.getField(this.fieldfirstname),i=this.model.getField(this.fieldlastname),n=this.model.getField(this.fielddegree),l=this.model.getField(this.fieldlasttitle);return"s f l"===this.userpreferences.toUse.locale_name_format?this.language.getFieldDisplayOptionValue(this.model.module,this.fieldsalutation,t)+" "+this.filterUndefined(s)+" "+this.filterUndefined(i):"f l"===e?this.language.getFieldDisplayOptionValue(this.model.module,this.fieldfirstname,s+" "+this.filterUndefined(i)):"s l"===e?this.language.getFieldDisplayOptionValue(this.model.module,this.fieldsalutation,t+" "+this.filterUndefined(i)):"l, s f"===e?this.language.getFieldDisplayOptionValue(this.model.module,this.fieldlastname,i+", "+this.filterUndefined(t)+" "+this.filterUndefined(s)):"l, f"===e?this.language.getFieldDisplayOptionValue(this.model.module,this.fieldlastname,i+", "+this.filterUndefined(s)):"s l, f"===e?this.language.getFieldDisplayOptionValue(this.model.module,this.fieldsalutation,t)+" "+this.filterUndefined(i)+", "+this.filterUndefined(s):"l s f"===e?this.language.getFieldDisplayOptionValue(this.model.module,this.fieldlastname,i+" "+this.filterUndefined(t)+" "+this.filterUndefined(s)):"l f s"===e?this.language.getFieldDisplayOptionValue(this.model.module,this.fieldlastname,i+" "+this.filterUndefined(s)+" "+this.filterUndefined(t)):"s d f l a"===e?this.language.getFieldDisplayOptionValue(this.model.module,this.fieldsalutation,t)+" "+this.filterUndefined(n)+" "+this.filterUndefined(s)+" "+this.filterUndefined(i)+" "+this.filterUndefined(l):void 0}get isSimple(){return this.fieldconfig.simple}getClassesForSubField(e){let t="";switch(e){case this.fieldsalutation:t="small"==this.view.size?"slds-size--1-of-3 slds-order--1":this.isSimple?"slds-size--1-of-5":"slds-size--1-of-7";break;case this.fielddegree:t="small"==this.view.size?"slds-size--1-of-3 slds-order--2":"slds-size--1-of-7";break;case this.fieldlasttitle:t="small"==this.view.size?"slds-size--1-of-3 slds-order--3":"slds-size--1-of-7";break;case this.fieldfirstname:t="small"==this.view.size?"slds-size--1-of-2 slds-order--4":this.isSimple?"slds-p-left--xx-small slds-size--2-of-5":"slds-p-left--xx-small slds-size--2-of-7";break;case this.fieldlastname:t="small"==this.view.size?"slds-size--1-of-2 slds-order--5":this.isSimple?"slds-size--2-of-5":"slds-size--2-of-7"}return this.getStati(e).invalid&&(t+=" slds-has-error"),t}getSalutations(){let e=[],t=this.language.getFieldDisplayOptions(this.model.module,this.fieldconfig.field_salutation?this.fieldconfig.field_salutation:"salutation");for(let s in t)e.push({value:s,display:t[s]});return e}static#e=this.ɵfac=function(e){return new(e||fieldFullName)(d.rXU(R.g),d.rXU(G.U),d.rXU(k.B),d.rXU(c.yu),d.rXU(C.Ix),d.rXU(xe.S))};static#t=this.ɵcmp=d.VBU({type:fieldFullName,selectors:[["field-full-name"]],features:[d.Vt3],decls:2,vars:2,consts:[[4,"ngIf"],[3,"fieldname","fieldconfig",4,"ngIf"],[3,"fielddisplayclass","editable","fieldconfig","title","fieldid"],[3,"fieldname","fieldconfig"],[1,"slds-grid","slds-grid_vertical-align-center","slds-wrap"],[1,"slds-col","slds-form-element__control","slds-align-top",3,"ngClass"],[3,"fieldname",4,"ngIf"],[1,"slds-select_container","slds-p-vertical--xxx-small"],[1,"slds-select",3,"ngModel","ngModelChange"],[3,"ngValue",4,"ngFor","ngForOf"],[3,"fieldname"],["class","slds-col slds-form-element__control slds-p-left--xx-small slds-align-top",3,"ngClass",4,"ngIf"],["type","text",1,"slds-input","slds-p-vertical--xxx-small",3,"ngModel","ngModelOptions","ngModelChange"],[1,"slds-col","slds-form-element__control","slds-p-left--xx-small","slds-align-top",3,"ngClass"],["focus",""],[3,"ngValue"],["type","text",1,"slds-input","slds-p-vertical--xxx-small",3,"ngModel","ngModelChange"]],template:function(e,t){1&e&&d.DNE(0,ul,4,7,"ng-container",0)(1,kl,19,19,"div",0),2&e&&(d.Y8G("ngIf",!t.isEditMode()),d.R7$(),d.Y8G("ngIf",t.isEditable()&&t.isEditMode()))},dependencies:[i.YU,i.Sq,i.bT,n.xH,n.y7,n.me,n.wz,n.BC,n.vS,u.b,j.K,D.A],encapsulation:2})}return fieldFullName})();function Il(e,t){if(1&e&&d.nrm(0,"field-label",3),2&e){const e=d.XpG();d.Y8G("fieldname",e.fieldname)("fieldconfig",e.fieldconfig)}}function xl(e,t){if(1&e&&(d.j41(0,"field-generic-display",4),d.EFF(1),d.k0s()),2&e){const e=d.XpG();d.Y8G("fielddisplayclass",e.fielddisplayclass)("editable",e.isEditable())("fieldconfig",e.fieldconfig),d.R7$(),d.SpI(" ",e.value,"\n")}}function jl(e,t){if(1&e&&(d.j41(0,"option",13),d.EFF(1),d.k0s()),2&e){const e=t.$implicit;d.Y8G("ngValue",e.value),d.R7$(),d.JRh(e.display)}}function Gl(e,t){if(1&e&&(d.j41(0,"div",14),d.EFF(1),d.k0s()),2&e){const e=d.XpG(2);d.R7$(),d.JRh(e.errorMessage)}}function Cl(e,t){if(1&e){const e=d.RV6();d.j41(0,"div")(1,"div",5)(2,"div",6)(3,"div",7)(4,"select",8),d.mxI("ngModelChange",(function(t){d.eBV(e);const s=d.XpG();return d.DH7(s.model.data[s.fielddd],t)||(s.model.data[s.fielddd]=t),d.Njj(t)})),d.DNE(5,jl,2,2,"option",9),d.k0s()()(),d.j41(6,"div",10)(7,"input",11),d.mxI("ngModelChange",(function(t){d.eBV(e);const s=d.XpG();return d.DH7(s.model.data[s.fieldtxt],t)||(s.model.data[s.fieldtxt]=t),d.Njj(t)})),d.k0s()()(),d.DNE(8,Gl,2,1,"div",12),d.k0s()}if(2&e){const e=d.XpG();d.R7$(2),d.Y8G("ngClass",e.getFieldClass()),d.R7$(2),d.R50("ngModel",e.model.data[e.fielddd]),d.R7$(),d.Y8G("ngForOf",e.getTitles()),d.R7$(),d.Y8G("ngClass",e.getFieldClass()),d.R7$(),d.R50("ngModel",e.model.data[e.fieldtxt]),d.R7$(),d.Y8G("ngIf",""!==e.errorMessage)}}let wl=(()=>{class fieldTitle extends r.s{get fielddd(){return this.fieldconfig.field_dd?this.fieldconfig.field_dd:"title_dd"}get fieldtxt(){return this.fieldconfig.field_txt?this.fieldconfig.field_txt:"title"}get titledddisplay(){return this.language.getFieldDisplayOptionValue(this.model.module,this.fielddd,this.model.getField(this.fielddd))}get value(){return(this.model.getField(this.fielddd)?this.language.getFieldDisplayOptionValue(this.model.module,this.fielddd,this.model.getField(this.fielddd)):"")+(this.model.getField(this.fieldtxt)?" "+this.model.getField(this.fieldtxt):"")}constructor(e,t,s,i,n){super(e,t,s,i,n),this.model=e,this.view=t,this.language=s,this.metadata=i,this.router=n,this.isValid=!0,this.errorMessage=""}getFieldClass(){let e=[];return this.isValid||e.push("slds-has-error"),e}getTitles(){let e=[],t=this.language.getFieldDisplayOptions(this.model.module,this.fieldconfig.field_dd?this.fieldconfig.field_dd:"title_dd");for(let s in t)e.push({value:s,display:t[s]});return e}static#e=this.ɵfac=function(e){return new(e||fieldTitle)(d.rXU(R.g),d.rXU(G.U),d.rXU(k.B),d.rXU(c.yu),d.rXU(C.Ix))};static#t=this.ɵcmp=d.VBU({type:fieldTitle,selectors:[["field-title"]],features:[d.Vt3],decls:3,vars:3,consts:[[3,"fieldname","fieldconfig",4,"ngIf"],[3,"fielddisplayclass","editable","fieldconfig",4,"ngIf"],[4,"ngIf"],[3,"fieldname","fieldconfig"],[3,"fielddisplayclass","editable","fieldconfig"],[1,"slds-grid","slds-p-around--xx-small"],[1,"slds-col","slds-form-element__control","slds-size--1-of-2",3,"ngClass"],[1,"slds-select_container"],[1,"slds-select",3,"ngModel","ngModelChange"],[3,"ngValue",4,"ngFor","ngForOf"],[1,"slds-col","slds-form-element__control","slds-size--1-of-2","slds-p-left--xx-small",3,"ngClass"],["type","text",1,"slds-input",3,"ngModel","ngModelChange"],["class","slds-form-element__help",4,"ngIf"],[3,"ngValue"],[1,"slds-form-element__help"]],template:function(e,t){1&e&&d.DNE(0,Il,1,2,"field-label",0)(1,xl,2,4,"field-generic-display",1)(2,Cl,9,6,"div",2),2&e&&(d.Y8G("ngIf",t.displayLabel),d.R7$(),d.Y8G("ngIf",!t.isEditMode()),d.R7$(),d.Y8G("ngIf",t.isEditable()&&t.isEditMode()))},dependencies:[i.YU,i.Sq,i.bT,n.xH,n.y7,n.me,n.wz,n.BC,n.vS,u.b,j.K],encapsulation:2})}return fieldTitle})();var Sl=s(21413),El=s(29994),Ll=s(67469),Dl=s(30012);const Fl=["fileupload"];function Ml(e,t){if(1&e&&d.nrm(0,"field-label",5),2&e){const e=d.XpG();d.Y8G("fieldname",e.fieldname)("fieldconfig",e.fieldconfig)}}function Tl(e,t){if(1&e&&d.nrm(0,"system-file-icon",11),2&e){const e=d.XpG(2);d.Y8G("filemimetype",e.model.getField("file_mime_type"))("filename",e.value)}}function Bl(e,t){if(1&e){const e=d.RV6();d.j41(0,"field-generic-display",6)(1,"div",7),d.DNE(2,Tl,1,2,"system-file-icon",8),d.j41(3,"div",9)(4,"a",10),d.bIt("click",(function(){d.eBV(e);const t=d.XpG();return d.Njj(t.previewFile())})),d.EFF(5),d.k0s()()()()}if(2&e){const e=d.XpG();d.Y8G("fielddisplayclass",e.fielddisplayclass)("editable",e.isEditable())("fieldconfig",e.fieldconfig)("title",e.value)("fieldid",e.fieldid),d.R7$(2),d.Y8G("ngIf",e.value),d.R7$(3),d.JRh(e.value)}}function $l(e,t){if(1&e){const e=d.RV6();d.j41(0,"div",16)(1,"span",17)(2,"span",18),d.nrm(3,"system-icon",19),d.k0s()(),d.j41(4,"a",20)(5,"span",21),d.EFF(6),d.k0s()(),d.j41(7,"button",22),d.bIt("click",(function(){d.eBV(e);const t=d.XpG(2);return d.Njj(t.removeFile())})),d.nrm(8,"system-button-icon",23),d.k0s()()}if(2&e){const e=d.XpG(2);d.R7$(3),d.Y8G("icon",e.helper.determineFileIcon(e.model.getField("file_mime_type"))),d.R7$(3),d.JRh(e.value)}}function Ol(e,t){if(1&e){const e=d.RV6();d.j41(0,"div",24)(1,"div",25),d.bIt("system-drop-file",(function(t){d.eBV(e);const s=d.XpG(2);return d.Njj(s.onDrop(t))})),d.j41(2,"input",26,27),d.bIt("click",(function(){d.eBV(e);const t=d.sdS(3);return d.Njj(t.value=null)}))("change",(function(){d.eBV(e);const t=d.XpG(2);return d.Njj(t.uploadFile())})),d.k0s(),d.j41(4,"label",28)(5,"span",29),d.nrm(6,"system-button-icon",30)(7,"system-label",31),d.k0s(),d.j41(8,"span",32),d.nrm(9,"system-label",33)(10,"system-label",34),d.k0s()()()()}if(2&e){const e=d.XpG(2);d.R7$(2),d.Y8G("id",e.fieldid),d.R7$(2),d.BMQ("for",e.fieldid),d.R7$(2),d.Y8G("icon","upload")}}function Xl(e,t){if(1&e&&(d.j41(0,"div",12),d.DNE(1,$l,9,2,"div",13)(2,Ol,11,3,"div",14),d.nrm(3,"field-messages",15),d.k0s()),2&e){const e=d.XpG();d.Y8G("ngClass",e.getFieldClass()),d.R7$(),d.Y8G("ngIf",e.value),d.R7$(),d.Y8G("ngIf",!e.value),d.R7$(),d.Y8G("fieldname",e.fieldname)}}function Ul(e,t){if(1&e&&(d.j41(0,"div",35)(1,"div",36),d.nrm(2,"div",37),d.j41(3,"div",38),d.EFF(4),d.j41(5,"div",39),d.nrm(6,"div",40),d.k0s()()()()),2&e){const e=d.XpG();d.R7$(4),d.SpI(" uploading ",e.theFile," ... "),d.R7$(2),d.Y8G("ngStyle",e.getBarStyle())}}function Yl(e,t){1&e&&d.nrm(0,"div",41)}let Nl=(()=>{class fieldFile extends r.s{constructor(e,t,s,i,n,l,o,a,r,d,c){super(e,t,s,i,n),this.model=e,this.view=t,this.language=s,this.metadata=i,this.router=n,this.configurationService=l,this.session=o,this.toast=a,this.modal=r,this.backend=d,this.helper=c,this.showUploadModal=!1,this.theFile="",this.theProgress=0}humanFileSize(e){let t=1024,s=e;if(Math.abs(e)<t)return s+" B";let i=["kB","MB","GB","TB","PB","EB","ZB","YB"],n=-1;do{s/=t,++n}while(Math.abs(s)>=t&&n<i.length-1);return s.toFixed(1)+" "+i[n]}uploadFile(){let e=this.fileupload.element.nativeElement.files;this.doupload(e)}doupload(e){this.showUploadModal=!0,this.theFile=e[0].name,this.uploadAttachmentsBase64(e).subscribe((e=>{e.progress?this.theProgress=e.progress.loaded/e.progress.total*100:e.complete&&(this.value=e.filename?e.filename:this.theFile,this.model.setField("file_mime_type",e.filetype))}),(e=>{this.closeUploadPopup()}),(()=>this.closeUploadPopup()))}removeFile(){this.value="",this.model.setField("file_mime_type","")}closeUploadPopup(){this.showUploadModal=!1}uploadAttachmentsBase64(e){if(0===e.length)return;let t=new Sl.B,s=this.configurationService.getSystemParamater("upload_maxsize");for(let i of e)s&&i.size>s?(this.toast.sendToast(this.language.getLabelFormatted("LBL_EXCEEDS_MAX_UPLOADFILESIZE",[i.name,this.humanFileSize(s)]),"error"),t.error(!0)):this.readFile(i).subscribe((e=>{let s=new XMLHttpRequest,n={};s.onreadystatechange=(e=this)=>{if(4==s.readyState)try{let e=JSON.parse(s.response);t.next({complete:!0,filename:e.filename,filetype:e.filetype}),t.complete()}catch(e){n={status:"error",data:"Unknown error occurred: ["+s.responseText+"]"}}},s.upload.addEventListener("progress",(e=>{t.next({progress:{total:e.total,loaded:e.loaded}})}),!1),s.open("POST",this.configurationService.getBackendUrl()+"/module/"+this.model.module+"/"+this.model.id+"/noteattachment",!0),s.setRequestHeader("OAuth-Token",this.session.authData.sessionId),s.setRequestHeader("Content-Type","application/json;charset=UTF-8");let l={file:i.filecontent,filename:i.name,filemimetype:i.type};s.send(JSON.stringify(l))}));return t.asObservable()}readFile(e){let t=new Sl.B,s=new FileReader;return s.file=e,s.onloadend=e=>{let i=s.result.toString();i=i.substring(i.indexOf("base64,")+7);let n=s.file;n.filecontent=i,t.next(n),t.complete()},s.readAsDataURL(e),t.asObservable()}getBarStyle(){return{width:this.theProgress+"%"}}b64toBlob(e,t="",s=512){let i=atob(e),n=[];for(let e=0;e<i.length;e+=s){let t=i.slice(e,e+s),l=new Array(t.length);for(let e=0;e<t.length;e++)l[e]=t.charCodeAt(e);let o=new Uint8Array(l);n.push(o)}return new Blob(n,{type:t})}downloadAttachment(){this.backend.getRequest("module/"+this.model.module+"/"+this.model.id+"/noteattachment").subscribe((e=>{let t=this.b64toBlob(e.file,e.file_mime_type),s=URL.createObjectURL(t),i=document.createElement("a");document.body.appendChild(i),i.href=s,i.download=e.filename,i.type=e.file_mime_type,i.click(),i.remove()}))}previewFile(){if(this.model.getFieldValue("file_mime_type")){let e=this.model.getFieldValue("file_mime_type").split("/");switch(e[0]){case"image":this.modal.openModal("SystemImagePreviewModal").subscribe((e=>{e.instance.imgname=this.value,e.instance.imgtype=this.model.getFieldValue("file_mime_type"),this.backend.getRequest("module/"+this.model.module+"/"+this.model.id+"/noteattachment").subscribe((t=>{e.instance.imgsrc="data:"+this.model.getFieldValue("file_mime_type")+";base64,"+t.file}))}));break;case"text":case"audio":case"video":this.modal.openModal("SystemObjectPreviewModal").subscribe((e=>{e.instance.name=this.value,e.instance.type=this.model.getFieldValue("file_mime_type"),this.backend.getRequest("module/"+this.model.module+"/"+this.model.id+"/noteattachment").subscribe((t=>{e.instance.data=atob(t.file)}))}));break;case"application":if("pdf"===e[1])this.modal.openModal("SystemObjectPreviewModal").subscribe((e=>{e.instance.name=this.value,e.instance.type=this.model.getFieldValue("file_mime_type"),this.backend.getRequest("module/"+this.model.module+"/"+this.model.id+"/noteattachment").subscribe((t=>{e.instance.data=atob(t.file)}))}));else this.downloadAttachment();break;default:this.downloadAttachment()}}else this.downloadAttachment()}preventdefault(e){(1==e.dataTransfer.items.length&&"file"===e.dataTransfer.items[0].kind||e.dataTransfer.files.length>0)&&(e.preventDefault(),e.stopPropagation())}onDrop(e){this.doupload(e)}static#e=this.ɵfac=function(e){return new(e||fieldFile)(d.rXU(R.g),d.rXU(G.U),d.rXU(k.B),d.rXU(c.yu),d.rXU(C.Ix),d.rXU(ie.i),d.rXU(El.d),d.rXU(te.o),d.rXU(w.y),d.rXU(ee.H),d.rXU(S.d))};static#t=this.ɵcmp=d.VBU({type:fieldFile,selectors:[["field-file"]],viewQuery:function(e,t){if(1&e&&d.GBs(Fl,5,d.c1b),2&e){let e;d.mGM(e=d.lsd())&&(t.fileupload=e.first)}},features:[d.Vt3],decls:5,vars:5,consts:[[3,"fieldname","fieldconfig",4,"ngIf"],[3,"fielddisplayclass","editable","fieldconfig","title","fieldid",4,"ngIf"],["class","slds-form-element__control slds-grid slds-grid--align-spread slds-p-vertical--xx-small",3,"ngClass",4,"ngIf"],["role","dialog","class","slds-modal slds-fade-in-open",4,"ngIf"],["class","slds-backdrop slds-backdrop--open",4,"ngIf"],[3,"fieldname","fieldconfig"],[3,"fielddisplayclass","editable","fieldconfig","title","fieldid"],[1,"slds-grid","slds-grid--vertical-align-center"],["divClass","slds-p-right--xx-small","size","x-small",3,"filemimetype","filename",4,"ngIf"],[1,"slds-truncate","slds-grow"],["href","javascript:void(0);",3,"click"],["divClass","slds-p-right--xx-small","size","x-small",3,"filemimetype","filename"],[1,"slds-form-element__control","slds-grid","slds-grid--align-spread","slds-p-vertical--xx-small",3,"ngClass"],["class","slds-pill slds-pill_link slds-size--1-of-1",4,"ngIf"],["class","slds-file-selector slds-file-selector_files",4,"ngIf"],[3,"fieldname"],[1,"slds-pill","slds-pill_link","slds-size--1-of-1"],[1,"slds-pill__icon_container"],["title","Account",1,"slds-icon_container","slds-icon-standard-account"],["divClass","","sprite","doctype","size","x-small",3,"icon"],["href","javascript:void(0);",1,"slds-pill__action"],[1,"slds-pill__label"],["title","Remove",1,"slds-button","slds-button_icon","slds-button_icon","slds-pill__remove",3,"click"],["icon","close"],[1,"slds-file-selector","slds-file-selector_files"],[1,"slds-file-selector__dropzone",3,"system-drop-file"],["type","file",1,"slds-file-selector__input","slds-assistive-text",3,"id","click","change"],["fileupload",""],[1,"slds-file-selector__body"],[1,"slds-file-selector__button","slds-button","slds-button_neutral"],[3,"icon"],["label","LBL_UPLOAD_FILES"],[1,"slds-file-selector__text","slds-medium-show"],["label","LBL_OR"],["label","LBL_DROP_FILES"],["role","dialog",1,"slds-modal","slds-fade-in-open"],[1,"slds-modal__container"],[1,"slds-modal__header","slds-modal__header--empty"],[1,"slds-modal__content","slds-p-around--medium"],[1,"uploadbar"],[1,"uploadprogress",3,"ngStyle"],[1,"slds-backdrop","slds-backdrop--open"]],template:function(e,t){1&e&&d.DNE(0,Ml,1,2,"field-label",0)(1,Bl,6,7,"field-generic-display",1)(2,Xl,4,4,"div",2)(3,Ul,7,2,"div",3)(4,Yl,1,0,"div",4),2&e&&(d.Y8G("ngIf",t.displayLabel),d.R7$(),d.Y8G("ngIf",!t.isEditMode()),d.R7$(),d.Y8G("ngIf",t.isEditable()&&t.isEditMode()),d.R7$(),d.Y8G("ngIf",t.showUploadModal),d.R7$(),d.Y8G("ngIf",t.showUploadModal))},dependencies:[i.YU,i.bT,i.B3,I.t,vs.J,Ll.z,le.W,Dl.H,u.b,j.K,D.A],encapsulation:2})}return fieldFile})();function Vl(e,t){if(1&e&&d.nrm(0,"field-label",3),2&e){const e=d.XpG();d.Y8G("fieldname",e.fieldname)("fieldconfig",e.fieldconfig)}}function Al(e,t){if(1&e&&d.nrm(0,"system-utility-icon",8),2&e){const e=d.XpG(2);d.Y8G("icon",e.fieldconfig.iconname?e.fieldconfig.iconname:"world")}}function Pl(e,t){if(1&e&&(d.j41(0,"div",9),d.EFF(1),d.k0s()),2&e){const e=d.XpG(2);d.R7$(),d.JRh(e.url)}}function zl(e,t){if(1&e){const e=d.RV6();d.j41(0,"field-generic-display",4)(1,"div",5),d.bIt("click",(function(){d.eBV(e);const t=d.XpG();return d.Njj(t.navigateTo())})),d.DNE(2,Al,1,1,"system-utility-icon",6)(3,Pl,2,1,"div",7),d.k0s()()}if(2&e){const e=d.XpG();d.Y8G("fielddisplayclass",e.fielddisplayclass)("editable",e.isEditable())("fieldconfig",e.fieldconfig)("fieldid",e.fieldid),d.R7$(2),d.Y8G("ngIf",e.url),d.R7$(),d.Y8G("ngIf",!e.fieldconfig.icononly)}}function Hl(e,t){if(1&e){const e=d.RV6();d.j41(0,"div",10)(1,"input",11,12),d.mxI("ngModelChange",(function(t){d.eBV(e);const s=d.XpG();return d.DH7(s.value,t)||(s.value=t),d.Njj(t)})),d.k0s(),d.nrm(3,"field-messages",13),d.k0s()}if(2&e){const e=d.XpG();d.Y8G("ngClass",e.getFieldClass()),d.R7$(),d.R50("ngModel",e.value),d.Y8G("ngModelOptions",e.modelOptions),d.R7$(2),d.Y8G("fieldname",e.fieldname)}}let ql=(()=>{class fieldUrl extends r.s{constructor(e,t,s,i,n){super(e,t,s,i,n),this.model=e,this.view=t,this.language=s,this.metadata=i,this.router=n}get url(){return this.fieldconfig.inputurl?this.fieldconfig.inputurl.replace(/https?\:\/\//,""):this.model.getField(this.fieldname)?this.model.getField(this.fieldname).replace(/https?\:\/\//,""):""}navigateTo(){""!=this.url&&window.open("//"+this.url,"_blank")}static#e=this.ɵfac=function(e){return new(e||fieldUrl)(d.rXU(R.g),d.rXU(G.U),d.rXU(k.B),d.rXU(c.yu),d.rXU(C.Ix))};static#t=this.ɵcmp=d.VBU({type:fieldUrl,selectors:[["field-url"]],features:[d.Vt3],decls:3,vars:3,consts:[[3,"fieldname","fieldconfig",4,"ngIf"],[3,"fielddisplayclass","editable","fieldconfig","fieldid",4,"ngIf"],["class","slds-form-element__control slds-grid slds-grid--align-spread",3,"ngClass",4,"ngIf"],[3,"fieldname","fieldconfig"],[3,"fielddisplayclass","editable","fieldconfig","fieldid"],[1,"slds-grid","slds-grid--vertical-align-center","slds-text-link_reset",3,"click"],["class","slds-m-right--xx-small","size","x-small",3,"icon",4,"ngIf"],["class","slds-truncate",4,"ngIf"],["size","x-small",1,"slds-m-right--xx-small",3,"icon"],[1,"slds-truncate"],[1,"slds-form-element__control","slds-grid","slds-grid--align-spread",3,"ngClass"],["type","text",1,"slds-input",3,"ngModel","ngModelOptions","ngModelChange"],["focus",""],[3,"fieldname"]],template:function(e,t){1&e&&d.DNE(0,Vl,1,2,"field-label",0)(1,zl,4,6,"field-generic-display",1)(2,Hl,4,4,"div",2),2&e&&(d.Y8G("ngIf",t.displayLabel),d.R7$(),d.Y8G("ngIf",!t.isEditMode()),d.R7$(),d.Y8G("ngIf",t.isEditable()&&t.isEditMode()))},dependencies:[i.YU,i.bT,n.me,n.BC,n.vS,E.B,u.b,j.K,D.A],encapsulation:2})}return fieldUrl})();function Jl(e,t){if(1&e&&d.nrm(0,"field-label",3),2&e){const e=d.XpG();d.Y8G("fieldname",e.fieldname)("fieldconfig",e.fieldconfig)}}function Wl(e,t){if(1&e){const e=d.RV6();d.j41(0,"system-utility-icon",8),d.bIt("click",(function(t){d.eBV(e);const s=d.XpG(2);return d.Njj(s.sendEmail(t))})),d.k0s()}}function Kl(e,t){if(1&e&&(d.j41(0,"field-generic-display",4)(1,"div",5)(2,"div",6),d.EFF(3),d.k0s(),d.DNE(4,Wl,1,0,"system-utility-icon",7),d.k0s()()),2&e){const e=d.XpG();d.Y8G("fielddisplayclass",e.fielddisplayclass)("fieldconfig",e.fieldconfig)("editable",e.isEditable())("title",e.value),d.R7$(3),d.JRh(e.value),d.R7$(),d.Y8G("ngIf",e.value)}}function Ql(e,t){if(1&e){const e=d.RV6();d.j41(0,"div",9)(1,"input",10),d.mxI("ngModelChange",(function(t){d.eBV(e);const s=d.XpG();return d.DH7(s.value,t)||(s.value=t),d.Njj(t)})),d.k0s(),d.nrm(2,"field-messages",11),d.k0s()}if(2&e){const e=d.XpG();d.Y8G("ngClass",e.fieldClass),d.R7$(),d.R50("ngModel",e.value),d.Y8G("ngModelOptions",e.modelOptions),d.R7$(),d.Y8G("fieldname",e.fieldname)}}let Zl=(()=>{class fieldEmail extends r.s{constructor(e,t,s,i,n){super(e,t,s,i,n),this.model=e,this.view=t,this.language=s,this.metadata=i,this.router=n,this.invalid=!1,this.validation=new RegExp('^(([^<>()\\[\\]\\\\.,;:\\s@"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@"]+)*)|(".+"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$'),this._value="",this.mark=this.model.generateGuid(),this.subscriptions.add(this.model.data$.subscribe((e=>{(!this.value||this.value&&this.value!=e.email1)&&this.setInitialFieldValue()}))),this.model.observeFieldChanges("email_addresses").subscribe((()=>{this.setInitialFieldValue()}))}get value(){return this._value}set value(e){this._value=e,e&&e.length>0&&!this.validation.test(e)?(this.model.setFieldMessage("error",this.language.getLabel("LBL_INPUT_INVALID"),this.fieldname,this.mark),this.invalid=!0):(this.model.setField(this.fieldname,e||""),this.setPrimaryEmail(e),this.model.resetFieldMessages(this.fieldname,"error",this.mark),this.invalid=!1)}get fieldClass(){return this.invalid?[...this.css_classes,"slds-has-error"]:this.css_classes}ngOnInit(){this.setInitialFieldValue(),super.ngOnInit()}setInitialFieldValue(){this._value=this.model.getField(this.fieldname);const e=this.model.getRelatedRecords("email_addresses"),t=e?e.find((e=>1==e.primary_address)):void 0;this._value||(this._value=t?t.email_address:void 0)}setPrimaryEmail(e){let t=e?{id:this.model.generateGuid(),primary_address:"1",email_address:e.toLowerCase(),email_address_caps:e.toUpperCase()}:void 0,s=this.model.getRelatedRecords("email_addresses");if(s&&0!=s.length||!t)if(t){let e=!1;s.forEach((s=>{t.email_address_caps==s.email_address_caps?(e=!0,s.primary_address=1):s.primary_address=0})),e||s.push(t)}else s=s.filter((e=>1!=e.primary_address));else s=[t];this.model.setRelatedRecords("email_addresses",s)}sendEmail(e){e.stopPropagation(),e.preventDefault(),this.value.length>0&&window.open("mailto:"+this.value)}static#e=this.ɵfac=function(e){return new(e||fieldEmail)(d.rXU(R.g),d.rXU(G.U),d.rXU(k.B),d.rXU(c.yu),d.rXU(C.Ix))};static#t=this.ɵcmp=d.VBU({type:fieldEmail,selectors:[["field-email"]],features:[d.Vt3],decls:3,vars:3,consts:[[3,"fieldname","fieldconfig",4,"ngIf"],[3,"fielddisplayclass","fieldconfig","editable","title",4,"ngIf"],["class","slds-form-element__control slds-p-around--xx-small",3,"ngClass",4,"ngIf"],[3,"fieldname","fieldconfig"],[3,"fielddisplayclass","fieldconfig","editable","title"],[1,"slds-grid","slds-grid--vertical-align-center"],[1,"slds-truncate"],["icon","email","size","x-small","class","slds-text-link_reset slds-p-left--x-small",3,"click",4,"ngIf"],["icon","email","size","x-small",1,"slds-text-link_reset","slds-p-left--x-small",3,"click"],[1,"slds-form-element__control","slds-p-around--xx-small",3,"ngClass"],["type","text",1,"slds-input",3,"ngModel","ngModelOptions","ngModelChange"],[3,"fieldname"]],template:function(e,t){1&e&&d.DNE(0,Jl,1,2,"field-label",0)(1,Kl,5,6,"field-generic-display",1)(2,Ql,3,4,"div",2),2&e&&(d.Y8G("ngIf",t.displayLabel),d.R7$(),d.Y8G("ngIf",!t.isEditMode()),d.R7$(),d.Y8G("ngIf",t.isEditable()&&t.isEditMode()))},dependencies:[i.YU,i.bT,n.me,n.BC,n.vS,E.B,u.b,j.K,D.A],encapsulation:2})}return fieldEmail})();var eo=s(48717),to=s(81086);function so(e,t){if(1&e){const e=d.RV6();d.j41(0,"input",6),d.mxI("ngModelChange",(function(t){d.eBV(e);const s=d.XpG();return d.DH7(s.emailAddressText,t)||(s.emailAddressText=t),d.Njj(t)})),d.bIt("blur",(function(){d.eBV(e);const t=d.XpG();return d.Njj(t.validateDomain())})),d.k0s()}if(2&e){const e=d.XpG();d.xc7("text-decoration","1"==e.emailAddress.invalid_email?"line-through":"initial"),d.R50("ngModel",e.emailAddressText),d.Y8G("disabled",1==e.emailAddress.invalid_email)}}function io(e,t){if(1&e){const e=d.RV6();d.j41(0,"input",7),d.mxI("ngModelChange",(function(t){d.eBV(e);const s=d.XpG();return d.DH7(s.emailAddressText,t)||(s.emailAddressText=t),d.Njj(t)})),d.bIt("blur",(function(){d.eBV(e);const t=d.XpG();return d.Njj(t.validateDomain())})),d.k0s()}if(2&e){const e=d.XpG();d.xc7("text-decoration","1"==e.emailAddress.invalid_email?"line-through":"initial"),d.R50("ngModel",e.emailAddressText),d.Y8G("disabled",1==e.emailAddress.invalid_email)}}function no(e,t){1&e&&(d.j41(0,"div",8),d.nrm(1,"system-label",9),d.k0s())}function lo(e,t){1&e&&(d.j41(0,"div",8),d.nrm(1,"system-label",10),d.k0s())}function oo(e,t){1&e&&(d.j41(0,"div",11),d.nrm(1,"system-spinner",12)(2,"system-label",13),d.k0s())}let ao=(()=>{class fieldEmailEmailAddress{constructor(e,t,s){this.zone=e,this.backend=t,this.configurationService=s,this.onBlur=new d.bkB,this.emailAddress={},this.hasFocus=!1,this.invalid_domain=!1,this.checkingDomain=!1,this.validInput=!0}get emailAddressText(){return this.emailAddress.email_address}set emailAddressText(e){this.emailAddress.email_address=e,this.emailAddress.email_address_caps=e.toUpperCase(),this.zone.runOutsideAngular((()=>{window.clearTimeout(this.typingTimeout),this.typingTimeout=window.setTimeout((()=>this.zone.run((()=>{this.validateEmailAddress(),this.onBlur.emit()}))),500)}))}validateEmailAddress(){let e=new RegExp("^(?:[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*|\"(?:[-\b\v\f-!#-[]-]|\\\\[-\t\v\f-])*\")@(?:(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?|\\[(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?|[a-z0-9-]*[a-z0-9]:(?:[-\b\v\f-!-ZS-]|\\\\[-\t\v\f-])+)\\])$");this.configurationService.data.systemparameters.international_email_addresses&&(e=new RegExp("(?:[ -퟿-￿-a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\\.[ -퟿-￿-a-z0-9!#$%&'*+/=?^_`{|}~-]+)*|\"(?:[-\b\v\f-!#-[]-]|\\\\[-\t\v\f-])*\")@(?:(?:[ -퟿-￿-a-z0-9](?:[ -퟿-￿-a-z0-9-]*[ -퟿-￿-a-z0-9])?\\.)+[ -퟿-￿-a-z0-9](?:[ -퟿-￿-a-z0-9-]*[ -퟿-￿-a-z0-9])?|\\[(?:(?:(2(5[0-5]|[0-4][0-9])|1[0-9][0-9]|[1-9]?[0-9]))\\.){3}(?:(2(5[0-5]|[0-4][0-9])|1[0-9][0-9]|[1-9]?[0-9])|[a-z0-9-]*[a-z0-9]:(?:[-\b\v\f-!-ZS-]|\\\\[-\t\v\f-])+)\\])")),this.validInput=e.test(this.emailAddress.email_address)}validateDomain(){this.emailAddress.email_address&&1!=this.emailAddress.invalid_email&&(this.checkingDomain=!0,this.backend.postRequest("module/EmailAddresses/validate",null,{text:this.emailAddress.email_address}).subscribe((e=>{this.checkingDomain=!1,this.emailAddress.invalid_email=e.invalid_email||e.invalid_domain?1:0,this.invalid_domain=e.invalid_domain})))}static#e=this.ɵfac=function(e){return new(e||fieldEmailEmailAddress)(d.rXU(d.SKi),d.rXU(ee.H),d.rXU(ie.i))};static#t=this.ɵcmp=d.VBU({type:fieldEmailEmailAddress,selectors:[["field-email-emailaddress"]],inputs:{emailAddress:"emailAddress",hasFocus:"hasFocus"},outputs:{onBlur:"onBlur"},decls:8,vars:7,consts:[[1,"slds-form-element","slds-truncate","slds-size--1-of-1"],[1,"slds-form-element__control"],["type","text","class","slds-input",3,"ngModel","text-decoration","disabled","ngModelChange","blur",4,"ngIf","ngIfElse"],["hasFocusContainer",""],["class","slds-form-element__help",4,"ngIf"],["class","slds-form-element__help slds-grid",4,"ngIf"],["type","text",1,"slds-input",3,"ngModel","disabled","ngModelChange","blur"],["type","text","system-autofocus","",1,"slds-input",3,"ngModel","disabled","ngModelChange","blur"],[1,"slds-form-element__help"],["label","LBL_INPUT_INVALID"],["label","LBL_DOMAIN_INVALID"],[1,"slds-form-element__help","slds-grid"],["size","14",1,"slds-m-right--xx-small","slds-p-top--xxx-small"],["label","LBL_CHECKING_DOMAIN"]],template:function(e,t){if(1&e&&(d.j41(0,"div",0)(1,"div",1),d.DNE(2,so,1,4,"input",2)(3,io,1,4,"ng-template",null,3,d.C5r),d.k0s(),d.DNE(5,no,2,0,"div",4)(6,lo,2,0,"div",4)(7,oo,3,0,"div",5),d.k0s()),2&e){const e=d.sdS(4);d.AVh("slds-has-error",!t.validInput||t.invalid_domain||t.emailAddress.invalid_email),d.R7$(2),d.Y8G("ngIf",!t.hasFocus)("ngIfElse",e),d.R7$(3),d.Y8G("ngIf",!t.validInput&&!t.invalid_domain),d.R7$(),d.Y8G("ngIf",t.invalid_domain&&!t.checkingDomain),d.R7$(),d.Y8G("ngIf",t.checkingDomain)}},dependencies:[i.bT,n.me,n.BC,n.vS,le.W,eo.P,to.a],encapsulation:2})}return fieldEmailEmailAddress})();var ro=s(11022);function co(e,t){if(1&e&&d.nrm(0,"field-label",3),2&e){const e=d.XpG();d.Y8G("fieldname",e.fieldname)("fieldconfig",e.fieldconfig)}}function uo(e,t){if(1&e&&d.nrm(0,"system-input-radio",14),2&e){const e=d.XpG().$implicit;d.Y8G("ngModel",e.primary_address)("disabled",!0)}}function mo(e,t){if(1&e){const e=d.RV6();d.j41(0,"button",15),d.bIt("click",(function(){d.eBV(e);const t=d.XpG().$implicit,s=d.XpG(2);return d.Njj(s.sendEmail(t))})),d.nrm(1,"system-button-icon",16),d.k0s()}if(2&e){const e=d.XpG().$implicit;d.Y8G("disabled","1"==e.invalid_email)}}function ho(e,t){if(1&e&&(d.j41(0,"div",6),d.DNE(1,uo,1,2,"system-input-radio",7),d.j41(2,"div",8)(3,"div",9),d.DNE(4,mo,2,1,"button",10),d.j41(5,"div",11),d.EFF(6),d.k0s()()(),d.j41(7,"div",12),d.nrm(8,"field-email-emailaddress-status",13),d.k0s()()),2&e){const e=t.$implicit,s=d.XpG(2);d.R7$(),d.Y8G("ngIf",!s.fieldconfig.singleMode),d.R7$(3),d.Y8G("ngIf",!!e.email_address),d.R7$(),d.xc7("text-decoration","1"==e.invalid_email?"line-through":"initial"),d.R7$(),d.JRh(e.email_address),d.R7$(2),d.Y8G("status",e.opt_in_status)}}function go(e,t){if(1&e&&(d.j41(0,"field-generic-display",4),d.DNE(1,ho,9,6,"div",5),d.k0s()),2&e){const e=d.XpG();d.Y8G("fieldconfig",e.fieldconfig)("editable",e.isEditable()),d.R7$(),d.Y8G("ngForOf",e.emailAddresses)("ngForTrackBy",e.trackByFn)}}function po(e,t){if(1&e){const e=d.RV6();d.j41(0,"system-input-radio",27),d.bIt("ngModelChange",(function(){d.eBV(e);const t=d.XpG().$implicit,s=d.XpG(2);return d.Njj(s.setPrimary(t))})),d.k0s()}if(2&e){const e=d.XpG().$implicit,t=d.XpG(2);d.Y8G("name",t.primaryInputRadioName)("ngModel","1"==e.primary_address)("disabled",1==e.invalid_email||!e.email_address)}}function fo(e,t){if(1&e){const e=d.RV6();d.j41(0,"div",21),d.DNE(1,po,1,3,"system-input-radio",22),d.j41(2,"field-email-emailaddress",23),d.bIt("keyup.enter",(function(){d.eBV(e);const t=d.XpG(2);return d.Njj(t.startAdding())}))("onBlur",(function(){d.eBV(e);const t=d.XpG(2);return d.Njj(t.setEmailAddressesField())})),d.k0s(),d.nrm(3,"field-email-emailaddress-status",24),d.j41(4,"button",25),d.bIt("click",(function(){const t=d.eBV(e).$implicit,s=d.XpG(2);return d.Njj(s.handleOnDelete(t))})),d.nrm(5,"system-button-icon",26),d.k0s()()}if(2&e){const e=t.$implicit,s=d.XpG(2);d.AVh("slds-m-bottom--x-small",s.emailAddresses.length>0),d.R7$(),d.Y8G("ngIf",!s.fieldconfig.singleMode),d.R7$(),d.Y8G("emailAddress",e)("hasFocus",s.focusedEmailAddress==e.id),d.R7$(),d.Y8G("status",e.opt_in_status),d.R7$(),d.Y8G("disabled","1"==e.primary_address&&s.emailAddresses.length>1)}}function bo(e,t){if(1&e){const e=d.RV6();d.j41(0,"system-input-radio",30),d.bIt("ngModelChange",(function(){d.eBV(e);const t=d.XpG(3);return d.Njj(t.setPrimary(t.inputNewEmailAddress))})),d.k0s()}if(2&e){const e=d.XpG(3);d.Y8G("name",e.primaryInputRadioName)("ngModel","1"==e.inputNewEmailAddress.primary_address)("disabled",1==e.inputNewEmailAddress.invalid_email||!e.inputNewEmailAddress.email_address)}}function yo(e,t){if(1&e){const e=d.RV6();d.j41(0,"div",21),d.DNE(1,bo,1,3,"system-input-radio",28),d.j41(2,"field-email-emailaddress",29),d.bIt("keyup.enter",(function(){d.eBV(e);const t=d.XpG(2);return d.Njj(t.startAdding())}))("onBlur",(function(){d.eBV(e);const t=d.XpG(2);return d.Njj(t.setEmailAddressesField())})),d.k0s(),d.nrm(3,"field-email-emailaddress-status",24),d.j41(4,"button",25),d.bIt("click",(function(){d.eBV(e);const t=d.XpG(2);return d.Njj(t.cancelAdding())})),d.nrm(5,"system-button-icon",26),d.k0s()()}if(2&e){const e=d.XpG(2);d.R7$(),d.Y8G("ngIf",!e.fieldconfig.singleMode),d.R7$(),d.Y8G("emailAddress",e.inputNewEmailAddress),d.R7$(),d.Y8G("status",e.inputNewEmailAddress.opt_in_status),d.R7$(),d.Y8G("disabled","1"==e.inputNewEmailAddress.primary_address&&e.emailAddresses.length>1)}}function vo(e,t){if(1&e){const e=d.RV6();d.j41(0,"div",31)(1,"button",32),d.bIt("click",(function(){d.eBV(e);const t=d.XpG(2);return d.Njj(t.startAdding())})),d.nrm(2,"system-button-icon",33),d.k0s()()}}function _o(e,t){if(1&e&&(d.j41(0,"div",17),d.DNE(1,fo,6,7,"div",18)(2,yo,6,4,"div",19)(3,vo,3,0,"div",20),d.k0s()),2&e){const e=d.XpG();d.R7$(),d.Y8G("ngForOf",e.emailAddresses)("ngForTrackBy",e.trackByFn),d.R7$(),d.Y8G("ngIf",e.isAdding),d.R7$(),d.Y8G("ngIf",e.canAdd)}}let ko=(()=>{class fieldEmailAddresses extends r.s{constructor(e,t,s,i,n,l){super(e,t,s,i,l),this.model=e,this.view=t,this.language=s,this.metadata=i,this.broadcast=n,this.router=l,this.primaryInputRadioName=_.uniqueId("field-email-address-"),this.canAdd=!1,this.isAdding=!1,this.emailAddresses=[],this.inputNewEmailAddress={primary_address:"",invalid_email:0,email_address:""},this.subscribeToDataChange()}ngOnInit(){this.initialize(),this.subscribeToModeChange()}handleOnDelete(e){this.emailAddresses=this.emailAddresses.filter((t=>t.id!==e.id)),e.isNew?this.model.setRelatedRecords("email_addresses",this.emailAddresses):this.model.removeRelatedRecords("email_addresses",[e.id]),0==this.emailAddresses.length&&this.setEmail1Field(void 0),this.fieldconfig.singleMode&&(this.canAdd=!0,this.startAdding()),this.model.duplicateCheckOnChange([],!0)}sendEmail(e){1!=e.invalid_email&&window.location.assign("mailto:"+e.email_address)}trackByFn(e,t){return t.id}setPrimary(e){1!=e.invalid_email&&(this.emailAddresses.forEach((t=>{t.id==e.id?(t.primary_address="1",this.setEmail1Field(e)):t.primary_address="0"})),this.model.addRelatedRecords("email_addresses",this.emailAddresses))}startAdding(){this.canAdd&&(this.isAdding=!0,this.canAdd=!1)}subscribeToDataChange(){this.subscriptions.add(this.broadcast.message$.subscribe((e=>{"model.loaded"==e.messagetype&&this.initialize()}))),this.subscriptions.add(this.model.observeFieldChanges("email_addresses").subscribe((()=>{const e=this.model.getRelatedRecords("email_addresses");this.emailAddresses=this.fieldconfig.singleMode?e.filter((e=>1==e.primary_address)):e,e.length>0&&this.isAdding&&(this.inputNewEmailAddress.email_address||(this.isAdding=!1))})))}setEmail1Field(e){1!=e?.invalid_email&&e?.email_address!=this.model.getField("email1")&&this.model.setField("email1",e?.email_address)}subscribeToModeChange(){this.subscriptions.add(this.view.mode$.subscribe((()=>this.initialize())))}initialize(){const e=this.model.getRelatedRecords("email_addresses");this.emailAddresses=this.fieldconfig.singleMode?e.filter((e=>1==e.primary_address)):e,this.isEditMode()&&(Array.isArray(this.emailAddresses)&&0!=this.emailAddresses.length?this.setCanAdd():(this.model.initializeField("email_addresses",{beans:{},beans_relations_to_delete:{}}),this.emailAddresses=[],this.canAdd=!0,this.startAdding()))}setEmailAddressesField(){this.pushNewEmailAddress();const e=this.getUniqueCleanEmailAddresses();this.model.addRelatedRecords("email_addresses",e.unique),this.model.rollbackRemovedRelatedRecords("email_addresses",e.unique.map((e=>e.id))),this.model.removeRelatedRecords("email_addresses",e.deletedIds),this.setEmail1Field(e.unique.find((e=>"1"==e.primary_address))),this.model.duplicateCheckOnChange([],!0),this.setCanAdd()}pushNewEmailAddress(){this.isAdding&&1!=this.inputNewEmailAddress.invalid_email&&!this.emailAddresses.some((e=>e.email_address==this.inputNewEmailAddress.email_address))&&(0==this.emailAddresses.length&&(this.inputNewEmailAddress.primary_address=1),this.inputNewEmailAddress.id=this.model.generateGuid(),this.inputNewEmailAddress.isNew=!0,this.focusedEmailAddress=this.inputNewEmailAddress.id,this.emailAddresses.push({...this.inputNewEmailAddress}),this.cancelAdding())}setCanAdd(){this.canAdd=!this.fieldconfig.singleMode||0==this.emailAddresses.length}getUniqueCleanEmailAddresses(){const e=[],t=this.emailAddresses.filter((e=>!e.email_address)).map((e=>e.id));return this.emailAddresses.filter((e=>!!e.email_address)).forEach((s=>{e.some((e=>e.email_address==s.email_address))?s.isNew||t.push(s.id):e.push(s)})),{deletedIds:t,unique:e}}cancelAdding(){this.inputNewEmailAddress={id:"",primary_address:"",invalid_email:0,email_address:""},this.emailAddresses.length>0&&(this.isAdding=!1,this.setCanAdd())}static#e=this.ɵfac=function(e){return new(e||fieldEmailAddresses)(d.rXU(R.g),d.rXU(G.U),d.rXU(k.B),d.rXU(c.yu),d.rXU(se.m),d.rXU(C.Ix))};static#t=this.ɵcmp=d.VBU({type:fieldEmailAddresses,selectors:[["field-email-addresses"]],features:[d.Vt3],decls:3,vars:3,consts:[[3,"fieldname","fieldconfig",4,"ngIf"],["fielddisplayclass","slds-has-divider--bottom slds-p-vertical--xx-small spice-fieldminheight",3,"fieldconfig","editable",4,"ngIf"],["class","slds-m-top--xx-small",4,"ngIf"],[3,"fieldname","fieldconfig"],["fielddisplayclass","slds-has-divider--bottom slds-p-vertical--xx-small spice-fieldminheight",3,"fieldconfig","editable"],["class","slds-grid slds-grid--vertical-align-center slds-size--1-of-1",4,"ngFor","ngForOf","ngForTrackBy"],[1,"slds-grid","slds-grid--vertical-align-center","slds-size--1-of-1"],["value","1","system-title","LBL_PRIMARY","class","slds-truncate",3,"ngModel","disabled",4,"ngIf"],[1,"slds-m-bottom--xx-small","slds-grow"],[1,"slds-grid","slds-grid--vertical-align-center"],["class","slds-button slds-button_icon slds-m-right--xx-small",3,"disabled","click",4,"ngIf"],[1,"slds-truncate"],[1,"slds-p-left--x-small","slds-m-bottom--x-small"],[1,"slds-m-bottom--x-small","slds-p-right--xx-small",3,"status"],["value","1","system-title","LBL_PRIMARY",1,"slds-truncate",3,"ngModel","disabled"],[1,"slds-button","slds-button_icon","slds-m-right--xx-small",3,"disabled","click"],["icon","email","sprite","action"],[1,"slds-m-top--xx-small"],["class","slds-grid",3,"slds-m-bottom--x-small",4,"ngFor","ngForOf","ngForTrackBy"],["class","slds-grid",4,"ngIf"],["class","slds-grid slds-align-content-center slds-p-vertical--x-small",4,"ngIf"],[1,"slds-grid"],["value","1","system-title","LBL_PRIMARY","class","slds-m-top--xx-small","style","max-width: 1.4rem",3,"name","ngModel","disabled","ngModelChange",4,"ngIf"],[1,"slds-grow",3,"emailAddress","hasFocus","keyup.enter","onBlur"],[1,"slds-p-right--xx-small","slds-p-left--x-small","slds-m-top--xx-small",3,"status"],[1,"slds-button","slds-button--icon","slds-m-top--xxx-small",2,"max-height","1.6rem",3,"disabled","click"],["icon","clear"],["value","1","system-title","LBL_PRIMARY",1,"slds-m-top--xx-small",2,"max-width","1.4rem",3,"name","ngModel","disabled","ngModelChange"],["value","1","class","slds-m-top--xx-small","style","max-width: 1.4rem",3,"name","ngModel","disabled","ngModelChange",4,"ngIf"],[1,"slds-grow",3,"emailAddress","keyup.enter","onBlur"],["value","1",1,"slds-m-top--xx-small",2,"max-width","1.4rem",3,"name","ngModel","disabled","ngModelChange"],[1,"slds-grid","slds-align-content-center","slds-p-vertical--x-small"],["system-title","LBL_NEW",1,"slds-button","slds-button--icon-small","slds-button--icon-border",3,"click"],["icon","add"]],template:function(e,t){1&e&&d.DNE(0,co,1,2,"field-label",0)(1,go,2,4,"field-generic-display",1)(2,_o,4,4,"div",2),2&e&&(d.Y8G("ngIf",t.displayLabel),d.R7$(),d.Y8G("ngIf",!t.isEditMode()),d.R7$(),d.Y8G("ngIf",t.isEditMode()))},dependencies:[i.Sq,i.bT,n.BC,n.vS,I.t,Kt.J,Qn.L,u.b,j.K,ao,ro.N],encapsulation:2})}return fieldEmailAddresses})();var Ro=s(60968);function Io(e,t){if(1&e&&d.nrm(0,"field-label",3),2&e){const e=d.XpG();d.Y8G("fieldname",e.fieldname)("fieldconfig",e.fieldconfig)}}function xo(e,t){if(1&e&&(d.j41(0,"li",8)(1,"a",9)(2,"span",10),d.EFF(3),d.k0s()()()),2&e){const e=t.$implicit;d.R7$(3),d.SpI(" ",e.email_address," ")}}function jo(e,t){if(1&e&&(d.j41(0,"field-generic-display",4)(1,"div",5)(2,"ul",6),d.DNE(3,xo,4,1,"li",7),d.k0s()()()),2&e){const e=d.XpG();d.Y8G("fielddisplayclass",e.fielddisplayclass)("fieldconfig",e.fieldconfig)("editable",e.isEditable()),d.R7$(3),d.Y8G("ngForOf",e.displayValue)}}function Go(e,t){if(1&e){const e=d.RV6();d.j41(0,"a",18),d.bIt("click",(function(t){d.eBV(e);const s=d.XpG(2);return d.Njj(s.showField("cc",t))})),d.EFF(1,"Cc"),d.k0s()}}function Co(e,t){if(1&e){const e=d.RV6();d.j41(0,"a",19),d.bIt("click",(function(t){d.eBV(e);const s=d.XpG(2);return d.Njj(s.showField("bcc",t))})),d.EFF(1,"Bcc"),d.k0s()}}function wo(e,t){if(1&e){const e=d.RV6();d.j41(0,"field-email-recipients-input",20),d.bIt("drop$",(function(t){d.eBV(e);const s=d.XpG(2);return d.Njj(s.handleDrop(t))})),d.k0s()}if(2&e){const e=d.XpG(2);d.Y8G("displayValue",e.displayValue)}}function So(e,t){if(1&e){const e=d.RV6();d.j41(0,"field-email-recipients-input",21),d.bIt("drop$",(function(t){d.eBV(e);const s=d.XpG(2);return d.Njj(s.handleDrop(t))})),d.k0s()}if(2&e){const e=d.XpG(2);d.Y8G("displayValue",e.displayValue)}}function Eo(e,t){if(1&e){const e=d.RV6();d.j41(0,"div",11),d.bIt("click",(function(){d.eBV(e);const t=d.XpG();return d.Njj(t.setFocused())})),d.j41(1,"field-email-recipients-input",12),d.bIt("drop$",(function(t){d.eBV(e);const s=d.XpG();return d.Njj(s.handleDrop(t))})),d.DNE(2,Go,2,0,"a",13)(3,Co,2,0,"a",14),d.k0s(),d.DNE(4,wo,1,1,"field-email-recipients-input",15)(5,So,1,1,"field-email-recipients-input",16),d.nrm(6,"field-messages",17),d.k0s()}if(2&e){const e=d.XpG();d.Y8G("ngClass",e.css_classes),d.R7$(),d.Y8G("addressType",e.fieldconfig.addresstype||"from")("displayValue",e.displayValue),d.R7$(),d.Y8G("ngIf","to"==e.fieldconfig.addresstype&&!e.showCCField),d.R7$(),d.Y8G("ngIf","to"==e.fieldconfig.addresstype&&!e.showBCCField),d.R7$(),d.Y8G("ngIf",e.focused&&e.showCCField),d.R7$(),d.Y8G("ngIf",e.focused&&e.showBCCField),d.R7$(),d.Y8G("fieldname",e.fieldname)}}let Lo=(()=>{class fieldEmailRecipients extends r.s{constructor(e,t,s,i,n,l,o,a,r,d,c,u){super(e,s,i,n,l),this.model=e,this.navigation=t,this.view=s,this.language=i,this.metadata=n,this.router=l,this.modal=o,this.injector=a,this.backend=r,this.renderer=d,this.elementRef=c,this.zone=u,this.displayValue=[],this.showCCField=!1,this.showBCCField=!1,this.focused=!1,this.dragging=!1}ngOnInit(){super.ngOnInit(),this.subscribeToDataChanges(),this.setInitialFieldValue()}get value(){return this.model.getField("recipient_addresses")}set value(e){this.model.setField("recipient_addresses",e)}subscribeToDataChanges(){this.subscriptions.add(this.model.observeFieldChanges("recipient_addresses").subscribe((()=>{Array.isArray(this.model.getField("recipient_addresses"))&&this.setDisplayValue()})))}setInitialFieldValue(){if(this.value||(this.value=[]),this.setDisplayValue(),this.model.getField("recipient_addresses").length>0||!0===this.fieldconfig.nodetermination||"to"!=this.fieldconfig.addresstype||!this.model.getField("parent_type")||!this.model.getField("parent_id"))return;let e=this.navigation.getRegisteredModel(this.model.getField("parent_id"),this.model.getField("parent_type"));if(e){let t=e.getField("email1");t&&(this.value.push({parent_type:e.module,parent_id:e.id,email_address:t,id:this.model.generateGuid(),address_type:"to"}),this.setDisplayValue())}else this.backend.getRequest(`module/${this.model.getField("parent_type")}/${this.model.getField("parent_id")}`).subscribe((e=>{e.email1&&(this.value.push({parent_type:this.model.getField("parent_type"),parent_id:this.model.getField("parent_id"),email_address:e.email1,id:this.model.generateGuid(),address_type:"to"}),this.setDisplayValue())}))}setDisplayValue(){const e=this.model.getField("recipient_addresses");e.forEach((e=>{"cc"==e.address_type&&(this.showCCField=!0),"bcc"==e.address_type&&(this.showBCCField=!0)}));const t=this.fieldconfig.addresstype??"from";this.displayValue=e.filter((e=>"to"==t?e.address_type in{to:!0,cc:!0,bcc:!0}:e.address_type==t))}showField(e,t){t.stopPropagation(),"cc"==e?this.showCCField=!0:this.showBCCField=!0,this.setFocused()}addDocumentClickListener(){this.clickListener=this.renderer.listen("document","click",(e=>{this.elementRef.nativeElement.contains(e.target)||(this.setDisplayValue(),this.focused=!1,this.clickListener(),this.clickListener=void 0)}))}setFocused(){this.setDisplayValue(),this.focused=!0,this.clickListener||this.addDocumentClickListener()}handleDrop(e){const t=this.value.findIndex((t=>t==e.item.data));e.previousContainer.data!=e.container.data&&this.value.some((t=>{if(e.item.data==t)return t.address_type=e.container.data,!0})),(0,l.HD)(this.value,t,e.currentIndex),this.setDisplayValue()}static#e=this.ɵfac=function(e){return new(e||fieldEmailRecipients)(d.rXU(R.g),d.rXU(Ro.L),d.rXU(G.U),d.rXU(k.B),d.rXU(c.yu),d.rXU(C.Ix),d.rXU(w.y),d.rXU(d.zZn),d.rXU(ee.H),d.rXU(d.sFG),d.rXU(d.aKT),d.rXU(d.SKi))};static#t=this.ɵcmp=d.VBU({type:fieldEmailRecipients,selectors:[["field-email-recipients"]],features:[d.Vt3],decls:3,vars:3,consts:[[3,"fieldname","fieldconfig",4,"ngIf"],[3,"fielddisplayclass","fieldconfig","editable",4,"ngIf"],["cdkDropListGroup","","class","slds-form-element__control",3,"ngClass","click",4,"ngIf"],[3,"fieldname","fieldconfig"],[3,"fielddisplayclass","fieldconfig","editable"],[1,"slds-pill_container",2,"border","none"],["role","listbox",1,"slds-listbox","slds-listbox_horizontal","slds-size--1-of-1"],["class","slds-pill slds-pill_link",4,"ngFor","ngForOf"],[1,"slds-pill","slds-pill_link"],["href","javascript:void(0);",1,"slds-pill__action","slds-p-horizontal--xx-small"],[1,"slds-pill__label"],["cdkDropListGroup","",1,"slds-form-element__control",3,"ngClass","click"],[3,"addressType","displayValue","drop$"],["href","javascript:void(0)","class","slds-m-right--xx-small slds-input__icon slds-input__icon_right",3,"click",4,"ngIf"],["href","javascript:void(0)","class","slds-input__icon_right slds-input__icon",3,"click",4,"ngIf"],["addressType","cc",3,"displayValue","drop$",4,"ngIf"],["addressType","bcc",3,"displayValue","drop$",4,"ngIf"],[3,"fieldname"],["href","javascript:void(0)",1,"slds-m-right--xx-small","slds-input__icon","slds-input__icon_right",3,"click"],["href","javascript:void(0)",1,"slds-input__icon_right","slds-input__icon",3,"click"],["addressType","cc",3,"displayValue","drop$"],["addressType","bcc",3,"displayValue","drop$"]],template:function(e,t){1&e&&d.DNE(0,Io,1,2,"field-label",0)(1,jo,4,4,"field-generic-display",1)(2,Eo,7,8,"div",2),2&e&&(d.Y8G("ngIf",t.displayLabel),d.R7$(),d.Y8G("ngIf",!t.isEditMode()),d.R7$(),d.Y8G("ngIf",t.isEditable()&&t.isEditMode()))},encapsulation:2})}return fieldEmailRecipients})();const Do=["addAddressInput"];function Fo(e,t){if(1&e&&d.nrm(0,"field-label",3),2&e){const e=d.XpG();d.Y8G("fieldname",e.fieldname)("fieldconfig",e.fieldconfig)}}function Mo(e,t){if(1&e&&(d.j41(0,"field-generic-display",4)(1,"span"),d.EFF(2),d.k0s()()),2&e){const e=d.XpG();d.Y8G("fielddisplayclass",e.fielddisplayclass)("fieldconfig",e.fieldconfig)("editable",e.isEditable()),d.R7$(2),d.JRh(e.firstAddress)}}function To(e,t){if(1&e&&(d.j41(0,"span",25),d.nrm(1,"system-icon",26),d.k0s()),2&e){const e=d.XpG().$implicit;d.R7$(),d.Y8G("module",e.parent_type)}}function Bo(e,t){if(1&e){const e=d.RV6();d.j41(0,"li",13)(1,"span",20),d.DNE(2,To,2,1,"span",21),d.j41(3,"span",22),d.EFF(4),d.k0s(),d.j41(5,"span",23)(6,"system-button-icon",24),d.bIt("click",(function(t){const s=d.eBV(e).$implicit,i=d.XpG(2);return d.Njj(i.removeAddress(t,s.id))})),d.k0s()()()()}if(2&e){const e=t.$implicit;d.R7$(2),d.Y8G("ngIf",e.parent_id),d.R7$(2),d.JRh(e.email_address),d.R7$(2),d.Y8G("icon","close")}}function $o(e,t){if(1&e){const e=d.RV6();d.j41(0,"input",27),d.mxI("ngModelChange",(function(t){d.eBV(e);const s=d.XpG(2);return d.DH7(s.addAddress,t)||(s.addAddress=t),d.Njj(t)})),d.bIt("blur",(function(){d.eBV(e);const t=d.XpG(2);return d.Njj(t.onBlur())}))("keyup",(function(t){d.eBV(e);const s=d.XpG(2);return d.Njj(s.onKeyUp(t))})),d.k0s()}if(2&e){const e=d.XpG(2);d.R50("ngModel",e.addAddress),d.Y8G("title",e.language.getLabel("LBL_ADD_EMAILADDRESS"))("placeholder",e.language.getLabel("LBL_ADD_EMAILADDRESS"))}}function Oo(e,t){1&e&&d.nrm(0,"system-spinner",28)}function Xo(e,t){if(1&e){const e=d.RV6();d.j41(0,"li",29),d.bIt("click",(function(){const t=d.eBV(e).$implicit,s=d.XpG(2);return d.Njj(s.selectAddress(t))})),d.j41(1,"div",30),d.nrm(2,"system-icon",31),d.j41(3,"div",32)(4,"span",33),d.EFF(5),d.k0s()()()()}if(2&e){const e=t.$implicit;d.R7$(2),d.Y8G("module",e.module),d.R7$(3),d.Lme("",e.email_address," • ",e.summary_text,"")}}const Uo=e=>({"slds-is-open":e});function Yo(e,t){if(1&e){const e=d.RV6();d.j41(0,"div",5)(1,"div",6)(2,"div",7)(3,"div",8)(4,"div",9)(5,"div",10),d.bIt("click",(function(){d.eBV(e);const t=d.XpG();return d.Njj(t.onClick())})),d.j41(6,"ul",11),d.DNE(7,Bo,7,3,"li",12),d.j41(8,"li",13),d.DNE(9,$o,1,3,"input",14),d.k0s()()()(),d.j41(10,"div",15),d.DNE(11,Oo,1,0,"system-spinner",16),d.j41(12,"ul",17),d.DNE(13,Xo,6,3,"li",18),d.k0s()()()()(),d.nrm(14,"field-messages",19),d.k0s()}if(2&e){const e=d.XpG();d.Y8G("ngClass",e.css_classes),d.R7$(3),d.Y8G("ngClass",d.eq3(7,Uo,e.showSearchResults)),d.R7$(4),d.Y8G("ngForOf",e.addrArray),d.R7$(2),d.Y8G("ngIf",e.isAdding),d.R7$(2),d.Y8G("ngIf",e.searchResultsLoading),d.R7$(2),d.Y8G("ngForOf",e.searchResults),d.R7$(),d.Y8G("fieldname",e.fieldname)}}let No=(()=>{class fieldEmailRecipientsShort extends r.s{constructor(e,t,s,i,n,l,o,a){super(e,t,s,i,n),this.model=e,this.view=t,this.language=s,this.metadata=i,this.router=n,this.backend=l,this.renderer=o,this.elementRef=a,this.isAdding=!1,this.addAddress="",this.searchTimeOut=void 0,this.showSearchResults=!1,this.searchResults=[],this.searchResultsLoading=!1}get firstAddress(){return this.addrArray&&this.addrArray.length>0?this.addrArray[0].email_address:""}get addresstype(){return this.fieldconfig.addresstype?this.fieldconfig.addresstype:"from"}get addrArray(){let e=[];if(this.model.getField("recipient_addresses"))for(let t of this.model.getField("recipient_addresses"))t.address_type==this.addresstype&&"1"!=t.deleted&&e.push(t);return e}onClick(){this.isAdding=!0}onBlur(){""==this.addAddress&&(this.isAdding=!1)}removeAddress(e,t){e.preventDefault(),e.stopPropagation();for(let e of this.model.getField("recipient_addresses"))if(e.id==t)return void(e.deleted="1")}onKeyUp(e){switch(e.key){case"ArrowDown":case"ArrowUp":break;case"Enter":this.searchTimeOut&&window.clearTimeout(this.searchTimeOut),this.validateEmail(this.addAddress)?(this.model.getField("recipient_addresses")||this.model.setField("recipient_addresses",[]),this.model.getField("recipient_addresses").push({id:this.model.generateGuid(),address_type:this.addresstype,email_address:this.addAddress}),this.addAddress="",this.closeSearchDialog()):this.doSearch();break;default:this.searchTimeOut&&window.clearTimeout(this.searchTimeOut),this.searchTimeOut=window.setTimeout((()=>this.doSearch()),1e3)}}closeSearchDialog(){this.clickListener(),this.searchResults=[],this.showSearchResults=!1}doSearch(){""!==this.addAddress&&(this.searchResults=[],this.showSearchResults=!0,this.searchResultsLoading=!0,this.clickListener=this.renderer.listen("document","click",(e=>this.handleClick(e))),this.backend.getRequest("module/EmailAddresses/"+this.addAddress).subscribe((e=>{e.length>0?this.searchResults=e:this.closeSearchDialog(),this.searchResultsLoading=!1})))}handleClick(e){this.elementRef.nativeElement.contains(e.target)||(this.closeSearchDialog(),this.addAddress="",this.isAdding=!1)}selectAddress(e){this.model.getField("recipient_addresses")||this.model.setField("recipient_addresses",[]),this.model.getField("recipient_addresses").push({id:this.model.generateGuid(),address_type:this.addresstype,email_address:e.email_address,email_address_id:e.email_address_id,parent_type:e.module,parent_id:e.id}),this.addAddress="",this.isAdding=!1,this.closeSearchDialog()}validateEmail(e){return/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(String(e).toLowerCase())}static#e=this.ɵfac=function(e){return new(e||fieldEmailRecipientsShort)(d.rXU(R.g),d.rXU(G.U),d.rXU(k.B),d.rXU(c.yu),d.rXU(C.Ix),d.rXU(ee.H),d.rXU(d.sFG),d.rXU(d.aKT))};static#t=this.ɵcmp=d.VBU({type:fieldEmailRecipientsShort,selectors:[["ng-component"]],viewQuery:function(e,t){if(1&e&&d.GBs(Do,7,d.c1b),2&e){let e;d.mGM(e=d.lsd())&&(t.addAddressInput=e.first)}},features:[d.Vt3],decls:3,vars:3,consts:[[3,"fieldname","fieldconfig",4,"ngIf"],[3,"fielddisplayclass","fieldconfig","editable",4,"ngIf"],["class","slds-form-element__control slds-grid slds-grid--align-spread slds-p-around--xx-small",3,"ngClass",4,"ngIf"],[3,"fieldname","fieldconfig"],[3,"fielddisplayclass","fieldconfig","editable"],[1,"slds-form-element__control","slds-grid","slds-grid--align-spread","slds-p-around--xx-small",3,"ngClass"],[1,"slds-form-element__control","slds-size--1-of-1"],[1,"slds-combobox_container"],["role","combobox",1,"slds-combobox","slds-dropdown-trigger","slds-dropdown-trigger_click",3,"ngClass"],["role","none",1,"slds-combobox__form-element","slds-input-has-icon","slds-input-has-icon_right"],[1,"slds-pill_container",3,"click"],["role","listbox",1,"slds-listbox","slds-listbox_horizontal"],["class","slds-listbox-item","role","presentation",4,"ngFor","ngForOf"],["role","presentation",1,"slds-listbox-item"],["system-autofocus","","type","text","style","min-width: 12rem;","class","slds-p-horizontal--x-small",3,"ngModel","title","placeholder","ngModelChange","blur","keyup",4,"ngIf"],["role","listbox",1,"slds-dropdown","slds-dropdown_fluid"],["size","12",4,"ngIf"],["role","presentation",1,"slds-listbox","slds-listbox_vertical"],["role","presentation","class","slds-listbox__item",3,"click",4,"ngFor","ngForOf"],[3,"fieldname"],["role","option",1,"slds-pill"],["class","slds-icon_container",4,"ngIf"],[1,"slds-pill__label"],[1,"slds-icon_container","slds-pill__remove"],[3,"icon","click"],[1,"slds-icon_container"],["size","x-small","divClass","slds-p-right--x-small",3,"module"],["system-autofocus","","type","text",1,"slds-p-horizontal--x-small",2,"min-width","12rem",3,"ngModel","title","placeholder","ngModelChange","blur","keyup"],["size","12"],["role","presentation",1,"slds-listbox__item",3,"click"],[1,"slds-listbox__option","slds-grid","slds-grid--vertical-align-center","slds-p-around--x-small"],["size","x-small",1,"slds-p-right--x-small",3,"module"],[1,"slds-media__body"],[1,"slds-listbox__option-text","slds-listbox__option-text_entity"]],template:function(e,t){1&e&&d.DNE(0,Fo,1,2,"field-label",0)(1,Mo,3,4,"field-generic-display",1)(2,Yo,15,9,"div",2),2&e&&(d.Y8G("ngIf",t.displayLabel),d.R7$(),d.Y8G("ngIf",!t.isEditMode()),d.R7$(),d.Y8G("ngIf",t.isEditable()&&t.isEditMode()))},dependencies:[i.YU,i.Sq,i.bT,n.me,n.BC,n.vS,I.t,vs.J,eo.P,to.a,u.b,j.K,D.A],styles:["\n\n\n\n\n\n\n\n\n\n\ninput[_ngcontent-%COMP%], input[_ngcontent-%COMP%]:focus{border:none;outline:none}"]})}return fieldEmailRecipientsShort})();function Vo(e,t){if(1&e&&d.nrm(0,"field-label",3),2&e){const e=d.XpG();d.Y8G("fieldname",e.fieldname)("fieldconfig",e.fieldconfig)}}function Ao(e,t){if(1&e&&(d.j41(0,"field-generic-display",4),d.EFF(1),d.k0s()),2&e){const e=d.XpG();d.Y8G("fielddisplayclass",e.fielddisplayclass)("fieldconfig",e.fieldconfig)("editable",e.isEditable()),d.R7$(),d.SpI(" ",e.getCurrencySymbol(),"\n")}}function Po(e,t){if(1&e&&(d.j41(0,"option",10),d.EFF(1),d.k0s()),2&e){const e=t.$implicit;d.Y8G("value",e.id),d.R7$(),d.Lme("",e.iso," (",e.symbol,") ")}}function zo(e,t){if(1&e){const e=d.RV6();d.j41(0,"div",5)(1,"div",6)(2,"select",7),d.mxI("ngModelChange",(function(t){d.eBV(e);const s=d.XpG();return d.DH7(s.value,t)||(s.value=t),d.Njj(t)})),d.DNE(3,Po,2,3,"option",8),d.k0s()(),d.nrm(4,"field-messages",9),d.k0s()}if(2&e){const e=d.XpG();d.Y8G("ngClass",e.getFieldClass()),d.R7$(2),d.R50("ngModel",e.value),d.R7$(),d.Y8G("ngForOf",e.currencies),d.R7$(),d.Y8G("fieldname",e.fieldname)}}let Ho=(()=>{class fieldCurrencies extends r.s{constructor(e,t,s,i,n,l){super(e,t,s,i,n),this.model=e,this.view=t,this.language=s,this.metadata=i,this.router=n,this.currency=l,this.currencies=[],this.currencies=this.currency.getCurrencies()}getCurrencySymbol(){let e=-99;return this.model.getField(this.fieldname)&&(e=this.model.getField(this.fieldname)),this.currency.getCurrencySmbol(e)}static#e=this.ɵfac=function(e){return new(e||fieldCurrencies)(d.rXU(R.g),d.rXU(G.U),d.rXU(k.B),d.rXU(c.yu),d.rXU(C.Ix),d.rXU(Le.G))};static#t=this.ɵcmp=d.VBU({type:fieldCurrencies,selectors:[["field-currencies"]],features:[d.Vt3],decls:3,vars:3,consts:[[3,"fieldname","fieldconfig",4,"ngIf"],[3,"fielddisplayclass","fieldconfig","editable",4,"ngIf"],["class","slds-form-element__control",3,"ngClass",4,"ngIf"],[3,"fieldname","fieldconfig"],[3,"fielddisplayclass","fieldconfig","editable"],[1,"slds-form-element__control",3,"ngClass"],[1,"slds-select_container","slds-m-vertical--xx-small"],[1,"slds-select",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[3,"fieldname"],[3,"value"]],template:function(e,t){1&e&&d.DNE(0,Vo,1,2,"field-label",0)(1,Ao,2,4,"field-generic-display",1)(2,zo,5,4,"div",2),2&e&&(d.Y8G("ngIf",t.displayLabel),d.R7$(),d.Y8G("ngIf",!t.isEditMode()),d.R7$(),d.Y8G("ngIf",t.isEditable()&&t.isEditMode()))},dependencies:[i.YU,i.Sq,i.bT,n.xH,n.y7,n.wz,n.BC,n.vS,u.b,j.K,D.A],encapsulation:2})}return fieldCurrencies})();var qo=s(70639);function Jo(e,t){if(1&e&&d.nrm(0,"field-label",3),2&e){const e=d.XpG();d.Y8G("fieldname",e.fieldname)("fieldconfig",e.fieldconfig)}}function Wo(e,t){if(1&e&&(d.j41(0,"field-generic-display",4)(1,"div",5),d.EFF(2),d.k0s()()),2&e){const e=d.XpG();d.Y8G("fielddisplayclass",e.fielddisplayclass)("fieldconfig",e.fieldconfig)("editable",e.isEditable()),d.R7$(),d.Y8G("id",e.value),d.R7$(),d.JRh(e.companyName)}}function Ko(e,t){if(1&e){const e=d.RV6();d.j41(0,"div",6)(1,"system-input-companycodes",7),d.mxI("ngModelChange",(function(t){d.eBV(e);const s=d.XpG();return d.DH7(s.value,t)||(s.value=t),d.Njj(t)})),d.k0s(),d.nrm(2,"field-messages",8),d.k0s()}if(2&e){const e=d.XpG();d.Y8G("ngClass",e.getFieldClass()),d.R7$(),d.R50("ngModel",e.value),d.R7$(),d.Y8G("fieldname",e.fieldname)}}let Qo=(()=>{class fieldCompanies extends r.s{constructor(e,t,s,i,n,l,o,a){super(e,t,s,i,n),this.model=e,this.view=t,this.language=s,this.metadata=i,this.router=n,this.backend=l,this.configuration=o,this.userpreferences=a}ngOnInit(){this.setDefault()}setDefault(){if(this.view.isEditMode()&&!this.model.getField(this.fieldname))if(this.userpreferences.companyCodeId)this.value=this.userpreferences.companyCodeId;else{let e=this.configuration.getData("companycodes");e&&e.length>0&&(e.sort(((e,t)=>e.name>t.name?-1:1)),this.value=e[0].id)}}get companyName(){let e="";return this.configuration.getData("companycodes").some((t=>{if(t.id==this.model.getField(this.fieldname))return e=t.name,!0})),e}static#e=this.ɵfac=function(e){return new(e||fieldCompanies)(d.rXU(R.g),d.rXU(G.U),d.rXU(k.B),d.rXU(c.yu),d.rXU(C.Ix),d.rXU(ee.H),d.rXU(ie.i),d.rXU(xe.S))};static#t=this.ɵcmp=d.VBU({type:fieldCompanies,selectors:[["field-companies"]],features:[d.Vt3],decls:3,vars:3,consts:[[3,"fieldname","fieldconfig",4,"ngIf"],[3,"fielddisplayclass","fieldconfig","editable",4,"ngIf"],["class","slds-p-vertical--xx-small",3,"ngClass",4,"ngIf"],[3,"fieldname","fieldconfig"],[3,"fielddisplayclass","fieldconfig","editable"],["system-model-popover","","module","CompanyCodes",3,"id"],[1,"slds-p-vertical--xx-small",3,"ngClass"],[3,"ngModel","ngModelChange"],[3,"fieldname"]],template:function(e,t){1&e&&d.DNE(0,Jo,1,2,"field-label",0)(1,Wo,3,5,"field-generic-display",1)(2,Ko,3,3,"div",2),2&e&&(d.Y8G("ngIf",t.displayLabel),d.R7$(),d.Y8G("ngIf",!t.isEditMode()),d.R7$(),d.Y8G("ngIf",t.isEditable()&&t.isEditMode()))},dependencies:[i.YU,i.bT,n.BC,n.vS,qo.T,ks.j,u.b,j.K,D.A],encapsulation:2})}return fieldCompanies})();var Zo=s(39207);function ea(e,t){if(1&e&&d.nrm(0,"field-label",3),2&e){const e=d.XpG();d.Y8G("fieldname",e.fieldname)("fieldconfig",e.fieldconfig)}}function ta(e,t){if(1&e&&d.nrm(0,"system-tooltip",8),2&e){const e=d.XpG(2);d.Y8G("tooltiptext",e.vatInfo)}}function sa(e,t){if(1&e&&(d.j41(0,"field-generic-display",4)(1,"div",5)(2,"div",6)(3,"span"),d.EFF(4),d.k0s()(),d.DNE(5,ta,1,1,"system-tooltip",7),d.k0s()()),2&e){const e=d.XpG();d.Y8G("fielddisplayclass",e.fielddisplayclass)("editable",e.isEditable())("fieldconfig",e.fieldconfig)("fieldid",e.fieldid),d.R7$(4),d.JRh(e.value),d.R7$(),d.Y8G("ngIf",e.isvalid)}}function ia(e,t){if(1&e&&d.nrm(0,"system-tooltip",8),2&e){const e=d.XpG(3);d.Y8G("tooltiptext",e.vatInfo)}}function na(e,t){if(1&e){const e=d.RV6();d.qex(0),d.j41(1,"input",14,15),d.mxI("ngModelChange",(function(t){d.eBV(e);const s=d.XpG(2);return d.DH7(s.value,t)||(s.value=t),d.Njj(t)})),d.k0s(),d.j41(3,"div",16),d.DNE(4,ia,1,1,"system-tooltip",7),d.j41(5,"button",17),d.bIt("click",(function(){d.eBV(e);const t=d.XpG(2);return d.Njj(t.validate())})),d.nrm(6,"system-label",18),d.k0s()(),d.bVm()}if(2&e){const e=d.XpG(2);d.R7$(),d.R50("ngModel",e.value),d.R7$(3),d.Y8G("ngIf",e.isvalid),d.R7$(),d.Y8G("disabled",!e.cancheck)}}function la(e,t){if(1&e&&d.nrm(0,"input",19,15),2&e){const e=d.XpG(2);d.FS9("value",e.language.getLabel("LBL_VALIDATING"))}}function oa(e,t){if(1&e&&(d.j41(0,"div",9)(1,"div",10),d.DNE(2,na,7,3,"ng-container",11)(3,la,2,1,"ng-template",null,12,d.C5r),d.k0s(),d.nrm(5,"field-messages",13),d.k0s()),2&e){const e=d.sdS(4),t=d.XpG();d.Y8G("ngClass",t.getFieldClass()),d.R7$(2),d.Y8G("ngIf",!t.isvalidating)("ngIfElse",e),d.R7$(3),d.Y8G("fieldname",t.fieldname)}}let aa=(()=>{class fieldVat extends r.s{constructor(e,t,s,i,n,l,o){super(e,t,s,i,n),this.model=e,this.view=t,this.language=s,this.metadata=i,this.router=n,this.backend=l,this.toast=o,this.isvalidating=!1}get vatDetailsField(){return this.fieldconfig.vatdetails?this.fieldconfig.vatdetails:"vat_details"}validate(){this.isvalidating=!0,this.backend.getRequest(`common/VIES/${this.value}`).subscribe((e=>{"success"==e.status?(!0!==e.data.valid&&this.toast.sendToast(this.language.getLabel("ERR_INVALID_VAT"),"error"),this.model.setField("vat_details",JSON.stringify(e.data))):this.toast.sendToast(this.language.getLabel("ERR_CHECK_VAT"),"error"),this.isvalidating=!1}),(()=>{this.isvalidating=!1,this.toast.sendToast(this.language.getLabel("ERR_CHECK_VAT"),"error")}))}get cancheck(){return this.value&&this.value.length>3}get isvalid(){if(!this.model.getField(this.vatDetailsField))return!1;return JSON.parse(this.model.getField(this.vatDetailsField)).valid}get vatInfo(){let e=JSON.parse(this.model.getField(this.vatDetailsField));return e.name+"\n"+e.address}static#e=this.ɵfac=function(e){return new(e||fieldVat)(d.rXU(R.g),d.rXU(G.U),d.rXU(k.B),d.rXU(c.yu),d.rXU(C.Ix),d.rXU(ee.H),d.rXU(te.o))};static#t=this.ɵcmp=d.VBU({type:fieldVat,selectors:[["field-vat"]],features:[d.Vt3],decls:3,vars:3,consts:[[3,"fieldname","fieldconfig",4,"ngIf"],["field-generic-display-notruncate","",3,"fielddisplayclass","editable","fieldconfig","fieldid",4,"ngIf"],["class","slds-form-element__control slds-grid slds-grid--align-spread",3,"ngClass",4,"ngIf"],[3,"fieldname","fieldconfig"],["field-generic-display-notruncate","",3,"fielddisplayclass","editable","fieldconfig","fieldid"],[1,"slds-size--1-of-1","slds-grid","slds-grid--vertical-align-center","slds-grid--align-spread"],[1,"slds-grow","slds-truncate"],["class","slds-m-left--x-small",3,"tooltiptext",4,"ngIf"],[1,"slds-m-left--x-small",3,"tooltiptext"],[1,"slds-form-element__control","slds-grid","slds-grid--align-spread",3,"ngClass"],[1,"slds-grid","slds-size--1-of-1"],[4,"ngIf","ngIfElse"],["validating",""],[3,"fieldname"],["type","text",1,"slds-input",3,"ngModel","ngModelChange"],["focus",""],[1,"slds-col_bump-left","slds-grid","slds-grid--vertical-align-center"],[1,"slds-button","slds-button--neutral","slds-m-left--x-small",3,"disabled","click"],["label","LBL_CHECK"],["type","text","disabled","",1,"slds-input","slds-size--1-of-1",3,"value"]],template:function(e,t){1&e&&d.DNE(0,ea,1,2,"field-label",0)(1,sa,6,6,"field-generic-display",1)(2,oa,6,4,"div",2),2&e&&(d.Y8G("ngIf",t.displayLabel),d.R7$(),d.Y8G("ngIf",!t.isEditMode()),d.R7$(),d.Y8G("ngIf",t.isEditable()&&t.isEditMode()))},dependencies:[i.YU,i.bT,n.me,n.BC,n.vS,le.W,Zo.F,u.b,j.K,D.A],encapsulation:2})}return fieldVat})();var ra=s(82802);let da=(()=>{class fieldBarcodeRenderer{constructor(e,t){this.metadata=e,this.libloader=t,this.code="",this.fieldId="",this.libloader.loadLib("js-barcode").subscribe((e=>{JsBarcode("#"+this.fieldId,this.code,{width:1,height:15,displayValue:!1})}))}ngOnChanges(){if(!this.metadata.isLibLoaded("js-barcode"))return!1;document.getElementById(this.fieldId)&&JsBarcode("#"+this.fieldId,this.code,{width:1,height:15,displayValue:!1})}static#e=this.ɵfac=function(e){return new(e||fieldBarcodeRenderer)(d.rXU(c.yu),d.rXU(ra.b))};static#t=this.ɵcmp=d.VBU({type:fieldBarcodeRenderer,selectors:[["field-barcode-renderer"]],inputs:{code:"code",fieldId:"fieldId"},features:[d.OA$],decls:1,vars:1,consts:[[3,"id"]],template:function(e,t){1&e&&(d.qSk(),d.nrm(0,"svg",0)),2&e&&d.Y8G("id",t.fieldId)},encapsulation:2})}return fieldBarcodeRenderer})();function ca(e,t){if(1&e&&d.nrm(0,"field-label",8),2&e){const e=d.XpG();d.Y8G("fieldname",e.fieldname)("fieldconfig",e.fieldconfig)}}function ua(e,t){if(1&e){const e=d.RV6();d.j41(0,"input",9),d.mxI("ngModelChange",(function(t){d.eBV(e);const s=d.XpG();return d.DH7(s.value,t)||(s.value=t),d.Njj(t)})),d.k0s()}if(2&e){const e=d.XpG();d.R50("ngModel",e.value)}}function ma(e,t){if(1&e&&(d.j41(0,"div",10),d.EFF(1),d.k0s()),2&e){const e=d.XpG();d.R7$(),d.JRh(e.value)}}let ha=(()=>{class fieldBarcode extends r.s{constructor(e,t,s,i,n){super(e,t,s,i,n),this.model=e,this.view=t,this.language=s,this.metadata=i,this.router=n}isEditMode(){return this.view.isEditMode()&&this.isEditable()}isEditable(){return this.view.isEditable&&!this.fieldconfig.readonly}static#e=this.ɵfac=function(e){return new(e||fieldBarcode)(d.rXU(R.g),d.rXU(G.U),d.rXU(k.B),d.rXU(c.yu),d.rXU(C.Ix))};static#t=this.ɵcmp=d.VBU({type:fieldBarcode,selectors:[["field-barcode"]],features:[d.Vt3],decls:8,vars:5,consts:[[3,"fieldname","fieldconfig",4,"ngIf"],[1,"slds-form-element__control","slds-p-top--xx-small"],[1,"slds-grid","slds-grid--align-spread","slds-grid_vertical-align-center"],[1,"slds-size--1-of-2"],["class","slds-input","type","text",3,"ngModel","ngModelChange",4,"ngIf"],["class","slds-truncate",4,"ngIf"],[1,"slds-size--1-of-2","slds-text-align--right"],[3,"code","fieldId"],[3,"fieldname","fieldconfig"],["type","text",1,"slds-input",3,"ngModel","ngModelChange"],[1,"slds-truncate"]],template:function(e,t){1&e&&(d.DNE(0,ca,1,2,"field-label",0),d.j41(1,"div",1)(2,"div",2)(3,"div",3),d.DNE(4,ua,1,1,"input",4)(5,ma,2,1,"div",5),d.k0s(),d.j41(6,"div",6),d.nrm(7,"field-barcode-renderer",7),d.k0s()()()),2&e&&(d.Y8G("ngIf",t.displayLabel),d.R7$(4),d.Y8G("ngIf",t.isEditMode()),d.R7$(),d.Y8G("ngIf",!t.isEditMode()),d.R7$(2),d.Y8G("code",t.value)("fieldId","id_"+t.fieldid))},dependencies:[i.bT,n.me,n.BC,n.vS,u.b,da],encapsulation:2})}return fieldBarcode})();function ga(e,t){if(1&e&&d.nrm(0,"field-label",3),2&e){const e=d.XpG();d.Y8G("fieldname",e.fieldname)("fieldconfig",e.fieldconfig)}}function pa(e,t){1&e&&d.nrm(0,"system-stencil")}function fa(e,t){if(1&e&&d.nrm(0,"system-utility-icon",13),2&e){const e=d.XpG(4);d.Y8G("icon",e.ratingIcon)("size","x-small")}}function ba(e,t){if(1&e&&(d.j41(0,"span"),d.EFF(1),d.k0s()),2&e){const e=d.XpG(4);d.R7$(),d.SpI(" (",e.value,")")}}function ya(e,t){if(1&e&&(d.j41(0,"div",10),d.DNE(1,fa,1,2,"system-utility-icon",11)(2,ba,2,1,"span",12),d.k0s()),2&e){const e=d.XpG(3);d.R7$(),d.Y8G("ngIf",e.value),d.R7$(),d.Y8G("ngIf",e.value)}}function va(e,t){if(1&e&&(d.j41(0,"span"),d.EFF(1),d.k0s()),2&e){const e=d.XpG(4);d.R7$(),d.SpI(" (",e.value,")")}}function _a(e,t){if(1&e){const e=d.RV6();d.j41(0,"div",10)(1,"a",14),d.bIt("click",(function(){d.eBV(e);const t=d.XpG(3);return d.Njj(t.goRecord())})),d.nrm(2,"system-utility-icon",13),d.DNE(3,va,2,1,"span",12),d.k0s()()}if(2&e){const e=d.XpG(3);d.R7$(2),d.Y8G("icon",e.ratingIcon)("size","x-small"),d.R7$(),d.Y8G("ngIf",e.value)}}function ka(e,t){if(1&e){const e=d.RV6();d.j41(0,"button",15),d.bIt("click",(function(){d.eBV(e);const t=d.XpG(3);return d.Njj(t.setEditMode())})),d.nrm(1,"system-button-icon",16),d.k0s()}2&e&&(d.R7$(),d.Y8G("icon","edit"))}function Ra(e,t){if(1&e&&(d.j41(0,"div",7),d.DNE(1,ya,3,2,"div",8)(2,_a,4,3,"div",8)(3,ka,2,1,"button",9),d.k0s()),2&e){const e=d.XpG(2);d.R7$(),d.Y8G("ngIf",!e.displayLink()),d.R7$(),d.Y8G("ngIf",e.displayLink()),d.R7$(),d.Y8G("ngIf",e.isEditable())}}function Ia(e,t){if(1&e&&(d.j41(0,"div",4),d.DNE(1,pa,1,0,"system-stencil",5)(2,Ra,4,3,"ng-template",null,6,d.C5r),d.k0s()),2&e){const e=d.sdS(3),t=d.XpG();d.Y8G("ngClass",t.fielddisplayclass),d.R7$(),d.Y8G("ngIf",t.model.isLoading)("ngIfElse",e)}}function xa(e,t){if(1&e){const e=d.RV6();d.j41(0,"div",22)(1,"div",23),d.bIt("click",(function(){const t=d.eBV(e).$implicit,s=d.XpG(2);return d.Njj(s.setRatingValue(t))})),d.nrm(2,"input",24),d.j41(3,"label",25),d.nrm(4,"span",26),d.k0s()()()}if(2&e){const e=t.$implicit,s=d.XpG(2);d.R7$(2),d.Y8G("checked",e==s.value),d.R7$(),d.BMQ("for",s.fieldid+e)}}function ja(e,t){if(1&e&&(d.j41(0,"div",17)(1,"div",18),d.nrm(2,"system-utility-icon",19),d.DNE(3,xa,5,2,"div",20),d.nrm(4,"system-utility-icon",13),d.k0s(),d.nrm(5,"field-messages",21),d.k0s()),2&e){const e=d.XpG();d.Y8G("ngClass",e.css_classes),d.R7$(2),d.Y8G("icon","sentiment_negative")("size","xx-small"),d.R7$(),d.Y8G("ngForOf",e.options),d.R7$(),d.Y8G("icon","smiley_and_people")("size","xx-small"),d.R7$(),d.Y8G("fieldname",e.fieldname)}}let Ga=(()=>{class fieldRating extends r.s{constructor(e,t,s,i,n){super(e,t,s,i,n),this.model=e,this.view=t,this.language=s,this.metadata=i,this.router=n,this.options=["1","2","3","4","5"]}setRatingValue(e){this.value==e?this.value="":this.value=e}get ratingIcon(){return 3==parseInt(this.value,10)?"sentiment_neutral":parseInt(this.value,10)>3?"smiley_and_people":parseInt(this.value,10)<3?"sentiment_negative":void 0}static#e=this.ɵfac=function(e){return new(e||fieldRating)(d.rXU(R.g),d.rXU(G.U),d.rXU(k.B),d.rXU(c.yu),d.rXU(C.Ix))};static#t=this.ɵcmp=d.VBU({type:fieldRating,selectors:[["field-rating"]],features:[d.Vt3],decls:3,vars:3,consts:[[3,"fieldname","fieldconfig",4,"ngIf"],[3,"ngClass",4,"ngIf"],["class","slds-form-element__control slds-grid slds-grid--align-spread slds-p-around--xx-small",3,"ngClass",4,"ngIf"],[3,"fieldname","fieldconfig"],[3,"ngClass"],[4,"ngIf","ngIfElse"],["displaycontent",""],[1,"slds-grid","slds-grid--vertical-align-center","slds-grid--align-spread"],["class","slds-truncate",4,"ngIf"],["style","float: right","class","slds-button slds-button--icon slds-m-left--xx-small",3,"click",4,"ngIf"],[1,"slds-truncate"],[3,"icon","size",4,"ngIf"],[4,"ngIf"],[3,"icon","size"],["href","javascript:void(0);",3,"click"],[1,"slds-button","slds-button--icon","slds-m-left--xx-small",2,"float","right",3,"click"],[3,"icon"],[1,"slds-form-element__control","slds-grid","slds-grid--align-spread","slds-p-around--xx-small",3,"ngClass"],[1,"slds-grid","slds-grid--vertical-align-center"],[1,"slds-p-right--x-small",3,"icon","size"],["class","slds-form-element__control",4,"ngFor","ngForOf"],[3,"fieldname"],[1,"slds-form-element__control"],[1,"slds-radio",3,"click"],["type","radio","id","fieldid + option",3,"checked"],[1,"slds-radio__label"],[1,"slds-radio_faux"]],template:function(e,t){1&e&&d.DNE(0,ga,1,2,"field-label",0)(1,Ia,4,3,"div",1)(2,ja,6,7,"div",2),2&e&&(d.Y8G("ngIf",t.displayLabel),d.R7$(),d.Y8G("ngIf",!t.isEditMode()),d.R7$(),d.Y8G("ngIf",t.isEditable()&&t.isEditMode()))},dependencies:[i.YU,i.Sq,i.bT,I.t,lt.O,E.B,u.b,D.A],encapsulation:2})}return fieldRating})();var Ca=s(85152),wa=s(72495),Sa=s(10725);const Ea=["popover"];function La(e,t){1&e&&d.nrm(0,"system-spinner")}function Da(e,t){if(1&e&&(d.j41(0,"div",14)(1,"dl")(2,"dt"),d.nrm(3,"field-label",15),d.k0s(),d.j41(4,"dd"),d.nrm(5,"field-container",16),d.k0s()()()),2&e){const e=t.$implicit;d.R7$(3),d.Y8G("fieldname",e.field)("fieldconfig",e.fieldconfig),d.R7$(2),d.Y8G("field",e.field)("fieldconfig",e.fieldconfig)("fielddisplayclass","slds-truncate")}}let Fa=(()=>{class fieldModelFooterPopover{constructor(e,t,s){this.model=e,this.view=t,this.metadata=s,this.popovermodule="",this.popoverid="",this.popoverside="right",this.styles=null,this.mouseover=!1,this.hidePopoverTimeout={},this.parentElementRef=null,this.self=null,this.modelIsLoading=!1,this.fields=[]}goDetail(){this.model.goDetail()}onMouseOver(){this.mouseover=!0,this.hidePopoverTimeout&&window.clearTimeout(this.hidePopoverTimeout)}onMouseOut(){this.mouseover=!1,this.self.destroy()}get popoverStyle(){let e=this.parentElementRef.nativeElement.getBoundingClientRect(),t=this.popover.element.nativeElement.getBoundingClientRect();return e.left<t.width?this.popoverside="right":this.popoverside="left",{top:e.top+(e.height-t.height)/2+"px",left:e.left<t.width?e.left+100+"px":e.left-t.width-15+"px"}}ngOnInit(){let e=this.metadata.getComponentConfig("fieldModelFooterPopover",this.popovermodule);e.fieldset?this.fields=this.metadata.getFieldSetFields(e.fieldset):(e=this.metadata.getComponentConfig("ObjectPageHeaderDetails",this.popovermodule),e.fieldset&&(this.fields=this.metadata.getFieldSetFields(e.fieldset))),this.modelIsLoading=!0,this.model.module=this.popovermodule,this.model.id=this.popoverid,this.model.getData().subscribe((()=>{this.modelIsLoading=!1})),this.styles=this.popoverStyle}getNubbinClass(){return"left"==this.popoverside?"slds-nubbin--right":"slds-nubbin--left"}closePopover(e=!1){e?this.self.destroy():this.hidePopoverTimeout=window.setTimeout((()=>this.self.destroy()),500)}static#e=this.ɵfac=function(e){return new(e||fieldModelFooterPopover)(d.rXU(R.g),d.rXU(G.U),d.rXU(c.yu))};static#t=this.ɵcmp=d.VBU({type:fieldModelFooterPopover,selectors:[["field-model-footer-popover"]],viewQuery:function(e,t){if(1&e&&d.GBs(Ea,7,d.c1b),2&e){let e;d.mGM(e=d.lsd())&&(t.popover=e.first)}},features:[d.Jv_([R.g,G.U])],decls:15,vars:6,consts:[["role","dialog",1,"slds-popover","slds-popover_large","slds-popover--panel","slds-is-fixed",3,"ngStyle","ngClass","mouseenter","mouseleave"],[1,"slds-button","slds-button_icon","slds-button_icon","slds-button_icon-small","slds-float_right","slds-popover__close",3,"click"],["icon","close"],[1,"slds-popover__header"],["popover",""],[1,"slds-media","slds-m-bottom--small","slds-media--center"],[1,"slds-media__figure"],[3,"module"],[1,"slds-media__body","slds-truncate"],[4,"ngIf"],[1,"slds-text-heading--medium","slds-hyphenate"],["href","javascript:void(0);",3,"click"],[1,"slds-grid","slds-wrap","slds-grid--pull-padded"],["class","slds-p-horizontal--small slds-size--1-of-2 slds-p-bottom--x-small",4,"ngFor","ngForOf"],[1,"slds-p-horizontal--small","slds-size--1-of-2","slds-p-bottom--x-small"],[3,"fieldname","fieldconfig"],[3,"field","fieldconfig","fielddisplayclass"]],template:function(e,t){1&e&&(d.j41(0,"div",0),d.bIt("mouseenter",(function(){return t.onMouseOver()}))("mouseleave",(function(){return t.onMouseOut()})),d.j41(1,"button",1),d.bIt("click",(function(){return t.closePopover(!0)})),d.nrm(2,"system-button-icon",2),d.k0s(),d.j41(3,"div",3,4)(5,"div",5)(6,"div",6),d.nrm(7,"system-icon",7),d.k0s(),d.j41(8,"div",8),d.DNE(9,La,1,0,"system-spinner",9),d.j41(10,"p",10)(11,"a",11),d.bIt("click",(function(){return t.goDetail()})),d.EFF(12),d.k0s()()()(),d.j41(13,"div",12),d.DNE(14,Da,6,5,"div",13),d.k0s()()()),2&e&&(d.Y8G("ngStyle",t.popoverStyle)("ngClass",t.getNubbinClass()),d.R7$(7),d.Y8G("module",t.popovermodule),d.R7$(2),d.Y8G("ngIf",t.modelIsLoading),d.R7$(3),d.JRh(t.model.data.summary_text),d.R7$(2),d.Y8G("ngForOf",t.fields))},dependencies:[i.YU,i.Sq,i.bT,i.B3,I.t,vs.J,eo.P,u.b,m.y],encapsulation:2})}return fieldModelFooterPopover})();function Ma(e,t){1&e&&d.nrm(0,"system-stencil")}function Ta(e,t){if(1&e){const e=d.RV6();d.j41(0,"button",8),d.bIt("click",(function(){d.eBV(e);const t=d.XpG(3);return d.Njj(t.setEditMode())})),d.nrm(1,"system-button-icon",9),d.k0s()}2&e&&(d.R7$(),d.Y8G("icon","edit"))}function Ba(e,t){if(1&e){const e=d.RV6();d.j41(0,"span")(1,"a",6),d.bIt("click",(function(){d.eBV(e);const t=d.XpG(2);return d.Njj(t.goToDetail())})),d.EFF(2),d.k0s()(),d.DNE(3,Ta,2,1,"button",7)}if(2&e){const e=d.XpG(2);d.R7$(),d.Y8G("module",e.module)("id",e.id),d.R7$(),d.JRh(e.value),d.R7$(),d.Y8G("ngIf",e.isEditable())}}function $a(e,t){if(1&e&&(d.j41(0,"div",3),d.DNE(1,Ma,1,0,"system-stencil",4)(2,Ba,4,4,"ng-template",null,5,d.C5r),d.k0s()),2&e){const e=d.sdS(3),t=d.XpG();d.Y8G("ngClass",t.fielddisplayclass),d.R7$(),d.Y8G("ngIf",t.model.isLoading)("ngIfElse",e)}}function Oa(e,t){if(1&e){const e=d.RV6();d.j41(0,"div",16)(1,"div",17)(2,"span",18)(3,"span",19),d.nrm(4,"system-icon",20),d.k0s(),d.j41(5,"span",21),d.EFF(6),d.k0s(),d.j41(7,"button",22),d.bIt("click",(function(){d.eBV(e);const t=d.XpG(2);return d.Njj(t.clear())})),d.nrm(8,"system-button-icon",9),d.k0s()()()()}if(2&e){const e=d.XpG(2);d.R7$(4),d.Y8G("module",e.module)("size","small"),d.R7$(2),d.JRh(e.item_summary_text),d.R7$(2),d.Y8G("icon","close")}}function Xa(e,t){if(1&e){const e=d.RV6();d.j41(0,"div",23)(1,"div",24),d.nrm(2,"system-utility-icon",25),d.j41(3,"input",26),d.mxI("ngModelChange",(function(t){d.eBV(e);const s=d.XpG(2);return d.DH7(s.search_term,t)||(s.search_term=t),d.Njj(t)})),d.bIt("blur",(function(){d.eBV(e);const t=d.XpG(2);return d.Njj(t.closePopups())}))("focus",(function(){d.eBV(e);const t=d.XpG(2);return d.Njj(t.onFocus())})),d.k0s()()()}if(2&e){const e=d.XpG(2);d.Y8G("ngClass",e.getFieldClass()),d.R7$(2),d.Y8G("icon","search")("addclasses","slds-input__icon"),d.R7$(),d.R50("ngModel",e.search_term),d.Y8G("placeholder","Search "+e.language.getModuleName(e.module))}}function Ua(e,t){if(1&e){const e=d.RV6();d.j41(0,"field-lookup-recent",30),d.bIt("selectedObject",(function(t){d.eBV(e);const s=d.XpG(3);return d.Njj(s.selected_item=t)})),d.k0s()}if(2&e){const e=d.XpG(3);d.Y8G("module",e.module)}}function Ya(e,t){if(1&e){const e=d.RV6();d.j41(0,"field-lookup-search",31),d.mxI("searchtermChange",(function(t){d.eBV(e);const s=d.XpG(3);return d.DH7(s.search_term,t)||(s.search_term=t),d.Njj(t)})),d.bIt("selectedObject",(function(t){d.eBV(e);const s=d.XpG(3);return d.Njj(s.selected_item=t)})),d.k0s()}if(2&e){const e=d.XpG(3);d.Y8G("module",e.module),d.R50("searchterm",e.search_term)}}function Na(e,t){if(1&e&&(d.j41(0,"div",27),d.DNE(1,Ua,1,1,"field-lookup-recent",28)(2,Ya,1,2,"field-lookup-search",29),d.k0s()),2&e){const e=d.XpG(2);d.Y8G("ngStyle",e.getSearchStyle()),d.R7$(),d.Y8G("ngIf",!e.search_term),d.R7$(),d.Y8G("ngIf",e.search_term)}}function Va(e,t){if(1&e&&(d.j41(0,"div",10)(1,"div",11),d.DNE(2,Oa,9,4,"div",12)(3,Xa,4,5,"div",13),d.k0s(),d.DNE(4,Na,3,3,"div",14),d.nrm(5,"field-messages",15),d.k0s()),2&e){const e=d.XpG();d.Y8G("ngClass",e.getFieldClass()),d.R7$(2),d.Y8G("ngIf",e.id),d.R7$(),d.Y8G("ngIf",!e.id),d.R7$(),d.Y8G("ngIf",e.show_search_results),d.R7$(),d.Y8G("fieldname",e.fieldname)}}let Aa=(()=>{class FieldModuleLookupComponent extends r.s{constructor(e,t,s,i,n,l,o,a){super(e,t,i,n,l),this.model=e,this.view=t,this.popup=s,this.language=i,this.metadata=n,this.router=l,this.elementRef=o,this.renderer=a,this.relateIdField="",this.relateNameField="",this.module="",this._selected_item=null,this.show_search_results=!1,this.search_term="",this.select=new d.bkB,this.popup.closePopup$.subscribe((()=>this.closePopups()))}ngOnInit(){let e=this.metadata.getFieldDefs(this.model.module,this.fieldname);this.relateIdField=e.id_name,this.relateNameField=this.fieldname,this.module||(this.module=e.module)}onClick(e){this.elementRef.nativeElement.contains(e.target)||this.closePopups()}closePopups(){this.clickListener(),this.model.getField(this.relateIdField)&&(this.search_term=""),this.show_search_results=!1}onFocus(){this.show_search_results=!0,this.clickListener=this.renderer.listen("document","click",(e=>this.onClick(e)))}set selected_item(e){e?(this._selected_item=e.data,this.relateNameField&&this.model.setField(this.relateNameField,e.text),this.relateIdField&&this.model.setField(this.relateIdField,e.id)):(this._selected_item=null,this.relateIdField&&this.model.setField(this.relateIdField,""),this.relateNameField&&this.model.setField(this.relateNameField,"")),this.select.emit(this.selected_item)}get selected_item(){return this._selected_item}get id(){return this.selected_item&&this.selected_item.id?this.selected_item.id:this.relateIdField?this.model.getField(this.relateIdField):""}get item_summary_text(){return this.selected_item&&this.selected_item.summary_text?this.selected_item.summary_text:this.relateNameField?this.model.getField(this.relateNameField):""}goToDetail(){this.router.navigate(["/module/"+this.module+"/"+this.selected_item.id])}getSearchStyle(){if(this.show_search_results){return{width:this.elementRef.nativeElement.getBoundingClientRect().width+"px",display:"block"}}}clear(){this.search_term="",this.selected_item=null}static#e=this.ɵfac=function(e){return new(e||FieldModuleLookupComponent)(d.rXU(R.g),d.rXU(G.U),d.rXU($s.l),d.rXU(k.B),d.rXU(c.yu),d.rXU(C.Ix),d.rXU(d.aKT),d.rXU(d.sFG))};static#t=this.ɵcmp=d.VBU({type:FieldModuleLookupComponent,selectors:[["field-module-lookup"]],inputs:{module:"module"},outputs:{select:"select"},features:[d.Jv_([$s.l]),d.Vt3],decls:3,vars:2,consts:[[1,"slds-truncate"],[3,"ngClass",4,"ngIf"],["class","slds-form-element__control slds-m-vertical--xx-small",3,"ngClass",4,"ngIf"],[3,"ngClass"],[4,"ngIf","ngIfElse"],["displaycontent",""],["href","javascript:void(0);","system-model-popover","",3,"module","id","click"],["style","float: right","class","slds-button slds-button--icon",3,"click",4,"ngIf"],[1,"slds-button","slds-button--icon",2,"float","right",3,"click"],[3,"icon"],[1,"slds-form-element__control","slds-m-vertical--xx-small",3,"ngClass"],[1,"slds-form-element","slds-lookup"],["class","slds-form-element__control",4,"ngIf"],["class","slds-form-element__control slds-grid slds-box--border",3,"ngClass",4,"ngIf"],["class","slds-lookup__menu",3,"ngStyle",4,"ngIf"],[3,"fieldname"],[1,"slds-form-element__control"],[1,"slds-pill_container"],[1,"slds-pill","slds-size--1-of-1"],[1,"slds-icon_container","slds-icon-standard-account","slds-pill__icon_container"],[3,"module","size"],[1,"slds-pill__label"],[1,"slds-button","slds-button--icon","slds-pill__remove",3,"click"],[1,"slds-form-element__control","slds-grid","slds-box--border",3,"ngClass"],[1,"slds-input-has-icon","slds-input-has-icon--right","slds-grow"],[3,"icon","addclasses"],["type","search","role","combobox",1,"slds-lookup__search-input","slds-input--bare",3,"ngModel","placeholder","ngModelChange","blur","focus"],[1,"slds-lookup__menu",3,"ngStyle"],[3,"module","selectedObject",4,"ngIf"],[3,"module","searchterm","searchtermChange","selectedObject",4,"ngIf"],[3,"module","selectedObject"],[3,"module","searchterm","searchtermChange","selectedObject"]],template:function(e,t){1&e&&(d.j41(0,"div",0),d.DNE(1,$a,4,3,"div",1)(2,Va,6,5,"div",2),d.k0s()),2&e&&(d.R7$(),d.Y8G("ngIf",!t.isEditMode()),d.R7$(),d.Y8G("ngIf",t.isEditable()&&t.isEditMode()))},dependencies:[i.YU,i.bT,i.B3,n.me,n.BC,n.vS,I.t,vs.J,lt.O,E.B,ks.j,Rs._,Is.T,D.A],encapsulation:2})}return FieldModuleLookupComponent})();const Pa=["canvas"];function za(e,t){if(1&e&&d.nrm(0,"field-label",12),2&e){const e=d.XpG();d.Y8G("fieldname",e.fieldname)("fieldconfig",e.fieldconfig)}}function Ha(e,t){if(1&e&&d.nrm(0,"img",17),2&e){const e=d.XpG(2);d.Y8G("src",e.src,d.B4B)}}function qa(e,t){if(1&e){const e=d.RV6();d.j41(0,"button",18),d.bIt("click",(function(){d.eBV(e);const t=d.XpG(2);return d.Njj(t.setEditMode())})),d.nrm(1,"system-button-icon",9),d.k0s()}2&e&&(d.R7$(),d.Y8G("icon","edit"))}const Ja=e=>({width:e});function Wa(e,t){if(1&e&&(d.j41(0,"div")(1,"div",13),d.DNE(2,Ha,1,1,"img",14),d.j41(3,"div",15),d.DNE(4,qa,2,1,"button",16),d.k0s()()()),2&e){const e=d.XpG();d.R7$(),d.Y8G("ngStyle",d.eq3(3,Ja,e.signature_width+"px")),d.R7$(),d.Y8G("ngIf",e.value),d.R7$(2),d.Y8G("ngIf",e.isEditable())}}function Ka(e,t){if(1&e&&(d.j41(0,"div",19),d.EFF(1),d.k0s()),2&e){const e=d.XpG();d.R7$(),d.SpI(" ",e.model.data[e.display_name_field]," ")}}const Qa=e=>({"slds-hide":e});let Za=(()=>{class FieldSignatureComponent extends r.s{constructor(e,t,s,i,n,l){super(e,t,s,i,l),this.model=e,this.view=t,this.language=s,this.metadata=i,this.libloader=n,this.router=l,this.signature_height=200,this.signature_width=400}ngAfterViewInit(){this.config&&(this.config.signature_width>0&&(this.signature_width=this.config.signature_width),this.config.signature_height>0&&(this.signature_height=this.config.signature_height),this.display_name_field=this.config.display_name_field),this.libloader.loadLib("signature_pad").subscribe((e=>{this.pad=new SignaturePad(this.canvas.nativeElement,{backgroundColor:"rgb(255, 255, 255)"}),this.model.isLoading||!this.model.id?this.model.data$.subscribe((e=>{this.pad.fromDataURL(this.src)})):this.pad.fromDataURL(this.src)}))}get config(){return this.fieldconfig}get src(){return this.value?"data:image/jpeg;base64,"+this.value:""}undo(){let e=this.pad.toData();e&&(e.pop(),this.pad.fromData(e),this.convert())}clear(){this.pad.clear(),this.convert()}convert(){let e=this.pad.toDataURL("image/jpeg"),t=e.split("base64,");this.pad.isEmpty()?this.value="":2!=t.length?(console.warn("Failed to parse base64 code from data:",e),this.value=""):(e=t[1],this.value=e)}static#e=this.ɵfac=function(e){return new(e||FieldSignatureComponent)(d.rXU(R.g),d.rXU(G.U),d.rXU(k.B),d.rXU(c.yu),d.rXU(ra.b),d.rXU(C.Ix))};static#t=this.ɵcmp=d.VBU({type:FieldSignatureComponent,selectors:[["field-signature"]],viewQuery:function(e,t){if(1&e&&d.GBs(Pa,7),2&e){let e;d.mGM(e=d.lsd())&&(t.canvas=e.first)}},features:[d.Vt3],decls:13,vars:13,consts:[[3,"fieldname","fieldconfig",4,"ngIf"],[4,"ngIf"],[3,"ngClass"],[3,"ngStyle"],[1,"slds-float_left"],[2,"border","1px solid",3,"width","height","mouseup","touchend"],["canvas",""],[2,"position","relative","bottom","3px","right","3px"],["title","undo",1,"slds-button","slds-button--icon",3,"click"],[3,"icon"],["title","clear",1,"slds-button","slds-button--icon",3,"click"],["class","slds-text-align--center",4,"ngIf"],[3,"fieldname","fieldconfig"],[1,"slds-float_left",3,"ngStyle"],[3,"src",4,"ngIf"],[2,"position","absolute","top","1px","right","1px"],["class","slds-button slds-button--icon",3,"click",4,"ngIf"],[3,"src"],[1,"slds-button","slds-button--icon",3,"click"],[1,"slds-text-align--center"]],template:function(e,t){1&e&&(d.DNE(0,za,1,2,"field-label",0)(1,Wa,5,5,"div",1),d.j41(2,"div",2)(3,"div",3)(4,"div",4)(5,"canvas",5,6),d.bIt("mouseup",(function(){return t.convert()}))("touchend",(function(){return t.convert()})),d.k0s(),d.j41(7,"div",7)(8,"button",8),d.bIt("click",(function(){return t.undo()})),d.nrm(9,"system-button-icon",9),d.k0s(),d.j41(10,"button",10),d.bIt("click",(function(){return t.clear()})),d.nrm(11,"system-button-icon",9),d.k0s()()(),d.DNE(12,Ka,2,1,"div",11),d.k0s()()),2&e&&(d.Y8G("ngIf",t.displayLabel),d.R7$(),d.Y8G("ngIf",!t.isEditMode()),d.R7$(),d.Y8G("ngClass",d.eq3(9,Qa,!t.isEditMode())),d.R7$(),d.Y8G("ngStyle",d.eq3(11,Ja,t.signature_width+"px")),d.R7$(2),d.Y8G("width",t.signature_width)("height",t.signature_height),d.R7$(4),d.Y8G("icon","back"),d.R7$(2),d.Y8G("icon","close"),d.R7$(),d.Y8G("ngIf",t.display_name_field))},dependencies:[i.YU,i.bT,i.B3,I.t,u.b],encapsulation:2})}return FieldSignatureComponent})();var er=s(49969),tr=s(58461);const sr=e=>({"slds-theme--shade":e});function ir(e,t){if(1&e){const e=d.RV6();d.j41(0,"div",7)(1,"div",8),d.bIt("mouseenter",(function(){const t=d.eBV(e).$implicit,s=d.XpG(2);return d.Njj(s.select(0,t))}))("click",(function(){const t=d.eBV(e).$implicit,s=d.XpG(2);return d.Njj(s.choose(0,t))})),d.j41(2,"span",9),d.nrm(3,"system-label",10),d.k0s()()()}if(2&e){const e=t.$implicit,s=d.XpG(2);let i;d.Y8G("ngClass",d.eq3(4,sr,s.isCategorySelected(0,e))),d.R7$(),d.Y8G("title",null!==(i=e.node_description)&&void 0!==i?i:e.node_name),d.R7$(),d.Y8G("ngStyle",s.nodeStyle(e)),d.R7$(),d.Y8G("label",e.node_name)}}function nr(e,t){if(1&e){const e=d.RV6();d.j41(0,"div",7)(1,"div",8),d.bIt("mouseenter",(function(){const t=d.eBV(e).$implicit,s=d.XpG(2);return d.Njj(s.select(1,t))}))("click",(function(){const t=d.eBV(e).$implicit,s=d.XpG(2);return d.Njj(s.choose(1,t))})),d.j41(2,"span",9),d.nrm(3,"system-label",10),d.k0s()()()}if(2&e){const e=t.$implicit,s=d.XpG(2);let i;d.Y8G("ngClass",d.eq3(4,sr,s.isCategorySelected(1,e))),d.R7$(),d.Y8G("title",null!==(i=e.node_description)&&void 0!==i?i:e.node_name),d.R7$(),d.Y8G("ngStyle",s.nodeStyle(e)),d.R7$(),d.Y8G("label",e.node_name)}}function lr(e,t){if(1&e){const e=d.RV6();d.j41(0,"div",7)(1,"div",8),d.bIt("mouseenter",(function(){const t=d.eBV(e).$implicit,s=d.XpG(2);return d.Njj(s.select(2,t))}))("click",(function(){const t=d.eBV(e).$implicit,s=d.XpG(2);return d.Njj(s.choose(2,t))})),d.j41(2,"span",9),d.nrm(3,"system-label",10),d.k0s()()()}if(2&e){const e=t.$implicit,s=d.XpG(2);let i;d.Y8G("ngClass",d.eq3(4,sr,s.isCategorySelected(2,e))),d.R7$(),d.Y8G("title",null!==(i=e.node_description)&&void 0!==i?i:e.node_name),d.R7$(),d.Y8G("ngStyle",s.nodeStyle(e)),d.R7$(),d.Y8G("label",e.node_name)}}function or(e,t){if(1&e){const e=d.RV6();d.j41(0,"div",7)(1,"div",8),d.bIt("mouseenter",(function(){const t=d.eBV(e).$implicit,s=d.XpG(2);return d.Njj(s.select(3,t))}))("click",(function(){const t=d.eBV(e).$implicit,s=d.XpG(2);return d.Njj(s.choose(3,t))})),d.j41(2,"span",9),d.nrm(3,"system-label",10),d.k0s()()()}if(2&e){const e=t.$implicit,s=d.XpG(2);let i;d.Y8G("ngClass",d.eq3(4,sr,s.isCategorySelected(3,e))),d.R7$(),d.Y8G("title",null!==(i=e.node_description)&&void 0!==i?i:e.node_name),d.R7$(),d.Y8G("ngStyle",s.nodeStyle(e)),d.R7$(),d.Y8G("label",e.node_name)}}function ar(e,t){if(1&e&&(d.j41(0,"div",2)(1,"div",3)(2,"div",4),d.DNE(3,ir,4,6,"div",5),d.k0s(),d.j41(4,"div",4),d.DNE(5,nr,4,6,"div",5),d.k0s(),d.j41(6,"div",4),d.DNE(7,lr,4,6,"div",5),d.k0s(),d.j41(8,"div",6),d.DNE(9,or,4,6,"div",5),d.k0s()()()),2&e){const e=d.XpG();d.R7$(),d.Y8G("@treeanimation",e.shifttree)("ngStyle",e.boxStyle),d.R7$(2),d.Y8G("ngForOf",e.levelCategories(0))("ngForTrackBy",e.trackByFn),d.R7$(2),d.Y8G("ngForOf",e.levelCategories(1))("ngForTrackBy",e.trackByFn),d.R7$(2),d.Y8G("ngForOf",e.levelCategories(2))("ngForTrackBy",e.trackByFn),d.R7$(2),d.Y8G("ngForOf",e.levelCategories(3))("ngForTrackBy",e.trackByFn)}}function rr(e,t){if(1&e&&(d.j41(0,"li",17),d.nrm(1,"system-label",10),d.k0s()),2&e){const e=t.$implicit;let s;d.Y8G("title",null!==(s=e.node_description)&&void 0!==s?s:e.node_name),d.R7$(),d.Y8G("label",e.node_name)}}function dr(e,t){if(1&e){const e=d.RV6();d.j41(0,"div",14)(1,"ul",15),d.bIt("click",(function(){const t=d.eBV(e).$implicit,s=d.XpG(2);return d.Njj(s.selectNode(t))})),d.DNE(2,rr,2,2,"li",16),d.k0s()()}if(2&e){const e=t.$implicit;d.R7$(2),d.Y8G("ngForOf",e.levels)}}function cr(e,t){1&e&&(d.j41(0,"div",18)(1,"system-illustration-no-records"),d.nrm(2,"system-label",19),d.k0s()())}function ur(e,t){if(1&e&&(d.j41(0,"div",11),d.DNE(1,dr,3,1,"div",12)(2,cr,3,0,"div",13),d.k0s()),2&e){const e=d.XpG();d.R7$(),d.Y8G("ngForOf",e.getMatchedNodes())("ngForTrackBy",e.trackByCatId),d.R7$(),d.Y8G("ngIf",0==e.getMatchedNodes().length)}}function mr(e,t){if(1&e&&(d.j41(0,"li",17),d.nrm(1,"system-label",10),d.k0s()),2&e){const e=t.$implicit;let s;d.Y8G("title",null!==(s=e.node_description)&&void 0!==s?s:e.node_name),d.R7$(),d.Y8G("label",e.node_name)}}function hr(e,t){if(1&e){const e=d.RV6();d.j41(0,"div",14)(1,"ul",15),d.bIt("click",(function(){const t=d.eBV(e).$implicit,s=d.XpG(2);return d.Njj(s.selectNode(t))})),d.DNE(2,mr,2,2,"li",16),d.k0s()()}if(2&e){const e=t.$implicit;d.R7$(2),d.Y8G("ngForOf",e.levels)}}function gr(e,t){1&e&&(d.j41(0,"div",18)(1,"system-illustration-no-records"),d.nrm(2,"system-label",19),d.k0s()())}function pr(e,t){if(1&e&&(d.j41(0,"div",11),d.DNE(1,hr,3,1,"div",12)(2,gr,3,0,"div",13),d.k0s()),2&e){const e=d.XpG();d.R7$(),d.Y8G("ngForOf",e.getFavoriteNodes())("ngForTrackBy",e.trackByCatId),d.R7$(),d.Y8G("ngIf",0==e.getFavoriteNodes().length)}}let fr=(()=>{class fieldCategoriesTree{constructor(e,t,s,i,n){this.model=e,this.backend=t,this.config=s,this.elementref=i,this.language=n,this.levels=[void 0,void 0,void 0,void 0],this.category=new d.bkB,this.loading=!0,this.categories=[],this.sortby="node_key",this.searchFavorites=!1}get shifttree(){return!!this.levels[1]&&this.has4Levels(this.levels[1])}has4Levels(e){for(let t of this.categories.filter((t=>t.parent_id==e)))if(this.categories.filter((e=>e.parent_id==t.id)).length>0)return!0;return!1}get boxStyle(){let e=this.elementref.nativeElement.getBoundingClientRect();return{height:window.innerHeight-e.top-30+"px"}}nodeStyle(e){return e.selectable?{cursor:"pointer","text-decoration":"underline"}:{cursor:"default"}}hasChildren(e){return this.categories.filter((t=>t.parent_id==e.id)).length>0}levelCategories(e){return 0===e?this.sortCategories(this.categories.filter((e=>!e.parent_id||""==e.parent_id)),this.sortby):this.levels[e-1]?this.sortCategories(this.categories.filter((t=>t.parent_id==this.levels[e-1])),this.sortby):[]}sortCategories(e=[],t="node_key"){return"node_name"==t?this.sortCategoriesByTranslation(e):this.sortCategoriesByKey(e)}sortCategoriesByTranslation(e=[]){return e.sort(((e,t)=>this.language.getLabel(e.node_name).localeCompare(this.language.getLabel(t.node_name))))}sortCategoriesByKey(e=[]){return e.sort(((e,t)=>parseFloat(e.node_key)>parseFloat(t.node_key)?1:-1))}getMatchedNodes(){return this.buildSelectableCategories().filter((e=>this.matchTerms(e.levels.map((e=>this.language.getLabel(e.node_name))).join(),this.searchTerm))).sort(((e,t)=>this.compareFullCategories(e.levels,t.levels)))}matchTerms(e,t){let s=t.split(" ").map((e=>e.trim()));for(let t of s)if(e.toLowerCase().indexOf(t.toLowerCase())<0)return!1;return!0}getFavoriteNodes(){let e=this.buildSelectableCategories(!0);return this.searchTerm?e.filter((e=>this.matchTerms(e.levels.map((e=>e.node_name)).join(),this.searchTerm))):e.sort(((e,t)=>this.compareFullCategories(e.levels,t.levels)))}buildSelectableCategories(e=!1){let t=[];for(let s of this.categories.filter((e=>e.selectable))){let i=this.buildFullCategories(s);(!0!==e||i.filter((e=>e.favorite)).length>0)&&t.push({levels:i,cat:s})}return t}buildFullCategories(e){let t=e,s=[{id:t.id,node_name:t.node_name,favorite:t.favorite,node_key:t.node_key}];for(;t.parent_id&&(t=this.categories.find((e=>e.id==t.parent_id)),t);)s.unshift({id:t.id,node_name:t.node_name,favorite:t.favorite,node_key:t.node_key});return s}compareFullCategories(e,t,s="node_name"){return e.map((e=>e.node_name)).join().localeCompare(t.map((e=>e.node_name)).join())}compareFullCategorylevels(e,t,s,i="node_key"){}compareNodes(e,t,s="node_key"){switch(s){case"node_name":return e.node_name.localeCompare(t.node_name);case"node_key":return e.node_key==t.node_key?0:parseFloat(e.node_key)>parseFloat(t.node_key)?1:-1}}select(e,t){for(this.levels[e]=t.id,e++;e<3;)this.levels[e]=void 0,e++}isCategorySelected(e,t){return this.levels[e]==t.id}choose(e,t){t.selectable&&(this.select(e,t),this.category.emit({levels:[...this.levels],category:t}),this.levels=[void 0,void 0,void 0,void 0])}selectNode(e){let t=[];for(let s of e.levels)t.push(s.id);this.category.emit({levels:[...t],category:e.cat}),this.searchTerm="",this.searchFavorites=!1}trackByFn(e,t){return t.id}trackByCatId(e,t){return t.cat.id}static#e=this.ɵfac=function(e){return new(e||fieldCategoriesTree)(d.rXU(R.g),d.rXU(ee.H),d.rXU(ie.i),d.rXU(d.aKT),d.rXU(k.B))};static#t=this.ɵcmp=d.VBU({type:fieldCategoriesTree,selectors:[["field-categories-tree"]],inputs:{categories:"categories",sortby:"sortby",searchTerm:"searchTerm",searchFavorites:"searchFavorites"},outputs:{category:"category"},decls:3,vars:3,consts:[["style","overflow: hidden",4,"ngIf"],["class","slds-dropdown_length-10",4,"ngIf"],[2,"overflow","hidden"],[1,"slds-grid",3,"ngStyle"],[1,"slds-col","slds-size--1-of-3","slds-border--right","slds-height_full","slds-scrollable--y"],[3,"ngClass",4,"ngFor","ngForOf","ngForTrackBy"],[1,"slds-col","slds-size--1-of-3","slds-height_full","slds-scrollable--y"],[3,"ngClass"],[1,"slds-truncate","slds-p-around--xx-small",3,"title","mouseenter","click"],[3,"ngStyle"],[3,"label"],[1,"slds-dropdown_length-10"],["class","slds-truncate slds-p-around--xx-small","style","cursor: pointer",4,"ngFor","ngForOf","ngForTrackBy"],["class","slds-height_full slds-align--absolute-center slds-p-around--x-large",4,"ngIf"],[1,"slds-truncate","slds-p-around--xx-small",2,"cursor","pointer"],[1,"slds-list_horizontal","slds-has-dividers_left","slds-has-block-links",3,"click"],["class","slds-item",3,"title",4,"ngFor","ngForOf"],[1,"slds-item",3,"title"],[1,"slds-height_full","slds-align--absolute-center","slds-p-around--x-large"],["label","LBL_NO_RECORDS_FOUND"]],template:function(e,t){1&e&&d.DNE(0,ar,10,10,"div",0)(1,ur,3,3,"div",1)(2,pr,3,3,"div",1),2&e&&(d.Y8G("ngIf",!t.searchTerm&&!t.searchFavorites),d.R7$(),d.Y8G("ngIf",t.searchTerm&&!t.searchFavorites),d.R7$(),d.Y8G("ngIf",t.searchFavorites))},dependencies:[i.YU,i.Sq,i.bT,i.B3,tr.b,le.W],encapsulation:2,data:{animation:[(0,er.hZ)("treeanimation",[(0,er.wk)("true",(0,er.iF)({"margin-left":"-34%","margin-right":"34%"})),(0,er.wk)("false",(0,er.iF)({"margin-left":"0px","margin-right":"0px"})),(0,er.kY)("true => false",[(0,er.i0)(".2s")]),(0,er.kY)("false => true",[(0,er.i0)(".2s")])])]}})}return fieldCategoriesTree})();const br=["focusEl"],yr=["categoryTree"];function vr(e,t){if(1&e&&d.nrm(0,"field-label",3),2&e){const e=d.XpG();d.Y8G("fieldname",e.fieldname)("fieldconfig",e.fieldconfig)}}function _r(e,t){if(1&e&&(d.j41(0,"div",7),d.EFF(1),d.k0s()),2&e){const e=d.XpG(2);d.Y8G("title",e.display_value),d.R7$(),d.JRh(e.display_value)}}function kr(e,t){1&e&&d.nrm(0,"system-stencil")}function Rr(e,t){if(1&e&&(d.j41(0,"field-generic-display",4),d.DNE(1,_r,2,2,"div",5)(2,kr,1,0,"ng-template",null,6,d.C5r),d.k0s()),2&e){const e=d.sdS(3),t=d.XpG();d.Y8G("fielddisplayclass",t.fielddisplayclass)("fieldconfig",t.fieldconfig)("editable",t.isEditable()),d.R7$(),d.Y8G("ngIf",t.categories.length>0)("ngIfElse",e)}}function Ir(e,t){if(1&e){const e=d.RV6();d.j41(0,"button",19),d.bIt("click",(function(t){d.eBV(e);const s=d.XpG(3);return d.Njj(s.setFavorites(t))})),d.nrm(1,"system-button-icon",20),d.k0s()}if(2&e){const e=d.XpG(3);d.R7$(),d.Y8G("addclasses",e.searchfavorites?"":"slds-icon-text-light")}}function xr(e,t){if(1&e){const e=d.RV6();d.j41(0,"div",15)(1,"input",16,17),d.bIt("focus",(function(){d.eBV(e);const t=d.XpG(2);return d.Njj(t.openDropDown())}))("click",(function(){d.eBV(e);const t=d.XpG(2);return d.Njj(t.openDropDown())})),d.mxI("ngModelChange",(function(t){d.eBV(e);const s=d.XpG(2);return d.DH7(s.tempsearchterm,t)||(s.tempsearchterm=t),d.Njj(t)})),d.bIt("keyup",(function(t){d.eBV(e);const s=d.XpG(2);return d.Njj(s.search(t))})),d.k0s(),d.DNE(3,Ir,2,1,"button",18),d.k0s()}if(2&e){const e=d.XpG(2);d.R7$(),d.FS9("placeholder",e.language.getLabel("LBL_SEARCH")),d.Y8G("disabled",0==e.categories.length),d.R50("ngModel",e.tempsearchterm),d.R7$(2),d.Y8G("ngIf",e.hasFavorites)}}function jr(e,t){if(1&e){const e=d.RV6();d.j41(0,"div",15)(1,"div",21)(2,"span",22),d.bIt("dblclick",(function(){d.eBV(e);const t=d.XpG(2);return t.clearCategories(),d.Njj(t.focusInputField())})),d.j41(3,"span",23),d.EFF(4),d.k0s(),d.j41(5,"button",24),d.bIt("click",(function(){d.eBV(e);const t=d.XpG(2);return d.Njj(t.clearCategories())})),d.nrm(6,"system-button-icon",25),d.k0s()()()()}if(2&e){const e=d.XpG(2);d.R7$(4),d.JRh(e.display_value),d.R7$(2),d.Y8G("icon","close")}}function Gr(e,t){if(1&e){const e=d.RV6();d.j41(0,"field-categories-tree",26),d.bIt("category",(function(t){d.eBV(e);const s=d.XpG(2);return d.Njj(s.chooseCategories(t))})),d.k0s()}if(2&e){const e=d.XpG(2);d.Y8G("categories",e.categories)("sortby",e.sortby)("searchTerm",e.searchterm)("searchFavorites",e.searchfavorites)}}const Cr=e=>({"slds-is-open":e});function wr(e,t){if(1&e&&(d.j41(0,"div",8)(1,"div",9)(2,"div",10)(3,"div",11),d.DNE(4,xr,4,4,"div",12)(5,jr,7,2,"div",12),d.j41(6,"div",13),d.DNE(7,Gr,1,4,"field-categories-tree",14),d.k0s()()()()()),2&e){const e=d.XpG();d.Y8G("ngClass",e.getFieldClass()),d.R7$(3),d.Y8G("ngClass",d.eq3(5,Cr,e.dropDownOpen)),d.R7$(),d.Y8G("ngIf",!e.display_value),d.R7$(),d.Y8G("ngIf",e.display_value),d.R7$(2),d.Y8G("ngIf",e.categories.length>0)}}let Sr=(()=>{class fieldCategories extends r.s{constructor(e,t,s,i,n,l,o,a,r,d,c){super(e,t,s,i,n),this.model=e,this.view=t,this.language=s,this.metadata=i,this.router=n,this.backend=l,this.config=o,this.elementRef=a,this.renderer=r,this.changeDetectorRef=d,this.broadcast=c,this.searchfavorites=!1,this.dropDownOpen=!1,this.searchTimeOut=void 0,this.categoryFields=[],this.setFieldName=!1}ngOnInit(){super.ngOnInit();let e=this.config.getData("categories"),t=this.metadata.getModuleDefs(this.model.module);if(t.categorytrees){let e=t.categorytrees.find((e=>e.module_field==this.fieldname));e&&(this.treeid=e.syscategorytree_id,e.module_field_c1&&this.categoryFields.push(e.module_field_c1),e.module_field_c2&&this.categoryFields.push(e.module_field_c2),e.module_field_c3&&this.categoryFields.push(e.module_field_c3),e.module_field_c4&&this.categoryFields.push(e.module_field_c4),this.setFieldName=!0)}this.treeid||(this.treeid=this.fieldconfig.treeid,this.fieldconfig.category1&&this.categoryFields.push(this.fieldconfig.category1),this.fieldconfig.category2&&this.categoryFields.push(this.fieldconfig.category2),this.fieldconfig.category3&&this.categoryFields.push(this.fieldconfig.category3),this.fieldconfig.category4&&this.categoryFields.push(this.fieldconfig.category4)),!this.treeid||e&&e[this.treeid]||(e||(e={}),e[this.treeid]=[],this.config.setData("categories",e),this.backend.getRequest(`configuration/spiceui/core/categorytrees/${this.treeid}/categorytreenodes`).subscribe((t=>{e[this.treeid]=t,this.config.setData("categories",e),this.broadcast.broadcastMessage("categories.loaded",this.treeid)}))),this.subscriptions.add(this.broadcast.message$.subscribe((e=>{"categories.loaded"===e.messagetype&&e.messagedata===this.treeid&&this.changeDetectorRef.detectChanges()})))}ngOnDestroy(){super.ngOnDestroy(),this.escKeyListener&&this.escKeyListener(),this.clickListener&&this.clickListener()}get categories(){if(!this.treeid)return[];let e=this.config.getData("categories");return e?e[this.treeid]:[]}get sortby(){return this.fieldconfig.sortby}get hasFavorites(){return this.categories.filter((e=>e.favorite)).length>0}openDropDown(){this.dropDownOpen||(this.dropDownOpen=!0,this.subscribeToESCKeyUp())}subscribeToESCKeyUp(){this.escKeyListener=this.renderer.listen("document","keyup",(e=>{"Escape"==e.key&&(this.dropDownOpen=!1,this.resetTmpSearchTerm())}))}onClick(e){this.elementRef.nativeElement.contains(e.target)||(this.dropDownOpen=!1,this.clickListener())}get display_value(){let e,t=[],s=0;for(;s<this.categoryFields.length;){let i=this.model.getField(this.categoryFields[s]);if(!i)break;let n=this.categories.find((t=>t.node_key==i&&(!(!e&&""!=t.parent_id&&t.parent_id)&&(!e||t.parent_id==e))));if(!n)break;t.push(this.language.getLabel(n.node_name)),e=n.id,s++}let i=0==t.length?void 0:t.join("/");return i!=this.value&&this.model.setField(this.fieldname,i,!0),i}setFavorites(e){e.stopPropagation(),e.preventDefault(),this.searchfavorites=!this.searchfavorites,this.dropDownOpen||(this.dropDownOpen=!0)}chooseCategories(e){let t={},s=0,i=e.levels;for(;s<this.categoryFields.length;)i[s]?t[this.categoryFields[s]]=this.categories.find((e=>e.id==i[s])).node_key:t[this.categoryFields[s]]=void 0,s++;this.fieldconfig.addparams&&e.category?.add_params&&(t[this.fieldconfig.addparams]=e.category.add_params),this.model.setFields(t,!0),t=[],this.setFieldName&&(t[this.fieldname]=this.display_value),this.fieldconfig.setname&&(t.name=this.display_value),Object.getOwnPropertyNames(t).length>0&&this.model.setFields(t),this.dropDownOpen=!1,this.searchterm=void 0,this.searchfavorites=!1,this.escKeyListener&&this.escKeyListener(),this.clickListener&&this.clickListener()}clearCategories(){let e=0,t={};for(;e<this.categoryFields.length;)t[this.categoryFields[e]]="",e++;t[this.fieldname]=void 0,this.model.setFields(t),this.resetTmpSearchTerm()}focusInputField(){setTimeout((()=>{this.renderer.selectRootElement(this.focusElement.nativeElement).focus()}),200)}onPageClick(e){this.elementRef.nativeElement.contains(e)||(this.dropDownOpen=!1)}search(e){this.searchTimeOut&&window.clearTimeout(this.searchTimeOut),this.searchTimeOut=window.setTimeout((()=>{this.searchterm=this.tempsearchterm}),1e3),""!=this.tempsearchterm&&this.openDropDown()}resetTmpSearchTerm(){this.tempsearchterm=""}static#e=this.ɵfac=function(e){return new(e||fieldCategories)(d.rXU(R.g),d.rXU(G.U),d.rXU(k.B),d.rXU(c.yu),d.rXU(C.Ix),d.rXU(ee.H),d.rXU(ie.i),d.rXU(d.aKT),d.rXU(d.sFG),d.rXU(d.gRc),d.rXU(se.m))};static#t=this.ɵcmp=d.VBU({type:fieldCategories,selectors:[["field-categories"]],viewQuery:function(e,t){if(1&e&&(d.GBs(br,5),d.GBs(yr,5)),2&e){let e;d.mGM(e=d.lsd())&&(t.focusElement=e.first),d.mGM(e=d.lsd())&&(t.categoryTree=e.first)}},hostBindings:function(e,t){1&e&&d.bIt("click",(function(e){return t.onPageClick(e.target)}),!1,d.EBC)},features:[d.Vt3],decls:3,vars:3,consts:[[3,"fieldname","fieldconfig",4,"ngIf"],[3,"fielddisplayclass","fieldconfig","editable",4,"ngIf"],["class","slds-form-element__control slds-m-vertical--xx-small",3,"ngClass",4,"ngIf"],[3,"fieldname","fieldconfig"],[3,"fielddisplayclass","fieldconfig","editable"],[3,"title",4,"ngIf","ngIfElse"],["nocategories",""],[3,"title"],[1,"slds-form-element__control","slds-m-vertical--xx-small",3,"ngClass"],[1,"slds-form-element__control"],[1,"slds-combobox_container"],[1,"slds-combobox","slds-dropdown-trigger","slds-dropdown-trigger_click",3,"ngClass"],["class","slds-combobox__form-element slds-input-has-icon slds-input-has-icon_right",4,"ngIf"],["role","listbox",1,"slds-dropdown","slds-dropdown_fluid"],[3,"categories","sortby","searchTerm","searchFavorites","category",4,"ngIf"],[1,"slds-combobox__form-element","slds-input-has-icon","slds-input-has-icon_right"],[1,"slds-input","slds-combobox__input",3,"disabled","placeholder","ngModel","focus","click","ngModelChange","keyup"],["focusEl",""],["class","slds-button slds-button--icon slds-input__icon slds-input__icon_right",3,"click",4,"ngIf"],[1,"slds-button","slds-button--icon","slds-input__icon","slds-input__icon_right",3,"click"],["icon","favorite",3,"addclasses"],[1,"slds-pill_container"],[1,"slds-pill","slds-size--1-of-1",3,"dblclick"],[1,"slds-pill__label"],[1,"slds-button","slds-button--icon","slds-pill__remove",3,"click"],[3,"icon"],[3,"categories","sortby","searchTerm","searchFavorites","category"]],template:function(e,t){1&e&&d.DNE(0,vr,1,2,"field-label",0)(1,Rr,4,5,"field-generic-display",1)(2,wr,8,7,"div",2),2&e&&(d.Y8G("ngIf",t.displayLabel),d.R7$(),d.Y8G("ngIf",!t.isEditMode()),d.R7$(),d.Y8G("ngIf",t.isEditable()&&t.isEditMode()))},dependencies:[i.YU,i.bT,n.me,n.BC,n.vS,I.t,lt.O,u.b,j.K,fr],encapsulation:2})}return fieldCategories})();function Er(e,t){if(1&e&&d.nrm(0,"field-label",4),2&e){const e=d.XpG();d.Y8G("fieldname",e.fieldname)("fieldconfig",e.fieldconfig)}}function Lr(e,t){if(1&e&&(d.j41(0,"span",5),d.EFF(1),d.k0s()),2&e){const e=d.XpG();d.Y8G("title",e.display_value),d.R7$(),d.JRh(e.display_value)}}function Dr(e,t){1&e&&d.nrm(0,"system-stencil")}let Fr=(()=>{class fieldCategory extends r.s{constructor(e,t,s,i,n,l,o,a,r){super(e,t,s,i,n),this.model=e,this.view=t,this.language=s,this.metadata=i,this.router=n,this.backend=l,this.config=o,this.elementRef=a,this.renderer=r,this.categoryFields=[]}ngOnInit(){super.ngOnInit();let e=this.config.getData("categories"),t=this.metadata.getModuleDefs(this.model.module);if(t.categorytrees){let e=t.categorytrees.find((e=>e.module_field_c1==this.fieldname||e.module_field_c2==this.fieldname||e.module_field_c3==this.fieldname||e.module_field_c4==this.fieldname));e&&(this.treeid=e.syscategorytree_id)}!this.treeid||e&&e[this.treeid]||(e||(e={}),e[this.treeid]=[],this.config.setData("categories",e),this.backend.getRequest(`configuration/spiceui/core/categorytrees/${this.treeid}/categorytreenodes`).subscribe((t=>{e[this.treeid]=t,this.config.setData("categories",e)})))}get categories(){let e=this.config.getData("categories");return e?e[this.treeid]:[]}get display_value(){let e=this.categories.find((e=>e.node_key==this.value));return e?this.language.getLabel(e.node_name):this.value}static#e=this.ɵfac=function(e){return new(e||fieldCategory)(d.rXU(R.g),d.rXU(G.U),d.rXU(k.B),d.rXU(c.yu),d.rXU(C.Ix),d.rXU(ee.H),d.rXU(ie.i),d.rXU(d.aKT),d.rXU(d.sFG))};static#t=this.ɵcmp=d.VBU({type:fieldCategory,selectors:[["field-category"]],features:[d.Vt3],decls:5,vars:6,consts:[[3,"fieldname","fieldconfig",4,"ngIf"],[3,"fielddisplayclass","fieldconfig","editable"],[3,"title",4,"ngIf","ngIfElse"],["nocategories",""],[3,"fieldname","fieldconfig"],[3,"title"]],template:function(e,t){if(1&e&&(d.DNE(0,Er,1,2,"field-label",0),d.j41(1,"field-generic-display",1),d.DNE(2,Lr,2,2,"span",2)(3,Dr,1,0,"ng-template",null,3,d.C5r),d.k0s()),2&e){const e=d.sdS(4);d.Y8G("ngIf",t.displayLabel),d.R7$(),d.Y8G("fielddisplayclass",t.fielddisplayclass)("fieldconfig",t.fieldconfig)("editable",!1),d.R7$(),d.Y8G("ngIf",t.categories.length>0)("ngIfElse",e)}},dependencies:[i.bT,lt.O,u.b,j.K],encapsulation:2})}return fieldCategory})();function Mr(e,t){1&e&&(d.j41(0,"div",3),d.nrm(1,"system-spinner"),d.k0s())}function Tr(e,t){if(1&e&&(d.j41(0,"span",11),d.nrm(1,"system-label",12),d.k0s()),2&e){const e=d.XpG().$implicit;d.R7$(),d.Y8G("label",e.name)}}function Br(e,t){if(1&e){const e=d.RV6();d.j41(0,"span",13),d.bIt("click",(function(){d.eBV(e);const t=d.XpG().$implicit,s=d.XpG(2);return d.Njj(s.choose(t))})),d.nrm(1,"system-label",12),d.k0s()}if(2&e){const e=d.XpG().$implicit;d.R7$(),d.Y8G("label",e.name)}}function $r(e,t){1&e&&d.nrm(0,"system-utility-icon",14),2&e&&d.Y8G("icon","favorite")("size","xx-small")}function Or(e,t){1&e&&d.nrm(0,"system-utility-icon",15),2&e&&d.Y8G("icon","chevronright")("size","xx-small")}const Xr=e=>({"slds-theme--shade":e});function Ur(e,t){if(1&e){const e=d.RV6();d.j41(0,"div",5)(1,"div",6),d.bIt("mouseenter",(function(){const t=d.eBV(e).$implicit,s=d.XpG(2);return d.Njj(s.select(t))})),d.DNE(2,Tr,2,1,"span",7)(3,Br,2,1,"span",8)(4,$r,1,2,"system-utility-icon",9)(5,Or,1,2,"system-utility-icon",10),d.k0s()()}if(2&e){const e=t.$implicit,s=d.XpG(2);d.Y8G("ngClass",d.eq3(5,Xr,s.isCategorySelected(e))),d.R7$(2),d.Y8G("ngIf",0==e.selectable&&e.categories),d.R7$(),d.Y8G("ngIf",1==e.selectable||!e.categories),d.R7$(),d.Y8G("ngIf",1==e.favorite),d.R7$(),d.Y8G("ngIf",e.categories)}}function Yr(e,t){if(1&e&&(d.j41(0,"div"),d.DNE(1,Ur,6,7,"div",4),d.k0s()),2&e){const e=t.$implicit,s=d.XpG();d.ZvI("slds-col slds-size--1-of-",s.maxlevels,""),d.R7$(),d.Y8G("ngForOf",e)}}let Nr=(()=>{class fieldServiceCategoryTree{constructor(e,t,s,i){this.model=e,this.backend=t,this.config=s,this.language=i,this.category_tree=[],this.maxlevels=4,this.levels=[],this.selected_categorys=[],this.choose_emitter=new d.bkB,this.loading=!0,this.resetLevels(),this.config.getData("service_category_tree")?(this.category_tree=this.config.getData("service_category_tree"),this.levels[0]=this.category_tree,this.loading=!1):this.backend.getRequest("configuration/spiceui/core/servicecategories/tree").subscribe((e=>{this.config.setData("service_category_tree",e),this.category_tree=e,this.levels[0]=this.category_tree,this.loading=!1}))}resetLevels(e=0){for(let t=e;t<this.maxlevels;t++)this.levels[t]=[];this.selected_categorys.splice(e,this.maxlevels-e)}select(e){this.selected_categorys[e.level]=e,e.categories?(this.levels[e.level+1]=e.categories,this.resetLevels(e.level+2)):this.resetLevels(e.level+1)}choose(e){this.selected_categorys[e.level]=e,this.choose_emitter.emit(this.selected_categorys)}isCategorySelected(e){for(let t of this.selected_categorys)if(t.id==e.id)return!0;return!1}static#e=this.ɵfac=function(e){return new(e||fieldServiceCategoryTree)(d.rXU(R.g),d.rXU(ee.H),d.rXU(ie.i),d.rXU(k.B))};static#t=this.ɵcmp=d.VBU({type:fieldServiceCategoryTree,selectors:[["field-service-category-tree"]],inputs:{maxlevels:"maxlevels"},outputs:{choose_emitter:"choose"},decls:3,vars:2,consts:[["role","listbox",1,"slds-listbox","slds-listbox_vertical","slds-dropdown_fluid","slds-grid"],["class","slds-p-around--small slds-align--absolute-center",4,"ngIf"],[3,"class",4,"ngFor","ngForOf"],[1,"slds-p-around--small","slds-align--absolute-center"],[3,"ngClass",4,"ngFor","ngForOf"],[3,"ngClass"],[1,"slds-grid","slds-grid--vertical-align-center","slds-p-around--xx-small",3,"mouseenter"],["class","slds-truncate","style","cursor: default;",4,"ngIf"],["class","slds-truncate","style","cursor: pointer; text-decoration: underline;",3,"click",4,"ngIf"],["class","slds-m-left--small",3,"icon","size",4,"ngIf"],["class","slds-col--bump-left",3,"icon","size",4,"ngIf"],[1,"slds-truncate",2,"cursor","default"],[3,"label"],[1,"slds-truncate",2,"cursor","pointer","text-decoration","underline",3,"click"],[1,"slds-m-left--small",3,"icon","size"],[1,"slds-col--bump-left",3,"icon","size"]],template:function(e,t){1&e&&(d.j41(0,"div",0),d.DNE(1,Mr,2,0,"div",1)(2,Yr,2,4,"div",2),d.k0s()),2&e&&(d.R7$(),d.Y8G("ngIf",t.loading),d.R7$(),d.Y8G("ngForOf",t.levels))},dependencies:[i.YU,i.Sq,i.bT,le.W,eo.P,E.B],encapsulation:2})}return fieldServiceCategoryTree})();function Vr(e,t){if(1&e){const e=d.RV6();d.j41(0,"li",4)(1,"span",5),d.bIt("click",(function(){const t=d.eBV(e).$implicit,s=d.XpG();return d.Njj(s.choose(t))})),d.j41(2,"span",6),d.EFF(3),d.k0s()()()}if(2&e){const e=t.$implicit,s=d.XpG();d.R7$(3),d.JRh(s.language.getLabel(e.display_name))}}function Ar(e,t){1&e&&(d.j41(0,"li",7)(1,"span",8),d.EFF(2,"No Matches found."),d.k0s()())}let Pr=(()=>{class fieldServiceCategorySearch{constructor(e,t,s,i){this.model=e,this.backend=t,this.config=s,this.language=i,this.categories=[],this.selected_categorys=[],this.choose_emitter=new d.bkB,this.config.getData("service_category_tree")?this.flatteningOutCategoryTree(this.config.getData("service_category_tree")):this.backend.getRequest("configuration/spiceui/core/servicecategories/tree").subscribe((e=>{this.config.setData("service_category_tree",e),this.flatteningOutCategoryTree(e)}))}get results(){return this.categories.filter((e=>e.display_name.toLowerCase().includes(this.search.toLowerCase())))}flatteningOutCategoryTree(e){for(let t of e)t.parents=[],this.loopThroughTree(t)}loopThroughTree(e){if(e.display_name="",e.parents.length>0)for(let t of e.parents)e.display_name+=this.language.getLabel(t.name)+"\\";if(e.display_name+=this.language.getLabel(e.name),this.categories.push(e),e.categories)for(let t of e.categories)t.parents=[...e.parents],t.parents.push(e),this.loopThroughTree(t)}choose(e){let t=[...e.parents];t.push(e),this.choose_emitter.emit(t)}static#e=this.ɵfac=function(e){return new(e||fieldServiceCategorySearch)(d.rXU(R.g),d.rXU(ee.H),d.rXU(ie.i),d.rXU(k.B))};static#t=this.ɵcmp=d.VBU({type:fieldServiceCategorySearch,selectors:[["field-service-category-search"]],inputs:{search:"search"},outputs:{choose_emitter:"choose"},decls:4,vars:2,consts:[["role","listbox"],["role","presentation",1,"slds-listbox","slds-dropdown_fluid"],["class","slds-listbox__item","role","presentation",4,"ngFor","ngForOf"],["class","slds-listbox__item",4,"ngIf"],["role","presentation",1,"slds-listbox__item"],["role","option",1,"slds-listbox__option","slds-listbox__option_entity",3,"click"],[1,"slds-p-left--medium","slds-listbox__option-text","slds-listbox__option-text_entity"],[1,"slds-listbox__item"],[1,"slds-p-left--medium"]],template:function(e,t){1&e&&(d.j41(0,"div",0)(1,"ul",1),d.DNE(2,Vr,4,1,"li",2)(3,Ar,3,0,"li",3),d.k0s()()),2&e&&(d.R7$(2),d.Y8G("ngForOf",t.results),d.R7$(),d.Y8G("ngIf",0==t.results.length))},dependencies:[i.Sq,i.bT],encapsulation:2})}return fieldServiceCategorySearch})();function zr(e,t){if(1&e&&d.nrm(0,"field-label",3),2&e){const e=d.XpG();d.Y8G("fieldname",e.fieldname)("fieldconfig",e.fieldconfig)}}function Hr(e,t){if(1&e&&(d.j41(0,"field-generic-display",4),d.EFF(1),d.k0s()),2&e){const e=d.XpG();d.Y8G("fielddisplayclass",e.fielddisplayclass)("fieldconfig",e.fieldconfig)("editable",e.isEditable()),d.R7$(),d.SpI(" ",e.display_value,"\n")}}function qr(e,t){if(1&e){const e=d.RV6();d.j41(0,"div",11)(1,"div",12)(2,"span",13)(3,"span",14),d.EFF(4),d.k0s(),d.j41(5,"button",15),d.bIt("click",(function(){d.eBV(e);const t=d.XpG(2);return d.Njj(t.unchooseCategories())})),d.nrm(6,"system-button-icon",16),d.k0s()()()()}if(2&e){const e=d.XpG(2);d.R7$(4),d.JRh(e.display_value),d.R7$(2),d.Y8G("icon","close")}}function Jr(e,t){if(1&e){const e=d.RV6();d.j41(0,"div",11)(1,"input",17),d.mxI("ngModelChange",(function(t){d.eBV(e);const s=d.XpG(2);return d.DH7(s.search,t)||(s.search=t),d.Njj(t)})),d.bIt("click",(function(t){d.eBV(e);const s=d.XpG(2);return d.Njj(s.checkUserAction(t))}))("keyup",(function(t){d.eBV(e);const s=d.XpG(2);return d.Njj(s.checkUserAction(t))})),d.k0s()()}if(2&e){const e=d.XpG(2);d.R7$(),d.FS9("placeholder",e.language.getLabel("LBL_SEARCH")),d.R50("ngModel",e.search)}}function Wr(e,t){if(1&e){const e=d.RV6();d.j41(0,"div")(1,"field-service-category-tree",18),d.bIt("choose",(function(t){d.eBV(e);const s=d.XpG(2);return d.Njj(s.chooseCategories(t))})),d.k0s()()}if(2&e){const e=d.XpG(2);d.R7$(),d.Y8G("maxlevels",e.maxlevels)}}function Kr(e,t){if(1&e){const e=d.RV6();d.j41(0,"div")(1,"field-service-category-search",19),d.bIt("choose",(function(t){d.eBV(e);const s=d.XpG(2);return d.Njj(s.chooseCategories(t))})),d.k0s()()}if(2&e){const e=d.XpG(2);d.R7$(),d.Y8G("search",e.search)}}function Qr(e,t){if(1&e&&(d.j41(0,"div",5)(1,"div",6)(2,"div",7)(3,"div",8),d.DNE(4,qr,7,2,"div",9)(5,Jr,2,2,"div",9)(6,Wr,2,1,"div",10)(7,Kr,2,1,"div",10),d.k0s()()()()),2&e){const e=d.XpG();d.Y8G("ngClass",e.getFieldClass()),d.R7$(4),d.Y8G("ngIf",e.display_value),d.R7$(),d.Y8G("ngIf",!e.display_value),d.R7$(),d.Y8G("ngIf",e.show_tree),d.R7$(),d.Y8G("ngIf",e.show_search)}}let Zr=(()=>{class fieldServiceCategories extends r.s{constructor(e,t,s,i,n,l,o){super(e,t,s,i,n),this.model=e,this.view=t,this.language=s,this.metadata=i,this.router=n,this.backend=l,this.config=o,this.fields=["sysservicecategory_id1","sysservicecategory_id2","sysservicecategory_id3","sysservicecategory_id4"],this.show_tree=!1,this.show_search=!1,this.categories=[],this.config.getData("service_categories")?this.categories=this.config.getData("service_categories"):(this.config.setData("service_categories",[]),this.backend.getRequest("configuration/spiceui/core/servicecategories").subscribe((e=>{this.categories=e,this.config.setData("service_categories",e)})))}get display_value(){let e="";for(let t of this.fields){if(!this.model.getField(t)||!this.categories[this.model.getField(t)])break;e+=this.language.getLabel(this.categories[this.model.getField(t)].name)+"\\"}return e=e.substring(0,e.length-1),e}get maxlevels(){return this.fieldconfig.maxlevels?this.fieldconfig.maxlevels:3}checkUserAction(e){this.search?(this.show_tree=!1,this.show_search=!0):(this.show_tree=!0,this.show_search=!1)}chooseCategories(e){this.show_search=!1,this.show_tree=!1;for(let t=0;t<this.fields.length;t++)e[t]?this.model.setField(this.fields[t],e[t].id):this.model.setField(this.fields[t],"");this.search=null;for(let t=e.length-1;t>=0;t--){let s=e[t];if(s.servicequeue_id){this.model.setField("servicequeue_id",s.servicequeue_id),this.model.setField("servicequeue_name",s.servicequeue_name);break}}}unchooseCategories(){let e={};for(let t of this.fields)e[t]="";this.model.setFields(e)}static#e=this.ɵfac=function(e){return new(e||fieldServiceCategories)(d.rXU(R.g),d.rXU(G.U),d.rXU(k.B),d.rXU(c.yu),d.rXU(C.Ix),d.rXU(ee.H),d.rXU(ie.i))};static#t=this.ɵcmp=d.VBU({type:fieldServiceCategories,selectors:[["field-service-categories"]],features:[d.Vt3],decls:3,vars:3,consts:[[3,"fieldname","fieldconfig",4,"ngIf"],[3,"fielddisplayclass","fieldconfig","editable",4,"ngIf"],["class","slds-form-element__control slds-m-vertical--xx-small",3,"ngClass",4,"ngIf"],[3,"fieldname","fieldconfig"],[3,"fielddisplayclass","fieldconfig","editable"],[1,"slds-form-element__control","slds-m-vertical--xx-small",3,"ngClass"],[1,"slds-form-element__control"],[1,"slds-combobox_container","slds-has-inline-listbox"],[1,"slds-combobox","slds-dropdown-trigger","slds-dropdown-trigger_click","slds-combobox-lookup"],["class","slds-combobox__form-element slds-input-has-icon slds-input-has-icon_right",4,"ngIf"],[4,"ngIf"],[1,"slds-combobox__form-element","slds-input-has-icon","slds-input-has-icon_right"],[1,"slds-pill_container"],[1,"slds-pill","slds-size--1-of-1"],[1,"slds-pill__label"],[1,"slds-button","slds-button--icon","slds-pill__remove",3,"click"],[3,"icon"],["type","search",1,"slds-input","slds-combobox__input",3,"placeholder","ngModel","ngModelChange","click","keyup"],[3,"maxlevels","choose"],[3,"search","choose"]],template:function(e,t){1&e&&d.DNE(0,zr,1,2,"field-label",0)(1,Hr,2,4,"field-generic-display",1)(2,Qr,8,5,"div",2),2&e&&(d.Y8G("ngIf",t.displayLabel),d.R7$(),d.Y8G("ngIf",!t.isEditMode()),d.R7$(),d.Y8G("ngIf",t.isEditable()&&t.isEditMode()))},dependencies:[i.YU,i.bT,n.me,n.BC,n.vS,I.t,u.b,j.K,Nr,Pr],encapsulation:2})}return fieldServiceCategories})();const ed=["componentcontainer"];function td(e,t){if(1&e&&(d.j41(0,"span",2),d.EFF(1),d.k0s()),2&e){const e=d.XpG();d.R7$(),d.JRh(e.language.getLabel(e.item.action_label))}}let sd=(()=>{class fieldStatusNetworkItem{constructor(e,t,s,i,n){this.language=e,this.metadata=t,this.modal=s,this.model=i,this.injector=n,this.item={},this.initialized=!1}get id(){return this.item.id}get hasComponent(){return this.item.status_component&&""!=this.item.status_component}ngAfterViewInit(){this.hasComponent&&this.metadata.addComponent(this.item.status_component,this.componentcontainer,this.injector).subscribe((e=>{this.actioncomponent=e.instance,e.instance.item=this.item})),this.initialized=!0}ngOnChanges(){this.actioncomponent&&(this.actioncomponent.self.destroy(),this.actioncomponent=null),this.initialized&&this.hasComponent&&this.metadata.addComponent(this.item.status_component,this.componentcontainer,this.injector).subscribe((e=>{this.actioncomponent=e.instance,e.instance.item=this.item}))}setStatus(e){this.item.prompt_label?this.modal.confirm(this.language.getLabel(this.item.prompt_label,"","long"),this.language.getLabel(this.item.prompt_label,"")).subscribe((t=>{t&&this.executeChange(e)})):this.executeChange(e)}executeChange(e){this.actioncomponent&&this.actioncomponent.execute?this.actioncomponent.execute():(this.model.startEdit(!0,!1),this.model.setField(e,this.item.status_to),this.model.validate()?this.model.save():this.model.edit())}static#e=this.ɵfac=function(e){return new(e||fieldStatusNetworkItem)(d.rXU(k.B),d.rXU(c.yu),d.rXU(w.y),d.rXU(R.g),d.rXU(d.zZn))};static#t=this.ɵcmp=d.VBU({type:fieldStatusNetworkItem,selectors:[["field-statusnetwork-item"]],viewQuery:function(e,t){if(1&e&&d.GBs(ed,7,d.c1b),2&e){let e;d.mGM(e=d.lsd())&&(t.componentcontainer=e.first)}},inputs:{item:"item"},features:[d.OA$],decls:3,vars:1,consts:[["class","slds-text-color_default",4,"ngIf"],["componentcontainer",""],[1,"slds-text-color_default"]],template:function(e,t){1&e&&(d.DNE(0,td,2,1,"span",0),d.nrm(1,"div",null,1)),2&e&&d.Y8G("ngIf",!t.hasComponent)},dependencies:[i.bT],encapsulation:2})}return fieldStatusNetworkItem})();var id=s(80256);function nd(e,t){if(1&e&&d.nrm(0,"field-label",5),2&e){const e=d.XpG();d.Y8G("fieldname",e.fieldname)("fieldconfig",e.fieldconfig)}}function ld(e,t){if(1&e){const e=d.RV6();d.j41(0,"li",12),d.bIt("click",(function(){const t=d.eBV(e).$implicit,s=d.XpG(2);return d.Njj(s.propagateclick(t.id))})),d.j41(1,"a",13),d.nrm(2,"field-statusnetwork-item",14),d.k0s()()}if(2&e){const e=t.$implicit;d.R7$(2),d.Y8G("item",e)}}function od(e,t){if(1&e&&(d.j41(0,"div",6)(1,"button",7),d.nrm(2,"system-button-icon",8),d.k0s(),d.j41(3,"div",9)(4,"ul",10),d.DNE(5,ld,3,1,"li",11),d.k0s()()()),2&e){const e=d.XpG();d.R7$(),d.Y8G("disabled",e.model.isEditing),d.R7$(4),d.Y8G("ngForOf",e.networkItems)}}let ad=(()=>{class fieldStatusNetwork extends Ke{constructor(e,t,s,i,n){super(e,t,s,i,n),this.model=e,this.view=t,this.language=s,this.metadata=i,this.router=n,this.options=[],this.statusNetwork=[],this.subscriptions.add(this.language.currentlanguage$.subscribe((e=>{this.getOptions()})))}ngOnInit(){super.ngOnInit(),this.initializeNetwork(),this.getOptions()}getValue(){return this.language.getFieldDisplayOptionValue(this.model.module,this.fieldname,this.value)}initializeNetwork(){let e=this.metadata.checkStatusManaged(this.model.module);0!=e&&e.statusField==this.fieldname&&(this.statusNetwork=e.statusNetwork)}get networkItems(){let e=[];for(let t of this.statusNetwork)t.status_from!=this.value||t.required_model_state&&!this.model.checkModelState(t.required_model_state)||e.push(t);return e}getOptions(){let e=[],t=this.language.getFieldDisplayOptions(this.model.module,this.fieldname);for(let s in t)e.push({value:s,display:t[s]});this.options=e}propagateclick(e){this.buttonitemlist.some((t=>{if(t.id==e)return t.setStatus(this.fieldname),!0}))}static#e=this.ɵfac=function(e){return new(e||fieldStatusNetwork)(d.rXU(R.g),d.rXU(G.U),d.rXU(k.B),d.rXU(c.yu),d.rXU(C.Ix))};static#t=this.ɵcmp=d.VBU({type:fieldStatusNetwork,selectors:[["field-statusnetwork"]],viewQuery:function(e,t){if(1&e&&d.GBs(sd,5),2&e){let e;d.mGM(e=d.lsd())&&(t.buttonitemlist=e)}},features:[d.Vt3],decls:7,vars:7,consts:[[3,"fieldname","fieldconfig",4,"ngIf"],[3,"fielddisplayclass","editable","fieldconfig","fieldid"],[1,"slds-grid","slds-grid--vertical-align-center","slds-grid--align-spread"],[1,"slds-truncate"],["class","slds-dropdown-trigger slds-dropdown-trigger_click slds-button_last","system-dropdown-trigger","",4,"ngIf"],[3,"fieldname","fieldconfig"],["system-dropdown-trigger","",1,"slds-dropdown-trigger","slds-dropdown-trigger_click","slds-button_last"],["system-title","LBL_SET_STATUS",1,"slds-button","slds-button--icon-small","slds-button_icon-border-filled",3,"disabled"],["icon","stage"],[1,"slds-dropdown","slds-dropdown_right","slds-dropdown_actions"],["role","menu",1,"slds-dropdown__list"],["class","slds-dropdown__item","role","presentation",3,"click",4,"ngFor","ngForOf"],["role","presentation",1,"slds-dropdown__item",3,"click"],["href","javascript:void(0);","role","menuitem",1,"slds-truncate"],[3,"item"]],template:function(e,t){1&e&&(d.DNE(0,nd,1,2,"field-label",0),d.j41(1,"field-generic-display",1)(2,"div",2)(3,"div",3)(4,"span"),d.EFF(5),d.k0s()(),d.DNE(6,od,6,2,"div",4),d.k0s()()),2&e&&(d.Y8G("ngIf",t.displayLabel),d.R7$(),d.Y8G("fielddisplayclass",t.fielddisplayclass)("editable",!1)("fieldconfig",t.fieldconfig)("fieldid",t.fieldid),d.R7$(4),d.JRh(t.getValue()),d.R7$(),d.Y8G("ngIf",t.networkItems.length>0))},dependencies:[i.Sq,i.bT,I.t,id.q,Qn.L,u.b,j.K,sd],encapsulation:2})}return fieldStatusNetwork})();function rd(e,t){if(1&e&&d.nrm(0,"field-label",2),2&e){const e=d.XpG();d.Y8G("fieldname",e.fieldname)("fieldconfig",e.fieldconfig)}}function dd(e,t){if(1&e&&(d.j41(0,"div",5)(1,"div",6),d.EFF(2),d.k0s(),d.j41(3,"div",7),d.EFF(4),d.k0s()()),2&e){const e=t.$implicit,s=d.XpG(2);d.R7$(2),d.Lme("",e.user_name," • ",s.formatTimestamp(e.timestamp),""),d.R7$(2),d.JRh(e.text)}}function cd(e,t){if(1&e&&(d.j41(0,"div")(1,"div",3),d.DNE(2,dd,5,3,"div",4),d.k0s()()),2&e){const e=d.XpG();d.R7$(),d.Y8G("ngStyle",e.styles),d.R7$(),d.Y8G("ngForOf",e.logs)}}function ud(e,t){if(1&e&&(d.j41(0,"div",5)(1,"div",6),d.EFF(2),d.k0s(),d.j41(3,"div",13)(4,"pre"),d.EFF(5),d.k0s()()()),2&e){const e=t.$implicit,s=d.XpG(2);d.R7$(2),d.Lme("",e.user_name," • ",s.formatTimestamp(e.timestamp),""),d.R7$(3),d.JRh(e.text)}}function md(e,t){if(1&e){const e=d.RV6();d.j41(0,"div")(1,"div",8)(2,"div",9)(3,"div",10)(4,"textarea",11),d.mxI("ngModelChange",(function(t){d.eBV(e);const s=d.XpG();return d.DH7(s.new_log_entry,t)||(s.new_log_entry=t),d.Njj(t)})),d.k0s()()(),d.j41(5,"div",12),d.DNE(6,ud,6,3,"div",4),d.k0s()()()}if(2&e){const e=d.XpG();d.R7$(4),d.R50("ngModel",e.new_log_entry),d.Y8G("ngStyle",e.styles),d.R7$(),d.Y8G("ngStyle",e.styles),d.R7$(),d.Y8G("ngForOf",e.logs)}}let hd=(()=>{class fieldWorklog extends r.s{constructor(e,t,s,i,n,l,o){super(e,t,s,i,n),this.model=e,this.view=t,this.language=s,this.metadata=i,this.router=n,this.session=l,this.userpreferences=o,this.origin_logs=[],this.initialized=!1,this.view.isEditMode()&&this.view.mode$.subscribe((e=>{"edit"==e&&(this.origin_logs=this.logs)}))}ngOnInit(){super.ngOnInit(),this.view.isEditMode()&&(this.view.mode$.subscribe((e=>{"edit"==e&&(this.origin_logs=this.logs)})),this.initialized=!0)}get logs(){return this.value?"string"==typeof this.value?JSON.parse(this.value):this.value:[]}set logs(e){"json"!=this.field_defs.type?this.value=JSON.stringify(e):this.value=e}set new_log_entry(e){this._new_log_entry=e,this.initialized||this.ngOnInit();let t=[...this.origin_logs];t.unshift({timestamp:+new Date,user_name:this.session.authData.userName,user_id:this.session.authData.userId,text:e}),this.logs=t}get styles(){return{height:this.fieldconfig.height?this.fieldconfig.height+"px":"200px"}}formatTimestamp(e){let t=moment(e);return this.userpreferences.formatDateTime(t)}static#e=this.ɵfac=function(e){return new(e||fieldWorklog)(d.rXU(R.g),d.rXU(G.U),d.rXU(k.B),d.rXU(c.yu),d.rXU(C.Ix),d.rXU(El.d),d.rXU(xe.S))};static#t=this.ɵcmp=d.VBU({type:fieldWorklog,selectors:[["field-worklog"]],features:[d.Vt3],decls:3,vars:3,consts:[[3,"fieldname","fieldconfig",4,"ngIf"],[4,"ngIf"],[3,"fieldname","fieldconfig"],[1,"slds-scrollable--y",3,"ngStyle"],["class","slds-p-around--x-small slds-border--bottom",4,"ngFor","ngForOf"],[1,"slds-p-around--x-small","slds-border--bottom"],[1,"slds-p-around--x-small","slds-theme--shade"],[1,"slds-p-around--x-small",2,"white-space","pre-line"],[1,"slds-grid"],[1,"slds-form-element","slds-size--1-of-2","slds-m-right--xx-small"],[1,"slds-form-element__control"],["placeholder","Write your log here...",1,"slds-textarea",3,"ngModel","ngStyle","ngModelChange"],[1,"slds-size--1-of-2","slds-scrollable--y","slds-m-left--xx-small",3,"ngStyle"],[1,"slds-p-around--x-small"]],template:function(e,t){1&e&&d.DNE(0,rd,1,2,"field-label",0)(1,cd,3,2,"div",1)(2,md,7,4,"div",1),2&e&&(d.Y8G("ngIf",t.displayLabel),d.R7$(),d.Y8G("ngIf",!t.isEditMode()),d.R7$(),d.Y8G("ngIf",t.isEditMode()))},dependencies:[i.Sq,i.bT,i.B3,n.me,n.BC,n.vS,u.b],encapsulation:2})}return fieldWorklog})(),gd=(()=>{class FieldModelInfoComponent{constructor(e,t){this.model=e,this.language=t}static#e=this.ɵfac=function(e){return new(e||FieldModelInfoComponent)(d.rXU(R.g),d.rXU(k.B))};static#t=this.ɵcmp=d.VBU({type:FieldModelInfoComponent,selectors:[["field-model-info"]],decls:2,vars:2,consts:[["system-model-popover","",1,"slds-icon_container"],[3,"icon","size"]],template:function(e,t){1&e&&(d.j41(0,"div",0),d.nrm(1,"system-utility-icon",1),d.k0s()),2&e&&(d.R7$(),d.Y8G("icon","info")("size","x-small"))},dependencies:[E.B,ks.j],encapsulation:2})}return FieldModelInfoComponent})();var pd=s(60940);function fd(e,t){if(1&e&&d.nrm(0,"field-label",3),2&e){const e=d.XpG();d.Y8G("fieldname",e.fieldname)("fieldconfig",e.fieldconfig)}}function bd(e,t){if(1&e&&(d.j41(0,"field-generic-display",4),d.EFF(1),d.k0s()),2&e){const e=d.XpG();d.Y8G("fielddisplayclass",e.fielddisplayclass)("editable",e.isEditable())("fieldconfig",e.fieldconfig)("fieldid",e.fieldid),d.R7$(),d.SpI(" ",e.getValue(),"\n")}}function yd(e,t){if(1&e){const e=d.RV6();d.j41(0,"div",5)(1,"div",6)(2,"system-input-module",7),d.mxI("ngModelChange",(function(t){d.eBV(e);const s=d.XpG();return d.DH7(s.value,t)||(s.value=t),d.Njj(t)})),d.k0s(),d.nrm(3,"field-messages",8),d.k0s()()}if(2&e){const e=d.XpG();d.R7$(),d.Y8G("ngClass",e.getFieldClass()),d.R7$(),d.R50("ngModel",e.value),d.Y8G("technicalNameOnly",!1)("displayAsterisk",e.displayAsterisk),d.R7$(),d.Y8G("fieldname",e.fieldname)}}let vd=(()=>{class FieldEnumModulesComponent extends Ke{constructor(e,t,s,i,n){super(e,t,s,i,n),this.model=e,this.view=t,this.language=s,this.metadata=i,this.router=n}get displayAsterisk(){return!!this.fieldconfig.displayAsterisk}static#e=this.ɵfac=function(e){return new(e||FieldEnumModulesComponent)(d.rXU(R.g),d.rXU(G.U),d.rXU(k.B),d.rXU(c.yu),d.rXU(C.Ix))};static#t=this.ɵcmp=d.VBU({type:FieldEnumModulesComponent,selectors:[["field-enum-modules"]],features:[d.Vt3],decls:3,vars:3,consts:[[3,"fieldname","fieldconfig",4,"ngIf"],[3,"fielddisplayclass","editable","fieldconfig","fieldid",4,"ngIf"],["class","slds-form-element",4,"ngIf"],[3,"fieldname","fieldconfig"],[3,"fielddisplayclass","editable","fieldconfig","fieldid"],[1,"slds-form-element"],[1,"slds-form-element__control",3,"ngClass"],[3,"ngModel","technicalNameOnly","displayAsterisk","ngModelChange"],[3,"fieldname"]],template:function(e,t){1&e&&d.DNE(0,fd,1,2,"field-label",0)(1,bd,2,5,"field-generic-display",1)(2,yd,4,5,"div",2),2&e&&(d.Y8G("ngIf",t.displayLabel),d.R7$(),d.Y8G("ngIf",!t.isEditMode()),d.R7$(),d.Y8G("ngIf",t.isEditMode()))},dependencies:[i.YU,i.bT,n.BC,n.vS,pd.u,u.b,j.K,D.A],encapsulation:2})}return FieldEnumModulesComponent})();function _d(e,t){if(1&e&&d.nrm(0,"field-label",5),2&e){const e=d.XpG();d.Y8G("fieldname",e.fieldname)("fieldconfig",e.fieldconfig)}}let kd=(()=>{class fieldGDPR extends r.s{constructor(e,t,s,i,n,l,o,a){super(e,t,s,i,n),this.model=e,this.view=t,this.language=s,this.metadata=i,this.router=n,this.backend=l,this.modal=o,this.injector=a,this.gdprData={},this.loaded=!1}ngOnInit(){this.backend.getRequest("common/gdpr/"+this.model.module+"/"+this.model.id).subscribe((e=>{this.gdprData=e,this.loaded=!0,this.setMarketingStyle(),this.setDataStyle()})),this.subscriptions.add(this.model.data$.subscribe((()=>{this.setMarketingStyle(),this.setDataStyle()})))}setDataStyle(){if(!this.loaded)return{};let e="#cc0000";("1"==this.model.data.gdpr_data_agreement||this.gdprData?.related?.some((e=>"1"==e.gdpr_data_agreement)))&&(e="#009900"),this.dataStyle={"background-color":e,color:"white",cursor:"pointer"}}setMarketingStyle(){if(!this.loaded)return{};const e=this.metadata.getModuleFields(this.model.module)?.gdpr_marketing_agreement;let t="#cc0000";("enum"==e?.type&&"g"==this.model.data.gdpr_marketing_agreement||e?.type?.startsWith("bool")&&1==this.model.data.gdpr_marketing_agreement||this.gdprData?.related?.some((e=>"1"==e.gdpr_marketing_agreement)))&&(t="#009900"),this.marketingStyle={"background-color":t,color:"white",cursor:"pointer"}}showDetails(){this.modal.openModal("ObjectGDPRModal",!0,this.injector).subscribe((e=>{e.instance.gdprRelatedLog=this.gdprData.related,e.instance.gdprAuditLog=this.gdprData.audit.map((e=>({...e,model:{module:this.model.module,id:this.model.id,[e.field_name]:this.model.utils.backend2spice(this.model.module,e.field_name,e.value)}})))}))}static#e=this.ɵfac=function(e){return new(e||fieldGDPR)(d.rXU(R.g),d.rXU(G.U),d.rXU(k.B),d.rXU(c.yu),d.rXU(C.Ix),d.rXU(ee.H),d.rXU(w.y),d.rXU(d.zZn))};static#t=this.ɵcmp=d.VBU({type:fieldGDPR,selectors:[["field-gdpr"]],features:[d.Vt3],decls:6,vars:3,consts:[[3,"fieldname","fieldconfig",4,"ngIf"],[1,"slds-grid","slds-grid--vertical-align-center","slds-p-vertical--xxx-small"],[1,"slds-badge","slds-badge__icon",3,"ngStyle","click"],["label","LBL_DATA"],["label","LBL_MARKETING"],[3,"fieldname","fieldconfig"]],template:function(e,t){1&e&&(d.DNE(0,_d,1,2,"field-label",0),d.j41(1,"div",1)(2,"span",2),d.bIt("click",(function(){return t.showDetails()})),d.nrm(3,"system-label",3),d.k0s(),d.j41(4,"span",2),d.bIt("click",(function(){return t.showDetails()})),d.nrm(5,"system-label",4),d.k0s()()),2&e&&(d.Y8G("ngIf",t.displayLabel),d.R7$(2),d.Y8G("ngStyle",t.dataStyle),d.R7$(2),d.Y8G("ngStyle",t.marketingStyle))},dependencies:[i.bT,i.B3,le.W,u.b],encapsulation:2})}return fieldGDPR})();function Rd(e,t){if(1&e){const e=d.RV6();d.j41(0,"li",4)(1,"span",5),d.bIt("click",(function(){const t=d.eBV(e).$implicit,s=d.XpG();return d.Njj(s.choose(t))})),d.j41(2,"span",6),d.EFF(3),d.k0s()()()}if(2&e){const e=t.$implicit,s=d.XpG();d.R7$(3),d.JRh(s.language.getLabel(e.display_name))}}function Id(e,t){1&e&&(d.j41(0,"li",7)(1,"span",8),d.EFF(2,"No Matches found."),d.k0s()())}let xd=(()=>{class fieldSelectTreeSearch{constructor(e,t,s,i){this.model=e,this.backend=t,this.config=s,this.language=i,this.sel_fields=[],this.selected_categorys=[],this.choose_emitter=new d.bkB}ngOnInit(){this.config.getData("select_tree_tree")?this.flatteningOutCategoryTree(this.config.getData("select_tree_tree")):this.backend.getRequest("configuration/spiceui/core/selecttree/tree/"+this.treekey).subscribe((e=>{this.config.setData("select_tree_tree",e),this.flatteningOutCategoryTree(e)}))}get results(){return this.sel_fields.filter((e=>e.display_name.toLowerCase().includes(this.search.toLowerCase())))}flatteningOutCategoryTree(e){for(let t of e)t.parents=[],this.loopThroughTree(t)}loopThroughTree(e){if(e.display_name="",e.parents.length>0)for(let t of e.parents)e.display_name+=this.language.getLabel(t.name)+"\\";if(e.display_name+=this.language.getLabel(e.name),this.sel_fields.push(e),e.childs)for(let t of e.childs)t.parents=[...e.parents],t.parents.push(e),this.loopThroughTree(t)}choose(e){let t=[...e.parents];t.push(e),this.choose_emitter.emit(t)}static#e=this.ɵfac=function(e){return new(e||fieldSelectTreeSearch)(d.rXU(R.g),d.rXU(ee.H),d.rXU(ie.i),d.rXU(k.B))};static#t=this.ɵcmp=d.VBU({type:fieldSelectTreeSearch,selectors:[["select-tree-search"]],inputs:{search:"search",treekey:"treekey"},outputs:{choose_emitter:"choose"},decls:4,vars:2,consts:[["role","listbox",1,"slds-dropdown_fluid"],["role","presentation",1,"slds-listbox","slds-dropdown_fluid"],["class","slds-listbox__item","role","presentation",4,"ngFor","ngForOf"],["class","slds-listbox__item",4,"ngIf"],["role","presentation",1,"slds-listbox__item"],["role","option",1,"slds-listbox__option","slds-listbox__option_entity",3,"click"],[1,"slds-p-left--medium","slds-listbox__option-text","slds-listbox__option-text_entity"],[1,"slds-listbox__item"],[1,"slds-p-left--medium"]],template:function(e,t){1&e&&(d.j41(0,"div",0)(1,"ul",1),d.DNE(2,Rd,4,1,"li",2)(3,Id,3,0,"li",3),d.k0s()()),2&e&&(d.R7$(2),d.Y8G("ngForOf",t.results),d.R7$(),d.Y8G("ngIf",0==t.results.length))},dependencies:[i.Sq,i.bT],encapsulation:2})}return fieldSelectTreeSearch})();function jd(e,t){1&e&&(d.j41(0,"div",3),d.nrm(1,"system-spinner"),d.k0s())}function Gd(e,t){if(1&e&&(d.j41(0,"span",11),d.nrm(1,"system-label",12),d.k0s()),2&e){const e=d.XpG().$implicit;d.R7$(),d.Y8G("label",e.name)}}function Cd(e,t){if(1&e){const e=d.RV6();d.j41(0,"span",13),d.bIt("click",(function(){d.eBV(e);const t=d.XpG().$implicit,s=d.XpG(2);return d.Njj(s.choose(t))})),d.nrm(1,"system-label",12),d.k0s()}if(2&e){const e=d.XpG().$implicit;d.R7$(),d.Y8G("label",e.name)}}function wd(e,t){1&e&&d.nrm(0,"system-utility-icon",14),2&e&&d.Y8G("icon","favorite")("size","xx-small")}function Sd(e,t){1&e&&d.nrm(0,"system-utility-icon",15),2&e&&d.Y8G("icon","chevronright")("size","xx-small")}const Ed=e=>({"slds-theme--shade":e});function Ld(e,t){if(1&e){const e=d.RV6();d.j41(0,"div",4)(1,"div",6),d.bIt("mouseenter",(function(){const t=d.eBV(e).$implicit,s=d.XpG(2);return d.Njj(s.select(t))})),d.DNE(2,Gd,2,1,"span",7)(3,Cd,2,1,"span",8)(4,wd,1,2,"system-utility-icon",9)(5,Sd,1,2,"system-utility-icon",10),d.k0s()()}if(2&e){const e=t.$implicit,s=d.XpG(2);d.Y8G("ngClass",d.eq3(5,Ed,s.isCategorySelected(e))),d.R7$(2),d.Y8G("ngIf",0==e.selectable&&e.childs),d.R7$(),d.Y8G("ngIf",1==e.selectable||!e.childs),d.R7$(),d.Y8G("ngIf",1==e.favorite),d.R7$(),d.Y8G("ngIf",e.childs)}}const Dd=e=>({"slds-border--right":e});function Fd(e,t){if(1&e&&(d.j41(0,"div",4),d.DNE(1,Ld,6,7,"div",5),d.k0s()),2&e){const e=t.$implicit,s=t.index,i=d.XpG();d.ZvI("slds-col slds-size--1-of-",i.maxlevels,""),d.Y8G("ngClass",d.eq3(5,Dd,s<i.maxlevels-1)),d.R7$(),d.Y8G("ngForOf",e)}}let Md=(()=>{class fieldSelectTreeTree{constructor(e,t,s,i){this.model=e,this.backend=t,this.config=s,this.language=i,this.select_tree=[],this.maxlevels=4,this.levels=[],this.selected_fields=[],this.choose_emitter=new d.bkB,this.loading=!0,this.resetLevels()}ngOnInit(){if(this.config.getData("select_tree_tree")){var e=this.config.getData("select_tree_tree");e.sort((function(e,t){var s=e.name.toLowerCase(),i=t.name.toLowerCase();return s<i?-1:s>i?1:0})),this.levels[0]=e,this.loading=!1}else this.backend.getRequest("configuration/spiceui/core/selecttree/tree/"+this.treekey).subscribe((e=>{this.config.setData("select_tree_tree",e),this.select_tree=e,this.select_tree.sort((function(e,t){var s=e.name.toLowerCase(),i=t.name.toLowerCase();return s<i?-1:s>i?1:0})),this.levels[0]=this.select_tree,this.loading=!1}))}resetLevels(e=0){for(let t=e;t<this.maxlevels;t++)this.levels[t]=[];this.selected_fields.splice(e,this.maxlevels-e)}select(e){this.selected_fields[e.level]=e,e.childs?(this.levels[e.level+1]=e.childs,this.resetLevels(e.level+2)):this.resetLevels(e.level+1)}choose(e){this.selected_fields[e.level]=e,this.choose_emitter.emit(this.selected_fields)}isCategorySelected(e){for(let t of this.selected_fields)if(t.id==e.id)return!0;return!1}static#e=this.ɵfac=function(e){return new(e||fieldSelectTreeTree)(d.rXU(R.g),d.rXU(ee.H),d.rXU(ie.i),d.rXU(k.B))};static#t=this.ɵcmp=d.VBU({type:fieldSelectTreeTree,selectors:[["select-tree-tree"]],inputs:{maxlevels:"maxlevels",treekey:"treekey"},outputs:{choose_emitter:"choose"},decls:3,vars:2,consts:[["role","listbox",1,"slds-dropdown_fluid"],["class","slds-p-around--small slds-align--absolute-center",4,"ngIf"],[3,"class","ngClass",4,"ngFor","ngForOf"],[1,"slds-p-around--small","slds-align--absolute-center"],[3,"ngClass"],[3,"ngClass",4,"ngFor","ngForOf"],[1,"slds-grid","slds-grid--vertical-align-center","slds-p-around--xx-small",3,"mouseenter"],["class","slds-truncate","style","cursor: default;",4,"ngIf"],["class","slds-truncate","style","cursor: pointer; text-decoration: underline;",3,"click",4,"ngIf"],["class","slds-m-left--small",3,"icon","size",4,"ngIf"],["class","slds-col--bump-left",3,"icon","size",4,"ngIf"],[1,"slds-truncate",2,"cursor","default"],[3,"label"],[1,"slds-truncate",2,"cursor","pointer","text-decoration","underline",3,"click"],[1,"slds-m-left--small",3,"icon","size"],[1,"slds-col--bump-left",3,"icon","size"]],template:function(e,t){1&e&&(d.j41(0,"div",0),d.DNE(1,jd,2,0,"div",1)(2,Fd,2,7,"div",2),d.k0s()),2&e&&(d.R7$(),d.Y8G("ngIf",t.loading),d.R7$(),d.Y8G("ngForOf",t.levels))},dependencies:[i.YU,i.Sq,i.bT,le.W,eo.P,E.B],encapsulation:2})}return fieldSelectTreeTree})();function Td(e,t){if(1&e&&d.nrm(0,"field-label",3),2&e){const e=d.XpG();d.Y8G("fieldname",e.fieldname)("fieldconfig",e.fieldconfig)}}function Bd(e,t){if(1&e&&(d.j41(0,"field-generic-display",4),d.EFF(1),d.k0s()),2&e){const e=d.XpG();d.Y8G("fielddisplayclass",e.fielddisplayclass)("fieldconfig",e.fieldconfig)("editable",e.isEditable()),d.R7$(),d.SpI(" ",e.display_value,"\n")}}function $d(e,t){if(1&e){const e=d.RV6();d.j41(0,"div",11)(1,"div",12)(2,"span",13)(3,"span",14),d.EFF(4),d.k0s(),d.j41(5,"button",15),d.bIt("click",(function(){d.eBV(e);const t=d.XpG(2);return d.Njj(t.unchooseSelField())})),d.nrm(6,"system-button-icon",16),d.k0s()()()()}if(2&e){const e=d.XpG(2);d.R7$(4),d.JRh(e.display_value),d.R7$(2),d.Y8G("icon","close")}}function Od(e,t){if(1&e){const e=d.RV6();d.j41(0,"div",11)(1,"input",17),d.bIt("focus",(function(){d.eBV(e);const t=d.XpG(2);return d.Njj(t.onFocus())})),d.mxI("ngModelChange",(function(t){d.eBV(e);const s=d.XpG(2);return d.DH7(s.search,t)||(s.search=t),d.Njj(t)})),d.bIt("click",(function(t){d.eBV(e);const s=d.XpG(2);return d.Njj(s.checkUserAction(t))}))("keyup",(function(t){d.eBV(e);const s=d.XpG(2);return d.Njj(s.checkUserAction(t))})),d.k0s()()}if(2&e){const e=d.XpG(2);d.R7$(),d.FS9("placeholder",e.language.getLabel("LBL_SEARCH")),d.R50("ngModel",e.search)}}function Xd(e,t){if(1&e){const e=d.RV6();d.j41(0,"div",18)(1,"select-tree-tree",19),d.bIt("choose",(function(t){d.eBV(e);const s=d.XpG(2);return d.Njj(s.chooseSelField(t))})),d.k0s()()}if(2&e){const e=d.XpG(2);d.R7$(),d.Y8G("treekey",e.fieldconfig.key)("maxlevels",e.maxlevels)}}function Ud(e,t){if(1&e){const e=d.RV6();d.j41(0,"div",18)(1,"select-tree-search",20),d.bIt("choose",(function(t){d.eBV(e);const s=d.XpG(2);return d.Njj(s.chooseSelField(t))})),d.k0s()()}if(2&e){const e=d.XpG(2);d.R7$(),d.Y8G("treekey",e.fieldconfig.key)("search",e.search)}}function Yd(e,t){if(1&e&&(d.j41(0,"div",5)(1,"div",6)(2,"div",7)(3,"div",8),d.DNE(4,$d,7,2,"div",9)(5,Od,2,2,"div",9)(6,Xd,2,2,"div",10)(7,Ud,2,2,"div",10),d.k0s()()()()),2&e){const e=d.XpG();d.Y8G("ngClass",e.getFieldClass()),d.R7$(4),d.Y8G("ngIf",e.display_value),d.R7$(),d.Y8G("ngIf",!e.display_value),d.R7$(),d.Y8G("ngIf",e.show_tree),d.R7$(),d.Y8G("ngIf",e.show_search)}}let Nd=(()=>{class fieldSelectTree extends r.s{constructor(e,t,s,i,n,l,o,a,r){super(e,t,s,i,n),this.model=e,this.view=t,this.language=s,this.metadata=i,this.router=n,this.backend=l,this.config=o,this.elementRef=a,this.renderer=r,this.fields=[],this.show_tree=!1,this.show_search=!1,this.sel_fields=[]}ngOnInit(){this.fields.length<1&&(this.fields.push(this.fieldconfig.value1),this.fields.push(this.fieldconfig.value2),this.fields.push(this.fieldconfig.value3),this.fields.push(this.fieldconfig.value4)),this.config.getData("select_tree")?this.sel_fields=this.config.getData("select_tree"):(this.config.setData("select_tree",[]),this.backend.getRequest("configuration/spiceui/core/selecttree/list/"+this.fieldconfig.key).subscribe((e=>{this.sel_fields=e,this.config.setData("select_tree",e)})))}get display_value(){let e="";for(let t of this.fields){if(!this.model.getField(t))break;{let s="";for(let e in this.sel_fields)this.sel_fields[e].keyname===this.model.getField(t)&&(s=this.sel_fields[e].name);e+=this.language.getLabel(s)+" \\ "}}return e=e.substring(0,e.length-2),e}get maxlevels(){return this.fieldconfig.maxlevels?this.fieldconfig.maxlevels:4}checkUserAction(e){this.search?(this.show_tree=!1,this.show_search=!0):(this.show_tree=!0,this.show_search=!1)}chooseSelField(e){this.show_search=!1,this.show_tree=!1;for(let t=0;t<this.fields.length;t++)if(e[t]){let s=""!=e[t].keyname?e[t].keyname:e[t].name;this.model.setField(this.fields[t],s)}else this.model.setField(this.fields[t],"");this.search=null}unchooseSelField(){let e={};for(let t of this.fields)e[t]="";this.model.setFields(e)}onClick(e){this.elementRef.nativeElement.contains(e.target)||(this.show_tree=!1)}onFocus(){this.show_tree=!0,this.clickListener=this.renderer.listen("document","click",(e=>this.onClick(e)))}static#e=this.ɵfac=function(e){return new(e||fieldSelectTree)(d.rXU(R.g),d.rXU(G.U),d.rXU(k.B),d.rXU(c.yu),d.rXU(C.Ix),d.rXU(ee.H),d.rXU(ie.i),d.rXU(d.aKT),d.rXU(d.sFG))};static#t=this.ɵcmp=d.VBU({type:fieldSelectTree,selectors:[["select-tree"]],features:[d.Vt3],decls:3,vars:3,consts:[[3,"fieldname","fieldconfig",4,"ngIf"],[3,"fielddisplayclass","fieldconfig","editable",4,"ngIf"],["class","slds-form-element__control slds-m-vertical--xx-small",3,"ngClass",4,"ngIf"],[3,"fieldname","fieldconfig"],[3,"fielddisplayclass","fieldconfig","editable"],[1,"slds-form-element__control","slds-m-vertical--xx-small",3,"ngClass"],[1,"slds-form-element__control"],[1,"slds-combobox_container","slds-has-inline-listbox"],["aria-expanded","false","aria-haspopup","listbox","role","combobox",1,"slds-combobox","slds-dropdown-trigger","slds-dropdown-trigger_click","slds-combobox-lookup","slds-size_2-of-2"],["class","slds-combobox__form-element slds-input-has-icon slds-input-has-icon_right",4,"ngIf"],["class","slds-dropdown dropdown-trigger_click slds-dropdown_length-with-icon-1 slds-dropdown_fluid","style","display: block",4,"ngIf"],[1,"slds-combobox__form-element","slds-input-has-icon","slds-input-has-icon_right"],[1,"slds-pill_container"],[1,"slds-pill","slds-size--1-of-1"],[1,"slds-pill__label"],[1,"slds-button","slds-button--icon","slds-pill__remove",3,"click"],[3,"icon"],["type","search",1,"slds-input","slds-combobox__input",3,"placeholder","ngModel","focus","ngModelChange","click","keyup"],[1,"slds-dropdown","dropdown-trigger_click","slds-dropdown_length-with-icon-1","slds-dropdown_fluid",2,"display","block"],[3,"treekey","maxlevels","choose"],[3,"treekey","search","choose"]],template:function(e,t){1&e&&d.DNE(0,Td,1,2,"field-label",0)(1,Bd,2,4,"field-generic-display",1)(2,Yd,8,5,"div",2),2&e&&(d.Y8G("ngIf",t.displayLabel),d.R7$(),d.Y8G("ngIf",!t.isEditMode()),d.R7$(),d.Y8G("ngIf",t.isEditable()&&t.isEditMode()))},dependencies:[i.YU,i.bT,n.me,n.BC,n.vS,I.t,u.b,j.K,xd,Md],encapsulation:2})}return fieldSelectTree})();function Vd(e,t){if(1&e&&d.nrm(0,"field-label",3),2&e){const e=d.XpG();d.Y8G("fieldname",e.fieldname)("fieldconfig",e.fieldconfig)}}function Ad(e,t){if(1&e&&(d.j41(0,"field-generic-display",4),d.nrm(1,"div",5),d.EFF(2),d.k0s()),2&e){const e=d.XpG();d.Y8G("fielddisplayclass",e.fielddisplayclass)("editable",e.isEditable())("fieldconfig",e.fieldconfig),d.R7$(),d.Y8G("ngStyle",e.getColor),d.R7$(),d.SpI(" ",e.getValue(),"\n")}}function Pd(e,t){if(1&e&&(d.qex(0),d.j41(1,"option",12),d.EFF(2),d.k0s(),d.bVm()),2&e){const e=t.$implicit;d.R7$(),d.Y8G("value",e.value),d.R7$(),d.SpI(" ",e.long,"")}}function zd(e,t){if(1&e){const e=d.RV6();d.j41(0,"div",6)(1,"div",7)(2,"div",8)(3,"select",9),d.mxI("ngModelChange",(function(t){d.eBV(e);const s=d.XpG();return d.DH7(s.value,t)||(s.value=t),d.Njj(t)})),d.bIt("change",(function(){d.eBV(e);const t=d.XpG();return d.Njj(t.changed())})),d.DNE(4,Pd,3,2,"ng-container",10),d.k0s()(),d.nrm(5,"field-messages",11),d.k0s()()}if(2&e){const e=d.XpG();d.R7$(),d.Y8G("ngClass",e.getFieldClass()),d.R7$(2),d.R50("ngModel",e.value),d.R7$(),d.Y8G("ngForOf",e.options),d.R7$(),d.Y8G("fieldname",e.fieldname)}}let Hd=(()=>{class fieldColorEnum extends r.s{constructor(e,t,s,i,n){super(e,t,s,i,n),this.model=e,this.view=t,this.language=s,this.metadata=i,this.router=n,this.longOptions=[],this.options=[],this.colors=[],this.acolor={"background-color":""}}ngOnInit(){this.getOptions()}getOptions(){this.longOptions=this.language.getFieldDisplayOptions(this.model.module,this.fieldname);let e=this.longOptions;if(e&&!this.fieldconfig.useShort||(e=this.language.getDisplayOptions(this.fieldconfig.shortEnum)),this.colors=this.language.getDisplayOptions(this.fieldconfig.colorEnum),void 0!==this.colors){let e="";e=this.colors[this.value],void 0!==e&&"#"!=e.substring(0,1)&&(e="#"+e),this.acolor["background-color"]=e}let t=[];for(let s in e){let i=void 0!==this.colors&&void 0!==this.colors[s]?"#"!=this.colors[s].substring(0,1)?"#"+this.colors[s]:this.colors[s]:"",n=void 0!==this.longOptions?this.longOptions[s]:"";t.push({value:s,color:i,display:e[s],long:n})}this.options=t}get getColor(){let e="";return void 0!==this.colors&&(e=this.colors[this.value],e&&"#"!=e.substring(0,1)&&(e="#"+e),this.acolor["background-color"]=e),this.acolor}getValue(){for(let e of this.options)if(e.value==this.value)return e.display}changed(){let e="";e=this.colors[this.value],void 0!==e&&"#"!=e.substring(0,1)&&(e="#"+e),this.acolor["background-color"]=e}static#e=this.ɵfac=function(e){return new(e||fieldColorEnum)(d.rXU(R.g),d.rXU(G.U),d.rXU(k.B),d.rXU(c.yu),d.rXU(C.Ix))};static#t=this.ɵcmp=d.VBU({type:fieldColorEnum,selectors:[["field-enum"]],features:[d.Vt3],decls:3,vars:3,consts:[[3,"fieldname","fieldconfig",4,"ngIf"],[3,"fielddisplayclass","editable","fieldconfig",4,"ngIf"],["class","slds-form-element",4,"ngIf"],[3,"fieldname","fieldconfig"],[3,"fielddisplayclass","editable","fieldconfig"],[2,"float","left","width","10px","height","10px","border-radius","5px","margin-top","5px","margin-right","5px",3,"ngStyle"],[1,"slds-form-element"],[1,"slds-form-element__control",3,"ngClass"],[1,"slds-select_container","slds-m-vertical--xx-small"],[1,"slds-select",3,"ngModel","ngModelChange","change"],[4,"ngFor","ngForOf"],[3,"fieldname"],[3,"value"]],template:function(e,t){1&e&&d.DNE(0,Vd,1,2,"field-label",0)(1,Ad,3,5,"field-generic-display",1)(2,zd,6,4,"div",2),2&e&&(d.Y8G("ngIf",t.displayLabel),d.R7$(),d.Y8G("ngIf",!t.isEditMode()),d.R7$(),d.Y8G("ngIf",t.isEditMode()))},dependencies:[i.YU,i.Sq,i.bT,i.B3,n.xH,n.y7,n.wz,n.BC,n.vS,u.b,j.K,D.A],encapsulation:2})}return fieldColorEnum})();var qd=s(6315);function Jd(e,t){if(1&e&&d.nrm(0,"field-label",3),2&e){const e=d.XpG();d.Y8G("fieldname",e.fieldname)("fieldconfig",e.fieldconfig)}}function Wd(e,t){if(1&e&&(d.j41(0,"div",7),d.EFF(1),d.k0s()),2&e){const e=d.XpG(2);d.R7$(),d.SpI(" ",e.displayValue," ")}}function Kd(e,t){if(1&e&&(d.j41(0,"div",8),d.EFF(1),d.k0s()),2&e){const e=d.XpG(2);d.Y8G("title",e.displayValue),d.R7$(),d.SpI(" ",e.displayValue," ")}}function Qd(e,t){if(1&e&&(d.j41(0,"field-generic-display",4),d.DNE(1,Wd,2,1,"div",5)(2,Kd,2,2,"ng-template",null,6,d.C5r),d.k0s()),2&e){const e=d.sdS(3),t=d.XpG();d.Y8G("fielddisplayclass",t.fielddisplayclass)("editable",t.isEditable())("fieldconfig",t.fieldconfig)("fieldid",t.fieldid),d.R7$(),d.Y8G("ngIf",!t.truncated)("ngIfElse",e)}}function Zd(e,t){if(1&e){const e=d.RV6();d.j41(0,"div",9)(1,"system-input-base64",10),d.mxI("ngModelChange",(function(t){d.eBV(e);const s=d.XpG();return d.DH7(s.value,t)||(s.value=t),d.Njj(t)})),d.k0s(),d.nrm(2,"field-messages",11),d.k0s()}if(2&e){const e=d.XpG();d.Y8G("ngClass",e.getFieldClass()),d.R7$(),d.R50("ngModel",e.value),d.Y8G("minHeight",e.minHeight)("maxHeight",e.maxHeight),d.R7$(),d.Y8G("fieldname",e.fieldname)}}let ec=(()=>{class fieldBase64 extends r.s{constructor(e,t,s,i,n,l){super(e,t,s,i,n),this.model=e,this.view=t,this.language=s,this.metadata=i,this.router=n,this.footer=l}get minHeight(){return this.fieldconfig.minheight?this.fieldconfig.minheight:150}get maxHeight(){return this.fieldconfig.maxheight?this.fieldconfig.maxheight:500}get truncated(){return!!this.fieldconfig.truncate}get displayValue(){try{return decodeURIComponent(window.atob(this.value))}catch(e){return""}}static#e=this.ɵfac=function(e){return new(e||fieldBase64)(d.rXU(R.g),d.rXU(G.U),d.rXU(k.B),d.rXU(c.yu),d.rXU(C.Ix),d.rXU(ye.q))};static#t=this.ɵcmp=d.VBU({type:fieldBase64,selectors:[["field-base64"]],features:[d.Vt3],decls:3,vars:3,consts:[[3,"fieldname","fieldconfig",4,"ngIf"],[3,"fielddisplayclass","editable","fieldconfig","fieldid",4,"ngIf"],["class","slds-form-element__control","style","position:relative;",3,"ngClass",4,"ngIf"],[3,"fieldname","fieldconfig"],[3,"fielddisplayclass","editable","fieldconfig","fieldid"],["style","white-space: pre-line;",4,"ngIf","ngIfElse"],["truncatedDisplay",""],[2,"white-space","pre-line"],[1,"slds-truncate",2,"max-width","200px","text-overflow","ellipsis",3,"title"],[1,"slds-form-element__control",2,"position","relative",3,"ngClass"],[3,"ngModel","minHeight","maxHeight","ngModelChange"],[3,"fieldname"]],template:function(e,t){1&e&&d.DNE(0,Jd,1,2,"field-label",0)(1,Qd,4,6,"field-generic-display",1)(2,Zd,3,5,"div",2),2&e&&(d.Y8G("ngIf",t.displayLabel),d.R7$(),d.Y8G("ngIf",!t.isEditMode()),d.R7$(),d.Y8G("ngIf",t.isEditable()&&t.isEditMode()))},dependencies:[i.YU,i.bT,n.BC,n.vS,qd.T,u.b,j.K,D.A],encapsulation:2})}return fieldBase64})();function tc(e,t){1&e&&d.nrm(0,"system-stencil")}function sc(e,t){if(1&e&&d.nrm(0,"system-icon",3),2&e){const e=d.XpG();d.Y8G("module",e.value)}}let ic=(()=>{class fieldModuleIcon extends r.s{constructor(e,t,s,i,n){super(e,t,s,i,n),this.model=e,this.view=t,this.language=s,this.metadata=i,this.router=n}static#e=this.ɵfac=function(e){return new(e||fieldModuleIcon)(d.rXU(R.g),d.rXU(G.U),d.rXU(k.B),d.rXU(c.yu),d.rXU(C.Ix))};static#t=this.ɵcmp=d.VBU({type:fieldModuleIcon,selectors:[["field-module-icon"]],features:[d.Vt3],decls:4,vars:3,consts:[[3,"ngClass"],[4,"ngIf","ngIfElse"],["displaycontent",""],["size","xx-small",3,"module"]],template:function(e,t){if(1&e&&(d.j41(0,"div",0),d.DNE(1,tc,1,0,"system-stencil",1)(2,sc,1,1,"ng-template",null,2,d.C5r),d.k0s()),2&e){const e=d.sdS(3);d.Y8G("ngClass",t.fielddisplayclass),d.R7$(),d.Y8G("ngIf",t.model.isLoading)("ngIfElse",e)}},dependencies:[i.YU,i.bT,vs.J,lt.O],encapsulation:2})}return fieldModuleIcon})();var nc=s(93207),lc=s(34411);function oc(e,t){if(1&e&&d.nrm(0,"field-label",5),2&e){const e=d.XpG();d.Y8G("fieldname",e.fieldname)("fieldconfig",e.fieldconfig)}}function ac(e,t){if(1&e){const e=d.RV6();d.j41(0,"button",6),d.bIt("click",(function(){d.eBV(e);const t=d.XpG();return d.Njj(t.setEditMode())})),d.nrm(1,"system-button-icon",7),d.k0s()}2&e&&(d.R7$(),d.Y8G("icon","edit"))}function rc(e,t){if(1&e&&d.nrm(0,"system-richtext-editor",12),2&e){const e=d.XpG(2);d.Y8G("readOnly",!0)("ngModel",e.value)("css",e.styleTag)("stylesheetId",e.stylesheetId)("innerheight",e.fieldconfig.height)}}function dc(e,t){if(1&e&&d.nrm(0,"iframe",13),2&e){const e=d.XpG(2);d.Y8G("src",e.fieldconfig.iframe_as_blob_url?e.iframeUrl:e.sanitizedValue,d.f$h)("ngStyle",e.heightStyle)}}function cc(e,t){1&e&&(d.j41(0,"div",14),d.nrm(1,"system-stencil"),d.k0s())}function uc(e,t){if(1&e&&(d.j41(0,"field-generic-display",8),d.DNE(1,rc,1,5,"system-richtext-editor",9)(2,dc,1,2,"iframe",10)(3,cc,2,0,"div",11),d.k0s()),2&e){const e=d.XpG();d.Y8G("fielddisplayclass",e.fielddisplayclass)("editable",!1)("fieldconfig",e.fieldconfig)("field-generic-display-notruncate",!1),d.R7$(),d.Y8G("ngIf",!e.fieldconfig.asiframe),d.R7$(),d.Y8G("ngIf",e.fieldconfig.asiframe&&!e.isLoading),d.R7$(),d.Y8G("ngIf",e.isLoading)}}function mc(e,t){if(1&e){const e=d.RV6();d.j41(0,"li",31),d.bIt("click",(function(){const t=d.eBV(e).$implicit,s=d.XpG(3);return s.selectedSignatureId=t.id,d.Njj(s.changeSignature())})),d.j41(1,"a",32)(2,"span",28),d.nrm(3,"system-label",33),d.k0s()()()}if(2&e){const e=t.$implicit;d.Y8G("value",e.id),d.R7$(3),d.Y8G("label",e.label)}}function hc(e,t){if(1&e){const e=d.RV6();d.j41(0,"li",20)(1,"div",21)(2,"button",22),d.nrm(3,"system-button-icon",23),d.k0s(),d.j41(4,"div",24)(5,"ul",25)(6,"li",26),d.bIt("click",(function(){d.eBV(e);const t=d.XpG(2);return t.selectedSignatureId="",d.Njj(t.changeSignature())})),d.j41(7,"a",27)(8,"span",28),d.nrm(9,"system-label",29),d.k0s()()(),d.DNE(10,mc,4,2,"li",30),d.k0s()()()()}if(2&e){const e=d.XpG(2);d.R7$(10),d.Y8G("ngForOf",e.signatures)}}function gc(e,t){if(1&e&&(d.j41(0,"option",43),d.nrm(1,"system-label",44),d.k0s()),2&e){const e=t.$implicit;d.Y8G("value",e.id),d.R7$(),d.Y8G("label",e.label)}}function pc(e,t){if(1&e){const e=d.RV6();d.j41(0,"li",34)(1,"div",35)(2,"label",36),d.nrm(3,"system-label",37),d.EFF(4,": "),d.k0s(),d.j41(5,"div",38)(6,"div",39)(7,"select",40),d.mxI("ngModelChange",(function(t){d.eBV(e);const s=d.XpG(2);return d.DH7(s.selectedSignatureId,t)||(s.selectedSignatureId=t),d.Njj(t)})),d.bIt("ngModelChange",(function(){d.eBV(e);const t=d.XpG(2);return d.Njj(t.changeSignature())})),d.j41(8,"option",41),d.nrm(9,"system-label",29),d.k0s(),d.DNE(10,gc,2,2,"option",42),d.k0s()()()()()}if(2&e){const e=d.XpG(2);d.R7$(7),d.R50("ngModel",e.selectedSignatureId),d.Y8G("disabled",0==(null==e.signatures?null:e.signatures.length)),d.R7$(3),d.Y8G("ngForOf",e.signatures)}}function fc(e,t){if(1&e){const e=d.RV6();d.j41(0,"div",15)(1,"system-richtext-editor",16),d.mxI("ngModelChange",(function(t){d.eBV(e);const s=d.XpG();return d.DH7(s.value,t)||(s.value=t),d.Njj(t)})),d.bIt("save$",(function(t){d.eBV(e);const s=d.XpG();return d.Njj(s.save(t))})),d.DNE(2,hc,11,1,"li",17)(3,pc,11,3,"li",18),d.k0s(),d.nrm(4,"field-messages",19),d.k0s()}if(2&e){const e=d.XpG();d.Y8G("ngClass",e.getFieldClass()),d.R7$(),d.R50("ngModel",e.value),d.Y8G("css",e.styleTag)("stylesheetId",e.stylesheetId)("extendedmode",!e.fieldconfig.simplemode)("innerheight",e.fieldconfig.innerheight)("useMedialFile",e.metadata.checkModuleAcl("MediaFiles","list")&&e.metadata.checkModuleAcl("MediaFiles","view")),d.R7$(),d.Y8G("ngIf",null==e.fieldconfig?null:e.fieldconfig.useSignature),d.R7$(),d.Y8G("ngIf",null==e.fieldconfig?null:e.fieldconfig.useSignature),d.R7$(),d.Y8G("fieldname",e.fieldname)}}let bc=(()=>{class fieldRichText extends r.s{constructor(e,t,s,i,n,l,o,a,r,d,c,u,m){super(e,t,s,i,o),this.model=e,this.view=t,this.language=s,this.metadata=i,this.backend=n,this.toast=l,this.router=o,this.injector=a,this.broadcast=r,this.configurationService=d,this.modal=c,this.cdRef=u,this.sanitized=m,this.selectedSignatureId="",this.signatures=[],this.fullValue="",this.stylesheetField="",this.stylesheetToUse="",this.signaturePosition=-1,this.isLoading=!1,this._styleTag="",this.stylesheets=this.metadata.getHtmlStylesheetNames()}get heightStyle(){return{height:this.fieldconfig.height?this.fieldconfig.height:"500px"}}get styleTag(){return this._styleTag}get stylesheetId(){return _.isEmpty(this.model.getField(this.stylesheetField))?this.stylesheetId=this.stylesheetToUse:this.model.getField(this.stylesheetField)}set stylesheetId(e){e&&this.model.setField(this.stylesheetField,e)}get value(){return this.model.getField(this.fieldname)}set value(e){this.model.setField(this.fieldname,e)}ngOnInit(){this.fieldconfig.iframe_as_blob_url&&(this.isLoading=!0,this.model.generateFieldHtmlContentBlobUrl(this.fieldname).subscribe((e=>{this.isLoading=!1,this.iframeUrl=e,this.cdRef.detectChanges()}))),this.setStylesheetField(),this.setStylesheetsToUse(),this.setHtmlValue(),this.modelChangesSubscriber(),this.fieldconfig?.useSignature&&(this.addSignature("mailbox","","LBL_MAILBOX_SIGNATURE"),this.selectedSignatureId=this.model.getFieldValue("signature"),this.loadUserSignature("user"==this.selectedSignatureId),this.loadMailboxSignature(this.model.getField("mailbox_id"),"mailbox"==this.selectedSignatureId))}changeSignature(){"mailbox"==this.selectedSignatureId&&this.loadMailboxSignature(this.model.getField("mailbox_id"),!0),this.renderSelectedSignature()}renderSelectedSignature(){this.value||(this.value="");const e=document.createElement("div");e.innerHTML=this.value;let t=e.querySelectorAll("div[data-signature]"),s=e.querySelectorAll("div[data-spice-reply-quote]");if(this.signaturePosition=e.innerHTML.indexOf(s[0]?.outerHTML),t.length>0&&(this.signaturePosition=e.innerHTML.indexOf(t[0]?.outerHTML)),t[0]?.parentNode.removeChild(t[0]),this.value=e.innerHTML,this.model.setField("signature",this.selectedSignatureId),!this.selectedSignatureId)return;const i=`<div data-signature="" class="data-signature" style="margin: 10px 0">${this.signatures.find((e=>e.id==this.selectedSignatureId)).content}</div>`;this.value=[this.value.slice(0,this.signaturePosition),i,s[0]?.outerHTML].join("<p><br></p>")}setEditMode(){this.model.startEdit(),this.view.setEditMode(),this.cdRef.detectChanges()}encodeHtml(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}loadMailboxSignature(e,t){if(!this.isEditMode())return;if(!e)return;const s=this.configurationService.getData("mailbox_signature_"+e);if(!s)return(0,nc.s)(this.backend.get("Mailboxes",e)).then((s=>{this.configurationService.setData("mailbox_signature_"+e,s.email_signature),this.addSignature("mailbox",s.email_signature,"LBL_MAILBOX_SIGNATURE"),t&&this.renderSelectedSignature()}));this.addSignature("mailbox",s,"LBL_MAILBOX"),t&&this.renderSelectedSignature()}addSignature(e,t,s){const i=this.signatures.find((t=>t.id==e));i?i.content=t:this.signatures.push({id:e,content:t,label:s})}loadUserSignature(e){if(!this.isEditMode())return;const t=this.configurationService.getData("usersignature");if(!t)return;this.signatures.length;this.addSignature("user",t,"LBL_MY_SIGNATURE"),e&&this.renderSelectedSignature()}setStylesheetField(){let e=this.metadata.getFieldDefs(this.model.module,this.fieldname);_.isEmpty(e.stylesheet_id_field)||(this.stylesheetField=e.stylesheet_id_field)}setStylesheetsToUse(){this.useStylesheets=!_.isEmpty(this.stylesheetField)&&!_.isEmpty(this.stylesheets),this.useStylesheets&&(1===this.stylesheets.length?this.stylesheetToUse=this.stylesheets[0].id:_.isEmpty(this.fieldconfig.stylesheetId)?this.stylesheetToUse=this.metadata.getHtmlStylesheetToUse(this.model.module,this.fieldname):this.stylesheetToUse=this.fieldconfig.stylesheetId)}setSanitizedValue(){this.value&&(this.value.includes("</html>")?this.fullValue=this.value:this.fullValue=`<html><head><base target="_blank"><style>${this.styleTag}</style></head><body class="spice">${this.value}</body></html>`),this.fullValue!=this.fullValue_cached&&(this.sanitizedValue=this.sanitized.bypassSecurityTrustResourceUrl(this.fullValue?"data:text/html;charset=UTF-8,"+encodeURIComponent(this.fullValue):""),this.fullValue_cached=this.fullValue)}modelChangesSubscriber(){this.subscriptions.add(this.model.observeFieldChanges(this.fieldname).subscribe({next:()=>this.setHtmlValue()})),this.subscriptions.add(this.model.observeFieldChanges("mailbox_id").subscribe((e=>{this.fieldconfig?.useSignature&&e&&"mailbox"==this.model.getField("signature")&&this.loadMailboxSignature(e,!0)})))}setHtmlValue(){if(!this.value?.includes("</html>")&&!this.fieldconfig.iframe_as_blob_url)return this.setSanitizedValue();let e=this.stylesheetId?this.metadata.getHtmlStylesheetCode(this.stylesheetId):"";const t=document.createElement("div");t.innerHTML=void 0===this.value?"":this.value;const s=t.getElementsByTagName("style")[0];e+=s?.innerHTML??"",s?.remove(),this.model.setField(this.fieldname,t.innerHTML,!0),this._styleTag=e,this.fieldconfig.iframe_as_blob_url||this.setSanitizedValue()}save(e){let t={date_modified:this.model.getField("date_modified"),[this.fieldname]:e};this.backend.save(this.model.module,this.model.id,t).subscribe({next:e=>{this.model.setField("date_modified",e.date_modified,!0),this.value=e[this.fieldname],this.toast.sendToast(this.language.getLabel("LBL_DATA_SAVED")+".","success")},error:e=>{this.toast.sendToast(this.language.getLabel("LBL_ERROR")+" "+e.status,"error",e.error.error.message)}})}static#e=this.ɵfac=function(e){return new(e||fieldRichText)(d.rXU(R.g),d.rXU(G.U),d.rXU(k.B),d.rXU(c.yu),d.rXU(ee.H),d.rXU(te.o),d.rXU(C.Ix),d.rXU(d.zZn),d.rXU(se.m),d.rXU(ie.i),d.rXU(w.y),d.rXU(d.gRc),d.rXU(ne.up))};static#t=this.ɵcmp=d.VBU({type:fieldRichText,selectors:[["field-richtext"]],features:[d.Vt3],decls:6,vars:4,consts:[[1,"slds-grid","slds-grid--vertical-align-center","slds-grid--align-spread"],[3,"fieldname","fieldconfig",4,"ngIf"],["class","slds-button slds-button--icon slds-m-left--xx-small spice-hover-button",3,"click",4,"ngIf"],[3,"fielddisplayclass","editable","fieldconfig","field-generic-display-notruncate",4,"ngIf"],["class","slds-form-element__control",3,"ngClass",4,"ngIf"],[3,"fieldname","fieldconfig"],[1,"slds-button","slds-button--icon","slds-m-left--xx-small","spice-hover-button",3,"click"],[3,"icon"],[3,"fielddisplayclass","editable","fieldconfig","field-generic-display-notruncate"],[3,"readOnly","ngModel","css","stylesheetId","innerheight",4,"ngIf"],["style","resize: vertical; border: 0","width","100%","frameborder","0","seamless","true","sandbox","",3,"src","ngStyle",4,"ngIf"],["class","slds-p-around--small",4,"ngIf"],[3,"readOnly","ngModel","css","stylesheetId","innerheight"],["width","100%","frameborder","0","seamless","true","sandbox","",2,"resize","vertical","border","0",3,"src","ngStyle"],[1,"slds-p-around--small"],[1,"slds-form-element__control",3,"ngClass"],[3,"ngModel","css","stylesheetId","extendedmode","innerheight","useMedialFile","ngModelChange","save$"],["id","signatureIcon",4,"ngIf"],["id","signatureSelector",4,"ngIf"],[3,"fieldname"],["id","signatureIcon"],["system-dropdown-trigger","",1,"slds-dropdown-trigger","slds-dropdown-trigger_click"],["aria-haspopup","true","aria-expanded","true",1,"slds-button","slds-button_icon","slds-button_icon-border-filled"],["icon","signature","aria-hidden","true",1,"slds-button__icon"],[1,"slds-dropdown","slds-dropdown_left","slds-dropdown_small"],["role","menu",1,"slds-dropdown__list"],[1,"slds-dropdown__item",3,"click"],["aria-checked","true","role","menuitemcheckbox","tabindex","0"],["title","Menu Item One",1,"slds-truncate"],["label","LBL_NONE"],["class","slds-dropdown__item slds-is-selected","role","presentation",3,"value","click",4,"ngFor","ngForOf"],["role","presentation",1,"slds-dropdown__item","slds-is-selected",3,"value","click"],["aria-checked","true","role","menuitemcheckbox","tabindex","-1"],[1,"slds-truncate",3,"label"],["id","signatureSelector"],[1,"slds-form-element","slds-grid"],[1,"slds-form-element__label"],["label","LBL_SIGNATURE"],[1,"slds-form-element__control"],[1,"slds-select_container"],[1,"slds-select",3,"ngModel","disabled","ngModelChange"],["value",""],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[3,"label"]],template:function(e,t){1&e&&(d.j41(0,"div",0)(1,"div"),d.DNE(2,oc,1,2,"field-label",1),d.k0s(),d.DNE(3,ac,2,1,"button",2),d.k0s(),d.DNE(4,uc,4,7,"field-generic-display",3)(5,fc,5,10,"div",4)),2&e&&(d.R7$(2),d.Y8G("ngIf",t.displayLabel),d.R7$(),d.Y8G("ngIf",!t.isEditMode()&&t.isEditable()),d.R7$(),d.Y8G("ngIf",!t.isEditMode()),d.R7$(),d.Y8G("ngIf",t.isEditable()&&t.isEditMode()))},dependencies:[i.YU,i.Sq,i.bT,i.B3,n.xH,n.y7,n.wz,n.BC,n.vS,I.t,le.W,lc.K,lt.O,id.q,u.b,j.K,D.A],encapsulation:2})}return fieldRichText})();function yc(e,t){if(1&e&&d.nrm(0,"field-label",3),2&e){const e=d.XpG();d.Y8G("fieldname",e.fieldname)("fieldconfig",e.fieldconfig)}}function vc(e,t){if(1&e&&(d.j41(0,"field-generic-display",4)(1,"span"),d.EFF(2),d.k0s()()),2&e){const e=d.XpG();d.Y8G("fielddisplayclass",e.fielddisplayclass)("editable",e.isEditable())("fieldconfig",e.fieldconfig),d.R7$(2),d.JRh(e.getValue())}}function _c(e,t){1&e&&(d.j41(0,"span",21)(1,"span",22),d.nrm(2,"system-icon",23),d.k0s()())}function kc(e,t){if(1&e){const e=d.RV6();d.j41(0,"li",15),d.bIt("click",(function(t){const s=d.eBV(e).$implicit,i=d.XpG(2);return d.Njj(i.clickedItem(s,t))})),d.j41(1,"div",16),d.DNE(2,_c,3,0,"span",17),d.j41(3,"span",18)(4,"span",19),d.nrm(5,"span",20),d.EFF(6),d.k0s()()()()}if(2&e){const e=t.$implicit;d.R7$(2),d.Y8G("ngIf",e.selected),d.R7$(4),d.SpI(" ",e.display," ")}}function Rc(e,t){if(1&e&&(d.j41(0,"div",5)(1,"div",6)(2,"div",7)(3,"div",8)(4,"div",9),d.nrm(5,"input",10)(6,"system-icon",11),d.k0s(),d.j41(7,"div",12)(8,"ul",13),d.DNE(9,kc,7,2,"li",14),d.k0s()()()()()()),2&e){const e=d.XpG();d.R7$(5),d.Y8G("value",e.getValue()),d.R7$(4),d.Y8G("ngForOf",e.getValues())}}let Ic=(()=>{class fieldEnumMulti extends r.s{constructor(e,t,s,i,n,l,o){super(e,t,s,i,n),this.model=e,this.view=t,this.language=s,this.metadata=i,this.router=n,this.elementRef=l,this.renderer=o,this.options=[],this.selectedValues=[],this.showSelect=!1}ngOnInit(){this.model.data$.subscribe((e=>{this.buildOptions()}))}getValue(){let e=[];for(let t of this.selectedValues)e.push(this.options[t]);return e.join(", ")}getValues(){let e=[];this.getValueArray();for(let t in this.options){let s=!1;for(let e of this.selectedValues)t==e&&(s=!0);e.push({id:this.model.generateGuid(),value:t,display:this.options[t],selected:s})}return e}getValueArray(){try{return this.model.getField(this.fieldname).substring(1,this.model.getField(this.fieldname).length-1).split("^,^")}catch(e){return[]}}buildOptions(){this.options=[],this.selectedValues=this.getValueArray(),this.options=this.language.getFieldDisplayOptions(this.model.module,this.fieldname)}clickedItem(e,t){t.stopPropagation(),""==this.selectedValues[0]&&(this.selectedValues=[]);var s=this.selectedValues.indexOf(e.value);-1==s?this.selectedValues.length>0?this.selectedValues.push(e.value):this.selectedValues=[e.value]:this.selectedValues.splice(s,1);let i=Object.assign([],this.selectedValues),n="";i.length>0&&(n="^"+i.join("^,^")+"^"),this.model.setField(this.fieldname,n)}static#e=this.ɵfac=function(e){return new(e||fieldEnumMulti)(d.rXU(R.g),d.rXU(G.U),d.rXU(k.B),d.rXU(c.yu),d.rXU(C.Ix),d.rXU(d.aKT),d.rXU(d.sFG))};static#t=this.ɵcmp=d.VBU({type:fieldEnumMulti,selectors:[["field-enummulti"]],features:[d.Vt3],decls:3,vars:3,consts:[[3,"fieldname","fieldconfig",4,"ngIf"],[3,"fielddisplayclass","editable","fieldconfig",4,"ngIf"],["class","slds-form-element",4,"ngIf"],[3,"fieldname","fieldconfig"],[3,"fielddisplayclass","editable","fieldconfig"],[1,"slds-form-element"],[1,"slds-form-element__control"],[1,"slds-combobox_container"],["tabindex","-1","system-dropdown-trigger","","aria-expanded","true","aria-haspopup","listbox","role","combobox",1,"slds-combobox","slds-dropdown-trigger","slds-dropdown-trigger_click"],["role","none",1,"slds-combobox__form-element","slds-input-has-icon","slds-input-has-icon_right"],["type","text","role","textbox","placeholder","Select an Option",1,"slds-input","slds-combobox__input-value",3,"value"],["icon","down","sprite","utility","addclasses","slds-input__icon slds-input__icon_right"],["role","listbox",1,"slds-dropdown","slds-dropdown_length-5","slds-dropdown_fluid"],["role","presentation",1,"slds-listbox","slds-listbox_vertical"],["role","presentation","class","slds-listbox__item",3,"click",4,"ngFor","ngForOf"],["role","presentation",1,"slds-listbox__item",3,"click"],["id","option1","role","option",1,"slds-media","slds-listbox__option","slds-listbox__option_plain","slds-media_small","slds-is-selected"],["class","slds-media__figure slds-listbox__option-icon",4,"ngIf"],[1,"slds-media__body"],["title","Accounts",1,"slds-truncate"],[1,"slds-assistive-text"],[1,"slds-media__figure","slds-listbox__option-icon"],[1,"slds-icon_container","slds-icon-utility-check","slds-current-color"],["icon","check","size","xx-small","sprite","utility","addclasses","slds-input__icon slds-input__icon_right"]],template:function(e,t){1&e&&d.DNE(0,yc,1,2,"field-label",0)(1,vc,3,4,"field-generic-display",1)(2,Rc,10,2,"div",2),2&e&&(d.Y8G("ngIf",t.displayLabel),d.R7$(),d.Y8G("ngIf",!t.isEditMode()),d.R7$(),d.Y8G("ngIf",t.isEditMode()))},dependencies:[i.Sq,i.bT,vs.J,id.q,u.b,j.K],encapsulation:2})}return fieldEnumMulti})();var xc=s(11614);function jc(e,t){if(1&e&&d.nrm(0,"field-label",3),2&e){const e=d.XpG();d.Y8G("fieldname",e.fieldname)("fieldconfig",e.fieldconfig)}}function Gc(e,t){if(1&e&&(d.j41(0,"field-generic-display",4),d.nrm(1,"system-input-cron-expression",5),d.k0s()),2&e){const e=d.XpG();d.Y8G("fielddisplayclass",e.fielddisplayclass)("editable",e.isEditable())("fieldconfig",e.fieldconfig),d.R7$(),d.Y8G("readOnly",!0)("ngModel",e.value)}}function Cc(e,t){if(1&e){const e=d.RV6();d.j41(0,"div",6)(1,"system-input-cron-expression",7),d.mxI("ngModelChange",(function(t){d.eBV(e);const s=d.XpG();return d.DH7(s.value,t)||(s.value=t),d.Njj(t)})),d.k0s(),d.nrm(2,"field-messages",8),d.k0s()}if(2&e){const e=d.XpG();d.Y8G("ngClass",e.css_classes),d.R7$(),d.R50("ngModel",e.value),d.R7$(),d.Y8G("fieldname",e.fieldname)}}let wc=(()=>{class fieldCronInterval extends r.s{constructor(e,t,s,i,n,l){super(e,t,s,n,l),this.model=e,this.view=t,this.language=s,this.userPreferences=i,this.metadata=n,this.router=l}ngOnInit(){this.initializeValue()}initializeValue(){this.model.isNew&&(this.value="*::*::*::*::*")}static#e=this.ɵfac=function(e){return new(e||fieldCronInterval)(d.rXU(R.g),d.rXU(G.U),d.rXU(k.B),d.rXU(xe.S),d.rXU(c.yu),d.rXU(C.Ix))};static#t=this.ɵcmp=d.VBU({type:fieldCronInterval,selectors:[["field-cron-interval"]],features:[d.Vt3],decls:3,vars:3,consts:[[3,"fieldname","fieldconfig",4,"ngIf"],[3,"fielddisplayclass","editable","fieldconfig",4,"ngIf"],[3,"ngClass",4,"ngIf"],[3,"fieldname","fieldconfig"],[3,"fielddisplayclass","editable","fieldconfig"],[3,"readOnly","ngModel"],[3,"ngClass"],[3,"ngModel","ngModelChange"],[3,"fieldname"]],template:function(e,t){1&e&&d.DNE(0,jc,1,2,"field-label",0)(1,Gc,2,5,"field-generic-display",1)(2,Cc,3,3,"div",2),2&e&&(d.Y8G("ngIf",t.displayLabel),d.R7$(),d.Y8G("ngIf",!t.isEditMode()),d.R7$(),d.Y8G("ngIf",t.isEditMode()))},dependencies:[i.YU,i.bT,n.BC,n.vS,xc.E,u.b,j.K,D.A],encapsulation:2})}return fieldCronInterval})();var Sc=s(38045);function Ec(e,t){if(1&e&&d.nrm(0,"field-label",3),2&e){const e=d.XpG();d.Y8G("fieldname",e.fieldname)("fieldconfig",e.fieldconfig)}}function Lc(e,t){if(1&e&&(d.j41(0,"field-generic-display",4),d.EFF(1),d.k0s()),2&e){const e=d.XpG();d.Y8G("fielddisplayclass",e.fielddisplayclass)("editable",e.isEditable())("fieldconfig",e.fieldconfig)("title",e.value)("fieldid",e.fieldid),d.R7$(),d.SpI(" ",e.value,"\n")}}function Dc(e,t){if(1&e){const e=d.RV6();d.j41(0,"div",5)(1,"system-googleplaces-search",6,7),d.mxI("ngModelChange",(function(t){d.eBV(e);const s=d.XpG();return d.DH7(s.value,t)||(s.value=t),d.Njj(t)})),d.bIt("details",(function(t){d.eBV(e);const s=d.XpG();return d.Njj(s.setDetails(t))})),d.k0s(),d.nrm(3,"field-messages",8),d.k0s()}if(2&e){const e=d.XpG();d.Y8G("ngClass",e.css_classes),d.R7$(),d.R50("ngModel",e.value),d.R7$(2),d.Y8G("fieldname",e.fieldname)}}let Fc=(()=>{class fieldGooglePlacesSearch extends r.s{constructor(e,t,s,i,n,l){super(e,t,s,i,l),this.model=e,this.view=t,this.language=s,this.metadata=i,this.configurationService=n,this.router=l,this.options=[]}setDetails(e){let t={};this.fieldconfig.formatted_phone_number&&e.formatted_phone_number&&(t[this.fieldconfig.formatted_phone_number]=e.formatted_phone_number),this.fieldconfig.international_phone_number&&e.international_phone_number&&(t[this.fieldconfig.international_phone_number]=e.international_phone_number),this.fieldconfig.website&&e.website&&(t[this.fieldconfig.website]=e.website),e.address&&(this.fieldconfig.city&&e.address.city&&(t[this.fieldconfig.city]=e.address.city),this.fieldconfig.country&&e.address.country&&(t[this.fieldconfig.country]=e.address.country),this.fieldconfig.postalcode&&e.address.postalcode&&(t[this.fieldconfig.postalcode]=e.address.postalcode),this.fieldconfig.state&&e.address.state&&(t[this.fieldconfig.state]=e.address.state),this.fieldconfig.street&&e.address.street_name&&(t[this.fieldconfig.street]=e.address.street_name),!this.hideStreetNumber&&this.fieldconfig.street_number&&e.address.street_number?t[this.fieldconfig.street_number]=e.address.street_number:this.hideStreetNumber&&this.fieldconfig.street&&e.address.street_name&&e.address.street_number&&(t[this.fieldconfig.street]+=" "+e.address.street_number),this.fieldconfig.latitude&&e.address.latitude&&(t[this.fieldconfig.latitude]=e.address.latitude),this.fieldconfig.longitude&&e.address.longitude&&(t[this.fieldconfig.longitude]=e.address.longitude)),_.isEmpty(t)||this.model.setFields(t)}get hideStreetNumber(){const e=JSON.parse(this.configurationService.data.backendextensions.address_format?.config?.format||"{}");return!!e?.hidestreetnumber}static#e=this.ɵfac=function(e){return new(e||fieldGooglePlacesSearch)(d.rXU(R.g),d.rXU(G.U),d.rXU(k.B),d.rXU(c.yu),d.rXU(ie.i),d.rXU(C.Ix))};static#t=this.ɵcmp=d.VBU({type:fieldGooglePlacesSearch,selectors:[["field-google-places-search"]],features:[d.Vt3],decls:3,vars:3,consts:[[3,"fieldname","fieldconfig",4,"ngIf"],[3,"fielddisplayclass","editable","fieldconfig","title","fieldid",4,"ngIf"],["class","slds-form-element__control",3,"ngClass",4,"ngIf"],[3,"fieldname","fieldconfig"],[3,"fielddisplayclass","editable","fieldconfig","title","fieldid"],[1,"slds-form-element__control",3,"ngClass"],[3,"ngModel","ngModelChange","details"],["focus",""],[3,"fieldname"]],template:function(e,t){1&e&&d.DNE(0,Ec,1,2,"field-label",0)(1,Lc,2,6,"field-generic-display",1)(2,Dc,4,3,"div",2),2&e&&(d.Y8G("ngIf",t.displayLabel),d.R7$(),d.Y8G("ngIf",!t.isEditMode()),d.R7$(),d.Y8G("ngIf",t.isEditable()&&t.isEditMode()))},dependencies:[i.YU,i.bT,n.BC,n.vS,Sc.P,u.b,j.K,D.A],encapsulation:2})}return fieldGooglePlacesSearch})();function Mc(e,t){if(1&e&&d.nrm(0,"field-label",2),2&e){const e=d.XpG();d.Y8G("fieldname",e.fieldname)("fieldconfig",e.fieldconfig)}}let Tc=(()=>{class fieldTextID extends r.s{constructor(e,t,s,i,n,l){super(e,t,s,i,l),this.model=e,this.view=t,this.language=s,this.metadata=i,this.configurationService=n,this.router=l}get textName(){let e=this.configurationService.getData("systextids"),t=e?e[this.value]:void 0;return t&&t.label?this.language.getLabel(t.label):this.value}static#e=this.ɵfac=function(e){return new(e||fieldTextID)(d.rXU(R.g),d.rXU(G.U),d.rXU(k.B),d.rXU(c.yu),d.rXU(ie.i),d.rXU(C.Ix))};static#t=this.ɵcmp=d.VBU({type:fieldTextID,selectors:[["field-textid"]],features:[d.Vt3],decls:3,vars:7,consts:[[3,"fieldname","fieldconfig",4,"ngIf"],[3,"editable","fielddisplayclass","fieldconfig","title","fieldid"],[3,"fieldname","fieldconfig"]],template:function(e,t){1&e&&(d.DNE(0,Mc,1,2,"field-label",0),d.j41(1,"field-generic-display",1),d.EFF(2),d.k0s()),2&e&&(d.Y8G("ngIf",t.displayLabel),d.R7$(),d.Y8G("editable",!1)("fielddisplayclass",t.fielddisplayclass)("fieldconfig",t.fieldconfig)("title",t.value)("fieldid",t.fieldid),d.R7$(),d.SpI(" ",t.textName,"\n"))},dependencies:[i.bT,u.b,j.K],encapsulation:2})}return fieldTextID})();var Bc=s(41239);function $c(e,t){if(1&e&&(d.j41(0,"field-generic-display",2),d.EFF(1),d.k0s()),2&e){const e=d.XpG();d.Y8G("fielddisplayclass",e.fielddisplayclass)("editable",e.isEditable())("fieldconfig",e.fieldconfig)("title",e.value)("fieldid",e.fieldid),d.R7$(),d.Lme(" ",e.className,"->",e.methodName,"\n")}}function Oc(e,t){if(1&e){const e=d.RV6();d.j41(0,"div",3)(1,"system-input-backend-method",4),d.mxI("ngModelChange",(function(t){d.eBV(e);const s=d.XpG();return d.DH7(s.value,t)||(s.value=t),d.Njj(t)})),d.k0s(),d.nrm(2,"field-messages",5),d.k0s()}if(2&e){const e=d.XpG();d.Y8G("ngClass",e.css_classes),d.R7$(),d.R50("ngModel",e.value),d.R7$(),d.Y8G("fieldname",e.fieldname)}}let Xc=(()=>{class fieldBackendMethod extends r.s{constructor(e,t,s,i,n){super(e,t,s,i,n),this.model=e,this.view=t,this.language=s,this.metadata=i,this.router=n,this.classexists=!1,this.publicMethods=[]}get className(){return this.value?this.value.split("->")[0]:""}set className(e){this.value=e,this.validateNamespace()}get methodName(){if(this.value){if(2==this.value.split("->").length)return this.value.split("->")[1]}return""}set methodName(e){let t=this.value.split("->");this.value=t[0]+"->"+e}validateNamespace(){this.model.backend.getRequest("system/checkclass/"+btoa(this.className)).subscribe((e=>{this.classexists=e.classexists,this.publicMethods=e.methods}))}static#e=this.ɵfac=function(e){return new(e||fieldBackendMethod)(d.rXU(R.g),d.rXU(G.U),d.rXU(k.B),d.rXU(c.yu),d.rXU(C.Ix))};static#t=this.ɵcmp=d.VBU({type:fieldBackendMethod,selectors:[["field-backend-method"]],features:[d.Vt3],decls:2,vars:2,consts:[[3,"fielddisplayclass","editable","fieldconfig","title","fieldid",4,"ngIf"],["class","slds-form-element__control slds-p-around--xx-small",3,"ngClass",4,"ngIf"],[3,"fielddisplayclass","editable","fieldconfig","title","fieldid"],[1,"slds-form-element__control","slds-p-around--xx-small",3,"ngClass"],[3,"ngModel","ngModelChange"],[3,"fieldname"]],template:function(e,t){1&e&&d.DNE(0,$c,2,7,"field-generic-display",0)(1,Oc,3,3,"div",1),2&e&&(d.Y8G("ngIf",!t.isEditMode()),d.R7$(),d.Y8G("ngIf",t.isEditable()&&t.isEditMode()))},dependencies:[i.YU,i.bT,n.BC,n.vS,Bc.H,j.K,D.A],encapsulation:2})}return fieldBackendMethod})();var Uc=s(6764);function Yc(e,t){if(1&e&&(d.qex(0),d.nrm(1,"system-label",5),d.bVm()),2&e){const e=d.XpG(2);d.R7$(),d.Y8G("label",e.value)}}function Nc(e,t){if(1&e&&d.EFF(0),2&e){const e=d.XpG(2);d.SpI(" ",e.value," ")}}function Vc(e,t){if(1&e&&(d.j41(0,"field-generic-display",2),d.DNE(1,Yc,2,1,"ng-container",3)(2,Nc,1,1,"ng-template",null,4,d.C5r),d.k0s()),2&e){const e=d.sdS(3),t=d.XpG();d.Y8G("fielddisplayclass",t.fielddisplayclass)("editable",t.isEditable())("fieldconfig",t.fieldconfig)("title",t.value)("fieldid",t.fieldid),d.R7$(),d.Y8G("ngIf",t.fieldconfig.display_as_translated)("ngIfElse",e)}}function Ac(e,t){if(1&e){const e=d.RV6();d.j41(0,"div",6)(1,"system-input-label",7),d.mxI("ngModelChange",(function(t){d.eBV(e);const s=d.XpG();return d.DH7(s.value,t)||(s.value=t),d.Njj(t)})),d.k0s(),d.nrm(2,"field-messages",8),d.k0s()}if(2&e){const e=d.XpG();d.Y8G("ngClass",e.css_classes),d.R7$(),d.R50("ngModel",e.value),d.R7$(),d.Y8G("fieldname",e.fieldname)}}let Pc=(()=>{class fieldSystemLabel extends r.s{static#e=this.ɵfac=(()=>{let e;return function(t){return(e||(e=d.xGo(fieldSystemLabel)))(t||fieldSystemLabel)}})();static#t=this.ɵcmp=d.VBU({type:fieldSystemLabel,selectors:[["field-system-label"]],features:[d.Vt3],decls:2,vars:2,consts:[[3,"fielddisplayclass","editable","fieldconfig","title","fieldid",4,"ngIf"],["class","slds-form-element__control",3,"ngClass",4,"ngIf"],[3,"fielddisplayclass","editable","fieldconfig","title","fieldid"],[4,"ngIf","ngIfElse"],["labelContainer",""],[3,"label"],[1,"slds-form-element__control",3,"ngClass"],[3,"ngModel","ngModelChange"],[3,"fieldname"]],template:function(e,t){1&e&&d.DNE(0,Vc,4,7,"field-generic-display",0)(1,Ac,3,3,"div",1),2&e&&(d.Y8G("ngIf",!t.isEditMode()),d.R7$(),d.Y8G("ngIf",t.isEditable()&&t.isEditMode()))},dependencies:[i.YU,i.bT,n.BC,n.vS,Uc.w,le.W,j.K,D.A],encapsulation:2})}return fieldSystemLabel})();function zc(e,t){if(1&e&&(d.j41(0,"field-generic-display",2),d.EFF(1),d.k0s()),2&e){const e=d.XpG();d.Y8G("fielddisplayclass",e.fielddisplayclass)("editable",e.isEditable())("fieldconfig",e.fieldconfig)("title",e.value)("fieldid",e.fieldid),d.R7$(),d.SpI(" ",e.value,"\n")}}function Hc(e,t){if(1&e){const e=d.RV6();d.j41(0,"div",3)(1,"div",4)(2,"input",5,6),d.mxI("ngModelChange",(function(t){d.eBV(e);const s=d.XpG();return d.DH7(s.timedifferencespan,t)||(s.timedifferencespan=t),d.Njj(t)})),d.k0s(),d.j41(4,"div",7)(5,"select",8),d.mxI("ngModelChange",(function(t){d.eBV(e);const s=d.XpG();return d.DH7(s.timedifferenceunit,t)||(s.timedifferenceunit=t),d.Njj(t)})),d.j41(6,"option",9),d.nrm(7,"system-label",10),d.k0s(),d.j41(8,"option",11),d.nrm(9,"system-label",12),d.k0s(),d.j41(10,"option",13),d.nrm(11,"system-label",14),d.k0s(),d.j41(12,"option",15),d.nrm(13,"system-label",16),d.k0s(),d.j41(14,"option",17),d.nrm(15,"system-label",18),d.k0s(),d.j41(16,"option",19),d.nrm(17,"system-label",20),d.k0s(),d.j41(18,"option",21),d.nrm(19,"system-label",22),d.k0s(),d.j41(20,"option",23),d.nrm(21,"system-label",24),d.k0s()()()(),d.nrm(22,"field-messages",25),d.k0s()}if(2&e){const e=d.XpG();d.Y8G("ngClass",e.css_classes),d.R7$(2),d.R50("ngModel",e.timedifferencespan),d.Y8G("maxlength",e.fieldlength)("ngModelOptions",e.modelOptions),d.R7$(3),d.R50("ngModel",e.timedifferenceunit),d.R7$(17),d.Y8G("fieldname",e.fieldname)}}let qc=(()=>{class fieldTimeDifference extends r.s{constructor(e,t,s,i,n){super(e,t,s,i,n),this.model=e,this.view=t,this.language=s,this.metadata=i,this.router=n}get timedifferenceunit(){return this._timedifferenceunit?this._timedifferenceunit:this.value?this.value.split(" ")[1]:"h"}set timedifferenceunit(e){this._timedifferenceunit=e,this.updateModel()}get timedifferencespan(){return this._timedifferencespan?this._timedifferencespan:this.value?this.value.split(" ")[0]:""}set timedifferencespan(e){this._timedifferencespan=e,this.updateModel()}updateModel(){this._timedifferencespan>0&&this.timedifferenceunit?this.value=this.timedifferencespan+" "+this._timedifferenceunit:this.value=""}static#e=this.ɵfac=function(e){return new(e||fieldTimeDifference)(d.rXU(R.g),d.rXU(G.U),d.rXU(k.B),d.rXU(c.yu),d.rXU(C.Ix))};static#t=this.ɵcmp=d.VBU({type:fieldTimeDifference,selectors:[["field-time-difference"]],features:[d.Vt3],decls:2,vars:2,consts:[[3,"fielddisplayclass","editable","fieldconfig","title","fieldid",4,"ngIf"],["class","slds-form-element__control slds-p-around--xx-small",3,"ngClass",4,"ngIf"],[3,"fielddisplayclass","editable","fieldconfig","title","fieldid"],[1,"slds-form-element__control","slds-p-around--xx-small",3,"ngClass"],[1,"slds-grid","slds-grid--vertical-align-center","slds-gutters_direct-xx-small"],["type","number",1,"slds-col","slds-size--1-of-2","slds-input","slds-text-align--right",3,"ngModel","maxlength","ngModelOptions","ngModelChange"],["focus",""],[1,"slds-col","slds-size--1-of-2","slds-select_container"],[1,"slds-select",3,"ngModel","ngModelChange"],["value","i"],["label","LBL_MINUTES"],["value","h"],["label","LBL_HOURS"],["value","H"],["label","LBL_WORKINGHOURS"],["value","d"],["label","LBL_DAYS"],["value","D"],["label","LBL_WORKINGDAYS"],["value","w"],["label","LBL_WEEKS"],["value","M"],["label","LBL_MONTHS"],["value","y"],["label","LBL_YEARS"],[3,"fieldname"]],template:function(e,t){1&e&&d.DNE(0,zc,2,6,"field-generic-display",0)(1,Hc,23,6,"div",1),2&e&&(d.Y8G("ngIf",!t.isEditMode()),d.R7$(),d.Y8G("ngIf",t.isEditable()&&t.isEditMode()))},dependencies:[i.YU,i.bT,n.xH,n.y7,n.me,n.Q0,n.wz,n.BC,n.tU,n.vS,le.W,j.K,D.A],encapsulation:2})}return fieldTimeDifference})(),Jc=(()=>{class fieldIconPopover extends r.s{constructor(e,t,s,i,n,l,o){super(e,t,i,n,l),this.model=e,this.view=t,this.broadcast=s,this.language=i,this.metadata=n,this.router=l,this.elementRef=o,this.parentTypeSelectOpen=!1,this.parentSearchOpen=!1,this.parentSearchTerm="",this.recentItems=[],this.broadcast.message$.subscribe((e=>this.handleMessage(e)))}get parentField(){return this.model.getField("grpaccount_id")}get parentIdField(){return this.fieldconfig.parentIdField?this.fieldconfig.parentIdField:"parent_id"}get memberCount(){return this.model.getField("grp_member_count")}get parentTypes(){let e=["Contacts","Accounts","Leads"];return this.fieldconfig.parenttypes&&(e=this.fieldconfig.parenttypes.replace(/\s/g,"").split(",")),e}handleMessage(e){if(e.messagedata.reference&&"model.save"===e.messagetype)if(this.fieldid===e.messagedata.reference){this.parentSearchTerm="";let t={};t[this.parentIdField]=e.messagedata.data.id,t[this.fieldname]=e.messagedata.data.summary_text,this.model.setFields(t)}}onClick(e){this.elementRef.nativeElement.contains(e.target)||this.closePopups()}closePopups(){this.model.getField(this.parentIdField)&&(this.parentSearchTerm=""),this.parentSearchOpen=!1,this.parentTypeSelectOpen=!1,this.clickListener()}static#e=this.ɵfac=function(e){return new(e||fieldIconPopover)(d.rXU(R.g),d.rXU(G.U),d.rXU(se.m),d.rXU(k.B),d.rXU(c.yu),d.rXU(C.Ix),d.rXU(d.aKT))};static#t=this.ɵcmp=d.VBU({type:fieldIconPopover,selectors:[["field-icon-popover"]],features:[d.Vt3],decls:3,vars:3,consts:[[3,"fielddisplayclass","editable","fieldconfig"],["system-model-popover",""],["size","x-small","icon","info"]],template:function(e,t){1&e&&(d.j41(0,"field-generic-display",0)(1,"div",1),d.nrm(2,"system-utility-icon",2),d.k0s()()),2&e&&d.Y8G("fielddisplayclass",t.fielddisplayclass)("editable",!1)("fieldconfig",t.fieldconfig)},dependencies:[E.B,ks.j,j.K],encapsulation:2})}return fieldIconPopover})();function Wc(e,t){if(1&e&&d.nrm(0,"field-label",3),2&e){const e=d.XpG();d.Y8G("fieldname",e.fieldname)("fieldconfig",e.fieldconfig)}}function Kc(e,t){if(1&e&&(d.j41(0,"field-generic-display",4),d.EFF(1),d.k0s()),2&e){const e=d.XpG();d.Y8G("fielddisplayclass",e.fielddisplayclass)("editable",e.isEditable())("fieldconfig",e.fieldconfig)("fieldid",e.fieldid),d.R7$(),d.SpI(" ",e.getValue(),"\n")}}function Qc(e,t){if(1&e&&(d.j41(0,"option",13),d.EFF(1),d.k0s()),2&e){const e=t.$implicit;d.FS9("value",e.id),d.R7$(),d.JRh(e.name)}}function Zc(e,t){if(1&e){const e=d.RV6();d.j41(0,"div",5)(1,"div",6)(2,"div",7)(3,"select",8,9),d.mxI("ngModelChange",(function(t){d.eBV(e);const s=d.XpG();return d.DH7(s.value,t)||(s.value=t),d.Njj(t)})),d.nrm(5,"option",10),d.DNE(6,Qc,2,2,"option",11),d.k0s()(),d.nrm(7,"field-messages",12),d.k0s()()}if(2&e){const e=d.XpG();d.R7$(),d.Y8G("ngClass",e.getFieldClass()),d.R7$(2),d.R50("ngModel",e.value),d.R7$(3),d.Y8G("ngForOf",e.stylesheets),d.R7$(),d.Y8G("fieldname",e.fieldname)}}let eu=(()=>{class fieldStylesheetID extends r.s{constructor(e,t,s,i,n){super(e,t,s,i,n),this.model=e,this.view=t,this.language=s,this.metadata=i,this.router=n,this.stylesheets=[],this.stylesheets=this.metadata.getHtmlStylesheetNames()}getValue(){if(this.value){let e=this.stylesheets.find((e=>e.id==this.value));if(e)return e.name}return this.value}static#e=this.ɵfac=function(e){return new(e||fieldStylesheetID)(d.rXU(R.g),d.rXU(G.U),d.rXU(k.B),d.rXU(c.yu),d.rXU(C.Ix))};static#t=this.ɵcmp=d.VBU({type:fieldStylesheetID,selectors:[["field-stylesheetid"]],features:[d.Vt3],decls:3,vars:3,consts:[[3,"fieldname","fieldconfig",4,"ngIf"],[3,"fielddisplayclass","editable","fieldconfig","fieldid",4,"ngIf"],["class","slds-form-element",4,"ngIf"],[3,"fieldname","fieldconfig"],[3,"fielddisplayclass","editable","fieldconfig","fieldid"],[1,"slds-form-element"],[1,"slds-form-element__control",3,"ngClass"],[1,"slds-select_container","slds-m-vertical--xx-small"],[1,"slds-select",3,"ngModel","ngModelChange"],["focus",""],["value",""],[3,"value",4,"ngFor","ngForOf"],[3,"fieldname"],[3,"value"]],template:function(e,t){1&e&&d.DNE(0,Wc,1,2,"field-label",0)(1,Kc,2,5,"field-generic-display",1)(2,Zc,8,4,"div",2),2&e&&(d.Y8G("ngIf",t.displayLabel),d.R7$(),d.Y8G("ngIf",!t.isEditMode()),d.R7$(),d.Y8G("ngIf",t.isEditMode()))},dependencies:[i.YU,i.Sq,i.bT,n.xH,n.y7,n.wz,n.BC,n.vS,u.b,j.K,D.A],encapsulation:2})}return fieldStylesheetID})();var tu=s(19923);function su(e,t){if(1&e&&d.nrm(0,"field-label",3),2&e){const e=d.XpG();d.Y8G("fieldname",e.fieldname)("fieldconfig",e.fieldconfig)}}function iu(e,t){if(1&e&&(d.j41(0,"field-generic-display",4),d.EFF(1),d.k0s()),2&e){const e=d.XpG();d.Y8G("fielddisplayclass",e.fielddisplayclass)("fieldconfig",e.fieldconfig)("editable",e.isEditable()),d.R7$(),d.SpI(" ",e.getUOMLabel(),"\n")}}function nu(e,t){if(1&e){const e=d.RV6();d.j41(0,"div",5)(1,"system-select-uom",6),d.mxI("ngModelChange",(function(t){d.eBV(e);const s=d.XpG();return d.DH7(s.value,t)||(s.value=t),d.Njj(t)})),d.k0s(),d.nrm(2,"field-messages",7),d.k0s()}if(2&e){const e=d.XpG();d.Y8G("ngClass",e.getFieldClass()),d.R7$(),d.R50("ngModel",e.value),d.R7$(),d.Y8G("fieldname",e.fieldname)}}let lu=(()=>{class fieldUnitsOfMeasure extends r.s{constructor(e,t,s,i,n,l){super(e,t,s,i,n),this.model=e,this.view=t,this.language=s,this.metadata=i,this.router=n,this.configuration=l,this.uoms=[],this.uoms=this.configuration.getData("uomunits")}getUOMLabel(){if(this.value){let e=this.uoms.find((e=>e.id==this.value));if(e)return this.language.getLabel(e.label)}return this.value}static#e=this.ɵfac=function(e){return new(e||fieldUnitsOfMeasure)(d.rXU(R.g),d.rXU(G.U),d.rXU(k.B),d.rXU(c.yu),d.rXU(C.Ix),d.rXU(ie.i))};static#t=this.ɵcmp=d.VBU({type:fieldUnitsOfMeasure,selectors:[["field-units-of-measure"]],features:[d.Vt3],decls:3,vars:3,consts:[[3,"fieldname","fieldconfig",4,"ngIf"],[3,"fielddisplayclass","fieldconfig","editable",4,"ngIf"],["class","slds-form-element__control",3,"ngClass",4,"ngIf"],[3,"fieldname","fieldconfig"],[3,"fielddisplayclass","fieldconfig","editable"],[1,"slds-form-element__control",3,"ngClass"],[3,"ngModel","ngModelChange"],[3,"fieldname"]],template:function(e,t){1&e&&d.DNE(0,su,1,2,"field-label",0)(1,iu,2,4,"field-generic-display",1)(2,nu,3,3,"div",2),2&e&&(d.Y8G("ngIf",t.displayLabel),d.R7$(),d.Y8G("ngIf",!t.isEditMode()),d.R7$(),d.Y8G("ngIf",t.isEditable()&&t.isEditMode()))},dependencies:[i.YU,i.bT,n.BC,n.vS,tu.$,u.b,j.K,D.A],encapsulation:2})}return fieldUnitsOfMeasure})();function ou(e,t){if(1&e&&d.nrm(0,"field-label",3),2&e){const e=d.XpG();d.Y8G("fieldname",e.fieldname)("fieldconfig",e.fieldconfig)}}function au(e,t){if(1&e){const e=d.RV6();d.j41(0,"field-generic-display",4)(1,"div",5)(2,"div",6),d.nrm(3,"system-display-number",7),d.k0s(),d.j41(4,"system-select-uom",8),d.mxI("ngModelChange",(function(t){d.eBV(e);const s=d.XpG();return d.DH7(s.uomid,t)||(s.uomid=t),d.Njj(t)})),d.k0s()()()}if(2&e){const e=d.XpG();d.Y8G("fielddisplayclass",e.fielddisplayclass)("fieldconfig",e.fieldconfig)("editable",e.isEditable()),d.R7$(3),d.Y8G("number",e.value)("precision",e.precision),d.R7$(),d.Y8G("disabled",!0),d.R50("ngModel",e.uomid)}}function ru(e,t){if(1&e){const e=d.RV6();d.j41(0,"div",9)(1,"div",10)(2,"div",11)(3,"system-input-number",12),d.mxI("ngModelChange",(function(t){d.eBV(e);const s=d.XpG();return d.DH7(s.value,t)||(s.value=t),d.Njj(t)})),d.k0s()(),d.j41(4,"system-select-uom",13),d.mxI("ngModelChange",(function(t){d.eBV(e);const s=d.XpG();return d.DH7(s.uomid,t)||(s.uomid=t),d.Njj(t)})),d.k0s()(),d.nrm(5,"field-messages",14),d.k0s()}if(2&e){const e=d.XpG();d.Y8G("ngClass",e.getFieldClass()),d.R7$(3),d.R50("ngModel",e.value),d.Y8G("asNumber",!0)("precision",e.precision),d.R7$(),d.R50("ngModel",e.uomid),d.R7$(),d.Y8G("fieldname",e.fieldname)}}let du=(()=>{class fieldQuantity extends Ee{constructor(e,t,s,i,n,l,o){super(e,t,s,i,n,l),this.model=e,this.view=t,this.language=s,this.metadata=i,this.router=n,this.userpreferences=l,this.configuration=o,this.uoms=[],this.uoms=this.configuration.getData("uomunits")}get uomidfield(){return this.fieldconfig.uomid_field?this.fieldconfig.uomid_field:this.metadata.getModuleFields(this.model.module).uom_id?"uom_id":void 0}get uomid(){return this.model.getField(this.uomidfield)}set uomid(e){this.model.setField(this.uomidfield,e)}get uomLabel(){if(this.value){let e=this.uoms.find((e=>e.id==this.uomid));return e?this.language.getLabel(e.label):this.uomid}return""}static#e=this.ɵfac=function(e){return new(e||fieldQuantity)(d.rXU(R.g),d.rXU(G.U),d.rXU(k.B),d.rXU(c.yu),d.rXU(C.Ix),d.rXU(xe.S),d.rXU(ie.i))};static#t=this.ɵcmp=d.VBU({type:fieldQuantity,selectors:[["field-quantity"]],features:[d.Vt3],decls:3,vars:3,consts:[[3,"fieldname","fieldconfig",4,"ngIf"],[3,"fielddisplayclass","fieldconfig","editable",4,"ngIf"],["class","slds-form-element__control",3,"ngClass",4,"ngIf"],[3,"fieldname","fieldconfig"],[3,"fielddisplayclass","fieldconfig","editable"],[1,"slds-grid","slds-grid_vertical-align-center","slds-text-align_right"],[1,"slds-form-element","slds-size--1-of-2"],[3,"number","precision"],[1,"slds-size--1-of-2","slds-p-left--x-small",3,"disabled","ngModel","ngModelChange"],[1,"slds-form-element__control",3,"ngClass"],[1,"slds-grid","slds-grid--align-spread","slds-grid--vertical-align-center"],[1,"slds-form-element","slds-size--2-of-3"],[3,"ngModel","asNumber","precision","ngModelChange"],[1,"slds-size--1-of-3","slds-p-left--x-small",3,"ngModel","ngModelChange"],[3,"fieldname"]],template:function(e,t){1&e&&d.DNE(0,ou,1,2,"field-label",0)(1,au,5,7,"field-generic-display",1)(2,ru,6,6,"div",2),2&e&&(d.Y8G("ngIf",t.displayLabel),d.R7$(),d.Y8G("ngIf",!t.isEditMode()),d.R7$(),d.Y8G("ngIf",t.isEditable()&&t.isEditMode()))},dependencies:[i.YU,i.bT,n.BC,n.vS,je.B,Ge.N,tu.$,u.b,j.K,D.A],encapsulation:2})}return fieldQuantity})();function cu(e,t){if(1&e&&d.nrm(0,"field-label",3),2&e){const e=d.XpG();d.Y8G("fieldname",e.fieldname)("fieldconfig",e.fieldconfig)}}function uu(e,t){1&e&&(d.j41(0,"span"),d.EFF(1," • "),d.k0s())}function mu(e,t){if(1&e&&(d.j41(0,"span"),d.EFF(1),d.DNE(2,uu,2,0,"span",2),d.k0s()),2&e){const e=t.$implicit,s=t.last;d.R7$(),d.Lme("",e.name,": ",e.value,""),d.R7$(),d.Y8G("ngIf",!s)}}function hu(e,t){if(1&e&&(d.j41(0,"span"),d.DNE(1,mu,3,3,"span",4),d.k0s()),2&e){const e=d.XpG();d.R7$(),d.Y8G("ngForOf",e.categories)}}function gu(e,t){1&e&&(d.j41(0,"span")(1,"i"),d.nrm(2,"system-label",5),d.k0s()())}let pu=(()=>{class fieldQuestionnaireEvaluation extends r.s{constructor(e,t,s,i,n,l){super(e,t,s,i,n),this.model=e,this.view=t,this.language=s,this.metadata=i,this.router=n,this.backend=l,this.categories=[],this.isEvaluationAvailable=!1}ngOnInit(){super.ngOnInit();let e=this.model.getRelatedRecords("questionnaireevaluation");if(e&&e[0]&&e[0].questionnaireevaluationitems&&e[0].questionnaireevaluationitems.beans){e[0].questionnaireevaluationitems.beans;for(let t in e[0].questionnaireevaluationitems.beans)this.categories.push(e[0].questionnaireevaluationitems.beans[t]);this.isEvaluationAvailable=!0}}static#e=this.ɵfac=function(e){return new(e||fieldQuestionnaireEvaluation)(d.rXU(R.g),d.rXU(G.U),d.rXU(k.B),d.rXU(c.yu),d.rXU(C.Ix),d.rXU(ee.H))};static#t=this.ɵcmp=d.VBU({type:fieldQuestionnaireEvaluation,selectors:[["field-questionnaire-evaluation"]],features:[d.Vt3],decls:4,vars:7,consts:[[3,"fieldname","fieldconfig",4,"ngIf"],[3,"fielddisplayclass","editable","fieldconfig","fieldid"],[4,"ngIf"],[3,"fieldname","fieldconfig"],[4,"ngFor","ngForOf"],["label","LBL_NO_EVALUATION_AVAILABLE"]],template:function(e,t){1&e&&(d.DNE(0,cu,1,2,"field-label",0),d.j41(1,"field-generic-display",1),d.DNE(2,hu,2,1,"span",2)(3,gu,3,0,"span",2),d.k0s()),2&e&&(d.Y8G("ngIf",t.displayLabel),d.R7$(),d.Y8G("fielddisplayclass",t.fielddisplayclass)("editable",!1)("fieldconfig",t.fieldconfig)("fieldid",t.fieldid),d.R7$(),d.Y8G("ngIf",t.isEvaluationAvailable),d.R7$(),d.Y8G("ngIf",!t.isEvaluationAvailable))},dependencies:[i.Sq,i.bT,le.W,u.b,j.K],encapsulation:2})}return fieldQuestionnaireEvaluation})();var fu=s(31033);function bu(e,t){if(1&e&&d.nrm(0,"field-label",3),2&e){const e=d.XpG();d.Y8G("fieldname",e.fieldname)("fieldconfig",e.fieldconfig)}}function yu(e,t){if(1&e&&(d.j41(0,"field-generic-display",4),d.EFF(1),d.k0s()),2&e){const e=d.XpG();d.Y8G("fielddisplayclass",e.fielddisplayclass)("editable",e.isEditable())("fieldconfig",e.fieldconfig),d.R7$(),d.SpI(" ",e.displayTags,"\n")}}function vu(e,t){if(1&e){const e=d.RV6();d.j41(0,"li")(1,"span",15),d.EFF(2),d.j41(3,"span",16),d.bIt("click",(function(){const t=d.eBV(e).index,s=d.XpG(3);return d.Njj(s.removeByIndex(t))})),d.nrm(4,"system-utility-icon",17),d.k0s()()()}if(2&e){const e=t.$implicit;d.R7$(2),d.SpI(" ",e," ")}}function _u(e,t){if(1&e&&(d.j41(0,"ul",13),d.DNE(1,vu,5,1,"li",14),d.k0s()),2&e){const e=d.XpG(2);d.R7$(),d.Y8G("ngForOf",e.objecttags)}}function ku(e,t){1&e&&(d.j41(0,"div",18),d.nrm(1,"system-label",19),d.k0s())}function Ru(e,t){if(1&e){const e=d.RV6();d.j41(0,"div",5)(1,"div",6)(2,"div",7),d.DNE(3,_u,2,1,"ul",8)(4,ku,2,0,"div",9),d.k0s(),d.j41(5,"div",10)(6,"system-input-tags",11),d.bIt("tagemitter",(function(t){d.eBV(e);const s=d.XpG();return d.Njj(s.addTag(t))})),d.k0s()()(),d.nrm(7,"field-messages",12),d.k0s()}if(2&e){const e=d.XpG();d.Y8G("ngClass",e.css_classes),d.R7$(3),d.Y8G("ngIf",e.objecttags.length),d.R7$(),d.Y8G("ngIf",!e.objecttags.length),d.R7$(3),d.Y8G("fieldname",e.fieldname)}}let Iu=(()=>{class fieldTags extends r.s{constructor(e,t,s,i,n){super(e,t,s,i,n),this.model=e,this.view=t,this.language=s,this.metadata=i,this.router=n}get displayTags(){let e,t=this.model.getField(this.fieldname);if(!t)return"";try{e=JSON.parse(t)}catch(e){return""}return e.join(", ")}get objecttags(){let e=this.model.getField("tags");if(!e||""===e)return[];try{return JSON.parse(e)}catch(e){return[]}}removeByIndex(e){let t=this.objecttags;t.splice(e,1),this.model.setField("tags",JSON.stringify(t))}addTag(e){if(""!==e){let t=this.objecttags;t.push(e),this.model.setField("tags",JSON.stringify(t))}}static#e=this.ɵfac=function(e){return new(e||fieldTags)(d.rXU(R.g),d.rXU(G.U),d.rXU(k.B),d.rXU(c.yu),d.rXU(C.Ix))};static#t=this.ɵcmp=d.VBU({type:fieldTags,selectors:[["field-tags"]],features:[d.Vt3],decls:3,vars:3,consts:[[3,"fieldname","fieldconfig",4,"ngIf"],[3,"fielddisplayclass","editable","fieldconfig",4,"ngIf"],["class","slds-form-element__control slds-p-around--xx-small",3,"ngClass",4,"ngIf"],[3,"fieldname","fieldconfig"],[3,"fielddisplayclass","editable","fieldconfig"],[1,"slds-form-element__control","slds-p-around--xx-small",3,"ngClass"],[1,"slds-grid","slds-grid--vertical-align-end"],[1,"slds-size--2-of-3"],["class","spice-taglist",4,"ngIf"],["style","font-style:italic",4,"ngIf"],[1,"slds-size--1-of-3","slds-p-left--x-small"],[3,"tagemitter"],[3,"fieldname"],[1,"spice-taglist"],[4,"ngFor","ngForOf"],[1,"slds-badge"],[1,"slds-badge__icon","slds-badge__icon_right",3,"click"],["icon","close","size","xx-small"],[2,"font-style","italic"],["label","LBL_NO_TAGS_ASSIGNED"]],template:function(e,t){1&e&&d.DNE(0,bu,1,2,"field-label",0)(1,yu,2,4,"field-generic-display",1)(2,Ru,8,4,"div",2),2&e&&(d.Y8G("ngIf",t.displayLabel),d.R7$(),d.Y8G("ngIf",!t.isEditMode()),d.R7$(),d.Y8G("ngIf",t.isEditable()&&t.isEditMode()))},dependencies:[i.YU,i.Sq,i.bT,fu.j,le.W,E.B,u.b,j.K,D.A],encapsulation:2})}return fieldTags})();var xu=s(60595);let ju=(()=>{class fieldRelatedDetailsContainer{constructor(e,t){this.model=e,this.view=t}ngOnChanges(e){this.module==this.model.module&&this.id==this.model.id||(this.model.module=this.module,this.model.id=this.id,this.model.getData(!0))}static#e=this.ɵfac=function(e){return new(e||fieldRelatedDetailsContainer)(d.rXU(R.g),d.rXU(G.U))};static#t=this.ɵcmp=d.VBU({type:fieldRelatedDetailsContainer,selectors:[["field-related-details-container"]],inputs:{module:"module",id:"id",componentset:"componentset"},features:[d.Jv_([R.g,G.U]),d.OA$],decls:1,vars:1,consts:[[3,"componentset"]],template:function(e,t){1&e&&d.nrm(0,"system-componentset",0),2&e&&d.Y8G("componentset",t.componentset)},dependencies:[xu.F],encapsulation:2})}return fieldRelatedDetailsContainer})();function Gu(e,t){if(1&e&&d.nrm(0,"field-label",5),2&e){const e=d.XpG(2);d.Y8G("fieldname",e.fieldname)("fieldconfig",e.fieldconfig)}}function Cu(e,t){if(1&e&&d.nrm(0,"field-related-details-container",6),2&e){const e=d.XpG(2);d.Y8G("module",e.module)("componentset",e.componentset)("id",e.parentId)}}function wu(e,t){if(1&e&&(d.j41(0,"div",1)(1,"div",2),d.DNE(2,Gu,1,2,"field-label",3),d.k0s(),d.DNE(3,Cu,1,3,"field-related-details-container",4),d.k0s()),2&e){const e=d.XpG();d.Y8G("ngClass",e.getClass()),d.R7$(2),d.Y8G("ngIf",e.displayLabel),d.R7$(),d.Y8G("ngIf",e.parentId)}}let Su=(()=>{class fieldParentDetails extends r.s{constructor(e,t,s,i,n){super(e,t,s,i,n),this.model=e,this.view=t,this.language=s,this.metadata=i,this.router=n,this.parentDefs={}}ngOnInit(){super.ngOnInit(),this.getParentDefinition()}get module(){return this.fieldconfig.module}get componentset(){return this.fieldconfig.componentset}get display(){return this.parentId&&this.module==this.parentModule}get parentModule(){return this.parentDefs?.type_name?this.model.getField(this.parentDefs.type_name):void 0}get parentId(){return this.parentDefs?.id_name?this.model.getField(this.parentDefs.id_name):void 0}getParentDefinition(){this.parentDefs=this.metadata.getFieldDefs(this.model.module,this.fieldname)}getClass(){let e=[];return this.fieldconfig.cssclass?e.push(this.fieldconfig.cssclass):e.push("slds-box--border"),e}static#e=this.ɵfac=function(e){return new(e||fieldParentDetails)(d.rXU(R.g),d.rXU(G.U),d.rXU(k.B),d.rXU(c.yu),d.rXU(C.Ix))};static#t=this.ɵcmp=d.VBU({type:fieldParentDetails,selectors:[["ng-component"]],features:[d.Vt3],decls:1,vars:1,consts:[[3,"ngClass",4,"ngIf"],[3,"ngClass"],[1,"slds-p-around--xx-small","slds-text-heading--label"],[3,"fieldname","fieldconfig",4,"ngIf"],[3,"module","componentset","id",4,"ngIf"],[3,"fieldname","fieldconfig"],[3,"module","componentset","id"]],template:function(e,t){1&e&&d.DNE(0,wu,4,3,"div",0),2&e&&d.Y8G("ngIf",t.display)},dependencies:[i.YU,i.bT,u.b,ju],encapsulation:2})}return fieldParentDetails})();function Eu(e,t){if(1&e&&d.nrm(0,"field-label",3),2&e){const e=d.XpG();d.Y8G("fieldname",e.fieldname)("fieldconfig",e.fieldconfig)}}function Lu(e,t){if(1&e&&d.nrm(0,"field-related-details-container",4),2&e){const e=d.XpG();d.Y8G("module",e.module)("componentset",e.componentset)("id",e.value)}}let Du=(()=>{class fieldRelatedDetails extends r.s{constructor(e,t,s,i,n){super(e,t,s,i,n),this.model=e,this.view=t,this.language=s,this.metadata=i,this.router=n}get module(){return this.fieldconfig.module}get componentset(){return this.fieldconfig.componentset}static#e=this.ɵfac=function(e){return new(e||fieldRelatedDetails)(d.rXU(R.g),d.rXU(G.U),d.rXU(k.B),d.rXU(c.yu),d.rXU(C.Ix))};static#t=this.ɵcmp=d.VBU({type:fieldRelatedDetails,selectors:[["ng-component"]],features:[d.Vt3],decls:3,vars:2,consts:[[1,"slds-box--border"],[3,"fieldname","fieldconfig",4,"ngIf"],[3,"module","componentset","id",4,"ngIf"],[3,"fieldname","fieldconfig"],[3,"module","componentset","id"]],template:function(e,t){1&e&&(d.j41(0,"div",0),d.DNE(1,Eu,1,2,"field-label",1)(2,Lu,1,3,"field-related-details-container",2),d.k0s()),2&e&&(d.R7$(),d.Y8G("ngIf",t.displayLabel),d.R7$(),d.Y8G("ngIf",t.value))},dependencies:[i.bT,u.b,ju],encapsulation:2})}return fieldRelatedDetails})();var Fu=s(66586);function Mu(e,t){if(1&e&&d.nrm(0,"field-label",3),2&e){const e=d.XpG();d.Y8G("fieldname",e.fieldname)("fieldconfig",e.fieldconfig)}}function Tu(e,t){if(1&e){const e=d.RV6();d.j41(0,"div",10),d.bIt("click",(function(t){d.eBV(e);const s=d.XpG(2);return d.Njj(s.initiateCall(t))})),d.nrm(1,"system-utility-icon",11),d.k0s()}}function Bu(e,t){if(1&e&&(d.j41(0,"a",12),d.EFF(1),d.k0s()),2&e){const e=d.XpG(2);d.Y8G("href","tel:"+e.value,d.B4B),d.R7$(),d.JRh(e.value)}}function $u(e,t){if(1&e&&(d.j41(0,"span"),d.EFF(1),d.k0s()),2&e){const e=d.XpG(2);d.R7$(),d.JRh(e.value)}}function Ou(e,t){if(1&e&&(d.j41(0,"field-generic-display",4)(1,"div",5),d.DNE(2,Tu,2,0,"div",6),d.j41(3,"div",7),d.DNE(4,Bu,2,2,"a",8)(5,$u,2,1,"span",9),d.k0s()()()),2&e){const e=d.XpG();d.Y8G("fielddisplayclass",e.fielddisplayclass)("editable",e.isEditable())("fieldconfig",e.fieldconfig)("title",e.value)("fieldid",e.fieldid),d.R7$(2),d.Y8G("ngIf",e.telehonyActive&&e.value),d.R7$(2),d.Y8G("ngIf",e.value&&!e.telehonyActive),d.R7$(),d.Y8G("ngIf",e.value&&e.telehonyActive)}}function Xu(e,t){if(1&e){const e=d.RV6();d.j41(0,"div",13)(1,"input",14,15),d.mxI("ngModelChange",(function(t){d.eBV(e);const s=d.XpG();return d.DH7(s.value,t)||(s.value=t),d.Njj(t)})),d.k0s(),d.nrm(3,"field-messages",16),d.k0s()}if(2&e){const e=d.XpG();d.Y8G("ngClass",e.css_classes),d.R7$(),d.R50("ngModel",e.value),d.Y8G("maxlength",e.fieldlength)("autocomplete",e.fieldid)("ngModelOptions",e.modelOptions),d.R7$(2),d.Y8G("fieldname",e.fieldname)}}let Uu=(()=>{class fieldPhone extends r.s{constructor(e,t,s,i,n,l,o){super(e,t,s,i,n),this.model=e,this.view=t,this.l=s,this.metadata=i,this.router=n,this.backend=l,this.telephony=o}get telehonyActive(){return this.telephony.isActive}initiateCall(e){e.stopPropagation(),this.telephony.initiateCall(this.value,{relatedid:this.model.id,relatedmodule:this.model.module,relateddata:this.model.data})}static#e=this.ɵfac=function(e){return new(e||fieldPhone)(d.rXU(R.g),d.rXU(G.U),d.rXU(k.B),d.rXU(c.yu),d.rXU(C.Ix),d.rXU(ee.H),d.rXU(Fu.V))};static#t=this.ɵcmp=d.VBU({type:fieldPhone,selectors:[["field-phone"]],features:[d.Vt3],decls:3,vars:3,consts:[[3,"fieldname","fieldconfig",4,"ngIf"],[3,"fielddisplayclass","editable","fieldconfig","title","fieldid",4,"ngIf"],["class","slds-form-element__control slds-p-around--xx-small",3,"ngClass",4,"ngIf"],[3,"fieldname","fieldconfig"],[3,"fielddisplayclass","editable","fieldconfig","title","fieldid"],[1,"slds-grid","slds-grid--vertical-align-center"],["class","slds-p-right--x-small slds-text-link--reset",3,"click",4,"ngIf"],[1,"slds-truncate"],[3,"href",4,"ngIf"],[4,"ngIf"],[1,"slds-p-right--x-small","slds-text-link--reset",3,"click"],["icon","outbound_call","size","xx-small"],[3,"href"],[1,"slds-form-element__control","slds-p-around--xx-small",3,"ngClass"],["type","text",1,"slds-input",3,"ngModel","maxlength","autocomplete","ngModelOptions","ngModelChange"],["focus",""],[3,"fieldname"]],template:function(e,t){1&e&&d.DNE(0,Mu,1,2,"field-label",0)(1,Ou,6,8,"field-generic-display",1)(2,Xu,4,6,"div",2),2&e&&(d.Y8G("ngIf",t.displayLabel),d.R7$(),d.Y8G("ngIf",!t.isEditMode()),d.R7$(),d.Y8G("ngIf",t.isEditable()&&t.isEditMode()))},dependencies:[i.YU,i.bT,n.me,n.BC,n.tU,n.vS,E.B,u.b,j.K,D.A],encapsulation:2})}return fieldPhone})();var Yu=s(63252);function Nu(e,t){if(1&e&&d.nrm(0,"field-label",3),2&e){const e=d.XpG();d.Y8G("fieldname",e.fieldname)("fieldconfig",e.fieldconfig)}}function Vu(e,t){if(1&e&&(d.j41(0,"field-generic-display",4),d.EFF(1),d.k0s()),2&e){const e=d.XpG();d.Y8G("fielddisplayclass",e.fielddisplayclass)("editable",e.isEditable())("fieldconfig",e.fieldconfig)("fieldid",e.fieldid),d.R7$(),d.SpI(" ",e.displayValue,"\n")}}function Au(e,t){if(1&e){const e=d.RV6();d.j41(0,"div",5)(1,"div",6)(2,"system-input-actionset",7),d.mxI("ngModelChange",(function(t){d.eBV(e);const s=d.XpG();return d.DH7(s.value,t)||(s.value=t),d.Njj(t)})),d.k0s(),d.nrm(3,"field-messages",8),d.k0s()()}if(2&e){const e=d.XpG();d.R7$(),d.Y8G("ngClass",e.getFieldClass()),d.R7$(),d.R50("ngModel",e.value),d.R7$(),d.Y8G("fieldname",e.fieldname)}}let Pu=(()=>{class fieldActionset extends r.s{constructor(e,t,s,i,n){super(e,t,s,i,n),this.model=e,this.view=t,this.language=s,this.metadata=i,this.router=n}get displayValue(){if(!this.value)return"";let e=this.metadata.getActionSet(this.value);return e?e.name:""}static#e=this.ɵfac=function(e){return new(e||fieldActionset)(d.rXU(R.g),d.rXU(G.U),d.rXU(k.B),d.rXU(c.yu),d.rXU(C.Ix))};static#t=this.ɵcmp=d.VBU({type:fieldActionset,selectors:[["ng-component"]],features:[d.Vt3],decls:3,vars:3,consts:[[3,"fieldname","fieldconfig",4,"ngIf"],[3,"fielddisplayclass","editable","fieldconfig","fieldid",4,"ngIf"],["class","slds-form-element",4,"ngIf"],[3,"fieldname","fieldconfig"],[3,"fielddisplayclass","editable","fieldconfig","fieldid"],[1,"slds-form-element"],[1,"slds-form-element__control","slds-m-vertical--xx-small",3,"ngClass"],[3,"ngModel","ngModelChange"],[3,"fieldname"]],template:function(e,t){1&e&&d.DNE(0,Nu,1,2,"field-label",0)(1,Vu,2,5,"field-generic-display",1)(2,Au,4,3,"div",2),2&e&&(d.Y8G("ngIf",t.displayLabel),d.R7$(),d.Y8G("ngIf",!t.isEditMode()),d.R7$(),d.Y8G("ngIf",t.isEditMode()))},dependencies:[i.YU,i.bT,n.BC,n.vS,Yu.m,u.b,j.K,D.A],encapsulation:2})}return fieldActionset})();var zu=s(37804),Hu=s(52527);function qu(e,t){if(1&e&&d.nrm(0,"field-label",3),2&e){const e=d.XpG();d.Y8G("fieldname",e.fieldname)("fieldconfig",e.fieldconfig)}}function Ju(e,t){if(1&e&&(d.j41(0,"field-generic-display",4)(1,"div",5),d.nrm(2,"system-progress-bar",6),d.j41(3,"div",7),d.EFF(4),d.k0s()()()),2&e){const e=d.XpG();d.Y8G("fielddisplayclass",e.fielddisplayclass)("editable",e.isEditable())("fieldconfig",e.fieldconfig),d.R7$(2),d.Y8G("progress",e.completion)("hideText",!0),d.R7$(2),d.JRh(e.value)}}function Wu(e,t){if(1&e){const e=d.RV6();d.j41(0,"div",8)(1,"system-slider",9),d.mxI("ngModelChange",(function(t){d.eBV(e);const s=d.XpG();return d.DH7(s.value,t)||(s.value=t),d.Njj(t)})),d.k0s(),d.nrm(2,"field-messages",10),d.k0s()}if(2&e){const e=d.XpG();d.Y8G("ngClass",e.getFieldClass()),d.R7$(),d.Y8G("min",e.min)("max",e.max)("step",e.step),d.R50("ngModel",e.value),d.R7$(),d.Y8G("fieldname",e.fieldname)}}let Ku=(()=>{class fieldSlider extends r.s{constructor(e,t,s,i,n){super(e,t,s,i,n),this.model=e,this.view=t,this.language=s,this.metadata=i,this.router=n}get min(){return this.fieldconfig.min?parseInt(this.fieldconfig.min,10):0}get max(){return this.fieldconfig.max?parseInt(this.fieldconfig.max,10):100}get step(){return this.fieldconfig.step?parseInt(this.fieldconfig.step,10):10}get value(){let e=this.model.getField(this.fieldname);return e?"number"==typeof e?e:parseInt(e,10):0}set value(e){this.model.setField(this.fieldname,e)}get completion(){return(this.value-this.min)/(this.max-this.min)*100}static#e=this.ɵfac=function(e){return new(e||fieldSlider)(d.rXU(R.g),d.rXU(G.U),d.rXU(k.B),d.rXU(c.yu),d.rXU(C.Ix))};static#t=this.ɵcmp=d.VBU({type:fieldSlider,selectors:[["field-slider"]],features:[d.Vt3],decls:3,vars:3,consts:[[3,"fieldname","fieldconfig",4,"ngIf"],[3,"fielddisplayclass","editable","fieldconfig",4,"ngIf"],["class","slds-form-element__control slds-p-top--small",3,"ngClass",4,"ngIf"],[3,"fieldname","fieldconfig"],[3,"fielddisplayclass","editable","fieldconfig"],[1,"slds-grid","slds-grid_vertical-align-center"],[1,"slds-grow",3,"progress","hideText"],[1,"slds-p-left--x-small"],[1,"slds-form-element__control","slds-p-top--small",3,"ngClass"],[3,"min","max","step","ngModel","ngModelChange"],[3,"fieldname"]],template:function(e,t){1&e&&d.DNE(0,qu,1,2,"field-label",0)(1,Ju,5,6,"field-generic-display",1)(2,Wu,3,6,"div",2),2&e&&(d.Y8G("ngIf",t.displayLabel),d.R7$(),d.Y8G("ngIf",!t.isEditMode()),d.R7$(),d.Y8G("ngIf",t.isEditable()&&t.isEditMode()))},dependencies:[i.YU,i.bT,n.BC,n.vS,zu.Y,Hu.b,u.b,j.K,D.A],encapsulation:2})}return fieldSlider})();function Qu(e,t){if(1&e&&d.nrm(0,"field-label",4),2&e){const e=d.XpG();d.Y8G("fieldname",e.fieldname)("fieldconfig",e.fieldconfig)}}function Zu(e,t){if(1&e&&d.nrm(0,"img",5),2&e){const e=d.XpG();d.Y8G("src",e.imageUrl,d.B4B)}}function em(e,t){if(1&e){const e=d.RV6();d.j41(0,"button",8),d.bIt("click",(function(){d.eBV(e);const t=d.XpG(3);return d.Njj(t.editImage())})),d.nrm(1,"system-button-icon",9),d.k0s()}if(2&e){const e=d.XpG(3);d.Y8G("disabled",!e.isEditMode()),d.R7$(),d.Y8G("icon","image")}}function tm(e,t){if(1&e){const e=d.RV6();d.j41(0,"div",10)(1,"button",11),d.bIt("click",(function(){d.eBV(e);const t=d.XpG(3);return d.Njj(t.editImage())})),d.nrm(2,"system-button-icon",9),d.k0s(),d.j41(3,"button",12),d.bIt("click",(function(){d.eBV(e);const t=d.XpG(3);return d.Njj(t.deleteImage())})),d.nrm(4,"system-button-icon",9),d.k0s()()}2&e&&(d.R7$(2),d.Y8G("icon","edit"),d.R7$(2),d.Y8G("icon","delete"))}function sm(e,t){if(1&e&&(d.qex(0),d.DNE(1,em,2,2,"button",6)(2,tm,5,2,"div",7),d.bVm()),2&e){const e=d.XpG(2);d.R7$(),d.Y8G("ngIf",e.fieldIsEmpty),d.R7$(),d.Y8G("ngIf",!e.fieldIsEmpty)}}function im(e,t){if(1&e){const e=d.RV6();d.qex(0),d.j41(1,"button",13),d.bIt("click",(function(){d.eBV(e);const t=d.XpG(2);return d.Njj(t.setEditMode())})),d.nrm(2,"system-button-icon",9),d.k0s(),d.bVm()}2&e&&(d.R7$(2),d.Y8G("icon","edit"))}function nm(e,t){if(1&e&&(d.qex(0),d.DNE(1,sm,3,2,"ng-container",3)(2,im,3,1,"ng-container",3),d.bVm()),2&e){const e=d.XpG();d.R7$(),d.Y8G("ngIf",e.isEditMode()),d.R7$(),d.Y8G("ngIf",!e.isEditMode())}}let lm=(()=>{class fieldImage extends r.s{get fieldIsEmpty(){return!this.value}constructor(e,t,s,i,n,l,o,a,r,d,c,u){super(e,t,s,i,n),this.model=e,this.view=t,this.language=s,this.metadata=i,this.router=n,this.elementRef=l,this.renderer=o,this.backend=a,this.elRef=r,this.changeDetRef=d,this.modalservice=c,this.sanitizer=u,this.height=""}ngAfterViewInit(){this.fieldconfig.height&&(this.height="calc("+this.fieldconfig.height+" - 2px - 0.5rem )")}get imageUrl(){return this.sanitizer.bypassSecurityTrustResourceUrl("data:"+this.value)}get style(){return{height:this.height}}deleteImage(){this.value=""}editImage(e=null){this.modalservice.openModal("SystemImageModal").subscribe((t=>{this.field_defs.maxWidth&&(t.instance.maxWidth=this.field_defs.maxWidth),this.field_defs.maxHeight&&(t.instance.maxHeight=this.field_defs.maxHeight);let s=this.labelComponent.label;s||(s=this.language.getLabel("LBL_IMAGE")),t.instance.title=s,this.value&&(t.instance.imageData=this.value),t.instance.answer.subscribe((e=>{!1!==e&&(this.value=e)})),e&&(t.instance.droppedFiles=e)}))}onDrop(e){this.view.setEditMode(),this.editImage(e)}static#e=this.ɵfac=function(e){return new(e||fieldImage)(d.rXU(R.g),d.rXU(G.U),d.rXU(k.B),d.rXU(c.yu),d.rXU(C.Ix),d.rXU(d.aKT),d.rXU(d.sFG),d.rXU(ee.H),d.rXU(d.aKT),d.rXU(d.gRc),d.rXU(w.y),d.rXU(ne.up))};static#t=this.ɵcmp=d.VBU({type:fieldImage,selectors:[["field-image"]],viewQuery:function(e,t){if(1&e&&d.GBs(u.b,5),2&e){let e;d.mGM(e=d.lsd())&&(t.labelComponent=e.first)}},features:[d.Vt3],decls:4,vars:5,consts:[[3,"fieldname","fieldconfig",4,"ngIf"],[1,"slds-is-relative","slds-box--border","slds-align_absolute-center",3,"ngClass","ngStyle","system-drop-file"],["style","max-height:100%;padding:0.25rem",3,"src",4,"ngIf"],[4,"ngIf"],[3,"fieldname","fieldconfig"],[2,"max-height","100%","padding","0.25rem",3,"src"],["class","slds-button slds-button_icon slds-button_icon-container slds-button_icon-border-filled slds-align--absolute-center slds-m-around--medium",3,"disabled","click",4,"ngIf"],["class","slds-is-absolute spice-button-group-vertical slds-is-absolute","style","bottom:0.5rem;right:0.5rem;",4,"ngIf"],[1,"slds-button","slds-button_icon","slds-button_icon-container","slds-button_icon-border-filled","slds-align--absolute-center","slds-m-around--medium",3,"disabled","click"],[3,"icon"],[1,"slds-is-absolute","spice-button-group-vertical","slds-is-absolute",2,"bottom","0.5rem","right","0.5rem"],[1,"slds-button","slds-button_icon-container","slds-button_icon-border-filled","slds-button--icon-small",3,"click"],["title","Delete",1,"slds-button","slds-button_icon-container","slds-button_icon-border-filled","slds-button--icon-small",3,"click"],[1,"slds-button","slds-button_icon","slds-is-absolute",2,"bottom","0.75rem","right","0.75rem","background-color","#fff","box-shadow","0px 0px 2px 3px rgba(255,255,255,1)",3,"click"]],template:function(e,t){1&e&&(d.DNE(0,Qu,1,2,"field-label",0),d.j41(1,"div",1),d.bIt("system-drop-file",(function(e){return t.onDrop(e)})),d.DNE(2,Zu,1,1,"img",2)(3,nm,3,2,"ng-container",3),d.k0s()),2&e&&(d.Y8G("ngIf",t.displayLabel),d.R7$(),d.Y8G("ngClass",t.fielddisplayclass)("ngStyle",t.style),d.R7$(),d.Y8G("ngIf",!t.fieldIsEmpty),d.R7$(),d.Y8G("ngIf",!t.model.isLoading))},dependencies:[i.YU,i.bT,i.B3,I.t,Dl.H,u.b],encapsulation:2})}return fieldImage})();const om=["compound"];function am(e,t){if(1&e&&(d.j41(0,"legend",4),d.EFF(1),d.k0s()),2&e){const e=d.XpG();d.R7$(),d.JRh(e.label)}}let rm=(()=>{class fieldCompound extends r.s{ngOnInit(){super.ngOnInit(),this.metadata.addComponent("ObjectRecordFieldset",this.compound).subscribe((e=>{e.instance.fieldset=this.fieldconfig.fieldset,e.instance.direction="horizontal",e.instance.fieldpadding="xxx-small"}))}get label(){if(this.fieldconfig.label){if(this.fieldconfig.label.indexOf(":")>0){let e=this.fieldconfig.label.split(":");return this.language.getLabel(e[1],e[0],this.view.labels)}return this.language.getLabel(this.fieldconfig.label,this.model.module,this.view.labels)}return this.language.getFieldDisplayName(this.model.module,this.fieldname,this.fieldconfig,this.view.labels)}static#e=this.ɵfac=(()=>{let e;return function(t){return(e||(e=d.xGo(fieldCompound)))(t||fieldCompound)}})();static#t=this.ɵcmp=d.VBU({type:fieldCompound,selectors:[["field-compound"]],viewQuery:function(e,t){if(1&e&&d.GBs(om,7,d.c1b),2&e){let e;d.mGM(e=d.lsd())&&(t.compound=e.first)}},features:[d.Vt3],decls:5,vars:1,consts:[[1,"slds-form-element","slds-form-element_compound","slds-box","slds-box_x-small","slds-p-top_none"],["class","slds-form-element__legend slds-form-element__label slds-p-left_xx-small","style","float:none",4,"ngIf"],[1,"slds-form-element__control"],["compound",""],[1,"slds-form-element__legend","slds-form-element__label","slds-p-left_xx-small",2,"float","none"]],template:function(e,t){1&e&&(d.j41(0,"fieldset",0),d.DNE(1,am,2,1,"legend",1),d.j41(2,"div",2),d.nrm(3,"div",null,3),d.k0s()()),2&e&&(d.R7$(),d.Y8G("ngIf",t.displayLabel))},dependencies:[i.bT],encapsulation:2})}return fieldCompound})();function dm(e,t){if(1&e&&d.nrm(0,"field-label",3),2&e){const e=d.XpG();d.Y8G("fieldname",e.fieldname)("fieldconfig",e.fieldconfig)}}function cm(e,t){if(1&e&&d.nrm(0,"system-utility-icon",4),2&e){const e=d.XpG();d.Y8G("size",e.fieldconfig.size)("icon",e.icon)("title",e.label)("colorclass",e.colorClass)}}let um=(()=>{class fieldIconCondition extends r.s{constructor(e,t,s,i,n,l,o){super(e,t,s,i,l),this.model=e,this.view=t,this.language=s,this.metadata=i,this.backend=n,this.router=l,this.cdRef=o,this.colorClass="slds-icon-text-default",this.fieldconfig={},this.subscriptions.add(this.subscribeToModelChanges())}ngOnInit(){super.ngOnInit(),this.setValues()}subscribeToModelChanges(){return this.model.data$.subscribe((()=>{this.setValues()}))}setValues(){window.clearTimeout(this.setterTimeout),this.setterTimeout=window.setTimeout((()=>{this.fieldconfig.modulefilter?this.model.checkModuleFilterMatch(this.fieldconfig.modulefilter)?(this.icon=this.fieldconfig.matchIcon,this.label=this.fieldconfig.matchLabel,this.fieldconfig.matchColorTheme&&(this.colorClass="slds-icon-text-"+this.fieldconfig.matchColorTheme)):(this.icon=this.fieldconfig.mismatchIcon,this.label=this.fieldconfig.mismatchLabel,this.fieldconfig.mismatchColorTheme&&(this.colorClass="slds-icon-text-"+this.fieldconfig.mismatchColorTheme)):(this.icon=this.fieldconfig.icon,this.label=this.fieldconfig.label,this.fieldconfig.colorTheme&&(this.colorClass="slds-icon-text-"+this.fieldconfig.colorTheme)),this.cdRef.detectChanges()}),1e3)}static#e=this.ɵfac=function(e){return new(e||fieldIconCondition)(d.rXU(R.g),d.rXU(G.U),d.rXU(k.B),d.rXU(c.yu),d.rXU(ee.H),d.rXU(C.Ix),d.rXU(d.gRc))};static#t=this.ɵcmp=d.VBU({type:fieldIconCondition,selectors:[["field-icon-condition"]],inputs:{fieldconfig:"fieldconfig"},features:[d.Vt3],decls:3,vars:4,consts:[[3,"fieldname","fieldconfig",4,"ngIf"],[3,"fielddisplayclass","fieldconfig"],[3,"size","icon","title","colorclass",4,"ngIf"],[3,"fieldname","fieldconfig"],[3,"size","icon","title","colorclass"]],template:function(e,t){1&e&&(d.DNE(0,dm,1,2,"field-label",0),d.j41(1,"field-generic-display",1),d.DNE(2,cm,1,4,"system-utility-icon",2),d.k0s()),2&e&&(d.Y8G("ngIf",t.displayLabel),d.R7$(),d.Y8G("fielddisplayclass",t.fielddisplayclass)("fieldconfig",t.fieldconfig),d.R7$(),d.Y8G("ngIf",!!t.icon))},dependencies:[i.bT,E.B,u.b,j.K],encapsulation:2,changeDetection:0})}return fieldIconCondition})();var mm=s(14354);function hm(e,t){if(1&e&&d.nrm(0,"field-label",3),2&e){const e=d.XpG();d.Y8G("fieldname",e.fieldname)("fieldconfig",e.fieldconfig)}}let gm=(()=>{class fieldIndicator extends r.s{constructor(e,t,s,i,n){super(e,t,s,i,n),this.model=e,this.view=t,this.language=s,this.metadata=i,this.router=n}get indicatorValue(){return this.fieldconfig.up&&this.value==this.fieldconfig.up?"up":this.fieldconfig.down&&this.value==this.fieldconfig.down?"down":"neutral"}static#e=this.ɵfac=function(e){return new(e||fieldIndicator)(d.rXU(R.g),d.rXU(G.U),d.rXU(k.B),d.rXU(c.yu),d.rXU(C.Ix))};static#t=this.ɵcmp=d.VBU({type:fieldIndicator,selectors:[["field-indicator"]],features:[d.Vt3],decls:3,vars:7,consts:[[3,"fieldname","fieldconfig",4,"ngIf"],[3,"fielddisplayclass","editable","fieldconfig","title","fieldid"],[3,"trend"],[3,"fieldname","fieldconfig"]],template:function(e,t){1&e&&(d.DNE(0,hm,1,2,"field-label",0),d.j41(1,"field-generic-display",1),d.nrm(2,"system-trend-indicator",2),d.k0s()),2&e&&(d.Y8G("ngIf",t.displayLabel),d.R7$(),d.Y8G("fielddisplayclass",t.fielddisplayclass)("editable",!1)("fieldconfig",t.fieldconfig)("title",t.value)("fieldid",t.fieldid),d.R7$(),d.Y8G("trend",t.indicatorValue))},dependencies:[i.bT,mm.a,u.b,j.K],encapsulation:2})}return fieldIndicator})();var pm=s(90154);const fm=e=>({label:e});function bm(e,t){if(1&e&&d.nrm(0,"field-label",13),2&e){const e=d.XpG();d.Y8G("fieldconfig",d.eq3(1,fm,"LBL_"+e.addressType.toUpperCase()))}}function ym(e,t){if(1&e&&(d.j41(0,"span",20),d.nrm(1,"system-icon",21),d.k0s()),2&e){const e=d.XpG().$implicit;d.R7$(),d.Y8G("module",e.parent_type)}}function vm(e,t){if(1&e){const e=d.RV6();d.j41(0,"li",14),d.bIt("cdkDragStarted",(function(){d.eBV(e);const t=d.XpG();return d.Njj(t.parent.dragging=!0)}))("cdkDragEnded",(function(){d.eBV(e);const t=d.XpG();return d.Njj(t.parent.dragging=!1)})),d.j41(1,"span",15),d.DNE(2,ym,2,1,"span",16),d.j41(3,"span",17),d.EFF(4),d.k0s(),d.j41(5,"span",18)(6,"system-button-icon",19),d.bIt("click",(function(t){const s=d.eBV(e).$implicit,i=d.XpG();return d.Njj(i.removeEmailAddress(t,s.email_address_id))})),d.k0s()()()()}if(2&e){const e=t.$implicit,s=d.XpG();d.Y8G("cdkDragData",e)("cdkDragBoundary",s.parent.elementRef),d.R7$(2),d.Y8G("ngIf",!!e.parent_id&&!!e.parent_type),d.R7$(2),d.SpI(" ",e.email_address," "),d.R7$(2),d.Y8G("icon","close")}}function _m(e,t){if(1&e){const e=d.RV6();d.j41(0,"li",22)(1,"div",23)(2,"div",24),d.SdG(3),d.k0s(),d.j41(4,"input",25),d.mxI("ngModelChange",(function(t){d.eBV(e);const s=d.XpG();return d.DH7(s.inputTextValue,t)||(s.inputTextValue=t),d.Njj(t)})),d.bIt("blur",(function(){d.eBV(e);const t=d.XpG();return d.Njj(t.onBlur())}))("keyup",(function(t){d.eBV(e);const s=d.XpG();return d.Njj(s.onKeyUp(t))}))("keydown.,",(function(e){return e.preventDefault()})),d.k0s()()()}if(2&e){const e=d.XpG();d.R7$(4),d.R50("ngModel",e.inputTextValue),d.BMQ("system-autofocus","to"==e.addressType)}}function km(e,t){if(1&e){const e=d.RV6();d.j41(0,"div",28),d.bIt("click",(function(){d.eBV(e);const t=d.XpG(2);return t.addEmailAddressFromInput(),d.Njj(t.hideDropdown())})),d.nrm(1,"system-label",29),d.j41(2,"div",30),d.EFF(3),d.k0s()()}if(2&e){const e=d.XpG(2);d.R7$(2),d.Y8G("title",e.inputTextValue),d.R7$(),d.SpI(" ",e.inputTextValue," ")}}function Rm(e,t){if(1&e&&(d.j41(0,"div",31),d.nrm(1,"system-utility-icon",32),d.j41(2,"div",33),d.nrm(3,"system-label",34),d.j41(4,"div",35),d.EFF(5),d.k0s()()()),2&e){const e=d.XpG(2);d.R7$(2),d.Y8G("title",e.inputTextValue),d.R7$(3),d.SpI(' "',e.inputTextValue,'" ')}}function Im(e,t){if(1&e&&(d.j41(0,"div"),d.DNE(1,km,4,2,"div",26)(2,Rm,6,2,"ng-template",null,27,d.C5r),d.k0s()),2&e){const e=d.sdS(3),t=d.XpG();d.R7$(),d.Y8G("ngIf",t.isValidEmailAddress)("ngIfElse",e)}}function xm(e,t){1&e&&d.nrm(0,"system-spinner",39)}function jm(e,t){if(1&e){const e=d.RV6();d.j41(0,"li",42),d.bIt("click",(function(){const t=d.eBV(e).$implicit,s=d.XpG(3);return d.Njj(s.selectEmailAddress(t))})),d.j41(1,"div",43),d.nrm(2,"system-icon",44),d.j41(3,"div",45)(4,"span",46),d.EFF(5),d.k0s()()()()}if(2&e){const e=t.$implicit;d.R7$(2),d.Y8G("module",e.module),d.R7$(3),d.Lme(" ",e.email_address," • ",e.summary_text," ")}}function Gm(e,t){if(1&e&&(d.j41(0,"ul",40),d.DNE(1,jm,6,3,"li",41),d.k0s()),2&e){const e=d.XpG(2);d.R7$(),d.Y8G("ngForOf",e.searchResults)}}function Cm(e,t){1&e&&(d.j41(0,"div",47),d.nrm(1,"system-label",48),d.k0s())}function wm(e,t){if(1&e&&d.DNE(0,xm,1,0,"system-spinner",36)(1,Gm,2,1,"ul",37)(2,Cm,2,0,"div",38),2&e){const e=d.XpG();d.Y8G("ngIf",e.searchResultsLoading),d.R7$(),d.Y8G("ngIf",(null==e.searchResults?null:e.searchResults.length)>0),d.R7$(),d.Y8G("ngIf",0==(null==e.searchResults?null:e.searchResults.length)&&!e.searchResultsLoading)}}function Sm(e,t){if(1&e){const e=d.RV6();d.j41(0,"button",49),d.bIt("click",(function(){d.eBV(e);const t=d.XpG();return d.Njj(t.searchParentEmailAddresses())})),d.nrm(1,"system-button-icon",50),d.k0s()}}const Em=["*"];let Lm=(()=>{class fieldEmailRecipientsInput{constructor(e,t,s,i,n,l,o,a,r){this.model=e,this.language=t,this.modal=s,this.injector=i,this.backend=n,this.renderer=l,this.elementRef=o,this.parent=a,this.zone=r,this.searchResults=[],this.isInputTextVisible=!1,this.isDropdownVisible=!1,this.inputTextValue="",this.inputCCTextValue="",this.previousInputTextValue="",this.searchTimeOut=void 0,this.searchResultsLoading=!1,this.searchAllowed=!1,this.isValidEmailAddress=!1,this.displayValue=[],this.drop$=new d.bkB}get value(){return this.model.getField("recipient_addresses")}set value(e){this.model.setField("recipient_addresses",e),this.parent.setDisplayValue()}get hasParent(){return!!this.model.getField("parent_id")}ngOnChanges(){(["cc","bcc"].indexOf(this.addressType)>-1||"to"==this.addressType&&this.parent.focused)&&(this.displayValue=this.displayValue.filter((e=>e.address_type==this.addressType)))}searchParentEmailAddresses(){this.modal.openModal("EmailParentAddressesModal",!0,this.injector).subscribe((e=>{this.parent.clickListener&&(this.parent.clickListener(),this.parent.clickListener=void 0),e.instance.addAddresses.subscribe((e=>{for(let t of e){const e={id:this.model.generateGuid(),address_type:this.addressType,email_address:t.email_address,email_address_id:t.email_address_id,parent_type:t.module,parent_id:t.id};this.value=[...this.model.getField("recipient_addresses"),e],this.isInputTextVisible=!0,this.parent.focused=!0}}))}))}validateEmail(e){this.isValidEmailAddress=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(String(e).toLowerCase())}onBlur(){this.inputTextValue||(this.isInputTextVisible=!1)}onFieldClick(){this.isInputTextVisible=!0,this.showDropdown()}removeEmailAddress(e,t){this.model.getField("recipient_addresses")&&0!=this.model.getField("recipient_addresses").length&&(this.value=this.model.getField("recipient_addresses").filter((e=>e.email_address_id!=t)),e.preventDefault(),e.stopPropagation())}onKeyUp(e){switch(this.searchAllowed=this.inputTextValue.length>2&&-1==this.inputTextValue.indexOf("@"),this.validateEmail(this.inputTextValue),this.inputTextValue.length<3&&this.hideDropdown(),e.key){case"Enter":case",":this.searchAllowed=!1,this.addEmailAddressFromInput();break;case"Backspace":this.inputTextValue||this.previousInputTextValue||this.removeLastEmailAddress(),this.showDropdown(),this.doSearch();break;default:this.showDropdown(),this.doSearch()}this.previousInputTextValue=this.inputTextValue}removeLastEmailAddress(){this.value&&0!=this.value.length&&(this.value=this.model.getField("recipient_addresses").slice(0,this.model.getField("recipient_addresses").length-1))}addEmailAddressFromInput(){if(!this.isValidEmailAddress)return;this.searchTimeOut&&window.clearTimeout(this.searchTimeOut);const e={id:this.model.generateGuid(),address_type:this.addressType,email_address:this.inputTextValue};this.value=[...this.model.getField("recipient_addresses"),e],this.hideDropdown(),this.resetInputTextValue()}doSearch(){this.searchAllowed&&this.previousInputTextValue!=this.inputTextValue&&this.zone.runOutsideAngular((()=>{this.searchTimeOut&&window.clearTimeout(this.searchTimeOut),this.searchTimeOut=window.setTimeout((()=>{this.inputTextValue&&(this.zone.run((()=>{this.searchResults=[],this.searchResultsLoading=!0})),this.backend.getRequest("module/EmailAddresses/"+this.inputTextValue).subscribe((e=>{this.zone.run((()=>{e&&e.length>0&&(this.searchResults=e),this.searchResultsLoading=!1}))})))}),1e3)}))}selectEmailAddress(e){const t={id:this.model.generateGuid(),address_type:this.addressType,email_address:e.email_address,email_address_id:e.email_address_id,parent_type:e.module,parent_id:e.id};this.value=[...this.model.getField("recipient_addresses"),t],this.resetInputTextValue(),this.hideDropdown()}resetInputTextValue(){this.inputTextValue="",this.previousInputTextValue=""}addDocumentClickListener(){this.clickListener=this.renderer.listen("document","click",(e=>{this.elementRef.nativeElement.contains(e.target)||this.hideDropdown()}))}showDropdown(){this.inputTextValue.length<3||(this.isDropdownVisible=!0,this.clickListener||this.addDocumentClickListener())}hideDropdown(){this.isDropdownVisible=!1,(!this.inputTextValue||this.inputTextValue.length<3)&&(this.searchResults=[]),this.clickListener&&(this.clickListener(),this.clickListener=!1)}static#e=this.ɵfac=function(e){return new(e||fieldEmailRecipientsInput)(d.rXU(R.g),d.rXU(k.B),d.rXU(w.y),d.rXU(d.zZn),d.rXU(ee.H),d.rXU(d.sFG),d.rXU(d.aKT),d.rXU(Lo,1),d.rXU(d.SKi))};static#t=this.ɵcmp=d.VBU({type:fieldEmailRecipientsInput,selectors:[["field-email-recipients-input"]],inputs:{addressType:"addressType",displayValue:"displayValue"},outputs:{drop$:"drop$"},features:[d.OA$],ngContentSelectors:Em,decls:14,vars:9,consts:[[3,"fieldconfig",4,"ngIf"],[1,"slds-grid","slds-grid--vertical-align-center"],[1,"slds-combobox_container","slds-grow"],["role","combobox",1,"slds-combobox","slds-dropdown-trigger","slds-dropdown-trigger_click"],["role","none",1,"slds-combobox__form-element"],[1,"slds-pill_container",3,"click"],["cdkDropList","","cdkDropListOrientation","horizontal","role","listbox",1,"slds-listbox","slds-listbox_horizontal","slds-size--1-of-1",3,"cdkDropListData","cdkDropListDropped"],["cdkDrag","","class","slds-listbox-item slds-drag--preview","role","presentation","style","cursor: grab; list-style: none;",3,"cdkDragData","cdkDragBoundary","cdkDragStarted","cdkDragEnded",4,"ngFor","ngForOf"],["class","slds-listbox-item slds-grow","role","presentation",4,"ngIf"],["role","listbox",1,"slds-dropdown","slds-dropdown_fluid"],[4,"ngIf","ngIfElse"],["searchContainer",""],["system-title","LBL_SELECT_PARENT_EMAIL","class","slds-button--icon slds-button--icon-border-filled slds-m-left--xx-small",3,"click",4,"ngIf"],[3,"fieldconfig"],["cdkDrag","","role","presentation",1,"slds-listbox-item","slds-drag--preview",2,"cursor","grab","list-style","none",3,"cdkDragData","cdkDragBoundary","cdkDragStarted","cdkDragEnded"],["role","option",1,"slds-pill"],["class","slds-icon_container",4,"ngIf"],[1,"slds-pill__label"],[1,"slds-icon_container","slds-pill__remove",2,"cursor","pointer"],[3,"icon","click"],[1,"slds-icon_container"],["size","x-small","divClass","slds-p-right--x-small",3,"module"],["role","presentation",1,"slds-listbox-item","slds-grow"],[1,"slds-form-element__control","slds-input-has-icon--right","slds-input-has-icon_group-right","slds-grow"],[1,"slds-input__icon-group","slds-input__icon-group_right","slds-m-right--xx-small"],["type","text","autocomplete","new-email-address","system-title","LBL_ADD_EMAILADDRESS","system-placeholder","LBL_ADD_EMAILADDRESS",1,"slds-p-horizontal--x-small","slds-size--1-of-1",3,"ngModel","ngModelChange","blur","keyup","keydown.,"],["class","slds-size--1-of-1 slds-grid slds-grid--vertical-align-center slds-p-around--x-small","style","cursor:pointer;",3,"click",4,"ngIf","ngIfElse"],["invalidEmailAddressContainer",""],[1,"slds-size--1-of-1","slds-grid","slds-grid--vertical-align-center","slds-p-around--x-small",2,"cursor","pointer",3,"click"],["label","LBL_USE",2,"display","block"],[1,"slds-truncate","slds-grow","slds-m-left--xx-small",2,"font-family","sans-serif","font-weight","bold",3,"title"],[1,"slds-grid","slds-grid--vertical-align-center","slds-p-around--x-small"],["icon","warning","size","x-small","colorclass","slds-icon-text-warning",1,"slds-m-right--xx-small",2,"display","block"],[1,"slds-grow","slds-grid","slds-grid--vertical-align-center","slds-truncate",3,"title"],["label","LBL_INPUT_INVALID",2,"display","block","white-space","nowrap"],[1,"slds-truncate","slds-grow","slds-m-left--xx-small",2,"font-style","italic"],["size","12","class","slds-grid slds-p-around--small",4,"ngIf"],["class","slds-listbox slds-listbox_vertical","role","presentation",4,"ngIf"],["class","slds-p-around--x-small",4,"ngIf"],["size","12",1,"slds-grid","slds-p-around--small"],["role","presentation",1,"slds-listbox","slds-listbox_vertical"],["role","presentation","class","slds-listbox__item",3,"click",4,"ngFor","ngForOf"],["role","presentation",1,"slds-listbox__item",3,"click"],[1,"slds-listbox__option","slds-grid","slds-grid--vertical-align-center","slds-p-around--x-small"],["size","x-small",1,"slds-p-right--x-small",3,"module"],[1,"slds-media__body"],[1,"slds-listbox__option-text","slds-listbox__option-text_entity"],[1,"slds-p-around--x-small"],["label","MSG_NO_RECORDS_FOUND"],["system-title","LBL_SELECT_PARENT_EMAIL",1,"slds-button--icon","slds-button--icon-border-filled","slds-m-left--xx-small",3,"click"],["icon","record_lookup"]],template:function(e,t){if(1&e&&(d.NAR(),d.DNE(0,bm,1,3,"field-label",0),d.j41(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5),d.bIt("click",(function(){return t.onFieldClick()})),d.j41(6,"ul",6),d.bIt("cdkDropListDropped",(function(e){return t.drop$.emit(e)})),d.DNE(7,vm,7,5,"li",7)(8,_m,5,2,"li",8),d.k0s()()(),d.j41(9,"div",9),d.DNE(10,Im,4,2,"div",10)(11,wm,3,3,"ng-template",null,11,d.C5r),d.k0s()()(),d.DNE(13,Sm,2,0,"button",12),d.k0s()),2&e){const e=d.sdS(12);d.Y8G("ngIf","cc"==t.addressType||"bcc"==t.addressType),d.R7$(3),d.AVh("slds-is-open",t.isDropdownVisible),d.R7$(3),d.Y8G("cdkDropListData",t.addressType),d.R7$(),d.Y8G("ngForOf",t.displayValue),d.R7$(),d.Y8G("ngIf",!t.parent.dragging),d.R7$(2),d.Y8G("ngIf",!t.searchAllowed)("ngIfElse",e),d.R7$(3),d.Y8G("ngIf",t.hasParent)}},dependencies:[i.Sq,i.bT,n.me,n.BC,n.vS,I.t,vs.J,le.W,eo.P,E.B,pm.m,Qn.L,l.O7,l.T1,u.b],styles:["\n\n\n\n\n\n\n\n\n\n\ninput[_ngcontent-%COMP%], input[_ngcontent-%COMP%]:focus{border:none;outline:none}"]})}return fieldEmailRecipientsInput})();function Dm(e,t){if(1&e&&d.nrm(0,"field-label",3),2&e){const e=d.XpG();d.Y8G("fieldname",e.fieldname)("fieldconfig",e.fieldconfig)}}let Fm=(()=>{class fieldJson extends r.s{constructor(e,t,s,i,n){super(e,t,s,i,n),this.model=e,this.view=t,this.language=s,this.metadata=i,this.router=n}get value(){return JSON.stringify(JSON.parse(this.model.getField(this.fieldname)),null,"\t")}set value(e){this.model.setField(this.fieldname,e)}static#e=this.ɵfac=function(e){return new(e||fieldJson)(d.rXU(R.g),d.rXU(G.U),d.rXU(k.B),d.rXU(c.yu),d.rXU(C.Ix))};static#t=this.ɵcmp=d.VBU({type:fieldJson,selectors:[["field-json"]],features:[d.Vt3],decls:4,vars:7,consts:[[3,"fieldname","fieldconfig",4,"ngIf"],[3,"fielddisplayclass","editable","fieldconfig","title","fieldid"],[2,"overflow-wrap","break-word","white-space","pre-wrap"],[3,"fieldname","fieldconfig"]],template:function(e,t){1&e&&(d.DNE(0,Dm,1,2,"field-label",0),d.j41(1,"field-generic-display",1)(2,"div",2),d.EFF(3),d.k0s()()),2&e&&(d.Y8G("ngIf",t.displayLabel),d.R7$(),d.Y8G("fielddisplayclass",t.fielddisplayclass)("editable",!1)("fieldconfig",t.fieldconfig)("title",t.value)("fieldid",t.fieldid),d.R7$(2),d.JRh(t.value))},dependencies:[i.bT,u.b,j.K],encapsulation:2})}return fieldJson})();function Mm(e,t){if(1&e&&d.nrm(0,"field-label",3),2&e){const e=d.XpG();d.Y8G("fieldname",e.fieldname)("fieldconfig",e.fieldconfig)}}function Tm(e,t){if(1&e&&d.nrm(0,"system-icon",10),2&e){const e=d.XpG(3);d.Y8G("module",e.model.data[e.parentTypeField])("size","x-small")}}function Bm(e,t){if(1&e&&(d.j41(0,"span",11),d.EFF(1),d.k0s()),2&e){const e=d.XpG(3);d.Y8G("module",e.parentType)("id",e.parentId),d.R7$(),d.JRh(e.value)}}function $m(e,t){if(1&e&&(d.j41(0,"span"),d.nrm(1,"field-linked-details",12),d.k0s()),2&e){const e=d.XpG(3);d.R7$(),d.Y8G("fieldset",e.fieldconfig.fieldset)("module",e.parentType)("data",e.relData)}}function Om(e,t){if(1&e&&(d.j41(0,"div",6),d.DNE(1,Tm,1,2,"system-icon",7)(2,Bm,2,3,"span",8)(3,$m,2,3,"span",9),d.k0s()),2&e){const e=d.XpG(2);d.R7$(),d.Y8G("ngIf",e.displayModuleIcon),d.R7$(),d.Y8G("ngIf",!e.fieldconfig.fieldset),d.R7$(),d.Y8G("ngIf",e.fieldconfig.fieldset&&e.relData)}}function Xm(e,t){if(1&e&&(d.j41(0,"field-generic-display",4),d.DNE(1,Om,4,3,"div",5),d.k0s()),2&e){const e=d.XpG();d.Y8G("fielddisplayclass",e.fielddisplayclass)("editable",e.isEditable())("fieldconfig",e.fieldconfig)("fieldid",e.fieldid),d.R7$(),d.Y8G("ngIf",e.parentId)}}function Um(e,t){if(1&e&&(d.qex(0),d.EFF(1),d.bVm()),2&e){const e=d.XpG(3);d.R7$(),d.JRh(e.value)}}function Ym(e,t){if(1&e&&(d.qex(0),d.nrm(1,"field-linked-details",12),d.bVm()),2&e){const e=d.XpG(3);d.R7$(),d.Y8G("fieldset",e.fieldconfig.fieldset)("module",e.parentType)("data",e.relData)}}function Nm(e,t){if(1&e){const e=d.RV6();d.j41(0,"div",18)(1,"div",19)(2,"span",20)(3,"span",21),d.nrm(4,"system-icon",10),d.k0s(),d.j41(5,"span",22),d.DNE(6,Um,2,1,"ng-container",9)(7,Ym,2,3,"ng-container",9),d.k0s(),d.j41(8,"button",23),d.bIt("click",(function(){d.eBV(e);const t=d.XpG(2);return d.Njj(t.clearParent())})),d.nrm(9,"system-button-icon",24),d.k0s()()()()}if(2&e){const e=d.XpG(2);d.R7$(4),d.Y8G("module",e.model.data[e.parentTypeField])("size","small"),d.R7$(2),d.Y8G("ngIf",!e.fieldconfig.fieldset),d.R7$(),d.Y8G("ngIf",e.fieldconfig.fieldset),d.R7$(2),d.Y8G("icon","close")}}function Vm(e,t){if(1&e){const e=d.RV6();d.j41(0,"li",45),d.bIt("click",(function(){const t=d.eBV(e).$implicit,s=d.XpG(4);return d.Njj(s.setParentType(t))})),d.j41(1,"div",46)(2,"div",47),d.nrm(3,"system-icon",48),d.j41(4,"div",49),d.nrm(5,"system-label-modulename",50),d.k0s()()()()}if(2&e){const e=t.$implicit;d.R7$(3),d.Y8G("module",e),d.R7$(2),d.Y8G("module",e)}}const Am=e=>({"slds-is-open":e});function Pm(e,t){if(1&e){const e=d.RV6();d.j41(0,"div",36)(1,"div",14)(2,"div",37)(3,"div",38)(4,"div",28)(5,"div",39),d.bIt("click",(function(){d.eBV(e);const t=d.XpG(3);return d.Njj(t.openParentTypes())})),d.nrm(6,"input",40)(7,"system-icon",41),d.k0s(),d.j41(8,"div",42)(9,"ul",43),d.DNE(10,Vm,6,2,"li",44),d.k0s()()()()()()()}if(2&e){const e=d.XpG(3);d.R7$(4),d.Y8G("ngClass",d.eq3(3,Am,e.parentTypeSelectOpen)),d.R7$(2),d.Y8G("value",e.language.getModuleName(e.parentType)),d.R7$(4),d.Y8G("ngForOf",e.parentTypes)}}function zm(e,t){if(1&e){const e=d.RV6();d.j41(0,"field-lookup-recent",51),d.bIt("selectedObject",(function(t){d.eBV(e);const s=d.XpG(3);return d.Njj(s.setParent(t))})),d.k0s()}if(2&e){const e=d.XpG(3);d.Y8G("module",e.parentType)}}function Hm(e,t){if(1&e){const e=d.RV6();d.j41(0,"field-lookup-search",52),d.bIt("selectedObject",(function(t){d.eBV(e);const s=d.XpG(3);return d.Njj(s.setParent(t))}))("searchWithModal",(function(){d.eBV(e);const t=d.XpG(3);return d.Njj(t.searchWithModal())})),d.k0s()}if(2&e){const e=d.XpG(3);d.Y8G("module",e.parentType)("searchterm",e.parentSearchTerm)}}function qm(e,t){if(1&e){const e=d.RV6();d.j41(0,"div",25),d.DNE(1,Pm,11,5,"div",26),d.j41(2,"div",27)(3,"div",28)(4,"div",29)(5,"input",30,31),d.bIt("focus",(function(){d.eBV(e);const t=d.XpG(2);return d.Njj(t.onFocusParent())})),d.mxI("ngModelChange",(function(t){d.eBV(e);const s=d.XpG(2);return d.DH7(s.parentSearchTerm,t)||(s.parentSearchTerm=t),d.Njj(t)})),d.k0s(),d.j41(7,"button",32),d.bIt("click",(function(){d.eBV(e);const t=d.XpG(2);return d.Njj(t.searchWithModal())})),d.nrm(8,"system-button-icon",24),d.k0s()(),d.j41(9,"div",33),d.DNE(10,zm,1,1,"field-lookup-recent",34)(11,Hm,1,2,"field-lookup-search",35),d.k0s()()()()}if(2&e){const e=d.XpG(2);d.R7$(),d.Y8G("ngIf",e.parentTypes.length>0),d.R7$(2),d.Y8G("ngClass",d.eq3(7,Am,e.parentSearchOpen)),d.R7$(2),d.R50("ngModel",e.parentSearchTerm),d.Y8G("placeholder",e.language.getModuleCombinedLabel("LBL_SEARCH",e.parentType)),d.R7$(3),d.Y8G("icon","search"),d.R7$(2),d.Y8G("ngIf",""===e.parentSearchTerm),d.R7$(),d.Y8G("ngIf",""!==e.parentSearchTerm)}}function Jm(e,t){if(1&e&&(d.j41(0,"div",13)(1,"div",14),d.DNE(2,Nm,10,5,"div",15)(3,qm,12,9,"div",16),d.k0s(),d.nrm(4,"field-messages",17),d.k0s()),2&e){const e=d.XpG();d.Y8G("ngClass",e.getFieldClass()),d.R7$(2),d.Y8G("ngIf",e.model.data[e.parentIdField]),d.R7$(),d.Y8G("ngIf",!e.model.data[e.parentIdField]),d.R7$(),d.Y8G("fieldname",e.fieldname)}}let Wm=(()=>{class fieldLinkedParent extends r.s{constructor(e,t,s,i,n,l,o,a,r){super(e,t,i,n,l),this.model=e,this.view=t,this.broadcast=s,this.language=i,this.metadata=n,this.router=l,this.elementRef=o,this.renderer=a,this.modal=r,this.parentTypeSelectOpen=!1,this.parentSearchOpen=!1,this.parentSearchTerm="",this.recentItems=[],this.parentTypes=[],this.subscriptions.add(this.broadcast.message$.subscribe({next:e=>this.handleMessage(e)})),this.subscriptions.add(this.model.data$.subscribe({next:()=>{this.getFieldSet()}}))}get parentIdField(){return this.fieldconfig.parentIdField?this.fieldconfig.parentIdField:"parent_id"}get parentTypeField(){return this.fieldconfig.parentTypeField?this.fieldconfig.parentTypeField:"parent_type"}get parentName(){return this.model.getField(this.fielddefs.rname??"summary_text")}get parentType(){return this.model.getField(this.parentTypeField)}get parentId(){return this.model.getField(this.parentIdField)}get displayModuleIcon(){return!this.fieldconfig.hidemoduleicon}get value(){let e=this.model.getField(this.fieldname);return e?this.fielddefs?.rname?e[this.fielddefs?.rname]:e.summary_text:""}set value(e){}get relData(){return this.model.getField(this.fieldname)??{}}ngOnInit(){this.determineParentTypes(),this.model.getField(this.parentTypeField)&&""!=this.model.getField(this.parentTypeField)||this.model.setField(this.parentTypeField,this.parentTypes[0])}getFieldSet(){this.fieldconfig.fieldset=void 0;let e=this.metadata.getComponentConfig("fieldLinkedParent",this.parentType);e.fieldset?this.fieldconfig.fieldset=e.fieldset:(e=this.metadata.getComponentConfig("fieldLinked",this.parentType),e.fieldset&&(this.fieldconfig.fieldset=e.fieldset))}determineParentTypes(){let e=[];this.fieldconfig.parenttypes?e=this.fieldconfig.parenttypes.replace(/\s/g,"").split(","):this.field_defs.parent_modules&&(e=this.field_defs.parent_modules),this.fieldconfig.sortbyparenttypes||e.sort(((e,t)=>this.language.getModuleName(e).toLowerCase()>this.language.getModuleName(t).toLowerCase()?1:-1)),this.parentTypes=e}handleMessage(e){if(e.messagedata.reference&&"model.save"===e.messagetype)if(this.fieldid===e.messagedata.reference){this.parentSearchTerm="";let t={};t[this.parentIdField]=e.messagedata.data.id,t[this.fieldname]=e.messagedata.data.summary_text,this.model.setFields(t,!0)}}onClick(e){this.elementRef.nativeElement.contains(e.target)||this.closePopups()}closePopups(){this.model.getField(this.parentIdField)&&(this.parentSearchTerm=""),this.parentSearchOpen=!1,this.parentTypeSelectOpen=!1,this.clickListener()}setParent(e){this.model.setField(this.fieldname,e.data),this.model.setField(this.parentIdField,e.id)}toggleParentTypeSelect(){this.parentTypeSelectOpen=!this.parentTypeSelectOpen,this.parentSearchOpen=!1}setParentType(e){this.parentSearchTerm="",this.model.setField(this.parentTypeField,e),this.parentTypeSelectOpen=!1}clearParent(){this.fieldconfig.promptondelete?this.modal.confirm(this.language.getLabelFormatted("LBL_PROMPT_DELETE_RELATIONSHIP",[this.language.getFieldDisplayName(this.model.module,this.fieldname,this.fieldconfig)],"long"),this.language.getLabelFormatted("LBL_PROMPT_DELETE_RELATIONSHIP",[this.language.getFieldDisplayName(this.model.module,this.fieldname,this.fieldconfig)])).subscribe((e=>{e&&this.removeRelated()})):this.removeRelated()}removeRelated(){this.model.setField(this.fieldname,""),this.model.setField(this.parentIdField,"")}openParentTypes(){this.parentTypeSelectOpen=!0,this.parentSearchOpen=!1,this.clickListener=this.renderer.listen("document","click",(e=>this.onClick(e)))}onFocusParent(){this.parentTypeSelectOpen=!1,this.parentSearchOpen=!0,this.clickListener=this.renderer.listen("document","click",(e=>this.onClick(e)))}searchWithModal(){this.parentSearchOpen=!1,this.modal.openModal("ObjectModalModuleLookup").subscribe((e=>{e.instance.module=this.parentType,e.instance.multiselect=!1,e.instance.selectedItems.subscribe((e=>{e.length&&this.setParent({id:e[0].id,text:e[0].summary_text,data:e[0]})})),e.instance.searchTerm=this.parentSearchTerm}))}static#e=this.ɵfac=function(e){return new(e||fieldLinkedParent)(d.rXU(R.g),d.rXU(G.U),d.rXU(se.m),d.rXU(k.B),d.rXU(c.yu),d.rXU(C.Ix),d.rXU(d.aKT),d.rXU(d.sFG),d.rXU(w.y))};static#t=this.ɵcmp=d.VBU({type:fieldLinkedParent,selectors:[["field-linked-parent"]],features:[d.Vt3],decls:3,vars:3,consts:[[3,"fieldname","fieldconfig",4,"ngIf"],[3,"fielddisplayclass","editable","fieldconfig","fieldid",4,"ngIf"],["class","slds-form-element__control",3,"ngClass",4,"ngIf"],[3,"fieldname","fieldconfig"],[3,"fielddisplayclass","editable","fieldconfig","fieldid"],["class","slds-grid slds-grid_vertical-align-center",4,"ngIf"],[1,"slds-grid","slds-grid_vertical-align-center"],[3,"module","size",4,"ngIf"],["system-model-popover","",3,"module","id",4,"ngIf"],[4,"ngIf"],[3,"module","size"],["system-model-popover","",3,"module","id"],[3,"fieldset","module","data"],[1,"slds-form-element__control",3,"ngClass"],[1,"slds-form-element"],["class","slds-form-element__control slds-p-around--xx-small",4,"ngIf"],["class","slds-combobox-group slds-p-around--xx-small",4,"ngIf"],[3,"fieldname"],[1,"slds-form-element__control","slds-p-around--xx-small"],[1,"slds-pill_container"],[1,"slds-pill","slds-size--1-of-1"],[1,"slds-icon_container","slds-icon-standard-account","slds-pill__icon_container"],[1,"slds-pill__label"],[1,"slds-button","slds-button--icon","slds-pill__remove",3,"click"],[3,"icon"],[1,"slds-combobox-group","slds-p-around--xx-small"],["class","slds-combobox_object-switcher slds-combobox-addon_start",4,"ngIf"],[1,"slds-combobox_container","slds-combobox-addon_end"],["role","combobox",1,"slds-combobox","slds-dropdown-trigger","slds-dropdown-trigger_click",3,"ngClass"],["role","none",1,"slds-combobox__form-element","slds-input-has-icon","slds-input-has-icon_right"],["type","text","aria-autocomplete","list","autoComplete","off","role","textbox",1,"slds-input","slds-combobox__input",3,"ngModel","placeholder","focus","ngModelChange"],["focus",""],[1,"slds-button","slds-button_icon","slds-input__icon","slds-input__icon_right",3,"click"],["role","listbox",1,"slds-dropdown","slds-dropdown_length-with-icon-7","slds-dropdown_fluid"],[3,"module","selectedObject",4,"ngIf"],[3,"module","searchterm","selectedObject","searchWithModal",4,"ngIf"],[1,"slds-combobox_object-switcher","slds-combobox-addon_start"],[1,"slds-form-element__control"],[1,"slds-combobox_container"],[1,"slds-combobox__form-element","slds-input-has-icon","slds-input-has-icon--right",3,"click"],["type","text","readonly","","autoComplete","off","role","textbox",1,"slds-input","slds-combobox__input","slds-combobox__input-value",3,"value"],["icon","down","sprite","utility","addclasses","slds-input__icon slds-input__icon_right"],["role","listbox",1,"slds-dropdown","slds-dropdown_length-5","slds-dropdown_x-small","slds-dropdown_left"],["role","group","aria-label","Suggested for you",1,"slds-listbox","slds-listbox_vertical"],["role","presentation","class","slds-listbox__item",3,"click",4,"ngFor","ngForOf"],["role","presentation",1,"slds-listbox__item",3,"click"],["role","option",1,"slds-media","slds-listbox__option","slds-listbox__option_plain","slds-media_small"],[1,"slds-grid","slds-grid--vertical-align-center"],["size","x-small",3,"module"],[1,"slds-truncate"],[3,"module"],[3,"module","selectedObject"],[3,"module","searchterm","selectedObject","searchWithModal"]],template:function(e,t){1&e&&d.DNE(0,Mm,1,2,"field-label",0)(1,Xm,2,5,"field-generic-display",1)(2,Jm,5,4,"div",2),2&e&&(d.Y8G("ngIf",t.displayLabel),d.R7$(),d.Y8G("ngIf",!t.isEditMode()),d.R7$(),d.Y8G("ngIf",t.isEditable()&&t.isEditMode()))},dependencies:[i.YU,i.Sq,i.bT,n.me,n.BC,n.vS,I.t,vs.J,_s.r,ks.j,u.b,j.K,fi,Rs._,Is.T,D.A],encapsulation:2})}return fieldLinkedParent})();function Km(e,t){if(1&e&&d.nrm(0,"field-label",3),2&e){const e=d.XpG();d.Y8G("fieldname",e.fieldname)("fieldconfig",e.fieldconfig)}}function Qm(e,t){if(1&e&&(d.j41(0,"field-generic-display",4),d.EFF(1),d.k0s()),2&e){const e=d.XpG();d.Y8G("fielddisplayclass",e.fielddisplayclass)("fieldconfig",e.fieldconfig)("editable",e.isEditable()),d.R7$(),d.SpI(" ",e.getSelectedCountry(),"\n")}}function Zm(e,t){if(1&e&&(d.j41(0,"option",10),d.EFF(1),d.k0s()),2&e){const e=t.$implicit;d.Y8G("value",e.cc),d.R7$(),d.SpI(" ",e.name," ")}}function eh(e,t){if(1&e){const e=d.RV6();d.j41(0,"div",5)(1,"div",6)(2,"select",7),d.mxI("ngModelChange",(function(t){d.eBV(e);const s=d.XpG();return d.DH7(s.value,t)||(s.value=t),d.Njj(t)})),d.DNE(3,Zm,2,2,"option",8),d.k0s()(),d.nrm(4,"field-messages",9),d.k0s()}if(2&e){const e=d.XpG();d.Y8G("ngClass",e.getFieldClass()),d.R7$(2),d.R50("ngModel",e.value),d.R7$(),d.Y8G("ngForOf",e.countries),d.R7$(),d.Y8G("fieldname",e.fieldname)}}let th=(()=>{class fieldCountries extends r.s{constructor(e,t,s,i,n,l){super(e,t,s,i,n),this.model=e,this.view=t,this.language=s,this.metadata=i,this.router=n,this.currency=l,this.countries=[];let o=this.metadata.getCountries();o.countries&&o.countries.forEach((e=>{this.countries.push({cc:e.cc,name:this.language.getLabel(e.label)})})),this.countries.sort(((e,t)=>e.name.localeCompare(t.name)))}getSelectedCountry(){if(!this.value)return"";let e=this.countries.filter((e=>e.cc==this.value));return e[0]?.name}static#e=this.ɵfac=function(e){return new(e||fieldCountries)(d.rXU(R.g),d.rXU(G.U),d.rXU(k.B),d.rXU(c.yu),d.rXU(C.Ix),d.rXU(Le.G))};static#t=this.ɵcmp=d.VBU({type:fieldCountries,selectors:[["field-countries"]],features:[d.Vt3],decls:3,vars:3,consts:[[3,"fieldname","fieldconfig",4,"ngIf"],[3,"fielddisplayclass","fieldconfig","editable",4,"ngIf"],["class","slds-form-element__control",3,"ngClass",4,"ngIf"],[3,"fieldname","fieldconfig"],[3,"fielddisplayclass","fieldconfig","editable"],[1,"slds-form-element__control",3,"ngClass"],[1,"slds-select_container","slds-m-vertical--xx-small"],[1,"slds-select",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[3,"fieldname"],[3,"value"]],template:function(e,t){1&e&&d.DNE(0,Km,1,2,"field-label",0)(1,Qm,2,4,"field-generic-display",1)(2,eh,5,4,"div",2),2&e&&(d.Y8G("ngIf",t.displayLabel),d.R7$(),d.Y8G("ngIf",!t.isEditMode()),d.R7$(),d.Y8G("ngIf",t.isEditable()&&t.isEditMode()))},dependencies:[i.YU,i.Sq,i.bT,n.xH,n.y7,n.wz,n.BC,n.vS,u.b,j.K,D.A],encapsulation:2})}return fieldCountries})();var sh=s(70335);function ih(e,t){if(1&e&&d.nrm(0,"field-label",4),2&e){const e=d.XpG(2);d.Y8G("fieldname",e.fieldname)("fieldconfig",e.fieldconfig)}}function nh(e,t){if(1&e){const e=d.RV6();d.j41(0,"div",1),d.DNE(1,ih,1,2,"field-label",2),d.j41(2,"system-checkbox-toggle",3),d.mxI("ngModelChange",(function(t){d.eBV(e);const s=d.XpG();return d.DH7(s.value,t)||(s.value=t),d.Njj(t)})),d.bIt("ngModelChange",(function(){d.eBV(e);const t=d.XpG();return d.Njj(t.setValue(t.value))})),d.k0s()()}if(2&e){const e=d.XpG();d.Y8G("ngClass",e.fieldconfig.formclass),d.R7$(),d.Y8G("ngIf",e.displayLabel),d.R7$(),d.Y8G("disabled",e.disabled),d.R50("ngModel",e.value)}}let lh=(()=>{class fieldToggle extends r.s{constructor(e,t,s,i,n,l){super(e,t,s,i,n),this.model=e,this.view=t,this.language=s,this.metadata=i,this.router=n,this.modal=l,this.hidden=!1,this.currentUser="",this.assignedUser="",this.createdBy=""}ngOnInit(){this.fieldconfig.acl&&!this.metadata.checkModuleAcl(this.model.module,this.fieldconfig.acl)&&(this.hidden=!0),this.currentUser=this.metadata.session.authData.user.id,this.currentUser=this.model.data.assigned_user_id,this.model.isNew?this.createdBy=this.model.data.created_by_id:this.createdBy=this.model.data.created_by}get disabled(){return!this.metadata.checkModuleAcl(this.model.module,"edit")||!this.userCanEdit()}userCanEdit(){return this.fieldconfig.assignedUserAccess?this.currentUser===this.assignedUser:this.currentUser===this.createdBy}setValue(e){this.model.setField(this.fieldname,e),this.fieldconfig.autoSave&&this.save()}save(){let e=this.modal.await("LBL_UPDATING");this.model.save(!0).subscribe({next:t=>{e.emit(!0)},error:()=>{e.emit(!0)},complete:()=>{e.emit(!0)}})}static#e=this.ɵfac=function(e){return new(e||fieldToggle)(d.rXU(R.g),d.rXU(G.U),d.rXU(k.B),d.rXU(c.yu),d.rXU(C.Ix),d.rXU(w.y))};static#t=this.ɵcmp=d.VBU({type:fieldToggle,selectors:[["field-toggle"]],features:[d.Vt3],decls:1,vars:1,consts:[[3,"ngClass",4,"ngIf"],[3,"ngClass"],[3,"fieldname","fieldconfig",4,"ngIf"],[3,"disabled","ngModel","ngModelChange"],[3,"fieldname","fieldconfig"]],template:function(e,t){1&e&&d.DNE(0,nh,3,4,"div",0),2&e&&d.Y8G("ngIf",!t.hidden)},dependencies:[i.YU,i.bT,n.BC,n.vS,sh.x,u.b],encapsulation:2})}return fieldToggle})();function oh(e,t){if(1&e&&d.nrm(0,"field-label",3),2&e){const e=d.XpG();d.Y8G("fieldname",e.fieldname)("fieldconfig",e.fieldconfig)}}function ah(e,t){1&e&&d.nrm(0,"system-utility-icon",4)}let rh=(()=>{class fieldNotificationIndicator extends r.s{constructor(e,t,s,i,n){super(e,t,s,i,n),this.model=e,this.view=t,this.language=s,this.metadata=i,this.router=n}get hasNotification(){return!!this.model.getField("has_notification")}static#e=this.ɵfac=function(e){return new(e||fieldNotificationIndicator)(d.rXU(R.g),d.rXU(G.U),d.rXU(k.B),d.rXU(c.yu),d.rXU(C.Ix))};static#t=this.ɵcmp=d.VBU({type:fieldNotificationIndicator,selectors:[["field-notification-indicator"]],features:[d.Vt3],decls:3,vars:3,consts:[[3,"fieldname","fieldconfig",4,"ngIf"],[3,"fielddisplayclass"],["icon","warning","size","x-small","colorclass","slds-icon-text-warning",4,"ngIf"],[3,"fieldname","fieldconfig"],["icon","warning","size","x-small","colorclass","slds-icon-text-warning"]],template:function(e,t){1&e&&(d.DNE(0,oh,1,2,"field-label",0),d.j41(1,"field-generic-display",1),d.DNE(2,ah,1,0,"system-utility-icon",2),d.k0s()),2&e&&(d.Y8G("ngIf",t.displayLabel),d.R7$(),d.Y8G("fielddisplayclass",t.fielddisplayclass),d.R7$(),d.Y8G("ngIf",t.hasNotification))},dependencies:[i.bT,E.B,u.b,j.K],encapsulation:2})}return fieldNotificationIndicator})(),dh=(()=>{class ObjectFields{static#e=this.ɵfac=function(e){return new(e||ObjectFields)};static#t=this.ɵmod=d.$C({type:ObjectFields});static#s=this.ɵinj=d.G2t({imports:[i.MD,n.YN,o.SystemComponents,a.h,l.ad]})}return ObjectFields})();("undefined"==typeof ngJitMode||ngJitMode)&&d.Obh(dh,{declarations:[y,g,v,Js,u.b,x,m.y,r.s,j.K,q,Q,be,ke,Ie,Ee,Ne,Ae,ze,Ho,Qo,Ke,st,nt,ht,kt,Ft,Pt,It,Wt,ls,cs,gs,ys,ln,un,yn,jn,Fn,Hn,Vn,Bs,Hs,di,hi,Bi,Mi,fi,Wm,Ji,Rs._,Ca.J,Is.T,wa.g,Sa.m,dl,Fa,Rl,wl,Nl,ql,Zl,ko,Lo,No,ao,ro.N,aa,ha,da,Ga,D.A,Aa,Za,Sr,Fr,fr,Zr,Nr,Pr,ad,sd,hd,gd,vd,gd,kd,Nd,xd,Md,Hd,ec,ic,bc,Ic,wc,Fc,Tc,Xc,Pc,qc,Jc,eu,lu,du,pu,Iu,Su,Du,ju,Uu,Pu,lm,Pu,Ku,rm,um,gm,Lm,Fm,th,lh,rh],imports:[i.MD,n.YN,o.SystemComponents,a.h,l.ad],exports:[y,g,u.b,m.y,r.s,j.K,be,D.A,Aa,Js,Ji,Rs._,Is.T,Sa.m,Iu,Sr,fr,Lm,It,lh,ro.N]}),d.wjB(Lo,[i.YU,i.Sq,i.bT,l.RK,u.b,j.K,D.A,Lm],[])},49722:(e,t,s)=>{"use strict";s.d(t,{H:()=>h});var i=s(21626),n=s(21413),l=s(88141),o=s(96354),a=s(54438),r=s(40553),d=s(53584),c=s(29994),u=s(92462),m=s(50531);let h=(()=>{class backend{constructor(e,t,s,i,l,o){this.http=e,this.broadcast=t,this.configurationService=s,this.session=i,this.modelutilities=l,this.modalservice=o,this.pendingRequestsCount=0,this.pendingCountChange$=new n.B,this.autoLogout={},this.reLogin=!1,this.reConnecting=!1,this.stageRequests=!1,this.stagedRequests=[],this.httpErrorsToReport=[],this.httpErrorReporting=!1,this.httpErrorReportingRetryTime=1e4,this.pendingRequests={}}getHeaders(){let e=this.session.getSessionHeader();return e=e.set("Accept","application/json"),e}prepareParams(e){let t=new i.Nl;return e&&Object.keys(e).forEach((s=>{let i=e[s];null!=i&&(t="object"==typeof i?t.append(s,JSON.stringify(i)):"boolean"==typeof i?t.append(s,!0===i?"1":"0"):"number"==typeof i?t.append(s,i+""):t.append(s,i.toString()))})),t}getRequest(e="",t={},s){const i=new n.B;if(this.stageRequests)this.stageRequest("GET",e,{getParams:t},i);else{this.increasePendingCount();const n=this.http.get(this.configurationService.getBackendUrl()+"/"+encodeURI(e),{headers:this.getHeaders(),observe:"response",params:this.prepareParams(t)}).subscribe({next:e=>{this.decreasePendingCount(),delete this.pendingRequests[s],i.next(e.body),i.complete()},error:n=>{this.decreasePendingCount(),delete this.pendingRequests[s],0==this.handleError(n,e,"GET",{getParams:t},i)&&i.error(n)}});s&&(this.pendingRequests[s]=n)}return i.asObservable()}cancelPendingRequests(e){e.forEach((e=>{this.pendingRequests[e]&&(this.decreasePendingCount(),this.pendingRequests[e].unsubscribe(),delete this.pendingRequests[e])}))}getRawRequest(e="",t={},s="blob",i={}){let n=this.session.getSessionHeader();for(let e in i)n=n.set(e,i[e]);return this.increasePendingCount(),this.http.get(this.configurationService.getBackendUrl()+"/"+e,{headers:n,params:this.prepareParams(t),responseType:"blob"}).pipe((0,l.M)({next:()=>this.decreasePendingCount(),error:()=>this.decreasePendingCount()}))}postRequest(e="",t={},s={},i){const l=new n.B;if(this.stageRequests)this.stageRequest("GET",e,{getParams:t,body:s},l);else{this.increasePendingCount();let n=this.getHeaders();n=s?n.set("Content-Type","application/json"):n.set("Content-Type","application/x-www-form-urlencoded");const o=this.http.post(this.configurationService.getBackendUrl()+"/"+encodeURI(e),s,{headers:n,observe:"response",params:this.prepareParams(t)}).subscribe({next:e=>{this.decreasePendingCount(),delete this.pendingRequests[i],l.next(e.body),l.complete()},error:n=>{this.decreasePendingCount(),delete this.pendingRequests[i],this.handleError(n,e,"POST",{getParams:t,body:s},l)||l.error(n)}});i&&(this.pendingRequests[i]=o)}return l.asObservable()}patchRequest(e="",t={},s={},i){const l=new n.B;if(this.stageRequests)this.stageRequest("PATCH",e,{getParams:t,body:s},l);else{let n=this.getHeaders();n=s?n.set("Content-Type","application/json"):n.set("Content-Type","application/x-www-form-urlencoded"),this.increasePendingCount();const o=this.http.patch(this.configurationService.getBackendUrl()+"/"+encodeURI(e),s,{headers:n,observe:"response",params:this.prepareParams(t)}).subscribe({next:e=>{this.decreasePendingCount(),delete this.pendingRequests[i],l.next(e.body),l.complete()},error:n=>{this.decreasePendingCount(),delete this.pendingRequests[i],this.handleError(n,e,"POST",{getParams:t,body:s},l)||l.error(n)}});i&&(this.pendingRequests[i]=o)}return l.asObservable()}postRequestWithProgress(e="",t={},s={},l=null,o){const a=new n.B;if(this.stageRequests)this.stageRequest("POSTWITHPROGRESS",e,{getParams:t,body:s,progress:l},a);else{let n=this.getHeaders();n=s?n.set("Content-Type","application/json"):n.set("Content-Type","application/x-www-form-urlencoded"),null!==l&&l.next(0),this.increasePendingCount();const r=this.http.post(this.configurationService.getBackendUrl()+"/"+encodeURI(e),s,{headers:n,observe:"events",params:this.prepareParams(t),reportProgress:!!l}).subscribe({next:e=>{e.type===i.hv.UploadProgress?l.next(100*e.loaded/e.total):e.type===i.hv.Response&&(this.decreasePendingCount(),delete this.pendingRequests[o],a.next(e.body),a.complete())},error:i=>{this.decreasePendingCount(),delete this.pendingRequests[o],this.handleError(i,e,"POSTWITHPROGRESS",{getParams:t,body:s,progress:l},a)||a.error(i)}});o&&(this.pendingRequests[o]=r)}return a.asObservable()}getDownloadPostRequestFile(e="",t={},s={},i){let l=new n.B,o=this.getHeaders();o=o.set("Accept","*/*");const a=this.http.post(this.configurationService.getBackendUrl()+"/"+e,s,{headers:o,observe:"response",params:this.prepareParams(t),responseType:"blob"}).subscribe({next:e=>{delete this.pendingRequests[i];let t=window.URL.createObjectURL(e.body);l.next(t),l.complete()},error:n=>{delete this.pendingRequests[i],this.handleError(n,e,"POST",{getParams:t,body:s});let o=new FileReader;o.readAsText(n.error),o.onloadend=e=>{l.error(JSON.parse(o.result.toString()))}}});return i&&(this.pendingRequests[i]=a),l.asObservable()}getLinkToDownload(e,t="GET",s=null,i=null,l=null,o){let a=new n.B,r=this.getHeaders();r=r.set("Accept","*/*"),this.increasePendingCount();const d=this.http.request(t,this.configurationService.getBackendUrl()+"/"+e,{body:i,headers:r,observe:"response",params:this.prepareParams(s),responseType:"blob"}).subscribe({next:e=>{if(this.decreasePendingCount(),delete this.pendingRequests[o],200==e.status){let t=window.URL.createObjectURL(e.body);a.next(t),a.complete()}else a.error(e.statusText)},error:n=>{this.decreasePendingCount(),delete this.pendingRequests[o],this.handleError(n,e,t,{getParams:s,body:i}),a.error(n)}});return o&&(this.pendingRequests[o]=d),a.asObservable()}downloadFile(e,t=null,s=null){let i=new n.B;return this.getLinkToDownload(e.route,e.method,e.params,e.body,e.headers).subscribe({next:e=>{let n=e,l=document.createElement("a");document.body.appendChild(l),l.href=n,s&&(l.type=s),l.download=t,l.click(),l.remove(),i.next(),i.complete()},error:e=>i.error(e)}),i.asObservable()}putRequest(e="",t={},s={},i){const l=new n.B;if(this.stageRequests)this.stageRequest("PUT",e,{getParams:t,body:s},l);else{this.increasePendingCount();const n=this.http.put(this.configurationService.getBackendUrl()+"/"+e,s,{headers:this.getHeaders(),observe:"response",params:this.prepareParams(t)}).subscribe({next:e=>{this.decreasePendingCount(),delete this.pendingRequests[i],l.next(e.body),l.complete()},error:n=>{this.decreasePendingCount(),delete this.pendingRequests[i],this.handleError(n,e,"PUT",{getParams:t,body:s},l)||l.error(n)}});i&&(this.pendingRequests[i]=n)}return l.asObservable()}deleteRequest(e="",t={},s){const i=new n.B;if(this.stageRequests)this.stageRequest("DELETE",e,{getParams:t},i);else{this.increasePendingCount();const n=this.http.delete(this.configurationService.getBackendUrl()+"/"+e,{headers:this.getHeaders(),params:this.prepareParams(t)}).subscribe({next:e=>{this.decreasePendingCount(),delete this.pendingRequests[s],i.next(e||!0),i.complete()},error:n=>{this.decreasePendingCount(),delete this.pendingRequests[s],this.handleError(n,e,"DELETE",{getParams:t},i),i.error(n)}});s&&(this.pendingRequests[s]=n)}return i.asObservable()}handleError(e,t,s,i=null,n){switch(e.status){case 503:return this.configurationService.data.startupMode="recovery",!0;case 401:return!!this.session.authData?.sessionId&&(this.stageRequest(s,t,i,n),this.stageRequests=!0,this.reLogin||(this.reLogin=!0,this.modalservice.openModal("GlobalReLogin",!1,null,!0).subscribe((e=>{e.instance.loggedin.subscribe((e=>{e&&(this.reLogin=!1,this.stageRequests=!1,this.processStagedRequests())}))}))),!0);case 0:return!!this.session.authData?.sessionId&&(this.stageRequest(s,t,i,n),this.stageRequests=!0,this.reConnecting||(this.reConnecting=!0,this.modalservice.openModal("GlobalReConnect",!1,null,!0).subscribe((e=>{e.instance.connected.subscribe((e=>{e&&(this.reConnecting=!1,this.stageRequests=!1,this.processStagedRequests())}))}))),!0);case 403:return"noLegalNoticeAccepted"===e.error?.error?.errorCode&&(this.broadcast.broadcastMessage("backend.response.error","noLegalNoticeAccepted"),!0)}return!1}stageRequest(e,t,s,i,n){this.stagedRequests.push({method:e,route:t,data:s,responseSubject:i,refID:n})}processStagedRequests(){for(let e of this.stagedRequests)switch(e.method){case"GET":this.getRequest(e.route,e.data.getParams,e.refID).subscribe({next:t=>e.responseSubject.next(t),error:t=>e.responseSubject.error(t)});break;case"POST":this.postRequest(e.route,e.data.getParams,e.data.body,e.refID).subscribe({next:t=>e.responseSubject.next(t),error:t=>e.responseSubject.error(t)});break;case"PATCH":this.patchRequest(e.route,e.data.getParams,e.data.body,e.refID).subscribe({next:t=>e.responseSubject.next(t),error:t=>e.responseSubject.error(t)});break;case"POSTWITHPROGRESS":this.postRequestWithProgress(e.route,e.data.getParams,e.data.body,e.data.progress,e.refID).subscribe({next:t=>e.responseSubject.next(t),error:t=>e.responseSubject.error(t)});break;case"PUT":this.putRequest(e.route,e.data.getParams,e.data.body,e.refID).subscribe({next:t=>e.responseSubject.next(t),error:t=>e.responseSubject.error(t)});break;case"DELETE":this.deleteRequest(e.route,e.data.getParams,e.refID).subscribe({next:t=>e.responseSubject.next(t),error:t=>e.responseSubject.error(t)})}this.stagedRequests=[]}reportError(e,t,s,i){this.httpErrorsToReport.push({clientTime:(new Date).toISOString(),clientInfo:{sessionId:this.session.authData.sessionId,userId:this.session.authData.userId,userName:this.session.authData.userName},route:t,method:s,getParams:i.getParams?i.getParams:null,error:e,body:i.body?i.body:null}),this.httpErrorReporting||(this.httpErrorReporting=!0,window.setTimeout((()=>this.errorsToBackend()),this.httpErrorReportingRetryTime))}errorsToBackend(){this.httpErrorsToReport.length&&this.postRequest("system/httperrors",null,{errors:this.httpErrorsToReport}).subscribe({next:()=>{this.httpErrorsToReport.length=0,this.httpErrorReporting=!1},error:e=>{this.httpErrorReporting=!0,window.setTimeout((()=>this.errorsToBackend()),this.httpErrorReportingRetryTime)}})}increasePendingCount(){this.pendingRequestsCount++,this.pendingCountChange$.next(this.pendingRequestsCount)}decreasePendingCount(){this.pendingRequestsCount--,this.pendingCountChange$.next(this.pendingRequestsCount)}get(e,t,s="",i){let n={};return s&&(n.trackaction=s),this.getRequest("module/"+e+"/"+t,n).pipe((0,o.T)((t=>{for(let s in t)t[s]=this.backend2spice(e,s,t[s]);return t})))}getDuplicates(e,t,s){return this.getRequest("module/"+e+"/"+t+"/duplicates",null,s)}checkDuplicates(e,t,s){return this.postRequest("module/"+e+"/duplicates",{},t,s)}getList(e,t=[],s={},i){s.start&&s.start,s.limit&&s.limit;let n=s;return n.searchfields=s.searchfields,n.offset=s.start?s.start:0,n.limit=s.limit?s.limit:25,s.listid&&(n.listid=s.listid),t.length>0&&(n.sortfields=t),this.getRequest("module/"+e,n,i).pipe((0,o.T)((t=>{try{for(let s in t.list)for(let i in t.list[s])t.list[s][i]=this.backend2spice(e,i,t.list[s][i]);return t}catch(e){return{aggregations:[],buckets:[],source:[],totalcount:[],list:[]}}})))}save(e,t,s,i=null,n=null,l){return this.postRequestWithProgress("module/"+e+"/"+t,{templateId:n},this.modelutilities.spiceModel2backend(e,s),i,l).pipe((0,o.T)((t=>this.modelutilities.backendModel2spice(e,t))))}backend2spice(e,t,s){return this.modelutilities.backend2spice(e,t,s)}spice2backend(e,t,s){return this.modelutilities.spice2backend(e,t,s)}static#e=this.ɵfac=function(e){return new(e||backend)(a.KVO(i.Qq),a.KVO(r.m),a.KVO(d.i),a.KVO(c.d),a.KVO(u.g),a.KVO(m.y))};static#t=this.ɵprov=a.jDH({token:backend,factory:backend.ɵfac,providedIn:"root"})}return backend})()},40553:(e,t,s)=>{"use strict";s.d(t,{m:()=>n});var i=s(54438);let n=(()=>{class broadcast{constructor(){this.message$=new i.bkB}broadcastMessage(e,t={}){this.message$.emit({messagetype:e,messagedata:t})}static#e=this.ɵfac=function(e){return new(e||broadcast)};static#t=this.ɵprov=i.jDH({token:broadcast,factory:broadcast.ɵfac,providedIn:"root"})}return broadcast})()},53584:(e,t,s)=>{"use strict";s.d(t,{i:()=>m});var i=s(54438),n=s(84412),l=s(77795),o=s(21626),a=s(29994),r=s(40553),d=s(345),c=s(48571),u=s(57363);let m=(()=>{class configurationService{constructor(e,t,s,l,o,a){this.http=e,this.session=t,this.broadcast=s,this.title=l,this.storeService=o,this.router=a,this.enableinstall=!1,this.initialized=!1,this.reloading=!1,this.data={startupMode:"normal",backendUrl:"api",backendextensions:{},systemparameters:{},theme:{},name:"SpiceCRM",displayloginsidebar:!1},this.assets=[],this.appdata={},this.datachanged$=new i.bkB,this.keysLoaderTaskID={},this.storeDBName="config",this.loaded$=new n.t(!1),this.getSysinfo(),this.storeService.initializeStores(this.storeDBName,["appdata"],"id").then((()=>this.storeService.readStoreAll(this.storeDBName,"appdata"))).then((e=>{e.forEach((e=>this.appdata[e.id]=e.data))})),this.broadcast.message$.subscribe((e=>this.handleLogout(e)))}get systemName(){return this.data.name?this.data.name:"SpiceCRM"}handleLogout(e){"logout"==e.messagetype&&this.reset()}clearDB(){this.storeService.clearDB(this.storeDBName,["appdata"])}reset(){this.appdata={},this.clearDB()}getBackendUrl(){return this.data.backendUrl}getFrontendUrl(){return void 0!==this.data.frontendUrl?this.data.frontendUrl:""}getUser(){return this.data.user}getPassword(){return this.data.password}getSysinfo(){this.reloading=!0;let e=this.http.get(this.getBackendUrl()+"/sysinfo");return e.subscribe({next:e=>{e&&(this.data.startupMode=e.startup_mode,this.data.languages=e.languages,this.data.backendextensions=e.extensions,this.data.systemparameters=e.systemsettings,this.data.socket_frontend=e.socket_frontend,this.data.unique_key=e.unique_key,this.data.displayloginsidebar=e.displayloginsidebar,this.data.loginSidebarUrl=e.loginSidebarUrl,this.data.allowForgotPass=e.allowForgotPass,this.data.name=e.name?e.name:"SpiceCRM",this.loaded$.next(!0)),this.initialized=!0,this.reloading=!1,e.assets&&this.setAssets(e.assets),this.setFavIcon(),this.title.setTitle(this.systemName)},error:e=>{"503"==e.status&&"crmNotInstalled"==e.error.error.errorCode&&(this.enableinstall=!0,this.router.config.unshift({path:"install",component:l.F}),this.router.navigate(["/install"]))}}),e}getAsset(e){if(this.assets&&this.assets.find((t=>t.assetkey==e))?.assetvalue)return this.assets.find((t=>t.assetkey==e)).assetvalue}setAsset(e,t){let s=this.assets.findIndex((t=>t.assetkey==e));s>=0?this.assets[s].assetvalue=t:this.assets.push({assetkey:e,assetvalue:t}),this.loaded$.next(!0)}setAssets(e,t=!1){this.assets=e,this.setColors(),t&&this.loaded$.next(!0)}getSystemParamater(e){try{return this.data.systemparameters[e]}catch(e){return!1}}checkCapability(e){return this.data.backendextensions&&this.data.backendextensions.hasOwnProperty(e)}getCapabilityConfig(e){try{return this.data.backendextensions[e]&&this.data.backendextensions[e].config?this.data.backendextensions[e].config:{}}catch(e){return{}}}hasCapabilityConfig(e){return this.data.backendextensions[e]&&this.data.backendextensions[e].config&&Object.keys(this.data.backendextensions[e].config).length>0}setData(e,t,s=!0){this.appdata[e]=t,this.storeService.writeStore(this.storeDBName,"appdata",{id:e,data:t}),this.datachanged$.emit(e),s&&this.keysLoaderTaskID[e]&&this.storeService.readStore("loaddata","loadtaskdata",this.keysLoaderTaskID[e]).subscribe({next:t=>{t[e]=this.appdata[e],this.storeService.writeStore("loaddata","loadtaskdata",{id:this.keysLoaderTaskID[e],data:t})}})}setDataFromStore(e,t,s){this.keysLoaderTaskID[t]=e,this.setData(t,s,!1)}getData(e){return!!this.appdata[e]&&this.appdata[e]}updateThemeColors(){let e,t=["color-white","color-grey-3","color-grey-9","color-grey-13","brand-background-primary","brand-primary","brand-primary-active","brand-accessible","brand-accessible-active","brand-header-contrast-cool","brand-text-link","color-background-inverse","color-border-inverse","color-background-success","color-background-success-dark","color-text-link-active","color-progressbar_item-completed","brand-primary-transparent","color-background-alt-inverse","color-border-brand","sds-c-button-brand-color-background","sds-c-button-neutral-color-background-hover","sds-c-button-brand-color-border-hover","sds-c-button-brand-color-background-active","sds-c-button-brand-color-border-active","sds-c-button-brand-color-background-hover","sds-c-input-shadow-focus","sds-c-textarea-shadow-focus","sds-c-select-shadow-focus","sds-c-button-text-color-hover","sds-c-icon-color-foreground","slds-c-slider-track-color-background","spice-alert-color-error","spice-alert-color-info","spice-alert-color-warning","spice-alert-color-success","spice-alert-color-custom"],s=this.getCapabilityConfig("theme");try{e=JSON.parse(s.colors)}catch(t){e={}}for(let s of t)document.documentElement.style.setProperty("--"+s,e[s]?e[s]:null);let i=getComputedStyle(document.documentElement).getPropertyValue("--brand-primary");i&&document.querySelector('meta[name="theme-color"]').setAttribute("content",i)}setFavIcon(){let e=document.querySelectorAll("link[ rel ~= 'icon' i]")[0];if(e){let t=this.getCapabilityConfig("theme");t.icon_image?e.setAttribute("href","data:"+t.icon_image):e.setAttribute("href","./config/favicon")}}setColors(){if(!this.getAsset("colors"))return;let e=JSON.parse(this.getAsset("colors"));for(let t in e)document.documentElement.style.setProperty("--"+t,e[t])}reloadTaskData(e){this.broadcast.message$.emit({messagetype:"configuration.reloadtaskdata",messagedata:e})}static#e=this.ɵfac=function(e){return new(e||configurationService)(i.KVO(o.Qq),i.KVO(a.d),i.KVO(r.m),i.KVO(d.hE),i.KVO(c.n),i.KVO(u.Ix))};static#t=this.ɵprov=i.jDH({token:configurationService,factory:configurationService.ɵfac,providedIn:"root"})}return configurationService})()},88421:(e,t,s)=>{"use strict";s.d(t,{G:()=>o});var i=s(54438),n=s(53584),l=s(49722);let o=(()=>{class currency{constructor(e,t){this.configuration=e,this.backend=t,this.currenciesFromBackend=[]}get currencies(){return this.configuration.getData("currencies")??[]}getCurrencies(){let e=[];for(let t of this.currencies)e.push({id:t.id,name:t.name,iso:t.iso,symbol:t.symbol});return e}getCurrencySmbol(e){let t=this.currencies.find((t=>t.id==e));return t?t.symbol:""}static#e=this.ɵfac=function(e){return new(e||currency)(i.KVO(n.i),i.KVO(l.H))};static#t=this.ɵprov=i.jDH({token:currency,factory:currency.ɵfac,providedIn:"root"})}return currency})()},47866:(e,t,s)=>{"use strict";s.d(t,{n:()=>o});var i=s(54438),n=s(92462),l=s(40553);let o=(()=>{class dockedComposer{constructor(e,t){this.modelutilities=e,this.broadcast=t,this.composers=[],this.hiddenComposers=[],this.broadcast.message$.subscribe((e=>this.handleLogout(e)))}handleLogout(e){"logout"==e.messagetype&&(this.composers=[],this.hiddenComposers=[])}addComposer(e,t,s){t?(t.data.acl=t.acl,this.composers.splice(0,0,{module:e,id:t.id,name:t.getField("summary_text"),model:{module:e,id:t.id,data:t.data},loadexpanded:s})):this.composers.splice(0,0,{module:e,id:this.modelutilities.generateGuid(),name:"",model:{},loadexpanded:s})}focusComposer(e){this.composers.some(((t,s)=>{if(t.id==e){let e=this.composers.splice(s,1);return this.composers.unshift(e.shift()),!0}}))}get maxComposers(){return Math.floor((window.innerWidth-70)/500)}static#e=this.ɵfac=function(e){return new(e||dockedComposer)(i.KVO(n.g),i.KVO(l.m))};static#t=this.ɵprov=i.jDH({token:dockedComposer,factory:dockedComposer.ɵfac,providedIn:"root"})}return dockedComposer})()},17266:(e,t,s)=>{"use strict";s.d(t,{B:()=>r});var i=s(54438),n=s(49722),l=s(40553),o=s(53584),a=s(29994);let r=(()=>{class favorite{constructor(e,t,s,i){this.backend=e,this.broadcast=t,this.configuration=s,this.session=i,this.isEnabled=!1,this.module="",this.id="",this.broadcast.message$.subscribe((e=>this.handleMessage(e)))}get favorites(){let e=this.configuration.getData("favorites");return e||[]}get isFavorite(){return!!this.favorites.find((e=>e.module_name==this.module&&e.item_id==this.id))}handleMessage(e){if("model.save"===e.messagetype)this.favorites.some(((t,s)=>{if(t.module_name===e.messagedata.module&&t.item_id==e.messagedata.id)return this.favorites[s].item_summary=e.messagedata.data.summary_text,!0}))}enable(e,t){this.isEnabled=!0,this.module=e,this.id=t}disable(){this.isEnabled=!1,this.module=void 0,this.id=void 0}getFavorites(e){return this.favorites.filter((t=>t.module_name===e))}setFavorite(){this.backend.postRequest("common/spicefavorites/"+this.module+"/"+this.id).subscribe((e=>{this.favorites.splice(0,0,{item_id:e.id,module_name:e.module,item_summary:e.summary_text,data:e.data})}))}deleteFavorite(e,t){e||(e=this.module),t||(t=this.id),this.backend.deleteRequest("common/spicefavorites/"+e+"/"+t).subscribe((s=>{this.favorites.some(((s,i)=>{if(s.module_name===e&&s.item_id===t)return this.favorites.splice(i,1),!0}))}))}static#e=this.ɵfac=function(e){return new(e||favorite)(i.KVO(n.H),i.KVO(l.m),i.KVO(o.i),i.KVO(a.d))};static#t=this.ɵprov=i.jDH({token:favorite,factory:favorite.ɵfac,providedIn:"root"})}return favorite})()},88457:(e,t,s)=>{"use strict";s.d(t,{W:()=>n});var i=s(54438);let n=(()=>{class fielderrorgrouping{constructor(){this.fieldsWithErrors={},this.nrErrorsFields=0,this.change$=new i.bkB}setError(e,t){let s=!1;t?this.fieldsWithErrors[e]||(this.fieldsWithErrors[e]=!0,this.nrErrorsFields++,s=!0):this.fieldsWithErrors[e]&&(delete this.fieldsWithErrors[e],this.nrErrorsFields--,s=!0),s&&this.change$.emit(this.nrErrorsFields)}hasErrors(){return this.nrErrorsFields||!1}static#e=this.ɵfac=function(e){return new(e||fielderrorgrouping)};static#t=this.ɵprov=i.jDH({token:fielderrorgrouping,factory:fielderrorgrouping.ɵfac})}return fielderrorgrouping})()},4921:(e,t,s)=>{"use strict";s.d(t,{q:()=>n});var i=s(54438);let n=(()=>{class footer{constructor(){this.footercontainer=null,this.modalcontainer=null,this.modalbackdrop=null,this.visibleFooterHeight=0}static#e=this.ɵfac=function(e){return new(e||footer)};static#t=this.ɵprov=i.jDH({token:footer,factory:footer.ɵfac,providedIn:"root"})}return footer})()},65029:(e,t,s)=>{"use strict";s.d(t,{s:()=>u});var i=s(21413),n=s(54438),l=s(49722),o=s(53584),a=s(29994),r=s(92462),d=s(83935),c=s(69904);let u=(()=>{class fts{constructor(e,t,s,i,n,l){this.backend=e,this.configurationService=t,this.session=s,this.modelutilities=i,this.metadata=n,this.language=l,this.httpRequestsRefID=window._.uniqueId("fts_http_ref_"),this.hits=[],this.found=0,this.runningsearch=void 0,this.runningmodulesearch=void 0,this.searchTerm="",this.searchSort={},this.searchOwner=!1,this.searchGeo={},this.searchAggregates={},this.searchModules=[],this.modulefilter="",this.buckets={},this.moduleSearchresults=[],this.lastSearchParams={},this.gloablSearchResults={},this.getSearchModules()}get loadedSearchModules(){return this.searchModules.filter((e=>this.metadata.checkModuleAcl(e,"list")))}checkForSearchTermErrors(e){let t=this.configurationService.getCapabilityConfig("search"),s=t.min_ngram?parseInt(t.min_ngram,10):3;const i=[];return e.split(" ").filter((e=>"OR"!==e&&e.length<s)).length>0&&i.push({label:"MSG_SEARCH_TERM_TOO_SHORT",nestedValues:[String(s)]}),0==i.length?void 0:i}transformHits(e){let t=[];for(let s of e)t.push(this.tranformHit(s));return t}tranformHit(e){for(let t in e._source)e._source.hasOwnProperty(t)&&"string"==typeof e._source[t]&&(e._source[t]=e._source[t]);return e}search(e,t=5){this.searchTerm=e,this.runningsearch&&this.runningsearch.unsubscribe(),this.resetData();const s=this.httpRequestsRefID+"_search";this.backend.cancelPendingRequests([s]),this.runningsearch=this.backend.postRequest("search",{},{size:t,searchterm:e,modules:this.loadedSearchModules.join(",")},s).subscribe((e=>{this.hits=e.hits.hits,this.found=e.hits.total,this.runningsearch=void 0}))}searchByModules(e){let t=new i.B;e.modules&&0!==e.modules.length||(e.modules=this.loadedSearchModules),e.searchterm&&-1!=e.searchterm.indexOf("%")&&(e.searchterm=e.searchterm.replace(/%/g,"*")),e.searchterm=e.searchterm.trim(),this.searchTerm=e.searchterm,this.searchAggregates=e.aggregates,this.searchSort=e.sortparams,this.searchGeo=e.searchgeo,this.searchOwner=e.owner,this.modulefilter=e.modulefilter,this.buckets=e.buckets,this.runningmodulesearch&&this.runningmodulesearch.unsubscribe();const s=this.httpRequestsRefID+"_search_by_modules";return this.backend.cancelPendingRequests([s]),this.runningmodulesearch=this.backend.postRequest("search",{},{modules:e.modules.length>0?e.modules.join(","):"",searchterm:e.searchterm,searchgeo:e.searchgeo,records:e.size,owner:e.owner,aggregates:this.searchAggregates,sort:this.searchSort,modulefilter:e.modulefilter,buckets:e.buckets},s).subscribe((s=>{this.moduleSearchresults=[];for(let e in s)s.hasOwnProperty(e)&&this.moduleSearchresults.push({module:e,data:{hits:this.transformHits(s[e].hits),max_score:s[e].max_score,total:s[e].total}});this.moduleSearchresults.sort(((e,t)=>{let s=parseFloat(e.data.max_score),i=parseFloat(t.data.max_score);return isNaN(s)&&isNaN(i)?1:isNaN(i)?-1:isNaN(s)||i>s?1:-1})),this.lastSearchParams=e,this.runningmodulesearch=void 0,t.next(s),t.complete()})),t.asObservable()}export(e,t,s,n={},l={},o=!1){let a=new i.B;return-1!=e.indexOf("%")&&(e=e.replace(/%/g,"*")),e=e.trim(),this.searchTerm=e,this.searchAggregates=n,this.searchSort=l,this.runningmodulesearch=this.backend.getDownloadPostRequestFile("search/export",{},{module:t,searchterm:e,fields:s,owner:o,aggregates:n,sort:this.searchSort},this.httpRequestsRefID).subscribe((e=>{a.next(e),a.complete()})),a.asObservable()}loadMore(e){let t=new i.B;if(!this.runningmodulesearch){if(e){let t=!1;for(let s of e.bucketitems)(!s.total||s.total>s.items)&&(t=!0);if(!t)return}else if(this.moduleSearchresults[0].data.hits.length>=this.moduleSearchresults[0].data.total)return;return this.runningmodulesearch=this.backend.postRequest("search",{},{modules:this.lastSearchParams.modules.length>0?this.lastSearchParams.modules.join(","):"",searchterm:this.lastSearchParams.searchterm,aggregates:this.searchAggregates,sort:this.searchSort,owner:this.searchOwner,records:this.lastSearchParams.size,start:this.moduleSearchresults[0].data.hits.length,modulefilter:this.modulefilter,buckets:e},this.httpRequestsRefID).subscribe((e=>{for(let t of this.lastSearchParams.modules)for(let s of e[t].hits)this.moduleSearchresults[0].data.hits.push(this.tranformHit(s));this.runningmodulesearch=void 0,t.next(e),t.complete()})),t.asObservable()}}getSearchModules(){this.searchModules=this.metadata.getGlobalSearchModules().sort(((e,t)=>this.language.getModuleName(e).localeCompare(this.language.getModuleName(t))))}resetData(){this.found=0,this.hits=[]}static#e=this.ɵfac=function(e){return new(e||fts)(n.KVO(l.H),n.KVO(o.i),n.KVO(a.d),n.KVO(r.g),n.KVO(d.yu),n.KVO(c.B))};static#t=this.ɵprov=n.jDH({token:fts,factory:fts.ɵfac,providedIn:"root"})}return fts})()},13562:(e,t,s)=>{"use strict";s.d(t,{d:()=>r});var i=s(21413),n=s(96697),l=s(54438),o=s(50531),a=s(345);let r=(()=>{class helper{constructor(e,t){this.modalservice=e,this.sanitizer=t,this.dialog=null,this._base64_keyStr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}getRand(){return Math.random()}S4(){return(65536*(1+this.getRand())|0).toString(16).substring(1)}generateGuid(){return this.S4()+this.S4()+"-"+this.S4()+"-"+this.S4()+"-"+this.S4()+"-"+this.S4()+this.S4()+this.S4()}confirm(e,t){let s=new i.B;return this.modalservice.confirm(t,e).subscribe((e=>{s.next(e),s.complete()})),s.asObservable()}shuffle(e){let t,s,i=e.length;for(;i;)s=Math.floor(Math.random()*i--),t=e[i],e[i]=e[s],e[s]=t;return e}encodeBase64(e){let t,s,i,n,l,o,a,r="",d=0;for(e=this._utf8_encodeBase64(e);d<e.length;)t=e.charCodeAt(d++),s=e.charCodeAt(d++),i=e.charCodeAt(d++),n=t>>2,l=(3&t)<<4|s>>4,o=(15&s)<<2|i>>6,a=63&i,isNaN(s)?o=a=64:isNaN(i)&&(a=64),r=r+this._base64_keyStr.charAt(n)+this._base64_keyStr.charAt(l)+this._base64_keyStr.charAt(o)+this._base64_keyStr.charAt(a);return r}decodeBase64(e){let t,s,i,n,l,o,a,r="",d=0;for(e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");d<e.length;)n=this._base64_keyStr.indexOf(e.charAt(d++)),l=this._base64_keyStr.indexOf(e.charAt(d++)),o=this._base64_keyStr.indexOf(e.charAt(d++)),a=this._base64_keyStr.indexOf(e.charAt(d++)),t=n<<2|l>>4,s=(15&l)<<4|o>>2,i=(3&o)<<6|a,r+=String.fromCharCode(t),64!=o&&(r+=String.fromCharCode(s)),64!=a&&(r+=String.fromCharCode(i));return r=this._utf8_decodeBase64(r),r}_utf8_encodeBase64(e){let t="";e=e.replace(/\r\n/g,"\n");for(let s=0;s<e.length;s++){let i=e.charCodeAt(s);i<128?t+=String.fromCharCode(i):i>127&&i<2048?(t+=String.fromCharCode(i>>6|192),t+=String.fromCharCode(63&i|128)):(t+=String.fromCharCode(i>>12|224),t+=String.fromCharCode(i>>6&63|128),t+=String.fromCharCode(63&i|128))}return t}_utf8_decodeBase64(e){let t="",s=0,i=0,n=0,l=0;for(;s<e.length;)i=e.charCodeAt(s),i<128?(t+=String.fromCharCode(i),s++):i>191&&i<224?(n=e.charCodeAt(s+1),t+=String.fromCharCode((31&i)<<6|63&n),s+=2):(n=e.charCodeAt(s+1),l=e.charCodeAt(s+2),t+=String.fromCharCode((15&i)<<12|(63&n)<<6|63&l),s+=3);return t}determineFileIcon(e){if(e){let t,s;if([t,s]=e.split("/"),!t)return"unknown";switch(t){case"image":case"png":case"jpeg":return"image";case"text":return"html"===s?"html":"txt";case"audio":return"audio";case"video":return"video"}switch(s){case"xml":return"xml";case"pdf":return"pdf";case"vnd.ms-excel":case"vnd.openxmlformats-officedocument.spreadsheetml.sheet":return"excel";case"vnd.openxmlformats-officedocument.wordprocessingml.document":case"vnd.oasis.opendocument.text":return"word";case"vnd.oasis.opendocument.presentation":case"vnd.openxmlformats-officedocument.presentationml.presentation":return"ppt";case"x-zip-compressed":return"zip";case"x-msdownload":return"exe"}}return"unknown"}humanFileSize(e,t=1024){let s=e;if(Math.abs(e)<t)return s+" B";let i=["kB","MB","GB","TB","PB","EB","ZB","YB"],n=-1;do{s/=t,++n}while(Math.abs(s)>=t&&n<i.length-1);return s.toFixed(1)+" "+i[n]}generatePassword(e){let t=[],s=[];["upper","number","special","lower"].forEach((t=>{e["one"+t]&&s.push(t)}));let i=e.minpwdlength;return s.forEach(((e,n)=>{let l;l=n===s.length-1?i:Math.floor(Math.random()*(i-(s.length-n-1)))+1;for(let s=0;s<l;s++)t.push(this.pwRandomChar(e));i-=l})),this.shuffle(t).join("")}pwRandomChar(e){let t="!\"#$%&'()*+,-./:;<=>?@[\\]^_{|}~";switch(e){case"upper":return String.fromCharCode(Math.floor(26*Math.random())+65);case"lower":return String.fromCharCode(Math.floor(26*Math.random())+97);case"special":return t.charAt(Math.floor(31*Math.random()));case"number":return String.fromCharCode(Math.floor(10*Math.random())+48)}}datatoBlob(e,t="",s=512){let i=[];for(let t=0;t<e.length;t+=s){let n=e.slice(t,t+s),l=new Array(n.length);for(let e=0;e<n.length;e++)l[e]=n.charCodeAt(e);let o=new Uint8Array(l);i.push(o)}return new Blob(i,{type:t})}b64toBlob(e,t="",s=512){let i=atob(e),n=[];for(let e=0;e<i.length;e+=s){let t=i.slice(e,e+s),l=new Array(t.length);for(let e=0;e<t.length;e++)l[e]=t.charCodeAt(e);let o=new Uint8Array(l);n.push(o)}return new Blob(n,{type:t})}dataToBlobUrl(e){return this.blobUrl=this.sanitizer.bypassSecurityTrustResourceUrl(URL.createObjectURL(e)),this.blobUrl}addTextSnippet(e,t,s,l,o){let a=new i.B,r="";if("PLAIN"===e.toUpperCase())r="liveCompilePlainText";else r="liveCompile";return s.openModal("ObjectModalModuleLookup",!0,o).subscribe((e=>{e.instance.module="TextSnippets",e.instance.multiselect=!1,l&&(e.instance.modulefilter=t,e.instance.filtercontext={module:l.module}),e.instance.onClose.pipe((0,n.s)(1)).subscribe({next:()=>{a.next(void 0),a.complete()}}),e.instance.selectedItems.pipe((0,n.s)(1)).subscribe((e=>{const t=l?{module:l.module,modelData:l.utils.spiceModel2backend(l.module,l.data)}:null;l.backend.postRequest(`module/TextSnippets/${e[0].id}/${r}`,null,t).pipe((0,n.s)(1)).subscribe((e=>{let t=e.html,s=[...e.html.matchAll(/&#x([A-F0-9]{4});/g)];for(let e of s)t=t.replaceAll(e[0],String.fromCharCode(parseInt(`0x${e[1]}`,16)));a.next(decodeURI(t)),a.complete()}))}))})),a.asObservable()}addTemplateVariables(e,t,s){let l=new i.B;return e.openModal("OutputTemplatesVariableHelper",!0,s).subscribe((e=>{e.instance.response.pipe((0,n.s)(1)).subscribe((e=>{l.next(e),l.complete()}))})),l.asObservable()}static#e=this.ɵfac=function(e){return new(e||helper)(l.KVO(o.y),l.KVO(a.up))};static#t=this.ɵprov=l.jDH({token:helper,factory:helper.ɵfac,providedIn:"root"})}return helper})()},69904:(e,t,s)=>{"use strict";s.d(t,{B:()=>u});var i=s(54438),n=s(21413),l=s(21626),o=s(53584),a=s(29994),r=s(40553),d=s(48571),c=s(83935);let u=(()=>{class language{constructor(e,t,s,n,l,o){this.http=e,this.configurationService=t,this.session=s,this.broadcast=n,this.storeService=l,this.metadata=o,this.languagedata={},this._currentlanguage="",this.currentlanguage$=new i.bkB,this.inlineEditEnabled=!1,this.storeDBName="language",this.storeService.initializeStores(this.storeDBName,["languages","applang","applist"],"language_code"),this.broadcast.message$.subscribe((e=>this.handleLogout(e)))}set currentlanguage(e){e||(e=this.getDefaultLanguage()),this._currentlanguage=e,this.storeService.readStoreAll(this.storeDBName,"languages").then((t=>{t.forEach((t=>{t.isCurrent=e==t.language_code,this.storeService.writeStore(this.storeDBName,"languages",{language_code:t.language_code,data:t})}))}))}get currentlanguage(){return this._currentlanguage}handleLogout(e){"logout"==e.messagetype&&this.clearDB()}clearDB(){this.storeService.clearDB(this.storeDBName,["languages","applang","applist"])}getLanguage(e){this.storeService.readStoreAll(this.storeDBName,"languages").then((t=>{this.languagedata.languages={available:t},this._currentlanguage=t.find((e=>e.isCurrent))?.language_code,this.storeService.readStore(this.storeDBName,"applang",this.currentlanguage).subscribe({next:e=>this.languagedata.applang=e,error:()=>!1}),this.storeService.readStore(this.storeDBName,"applist",this.currentlanguage).subscribe({next:e=>this.languagedata.applist=e,error:()=>!1}),e.next("getLanguage")})).catch((()=>{this.loadLanguage().subscribe((()=>{this.languagedata.languages.available.forEach((e=>{e.isCurrent=e.language_code==this.currentlanguage,this.storeService.writeStore(this.storeDBName,"languages",{language_code:e.language_code,data:e})})),e.next("getLanguage")}))}))}switchLanguage(e){let t=new n.B;return this.currentlanguage=e,this.storeService.readStore(this.storeDBName,"applang",e).subscribe({next:s=>{this.languagedata.applang=s,this.storeService.readStore(this.storeService,"applist",e).subscribe({next:e=>{this.languagedata.applist=e,this.currentlanguage$.emit(this.currentlanguage),t.next(!0),t.complete()},error:()=>{this.currentlanguage$.emit(this.currentlanguage),t.next(!0),t.complete()}})},error:()=>{this.loadLanguage().subscribe({next:()=>{t.next(!0),t.complete()}})}}),t.asObservable()}loadLanguage(){let e=new n.B,t=this.configurationService.getBackendUrl()+"/system/language";return this.currentlanguage&&(t+="/"+this.currentlanguage),this.http.get(t,{headers:this.session.getSessionHeader(),observe:"response"}).subscribe({next:t=>{let s=t.body;this.languagedata=s,this.currentlanguage||(this.currentlanguage=s.language),this.storeService.writeStore(this.storeDBName,"applang",{language_code:this.currentlanguage,data:this.languagedata.applang}),this.storeService.writeStore(this.storeDBName,"applist",{language_code:this.currentlanguage,data:this.languagedata.applist}),this.currentlanguage$.emit(this.currentlanguage),e.next(!0),e.complete()}}),e.asObservable()}getLabel(e,t="",s="default"){try{return""!=t&&void 0!==this.languagedata.mod&&null!=this.languagedata.mod[t]&&this.languagedata.mod[t][e]?this.languagedata.mod[t][e]||e:this.getAppLanglabel(e,s)}catch(t){return e}}getAppLanglabel(e,t="default"){return this.languagedata.applang[e]?"object"==typeof this.languagedata.applang[e]&&this.languagedata.applang[e][t]?this.getNestedLabel(e,t):this.getNestedLabel(e):e}getNestedLabel(e,t="default"){let s;if(this.languagedata.applang[e]&&(_.isObject(this.languagedata.applang[e])?s=this.languagedata.applang[e][t]?this.languagedata.applang[e][t]:this.languagedata.applang[e].default:_.isString(this.languagedata.applang[e])&&(s=this.languagedata.applang[e])),s){let e=this.getNestedTags(s);if(e)for(let i of e)s=s.replace("{LABEL:"+i+"}",this.getNestedLabel(i,t))}return s||e}getNestedTags(e){let t=e.indexOf("{LABEL:"),s=[];for(;t>=0;)if(t>=0){let i=e.indexOf("}",t);i>=0?(s.push(e.substring(t+7,i)),t=e.indexOf("{LABEL:",i)):t=-1}return s}getLabelFormatted(e,t,s="default"){let i;i=Array.isArray(t)?t:new Array(t);let n=0;return this.getLabel(e,"",s).replace(/%(s|%)/g,((...e)=>"s"===e[1]?i[n++]:"%"===e[1]?"%":e[0]))}getModuleName(e,t=!1,s="default"){try{let i=this.metadata.getModuleDefs(e);if(t){if(i.singular_label)return this.getLabel(i.singular_label,"",s);if(this.languagedata.applist.moduleListSingular[e])return this.languagedata.applist.moduleListSingular[e]||e}else if(i.module_label)return this.getLabel(i.module_label,"",s);return this.languagedata.applist.moduleList[e]||e}catch(t){return e}}getModuleCombinedLabel(e,t){return t?this.languagedata.applang[e+"_"+t.toUpperCase()]?this.getLabel(e+"_"+t.toUpperCase()):this.getLabel(e)+" "+this.getModuleName(t):"no module defined"}getFieldDisplayName(e,t,s={},i="default"){let n="";if(s.label)if(s.label.indexOf(":")>0){let e=s.label.split(":");n=this.getLabel(e[1],e[0])}else n=this.getLabel(s.label,e,i);else n=this.getLabel(this.metadata.getFieldlabel(e,t),e,i);return""===n?s.label?s.label:t:n}getFieldHelpText(e,t,s={}){let i="";if(s.popupHelp)if(s.popupHelp.indexOf(":")>0){let e=s.popupHelp.split(":");i=this.getLabel(e[1],e[0],"default")}else i=this.getLabel(s.popupHelp,e,"default");else i=this.getLabel(this.metadata.getFieldHelpText(e,t),e,"default");return""===i?s.popupHelp?s.popupHelp:t:i}getFieldDisplayOptions(e,t,s=!1){let i=this.metadata.getFieldOptions(e,t);if(!1===i)return[];try{let e=this.languagedata.applist[i];if(s){let t=e;e=[];for(let s in t)e.push({value:s,display:t[s]})}return e}catch(e){return[]}}getDisplayOptions(e,t=!1){let s=this.languagedata.applist[e];if(t){let e=s;s=[];for(let t in e)s.push({value:t,display:e[t]})}return s}getFieldDisplayOptionValue(e,t,s){let i=this.metadata.getFieldOptions(e,t);if(!1===i)return s;try{return this.languagedata.applist[i][s]?this.languagedata.applist[i][s]:s}catch(e){return s}}getAvialableLanguages(e=!1){let t=[];for(let s of this.languagedata.languages.available)(!e||s.system_language&&0!=s.system_language)&&t.push({language:s.language_code,text:s.language_name,system_language:s.system_language,communication_language:s.communication_language,default_language:s.language_code==this.languagedata.languages.default});return t}addAvailableLanguage(e){let t=!1;this.languagedata.languages.available.some((s=>{if(s.language_code==e.language_code)return s.system_language=e.system_language,s.default_language=e.default_language,e.default_language&&this.setDefaultLanguage(e.language_code),t=!0,!0})),t||(this.languagedata.languages.available.push(e),this.storeService.writeStore(this.storeDBName,"languages",{language_code:e.language_code,data:e}))}removeAvailableLanguage(e){this.languagedata.languages.available.some((e=>{if(e.language_code==e)return e.system_language=!1,!0}))}getDefaultLanguage(){return this.languagedata.languages.default}setDefaultLanguage(e){this.http.post(this.configurationService.getBackendUrl()+"/configuration/syslanguages/setdefault/"+e,{},{headers:this.session.getSessionHeader(),observe:"response"}).subscribe((t=>{t.body.success&&(this.languagedata.languages.default=e)}))}getLangText(e){let t=e;return this.languagedata.languages.available.some((s=>{if(s.language_code==e)return t=s.language_name,!0})),t}searchLabel(e,t=10){let s=[],i=e.toLowerCase().split(" ");for(let e in this.languagedata.applang){let n=!0;for(let t of i)if(e.toLocaleLowerCase().indexOf(t)<0){n=!1;break}if(n&&s.push({label:e,translation:this.getAppLanglabel(e)}),s.length>=t)break}return s}addLabel(e,t="",s="",i=""){this.languagedata.applang[e]={default:t,long:i,short:s}}compareStrings(e,t){return e.localeCompare(t,this._currentlanguage.slice(0,2))}sortArray(e,t=!1){e.sort(((e,s)=>this.compareStrings(e,s)*(t?-1:1)))}sortObjects(e,t,s=!1){e.sort(((e,i)=>this.compareStrings(e[t],i[t])*(s?-1:1)))}ucFirst(e){return e.charAt(0).toLocaleUpperCase(this._currentlanguage.slice(0,2))+e.slice(1)}lcFirst(e){return e.charAt(0).toLocaleLowerCase(this._currentlanguage.slice(0,2))+e.slice(1)}static#e=this.ɵfac=function(e){return new(e||language)(i.KVO(l.Qq),i.KVO(o.i),i.KVO(a.d),i.KVO(r.m),i.KVO(d.n),i.KVO(c.yu))};static#t=this.ɵprov=i.jDH({token:language,factory:language.ɵfac,providedIn:"root"})}return language})()},71692:(e,t,s)=>{"use strict";s.d(t,{Z:()=>n});var i=s(54438);let n=(()=>{class layout{constructor(){this.headerheight=90}get screenwidth(){let e=window.innerWidth;return e>=1024?"large":e>=768?"medium":"small"}static#e=this.ɵfac=function(e){return new(e||layout)};static#t=this.ɵprov=i.jDH({token:layout,factory:layout.ɵfac,providedIn:"root"})}return layout})()},82802:(e,t,s)=>{"use strict";s.d(t,{b:()=>r});var i=s(10467),n=s(54438),l=s(21413),o=s(7673),a=s(53584);let r=(()=>{class libloader{constructor(e){this.configuration=e,this.loadedLibs=[],this.loadedLibs$=new n.bkB,this.loadedDirect=[]}get scripts(){return this.configuration.getData("scripts")}loadLibs(...e){let t=[];e.forEach((e=>{t.push(this.loadLib(e))}));let s=new l.B,i=0;for(let e of t)e.subscribe((e=>{i++,i==t.length&&(s.next(!0),s.complete())}),(e=>{i++,s.error(e)}));return i==t.length?(0,o.of)(s):s.asObservable()}loadLib(e){if(this.scripts[e]){if(this.isLibLoaded(e))return(0,o.of)({script:e,loaded:!0,status:"Already Loaded"});if(this.isLibLoading(e))return this.loadedLibs$;{this.loadedLibs.push({name:e,status:"loading"});let t=new l.B;return this.loadScriptsDirect(this.scripts[e]).then((s=>{t.next({script:e,loaded:!0,status:"Loaded"}),t.complete(),this.loadedLibs.find((t=>t.name==e)).status="loaded",this.loadedLibs$.emit({script:e,loaded:!0,status:"Loaded"})}),(s=>{t.error({script:e,loaded:!1,status:"error"}),t.complete(),this.loadedLibs.find((t=>t.name==e)).status="error",this.loadedLibs$.emit({script:e,loaded:!0,status:"error"})})),t.asObservable()}}return(0,o.of)({script:e,loaded:!1,status:"Unknown"})}loadScriptsDirect(e){var t=this;return(0,i.A)((function*(){return new Promise(function(){var s=(0,i.A)((function*(s,i){let n=0;for(let l of e)yield t.loadScriptDirect(l.src).then((t=>{n++,n==e.length&&s({script:l.name,loaded:!0,status:"Loaded"})}),(e=>{i({script:l.name,loaded:!1,status:"error"})}))}));return function(e,t){return s.apply(this,arguments)}}())}))()}loadFromSource(e){let t=new l.B,s=0;for(let i of e)this.loadScriptDirect(i).then((i=>{s++,s==e.length&&(t.next(!0),t.complete())}),(e=>{t.error(!1),t.complete()}));return t.asObservable()}loadScriptDirect(e){var t=this;return(0,i.A)((function*(){return-1!=t.loadedDirect.indexOf(e)?Promise.resolve(!0):new Promise(((t,s)=>{let i={};e.endsWith(".css")?(i=document.createElement("link"),i.rel="stylesheet",i.href=e):(i=document.createElement("script"),i.type="text/javascript",i.src=e),i.readyState?i.onreadystatechange=()=>{"loaded"!==i.readyState&&"complete"!==i.readyState||(i.onreadystatechange=null,t(!0))}:i.onload=()=>{t(!0)},i.onerror=e=>{s(!1)},document.getElementsByTagName("head")[0].appendChild(i)}))}))()}isLibLoaded(e){return!!this.loadedLibs.find((t=>t.name==e&&"loaded"==t.status))}isLibLoading(e){return!!this.loadedLibs.find((t=>t.name==e&&"loading"==t.status))}static#e=this.ɵfac=function(e){return new(e||libloader)(n.KVO(a.i))};static#t=this.ɵprov=n.jDH({token:libloader,factory:libloader.ɵfac,providedIn:"root"})}return libloader})()},20673:(e,t,s)=>{"use strict";s.d(t,{w:()=>m});var i=s(21413),n=s(54438),l=s(21626),o=s(40553),a=s(53584),r=s(29994),d=s(69904),c=s(49722),u=s(48571);let m=(()=>{class loader{constructor(e,t,s,n,l,o,a){this.http=e,this.broadcast=t,this.configuration=s,this.session=n,this.language=l,this.backend=o,this.storeService=a,this.module="",this.id="",this.data={},this.loaderHandler=new i.B,this.start="",this.counterCompleted=0,this.progress=0,this.activeLoader="",this.loadPhase="system",this.loadElements={system:[{name:"getLanguage",display:"Language",status:"initial",sequence:35,action:e=>{e.language.getLanguage(e.loaderHandler)}}],primary:[],secondary:[]},this.storeDBName="loaddata",this.loaderHandler.subscribe((e=>this.handleLoaderHandler())),this.storeService.initializeStores(this.storeDBName,["loadtaskdata","loadtasks"],"id"),this.broadcast.message$.subscribe((e=>{this.handleLogout(e),"configuration.reloadtaskdata"==e.messagetype&&this.loadTaskItemFromBackendByName(e.messagedata)}))}getLoadTasks(){let e=new i.B;return this.storeService.readStoreAll(this.storeDBName,"loadtasks").then((t=>{this.processLoadTasks(t,!1),e.next(!0),e.complete()})).catch((()=>{this.getLoadTasksFromBackend(e)})),e.asObservable()}getLoadTasksFromBackend(e){this.http.get(this.configuration.getBackendUrl()+"/system/spiceui/core/loadtasks",{headers:this.session.getSessionHeader()}).subscribe((t=>{this.processLoadTasks(t),e.next(!0),e.complete()}))}processLoadTasks(e,t=!0){this.loadElements.primary=[],this.loadElements.secondary=[];for(let s of e)s.status="initial",this.loadElements[s.phase].push(s),t&&this.storeService.writeStore(this.storeDBName,"loadtasks",{id:s.id,data:s});this.loadElements.primary.sort(((e,t)=>parseInt(e.sequence,10)>parseInt(t.sequence,10)?1:-1)),this.loadElements.secondary.sort(((e,t)=>parseInt(e.sequence,10)>parseInt(t.sequence,10)?1:-1))}clearDB(){this.storeService.clearDB(this.storeDBName,["loadtaskdata","loadtasks"])}handleLogout(e){"logout"==e.messagetype&&this.clearDB()}load(e=!0){return e&&(this.clearDB(),this.language.clearDB(),this.configuration.clearDB()),this.loadComplete=new i.B,this.getLoadTasks().subscribe((e=>{this.resetLoader(),this.start=performance.now(),this.handleLoaderHandler()})),this.loadComplete.asObservable()}reloadPrimary(){this.loadComplete=new i.B,this.loadPhase="primary",this.progress=0,this.counterCompleted=0;for(let e of this.loadElements.primary)e.status="initial";return this.start=performance.now(),this.handleLoaderHandler(),this.loadComplete.asObservable()}resetLoader(){this.counterCompleted=0,this.progress=0,this.loadPhase="system";for(let e of this.loadElements.system)e.status="initial";for(let e of this.loadElements.primary)e.status="initial";for(let e of this.loadElements.secondary)e.status="initial"}reset(){this.counterCompleted=0,this.progress=0;for(let e of this.loadElements.system)e.status="initial";for(let e of this.loadElements.primary)e.status="initial";for(let e of this.loadElements.secondary)e.status="initial"}setComplete(){performance.now()-this.start>500?this.complete():setTimeout((()=>this.complete()),500)}complete(){this.loadComplete.next(!0),this.loadComplete.complete()}handleLoaderHandler(){let e=!1;for(let t of this.loadElements[this.loadPhase])if("active"===t.status){t.status="completed";let e=++this.counterCompleted/(this.loadElements.primary.length+this.loadElements.system.length)*100;this.progress=e}else if("initial"===t.status){t.status="active",t.action?t.action(this):this.handleRouteElement(t),e=!0,this.activeLoader=t.display;break}!1===e&&"system"==this.loadPhase?(this.loadPhase="primary",this.handleLoaderHandler()):!1===e&&"primary"==this.loadPhase&&(this.setComplete(),this.loadPhase="secondary",this.broadcast.broadcastMessage("loader.primarycompleted"),this.handleLoaderHandler())}handleRouteElement(e){this.storeService.readStore(this.storeDBName,"loadtaskdata",e.id).subscribe({next:t=>{this.processLoadElementData(e.id,t),this.broadcast.broadcastMessage("loader.completed",e.name),this.loaderHandler.next(e.name)},error:()=>{this.loadRouteElementFromBackend(e)}})}loadRouteElementFromBackend(e){let t=e.route?e.route:"/system/spiceui/core/loadtasks/"+e.id;this.http.get(this.configuration.getBackendUrl()+t,{headers:this.session.getSessionHeader()}).subscribe({next:t=>{this.storeService.writeStore(this.storeDBName,"loadtaskdata",{id:e.id,data:t}),this.processLoadElementData(e.id,t),this.broadcast.broadcastMessage("loader.completed",e.name),this.loaderHandler.next(e.name)},error:()=>{this.broadcast.broadcastMessage("loader.completed",e.name),this.loaderHandler.next(e.name)}})}processLoadElementData(e,t){for(let s in t)this.configuration.setDataFromStore(e,s,t[s])}loadTaskItemFromBackendByName(e){this.backend.getRequest(`system/spiceui/core/loadtaskitem/${e}`).subscribe({next:t=>{this.configuration.setData(e,t[e])}})}static#e=this.ɵfac=function(e){return new(e||loader)(n.KVO(l.Qq),n.KVO(o.m),n.KVO(a.i),n.KVO(r.d),n.KVO(d.B),n.KVO(c.H),n.KVO(u.n))};static#t=this.ɵprov=n.jDH({token:loader,factory:loader.ɵfac,providedIn:"root"})}return loader})()},2:(e,t,s)=>{"use strict";s.d(t,{O:()=>l});var i=s(54438);const n=()=>{};let l=(()=>{class loggerService{get info(){return this.isDev()?console.info.bind(console):n}get warn(){return this.isDev()?console.warn.bind(console):n}get log(){return this.isDev()?console.log.bind(console):n}get error(){return this.isDev()?console.error.bind(console):n}isDev(){return(0,i.naY)()||this.sessionService&&this.sessionService.isDev}setSession(e){this.sessionService=e}static#e=this.ɵfac=function(e){return new(e||loggerService)};static#t=this.ɵprov=i.jDH({token:loggerService,factory:loggerService.ɵfac,providedIn:"root"})}return loggerService})()},54095:(e,t,s)=>{"use strict";s.d(t,{B:()=>b,c:()=>y});var i=s(21626),n=s(21413),l=s(54438),o=s(53584),a=s(57363),r=s(20673),d=s(41081),c=s(13562),u=s(29994),m=s(40553),h=s(92462),g=s(50531),p=s(83935),f=s(49722);let b=(()=>{class loginService{constructor(e,t,s,i,n,l,o,a,r,d,c,u){this.configurationService=e,this.http=t,this.router=s,this.loader=i,this.toast=n,this.helper=l,this.session=o,this.broadcast=a,this.modelutilities=r,this.modal=d,this.metadata=c,this.backend=u,this.redirectUrl="",this.authData={userName:"",password:"",keepMeLoggedIn:!1},this.oauthIssuer="",this.broadcast.message$.subscribe((e=>{"loader.completed"===e.messagetype&&"loadUserData"===e.messagedata&&this.session.authData.obtainGDPRconsent&&this.modal.openModal("GlobalObtainGDPRConsentContainer")}))}login(e=!0){let t=new n.B,s=this.configurationService.getBackendUrl()+"/authentication/login";const i={};if(this.authData.userName&&this.authData.userName.indexOf("#as#")>0&&this.authData.userName&&this.authData.password){const[e,t]=this.authData.userName.split("#as#");i.impersonationuser=encodeURIComponent(e),this.authData.userName=t}const l=this.generateLoginHeaders(this.authData.password,this.authData.userName,this.tokenObject);return this.http.get(s,{headers:l,params:i}).subscribe({next:s=>{0==s.result&&this.toast.sendToast("error authenticating","error",s.error);let i=s;this.session.authData.sessionId=i.id,this.session.authData.userId=i.userid,this.session.authData.companycode_id=i.companycode_id,this.session.authData.tenant_id=i.tenant_id,this.session.authData.tenant_name=i.tenant_name,this.session.authData.tenant_accepted_legal_notice=i.tenant_accepted_legal_notice,this.session.authData.tenant_wizard_completed=i.tenant_wizard_completed,this.session.authData.userName=i.user_name,this.session.authData.email=i.email,this.session.authData.admin=i.admin,this.session.authData.dev=i.dev,this.session.authData.portalOnly=i.portal_only,this.session.authData.googleToken=i.access_token,this.session.authData.obtainGDPRconsent=i.obtainGDPRconsent,this.session.authData.canchangepassword=i.canchangepassword,this.session.authData.user=this.modelutilities.backendModel2spice("Users",i.user),this.session.storeToken(this.authData.keepMeLoggedIn),sessionStorage[btoa(this.session.authData.sessionId+":backendurl")]=btoa(this.configurationService.getBackendUrl()),this.broadcast.broadcastMessage("login"),this.load(e),t.next(!0),t.complete()},error:e=>{switch(e.status){case 401:case 503:t.error(e.error.error);break;default:this.toast.sendToast("Application Error","error","Error Authenticating"),t.error(e.statusText)}t.complete()}}),t.asObservable()}generateLoginHeaders(e,t,s){let n=new i.Lr;if(t&&e)n=n.set("Authorization","Basic "+this.helper.encodeBase64(t+":"+e)),this.authData.code2fa&&(n=n.set("code2fa",this.authData.code2fa)),this.session.deviceID&&(n=n.set("device-id",this.session.deviceID)),this.authData.rememberDevice&&(n=n.set("remember-device",this.session.deviceID));else{if(!s)throw new Error("Cannot Log In");n=n.set("OAuth-Token",s.access_token).set("OAuth-Issuer",this.oauthIssuer).set("OAuth-Refresh-Token",s.refresh_token??"").set("OAuth-Token-Valid-Until",s.valid_until??"")}return n}relogin(e,t){let s=this.configurationService.getBackendUrl()+"/authentication/login",i=new n.B;const l=this.generateLoginHeaders(e,this.session.authData.userName,t);return this.http.get(s,{headers:l}).subscribe({next:e=>{let t=e;this.session.authData.sessionId=t.id,this.session.storeToken(this.authData.keepMeLoggedIn),i.next(!0),i.complete(),this.broadcast.broadcastMessage("relogin")},error:e=>{switch(e.status){case 401:case 503:this.toast.sendToast(e.error?.error?.message,"error"),i.error(e.error.error);break;default:this.toast.sendToast("Application Error","error","Error Authenticating"),i.error(e.statusText)}i.complete()}}),i.asObservable()}renewPassword(e){let t=this.configurationService.getBackendUrl()+"/user/password/change";if(this.authData.userName&&this.authData.password){let s=new i.Lr;s=s.set("Authorization","Basic "+this.helper.encodeBase64(this.authData.userName+":"+this.authData.password)),this.http.post(t,{newpwd:e},{headers:s}).subscribe({next:e=>{}})}}load(e=!0){this.loader.load(e).subscribe((e=>{this.redirect(e)}))}redirect(e){!0===e&&(this.session.authData.loaded=!0,this.toast.clearAll(),this.redirectUrl?(this.router.navigate([this.redirectUrl]),this.redirectUrl=""):this.router.navigate(["/"]))}logout(e=!1){e||this.backend.deleteRequest("authentication/login",{session_id:this.session.authData.sessionId}),this.session.endSession(),this.loader.reset(),this.broadcast.broadcastMessage("logout"),this.router.navigate(["/login"])}static#e=this.ɵfac=function(e){return new(e||loginService)(l.KVO(o.i),l.KVO(i.Qq),l.KVO(a.Ix),l.KVO(r.w),l.KVO(d.o),l.KVO(c.d),l.KVO(u.d),l.KVO(m.m),l.KVO(h.g),l.KVO(g.y),l.KVO(p.yu),l.KVO(f.H))};static#t=this.ɵprov=l.jDH({token:loginService,factory:loginService.ɵfac,providedIn:"root"})}return loginService})(),y=(()=>{class loginCheck{constructor(e,t,s,i,n){this.login=e,this.session=t,this.modal=s,this.router=i,this.loader=n}canActivate(e,t){return!(!this.session||!this.session.authData.sessionId)||("/"!=t.url&&(this.login.redirectUrl=t.url),this.router.navigate(["/login"]),!1)}static#e=this.ɵfac=function(e){return new(e||loginCheck)(l.KVO(b),l.KVO(u.d),l.KVO(g.y),l.KVO(a.Ix),l.KVO(r.w))};static#t=this.ɵprov=l.jDH({token:loginCheck,factory:loginCheck.ɵfac,providedIn:"root"})}return loginCheck})()},83935:(e,t,s)=>{"use strict";s.d(t,{yu:()=>k});var i=s(10467),n=s(18810),l=s(21413),o=s(86648),a=s(99437),r=s(25558),d=s(7673),c=s(54438),u=s(97696),m=s(96354),h=s(63021),g=s(13639),p=s(21626),f=s(29994),b=s(53584),y=s(57363),v=s(40553);let k=(()=>{class metadata{constructor(e,t,s,i,n,l){this.http=e,this.session=t,this.configuration=s,this.router=i,this.broadcast=n,this.Injector=l,this.role="",this.broadcast.message$.subscribe((e=>this.handleMessage(e)))}get actionSets(){return this.configuration.getData("actionsets")}get componentDefaultConfigs(){return this.configuration.getData("componentdefaultconfigs")}get componentModuleConfigs(){return this.configuration.getData("componentmoduleconfigs")}get moduleDirectory(){return this.configuration.getData("modules")?this.configuration.getData("modules"):{}}get componentDirectory(){return this.configuration.getData("components")?this.configuration.getData("components"):{}}get componentSets(){return this.configuration.getData("componentsets")}get routes(){return this.configuration.getData("routes")}get scripts(){return this.configuration.getData("scripts")}get fieldSets(){return this.configuration.getData("fieldsets")}get validationRules(){return this.configuration.getData("validationrules")}get fieldDefs(){return this.configuration.getData("fielddefs")}get fieldTypeMappings(){return this.configuration.getData("fieldtypemappings")}get fieldStatusNetworks(){return this.configuration.getData("fieldstatusnetworks")}get moduleDefs(){return this.configuration.getData("moduledefs")}get moduleFilters(){return this.configuration.getData("modulefilters")}get sysroles(){return this.configuration.getData("sysroles")}get roles(){return this.configuration.getData("roles")}get rolemodules(){return this.configuration.getData("rolemodules")}get copyrules(){return this.configuration.getData("copyrules")}get htmlStyleData(){return this.configuration.getData("htmlstyles")}get countries(){return this.configuration.getData("countries")}addRoutes(){this.routes.forEach((e=>{this.router.config.unshift({path:e.path,component:h.X,canActivate:[R]}),this.router.config.unshift({path:"tab/:tabid/"+e.path,component:h.X,canActivate:[R]})}))}addComponentDirect(e,t,s){const i=this.hasRenderError(e,t);if(i)return this.renderMissingComponent(t,e),console.error(i),(0,n.$)((()=>i));const o=new l.B,a=this.componentDirectory[e].module,r={name:this.moduleDirectory[a].module,path:this.moduleDirectory[a].path.replace("app/","")};return this.renderComponent(r,e,t,[],s).subscribe({next:e=>{e.instance.self=e,o.next(e),o.complete()},error:s=>{this.renderMissingComponent(t,e),o.error(s)}}),o.asObservable()}checkComponent(e){return!!this.componentDirectory[e]}importModule(e){return(0,i.A)((function*(){return s(48649)(`./${e.path}.ts`).then((t=>t[e.name]))}))()}renderMissingComponent(e,t){e.createComponent(g.R).instance.component=t}loadComponentType(e,t){return(0,o.H)(this.importModule(e)).pipe((0,a.W)((()=>(0,n.$)((()=>`Could not find the module file for path ${e.path}. Check if the module file exists or use a correct module path.`)))),(0,r.n)((s=>{if(!s)return(0,n.$)((()=>`Module name ${e.name} in the config does not match the class name in the module file.`));let i;return Object.keys(s).some((e=>!!s[e].hasOwnProperty("declarations")&&(i=s[e].declarations.find((e=>e.name==t)),!0))),(0,d.of)(i)})))}renderComponent(e,t,s,i,n){return this.loadComponentType(e,t).pipe((0,m.T)((e=>{const t=s.createComponent(e,{injector:n});return i.forEach((e=>t.instance[e.property]=e.value)),t.changeDetectorRef.markForCheck(),t})))}hasRenderError(e,t){return t?this.componentDirectory[e]&&this.componentDirectory[e].module?void 0:`misconfiguration for component ${e} in object repository`:"ViewContainerRef was passed is undefined"}loadComponentContainer(e,t,s){const i=t.createComponent(u.k,{injector:s});return i.instance.containerComponent=e,i}addComponent(e,t,s){const i=this.hasRenderError(e,t);if(i)return this.renderMissingComponent(t,e),(0,n.$)((()=>i));const o=new l.B,a=this.loadComponentContainer(e,t,s);return a.instance.containerRef.subscribe((t=>{a.changeDetectorRef.detectChanges(),this.addComponentDirect(e,t).subscribe((e=>{o.next(e),o.complete()}))})),a.instance.loaded=!0,a.changeDetectorRef.detectChanges(),a.changeDetectorRef.markForCheck(),o.asObservable()}getComponentSet(e){return this.componentSets[e]}getAllComponentsets(){try{return this.componentSets}catch(e){return""}}addComponentSet(e,t,s,i="custom"){this.componentSets[e]={name:s,module:t,type:i,items:[]}}getRawComponentSets(){return this.componentSets}getComponentSets(e=""){let t=[];for(let s in this.componentSets)""!==e&&this.componentSets[s].module!==e||t.push({id:s,name:this.componentSets[s].name,module:this.componentSets[s].module,type:this.componentSets[s].type});return t.sort(((e,t)=>e.name?e.name.localeCompare(t.name):1)),t}getComponentSetObjects(e){try{return this.componentSets[e].items}catch(e){return[]}}addComponentToComponentset(e,t,s,i={}){this.componentSets[t].items.push({id:e,component:s,componentconfig:i,sequence:0});let n=0;for(let e of this.componentSets[t].items)e.sequence=n,n++}getRawFieldSets(){return this.fieldSets}getFieldSets(e="",t=""){let s=[];for(let t in this.fieldSets)""!==e&&this.fieldSets[t].module!==e||s.push({id:t,name:this.fieldSets[t].name,module:this.fieldSets[t].module,type:this.fieldSets[t].type});return s.sort(((e,t)=>e.name>t.name?1:-1)),s}getFieldset(e){try{return this.fieldSets[e]}catch(e){return""}}getAllFieldsets(){try{return this.fieldSets}catch(e){return""}}setFieldset(e,t){this.fieldSets[e].name=t.name,this.fieldSets[e].package=t.package,this.configuration.setData("fieldsets",this.fieldSets)}addFieldset(e,t,s,i="custom",n=[]){this.fieldSets[e]={items:n,module:t,name:s,type:i},this.configuration.setData("fieldsets",this.fieldSets)}addFieldsetToFieldset(e,t,s,i={}){this.fieldSets[t].items.push({id:e,fieldset:s,fieldconfig:i,sequence:0});let n=0;for(let e of this.fieldSets[t].items)e.sequence=n,n++;this.configuration.setData("fieldsets",this.fieldSets)}addFieldToFieldset(e,t,s,i={}){this.fieldSets[t].items.push({id:e,field:s,fieldconfig:i,sequence:0});let n=0;for(let e of this.fieldSets[t].items)e.sequence=n,n++;this.configuration.setData("fieldsets",this.fieldSets)}removeFieldsetItem(e,t){let s=!1;if(this.fieldSets[e].items.some(((e,i)=>{if(e.id==t.id)return s=i,!0})),!1!==s){this.fieldSets[e].items.splice(s,1);let t=0;for(let s of this.fieldSets[e].items)s.sequence=t,t++;return this.configuration.setData("fieldsets",this.fieldSets),!0}return!1}getFieldsetName(e){try{return this.fieldSets[e].name}catch(e){return""}}getFieldSetFields(e,t=""){if(this.fieldSets[e]){let s=[];for(let i of this.fieldSets[e].items)i.field?s.push(i):i.fieldset&&t.indexOf(e)<0&&(s=s.concat(this.getFieldSetFields(i.fieldset,t+":"+e)));return s}return[]}getFieldSetItems(e){return this.fieldSets[e]?this.fieldSets[e].items:[]}getFieldlabel(e,t){try{return this.fieldDefs[e][t].vname?this.fieldDefs[e][t].vname:t}catch(e){return t}}getFieldHelpText(e,t){try{return this.fieldDefs[e][t].popupHelp}catch(e){return null}}hasField(e,t){return this.fieldDefs[e]&&this.fieldDefs[e][t]}getFilters(e="",t=""){let s=[];for(let t in this.moduleFilters)""!==e&&this.moduleFilters[t].module!==e||s.push({id:t,name:this.moduleFilters[t].name,module:this.moduleFilters[t].module,type:this.moduleFilters[t].type});return s.sort(((e,t)=>e.name>t.name?1:-1)),s}getFilter(e){try{return this.moduleFilters[e]}catch(e){return""}}getAppModules(){let e=[];for(let t in this.moduleDirectory)this.moduleDirectory.hasOwnProperty(t)&&e.push(this.moduleDirectory[t]);return e}getModuleDefs(e){return this.moduleDefs[e]?this.moduleDefs[e]:this.moduleDefs[this.getModuleById(e)]}getModuleDuplicatecheck(e){try{return"1"===this.moduleDefs[e].duplicatecheck||"2"===this.moduleDefs[e].duplicatecheck}catch(e){return!1}}getModuleDuplicatecheckOnChange(e){try{return"1"===this.moduleDefs[e].duplicatecheck}catch(e){return!1}}getModules(){let e=[];for(let t in this.moduleDefs)e.push(t);return e}getGlobalSearchModules(){let e=[];for(let t in this.moduleDefs)this.moduleDefs[t].ftsglobalsearch&&e.push(t);return e}getMentionSearchModules(){return Object.keys(this.moduleDefs).filter((e=>this.moduleDefs[e].ftsmentionsearch))}getPhoneSearchModules(){let e=[];for(let t in this.moduleDefs)this.moduleDefs[t].ftsphonesearch&&e.push(t);return e}getModuleById(e){for(let t in this.moduleDefs)if(this.moduleDefs[t].id==e)return t;return""}getModuleIcon(e){try{return this.moduleDefs[e].icon}catch(e){return!1}}getModuleSingular(e){try{return this.moduleDefs[e].singular}catch(t){return e}}getModuleFromSingular(e){let t="";for(let s in this.moduleDefs)this.moduleDefs[s].singular==e&&(t=s);return t}getModuleTrackflag(e){try{return!!parseInt(this.moduleDefs[e].track,10)}catch(e){return!1}}getModuleFields(e){try{return this.fieldDefs[e]?this.fieldDefs[e]:{}}catch(e){return{}}}getModuleDuplicateCheckFields(e){let t=[],s=this.getModuleFields(e);for(let e in s)s[e].duplicatecheck&&t.push(e);return t}getModuleValidations(e){try{return this.validationRules[e].validations}catch(e){return[]}}getModuleMenu(e){try{let t=[];return this.moduleDefs[e].actionset&&(t=this.getActionSetItems(this.moduleDefs[e].actionset)),t}catch(e){return[]}}getModuleListTypes(e){try{return this.moduleDefs[e].listtypes}catch(e){return[]}}addModuleListType(e,t){this.moduleDefs[e].listtypes.push(t),this.configuration.setData("moduledefs",this.moduleDefs)}updateModuleListType(e,t){this.moduleDefs[e].listtypes.some((e=>{if(e.id==t.id){for(let s in t)t.hasOwnProperty(s)&&(e[s]=t[s]);return this.configuration.setData("moduledefs",this.moduleDefs),!0}}))}deleteModuleListType(e,t){let s=this.moduleDefs[e].listtypes.findIndex((e=>e.id==t));return s>=0&&this.moduleDefs[e].listtypes.splice(s,1),this.configuration.setData("moduledefs",this.moduleDefs),this.moduleDefs[e].listtypes}getModuleAggregates(e){return this.moduleDefs[e].ftsaggregates}getModuleAggregateMetrics(e){return this.moduleDefs[e].ftsmetrics}getFieldDefs(e,t){try{return this.fieldDefs[e][t]}catch(e){return"varchar"}}checkStatusManaged(e){for(let t in this.fieldDefs[e])if(this.getFieldDefs(e,t).options&&this.fieldStatusNetworks[this.getFieldDefs(e,t).options])return{statusField:this.getFieldDefs(e,t).name,statusNetwork:this.fieldStatusNetworks[this.getFieldDefs(e,t).options]};return!1}getFieldType(e,t){try{return this.fieldDefs[e][t].type}catch(e){return"varchar"}}getFieldSource(e,t){try{return this.fieldDefs[e][t].source}catch(e){return""}}getFieldOptions(e,t){try{return this.fieldDefs[e][t].options}catch(e){return!1}}getFieldRequired(e,t){try{return this.fieldDefs[e][t].required}catch(e){return!1}}getSystemModules(){let e=[];for(let t in this.moduleDirectory)e.push(this.moduleDirectory[t]);return e.sort(((e,t)=>e.module>t.module?1:-1)),e}getSystemModuleByComponent(e){for(let t in this.componentDirectory)if(t==e)return this.componentDirectory[t].module;return null}getSystemComponents(e){let t=[];for(let s in this.componentDirectory)e&&e!=this.componentDirectory[s].module||t.push(this.componentDirectory[s]);return t.sort(((e,t)=>e.component>t.component?1:-1)),t}getComponentConfigOptions(e){try{return this.componentDirectory[e].componentconfig}catch(e){return{}}}getComponentConfigurations(e="*"){return"*"===e?this.componentDefaultConfigs:this.componentModuleConfigs[e]?this.componentModuleConfigs[e]:{}}getComponentConfig(e="",t="",s=""){return""===s&&(s=this.role?this.role:"*"),""!=t&&this.componentModuleConfigs[t]&&this.componentModuleConfigs[t][e]&&this.componentModuleConfigs[t][e][s]?this.componentModuleConfigs[t][e][s]:""!=t&&this.componentModuleConfigs[t]&&this.componentModuleConfigs[t][e]&&this.componentModuleConfigs[t][e]["*"]?this.componentModuleConfigs[t][e]["*"]:this.componentDefaultConfigs[e]&&this.componentDefaultConfigs[e][s]?this.componentDefaultConfigs[e][s]:this.componentDefaultConfigs[e]&&this.componentDefaultConfigs[e]["*"]?this.componentDefaultConfigs[e]["*"]:{}}getModuleDefaultComponentConfigByUsage(e,t){let s="";switch(t){case"list":s="ObjectList";break;case"details":s="ObjectRecordDetails"}return this.getComponentConfig(s,e)}getRawActionSets(){return this.actionSets}getActionSets(e=""){let t=[];for(let s in this.actionSets)""!==e&&this.actionSets[s].module!==e||t.push({id:s,name:this.actionSets[s].name,module:this.actionSets[s].module,type:this.actionSets[s].type,package:this.actionSets[s].package,actions:this.actionSets[s].actions});return t.sort(((e,t)=>e.name>t.name?1:-1)),t}getActionSet(e){return this.actionSets[e]}getActionSetItems(e){try{return this.actionSets[e].actions}catch(e){return[]}}setActionset(e,t){this.actionSets[e].name=t.name,this.actionSets[e].package=t.package,this.configuration.setData("actionsets",this.actionSets)}setActionSet(e,t){this.actionSets[e]={id:e,module:t.module,name:t.name,package:t.package,version:t.version,actions:t.actions,type:t.type},this.configuration.setData("actionsets",this.actionSets)}setActionSetItems(e,t){this.actionSets[e].actions=t,this.configuration.setData("actionsets",this.actionSets)}addActionset(e,t,s,i="custom",n=[]){this.actionSets[e]={items:n,module:t,name:s,type:i},this.configuration.setData("actionsets",this.actionSets)}removeActionset(e){delete this.actionSets[e],this.configuration.setData("actionsets",this.actionSets)}removeActionsetItem(e,t){let s=!1;if(this.actionSets[e].items.some(((e,i)=>{if(e.id==t.id)return s=i,!0})),!1!==s){this.actionSets[e].items.splice(s,1);let t=0;for(let s of this.actionSets[e].items)s.sequence=t,t++;return this.configuration.setData("actionsets",this.actionSets),!0}return!1}getActionsetName(e){try{return this.actionSets[e].name}catch(e){return""}}getModuleFilters(e=""){let t=[];for(let s in this.moduleFilters)if(this.moduleFilters.hasOwnProperty(s)){if(""!==e&&this.moduleFilters[s].module!==e)continue;t.push(this.moduleFilters[s])}return t.sort(((e,t)=>e.name-t.name)),t}getModuleFilter(e){try{return this.moduleFilters[e]}catch(e){return""}}setModuleFilter(e,t,s,i="custom"){this.moduleFilters||this.configuration.setData("modulefilters",{}),this.moduleFilters[e]={id:e,name:t,module:s,type:i},this.configuration.setData("modulefilters",this.moduleFilters)}removeModuleFilter(e){delete this.moduleFilters[e],this.configuration.setData("modulefilters",this.moduleFilters)}checkModuleAcl(e,t){try{return t?this.moduleDefs[e].acl[t]:!!this.moduleDefs[e]}catch(e){return!1}}getRoles(){return this.roles}getSysRoles(){return this.sysroles}getActiveRole(){let e={};return this.roles&&this.roles.some((t=>{if(this.role==t.id)return e=t,!0})),e}setActiveRole(e){return!!this.roles.find((t=>t.id==e))&&(this.role=e,!0)}getRoleModules(e=!1){let t=[];if(this.rolemodules[this.role])for(let s of this.rolemodules[this.role])(!1===e||null!==s.sequence)&&this.moduleDefs[s.module]&&this.moduleDefs[s.module].visible&&(!this.moduleDefs[s.module].visibleaclaction||this.moduleDefs[s.module].visibleaclaction&&this.checkModuleAcl(s.module,this.moduleDefs[s.module].visibleaclaction))&&this.moduleDefs[s.module].acl.list&&t.push(s.module);return t}getCopyRules(e,t){const s=this.copyrules[e]&&this.copyrules[e][t]?this.copyrules[e][t]:[];return s.forEach((e=>{if(e.params&&!_.isObject(e.params))try{e.params=JSON.parse(e.params)}catch(t){e.params={}}})),s}getFieldTypes(){let e=[];for(let t in this.fieldTypeMappings)e.push(t);return e}getFieldTypeComponent(e){return this.fieldTypeMappings[e]}getRouteDetails(e){return this.routes?.sort(((e,t)=>e.path.split(":").length>t.path.split(":").length?1:-1)).find((t=>{if(t.path==e)return!0;if(e.split("/").length==t.path.split("/").length){let s=e.split("/"),i=t.path.split("/"),n=!0,l=0;for(;l<s.length&&n;)":"!==i[l].substring(0,1)&&i[l]!==s[l]&&(n=!1),l++;if(n)return!0}}))}getRouteComponent(e){return!!this.routes&&this.routes.find((t=>{if(t.path==e)return!0;if(e.split("/").length==t.path.split("/").length){let s=e.split("/"),i=t.path.split("/"),n=!0,l=0;for(;l<s.length&&n;)":"!==i[l].substring(0,1)&&i[l]!==s[l]&&(n=!1),l++;if(n)return!0}}))?.component}checkTagging(e){try{return!!this.moduleDefs[e].tagging}catch(e){return!1}}loadLibs(...e){let t=[];e.forEach((e=>{t.push(this.loadLib(e))}));let s=new l.B,i=0;for(let e of t)e.subscribe((e=>{i++}),(e=>{i++,console.error(e),s.error(e)}),(()=>{i==t.length&&(s.next(),s.complete())}));return i==t.length?(0,d.of)(s):s.asObservable()}isLibLoaded(e){if(this.scripts[e]){for(let t of this.scripts[e])if(!t.loaded)return!1;return!0}return!1}getHtmlStylesheetCode(e){return e&&this.htmlStyleData&&this.htmlStyleData.stylesheets&&_.isObject(this.htmlStyleData.stylesheets[e])&&_.isString(this.htmlStyleData.stylesheets[e].csscode)?this.htmlStyleData.stylesheets[e].csscode:""}getHtmlFormats(e){return _.isObject(this.htmlStyleData.stylesheets[e])?(_.isArray(this.htmlStyleData.stylesheets[e].formats)||(this.htmlStyleData.stylesheets[e].formats=[]),this.htmlStyleData.stylesheets[e].stylesDecoded||this.htmlStylesToObjects(e),this.htmlStyleData.stylesheets[e].formats):(console.log("HTML Styling: Unknown style sheet with ID "+e+"."),[])}getHtmlStylesheetNames(){let e=[];for(let t in this.htmlStyleData.stylesheets)e.push({id:this.htmlStyleData.stylesheets[t].id,name:this.htmlStyleData.stylesheets[t].name});return _.sortBy(e,"name")}getHtmlStylesheetToUse(e,t){return _.isObject(this.htmlStyleData.stylesheetsToUse[e])&&this.htmlStyleData.stylesheetsToUse[e][t]?this.htmlStyleData.stylesheetsToUse[e][t]:""}getCountries(){return this.countries}handleMessage(e){switch(e.messagetype){case"loader.completed":"loadRepository"==e.messagedata&&this.addRoutes(),"loadModules"==e.messagedata&&(this.roles.some((e=>{if(1==e.defaultrole)return this.role=e.id,!0})),""===this.role&&this.roles.length>0&&(this.role=this.roles[0].id));break;case"metadata.updatefieldsets":for(let t in e.messagedata.add)this.fieldSets[t]=e.messagedata.add[t];for(let t in e.messagedata.update)this.fieldSets[t]=e.messagedata.update[t];for(let t in e.messagedata.delete)delete this.fieldSets[t];break;case"metadata.updatecomponentsets":for(let t in e.messagedata.add)this.componentSets[t]=e.messagedata.add[t];for(let t in e.messagedata.update)this.componentSets[t]=e.messagedata.update[t];for(let t in e.messagedata.delete)delete this.componentSets[t]}}loadLib(e){let t=new l.B;if(!this.scripts[e])return(0,d.of)({script:e,loaded:!1,status:"Unknown"});if(this.isLibLoaded(e))return(0,d.of)({script:e,loaded:!0,status:"Already Loaded"});if(this.isLibLoading(e)){for(let s of this.scripts[e])if(s.loading)return s.loading$.subscribe((s=>this.loadLib(e).subscribe((e=>{t.next(e),t.complete()})))),t.asObservable()}else{for(let s of this.scripts[e])if(!s.loaded)return this.loadScript(s).subscribe((s=>{this.loadLib(e).subscribe((e=>{t.next(e),t.complete()}))})),t.asObservable();t.next({script:e,loaded:!0,status:"Loaded"}),t.complete()}return t.asObservable()}loadScript(e){let t=new l.B;e.loading=!0,e.loading$=new c.bkB;let s={};return e.src.endsWith(".css")?(s=document.createElement("link"),s.rel="stylesheet",s.href=e.src):(s=document.createElement("script"),s.type="text/javascript",s.src=e.src),s.readyState?s.onreadystatechange=()=>{"loaded"!==s.readyState&&"complete"!==s.readyState||(s.onreadystatechange=null,e.loaded=!0,e.loading=!1,t.next({script:e.src,loaded:!0,status:"Loaded"}),t.complete(),e.loading$.emit("loaded"))}:s.onload=()=>{e.loaded=!0,e.loading=!1,t.next({script:e.src,loaded:!0,status:"Loaded"}),t.complete(),e.loading$.emit("loaded")},s.onerror=s=>{e.loading=!1,t.error({script:e.src,loaded:!1,status:"Failed"}),e.loading$.emit("failed")},document.getElementsByTagName("head")[0].appendChild(s),t.asObservable()}isLibLoading(e){if(this.scripts[e]){for(let t of this.scripts[e])if(t.loading)return!0;return!1}return!1}htmlStylesToObjects(e){for(let t of this.htmlStyleData.stylesheets[e].formats){let e;if(_.isEmpty(t.styles))t.styles=null;else{try{e=JSON.parse(t.styles)}catch(s){console.log("HTML Styling: Malformed style specification in table sysuihtmlformats (format id: "+t.id+")."),e={}}t.styles=e}}this.htmlStyleData.stylesheets[e].stylesDecoded=!0}static#e=this.ɵfac=function(e){return new(e||metadata)(c.KVO(p.Qq),c.KVO(f.d),c.KVO(b.i),c.KVO(y.Ix),c.KVO(v.m),c.KVO(c.zZn))};static#t=this.ɵprov=c.jDH({token:metadata,factory:metadata.ɵfac,providedIn:"root"})}return metadata})(),R=(()=>{class aclCheck{constructor(e,t,s,i){this.metadata=e,this.router=t,this.session=s,this.configurationService=i}canActivate(e,t){if(!this.session||!this.session.authData.sessionId)return!1;let s=this.configurationService.getSystemParamater("aclcontroller");return!(s&&"spiceacl"!=s&&!("Users"!==e.params.module||e.params.id&&e.params.id==this.session.authData.userId||this.session.authData.admin))&&(!(e.params.module&&"Home"!=e.params.module&&!this.metadata.checkModuleAcl(e.params.module,e.data.aclaction))||(this.router.navigate(["/modules/Home"]),!1))}static#e=this.ɵfac=function(e){return new(e||aclCheck)(c.KVO(k),c.KVO(y.Ix),c.KVO(f.d),c.KVO(b.i))};static#t=this.ɵprov=c.jDH({token:aclCheck,factory:aclCheck.ɵfac,providedIn:"root"})}return aclCheck})()},50531:(e,t,s)=>{"use strict";s.d(t,{y:()=>h});var i=s(54438),n=s(21413),l=s(7673),o=s(23658),a=s(79355),r=s(5868),d=s(83935),c=s(4921),u=s(41081),m=s(69904);let h=(()=>{class modal{constructor(e,t,s,i,n){this.metadata=e,this.footer=t,this.toast=s,this.injector=i,this.language=n,this.modalsArray=[],this.modalsObject={},window.addEventListener("keyup",(e=>{if(27===e.keyCode&&this.modalsArray.length){e.stopImmediatePropagation();let t=this.modalsArray[this.modalsArray.length-1].wrapper;!t.instance.escKey||t.instance.childComponent.instance.onModalEscX&&!1===t.instance.childComponent.instance.onModalEscX()||t.destroy()}}))}openStaticModal(e,t=!0,s,i){const l=new n.B;return this.createModalWrapper().then((n=>{let o={};o.wrapper=n,o.blurBackdrop=i,n.instance.escKey=t,this.modalsArray.push(o),n.instance.zIndex=2*this.modalsArray.length+1,n.changeDetectorRef.detectChanges(),this.modalsObject[o.modalId]=o;const a=n.instance.target.createComponent(e,{injector:s});a.instance.self=n,o.component=a,n.instance.childComponent=a,l.next(a),l.complete()})),l.asObservable()}openModal(e,t=!0,s,i){if(this.metadata.checkComponent(e)){let l=new n.B;return this.createModalWrapper().then((n=>{let o={};o.wrapper=n,o.blurBackdrop=i,n.instance.escKey=t,this.modalsArray.push(o),n.instance.zIndex=2*this.modalsArray.length+1,n.changeDetectorRef.detectChanges(),this.modalsObject[o.modalId]=o,this.metadata.addComponentDirect(e,n.instance.target,s).subscribe({next:e=>{e.instance.self=n,o.component=e,n.instance.childComponent=e,l.next(e),l.complete()},error:t=>{this.removeModal(n),this.sendError(e),l.error(t),l.complete()}})})),l.asObservable()}return this.sendError(e),(0,l.of)(!1)}createModalWrapper(){const e=this.footer.modalcontainer.createComponent(o.E);return e.instance.self=e,e.changeDetectorRef.markForCheck(),Promise.resolve(e)}sendError(e){this.toast.sendToast('Component "'+e+'" not found.',"error","Misconfiguration on the system as the component should have been opened in a modal but is not avilable. Please contact your system administrator.")}removeModal(e){for(let t=0;t<this.modalsArray.length;t++)if(this.modalsArray[t].wrapper===e){e.changeDetectorRef.detectChanges(),this.modalsArray.splice(t,1);break}}closeModal(e){if("number"==typeof e)this.modalsArray[e]&&this.modalsArray[e].wrapper.destroy();else for(let t=0;t<this.modalsArray.length;t++)if(this.modalsArray[t].wrapper===e){this.modalsArray.splice(t,1);break}}closeAllModals(){for(let e=this.modalsArray.length-1;e>=0;e--)this.modalsArray[e].wrapper.destroy()}get backdropVisible(){return 0!==this.modalsArray.length}get backdropZindex(){return 2*this.modalsArray.length}get backdropBlurred(){return this.modalsArray.length>0&&!0===this.modalsArray[this.modalsArray.length-1].blurBackdrop?"blur(4px)":"none"}prompt(e,t,s=null,i="shade",l=null,o=null,a="select",d){let c=new n.B;return this.openStaticModal(r.C,!0,this.injector).subscribe((n=>{n.instance.type=e,n.instance.text=t,n.instance.headertext=s,n.instance.theme=i,n.instance.value=l,n.instance.options=o,n.instance.regex=d,n.instance.optionsAs=!0===a?"radio":a,n.instance.answer.subscribe((e=>{c.next(e),c.complete()}))})),c.asObservable()}confirm(e,t=null,s=null){return this.prompt("confirm",e,t,s)}confirmDeleteRecord(){return this.prompt("confirm",this.language.getLabel("LBL_DELETE_RECORD","","long"),this.language.getLabel("LBL_DELETE_RECORD"))}input(e,t=null,s=null,i=null){return this.prompt("input",e,t,s,i)}info(e,t=null,s=null){return this.prompt("info",e,t,s)}await(e=null){let t=new i.bkB;return this.openStaticModal(a.n,!1,this.injector).subscribe((s=>{s.instance.messagelabel=e,t.subscribe((()=>{s.instance.self.destroy()}))})),t}static#e=this.ɵfac=function(e){return new(e||modal)(i.KVO(d.yu),i.KVO(c.q),i.KVO(u.o),i.KVO(i.zZn),i.KVO(m.B))};static#t=this.ɵprov=i.jDH({token:modal,factory:modal.ɵfac,providedIn:"root"})}return modal})()},70315:(e,t,s)=>{"use strict";s.d(t,{w:()=>n});var i=s(54438);let n=(()=>{class modalwindow{static#e=this.ɵfac=function(e){return new(e||modalwindow)};static#t=this.ɵprov=i.jDH({token:modalwindow,factory:modalwindow.ɵfac})}return modalwindow})()},35911:(e,t,s)=>{"use strict";s.d(t,{g:()=>G});var i=s(54438),n=s(84412),l=s(18359),o=s(21413),a=s(7673),r=s(92462),d=s(5964),c=s(96354),u=s(49722),m=s(40553),h=s(83935),g=s(29994),p=s(72541),f=s(57363),b=s(41081),y=s(69904),v=s(50531),k=s(60968),R=s(53584),I=s(71475),x=s(48849),j=s(345);let G=(()=>{class model{constructor(e,t,s,o,a,r,d,c,u,m,h,g,p,f,b,y){this.backend=e,this.broadcast=t,this.metadata=s,this.utils=o,this.session=a,this.recent=r,this.router=d,this.toast=c,this.language=u,this.modal=m,this.navigation=h,this.configuration=g,this.injector=p,this.socket=f,this.userpreferences=b,this.sanitizer=y,this.httpRequestsRefID=_.uniqueId("model_http_ref_"),this._module="",this._id="",this.acl={},this.acl_fieldcontrol={},this.data={},this.backupData={},this.field$=new n.t({field:null,value:null}),this.isSaving=!1,this.saved$=new i.bkB,this.mode$=new i.bkB,this.canceledit$=new i.bkB,this.isValid=!1,this.isLoading=!1,this.isEditing=!1,this.isGlobal=!1,this.isNew=!1,this._fields_stati=[],this._fields_stati_tmp=[],this._model_stati_tmp=[],this._messages=[],this.reference="",this._fields=[],this.messageChange$=new i.bkB,this.duplicate=!1,this.templateId=null,this.duplicateChecking=!1,this.duplicates=[],this.duplicatecount=0,this.savingProgress=new n.t(1),this.subscriptions=new l.yU,this.loadingError=!1,this.validated$=new i.bkB,this.alerts=[],this.alert="",this.data$=new n.t(this.data),this.subscriptions.add(this.broadcast.message$.subscribe((e=>{"timezone.changed"===e.messagetype&&(this.utils.timezoneChanged(this.data,e.messagedata),this.utils.timezoneChanged(this.backupData,e.messagedata))})))}registerModel(){this.module&&this._id&&!this.navigation.modelregister.find((e=>e.model._id==this._id&&e.model.module==this.module))&&(this.modelRegisterId=this.navigation.registerModel(this))}get messages(){return this._messages}get module(){return this._module}set module(e){this._module=e,this.initializeFieldsStati(),this.registerModel()}get backendData(){return this.utils.spiceModel2backend(this.module,this.data)}get id(){return this._id}set id(e){this._id=e,this.registerModel()}get displayname(){return this.getFieldValue("summary_text")}get fields(){return this.module&&_.isEmpty(this._fields)&&(this._fields=this.metadata.getModuleFields(this.module)),this._fields}generateGuid(){return this.utils.generateGuid()}isFieldRequired(e){switch(e){case"date_entered":case"date_modified":return!0;default:return this.metadata.getFieldRequired(this.module,e)}}isRequired(e){return this.isFieldRequired(e)}checkAccess(e){return"detail"==e||"view"==e?this.acl.detail||this.acl.view:this.acl[e]}checkFieldAccess(e){return!(this.acl_fieldcontrol&&this.acl_fieldcontrol[e]&&"1"==this.acl_fieldcontrol[e])}getFieldAccess(e){return this.acl_fieldcontrol&&this.acl_fieldcontrol[e]?parseInt(this.acl_fieldcontrol[e],10):void 0}goDetail(e){if(!this.checkAccess("detail"))return!1;{let t="/module/"+this.module+"/"+this.id;e&&(t="/tab/"+e+"/"+t),this.router.navigate([t])}}goModule(){this.router.navigate(["/module/"+this.module])}getData(e=!0,t="",s=!0,i=!1){let n=new o.B;return e&&this.resetData(),this.isLoading=s,this.backend.get(this.module,this.id,t,this.httpRequestsRefID).subscribe({next:e=>{this.isLoading=!1,this.data=e,this.acl=e.acl,this.acl_fieldcontrol=e.acl_fieldcontrol,""!=t&&this.recent.trackItem(this.module,this.id,this.data),this.initializeFieldsStati(),this.evaluateValidationRules(null,"initialize"),this.emitFieldsChanges(e),this.data$.next(e),this.broadcast.broadcastMessage("model.loaded",{id:this.id,module:this.module,data:this.data}),n.next(e),n.complete()},error:e=>{i&&401!=e.status&&(this.toast.sendToast(this.language.getLabel("LBL_ERROR_LOADING_RECORD"),"error"),this.router.navigate(["/module/"+this.module])),401==e.status&&(this.loadingError=!0),n.error(e)}}),n.asObservable()}validate(e){this.resetMessages(),this.isValid=!0,this.evaluateValidationRules(null,"change");for(let e in this.fields)"id"!==e&&this.getFieldStati(e).required&&(!this.data[e]&&0!==this.data[e]||0===String(this.data[e]).length)&&(this.isValid=!1,this.addMessage("error",this.language.getLabel("MSG_INPUT_REQUIRED")+"!",e)),this.getFieldStati(e).invalid&&(this.isValid=!1);return this.isValid,this.validated$.next(),this.isValid}initializeFieldsStati(){let e=[];for(let t in this.fields)e[t]=this.evaluateFieldStati(t);this._fields_stati=e}getDefaultStati(){return{editable:this.checkAccess("edit"),invalid:!1,required:!1,incomplete:!1,disabled:!1,hidden:!1,readonly:!1}}evaluateFieldStati(e){let t=this.getDefaultStati();return this.acl_fieldcontrol&&this.acl_fieldcontrol[e]&&parseInt(this.acl_fieldcontrol[e],10)<3&&(t.editable=!1),this.isRequired(e)&&(t.required=!0),t}resetFieldStati(e){this._fields_stati[e]=this.evaluateFieldStati(e),this._fields_stati_tmp[e]={...this._fields_stati[e]},this.getFieldMessages(e,"error")&&(this._fields_stati_tmp[e].invalid=!0)}setFieldStatus(e,t,s=!0){try{let i=this._fields_stati[e];return i[t]&&!s?(console.warn("could not set status "+t+" to "+s+" because it has to be: "+i[t]),!1):(this._fields_stati_tmp[e]||(this._fields_stati_tmp[e]={...i}),this._fields_stati_tmp[e][t]=s,!0)}catch(e){return console.warn(e),!1}}setFieldStati(e,t){for(let s in t){if(!this.setFieldStatus(e,s,t[s]))return!1}return!0}getFieldStati(e){let t=this._fields_stati_tmp[e];return t||(t=this._fields_stati[e],t||(t=this.getDefaultStati(),this._fields_stati[e]=t)),t={...t},!t.invalid&&this.getFieldMessages(e,"error")&&(t.invalid=!0),t}evaluateValidationRules(e,t){let s=this.metadata.getModuleValidations(this.module);if(!s)return!0;this._fields_stati_tmp=[],this._model_stati_tmp=[],this.resetMessages();for(let e of s){if(!e.active)continue;let s=0,i=!0;if(e.onevents instanceof Array||(e.onevents=e.onevents.split(",")),!(e.onevents instanceof Array)||e.onevents.includes(t)){if(e.conditions instanceof Array)for(let t of e.conditions){let n=!1;if(n=this.evaluateCondition(t),s+=n?1:0,s>0&&"or"==e.logicoperator){i=!0;break}}if(e.conditions&&e.conditions.length>1&&"and"==e.logicoperator?s<e.conditions.length&&(i=!1):0==s&&e.conditions&&(i=!1),i)for(let t of e.actions){this.executeValidationAction(t)||console.warn("Action "+t.action+" for "+t.fieldname+" failed!")}}}}evaluateCondition(e){let t=!1;if("empty"!=e.comparator&&null==typeof this.data[e.fieldname])return!1;let s,i=this.data[e.fieldname];return s=e.comparator.match(/regex/g)?e.valuations:this.evaluateValidationParams(e.valuations),t=r.g.compare(i,e.comparator,s),t}executeValidationAction(e){let t=this.evaluateValidationParams(e.params);switch(e.action){case"set_value":return this.data[e.fieldname]=t,!0;case"set_value_from_field":return this.data[e.fieldname]=this.data[t],!0;case"set_value_from_user":return this.session.authData.user[t]?this.data[e.fieldname]=this.session.authData.user[t]:this.userpreferences.toUse[t]&&(this.data[e.fieldname]=this.userpreferences.toUse[t]),!0;case"set_message":return t instanceof Object&&(this._messages.push(t),this.messageChange$.emit(!0),!0);case"error":return this.addMessage("error",t,e.fieldname);case"warning":return this.addMessage("warning",t,e.fieldname);case"notice":return this.addMessage("notice",t,e.fieldname);case"hide":return t="string"==typeof t?r.g.strtobool(t):t,this.setFieldStatus(e.fieldname,"hidden",t);case"show":return t=!("string"==typeof t?r.g.strtobool(t):t),this.setFieldStatus(e.fieldname,"hidden",t);case"require":return t="string"==typeof t?r.g.strtobool(t):t,this.setFieldStatus(e.fieldname,"required",t);case"readonly":return t="string"==typeof t?r.g.strtobool(t):t,this.setFieldStatus(e.fieldname,"readonly",t);case"set_stati":return t="string"==typeof t?JSON.parse(t):t,this.setFieldStati(e.fieldname,t);case"set_model_state":if(t instanceof Array)for(let e of t)this.checkModelState(e)||this._model_stati_tmp.push(e);else this.checkModelState(t)||this._model_stati_tmp.push(t);return!0;case"set_model_alert":return this.setAlertStyle(e.fieldname,t);default:return console.warn("action: "+e.action+" is not defined!"),!1}}setAlertStyle(e=null,t,s="validation"){try{let i="slds-text-align_left slds-notify slds-notify_alert";return t&&(i=i+" slds-alert_"+t),this.alerts.push({alertType:t,fieldName:e,alert:i,source:s}),!0}catch(e){return this.toast.sendToast(this.language.getLabel("LBL_ERROR")+": "+e+". LBL_CONTACT_ADMIN","error"),!1}}initializeFieldsAlertStyles(e){let t="",s="";return this.alerts.length>0&&(this.alerts.forEach((e=>{t=e.fieldName,s=e.alert})),_.has(e,t)?this.alert=s:this.alert=""),this.alert}evaluateValidationParams(e){if("string"==typeof e){if(/(\<[a-z\_]+\>)/.test(e))for(let t of e.match(/(\<[a-z\_]+\>)/g)){let s=t.replace("<","").replace(">",""),i=this.data[s]?this.data[s]:0;switch(this.metadata.getFieldDefs(this.module,s).type){case"datetimecombo":case"datetime":case"date":i&&(i=i.format("YYYY-MM-DD HH:mm:ss"))}e=e.replace(t,i)}if("now()"==e&&(e=moment().format("YYYY-MM-DD HH:mm:ss")),/\d+[\.\-]\d+[\.\-]\d+/.test(e)&&/[\+\-]/.test(e)){let t=r.g.strtomoment(e);e=t||e}else if(/\d+\s*[\+\-\*\/\^]\s*\d+/.test(e)){let t=this.utils.compileMathExpression(e);e=t||e}}return e}checkModelState(e){return this._model_stati_tmp.includes(e)}startEdit(e=!0,t=!1){this.isEditing||(e&&!this.duplicate&&(this.backupData=this.buildBackup(this.data)),t||(this.isEditing=!0,this.mode$.emit("edit")),this.navigation.addModelEditing(this.id,this.module,this,this.getFieldValue("summary_text")))}getFieldValue(e){return this.data[e]}getField(e){return this.getFieldValue(e)}setFieldValue(e,t){return this.setField(e,t)}initializeField(e,t){if(!e)return!1;this.data[e]=t}setField(e,t,s=!1){if(!e)return!1;const i=this.data[e];this.data[e]=t,this.evaluateValidationRules(e,"change"),i===t||s||this.field$.next({field:e,value:t}),s||this.data$.next(this.data),this.duplicateCheckOnChange([e])}observeFieldChanges(e){return this.fields[e]?this.field$.pipe((0,d.p)((t=>t.field==e)),(0,c.T)((e=>e.value))):(0,a.of)(null)}setFields(e,t=!1){let s=[];for(let t in e){if(!e.hasOwnProperty(t))continue;let i=e[t];_.isString(i)&&(i=i.trim()),this.data[t]!=i&&this.field$.next({field:t,value:i}),this.data[t]=i,s.push(t)}!0!==t&&this.data$.next(this.data),this.evaluateValidationRules(null,"change"),this.duplicateCheckOnChange(s)}emitFieldsChanges(e){for(let t in e)e.hasOwnProperty(t)&&this.field$.next({field:t,value:e[t]})}cancelEdit(){this.isEditing=!1,this.navigation.removeModelEditing(this.module,this.id),this.backupData&&(this.data=this.backupData,this.data$.next(this.data),this.backupData=null,this.resetMessages()),this.mode$.emit("display"),this.canceledit$.emit(!0)}endEdit(){this.backupData=null,this.isEditing=!1,this.mode$.emit("display"),this.navigation.removeModelEditing(this.module,this.id)}getDirtyFields(){let e={};for(let t in this.data)!t||this.backupData&&_.isEqual(this.data[t],this.backupData[t])||(e[t]=this.data[t]);return e}save(e=!1){let t,s=new o.B;this.isSaving=!0;for(let e in this.data)_.isString(this.data[e])&&(this.data[e]=this.data[e].trim());return!this.isEditing&&_.isEmpty(this.backupData)||this.isNew?t=this.data:(t=this.getDirtyFields(),t.date_modified=this.data.date_modified),this.backend.save(this.module,this.id,t,this.savingProgress,this.templateId,this.httpRequestsRefID).subscribe({next:t=>{this.data=t,this.isNew=!1,this.data$.next(t),this.broadcast.broadcastMessage("model.save",{id:this.id,reference:this.reference,module:this.module,data:this.data,changed:this.getDirtyFields(),backupdata:this.backupData}),this.isSaving=!1,e&&this.toast.sendToast(this.language.getLabel("LBL_DATA_SAVED")+".","success"),this.saved$.emit({changed:this.getDirtyFields(),backupdata:this.backupData}),this.endEdit(),this.initializeFieldsStati(),s.next(!0),s.complete()},error:t=>{if(409===t.status)this.modal.openModal("ObjectOptimisticLockingModal",!1,this.injector).subscribe((e=>{e.instance.conflicts=t.error.error.conflicts,e.instance.responseSubject=s}));else e&&this.toast.sendToast(this.language.getLabel("LBL_ERROR")+" "+t.status,"error",t.error.error.lbl?this.language.getLabel(t.error.error.lbl):t.error.error.message),s.error(t),s.complete();this.isSaving=!1}}),s.asObservable()}delete(){let e=new o.B;return this.backend.deleteRequest(`module/${this.module}/${this.id}`,null,this.httpRequestsRefID).subscribe({next:()=>{this.broadcast.broadcastMessage("model.delete",{id:this.id,module:this.module,data:_.clone(this.data)}),e.next(!0),e.complete()},error:()=>{e.error("unable to delete record")}}),e.asObservable()}saveAndSend(e=!1,t="LBL_DATA_SENT"){let s=e,i=this.save(!1);return s&&this.toast.sendToast(this.language.getLabel(t)+".","success"),i}reset(){this.id=null,this.module=null,this._fields_stati_tmp=this._fields_stati=[],this._fields=[],this.isLoading=!1,this.isEditing=!1,this.mode$.emit("display"),this.resetMessages(),this.resetData()}clone(){return{module:this.module,id:this.id,data:{...this.data}}}getAuditLog(e={}){let t=new o.B;return this.backend.getRequest(`module/${this.module}/${this.id}/auditlog`,e,this.httpRequestsRefID).subscribe({next:e=>{t.next(e),t.complete()},error:e=>{t.next(e),t.complete()}}),t.asObservable()}resetData(){this.isValid=!0,this.data={}}initialize(e=null){return this.initializeModel(e)}initializeModel(e=null){this.id||(this.id=this.generateGuid(),this.isNew=!0),this.duplicates=[],this.data={};let t=this.metadata.getModuleFields(this.module);t.assigned_user_id&&(this.data.assigned_user_id=this.session.authData.userId,this.data.assigned_user_name=this.session.authData.userName,this.data.assigned_user=this.session.authData.user),t.assigned_orgunit_id&&this.session.authData.user.orgunit&&(this.data.assigned_orgunit_id=this.session.authData.user.orgunit.id,this.data.assigned_orgunit_name=this.session.authData.user.orgunit.name,this.data.assigned_orgunit=this.session.authData.user.orgunit),this.data.modified_by_id=this.session.authData.userId,this.data.modified_by_name=this.session.authData.userName,this.data.modified_by_user=this.session.authData.user,this.data.created_by_id=this.session.authData.userId,this.data.created_by_name=this.session.authData.userName,this.data.created_by_user=this.session.authData.user,this.data.date_entered=new moment,this.data.date_modified=new moment,this.executeCopyRules(e),this.setFieldsDefaultValues(),this.evaluateValidationRules(null,"initialize"),this.acl={create:!0,edit:!0,detail:!0},this.acl_fieldcontrol=this.metadata.moduleDefs[this.module]?.acl_fieldcontrol??[],this.initializeFieldsStati(),this.evaluateValidationRules(null,"initialize"),this.parentmodel=e}setData(e,t=!0,s){e.acl&&(this.acl=e.acl),e.acl_fieldcontrol&&(this.acl_fieldcontrol=e.acl_fieldcontrol,delete e.acl_fieldcontrol),this.data=t?this.utils.backendModel2spice(this.module,e):e,!0!==s&&this.data$.next(this.data),this.initializeFieldsStati()}addModel(e="",t=null,s={},i=!1,n){let l=new o.B;if(this.metadata.checkModuleAcl(this.module,"create")){this.initializeModel(t),this.reference=e;for(let e in s)this.data[e]=s[e];this.evaluateValidationRules(null,"initialize"),this.modal.openModal("ObjectEditModal",!1,this.injector).subscribe((e=>{e&&(e.instance.model.isNew=!0,e.instance.reference=this.reference,e.instance.preventGoingToRecord=i,n&&(e.instance.componentconfig=n),e.instance.action$.subscribe((e=>{"save"!=e&&"savegodetail"!=e||(l.next(this.data),this.recent.trackItem(this.module,this.id,this.data)),l.complete()})))}))}else this.toast.sendToast(this.language.getLabel("MSG_NOT_AUTHORIZED_TO_CREATE")+" "+this.language.getModuleName(this.module),"error"),window.setTimeout((()=>{l.complete()}),100);return l.asObservable()}executeCopyRules(e){if(this.copyParentReferenceAddresses(e),this.executeCopyRulesGeneric(),e)if(_.isArray(e))for(let t of e)t.data&&this.executeCopyRulesParent(t);else e.data&&this.executeCopyRulesParent(e)}copyParentReferenceAddresses(e){if(!e)return;const t=this.configuration.getData("spice_address_references");Array.isArray(t)&&t.forEach((t=>{t.child_module==this.module&&e.module==t.parent_module&&this.copyReferencedAddress(t,e.data)}))}copyReferencedAddress(e,t){const s={};["address_street","address_street_number","address_street_number_suffix","address_attn","address_city","address_district","address_postalcode","address_state","address_country","address_latitude","address_longitude"].forEach((i=>s[`${e.child_address_key}_${i}`]=t[`${e.parent_address_key}_${i}`])),s[e.child_address_key+"_address_reference_id"]=t.id,this.setFields(s)}setFieldsDefaultValues(){const e=this.metadata.getModuleFields(this.module);e&&_.each(e,(e=>{"default"in e&&null==this.data[e.name]&&"link"!=e.type&&"non-db"!=e.source&&this.setFixedValue(e.name,e.default)}))}executeCopyRulesGeneric(){let e=this.metadata.getCopyRules("*",this.module);for(let t of e)t.tofield&&t.fixedvalue?this.setFixedValue(t.tofield,t.fixedvalue):t.tofield&&t.calculatedvalue&&this.setField(t.tofield,this.getCalculatedValue(t))}executeCopyRulesParent(e){e.data.id||(e.data.id=e.id);let t=this.metadata.getCopyRules(e.module,this.module);for(let s of t)s.tofield&&(s.fromfield?this.copyValue(s.tofield,e.data[s.fromfield],s.params):s.fixedvalue&&this.setFixedValue(s.tofield,s.fixedvalue),s.calculatedvalue&&this.setField(s.tofield,this.getCalculatedValue(s,e.data[s.fromfield])))}copyValue(e,t,s={}){let i=this.metadata.getFieldDefs(this.module,e);if(i)switch(i.type){case"json":this.setField(e,JSON.parse(JSON.stringify(t)));break;case"link":if(_.isObject(t)&&t.beans){const i={beans:{}};for(let n in t.beans){if(!t.beans.hasOwnProperty(n))continue;let l=n;s?.generatenewid&&(l=this.utils.generateGuid()),i.beans[l]={...t.beans[n]},i.beans[l].id=l,this.setField(e,i)}}break;default:this.setField(e,t)}else this.setField(e,t)}setFixedValue(e,t){let s=this.metadata.getFieldDefs(this.module,e);if((!s||s&&!s.type)&&this.setField(e,t),s&&s.type)if("bool"===s.type)this.setField(e,"true"===t||"1"===t||"false"!==t&&"0"!==t&&null);else"(NULL)"==t&&(t=null),this.setField(e,t)}getCalculatedValue(e,t){let s=this.session.getSessionData("timezone",!1)||moment.tz.guess(!0);switch(e.calculatedvalue){case"now":return(new moment.utc).tz(s);case"nextfullhour":let i=(new moment.utc).tz(s);return 0!=i.minute()&&(i.minute(0),i.add(1,"h")),e.params?.number&&e.params?.unit&&i.add(e.params.number,e.params.unit),i;case"addDate":const n=moment.isMoment(t)?new moment(t):(new moment.utc).tz(s);return e.params?.number&&e.params?.unit?n.add(e.params.number,e.params.unit):n;case"nl2br":return t.replace(/\r\n/g,"<br>").replace(/\n\n/g,"<br>").replace(/\n/g,"<br>")}return""}edit(e=!1,t=""){if(!this.checkAccess("edit"))return(0,a.of)(!1);let s=new o.B;return this.modal.openModal("ObjectEditModal",!1,this.injector).subscribe((i=>{i&&(t&&""!=t&&(i.instance.componentSet=t),e&&i.instance.model.getData(!1,"editview",!1),i.instance.actionSubject.subscribe((e=>{s.next(e),s.complete()})))})),s.asObservable()}duplicateCheckOnChange(e,t=!1){if(this.isNew&&this.metadata.getModuleDuplicatecheckOnChange(this.module)){let s=this.metadata.getModuleDuplicateCheckFields(this.module);if(0==s.length)return;let i=!1,n=!1;for(let t of s)n||(n=e.indexOf(t)>=0),i||(i=this.getField(t));if(i&&n||t){let e=new o.B;return this.duplicateCheck(!0).subscribe({next:t=>{this.duplicates=t.records,this.duplicatecount=t.count,e.next(!0),e.complete()},error:()=>{e.next(!1),e.complete()}}),e.asObservable()}n&&!i&&(this.duplicates=[])}return(0,a.of)(!1)}duplicateCheck(e=!1){if(this.metadata.getModuleDuplicatecheck(this.module)){this.duplicateChecking=!0;let t=new o.B;if(e){let e=this.data;e.id=this.id,this.backend.checkDuplicates(this.module,e,this.httpRequestsRefID).subscribe({next:e=>{t.next(e),t.complete(),this.duplicateChecking=!1},error:()=>{t.next([]),t.complete(),this.duplicateChecking=!1}})}else this.backend.getDuplicates(this.module,this.id,this.httpRequestsRefID).subscribe({next:e=>{t.next(e),t.complete(),this.duplicateChecking=!1},error:()=>{t.next([]),t.complete(),this.duplicateChecking=!1}});return t.asObservable()}return(0,a.of)([])}addMessage(e,t,s=null,i="validation"){return this._messages.push({type:e,message:t,reference:s,source:i}),"error"==e&&s&&this.setFieldStatus(s,"invalid",!0),this.messageChange$.emit(!0),!0}getMessages(){return this.messages}setFieldMessage(e,t,s,i){return this.resetFieldMessages(s,e,i),"error"==e&&this.setFieldStatus(s,"invalid",!0),this.addMessage(e,t,s,i)}getFieldMessages(e,t){let s=this._messages.filter((s=>s.reference==e&&(!t||s.type==t)));return s.length>0&&s}resetFieldMessages(e,t,s){if(0==this._messages.length)return!0;for(let i=this._messages.length-1;i>=0;i--){let n=this._messages[i];n.reference!=e||t&&n.type!=t||s&&n.source!=s||(this._messages.splice(i,1),this.messageChange$.emit(!0))}return this.resetFieldStati(e),!0}resetMessages(e,t="validation"){if(0==this._messages.length)return!0;for(let s=this._messages.length-1;s>=0;s--){let i=this._messages[s];e&&i.type!=e||t&&i.source!=t||(this._messages.splice(s,1),this.messageChange$.emit(!0)),this.resetFieldStati(i.reference)}return!0}isFieldARelationLink(e){try{return"link"==this.fields[e].type}catch(e){return!1}}getRelatedRecords(e){let t=[];if(!this.isFieldARelationLink(e))return t;if(!this.data[e])return t;for(let s in this.data[e].beans)t.push(this.data[e].beans[s]);return t}setRelatedRecords(e,t=null){return!!this.isFieldARelationLink(e)&&(this.data[e]={beans:{}},t?this.addRelatedRecords(e,t):void this.field$.next({field:e,value:this.getRelatedRecords(e)}))}addRelatedRecords(e,t,s=!0){if(!this.isFieldARelationLink(e))return!1;this.data[e]||(this.data[e]={beans:{}});for(let i of t)!s&&this.data[e].beans[i.id]||(this.data[e].beans[i.id]=i);return this.field$.next({field:e,value:this.getRelatedRecords(e)}),!0}removeRelatedRecords(e,t){if(!this.isFieldARelationLink(e))return!1;this.data[e]||(this.data[e]={beans:[]}),this.data[e].beans_relations_to_delete||(this.data[e].beans_relations_to_delete={});for(let s of t)for(let t in this.data[e].beans)s==t&&(delete this.data[e].beans[t],this.data[e].beans_relations_to_delete[t]=s);return!0}rollbackRemovedRelatedRecords(e,t){return!(!this.isFieldARelationLink(e)||!this.data[e].beans_relations_to_delete)&&(t.forEach((t=>{delete this.data[e].beans_relations_to_delete[t]})),!0)}ngOnDestroy(){this.isEditing&&this.navigation.removeModelEditing(this.module,this.id),this.modelRegisterId&&this.navigation.unregisterModel(this.modelRegisterId),this.subscriptions.unsubscribe(),this.backend.cancelPendingRequests([this.httpRequestsRefID])}isDirty(){return this.isEditing&&_.values(this.getDirtyFields()).length}checkModuleFilterMatch(e){let t=this.configuration.getData("modulefilters");if(!t[e]||!t[e].filterdefs)return!1;let s=t[e].filterdefs;return s="string"==typeof s?JSON.parse(s):s,!!t&&this.checkModuleFilterGroupMatch(s)}checkModuleFilterGroupMatch(e){if("own"==e.groupscope&&this.data.assigned_user_id!=this.session.authData.userId)return!1;let t=!1;return!(!e||!e.conditions)&&(e.conditions.forEach((s=>(t=s.conditions?this.checkModuleFilterGroupMatch(s):this.checkModuleFilterConditionMatch(s),!("AND"==e.logicaloperator&&!t)&&(!!t||void 0)))),t)}checkModuleFilterConditionMatch(e){switch(e.operator){case"empty":return""==this.getFieldValue(e.field)||null==this.getFieldValue(e.field);case"equals":return this.getFieldValue(e.field)==e.filtervalue;case"oneof":return(e.filtervalue instanceof Array?e.filtervalue:e.filtervalue.split(",")).indexOf(this.getFieldValue(e.field))>-1;case"true":return 1==this.getFieldValue(e.field);case"false":return 0==this.getFieldValue(e.field);case"starts":return 0==this.getFieldValue(e.field).indexOf(e.filtervalue);case"contains":return this.getFieldValue(e.field).includes(e.filtervalue);case"ncontains":return!this.getFieldValue(e.field).includes(e.filtervalue);case"greater":return this.getFieldValue(e.field)>e.filtervalue;case"gequal":return this.getFieldValue(e.field)>=e.filtervalue;case"less":return this.getFieldValue(e.field)<e.filtervalue;case"lequal":return this.getFieldValue(e.field)<=e.filtervalue;case"today":return moment(this.getFieldValue(e.field)).isSame(new moment,"days");case"past":return moment(this.getFieldValue(e.field)).isBefore(new moment);case"future":return moment(this.getFieldValue(e.field)).isAfter(new moment);case"thismonth":return moment(this.getFieldValue(e.field)).isSame(new moment,"month");case"nextmonth":return moment(this.getFieldValue(e.field)).isAfter(new moment,"month");case"thisyear":return moment(this.getFieldValue(e.field)).isSame(new moment,"year");case"nextyear":return moment(this.getFieldValue(e.field)).isAfter(new moment,"year");case"inndays":return moment(this.getFieldValue(e.field)).isSame((new moment).add(+e.filtervalue,"d"),"days");case"ndaysago":return moment(this.getFieldValue(e.field)).isSame((new moment).subtract(+e.filtervalue,"d"),"days");case"inlessthandays":return moment(this.getFieldValue(e.field)).isBefore((new moment).add(+e.filtervalue,"d"),"days");case"inmorethandays":return moment(this.getFieldValue(e.field)).isAfter((new moment).add(+e.filtervalue,"d"),"days")}}buildBackup(e){let t={};return _.each(e,((s,i)=>{_.isObject(s)?_.isArray(s)?t[i]=s.map((e=>this.buildBackup(e))):moment.isMoment(s)?t[i]=moment(s):t[i]=this.buildBackup(s):t[i]=e[i]})),t}generateFieldHtmlContentBlobUrl(e){return this.backend.getRequest(`module/${this.module}/${this.id}/${e}/html`).pipe((0,c.T)((e=>{const t=new Blob([e.html],{type:"text/html"});return this.sanitizer.bypassSecurityTrustResourceUrl(window.URL.createObjectURL(t))})))}static#e=this.ɵfac=function(e){return new(e||model)(i.KVO(u.H),i.KVO(m.m),i.KVO(h.yu),i.KVO(r.g),i.KVO(g.d),i.KVO(p._),i.KVO(f.Ix),i.KVO(b.o),i.KVO(y.B),i.KVO(v.y),i.KVO(k.L),i.KVO(R.i),i.KVO(i.zZn),i.KVO(I.s),i.KVO(x.S),i.KVO(j.up))};static#t=this.ɵprov=i.jDH({token:model,factory:model.ɵfac})}return model})()},74547:(e,t,s)=>{"use strict";s.d(t,{S:()=>g});var i=s(18359),n=s(84412),l=s(21413),o=s(54438),a=s(49722),r=s(53584),d=s(29994),c=s(41081),u=s(40553),m=s(69904),h=s(50531);let g=(()=>{class modelattachments{constructor(e,t,s,l,o,a,r){this.backend=e,this.configurationService=t,this.session=s,this.toast=l,this.broadcast=o,this.language=a,this.modal=r,this.httpRequestsRefID=window._.uniqueId("model_attachments_http_ref_"),this.count=0,this.files=[],this.loading=!1,this.loaded=!1,this.subscriptions=new i.yU,this.loaded$=new n.t(!1)}getCount(e){let t=new l.B;return this.backend.getRequest(`common/spiceattachments/module/${this.module}/${this.id}/count`,{categoryId:e},this.httpRequestsRefID).subscribe({next:e=>{this.count=e.count,t.next(this.count),t.complete()},error:()=>{t.complete()}}),t.asObservable()}broadcastAttachmentCount(){this.broadcast.broadcastMessage("attachments.loaded",{module:this.module,id:this.id,attachmentcount:this.count,reload:!0}),this.subscriptions.add(this.broadcast.message$.subscribe((e=>{this.handleMessage(e)})))}getAttachments(e){let t=new l.B;return this.files=[],this.loading=!0,this.backend.getRequest(`common/spiceattachments/module/${this.module}/${this.id}`,{categoryId:e},this.httpRequestsRefID).subscribe({next:e=>{for(let t in e)this.files.find((e=>e.id==t))||(e[t].date=new moment(e[t].date),this.files.push(e[t]));this.count=this.files.length,this.broadcastAttachmentCount(),this.loading=!1,t.next(this.files),t.complete(),this.loaded=!0,this.loaded$.next(!0)},error:e=>{this.loading=!1,t.error(e),t.complete()}}),t.asObservable()}cloneAttachments(e,t){let s=new l.B;return this.backend.postRequest(`common/spiceattachments/module/${this.module}/${this.id}/clone/${e.module}/${e.id}`,{},{categoryId:t},this.httpRequestsRefID).subscribe({next:e=>{for(let t in e)this.files.find((e=>e.id==t))||(e[t].date=new moment(e[t].date),this.files.push(e[t]));this.count=this.files.length,this.broadcastAttachmentCount(),s.next(this.files),s.complete()},error:e=>{this.loading=!1,s.error(e),s.complete()}}),s.asObservable()}humanFileSize(e){let t=1024,s=e;if(Math.abs(e)<t)return s+" B";let i=["kB","MB","GB","TB","PB","EB","ZB","YB"],n=-1;do{s/=t,++n}while(Math.abs(s)>=t&&n<i.length-1);return s.toFixed(1)+" "+i[n]}uploadAttachmentsBase64(e,t){if(0===e.length)return;let s=new l.B,i=this.configurationService.getSystemParamater("upload_maxsize");for(let n of e){if(i&&n.size>i){this.toast.sendToast(this.language.getLabelFormatted("LBL_EXCEEDS_MAX_UPLOADFILESIZE",[n.name,this.humanFileSize(i)]),"error");continue}let e={date:new moment,file:"",file_mime_type:n.type?n.type:"application/octet-stream",filesize:n.size,filename:n.name,category_ids:t,filemd5:void 0,id:"",text:"",thumbnail:"",user_id:"1",user_name:"admin",uploadprogress:0};this.files.unshift(e),this.count++,this.broadcastAttachmentCount(),this.readFile(n).subscribe((()=>{this.uploadForUploadAttachmentsBase64(e,s,n)}))}return s.asObservable()}uploadAttachmentsBase64FromArray(e){if(0===e.length)return;let t=new l.B,s=this.configurationService.getSystemParamater("upload_maxsize");for(let i of e){if(s&&i.size>s){this.toast.sendToast(this.language.getLabelFormatted("LBL_EXCEEDS_MAX_UPLOADFILESIZE",[i.name,this.humanFileSize(s)]),"error");continue}let e={date:new moment,file:"",file_mime_type:i.type?i.type:"application/octet-stream",filesize:i.size,filename:i.name,filemd5:void 0,id:"",text:"",thumbnail:"",user_id:this.session.authData.userId,user_name:this.session.authData.userName,uploadprogress:0};this.files.unshift(e),this.count++,this.broadcastAttachmentCount(),this.uploadForUploadAttachmentsBase64(e,t,i)}return t.asObservable()}addFiles(e){if(0!==e.length)for(let t of e){let e={date:new moment,file:"",file_mime_type:t.type?t.type:"application/octet-stream",filesize:t.size,filename:t.name,filemd5:t.filemd5,id:"",text:"",thumbnail:t.thumbnail,user_id:this.session.authData.userId,user_name:this.session.authData.userName};this.files.unshift(e)}}uploadForUploadAttachmentsBase64(e,t,s){let i=new n.t(0);i.subscribe((t=>{e.uploadprogress=Math.floor(t)}));let l={file:s.filecontent,filename:s.name,filemimetype:s.type?s.type:"application/octet-stream",category_ids:e.category_ids},o="common/spiceattachments";this.module&&this.id&&(o+=`/module/${this.module}/${this.id}`),this.backend.postRequestWithProgress(o,null,l,i,this.httpRequestsRefID).subscribe((s=>{e.id=s[0].id,e.thumbnail=s[0].thumbnail,e.filemd5=s[0].filemd5,e.user_id=s[0].user_id,e.user_name=s[0].user_name,delete e.uploadprogress,t.next({files:s}),t.complete()}))}uploadFileBase64(e,t,s,i){let o=new l.B,a=this.configurationService.getSystemParamater("upload_maxsize");if(a&&atob(e).length>a)return void this.toast.sendToast(this.language.getLabelFormatted("LBL_EXCEEDS_MAX_UPLOADFILESIZE",[t,this.humanFileSize(a)]),"error");let r={date:new moment,file:"",file_mime_type:s||"application/octet-stream",filesize:atob(e).length,filename:t,filemd5:void 0,id:"",text:"",thumbnail:"",user_id:"1",user_name:"admin",category_ids:i,uploadprogress:0};this.files.unshift(r),this.count++,this.broadcastAttachmentCount();let d=new n.t(0);d.subscribe((e=>{r.uploadprogress=Math.floor(e)}));let c={file:e,filename:t,filemimetype:s||"application/octet-stream",category_ids:r.category_ids},u="common/spiceattachments";return this.module&&this.id&&(u+=`/module/${this.module}/${this.id}`),this.backend.postRequestWithProgress(u,null,c,d,this.httpRequestsRefID).subscribe((e=>{r.id=e[0].id,r.thumbnail=e[0].thumbnail,r.filemd5=e[0].filemd5,r.user_id=e[0].user_id,r.user_name=e[0].user_name,delete r.uploadprogress,o.next({files:e}),o.complete()})),o.asObservable()}readFile(e){let t=new l.B,s=new FileReader;return s.file=e,s.onloadend=e=>{let i=s.result.toString();i=i.substring(i.indexOf("base64,")+7);let n=s.file;n.filecontent=i,t.next(n),t.complete()},s.readAsDataURL(e),t.asObservable()}deleteAttachment(e){this.backend.deleteRequest(`common/spiceattachments/module/${this.module}/${this.id}/${e}`,null,this.httpRequestsRefID).subscribe((t=>{let s=this.files.findIndex((t=>t.id==e));this.files.splice(s,1),this.count--,this.broadcastAttachmentCount()}),(e=>{this.toast.sendToast("Cannot delete attachment.","error",e.error.error.message,!1)}))}downloadAttachment(e,t){this.backend.getRequest(`common/spiceattachments/module/${this.module}/${this.id}/${e}`,null,this.httpRequestsRefID).subscribe((e=>{let t=this.b64toBlob(e.file,e.file_mime_type),s=URL.createObjectURL(t),i=document.createElement("a");document.body.appendChild(i),i.href=s,i.download=e.filename,i.type=e.file_mime_type,i.click(),i.remove()}))}downloadAttachmentForField(e,t,s,i){this.backend.getRequest(`common/spiceattachments/module/${e}/${t}/byfield/${s}`,null,this.httpRequestsRefID).subscribe((e=>{let t=this.b64toBlob(e.file,e.file_mime_type),s=URL.createObjectURL(t),i=document.createElement("a");document.body.appendChild(i),i.href=s,i.download=e.filename,i.type=e.file_mime_type,i.click(),i.remove()}))}getAttachment(e){let t=new l.B;return this.backend.getRequest(`common/spiceattachments/module/${this.module}/${this.id}/${e}`,null,this.httpRequestsRefID).subscribe({next:e=>{t.next(e.file),t.complete()},error:e=>{t.error(e),t.complete()}}),t.asObservable()}b64toBlob(e,t="",s=512){let i=atob(e),n=[];for(let e=0;e<i.length;e+=s){let t=i.slice(e,e+s),l=new Array(t.length);for(let e=0;e<t.length;e++)l[e]=t.charCodeAt(e);let o=new Uint8Array(l);n.push(o)}return new Blob(n,{type:t})}openAttachment(e,t){this.backend.getRequest(`common/spiceattachments/module/${this.module}/${this.id}/${e}`,null,this.httpRequestsRefID).subscribe((e=>{let t=this.b64toBlob(e.file,e.file_mime_type),s=URL.createObjectURL(t);window.open(s,"_blank")}))}getAttachmentData(e){let t=new l.B;return this.backend.getRequest(`common/spiceattachments/module/${this.module}/${this.id}/${e}`,null,this.httpRequestsRefID).subscribe({next:e=>{t.next(e),t.complete()},error:e=>{t.error(e),t.complete()}}),t.asObservable()}ngOnDestroy(){this.backend.cancelPendingRequests([this.httpRequestsRefID])}handleMessage(e){if("attachments.uploaded"===e.messagetype)e.messagedata.reload&&(this.files=e.messagedata.uploadedFiles)}static#e=this.ɵfac=function(e){return new(e||modelattachments)(o.KVO(a.H),o.KVO(r.i),o.KVO(d.d),o.KVO(c.o),o.KVO(u.m),o.KVO(m.B),o.KVO(h.y))};static#t=this.ɵprov=o.jDH({token:modelattachments,factory:modelattachments.ɵfac})}return modelattachments})()},75103:(e,t,s)=>{"use strict";s.d(t,{K:()=>f});var i=s(54438),n=s(18359),l=s(84412),o=s(21413),a=s(7673),r=s(40553),d=s(49722),c=s(83935),u=s(69904),m=s(48849),h=s(29994),g=s(53584),p=s(41081);let f=(()=>{class modellist{constructor(e,t,s,o,a,r,d,c){this.broadcast=e,this.backend=t,this.metadata=s,this.language=o,this.userpreferences=a,this.session=r,this.configuration=d,this.toast=c,this.httpRequestsRefID=_.uniqueId("model_list_http_ref_"),this.module="",this.listDataChanged$=new i.bkB,this.listTypeComponent$=new i.bkB,this.listData={list:[],totalcount:0},this.offset=0,this.listSelected={type:"",items:[]},this.selectionChanged$=new i.bkB,this.sortArray=[],this.lastLoad=new moment,this.loadlimit=50,this.isLoading=!1,this.cancelPendingRequests=!0,this.searchTerm="",this.moduleAggregates=[],this.moduleAggregatesByFieldname={},this.selectedAggregates=[],this.reloadTimeOut=void 0,this.changedAggregates={added:[],deleted:[]},this.buckets={},this.useCache=!0,this.standardLists=[],this.serviceSubscriptions=new n.yU,this.displayAggregates=!1,this.displayFilters=!1,this._listfields=[],this.listfield$=new i.bkB,this.disableAutoloadListAll=!1,this.listItemMode="view",this.setDisableAutoloadListAll(),this.subscribeToBroadcast(),this.generateStandardLists(),this.listType$=new l.t(this.standardLists[0])}subscribeToBroadcast(){this.serviceSubscriptions.add(this.broadcast.message$.subscribe((e=>{this.handleMessage(e)})))}setDisableAutoloadListAll(){this.disableAutoloadListAll=!!this.configuration.getCapabilityConfig("module").disableAutoloadListAll}initialize(e,t){this.module=e,this.generateStandardLists(),this.embeddedByComponent=t,this.resetListData(),this.loadModuleAggregates();let s="all",i=this.userpreferences.getPreference(e);i?.lastListTypeId&&this.listTypeExists(i.lastListTypeId)&&(s=i.lastListTypeId),this.setListType(s,!1)}loadModuleAggregates(){this.moduleAggregates=[];let e=this.userpreferences.getPreference(this.module),t=e?.aggregateSettings??[];for(let e of this.metadata.getModuleAggregates(this.module)){let s={...e},i=t.find((e=>e.fieldname==s.fieldname));i&&(s.showall=i.showall,s.metric=i.metric,s.showChart=i.showChart,s.chartType=i.chartType,s.collapsed=i.collapsed??s.collapsed),this.moduleAggregates.push(s)}this.moduleAggregates.forEach((e=>this.moduleAggregatesByFieldname[e.fieldname]=e)),this.moduleAggregates.sort(((e,t)=>e.priority||t.priority?!e.priority||e.priority>t.priority?1:-1:0))}setModuleAggregatePreferences(){let e=this.userpreferences.getPreference(this.module);e||(e={}),e.aggregateSettings=[];for(let t of this.moduleAggregates)(t.showall||t.metric&&"doc_count"!=t.metric||t.showChart||t.collapsed)&&e.aggregateSettings.push({fieldname:t.indexfieldname,showall:t.showall,metric:t.metric,showChart:t.showChart,chartType:t.chartType,collapsed:t.collapsed});this.userpreferences.setPreference(this.module,e)}handleMessage(e){if(e.messagedata.module===this.module)switch(e.messagetype){case"model.delete":let t=this.listData.list.findIndex((t=>t.id==e.messagedata.id));if(t>=0){if(this.listData.list.splice(t,1),this.listData.totalcount--,this.bucketfield){let t=[];if(this.bucketamountfield)for(let s of this.bucketamountfield)t.push({fieldname:s.name,value:e.messagedata.data[s.name]});this.removeItemFromBucket(e.messagedata.data[this.bucketfield],t)}this.listDataChanged$.next(!0)}break;case"model.save":let s=this.listData.list.findIndex((t=>t.id==e.messagedata.id));if(s>=0){let t=this.listData.list[s].selected;if(this.listData.list[s]=e.messagedata.data,t&&(this.listData.list[s].selected=!0),this.bucketfield){if(e.messagedata.changed&&e.messagedata.changed[this.bucketfield]){let t=[];for(let s of this.bucketamountfield)t.push({fieldname:s.name,valuefrom:e.messagedata.backupdata[s.name],valueto:e.messagedata.data[s.name]});this.updateBuckets(e.messagedata.backupdata[this.bucketfield],e.messagedata.data[this.bucketfield],t)}else if(this.bucketamountfield){let t=this.buckets.bucketitems.find((t=>t.bucket==e.messagedata.data[this.bucketfield]));for(let s of this.bucketamountfield)e.messagedata.changed&&e.messagedata.changed[s.name]&&(t.values["_bucket_agg_"+s.name]+=e.messagedata.data[s.name]-e.messagedata.backupdata[s.name])}this.listDataChanged$.next(!0)}}else this.reLoadList()}}ngOnDestroy(){this.serviceSubscriptions.unsubscribe(),this.backend.cancelPendingRequests([this.httpRequestsRefID,this.httpRequestsRefID+"_get_list_data"])}setSortField(e,t,s=!0,i=!1){if(!e||this.isLoading)return;const n=i?"DESC":"ASC",l=i?"ASC":"DESC";let o=this.sortArray.findIndex((t=>t.sortfield==e));if(o>=0){let e=this.sortArray[o];e.sortdirection==n?e.sortdirection=l:this.sortArray.splice(o,1)}else this.sortArray.push({sortfield:e,sortdirection:t||n})}getSortField(e){let t=this.sortArray.findIndex((t=>t.sortfield==e));if(t>=0){return{sortdirection:this.sortArray[t].sortdirection,sortindex:t,sortitems:this.sortArray.length}}return!1}getSortFields(){let e=[];for(let t of this.sortArray)e.push(this.language.getFieldDisplayName(this.module,t.sortfield));return e.join(", ")}get isSorted(){return this.sortArray.length>0}addCustomListType(e){this.metadata.addModuleListType(this.module,e)}listTypeExists(e){return!!this.getListTypes().find((t=>t.id==e))}setListType(e,t=!0,s=[]){if(e==this.currentList?.id)return;const i=this.currentList?.listcomponent;if(this.displayAggregates=!1,this.displayFilters=!1,this.currentList=this.getListTypes().find((t=>t.id===e)),this.currentList){if(this.determineListFields(),t){let t=this.userpreferences.getPreference(this.module);t||(t={}),t.lastListTypeId=e,this.userpreferences.setPreference(this.module,t)}this.currentList.aggregates?this.selectedAggregates=JSON.parse(atob(this.currentList.aggregates)):this.selectedAggregates=[],this.currentList.sortfields?this.sortArray=JSON.parse(atob(this.currentList.sortfields)):this.sortArray=s,this.emitListTypeChange(),this.currentList.listcomponent!=i&&this.emitListTypeComponentChange()}}determineListFields(){this._listfields=[];let e=this.getFieldDefs();const t=this.embeddedByComponent||this.currentList.listcomponent;let s=this.metadata.getComponentConfig(t,this.module),i=this.metadata.getFieldSetFields(s.fieldset);for(let t of i){let s=e?e.find((e=>e.id==t.id)):void 0;e&&s?this._listfields.push({id:t.id,field:t.field,fieldconfig:t.fieldconfig,sort:s.sort,width:s.width}):e||t.fieldconfig.hidden||this._listfields.push({id:t.id,field:t.field,fieldconfig:t.fieldconfig})}e&&this._listfields.sort(((t,s)=>e.findIndex((e=>e.id==t.id))>e.findIndex((e=>e.id==s.id))?1:-1))}isCustomList(e){return e||(e=this.currentList.id),!this.standardLists.some((t=>t.id==e))}set listfields(e){this._listfields=e;for(let e in this.sortArray)this._listfields.find((t=>t.field==this.sortArray[e].sortfield))||this.sortArray.splice(parseInt(e,10),1);this.listfield$.emit(this._listfields)}get listfields(){return this._listfields}get hasInactiveFieldProperty(){return this.metadata.hasField(this.module,"is_inactive")}canDelete(){try{return"all"!=this.currentList.id&&"owner"!=this.currentList.id}catch(e){return!1}}filterEnabled(){try{return"all"!=this.currentList.id&&"owner"!=this.currentList.id}catch(e){return!1}}aggregatesEnabled(){try{return!(!this.searchAggregates||_.isEmpty(this.searchAggregates))}catch(e){return!1}}setToSession(){this.useCache&&this.configuration.setData("lastlist"+this.module,JSON.stringify({listdata:this.listData,sortarray:this.sortArray,searchterm:this.searchTerm,searchaggregates:this.searchAggregates,selectedaggregates:this.selectedAggregates,buckets:this.buckets}))}loadFromSession(){if(!this.useCache)return!1;let e=JSON.parse(this.configuration.getData("lastlist"+this.module));return!(!e||e.buckets?.bucketfield!=this.buckets?.bucketfield)&&(this.listData=e.listdata,this.searchTerm=e.searchterm,this.searchAggregates=e.searchaggregates,this.selectedAggregates=e.selectedaggregates,this.sortArray=e.sortarray,this.buckets=e.buckets,!0)}getGlobal(){return"1"==this.currentList.global}getFieldDefs(){try{return JSON.parse(atob(this.currentList.fielddefs))}catch(e){return}}getFilterDefs(){try{return JSON.parse(this.currentList.filterdefs)}catch(e){return this.hasInactiveFieldProperty?{logicaloperator:"and",groupscope:"all",groupstate:"active",conditions:[]}:{logicaloperator:"and",groupscope:"all",conditions:[]}}}addListType(e){let t=new o.B;return this.backend.postRequest("configuration/spiceui/core/modules/"+this.module+"/listtypes",{},JSON.stringify(e),this.httpRequestsRefID).subscribe((e=>{this.addCustomListType(e),this.setListType(e.id),t.next(!0),t.complete()})),t.asObservable()}updateStandardListsComponent(e,t){this.standardLists[0].listcomponent!=t&&(this.standardLists.forEach((e=>{e.listcomponent=t})),this.determineListFields(),this.userpreferences.setPreference("defaultlisttype",t,!0,this.module),this.emitListTypeComponentChange())}updateListTypeComponent(e){this.currentList?.listcomponent!=e&&(this.metadata.updateModuleListType(this.module,{id:this.currentList.id,listcomponent:e}),this.currentList.listcomponent=e,this.determineListFields(),this.emitListTypeComponentChange())}emitListTypeComponentChange(){this.listTypeComponent$.next(this.currentList.listcomponent)}updateListType(e){let t=new o.B;e||(e={});const s=this.currentList?.listcomponent;return e.aggregates=btoa(JSON.stringify(this.selectedAggregates)),e.sortfields=btoa(JSON.stringify(this.sortArray)),e.fielddefs=btoa(JSON.stringify(this.listfields.map((e=>({id:e.id,width:e.width}))))),e.listcomponent||(e.listcomponent=this.currentList.listcomponent),this.backend.postRequest(`configuration/spiceui/core/modules/${this.module}/listtypes/${this.currentList.id}`,{},e,this.httpRequestsRefID).subscribe((i=>{this.metadata.getModuleListTypes(this.module).some((t=>{if(t.id==this.currentList.id){for(let s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);return this.currentList=t,!0}})),e.id=this.currentList.id,this.metadata.updateModuleListType(this.module,e),this.emitListTypeChange(),this.currentList.listcomponent!=s&&this.emitListTypeComponentChange(),t.next(!0),t.complete()})),t.asObservable()}emitListTypeChange(){this.listType$.next(this.currentList)}deleteListType(e=""){""===e&&(e=this.currentList.id),this.backend.deleteRequest("configuration/spiceui/core/modules/"+this.module+"/listtypes/"+e,null,this.httpRequestsRefID).subscribe({next:t=>{this.metadata.deleteModuleListType(this.module,e),this.setListType("all")},error:e=>{this.toast.sendToast(this.language.getLabel("LBL_ERROR"),"error")}})}getLastLoadTime(){return this.lastLoad.format(this.userpreferences.getTimeFormat())}scheduleReloadList(){this.reloadTimeOut&&(window.clearTimeout(this.reloadTimeOut),this.reloadTimeOut=void 0),this.reloadTimeOut=window.setTimeout((()=>{this.exceuteReload()}),1e3)}exceuteReload(){(this.changedAggregates.added.length>0||this.changedAggregates.deleted.length>0)&&this.reLoadList()}reLoadList(e=!1){if(this.isLoading){const e=this.httpRequestsRefID+"_get_list_data";return this.cancelPendingRequests&&this.backend.cancelPendingRequests([e]),this.isLoading=!1,(0,a.of)(!1)}return this.changedAggregates.added=[],this.changedAggregates.deleted=[],this.getListData(e)}resetListData(){if(this.buckets&&this.buckets.bucketitems)for(let e of this.buckets.bucketitems)e.count=0,e.items=0;this.listData={list:[],totalcount:0},this.listDataChanged$.next(!0)}getListTypes(e=!0){return e?this.standardLists.concat(this.metadata.getModuleListTypes(this.module)):this.metadata.getModuleListTypes(this.module)}generateStandardLists(){this.standardLists=[{id:"all",global:"1",name:`${this.language.getModuleCombinedLabel("LBL_ALL",this.module)}`,listcomponent:"ObjectList"}],this.metadata.getFieldDefs(this.module,"assigned_user_id")&&this.standardLists.push({id:"owner",global:"1",name:`${this.language.getModuleCombinedLabel("LBL_MY",this.module)}`,listcomponent:"ObjectList"})}get hasAggregates(){return this.selectedAggregates.length>0}get hasNonSysAggregates(){return this.selectedAggregates.some((e=>{let t=e.split("::",1)[0];if(!this.moduleAggregatesByFieldname[t]?.system)return!0}))}hasAggregate(e,t){let s=e+"::"+t;return this.selectedAggregates.some((e=>e===s))}setAggregate(e,t){this.selectedAggregates.push(e+"::"+t);let s=this.changedAggregates.deleted.indexOf(e+"::"+t);s>=0?this.changedAggregates.deleted.splice(s,1):this.changedAggregates.added.push(e+"::"+t)}getCheckedAggregateCount(e){return this.selectedAggregates.filter((t=>t.indexOf(e+"::")>-1)).length}checkAggregate(e,t){return this.selectedAggregates.indexOf(e+"::"+t.trim())>-1}removeAggregate(e,t){let s=this.selectedAggregates.indexOf(e+"::"+t);if(s<0)return!1;this.selectedAggregates.splice(s,1);let i=this.changedAggregates.added.indexOf(e+"::"+t);return i>=0?this.changedAggregates.added.splice(i,1):this.changedAggregates.deleted.push(e+"::"+t),!0}canChangeAggegate(e){return 0==this.changedAggregates.added.length&&0==this.changedAggregates.deleted.length||!(this.changedAggregates.added.filter((t=>0!=t.indexOf(e+"::"))).length>0)&&!(this.changedAggregates.deleted.filter((t=>0!=t.indexOf(e+"::"))).length>0)}removeAllAggregates(e=!1){this.selectedAggregates=e?this.selectedAggregates.filter((e=>{let t=e.split("::",1)[0];return!!this.moduleAggregatesByFieldname[t]?.system})):[]}removeAggregatesOfField(e){this.selectedAggregates=this.selectedAggregates.filter((t=>t.split("::",1)[0]!==e))}setAllSelected(){this.listSelected.type="all";for(let e of this.listData.list)e.selected=!0;this.selectionChanged$.emit(!0)}setAllUnselected(){this.listSelected.type="none";for(let e of this.listData.list.filter((e=>1==e.selected)))e.selected=!1;this.selectionChanged$.emit(!0)}setRangeSelected(e,t){for(let s=e;s<=t;s++)this.listData.list[s-1].selected=!0;this.selectionChanged$.emit(!0)}getSelectedCount(){return this.listData.list.filter((e=>1==e.selected)).length}getSelectedIDs(){let e=[];for(let t of this.listData.list)t.selected&&e.push(t.id);return e}getSelectedItems(){return this.listData.list.filter((e=>e.selected))}checkAccess(e){if(!("edit"!=e&&"delete"!=e||"all"!=this.currentList.id&&"owner"!=this.currentList.id))return!1;if(!this.getGlobal())return!0;switch(e){case"delete":return this.canDelete()&&(this.session.authData.admin||this.metadata.checkModuleAcl(this.module,"moduleadmin"));case"edit":return this.session.authData.admin||this.metadata.checkModuleAcl(this.module,"moduleadmin");default:return!1}}getListData(e=!1){let t=new o.B;if(e){if(this.buckets&&this.buckets.bucketitems)for(let e of this.buckets.bucketitems)e.items=0}else this.isLoading=!0,this.resetListData();let s={};s[this.module]=this.selectedAggregates;const i={modulefilter:this.modulefilter,filtercontext:this.filtercontext,start:0,limit:this.loadlimit,listid:this.currentList.id,searchterm:this.searchTerm,searchgeo:this.searchGeo,aggregates:s,buckets:this.buckets,relatefilter:this.relatefilter?.active?this.relatefilter:null},n=this.httpRequestsRefID+"_get_list_data";return this.cancelPendingRequests&&this.backend.cancelPendingRequests([n]),this.backend.getList(this.module,this.sortArray,i,n).subscribe({next:e=>{this.listData=e,this.lastLoad=new moment,this.isLoading=!1,this.searchAggregates=e.aggregations,this.buckets=e.buckets,this.setToSession(),t.next(!0),t.complete(),this.listDataChanged$.next(!0)},error:e=>{this.toast.sendToast("error loading list"),this.isLoading=!1,t.error(e),t.complete()}}),t.asObservable()}canLoadMore(){return!this.isLoading&&this.listData.list.length<this.listData.totalcount}loadMoreList(){if(this.isLoading||this.listData.list.length>=this.listData.totalcount)return!1;this.isLoading=!0;let e={};e[this.module]=this.selectedAggregates,this.backend.getList(this.module,this.sortArray,{modulefilter:this.modulefilter,filtercontext:this.filtercontext,start:this.listData.list.length,limit:this.loadlimit,listid:this.currentList.id,searchterm:this.searchTerm,searchgeo:this.searchGeo,aggregates:e,buckets:this.buckets,relatefilter:this.relatefilter?.active?this.relatefilter:null},this.httpRequestsRefID).subscribe((e=>{this.listData.list=this.listData.list.concat(e.list),this.lastLoad=new moment,this.isLoading=!1,this.listDataChanged$.next(!0)}))}loadMoreBucketList(e){const t=this.buckets.bucketitems.find((t=>t.bucket==e));if(!t||this.isLoading||t.items>=t.items.total)return!1;this.isLoading=!0;let s={};s[this.module]=this.selectedAggregates,this.backend.getList(this.module,this.sortArray,{modulefilter:this.modulefilter,filtercontext:this.filtercontext,start:this.listData.list.length,limit:this.loadlimit,listid:this.currentList.id,searchterm:this.searchTerm,searchgeo:this.searchGeo,aggregates:s,buckets:{bucketfield:this.buckets.bucketfield,bucketitems:[t]},relatefilter:this.relatefilter?.active?this.relatefilter:null},this.httpRequestsRefID).subscribe((e=>{t.items=e.buckets.bucketitems[0].items,this.listData.list=this.listData.list.concat(e.list),this.lastLoad=new moment,this.listDataChanged$.next(!0),this.isLoading=!1}))}exportList(e){let t=new o.B,s=this.getSelectedIDs();if(s.length>0)this.backend.getLinkToDownload(`module/${this.module}/export`,"POST",{},{ids:s,fields:e},{},this.httpRequestsRefID).subscribe((e=>{t.next(e),t.complete()}));else{let s={};s[this.module]=this.selectedAggregates,this.backend.getLinkToDownload(`module/${this.module}/export`,"POST",{},{listid:this.currentList.id,modulefilter:this.modulefilter,sortfields:this.sortArray,fields:e,searchterm:this.searchTerm,searchgeo:this.searchGeo,aggregates:s},null,this.httpRequestsRefID).subscribe((e=>{t.next(e),t.complete()}))}return t.asObservable()}get bucketfield(){return this.buckets?this.buckets.bucketfield:""}get bucketamountfield(){return this.buckets?this.buckets.buckettotal:""}updateBuckets(e,t,s=[]){let i=this.buckets.bucketitems.find((t=>t.bucket==e));i.items--,i.total--;let n=this.buckets.bucketitems.find((e=>e.bucket==t));n.items++,n.total++;for(let e of this.buckets.buckettotal)for(let t of s)"sum"==e.function&&e.name==t.fieldname&&(i.values["_bucket_agg_"+t.fieldname]-=t.valuefrom,n.values["_bucket_agg_"+t.fieldname]+=t.valueto)}removeItemFromBucket(e,t=[]){let s=this.buckets.bucketitems.find((t=>t.bucket==e));s.items--,s.total--;for(let e of t)s.values["_bucket_agg_"+e.fieldname]-=e.value}static#e=this.ɵfac=function(e){return new(e||modellist)(i.KVO(r.m),i.KVO(d.H),i.KVO(c.yu),i.KVO(u.B),i.KVO(m.S),i.KVO(h.d),i.KVO(g.i),i.KVO(p.o))};static#t=this.ɵprov=i.jDH({token:modellist,factory:modellist.ɵfac})}return modellist})()},82293:(e,t,s)=>{"use strict";s.d(t,{c:()=>h});var i=s(84412),n=s(21413),l=s(54438),o=s(49722),a=s(53584),r=s(29994),d=s(41081),c=s(40553),u=s(69904),m=s(50531);let h=(()=>{class modelurls{constructor(e,t,s,n,l,o,a){this.backend=e,this.configurationService=t,this.session=s,this.toast=n,this.broadcast=l,this.language=o,this.modal=a,this.httpRequestsRefID=window._.uniqueId("model_urls_http_ref_"),this.count=0,this.urls=[],this.loading=!1,this.loaded=!1,this.loaded$=new i.t(!1)}getCount(){let e=new n.B;return this.backend.getRequest(`common/spiceurls/module/${this.module}/${this.id}/count`,null,this.httpRequestsRefID).subscribe({next:t=>{this.count=t.count,e.next(this.count),e.complete()},error:()=>{e.complete()}}),e.asObservable()}broadcastUrlCount(){this.broadcast.broadcastMessage("urls.loaded",{module:this.module,id:this.id,urlcount:this.count,reload:!0})}getUrls(){let e=new n.B;return this.urls=[],this.loading=!0,this.backend.getRequest(`common/spiceurls/module/${this.module}/${this.id}`,null,this.httpRequestsRefID).subscribe({next:t=>{for(let e in t)this.urls.find((t=>t.id==e))||(t[e].date=new moment(t[e].date),this.urls.push(t[e]));this.count=this.urls.length,this.broadcastUrlCount(),this.loading=!1,e.next(this.urls),e.complete(),this.loaded=!0,this.loaded$.next(!0)},error:t=>{this.loading=!1,e.error(t),e.complete()}}),e.asObservable()}deleteUrl(e){this.backend.deleteRequest(`common/spiceurls/module/${this.module}/${this.id}/${e}`,null,this.httpRequestsRefID).subscribe({next:t=>{let s=this.urls.findIndex((t=>t.id==e));this.urls.splice(s,1),this.count--,this.broadcastUrlCount()},error:e=>{this.toast.sendToast("ERR_URL_DELETE","error",e.error.error.message,!1)}})}getUrl(e){let t=new n.B;return this.backend.getRequest(`common/spiceurls/module/${this.module}/${this.id}/${e}`,null,this.httpRequestsRefID).subscribe({next:e=>{t.next(e.urlData),t.complete()},error:e=>{t.error(e),t.complete()}}),t.asObservable()}prepareUrlForSave(e){if(!e)return;let t=new n.B,s={date:new moment,url:e,id:"",url_name:"",user_id:"1",user_name:"admin",uploadprogress:0};return this.saveUrl(s,t),t.asObservable()}saveUrl(e,t){this.urls.unshift(e),this.count=this.urls.length,this.broadcastUrlCount();let s=new i.t(0);s.subscribe((t=>{e.uploadprogress=Math.floor(t)}));let n={data:e};this.backend.postRequestWithProgress(`common/spiceurls/module/${this.module}/${this.id}`,null,n,s,this.httpRequestsRefID).subscribe((s=>{e.id=s.id,e.user_id=s.user_id,e.user_name=s.user_name,e.url=s.url,e.url_name=s.url_name,delete e.uploadprogress,t.next({urls:s}),t.complete()}))}ngOnDestroy(){this.backend.cancelPendingRequests([this.httpRequestsRefID])}static#e=this.ɵfac=function(e){return new(e||modelurls)(l.KVO(o.H),l.KVO(a.i),l.KVO(r.d),l.KVO(d.o),l.KVO(c.m),l.KVO(u.B),l.KVO(m.y))};static#t=this.ɵprov=l.jDH({token:modelurls,factory:modelurls.ɵfac})}return modelurls})()},92462:(e,t,s)=>{"use strict";s.d(t,{g:()=>a});var i=s(54438),n=s(83935);let l=(()=>{class MathExpressionCompilerService{do(e){return this.evaluate(this.parse(this.lex(e)))}lex(e){let t,s=e=>/[+\-*\/\^%=(),]/.test(e),i=e=>/[0-9]/.test(e),n=e=>/\s/.test(e),l=e=>"string"==typeof e&&!s(e)&&!i(e)&&!n(e),o=[],a=0,r=()=>t=e[++a],d=(e,t)=>{o.push({type:e,value:t})};for(;a<e.length;){let t=e[a];if(n(t))r();else if(s(t))d(t),r();else if(i(t)){let e="";do{e+=t,t=r()}while(i(t));if("."===t)do{e+=t,t=r()}while(i(t));let s=parseFloat(e);if(!isFinite(s))throw"Number is too large or too small for a 64-bit double.";d("number",s)}else{if(!l(t))throw"Unrecognized token: "+t+" at "+a;{let e=t;for(;l(r());)e+=t;d("identifier",e)}}}return d("(end)"),o}parse(e){let t={},s=(e,s,i,n)=>{let l=t[e]||{};t[e]={lbp:l.lbp||i,nud:l.nud||s,led:l.led||n}};s("(",(()=>{let e=o(2);if(")"!==n().type)throw"Expected closing parenthesis ')'";return l(),e})),s("number",(e=>e)),s("identifier",(t=>{if("("===n().type){let s=[];if(")"===e[i+1].type)l();else{do{l(),s.push(o(2))}while(","===n().type);if(")"!==n().type)throw"Expected closing parenthesis ')'"}return l(),{type:"call",args:s,name:t.value}}return t})),s(","),s(")"),s("(end)");let i=0,n=()=>(e=>{let s=Object.create(t[e.type]);return s.type=e.type,s.value=e.value,s})(e[i]),l=()=>(i++,n()),o=e=>{let t,s=n();if(l(),!s.nud)throw"Unexpected token: "+s.type;for(t=s.nud(s);e<n().lbp;){if(s=n(),l(),!s.led)throw"Unexpected token: "+s.type;t=s.led(t)}return t},a=(e,t,i,n)=>{i=i||t,s(e,null,t,n||function(t){return{type:e,left:t,right:o(i)}})};var r,d;d=7,s(r="-",(()=>({type:r,right:o(d)}))),a("^",6,5),a("*",4),a("/",4),a("%",4),a("+",3),a("-",3),a("=",1,2,(e=>{if("call"===e.type){for(let t=0;t<e.args.length;t++)if("identifier"!==e.args[t].type)throw"Invalid argument name";return{type:"function",name:e.name,args:e.args,value:o(2)}}if("identifier"===e.type)return{type:"assign",name:e.value,value:o(2)};throw"Invalid lvalue"}));let c=[];for(;"(end)"!==n().type;)c.push(o(0));return c}evaluate(e){let t={"+":(e,t)=>e+t,"-":(e,t)=>e-t,"*":(e,t)=>e*t,"/":(e,t)=>e/t,"%":(e,t)=>e%t,"^":(e,t)=>Math.pow(e,t)},s={pi:Math.PI,e:Math.E},i={sin:Math.sin,cos:Math.cos,tan:Math.cos,asin:Math.asin,acos:Math.acos,atan:Math.atan,abs:Math.abs,round:Math.round,ceil:Math.ceil,floor:Math.floor,log:Math.log,exp:Math.exp,sqrt:Math.sqrt,max:Math.max,min:Math.min,random:Math.random},n={},l=e=>{if("number"===e.type)return e.value;if(t[e.type])return e.left?t[e.type](l(e.left),l(e.right)):t[e.type](l(e.right));if("identifier"===e.type){let t=n.hasOwnProperty(e.value)?n[e.value]:s[e.value];if(void 0===t)throw e.value+" is undefined";return t}if("assign"===e.type)s[e.name]=l(e.value);else{if("call"===e.type){for(let t=0;t<e.args.length;t++)e.args[t]=l(e.args[t]);return i[e.name].apply(null,e.args)}"function"===e.type&&(i[e.name]=function(){for(let t=0;t<e.args.length;t++)n[e.args[t].value]=arguments[t];let t=l(e.value);return n={},t})}},o="";for(let t=0;t<e.length;t++){let s=l(e[t]);void 0!==s&&(o+=s+"\n")}return o}static#e=this.ɵfac=function(e){return new(e||MathExpressionCompilerService)};static#t=this.ɵprov=i.jDH({token:MathExpressionCompilerService,factory:MathExpressionCompilerService.ɵfac,providedIn:"root"})}return MathExpressionCompilerService})();var o=s(29994);moment.defaultFormat="YYYY-MM-DD HH:mm:ss";let a=(()=>{class modelutilities{constructor(e,t,s){this.metadata=e,this.mathcomp=t,this.session=s}getRand(){return Math.random()}S4(){return(65536*(1+this.getRand())|0).toString(16).substring(1)}generateGuid(){return this.S4()+this.S4()+"-"+this.S4()+"-"+this.S4()+"-"+this.S4()+"-"+this.S4()+this.S4()+this.S4()}backendModel2spice(e,t){let s=this.metadata.getModuleFields(e);for(let i in s)t[i]&&(t[i]=this.backend2spice(e,i,t[i]));return t}backend2spice(e,t,s){let i=this.metadata.getFieldDefs(e,t);if(!i||!i.type)return s;switch(i.type){case"date":if(moment.isMoment(s))return s;let e=moment(s);return e.isValid()?e:null;case"datetime":case"datetimecombo":if(moment.isMoment(s))return s;let t=this.session.getSessionData("timezone")||moment.tz.guess(!0),n="string"==typeof t&&t.length>0?moment.utc(s).tz(t):moment(s);return n.isValid()?n:null;case"double":case"currency":return s?parseFloat(s):0;case"int":return s?parseInt(s,10):0;case"bool":case"boolean":return"1"==s||s>0||1==s;case"json":try{return _.isObject(s)?s:s?JSON.parse(s):{}}catch(e){return{}}case"link":if(_.isObject(s)&&s.beans&&i.module)for(let e in s.beans)s.beans[e]=this.backendModel2spice(i.module,s.beans[e]);return s;default:return s}}spiceModel2backend(e,t){let s={...t},i=this.metadata.getModuleFields(e);for(let n in i)t.hasOwnProperty(n)&&(s[n]=this.spice2backend(e,n,t[n]));return s}spice2backend(e,t,s){let i=this.metadata.getFieldDefs(e,t);if(!i||!i.type)return s;switch(i.type){case"relate":case"parent":case"linked":case"linkedparent":return null;case"date":if("string"==typeof s){let e=moment(s);return e.isValid()?e.format("YYYY-MM-DD"):""}return s&&s._isAMomentObject&&s.isValid()?s.format("YYYY-MM-DD"):"";case"datetime":case"datetimecombo":if("string"==typeof s){let e=this.session.getSessionData("timezone")||moment.tz.guess(!0),t="string"==typeof e&&e.length>0?moment(s).tz(e):moment(s);return t.isValid()?t.utc().format("YYYY-MM-DD HH:mm:ss"):""}return s&&s._isAMomentObject&&s.isValid()?moment(s).utc().format("YYYY-MM-DD HH:mm:ss"):"";case"json":return s?JSON.stringify(s):"";case"link":if(_.isObject(s)&&s.beans&&i.module)for(let e in s.beans)s.beans[e]=this.spiceModel2backend(i.module,s.beans[e]);return s;case"bool":case"boolean":return s&&("1"==s||s>0||!0===s)?"1":"0";default:return s}}formatDate(e){return moment(e).format("YYYY-MM-DD")}cleanAccountName(e){let t=["ag","gmbh","gesmbh","corp","inc"],s=e.toLowerCase();s=s.replace(/[^\w\s]/gi,"");let i=s.split(" ");for(let e of t){let t=i.indexOf(e);t>=0&&i.splice(t,1)}return i.join(" ")}static compare(e,t,s){switch(t){case"in":case"between":break;case"empty":return!e;case"nempty":return!!e;case"notnull":return null!==e;case"null":return null===e;case"contain":return!!e&&-1!==e.indexOf(s);case"ncontain":return!e||-1==e.indexOf(s);case"greaterequal":return e>=s;case"greater":return e>s;case"lessequal":case"lesserequal":return e<=s;case"less":case"lesser":return e<s;case"unequal":return e!=s;case"regex":return new RegExp(s).test(e);case"notregex":return!new RegExp(s).test(e);default:return e==s}}static strtobool(e){if("string"!=typeof e)return!1;switch(e.toLowerCase().trim()){case"false":case"no":case"0":case"":return!1;default:return!0}}static strtomoment(e,t){return moment(modelutilities.strtotime(e,t),"X")}static strtotime(e,t){let s,i,n,l,o,a,r,d,c,u,m,h=!1;if(!e)return h;e=e.replace(/^\s+|\s+$/g,"").replace(/\s{2,}/g," ").replace(/[\t\r\n]/g,"").toLowerCase();let g=new RegExp(["^(\\d{1,4})","([\\-\\.\\/:])","(\\d{1,2})","([\\-\\.\\/:])","(\\d{1,4})","(?:\\s(\\d{1,2}):(\\d{2})?:?(\\d{2})?)?","(?:\\s([A-Z]+)?)?$"].join(""));if(i=e.match(g),i&&i[2]===i[4])if(i[1]>1901)switch(i[2]){case"-":case"/":return i[3]>12||i[5]>31?h:new Date(i[1],parseInt(i[3],10)-1,i[5],i[6]||0,i[7]||0,i[8]||0,i[9]||0).getTime()/1e3;case".":return h}else if(i[5]>1901)switch(i[2]){case"-":case".":return i[3]>12||i[1]>31?h:new Date(i[5],parseInt(i[3],10)-1,i[1],i[6]||0,i[7]||0,i[8]||0,i[9]||0).getTime()/1e3;case"/":return i[1]>12||i[3]>31?h:new Date(i[5],parseInt(i[1],10)-1,i[3],i[6]||0,i[7]||0,i[8]||0,i[9]||0).getTime()/1e3}else switch(i[2]){case"-":return i[3]>12||i[5]>31||i[1]<70&&i[1]>38?h:(l=i[1]>=0&&i[1]<=38?+i[1]+2e3:i[1],new Date(l,parseInt(i[3],10)-1,i[5],i[6]||0,i[7]||0,i[8]||0,i[9]||0).getTime()/1e3);case".":return i[5]>=70?i[3]>12||i[1]>31?h:new Date(i[5],parseInt(i[3],10)-1,i[1],i[6]||0,i[7]||0,i[8]||0,i[9]||0).getTime()/1e3:i[5]<60&&!i[6]?i[1]>23||i[3]>59?h:(n=new Date,new Date(n.getFullYear(),n.getMonth(),n.getDate(),i[1]||0,i[3]||0,i[5]||0,i[9]||0).getTime()/1e3):h;case"/":return i[1]>12||i[3]>31||i[5]<70&&i[5]>38?h:(l=i[5]>=0&&i[5]<=38?+i[5]+2e3:i[5],new Date(l,parseInt(i[1],10)-1,i[3],i[6]||0,i[7]||0,i[8]||0,i[9]||0).getTime()/1e3);case":":return i[1]>23||i[3]>59||i[5]>59?h:(n=new Date,new Date(n.getFullYear(),n.getMonth(),n.getDate(),i[1]||0,i[3]||0,i[5]||0).getTime()/1e3)}if("now"===e)return null===t||isNaN(t)?(new Date).getTime()/1e3|0:0|t;if(!isNaN(s=Date.parse(e)))return s/1e3|0;if(g=new RegExp(["^([0-9]{4}-[0-9]{2}-[0-9]{2})","[ t]","([0-9]{2}:[0-9]{2}:[0-9]{2}(\\.[0-9]+)?)","([\\+-][0-9]{2}(:[0-9]{2})?|z)"].join("")),i=e.match(g),i&&("z"===i[4]?i[4]="Z":i[4].match(/^([+-][0-9]{2})$/)&&(i[4]=i[4]+":00"),!isNaN(s=Date.parse(i[1]+"T"+i[2]+i[4]))))return s/1e3|0;function p(e){let t=e.split(" "),s=t[0],i=t[1].substring(0,3),n=/\d+/.test(s),l=("last"===s?-1:1)*("ago"===t[2]?-1:1);if(n&&(l*=parseInt(s,10)),r.hasOwnProperty(i)&&!t[1].match(/^mon(day|\.)?$/i))return o["set"+r[i]](o["get"+r[i]]()+l);if("wee"===i)return o.setDate(o.getDate()+7*l);if("next"===s||"last"===s)!function(e,t,s){let i,n=a[t];void 0!==n&&(i=n-o.getDay(),0===i?i=7*s:i>0&&"last"===e?i-=7:i<0&&"next"===e&&(i+=7),o.setDate(o.getDate()+i))}(s,i,l);else if(!n)return!1;return!0}if(o=t?new Date(1e3*t):new Date,a={sun:0,mon:1,tue:2,wed:3,thu:4,fri:5,sat:6},r={yea:"FullYear",mon:"Month",day:"Date",hou:"Hours",min:"Minutes",sec:"Seconds"},c="(years?|months?|weeks?|days?|hours?|minutes?|min|seconds?|sec|sunday|sun\\.?|monday|mon\\.?|tuesday|tue\\.?|wednesday|wed\\.?|thursday|thu\\.?|friday|fri\\.?|saturday|sat\\.?)",u="([+-]?\\d+\\s"+c+"|(last|next)\\s"+c+")(\\sago)?",i=e.match(new RegExp(u,"gi")),!i)return h;for(m=0,d=i.length;m<d;m++)if(!p(i[m]))return h;return o.getTime()/1e3}http_build_query(e,t="",s="&"){let i=[],n=(e,t,s)=>{let i=[];if(!0===t?t="1":!1===t&&(t="0"),null!==t){if("object"==typeof t){for(let l in t)null!==t[l]&&i.push(n(e+"["+l+"]",t[l],s));return i.join(s)}if("function"!=typeof t)return encodeURIComponent(e)+"="+encodeURIComponent(t);throw new Error("There was an error processing for http_build_query().")}return""};s||(s="&");for(let l in e){let o=e[l];t&&!isNaN(parseFloat(l))&&(l=String(t)+l);let a=n(l,o,s);""!==a&&i.push(a)}return i.join(s)}compileMathExpression(e){try{return this.mathcomp.do(e)}catch(e){return console.warn(e),!1}}timezoneChanged(e,t){for(let s in e)if(_.isObject(e[s]))if(e[s]&&e[s]._isAMomentObject)e[s]._isUTC&&e[s].tz(t);else if(e[s].beans&&_.isObject(e[s].beans))for(let i in e[s].beans)this.timezoneChanged(e[s].beans[i],t)}static#e=this.ɵfac=function(e){return new(e||modelutilities)(i.KVO(n.yu),i.KVO(l),i.KVO(o.d))};static#t=this.ɵprov=i.jDH({token:modelutilities,factory:modelutilities.ɵfac,providedIn:"root"})}return modelutilities})()},60968:(e,t,s)=>{"use strict";s.d(t,{L:()=>R});var i=s(54438),n=s(91768),l=s(18359),o=s(84412),a=s(21413),r=s(7673),d=s(345),c=s(29994),u=s(50531),m=s(69904),h=s(40553),g=s(53584),p=s(83935),f=s(13562),b=s(71475),y=s(49722),v=s(48849),k=s(57363);let R=(()=>{class navigation{constructor(e,t,s,n,a,r,d,c,u,m,h,g){this.title=e,this.session=t,this.modal=s,this.language=n,this.broadcast=a,this.configurationService=r,this.metadata=d,this.helper=c,this.socket=u,this.backend=m,this.userpreferences=h,this.router=g,this.navigationparadigm="subtabbed",this.enforcednavigationparadigm=!1,this.activeModule="Home",this.modelsEditing=[],this.modelregister=[],this.modelregisterCounter=0,this.activeObject="",this.maintab={path:void 0,params:void 0,id:"main",active:!0,pinned:!1,enablesubtabs:!1,url:"module/Home"},this.objectTabs=[],this.objectTabsChange$=new i.bkB,this.subscriptions=new l.yU,this.activeModule$=new i.bkB,this.broadcast.message$.subscribe((e=>this.handleMessage(e))),window.setTimeout((()=>{addEventListener("beforeunload",(e=>{this.anyDirtyModel()&&(e.preventDefault(),e.returnValue="")}))}),1),this.activeTab$=new o.t("main"),this.setTabTitle()}get mainTabs(){return this.objectTabs.filter((e=>null==e.parentid))}get subTabs(){return this.objectTabs.filter((e=>void 0!==e.parentid))}hasCloseableTabs(e,t,s){const i=this.getTabScopeTabs(s),n=i.findIndex((t=>t.id===e));switch(t){case"right":return n<i.length-1;case"left":return n>0;case"other":return i.length>1}}getTabScopeTabs(e){return"main"==e?this.mainTabs:this.subTabs}moveSubTabToMainTabs(e){this.subTabs.find((t=>t.id===e)).parentid=void 0}findTabsToClose(e,t,s){const i=this.getTabScopeTabs(s),n=i.findIndex((t=>t.id===e)),l=i.filter((e=>!e.pinned));switch(t){case"other":return l.filter((t=>t.id!==e));case"left":return l.slice(0,n);case"right":return l.slice(n+1)}}closeTabs(e,t,s){this.findTabsToClose(t,e,s).forEach((e=>{this.closeObjectTab(e.id)})),"right"!=e&&this.setActiveTab(t)}setSessionData(){this.session.setSessionData("navigation",{main:this.maintab,tabs:this.objectTabs})}get activeTabObject(){return this.maintab.active?this.maintab:this.objectTabs.find((e=>e.active))}get activeTab(){return this.maintab.active?"main":this.objectTabs.find((e=>e.active))?.id}set activeTab(e){if(this.maintab.active)this.maintab.active=!1;else{let e=this.objectTabs.find((e=>e.active));e&&(e.active=!1)}if("main"==e)this.maintab.active=!0,this.activeTab$.next("main"),this.router.navigate([this.maintab.url]);else{let t=this.objectTabs.find((t=>t.id==e));t&&this.setTabActive(t)}this.setSessionData()}setTabActive(e){e.active=!0,this.activeTab$.next(e.id),this.setTabTitle(),this.router.navigate([e.url])}getSubTabs(e){return e?this.objectTabs.filter((t=>t.parentid==e)):[]}get displayTab(){if(this.maintab.active)return"main";let e=this.objectTabs.find((e=>e.active));return e?.id}setActiveModule(e,t="",s=""){this.activeModule=e,this.activeModule$.emit(e),this.title.setTitle(this.systemName+" / "+(""!==s?s:e))}get systemName(){return this.configurationService.systemName}enforceNavigationParadigm(e){this.enforcednavigationparadigm=!0,this.navigationparadigm=e}handleMessage(e){switch(e.messagetype){case"loader.completed":if(!this.enforcednavigationparadigm&&"loadUserData"==e.messagedata){this.userpreferences.getPreference("navigation_paradigm");this.navigationparadigm="subtabbed",this.session.setSessionData("navigation_paradigm",this.navigationparadigm)}break;case"userpreferences.save":let t=this.userpreferences.getPreference("navigation_paradigm");t="subtabbed",!this.enforcednavigationparadigm&&t&&this.navigationparadigm!=t&&("simple"==t&&this.navigationparadigm!=t?(this.objectTabs=[],this.router.navigate(["module/Home"])):"simple"!=t&&this.navigationparadigm!=t&&this.router.navigate(["module/Home"]),this.navigationparadigm=t,this.session.setSessionData("navigation_paradigm",this.navigationparadigm));break;case"logout":this.objectTabs=[],this.maintab={path:void 0,params:void 0,id:"main",pinned:!1,active:!0,enablesubtabs:!1,url:"module/Home"},this.subscriptions.unsubscribe();break;case"login":let s=this.session.getSessionData("navigation_paradigm");s&&(this.navigationparadigm=s);let i=this.session.getSessionData("navigation");_.isEmpty(i)||(this.maintab=i.main,this.objectTabs=i.tabs,this.maintab.params?.module&&(this.activeModule=this.maintab.params.module),this.activeTab$.next(this.activeTab),this.setTabTitle()),this.subscriptions.add(this.socket.initializeNamespace("module").subscribe((e=>this.handleSocketEvents(e))));break;case"model.delete":for(let t of this.objectTabs.filter((t=>t.params.module==e.messagedata.module&&t.params.id==e.messagedata.id)))this.closeObjectTab(t.id,!0)}}handleSocketEvents(e){switch(e.type){case"update":case"systemupdate":"systemupdate"!=e.type&&e.data.sessionId==n.VV.hashStr(this.session.authData.sessionId)||!this.modelregister.find((t=>t.model.module==e.data.module&&t.model.id==e.data.id&&!t.model.isEditing))||this.backend.get(e.data.module,e.data.id).subscribe((t=>{let s=this.modelregister.filter((t=>t.model.module==e.data.module&&t.model.id==e.data.id&&!t.model.isEditing));for(let e of s)e.model.setData({...t},!1),e.model.data$.next(e.model.data);this.broadcast.broadcastMessage("model.save",{id:e.data.id,module:e.data.module,data:t})}))}}addModelEditing(e,t,s,i){e&&t&&this.modelsEditing.push({id:e,module:t,model:s,summary_text:i,tabid:this.activeTab})}removeModelEditing(e,t){t&&e&&this.modelsEditing.some(((s,i)=>{if(s.id==t&&s.module==e)return this.modelsEditing.splice(i,1),!0}))}get editing(){return this.modelsEditing.length>0}discardAllChanges(){this.modelsEditing=[]}registerModel(e){let t=++this.modelregisterCounter;return this.modelregister.push({id:t,model:e,tabid:this.activeTab}),this.socket.joinRoom("module",n.VV.hashStr(`${e.module}:${e.id}`).toString()),t}unregisterModel(e){let t=this.modelregister.findIndex((t=>t.id==e));if(t>=0){let e=this.modelregister[t].model.module,s=this.modelregister[t].model.id;0==this.modelregister.filter((t=>t.id!=s&&t.model.module==e&&t.model.id==s)).length&&this.socket.leaveRoom("module",n.VV.hashStr(`${e}:${s}`).toString()),this.modelregister.splice(t,1)}}getRegisteredModel(e,t){return this.modelregister.find((s=>s.model.id==e&&s.model.module==t))?.model}anyDirtyModel(e){return this.modelsEditing.some((t=>{if(t.model.isDirty()&&(!e||e&&(t.tabid==e||this.parentTabId(e)==e)))return!0}))}parentTabId(e){return"main"==e?null:this.objectTabs.find((t=>t.id==e)).parentid}matchPath(e,t){if(e.path.replace("tab/:tabid/","")==t.path)return!0;if(e.path.replace("tab/:tabid/","")==t.referencepath)return!0;let s=this.metadata.getRouteDetails(e.path.replace("tab/:tabid/",""));return!(!s.referencepath||s.referencepath!=t.path)||!(!s.referencepath||s.referencepath!=t.referencepath)}buildUrl(e){let t="";return e.forEach((e=>{""!=t&&(t+="/"),t+=e.path})),t}matchRouteParams(e,t){if(1==e.path.split(":").length||_.isEqual(e.params,t))return!0;if(t.tabid&&t.tabid==e.id){let s={...t};return delete s.tabid,_.isEqual(e.params,s)}return!1}handleNavigation(e,t,s){let i=this.metadata.getRouteDetails(t.path.replace("tab/:tabid/",""));if("M"==i?.target||"Home"==e.module){if(this.maintab.path==t.path&&_.isEqual(this.maintab.params,e))return void(this.activeTab="main");this.mainTabChangeCheck().subscribe((i=>{i?(this.maintab.path=t.path,this.maintab.params={...e},this.maintab.url=this.buildUrl(s.url),this.activeTab="main",this.maintab.params?.module&&(this.activeModule=this.maintab.params.module)):this.router.navigate([this.maintab.url])}))}else{for(let n of this.objectTabs)if(this.matchPath(n,i)&&this.matchRouteParams(n,e))return n.path!=t.path.replace("tab/:tabid/","")&&(n.path=t.path,n.url=this.buildUrl(s.url)),void(this.activeTab=n.id);let n;e.tabid&&(n=this.objectTabs.find((t=>t.id==e.tabid)));let l=this.helper.generateGuid();this.objectTabs.unshift({id:l,parentid:n&&n.enablesubtabs?n.id:void 0,path:t.path,url:this.buildUrl(s.url),params:{...e},active:!1,pinned:!1,enablesubtabs:"1"==i.subtabs}),this.activeTab=l,this.objectTabsChange$.emit(!0)}}addObjectTab(e){this.objectTabs.unshift(e),this.activeTab=e.id}setActiveTab(e){this.activeTab=e,this.activeTab$.next(this.activeTab),this.setTabTitle()}setTabTitle(){let e=this.getTabById(this.activeTab),t="";e.displayname?t=e.displayname:e.displaymodule?t=this.language.getModuleName(e.displaymodule):this.activeModule&&(t=this.language.getModuleName(this.activeModule)),this.title.setTitle(this.systemName+(t?` / ${t}`:""))}cloneTab(e){let t=this.getTabById(e),s=this.helper.generateGuid();this.objectTabs.unshift({id:s,parentid:void 0,path:t.path,url:t.url,params:{...t.params},active:!1,pinned:!1,enablesubtabs:t.enablesubtabs}),this.activeTab=s}settabinfo(e,t){if("main"==e)t.displaymodule&&this.setActiveModule(t.displaymodule);else{let s=this.getTabById(e);s&&(s.displayname=t.displayname,s.displaymodule=t.displaymodule,s.displayicon=t.displayicon,this.objectTabsChange$.emit(!0))}}getTabById(e){return"main"==e?this.maintab:this.objectTabs.find((t=>t.id==e))}mainTabChangeCheck(){if(this.anyDirtyModel("main")){let e=new a.B;return this.modal.confirm(this.language.getLabel("MSG_NAVIGATIONSTOP","","long"),this.language.getLabel("MSG_NAVIGATIONSTOP")).subscribe((t=>{t?e.next(!0):e.next(!1),e.complete()})),e.asObservable()}return(0,r.of)(!0)}closeObjectTab(e,t=!1){"main"!=e&&(!t&&this.anyDirtyModel(e)?this.modal.confirm(this.language.getLabel("MSG_CLOSETAB","","long"),this.language.getLabel("MSG_CLOSETAB")).subscribe((t=>{t&&this.unsetObjectTab(e)})):this.unsetObjectTab(e))}unsetObjectTab(e){let t=this.objectTabs.findIndex((t=>t.id==e));if(t>=0){if(this.objectTabs[t].active||this.objectTabs.find((e=>e.active))?.parentid==e)if(this.objectTabs[t].parentid)this.setActiveTab(this.objectTabs[t].parentid);else if(0!=t){const e=t-1;null==this.objectTabs[e].parentid?this.setActiveTab(this.objectTabs[e].id):this.setActiveTab("main")}else this.setActiveTab("main");this.objectTabs.splice(t,1);let s=-1;for(;(s=this.modelregister.findIndex((t=>t.tabid==e)))>=0;)this.modelregister.splice(s,1);for(t=this.objectTabs.length-1;t>=0;){if(this.objectTabs[t].parentid==e){this.objectTabs.splice(t,1);let s=-1;for(;(s=this.modelregister.findIndex((t=>t.tabid==e)))>=0;)this.modelregister.splice(s,1)}t--}this.objectTabsChange$.emit(!0),this.setSessionData()}}checkActiveRoute(e){return _.isEqual(e,this.activeRoute)}static#e=this.ɵfac=function(e){return new(e||navigation)(i.KVO(d.hE),i.KVO(c.d),i.KVO(u.y),i.KVO(m.B),i.KVO(h.m),i.KVO(g.i),i.KVO(p.yu),i.KVO(f.d),i.KVO(b.s),i.KVO(y.H),i.KVO(v.S),i.KVO(k.Ix))};static#t=this.ɵprov=i.jDH({token:navigation,factory:navigation.ɵfac,providedIn:"root"})}return navigation})()},66031:(e,t,s)=>{"use strict";s.d(t,{_:()=>o});var i=s(54438),n=s(84412),l=s(60968);let o=(()=>{class navigationtab{constructor(e){this.navigation=e,this.activeRoute={params:void 0,path:void 0},this.tabinfo$=new i.bkB,this.close$=new i.bkB,this.activeRoute$=new n.t(this.activeRoute)}setTabInfo(e){this.tabinfo$.emit(e)}get tabdata(){return this.objecttab?.tabdata}set tabdata(e){this.objecttab.tabdata=e,this.navigation.setSessionData()}closeTab(){this.close$.emit(!0)}static#e=this.ɵfac=function(e){return new(e||navigationtab)(i.KVO(l.L))};static#t=this.ɵprov=i.jDH({token:navigationtab,factory:navigationtab.ɵfac})}return navigationtab})()},97317:(e,t,s)=>{"use strict";s.d(t,{E:()=>m});var i=s(54438),n=s(49722),l=s(40553),o=s(53584),a=s(48849),r=s(69904),d=s(345),c=s(71475),u=s(29994);let m=(()=>{class notification{constructor(e,t,s,i,n,l,o,a){this.backend=e,this.broadcast=t,this.configuration=s,this.preferences=i,this.language=n,this.sanitizer=l,this.socket=o,this.session=a,this.unreadCount=0,this.totalCount=0,this.notifications=[],this.unreadNotifications=[],this.desktopNotifications=[],this.isLoading=!1,this.newNotifications=[],this.initializeDesktopNotification().then((()=>this.loadNotifications())),this.initializeSocket(),this.subscribeToBroadcast()}initializeDesktopNotification(){return"Notification"in window?"default"===Notification.permission?Notification.requestPermission().then((e=>{this.preferences.setPreference("displayDesktopNotifications","granted"==e,!0)})):Promise.resolve(null):(console.error("This browser does not support desktop notification"),Promise.resolve(null))}markAsRead(e){this.notifications.some((t=>{if(t.id==e)return t.notification_read=1,this.unreadCount--,!0})),this.unreadNotifications=this.unreadNotifications.filter((t=>t.id!==e)),this.backend.postRequest(`common/SpiceNotifications/${e}/markasread`)}markAllAsRead(){this.notifications.forEach((e=>{e.notification_read=1})),this.unreadNotifications=[],this.unreadCount=0,this.backend.postRequest("common/SpiceNotifications/all/read")}loadNotifications(){this.setInitialValues(this.configuration.getData("spicenotifications")),this.broadcast.message$.subscribe((e=>{"loader.completed"===e.messagetype&&"loadUserData"===e.messagedata&&this.setInitialValues(this.configuration.getData("spicenotifications"))}))}reloadNotifications(){this.notifications=[],this.unreadNotifications=[],this.desktopNotifications=[],this.loadNotificationsFromBackend()}loadMoreNotifications(){this.isLoading||this.notifications.length>=this.totalCount||this.loadNotificationsFromBackend()}loadNotificationsFromBackend(){this.isLoading=!0,this.backend.getRequest("common/SpiceNotifications",{offset:this.notifications.length}).subscribe({next:e=>{this.isLoading=!1,this.notifications=this.notifications.concat(e.records.map((e=>this.parseNotification(e)))),this.unreadNotifications=this.notifications.filter((e=>1!=e.notification_read)),this.setUnreadCount()},error:e=>{this.isLoading=!1}})}pushNotification(e){e=this.parseNotification(e),this.notifications.unshift(e),this.unreadNotifications.unshift(e),this.pushDesktopNotification(e),this.preferences.toUse.showRealtimeNotifications&&this.displayRealtimeNotification(e),this.unreadCount++}displayRealtimeNotification(e,t=!0){this.newNotifications.push(e),this.pushDesktopNotification(e),t&&window.setTimeout((()=>this.clearTempNotification(e)),1e4)}clearTempNotification(e){this.newNotifications=this.newNotifications.filter((t=>t!=e))}pushDesktopNotification(e){if(!this.preferences.toUse.displayDesktopNotifications)return;const t=e?this.generateDesktopNotificationTitle(e):this.language.getLabel("MSG_NEW_NOTIFICATIONS");this.desktopNotifications.unshift(new Notification(this.configuration.systemName,{body:t,icon:"config/headerimage"}))}setUnreadCount(){this.unreadCount=this.unreadNotifications.length}setInitialValues(e){e&&Array.isArray(e.records)&&(this.totalCount=e.count,this.notifications=e.records.map((e=>this.parseNotification(e))),this.unreadNotifications=this.notifications.filter((e=>1!=e.notification_read)),this.setUnreadCount(),this.unreadCount>0&&this.pushDesktopNotification())}initializeSocket(){this.socket.initializeNamespace("notifications").subscribe((e=>this.handleSocketEvents(e))),this.socket.joinRoom("notifications",this.session.authData.userId)}generateDesktopNotificationTitle(e){switch(e.notification_type){case"reminder":return`${this.language.getLabel("LBL_REMINDER")} ${e.bean_name}\n${e.notification_date}`;case"assign":return`${this.language.getLabel("LBL_ASSIGNED")} ${e.bean_name} ${this.language.getLabel("LBL_BY")} ${e.created_by_name}`;case"change":return`${this.language.getLabel("LBL_CHANGED")} ${e.bean_name} ${this.language.getLabel("LBL_BY")} ${e.created_by_name}`;case"delete":return`${this.language.getLabel("LBL_DELETED")} ${e.bean_name} ${this.language.getLabel("LBL_BY")} ${e.created_by_name}`}}subscribeToBroadcast(){this.broadcast.message$.subscribe((e=>{"login"===e.messagetype&&this.initializeSocket(),"logout"===e.messagetype&&this.socket.disconnect("notifications")}))}handleSocketEvents(e){if("new"===e.type)e.data&&this.pushNotification(e.data)}parseNotification(e){const t=this.session.getSessionData("timezone")||moment.tz.guess(!0),s=`${this.preferences.getDateFormat()} ${this.preferences.getTimeFormat()}`;let i="string"==typeof t&&t.length>0?moment.utc(e.notification_date).tz(t):moment(e.notification_date);return e.notification_date=i.isValid()?i.format(s):null,e.additional_infos&&"string"==typeof e.additional_infos&&(e.additional_infos=JSON.parse(e.additional_infos)),e}static#e=this.ɵfac=function(e){return new(e||notification)(i.KVO(n.H),i.KVO(l.m),i.KVO(o.i),i.KVO(a.S),i.KVO(r.B),i.KVO(d.up),i.KVO(c.s),i.KVO(u.d))};static#t=this.ɵprov=i.jDH({token:notification,factory:notification.ɵfac,providedIn:"root"})}return notification})()},56420:(e,t,s)=>{"use strict";s.d(t,{l:()=>n});var i=s(54438);let n=(()=>{class popup{constructor(){this.closePopup$=new i.bkB}close(){this.closePopup$.emit(!0)}static#e=this.ɵfac=function(e){return new(e||popup)};static#t=this.ɵprov=i.jDH({token:popup,factory:popup.ɵfac})}return popup})()},72541:(e,t,s)=>{"use strict";s.d(t,{_:()=>g});var i=s(7673),n=s(21413),l=s(96354),o=s(97586),a=s.n(o),r=s(54438),d=s(49722),c=s(40553),u=s(53584),m=s(92462),h=s(29994);let g=(()=>{class recent{constructor(e,t,s,i,n){this.backend=e,this.broadcast=t,this.configuration=s,this.modelutils=i,this.session=n,this.httpRequestsRefID=window._.uniqueId("recent_items_http_ref_"),this.moduleItems={},this.recentItems=[],this.isInitialized=!1,this.broadcast.message$.subscribe((e=>this.handleMessage(e)))}handleMessage(e){switch(e.messagetype){case"model.save":let t=this.recentItems.find((t=>t.module_name==e.messagedata.module&&t.item_id==e.messagedata.id));if(t&&(t.data=e.messagedata.data,t.item_summary=e.messagedata.data.summary_text),this.moduleItems[e.messagedata.module]){let t=this.moduleItems[e.messagedata.module].find((t=>t.module_name==e.messagedata.module&&t.item_id==e.messagedata.id));t&&(t.data=e.messagedata.data,t.item_summary=e.messagedata.data.summary_text)}break;case"model.delete":let s=this.recentItems.findIndex((t=>t.module_name==e.messagedata.module&&t.item_id==e.messagedata.id));if(s&&this.recentItems.splice(s,1),this.moduleItems[e.messagedata.module]){let t=this.moduleItems[e.messagedata.module].findIndex((t=>t.module_name==e.messagedata.module&&t.item_id==e.messagedata.id));t&&this.recentItems.splice(t,1)}break;case"logout":this.recentItems=[],this.moduleItems={},this.isInitialized=!1}}trackItem(e,t,s){this.pushTrackedItemToRecentItems(e,t,s),this.pushTrackedItemToModuleItems(e,t,s)}pushTrackedItemToModuleItems(e,t,s){const i=this.configuration.getData("moduleRecentItems");if(i&&i[e]){if(this.moduleItems[e]){this.moduleItems[e].some(((s,i)=>{if(s.item_id==t)return this.moduleItems[e].splice(i,1),!0})),i[e].some(((s,n)=>{if(s.item_id==t)return i[e].splice(n,1),!0}));const n={item_id:t,module_name:e,item_summary:s.summary_text,date_modified:a()().format("YYYY-MM-DD HH:mm:ss"),data:this.modelutils.spiceModel2backend(e,JSON.parse(JSON.stringify(s)))};for(this.moduleItems[e].unshift(n),i[e].unshift(n);this.moduleItems[e].length>5;)this.moduleItems[e].pop()}this.configuration.setData("moduleRecentItems",JSON.parse(JSON.stringify(i)),!1)}}pushTrackedItemToRecentItems(e,t,s){const i=this.configuration.getData("recentItems");if(!i)return;this.recentItems.some(((s,i)=>{if(s.module_name===e&&s.item_id==t)return this.recentItems.splice(i,1),!0})),i.some(((s,n)=>{if(s.module_name===e&&s.item_id==t)return i.splice(n,1),!0}));const n={item_id:t,module_name:e,item_summary:s.summary_text,date_modified:a()().format("YYYY-MM-DD HH:mm:ss"),data:this.backend.modelutilities.spiceModel2backend(e,JSON.parse(JSON.stringify(s)))};for(this.recentItems.unshift(n),i.unshift(n);this.recentItems.length>50;)this.recentItems.pop();this.configuration.setData("recentItems",JSON.parse(JSON.stringify(i)),!1)}getModuleRecent(e){if("Home"==e)return this.getRecentItems().pipe((0,l.T)((e=>e.slice(0,5))));{const t=this.configuration.getData("moduleRecentItems");if(t&&t[e])return this.moduleItems[e]=JSON.parse(JSON.stringify(t[e])),(0,i.of)(this.moduleItems[e]);{let t=new n.B;return this.backend.getRequest("module/Trackers/recent",{module:e,limit:5}).subscribe((s=>{this.moduleItems[e]=[];for(let t of s)this.moduleItems[e].push(t);t.next(this.moduleItems[e]),t.complete(),this.configuration.setData("moduleRecentItems",JSON.parse(JSON.stringify(this.moduleItems)),!1)})),t.asObservable()}}}getRecentItems(){let e=new n.B;const t=this.configuration.getData("recentItems");return t?(this.recentItems=JSON.parse(JSON.stringify(t)),this.isInitialized=!0,e.next(this.recentItems),e.complete()):this.backend.getRequest("module/Trackers/recentitems",{},this.httpRequestsRefID).subscribe((t=>{this.recentItems=t,this.configuration.setData("recentItems",JSON.parse(JSON.stringify(t)),!1),this.isInitialized=!0,e.next(this.recentItems),e.complete()})),e.asObservable()}static#e=this.ɵfac=function(e){return new(e||recent)(r.KVO(d.H),r.KVO(c.m),r.KVO(u.i),r.KVO(m.g),r.KVO(h.d))};static#t=this.ɵprov=r.jDH({token:recent,factory:recent.ɵfac,providedIn:"root"})}return recent})()},91107:(e,t,s)=>{"use strict";s.d(t,{K:()=>m});var i=s(21413),n=s(7673),l=s(54438),o=s(83935),a=s(49722),r=s(40553),d=s(92462),c=s(41081),u=s(69904);let m=(()=>{class relatedmodels{constructor(e,t,s,i,n,l){this.metadata=e,this.backend=t,this.broadcast=s,this.modelutilities=i,this.toast=n,this.language=l,this.module="",this.id="",this.httpRequestsRefID=_.uniqueId("related_models_http_ref_"),this.relatedModule="",this.linkName="",this.searchTerm="",this.modulefilter="",this.fieldfilters={},this.items=[],this.offset=0,this.count=0,this.loaditems=5,this.isloading=!1,this.isonlyfiltered=!1,this.saveToLinkOnly=!1,this.sort={sortfield:"",sortdirection:"ASC"},this.lastLoad=new moment,this.sequencefield=null,this.serviceSubscriptions=[],this.serviceSubscriptions.push(this.broadcast.message$.subscribe((e=>{this.handleMessage(e)})))}ngOnDestroy(){this.stopSubscriptions()}stopSubscriptions(){for(let e of this.serviceSubscriptions)e.unsubscribe();this.serviceSubscriptions=[],this.backend.cancelPendingRequests([this.httpRequestsRefID])}get sortfield(){return this.sort.sortfield}set sortfield(e){this.sort.sortfield==e?this.sort.sortdirection="ASC"==this.sort.sortdirection?"DESC":"ASC":(this.sort.sortfield=e,this.sort.sortdirection="ASC"),this.getData()}get _linkName(){return""!=this.linkName?this.linkName:this.relatedModule.toLowerCase()}get sortBySequencefield(){return this.sequencefield&&!this.modulefilter&&!this.sort.sortfield}handleMessage(e){if(-1!==e.messagetype.indexOf("model")&&e.messagedata.module===this.relatedModule)switch(e.messagetype){case"model.delete":this.items.some(((t,s)=>{if(t.id===e.messagedata.id)return this.items.splice(s,1),this.count--,!0}));break;case"model.save":let t=!1;for(let s of this.items)if(s.id===e.messagedata.id){for(let t in s)s.hasOwnProperty(t)&&e.messagedata.data.hasOwnProperty(t)&&(s[t]=e.messagedata.data[t]);t=!0,this.sortItems()}!t||this.modulefilter?this.getData(!0):this.sortItems();break;case"relatedmodels.reload":this.getData(!0)}}getLastLoadTime(){return this.lastLoad.format("HH:mm")}getData(e=!1){let t=new i.B;if(!1===this.metadata.checkModuleAcl(this.relatedModule,"list")&&!1===this.metadata.checkModuleAcl(this.relatedModule,"listrelated"))return(0,n.of)(!1);e||(this.resetData(),this.isloading=!0);let s={module:this.relatedModule,getcount:!0,offset:this.offset,limit:this.loaditems,fieldfilters:this.fieldfilters,searchterm:this.searchTerm};this.modulefilter&&(s.modulefilter=this.modulefilter),this.sort.sortfield&&(s.sort=JSON.stringify(this.sort));let l=`module/${this.module}/${this.id}/`+(this.linkEndPoint?this.linkEndPoint:`related/${this._linkName}`);return this.backend.getRequest(l,s,this.httpRequestsRefID).subscribe({next:e=>{this.items=[],this.count=parseInt(e.count,10);for(let t in e.list)e.list.hasOwnProperty(t)&&(e.list[t].relid=t,e.list[t]=this.modelutilities.backendModel2spice(this.relatedModule,e.list[t]),this.items.push(e.list[t]));this.isloading=!1,this.sortItems(),this.lastLoad=new moment,t.next(!0),t.complete()},error:()=>{this.isloading=!1}}),t.asObservable()}get canloadmore(){return!this.isloading&&this.count&&this.count-this.items.length>0}getMoreData(e=5){if(!1===this.metadata.checkModuleAcl(this.relatedModule,"list"))return(0,n.of)(!0);this.isloading=!0;let t={module:this.relatedModule,getcount:!0,offset:this.items.length,limit:this.items.length+e};this.modulefilter&&(t.modulefilter=this.modulefilter),this.sort.sortfield&&(t.sort=JSON.stringify(this.sort));let s=new i.B,l=`module/${this.module}/${this.id}/`+(this.linkEndPoint?this.linkEndPoint:`related/${this._linkName}`);return this.backend.getRequest(l,t,this.httpRequestsRefID).subscribe((e=>{this.count=parseInt(e.count,10);for(let t in e.list)e.list.hasOwnProperty(t)&&(e.list[t].relid=t,e.list[t]=this.modelutilities.backendModel2spice(this.relatedModule,e.list[t]),this.items.push(e.list[t]));this.sortItems(),this.lastLoad=new moment,this.isloading=!1,s.next(!0),s.complete()})),s.asObservable()}sortItems(){let e,t;this.sort.sortfield?(e=this.sort.sortfield,t=this.sort.sortdirection):this.sortBySequencefield&&(e=this.sequencefield,t="ASC"),e&&this.items.sort(((s,i)=>{let n;return n=isNaN(parseInt(s[e],10))||isNaN(parseInt(i[e],10))?s[e]>i[e]?1:-1:parseInt(s[e],10)>parseInt(i[e],10)?1:-1,"ASC"==t?n:-1*n}))}resetData(){this.items=[]}addItems(e){let t=new i.B;if(this.saveToLinkOnly)return this.model.addRelatedRecords(this._linkName,e),this.items=this.items.concat(e),this.count=this.count+e.length,(0,n.of)(!1);let s=[];for(let t of e)s.push(t.id);return this.backend.postRequest("module/"+this.module+"/"+this.id+"/related/"+this._linkName,[],s,this.httpRequestsRefID).subscribe({next:()=>{for(let t of e){let e=!1;this.items.some((s=>{if(s.id==t.id)return e=!0,!0})),e||(this.items.push(t),this.count++)}t.next(!0),t.complete()},error:()=>{t.error("error adding items")}}),t.asObservable()}setItem(e){if(this.isonlyfiltered)return this.toast.sendToast(this.language.getLabel("LBL_NOT_POSSIBLE_TO_SET"),"error"),(0,n.of)(!0);{let t=new i.B;return this.backend.putRequest("module/"+this.module+"/"+this.id+"/related/"+this._linkName,[],this.modelutilities.spiceModel2backend(this.relatedModule,e),this.httpRequestsRefID).subscribe({next:()=>{t.next(!0),t.complete()},error:e=>{t.error(e),t.complete()}}),t.asObservable()}}updateItems(e){if(this.isonlyfiltered)return this.toast.sendToast(this.language.getLabel("LBL_NOT_POSSIBLE_TO_SET"),"error"),(0,n.of)(!0);{const t=new i.B;return e=e.map((e=>this.modelutilities.spiceModel2backend(this.relatedModule,e))),this.backend.putRequest(`module/${this.module}/${this.id}/related/beans/${this._linkName}`,[],{beans:e},this.httpRequestsRefID).subscribe({next:()=>{t.next(!0),t.complete()},error:e=>{t.error(e),t.complete()}}),t.asObservable()}}deleteItem(e){if(this.isonlyfiltered)this.toast.sendToast(this.language.getLabel("LBL_NOT_POSSIBLE_TO_SET"),"error");else{let t=[];t.push(e);let s={relatedids:t};this.backend.deleteRequest("module/"+this.module+"/"+this.id+"/related/"+this._linkName,s,this.httpRequestsRefID).subscribe((()=>{this.items.some(((t,s)=>{if(t.id==e)return this.items.splice(s,1),this.count--,!0}))}))}}static#e=this.ɵfac=function(e){return new(e||relatedmodels)(l.KVO(o.yu),l.KVO(a.H),l.KVO(r.m),l.KVO(d.g),l.KVO(c.o),l.KVO(u.B))};static#t=this.ɵprov=l.jDH({token:relatedmodels,factory:relatedmodels.ɵfac})}return relatedmodels})()},18396:(e,t,s)=>{"use strict";s.d(t,{z:()=>c});var i=s(54438),n=s(21413),l=s(49722),o=s(40553),a=s(53584),r=s(29994),d=s(92462);let c=(()=>{class reminder{constructor(e,t,s,n,l){this.backend=e,this.broadcast=t,this.configuration=s,this.session=n,this.modelutilities=l,this.reminders=[],this.loaded=!1,this.changed$=new i.bkB,this.broadcast.message$.subscribe((e=>this.handleMessage(e)))}handleMessage(e){switch(e.messagetype){case"loader.completed":if("loadUserDataStep2"==e.messagedata){this.reminders=[];for(let e of this.configuration.getData("reminders"))e.reminder_date=moment.utc(e.reminder_date),this.reminders.push(e);this.loaded=!0,this.changed$.emit(!0)}break;case"model.save":let t=this.reminders.findIndex((t=>t.module_name==e.messagedata.module&&t.item_id==e.messagedata.id));if(t>=0)return this.reminders[t].item_summary=e.messagedata.data.summary_text,this.reminders[t].data=e.messagedata.data,!0}}getReminder(e,t){let s=!1;return this.reminders.some((i=>{if(i.module_name===e&&i.item_id===t)return s=i.reminder_date,!0})),s}getReminders(e){let t=[];for(let s of this.reminders)s.module_name===e&&t.push({item_id:s.item_id,item_summary:s.item_summary});return t}setReminder(e,t){let s=new n.B;return this.backend.postRequest("common/spicereminders/"+e.module+"/"+e.id+"/"+t.format("YYYY-MM-DD")).subscribe({next:i=>{let n=this.reminders.findIndex((t=>t.item_id==e.id&&t.module_name==e.module));n>=0?(this.reminders[n].reminder_date=t,this.reminders[n].data=e.backendData):this.reminders.splice(0,0,{item_id:e.id,module_name:e.module,item_summary:e.data.summary_text,reminder_date:t,data:e.backendData}),s.next(!0),s.complete(),this.changed$.emit(!0)},error:e=>{s.error(e)}}),s.asObservable()}deleteReminder(e,t){let s=new n.B;return this.backend.deleteRequest("common/spicereminders/"+e+"/"+t).subscribe({next:i=>{this.reminders.some(((s,i)=>{if(s.module_name===e&&s.item_id===t)return this.reminders.splice(i,1),!0})),s.next(!0),s.complete(),this.changed$.emit(!0)},error:e=>{s.error(e)}}),s.asObservable()}static#e=this.ɵfac=function(e){return new(e||reminder)(i.KVO(l.H),i.KVO(o.m),i.KVO(a.i),i.KVO(r.d),i.KVO(d.g))};static#t=this.ɵprov=i.jDH({token:reminder,factory:reminder.ɵfac,providedIn:"root"})}return reminder})()},29994:(e,t,s)=>{"use strict";s.d(t,{d:()=>a});var i=s(21626),n=s(54438),l=s(2),o=s(40553);let a=(()=>{class session{constructor(e,t){this.logger=e,this.broadcast=t,this.authData={tenant_wizard_completed:!1,tenant_accepted_legal_notice:!1,sessionId:null,loaded:!1,userId:null,userName:"",email:"",admin:!1,dev:!1,portalOnly:!1,googleToken:"",companycode_id:"",tenant_id:"",tenant_name:"",obtainGDPRconsent:!1,canchangepassword:!1,expiringPasswordValidityDays:!1,user:{}},this.sessionData={},this.logger.setSession(this),this.generateDeviceID()}getRand(){return Math.random()}S4(){return(65536*(1+this.getRand())|0).toString(16).substring(1)}generateGuid(){return this.S4()+this.S4()+"-"+this.S4()+"-"+this.S4()+"-"+this.S4()+"-"+this.S4()+this.S4()+this.S4()}generateDeviceID(){const e=localStorage.getItem("Device-ID");e?this.deviceID=e:(this.deviceID=this.generateGuid(),localStorage.setItem("Device-ID",this.deviceID))}loadFromStorage(){this.authData.sessionId=sessionStorage.getItem("OAuth-Token")??localStorage.getItem("OAuth-Token")}storeToken(e){e?localStorage.setItem("OAuth-Token",this.authData.sessionId):sessionStorage.setItem("OAuth-Token",this.authData.sessionId)}getSessionHeader(){let e=new i.Lr;return this.authData?.sessionId?(e=e.set("OAuth-Token",this.authData.sessionId),e=e.set("OAuth-Issuer","SpiceCRM"),e):e}setSessionData(e,t,s=!0){this.sessionData[e]=t,s&&sessionStorage.setItem(window.btoa(e+this.authData.sessionId),window.btoa(encodeURIComponent(JSON.stringify(t))))}clearSessionData(e){sessionStorage.removeItem(e)}getSessionData(e,t=!0){if(this.sessionData[e])return this.sessionData[e];try{return JSON.parse(decodeURIComponent(window.atob(sessionStorage.getItem(window.btoa(e+this.authData.sessionId)))))}catch(e){return!!t&&{}}}existsData(e){try{return sessionStorage[window.btoa(e+this.authData.sessionId)]&&sessionStorage[window.btoa(e+this.authData.sessionId)].length>0}catch(e){return!1}}endSession(){this.authData.tenant_id="",this.authData.tenant_name="",this.authData.tenant_accepted_legal_notice=!1,this.authData.tenant_wizard_completed=!1,this.authData.sessionId=null,this.authData.userId=null,this.authData.loaded=!1,this.authData.userName="",this.authData.email="",this.authData.admin=!1,this.authData.dev=!1,this.authData.companycode_id="",this.authData.tenant_id="",this.authData.tenant_name="",this.authData.obtainGDPRconsent=!1,this.authData.canchangepassword=!1,this.authData.expiringPasswordValidityDays=!1,this.authData.user={},this.sessionData={},localStorage.removeItem("OAuth-Token"),sessionStorage.clear()}get isAdmin(){return this.authData.admin}get isDev(){return this.authData.dev}setTimezone(e){this.getSessionData("timezone")!==e&&(this.setSessionData("timezone",e,!1),moment.tz.setDefault(e),this.broadcast.broadcastMessage("timezone.changed",e))}static#e=this.ɵfac=function(e){return new(e||session)(n.KVO(l.O),n.KVO(o.m))};static#t=this.ɵprov=n.jDH({token:session,factory:session.ɵfac,providedIn:"root"})}return session})()},71475:(e,t,s)=>{"use strict";s.d(t,{s:()=>d});var i=s(7673),n=s(21413),l=s(54438),o=s(53584),a=s(40553),r=s(29994);let d=(()=>{class socket{constructor(e,t,s){this.configuration=e,this.broadcast=t,this.session=s,this.sockets={}}socketObject(e){return this.sockets[e]}get connected(){return!_.isEmpty(this.sockets)}disconnect(e){this.sockets[e]&&(this.sockets[e].instance.disconnect(),this.sockets[e].instance.destroy(),delete this.sockets[e])}initializeNamespace(e){return this.sockets[e]?this.sockets[e].event$:(this.setSocketData(),this.socketUrl&&this.socketId?(this.sockets[e]=this.initializeSocket(e),this.sockets[e].event$):(0,i.of)({type:null,data:null}))}joinRoom(e,t){e&&t&&this.sockets[e]&&(t in this.sockets[e].rooms?this.sockets[e].rooms[t]++:(this.sockets[e].instance.emit("join:room",t),this.sockets[e].rooms[t]=1))}leaveRoom(e,t){e&&t&&this.sockets[e]&&this.sockets[e].rooms[t]&&(this.sockets[e].rooms[t]--,this.sockets[e].rooms[t]<1&&(this.sockets[e].instance.emit("leave:room",t),delete this.sockets[e].rooms[t]))}setSocketData(){let e=this.configuration.getCapabilityConfig("socket");this.socketUrl=e.socket_frontend,this.socketId=e.socket_id}initializeSocket(e){const t=new n.B,s=e?`/ns-${e}`:"/",i=io(this.socketUrl+s,{query:{token:this.session.authData.sessionId,sysId:this.socketId}});return i.on("connect",(()=>this.handleConnectEvent(e,t))),i.onAny(((e,s)=>{s.token!=this.session.authData.sessionId&&this.handleCustomEvent(t,e,s.data)})),{instance:i,isConnected:()=>i.connected,event$:t.asObservable(),rooms:{}}}handleConnectEvent(e,t){this.sockets[e]?.rooms&&Object.keys(this.sockets[e].rooms).forEach((t=>{this.sockets[e].rooms[t]<1||this.sockets[e].instance.emit("join:room",t)}))}handleCustomEvent(e,t,s){e.next({type:t,data:s})}static#e=this.ɵfac=function(e){return new(e||socket)(l.KVO(o.i),l.KVO(a.m),l.KVO(r.d))};static#t=this.ɵprov=l.jDH({token:socket,factory:socket.ɵfac,providedIn:"root"})}return socket})()},48571:(e,t,s)=>{"use strict";s.d(t,{n:()=>o});var i=s(18810),n=s(21413),l=s(54438);let o=(()=>{class StoreService{constructor(){this.databases={}}openDB(e){return new Promise(((t,s)=>{indexedDB||s("IndexedDB not available");const i=indexedDB.open(e,2);i.onsuccess=()=>{this.databases[e]=i.result,t({event:"success",db:i.result})},i.onerror=()=>{s(`IndexedDB error: ${i.error}`)},i.onupgradeneeded=()=>{this.databases[e]=i.result,t({event:"upgrade",db:i.result})}}))}initializeStores(e,t,s){return new Promise((i=>{if(this.databases[e])return t.forEach((t=>this.databases[e].createObjectStore(t,{keyPath:"id"}))),void i(!0);this.openDB(e).then((e=>{"upgrade"==e.event&&t.forEach((t=>e.db.createObjectStore(t,{keyPath:s}))),i(!0)}))}))}readStore(e,t,s){if(!this.databases[e]){const e=indexedDB?"Database with the given name does not exist":"no indexedDB Support";return(0,i.$)((()=>new Error(e)))}const l=new n.B,o=this.databases[e].transaction([t],"readwrite").objectStore(t).get(s);return o.onerror=()=>l.error(!1),o.onsuccess=e=>{const t=e.target.result?.data;t?(l.next(t),l.complete()):l.error(!1)},l.asObservable()}readStoreAll(e,t){return new Promise(((s,i)=>{if(!this.databases[e])return i("no indexedDB Support");const n=this.databases[e].transaction([t],"readwrite").objectStore(t).getAll();n.onerror=()=>i(),n.onsuccess=e=>{const t=e.target.result;t?.length>0?s(t):i()}}))}writeStore(e,t,s){this.databases[e]&&this.databases[e].transaction([t],"readwrite").objectStore(t).put(s)}clearDB(e,t){if(!this.databases[e])return;const s=this.databases[e].transaction(t,"readwrite");t.forEach((e=>{s.objectStore(e).clear()}))}static#e=this.ɵfac=function(e){return new(e||StoreService)};static#t=this.ɵprov=l.jDH({token:StoreService,factory:StoreService.ɵfac,providedIn:"root"})}return StoreService})()},73455:(e,t,s)=>{"use strict";s.d(t,{g:()=>m});var i=s(21413),n=s(54438),l=s(49722),o=s(40553),a=s(53584),r=s(41081),d=s(29994),c=s(83935),u=s(69904);let m=(()=>{class subscription{constructor(e,t,s,i,n,l,o){this.backend=e,this.broadcast=t,this.configuration=s,this.toast=i,this.session=n,this.metadata=l,this.language=o,this._subscriptions={},this.loadSubscriptions()}get subscriptions(){return Object.keys(this._subscriptions).map((e=>this._subscriptions[e]))}hasSubscription(e){return this._subscriptions?.[e]}subscribeBean(e){let t=new i.B;return this.backend.postRequest(`common/SpiceSubscriptions/${e.module}/${e.id}`).subscribe((()=>{this._subscriptions[e.id]={bean_id:e.id,bean_module:e.module,user_id:this.session.authData.userId,data:e.backendData},t.next(!0),t.complete()}),(()=>{this.toast.sendToast(this.language.getLabel("MSG_FAILED_TO_SUBSCRIBE"),"error"),t.error("subscribe failed"),t.complete()})),t.asObservable()}unsubscribeBean(e,t){let s=new i.B;return this.backend.deleteRequest(`common/SpiceSubscriptions/${t}/${e}`).subscribe((()=>{delete this._subscriptions[e],s.next(!0),s.complete()}),(()=>{this.toast.sendToast(this.language.getLabel("MSG_FAILED_TO_UNSUBSCRIBE"),"error"),s.error("subscribe failed"),s.complete()})),s.asObservable()}loadSubscriptions(){this._subscriptions=this.configuration.getData("spicesubscriptions"),this.broadcast.message$.subscribe((e=>{"loader.completed"===e.messagetype&&"loadUserData"===e.messagedata&&(this._subscriptions=this.configuration.getData("spicesubscriptions"))}))}static#e=this.ɵfac=function(e){return new(e||subscription)(n.KVO(l.H),n.KVO(o.m),n.KVO(a.i),n.KVO(r.o),n.KVO(d.d),n.KVO(c.yu),n.KVO(u.B))};static#t=this.ɵprov=n.jDH({token:subscription,factory:subscription.ɵfac,providedIn:"root"})}return subscription})()},66586:(e,t,s)=>{"use strict";s.d(t,{V:()=>l});var i=s(54438),n=s(40553);let l=(()=>{class telephony{constructor(e){this.broadcast=e,this.isActive=!1,this.calls=[],this.initiateCall$=new i.bkB,this.terminateCall$=new i.bkB,this.actions={hangup:!1,transfer:!1},this.broadcast.message$.subscribe((e=>this.handleLogout(e)))}handleLogout(e){"logout"==e.messagetype&&(this.calls=[],this.isActive=!1)}initiateCall(e,t){this.initiateCall$.emit({msisdn:e,relatedid:t.relatedid,relatedmodule:t.relatedmodule,relateddata:t.relateddata})}terminateCall(e){let t=this.calls.find((t=>t.id==e||t.callid==e));t&&this.terminateCall$.emit(t)}removeCallById(e){let t=this.calls.findIndex((t=>t.id==e||t.callid==e));t>=0&&this.calls.splice(t,1)}static#e=this.ɵfac=function(e){return new(e||telephony)(i.KVO(n.m))};static#t=this.ɵprov=i.jDH({token:telephony,factory:telephony.ɵfac,providedIn:"root"})}return telephony})()},41081:(e,t,s)=>{"use strict";s.d(t,{o:()=>l});var i=s(54438),n=s(92462);let l=(()=>{class toast{constructor(e,t){this.modelutilities=e,this.appref=t,this.activeToasts=[]}sendToast(e,t="default",s="",i=!0,n){return this.addToast(e,"toast",t,s,i,n)}sendAlert(e,t="default",s="",i=!0,n){return this.addToast(e,"alert",t,s,i,n)}addToast(e,t="toast",s="default",i="",n=!0,l){if(l&&this.activeToasts.filter((e=>e.code==l)).length>0)return"";"error"===s&&(n=!1),!0===n&&(n=5);let o=this.modelutilities.generateGuid();return this.activeToasts.push({id:o,type:s,theme:t,text:e,description:i,code:l}),this.appref.tick(),n&&window.setTimeout((()=>this.clearToast(o)),1e3*n),o}clearToast(e){e&&this.activeToasts.some(((t,s)=>{if(t.id===e)return this.activeToasts.splice(s,1),this.appref.tick(),!0}))}clearAll(){this.activeToasts=[],this.appref.tick()}static#e=this.ɵfac=function(e){return new(e||toast)(i.KVO(n.g),i.KVO(i.o8S))};static#t=this.ɵprov=i.jDH({token:toast,factory:toast.ɵfac,providedIn:"root"})}return toast})()},48849:(e,t,s)=>{"use strict";s.d(t,{S:()=>g});var i=s(54438),n=s(7673),l=s(21413),o=s(49722),a=s(41081),r=s(53584),d=s(69904),c=s(40553),u=s(50531),m=s(29994),h=s(83935);let g=(()=>{class userpreferences{constructor(e,t,s,n,l,o,a,r){this.backend=e,this.toast=t,this.configuration=s,this.language=n,this.broadcast=l,this.modalservice=o,this.session=a,this.metadata=r,this.preferences={global:{}},this.unchangedPreferences={global:{}},this.preferencesComplete=!0,this.defaults={calendar_day_start_hour:"7",calendar_day_end_hour:"22",currency:-99,datef:"m/d/Y",currency_significant_digits:2,export_charset:"UTF-8",locale_name_format:"s f l",dec_sep:".",distance_unit_system:"METRIC",export_delimiter:",",help_icon:"visible",home_assistant:"visible",num_grp_sep:",",reminder_time:-1,timef:"H:i",timezone:"Europe/Vienna",week_day_start:0,week_days_count:5},this.formats={nameFormats:[],loaded:!1},this.preferences$=new i.bkB,this.toUse=this.preferences.global,this.broadcast.message$.subscribe((e=>{"loader.completed"===e.messagetype&&"loadUserData"===e.messagedata&&this.retrievePrefsFromConfigService()}))}retrievePrefsFromConfigService(){let e=this.configuration.getData("globaluserpreferences").global;if(this.preferences.global=_.extendOwn(this.preferences.global,e),this.unchangedPreferences.global=_.clone(e),this.defaults=_.extendOwn(this.defaults,this.configuration.getData("defaultuserpreferences")),!this.unchangedPreferences.global.timezone){let e=moment.tz.guess();this.setPreference("timezone",e,!0).subscribe((t=>{this.toast.sendToast(this.language.getLabel("LBL_TIMEZONE_WAS_SET_TO")+": "+t.timezone,"success",null,10),this.session.setTimezone(e)}))}this.completePreferencesWithDefaults(),this.session.setTimezone(this.toUse.timezone),this.preferences.global.userrole&&this.metadata.setActiveRole(this.preferences.global.userrole)}getPreferences(e){this.loadPreferences().subscribe((t=>{e.next("getPreferences")}))}loadPreferences(e="global"){return(0,n.of)(this.configuration.getData("globaluserpreferences")[e])}completePreferencesWithDefaults(){let e=!1;_.each(this.defaults,((t,s)=>{"string"==typeof this.preferences.global[s]?this.preferences.global[s]||(this.preferences.global[s]=t,e=!0):void 0!==this.preferences.global[s]&&null!==this.preferences.global[s]||(this.preferences.global[s]=t,e=!0)})),this.preferencesComplete=!e}getPreference(e,t="global"){try{return this.preferences[t][e]}catch(e){return!1}}setPreference(e,t,s=!0,i="global"){if(s){let s={};s[e]=t;const n=new l.B;return this.backend.postRequest("module/Users/"+this.session.authData.userId+"/preferences/"+i,{},s).subscribe((l=>{this.preferences[i]||(this.preferences[i]={}),this.preferences[i][e]=t,this.configuration.setData("globaluserpreferences",this.preferences),this.unchangedPreferences[i]||(this.unchangedPreferences[i]={}),this.unchangedPreferences[i][e]=t,this.completePreferencesWithDefaults(),"global"===i&&"timezone"===e&&this.session.setTimezone(this.toUse.timezone),n.next(l),this.preferences$.emit(s)}),(e=>{n.error(e)})),n}return this.preferences[i]||(this.preferences[i]={}),this.preferences[i][e]=t,this.completePreferencesWithDefaults(),"global"===i&&"timezone"===e&&this.session.setTimezone(this.toUse.timezone),null}setPreferences(e,t="global"){const s=new l.B;return this.backend.postRequest("module/Users/"+this.session.authData.userId+"/preferences/"+t,{},e).subscribe((i=>{for(let e in this.preferences[t])i.hasOwnProperty(e)?this.preferences[t][e]=i[e]:delete this.preferences[t][e];this.configuration.setData("globaluserpreferences",this.preferences),this.unchangedPreferences[t]=i,this.completePreferencesWithDefaults(),this.session.setTimezone(this.toUse.timezone),s.next(!0),this.preferences$.emit(e)}),(e=>{s.error(e)})),s}getDateFormat(){if(this.toUse.datef){let e=this.toUse.datef;return this.jsDateFormat2momentDateFormat(e)}return"YYYY-MM-DD"}jsDateFormat2momentDateFormat(e){return e.replace("Y","YYYY").replace("m","MM").replace("d","DD")}getTimeFormat(){if(this.toUse.timef){let e=this.toUse.timef;return this.jsTimeFormat2momentTimeFormat(e)}return"hh:mm"}jsTimeFormat2momentTimeFormat(e){return e.replace("H","HH").replace("h","hh").replace("i","mm")}needFormats(){this.formats.loaded||this.loadFormats()}loadFormats(){let e=new l.B;return this.formats.nameFormats.length=0,this.formats.loaded=!1,this.backend.getRequest("module/Users/preferencesformats").subscribe((t=>{if(Array.isArray(t.nameFormats))for(let e of t.nameFormats)this.formats.nameFormats.push({name:e,example:this.translateNameFormat(e)});this.formats.loaded=!0,e.next(!0)})),e.asObservable()}translateNameFormat(e){let t="";for(let s=0;s<e.length;s++)switch(e.charAt(s)){case"t":t+=this.language.getLabel("LBL_LOCALE_NAME_EXAMPLE_TITLE");break;case"f":t+=this.language.getLabel("LBL_LOCALE_NAME_EXAMPLE_FIRST");break;case"l":t+=this.language.getLabel("LBL_LOCALE_NAME_EXAMPLE_LAST");break;case"s":t+=this.language.getLabel("LBL_LOCALE_NAME_EXAMPLE_SALUTATION");break;default:t+=e.charAt(s)}return t}formatMoney(e,t=this.toUse.currency_significant_digits,s=3,i=this.toUse.num_grp_sep,n=this.toUse.dec_sep){let l="\\d(?=(\\d{"+s+"})+"+(t>0?"\\D":"$")+")";return e.toFixed(Math.max(0,~~t)).replace(".",n).replace(new RegExp(l,"g"),"$&"+i)}formatDate(e){if(moment.isMoment(e))return e.format(this.getDateFormat());let t=moment(e);return t.isValid()?t.format(this.getDateFormat()):e}formatDateTime(e){return moment.isMoment(e)?e.format(this.getDateFormat())+" "+e.format(this.getTimeFormat()):moment.utc(e).format(this.getDateFormat())+" "+moment.utc(e).format(this.getTimeFormat())}getPossibleDateFormats(){return[{name:moment().format(this.jsDateFormat2momentDateFormat("Y-m-d")),value:"Y-m-d"},{name:moment().format(this.jsDateFormat2momentDateFormat("m-d-Y")),value:"m-d-Y"},{name:moment().format(this.jsDateFormat2momentDateFormat("d-m-Y")),value:"d-m-Y"},{name:moment().format(this.jsDateFormat2momentDateFormat("Y/m/d")),value:"Y/m/d"},{name:moment().format(this.jsDateFormat2momentDateFormat("m/d/Y")),value:"m/d/Y"},{name:moment().format(this.jsDateFormat2momentDateFormat("d/m/Y")),value:"d/m/Y"},{name:moment().format(this.jsDateFormat2momentDateFormat("Y.m.d")),value:"Y.m.d"},{name:moment().format(this.jsDateFormat2momentDateFormat("d.m.Y")),value:"d.m.Y"},{name:moment().format(this.jsDateFormat2momentDateFormat("m.d.Y")),value:"m.d.Y"}]}getPossibleTimeFormats(){return[{name:moment().format(this.jsTimeFormat2momentTimeFormat("H:i")),value:"H:i"},{name:moment().format(this.jsTimeFormat2momentTimeFormat("h:ia")),value:"h:ia"},{name:moment().format(this.jsTimeFormat2momentTimeFormat("h:iA")),value:"h:iA"},{name:moment().format(this.jsTimeFormat2momentTimeFormat("h:i a")),value:"h:i a"},{name:moment().format(this.jsTimeFormat2momentTimeFormat("h:i A")),value:"h:i A"},{name:moment().format(this.jsTimeFormat2momentTimeFormat("H.i")),value:"H.i"},{name:moment().format(this.jsTimeFormat2momentTimeFormat("h.ia")),value:"h.ia"},{name:moment().format(this.jsTimeFormat2momentTimeFormat("h.iA")),value:"h.iA"},{name:moment().format(this.jsTimeFormat2momentTimeFormat("h.i a")),value:"h.i a"},{name:moment().format(this.jsTimeFormat2momentTimeFormat("h.i A")),value:"h.i A"}]}get companyCodeId(){return this.session.authData.companycode_id}static#e=this.ɵfac=function(e){return new(e||userpreferences)(i.KVO(o.H),i.KVO(a.o),i.KVO(r.i),i.KVO(d.B),i.KVO(c.m),i.KVO(u.y),i.KVO(m.d),i.KVO(h.yu))};static#t=this.ɵprov=i.jDH({token:userpreferences,factory:userpreferences.ɵfac,providedIn:"root"})}return userpreferences})()},41731:(e,t,s)=>{"use strict";s.d(t,{U:()=>a});var i=s(84412),n=s(54438),l=s(35911),o=s(71692);let a=(()=>{class view{constructor(e,t){this.model=e,this.layout=t,this.mode="view",this.isEditable=!1,this.displayLinks=!0,this.displayLabels=!0,this.editfieldid="",this.editfieldname="",this.labels="default",this._size="regular",this.linkedToModel=!1,this.isLoading=!1,this.mode$=new i.t(this.mode),this.model&&this.model.mode$.subscribe((e=>{this.linkedToModel&&"display"==e&&this.setViewMode()}))}set size(e){this._size=e}get size(){return"small"==this.layout.screenwidth?"small":this._size}getMode(){return this.mode}isEditMode(){return"edit"===this.mode}setEditMode(e=""){this.mode="edit",this.editfieldid=e,this.mode$.next(this.mode)}setViewMode(){this.mode="view",this.mode$.next(this.mode)}static#e=this.ɵfac=function(e){return new(e||view)(n.KVO(l.g,8),n.KVO(o.Z))};static#t=this.ɵprov=n.jDH({token:view,factory:view.ɵfac})}return view})()},3030:(e,t,s)=>{"use strict";var i=s(345),n=s(728),l=s(14699),o=s(54438),a=s(84341),r=s(57363),d=s(21626),c=s(60177),u=s(70569),m=s(12948),h=s(37328),g=s(27533),p=s(12833),f=s(84551),b=s(11812),y=s(54095),v=s(23338),_=s(98417),k=s(62165);moment.defaultFormat="YYYY-MM-DD HH:mm:ss";const R=document.querySelector('meta[name="bootstrap"]')?.content;let I=(()=>{class SpiceUI{constructor(e){this.render=e,this.render.listen("window","dragover",(e=>{e.preventDefault(),e.dataTransfer.effectAllowed="none",e.dataTransfer.dropEffect="none"})),this.render.listen("window","drop",(e=>{e.preventDefault()}))}get outletstyle(){const e=this.globalHeader?this.globalHeader.headerHeight:0;return{"margin-top":e+"px",height:`calc(100vh - ${e}px)`}}static#e=this.ɵfac=function(e){return new(e||SpiceUI)(o.rXU(o.sFG))};static#t=this.ɵcmp=o.VBU({type:SpiceUI,selectors:[["spicecrm"]],viewQuery:function(e,t){if(1&e&&o.GBs(f.Z,5),2&e){let e;o.mGM(e=o.lsd())&&(t.globalHeader=e.first)}},decls:5,vars:1,consts:[[3,"ngStyle"]],template:function(e,t){1&e&&(o.nrm(0,"global-header"),o.j41(1,"div",0),o.nrm(2,"router-outlet")(3,"system-navigation-manager"),o.k0s(),o.nrm(4,"global-footer")),2&e&&(o.R7$(),o.Y8G("ngStyle",t.outletstyle))},dependencies:[c.B3,_.B,f.Z,k.T,r.n3],encapsulation:2})}return SpiceUI})(),x=(()=>{class SpiceUIModule{ngDoBootstrap(e){let t=I;e.bootstrap(t)}static#e=this.ɵfac=function(e){return new(e||SpiceUIModule)};static#t=this.ɵmod=o.$C({type:SpiceUIModule});static#s=this.ɵinj=o.G2t({providers:[{provide:c.hb,useClass:c.fw},i.hE],imports:[i.Bb,n.wb,d.q1,a.YN,u.SystemComponents,m.GlobalComponents,h.ObjectComponents,v.ModuleTOTPAuthentication,b.SpiceInstallerModule,r.iI.forRoot([{path:"login",component:g.R},{path:"",redirectTo:"/module/Home",pathMatch:"full"},{path:"**",component:p.b,canActivate:[y.c]}])]})}return SpiceUIModule})();("undefined"==typeof ngJitMode||ngJitMode)&&o.Obh(x,{declarations:[I],imports:[i.Bb,n.wb,d.q1,a.YN,u.SystemComponents,m.GlobalComponents,h.ObjectComponents,v.ModuleTOTPAuthentication,b.SpiceInstallerModule,r.iI]}),l.c.production&&((0,o.SmG)(),console.log("production mode enabled")),document.documentMode?(document.getElementsByClassName("loaderspinner")[0].setAttribute("style","display:none"),document.getElementById("loadstatus").innerHTML="",document.getElementById("loadermessage").innerHTML="Internet Explorer is not supported. Please use a supported Browser like Chrome, Safari, Edge, etc."):(document.getElementById("loadstatus").innerHTML="...preparing..","outlook"==R?window.Office.onReady().then((()=>{i.sG().bootstrapModule(x).catch((e=>console.error(e)))})):i.sG().bootstrapModule(x).catch((e=>console.error(e)))),window.name="SpiceCRM",(()=>{if(window.hasOwnProperty("BroadcastChannel")){let e=new BroadcastChannel("spiceCRM_channel");e.onmessage=t=>{t.data.url&&t.data.url.startsWith(window.location.origin+window.location.pathname)&&(window.location=t.data.url,e.postMessage({urlReceived:!0}))}}})()},63983:(e,t,s)=>{"use strict";s.d(t,{e:()=>u,j:()=>m});var i=s(54438),n=s(60177),l=s(90932),o=s(25863),a=s(32062);function r(e,t){if(1&e&&(i.qex(0),i.EFF(1),i.nrm(2,"system-label",11),i.EFF(3," "),i.bVm()),2&e){const e=i.XpG(2);i.R7$(),i.SpI("",e.page," ")}}function d(e,t){if(1&e){const e=i.RV6();i.j41(0,"div",3)(1,"span",4)(2,"button",5),i.bIt("click",(function(){i.eBV(e);const t=i.XpG();return i.Njj(t.page=1)})),i.nrm(3,"system-button-custom-icon",6),i.k0s(),i.j41(4,"button",7),i.bIt("click",(function(){i.eBV(e);const t=i.XpG();return i.Njj(t.pageDown())})),i.nrm(5,"system-button-icon",8),i.k0s()(),i.j41(6,"span"),i.DNE(7,r,4,1,"ng-container",9),i.EFF(8),i.nrm(9,"system-label",10),i.EFF(10),i.nrm(11,"system-label",11),i.EFF(12),i.nrm(13,"system-label",12),i.EFF(14,")"),i.k0s(),i.j41(15,"span",13)(16,"button",14),i.bIt("click",(function(){i.eBV(e);const t=i.XpG();return i.Njj(t.pageUp())})),i.nrm(17,"system-button-icon",8),i.k0s(),i.j41(18,"button",5),i.bIt("click",(function(){i.eBV(e);const t=i.XpG();return i.Njj(t.page=t.max_page)})),i.nrm(19,"system-button-custom-icon",15),i.k0s()()()}if(2&e){const e=i.XpG();i.R7$(2),i.Y8G("disabled",!e.canSwitch||e.page<2),i.R7$(),i.Y8G("icon","chevrondoubleleft"),i.R7$(),i.Y8G("disabled",!e.canSwitch||e.page<=1),i.R7$(),i.Y8G("icon","chevronleft"),i.R7$(2),i.Y8G("ngIf",e.page),i.R7$(),i.SpI("",e.max_page," "),i.R7$(2),i.SpI(" (",e.range," "),i.R7$(2),i.SpI(" ",e.total_records," "),i.R7$(4),i.Y8G("disabled",!e.canSwitch||e.page>=e.max_page),i.R7$(),i.Y8G("icon","chevronright"),i.R7$(),i.Y8G("disabled",!e.canSwitch||e.page>=e.max_page-1),i.R7$(),i.Y8G("icon","chevrondoubleright")}}function c(e,t){if(1&e){const e=i.RV6();i.j41(0,"div",3)(1,"button",5),i.bIt("click",(function(){i.eBV(e);const t=i.XpG();return i.Njj(t.pageDown())})),i.nrm(2,"system-button-icon",16),i.k0s(),i.j41(3,"div",17),i.EFF(4),i.nrm(5,"system-label",11),i.EFF(6),i.nrm(7,"system-label",10),i.k0s(),i.j41(8,"button",5),i.bIt("click",(function(){i.eBV(e);const t=i.XpG();return i.Njj(t.pageUp())})),i.nrm(9,"system-button-icon",18),i.k0s()()}if(2&e){const e=i.XpG();i.R7$(),i.Y8G("disabled",e.page<=1),i.R7$(),i.Y8G("icon","chevronleft"),i.R7$(2),i.SpI("",e.page," "),i.R7$(2),i.SpI(" ",e.max_page," "),i.R7$(2),i.Y8G("disabled",e.page>=e.max_page),i.R7$(),i.Y8G("icon","chevronright")}}let u=(()=>{class PaginationControlsComponent{constructor(){this._page=1,this.limit=1,this.total_records=0,this.variation="default",this.page$=new i.bkB,this.oldPage$=new i.bkB,this.canSwitch=!0,this.offset=0,this.max_page=0,this.range="0 - 0"}get page(){return this._page}set page(e){this._page!==e&&(this.oldPage$.emit(this._page),this._page=e,this.page$.emit(this._page))}ngOnChanges(){this.total_records>0?this.max_page=Math.ceil(this.total_records/this.limit):this.max_page=0;const e=this._page*this.limit;this.range=`${e-this.limit} - ${e>this.total_records?this.total_records:e}`}pageUp(){if(!this.canSwitch||this.page>=this.max_page)return!1;this.page+=1}pageDown(){if(!this.canSwitch||this.page<=1)return!1;this.page-=1}static#e=this.ɵfac=function(e){return new(e||PaginationControlsComponent)};static#t=this.ɵcmp=i.VBU({type:PaginationControlsComponent,selectors:[["pagination-controls"]],inputs:{_page:[i.Mj6.None,"page","_page"],limit:"limit",total_records:"total_records",variation:"variation",canSwitch:"canSwitch"},outputs:{page$:"pageChange",oldPage$:"leftPage"},features:[i.OA$],decls:3,vars:2,consts:[[1,"slds-grid_align-center",3,"ngSwitch"],["class","slds-grid slds-grid--vertical-align-center",4,"ngSwitchDefault"],["class","slds-grid slds-grid--vertical-align-center",4,"ngSwitchCase"],[1,"slds-grid","slds-grid--vertical-align-center"],[1,"slds-m-right--x-small"],[1,"slds-button","slds-button_icon","slds-button--icon-small",3,"disabled","click"],["title","go to first page",3,"icon"],["title","go to previous page",1,"slds-button","slds-button_icon","slds-button--icon-small",3,"disabled","click"],[3,"icon"],[4,"ngIf"],["label","LBL_PAGES"],["label","LBL_OF"],["label","LBL_RECORDS"],[1,"slds-m-left--x-small"],["title","go to next page",1,"slds-button","slds-button_icon","slds-button--icon-small",3,"disabled","click"],["title","go to last page",3,"icon"],["title","go to previous page",3,"icon"],[1,"slds-p-horizontal--x-small"],["title","go to next page",3,"icon"]],template:function(e,t){1&e&&(i.j41(0,"div",0),i.DNE(1,d,20,12,"div",1)(2,c,10,6,"div",2),i.k0s()),2&e&&(i.Y8G("ngSwitch",t.variation),i.R7$(2),i.Y8G("ngSwitchCase","short"))},dependencies:[n.bT,n.ux,n.e1,n.fG,l.Q,o.t,a.W],encapsulation:2})}return PaginationControlsComponent})(),m=(()=>{class PaginationPipe{transform(e,t){let s=(t.page-1)*t.limit,i=s+t.limit;return e.slice(s,i)}static#e=this.ɵfac=function(e){return new(e||PaginationPipe)};static#t=this.ɵpipe=i.EJ8({name:"paginate",type:PaginationPipe,pure:!1})}return PaginationPipe})()},27601:(e,t,s)=>{"use strict";s.d(t,{J:()=>o});var i=s(54438),n=s(83935),l=s(60177);let o=(()=>{class SystemActionIcon{constructor(e){this.metadata=e,this.icon="",this.size="",this.title=void 0}get svgHRef(){return"./vendor/sldassets/icons/action-sprite/svg/symbols.svg#"+this.icon}get iconClass(){return this.icon?"slds-icon-action-"+this.icon.replace("_","-"):""}get sizeClass(){return"slds-icon--"+this.size}static#e=this.ɵfac=function(e){return new(e||SystemActionIcon)(i.rXU(n.yu))};static#t=this.ɵcmp=i.VBU({type:SystemActionIcon,selectors:[["system-action-icon"]],inputs:{icon:"icon",size:"size",title:"title"},decls:3,vars:3,consts:[[1,"slds-icon_container","slds-icon-action-change-record-type","slds-icon_container--circle",3,"ngClass"],["aria-hidden","true",1,"slds-icon",3,"ngClass"]],template:function(e,t){1&e&&(i.j41(0,"span",0),i.qSk(),i.j41(1,"svg",1),i.nrm(2,"use"),i.k0s()()),2&e&&(i.Y8G("ngClass",t.iconClass),i.R7$(),i.Y8G("ngClass",t.sizeClass),i.R7$(),i.BMQ("href",t.svgHRef,null,"xlink"))},dependencies:[l.YU],encapsulation:2})}return SystemActionIcon})()},90932:(e,t,s)=>{"use strict";s.d(t,{Q:()=>o});var i=s(54438),n=s(83935),l=s(60177);let o=(()=>{class SystemButtonCustomIcon{constructor(e){this.metadata=e,this.inverse=!1,this.title="",this.file="./assets/icons/spicecrm.svg"}getSvgHRef(){return this.file+"#"+this.icon}getClass(){let e=[];return this.size?e.push("slds-button__icon--"+this.size):e.push("slds-button__icon"),this.position&&e.push("slds-button__icon_"+this.position),this.inverse&&e.push("slds-button_icon-inverse"),e}static#e=this.ɵfac=function(e){return new(e||SystemButtonCustomIcon)(i.rXU(n.yu))};static#t=this.ɵcmp=i.VBU({type:SystemButtonCustomIcon,selectors:[["system-button-custom-icon"]],inputs:{icon:"icon",size:"size",position:"position",inverse:"inverse",title:"title",file:"file"},decls:4,vars:3,consts:[["aria-hidden","true",1,"slds-button__icon",3,"ngClass"]],template:function(e,t){1&e&&(i.qSk(),i.j41(0,"svg",0)(1,"title"),i.EFF(2),i.k0s(),i.nrm(3,"use"),i.k0s()),2&e&&(i.Y8G("ngClass",t.getClass()),i.R7$(2),i.JRh(t.title),i.R7$(),i.BMQ("href",t.getSvgHRef(),null,"xlink"))},dependencies:[l.YU],encapsulation:2})}return SystemButtonCustomIcon})()},25863:(e,t,s)=>{"use strict";s.d(t,{t:()=>o});var i=s(54438),n=s(83935),l=s(60177);let o=(()=>{class SystemButtonIcon{constructor(e,t){this.metadata=e,this.cdref=t,this.icon="",this.sprite="utility",this.size="",this.module="",this.position="",this.inverse=!1,this.title=void 0,this.addclasses=""}ngOnChanges(e){this.cdref.detectChanges()}getSvgHRef(){return"./vendor/sldassets/icons/"+this.getSprite()+"-sprite/svg/symbols.svg#"+this.getIcon()}getIcon(){if(this.icon)return this.icon.indexOf(":")>0?this.icon.split(":")[1]:this.icon;if(this.module&&this.metadata.getModuleIcon(this.module)){let e=this.metadata.getModuleIcon(this.module);return e.indexOf(":")>0?e.split(":")[1]:e}return"empty"}getSprite(){return this.icon&&this.icon.indexOf(":")>0?this.icon.split(":")[0]:this.module&&this.metadata.getModuleIcon(this.module)&&this.metadata.getModuleIcon(this.module).indexOf(":")>0?this.metadata.getModuleIcon(this.module).split(":")[0]:this.module?"standard":this.sprite}getClass(){let e=[];return""!=this.size?e.push("slds-button__icon--"+this.size):e.push("slds-button__icon"),""!=this.position&&e.push("slds-button__icon_"+this.position),this.inverse&&e.push("slds-button_icon-inverse"),this.colorclass&&e.push(this.colorclass),this.addclasses?this.addclasses+" "+e:e}static#e=this.ɵfac=function(e){return new(e||SystemButtonIcon)(i.rXU(n.yu),i.rXU(i.gRc))};static#t=this.ɵcmp=i.VBU({type:SystemButtonIcon,selectors:[["system-button-icon"]],inputs:{icon:"icon",sprite:"sprite",size:"size",colorclass:"colorclass",module:"module",position:"position",inverse:"inverse",title:"title",addclasses:"addclasses"},features:[i.OA$],decls:4,vars:3,consts:[["aria-hidden","true",1,"slds-button__icon",3,"ngClass"]],template:function(e,t){1&e&&(i.qSk(),i.j41(0,"svg",0)(1,"title"),i.EFF(2),i.k0s(),i.nrm(3,"use"),i.k0s()),2&e&&(i.Y8G("ngClass",t.getClass()),i.R7$(2),i.JRh(t.title),i.R7$(),i.BMQ("href",t.getSvgHRef(),null,"xlink"))},dependencies:[l.YU],encapsulation:2,changeDetection:0})}return SystemButtonIcon})()},6576:(e,t,s)=>{"use strict";s.d(t,{a:()=>o});var i=s(54438);const n=[[["system-card-header"]],[["system-card-body"]],[["system-card-footer"]]],l=["system-card-header","system-card-body","system-card-footer"];let o=(()=>{class SystemCard{static#e=this.ɵfac=function(e){return new(e||SystemCard)};static#t=this.ɵcmp=i.VBU({type:SystemCard,selectors:[["system-card"]],ngContentSelectors:l,decls:4,vars:0,consts:[[1,"slds-card","slds-card_boundary"]],template:function(e,t){1&e&&(i.NAR(n),i.j41(0,"article",0),i.SdG(1),i.SdG(2,1),i.SdG(3,2),i.k0s())},encapsulation:2})}return SystemCard})()},32864:(e,t,s)=>{"use strict";s.d(t,{I:()=>l});var i=s(54438);const n=["*"];let l=(()=>{class SystemCardBody{static#e=this.ɵfac=function(e){return new(e||SystemCardBody)};static#t=this.ɵcmp=i.VBU({type:SystemCardBody,selectors:[["system-card-body"]],ngContentSelectors:n,decls:2,vars:0,consts:[[1,"slds-card__body","slds-card__body_inner"]],template:function(e,t){1&e&&(i.NAR(),i.j41(0,"div",0),i.SdG(1),i.k0s())},encapsulation:2})}return SystemCardBody})()},45245:(e,t,s)=>{"use strict";s.d(t,{V:()=>o});var i=s(54438),n=s(68823);const l=["*"];let o=(()=>{class SystemCardHeader{static#e=this.ɵfac=function(e){return new(e||SystemCardHeader)};static#t=this.ɵcmp=i.VBU({type:SystemCardHeader,selectors:[["system-card-header"]],inputs:{icon:"icon",module:"module",cardtitel:"cardtitel"},ngContentSelectors:l,decls:10,vars:3,consts:[[1,"slds-card__header","slds-grid"],[1,"slds-media","slds-media_center","slds-has-flexi-truncate"],[1,"slds-media__figure"],[3,"module","icon"],[1,"slds-media__body"],[1,"slds-card__header-title"],[1,"slds-text-heading_small"],[1,"slds-no-flex"]],template:function(e,t){1&e&&(i.NAR(),i.j41(0,"div",0)(1,"header",1)(2,"div",2),i.nrm(3,"system-icon",3),i.k0s(),i.j41(4,"div",4)(5,"h2",5)(6,"span",6),i.EFF(7),i.k0s()()(),i.j41(8,"div",7),i.SdG(9),i.k0s()()()),2&e&&(i.R7$(3),i.Y8G("module",t.module)("icon",t.icon),i.R7$(4),i.SpI(" ",t.cardtitel," "))},dependencies:[n.J],encapsulation:2})}return SystemCardHeader})()},90342:(e,t,s)=>{"use strict";s.d(t,{u:()=>a});var i=s(54438),n=s(68823),l=s(43308),o=s(42205);let a=(()=>{class SystemCardStencil{static#e=this.ɵfac=function(e){return new(e||SystemCardStencil)};static#t=this.ɵcmp=i.VBU({type:SystemCardStencil,selectors:[["system-card-stencil"]],decls:23,vars:0,consts:[[1,"slds-card","slds-card_boundary","slds-m-bottom--medium"],[1,"slds-card__header","slds-grid"],[1,"slds-media","slds-media_center","slds-has-flexi-truncate"],[1,"slds-media__figure"],[1,"slds-media__body"],[1,"slds-card__header-title"],[1,"slds-card__header-link","slds-truncate"],[1,"slds-card__body"],["role","grid",1,"slds-table","slds-table_cell-buffer","slds-no-row-hover","slds-table_bordered","slds-table_fixed-layout"],[1,"slds-line-height_reset"],["scope","col",1,""],["system-table-stencils","","rows","3","columns","4"]],template:function(e,t){1&e&&(i.j41(0,"div",0)(1,"div",1)(2,"header",2)(3,"div",3),i.nrm(4,"system-icon"),i.k0s(),i.j41(5,"div",4)(6,"h2",5)(7,"div",6)(8,"span"),i.nrm(9,"system-stencil"),i.k0s()()()()()(),i.j41(10,"div",7)(11,"table",8)(12,"thead")(13,"tr",9)(14,"th",10),i.nrm(15,"system-stencil"),i.k0s(),i.j41(16,"th",10),i.nrm(17,"system-stencil"),i.k0s(),i.j41(18,"th",10),i.nrm(19,"system-stencil"),i.k0s(),i.j41(20,"th",10),i.nrm(21,"system-stencil"),i.k0s()()(),i.nrm(22,"tbody",11),i.k0s()()())},dependencies:[n.J,l.O,o.t],encapsulation:2})}return SystemCardStencil})()},31886:(e,t,s)=>{"use strict";s.d(t,{k:()=>n});var i=s(54438);let n=(()=>{class SystemChartDataRow{static#e=this.ɵfac=function(e){return new(e||SystemChartDataRow)};static#t=this.ɵcmp=i.VBU({type:SystemChartDataRow,selectors:[["system-chart-data-row"]],inputs:{label:"label",value:"value"},decls:0,vars:0,template:function(e,t){},encapsulation:2})}return SystemChartDataRow})()},52684:(e,t,s)=>{"use strict";s.d(t,{y:()=>p});var i=s(54438),n=s(18359),l=s(31886),o=s(21413),a=s(94378);let r=(()=>{class SystemChartJSService{constructor(e){this.zone=e,this.onValueClick$=new o.B,this.options={aspectRatio:1,plugins:{legend:{display:!1,position:"bottom"}}}}loadChart(e,t,s){this.chartContainer=e,this.transFormChartType(t),this.data=s,this.renderChart()}setData(e){JSON.stringify(this.data)!=JSON.stringify(e)&&(this.data=e,this.chart.data=this.transformChartData(this.chartType,this.data),this.chart.update("active"))}transFormChartType(e){switch(e){case"Bar":this.chartType="bar",this.options.indexAxis="x",this.options.plugins.legend.display=!1;break;case"Column":this.chartType="bar",this.options.indexAxis="y",this.options.plugins.legend.display=!1;break;case"Pie":this.chartType="pie",this.options.plugins.legend.display=!0,this.options.indexAxis="x";break;case"Doughnut":this.chartType="doughnut",this.options.plugins.legend.display=!0,this.options.indexAxis="x";break;case"Line":this.chartType="line",this.options.plugins.legend.display=!1,this.options.indexAxis="x"}}transformChartData(e,t){let s=JSON.parse(JSON.stringify(t)),i=getComputedStyle(document.documentElement).getPropertyValue("--brand-primary");switch(e){case"bar":case"line":for(let e of s.datasets)e.backgroundColor=i}return s}setChartType(e){this.transFormChartType(e),this.chart.destroy(),this.renderChart()}renderChart(){this.chart=new a.t1(this.chartContainer,{type:this.chartType,data:this.transformChartData(this.chartType,this.data),options:JSON.parse(JSON.stringify(this.options))})}static#e=this.ɵfac=function(e){return new(e||SystemChartJSService)(i.KVO(i.SKi))};static#t=this.ɵprov=i.jDH({token:SystemChartJSService,factory:SystemChartJSService.ɵfac})}return SystemChartJSService})();var d=s(69904),c=s(60177),u=s(70923),m=s(32062);const h=["chartContainer"];function g(e,t){1&e&&(i.j41(0,"div",4)(1,"system-illustration-no-data"),i.nrm(2,"system-label",5),i.k0s()())}let p=(()=>{class SystemChartJSOneDimensional{constructor(e,t){this.chartService=e,this.language=t,this.hasData=!0,this.dataState="",this.padding="small",this.subscriptions=new n.yU}get paddingClass(){return"slds-p-around--"+this.padding}ngAfterViewInit(){this.loadChart()}ngAfterContentInit(){this.loadDataFromContentChildren(),this.rowChildren.changes.subscribe((e=>{this.setData()}))}ngOnChanges(e){e.chartType&&!e.chartType.firstChange&&(this.loadDataFromContentChildren(),this.setChartType(e.chartType.currentValue))}ngOnDestroy(){this.subscriptions.unsubscribe()}loadDataFromContentChildren(){if(this.rowChildren){if(0==this.rowChildren.length)return this.hasData=!1;this.data={labels:[],datasets:[{data:[]}]},this.rowChildren.forEach((e=>{this.data.labels.push(this.language.getLabel(e.label)),this.data.datasets[0].data.push(Number(e.value))}))}}loadChart(){this.chartService.loadChart(this.chartContainer.element.nativeElement,this.chartType,this.data)}setData(){this.loadDataFromContentChildren(),this.chartService.setData(this.data)}setChartType(e){this.loadDataFromContentChildren(),this.chartService.setChartType(e??this.chartType)}static#e=this.ɵfac=function(e){return new(e||SystemChartJSOneDimensional)(i.rXU(r),i.rXU(d.B))};static#t=this.ɵcmp=i.VBU({type:SystemChartJSOneDimensional,selectors:[["system-chart-js-one-dimensional"]],contentQueries:function(e,t,s){if(1&e&&i.wni(s,l.k,4),2&e){let e;i.mGM(e=i.lsd())&&(t.rowChildren=e)}},viewQuery:function(e,t){if(1&e&&i.GBs(h,5,i.c1b),2&e){let e;i.mGM(e=i.lsd())&&(t.chartContainer=e.first)}},inputs:{chartType:"chartType",colors:"colors",dataState:"dataState",padding:"padding"},features:[i.Jv_([r]),i.OA$],decls:4,vars:4,consts:[[1,"slds-height_full",3,"ngClass"],[1,"slds-size--1-of-1","slds-height_full"],["chartContainer",""],["class","slds-size--1-of-1 slds-height_full slds-align_absolute-center slds-theme--default",4,"ngIf"],[1,"slds-size--1-of-1","slds-height_full","slds-align_absolute-center","slds-theme--default"],["label","LBL_NO_DATA"]],template:function(e,t){1&e&&(i.j41(0,"div",0),i.nrm(1,"canvas",1,2),i.DNE(3,g,3,0,"div",3),i.k0s()),2&e&&(i.Y8G("ngClass",t.paddingClass),i.R7$(),i.AVh("slds-hide",!t.hasData),i.R7$(2),i.Y8G("ngIf",!t.hasData))},dependencies:[c.YU,c.bT,u.L,m.W],encapsulation:2})}return SystemChartJSOneDimensional})()},84359:(e,t,s)=>{"use strict";s.d(t,{f:()=>c});var i=s(54438),n=s(84341),l=s(69904),o=s(60177);const a=["inputCheckbox"];function r(e,t){1&e&&(i.j41(0,"span",6),i.SdG(1),i.k0s())}const d=["*"];let c=(()=>{class SystemCheckbox{set disabled(e){this._disabled=!1!==e}get value(){return this._value}set value(e){this._value=e}get model_value(){return this.asinteger?1==this._model_value:this._model_value}set model_value(e){let t=this.asinteger?e?1:0:e;t!=this._model_value&&this.onChange(t),this.writeValue(t)}constructor(e,t){this.language=e,this.cdRef=t,this.hidelabel=!1,this.indeterminate=!1,this.asinteger=!1,this._disabled=!1,this.click$=new i.bkB,this.change$=new i.bkB,this.id=_.uniqueId(),this._value="1"}ngAfterViewInit(){this.setCheckboxIndeterminate()}ngOnChanges(e){e.indeterminate&&this.setCheckboxIndeterminate()}setCheckboxIndeterminate(){this.inputCheckbox&&(this.inputCheckbox.nativeElement.indeterminate=this.indeterminate)}click(e){if(e.stopPropagation(),this.disabled)return!1;this.onTouched(),this.click$.emit(this.value)}onChange(e){}registerOnChange(e){this.onChange=t=>{e(t)}}onTouched(){}registerOnTouched(e){this.onTouched=e}setDisabledState(e){this.disabled=e}writeValue(e){this._model_value=e,this.cdRef.detectChanges()}static#e=this.ɵfac=function(e){return new(e||SystemCheckbox)(i.rXU(l.B),i.rXU(i.gRc))};static#t=this.ɵcmp=i.VBU({type:SystemCheckbox,selectors:[["system-checkbox"]],viewQuery:function(e,t){if(1&e&&i.GBs(a,5),2&e){let e;i.mGM(e=i.lsd())&&(t.inputCheckbox=e.first)}},inputs:{hidelabel:"hidelabel",indeterminate:"indeterminate",asinteger:"asinteger",disabled:"disabled",value:"value"},outputs:{click$:"click",change$:"change"},features:[i.Jv_([{provide:n.kq,useExisting:(0,i.Rfq)((()=>SystemCheckbox)),multi:!0}]),i.OA$],ngContentSelectors:d,decls:6,vars:8,consts:[[1,"slds-checkbox"],["type","checkbox",3,"id","disabled","value","ngModel","click","ngModelChange"],["inputCheckbox",""],[1,"slds-checkbox__label","slds-truncate",3,"for","id"],[1,"slds-checkbox_faux","slds-m-horizontal--xxx-small"],["class","slds-form-element__label slds-p-left--xx-small",4,"ngIf"],[1,"slds-form-element__label","slds-p-left--xx-small"]],template:function(e,t){1&e&&(i.NAR(),i.j41(0,"span",0)(1,"input",1,2),i.bIt("click",(function(e){return t.click(e)})),i.mxI("ngModelChange",(function(e){return i.DH7(t.model_value,e)||(t.model_value=e),e})),i.k0s(),i.j41(3,"label",3),i.nrm(4,"span",4),i.DNE(5,r,2,0,"span",5),i.k0s()()),2&e&&(i.R7$(),i.Mz_("id","checkbox-",t.id,""),i.Y8G("disabled",t._disabled)("value",t.value),i.R50("ngModel",t.model_value),i.BMQ("aria-labelledby","checkbox-button-label-"+t.id),i.R7$(2),i.Mz_("for","checkbox-",t.id,"")("id","checkbox-button-label-",t.id,""),i.R7$(2),i.Y8G("ngIf",!t.hidelabel))},dependencies:[o.bT,n.Zm,n.BC,n.vS],encapsulation:2})}return SystemCheckbox})()},55480:(e,t,s)=>{"use strict";s.d(t,{G:()=>o});var i=s(54438),n=s(84341);const l=["*"];let o=(()=>{class SystemCheckboxGroup{constructor(e){this.cdRef=e,this.valueEmitter=new i.bkB,this._value=[]}get value(){return this._value}set value(e){this.onChange(e),this.writeValue(e)}writeValue(e){e&&!_.isEqual(e,this._value)&&(this._value=_.clone(e),this.cdRef.detectChanges(),this.valueEmitter.emit())}registerOnChange(e){this.onChange=t=>e(t)}registerOnTouched(e){this.onTouched=e}ngAfterViewInit(){this.cdRef.detach()}ngOnDestroy(){this.cdRef.reattach()}static#e=this.ɵfac=function(e){return new(e||SystemCheckboxGroup)(i.rXU(i.gRc))};static#t=this.ɵcmp=i.VBU({type:SystemCheckboxGroup,selectors:[["system-checkbox-group"]],features:[i.Jv_([{provide:n.kq,useExisting:(0,i.Rfq)((()=>SystemCheckboxGroup)),multi:!0}])],ngContentSelectors:l,decls:1,vars:0,template:function(e,t){1&e&&(i.NAR(),i.SdG(0))},encapsulation:2,changeDetection:0})}return SystemCheckboxGroup})()},79413:(e,t,s)=>{"use strict";s.d(t,{h:()=>a});var i=s(54438),n=s(55480),l=s(84341);const o=["*"];let a=(()=>{class SystemCheckboxGroupCheckbox{constructor(e,t){this.systemCheckboxGroup=e,this.cdRef=t,this.id=_.uniqueId("checkbox-group-checkbox-"),this.disabled=!1,this._checked=!1,this.systemCheckboxGroup.valueEmitter.subscribe((()=>this.setCheckedValueFromGroup()))}get checked(){return this._checked}set checked(e){this._checked=e,this.setGroupValue()}ngAfterViewInit(){this.cdRef.detectChanges(),this.cdRef.detach()}ngOnChanges(e){this.setCheckedValueFromGroup()}ngOnDestroy(){this.cdRef.reattach(),this.systemCheckboxGroup.valueEmitter.unsubscribe()}setCheckedValueFromGroup(){this._checked=(this.systemCheckboxGroup.value||[]).indexOf(this.value)>-1,this.cdRef.detectChanges()}setGroupValue(){!this.checked&&this.systemCheckboxGroup.value.indexOf(this.value)>-1?this.systemCheckboxGroup.value=this.systemCheckboxGroup.value.filter((e=>e!=this.value)):this.checked&&-1==this.systemCheckboxGroup.value.indexOf(this.value)&&(this.systemCheckboxGroup.value=[...this.systemCheckboxGroup.value,this.value])}static#e=this.ɵfac=function(e){return new(e||SystemCheckboxGroupCheckbox)(i.rXU(n.G,1),i.rXU(i.gRc))};static#t=this.ɵcmp=i.VBU({type:SystemCheckboxGroupCheckbox,selectors:[["system-checkbox-group-checkbox"]],inputs:{value:"value",disabled:"disabled"},features:[i.OA$],ngContentSelectors:o,decls:6,vars:4,consts:[[1,"slds-checkbox","slds-truncate"],["type","checkbox",3,"id","disabled","ngModel","ngModelChange"],[1,"slds-checkbox__label",3,"for"],[1,"slds-checkbox_faux"],[1,"slds-form-element__label","slds-p-left--x-small"]],template:function(e,t){1&e&&(i.NAR(),i.j41(0,"span",0)(1,"input",1),i.mxI("ngModelChange",(function(e){return i.DH7(t.checked,e)||(t.checked=e),e})),i.k0s(),i.j41(2,"label",2),i.nrm(3,"span",3),i.j41(4,"span",4),i.SdG(5),i.k0s()()()),2&e&&(i.R7$(),i.Y8G("id",t.id)("disabled",t.disabled),i.R50("ngModel",t.checked),i.R7$(),i.Y8G("for",t.id))},dependencies:[l.Zm,l.BC,l.vS],encapsulation:2,changeDetection:0})}return SystemCheckboxGroupCheckbox})()},70335:(e,t,s)=>{"use strict";s.d(t,{x:()=>o});var i=s(54438),n=s(84341),l=s(32062);let o=(()=>{class SystemCheckboxToggle{constructor(e){this.cdRef=e,this.label="",this.disabled=!1}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}writeValue(e){this.localValue=e,this.cdRef.detectChanges()}static#e=this.ɵfac=function(e){return new(e||SystemCheckboxToggle)(i.rXU(i.gRc))};static#t=this.ɵcmp=i.VBU({type:SystemCheckboxToggle,selectors:[["system-checkbox-toggle"]],inputs:{name:"name",label:"label",disabled:"disabled"},features:[i.Jv_([{provide:n.kq,useExisting:(0,i.Rfq)((()=>SystemCheckboxToggle)),multi:!0}])],decls:7,vars:4,consts:[[1,"slds-form-element"],[1,"slds-checkbox_toggle","slds-grid"],[1,"slds-form-element__label","slds-m-bottom_none","slds-grow"],[3,"label"],["type","checkbox",3,"ngModel","disabled","name","ngModelChange"],["aria-live","assertive",1,"slds-checkbox_faux_container"],[1,"slds-checkbox_faux"]],template:function(e,t){1&e&&(i.j41(0,"div",0)(1,"label",1)(2,"span",2),i.nrm(3,"system-label",3),i.k0s(),i.j41(4,"input",4),i.mxI("ngModelChange",(function(e){return i.DH7(t.localValue,e)||(t.localValue=e),e})),i.bIt("ngModelChange",(function(e){return t.onChange(e)})),i.k0s(),i.j41(5,"span",5),i.nrm(6,"span",6),i.k0s()()()),2&e&&(i.R7$(3),i.Y8G("label",t.label),i.R7$(),i.R50("ngModel",t.localValue),i.Y8G("disabled",t.disabled)("name",t.name))},dependencies:[n.Zm,n.BC,n.vS,l.W],encapsulation:2,changeDetection:0})}return SystemCheckboxToggle})()},2187:(e,t,s)=>{"use strict";s.d(t,{p:()=>_});var i=s(49969),n=s(54438),l=s(69904),o=s(60177),a=s(68823),r=s(32062),d=s(18521),c=s(59851);function u(e,t){if(1&e&&n.nrm(0,"system-icon",12),2&e){const e=n.XpG(3);n.Y8G("module",e.moduleicon)}}function m(e,t){if(1&e&&n.nrm(0,"system-icon-help-text",13),2&e){const e=n.XpG(3);n.Y8G("helpText",e._helpText)("verticalPositionBottom",e.tabHelpTextVerticalPositionBottom)}}function h(e,t){if(1&e){const e=n.RV6();n.qex(0),n.j41(1,"button",5),n.bIt("click",(function(){n.eBV(e);const t=n.XpG(2);return n.Njj(t.togglePanel())})),n.nrm(2,"system-utility-icon",6),n.j41(3,"div",7),n.DNE(4,u,1,1,"system-icon",8),n.j41(5,"span",9),n.nrm(6,"system-label",10),n.k0s(),n.DNE(7,m,1,2,"system-icon-help-text",11),n.k0s()(),n.bVm()}if(2&e){const e=n.XpG(2);n.R7$(4),n.Y8G("ngIf",e.moduleicon),n.R7$(2),n.Y8G("label",e._title),n.R7$(),n.Y8G("ngIf",e._helpText)}}function g(e,t){if(1&e&&n.nrm(0,"system-icon",12),2&e){const e=n.XpG(3);n.Y8G("module",e.moduleicon)}}function p(e,t){if(1&e&&n.nrm(0,"system-icon-help-text",13),2&e){const e=n.XpG(3);n.Y8G("helpText",e._helpText)("verticalPositionBottom",e.tabHelpTextVerticalPositionBottom)}}function f(e,t){if(1&e&&(n.j41(0,"div",14),n.DNE(1,g,1,1,"system-icon",8),n.j41(2,"span",9),n.nrm(3,"system-label",10),n.k0s(),n.DNE(4,p,1,2,"system-icon-help-text",11),n.k0s()),2&e){const e=n.XpG(2);n.R7$(),n.Y8G("ngIf",e.moduleicon),n.R7$(2),n.Y8G("label",e._title),n.R7$(),n.Y8G("ngIf",e._helpText)}}function b(e,t){if(1&e&&(n.j41(0,"h3",2),n.DNE(1,h,8,3,"ng-container",3)(2,f,5,3,"ng-template",null,4,n.C5r),n.k0s()),2&e){const e=n.sdS(3),t=n.XpG();n.R7$(),n.Y8G("ngIf",t.collapsible)("ngIfElse",e)}}const y=(e,t)=>({"slds-is-open":e,"slds-m-around--none":t}),v=["*"];let _=(()=>{class SystemCollabsableTab{constructor(e){this.language=e,this.collapsible=!0,this.expanded=!0,this.margin="default",this.title="",this.moduleicon="",this.tabtitle="",this.tabhelptext="",this.tabHelpTextVerticalPositionBottom=!1}togglePanel(){this.expanded=!this.expanded}get _title(){return this.tabtitle?this.tabtitle:!!this.title&&this.title}get _helpText(){return this.tabhelptext?this.language.getLabel(this.tabhelptext):void 0}static#e=this.ɵfac=function(e){return new(e||SystemCollabsableTab)(n.rXU(l.B))};static#t=this.ɵcmp=n.VBU({type:SystemCollabsableTab,selectors:[["system-collapsable-tab"]],inputs:{collapsible:"collapsible",expanded:"expanded",margin:"margin",title:"title",moduleicon:"moduleicon",tabtitle:"tabtitle",tabhelptext:"tabhelptext",tabHelpTextVerticalPositionBottom:"tabHelpTextVerticalPositionBottom"},ngContentSelectors:v,decls:4,vars:8,consts:[[1,"slds-section",3,"ngClass"],["class","slds-section__title",4,"ngIf"],[1,"slds-section__title"],[4,"ngIf","ngIfElse"],["simpleheader",""],["aria-expanded","true",1,"slds-button","slds-section__title-action",3,"click"],["icon","switch","size","x-small","addclasses","slds-section__title-action-icon slds-button__icon slds-button__icon_left"],[1,"slds-grid","slds-grid--vertical-align-center"],["size","x-small",3,"module",4,"ngIf"],[1,"slds-truncate"],[3,"label"],[3,"helpText","verticalPositionBottom",4,"ngIf"],["size","x-small",3,"module"],[3,"helpText","verticalPositionBottom"],[1,"slds-grid","slds-grid--vertical-align-center","slds-section__title-action",2,"cursor","default"]],template:function(e,t){1&e&&(n.NAR(),n.j41(0,"div",0),n.DNE(1,b,4,2,"h3",1),n.j41(2,"div"),n.SdG(3),n.k0s()()),2&e&&(n.Y8G("ngClass",n.l_i(5,y,t.expanded,"none"==t.margin)),n.R7$(),n.Y8G("ngIf",""!=t._title),n.R7$(),n.xc7("display",t.expanded?"block":"none"),n.Y8G("@tabanimation",t.expanded))},dependencies:[o.YU,o.bT,a.J,r.W,d.B,c.N],encapsulation:2,data:{animation:[(0,i.hZ)("tabanimation",[(0,i.wk)("true",(0,i.iF)({height:"*",opacity:1})),(0,i.wk)("false",(0,i.iF)({height:"0px",opacity:0})),(0,i.kY)("true => false",[(0,i.iF)({overflow:"hidden"}),(0,i.i0)(".5s")]),(0,i.kY)("false => true",[(0,i.i0)(".5s"),(0,i.iF)({overflow:"inherit"})])])]}})}return SystemCollabsableTab})()},97696:(e,t,s)=>{"use strict";s.d(t,{k:()=>d});var i=s(54438),n=s(60177),l=s(48717);const o=["container"];function a(e,t){if(1&e&&(i.j41(0,"div",2),i.nrm(1,"system-spinner",3),i.k0s()),2&e){const e=i.XpG();i.Y8G("title",e.containerComponent)}}function r(e,t){}let d=(()=>{class SystemComponentContainer{constructor(){this.containerRef=new i.bkB,this.loaded=!1,this.containerComponent=""}ngAfterViewInit(){this.containerRef.emit(this.container),this.containerRef.complete()}static#e=this.ɵfac=function(e){return new(e||SystemComponentContainer)};static#t=this.ɵcmp=i.VBU({type:SystemComponentContainer,selectors:[["system-component-container"]],viewQuery:function(e,t){if(1&e&&i.GBs(o,7,i.c1b),2&e){let e;i.mGM(e=i.lsd())&&(t.container=e.first)}},decls:3,vars:1,consts:[["style","width:100%;","class","slds-align--absolute-center slds-p-around--xx-small",3,"title",4,"ngIf"],["container",""],[1,"slds-align--absolute-center","slds-p-around--xx-small",2,"width","100%",3,"title"],["size","12"]],template:function(e,t){1&e&&i.DNE(0,a,2,1,"div",0)(1,r,0,0,"ng-template",null,1,i.C5r),2&e&&i.Y8G("ngIf",!t.loaded)},dependencies:[n.bT,l.P],encapsulation:2})}return SystemComponentContainer})()},13639:(e,t,s)=>{"use strict";s.d(t,{R:()=>n});var i=s(54438);let n=(()=>{class SystemComponentMissing{constructor(){this.component=""}static#e=this.ɵfac=function(e){return new(e||SystemComponentMissing)};static#t=this.ɵcmp=i.VBU({type:SystemComponentMissing,selectors:[["system-component-missing"]],decls:5,vars:1,consts:[[1,"slds-box","slds-align_absolute-center","slds-theme_alert-texture","slds-theme_error"]],template:function(e,t){1&e&&(i.j41(0,"div",0),i.EFF(1," Component "),i.j41(2,"b"),i.EFF(3),i.k0s(),i.EFF(4," Missing\n"),i.k0s()),2&e&&(i.R7$(3),i.JRh(t.component))},encapsulation:2})}return SystemComponentMissing})()},60595:(e,t,s)=>{"use strict";s.d(t,{F:()=>r});var i=s(54438),n=s(83935),l=s(60177),o=s(10650);function a(e,t){if(1&e&&i.nrm(0,"system-dynamic-component",1),2&e){const e=t.$implicit;i.Y8G("component",e.component)("componentconfig",e.componentconfig)}}let r=(()=>{class SystemComponentSet{constructor(e){this.metadata=e,this.componentset="",this._componentset="",this.components=[]}ngOnChanges(){this.renderComnponentset()}renderComnponentset(){this.componentset!=this._componentset&&(this.componentset?this.components=this.metadata.getComponentSetObjects(this.componentset):this.components=[],this._componentset=this.componentset)}static#e=this.ɵfac=function(e){return new(e||SystemComponentSet)(i.rXU(n.yu))};static#t=this.ɵcmp=i.VBU({type:SystemComponentSet,selectors:[["system-componentset"]],inputs:{componentset:"componentset"},features:[i.OA$],decls:1,vars:1,consts:[[3,"component","componentconfig",4,"ngFor","ngForOf"],[3,"component","componentconfig"]],template:function(e,t){1&e&&i.DNE(0,a,1,2,"system-dynamic-component",0),2&e&&i.Y8G("ngForOf",t.components)},dependencies:[l.Sq,o.s],encapsulation:2})}return SystemComponentSet})()},49380:(e,t,s)=>{"use strict";s.d(t,{k:()=>o});var i=s(54438),n=s(83935),l=s(60177);let o=(()=>{class SystemCustomIcon{constructor(e){this.metadata=e,this.icon="info",this.file="./assets/icons/spicecrm.svg",this.size="",this.color="",this.desaturate=!1,this.addclasses="",this.divClass="slds-media__figure"}getSizeClass(){return this.size?"slds-icon--"+this.size:""}getSvg(){return this.file+"#"+this.icon}get iconClass(){return"slds-icon"+(this.size?" slds-icon--"+this.size:"")+" slds-icon-text-default "+this.addclasses}get iconStyle(){let e={};return this.color&&(e.color=this.color),this.desaturate&&(e.filter="saturate(0)"),e}static#e=this.ɵfac=function(e){return new(e||SystemCustomIcon)(i.rXU(n.yu))};static#t=this.ɵcmp=i.VBU({type:SystemCustomIcon,selectors:[["system-custom-icon"]],inputs:{icon:"icon",file:"file",size:"size",color:"color",desaturate:"desaturate",addclasses:"addclasses",divClass:"divClass"},decls:3,vars:3,consts:[[1,"slds-p-horizontal--xxx-small","slds-current-color"],["aria-hidden","true",3,"ngClass","ngStyle"]],template:function(e,t){1&e&&(i.j41(0,"div",0),i.qSk(),i.j41(1,"svg",1),i.nrm(2,"use"),i.k0s()()),2&e&&(i.R7$(),i.Y8G("ngClass",t.iconClass)("ngStyle",t.iconStyle),i.R7$(),i.BMQ("href",t.getSvg(),null,"xlink"))},dependencies:[l.YU,l.B3],encapsulation:2})}return SystemCustomIcon})()},22185:(e,t,s)=>{"use strict";s.d(t,{H:()=>l});var i=s(54438),n=s(88421);let l=(()=>{class SystemDisplayCurrencySymbol{constructor(e,t){this.cdRef=e,this.currency=t}ngOnChanges(e){this.cdRef.detectChanges()}get currencySymbol(){if(!this.currencyid)return"";let e=this.currency.getCurrencies().find((e=>e.id==this.currencyid));return e?e.symbol:""}static#e=this.ɵfac=function(e){return new(e||SystemDisplayCurrencySymbol)(i.rXU(i.gRc),i.rXU(n.G))};static#t=this.ɵcmp=i.VBU({type:SystemDisplayCurrencySymbol,selectors:[["system-display-currency-symbol"]],inputs:{currencyid:"currencyid"},features:[i.OA$],decls:1,vars:1,template:function(e,t){1&e&&i.EFF(0),2&e&&i.JRh(t.currencySymbol)},encapsulation:2})}return SystemDisplayCurrencySymbol})()},16435:(e,t,s)=>{"use strict";s.d(t,{f:()=>r});var i=s(18359),n=s(54438),l=s(69904),o=s(29994),a=s(48849);let r=(()=>{class SystemDisplayDatetime{constructor(e,t,s,n){this.language=e,this.cdRef=t,this.session=s,this.userpreferences=n,this.displayDate=!0,this.displayTime=!0,this.subscriptions=new i.yU}ngOnChanges(e){this.detectChanges()}ngOnDestroy(){this.subscriptions.unsubscribe()}ngAfterViewInit(){this.subscribeToPrefs()}subscribeToPrefs(){this.subscriptions.add(this.userpreferences.preferences$.subscribe((e=>{this.prefChanges(e)})))}prefChanges(e){this.detectChanges()}detectChanges(){this.cdRef.detectChanges()}get displayValue(){if(!this.date||!this.displayDate&&!this.displayTime)return"";let e=[];if(this.displayDate&&e.push(this.userpreferences.getDateFormat()),this.displayTime&&e.push(this.userpreferences.getTimeFormat()),moment.isMoment(this.date))return this.date.format(e.join(" "));{let t=this.userpreferences.toUse.timezone||this.session.getSessionData("timezone")||moment.tz.guess(!0);return moment.utc(this.date).tz(t).format(e.join(" "))}}static#e=this.ɵfac=function(e){return new(e||SystemDisplayDatetime)(n.rXU(l.B),n.rXU(n.gRc),n.rXU(o.d),n.rXU(a.S))};static#t=this.ɵcmp=n.VBU({type:SystemDisplayDatetime,selectors:[["system-display-datetime"]],inputs:{date:"date",displayDate:"displayDate",displayTime:"displayTime"},features:[n.OA$],decls:1,vars:1,template:function(e,t){1&e&&n.EFF(0),2&e&&n.SpI("",t.displayValue,"\n")},encapsulation:2,changeDetection:0})}return SystemDisplayDatetime})()},38431:(e,t,s)=>{"use strict";s.d(t,{B:()=>c});var i=s(54438),n=s(69904),l=s(88421),o=s(48849),a=s(60177),r=s(22185);function d(e,t){if(1&e&&(i.qex(0),i.nrm(1,"system-display-currency-symbol",1),i.bVm()),2&e){const e=i.XpG();i.R7$(),i.Y8G("currencyid",e.currency_id)}}let c=(()=>{class SystemDisplayNumber{set onPrecisionChange(e){this.precision=e}set inputGrow(e){this.noDigits=!1!==e}constructor(e,t,s,i){this.language=e,this.cdRef=t,this.currency=s,this.userpreferences=i,this.noDigits=!1}get currencySymbol(){if(!this.currency_id)return"";let e=this.currency.getCurrencies().find((e=>e.id==this.currency_id));return e?e.symbol:""}get value(){if(this.number&&""!=this.number||0===this.number)return"string"==typeof this.number&&(this.number=parseFloat(this.number)),void 0===this.precision&&(this.precision=this.userpreferences.toUse.currency_significant_digits),this.noDigits?this.userpreferences.formatMoney(this.number,0):this.userpreferences.formatMoney(this.number,this.precision)}ngOnChanges(e){this.detectChanges()}detectChanges(){this.cdRef.detectChanges()}static#e=this.ɵfac=function(e){return new(e||SystemDisplayNumber)(i.rXU(n.B),i.rXU(i.gRc),i.rXU(l.G),i.rXU(o.S))};static#t=this.ɵcmp=i.VBU({type:SystemDisplayNumber,selectors:[["system-display-number"]],inputs:{number:"number",onPrecisionChange:[i.Mj6.None,"precision","onPrecisionChange"],currency_id:"currency_id",noDigits:"noDigits",inputGrow:[i.Mj6.None,"system-display-number-nodigits","inputGrow"]},features:[i.OA$],decls:2,vars:2,consts:[[4,"ngIf"],[1,"slds-p-right--xx-small",3,"currencyid"]],template:function(e,t){1&e&&(i.DNE(0,d,2,1,"ng-container",0),i.EFF(1)),2&e&&(i.Y8G("ngIf",t.currency_id),i.R7$(),i.SpI("",t.value,"\n"))},dependencies:[a.bT,r.H],encapsulation:2,changeDetection:0})}return SystemDisplayNumber})()},10650:(e,t,s)=>{"use strict";s.d(t,{s:()=>o});var i=s(54438),n=s(83935);const l=["container"];let o=(()=>{class SystemDynamicComponent{constructor(e){this.metadata=e,this.component="",this.componentref=new i.bkB,this.initialized=!1}ngAfterViewInit(){this.initialized||this.renderComponent()}ngOnChanges(e){this.container&&e.component&&(this._component&&(this._component.destroy(),this._component=void 0),this.renderComponent(),this.initialized=!0)}renderComponent(){this.component&&this.metadata.addComponent(this.component,this.container).subscribe((e=>{if(this.componentref.emit(e),this.componentconfig&&(e.instance.componentconfig=this.componentconfig),this.componentattributes)for(let t in this.componentattributes)e.instance[t]=this.componentattributes[t];this._component=e}))}static#e=this.ɵfac=function(e){return new(e||SystemDynamicComponent)(i.rXU(n.yu))};static#t=this.ɵcmp=i.VBU({type:SystemDynamicComponent,selectors:[["system-dynamic-component"]],viewQuery:function(e,t){if(1&e&&i.GBs(l,7,i.c1b),2&e){let e;i.mGM(e=i.lsd())&&(t.container=e.first)}},inputs:{component:"component",componentconfig:"componentconfig",componentattributes:"componentattributes"},outputs:{componentref:"componentref"},features:[i.OA$],decls:2,vars:0,consts:[["container",""]],template:function(e,t){1&e&&i.nrm(0,"div",null,0)},encapsulation:2})}return SystemDynamicComponent})()},12833:(e,t,s)=>{"use strict";s.d(t,{b:()=>a});var i=s(54438),n=s(83935),l=s(57363);const o=["componentcontainer"];let a=(()=>{class SystemDynamicRouteInterceptor{constructor(e,t,s){this.metadata=e,this.route=t,this.router=s,this.routercomponent=null}ngOnInit(){this.router.navigate(["/module/Home"])}static#e=this.ɵfac=function(e){return new(e||SystemDynamicRouteInterceptor)(i.rXU(n.yu),i.rXU(l.nX),i.rXU(l.Ix))};static#t=this.ɵcmp=i.VBU({type:SystemDynamicRouteInterceptor,selectors:[["system-dynamicroute-container"]],viewQuery:function(e,t){if(1&e&&i.GBs(o,7,i.c1b),2&e){let e;i.mGM(e=i.lsd())&&(t.componentcontainer=e.first)}},decls:2,vars:0,consts:[["componentcontainer",""]],template:function(e,t){1&e&&i.nrm(0,"div",null,0)},encapsulation:2})}return SystemDynamicRouteInterceptor})()},67469:(e,t,s)=>{"use strict";s.d(t,{z:()=>a});var i=s(54438),n=s(83935),l=s(13562),o=s(68823);let a=(()=>{class SystemFileIcon{constructor(e,t){this.metadata=e,this.helper=t,this.filemimetype="",this.filename="",this.size="",this.addclasses="",this.divClass="slds-media__figure",this.fileicon={icon:"unknown",sprite:"doctype"}}ngOnInit(){this.determineIcon()}determineIcon(){let e=this.helper.determineFileIcon(this.filemimetype);if("unknown"==e){if("msg"===this.filename.split(".").splice(-1,1)[0].toLowerCase())return void(this.fileicon={icon:"email",sprite:"standard"})}this.fileicon={icon:e,sprite:"doctype"}}static#e=this.ɵfac=function(e){return new(e||SystemFileIcon)(i.rXU(n.yu),i.rXU(l.d))};static#t=this.ɵcmp=i.VBU({type:SystemFileIcon,selectors:[["system-file-icon"]],inputs:{filemimetype:"filemimetype",filename:"filename",size:"size",addclasses:"addclasses",divClass:"divClass"},decls:1,vars:4,consts:[[3,"icon","divClass","sprite","size"]],template:function(e,t){1&e&&i.nrm(0,"system-icon",0),2&e&&i.Y8G("icon",t.fileicon.icon)("divClass",t.divClass)("sprite",t.fileicon.sprite)("size",t.size)},dependencies:[o.J],encapsulation:2})}return SystemFileIcon})()},58829:(e,t,s)=>{"use strict";s.d(t,{H:()=>g});var i=s(54438),n=s(49722),l=s(69904),o=s(83935),a=s(60177),r=s(84341),d=s(25863),c=s(32062),u=s(67392),m=s(51099);function h(e,t){if(1&e&&(i.j41(0,"option",15),i.nrm(1,"system-label",16),i.k0s()),2&e){const e=t.$implicit;i.Y8G("value",e.operator),i.R7$(),i.Y8G("label",e.name)}}let g=(()=>{class SystemFilterBuilderFilterExpression{constructor(e,t,s){this.backend=e,this.language=t,this.metadata=s,this.filterexpression={},this.operatortype="default",this.expressionDeleted=new i.bkB,this.operators={default:[{operator:"equals",name:"LBL_OP_EQUALS",value1:"text"},{operator:"notequals",name:"LBL_OP_NOTEQUAL",value1:"text"},{operator:"starts",name:"LBL_STARTS",value1:"text"},{operator:"contains",name:"LBL_OP_CONTAINS",value1:"text"},{operator:"ncontains",name:"LBL_OP_NOTCONTAINS",value1:"text"},{operator:"greater",name:"LBL_OP_GREATER",value1:"text"},{operator:"gequal",name:"LBL_OP_GREATEREQUAL",value1:"text"},{operator:"less",name:"LBL_OP_LESS",value1:"text"},{operator:"lequal",name:"LBL_OP_LESSEQUAL",value1:"text"},{operator:"between",name:"LBL_OP_BETWEEN",value1:"text",value2:"text"},{operator:"empty",name:"LBL_OP_EMPTY"},{operator:"notempty",name:"LBL_OP_NOTEMPTY"},{operator:"changed",name:"LBL_CHANGED"}],numeric:[{operator:"equals",name:"LBL_OP_EQUALS",value1:"integer"},{operator:"notequals",name:"LBL_OP_NOTEQUAL",value1:"text"},{operator:"greater",name:"LBL_OP_GREATER",value1:"integer"},{operator:"gequal",name:"LBL_OP_GREATEREQUAL",value1:"integer"},{operator:"less",name:"LBL_OP_LESS",value1:"integer"},{operator:"lequal",name:"LBL_OP_LESSEQUAL",value1:"integer"},{operator:"between",name:"LBL_OP_BETWEEN",value1:"integer",value2:"integer"},{operator:"changed",name:"LBL_CHANGED"}],date:[{operator:"today",name:"LBL_TODAY"},{operator:"past",name:"LBL_PAST"},{operator:"future",name:"LBL_FUTURE"},{operator:"thismonth",name:"LBL_THIS_MONTH"},{operator:"thisyear",name:"LBL_THIS_YEAR"},{operator:"nextmonth",name:"LBL_NEXT_MONTH"},{operator:"nextyear",name:"LBL_NEXT_YEAR"},{operator:"ndaysago",name:"LBL_N_DAYS_AGO",value1:"integer"},{operator:"inlessthanndays",name:"LBL_IN_LESS_THAN_N_DAYS",value1:"integer"},{operator:"inmorethanndays",name:"LBL_IN_MORE_THAN_N_DAYS",value1:"integer"},{operator:"inndays",name:"LBL_IN_N_DAYS",value1:"integer"},{operator:"thisday",name:"LBL_THIS_DAY"},{operator:"empty",name:"LBL_OP_ISEMPTY"},{operator:"greater",name:"LBL_OP_AFTER",value1:"date"},{operator:"less",name:"LBL_OP_BEFORE",value1:"date"},{operator:"betweend",name:"LBL_OP_BETWEEN",value1:"date",value2:"date"},{operator:"empty",name:"LBL_OP_ISEMPTY"},{operator:"notempty",name:"LBL_OP_NOTEMPTY"},{operator:"lastndays",name:"LBL_OP_LASTNDAYS",value1:"integer"},{operator:"lastnmonths",name:"LBL_OP_LASTNMONTHS",value1:"integer"},{operator:"untilyesterday",name:"LBL_OP_UNTILYESTERDAY"},{operator:"fromtomorrow",name:"LBL_OP_FROMTOMORROW"},{operator:"nyearsago",name:"LBL_N_YEARS_AGO",value1:"integer"},{operator:"changed",name:"LBL_CHANGED"}],bool:[{operator:"true",name:"LBL_TRUE"},{operator:"false",name:"LBL_FALSE"},{operator:"changed",name:"LBL_CHANGED"}],enum:[{operator:"equals",name:"LBL_OP_EQUALS",value1:"enum"},{operator:"notequals",name:"LBL_OP_NOTEQUAL",value1:"enum"},{operator:"oneof",name:"LBL_ONEOF",value1:"multienum"},{operator:"notoneof",name:"LBL_NOTONEOF",value1:"multienum"},{operator:"empty",name:"LBL_OP_ISEMPTY"},{operator:"notempty",name:"LBL_OP_NOTEMPTY"},{operator:"changed",name:"LBL_CHANGED"}],relate:[{operator:"equalr",name:"LBL_OP_EQUALS",value1:"relate"},{operator:"notequalr",name:"LBL_OP_NOTEQUAL",value1:"relate"},{operator:"emptyr",name:"LBL_OP_ISEMPTY"},{operator:"notemptyr",name:"LBL_OP_NOTEMPTY"},{operator:"equalrcu",name:"LBL_CURRENT_USER"},{operator:"notequalrcu",name:"LBL_NOT_CURRENT_USER"},{operator:"changed",name:"LBL_CHANGED"}]}}get field(){return this.filterexpression.field}set field(e){e!=this.filterexpression.field&&(this.filterexpression.field=e,this.determineOperatorType(e),this.operator=this.operators[this.operatortype][0].operator,this.filterexpression.filtervalue="")}get operator(){return this.filterexpression.operator}set operator(e){e!=this.filterexpression.operator&&(this.filterexpression.operator=e,this.filterexpression.filtervalue="",this.filterexpression.filtervalueto="")}determineOperatorType(e){let t=this.metadata.getFieldDefs(this.module,e);if(t)switch(t.type){case"date":case"datetime":case"datetimecombo":this.operatortype="date";break;case"bool":case"boolean":this.operatortype="bool";break;case"enum":case"multienum":this.operatortype="enum";break;case"int":case"double":case"currency":this.operatortype="numeric";break;case"relate":this.operatortype="relate";break;default:this.operatortype="default"}else this.operatortype="default"}ngOnInit(){this.determineOperatorType(this.field)}delete(){this.filterexpression.deleted=!0,this.expressionDeleted.emit(!0)}trackByFn(e,t){return t.value}static#e=this.ɵfac=function(e){return new(e||SystemFilterBuilderFilterExpression)(i.rXU(n.H),i.rXU(l.B),i.rXU(o.yu))};static#t=this.ɵcmp=i.VBU({type:SystemFilterBuilderFilterExpression,selectors:[["system-filter-builder-expression"]],inputs:{module:"module",filterexpression:"filterexpression"},outputs:{expressionDeleted:"expressionDeleted"},decls:19,vars:10,consts:[[1,"slds-grid","slds-gutters_xx-small","slds-grid--vertical-align-start"],[1,"slds-col","slds-size--1-of-4",3,"module","ngModel","ngModelChange"],[1,"slds-col","slds-size--1-of-4"],[1,"slds-form-element"],[1,"slds-form-element__label"],["label","LBL_OPERATOR"],[1,"slds-form-element__control"],[1,"slds-select_container"],[1,"slds-select",3,"disabled","ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[1,"slds-col",3,"operators","operator","filterexpression","module","field"],[1,"slds-col","slds-grow-none"],["aria-hidden","true",1,"slds-form-element__label","slds-hidden"],[1,"slds-button","slds-button_icon","slds-button_icon-border-filled",3,"click"],["icon","delete"],[3,"value"],[3,"label"]],template:function(e,t){1&e&&(i.j41(0,"div",0)(1,"system-filter-builder-expression-fields",1),i.mxI("ngModelChange",(function(e){return i.DH7(t.field,e)||(t.field=e),e})),i.k0s(),i.j41(2,"div",2)(3,"div",3)(4,"label",4),i.nrm(5,"system-label",5),i.k0s(),i.j41(6,"div",6)(7,"div",7)(8,"select",8),i.mxI("ngModelChange",(function(e){return i.DH7(t.operator,e)||(t.operator=e),e})),i.nrm(9,"option"),i.DNE(10,h,2,2,"option",9),i.k0s()()()()(),i.nrm(11,"system-filter-builder-expression-values",10),i.j41(12,"div",11)(13,"div",3)(14,"span",12),i.EFF(15,"delete"),i.k0s(),i.j41(16,"div",6)(17,"button",13),i.bIt("click",(function(){return t.delete()})),i.nrm(18,"system-button-icon",14),i.k0s()()()()()),2&e&&(i.R7$(),i.Y8G("module",t.module),i.R50("ngModel",t.field),i.R7$(7),i.Y8G("disabled",!t.filterexpression.field),i.R50("ngModel",t.operator),i.R7$(2),i.Y8G("ngForOf",t.operators[t.operatortype]),i.R7$(),i.Y8G("operators",t.operators[t.operatortype])("operator",t.filterexpression.operator)("filterexpression",t.filterexpression)("module",t.module)("field",t.field))},dependencies:[a.Sq,r.xH,r.y7,r.wz,r.BC,r.vS,d.t,c.W,u.q,m.N],encapsulation:2})}return SystemFilterBuilderFilterExpression})()},67392:(e,t,s)=>{"use strict";s.d(t,{q:()=>m});var i=s(54438),n=s(84341),l=s(49722),o=s(69904),a=s(83935),r=s(60177),d=s(32062),c=s(45915);function u(e,t){if(1&e&&(i.j41(0,"option",7),i.nrm(1,"system-label-fieldname",8),i.EFF(2),i.k0s()),2&e){const e=t.$implicit,s=i.XpG();i.Y8G("value",e.name),i.R7$(),i.Y8G("module",s.module)("field",e.name),i.R7$(),i.SpI(" (",e.name,")")}}let m=(()=>{class SystemFilterBuilderFilterExpressionFields{constructor(e,t,s){this.backend=e,this.language=t,this.metadata=s,this.fields=[]}get field(){return this._field}set field(e){e!=this._field&&(this._field=e,this.onChange(e))}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}writeValue(e){this._field=e}getFieldDisplayOptions(){let e=[],t=this.language.getFieldDisplayOptions(this.module,this.field);for(let s in t)e.push({value:s,display:t[s]});return e.filter((e=>e.value.length>0))}ngOnInit(){let e=this.metadata.getModuleFields(this.module);for(let t in e)if("link"!=e[t].type){if("relate"==e[t].type){if(!e[t].module)continue;if(e[t].id_name&&e[e[t].id_name]&&"non-db"==e[e[t].id_name].source)continue}"id"!=e[t].type&&("non-db"==e[t].source&&"relate"!=e[t].type||this.fields.push(e[t]))}this.fields.sort(((e,t)=>this.language.getFieldDisplayName(this.module,e.name).toLowerCase()>this.language.getFieldDisplayName(this.module,t.name).toLowerCase()?1:-1))}static#e=this.ɵfac=function(e){return new(e||SystemFilterBuilderFilterExpressionFields)(i.rXU(l.H),i.rXU(o.B),i.rXU(a.yu))};static#t=this.ɵcmp=i.VBU({type:SystemFilterBuilderFilterExpressionFields,selectors:[["system-filter-builder-expression-fields"]],inputs:{module:"module"},features:[i.Jv_([{provide:n.kq,useExisting:(0,i.Rfq)((()=>SystemFilterBuilderFilterExpressionFields)),multi:!0}])],decls:7,vars:2,consts:[[1,"slds-form-element"],[1,"slds-form-element__label"],["label","LBL_FIELD"],[1,"slds-form-element__control"],[1,"slds-select_container"],[1,"slds-select",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[3,"module","field"]],template:function(e,t){1&e&&(i.j41(0,"div",0)(1,"label",1),i.nrm(2,"system-label",2),i.k0s(),i.j41(3,"div",3)(4,"div",4)(5,"select",5),i.mxI("ngModelChange",(function(e){return i.DH7(t.field,e)||(t.field=e),e})),i.DNE(6,u,3,4,"option",6),i.k0s()()()()),2&e&&(i.R7$(5),i.R50("ngModel",t.field),i.R7$(),i.Y8G("ngForOf",t.fields))},dependencies:[r.Sq,n.xH,n.y7,n.wz,n.BC,n.vS,d.W,c.P],encapsulation:2})}return SystemFilterBuilderFilterExpressionFields})()},54742:(e,t,s)=>{"use strict";s.d(t,{y:()=>b});var i=s(54438),n=s(49722),l=s(69904),o=s(83935),a=s(60177),r=s(84341),d=s(25863),c=s(32062),u=s(58829);function m(e,t){if(1&e){const e=i.RV6();i.j41(0,"button",31),i.bIt("click",(function(){i.eBV(e);const t=i.XpG();return i.Njj(t.delete())})),i.nrm(1,"system-button-icon",32),i.k0s()}}function h(e,t){if(1&e){const e=i.RV6();i.j41(0,"fieldset")(1,"system-filter-builder-expression",35),i.bIt("expressionDeleted",(function(){i.eBV(e);const t=i.XpG(2);return i.Njj(t.filterchanged())})),i.k0s()()}if(2&e){const e=i.XpG().$implicit,t=i.XpG();i.R7$(),i.Y8G("module",t.module)("filterexpression",e)}}function g(e,t){if(1&e&&(i.j41(0,"li",33),i.DNE(1,h,2,2,"fieldset",34),i.k0s()),2&e){const e=t.$implicit;i.R7$(),i.Y8G("ngIf",!e.deleted)}}function p(e,t){if(1&e){const e=i.RV6();i.j41(0,"system-filter-builder-expression-group",37),i.bIt("expressionChanged",(function(){i.eBV(e);const t=i.XpG(2);return i.Njj(t.filterchanged())})),i.k0s()}if(2&e){const e=i.XpG().$implicit,t=i.XpG();i.Y8G("module",t.module)("filtergroup",e)("candelete",!0)}}function f(e,t){if(1&e&&(i.qex(0),i.DNE(1,p,1,3,"system-filter-builder-expression-group",36),i.bVm()),2&e){const e=t.$implicit;i.R7$(),i.Y8G("ngIf",!e.deleted)}}let b=(()=>{class SystemFilterBuilderFilterExpressionGroup{constructor(e,t,s){this.backend=e,this.language=t,this.metadata=s,this.candelete=!1,this.expressionChanged=new i.bkB,this.expressions=[],this.groups=[]}ngOnChanges(e){this.groups=[],this.expressions=[];for(let e of this.filtergroup.conditions)e.logicaloperator?this.groups.push(e):this.expressions.push(e)}addExpression(){let e={field:"",operator:"",filtervalue:""};this.filtergroup.conditions.push(e),this.expressions.push(e),this.expressionChanged.emit(!0)}addGroup(){let e={logicaloperator:"and",groupscope:"all",conditions:[]};this.filtergroup.conditions.push(e),this.groups.push(e)}delete(){this.filtergroup.deleted=!0,this.expressionChanged.emit(!0)}filterchanged(){this.cleanDeleted(),this.expressionChanged.emit(!0)}cleanDeleted(){let e=[];for(let t of this.filtergroup.conditions)!0!==t.deleted&&e.push(t);this.filtergroup.conditions=e}static#e=this.ɵfac=function(e){return new(e||SystemFilterBuilderFilterExpressionGroup)(i.rXU(n.H),i.rXU(l.B),i.rXU(o.yu))};static#t=this.ɵcmp=i.VBU({type:SystemFilterBuilderFilterExpressionGroup,selectors:[["system-filter-builder-expression-group"]],inputs:{module:"module",filtergroup:"filtergroup",candelete:"candelete"},outputs:{expressionChanged:"expressionChanged"},features:[i.OA$],decls:40,vars:5,consts:[[1,"slds-expression__group"],[1,"slds-grid","slds-gutters_direct-xx-small","slds-grid--vertical-align-end","slds-size--1-of-1"],[1,"slds-form-element","slds-col","slds-grow-none"],[1,"slds-form-element__label"],["label","LBL_GROUP_OPERATOR"],[1,"slds-form-element__control"],[1,"slds-select_container"],[1,"slds-select",3,"ngModel","ngModelChange"],["value","and"],["label","LBL_AND"],["value","or"],["label","LBL_OR"],["label","LBL_GROUP_SCOPE"],["value","all"],["label","LBL_ALL"],["value","own"],["label","LBL_OWN"],["value","ownorgunit"],["label","LBL_OWN_ORGUNIT"],["value","not_own"],["label","LBL_NOT_OWN"],["value","creator"],["label","LBL_CREATOR"],["class","slds-button slds-button_icon slds-button_icon-border-filled slds-col--bump-left",3,"click",4,"ngIf"],["class","slds-expression__row_group",4,"ngFor","ngForOf"],[4,"ngFor","ngForOf"],[1,"slds-expression__buttons"],[1,"slds-button","slds-button_neutral",3,"click"],["icon","add"],["label","LBL_ADD_CONDITION"],["label","LBL_ADD_GROUP"],[1,"slds-button","slds-button_icon","slds-button_icon-border-filled","slds-col--bump-left",3,"click"],["icon","delete"],[1,"slds-expression__row_group"],[4,"ngIf"],[3,"module","filterexpression","expressionDeleted"],[3,"module","filtergroup","candelete","expressionChanged",4,"ngIf"],[3,"module","filtergroup","candelete","expressionChanged"]],template:function(e,t){1&e&&(i.j41(0,"li",0)(1,"fieldset")(2,"div",1)(3,"div",2)(4,"label",3),i.nrm(5,"system-label",4),i.k0s(),i.j41(6,"div",5)(7,"div",6)(8,"select",7),i.mxI("ngModelChange",(function(e){return i.DH7(t.filtergroup.logicaloperator,e)||(t.filtergroup.logicaloperator=e),e})),i.j41(9,"option",8),i.nrm(10,"system-label",9),i.k0s(),i.j41(11,"option",10),i.nrm(12,"system-label",11),i.k0s()()()()(),i.j41(13,"div",2)(14,"label",3),i.nrm(15,"system-label",12),i.k0s(),i.j41(16,"div",5)(17,"div",6)(18,"select",7),i.mxI("ngModelChange",(function(e){return i.DH7(t.filtergroup.groupscope,e)||(t.filtergroup.groupscope=e),e})),i.j41(19,"option",13),i.nrm(20,"system-label",14),i.k0s(),i.j41(21,"option",15),i.nrm(22,"system-label",16),i.k0s(),i.j41(23,"option",17),i.nrm(24,"system-label",18),i.k0s(),i.j41(25,"option",19),i.nrm(26,"system-label",20),i.k0s(),i.j41(27,"option",21),i.nrm(28,"system-label",22),i.k0s()()()()(),i.DNE(29,m,2,0,"button",23),i.k0s(),i.j41(30,"ul"),i.DNE(31,g,2,1,"li",24)(32,f,2,1,"ng-container",25),i.k0s(),i.j41(33,"div",26)(34,"button",27),i.bIt("click",(function(){return t.addExpression()})),i.nrm(35,"system-button-icon",28)(36,"system-label",29),i.k0s(),i.j41(37,"button",27),i.bIt("click",(function(){return t.addGroup()})),i.nrm(38,"system-button-icon",28)(39,"system-label",30),i.k0s()()()()),2&e&&(i.R7$(8),i.R50("ngModel",t.filtergroup.logicaloperator),i.R7$(10),i.R50("ngModel",t.filtergroup.groupscope),i.R7$(11),i.Y8G("ngIf",t.candelete),i.R7$(2),i.Y8G("ngForOf",t.expressions),i.R7$(),i.Y8G("ngForOf",t.groups))},dependencies:[a.Sq,a.bT,r.xH,r.y7,r.wz,r.BC,r.vS,d.t,c.W,SystemFilterBuilderFilterExpressionGroup,u.H],encapsulation:2})}return SystemFilterBuilderFilterExpressionGroup})()},10220:(e,t,s)=>{"use strict";s.d(t,{A:()=>v});var i=s(54438),n=s(84341),l=s(83935),o=s(60177),a=s(30991),r=s(74052),d=s(29145),c=s(92482),u=s(26024),m=s(13957);function h(e,t){if(1&e){const e=i.RV6();i.j41(0,"system-input-integer",5),i.mxI("ngModelChange",(function(t){i.eBV(e);const s=i.XpG();return i.DH7(s.value,t)||(s.value=t),i.Njj(t)})),i.k0s()}if(2&e){const e=i.XpG();i.R50("ngModel",e.value)}}function g(e,t){if(1&e){const e=i.RV6();i.j41(0,"system-input-date",5),i.mxI("ngModelChange",(function(t){i.eBV(e);const s=i.XpG();return i.DH7(s.value,t)||(s.value=t),i.Njj(t)})),i.k0s()}if(2&e){const e=i.XpG();i.R50("ngModel",e.value)}}function p(e,t){if(1&e){const e=i.RV6();i.j41(0,"system-input-enum",6),i.mxI("ngModelChange",(function(t){i.eBV(e);const s=i.XpG();return i.DH7(s.value,t)||(s.value=t),i.Njj(t)})),i.k0s()}if(2&e){const e=i.XpG();i.Y8G("module",e.module)("field",e.field),i.R50("ngModel",e.value)}}function f(e,t){if(1&e){const e=i.RV6();i.j41(0,"system-input-multienum",6),i.mxI("ngModelChange",(function(t){i.eBV(e);const s=i.XpG();return i.DH7(s.value,t)||(s.value=t),i.Njj(t)})),i.k0s()}if(2&e){const e=i.XpG();i.Y8G("module",e.module)("field",e.field),i.R50("ngModel",e.value)}}function b(e,t){if(1&e){const e=i.RV6();i.j41(0,"system-input-relate",7),i.mxI("ngModelChange",(function(t){i.eBV(e);const s=i.XpG();return i.DH7(s.value,t)||(s.value=t),i.Njj(t)})),i.k0s()}if(2&e){const e=i.XpG();i.Y8G("module",e.relatedmodule),i.R50("ngModel",e.value)}}function y(e,t){if(1&e){const e=i.RV6();i.j41(0,"system-input-text",5),i.mxI("ngModelChange",(function(t){i.eBV(e);const s=i.XpG();return i.DH7(s.value,t)||(s.value=t),i.Njj(t)})),i.k0s()}if(2&e){const e=i.XpG();i.R50("ngModel",e.value)}}let v=(()=>{class SystemFilterBuilderFilterExpressionValue{constructor(e){this.metadata=e}get value(){return this._value}set value(e){switch(this._value=e,this.valueType){case"date":this.onChange(e.format("YYYY-MM-DD"));break;case"multienum":this.onChange(e.join(","));break;default:this.onChange(e)}}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}writeValue(e){switch(this._value=e,this.valueType){case"date":this._value=new moment(e);break;case"multienum":this._value=e?e.split(","):[];break;default:this._value=e}}get relatedmodule(){return this.metadata.getFieldDefs(this.module,this.field).module}static#e=this.ɵfac=function(e){return new(e||SystemFilterBuilderFilterExpressionValue)(i.rXU(l.yu))};static#t=this.ɵcmp=i.VBU({type:SystemFilterBuilderFilterExpressionValue,selectors:[["system-filter-builder-expression-value"]],inputs:{module:"module",field:"field",valueType:"valueType"},features:[i.Jv_([{provide:n.kq,useExisting:(0,i.Rfq)((()=>SystemFilterBuilderFilterExpressionValue)),multi:!0}])],decls:7,vars:6,consts:[[3,"ngSwitch"],[3,"ngModel","ngModelChange",4,"ngSwitchCase"],[3,"module","field","ngModel","ngModelChange",4,"ngSwitchCase"],[3,"module","ngModel","ngModelChange",4,"ngSwitchCase"],[3,"ngModel","ngModelChange",4,"ngSwitchDefault"],[3,"ngModel","ngModelChange"],[3,"module","field","ngModel","ngModelChange"],[3,"module","ngModel","ngModelChange"]],template:function(e,t){1&e&&(i.qex(0,0),i.DNE(1,h,1,1,"system-input-integer",1)(2,g,1,1,"system-input-date",1)(3,p,1,3,"system-input-enum",2)(4,f,1,3,"system-input-multienum",2)(5,b,1,2,"system-input-relate",3)(6,y,1,1,"system-input-text",4),i.bVm()),2&e&&(i.Y8G("ngSwitch",t.valueType),i.R7$(),i.Y8G("ngSwitchCase","integer"),i.R7$(),i.Y8G("ngSwitchCase","date"),i.R7$(),i.Y8G("ngSwitchCase","enum"),i.R7$(),i.Y8G("ngSwitchCase","multienum"),i.R7$(),i.Y8G("ngSwitchCase","relate"))},dependencies:[o.ux,o.e1,o.fG,n.BC,n.vS,a.H,r.E,d.v,c.W,u.M,m.$],encapsulation:2})}return SystemFilterBuilderFilterExpressionValue})()},51099:(e,t,s)=>{"use strict";s.d(t,{N:()=>g});var i=s(54438),n=s(49722),l=s(69904),o=s(83935),a=s(60177),r=s(84341),d=s(32062),c=s(10220);function u(e,t){if(1&e){const e=i.RV6();i.j41(0,"div",3)(1,"label",4),i.nrm(2,"system-label",5),i.k0s(),i.j41(3,"system-filter-builder-expression-value",6),i.mxI("ngModelChange",(function(t){i.eBV(e);const s=i.XpG(2);return i.DH7(s.filterexpression.filtervalue,t)||(s.filterexpression.filtervalue=t),i.Njj(t)})),i.k0s()()}if(2&e){const e=i.XpG(2);i.R7$(3),i.R50("ngModel",e.filterexpression.filtervalue),i.Y8G("valueType",e.value1)("module",e.module)("field",e.field)}}function m(e,t){if(1&e){const e=i.RV6();i.j41(0,"div",3)(1,"label",4),i.nrm(2,"system-label",5),i.k0s(),i.j41(3,"system-filter-builder-expression-value",6),i.mxI("ngModelChange",(function(t){i.eBV(e);const s=i.XpG(2);return i.DH7(s.filterexpression.filtervalueto,t)||(s.filterexpression.filtervalueto=t),i.Njj(t)})),i.k0s()()}if(2&e){const e=i.XpG(2);i.R7$(3),i.R50("ngModel",e.filterexpression.filtervalueto),i.Y8G("valueType",e.value2)("module",e.module)("field",e.field)}}function h(e,t){if(1&e&&(i.j41(0,"div",1),i.DNE(1,u,4,4,"div",2)(2,m,4,4,"div",2),i.k0s()),2&e){const e=i.XpG();i.R7$(),i.Y8G("ngIf",e.value1),i.R7$(),i.Y8G("ngIf",e.value2)}}let g=(()=>{class SystemFilterBuilderFilterExpressionValues{constructor(e,t,s){this.backend=e,this.language=t,this.metadata=s,this.filterexpression={}}ngOnChanges(e){}get value1(){return this.operators.find((e=>e.operator==this.operator)).value1}get value2(){return this.operators.find((e=>e.operator==this.operator)).value2}showValues(){return this.operator.value1||this.operator.value2}static#e=this.ɵfac=function(e){return new(e||SystemFilterBuilderFilterExpressionValues)(i.rXU(n.H),i.rXU(l.B),i.rXU(o.yu))};static#t=this.ɵcmp=i.VBU({type:SystemFilterBuilderFilterExpressionValues,selectors:[["system-filter-builder-expression-values"]],inputs:{module:"module",field:"field",operator:"operator",operators:"operators",filterexpression:"filterexpression"},features:[i.OA$],decls:1,vars:1,consts:[["class","slds-col",4,"ngIf"],[1,"slds-col"],["class","slds-form-element",4,"ngIf"],[1,"slds-form-element"],[1,"slds-form-element__label"],["label","LBL_VALUE"],[3,"ngModel","valueType","module","field","ngModelChange"]],template:function(e,t){1&e&&i.DNE(0,h,3,2,"div",0),2&e&&i.Y8G("ngIf",""!=t.operator&&t.value1)},dependencies:[a.bT,r.BC,r.vS,d.W,c.A],encapsulation:2})}return SystemFilterBuilderFilterExpressionValues})()},87285:(e,t,s)=>{"use strict";s.d(t,{Z:()=>h});var i=s(54438),n=s(69904),l=s(49722),o=s(53584),a=s(60177),r=s(84341),d=s(49380);function c(e,t){if(1&e){const e=i.RV6();i.j41(0,"li",11),i.bIt("click",(function(){const t=i.eBV(e).$implicit,s=i.XpG(2);return i.Njj(s.getAddressDetail(t.place_id))})),i.j41(1,"div",12)(2,"a",13),i.EFF(3),i.k0s()()()}if(2&e){const e=t.$implicit;i.R7$(3),i.JRh(e.description)}}const u=e=>({"slds-is-open":e});function m(e,t){if(1&e){const e=i.RV6();i.j41(0,"div",1)(1,"div",2)(2,"div",3)(3,"div",4)(4,"div",5)(5,"input",6),i.mxI("ngModelChange",(function(t){i.eBV(e);const s=i.XpG();return i.DH7(s.searchterm,t)||(s.searchterm=t),i.Njj(t)})),i.bIt("focus",(function(){i.eBV(e);const t=i.XpG();return i.Njj(t.onSearchFocus())})),i.k0s(),i.nrm(6,"system-custom-icon",7),i.k0s(),i.j41(7,"div",8)(8,"ul",9),i.DNE(9,c,4,1,"li",10),i.k0s()()()()()()}if(2&e){const e=i.XpG();i.R7$(3),i.Y8G("ngClass",i.eq3(6,u,e.displayAutocompleteResults)),i.R7$(2),i.Y8G("placeholder",e.language.getLabel("LBL_SEARCH_ADDRESS")),i.R50("ngModel",e.searchterm),i.Y8G("disabled",e.disabled),i.R7$(),i.Y8G("desaturate",!e.isSearching),i.R7$(3),i.Y8G("ngForOf",e.autocompleteResults)}}let h=(()=>{class SystemGooglePlacesAutocomplete{constructor(e,t,s,n,l,o){this.language=e,this.backend=t,this.configuration=s,this.elementref=n,this.cdRef=l,this.renderer=o,this.address=new i.bkB,this.disabled=!1,this.isenabled=!1,this.autocompletesearchterm="",this.autocompleteTimeout=void 0,this.autocompleteResults=[],this.autocompleteClickListener=void 0,this.displayAutocompleteResults=!1,this.isSearching=!1;let a=this.configuration.getCapabilityConfig("google_api");a.key&&""!=a.key&&(this.isenabled=!0)}get searchterm(){return this.autocompletesearchterm}set searchterm(e){this.autocompletesearchterm=e,this.autocompleteTimeout&&window.clearTimeout(this.autocompleteTimeout),this.autocompleteTimeout=window.setTimeout((()=>this.doAutocomplete()),500)}ngOnDestroy(){this.autocompleteClickListener&&this.autocompleteClickListener()}onSearchFocus(){this.autocompletesearchterm.length>1&&this.autocompleteResults.length>0&&this.openSearchResults()}openSearchResults(){this.displayAutocompleteResults=!0,this.autocompleteClickListener=this.renderer.listen("document","click",(e=>this.onClick(e))),this.cdRef.detectChanges()}onClick(e){this.elementref.nativeElement.contains(e.target)||this.closeSearchResutls()}closeSearchResutls(){this.autocompleteClickListener&&this.autocompleteClickListener(),this.displayAutocompleteResults=!1,this.cdRef.detectChanges()}doAutocomplete(){if(this.autocompletesearchterm.length>5){this.isSearching=!0;const e=encodeURIComponent(this.autocompletesearchterm);this.backend.getRequest("channels/groupware/gsuite/places/autocomplete/"+e).subscribe((e=>{e.predictions&&e.predictions.length>0?(this.autocompleteResults=e.predictions,this.openSearchResults(),this.isSearching=!1):(this.autocompleteResults=[],this.closeSearchResutls(),this.isSearching=!1)}),(e=>{this.isSearching=!1}))}else this.closeSearchResutls()}getAddressDetail(e){this.displayAutocompleteResults=!1,this.autocompletesearchterm="",this.backend.getRequest("channels/groupware/gsuite/places/"+e).subscribe((e=>{let t={street:e.address.street,street_name:e.address.street_name,street_number:e.address.street_number,city:e.address.city,district:e.address.district,postalcode:e.address.postalcode,state:e.address.state,country:e.address.country,latitude:parseFloat(e.address.location.lat),longitude:parseFloat(e.address.location.lng)};this.address.emit(t),this.autocompletesearchterm=e.formatted_address,this.cdRef.detectChanges()}))}static#e=this.ɵfac=function(e){return new(e||SystemGooglePlacesAutocomplete)(i.rXU(n.B),i.rXU(l.H),i.rXU(o.i),i.rXU(i.aKT),i.rXU(i.gRc),i.rXU(i.sFG))};static#t=this.ɵcmp=i.VBU({type:SystemGooglePlacesAutocomplete,selectors:[["system-googleplaces-autocomplete"]],inputs:{disabled:"disabled"},outputs:{address:"address"},decls:1,vars:1,consts:[["class","slds-form-element",4,"ngIf"],[1,"slds-form-element"],[1,"slds-form-element__control"],[1,"slds-combobox_container"],["role","combobox",1,"slds-combobox","slds-dropdown-trigger","slds-dropdown-trigger_click",3,"ngClass"],["role","none",1,"slds-combobox__form-element","slds-input-has-icon","slds-input-has-icon_right"],["type","text","autocomplete","new-password",1,"slds-input","slds-combobox__input",3,"placeholder","ngModel","disabled","ngModelChange","focus"],["icon","google","addclasses","slds-input__icon slds-input__icon--left",3,"desaturate"],["role","listbox",1,"slds-dropdown","slds-dropdown_length-with-icon-7","slds-dropdown_fluid"],["role","presentation",1,"slds-listbox","slds-listbox_vertical"],["class","slds-listbox__item","role","presentation",3,"click",4,"ngFor","ngForOf"],["role","presentation",1,"slds-listbox__item",3,"click"],[1,"slds-lookup__result-text","slds-p-around--x-small"],["href","javascript:void(0)"]],template:function(e,t){1&e&&i.DNE(0,m,10,8,"div",0),2&e&&i.Y8G("ngIf",t.isenabled)},dependencies:[a.YU,a.Sq,a.bT,r.me,r.BC,r.vS,d.k],encapsulation:2})}return SystemGooglePlacesAutocomplete})()},38045:(e,t,s)=>{"use strict";s.d(t,{P:()=>g});var i=s(54438),n=s(84341),l=s(69904),o=s(49722),a=s(53584),r=s(60177),d=s(49380);const c=["inputfield"];function u(e,t){if(1&e&&i.nrm(0,"system-custom-icon",11),2&e){const e=i.XpG();i.Y8G("desaturate",!e.isSearching)}}function m(e,t){if(1&e){const e=i.RV6();i.j41(0,"li",12),i.bIt("click",(function(){const t=i.eBV(e).$implicit,s=i.XpG();return i.Njj(s.getDetails(t))})),i.j41(1,"div",13)(2,"a",14),i.EFF(3),i.k0s()()()}if(2&e){const e=t.$implicit;i.R7$(3),i.Lme("",e.name,", ",e.formatted_address,"")}}const h=e=>({"slds-is-open":e});let g=(()=>{class SystemGooglePlacesSearch{constructor(e,t,s,n,l){this.language=e,this.backend=t,this.configuration=s,this.elementref=n,this.renderer=l,this.details=new i.bkB,this.isenabled=!1,this.autocompletesearchterm="",this.autocompleteTimeout=void 0,this.autocompleteResults=[],this.autocompleteClickListener=void 0,this.displayAutocompleteResults=!1,this.isSearching=!1,this.locationbias="ipbias ";let o=this.configuration.getCapabilityConfig("google_api");o.key&&""!=o.key&&(this.isenabled=!0),navigator.geolocation.getCurrentPosition((e=>{this.locationbias=`point:${e.coords.latitude},${e.coords.longitude}`})),this.elementref.nativeElement.focus=()=>{this.focus()}}focus(){setTimeout((()=>{this.inputfield.element.nativeElement.tabIndex||this.renderer.setAttribute(this.inputfield.element.nativeElement,"tabIndex","-1"),this.inputfield.element.nativeElement.focus()}))}get searchterm(){return this.autocompletesearchterm}set searchterm(e){this.autocompletesearchterm=e,this.isenabled&&(this.autocompleteTimeout&&window.clearTimeout(this.autocompleteTimeout),this.autocompleteTimeout=window.setTimeout((()=>this.doAutocomplete()),500))}get placeholder(){return this.isenabled?this.language.getLabel("LBL_SEARCH"):""}updateModel(){this.onChange(this.autocompletesearchterm)}onSearchFocus(){this.autocompletesearchterm.length>1&&this.autocompleteResults.length>0&&this.openSearchResults()}openSearchResults(){this.displayAutocompleteResults=!0,this.autocompleteClickListener=this.renderer.listen("document","click",(e=>this.onClick(e)))}onClick(e){this.elementref.nativeElement.contains(e.target)||this.closeSearchResutls()}closeSearchResutls(){this.autocompleteClickListener&&this.autocompleteClickListener(),this.displayAutocompleteResults=!1,this.autocompleteResults=[]}doAutocomplete(){if(this.autocompletesearchterm.length>3){this.isSearching=!0;const e=encodeURIComponent(this.autocompletesearchterm),t=encodeURIComponent(this.locationbias);this.backend.getRequest(`channels/groupware/gsuite/places/search/${e}/${t}`).subscribe((e=>{e.candidates&&e.candidates.length>0?(this.autocompleteResults=e.candidates,this.openSearchResults(),this.isSearching=!1):(this.autocompleteResults=[],this.closeSearchResutls(),this.isSearching=!1)}),(e=>{this.isSearching=!1}))}}getDetails(e){this.displayAutocompleteResults=!1,this.autocompleteResults=[],this.autocompletesearchterm=e.name;e.formatted_address;this.onChange(e.name),this.isSearching=!0,this.backend.getRequest("channels/groupware/gsuite/places/"+e.place_id).subscribe((e=>{this.details.emit({address:{street:e.address.street,street_name:e.address.street_name,street_number:e.address.street_number,city:e.address.city,district:e.address.district,postalcode:e.address.postalcode,state:e.address.state,country:e.address.country,latitude:parseFloat(e.address.location.lat),longitude:parseFloat(e.address.location.lng)},formatted_phone_number:e.formatted_phone_number,formatted_address:e.formatted_address,international_phone_number:e.international_phone_number,website:e.website,name:e.name}),this.isSearching=!1}),(e=>{this.isSearching=!1}))}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}writeValue(e){this.autocompletesearchterm=e||""}static#e=this.ɵfac=function(e){return new(e||SystemGooglePlacesSearch)(i.rXU(l.B),i.rXU(o.H),i.rXU(a.i),i.rXU(i.aKT),i.rXU(i.sFG))};static#t=this.ɵcmp=i.VBU({type:SystemGooglePlacesSearch,selectors:[["system-googleplaces-search"]],viewQuery:function(e,t){if(1&e&&i.GBs(c,7,i.c1b),2&e){let e;i.mGM(e=i.lsd())&&(t.inputfield=e.first)}},hostAttrs:["focus","focus()"],outputs:{details:"details"},features:[i.Jv_([{provide:n.kq,useExisting:(0,i.Rfq)((()=>SystemGooglePlacesSearch)),multi:!0}])],decls:11,vars:7,consts:[[1,"slds-form-element"],[1,"slds-form-element__control"],[1,"slds-combobox_container"],["role","combobox",1,"slds-combobox","slds-dropdown-trigger","slds-dropdown-trigger_click",3,"ngClass"],["role","none",1,"slds-combobox__form-element","slds-input-has-icon","slds-input-has-icon_right"],["type","text",1,"slds-input","slds-combobox__input",3,"placeholder","ngModel","ngModelChange","focus","blur"],["inputfield",""],["icon","google","addclasses","slds-input__icon slds-input__icon--left",3,"desaturate",4,"ngIf"],["role","listbox",1,"slds-dropdown","slds-dropdown_length-with-icon-7","slds-dropdown_fluid"],["role","presentation",1,"slds-listbox","slds-listbox_vertical"],["class","slds-listbox__item","role","presentation",3,"click",4,"ngFor","ngForOf"],["icon","google","addclasses","slds-input__icon slds-input__icon--left",3,"desaturate"],["role","presentation",1,"slds-listbox__item",3,"click"],[1,"slds-lookup__result-text","slds-p-around--x-small"],["href","javascript:void(0)"]],template:function(e,t){1&e&&(i.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"input",5,6),i.mxI("ngModelChange",(function(e){return i.DH7(t.searchterm,e)||(t.searchterm=e),e})),i.bIt("focus",(function(){return t.onSearchFocus()}))("blur",(function(){return t.updateModel()})),i.k0s(),i.DNE(7,u,1,1,"system-custom-icon",7),i.k0s(),i.j41(8,"div",8)(9,"ul",9),i.DNE(10,m,4,2,"li",10),i.k0s()()()()()()),2&e&&(i.R7$(3),i.Y8G("ngClass",i.eq3(5,h,t.displayAutocompleteResults)),i.R7$(2),i.Y8G("placeholder",t.placeholder),i.R50("ngModel",t.searchterm),i.R7$(2),i.Y8G("ngIf",t.isenabled),i.R7$(3),i.Y8G("ngForOf",t.autocompleteResults))},dependencies:[r.YU,r.Sq,r.bT,n.me,n.BC,n.vS,d.k],encapsulation:2})}return SystemGooglePlacesSearch})()},73978:(e,t,s)=>{"use strict";s.d(t,{U:()=>w});var i=s(54438),n=s(84341),l=s(60177),o=s(4466),a=s(96697),r=s(50531),d=s(83935),c=s(69904),u=s(53584),m=s(35911),h=s(13562),g=s(49722),p=s(32130),f=s(25863);const b=["htmleditor"];function y(e,t){if(1&e){const e=i.RV6();i.j41(0,"button",29),i.bIt("click",(function(){i.eBV(e);const t=i.XpG();return i.Njj(t.save$.emit(t._html))})),i.nrm(1,"system-button-icon",30),i.k0s()}if(2&e){const e=i.XpG();i.Y8G("title",e.language.getLabel("LBL_SAVE"))}}function v(e,t){if(1&e){const e=i.RV6();i.j41(0,"ul",5)(1,"li")(2,"button",19),i.bIt("click",(function(){i.eBV(e);const t=i.XpG();return i.Njj(t.executeCommand("undo"))})),i.nrm(3,"system-button-icon",31),i.j41(4,"span",32),i.EFF(5,"undo"),i.k0s()()(),i.j41(6,"li")(7,"button",19),i.bIt("click",(function(){i.eBV(e);const t=i.XpG();return i.Njj(t.executeCommand("redo"))})),i.nrm(8,"system-button-icon",33),i.j41(9,"span",32),i.EFF(10,"redo"),i.k0s()()()()}if(2&e){const e=i.XpG();i.R7$(2),i.Y8G("title",e.language.getLabel("LBL_UNDO")),i.R7$(5),i.Y8G("title",e.language.getLabel("LBL_REDO"))}}function _(e,t){if(1&e){const e=i.RV6();i.j41(0,"div",34)(1,"div",35)(2,"div",36)(3,"div",37)(4,"div",38)(5,"select",39),i.mxI("ngModelChange",(function(t){i.eBV(e);const s=i.XpG();return i.DH7(s.block,t)||(s.block=t),i.Njj(t)})),i.bIt("change",(function(){i.eBV(e);const t=i.XpG();return i.Njj(t.executeCommand(t.block))})),i.j41(6,"option",40)(7,"h1"),i.EFF(8,"Heading 1"),i.k0s()(),i.j41(9,"option",41)(10,"h2"),i.EFF(11,"Heading 2"),i.k0s()(),i.j41(12,"option",42)(13,"h3"),i.EFF(14,"Heading 3"),i.k0s()(),i.j41(15,"option",43),i.EFF(16,"Heading 4"),i.k0s(),i.j41(17,"option",44),i.EFF(18,"Heading 5"),i.k0s(),i.j41(19,"option",45),i.EFF(20,"Heading 6"),i.k0s(),i.j41(21,"option",46),i.EFF(22,"Paragraph"),i.k0s(),i.j41(23,"option",47),i.EFF(24,"Predefined"),i.k0s(),i.j41(25,"option",48),i.EFF(26,"Standard"),i.k0s(),i.j41(27,"option",49),i.EFF(28,"Default"),i.k0s()()()()()()()}if(2&e){const e=i.XpG();i.R7$(5),i.R50("ngModel",e.block)}}function k(e,t){if(1&e){const e=i.RV6();i.j41(0,"li")(1,"button",19),i.bIt("click",(function(){i.eBV(e);const t=i.XpG(2);return i.Njj(t.executeCommand("openMediaFilePicker"))})),i.nrm(2,"system-button-icon",53),i.k0s()()}if(2&e){const e=i.XpG(2);i.R7$(),i.Y8G("title",e.language.getLabel("LBL_NEW_IMAGE"))}}function R(e,t){if(1&e){const e=i.RV6();i.j41(0,"ul",5)(1,"li")(2,"button",19),i.bIt("click",(function(){i.eBV(e);const t=i.XpG();return i.Njj(t.executeCommand("insertImage"))})),i.nrm(3,"system-button-icon",50),i.k0s()(),i.DNE(4,k,3,1,"li",22),i.j41(5,"li")(6,"button",19),i.bIt("click",(function(){i.eBV(e);const t=i.XpG();return i.Njj(t.addVideo())})),i.nrm(7,"system-button-icon",51),i.k0s()(),i.j41(8,"li")(9,"button",19),i.bIt("click",(function(){i.eBV(e);const t=i.XpG();return i.Njj(t.addCodeSnippet())})),i.nrm(10,"system-button-icon",52),i.k0s()()()}if(2&e){const e=i.XpG();i.R7$(2),i.Y8G("title",e.language.getLabel("LBL_NEW_IMAGE")),i.R7$(2),i.Y8G("ngIf",e.useMedialFile),i.R7$(2),i.Y8G("title",e.language.getLabel("LBL_ADD_VIDEO")),i.R7$(3),i.Y8G("title",e.language.getLabel("LBL_ADD_CODE_SNIPPET"))}}function I(e,t){if(1&e){const e=i.RV6();i.j41(0,"li")(1,"button",19),i.bIt("click",(function(){i.eBV(e);const t=i.XpG();return i.Njj(t.executeCommand("openTemplateVariableHelper"))})),i.nrm(2,"system-button-icon",54),i.k0s()()}if(2&e){const e=i.XpG();i.R7$(),i.Y8G("title",e.language.getLabel("LBL_TEMPLATE_VARIABLE_HELPER"))}}function x(e,t){if(1&e){const e=i.RV6();i.j41(0,"li")(1,"button",19),i.bIt("click",(function(){i.eBV(e);const t=i.XpG();return i.Njj(t.openTextSnippetModal())})),i.nrm(2,"system-button-icon",55),i.k0s()()}if(2&e){const e=i.XpG();i.R7$(),i.Y8G("title",e.language.getLabel("LBL_INSERT_TEXT_SNIPPET"))}}function j(e,t){if(1&e){const e=i.RV6();i.j41(0,"ul",5)(1,"li")(2,"button",19),i.bIt("click",(function(){i.eBV(e);const t=i.XpG();return i.Njj(t.executeCommand("openSourceEditor"))})),i.nrm(3,"system-button-icon",56),i.k0s()(),i.j41(4,"li")(5,"button",19),i.bIt("click",(function(){i.eBV(e);const t=i.XpG();return i.Njj(t.executeCommand("toggleFullscreen"))})),i.nrm(6,"system-button-icon",57),i.k0s()()()}if(2&e){const e=i.XpG();i.R7$(2),i.Y8G("title",e.language.getLabel("LBL_SOURCE_EDITOR")),i.R7$(3),i.Y8G("title",e.language.getLabel("LBL_EXPAND")),i.R7$(),i.Y8G("icon",e.expandIcon)}}const G=e=>({"slds-active":e}),C=["*"];let w=(()=>{class SystemHtmlEditor{constructor(e,t,s,n,l,o,a,r,d,c,u,m){this.modal=e,this.renderer=t,this.metadata=s,this.editorService=n,this._document=l,this.elementRef=o,this.language=a,this.viewContainerRef=r,this.configurationService=d,this.model=c,this.helper=u,this.backend=m,this.extendedmode=!0,this.useMedialFile=!1,this._html="",this.isActive=!1,this.modalOpen=!1,this.isExpanded=!1,this.block="default",this.fontName="Tilium Web",this.fontSize="5",this.tagMap={BLOCKQUOTE:"indent",A:"link"},this.save$=new i.bkB,this.select=["H1","H2","H3","H4","H5","H6","P","PRE","DIV"],this.isLoading=!1}get useTemplateVariableHelper(){return this.model?.module in{OutputTemplates:!0,EmailTemplates:!0,CampaignTasks:!0,LandingPages:!0,Mailboxes:!0,TextSnippets:!0}}get useTextSnippet(){return this.metadata.checkModuleAcl("TextSnippets","list")&&this.metadata.checkModuleAcl("TextSnippets","view")}get expandIcon(){return this.isExpanded?"contract_alt":"expand_alt"}get innerHeight(){return this.innerheight?this.innerheight:"250"}get richTextStyle(){return this.isExpanded?{height:"100vh",resize:"none",position:"fixed"}:{height:+this.innerHeight+50+"px"}}ngOnInit(){this.handleKeyboardShortcuts(),this.editorService.editorContainer=this.htmlEditor.element.nativeElement}ngOnDestroy(){this.clickListener&&this.clickListener(),this.keydownListener&&this.keydownListener()}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}writeValue(e){this._html=e||"",this.renderer.setProperty(this.htmlEditor.element.nativeElement,"innerHTML",this._html)}executeCommand(e){switch(e){case"openSourceEditor":this.openSourceEditor();break;case"toggleFullscreen":this.isExpanded=!this.isExpanded;break;case"openMediaFilePicker":this.openMediaFilePicker();break;case"insertImage":this.insertImage();break;case"openTemplateVariableHelper":this.openTemplateVariableHelper();break;default:this.isActive&&""!=e&&this.editorService.executeCommand(e),this.exec()}}onEditorClick(e){this.isActive||(this.isActive=!0,this.focusEditor(),this.clickListener=this.renderer.listen("document","click",(e=>this.onDocumentClick(e)))),e.stopPropagation()}onDocumentClick(e){this.modalOpen||this.elementRef.nativeElement.contains(e.target)||(this.isActive=!1,this.clickListener())}onContentChange(e){"function"==typeof this.onChange&&this.onChange(e),this._html=e}exec(){let e;window.getSelection&&(e=window.getSelection());let t=e.focusNode;const s=[];for(;t&&"editor"!==t.id;)s.unshift(t),t=t.parentNode;this.triggerBlocks(s)}insertImage(){this.editorService.saveSelection(),this.modal.input(this.language.getLabel("LBL_IMAGE_LINK",this.language.getLabel("LBL_IMAGE"))).pipe((0,a.s)(1)).subscribe((e=>{e&&(this.focusEditor(),this.editorService.restoreSelection(),this.editorService.insertImage(e,this.htmlEditor.element.nativeElement),this.onContentChange(this.htmlEditor.element.nativeElement.innerHTML))}))}openMediaFilePicker(){this.editorService.saveSelection(),this.modalOpen=!0,this.modal.openModal("MediaFilePicker").pipe((0,a.s)(1)).subscribe((e=>{e.instance.answer.subscribe((e=>{if(e)if(e.upload)this.modal.openModal("MediaFileUploader").subscribe((e=>{e.instance.answer.subscribe((e=>{if(e){const t=this.configurationService.getCapabilityConfig("mediafiles");this.focusEditor(),this.editorService.restoreSelection(),this.editorService.insertImage(t.public_url+e,this.htmlEditor.element.nativeElement),this.onContentChange(this.htmlEditor.element.nativeElement.innerHTML)}this.modalOpen=!1}))}));else{if(e.id){const t=this.configurationService.getCapabilityConfig("mediafiles");this.focusEditor(),this.editorService.restoreSelection(),this.editorService.insertImage(t.public_url+e.id,this.htmlEditor.element.nativeElement),this.onContentChange(this.htmlEditor.element.nativeElement.innerHTML)}this.modalOpen=!1}}))}))}openSourceEditor(){this.modal.openModal("SystemRichTextSourceModal",!0,this.viewContainerRef.injector).pipe((0,a.s)(1)).subscribe((e=>{e.instance._html=this._html,e.instance.html.subscribe((e=>{this._html=e,"function"==typeof this.onChange&&this.onChange(e),this.renderer.setProperty(this.htmlEditor.element.nativeElement,"innerHTML",this._html)}))}))}commandIsActive(e){return this.isActive&&this._document.queryCommandState(e)}triggerBlocks(e){if(!this.isActive)return;let t=!1;this.select.forEach((s=>{const i=e.find((e=>e.nodeName===s));void 0===i||s!==i.nodeName&&"code"!=i.nodeName?!1===t&&(this.block="default"):!1===t&&(this.block=i.nodeName.toLowerCase(),t=!0)})),t=!1}insertAnchor(){this.editorService.selectedText=this.getSelectedText(),this.editorService.saveSelection();let e=null;e="A"===this.editorService.savedSelectionParentElement.nodeName?this.editorService.savedSelectionParentElement:this.editorService.savedSelectionParentElement.closest("a"),this.modal.openModal("SystemRichTextLink",!0).subscribe((t=>{t.instance.text=e?.text??this.editorService.selectedText,t.instance.parent=this.model,t.instance.editorService=this.editorService,e&&(t.instance.alterMode=!0,t.instance.url=e.href,t.instance.trackingId=e.dataset.trackinglink,t.instance.trackByMethod=e.dataset.trackinglink?"id":"trackinglink"in e.dataset?"url":void 0,t.instance.marketingAction=e.dataset.marketingaction),t.instance.response.subscribe({next:t=>{if(t){if(e)e.href=t.url,"conv"===t.linkType&&t.trackByMethod?e.dataset.trackinglink=t.trackingId:delete e.dataset.trackinglink,t.marketingAction?e.dataset.marketingaction=t.marketingAction:delete e.dataset.marketingaction;else{t.text||(t.text=t.url),this.editorService.restoreSelection();let e=t.text;this.editorService.selectedText===t.text&&(e=this.editorService.selectedHtml);let s={};"conv"===t.linkType&&t.trackByMethod&&(s.trackinglink=t.trackingId),"mark"===t.linkType&&(s.marketingaction=t.marketingAction),this.editorService.insertAnchor(t.url,e,s)}this.onContentChange(this.htmlEditor.element.nativeElement.innerHTML)}}})}))}removeAnchor(){let e;this.editorService.selectedText=this.getSelectedText(),this.editorService.saveSelection(),e="A"===this.editorService.savedSelectionParentElement.nodeName?this.editorService.savedSelectionParentElement:this.editorService.savedSelectionParentElement.closest("a"),e&&(e.outerHTML=e.innerHTML,this.onContentChange(this.htmlEditor.element.nativeElement.innerHTML))}addVideo(){this.isActive&&(this.editorService.saveSelection(),this.modal.input("Add Video","Insert Video URL").pipe((0,a.s)(1)).subscribe((e=>{if(!e||0==e.length)return;this.focusEditor(),this.editorService.restoreSelection();let t=/https?:\/\/(?:www\.)?vimeo.com\/(?:channels\/(?:\w+\/)?|groups\/([^\/]*)\/videos\/|album\/(\d+)\/video\/|)(\d+)(?:$|\/|\?)/,s=/^.*((youtu.be\/)|(v\/)|(\/u\/\w\/)|(embed\/)|(watch\?))\??v?=?([^#\&\?]*).*/;e.match(t)&&(e="https://player.vimeo.com/video/"+e.match(t)[3]),e.match(s)&&(e="https://www.youtube.com/embed/"+e.match(s)[7]);let i=`<iframe src="${e}" frameborder="0" allow="encrypted-media" allowfullscreen></iframe>`;this._document.execCommand("insertHTML",!1,i)})))}getSelectedText(){return window.getSelection?window.getSelection().toString():this._document.selection&&"Control"!=this._document.selection.type?this._document.selection.createRange().text:void 0}insertColor(e,t){this.editorService.insertColor(e,t)}setFontName(e){this.editorService.setFontName(e)}setFontSize(e){this.editorService.setFontSize(e)}onFileChanged(e){}setCustomClass(e){}encodeHtml(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}addCodeSnippet(){if(!this.isActive)return;let e=`<br><pre style="background-color: #eee;border-radius: .2rem; border:1px solid #ccc; padding: .5rem"><code>${this.encodeHtml(this.getSelectedText())||"&nbsp;"}</code></pre><br>`;this._document.execCommand("insertHTML",!1,e)}onPaste(e){if("CODE"==e.target.nodeName){e.preventDefault();let t=(e.originalEvent||e).clipboardData.getData("text/plain");document.execCommand("insertHTML",!1,this.encodeHtml(t))}}handleKeyboardShortcuts(){this.keydownListener=this.renderer.listen("document","keydown",(e=>{(window.navigator.platform.match("Mac")?e.metaKey:e.ctrlKey)&&"s"==e.key.toLowerCase()&&(e.preventDefault(),this.save$.emit(this._html))}))}focusEditor(){this.htmlEditor.element.nativeElement.focus()}openTemplateVariableHelper(){this.isActive&&(this.editorService.saveSelection(),this.modalOpen=!0,this.modal.openModal("OutputTemplatesVariableHelper",null,this.viewContainerRef.injector).pipe((0,a.s)(1)).subscribe((e=>{e.instance.response.pipe((0,a.s)(1)).subscribe((e=>{this.focusEditor(),this.editorService.restoreSelection(),this._document.execCommand("insertText",!1,"{"+e+"}"),this.modalOpen=!1}))})))}openTextSnippetModal(){if(!this.isActive)return;const e=this.metadata.getComponentConfig("SystemHtmlEditor","TextSnippets");this.editorService.saveSelection(),this.modalOpen=!0,this.modal.openModal("ObjectModalModuleLookup",null,this.viewContainerRef.injector).pipe((0,a.s)(1)).subscribe((t=>{t.instance.module="TextSnippets",t.instance.multiselect=!1,this.model&&(t.instance.modulefilter=e.textSnippetsModuleFilter,t.instance.filtercontext={module:this.model.module}),t.instance.selectedItems.pipe((0,a.s)(1)).subscribe((e=>{this.isLoading=!0;const t=this.model?{module:this.model.module,modelData:this.model.utils.spiceModel2backend(this.model.module,this.model.data)}:null;this.backend.postRequest(`module/TextSnippets/${e[0].id}/liveCompile`,null,t).pipe((0,a.s)(1)).subscribe({next:e=>{this.focusEditor(),this.editorService.restoreSelection(),this._document.execCommand("insertHTML",!1,e.html),this.modalOpen=!1,this.isLoading=!1},error:()=>{this.model.toast.sendToast("ERR_FAILED_TO_EXECUTE","error"),this.modalOpen=!1,this.isLoading=!1}})}))}))}getHtmlFromSelection(){let e,t=window.getSelection();t.getRangeAt?e=t.getRangeAt(0):(e=document.createRange(),e.setStart(t.anchorNode,t.anchorOffset),e.setEnd(t.focusNode,t.focusOffset));let s=e.cloneContents(),i=document.createElement("div");return i.appendChild(s),i.innerHTML}static#e=this.ɵfac=function(e){return new(e||SystemHtmlEditor)(i.rXU(r.y),i.rXU(i.sFG),i.rXU(d.yu),i.rXU(o.Q),i.rXU(l.qQ),i.rXU(i.aKT),i.rXU(c.B),i.rXU(i.c1b),i.rXU(u.i),i.rXU(m.g,8),i.rXU(h.d),i.rXU(g.H))};static#t=this.ɵcmp=i.VBU({type:SystemHtmlEditor,selectors:[["system-html-editor"]],viewQuery:function(e,t){if(1&e&&i.GBs(b,7,i.c1b),2&e){let e;i.mGM(e=i.lsd())&&(t.htmlEditor=e.first)}},inputs:{extendedmode:"extendedmode",innerheight:"innerheight",useMedialFile:"useMedialFile"},outputs:{save$:"save$"},features:[i.Jv_([{provide:n.kq,useExisting:(0,i.Rfq)((()=>SystemHtmlEditor)),multi:!0},o.Q])],ngContentSelectors:C,decls:67,vars:61,consts:[[1,"slds-rich-text-editor","slds-grid","slds-grid_vertical","slds-nowrap","slds-grid","slds-grid--vertical","slds-theme--default",2,"top","0","right","0","left","0","bottom","0","z-index","9999",3,"system-overlay-loading-spinner","ngStyle","click"],["role","toolbar",1,"slds-rich-text-editor__toolbar","slds-shrink-none"],["class","slds-button slds-button_icon slds-button_icon-border-filled slds-m-right--xx-small","tabindex","-1",3,"title","click",4,"ngIf"],["class","slds-button-group-list",4,"ngIf"],["class","slds-grid slds-rich-text-editor__spacing-wrapper","role","group",4,"ngIf"],[1,"slds-button-group-list"],["tabindex","-1",1,"slds-button","slds-button_icon","slds-button_icon-border-filled",3,"title","ngClass","click"],["icon","bold"],["icon","italic"],["icon","underline"],["icon","strikethrough"],["icon","richtextbulletedlist"],["icon","richtextnumberedlist"],["icon","richtextindent"],["icon","richtextoutdent"],["icon","left_align_text"],["icon","center_align_text"],["icon","right_align_text"],["icon","justify_text"],["tabindex","-1",1,"slds-button","slds-button_icon","slds-button_icon-border-filled",3,"title","click"],["icon","link"],["icon","remove_link"],[4,"ngIf"],["icon","remove_formatting"],[1,"slds-button-group-list","slds-grid","slds-grid--align-end","slds-grow"],[1,"slds-rich-text-editor__textarea","slds-grid","slds-grow",2,"min-height","0"],[1,"slds-rich-text-area__content","slds-text-color_weak","slds-grow","slds-height_full",2,"min-height","100%"],["tabindex","0",2,"height","100%","cursor","text",3,"click","keyup","paste","input"],["htmleditor",""],["tabindex","-1",1,"slds-button","slds-button_icon","slds-button_icon-border-filled","slds-m-right--xx-small",3,"title","click"],["icon","save"],["icon","undo"],[1,"slds-assistive-text"],["icon","redo"],["role","group",1,"slds-grid","slds-rich-text-editor__spacing-wrapper"],[1,"slds-rich-text-editor__select"],[1,"slds-form-element"],[1,"slds-form-element__control"],[1,"slds-select_container"],[1,"slds-select",3,"ngModel","ngModelChange","change"],["value","h1"],["value","h2"],["value","h3"],["value","h4"],["value","h5"],["value","h6"],["value","p"],["value","pre"],["value","div"],["value","default"],["icon","image"],["icon","video"],["icon","snippet"],["icon","ad_set"],["icon","variable"],["icon","quick_text"],["icon","insert_tag_field"],[3,"icon"]],template:function(e,t){if(1&e){const e=i.RV6();i.NAR(),i.j41(0,"div",0),i.bIt("click",(function(e){return t.onEditorClick(e)})),i.j41(1,"div",1),i.DNE(2,y,2,1,"button",2)(3,v,11,2,"ul",3)(4,_,29,1,"div",4),i.j41(5,"ul",5)(6,"li")(7,"button",6),i.bIt("click",(function(){return t.executeCommand("bold")})),i.nrm(8,"system-button-icon",7),i.k0s()(),i.j41(9,"li")(10,"button",6),i.bIt("click",(function(){return t.executeCommand("italic")})),i.nrm(11,"system-button-icon",8),i.k0s()(),i.j41(12,"li")(13,"button",6),i.bIt("click",(function(){return t.executeCommand("underline")})),i.nrm(14,"system-button-icon",9),i.k0s()(),i.j41(15,"li")(16,"button",6),i.bIt("click",(function(){return t.executeCommand("strikethrough")})),i.nrm(17,"system-button-icon",10),i.k0s()()(),i.j41(18,"ul",5)(19,"li")(20,"button",6),i.bIt("click",(function(){return t.executeCommand("insertUnorderedList")})),i.nrm(21,"system-button-icon",11),i.k0s()(),i.j41(22,"li")(23,"button",6),i.bIt("click",(function(){return t.executeCommand("insertOrderedList")})),i.nrm(24,"system-button-icon",12),i.k0s()()(),i.j41(25,"ul",5)(26,"li")(27,"button",6),i.bIt("click",(function(){return t.executeCommand("indent")})),i.nrm(28,"system-button-icon",13),i.k0s()(),i.j41(29,"li")(30,"button",6),i.bIt("click",(function(){return t.executeCommand("outdent")})),i.nrm(31,"system-button-icon",14),i.k0s()()(),i.j41(32,"ul",5)(33,"li")(34,"button",6),i.bIt("click",(function(){return t.executeCommand("justifyLeft")})),i.nrm(35,"system-button-icon",15),i.k0s()(),i.j41(36,"li")(37,"button",6),i.bIt("click",(function(){return t.executeCommand("justifyCenter")})),i.nrm(38,"system-button-icon",16),i.k0s()(),i.j41(39,"li")(40,"button",6),i.bIt("click",(function(){return t.executeCommand("justifyRight")})),i.nrm(41,"system-button-icon",17),i.k0s()(),i.j41(42,"li")(43,"button",6),i.bIt("click",(function(){return t.executeCommand("justifyFull")})),i.nrm(44,"system-button-icon",18),i.k0s()()(),i.j41(45,"ul",5)(46,"li")(47,"button",19),i.bIt("click",(function(){return t.insertAnchor()})),i.nrm(48,"system-button-icon",20),i.k0s()(),i.j41(49,"li")(50,"button",19),i.bIt("click",(function(){return t.removeAnchor()})),i.nrm(51,"system-button-icon",21),i.k0s()()(),i.DNE(52,R,11,4,"ul",3),i.j41(53,"ul",5),i.DNE(54,I,3,1,"li",22)(55,x,3,1,"li",22),i.k0s(),i.j41(56,"ul",5)(57,"li")(58,"button",19),i.bIt("click",(function(){return t.executeCommand("removeFormat")})),i.nrm(59,"system-button-icon",23),i.k0s()()(),i.DNE(60,j,7,3,"ul",3),i.j41(61,"ul",24),i.SdG(62),i.k0s()(),i.j41(63,"div",25)(64,"div",26)(65,"div",27,28),i.bIt("click",(function(){return t.exec()}))("keyup",(function(){return t.exec()}))("paste",(function(e){return t.onPaste(e)}))("input",(function(){i.eBV(e);const s=i.sdS(66);return i.Njj(t.onContentChange(s.innerHTML))})),i.k0s()()()()}2&e&&(i.Y8G("system-overlay-loading-spinner",t.isLoading)("ngStyle",t.richTextStyle),i.R7$(2),i.Y8G("ngIf",t.extendedmode),i.R7$(),i.Y8G("ngIf",t.extendedmode),i.R7$(),i.Y8G("ngIf",t.extendedmode),i.R7$(3),i.Y8G("title",t.language.getLabel("LBL_BOLD"))("ngClass",i.eq3(37,G,t.commandIsActive("bold"))),i.R7$(3),i.Y8G("title",t.language.getLabel("LBL_ITALIC"))("ngClass",i.eq3(39,G,t.commandIsActive("italic"))),i.R7$(3),i.Y8G("title",t.language.getLabel("LBL_UNDERLINE"))("ngClass",i.eq3(41,G,t.commandIsActive("underline"))),i.R7$(3),i.Y8G("title",t.language.getLabel("LBL_STRIKETHROUGH"))("ngClass",i.eq3(43,G,t.commandIsActive("strikethrough"))),i.R7$(4),i.Y8G("title",t.language.getLabel("LBL_BULLETED_LIST"))("ngClass",i.eq3(45,G,t.commandIsActive("insertUnorderedList"))),i.R7$(3),i.Y8G("title",t.language.getLabel("LBL_NUMBERED_LIST"))("ngClass",i.eq3(47,G,t.commandIsActive("insertOrderedList"))),i.R7$(4),i.Y8G("title",t.language.getLabel("LBL_TEXT_INDENT"))("ngClass",i.eq3(49,G,t.commandIsActive("indent"))),i.R7$(3),i.Y8G("title",t.language.getLabel("LBL_TEXT_OUTDENT"))("ngClass",i.eq3(51,G,t.commandIsActive("otdent"))),i.R7$(4),i.Y8G("title",t.language.getLabel("LBL_LEFT_ALIGN"))("ngClass",i.eq3(53,G,t.commandIsActive("justifyLeft"))),i.R7$(3),i.Y8G("title",t.language.getLabel("LBL_CENTER_ALIGN"))("ngClass",i.eq3(55,G,t.commandIsActive("justifyCenter"))),i.R7$(3),i.Y8G("title",t.language.getLabel("LBL_RIGHT_ALIGN"))("ngClass",i.eq3(57,G,t.commandIsActive("justifyRight"))),i.R7$(3),i.Y8G("title",t.language.getLabel("LBL_ALIGN_TEXT"))("ngClass",i.eq3(59,G,t.commandIsActive("justifyFull"))),i.R7$(4),i.Y8G("title",t.language.getLabel("LBL_LINK")),i.R7$(3),i.Y8G("title",t.language.getLabel("LBL_REMOVE_LINK")),i.R7$(2),i.Y8G("ngIf",t.extendedmode),i.R7$(2),i.Y8G("ngIf",t.useTemplateVariableHelper),i.R7$(),i.Y8G("ngIf",t.useTextSnippet),i.R7$(3),i.Y8G("title",t.language.getLabel("LBL_REMOVE_FORMATTING")),i.R7$(2),i.Y8G("ngIf",t.extendedmode),i.R7$(5),i.BMQ("contenteditable",t.isActive))},dependencies:[p.M,l.YU,l.bT,l.B3,n.xH,n.y7,n.wz,n.BC,n.vS,f.t],encapsulation:2})}return SystemHtmlEditor})()},68823:(e,t,s)=>{"use strict";s.d(t,{J:()=>o});var i=s(54438),n=s(83935),l=s(60177);let o=(()=>{class SystemIcon{constructor(e){this.metadata=e,this.module="",this.icon="",this.size="",this.sprite="standard",this.addclasses="",this.divClass="slds-media__figure"}getSizeClass(){return this.size?"slds-icon--"+this.size:""}getSvgHRef(){return"./vendor/sldassets/icons/"+this.getSprite()+"-sprite/svg/symbols.svg#"+this.getIcon()}getIconClass(){switch(this.sprite){case"standard":case"action":case"custom":return"slds-icon slds-icon_container"+(this.size?" slds-icon--"+this.size:"")+" slds-icon-"+this.getSprite()+"-"+this.getIcon().replace(/_/g,"-")+" "+this.addclasses;default:return"slds-icon slds-icon_container"+(this.size?" slds-icon--"+this.size:"")+" slds-icon-text-default "+this.addclasses}}getIcon(){if(this.icon)return this.icon.indexOf(":")>0?this.icon.split(":")[1]:this.icon;if(this.module&&this.metadata.getModuleIcon(this.module)){let e=this.metadata.getModuleIcon(this.module);return e.indexOf(":")>0?e.split(":")[1]:e}return"empty"}getSprite(){return this.icon&&this.icon.indexOf(":")>0?this.icon.split(":")[0]:this.module&&this.metadata.getModuleIcon(this.module)&&this.metadata.getModuleIcon(this.module).indexOf(":")>0?this.metadata.getModuleIcon(this.module).split(":")[0]:this.sprite}static#e=this.ɵfac=function(e){return new(e||SystemIcon)(i.rXU(n.yu))};static#t=this.ɵcmp=i.VBU({type:SystemIcon,selectors:[["system-icon"]],inputs:{module:"module",icon:"icon",size:"size",sprite:"sprite",addclasses:"addclasses",divClass:"divClass"},decls:3,vars:3,consts:[[3,"ngClass"],["aria-hidden","true",3,"ngClass"]],template:function(e,t){1&e&&(i.j41(0,"div",0),i.qSk(),i.j41(1,"svg",1),i.nrm(2,"use"),i.k0s()()),2&e&&(i.Y8G("ngClass",t.divClass),i.R7$(),i.Y8G("ngClass",t.getIconClass()),i.R7$(),i.BMQ("href",t.getSvgHRef(),null,"xlink"))},dependencies:[l.YU],encapsulation:2})}return SystemIcon})()},59851:(e,t,s)=>{"use strict";s.d(t,{N:()=>h});var i=s(54438),n=s(83935),l=s(60177),o=s(49380),a=s(32062);const r=(e,t)=>({"slds-nubbin_top-left":e,"slds-nubbin_bottom-left":t}),d=(e,t,s)=>({top:e,left:t,"max-width":s}),c=(e,t,s)=>({bottom:e,left:t,"max-width":s});function u(e,t){if(1&e&&(i.j41(0,"div",5)(1,"div",6)(2,"span",7),i.nrm(3,"system-label",8),i.k0s()()()),2&e){const e=i.XpG();i.Y8G("ngClass",i.l_i(3,r,e.verticalPositionBottom,!e.verticalPositionBottom))("ngStyle",e.verticalPositionBottom?i.sMw(6,d,e.bottomdistance,e.leftdistance,e.PopoverMaxWidth):i.sMw(10,c,e.bottomdistance,e.leftdistance,e.PopoverMaxWidth)),i.R7$(3),i.Y8G("label",e.helpText)}}const m=e=>({color:e});let h=(()=>{class SystemIconHelpText{constructor(e){this.metadata=e,this.icon="info",this.file="./assets/icons/spicecrm.svg",this.size="xx-small",this.popoverMaxWidth="300px",this.color="#bbb",this.hovercolor="#5B5B5B",this.desaturate=!1,this.addclasses="",this.divClass="slds-media__figure",this.verticalPositionBottom=!1,this.helpText="",this.showHelp=!1}get gicon(){if(this.icon)return this.icon}get gfile(){if(this.file)return this.file}get gsizeClass(){if(this.size)return this.size}get gcolor(){if(this.color)return this.color}get ghovercolor(){if(this.hovercolor)return this.hovercolor}get gdesaturate(){if(this.desaturate)return this.desaturate}get gaddClass(){if(this.addclasses)return this.addclasses}get gdivClass(){if(this.divClass)return this.divClass}get PopoverMaxWidth(){return this.popoverMaxWidth}get bottomdistance(){return"xx-small"==this.size||"x-small"==this.size?" 2.5em":"small"==this.size?" 2.8em":"large"==this.size?" 3.5em":void 0}get leftdistance(){return"xx-small"==this.size||"x-small"==this.size?"-65%":"small"==this.size?"-30%":"large"==this.size?"10%":void 0}static#e=this.ɵfac=function(e){return new(e||SystemIconHelpText)(i.rXU(n.yu))};static#t=this.ɵcmp=i.VBU({type:SystemIconHelpText,selectors:[["system-icon-help-text"]],inputs:{icon:"icon",file:"file",size:"size",popoverMaxWidth:"popoverMaxWidth",color:"color",hovercolor:"hovercolor",desaturate:"desaturate",addclasses:"addclasses",divClass:"divClass",verticalPositionBottom:"verticalPositionBottom",helpText:"helpText"},decls:5,vars:10,consts:[[1,"slds-is-relative",2,"display","inline"],[3,"mouseover","mouseout"],[1,"slds-icon_container","slds-icon-utility-info"],[3,"ngStyle","icon","file","size","desaturate","addclasses","divClass"],["class","slds-popover slds-popover_tooltip","role","tooltip","id","help","style","position: absolute; display: block; z-index: 50; width: max-content;",3,"ngClass","ngStyle",4,"ngIf"],["role","tooltip","id","help",1,"slds-popover","slds-popover_tooltip",2,"position","absolute","display","block","z-index","50","width","max-content",3,"ngClass","ngStyle"],[1,"slds-popover__body",2,"width","100%"],[2,"display","block","white-space","pre-wrap"],[3,"label"]],template:function(e,t){1&e&&(i.j41(0,"div",0)(1,"a",1),i.bIt("mouseover",(function(){return t.showHelp=!!t.helpText}))("mouseout",(function(){return t.showHelp=!1})),i.j41(2,"span",2),i.nrm(3,"system-custom-icon",3),i.k0s()(),i.DNE(4,u,4,14,"div",4),i.k0s()),2&e&&(i.R7$(3),i.Y8G("ngStyle",i.eq3(8,m,1==t.showHelp?t.ghovercolor:t.gcolor))("icon",t.gicon)("file",t.gfile)("size",t.gsizeClass)("desaturate",t.gdesaturate)("addclasses",t.gaddClass)("divClass",t.gdivClass),i.R7$(),i.Y8G("ngIf",t.showHelp))},dependencies:[l.YU,l.bT,l.B3,o.k,a.W],encapsulation:2})}return SystemIconHelpText})()},13269:(e,t,s)=>{"use strict";s.d(t,{r:()=>o});var i=s(54438),n=s(69904),l=s(32062);let o=(()=>{class SystemIllustrationNoAccess{constructor(e){this.language=e}static#e=this.ɵfac=function(e){return new(e||SystemIllustrationNoAccess)(i.rXU(n.B))};static#t=this.ɵcmp=i.VBU({type:SystemIllustrationNoAccess,selectors:[["system-illustration-no-access"]],decls:86,vars:0,consts:[[1,"slds-illustration","slds-illustration_small"],["viewBox","0 0 454 212","aria-hidden","true","xmlns","http://www.w3.org/2000/svg",0,"xmlns","xlink","http://www.w3.org/1999/xlink",1,"slds-illustration__svg"],["stroke","none","stroke-width","1","fill","none","fill-rule","evenodd"],["transform","translate(-70.000000, -95.000000)"],["transform","translate(124.500000, 222.000000)"],["fill","#FFFFFF"],["vector-effect","non-scaling-stroke","d","M18.9209988,1.95433401 L33.259296,51.443436 C33.5666778,52.5043744 32.9557995,53.613617 31.8948612,53.9209988 C31.7139843,53.9734036 31.5266126,54 31.3382972,54 L2.6617028,54 C1.5571333,54 0.661702805,53.1045695 0.661702805,52 C0.661702805,51.8116846 0.688299176,51.6243129 0.74070397,51.443436 L15.0790012,1.95433401 C15.386383,0.893395645 16.4956256,0.282517358 17.556564,0.589899164 C18.2152102,0.780726338 18.7301717,1.29568777 18.9209988,1.95433401 Z"],["stroke-linecap","round","stroke-width","3",1,"slds-illustration__stroke-secondary"],["vector-effect","non-scaling-stroke","stroke-linejoin","round","points","17 0.323943662 34 54 -1.81721305e-12 54"],["vector-effect","non-scaling-stroke","d","M17,4.6953125 C17,43.0456294 17,62.6471919 17,63.5 C17,62.6471919 17,43.0456294 17,4.6953125 Z"],["vector-effect","non-scaling-stroke","d","M17,29.3239437 C22.3333333,35.7851611 25,39.1184944 25,39.3239437 C25,39.1184944 22.3333333,35.7851611 17,29.3239437 Z","stroke-linejoin","round","transform","translate(21.000000, 34.323944) scale(-1, 1) translate(-21.000000, -34.323944) "],["transform","translate(145.000000, 194.000000)"],["transform","translate(1.000000, 0.000000)","fill","#FFFFFF"],["vector-effect","non-scaling-stroke","d","M25.6478873,0 L50.879042,84.4273253 C51.1953215,85.4856452 50.5937789,86.5999782 49.535459,86.9162577 C49.3496374,86.9717906 49.1567264,87 48.9627843,87 L2.33299037,87 C1.22842087,87 0.332990367,86.1045695 0.332990367,85 C0.332990367,84.8060578 0.361199757,84.6131469 0.416732643,84.4273253 L25.6478873,0 Z"],["vector-effect","non-scaling-stroke","stroke-linejoin","round","points","26.5 0 52.5 87 0.5 87"],["vector-effect","non-scaling-stroke","d","M26.5,2.58642578 C26.5,61.0261034 26.5,90.9972948 26.5,92.5 C26.5,90.9972948 26.5,61.0261034 26.5,2.58642578 Z"],["vector-effect","non-scaling-stroke","d","M15.6478873,42 C22.314554,49.078692 25.6478873,52.7453587 25.6478873,53 C25.6478873,52.7453587 22.314554,49.078692 15.6478873,42 Z","stroke-linejoin","round"],["vector-effect","non-scaling-stroke","d","M27.6478873,68 C36.9812207,57.078692 41.6478873,51.7453587 41.6478873,52 C41.6478873,51.7453587 36.9812207,57.078692 27.6478873,68 Z","stroke-linejoin","round"],["transform","translate(404.500000, 245.000000) scale(-1, 1) translate(-404.500000, -245.000000) translate(348.000000, 226.000000)","stroke-linecap","round","stroke-linejoin","round","stroke-width","3",1,"slds-illustration__stroke-secondary"],["vector-effect","non-scaling-stroke","points","0 38 47.5 0 80.5 26"],["vector-effect","non-scaling-stroke","points","71 17 80.5 9 113 36"],["transform","translate(72.000000, 262.500000)"],["vector-effect","non-scaling-stroke","d","M153.962142,26.4644491 C151.225735,20.0143094 144.944776,15.5029106 137.633892,15.5029106 C135.619663,15.5029106 133.683612,15.8453541 131.878328,16.4764392 C128.451481,11.1704266 122.567406,7.66985447 115.883789,7.66985447 C109.491267,7.66985447 103.830159,10.8721423 100.350851,15.7935668 C98.9589956,14.968161 97.3423157,14.4956341 95.6177606,14.4956341 C94.1083143,14.4956341 92.6815102,14.8576334 91.4157672,15.5014039 C87.9975328,6.58722215 79.5098304,0.275259875 69.5804557,0.275259875 C60.4632836,0.275259875 52.5615782,5.59684366 48.6837305,13.3681823 C46.3912034,12.266973 43.8314865,11.6515593 41.1312741,11.6515593 C32.4373504,11.6515593 25.1998844,18.0312998 23.6476214,26.4644491 L153.962142,26.4644491 Z",1,"slds-illustration__fill-secondary"],["vector-effect","non-scaling-stroke","d","M13,25 L143,25","stroke-width","3","stroke-linecap","round",1,"slds-illustration__stroke-secondary"],["vector-effect","non-scaling-stroke","d","M0,25 L450,25","stroke-width","3","stroke-linecap","round",1,"slds-illustration__stroke-secondary"],["transform","translate(344.000000, 247.000000)"],["transform","translate(0.293436, 0.054545)"],["vector-effect","non-scaling-stroke","d","M165.428708,41.9454545 L0.0995432562,41.9454545 C0.0336614956,41.2089487 0,40.4630069 0,39.7090909 C0,26.2132599 10.7866531,15.2727273 24.0926641,15.2727273 C27.7492016,15.2727273 31.215485,16.0989227 34.3199502,17.5772977 C39.5712028,7.14424616 50.271428,0 62.6175975,0 C76.0636257,0 87.5573893,8.47383452 92.1862485,20.441159 C93.9002755,19.5768947 95.8324059,19.0909091 97.8764479,19.0909091 C100.211783,19.0909091 102.401037,19.7252784 104.285841,20.8333889 C108.997403,14.2263569 116.663488,9.92727273 125.320028,9.92727273 C138.043441,9.92727273 148.627152,19.2146805 150.834755,31.4671412 C151.487388,31.3631046 152.156394,31.3090909 152.837838,31.3090909 C159.117096,31.3090909 164.340238,35.8953699 165.428708,41.9454545 Z",1,"slds-illustration__fill-secondary"],["vector-effect","non-scaling-stroke","d","M32.7065637,40.4454545 L173.706564,40.4454545","stroke-width","3","stroke-linecap","round",1,"slds-illustration__stroke-secondary"],["transform","translate(105.000000, 203.000000)"],["transform","translate(106.000000, 0.000000)","fill","#FFFFFF"],["vector-effect","non-scaling-stroke","points","121.5 48.5 158.5 48.5 158.5 34.5 47.5 34.5 47.5 48.5 93.5 48.5 93.5 69.5 121.5 69.5 121.5 48.5"],["vector-effect","non-scaling-stroke","d","M33.9882812,0.21875 C36.5611979,0.21875 70.6126302,0.21875 136.142578,0.21875 L152.384766,11.1132813 C155.083088,16.811292 155.656656,19.677503 154.105469,19.7119141 C152.554281,19.7463252 116.293865,17.6717809 45.3242187,13.4882812 C35.1940104,4.64192708 31.4153646,0.21875 33.9882812,0.21875 Z"],["vector-effect","non-scaling-stroke","d","M32.6708984,2.02246094 L21.5554199,0.374195518 L17.6036034,0.374195518 L5.77148437,7.90429688 C3.09089817,12.6737672 3.09089817,15.2284547 5.77148437,15.5683594 C8.45207058,15.9082641 16.1278518,14.3268839 28.7988281,10.8242188 L42.9921875,7.90429688 L41.0699892,5.68448183 L32.6708984,2.02246094 Z"],["x","0","y","34","width","48","height","14"],["transform","translate(106.000000, 5.000000)",1,"slds-illustration__fill-secondary"],["vector-effect","non-scaling-stroke","points","93.3109375 43.4566406 93.3109375 64.6722656 120.925 64.6722656 121.823047 44.1324219 158.5 43.4566406 158.5 97.5 48.5 97.5 48.5 43.6933594"],["vector-effect","non-scaling-stroke","d","M132.670898,7.66300119e-19 C125.172201,-2.55433373e-19 94.1907552,-2.55433373e-19 39.7265625,7.66300119e-19 L31.8183594,12.5058594 L29.7050781,28.2714844 L157.78125,28.2714844 L157.78125,15.4775391 C148.539714,5.15917969 140.169596,1.78803361e-18 132.670898,7.66300119e-19 Z"],["vector-effect","non-scaling-stroke","d","M37.8266602,0 C34.4632704,0 29.4181858,0 22.6914062,0 C16.1624349,0 9.53808594,3.83528646 2.81835938,11.5058594 L0.705078125,30.2714844 L48.4101562,30.2714844 L48.4101562,14.4775391 L48.1789909,12.3275853 C43.283405,4.10919509 39.832628,0 37.8266602,0 Z"],["x","0.5","y","43.5","width","48","height","54"],["stroke-width","3","stroke-linecap","round","stroke-linejoin","round","x","154.5","y","34.5","width","110","height","68",1,"slds-illustration__stroke-primary"],["vector-effect","non-scaling-stroke","stroke-width","3","stroke-linecap","round","stroke-linejoin","round","points","264.5 48.5 264.5 34.5 154.5 34.5 154.5 48.5 199.5 48.5 199.5 69.5 227.5 69.5 227.5 48.5",1,"slds-illustration__stroke-primary"],["vector-effect","non-scaling-stroke","d","M130.5,0.5 L234.5,0.5 C251.068542,0.5 264.5,13.9314575 264.5,30.5 L264.5,34.5 L106.5,34.5 L106.5,24.5 C106.5,11.245166 117.245166,0.5 130.5,0.5 Z","stroke-width","3","stroke-linecap","round","stroke-linejoin","round",1,"slds-illustration__stroke-primary"],["vector-effect","non-scaling-stroke","d","M130.5,0.5 L130.5,0.5 C143.754834,0.5 154.5,11.245166 154.5,24.5 L154.5,34.5 L106.5,34.5 L106.5,24.5 C106.5,11.245166 117.245166,0.5 130.5,0.5 Z","stroke-width","3","stroke-linecap","round","stroke-linejoin","round",1,"slds-illustration__stroke-primary"],["stroke-width","3","stroke-linecap","round","stroke-linejoin","round","x","106.5","y","48.5","width","48","height","54",1,"slds-illustration__stroke-primary"],["stroke-width","3","stroke-linecap","round","stroke-linejoin","round","x","106.5","y","34.5","width","48","height","14",1,"slds-illustration__stroke-primary"],["vector-effect","non-scaling-stroke","d","M219,52 C219,54.765 216.765,57 214,57 C211.235,57 209,54.765 209,52 C209,49.235 211.235,47 214,47 C216.765,47 219,49.235 219,52 Z",1,"slds-illustration__fill-primary"],["vector-effect","non-scaling-stroke","d","M214,55 L214,60","stroke-width","4","stroke-linecap","round",1,"slds-illustration__stroke-primary"],["vector-effect","non-scaling-stroke","cx","164","cy","58","r","3",1,"slds-illustration__fill-primary"],["vector-effect","non-scaling-stroke","cx","164","cy","93","r","3",1,"slds-illustration__fill-primary"],["vector-effect","non-scaling-stroke","cx","255","cy","58","r","3",1,"slds-illustration__fill-primary"],["vector-effect","non-scaling-stroke","cx","255","cy","93","r","3",1,"slds-illustration__fill-primary"],["vector-effect","non-scaling-stroke","cx","145","cy","58","r","3",1,"slds-illustration__fill-primary"],["vector-effect","non-scaling-stroke","cx","145","cy","93","r","3",1,"slds-illustration__fill-primary"],["vector-effect","non-scaling-stroke","cx","116","cy","58","r","3",1,"slds-illustration__fill-primary"],["vector-effect","non-scaling-stroke","cx","116","cy","93","r","3",1,"slds-illustration__fill-primary"],["vector-effect","non-scaling-stroke","d","M289.928751,82.2971422 L298,102.518658 L280,102.518658 L288.071249,82.2971422 C288.275982,81.784207 288.857768,81.5343604 289.370703,81.7390942 C289.625359,81.8407378 289.827108,82.0424867 289.928751,82.2971422 Z",1,"slds-illustration__fill-primary"],["vector-effect","non-scaling-stroke","d","M300.428751,89.8132712 L305.5,102.518658 L293.5,102.518658 L298.571249,89.8132712 C298.775982,89.300336 299.357768,89.0504894 299.870703,89.2552232 C300.125359,89.3568668 300.327108,89.5586158 300.428751,89.8132712 Z",1,"slds-illustration__fill-primary"],["vector-effect","non-scaling-stroke","d","M93.4287513,82.2971422 L101.5,102.518658 L83.5,102.518658 L91.5712487,82.2971422 C91.7759825,81.784207 92.3577681,81.5343604 92.8707033,81.7390942 C93.1253588,81.8407378 93.3271077,82.0424867 93.4287513,82.2971422 Z","transform","translate(92.500000, 92.517446) scale(-1, 1) translate(-92.500000, -92.517446) ",1,"slds-illustration__fill-primary"],["vector-effect","non-scaling-stroke","d","M76.9287513,89.8132712 L82,102.518658 L70,102.518658 L75.0712487,89.8132712 C75.2759825,89.300336 75.8577681,89.0504894 76.3707033,89.2552232 C76.6253588,89.3568668 76.8271077,89.5586158 76.9287513,89.8132712 Z","transform","translate(76.000000, 96.275510) scale(-1, 1) translate(-76.000000, -96.275510) ",1,"slds-illustration__fill-primary"],["vector-effect","non-scaling-stroke","d","M360,102.5 L372,102.5","stroke-width","3","stroke-linecap","round","stroke-linejoin","round",1,"slds-illustration__stroke-primary"],["vector-effect","non-scaling-stroke","d","M0,102.5 L350,102.5","stroke-width","3","stroke-linecap","round","stroke-linejoin","round",1,"slds-illustration__stroke-primary"],["transform","translate(150.000000, 96.000000)","stroke-linecap","round","stroke-width","3",1,"slds-illustration__stroke-secondary"],["vector-effect","non-scaling-stroke","d","M44,17.5 L63,17.5 C62.2789714,12.0723971 64.081543,7.53186978 68.4077148,3.87841797 C73.3754883,-0.195556641 79.2734375,0.717773438 82.440918,2.12353516 C85.6083984,3.52929687 87.9606934,5.46069336 89.5913086,9.10524041 C90.2822266,10.6397351 90.7517904,11.9379883 91,13"],["vector-effect","non-scaling-stroke","d","M83,20.5 C84.0558268,16.8461914 86.2227376,14.4572754 89.5007324,13.333252 C94.4177246,11.6472168 99.0800781,13.8925781 100.942383,16.1518555 C102.804687,18.4111328 103.39502,20.2260742 103.746582,22.1201172 C103.980957,23.3828125 104.06543,24.8427734 104,26.5 C108.141764,26.3313802 110.918945,27.1647135 112.331543,29 C114.040039,31.1936035 114.215332,33.817627 113.593018,35.75 C112.970703,37.682373 110.894531,40.5 107,40.5 L28,40.5"],["vector-effect","non-scaling-stroke","d","M18,27.5 L83.0004985,27.5"],["vector-effect","non-scaling-stroke","d","M0,27.5 L8,27.5"],["transform","translate(271.000000, 135.000000)","stroke-linecap","round","stroke-width","3",1,"slds-illustration__stroke-secondary"],["transform","translate(402.000000, 164.000000)","stroke-linecap","round","stroke-width","3",1,"slds-illustration__stroke-secondary"],["transform","translate(31.713442, 25.088326) rotate(-15.000000) translate(-31.713442, -25.088326) translate(4.713442, 6.588326)"],["vector-effect","non-scaling-stroke","d","M31.0360707,3.43528591 C31.0360707,3.43528591 40.5802283,0.671893051 42.6488424,10.6908663","transform","translate(36.842457, 6.888440) rotate(41.000000) translate(-36.842457, -6.888440) "],["vector-effect","non-scaling-stroke","d","M40.4282002,10.1797377 C40.4282002,10.1797377 49.9723578,7.4163448 52.0409719,17.435318","transform","translate(46.234586, 13.632892) scale(-1, 1) rotate(-41.000000) translate(-46.234586, -13.632892) "],["vector-effect","non-scaling-stroke","d","M0.730284783,29.5865514 C0.730284783,29.5865514 10.2744424,26.8231586 12.3430565,36.8421318"],["vector-effect","non-scaling-stroke","d","M12.7302848,29.5865514 C12.7302848,29.5865514 22.2744424,26.8231586 24.3430565,36.8421318","transform","translate(18.536671, 33.039705) scale(-1, 1) translate(-18.536671, -33.039705) "],[1,"slds-text-longform"],[1,"slds-text-heading--small"],["label","LBL_NO_ACCESS"]],template:function(e,t){1&e&&(i.j41(0,"div",0),i.qSk(),i.j41(1,"svg",1)(2,"g",2)(3,"g",3)(4,"g")(5,"g",4)(6,"g",5),i.nrm(7,"path",6),i.k0s(),i.j41(8,"g",7),i.nrm(9,"polygon",8)(10,"path",9)(11,"path",10),i.k0s()(),i.j41(12,"g",11)(13,"g",12),i.nrm(14,"path",13),i.k0s(),i.j41(15,"g",7),i.nrm(16,"polygon",14)(17,"path",15)(18,"path",16)(19,"path",17),i.k0s()(),i.j41(20,"g",18)(21,"g"),i.nrm(22,"polyline",19)(23,"polyline",20),i.k0s()(),i.j41(24,"g",21),i.nrm(25,"path",22)(26,"path",23)(27,"path",24),i.k0s(),i.j41(28,"g",25)(29,"g",26),i.nrm(30,"path",27)(31,"path",28),i.k0s()(),i.j41(32,"g",29)(33,"g",30),i.nrm(34,"polygon",31)(35,"path",32)(36,"path",33)(37,"rect",34),i.k0s(),i.j41(38,"g",35),i.nrm(39,"polygon",36)(40,"path",37)(41,"path",38)(42,"rect",39),i.k0s(),i.j41(43,"g"),i.nrm(44,"rect",40)(45,"polygon",41)(46,"path",42)(47,"path",43)(48,"rect",44)(49,"rect",45)(50,"path",46)(51,"path",47)(52,"circle",48)(53,"circle",49)(54,"circle",50)(55,"circle",51)(56,"circle",52)(57,"circle",53)(58,"circle",54)(59,"circle",55)(60,"path",56)(61,"path",57)(62,"path",58)(63,"path",59)(64,"path",60)(65,"path",61),i.k0s()(),i.j41(66,"g",62),i.nrm(67,"path",63)(68,"path",64)(69,"path",65)(70,"path",66),i.k0s(),i.j41(71,"g",67)(72,"g"),i.nrm(73,"path",63)(74,"path",64)(75,"path",65)(76,"path",66),i.k0s()(),i.j41(77,"g",68)(78,"g",69),i.nrm(79,"path",70)(80,"path",71)(81,"path",72)(82,"path",73),i.k0s()()()()()(),i.joV(),i.j41(83,"div",74)(84,"h3",75),i.nrm(85,"system-label",76),i.k0s()()())},dependencies:[l.W],encapsulation:2})}return SystemIllustrationNoAccess})()},70923:(e,t,s)=>{"use strict";s.d(t,{L:()=>l});var i=s(54438);const n=["*"];let l=(()=>{class SystemIllustrationNoData{static#e=this.ɵfac=function(e){return new(e||SystemIllustrationNoData)};static#t=this.ɵcmp=i.VBU({type:SystemIllustrationNoData,selectors:[["system-illustration-no-data"]],ngContentSelectors:n,decls:56,vars:0,consts:[[1,"slds-illustration","slds-illustration_small"],["viewBox","0 0 468 194","aria-hidden","true","xmlns","http://www.w3.org/2000/svg",0,"xmlns","xlink","http://www.w3.org/1999/xlink",1,"slds-illustration__svg"],["stroke","none","stroke-width","1","fill","none","fill-rule","evenodd"],["transform","translate(-67.000000, -112.000000)"],["transform","translate(245.000000, 200.000000)","stroke-linecap","round","stroke-width","3",1,"slds-illustration__stroke-secondary"],["vector-effect","non-scaling-stroke","d","M44,17.5 L63,17.5 C62.2789714,12.0723971 64.081543,7.53186978 68.4077148,3.87841797 C73.3754883,-0.195556641 79.2734375,0.717773438 82.440918,2.12353516 C85.6083984,3.52929687 87.9606934,5.46069336 89.5913086,9.10524041 C90.2822266,10.6397351 90.7517904,11.9379883 91,13"],["vector-effect","non-scaling-stroke","d","M83,20.5 C84.0558268,16.8461914 86.2227376,14.4572754 89.5007324,13.333252 C94.4177246,11.6472168 99.0800781,13.8925781 100.942383,16.1518555 C102.804687,18.4111328 103.39502,20.2260742 103.746582,22.1201172 C103.980957,23.3828125 104.06543,24.8427734 104,26.5 C108.141764,26.3313802 110.918945,27.1647135 112.331543,29 C114.040039,31.1936035 114.215332,33.817627 113.593018,35.75 C112.970703,37.682373 110.894531,40.5 107,40.5 L28,40.5"],["vector-effect","non-scaling-stroke","d","M18,27.5 L83.0004985,27.5"],["vector-effect","non-scaling-stroke","d","M0,27.5 L8,27.5"],["transform","translate(135.000000, 152.000000)","stroke-linecap","round","stroke-width","3",1,"slds-illustration__stroke-secondary"],["transform","translate(69.000000, 256.000000)","stroke-linecap","round","stroke-width","3",1,"slds-illustration__stroke-secondary"],["vector-effect","non-scaling-stroke","d","M14,36.5 L464,36.5"],["vector-effect","non-scaling-stroke","d","M0,36.5 L6,36.5"],["vector-effect","non-scaling-stroke","stroke-linejoin","round","points","234.5 36 279.5 0 313.5 26"],["vector-effect","non-scaling-stroke","d","M279.5,1 L279.5,35","stroke-linejoin","round"],["vector-effect","non-scaling-stroke","d","M313.5,11 C313.5,20.7437888 313.5,25.7437888 313.5,26 C313.5,25.7437888 313.5,20.7437888 313.5,11 Z","stroke-linejoin","round"],["vector-effect","non-scaling-stroke","stroke-linejoin","round","points","303.5 17 313.5 9 347.5 36"],["transform","translate(113.000000, 178.000000)"],["transform","translate(30.000000, 8.000000)",1,"slds-illustration__fill-secondary"],["vector-effect","non-scaling-stroke","d","M29.5,60.5 L29.5,12 C29.5,5.372583 34.872583,0 41.5,0 C48.127417,0 53.5,5.372583 53.5,12 L53.5,40.5 L70.5,40.5 L70.5,27 C70.5,23.1340068 73.6340068,20 77.5,20 C81.3659932,20 84.5,23.1340068 84.5,27 L84.5,48.5 C84.5,51.8137085 81.8137085,54.5 78.5,54.5 L53.5,54.5 L53.5,118.5 L29.5,118.5 L29.5,74.5 L6.5,74.5 C3.1862915,74.5 0.5,71.8137085 0.5,68.5 L0.5,39 C0.5,35.1340068 3.63400675,32 7.5,32 C11.3659932,32 14.5,35.1340068 14.5,39 L14.5,60.5 L29.5,60.5 Z"],["transform","translate(59.000000, 7.000000)","fill","#FFFFFF"],["vector-effect","non-scaling-stroke","d","M2,11 C3.65332031,8.49145508 5.65181478,6.77364095 7.9954834,5.84655762 C11.5109863,4.45593262 15.2684326,4.95605469 17.8156738,6.2824707 C20.362915,7.60888672 22.3626709,9.64978027 23.2602539,11.81604 C23.8586426,13.2602132 23.8586426,11.7547201 23.2602539,7.29956055 L19.612793,3.56494141 L13.7923584,0.564331055 L8.765625,1.42663574 L4.67321777,3.19787598 C2.69893392,5.13902708 1.69559733,6.16722532 1.66320801,6.2824707 C1.61462402,6.45533878 0.856079102,9.49145508 0.813964844,9.66003418 C0.785888672,9.77242025 1.18123372,10.2190755 2,11 Z"],["stroke-width","3",1,"slds-illustration__stroke-primary"],["vector-effect","non-scaling-stroke","d","M0,126.5 L356,126.5","stroke-linecap","round"],["vector-effect","non-scaling-stroke","d","M362.5,126.5 L372.013149,126.5","stroke-linecap","round"],["vector-effect","non-scaling-stroke","d","M107.5,20 L107.5,28","stroke-linecap","round"],["vector-effect","non-scaling-stroke","d","M113,30.6568542 L118.656854,25","stroke-linecap","round"],["vector-effect","non-scaling-stroke","d","M37.5,32 L37.5,40","stroke-linecap","round"],["vector-effect","non-scaling-stroke","d","M44,42.6568542 L49.6568542,37","stroke-linecap","round"],["vector-effect","non-scaling-stroke","d","M25,42.6568542 L30.6568542,37","stroke-linecap","round","transform","translate(27.828427, 39.828427) scale(-1, 1) translate(-27.828427, -39.828427) "],["vector-effect","non-scaling-stroke","d","M71.5,0 L71.5,8","stroke-linecap","round"],["vector-effect","non-scaling-stroke","d","M79,10.6568542 L84.6568542,5","stroke-linecap","round"],["vector-effect","non-scaling-stroke","d","M58,10.6568542 L63.6568542,5","stroke-linecap","round","transform","translate(60.828427, 7.828427) scale(-1, 1) translate(-60.828427, -7.828427) "],["vector-effect","non-scaling-stroke","d","M59.5,68.5 L59.5,20 C59.5,13.372583 64.872583,8 71.5,8 C78.127417,8 83.5,13.372583 83.5,20 L83.5,48.5 L100.5,48.5 L100.5,35 C100.5,31.1340068 103.634007,28 107.5,28 C111.365993,28 114.5,31.1340068 114.5,35 L114.5,56.5 C114.5,59.8137085 111.813708,62.5 108.5,62.5 L83.5,62.5 L83.5,126.5 L59.5,126.5 L59.5,82.5 L36.5,82.5 C33.1862915,82.5 30.5,79.8137085 30.5,76.5 L30.5,47 C30.5,43.1340068 33.6340068,40 37.5,40 C41.3659932,40 44.5,43.1340068 44.5,47 L44.5,68.5 L59.5,68.5 Z"],["vector-effect","non-scaling-stroke","d","M77,88.5 L92.5,88.5 L92.5,81 C92.5,77.1340068 95.6340068,74 99.5,74 L99.5,74 C103.365993,74 106.5,77.1340068 106.5,81 L106.5,96.5 C106.5,99.8137085 103.813708,102.5 100.5,102.5 L77,102.5","stroke-linecap","round","stroke-linejoin","round",1,"slds-illustration__fill-secondary"],["transform","translate(429.000000, 242.000000)","stroke-linecap","round","stroke-width","3",1,"slds-illustration__stroke-secondary"],["vector-effect","non-scaling-stroke","d","M12.5,4 L12.5,50"],["vector-effect","non-scaling-stroke","stroke-linejoin","round","points","11 18.5 0.5 18.5 0.5 0"],["vector-effect","non-scaling-stroke","stroke-linejoin","round","points","14 25.5 24.5 25.5 24.5 8"],["vector-effect","non-scaling-stroke","stroke-linejoin","round","points","2.5 31 2.5 38.5 11 38.5"],["transform","translate(327.000000, 95.000000)"],["vector-effect","non-scaling-stroke","cx","64","cy","64","r","23",1,"slds-illustration__fill-secondary"],["vector-effect","non-scaling-stroke","stroke-width","3","stroke-linecap","round","stroke-linejoin","round","stroke-dasharray","135,1,1,18","transform","translate(64.000000, 64.000000) rotate(230.000000) translate(-64.000000, -64.000000) ","cx","64","cy","64","r","45",1,"slds-illustration__stroke-secondary"],["vector-effect","non-scaling-stroke","stroke-width","3","stroke-linecap","round","stroke-linejoin","round","stroke-dasharray","107,10","transform","translate(64.000000, 64.000000) rotate(150.000000) translate(-64.000000, -64.000000) ","cx","64","cy","64","r","33",1,"slds-illustration__stroke-secondary"],["transform","translate(41.000000, 41.000000)","stroke-width","3",1,"slds-illustration__stroke-primary"],["vector-effect","non-scaling-stroke","cx","23","cy","23","r","23"],[1,"slds-text-longform"],[1,"slds-text-heading_small"]],template:function(e,t){1&e&&(i.NAR(),i.j41(0,"div",0),i.qSk(),i.j41(1,"svg",1)(2,"g",2)(3,"g",3)(4,"g")(5,"g",4),i.nrm(6,"path",5)(7,"path",6)(8,"path",7)(9,"path",8),i.k0s(),i.j41(10,"g",9),i.nrm(11,"path",5)(12,"path",6)(13,"path",7)(14,"path",8),i.k0s(),i.j41(15,"g",10),i.nrm(16,"path",11)(17,"path",12)(18,"polyline",13)(19,"path",14)(20,"path",15)(21,"polyline",16),i.k0s(),i.j41(22,"g",17)(23,"g",18),i.nrm(24,"path",19),i.k0s(),i.j41(25,"g",20),i.nrm(26,"path",21),i.k0s(),i.j41(27,"g",22),i.nrm(28,"path",23)(29,"path",24)(30,"path",25)(31,"path",26)(32,"path",27)(33,"path",28)(34,"path",29)(35,"path",30)(36,"path",31)(37,"path",32)(38,"path",33)(39,"path",34),i.k0s()(),i.j41(40,"g",35)(41,"g"),i.nrm(42,"path",36)(43,"polyline",37)(44,"polyline",38)(45,"polyline",39),i.k0s()(),i.j41(46,"g",40)(47,"g"),i.nrm(48,"circle",41)(49,"circle",42)(50,"circle",43),i.k0s(),i.j41(51,"g",44),i.nrm(52,"circle",45),i.k0s()()()()()(),i.joV(),i.j41(53,"div",46)(54,"h3",47),i.SdG(55),i.k0s()()())},encapsulation:2})}return SystemIllustrationNoData})()},58461:(e,t,s)=>{"use strict";s.d(t,{b:()=>l});var i=s(54438);const n=["*"];let l=(()=>{class SystemIllustrationNoRecords{static#e=this.ɵfac=function(e){return new(e||SystemIllustrationNoRecords)};static#t=this.ɵcmp=i.VBU({type:SystemIllustrationNoRecords,selectors:[["system-illustration-no-records"]],ngContentSelectors:n,decls:50,vars:0,consts:[[1,"slds-illustration","slds-illustration_small"],["viewBox","0 0 454 272","aria-hidden","true","xmlns","http://www.w3.org/2000/svg",0,"xmlns","xlink","http://www.w3.org/1999/xlink",1,"slds-illustration__svg"],["fill","none","fill-rule","evenodd","transform","translate(-65 -74)"],["transform","translate(77 180)"],["vector-effect","non-scaling-stroke","stroke-linecap","round","stroke-linejoin","round","stroke-width","3","points","21 74 111.5 0 177.5 54",1,"slds-illustration__stroke-secondary"],["vector-effect","non-scaling-stroke","stroke-linecap","round","stroke-linejoin","round","stroke-width","3","points","160 37 181.5 19 249 74",1,"slds-illustration__stroke-secondary"],["vector-effect","non-scaling-stroke","d","M5.83623454,54.8238008 C6.47896445,52.7119739 7.52041887,52.7099477 8.16376546,54.8238008 L14,74 L0,74 L5.83623454,54.8238008 Z",1,"slds-illustration__fill-secondary"],["vector-effect","non-scaling-stroke","d","M14.9699006 61.8628727C15.5388088 59.729467 16.4627585 59.7353443 17.0300994 61.8628727L20 73 12 73 14.9699006 61.8628727zM239.734375 56.5589921C240.43336 54.4620359 241.506942 54.4857215 242.128332 56.5984458L246 69.7621171 237 64.7621171 239.734375 56.5589921z",1,"slds-illustration__fill-secondary"],["vector-effect","non-scaling-stroke","d","M247.921591,53.8514618 C248.51718,51.7243582 249.484912,51.7318303 250.077772,53.8491859 L254.357732,69.1347569 L242,75 L247.921591,53.8514618 Z","transform","matrix(-1 0 0 1 496.358 0)",1,"slds-illustration__fill-secondary"],["transform","matrix(-1 0 0 1 496 216)"],["vector-effect","non-scaling-stroke","d","M5.9215907,18.8514618 C6.51717971,16.7243582 7.48113835,16.7183512 8.0784093,18.8514618 L14,40 L0,40 L5.9215907,18.8514618 Z","transform","matrix(-1 0 0 1 14 0)",1,"slds-illustration__fill-secondary"],["vector-effect","non-scaling-stroke","d","M123.136984,25.2363093 C123.613615,23.448945 124.38595,23.4473111 124.863437,25.237887 L126.693756,32.1015868 L120,37 L123.136984,25.2363093 Z","transform","matrix(-1 0 0 1 246.694 0)",1,"slds-illustration__fill-secondary"],["vector-effect","non-scaling-stroke","stroke-linecap","round","stroke-linejoin","round","stroke-width","3","points","13 37 59.5 0 92.5 27",1,"slds-illustration__stroke-secondary"],["vector-effect","non-scaling-stroke","stroke-linecap","round","stroke-linejoin","round","stroke-width","3","points","83 17 92.5 9 127 38",1,"slds-illustration__stroke-secondary"],["stroke-linecap","round","stroke-width","3","transform","translate(67 253)",1,"slds-illustration__stroke-primary"],["vector-effect","non-scaling-stroke","d","M0 1.5L450 1.5M284 2L419 61M282 2L65 91M443 1.5L449 1.5"],["transform","translate(73 163)"],["vector-effect","non-scaling-stroke","fill","#FFF","points","20.906 .73 24.63 2.34 27.093 9.155 11.046 19.877 .131 19.877","transform","translate(80 22)"],["stroke-linecap","round","stroke-width","3",1,"slds-illustration__stroke-secondary"],["vector-effect","non-scaling-stroke","d","M44,17.5 L63,17.5 C62.2789714,12.0723971 64.081543,7.53186978 68.4077148,3.87841797 C73.3754883,-0.195556641 79.2734375,0.717773438 82.440918,2.12353516 C85.6083984,3.52929687 87.9606934,5.46069336 89.5913086,9.10524041 C90.2822266,10.6397351 90.7517904,11.9379883 91,13"],["vector-effect","non-scaling-stroke","d","M83 20.5C84.0558268 16.8461914 86.2227376 14.4572754 89.5007324 13.333252 94.4177246 11.6472168 99.0800781 13.8925781 100.942383 16.1518555 102.804687 18.4111328 103.39502 20.2260742 103.746582 22.1201172 103.980957 23.3828125 104.06543 24.8427734 104 26.5 108.141764 26.3313802 110.918945 27.1647135 112.331543 29 114.040039 31.1936035 114.215332 33.817627 113.593018 35.75 112.970703 37.682373 110.894531 40.5 107 40.5L28 40.5M18 27.5L83.0004985 27.5M0 27.5L8 27.5"],["stroke-linecap","round","stroke-width","3","transform","translate(292 139)",1,"slds-illustration__stroke-secondary"],["transform","translate(204.5 228.5)"],["vector-effect","non-scaling-stroke","d","M18.9209988,1.95433401 L33.259296,51.443436 C33.5666778,52.5043744 32.9557995,53.613617 31.8948612,53.9209988 C31.7139843,53.9734036 31.5266126,54 31.3382972,54 L2.6617028,54 C1.5571333,54 0.661702805,53.1045695 0.661702805,52 C0.661702805,51.8116846 0.688299176,51.6243129 0.74070397,51.443436 L15.0790012,1.95433401 C15.386383,0.893395645 16.4956256,0.282517358 17.556564,0.589899164 C18.2152102,0.780726338 18.7301717,1.29568777 18.9209988,1.95433401 Z",1,"slds-illustration__fill-secondary"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","3",1,"slds-illustration__stroke-primary"],["points","17 .324 34 54 0 54"],["vector-effect","non-scaling-stroke","d","M17,6.32394366 C17,42.1378022 17,60.4711356 17,61.3239437 C17,60.4711356 17,42.1378022 17,6.32394366 Z"],["vector-effect","non-scaling-stroke","d","M17,29.3239437 C22.3333333,35.7851611 25,39.1184944 25,39.3239437 C25,39.1184944 22.3333333,35.7851611 17,29.3239437 Z","transform","matrix(-1 0 0 1 42 0)"],["transform","translate(439.5 227.5)"],["vector-effect","non-scaling-stroke","points","17 -4.676 34 54 0 54"],["vector-effect","non-scaling-stroke","d","M17,1.32394366 C17,40.3936076 17,60.3936076 17,61.3239437 C17,60.3936076 17,40.3936076 17,1.32394366 Z"],["transform","translate(141.852 213.5)"],["vector-effect","non-scaling-stroke","d","M25.6478873,0 L50.8997802,86.4391718 C51.2095171,87.4994249 50.6011034,88.6100213 49.5408502,88.9197582 C49.3586621,88.9729817 49.1698252,89 48.980022,89 L2.31575269,89 C1.21118319,89 0.315752686,88.1045695 0.315752686,87 C0.315752686,86.8101968 0.342770948,86.6213599 0.395994453,86.4391718 L25.6478873,0 Z","transform","translate(1)",1,"slds-illustration__fill-secondary"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","3","transform","translate(0 2)",1,"slds-illustration__stroke-primary"],["vector-effect","non-scaling-stroke","points","26.648 0 52.648 87 .648 87"],["vector-effect","non-scaling-stroke","d","M26.6478873 6C26.6478873 64.4972948 26.6478873 94.4972948 26.6478873 96 26.6478873 94.4972948 26.6478873 64.4972948 26.6478873 6zM15.6478873 42C22.9812207 49.078692 26.6478873 52.7453587 26.6478873 53 26.6478873 52.7453587 22.9812207 49.078692 15.6478873 42zM27.6478873 68C36.9812207 57.078692 41.6478873 51.7453587 41.6478873 52 41.6478873 51.7453587 36.9812207 57.078692 27.6478873 68z"],["transform","translate(168 57)"],["vector-effect","non-scaling-stroke","cx","64","cy","64","r","23",1,"slds-illustration__fill-secondary"],["vector-effect","non-scaling-stroke","stroke-dasharray","135 1 1 18","stroke-linecap","round","stroke-linejoin","round","stroke-width","3","d","M64,109 C88.8528137,109 109,88.8528137 109,64 C109,39.1471863 88.8528137,19 64,19 C39.1471863,19 19,39.1471863 19,64 C19,88.8528137 39.1471863,109 64,109 Z","transform","rotate(-130 64 64)",1,"slds-illustration__stroke-secondary"],["vector-effect","non-scaling-stroke","stroke-dasharray","107 10","stroke-linecap","round","stroke-linejoin","round","stroke-width","3","d","M64,97 C82.2253967,97 97,82.2253967 97,64 C97,45.7746033 82.2253967,31 64,31 C45.7746033,31 31,45.7746033 31,64 C31,82.2253967 45.7746033,97 64,97 Z","transform","rotate(150 64 64)",1,"slds-illustration__stroke-secondary"],["stroke-width","3","transform","translate(41 41)",1,"slds-illustration__stroke-primary"],["vector-effect","non-scaling-stroke","cx","23","cy","23","r","23"],[1,"slds-text-longform"],[1,"slds-text-heading_small"]],template:function(e,t){1&e&&(i.NAR(),i.j41(0,"div",0),i.qSk(),i.j41(1,"svg",1)(2,"g",2)(3,"g",3),i.nrm(4,"polyline",4)(5,"polyline",5)(6,"path",6)(7,"path",7)(8,"path",8),i.k0s(),i.j41(9,"g",9),i.nrm(10,"path",10)(11,"path",11)(12,"polyline",12)(13,"polyline",13),i.k0s(),i.j41(14,"g",14),i.nrm(15,"path",15),i.k0s(),i.j41(16,"g",16),i.nrm(17,"polygon",17),i.j41(18,"g",18),i.nrm(19,"path",19)(20,"path",20),i.k0s()(),i.j41(21,"g",21),i.nrm(22,"path",19)(23,"path",20),i.k0s(),i.j41(24,"g",22),i.nrm(25,"path",23),i.j41(26,"g",24),i.nrm(27,"polygon",25)(28,"path",26)(29,"path",27),i.k0s()(),i.j41(30,"g",28),i.nrm(31,"path",23),i.j41(32,"g",24),i.nrm(33,"polygon",29)(34,"path",30)(35,"path",27),i.k0s()(),i.j41(36,"g",31),i.nrm(37,"path",32),i.j41(38,"g",33),i.nrm(39,"polygon",34)(40,"path",35),i.k0s()(),i.j41(41,"g",36),i.nrm(42,"circle",37)(43,"path",38)(44,"path",39),i.j41(45,"g",40),i.nrm(46,"circle",41),i.k0s()()()(),i.joV(),i.j41(47,"div",42)(48,"h3",43),i.SdG(49),i.k0s()()())},encapsulation:2})}return SystemIllustrationNoRecords})()},72486:(e,t,s)=>{"use strict";s.d(t,{w:()=>o});var i=s(54438),n=s(69904),l=s(32062);let o=(()=>{class SystemIllustrationNoTask{constructor(e){this.language=e}static#e=this.ɵfac=function(e){return new(e||SystemIllustrationNoTask)(i.rXU(n.B))};static#t=this.ɵcmp=i.VBU({type:SystemIllustrationNoTask,selectors:[["system-illustration-no-task"]],decls:67,vars:0,consts:[[1,"slds-illustration","slds-illustration_small"],["viewBox","0 0 454 182","aria-hidden","true","xmlns","http://www.w3.org/2000/svg",0,"xmlns","xlink","http://www.w3.org/1999/xlink",1,"slds-illustration__svg"],["stroke","none","stroke-width","1","fill","none","fill-rule","evenodd"],["transform","translate(-73.000000, -110.000000)"],["transform","translate(75.000000, 240.000000)"],["vector-effect","non-scaling-stroke","stroke-width","3","stroke-linecap","round","stroke-linejoin","round","transform","translate(375.250000, 18.000000) scale(-1, 1) translate(-375.250000, -18.000000) ","points","335.5 36 380 0 415 27",1,"slds-illustration__stroke-secondary"],["vector-effect","non-scaling-stroke","stroke-width","3","stroke-linecap","round","stroke-linejoin","round","transform","translate(324.500000, 22.500000) scale(-1, 1) translate(-324.500000, -22.500000) ","points","303 18 313.5 9 346 36",1,"slds-illustration__stroke-secondary"],["vector-effect","non-scaling-stroke","d","M0,36.5 L450,36.5","stroke-width","3","stroke-linecap","round",1,"slds-illustration__stroke-secondary"],["vector-effect","non-scaling-stroke","d","M406.04276,9.26543454 L413,32.7461193 L400.495829,23.8448556 L404.113561,9.30802252 C404.246938,8.772085 404.789525,8.44574518 405.325462,8.57912213 C405.669253,8.66468028 405.942114,8.9257539 406.04276,9.26543454 Z",1,"slds-illustration__fill-secondary"],["vector-effect","non-scaling-stroke","d","M311.962964,11.4391572 L318,33 L306.770218,23.1063642 L310.037036,11.4391572 C310.185948,10.9073269 310.7378,10.5969106 311.26963,10.7458231 C311.605963,10.8399963 311.868791,11.1028246 311.962964,11.4391572 Z","transform","translate(312.385109, 21.626882) scale(-1, 1) translate(-312.385109, -21.626882) ",1,"slds-illustration__fill-secondary"],["transform","translate(83.000000, 173.000000)","stroke-linecap","round","stroke-width","3",1,"slds-illustration__stroke-secondary"],["vector-effect","non-scaling-stroke","d","M44,17.5 L63,17.5 C62.2789714,12.0723971 64.081543,7.53186978 68.4077148,3.87841797 C73.3754883,-0.195556641 79.2734375,0.717773438 82.440918,2.12353516 C85.6083984,3.52929687 87.9606934,5.46069336 89.5913086,9.10524041 C90.2822266,10.6397351 90.7517904,11.9379883 91,13"],["vector-effect","non-scaling-stroke","d","M83,20.5 C84.0558268,16.8461914 86.2227376,14.4572754 89.5007324,13.333252 C94.4177246,11.6472168 99.0800781,13.8925781 100.942383,16.1518555 C102.804687,18.4111328 103.39502,20.2260742 103.746582,22.1201172 C103.980957,23.3828125 104.06543,24.8427734 104,26.5 C108.141764,26.3313802 110.918945,27.1647135 112.331543,29 C114.040039,31.1936035 114.215332,33.817627 113.593018,35.75 C112.970703,37.682373 110.894531,40.5 107,40.5 L28,40.5"],["vector-effect","non-scaling-stroke","d","M18,27.5 L83.0004985,27.5"],["vector-effect","non-scaling-stroke","d","M0,27.5 L8,27.5"],["transform","translate(274.000000, 111.000000)","stroke-linecap","round","stroke-width","3",1,"slds-illustration__stroke-secondary"],["transform","translate(115.000000, 191.000000)"],["transform","translate(148.000000, 32.000000) scale(-1, 1) translate(-148.000000, -32.000000) translate(116.000000, 0.000000)",1,"slds-illustration__fill-secondary"],["vector-effect","non-scaling-stroke","d","M25,53 C25,55.76 22.76125,58 20,58 C17.24,58 15,55.76 15,53 C15,50.24 17.24,48 20,48 C22.76125,48 25,50.24 25,53 Z"],["vector-effect","non-scaling-stroke","d","M8,58 C6.34130214,58 5,59.344354 5,61 C5,62.655646 6.34130214,64 8,64 C9.65717192,64 11,62.655646 11,61 C11,59.344354 9.65717192,58 8,58"],["vector-effect","non-scaling-stroke","d","M43.2932416,0 C35.2856577,0 28.3128049,4.40586521 24.6382957,10.9184604 C22.0889739,9.11222859 18.9814709,8.03886643 15.6213524,8.03886643 C6.99160591,8.03886643 0,15.0367986 0,23.6690948 C0,32.302472 6.99160591,39.3004042 15.6213524,39.3004042 C15.8077805,39.3004042 15.9920023,39.2777047 16.1806367,39.2712191 C19.0013272,43.3344299 23.6918145,46 29.011083,46 C32.7848734,46 36.2475826,44.6596485 38.9469293,42.4296926 C40.3512074,42.7193815 41.8051261,42.8739543 43.2932416,42.8739543 C55.1275661,42.8739543 64,33.4569038 64,21.6185732 C64,9.77916158 55.1275661,0 43.2932416,0 Z"],["transform","translate(0.000000, 18.000000)"],["vector-effect","non-scaling-stroke","d","M90.5057553,53.0538038 C90.5057553,53.0538038 116.215483,58.0701972 145.433002,58.0701972 C174.650521,58.0701972 204.505755,53.0538038 204.505755,53.0538038 C204.505755,53.0538038 192.222862,60.6378663 185.905056,63.0258453 C179.58725,65.4138243 166.637272,67.3671811 166.637272,67.3671811 C166.637272,67.3671811 153.865271,70.7987363 147.505755,70.9374424 C141.14624,71.0761485 132.54218,68.1108222 132.54218,68.1108222 L106.786672,63.0258453 L90.5057553,53.0538038 Z",1,"slds-illustration__fill-primary"],["vector-effect","non-scaling-stroke","d","M84.8198266,43.3368404 C84.8198266,43.3368404 99.4457512,70.425365 147.915957,70.425365 C196.386164,70.425365 214.819827,43.3368404 214.819827,43.3368404","stroke-width","4","stroke-linecap","round","stroke-linejoin","round",1,"slds-illustration__stroke-primary"],["vector-effect","non-scaling-stroke","d","M73,49.5 L88,49.5","stroke-width","3","stroke-linecap","round",1,"slds-illustration__stroke-primary"],["vector-effect","non-scaling-stroke","d","M211,49.5 L226,49.5","stroke-width","3","stroke-linecap","round",1,"slds-illustration__stroke-primary"],["vector-effect","non-scaling-stroke","d","M142.74548,0 L153.650377,2.22044605e-16 C154.478804,8.05656105e-16 155.150377,0.671572875 155.150377,1.5 L155.150377,2.98261094 C155.150377,3.11136765 155.100706,3.2351613 155.01171,3.32820944 L146.234757,12.5047677 L155.209827,12.5047677 C156.038254,12.5047677 156.709827,13.1763405 156.709827,14.0047677 L156.709827,14.4270108 C156.709827,15.2554379 156.038254,15.9270108 155.209827,15.9270108 L141.888626,15.9270108 C141.060199,15.9270108 140.388626,15.2554379 140.388626,14.4270108 L140.388626,12.8248256 C140.388626,12.696109 140.438265,12.5723507 140.527212,12.4793109 L149.20663,3.40051458 L142.74548,3.40051458 C141.917053,3.40051458 141.24548,2.7289417 141.24548,1.90051458 L141.24548,1.5 C141.24548,0.671572875 141.917053,1.52179594e-16 142.74548,0 Z",1,"slds-illustration__fill-primary"],["vector-effect","non-scaling-stroke","d","M20,81.5 L390,81.5","stroke-width","3","stroke-linecap","round",1,"slds-illustration__stroke-primary"],["vector-effect","non-scaling-stroke","d","M0,81.5 L12,81.5","stroke-width","3","stroke-linecap","round",1,"slds-illustration__stroke-primary"],["transform","translate(175.500000, 153.000000)"],["transform","translate(0.000000, 7.000000)",1,"slds-illustration__fill-secondary"],["vector-effect","non-scaling-stroke","d","M19.3444016,2.17529966 L32.8957957,84.445825 C33.0753185,85.5357082 32.3373256,86.5647651 31.2474424,86.7442879 C31.1399954,86.7619863 31.0312825,86.7708798 30.9223876,86.7708798 L2.12566435,86.7708798 C1.02109485,86.7708798 0.125664347,85.8754493 0.125664347,84.7708798 C0.125664347,84.6486417 0.136870913,84.526661 0.159143349,84.4064691 L15.4044726,2.13594377 C15.6057311,1.04986421 16.6493247,0.332574998 17.7354043,0.533833473 C18.5639901,0.687376483 19.2074411,1.34381197 19.3444016,2.17529966 Z"],["stroke-linecap","round","stroke-width","3",1,"slds-illustration__stroke-primary"],["vector-effect","non-scaling-stroke","stroke-linejoin","round","points","17 0.709590879 34 94.5 -1.82254212e-12 94.5"],["vector-effect","non-scaling-stroke","d","M17,8.09449405 C17,92.0999502 17,135.036706 17,136.904762 C17,135.036706 17,92.0999502 17,8.09449405 Z"],["vector-effect","non-scaling-stroke","d","M17,64.2334004 C24.3333333,71.7198767 28,75.6881307 28,76.1381623 C28,75.6881307 24.3333333,71.7198767 17,64.2334004 Z","stroke-linejoin","round","transform","translate(22.500000, 70.185781) scale(-1, 1) translate(-22.500000, -70.185781) "],["vector-effect","non-scaling-stroke","d","M8,50.2334004 C14,57.05321 17,60.6881307 17,61.1381623 C17,60.6881307 14,57.05321 8,50.2334004 Z","stroke-linejoin","round"],["transform","translate(307.500000, 135.000000)"],["transform","translate(0.000000, 2.000000)",1,"slds-illustration__fill-secondary"],["vector-effect","non-scaling-stroke","d","M29.524032,0.669921875 L55.6419593,108.305728 C55.9024257,109.379148 55.2433964,110.460477 54.1699762,110.720943 C54.0155692,110.75841 53.8572476,110.777344 53.69836,110.777344 L2.40272523,110.777344 C1.29815573,110.777344 0.402725233,109.881913 0.402725233,108.777344 C0.402725233,108.601258 0.42597945,108.425943 0.471884777,108.255946 L29.524032,0.669921875 Z"],["vector-effect","non-scaling-stroke","stroke-linejoin","round","points","29 0 56.572466 112.5 0 112.5"],["vector-effect","non-scaling-stroke","d","M29,6.09449405 C29,103.433283 29,153.036706 29,154.904762 C29,153.036706 29,103.433283 29,6.09449405 Z"],["vector-effect","non-scaling-stroke","d","M29,74.2334004 C41,87.05321 47,93.6881307 47,94.1381623 C47,93.6881307 41,87.05321 29,74.2334004 Z","stroke-linejoin","round","transform","translate(38.000000, 84.185781) scale(-1, 1) translate(-38.000000, -84.185781) "],["vector-effect","non-scaling-stroke","d","M14,61.2334004 C24,72.7198767 29,78.6881307 29,79.1381623 C29,78.6881307 24,72.7198767 14,61.2334004 Z","stroke-linejoin","round"],["vector-effect","non-scaling-stroke","d","M29,48.2334004 C36.3333333,57.05321 40,61.6881307 40,62.1381623 C40,61.6881307 36.3333333,57.05321 29,48.2334004 Z","stroke-linejoin","round","transform","translate(34.500000, 55.185781) scale(-1, 1) translate(-34.500000, -55.185781) "],["transform","translate(347.500000, 166.000000)"],["transform","translate(0.000000, 4.000000)",1,"slds-illustration__fill-secondary"],["vector-effect","non-scaling-stroke","stroke-linejoin","round","points","17 0.709590879 34 91.5 -1.82254212e-12 91.5"],["vector-effect","non-scaling-stroke","d","M17,5.09449405 C17,83.0999502 17,123.036706 17,124.904762 C17,123.036706 17,83.0999502 17,5.09449405 Z"],["vector-effect","non-scaling-stroke","d","M17,61.2334004 C24.3333333,68.7198767 28,72.6881307 28,73.1381623 C28,72.6881307 24.3333333,68.7198767 17,61.2334004 Z","stroke-linejoin","round","transform","translate(22.500000, 67.185781) scale(-1, 1) translate(-22.500000, -67.185781) "],["transform","translate(392.000000, 184.000000)","stroke-linecap","round","stroke-width","3",1,"slds-illustration__stroke-secondary"],["transform","translate(31.713442, 25.088326) rotate(-15.000000) translate(-31.713442, -25.088326) translate(4.713442, 6.588326)"],["vector-effect","non-scaling-stroke","d","M31.0360707,3.43528591 C31.0360707,3.43528591 40.5802283,0.671893051 42.6488424,10.6908663","transform","translate(36.842457, 6.888440) rotate(41.000000) translate(-36.842457, -6.888440) "],["vector-effect","non-scaling-stroke","d","M40.4282002,10.1797377 C40.4282002,10.1797377 49.9723578,7.4163448 52.0409719,17.435318","transform","translate(46.234586, 13.632892) scale(-1, 1) rotate(-41.000000) translate(-46.234586, -13.632892) "],["vector-effect","non-scaling-stroke","d","M0.730284783,29.5865514 C0.730284783,29.5865514 10.2744424,26.8231586 12.3430565,36.8421318"],["vector-effect","non-scaling-stroke","d","M12.7302848,29.5865514 C12.7302848,29.5865514 22.2744424,26.8231586 24.3430565,36.8421318","transform","translate(18.536671, 33.039705) scale(-1, 1) translate(-18.536671, -33.039705) "],[1,"slds-text-longform"],[1,"slds-text-heading--small"],["label","LBL_NO_ACTIVITIES"]],template:function(e,t){1&e&&(i.j41(0,"div",0),i.qSk(),i.j41(1,"svg",1)(2,"g",2)(3,"g",3)(4,"g")(5,"g",4),i.nrm(6,"polyline",5)(7,"polyline",6)(8,"path",7)(9,"path",8)(10,"path",9),i.k0s(),i.j41(11,"g",10),i.nrm(12,"path",11)(13,"path",12)(14,"path",13)(15,"path",14),i.k0s(),i.j41(16,"g",15),i.nrm(17,"path",11)(18,"path",12)(19,"path",13)(20,"path",14),i.k0s(),i.j41(21,"g",16)(22,"g",17),i.nrm(23,"path",18)(24,"path",19)(25,"path",20),i.k0s(),i.j41(26,"g",21),i.nrm(27,"path",22)(28,"path",23)(29,"path",24)(30,"path",25)(31,"path",26)(32,"path",27)(33,"path",28),i.k0s()(),i.j41(34,"g",29)(35,"g",30),i.nrm(36,"path",31),i.k0s(),i.j41(37,"g",32),i.nrm(38,"polygon",33)(39,"path",34)(40,"path",35)(41,"path",36),i.k0s()(),i.j41(42,"g",37)(43,"g",38),i.nrm(44,"path",39),i.k0s(),i.j41(45,"g",32),i.nrm(46,"polygon",40)(47,"path",41)(48,"path",42)(49,"path",43)(50,"path",44),i.k0s()(),i.j41(51,"g",45)(52,"g",46),i.nrm(53,"path",31),i.k0s(),i.j41(54,"g",32),i.nrm(55,"polygon",47)(56,"path",48)(57,"path",49),i.k0s()(),i.j41(58,"g",50)(59,"g",51),i.nrm(60,"path",52)(61,"path",53)(62,"path",54)(63,"path",55),i.k0s()()()()()(),i.joV(),i.j41(64,"div",56)(65,"h3",57),i.nrm(66,"system-label",58),i.k0s()()())},dependencies:[l.W],encapsulation:2})}return SystemIllustrationNoTask})()},50859:(e,t,s)=>{"use strict";s.d(t,{L:()=>l});var i=s(54438);const n=["*"];let l=(()=>{class SystemIllustrationPageNotAvailable{static#e=this.ɵfac=function(e){return new(e||SystemIllustrationPageNotAvailable)};static#t=this.ɵcmp=i.VBU({type:SystemIllustrationPageNotAvailable,selectors:[["system-illustration-page-not-available"]],ngContentSelectors:n,decls:81,vars:0,consts:[[1,"slds-illustration","slds-illustration_small"],["viewBox","0 0 470 229","aria-hidden","true","xmlns","http://www.w3.org/2000/svg",1,"slds-illustration__svg"],["stroke","none","stroke-width","1","fill","none","fill-rule","evenodd"],["transform","translate(-65.000000, -89.000000)"],["transform","translate(67.000000, 266.000000)"],["vector-effect","non-scaling-stroke","d","M16,36.5 L466,36.5","stroke-width","3","stroke-linecap","round",1,"slds-illustration__stroke-secondary"],["vector-effect","non-scaling-stroke","d","M0,36.5 L6,36.5","stroke-width","3","stroke-linecap","round",1,"slds-illustration__stroke-secondary"],["vector-effect","non-scaling-stroke","stroke-width","3","stroke-linecap","round","stroke-linejoin","round","points","43 36 87.5 0 121.5 27",1,"slds-illustration__stroke-secondary"],["vector-effect","non-scaling-stroke","stroke-width","3","stroke-linecap","round","stroke-linejoin","round","points","111 17 121.5 9 153 36",1,"slds-illustration__stroke-secondary"],["vector-effect","non-scaling-stroke","d","M50.962964,14.4391572 L57,36 L45.770218,26.1063642 L49.037036,14.4391572 C49.1859485,13.9073269 49.7377996,13.5969106 50.2696299,13.7458231 C50.6059625,13.8399963 50.8687909,14.1028246 50.962964,14.4391572 Z","transform","translate(51.385109, 24.626882) scale(-1, 1) translate(-51.385109, -24.626882) ",1,"slds-illustration__fill-secondary"],["transform","translate(451.500000, 238.500000)"],["fill","#FFFFFF"],["vector-effect","non-scaling-stroke","d","M18.9209988,1.95433401 L33.259296,51.443436 C33.5666778,52.5043744 32.9557995,53.613617 31.8948612,53.9209988 C31.7139843,53.9734036 31.5266126,54 31.3382972,54 L2.6617028,54 C1.5571333,54 0.661702805,53.1045695 0.661702805,52 C0.661702805,51.8116846 0.688299176,51.6243129 0.74070397,51.443436 L15.0790012,1.95433401 C15.386383,0.893395645 16.4956256,0.282517358 17.556564,0.589899164 C18.2152102,0.780726338 18.7301717,1.29568777 18.9209988,1.95433401 Z"],["stroke-linecap","round","stroke-width","3",1,"slds-illustration__stroke-secondary"],["vector-effect","non-scaling-stroke","stroke-linejoin","round","points","17 0.323943662 34 54 -1.81721305e-12 54"],["vector-effect","non-scaling-stroke","d","M17,4.6953125 C17,43.0456294 17,62.6471919 17,63.5 C17,62.6471919 17,43.0456294 17,4.6953125 Z"],["vector-effect","non-scaling-stroke","d","M17,29.3239437 C22.3333333,35.7851611 25,39.1184944 25,39.3239437 C25,39.1184944 22.3333333,35.7851611 17,29.3239437 Z","stroke-linejoin","round","transform","translate(21.000000, 34.323944) scale(-1, 1) translate(-21.000000, -34.323944) "],["transform","translate(408.000000, 205.500000)"],["transform","translate(1.000000, 0.000000)","fill","#FFFFFF"],["vector-effect","non-scaling-stroke","d","M25.6478873,0 L50.879042,84.4273253 C51.1953215,85.4856452 50.5937789,86.5999782 49.535459,86.9162577 C49.3496374,86.9717906 49.1567264,87 48.9627843,87 L2.33299037,87 C1.22842087,87 0.332990367,86.1045695 0.332990367,85 C0.332990367,84.8060578 0.361199757,84.6131469 0.416732643,84.4273253 L25.6478873,0 Z"],["vector-effect","non-scaling-stroke","stroke-linejoin","round","points","26.5 0 52.5 87 0.5 87"],["vector-effect","non-scaling-stroke","d","M26.5,3.58642578 C26.5,64.0261034 26.5,94.9972948 26.5,96.5 C26.5,94.9972948 26.5,64.0261034 26.5,3.58642578 Z"],["vector-effect","non-scaling-stroke","d","M15.6478873,42 C22.9812207,49.078692 26.6478873,52.7453587 26.6478873,53 C26.6478873,52.7453587 22.9812207,49.078692 15.6478873,42 Z","stroke-linejoin","round"],["vector-effect","non-scaling-stroke","d","M27.6478873,68 C36.9812207,57.078692 41.6478873,51.7453587 41.6478873,52 C41.6478873,51.7453587 36.9812207,57.078692 27.6478873,68 Z","stroke-linejoin","round"],["transform","translate(323.317280, 164.835938) rotate(-45.000000) translate(-323.317280, -164.835938) translate(242.317280, 130.835938)"],["transform","translate(5.000000, 44.000000)","fill","#FFFFFF"],["vector-effect","non-scaling-stroke","d","M4.18947979,0.995611783 L0.115234375,11.9555255 C12.0957996,19.4577143 18.3338849,23.301537 18.8294904,23.4869936 C19.1669204,23.6132606 21.7612542,24.0399819 26.9701953,23.7763273 C28.5980425,23.6939326 31.6346656,23.3623612 36.0800647,22.7816131 C40.0461992,21.6828201 43.0275796,20.7161876 45.0242059,19.8817158 C47.0208321,19.0472439 50.3465588,17.377878 55.0013859,14.8736182 L47.5277368,3.21878589 L4.18947979,0.995611783 Z"],["transform","translate(1.000000, 0.000000)",1,"slds-illustration__fill-secondary"],["stroke-width","3","stroke-linecap","round","stroke-linejoin","round","x","0.973240311","y","10.995821","width","11.5","height","12",1,"slds-illustration__stroke-primary"],["vector-effect","non-scaling-stroke","d","M4.77755146,50.2284782 C13.286202,52.6362568 21.480957,53.7936597 29.3618164,53.7006867 C37.2426758,53.6077138 44.7765582,51.7400968 51.9634637,48.0978356 C50.0751252,44.4670451 48.7826758,41.7898449 48.0861155,40.0662351 C47.3895551,38.3426252 46.5236255,35.6790055 45.4883267,32.075376 L45.2946319,0.293204959 L12.5695367,0.148192827 L12.5726441,32.0166806 C11.5738974,36.4623212 10.6196945,39.7477667 9.71003558,41.8730172 C8.80037666,43.9982676 7.15621528,46.7834213 4.77755146,50.2284782 Z"],["vector-effect","non-scaling-stroke","d","M45.4341011,10.7997716 L160.934101,10.7997716 L160.934101,29.2075859 C138.796894,24.9149057 121.296894,22.8695992 108.434101,23.0716664 C103.947529,23.0716664 96.9638862,23.0716664 87.4831733,23.0716664 L45.4341011,23.0716664 L45.4341011,10.7997716 Z"],["transform","translate(0.000000, 0.000000)"],["vector-effect","non-scaling-stroke","d","M13.5015145,4.53816197e-13 L46.505417,4.53816197e-13 L46.505417,24.0516129 C46.0805407,29.6108858 47.016166,35.1227138 49.312293,40.5870968 C51.6084201,46.0514798 55.1733269,52.064383 60.0070135,58.6258065 C49.5057718,64.6387097 39.5045892,67.6451613 30.0034658,67.6451613 C20.5023423,67.6451613 10.5011597,64.6387097 -8.20017976e-05,58.6258065 C5.7540776,50.5948062 9.47046374,44.581903 11.1490764,40.5870968 C12.8276891,36.5922906 13.6118351,31.0804626 13.5015145,24.0516129 L13.5015145,4.53816197e-13 Z","stroke-width","3","stroke-linecap","round","stroke-linejoin","round",1,"slds-illustration__stroke-primary"],["stroke-width","3","stroke-linecap","round","stroke-linejoin","round","x","1.97324031","y","10.995821","width","11.5","height","12",1,"slds-illustration__stroke-primary"],["vector-effect","non-scaling-stroke","d","M46.4341011,10.7997716 L161.934101,10.7997716 L161.934101,29.2075859 C139.796894,24.9149057 122.296894,22.8695992 109.434101,23.0716664 C104.947529,23.0716664 97.9638862,23.0716664 88.4831733,23.0716664 L46.4341011,23.0716664 L46.4341011,10.7997716 Z","stroke-width","3","stroke-linecap","round","stroke-linejoin","round",1,"slds-illustration__stroke-primary"],["vector-effect","non-scaling-stroke","points","66 10.5225806 102 10.5225806 102.162282 23.0225806 66.0542614 22.8973803",1,"slds-illustration__fill-primary"],["transform","translate(124.000000, 219.518658)"],["transform","translate(117.000000, 0.000000)","fill","#FFFFFF"],["vector-effect","non-scaling-stroke","points","0.115234375 0.823139211 0.115234375 6.95790484 131.128906 21.124897 131.128906 14.975483"],["transform","translate(95.000000, 4.000000)",1,"slds-illustration__fill-secondary"],["vector-effect","non-scaling-stroke","points","21.9667969 0.213764211 152.662109 14.9813423 152.662109 65.9637642 160.867188 80.1434517 174.628906 92.3211861 0.63671875 92.3211861 13.7480469 80.1434517 21.9667969 61.2977486"],["vector-effect","non-scaling-stroke","d","M118.5,15.4813423 L118.5,61.4813423 C117.921224,71.8381104 115.333984,79.318309 110.738281,83.921938 C106.142578,88.525567 100.896484,92.8787018 95,96.9813423 L271,96.9813423 C264.389323,92.6555667 259.341797,87.3824891 255.857422,81.1621094 C252.373047,74.9417297 250.253906,67.5264029 249.5,58.916129 L249.5,0.481342336 L118.5,15.4813423 Z","stroke-width","3","stroke-linecap","round","stroke-linejoin","round","transform","translate(183.000000, 48.731342) scale(-1, 1) translate(-183.000000, -48.731342) ",1,"slds-illustration__stroke-primary"],["vector-effect","non-scaling-stroke","d","M271.928751,76.7784845 L280,97 L262,97 L270.071249,76.7784845 C270.275982,76.2655493 270.857768,76.0157027 271.370703,76.2204365 C271.625359,76.3220801 271.827108,76.5238291 271.928751,76.7784845 Z",1,"slds-illustration__fill-primary"],["vector-effect","non-scaling-stroke","d","M282.428751,84.2946136 L287.5,97 L275.5,97 L280.571249,84.2946136 C280.775982,83.7816784 281.357768,83.5318318 281.870703,83.7365656 C282.125359,83.8382092 282.327108,84.0399581 282.428751,84.2946136 Z",1,"slds-illustration__fill-primary"],["vector-effect","non-scaling-stroke","d","M90.4287513,76.7784845 L98.5,97 L80.5,97 L88.5712487,76.7784845 C88.7759825,76.2655493 89.3577681,76.0157027 89.8707033,76.2204365 C90.1253588,76.3220801 90.3271077,76.5238291 90.4287513,76.7784845 Z","transform","translate(89.500000, 86.998788) scale(-1, 1) translate(-89.500000, -86.998788) ",1,"slds-illustration__fill-primary"],["vector-effect","non-scaling-stroke","d","M76.9287513,84.2946136 L82,97 L70,97 L75.0712487,84.2946136 C75.2759825,83.7816784 75.8577681,83.5318318 76.3707033,83.7365656 C76.6253588,83.8382092 76.8271077,84.0399581 76.9287513,84.2946136 Z","transform","translate(76.000000, 90.756853) scale(-1, 1) translate(-76.000000, -90.756853) ",1,"slds-illustration__fill-primary"],["vector-effect","non-scaling-stroke","d","M20,96.9813423 L370,96.9813423","stroke-width","3","stroke-linecap","round","stroke-linejoin","round",1,"slds-illustration__stroke-primary"],["vector-effect","non-scaling-stroke","d","M0,96.9813423 L12,96.9813423","stroke-width","3","stroke-linecap","round","stroke-linejoin","round",1,"slds-illustration__stroke-primary"],["vector-effect","non-scaling-stroke","d","M226.5,14.4813423 L226.5,40.4813423 C226.854167,55.9423134 234.6875,67.6089801 250,75.4813423","stroke-width","3","stroke-linecap","round","stroke-linejoin","round",1,"slds-illustration__stroke-primary"],["vector-effect","non-scaling-stroke","d","M212.5,12.4813423 L212.5,51.4813423 C211.329427,75.4461105 226.830078,87.4461105 259.001953,87.4813423","stroke-width","3","stroke-linecap","round","stroke-linejoin","round",1,"slds-illustration__stroke-primary"],["vector-effect","non-scaling-stroke","d","M190.5,9.48134234 L190.5,96.4813423","stroke-width","3","stroke-linecap","round","stroke-linejoin","round",1,"slds-illustration__stroke-primary"],["vector-effect","non-scaling-stroke","d","M160.5,5.48134234 L160.5,96.4813423","stroke-width","3","stroke-linecap","round","stroke-linejoin","round",1,"slds-illustration__stroke-primary"],["vector-effect","non-scaling-stroke","d","M148.5,4.48134234 L148.5,60.4813423 C148.166667,84.3362203 131.634766,96.2636593 98.9042969,96.2636593","stroke-width","3","stroke-linecap","round","stroke-linejoin","round",1,"slds-illustration__stroke-primary"],["vector-effect","non-scaling-stroke","d","M131.5,2.48134234 L131.5,54.2203125 C132.691406,76.2363071 124.326172,87.2443044 106.404297,87.2443044","stroke-width","3","stroke-linecap","round","stroke-linejoin","round",1,"slds-illustration__stroke-primary"],["transform","translate(160.000000, 107.000000)","stroke-linecap","round","stroke-width","3",1,"slds-illustration__stroke-secondary"],["vector-effect","non-scaling-stroke","d","M44,17.5 L63,17.5 C62.2789714,12.0723971 64.081543,7.53186978 68.4077148,3.87841797 C73.3754883,-0.195556641 79.2734375,0.717773438 82.440918,2.12353516 C85.6083984,3.52929687 87.9606934,5.46069336 89.5913086,9.10524041 C90.2822266,10.6397351 90.7517904,11.9379883 91,13"],["vector-effect","non-scaling-stroke","d","M83,20.5 C84.0558268,16.8461914 86.2227376,14.4572754 89.5007324,13.333252 C94.4177246,11.6472168 99.0800781,13.8925781 100.942383,16.1518555 C102.804687,18.4111328 103.39502,20.2260742 103.746582,22.1201172 C103.980957,23.3828125 104.06543,24.8427734 104,26.5 C108.141764,26.3313802 110.918945,27.1647135 112.331543,29 C114.040039,31.1936035 114.215332,33.817627 113.593018,35.75 C112.970703,37.682373 110.894531,40.5 107,40.5 L28,40.5"],["vector-effect","non-scaling-stroke","d","M18,27.5 L83.0004985,27.5"],["vector-effect","non-scaling-stroke","d","M0,27.5 L8,27.5"],["transform","translate(319.000000, 147.000000)","stroke-linecap","round","stroke-width","3",1,"slds-illustration__stroke-secondary"],["transform","translate(179.000000, 216.518658)"],["transform","translate(6.000000, 2.000000)","fill","#FFFFFF"],["vector-effect","non-scaling-stroke","d","M20.8180195,40.0662428 L20.8180195,3.98882348 C14.8180195,9.37296043 11.8180195,15.3858637 11.8180195,22.0275332 C11.8180195,28.6692027 14.8180195,34.6821059 20.8180195,40.0662428 Z","transform","translate(16.318019, 22.027533) scale(-1, -1) rotate(-45.000000) translate(-16.318019, -22.027533) "],["vector-effect","non-scaling-stroke","d","M38.0732996,21.3284985 L38.0732996,-1.21988855 C34.3232996,2.14519704 32.4482996,5.90326156 32.4482996,10.054305 C32.4482996,14.2053484 34.3232996,17.963413 38.0732996,21.3284985 Z","transform","translate(35.260800, 10.054305) scale(1, -1) rotate(-45.000000) translate(-35.260800, -10.054305) "],["transform","translate(0.000000, 6.000000)",1,"slds-illustration__fill-secondary"],["vector-effect","non-scaling-stroke","d","M20.8180195,42.0662428 L20.8180195,5.98882348 C14.8180195,11.3729604 11.8180195,17.3858637 11.8180195,24.0275332 C11.8180195,30.6692027 14.8180195,36.6821059 20.8180195,42.0662428 Z","transform","translate(16.318019, 24.027533) rotate(-45.000000) translate(-16.318019, -24.027533) "],["vector-effect","non-scaling-stroke","d","M47.9262378,21.3284985 L47.9262378,-1.21988855 C44.1762378,2.14519704 42.3012378,5.90326156 42.3012378,10.054305 C42.3012378,14.2053484 44.1762378,17.963413 47.9262378,21.3284985 Z","transform","translate(45.113738, 10.054305) scale(-1, 1) rotate(-45.000000) translate(-45.113738, -10.054305) "],["stroke-linecap","round","stroke-linejoin","round","stroke-width","3",1,"slds-illustration__stroke-primary"],["vector-effect","non-scaling-stroke","d","M60,64.4813423 C42.5559896,58.4405997 33.7226563,49.4405997 33.5,37.4813423 L33.5,0.481342336"],["vector-effect","non-scaling-stroke","d","M19.5,44.8774194 C25.5,39.4932824 28.5,33.4803792 28.5,26.8387097 C28.5,20.1970402 25.5,14.1841369 19.5,8.8 C13.5,14.1841369 10.5,20.1970402 10.5,26.8387097 C10.5,33.4803792 13.5,39.4932824 19.5,44.8774194 Z","transform","translate(19.500000, 26.838710) rotate(-45.000000) translate(-19.500000, -26.838710) "],["vector-effect","non-scaling-stroke","d","M43.125,25.3354839 C46.875,21.9703983 48.75,18.2123338 48.75,14.0612903 C48.75,9.91024688 46.875,6.15218236 43.125,2.78709677 C39.375,6.15218236 37.5,9.91024688 37.5,14.0612903 C37.5,18.2123338 39.375,21.9703983 43.125,25.3354839 Z","transform","translate(43.125000, 14.061290) scale(-1, 1) rotate(-45.000000) translate(-43.125000, -14.061290) "],[1,"slds-text-longform"],[1,"slds-text-heading_medium"]],template:function(e,t){1&e&&(i.NAR(),i.j41(0,"div",0),i.qSk(),i.j41(1,"svg",1)(2,"g",2)(3,"g",3)(4,"g")(5,"g",4),i.nrm(6,"path",5)(7,"path",6)(8,"polyline",7)(9,"polyline",8)(10,"path",9),i.k0s(),i.j41(11,"g",10)(12,"g",11),i.nrm(13,"path",12),i.k0s(),i.j41(14,"g",13),i.nrm(15,"polygon",14)(16,"path",15)(17,"path",16),i.k0s()(),i.j41(18,"g",17)(19,"g",18),i.nrm(20,"path",19),i.k0s(),i.j41(21,"g",13),i.nrm(22,"polygon",20)(23,"path",21)(24,"path",22)(25,"path",23),i.k0s()(),i.j41(26,"g",24)(27,"g",25),i.nrm(28,"path",26),i.k0s(),i.j41(29,"g",27),i.nrm(30,"rect",28)(31,"path",29)(32,"path",30),i.k0s(),i.j41(33,"g",31),i.nrm(34,"path",32)(35,"rect",33)(36,"path",34)(37,"polygon",35),i.k0s()(),i.j41(38,"g",36)(39,"g",37),i.nrm(40,"polygon",38),i.k0s(),i.j41(41,"g",39),i.nrm(42,"polygon",40),i.k0s(),i.j41(43,"g"),i.nrm(44,"path",41)(45,"path",42)(46,"path",43)(47,"path",44)(48,"path",45)(49,"path",46)(50,"path",47)(51,"path",48)(52,"path",49)(53,"path",50)(54,"path",51)(55,"path",52)(56,"path",53),i.k0s()(),i.j41(57,"g",54),i.nrm(58,"path",55)(59,"path",56)(60,"path",57)(61,"path",58),i.k0s(),i.j41(62,"g",59),i.nrm(63,"path",55)(64,"path",56)(65,"path",57)(66,"path",58),i.k0s(),i.j41(67,"g",60)(68,"g",61),i.nrm(69,"path",62)(70,"path",63),i.k0s(),i.j41(71,"g",64),i.nrm(72,"path",65)(73,"path",66),i.k0s(),i.j41(74,"g",67),i.nrm(75,"path",68)(76,"path",69)(77,"path",70),i.k0s()()()()()(),i.joV(),i.j41(78,"div",71)(79,"h3",72),i.SdG(80),i.k0s()()())},encapsulation:2})}return SystemIllustrationPageNotAvailable})()},81473:(e,t,s)=>{"use strict";s.d(t,{L:()=>g});var i=s(54438),n=s(69904),l=s(13562),o=s(60177),a=s(50859),r=s(32062),d=s(48717);function c(e,t){1&e&&i.nrm(0,"system-spinner")}function u(e,t){1&e&&(i.j41(0,"system-illustration-page-not-available"),i.nrm(1,"system-label",4),i.k0s())}function m(e,t){if(1&e&&(i.j41(0,"div",2),i.DNE(1,c,1,0,"system-spinner",3)(2,u,2,0,"system-illustration-page-not-available",3),i.k0s()),2&e){const e=i.XpG();i.R7$(),i.Y8G("ngIf",!e.loadingerror),i.R7$(),i.Y8G("ngIf",e.loadingerror)}}function h(e,t){if(1&e&&(i.j41(0,"div",5),i.nrm(1,"img",6),i.k0s()),2&e){const e=i.XpG();i.R7$(),i.Y8G("src",e.imgsrc,i.B4B)}}let g=(()=>{class SystemImagePreview{constructor(e,t){this.language=e,this.helper=t,this.imgsrc="",this.loadingerror=!1}set data(e){this.imgsrc=e}static#e=this.ɵfac=function(e){return new(e||SystemImagePreview)(i.rXU(n.B),i.rXU(l.d))};static#t=this.ɵcmp=i.VBU({type:SystemImagePreview,selectors:[["system-image-preview"]],inputs:{imgsrc:"imgsrc",loadingerror:"loadingerror",data:"data"},decls:2,vars:2,consts:[["style","height: 50vh;","class","slds-align--absolute-center",4,"ngIf"],["class","slds-p-around--small slds-text-align--center",4,"ngIf"],[1,"slds-align--absolute-center",2,"height","50vh"],[4,"ngIf"],["label","MSG_ERROR_LOADING_FILE"],[1,"slds-p-around--small","slds-text-align--center"],[2,"max-height","80vh","overflow","hidden",3,"src"]],template:function(e,t){1&e&&i.DNE(0,m,3,2,"div",0)(1,h,2,1,"div",1),2&e&&(i.Y8G("ngIf",!t.imgsrc),i.R7$(),i.Y8G("ngIf",t.imgsrc))},dependencies:[o.bT,a.L,r.W,d.P],encapsulation:2})}return SystemImagePreview})()},63252:(e,t,s)=>{"use strict";s.d(t,{m:()=>p});var i=s(54438),n=s(84341),l=s(69904),o=s(83935),a=s(60177),r=s(60940),d=s(91564),c=s(2760);function u(e,t){if(1&e&&(i.j41(0,"option",8),i.EFF(1),i.k0s()),2&e){const e=t.$implicit;i.Y8G("value",e.id),i.R7$(),i.JRh(e.name)}}function m(e,t){if(1&e&&(i.j41(0,"optgroup",6),i.DNE(1,u,2,2,"option",7),i.nI1(2,"systemmodulecustompipe"),i.k0s()),2&e){const e=i.XpG();i.Y8G("label","custom "+e.language.getLabel("LBL_ACTIONSET")),i.R7$(),i.Y8G("ngForOf",i.i5U(2,2,e._actionsets,e._module))}}function h(e,t){if(1&e&&(i.j41(0,"option",8),i.EFF(1),i.k0s()),2&e){const e=t.$implicit;i.Y8G("value",e.id),i.R7$(),i.JRh(e.name)}}function g(e,t){if(1&e&&(i.j41(0,"optgroup",6),i.DNE(1,h,2,2,"option",7),i.nI1(2,"systemmoduleglobalpipe"),i.k0s()),2&e){const e=i.XpG();i.Y8G("label","global "+e.language.getLabel("LBL_ACTIONSET")),i.R7$(),i.Y8G("ngForOf",i.i5U(2,2,e._actionsets,e._module))}}let p=(()=>{class SystemInputActionset{constructor(e,t){this.language=e,this.metadata=t,this.disabled=!1,this._actionsets=[],this._module="",this._actionsets=this.metadata.getActionSets()}get actionset(){return this._actionset}set actionset(e){this._actionset=e,this.onChange(e)}detectModule(){this._actionset&&(this._module=this.metadata.getActionSet(this._actionset).module)}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}writeValue(e){this._actionset=e,this.detectModule()}static#e=this.ɵfac=function(e){return new(e||SystemInputActionset)(i.rXU(l.B),i.rXU(o.yu))};static#t=this.ɵcmp=i.VBU({type:SystemInputActionset,selectors:[["system-input-actionset"]],inputs:{disabled:"disabled"},features:[i.Jv_([{provide:n.kq,useExisting:(0,i.Rfq)((()=>SystemInputActionset)),multi:!0}])],decls:10,vars:12,consts:[[1,"slds-grid"],[1,"slds-p-right--xxx-small","slds-size--1-of-3",3,"ngModel","displayAsterisk","ngModelChange"],[1,"slds-form-element__control","slds-p-left--xxx-small","slds-size--2-of-3"],[1,"slds-select_container"],[1,"slds-select",3,"disabled","ngModel","ngModelChange"],[3,"label",4,"ngIf"],[3,"label"],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(e,t){1&e&&(i.j41(0,"div",0)(1,"system-input-module",1),i.mxI("ngModelChange",(function(e){return i.DH7(t._module,e)||(t._module=e),e})),i.k0s(),i.j41(2,"div",2)(3,"div",3)(4,"select",4),i.mxI("ngModelChange",(function(e){return i.DH7(t.actionset,e)||(t.actionset=e),e})),i.nrm(5,"option"),i.DNE(6,m,3,5,"optgroup",5),i.nI1(7,"systemmodulecustompipe"),i.DNE(8,g,3,5,"optgroup",5),i.nI1(9,"systemmoduleglobalpipe"),i.k0s()()()()),2&e&&(i.R7$(),i.R50("ngModel",t._module),i.Y8G("displayAsterisk",!0),i.R7$(3),i.Y8G("disabled",!t._module||t.disabled),i.R50("ngModel",t.actionset),i.R7$(2),i.Y8G("ngIf",i.i5U(7,6,t._actionsets,t._module).length>0),i.R7$(2),i.Y8G("ngIf",i.i5U(9,9,t._actionsets,t._module).length>0))},dependencies:[a.Sq,a.bT,n.xH,n.y7,n.wz,n.BC,n.vS,r.u,d.B,c.B],encapsulation:2})}return SystemInputActionset})()},41239:(e,t,s)=>{"use strict";s.d(t,{H:()=>c});var i=s(54438),n=s(84341),l=s(69904),o=s(83935),a=s(49722),r=s(60177);function d(e,t){if(1&e&&(i.j41(0,"option",6),i.EFF(1),i.k0s()),2&e){const e=t.$implicit;i.Y8G("value",e),i.R7$(),i.JRh(e)}}let c=(()=>{class SystemInputBackendMethod{constructor(e,t,s){this.language=e,this.metadata=t,this.backend=s,this.disabled=!1,this._class="",this._method="",this._classexists=!1,this._methods=[]}get modelOptions(){return{updateOn:"blur"}}get classname(){return this._class}set classname(e){this._class=e,""!=this.classname?this.validateNamespace():(this._method="",this._methods=[],this._classexists=!1),this.joinValue()}get methodname(){return this._method}set methodname(e){this._method=e,this.joinValue()}validateNamespace(){this.backend.getRequest("system/checkclass/"+btoa(this._class)).subscribe((e=>{this._classexists=e.classexists,this._methods=e.methods}))}splitValue(){if(this._value){let e=this._value.split("->");this._class=e[0],this._method=e[1],this.validateNamespace()}}joinValue(){""!=this._class?this._value=this._class+"->"+this._method:this._value="",this.onChange(this._value)}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}writeValue(e){e!=this._value&&(this._value=e,this.splitValue())}static#e=this.ɵfac=function(e){return new(e||SystemInputBackendMethod)(i.rXU(l.B),i.rXU(o.yu),i.rXU(a.H))};static#t=this.ɵcmp=i.VBU({type:SystemInputBackendMethod,selectors:[["system-input-backend-method"]],inputs:{disabled:"disabled"},features:[i.Jv_([{provide:n.kq,useExisting:(0,i.Rfq)((()=>SystemInputBackendMethod)),multi:!0}])],decls:6,vars:6,consts:[[1,"slds-grid","slds-grid--vertical-align-center","slds-gutters_direct-xx-small"],["type","text",1,"slds-col","slds-size--2-of-3","slds-input",3,"disabled","ngModel","ngModelOptions","ngModelChange"],["focus",""],[1,"slds-col","slds-size--1-of-3","slds-select_container"],[1,"slds-select",3,"disabled","ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(e,t){1&e&&(i.j41(0,"div",0)(1,"input",1,2),i.mxI("ngModelChange",(function(e){return i.DH7(t.classname,e)||(t.classname=e),e})),i.k0s(),i.j41(3,"div",3)(4,"select",4),i.mxI("ngModelChange",(function(e){return i.DH7(t.methodname,e)||(t.methodname=e),e})),i.DNE(5,d,2,2,"option",5),i.k0s()()()),2&e&&(i.R7$(),i.Y8G("disabled",t.disabled),i.R50("ngModel",t.classname),i.Y8G("ngModelOptions",t.modelOptions),i.R7$(3),i.Y8G("disabled",!t._classexists||0==t._methods.length||t.disabled),i.R50("ngModel",t.methodname),i.R7$(),i.Y8G("ngForOf",t._methods))},dependencies:[r.Sq,n.xH,n.y7,n.me,n.wz,n.BC,n.vS],encapsulation:2})}return SystemInputBackendMethod})()},6315:(e,t,s)=>{"use strict";s.d(t,{T:()=>a});var i=s(54438),n=s(84341),l=s(60177);const o={provide:n.kq,useExisting:(0,i.Rfq)((()=>a)),multi:!0};let a=(()=>{class SystemInputBase64{constructor(){this.minHeight=150,this.maxHeight=500,this.disabled=!1,this._value=""}get value(){if(!this._value||""==this._value)return"";try{return decodeURIComponent(window.atob(this._value))}catch(e){try{return window.atob(this._value)}catch(e){return""}}}set value(e){this._value=window.btoa(e),"function"==typeof this.onChange&&this.onChange(this._value)}get textAreaStyle(){return{"min-height":this.minHeight+"px","max-height":this.maxHeight+"px"}}registerOnChange(e){this.onChange=t=>{e(t)}}registerOnTouched(e){this.onTouched=e}writeValue(e){this._value=e}static#e=this.ɵfac=function(e){return new(e||SystemInputBase64)};static#t=this.ɵcmp=i.VBU({type:SystemInputBase64,selectors:[["system-input-base64"]],inputs:{minHeight:"minHeight",maxHeight:"maxHeight",disabled:"disabled"},features:[i.Jv_([o])],decls:2,vars:3,consts:[[1,"slds-form-element__control"],[1,"slds-textarea","slds-scrollable--y","slds-m-vertical--xx-small",3,"ngModel","ngStyle","disabled","ngModelChange"]],template:function(e,t){1&e&&(i.j41(0,"div",0)(1,"textarea",1),i.mxI("ngModelChange",(function(e){return i.DH7(t.value,e)||(t.value=e),e})),i.k0s()()),2&e&&(i.R7$(),i.R50("ngModel",t.value),i.Y8G("ngStyle",t.textAreaStyle)("disabled",t.disabled))},dependencies:[l.B3,n.me,n.BC,n.vS],encapsulation:2})}return SystemInputBase64})()},32641:(e,t,s)=>{"use strict";s.d(t,{b:()=>h});var i=s(54438),n=s(84341),l=s(83935),o=s(69904),a=s(53584),r=s(60177),d=s(25863);function c(e,t){if(1&e){const e=i.RV6();i.j41(0,"li",14),i.bIt("click",(function(){const t=i.eBV(e).$implicit,s=i.XpG(2);return i.Njj(s.setColor(t))})),i.j41(1,"span",15)(2,"span",16)(3,"span",17),i.EFF(4),i.k0s()()()()}if(2&e){const e=t.$implicit;i.R7$(2),i.xc7("background-color","#"+e)("cursor","pointer"),i.R7$(2),i.JRh(e)}}function u(e,t){if(1&e&&(i.j41(0,"section",8)(1,"div",9)(2,"div",10)(3,"div",11)(4,"ul",12),i.DNE(5,c,5,5,"li",13),i.k0s()()()()()),2&e){const e=i.XpG();i.R7$(5),i.Y8G("ngForOf",e.colorPalette)("ngForTrackBy",e.trackByFnIndex)}}const m=e=>({"slds-is-edited":e});let h=(()=>{class SystemInputColor{constructor(e,t,s){this.metadata=e,this.language=t,this.configuration=s,this.colorPalette=["e3abec","c2dbf7","9fd6ff","9de7da","9df0c0","fff099","fed49a","d073e0","86baf3","5ebbff","44d8be","3be282","ffe654","ffb758","bd35bd","5779c1","5ebbff","00aea9","3cba4c","f5bc25","f99221","580d8c","001970","0a2399","0b7477","0b6b50","b67e11","b85d0d"],this.strict=!1,this.isOpen=!1,this.isedited=!1}get value(){return this._value}set value(e){e!=this._value&&(this._value=e,this.onChange(e))}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}writeValue(e){this._value=e}trackByFnIndex(e,t){return e}colorStyle(e){return{background:this._value}}setColor(e){this.value="#"+e,this.isOpen=!1}static#e=this.ɵfac=function(e){return new(e||SystemInputColor)(i.rXU(l.yu),i.rXU(o.B),i.rXU(a.i))};static#t=this.ɵcmp=i.VBU({type:SystemInputColor,selectors:[["system-input-color"]],inputs:{isedited:"isedited"},features:[i.Jv_([{provide:n.kq,useExisting:(0,i.Rfq)((()=>SystemInputColor)),multi:!0}])],decls:8,vars:6,consts:[[1,"slds-form-element","slds-is-relative"],[1,"slds-color-picker"],[1,"slds-form-element__control","slds-grid","slds-grid--vertical-align-center"],[1,"slds-button","slds-color-picker__summary-button","slds-button_icon","slds-button_icon-more",3,"click"],[1,"slds-swatch",3,"ngStyle"],["icon","down",1,"slds-button__icon","slds-button__icon_small","slds-m-left_xx-small"],["type","text",1,"slds-grow","slds-input",3,"ngClass","ngModel","ngModelChange"],["class","slds-popover slds-color-picker__selector slds-is-absolute","role","dialog",4,"ngIf"],["role","dialog",1,"slds-popover","slds-color-picker__selector","slds-is-absolute"],["id","dialog-body-id-37"],[1,"slds-color-picker","slds-color-picker_swatches-only","slds-grid","slds-grid--vertical-align-center","slds-grow"],[1,"slds-color-picker__selector"],["role","menu",1,"slds-color-picker__swatches"],["class","slds-color-picker__swatch","role","presentation",3,"click",4,"ngFor","ngForOf","ngForTrackBy"],["role","presentation",1,"slds-color-picker__swatch",3,"click"],["role","menuitem",1,"slds-color-picker__swatch-trigger","slds-is-selected"],[1,"slds-swatch"],[1,"slds-assistive-text"]],template:function(e,t){1&e&&(i.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"button",3),i.bIt("click",(function(){return t.isOpen=!t.isOpen})),i.nrm(4,"span",4)(5,"system-button-icon",5),i.k0s(),i.j41(6,"input",6),i.mxI("ngModelChange",(function(e){return i.DH7(t.value,e)||(t.value=e),e})),i.k0s()(),i.DNE(7,u,6,2,"section",7),i.k0s()()),2&e&&(i.R7$(4),i.Y8G("ngStyle",t.colorStyle("brandprimary")),i.R7$(2),i.Y8G("ngClass",i.eq3(4,m,t.isedited)),i.R50("ngModel",t.value),i.R7$(),i.Y8G("ngIf",t.isOpen))},dependencies:[r.YU,r.Sq,r.bT,r.B3,n.me,n.BC,n.vS,d.t],encapsulation:2})}return SystemInputColor})()},70639:(e,t,s)=>{"use strict";s.d(t,{T:()=>d});var i=s(54438),n=s(84341),l=s(69904),o=s(53584),a=s(60177);function r(e,t){if(1&e&&(i.j41(0,"option",4),i.EFF(1),i.k0s()),2&e){const e=t.$implicit;i.Y8G("value",e.id),i.R7$(),i.JRh(e.name)}}let d=(()=>{class SystemInputCompanycodes{constructor(e,t){this.language=e,this.configuration=t,this.disabled=!1,this._companycodes=[],this._companycodes=this.configuration.getData("companycodes"),"object"==typeof this._companycodes&&this._companycodes.sort(((e,t)=>e.name>t.name?-1:1))}get companycode(){return this._companycode}set companycode(e){this._companycode=e,this.onChange&&this.onChange(e)}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}writeValue(e){this._companycode=e}static#e=this.ɵfac=function(e){return new(e||SystemInputCompanycodes)(i.rXU(l.B),i.rXU(o.i))};static#t=this.ɵcmp=i.VBU({type:SystemInputCompanycodes,selectors:[["system-input-companycodes"]],inputs:{disabled:"disabled"},features:[i.Jv_([{provide:n.kq,useExisting:(0,i.Rfq)((()=>SystemInputCompanycodes)),multi:!0}])],decls:4,vars:3,consts:[[1,"slds-form-element__control"],[1,"slds-select_container"],[1,"slds-select",3,"disabled","ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(e,t){1&e&&(i.j41(0,"div",0)(1,"div",1)(2,"select",2),i.mxI("ngModelChange",(function(e){return i.DH7(t.companycode,e)||(t.companycode=e),e})),i.DNE(3,r,2,2,"option",3),i.k0s()()()),2&e&&(i.R7$(2),i.Y8G("disabled",t.disabled),i.R50("ngModel",t.companycode),i.R7$(),i.Y8G("ngForOf",t._companycodes))},dependencies:[a.Sq,n.xH,n.y7,n.wz,n.BC,n.vS],encapsulation:2})}return SystemInputCompanycodes})()},70585:(e,t,s)=>{"use strict";s.d(t,{n:()=>p});var i=s(54438),n=s(84341),l=s(69904),o=s(83935),a=s(60177),r=s(60940),d=s(91564),c=s(2760);function u(e,t){if(1&e&&(i.j41(0,"option",8),i.EFF(1),i.k0s()),2&e){const e=t.$implicit;i.Y8G("value",e.id),i.R7$(),i.JRh(e.name)}}function m(e,t){if(1&e&&(i.j41(0,"optgroup",6),i.DNE(1,u,2,2,"option",7),i.nI1(2,"systemmodulecustompipe"),i.k0s()),2&e){const e=i.XpG();i.Y8G("label","custom "+e.language.getLabel("LBL_COMPONENTSET")),i.R7$(),i.Y8G("ngForOf",i.i5U(2,2,e._componentsets,e._module))}}function h(e,t){if(1&e&&(i.j41(0,"option",8),i.EFF(1),i.k0s()),2&e){const e=t.$implicit;i.Y8G("value",e.id),i.R7$(),i.JRh(e.name)}}function g(e,t){if(1&e&&(i.j41(0,"optgroup",6),i.DNE(1,h,2,2,"option",7),i.nI1(2,"systemmoduleglobalpipe"),i.k0s()),2&e){const e=i.XpG();i.Y8G("label","global "+e.language.getLabel("LBL_COMPONENTSET")),i.R7$(),i.Y8G("ngForOf",i.i5U(2,2,e._componentsets,e._module))}}let p=(()=>{class SystemInputComponentset{set disabled(e){this._disabled=!1!==e}constructor(e,t){this.language=e,this.metadata=t,this._disabled=!1,this._componentsets=[],this._modules=[],this._module="",this._componentsets=this.metadata.getComponentSets(),this._modules=this.metadata.getModules(),this._modules.sort()}get componentset(){return this._componentset}set componentset(e){this._componentset=e,this.onChange(e)}detectModule(){this._componentset&&(this._module=this.metadata.getComponentSet(this._componentset).module)}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}writeValue(e){this._componentset=e,this.detectModule()}static#e=this.ɵfac=function(e){return new(e||SystemInputComponentset)(i.rXU(l.B),i.rXU(o.yu))};static#t=this.ɵcmp=i.VBU({type:SystemInputComponentset,selectors:[["system-input-componentset"]],inputs:{disabled:"disabled"},features:[i.Jv_([{provide:n.kq,useExisting:(0,i.Rfq)((()=>SystemInputComponentset)),multi:!0}])],decls:10,vars:13,consts:[[1,"slds-grid"],[1,"slds-p-right--xxx-small","slds-size--1-of-3",3,"ngModel","disabled","displayAsterisk","ngModelChange"],[1,"slds-form-element__control","slds-p-left--xxx-small","slds-size--2-of-3"],[1,"slds-select_container"],[1,"slds-select",3,"disabled","ngModel","ngModelChange"],[3,"label",4,"ngIf"],[3,"label"],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(e,t){1&e&&(i.j41(0,"div",0)(1,"system-input-module",1),i.mxI("ngModelChange",(function(e){return i.DH7(t._module,e)||(t._module=e),e})),i.k0s(),i.j41(2,"div",2)(3,"div",3)(4,"select",4),i.mxI("ngModelChange",(function(e){return i.DH7(t.componentset,e)||(t.componentset=e),e})),i.nrm(5,"option"),i.DNE(6,m,3,5,"optgroup",5),i.nI1(7,"systemmodulecustompipe"),i.DNE(8,g,3,5,"optgroup",5),i.nI1(9,"systemmoduleglobalpipe"),i.k0s()()()()),2&e&&(i.R7$(),i.R50("ngModel",t._module),i.Y8G("disabled",t._disabled)("displayAsterisk",!0),i.R7$(3),i.Y8G("disabled",!t._module||t._disabled),i.R50("ngModel",t.componentset),i.R7$(2),i.Y8G("ngIf",i.i5U(7,7,t._componentsets,t._module.length>0)),i.R7$(2),i.Y8G("ngIf",i.i5U(9,10,t._componentsets,t._module.length>0)))},dependencies:[a.Sq,a.bT,n.xH,n.y7,n.wz,n.BC,n.vS,r.u,d.B,c.B],encapsulation:2})}return SystemInputComponentset})()},4656:(e,t,s)=>{"use strict";s.d(t,{g:()=>h});var i=s(54438),n=s(84341),l=s(83935),o=s(69904),a=s(53584),r=s(60177),d=s(32062);function c(e,t){if(1&e&&(i.j41(0,"option",8),i.nrm(1,"system-label",9),i.k0s()),2&e){const e=t.$implicit;i.Y8G("value",e.cc),i.R7$(),i.Y8G("label",e.label)}}function u(e,t){if(1&e){const e=i.RV6();i.j41(0,"div",3)(1,"select",4,5),i.mxI("ngModelChange",(function(t){i.eBV(e);const s=i.XpG();return i.DH7(s.value,t)||(s.value=t),i.Njj(t)})),i.nrm(3,"option",6),i.DNE(4,c,2,2,"option",7),i.k0s()()}if(2&e){const e=i.XpG();i.R7$(),i.R50("ngModel",e.value),i.Y8G("disabled",e.disabled),i.R7$(3),i.Y8G("ngForOf",e.countries)}}function m(e,t){if(1&e){const e=i.RV6();i.j41(0,"div",10)(1,"input",11),i.mxI("ngModelChange",(function(t){i.eBV(e);const s=i.XpG();return i.DH7(s.value,t)||(s.value=t),i.Njj(t)})),i.k0s()()}if(2&e){const e=i.XpG();i.R7$(),i.R50("ngModel",e.value),i.Y8G("disabled",e.disabled)}}let h=(()=>{class SystemInputCountry{constructor(e,t,s){this.metadata=e,this.language=t,this.configuration=s,this.disabled=!1,this.countries=[],this.strict=!1,"strict"==this.configuration.data.backendextensions.spiceui.config.format&&(this.strict=!0)}get value(){return this._value}set value(e){e!=this._value&&(this._value=e,this.onChange(e))}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}writeValue(e){this._value=e}ngOnInit(){this.strict&&this.getCountries()}getCountries(){let e=this.configuration.getData("countries");this.countries=e?.countries?e.countries:[],this.countries.sort(((e,t)=>this.language.getLabel(e.label).localeCompare(this.language.getLabel(t.label))))}static#e=this.ɵfac=function(e){return new(e||SystemInputCountry)(i.rXU(l.yu),i.rXU(o.B),i.rXU(a.i))};static#t=this.ɵcmp=i.VBU({type:SystemInputCountry,selectors:[["system-input-country"]],inputs:{disabled:"disabled"},features:[i.Jv_([{provide:n.kq,useExisting:(0,i.Rfq)((()=>SystemInputCountry)),multi:!0}])],decls:4,vars:2,consts:[[1,"slds-form-element"],["class","slds-select_container",4,"ngIf","ngIfElse"],["countryinput",""],[1,"slds-select_container"],[1,"slds-select",3,"ngModel","disabled","ngModelChange"],["focus",""],["value",""],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[3,"label"],[1,"slds-form-element__control"],["type","text",1,"slds-input",3,"ngModel","disabled","ngModelChange"]],template:function(e,t){if(1&e&&(i.j41(0,"div",0),i.DNE(1,u,5,3,"div",1)(2,m,2,2,"ng-template",null,2,i.C5r),i.k0s()),2&e){const e=i.sdS(3);i.R7$(),i.Y8G("ngIf",t.strict)("ngIfElse",e)}},dependencies:[r.Sq,r.bT,n.xH,n.y7,n.me,n.wz,n.BC,n.vS,d.W],encapsulation:2})}return SystemInputCountry})()},11614:(e,t,s)=>{"use strict";s.d(t,{E:()=>X});var i=s(54438),n=s(18359),l=s(84341),o=s(69904),a=s(48849),r=s(90154),d=s(60177),c=s(64029),u=s(32062),m=s(95218);function h(e,t){1&e&&i.nrm(0,"system-label",31)}function g(e,t){1&e&&i.nrm(0,"system-label",32)}function p(e,t){1&e&&i.nrm(0,"system-label",33)}function f(e,t){1&e&&i.nrm(0,"system-label",34)}function b(e,t){if(1&e&&(i.j41(0,"label",26),i.DNE(1,h,1,0,"system-label",27)(2,g,1,0,"system-label",28)(3,p,1,0,"system-label",29)(4,f,1,0,"system-label",30),i.k0s()),2&e){const e=i.XpG(2);i.Y8G("ngSwitch",e.expression.recurrence),i.R7$(),i.Y8G("ngSwitchCase","daily"),i.R7$(),i.Y8G("ngSwitchCase","weekly"),i.R7$(),i.Y8G("ngSwitchCase","annually")}}function y(e,t){if(1&e){const e=i.RV6();i.j41(0,"div",40)(1,"label",4),i.nrm(2,"system-label",41),i.k0s(),i.j41(3,"div",6)(4,"input",42),i.mxI("ngModelChange",(function(t){i.eBV(e);const s=i.XpG(3);return i.DH7(s.expression.everyQuantity,t)||(s.expression.everyQuantity=t),i.Njj(t)})),i.bIt("ngModelChange",(function(){i.eBV(e);const t=i.XpG(3);return i.Njj(t.setFieldValue())})),i.k0s()()()}if(2&e){const e=i.XpG(3);i.R7$(4),i.R50("ngModel",e.expression.everyQuantity)}}function v(e,t){1&e&&(i.j41(0,"label",4),i.nrm(1,"system-label",43),i.k0s())}function _(e,t){if(1&e){const e=i.RV6();i.j41(0,"div",44)(1,"div",6)(2,"div",7)(3,"select",8),i.mxI("ngModelChange",(function(t){i.eBV(e);const s=i.XpG(3);return i.DH7(s.expression.every,t)||(s.expression.every=t),i.Njj(t)})),i.bIt("ngModelChange",(function(){i.eBV(e);const t=i.XpG(3);return i.Njj(t.onEverySet())})),i.j41(4,"option",45),i.nrm(5,"system-label",46),i.k0s(),i.j41(6,"option",47),i.nrm(7,"system-label",46),i.k0s(),i.j41(8,"option",48),i.nrm(9,"system-label",46),i.k0s(),i.j41(10,"option",49),i.nrm(11,"system-label",46),i.k0s(),i.j41(12,"option",50),i.nrm(13,"system-label",46),i.k0s(),i.j41(14,"option",51),i.nrm(15,"system-label",46),i.k0s(),i.j41(16,"option",52),i.nrm(17,"system-label",53),i.k0s()()()()()}if(2&e){const e=i.XpG(3);i.R7$(3),i.R50("ngModel",e.expression.every),i.R7$(2),i.Y8G("label",e.expression.everyQuantity>1?"LBL_MINUTES":"LBL_MINUTE"),i.R7$(2),i.Y8G("label",e.expression.everyQuantity>1?"LBL_HOURS":"LBL_HOUR"),i.R7$(2),i.Y8G("label",e.expression.everyQuantity>1?"LBL_DAYS":"LBL_DAY"),i.R7$(2),i.Y8G("label",e.expression.everyQuantity>1?"LBL_DAYS_AT":"LBL_DAY_AT"),i.R7$(2),i.Y8G("label",e.expression.everyQuantity>1?"LBL_MONTHS":"LBL_MONTH"),i.R7$(2),i.Y8G("label",e.expression.everyQuantity>1?"LBL_MONTHS_AT":"LBL_MONTH_AT")}}function k(e,t){if(1&e){const e=i.RV6();i.j41(0,"div",54)(1,"div",55)(2,"system-input-time",56),i.mxI("ngModelChange",(function(t){i.eBV(e);const s=i.XpG(3);return i.DH7(s.expression.everyAtValue,t)||(s.expression.everyAtValue=t),i.Njj(t)})),i.bIt("ngModelChange",(function(){i.eBV(e);const t=i.XpG(3);return i.Njj(t.setFieldValue())})),i.k0s(),i.j41(3,"span",57),i.nrm(4,"system-label",58),i.k0s()()()}if(2&e){const e=i.XpG(3);i.R7$(2),i.R50("ngModel",e.expression.everyAtValue)}}function R(e,t){1&e&&i.nrm(0,"system-label",66)}function I(e,t){1&e&&i.nrm(0,"system-label",67)}function x(e,t){1&e&&i.nrm(0,"system-label",68)}function j(e,t){1&e&&i.nrm(0,"system-label",69)}function G(e,t){if(1&e&&(i.qex(0,61),i.DNE(1,R,1,0,"system-label",62)(2,I,1,0,"system-label",63)(3,x,1,0,"system-label",64)(4,j,1,0,"system-label",65),i.bVm()),2&e){const e=i.XpG(4);i.Y8G("ngSwitch",e.expression.everyAtValue),i.R7$(),i.Y8G("ngSwitchCase",1==e.expression.everyAtValue||21==e.expression.everyAtValue||31==e.expression.everyAtValue?e.expression.everyAtValue:"1"),i.R7$(),i.Y8G("ngSwitchCase",2==e.expression.everyAtValue||22==e.expression.everyAtValue?e.expression.everyAtValue:"2"),i.R7$(),i.Y8G("ngSwitchCase",3==e.expression.everyAtValue||23==e.expression.everyAtValue?e.expression.everyAtValue:"3")}}function C(e,t){if(1&e){const e=i.RV6();i.j41(0,"div",54)(1,"div",55)(2,"input",59),i.mxI("ngModelChange",(function(t){i.eBV(e);const s=i.XpG(3);return i.DH7(s.expression.everyAtValue,t)||(s.expression.everyAtValue=t),i.Njj(t)})),i.bIt("ngModelChange",(function(){i.eBV(e);const t=i.XpG(3);return i.Njj(t.setFieldValue())})),i.k0s(),i.j41(3,"span",57),i.DNE(4,G,5,4,"ng-container",60),i.k0s()()()}if(2&e){const e=i.XpG(3);i.R7$(2),i.R50("ngModel",e.expression.everyAtValue),i.R7$(2),i.Y8G("ngIf",!!e.expression.everyAtValue)}}const w=(e,t,s,i,n,l,o)=>({0:e,1:t,2:s,3:i,4:n,5:l,6:o});function S(e,t){if(1&e){const e=i.RV6();i.j41(0,"div",70)(1,"div",6)(2,"system-multiple-select",71),i.mxI("ngModelChange",(function(t){i.eBV(e);const s=i.XpG(3);return i.DH7(s.expression.everyAtValue,t)||(s.expression.everyAtValue=t),i.Njj(t)})),i.bIt("ngModelChange",(function(){i.eBV(e);const t=i.XpG(3);return i.Njj(t.setFieldValue())})),i.k0s()()()}if(2&e){const e=i.XpG(3);i.R7$(2),i.Y8G("showPills",!1),i.R50("ngModel",e.expression.everyAtValue),i.Y8G("listItems",i.sGs(3,w,e.weekdays[0],e.weekdays[1],e.weekdays[2],e.weekdays[3],e.weekdays[4],e.weekdays[5],e.weekdays[6]))}}function E(e,t){if(1&e&&(i.j41(0,"option",73),i.EFF(1),i.k0s()),2&e){const e=t.$implicit,s=t.index;i.Y8G("value",s),i.R7$(),i.SpI(" ",e," ")}}function L(e,t){if(1&e){const e=i.RV6();i.j41(0,"div",70)(1,"div",6)(2,"div",7)(3,"select",8),i.mxI("ngModelChange",(function(t){i.eBV(e);const s=i.XpG(3);return i.DH7(s.expression.everyAtValue,t)||(s.expression.everyAtValue=t),i.Njj(t)})),i.bIt("ngModelChange",(function(){i.eBV(e);const t=i.XpG(3);return i.Njj(t.setFieldValue())})),i.DNE(4,E,2,2,"option",72),i.k0s()()()()}if(2&e){const e=i.XpG(3);i.R7$(3),i.R50("ngModel",e.expression.everyAtValue),i.R7$(),i.Y8G("ngForOf",e.weekdays)}}function D(e,t){if(1&e&&(i.j41(0,"option",73),i.EFF(1),i.k0s()),2&e){const e=t.$implicit,s=t.index;i.Y8G("value",s+1),i.R7$(),i.SpI(" ",e," ")}}function F(e,t){if(1&e){const e=i.RV6();i.j41(0,"div",70)(1,"div",6)(2,"div",7)(3,"select",8),i.mxI("ngModelChange",(function(t){i.eBV(e);const s=i.XpG(3);return i.DH7(s.expression.everyAtValue,t)||(s.expression.everyAtValue=t),i.Njj(t)})),i.bIt("ngModelChange",(function(){i.eBV(e);const t=i.XpG(3);return i.Njj(t.setFieldValue())})),i.DNE(4,D,2,2,"option",72),i.k0s()()()()}if(2&e){const e=i.XpG(3);i.R7$(3),i.R50("ngModel",e.expression.everyAtValue),i.R7$(),i.Y8G("ngForOf",e.months)}}function M(e,t){if(1&e&&(i.qex(0),i.DNE(1,y,5,1,"div",35)(2,v,2,0,"label",36)(3,_,18,7,"div",37)(4,k,5,1,"div",38)(5,C,5,2,"div",38)(6,S,3,11,"div",39)(7,L,5,2,"div",39)(8,F,5,2,"div",39),i.bVm()),2&e){const e=i.XpG(2);i.R7$(),i.Y8G("ngIf","weekdays"!=e.expression.every&&"custom"==e.expression.recurrence),i.R7$(),i.Y8G("ngIf","weekdays"==e.expression.every&&"custom"==e.expression.recurrence),i.R7$(),i.Y8G("ngIf","custom"==e.expression.recurrence),i.R7$(),i.Y8G("ngIf","daysAt"==e.expression.every||"daily"==e.expression.recurrence),i.R7$(),i.Y8G("ngIf","monthsAt"==e.expression.every||"monthly"==e.expression.recurrence),i.R7$(),i.Y8G("ngIf","weekdays"==e.expression.every),i.R7$(),i.Y8G("ngIf","weekly"==e.expression.recurrence),i.R7$(),i.Y8G("ngIf","annually"==e.expression.recurrence)}}function T(e,t){if(1&e){const e=i.RV6();i.qex(0),i.j41(1,"div",74)(2,"div",75)(3,"div",6)(4,"input",76),i.mxI("ngModelChange",(function(t){i.eBV(e);const s=i.XpG(2);return i.DH7(s.expression.minutes,t)||(s.expression.minutes=t),i.Njj(t)})),i.bIt("ngModelChange",(function(){i.eBV(e);const t=i.XpG(2);return i.Njj(t.setFieldValue())})),i.k0s()()(),i.j41(5,"div",77),i.EFF(6,"::"),i.k0s(),i.j41(7,"div",75)(8,"div",6)(9,"input",78),i.mxI("ngModelChange",(function(t){i.eBV(e);const s=i.XpG(2);return i.DH7(s.expression.hours,t)||(s.expression.hours=t),i.Njj(t)})),i.bIt("ngModelChange",(function(){i.eBV(e);const t=i.XpG(2);return i.Njj(t.setFieldValue())})),i.k0s()()(),i.j41(10,"div",77),i.EFF(11,"::"),i.k0s(),i.j41(12,"div",75)(13,"div",6)(14,"input",79),i.mxI("ngModelChange",(function(t){i.eBV(e);const s=i.XpG(2);return i.DH7(s.expression.monthDay,t)||(s.expression.monthDay=t),i.Njj(t)})),i.bIt("ngModelChange",(function(){i.eBV(e);const t=i.XpG(2);return i.Njj(t.setFieldValue())})),i.k0s()()(),i.j41(15,"div",77),i.EFF(16,"::"),i.k0s(),i.j41(17,"div",75)(18,"div",6)(19,"input",80),i.mxI("ngModelChange",(function(t){i.eBV(e);const s=i.XpG(2);return i.DH7(s.expression.month,t)||(s.expression.month=t),i.Njj(t)})),i.bIt("ngModelChange",(function(){i.eBV(e);const t=i.XpG(2);return i.Njj(t.setFieldValue())})),i.k0s()()(),i.j41(20,"div",77),i.EFF(21,"::"),i.k0s(),i.j41(22,"div",75)(23,"div",6)(24,"input",81),i.mxI("ngModelChange",(function(t){i.eBV(e);const s=i.XpG(2);return i.DH7(s.expression.weekDay,t)||(s.expression.weekDay=t),i.Njj(t)})),i.bIt("ngModelChange",(function(){i.eBV(e);const t=i.XpG(2);return i.Njj(t.setFieldValue())})),i.k0s()()()(),i.bVm()}if(2&e){const e=i.XpG(2);i.R7$(4),i.R50("ngModel",e.expression.minutes),i.R7$(5),i.R50("ngModel",e.expression.hours),i.R7$(5),i.R50("ngModel",e.expression.monthDay),i.R7$(5),i.R50("ngModel",e.expression.month),i.R7$(5),i.R50("ngModel",e.expression.weekDay)}}function B(e,t){if(1&e){const e=i.RV6();i.j41(0,"div",2)(1,"div",3)(2,"label",4),i.nrm(3,"system-label",5),i.k0s(),i.j41(4,"div",6)(5,"div",7)(6,"select",8),i.mxI("ngModelChange",(function(t){i.eBV(e);const s=i.XpG();return i.DH7(s.expression.recurrence,t)||(s.expression.recurrence=t),i.Njj(t)})),i.bIt("ngModelChange",(function(){i.eBV(e);const t=i.XpG();return i.Njj(t.onRecurrenceSet())})),i.nrm(7,"option",9),i.j41(8,"option",10),i.nrm(9,"system-label",11),i.k0s(),i.j41(10,"option",12),i.nrm(11,"system-label",13),i.k0s(),i.j41(12,"option",14),i.nrm(13,"system-label",15),i.k0s(),i.j41(14,"option",16),i.nrm(15,"system-label",17),i.k0s(),i.j41(16,"option",18),i.nrm(17,"system-label",19),i.k0s(),i.j41(18,"option",20),i.nrm(19,"system-label",21),i.k0s(),i.j41(20,"option",22),i.nrm(21,"system-label",23),i.k0s()()()()(),i.DNE(22,b,5,4,"label",24)(23,M,9,8,"ng-container",25)(24,T,25,5,"ng-container",25),i.k0s()}if(2&e){const e=i.XpG();i.R7$(6),i.R50("ngModel",e.expression.recurrence),i.R7$(16),i.Y8G("ngIf","custom"!=e.expression.recurrence&&"cron"!=e.expression.recurrence&&"everyWeekday"!=e.expression.recurrence),i.R7$(),i.Y8G("ngIf","cron"!=e.expression.recurrence),i.R7$(),i.Y8G("ngIf","cron"==e.expression.recurrence)}}function $(e,t){if(1&e&&(i.j41(0,"span"),i.EFF(1),i.k0s()),2&e){const e=i.XpG(2);i.R7$(),i.SpI(" ",e.expression.displayValue," ")}}function O(e,t){if(1&e&&i.DNE(0,$,2,1,"span",25),2&e){const e=i.XpG();i.Y8G("ngIf",null==e.expression?null:e.expression.displayValue)}}let X=(()=>{class SystemInputCronExpression{constructor(e,t){this.language=e,this.userPreferences=t,this.readOnly=!1,this.asObject=!1,this.expression={minutes:"",hours:"",monthDay:"",month:"",weekDay:"",stringValue:""},this.weekdays=[],this.months=[],this.everyLabels={minutes:"LBL_MINUTE{s}",hours:"LBL_HOUR{s}",days:"LBL_DAY{s}",months:"LBL_MONTH{s}",weekdays:"LBL_WEEKDAY{s}",daysAt:"LBL_DAY{s}_AT",monthsAt:"LBL_MONTH{s}_AT"},this.recurrenceLabels={daily:"LBL_DAILY",weekly:"LBL_WEEKLY",monthly:"LBL_MONTHLY",annually:"LBL_ANNUALLY",everyWeekday:"LBL_EVERY_WEEKDAY"},this.subscriptions=new n.yU}writeValue(e){this.value=e,this.setLocalValue(e),this.readOnly&&this.setDisplayValue()}registerOnChange(e){this.onChange=e}registerOnTouched(){}setDisabledState(){}ngOnInit(){this.setSelectOptionsFromMoment(),this.setLocalValue(this.value),this.subscribeToLanguageChanges()}resetEveryAtValue(){this.expression.everyAtValue=void 0}resetEveryQuantity(){this.expression.everyQuantity=void 0}onRecurrenceSet(){if(this.setExpressionProperties("*"),this.expression.every=void 0,this.expression.everyQuantity=void 0,this.expression.everyAtValue=void 0,!this.expression.recurrence)return this.expression.stringValue="",void this.onChange(this.asObject?this.getExpressionProperties():"");switch(this.expression.recurrence){case"custom":this.expression.every="minutes",this.expression.everyQuantity=1;break;case"cron":break;default:this.setDefaultRecurrenceEveryAtValue(),this.resetEveryQuantity()}this.setFieldValue()}onEverySet(){this.setExpressionProperties("*"),this.resetEveryAtValue(),"weekdays"==this.expression.every&&(this.resetEveryQuantity(),this.expression.everyAtValue||(this.expression.everyAtValue={})),"daysAt"==this.expression.every&&(this.expression.everyAtValue=moment().hour(0).minute(0).tz(this.userPreferences.toUse.timezone)),null!=this.expression.everyQuantity&&"daysAt"!=this.expression.every&&"monthsAt"!=this.expression.every&&this.setFieldValue()}setDefaultRecurrenceEveryAtValue(){switch(this.expression.recurrence){case"daily":this.expression.everyAtValue=moment(moment().utc().hour(0).minute(0));break;case"weekly":this.expression.everyAtValue="0";break;case"monthly":case"annually":this.expression.everyAtValue="1"}}subscribeToLanguageChanges(){this.subscriptions.add(this.language.currentlanguage$.subscribe((()=>{this.setSelectOptionsFromMoment()})))}setSelectOptionsFromMoment(){this.weekdays=moment.weekdays(),this.months=moment.months()}setFieldValue(){switch(this.expression.recurrence){case"custom":this.setCustomExpression();break;case"cron":break;default:this.setExpressionByRecurrenceUnit()}this.expression.stringValue=`${this.expression.minutes}::`,this.expression.stringValue+=`${this.expression.hours}::`,this.expression.stringValue+=`${this.expression.monthDay}::`,this.expression.stringValue+=`${this.expression.month}::`,this.expression.stringValue+=`${this.expression.weekDay}`,this.onChange(this.asObject?this.getExpressionProperties():this.expression.stringValue)}setCustomExpression(){if(!isNaN(this.expression.everyQuantity)||"weekdays"==this.expression.every)switch(this.expression.everyQuantity<1&&(this.expression.everyQuantity=1),this.expression.every){case"minutes":this.expression.everyQuantity>59&&(this.expression.everyQuantity=59),this.expression.minutes=`*/${this.expression.everyQuantity}`;break;case"hours":this.expression.everyQuantity>23&&(this.expression.everyQuantity=23),this.expression.minutes="0",this.expression.hours=`*/${this.expression.everyQuantity}`;break;case"days":this.expression.everyQuantity>31&&(this.expression.everyQuantity=31),this.expression.minutes="0",this.expression.hours="0",this.expression.monthDay=`*/${this.expression.everyQuantity}`;break;case"daysAt":if(!moment.isMoment(this.expression.everyAtValue))break;this.expression.everyQuantity>31&&(this.expression.everyQuantity=31),this.expression.hours=`${this.expression.everyAtValue.utc().hour()}`,this.expression.minutes=`${this.expression.everyAtValue.utc().minute()}`,this.expression.monthDay=`*/${this.expression.everyQuantity}`;break;case"months":this.expression.everyQuantity>12&&(this.expression.everyQuantity=12),this.expression.minutes="0",this.expression.hours="0",this.expression.month=`*/${this.expression.everyQuantity}`;break;case"monthsAt":this.expression.everyAtValue<1&&(this.expression.everyAtValue=1),this.expression.everyAtValue>31&&(this.expression.everyAtValue=31),this.expression.everyQuantity>12&&(this.expression.everyQuantity=12),this.expression.minutes="0",this.expression.hours="0",this.expression.monthDay=`${this.expression.everyAtValue}`,this.expression.month=`*/${this.expression.everyQuantity}`;break;case"weekdays":this.expression.minutes="0",this.expression.hours="0",this.expression.weekDay=this.expression.everyAtValue.join(",")}}setExpressionProperties(e){this.expression.minutes=e,this.expression.hours=e,this.expression.monthDay=e,this.expression.month=e,this.expression.weekDay=e}getExpressionProperties(){return{minutes:this.expression.minutes,hours:this.expression.hours,monthDay:this.expression.monthDay,month:this.expression.month,weekDay:this.expression.weekDay}}setExpressionByRecurrenceUnit(){switch(this.expression.recurrence){case"daily":this.expression.minutes=`${this.expression.everyAtValue.utc().minute()}`,this.expression.hours=`${this.expression.everyAtValue.utc().hour()}`;break;case"weekly":this.expression.minutes="0",this.expression.hours="0",this.expression.weekDay=this.expression.everyAtValue;break;case"everyWeekday":this.expression.minutes="0",this.expression.hours="0",this.expression.weekDay="1-5";break;case"monthly":this.expression.minutes="0",this.expression.hours="0",this.expression.monthDay=this.expression.everyAtValue;break;case"annually":this.expression.minutes="0",this.expression.hours="0",this.expression.month=this.expression.everyAtValue,this.expression.monthDay="1"}}setLocalValue(e){if(!e||e==this.expression?.stringValue)return;5==e.split("::").length&&this.parseExpressionFromString(e)}parseExpressionFromString(e){this.expression&&(this.expression.every=void 0,this.resetEveryAtValue(),this.resetEveryQuantity());const t=e.split("::");this.expression={minutes:t[0],hours:t[1],monthDay:t[2],month:t[3],weekDay:t[4],stringValue:e},this.setRecurrenceAtFromInput(e),"custom"==this.expression.recurrence&&this.setEveryValueFromExpression()}setRecurrenceAtFromInput(e){const t=!isNaN(+(this.expression.minutes+this.expression.hours))&&e.endsWith("::*::*::*"),s=!isNaN(+(this.expression.minutes+this.expression.hours+this.expression.weekDay))&&"*"==this.expression.month&&"*"==this.expression.monthDay,i="0::0::*::*::1-5"==e,n=!isNaN(+(this.expression.minutes+this.expression.hours+this.expression.monthDay))&&e.endsWith("::*::*"),l=!isNaN(+(this.expression.minutes+this.expression.hours+this.expression.month))&&"*"==this.expression.monthDay&&e.endsWith("::*");t?(this.expression.recurrence="daily",this.expression.everyAtValue=moment(moment.utc().hour(+this.expression.hours).minute(+this.expression.minutes)).tz(this.userPreferences.toUse.timezone)):s?(this.expression.recurrence="weekly",this.expression.everyAtValue=this.expression.weekDay):i?(this.expression.recurrence="everyWeekday",this.expression.everyAtValue=moment(moment.utc().hour(0).minute(0)).tz(this.userPreferences.toUse.timezone)):n?(this.expression.recurrence="monthly",this.expression.everyAtValue=this.expression.monthDay):l?(this.expression.recurrence="annually",this.expression.everyAtValue=this.expression.month):this.expression.recurrence="custom"}setEveryValueFromExpression(){const e=this.expression.minutes,t=this.expression.hours,s=this.expression.monthDay,i=this.expression.month,n=this.expression.weekDay;"*"==i&&"*"==n?(e.startsWith("*")&&"*"==t&&"*"==s&&(this.expression.every="minutes",this.expression.everyQuantity="*"==e?1:+e.substring(2)),t.startsWith("*/")&&0==+e&&"*"==s&&(this.expression.every="hours",this.expression.everyQuantity=+t.substring(2)),s.startsWith("*/")&&0==+e&&0==+t&&(this.expression.every="days",this.expression.everyQuantity=+s.substring(2)),s.startsWith("*/")&&+t>-1&&+e>-1&&(this.expression.every="daysAt",this.expression.everyQuantity=+s.substring(2),this.expression.everyAtValue=moment(moment.utc().hour(+t).minute(+e)).tz(this.userPreferences.toUse.timezone))):(i.startsWith("*/")&&0==+e&&0==+t&&"*"==n&&("*"==s&&(this.expression.every="months"),+s>0&&(this.expression.every="monthsAt",this.expression.everyAtValue=+s),this.expression.everyQuantity=+i.substring(2)),isNaN(+n.split(",")[0])||0!=+e||0!=+t||"*"!=i||"*"!=s||(this.expression.every="weekdays",this.expression.everyAtValue=n.split(","))),null==this.expression.every&&(this.expression.recurrence="cron")}setDisplayValue(){if(!this.expression.recurrence)return this.expression.displayValue="";if("cron"==this.expression.recurrence)return this.expression.displayValue=this.expression.stringValue;if("custom"!=this.expression.recurrence){switch(this.expression.displayValue=`${this.language.getLabel(this.recurrenceLabels[this.expression.recurrence])} `,this.expression.recurrence){case"daily":case"everyWeekday":this.expression.displayValue+=`${this.language.getLabel("LBL_AT_HOUR","","short")} `;break;case"weekly":this.expression.displayValue+=`${this.language.getLabel("LBL_DAY","","short")} `;break;case"annually":this.expression.displayValue+=`${this.language.getLabel("LBL_MONTH","","short")} `;break;default:this.expression.displayValue+=`${this.language.getLabel("LBL_ON_DATE","","short")} `}switch(this.expression.recurrence){case"daily":case"everyWeekday":if(!moment.isMoment(this.expression.everyAtValue))break;this.expression.displayValue+=`${this.expression.everyAtValue.tz(this.userPreferences.toUse.timezone).format(this.userPreferences.getTimeFormat())} ${this.language.getLabel("LBL_O_CLOCK")}`;break;case"monthly":this.expression.displayValue+=` ${this.expression.everyAtValue}${this.language.getLabel(1==this.expression.everyAtValue||21==this.expression.everyAtValue||31==this.expression.everyAtValue?"LBL_ST_DAY":2==this.expression.everyAtValue||22==this.expression.everyAtValue?"LBL_ND_DAY":3==this.expression.everyAtValue||23==this.expression.everyAtValue?"LBL_RD_DAY":"")}`;break;case"weekly":this.expression.displayValue+=` ${this.weekdays[this.expression.everyAtValue]}`;break;case"annually":this.expression.displayValue+=` ${this.months[this.expression.everyAtValue-1]}`;break;default:this.expression.displayValue+=`${this.expression.everyAtValue}`}return}this.expression.displayValue=`${this.language.getLabel("LBL_EVERY")} `;const e=this.expression.everyAtValue;if(this.expression.every&&"weekdays"!=this.expression.every){const e=this.language.getLabel(this.everyLabels[this.expression.every].replace("{s}",this.expression.everyQuantity>1?"S":""));this.expression.displayValue+=`${this.expression.everyQuantity} ${e}`}this.expression.everyAtValue&&("monthsAt"==this.expression.every?this.expression.displayValue+=` ${this.expression.everyAtValue}${this.language.getLabel(1==e||21==e||31==e?"LBL_ST_DAY":2==e||22==e?"LBL_ND_DAY":3==e||23==e?"LBL_RD_DAY":"LBL_TH_DAY")}`:"daysAt"==this.expression.every&&moment.isMoment(this.expression.everyAtValue)?this.expression.displayValue+=` ${e.tz(this.userPreferences.toUse.timezone).format(this.userPreferences.getTimeFormat())} ${this.language.getLabel("LBL_O_CLOCK")}`:"weekdays"==this.expression.every&&(this.expression.displayValue+=` ${this.expression.everyAtValue.map((e=>this.weekdays[e])).join(", ")}`))}static#e=this.ɵfac=function(e){return new(e||SystemInputCronExpression)(i.rXU(o.B),i.rXU(a.S))};static#t=this.ɵcmp=i.VBU({type:SystemInputCronExpression,selectors:[["system-input-cron-expression"]],inputs:{readOnly:"readOnly",asObject:"asObject"},features:[i.Jv_([{provide:l.kq,useExisting:(0,i.Rfq)((()=>SystemInputCronExpression)),multi:!0}])],decls:3,vars:2,consts:[["class","slds-grid",4,"ngIf","ngIfElse"],["readOnlyContainer",""],[1,"slds-grid"],[1,"slds-form-element","slds-grid","slds-grid--vertical-align-center","slds-grow"],[1,"slds-form-element__label"],["label","LBL_REPEAT"],[1,"slds-form-element__control","slds-grow"],[1,"slds-select_container"],[1,"slds-select",3,"ngModel","ngModelChange"],["value",""],["value","daily"],["label","LBL_DAILY"],["value","weekly"],["label","LBL_WEEKLY"],["value","monthly"],["label","LBL_MONTHLY"],["value","annually"],["label","LBL_ANNUALLY"],["value","everyWeekday"],["label","LBL_EVERY_WEEKDAY"],["value","custom"],["label","LBL_CUSTOM"],["value","cron"],["label","LBL_CRON_EXPRESSION"],["class","slds-form-element__label slds-align-middle slds-m-left--small",3,"ngSwitch",4,"ngIf"],[4,"ngIf"],[1,"slds-form-element__label","slds-align-middle","slds-m-left--small",3,"ngSwitch"],["label","LBL_AT_HOUR","length","short",4,"ngSwitchCase"],["label","LBL_DAY","length","short",4,"ngSwitchCase"],["label","LBL_MONTH","length","short",4,"ngSwitchCase"],["label","LBL_ON_DATE","length","short",4,"ngSwitchDefault"],["label","LBL_AT_HOUR","length","short"],["label","LBL_DAY","length","short"],["label","LBL_MONTH","length","short"],["label","LBL_ON_DATE","length","short"],["class","slds-form-element slds-grid slds-grid--vertical-align-center slds-m-left--xx-small slds-grow",4,"ngIf"],["class","slds-form-element__label",4,"ngIf"],["class","slds-form-element slds-grid slds-m-left--xx-small slds-grow",4,"ngIf"],["class","slds-form-element slds-m-left--xx-small slds-grow",4,"ngIf"],["class","slds-form-element slds-m-left--xx-small slds-grid slds-grid--vertical-align-center slds-grow",4,"ngIf"],[1,"slds-form-element","slds-grid","slds-grid--vertical-align-center","slds-m-left--xx-small","slds-grow"],["label","LBL_EVERY"],["type","text","size","3","maxlength","3",1,"slds-input",3,"ngModel","ngModelChange"],["label","LBL_EVERY",1,"slds-m-left--x-small"],[1,"slds-form-element","slds-grid","slds-m-left--xx-small","slds-grow"],["value","minutes"],[3,"label"],["value","hours"],["value","days"],["value","daysAt"],["value","months"],["value","monthsAt"],["value","weekdays"],["label","LBL_WEEK_ON"],[1,"slds-form-element","slds-m-left--xx-small","slds-grow"],[1,"slds-form-element__control","slds-input-has-fixed-addon","slds-grow"],[1,"slds-grow","slds-p-left--xxx-small",3,"ngModel","ngModelChange"],[1,"slds-form-element__addon",2,"white-space","nowrap"],["label","LBL_O_CLOCK"],["type","text","size","3","maxlength","6",1,"slds-input",3,"ngModel","ngModelChange"],[3,"ngSwitch",4,"ngIf"],[3,"ngSwitch"],["label","LBL_ST_DAY",4,"ngSwitchCase"],["label","LBL_ND_DAY",4,"ngSwitchCase"],["label","LBL_RD_DAY",4,"ngSwitchCase"],["label","LBL_TH_DAY",4,"ngSwitchDefault"],["label","LBL_ST_DAY"],["label","LBL_ND_DAY"],["label","LBL_RD_DAY"],["label","LBL_TH_DAY"],[1,"slds-form-element","slds-m-left--xx-small","slds-grid","slds-grid--vertical-align-center","slds-grow"],[3,"showPills","ngModel","listItems","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[1,"slds-m-left--xx-small","slds-grid","slds-grid--vertical-align-center","slds-grow"],[1,"slds-form-element","slds-grow"],["type","text","system-placeholder","LBL_MINUTES","size","3","maxlength","6",1,"slds-input",3,"ngModel","ngModelChange"],[1,"slds-m-horizontal--xx-small"],["type","text","system-placeholder","LBL_HOURS","size","3","maxlength","6",1,"slds-input",3,"ngModel","ngModelChange"],["type","text","system-placeholder","LBL_MONTH_DAY","size","3","maxlength","6",1,"slds-input",3,"ngModel","ngModelChange"],["type","text","system-placeholder","LBL_MONTH","size","3","maxlength","6",1,"slds-input",3,"ngModel","ngModelChange"],["type","text","system-placeholder","LBL_WEEK_DAY","size","3","maxlength","6",1,"slds-input",3,"ngModel","ngModelChange"]],template:function(e,t){if(1&e&&i.DNE(0,B,25,4,"div",0)(1,O,1,1,"ng-template",null,1,i.C5r),2&e){const e=i.sdS(2);i.Y8G("ngIf",!t.readOnly)("ngIfElse",e)}},dependencies:[r.m,d.Sq,d.bT,d.ux,d.e1,d.fG,l.xH,l.y7,l.me,l.wz,l.BC,l.tU,l.vS,c.T,u.W,m.M],encapsulation:2})}return SystemInputCronExpression})()},75642:(e,t,s)=>{"use strict";s.d(t,{u:()=>b});var i=s(54438),n=s(84341),l=s(69904),o=s(50531),a=s(49722),r=s(90154),d=s(60177),c=s(25863);function u(e,t){if(1&e){const e=i.RV6();i.j41(0,"button",12),i.bIt("click",(function(){i.eBV(e);const t=i.XpG(2);return i.Njj(t.clearField())})),i.nrm(1,"system-button-icon",13),i.k0s()}2&e&&(i.R7$(),i.Y8G("icon","close"))}const m=e=>({"slds-theme--shade":e});function h(e,t){if(1&e&&(i.j41(0,"div",7)(1,"div",8)(2,"span",9)(3,"span",10),i.EFF(4),i.k0s(),i.DNE(5,u,2,1,"button",11),i.k0s()()()),2&e){const e=i.XpG();i.R7$(2),i.Y8G("ngClass",i.eq3(3,m,e._disabled)),i.R7$(2),i.JRh(e.currentdashboard),i.R7$(),i.Y8G("ngIf",!e._disabled)}}function g(e,t){if(1&e){const e=i.RV6();i.j41(0,"div",14)(1,"input",15),i.mxI("ngModelChange",(function(t){i.eBV(e);const s=i.XpG();return i.DH7(s.searchterm,t)||(s.searchterm=t),i.Njj(t)})),i.bIt("blur",(function(){i.eBV(e);const t=i.XpG();return i.Njj(t.onBlur())})),i.k0s()()}if(2&e){const e=i.XpG();i.R7$(),i.Y8G("disabled",e._disabled),i.R50("ngModel",e.searchterm)}}function p(e,t){if(1&e){const e=i.RV6();i.j41(0,"li",16),i.bIt("mousedown",(function(){const t=i.eBV(e).$implicit,s=i.XpG();return i.Njj(s.setDashboardSet(t.id))})),i.j41(1,"div",17)(2,"span",18),i.EFF(3),i.k0s()()()}if(2&e){const e=t.$implicit;i.R7$(3),i.JRh(e.name)}}const f=e=>({"slds-is-open":e});let b=(()=>{class SystemInputDashboard{set disabled(e){this._disabled=!1!==e}constructor(e,t,s){this.language=e,this.modal=t,this.backend=s,this._disabled=!1,this._time={display:"",moment:null,offset:0,valid:!0},this._searchterm="",this.dashboards=[],this.dashboard="",this.getDashboards()}getDashboards(){this.backend.getRequest("configuration/spiceui/core/module/dashboards").subscribe((e=>{this.dashboards=e,this.dashboard&&(this.currentdashboard=this.dashboards.find((e=>e.id==this.dashboard)).name)}))}get isOpen(){return""!=this._searchterm}get searchterm(){return this._searchterm}set searchterm(e){this._searchterm=e}get Dashboards(){let e=[];for(let t of this.dashboards)(""==this._searchterm||""!=this._searchterm&&-1!=t.name.toLowerCase().indexOf(this._searchterm.toLowerCase()))&&e.push(t);return e}ngOnDestroy(){this.clickListener&&this.clickListener()}onBlur(){this._searchterm=""}clearField(){this.dashboard="",this.onChange("")}setDashboardSet(e){this.dashboard=e,this.currentdashboard=this.dashboards.find((e=>e.id==this.dashboard)).name,this._searchterm="",this.onChange(e)}trackByFn(e,t){return t.id}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}writeValue(e){this.dashboard=e}static#e=this.ɵfac=function(e){return new(e||SystemInputDashboard)(i.rXU(l.B),i.rXU(o.y),i.rXU(a.H))};static#t=this.ɵcmp=i.VBU({type:SystemInputDashboard,selectors:[["system-input-dashboard"]],inputs:{disabled:"disabled"},features:[i.Jv_([{provide:n.kq,useExisting:(0,i.Rfq)((()=>SystemInputDashboard)),multi:!0}])],decls:7,vars:6,consts:[[1,"slds-combobox_container"],["role","combobox",1,"slds-combobox","slds-dropdown-trigger","slds-dropdown-trigger_click",3,"ngClass"],["class","slds-form-element__control",4,"ngIf"],["class","slds-combobox__form-element slds-input-has-icon slds-input-has-icon_right",4,"ngIf"],["role","listbox",1,"slds-dropdown","slds-dropdown_fluid","slds-dropdown--length-7"],["role","presentation",1,"slds-listbox","slds-listbox_vertical"],["role","presentation","class","slds-listbox__item",3,"mousedown",4,"ngFor","ngForOf"],[1,"slds-form-element__control"],[1,"slds-pill_container"],[1,"slds-pill","slds-size--1-of-1","slds-p-horizontal--xx-small",3,"ngClass"],[1,"slds-pill__label"],["class","slds-button slds-button--icon slds-pill__remove",3,"click",4,"ngIf"],[1,"slds-button","slds-button--icon","slds-pill__remove",3,"click"],[3,"icon"],[1,"slds-combobox__form-element","slds-input-has-icon","slds-input-has-icon_right"],["type","search","system-placeholder","LBL_SEARCH","role","combobox",1,"slds-input","slds-combobox__input",3,"disabled","ngModel","ngModelChange","blur"],["role","presentation",1,"slds-listbox__item",3,"mousedown"],["role","option",1,"slds-media","slds-listbox__option","slds-listbox__option_plain"],[1,"slds-truncate"]],template:function(e,t){1&e&&(i.j41(0,"div",0)(1,"div",1),i.DNE(2,h,6,5,"div",2)(3,g,2,2,"div",3),i.j41(4,"div",4)(5,"ul",5),i.DNE(6,p,4,1,"li",6),i.k0s()()()()),2&e&&(i.R7$(),i.Y8G("ngClass",i.eq3(4,f,t.isOpen)),i.R7$(),i.Y8G("ngIf",t.dashboard),i.R7$(),i.Y8G("ngIf",!t.dashboard),i.R7$(3),i.Y8G("ngForOf",t.Dashboards))},dependencies:[r.m,d.YU,d.Sq,d.bT,n.me,n.BC,n.vS,c.t],encapsulation:2})}return SystemInputDashboard})()},73976:(e,t,s)=>{"use strict";s.d(t,{Y:()=>y});var i=s(54438),n=s(84341),l=s(69904),o=s(50531),a=s(49722),r=s(83935),d=s(90154),c=s(60177),u=s(25863);function m(e,t){if(1&e){const e=i.RV6();i.j41(0,"button",12),i.bIt("click",(function(){i.eBV(e);const t=i.XpG(2);return i.Njj(t.clearField())})),i.nrm(1,"system-button-icon",13),i.k0s()}2&e&&(i.R7$(),i.Y8G("icon","close"))}const h=e=>({"slds-theme--shade":e});function g(e,t){if(1&e&&(i.j41(0,"div",7)(1,"div",8)(2,"span",9)(3,"span",10),i.EFF(4),i.k0s(),i.DNE(5,m,2,1,"button",11),i.k0s()()()),2&e){const e=i.XpG();i.R7$(2),i.Y8G("ngClass",i.eq3(3,h,e._disabled)),i.R7$(2),i.JRh(e.currentdashboardset),i.R7$(),i.Y8G("ngIf",!e._disabled)}}function p(e,t){if(1&e){const e=i.RV6();i.j41(0,"div",14)(1,"input",15),i.mxI("ngModelChange",(function(t){i.eBV(e);const s=i.XpG();return i.DH7(s.searchterm,t)||(s.searchterm=t),i.Njj(t)})),i.bIt("blur",(function(){i.eBV(e);const t=i.XpG();return i.Njj(t.onBlur())})),i.k0s()()}if(2&e){const e=i.XpG();i.R7$(),i.Y8G("disabled",e._disabled),i.R50("ngModel",e.searchterm)}}function f(e,t){if(1&e){const e=i.RV6();i.j41(0,"li",16),i.bIt("mousedown",(function(){const t=i.eBV(e).$implicit,s=i.XpG();return i.Njj(s.setDashboardSet(t.id))})),i.j41(1,"div",17)(2,"span",18),i.EFF(3),i.k0s()()()}if(2&e){const e=t.$implicit;i.R7$(3),i.JRh(e.name)}}const b=e=>({"slds-is-open":e});let y=(()=>{class SystemInputDashboardset{set disabled(e){this._disabled=!1!==e}constructor(e,t,s,i){this.language=e,this.modal=t,this.backend=s,this.metadata=i,this._disabled=!1,this._time={display:"",moment:null,offset:0,valid:!0},this._searchterm="",this.dashboardSets=[],this.dashboardset="",this.getDashboardSets()}getDashboardSets(){this.backend.getRequest("configuration/spiceui/core/module/dashboardsets").subscribe((e=>{this.dashboardSets=e,this.dashboardset&&(this.currentdashboardset=this.dashboardSets.find((e=>e.id==this.dashboardset)).name)}))}get isOpen(){return""!=this._searchterm}get searchterm(){return this._searchterm}set searchterm(e){this._searchterm=e}get dashboardsets(){let e=[];for(let t of this.dashboardSets)(""==this._searchterm||""!=this._searchterm&&-1!=t.name.toLowerCase().indexOf(this._searchterm.toLowerCase()))&&e.push(t);return e}ngOnDestroy(){this.clickListener&&this.clickListener()}onBlur(){this._searchterm=""}clearField(){this.dashboardset="",this.onChange("")}setDashboardSet(e){this.dashboardset=e,this.currentdashboardset=this.dashboardSets.find((e=>e.id==this.dashboardset)).name,this._searchterm="",this.onChange(e)}trackByFn(e,t){return t.id}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}writeValue(e){this.dashboardset=e}static#e=this.ɵfac=function(e){return new(e||SystemInputDashboardset)(i.rXU(l.B),i.rXU(o.y),i.rXU(a.H),i.rXU(r.yu))};static#t=this.ɵcmp=i.VBU({type:SystemInputDashboardset,selectors:[["system-input-dashboardset"]],inputs:{disabled:"disabled"},features:[i.Jv_([{provide:n.kq,useExisting:(0,i.Rfq)((()=>SystemInputDashboardset)),multi:!0}])],decls:7,vars:6,consts:[[1,"slds-combobox_container"],["role","combobox",1,"slds-combobox","slds-dropdown-trigger","slds-dropdown-trigger_click",3,"ngClass"],["class","slds-form-element__control",4,"ngIf"],["class","slds-combobox__form-element slds-input-has-icon slds-input-has-icon_right",4,"ngIf"],["role","listbox",1,"slds-dropdown","slds-dropdown_fluid","slds-dropdown--length-7"],["role","presentation",1,"slds-listbox","slds-listbox_vertical"],["role","presentation","class","slds-listbox__item",3,"mousedown",4,"ngFor","ngForOf"],[1,"slds-form-element__control"],[1,"slds-pill_container"],[1,"slds-pill","slds-size--1-of-1","slds-p-horizontal--xx-small",3,"ngClass"],[1,"slds-pill__label"],["class","slds-button slds-button--icon slds-pill__remove",3,"click",4,"ngIf"],[1,"slds-button","slds-button--icon","slds-pill__remove",3,"click"],[3,"icon"],[1,"slds-combobox__form-element","slds-input-has-icon","slds-input-has-icon_right"],["type","search","system-placeholder","LBL_SEARCH","role","combobox",1,"slds-input","slds-combobox__input",3,"disabled","ngModel","ngModelChange","blur"],["role","presentation",1,"slds-listbox__item",3,"mousedown"],["role","option",1,"slds-media","slds-listbox__option","slds-listbox__option_plain"],[1,"slds-truncate"]],template:function(e,t){1&e&&(i.j41(0,"div",0)(1,"div",1),i.DNE(2,g,6,5,"div",2)(3,p,2,2,"div",3),i.j41(4,"div",4)(5,"ul",5),i.DNE(6,f,4,1,"li",6),i.k0s()()()()),2&e&&(i.R7$(),i.Y8G("ngClass",i.eq3(4,b,t.isOpen)),i.R7$(),i.Y8G("ngIf",t.dashboardset),i.R7$(),i.Y8G("ngIf",!t.dashboardset),i.R7$(3),i.Y8G("ngForOf",t.dashboardsets))},dependencies:[d.m,c.YU,c.Sq,c.bT,n.me,n.BC,n.vS,u.t],encapsulation:2})}return SystemInputDashboardset})()},26024:(e,t,s)=>{"use strict";s.d(t,{M:()=>I});var i=s(54438),n=s(84341),l=s(96697),o=s(48849),a=s(50531),r=s(49722),d=s(53584),c=s(80256),u=s(86532),m=s(60177),h=s(25863),g=s(1626),p=s(32062);function f(e,t){if(1&e){const e=i.RV6();i.j41(0,"button",13),i.bIt("click",(function(){i.eBV(e);const t=i.XpG(2);return i.Njj(t.clear())})),i.nrm(1,"system-button-icon",14),i.k0s()}}function b(e,t){if(1&e&&(i.j41(0,"div",9),i.DNE(1,f,2,0,"button",10),i.j41(2,"button",11),i.nrm(3,"system-button-icon",12),i.k0s()()),2&e){const e=i.XpG();i.R7$(),i.Y8G("ngIf",e.canclear)}}function y(e,t){if(1&e){const e=i.RV6();i.j41(0,"div",18)(1,"button",19),i.bIt("click",(function(){i.eBV(e);const t=i.XpG(2);return i.Njj(t.openCalendar())})),i.nrm(2,"system-label",20),i.k0s()()}}function v(e,t){if(1&e){const e=i.RV6();i.j41(0,"div",15)(1,"system-input-date-picker",16),i.bIt("datePicked",(function(t){i.eBV(e);const s=i.XpG();return i.Njj(s.datePicked(t))})),i.k0s(),i.DNE(2,y,3,0,"div",17),i.k0s()}if(2&e){const e=i.XpG();i.Y8G("ngClass",e.dropdownside),i.R7$(),i.Y8G("setDate",e._date.moment)("minDate",e.minDate)("maxDate",e.maxDate)("enabledDays",e.enabledDays)("holidayCalendarId",e.holidayCalendarId)("holidaysDisabled",e.holidaysDisabled),i.R7$(),i.Y8G("ngIf",e.showCalendarButton)}}function _(e,t){1&e&&(i.j41(0,"div",21),i.nrm(1,"system-label",22),i.k0s())}const k=e=>({"slds-has-error":e}),R=e=>({"slds-is-edited":e});let I=(()=>{class SystemInputDate{set dateFormatted(e){this._dateFormatted=!1!==e}set disabled(e){this.isDisabled=!1!==e}set hideError(e){this.hideErrorMessage=!1!==e}constructor(e,t,s,n,l,o,a,r){this.elementref=e,this.renderer=t,this.userpreferences=s,this.modal=n,this.cdref=l,this.backend=o,this.config=a,this.elementRef=r,this._dateFormatted=!1,this.showCalendarButton=!0,this.holidaysDisabled=!0,this.holidays=[],this._date={display:"",moment:null,valid:!0},this.isDisabled=!1,this.isDirty=!1,this.showClear=!1,this.hideErrorMessage=!1,this.enabledDays=[0,1,2,3,4,5,6],this.displayError=!0,this.valid=new i.bkB}ngOnInit(){this.loadHolidays()}loadHolidays(){if(this.holidayCalendarId){let e=this.config.getData("holidays");e&&e[this.holidayCalendarId]?this.holidays=e[this.holidayCalendarId]:this.backend.getRequest(`module/SystemHolidayCalendars/${this.holidayCalendarId}/holidays`).subscribe({next:t=>{e||(e=[]),e[this.holidayCalendarId]=t,this.config.setData("holidays",e),this.holidays=t}})}}isHoliday(e){if(!e)return!1;let t=e.format("YYYY-MM-DD");return!!this.holidays.find((e=>e.holiday_date.substr(0,10)==t))}isEnabledDay(e){return!e||this.enabledDays.indexOf(parseInt(e.format("d"),10))>=0}get isValid(){return this._date.valid&&(!this._date.moment||!this.minDate||this._date.moment.isSameOrAfter(this.minDate))&&(!this._date.moment||!this.maxDate||this._date.moment.isSameOrBefore(this.maxDate))&&(!this.holidaysDisabled||!this.isHoliday(this._date.moment))&&this.isEnabledDay(this._date.moment)}get display(){return this._date.display?this._date.display:""}set display(e){if(e){let t=moment(e,this.userpreferences.getDateFormat(),!0);t.isValid()?(this._date.moment||(this._date.moment=new moment),this._date.moment.year(t.year()).month(t.month()).date(t.date()),this._date.valid=!0,"function"==typeof this.onChange&&this.onChange(this._date.moment)):(this._date.display=e,this._date.valid=!1)}else this.clear();this.valid.emit(this.isValid)}get canclear(){return this.showClear&&!!this._date.display}get dropdownside(){let e=this.elementref.nativeElement.getBoundingClientRect();return window.innerWidth-e.left<280?"slds-dropdown_right":"slds-dropdown_left"}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}writeValue(e){this._dateFormatted?e?(this._date.moment=new moment(e),this._date.display=this._date.moment.format(this.userpreferences.getDateFormat())):this.clear(!1):e&&e.isValid&&e.isValid()?(this._date.moment=new moment(e),this._date.display=this._date.moment.format(this.userpreferences.getDateFormat())):this.clear(!1),this.cdref.detectChanges()}clear(e=!0){this._date.moment=null,this._date.display="",this._date.valid=!0,this.valid.emit(!0),"function"==typeof this.onChange&&e&&this.onChange(this._date.moment)}datePicked(e,t){e&&(this._date.moment||(this._date.moment=new moment),moment.isMoment(e)||(e=moment(e)),this._date.moment.set("year",e.year()),this._date.moment.set("month",e.month()),this._date.moment.set("date",e.date()),t&&(this._date.moment.set("hour",e.hour()),this._date.moment.set("minute",e.minute())),this._date.display=this._date.moment.format(this.userpreferences.getDateFormat()),this._date.valid=!0,this.valid.emit(!0),"function"==typeof this.onChange&&this.onChange(this._dateFormatted?this._date.moment.format("YYYY-MM-DD"):this._date.moment)),this.valid.emit(this.isValid)}openCalendar(){this.modal.openModal("Calendar").subscribe((e=>{e.instance.calendar.asPicker=!0,e.instance.calendar.pickerDate$.pipe((0,l.s)(1)).subscribe((t=>{e.instance.self.destroy(),this.datePicked(t,!0)}))}))}emitBlur(){this.elementRef.nativeElement.dispatchEvent(new Event("blur",{bubbles:!0}))}static#e=this.ɵfac=function(e){return new(e||SystemInputDate)(i.rXU(i.aKT),i.rXU(i.sFG),i.rXU(o.S),i.rXU(a.y),i.rXU(i.gRc),i.rXU(r.H),i.rXU(d.i),i.rXU(i.aKT))};static#t=this.ɵcmp=i.VBU({type:SystemInputDate,selectors:[["system-input-date"]],inputs:{dateFormatted:[i.Mj6.None,"system-input-date-formatted","dateFormatted"],showCalendarButton:"showCalendarButton",holidayCalendarId:"holidayCalendarId",holidaysDisabled:"holidaysDisabled",isDirty:"isDirty",disabled:"disabled",minDate:"minDate",maxDate:"maxDate",id:"id",showClear:"showClear",hideError:[i.Mj6.None,"system-input-date-hide-error","hideError"],enabledDays:"enabledDays",displayError:"displayError"},outputs:{valid:"valid"},features:[i.Jv_([{provide:n.kq,useExisting:(0,i.Rfq)((()=>SystemInputDate)),multi:!0}])],decls:9,vars:13,consts:[[1,"slds-form-element",3,"ngClass"],[1,"slds-form-element__control"],[1,"slds-combobox_container"],["system-dropdown-trigger","","role","combobox",1,"slds-combobox","slds-dropdown-trigger","slds-dropdown-trigger_click","slds-combobox-picklist","slds-timepicker",3,"stickyOnMobile"],["role","none",1,"slds-combobox__form-element","slds-input-has-icon","slds-input-has-icon_right"],["aria-controls","listbox-unique-id","autocomplete","off","role","textbox","type","text","placeholder"," ",1,"slds-input","slds-combobox__input",3,"disabled","ngModel","ngClass","id","ngModelChange","blur"],["class","slds-input__icon-group slds-input__icon-group_right slds-height_full slds-grid","style","top: 0; margin: 0; height: 100%",4,"ngIf"],["aria-hidden","false","class","slds-datepicker slds-dropdown slds-dropdown--large","role","dialog",3,"ngClass",4,"ngIf"],["class","slds-form-element__help",4,"ngIf"],[1,"slds-input__icon-group","slds-input__icon-group_right","slds-height_full","slds-grid",2,"top","0","margin","0","height","100%"],["class","slds-input__icon slds-input__icon_right slds-button slds-button_icon","style","position: relative;",3,"click",4,"ngIf"],["system-dropdown-trigger-button","",1,"slds-input__icon","slds-input__icon_right","slds-button","slds-button_icon",2,"position","relative"],["icon","event"],[1,"slds-input__icon","slds-input__icon_right","slds-button","slds-button_icon",2,"position","relative",3,"click"],["icon","clear"],["aria-hidden","false","role","dialog",1,"slds-datepicker","slds-dropdown","slds-dropdown--large",3,"ngClass"],[3,"setDate","minDate","maxDate","enabledDays","holidayCalendarId","holidaysDisabled","datePicked"],["class","slds-grid slds-grid--align-center",4,"ngIf"],[1,"slds-grid","slds-grid--align-center"],[1,"slds-button","slds-text-link","slds-p-around--xx-small",3,"click"],["label","LBL_CALENDAR"],[1,"slds-form-element__help"],["label","LBL_INPUT_INVALID"]],template:function(e,t){1&e&&(i.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"input",5),i.mxI("ngModelChange",(function(e){return i.DH7(t.display,e)||(t.display=e),e})),i.bIt("blur",(function(){return t.emitBlur()})),i.k0s(),i.DNE(6,b,4,1,"div",6),i.k0s(),i.DNE(7,v,3,8,"div",7),i.k0s()()(),i.DNE(8,_,2,0,"div",8),i.k0s()),2&e&&(i.Y8G("ngClass",i.eq3(9,k,!t.isValid)),i.R7$(3),i.Y8G("stickyOnMobile",!0),i.R7$(2),i.Y8G("disabled",t.isDisabled),i.R50("ngModel",t.display),i.Y8G("ngClass",i.eq3(11,R,t.isDirty))("id",t.id),i.R7$(),i.Y8G("ngIf",!t.isDisabled),i.R7$(),i.Y8G("ngIf",!t.isDisabled),i.R7$(),i.Y8G("ngIf",!t.isValid&&!t.hideErrorMessage))},dependencies:[c.q,u.C,m.YU,m.bT,n.me,n.BC,n.vS,h.t,g.Q,p.W],encapsulation:2,changeDetection:0})}return SystemInputDate})()},1626:(e,t,s)=>{"use strict";s.d(t,{Q:()=>C});var i=s(54438),n=s(69904),l=s(71692),o=s(48849),a=s(49722),r=s(53584),d=s(60177),c=s(84341),u=s(25863),m=s(32062),h=s(86262),g=s(41587);function p(e,t){if(1&e&&i.nrm(0,"system-select-option",17),2&e){const e=t.$implicit;i.Y8G("value",e.id)("display",e.name)}}function f(e,t){1&e&&i.nrm(0,"th",18)}function b(e,t){if(1&e&&(i.j41(0,"th",18)(1,"abbr",19),i.EFF(2),i.k0s()()),2&e){const e=t.$implicit,s=t.index,n=i.XpG();i.R7$(),i.Y8G("title",n.weekdayLong(s)),i.R7$(),i.JRh(e)}}function y(e,t){if(1&e&&(i.j41(0,"td",22)(1,"abbr",23),i.EFF(2),i.k0s()()),2&e){const e=i.XpG().$implicit,t=i.XpG();i.R7$(),i.Y8G("title",t.language.getLabel("LBL_WEEK")+" "+(null==e?null:e.number)),i.R7$(),i.SpI(" ",null==e?null:e.number," ")}}const v=(e,t,s)=>({"slds-disabled-text":e,"slds-is-today":t,"slds-is-selected":s});function _(e,t){if(1&e){const e=i.RV6();i.j41(0,"td",24),i.bIt("click",(function(t){const s=i.eBV(e).$implicit,n=i.XpG(2);return i.Njj(n.pickDate(s,t))})),i.j41(1,"span",25),i.EFF(2),i.k0s()()}if(2&e){const e=t.$implicit,s=i.XpG(2);i.Y8G("ngClass",i.sMw(5,v,s.disabled(e),s.isToday(e),s.isCurrent(e))),i.R7$(),i.HbH(s.notCurrentMonth(e)&&!s.disabled(e)?"slds-day_adjacent-month":"slds-day"),i.Y8G("ngStyle",s.getDayStyle(e)),i.R7$(),i.JRh(e.date())}}function k(e,t){if(1&e&&(i.j41(0,"tr"),i.DNE(1,y,3,2,"td",20)(2,_,3,9,"td",21),i.k0s()),2&e){const e=t.$implicit,s=i.XpG();i.R7$(),i.Y8G("ngIf","small"!=s.layout.screenwidth),i.R7$(),i.Y8G("ngForOf",null==e?null:e.days)}}function R(e,t){if(1&e&&(i.j41(0,"td",22)(1,"abbr",23),i.EFF(2),i.k0s()()),2&e){const e=i.XpG().$implicit,t=i.XpG(2);i.R7$(),i.Y8G("title",t.language.getLabel("LBL_WEEK")+" "+(null==e?null:e.number)),i.R7$(),i.SpI(" ",null==e?null:e.number," ")}}function I(e,t){if(1&e){const e=i.RV6();i.j41(0,"td",24),i.bIt("click",(function(t){const s=i.eBV(e).$implicit,n=i.XpG(3);return i.Njj(n.pickDate(s,t))})),i.j41(1,"span",25),i.EFF(2),i.k0s()()}if(2&e){const e=t.$implicit,s=i.XpG(3);i.Y8G("ngClass",i.sMw(5,v,s.disabled(e),s.isToday(e),s.isCurrent(e))),i.R7$(),i.HbH(s.notCurrentMonth(e)&&!s.disabled(e)?"slds-day_adjacent-month":"slds-day"),i.Y8G("ngStyle",s.getDayStyle(e)),i.R7$(),i.JRh(e.date())}}function x(e,t){if(1&e&&(i.j41(0,"tr"),i.DNE(1,R,3,2,"td",20)(2,I,3,9,"td",21),i.k0s()),2&e){const e=t.$implicit,s=i.XpG(2);i.R7$(),i.Y8G("ngIf","small"!=s.layout.screenwidth),i.R7$(),i.Y8G("ngForOf",null==e?null:e.days)}}function j(e,t){if(1&e&&(i.j41(0,"tbody")(1,"tr")(2,"td",26)(3,"div",27)(4,"h2",28),i.EFF(5),i.k0s(),i.j41(6,"div"),i.EFF(7),i.k0s()()()(),i.DNE(8,x,3,2,"tr",14),i.k0s()),2&e){const e=i.XpG();i.R7$(2),i.BMQ("colspan",e.weekdays.length+1),i.R7$(3),i.SpI(" ",e.secondMonth," "),i.R7$(2),i.SpI(" ",e.secondYearDisplay," "),i.R7$(),i.Y8G("ngForOf",e.secondGrid)}}function G(e,t){if(1&e){const e=i.RV6();i.j41(0,"button",29),i.bIt("click",(function(t){i.eBV(e);const s=i.XpG();return i.Njj(s.goToday(t))})),i.nrm(1,"system-label",30),i.k0s()}}let C=(()=>{class SystemInputDatePicker{constructor(e,t,s,n,l,o){this.language=e,this.layout=t,this.userPreferences=s,this.backend=n,this.config=l,this.cdRef=o,this.currentGrid=[],this.secondGrid=[],this.yearsList=[],this.dual=!1,this.weekStartDay=0,this.showTodayButton=!0,this.enabledDays=[0,1,2,3,4,5,6],this.holidaysDisabled=!0,this.holidays=[],this.datePicked=new i.bkB,this.curDate=new moment,this.secondDate=new moment;let a=this.userPreferences.unchangedPreferences.global;this.weekStartDay="Monday"==a.week_day_start?1:this.weekStartDay}get currentYear(){return this._currentYear}set currentYear(e){this._currentYear=e,this.curDate.year(e.name),this.buildGrids()}set secondYear(e){this.curDate.year(e.length?e:e.name),this.buildGrids()}get secondYearDisplay(){return this.secondDate.year()}get currentMonth(){return moment.localeData().months()[this.curDate.month()]}get secondMonth(){return moment.localeData().months()[this.secondDate.month()]}get weekdays(){let e=this.language.currentlanguage.substring(0,2);moment.locale(e);let t=moment.weekdaysMin();if(1===this.weekStartDay){let e=t.shift();return t.push(e),t}return t}ngOnInit(){this.loadHolidays(),this.initializeGrid()}ngOnChanges(){this.initializeGrid()}loadHolidays(){if(this.holidayCalendarId){let e=this.config.getData("holidays");e&&e[this.holidayCalendarId]?this.holidays=e[this.holidayCalendarId]:this.backend.getRequest(`module/SystemHolidayCalendars/${this.holidayCalendarId}/holidays`).subscribe({next:t=>{e||(e=[]),e[this.holidayCalendarId]=t,this.config.setData("holidays",e),this.holidays=t,this.cdRef.detectChanges()}})}}initializeGrid(){this.setDate?(this.curDate=new moment(this.setDate),this.secondDate=new moment(this.setDate)):(this.curDate=new moment,this.secondDate=new moment),this.secondDate.add(1,"month"),this.buildYearsList(),this.buildGrids(),this._currentYear={id:this.curDate.year(),name:this.curDate.year()}}buildYearsList(){this.yearsList=new Array(11).fill("").map(((e,t)=>{let s=t-5+ +this.curDate.year();return{id:s.toString(),name:s.toString()}}))}weekdayLong(e){let t=this.language.currentlanguage.substring(0,2);return moment.locale(t),moment.weekdays(e+this.weekStartDay)}notCurrentMonth(e){return!!e&&(e.isBefore(this.curDate,"month")||!this.dual&&e.isAfter(this.curDate,"month")||this.dual&&e.isAfter(this.secondDate,"month"))}disabled(e){if(!e)return!1;let t=new moment(e.format());return!(!this.minDate||!t.isBefore(this.minDate,"day"))||(!(!this.maxDate||!t.isAfter(this.maxDate,"day"))||(!(!this.holidaysDisabled||!this.isHoliday(e))||this.enabledDays.indexOf(parseInt(e.format("d"),10))<0))}getDayStyle(e){let t={cursor:this.disabled(e)?"default":"pointer"};return this.isHoliday(e)&&(t.border="1px solid",t["border-radius"]="2px"),t}isHoliday(e){let t=e.format("YYYY-MM-DD");return!!this.holidays.find((e=>e.holiday_date.substr(0,10)==t))}isToday(e){if(!e)return!1;let t=new moment;return t.isSame(e,"year")&&t.isSame(e,"month")&&t.isSame(e,"day")}isCurrent(e){return!!e&&(this.setDate&&this.setDate.isSame(e,"year")&&this.setDate.isSame(e,"month")&&this.setDate.isSame(e,"day"))}prevMonth(e){e.stopPropagation(),this.curDate.subtract(1,"months"),this.dual&&this.secondDate.subtract(1,"months"),this.buildGrids()}nextMonth(e){e.stopPropagation(),this.curDate.add(1,"months"),this.dual&&this.secondDate.add(1,"months"),this.buildGrids()}goToday(e){e.stopPropagation(),this.curDate=new moment,this.buildGrids()}pickDate(e,t){if(this.disabled(e))t.preventDefault(),t.stopPropagation();else{let t=new moment(e.format());this.datePicked.emit(t)}}buildGrids(){this.currentGrid=[],this.secondGrid=[],this.buildGridWeeks(this.currentGrid,this.curDate),this.dual&&this.buildGridWeeks(this.secondGrid,this.secondDate)}buildGridWeeks(e,t){let s=new moment(t);s.date(1),0==s.day()&&1==this.weekStartDay&&s.subtract(7,"d"),s.day(this.weekStartDay);let i=0;for(;i<6;){let n=0,l={days:[],number:s.format("w")};for(;n<7;)(t.isSame(this.curDate,"month")&&s.isSameOrBefore(this.curDate,"month")||!this.dual&&s.isAfter(this.curDate,"month")||this.dual&&t.isSame(this.secondDate,"month")&&s.isSameOrAfter(this.secondDate,"month"))&&(l.days[n]=moment(s.format())),5==s.format("d")&&(l.number=s.format("w")),s.add(1,"d"),n++;if(e.push(l),s.isAfter(t,"month")||s.isAfter(t,"year"))break;i++}}static#e=this.ɵfac=function(e){return new(e||SystemInputDatePicker)(i.rXU(n.B),i.rXU(l.Z),i.rXU(o.S),i.rXU(a.H),i.rXU(r.i),i.rXU(i.gRc))};static#t=this.ɵcmp=i.VBU({type:SystemInputDatePicker,selectors:[["system-input-date-picker"]],hostAttrs:[1,"slds-datepicker"],inputs:{setDate:"setDate",dual:"dual",minDate:"minDate",maxDate:"maxDate",weekStartDay:"weekStartDay",showTodayButton:"showTodayButton",enabledDays:"enabledDays",holidayCalendarId:"holidayCalendarId",holidaysDisabled:"holidaysDisabled"},outputs:{datePicked:"datePicked"},features:[i.OA$],decls:23,vars:12,consts:[[1,"slds-datepicker__filter","slds-grid"],[1,"slds-datepicker__filter_month","slds-grid","slds-grid_align-spread","slds-grow"],[1,"slds-align-middle"],["title","Previous Month",1,"slds-button","slds-button_icon","slds-button_icon-container",3,"click"],[3,"icon"],["aria-atomic","true","aria-live","assertive",1,"slds-align-middle"],["title","Next Month",1,"slds-button","slds-button_icon","slds-button_icon-container",3,"click"],[1,"slds-shrink-none"],[3,"ngModel","emitInputValueOnEnterPress","ngModelChange"],[3,"value","display",4,"ngFor","ngForOf"],[1,"slds-p-left--x-small"],["aria-labelledby","month","aria-multiselectable","true","role","grid",1,"slds-datepicker__month"],["scope","col",4,"ngIf"],["scope","col",4,"ngFor","ngForOf"],[4,"ngFor","ngForOf"],[4,"ngIf"],["class","slds-button slds-align_absolute-center slds-text-link",3,"click",4,"ngIf"],[3,"value","display"],["scope","col"],[3,"title"],["role","gridcell","class","slds-theme--shade",4,"ngIf"],["role","gridcell",3,"ngClass","click",4,"ngFor","ngForOf"],["role","gridcell",1,"slds-theme--shade"],[1,"slds-p-horizontal--xx-small",2,"cursor","default",3,"title"],["role","gridcell",3,"ngClass","click"],[3,"ngStyle"],[1,"slds-theme--shade"],[1,"slds-grid","slds-m-vertical--xx-small"],[1,"slds-size--1-of-2"],[1,"slds-button","slds-align_absolute-center","slds-text-link",3,"click"],["label","LBL_TODAY"]],template:function(e,t){1&e&&(i.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"button",3),i.bIt("click",(function(e){return t.prevMonth(e)})),i.nrm(4,"system-button-icon",4),i.k0s()(),i.j41(5,"h2",5),i.EFF(6),i.k0s(),i.j41(7,"div",2)(8,"button",6),i.bIt("click",(function(e){return t.nextMonth(e)})),i.nrm(9,"system-button-icon",4),i.k0s()()(),i.j41(10,"div",7)(11,"system-select",8),i.mxI("ngModelChange",(function(e){return i.DH7(t.currentYear,e)||(t.currentYear=e),e})),i.DNE(12,p,1,2,"system-select-option",9),i.k0s()()(),i.j41(13,"div",10)(14,"table",11)(15,"thead")(16,"tr"),i.DNE(17,f,1,0,"th",12)(18,b,3,2,"th",13),i.k0s()(),i.j41(19,"tbody"),i.DNE(20,k,3,2,"tr",14),i.k0s(),i.DNE(21,j,9,4,"tbody",15),i.k0s()(),i.DNE(22,G,2,0,"button",16)),2&e&&(i.R7$(4),i.Y8G("icon","left"),i.R7$(2),i.Lme("",t.currentMonth," (",t.curDate.year(),")"),i.R7$(3),i.Y8G("icon","right"),i.R7$(2),i.R50("ngModel",t.currentYear),i.Y8G("emitInputValueOnEnterPress",!0),i.R7$(),i.Y8G("ngForOf",t.yearsList),i.R7$(5),i.Y8G("ngIf","small"!=t.layout.screenwidth),i.R7$(),i.Y8G("ngForOf",t.weekdays),i.R7$(2),i.Y8G("ngForOf",t.currentGrid),i.R7$(),i.Y8G("ngIf",t.dual),i.R7$(),i.Y8G("ngIf",t.showTodayButton))},dependencies:[d.YU,d.Sq,d.bT,d.B3,c.BC,c.vS,u.t,m.W,h.i,g.t],encapsulation:2,changeDetection:0})}return SystemInputDatePicker})()},95096:(e,t,s)=>{"use strict";s.d(t,{_:()=>o});var i=s(54438),n=s(84341),l=s(90154);let o=(()=>{class SystemInputDelayed{constructor(){this.delay=500,this.placeholder=""}get value(){return this._value}set value(e){this._value=e,this._modeltimeout&&window.clearTimeout(this._modeltimeout),this._modeltimeout=window.setTimeout((()=>this.onChange(this._value)),this.delay)}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}writeValue(e){this._value=e}static#e=this.ɵfac=function(e){return new(e||SystemInputDelayed)};static#t=this.ɵcmp=i.VBU({type:SystemInputDelayed,selectors:[["system-input-delayed"]],inputs:{delay:"delay",placeholder:"placeholder"},features:[i.Jv_([{provide:n.kq,useExisting:(0,i.Rfq)((()=>SystemInputDelayed)),multi:!0}])],decls:3,vars:2,consts:[[1,"slds-form-element"],[1,"slds-form-element__control"],["type","text",1,"slds-input",3,"system-placeholder","ngModel","ngModelChange"]],template:function(e,t){1&e&&(i.j41(0,"div",0)(1,"div",1)(2,"input",2),i.mxI("ngModelChange",(function(e){return i.DH7(t.value,e)||(t.value=e),e})),i.k0s()()()),2&e&&(i.R7$(2),i.Y8G("system-placeholder",t.placeholder),i.R50("ngModel",t.value))},dependencies:[l.m,n.me,n.BC,n.vS],encapsulation:2})}return SystemInputDelayed})()},56980:(e,t,s)=>{"use strict";s.d(t,{u:()=>c});var i=s(54438),n=s(84341),l=s(53584),o=s(60177),a=s(86262),r=s(41587);function d(e,t){if(1&e&&i.nrm(0,"system-select-option",2),2&e){const e=t.$implicit;i.Y8G("value",e.id)("display",e.name)}}let c=(()=>{class SystemInputDictionary{constructor(e){this.configurationService=e,this.disabled=!1,this.dictionaries=[],this.loadDictionaries()}loadDictionaries(){this.dictionaries=this.configurationService.getData("sysdictionarydefinitions")}registerOnChange(e){this.onChange=t=>e(t)}registerOnTouched(){}writeValue(e){0==this.dictionaries.length&&this.loadDictionaries(),this.dictionary=this.dictionaries.find((t=>t.id==e))}static#e=this.ɵfac=function(e){return new(e||SystemInputDictionary)(i.rXU(l.i))};static#t=this.ɵcmp=i.VBU({type:SystemInputDictionary,selectors:[["system-input-dictionary"]],inputs:{disabled:"disabled"},features:[i.Jv_([{multi:!0,provide:n.kq,useExisting:(0,i.Rfq)((()=>SystemInputDictionary))}])],decls:2,vars:4,consts:[[3,"ngModel","disabled","idOnly","ngModelChange"],[3,"value","display",4,"ngFor","ngForOf"],[3,"value","display"]],template:function(e,t){1&e&&(i.j41(0,"system-select",0),i.mxI("ngModelChange",(function(e){return i.DH7(t.dictionary,e)||(t.dictionary=e),e})),i.bIt("ngModelChange",(function(e){return t.onChange(e)})),i.DNE(1,d,1,2,"system-select-option",1),i.k0s()),2&e&&(i.R50("ngModel",t.dictionary),i.Y8G("disabled",t.disabled)("idOnly",!0),i.R7$(),i.Y8G("ngForOf",t.dictionaries))},dependencies:[o.Sq,n.BC,n.vS,a.i,r.t],encapsulation:2})}return SystemInputDictionary})()},29145:(e,t,s)=>{"use strict";s.d(t,{v:()=>d});var i=s(54438),n=s(84341),l=s(83935),o=s(69904),a=s(60177);function r(e,t){if(1&e&&(i.j41(0,"option",5),i.EFF(1),i.k0s()),2&e){const e=t.$implicit;i.Y8G("value",e.value),i.R7$(),i.JRh(e.display)}}let d=(()=>{class SystemInputEnum{constructor(e,t){this.metadata=e,this.language=t,this.options=[]}get value(){return this._value}set value(e){e!=this._value&&(this._value=e,this.onChange(e))}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}writeValue(e){this._value=e}ngOnInit(){this.getOptions()}getOptions(){let e=[],t=this.language.getFieldDisplayOptions(this.module,this.field);for(let s in t)e.push({value:s,display:t[s]});if(this.options=e,this.sortdirection)switch(this.sortdirection.toLowerCase()){case"desc":this.options.sort(((e,t)=>e.display.toLowerCase()<t.display.toLowerCase()?1:-1));break;case"asc":this.options.sort(((e,t)=>e.display.toLowerCase()>t.display.toLowerCase()?1:-1))}}static#e=this.ɵfac=function(e){return new(e||SystemInputEnum)(i.rXU(l.yu),i.rXU(o.B))};static#t=this.ɵcmp=i.VBU({type:SystemInputEnum,selectors:[["system-input-enum"]],inputs:{module:"module",field:"field",sortdirection:"sortdirection"},features:[i.Jv_([{provide:n.kq,useExisting:(0,i.Rfq)((()=>SystemInputEnum)),multi:!0}])],decls:5,vars:2,consts:[[1,"slds-form-element"],[1,"slds-select_container"],[1,"slds-select",3,"ngModel","ngModelChange"],["focus",""],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(e,t){1&e&&(i.j41(0,"div",0)(1,"div",1)(2,"select",2,3),i.mxI("ngModelChange",(function(e){return i.DH7(t.value,e)||(t.value=e),e})),i.DNE(4,r,2,2,"option",4),i.k0s()()()),2&e&&(i.R7$(2),i.R50("ngModel",t.value),i.R7$(2),i.Y8G("ngForOf",t.options))},dependencies:[a.Sq,n.xH,n.y7,n.wz,n.BC,n.vS],encapsulation:2})}return SystemInputEnum})()},96700:(e,t,s)=>{"use strict";s.d(t,{W:()=>p});var i=s(54438),n=s(84341),l=s(69904),o=s(83935),a=s(60177),r=s(60940),d=s(91564),c=s(2760);function u(e,t){if(1&e&&(i.j41(0,"option",8),i.EFF(1),i.k0s()),2&e){const e=t.$implicit;i.Y8G("value",e.id),i.R7$(),i.JRh(e.name)}}function m(e,t){if(1&e&&(i.j41(0,"optgroup",6),i.DNE(1,u,2,2,"option",7),i.nI1(2,"systemmodulecustompipe"),i.k0s()),2&e){const e=i.XpG();i.Y8G("label","custom "+e.language.getLabel("LBL_FIELDSET")),i.R7$(),i.Y8G("ngForOf",i.i5U(2,2,e._fieldsets,e._module))}}function h(e,t){if(1&e&&(i.j41(0,"option",8),i.EFF(1),i.k0s()),2&e){const e=t.$implicit;i.Y8G("value",e.id),i.R7$(),i.JRh(e.name)}}function g(e,t){if(1&e&&(i.j41(0,"optgroup",6),i.DNE(1,h,2,2,"option",7),i.nI1(2,"systemmoduleglobalpipe"),i.k0s()),2&e){const e=i.XpG();i.Y8G("label","global "+e.language.getLabel("LBL_FIELDSET")),i.R7$(),i.Y8G("ngForOf",i.i5U(2,2,e._fieldsets,e._module))}}let p=(()=>{class SystemInputFieldset{set disabled(e){this._disabled=!1!==e}constructor(e,t){this.language=e,this.metadata=t,this._disabled=!1,this._fieldsets=[],this._module="",this._fieldsets=this.metadata.getFieldSets()}get fieldset(){return this._fieldset}set fieldset(e){this._fieldset=e,this.onChange(e)}detectModule(){this._fieldset&&(this._module=this.metadata.getFieldset(this._fieldset).module)}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}writeValue(e){this._fieldset=e,this.detectModule()}static#e=this.ɵfac=function(e){return new(e||SystemInputFieldset)(i.rXU(l.B),i.rXU(o.yu))};static#t=this.ɵcmp=i.VBU({type:SystemInputFieldset,selectors:[["system-input-fieldset"]],inputs:{disabled:"disabled"},features:[i.Jv_([{provide:n.kq,useExisting:(0,i.Rfq)((()=>SystemInputFieldset)),multi:!0}])],decls:10,vars:13,consts:[[1,"slds-grid"],[1,"slds-p-right--xxx-small","slds-size--1-of-3",3,"ngModel","disabled","displayAsterisk","ngModelChange"],[1,"slds-form-element__control","slds-p-left--xxx-small","slds-size--2-of-3"],[1,"slds-select_container"],[1,"slds-select",3,"disabled","ngModel","ngModelChange"],[3,"label",4,"ngIf"],[3,"label"],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(e,t){1&e&&(i.j41(0,"div",0)(1,"system-input-module",1),i.mxI("ngModelChange",(function(e){return i.DH7(t._module,e)||(t._module=e),e})),i.k0s(),i.j41(2,"div",2)(3,"div",3)(4,"select",4),i.mxI("ngModelChange",(function(e){return i.DH7(t.fieldset,e)||(t.fieldset=e),e})),i.nrm(5,"option"),i.DNE(6,m,3,5,"optgroup",5),i.nI1(7,"systemmodulecustompipe"),i.DNE(8,g,3,5,"optgroup",5),i.nI1(9,"systemmoduleglobalpipe"),i.k0s()()()()),2&e&&(i.R7$(),i.R50("ngModel",t._module),i.Y8G("disabled",t._disabled)("displayAsterisk",!0),i.R7$(3),i.Y8G("disabled",!t._module||t._disabled),i.R50("ngModel",t.fieldset),i.R7$(2),i.Y8G("ngIf",i.i5U(7,7,t._fieldsets,t._module.length>0)),i.R7$(2),i.Y8G("ngIf",i.i5U(9,10,t._fieldsets,t._module.length>0)))},dependencies:[a.Sq,a.bT,n.xH,n.y7,n.wz,n.BC,n.vS,r.u,d.B,c.B],encapsulation:2})}return SystemInputFieldset})()},58082:(e,t,s)=>{"use strict";s.d(t,{s:()=>w});var i=s(10467),n=s(54438),l=s(84341),o=s(84412),a=s(53584),r=s(29994),d=s(41081),c=s(13562),u=s(35911),m=s(49722),h=s(50531),g=s(69904),p=s(30012),f=s(22465),b=s(60177),y=s(25863),v=s(67469),k=s(32062);const R=["inputFile"],I=e=>({"slds-has-error":e});function x(e,t){if(1&e){const e=n.RV6();n.j41(0,"div",3)(1,"div",4),n.bIt("system-drop-file",(function(t){n.eBV(e);const s=n.XpG();return n.Njj(s.uploadFile(t))})),n.j41(2,"input",5,6),n.bIt("change",(function(){n.eBV(e);const t=n.sdS(3),s=n.XpG();return n.Njj(s.uploadFile(t.files))}))("click",(function(){n.eBV(e);const t=n.sdS(3);return n.Njj(t.value=null)})),n.k0s(),n.j41(4,"label",7)(5,"span",8),n.nrm(6,"system-button-icon",9)(7,"system-label",10),n.k0s(),n.j41(8,"span",11),n.nrm(9,"system-label",12)(10,"system-label",13),n.k0s()()()()}if(2&e){const e=n.XpG();n.R7$(),n.Y8G("ngClass",n.eq3(5,I,e.hasError)),n.R7$(),n.Y8G("accept",e.accept)("disabled",e.disabled)("id",e.elementID),n.R7$(2),n.Y8G("for",e.elementID)}}function j(e,t){if(1&e){const e=n.RV6();n.qex(0),n.j41(1,"span",17),n.nrm(2,"system-file-icon",18),n.k0s(),n.j41(3,"a",19)(4,"div",20),n.EFF(5),n.k0s()(),n.j41(6,"button",21),n.bIt("click",(function(){n.eBV(e);const t=n.XpG(2);return n.Njj(t.removeFile())})),n.nrm(7,"system-button-icon",22),n.k0s(),n.bVm()}if(2&e){const e=n.XpG(2);n.R7$(2),n.Y8G("filename",e.file.file_name)("filemimetype",e.file.file_mime_type),n.R7$(2),n.Y8G("system-title",e.file.file_name),n.R7$(),n.SpI(" ",e.file.file_name," ")}}function G(e,t){if(1&e&&(n.j41(0,"a",19)(1,"div",20),n.EFF(2),n.k0s(),n.j41(3,"div",23)(4,"div",24),n.nrm(5,"span",25),n.k0s(),n.j41(6,"div",26),n.EFF(7),n.k0s()()()),2&e){const e=n.XpG(2);n.R7$(),n.Y8G("system-title",e.file.file_name),n.R7$(),n.SpI(" ",e.file.file_name," "),n.R7$(3),n.xc7("width",e.fileProgress,"%"),n.R7$(2),n.SpI(" ",e.fileProgress," % ")}}function C(e,t){if(1&e&&(n.j41(0,"div",14),n.DNE(1,j,8,4,"ng-container",15)(2,G,8,5,"ng-template",null,16,n.C5r),n.k0s()),2&e){const e=n.sdS(3),t=n.XpG();n.Y8G("ngClass",n.eq3(3,I,t.hasError)),n.R7$(),n.Y8G("ngIf",!t.isUploading)("ngIfElse",e)}}let w=(()=>{class SystemInputFile{constructor(e,t,s,i,l,o,a,r,d){this.configurationService=e,this.session=t,this.toast=s,this.helper=i,this.model=l,this.backend=o,this.modal=a,this.cdRef=r,this.language=d,this.accept="*",this.disabled=!1,this.hasError=!1,this.onRemove=new n.bkB,this.isUploading=!1,this.elementID=_.uniqueId("input-file"),this.fileProgress=0}registerOnChange(e){this.onChange=t=>{e(t)}}registerOnTouched(e){this.onTouched=e}writeValue(e){this.file=e}uploadFile(e){var t=this;return(0,i.A)((function*(){if(0==e.length)return;t.isUploading=!0,t.cdRef.detectChanges(),t.file={file_name:e[0].name,file_mime_type:e[0].type,file_size:t.helper.humanFileSize(e[0].size)};let s=t.configurationService.getSystemParamater("upload_maxsize");if(s&&e[0].size>s)return void t.toast.sendToast(t.language.getLabelFormatted("LBL_EXCEEDS_MAX_UPLOADFILESIZE",[t.file.file_name,t.helper.humanFileSize(s)]),"error");let i=new o.t(0);i.subscribe((e=>{t.fileProgress=Math.floor(e),t.cdRef.detectChanges()}));const n=yield t.readFileAsync(e[0]),l={file:n.substring(n.indexOf("base64,")+7),filename:t.file.file_name,filemimetype:t.file.file_mime_type};t.backend.postRequestWithProgress("common/spiceattachments",null,l,i).subscribe((e=>{t.file.file_md5=e[0].filemd5,t.onChange({...t.file,remove:()=>t.removeFile(!0)}),t.isUploading=!1,t.cdRef.detectChanges()}))}))()}readFileAsync(e){return(0,i.A)((function*(){return new Promise(((t,s)=>{const i=new FileReader;i.onload=()=>t(i.result.toString()),i.onerror=s,i.readAsDataURL(e)}))}))()}removeFile(e){this.file=void 0,this.cdRef.detectChanges(),e||this.onRemove.emit()}static#e=this.ɵfac=function(e){return new(e||SystemInputFile)(n.rXU(a.i),n.rXU(r.d),n.rXU(d.o),n.rXU(c.d),n.rXU(u.g),n.rXU(m.H),n.rXU(h.y),n.rXU(n.gRc),n.rXU(g.B))};static#t=this.ɵcmp=n.VBU({type:SystemInputFile,selectors:[["system-input-file"]],viewQuery:function(e,t){if(1&e&&n.GBs(R,5,n.c1b),2&e){let e;n.mGM(e=n.lsd())&&(t.inputFile=e.first)}},inputs:{fieldName:"fieldName",accept:"accept",disabled:"disabled",hasError:"hasError"},outputs:{onRemove:"onRemove"},features:[n.Jv_([{provide:l.kq,useExisting:(0,n.Rfq)((()=>SystemInputFile)),multi:!0}])],decls:4,vars:2,consts:[[1,"slds-form-element__control","slds-grid","slds-grid--align-spread","slds-p-vertical--xx-small","slds-is-relative","slds-size--1-of-1"],["class","slds-file-selector slds-file-selector_files slds-is-relative slds-size--1-of-1",4,"ngIf","ngIfElse"],["fileContainer",""],[1,"slds-file-selector","slds-file-selector_files","slds-is-relative","slds-size--1-of-1"],[1,"slds-file-selector__dropzone","slds-p-around--small","slds-is-relative","slds-size--1-of-1",3,"ngClass","system-drop-file"],["type","file",1,"slds-file-selector__input","slds-assistive-text","slds-has-error",3,"accept","disabled","id","change","click"],["inputFile",""],[1,"slds-file-selector__body",2,"cursor","pointer",3,"for"],[1,"slds-file-selector__button","slds-button","slds-button_neutral"],["icon","upload",1,"slds-m-right--xx-small","slds-align--absolute-center"],["label","LBL_UPLOAD_FILE"],[1,"slds-file-selector__text","slds-medium-show"],["label","LBL_OR"],["label","LBL_DROP_FILE"],[1,"slds-pill","slds-pill_link","slds-size--1-of-1",3,"ngClass"],[4,"ngIf","ngIfElse"],["uploadingContainer",""],[1,"slds-pill__icon_container","slds-m-left--xxx-small"],["divClass","","size","small",3,"filename","filemimetype"],["href","javascript:void(0);",1,"slds-pill__action","slds-p-around--xx-small"],[1,"slds-pill__label","slds-truncate",2,"width","calc(100% - 20px)",3,"system-title"],["system-title","LBL_REMOVE",1,"slds-button","slds-button_icon","slds-button_icon","slds-pill__remove","slds-m-right--xx-small",3,"click"],["icon","close"],[1,"slds-grid","slds-grid_vertical-align-center","slds-grid--align-spread","slds-has-flexi-truncate","slds-size--1-of-1"],[1,"slds-progress-bar"],[1,"slds-progress-bar__value"],[1,"slds-p-left--xx-small",2,"width","50px"]],template:function(e,t){if(1&e&&(n.j41(0,"div",0),n.DNE(1,x,11,7,"div",1)(2,C,4,5,"ng-template",null,2,n.C5r),n.k0s()),2&e){const e=n.sdS(3);n.R7$(),n.Y8G("ngIf",!t.file)("ngIfElse",e)}},dependencies:[p.H,f.L,b.YU,b.bT,y.t,v.z,k.W],encapsulation:2,changeDetection:0})}return SystemInputFile})()},39142:(e,t,s)=>{"use strict";s.d(t,{d:()=>y});var i=s(54438),n=s(84341),l=s(69904),o=s(83935),a=s(60177),r=s(30991),d=s(60940),c=s(91564),u=s(2760);function m(e,t){if(1&e&&(i.j41(0,"option",10),i.EFF(1),i.k0s()),2&e){const e=t.$implicit;i.Y8G("value",e.id),i.R7$(),i.JRh(e.name)}}function h(e,t){if(1&e&&(i.j41(0,"optgroup",8),i.DNE(1,m,2,2,"option",9),i.nI1(2,"systemmodulecustompipe"),i.k0s()),2&e){const e=i.XpG(2);i.Y8G("label","custom "+e.language.getLabel("LBL_FILTER")),i.R7$(),i.Y8G("ngForOf",i.i5U(2,2,e._filters,e._module))}}function g(e,t){if(1&e&&(i.j41(0,"option",10),i.EFF(1),i.k0s()),2&e){const e=t.$implicit;i.Y8G("value",e.id),i.R7$(),i.JRh(e.name)}}function p(e,t){if(1&e&&(i.j41(0,"optgroup",8),i.DNE(1,g,2,2,"option",9),i.nI1(2,"systemmoduleglobalpipe"),i.k0s()),2&e){const e=i.XpG(2);i.Y8G("label","global "+e.language.getLabel("LBL_FILTER")),i.R7$(),i.Y8G("ngForOf",i.i5U(2,2,e._filters,e._module))}}function f(e,t){if(1&e){const e=i.RV6();i.j41(0,"div",4)(1,"div",5)(2,"select",6),i.mxI("ngModelChange",(function(t){i.eBV(e);const s=i.XpG();return i.DH7(s.filter,t)||(s.filter=t),i.Njj(t)})),i.nrm(3,"option"),i.DNE(4,h,3,5,"optgroup",7),i.nI1(5,"systemmodulecustompipe"),i.DNE(6,p,3,5,"optgroup",7),i.nI1(7,"systemmoduleglobalpipe"),i.k0s()()()}if(2&e){const e=i.XpG();i.R7$(2),i.Y8G("disabled",!e._module||e._disabled),i.R50("ngModel",e.filter),i.R7$(2),i.Y8G("ngIf",i.i5U(5,4,e._filters,e._module.length>0)),i.R7$(2),i.Y8G("ngIf",i.i5U(7,7,e._filters,e._module.length>0))}}function b(e,t){1&e&&i.nrm(0,"system-input-text",11)}let y=(()=>{class SystemInputFlter{set disabled(e){this._disabled=!1!==e}constructor(e,t){this.language=e,this.metadata=t,this._disabled=!1,this._filters=[],this._module="",this._filters=this.metadata.getFilters()}get filterModules(){return[...new Set(this.metadata.getFilters().map((e=>e.module)))]}get filter(){return this._filter}get module(){return this._module}set module(e){this._module=e,this.filter=void 0}set filter(e){this._filter=e,this.onChange(e)}detectModule(){this._filter&&(this._module=this.metadata.getFilter(this._filter).module)}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}writeValue(e){this._filter=e,this.detectModule()}static#e=this.ɵfac=function(e){return new(e||SystemInputFlter)(i.rXU(l.B),i.rXU(o.yu))};static#t=this.ɵcmp=i.VBU({type:SystemInputFlter,selectors:[["system-input-filter"]],inputs:{disabled:"disabled"},features:[i.Jv_([{provide:n.kq,useExisting:(0,i.Rfq)((()=>SystemInputFlter)),multi:!0}])],decls:4,vars:6,consts:[[1,"slds-grid"],[1,"slds-p-right--xxx-small","slds-size--1-of-3",3,"ngModel","filterModules","disabled","displayAsterisk","ngModelChange"],["class","slds-form-element__control slds-p-left--xxx-small slds-size--2-of-3",4,"ngIf"],["disabled","","class","slds-size--2-of-3",4,"ngIf"],[1,"slds-form-element__control","slds-p-left--xxx-small","slds-size--2-of-3"],[1,"slds-select_container"],[1,"slds-select",3,"disabled","ngModel","ngModelChange"],[3,"label",4,"ngIf"],[3,"label"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["disabled","",1,"slds-size--2-of-3"]],template:function(e,t){1&e&&(i.j41(0,"div",0)(1,"system-input-module",1),i.mxI("ngModelChange",(function(e){return i.DH7(t.module,e)||(t.module=e),e})),i.k0s(),i.DNE(2,f,8,10,"div",2)(3,b,1,0,"system-input-text",3),i.k0s()),2&e&&(i.R7$(),i.R50("ngModel",t.module),i.Y8G("filterModules",t.filterModules)("disabled",t._disabled)("displayAsterisk",!0),i.R7$(),i.Y8G("ngIf",t._module),i.R7$(),i.Y8G("ngIf",!t._module))},dependencies:[a.Sq,a.bT,n.xH,n.y7,n.wz,n.BC,n.vS,r.H,d.u,c.B,u.B],encapsulation:2})}return SystemInputFlter})()},74052:(e,t,s)=>{"use strict";s.d(t,{E:()=>l});var i=s(54438),n=s(84341);let l=(()=>{class SystemInputInteger{constructor(e){this.elementRef=e,this.disabled=!1}get value(){return this._value}set value(e){e!=this._value&&(this._value=e,this.onChange(e))}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}writeValue(e){this._value=e}emitBlur(){this.elementRef.nativeElement.dispatchEvent(new Event("blur",{bubbles:!0}))}static#e=this.ɵfac=function(e){return new(e||SystemInputInteger)(i.rXU(i.aKT))};static#t=this.ɵcmp=i.VBU({type:SystemInputInteger,selectors:[["system-input-integer"]],inputs:{disabled:"disabled"},features:[i.Jv_([{provide:n.kq,useExisting:(0,i.Rfq)((()=>SystemInputInteger)),multi:!0}])],decls:3,vars:2,consts:[[1,"slds-form-element"],[1,"slds-form-element__control"],["type","number",1,"slds-input","slds-text-align--right",3,"ngModel","disabled","ngModelChange","blur"]],template:function(e,t){1&e&&(i.j41(0,"div",0)(1,"div",1)(2,"input",2),i.mxI("ngModelChange",(function(e){return i.DH7(t.value,e)||(t.value=e),e})),i.bIt("blur",(function(){return t.emitBlur()})),i.k0s()()()),2&e&&(i.R7$(2),i.R50("ngModel",t.value),i.Y8G("disabled",t.disabled))},dependencies:[n.me,n.Q0,n.BC,n.vS],encapsulation:2})}return SystemInputInteger})()},6764:(e,t,s)=>{"use strict";s.d(t,{w:()=>_});var i=s(54438),n=s(84341),l=s(69904),o=s(50531),a=s(92462),r=s(90154),d=s(60177),c=s(25863),u=s(32062),m=s(18521);function h(e,t){if(1&e&&(i.j41(0,"span"),i.EFF(1),i.k0s()),2&e){const e=i.XpG(2);i.R7$(),i.SpI(" (",e.label,")")}}function g(e,t){if(1&e){const e=i.RV6();i.j41(0,"button",17),i.bIt("click",(function(){i.eBV(e);const t=i.XpG(2);return i.Njj(t.clearField())})),i.nrm(1,"system-button-icon",18),i.k0s()}2&e&&(i.R7$(),i.Y8G("icon","close"))}const p=e=>({"slds-theme--shade":e});function f(e,t){if(1&e&&(i.j41(0,"div",10)(1,"div",11)(2,"span",12)(3,"span",13),i.nrm(4,"system-label",14),i.DNE(5,h,2,1,"span",15),i.k0s(),i.DNE(6,g,2,1,"button",16),i.k0s()()()),2&e){const e=i.XpG();i.R7$(2),i.Y8G("ngClass",i.eq3(4,p,e._disabled)),i.R7$(2),i.Y8G("label",e.label),i.R7$(),i.Y8G("ngIf",!e._hideTechnicalName),i.R7$(),i.Y8G("ngIf",!e._disabled)}}function b(e,t){if(1&e){const e=i.RV6();i.j41(0,"div",19)(1,"input",20),i.mxI("ngModelChange",(function(t){i.eBV(e);const s=i.XpG();return i.DH7(s.searchterm,t)||(s.searchterm=t),i.Njj(t)})),i.bIt("keyup",(function(t){i.eBV(e);const s=i.XpG();return i.Njj(s.keyup(t))}))("blur",(function(){i.eBV(e);const t=i.XpG();return i.Njj(t.onBlur())})),i.k0s()()}if(2&e){const e=i.XpG();i.R7$(),i.Y8G("disabled",e._disabled),i.R50("ngModel",e.searchterm)}}function y(e,t){if(1&e){const e=i.RV6();i.j41(0,"li",21),i.bIt("mousedown",(function(){const t=i.eBV(e).$implicit,s=i.XpG();return i.Njj(s.selectLabel(t.label))})),i.j41(1,"div",22)(2,"span",23),i.EFF(3),i.k0s()()()}if(2&e){const e=t.$implicit;i.R7$(3),i.Lme("",e.label," [",e.translation,"]")}}const v=e=>({"slds-is-open":e});let _=(()=>{class SystemInputLabel{set disabled(e){this._disabled=!1!==e}set hideTechnicalName(e){this._hideTechnicalName=!1!==e}constructor(e,t,s){this.language=e,this.modal=t,this.modelutilities=s,this._disabled=!1,this._hideTechnicalName=!1,this._time={display:"",moment:null,offset:0,valid:!0},this.label="",this._searchterm="",this.foundlabels=[]}get isOpen(){return""!=this._searchterm}get searchterm(){return this._searchterm}set searchterm(e){this._searchterm=e,this.dosearch()}ngOnDestroy(){this.clickListener&&this.clickListener()}onBlur(){this._searchterm=""}dosearch(){this._searchterm?this.foundlabels=this.language.searchLabel(this._searchterm,50):this.foundlabels=[]}selectLabel(e){this.label=e,this._searchterm="",this.onChange(e)}clearField(){this.label="",this.onChange("")}keyup(e){if("Enter"===e.key)this.label=this._searchterm,this.onChange(this.label),this._searchterm=""}addLabel(){let e={id:this.modelutilities.generateGuid(),name:"",scope:"custom",custom_translations:[],global_translations:[]};e.custom_translations.push({id:this.modelutilities.generateGuid(),syslanguagelabel_id:e.id,syslanguage:this.language.languagedata.languages.default}),this.modal.openModal("LanguageLabelModal").subscribe((t=>{t.instance.label=e,t.instance.label$.subscribe((e=>{e&&(this.label=e.name,this.onChange(this.label))}))}))}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}writeValue(e){this.label=e}static#e=this.ɵfac=function(e){return new(e||SystemInputLabel)(i.rXU(l.B),i.rXU(o.y),i.rXU(a.g))};static#t=this.ɵcmp=i.VBU({type:SystemInputLabel,selectors:[["system-input-label"]],inputs:{disabled:"disabled",hideTechnicalName:"hideTechnicalName"},features:[i.Jv_([{provide:n.kq,useExisting:(0,i.Rfq)((()=>SystemInputLabel)),multi:!0}])],decls:10,vars:8,consts:[[1,"slds-combobox_container"],["role","combobox",1,"slds-combobox","slds-dropdown-trigger","slds-dropdown-trigger_click",3,"ngClass"],["class","slds-form-element__control",4,"ngIf"],["class","slds-combobox__form-element slds-input-has-icon slds-input-has-icon_right",4,"ngIf"],["role","listbox",1,"slds-dropdown","slds-dropdown_fluid","slds-dropdown--length-7"],["role","presentation",1,"slds-listbox","slds-listbox_vertical"],["role","presentation","class","slds-listbox__item",3,"mousedown",4,"ngFor","ngForOf"],["role","presentation",1,"slds-listbox__item","slds-border_top","slds-p-vertical--xx-small",3,"mousedown"],[1,"slds-button","slds-button--icon","slds-align_absolute-center"],[3,"icon","size"],[1,"slds-form-element__control"],[1,"slds-pill_container"],[1,"slds-pill","slds-size--1-of-1","slds-p-horizontal--xx-small",3,"ngClass"],[1,"slds-pill__label"],[3,"label"],[4,"ngIf"],["class","slds-button slds-button--icon slds-pill__remove",3,"click",4,"ngIf"],[1,"slds-button","slds-button--icon","slds-pill__remove",3,"click"],[3,"icon"],[1,"slds-combobox__form-element","slds-input-has-icon","slds-input-has-icon_right"],["type","search","system-placeholder","LBL_SEARCH","role","combobox",1,"slds-input","slds-combobox__input",3,"disabled","ngModel","ngModelChange","keyup","blur"],["role","presentation",1,"slds-listbox__item",3,"mousedown"],["role","option",1,"slds-media","slds-listbox__option","slds-listbox__option_plain"],[1,"slds-truncate"]],template:function(e,t){1&e&&(i.j41(0,"div",0)(1,"div",1),i.DNE(2,f,7,6,"div",2)(3,b,2,2,"div",3),i.j41(4,"div",4)(5,"ul",5),i.DNE(6,y,4,2,"li",6),i.j41(7,"li",7),i.bIt("mousedown",(function(){return t.addLabel()})),i.j41(8,"button",8),i.nrm(9,"system-utility-icon",9),i.k0s()()()()()()),2&e&&(i.R7$(),i.Y8G("ngClass",i.eq3(6,v,t.isOpen)),i.R7$(),i.Y8G("ngIf",t.label),i.R7$(),i.Y8G("ngIf",!t.label),i.R7$(3),i.Y8G("ngForOf",t.foundlabels),i.R7$(3),i.Y8G("icon","add")("size","x-small"))},dependencies:[r.m,d.YU,d.Sq,d.bT,n.me,n.BC,n.vS,c.t,u.W,m.B],encapsulation:2})}return SystemInputLabel})()},28114:(e,t,s)=>{"use strict";s.d(t,{A:()=>M});var i=s(54438),n=s(84341),l=s(69904),o=s(83935),a=s(345),r=s(41081),d=s(48849),c=s(21626),u=s(82802),m=s(30012),h=s(32130),g=s(60177),p=s(90932),f=s(25863),b=s(84359),y=s(2265),v=s(32062);const k=["fileselector"],R=["imgelement"],I=["bottomtoolbar"],x=["toolbar"];function j(e,t){if(1&e){const e=i.RV6();i.j41(0,"li")(1,"button",11),i.bIt("click",(function(){i.eBV(e);const t=i.XpG();return i.Njj(t.removeModifications())})),i.nrm(2,"system-button-icon",25),i.k0s()()}if(2&e){const e=i.XpG();i.R7$(),i.FS9("title",e.language.getLabel("LBL_REMOVE_MODIFICATIONS")),i.Y8G("disabled",!e.cropper||!e.isEdited)}}function G(e,t){if(1&e){const e=i.RV6();i.j41(0,"div",26)(1,"system-checkbox",27),i.mxI("ngModelChange",(function(t){i.eBV(e);const s=i.XpG();return i.DH7(s.doResizeByUser,t)||(s.doResizeByUser=t),i.Njj(t)})),i.nrm(2,"system-label",28),i.k0s(),i.j41(3,"system-input-number",29),i.mxI("ngModelChange",(function(t){i.eBV(e);const s=i.XpG();return i.DH7(s.maxWidthInput,t)||(s.maxWidthInput=t),i.Njj(t)})),i.bIt("change",(function(){i.eBV(e);const t=i.XpG();return i.Njj(t.maxWidthChanged())})),i.k0s(),i.j41(4,"div",30),i.EFF(5,"px"),i.k0s(),i.j41(6,"div",31),i.EFF(7,"x"),i.k0s(),i.j41(8,"system-input-number",29),i.mxI("ngModelChange",(function(t){i.eBV(e);const s=i.XpG();return i.DH7(s.maxHeightInput,t)||(s.maxHeightInput=t),i.Njj(t)})),i.bIt("change",(function(){i.eBV(e);const t=i.XpG();return i.Njj(t.maxHeightChanged())})),i.k0s(),i.j41(9,"div",30),i.EFF(10,"px"),i.k0s()()}if(2&e){const e=i.XpG();i.R7$(),i.R50("ngModel",e.doResizeByUser),i.Y8G("disabled",!e.canResize),i.R7$(2),i.Mz_("placeholder","",e.language.getLabel("LBL_WIDTH")," "),i.R50("ngModel",e.maxWidthInput),i.Y8G("disabled",!e.doResizeByUser||!e.canResize),i.R7$(5),i.Mz_("placeholder","",e.language.getLabel("LBL_HEIGHT")," "),i.R50("ngModel",e.maxHeightInput),i.Y8G("disabled",!e.doResizeByUser||!e.canResize)}}function C(e,t){if(1&e){const e=i.RV6();i.j41(0,"img",32,33),i.bIt("load",(function(t){i.eBV(e);const s=i.XpG();return i.Njj(s.imageLoaded(t))})),i.k0s()}if(2&e){const e=i.XpG();i.Y8G("src",e.mediaBase64,i.B4B)}}function w(e,t){if(1&e){const e=i.RV6();i.j41(0,"div",34)(1,"div",35)(2,"button",36),i.bIt("click",(function(){i.eBV(e);const t=i.XpG();return i.Njj(t.triggerFileSelectionDialog())})),i.nrm(3,"system-label",37),i.k0s(),i.j41(4,"input",38,39),i.bIt("change",(function(){i.eBV(e);const t=i.XpG();return i.Njj(t.fileSelectionChange())})),i.k0s(),i.j41(6,"div",31),i.nrm(7,"system-label",40),i.k0s()()()}}function S(e,t){if(1&e&&(i.j41(0,"div",41),i.EFF(1),i.k0s()),2&e){const e=i.XpG();i.R7$(),i.SpI("Format: ",e.mediaMetaData.fileformat.toUpperCase(),"")}}function E(e,t){if(1&e&&(i.j41(0,"span"),i.EFF(1),i.k0s()),2&e){const e=i.XpG(2);i.R7$(),i.Lme("  →  ",e.mediaMetaData.width," × ",e.mediaMetaData.height," px")}}function L(e,t){if(1&e&&(i.j41(0,"div"),i.EFF(1),i.DNE(2,E,2,2,"span",6),i.k0s()),2&e){const e=i.XpG();i.R7$(),i.Lme("",e.mediaMetaData.originalWidth," × ",e.mediaMetaData.originalHeight," px"),i.R7$(),i.Y8G("ngIf",e.isResized)}}function D(e,t){1&e&&(i.j41(0,"div"),i.EFF(1," "),i.k0s())}const F=e=>({height:e});let M=(()=>{class SystemInputMedia{set allowModifications(e){this.allowMirroring=this.allowResizing=this.allowRotating=this.allowCropping=e}set _mimetype(e){this.mediaMetaData.mimetype=e,this.mediaMetaData.fileformat=this.getFileformatFromMimetype(this.mediaMetaData.mimetype)}get maxWidthBySystem(){return this._maxWidthBySystem}set maxWidthBySystem(e){this._maxWidthBySystem=e,this.calcTargetSize()}get maxHeightBySystem(){return this._maxHeightBySystem}set maxHeightBySystem(e){this._maxHeightBySystem=e,this.calcTargetSize()}constructor(e,t,s,n,l,o,a,r,d,c){this.language=e,this.metadata=t,this.sanitizer=s,this.toast=n,this.userprefs=l,this.componentElRef=o,this.renderer=a,this.http=r,this.cd=d,this.libloader=c,this.componentHeight=500,this.allowCropping=!0,this.allowResizing=!0,this.allowRotating=!0,this.allowMirroring=!0,this.mimetype=new i.bkB,this.mediaBase64=null,this.cropper=null,this.fileformatErrorMessageCode=null,this.fileFromBrowser=null,this.maxWidthInput="",this.maxHeightInput="",this._maxWidthByUser=null,this._maxHeightByUser=null,this._maxWidthBySystem=null,this._maxHeightBySystem=null,this.isCropped=!1,this.isImported=!1,this._doResizeByUser=!1,this.isLoading=!1,this.xMirrored=1,this.yMirrored=1,this.currentRotation=0,this.jpegCompressionLevel=.95,this.lastCropBoxData={},this.resetMediaMetaData(),this.unlistenPasteEvent=this.renderer.listen("window","paste",(e=>{this.handlePaste(e)}))}handlePaste(e){if(e.preventDefault(),e.stopPropagation(),!this.isLoading&&(e.clipboardData.files&&e.clipboardData.files[0]&&(this.fileFromBrowser=e.clipboardData.files[0],this.fileSelectedOrDropped()),e.clipboardData.items&&e.clipboardData.items[0])){const t=e.clipboardData.items[0];if("string"===t.kind)t.getAsString((e=>{this.stringLooksLikeUrl(e)&&(this.resetFileNotAllowedError(),this.isLoading=!0,this.cd.detectChanges(),this.http.get("proxy/?useurl="+btoa(e),{observe:"response",responseType:"blob"}).subscribe((t=>{this.isLoading=!1,this.cd.detectChanges(),this.fileFromBrowser=null,this.checkMimetype(t.body.type)?(this.mediaBase64=this.sanitizer.bypassSecurityTrustResourceUrl(window.URL.createObjectURL(t.body)),this.cd.detectChanges(),this.resetMediaMetaData(),this.resetModificationStati(),this.isImported=!0,this.mediaMetaData.filename=e.substring(e.lastIndexOf("/")+1),this.mediaMetaData.mimetype=t.body.type,this.mediaMetaData.fileformat=this.getFileformatFromMimetype(t.body.type)):this.showFileNotAllowedError(t.body.type)}),(e=>{this.isLoading=!1})))}));else{this.resetFileNotAllowedError();const e=t.getAsFile();if(!this.checkMimetype(e.type))return void this.showFileNotAllowedError(e.type);this.mediaMetaData.fileformat=this.getFileformatFromMimetype(e),this.mediaMetaData.mimetype=e.type,this.resetModificationStati(),this.isImported=!0,this.mediaBase64=this.sanitizer.bypassSecurityTrustResourceUrl(window.URL.createObjectURL(e))}}}resetMediaMetaData(){this.mediaMetaData={mimetype:null,fileformat:null,filename:null,width:0,height:0,originalWidth:0,originalHeight:0}}stringLooksLikeUrl(e){return/^(http|https|ftp|file):\/\//.test(e)}get cropperHeight(){try{return this.componentHeight-this.toolbar.nativeElement.offsetHeight-this.bottomToolbar.nativeElement.offsetHeight-5+"px"}catch(e){return"0px"}}triggerFileSelectionDialog(){this.fileSelector.nativeElement.dispatchEvent(new MouseEvent("click",{bubbles:!0}))}getMediaFromFileSystem(){let e=new FileReader;e.onloadend=t=>{this.resetModificationStati(),this.isImported=!0,this.mediaBase64=e.result},e.readAsDataURL(this.fileFromBrowser)}imageLoaded(e){let t=this.imageElement.nativeElement;this.cropper&&this.cropper.destroy(),this.cropper=new Cropper(t,{autoCrop:!1,viewMode:1,toggleDragModeOnDblclick:this.allowCropping,dragMode:this.allowCropping?"crop":"move"}),this.cropper.crop(),t.addEventListener("ready",(()=>{this.cropper&&(this.mediaMetaData.originalWidth=this.cropper.getImageData().naturalWidth,this.mediaMetaData.originalHeight=this.cropper.getImageData().naturalHeight,this.calcTargetSize(),this.isDirty&&this.emitChange())})),this.allowCropping&&t.addEventListener("cropend",(()=>{let e=this.cropper.getCropBoxData();this.isCropped=!_.isEmpty(this.cropper.getCropBoxData()),_.isEqual(e,this.lastCropBoxData)||(this.lastCropBoxData=_.clone(e),this.emitChange(),this.calcTargetSize())})),t.addEventListener("zoom",(()=>{this.isEdited&&this.emitChange(),this.isCropped&&this.calcTargetSize()}))}onDrop(e){this.fileFromBrowser=e[0],this.fileSelectedOrDropped()}set onDropExtern(e){e&&this.onDrop(e)}getFileformatFromMimetype(e){if(null===e)return"";const t="object"==typeof e?e?.type:e;return"string"==typeof t&&/^image\/\w+/.test(t)?t.split("/").pop():""}checkMimetype(e){return"image/jpeg"===e||"image/png"===e||"image/gif"===e}showFileNotAllowedError(e){this.fileformatErrorMessageCode&&this.toast.clearToast(this.fileformatErrorMessageCode),this.fileformatErrorMessageCode=this.toast.sendToast("Not an image file or file type "+(e?'"'+e+'"':"")+" not supported.","error",null,!1,this.fileformatErrorMessageCode)}resetFileNotAllowedError(){this.fileformatErrorMessageCode&&this.toast.clearToast(this.fileformatErrorMessageCode)}fileSelectionChange(){return 1===this.fileSelector.nativeElement.files.length&&(this.fileFromBrowser=this.fileSelector.nativeElement.files[0],this.fileSelectedOrDropped()),this.fileSelector.nativeElement.value=null,!1}fileSelectedOrDropped(){if(this.resetFileNotAllowedError(),!this.checkMimetype(this.fileFromBrowser.type))return this.showFileNotAllowedError(this.getFileExtension(this.fileFromBrowser)),void(this.fileFromBrowser=null);this.resetMediaMetaData(),this.mediaMetaData.fileformat=this.getFileformatFromMimetype(this.fileFromBrowser),this.mediaMetaData.filename=this.fileFromBrowser.name,this.mediaMetaData.mimetype=this.fileFromBrowser.type,this.getMediaFromFileSystem()}getFileExtension(e){return e.name.split(".").pop()}removeImage(){this.resetMediaMetaData(),this.cropper&&(this.cropper.destroy(),this.cropper=void 0),this.mediaBase64=null,this.emitChange()}getImage(){if(!this.cropper)return null;let e;return e=this.isEdited||this.isResized?this.cropper.getCroppedCanvas({maxHeight:this.mediaMetaData.height,maxWidth:this.mediaMetaData.width,imageSmoothingEnabled:!0,imageSmoothingQuality:"high"}).toDataURL(this.mediaMetaData.mimetype,"image/jpeg"===this.mediaMetaData.mimetype?this.jpegCompressionLevel:void 0):this.mediaBase64.toString(),e.substring(e.indexOf("base64,")+7)}setMoveMode(){this.cropper.setDragMode("move")}setCropMode(){this.cropper.setDragMode("crop")}removeCropping(){this.cropper.clear(),this.isCropped=!1,this.lastCropBoxData={},this.calcTargetSize(),this.emitChange()}get canResize(){return this.allowResizing&&this.cropper}get canMirror(){return this.allowMirroring&&this.cropper}get canRotate(){return this.allowRotating&&this.cropper}maxHeightChanged(){let e;e=this.maxHeightInput.split(this.userprefs.toUse.num_grp_sep).join(""),e=parseInt(e,10),this._maxHeightByUser=isNaN(e)?null:e,this.calcTargetSize(),this.emitChange()}maxWidthChanged(){let e;e=this.maxWidthInput.split(this.userprefs.toUse.num_grp_sep).join(""),e=parseInt(e,10),this._maxWidthByUser=isNaN(e)?null:e,this.calcTargetSize(),this.emitChange()}get maxHeight(){return this.maxHeightBySystem&&this.maxHeightByUser?this.maxHeightBySystem<this.maxHeightByUser?this.maxHeightBySystem:this.maxHeightByUser:this.maxHeightBySystem?this.maxHeightBySystem:this.maxHeightByUser?this.maxHeightByUser:null}get maxWidth(){return this.maxWidthBySystem&&this.maxWidthByUser?this.maxWidthBySystem<this.maxWidthByUser?this.maxWidthBySystem:this.maxWidthByUser:this.maxWidthBySystem?this.maxWidthBySystem:this.maxWidthByUser?this.maxWidthByUser:null}get doResizeByUser(){return this._doResizeByUser}set doResizeByUser(e){this._doResizeByUser=e,this.calcTargetSize()}get maxWidthByUser(){return this.doResizeByUser?this._maxWidthByUser:void 0}get maxHeightByUser(){return this.doResizeByUser?this._maxHeightByUser:void 0}calcTargetSize(){if(!this.cropper)return;let e,t=1,s=this.cropper.getData(!0).width;0===s?(s=this.cropper.getImageData().naturalWidth,e=this.cropper.getImageData().naturalHeight):e=this.cropper.getData(!0).height,this.maxWidth&&s>this.maxWidth||this.maxHeight&&e>this.maxHeight?(t=this.maxWidth&&!this.maxHeight?this.maxWidth/s:this.maxHeight&&!this.maxWidth?this.maxHeight/e:this.maxWidth/s<this.maxHeight/e?this.maxWidth/s:this.maxHeight/e,this.mediaMetaData.width=Math.floor(s*t),this.mediaMetaData.height=Math.floor(e*t)):(this.mediaMetaData.width=s,this.mediaMetaData.height=e)}ngOnDestroy(){this.fileformatErrorMessageCode&&this.toast.clearToast(this.fileformatErrorMessageCode),this.unlistenPasteEvent()}zoomIn(){this.cropper.zoom(.1)}zoomOut(){this.cropper.zoom(-.1)}mirrorX(){90===this.currentRotation||270===this.currentRotation?this.cropper.scaleY(this.yMirrored=-1*this.yMirrored):this.cropper.scaleX(this.xMirrored=-1*this.xMirrored),this.emitChange()}mirrorY(){90===this.currentRotation||270===this.currentRotation?this.cropper.scaleX(this.xMirrored=-1*this.xMirrored):this.cropper.scaleY(this.yMirrored=-1*this.yMirrored),this.emitChange()}rotate(e){this.currentRotation+=e,this.currentRotation=this.currentRotation%360,this.currentRotation<0&&(this.currentRotation+=360),this.cropper.rotateTo(this.currentRotation),this.emitChange()}get isRotated(){return 0!==this.currentRotation}get isMirrored(){return-1===this.xMirrored||-1===this.yMirrored}get isResized(){return this.mediaMetaData.width!==this.mediaMetaData.originalWidth||this.mediaMetaData.height!==this.mediaMetaData.originalHeight}get isEdited(){return this.isRotated||this.isMirrored||this.isCropped}get isDirty(){return this.isEdited||this.isImported||this.isResized}emitChange(){this.mimetype.emit(this.mediaMetaData.mimetype),this.onChange(this.getImage())}resetModificationStati(){this.xMirrored=this.yMirrored=1,this.currentRotation=0,this.isCropped=!1,this.lastCropBoxData={}}removeModifications(){this.cropper.rotateTo(0),this.cropper.scale(1,1),this.cropper.clear(),this.isCropped=!1,this.lastCropBoxData={},this.calcTargetSize(),this.emitChange()}get allowEditing(){return this.allowCropping||this.allowRotating||this.allowMirroring}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}writeValue(e){e&&""!=e&&(this.mediaBase64=this.sanitizer.bypassSecurityTrustResourceUrl("data:"+this.mediaMetaData.mimetype+";base64,"+e),this.calcTargetSize()),this.resetModificationStati(),this.isImported=!1}static#e=this.ɵfac=function(e){return new(e||SystemInputMedia)(i.rXU(l.B),i.rXU(o.yu),i.rXU(a.up),i.rXU(r.o),i.rXU(d.S),i.rXU(i.aKT),i.rXU(i.sFG),i.rXU(c.Qq),i.rXU(i.gRc),i.rXU(u.b))};static#t=this.ɵcmp=i.VBU({type:SystemInputMedia,selectors:[["system-input-media"]],viewQuery:function(e,t){if(1&e&&(i.GBs(k,5),i.GBs(R,5),i.GBs(I,5),i.GBs(x,5)),2&e){let e;i.mGM(e=i.lsd())&&(t.fileSelector=e.first),i.mGM(e=i.lsd())&&(t.imageElement=e.first),i.mGM(e=i.lsd())&&(t.bottomToolbar=e.first),i.mGM(e=i.lsd())&&(t.toolbar=e.first)}},inputs:{componentHeight:"componentHeight",allowModifications:"allowModifications",allowCropping:"allowCropping",allowResizing:"allowResizing",allowRotating:"allowRotating",allowMirroring:"allowMirroring",_mimetype:[i.Mj6.None,"mimetype","_mimetype"],maxWidthBySystem:[i.Mj6.None,"maxWidth","maxWidthBySystem"],maxHeightBySystem:[i.Mj6.None,"maxHeight","maxHeightBySystem"],onDropExtern:[i.Mj6.None,"droppedFiles","onDropExtern"]},outputs:{mimetype:"mimetype"},features:[i.Jv_([{provide:n.kq,useExisting:(0,i.Rfq)((()=>SystemInputMedia)),multi:!0}])],decls:49,vars:26,consts:[[1,"slds-rich-text-editor","slds-grid","slds-grid_vertical","slds-nowrap"],["role","toolbar",1,"slds-rich-text-editor__toolbar","slds-shrink-none"],["toolbar",""],[1,"slds-button-group-list"],[1,"slds-button","slds-button--icon-border","slds-button--neutral",3,"disabled","click"],["icon","delete"],[4,"ngIf"],["icon","zoomin"],["icon","zoomout"],["icon","move"],["icon","drag"],[1,"slds-button","slds-button--icon-border","slds-button--neutral",3,"disabled","title","click"],["icon","clear"],["icon","rotateleft","size","medium"],["icon","rotateright","size","medium"],["icon","mirrorhorizontal","size","medium"],["icon","mirrorvertical","size","medium"],["class","slds-grid slds-grid--vertical-align-center slds-col--bump-left",4,"ngIf"],[3,"ngStyle"],[1,"slds-height_full",2,"overflow","hidden",3,"system-overlay-loading-spinner","system-drop-file"],["style","display:block",3,"src","load",4,"ngIf","ngIfElse"],["uploadbutton",""],["role","toolbar",1,"slds-rich-text-editor__toolbar","slds-shrink-none","slds-rich-text-editor__toolbar_bottom"],["bottomtoolbar",""],["class","slds-col--bump-right",4,"ngIf"],["icon","undo"],[1,"slds-grid","slds-grid--vertical-align-center","slds-col--bump-left"],[3,"ngModel","disabled","ngModelChange"],["label","LBL_DOWNSIZE_TO_MAX"],["onlyField","true","precision","0","min","1","size","5",3,"ngModel","placeholder","disabled","ngModelChange","change"],[1,"slds-p-left--xxx-small"],[1,"slds-p-horizontal--x-small"],[2,"display","block",3,"src","load"],["imgelement",""],[1,"slds-size--1-of-1","slds-height_full","slds-align--absolute-center"],[1,"slds-grid","slds-grid--vertical-align-center"],[1,"slds-button","slds-button--neutral",3,"click"],["label","LBL_SELECT_FILE"],["type","file","accept","image/*",2,"display","none",3,"change"],["fileselector",""],["label","LBL_OR_PASTE_IMAGE_OR_DROP_FILE_HERE"],[1,"slds-col--bump-right"]],template:function(e,t){if(1&e&&(i.j41(0,"div",0)(1,"div",1,2)(3,"ul",3)(4,"li")(5,"button",4),i.bIt("click",(function(){return t.removeImage()})),i.nrm(6,"system-button-icon",5),i.k0s()(),i.DNE(7,j,3,2,"li",6),i.k0s(),i.j41(8,"ul",3)(9,"li")(10,"button",4),i.bIt("click",(function(){return t.zoomIn()})),i.nrm(11,"system-button-icon",7),i.k0s()(),i.j41(12,"li")(13,"button",4),i.bIt("click",(function(){return t.zoomOut()})),i.nrm(14,"system-button-icon",8),i.k0s()()(),i.j41(15,"ul",3)(16,"li")(17,"button",4),i.bIt("click",(function(){return t.setMoveMode()})),i.nrm(18,"system-button-icon",9),i.k0s()(),i.j41(19,"li")(20,"button",4),i.bIt("click",(function(){return t.setCropMode()})),i.nrm(21,"system-button-icon",10),i.k0s()(),i.j41(22,"li")(23,"button",11),i.bIt("click",(function(){return t.removeCropping()})),i.nrm(24,"system-button-icon",12),i.k0s()()(),i.j41(25,"ul",3)(26,"li")(27,"button",11),i.bIt("click",(function(){return t.rotate(-90)})),i.nrm(28,"system-button-custom-icon",13),i.k0s()(),i.j41(29,"li")(30,"button",11),i.bIt("click",(function(){return t.rotate(90)})),i.nrm(31,"system-button-custom-icon",14),i.k0s()(),i.j41(32,"li")(33,"button",11),i.bIt("click",(function(){return t.mirrorX()})),i.nrm(34,"system-button-custom-icon",15),i.k0s()(),i.j41(35,"li")(36,"button",11),i.bIt("click",(function(){return t.mirrorY()})),i.nrm(37,"system-button-custom-icon",16),i.k0s()()(),i.DNE(38,G,11,8,"div",17),i.k0s(),i.j41(39,"div",18)(40,"div",19),i.bIt("system-drop-file",(function(e){return t.onDrop(e)})),i.DNE(41,C,2,1,"img",20)(42,w,8,0,"ng-template",null,21,i.C5r),i.k0s()(),i.j41(44,"div",22,23),i.DNE(46,S,2,1,"div",24)(47,L,3,3,"div",6)(48,D,2,0,"div",6),i.k0s()()),2&e){const e=i.sdS(43);i.R7$(5),i.Y8G("disabled",!t.mediaBase64),i.R7$(2),i.Y8G("ngIf",t.allowEditing),i.R7$(3),i.Y8G("disabled",!t.mediaBase64),i.R7$(3),i.Y8G("disabled",!t.mediaBase64),i.R7$(4),i.Y8G("disabled",!t.cropper),i.R7$(3),i.Y8G("disabled",!t.cropper),i.R7$(3),i.FS9("title",t.language.getLabel("LBL_REMOVE_CROPPING")),i.Y8G("disabled",!t.cropper||!t.isCropped),i.R7$(4),i.FS9("title",t.language.getLabel("LBL_ROTATE_TO_LEFT")),i.Y8G("disabled",!t.canRotate),i.R7$(3),i.FS9("title",t.language.getLabel("LBL_ROTATE_TO_RIGHT")),i.Y8G("disabled",!t.canRotate),i.R7$(3),i.FS9("title",t.language.getLabel("LBL_MIRROR_HORIZONTALLY")),i.Y8G("disabled",!t.canMirror),i.R7$(3),i.FS9("title",t.language.getLabel("LBL_MIRROR_VERTICALLY")),i.Y8G("disabled",!t.canMirror),i.R7$(2),i.Y8G("ngIf",t.allowResizing),i.R7$(),i.Y8G("ngStyle",i.eq3(24,F,t.cropperHeight)),i.R7$(),i.Y8G("system-overlay-loading-spinner",t.isLoading),i.R7$(),i.Y8G("ngIf",t.mediaBase64)("ngIfElse",e),i.R7$(5),i.Y8G("ngIf",t.mediaMetaData.fileformat),i.R7$(),i.Y8G("ngIf",t.mediaBase64),i.R7$(),i.Y8G("ngIf",!t.mediaBase64)}},dependencies:[m.H,h.M,g.bT,g.B3,n.BC,n.vS,p.Q,f.t,b.f,y.N,v.W],encapsulation:2})}return SystemInputMedia})()},60940:(e,t,s)=>{"use strict";s.d(t,{u:()=>f});var i=s(54438),n=s(84341),l=s(18359),o=s(69904),a=s(83935),r=s(53584),d=s(60177),c=s(30991),u=s(86262),m=s(41587);function h(e,t){if(1&e&&i.nrm(0,"system-select-option",4),2&e){const e=t.$implicit;i.Y8G("value",e.id)("display",e.name)}}function g(e,t){if(1&e){const e=i.RV6();i.j41(0,"system-select",2),i.mxI("ngModelChange",(function(t){i.eBV(e);const s=i.XpG();return i.DH7(s.module,t)||(s.module=t),i.Njj(t)})),i.DNE(1,h,1,2,"system-select-option",3),i.k0s()}if(2&e){const e=i.XpG();i.R50("ngModel",e.module),i.Y8G("disabled",e.disabled),i.R7$(),i.Y8G("ngForOf",e._modules)}}function p(e,t){1&e&&i.nrm(0,"system-input-text",5)}let f=(()=>{class SystemInputModule{set filterModules(e){this._filterModules=e}constructor(e,t,s){this.language=e,this.metadata=t,this.configuration=s,this.disabled=!1,this.technicalNameOnly=!0,this.displayAsterisk=!1,this._filterModules=[],this.subscription=new l.yU,this._modules=[],this.subscription=this.language.currentlanguage$.subscribe((e=>{this.sortModules()}))}ngOnInit(){this._modules=this.metadata.getModules().map((e=>({id:e,name:this.technicalNameOnly?e:`${this.language.getModuleName(e)} (${e})`}))),this._filterModules.length>0&&(this._modules=this._modules.filter((e=>this._filterModules.find((t=>t==e.id))))),this.displayAsterisk&&this._modules.unshift({id:"*",name:"*"}),this.sortModules()}ngOnDestroy(){this.subscription.unsubscribe()}sortModules(){this.technicalNameOnly?this._modules.sort(((e,t)=>e.name.toLowerCase()>t.name.toLowerCase()?1:-1)):this._modules.sort(((e,t)=>this.language.getModuleName(e.id).toLowerCase()>this.language.getModuleName(t.id).toLowerCase()?1:-1))}get module(){return this._module}set module(e){this._module=e,this.onChange&&this.onChange(e?.id)}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}writeValue(e){e&&(this._module={id:e,name:this.technicalNameOnly?e:`${this.language.getModuleName(e)} (${e})`})}static#e=this.ɵfac=function(e){return new(e||SystemInputModule)(i.rXU(o.B),i.rXU(a.yu),i.rXU(r.i))};static#t=this.ɵcmp=i.VBU({type:SystemInputModule,selectors:[["system-input-module"]],inputs:{disabled:"disabled",technicalNameOnly:"technicalNameOnly",displayAsterisk:"displayAsterisk",filterModules:"filterModules"},features:[i.Jv_([{provide:n.kq,useExisting:(0,i.Rfq)((()=>SystemInputModule)),multi:!0}])],decls:2,vars:2,consts:[[3,"ngModel","disabled","ngModelChange",4,"ngIf"],["disabled","",4,"ngIf"],[3,"ngModel","disabled","ngModelChange"],[3,"value","display",4,"ngFor","ngForOf"],[3,"value","display"],["disabled",""]],template:function(e,t){1&e&&i.DNE(0,g,2,3,"system-select",0)(1,p,1,0,"system-input-text",1),2&e&&(i.Y8G("ngIf",t._modules.length>0),i.R7$(),i.Y8G("ngIf",0==t._modules.length))},dependencies:[d.Sq,d.bT,n.BC,n.vS,c.H,u.i,m.t],encapsulation:2})}return SystemInputModule})()},40238:(e,t,s)=>{"use strict";s.d(t,{e:()=>h});var i=s(54438),n=s(84341),l=s(18359),o=s(69904),a=s(83935),r=s(53584),d=s(60177),c=s(86262),u=s(41587);function m(e,t){if(1&e&&i.nrm(0,"system-select-option",2),2&e){const e=t.$implicit;i.Y8G("value",e.id)("display",e.name)}}let h=(()=>{class SystemInputModuleField{constructor(e,t,s){this.language=e,this.metadata=t,this.configuration=s,this.disabled=!1,this.displaytechnicalname=!0,this._fields=[],this.subscription=new l.yU,this.omittedFields=[]}ngOnInit(){let e=this.metadata.getModuleFields(this.module);for(let t in e)this.omittedFields.some((s=>e[t].name==s))||this._fields.push({id:e[t].name,name:this.getFieldDisplay(e[t].name)});this.sortFields(),this.subscription=this.language.currentlanguage$.subscribe((e=>{this.sortFields()}))}set omittedFieldsInput(e){this.omittedFields=e,this._fields=this._fields.filter((t=>this._field?.id==t.id||!e.some((e=>e==t.id))))}getFieldDisplay(e){return this.language.getFieldDisplayName(this.module,e)+(this.displaytechnicalname?` (${e})`:"")}sortFields(){this._fields.sort(((e,t)=>this.language.getFieldDisplayName(this.module,e.name).toLowerCase()>this.language.getFieldDisplayName(this.module,t.name).toLowerCase()?1:-1))}get field(){return this._field}set field(e){this._field=e,this.onChange&&this.onChange(e?.id)}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}writeValue(e){this._field=e?{id:e,name:this.getFieldDisplay(e)}:void 0}ngOnDestroy(){this.subscription.unsubscribe()}static#e=this.ɵfac=function(e){return new(e||SystemInputModuleField)(i.rXU(o.B),i.rXU(a.yu),i.rXU(r.i))};static#t=this.ɵcmp=i.VBU({type:SystemInputModuleField,selectors:[["system-input-module-field"]],inputs:{module:"module",disabled:"disabled",displaytechnicalname:"displaytechnicalname",omittedFieldsInput:[i.Mj6.None,"omittedFields","omittedFieldsInput"]},features:[i.Jv_([{provide:n.kq,useExisting:(0,i.Rfq)((()=>SystemInputModuleField)),multi:!0}])],decls:2,vars:3,consts:[[3,"ngModel","disabled","ngModelChange"],[3,"value","display",4,"ngFor","ngForOf"],[3,"value","display"]],template:function(e,t){1&e&&(i.j41(0,"system-select",0),i.mxI("ngModelChange",(function(e){return i.DH7(t.field,e)||(t.field=e),e})),i.DNE(1,m,1,2,"system-select-option",1),i.k0s()),2&e&&(i.R50("ngModel",t.field),i.Y8G("disabled",t.disabled),i.R7$(),i.Y8G("ngForOf",t._fields))},dependencies:[d.Sq,n.BC,n.vS,c.i,u.t],encapsulation:2})}return SystemInputModuleField})()},21534:(e,t,s)=>{"use strict";s.d(t,{c:()=>c});var i=s(54438),n=s(84341),l=s(69904),o=s(83935),a=s(60177);function r(e,t){if(1&e&&(i.j41(0,"option",8),i.EFF(1),i.k0s()),2&e){const e=t.$implicit;i.Y8G("value",e),i.R7$(),i.JRh(e)}}function d(e,t){if(1&e&&(i.j41(0,"option",8),i.EFF(1),i.k0s()),2&e){const e=t.$implicit;i.Y8G("value",e.id),i.R7$(),i.JRh(e.name)}}let c=(()=>{class SystemInputModuleFilter{constructor(e,t){this.language=e,this.metadata=t,this.modules=[],this._modulefilters=[],this.module="",this._modulefilter="",this._modulefilters=this.metadata.getModuleFilters();for(let e of this._modulefilters)this.modules.find((t=>t==e.module))||this.modules.push(e.module);this.modules.sort()}get modulefilter(){return this._modulefilter}set modulefilter(e){this._modulefilter=e,this.onChange(e)}get modulefilters(){return this._modulefilters.filter((e=>e.module==this.module))}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}writeValue(e){this._modulefilter=e,this._modulefilter&&(this.module=this.metadata.getModuleFilter(this._modulefilter).module)}static#e=this.ɵfac=function(e){return new(e||SystemInputModuleFilter)(i.rXU(l.B),i.rXU(o.yu))};static#t=this.ɵcmp=i.VBU({type:SystemInputModuleFilter,selectors:[["system-input-module-filter"]],inputs:{disabled:"disabled"},features:[i.Jv_([{provide:n.kq,useExisting:(0,i.Rfq)((()=>SystemInputModuleFilter)),multi:!0}])],decls:12,vars:6,consts:[[1,"slds-form-element","slds-m-vertical--xxx-small"],[1,"slds-grid"],[1,"slds-form-element__control","slds-p-right--xxx-small","slds-size--1-of-3"],[1,"slds-select_container"],[1,"slds-select",3,"disabled","ngModel","ngModelChange"],["value",""],[3,"value",4,"ngFor","ngForOf"],[1,"slds-form-element__control","slds-p-left--xxx-small","slds-size--2-of-3"],[3,"value"]],template:function(e,t){1&e&&(i.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"select",4),i.mxI("ngModelChange",(function(e){return i.DH7(t.module,e)||(t.module=e),e})),i.nrm(5,"option",5),i.DNE(6,r,2,2,"option",6),i.k0s()()(),i.j41(7,"div",7)(8,"div",3)(9,"select",4),i.mxI("ngModelChange",(function(e){return i.DH7(t.modulefilter,e)||(t.modulefilter=e),e})),i.nrm(10,"option"),i.DNE(11,d,2,2,"option",6),i.k0s()()()()()),2&e&&(i.R7$(4),i.Y8G("disabled",t.disabled),i.R50("ngModel",t.module),i.R7$(2),i.Y8G("ngForOf",t.modules),i.R7$(3),i.Y8G("disabled",!t.module||t.disabled),i.R50("ngModel",t.modulefilter),i.R7$(2),i.Y8G("ngForOf",t.modulefilters))},dependencies:[a.Sq,n.xH,n.y7,n.wz,n.BC,n.vS],encapsulation:2})}return SystemInputModuleFilter})()},92482:(e,t,s)=>{"use strict";s.d(t,{W:()=>u});var i=s(54438),n=s(84341),l=s(83935),o=s(69904),a=s(60177),r=s(55480),d=s(79413);function c(e,t){if(1&e&&(i.j41(0,"div",2)(1,"system-checkbox-group-checkbox",3),i.EFF(2),i.k0s()()),2&e){const e=t.$implicit;i.R7$(),i.Y8G("value",e.value),i.R7$(),i.SpI(" ",e.display,"")}}let u=(()=>{class SystemInputMultiEnum{constructor(e,t){this.metadata=e,this.language=t,this.options=[]}get value(){return this._value}set value(e){this._value=e,this.onChange(e)}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}writeValue(e){this._value=e}ngOnInit(){this.getOptions()}getOptions(){let e=[],t=this.language.getFieldDisplayOptions(this.module,this.field);for(let s in t)s&&t[s]&&e.push({value:s,display:t[s]});if(this.options=e,this.sortdirection)switch(this.sortdirection.toLowerCase()){case"desc":this.options.sort(((e,t)=>e.display.toLowerCase()<t.display.toLowerCase()?1:-1));break;case"asc":this.options.sort(((e,t)=>e.display.toLowerCase()>t.display.toLowerCase()?1:-1))}}static#e=this.ɵfac=function(e){return new(e||SystemInputMultiEnum)(i.rXU(l.yu),i.rXU(o.B))};static#t=this.ɵcmp=i.VBU({type:SystemInputMultiEnum,selectors:[["system-input-multienum"]],inputs:{module:"module",field:"field",sortdirection:"sortdirection"},features:[i.Jv_([{provide:n.kq,useExisting:(0,i.Rfq)((()=>SystemInputMultiEnum)),multi:!0}])],decls:2,vars:2,consts:[[1,"slds-grid","slds-wrap",3,"ngModel","ngModelChange"],["class","slds-large-size--1-of-3 slds-medium-size--1-of-1 slds-truncate",4,"ngFor","ngForOf"],[1,"slds-large-size--1-of-3","slds-medium-size--1-of-1","slds-truncate"],[3,"value"]],template:function(e,t){1&e&&(i.j41(0,"system-checkbox-group",0),i.mxI("ngModelChange",(function(e){return i.DH7(t.value,e)||(t.value=e),e})),i.DNE(1,c,3,2,"div",1),i.k0s()),2&e&&(i.R50("ngModel",t.value),i.R7$(),i.Y8G("ngForOf",t.options))},dependencies:[a.Sq,n.BC,n.vS,r.G,d.h],encapsulation:2})}return SystemInputMultiEnum})()},2265:(e,t,s)=>{"use strict";s.d(t,{N:()=>b});var i=s(54438),n=s(84341),l=s(50531),o=s(48849),a=s(60177),r=s(25863);const d=["numberinput"];function c(e,t){}function u(e,t){if(1&e&&(i.j41(0,"div",3)(1,"div",4),i.DNE(2,c,0,0,"ng-template",5),i.k0s()()),2&e){i.XpG();const e=i.sdS(3);i.R7$(2),i.Y8G("ngTemplateOutlet",e)}}function m(e,t){}function h(e,t){if(1&e&&i.DNE(0,m,0,0,"ng-template",5),2&e){i.XpG();const e=i.sdS(3);i.Y8G("ngTemplateOutlet",e)}}function g(e,t){if(1&e){const e=i.RV6();i.j41(0,"div",10)(1,"button",11),i.bIt("click",(function(){i.eBV(e);const t=i.XpG(2);return i.Njj(t.openCalculator())})),i.nrm(2,"system-button-icon",12),i.k0s()()}}const p=e=>({width:e});function f(e,t){if(1&e){const e=i.RV6();i.j41(0,"div",6)(1,"input",7,8),i.mxI("ngModelChange",(function(t){i.eBV(e);const s=i.XpG();return i.DH7(s.textValue,t)||(s.textValue=t),i.Njj(t)})),i.bIt("keydown",(function(t){i.eBV(e);const s=i.XpG();return i.Njj(s.checkInput(t))}))("ngModelChange",(function(t){i.eBV(e);const s=i.XpG();return i.Njj(s.fieldChanged(t))})),i.k0s(),i.DNE(3,g,3,0,"div",9),i.k0s()}if(2&e){const e=i.XpG();i.R7$(),i.R50("ngModel",e.textValue),i.Y8G("disabled",e.disabled)("ngStyle",i.eq3(6,p,e.size?"auto":void 0)),i.BMQ("placeholder",e.placeholder)("size",e.size),i.R7$(2),i.Y8G("ngIf",e.withCalculator)}}let b=(()=>{class SystemInputNumber{set onPrecisionChange(e){this.precision=e,this.textValue="number"!=typeof this.textValue?this.getValSanitized(this.textValue):this.textValue}set setCalculator(e){this.withCalculator=!1!==e}constructor(e,t,s){this.userpreferences=e,this.renderer=t,this.injector=s,this.precision=0,this.withCalculator=!1,this.onlyField=!1,this.disabled=!1,this.asNumber=!1,this.textValue="",this.lastTextValue="",this.allowedKeys=["ArrowRight","ArrowLeft","Backspace","Delete","Tab"],this.decimalKeyStroke="",this.curposStartDecimalKeyStroke=0,this.latestKeyStroke="",this.counterAfterdecimalKeyStroke=0}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}writeValue(e){this.textValue="number"==typeof e||this.asNumber?this.getValAsText(e):this.getValSanitized(e),this.lastTextValue=this.textValue}onChange(e){}onTouched(){}fieldChanged(e){let t=this.numberinput.nativeElement.selectionEnd,s=this.numberinput.nativeElement.selectionStart,i=this.textValue.indexOf(this.userpreferences.toUse.dec_sep),n=(this.textValue.length,this.textValue);i<0&&this.resetDecimalCounter(),this.textValue="number"!=typeof this.textValue?this.getValSanitized(this.textValue):this.textValue,this.textValue!==this.lastTextValue&&(this.asNumber?this.onChange(this.getNumberFromText(this.textValue)):this.onChange(this.textValue),this.lastTextValue=this.textValue,this.calculateCursorPosition(t,s,i,n))}getValSanitized(e){let t=this.userpreferences.toUse,s=(void 0===this.precision?t.default_currency_significant_digits:this.precision,this.textValue.split(t.num_grp_sep).join(""));return this.isInteger()||(s=s.split(t.dec_sep).join(".")),isNaN(s=parseFloat(s))&&(s=void 0,this.resetDecimalCounter()),s=s&&s>this.max?this.max:s,s=s&&s<this.min?this.min:s,this.getValAsText(s)}getNumberFromText(e){let t=this.userpreferences.toUse,s=(void 0===this.precision?t.default_currency_significant_digits:this.precision,this.textValue.split(t.num_grp_sep).join(""));return s=s.split(t.dec_sep).join("."),s=isNaN(parseFloat(s))?void 0:parseFloat(s),s}getValAsText(e){if(void 0===e)return"";let t;return t=this.isInteger()?parseInt(e,10):parseFloat(e),isNaN(t)?"":this.userpreferences.formatMoney(t,this.precision)}checkInput(e){if(this.latestKeyStroke=e.key,!new RegExp(this.defineInputPattern(),"g").test(e.key)&&this.allowedKeys.indexOf(e.key)<0)return this.resetDecimalCounter(),e.preventDefault(),!1;if(this.moveCursorOnDecimalSeparatorRemove())return e.preventDefault(),!1;if(this.removeDecimalDigits())return e.preventDefault(),!1;if(this.decimalKeyStroke==this.userpreferences.toUse.dec_sep&&(this.counterAfterdecimalKeyStroke++,this.counterAfterdecimalKeyStroke>this.precision&&(this.counterAfterdecimalKeyStroke=1)),e.key==this.userpreferences.toUse.dec_sep&&(this.decimalKeyStroke=e.key,this.counterAfterdecimalKeyStroke=0,this.textValue.split(this.userpreferences.toUse.dec_sep).length>0)){let t=this.textValue.indexOf(this.userpreferences.toUse.dec_sep)+1;return this.setCursorPosition(t),this.resetDecimalCounter(),e.preventDefault(),!1}}calculateCursorPosition(e,t,s,i){let n=this.textValue.indexOf(this.userpreferences.toUse.dec_sep),l=!1,o=this.textValue.length-i.length,a=i.split(this.userpreferences.toUse.num_grp_sep).length-this.textValue.split(this.userpreferences.toUse.num_grp_sep).length;this.allowedKeys.indexOf(this.latestKeyStroke)<0?this.isInteger()?(e=t+o,l=!0):""==this.decimalKeyStroke&&n>0&&(e=t,s>0&&(e+=n-s),l=!0):(this.onBackspace()||this.onDelete())&&(this.resetDecimalCounter(),e=t,o<0&&(e=t-a),o>0&&a<0&&(e+=Math.abs(a)),0==t&&(e=0),l=!0),l&&this.setCursorPosition(e)}setCursorPosition(e){setTimeout((()=>{this.renderer.setProperty(this.numberinput.nativeElement,"selectionStart",e),this.renderer.setProperty(this.numberinput.nativeElement,"selectionEnd",e)}))}isInteger(){return this.precision<=0||void 0===this.precision}defineInputPattern(){let e="^[-+]?[-0-9";return e+=this.userpreferences.toUse.num_grp_sep,this.isInteger()||(e+=this.userpreferences.toUse.dec_sep),e+="]+$",e}resetDecimalCounter(){this.decimalKeyStroke="",this.counterAfterdecimalKeyStroke=0}onDelete(){return"Delete"==this.latestKeyStroke}onBackspace(){return"Backspace"==this.latestKeyStroke}moveCursorOnDecimalSeparatorRemove(){if(!this.isInteger()){this.latestKeyStroke;if(!this.onBackspace()&&!this.onDelete())return!1;let e=this.numberinput.nativeElement.selectionStart,t=this.textValue.indexOf(this.userpreferences.toUse.dec_sep),s=0;if(this.onBackspace()&&e==t+1?s=-1:this.onDelete()&&e==t&&(s=1),0!=s)return this.setCursorPosition(e+s),!0}return!1}removeDecimalDigits(){if(this.isInteger()||this.textValue.length<=0)return!1;return this.numberinput.nativeElement.selectionStart==this.textValue.length&&this.allowedKeys.indexOf(this.latestKeyStroke)<0}openCalculator(){this.injector.get(l.y).openModal("SpiceCalculatorModal").subscribe((e=>{e.instance.value=this.textValue,e.instance.trigger=!0,e.instance.value$.subscribe((e=>{this.textValue=this.userpreferences.formatMoney(e,2)}))}))}static#e=this.ɵfac=function(e){return new(e||SystemInputNumber)(i.rXU(o.S),i.rXU(i.sFG),i.rXU(i.zZn))};static#t=this.ɵcmp=i.VBU({type:SystemInputNumber,selectors:[["system-input-number"]],viewQuery:function(e,t){if(1&e&&i.GBs(d,5),2&e){let e;i.mGM(e=i.lsd())&&(t.numberinput=e.first)}},inputs:{max:"max",min:"min",onPrecisionChange:[i.Mj6.None,"precision","onPrecisionChange"],setCalculator:[i.Mj6.None,"system-input-number-with-calculator","setCalculator"],onlyField:"onlyField",placeholder:"placeholder",disabled:"disabled",size:"size",asNumber:"asNumber"},features:[i.Jv_([{provide:n.kq,useExisting:(0,i.Rfq)((()=>SystemInputNumber)),multi:!0}])],decls:4,vars:2,consts:[["class","slds-form-element__control",4,"ngIf"],[4,"ngIf"],["field",""],[1,"slds-form-element__control"],[1,"slds-form-element"],[3,"ngTemplateOutlet"],[1,"slds-input-has-icon","slds-input-has-icon_right"],["type","text",1,"slds-input","slds-text-align--right",3,"ngModel","disabled","ngStyle","ngModelChange","keydown"],["numberinput",""],["class","slds-input__icon-group slds-input__icon-group_right slds-height_full slds-grid","style","top: 0; margin: 0; height: 100%",4,"ngIf"],[1,"slds-input__icon-group","slds-input__icon-group_right","slds-height_full","slds-grid",2,"top","0","margin","0","height","100%"],[1,"slds-input__icon","slds-input__icon_right","slds-button","slds-button_icon",2,"position","relative",3,"click"],["icon","formula"]],template:function(e,t){1&e&&i.DNE(0,u,3,1,"div",0)(1,h,1,1,null,1)(2,f,4,8,"ng-template",null,2,i.C5r),2&e&&(i.Y8G("ngIf",!t.onlyField),i.R7$(),i.Y8G("ngIf",t.onlyField))},dependencies:[a.bT,a.T3,a.B3,n.me,n.BC,n.vS,r.t],encapsulation:2})}return SystemInputNumber})()},40145:(e,t,s)=>{"use strict";s.d(t,{B:()=>o});var i=s(54438),n=s(84341),l=s(25863);let o=(()=>{class SystemInputPassword{constructor(){this._inputtype="password",this.disabled=!1}get value(){return this._value}set value(e){e!=this._value&&(this._value=e,this.onChange(e))}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}writeValue(e){this._value=e}get inputtype(){return this.disabled?"password":this._inputtype}toggleType(){this._inputtype="text"==this._inputtype?"password":"text"}get toggleicon(){return"text"==this.inputtype?"hide":"preview"}static#e=this.ɵfac=function(e){return new(e||SystemInputPassword)};static#t=this.ɵcmp=i.VBU({type:SystemInputPassword,selectors:[["system-input-password"]],inputs:{disabled:"disabled"},features:[i.Jv_([{provide:n.kq,useExisting:(0,i.Rfq)((()=>SystemInputPassword)),multi:!0}])],decls:4,vars:5,consts:[[1,"slds-form-element__control","slds-input-has-icon","slds-input-has-icon_right"],["tabindex","-1",1,"slds-button","slds-button_icon","slds-input__icon","slds-input__icon_right",3,"disabled","click"],[3,"icon"],["autocomplete","new-password",1,"slds-input",3,"type","disabled","ngModel","ngModelChange"]],template:function(e,t){1&e&&(i.j41(0,"div",0)(1,"button",1),i.bIt("click",(function(){return t.toggleType()})),i.nrm(2,"system-button-icon",2),i.k0s(),i.j41(3,"input",3),i.mxI("ngModelChange",(function(e){return i.DH7(t.value,e)||(t.value=e),e})),i.k0s()()),2&e&&(i.R7$(),i.Y8G("disabled",t.disabled),i.R7$(),i.Y8G("icon",t.toggleicon),i.R7$(),i.Y8G("type",t.inputtype)("disabled",t.disabled),i.R50("ngModel",t.value))},dependencies:[n.me,n.BC,n.vS,l.t],encapsulation:2})}return SystemInputPassword})()},66589:(e,t,s)=>{"use strict";s.d(t,{J:()=>a});var i=s(54438),n=s(84341),l=s(92462);const o=["*"];let a=(()=>{class SystemInputRadio{constructor(e){this.modelutilities=e,this.disabled=!1,this.canUnset=!1,this.id=this.modelutilities.generateGuid()}setChecked(e){e.target.checked&&this.onChange(this.value)}registerOnChange(e){this.onChange=t=>{e(t)}}registerOnTouched(e){this.onTouched=e}writeValue(e){void 0!==e&&(e==this.value?this.checked=!0:this.checked=!1)}clickLabel(e){if(!this.canUnset)return;let t=e.target.parentElement.parentElement.firstChild;t.checked&&(t.checked=!1,this.onChange(null),e.preventDefault())}static#e=this.ɵfac=function(e){return new(e||SystemInputRadio)(i.rXU(l.g))};static#t=this.ɵcmp=i.VBU({type:SystemInputRadio,selectors:[["system-input-radio"]],inputs:{name:"name",value:"value",disabled:"disabled",canUnset:"canUnset"},features:[i.Jv_([{provide:n.kq,useExisting:(0,i.Rfq)((()=>SystemInputRadio)),multi:!0}])],ngContentSelectors:o,decls:6,vars:5,consts:[[1,"slds-radio","slds-truncate","slds-is-relative"],["type","radio",3,"id","name","checked","disabled","change"],[1,"slds-radio__label",3,"click"],[1,"slds-radio_faux","slds-m-horizontal--xxx-small"],[1,"slds-form-element__label"]],template:function(e,t){1&e&&(i.NAR(),i.j41(0,"div",0)(1,"input",1),i.bIt("change",(function(e){return t.setChecked(e)})),i.k0s(),i.j41(2,"label",2),i.bIt("click",(function(e){return t.clickLabel(e)})),i.nrm(3,"span",3),i.j41(4,"span",4),i.SdG(5),i.k0s()()()),2&e&&(i.R7$(),i.Y8G("id",t.id)("name",t.name)("checked",t.checked)("disabled",t.disabled),i.R7$(),i.BMQ("for",t.id))},encapsulation:2})}return SystemInputRadio})()},39554:(e,t,s)=>{"use strict";s.d(t,{s:()=>u});var i=s(54438),n=s(84341),l=s(60177),o=s(32062),a=s(18521);function r(e,t){if(1&e&&i.nrm(0,"system-label",8),2&e){const e=i.XpG().$implicit;i.Y8G("label",e.label)}}function d(e,t){if(1&e&&i.nrm(0,"system-utility-icon",9),2&e){const e=i.XpG().$implicit;i.Y8G("icon",e.icon||"choice")}}function c(e,t){if(1&e){const e=i.RV6();i.j41(0,"span",2)(1,"input",3),i.mxI("ngModelChange",(function(t){i.eBV(e);const s=i.XpG();return i.DH7(s.modelValue,t)||(s.modelValue=t),i.Njj(t)})),i.k0s(),i.j41(2,"label",4)(3,"span",5),i.DNE(4,r,1,1,"system-label",6)(5,d,1,1,"ng-template",null,7,i.C5r),i.k0s()()()}if(2&e){const e=t.$implicit,s=i.sdS(6),n=i.XpG();i.R7$(),i.R50("ngModel",n.modelValue),i.Y8G("value",e.value)("disabled",n.disabled||e.disabled)("name",n.groupName)("id",e.id),i.R7$(),i.Y8G("for",e.id),i.R7$(2),i.Y8G("ngIf",!!e.label)("ngIfElse",s)}}let u=(()=>{class SystemInputRadioButtonGroup{constructor(e){this.cdRef=e,this.inputOptions=[],this.disabled=!1,this.groupName=_.uniqueId("group-name-")}get modelValue(){return this._modelValue}set modelValue(e){this.onChange(e),this.writeValue(e)}ngAfterViewInit(){this.cdRef.detach()}ngOnChanges(e){e.inputOptions&&this.setItemsInitialValues(),this.cdRef.detectChanges()}registerOnChange(e){this.onChange=t=>{e(t)}}registerOnTouched(e){this.onTouched=e}writeValue(e){this._modelValue=e,this.cdRef.detectChanges()}setItemsInitialValues(){this.inputOptions.forEach((e=>{e.id||(e.id=_.uniqueId("input-id-")),e.label&&!e.title&&(e.title=e.label)}))}trackByFn(e,t){return t.id}static#e=this.ɵfac=function(e){return new(e||SystemInputRadioButtonGroup)(i.rXU(i.gRc))};static#t=this.ɵcmp=i.VBU({type:SystemInputRadioButtonGroup,selectors:[["system-input-radio-button-group"]],inputs:{inputOptions:"inputOptions",disabled:"disabled"},features:[i.Jv_([{provide:n.kq,useExisting:(0,i.Rfq)((()=>SystemInputRadioButtonGroup)),multi:!0}]),i.OA$],decls:2,vars:2,consts:[[1,"slds-radio_button-group","slds-m-right--x-small"],["class","slds-button slds-radio_button",4,"ngFor","ngForOf","ngForTrackBy"],[1,"slds-button","slds-radio_button"],["type","radio",3,"ngModel","value","disabled","name","id","ngModelChange"],[1,"slds-radio_button__label","slds-height_full",3,"for"],[1,"slds-radio_faux","slds-align--absolute-center",2,"padding","0 .5rem","display","initial"],["class","slds-truncate",3,"label",4,"ngIf","ngIfElse"],["iconContainer",""],[1,"slds-truncate",3,"label"],["size","x-small",3,"icon"]],template:function(e,t){1&e&&(i.j41(0,"div",0),i.DNE(1,c,7,8,"span",1),i.k0s()),2&e&&(i.R7$(),i.Y8G("ngForOf",t.inputOptions)("ngForTrackBy",t.trackByFn))},dependencies:[l.Sq,l.bT,n.me,n.Fm,n.BC,n.vS,o.W,a.B],encapsulation:2,changeDetection:0})}return SystemInputRadioButtonGroup})()},13957:(e,t,s)=>{"use strict";s.d(t,{$:()=>m});var i=s(54438),n=s(84341),l=s(69904),o=s(50531),a=s(60177),r=s(25863),d=s(68823);function c(e,t){if(1&e){const e=i.RV6();i.j41(0,"div",5)(1,"div",6)(2,"span",7)(3,"span",8),i.nrm(4,"system-icon",9),i.k0s(),i.j41(5,"span",10),i.EFF(6),i.k0s(),i.j41(7,"button",11),i.bIt("click",(function(){i.eBV(e);const t=i.XpG();return i.Njj(t.clearField())})),i.nrm(8,"system-button-icon",12),i.k0s()()()()}if(2&e){const e=i.XpG();i.R7$(4),i.Y8G("module",e.module),i.R7$(2),i.JRh(e._relatedname),i.R7$(2),i.Y8G("icon","close")}}function u(e,t){if(1&e){const e=i.RV6();i.j41(0,"div",13)(1,"input",14),i.bIt("focus",(function(){i.eBV(e);const t=i.XpG();return i.Njj(t.searchWithModal())})),i.k0s(),i.j41(2,"button",15),i.bIt("click",(function(){i.eBV(e);const t=i.XpG();return i.Njj(t.searchWithModal())})),i.nrm(3,"system-button-icon",12),i.k0s()()}if(2&e){const e=i.XpG();i.R7$(),i.Y8G("placeholder",e.language.getModuleCombinedLabel("LBL_SEARCH",e.module)),i.R7$(2),i.Y8G("icon","search")}}let m=(()=>{class SystemInputRelate{constructor(e,t){this.language=e,this.modal=t,this.nameField="summary_text"}clearField(){this._relatedid=void 0,this._relatedname=void 0,this.onChange(void 0)}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}writeValue(e){if(e){let t=e.split("::");this._relatedid=t[0],this._relatedname=t[1]}this._relatedid=e}searchWithModal(){this.modal.openModal("ObjectModalModuleLookup").subscribe((e=>{e.instance.module=this.module,e.instance.modulefilter=this.moduleFilter,e.instance.multiselect=!1,e.instance.selectedItems.subscribe((e=>{e.length&&(this._relatedid=e[0].id,this._relatedname=e[0][this.nameField],this.onChange(this._relatedid+"::"+this._relatedname))}))}))}static#e=this.ɵfac=function(e){return new(e||SystemInputRelate)(i.rXU(l.B),i.rXU(o.y))};static#t=this.ɵcmp=i.VBU({type:SystemInputRelate,selectors:[["system-input-relate"]],inputs:{module:"module",moduleFilter:"moduleFilter",nameField:"nameField"},features:[i.Jv_([{provide:n.kq,useExisting:(0,i.Rfq)((()=>SystemInputRelate)),multi:!0}])],decls:5,vars:2,consts:[[1,"slds-combobox_container"],[1,"slds-form-element","slds-lookup"],["role","combobox",1,"slds-combobox","slds-dropdown-trigger","slds-dropdown-trigger_click"],["class","slds-form-element__control",4,"ngIf"],["class","slds-combobox__form-element slds-input-has-icon slds-input-has-icon_right",4,"ngIf"],[1,"slds-form-element__control"],[1,"slds-pill_container"],[1,"slds-pill","slds-size--1-of-1"],[1,"slds-icon_container","slds-icon-standard-account","slds-pill__icon_container"],["size","small",3,"module"],[1,"slds-pill__label"],[1,"slds-button","slds-button--icon","slds-pill__remove",3,"click"],[3,"icon"],[1,"slds-combobox__form-element","slds-input-has-icon","slds-input-has-icon_right"],["type","text","autocomplete","none","role","combobox",1,"slds-input","slds-combobox__input",3,"placeholder","focus"],[1,"slds-button","slds-button_icon","slds-input__icon","slds-input__icon_right",3,"click"]],template:function(e,t){1&e&&(i.j41(0,"div",0)(1,"div",1)(2,"div",2),i.DNE(3,c,9,3,"div",3)(4,u,4,2,"div",4),i.k0s()()()),2&e&&(i.R7$(3),i.Y8G("ngIf",t._relatedid),i.R7$(),i.Y8G("ngIf",!t._relatedid))},dependencies:[a.bT,r.t,d.J],encapsulation:2})}return SystemInputRelate})()},24834:(e,t,s)=>{"use strict";s.d(t,{w:()=>v});var i=s(54438),n=s(84341),l=s(33726),o=s(96697),a=s(65029),r=s(53584),d=s(81086),c=s(90154),u=s(60177),m=s(25863),h=s(32062),g=s(18521);function p(e,t){if(1&e){const e=i.RV6();i.j41(0,"button",10),i.bIt("click",(function(){i.eBV(e);const t=i.XpG(),s=i.sdS(8);return i.Njj(t.toggleShowError(s))})),i.nrm(1,"system-button-icon",11),i.k0s()}}function f(e,t){if(1&e&&(i.j41(0,"div"),i.nrm(1,"system-label",14),i.k0s()),2&e){const e=t.$implicit;i.R7$(),i.Y8G("label",e.label)("nestedValues",e.nestedValues)}}function b(e,t){if(1&e&&(i.j41(0,"div",12),i.DNE(1,f,2,2,"div",13),i.k0s()),2&e){const e=i.XpG();i.R7$(),i.Y8G("ngForOf",e.searchTermErrors)}}const y=e=>({"slds-has-error":e});let v=(()=>{class SystemInputSearchTerm{constructor(e,t){this.fts=e,this.configuration=t,this.showError=!1,this.placeholder="LBL_SEARCH",this.timeoutSeconds=1e3,this.onSearchTermClear=new i.bkB,this.onFocusChange=new i.bkB,this.onEnterPress=new i.bkB}get searchTerm(){return this._searchTerm}set searchTerm(e){this._searchTerm=e,window.clearTimeout(this.searchTimeoutId);const t=e?this.fts.checkForSearchTermErrors(e):void 0;t?this.searchTermErrors=t:(this.searchTermErrors=void 0,this.showError=!1,this.searchTimeoutId=window.setTimeout((()=>this.onChange(e)),this.timeoutSeconds))}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}writeValue(e){this._searchTerm=e}clearSearchTerm(){this.searchTimeoutId&&window.clearTimeout(this.searchTimeoutId),this._searchTerm="",this.onSearchTermClear.emit()}toggleShowError(e){this.showError=!this.showError,this.showError&&this.handleDocumentClick(e)}handleDocumentClick(e){(0,l.R)(window,"mousedown").pipe((0,o.s)(1)).subscribe((t=>{e.contains(t.target)?this.handleDocumentClick(e):this.showError=!1}))}static#e=this.ɵfac=function(e){return new(e||SystemInputSearchTerm)(i.rXU(a.s),i.rXU(r.i))};static#t=this.ɵcmp=i.VBU({type:SystemInputSearchTerm,selectors:[["system-input-search-term"]],inputs:{placeholder:"placeholder",timeoutSeconds:"timeoutSeconds"},outputs:{onSearchTermClear:"onSearchTermClear",onFocusChange:"onFocusChange",onEnterPress:"onEnterPress"},features:[i.Jv_([{provide:n.kq,useExisting:(0,i.Rfq)((()=>SystemInputSearchTerm)),multi:!0}])],decls:10,vars:10,consts:[[1,"slds-form-element","slds-size--1-of-1",3,"ngClass"],[1,"slds-form-element__control","slds-input-has-icon","slds-input-has-icon--left-right","slds-size--1-of-1"],["icon","search","size","x-small","addclasses","slds-icon slds-input__icon slds-input__icon_left"],["system-autofocus","","type","search",1,"slds-input","slds-lookup__search-input",3,"ngModel","system-placeholder","ngModelChange","keyup.enter","focus","blur"],["class","slds-button slds-button_icon slds-input__icon slds-input__icon_right","style","right: 36px",3,"click",4,"ngIf"],[1,"slds-button","slds-button_icon","slds-input__icon","slds-input__icon_right",3,"disabled","click"],["icon","clear"],["role","tooltip",1,"slds-popover","slds-popover_tooltip","slds-nubbin--top-right","slds-rise-from-ground","slds-is-absolute",2,"top","36px","right","20px","width","320px","height","auto"],["errorContainer",""],["class","slds-popover__body slds-scrollable_y",4,"ngIf"],[1,"slds-button","slds-button_icon","slds-input__icon","slds-input__icon_right",2,"right","36px",3,"click"],["icon","warning"],[1,"slds-popover__body","slds-scrollable_y"],[4,"ngFor","ngForOf"],[3,"label","nestedValues"]],template:function(e,t){1&e&&(i.j41(0,"div",0)(1,"div",1),i.nrm(2,"system-utility-icon",2),i.j41(3,"input",3),i.mxI("ngModelChange",(function(e){return i.DH7(t.searchTerm,e)||(t.searchTerm=e),e})),i.bIt("keyup.enter",(function(){return t.onEnterPress.emit()}))("focus",(function(){return t.onFocusChange.emit(!0)}))("blur",(function(){return t.onFocusChange.emit(!1)})),i.k0s(),i.DNE(4,p,2,0,"button",4),i.j41(5,"button",5),i.bIt("click",(function(){return t.clearSearchTerm()})),i.nrm(6,"system-button-icon",6),i.k0s(),i.j41(7,"div",7,8),i.DNE(9,b,2,1,"div",9),i.k0s()()()),2&e&&(i.Y8G("ngClass",i.eq3(8,y,t.searchTermErrors)),i.R7$(3),i.R50("ngModel",t.searchTerm),i.Y8G("system-placeholder",t.placeholder),i.R7$(),i.Y8G("ngIf",t.searchTermErrors),i.R7$(),i.Y8G("disabled",!t.searchTerm),i.R7$(2),i.AVh("slds-hide",!t.showError),i.R7$(2),i.Y8G("ngIf",t.searchTermErrors))},dependencies:[d.a,c.m,u.YU,u.Sq,u.bT,n.me,n.BC,n.vS,m.t,h.W,g.B],encapsulation:2})}return SystemInputSearchTerm})()},92695:(e,t,s)=>{"use strict";s.d(t,{V:()=>h});var i=s(54438),n=s(84341),l=s(83935),o=s(69904),a=s(53584),r=s(60177),d=s(32062);function c(e,t){if(1&e&&(i.j41(0,"option",8),i.nrm(1,"system-label",9),i.k0s()),2&e){const e=t.$implicit;i.Y8G("value",e.sc),i.R7$(),i.Y8G("label",e.label)}}function u(e,t){if(1&e){const e=i.RV6();i.j41(0,"div",3)(1,"select",4,5),i.mxI("ngModelChange",(function(t){i.eBV(e);const s=i.XpG();return i.DH7(s.value,t)||(s.value=t),i.Njj(t)})),i.nrm(3,"option",6),i.DNE(4,c,2,2,"option",7),i.k0s()()}if(2&e){const e=i.XpG();i.R7$(),i.Y8G("disabled",0==e.states.length||e.disabled),i.R50("ngModel",e.value),i.R7$(3),i.Y8G("ngForOf",e.states)}}function m(e,t){if(1&e){const e=i.RV6();i.j41(0,"div",10)(1,"input",11),i.mxI("ngModelChange",(function(t){i.eBV(e);const s=i.XpG();return i.DH7(s.value,t)||(s.value=t),i.Njj(t)})),i.k0s()()}if(2&e){const e=i.XpG();i.R7$(),i.R50("ngModel",e.value),i.Y8G("disabled",e.disabled)}}let h=(()=>{class SystemInputState{constructor(e,t,s){this.metadata=e,this.language=t,this.configuration=s,this.disabled=!1,this.states=[],this.strict=!1,"strict"==this.configuration.data.backendextensions.spiceui.config.format&&(this.strict=!0)}get value(){return this._value}set value(e){e!=this._value&&(this._value=e,this.onChange(e))}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}writeValue(e){this._value=e}ngOnChanges(){this.strict&&this.getStates()}getStates(){if(this.states=[],this.country){let e=this.configuration.getData("countries");e.states&&(this.states=e.states.filter((e=>e.cc==this.country)),this.states.sort(((e,t)=>this.language.getLabel(e.label).localeCompare(this.language.getLabel(t.label)))))}}static#e=this.ɵfac=function(e){return new(e||SystemInputState)(i.rXU(l.yu),i.rXU(o.B),i.rXU(a.i))};static#t=this.ɵcmp=i.VBU({type:SystemInputState,selectors:[["system-input-state"]],inputs:{country:"country",disabled:"disabled"},features:[i.Jv_([{provide:n.kq,useExisting:(0,i.Rfq)((()=>SystemInputState)),multi:!0}]),i.OA$],decls:4,vars:2,consts:[[1,"slds-form-element"],["class","slds-select_container",4,"ngIf","ngIfElse"],["countryinput",""],[1,"slds-select_container"],[1,"slds-select",3,"disabled","ngModel","ngModelChange"],["focus",""],["value",""],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[3,"label"],[1,"slds-form-element__control"],["type","text",1,"slds-input",3,"ngModel","disabled","ngModelChange"]],template:function(e,t){if(1&e&&(i.j41(0,"div",0),i.DNE(1,u,5,3,"div",1)(2,m,2,2,"ng-template",null,2,i.C5r),i.k0s()),2&e){const e=i.sdS(3);i.R7$(),i.Y8G("ngIf",t.strict)("ngIfElse",e)}},dependencies:[r.Sq,r.bT,n.xH,n.y7,n.me,n.wz,n.BC,n.vS,d.W],encapsulation:2})}return SystemInputState})()},31033:(e,t,s)=>{"use strict";s.d(t,{j:()=>u});var i=s(54438),n=s(48849),l=s(49722),o=s(69904),a=s(60177),r=s(84341);function d(e,t){if(1&e){const e=i.RV6();i.j41(0,"li",7),i.bIt("click",(function(){const t=i.eBV(e).$implicit,s=i.XpG();return i.Njj(s.addTag(t))})),i.j41(1,"div",8),i.EFF(2),i.k0s()()}if(2&e){const e=t.$implicit;i.R7$(2),i.SpI(" ",e," ")}}const c=e=>({"slds-is-open":e});let u=(()=>{class SystemInputTags{constructor(e,t,s,n,l){this.elementref=e,this.renderer=t,this.userpreferences=s,this.backend=n,this.language=l,this.tagemitter=new i.bkB,this.querystring="",this.querytimeout=void 0,this.matchedtags=[]}get isOpen(){return this.matchedtags.length>0}search(e){switch(e.key){case"ArrowDown":case"ArrowUp":break;case",":case";":case"Enter":this.addTag(this.querystring.replace(/^[\s]+|[\s\W]+$/gm,""));break;default:this.querytimeout&&window.clearTimeout(this.querytimeout),this.querytimeout=window.setTimeout((()=>this.doSearch()),500)}}doSearch(){this.backend.postRequest("common/spicetags",{},{search:this.querystring.trim()}).subscribe((e=>{this.matchedtags=e,this.matchedtags.sort(((e,t)=>e.toLowerCase()>t.toLowerCase()?1:-1))}))}addTag(e){this.querytimeout&&window.clearTimeout(this.querytimeout),this.matchedtags=[],this.tagemitter.emit(e),this.querystring=""}static#e=this.ɵfac=function(e){return new(e||SystemInputTags)(i.rXU(i.aKT),i.rXU(i.sFG),i.rXU(n.S),i.rXU(l.H),i.rXU(o.B))};static#t=this.ɵcmp=i.VBU({type:SystemInputTags,selectors:[["system-input-tags"]],outputs:{tagemitter:"tagemitter"},decls:7,vars:6,consts:[[1,"slds-combobox_container"],["role","combobox",1,"slds-combobox","slds-dropdown-trigger","slds-dropdown-trigger_click",3,"ngClass"],["role","none",1,"slds-combobox__form-element"],["type","search",1,"slds-input","slds-combobox__input",3,"placeholder","ngModel","ngModelChange","keyup"],["role","listbox",1,"slds-dropdown","slds-dropdown_fluid"],["role","presentation",1,"slds-listbox","slds-listbox_vertical"],["role","presentation","class","slds-listbox__item",3,"click",4,"ngFor","ngForOf"],["role","presentation",1,"slds-listbox__item",3,"click"],["role","option",1,"slds-media","slds-listbox__option","slds-listbox__option_plain"]],template:function(e,t){1&e&&(i.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"input",3),i.mxI("ngModelChange",(function(e){return i.DH7(t.querystring,e)||(t.querystring=e),e})),i.bIt("keyup",(function(e){return t.search(e)})),i.k0s()(),i.j41(4,"div",4)(5,"ul",5),i.DNE(6,d,3,1,"li",6),i.k0s()()()()),2&e&&(i.R7$(),i.Y8G("ngClass",i.eq3(4,c,t.isOpen)),i.R7$(2),i.Y8G("placeholder",t.language.getLabel("LBL_SEARCH_TAG")),i.R50("ngModel",t.querystring),i.R7$(3),i.Y8G("ngForOf",t.matchedtags))},dependencies:[a.YU,a.Sq,r.me,r.BC,r.vS],encapsulation:2})}return SystemInputTags})()},30991:(e,t,s)=>{"use strict";s.d(t,{H:()=>m});var i=s(54438),n=s(84341),l=s(92462),o=s(20883),a=s(90154),r=s(60177),d=s(25863);function c(e,t){if(1&e){const e=i.RV6();i.j41(0,"button",4),i.bIt("click",(function(){i.eBV(e);const t=i.XpG();return i.Njj(t.value="")})),i.nrm(1,"system-button-icon",5),i.k0s()}}const u=(e,t)=>({"slds-input-has-icon":e,"slds-input-has-icon_right":t});let m=(()=>{class SystemInputText{set _trimInput(e){this.trimInput=!!e&&"blur"}constructor(e,t){this.modelutilities=e,this.elementRef=t,this.disabled=!1,this.autocomplete="off",this.showClear=!1,this.trimInput=!1,this.haserror=!1,this.autocompletebreaker=""}get value(){return this._value}set value(e){e!=this._value&&(this._value=e,this.onChange(e))}ngOnInit(){this.autocomplete&&(this.autocompletebreaker="off"==this.autocomplete?this.modelutilities.generateGuid():this.autocomplete)}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}writeValue(e){this._value=e}emitBlur(){this.elementRef.nativeElement.dispatchEvent(new Event("blur",{bubbles:!0}))}showClearButton(){return!this.disabled&&this.showClear&&this.value}static#e=this.ɵfac=function(e){return new(e||SystemInputText)(i.rXU(l.g),i.rXU(i.aKT))};static#t=this.ɵcmp=i.VBU({type:SystemInputText,selectors:[["system-input-text"]],inputs:{disabled:"disabled",placeholder:"placeholder",maxlength:"maxlength",autocomplete:"autocomplete",showClear:"showClear",_trimInput:[i.Mj6.None,"trim","_trimInput"],haserror:"haserror"},features:[i.Jv_([{provide:n.kq,useExisting:(0,i.Rfq)((()=>SystemInputText)),multi:!0}])],decls:4,vars:11,consts:[[1,"slds-form-element"],[1,"slds-form-element__control",3,"ngClass"],["type","text",1,"slds-input",3,"system-trim-input","autocomplete","maxlength","system-placeholder","disabled","ngModel","ngModelChange","blur"],["class","slds-button slds-button_icon slds-input__icon slds-input__icon_right",3,"click",4,"ngIf"],[1,"slds-button","slds-button_icon","slds-input__icon","slds-input__icon_right",3,"click"],["icon","clear"]],template:function(e,t){1&e&&(i.j41(0,"div",0)(1,"div",1)(2,"input",2),i.mxI("ngModelChange",(function(e){return i.DH7(t.value,e)||(t.value=e),e})),i.bIt("blur",(function(){return t.emitBlur()})),i.k0s(),i.DNE(3,c,2,0,"button",3),i.k0s()()),2&e&&(i.R7$(),i.Y8G("ngClass",i.l_i(8,u,t.showClearButton(),t.showClearButton())),i.R7$(),i.Y8G("system-trim-input",t.trimInput)("autocomplete",t.autocompletebreaker)("maxlength",t.maxlength)("system-placeholder",t.placeholder)("disabled",t.disabled),i.R50("ngModel",t.value),i.R7$(),i.Y8G("ngIf",t.showClearButton()))},dependencies:[o.D,a.m,r.YU,r.bT,n.me,n.BC,n.tU,n.vS,d.t],encapsulation:2})}return SystemInputText})()},64029:(e,t,s)=>{"use strict";s.d(t,{T:()=>y});var i=s(54438),n=s(84341),l=s(48849),o=s(69904),a=s(60177),r=s(25863),d=s(68823),c=s(32062);function u(e,t){if(1&e){const e=i.RV6();i.j41(0,"button",8),i.bIt("click",(function(){i.eBV(e);const t=i.XpG();return i.Njj(t.clear())})),i.nrm(1,"system-button-icon",14),i.k0s()}}const m=e=>({"slds-is-selected":e});function h(e,t){if(1&e){const e=i.RV6();i.j41(0,"li",15),i.bIt("click",(function(){const t=i.eBV(e).$implicit,s=i.XpG();return i.Njj(s.display=t.display)})),i.j41(1,"div",16)(2,"span",17),i.nrm(3,"system-icon",18),i.k0s(),i.j41(4,"span",19)(5,"span",20),i.EFF(6),i.k0s()()()()}if(2&e){const e=t.$implicit,s=i.XpG();i.R7$(),i.Y8G("ngClass",i.eq3(3,m,e.offset==s._time.offset)),i.R7$(4),i.Y8G("title",e.display),i.R7$(),i.JRh(e.display)}}function g(e,t){1&e&&(i.j41(0,"div",21),i.nrm(1,"system-label",22),i.k0s())}const p=e=>({"slds-has-error":e}),f=e=>({"slds-is-open":e}),b=()=>({updateOn:"blur"});let y=(()=>{class SystemInputTime{set hideError(e){this.hideErrorMessage=!1!==e}constructor(e,t,s,n){this.elementref=e,this.renderer=t,this.userpreferences=s,this.language=n,this._time={display:"",moment:null,offset:0,valid:!0},this.dropdownValues=[],this.valid=new i.bkB,this.isOpen=!1,this.minutes_interval=30,this.hideErrorMessage=!1,this.dropdownValues=this.getDropdownValues()}ngOnDestroy(){}get isValid(){return this._time.valid}getDropdownValues(){let e=0,t=[];for(;e<=1440;){let s=(new moment).hour(0).minute(0).second(0);s.add(e,"minutes"),t.push({offset:e,display:s.format(this.userpreferences.getTimeFormat()),current:!1}),e+=this.minutes_interval}return t}getDropDownValueByOffset(e){return this.dropdownValues.find((t=>t.offset==e))}getNextDropDownValue(){return this.getDropDownValueByOffset(this._time.offset+this.minutes_interval)}setDisplayToNextDropDownValue(){this.display=this.getNextDropDownValue().display}setDisplayToPreviousDropDownValue(){this.display=this.getDropDownValueByOffset(this._time.offset-this.minutes_interval).display}get display(){return this._time.display}set display(e){if(e){let t=moment(e,this.userpreferences.getTimeFormat(),!0);if(t.isValid())this._time.moment||(this._time.moment=new moment),this._time.moment.set("hour",t.hour()),this._time.moment.set("minute",t.minute()),this._time.valid=!0,this._time.offset=this.calculateOffset(this._time.moment),this._time.display=e,this.closeDropDown(),this.onChange(this._time.moment);else{if("string"==typeof e&&e.length<=2&&e.length>0)return e=parseInt(e,10)<10?`0${e}:00`:`${e}:00`,void(this.display=e);this._time.valid=!1}}else this.clear();this.valid.emit(this._time.valid)}get canclear(){return!!this._time.display}clear(e=!0){this._time.moment||(this._time.moment=new moment),this._time.moment=null,this._time.display="",this._time.valid=!0,"function"==typeof this.onChange&&e&&this.onChange(this._time.moment)}toggleDropDown(){this.isOpen=!this.isOpen,this.isOpen}closeDropDown(){this.isOpen=!1}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}writeValue(e){e&&e.isValid&&e.isValid()?(this._time.moment=new moment(e),this._time.offset=this.calculateOffset(this._time.moment),this._time.display=this._time.moment.format(this.userpreferences.getTimeFormat())):this.clear(!1)}selectValue(e){this._time.moment||(this._time.moment=new moment),this._time.moment.hour(0).minute(0).second(0),this._time.moment.add(e,"minutes"),this._time.offset=e,this._time.display=this._time.moment.format(this.userpreferences.getTimeFormat()),"function"==typeof this.onChange&&this.onChange(this._time.moment),this.closeDropDown()}calculateOffset(e){let t=60*e.hour()+e.minute();return Math.floor(t/this.minutes_interval)*this.minutes_interval}static#e=this.ɵfac=function(e){return new(e||SystemInputTime)(i.rXU(i.aKT),i.rXU(i.sFG),i.rXU(l.S),i.rXU(o.B))};static#t=this.ɵcmp=i.VBU({type:SystemInputTime,selectors:[["system-input-time"]],inputs:{hideError:[i.Mj6.None,"system-input-time-hide-error","hideError"]},outputs:{valid:"valid"},features:[i.Jv_([{provide:n.kq,useExisting:(0,i.Rfq)((()=>SystemInputTime)),multi:!0}])],decls:14,vars:12,consts:[[1,"slds-form-element",3,"ngClass"],[1,"slds-form-element__control"],[1,"slds-combobox_container"],["role","combobox",1,"slds-combobox","slds-dropdown-trigger","slds-dropdown-trigger_click","slds-combobox-picklist","slds-timepicker",3,"ngClass"],["role","none",1,"slds-combobox__form-element","slds-input-has-icon","slds-input-has-icon_right"],["aria-controls","listbox-unique-id","autocomplete","off","role","textbox","type","text",1,"slds-input","slds-combobox__input",3,"ngModelOptions","ngModel","ngModelChange","keyup.arrowup","keyup.arrowdown"],[1,"slds-input__icon-group","slds-input__icon-group_right","slds-height_full","slds-grid",2,"top","0","margin","0","height","100%"],["class","slds-input__icon slds-input__icon_right slds-button slds-button_icon","style","position: relative;",3,"click",4,"ngIf"],[1,"slds-input__icon","slds-input__icon_right","slds-button","slds-button_icon",2,"position","relative",3,"click"],["icon","clock"],["role","listbox",3,"mouseleave"],["role","presentation",1,"slds-listbox","slds-listbox_vertical","slds-dropdown","slds-dropdown--fluid","slds-dropdown--length-7"],["role","presentation","class","slds-listbox__item",3,"click",4,"ngFor","ngForOf"],["class","slds-form-element__help",4,"ngIf"],["icon","clear"],["role","presentation",1,"slds-listbox__item",3,"click"],["role","option",1,"slds-media","slds-listbox__option","slds-listbox__option_plain","slds-media_small","slds-media_center",3,"ngClass"],[1,"slds-media__figure"],["addclasses","slds-icon slds-listbox__icon-selected","icon","check","sprite","utility","size","x-small"],[1,"slds-media__body"],[1,"slds-truncate",3,"title"],[1,"slds-form-element__help"],["label","LBL_INPUT_INVALID"]],template:function(e,t){1&e&&(i.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"input",5),i.mxI("ngModelChange",(function(e){return i.DH7(t.display,e)||(t.display=e),e})),i.bIt("keyup.arrowup",(function(){return t.setDisplayToNextDropDownValue()}))("keyup.arrowdown",(function(){return t.setDisplayToPreviousDropDownValue()})),i.k0s(),i.j41(6,"div",6),i.DNE(7,u,2,0,"button",7),i.j41(8,"button",8),i.bIt("click",(function(){return t.toggleDropDown()})),i.nrm(9,"system-button-icon",9),i.k0s()()(),i.j41(10,"div",10),i.bIt("mouseleave",(function(){return t.closeDropDown()})),i.j41(11,"ul",11),i.DNE(12,h,7,5,"li",12),i.k0s()()()()(),i.DNE(13,g,2,0,"div",13),i.k0s()),2&e&&(i.Y8G("ngClass",i.eq3(7,p,!t.isValid)),i.R7$(3),i.Y8G("ngClass",i.eq3(9,f,t.isOpen)),i.R7$(2),i.Y8G("ngModelOptions",i.lJ4(11,b)),i.R50("ngModel",t.display),i.R7$(2),i.Y8G("ngIf",t.canclear),i.R7$(5),i.Y8G("ngForOf",t.dropdownValues),i.R7$(),i.Y8G("ngIf",!t.isValid&&!t.hideErrorMessage))},dependencies:[a.YU,a.Sq,a.bT,n.me,n.BC,n.vS,r.t,d.J,c.W],encapsulation:2})}return SystemInputTime})()},17427:(e,t,s)=>{"use strict";s.d(t,{p:()=>r});var i=s(54438),n=s(84341),l=s(60177);function o(e,t){1&e&&i.nrm(0,"option",5),2&e&&i.Y8G("value",null)}function a(e,t){if(1&e&&(i.j41(0,"option",5),i.EFF(1),i.k0s()),2&e){const e=t.$implicit,s=t.index,n=i.XpG();i.Y8G("value",e),i.R7$(),i.Lme("",e," (GMT",n.offsetTimezones[s],")")}}let r=(()=>{class SystemInputTimezone{constructor(){this.disabled=!1,this.id="",this.propagateChange=e=>{},this.propagateTouch=e=>{},this.timezones=[],this.offsetTimezones=[],this.denyEmpty=!1,this.timezones=moment.tz.names(),this.timezones=this.timezones.filter((e=>e.match(/^((Africa|America|Antarctica|Arctic|Asia|Atlantic|Australia|Europe|Pacific)\/.+|UTC)$/))),this.timezones.forEach((e=>this.offsetTimezones.push(moment.tz(e).format("Z"))))}get timezone(){return this._timezone}set timezone(e){this._timezone=e,this.propagateChange(e)}registerOnChange(e){this.propagateChange=e}registerOnTouched(e){this.propagateTouch=e}writeValue(e){this._timezone=e}static#e=this.ɵfac=function(e){return new(e||SystemInputTimezone)};static#t=this.ɵcmp=i.VBU({type:SystemInputTimezone,selectors:[["system-input-timezone"]],inputs:{disabled:"disabled",id:"id",denyEmpty:"denyEmpty"},features:[i.Jv_([{provide:n.kq,useExisting:(0,i.Rfq)((()=>SystemInputTimezone)),multi:!0}])],decls:5,vars:5,consts:[[1,"slds-form-element__control"],[1,"slds-select_container"],[1,"slds-select",3,"disabled","ngModel","id","ngModelChange"],[3,"value",4,"ngIf"],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(e,t){1&e&&(i.j41(0,"div",0)(1,"div",1)(2,"select",2),i.mxI("ngModelChange",(function(e){return i.DH7(t.timezone,e)||(t.timezone=e),e})),i.DNE(3,o,1,1,"option",3)(4,a,2,3,"option",4),i.k0s()()()),2&e&&(i.R7$(2),i.FS9("id",t.id),i.Y8G("disabled",t.disabled),i.R50("ngModel",t.timezone),i.R7$(),i.Y8G("ngIf",!t.denyEmpty),i.R7$(),i.Y8G("ngForOf",t.timezones))},dependencies:[l.Sq,l.bT,n.xH,n.y7,n.wz,n.BC,n.vS],encapsulation:2})}return SystemInputTimezone})()},32062:(e,t,s)=>{"use strict";s.d(t,{W:()=>f});var i=s(18359),n=s(54438),l=s(69904),o=s(50531),a=s(4921),r=s(345),d=s(60177);function c(e,t){if(1&e&&n.nrm(0,"span",4),2&e){const e=n.XpG(2);n.Y8G("innerHTML",e.sanitizer.bypassSecurityTrustHtml(e.getLabel()),n.npT)}}function u(e,t){if(1&e&&n.EFF(0),2&e){const e=n.XpG(2);n.JRh(e.getLabel())}}function m(e,t){if(1&e&&(n.qex(0),n.DNE(1,c,1,1,"span",2)(2,u,1,1,"ng-template",null,3,n.C5r),n.bVm()),2&e){const e=n.sdS(3),t=n.XpG();n.R7$(),n.Y8G("ngIf","long"===t.length)("ngIfElse",e)}}function h(e,t){if(1&e&&n.nrm(0,"span",4),2&e){const e=n.XpG(2);n.Y8G("innerHTML",e.sanitizer.bypassSecurityTrustHtml(e.getLabel()),n.npT)}}function g(e,t){if(1&e&&n.EFF(0),2&e){const e=n.XpG(2);n.JRh(e.getLabel())}}function p(e,t){if(1&e){const e=n.RV6();n.j41(0,"span",5),n.bIt("dblclick",(function(t){n.eBV(e);const s=n.XpG();return n.Njj(s.onDblClick(t))}))("contextmenu",(function(t){n.eBV(e);const s=n.XpG();return n.Njj(s.onRightClick(t))})),n.DNE(1,h,1,1,"span",2)(2,g,1,1,"ng-template",null,6,n.C5r),n.k0s()}if(2&e){const e=n.sdS(3),t=n.XpG();n.R7$(),n.Y8G("ngIf","long"===t.length)("ngIfElse",e)}}let f=(()=>{class SystemLabel{constructor(e,t,s,n,l,o){this.language=e,this.modal=t,this.footer=s,this.renderer=n,this.cdRef=l,this.sanitizer=o,this.length="default",this.subsciptions=new i.yU,this.subsciptions.add(this.language.currentlanguage$.subscribe((()=>this.detectChanges())))}ngAfterViewInit(){this.cdRef.detach()}ngOnDestroy(){this.cdRef.reattach(),this.subsciptions.unsubscribe()}ngOnChanges(e){this.detectChanges()}openModal(){this.modal.openModal("SystemLabelEditorModal",!0).subscribe((e=>{e.instance.labelData={name:this.label,global_translations:[],custom_translations:[]}}))}detectChanges(){this.cdRef.detectChanges()}onDblClick(e){this.openModal(),e.preventDefault()}onRightClick(e){e.preventDefault();const t=this.createDropdown(e);this.renderer.appendChild(this.footer.footercontainer.element.nativeElement,t);const s=this.renderer.listen("document","click",(e=>{this.closeDropdown(e,t),s()}))}closeDropdown(e,t){this.footer.footercontainer.element.nativeElement.contains(t)&&this.renderer.removeChild(this.footer.footercontainer.element.nativeElement,t)}createDropdown(e){const t=this.renderer.createElement("div"),s=(e,t)=>t.forEach((t=>this.renderer.addClass(e,t)));this.renderer.setStyle(t,"top",e.pageY+"px"),this.renderer.setStyle(t,"left",e.pageX+"px"),s(t,["slds-dropdown--inverse","slds-dropdown","slds-theme--inverse"]);const i=this.renderer.createElement("ul");this.renderer.addClass(i,"slds-dropdown__list");const n=this.renderer.createElement("li");return s(n,["slds-slds-dropdown__item","slds-p-around--xx-small"]),this.renderer.setProperty(n,"onclick",(()=>this.openModal())),this.renderer.setProperty(n,"innerHTML",`<a>${this.language.getLabel("LBL_EDIT_LABEL")}</a>`),this.renderer.appendChild(i,n),this.renderer.appendChild(t,i),t}getLabel(){return this.nestedValues?this.language.getLabelFormatted(this.label,this.nestedValues,this.length):this.language.getLabel(this.label,void 0,this.length)}static#e=this.ɵfac=function(e){return new(e||SystemLabel)(n.rXU(l.B),n.rXU(o.y),n.rXU(a.q),n.rXU(n.sFG),n.rXU(n.gRc),n.rXU(r.up))};static#t=this.ɵcmp=n.VBU({type:SystemLabel,selectors:[["system-label"]],inputs:{label:"label",length:"length",nestedValues:"nestedValues"},features:[n.OA$],decls:3,vars:2,consts:[[4,"ngIf","ngIfElse"],["labelListenerContainer",""],[3,"innerHTML",4,"ngIf","ngIfElse"],["notLong",""],[3,"innerHTML"],[3,"dblclick","contextmenu"],["notLong2",""]],template:function(e,t){if(1&e&&n.DNE(0,m,4,2,"ng-container",0)(1,p,4,2,"ng-template",null,1,n.C5r),2&e){const e=n.sdS(2);n.Y8G("ngIf",!t.language.inlineEditEnabled)("ngIfElse",e)}},dependencies:[d.bT],encapsulation:2,changeDetection:0})}return SystemLabel})()},45915:(e,t,s)=>{"use strict";s.d(t,{P:()=>m});var i=s(18359),n=s(54438),l=s(69904),o=s(50531),a=s(83935),r=s(4921),d=s(60177);function c(e,t){if(1&e&&(n.qex(0),n.EFF(1),n.bVm()),2&e){const e=n.XpG();n.R7$(),n.JRh(e.language.getFieldDisplayName(e.module,e.field,e.fieldconfig,e.length))}}function u(e,t){if(1&e){const e=n.RV6();n.j41(0,"span",2),n.bIt("dblclick",(function(t){n.eBV(e);const s=n.XpG();return n.Njj(s.onDblClick(t))}))("contextmenu",(function(t){n.eBV(e);const s=n.XpG();return n.Njj(s.onRightClick(t))})),n.EFF(1),n.k0s()}if(2&e){const e=n.XpG();n.R7$(),n.SpI(" ",e.language.getFieldDisplayName(e.module,e.field,e.fieldconfig,e.length)," ")}}let m=(()=>{class SystemLabelFieldname{constructor(e,t,s,n,l,o){this.language=e,this.modal=t,this.metadata=s,this.renderer=n,this.footer=l,this.cdRef=o,this.fieldconfig={},this.length="default",this.subsciptions=new i.yU,this.subsciptions.add(this.language.currentlanguage$.subscribe((()=>this.detectChanges())))}ngAfterViewInit(){this.cdRef.detach()}ngOnDestroy(){this.subsciptions.unsubscribe()}ngOnChanges(e){this.detectChanges()}openModal(){this.modal.openModal("SystemLabelEditorModal",!0).subscribe((e=>{const t=this.fieldconfig.label||this.metadata.getFieldlabel(this.module,this.field);e.instance.labelData={name:t,global_translations:[],custom_translations:[]}}))}onDblClick(e){this.openModal(),e.preventDefault()}detectChanges(){this.cdRef.detectChanges()}onRightClick(e){const t=this.createDropdown(e);this.renderer.appendChild(this.footer.footercontainer.element.nativeElement,t);const s=this.renderer.listen("document","click",(e=>{this.closeDropdown(e,t),s()}));e.preventDefault()}closeDropdown(e,t){this.footer.footercontainer.element.nativeElement.contains(t)&&this.renderer.removeChild(this.footer.footercontainer.element.nativeElement,t)}createDropdown(e){const t=this.renderer.createElement("div"),s=(e,t)=>t.forEach((t=>this.renderer.addClass(e,t)));this.renderer.setStyle(t,"top",e.pageY+"px"),this.renderer.setStyle(t,"left",e.pageX+"px"),s(t,["slds-dropdown--inverse","slds-dropdown","slds-theme--inverse"]);const i=this.renderer.createElement("ul");this.renderer.addClass(i,"slds-dropdown__list");const n=this.renderer.createElement("li");return s(n,["slds-slds-dropdown__item","slds-p-around--xx-small"]),this.renderer.setProperty(n,"onclick",(()=>this.openModal())),this.renderer.setProperty(n,"innerHTML",`<a>${this.language.getLabel("LBL_EDIT_LABEL")}</a>`),this.renderer.appendChild(i,n),this.renderer.appendChild(t,i),t}static#e=this.ɵfac=function(e){return new(e||SystemLabelFieldname)(n.rXU(l.B),n.rXU(o.y),n.rXU(a.yu),n.rXU(n.sFG),n.rXU(r.q),n.rXU(n.gRc))};static#t=this.ɵcmp=n.VBU({type:SystemLabelFieldname,selectors:[["system-label-fieldname"]],inputs:{module:"module",field:"field",fieldconfig:"fieldconfig",length:"length"},features:[n.OA$],decls:3,vars:2,consts:[[4,"ngIf","ngIfElse"],["labelListenerContainer",""],[3,"dblclick","contextmenu"]],template:function(e,t){if(1&e&&n.DNE(0,c,2,1,"ng-container",0)(1,u,2,1,"ng-template",null,1,n.C5r),2&e){const e=n.sdS(2);n.Y8G("ngIf",!t.language.inlineEditEnabled)("ngIfElse",e)}},dependencies:[d.bT],encapsulation:2,changeDetection:0})}return SystemLabelFieldname})()},44985:(e,t,s)=>{"use strict";s.d(t,{r:()=>m});var i=s(18359),n=s(54438),l=s(69904),o=s(50531),a=s(4921),r=s(83935),d=s(60177);function c(e,t){if(1&e&&(n.qex(0),n.EFF(1),n.bVm()),2&e){const e=n.XpG();n.R7$(),n.JRh(e.language.getModuleName(e.module,e.singular,e.length))}}function u(e,t){if(1&e){const e=n.RV6();n.j41(0,"span",2),n.bIt("dblclick",(function(t){n.eBV(e);const s=n.XpG();return n.Njj(s.onDblClick(t))}))("contextmenu",(function(t){n.eBV(e);const s=n.XpG();return n.Njj(s.onRightClick(t))})),n.EFF(1),n.k0s()}if(2&e){const e=n.XpG();n.R7$(),n.SpI(" ",e.language.getModuleName(e.module,e.singular,e.length)," ")}}let m=(()=>{class SystemLabelModulename{constructor(e,t,s,n,l,o){this.language=e,this.modal=t,this.footer=s,this.metadata=n,this.renderer=l,this.cdRef=o,this.singular=!1,this.length="default",this.subsciptions=new i.yU,this.subsciptions.add(this.language.currentlanguage$.subscribe((()=>this.detectChanges())))}ngAfterViewInit(){this.cdRef.detach()}ngOnDestroy(){this.subsciptions.unsubscribe()}ngOnChanges(e){this.detectChanges()}onDblClick(e){this.openModal(),e.preventDefault()}openModal(){let e=this.metadata.getModuleDefs(this.module);const t=this.singular?e.singular_label:e.module_label;this.modal.openModal("SystemLabelEditorModal",!0).subscribe((e=>{e.instance.labelData={name:t,global_translations:[],custom_translations:[]}}))}detectChanges(){this.cdRef.detectChanges()}onRightClick(e){const t=this.createDropdown(e);this.renderer.appendChild(this.footer.footercontainer.element.nativeElement,t);const s=this.renderer.listen("document","click",(e=>{this.closeDropdown(e,t),s()}));e.preventDefault()}closeDropdown(e,t){this.footer.footercontainer.element.nativeElement.contains(t)&&this.renderer.removeChild(this.footer.footercontainer.element.nativeElement,t)}createDropdown(e){const t=this.renderer.createElement("div"),s=(e,t)=>t.forEach((t=>this.renderer.addClass(e,t)));this.renderer.setStyle(t,"top",e.pageY+"px"),this.renderer.setStyle(t,"left",e.pageX+"px"),s(t,["slds-dropdown--inverse","slds-dropdown","slds-theme--inverse"]);const i=this.renderer.createElement("ul");this.renderer.addClass(i,"slds-dropdown__list");const n=this.renderer.createElement("li");return s(n,["slds-slds-dropdown__item","slds-p-around--xx-small"]),this.renderer.setProperty(n,"onclick",(()=>this.openModal())),this.renderer.setProperty(n,"innerHTML",`<a>${this.language.getLabel("LBL_EDIT_LABEL")}</a>`),this.renderer.appendChild(i,n),this.renderer.appendChild(t,i),t}static#e=this.ɵfac=function(e){return new(e||SystemLabelModulename)(n.rXU(l.B),n.rXU(o.y),n.rXU(a.q),n.rXU(r.yu),n.rXU(n.sFG),n.rXU(n.gRc))};static#t=this.ɵcmp=n.VBU({type:SystemLabelModulename,selectors:[["system-label-modulename"]],inputs:{module:"module",singular:"singular",length:"length"},features:[n.OA$],decls:3,vars:2,consts:[[4,"ngIf","ngIfElse"],["labelListenerContainer",""],[3,"dblclick","contextmenu"]],template:function(e,t){if(1&e&&n.DNE(0,c,2,1,"ng-container",0)(1,u,2,1,"ng-template",null,1,n.C5r),2&e){const e=n.sdS(2);n.Y8G("ngIf",!t.language.inlineEditEnabled)("ngIfElse",e)}},dependencies:[d.bT],encapsulation:2,changeDetection:0})}return SystemLabelModulename})()},90609:(e,t,s)=>{"use strict";s.d(t,{r:()=>h});var i=s(54438),n=s(69904),l=s(50531),o=s(48849),a=s(60177),r=s(84341),d=s(32062);function c(e,t){if(1&e&&(i.j41(0,"label",8),i.nrm(1,"system-label",9),i.k0s()),2&e){const e=i.XpG(2);i.Mz_("for","",e.compId,"-select-lang")}}function u(e,t){if(1&e&&(i.j41(0,"option",10),i.EFF(1),i.k0s()),2&e){const e=t.$implicit;i.Y8G("value",e.language),i.R7$(),i.SpI(" ",e.text," ")}}function m(e,t){if(1&e){const e=i.RV6();i.j41(0,"div",1),i.DNE(1,c,2,1,"label",2),i.j41(2,"div",3)(3,"div",4)(4,"div",5)(5,"select",6),i.mxI("ngModelChange",(function(t){i.eBV(e);const s=i.XpG();return i.DH7(s.currentlanguage,t)||(s.currentlanguage=t),i.Njj(t)})),i.DNE(6,u,2,2,"option",7),i.k0s()()()()()}if(2&e){const e=i.XpG();i.R7$(),i.Y8G("ngIf",e.displaylabel),i.R7$(4),i.Mz_("id","",e.compId,"-select-lang"),i.Y8G("disabled",e.availableLanguages.length<=1),i.R50("ngModel",e.currentlanguage),i.R7$(),i.Y8G("ngForOf",e.availableLanguages)}}let h=(()=>{class SystemLanguageSelector{constructor(e,t,s){this.language=e,this.modal=t,this.userpreferences=s,this.availableLanguages=[],this.selected=new i.bkB,this.displaylabel=!0,this.compId=_.uniqueId()}ngOnInit(){this.getAvialableLanguages()}getAvialableLanguages(){this.availableLanguages=this.language.getAvialableLanguages(!0)}get currentlanguage(){return this.language.currentlanguage}set currentlanguage(e){let t=this.modal.await("LBL_LOADING");this.language.switchLanguage(e).subscribe({next:()=>{t.emit(!0),this.userpreferences.setPreference("language",e)}}),this.selected.emit(!0)}reloadCurrentLanguage(){let e=this.modal.await("LBL_LOADING");this.language.loadLanguage().subscribe({next:()=>{e.emit(!0)}})}static#e=this.ɵfac=function(e){return new(e||SystemLanguageSelector)(i.rXU(n.B),i.rXU(l.y),i.rXU(o.S))};static#t=this.ɵcmp=i.VBU({type:SystemLanguageSelector,selectors:[["system-language-selector"]],inputs:{displaylabel:"displaylabel"},outputs:{selected:"selected"},decls:1,vars:1,consts:[["class","slds-form-element slds-p-bottom--x-small",4,"ngIf"],[1,"slds-form-element","slds-p-bottom--x-small"],["class","slds-form-element__label",3,"for",4,"ngIf"],[1,"slds-grid","slds-grid--vertical-align-center"],[1,"slds-form-element__control","slds-grow"],[1,"slds-select_container"],[1,"slds-select",3,"disabled","ngModel","id","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[1,"slds-form-element__label",3,"for"],["label","LBL_SELECT_LANGUAGE"],[3,"value"]],template:function(e,t){1&e&&i.DNE(0,m,7,5,"div",0),2&e&&i.Y8G("ngIf",t.availableLanguages.length>1)},dependencies:[a.Sq,a.bT,r.xH,r.y7,r.wz,r.BC,r.vS,d.W],encapsulation:2})}return SystemLanguageSelector})()},97466:(e,t,s)=>{"use strict";s.d(t,{k:()=>l});var i=s(54438);const n=["*"];let l=(()=>{class SystemLink{constructor(){this.click=new i.bkB}clicked(e){this.click.emit(e)}static#e=this.ɵfac=function(e){return new(e||SystemLink)};static#t=this.ɵcmp=i.VBU({type:SystemLink,selectors:[["system-link"]],outputs:{click:"click"},ngContentSelectors:n,decls:2,vars:0,consts:[[1,"slds-text-link_reset",3,"click"]],template:function(e,t){1&e&&(i.NAR(),i.j41(0,"span",0),i.bIt("click",(function(e){return t.clicked(e)})),i.SdG(1),i.k0s())},encapsulation:2})}return SystemLink})()},71614:(e,t,s)=>{"use strict";s.d(t,{S:()=>l});var i=s(54438),n=s(20673);let l=(()=>{class SystemLoaderProgress{constructor(e){this.loader=e}get progress(){return this.loader.progress>100?100:this.loader.progress}static#e=this.ɵfac=function(e){return new(e||SystemLoaderProgress)(i.rXU(n.w))};static#t=this.ɵcmp=i.VBU({type:SystemLoaderProgress,selectors:[["system-loader-progress"]],decls:6,vars:3,consts:[[1,"slds-align--absolute-center"],[1,"slds-size--2-of-3"],[1,"slds-progress-bar","slds-progress-bar_circular","slds-progress-bar_medium"],[1,"slds-progress-bar__value",2,"background-color","#aaa"],[1,"slds-text-align--center","slds-p-vertical--small"]],template:function(e,t){1&e&&(i.j41(0,"div",0)(1,"div",1)(2,"div",2),i.nrm(3,"span",3),i.k0s(),i.j41(4,"div",4),i.EFF(5),i.k0s()()()),2&e&&(i.R7$(3),i.xc7("width",t.progress+"%"),i.R7$(2),i.SpI("... loading ",t.loader.activeLoader," ... "))},encapsulation:2})}return SystemLoaderProgress})()},79355:(e,t,s)=>{"use strict";s.d(t,{n:()=>l});var i=s(54438),n=s(69904);let l=(()=>{class SystemLoadingModal{constructor(e){this.language=e,this.messagelabel="LBL_LOADING"}static#e=this.ɵfac=function(e){return new(e||SystemLoadingModal)(i.rXU(n.B))};static#t=this.ɵcmp=i.VBU({type:SystemLoadingModal,selectors:[["ng-component"]],decls:9,vars:1,consts:[["role","dialog","tabindex","-1",1,"slds-modal","slds-fade-in-open"],[1,"slds-modal__container"],[1,"slds-modal__header","slds-modal__header_empty"],[1,"slds-modal__content","slds-p-around_medium"],[1,"slds-align--absolute-center"],[1,"slds-grid","slds-grid--vertical-align-center"],["size","16"],[1,"slds-p-left--small"],[3,"label"]],template:function(e,t){1&e&&(i.j41(0,"section",0)(1,"div",1),i.nrm(2,"div",2),i.j41(3,"div",3)(4,"div",4)(5,"div",5),i.nrm(6,"system-spinner",6),i.j41(7,"div",7),i.nrm(8,"system-label",8),i.k0s()()()()()()),2&e&&(i.R7$(8),i.Y8G("label",t.messagelabel))},encapsulation:2})}return SystemLoadingModal})()},40713:(e,t,s)=>{"use strict";s.d(t,{D:()=>c});var i=s(49969),n=s(54438),l=s(83935),o=s(71692),a=s(60177);const r=[[["system-modal-header"]],[["system-modal-header-empty"]],[["system-modal-content"]],[["system-modal-footer"]]],d=["system-modal-header","system-modal-header-empty","system-modal-content","system-modal-footer"];let c=(()=>{class SystemModal{constructor(e,t){this.metadata=e,this.layout=t,this.size="medium",this.class=""}get sizeClass(){return this.size&&"small"!=this.size?this.class+" slds-modal_"+this.size:this.class}get containerStyle(){return"small"==this.layout.screenwidth?{padding:"0px",margin:"0px","border-radius":"0px"}:{}}static#e=this.ɵfac=function(e){return new(e||SystemModal)(n.rXU(l.yu),n.rXU(o.Z))};static#t=this.ɵcmp=n.VBU({type:SystemModal,selectors:[["system-modal"]],inputs:{size:"size",class:"class"},ngContentSelectors:d,decls:6,vars:3,consts:[["role","dialog",1,"slds-modal","slds-fade-in-open",3,"ngClass"],[1,"slds-modal__container",3,"ngStyle"]],template:function(e,t){1&e&&(n.NAR(r),n.j41(0,"section",0)(1,"div",1),n.SdG(2),n.SdG(3,1),n.SdG(4,2),n.SdG(5,3),n.k0s()()),2&e&&(n.Y8G("ngClass",t.sizeClass),n.R7$(),n.Y8G("@modalanimation",void 0)("ngStyle",t.containerStyle))},dependencies:[a.YU,a.B3],encapsulation:2,data:{animation:[(0,i.hZ)("modalanimation",[(0,i.kY)(":enter",[(0,i.iF)({opacity:0}),(0,i.i0)(".3s",(0,i.iF)({opacity:1}))]),(0,i.kY)(":leave",[(0,i.i0)(".3s",(0,i.iF)({opacity:0}))])])]}})}return SystemModal})()},25028:(e,t,s)=>{"use strict";s.d(t,{I:()=>o});var i=s(54438),n=s(60177);const l=["*"];let o=(()=>{class SystemModalContent{constructor(){this.margin="medium",this.grow=!1,this.scrollable=!0,this.overflowVisible=!1}set inputGrow(e){this.grow=!1!==e}set inputOverflowVisible(e){this.overflowVisible=!1!==e}get modalStyle(){return this.overflowVisible?{overflow:"visible"}:{}}get contentclass(){return"slds-modal__content"+(this.grow?" slds-grow":"")+(this.scrollable?"":" slds-scrollable--none")}static#e=this.ɵfac=function(e){return new(e||SystemModalContent)};static#t=this.ɵcmp=i.VBU({type:SystemModalContent,selectors:[["system-modal-content"]],hostVars:2,hostBindings:function(e,t){2&e&&i.HbH(t.contentclass)},inputs:{margin:"margin",grow:"grow",scrollable:"scrollable",overflowVisible:"overflowVisible",inputGrow:[i.Mj6.None,"system-modal-content-grow","inputGrow"],inputOverflowVisible:[i.Mj6.None,"system-modal-overvlow-visible","inputOverflowVisible"]},ngContentSelectors:l,decls:2,vars:3,consts:[[1,"slds-height_full",3,"ngClass"]],template:function(e,t){1&e&&(i.NAR(),i.j41(0,"div",0),i.SdG(1),i.k0s()),2&e&&(i.AVh("slds-scrollable--y",t.scrollable),i.Y8G("ngClass","slds-p-around--"+t.margin))},dependencies:[n.YU],styles:["\n\n\n\n\n\n\n\n\n\n\n[_nghost-%COMP%]{position:relative}"]})}return SystemModalContent})()},88418:(e,t,s)=>{"use strict";s.d(t,{Q:()=>l});var i=s(54438);const n=["*"];let l=(()=>{class SystemModalFooter{static#e=this.ɵfac=function(e){return new(e||SystemModalFooter)};static#t=this.ɵcmp=i.VBU({type:SystemModalFooter,selectors:[["system-modal-footer"]],ngContentSelectors:n,decls:2,vars:0,consts:[[1,"slds-modal__footer"]],template:function(e,t){1&e&&(i.NAR(),i.j41(0,"footer",0),i.SdG(1),i.k0s())},encapsulation:2})}return SystemModalFooter})()},83524:(e,t,s)=>{"use strict";s.d(t,{C:()=>p});var i=s(54438),n=s(69904),l=s(71692),o=s(60177),a=s(25863),r=s(68823),d=s(32062);function c(e,t){if(1&e){const e=i.RV6();i.j41(0,"button",7),i.bIt("click",(function(){i.eBV(e);const t=i.XpG();return i.Njj(t.close.emit(!0))})),i.nrm(1,"system-button-icon",8),i.j41(2,"span",9),i.nrm(3,"system-label",10),i.k0s()()}}function u(e,t){if(1&e){const e=i.RV6();i.j41(0,"button",11),i.bIt("click",(function(){i.eBV(e);const t=i.XpG();return i.Njj(t.close.emit(!0))})),i.nrm(1,"system-button-icon",12),i.j41(2,"span",9),i.nrm(3,"system-label",10),i.k0s()()}}function m(e,t){if(1&e&&(i.j41(0,"div",13),i.nrm(1,"system-icon",14),i.k0s()),2&e){const e=i.XpG();i.R7$(),i.Y8G("module",e.module)}}const h=["*",[["system-modal-header-right"]],[["system-modal-header-tagline"]]],g=["*","system-modal-header-right","system-modal-header-tagline"];let p=(()=>{class SystemModalHeader{set hideClose(e){this.hiddenCloseButton=!1!==e}constructor(e,t){this.language=e,this.layout=t,this.module="",this.hiddenCloseButton=!1,this.close=new i.bkB}get isSmall(){return"small"==this.layout.screenwidth}get headerStyle(){return"small"==this.layout.screenwidth?{"border-radius":"0px"}:{}}static#e=this.ɵfac=function(e){return new(e||SystemModalHeader)(i.rXU(n.B),i.rXU(l.Z))};static#t=this.ɵcmp=i.VBU({type:SystemModalHeader,selectors:[["system-modal-header"]],inputs:{module:"module",hiddenCloseButton:"hiddenCloseButton",hideClose:[i.Mj6.None,"system-modal-header-noclose","hideClose"]},outputs:{close:"close"},ngContentSelectors:g,decls:11,vars:4,consts:[[1,"slds-modal__header","slds-theme--shade",3,"ngStyle"],["class","slds-button slds-button_icon slds-modal__close slds-button--icon-inverse","style","color:white;",3,"click",4,"ngIf"],["class","slds-button slds-button_icon slds-is-absolute","style","top: 3px; right: 3px;",3,"click",4,"ngIf"],[1,"slds-grid","slds-grid--align-spread","slds-grid_vertical-align-center"],[1,"slds-media__figure","slds-m-right_x-small"],["class","slds-icon_container",4,"ngIf"],[1,"slds-text-heading_medium","slds-hyphenate"],[1,"slds-button","slds-button_icon","slds-modal__close","slds-button--icon-inverse",2,"color","white",3,"click"],["icon","close","size","large"],[1,"slds-assistive-text"],["label","LBL_CLOSE"],[1,"slds-button","slds-button_icon","slds-is-absolute",2,"top","3px","right","3px",3,"click"],["icon","close"],[1,"slds-icon_container"],["size","small",3,"module"]],template:function(e,t){1&e&&(i.NAR(h),i.j41(0,"header",0),i.DNE(1,c,4,0,"button",1)(2,u,4,0,"button",2),i.j41(3,"div",3)(4,"div",4),i.DNE(5,m,2,1,"div",5),i.k0s(),i.j41(6,"span",6),i.SdG(7),i.k0s(),i.j41(8,"div"),i.SdG(9,1),i.k0s()(),i.SdG(10,2),i.k0s()),2&e&&(i.Y8G("ngStyle",t.headerStyle),i.R7$(),i.Y8G("ngIf",!t.hiddenCloseButton&&!t.isSmall),i.R7$(),i.Y8G("ngIf",!t.hiddenCloseButton&&t.isSmall),i.R7$(3),i.Y8G("ngIf",t.module))},dependencies:[o.bT,o.B3,a.t,r.J,d.W],encapsulation:2})}return SystemModalHeader})()},10063:(e,t,s)=>{"use strict";s.d(t,{b:()=>m});var i=s(54438),n=s(69904),l=s(71692),o=s(60177),a=s(25863),r=s(32062);function d(e,t){if(1&e){const e=i.RV6();i.j41(0,"button",4),i.bIt("click",(function(){i.eBV(e);const t=i.XpG(2);return i.Njj(t.close.emit(!0))})),i.nrm(1,"system-button-icon",5),i.j41(2,"span",6),i.nrm(3,"system-label",7),i.k0s()()}}function c(e,t){if(1&e){const e=i.RV6();i.j41(0,"button",8),i.bIt("click",(function(){i.eBV(e);const t=i.XpG(2);return i.Njj(t.close.emit(!0))})),i.nrm(1,"system-button-icon",9),i.j41(2,"span",6),i.nrm(3,"system-label",7),i.k0s()()}}function u(e,t){if(1&e&&(i.qex(0),i.DNE(1,d,4,0,"button",2)(2,c,4,0,"button",3),i.bVm()),2&e){const e=i.XpG();i.R7$(),i.Y8G("ngIf",!e.isSmall),i.R7$(),i.Y8G("ngIf",e.isSmall)}}let m=(()=>{class SystemModalHeaderEmpty{set hideClose(e){this.hiddenCloseButton=!1!==e}constructor(e,t){this.language=e,this.layout=t,this.emptyheader=!0,this.close=new i.bkB,this.hiddenCloseButton=!1}get isSmall(){return"small"==this.layout.screenwidth}static#e=this.ɵfac=function(e){return new(e||SystemModalHeaderEmpty)(i.rXU(n.B),i.rXU(l.Z))};static#t=this.ɵcmp=i.VBU({type:SystemModalHeaderEmpty,selectors:[["system-modal-header-empty"]],hostVars:2,hostBindings:function(e,t){2&e&&i.AVh("slds-modal__header_empty",t.emptyheader)},inputs:{hiddenCloseButton:"hiddenCloseButton",hideClose:[i.Mj6.None,"system-modal-header-noclose","hideClose"]},outputs:{close:"close"},decls:2,vars:1,consts:[[1,"slds-modal__header","slds-modal__header--empty"],[4,"ngIf"],["class","slds-button slds-button_icon slds-modal__close slds-button--icon-inverse","style","color:white;",3,"click",4,"ngIf"],["class","slds-button slds-button_icon slds-is-absolute","style","top: 3px; right: 3px;",3,"click",4,"ngIf"],[1,"slds-button","slds-button_icon","slds-modal__close","slds-button--icon-inverse",2,"color","white",3,"click"],["icon","close","size","large"],[1,"slds-assistive-text"],["label","LBL_CLOSE"],[1,"slds-button","slds-button_icon","slds-is-absolute",2,"top","3px","right","3px",3,"click"],["icon","close"]],template:function(e,t){1&e&&(i.j41(0,"header",0),i.DNE(1,u,3,2,"ng-container",1),i.k0s()),2&e&&(i.R7$(),i.Y8G("ngIf",!t.hiddenCloseButton))},dependencies:[o.bT,a.t,r.W],encapsulation:2})}return SystemModalHeaderEmpty})()},88980:(e,t,s)=>{"use strict";s.d(t,{s:()=>l});var i=s(54438);const n=["*"];let l=(()=>{class SystemModalHeaderRight{static#e=this.ɵfac=function(e){return new(e||SystemModalHeaderRight)};static#t=this.ɵcmp=i.VBU({type:SystemModalHeaderRight,selectors:[["system-modal-header-right"]],ngContentSelectors:n,decls:1,vars:0,template:function(e,t){1&e&&(i.NAR(),i.SdG(0))},encapsulation:2})}return SystemModalHeaderRight})()},17368:(e,t,s)=>{"use strict";s.d(t,{I:()=>l});var i=s(54438);const n=["*"];let l=(()=>{class SystemModalHeaderTagline{static#e=this.ɵfac=function(e){return new(e||SystemModalHeaderTagline)};static#t=this.ɵcmp=i.VBU({type:SystemModalHeaderTagline,selectors:[["system-modal-header-tagline"]],ngContentSelectors:n,decls:2,vars:0,consts:[[1,"slds-m-top_x-small"]],template:function(e,t){1&e&&(i.NAR(),i.j41(0,"p",0),i.SdG(1),i.k0s())},encapsulation:2})}return SystemModalHeaderTagline})()},23658:(e,t,s)=>{"use strict";s.d(t,{E:()=>o});var i=s(54438),n=s(50531);const l=["target"];let o=(()=>{class SystemModalWrapper{constructor(e,t){this.modalservice=e,this.application=t,this.self=null,this.escKey=!0}closeModal(){this.self.destroy()}ngOnDestroy(){this.modalservice.removeModal(this.self),this.application.tick()}setEscKey(e=!0){this.escKey=e}static#e=this.ɵfac=function(e){return new(e||SystemModalWrapper)(i.rXU(n.y),i.rXU(i.o8S))};static#t=this.ɵcmp=i.VBU({type:SystemModalWrapper,selectors:[["system-modal-wrapper"]],viewQuery:function(e,t){if(1&e&&i.GBs(l,7,i.c1b),2&e){let e;i.mGM(e=i.lsd())&&(t.target=e.first)}},decls:3,vars:2,consts:[[2,"position","fixed"],["target",""]],template:function(e,t){1&e&&(i.j41(0,"div",0),i.nrm(1,"span",null,1),i.k0s()),2&e&&i.xc7("z-index",t.zIndex)},encapsulation:2})}return SystemModalWrapper})()},43262:(e,t,s)=>{"use strict";s.d(t,{I:()=>o});var i=s(54438),n=s(69904);const l=()=>({nodeId:"root"});let o=(()=>{class SystemModuleTree{constructor(e){this.language=e,this.displayAuditFields=!1,this.displayRelationshipFields=!1,this.itemSelected=new i.bkB,this.selectedNodeId="",this.isLoading=!1}ngAfterViewInit(){this.selectedNodeId="root",this.itemSelected.emit({path:"root:"+this.module,module:this.module,nodeId:"root"})}emitSelected(e){this.selectedNodeId=e.nodeId,this.itemSelected.emit(e)}static#e=this.ɵfac=function(e){return new(e||SystemModuleTree)(i.rXU(n.B))};static#t=this.ɵcmp=i.VBU({type:SystemModuleTree,selectors:[["system-module-tree"]],inputs:{displayAuditFields:"displayAuditFields",displayRelationshipFields:"displayRelationshipFields",module:"module"},outputs:{itemSelected:"itemSelected"},decls:3,vars:8,consts:[["role","tree",1,"slds-tree"],[3,"module","name","path","nodedata","selectedNodeId","displayAuditFields","displayRelationshipFields","itemSelected"]],template:function(e,t){1&e&&(i.j41(0,"div")(1,"ul",0)(2,"system-module-tree-item",1),i.bIt("itemSelected",(function(e){return t.emitSelected(e)})),i.k0s()()()),2&e&&(i.R7$(2),i.Y8G("module",t.module)("name",t.language.getModuleName(t.module))("path","root:"+t.module)("nodedata",i.lJ4(7,l))("selectedNodeId",t.selectedNodeId)("displayAuditFields",t.displayAuditFields)("displayRelationshipFields",t.displayRelationshipFields))},encapsulation:2})}return SystemModuleTree})()},95218:(e,t,s)=>{"use strict";s.d(t,{M:()=>x});var i=s(54438),n=s(84341),l=s(69904),o=s(90154),a=s(22465),r=s(60177),d=s(25863),c=s(18521);function u(e,t){if(1&e){const e=i.RV6();i.j41(0,"div",8),i.bIt("click",(function(){i.eBV(e);const t=i.XpG();return i.Njj(t.onclick())})),i.j41(1,"input",9),i.bIt("mouseleave",(function(){i.eBV(e);const t=i.XpG();return i.Njj(t.onMouseLeave())}))("keydown",(function(e){return e.preventDefault()})),i.k0s(),i.nrm(2,"system-utility-icon",10),i.k0s()}if(2&e){const e=i.XpG();i.R7$(),i.Y8G("disabled",e.disabled)("system-placeholder",e.selectedCountText)("ngStyle",e.inputTagStyle),i.R7$(),i.xc7("transform",e.isOpen?"rotate(180deg)":"none")}}function m(e,t){if(1&e){const e=i.RV6();i.qex(0),i.j41(1,"span",16),i.bIt("click",(function(e){return e.stopPropagation()})),i.j41(2,"a",17)(3,"span",18),i.EFF(4),i.k0s()(),i.j41(5,"button",19),i.bIt("click",(function(){const t=i.eBV(e),s=t.index,n=t.$implicit,l=i.XpG(2);return i.Njj(l.removeItem(s,n))})),i.nrm(6,"system-button-icon",20),i.k0s()(),i.bVm()}if(2&e){const e=t.$implicit,s=i.XpG(2);i.R7$(3),i.Y8G("system-title",s.listItems[e]),i.R7$(),i.SpI(" ",s.listItems[e]," ")}}function h(e,t){if(1&e&&(i.j41(0,"div",21),i.EFF(1),i.k0s()),2&e){const e=i.XpG(2);i.R7$(),i.SpI(" ",e.selectedCountText," ")}}function g(e,t){if(1&e){const e=i.RV6();i.j41(0,"div",11),i.bIt("click",(function(){i.eBV(e);const t=i.XpG();return i.Njj(t.onclick())}))("mouseleave",(function(){i.eBV(e);const t=i.XpG();return i.Njj(t.onMouseLeave())})),i.DNE(1,m,7,2,"ng-container",12)(2,h,2,1,"div",13),i.j41(3,"div",14),i.EFF(4," "),i.k0s(),i.j41(5,"system-utility-icon",15),i.bIt("click",(function(){i.eBV(e);const t=i.XpG();return i.Njj(t.onclick())})),i.k0s()()}if(2&e){const e=i.XpG();i.R7$(),i.Y8G("ngForOf",e.valueArray)("ngForTrackBy",e.trackByFn),i.R7$(),i.Y8G("ngIf",0==e.valueArray.length),i.R7$(3),i.xc7("transform",e.isOpen?"rotate(180deg)":"none")}}function p(e,t){1&e&&i.nrm(0,"system-utility-icon",28)}function f(e,t){1&e&&i.nrm(0,"system-utility-icon",34)}function b(e,t){if(1&e){const e=i.RV6();i.j41(0,"li",23),i.bIt("click",(function(){const t=i.eBV(e).$implicit,s=i.XpG().$implicit,n=i.XpG(2);return i.Njj(n.toggleAddRemoveItem(t.value,s.value))})),i.j41(1,"div",29)(2,"span",30),i.DNE(3,f,1,0,"system-utility-icon",31),i.k0s(),i.j41(4,"span",32)(5,"span",33),i.EFF(6),i.k0s()()()()}if(2&e){const e=t.$implicit,s=i.XpG(3);i.R7$(3),i.Y8G("ngIf",s.selectedItems[e.value]),i.R7$(2),i.xc7("font-weight",s.selectedItems[e.value]?600:"initial"),i.Y8G("system-title",e.display),i.R7$(),i.SpI(" ",e.display," ")}}function y(e,t){if(1&e){const e=i.RV6();i.qex(0),i.j41(1,"li",23),i.bIt("click",(function(){const t=i.eBV(e).$implicit,s=i.XpG(2);return i.Njj(s.toggleAddRemoveGroup(t.value))})),i.j41(2,"div",24),i.DNE(3,p,1,0,"system-utility-icon",25),i.j41(4,"h3",26),i.EFF(5),i.k0s()()(),i.DNE(6,b,7,5,"li",27),i.bVm()}if(2&e){const e=t.$implicit,s=i.XpG(2);i.R7$(3),i.Y8G("ngIf",s.selectedItems[e.value]),i.R7$(),i.Y8G("system-title",e.display),i.R7$(),i.SpI(" ",e.display," "),i.R7$(),i.Y8G("ngForOf",e.items)("ngForTrackBy",s.trackByFn)}}function v(e,t){if(1&e&&(i.j41(0,"ul",22),i.DNE(1,y,7,5,"ng-container",12),i.k0s()),2&e){const e=i.XpG();i.R7$(),i.Y8G("ngForOf",e.parsedListItems)("ngForTrackBy",e.trackByFn)}}function k(e,t){1&e&&i.nrm(0,"system-utility-icon",34)}function R(e,t){if(1&e){const e=i.RV6();i.j41(0,"li",23),i.bIt("click",(function(){const t=i.eBV(e).$implicit,s=i.XpG(2);return i.Njj(s.toggleAddRemoveItem(t.value))})),i.j41(1,"div",29)(2,"span",30),i.DNE(3,k,1,0,"system-utility-icon",31),i.k0s(),i.j41(4,"span",32)(5,"span",33),i.EFF(6),i.k0s()()()()}if(2&e){const e=t.$implicit,s=i.XpG(2);i.R7$(3),i.Y8G("ngIf",s.selectedItems[e.value]),i.R7$(2),i.xc7("font-weight",s.selectedItems[e.value]?600:"initial"),i.Y8G("system-title",e.display),i.R7$(),i.SpI(" ",e.display," ")}}function I(e,t){if(1&e&&(i.j41(0,"ul",22),i.DNE(1,R,7,5,"li",35),i.k0s()),2&e){const e=i.XpG();i.R7$(),i.Y8G("ngForOf",e.parsedListItems)("ngForTrackBy",e.trackByFn)}}let x=(()=>{class SystemMultipleSelect{set groupedSetter(e){this.grouped=!1!==e}set showPillsSetter(e){this.showPills=!1!==e}set dropdownLengthClassSetter(e){this.dropdownLengthClass=e?"slds-dropdown_length-"+e:"slds-dropdown_length-7"}set groupSeparatorSetter(e){this.groupSeparator=e||"_"}constructor(e,t,s){this.elementRef=e,this.renderer=t,this.language=s,this.disabled=!1,this.grouped=!1,this.showPills=!0,this.listItems={},this.groupSeparator="_",this.parsedListItems=[],this.valueArray=[],this.isOpen=!1,this.selectedItems={},this.selectedCountText="0 Selected Items",this.inputTagStyle={color:"transparent",cursor:"pointer"},this.dropdownLengthClass="slds-dropdown_length-7"}ngOnChanges(){this.buildOptionGroups()}ngAfterViewInit(){this.subscribeToESCKeyUp()}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}writeValue(e){e&&e.length&&(this.valueArray=e,this.selectedItems=_.object(e.map((e=>[e,!0])))),this.setSelectedCountText()}buildOptionGroups(){let e;if(this.parsedListItems=[],this.grouped){e={};for(let t in this.listItems)this.listItems.hasOwnProperty(t)&&!t.includes(this.groupSeparator)&&(e[t]={value:t,display:this.listItems[t],items:[]});for(let t in this.listItems)if(this.listItems.hasOwnProperty(t)){const s=t.split(this.groupSeparator);2==s.length&&e[s[0]]&&e[s[0]].items.push({value:t,display:this.listItems[t]})}this.parsedListItems=_.toArray(e)}else{e=[];for(let t in this.listItems)this.listItems.hasOwnProperty(t)&&e.push({value:t,display:this.listItems[t]});this.parsedListItems=e}}onclick(){this.isOpen=!this.isOpen}subscribeToESCKeyUp(){this.escKeyListener=this.renderer.listen("document","keyup",(e=>{"Escape"==e.key&&(this.isOpen=!1)}))}onMouseLeave(){this.clickListener&&this.clickListener(),this.isOpen&&(this.clickListener=this.renderer.listen("document","click",(e=>this.handleCloseDropdown(e))))}handleCloseDropdown(e){this.elementRef.nativeElement.contains(e.target)||(this.isOpen=!1,this.clickListener())}toggleAddRemoveItem(e,t){const s=this.valueArray.indexOf(e);let i=this.valueArray.indexOf(t);s>-1?(this.valueArray.splice(s,1),this.selectedItems[e]=!1,t&&!this.groupHasItems(t)&&(i=this.valueArray.indexOf(t),this.valueArray.splice(i,1),this.selectedItems[t]=!1)):(t&&-1==i&&(this.valueArray.push(t),this.selectedItems[t]=!0),this.valueArray.push(e),this.selectedItems[e]=!0),this.setSelectedCountText(),this.onChange(this.valueArray)}toggleAddRemoveGroup(e){if(this.groupHasItems(e))return;const t=this.valueArray.indexOf(e);t>-1?(this.valueArray.splice(t,1),this.selectedItems[e]=!1):(this.valueArray.push(e),this.selectedItems[e]=!0),this.setSelectedCountText(),this.onChange(this.valueArray)}groupHasItems(e){return this.valueArray.some((t=>{const s=t.split(this.groupSeparator);return 2==s.length&&s[0]==e}))}trackByFn(e,t){return e}removeItem(e,t){if(this.valueArray.splice(e,1),this.selectedItems[t]=!1,this.grouped&&t.split(this.groupSeparator).length>1){const e=t.split(this.groupSeparator)[0];if(!this.groupHasItems(e)){const t=this.valueArray.indexOf(e);this.valueArray.splice(t,1),this.selectedItems[e]=!1}}this.setSelectedCountText(),this.onChange(this.valueArray)}setSelectedCountText(){this.grouped?this.selectedCountText=`${this.valueArray.filter((e=>e.includes(this.groupSeparator))).length} ${this.language.getLabel("LBL_SELECTED_ITEMS")}`:this.selectedCountText=`${this.valueArray.length} ${this.language.getLabel("LBL_SELECTED_ITEMS")}`}ngOnDestroy(){this.escKeyListener&&this.escKeyListener()}static#e=this.ɵfac=function(e){return new(e||SystemMultipleSelect)(i.rXU(i.aKT),i.rXU(i.sFG),i.rXU(l.B))};static#t=this.ɵcmp=i.VBU({type:SystemMultipleSelect,selectors:[["system-multiple-select"]],inputs:{disabled:"disabled",groupedSetter:[i.Mj6.None,"grouped","groupedSetter"],showPillsSetter:[i.Mj6.None,"showPills","showPillsSetter"],listItems:"listItems",dropdownLengthClassSetter:[i.Mj6.None,"listHeight","dropdownLengthClassSetter"],groupSeparatorSetter:[i.Mj6.None,"groupSeparator","groupSeparatorSetter"]},features:[i.Jv_([{provide:n.kq,useExisting:(0,i.Rfq)((()=>SystemMultipleSelect)),multi:!0}]),i.OA$],decls:9,vars:7,consts:[[1,"slds-form-element"],[1,"slds-form-element__control"],[1,"slds-combobox_container"],["aria-expanded","true","aria-haspopup","listbox","role","combobox",1,"slds-combobox","slds-dropdown-trigger","slds-dropdown-trigger_click"],["class","slds-combobox__form-element slds-input-has-icon slds-input-has-icon_right","role","none",3,"click",4,"ngIf"],["class","slds-grid slds-grid--vertical-align-center slds-wrap slds-pill_container",3,"click","mouseleave",4,"ngIf"],["role","listbox",1,"slds-dropdown","slds-dropdown_fluid","spice-scrollbar",3,"ngClass"],["class","slds-listbox slds-listbox_vertical","role","group",4,"ngIf"],["role","none",1,"slds-combobox__form-element","slds-input-has-icon","slds-input-has-icon_right",3,"click"],["type","text","autoComplete","off","role","textbox",1,"slds-input","slds-combobox__input","slds-has-focus","slds-combobox__input-value",3,"disabled","system-placeholder","ngStyle","mouseleave","keydown"],["icon","down","addclasses","slds-input__icon slds-input__icon_right"],[1,"slds-grid","slds-grid--vertical-align-center","slds-wrap","slds-pill_container",3,"click","mouseleave"],[4,"ngFor","ngForOf","ngForTrackBy"],["class","slds-grow slds-m-left--xx-small","style","cursor: default;",4,"ngIf"],[1,"slds-grow"],["icon","down","size","xx-small",1,"slds-col--bump-left","slds-p-right--xx-small",3,"click"],[1,"slds-pill","slds-pill_link",2,"max-width","130px",3,"click"],["href","javascript:void(0);",1,"slds-pill__action"],[1,"slds-pill__label",3,"system-title"],["system-title","LBL_REMOVE",1,"slds-button","slds-button_icon","slds-pill__remove",3,"click"],["icon","close"],[1,"slds-grow","slds-m-left--xx-small",2,"cursor","default"],["role","group",1,"slds-listbox","slds-listbox_vertical"],["role","presentation",1,"slds-listbox__item",3,"click"],["role","presentation",1,"slds-media","slds-listbox__option","slds-listbox__option_plain","slds-media_small"],["icon","check","size","xx-small","class","slds-m-right--xx-small",4,"ngIf"],["role","presentation",1,"slds-listbox__option-header","slds-truncate","slds-text-title_caps",3,"system-title"],["role","presentation","class","slds-listbox__item",3,"click",4,"ngFor","ngForOf","ngForTrackBy"],["icon","check","size","xx-small",1,"slds-m-right--xx-small"],["role","option",1,"slds-media","slds-listbox__option","slds-listbox__option_plain","slds-media_small","slds-is-selected"],[1,"slds-media__figure","slds-listbox__option-icon"],["icon","check","size","xx-small",4,"ngIf"],[1,"slds-media__body"],[1,"slds-truncate",3,"system-title"],["icon","check","size","xx-small"],["class","slds-listbox__item","role","presentation",3,"click",4,"ngFor","ngForOf","ngForTrackBy"]],template:function(e,t){1&e&&(i.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),i.DNE(4,u,3,5,"div",4)(5,g,6,5,"div",5),i.j41(6,"div",6),i.DNE(7,v,2,2,"ul",7)(8,I,2,2,"ul",7),i.k0s()()()()()),2&e&&(i.R7$(3),i.AVh("slds-is-open",t.isOpen),i.R7$(),i.Y8G("ngIf",!t.showPills),i.R7$(),i.Y8G("ngIf",t.showPills),i.R7$(),i.Y8G("ngClass",t.dropdownLengthClass),i.R7$(),i.Y8G("ngIf",t.grouped),i.R7$(),i.Y8G("ngIf",!t.grouped))},dependencies:[o.m,a.L,r.YU,r.Sq,r.bT,r.B3,d.t,c.B],encapsulation:2})}return SystemMultipleSelect})()},63021:(e,t,s)=>{"use strict";s.d(t,{X:()=>o});var i=s(54438),n=s(57363),l=s(60968);let o=(()=>{class SystemNavigationCollector{constructor(e,t){this.activatedRoute=e,this.navigation=t,this.activatedRoute.params.subscribe((e=>{this.activatedRoute.routeConfig&&this.navigation.handleNavigation(e,this.activatedRoute.routeConfig,this.activatedRoute.snapshot)}))}static#e=this.ɵfac=function(e){return new(e||SystemNavigationCollector)(i.rXU(n.nX),i.rXU(l.L))};static#t=this.ɵcmp=i.VBU({type:SystemNavigationCollector,selectors:[["ng-component"]],decls:1,vars:0,template:function(e,t){1&e&&i.nrm(0,"span")},encapsulation:2})}return SystemNavigationCollector})()},98417:(e,t,s)=>{"use strict";s.d(t,{B:()=>c});var i=s(54438),n=s(29994),l=s(60968),o=s(60177),a=s(15201);function r(e,t){if(1&e&&(i.qex(0),i.nrm(1,"system-navigation-manager-route-container",3),i.bVm()),2&e){const e=t.$implicit;i.R7$(),i.Y8G("tabid",e.id)("parentttabid",e.parentid)("object",e)}}function d(e,t){if(1&e&&(i.qex(0),i.nrm(1,"system-navigation-manager-route-container",1),i.DNE(2,r,2,3,"ng-container",2),i.bVm()),2&e){const e=i.XpG();i.R7$(2),i.Y8G("ngForOf",e.navigation.objectTabs)}}let c=(()=>{class SystemNavigationManager{constructor(e,t){this.session=e,this.navigation=t}get authenticated(){return this.session.authData.sessionId&&!0===this.session.authData.loaded}static#e=this.ɵfac=function(e){return new(e||SystemNavigationManager)(i.rXU(n.d),i.rXU(l.L))};static#t=this.ɵcmp=i.VBU({type:SystemNavigationManager,selectors:[["system-navigation-manager"]],decls:1,vars:1,consts:[[4,"ngIf"],["tabid","main"],[4,"ngFor","ngForOf"],[3,"tabid","parentttabid","object"]],template:function(e,t){1&e&&i.DNE(0,d,3,1,"ng-container",0),2&e&&i.Y8G("ngIf",t.authenticated)},dependencies:[o.Sq,o.bT,a.x],encapsulation:2})}return SystemNavigationManager})()},15201:(e,t,s)=>{"use strict";s.d(t,{x:()=>g});var i=s(18359),n=s(66031),l=s(54438),o=s(83935),a=s(69904),r=s(57363),d=s(40553),c=s(60968),u=s(60177),m=s(10650);const h=e=>({"slds-hide":e});let g=(()=>{class SystemNavigationManagerRouteContainer{constructor(e,t,s,n,l,o,a){this.metadata=e,this.language=t,this.router=s,this.broadcast=n,this.navigation=l,this.navigationtab=o,this.changeDetectorRef=a,this.loaded=!1,this.subscriptions=new i.yU,this.changeDetectorRef.detach(),this.subscriptions.add(this.navigationtab.tabinfo$.subscribe((e=>{this.navigation.settabinfo(this.tabid,e)}))),this.subscriptions.add(this.navigationtab.close$.subscribe((e=>{this.navigation.closeObjectTab(this.tabid,!0)})))}ngOnInit(){this.setParentTabId(),this.object&&(this.navigationtab.objecttab=this.object),this.subscriptions.add(this.navigation.activeTab$.subscribe((e=>{if(e==this.tabid){let e;if("main"===this.tabid)this.renderedPath==this.navigation.maintab.path&&_.isEqual(this.rendererParams,this.navigation.maintab.params)||(e=this.metadata.getRouteComponent(this.navigation.maintab.path),this.routercomponent=e||void 0,this.navigationtab.activeRoute={path:this.navigation.maintab.path,params:this.navigation.maintab.params},this.navigationtab.activeRoute$.next(this.navigationtab.activeRoute),this.renderedPath=this.navigation.maintab.path,this.rendererParams={...this.navigation.maintab.params});else this.renderedPath==this.object.path&&_.isEqual(this.rendererParams,this.object.params)||(e=this.metadata.getRouteComponent(this.object.path.replace("tab/:tabid/","")),this.routercomponent=e||void 0,this.navigationtab.activeRoute={path:this.object.path,params:this.object.params},this.navigationtab.activeRoute$.next(this.navigationtab.activeRoute),this.renderedPath=this.object.path,this.rendererParams={...this.object.params});this.loaded=!0,this.changeDetectorRef.reattach(),this.changeDetectorRef.markForCheck()}else this.changeDetectorRef.detach(),this.changeDetectorRef.detectChanges()})))}setParentTabId(){"main"!=this.tabid&&"subtabbed"==this.navigation.navigationparadigm&&this.object.enablesubtabs&&(this.navigationtab.tabid=this.parentttabid?this.parentttabid:this.tabid)}ngOnDestroy(){this.subscriptions.unsubscribe()}get isActive(){return this.navigation.displayTab==this.tabid}static#e=this.ɵfac=function(e){return new(e||SystemNavigationManagerRouteContainer)(l.rXU(o.yu),l.rXU(a.B),l.rXU(r.Ix),l.rXU(d.m),l.rXU(c.L,4),l.rXU(n._),l.rXU(l.gRc))};static#t=this.ɵcmp=l.VBU({type:SystemNavigationManagerRouteContainer,selectors:[["system-navigation-manager-route-container"]],inputs:{object:"object",tabid:"tabid",parentttabid:"parentttabid"},features:[l.Jv_([n._])],decls:2,vars:4,consts:[[1,"slds-height_full",3,"ngClass"],[3,"component"]],template:function(e,t){1&e&&(l.j41(0,"div",0),l.nrm(1,"system-dynamic-component",1),l.k0s()),2&e&&(l.Y8G("ngClass",l.eq3(2,h,!t.isActive)),l.R7$(),l.Y8G("component",t.routercomponent))},dependencies:[u.YU,m.s],encapsulation:2})}return SystemNavigationManagerRouteContainer})()},50910:(e,t,s)=>{"use strict";s.d(t,{Y:()=>a});var i=s(40605),n=s(96697),l=s(54438),o=s(48849);let a=(()=>{class SystemNumberSpinner{constructor(e,t){this.userpreferences=e,this.cdref=t,this._value=0,this.steps=20,this.duration=300}ngOnChanges(e){const t=(parseFloat(this.value)-this._value)/this.steps;(0,i.Y)(this.duration/this.steps).pipe((0,n.s)(this.steps)).subscribe((e=>{this._value!=parseFloat(this.value)&&(this._value+=t,Math.abs(this._value-parseFloat(this.value))<1&&(this._value=parseFloat(this.value)),this.cdref.detectChanges())}),(e=>{this._value=parseFloat(this.value),this.cdref.detectChanges()}),(()=>{this._value=parseFloat(this.value),this.cdref.detectChanges()}))}get displayvalue(){return this.userpreferences.formatMoney(this._value,0)}static#e=this.ɵfac=function(e){return new(e||SystemNumberSpinner)(l.rXU(o.S),l.rXU(l.gRc))};static#t=this.ɵcmp=l.VBU({type:SystemNumberSpinner,selectors:[["system-number-spinner"]],inputs:{value:"value",steps:"steps",duration:"duration"},features:[l.OA$],decls:1,vars:1,template:function(e,t){1&e&&l.EFF(0),2&e&&l.JRh(t.displayvalue)},encapsulation:2,changeDetection:0})}return SystemNumberSpinner})()},98217:(e,t,s)=>{"use strict";s.d(t,{$:()=>k});var i=s(54438),n=s(18359),l=s(69904),o=s(345),a=s(13562),r=s(60177),d=s(50859),c=s(32062),u=s(48717);const m=["downloadlink"];function h(e,t){1&e&&i.nrm(0,"system-spinner")}function g(e,t){1&e&&(i.j41(0,"system-illustration-page-not-available"),i.nrm(1,"system-label",4),i.k0s())}function p(e,t){if(1&e&&(i.j41(0,"div",2),i.DNE(1,h,1,0,"system-spinner",3)(2,g,2,0,"system-illustration-page-not-available",3),i.k0s()),2&e){const e=i.XpG();i.R7$(),i.Y8G("ngIf",!e.loadingerror),i.R7$(),i.Y8G("ngIf",e.loadingerror)}}function f(e,t){if(1&e&&(i.j41(0,"div",9)(1,"audio",10),i.nrm(2,"source",11),i.k0s()()),2&e){const e=i.XpG(2);i.R7$(2),i.Y8G("src",e.blobUrl,i.B4B)("type",e.type)}}function b(e,t){if(1&e&&(i.j41(0,"div",9)(1,"video",12),i.nrm(2,"source",11),i.k0s()()),2&e){const e=i.XpG(2);i.R7$(2),i.Y8G("src",e.blobUrl,i.B4B)("type",e.type)}}function y(e,t){if(1&e&&(i.j41(0,"div",13),i.nrm(1,"object",14),i.k0s()),2&e){const e=i.XpG(2);i.Y8G("ngStyle",e.objectContainerStyle),i.R7$(),i.Y8G("data",e.blobUrl,i.f$h)("type",e.type)}}function v(e,t){if(1&e&&i.nrm(0,"a",15,16),2&e){const e=i.XpG(2);i.Y8G("href",e.blobUrl,i.B4B)("download",e.name)}}function _(e,t){if(1&e&&(i.qex(0,5),i.DNE(1,f,3,2,"div",6)(2,b,3,2,"div",6)(3,y,2,3,"div",7)(4,v,2,2,"a",8),i.bVm()),2&e){const e=i.XpG();i.Y8G("ngSwitch",e.objecttype),i.R7$(),i.Y8G("ngSwitchCase","audio"),i.R7$(),i.Y8G("ngSwitchCase","video"),i.R7$(2),i.Y8G("ngIf",e.downloadTrigger$&&e.downloadReady)}}let k=(()=>{class SystemObjectPreview{constructor(e,t,s){this.language=e,this.sanitizer=t,this.helper=s,this.name="",this.loadingerror=!1,this.downloadReady=!1,this.subscriptions=new n.yU,this.objectContainerHeight="80vh",this._type=""}get type(){return this._type}set type(e){this._type=e,!this.blobUrl&&e&&this.setBlobUrl(this.rawData)}set data(e){this.rawData=e,this.setBlobUrl(e)}ngOnInit(){this.downloadTrigger$&&this.subscriptions.add(this.downloadTrigger$.subscribe({next:()=>{this.downloadReady&&this.downloadlink.element.nativeElement.click()}}))}get objecttype(){if(!this.type)return"";let e=this.type.split("/");switch(e[0]){case"audio":case"video":return e[0];default:return"object"}}setBlobUrl(e){if(e&&this.type){const t=this.helper.datatoBlob(e,this.type);this.blobUrl=this.helper.dataToBlobUrl(t),this.downloadReady=!0}}ngOnDestroy(){this.subscriptions.unsubscribe()}get objectContainerStyle(){return{height:this.objectContainerHeight,overflow:"hidden"}}static#e=this.ɵfac=function(e){return new(e||SystemObjectPreview)(i.rXU(l.B),i.rXU(o.up),i.rXU(a.d))};static#t=this.ɵcmp=i.VBU({type:SystemObjectPreview,selectors:[["system-object-preview"]],viewQuery:function(e,t){if(1&e&&i.GBs(m,5,i.c1b),2&e){let e;i.mGM(e=i.lsd())&&(t.downloadlink=e.first)}},inputs:{name:"name",loadingerror:"loadingerror",objectContainerHeight:"objectContainerHeight",type:"type",data:"data",downloadTrigger$:"downloadTrigger$"},decls:2,vars:2,consts:[["style","height: 50vh;","class","slds-align--absolute-center",4,"ngIf"],[3,"ngSwitch",4,"ngIf"],[1,"slds-align--absolute-center",2,"height","50vh"],[4,"ngIf"],["label","MSG_ERROR_LOADING_FILE"],[3,"ngSwitch"],["class","slds-p-around--small slds-text-align--center",4,"ngSwitchCase"],[3,"ngStyle",4,"ngSwitchDefault"],["style","display:none",3,"href","download",4,"ngIf"],[1,"slds-p-around--small","slds-text-align--center"],["controls","",2,"width","100%"],[3,"src","type"],["controls","",2,"max-height","80%","max-width","80%"],[3,"ngStyle"],["width","100%","height","100%",3,"data","type"],[2,"display","none",3,"href","download"],["downloadlink",""]],template:function(e,t){1&e&&i.DNE(0,p,3,2,"div",0)(1,_,5,4,"ng-container",1),2&e&&(i.Y8G("ngIf",!t.blobUrl),i.R7$(),i.Y8G("ngIf",t.blobUrl))},dependencies:[r.bT,r.B3,r.ux,r.e1,r.fG,d.L,c.W,u.P],encapsulation:2})}return SystemObjectPreview})()},84338:(e,t,s)=>{"use strict";s.d(t,{w:()=>ie});var i=s(54438),n=s(49722),l=s(41731),o=s(41081),a=s(88421),r=s(69904),d=s(48849),c=s(53584),u=s(98427),m=s(32130),h=s(60177),g=s(84341),p=s(2187),f=s(10650),b=s(32062),y=s(17427),v=s(14445),_=s(22667),k=s(36953);function R(e,t){if(1&e&&i.nrm(0,"system-label",45),2&e){const e=i.XpG();i.Y8G("label","LBL_"+e.getPrefValue("distance_unit_system"))}}function I(e,t){1&e&&i.nrm(0,"option")}function x(e,t){1&e&&i.nrm(0,"option")}function j(e,t){if(1&e&&(i.j41(0,"option",46),i.EFF(1),i.k0s()),2&e){const e=t.$implicit;i.Y8G("value",e.value),i.R7$(),i.SpI(" ",e.name," ")}}function G(e,t){1&e&&i.nrm(0,"option")}function C(e,t){if(1&e&&(i.j41(0,"option",46),i.EFF(1),i.k0s()),2&e){const e=t.$implicit;i.Y8G("value",e.value),i.R7$(),i.SpI(" ",e.name," ")}}function w(e,t){if(1&e&&(i.qex(0),i.EFF(1),i.bVm()),2&e){const e=t.$implicit,s=i.XpG();i.R7$(),i.SpI(" ",e.id==s.getPrefValue("currency")?e.name:""," ")}}function S(e,t){1&e&&i.nrm(0,"option")}function E(e,t){if(1&e&&(i.j41(0,"option",46),i.EFF(1),i.k0s()),2&e){const e=t.$implicit;i.Y8G("value",e.id),i.R7$(),i.SpI(" ",e.name," ")}}function L(e,t){1&e&&i.nrm(0,"option")}function D(e,t){if(1&e&&(i.j41(0,"option",46),i.EFF(1),i.k0s()),2&e){const e=t.$implicit;i.Y8G("value",e),i.R7$(),i.SpI(" ",e," ")}}function F(e,t){if(1&e&&i.nrm(0,"option",47),2&e){const e=i.XpG();i.Y8G("selected",!e.numberDelimitation)}}function M(e,t){if(1&e&&(i.j41(0,"option",48),i.EFF(1),i.k0s()),2&e){const e=t.$implicit,s=i.XpG();i.Y8G("ngValue",e)("selected",s.numberDelimitation===e),i.R7$(),i.SpI(" ",e.show," ")}}function T(e,t){1&e&&i.nrm(0,"option")}function B(e,t){if(1&e&&(i.j41(0,"option",46),i.EFF(1),i.k0s()),2&e){const e=t.$implicit;i.Y8G("value",e),i.R7$(),i.SpI(" ",e," ")}}function $(e,t){1&e&&i.nrm(0,"option")}function O(e,t){if(1&e&&(i.j41(0,"option",46),i.EFF(1),i.k0s()),2&e){const e=t.$implicit;i.Y8G("value",e),i.R7$(),i.SpI(" ",e," ")}}function X(e,t){1&e&&i.nrm(0,"option")}function U(e,t){if(1&e&&(i.j41(0,"option",46),i.EFF(1),i.k0s()),2&e){const e=t.$implicit;i.Y8G("value",e.name),i.R7$(),i.JRh(e.example)}}function Y(e,t){1&e&&i.nrm(0,"system-label",34)}function N(e,t){1&e&&i.nrm(0,"system-label",36)}function V(e,t){1&e&&i.nrm(0,"option")}function A(e,t){1&e&&i.nrm(0,"option")}function P(e,t){if(1&e&&(i.j41(0,"option",46),i.nrm(1,"system-label",45),i.k0s()),2&e){const e=t.$implicit;i.Y8G("value",e),i.R7$(),i.Y8G("label",("LBL_"+e).toUpperCase())}}function z(e,t){1&e&&i.nrm(0,"option")}function H(e,t){if(1&e&&(i.j41(0,"option",46),i.EFF(1),i.nrm(2,"system-label",49),i.k0s()),2&e){const e=t.$implicit;i.Y8G("value",e),i.R7$(),i.SpI(" ",e," ")}}function q(e,t){1&e&&i.nrm(0,"option")}function J(e,t){if(1&e&&(i.j41(0,"option",50),i.EFF(1),i.k0s()),2&e){const e=t.$implicit,s=i.XpG();i.Y8G("value",e)("disabled",s.preferences.calendar_day_end_hour<=e),i.R7$(),i.SpI(" ",e," ")}}function W(e,t){1&e&&i.nrm(0,"option")}function K(e,t){if(1&e&&(i.j41(0,"option",50),i.EFF(1),i.k0s()),2&e){const e=t.$implicit,s=i.XpG();i.Y8G("value",e)("disabled",s.preferences.calendar_day_start_hour>=e),i.R7$(),i.SpI(" ",e," ")}}function Q(e,t){if(1&e&&i.nrm(0,"system-label",45),2&e){const e=i.XpG();i.Y8G("label",e.display_reminderTime)}}const Z=e=>({reminder_time:e}),ee=e=>({module:"Calls",id:"",data:e}),te=e=>({hidelabel:!0,showEmptyOption:e}),se=e=>({fieldname:"reminder_time",fieldconfig:e});let ie=(()=>{class SystemPreferencesPanel{get numberDelimitation(){const e=this.numberDelimitationsList.find((e=>e.dec_sep==this.preferences.dec_sep&&e.num_grp_sep==this.preferences.num_grp_sep));return e||void 0}set numberDelimitation(e){this.preferences.dec_sep=e.dec_sep,this.preferences.num_grp_sep=e.num_grp_sep,this.setDisplay_numberDelimitation()}constructor(e,t,s,i,n,l,o){this.backend=e,this.view=t,this.toast=s,this.currency=i,this.language=n,this.userpreferences=l,this.configurationService=o,this.currencySignificantDigitsList=["1","2","3","4","5","6"],this.thousandDelimiterList=[",","."],this.timeFormatList=[{name:moment().format("HH:mm"),value:"H:i"},{name:moment().format("hh:mma"),value:"h:ia"},{name:moment().format("hh:mmA"),value:"h:iA"},{name:moment().format("hh:mm a"),value:"h:i a"},{name:moment().format("hh:mm A"),value:"h:i A"},{name:moment().format("HH.mm"),value:"H.i"},{name:moment().format("hh.mma"),value:"h.ia"},{name:moment().format("hh.mmA"),value:"h.iA"},{name:moment().format("hh.mm a"),value:"h.i a"},{name:moment().format("hh.mm A"),value:"h.i A"}],this.dateFormatList=[{name:moment().format("YYYY-MM-DD"),value:"Y-m-d"},{name:moment().format("MM-DD-YYYY"),value:"m-d-Y"},{name:moment().format("DD-MM-YYYY"),value:"d-m-Y"},{name:moment().format("Y/MM/DD"),value:"Y/m/d"},{name:moment().format("MM/DD/YYYY"),value:"m/d/Y"},{name:moment().format("DD/MM/YYYY"),value:"d/m/Y"},{name:moment().format("YYYY.MM.DD"),value:"Y.m.d"},{name:moment().format("DD.MM.YYYY"),value:"d.m.Y"},{name:moment().format("MM.DD.YYYY"),value:"m.d.Y"}],this.currencyList=[],this.preferences={},this.weekDayStartList=["Sunday","Monday"],this.weekDaysCountList=[5,6,7],this.dayHoursList=[],this.reminderTimeOptions={"-1":"LBL_REMINDER_NONE",60:"LBL_REMINDER_1MINUTE",300:"LBL_REMINDER_5MINUTES",600:"LBL_REMINDER_10MINUTES",900:"LBL_REMINDER_15MINUTES",1800:"LBL_REMINDER_30MINUTES",3600:"LBL_REMINDER_1HOUR",7200:"LBL_REMINDER_2HOURS",10800:"LBL_REMINDER_3HOURS",18e3:"LBL_REMINDER_5HOURS",86400:"LBL_REMINDER_1DAY"},this.exportDelimiterList=[",",";"],this.charsetList=["BIG-5","CP1251","CP1252","EUC-CN","EUC-JP","EUC-KR","EUC-TW","ISO-2022-JP","ISO-2022-KR","ISO-8859-1","ISO-8859-2","ISO-8859-3","ISO-8859-4","ISO-8859-5","ISO-8859-6","ISO-8859-7","ISO-8859-8","ISO-8859-9","ISO-8859-10","ISO-8859-13","ISO-8859-14","ISO-8859-15","KOI8-R","KOI8-U","SJIS","UTF-8"],this.numberDelimitationsList=[{show:"1.000.000,00",num_grp_sep:".",dec_sep:","},{show:"1,000,000.00",num_grp_sep:",",dec_sep:"."},{show:"1 000 000,00",num_grp_sep:" ",dec_sep:","}],this.nameFormats=[],this.isPersonalContext=!1,this.preferencesNames=["calendar_day_start_hour","calendar_day_end_hour","currency","datef","export_charset","locale_name_format","dec_sep","currency_significant_digits","distance_unit_system","export_delimiter","help_icon","home_assistant","num_grp_sep","reminder_time","timef","timezone","week_day_start","week_days_count"],this.isLoading=!1,this.setInitialValues()}ngOnInit(){this.setDisplayValues()}ngOnChanges(){this.preferences&&this.setDisplayValues()}setDisplayValues(){this.setDisplay_reminderTime(),this.setDisplay_dateFormat(),this.setDisplay_timeFormat(),this.setDisplay_name(),this.setDisplay_numberDelimitation()}prefChanged(){}setInitialValues(){this.view.isEditable=!0,this.createNameFormats(),this.currencyList=this.currency.getCurrencies();for(let e=0;e<24;e++)this.dayHoursList.push(e);this.defaultPreferences=this.configurationService.getData("defaultuserpreferences")}createNameFormats(){const e={t:"LBL_LOCALE_NAME_EXAMPLE_TITLE",f:"LBL_LOCALE_NAME_EXAMPLE_FIRST",l:"LBL_LOCALE_NAME_EXAMPLE_LAST",s:"LBL_LOCALE_NAME_EXAMPLE_SALUTATION",d:"LBL_LOCALE_NAME_EXAMPLE_DEGREE_BEFORE",a:"LBL_LOCALE_NAME_EXAMPLE_DEGREE_AFTER"};this.nameFormats=["s f l","f l","s l","l, s f","l, f","s l, f","l s f","l f s","s d f l a"].map((t=>({name:t,example:t.replace(/t|f|l|s|d|a/g,(t=>this.language.getLabel(e[t])))})))}setDisplay_dateFormat(){const e=this.getPrefValue("datef");this.display_dateFormat=e?moment().format(e.replace("Y","YYYY").replace("m","MM").replace("d","DD")):""}setDisplay_timeFormat(){const e=this.getPrefValue("timef");this.display_timeFormat=e?moment().format(e.replace("H","HH").replace("h","hh").replace("i","mm")):""}setDisplay_reminderTime(){const e=this.getPrefValue("reminder_time");this.display_reminderTime=e?this.reminderTimeOptions[e]:""}setDisplay_numberDelimitation(){const e=this.getPrefValue("_numberDelimitation");this.display_numberDelimitation=e?e.show:""}setDisplay_name(){this.display_name="";const e=this.getPrefValue("locale_name_format");e&&this.nameFormats&&this.nameFormats.some((t=>{if(e===t.name)return this.display_name=t.example,!0}))}getPrefValue(e){if("_numberDelimitation"!==e)return this.prefValueIsGlobalFallback(e)?this.defaultPreferences[e]:this.preferences[e];{let t;return t=this.prefValueIsGlobalFallback(e)?this.numberDelimitationsList.find((e=>e.dec_sep==this.defaultPreferences.dec_sep&&e.num_grp_sep==this.defaultPreferences.num_grp_sep)):this.numberDelimitationsList.find((e=>e.dec_sep==this.preferences.dec_sep&&e.num_grp_sep==this.preferences.num_grp_sep)),t||void 0}}prefValueIsGlobalFallback(e){return!(!this.isPersonalContext||!this.defaultPreferences)&&("_numberDelimitation"!==e?!this.isSet(this.preferences[e])&&this.isSet(this.defaultPreferences[e]):(!this.isSet(this.preferences.num_grp_sep)||!this.isSet(this.preferences.dec_sep))&&this.isSet(this.defaultPreferences.num_grp_sep)&&this.isSet(this.defaultPreferences.dec_sep))}isSet(e){return void 0!==e&&("string"!=typeof e||0!==e.length)}atLeastOnePrefMissing(){return this.preferencesNames.some((e=>!this.isSet(this.preferences[e])))}reminderTimeChanged(e){this.preferences.reminder_time=e.reminder_time,this.setDisplay_reminderTime()}static#e=this.ɵfac=function(e){return new(e||SystemPreferencesPanel)(i.rXU(n.H),i.rXU(l.U),i.rXU(o.o),i.rXU(a.G),i.rXU(r.B),i.rXU(d.S),i.rXU(c.i))};static#t=this.ɵcmp=i.VBU({type:SystemPreferencesPanel,selectors:[["system-preferences-panel"]],inputs:{preferences:"preferences",isPersonalContext:"isPersonalContext"},features:[i.OA$],decls:141,vars:90,consts:[[3,"system-overlay-loading-spinner"],["tabtitle","LBL_LOCALE_PREFERENCES",3,"collapsible"],[1,"slds-grid","slds-grid--align-spread"],["itemlabel","LBL_TIMEZONE",1,"slds-size--1-of-4"],[3,"global"],[3,"ngModel","denyEmpty","ngModelChange"],["itemlabel","LBL_DISTANCE_UNIT_SYSTEM",1,"slds-size--1-of-4"],[3,"label",4,"ngIf"],[1,"slds-select_container"],[1,"slds-select",3,"ngModel","ngModelChange"],[4,"ngIf"],["value","METRIC"],["label","LBL_METRIC"],["value","IMPERIAL"],["label","LBL_IMPERIAL"],["itemlabel","LBL_DATE_FORMAT",1,"slds-size--1-of-4"],[3,"value",4,"ngFor","ngForOf"],["itemlabel","LBL_TIME_FORMAT",1,"slds-size--1-of-4"],["itemlabel","LBL_CURRENCY",1,"slds-size--2-of-5"],[1,"slds-form-element__static"],[4,"ngFor","ngForOf"],["itemlabel","LBL_DECIMAL_DIGITS",1,"slds-size--1-of-5"],["itemlabel","LBL_NUMBER_FORMAT",1,"slds-size--2-of-5"],[3,"selected",4,"ngIf"],[3,"ngValue","selected",4,"ngFor","ngForOf"],["tabtitle","LBL_EXPORT_PREFERENCES",3,"collapsible"],["itemlabel","LBL_EXPORT_DELIMITER",1,"slds-size--1-of-2"],["itemlabel","LBL_EXPORT_CHARSET",1,"slds-size--1-of-2"],["tabtitle","LBL_OTHER_PREFERENCES",3,"collapsible"],["itemlabel","LBL_NAME_FORMAT",1,"slds-size--1-of-2"],["itemlabel","LBL_HELP_ICON",1,"slds-size--1-of-2"],["label","LBL_VISIBLE",4,"ngIf"],["label","LBL_HIDDEN",4,"ngIf"],["value","visible"],["label","LBL_VISIBLE"],["value","hidden"],["label","LBL_HIDDEN"],["tabtitle","LBL_CALENDAR_PREFERENCES",3,"collapsible"],["itemlabel","LBL_WEEK_START_DAY",1,"slds-size--1-of-4"],["itemlabel","LBL_WEEK_DAYS_COUNT",1,"slds-size--1-of-4"],["itemlabel","LBL_DAY_START_HOUR",1,"slds-size--1-of-4"],[3,"value","disabled",4,"ngFor","ngForOf"],["itemlabel","LBL_DAY_END_HOUR",1,"slds-size--1-of-4"],["itemlabel","LBL_DEFAULT_REMINDER_TIME",1,"slds-size--1-of-4"],["component","fieldActivityReminder",3,"system-model-provider","componentattributes","data$"],[3,"label"],[3,"value"],[3,"selected"],[3,"ngValue","selected"],["label","LBL_DAYS"],[3,"value","disabled"]],template:function(e,t){1&e&&(i.j41(0,"div",0)(1,"system-collapsable-tab",1)(2,"div",2)(3,"system-preferences-panel-item",3)(4,"system-preferences-panel-item-display",4),i.EFF(5),i.k0s(),i.j41(6,"system-preferences-panel-item-edit")(7,"system-input-timezone",5),i.mxI("ngModelChange",(function(e){return i.DH7(t.preferences.timezone,e)||(t.preferences.timezone=e),e})),i.k0s()()(),i.j41(8,"system-preferences-panel-item",6)(9,"system-preferences-panel-item-display",4),i.DNE(10,R,1,1,"system-label",7),i.k0s(),i.j41(11,"system-preferences-panel-item-edit")(12,"div",8)(13,"select",9),i.mxI("ngModelChange",(function(e){return i.DH7(t.preferences.distance_unit_system,e)||(t.preferences.distance_unit_system=e),e})),i.bIt("ngModelChange",(function(){return t.prefChanged()})),i.DNE(14,I,1,0,"option",10),i.j41(15,"option",11),i.nrm(16,"system-label",12),i.k0s(),i.j41(17,"option",13),i.nrm(18,"system-label",14),i.k0s()()()()(),i.j41(19,"system-preferences-panel-item",15)(20,"system-preferences-panel-item-display",4),i.EFF(21),i.k0s(),i.j41(22,"system-preferences-panel-item-edit")(23,"div",8)(24,"select",9),i.mxI("ngModelChange",(function(e){return i.DH7(t.preferences.datef,e)||(t.preferences.datef=e),e})),i.bIt("ngModelChange",(function(){return t.prefChanged(),t.setDisplay_dateFormat()})),i.DNE(25,x,1,0,"option",10)(26,j,2,2,"option",16),i.k0s()()()(),i.j41(27,"system-preferences-panel-item",17)(28,"system-preferences-panel-item-display",4),i.EFF(29),i.k0s(),i.j41(30,"system-preferences-panel-item-edit")(31,"div",8)(32,"select",9),i.mxI("ngModelChange",(function(e){return i.DH7(t.preferences.timef,e)||(t.preferences.timef=e),e})),i.bIt("ngModelChange",(function(){return t.prefChanged(),t.setDisplay_timeFormat()})),i.DNE(33,G,1,0,"option",10)(34,C,2,2,"option",16),i.k0s()()()()(),i.j41(35,"div",2)(36,"system-preferences-panel-item",18)(37,"system-preferences-panel-item-display",4)(38,"span",19),i.DNE(39,w,2,1,"ng-container",20),i.k0s()(),i.j41(40,"system-preferences-panel-item-edit")(41,"div",8)(42,"select",9),i.mxI("ngModelChange",(function(e){return i.DH7(t.preferences.currency,e)||(t.preferences.currency=e),e})),i.bIt("ngModelChange",(function(){return t.prefChanged()})),i.DNE(43,S,1,0,"option",10)(44,E,2,2,"option",16),i.k0s()()()(),i.j41(45,"system-preferences-panel-item",21)(46,"system-preferences-panel-item-display",4),i.EFF(47),i.k0s(),i.j41(48,"system-preferences-panel-item-edit")(49,"div",8)(50,"select",9),i.mxI("ngModelChange",(function(e){return i.DH7(t.preferences.currency_significant_digits,e)||(t.preferences.currency_significant_digits=e),e})),i.bIt("ngModelChange",(function(){return t.prefChanged()})),i.DNE(51,L,1,0,"option",10)(52,D,2,2,"option",16),i.k0s()()()(),i.j41(53,"system-preferences-panel-item",22)(54,"system-preferences-panel-item-display",4),i.EFF(55),i.k0s(),i.j41(56,"system-preferences-panel-item-edit")(57,"div",8)(58,"select",9),i.mxI("ngModelChange",(function(e){return i.DH7(t.numberDelimitation,e)||(t.numberDelimitation=e),e})),i.DNE(59,F,1,1,"option",23)(60,M,2,3,"option",24),i.k0s()()()()()(),i.j41(61,"system-collapsable-tab",25)(62,"div",2)(63,"system-preferences-panel-item",26)(64,"system-preferences-panel-item-display",4),i.EFF(65),i.k0s(),i.j41(66,"system-preferences-panel-item-edit")(67,"div",8)(68,"select",9),i.mxI("ngModelChange",(function(e){return i.DH7(t.preferences.export_delimiter,e)||(t.preferences.export_delimiter=e),e})),i.bIt("ngModelChange",(function(){return t.prefChanged()})),i.DNE(69,T,1,0,"option",10)(70,B,2,2,"option",16),i.k0s()()()(),i.j41(71,"system-preferences-panel-item",27)(72,"system-preferences-panel-item-display",4),i.EFF(73),i.k0s(),i.j41(74,"system-preferences-panel-item-edit")(75,"div",8)(76,"select",9),i.mxI("ngModelChange",(function(e){return i.DH7(t.preferences.export_charset,e)||(t.preferences.export_charset=e),e})),i.bIt("ngModelChange",(function(){return t.prefChanged()})),i.DNE(77,$,1,0,"option",10)(78,O,2,2,"option",16),i.k0s()()()()()(),i.j41(79,"system-collapsable-tab",28)(80,"div",2)(81,"system-preferences-panel-item",29)(82,"system-preferences-panel-item-display",4),i.EFF(83),i.k0s(),i.j41(84,"system-preferences-panel-item-edit")(85,"div",8)(86,"select",9),i.mxI("ngModelChange",(function(e){return i.DH7(t.preferences.locale_name_format,e)||(t.preferences.locale_name_format=e),e})),i.bIt("ngModelChange",(function(){return t.prefChanged(),t.setDisplay_name()})),i.DNE(87,X,1,0,"option",10)(88,U,2,2,"option",16),i.k0s()()()(),i.j41(89,"system-preferences-panel-item",30)(90,"system-preferences-panel-item-display",4),i.DNE(91,Y,1,0,"system-label",31)(92,N,1,0,"system-label",32),i.k0s(),i.j41(93,"system-preferences-panel-item-edit")(94,"div",8)(95,"select",9),i.mxI("ngModelChange",(function(e){return i.DH7(t.preferences.help_icon,e)||(t.preferences.help_icon=e),e})),i.bIt("ngModelChange",(function(){return t.prefChanged()})),i.DNE(96,V,1,0,"option",10),i.j41(97,"option",33),i.nrm(98,"system-label",34),i.k0s(),i.j41(99,"option",35),i.nrm(100,"system-label",36),i.k0s()()()()()()(),i.j41(101,"system-collapsable-tab",37)(102,"div",2)(103,"system-preferences-panel-item",38)(104,"system-preferences-panel-item-display",4),i.EFF(105),i.k0s(),i.j41(106,"system-preferences-panel-item-edit")(107,"div",8)(108,"select",9),i.mxI("ngModelChange",(function(e){return i.DH7(t.preferences.week_day_start,e)||(t.preferences.week_day_start=e),e})),i.bIt("ngModelChange",(function(){return t.prefChanged()})),i.DNE(109,A,1,0,"option",10)(110,P,2,2,"option",16),i.k0s()()()(),i.j41(111,"system-preferences-panel-item",39)(112,"system-preferences-panel-item-display",4),i.EFF(113),i.k0s(),i.j41(114,"system-preferences-panel-item-edit")(115,"div",8)(116,"select",9),i.mxI("ngModelChange",(function(e){return i.DH7(t.preferences.week_days_count,e)||(t.preferences.week_days_count=e),e})),i.bIt("ngModelChange",(function(){return t.prefChanged()})),i.DNE(117,z,1,0,"option",10)(118,H,3,2,"option",16),i.k0s()()()(),i.j41(119,"system-preferences-panel-item",40)(120,"system-preferences-panel-item-display",4),i.EFF(121),i.k0s(),i.j41(122,"system-preferences-panel-item-edit")(123,"div",8)(124,"select",9),i.mxI("ngModelChange",(function(e){return i.DH7(t.preferences.calendar_day_start_hour,e)||(t.preferences.calendar_day_start_hour=e),e})),i.bIt("ngModelChange",(function(){return t.prefChanged()})),i.DNE(125,q,1,0,"option",10)(126,J,2,3,"option",41),i.k0s()()()(),i.j41(127,"system-preferences-panel-item",42)(128,"system-preferences-panel-item-display",4),i.EFF(129),i.k0s(),i.j41(130,"system-preferences-panel-item-edit")(131,"div",8)(132,"select",9),i.mxI("ngModelChange",(function(e){return i.DH7(t.preferences.calendar_day_end_hour,e)||(t.preferences.calendar_day_end_hour=e),e})),i.bIt("ngModelChange",(function(){return t.prefChanged()})),i.DNE(133,W,1,0,"option",10)(134,K,2,3,"option",41),i.k0s()()()()(),i.j41(135,"div",2)(136,"system-preferences-panel-item",43)(137,"system-preferences-panel-item-display",4),i.DNE(138,Q,1,1,"system-label",7),i.k0s(),i.j41(139,"system-preferences-panel-item-edit")(140,"system-dynamic-component",44),i.bIt("data$",(function(e){return t.reminderTimeChanged(e)})),i.k0s()()()()()()),2&e&&(i.Y8G("system-overlay-loading-spinner",t.isLoading),i.R7$(),i.Y8G("collapsible",!1),i.R7$(3),i.Y8G("global",t.prefValueIsGlobalFallback("timezone")),i.R7$(),i.SpI(" ",t.getPrefValue("timezone")," "),i.R7$(2),i.R50("ngModel",t.preferences.timezone),i.Y8G("denyEmpty",!t.isPersonalContext),i.R7$(2),i.Y8G("global",t.prefValueIsGlobalFallback("distance_unit_system")),i.R7$(),i.Y8G("ngIf",!!t.getPrefValue("distance_unit_system")),i.R7$(3),i.R50("ngModel",t.preferences.distance_unit_system),i.R7$(),i.Y8G("ngIf",t.isPersonalContext),i.R7$(6),i.Y8G("global",t.prefValueIsGlobalFallback("datef")),i.R7$(),i.SpI(" ",t.display_dateFormat," "),i.R7$(3),i.R50("ngModel",t.preferences.datef),i.R7$(),i.Y8G("ngIf",t.isPersonalContext),i.R7$(),i.Y8G("ngForOf",t.dateFormatList),i.R7$(2),i.Y8G("global",t.prefValueIsGlobalFallback("timef")),i.R7$(),i.SpI(" ",t.display_timeFormat," "),i.R7$(3),i.R50("ngModel",t.preferences.timef),i.R7$(),i.Y8G("ngIf",t.isPersonalContext),i.R7$(),i.Y8G("ngForOf",t.timeFormatList),i.R7$(3),i.Y8G("global",t.prefValueIsGlobalFallback("currency")),i.R7$(2),i.Y8G("ngForOf",t.currencyList),i.R7$(3),i.R50("ngModel",t.preferences.currency),i.R7$(),i.Y8G("ngIf",t.isPersonalContext),i.R7$(),i.Y8G("ngForOf",t.currencyList),i.R7$(2),i.Y8G("global",t.prefValueIsGlobalFallback("currency_significant_digits")),i.R7$(),i.SpI(" ",t.getPrefValue("currency_significant_digits")," "),i.R7$(3),i.R50("ngModel",t.preferences.currency_significant_digits),i.R7$(),i.Y8G("ngIf",t.isPersonalContext),i.R7$(),i.Y8G("ngForOf",t.currencySignificantDigitsList),i.R7$(2),i.Y8G("global",t.prefValueIsGlobalFallback("_numberDelimitation")),i.R7$(),i.SpI(" ",t.display_numberDelimitation," "),i.R7$(3),i.R50("ngModel",t.numberDelimitation),i.R7$(),i.Y8G("ngIf",t.isPersonalContext),i.R7$(),i.Y8G("ngForOf",t.numberDelimitationsList),i.R7$(),i.Y8G("collapsible",!1),i.R7$(3),i.Y8G("global",t.prefValueIsGlobalFallback("export_delimiter")),i.R7$(),i.SpI(" ",t.getPrefValue("export_delimiter")," "),i.R7$(3),i.R50("ngModel",t.preferences.export_delimiter),i.R7$(),i.Y8G("ngIf",t.isPersonalContext),i.R7$(),i.Y8G("ngForOf",t.exportDelimiterList),i.R7$(2),i.Y8G("global",t.prefValueIsGlobalFallback("export_charset")),i.R7$(),i.SpI(" ",t.getPrefValue("export_charset")," "),i.R7$(3),i.R50("ngModel",t.preferences.export_charset),i.R7$(),i.Y8G("ngIf",t.isPersonalContext),i.R7$(),i.Y8G("ngForOf",t.charsetList),i.R7$(),i.Y8G("collapsible",!1),i.R7$(3),i.Y8G("global",t.prefValueIsGlobalFallback("locale_name_format")),i.R7$(),i.SpI(" ",t.display_name," "),i.R7$(3),i.R50("ngModel",t.preferences.locale_name_format),i.R7$(),i.Y8G("ngIf",t.isPersonalContext),i.R7$(),i.Y8G("ngForOf",t.nameFormats),i.R7$(2),i.Y8G("global",t.prefValueIsGlobalFallback("help_icon")),i.R7$(),i.Y8G("ngIf","visible"===t.getPrefValue("help_icon")),i.R7$(),i.Y8G("ngIf","hidden"===t.getPrefValue("help_icon")),i.R7$(3),i.R50("ngModel",t.preferences.help_icon),i.R7$(),i.Y8G("ngIf",t.isPersonalContext),i.R7$(5),i.Y8G("collapsible",!1),i.R7$(3),i.Y8G("global",t.prefValueIsGlobalFallback("week_day_start")),i.R7$(),i.SpI(" ",t.getPrefValue("week_day_start")," "),i.R7$(3),i.R50("ngModel",t.preferences.week_day_start),i.R7$(),i.Y8G("ngIf",t.isPersonalContext),i.R7$(),i.Y8G("ngForOf",t.weekDayStartList),i.R7$(2),i.Y8G("global",t.prefValueIsGlobalFallback("week_days_count")),i.R7$(),i.SpI(" ",t.getPrefValue("week_days_count")," "),i.R7$(3),i.R50("ngModel",t.preferences.week_days_count),i.R7$(),i.Y8G("ngIf",t.isPersonalContext),i.R7$(),i.Y8G("ngForOf",t.weekDaysCountList),i.R7$(2),i.Y8G("global",t.prefValueIsGlobalFallback("calendar_day_start_hour")),i.R7$(),i.SpI(" ",t.getPrefValue("calendar_day_start_hour")," "),i.R7$(3),i.R50("ngModel",t.preferences.calendar_day_start_hour),i.R7$(),i.Y8G("ngIf",t.isPersonalContext),i.R7$(),i.Y8G("ngForOf",t.dayHoursList),i.R7$(2),i.Y8G("global",t.prefValueIsGlobalFallback("calendar_day_end_hour")),i.R7$(),i.SpI(" ",t.getPrefValue("calendar_day_end_hour")," "),i.R7$(3),i.R50("ngModel",t.preferences.calendar_day_end_hour),i.R7$(),i.Y8G("ngIf",t.isPersonalContext),i.R7$(),i.Y8G("ngForOf",t.dayHoursList),i.R7$(3),i.Y8G("global",t.prefValueIsGlobalFallback("reminder_time")),i.R7$(),i.Y8G("ngIf",t.display_reminderTime),i.R7$(2),i.Y8G("system-model-provider",i.eq3(84,ee,i.eq3(82,Z,t.preferences.reminder_time)))("componentattributes",i.eq3(88,se,i.eq3(86,te,t.isPersonalContext))))},dependencies:[u.v,m.M,h.Sq,h.bT,g.xH,g.y7,g.wz,g.BC,g.vS,p.p,f.s,b.W,y.p,v.x,_.J,k.t],encapsulation:2})}return SystemPreferencesPanel})()},14445:(e,t,s)=>{"use strict";s.d(t,{x:()=>m});var i=s(54438),n=s(41731),l=s(69904),o=s(60177),a=s(32062);function r(e,t){1&e&&i.SdG(0,0,["*ngIf","!view.isEditMode()"])}function d(e,t){1&e&&i.SdG(0,1,["*ngIf","view.isEditMode()"])}const c=[[["system-preferences-panel-item-display"]],[["system-preferences-panel-item-edit"]]],u=["system-preferences-panel-item-display","system-preferences-panel-item-edit"];let m=(()=>{class SystemPreferencesPanelItem{constructor(e,t){this.view=e,this.language=t,this.itemlabel=""}static#e=this.ɵfac=function(e){return new(e||SystemPreferencesPanelItem)(i.rXU(n.U),i.rXU(l.B))};static#t=this.ɵcmp=i.VBU({type:SystemPreferencesPanelItem,selectors:[["system-preferences-panel-item"]],inputs:{itemlabel:"itemlabel"},ngContentSelectors:u,decls:5,vars:3,consts:[[1,"slds-form-element","slds-p-around--x-small"],[1,"slds-form-element__label"],[3,"label"],[4,"ngIf"]],template:function(e,t){1&e&&(i.NAR(c),i.j41(0,"div",0)(1,"label",1),i.nrm(2,"system-label",2),i.k0s(),i.DNE(3,r,1,0,"ng-content",3)(4,d,1,0,"ng-content",3),i.k0s()),2&e&&(i.R7$(2),i.Y8G("label",t.itemlabel),i.R7$(),i.Y8G("ngIf",!t.view.isEditMode()),i.R7$(),i.Y8G("ngIf",t.view.isEditMode()))},dependencies:[o.bT,a.W],encapsulation:2})}return SystemPreferencesPanelItem})()},22667:(e,t,s)=>{"use strict";s.d(t,{J:()=>c});var i=s(54438),n=s(41731),l=s(60177),o=s(25863),a=s(49380);function r(e,t){1&e&&i.nrm(0,"system-custom-icon",5)}const d=["*"];let c=(()=>{class SystemPreferencesPanelItemDisplay{constructor(e){this.view=e,this.global=!1}static#e=this.ɵfac=function(e){return new(e||SystemPreferencesPanelItemDisplay)(i.rXU(n.U))};static#t=this.ɵcmp=i.VBU({type:SystemPreferencesPanelItemDisplay,selectors:[["system-preferences-panel-item-display"]],inputs:{global:"global"},ngContentSelectors:d,decls:6,vars:2,consts:[[1,"slds-form-element__control","slds-has-divider--bottom","slds-grid","slds-p-vertical--x-small",3,"dblclick"],[1,"slds-form-element__static","slds-grid"],["icon","global","size","x-small","class","slds-p-right--xx-small",4,"ngIf"],[1,"slds-button","slds-button--icon","slds-m-left--xx-small",2,"float","right",3,"click"],[3,"icon"],["icon","global","size","x-small",1,"slds-p-right--xx-small"]],template:function(e,t){1&e&&(i.NAR(),i.j41(0,"div",0),i.bIt("dblclick",(function(){return t.view.setEditMode()})),i.j41(1,"span",1),i.DNE(2,r,1,0,"system-custom-icon",2),i.SdG(3),i.k0s(),i.j41(4,"button",3),i.bIt("click",(function(){return t.view.setEditMode()})),i.nrm(5,"system-button-icon",4),i.k0s()()),2&e&&(i.R7$(2),i.Y8G("ngIf",t.global),i.R7$(3),i.Y8G("icon","edit"))},dependencies:[l.bT,o.t,a.k],styles:["\n\n\n\n\n\n\n\n\n\n\n.slds-button--icon[_ngcontent-%COMP%]{color:#eee}.slds-button--icon[_ngcontent-%COMP%]:hover{color:#5b5b5b}"]})}return SystemPreferencesPanelItemDisplay})()},36953:(e,t,s)=>{"use strict";s.d(t,{t:()=>l});var i=s(54438);const n=["*"];let l=(()=>{class SystemPreferencesPanelItemEdit{static#e=this.ɵfac=function(e){return new(e||SystemPreferencesPanelItemEdit)};static#t=this.ɵcmp=i.VBU({type:SystemPreferencesPanelItemEdit,selectors:[["system-preferences-panel-item-edit"]],ngContentSelectors:n,decls:2,vars:0,consts:[[1,"slds-form-element__control"]],template:function(e,t){1&e&&(i.NAR(),i.j41(0,"div",0),i.SdG(1),i.k0s())},encapsulation:2})}return SystemPreferencesPanelItemEdit})()},37804:(e,t,s)=>{"use strict";s.d(t,{Y:()=>c});var i=s(54438),n=s(69904),l=s(48849),o=s(60177);function a(e,t){if(1&e&&(i.j41(0,"div",3)(1,"span",4),i.SdG(2),i.k0s(),i.j41(3,"strong",5),i.EFF(4),i.k0s()()),2&e){const e=i.XpG();i.R7$(4),i.Lme("",e.progressText," ",e.lang.getLabel("LBL_COMPLETED"),"")}}const r=(e,t)=>({"width.%":e,background:t}),d=["*"];let c=(()=>{class SystemProgressBar{constructor(e,t){this.lang=e,this.userprefs=t,this.hideText=!1,this.progress=0,this.decimals=2,this.size="medium",this.total=null}get displayPercents(){return null===this.total}get _progress(){return void 0===this.progress?0:this.progress}get _total(){return void 0===this.total?0:this.total}get progressText(){let e;return e=this.displayPercents?this._progress.toFixed(this.decimals)+" %":this._progress.toFixed(this.decimals)+"/"+this._total.toFixed(this.decimals),e.split(".").join(this.userprefs.toUse.dec_sep)}get progressWidth(){return this.displayPercents?this._progress>100?100:this._progress:(this._progress>this._total?this._total:this._progress)/this._total*100}get sizeClass(){return"slds-progress-bar_"+this.size}static#e=this.ɵfac=function(e){return new(e||SystemProgressBar)(i.rXU(n.B),i.rXU(l.S))};static#t=this.ɵcmp=i.VBU({type:SystemProgressBar,selectors:[["system-progress-bar"]],hostAttrs:[2,"display","block"],inputs:{hideText:"hideText",color:"color",progress:"progress",decimals:"decimals",size:"size",total:"total"},ngContentSelectors:d,decls:4,vars:6,consts:[["class","slds-grid slds-grid_align-spread slds-p-bottom_x-small",4,"ngIf"],[1,"slds-progress-bar","slds-progress-bar_circular",3,"ngClass"],[1,"slds-progress-bar__value",3,"ngStyle"],[1,"slds-grid","slds-grid_align-spread","slds-p-bottom_x-small"],[1,"slds-m-left--xx-small"],[1,"slds-m-right--x-small"]],template:function(e,t){1&e&&(i.NAR(),i.j41(0,"div"),i.DNE(1,a,5,2,"div",0),i.j41(2,"div",1),i.nrm(3,"span",2),i.k0s()()),2&e&&(i.R7$(),i.Y8G("ngIf",!t.hideText),i.R7$(),i.Y8G("ngClass",t.sizeClass),i.R7$(),i.Y8G("ngStyle",i.l_i(3,r,t.progressWidth,t.color)))},dependencies:[o.YU,o.bT,o.B3],encapsulation:2})}return SystemProgressBar})()},65416:(e,t,s)=>{"use strict";s.d(t,{Q:()=>f});var i=s(54438),n=s(84341),l=s(82931),o=s(22465),a=s(60177),r=s(25863),d=s(32062);function c(e,t){1&e&&i.nrm(0,"system-button-icon",12)}function u(e,t){1&e&&i.nrm(0,"system-button-icon",13)}const m=(e,t)=>({"slds-is-active":e,"slds-is-completed":t}),h=e=>({"slds-button_icon slds-progress__marker_icon":e});function g(e,t){if(1&e){const e=i.RV6();i.j41(0,"li",7),i.bIt("mouseenter",(function(){const t=i.eBV(e).$implicit,s=i.XpG();return i.Njj(s.showToolTip(t.value))}))("mouseleave",(function(){i.eBV(e);const t=i.XpG();return i.Njj(t.hideToolTip())})),i.j41(1,"button",8),i.bIt("click",(function(){const t=i.eBV(e).$implicit,s=i.XpG();return i.Njj(s.value=t.value)})),i.j41(2,"span",6),i.nrm(3,"system-label",9),i.k0s(),i.DNE(4,c,1,0,"system-button-icon",10)(5,u,1,0,"system-button-icon",11),i.k0s()()}if(2&e){const e=t.$implicit,s=i.XpG();i.Y8G("ngClass",i.l_i(6,m,e.value==s.value,s.isCompleted(e.value)&&!s.isComplete(e.value))),i.R7$(),i.Y8G("ngClass",i.eq3(9,h,s.isCompleted(e.value)))("system-title",e.label),i.R7$(2),i.Y8G("label",e.label),i.R7$(),i.Y8G("ngIf",e.value!=s.value&&s.isComplete(e.value)),i.R7$(),i.Y8G("ngIf",e.value!=s.value&&s.isCompleted(e.value)&&s.hasError(e.value))}}const p=e=>({"slds-progress--shade":e});let f=(()=>{class SystemProgressIndicator{set disabled(e){this._disabled=!1!==e}set progressIndicatorShade(e){this._progressIndicatorShade=!1!==e}constructor(e,t,s){this.elementRef=e,this.cdRef=t,this.renderer=s,this._disabled=!1,this._progressIndicatorShade=!1,this.itemList=[],this._value="",this.toolTipValue=void 0}ngAfterContentInit(){this.progressItemlist.forEach((e=>this.itemList.push({value:e.value,label:e.label,status:e.status}))),this._value=this.itemList[0].value}get value(){return this._value}set value(e){this._disabled||(this._value=e,this.onChange(e))}registerOnChange(e){this.onChange=e}registerOnTouched(e){}writeValue(e){e&&(this.value=e,this.cdRef.detectChanges())}isCompleted(e){return e!==this.value&&this.itemList.findIndex((t=>t.value==e))<this.itemList.findIndex((e=>e.value==this.value))}isComplete(e){return"complete"==this.progressItemlist.find((t=>t.value==e)).status}hasError(e){return"error"==this.progressItemlist.find((t=>t.value==e)).status}get progressBarStyle(){let e=this.itemList.findIndex((e=>e.value==this.value));return{width:e?Math.round(e/(this.itemList.length-1)*100)+"%":"0%"}}showToolTip(e){this.toolTipValue=e}hideToolTip(){this.toolTipValue=void 0}get toolTipStyle(){let e=this.itemList.findIndex((e=>e.value==this.toolTipValue));return{position:"absolute",left:`calc(${e?Math.round(e/(this.itemList.length-1)*100)+"%":"0%"} + 6px)`,bottom:"30px",transform:"translateX(-50%)"}}get toolTipLabel(){return this.toolTipValue?this.itemList.find((e=>e.value==this.toolTipValue)).label:""}static#e=this.ɵfac=function(e){return new(e||SystemProgressIndicator)(i.rXU(i.aKT),i.rXU(i.gRc),i.rXU(i.sFG))};static#t=this.ɵcmp=i.VBU({type:SystemProgressIndicator,selectors:[["system-progress-indicator"]],contentQueries:function(e,t,s){if(1&e&&i.wni(s,l.D,4),2&e){let e;i.mGM(e=i.lsd())&&(t.progressItemlist=e)}},inputs:{disabled:"disabled",progressIndicatorShade:[i.Mj6.None,"system-progress-indicator-shade","progressIndicatorShade"],itemList:"itemList"},features:[i.Jv_([{provide:n.kq,useExisting:(0,i.Rfq)((()=>SystemProgressIndicator)),multi:!0}])],decls:8,vars:5,consts:[[1,"slds-is-relative"],[1,"slds-progress",2,"max-width","100%",3,"ngClass"],[1,"slds-progress__list"],["class","slds-progress__item",3,"ngClass","mouseenter","mouseleave",4,"ngFor","ngForOf"],["aria-valuemin","0","aria-valuemax","100","aria-valuenow","50","role","progressbar",1,"slds-progress-bar","slds-progress-bar_x-small"],[1,"slds-progress-bar__value",3,"ngStyle"],[1,"slds-assistive-text"],[1,"slds-progress__item",3,"ngClass","mouseenter","mouseleave"],[1,"slds-button","slds-progress__marker",3,"ngClass","system-title","click"],[3,"label"],["icon","success","colorclass","slds-icon-text-success",4,"ngIf"],["icon","error","colorclass","slds-icon-text-error",4,"ngIf"],["icon","success","colorclass","slds-icon-text-success"],["icon","error","colorclass","slds-icon-text-error"]],template:function(e,t){1&e&&(i.j41(0,"div",0)(1,"div",1)(2,"ol",2),i.DNE(3,g,6,11,"li",3),i.k0s(),i.j41(4,"div",4)(5,"span",5)(6,"span",6),i.EFF(7,"Progress: 50%"),i.k0s()()()()()),2&e&&(i.R7$(),i.Y8G("ngClass",i.eq3(3,p,t._progressIndicatorShade)),i.R7$(2),i.Y8G("ngForOf",t.itemList),i.R7$(2),i.Y8G("ngStyle",t.progressBarStyle))},dependencies:[o.L,a.YU,a.Sq,a.bT,a.B3,r.t,d.W],encapsulation:2,changeDetection:0})}return SystemProgressIndicator})()},82931:(e,t,s)=>{"use strict";s.d(t,{D:()=>n});var i=s(54438);let n=(()=>{class SystemProgressIndicatorItem{constructor(){this.value="",this.label="",this.status=""}static#e=this.ɵfac=function(e){return new(e||SystemProgressIndicatorItem)};static#t=this.ɵcmp=i.VBU({type:SystemProgressIndicatorItem,selectors:[["system-progress-indicator-item"]],inputs:{value:"value",label:"label",status:"status"},decls:0,vars:0,template:function(e,t){},encapsulation:2})}return SystemProgressIndicatorItem})()},72793:(e,t,s)=>{"use strict";s.d(t,{B:()=>c});var i=s(54438),n=s(60177),l=s(25863);function o(e,t){1&e&&i.nrm(0,"system-button-icon",8),2&e&&i.Y8G("icon","success")}const a=e=>({"slds-button--icon slds-progress__marker--icon":e});function r(e,t){if(1&e&&(i.j41(0,"li",5)(1,"button",6),i.DNE(2,o,1,1,"system-button-icon",7),i.k0s()()),2&e){const e=t.$implicit,s=i.XpG();i.Y8G("ngClass",s.getStepClass(e)),i.R7$(),i.Y8G("ngClass",i.eq3(3,a,s.getStepComplete(e))),i.R7$(),i.Y8G("ngIf",s.getStepComplete(e))}}const d=e=>({"slds-progress--shade":e});let c=(()=>{class SystemProgressList{set shade(e){this._shade=!1!==e}constructor(){this.step=0,this.steps=[],this._shade=!1}getStepClass(e){let t=this.steps.indexOf(e);return t==this.step?"slds-is-active":t<this.step?"slds-is-completed":void 0}getStepComplete(e){return this.steps.indexOf(e)<this.step}get progressBarWidth(){return{width:this.step/(this.steps.length-1)*100+"%"}}static#e=this.ɵfac=function(e){return new(e||SystemProgressList)};static#t=this.ɵcmp=i.VBU({type:SystemProgressList,selectors:[["system-progress-list"]],inputs:{step:"step",steps:"steps",shade:[i.Mj6.None,"system-progress-list-shade","shade"]},decls:5,vars:5,consts:[[1,"slds-progress",3,"ngClass"],[1,"slds-progress__list"],["class","slds-progress__item",3,"ngClass",4,"ngFor","ngForOf"],["role","progressbar",1,"slds-progress-bar","slds-progress-bar_x-small"],[1,"slds-progress-bar__value",3,"ngStyle"],[1,"slds-progress__item",3,"ngClass"],[1,"slds-button","slds-progress__marker",3,"ngClass"],[3,"icon",4,"ngIf"],[3,"icon"]],template:function(e,t){1&e&&(i.j41(0,"div",0)(1,"ol",1),i.DNE(2,r,3,5,"li",2),i.k0s(),i.j41(3,"div",3),i.nrm(4,"div",4),i.k0s()()),2&e&&(i.Y8G("ngClass",i.eq3(3,d,t._shade)),i.R7$(2),i.Y8G("ngForOf",t.steps),i.R7$(2),i.Y8G("ngStyle",t.progressBarWidth))},dependencies:[n.YU,n.Sq,n.bT,n.B3,l.t],encapsulation:2})}return SystemProgressList})()},5868:(e,t,s)=>{"use strict";s.d(t,{C:()=>S});var i=s(21413),n=s(54438),l=s(69904);const o=["cancelButton"],a=["okButton"],r=["inputField"],d=["selectField"];function c(e,t){if(1&e&&(n.j41(0,"h2",7),n.nrm(1,"system-label",8),n.k0s()),2&e){const e=n.XpG();n.R7$(),n.Y8G("label",e.headertext)}}function u(e,t){if(1&e&&(n.j41(0,"div"),n.EFF(1),n.k0s()),2&e){const e=t.$implicit;n.R7$(),n.JRh(e)}}function m(e,t){if(1&e&&(n.j41(0,"div",12),n.DNE(1,u,2,1,"div",13),n.k0s()),2&e){const e=n.XpG(2);n.R7$(),n.Y8G("ngForOf",e.splitText)}}function h(e,t){if(1&e){const e=n.RV6();n.j41(0,"system-input-date",23),n.mxI("ngModelChange",(function(t){n.eBV(e);const s=n.XpG(4);return n.DH7(s.value,t)||(s.value=t),n.Njj(t)})),n.k0s()}if(2&e){const e=n.XpG(4);n.R50("ngModel",e.value)}}function g(e,t){if(1&e){const e=n.RV6();n.j41(0,"div",24)(1,"div",15)(2,"textarea",25),n.mxI("ngModelChange",(function(t){n.eBV(e);const s=n.XpG(4);return n.DH7(s.value,t)||(s.value=t),n.Njj(t)})),n.k0s()()()}if(2&e){const e=n.XpG(4);n.R7$(2),n.R50("ngModel",e.value)}}function p(e,t){if(1&e){const e=n.RV6();n.qex(0),n.j41(1,"input",26,27),n.mxI("ngModelChange",(function(t){n.eBV(e);const s=n.XpG(4);return n.DH7(s.value,t)||(s.value=t),n.Njj(t)})),n.k0s(),n.j41(3,"button",28),n.bIt("click",(function(){n.eBV(e);const t=n.XpG(4);return n.Njj(t.value="")})),n.nrm(4,"system-button-icon",29),n.k0s(),n.bVm()}if(2&e){const e=n.XpG(4);n.R7$(),n.R50("ngModel",e.value),n.R7$(2),n.Y8G("disabled",!e.value)}}function f(e,t){if(1&e&&(n.j41(0,"div",18),n.qex(1,19),n.DNE(2,h,1,1,"system-input-date",20)(3,g,3,1,"div",21)(4,p,5,2,"ng-container",22),n.bVm(),n.k0s()),2&e){const e=n.XpG(3);n.R7$(),n.Y8G("ngSwitch",e.type),n.R7$(),n.Y8G("ngSwitchCase","input_date"),n.R7$(),n.Y8G("ngSwitchCase","input_text")}}function b(e,t){if(1&e&&(n.j41(0,"option",36),n.EFF(1),n.k0s()),2&e){const e=t.$implicit;n.Y8G("value",e.value),n.R7$(),n.SpI(" ",e.display," ")}}function y(e,t){if(1&e){const e=n.RV6();n.j41(0,"div",32)(1,"select",33,34),n.mxI("ngModelChange",(function(t){n.eBV(e);const s=n.XpG(4);return n.DH7(s.value,t)||(s.value=t),n.Njj(t)})),n.DNE(3,b,2,2,"option",35),n.k0s()()}if(2&e){const e=n.XpG(4);n.R7$(),n.R50("ngModel",e.value),n.R7$(2),n.Y8G("ngForOf",e.options)}}function v(e,t){if(1&e){const e=n.RV6();n.j41(0,"system-input-radio",38),n.mxI("ngModelChange",(function(t){n.eBV(e);const s=n.XpG(5);return n.DH7(s.value,t)||(s.value=t),n.Njj(t)})),n.EFF(1),n.k0s()}if(2&e){const e=t.$implicit,s=n.XpG(5);n.Y8G("name",s.radioGroupName)("value",e.value),n.R50("ngModel",s.value),n.R7$(),n.SpI(" ",e.display," ")}}function k(e,t){if(1&e&&n.DNE(0,v,2,4,"system-input-radio",37),2&e){const e=n.XpG(4);n.Y8G("ngForOf",e.options)}}function R(e,t){if(1&e&&(n.qex(0),n.DNE(1,y,4,2,"div",30)(2,k,1,1,"ng-template",null,31,n.C5r),n.bVm()),2&e){const e=n.sdS(3),t=n.XpG(3);n.R7$(),n.Y8G("ngIf","radio"!==t.optionsAs)("ngIfElse",e)}}function I(e,t){if(1&e&&(n.j41(0,"div",14)(1,"div",15),n.DNE(2,f,5,3,"div",16)(3,R,4,2,"ng-container",17),n.k0s()()),2&e){const e=n.XpG(2);n.R7$(2),n.Y8G("ngIf",!e.options),n.R7$(),n.Y8G("ngIf",e.options&&"button"!==e.optionsAs)}}function x(e,t){if(1&e&&(n.j41(0,"div",9),n.DNE(1,m,2,1,"div",10)(2,I,4,2,"div",11),n.k0s()),2&e){const e=n.XpG();n.R7$(),n.Y8G("ngIf",e.text),n.R7$(),n.Y8G("ngIf",e.type.startsWith("input"))}}function j(e,t){if(1&e){const e=n.RV6();n.j41(0,"button",42,43),n.bIt("click",(function(){n.eBV(e);const t=n.XpG(2);return n.Njj(t.clickCancel())})),n.nrm(2,"system-label",44),n.k0s()}}function G(e,t){if(1&e){const e=n.RV6();n.qex(0),n.DNE(1,j,3,0,"button",39),n.j41(2,"button",40,41),n.bIt("click",(function(){n.eBV(e);const t=n.XpG();return n.Njj(t.clickOK())})),n.EFF(4,"OK"),n.k0s(),n.bVm()}if(2&e){const e=n.XpG();n.R7$(),n.Y8G("ngIf","info"!==e.type),n.R7$(),n.Y8G("disabled",!e.canSubmit)}}function C(e,t){if(1&e){const e=n.RV6();n.j41(0,"button",46),n.bIt("click",(function(){const t=n.eBV(e).$implicit,s=n.XpG(2);return n.Njj(s.clickButtonGroup(t.value))})),n.nrm(1,"system-label",8),n.k0s()}if(2&e){const e=t.$implicit;n.R7$(),n.Y8G("label",e.display)}}function w(e,t){if(1&e&&n.DNE(0,C,2,1,"button",45),2&e){const e=n.XpG();n.Y8G("ngForOf",e.options)}}let S=(()=>{class SystemPrompt{constructor(e){this.language=e,this.value=null,this.optionsAsRadio=!1,this.answer=null,this.answerSubject=null,this.answerSubject=new i.B,this.answer=this.answerSubject.asObservable(),this.radioGroupName=_.uniqueId("system-prompt-group-name-")}get splitText(){return this.text?this.language.getLabel(this.text,void 0,"long").split(/(?:\r\n|\r|\n)/g):[]}ngOnInit(){this.theme||(this.theme="shade"),!0===this.optionsAsRadio&&(this.optionsAs="radio")}ngAfterViewInit(){"confirm"===this.type?this.cancelButton.nativeElement.focus():"info"===this.type?this.okButton.nativeElement.focus():this.type.startsWith("input")&&(this.inputField?this.inputField.nativeElement.focus():this.selectField&&this.selectField.nativeElement.focus())}get canSubmit(){if(!this.type.startsWith("input"))return!0;if(!this.value)return!1;if(this.regex){return new RegExp(this.regex).test(String(this.value))}return!0}clickOK(){this.type.startsWith("input")?this.answerSubject.next(this.value):this.answerSubject.next(!0),this.answerSubject.complete(),this.self.destroy()}clickCancel(){this.answerSubject.next(!1),this.answerSubject.complete(),this.self.destroy()}onModalEscX(){if("info"===this.type||"button"===this.optionsAs)return!1;this.clickCancel()}clickButtonGroup(e){this.answerSubject.next(e),this.answerSubject.complete(),this.self.destroy()}static#e=this.ɵfac=function(e){return new(e||SystemPrompt)(n.rXU(l.B))};static#t=this.ɵcmp=n.VBU({type:SystemPrompt,selectors:[["system-prompt"]],viewQuery:function(e,t){if(1&e&&(n.GBs(o,5),n.GBs(a,5),n.GBs(r,5),n.GBs(d,5)),2&e){let e;n.mGM(e=n.lsd())&&(t.cancelButton=e.first),n.mGM(e=n.lsd())&&(t.okButton=e.first),n.mGM(e=n.lsd())&&(t.inputField=e.first),n.mGM(e=n.lsd())&&(t.selectField=e.first)}},inputs:{type:"type",text:"text",headertext:"headertext",theme:"theme",value:"value",options:"options",optionsAsRadio:"optionsAsRadio",optionsAs:"optionsAs"},decls:9,vars:9,consts:[["role","alertdialog",1,"slds-modal","slds-fade-in-open","slds-modal_prompt"],[1,"slds-modal__container"],["class","slds-text-heading_medium slds-hyphenate",4,"ngIf"],["class","slds-modal__content slds-text-align_center ",4,"ngIf"],[1,"slds-modal__footer"],[4,"ngIf","ngIfElse"],["optionButtonContainer",""],[1,"slds-text-heading_medium","slds-hyphenate"],[3,"label"],[1,"slds-modal__content","slds-text-align_center"],["class","slds-m-vertical_medium",4,"ngIf"],["class","slds-form-element slds-m-vertical_medium",4,"ngIf"],[1,"slds-m-vertical_medium"],[4,"ngFor","ngForOf"],[1,"slds-form-element","slds-m-vertical_medium"],[1,"slds-form-element__control"],["class","slds-form-element__control slds-input-has-icon slds-input-has-icon_right",4,"ngIf"],[4,"ngIf"],[1,"slds-form-element__control","slds-input-has-icon","slds-input-has-icon_right"],[3,"ngSwitch"],[3,"ngModel","ngModelChange",4,"ngSwitchCase"],["class","slds-form-element",4,"ngSwitchCase"],[4,"ngSwitchDefault"],[3,"ngModel","ngModelChange"],[1,"slds-form-element"],[1,"slds-textarea",2,"height","200px",3,"ngModel","ngModelChange"],["type","text",1,"slds-input",3,"ngModel","ngModelChange"],["inputField",""],[1,"slds-input__icon","slds-input__icon_right","slds-button","slds-button--icon",3,"disabled","click"],["icon","clear"],["class","slds-select_container",4,"ngIf","ngIfElse"],["radioGroupContainer",""],[1,"slds-select_container"],[1,"slds-select",3,"ngModel","ngModelChange"],["selectField",""],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["style","display: block",3,"name","value","ngModel","ngModelChange",4,"ngFor","ngForOf"],[2,"display","block",3,"name","value","ngModel","ngModelChange"],["class","slds-button slds-button--neutral",3,"click",4,"ngIf"],[1,"slds-button","slds-button--brand",3,"disabled","click"],["okButton",""],[1,"slds-button","slds-button--neutral",3,"click"],["cancelButton",""],["label","LBL_CANCEL"],["class","slds-button slds-button--brand",3,"click",4,"ngFor","ngForOf"],[1,"slds-button","slds-button--brand",3,"click"]],template:function(e,t){if(1&e&&(n.j41(0,"section",0)(1,"div",1)(2,"header"),n.DNE(3,c,2,1,"h2",2),n.k0s(),n.DNE(4,x,3,2,"div",3),n.j41(5,"footer",4),n.DNE(6,G,5,2,"ng-container",5)(7,w,1,1,"ng-template",null,6,n.C5r),n.k0s()()()),2&e){const e=n.sdS(8);n.R7$(2),n.ZvI("slds-modal__header slds-theme_",t.theme,""),n.xc7("height",t.headertext?"auto":"1rem"),n.R7$(),n.Y8G("ngIf",t.headertext),n.R7$(),n.Y8G("ngIf",t.text||t.type.startsWith("input")),n.R7$(2),n.Y8G("ngIf","button"!==t.optionsAs)("ngIfElse",e)}},encapsulation:2})}return SystemPrompt})()},34411:(e,t,s)=>{"use strict";s.d(t,{K:()=>Y});var i=s(54438),n=s(84341),l=s(60177),o=s(4466),a=s(44065);function r(e){e.conversion.for("upcast").elementToAttribute({view:{name:"a",key:"data-mention",classes:"mention",attributes:{href:!0,"data-bean-id":!0,"data-module":!0}},model:{key:"mention",value:t=>e.plugins.get("Mention").toMentionAttribute(t,{link:t.getAttribute("href"),beanId:t.getAttribute("data-bean-id"),module:t.getAttribute("data-module")})},converterPriority:"high"}),e.conversion.for("downcast").attributeToElement({model:"mention",view:(e,{writer:t})=>{if(e)return t.createAttributeElement("a",{class:"mention","data-mention":e.id,"data-bean-id":e.beanId,"data-module":e.module,href:e.link},{priority:20,id:e.uid})},converterPriority:"high"})}var d=s(69747),c=s(50531),u=s(82802),m=s(83935),h=s(69904),g=s(345),p=s(53584),f=s(35911),b=s(65029),y=s(13562),v=s(32130),_=s(25863),k=s(205);const R=["ckEditor"];function I(e,t){if(1&e){const e=i.RV6();i.j41(0,"ul",9)(1,"li")(2,"button",30),i.bIt("click",(function(){i.eBV(e);const t=i.XpG(2);return i.Njj(t.executeCommand("undo"))})),i.nrm(3,"system-button-icon",31),i.j41(4,"span",32),i.EFF(5,"undo"),i.k0s()()(),i.j41(6,"li")(7,"button",25),i.bIt("click",(function(){i.eBV(e);const t=i.XpG(2);return i.Njj(t.executeCommand("redo"))})),i.nrm(8,"system-button-icon",33),i.j41(9,"span",32),i.EFF(10,"redo"),i.k0s()()()()}if(2&e){const e=i.XpG(2);i.R7$(2),i.Y8G("title",e.language.getLabel("LBL_UNDO")),i.R7$(5),i.Y8G("title",e.language.getLabel("LBL_REDO"))}}function x(e,t){if(1&e&&(i.j41(0,"option",47),i.EFF(1),i.k0s()),2&e){const e=t.$implicit;i.FS9("value",e.id),i.R7$(),i.JRh(e.display)}}function j(e,t){if(1&e){const e=i.RV6();i.j41(0,"div",34)(1,"div",35)(2,"div",36)(3,"div",37)(4,"div",38)(5,"select",39),i.mxI("ngModelChange",(function(t){i.eBV(e);const s=i.XpG(2);return i.DH7(s.block,t)||(s.block=t),i.Njj(t)})),i.bIt("change",(function(){i.eBV(e);const t=i.XpG(2);return i.Njj(t.heading(t.block))})),i.j41(6,"option",40),i.EFF(7,"Heading 2"),i.k0s(),i.j41(8,"option",41),i.EFF(9,"Heading 3"),i.k0s(),i.j41(10,"option",42),i.EFF(11,"Heading 4"),i.k0s(),i.j41(12,"option",43),i.EFF(13,"Paragraph"),i.k0s()()()()()(),i.j41(14,"div",35)(15,"div",36)(16,"div",37)(17,"div",38)(18,"select",44),i.bIt("change",(function(t){i.eBV(e);const s=i.XpG(2);return i.Njj(s.customStyle(t.target.value))})),i.j41(19,"option",45),i.EFF(20,"—"),i.k0s(),i.DNE(21,x,2,2,"option",46),i.k0s()()()()()()}if(2&e){const e=i.XpG(2);i.R7$(5),i.R50("ngModel",e.block),i.R7$(16),i.Y8G("ngForOf",e.customStyleDefinitions)}}const G=e=>({selected:e});function C(e,t){if(1&e){const e=i.RV6();i.j41(0,"li",62)(1,"span",63),i.bIt("click",(function(){const t=i.eBV(e).$implicit,s=i.XpG().$implicit,n=i.XpG(3);return i.Njj(n.selectTable(s,t))})),i.nrm(2,"span",64),i.k0s()()}if(2&e){const e=t.$implicit,s=i.XpG().$implicit,n=i.XpG(3);i.R7$(),i.Y8G("ngClass",i.eq3(1,G,s<=n.selectedRow&&e<=n.selectedColumn))}}const w=()=>[1,2,3,4,5,6,7,8,9,10];function S(e,t){1&e&&(i.j41(0,"li")(1,"ul",60),i.DNE(2,C,3,3,"li",61),i.k0s()()),2&e&&(i.R7$(2),i.Y8G("ngForOf",i.lJ4(1,w)))}function E(e,t){if(1&e){const e=i.RV6();i.j41(0,"div")(1,"section",48)(2,"div",49)(3,"div",50)(4,"div",51)(5,"div",52),i.EFF(6),i.k0s(),i.j41(7,"div",53)(8,"ul"),i.DNE(9,S,3,2,"li",54),i.k0s()(),i.nrm(10,"div",55),i.k0s()()(),i.j41(11,"footer",56)(12,"div",57)(13,"button",58),i.bIt("click",(function(){i.eBV(e);const t=i.XpG(2);return i.Njj(t.cancelTable())})),i.EFF(14,"Cancel "),i.k0s(),i.j41(15,"button",59),i.bIt("click",(function(){i.eBV(e);const t=i.XpG(2);return i.Njj(t.insertTable())})),i.EFF(16,"Done "),i.k0s()()()()()}if(2&e){const e=i.XpG(2);i.R7$(6),i.Lme("",e.selectedRow," × ",e.selectedColumn,""),i.R7$(3),i.Y8G("ngForOf",i.lJ4(3,w))}}function L(e,t){if(1&e){const e=i.RV6();i.j41(0,"li")(1,"button",25),i.bIt("click",(function(){i.eBV(e);const t=i.XpG(3);return i.Njj(t.openMediaFilePicker())})),i.nrm(2,"system-button-icon",69),i.k0s()()}if(2&e){const e=i.XpG(3);i.R7$(),i.Y8G("title",e.language.getLabel("LBL_NEW_IMAGE"))}}function D(e,t){if(1&e){const e=i.RV6();i.j41(0,"ul",9)(1,"li")(2,"button",25),i.bIt("click",(function(){i.eBV(e);const t=i.XpG(2);return i.Njj(t.insertImage())})),i.nrm(3,"system-button-icon",65),i.k0s()(),i.DNE(4,L,3,1,"li",18),i.j41(5,"li")(6,"button",66),i.bIt("click",(function(){i.eBV(e);const t=i.XpG(2);return i.Njj(t.addVideo())})),i.nrm(7,"system-button-icon",67),i.k0s()(),i.j41(8,"li")(9,"button",25),i.bIt("click",(function(){i.eBV(e);const t=i.XpG(2);return i.Njj(t.addCodeSnippet())})),i.nrm(10,"system-button-icon",68),i.k0s()()()}if(2&e){const e=i.XpG(2);i.R7$(2),i.Y8G("title",e.language.getLabel("LBL_NEW_IMAGE")),i.R7$(2),i.Y8G("ngIf",e.useMedialFile),i.R7$(2),i.Y8G("title",e.language.getLabel("LBL_ADD_VIDEO")),i.R7$(3),i.Y8G("title",e.language.getLabel("LBL_ADD_CODE_SNIPPET"))}}function F(e,t){if(1&e){const e=i.RV6();i.j41(0,"li")(1,"button",66),i.bIt("click",(function(){i.eBV(e);const t=i.XpG(3);return i.Njj(t.openTemplateVariableHelper())})),i.nrm(2,"system-button-icon",70),i.k0s()()}if(2&e){const e=i.XpG(3);i.R7$(),i.Y8G("title",e.language.getLabel("LBL_TEMPLATE_VARIABLE_HELPER"))}}function M(e,t){if(1&e){const e=i.RV6();i.j41(0,"li")(1,"button",66),i.bIt("click",(function(){i.eBV(e);const t=i.XpG(3);return i.Njj(t.openTextSnippetModal())})),i.nrm(2,"system-button-icon",71),i.k0s()()}if(2&e){const e=i.XpG(3);i.R7$(),i.Y8G("title",e.language.getLabel("LBL_INSERT_TEXT_SNIPPET"))}}function T(e,t){if(1&e&&(i.j41(0,"ul",9),i.DNE(1,F,3,1,"li",18)(2,M,3,1,"li",18),i.k0s()),2&e){const e=i.XpG(2);i.R7$(),i.Y8G("ngIf",e.displayTemplateVariableHelper),i.R7$(),i.Y8G("ngIf",e.displayTextSnippet)}}function B(e,t){if(1&e){const e=i.RV6();i.j41(0,"ul",9)(1,"li")(2,"button",25),i.bIt("click",(function(){i.eBV(e);const t=i.XpG(2);return i.Njj(t.toggleFullscreen())})),i.nrm(3,"system-button-icon",72),i.k0s()()()}if(2&e){const e=i.XpG(2);i.R7$(2),i.Y8G("title",e.language.getLabel("LBL_EXPAND")),i.R7$(),i.Y8G("icon",e.expandIcon)}}const $=e=>({"slds-active":e});function O(e,t){if(1&e){const e=i.RV6();i.j41(0,"div",6),i.DNE(1,I,11,2,"ul",7)(2,j,22,2,"div",8),i.j41(3,"ul",9)(4,"li")(5,"button",10),i.bIt("click",(function(){i.eBV(e);const t=i.XpG();return i.Njj(t.executeCommand("bold"))})),i.nrm(6,"system-button-icon",11),i.k0s()(),i.j41(7,"li")(8,"button",10),i.bIt("click",(function(){i.eBV(e);const t=i.XpG();return i.Njj(t.executeCommand("italic"))})),i.nrm(9,"system-button-icon",12),i.k0s()(),i.j41(10,"li")(11,"button",10),i.bIt("click",(function(){i.eBV(e);const t=i.XpG();return i.Njj(t.executeCommand("underline"))})),i.nrm(12,"system-button-icon",13),i.k0s()(),i.j41(13,"li")(14,"button",10),i.bIt("click",(function(){i.eBV(e);const t=i.XpG();return i.Njj(t.executeCommand("strikethrough"))})),i.nrm(15,"system-button-icon",14),i.k0s()()(),i.j41(16,"ul",9)(17,"li")(18,"button",10),i.bIt("click",(function(){i.eBV(e);const t=i.XpG();return i.Njj(t.executeCommand("bulletedList"))})),i.nrm(19,"system-button-icon",15),i.k0s()(),i.j41(20,"li")(21,"button",10),i.bIt("click",(function(){i.eBV(e);const t=i.XpG();return i.Njj(t.executeCommand("numberedList"))})),i.nrm(22,"system-button-icon",16),i.k0s()(),i.j41(23,"li")(24,"button",10),i.bIt("click",(function(){i.eBV(e);const t=i.XpG();return i.Njj(t.openTable())})),i.nrm(25,"system-button-icon",17),i.k0s(),i.DNE(26,E,17,4,"div",18),i.k0s()(),i.j41(27,"ul",9)(28,"li")(29,"button",10),i.bIt("click",(function(){i.eBV(e);const t=i.XpG();return i.Njj(t.executeCommand("indent"))})),i.nrm(30,"system-button-icon",19),i.k0s()(),i.j41(31,"li")(32,"button",10),i.bIt("click",(function(){i.eBV(e);const t=i.XpG();return i.Njj(t.executeCommand("outdent"))})),i.nrm(33,"system-button-icon",20),i.k0s()()(),i.j41(34,"ul",9)(35,"li")(36,"button",10),i.bIt("click",(function(){i.eBV(e);const t=i.XpG();return i.Njj(t.alignment("left"))})),i.nrm(37,"system-button-icon",21),i.k0s()(),i.j41(38,"li")(39,"button",10),i.bIt("click",(function(){i.eBV(e);const t=i.XpG();return i.Njj(t.alignment("center"))})),i.nrm(40,"system-button-icon",22),i.k0s()(),i.j41(41,"li")(42,"button",10),i.bIt("click",(function(){i.eBV(e);const t=i.XpG();return i.Njj(t.alignment("right"))})),i.nrm(43,"system-button-icon",23),i.k0s()(),i.j41(44,"li")(45,"button",10),i.bIt("click",(function(){i.eBV(e);const t=i.XpG();return i.Njj(t.alignment("justify"))})),i.nrm(46,"system-button-icon",24),i.k0s()()(),i.j41(47,"ul",9)(48,"li")(49,"button",25),i.bIt("click",(function(){i.eBV(e);const t=i.XpG();return i.Njj(t.insertLink())})),i.nrm(50,"system-button-icon",26),i.k0s()(),i.j41(51,"li")(52,"button",25),i.bIt("click",(function(){i.eBV(e);const t=i.XpG();return i.Njj(t.executeCommand("unlink"))})),i.nrm(53,"system-button-icon",27),i.k0s()()(),i.DNE(54,D,11,4,"ul",7)(55,T,3,2,"ul",7),i.j41(56,"ul",9)(57,"li")(58,"button",25),i.bIt("click",(function(){i.eBV(e);const t=i.XpG();return i.Njj(t.executeCommand("removeFormat"))})),i.nrm(59,"system-button-icon",28),i.k0s()()(),i.DNE(60,B,4,2,"ul",7),i.j41(61,"ul",29),i.SdG(62),i.k0s()()}if(2&e){const e=i.XpG();i.R7$(),i.Y8G("ngIf",e.extendedmode),i.R7$(),i.Y8G("ngIf",e.extendedmode),i.R7$(3),i.Y8G("title",e.language.getLabel("LBL_BOLD"))("ngClass",i.eq3(35,$,e.commandIsActive("bold"))),i.R7$(3),i.Y8G("title",e.language.getLabel("LBL_ITALIC"))("ngClass",i.eq3(37,$,e.commandIsActive("italic"))),i.R7$(3),i.Y8G("title",e.language.getLabel("LBL_UNDERLINE"))("ngClass",i.eq3(39,$,e.commandIsActive("underline"))),i.R7$(3),i.Y8G("title",e.language.getLabel("LBL_STRIKETHROUGH"))("ngClass",i.eq3(41,$,e.commandIsActive("strikethrough"))),i.R7$(4),i.Y8G("title",e.language.getLabel("LBL_BULLETED_LIST"))("ngClass",i.eq3(43,$,e.commandIsActive("bulletedList"))),i.R7$(3),i.Y8G("title",e.language.getLabel("LBL_NUMBERED_LIST"))("ngClass",i.eq3(45,$,e.commandIsActive("numberedList"))),i.R7$(3),i.Y8G("title",e.language.getLabel("LBL_TABLE"))("ngClass",i.eq3(47,$,e.commandIsActive("insertTable"))),i.R7$(2),i.Y8G("ngIf",e.isShow),i.R7$(3),i.Y8G("title",e.language.getLabel("LBL_TEXT_INDENT"))("ngClass",i.eq3(49,$,e.commandIsActive("indentBlock"))),i.R7$(3),i.Y8G("title",e.language.getLabel("LBL_TEXT_OUTDENT"))("ngClass",i.eq3(51,$,e.commandIsActive("outdentBlock"))),i.R7$(4),i.Y8G("title",e.language.getLabel("LBL_LEFT_ALIGN"))("ngClass",i.eq3(53,$,e.commandIsActive("justifyLeft"))),i.R7$(3),i.Y8G("title",e.language.getLabel("LBL_CENTER_ALIGN"))("ngClass",i.eq3(55,$,e.commandIsActive("justifyCenter"))),i.R7$(3),i.Y8G("title",e.language.getLabel("LBL_RIGHT_ALIGN"))("ngClass",i.eq3(57,$,e.commandIsActive("justifyRight"))),i.R7$(3),i.Y8G("title",e.language.getLabel("LBL_ALIGN_TEXT"))("ngClass",i.eq3(59,$,e.commandIsActive("justifyFull"))),i.R7$(4),i.Y8G("title",e.language.getLabel("LBL_LINK")),i.R7$(3),i.Y8G("title",e.language.getLabel("LBL_REMOVE_LINK")),i.R7$(2),i.Y8G("ngIf",e.extendedmode),i.R7$(),i.Y8G("ngIf",e.displayTemplateVariableHelper||e.displayTextSnippet),i.R7$(3),i.Y8G("title",e.language.getLabel("LBL_REMOVE_FORMATTING")),i.R7$(2),i.Y8G("ngIf",e.extendedmode)}}function X(e,t){if(1&e&&i.nrm(0,"link",73),2&e){const e=i.XpG();i.Y8G("href",e.cssContent,i.f$h)}}const U=["*"];let Y=(()=>{class SystemRichTextEditor{get displayTemplateVariableHelper(){return this.model?.module in{OutputTemplates:!0,EmailTemplates:!0,CampaignTasks:!0,LandingPages:!0,Mailboxes:!0,TextSnippets:!0}}get displayTextSnippet(){return this.metadata.checkModuleAcl("TextSnippets","list")&&this.metadata.checkModuleAcl("TextSnippets","view")}constructor(e,t,s,n,l,o,a,r,d,c,u,m,h,g,p,f){this.modal=e,this.renderer=t,this.libLoader=s,this.metadata=n,this.editorService=l,this._document=o,this.elementRef=a,this.language=r,this.zone=d,this.sanitizer=c,this.viewContainerRef=u,this.configurationService=m,this.model=h,this.appRef=g,this.fts=p,this.helper=f,this.isLoading=!1,this.extendedmode=!0,this.readOnly=!1,this.useMedialFile=!1,this._html="",this.isActive=!1,this.isShow=!1,this.modalOpen=!1,this.isExpanded=!1,this.block="default",this.fontName="Tilium Web",this.fontSize="5",this.tagMap={BLOCKQUOTE:"indent",A:"link"},this.save$=new i.bkB,this.select=["H1","H2","H3","H4","H5","H6","P","PRE","DIV"],this.customStyleDefinitions=[]}get expandIcon(){return this.isExpanded?"contract_alt":"expand_alt"}get innerHeight(){return this.innerheight&&this.innerheight.indexOf("px")>-1?this.innerheight.substring(0,this.innerheight.indexOf("px")):this.innerheight?this.innerheight:"250"}get richTextStyle(){return this.isExpanded?{height:"100vh",resize:"none",position:"fixed"}:{height:+this.innerHeight+(this.readOnly?0:50)+"px"}}ngOnInit(){this.loadCustomStyleDefinitions(),this.libLoader.loadLib("ckeditor").subscribe((e=>{this.zone.runOutsideAngular((()=>{ClassicEditor.create(this.ckEditor.element.nativeElement,{removePlugins:["Markdown","Title"],extraPlugins:[r],mention:{feeds:[{marker:"@",feed:e=>this.getMentionItems(e),minimumCharacters:2,itemRenderer:e=>this.customMentionRenderer(e)}]},style:{definitions:this.customStyleDefinitions.map((e=>({name:e.id,element:e.element,classes:e.classes})))},image:{styles:["alignCenter","alignLeft","alignRight"],resizeOptions:[{name:"resizeImage:original",label:"Original size",value:null},{name:"resizeImage:50",label:"50%",value:"50"},{name:"resizeImage:75",label:"75%",value:"75"}],toolbar:["imageTextAlternative","|","imageStyle:inline","imageStyle:wrapText","imageStyle:breakText","imageStyle:side","|","resizeImage"]},toolbar:[],htmlSupport:{allow:this.generateHtmlTagsAllowAttributes(["div","img","span","table","p","h1","h2","h3","h4","input","fieldset","button","label","textarea","select","option","optgroup"])},autosave:{save:e=>this.onChange(e.getData())}}).then((e=>{this.editor=e,this.readOnly&&this.editor.enableReadOnlyMode("efsjeflksjefloikjse"),this.editor.editing.view.change((e=>{e.setStyle("height","100%",this.editor.editing.view.document.getRoot())})),this.editor.setData(this._html)}))}))})),this.handleKeyboardShortcuts()}getMentionItems(e){return new Promise(((t,s)=>{const i=this.metadata.getMentionSearchModules();if(0==i.length)return t([]);this.fts.searchByModules({searchterm:e,modules:i}).subscribe({next:()=>{let e=[];this.fts.moduleSearchresults.forEach((t=>{e=e.concat(t.data.hits.map((e=>({id:`@${e._source.summary_text}`,beanId:e._source.id,name:e._source.summary_text,module:t.module,link:"javascript:void(0)"}))))})),t(e)},error:()=>s([])})}))}customMentionRenderer(e){const t=document.createElement("div"),s=(0,i.a0P)(d.N,{environmentInjector:this.appRef.injector,hostElement:t});return s.instance.name=e.name,s.instance.module=e.module,s.changeDetectorRef.detectChanges(),s.destroy(),t}loadCustomStyleDefinitions(){this.stylesheetId&&this.metadata.getHtmlFormats(this.stylesheetId).forEach((e=>{this.customStyleDefinitions.push({display:e.name,id:e.id,classes:e.classes?e.classes.trim().split(/\s+/):[],element:e.block?e.block:e.inline?e.inline:""})}))}generateHtmlTagsAllowAttributes(e){return e.map((e=>({name:e,attributes:{"data-trackinglink":!0,"data-marketingaction":!0,"data-spicefor":!0,"data-spiceif":!0,"data-spicefor-first":!0,"data-spicefor-last":!0,"data-spicefor-inner":!0,"data-spicefor-even":!0,"data-spicefor-odd":!0,"data-spicetemplate":!0,"data-signature":!0,"data-spice-reply-quote":!0,"data-spice-temp-quote":!0,class:!0,style:!0,value:!0,type:!0,id:!0,name:!0,for:!0,checked:!0,selected:!0,size:!0,autocomplete:!0,autofocus:!0,placeholder:!0,max:!0,maxlength:!0,min:!0,minlength:!0,multiple:!0,required:!0,disabled:!0,form:!0,step:!0,readonly:!0,cols:!0,rows:!0,wrap:!0,label:!0,width:!0,height:!0}})))}ngOnDestroy(){this.clickListener&&this.clickListener(),this.keydownListener&&this.keydownListener()}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}writeValue(e){this._html=e||"",this.editor&&this.editor.setData(e)}executeCommand(e){this.isActive&&e&&this.editor.execute(e)}toggleFullscreen(){this.isExpanded=!this.isExpanded}heading(e){this.editor.execute("heading",{value:e})}customStyle(e){e&&this.editor.execute("style",e)}openTable(){this.isShow=!this.isShow,this.selectedColumn=this.selectedRow=0}selectTable(e,t){this.selectedColumn=t,this.selectedRow=e}insertTable(){this.editor.execute("insertTable",{rows:this.selectedRow,columns:this.selectedColumn}),this.isShow=!1}cancelTable(){this.isShow=!1}alignment(e){this.editor.execute("alignment",{value:e})}onEditorClick(e){this.isActive||(this.isActive=!0,this.clickListener=this.renderer.listen("document","click",(e=>this.onDocumentClick(e)))),e.stopPropagation()}onDocumentClick(e){this.modalOpen||this.elementRef.nativeElement.contains(e.target)||(this.isActive=!1,this.clickListener())}exec(){let e;window.getSelection&&(e=window.getSelection());let t=e.focusNode;const s=[];for(;t&&"editor"!==t.id;)s.unshift(t),t=t.parentNode;this.triggerBlocks(s)}insertImage(){this.modal.input(this.language.getLabel("LBL_IMAGE_LINK",this.language.getLabel("LBL_IMAGE"))).subscribe((e=>{e&&this.editor.execute("imageInsert",{source:[{src:e}]})}))}openMediaFilePicker(){this.modalOpen=!0,this.modal.openModal("MediaFilePicker").subscribe((e=>{e.instance.answer.subscribe((e=>{if(!e)return;const t=this.configurationService.getCapabilityConfig("mediafiles");e.upload?this.modal.openModal("MediaFileUploader").subscribe((e=>{e.instance.answer.subscribe((e=>{e&&this.editor.execute("imageInsert",{source:[{src:t.public_url+e}]}),this.modalOpen=!1}))})):(e.id&&this.editor.execute("imageInsert",{source:[{src:t.public_url+e.id}]}),this.modalOpen=!1)}))}))}commandIsActive(e){return this.isActive&&this._document.queryCommandState(e)}triggerBlocks(e){if(!this.isActive)return;let t=!1;this.select.forEach((s=>{const i=e.find((e=>e.nodeName===s));void 0===i||s!==i.nodeName&&"code"!=i.nodeName?!1===t&&(this.block="default"):!1===t&&(this.block=i.nodeName.toLowerCase(),t=!0)})),t=!1}insertLink(){this.modal.input("","LBL_ADD_LINK").subscribe((e=>{e&&this.editor.execute("link",e)}))}addVideo(){this.isActive&&this.modal.input("","LBL_ADD_VIDEO").subscribe((e=>{e&&this.editor.execute("mediaEmbed",e)}))}getSelectedText(){return window.getSelection?window.getSelection().toString():this._document.selection&&"Control"!=this._document.selection.type?this._document.selection.createRange().text:void 0}insertColor(e,t){this.editorService.insertColor(e,t)}setFontName(e){this.editorService.setFontName(e)}setFontSize(e){this.editorService.setFontSize(e)}onFileChanged(e){}setCustomClass(e){}encodeHtml(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}addCodeSnippet(){if(!this.isActive)return;this.modal.prompt("input","","LBL_SELECT_LANGUAGE","shade",void 0,[{value:"plaintext",display:"Plain text"},{value:"c",display:"C"},{value:"cs",display:"C#"},{value:"cpp",display:"C++"},{value:"css",display:"CSS"},{value:"diff",display:"Diff"},{value:"html",display:"HTML"},{value:"java",display:"Java"},{value:"javascript",display:"JavaScript"},{value:"php",display:"PHP"},{value:"python",display:"Python"},{value:"ruby",display:"Ruby"},{value:"typescript",display:"TypeScript"},{value:"xml",display:"XML"}],!0).subscribe((e=>{e&&this.editor.execute("codeBlock",{language:e,forceValue:!0})}))}handleKeyboardShortcuts(){this.keydownListener=this.renderer.listen("document","keydown",(e=>{(window.navigator.platform.match("Mac")?e.metaKey:e.ctrlKey)&&"s"==e.key.toLowerCase()&&(e.preventDefault(),this.save$.emit(this._html))}))}openTemplateVariableHelper(){this.isActive&&(this.modalOpen=!0,this.helper.addTemplateVariables(this.modal,this.model,this.viewContainerRef.injector).subscribe({next:e=>{this.modalOpen=!1,this.editor.model.change((t=>{this.editor.model.insertContent(t.createText(`{${e}}`))})),this.isLoading=!1},error:()=>{this.model.toast.sendToast("ERR_FAILED_TO_EXECUTE","error"),this.isLoading=!1}}))}openTextSnippetModal(){if(!this.isActive)return;const e=this.metadata.getComponentConfig("SystemRichTextEditor","TextSnippets")?.textSnippetsModuleFilter;this.isLoading=!0,this.helper.addTextSnippet("HTML",e,this.modal,this.model,this.viewContainerRef.injector).subscribe({next:e=>{e&&this.editor.model.change((t=>{const s=this.editor.data.htmlProcessor.toView(e),i=this.editor.data.toModel(s);this.editor.model.insertContent(i)})),this.isLoading=!1},error:()=>{this.model.toast.sendToast("ERR_FAILED_TO_EXECUTE","error"),this.isLoading=!1}})}getHtmlFromSelection(){let e,t=window.getSelection();t.getRangeAt?e=t.getRangeAt(0):(e=document.createRange(),e.setStart(t.anchorNode,t.anchorOffset),e.setEnd(t.focusNode,t.focusOffset));let s=e.cloneContents(),i=document.createElement("div");return i.appendChild(s),i.innerHTML}save(){this.save$.emit(this.editor.getData())}set css(e){e&&a.render(`.slds-rich-text-editor__textarea {${e}}`).then((e=>this.cssContent=this.sanitizer.bypassSecurityTrustResourceUrl("data:text/css;base64,"+btoa(e.css))))}static#e=this.ɵfac=function(e){return new(e||SystemRichTextEditor)(i.rXU(c.y),i.rXU(i.sFG),i.rXU(u.b),i.rXU(m.yu),i.rXU(o.Q),i.rXU(l.qQ),i.rXU(i.aKT),i.rXU(h.B),i.rXU(i.SKi),i.rXU(g.up),i.rXU(i.c1b),i.rXU(p.i),i.rXU(f.g,8),i.rXU(i.o8S),i.rXU(b.s),i.rXU(y.d))};static#t=this.ɵcmp=i.VBU({type:SystemRichTextEditor,selectors:[["system-richtext-editor"]],viewQuery:function(e,t){if(1&e&&i.GBs(R,7,i.c1b),2&e){let e;i.mGM(e=i.lsd())&&(t.ckEditor=e.first)}},inputs:{extendedmode:"extendedmode",readOnly:"readOnly",innerheight:"innerheight",useMedialFile:"useMedialFile",stylesheetId:"stylesheetId",css:"css"},outputs:{save$:"save$"},features:[i.Jv_([{provide:n.kq,useExisting:(0,i.Rfq)((()=>SystemRichTextEditor)),multi:!0},o.Q])],ngContentSelectors:U,decls:8,vars:4,consts:[[1,"slds-rich-text-editor","slds-grid","slds-grid_vertical","slds-nowrap","slds-grid","slds-grid--vertical","slds-theme--default",2,"top","0","right","0","left","0","bottom","0","z-index","9999",3,"ngStyle","system-overlay-loading-spinner","click"],["role","toolbar","style","top: 0; z-index: 2; position: sticky","class","slds-rich-text-editor__toolbar slds-shrink-none",4,"ngIf"],[1,"slds-grid","slds-grow",2,"min-height","0"],[1,"slds-text-color_weak","slds-grow","slds-height_full","spice-richtext-editor","slds-rich-text-editor__textarea"],["rel","stylesheet","type","text/css",3,"href",4,"ngIf"],["ckEditor",""],["role","toolbar",1,"slds-rich-text-editor__toolbar","slds-shrink-none",2,"top","0","z-index","2","position","sticky"],["class","slds-button-group-list",4,"ngIf"],["class","slds-grid slds-rich-text-editor__spacing-wrapper","role","group",4,"ngIf"],[1,"slds-button-group-list"],["aria-pressed","true","tabindex","-1",1,"slds-button","slds-button_icon","slds-button_icon-border-filled",3,"title","ngClass","click"],["icon","bold"],["icon","italic"],["icon","underline"],["icon","strikethrough"],["icon","richtextbulletedlist"],["icon","richtextnumberedlist"],["icon","table"],[4,"ngIf"],["icon","richtextindent"],["icon","richtextoutdent"],["icon","left_align_text"],["icon","center_align_text"],["icon","right_align_text"],["icon","justify_text"],["aria-pressed","true","tabindex","-1",1,"slds-button","slds-button_icon","slds-button_icon-border-filled",3,"title","click"],["icon","link"],["icon","remove_link"],["icon","remove_formatting"],[1,"slds-button-group-list","slds-grow"],["tabindex","-1","aria-pressed","true",1,"slds-button","slds-button_icon","slds-button_icon-border-filled",3,"title","click"],["icon","undo"],[1,"slds-assistive-text"],["icon","redo"],["role","group",1,"slds-grid","slds-rich-text-editor__spacing-wrapper"],[1,"slds-rich-text-editor__select"],[1,"slds-form-element"],[1,"slds-form-element__control"],[1,"slds-select_container"],[1,"slds-select",3,"ngModel","ngModelChange","change"],["value","heading2"],["value","heading3"],["value","heading4"],["value","paragraph"],[1,"slds-select",3,"change"],["value",""],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["aria-describedby","dialog-body-id-35","aria-label","Choose a color","role","dialog",1,"slds-popover","slds-color-picker__selector","slds-show",2,"position","absolute"],["id","dialog-body-id-35",1,"slds-popover__body"],[1,"slds-media"],[1,"slds-media__body"],[1,"slds-text-align--center"],["id","color-picker-default","role","tabpanel","aria-labelledby","color-picker-default__item",1,"slds-tabs_default__content","slds-show"],[4,"ngFor","ngForOf"],["id","color-picker-custom","role","tabpanel","aria-labelledby","color-picker-custom__item",1,"slds-tabs_default__content","slds-hide"],[1,"slds-popover__footer"],[1,"slds-color-picker__selector-footer","slds-p-bottom--x-small","slds-float--right"],[1,"slds-button-small","slds-m-right--small","slds-button_neutral",3,"click"],[1,"slds-button-small","slds-button_destructive",3,"click"],["role","listbox","aria-label","Preset colors",1,"slds-color-picker__swatches"],["class","slds-color-picker__swatch","role","presentation",4,"ngFor","ngForOf"],["role","presentation",1,"slds-color-picker__swatch"],["href","#","role","option","tabindex","0",1,"slds-color-picker__swatch-trigger",3,"ngClass","click"],[1,"slds-swatch",2,"height","9px","width","9px","border","solid 1px black"],["icon","image"],["tabindex","-1",1,"slds-button","slds-button_icon","slds-button_icon-border-filled",3,"title","click"],["icon","video"],["icon","snippet"],["icon","ad_set"],["icon","variable"],["icon","quick_text"],[3,"icon"],["rel","stylesheet","type","text/css",3,"href"]],template:function(e,t){1&e&&(i.NAR(),i.j41(0,"div",0),i.bIt("click",(function(e){return t.onEditorClick(e)})),i.DNE(1,O,63,61,"div",1),i.j41(2,"div",2)(3,"div",3)(4,"system-richtext-editor-content"),i.DNE(5,X,1,1,"link",4),i.nrm(6,"div",null,5),i.k0s()()()()),2&e&&(i.Y8G("ngStyle",t.richTextStyle)("system-overlay-loading-spinner",t.isLoading),i.R7$(),i.Y8G("ngIf",!t.readOnly),i.R7$(4),i.Y8G("ngIf",t.cssContent))},dependencies:[v.M,l.YU,l.Sq,l.bT,l.B3,n.xH,n.y7,n.wz,n.BC,n.vS,_.t,k.H],encapsulation:2})}return SystemRichTextEditor})()},205:(e,t,s)=>{"use strict";s.d(t,{H:()=>l});var i=s(54438);const n=["*"];let l=(()=>{class SystemRichTextEditorContent{constructor(e){this.cdRef=e,e.detach()}static#e=this.ɵfac=function(e){return new(e||SystemRichTextEditorContent)(i.rXU(i.gRc))};static#t=this.ɵcmp=i.VBU({type:SystemRichTextEditorContent,selectors:[["system-richtext-editor-content"]],ngContentSelectors:n,decls:1,vars:0,template:function(e,t){1&e&&(i.NAR(),i.SdG(0))},encapsulation:2,changeDetection:0})}return SystemRichTextEditorContent})()},69747:(e,t,s)=>{"use strict";s.d(t,{N:()=>a});var i=s(54438),n=s(60177),l=s(68823);function o(e,t){if(1&e&&i.nrm(0,"system-icon",2),2&e){const e=i.XpG();i.Y8G("module",e.module)}}let a=(()=>{class SystemRichTextEditorMentionDropdown{ngOnDestroy(){console.log("destroyed")}static#e=this.ɵfac=function(e){return new(e||SystemRichTextEditorMentionDropdown)};static#t=this.ɵcmp=i.VBU({type:SystemRichTextEditorMentionDropdown,selectors:[["system-richtext-editor-mention-dropdown"]],hostAttrs:[1,"ck-reset_all-excluded"],decls:4,vars:2,consts:[[1,"slds-grid","slds-height_full","slds-m-right--x-small","slds-grid--vertical-align-center"],[3,"module",4,"ngIf"],[3,"module"]],template:function(e,t){1&e&&(i.j41(0,"div",0),i.DNE(1,o,1,1,"system-icon",1),i.j41(2,"div"),i.EFF(3),i.k0s()()),2&e&&(i.R7$(),i.Y8G("ngIf",!!t.module),i.R7$(2),i.JRh(t.name))},dependencies:[n.bT,l.J],encapsulation:2})}return SystemRichTextEditorMentionDropdown})()},15059:(e,t,s)=>{"use strict";s.d(t,{V:()=>o});var i=s(54438),n=s(68823),l=s(43308);let o=(()=>{class SystemSearchresultStencil{static#e=this.ɵfac=function(e){return new(e||SystemSearchresultStencil)};static#t=this.ɵcmp=i.VBU({type:SystemSearchresultStencil,selectors:[["system-searchresult-stencil"]],decls:14,vars:0,consts:[["role","option",1,"slds-lookup__item-action","slds-media","slds-media--center"],["icon","empty","size","small"],[1,"slds-media__body"],[1,"slds-lookup__result-text"],[1,"slds-p-around--xx-small"],[1,"slds-lookup__result-meta","slds-text-body--small"],[1,"slds-list_horizontal","slds-has-dividers_right","slds-truncate"],[1,"slds-item"]],template:function(e,t){1&e&&(i.j41(0,"span",0),i.nrm(1,"system-icon",1),i.j41(2,"div",2)(3,"div",3)(4,"div",4),i.nrm(5,"system-stencil"),i.k0s()(),i.j41(6,"div",5)(7,"ul",6)(8,"li",7)(9,"div",4),i.nrm(10,"system-stencil"),i.k0s()(),i.j41(11,"li",7)(12,"div",4),i.nrm(13,"system-stencil"),i.k0s()()()()()())},dependencies:[n.J,l.O],encapsulation:2})}return SystemSearchresultStencil})()},12883:(e,t,s)=>{"use strict";s.d(t,{v:()=>g});var i=s(54438),n=s(69904),l=s(60177),o=s(32062),a=s(18521);function r(e,t){if(1&e){const e=i.RV6();i.j41(0,"button",6),i.bIt("click",(function(){i.eBV(e);const t=i.XpG(2);return i.Njj(t.togglePanel())})),i.nrm(1,"system-utility-icon",7),i.j41(2,"span",8),i.nrm(3,"system-label",9),i.k0s()()}if(2&e){const e=i.XpG(2);i.R7$(),i.Y8G("icon","switch")("size","x-small")("addclasses","slds-section__title-action-icon slds-button__icon slds-button__icon_left"),i.R7$(),i.FS9("title",e.language.getLabel(e.titlelabel)),i.R7$(),i.Y8G("label",e.titlelabel)}}function d(e,t){if(1&e&&(i.j41(0,"span",10),i.nrm(1,"system-label",9),i.k0s()),2&e){const e=i.XpG(2);i.FS9("title",e.language.getLabel(e.titlelabel)),i.R7$(),i.Y8G("label",e.titlelabel)}}const c=e=>({"slds-theme_shade":e});function u(e,t){if(1&e&&(i.j41(0,"h3",3),i.DNE(1,r,4,5,"button",4)(2,d,2,2,"span",5),i.k0s()),2&e){const e=i.XpG();i.Y8G("ngClass",i.eq3(3,c,e.alwaysExpanded)),i.R7$(),i.Y8G("ngIf",!e.alwaysExpanded),i.R7$(),i.Y8G("ngIf",e.alwaysExpanded)}}const m=e=>({"slds-is-open":e}),h=["*"];let g=(()=>{class SystemSection{constructor(e){this.language=e,this.titlelabel="",this.expanded=!0,this.alwaysExpanded=!1}togglePanel(){this.expanded=!this.expanded}getTabStyle(){if(!this.expanded)return{height:"0px",transform:"rotateX(90deg)"}}static#e=this.ɵfac=function(e){return new(e||SystemSection)(i.rXU(n.B))};static#t=this.ɵcmp=i.VBU({type:SystemSection,selectors:[["system-section"]],inputs:{titlelabel:"titlelabel",expanded:"expanded",alwaysExpanded:"alwaysExpanded"},ngContentSelectors:h,decls:4,vars:5,consts:[[1,"slds-section",3,"ngClass"],["class","slds-section__title",3,"ngClass",4,"ngIf"],[3,"ngStyle"],[1,"slds-section__title",3,"ngClass"],["aria-controls","expando-unique-id","aria-expanded","true","class","slds-button slds-section__title-action",3,"click",4,"ngIf"],["class","slds-truncate slds-p-horizontal_small",3,"title",4,"ngIf"],["aria-controls","expando-unique-id","aria-expanded","true",1,"slds-button","slds-section__title-action",3,"click"],[3,"icon","size","addclasses"],[1,"slds-truncate",3,"title"],[3,"label"],[1,"slds-truncate","slds-p-horizontal_small",3,"title"]],template:function(e,t){1&e&&(i.NAR(),i.j41(0,"div",0),i.DNE(1,u,3,5,"h3",1),i.j41(2,"div",2),i.SdG(3),i.k0s()()),2&e&&(i.Y8G("ngClass",i.eq3(3,m,t.expanded)),i.R7$(),i.Y8G("ngIf",t.titlelabel),i.R7$(),i.Y8G("ngStyle",t.getTabStyle()))},dependencies:[l.YU,l.bT,l.B3,o.W,a.B],encapsulation:2})}return SystemSection})()},86262:(e,t,s)=>{"use strict";s.d(t,{i:()=>I});var i=s(54438),n=s(84341),l=s(80256),o=s(41587),a=s(86532),r=s(90154),d=s(22465),c=s(60177),u=s(25863),m=s(32062),h=s(18521);const g=["resultList"];function p(e,t){if(1&e&&(i.j41(0,"label",14),i.nrm(1,"system-label",15),i.k0s()),2&e){const e=i.XpG();i.R7$(),i.Y8G("label",e.label)}}function f(e,t){if(1&e&&(i.j41(0,"li",18)(1,"div",19)(2,"span",20),i.EFF(3),i.k0s()()()),2&e){const e=i.XpG().$implicit;i.BMQ("data-is-group",!0),i.R7$(3),i.SpI(" ",e.name," ")}}function b(e,t){if(1&e){const e=i.RV6();i.j41(0,"li",21),i.bIt("mousedown",(function(e){return e.preventDefault()}))("click",(function(t){i.eBV(e);const s=i.XpG().$implicit,n=i.XpG();return i.Njj(n.itemClicked(s,t))})),i.j41(1,"div",22)(2,"span",23)(3,"span",24),i.nrm(4,"span",25),i.k0s()()()()}if(2&e){const e=i.XpG().$implicit,t=i.XpG();i.R7$(),i.AVh("slds-has-focus",e.id==t.focusedItemId),i.R7$(3),i.Y8G("innerHTML",e.content,i.npT)}}function y(e,t){if(1&e&&(i.qex(0),i.DNE(1,f,4,2,"li",16)(2,b,5,3,"li",17),i.bVm()),2&e){const e=t.$implicit;i.R7$(),i.Y8G("ngIf",e.isGroup),i.R7$(),i.Y8G("ngIf",!e.isGroup)}}function v(e,t){if(1&e){const e=i.RV6();i.j41(0,"button",31),i.bIt("click",(function(t){i.eBV(e);const s=i.XpG(2);return i.Njj(s.clearValue(t))})),i.nrm(1,"system-button-icon",32),i.k0s()}}const k=e=>({"slds-theme--shade":e});function R(e,t){if(1&e){const e=i.RV6();i.j41(0,"div",26),i.bIt("click",(function(t){i.eBV(e);const s=i.XpG(),n=i.sdS(7);return i.Njj(s.setInputVisible(n,t))})),i.j41(1,"span",27)(2,"a",28)(3,"span",29),i.EFF(4),i.k0s()(),i.DNE(5,v,2,0,"button",30),i.k0s()()}if(2&e){const e=i.XpG();i.R7$(),i.Y8G("ngClass",i.eq3(4,k,e.disabled)),i.R7$(),i.Y8G("system-title",e.value),i.R7$(2),i.JRh(e.value),i.R7$(),i.Y8G("ngIf",!e.disabled)}}let I=(()=>{class SystemSelect{set setIdOnly(e){this.idOnly=!1!==e}constructor(e,t,s){this.elementRef=e,this.cdRef=t,this.renderer=s,this.idOnly=!1,this.label="",this.listHeight="7",this.disabled=!1,this.emitInputValueOnEnterPress=!1,this.searchList=[],this.searchListIsVisible=!1,this.inputIsVisible=!1}get dropdownLength(){return`calc(((1rem * 1.5) + 1rem) * ${this.listHeight})`}ngAfterContentInit(){this.searchList=this.generateSearchList()}registerOnChange(e){this.onChange=e}registerOnTouched(e){}writeValue(e){e&&("string"==typeof e&&(e=this.searchList.find((t=>t.id==e))),this.value=e.name,this.focusedItemId=e.id,this.cdRef.detectChanges())}emitValue(e){this.idOnly?this.onChange(e?.id):this.onChange({id:e.id,name:e.name,group:e.group})}outsideClickHandler(e){this.elementRef.nativeElement.contains(e.target)||this.setSearchListVisible(!1)}onKeyup(e){switch(e.key){case"ArrowUp":case"ArrowDown":return this.navigateThroughResultList(e);case"Enter":this.handleEnterPress();break;case"Escape":e.stopPropagation(),this.setSearchListVisible(!1);break;default:this.value||this.onChange(void 0),this.filterSearchList()}0!=this.searchList.length&&"Enter"!=e.key||this.setSearchListVisible(!1),this.cdRef.detectChanges()}onFocus(){this.setSearchListVisible(!0),this.inputIsVisible=!0}onBlur(e){this.inputIsVisible=!1,this.setSearchListVisible(!1)}onInputClick(e){this.searchListIsVisible||(this.searchList=this.generateSearchList()),this.setSearchListVisible(!0),e.stopPropagation()}itemClicked(e,t){this.setSearchListVisible(!1),this.emitValue(e),this.value=e.name,this.focusedItemId=e.id,this.inputIsVisible=!1,t.stopPropagation&&t.stopPropagation()}setSearchListVisible(e){this.searchListIsVisible=e&&this.searchList.length>0,!e&&this.dropdownTrigger.dropDownOpen&&this.dropdownTrigger.toggleDropdown(),e&&!this.dropdownTrigger.dropDownOpen&&this.dropdownTrigger.toggleDropdown()}filterSearchList(){this.setSearchListVisible(!0),this.focusedItemId=void 0,this.searchList=this.generateSearchList(),this.value&&0!=this.searchList.length&&(this.searchList=this.searchList.filter((e=>e.name.toLowerCase().indexOf(this.value.toLowerCase())>-1)),this.searchList.forEach((e=>{const t=e.name.toLowerCase().indexOf(this.value.toLowerCase());-1!=t&&(e.content=this.generateHighlightHTMLContent(e.name,t))})))}generateHighlightHTMLContent(e,t){return[e.slice(0,t),"<mark>",e.slice(t,t+this.value.length),"</mark>",e.slice(t+this.value.length)].join("")}handleEnterPress(){this.focusedItemId?(this.emitValue(this.searchList.find((e=>e.id==this.focusedItemId))),this.inputIsVisible=!1):this.emitInputValueOnEnterPress&&(this.onChange(this.value),this.inputIsVisible=!1)}generateSearchList(){const e=[],t=_.uniq(this.options.map((e=>e.group))).sort();return t.forEach((s=>{(s||!s&&t.length>1)&&e.push({id:`${s}`,name:`${s}`,isGroup:!0}),this.options.filter((e=>e.group==s)).sort(((e,t)=>e.display>t.display?1:-1)).forEach((t=>e.push({id:t.value,name:t.display,content:t.display,group:s})))})),e}navigateThroughResultList(e){let t=this.searchListIsVisible?this.searchList:this.generateSearchList();if(t=t.filter((e=>!e.isGroup)),0==t.length)return;const s="ArrowDown"==e.key?"down":"up",i=this.focusedItemId?t.findIndex((e=>e.id==this.focusedItemId)):0;let n="down"==s?t[i+1]:t[i-1];this.focusedItemId&&n?n&&(this.focusedItemId=n.id,this.value=n.name):(n=t[0],this.focusedItemId=n.id,this.value=n.name),!this.searchListIsVisible&&n&&this.emitValue(n),this.scrollToFocusedSearchItem(s)}scrollToFocusedSearchItem(e){if(!this.resultListContainer)return;const t=Array.from(this.resultListContainer.element.nativeElement.children).filter((e=>!e.hasAttribute("data-is-group")));let s=t.findIndex((e=>e.firstElementChild.classList.contains("slds-has-focus")));s=s+1==t.length&&"down"==e||0==s&&"up"==e?0:"down"==e?s+1:s-1,t[s]?.scrollIntoView()}clearValue(e){e.stopPropagation(),this.value=void 0,this.focusedItemId=void 0,this.onChange(void 0),this.inputIsVisible=!0}setInputVisible(e,t){t.stopPropagation(),this.inputIsVisible=!0,this.cdRef.detectChanges(),e.focus()}static#e=this.ɵfac=function(e){return new(e||SystemSelect)(i.rXU(i.aKT),i.rXU(i.gRc),i.rXU(i.sFG))};static#t=this.ɵcmp=i.VBU({type:SystemSelect,selectors:[["system-select"]],contentQueries:function(e,t,s){if(1&e&&i.wni(s,o.t,4),2&e){let e;i.mGM(e=i.lsd())&&(t.options=e)}},viewQuery:function(e,t){if(1&e&&(i.GBs(l.q,5),i.GBs(g,5,i.c1b)),2&e){let e;i.mGM(e=i.lsd())&&(t.dropdownTrigger=e.first),i.mGM(e=i.lsd())&&(t.resultListContainer=e.first)}},inputs:{setIdOnly:[i.Mj6.None,"system-select-id-only","setIdOnly"],idOnly:"idOnly",label:"label",listHeight:"listHeight",disabled:"disabled",emitInputValueOnEnterPress:"emitInputValueOnEnterPress"},features:[i.Jv_([{provide:n.kq,useExisting:(0,i.Rfq)((()=>SystemSelect)),multi:!0}])],decls:14,vars:9,consts:[[1,"slds-form-element","slds-size_2-of-2"],["class","slds-form-element__label",4,"ngIf"],[1,"slds-form-element__control","slds-size_2-of-2"],[1,"slds-combobox_container","slds-size--1-of-1"],["system-dropdown-trigger","","aria-expanded","true","aria-haspopup","listbox","role","combobox",1,"slds-combobox","slds-dropdown-trigger","slds-dropdown-trigger_click","slds-size--1-of-1"],["role","none",1,"slds-combobox__form-element","slds-input-has-icon","slds-input-has-icon_right"],["system-dropdown-trigger-button","","type","text","system-placeholder","LBL_SEARCH","aria-autocomplete","list","autoComplete","off","role","textbox",1,"slds-input","slds-combobox__input","slds-combobox__input-value",3,"ngModel","disabled","focus","blur","click","ngModelChange","keyup"],["inputElement",""],[3,"icon","addclasses"],["role","listbox",1,"slds-dropdown","slds-dropdown_fluid","slds-scrollable--y"],["role","presentation",1,"slds-listbox","slds-listbox_vertical"],["resultList",""],[4,"ngFor","ngForOf"],["class","slds-pill_container",3,"click",4,"ngIf"],[1,"slds-form-element__label"],[3,"label"],["role","presentation",4,"ngIf"],["role","presentation","class","slds-listbox__item",3,"mousedown","click",4,"ngIf"],["role","presentation"],[1,"slds-border_bottom","slds-border_top","slds-p-left_small",2,"background-color","#ecebea"],[1,"slds-truncate","size-xx-small",2,"font-weight","bold","font-size","12px"],["role","presentation",1,"slds-listbox__item",3,"mousedown","click"],["role","option",1,"slds-media","slds-listbox__option","slds-listbox__option_plain","slds-media_small"],[1,"slds-media__body"],[1,"slds-truncate"],[3,"innerHTML"],[1,"slds-pill_container",3,"click"],[1,"slds-pill","slds-pill_link","slds-size--1-of-1",3,"ngClass"],[1,"slds-pill__action",3,"system-title"],[1,"slds-pill__label"],["tabindex","-1","class","slds-button slds-button_icon slds-button_icon slds-pill__remove","system-title","LBL_CLEAR",3,"click",4,"ngIf"],["tabindex","-1","system-title","LBL_CLEAR",1,"slds-button","slds-button_icon","slds-button_icon","slds-pill__remove",3,"click"],["icon","close"]],template:function(e,t){1&e&&(i.j41(0,"div",0),i.DNE(1,p,2,1,"label",1),i.j41(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"input",6,7),i.bIt("focus",(function(){return t.onFocus()}))("blur",(function(e){return t.onBlur(e)}))("click",(function(e){return t.onInputClick(e)})),i.mxI("ngModelChange",(function(e){return i.DH7(t.value,e)||(t.value=e),e})),i.bIt("keyup",(function(e){return t.onKeyup(e)})),i.k0s(),i.nrm(8,"system-utility-icon",8),i.k0s(),i.j41(9,"div",9)(10,"ul",10,11),i.DNE(12,y,3,2,"ng-container",12),i.k0s()()()()()(),i.DNE(13,R,6,6,"div",13)),2&e&&(i.AVh("slds-hide",!t.inputIsVisible&&(t.emitInputValueOnEnterPress?!!t.value:!!t.focusedItemId)),i.R7$(),i.Y8G("ngIf",t.label),i.R7$(5),i.R50("ngModel",t.value),i.Y8G("disabled",t.disabled),i.R7$(2),i.Y8G("icon","search")("addclasses","slds-input__icon slds-input__icon--left"),i.R7$(4),i.Y8G("ngForOf",t.searchList),i.R7$(),i.Y8G("ngIf",!t.inputIsVisible&&(t.emitInputValueOnEnterPress?!!t.value:!!t.focusedItemId)))},dependencies:[l.q,a.C,r.m,d.L,c.YU,c.Sq,c.bT,n.me,n.BC,n.vS,u.t,m.W,h.B],encapsulation:2,changeDetection:0})}return SystemSelect})()},10727:(e,t,s)=>{"use strict";s.d(t,{Z:()=>h});var i=s(54438),n=s(84341),l=s(63940),o=s(54546),a=s(60177),r=s(18521);function d(e,t){1&e&&(i.j41(0,"span",10),i.EFF(1,"-"),i.k0s())}const c=e=>({"slds-hidden":e});function u(e,t){if(1&e&&i.nrm(0,"system-utility-icon",11),2&e){const e=i.XpG();i.Y8G("ngClass",i.eq3(3,c,!e.selectedItem.value))("icon",e.selectedItem.icon)("colorclass",e.selectedItem.colorclass)}}function m(e,t){if(1&e){const e=i.RV6();i.j41(0,"li",12),i.bIt("click",(function(t){const s=i.eBV(e).$implicit,n=i.XpG();return i.Njj(n.itemClicked(s.value,t))})),i.j41(1,"div",13)(2,"span",14),i.nrm(3,"system-utility-icon",11),i.k0s()()()}if(2&e){const e=t.$implicit;i.R7$(3),i.Y8G("ngClass",i.eq3(3,c,!e.value))("icon",e.icon)("colorclass",e.colorclass)}}let h=(()=>{class SystemSelectIcon{set disabled(e){this._disabled=!1!==e}constructor(e,t,s){this.elementRef=e,this.cdRef=t,this.renderer=s,this.selectList=[],this.label="",this.value="",this.listHeight="7",this._disabled=!1}ngAfterContentInit(){this.selectItemlist.forEach((e=>this.selectList.push({value:e.value??"",icon:e.icon,colorclass:e.colorclass})))}registerOnChange(e){this.onChange=e}registerOnTouched(e){}writeValue(e){e&&(this.value=e,this.cdRef.detectChanges())}get selectedItem(){return this.selectItemlist.find((e=>e.value==this.value))??void 0}itemClicked(e,t){this.value=e,this.onChange(e)}static#e=this.ɵfac=function(e){return new(e||SystemSelectIcon)(i.rXU(i.aKT),i.rXU(i.gRc),i.rXU(i.sFG))};static#t=this.ɵcmp=i.VBU({type:SystemSelectIcon,selectors:[["system-select-icon"]],contentQueries:function(e,t,s){if(1&e&&i.wni(s,l.i,4),2&e){let e;i.mGM(e=i.lsd())&&(t.selectItemlist=e)}},inputs:{selectList:"selectList",label:"label",listHeight:"listHeight",disabled:"disabled"},features:[i.Jv_([{provide:n.kq,useExisting:(0,i.Rfq)((()=>SystemSelectIcon)),multi:!0}])],decls:10,vars:3,consts:[[1,"slds-combobox_container"],["system-dropdown-trigger-simple","",1,"slds-combobox","slds-dropdown-trigger","slds-dropdown-trigger_click"],["role","none",1,"slds-combobox__form-element","slds-input-has-icon","slds-input-has-icon_right"],["type","button",1,"slds-input_faux","slds-combobox__input"],["class","slds-truncate",4,"ngIf"],["size","x-small",3,"ngClass","icon","colorclass",4,"ngIf"],["addclasses","slds-icon_container slds-icon-utility-down slds-input__icon slds-input__icon_right","icon","down","size","x-small"],["role","listbox",1,"slds-dropdown","slds-dropdown_length-5","slds-dropdown_fluid",2,"min-width","auto"],["role","presentation",1,"slds-listbox","slds-listbox_vertical"],["role","presentation","class","slds-listbox__item",3,"click",4,"ngFor","ngForOf"],[1,"slds-truncate"],["size","x-small",3,"ngClass","icon","colorclass"],["role","presentation",1,"slds-listbox__item",3,"click"],["role","option",1,"slds-media","slds-listbox__option","slds-listbox__option_plain","slds-media_small"],[1,"slds-media__figure","slds-listbox__option-icon"]],template:function(e,t){1&e&&(i.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"button",3),i.DNE(4,d,2,0,"span",4)(5,u,1,5,"system-utility-icon",5),i.k0s(),i.nrm(6,"system-utility-icon",6),i.k0s(),i.j41(7,"div",7)(8,"ul",8),i.DNE(9,m,4,5,"li",9),i.k0s()()()()),2&e&&(i.R7$(4),i.Y8G("ngIf",!t.selectedItem),i.R7$(),i.Y8G("ngIf",t.selectedItem),i.R7$(4),i.Y8G("ngForOf",t.selectList))},dependencies:[o.C,a.YU,a.Sq,a.bT,r.B],encapsulation:2,changeDetection:0})}return SystemSelectIcon})()},63940:(e,t,s)=>{"use strict";s.d(t,{i:()=>n});var i=s(54438);let n=(()=>{class SystemSelectIconItem{constructor(){this.value="",this.icon="dash",this.colorclass="slds-icon-text-default"}static#e=this.ɵfac=function(e){return new(e||SystemSelectIconItem)};static#t=this.ɵcmp=i.VBU({type:SystemSelectIconItem,selectors:[["system-select-icon-item"]],inputs:{value:"value",icon:"icon",colorclass:"colorclass"},decls:0,vars:0,template:function(e,t){},encapsulation:2})}return SystemSelectIconItem})()},41587:(e,t,s)=>{"use strict";s.d(t,{t:()=>n});var i=s(54438);let n=(()=>{class SystemSelectOption{static#e=this.ɵfac=function(e){return new(e||SystemSelectOption)};static#t=this.ɵcmp=i.VBU({type:SystemSelectOption,selectors:[["system-select-option"]],inputs:{value:"value",display:"display",group:"group"},decls:0,vars:0,template:function(e,t){},encapsulation:2})}return SystemSelectOption})()},19923:(e,t,s)=>{"use strict";s.d(t,{$:()=>c});var i=s(54438),n=s(84341),l=s(53584),o=s(69904),a=s(60177),r=s(32062);function d(e,t){if(1&e&&(i.j41(0,"option",3),i.nrm(1,"system-label",4),i.k0s()),2&e){const e=t.$implicit;i.Y8G("value",e.id),i.R7$(),i.Y8G("label",e.label)}}let c=(()=>{class SystemSelectUOM{constructor(e,t){this.configuration=e,this.language=t,this.uoms=[],this.disabled=!1,this._uom="",this.uoms=this.configuration.getData("uomunits")}get uom(){return this._uom}set uom(e){this._uom=e,this.onChange(e)}registerOnChange(e){this.onChange=t=>{e(t)}}registerOnTouched(e){this.onTouched=e}writeValue(e){this._uom=e||""}static#e=this.ɵfac=function(e){return new(e||SystemSelectUOM)(i.rXU(l.i),i.rXU(o.B))};static#t=this.ɵcmp=i.VBU({type:SystemSelectUOM,selectors:[["system-select-uom"]],inputs:{disabled:"disabled"},features:[i.Jv_([{provide:n.kq,useExisting:(0,i.Rfq)((()=>SystemSelectUOM)),multi:!0}])],decls:3,vars:3,consts:[[1,"slds-select_container","slds-m-vertical--xx-small"],[1,"slds-select",3,"disabled","ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[3,"label"]],template:function(e,t){1&e&&(i.j41(0,"div",0)(1,"select",1),i.mxI("ngModelChange",(function(e){return i.DH7(t.uom,e)||(t.uom=e),e})),i.DNE(2,d,2,2,"option",2),i.k0s()()),2&e&&(i.R7$(),i.Y8G("disabled",t.disabled),i.R50("ngModel",t.uom),i.R7$(),i.Y8G("ngForOf",t.uoms))},dependencies:[a.Sq,n.xH,n.y7,n.wz,n.BC,n.vS,r.W],encapsulation:2})}return SystemSelectUOM})()},52527:(e,t,s)=>{"use strict";s.d(t,{b:()=>a});var i=s(54438),n=s(84341),l=s(60177);function o(e,t){if(1&e&&(i.qex(0),i.j41(1,"span",8),i.EFF(2),i.k0s(),i.bVm()),2&e){const e=i.XpG();i.R7$(2),i.JRh(e.value)}}let a=(()=>{class SystemSlider{constructor(){this.disabled=!1,this.displayValue=!0,this._value=0}get value(){return this._value}set value(e){e!=this._value&&(this._value=e,this.onChange(e))}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}writeValue(e){this._value=e}setDisabledState(e){this.disabled=e}static#e=this.ɵfac=function(e){return new(e||SystemSlider)};static#t=this.ɵcmp=i.VBU({type:SystemSlider,selectors:[["system-slider"]],inputs:{max:"max",min:"min",step:"step",disabled:"disabled",displayValue:"displayValue"},features:[i.Jv_([{provide:n.kq,useExisting:(0,i.Rfq)((()=>SystemSlider)),multi:!0}])],decls:8,vars:8,consts:[[1,"slds-form-element"],[1,"slds-form-element__control"],[1,"slds-slider","slds-grid"],[1,"slds-align--absolute-center","slds-grow","slds-is-relative"],["type","range",1,"slds-slider__range",3,"min","step","max","ngModel","disabled","ngModelChange"],[1,"slds-grid","slds-grid--align-end",2,"width","100%","top","calc(50% - 2px)","position","absolute","padding-left","16px","pointer-events","none"],[2,"background","#f3f3f3","height","4px"],[4,"ngIf"],["aria-hidden","true",1,"slds-slider__value"]],template:function(e,t){1&e&&(i.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"input",4),i.mxI("ngModelChange",(function(e){return i.DH7(t.value,e)||(t.value=e),e})),i.k0s(),i.j41(5,"div",5),i.nrm(6,"div",6),i.k0s()(),i.DNE(7,o,3,1,"ng-container",7),i.k0s()()()),2&e&&(i.R7$(4),i.Y8G("min",t.min)("step",t.step)("max",t.max),i.R50("ngModel",t.value),i.Y8G("disabled",t.disabled),i.R7$(2),i.xc7("width",100-t.value,"%"),i.R7$(),i.Y8G("ngIf",t.displayValue))},dependencies:[l.bT,n.me,n.MR,n.BC,n.vS],encapsulation:2})}return SystemSlider})()},48717:(e,t,s)=>{"use strict";s.d(t,{P:()=>r});var i=s(54438);function n(e,t){if(1&e&&(i.j41(0,"div",6),i.nrm(1,"system-label",7),i.k0s()),2&e){const e=i.XpG(2);i.R7$(),i.Y8G("label",e.message)}}function l(e,t){if(1&e&&(i.j41(0,"div",2)(1,"div",3),i.nrm(2,"div",4),i.k0s(),i.DNE(3,n,2,1,"div",5),i.k0s()),2&e){const e=i.XpG();i.R7$(2),i.Y8G("ngStyle",e.spinnerStyle),i.R7$(),i.Y8G("ngIf",e.message)}}function o(e,t){if(1&e){const e=i.RV6();i.j41(0,"button",12),i.bIt("click",(function(){i.eBV(e);const t=i.XpG(2);return i.Njj(t.onCancel())})),i.nrm(1,"system-label",13),i.k0s()}}function a(e,t){if(1&e&&(i.j41(0,"div",8)(1,"div",9)(2,"div",3),i.nrm(3,"div",10),i.k0s()(),i.DNE(4,o,2,0,"button",11),i.k0s()),2&e){const e=i.XpG();i.R7$(4),i.Y8G("ngIf",e.cancellable)}}let r=(()=>{class SystemSpinner{constructor(){this.asOverlay=!1,this.onCancel$=new i.bkB,this.size=0,this.border=0,this.inverse="false",this.spinnerStyle={},this.cancellable=!1}ngOnInit(){return 0!=this.size&&(this.spinnerStyle.width=this.size+"px",this.spinnerStyle.height=this.size+"px"),0!=this.border&&(this.spinnerStyle["border-width"]=this.border+"px"),"true"==this.inverse&&(this.spinnerStyle["border-right-color"]="#fff",this.spinnerStyle["border-left-color"]="#fff",this.spinnerStyle["border-bottom-color"]="#fff"),{}}onCancel(){this.onCancel$.emit()}static#e=this.ɵfac=function(e){return new(e||SystemSpinner)};static#t=this.ɵcmp=i.VBU({type:SystemSpinner,selectors:[["system-spinner"]],hostVars:2,hostBindings:function(e,t){2&e&&i.AVh("spice-overlay-spinner-container",t.asOverlay)},inputs:{size:"size",border:"border",inverse:"inverse",message:"message"},outputs:{onCancel$:"onCancel$"},decls:3,vars:2,consts:[["class","slds-grid slds-grid--vertical",4,"ngIf","ngIfElse"],["overlayContainer",""],[1,"slds-grid","slds-grid--vertical"],[1,"cssload-container"],[1,"cssload-double-torus",3,"ngStyle"],["class","slds-m-top--x-small",4,"ngIf"],[1,"slds-m-top--x-small"],[3,"label"],[1,"slds-grid","slds-grid--vertical","slds-grid--vertical-align-center"],[2,"width","48px","border-radius","50%","box-shadow","0 0 5px 0 #555","padding",".5rem","background-color","#fff","color","#080707"],[1,"cssload-double-torus",2,"width","32px","height","32px"],["class","slds-button slds-button--brand slds-m-top--x-small",3,"click",4,"ngIf"],[1,"slds-button","slds-button--brand","slds-m-top--x-small",3,"click"],["label","LBL_CANCEL"]],template:function(e,t){if(1&e&&i.DNE(0,l,4,2,"div",0)(1,a,5,1,"ng-template",null,1,i.C5r),2&e){const e=i.sdS(2);i.Y8G("ngIf",!t.asOverlay)("ngIfElse",e)}},encapsulation:2})}return SystemSpinner})()},30209:(e,t,s)=>{"use strict";s.d(t,{D:()=>d});var i=s(54438),n=s(77864),l=s(76107),o=s(25863);const a=[[["system-split-container-left"]],[["system-split-container-right"]]],r=["system-split-container-left","system-split-container-right"];let d=(()=>{class SystemSplitContainer{constructor(){this.onExpand=new i.bkB}expand(e){"left"!=e||this.childRight.expanded?"right"!=e||this.childLeft.expanded?(this.childLeft.hidden=!1,this.childLeft.expanded=!1,this.childRight.hidden=!1,this.childRight.expanded=!1):(this.childLeft.hidden=!0,this.childLeft.expanded=!1,this.childRight.expanded=!0,this.childRight.hidden=!1):(this.childRight.hidden=!0,this.childRight.expanded=!1,this.childLeft.hidden=!1,this.childLeft.expanded=!0),this.onExpand.emit(e)}static#e=this.ɵfac=function(e){return new(e||SystemSplitContainer)};static#t=this.ɵcmp=i.VBU({type:SystemSplitContainer,selectors:[["system-split-container"]],contentQueries:function(e,t,s){if(1&e&&(i.wni(s,n.a,5),i.wni(s,l.R,5)),2&e){let e;i.mGM(e=i.lsd())&&(t.childLeft=e.first),i.mGM(e=i.lsd())&&(t.childRight=e.first)}},hostAttrs:[1,"slds-size--1-of-1","slds-height_full","slds-grid",2,"padding-right","13px"],outputs:{onExpand:"onExpand"},ngContentSelectors:r,decls:11,vars:10,consts:[[1,"slds-split-view_container"],[1,"slds-split-view__toggle-button","slds-align--absolute-center"],["aria-expanded","false",1,"slds-button","slds-button_icon","slds-button_icon",2,"width","0.75rem","margin-left","0",3,"disabled","click"],["icon","left"],["icon","right"],["aria-hidden","true",1,"slds-split-view","slds-height_full"],[1,"slds-height_full",2,"margin-left","12px"]],template:function(e,t){1&e&&(i.NAR(a),i.j41(0,"div",0)(1,"div",1)(2,"div")(3,"button",2),i.bIt("click",(function(){return t.expand("right")})),i.nrm(4,"system-button-icon",3),i.k0s(),i.j41(5,"button",2),i.bIt("click",(function(){return t.expand("left")})),i.nrm(6,"system-button-icon",4),i.k0s()()(),i.j41(7,"article",5),i.SdG(8),i.k0s()(),i.j41(9,"div",6),i.SdG(10,1),i.k0s()),2&e&&(i.HbH(t.childLeft.containerClass),i.xc7("width",t.childRight.expanded?0:t.childLeft.expanded?"100%":null),i.R7$(3),i.Y8G("disabled",t.childRight.expanded),i.R7$(2),i.Y8G("disabled",t.childLeft.expanded),i.R7$(4),i.HbH(t.childRight.containerClass),i.xc7("width",t.childLeft.expanded?0:t.childRight.expanded?"100%":null))},dependencies:[o.t],encapsulation:2})}return SystemSplitContainer})()},77864:(e,t,s)=>{"use strict";s.d(t,{a:()=>l});var i=s(54438);const n=["*"];let l=(()=>{class SystemSplitContainerLeft{constructor(){this.hidden=!1,this.expanded=!1}static#e=this.ɵfac=function(e){return new(e||SystemSplitContainerLeft)};static#t=this.ɵcmp=i.VBU({type:SystemSplitContainerLeft,selectors:[["system-split-container-left"]],hostVars:4,hostBindings:function(e,t){2&e&&(i.Aen(t.expanded?"width: 100%":null),i.AVh("slds-hide",t.hidden))},inputs:{containerClass:"containerClass"},ngContentSelectors:n,decls:1,vars:0,template:function(e,t){1&e&&(i.NAR(),i.SdG(0))},encapsulation:2})}return SystemSplitContainerLeft})()},76107:(e,t,s)=>{"use strict";s.d(t,{R:()=>l});var i=s(54438);const n=["*"];let l=(()=>{class SystemSplitContainerRight{constructor(){this.hidden=!1,this.expanded=!1}static#e=this.ɵfac=function(e){return new(e||SystemSplitContainerRight)};static#t=this.ɵcmp=i.VBU({type:SystemSplitContainerRight,selectors:[["system-split-container-right"]],hostVars:4,hostBindings:function(e,t){2&e&&(i.Aen(t.expanded?"width: 100%":null),i.AVh("slds-hide",t.hidden))},inputs:{containerClass:"containerClass"},ngContentSelectors:n,decls:1,vars:0,template:function(e,t){1&e&&(i.NAR(),i.SdG(0))},encapsulation:2})}return SystemSplitContainerRight})()},43308:(e,t,s)=>{"use strict";s.d(t,{O:()=>n});var i=s(54438);let n=(()=>{class SystemStencil{static#e=this.ɵfac=function(e){return new(e||SystemStencil)};static#t=this.ɵcmp=i.VBU({type:SystemStencil,selectors:[["system-stencil"]],decls:2,vars:0,consts:[[1,"slds-theme--shade",2,"background-color","#e4e9f3","min-width","100px"]],template:function(e,t){1&e&&(i.j41(0,"div",0),i.EFF(1," "),i.k0s())},encapsulation:2})}return SystemStencil})()},42205:(e,t,s)=>{"use strict";s.d(t,{t:()=>h});var i=s(54438),n=s(60177),l=s(43308);const o=["system-table-stencils",""];function a(e,t){1&e&&i.nrm(0,"td",5)}function r(e,t){1&e&&i.nrm(0,"td")}function d(e,t){1&e&&i.nrm(0,"td",5)}function c(e,t){1&e&&(i.j41(0,"td"),i.nrm(1,"system-stencil"),i.k0s())}function u(e,t){1&e&&i.nrm(0,"td",5)}function m(e,t){if(1&e&&(i.j41(0,"tr",1),i.DNE(1,a,1,0,"td",2)(2,r,1,0,"td",3)(3,d,1,0,"td",2)(4,c,2,0,"td",4)(5,u,1,0,"td",2),i.k0s()),2&e){const e=t.$implicit,s=i.XpG();i.Y8G("ngStyle",s.linestyle(e)),i.R7$(),i.Y8G("ngIf",s.dragHandles),i.R7$(),i.Y8G("ngIf",s.rownumbers),i.R7$(),i.Y8G("ngIf",s.select),i.R7$(),i.Y8G("ngForOf",s.colArray),i.R7$(),i.Y8G("ngIf",s.tools)}}let h=(()=>{class SystemTableStencils{constructor(){this.columns=1,this.rows=5,this.tools=!1,this.select=!1,this.rownumbers=!1,this.dragHandles=!1,this.colArray=[],this.rowArray=[]}ngOnInit(){let e=1;do{this.rowArray.push(e),e++}while(e<=this.rows);let t=1;do{this.colArray.push(t),t++}while(t<=this.columns)}linestyle(e){return{opacity:.2+.8/e}}static#e=this.ɵfac=function(e){return new(e||SystemTableStencils)};static#t=this.ɵcmp=i.VBU({type:SystemTableStencils,selectors:[["","system-table-stencils",""]],inputs:{columns:"columns",rows:"rows",tools:"tools",select:"select",rownumbers:"rownumbers",dragHandles:"dragHandles"},attrs:o,decls:1,vars:1,consts:[[3,"ngStyle",4,"ngFor","ngForOf"],[3,"ngStyle"],["class","slds-cell-shrink",4,"ngIf"],[4,"ngIf"],[4,"ngFor","ngForOf"],[1,"slds-cell-shrink"]],template:function(e,t){1&e&&i.DNE(0,m,6,6,"tr",0),2&e&&i.Y8G("ngForOf",t.rowArray)},dependencies:[n.Sq,n.bT,n.B3,l.O],encapsulation:2})}return SystemTableStencils})()},89468:(e,t,s)=>{"use strict";s.d(t,{m:()=>m});var i=s(54438),n=s(41081),l=s(71692),o=s(60177),a=s(25863),r=s(32062),d=s(18521);function c(e,t){if(1&e&&(i.j41(0,"p",11),i.nrm(1,"system-label",12),i.k0s()),2&e){const e=i.XpG().$implicit;i.R7$(),i.Y8G("label",e.description)}}function u(e,t){if(1&e){const e=i.RV6();i.j41(0,"div",2)(1,"button",3),i.bIt("click",(function(){const t=i.eBV(e).$implicit,s=i.XpG();return i.Njj(s.toast.clearToast(t.id))})),i.nrm(2,"system-button-icon",4),i.k0s(),i.j41(3,"div",5),i.nrm(4,"system-utility-icon",6),i.j41(5,"div",7)(6,"h2",8),i.nrm(7,"system-label",9),i.k0s(),i.DNE(8,c,2,1,"p",10),i.k0s()()()}if(2&e){const e=t.$implicit,s=i.XpG();i.Y8G("ngStyle",s.toastStyle)("ngClass",s.getToastClass(e.type,e.theme)),i.R7$(2),i.Y8G("icon","close")("size","large"),i.R7$(2),i.Y8G("icon",s.getToastIcon(e.type))("size","small")("addclasses","slds-m-right--small slds-col slds-no-flex")("colorclass","slds-icon"),i.R7$(3),i.Y8G("label",e.text),i.R7$(),i.Y8G("ngIf",e.description)}}let m=(()=>{class SystemToastContainer{constructor(e,t,s,i){this.toast=e,this.layout=t,this.renderer=s,this.cdr=i,this.renderer.listen("window","resize",(()=>this.cdr.detectChanges()))}get isnarrow(){return"small"==this.layout.screenwidth}get toastContainerStyle(){return this.isnarrow?{}:{width:"30rem","margin-left":"calc(50% - 15rem)"}}get toastStyle(){return this.isnarrow?{"min-width":"unset","border-radius":0,"border-bottom":"1px solid #fff"}:{}}getToastClass(e,t){let s="";if("alert"===t)s="slds-notify--alert slds-theme--alert-texture ";else s="slds-notify--toast ";switch(e){case"success":s+="slds-theme--success";break;case"warning":s+="slds-theme--warning";break;case"error":s+="slds-theme--error"}return this.isnarrow?s+" slds-size--1-of-1 slds-m-around--none":s}getToastIcon(e){switch(e){case"success":return"success";case"warning":return"warning";case"error":return"error";default:return"info"}}static#e=this.ɵfac=function(e){return new(e||SystemToastContainer)(i.rXU(n.o),i.rXU(l.Z),i.rXU(i.sFG),i.rXU(i.gRc))};static#t=this.ɵcmp=i.VBU({type:SystemToastContainer,selectors:[["system-toast-container"]],decls:2,vars:2,consts:[[1,"slds-notify_container",3,"ngStyle"],["class","slds-notify","role","alert",3,"ngStyle","ngClass",4,"ngFor","ngForOf"],["role","alert",1,"slds-notify",3,"ngStyle","ngClass"],[1,"slds-button","slds-notify__close","slds-button--icon-inverse",3,"click"],[3,"icon","size"],[1,"slds-notify__content","slds-grid"],[3,"icon","size","addclasses","colorclass"],[1,"slds-col","slds-align-middle"],[1,"slds-text-heading--small"],[3,"label"],["style","max-width: 400px;overflow-wrap: break-word; white-space: normal;",4,"ngIf"],[2,"max-width","400px","overflow-wrap","break-word","white-space","normal"],["length","long",3,"label"]],template:function(e,t){1&e&&(i.j41(0,"div",0),i.DNE(1,u,9,10,"div",1),i.k0s()),2&e&&(i.Y8G("ngStyle",t.toastContainerStyle),i.R7$(),i.Y8G("ngForOf",t.toast.activeToasts))},dependencies:[o.YU,o.Sq,o.bT,o.B3,a.t,r.W,d.B],encapsulation:2})}return SystemToastContainer})()},39207:(e,t,s)=>{"use strict";s.d(t,{F:()=>a});var i=s(54438),n=s(60177),l=s(25863);function o(e,t){if(1&e&&(i.j41(0,"div",7)(1,"div",8),i.EFF(2),i.k0s()()),2&e){const e=i.XpG();i.R7$(2),i.JRh(e.tooltiptext)}}let a=(()=>{class SystemTooltip{constructor(){this.tooltiptext="",this.displayHelp=!1}toggleHelp(){this.displayHelp=!this.displayHelp}openHelp(){this.displayHelp=!0}closeHelp(){this.displayHelp=!1}static#e=this.ɵfac=function(e){return new(e||SystemTooltip)};static#t=this.ɵcmp=i.VBU({type:SystemTooltip,selectors:[["system-tooltip"]],inputs:{tooltiptext:"tooltiptext"},decls:8,vars:2,consts:[[1,"slds-is-relative"],[1,"slds-form-element"],[1,"slds-form-element__icon","slds-align-middle"],[1,"slds-button","slds-button_icon","slds-button","slds-button_icon",3,"mouseover","mouseout"],[3,"icon"],[1,"slds-assistive-text"],["class","slds-popover slds-popover_tooltip slds-nubbin_bottom-left slds-is-absolute","role","tooltip","style","word-wrap: break-word;white-space: normal;width: 300px;bottom: 30px;left: -15px;",4,"ngIf"],["role","tooltip",1,"slds-popover","slds-popover_tooltip","slds-nubbin_bottom-left","slds-is-absolute",2,"word-wrap","break-word","white-space","normal","width","300px","bottom","30px","left","-15px"],[1,"slds-popover__body"]],template:function(e,t){1&e&&(i.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"button",3),i.bIt("mouseover",(function(){return t.openHelp()}))("mouseout",(function(){return t.closeHelp()})),i.nrm(4,"system-button-icon",4),i.j41(5,"span",5),i.EFF(6,"Help"),i.k0s()()()(),i.DNE(7,o,3,1,"div",6),i.k0s()),2&e&&(i.R7$(4),i.Y8G("icon","info"),i.R7$(3),i.Y8G("ngIf",t.displayHelp))},dependencies:[n.bT,l.t],encapsulation:2})}return SystemTooltip})()},32298:(e,t,s)=>{"use strict";s.d(t,{S:()=>u});var i=s(54438),n=s(18039),l=s(60177),o=s(25863),a=s(88517);function r(e,t){if(1&e){const e=i.RV6();i.j41(0,"li",4),i.bIt("cdkDragStarted",(function(){i.eBV(e);const t=i.XpG();return i.Njj(t.setIsDragging(!0))}))("cdkDragEnded",(function(){i.eBV(e);const t=i.XpG();return i.Njj(t.setIsDragging(!1))})),i.j41(1,"system-tree-item",5),i.bIt("click",(function(){const t=i.eBV(e).$implicit,s=i.XpG();return i.Njj(s.handleClick(t.id))}))("toggleExpandedChange",(function(t){i.eBV(e);const s=i.XpG();return i.Njj(s.handleExpand(t))}))("dragPositionChange",(function(t){i.eBV(e);const s=i.XpG();return i.Njj(s.handleDragPosition(t))}))("onItemAdd",(function(t){i.eBV(e);const s=i.XpG();return i.Njj(s.onItemAdd.emit(t))})),i.k0s()()}if(2&e){const e=t.$implicit,s=i.XpG();i.Y8G("cdkDragData",e)("cdkDragDisabled",!s.config.draggable||e.systemTreeDefs.hasChildren),i.BMQ("aria-level",e.systemTreeDefs.level)("aria-selected",e.systemTreeDefs.isSelected),i.R7$(),i.Y8G("item",e)("customButtonsContainer",s.customButtonsContainer)("config",s.config)("isDragging",s.isDragging)("title",e.name)}}function d(e,t){if(1&e){const e=i.RV6();i.j41(0,"div",6)(1,"button",7),i.bIt("click",(function(){i.eBV(e);const t=i.XpG();return i.Njj(t.onItemAdd.emit(null))})),i.nrm(2,"system-button-icon",8),i.k0s()()}2&e&&(i.R7$(2),i.Y8G("icon","add")("size","small"))}const c=["*"];let u=(()=>{class SystemTree{constructor(){this.sourceList=[],this.selectedItem="",this.selectedItemChange=new i.bkB,this.onItemAdd=new i.bkB,this.onTreeDrop=new i.bkB,this.tree=[],this.isDragging=!1,this.treeConfig={draggable:!1,canadd:!1,expandall:!1,collapsible:!0}}get config(){return this.treeConfig}set config(e){this.treeConfig.draggable=e.draggable||!1,this.treeConfig.canadd=e.canadd||!1,this.treeConfig.expandall=e.expandall||!1,this.treeConfig.collapsible=!e.hasOwnProperty("collapsible")||e.collapsible}ngOnChanges(e){e.sourceList&&this.buildTree(),e.selectedItem&&this.handleClick(this.selectedItem,!0)}buildTree(){this.tree=[],this.sortBySequence(),this.addTreeItem(),this.setHasChildren()}sortBySequence(){this.sourceList.sort(((e,t)=>e.name&&t.name?e.name>t.name?1:-1:0));let e=_.groupBy(this.sourceList,(e=>e.parent_id));this.sourceList=[];for(let t in e)e.hasOwnProperty(t)&&(e[t].sort(((e,t)=>e.parent_sequence&&t.parent_sequence?+e.parent_sequence>+t.parent_sequence?1:-1:0)),this.sourceList=[...this.sourceList,...e[t]])}addTreeItem(e="",t=1){for(let s of this.sourceList)(!s.parent_id&&""==e||s.parent_id==e)&&(s.systemTreeDefs||(s.systemTreeDefs={}),s.systemTreeDefs.expanded=!!this.config.collapsible&&(!!this.config.expandall||!!s.systemTreeDefs.expanded),s.systemTreeDefs.clickable=!s.systemTreeDefs.hasOwnProperty("clickable")||s.systemTreeDefs.clickable,s.systemTreeDefs.level=t,s.systemTreeDefs.isSelected=this.selectedItem==s.id,this.tree.push(s),s.systemTreeDefs.expanded&&this.addTreeItem(s.id,t+1))}setHasChildren(){this.tree.forEach((e=>{e.systemTreeDefs.hasChildren=this.sourceList.some((t=>t.parent_id==e.id))}))}handleDrop(e){if(this.isDragging=!1,!this.dragPosition)return;let t,s,i=e.item.data.parent_id,l=this.tree.find((e=>e.id==this.dragPosition.id)),o=this.tree.findIndex((e=>e.id==this.dragPosition.id));switch(this.dragPosition.position){case"before":let t=o-1<=0,s=this.tree[t?0:o-1];e.item.data.parent_id=t?null:s.systemTreeDefs.hasChildren?s.id:s.parent_id,e.item.data.systemTreeDefs.level=t?1:s.systemTreeDefs.hasChildren?s.systemTreeDefs.level+1:s.systemTreeDefs.level,o=t?0:o;break;case"item":e.previousIndex>o&&o++,e.item.data.systemTreeDefs.level=l.systemTreeDefs.level+1,e.item.data.parent_id=l.id,l.systemTreeDefs.hasChildren=!0;break;case"after":let i=o>=this.tree.length-1,n=this.tree[i?this.tree.length-1:o];e.item.data.systemTreeDefs.level=i?1:n.systemTreeDefs.hasChildren?n.systemTreeDefs.level+1:n.systemTreeDefs.level,e.item.data.parent_id=i?null:n.systemTreeDefs.hasChildren?n.id:n.parent_id,o=i?this.tree.length-1:e.previousIndex>o?o+1:o}e.previousIndex!=o&&(this.tree.some((e=>{if(e.id==i)return e.systemTreeDefs.hasChildren=this.sourceList.some((e=>e.parent_id==i)),!0})),(0,n.HD)(this.tree,e.previousIndex,o),t=this.tree.filter((t=>t.parent_id==e.item.data.parent_id||t.parent_id==i)).map(((e,t)=>({id:e.id,index:t}))),this.tree=this.tree.map((e=>{let s=t.findIndex((t=>t.id==e.id));return s>-1&&(e.parent_sequence=s),e}))),e.item.data.parent_id!=i&&(s={id:e.item.data.id,parent_id:e.item.data.parent_id}),this.dragPosition=null,this.onTreeDrop.emit({itemWithNewParent:s,newSortSequences:t})}setIsDragging(e){this.isDragging=e}handleDragPosition(e){this.dragPosition=e}handleExpand(e){this.sourceList.some((t=>{if(t.id==e)return t.systemTreeDefs.expanded=!t.systemTreeDefs.expanded,!0})),this.buildTree()}handleClick(e,t){this.tree.some((s=>{if(s.id==e)return s.systemTreeDefs&&s.systemTreeDefs.clickable?(s.systemTreeDefs.isSelected=!0,t||this.selectedItemChange.emit(e),this.selectedItem=e):this.handleExpand(e),!0})),this.tree.some((t=>{if(t.id!=e&&t.systemTreeDefs&&t.systemTreeDefs.isSelected)return t.systemTreeDefs.isSelected=!1,!0}))}trackByFn(e,t){return t.id}static#e=this.ɵfac=function(e){return new(e||SystemTree)};static#t=this.ɵcmp=i.VBU({type:SystemTree,selectors:[["system-tree"]],inputs:{sourceList:"sourceList",customButtonsContainer:"customButtonsContainer",selectedItem:"selectedItem",config:"config"},outputs:{selectedItemChange:"selectedItemChange",onItemAdd:"onItemAdd",onTreeDrop:"onTreeDrop"},features:[i.OA$],ngContentSelectors:c,decls:5,vars:4,consts:[["role","tree",1,"tree-list-drag-boundary"],["cdkDropList","","cdkDropListSortingDisabled","","role","tree","aria-labelledby","treeheading",1,"slds-tree","slds-p-top--xxx-small",3,"cdkDropListData","cdkDropListDropped"],["role","treeitem","cdkDrag","","cdkDragBoundary",".tree-list-drag-boundary","class","slds-grid slds-drag--preview",3,"cdkDragData","cdkDragDisabled","cdkDragStarted","cdkDragEnded",4,"ngFor","ngForOf","ngForTrackBy"],["class","slds-grid slds-align-content-center slds-border--top slds-m-top--x-small slds-p-top--x-small",4,"ngIf"],["role","treeitem","cdkDrag","","cdkDragBoundary",".tree-list-drag-boundary",1,"slds-grid","slds-drag--preview",3,"cdkDragData","cdkDragDisabled","cdkDragStarted","cdkDragEnded"],[1,"slds-grid--vertical","slds-p-vertical--none","slds-tree__item",2,"width","100%",3,"item","customButtonsContainer","config","isDragging","title","click","toggleExpandedChange","dragPositionChange","onItemAdd"],[1,"slds-grid","slds-align-content-center","slds-border--top","slds-m-top--x-small","slds-p-top--x-small"],[1,"slds-button","slds-button--icon","slds-button--icon-border","slds-p-around--xx-small",3,"click"],[3,"icon","size"]],template:function(e,t){1&e&&(i.NAR(),i.j41(0,"div",0)(1,"ul",1),i.bIt("cdkDropListDropped",(function(e){return t.handleDrop(e)})),i.DNE(2,r,2,9,"li",2),i.k0s()(),i.DNE(3,d,3,2,"div",3),i.SdG(4)),2&e&&(i.R7$(),i.Y8G("cdkDropListData",t.tree),i.R7$(),i.Y8G("ngForOf",t.tree)("ngForTrackBy",t.trackByFn),i.R7$(),i.Y8G("ngIf",t.config.canadd))},dependencies:[l.Sq,l.bT,n.O7,n.T1,o.t,a.d],styles:["\n\n\n\n\n\n\n\n\n\n\n.cdk-drag-animating[_ngcontent-%COMP%]{transition:none}"]})}return SystemTree})()},88517:(e,t,s)=>{"use strict";s.d(t,{d:()=>m});var i=s(54438),n=s(60177),l=s(25863),o=s(18521);function a(e,t){if(1&e){const e=i.RV6();i.j41(0,"button",11),i.bIt("click",(function(t){i.eBV(e);const s=i.XpG();return i.Njj(s.expand(s.item,t))})),i.nrm(1,"system-button-icon",12),i.k0s()}if(2&e){const e=i.XpG();i.Y8G("disabled",e.config.expandall),i.R7$(),i.Y8G("icon",e.item.systemTreeDefs.expanded?"chevrondown":"chevronright")}}function r(e,t){if(1&e&&i.nrm(0,"system-utility-icon",13),2&e){const e=i.XpG();i.Y8G("icon",e.config.icon||e.item.systemTreeDefs.icon||"record")("addclasses","slds-p-around--xxx-small slds-m-right--xx-small")}}function d(e,t){1&e&&i.eu8(0)}function c(e,t){if(1&e){const e=i.RV6();i.j41(0,"div",14)(1,"button",15),i.bIt("click",(function(){i.eBV(e);const t=i.XpG();return i.Njj(t.addItem(t.item.id,t.item.name))})),i.nrm(2,"system-button-icon",16),i.k0s()()}}const u=e=>({$implicit:e});let m=(()=>{class SystemTreeItem{constructor(){this.onItemAdd=new i.bkB,this.toggleExpandedChange=new i.bkB,this.dragPositionChange=new i.bkB,this.config={},this.isDragging=!1,this.dragPosition=""}addItem(e,t){this.onItemAdd.emit({id:e,name:t})}expand(e,t){this.toggleExpandedChange.emit(e.id),t&&t.stopPropagation&&t.stopPropagation()}setPosition(e){this.dragPosition=e,this.isDragging&&this.dragPositionChange.emit(e?{id:this.item.id,position:e}:null)}static#e=this.ɵfac=function(e){return new(e||SystemTreeItem)};static#t=this.ɵcmp=i.VBU({type:SystemTreeItem,selectors:[["system-tree-item"]],inputs:{customButtonsContainer:"customButtonsContainer",item:"item",config:"config",isDragging:"isDragging"},outputs:{onItemAdd:"onItemAdd",toggleExpandedChange:"toggleExpandedChange",dragPositionChange:"dragPositionChange"},decls:13,vars:14,consts:[[1,"slds-p-left--x-small",3,"mouseleave"],[2,"height","0.37rem","width","100%",3,"mouseenter"],[1,"slds-grid","slds-grid--align-spread","slds-grid_vertical-align-center",3,"mouseenter"],[1,"slds-grid","slds-grid_vertical-align-center","slds-grow","slds-truncate"],[2,"min-width","16px"],["class","slds-button slds-button_icon slds-m-right--xx-small slds-m-top--none","aria-expanded","true","aria-hidden","true","tabindex","-1",3,"disabled","click",4,"ngIf"],["size","small",3,"icon","addclasses",4,"ngIf"],[1,"slds-truncate"],[1,"slds-tree__item-label","slds-truncate"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["class","slds-m-right--xx-small",4,"ngIf"],["aria-expanded","true","aria-hidden","true","tabindex","-1",1,"slds-button","slds-button_icon","slds-m-right--xx-small","slds-m-top--none",3,"disabled","click"],["size","xx-small",3,"icon"],["size","small",3,"icon","addclasses"],[1,"slds-m-right--xx-small"],[1,"slds-button","slds-button_icon","slds-m-top--none",3,"click"],["icon","add","size","xx-small"]],template:function(e,t){1&e&&(i.j41(0,"div",0),i.bIt("mouseleave",(function(){return t.setPosition(null)})),i.j41(1,"div",1),i.bIt("mouseenter",(function(){return t.setPosition("before")})),i.k0s(),i.j41(2,"article",2),i.bIt("mouseenter",(function(){return t.setPosition("item")})),i.j41(3,"div",3)(4,"div",4),i.DNE(5,a,2,2,"button",5)(6,r,1,2,"system-utility-icon",6),i.k0s(),i.j41(7,"div",7)(8,"span",8),i.EFF(9),i.k0s()()(),i.DNE(10,d,1,0,"ng-container",9)(11,c,3,0,"div",10),i.k0s(),i.j41(12,"div",1),i.bIt("mouseenter",(function(){return t.setPosition("after")})),i.k0s()()),2&e&&(i.R7$(),i.xc7("box-shadow",t.isDragging&&"before"==t.dragPosition?"0 -2px":"none"),i.R7$(),i.xc7("box-shadow",t.isDragging&&"item"==t.dragPosition?"0 0 0 2.5px":"none"),i.R7$(3),i.Y8G("ngIf",t.config.collapsible&&t.item.systemTreeDefs.hasChildren),i.R7$(),i.Y8G("ngIf",!t.config.collapsible),i.R7$(3),i.JRh(t.item.name),i.R7$(),i.Y8G("ngTemplateOutlet",t.customButtonsContainer)("ngTemplateOutletContext",i.eq3(12,u,t.item.id)),i.R7$(),i.Y8G("ngIf",t.config.canadd&&t.item.systemTreeDefs.isSelected),i.R7$(),i.xc7("box-shadow",t.isDragging&&"after"==t.dragPosition?"0 2px":"none"))},dependencies:[n.bT,n.T3,l.t,o.B],encapsulation:2})}return SystemTreeItem})()},14354:(e,t,s)=>{"use strict";s.d(t,{a:()=>l});var i=s(54438);const n=["*"];let l=(()=>{class SystemTrendIndicator{constructor(){this.trend="neutral"}static#e=this.ɵfac=function(e){return new(e||SystemTrendIndicator)};static#t=this.ɵcmp=i.VBU({type:SystemTrendIndicator,selectors:[["system-trend-indicator"]],inputs:{trend:"trend"},ngContentSelectors:n,decls:6,vars:1,consts:[[1,"slds-icon-trend","slds-is-animated"],["viewBox","0 0 16 16","aria-hidden","true"],["d","M.75 8H11M8 4.5L11.5 8 8 11.5",1,"slds-icon-trend__arrow"],["cy","8","cx","8","r","7.375","transform","rotate(-28 8 8) scale(-1 1) translate(-16 0)",1,"slds-icon-trend__circle"],[1,"slds-assistive-text"]],template:function(e,t){1&e&&(i.NAR(),i.j41(0,"span",0),i.qSk(),i.j41(1,"svg",1),i.nrm(2,"path",2)(3,"circle",3),i.k0s(),i.joV(),i.j41(4,"span",4),i.SdG(5),i.k0s()()),2&e&&i.BMQ("data-slds-trend",t.trend)},encapsulation:2})}return SystemTrendIndicator})()},18521:(e,t,s)=>{"use strict";s.d(t,{B:()=>o});var i=s(54438),n=s(22465),l=s(60177);let o=(()=>{class SystemUtilityIcon{constructor(e){this.cdref=e,this.icon="",this.size="small",this.addclasses="",this.colorclass="slds-icon-text-default",this.title=""}ngOnChanges(e){this.cdref.detectChanges()}getSvgHRef(){return"./vendor/sldassets/icons/"+this._sprite+"-sprite/svg/symbols.svg#"+this._icon}getIconClass(){return"slds-icon slds-icon_container  slds-icon--"+this._size+" "+this.colorclass+" "+this.addclasses}get _icon(){return this.icon&&this.icon.indexOf(":")>0?this.icon.split(":")[1]:this.icon}get _sprite(){return this.icon&&this.icon.indexOf(":")>0?this.icon.split(":")[0]:"utility"}get _size(){return this.icon&&this.icon.indexOf(":")>0&&this.icon.split(":").length>2?this.icon.split(":")[2]:this.size?this.size:"small"}static#e=this.ɵfac=function(e){return new(e||SystemUtilityIcon)(i.rXU(i.gRc))};static#t=this.ɵcmp=i.VBU({type:SystemUtilityIcon,selectors:[["system-utility-icon"]],inputs:{icon:"icon",size:"size",addclasses:"addclasses",colorclass:"colorclass",title:"title"},features:[i.OA$],decls:3,vars:3,consts:[[1,"slds-icon_container",3,"system-title"],["aria-hidden","true",3,"ngClass"]],template:function(e,t){1&e&&(i.j41(0,"div",0),i.qSk(),i.j41(1,"svg",1),i.nrm(2,"use"),i.k0s()()),2&e&&(i.Y8G("system-title",t.title),i.R7$(),i.Y8G("ngClass",t.getIconClass()),i.R7$(),i.BMQ("href",t.getSvgHRef(),null,"xlink"))},dependencies:[n.L,l.YU],encapsulation:2,changeDetection:0})}return SystemUtilityIcon})()},91564:(e,t,s)=>{"use strict";s.d(t,{B:()=>n});var i=s(54438);let n=(()=>{class SystemModuleCustomPipe{transform(e,t){let s=[];for(let i of e)i.module==t&&"custom"==i.type&&s.push(i);return s}static#e=this.ɵfac=function(e){return new(e||SystemModuleCustomPipe)};static#t=this.ɵpipe=i.EJ8({name:"systemmodulecustompipe",type:SystemModuleCustomPipe,pure:!1})}return SystemModuleCustomPipe})()},2760:(e,t,s)=>{"use strict";s.d(t,{B:()=>n});var i=s(54438);let n=(()=>{class SystemModuleGlobalPipe{transform(e,t){let s=[];for(let i of e)i.module==t&&"global"==i.type&&s.push(i);return s}static#e=this.ɵfac=function(e){return new(e||SystemModuleGlobalPipe)};static#t=this.ɵpipe=i.EJ8({name:"systemmoduleglobalpipe",type:SystemModuleGlobalPipe,pure:!0})}return SystemModuleGlobalPipe})()},20941:(e,t,s)=>{"use strict";s.d(t,{M:()=>n});var i=s(54438);let n=(()=>{class SystemStripHtmlTagsPipe{transform(e){return e.replace(/<.*?>/g,"")}static#e=this.ɵfac=function(e){return new(e||SystemStripHtmlTagsPipe)};static#t=this.ɵpipe=i.EJ8({name:"systemstriphtmltagspipe",type:SystemStripHtmlTagsPipe,pure:!1})}return SystemStripHtmlTagsPipe})()},4466:(e,t,s)=>{"use strict";s.d(t,{Q:()=>o});var i=s(60177),n=s(54438),l=s(49722);let o=(()=>{class systemrichtextservice{constructor(e,t){this._document=e,this.backend=t,this.marketingActions=null,this.dummyHtmlElement=document.createElement("div")}executeCommand(e){"h1"!==e&&"h2"!==e&&"h3"!==e&&"h4"!==e&&"h5"!==e&&"h6"!==e&&"p"!==e&&"pre"!==e&&"div"!==e||this._document.execCommand("formatBlock",!1,e),this._document.execCommand(e,!1,null)}insertColor(e,t){this.restoreSelection()&&("textColor"===t?this._document.execCommand("foreColor",!1,e):this._document.execCommand("hiliteColor",!1,e))}setFontName(e){this._document.execCommand("fontName",!1,e)}setFontSize(e){this._document.execCommand("fontSize",!1,e)}insertHtml(e){if(!this._document.execCommand("insertHTML",!1,e))throw new Error("Unable to perform the operation")}saveSelection(){if(window.getSelection){const e=window.getSelection();if(this.savedSelectionParentElement=e.anchorNode.parentElement,e.getRangeAt&&e.rangeCount){this.savedSelection=e.getRangeAt(0),this.selectedText=e.toString();let t=document.createElement("div");t.appendChild(this.savedSelection.cloneContents()),this.selectedHtml=t.innerHTML}}else this._document.getSelection&&this._document.createRange?this.savedSelection=document.createRange():this.savedSelection=null}restoreSelection(){if(!this.savedSelection)return!1;if(window.getSelection){const e=window.getSelection();return e.removeAllRanges(),e.addRange(this.savedSelection),!0}return!!this._document.getSelection||void 0}checkSelection(){if(0===this.savedSelection.toString().length)throw new Error("No Selection Made");return!0}insertImage(e,t){const s=document.createElement("IMG");s.src=e,this.insertElement(s)}insertAnchor(e,t,s={}){const i=document.createElement("A");i.href=e,this.addDataAttributes(i,s),i.innerHTML=t,this.insertElement(i)}addDataAttributes(e,t){for(let s in t)e.dataset[s]=t[s]}insertElement(e){if(this.savedSelection){this.resetRangeBoundaries(this.editorContainer);let t=this.getRangeCurrentTarget(this.savedSelection.startContainer,this.editorContainer);const s=this.savedSelection.collapsed&&0==this.savedSelection.startOffset;let i;this.editorContainer.isEqualNode(t)?(i=s?this.editorContainer.firstChild:null,this.insertElementForNode(e,this.editorContainer,i)):(i=s?t:t.nextSibling,this.insertElementForNode(e,t.parentElement,i)),this.clearSelection()}else this.insertElementForNode(e,this.editorContainer)}clearSelection(){this.savedSelection=void 0,window.getSelection?window.getSelection().removeAllRanges():document.getSelection&&document.getSelection().removeAllRanges()}resetRangeBoundaries(e){this.savedSelection&&(e.contains(this.savedSelection.startContainer)||this.savedSelection.setStart(e,0),e.contains(this.savedSelection.endContainer)||this.savedSelection.setEnd(e,0))}insertElementForNode(e,t,s){this.savedSelection&&this.savedSelection.deleteContents(),s?t.insertBefore(e,s):t.appendChild(e)}getRangeCurrentTarget(e,t){let s=e;if(t.isEqualNode(s))return t;for(;1!==s.nodeType;)s=s.parentElement;return s}createCustomClass(e){const t=e.tag?e.tag:"span",s="<"+t+' class="'+e.class+'">'+this.selectedText+"</"+t+">";this.insertHtml(s)}decodeHTMLEntities(e){return this.dummyHtmlElement.innerHTML=e,this.dummyHtmlElement.innerText}encodeHTMLEntities(e){return this.dummyHtmlElement.innerText=e,this.dummyHtmlElement.innerHTML}loadMarketingActions(e=!1){!e&&_.isArray(this.marketingActions)||this.backend.getRequest("module/MarketingActions/all/actions").subscribe((e=>{this.marketingActions=e.actions}))}static#e=this.ɵfac=function(e){return new(e||systemrichtextservice)(n.KVO(i.qQ),n.KVO(l.H))};static#t=this.ɵprov=n.jDH({token:systemrichtextservice,factory:systemrichtextservice.ɵfac})}return systemrichtextservice})()},70569:(e,t,s)=>{"use strict";s.r(t),s.d(t,{SystemComponents:()=>Hn});var i=s(18039),n=s(60177),l=s(84341),o=s(71341),a=s(91564),r=s(2760),d=s(20941),c=s(63983),u=s(54438),m=s(69904),h=s(83935),g=s(41081),p=s(25863),f=s(32062),b=s(40713),y=s(25028),v=s(88418),k=s(83524);function R(e,t){if(1&e&&(u.j41(0,"div",19),u.nrm(1,"system-label",20),u.k0s()),2&e){const e=u.XpG();u.xc7("visibility",e.pausing?"hidden":"visible")}}function I(e,t){if(1&e&&u.nrm(0,"div",21),2&e){const e=u.XpG();u.Y8G("innerHTML",e.theTextHtml,u.npT)}}function x(e,t){if(1&e&&(u.j41(0,"option",22),u.EFF(1),u.k0s()),2&e){const e=t.$implicit,s=t.index,i=u.XpG();u.Y8G("value",e.id)("selected",s==i.selectedLanguage),u.R7$(),u.JRh(e.name)}}function j(e,t){1&e&&(u.qex(0),u.nrm(1,"system-button-icon",16)(2,"system-label",23),u.bVm()),2&e&&(u.R7$(),u.Y8G("icon","pause")("position","left"))}function G(e,t){1&e&&(u.qex(0),u.nrm(1,"system-button-icon",16)(2,"system-label",24),u.bVm()),2&e&&(u.R7$(),u.Y8G("icon","record")("position","left"))}let C=(()=>{class SpeechRecognition{constructor(e,t,s,i,n){this.language=e,this.metadata=t,this.toast=s,this.changeDetRef=i,this.applicationRef=n,this.theText="",this.theTextNewest="",this.theTextHtml="",this.dirty=!1,this.errorOccurred=!1,this.toRestart=!1,this.recognizing=!1,this.cancelling=!1,this.stopping=!1,this.pausing=!1,this.working=!1,this.languages=[{id:"de_DE",name:"Deutsch"},{id:"en_US",name:"English"}],this.selectedLanguage=0}ngOnInit(){window.SpeechRecognition||window.webkitSpeechRecognition||(this.toast.sendToast("Sorry, speech recognition is not possible with your web browser.","error"),this.self.destroy()),"de_DE"===this.language.currentlanguage?this.selectedLanguage=0:this.selectedLanguage=1,this.recognition=new(window.SpeechRecognition||window.webkitSpeechRecognition),this.recognition.continuous=!0,this.recognition.lang=this.languages[this.selectedLanguage].id.replace("_","-"),this.recognition.interimResults=!0,this.recognition.maxAlternatives=1,this.part1fromField=this.textfield.element.nativeElement.value.substring(0,this.textfield.element.nativeElement.selectionStart),this.part2fromField=this.textfield.element.nativeElement.value.substring(this.textfield.element.nativeElement.selectionEnd),this.recognition.onresult=e=>{this.working=!0,this.changeDetRef.detectChanges();let t="",s=!0;for(let i of e.results)i.isFinal||(s=!1),t+=i[0].transcript,this.theTextNewest=t;s&&(this.working=!1,this.changeDetRef.detectChanges()),!this.dirty&&this.theTextNewest&&(this.dirty=!0),this.dirty&&(this.theTextHtml="<p>"+this.linebreaks2html(this.capitalize(this.theText+" "+this.theTextNewest))+"</p>",this.changeDetRef.detectChanges())},this.recognition.onerror=e=>{switch(e.error){case"network":this.errorOccurred=!0,this.sendErrorToast(this.language.getLabel("MSG_NO_NETWORK"),"warning");break;case"no-speech":return void(this.stopping||this.recognition.stop());case"audio-capture":this.errorOccurred=!0,this.sendErrorToast(this.language.getLabel("MSG_NO_MICROPHONE"));break;case"not-allowed":this.errorOccurred=!0,e.timeStamp-this.start_timestamp<100?this.sendErrorToast(this.language.getLabel("LBL_BLOCKED")):this.sendErrorToast(this.language.getLabel("LBL_DENIED"))}this.applicationRef.tick()},this.recognition.onend=e=>{this.working=!1,this.cancelling?this.self.destroy():!this.pausing||this.stopping?this.acceptAndClose():this.applyText()},this.start()}doRestart(){this.toRestart=!0,this.recognition.stop()}applyText(){this.theText+=""===this.theText?this.capitalize(this.theTextNewest):this.theTextNewest,this.theTextNewest=""}acceptAndClose(){if(this.applyText(),this.errorOccurred)""===this.theText&&""===this.theTextNewest&&this.self.destroy();else{if(!this.stopping)return this.recognition.start(),void(this.toRestart&&(this.toRestart=!1));this.recognizing=!1,this.textfield.element.nativeElement.value=this.part1fromField+this.theText+this.part2fromField,this.textfield.element.nativeElement.dispatchEvent(new Event("change")),this.self.destroy()}}start(e=null){this.recognizing||(this.recognizing=!0,this.recognition.start(),e&&(this.start_timestamp=e.timeStamp))}buttonAcceptClose(){this.stopping=!0,this.pausing?this.acceptAndClose():this.recognition.stop()}buttonPause(){this.pausing=!this.pausing,this.changeDetRef.detectChanges(),this.applicationRef.tick(),this.pausing&&this.recognition.stop(),!this.pausing&&this.recognition.start()}buttonCancel(){this.cancelling=!0,this.pausing&&this.recognition.start(),this.recognition.abort(),this.self.destroy()}changeLang(e){this.selectedLanguage=e.target.selectedIndex,this.recognition.lang=this.languages[this.selectedLanguage].id,this.doRestart()}capitalize(e){return 0===this.part1fromField.length?e.replace(/\S/,(e=>e.toUpperCase())):e}linebreaks2html(e){return e.replace(/\n\n/g,"</p><p>").replace(/\n/g,"<br>")}sendErrorToast(e,t="error"){this.toast.sendToast(this.language.getLabel("ERR_SPEECH_RECOGNITION")+": "+e+".",t,"","error"!==t)}static#e=this.ɵfac=function(e){return new(e||SpeechRecognition)(u.rXU(m.B),u.rXU(h.yu),u.rXU(g.o),u.rXU(u.gRc),u.rXU(u.o8S))};static#t=this.ɵcmp=u.VBU({type:SpeechRecognition,selectors:[["ng-component"]],decls:24,vars:9,consts:[["size","large"],[3,"close"],["label","LBL_SPEECH_RECOGNITION"],[2,"min-height","300px"],["class","slds-text-align_center slds-m-vertical--x-large","style","margin-bottom:3rem",3,"visibility",4,"ngIf"],["class","slds-text-longform",3,"innerHTML",4,"ngIf"],[1,"slds-grid","slds-grid_align-spread"],[1,"slds-col"],[1,"slds-select_container"],[1,"slds-select",3,"change"],[3,"value","selected",4,"ngFor","ngForOf"],[1,"slds-button","slds-button--neutral",3,"click"],["label","LBL_CANCEL"],[1,"slds-button","slds-button--neutral",3,"disabled","click"],[4,"ngIf"],[1,"slds-button","slds-button--brand",3,"disabled","click"],[3,"icon","position"],["label","LBL_ACCEPT"],["label","LBL_CLOSE"],[1,"slds-text-align_center","slds-m-vertical--x-large",2,"margin-bottom","3rem"],["label","LBL_WAITING_START_SPEAKING"],[1,"slds-text-longform",3,"innerHTML"],[3,"value","selected"],["label","LBL_PAUSE"],["label","LBL_CONTINUE"]],template:function(e,t){1&e&&(u.j41(0,"system-modal",0)(1,"system-modal-header",1),u.bIt("close",(function(){return t.buttonCancel()})),u.nrm(2,"system-label",2),u.k0s(),u.j41(3,"system-modal-content")(4,"div",3),u.DNE(5,R,2,2,"div",4)(6,I,1,1,"div",5),u.k0s()(),u.j41(7,"system-modal-footer")(8,"div",6)(9,"div",7)(10,"div",8)(11,"select",9),u.bIt("change",(function(e){return t.changeLang(e)})),u.DNE(12,x,2,3,"option",10),u.k0s()()(),u.j41(13,"div",7)(14,"button",11),u.bIt("click",(function(){return t.buttonCancel()})),u.nrm(15,"system-label",12),u.k0s(),u.j41(16,"button",13),u.bIt("click",(function(){return t.buttonPause()})),u.DNE(17,j,3,2,"ng-container",14)(18,G,3,2,"ng-container",14),u.k0s(),u.j41(19,"button",15),u.bIt("click",(function(){return t.buttonAcceptClose()})),u.nrm(20,"system-button-icon",16)(21,"system-label",17),u.EFF(22," & "),u.nrm(23,"system-label",18),u.k0s()()()()()),2&e&&(u.R7$(5),u.Y8G("ngIf",!t.dirty),u.R7$(),u.Y8G("ngIf",t.dirty),u.R7$(6),u.Y8G("ngForOf",t.languages),u.R7$(4),u.Y8G("disabled",t.cancelling),u.R7$(),u.Y8G("ngIf",!t.pausing),u.R7$(),u.Y8G("ngIf",t.pausing),u.R7$(),u.Y8G("disabled",!t.dirty||t.cancelling),u.R7$(),u.Y8G("icon","stop")("position","left"))},dependencies:[n.Sq,n.bT,l.xH,l.y7,p.t,f.W,b.D,y.I,v.Q,k.C],encapsulation:2})}return SpeechRecognition})();var w=s(27601),S=s(90932);const E=e=>({"slds-is-open":e});let L=(()=>{class SystemButtonGroup{constructor(e){this.metadata=e,this.items=[],this.action=new u.bkB,this.isopen=!1}toggleOpen(){this.isopen=!this.isopen}static#e=this.ɵfac=function(e){return new(e||SystemButtonGroup)(u.rXU(h.yu))};static#t=this.ɵcmp=u.VBU({type:SystemButtonGroup,selectors:[["system-button-group"]],inputs:{items:"items"},outputs:{action:"action"},decls:20,vars:3,consts:[["role","group",1,"slds-button-group"],[1,"slds-button","slds-button_neutral"],[1,"slds-dropdown-trigger","slds-dropdown-trigger_click","slds-button_last",3,"ngClass"],[1,"slds-button","slds-button_icon","slds-button_icon-border-filled",3,"click"],["icon","down"],[1,"slds-dropdown","slds-dropdown_right","slds-dropdown_actions"],["role","menu",1,"slds-dropdown__list"],["role","presentation",1,"slds-dropdown__item"],["href","javascript:void(0);","role","menuitem","tabindex","0"],["title","Overflow Item One",1,"slds-truncate"],["href","javascript:void(0);","role","menuitem","tabindex","-1"],["title","Overflow Item Two",1,"slds-truncate"],["title","Overflow Item Three",1,"slds-truncate"]],template:function(e,t){1&e&&(u.j41(0,"div",0)(1,"button",1),u.EFF(2,"Refresh"),u.k0s(),u.j41(3,"div",2)(4,"button",3),u.bIt("click",(function(){return t.toggleOpen()})),u.nrm(5,"system-button-icon",4),u.k0s(),u.j41(6,"div",5)(7,"ul",6)(8,"li",7)(9,"a",8)(10,"span",9),u.EFF(11,"Overflow Item One"),u.k0s()()(),u.j41(12,"li",7)(13,"a",10)(14,"span",11),u.EFF(15,"Overflow Item Two"),u.k0s()()(),u.j41(16,"li",7)(17,"a",10)(18,"span",12),u.EFF(19,"Overflow Item Three"),u.k0s()()()()()()()),2&e&&(u.R7$(3),u.Y8G("ngClass",u.eq3(1,E,t.isopen)))},dependencies:[n.YU,p.t],encapsulation:2})}return SystemButtonGroup})();var D=s(6576),F=s(45245),M=s(32864);const T=["*"];let B=(()=>{class SystemCardFooter{static#e=this.ɵfac=function(e){return new(e||SystemCardFooter)};static#t=this.ɵcmp=u.VBU({type:SystemCardFooter,selectors:[["system-card-footer"]],ngContentSelectors:T,decls:2,vars:0,consts:[[1,"slds-card__footer"]],template:function(e,t){1&e&&(u.NAR(),u.j41(0,"footer",0),u.SdG(1),u.k0s())},encapsulation:2})}return SystemCardFooter})();var $=s(90342),O=s(55480),X=s(79413),U=s(84359),Y=s(70335),N=s(2187),V=s(97696),A=s(13639),P=s(60595),z=s(21413);let H=(()=>{class SystemConfirmDialog{constructor(e){this.language=e,this.self={},this.answer=null,this.answerSubject=null,this.title="title",this.message="message",this.answerSubject=new z.B,this.answer=this.answerSubject.asObservable()}ok(){this.answerSubject.next(!0),this.answerSubject.complete(),this.self.destroy()}cancel(){this.answerSubject.next(!1),this.answerSubject.complete(),this.self.destroy()}static#e=this.ɵfac=function(e){return new(e||SystemConfirmDialog)(u.rXU(m.B))};static#t=this.ɵcmp=u.VBU({type:SystemConfirmDialog,selectors:[["system-confirm-dialog"]],decls:13,vars:2,consts:[[1,"slds-backdrop","slds-backdrop--open"],["role","dialog","tabindex","-1",1,"slds-modal","slds-fade-in-open"],[1,"slds-modal__container"],[1,"slds-modal__header"],[1,"slds-text-heading--medium"],[1,"slds-modal__content","slds-p-around--medium"],[1,"slds-modal__footer"],[1,"slds-button","slds-button--neutral",3,"click"],["label","LBL_CANCEL"],[1,"slds-button","slds-button--brand",3,"click"],["label","LBL_OK"]],template:function(e,t){1&e&&(u.nrm(0,"div",0),u.j41(1,"div",1)(2,"div",2)(3,"div",3)(4,"h2",4),u.EFF(5),u.k0s()(),u.j41(6,"div",5),u.EFF(7),u.k0s(),u.j41(8,"div",6)(9,"button",7),u.bIt("click",(function(){return t.cancel()})),u.nrm(10,"system-label",8),u.k0s(),u.j41(11,"button",9),u.bIt("click",(function(){return t.ok()})),u.nrm(12,"system-label",10),u.k0s()()()()),2&e&&(u.R7$(5),u.JRh(t.title),u.R7$(2),u.SpI(" ",t.message," "))},dependencies:[f.W],styles:["\n\n\n\n\n\n\n\n\n\n\n[_nghost-%COMP%]{position:relative;z-index:9100}"]})}return SystemConfirmDialog})();var q=s(49380),J=s(22185),W=s(16435),K=s(38431);let Q=(()=>{class SystemDuelingPicklistItem{constructor(){this.id="",this.label=""}static#e=this.ɵfac=function(e){return new(e||SystemDuelingPicklistItem)};static#t=this.ɵcmp=u.VBU({type:SystemDuelingPicklistItem,selectors:[["system-dueling-picklist-item"]],inputs:{id:"id",label:"label"},decls:0,vars:0,template:function(e,t){},encapsulation:2})}return SystemDuelingPicklistItem})();function Z(e,t){if(1&e){const e=u.RV6();u.j41(0,"li",10),u.bIt("click",(function(){const t=u.eBV(e).$implicit,s=u.XpG();return u.Njj(s.selectItem(t.id,"left"))})),u.j41(1,"div",11)(2,"span",12),u.nrm(3,"system-label",13),u.k0s()()()}if(2&e){const e=t.$implicit,s=u.XpG();u.R7$(),u.BMQ("aria-selected",s.isSelected(e.id,"left")),u.R7$(2),u.Y8G("label",e.label)}}function ee(e,t){if(1&e){const e=u.RV6();u.j41(0,"li",10),u.bIt("click",(function(){const t=u.eBV(e).$implicit,s=u.XpG();return u.Njj(s.selectItem(t.id,"right"))})),u.j41(1,"div",11)(2,"span",12),u.nrm(3,"system-label",13),u.k0s()()()}if(2&e){const e=t.$implicit,s=u.XpG();u.R7$(),u.BMQ("aria-selected",s.isSelected(e.id,"right")),u.R7$(2),u.Y8G("label",e.label)}}let te=(()=>{class SystemDuelingPicklist{constructor(e,t,s){this.elementRef=e,this.cdRef=t,this.renderer=s,this.selectList=[],this.selectedleft=[],this.selectedright=[],this.selectedIDs=[],this.label="",this.listHeight="7",this.disabled=!1}ngAfterContentInit(){this.selectItemlist.forEach((e=>this.selectList.push({id:e.id,label:e.label})))}registerOnChange(e){this.onChange=e}registerOnTouched(e){}writeValue(e){e&&(this.selectedIDs=e.split(","))}get availableItems(){return this.selectItemlist.filter((e=>this.selectedIDs.indexOf(e.id)<0))}get selectedItems(){return this.selectItemlist.filter((e=>this.selectedIDs.indexOf(e.id)>=0))}selectItem(e,t){let s=this["selected"+t].indexOf(e);s>=0?this["selected"+t].splice(s,1):this["selected"+t].push(e)}onFieldDrop(e){let t=e.previousContainer.data.splice(e.previousIndex,1);e.container.data.splice(e.currentIndex,0,t[0])}isSelected(e,t){return this["selected"+t].indexOf(e)>=0}addItems(){this.selectedleft.forEach((e=>this.selectedIDs.push(e))),this.selectedleft=[],this.onChange(this.selectedIDs.join(","))}removeItems(){this.selectedright.forEach((e=>this.selectedIDs.splice(this.selectedIDs.indexOf(e),1))),this.selectedright=[],this.onChange(this.selectedIDs.join(","))}static#e=this.ɵfac=function(e){return new(e||SystemDuelingPicklist)(u.rXU(u.aKT),u.rXU(u.gRc),u.rXU(u.sFG))};static#t=this.ɵcmp=u.VBU({type:SystemDuelingPicklist,selectors:[["system-dueling-picklist"]],contentQueries:function(e,t,s){if(1&e&&u.wni(s,Q,4),2&e){let e;u.mGM(e=u.lsd())&&(t.selectItemlist=e)}},inputs:{selectList:"selectList",label:"label",listHeight:"listHeight",disabled:"disabled"},features:[u.Jv_([{provide:l.kq,useExisting:(0,u.Rfq)((()=>SystemDuelingPicklist)),multi:!0}])],decls:14,vars:4,consts:[[1,"slds-dueling-list"],[1,"slds-dueling-list__column",2,"width","calc(50% - 20px)"],[1,"slds-dueling-list__options","slds-size--1-of-1"],["aria-describedby","option-drag-label","role","listbox",1,"slds-listbox","slds-listbox_vertical"],["role","presentation","class","slds-listbox__item",3,"click",4,"ngFor","ngForOf"],[1,"slds-dueling-list__column"],[1,"slds-button","slds-button_icon","slds-button_icon-container",3,"disabled","click"],["icon","right"],["icon","left"],["aria-describedby","option-drag-label","aria-multiselectable","true","role","listbox",1,"slds-listbox","slds-listbox_vertical"],["role","presentation",1,"slds-listbox__item",3,"click"],["role","option","tabindex","0",1,"slds-listbox__option","slds-p-around--xx-small"],[1,"slds-truncate"],[3,"label"]],template:function(e,t){1&e&&(u.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"ul",3),u.DNE(4,Z,4,2,"li",4),u.k0s()()(),u.j41(5,"div",5)(6,"button",6),u.bIt("click",(function(){return t.addItems()})),u.nrm(7,"system-button-icon",7),u.k0s(),u.j41(8,"button",6),u.bIt("click",(function(){return t.removeItems()})),u.nrm(9,"system-button-icon",8),u.k0s()(),u.j41(10,"div",1)(11,"div",2)(12,"ul",9),u.DNE(13,ee,4,2,"li",4),u.k0s()()()()),2&e&&(u.R7$(4),u.Y8G("ngForOf",t.availableItems),u.R7$(2),u.Y8G("disabled",0==t.selectedleft.length),u.R7$(2),u.Y8G("disabled",0==t.selectedright.length),u.R7$(5),u.Y8G("ngForOf",t.selectedItems))},dependencies:[n.Sq,p.t,f.W],encapsulation:2})}return SystemDuelingPicklist})();var se=s(10650),ie=s(29994),ne=s(57363);const le=["componentcontainer"];let oe=(()=>{class SystemDynamicRouteContainer{constructor(e,t,s,i){this.metadata=e,this.session=t,this.router=s,this.route=i,this.routercomponent=null,this.session&&this.session.authData.sessionId||this.router.navigate(["/login"])}ngAfterViewInit(){if(!this.routercomponent){let e=this.metadata.getRouteComponent(this.route.snapshot.routeConfig.path);this.metadata.addComponent(e,this.componentcontainer).subscribe((e=>{this.routercomponent=e}))}}static#e=this.ɵfac=function(e){return new(e||SystemDynamicRouteContainer)(u.rXU(h.yu),u.rXU(ie.d),u.rXU(ne.Ix),u.rXU(ne.nX))};static#t=this.ɵcmp=u.VBU({type:SystemDynamicRouteContainer,selectors:[["system-dynamicroute-container"]],viewQuery:function(e,t){if(1&e&&u.GBs(le,7,u.c1b),2&e){let e;u.mGM(e=u.lsd())&&(t.componentcontainer=e.first)}},decls:2,vars:0,consts:[["componentcontainer",""]],template:function(e,t){1&e&&u.nrm(0,"div",null,0)},encapsulation:2})}return SystemDynamicRouteContainer})();var ae=s(12833),re=s(87285),de=s(38045),ce=s(68823),ue=s(67469),me=s(13269),he=s(70923),ge=s(58461),pe=s(72486),fe=s(50859),be=s(13562),ye=s(81473);let ve=(()=>{class SystemImagePreviewModal{constructor(e,t){this.language=e,this.helper=t,this.self={},this.imgsrc="",this.imgtype="",this.imgname=""}closeModal(){this.self.destroy()}download(){let e=this.helper.b64toBlob(this.imgsrc.replace("data:"+this.imgtype+";base64,",""),this.imgtype),t=URL.createObjectURL(e),s=document.createElement("a");document.body.appendChild(s),s.href=t,s.download=this.imgname,s.click(),s.remove()}static#e=this.ɵfac=function(e){return new(e||SystemImagePreviewModal)(u.rXU(m.B),u.rXU(be.d))};static#t=this.ɵcmp=u.VBU({type:SystemImagePreviewModal,selectors:[["system-image-preview-modal"]],inputs:{imgsrc:"imgsrc",imgtype:"imgtype",imgname:"imgname"},decls:8,vars:2,consts:[["size","large"],[3,"close"],["margin","none"],[3,"data"],[1,"slds-button","slds-button--icon","slds-button--icon-border",3,"click"],["icon","download","size","small"]],template:function(e,t){1&e&&(u.j41(0,"system-modal",0)(1,"system-modal-header",1),u.bIt("close",(function(){return t.closeModal()})),u.EFF(2),u.k0s(),u.j41(3,"system-modal-content",2),u.nrm(4,"system-image-preview",3),u.k0s(),u.j41(5,"system-modal-footer")(6,"button",4),u.bIt("click",(function(){return t.download()})),u.nrm(7,"system-button-icon",5),u.k0s()()()),2&e&&(u.R7$(2),u.JRh(t.imgname),u.R7$(2),u.Y8G("data",t.imgsrc))},dependencies:[p.t,b.D,y.I,v.Q,k.C,ye.L],encapsulation:2})}return SystemImagePreviewModal})();var _e=s(30991),ke=s(29145),Re=s(92482),Ie=s(74052),xe=s(63252),je=s(70585),Ge=s(4656),Ce=s(53584);function we(e,t){if(1&e&&(u.j41(0,"option",8),u.EFF(1),u.k0s()),2&e){const e=t.$implicit;u.Y8G("value","+"+e),u.R7$(),u.SpI("+",e,"")}}function Se(e,t){if(1&e){const e=u.RV6();u.j41(0,"div",3)(1,"select",4,5),u.mxI("ngModelChange",(function(t){u.eBV(e);const s=u.XpG();return u.DH7(s.value,t)||(s.value=t),u.Njj(t)})),u.nrm(3,"option",6),u.DNE(4,we,2,2,"option",7),u.k0s()()}if(2&e){const e=u.XpG();u.R7$(),u.R50("ngModel",e.value),u.R7$(3),u.Y8G("ngForOf",e.countrycodes)}}function Ee(e,t){if(1&e){const e=u.RV6();u.j41(0,"div",9)(1,"input",10),u.mxI("ngModelChange",(function(t){u.eBV(e);const s=u.XpG();return u.DH7(s.value,t)||(s.value=t),u.Njj(t)})),u.k0s()()}if(2&e){const e=u.XpG();u.R7$(),u.R50("ngModel",e.value)}}let Le=(()=>{class SystemInputCountryCode{constructor(e,t,s){this.metadata=e,this.language=t,this.configuration=s,this.countrycodes=[],this.strict=!1,"strict"==this.configuration.data.backendextensions.spiceui.config.format&&(this.strict=!0)}get value(){return this._value}set value(e){e!=this._value&&(this._value=e,this.onChange(e))}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}writeValue(e){this._value=e}ngOnInit(){this.strict&&this.getCountries()}getCountries(){this.countrycodes=[];let e=this.configuration.getData("countries");for(let t of e.countries)!t.e164||this.countrycodes.indexOf(t.e164)>=0||this.countrycodes.push(t.e164);this.countrycodes.sort()}static#e=this.ɵfac=function(e){return new(e||SystemInputCountryCode)(u.rXU(h.yu),u.rXU(m.B),u.rXU(Ce.i))};static#t=this.ɵcmp=u.VBU({type:SystemInputCountryCode,selectors:[["system-input-country-code"]],features:[u.Jv_([{provide:l.kq,useExisting:(0,u.Rfq)((()=>SystemInputCountryCode)),multi:!0}])],decls:4,vars:2,consts:[[1,"slds-form-element"],["class","slds-select_container",4,"ngIf","ngIfElse"],["countryinput",""],[1,"slds-select_container"],[1,"slds-select",3,"ngModel","ngModelChange"],["focus",""],["value",""],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[1,"slds-form-element__control"],["type","text",1,"slds-input",3,"ngModel","ngModelChange"]],template:function(e,t){if(1&e&&(u.j41(0,"div",0),u.DNE(1,Se,5,2,"div",1)(2,Ee,2,1,"ng-template",null,2,u.C5r),u.k0s()),2&e){const e=u.sdS(3);u.R7$(),u.Y8G("ngIf",t.strict)("ngIfElse",e)}},dependencies:[n.Sq,n.bT,l.xH,l.y7,l.me,l.wz,l.BC,l.vS],encapsulation:2})}return SystemInputCountryCode})();var De=s(1626),Fe=s(26024),Me=s(95096),Te=s(96700),Be=s(39142),$e=s(6764),Oe=s(60940),Xe=s(21534),Ue=s(40238),Ye=s(2265),Ne=s(40145),Ve=s(66589),Ae=s(39554),Pe=s(13957),ze=s(92695),He=s(31033);function qe(e,t){if(1&e&&(u.j41(0,"option",5),u.EFF(1),u.k0s()),2&e){const e=t.$implicit;u.Y8G("value",e.taxcategoryid),u.R7$(),u.Lme("",e.taxcategoryname," (",e.taxcategoryid,")")}}let Je=(()=>{class SystemInputTaxCode{constructor(e){this.configuration=e,this.disabled=!1,this.taxcodes=[]}get value(){return this._value}set value(e){e!=this._value&&(this._value=e,this.onChange(e))}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}writeValue(e){this._value=e}ngOnInit(){this.getTaxCodes()}getTaxCodes(){this.taxcodes=this.configuration.getData("salesdoctaxcategories")}static#e=this.ɵfac=function(e){return new(e||SystemInputTaxCode)(u.rXU(Ce.i))};static#t=this.ɵcmp=u.VBU({type:SystemInputTaxCode,selectors:[["system-input-taxcode"]],inputs:{disabled:"disabled"},features:[u.Jv_([{provide:l.kq,useExisting:(0,u.Rfq)((()=>SystemInputTaxCode)),multi:!0}])],decls:5,vars:3,consts:[[1,"slds-form-element"],[1,"slds-select_container"],[1,"slds-select",3,"disabled","ngModel","ngModelChange"],["value",""],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(e,t){1&e&&(u.j41(0,"div",0)(1,"div",1)(2,"select",2),u.mxI("ngModelChange",(function(e){return u.DH7(t.value,e)||(t.value=e),e})),u.nrm(3,"option",3),u.DNE(4,qe,2,3,"option",4),u.k0s()()()),2&e&&(u.R7$(2),u.Y8G("disabled",0==t.taxcodes.length||t.disabled),u.R50("ngModel",t.value),u.R7$(2),u.Y8G("ngForOf",t.taxcodes))},dependencies:[n.Sq,l.xH,l.y7,l.wz,l.BC,l.vS],encapsulation:2})}return SystemInputTaxCode})();var We=s(64029),Ke=s(70639),Qe=s(41239);let Ze=(()=>{class SystemInstallerComponent{static#e=this.ɵfac=function(e){return new(e||SystemInstallerComponent)};static#t=this.ɵcmp=u.VBU({type:SystemInstallerComponent,selectors:[["system-installer-component"]],decls:1,vars:1,consts:[[3,"component"]],template:function(e,t){1&e&&u.nrm(0,"system-dynamic-component",0),2&e&&u.Y8G("component","SpiceInstaller")},dependencies:[se.s],encapsulation:2})}return SystemInstallerComponent})();var et=s(49722),tt=s(92462),st=s(50531),it=s(32130),nt=s(22465);function lt(e,t){if(1&e){const e=u.RV6();u.j41(0,"system-input-radio",16),u.mxI("ngModelChange",(function(t){u.eBV(e);const s=u.XpG(2);return u.DH7(s.currentScope,t)||(s.currentScope=t),u.Njj(t)})),u.bIt("ngModelChange",(function(){u.eBV(e);const t=u.XpG(2);return u.Njj(t.setUntranslatedLanguages())})),u.EFF(1),u.k0s()}if(2&e){const e=t.$implicit,s=u.XpG(2);u.R50("ngModel",s.currentScope),u.Y8G("value",e)("disabled","global"==e&&"custom"==s.labelData.scope),u.R7$(),u.SpI(" ",e," ")}}function ot(e,t){if(1&e&&(u.j41(0,"div",14),u.DNE(1,lt,2,4,"system-input-radio",15),u.k0s()),2&e){const e=u.XpG();u.R7$(),u.Y8G("ngForOf",e.scopes)}}function at(e,t){if(1&e){const e=u.RV6();u.j41(0,"article")(1,"div",18)(2,"div",19)(3,"h2"),u.EFF(4),u.k0s()(),u.j41(5,"div",20)(6,"div",21)(7,"label"),u.nrm(8,"system-label",22),u.EFF(9,": "),u.k0s(),u.j41(10,"input",23),u.mxI("ngModelChange",(function(t){const s=u.eBV(e).$implicit;return u.DH7(s.translation_short,t)||(s.translation_short=t),u.Njj(t)})),u.k0s()(),u.j41(11,"div",21)(12,"label")(13,"abbr",24),u.EFF(14,"*"),u.k0s(),u.nrm(15,"system-label",25),u.EFF(16,": "),u.k0s(),u.j41(17,"input",26),u.mxI("ngModelChange",(function(t){const s=u.eBV(e).$implicit;return u.DH7(s.translation_default,t)||(s.translation_default=t),u.Njj(t)})),u.k0s()(),u.j41(18,"div",21)(19,"label"),u.nrm(20,"system-label",27),u.EFF(21,": "),u.k0s(),u.j41(22,"textarea",28),u.mxI("ngModelChange",(function(t){const s=u.eBV(e).$implicit;return u.DH7(s.translation_long,t)||(s.translation_long=t),u.Njj(t)})),u.k0s()()()()()}if(2&e){const e=t.$implicit,s=u.XpG(2);u.R7$(4),u.JRh(s.languagesNames[e.syslanguage]),u.R7$(6),u.R50("ngModel",e.translation_short),u.R7$(7),u.R50("ngModel",e.translation_default),u.R7$(5),u.R50("ngModel",e.translation_long)}}function rt(e,t){if(1&e&&(u.qex(0),u.DNE(1,at,23,4,"article",17),u.bVm()),2&e){const e=u.XpG();u.R7$(),u.Y8G("ngForOf",e.translations)("ngForTrackBy",e.trackByFn)}}function dt(e,t){if(1&e&&(u.j41(0,"option",37),u.EFF(1),u.k0s()),2&e){const e=t.$implicit;u.FS9("value",e.language),u.R7$(),u.SpI(" ",e.text," ")}}function ct(e,t){if(1&e){const e=u.RV6();u.j41(0,"div",29)(1,"div",29)(2,"div",30)(3,"div",31)(4,"select",32,33),u.DNE(6,dt,2,2,"option",34),u.k0s()()(),u.j41(7,"button",35),u.bIt("click",(function(){u.eBV(e);const t=u.sdS(5),s=u.XpG();return u.Njj(s.addTranslation(t.value))})),u.nrm(8,"system-label",36),u.k0s()()()}if(2&e){const e=u.XpG();u.R7$(6),u.Y8G("ngForOf",e.untranslatedLanguages)}}let ut=(()=>{class SystemLabelEditorModal{constructor(e,t,s,i,n,l){this.backend=e,this.metadata=t,this.language=s,this.utils=i,this.toast=n,this.modal=l,this.availableLanguages=[],this.currentScope="global",this.scopes=["global","custom"],this.languagesNames={},this.untranslatedLanguages=[],this.isLoading=!1,this._labelData=null}get labelData(){return this._labelData}set labelData(e){if(this._labelData=e,e&&0!=e[this.currentScope+"_translations"].length){for(let t of this.scopes)if(e[t+"_translations"].length>0){this.currentScope=t;break}e[this.currentScope+"_translations"].sort(((e,t)=>e.syslanguage==this.language.languagedata.languages.default||e.syslanguage<t.syslanguage?-1:e.syslanguage>t.syslanguage?1:void 0))}}get translations(){return this.labelData[`${this.currentScope}_translations`]}addTranslation(e){this.labelData[this.currentScope+"_translations"]||(this.labelData[this.currentScope+"_translations"]=[]),e||(e=this.untranslatedLanguages[0]),this.labelData[this.currentScope+"_translations"].push({id:this.utils.generateGuid(),syslanguagelabel_id:this.labelData.id,syslanguage:e}),this.setUntranslatedLanguages()}ngOnInit(){this.loadAvailableLanguages(),this.retrieveLabelData()}trackByFn(e,t){return e}retrieveLabelData(){this.isLoading=!0,this.backend.getRequest("configuration/syslanguages/labels/"+this.labelData.name).subscribe((e=>{this.isLoading=!1,e?this.labelData=e:this.modal.openModal("SystemLabelEditorGlobalCustomModal",!1).subscribe((e=>{e.instance.labelscope.subscribe((e=>{this.currentScope=e,this.labelData={id:this.utils.generateGuid(),name:this.labelData.name,scope:this.currentScope,global_translations:[],custom_translations:[]},this.addTranslation(this.language.currentlanguage)}))})),this.setUntranslatedLanguages()}),(()=>this.isLoading=!1))}save(){this.close(),this.backend.postRequest("configuration/syslanguages/labels",null,[this.labelData]).subscribe((()=>{let e=this.translations.find((e=>e.syslanguage==this.language.currentlanguage));this.language.addLabel(this.labelData.name,e.translation_default,e.translation_short,e.translation_long),this.language.currentlanguage$.emit(this.language.currentlanguage),this.toast.sendToast(this.language.getLabel("LBL_DATA_SAVED"),"success")}))}setUntranslatedLanguages(){this.untranslatedLanguages=this.translations?this.availableLanguages.filter((e=>!this.translations.some((t=>t.syslanguage==e.language)))):this.availableLanguages}loadAvailableLanguages(){this.availableLanguages=this.language.getAvialableLanguages(),this.availableLanguages.forEach((e=>this.languagesNames[e.language]=e.text))}close(){this.self.destroy()}static#e=this.ɵfac=function(e){return new(e||SystemLabelEditorModal)(u.rXU(et.H),u.rXU(h.yu),u.rXU(m.B),u.rXU(tt.g),u.rXU(g.o),u.rXU(st.y))};static#t=this.ɵcmp=u.VBU({type:SystemLabelEditorModal,selectors:[["system-label-editor-modal"]],decls:17,vars:6,consts:[["size","large"],[3,"close"],["margin","none",3,"grow"],[1,"slds-size--1-of-1","slds-p-around--small","slds-height_full",3,"system-overlay-loading-spinner"],[1,"slds-grid","slds-grid--vertical-align-center","slds-p-bottom--small"],[1,"slds-p-vertical--small","slds-text-heading--small"],["label","LBL_TRANSLATIONS"],["class","slds-grid slds-col--bump-left",4,"ngIf"],[4,"ngIf"],["class","slds-grid",4,"ngIf"],[1,"slds-button","slds-button--neutral",3,"click"],["label","LBL_CANCEL"],[1,"slds-button","slds-button--brand",3,"click"],["label","LBL_SAVE"],[1,"slds-grid","slds-col--bump-left"],["name","label-editor-modal-translation-scope",3,"ngModel","value","disabled","ngModelChange",4,"ngFor","ngForOf"],["name","label-editor-modal-translation-scope",3,"ngModel","value","disabled","ngModelChange"],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"slds-card","slds-m-bottom--small"],[1,"slds-card__header"],[1,"slds-card__body","slds-p-around--small"],[1,"slds-form-element"],["label","LBL_TEXT_SHORT"],["type","text",1,"slds-input",3,"ngModel","ngModelChange"],[1,"slds-required"],["label","LBL_DEFAULT"],["type","text","required","required",1,"slds-input",3,"ngModel","ngModelChange"],["label","LBL_TEXT_LONG"],[1,"slds-textarea",3,"ngModel","ngModelChange"],[1,"slds-grid"],[1,"slds-form-element__control","slds-p-right--x-small"],[1,"slds-select_container"],[1,"slds-select"],["add_translation_language",""],[3,"value",4,"ngFor","ngForOf"],["system-title","LBL_ADD_TRANSLATION",1,"slds-button","slds-button--neutral",3,"click"],["label","LBL_ADD"],[3,"value"]],template:function(e,t){1&e&&(u.j41(0,"system-modal",0)(1,"system-modal-header",1),u.bIt("close",(function(){return t.close()})),u.EFF(2),u.k0s(),u.j41(3,"system-modal-content",2)(4,"div",3)(5,"div",4)(6,"h2",5),u.nrm(7,"system-label",6),u.EFF(8,": "),u.k0s(),u.DNE(9,ot,2,1,"div",7),u.k0s(),u.DNE(10,rt,2,2,"ng-container",8)(11,ct,9,1,"div",9),u.k0s()(),u.j41(12,"system-modal-footer")(13,"button",10),u.bIt("click",(function(){return t.close()})),u.nrm(14,"system-label",11),u.k0s(),u.j41(15,"button",12),u.bIt("click",(function(){return t.save()})),u.nrm(16,"system-label",13),u.k0s()()()),2&e&&(u.R7$(2),u.SpI(" ",t.labelData.name," "),u.R7$(),u.Y8G("grow",!0),u.R7$(),u.Y8G("system-overlay-loading-spinner",t.isLoading),u.R7$(5),u.Y8G("ngIf",!t.isLoading),u.R7$(),u.Y8G("ngIf",t.translations),u.R7$(),u.Y8G("ngIf",!t.isLoading&&(null==t.availableLanguages?null:t.availableLanguages.length)>(null==t.translations?null:t.translations.length)))},dependencies:[it.M,nt.L,n.Sq,n.bT,l.xH,l.y7,l.me,l.BC,l.YS,l.vS,Ve.J,f.W,b.D,y.I,v.Q,k.C],encapsulation:2})}return SystemLabelEditorModal})(),mt=(()=>{class SystemLabelEditorGlobalCustomModal{constructor(){this.labelscope=new u.bkB}setLabel(e){this.labelscope.emit(e),this.self.destroy()}static#e=this.ɵfac=function(e){return new(e||SystemLabelEditorGlobalCustomModal)};static#t=this.ɵcmp=u.VBU({type:SystemLabelEditorGlobalCustomModal,selectors:[["ng-component"]],decls:11,vars:0,consts:[["size","prompt"],["label","LBL_SELECT_SCOPE"],[1,"slds-p-around--small","slds-align--absolute-center"],["label","LBL_SELECT_SCOPE","length","long"],[1,"slds-button","slds-button--brand",3,"click"],["label","LBL_GLOBAL"],["label","LBL_CUSTOM"]],template:function(e,t){1&e&&(u.j41(0,"system-modal",0)(1,"system-modal-header"),u.nrm(2,"system-label",1),u.k0s(),u.j41(3,"system-modal-content")(4,"div",2),u.nrm(5,"system-label",3),u.k0s()(),u.j41(6,"system-modal-footer")(7,"button",4),u.bIt("click",(function(){return t.setLabel("global")})),u.nrm(8,"system-label",5),u.k0s(),u.j41(9,"button",4),u.bIt("click",(function(){return t.setLabel("custom")})),u.nrm(10,"system-label",6),u.k0s()()())},dependencies:[f.W,b.D,y.I,v.Q,k.C],encapsulation:2})}return SystemLabelEditorGlobalCustomModal})();var ht=s(45915),gt=s(44985),pt=s(90609),ft=s(97466),bt=s(71614),yt=s(79355),vt=s(88980),_t=s(17368),kt=s(10063),Rt=s(23658),It=s(50910),xt=s(345),jt=s(98217);let Gt=(()=>{class SystemObjectPreviewModal{constructor(e,t){this.language=e,this.sanitizer=t,this.self={},this.type="",this.name="",this.loadingerror=!1,this.downloadTrigger$=new u.bkB}closeModal(){this.self.destroy()}static#e=this.ɵfac=function(e){return new(e||SystemObjectPreviewModal)(u.rXU(m.B),u.rXU(xt.up))};static#t=this.ɵcmp=u.VBU({type:SystemObjectPreviewModal,selectors:[["system-object-preview-modal"]],inputs:{type:"type",name:"name",loadingerror:"loadingerror",data:"data"},decls:9,vars:5,consts:[["size","large"],[3,"close"],["margin","none"],[3,"data","type","downloadTrigger$","name"],[1,"slds-text-align--right"],[1,"slds-button","slds-button--icon","slds-button--icon-border",3,"click"],["icon","download","size","small"]],template:function(e,t){1&e&&(u.j41(0,"system-modal",0)(1,"system-modal-header",1),u.bIt("close",(function(){return t.closeModal()})),u.EFF(2),u.k0s(),u.j41(3,"system-modal-content",2),u.nrm(4,"system-object-preview",3),u.k0s(),u.j41(5,"system-modal-footer")(6,"div",4)(7,"button",5),u.bIt("click",(function(){return t.downloadTrigger$.emit()})),u.nrm(8,"system-button-icon",6),u.k0s()()()()),2&e&&(u.R7$(2),u.JRh(t.name),u.R7$(2),u.Y8G("data",t.data)("type",t.type)("downloadTrigger$",t.downloadTrigger$)("name",t.name))},dependencies:[p.t,b.D,y.I,v.Q,k.C,jt.$],encapsulation:2})}return SystemObjectPreviewModal})();var Ct=s(72793);function wt(e,t){1&e&&(u.j41(0,"span",8),u.qSk(),u.j41(1,"svg",9),u.nrm(2,"use",10),u.k0s(),u.joV(),u.j41(3,"span",11),u.nrm(4,"system-label",12),u.k0s()())}function St(e,t){1&e&&(u.j41(0,"span",13),u.qSk(),u.j41(1,"svg",9),u.nrm(2,"use",14),u.k0s(),u.joV(),u.j41(3,"span",11),u.nrm(4,"system-label",15),u.k0s()())}function Et(e,t){1&e&&(u.j41(0,"span",16),u.qSk(),u.j41(1,"svg",9),u.nrm(2,"use",17),u.k0s(),u.joV(),u.j41(3,"span",11),u.nrm(4,"system-label",18),u.k0s()())}let Lt=(()=>{class SystemProgressRing{constructor(e){this.language=e,this.percentage=100,this.size=24,this.status=""}get style(){return{height:this.size+"px",width:this.size+"px"}}get innerStyle(){return this.backgroundcolor?{background:this.backgroundcolor}:{}}get fillPercentage(){return this.percentage/100}get d(){return"M 1 0 A 1 1 0 "+(this.percentage>50?"1":"0")+" 1 "+Math.cos(2*Math.PI*this.fillPercentage)+" "+Math.sin(2*Math.PI*this.fillPercentage)+" L 0 0"}get ringClass(){if(""==this.status&&this.percentage>=100)return"slds-progress-ring_complete";switch(this.status){case"warning":return"slds-progress-ring_warning";case"expired":return"slds-progress-ring_expired"}}get iconstatus(){return this.percentage>=100?"complete":this.status}static#e=this.ɵfac=function(e){return new(e||SystemProgressRing)(u.rXU(m.B))};static#t=this.ɵcmp=u.VBU({type:SystemProgressRing,selectors:[["system-progress-ring"]],inputs:{percentage:"percentage",size:"size",status:"status",backgroundcolor:"backgroundcolor"},decls:8,vars:6,consts:[[1,"slds-progress-ring",3,"ngClass"],["role","progressbar","aria-valuemin","0","aria-valuemax","100","aria-valuenow","88",1,"slds-progress-ring__progress"],["viewBox","-1 -1 2 2"],[1,"slds-progress-ring__path"],[1,"slds-progress-ring__content",3,"ngStyle"],["class","slds-icon_container slds-icon-utility-warning","title","Warning",4,"ngIf"],["class","slds-icon_container slds-icon-utility-error","title","Expired",4,"ngIf"],["class","slds-icon_container slds-icon-utility-check","title","Complete",4,"ngIf"],["title","Warning",1,"slds-icon_container","slds-icon-utility-warning"],["aria-hidden","true",1,"slds-icon"],[0,"xmlns","xlink","http://www.w3.org/1999/xlink",0,"xlink","href","vendor/sldassets/icons/utility-sprite/svg/symbols.svg#warning"],[1,"slds-assistive-text"],["label","LBL_WARNING"],["title","Expired",1,"slds-icon_container","slds-icon-utility-error"],[0,"xmlns","xlink","http://www.w3.org/1999/xlink",0,"xlink","href","vendor/sldassets/icons/utility-sprite/svg/symbols.svg#error"],["label","LBL_EXPIRED"],["title","Complete",1,"slds-icon_container","slds-icon-utility-check"],[0,"xmlns","xlink","http://www.w3.org/1999/xlink",0,"xlink","href","vendor/sldassets/icons/utility-sprite/svg/symbols.svg#check"],["label","LBL_COMPLETE"]],template:function(e,t){1&e&&(u.j41(0,"div",0)(1,"div",1),u.qSk(),u.j41(2,"svg",2),u.nrm(3,"path",3),u.k0s()(),u.joV(),u.j41(4,"div",4),u.DNE(5,wt,5,0,"span",5)(6,St,5,0,"span",6)(7,Et,5,0,"span",7),u.k0s()()),2&e&&(u.Y8G("ngClass",t.ringClass),u.R7$(3),u.BMQ("d",t.d),u.R7$(),u.Y8G("ngStyle",t.innerStyle),u.R7$(),u.Y8G("ngIf","warning"==t.iconstatus),u.R7$(),u.Y8G("ngIf","expired"==t.iconstatus),u.R7$(),u.Y8G("ngIf","complete"==t.iconstatus))},dependencies:[n.YU,n.bT,n.B3,f.W],encapsulation:2})}return SystemProgressRing})();var Dt=s(37804),Ft=s(5868),Mt=s(34411),Tt=s(35911);function Bt(e,t){1&e&&u.nrm(0,"system-label",25)}function $t(e,t){1&e&&u.nrm(0,"system-label",26)}function Ot(e,t){if(1&e&&(u.j41(0,"div",32),u.nrm(1,"system-label",33),u.k0s()),2&e){const e=u.XpG(2);u.R7$(),u.Y8G("label",e.urlErrorLabel)}}const Xt=e=>({"slds-has-error":e});function Ut(e,t){if(1&e){const e=u.RV6();u.j41(0,"div",27)(1,"label",10)(2,"abbr",28),u.EFF(3,"*"),u.k0s(),u.nrm(4,"system-label",29),u.k0s(),u.j41(5,"system-input-text",30),u.mxI("ngModelChange",(function(t){u.eBV(e);const s=u.XpG();return u.DH7(s.url,t)||(s.url=t),u.Njj(t)})),u.bIt("ngModelChange",(function(){u.eBV(e);const t=u.XpG();return u.Njj(t.checkUrl())})),u.k0s(),u.DNE(6,Ot,2,1,"div",31),u.k0s()}if(2&e){const e=u.XpG();u.Y8G("ngClass",u.eq3(3,Xt,!!e.urlErrorLabel)),u.R7$(5),u.R50("ngModel",e.url),u.R7$(),u.Y8G("ngIf",e.urlErrorLabel)}}function Yt(e,t){if(1&e){const e=u.RV6();u.j41(0,"div",34)(1,"label",10),u.nrm(2,"system-label",35),u.k0s(),u.j41(3,"system-input-text",36),u.mxI("ngModelChange",(function(t){u.eBV(e);const s=u.XpG();return u.DH7(s.text,t)||(s.text=t),u.Njj(t)})),u.bIt("blur",(function(){u.eBV(e);const t=u.XpG();return u.Njj(t.changeTextIsUrl())})),u.k0s()()}if(2&e){const e=u.XpG();u.R7$(3),u.R50("ngModel",e.text)}}function Nt(e,t){if(1&e&&(u.j41(0,"option",44),u.EFF(1),u.k0s()),2&e){const e=t.$implicit;u.Y8G("ngValue",e.id),u.R7$(),u.JRh(e.name)}}function Vt(e,t){if(1&e&&(u.j41(0,"div",32),u.nrm(1,"system-label",33),u.k0s()),2&e){const e=u.XpG(2);u.R7$(),u.Y8G("label",e.marketingActionErrorLabel)}}function At(e,t){if(1&e){const e=u.RV6();u.j41(0,"div",37)(1,"label",38),u.nrm(2,"system-label",39),u.k0s(),u.j41(3,"div",40)(4,"div",41)(5,"select",42),u.mxI("ngModelChange",(function(t){u.eBV(e);const s=u.XpG();return u.DH7(s.marketingAction,t)||(s.marketingAction=t),u.Njj(t)})),u.DNE(6,Nt,2,2,"option",43),u.k0s()()(),u.DNE(7,Vt,2,1,"div",31),u.k0s()}if(2&e){const e=u.XpG();u.Y8G("ngClass",u.eq3(5,Xt,!!e.marketingActionErrorLabel)),u.R7$(5),u.R50("ngModel",e.marketingAction),u.Y8G("disabled",null==e.editorService.marketingActions),u.R7$(),u.Y8G("ngForOf",e.editorService.marketingActions),u.R7$(),u.Y8G("ngIf",e.marketingActionErrorLabel)}}const Pt=()=>({value:"id",label:"LBL_BY_ID"}),zt=()=>({value:void 0,icon:"topic2",label:"LBL_NONE"}),Ht=()=>({value:"url",icon:"link",label:"LBL_BY_URL"}),qt=(e,t,s)=>[e,t,s];function Jt(e,t){if(1&e){const e=u.RV6();u.qex(0),u.j41(1,"div",45)(2,"label",10),u.nrm(3,"system-label",46),u.k0s(),u.j41(4,"system-input-radio-button-group",47),u.bIt("ngModelChange",(function(t){u.eBV(e);const s=u.XpG();return u.Njj(s.setTrackByMethod(t))})),u.k0s()(),u.bVm()}if(2&e){const e=u.XpG();u.R7$(4),u.Y8G("ngModel",e.trackByMethod)("inputOptions",u.sMw(5,qt,u.lJ4(2,Pt),u.lJ4(3,zt),u.lJ4(4,Ht)))}}let Wt=(()=>{class SystemRichTextLink{constructor(e,t,s){this.model=e,this.backend=t,this.modal=s,this.url="",this.text="",this.toTrack=!1,this.marketingAction="",this.trackingId="",this.urlErrorLabel="",this.marketingActionErrorLabel="",this.canSubmit=!1,this.alterMode=!1,this.textIsUrl=!1,this.response=new z.B,this.linkType="conv"}setTrackByMethod(e){this.trackByMethod=e,"id"==e?this.openTrackingLinkSelectModal():this.trackingId=void 0}openTrackingLinkSelectModal(){const e=[{value:"select",display:"LBL_SELECT"},{value:"new",display:"LBL_NEW"},{value:void 0,display:"LBL_CANCEL"}];this.modal.prompt("input","LBL_MAKE_SELECTION","LBL_TRACKINGLINKS","shade","select",e,"button").subscribe((e=>{if(e)switch(e){case"new":const e={name:this.text,url:this.url};this.model.addModel("",null,e,!0).subscribe((e=>{this.trackingId=e.id}));break;case"select":this.modal.openModal("ObjectModalModuleLookup").subscribe((e=>{e.instance.module="EmailTrackingLinks",e.instance.multiselect=!1,e.instance.selectedItems.subscribe((e=>{this.trackingId=e[0].id}))}))}}))}ngOnInit(){this.model.module="EmailTrackingLinks",this.url=this.url.trim(),this.text=this.text.trim(),this.urlHasProtocol(this.url)||(this.url="https://"),this.textIsUrl=!this.text,this.url&&(this.url=this.url.trim()),this.marketingAction&&(this.linkType="mark"),this.loadMarketingActions()}urlHasProtocol(e){return/^[a-zA-Z]+\:\/\//.test(e.trim())}urlIsValid(e){return/^[a-zA-Z]+\:\/\/.+/.test(e.trim())}checkUrl(){let e=this.url.trim();return e?this.urlIsValid(e)?this.urlErrorLabel="":this.urlErrorLabel="LBL_INPUT_INVALID":this.urlErrorLabel="MSG_INPUT_REQUIRED",this.textIsUrl&&(this.text=this.url),!this.urlErrorLabel}checkMarketingAction(){return this.marketingAction?this.marketingActionErrorLabel="":this.marketingActionErrorLabel="MSG_INPUT_REQUIRED",!this.marketingActionErrorLabel}changeTextIsUrl(){this.text?this.url!=this.text&&(this.textIsUrl=!1):this.textIsUrl=!0}submit(){if("conv"===this.linkType&&!this.checkUrl())return;if("mark"===this.linkType&&!this.checkMarketingAction())return;let e={url:"conv"===this.linkType?this.url.trim():"",trackingId:"conv"===this.linkType?this.trackingId??"":void 0,text:void 0,linkType:this.linkType,trackByMethod:this.trackByMethod,marketingAction:"mark"===this.linkType?this.marketingAction:void 0};this.alterMode||(e.text=this.text.trim()),this.response.next(e),this.response.complete(),this.self.destroy()}cancel(){this.response.next(null),this.response.complete(),this.self.destroy()}loadMarketingActions(){this.editorService.loadMarketingActions()}static#e=this.ɵfac=function(e){return new(e||SystemRichTextLink)(u.rXU(Tt.g),u.rXU(et.H),u.rXU(st.y))};static#t=this.ɵcmp=u.VBU({type:SystemRichTextLink,selectors:[["ng-component"]],inputs:{url:"url",text:"text",toTrack:"toTrack",marketingAction:"marketingAction",trackingId:"trackingId",parent:"parent"},features:[u.Jv_([Tt.g])],decls:29,vars:8,consts:[["size","small"],[3,"close"],["label","LBL_ADD_LINK",4,"ngIf"],["label","LBL_EDIT_LINK",4,"ngIf"],[1,"slds-form-element","slds-m-bottom--x-small"],[1,"slds-form-element__control","slds-grid"],[1,"slds-radio"],["type","radio","id","radioConvLink","name","linkType","value","conv",3,"ngModel","ngModelChange"],["for","radioConvLink",1,"slds-radio__label"],[1,"slds-radio_faux"],[1,"slds-form-element__label"],["label","LBL_CONVENTIONAL_LINK"],[1,"slds-radio","slds-m-left--small"],["type","radio","id","radioMarketingLink","name","linkType","value","mark",3,"ngModel","ngModelChange"],["for","radioMarketingLink",1,"slds-radio__label"],["label","LBL_MARKETING_ACTION_LINK"],["class","slds-form-element__control",3,"ngClass",4,"ngIf"],[1,"slds-grid","slds-m-top--small","slds-gutters_x-small"],["class","slds-form-element__control slds-col",4,"ngIf"],["class","slds-form-element slds-col",3,"ngClass",4,"ngIf"],[4,"ngIf"],[1,"slds-button","slds-button--neutral",3,"click"],["label","LBL_CANCEL"],[1,"slds-button","slds-button--brand",3,"click"],["label","LBL_OK"],["label","LBL_ADD_LINK"],["label","LBL_EDIT_LINK"],[1,"slds-form-element__control",3,"ngClass"],[1,"slds-required"],["label","LBL_URL"],[3,"ngModel","ngModelChange"],["class","slds-form-element__help",4,"ngIf"],[1,"slds-form-element__help"],[3,"label"],[1,"slds-form-element__control","slds-col"],["label","LBL_TEXT"],[3,"ngModel","ngModelChange","blur"],[1,"slds-form-element","slds-col",3,"ngClass"],["for","marketingAction",1,"slds-form-element__label"],["label","LBL_MARKETING_ACTION"],[1,"slds-form-element__control"],[1,"slds-select_container"],["id","marketingAction",1,"slds-select",3,"ngModel","disabled","ngModelChange"],[3,"ngValue",4,"ngFor","ngForOf"],[3,"ngValue"],[1,"slds-form-element","slds-col","slds-grow-none"],["label","LBL_CLICKS_TRACKABLE"],[1,"spice-display-block",3,"ngModel","inputOptions","ngModelChange"]],template:function(e,t){1&e&&(u.j41(0,"system-modal",0)(1,"system-modal-header",1),u.bIt("close",(function(){return t.cancel()})),u.DNE(2,Bt,1,0,"system-label",2)(3,$t,1,0,"system-label",3),u.k0s(),u.j41(4,"system-modal-content")(5,"fieldset",4)(6,"div",5)(7,"span",6)(8,"input",7),u.mxI("ngModelChange",(function(e){return u.DH7(t.linkType,e)||(t.linkType=e),e})),u.k0s(),u.j41(9,"label",8),u.nrm(10,"span",9),u.j41(11,"span",10),u.nrm(12,"system-label",11),u.k0s()()(),u.j41(13,"span",12)(14,"input",13),u.mxI("ngModelChange",(function(e){return u.DH7(t.linkType,e)||(t.linkType=e),e})),u.k0s(),u.j41(15,"label",14),u.nrm(16,"span",9),u.j41(17,"span",10),u.nrm(18,"system-label",15),u.k0s()()()()(),u.DNE(19,Ut,7,5,"div",16),u.j41(20,"div",17),u.DNE(21,Yt,4,1,"div",18)(22,At,8,7,"div",19)(23,Jt,5,9,"ng-container",20),u.k0s()(),u.j41(24,"system-modal-footer")(25,"button",21),u.bIt("click",(function(){return t.cancel()})),u.nrm(26,"system-label",22),u.k0s(),u.j41(27,"button",23),u.bIt("click",(function(){return t.submit()})),u.nrm(28,"system-label",24),u.k0s()()()),2&e&&(u.R7$(2),u.Y8G("ngIf",!t.alterMode),u.R7$(),u.Y8G("ngIf",t.alterMode),u.R7$(5),u.R50("ngModel",t.linkType),u.R7$(6),u.R50("ngModel",t.linkType),u.R7$(5),u.Y8G("ngIf","conv"===t.linkType),u.R7$(2),u.Y8G("ngIf",!t.alterMode),u.R7$(),u.Y8G("ngIf","mark"===t.linkType),u.R7$(),u.Y8G("ngIf","conv"===t.linkType))},dependencies:[n.YU,n.Sq,n.bT,l.xH,l.y7,l.me,l.wz,l.Fm,l.BC,l.vS,_e.H,Ae.s,f.W,b.D,y.I,v.Q,k.C],encapsulation:2})}return SystemRichTextLink})();var Kt=s(96697),Qt=s(4466),Zt=s(82802),es=s(18521);const ts=["sourceeditor"];function ss(e,t){if(1&e){const e=u.RV6();u.j41(0,"div",19)(1,"button",20),u.bIt("click",(function(){u.eBV(e);const t=u.XpG();return u.Njj(t.nextResult())})),u.nrm(2,"system-button-icon",21),u.k0s(),u.j41(3,"button",20),u.bIt("click",(function(){u.eBV(e);const t=u.XpG();return u.Njj(t.previewResult())})),u.nrm(4,"system-button-icon",22),u.k0s()()}if(2&e){const e=u.XpG();u.R7$(),u.Y8G("disabled",e.nextDisabled)("title",e.language.getLabel("LBL_NEXT")),u.R7$(2),u.Y8G("disabled",e.previewDisabled)("title",e.language.getLabel("LBL_PREVIEW"))}}function is(e,t){if(1&e){const e=u.RV6();u.j41(0,"button",23),u.bIt("click",(function(){u.eBV(e);const t=u.XpG();return u.Njj(t.openTemplateVariableHelper())})),u.nrm(1,"system-button-icon",24),u.k0s()}if(2&e){const e=u.XpG();u.Y8G("disabled",!e.isUserInsideEditor)("title",e.language.getLabel("LBL_TEMPLATE_VARIABLE_HELPER"))}}let ns=(()=>{class SystemRichTextSourceModal{constructor(e,t,s,i,n,l,o,a,r){this.language=e,this.renderer=t,this.sanitized=s,this.libloader=i,this.injector=n,this.model=l,this.modal=o,this.editorService=a,this._document=r,this.self={},this._html="",this.searchtext="",this.foundIndices=[],this.currentIndex=-1,this.html=new u.bkB,this.isUserInsideEditor=!1,this.editorId=_.uniqueId(),this.eventListener=[],this.beautifyenabled=!1,this.libloader.loadLib("jsbeautify").subscribe((e=>{this.beautifyenabled=!0}))}get nextDisabled(){return this.currentIndex==this.foundIndices.length-1}get previewDisabled(){return 0==this.currentIndex}get searchText(){return this.searchtext}set searchText(e){this.currentIndex=0,this.searchtext=e}get sanitizedHtml(){return this.sanitized.bypassSecurityTrustHtml(this._html)}ngOnInit(){this.renderer.setProperty(this.sourceEditor.nativeElement,"innerText",this._html),this.eventListener.push(this.renderer.listen("document","click",(()=>this.isUserInsideEditor=this.testIsUserInsideEditor()))),this.eventListener.push(this.renderer.listen("document","keyup",(()=>(this.isUserInsideEditor=this.testIsUserInsideEditor(),!0))))}keyUp(e){(13==e.which||13==e.keyCode&&this.searchText.length>0)&&(this.currentIndex=0,this.selectFoundText())}findTextIndices(e,t){this.foundIndices=[],e=e.toLowerCase();let s,i=0;for(;i<t.length&&(s=t.indexOf(e,i),s>-1);)this.foundIndices.push(s),i=s+e.length}getTextNodesIn(e){let t=[];if(3==e.nodeType)t.push(e);else{let s=e.childNodes;s.forEach(((e,i)=>t.concat(this.getTextNodesIn(s[i]))));for(let e=0,i=s.length;e<i;++e)t.push.apply(t,this.getTextNodesIn(s[e]))}return t}selectFoundText(){let e=this.sourceEditor.nativeElement;if(document.createRange&&window.getSelection){let t=document.createRange();t.selectNodeContents(e);let s=this.getTextNodesIn(e);this.findTextIndices(this.searchText,s.map((e=>e.data)).join(""));let i=this.foundIndices[this.currentIndex],n=i+this.searchText.length,l=0;s.some((e=>{let s=l+e.length;if(i<s&&n>l)return t.setStart(e,i-l),t.setEnd(e,n-l),!0;l+=e.length}));let o=window.getSelection();o.removeAllRanges(),o.addRange(t)}else if(document.hasOwnProperty("selection")&&document.body.hasOwnProperty("createTextRange")){let t=document.body.createTextRange();t.moveToElementText(e),t.collapse(!0),this.findTextIndices(this.searchText,this._html);let s=this.foundIndices[this.currentIndex],i=s+this.searchText.length;t.moveEnd("character",i),t.moveStart("character",s),t.select()}}beautify(){this.renderer.setProperty(this.sourceEditor.nativeElement,"innerText",html_beautify(this.sourceEditor.nativeElement.innerText,{indent_size:4,indent_char:" ",indent_with_tabs:!1,end_with_newline:!1,indent_level:0,preserve_newlines:!0,max_preserve_newlines:10,space_in_paren:!1,space_in_empty_paren:!1,unindent_chained_methods:!1,break_chained_methods:!1,keep_array_indentation:!1,unescape_strings:!1,wrap_line_length:100,e4x:!1,comma_first:!1,operator_position:"before-newline",indent_empty_lines:!1,templating:["auto"]}))}nextResult(){this.currentIndex<this.foundIndices.length&&(this.currentIndex++,this.selectFoundText())}previewResult(){this.currentIndex>0&&(this.currentIndex--,this.selectFoundText())}onContentChange(e){this._html=e}close(){this.html.emit(this._html),this.self.destroy()}get useTemplateVariableHelper(){return"OutputTemplates"===this.model?.module||"EmailTemplates"===this.model?.module||"CampaignTasks"===this.model?.module}openTemplateVariableHelper(){this.editorService.saveSelection(),this.modal.openModal("OutputTemplatesVariableHelper",null,this.injector).pipe((0,Kt.s)(1)).subscribe((e=>{e.instance.response.pipe((0,Kt.s)(1)).subscribe((e=>{this.focusEditor(),this.editorService.restoreSelection(),this._document.execCommand("insertText",!1,"{"+e+"}")}))}))}focusEditor(){this.sourceEditor.nativeElement.focus()}testIsUserInsideEditor(){if(window.getSelection){let e=window.getSelection().focusNode;for(;e&&e.id!==this.editorId&&e.parentNode;)e=e.parentNode;return e?.id===this.editorId}return!1}ngOnDestroy(){this.eventListener.forEach((e=>e()))}onModalEscX(){this.close()}static#e=this.ɵfac=function(e){return new(e||SystemRichTextSourceModal)(u.rXU(m.B),u.rXU(u.sFG),u.rXU(xt.up),u.rXU(Zt.b),u.rXU(u.zZn),u.rXU(Tt.g,8),u.rXU(st.y),u.rXU(Qt.Q),u.rXU(n.qQ))};static#t=this.ɵcmp=u.VBU({type:SystemRichTextSourceModal,selectors:[["system-richtext-sourcemodal"]],viewQuery:function(e,t){if(1&e&&u.GBs(ts,7),2&e){let e;u.mGM(e=u.lsd())&&(t.sourceEditor=e.first)}},features:[u.Jv_([Qt.Q])],decls:21,vars:8,consts:[["size","large"],[3,"close"],["label","LBL_SOURCE_EDITOR"],[1,"slds-grid",2,"height","70vh"],[1,"slds-size--1-of-2","slds-p-right--xx-small"],[1,"slds-box","slds-theme--default","slds-scrollable_y","slds-rich-text-editor__output",2,"height","100%",3,"innerHtml"],[1,"slds-size--1-of-2","slds-p-left--x-small"],[1,"slds-p-bottom--xx-small","slds-grid"],["role","none",1,"slds-grow","slds-combobox__form-element","slds-input-has-icon","slds-input-has-icon_left-right","slds-global-search__form-element"],["icon","search","addclasses","slds-input__icon slds-input__icon--left"],["type","text",1,"slds-input",3,"placeholder","ngModel","keyup","ngModelChange"],["class","slds-grid slds-grid--align-spread slds-input__icon_right slds-is-absolute__top","style","height: 100%",4,"ngIf"],["class","slds-m-left--xx-small slds-button slds-button--icon-border slds-button--neutral",3,"disabled","title","click",4,"ngIf"],[1,"slds-m-left--xx-small","slds-button","slds-button--icon-border","slds-button--neutral",3,"disabled","click"],["icon","right_align_text"],[1,"slds-box","slds-m-around--none","slds-theme--default","slds-scrollable_y",2,"height","calc(100% - 36px)",3,"id","input"],["sourceeditor",""],[1,"slds-button","slds-button--neutral",3,"click"],["label","LBL_CLOSE"],[1,"slds-grid","slds-grid--align-spread","slds-input__icon_right","slds-is-absolute__top",2,"height","100%"],[1,"slds-button","slds-button_icon","slds-input__icon",2,"position","relative",3,"disabled","title","click"],["icon","arrowdown"],["icon","arrowup"],[1,"slds-m-left--xx-small","slds-button","slds-button--icon-border","slds-button--neutral",3,"disabled","title","click"],["icon","variable"]],template:function(e,t){1&e&&(u.j41(0,"system-modal",0)(1,"system-modal-header",1),u.bIt("close",(function(){return t.close()})),u.nrm(2,"system-label",2),u.k0s(),u.j41(3,"system-modal-content")(4,"div",3)(5,"div",4),u.nrm(6,"div",5),u.k0s(),u.j41(7,"div",6)(8,"div",7)(9,"div",8),u.nrm(10,"system-utility-icon",9),u.j41(11,"input",10),u.bIt("keyup",(function(e){return t.keyUp(e)})),u.mxI("ngModelChange",(function(e){return u.DH7(t.searchText,e)||(t.searchText=e),e})),u.k0s(),u.DNE(12,ss,5,4,"div",11),u.k0s(),u.DNE(13,is,2,2,"button",12),u.j41(14,"button",13),u.bIt("click",(function(){return t.beautify()})),u.nrm(15,"system-button-icon",14),u.k0s()(),u.j41(16,"pre",15,16),u.bIt("input",(function(e){return t.onContentChange(e.target.innerText)})),u.k0s()()()(),u.j41(18,"system-modal-footer")(19,"button",17),u.bIt("click",(function(){return t.close()})),u.nrm(20,"system-label",18),u.k0s()()()),2&e&&(u.R7$(6),u.Y8G("innerHtml",t.sanitizedHtml,u.npT),u.R7$(5),u.Y8G("placeholder",t.language.getLabel("LBL_SEARCH")),u.R50("ngModel",t.searchText),u.R7$(),u.Y8G("ngIf",t.foundIndices.length>1),u.R7$(),u.Y8G("ngIf",t.useTemplateVariableHelper),u.R7$(),u.Y8G("disabled",!t.beautifyenabled),u.R7$(2),u.Y8G("id",t.editorId),u.BMQ("contenteditable",!0))},dependencies:[n.bT,l.me,l.BC,l.vS,p.t,f.W,b.D,y.I,v.Q,k.C,es.B],encapsulation:2})}return SystemRichTextSourceModal})();var ls=s(40553),os=s(48849),as=s(54546);function rs(e,t){if(1&e){const e=u.RV6();u.j41(0,"li",7),u.bIt("click",(function(){const t=u.eBV(e).$implicit,s=u.XpG();return u.Njj(s.setActiveRole(t.id))})),u.j41(1,"a",8)(2,"div")(3,"span",2),u.nrm(4,"system-label",3),u.k0s()(),u.nrm(5,"system-label",9),u.k0s()()}if(2&e){const e=t.$implicit;u.R7$(3),u.Y8G("ngClass",e.icon),u.R7$(),u.Y8G("label",e.label),u.R7$(),u.Y8G("label",e.label)}}let ds=(()=>{class SystemRoleSelector{constructor(e,t,s,i){this.language=e,this.metadata=t,this.broadcast=s,this.userpreferences=i,this.roles=[]}ngOnInit(){this.getRoles()}getRoles(){this.roles=this.metadata.getRoles()}get activeRole(){return this.metadata.getActiveRole()}setActiveRole(e){this.metadata.setActiveRole(e),this.userpreferences.setPreference("userrole",e),this.broadcast.broadcastMessage("applauncher.setrole",e)}static#e=this.ɵfac=function(e){return new(e||SystemRoleSelector)(u.rXU(m.B),u.rXU(h.yu),u.rXU(ls.m),u.rXU(os.S))};static#t=this.ɵcmp=u.VBU({type:SystemRoleSelector,selectors:[["system-role-selector"]],decls:7,vars:5,consts:[["system-dropdown-trigger-simple","",1,"slds-dropdown-trigger","slds-dropdown-trigger_click"],[1,"slds-button","slds-p-horizontal--xx-small",3,"disabled","title"],[1,"slds-avatar--small","slds-align--absolute-center","slds-line-height_reset",2,"line-height","25px",3,"ngClass"],["length","short",3,"label"],[1,"slds-dropdown","slds-dropdown--bottom","slds-dropdown_right"],["role","menu","aria-label","Show More",1,"slds-dropdown__list"],["class","slds-dropdown__item","role","presentation",3,"click",4,"ngFor","ngForOf"],["role","presentation",1,"slds-dropdown__item",3,"click"],["href","javascript:void(0);","role","menuitem"],[1,"slds-grow","slds-p-left--x-small",3,"label"]],template:function(e,t){1&e&&(u.j41(0,"div",0)(1,"button",1)(2,"span",2),u.nrm(3,"system-label",3),u.k0s()(),u.j41(4,"div",4)(5,"ul",5),u.DNE(6,rs,6,3,"li",6),u.k0s()()()),2&e&&(u.R7$(),u.Y8G("disabled",t.roles.length<2)("title",t.language.getLabel(t.activeRole.label,void 0,"short")),u.R7$(),u.Y8G("ngClass",t.activeRole.icon),u.R7$(),u.Y8G("label",t.activeRole.label),u.R7$(3),u.Y8G("ngForOf",t.roles))},dependencies:[as.C,n.YU,n.Sq,f.W],encapsulation:2})}return SystemRoleSelector})();var cs=s(12883),us=s(86262),ms=s(10727),hs=s(63940),gs=s(19923),ps=s(48717);function fs(e,t){if(1&e&&u.nrm(0,"system-componentset",3),2&e){const e=u.XpG();u.Y8G("componentset",e.componentSetLeft)}}function bs(e,t){if(1&e&&u.nrm(0,"system-componentset",3),2&e){const e=u.XpG();u.Y8G("componentset",e.componentSetRight)}}let ys=(()=>{class SystemSplitView{constructor(){this.componentconfig={}}get componentSetLeft(){return this.componentconfig.left}get componentSetRight(){return this.componentconfig.right}static#e=this.ɵfac=function(e){return new(e||SystemSplitView)};static#t=this.ɵcmp=u.VBU({type:SystemSplitView,selectors:[["system-split-view"]],inputs:{componentconfig:"componentconfig"},decls:5,vars:2,consts:[[1,"slds-grid","slds-gutters_direct-xx-small"],[1,"slds-col","slds-size--1-of-1","slds-large-size--1-of-2"],[3,"componentset",4,"ngIf"],[3,"componentset"]],template:function(e,t){1&e&&(u.j41(0,"div",0)(1,"div",1),u.DNE(2,fs,1,1,"system-componentset",2),u.k0s(),u.j41(3,"div",1),u.DNE(4,bs,1,1,"system-componentset",2),u.k0s()()),2&e&&(u.R7$(2),u.Y8G("ngIf",t.componentSetLeft),u.R7$(2),u.Y8G("ngIf",t.componentSetRight))},dependencies:[n.bT,P.F],encapsulation:2})}return SystemSplitView})();var vs=s(43308),_s=s(42205),ks=s(15059);let Rs=(()=>{class SystemTinyMCE{get content(){return this.elementContent}set content(e){this.elementContent=e,this.contentChange.emit(this.elementContent)}constructor(e,t){this.metadata=e,this.configurationService=t,this.elementid="mytinymce",this.height="250px",this.stylesheetId="",this.elementContent="new content",this.tinymceConfig={selector:"#"+this.elementid,remove_script_host:!0,relative_urls:!1,document_base_url:this.configurationService.getFrontendUrl(),menubar:!1,statusbar:!0,resize:!0,browser_spellcheck:!0,image_advtab:!0,paste_as_text:!0,paste_filter_drop:!0,plugins:["link","code","image","lists","paste","table"],toolbar:"undo redo | formatselect | styleselect bold italic removeformat | bullist numlist | link image table | code",skin_url:"vendor/tinymce/skins/lightgray",setup:e=>{this.editor=e,e.on("keyup",(()=>{const t=e.getContent();this.content=t}))},formats:{alignleft:{selector:"p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li,table,img",classes:"align-left"},aligncenter:{selector:"p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li,table,img",classes:"align-center"},alignright:{selector:"p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li,table,img",classes:"align-right"},alignjustify:{selector:"p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li,table,img",classes:"align-justify"},strikethrough:{inline:"del"}},style_formats:[{title:"Inline",items:[{title:"fett",icon:"bold",format:"bold"},{title:"kursiv",icon:"italic",format:"italic"},{title:"unterstrichen",icon:"underline",format:"underline"},{title:"strikethrough",icon:"strikethrough",format:"strikethrough"},{title:"hochgestellt",icon:"superscript",format:"superscript"},{title:"tiefgestellt",icon:"subscript",format:"subscript"}]},{title:"Ausrichtung",items:[{title:"links",icon:"alignleft",format:"alignleft"},{title:"mittig",icon:"aligncenter",format:"aligncenter"},{title:"rechts",icon:"alignright",format:"alignright"},{title:"Blocksatz",icon:"alignjustify",format:"alignjustify"}]}],style_formats_merge:!1,body_class:"spice"},this.contentChange=new u.bkB}setStylesheet(){let e=[];if(_.isEmpty(this.stylesheetId))delete this.tinymceConfig.content_style;else{if(e=this.metadata.getHtmlFormats(this.stylesheetId),e.length){let t=0;this.tinymceConfig.block_formats="",this.tinymceConfig.extended_valid_elements=[],this.tinymceConfig.custom_elements=[],this.tinymceConfig.block_formats+="Absatz=p;",this.tinymceConfig.style_formats.push({title:"Weiteres",items:[]});for(let s of e)if(_.isEmpty(s.block))this.tinymceConfig.style_formats[2].items.push({title:s.name,inline:s.inline,classes:s.classes,styles:s.styles});else{let e;t++,this.tinymceConfig.formats[e="custom_format_"+t]={title:s.name,inline:s.inline,block:s.block,classes:s.classes,styles:s.styles,wrapper:Boolean(Number(s.wrapper))},this.tinymceConfig.block_formats+=s.name+"="+e+";",this.tinymceConfig.extended_valid_elements.indexOf(s.block)&&this.tinymceConfig.extended_valid_elements.push(s.block),this.tinymceConfig.custom_elements.indexOf(s.block)&&this.tinymceConfig.custom_elements.push(s.block)}0===this.tinymceConfig.style_formats[2].items.length&&this.tinymceConfig.style_formats.splice(2,1)}this.tinymceConfig.content_style=this.metadata.getHtmlStylesheetCode(this.stylesheetId)}}updateevent(){this.content=this.editor.getContent()}getStyle(){return{height:this.height}}ngAfterViewInit(){this.metadata.loadLibs("tinymce").subscribe((e=>{this.setStylesheet(),tinymce.init(this.tinymceConfig)}))}ngOnDestroy(){tinymce.remove(this.editor)}ngOnInit(){this.tinymceConfig.selector="#"+this.elementid,this.tinymceConfig.document_base_url=this.configurationService.getFrontendUrl()}static#e=this.ɵfac=function(e){return new(e||SystemTinyMCE)(u.rXU(h.yu),u.rXU(Ce.i))};static#t=this.ɵcmp=u.VBU({type:SystemTinyMCE,selectors:[["system-tinymce"]],hostBindings:function(e,t){1&e&&u.bIt("click",(function(){return t.updateevent()}))("keyup",(function(){return t.updateevent()}))},inputs:{elementid:"elementid",height:"height",stylesheetId:"stylesheetId",content:"content"},outputs:{contentChange:"contentChange"},decls:2,vars:3,consts:[[3,"id","ngStyle"]],template:function(e,t){1&e&&(u.j41(0,"textarea",0),u.EFF(1),u.k0s()),2&e&&(u.FS9("id",t.elementid),u.Y8G("ngStyle",t.getStyle()),u.R7$(),u.JRh(t.content))},dependencies:[n.B3],styles:["\n\n\n\n\n\n\n\n\n\n\n[_nghost-%COMP%]   .mce-ico[_ngcontent-%COMP%]{color:#54698d;font-size:12px}","\n\n\n\n\n\n\n\n\n\n\n[_nghost-%COMP%]   .mce-text[_ngcontent-%COMP%]{color:#54698d;font-size:12px}","\n\n\n\n\n\n\n\n\n\n\n[_nghost-%COMP%]   .mce-btn[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{color:#54698d;font-size:12px}","\n\n\n\n\n\n\n\n\n\n\n[_nghost-%COMP%]   .mce-tinymce[_ngcontent-%COMP%]{border-radius:4px}","\n\n\n\n\n\n\n\n\n\n\n[_nghost-%COMP%]   .mce-widget[_ngcontent-%COMP%]{font-family:Titillium Web,sans-serif}"]})}return SystemTinyMCE})(),Is=(()=>{class SystemTinyMCEModal{constructor(e){this.language=e,this.self={},this.content="",this.updateContent=new u.bkB,this.title=""}ngOnInit(){0===this.title.length&&(this.title=this.language.getLabel("LBL_EDITOR"))}closeModal(){this.self.destroy()}contentChange(e){this.content=e,this.updateContent.emit(e)}static#e=this.ɵfac=function(e){return new(e||SystemTinyMCEModal)(u.rXU(m.B))};static#t=this.ɵcmp=u.VBU({type:SystemTinyMCEModal,selectors:[["ng-component"]],decls:8,vars:4,consts:[["size","large"],[3,"close"],[3,"content","stylesheetId","height","contentChange"],[1,"slds-button","slds-button--neutral",3,"click"],["label","LBL_OK"]],template:function(e,t){1&e&&(u.j41(0,"system-modal",0)(1,"system-modal-header",1),u.bIt("close",(function(){return t.closeModal()})),u.EFF(2),u.k0s(),u.j41(3,"system-modal-content")(4,"system-tinymce",2),u.mxI("contentChange",(function(e){return u.DH7(t.content,e)||(t.content=e),e})),u.bIt("contentChange",(function(e){return t.contentChange(e)})),u.k0s()(),u.j41(5,"system-modal-footer")(6,"button",3),u.bIt("click",(function(){return t.closeModal()})),u.nrm(7,"system-label",4),u.k0s()()()),2&e&&(u.R7$(2),u.JRh(t.title),u.R7$(2),u.R50("content",t.content),u.Y8G("stylesheetId",t.stylesheetId)("height","80%"))},dependencies:[f.W,b.D,y.I,v.Q,k.C,Rs],encapsulation:2})}return SystemTinyMCEModal})();var xs=s(89468),js=s(39207),Gs=s(88517),Cs=s(32298);const ws=["imgupload"];function Ss(e,t){if(1&e){const e=u.RV6();u.j41(0,"div")(1,"button",5),u.bIt("click",(function(){u.eBV(e);const t=u.XpG();return u.Njj(t.showUpload())})),u.nrm(2,"system-label",9),u.k0s(),u.j41(3,"input",10,11),u.bIt("click",(function(){u.eBV(e);const t=u.sdS(4);return u.Njj(t.value=null)}))("change",(function(t){u.eBV(e);const s=u.XpG();return u.Njj(s.uploadImage(t))})),u.k0s()()}}function Es(e,t){if(1&e){const e=u.RV6();u.j41(0,"img",12),u.bIt("load",(function(t){u.eBV(e);const s=u.XpG();return u.Njj(s.doCrop(t))})),u.k0s()}if(2&e){const e=u.XpG();u.Y8G("src",e.imageBase64,u.B4B)}}let Ls=(()=>{class SystemUploadImage{constructor(e,t,s,i){this.language=e,this.libloader=t,this.renderer=s,this.sanitizer=i,this.cropheight=200,this.cropwidth=200,this.croptype="circle",this.cropresize=!1,this.imagedata=new u.bkB,this.pasteListener=this.renderer.listen("window","paste",(e=>{e.preventDefault(),e.stopPropagation();let t=e.clipboardData.items[0].getAsFile(),s=window.URL;this.imageBase64=this.sanitizer.bypassSecurityTrustResourceUrl(s.createObjectURL(t))}))}get croppiestyle(){return{height:2*this.cropheight+"px"}}ngOnDestroy(){this.pasteListener()}close(e=!0){e&&this.imagedata.emit(!1),this.self.destroy()}showUpload(){let e=new MouseEvent("click",{bubbles:!0});this.imgupload.element.nativeElement.dispatchEvent(e)}uploadImage(e){let t=new FileReader;t.onloadend=e=>{this.imageBase64=t.result},t.readAsDataURL(e.target.files[0])}doCrop(e){this.croppie||(this.croppie=new Croppie(document.getElementById("croppieimage"),{enableExif:!0,enableOrientation:!0,enableZoom:!0,enforceBoundary:!1,mouseWheelZoom:!0,showZoomer:!0,enableResize:this.cropresize,viewport:{width:this.cropwidth,height:this.cropheight,type:this.croptype},boundary:{height:2*this.cropheight}}))}getcroppedImage(){this.croppie.result({type:"base64",size:"viewport"}).then((e=>{this.imagedata.emit(e),this.close(!1)}))}static#e=this.ɵfac=function(e){return new(e||SystemUploadImage)(u.rXU(m.B),u.rXU(Zt.b),u.rXU(u.sFG),u.rXU(xt.up))};static#t=this.ɵcmp=u.VBU({type:SystemUploadImage,selectors:[["system-upload-image"]],viewQuery:function(e,t){if(1&e&&u.GBs(ws,5,u.c1b),2&e){let e;u.mGM(e=u.lsd())&&(t.imgupload=e.first)}},inputs:{cropheight:"cropheight",cropwidth:"cropwidth",croptype:"croptype",cropresize:"cropresize"},outputs:{imagedata:"imagedata"},decls:12,vars:4,consts:[[3,"close"],["label","LBL_UPLOAD_IMAGE"],[1,"slds-align--absolute-center","slds-scrollable--none",3,"ngStyle"],[4,"ngIf"],["id","croppieimage",3,"src","load",4,"ngIf"],[1,"slds-button","slds-button--neutral",3,"click"],["label","LBL_CANCEL"],[1,"slds-button","slds-button--brand",3,"disabled","click"],["label","LBL_USE"],["label","LBL_SELECT_IMAGE"],["type","file","accept","image/*",2,"display","none",3,"click","change"],["imgupload",""],["id","croppieimage",3,"src","load"]],template:function(e,t){1&e&&(u.j41(0,"system-modal")(1,"system-modal-header",0),u.bIt("close",(function(){return t.close()})),u.nrm(2,"system-label",1),u.k0s(),u.j41(3,"system-modal-content")(4,"div",2),u.DNE(5,Ss,5,0,"div",3)(6,Es,1,1,"img",4),u.k0s()(),u.j41(7,"system-modal-footer")(8,"button",5),u.bIt("click",(function(){return t.close()})),u.nrm(9,"system-label",6),u.k0s(),u.j41(10,"button",7),u.bIt("click",(function(){return t.getcroppedImage()})),u.nrm(11,"system-label",8),u.k0s()()()),2&e&&(u.R7$(4),u.Y8G("ngStyle",t.croppiestyle),u.R7$(),u.Y8G("ngIf",!t.imageBase64),u.R7$(),u.Y8G("ngIf",t.imageBase64),u.R7$(4),u.Y8G("disabled",!t.imageBase64))},dependencies:[n.bT,n.B3,f.W,b.D,y.I,v.Q,k.C],encapsulation:2})}return SystemUploadImage})();const Ds=["popover"],Fs=["popoverbody"];let Ms=(()=>{class SystemPopover{constructor(e){this.metadata=e,this.popoverside="right",this.popoverpos="top",this.styles=null,this.hidePopoverTimeout={},this.parentElementRef=null,this.self=null,this.heightcorrection=30,this.widthcorrection=30}onMouseOver(){this.hidePopoverTimeout&&window.clearTimeout(this.hidePopoverTimeout)}onMouseOut(){this.closePopover(!0)}get popoverStyle(){let e=this.parentElementRef.nativeElement.getBoundingClientRect(),t=this.popover.element.nativeElement.getBoundingClientRect();return window.innerWidth-e.left>t.width?this.popoverside="right":this.popoverside="left",e.top-30+t.height>window.innerHeight&&e.top-t.height+this.heightcorrection>0?(this.popoverpos="bottom",{top:e.top-t.height+this.heightcorrection+"px",left:"right"==this.popoverside?e.left+100+"px":e.left-t.width-this.widthcorrection+"px"}):(this.popoverpos="top",{top:e.top-this.heightcorrection+"px",left:"right"==this.popoverside?e.left+100+"px":e.left-t.width-this.widthcorrection+"px"})}get popoverBodyStyle(){return{"max-height":`calc(100vh - ${this.popoverbody.element.nativeElement.getBoundingClientRect().top+5}px)`}}ngOnInit(){this.styles=this.popoverStyle}getNubbinClass(){return("left"==this.popoverside?"slds-nubbin--right-":"slds-nubbin--left-")+this.popoverpos}closePopover(e=!1){e?this.self.destroy():this.hidePopoverTimeout=window.setTimeout((()=>this.self.destroy()),500)}static#e=this.ɵfac=function(e){return new(e||SystemPopover)(u.rXU(h.yu))};static#t=this.ɵcmp=u.VBU({type:SystemPopover,selectors:[["ng-component"]],viewQuery:function(e,t){if(1&e&&(u.GBs(Ds,7,u.c1b),u.GBs(Fs,7,u.c1b)),2&e){let e;u.mGM(e=u.lsd())&&(t.popover=e.first),u.mGM(e=u.lsd())&&(t.popoverbody=e.first)}},decls:8,vars:4,consts:[["role","dialog",1,"slds-popover","slds-popover_large","slds-is-fixed",2,"transition",".5s",3,"ngStyle","ngClass","mouseenter","mouseleave"],[1,"slds-button","slds-button_icon","slds-button_icon","slds-button_icon-small","slds-float_right","slds-popover__close",3,"click"],["icon","close"],["popover",""],[1,"slds-popover__body","slds-scrollable--y",3,"ngStyle"],["popoverbody",""],[3,"componentset"]],template:function(e,t){1&e&&(u.j41(0,"div",0),u.bIt("mouseenter",(function(){return t.onMouseOver()}))("mouseleave",(function(){return t.onMouseOut()})),u.j41(1,"button",1),u.bIt("click",(function(){return t.closePopover(!0)})),u.nrm(2,"system-button-icon",2),u.k0s(),u.j41(3,"div",null,3)(5,"div",4,5),u.nrm(7,"system-componentset",6),u.k0s()()()),2&e&&(u.Y8G("ngStyle",t.popoverStyle)("ngClass",t.getNubbinClass()),u.R7$(5),u.Y8G("ngStyle",t.popoverBodyStyle),u.R7$(2),u.Y8G("componentset",t.componentset))},dependencies:[n.YU,n.B3,p.t,P.F],encapsulation:2})}return SystemPopover})();var Ts=s(41731),Bs=s(37263);function $s(e,t){if(1&e&&u.nrm(0,"system-componentset",3),2&e){const e=u.XpG();u.Y8G("componentset",e.componentset)}}function Os(e,t){if(1&e){const e=u.RV6();u.j41(0,"div",4)(1,"button",5),u.bIt("click",(function(){u.eBV(e);const t=u.XpG();return u.Njj(t.cancel())})),u.nrm(2,"system-label",6),u.k0s(),u.j41(3,"button",7),u.bIt("click",(function(){u.eBV(e);const t=u.XpG();return u.Njj(t.save())})),u.nrm(4,"system-label",8),u.k0s()()}}const Xs=e=>({editable:e});let Us=(()=>{class SystemViewContainer{constructor(e,t,s){this.view=e,this.language=t,this.model=s,this.componentconfig={}}get componentset(){return this.componentconfig.componentset}get editable(){return!(!this.model||!this.componentconfig.editable)}cancel(){this.model&&(this.model.cancelEdit(),this.view.setViewMode())}save(){this.model&&this.model.validate()&&(this.model.save(!0),this.view.setViewMode())}static#e=this.ɵfac=function(e){return new(e||SystemViewContainer)(u.rXU(Ts.U),u.rXU(m.B),u.rXU(Tt.g,8))};static#t=this.ɵcmp=u.VBU({type:SystemViewContainer,selectors:[["system-view-container"]],inputs:{componentconfig:"componentconfig"},decls:3,vars:5,consts:[[3,"system-view-provider"],[3,"componentset",4,"ngIf"],["class","slds-text-align--center slds-p-bottom--small",4,"ngIf"],[3,"componentset"],[1,"slds-text-align--center","slds-p-bottom--small"],[1,"slds-button","slds-button--neutral",3,"click"],["label","LBL_CANCEL"],[1,"slds-button","slds-button--brand","slds-button-space-left",3,"click"],["label","LBL_SAVE"]],template:function(e,t){1&e&&(u.j41(0,"div",0),u.DNE(1,$s,1,1,"system-componentset",1)(2,Os,5,0,"div",2),u.k0s()),2&e&&(u.Y8G("system-view-provider",u.eq3(3,Xs,t.editable)),u.R7$(),u.Y8G("ngIf",t.componentset),u.R7$(),u.Y8G("ngIf",t.view.isEditMode()))},dependencies:[Bs.x,n.bT,P.F,f.W],encapsulation:2})}return SystemViewContainer})();var Ys=s(59851),Ns=s(95218);let Vs=(()=>{class SystemWrappedText{constructor(e){this.sanitizer=e,this.text=""}getHtml(){let e=this.text;return e=this.escapeHtml(e),e=e.replace(/ *\n( *\n)+ */g,'</div><div style="margin-top:0.5em">'),e=e.replace(/ *\n */g,"<br>"),this.sanitizer.bypassSecurityTrustHtml("<div>"+e+"</div>")}escapeHtml(e){let t={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#039;"};return e.replace(/[&<>"']/g,(e=>t[e]))}static#e=this.ɵfac=function(e){return new(e||SystemWrappedText)(u.rXU(xt.up))};static#t=this.ɵcmp=u.VBU({type:SystemWrappedText,selectors:[["system-wrapped-text"]],inputs:{text:"text"},decls:1,vars:1,consts:[[3,"innerHTML"]],template:function(e,t){1&e&&u.nrm(0,"div",0),2&e&&u.Y8G("innerHTML",t.getHtml(),u.npT)},encapsulation:2})}return SystemWrappedText})();var As=s(63755),Ps=s(20673);function zs(e,t){1&e&&(u.j41(0,"div"),u.nrm(1,"system-loader-progress"),u.k0s())}function Hs(e,t){if(1&e&&u.nrm(0,"system-utility-icon",35),2&e){const e=u.XpG().$implicit;u.Y8G("icon",e.status?"reloaded"==e.status?"success":"error":"funding_requirement")("colorclass",e.status?"reloaded"==e.status?"slds-icon-text-success":"slds-icon-text-error":"slds-icon-text-default")}}function qs(e,t){1&e&&u.nrm(0,"system-spinner",36)}function Js(e,t){if(1&e){const e=u.RV6();u.j41(0,"button",37),u.bIt("click",(function(){u.eBV(e);const t=u.XpG().$implicit,s=u.XpG();return u.Njj(s.openFixRequiredModal(t))})),u.nrm(1,"system-button-icon",38),u.k0s()}if(2&e){const e=u.XpG(2);u.Y8G("disabled",e.isReloadingPackage)}}function Ws(e,t){1&e&&u.nrm(0,"system-button-icon",39)}function Ks(e,t){if(1&e&&u.nrm(0,"system-button-icon",40),2&e){const e=u.XpG().$implicit;u.Y8G("colorclass","success"!=e.status?"slds-icon-text-default":"slds-icon-text-success")}}function Qs(e,t){if(1&e){const e=u.RV6();u.j41(0,"button",41),u.bIt("click",(function(){u.eBV(e);const t=u.XpG().$implicit,s=u.XpG();return u.Njj(s.reloadPackage(t))})),u.nrm(1,"system-button-icon",42),u.k0s()}if(2&e){const e=u.XpG(2);u.Y8G("disabled",e.isReloadingPackage)}}const Zs=(e,t)=>({"slds-theme--info":e,"slds-theme--error":t});function ei(e,t){if(1&e){const e=u.RV6();u.j41(0,"tr",24,25)(2,"td"),u.DNE(3,Hs,1,2,"system-utility-icon",26)(4,qs,1,0,"system-spinner",27),u.k0s(),u.j41(5,"td")(6,"div",28),u.EFF(7),u.k0s()(),u.j41(8,"td")(9,"div",28),u.EFF(10),u.k0s()(),u.j41(11,"td")(12,"div",29),u.DNE(13,Js,2,1,"button",30),u.j41(14,"button",31),u.bIt("click",(function(){const t=u.eBV(e).$implicit,s=u.XpG();return u.Njj(s.showResponseDetails(t))})),u.DNE(15,Ws,1,0,"system-button-icon",32)(16,Ks,1,1,"system-button-icon",33),u.k0s(),u.DNE(17,Qs,2,1,"button",34),u.k0s()()()}if(2&e){const e=t.$implicit;u.Y8G("ngClass",u.l_i(10,Zs,"processing"==e.status,"error"==e.status)),u.R7$(3),u.Y8G("ngIf","processing"!=e.status),u.R7$(),u.Y8G("ngIf","processing"==e.status),u.R7$(3),u.JRh(e.name),u.R7$(3),u.JRh(null==e.message?null:e.message.text),u.R7$(3),u.Y8G("ngIf","error"==e.status&&(null==e.erroneousDictionaries?null:e.erroneousDictionaries.length)>0),u.R7$(),u.Y8G("disabled",!(null!=e.message&&e.message.details)),u.R7$(),u.Y8G("ngIf","error"==e.status),u.R7$(),u.Y8G("ngIf","error"!=e.status),u.R7$(),u.Y8G("ngIf",!!e.status&&"reloaded"!=e.status)}}function ti(e,t){if(1&e){const e=u.RV6();u.j41(0,"button",43),u.bIt("click",(function(){u.eBV(e);const t=u.XpG();return u.Njj(t.stop())})),u.nrm(1,"system-button-icon",44),u.k0s()}}function si(e,t){if(1&e){const e=u.RV6();u.j41(0,"button",31),u.bIt("click",(function(){u.eBV(e);const t=u.XpG();return u.Njj(t.reloadAll())})),u.nrm(1,"system-button-icon",42),u.k0s()}if(2&e){const e=u.XpG();u.Y8G("disabled",e.isReloadingPackage)}}let ii=(()=>{class PackageLoaderReloadLoadedModal{constructor(e,t,s,i){this.backend=e,this.broadcast=t,this.modal=s,this.loader=i,this.packages=[],this.isReloadingPackage=!1,this.isReloadingConfig=!1,this.started=!1,this.progress=0,this.reloadedCount=0}updateProgressValue(){this.reloadedCount=this.packages.filter((e=>!!e.status)).length,this.progress=Math.round((this.packages.length-(this.packages.length-this.reloadedCount))/this.packages.length*100)}reloadAll(){this.packages.forEach((e=>{e.status=void 0,e.message=void 0})),this.started=!0,this.reloadedCount=0,this.progress=0,this.reloadNext()}reloadNext(){const e=this.packages.find((e=>!e.status));if(!e||!this.started)return this.handleReloadComplete();this.reloadPackage(e).then((()=>{this.updateProgressValue(),this.reloadNext()}))}reloadPackage(e){return this.isReloadingPackage=!0,e.status="processing",new Promise((t=>{this.backend.getRequest(`configuration/packages/package/${e.package}${this.repositoryAddUrl}`).subscribe({next:s=>{e.status="reloaded",e.message={text:s.response.queries+" rows",details:Object.keys(s.response.tables).map((e=>`${e}: ${s.response.tables[e]}`)).join("\n")},this.isReloadingPackage=!1,t(!0)},error:s=>{e.status="error",e.erroneousDictionaries=s.error?.error?.details?.filter((e=>"dictionary"==e.scope))??[],e.message={text:s.error?.error?.message??"unknown error",details:s.error?.error?.details},this.isReloadingPackage=!1,t(!0)}})}))}handleReloadComplete(){this.isReloadingPackage=!1,this.started=!1,this.packages.some((e=>"reloaded"==e.status))&&(this.isReloadingConfig=!0,this.loader.load().subscribe((()=>{this.broadcast.broadcastMessage("loader.reloaded"),this.isReloadingConfig=!1})))}close(){this.self.destroy()}stop(){this.started=!1}trackByFn(e){return e.name}showResponseDetails(e){this.modal.info(e.message.details.map((e=>e.message)).join("\n"),e.name)}openFixRequiredModal(e){this.modal.openStaticModal(As.p).subscribe((t=>{t.instance.dictionaries=e.erroneousDictionaries.map((e=>e.name)),t.instance.dictionaryName=t.instance.dictionaries[0],e.erroneousDictionaries.forEach((e=>{t.instance.mismatch[e.name]=e.mismatch[e.name]})),t.instance.response.subscribe({next:t=>{t&&this.reloadPackage(e)}})}))}static#e=this.ɵfac=function(e){return new(e||PackageLoaderReloadLoadedModal)(u.rXU(et.H),u.rXU(ls.m),u.rXU(st.y),u.rXU(Ps.w))};static#t=this.ɵcmp=u.VBU({type:PackageLoaderReloadLoadedModal,selectors:[["package-loader-reload-loaded-modal"]],inputs:{packages:"packages",repositoryAddUrl:"repositoryAddUrl",self:"self"},decls:31,vars:10,consts:[["size","large"],[3,"close"],["label","MSG_RELOAD_ALL_LOADED_PACKAGES"],[3,"grow"],[4,"ngIf"],[1,"slds-scrollable--y",2,"height","80vh"],["scrollContainer",""],[1,"slds-table","slds-table--header-fixed","slds-table--fixed-layout","slds-table_bordered"],[1,"slds-line-height_reset"],["scope","col",2,"width","2rem"],["scope","col",2,"width","15rem"],[1,"slds-truncate","slds-p-around--x-small"],["label","LBL_NAME"],["scope","col",1,""],["label","LBL_MESSAGE"],["scope","col",2,"width","5rem"],["class","slds-hint-parent",3,"ngClass",4,"ngFor","ngForOf","ngForTrackBy"],[1,"slds-grid"],[1,"slds-grid","slds-grow","slds-grid--vertical-align-center"],["class","slds-button slds-button--icon",3,"click",4,"ngIf"],["class","slds-button slds-button--icon",3,"disabled","click",4,"ngIf"],[1,"slds-size--2-of-4","slds-m-horizontal--x-small",3,"progress","hideText"],[1,"slds-button","slds-button--neutral",3,"click"],["label","LBL_CLOSE"],[1,"slds-hint-parent",3,"ngClass"],["repairRow",""],["size","xx-small",3,"icon","colorclass",4,"ngIf"],["size","14","inverse","true",4,"ngIf"],[1,"slds-truncate"],[1,"slds-grid","slds-grid--vertical-align-center"],["system-title","LBL_FIX_DB_FIELDS_MISMATCH","class","slds-button slds-button--icon slds-m-horizontal--xx-small",3,"disabled","click",4,"ngIf"],[1,"slds-button","slds-button--icon",3,"disabled","click"],["icon","info","colorclass","slds-icon-text-inverse",4,"ngIf"],["icon","info",3,"colorclass",4,"ngIf"],["class","slds-button slds-button--icon slds-m-left--xx-small",3,"disabled","click",4,"ngIf"],["size","xx-small",3,"icon","colorclass"],["size","14","inverse","true"],["system-title","LBL_FIX_DB_FIELDS_MISMATCH",1,"slds-button","slds-button--icon","slds-m-horizontal--xx-small",3,"disabled","click"],["icon","data_transforms","addclasses","slds-button--icon-inverse"],["icon","info","colorclass","slds-icon-text-inverse"],["icon","info",3,"colorclass"],[1,"slds-button","slds-button--icon","slds-m-left--xx-small",3,"disabled","click"],["icon","play"],[1,"slds-button","slds-button--icon",3,"click"],["icon","stop"]],template:function(e,t){1&e&&(u.j41(0,"system-modal",0)(1,"system-modal-header",1),u.bIt("close",(function(){return t.close()})),u.nrm(2,"system-label",2),u.k0s(),u.j41(3,"system-modal-content",3),u.DNE(4,zs,2,0,"div",4),u.j41(5,"div",5,6)(7,"table",7)(8,"thead")(9,"tr",8),u.nrm(10,"th",9),u.j41(11,"th",10)(12,"div",11),u.nrm(13,"system-label",12),u.k0s()(),u.j41(14,"th",13)(15,"div",11),u.nrm(16,"system-label",14),u.k0s()(),u.nrm(17,"th",15),u.k0s()(),u.j41(18,"tbody"),u.DNE(19,ei,18,13,"tr",16),u.k0s()()()(),u.j41(20,"system-modal-footer")(21,"div",17)(22,"div",18),u.DNE(23,ti,2,0,"button",19)(24,si,2,1,"button",20),u.j41(25,"div",18),u.nrm(26,"system-progress-bar",21),u.EFF(27),u.k0s()(),u.j41(28,"div")(29,"button",22),u.bIt("click",(function(){return t.close()})),u.nrm(30,"system-label",23),u.k0s()()()()()),2&e&&(u.R7$(3),u.Y8G("grow",!0),u.R7$(),u.Y8G("ngIf",t.isReloadingConfig),u.R7$(15),u.Y8G("ngForOf",t.packages)("ngForTrackBy",t.trackByFn),u.R7$(4),u.Y8G("ngIf",t.started),u.R7$(),u.Y8G("ngIf",!t.started),u.R7$(2),u.Y8G("progress",t.progress)("hideText",!0),u.R7$(),u.Lme(" ",t.reloadedCount," / ",t.packages.length," "))},dependencies:[nt.L,n.YU,n.Sq,n.bT,p.t,f.W,bt.S,b.D,y.I,v.Q,k.C,Dt.Y,ps.P,es.B],encapsulation:2})}return PackageLoaderReloadLoadedModal})();var ni=s(80256),li=s(28933);function oi(e,t){1&e&&u.nrm(0,"system-spinner",10)}function ai(e,t){if(1&e){const e=u.RV6();u.j41(0,"system-custom-icon",16),u.bIt("click",(function(){u.eBV(e);const t=u.XpG(2);return u.Njj(t.setDefault())})),u.k0s()}if(2&e){const e=u.XpG(2);u.Y8G("icon",e.isDefault?"light-bulb-on":"light-bulb-off")}}function ri(e,t){if(1&e){const e=u.RV6();u.j41(0,"button",17),u.bIt("click",(function(){u.eBV(e);const t=u.XpG(2);return u.Njj(t.loadLanguage(t.package.language_code))})),u.nrm(1,"system-button-icon",18),u.k0s()}}function di(e,t){if(1&e){const e=u.RV6();u.j41(0,"button",19),u.bIt("click",(function(){u.eBV(e);const t=u.XpG(2);return u.Njj(t.deleteLanguage(t.package.language_code))})),u.nrm(1,"system-button-icon",20),u.k0s()}if(2&e){const e=u.XpG(2);u.Y8G("disabled",e.deletedisabled)}}function ci(e,t){if(1&e){const e=u.RV6();u.j41(0,"button",17),u.bIt("click",(function(){u.eBV(e);const t=u.XpG(2);return u.Njj(t.loadLanguage(t.package.language_code))})),u.nrm(1,"system-button-icon",21),u.k0s()}}function ui(e,t){if(1&e&&(u.j41(0,"div",11),u.DNE(1,ai,1,1,"system-custom-icon",12),u.j41(2,"div",13),u.DNE(3,ri,2,0,"button",14)(4,di,2,1,"button",15)(5,ci,2,0,"button",14),u.k0s()()),2&e){const e=u.XpG();u.R7$(),u.Y8G("ngIf",e.package.installed),u.R7$(2),u.Y8G("ngIf",!e.package.installed),u.R7$(),u.Y8G("ngIf",e.package.installed&&!e.isDefault),u.R7$(),u.Y8G("ngIf",e.package.installed)}}let mi=(()=>{class PackageLoaderLanguage{constructor(e,t,s,i,n){this.language=e,this.backend=t,this.configurationService=s,this.loader=i,this.broadcast=n,this.loading=!1}get isDefault(){return this.package.language_code==this.language.getDefaultLanguage()}get deletedisabled(){return this.isDefault||this.package.language_code==this.language.currentlanguage}get repositoryaddurl(){return this.repository&&this.repository.id?"/"+this.repository.id:""}setDefault(){this.isDefault||this.language.setDefaultLanguage(this.package.language_code)}loadLanguage(e){this.loading=!0,this.backend.getRequest("configuration/packages/language/"+e+this.repositoryaddurl).subscribe((t=>{this.loading=!1,t.success&&(this.package.installed=!0,this.language.addAvailableLanguage(t.languages[e]),this.language.currentlanguage==e?this.language.loadLanguage().subscribe((e=>{this.package.installed=!0})):this.package.installed=!0)}))}deleteLanguage(e){this.loading=!0,this.backend.deleteRequest("configuration/packages/language/"+e).subscribe((t=>{this.loading=!1,t&&(this.package.installed=!1,this.language.removeAvailableLanguage(e))}))}static#e=this.ɵfac=function(e){return new(e||PackageLoaderLanguage)(u.rXU(m.B),u.rXU(et.H),u.rXU(Ce.i),u.rXU(Ps.w),u.rXU(ls.m))};static#t=this.ɵcmp=u.VBU({type:PackageLoaderLanguage,selectors:[["package-loader-language"]],inputs:{package:"package",repository:"repository"},decls:11,vars:4,consts:[[1,"slds-card"],[1,"slds-card__header","slds-grid"],[1,"slds-media","slds-media_center","slds-has-flexi-truncate"],["size","small","icon","custom68","sprite","custom",1,"slds-p-right--xx-small"],[1,"slds-media__body"],[1,"slds-card__header-title"],[1,"slds-card__header-link","slds-truncate",3,"title"],[1,"slds-no-flex"],["size","12",4,"ngIf"],["class","slds-grid slds-grid_vertical-align-center",4,"ngIf"],["size","12"],[1,"slds-grid","slds-grid_vertical-align-center"],["class","slds-p-horizontal--xx-small","size","x-small",3,"icon","click",4,"ngIf"],["role","group",1,"slds-button-group"],["class","slds-button slds-button_icon slds-button_icon-border-filled",3,"click",4,"ngIf"],["class","slds-button slds-button_icon slds-button_icon-border-filled",3,"disabled","click",4,"ngIf"],["size","x-small",1,"slds-p-horizontal--xx-small",3,"icon","click"],[1,"slds-button","slds-button_icon","slds-button_icon-border-filled",3,"click"],["icon","download"],[1,"slds-button","slds-button_icon","slds-button_icon-border-filled",3,"disabled","click"],["icon","delete"],["icon","refresh"]],template:function(e,t){1&e&&(u.j41(0,"article",0)(1,"div",1)(2,"header",2),u.nrm(3,"system-icon",3),u.j41(4,"div",4)(5,"h2",5)(6,"div",6),u.EFF(7),u.k0s()()(),u.j41(8,"div",7),u.DNE(9,oi,1,0,"system-spinner",8)(10,ui,6,4,"div",9),u.k0s()()()()),2&e&&(u.R7$(6),u.Y8G("title",t.package.language_name),u.R7$(),u.SpI(" ",t.package.language_name," "),u.R7$(2),u.Y8G("ngIf",t.loading),u.R7$(),u.Y8G("ngIf",!t.loading))},dependencies:[n.bT,p.t,q.k,ce.J,ps.P],encapsulation:2})}return PackageLoaderLanguage})();function hi(e,t){if(1&e&&(u.j41(0,"div",3),u.nrm(1,"package-loader-language",4),u.k0s()),2&e){const e=t.$implicit,s=u.XpG();u.R7$(),u.Y8G("package",e)("repository",s.repository)}}let gi=(()=>{class PackageLoaderLanguages{constructor(){this.languages=[]}static#e=this.ɵfac=function(e){return new(e||PackageLoaderLanguages)};static#t=this.ɵcmp=u.VBU({type:PackageLoaderLanguages,selectors:[["package-loader-languages"]],inputs:{languages:"languages",repository:"repository"},decls:3,vars:1,consts:[["system-to-bottom","","role","tabpanel"],[1,"slds-grid","slds-wrap"],["class","slds-size--1-of-2 slds-p-around--xx-small",4,"ngFor","ngForOf"],[1,"slds-size--1-of-2","slds-p-around--xx-small"],[3,"package","repository"]],template:function(e,t){1&e&&(u.j41(0,"div",0)(1,"div",1),u.DNE(2,hi,2,2,"div",2),u.k0s()()),2&e&&(u.R7$(2),u.Y8G("ngForOf",t.languages))},dependencies:[li.b,n.Sq,mi],encapsulation:2})}return PackageLoaderLanguages})();function pi(e,t){if(1&e){const e=u.RV6();u.j41(0,"button",21),u.bIt("click",(function(){u.eBV(e);const t=u.XpG();return u.Njj(t.loadPackage(t.package))})),u.nrm(1,"system-button-icon",22),u.k0s()}if(2&e){const e=u.XpG();u.Y8G("disabled",e.disabled)}}function fi(e,t){if(1&e){const e=u.RV6();u.j41(0,"button",21),u.bIt("click",(function(){u.eBV(e);const t=u.XpG();return u.Njj(t.deletePackage(t.package.package))})),u.nrm(1,"system-button-icon",23),u.k0s()}if(2&e){const e=u.XpG();u.Y8G("disabled",e.disabled)}}function bi(e,t){if(1&e){const e=u.RV6();u.j41(0,"button",21),u.bIt("click",(function(){u.eBV(e);const t=u.XpG();return u.Njj(t.loadPackage(t.package))})),u.nrm(1,"system-button-icon",24),u.k0s()}if(2&e){const e=u.XpG();u.Y8G("disabled",e.disabled)}}function yi(e,t){if(1&e&&(u.j41(0,"div",25)(1,"div",26),u.nrm(2,"system-utility-icon",27),u.EFF(3),u.k0s(),u.j41(4,"div",28),u.nrm(5,"system-utility-icon",29),u.k0s()()),2&e){const e=t.$implicit,s=u.XpG();u.R7$(2),u.Y8G("colorclass",s.disabled?"slds-icon-text-light":"slds-icon-text-default"),u.R7$(),u.SpI(" ",e.name,""),u.R7$(2),u.Y8G("icon",e.status?"check":"close")("colorclass",s.disabled?"slds-icon-text-light":"slds-icon-text-default")}}function vi(e,t){if(1&e&&(u.j41(0,"div",25)(1,"div",26),u.nrm(2,"system-utility-icon",30),u.EFF(3),u.k0s(),u.j41(4,"div",28),u.nrm(5,"system-utility-icon",29),u.k0s()()),2&e){const e=t.$implicit,s=u.XpG();u.R7$(2),u.Y8G("colorclass",s.disabled?"slds-icon-text-light":"slds-icon-text-default"),u.R7$(),u.SpI(" ",e.package,""),u.R7$(2),u.Y8G("icon",e.installed?"check":"close")("colorclass",s.disabled?"slds-icon-text-light":"slds-icon-text-default")}}function _i(e,t){1&e&&(u.j41(0,"div",31),u.nrm(1,"system-label",32),u.k0s())}function ki(e,t){1&e&&(u.j41(0,"div",36),u.nrm(1,"system-spinner",37),u.j41(2,"span",38),u.nrm(3,"system-label",39),u.k0s()())}function Ri(e,t){1&e&&u.nrm(0,"system-loader-progress",40)}function Ii(e,t){if(1&e&&(u.j41(0,"div",33),u.DNE(1,ki,4,0,"div",34)(2,Ri,1,0,"system-loader-progress",35),u.k0s()),2&e){const e=u.XpG();u.R7$(),u.Y8G("ngIf","package"==e.loading),u.R7$(),u.Y8G("ngIf","configuration"==e.loading)}}const xi=e=>({"slds-disabled-text":e}),ji=e=>({"slds-hidden":e});let Gi=(()=>{class PackageLoaderPackage{constructor(e,t,s,i,n,l,o){this.language=e,this.backend=t,this.configurationService=s,this.loader=i,this.modal=n,this.broadcast=l,this.toast=o,this.packages=[],this.extensions=[],this.requiredpackages=[],this.loading=""}get disabled(){if(this.package.package.installed)return!1;let e=!1;return this.extensions.forEach((t=>{t.status||(e=!0)})),this.requiredpackages.forEach((t=>{t.installed||(e=!0)})),e}get repositoryaddurl(){return this.repository&&this.repository.id?"/"+this.repository.id:""}ngOnInit(){if(this.package.extensions)for(let e of this.package.extensions.split(",")){let t=this.configurationService.checkCapability(e);this.extensions.push({name:e,status:t})}this.package.packages&&(this.requiredpackages=this.packages.filter((e=>this.package.packages.split(",").indexOf(e.package)>=0)))}loadPackage(e){this.loading="package",this.backend.getRequest("configuration/packages/package/"+e.package+this.repositoryaddurl).subscribe({next:e=>{this.loading="configuration",this.loader.load().subscribe((e=>{this.package.installed=!0,this.broadcast.broadcastMessage("loader.reloaded"),this.loading=""})),this.toast.sendToast("LBL_DONE","success")},error:t=>{e.erroneousDictionaries=t.error?.error?.details?.filter((e=>"dictionary"==e.scope&&e.mismatch))??[],this.toast.sendToast(t.error?.error?.message??"unknown error","error"),e.erroneousDictionaries?.length>0&&this.openFixRequiredModal(e),this.loading=""}})}openFixRequiredModal(e){this.modal.openStaticModal(As.p).subscribe((t=>{t.instance.dictionaries=e.erroneousDictionaries.map((e=>e.name)),t.instance.dictionaryName=t.instance.dictionaries[0],e.erroneousDictionaries.forEach((e=>{t.instance.mismatch[e.name]=e.mismatch[e.name]})),t.instance.response.subscribe({next:t=>{t&&this.loadPackage(e)}})}))}deletePackage(e){this.loading="package",this.backend.deleteRequest("configuration/packages/package/"+e).subscribe((e=>{this.loading="configuration",this.package.installed=!1,this.loader.load().subscribe((e=>{this.broadcast.broadcastMessage("loader.reloaded"),this.loading=""}))}))}static#e=this.ɵfac=function(e){return new(e||PackageLoaderPackage)(u.rXU(m.B),u.rXU(et.H),u.rXU(Ce.i),u.rXU(Ps.w),u.rXU(st.y),u.rXU(ls.m),u.rXU(g.o))};static#t=this.ɵcmp=u.VBU({type:PackageLoaderPackage,selectors:[["package-loader-package"]],inputs:{package:"package",packages:"packages",repository:"repository"},decls:28,vars:16,consts:[[1,"slds-card",3,"ngClass"],[3,"ngClass"],[1,"slds-card__header","slds-grid"],[1,"slds-media","slds-media_center","slds-has-flexi-truncate"],["size","small","icon","custom13","sprite","custom",1,"slds-p-right--xx-small"],[1,"slds-media__body"],[1,"slds-card__header-title"],[1,"slds-card__header-link","slds-truncate",3,"title"],[1,"slds-no-flex"],["role","group",1,"slds-button-group"],["class","slds-button slds-button_icon slds-button_icon-border-filled",3,"disabled","click",4,"ngIf"],[1,"slds-card__body","slds-p-horizontal--small"],[1,"slds-grid","slds-gutters_direct-x-small"],[1,"slds-size--1-of-2","slds-col"],[1,"slds-text-heading_small","slds-p-vertical--xx-small"],["label","LBL_DETAILS"],[1,"slds-text-align--justify"],["label","LBL_PREREQUISITES"],["class","slds-grid slds-grid_vertical-align-center slds-p-vertical--xxx-small",4,"ngFor","ngForOf"],["class","slds-disabled-text",4,"ngIf"],["class","slds-is-absolute__top slds-size_full slds-height_full slds-align_absolute-center",4,"ngIf"],[1,"slds-button","slds-button_icon","slds-button_icon-border-filled",3,"disabled","click"],["icon","download"],["icon","delete"],["icon","refresh"],[1,"slds-grid","slds-grid_vertical-align-center","slds-p-vertical--xxx-small"],[1,"slds-size--1-of-2","slds-truncate"],["icon","apex_plugin","size","xx-small",3,"colorclass"],[1,"slds-size--1-of-2","slds-text-align--right"],["size","xx-small",3,"icon","colorclass"],["icon","archive","size","xx-small",3,"colorclass"],[1,"slds-disabled-text"],["label","LBL_NO_PREREQUISITES"],[1,"slds-is-absolute__top","slds-size_full","slds-height_full","slds-align_absolute-center"],["class","slds-grid slds-grid_vertical-align-center",4,"ngIf"],["class","slds-size_full",4,"ngIf"],[1,"slds-grid","slds-grid_vertical-align-center"],["size","16"],[1,"slds-p-left--small"],["label","LBL_LOADING"],[1,"slds-size_full"]],template:function(e,t){1&e&&(u.j41(0,"article",0)(1,"div",1)(2,"div",2)(3,"header",3),u.nrm(4,"system-icon",4),u.j41(5,"div",5)(6,"h2",6)(7,"div",7),u.EFF(8),u.k0s()()(),u.j41(9,"div",8)(10,"div",9),u.DNE(11,pi,2,1,"button",10)(12,fi,2,1,"button",10)(13,bi,2,1,"button",10),u.k0s()()()(),u.j41(14,"div",11)(15,"div",12)(16,"div",13)(17,"div",14),u.nrm(18,"system-label",15),u.k0s(),u.j41(19,"div",16),u.EFF(20),u.k0s()(),u.j41(21,"div",13)(22,"div",14),u.nrm(23,"system-label",17),u.k0s(),u.DNE(24,yi,6,4,"div",18)(25,vi,6,4,"div",18)(26,_i,2,0,"div",19),u.k0s()()()(),u.DNE(27,Ii,3,2,"div",20),u.k0s()),2&e&&(u.Y8G("ngClass",u.eq3(12,xi,t.disabled)),u.R7$(),u.Y8G("ngClass",u.eq3(14,ji,t.loading)),u.R7$(6),u.Y8G("title",t.package.name),u.R7$(),u.SpI(" ",t.package.name," "),u.R7$(3),u.Y8G("ngIf",!t.package.installed),u.R7$(),u.Y8G("ngIf",t.package.installed&&"core"!=t.package.package),u.R7$(),u.Y8G("ngIf",t.package.installed),u.R7$(7),u.JRh(t.package.description),u.R7$(4),u.Y8G("ngForOf",t.extensions),u.R7$(),u.Y8G("ngForOf",t.requiredpackages),u.R7$(),u.Y8G("ngIf",0==t.requiredpackages.length&&0==t.extensions.length),u.R7$(),u.Y8G("ngIf",t.loading))},dependencies:[n.YU,n.Sq,n.bT,p.t,ce.J,f.W,bt.S,ps.P,es.B],encapsulation:2})}return PackageLoaderPackage})(),Ci=(()=>{class PackageLoaderPipe{transform(e,t,s){return e.filter((e=>(!s||e.type==s)&&!(t&&!(t&&e.name.toLowerCase().indexOf(t.toLowerCase())>=0))))}static#e=this.ɵfac=function(e){return new(e||PackageLoaderPipe)};static#t=this.ɵpipe=u.EJ8({name:"packageloaderpipe",type:PackageLoaderPipe,pure:!0})}return PackageLoaderPipe})();function wi(e,t){if(1&e&&(u.j41(0,"div",7),u.nrm(1,"package-loader-package",8),u.k0s()),2&e){const e=t.$implicit,s=u.XpG();u.R7$(),u.Y8G("package",e)("packages",s.packages)("repository",s.repository)}}let Si=(()=>{class PackageLoaderPackages{constructor(e){this.language=e,this.packagescope="",this.packagefilterterm="",this.packages=[]}static#e=this.ɵfac=function(e){return new(e||PackageLoaderPackages)(u.rXU(m.B))};static#t=this.ɵcmp=u.VBU({type:PackageLoaderPackages,selectors:[["package-loader-packages"]],inputs:{packagescope:"packagescope",packages:"packages",repository:"repository"},decls:8,vars:7,consts:[["system-to-bottom","","role","tabpanel"],[1,"slds-p-vertical--x-small","slds-p-horizontal--xx-small"],[1,"slds-form-element"],[1,"slds-form-element__control"],["type","text",1,"slds-input",3,"ngModel","placeholder","ngModelChange"],[1,"slds-grid","slds-wrap"],["class","slds-size--1-of-2 slds-p-around--xx-small",4,"ngFor","ngForOf"],[1,"slds-size--1-of-2","slds-p-around--xx-small"],[3,"package","packages","repository"]],template:function(e,t){1&e&&(u.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"input",4),u.mxI("ngModelChange",(function(e){return u.DH7(t.packagefilterterm,e)||(t.packagefilterterm=e),e})),u.k0s()()()(),u.j41(5,"div",5),u.DNE(6,wi,2,3,"div",6),u.nI1(7,"packageloaderpipe"),u.k0s()()),2&e&&(u.R7$(4),u.R50("ngModel",t.packagefilterterm),u.Y8G("placeholder",t.language.getLabel("LBL_SEARCH")),u.R7$(2),u.Y8G("ngForOf",u.brH(7,3,t.packages,t.packagefilterterm,t.packagescope)))},dependencies:[li.b,n.Sq,l.me,l.BC,l.vS,Gi,Ci],encapsulation:2})}return PackageLoaderPackages})();function Ei(e,t){1&e&&(u.j41(0,"div",22),u.nrm(1,"system-icon",23),u.j41(2,"span",24),u.nrm(3,"system-label",25),u.k0s()())}function Li(e,t){if(1&e&&(u.j41(0,"div",26),u.nrm(1,"system-icon",23),u.j41(2,"span",24),u.nrm(3,"system-label",27),u.EFF(4),u.k0s()()),2&e){const e=u.XpG();u.R7$(4),u.SpI(": ",e.errorpackagesdisplay,"")}}function Di(e,t){if(1&e){const e=u.RV6();u.j41(0,"button",28),u.bIt("click",(function(){u.eBV(e);const t=u.XpG();return u.Njj(t.reloadSystemPackage())})),u.nrm(1,"system-button-icon",29),u.k0s()}if(2&e){const e=u.XpG();u.Y8G("disabled",0==e.errorpackages.length)}}function Fi(e,t){if(1&e){const e=u.RV6();u.j41(0,"li",40),u.bIt("click",(function(){const t=u.eBV(e).$implicit,s=u.XpG(2);return u.Njj(s.selectRepository(t))})),u.j41(1,"div",41)(2,"div",42),u.EFF(3),u.k0s()()()}if(2&e){const e=t.$implicit;u.R7$(3),u.JRh(e.name)}}function Mi(e,t){if(1&e){const e=u.RV6();u.j41(0,"div",30)(1,"div",31)(2,"div",32)(3,"div",33)(4,"div",34)(5,"input",35),u.mxI("ngModelChange",(function(t){u.eBV(e);const s=u.XpG();return u.DH7(s.repositoryname,t)||(s.repositoryname=t),u.Njj(t)})),u.k0s(),u.nrm(6,"system-icon",36),u.k0s(),u.j41(7,"div",37)(8,"ul",38),u.DNE(9,Fi,4,1,"li",39),u.k0s()()()()()()}if(2&e){const e=u.XpG();u.R7$(3),u.Y8G("system-dropdown-trigger",e.repositories.length<=1),u.R7$(2),u.R50("ngModel",e.repositoryname),u.Y8G("disabled",e.repositories.length<=1),u.R7$(4),u.Y8G("ngForOf",e.repositories)}}const Ti=e=>({"slds-is-active":e}),Bi=(e,t)=>({"slds-show":e,"slds-hide":t});function $i(e,t){if(1&e){const e=u.RV6();u.j41(0,"div",43)(1,"ul",44)(2,"li",45)(3,"a",46),u.bIt("click",(function(){u.eBV(e);const t=u.XpG();return u.Njj(t.scope="essentials")})),u.nrm(4,"system-label",47),u.k0s()(),u.j41(5,"li",45)(6,"a",46),u.bIt("click",(function(){u.eBV(e);const t=u.XpG();return u.Njj(t.scope="packages")})),u.nrm(7,"system-label",48),u.k0s()(),u.j41(8,"li",45)(9,"a",46),u.bIt("click",(function(){u.eBV(e);const t=u.XpG();return u.Njj(t.scope="languages")})),u.nrm(10,"system-label",49),u.k0s()(),u.j41(11,"li",45)(12,"a",46),u.bIt("click",(function(){u.eBV(e);const t=u.XpG();return u.Njj(t.scope="content")})),u.nrm(13,"system-label",50),u.k0s()()(),u.nrm(14,"package-loader-packages",51)(15,"package-loader-packages",52)(16,"package-loader-languages",53)(17,"package-loader-packages",54),u.k0s()}if(2&e){const e=u.XpG();u.R7$(2),u.Y8G("ngClass",u.eq3(20,Ti,"essentials"==e.scope))("title",e.language.getLabel("LBL_ESSENTIALS")),u.R7$(3),u.Y8G("ngClass",u.eq3(22,Ti,"packages"==e.scope))("title",e.language.getLabel("LBL_PACKAGES")),u.R7$(3),u.Y8G("ngClass",u.eq3(24,Ti,"languages"==e.scope))("title",e.language.getLabel("LBL_LANGUAGES")),u.R7$(3),u.Y8G("ngClass",u.eq3(26,Ti,"content"==e.scope))("title",e.language.getLabel("LBL_CONTENT")),u.R7$(3),u.Y8G("ngClass",u.l_i(28,Bi,"essentials"==e.scope,"essentials"!=e.scope))("packages",e.packages)("repository",e.repository),u.R7$(),u.Y8G("ngClass",u.l_i(31,Bi,"packages"==e.scope,"packages"!=e.scope))("packages",e.packages)("repository",e.repository),u.R7$(),u.Y8G("ngClass",u.l_i(34,Bi,"languages"==e.scope,"languages"!=e.scope))("languages",e.languages)("repository",e.repository),u.R7$(),u.Y8G("ngClass",u.l_i(37,Bi,"content"==e.scope,"content"!=e.scope))("packages",e.packages)("repository",e.repository)}}function Oi(e,t){1&e&&(u.j41(0,"div",55)(1,"h2",56),u.EFF(2,"Please select a Repository"),u.k0s()())}function Xi(e,t){1&e&&(u.j41(0,"div",57)(1,"div",26),u.nrm(2,"system-spinner",58),u.j41(3,"div",14),u.nrm(4,"system-label",59),u.k0s()()())}let Ui=(()=>{class PackageLoader{constructor(e,t,s,i,n){this.language=e,this.backend=t,this.toast=s,this.metadata=i,this.modal=n,this.scope="essentials",this.loading=!0,this.packagefilterterm="",this.repositories=[],this.packages=[],this.versions=[],this.languages=[],this.opencrs=!1,this.errorpackages=[],this.backend.getRequest("configuration/packages/repositories").subscribe((e=>{this.loading=!1,this.repositories=e,0==this.repositories.length?(this.repository="default",this.loadpackages()):1==this.repositories.length&&(this.repository=this.repositories[0],this.loadpackages())}),(e=>{this.loading=!1}))}get systemPackageVisible(){return this.metadata.configuration.getCapabilityConfig("adminpackages")?.system_package_visible}get errorpackagesdisplay(){return this.errorpackages.join(", ")}set repositoryname(e){this.repository.name=e}get repositoryname(){return this.repository&&this.repository.name?this.repository.name:""}get repositoryaddurl(){return this.repository&&this.repository.id?"/"+this.repository.id:""}loadpackages(){this.loading=!0,this.packages=[],this.languages=[],this.opencrs=!1,this.errorpackages=[],this.backend.getRequest("configuration/packages"+this.repositoryaddurl).subscribe((e=>{this.loading=!1;try{let t=this.language.getAvialableLanguages(!0);for(let s of e.languages)t.some((e=>{if(e.language==s.language_code)return s.installed=!0,!0})),this.languages.push(s);for(let t of e.packages){let s=e.loaded.packages.indexOf(t.package);s>=0?(t.installed=!0,e.loaded.packages.splice(s,1)):t.installed=!1,this.packages.push(t)}this.versions=e.versions,this.opencrs=e.opencrs,this.errorpackages=e.loaded.packages}catch(e){console.error(e)}}),(e=>{this.loading=!1}))}selectRepository(e){this.repository=e,this.loadpackages()}reloadLoadedPackages(){this.modal.openStaticModal(ii).subscribe((e=>{e.instance.packages=this.packages.filter((e=>e.installed&&"content"!=e.type)).map((e=>({...e}))).sort(((e,t)=>"core"==e.package?-1:e.package.localeCompare(t.package))),e.instance.repositoryAddUrl=this.repositoryaddurl}))}reloadSystemPackage(){this.modal.confirm("MSG_RELOAD_SYSTEM_PACKAGE","MSG_RELOAD_SYSTEM_PACKAGE").subscribe((e=>{if(!e)return;const t=this.modal.await("LBL_LOADING");this.backend.getRequest("configuration/package/system").subscribe({next:()=>{t.next(!0),t.complete(),this.toast.sendToast("LBL_DATA_RELOADED","success")},error:()=>{t.next(!0),t.complete(),this.toast.sendToast("ERR_FAILED_TO_EXECUTE","error")}})}))}static#e=this.ɵfac=function(e){return new(e||PackageLoader)(u.rXU(m.B),u.rXU(et.H),u.rXU(g.o),u.rXU(h.yu),u.rXU(st.y))};static#t=this.ɵcmp=u.VBU({type:PackageLoader,selectors:[["package-loader"]],decls:23,vars:8,consts:[[1,"slds-p-around--medium","slds-theme--shade"],[1,"slds-page-header__row"],[1,"slds-page-header__col-title"],[1,"slds-media"],["icon","custom19","sprite","custom"],[1,"slds-media__body"],[1,"slds-page-header__name"],[1,"slds-page-header__name-title"],[1,"slds-page-header__title","slds-truncate"],["label","LBL_PACKAGE_LOADER"],[1,"slds-page-header__name-meta","slds-grid"],["class","slds-grid slds-grid_vertical-align-center slds-p-right--small",4,"ngIf"],["class","slds-grid slds-grid_vertical-align-center",4,"ngIf"],[1,"slds-page-header__col-actions","slds-grid","slds-grid--vertical-align-center"],[1,"slds-p-horizontal--small"],["system-title","MSG_RELOAD_SYSTEM_PACKAGE","class","slds-button slds-button--icon",3,"disabled","click",4,"ngIf"],["system-title","MSG_RELOAD_ALL_LOADED_PACKAGES",1,"slds-button","slds-button--icon",3,"disabled","click"],["icon","refresh"],["class","slds-form-element",4,"ngIf"],["class","slds-theme--default",4,"ngIf"],["system-to-bottom","","class","slds-theme--default slds-align--absolute-center",4,"ngIf"],["system-to-bottom","","class","slds-align_absolute-center",4,"ngIf"],[1,"slds-grid","slds-grid_vertical-align-center","slds-p-right--small"],["addclasses","slds-icon slds-icon-text-warning","divClass","","icon","warning","sprite","utility","size","xx-small"],[1,"slds-p-left--xx-small"],["label","LBL_OPEN_CHANGEREQUESTS"],[1,"slds-grid","slds-grid_vertical-align-center"],["label","LBL_ERRONEUOS_PACKAGES"],["system-title","MSG_RELOAD_SYSTEM_PACKAGE",1,"slds-button","slds-button--icon",3,"disabled","click"],["icon","custom_apps"],[1,"slds-form-element"],[1,"slds-form-element__control"],[1,"slds-combobox_container"],["role","combobox",1,"slds-combobox","slds-dropdown-trigger","slds-dropdown-trigger_click",3,"system-dropdown-trigger"],["role","none",1,"slds-combobox__form-element","slds-input-has-icon","slds-input-has-icon_right"],["type","text","autoComplete","off","role","textbox",1,"slds-input","slds-combobox__input",3,"ngModel","disabled","ngModelChange"],["icon","down","sprite","utility","size","x-small","addclasses","slds-icon_container slds-icon-utility-down slds-input__icon slds-input__icon_right"],["role","listbox",1,"slds-dropdown","slds-dropdown_length-5","slds-dropdown--x-small"],["role","presentation",1,"slds-listbox","slds-listbox_vertical"],["role","presentation","class","slds-listbox__item",3,"click",4,"ngFor","ngForOf"],["role","presentation",1,"slds-listbox__item",3,"click"],["role","option",1,"slds-listbox__option","slds-listbox__option_plain"],["title","Express Logistics and Transport",1,"slds-truncate"],[1,"slds-theme--default"],["role","tablist",1,"slds-tabs_default__nav"],["role","presentation",1,"slds-tabs_default__item",3,"ngClass","title"],["href","javascript:void(0);","role","tab",1,"slds-tabs_default__link",3,"click"],["label","LBL_ESSENTIALS"],["label","LBL_PACKAGES"],["label","LBL_LANGUAGES"],["label","LBL_CONTENT"],["packagescope","essentials",3,"ngClass","packages","repository"],["packagescope","config",3,"ngClass","packages","repository"],[3,"ngClass","languages","repository"],["packagescope","content",3,"ngClass","packages","repository"],["system-to-bottom","",1,"slds-theme--default","slds-align--absolute-center"],[1,"slds-text-heading--medium","slds-p-vertical--small"],["system-to-bottom","",1,"slds-align_absolute-center"],["size","16"],["label","LBL_RETRIEVING_PACKAGES"]],template:function(e,t){1&e&&(u.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),u.nrm(4,"system-icon",4),u.j41(5,"div",5)(6,"div",6)(7,"div",7)(8,"h1")(9,"span",8),u.nrm(10,"system-label",9),u.k0s()()()(),u.j41(11,"div",10),u.DNE(12,Ei,4,0,"div",11)(13,Li,5,1,"div",12),u.k0s()()()(),u.j41(14,"div",13)(15,"div",14),u.DNE(16,Di,2,1,"button",15),u.j41(17,"button",16),u.bIt("click",(function(){return t.reloadLoadedPackages()})),u.nrm(18,"system-button-icon",17),u.k0s()(),u.DNE(19,Mi,10,4,"div",18),u.k0s()()(),u.DNE(20,$i,18,40,"div",19)(21,Oi,3,0,"div",20)(22,Xi,5,0,"div",21)),2&e&&(u.R7$(12),u.Y8G("ngIf",t.opencrs),u.R7$(),u.Y8G("ngIf",t.errorpackages.length>0),u.R7$(3),u.Y8G("ngIf",t.systemPackageVisible),u.R7$(),u.Y8G("disabled",0==t.errorpackages.length),u.R7$(2),u.Y8G("ngIf",t.repositories.length>0),u.R7$(),u.Y8G("ngIf",!t.loading&&t.repository),u.R7$(),u.Y8G("ngIf",!t.loading&&!t.repository),u.R7$(),u.Y8G("ngIf",t.loading))},dependencies:[ni.q,li.b,nt.L,n.YU,n.Sq,n.bT,l.me,l.BC,l.vS,gi,Si,p.t,ce.J,f.W,ps.P],encapsulation:2})}return PackageLoader})();var Yi=s(54742);let Ni=(()=>{class SystemFilterBuilder{constructor(){this._conditions={logicaloperator:"and",groupscope:"all",conditions:[]}}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}writeValue(e){if(e&&!_.isEmpty(e)){let t={logicaloperator:e.logicaloperator,groupscope:e.groupscope,conditions:[...e.conditions]};this._conditions=t}}expressionChanged(){let e=[];for(let t of this._conditions.conditions)!0!==t.deleted&&e.push(t);this._conditions.conditions=e,_.isEmpty(this._conditions.conditions)?this.onChange(null):this.onChange({...this._conditions})}static#e=this.ɵfac=function(e){return new(e||SystemFilterBuilder)};static#t=this.ɵcmp=u.VBU({type:SystemFilterBuilder,selectors:[["system-filter-builder"]],inputs:{module:"module"},features:[u.Jv_([{provide:l.kq,useExisting:(0,u.Rfq)((()=>SystemFilterBuilder)),multi:!0}])],decls:1,vars:2,consts:[[3,"filtergroup","module","expressionChanged"]],template:function(e,t){1&e&&(u.j41(0,"system-filter-builder-expression-group",0),u.bIt("expressionChanged",(function(){return t.expressionChanged()})),u.k0s()),2&e&&u.Y8G("filtergroup",t._conditions)("module",t.module)},dependencies:[Yi.y],encapsulation:2})}return SystemFilterBuilder})();var Vi=s(67392),Ai=s(10220),Pi=s(51099),zi=s(58829),Hi=s(28114),qi=s(17427),Ji=s(6315),Wi=s(58082),Ki=s(10467),Qi=s(30012);const Zi=["inputFile"];function en(e,t){if(1&e){const e=u.RV6();u.j41(0,"div",3)(1,"div",4),u.bIt("system-drop-file",(function(t){u.eBV(e);const s=u.XpG();return u.Njj(s.uploadFile(t))})),u.j41(2,"input",5,6),u.bIt("change",(function(){u.eBV(e);const t=u.sdS(3),s=u.XpG();return u.Njj(s.uploadFile(t.files))}))("click",(function(){u.eBV(e);const t=u.sdS(3);return u.Njj(t.value=null)})),u.k0s(),u.j41(4,"label",7)(5,"span",8),u.nrm(6,"system-button-icon",9)(7,"system-label",10),u.k0s(),u.j41(8,"span",11),u.nrm(9,"system-label",12)(10,"system-label",13),u.k0s()()()()}if(2&e){const e=u.XpG();u.R7$(2),u.Y8G("accept",e.accept)("disabled",e.disabled)("id",e.elementID),u.R7$(2),u.Y8G("for",e.elementID)}}function tn(e,t){if(1&e){const e=u.RV6();u.j41(0,"div",14)(1,"span",15),u.nrm(2,"system-file-icon",16),u.k0s(),u.j41(3,"a",17)(4,"div",18),u.EFF(5),u.k0s()(),u.j41(6,"button",19),u.bIt("click",(function(){u.eBV(e);const t=u.XpG();return u.Njj(t.removeFile())})),u.nrm(7,"system-button-icon",20),u.k0s()()}if(2&e){const e=u.XpG();u.R7$(2),u.Y8G("filename",e.file.file_name)("filemimetype",e.file.file_mime_type),u.R7$(2),u.Y8G("system-title",e.file.file_name),u.R7$(),u.SpI(" ",e.file.file_name," ")}}let sn=(()=>{class SystemInputFileContent{constructor(e,t,s,i,n,l,o){this.configurationService=e,this.session=t,this.toast=s,this.helper=i,this.modal=n,this.cdRef=l,this.language=o,this.accept="*",this.disabled=!1,this.contenttype="base64",this.persistens=!1,this.isUploading=!1,this.elementID=_.uniqueId("input-file")}registerOnChange(e){this.onChange=t=>{e(t)}}registerOnTouched(e){this.onTouched=e}writeValue(e){this.file=e}uploadFile(e){var t=this;return(0,Ki.A)((function*(){if(0==e.length)return;t.isUploading=!0,t.cdRef.detectChanges(),t.file={file_name:e[0].name,file_mime_type:e[0].type,file_size:t.helper.humanFileSize(e[0].size)};let s=t.configurationService.getSystemParamater("upload_maxsize");if(s&&e[0].size>s)return void t.toast.sendToast(t.language.getLabelFormatted("LBL_EXCEEDS_MAX_UPLOADFILESIZE",[t.file.file_name,t.helper.humanFileSize(s)]),"error");const i=yield t.readFileAsync(e[0]);t.onChange(i),t.persistens||(t.file=void 0,t.cdRef.detectChanges())}))()}readFileAsync(e){var t=this;return(0,Ki.A)((function*(){return new Promise(((s,i)=>{const n=new FileReader;if(n.onload=()=>s(n.result.toString()),n.onerror=i,"text"===t.contenttype)n.readAsText(e);else n.readAsDataURL(e)}))}))()}removeFile(){this.file=void 0,this.cdRef.detectChanges(),this.onChange(null)}static#e=this.ɵfac=function(e){return new(e||SystemInputFileContent)(u.rXU(Ce.i),u.rXU(ie.d),u.rXU(g.o),u.rXU(be.d),u.rXU(st.y),u.rXU(u.gRc),u.rXU(m.B))};static#t=this.ɵcmp=u.VBU({type:SystemInputFileContent,selectors:[["system-input-file-content"]],viewQuery:function(e,t){if(1&e&&u.GBs(Zi,5,u.c1b),2&e){let e;u.mGM(e=u.lsd())&&(t.inputFile=e.first)}},inputs:{fieldName:"fieldName",accept:"accept",disabled:"disabled",contenttype:"contenttype",persistens:"persistens"},features:[u.Jv_([{provide:l.kq,useExisting:(0,u.Rfq)((()=>SystemInputFileContent)),multi:!0}])],decls:4,vars:2,consts:[[1,"slds-form-element__control","slds-grid","slds-grid--align-spread","slds-p-vertical--xx-small","slds-is-relative","slds-size--1-of-1"],["class","slds-file-selector slds-file-selector_files slds-is-relative slds-size--1-of-1",4,"ngIf","ngIfElse"],["fileContainer",""],[1,"slds-file-selector","slds-file-selector_files","slds-is-relative","slds-size--1-of-1"],[1,"slds-file-selector__dropzone","slds-p-around--small","slds-is-relative","slds-size--1-of-1",3,"system-drop-file"],["type","file",1,"slds-file-selector__input","slds-assistive-text","slds-has-error",3,"accept","disabled","id","change","click"],["inputFile",""],[1,"slds-file-selector__body",2,"cursor","pointer",3,"for"],[1,"slds-file-selector__button","slds-button","slds-button_neutral"],["icon","upload",1,"slds-m-right--xx-small","slds-align--absolute-center"],["label","LBL_UPLOAD_FILE"],[1,"slds-file-selector__text","slds-medium-show"],["label","LBL_OR"],["label","LBL_DROP_FILE"],[1,"slds-pill","slds-pill_link","slds-size--1-of-1"],[1,"slds-pill__icon_container","slds-m-left--xxx-small"],["divClass","","size","small",3,"filename","filemimetype"],["href","javascript:void(0);",1,"slds-pill__action","slds-p-around--xx-small"],[1,"slds-pill__label","slds-truncate",2,"width","calc(100% - 20px)",3,"system-title"],["system-title","LBL_REMOVE",1,"slds-button","slds-button_icon","slds-button_icon","slds-pill__remove","slds-m-right--xx-small",3,"click"],["icon","close"]],template:function(e,t){if(1&e&&(u.j41(0,"div",0),u.DNE(1,en,11,4,"div",1)(2,tn,8,4,"ng-template",null,2,u.C5r),u.k0s()),2&e){const e=u.sdS(3);u.R7$(),u.Y8G("ngIf",!t.file)("ngIfElse",e)}},dependencies:[Qi.H,nt.L,n.bT,p.t,ue.z,f.W],encapsulation:2,changeDetection:0})}return SystemInputFileContent})();var nn=s(43262);function ln(e,t){if(1&e){const e=u.RV6();u.j41(0,"button",7),u.bIt("click",(function(){u.eBV(e);const t=u.XpG();return u.Njj(t.expandItem())})),u.nrm(1,"system-button-icon",8),u.k0s()}if(2&e){const e=u.XpG();u.Y8G("disabled",e.disabled),u.R7$(),u.Y8G("icon",e.icon)}}function on(e,t){if(1&e){const e=u.RV6();u.j41(0,"system-module-tree-item",9),u.bIt("itemSelected",(function(t){u.eBV(e);const s=u.XpG();return u.Njj(s.emitSelected(t))})),u.k0s()}if(2&e){const e=t.$implicit,s=u.XpG();u.Y8G("module",e.module)("name",e.displayname)("nodedata",e)("level",s.level+1)("path",e.path)("selectedNodeId",s.selectedNodeId)("displayAuditFields",s.displayAuditFields)("displayRelationshipFields",s.displayRelationshipFields)}}let an=(()=>{class SystemModuleTreeItem{constructor(e,t,s,i,n){this.backend=e,this.language=t,this.metadata=s,this.moduleTree=i,this.modelUtilities=n,this.displayRelationshipFields=!1,this.displayAuditFields=!1,this.selectedNodeId="",this.level=1,this.expanded=!1,this.nodeitems=[],this.isLoaded=!1,this.isLoading=!1,this.disabled=!1,this.itemSelected=new u.bkB}get isSelected(){return this.selectedNodeId==this.nodedata.nodeId}get icon(){return this.isLoading?"spinner":"chevronright"}loadItems(){this.isLoading=!0,this.moduleTree.isLoading=!0,this.backend.getRequest("dictionary/browser/"+this.module+"/nodes").subscribe((e=>{e&&(this.nodeitems=e.map((e=>(e.nodeId=this.modelUtilities.generateGuid(),e.displayname=e.label?this.language.getLabel(e.label):this.language.getModuleName(e.module),e))).sort(((e,t)=>e.displayname&&t.displayname?e.displayname>t.displayname?1:-1:0)),this.displayRelationshipFields&&this.nodedata.hasRelationshipFields&&(this.nodeitems=[{displayname:this.language.getLabel("LBL_RELATIONSHIP_FIELDS"),leaf:!0,relationshipNode:!0,module:this.module,parentModule:this.nodedata.parentModule,link:this.nodedata.link,nodeId:this.nodedata?this.nodedata.nodeId:"root",path:`relationship:${this.nodedata.parentModule}:${this.nodedata.link}`},...this.nodeitems]),this.displayAuditFields&&1==this.metadata.getModuleDefs(this.module).audited&&(this.nodeitems=[{displayname:this.language.getLabel("LBL_AUDIT_FIELDS"),leaf:!0,auditNode:!0,module:this.module,link:this.nodedata.link,nodeId:this.nodedata?this.nodedata.nodeId:"root",path:`audit:${this.module}:audit`},...this.nodeitems])),this.isLoading=!1,this.moduleTree.isLoading=!1,this.isLoaded=!0,this.nodeitems.length>0?this.expanded=!0:this.disabled=!0}))}expandItem(){this.isLoading||(this.isLoaded?this.expanded=!this.expanded:this.loadItems())}nodeSelected(){this.itemSelected.emit({path:this.path,module:this.module,parentModule:this.nodedata.parentModule,link:this.nodedata.link,nodeId:this.nodedata?this.nodedata.nodeId:"root",relationshipNode:this.nodedata.relationshipNode,auditNode:this.nodedata.auditNode})}emitSelected(e){e.path=this.path+"::"+e.path,this.itemSelected.emit(e)}trackByFn(e,t){return t.nodeId}static#e=this.ɵfac=function(e){return new(e||SystemModuleTreeItem)(u.rXU(et.H),u.rXU(m.B),u.rXU(h.yu),u.rXU(nn.I),u.rXU(tt.g))};static#t=this.ɵcmp=u.VBU({type:SystemModuleTreeItem,selectors:[["system-module-tree-item"]],inputs:{displayRelationshipFields:"displayRelationshipFields",displayAuditFields:"displayAuditFields",selectedNodeId:"selectedNodeId",level:"level",path:"path",module:"module",name:"name",nodedata:"nodedata"},outputs:{itemSelected:"itemSelected"},decls:8,vars:8,consts:[["role","treeitem","tabindex","0"],[1,"slds-tree__item"],["class","slds-button slds-button_icon slds-m-right_x-small",3,"disabled","click",4,"ngIf"],[1,"slds-has-flexi-truncate"],[1,"slds-tree__item-label","slds-truncate",3,"click"],["role","group"],[3,"module","name","nodedata","level","path","selectedNodeId","displayAuditFields","displayRelationshipFields","itemSelected",4,"ngFor","ngForOf","ngForTrackBy"],[1,"slds-button","slds-button_icon","slds-m-right_x-small",3,"disabled","click"],[3,"icon"],[3,"module","name","nodedata","level","path","selectedNodeId","displayAuditFields","displayRelationshipFields","itemSelected"]],template:function(e,t){1&e&&(u.j41(0,"li",0)(1,"div",1),u.DNE(2,ln,2,2,"button",2),u.j41(3,"span",3)(4,"span",4),u.bIt("click",(function(){return t.nodeSelected()})),u.EFF(5),u.k0s()()(),u.j41(6,"ul",5),u.DNE(7,on,1,8,"system-module-tree-item",6),u.k0s()()),2&e&&(u.BMQ("aria-expanded",t.expanded)("aria-level",t.level),u.R7$(),u.AVh("slds-is-selected",t.isSelected),u.R7$(),u.Y8G("ngIf",!t.nodedata.leaf),u.R7$(3),u.JRh(t.name),u.R7$(2),u.Y8G("ngForOf",t.nodeitems)("ngForTrackBy",t.trackByFn))},dependencies:[n.Sq,n.bT,p.t,SystemModuleTreeItem],encapsulation:2})}return SystemModuleTreeItem})();var rn=s(14354);let dn=(()=>{class SystemImageModal{set imageData(e){if(this.mimetype=this.imageData_onlyBase64code="",e){let t=e.split(";",2);this.mimetype=t[0],this.imageData_onlyBase64code=t[1].slice(7)}}constructor(e){this.language=e,this.title="",this.maxWidth=null,this.maxHeight=null,this.droppedFiles=null,this.imageData_onlyBase64code=null,this.answer=null,this.answerSubject=null,this.answerSubject=new z.B,this.answer=this.answerSubject.asObservable()}cancel(){this.answerSubject.next(!1),this.answerSubject.complete(),this.self.destroy()}get canSave(){return!!this.imageData_onlyBase64code}save(){this.canSave&&(this.answerSubject.next(this.systemInputMedia.mediaMetaData.mimetype+";base64,"+this.imageData_onlyBase64code),this.answerSubject.complete(),this.self.destroy())}onModalEscX(){this.cancel()}static#e=this.ɵfac=function(e){return new(e||SystemImageModal)(u.rXU(m.B))};static#t=this.ɵcmp=u.VBU({type:SystemImageModal,selectors:[["system-image-modal"]],viewQuery:function(e,t){if(1&e&&u.GBs(Hi.A,5),2&e){let e;u.mGM(e=u.lsd())&&(t.systemInputMedia=e.first)}},inputs:{title:"title",maxWidth:"maxWidth",maxHeight:"maxHeight",droppedFiles:"droppedFiles",imageData:"imageData"},decls:10,vars:7,consts:[["size","large"],[3,"close"],[1,"slds-height_full",3,"ngModel","maxWidth","maxHeight","droppedFiles","mimetype","ngModelChange"],[1,"slds-button","slds-button--brand",3,"disabled","click"],["label","LBL_SAVE"],[1,"slds-button","slds-button--neutral",3,"click"],["label","LBL_CANCEL"]],template:function(e,t){1&e&&(u.j41(0,"system-modal",0)(1,"system-modal-header",1),u.bIt("close",(function(){return t.cancel()})),u.EFF(2),u.k0s(),u.j41(3,"system-modal-content")(4,"system-input-media",2),u.mxI("ngModelChange",(function(e){return u.DH7(t.imageData_onlyBase64code,e)||(t.imageData_onlyBase64code=e),e})),u.bIt("mimetype",(function(e){return t.mimetype=e})),u.k0s()(),u.j41(5,"system-modal-footer")(6,"button",3),u.bIt("click",(function(){return t.save()})),u.nrm(7,"system-label",4),u.k0s(),u.j41(8,"button",5),u.bIt("click",(function(){return t.cancel()})),u.nrm(9,"system-label",6),u.k0s()()()),2&e&&(u.R7$(2),u.SpI(" ",t.title," "),u.R7$(2),u.R50("ngModel",t.imageData_onlyBase64code),u.Y8G("maxWidth",t.maxWidth)("maxHeight",t.maxHeight)("droppedFiles",t.droppedFiles)("mimetype",t.mimetype),u.R7$(2),u.Y8G("disabled",!t.canSave))},dependencies:[l.BC,l.vS,f.W,b.D,y.I,v.Q,k.C,Hi.A],encapsulation:2})}return SystemImageModal})();var cn=s(52527),un=s(63021),mn=s(98417),hn=s(15201),gn=s(84338),pn=s(14445),fn=s(22667),bn=s(36953);function yn(e,t){if(1&e&&u.nrm(0,"object",2),2&e){const e=u.XpG();u.Y8G("data",e.blobUrl,u.f$h)}}let vn=(()=>{class SystemPDFContainer{constructor(e){this.sanitizer=e}ngOnChanges(e){if(this.blobUrl=null,this.pdf){let e=this.dataToBlob(atob(this.pdf));this.blobUrl=this.sanitizer.bypassSecurityTrustResourceUrl(URL.createObjectURL(e))}}dataToBlob(e){let t=[];for(let s=0;s<e.length;s+=512){let i=e.slice(s,s+512),n=new Array(i.length);for(let e=0;e<i.length;e++)n[e]=i.charCodeAt(e);let l=new Uint8Array(n);t.push(l)}return new Blob(t)}static#e=this.ɵfac=function(e){return new(e||SystemPDFContainer)(u.rXU(xt.up))};static#t=this.ɵcmp=u.VBU({type:SystemPDFContainer,selectors:[["system-pdf-container"]],inputs:{pdf:"pdf"},features:[u.OA$],decls:2,vars:1,consts:[[1,"slds-size--1-of-1","slds-height_full"],["type","application/pdf","width","100%","height","99%",3,"data",4,"ngIf"],["type","application/pdf","width","100%","height","99%",3,"data"]],template:function(e,t){1&e&&(u.j41(0,"div",0),u.DNE(1,yn,1,1,"object",1),u.k0s()),2&e&&(u.R7$(),u.Y8G("ngIf",t.blobUrl))},dependencies:[n.bT],encapsulation:2})}return SystemPDFContainer})();function _n(e,t){if(1&e&&u.nrm(0,"iframe",4),2&e){const e=u.XpG();u.Y8G("src",e.iframeSource,u.f$h)}}let kn=(()=>{class SystemIframeModal{constructor(e,t){this.sanitizer=e,this.cdref=t}close(){this.self.destroy()}ngOnInit(){this.iframeSource=this.sanitizer.bypassSecurityTrustResourceUrl(this.source),this.cdref.detectChanges()}static#e=this.ɵfac=function(e){return new(e||SystemIframeModal)(u.rXU(xt.up),u.rXU(u.gRc))};static#t=this.ɵcmp=u.VBU({type:SystemIframeModal,selectors:[["system-iframe-modal"]],inputs:{source:"source"},decls:4,vars:1,consts:[["size","large"],[3,"close"],["system-modal-content-grow","","margin","none"],["class","slds-size--1-of-1 slds-height_full","style","border: none;",3,"src",4,"ngIf"],[1,"slds-size--1-of-1","slds-height_full",2,"border","none",3,"src"]],template:function(e,t){1&e&&(u.j41(0,"system-modal",0)(1,"system-modal-header-empty",1),u.bIt("close",(function(){return t.close()})),u.k0s(),u.j41(2,"system-modal-content",2),u.DNE(3,_n,1,1,"iframe",3),u.k0s()()),2&e&&(u.R7$(3),u.Y8G("ngIf",t.source))},dependencies:[n.bT,b.D,y.I,kt.b],encapsulation:2,changeDetection:0})}return SystemIframeModal})();var Rn=s(32641),In=s(205),xn=s(73978),jn=s(73976),Gn=s(75642),Cn=s(30209),wn=s(76107),Sn=s(77864),En=s(24834),Ln=s(11614);let Dn=(()=>{class SystemChartService{constructor(e,t){this.libLoader=e,this.zone=t,this.onValueClick$=new z.B}loadChart(e,t,s,i){this.chartContainer=e,this.options={legend:s.legend??{position:"none"},colors:s.colors,fontSize:s.fontSize??11,isStacked:s.isStacked,is3D:s.is3D,animation:{startup:!0,duration:1e3}},this.chartType=t,this.data=i,this.libLoader.loadLib("googlecharts").subscribe((()=>{this.zone.runOutsideAngular((()=>{google.charts.load("current",{packages:["corechart"]}),google.charts.setOnLoadCallback((()=>this.renderChart()))}))}))}setData(e){this.data=e,this.wrapper.setDataTable(e),this.drawChart()}setChartType(e){this.chartType=e,"Donut"==e?(this.wrapper.setChartType("PieChart"),this.wrapper.setOption("pieHole",.4),this.drawChart()):(this.wrapper.setChartType(e+"Chart"),this.drawChart())}renderChart(){const e={chartType:this.chartType+"Chart",dataTable:this.data,options:this.options};this.wrapper=new google.visualization.ChartWrapper(e),this.drawChart(),this.addValueClickListener()}addValueClickListener(){google.visualization.events.addListener(this.wrapper,"select",(e=>{const t=e.getSelection();this.onValueClick$.next(0==t.length?void 0:t[0])}))}drawChart(){this.wrapper.draw(this.chartContainer)}static#e=this.ɵfac=function(e){return new(e||SystemChartService)(u.KVO(Zt.b),u.KVO(u.SKi))};static#t=this.ɵprov=u.jDH({token:SystemChartService,factory:SystemChartService.ɵfac})}return SystemChartService})();var Fn=s(18359),Mn=s(31886);const Tn=["chartContainer"];function Bn(e,t){1&e&&(u.j41(0,"div",4)(1,"system-illustration-no-data"),u.nrm(2,"system-label",5),u.k0s()())}let $n=(()=>{class SystemChartOneDimensional{constructor(e,t){this.chartService=e,this.language=t,this.hasData=!0,this.is3D=!1,this.dataState="",this.padding="small",this.onValueClick=new u.bkB,this.subscriptions=new Fn.yU}get options(){return{legend:this.legend,colors:this.colors,fontSize:this.fontSize,is3D:this.is3D}}get paddingClass(){return"slds-p-around--"+this.padding}ngAfterViewInit(){this.loadChart()}ngAfterContentInit(){this.loadDataFromContentChildren(),this.rowChildren.changes.subscribe((e=>{this.setData()}))}ngOnChanges(e){e.chartType&&!e.chartType.firstChange&&(this.loadDataFromContentChildren(),this.setChartType(e.chartType.currentValue))}ngOnDestroy(){this.subscriptions.unsubscribe()}loadDataFromContentChildren(){if(!this.rowChildren)return;if(0==this.rowChildren.length)return this.hasData=!1;this.data={rows:[],cols:[{id:"label",label:"label",type:"string"},{id:"value",label:"value",type:"number"}]},this.colors&&"Bar"==this.chartType&&this.data.cols.push({id:"style",type:"string",role:"style"});let e=0;this.rowChildren.forEach((t=>{const s={c:[{v:this.language.getLabel(t.label)},{v:Number(t.value)}]};this.colors&&"Bar"==this.chartType&&(s.c.push({v:`color: ${this.colors[e]}`}),e=e>this.colors.length?0:e+1),this.data.rows.push(s)}))}loadChart(){this.chartService.loadChart(this.chartContainer.element.nativeElement,this.chartType,this.options,this.data),this.subscriptions.add(this.chartService.onValueClick$.subscribe({next:e=>this.chartService.zone.run((()=>this.onValueClick.emit(e)))}))}setData(){this.loadDataFromContentChildren(),this.chartService.setData(this.data)}setChartType(e){this.loadDataFromContentChildren(),this.chartService.setChartType(e??this.chartType)}static#e=this.ɵfac=function(e){return new(e||SystemChartOneDimensional)(u.rXU(Dn),u.rXU(m.B))};static#t=this.ɵcmp=u.VBU({type:SystemChartOneDimensional,selectors:[["system-chart-one-dimensional"]],contentQueries:function(e,t,s){if(1&e&&u.wni(s,Mn.k,4),2&e){let e;u.mGM(e=u.lsd())&&(t.rowChildren=e)}},viewQuery:function(e,t){if(1&e&&u.GBs(Tn,5,u.c1b),2&e){let e;u.mGM(e=u.lsd())&&(t.chartContainer=e.first)}},inputs:{chartType:"chartType",legend:"legend",colors:"colors",fontSize:"fontSize",is3D:"is3D",dataState:"dataState",padding:"padding"},outputs:{onValueClick:"onValueClick"},features:[u.Jv_([Dn]),u.OA$],decls:4,vars:4,consts:[[1,"slds-height_full",3,"ngClass"],[1,"slds-size--1-of-1","slds-height_full"],["chartContainer",""],["class","slds-size--1-of-1 slds-height_full slds-align_absolute-center slds-theme--default",4,"ngIf"],[1,"slds-size--1-of-1","slds-height_full","slds-align_absolute-center","slds-theme--default"],["label","LBL_NO_DATA"]],template:function(e,t){1&e&&(u.j41(0,"div",0),u.nrm(1,"div",1,2),u.DNE(3,Bn,3,0,"div",3),u.k0s()),2&e&&(u.Y8G("ngClass",t.paddingClass),u.R7$(),u.AVh("slds-hide",!t.hasData),u.R7$(2),u.Y8G("ngIf",!t.hasData))},dependencies:[n.YU,n.bT,he.L,f.W],encapsulation:2})}return SystemChartOneDimensional})();var On=s(52684),Xn=s(41587);let Un=(()=>{class SystemChartDataColumn{static#e=this.ɵfac=function(e){return new(e||SystemChartDataColumn)};static#t=this.ɵcmp=u.VBU({type:SystemChartDataColumn,selectors:[["system-chart-data-column"]],contentQueries:function(e,t,s){if(1&e&&u.wni(s,Mn.k,4),2&e){let e;u.mGM(e=u.lsd())&&(t.rowChildren=e)}},inputs:{value:"value"},decls:0,vars:0,template:function(e,t){},encapsulation:2})}return SystemChartDataColumn})();function Yn(e,t){1&e&&(u.j41(0,"div",4)(1,"system-illustration-no-data"),u.nrm(2,"system-label",5),u.k0s()())}let Nn=(()=>{class SystemChartMultiDimensional extends $n{constructor(){super(...arguments),this.isStacked=!1,this.cols=[]}get options(){return{legend:this.legend,colors:this.colors,fontSize:this.fontSize,is3D:this.is3D,isStacked:this.isStacked}}loadDataFromContentChildren(){if(0==this.columnChildren.length)return this.hasData=!1;this.data={rows:[],cols:[{id:"AxisY",label:"AxisY",type:"string"}]},this.data.cols=this.data.cols.concat(this.cols.map((e=>({...e,type:"number"})))),this.columnChildren.forEach((e=>{const t={c:[{v:e.value}]};this.cols.forEach(((s,i)=>{const n=e.rowChildren.find((e=>e.label==s.label));t.c[i+1]=n?{v:Number(n.value)}:null})),this.data.rows.push(t)}))}static#e=this.ɵfac=(()=>{let e;return function(t){return(e||(e=u.xGo(SystemChartMultiDimensional)))(t||SystemChartMultiDimensional)}})();static#t=this.ɵcmp=u.VBU({type:SystemChartMultiDimensional,selectors:[["system-chart-multi-dimensional"]],contentQueries:function(e,t,s){if(1&e&&u.wni(s,Un,4),2&e){let e;u.mGM(e=u.lsd())&&(t.columnChildren=e)}},inputs:{chartType:"chartType",isStacked:"isStacked",cols:"cols"},features:[u.Jv_([Dn]),u.Vt3],decls:4,vars:3,consts:[[1,"slds-p-vertical--small","slds-p-horizontal--small","slds-height_full"],[1,"slds-size--1-of-1","slds-height_full"],["chartContainer",""],["class","slds-size--1-of-1 slds-height_full slds-align_absolute-center slds-theme--default",4,"ngIf"],[1,"slds-size--1-of-1","slds-height_full","slds-align_absolute-center","slds-theme--default"],["label","LBL_NO_DATA"]],template:function(e,t){1&e&&(u.j41(0,"div",0),u.nrm(1,"div",1,2),u.DNE(3,Yn,3,0,"div",3),u.k0s()),2&e&&(u.R7$(),u.AVh("slds-hide",!t.hasData),u.R7$(2),u.Y8G("ngIf",!t.hasData))},dependencies:[n.bT,he.L,f.W],encapsulation:2})}return SystemChartMultiDimensional})();var Vn=s(69747),An=s(65416),Pn=s(82931),zn=s(56980);let Hn=(()=>{class SystemComponents{static#e=this.ɵfac=function(e){return new(e||SystemComponents)};static#t=this.ɵmod=u.$C({type:SystemComponents});static#s=this.ɵinj=u.G2t({imports:[o.h,n.MD,l.YN,i.ad]})}return SystemComponents})();("undefined"==typeof ngJitMode||ngJitMode)&&u.Obh(Hn,{declarations:[Ui,mi,gi,Gi,Si,Ci,c.e,c.j,C,w.J,S.Q,L,p.t,D.a,M.I,B,F.V,$.u,U.f,O.G,X.h,Y.x,N.p,V.k,A.R,P.F,H,q.k,J.H,W.f,K.B,te,Q,se.s,oe,ae.b,re.Z,de.P,ce.J,ue.z,kn,me.r,he.L,ge.b,pe.w,fe.L,ve,Je,_e.H,Ie.E,ke.v,Re.W,xe.m,Rn.b,je.n,Ge.g,Le,Fe.M,De.Q,Me._,Te.W,Be.d,$e.w,Oe.u,Xe.c,Ue.e,Ye.N,Ne.B,Ve.J,Ae.s,Pe.$,ze.V,He.j,We.T,Ke.T,Qe.H,Ji.T,Ze,f.W,ht.P,gt.r,pt.r,ft.k,bt.S,yt.n,b.D,y.I,v.Q,k.C,kt.b,vt.s,_t.I,Rt.E,a.B,r.B,It.Y,Gt,jt.$,vn,Xe.c,Ni,Yi.y,zi.H,Vi.q,Pi.N,Ai.A,Ms,Ct.B,Lt,Dt.Y,Ft.C,Mt.K,ns,Wt,ds,cs.v,us.i,ms.Z,hs.i,gs.$,ps.P,ys,vs.O,ks.V,_s.t,Rs,Is,xs.m,js.F,Cs.S,Gs.d,Ls,es.B,Us,Ys.N,Ns.M,nn.I,an,Hi.A,qi.p,rn.a,cn.b,rn.a,dn,ye.L,un.X,mn.B,hn.x,ut,mt,gn.w,pn.x,fn.J,bn.t,Wi.s,sn,Vs,In.H,xn.U,d.M,jn.Y,Gn.u,Cn.D,Sn.a,wn.R,En.w,Ln.E,$n,On.y,Mn.k,Un,Nn,Xn.t,Vn.N,An.Q,Pn.D,ii,zn.u],imports:[o.h,n.MD,l.YN,i.ad],exports:[c.e,c.j,d.M,C,w.J,S.Q,L,p.t,D.a,M.I,B,F.V,U.f,O.G,X.h,Y.x,N.p,A.R,P.F,q.k,W.f,K.B,te,Q,se.s,zi.H,Vi.q,Pi.N,Yi.y,re.Z,de.P,ce.J,ue.z,me.r,he.L,ge.b,pe.w,fe.L,_e.H,Ie.E,ke.v,Re.W,xe.m,je.n,Ge.g,Le,Fe.M,De.Q,Me._,Te.W,$e.w,Oe.u,Xe.c,Ue.e,Ye.N,Ne.B,Ve.J,Ae.s,Pe.$,ze.V,He.j,We.T,Ke.T,Qe.H,Ji.T,Ze,f.W,ht.P,gt.r,pt.r,ft.k,bt.S,b.D,y.I,v.Q,k.C,kt.b,vt.s,_t.I,Rt.E,It.Y,Ct.B,Lt,Dt.Y,Ft.C,Mt.K,ds,cs.v,us.i,ps.P,ys,vs.O,ks.V,_s.t,Rs,xs.m,js.F,Cs.S,Gs.d,es.B,Us,Ys.N,Ns.M,Xe.c,Ni,Yi.y,zi.H,gs.$,Hi.A,gs.$,nn.I,an,qi.p,rn.a,cn.b,rn.a,dn,un.X,mn.B,Ge.g,ze.V,gn.w,pn.x,fn.J,bn.t,Wi.s,sn,kt.b,Vs,vn,Rn.b,ut,xn.U,$.u,ms.Z,hs.i,Je,J.H,jn.Y,Gn.u,Cn.D,Sn.a,wn.R,En.w,hs.i,jt.$,ye.L,Ln.E,$n,On.y,Mn.k,Un,Nn,Xn.t,Xn.t,Be.d,An.Q,Pn.D,ii,zn.u]}),u.wjB(yt.n,[f.W,ps.P],[]),u.wjB(Ft.C,[n.Sq,n.bT,n.ux,n.e1,n.fG,l.xH,l.y7,l.me,l.wz,l.BC,l.vS,p.t,Fe.M,Ve.J,f.W],[]),u.wjB(ps.P,[n.bT,n.B3,f.W],[]),u.wjB(nn.I,[an],[])},63755:(e,t,s)=>{"use strict";s.d(t,{p:()=>M});var i=s(21413),n=s(54438),l=s(49722),o=s(50531),a=s(41081),r=s(60177),d=s(84341),c=s(25863),u=s(70923),m=s(32062),h=s(40713),g=s(25028),p=s(88418),f=s(83524),b=s(48717),y=s(18521);const v=(e,t)=>({"slds-button_neutral":e,"slds-button--brand":t});function _(e,t){if(1&e){const e=n.RV6();n.j41(0,"div",11)(1,"button",12),n.bIt("click",(function(){const t=n.eBV(e).$implicit,s=n.XpG(2);return n.Njj(s.setSelectedDictionary(t))})),n.EFF(2),n.k0s()()}if(2&e){const e=t.$implicit,s=n.XpG(2);n.R7$(),n.Y8G("ngClass",n.l_i(2,v,e!=s.dictionaryName,e==s.dictionaryName)),n.R7$(),n.SpI(" ",e," ")}}function k(e,t){if(1&e&&(n.j41(0,"div",9)(1,"div",10),n.EFF(2,"dictionaries"),n.k0s(),n.Z7z(3,_,3,5,"div",13,n.Vm6),n.k0s()),2&e){const e=n.XpG();n.R7$(3),n.Dyx(e.dictionaries)}}function R(e,t){if(1&e&&n.nrm(0,"system-utility-icon",35),2&e){const e=n.XpG().$implicit;n.Y8G("icon",e.status?"executed"==e.status?"success":"error":"funding_requirement")("colorclass",e.status?"executed"==e.status?"slds-icon-text-success":"slds-icon-text-error":"slds-icon-text-default")}}function I(e,t){1&e&&n.nrm(0,"system-spinner",36)}function x(e,t){if(1&e){const e=n.RV6();n.j41(0,"button",33),n.bIt("click",(function(){n.eBV(e);const t=n.XpG().$implicit,s=n.XpG(2);return n.Njj(s.execute(t,"notnull"))})),n.nrm(1,"system-button-icon",37),n.k0s()}if(2&e){const e=n.XpG().$implicit,t=n.XpG(2);n.Y8G("disabled",!t.values[e.name]||"processing"==e.status)}}const j=(e,t)=>({"slds-theme--info":e,"slds-theme--error":t});function G(e,t){if(1&e){const e=n.RV6();n.j41(0,"tr",26)(1,"td"),n.DNE(2,R,1,2,"system-utility-icon",27)(3,I,1,0,"system-spinner",28),n.k0s(),n.j41(4,"td")(5,"div",29),n.EFF(6),n.k0s()(),n.j41(7,"td")(8,"div",29),n.EFF(9),n.k0s()(),n.j41(10,"td")(11,"input",30),n.mxI("ngModelChange",(function(t){const s=n.eBV(e).$implicit,i=n.XpG(2);return n.DH7(i.values[s.name],t)||(i.values[s.name]=t),n.Njj(t)})),n.k0s()(),n.j41(12,"td")(13,"div",31),n.DNE(14,x,2,1,"button",32),n.j41(15,"button",33),n.bIt("click",(function(){const t=n.eBV(e).$implicit,s=n.XpG(2);return n.Njj(s.deleteNullRows(t))})),n.nrm(16,"system-button-icon",34),n.k0s()()()()}if(2&e){const e=t.$implicit,s=n.XpG(2);n.Y8G("ngClass",n.l_i(10,j,"processing"==e.status,"error"==e.status)),n.R7$(2),n.Y8G("ngIf","processing"!=e.status),n.R7$(),n.Y8G("ngIf","processing"==e.status),n.R7$(3),n.JRh(e.name),n.R7$(3),n.JRh(e.count),n.R7$(2),n.R50("ngModel",s.values[e.name]),n.Y8G("disabled","executed"==e.status)("maxlength",e.dbDefinition.len),n.R7$(3),n.Y8G("ngIf","executed"!=e.status),n.R7$(),n.Y8G("disabled","processing"==e.status||"executed"==e.status)}}function C(e,t){if(1&e&&(n.j41(0,"div",14),n.nrm(1,"system-label",15),n.k0s(),n.j41(2,"table",16)(3,"thead")(4,"tr",17),n.nrm(5,"th",18),n.j41(6,"th",19)(7,"div",20),n.nrm(8,"system-label",21),n.k0s()(),n.j41(9,"th",22)(10,"div",20),n.nrm(11,"system-label",23),n.k0s()(),n.j41(12,"th",22)(13,"div",20),n.nrm(14,"system-label",24),n.k0s()(),n.nrm(15,"th",25),n.k0s()(),n.j41(16,"tbody"),n.Z7z(17,G,17,13,"tr",38,n.Vm6),n.k0s()()),2&e){const e=n.XpG();n.R7$(17),n.Dyx(e.mismatch[e.dictionaryName].requiredColumnsWithNullRows)}}function w(e,t){if(1&e&&n.nrm(0,"system-utility-icon",35),2&e){const e=n.XpG().$implicit;n.Y8G("icon",e.status?"executed"==e.status?"success":"error":"funding_requirement")("colorclass",e.status?"executed"==e.status?"slds-icon-text-success":"slds-icon-text-error":"slds-icon-text-default")}}function S(e,t){1&e&&n.nrm(0,"system-spinner",36)}function E(e,t){if(1&e){const e=n.RV6();n.j41(0,"div",31)(1,"button",33),n.bIt("click",(function(){n.eBV(e);const t=n.XpG().$implicit,s=n.XpG(2);return n.Njj(s.execute(t,"length"))})),n.nrm(2,"system-button-icon",37),n.k0s()()}if(2&e){const e=n.XpG().$implicit;n.R7$(),n.Y8G("disabled","processing"==e.status)}}function L(e,t){if(1&e&&(n.j41(0,"tr",26)(1,"td"),n.DNE(2,w,1,2,"system-utility-icon",27)(3,S,1,0,"system-spinner",28),n.k0s(),n.j41(4,"td")(5,"div",29),n.EFF(6),n.k0s()(),n.j41(7,"td")(8,"div",29),n.EFF(9),n.k0s()(),n.j41(10,"td")(11,"div",29),n.EFF(12),n.k0s()(),n.j41(13,"td")(14,"div",29),n.EFF(15),n.k0s()(),n.j41(16,"td"),n.DNE(17,E,3,1,"div",42),n.k0s()()),2&e){const e=t.$implicit;n.Y8G("ngClass",n.l_i(8,j,"processing"==e.status,"error"==e.status)),n.R7$(2),n.Y8G("ngIf","processing"!=e.status),n.R7$(),n.Y8G("ngIf","processing"==e.status),n.R7$(3),n.JRh(e.name),n.R7$(3),n.JRh(e.count),n.R7$(3),n.JRh(e.dbDefinition.len),n.R7$(3),n.JRh(e.length),n.R7$(2),n.Y8G("ngIf","executed"!=e.status)}}function D(e,t){if(1&e&&(n.j41(0,"div",14),n.nrm(1,"system-label",39),n.k0s(),n.j41(2,"table",16)(3,"thead")(4,"tr",17),n.nrm(5,"th",18),n.j41(6,"th",19)(7,"div",20),n.nrm(8,"system-label",21),n.k0s()(),n.j41(9,"th",22)(10,"div",20),n.nrm(11,"system-label",23),n.k0s()(),n.j41(12,"th",22)(13,"div",20),n.nrm(14,"system-label",40),n.k0s()(),n.j41(15,"th",22)(16,"div",20),n.nrm(17,"system-label",41),n.k0s()(),n.nrm(18,"th",25),n.k0s()(),n.j41(19,"tbody"),n.Z7z(20,L,18,11,"tr",38,n.Vm6),n.k0s()()),2&e){const e=n.XpG();n.AVh("slds-m-top--medium",e.mismatch[e.dictionaryName].requiredColumnsWithNullRows.length>0),n.R7$(20),n.Dyx(e.mismatch[e.dictionaryName].columnsWithTruncateRows)}}function F(e,t){1&e&&(n.j41(0,"div")(1,"system-illustration-no-data",43),n.nrm(2,"system-label",44),n.k0s()())}let M=(()=>{class DictionaryManagerFixDBFieldsMismatchModal{constructor(e,t,s){this.backend=e,this.modal=t,this.toast=s,this.dictionaries=[],this.response=new i.B,this.mismatch={},this.values={}}ngOnDestroy(){this.emitResponse()}close(){this.self.destroy()}emitResponse(){this.response.next(Object.keys(this.mismatch).some((e=>["columnsWithTruncateRows","requiredColumnsWithNullRows"].some((t=>this.mismatch[e][t].some((e=>"executed"==e.status))))))),this.response.complete()}execute(e,t){const s={column:e.name};"notnull"==t&&(s.value=this.values[e.name]),e.status="processing",this.backend.putRequest(`dictionary/dbcolumn/mismatch/${t}/${this.dictionaryName}`,null,s).subscribe({next:()=>{e.status="executed",this.toast.sendToast("success","success")},error:t=>{e.status="error",this.toast.sendToast("LBL_ERROR","error",t.error.error.message)}})}deleteNullRows(e){this.backend.deleteRequest(`dictionary/dbcolumn/${e.name}/mismatch/notnull/${this.dictionaryName}`).subscribe({next:()=>{e.status="executed",this.toast.sendToast("success","success")},error:t=>{e.status="error",this.toast.sendToast("LBL_ERROR","error",t.error.error.message)}})}setSelectedDictionary(e){this.dictionaryName=e}static#e=this.ɵfac=function(e){return new(e||DictionaryManagerFixDBFieldsMismatchModal)(n.rXU(l.H),n.rXU(o.y),n.rXU(a.o))};static#t=this.ɵcmp=n.VBU({type:DictionaryManagerFixDBFieldsMismatchModal,selectors:[["dictionary-manager-fix-db-fields-mismatch-modal"]],decls:13,vars:5,consts:[["size","medium"],[3,"close"],["label","LBL_FIX_DB_FIELDS_MISMATCH"],["margin","none",3,"grow"],[1,"slds-size--1-of-1","slds-grid",2,"height","80vh"],["class","slds-height_full slds-size--1-of-5 slds-border--right",4,"ngIf"],[1,"slds-scrollable--y","slds-height_full","slds-grow"],[1,"slds-button","slds-button--neutral",3,"click"],["label","LBL_CLOSE"],[1,"slds-height_full","slds-size--1-of-5","slds-border--right"],[1,"slds-p-around--medium","slds-text-heading--label","slds-border--bottom","slds-m-bottom--xx-small"],[1,"slds-p-horizontal--xx-small","slds-p-vertical--xxx-small"],[1,"slds-button","slds-size--1-of-1",3,"ngClass","click"],["class","slds-p-horizontal--xx-small slds-p-vertical--xxx-small"],[1,"slds-grid","slds-p-horizontal--x-small","slds-p-vertical--small","slds-section-title"],["label","LBL_REQUIRED_ROWS_WITH_NULL_VALUES"],[1,"slds-table","slds-table--header-fixed","slds-no-row-hover","slds-table--fixed-layout","slds-table_bordered"],[1,"slds-line-height_reset"],["scope","col",2,"width","2rem"],["scope","col",2,"width","15rem"],[1,"slds-truncate","slds-p-around--x-small"],["label","LBL_FIELD"],["scope","col",1,""],["label","LBL_ROWS"],["label","LBL_VALUE"],["scope","col",2,"width","4rem"],[1,"slds-hint-parent",3,"ngClass"],["size","xx-small",3,"icon","colorclass",4,"ngIf"],["size","14","inverse","true",4,"ngIf"],[1,"slds-truncate"],["type","text",1,"slds-input","slds-text-color--default",3,"ngModel","disabled","maxlength","ngModelChange"],[1,"slds-grid","slds-grid--vertical-align-center"],["class","slds-button slds-button--icon slds-m-left--xx-small",3,"disabled","click",4,"ngIf"],[1,"slds-button","slds-button--icon","slds-m-left--xx-small",3,"disabled","click"],["icon","delete"],["size","xx-small",3,"icon","colorclass"],["size","14","inverse","true"],["icon","play"],["class","slds-hint-parent",3,"ngClass"],["label","LBL_COLUMNS_WITH_TRUNCATE_ROWS"],["label","LBL_FROM"],["label","LBL_TO"],["class","slds-grid slds-grid--vertical-align-center",4,"ngIf"],[1,"slds-align--absolute-center","slds-height_full"],["label","LBL_NO_DATA"]],template:function(e,t){1&e&&(n.j41(0,"system-modal",0)(1,"system-modal-header",1),n.bIt("close",(function(){return t.close()})),n.nrm(2,"system-label",2),n.k0s(),n.j41(3,"system-modal-content",3)(4,"div",4),n.DNE(5,k,5,0,"div",5),n.j41(6,"div",6),n.DNE(7,C,19,0)(8,D,22,2)(9,F,3,0,"div"),n.k0s()()(),n.j41(10,"system-modal-footer")(11,"button",7),n.bIt("click",(function(){return t.close()})),n.nrm(12,"system-label",8),n.k0s()()()),2&e&&(n.R7$(3),n.Y8G("grow",!0),n.R7$(2),n.Y8G("ngIf",t.dictionaries.length>0),n.R7$(2),n.vxM(7,t.mismatch[t.dictionaryName].requiredColumnsWithNullRows.length>0?7:-1),n.R7$(),n.vxM(8,t.mismatch[t.dictionaryName].columnsWithTruncateRows.length>0?8:-1),n.R7$(),n.vxM(9,0==t.mismatch[t.dictionaryName].requiredColumnsWithNullRows.length&&0==t.mismatch[t.dictionaryName].columnsWithTruncateRows.length?9:-1))},dependencies:[r.YU,r.bT,d.me,d.BC,d.tU,d.vS,c.t,u.L,m.W,h.D,g.I,p.Q,f.C,b.P,y.B],encapsulation:2})}return DictionaryManagerFixDBFieldsMismatchModal})()},35358:(e,t,s)=>{var i={"./af":11544,"./af.js":11544,"./ar":33108,"./ar-dz":52155,"./ar-dz.js":52155,"./ar-kw":53583,"./ar-kw.js":53583,"./ar-ly":41638,"./ar-ly.js":41638,"./ar-ma":87823,"./ar-ma.js":87823,"./ar-sa":78261,"./ar-sa.js":78261,"./ar-tn":56703,"./ar-tn.js":56703,"./ar.js":33108,"./az":46508,"./az.js":46508,"./be":16766,"./be.js":16766,"./bg":28564,"./bg.js":28564,"./bm":97462,"./bm.js":97462,"./bn":17107,"./bn-bd":43438,"./bn-bd.js":43438,"./bn.js":17107,"./bo":9004,"./bo.js":9004,"./br":50927,"./br.js":50927,"./bs":87768,"./bs.js":87768,"./ca":56291,"./ca.js":56291,"./cs":85301,"./cs.js":85301,"./cv":66666,"./cv.js":66666,"./cy":55163,"./cy.js":55163,"./da":87360,"./da.js":87360,"./de":45932,"./de-at":43248,"./de-at.js":43248,"./de-ch":83222,"./de-ch.js":83222,"./de.js":45932,"./dv":6405,"./dv.js":6405,"./el":60718,"./el.js":60718,"./en-au":36319,"./en-au.js":36319,"./en-ca":80597,"./en-ca.js":80597,"./en-gb":51800,"./en-gb.js":51800,"./en-ie":807,"./en-ie.js":807,"./en-il":95960,"./en-il.js":95960,"./en-in":84418,"./en-in.js":84418,"./en-nz":46865,"./en-nz.js":46865,"./en-sg":32647,"./en-sg.js":32647,"./eo":61931,"./eo.js":61931,"./es":46679,"./es-do":41805,"./es-do.js":41805,"./es-mx":83445,"./es-mx.js":83445,"./es-us":81516,"./es-us.js":81516,"./es.js":46679,"./et":88150,"./et.js":88150,"./eu":80757,"./eu.js":80757,"./fa":65742,"./fa.js":65742,"./fi":33958,"./fi.js":33958,"./fil":46720,"./fil.js":46720,"./fo":98352,"./fo.js":98352,"./fr":4059,"./fr-ca":42096,"./fr-ca.js":42096,"./fr-ch":95759,"./fr-ch.js":95759,"./fr.js":4059,"./fy":15958,"./fy.js":15958,"./ga":94143,"./ga.js":94143,"./gd":67028,"./gd.js":67028,"./gl":80428,"./gl.js":80428,"./gom-deva":76861,"./gom-deva.js":76861,"./gom-latn":57718,"./gom-latn.js":57718,"./gu":26827,"./gu.js":26827,"./he":21936,"./he.js":21936,"./hi":31332,"./hi.js":31332,"./hr":91957,"./hr.js":91957,"./hu":48928,"./hu.js":48928,"./hy-am":56215,"./hy-am.js":56215,"./id":586,"./id.js":586,"./is":90211,"./is.js":90211,"./it":70170,"./it-ch":22340,"./it-ch.js":22340,"./it.js":70170,"./ja":39770,"./ja.js":39770,"./jv":73875,"./jv.js":73875,"./ka":79499,"./ka.js":79499,"./kk":93573,"./kk.js":93573,"./km":68807,"./km.js":68807,"./kn":65082,"./kn.js":65082,"./ko":20137,"./ko.js":20137,"./ku":70111,"./ku.js":70111,"./ky":99187,"./ky.js":99187,"./lb":35969,"./lb.js":35969,"./lo":33526,"./lo.js":33526,"./lt":90411,"./lt.js":90411,"./lv":32621,"./lv.js":32621,"./me":85869,"./me.js":85869,"./mi":35881,"./mi.js":35881,"./mk":92391,"./mk.js":92391,"./ml":21126,"./ml.js":21126,"./mn":44892,"./mn.js":44892,"./mr":59080,"./mr.js":59080,"./ms":70399,"./ms-my":25950,"./ms-my.js":25950,"./ms.js":70399,"./mt":79902,"./mt.js":79902,"./my":72985,"./my.js":72985,"./nb":67859,"./nb.js":67859,"./ne":13642,"./ne.js":13642,"./nl":65441,"./nl-be":99875,"./nl-be.js":99875,"./nl.js":65441,"./nn":81311,"./nn.js":81311,"./oc-lnc":72567,"./oc-lnc.js":72567,"./pa-in":56962,"./pa-in.js":56962,"./pl":61063,"./pl.js":61063,"./pt":78719,"./pt-br":97476,"./pt-br.js":97476,"./pt.js":78719,"./ro":51004,"./ro.js":51004,"./ru":51326,"./ru.js":51326,"./sd":72608,"./sd.js":72608,"./se":13911,"./se.js":13911,"./si":25147,"./si.js":25147,"./sk":23741,"./sk.js":23741,"./sl":93e3,"./sl.js":93e3,"./sq":60451,"./sq.js":60451,"./sr":55046,"./sr-cyrl":40905,"./sr-cyrl.js":40905,"./sr.js":55046,"./ss":85765,"./ss.js":85765,"./sv":99290,"./sv.js":99290,"./sw":53449,"./sw.js":53449,"./ta":72688,"./ta.js":72688,"./te":32060,"./te.js":32060,"./tet":93290,"./tet.js":93290,"./tg":8294,"./tg.js":8294,"./th":1231,"./th.js":1231,"./tk":3746,"./tk.js":3746,"./tl-ph":49040,"./tl-ph.js":49040,"./tlh":17187,"./tlh.js":17187,"./tr":60153,"./tr.js":60153,"./tzl":88521,"./tzl.js":88521,"./tzm":18010,"./tzm-latn":22234,"./tzm-latn.js":22234,"./tzm.js":18010,"./ug-cn":63349,"./ug-cn.js":63349,"./uk":68479,"./uk.js":68479,"./ur":43024,"./ur.js":43024,"./uz":19800,"./uz-latn":72376,"./uz-latn.js":72376,"./uz.js":19800,"./vi":89366,"./vi.js":89366,"./x-pseudo":69702,"./x-pseudo.js":69702,"./yo":72655,"./yo.js":72655,"./zh-cn":575,"./zh-cn.js":575,"./zh-hk":18351,"./zh-hk.js":18351,"./zh-mo":51626,"./zh-mo.js":51626,"./zh-tw":8887,"./zh-tw.js":8887};function n(e){var t=l(e);return s(t)}function l(e){if(!s.o(i,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return i[e]}n.keys=function(){return Object.keys(i)},n.resolve=l,e.exports=n,n.id=35358},48649:(e,t,s)=>{var i={"./admincomponents/admincomponents.module.ts":[176,"default-src_workbench_workbench_module_ts","src_admincomponents_admincomponents_module_ts"],"./globalcomponents/globalcomponents.ts":[12948],"./include/groupware/groupware.ts":[55714,"src_include_groupware_groupware_ts"],"./include/sendinblue/sendinbluemodule.ts":[20197,"src_include_sendinblue_sendinbluemodule_ts"],"./include/spiceattachments/spiceattachments.ts":[28618,"default-src_include_spiceattachments_spiceattachments_ts"],"./include/spicecharts/spicecharts.ts":[32475,"src_include_spicecharts_spicecharts_ts"],"./include/spicefavorites/spicefavorites.ts":[78265,"src_include_spicefavorites_spicefavorites_ts"],"./include/spiceimporter/spiceimporter.ts":[45038,"src_include_spiceimporter_spiceimporter_ts"],"./include/spiceinstaller/spiceinstallermodule.ts":[11812],"./include/spicemap/spicemap.ts":[583,"src_include_spicemap_spicemap_ts"],"./include/spicemath/spicemath.ts":[70338,"src_include_spicemath_spicemath_ts"],"./include/spicemerge/spicemerge.ts":[90950,"src_include_spicemerge_spicemerge_ts"],"./include/spicenotes/spicenotes.ts":[78585,"src_include_spicenotes_spicenotes_ts"],"./include/spicepagebuilder/modulespicepagebuilder.ts":[58683,"src_include_spicepagebuilder_modulespicepagebuilder_ts"],"./include/spicepath/spicepath.ts":[48970,"src_include_spicepath_spicepath_ts"],"./include/spicetexts/spicetexts.ts":[72334,"src_include_spicetexts_spicetexts_ts"],"./include/spicetimeline/spicetimeline.ts":[48146,"src_include_spicetimeline_spicetimeline_ts"],"./include/spicetimestream/spicetimestream.ts":[63591,"src_include_spicetimestream_spicetimestream_ts"],"./include/spiceurls/spiceurls.ts":[39300,"src_include_spiceurls_spiceurls_ts"],"./include/totpauthentication/moduletotpauthentication.ts":[23338],"./modules/accounts/moduleaccounts.ts":[42884,"default-node_modules_underscore_modules_index-all_js","src_modules_accounts_moduleaccounts_ts"],"./modules/acl/moduleacl.ts":[43841,"src_modules_acl_moduleacl_ts"],"./modules/activities/moduleactivities.ts":[78625,"default-src_modules_activities_moduleactivities_ts"],"./modules/agreements/moduleagreements.ts":[2108,"src_modules_agreements_moduleagreements_ts"],"./modules/calendar/modulecalendar.ts":[28060,"src_modules_calendar_modulecalendar_ts"],"./modules/contacts/modulecontacts.ts":[5373,"src_modules_contacts_modulecontacts_ts"],"./modules/currencies/modulecurrencies.ts":[17088,"src_modules_currencies_modulecurrencies_ts"],"./modules/dashboard/moduledashboard.ts":[76992,"src_modules_dashboard_moduledashboard_ts"],"./modules/documents/moduledocuments.ts":[49072,"default-src_modules_outputtemplates_components_objectactionoutputbeanmodal_ts","src_modules_documents_moduledocuments_ts"],"./modules/emails/moduleemails.ts":[95271,"default-src_include_spiceattachments_spiceattachments_ts","src_modules_emails_moduleemails_ts"],"./modules/folders/modulefolders.ts":[40208,"src_modules_folders_modulefolders_ts"],"./modules/googleapi/modulegoogleapi.ts":[72680,"src_modules_googleapi_modulegoogleapi_ts"],"./modules/holidaycalendars/moduleholidaycalendars.ts":[57502,"src_modules_holidaycalendars_moduleholidaycalendars_ts"],"./modules/home/modulehome.ts":[11656,"default-src_modules_activities_moduleactivities_ts","src_modules_home_modulehome_ts"],"./modules/leads/moduleleads.ts":[95917,"src_modules_leads_moduleleads_ts"],"./modules/mailboxes/modulemailboxes.ts":[70065,"src_modules_mailboxes_modulemailboxes_ts"],"./modules/mediafiles/modulemediafiles.ts":[49036,"src_modules_mediafiles_modulemediafiles_ts"],"./modules/opportunities/moduleopportunities.ts":[71647,"src_modules_opportunities_moduleopportunities_ts"],"./modules/orgunits/moduleorgunits.ts":[41815,"src_modules_orgunits_moduleorgunits_ts"],"./modules/outputtemplates/moduleoutputtemplates.ts":[85759,"default-src_modules_outputtemplates_components_objectactionoutputbeanmodal_ts","src_modules_outputtemplates_moduleoutputtemplates_ts"],"./modules/prospectlists/moduleprospectlists.ts":[71202,"default-node_modules_underscore_modules_index-all_js","src_modules_prospectlists_moduleprospectlists_ts"],"./modules/reports/modulereports.ts":[67975,"default-src_modules_reports_modulereports_ts"],"./modules/reportsdesigner/modulereportsdesigner.ts":[70131,"default-src_modules_reports_modulereports_ts","src_modules_reportsdesigner_modulereportsdesigner_ts"],"./modules/scrum/modulescrum.ts":[6516,"src_modules_scrum_modulescrum_ts"],"./modules/spiceimports/modulespiceimports.ts":[13758,"src_modules_spiceimports_modulespiceimports_ts"],"./modules/systemcalendars/modulesystemcalendars.ts":[15167,"src_modules_systemcalendars_modulesystemcalendars_ts"],"./modules/users/moduleusers.ts":[98398,"src_modules_users_moduleusers_ts"],"./objectcomponents/objectcomponents.ts":[37328],"./objectfields/objectfields.ts":[7745],"./portalcomponents/portalcomponents.ts":[2053,"src_portalcomponents_portalcomponents_ts"],"./systemcomponents/systemcomponents.ts":[70569],"./workbench/workbench.module.ts":[85609,"default-src_workbench_workbench_module_ts"]};function n(e){if(!s.o(i,e))return Promise.resolve().then((()=>{var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=i[e],n=t[0];return Promise.all(t.slice(1).map(s.e)).then((()=>s(n)))}n.keys=()=>Object.keys(i),n.id=48649,e.exports=n}},e=>{e.O(0,["vendor"],(()=>{return t=3030,e(e.s=t);var t}));e.O()}]);