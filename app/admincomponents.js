/*!
 * 
 *                     SpiceCRM
 *
 *                     release: 2024.01.001
 *
 *                     date: 2024-06-07 18:47:00
 *
 *                     build: 2024.01.001.1717778820753
 *
 */
"use strict";(self.webpackChunkcore=self.webpackChunkcore||[]).push([["src_admincomponents_admincomponents_module_ts"],{176:(e,t,s)=>{s.r(t),s.d(t,{AdminComponentsModule:()=>Do});var i=s(60177),n=s(84341),l=s(18039),a=s(71341),o=s(70569),d=s(37328),r=s(7745),c=s(54438),m=s(84412),u=s(49722),g=s(40553),h=s(69904);let b=(()=>{class administration{constructor(e,t,s){this.backend=e,this.broadcast=t,this.language=s,this.loading=!1,this.adminNavigation=[],this.opened_itemid={},this.minimized=!1,this.admincomponent={component:"AdministrationHomeScreen",componentconfig:{}},this.itemfilter="",this.admincomponent$=new m.t(this.admincomponent),this.loaded$=new m.t(!1),this.loadNavigation(),this.broadcastsubscription=this.broadcast.message$.subscribe((e=>{this.handleMessage(e)}))}ngOnDestroy(){this.broadcastsubscription.unsubscribe()}handleMessage(e){if("loader.reloaded"===e.messagetype)this.loadNavigation()}loadNavigation(){this.loading=!0,this.backend.getRequest("system/spiceui/admin/navigation").subscribe((e=>{this.adminNavigation=e,this.loading=!1,this.loaded$.next(!0)}))}toggleMinimized(){this.minimized=!this.minimized}navigateHome(){this.opened_itemid=null,this.admincomponent={component:"AdministrationHomeScreen",componentconfig:{}},this.admincomponent$.next(this.admincomponent)}getItemLabel(e){let t;return this.opened_block=void 0,this.adminNavigation.some((s=>{if(t=s.groupcomponents.find((t=>t.id==e)),t)return this.opened_block=s,!0})),t.admin_label}navigateto(e){let t;this.adminNavigation.some((s=>{if(t=s.groupcomponents.find((t=>t.id==e)),t)return!0})),t.component&&(this.admincomponent=t,this.admincomponent.componentconfig.label||(this.admincomponent.componentconfig.label=this.admincomponent.admin_label),this.admincomponent$.next(this.admincomponent),this.opened_itemid=e)}get navigationGroups(){if(""==this.itemfilter||this.minimized)return this.adminNavigation;let e=[];for(let t of this.adminNavigation)if(t.label&&this.language.getLabel(t.label).toLowerCase().indexOf(this.itemfilter.toLowerCase())>=0||t.label&&this.language.getLabel(t.label,"","long").toLowerCase().indexOf(this.itemfilter.toLowerCase())>=0)e.push(t);else{let s=[];for(let e of t.groupcomponents)(e.adminaction.toLowerCase().indexOf(this.itemfilter.toLowerCase())>=0||e.admin_label&&this.language.getLabel(e.admin_label).toLowerCase().indexOf(this.itemfilter.toLowerCase())>=0||e.admin_label&&this.language.getLabel(e.admin_label,"","long").toLowerCase().indexOf(this.itemfilter.toLowerCase())>=0)&&s.push(e);s.length>0&&e.push({id:t.id,name:t.name,label:t.label,groupcomponents:s})}return e}static#e=this.ɵfac=function(e){return new(e||administration)(c.KVO(u.H),c.KVO(g.m),c.KVO(h.B))};static#t=this.ɵprov=c.jDH({token:administration,factory:administration.ɵfac})}return administration})();var p=s(83935),f=s(60968),y=s(66031),v=s(28933),k=s(69139),R=s(32130),L=s(25863),E=s(68823),j=s(32062),F=s(18521),M=s(22465);function x(e,t){1&e&&c.nrm(0,"system-utility-icon",15),2&e&&c.Y8G("icon","search")("addclasses","slds-input__icon slds-input__icon--left")}function I(e,t){if(1&e){const e=c.RV6();c.j41(0,"div",16)(1,"button",17),c.bIt("click",(function(){c.eBV(e);const t=c.XpG(2);return c.Njj(t.administration.itemfilter="")})),c.nrm(2,"system-button-icon",18),c.k0s()()}2&e&&(c.R7$(2),c.Y8G("icon","clear"))}const G=e=>({"slds-theme_inverse":e});function A(e,t){if(1&e){const e=c.RV6();c.j41(0,"li",22)(1,"a",23),c.bIt("click",(function(){const t=c.eBV(e).$implicit,s=c.XpG(3);return c.Njj(s.openContent(t.id))})),c.j41(2,"div",24),c.nrm(3,"system-icon",25)(4,"system-label",20),c.k0s()()()}if(2&e){const e=t.$implicit,s=c.XpG(3);c.Y8G("title",s.language.getLabel(e.admin_label,"","long")),c.R7$(),c.Y8G("ngClass",c.eq3(4,G,e.id==s.administration.opened_itemid)),c.R7$(2),c.Y8G("icon",e.icon?e.icon:"empty"),c.R7$(),c.Y8G("label",e.admin_label)}}function S(e,t){if(1&e&&(c.qex(0),c.j41(1,"h2",19),c.nrm(2,"system-label",20),c.k0s(),c.j41(3,"ul"),c.DNE(4,A,5,6,"li",21),c.k0s(),c.bVm()),2&e){const e=t.$implicit,s=c.XpG(2);c.R7$(2),c.Y8G("label",e.label),c.R7$(2),c.Y8G("ngForOf",e.groupcomponents)("ngForTrackBy",s.trackbyfn)}}function C(e,t){if(1&e){const e=c.RV6();c.qex(0),c.j41(1,"div",2)(2,"div",3)(3,"button",4),c.bIt("click",(function(){c.eBV(e);const t=c.XpG();return c.Njj(t.administration.navigateHome())})),c.nrm(4,"system-button-icon",5),c.k0s()(),c.j41(5,"div",6)(6,"input",7),c.mxI("ngModelChange",(function(t){c.eBV(e);const s=c.XpG();return c.DH7(s.administration.itemfilter,t)||(s.administration.itemfilter=t),c.Njj(t)})),c.k0s(),c.DNE(7,x,1,2,"system-utility-icon",8)(8,I,3,1,"div",9),c.k0s(),c.j41(9,"div",3)(10,"button",10),c.bIt("click",(function(){c.eBV(e);const t=c.XpG();return c.Njj(t.administration.toggleMinimized())})),c.nrm(11,"system-button-icon",11),c.k0s()()(),c.j41(12,"div",12)(13,"div",13),c.DNE(14,S,5,3,"ng-container",14),c.k0s()(),c.bVm()}if(2&e){const e=c.XpG();c.R7$(6),c.Y8G("placeholder",e.language.getLabel("LBL_SEARCH")),c.R50("ngModel",e.administration.itemfilter),c.R7$(),c.Y8G("ngIf",""==e.administration.itemfilter),c.R7$(),c.Y8G("ngIf",""!=e.administration.itemfilter),c.R7$(2),c.Y8G("disabled",!e.administration.opened_block),c.R7$(4),c.Y8G("ngForOf",e.administration.navigationGroups)("ngForTrackBy",e.trackbyfn)}}function D(e,t){if(1&e){const e=c.RV6();c.j41(0,"div",30),c.bIt("click",(function(){const t=c.eBV(e).$implicit,s=c.XpG(4);return c.Njj(s.openContent(t.id))})),c.nrm(1,"system-icon",25),c.k0s()}if(2&e){const e=t.$implicit;c.Y8G("system-title",e.admin_label),c.R7$(),c.Y8G("icon",e.icon?e.icon:"empty")}}function B(e,t){if(1&e&&(c.qex(0),c.DNE(1,D,2,2,"div",29),c.bVm()),2&e){const e=c.XpG().$implicit,t=c.XpG(2);c.R7$(),c.Y8G("ngForOf",e.groupcomponents)("ngForTrackBy",t.trackbyfn)}}function $(e,t){if(1&e&&(c.qex(0),c.DNE(1,B,2,2,"ng-container",1),c.bVm()),2&e){const e=t.$implicit,s=c.XpG(2);c.R7$(),c.Y8G("ngIf",e.id==s.administration.opened_block.id)}}function N(e,t){if(1&e){const e=c.RV6();c.qex(0),c.j41(1,"div",26)(2,"button",4),c.bIt("click",(function(){c.eBV(e);const t=c.XpG();return c.Njj(t.administration.toggleMinimized())})),c.nrm(3,"system-button-icon",27),c.k0s()(),c.j41(4,"div",12)(5,"div",28),c.DNE(6,$,2,1,"ng-container",14),c.k0s()(),c.bVm()}if(2&e){const e=c.XpG();c.R7$(6),c.Y8G("ngForOf",e.administration.navigationGroups)("ngForTrackBy",e.trackbyfn)}}let T=(()=>{class AdministrationMenu{constructor(e,t,s){this.language=e,this.navigationtab=t,this.administration=s}ngAfterViewInit(){this.navigationtab.tabdata&&this.navigationtab.tabdata.itemid&&this.administration.loaded$.subscribe({next:e=>{e&&this.openContent(this.navigationtab.tabdata.itemid,!1)}})}trackbyfn(e,t){return t.id}openContent(e,t=!0){if(this.administration.opened_itemid==e)return!0;let s=this.administration.getItemLabel(e);this.navigationtab.setTabInfo({displayname:this.language.getLabel(s||"LBL_ADMINISTRATION"),displayicon:"settings"}),this.administration.navigateto(e),t&&(this.navigationtab.tabdata={itemid:e})}static#e=this.ɵfac=function(e){return new(e||AdministrationMenu)(c.rXU(h.B),c.rXU(y._),c.rXU(b))};static#t=this.ɵcmp=c.VBU({type:AdministrationMenu,selectors:[["administration-menu"]],decls:3,vars:2,consts:[[1,"slds-grid","slds-grid--vertical","slds-navigation-list--vertical","slds-navigation-list--vertical-inverse","slds-border--right"],[4,"ngIf"],[1,"slds-p-horizontal--xx-small","slds-p-vertical--small","slds-border--bottom","slds-grid","slds-grid--vertical-align-center"],[1,"slds-p-horizontal--xx-small"],["tabindex","-1",1,"slds-button","slds-button_icon",3,"click"],["icon","home"],[1,"slds-grow","slds-form-element__control","slds-input-has-icon","slds-input-has-icon_right","slds-input-has-icon_group-right","slds-m-vertical--xx-small"],["type","text",1,"slds-input",3,"placeholder","ngModel","ngModelChange"],[3,"icon","addclasses",4,"ngIf"],["class","slds-input__icon-group slds-input__icon-group_right","style","margin-top: initial;",4,"ngIf"],["tabindex","-1",1,"slds-button","slds-button_icon",3,"disabled","click"],["icon","left"],["system-to-bottom",""],[1,"slds-p-bottom--medium"],[4,"ngFor","ngForOf","ngForTrackBy"],[3,"icon","addclasses"],[1,"slds-input__icon-group","slds-input__icon-group_right",2,"margin-top","initial"],["tabindex","-1",1,"slds-input__icon","slds-input__icon_right","slds-button","slds-button_icon",3,"click"],[3,"icon"],[1,"slds-text-title--caps","slds-p-around--medium"],[3,"label"],[3,"title",4,"ngFor","ngForOf","ngForTrackBy"],[3,"title"],["href","javascript:void(0);",1,"slds-navigation-list--vertical__action","slds-p-vertical--xxx-small","slds-text-link--reset",3,"ngClass","click"],[1,"slds-grid","slds-grid--vertical-align-center","slds-truncate"],["size","x-small",3,"icon"],[1,"slds-p-horizontal--xx-small","slds-p-vertical--xx-small","slds-border--bottom","slds-grid","slds-grid--vertical"],["icon","right"],[1,"slds-p-bottom--medium","slds-grid","slds-grid--vertical"],["class","slds-align-bottom slds-p-vertical--xx-small",3,"system-title","click",4,"ngFor","ngForOf","ngForTrackBy"],[1,"slds-align-bottom","slds-p-vertical--xx-small",3,"system-title","click"]],template:function(e,t){1&e&&(c.j41(0,"div",0),c.DNE(1,C,15,7,"ng-container",1)(2,N,7,2,"ng-container",1),c.k0s()),2&e&&(c.R7$(),c.Y8G("ngIf",!t.administration.minimized),c.R7$(),c.Y8G("ngIf",t.administration.minimized))},dependencies:[i.YU,i.Sq,i.bT,n.me,n.BC,n.vS,L.t,E.J,j.W,F.B,v.b,M.L],encapsulation:2})}return AdministrationMenu})();const X=["admincontentcontainer"];let Y=(()=>{class AdministrationMain{constructor(e,t,s,i,n){this.administration=e,this.metadata=t,this.language=s,this.navigation=i,this.navigationtab=n,this.admincontentObject=null,this.navigationtab.setTabInfo({displayname:this.language.getLabel("LBL_ADMINISTRATION"),displayicon:"settings"})}ngAfterViewInit(){this.administration.admincomponent$.subscribe((e=>{this.openContent(e)}))}get menuWidth(){return{width:this.administration.minimized?"40px":"220px","min-width":this.administration.minimized?"40px":"220px"}}openContent(e){this.admincontentObject&&this.admincontentObject.destroy(),this.metadata.addComponent(e.component,this.admincontentcontainer).subscribe((t=>{t.instance.componentconfig=e.componentconfig,this.admincontentObject=t}))}static#e=this.ɵfac=function(e){return new(e||AdministrationMain)(c.rXU(b),c.rXU(p.yu),c.rXU(h.B),c.rXU(f.L),c.rXU(y._))};static#t=this.ɵcmp=c.VBU({type:AdministrationMain,selectors:[["ng-component"]],viewQuery:function(e,t){if(1&e&&c.GBs(X,7,c.c1b),2&e){let e;c.mGM(e=c.lsd())&&(t.admincontentcontainer=e.first)}},features:[c.Jv_([b])],decls:6,vars:2,consts:[["system-to-bottom-noscroll","",1,"slds-grid",3,"system-overlay-loading-spinner"],[3,"ngStyle"],["system-to-bottom","",1,"slds-grow"],["admincontentcontainer",""]],template:function(e,t){1&e&&(c.j41(0,"div",0)(1,"div",1),c.nrm(2,"administration-menu"),c.k0s(),c.j41(3,"div",2),c.nrm(4,"div",null,3),c.k0s()()),2&e&&(c.Y8G("system-overlay-loading-spinner",t.administration.loading),c.R7$(),c.Y8G("ngStyle",t.menuWidth))},dependencies:[i.B3,v.b,k.p,R.M,T],encapsulation:2})}return AdministrationMain})();var w=s(57363);let O=(()=>{class AdministrationMenuRouteItem{constructor(e){this.router=e,this.componentconfig={},this.self={}}ngOnInit(){this.componentconfig.route&&this.router.navigate([this.componentconfig.route])}static#e=this.ɵfac=function(e){return new(e||AdministrationMenuRouteItem)(c.rXU(w.Ix))};static#t=this.ɵcmp=c.VBU({type:AdministrationMenuRouteItem,selectors:[["ng-component"]],decls:0,vars:0,template:function(e,t){},encapsulation:2})}return AdministrationMenuRouteItem})();var U=s(21413),V=s(92462),H=s(53584),z=s(41081),P=s(50531);let J=(()=>{class administrationconfigurator{constructor(e,t,s,i,n,l){this.backend=e,this.modelutilities=t,this.configurationService=s,this.toast=i,this.modal=n,this.administration=l,this.loading=!1,this.dictionary="",this.entries=[],this.sorting={field:"",direction:""},this.fielddefobj={},this.reloadTaskItems=[],this.foreignkeys={}}loadEntries(e=[]){this.loading=!0,this.backend.getRequest("configuration/configurator/byid/"+this.administration.opened_itemid).subscribe({next:t=>{this.foreignkeys=t.foreignkeys,this.fielddefobj={};for(let t of e)this.fielddefobj[t.name]=t.type?t.type:"";this.entries=t.entries.map((e=>({id:e.id,mode:"",data:this.mapData(e)}))),this.loading=!1},error:()=>{this.loading=!1}})}mapData(e){for(let t in this.fielddefobj)switch(this.fielddefobj[t]){case"bool":case"boolean":e[t]="1"==e[t]}return e}remapData(e){let t={};for(let s in this.fielddefobj)switch(this.fielddefobj[s]){case"bool":case"boolean":t[s]=1==e[s]?"1":"0";break;default:t[s]=e[s]}return t}addEntry(){let e=this.modelutilities.generateGuid();this.entries.unshift({id:e,mode:"new",data:{id:e}})}reloadCache(){this.reloadTaskItems.forEach((e=>{this.configurationService.reloadTaskData(e)}))}canSave(e){let t=this.entries.find((t=>t.id==e));return JSON.stringify(t.data)!=JSON.stringify(t.backup)}saveEntry(e){let t=new U.B,s=this.entries.find((t=>t.id==e)),i=this.modal.await("LBL_SAVING");return delete s.backup,this.backend.postRequest("configuration/configurator/"+this.dictionary+"/"+e,{},{config:this.remapData(s.data)}).subscribe({next:e=>{s.mode="",this.reloadCache(),i.emit(!0),t.next(!0)},error:e=>{this.toast.sendToast("MSG_ERROR_SAVING_RECORD","error"),i.emit(!0),t.error(e)}}),t.asObservable()}deleteEntry(e){this.entries.some(((t,s)=>{if(t.id===e)return delete t.backup,this.backend.deleteRequest("configuration/configurator/"+this.dictionary+"/"+e).subscribe((e=>{this.entries.splice(s,1),this.reloadCache()})),!0}))}setEditMode(e){this.entries.some((t=>{if(t.id===e)return t.mode="edit",t.backup=JSON.parse(JSON.stringify(t.data)),!0}))}cancelEditMode(e){this.entries.some(((t,s)=>{if(t.id===e)return"new"===t.mode?this.entries.splice(s,1):(t.data=JSON.parse(JSON.stringify(t.backup)),delete t.backup,t.mode=""),!0}))}isEditMode(e){let t=!1;return this.entries.some((s=>{if(s.id===e)return t="edit"===s.mode||"new"===s.mode,!0})),t}copy(e){this.entries.some((t=>{if(t.id===e){let e={};return e.data=JSON.parse(JSON.stringify(t.data)),e.mode="new",e.id=this.modelutilities.generateGuid(),e.data.id=e.id,this.entries.unshift(e),!0}}))}sort(e){this.sorting.field===e?this.sorting.direction="asc"==this.sorting.direction?"desc":"asc":(this.sorting.field=e,this.sorting.direction="asc"),this.entries.sort(((e,t)=>e.data[this.sorting.field]==t.data[this.sorting.field]?0:"asc"==this.sorting.direction?e.data[this.sorting.field]<t.data[this.sorting.field]?-1:1:e.data[this.sorting.field]<t.data[this.sorting.field]?1:-1))}static#e=this.ɵfac=function(e){return new(e||administrationconfigurator)(c.KVO(u.H),c.KVO(V.g),c.KVO(H.i),c.KVO(z.o),c.KVO(P.y),c.KVO(b))};static#t=this.ɵprov=c.jDH({token:administrationconfigurator,factory:administrationconfigurator.ɵfac})}return administrationconfigurator})();var q=s(13562),W=s(84359),K=s(16435),Q=s(30991),Z=s(70585),ee=s(26024),te=s(96700),se=s(6764),ie=s(60940),ne=s(40238),le=s(70639),ae=s(86262),oe=s(41587),de=s(39142),re=s(56980);function ce(e,t){if(1&e&&(c.j41(0,"div")(1,"div",2),c.EFF(2),c.k0s()()),2&e){const e=c.XpG();c.R7$(2),c.JRh(e.rolename)}}function me(e,t){if(1&e&&(c.j41(0,"option",9),c.EFF(1),c.k0s()),2&e){const e=t.$implicit;c.Y8G("value",e.id),c.R7$(),c.JRh(e.name)}}function ue(e,t){if(1&e){const e=c.RV6();c.j41(0,"div",3)(1,"div",4)(2,"div",5)(3,"select",6),c.mxI("ngModelChange",(function(t){c.eBV(e);const s=c.XpG();return c.DH7(s.roleValue,t)||(s.roleValue=t),c.Njj(t)})),c.j41(4,"option",7),c.EFF(5,"*"),c.k0s(),c.DNE(6,me,2,2,"option",8),c.k0s()()()()}if(2&e){const e=c.XpG();c.R7$(3),c.R50("ngModel",e.roleValue),c.R7$(3),c.Y8G("ngForOf",e.roles)}}let ge=(()=>{class AdministrationConfiguratorItemRole{constructor(e){this.metadata=e,this.editmode=!1,this.fieldvalue={},this.fieldvalueChange=new c.bkB,this.roles=[]}loadRoles(){let e=this.metadata.getRoles();e.sort(((e,t)=>e.name>t.name?1:-1));for(let t of e)this.roles.push(t)}ngOnInit(){(this.editmode||"*"!=this.fieldvalue)&&this.loadRoles()}get roleValue(){return this.fieldvalue}set roleValue(e){this.fieldvalue=e,this.fieldvalueChange.emit(e)}get rolename(){for(let e of this.roles)if(e.id==this.fieldvalue)return e.name;return this.fieldvalue}static#e=this.ɵfac=function(e){return new(e||AdministrationConfiguratorItemRole)(c.rXU(p.yu))};static#t=this.ɵcmp=c.VBU({type:AdministrationConfiguratorItemRole,selectors:[["administration-configurator-item-role"]],inputs:{editmode:"editmode",fieldvalue:"fieldvalue"},outputs:{fieldvalueChange:"fieldvalueChange"},decls:2,vars:2,consts:[[4,"ngIf"],["class","slds-form-element",4,"ngIf"],[1,"slds-truncate"],[1,"slds-form-element"],[1,"slds-form-element__control"],[1,"slds-select_container","slds-m-vertical--xx-small"],[1,"slds-select",3,"ngModel","ngModelChange"],["value","*"],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(e,t){1&e&&c.DNE(0,ce,3,1,"div",0)(1,ue,7,2,"div",1),2&e&&(c.Y8G("ngIf",!t.editmode),c.R7$(),c.Y8G("ngIf",t.editmode))},dependencies:[i.Sq,i.bT,n.xH,n.y7,n.wz,n.BC,n.vS],encapsulation:2})}return AdministrationConfiguratorItemRole})();const he=["administration-configurator-item",""];function be(e,t){if(1&e&&(c.j41(0,"span")(1,"pre",13),c.EFF(2),c.k0s()()),2&e){const e=c.XpG(2).$implicit,t=c.XpG();c.R7$(2),c.JRh(t.getJSON(t.entry.data[e.name]))}}function pe(e,t){if(1&e&&(c.j41(0,"span",14),c.EFF(1),c.k0s()),2&e){const e=c.XpG(2).$implicit,t=c.XpG();c.R7$(),c.JRh(t.entry.data[e.name])}}function fe(e,t){if(1&e&&c.nrm(0,"system-input-label",15),2&e){const e=c.XpG(2).$implicit,t=c.XpG();c.Y8G("ngModel",t.entry.data[e.name])}}function ye(e,t){if(1&e&&c.nrm(0,"system-display-datetime",16),2&e){const e=c.XpG(2).$implicit,t=c.XpG();c.Y8G("date",t.entry.data[e.name])("displayTime",!1)}}function _e(e,t){if(1&e&&c.nrm(0,"system-input-fieldset",15),2&e){const e=c.XpG(2).$implicit,t=c.XpG();c.Y8G("ngModel",t.entry.data[e.name])}}function ve(e,t){if(1&e&&c.nrm(0,"system-input-filter",15),2&e){const e=c.XpG(2).$implicit,t=c.XpG();c.Y8G("ngModel",t.entry.data[e.name])}}function ke(e,t){if(1&e&&c.nrm(0,"system-input-componentset",15),2&e){const e=c.XpG(2).$implicit,t=c.XpG();c.Y8G("ngModel",t.entry.data[e.name])}}function Re(e,t){if(1&e&&c.nrm(0,"system-input-companycodes",15),2&e){const e=c.XpG(2).$implicit,t=c.XpG();c.Y8G("ngModel",t.entry.data[e.name])}}function Le(e,t){if(1&e&&c.nrm(0,"system-checkbox",17),2&e){const e=c.XpG(2).$implicit,t=c.XpG();c.Y8G("disabled",!0)("ngModel",t.entry.data[e.name])}}function Ee(e,t){if(1&e&&c.nrm(0,"system-checkbox",17),2&e){const e=c.XpG(2).$implicit,t=c.XpG();c.Y8G("disabled",!0)("ngModel",t.entry.data[e.name])}}function je(e,t){if(1&e&&c.nrm(0,"system-input-text",15),2&e){const e=c.XpG(2).$implicit,t=c.XpG();c.Y8G("ngModel",t.getForeignName(e.name))}}function Fe(e,t){if(1&e&&c.nrm(0,"administration-configurator-item-role",18),2&e){const e=c.XpG(2).$implicit,t=c.XpG();c.Y8G("editmode",!1)("fieldvalue",t.entry.data[e.name])}}function Me(e,t){if(1&e&&c.nrm(0,"system-input-dictionary",17),2&e){const e=c.XpG(2).$implicit,t=c.XpG();c.Y8G("disabled",!0)("ngModel",t.entry.data[e.name])}}function xe(e,t){if(1&e&&c.nrm(0,"input",19),2&e){const e=c.XpG(2).$implicit,t=c.XpG();c.Y8G("ngModel",t.entry.data[e.name])}}function Ie(e,t){if(1&e&&(c.j41(0,"div",5),c.DNE(1,be,3,1,"span",6)(2,pe,2,1,"span",7)(3,fe,1,1,"system-input-label",8)(4,ye,1,2,"system-display-datetime",9)(5,_e,1,1,"system-input-fieldset",8)(6,ve,1,1,"system-input-filter",8)(7,ke,1,1,"system-input-componentset",8)(8,Re,1,1,"system-input-companycodes",8)(9,Le,1,2,"system-checkbox",10)(10,Ee,1,2,"system-checkbox",10)(11,je,1,1,"system-input-text",8)(12,Fe,1,2,"administration-configurator-item-role",11)(13,Me,1,2,"system-input-dictionary",10)(14,xe,1,1,"input",12),c.k0s()),2&e){const e=c.XpG().$implicit,t=c.XpG();c.Y8G("ngStyle",t.divStyle)("ngSwitch",e.type),c.R7$(),c.Y8G("ngSwitchCase","json"),c.R7$(),c.Y8G("ngSwitchCase","text"),c.R7$(),c.Y8G("ngSwitchCase","label"),c.R7$(),c.Y8G("ngSwitchCase","date"),c.R7$(),c.Y8G("ngSwitchCase","fieldset"),c.R7$(),c.Y8G("ngSwitchCase","filter"),c.R7$(),c.Y8G("ngSwitchCase","componentset"),c.R7$(),c.Y8G("ngSwitchCase","companycode"),c.R7$(),c.Y8G("ngSwitchCase","bool"),c.R7$(),c.Y8G("ngSwitchCase","boolean"),c.R7$(),c.Y8G("ngSwitchCase","foreign"),c.R7$(),c.Y8G("ngSwitchCase","role"),c.R7$(),c.Y8G("ngSwitchCase","dictionary")}}function Ge(e,t){if(1&e){const e=c.RV6();c.j41(0,"textarea",28),c.mxI("ngModelChange",(function(t){c.eBV(e);const s=c.XpG(2).$implicit,i=c.XpG();return c.DH7(i.entry.data[s.name],t)||(i.entry.data[s.name]=t),c.Njj(t)})),c.k0s()}if(2&e){const e=c.XpG(2).$implicit,t=c.XpG();c.R50("ngModel",t.entry.data[e.name])}}function Ae(e,t){if(1&e){const e=c.RV6();c.j41(0,"textarea",28),c.mxI("ngModelChange",(function(t){c.eBV(e);const s=c.XpG(2).$implicit,i=c.XpG();return c.DH7(i.entry.data[s.name],t)||(i.entry.data[s.name]=t),c.Njj(t)})),c.k0s()}if(2&e){const e=c.XpG(2).$implicit,t=c.XpG();c.R50("ngModel",t.entry.data[e.name])}}function Se(e,t){if(1&e){const e=c.RV6();c.j41(0,"system-input-label",29),c.mxI("ngModelChange",(function(t){c.eBV(e);const s=c.XpG(2).$implicit,i=c.XpG();return c.DH7(i.entry.data[s.name],t)||(i.entry.data[s.name]=t),c.Njj(t)})),c.k0s()}if(2&e){const e=c.XpG(2).$implicit,t=c.XpG();c.R50("ngModel",t.entry.data[e.name])}}function Ce(e,t){if(1&e){const e=c.RV6();c.j41(0,"system-input-date",30),c.bIt("ngModelChange",(function(t){c.eBV(e);const s=c.XpG(2).$implicit,i=c.XpG();return c.Njj(i.setFormattedDate(s.name,t))})),c.k0s()}if(2&e){const e=c.XpG(2).$implicit,t=c.XpG();c.Y8G("ngModel",t.entry.data[e.name])("showCalendarButton",!1)}}function De(e,t){if(1&e){const e=c.RV6();c.j41(0,"system-input-module",29),c.mxI("ngModelChange",(function(t){c.eBV(e);const s=c.XpG(2).$implicit,i=c.XpG();return c.DH7(i.entry.data[s.name],t)||(i.entry.data[s.name]=t),c.Njj(t)})),c.k0s()}if(2&e){const e=c.XpG(2).$implicit,t=c.XpG();c.R50("ngModel",t.entry.data[e.name])}}function Be(e,t){if(1&e){const e=c.RV6();c.j41(0,"system-input-module-field",31),c.mxI("ngModelChange",(function(t){c.eBV(e);const s=c.XpG(2).$implicit,i=c.XpG();return c.DH7(i.entry.data[s.name],t)||(i.entry.data[s.name]=t),c.Njj(t)})),c.k0s()}if(2&e){const e=c.XpG(2).$implicit,t=c.XpG();c.Y8G("module",t.entry.data[e.modulefield]),c.R50("ngModel",t.entry.data[e.name])}}function $e(e,t){if(1&e){const e=c.RV6();c.j41(0,"system-input-fieldset",29),c.mxI("ngModelChange",(function(t){c.eBV(e);const s=c.XpG(2).$implicit,i=c.XpG();return c.DH7(i.entry.data[s.name],t)||(i.entry.data[s.name]=t),c.Njj(t)})),c.k0s()}if(2&e){const e=c.XpG(2).$implicit,t=c.XpG();c.R50("ngModel",t.entry.data[e.name])}}function Ne(e,t){if(1&e){const e=c.RV6();c.j41(0,"system-input-filter",29),c.mxI("ngModelChange",(function(t){c.eBV(e);const s=c.XpG(2).$implicit,i=c.XpG();return c.DH7(i.entry.data[s.name],t)||(i.entry.data[s.name]=t),c.Njj(t)})),c.k0s()}if(2&e){const e=c.XpG(2).$implicit,t=c.XpG();c.R50("ngModel",t.entry.data[e.name])}}function Te(e,t){if(1&e){const e=c.RV6();c.j41(0,"system-input-componentset",29),c.mxI("ngModelChange",(function(t){c.eBV(e);const s=c.XpG(2).$implicit,i=c.XpG();return c.DH7(i.entry.data[s.name],t)||(i.entry.data[s.name]=t),c.Njj(t)})),c.k0s()}if(2&e){const e=c.XpG(2).$implicit,t=c.XpG();c.R50("ngModel",t.entry.data[e.name])}}function Xe(e,t){if(1&e){const e=c.RV6();c.j41(0,"system-input-companycodes",29),c.mxI("ngModelChange",(function(t){c.eBV(e);const s=c.XpG(2).$implicit,i=c.XpG();return c.DH7(i.entry.data[s.name],t)||(i.entry.data[s.name]=t),c.Njj(t)})),c.k0s()}if(2&e){const e=c.XpG(2).$implicit,t=c.XpG();c.R50("ngModel",t.entry.data[e.name])}}function Ye(e,t){if(1&e){const e=c.RV6();c.j41(0,"system-checkbox",29),c.mxI("ngModelChange",(function(t){c.eBV(e);const s=c.XpG(2).$implicit,i=c.XpG();return c.DH7(i.entry.data[s.name],t)||(i.entry.data[s.name]=t),c.Njj(t)})),c.k0s()}if(2&e){const e=c.XpG(2).$implicit,t=c.XpG();c.R50("ngModel",t.entry.data[e.name])}}function we(e,t){if(1&e){const e=c.RV6();c.j41(0,"system-checkbox",29),c.mxI("ngModelChange",(function(t){c.eBV(e);const s=c.XpG(2).$implicit,i=c.XpG();return c.DH7(i.entry.data[s.name],t)||(i.entry.data[s.name]=t),c.Njj(t)})),c.k0s()}if(2&e){const e=c.XpG(2).$implicit,t=c.XpG();c.R50("ngModel",t.entry.data[e.name])}}function Oe(e,t){if(1&e&&c.nrm(0,"system-select-option",33),2&e){const e=t.$implicit;c.Y8G("value",e.value)("display",e.display)}}const Ue=(e,t)=>({id:e,name:t});function Ve(e,t){if(1&e){const e=c.RV6();c.j41(0,"system-select",29),c.bIt("ngModelChange",(function(t){c.eBV(e);const s=c.XpG(2).$implicit,i=c.XpG();return c.Njj(i.entry.data[s.name]=t.id)})),c.DNE(1,Oe,1,2,"system-select-option",32),c.k0s()}if(2&e){const e=c.XpG(2).$implicit,t=c.XpG();c.Y8G("ngModel",c.l_i(2,Ue,t.entry.data[e.name],t.getForeignName(e.name))),c.R7$(),c.Y8G("ngForOf",t.getForeignKeys(e.name))}}function He(e,t){if(1&e){const e=c.RV6();c.j41(0,"administration-configurator-item-role",34),c.mxI("fieldvalueChange",(function(t){c.eBV(e);const s=c.XpG(2).$implicit,i=c.XpG();return c.DH7(i.entry.data[s.name],t)||(i.entry.data[s.name]=t),c.Njj(t)})),c.k0s()}if(2&e){const e=c.XpG(2).$implicit,t=c.XpG();c.Y8G("editmode",!0),c.R50("fieldvalue",t.entry.data[e.name])}}function ze(e,t){if(1&e){const e=c.RV6();c.j41(0,"system-input-dictionary",29),c.mxI("ngModelChange",(function(t){c.eBV(e);const s=c.XpG(2).$implicit,i=c.XpG();return c.DH7(i.entry.data[s.name],t)||(i.entry.data[s.name]=t),c.Njj(t)})),c.k0s()}if(2&e){const e=c.XpG(2).$implicit,t=c.XpG();c.R50("ngModel",t.entry.data[e.name])}}function Pe(e,t){if(1&e){const e=c.RV6();c.j41(0,"input",35),c.mxI("ngModelChange",(function(t){c.eBV(e);const s=c.XpG(2).$implicit,i=c.XpG();return c.DH7(i.entry.data[s.name],t)||(i.entry.data[s.name]=t),c.Njj(t)})),c.k0s()}if(2&e){const e=c.XpG(2).$implicit,t=c.XpG();c.R50("ngModel",t.entry.data[e.name])}}function Je(e,t){if(1&e&&(c.j41(0,"div",20)(1,"div",21),c.DNE(2,Ge,1,1,"textarea",22)(3,Ae,1,1,"textarea",22)(4,Se,1,1,"system-input-label",23)(5,Ce,1,2,"system-input-date",24)(6,De,1,1,"system-input-module",23)(7,Be,1,2,"system-input-module-field",25)(8,$e,1,1,"system-input-fieldset",23)(9,Ne,1,1,"system-input-filter",23)(10,Te,1,1,"system-input-componentset",23)(11,Xe,1,1,"system-input-companycodes",23)(12,Ye,1,1,"system-checkbox",23)(13,we,1,1,"system-checkbox",23)(14,Ve,2,5,"system-select",23)(15,He,1,2,"administration-configurator-item-role",26)(16,ze,1,1,"system-input-dictionary",23)(17,Pe,1,1,"input",27),c.k0s()()),2&e){const e=c.XpG().$implicit,t=c.XpG();c.R7$(),c.Y8G("ngSwitch",e.type)("ngStyle",t.divStyle),c.R7$(),c.Y8G("ngSwitchCase","json"),c.R7$(),c.Y8G("ngSwitchCase","text"),c.R7$(),c.Y8G("ngSwitchCase","label"),c.R7$(),c.Y8G("ngSwitchCase","date"),c.R7$(),c.Y8G("ngSwitchCase","module"),c.R7$(),c.Y8G("ngSwitchCase","fieldname"),c.R7$(),c.Y8G("ngSwitchCase","fieldset"),c.R7$(),c.Y8G("ngSwitchCase","filter"),c.R7$(),c.Y8G("ngSwitchCase","componentset"),c.R7$(),c.Y8G("ngSwitchCase","companycode"),c.R7$(),c.Y8G("ngSwitchCase","bool"),c.R7$(),c.Y8G("ngSwitchCase","boolean"),c.R7$(),c.Y8G("ngSwitchCase","foreign"),c.R7$(),c.Y8G("ngSwitchCase","role"),c.R7$(),c.Y8G("ngSwitchCase","dictionary")}}function qe(e,t){if(1&e&&(c.j41(0,"td"),c.DNE(1,Ie,15,15,"div",3)(2,Je,18,17,"ng-template",null,4,c.C5r),c.k0s()),2&e){const e=t.$implicit,s=c.sdS(3),i=c.XpG();c.R7$(),c.Y8G("ngIf",!i.isEditMode(e))("ngIfElse",s)}}function We(e,t){if(1&e){const e=c.RV6();c.j41(0,"div",36)(1,"button",37),c.bIt("click",(function(){c.eBV(e);const t=c.XpG();return c.Njj(t.setEditMode())})),c.nrm(2,"system-button-icon",38),c.k0s(),c.j41(3,"button",37),c.bIt("click",(function(){c.eBV(e);const t=c.XpG();return c.Njj(t.copy(t.entry.id))})),c.nrm(4,"system-button-icon",38),c.k0s(),c.j41(5,"button",37),c.bIt("click",(function(){c.eBV(e);const t=c.XpG();return c.Njj(t.delete())})),c.nrm(6,"system-button-icon",38),c.k0s()()}2&e&&(c.R7$(2),c.Y8G("icon","edit")("size","small"),c.R7$(2),c.Y8G("icon","copy")("size","small"),c.R7$(2),c.Y8G("icon","delete")("size","small"))}function Ke(e,t){if(1&e){const e=c.RV6();c.j41(0,"div",36)(1,"button",37),c.bIt("click",(function(){c.eBV(e);const t=c.XpG();return c.Njj(t.goDetail())})),c.nrm(2,"system-button-icon",38),c.k0s(),c.j41(3,"button",37),c.bIt("click",(function(){c.eBV(e);const t=c.XpG();return c.Njj(t.setViewMode())})),c.nrm(4,"system-button-icon",38),c.k0s(),c.j41(5,"button",39),c.bIt("click",(function(){c.eBV(e);const t=c.XpG();return c.Njj(t.save())})),c.nrm(6,"system-button-icon",38),c.k0s()()}if(2&e){const e=c.XpG();c.R7$(2),c.Y8G("icon","expand")("size","small"),c.R7$(2),c.Y8G("icon","close")("size","small"),c.R7$(),c.Y8G("disabled",!e.canSave),c.R7$(),c.Y8G("icon","check")("size","small")}}let Qe=(()=>{class AdministrationConfiguratorItem{constructor(e,t,s,i,n){this.administrationconfigurator=e,this.language=t,this.helper=s,this.modal=i,this.injector=n,this.fields=[],this.entry={}}get divStyle(){let e=parseInt(this.parentWidth,10)/this.fields.length;return{"max-width":e<200?"200px":e+"px"}}get itemFields(){return this.fields.filter((e=>!0!==e.detailonly))}setEditMode(){this.administrationconfigurator.setEditMode(this.entry.id)}isEditMode(e=null){return e?!e.readonly&&this.administrationconfigurator.isEditMode(this.entry.id):this.administrationconfigurator.isEditMode(this.entry.id)}setViewMode(){this.administrationconfigurator.cancelEditMode(this.entry.id)}get canSave(){return this.administrationconfigurator.canSave(this.entry.id)}save(){this.administrationconfigurator.saveEntry(this.entry.id)}delete(){this.helper.confirm(this.language.getLabel("MSG_DELETE_RECORD"),this.language.getLabel("MSG_DELETE_RECORD","long")).subscribe((e=>{e&&this.administrationconfigurator.deleteEntry(this.entry.id)}))}copy(e){this.administrationconfigurator.copy(e)}getJSON(e){try{let t=JSON.parse(e);return JSON.stringify(t,null,2)}catch(t){return e}}setFormattedDate(e,t){(!t||t&&!t.isValid())&&(this.entry.data[e]=""),this.entry.data[e]=t.format("YYYY-MM-DD")}getForeignName(e){if(!this.entry.data[e])return this.entry.data[e];let t=this.getForeignKeys(e).find((t=>t.value==this.entry.data[e]));return t?t.display:this.entry.data[e]}getForeignKeys(e){return this.administrationconfigurator.foreignkeys[e].sort(((e,t)=>e.display.localeCompare(t.display)))}goDetail(){this.modal.openModal("AdministrationConfiguratorItemModal",!0,this.injector).subscribe({next:e=>{e.instance.fields=this.fields,e.instance.entry=this.entry}})}static#e=this.ɵfac=function(e){return new(e||AdministrationConfiguratorItem)(c.rXU(J),c.rXU(h.B),c.rXU(q.d),c.rXU(P.y),c.rXU(c.zZn))};static#t=this.ɵcmp=c.VBU({type:AdministrationConfiguratorItem,selectors:[["","administration-configurator-item",""]],inputs:{fields:"fields",entry:"entry",parentWidth:"parentWidth"},attrs:he,decls:4,vars:3,consts:[[4,"ngFor","ngForOf"],[1,"slds-theme--default",2,"position","sticky","right","0","z-index","10"],["class","slds-button-group slds-float--right","role","group",4,"ngIf"],["class","slds-truncate",3,"ngStyle","ngSwitch",4,"ngIf","ngIfElse"],["editfield",""],[1,"slds-truncate",3,"ngStyle","ngSwitch"],[4,"ngSwitchCase"],["class","slds-truncate_container_25","style","max-width: 200px;",4,"ngSwitchCase"],["disabled","",3,"ngModel",4,"ngSwitchCase"],[3,"date","displayTime",4,"ngSwitchCase"],[3,"disabled","ngModel",4,"ngSwitchCase"],[3,"editmode","fieldvalue",4,"ngSwitchCase"],["type","text","class","slds-input","disabled","",3,"ngModel",4,"ngSwitchDefault"],[1,"slds-m-vertical--none"],[1,"slds-truncate_container_25",2,"max-width","200px"],["disabled","",3,"ngModel"],[3,"date","displayTime"],[3,"disabled","ngModel"],[3,"editmode","fieldvalue"],["type","text","disabled","",1,"slds-input",3,"ngModel"],[1,"slds-form-element"],[1,"slds-form-element__control",3,"ngSwitch","ngStyle"],["class","slds-textarea slds-scrollable--y slds-m-vertical--xx-small",3,"ngModel","ngModelChange",4,"ngSwitchCase"],[3,"ngModel","ngModelChange",4,"ngSwitchCase"],["system-input-date-formatted","",3,"ngModel","showCalendarButton","ngModelChange",4,"ngSwitchCase"],[3,"module","ngModel","ngModelChange",4,"ngSwitchCase"],[3,"editmode","fieldvalue","fieldvalueChange",4,"ngSwitchCase"],["type","text","class","slds-input",3,"ngModel","ngModelChange",4,"ngSwitchDefault"],[1,"slds-textarea","slds-scrollable--y","slds-m-vertical--xx-small",3,"ngModel","ngModelChange"],[3,"ngModel","ngModelChange"],["system-input-date-formatted","",3,"ngModel","showCalendarButton","ngModelChange"],[3,"module","ngModel","ngModelChange"],[3,"value","display",4,"ngFor","ngForOf"],[3,"value","display"],[3,"editmode","fieldvalue","fieldvalueChange"],["type","text",1,"slds-input",3,"ngModel","ngModelChange"],["role","group",1,"slds-button-group","slds-float--right"],[1,"slds-button","slds-button--icon-border",3,"click"],[3,"icon","size"],[1,"slds-button","slds-button--icon-border",3,"disabled","click"]],template:function(e,t){1&e&&(c.DNE(0,qe,4,2,"td",0),c.j41(1,"td",1),c.DNE(2,We,7,6,"div",2)(3,Ke,7,7,"div",2),c.k0s()),2&e&&(c.Y8G("ngForOf",t.itemFields),c.R7$(2),c.Y8G("ngIf",!t.isEditMode()),c.R7$(),c.Y8G("ngIf",t.isEditMode()))},dependencies:[i.Sq,i.bT,i.B3,i.ux,i.e1,i.fG,n.me,n.BC,n.vS,L.t,W.f,K.f,Q.H,Z.n,ee.M,te.W,se.w,ie.u,ne.e,le.T,ae.i,oe.t,de.d,re.u,ge],encapsulation:2})}return AdministrationConfiguratorItem})();function Ze(e,t){1&e&&c.nrm(0,"system-utility-icon",15),2&e&&c.Y8G("icon","arrowup")("size","x-small")}function et(e,t){1&e&&c.nrm(0,"system-utility-icon",15),2&e&&c.Y8G("icon","arrowdown")("size","x-small")}function tt(e,t){if(1&e&&(c.qex(0),c.DNE(1,Ze,1,2,"system-utility-icon",21)(2,et,1,2,"system-utility-icon",21),c.bVm()),2&e){const e=c.XpG(2);c.R7$(),c.Y8G("ngIf","asc"==e.administrationconfigurator.sorting.direction),c.R7$(),c.Y8G("ngIf","dsc"==e.administrationconfigurator.sorting.direction)}}function st(e,t){if(1&e){const e=c.RV6();c.j41(0,"th",18),c.bIt("click",(function(){const t=c.eBV(e).$implicit,s=c.XpG();return c.Njj(s.sort(t.name))})),c.j41(1,"div",19),c.EFF(2),c.DNE(3,tt,3,2,"ng-container",20),c.k0s()()}if(2&e){const e=t.$implicit,s=c.XpG();c.R7$(2),c.SpI(" ",e.name," "),c.R7$(),c.Y8G("ngIf",s.administrationconfigurator.sorting.field==e.name)}}function it(e,t){if(1&e){const e=c.RV6();c.j41(0,"td")(1,"div",25)(2,"div",26)(3,"input",27),c.mxI("ngModelChange",(function(t){const s=c.eBV(e).$implicit,i=c.XpG(2);return c.DH7(i.filters[s.name],t)||(i.filters[s.name]=t),c.Njj(t)})),c.k0s()()()()}if(2&e){const e=t.$implicit,s=c.XpG(2);c.R7$(3),c.R50("ngModel",s.filters[e.name])}}function nt(e,t){if(1&e){const e=c.RV6();c.j41(0,"tr",22),c.DNE(1,it,4,1,"td",23),c.j41(2,"td",24)(3,"div",13)(4,"button",14),c.bIt("click",(function(){c.eBV(e);const t=c.XpG();return c.Njj(t.clearFilter())})),c.nrm(5,"system-button-icon",15),c.k0s(),c.j41(6,"button",14),c.bIt("click",(function(){c.eBV(e);const t=c.XpG();return c.Njj(t.toggleFilter())})),c.nrm(7,"system-button-icon",15),c.k0s()()()()}if(2&e){const e=c.XpG();c.R7$(),c.Y8G("ngForOf",e.getFields(!0)),c.R7$(4),c.Y8G("icon","clear")("size","small"),c.R7$(2),c.Y8G("icon","chevronup")("size","small")}}function lt(e,t){if(1&e&&c.nrm(0,"tr",28),2&e){const e=t.$implicit,s=c.XpG();c.Y8G("parentWidth",s.width)("entry",e)("fields",s.getFields())}}let at=(()=>{class AdministrationConfigurator{constructor(e,t,s,i){this.metadata=e,this.administrationconfigurator=t,this.language=s,this.elementRef=i,this.componentconfig={},this.displayFilters=!1,this.filters={}}ngOnInit(){this.administrationconfigurator.dictionary=this.componentconfig.dictionary,this.administrationconfigurator.loadEntries(this.componentconfig.fields),Array.isArray(this.componentconfig.reloadTaskItems)&&(this.administrationconfigurator.reloadTaskItems=this.componentconfig.reloadTaskItems)}get itemFields(){return this.getFields().filter((e=>!0!==e.detailonly))}get count(){return this.administrationconfigurator.entries.length}get width(){return this.elementRef.nativeElement.width}trackByFn(e,t){return t.id}getEntries(){let e=[];for(let t of this.administrationconfigurator.entries){let s=!1;if(this.displayFilters)for(let e in this.filters)!this.administrationconfigurator.isEditMode(t.id)&&this.filters[e]&&t.data[e]&&-1==t.data[e].toUpperCase().indexOf(this.filters[e].toUpperCase())&&(s=!0);s||e.push(t)}return e}getFields(e=!1){let t=[];for(let e of this.componentconfig.fields)!0!==e.hidden&&t.push(e);return e?t.filter((e=>!0!==e.detailonly)):t}addEntry(){this.administrationconfigurator.addEntry()}sort(e){this.administrationconfigurator.sort(e)}toggleFilter(){this.displayFilters=!this.displayFilters}clearFilter(){this.filters={}}static#e=this.ɵfac=function(e){return new(e||AdministrationConfigurator)(c.rXU(p.yu),c.rXU(J),c.rXU(h.B),c.rXU(c.aKT))};static#t=this.ɵcmp=c.VBU({type:AdministrationConfigurator,selectors:[["administration-configurator"]],features:[c.Jv_([J])],decls:21,vars:9,consts:[[1,"slds-grid","slds-grid--vertical","slds-height_full"],[1,"slds-grid","slds-grid--align-spread","slds-p-around--medium"],[1,"slds-text-heading--medium"],["label","LBL_DICTIONARY_ITEM"],["label","LBL_RECORDS"],[1,"slds-button","slds-button--neutral",3,"click"],["label","LBL_ADD"],[1,"slds-scrollable","slds-grow",2,"min-height","0",3,"system-overlay-loading-spinner"],[1,"slds-table","slds-table--bordered"],[1,"slds-theme--shade",2,"position","sticky","top","0","z-index","20"],[1,"slds-text-title--caps"],["scope","col",3,"click",4,"ngFor","ngForOf"],["scope","col",2,"width","2rem","position","sticky","right","0"],["role","group",1,"slds-button-group","slds-float--right"],[1,"slds-button","slds-button--icon-border",3,"click"],[3,"icon","size"],["class","slds-theme--shade",4,"ngIf"],["class","slds-align-top slds-theme--default","administration-configurator-item","",3,"parentWidth","entry","fields",4,"ngFor","ngForOf","ngForTrackBy"],["scope","col",3,"click"],[1,"slds-truncate","slds-p-horizontal--small"],[4,"ngIf"],[3,"icon","size",4,"ngIf"],[1,"slds-theme--shade"],[4,"ngFor","ngForOf"],[1,"slds-theme--shade",2,"position","sticky","right","0"],[1,"slds-form-element"],[1,"slds-form-element__control"],["type","text",1,"slds-input",3,"ngModel","ngModelChange"],["administration-configurator-item","",1,"slds-align-top","slds-theme--default",3,"parentWidth","entry","fields"]],template:function(e,t){1&e&&(c.j41(0,"div",0)(1,"div",1)(2,"h2",2),c.nrm(3,"system-label",3),c.EFF(4),c.nrm(5,"system-label",4),c.EFF(6,")"),c.k0s(),c.j41(7,"button",5),c.bIt("click",(function(){return t.addEntry()})),c.nrm(8,"system-label",6),c.k0s()(),c.j41(9,"div",7)(10,"table",8)(11,"thead",9)(12,"tr",10),c.DNE(13,st,4,2,"th",11),c.j41(14,"th",12)(15,"div",13)(16,"button",14),c.bIt("click",(function(){return t.toggleFilter()})),c.nrm(17,"system-button-icon",15),c.k0s()()()(),c.DNE(18,nt,8,5,"tr",16),c.k0s(),c.j41(19,"tbody"),c.DNE(20,lt,1,3,"tr",17),c.k0s()()()()),2&e&&(c.R7$(4),c.Lme(": ",t.componentconfig.dictionary," (",t.count," "),c.R7$(5),c.Y8G("system-overlay-loading-spinner",t.administrationconfigurator.loading),c.R7$(4),c.Y8G("ngForOf",t.itemFields),c.R7$(4),c.Y8G("icon","filterList")("size","small"),c.R7$(),c.Y8G("ngIf",t.displayFilters),c.R7$(2),c.Y8G("ngForOf",t.getEntries())("ngForTrackBy",t.trackByFn))},dependencies:[i.Sq,i.bT,n.me,n.BC,n.vS,L.t,j.W,F.B,R.M,Qe],encapsulation:2})}return AdministrationConfigurator})();var ot=s(40713),dt=s(25028),rt=s(88418),ct=s(10063);function mt(e,t){if(1&e){const e=c.RV6();c.j41(0,"textarea",17),c.mxI("ngModelChange",(function(t){c.eBV(e);const s=c.XpG().$implicit,i=c.XpG();return c.DH7(i.entry.data[s.name],t)||(i.entry.data[s.name]=t),c.Njj(t)})),c.k0s()}if(2&e){const e=c.XpG().$implicit,t=c.XpG();c.R50("ngModel",t.entry.data[e.name])}}function ut(e,t){if(1&e){const e=c.RV6();c.j41(0,"textarea",17),c.mxI("ngModelChange",(function(t){c.eBV(e);const s=c.XpG().$implicit,i=c.XpG();return c.DH7(i.entry.data[s.name],t)||(i.entry.data[s.name]=t),c.Njj(t)})),c.k0s()}if(2&e){const e=c.XpG().$implicit,t=c.XpG();c.R50("ngModel",t.entry.data[e.name])}}function gt(e,t){if(1&e){const e=c.RV6();c.j41(0,"system-input-label",18),c.mxI("ngModelChange",(function(t){c.eBV(e);const s=c.XpG().$implicit,i=c.XpG();return c.DH7(i.entry.data[s.name],t)||(i.entry.data[s.name]=t),c.Njj(t)})),c.k0s()}if(2&e){const e=c.XpG().$implicit,t=c.XpG();c.R50("ngModel",t.entry.data[e.name])}}function ht(e,t){if(1&e){const e=c.RV6();c.j41(0,"system-input-date",19),c.bIt("ngModelChange",(function(t){c.eBV(e);const s=c.XpG().$implicit,i=c.XpG();return c.Njj(i.setFormattedDate(s.name,t))})),c.k0s()}if(2&e){const e=c.XpG().$implicit,t=c.XpG();c.Y8G("ngModel",t.entry.data[e.name])("showCalendarButton",!1)}}function bt(e,t){if(1&e){const e=c.RV6();c.j41(0,"system-input-module",18),c.mxI("ngModelChange",(function(t){c.eBV(e);const s=c.XpG().$implicit,i=c.XpG();return c.DH7(i.entry.data[s.name],t)||(i.entry.data[s.name]=t),c.Njj(t)})),c.k0s()}if(2&e){const e=c.XpG().$implicit,t=c.XpG();c.R50("ngModel",t.entry.data[e.name])}}function pt(e,t){if(1&e){const e=c.RV6();c.j41(0,"system-input-module-field",20),c.mxI("ngModelChange",(function(t){c.eBV(e);const s=c.XpG().$implicit,i=c.XpG();return c.DH7(i.entry.data[s.name],t)||(i.entry.data[s.name]=t),c.Njj(t)})),c.k0s()}if(2&e){const e=c.XpG().$implicit,t=c.XpG();c.Y8G("module",t.entry.data[e.modulefield]),c.R50("ngModel",t.entry.data[e.name])}}function ft(e,t){if(1&e){const e=c.RV6();c.j41(0,"system-input-fieldset",18),c.mxI("ngModelChange",(function(t){c.eBV(e);const s=c.XpG().$implicit,i=c.XpG();return c.DH7(i.entry.data[s.name],t)||(i.entry.data[s.name]=t),c.Njj(t)})),c.k0s()}if(2&e){const e=c.XpG().$implicit,t=c.XpG();c.R50("ngModel",t.entry.data[e.name])}}function yt(e,t){if(1&e){const e=c.RV6();c.j41(0,"system-input-filter",18),c.mxI("ngModelChange",(function(t){c.eBV(e);const s=c.XpG().$implicit,i=c.XpG();return c.DH7(i.entry.data[s.name],t)||(i.entry.data[s.name]=t),c.Njj(t)})),c.k0s()}if(2&e){const e=c.XpG().$implicit,t=c.XpG();c.R50("ngModel",t.entry.data[e.name])}}function _t(e,t){if(1&e){const e=c.RV6();c.j41(0,"system-input-componentset",18),c.mxI("ngModelChange",(function(t){c.eBV(e);const s=c.XpG().$implicit,i=c.XpG();return c.DH7(i.entry.data[s.name],t)||(i.entry.data[s.name]=t),c.Njj(t)})),c.k0s()}if(2&e){const e=c.XpG().$implicit,t=c.XpG();c.R50("ngModel",t.entry.data[e.name])}}function vt(e,t){if(1&e){const e=c.RV6();c.j41(0,"system-input-companycodes",18),c.mxI("ngModelChange",(function(t){c.eBV(e);const s=c.XpG().$implicit,i=c.XpG();return c.DH7(i.entry.data[s.name],t)||(i.entry.data[s.name]=t),c.Njj(t)})),c.k0s()}if(2&e){const e=c.XpG().$implicit,t=c.XpG();c.R50("ngModel",t.entry.data[e.name])}}function kt(e,t){if(1&e){const e=c.RV6();c.j41(0,"system-checkbox",18),c.mxI("ngModelChange",(function(t){c.eBV(e);const s=c.XpG().$implicit,i=c.XpG();return c.DH7(i.entry.data[s.name],t)||(i.entry.data[s.name]=t),c.Njj(t)})),c.k0s()}if(2&e){const e=c.XpG().$implicit,t=c.XpG();c.R50("ngModel",t.entry.data[e.name])}}function Rt(e,t){if(1&e){const e=c.RV6();c.j41(0,"system-checkbox",18),c.mxI("ngModelChange",(function(t){c.eBV(e);const s=c.XpG().$implicit,i=c.XpG();return c.DH7(i.entry.data[s.name],t)||(i.entry.data[s.name]=t),c.Njj(t)})),c.k0s()}if(2&e){const e=c.XpG().$implicit,t=c.XpG();c.R50("ngModel",t.entry.data[e.name])}}function Lt(e,t){if(1&e&&c.nrm(0,"system-select-option",22),2&e){const e=t.$implicit;c.Y8G("value",e.value)("display",e.display)}}const Et=(e,t)=>({id:e,name:t});function jt(e,t){if(1&e){const e=c.RV6();c.j41(0,"system-select",18),c.bIt("ngModelChange",(function(t){c.eBV(e);const s=c.XpG().$implicit,i=c.XpG();return c.Njj(i.entry.data[s.name]=t.id)})),c.DNE(1,Lt,1,2,"system-select-option",21),c.k0s()}if(2&e){const e=c.XpG().$implicit,t=c.XpG();c.Y8G("ngModel",c.l_i(2,Et,t.entry.data[e.name],t.getForeignName(e.name))),c.R7$(),c.Y8G("ngForOf",t.getForeignKeys(e.name))}}function Ft(e,t){if(1&e){const e=c.RV6();c.j41(0,"administration-configurator-item-role",23),c.mxI("fieldvalueChange",(function(t){c.eBV(e);const s=c.XpG().$implicit,i=c.XpG();return c.DH7(i.entry.data[s.name],t)||(i.entry.data[s.name]=t),c.Njj(t)})),c.k0s()}if(2&e){const e=c.XpG().$implicit,t=c.XpG();c.Y8G("editmode",!0),c.R50("fieldvalue",t.entry.data[e.name])}}function Mt(e,t){if(1&e){const e=c.RV6();c.j41(0,"system-input-dictionary",18),c.mxI("ngModelChange",(function(t){c.eBV(e);const s=c.XpG().$implicit,i=c.XpG();return c.DH7(i.entry.data[s.name],t)||(i.entry.data[s.name]=t),c.Njj(t)})),c.k0s()}if(2&e){const e=c.XpG().$implicit,t=c.XpG();c.R50("ngModel",t.entry.data[e.name])}}function xt(e,t){if(1&e){const e=c.RV6();c.j41(0,"input",24),c.mxI("ngModelChange",(function(t){c.eBV(e);const s=c.XpG().$implicit,i=c.XpG();return c.DH7(i.entry.data[s.name],t)||(i.entry.data[s.name]=t),c.Njj(t)})),c.k0s()}if(2&e){const e=c.XpG().$implicit,t=c.XpG();c.R50("ngModel",t.entry.data[e.name])}}function It(e,t){if(1&e&&(c.j41(0,"tr")(1,"td"),c.EFF(2),c.k0s(),c.j41(3,"td")(4,"div",9)(5,"div",10),c.DNE(6,mt,1,1,"textarea",11)(7,ut,1,1,"textarea",11)(8,gt,1,1,"system-input-label",12)(9,ht,1,2,"system-input-date",13)(10,bt,1,1,"system-input-module",12)(11,pt,1,2,"system-input-module-field",14)(12,ft,1,1,"system-input-fieldset",12)(13,yt,1,1,"system-input-filter",12)(14,_t,1,1,"system-input-componentset",12)(15,vt,1,1,"system-input-companycodes",12)(16,kt,1,1,"system-checkbox",12)(17,Rt,1,1,"system-checkbox",12)(18,jt,2,5,"system-select",12)(19,Ft,1,2,"administration-configurator-item-role",15)(20,Mt,1,1,"system-input-dictionary",12)(21,xt,1,1,"input",16),c.k0s()()()()),2&e){const e=t.$implicit;c.R7$(2),c.JRh(e.name),c.R7$(3),c.Y8G("ngSwitch",e.type),c.R7$(),c.Y8G("ngSwitchCase","json"),c.R7$(),c.Y8G("ngSwitchCase","text"),c.R7$(),c.Y8G("ngSwitchCase","label"),c.R7$(),c.Y8G("ngSwitchCase","date"),c.R7$(),c.Y8G("ngSwitchCase","module"),c.R7$(),c.Y8G("ngSwitchCase","fieldname"),c.R7$(),c.Y8G("ngSwitchCase","fieldset"),c.R7$(),c.Y8G("ngSwitchCase","filter"),c.R7$(),c.Y8G("ngSwitchCase","componentset"),c.R7$(),c.Y8G("ngSwitchCase","companycode"),c.R7$(),c.Y8G("ngSwitchCase","bool"),c.R7$(),c.Y8G("ngSwitchCase","boolean"),c.R7$(),c.Y8G("ngSwitchCase","foreign"),c.R7$(),c.Y8G("ngSwitchCase","role"),c.R7$(),c.Y8G("ngSwitchCase","dictionary")}}let Gt=(()=>{class AdministrationConfiguratorItemModal{constructor(e,t,s){this.administrationconfigurator=e,this.language=t,this.helper=s,this.fields=[],this.entry={}}setEditMode(){this.administrationconfigurator.setEditMode(this.entry.id)}isEditMode(e=null){return e?!e.readonly&&this.administrationconfigurator.isEditMode(this.entry.id):this.administrationconfigurator.isEditMode(this.entry.id)}setViewMode(){this.administrationconfigurator.cancelEditMode(this.entry.id)}get canSave(){return this.administrationconfigurator.canSave(this.entry.id)}save(){this.administrationconfigurator.saveEntry(this.entry.id).subscribe({next:()=>{this.self.destroy()}})}delete(){this.helper.confirm(this.language.getLabel("MSG_DELETE_RECORD"),this.language.getLabel("MSG_DELETE_RECORD","long")).subscribe((e=>{e&&this.administrationconfigurator.deleteEntry(this.entry.id)}))}copy(e){this.administrationconfigurator.copy(e)}getJSON(e){try{let t=JSON.parse(e);return JSON.stringify(t,null,2)}catch(t){return e}}getForeignName(e){if(!this.entry.data[e])return this.entry.data[e];let t=this.getForeignKeys(e).find((t=>t.value==this.entry.data[e]));return t?t.display:this.entry.data[e]}getForeignKeys(e){return this.administrationconfigurator.foreignkeys[e].sort(((e,t)=>e.display.localeCompare(t.display)))}setFormattedDate(e,t){(!t||t&&!t.isValid())&&(this.entry.data[e]=""),this.entry.data[e]=t.format("YYYY-MM-DD")}close(){this.administrationconfigurator.cancelEditMode(this.entry.id),this.self.destroy()}static#e=this.ɵfac=function(e){return new(e||AdministrationConfiguratorItemModal)(c.rXU(J),c.rXU(h.B),c.rXU(q.d))};static#t=this.ɵcmp=c.VBU({type:AdministrationConfiguratorItemModal,selectors:[["administration-configurator-item-modal"]],inputs:{fields:"fields",entry:"entry"},decls:17,vars:6,consts:[[3,"close"],["margin","none"],[1,"slds-table","slds-table--bordered","slds-table--cell-buffer"],["label","LBL_FIELD"],["label","LBL_VALUE"],[4,"ngFor","ngForOf"],[1,"slds-button","slds-button--icon-border",3,"click"],[3,"icon","size"],[1,"slds-button","slds-button--icon-border",3,"disabled","click"],[1,"slds-form-element"],[1,"slds-form-element__control",3,"ngSwitch"],["class","slds-textarea slds-scrollable--y slds-m-vertical--xx-small",3,"ngModel","ngModelChange",4,"ngSwitchCase"],[3,"ngModel","ngModelChange",4,"ngSwitchCase"],["system-input-date-formatted","",3,"ngModel","showCalendarButton","ngModelChange",4,"ngSwitchCase"],[3,"module","ngModel","ngModelChange",4,"ngSwitchCase"],[3,"editmode","fieldvalue","fieldvalueChange",4,"ngSwitchCase"],["type","text","class","slds-input",3,"ngModel","ngModelChange",4,"ngSwitchDefault"],[1,"slds-textarea","slds-scrollable--y","slds-m-vertical--xx-small",3,"ngModel","ngModelChange"],[3,"ngModel","ngModelChange"],["system-input-date-formatted","",3,"ngModel","showCalendarButton","ngModelChange"],[3,"module","ngModel","ngModelChange"],[3,"value","display",4,"ngFor","ngForOf"],[3,"value","display"],[3,"editmode","fieldvalue","fieldvalueChange"],["type","text",1,"slds-input",3,"ngModel","ngModelChange"]],template:function(e,t){1&e&&(c.j41(0,"system-modal")(1,"system-modal-header-empty",0),c.bIt("close",(function(){return t.close()})),c.k0s(),c.j41(2,"system-modal-content",1)(3,"table",2)(4,"thead")(5,"tr")(6,"th"),c.nrm(7,"system-label",3),c.k0s(),c.j41(8,"th"),c.nrm(9,"system-label",4),c.k0s()()(),c.j41(10,"tbody"),c.DNE(11,It,22,17,"tr",5),c.k0s()()(),c.j41(12,"system-modal-footer")(13,"button",6),c.bIt("click",(function(){return t.close()})),c.nrm(14,"system-button-icon",7),c.k0s(),c.j41(15,"button",8),c.bIt("click",(function(){return t.save()})),c.nrm(16,"system-button-icon",7),c.k0s()()()),2&e&&(c.R7$(11),c.Y8G("ngForOf",t.fields),c.R7$(3),c.Y8G("icon","close")("size","small"),c.R7$(),c.Y8G("disabled",!t.canSave),c.R7$(),c.Y8G("icon","check")("size","small"))},dependencies:[i.Sq,i.ux,i.e1,i.fG,n.me,n.BC,n.vS,L.t,W.f,Z.n,ee.M,te.W,se.w,ie.u,ne.e,le.T,j.W,ot.D,dt.I,rt.Q,ct.b,ae.i,oe.t,de.d,re.u,ge],encapsulation:2})}return AdministrationConfiguratorItemModal})(),At=(()=>{class AdministrationQuotaManagerField{constructor(e){this.backend=e,this.userid="",this.monthindex=0,this.year=0,this.data=[]}get value(){for(let e of this.data)if(e&&e.assigned_user_id===this.userid&&e.period===""+(this.monthindex+1))return""+Math.round(e.sales_quota);return""}set value(e){let t=0,s=+e;for(let i of this.data)i&&i.assigned_user_id===this.userid&&i.period===""+(this.monthindex+1)&&(s>0?this.data[t].sales_quota=e:delete this.data[t]),t++;s>0?this.backend.postRequest("module/QuotaManager/quota/"+this.userid+"/"+this.year+"/"+(this.monthindex+1)+"/"+e).subscribe((e=>{})):this.backend.deleteRequest("module/QuotaManager/quota/"+this.userid+"/"+this.year+"/"+(this.monthindex+1))}changeValue(e){}static#e=this.ɵfac=function(e){return new(e||AdministrationQuotaManagerField)(c.rXU(u.H))};static#t=this.ɵcmp=c.VBU({type:AdministrationQuotaManagerField,selectors:[["administration-quotamanager-field"]],inputs:{userid:"userid",monthindex:"monthindex",year:"year",data:"data"},decls:1,vars:1,consts:[[2,"width","80px",3,"ngModel","ngModelChange"]],template:function(e,t){1&e&&(c.j41(0,"input",0),c.mxI("ngModelChange",(function(e){return c.DH7(t.value,e)||(t.value=e),e})),c.bIt("ngModelChange",(function(e){return t.changeValue(e)})),c.k0s()),2&e&&c.R50("ngModel",t.value)},dependencies:[n.me,n.BC,n.vS],encapsulation:2})}return AdministrationQuotaManagerField})();function St(e,t){if(1&e&&(c.j41(0,"option"),c.EFF(1),c.k0s()),2&e){const e=t.$implicit;c.R7$(),c.JRh(e)}}function Ct(e,t){if(1&e&&(c.j41(0,"th",12),c.EFF(1),c.k0s()),2&e){const e=t.$implicit;c.R7$(),c.JRh(e)}}function Dt(e,t){if(1&e&&(c.j41(0,"td"),c.nrm(1,"administration-quotamanager-field",15),c.k0s()),2&e){const e=t.index,s=c.XpG().$implicit,i=c.XpG();c.R7$(),c.Y8G("userid",s.data.id)("data",i.quotas)("monthindex",e)("year",i.year)}}function Bt(e,t){if(1&e&&(c.j41(0,"tr",11)(1,"td"),c.EFF(2),c.k0s(),c.j41(3,"td"),c.EFF(4),c.k0s(),c.DNE(5,Dt,2,4,"td",8),c.k0s()),2&e){const e=t.$implicit,s=c.XpG();c.R7$(2),c.E5c("",e.data.last_name," ",e.data.first_name," (",e.data.user_name,")"),c.R7$(2),c.JRh(s.yearlyQuotas[e.data.id]),c.R7$(),c.Y8G("ngForOf",s.monthlyQuotas[e.data.id])}}let $t=(()=>{class AdministrationQuotaManager{constructor(e){this.backend=e,this.users=[],this.monthlyQuotas={},this.quotas=[],this.yearlyQuotas={},this.year=(new Date).getFullYear(),this.monthNamesList=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],this.yearsList=[]}ngOnInit(){this.getYears(),this.getQuotaUsers()}getYears(){let e=(new Date).getFullYear();for(let t=e-2;t<e+7;t++)this.yearsList.push(t)}getQuotaUsers(){this.backend.getRequest("module/QuotaManager/users").subscribe((e=>{for(let t of e)this.users.push({id:t.id,mode:"",data:t});this.getQuotas().subscribe()}))}getQuotas(){let e=new U.B;return this.backend.getRequest("module/QuotaManager/quotas/"+this.year).subscribe((t=>{this.quotas=t,this.monthlyQuotas={},this.yearlyQuotas={};for(let e of t){let t=e.assigned_user_id,s=Math.round(e.sales_quota),i=e.period-1;this.monthlyQuotas[t]||(this.monthlyQuotas[t]=new Array(12)),this.monthlyQuotas[t][i]=s,this.yearlyQuotas[t]||(this.yearlyQuotas[t]=0),this.yearlyQuotas[t]+=s}e.next(this.users),e.complete();for(let e of this.users){let t=e.data.id;this.monthlyQuotas[t]||(this.monthlyQuotas[t]=new Array(12)),this.yearlyQuotas[t]||(this.yearlyQuotas[t]=0)}})),e.asObservable()}updateQuota(e,t,s){let i=e.target.value?+e.target.value:0,n=this.monthlyQuotas[t][s];n=n||0,this.yearlyQuotas[t]-=n-i,i>0?(this.monthlyQuotas[t][s]=i,this.backend.postRequest("module/QuotaManager/quota/"+t+"/"+this.year+"/"+(s+1)+"/"+i)):(delete this.monthlyQuotas[t][s],this.backend.deleteRequest("module/QuotaManager/quota/"+t+"/"+this.year+"/"+(s+1)))}static#e=this.ɵfac=function(e){return new(e||AdministrationQuotaManager)(c.rXU(u.H))};static#t=this.ɵcmp=c.VBU({type:AdministrationQuotaManager,selectors:[["administration-quotamanager"]],decls:22,vars:4,consts:[[1,"slds-page-header"],[1,"slds-grid","slds-grid_vertical-align-center","slds-grid--align-spread"],[1,"slds-media"],[1,"slds-media__body"],[1,"slds-page-header__title","slds-truncate","slds-align-middle"],[1,"slds-p-top--small"],["for","year-select"],["id","year-select",3,"ngModel","ngModelChange","change"],[4,"ngFor","ngForOf"],[1,"slds-scrollable--x"],[1,"slds-table","slds-table_bordered","slds-table_cell-buffer"],[1,"slds-text-title_caps"],["scope","col"],["scope","col",4,"ngFor","ngForOf"],["class","slds-text-title_caps",4,"ngFor","ngForOf"],[3,"userid","data","monthindex","year"]],template:function(e,t){1&e&&(c.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h1",4),c.EFF(5,"Quota Manager"),c.k0s()()(),c.j41(6,"div",5)(7,"label",6),c.EFF(8,"Year"),c.k0s(),c.j41(9,"select",7),c.mxI("ngModelChange",(function(e){return c.DH7(t.year,e)||(t.year=e),e})),c.bIt("change",(function(){return t.getQuotas()})),c.DNE(10,St,2,1,"option",8),c.k0s()()()(),c.j41(11,"div",9)(12,"table",10)(13,"thead")(14,"tr",11)(15,"th",12),c.EFF(16,"Name"),c.k0s(),c.j41(17,"th",12),c.EFF(18,"Total"),c.k0s(),c.DNE(19,Ct,2,1,"th",13),c.k0s()(),c.j41(20,"tbody"),c.DNE(21,Bt,6,5,"tr",14),c.k0s()()()),2&e&&(c.R7$(9),c.R50("ngModel",t.year),c.R7$(),c.Y8G("ngForOf",t.yearsList),c.R7$(9),c.Y8G("ngForOf",t.monthNamesList),c.R7$(2),c.Y8G("ngForOf",t.users))},dependencies:[i.Sq,n.xH,n.y7,n.wz,n.BC,n.vS,At],encapsulation:2})}return AdministrationQuotaManager})(),Nt=(()=>{class ftsconfiguration{constructor(e,t,s,i,n,l){this.backend=e,this.metadata=t,this.language=s,this.modal=i,this.toast=n,this.configurationService=l,this.module="",this.module$=new c.bkB,this.moduleFtsFields=[],this.moduleFtsSettings={},this.indexing=!1,this.modules=[],this.analyzers=[],this.backend.getRequest("configuration/elastic/core/modules").subscribe((e=>this.modules=e)),this.backend.getRequest("configuration/elastic/core/analyzers").subscribe((e=>this.analyzers=e.sort(((e,t)=>e.value>t.value?1:-1))))}setModule(e){this.module=e,this.modules.indexOf(e)>=0?(this.getModuleFtsFields(),this.getModuleSettings()):this.module?(this.modules.push(e),this.moduleFtsFields=[],this.moduleFtsSettings=[]):(this.moduleFtsFields=[],this.moduleFtsSettings=[]),this.module$.emit(e)}getModuleFtsFields(){this.moduleFtsFields=[],this.backend.getRequest("configuration/elastic/"+this.module+"/fields").subscribe((e=>{this.moduleFtsFields=e}))}getModuleSettings(){this.moduleFtsSettings=[],this.backend.getRequest("configuration/elastic/"+this.module+"/settings").subscribe((e=>{this.moduleFtsSettings=e}))}getFieldDetails(e){let t={};return this.moduleFtsFields.some((s=>{if(s.id===e)return t=s,!0})),t}deleteModule(e){this.backend.deleteRequest(`configuration/elastic/${this.module}`).subscribe((t=>{this.modules.splice(this.modules.indexOf(e),1),this.module=""}))}save(e=!0){let t=new U.B,s={fields:this.moduleFtsFields,settings:this.moduleFtsSettings};return this.backend.postRequest("configuration/elastic/"+this.module,{},s).subscribe((s=>{t.next(s),e&&(s?(this.toast.sendToast(this.language.getLabel("LBL_DATA_SAVED"),"success"),this.configurationService.reloadTaskData("moduledefs")):this.toast.sendToast(this.language.getLabel("ERR_NETWORK"),"error"))}),(e=>t.error(e))),t}searchPath(e){let t=!1;return this.moduleFtsFields.some((s=>{if(s.path===e)return t=!0,!0})),t}executeAction(e,t){let s="",i="";switch(e){case"bulk":s=`configuration/elastic/${this.module}/index`,i="LBL_INDEX";break;case"init":s="configuration/elastic/core/initialize",i="LBL_INITIALIZE";break;case"reset":s=`configuration/elastic/${this.module}/index/reset`,i="LBL_RESET"}this.modal.openModal("SystemLoadingModal").subscribe((n=>{n.instance.messagelabel=this.language.getLabel("LBL_EXECUTING")+": "+this.language.getLabel(i),"reset"==e?this.save(!1).subscribe((e=>{this.backend.postRequest(s,t).subscribe((e=>{if(e&&e.message&&"string"==typeof e.message&&e.message.length>0){let t=e.type&&e.type.length>0?e.type:this.language.getLabel("LBL_INFORMATION");this.modal.info(e.message,t,e.status)}else"error"!=e.status&&this.toast.sendToast(this.language.getLabel("MSG_SUCCESSFULLY_EXECUTED"),"success");n.instance.self.destroy()}),(e=>n.instance.self.destroy()))}),(e=>n.instance.self.destroy())):this.backend.postRequest(s,t).subscribe((e=>{if(e&&e.message&&"string"==typeof e.message&&e.message.length>0){let t=e.type&&e.type.length>0?e.type:this.language.getLabel("LBL_INFORMATION");this.modal.info(e.message,t,e.status)}else"error"!=e.status&&this.toast.sendToast(this.language.getLabel("MSG_SUCCESSFULLY_EXECUTED"),"success");n.instance.self.destroy()}),(e=>n.instance.self.destroy()))}))}static#e=this.ɵfac=function(e){return new(e||ftsconfiguration)(c.KVO(u.H),c.KVO(p.yu),c.KVO(h.B),c.KVO(P.y),c.KVO(z.o),c.KVO(H.i))};static#t=this.ɵprov=c.jDH({token:ftsconfiguration,factory:ftsconfiguration.ɵfac})}return ftsconfiguration})();var Tt=s(38431);const Xt=["administration-ftsstatus",""];function Yt(e,t){1&e&&c.nrm(0,"system-utility-icon",30)}function wt(e,t){1&e&&c.nrm(0,"system-utility-icon",31)}function Ot(e,t){if(1&e&&(c.j41(0,"tr")(1,"td")(2,"div",16),c.EFF(3),c.k0s()(),c.j41(4,"td")(5,"div",16),c.nrm(6,"system-display-number",18),c.EFF(7,"/"),c.nrm(8,"system-display-number",18),c.k0s()(),c.j41(9,"td")(10,"div",16),c.EFF(11),c.k0s()(),c.j41(12,"td")(13,"div",16),c.EFF(14),c.k0s()(),c.j41(15,"td")(16,"div",16),c.EFF(17),c.k0s()(),c.j41(18,"td"),c.DNE(19,Yt,1,0,"system-utility-icon",28)(20,wt,1,0,"system-utility-icon",29),c.k0s()()),2&e){const e=t.$implicit;c.R7$(3),c.JRh(e.name),c.R7$(3),c.Y8G("number",e.pdocs),c.R7$(2),c.Y8G("number",e.tdocs),c.R7$(3),c.JRh(e.stored),c.R7$(3),c.JRh(e.unindexed),c.R7$(3),c.Lme("",e.psize,"/",e.tsize,""),c.R7$(2),c.Y8G("ngIf",e.blocked),c.R7$(),c.Y8G("ngIf",!e.blocked)}}function Ut(e,t){if(1&e&&(c.j41(0,"div")(1,"table",10)(2,"thead")(3,"tr",11)(4,"th",12),c.nrm(5,"system-label",13),c.k0s(),c.j41(6,"th",12),c.nrm(7,"system-label",14),c.k0s()()(),c.j41(8,"tbody")(9,"tr")(10,"td"),c.nrm(11,"system-label",15),c.k0s(),c.j41(12,"td")(13,"div",16),c.EFF(14),c.k0s()()(),c.j41(15,"tr")(16,"td"),c.nrm(17,"system-label",17),c.k0s(),c.j41(18,"td")(19,"div",16),c.nrm(20,"system-display-number",18),c.EFF(21,"/"),c.nrm(22,"system-display-number",18),c.k0s()()(),c.j41(23,"tr")(24,"td"),c.nrm(25,"system-label",19),c.k0s(),c.j41(26,"td")(27,"div",16),c.EFF(28),c.k0s()()()()(),c.j41(29,"h2",20),c.EFF(30,"Index Details"),c.k0s(),c.j41(31,"div",21)(32,"table",22)(33,"thead")(34,"tr",11)(35,"th",12)(36,"div",16),c.nrm(37,"system-label",23),c.k0s()(),c.j41(38,"th",12)(39,"div",16),c.nrm(40,"system-label",17),c.k0s()(),c.j41(41,"th",12)(42,"div",16),c.nrm(43,"system-label",24),c.k0s()(),c.j41(44,"th",12)(45,"div",16),c.nrm(46,"system-label",25),c.k0s()(),c.j41(47,"th",12)(48,"div",16),c.nrm(49,"system-label",19),c.k0s()(),c.j41(50,"th",12)(51,"div",16),c.nrm(52,"system-label",26),c.k0s()()()(),c.j41(53,"tbody"),c.DNE(54,Ot,21,9,"tr",27),c.k0s()()()()),2&e){const e=c.XpG();c.R7$(14),c.JRh(null==e.version||null==e.version.version?null:e.version.version.number),c.R7$(6),c.Y8G("number",e.stats.pdocs),c.R7$(2),c.Y8G("number",e.stats.tdocs),c.R7$(6),c.Lme("",e.stats.psize,"/",e.stats.tsize,""),c.R7$(26),c.Y8G("ngForOf",e.indices)}}let Vt=(()=>{class AdministrationFTSStatus{constructor(e,t,s,i,n,l,a,o){this.metadata=e,this.language=t,this.modal=s,this.backend=i,this.helper=n,this.toast=l,this.ftsconfiguration=a,this.injector=o,this.version={},this.stats={docs:0,size:0},this.loading=!1,this.indices=[],this.loadstatus()}loadstatus(){this.loading=!0,this.indices=[],this.backend.getRequest("admin/elastic/status").subscribe((e=>{this.version=e.version,this.stats.tdocs=0,this.stats.pdocs=0,this.stats.tsize=0,this.stats.psize=0,e.stats?._all&&(e.stats._all.total.docs&&e.stats._all.total.docs.count&&(this.stats.tdocs=e.stats._all.total.docs.count,this.stats.pdocs=e.stats._all.primaries.docs.count),e.stats._all.total?.store&&e.stats._all.total.store.size_in_bytes&&(this.stats.tsize=this.helper.humanFileSize(e.stats._all.total.store.size_in_bytes),this.stats.psize=this.helper.humanFileSize(e.stats._all.primaries.store.size_in_bytes)));for(let t in e.stats.indices)this.indices.push({name:t,pdocs:e.stats.indices[t].primaries.docs.count,psize:this.helper.humanFileSize(e.stats.indices[t].primaries.store.size_in_bytes),tdocs:e.stats.indices[t].total.docs.count,tsize:this.helper.humanFileSize(e.stats.indices[t].total.store.size_in_bytes),stored:e.stats.indexed[t].count,unindexed:e.stats.indexed[t].unindexed,blocked:!!(e.settings&&e.settings[t]&&e.settings[t].settings.index.blocks?.read_only_allow_delete)});this.indices.sort(((e,t)=>e.name>t.name?1:-1)),this.loading=!1}),(e=>{this.loading=!1,this.toast.sendToast("Error loading Status","error")}))}unlock(){this.backend.putRequest("admin/elastic/unblock").subscribe((e=>{this.loadstatus()}))}get hasLocks(){return!!this.indices.find((e=>e.blocked))}initialize(){this.modal.confirm("Are you sure you want to initialize your FTS? It recreates new indices, so indexed data will be lost and have to be rebuild!","Initialize").subscribe((e=>{e&&this.ftsconfiguration.executeAction("init")}))}static#e=this.ɵfac=function(e){return new(e||AdministrationFTSStatus)(c.rXU(p.yu),c.rXU(h.B),c.rXU(P.y),c.rXU(u.H),c.rXU(q.d),c.rXU(z.o),c.rXU(Nt),c.rXU(c.zZn))};static#t=this.ɵcmp=c.VBU({type:AdministrationFTSStatus,selectors:[["","administration-ftsstatus",""]],features:[c.Jv_([Nt])],attrs:Xt,decls:11,vars:4,consts:[[1,"slds-grid","slds-grid_vertical-align-center","slds-grid--align-spread","slds-p-around--small"],[1,"slds-text-heading_medium","slds-col--bump-right"],["label","LBL_FTS_STATUS"],["type","button",1,"slds-button","slds-button--neutral",3,"click"],["label","LBL_INITIALIZE"],[1,"slds-button","slds-button_icon","slds-button_icon-border-filled",3,"disabled","click"],["icon","unlock"],["icon","refresh"],["system-to-bottom-noscroll","",3,"system-overlay-loading-spinner"],[4,"ngIf"],[1,"slds-table","slds-table_bordered","slds-table_cell-buffer","slds-m-bottom--medium"],[1,"slds-text-title_caps"],["scope","col"],["label","LBL_ATTRIBUTE"],["label","LBL_VALUE"],["label","LBL_VERSION"],[1,"slds-truncate"],["label","LBL_DOCS"],["system-display-number-nodigits","",3,"number"],["label","LBL_SIZE"],[1,"slds-p-around--small"],["system-to-bottom","",1,"slds-border--top"],[1,"slds-table","slds-table_bordered","slds-table_cell-buffer","slds-table--header-fixed"],["label","LBL_INDEX"],["label","LBL_STORED"],["label","LBL_UNINDEXED"],["label","LBL_BLOCKED"],[4,"ngFor","ngForOf"],["icon","lock","size","x-small","colorclass","slds-icon-text-error",4,"ngIf"],["icon","unlock","size","x-small","colorclass","slds-icon-text-success",4,"ngIf"],["icon","lock","size","x-small","colorclass","slds-icon-text-error"],["icon","unlock","size","x-small","colorclass","slds-icon-text-success"]],template:function(e,t){1&e&&(c.j41(0,"div",0)(1,"h2",1),c.nrm(2,"system-label",2),c.k0s(),c.j41(3,"button",3),c.bIt("click",(function(){return t.initialize()})),c.nrm(4,"system-label",4),c.k0s(),c.j41(5,"button",5),c.bIt("click",(function(){return t.unlock()})),c.nrm(6,"system-button-icon",6),c.k0s(),c.j41(7,"button",5),c.bIt("click",(function(){return t.loadstatus()})),c.nrm(8,"system-button-icon",7),c.k0s()(),c.j41(9,"div",8),c.DNE(10,Ut,55,6,"div",9),c.k0s()),2&e&&(c.R7$(5),c.Y8G("disabled",t.loading||!t.hasLocks),c.R7$(2),c.Y8G("disabled",t.loading),c.R7$(2),c.Y8G("system-overlay-loading-spinner",t.loading),c.R7$(),c.Y8G("ngIf",!t.loading))},dependencies:[i.Sq,i.bT,L.t,Tt.B,j.W,F.B,v.b,k.p,R.M],encapsulation:2})}return AdministrationFTSStatus})();var Ht=s(41239),zt=s(59851);const Pt=["dropList"];function Jt(e,t){if(1&e){const e=c.RV6();c.j41(0,"tr",11),c.bIt("click",(function(){const t=c.eBV(e).$implicit,s=c.XpG();return c.Njj(s.handleSelection(t.id))})),c.j41(1,"td",12),c.nrm(2,"system-utility-icon",13),c.k0s(),c.j41(3,"td")(4,"div",5),c.EFF(5),c.k0s()(),c.j41(6,"td",14)(7,"div",5),c.EFF(8),c.k0s()(),c.j41(9,"td",14)(10,"div",5),c.nrm(11,"system-label",15),c.k0s()(),c.j41(12,"td",4)(13,"button",16),c.bIt("click",(function(){const t=c.eBV(e).index,s=c.XpG();return c.Njj(s.deleteField(t))})),c.nrm(14,"system-button-icon",17),c.k0s()()()}if(2&e){const e=t.$implicit,s=c.XpG();c.AVh("slds-theme--shade",s.isSelected(e.id)),c.Y8G("cdkDragData",e),c.R7$(5),c.JRh(e.path),c.R7$(3),c.JRh(e.fieldname),c.R7$(3),c.Y8G("label",e.name)}}const qt=e=>[e];let Wt=(()=>{class AdministrationFTSManagerFieldsList{constructor(e,t,s,i,n,l){this.metadata=e,this.language=t,this.ftsconfiguration=s,this.backend=i,this.modal=n,this.modelutilities=l,this.links=[],this.self={},this.fields=[],this.nodePath="",this.selectedField="",this.selectListField=new c.bkB}ngAfterViewInit(){window.setTimeout((()=>this.ftsconfiguration.fieldsDropList=this.dropList),100)}rightDrop(e){if(this.removePlaceHolderElement(e.previousContainer.element.nativeElement),e.previousContainer===e.container)(0,l.HD)(e.container.data,e.previousIndex,e.currentIndex);else{let t=e.item.data,s=this.modelutilities.generateGuid(),i={id:s,fieldid:s,fieldname:t.name,indexfieldname:t.name,name:t.label,path:this.nodePath+"::"+t.id};this.ftsconfiguration.moduleFtsFields.splice(e.currentIndex,0,i)}}removePlaceHolderElement(e){this.dragPlaceHolderNode&&(e.removeChild(this.dragPlaceHolderNode),this.dragPlaceHolderNode=void 0)}trackByFn(e,t){return t.id}deleteField(e){this.modal.confirmDeleteRecord().subscribe((t=>{t&&this.ftsconfiguration.moduleFtsFields.splice(e,1)}))}handleSelection(e){this.selectListField.emit(e)}isSelected(e){return this.selectedField==e}static#e=this.ɵfac=function(e){return new(e||AdministrationFTSManagerFieldsList)(c.rXU(p.yu),c.rXU(h.B),c.rXU(Nt),c.rXU(u.H),c.rXU(P.y),c.rXU(V.g))};static#t=this.ɵcmp=c.VBU({type:AdministrationFTSManagerFieldsList,selectors:[["administration-ftsmanager-fields-list"]],viewQuery:function(e,t){if(1&e&&c.GBs(Pt,5),2&e){let e;c.mGM(e=c.lsd())&&(t.dropList=e.first)}},inputs:{dragList:"dragList",dragPlaceHolderNode:"dragPlaceHolderNode",nodePath:"nodePath",selectedField:"selectedField"},outputs:{selectListField:"selectListField"},decls:18,vars:6,consts:[["cdkDropList","",1,"slds-size--1-of-1","slds-border--left",2,"height","100%",3,"cdkDropListData","cdkDropListConnectedTo","cdkDropListDropped"],["dropList","cdkDropList"],[1,"slds-table","slds-table--cell-buffer","spice-table_header-fixed","slds-table--fixed-layout"],[1,"slds-text-title--caps","slds-theme--shade"],[1,"slds-cell-shrink"],[1,"slds-truncate"],["label","LBL_PATH"],["scope","col"],["label","LBL_FIELD"],["label","LBL_NAME"],["cdkDrag","","cdkDragBoundary","#administration-fts-manager-field-add-drop-table","class","slds-border--bottom slds-drag--preview",3,"cdkDragData","slds-theme--shade","click",4,"ngFor","ngForOf","ngForTrackBy"],["cdkDrag","","cdkDragBoundary","#administration-fts-manager-field-add-drop-table",1,"slds-border--bottom","slds-drag--preview",3,"cdkDragData","click"],[1,"slds-p-around--none"],["cdkDragHandle","","icon","drag_and_drop","size","x-small",1,"slds-p-horizontal--x-small",2,"cursor","move"],["data-label","Account Name"],[3,"label"],[1,"slds-button","slds-button--icon",3,"click"],["icon","close"]],template:function(e,t){1&e&&(c.j41(0,"div",0,1),c.bIt("cdkDropListDropped",(function(e){return t.rightDrop(e)})),c.j41(2,"table",2)(3,"thead")(4,"tr",3),c.nrm(5,"th",4),c.j41(6,"th")(7,"div",5),c.nrm(8,"system-label",6),c.k0s()(),c.j41(9,"th",7)(10,"div",5),c.nrm(11,"system-label",8),c.k0s()(),c.j41(12,"th",7)(13,"div",5),c.nrm(14,"system-label",9),c.k0s()(),c.nrm(15,"th",4),c.k0s()(),c.j41(16,"tbody"),c.DNE(17,Jt,15,6,"tr",10),c.k0s()()()),2&e&&(c.Y8G("cdkDropListData",t.ftsconfiguration.moduleFtsFields)("cdkDropListConnectedTo",c.eq3(4,qt,t.dragList)),c.R7$(17),c.Y8G("ngForOf",t.ftsconfiguration.moduleFtsFields)("ngForTrackBy",t.trackByFn))},dependencies:[i.Sq,L.t,j.W,F.B,l.O7,l.T1,l.Fb],encapsulation:2})}return AdministrationFTSManagerFieldsList})();function Kt(e,t){if(1&e){const e=c.RV6();c.j41(0,"div",14)(1,"label",15),c.nrm(2,"system-label",83),c.k0s(),c.nrm(3,"system-icon-help-text",21),c.j41(4,"div",13)(5,"textarea",84),c.mxI("ngModelChange",(function(t){c.eBV(e);const s=c.XpG(3);return c.DH7(s.aggregateaddparams,t)||(s.aggregateaddparams=t),c.Njj(t)})),c.k0s()()()}if(2&e){const e=c.XpG(3);c.R7$(3),c.Y8G("helpText",e.language.getLabel("HLP_FTS_AGGREGATE_PARAMS")),c.R7$(2),c.R50("ngModel",e.aggregateaddparams)}}function Qt(e,t){if(1&e){const e=c.RV6();c.j41(0,"div",68)(1,"div",69)(2,"system-checkbox",70),c.mxI("ngModelChange",(function(t){c.eBV(e);const s=c.XpG(2);return c.DH7(s.fieldDetails.aggregatecollapsed,t)||(s.fieldDetails.aggregatecollapsed=t),c.Njj(t)})),c.nrm(3,"system-label",71),c.k0s()(),c.j41(4,"div",69)(5,"system-checkbox",70),c.mxI("ngModelChange",(function(t){c.eBV(e);const s=c.XpG(2);return c.DH7(s.fieldDetails.aggregateempty,t)||(s.fieldDetails.aggregateempty=t),c.Njj(t)})),c.nrm(6,"system-label",72),c.k0s()(),c.j41(7,"div",69)(8,"system-checkbox",70),c.mxI("ngModelChange",(function(t){c.eBV(e);const s=c.XpG(2);return c.DH7(s.fieldDetails.aggregatesystem,t)||(s.fieldDetails.aggregatesystem=t),c.Njj(t)})),c.nrm(9,"system-label",73),c.k0s()()(),c.DNE(10,Kt,6,2,"div",74),c.j41(11,"div",0)(12,"div",30)(13,"label",15),c.nrm(14,"system-label",75),c.k0s(),c.nrm(15,"system-icon-help-text",21),c.j41(16,"div",13)(17,"input",17),c.mxI("ngModelChange",(function(t){c.eBV(e);const s=c.XpG(2);return c.DH7(s.fieldDetails.aggregatesize,t)||(s.fieldDetails.aggregatesize=t),c.Njj(t)})),c.k0s()()(),c.j41(18,"div",30)(19,"label",15),c.nrm(20,"system-label",76),c.k0s(),c.j41(21,"div",13)(22,"input",17),c.mxI("ngModelChange",(function(t){c.eBV(e);const s=c.XpG(2);return c.DH7(s.fieldDetails.aggregatepriority,t)||(s.fieldDetails.aggregatepriority=t),c.Njj(t)})),c.k0s()()()(),c.j41(23,"div",0)(24,"div",30)(25,"label",15),c.nrm(26,"system-label",77),c.k0s(),c.nrm(27,"system-icon-help-text",21),c.j41(28,"div",13)(29,"div",22)(30,"select",23),c.mxI("ngModelChange",(function(t){c.eBV(e);const s=c.XpG(2);return c.DH7(s.fieldDetails.aggregatesortby,t)||(s.fieldDetails.aggregatesortby=t),c.Njj(t)})),c.nrm(31,"option",24),c.j41(32,"option",78),c.EFF(33,"Count (default)"),c.k0s(),c.j41(34,"option",79),c.EFF(35,"Key"),c.k0s()()()()(),c.j41(36,"div",30)(37,"label",15),c.nrm(38,"system-label",80),c.k0s(),c.nrm(39,"system-icon-help-text",21),c.j41(40,"div",13)(41,"select",23),c.mxI("ngModelChange",(function(t){c.eBV(e);const s=c.XpG(2);return c.DH7(s.fieldDetails.aggregatesort,t)||(s.fieldDetails.aggregatesort=t),c.Njj(t)})),c.nrm(42,"option",24),c.j41(43,"option",81),c.EFF(44,"asc"),c.k0s(),c.j41(45,"option",82),c.EFF(46,"desc (default)"),c.k0s()()()()()}if(2&e){const e=c.XpG(2);c.R7$(2),c.Y8G("disabled",!e.fieldDetails.aggregate),c.R50("ngModel",e.fieldDetails.aggregatecollapsed),c.R7$(3),c.Y8G("disabled","term"!=e.fieldDetails.aggregate),c.R50("ngModel",e.fieldDetails.aggregateempty),c.R7$(3),c.Y8G("disabled","term"!=e.fieldDetails.aggregate),c.R50("ngModel",e.fieldDetails.aggregatesystem),c.R7$(2),c.Y8G("ngIf",e.fieldDetails.aggregate),c.R7$(5),c.Y8G("helpText",e.language.getLabel("HLP_FTS_AGGREGATE_SIZE")),c.R7$(2),c.R50("ngModel",e.fieldDetails.aggregatesize),c.R7$(5),c.R50("ngModel",e.fieldDetails.aggregatepriority),c.R7$(5),c.Y8G("helpText",e.language.getLabel("HLP_FTS_AGGREGATE_SORTBY")),c.R7$(3),c.R50("ngModel",e.fieldDetails.aggregatesortby),c.R7$(),c.Y8G("ngValue",null),c.R7$(8),c.Y8G("helpText",e.language.getLabel("HLP_FTS_AGGREGATE_SORT")),c.R7$(2),c.R50("ngModel",e.fieldDetails.aggregatesort),c.R7$(),c.Y8G("ngValue",null)}}function Zt(e,t){if(1&e){const e=c.RV6();c.j41(0,"fieldset",10)(1,"legend",11),c.nrm(2,"system-label",85),c.k0s(),c.nrm(3,"system-icon-help-text",21),c.j41(4,"div",13)(5,"div",68)(6,"div",86)(7,"system-checkbox",19),c.mxI("ngModelChange",(function(t){c.eBV(e);const s=c.XpG(2);return c.DH7(s.fieldDetails.aggregatemetricsum,t)||(s.fieldDetails.aggregatemetricsum=t),c.Njj(t)})),c.nrm(8,"system-label",87),c.k0s()(),c.j41(9,"div",86)(10,"system-checkbox",19),c.mxI("ngModelChange",(function(t){c.eBV(e);const s=c.XpG(2);return c.DH7(s.fieldDetails.aggregatemetricavg,t)||(s.fieldDetails.aggregatemetricavg=t),c.Njj(t)})),c.nrm(11,"system-label",88),c.k0s()(),c.j41(12,"div",86)(13,"system-checkbox",19),c.mxI("ngModelChange",(function(t){c.eBV(e);const s=c.XpG(2);return c.DH7(s.fieldDetails.aggregatemetricmax,t)||(s.fieldDetails.aggregatemetricmax=t),c.Njj(t)})),c.nrm(14,"system-label",89),c.k0s()(),c.j41(15,"div",86)(16,"system-checkbox",19),c.mxI("ngModelChange",(function(t){c.eBV(e);const s=c.XpG(2);return c.DH7(s.fieldDetails.aggregatemetricmin,t)||(s.fieldDetails.aggregatemetricmin=t),c.Njj(t)})),c.nrm(17,"system-label",90),c.k0s()()()()()}if(2&e){const e=c.XpG(2);c.R7$(3),c.Y8G("helpText",e.language.getLabel("LBL_AGGREGATE_METRICS","","long")),c.R7$(4),c.R50("ngModel",e.fieldDetails.aggregatemetricsum),c.R7$(3),c.R50("ngModel",e.fieldDetails.aggregatemetricavg),c.R7$(3),c.R50("ngModel",e.fieldDetails.aggregatemetricmax),c.R7$(3),c.R50("ngModel",e.fieldDetails.aggregatemetricmin)}}function es(e,t){if(1&e&&(c.j41(0,"option",91),c.EFF(1),c.k0s()),2&e){const e=t.$implicit;c.Y8G("value",e.value),c.R7$(),c.JRh(e.text)}}function ts(e,t){if(1&e&&(c.j41(0,"option",91),c.EFF(1),c.k0s()),2&e){const e=t.$implicit;c.Y8G("value",e.value),c.R7$(),c.JRh(e.text)}}function ss(e,t){if(1&e){const e=c.RV6();c.j41(0,"div")(1,"h2",8),c.nrm(2,"system-label",9),c.EFF(3),c.k0s(),c.j41(4,"fieldset",10)(5,"legend",11),c.nrm(6,"system-label",12),c.k0s(),c.j41(7,"div",13)(8,"div",14)(9,"label",15),c.nrm(10,"system-label",16),c.k0s(),c.j41(11,"div",13)(12,"input",17),c.mxI("ngModelChange",(function(t){c.eBV(e);const s=c.XpG();return c.DH7(s.fieldDetails.indexfieldname,t)||(s.fieldDetails.indexfieldname=t),c.Njj(t)})),c.k0s()()(),c.j41(13,"div",14)(14,"label",15),c.nrm(15,"system-label",18),c.k0s(),c.j41(16,"system-input-label",19),c.mxI("ngModelChange",(function(t){c.eBV(e);const s=c.XpG();return c.DH7(s.fieldDetails.name,t)||(s.fieldDetails.name=t),c.Njj(t)})),c.k0s()(),c.j41(17,"div",14)(18,"label",15),c.nrm(19,"system-label",20),c.k0s(),c.nrm(20,"system-icon-help-text",21),c.j41(21,"div",13)(22,"div",22)(23,"select",23),c.mxI("ngModelChange",(function(t){c.eBV(e);const s=c.XpG();return c.DH7(s.fieldDetails.indextype,t)||(s.fieldDetails.indextype=t),c.Njj(t)})),c.nrm(24,"option",24),c.j41(25,"option",25),c.EFF(26,"text"),c.k0s(),c.j41(27,"option",26),c.EFF(28,"keyword"),c.k0s(),c.j41(29,"option",27),c.EFF(30,"date"),c.k0s(),c.j41(31,"option",28),c.EFF(32,"double"),c.k0s()()()()()(),c.j41(33,"div",29)(34,"div",30)(35,"label",15),c.nrm(36,"system-label",31),c.k0s(),c.nrm(37,"system-icon-help-text",21),c.j41(38,"div",13)(39,"input",17),c.mxI("ngModelChange",(function(t){c.eBV(e);const s=c.XpG();return c.DH7(s.fieldDetails.boost,t)||(s.fieldDetails.boost=t),c.Njj(t)})),c.k0s()()(),c.j41(40,"div",14)(41,"div",13)(42,"system-checkbox",19),c.mxI("ngModelChange",(function(t){c.eBV(e);const s=c.XpG();return c.DH7(s.fieldDetails.enablesort,t)||(s.fieldDetails.enablesort=t),c.Njj(t)})),c.nrm(43,"system-label",32)(44,"system-icon-help-text",21),c.k0s()()(),c.j41(45,"div",14)(46,"div",13)(47,"system-checkbox",19),c.mxI("ngModelChange",(function(t){c.eBV(e);const s=c.XpG();return c.DH7(s.fieldDetails.search,t)||(s.fieldDetails.search=t),c.Njj(t)})),c.nrm(48,"system-label",33)(49,"system-icon-help-text",21),c.k0s()()()(),c.j41(50,"div",29)(51,"div",34)(52,"label",15),c.nrm(53,"system-label",35),c.k0s(),c.nrm(54,"system-icon-help-text",21),c.j41(55,"div",13)(56,"system-input-backend-method",19),c.mxI("ngModelChange",(function(t){c.eBV(e);const s=c.XpG();return c.DH7(s.fieldDetails.function,t)||(s.fieldDetails.function=t),c.Njj(t)})),c.k0s()()()()(),c.j41(57,"fieldset",36)(58,"legend",11),c.nrm(59,"system-label",37),c.k0s(),c.j41(60,"div",13)(61,"div",14)(62,"label",15),c.nrm(63,"system-label",37),c.k0s(),c.nrm(64,"system-icon-help-text",21),c.j41(65,"div",13)(66,"div",22)(67,"select",23),c.mxI("ngModelChange",(function(t){c.eBV(e);const s=c.XpG();return c.DH7(s.fieldDetails.aggregate,t)||(s.fieldDetails.aggregate=t),c.Njj(t)})),c.nrm(68,"option",24),c.j41(69,"option",38),c.EFF(70,"Term"),c.k0s(),c.j41(71,"option",39),c.EFF(72,"Range"),c.k0s(),c.j41(73,"option",40),c.EFF(74,"Date Week"),c.k0s(),c.j41(75,"option",41),c.EFF(76,"Date Month"),c.k0s(),c.j41(77,"option",42),c.EFF(78,"Date Quarter"),c.k0s(),c.j41(79,"option",43),c.EFF(80,"Date Year"),c.k0s()()()()(),c.DNE(81,Qt,47,16),c.k0s()(),c.DNE(82,Zt,18,5,"fieldset",44),c.j41(83,"fieldset",10)(84,"legend",11),c.nrm(85,"system-label",45),c.k0s(),c.j41(86,"div",13)(87,"div",0)(88,"div",30)(89,"label",15),c.nrm(90,"system-label",45),c.k0s(),c.nrm(91,"system-icon-help-text",21),c.j41(92,"div",13)(93,"div",22)(94,"select",23),c.mxI("ngModelChange",(function(t){c.eBV(e);const s=c.XpG();return c.DH7(s.fieldDetails.analyzer,t)||(s.fieldDetails.analyzer=t),c.Njj(t)})),c.j41(95,"option",46),c.EFF(96,"standard"),c.k0s(),c.DNE(97,es,2,2,"option",47),c.k0s()()()(),c.j41(98,"div",30)(99,"label",15),c.nrm(100,"system-label",48),c.k0s(),c.nrm(101,"system-icon-help-text",21),c.j41(102,"div",13)(103,"div",22)(104,"select",23),c.mxI("ngModelChange",(function(t){c.eBV(e);const s=c.XpG();return c.DH7(s.fieldDetails.search_analyzer,t)||(s.fieldDetails.search_analyzer=t),c.Njj(t)})),c.j41(105,"option",46),c.EFF(106,"standard"),c.k0s(),c.DNE(107,ts,2,2,"option",47),c.k0s()()()()()()(),c.j41(108,"fieldset",10)(109,"legend",11),c.nrm(110,"system-label",49),c.k0s(),c.j41(111,"div",13)(112,"div",14)(113,"div",13)(114,"system-checkbox",19),c.mxI("ngModelChange",(function(t){c.eBV(e);const s=c.XpG();return c.DH7(s.fieldDetails.duplicatecheck,t)||(s.fieldDetails.duplicatecheck=t),c.Njj(t)})),c.nrm(115,"system-label",50)(116,"system-icon-help-text",21),c.k0s()()(),c.j41(117,"div",51)(118,"div",52)(119,"label",15),c.nrm(120,"system-label",53),c.k0s(),c.nrm(121,"system-icon-help-text",21),c.j41(122,"div",13)(123,"div",22)(124,"select",54),c.mxI("ngModelChange",(function(t){c.eBV(e);const s=c.XpG();return c.DH7(s.fieldDetails.duplicatequery,t)||(s.fieldDetails.duplicatequery=t),c.Njj(t)})),c.j41(125,"option",46),c.EFF(126,"match (or)"),c.k0s(),c.j41(127,"option",55),c.EFF(128,"match (and)"),c.k0s(),c.j41(129,"option",38),c.EFF(130,"term"),c.k0s()()()()(),c.j41(131,"div",52)(132,"label",15),c.nrm(133,"system-label",56),c.k0s(),c.nrm(134,"system-icon-help-text",21),c.j41(135,"div",13)(136,"input",57),c.mxI("ngModelChange",(function(t){c.eBV(e);const s=c.XpG();return c.DH7(s.fieldDetails.duplicatefuzz,t)||(s.fieldDetails.duplicatefuzz=t),c.Njj(t)})),c.k0s()()()()()(),c.j41(137,"fieldset",10)(138,"legend",11),c.nrm(139,"system-label",58),c.k0s(),c.j41(140,"div",59)(141,"system-checkbox",19),c.mxI("ngModelChange",(function(t){c.eBV(e);const s=c.XpG();return c.DH7(s.fieldDetails.email,t)||(s.fieldDetails.email=t),c.Njj(t)})),c.nrm(142,"system-label",60)(143,"system-icon-help-text",21),c.k0s()(),c.j41(144,"div",59)(145,"system-checkbox",19),c.mxI("ngModelChange",(function(t){c.eBV(e);const s=c.XpG();return c.DH7(s.fieldDetails.phonesearch,t)||(s.fieldDetails.phonesearch=t),c.Njj(t)})),c.nrm(146,"system-label",61)(147,"system-icon-help-text",21),c.k0s()()(),c.j41(148,"fieldset",10)(149,"legend",11),c.nrm(150,"system-label",62),c.k0s(),c.j41(151,"div",13)(152,"div",14)(153,"label",15),c.nrm(154,"system-label",20),c.k0s(),c.j41(155,"div",13)(156,"div",22)(157,"select",23),c.mxI("ngModelChange",(function(t){c.eBV(e);const s=c.XpG();return c.DH7(s.fieldDetails.activitytype,t)||(s.fieldDetails.activitytype=t),c.Njj(t)})),c.j41(158,"option",46),c.EFF(159,"---"),c.k0s(),c.j41(160,"option",63),c.EFF(161,"activityparentid"),c.k0s(),c.j41(162,"option",64),c.EFF(163,"activitydate"),c.k0s(),c.j41(164,"option",65),c.EFF(165,"activityenddate"),c.k0s(),c.j41(166,"option",66),c.EFF(167,"activityparticipant"),c.k0s(),c.j41(168,"option",67),c.EFF(169,"activitystatus"),c.k0s()()()()()()()()}if(2&e){const e=c.XpG();c.R7$(3),c.Lme(": ",e.fieldDetails.displaypath,"->",e.fieldDetails.fieldname,""),c.R7$(9),c.R50("ngModel",e.fieldDetails.indexfieldname),c.R7$(4),c.R50("ngModel",e.fieldDetails.name),c.R7$(4),c.Y8G("helpText",e.language.getLabel("HLP_FTS_DATATYPE")),c.R7$(3),c.R50("ngModel",e.fieldDetails.indextype),c.R7$(),c.Y8G("ngValue",null),c.R7$(13),c.Y8G("helpText",e.language.getLabel("HLP_FTS_BOOST")),c.R7$(2),c.R50("ngModel",e.fieldDetails.boost),c.R7$(3),c.R50("ngModel",e.fieldDetails.enablesort),c.R7$(2),c.Y8G("helpText",e.language.getLabel("HLP_FTS_ENABLE_SORT")),c.R7$(3),c.R50("ngModel",e.fieldDetails.search),c.R7$(2),c.Y8G("helpText",e.language.getLabel("HLP_FTS_ENABLE_SEARCH")),c.R7$(5),c.Y8G("helpText",e.language.getLabel("HLP_FTS_FIELD_FUNCTION")),c.R7$(2),c.R50("ngModel",e.fieldDetails.function),c.R7$(8),c.Y8G("helpText",e.language.getLabel("HLP_FTS_AGGREGATE")),c.R7$(3),c.R50("ngModel",e.fieldDetails.aggregate),c.R7$(),c.Y8G("ngValue",null),c.R7$(13),c.vxM(81,e.fieldDetails.aggregate?81:-1),c.R7$(),c.vxM(82,"double"==e.fieldDetails.indextype?82:-1),c.R7$(9),c.Y8G("helpText",e.language.getLabel("HLP_FTS_ANALYZER")+"\n"+e.language.getLabel("HLP_FTS_ANALYZER_STANDARD")+"\n"+e.language.getLabel("HLP_FTS_ANALYZER_NGRAM")+"\n"+e.language.getLabel("HLP_FTS_ANALYZER_HTML")+"\n"+e.language.getLabel("HLP_FTS_ANALYZER_EDGENGRAM")+"\n"+e.language.getLabel("HLP_FTS_ANALYZER_EMAIL")),c.R7$(3),c.R50("ngModel",e.fieldDetails.analyzer),c.R7$(3),c.Y8G("ngForOf",e.ftsconfiguration.analyzers),c.R7$(4),c.Y8G("helpText",e.language.getLabel("HLP_FTS_SEARCHANALYZER")+"\n"+e.language.getLabel("HLP_FTS_ANALYZER_STANDARD")+"\n"+e.language.getLabel("HLP_FTS_ANALYZER_NGRAM")+"\n"+e.language.getLabel("HLP_FTS_ANALYZER_HTML")+"\n"+e.language.getLabel("HLP_FTS_ANALYZER_EDGENGRAM")+"\n"+e.language.getLabel("HLP_FTS_ANALYZER_EMAIL")),c.R7$(3),c.R50("ngModel",e.fieldDetails.search_analyzer),c.R7$(3),c.Y8G("ngForOf",e.ftsconfiguration.analyzers),c.R7$(7),c.R50("ngModel",e.fieldDetails.duplicatecheck),c.R7$(2),c.Y8G("helpText",e.language.getLabel("HLP_FTS_DUPLICATE_CHECK")),c.R7$(5),c.Y8G("helpText",e.language.getLabel("HLP_FTS_DUPLICATE_QUERY")),c.R7$(3),c.Y8G("disabled",!e.fieldDetails.duplicatecheck),c.R50("ngModel",e.fieldDetails.duplicatequery),c.R7$(10),c.Y8G("helpText",e.language.getLabel("HLP_FTS_DUPLICATE_FUZZINESS")),c.R7$(2),c.Y8G("disabled",!e.fieldDetails.duplicatecheck),c.R50("ngModel",e.fieldDetails.duplicatefuzz),c.R7$(5),c.R50("ngModel",e.fieldDetails.email),c.R7$(2),c.Y8G("helpText",e.language.getLabel("HLP_FTS_ENABLE_EMAIL")),c.R7$(2),c.R50("ngModel",e.fieldDetails.phonesearch),c.R7$(2),c.Y8G("helpText",e.language.getLabel("HLP_FTS_ENABLE_PHONE")),c.R7$(10),c.R50("ngModel",e.fieldDetails.activitytype)}}function is(e,t){1&e&&(c.j41(0,"div",92),c.EFF(1,"select a field"),c.k0s())}let ns=(()=>{class AdministrationFTSManagerFields{constructor(e,t,s,i,n){this.metadata=e,this.language=t,this.modal=s,this.injector=i,this.ftsconfiguration=n,this.currentfield="",this.fieldDetails={},this.displayAddFieldModal=!1,this.ftsconfiguration.module$.subscribe((e=>{this.currentfield=""}))}get moduleFtsFields(){return this.ftsconfiguration.moduleFtsFields}get aggregateaddparams(){return this.fieldDetails.aggregateaddparams?atob(this.fieldDetails.aggregateaddparams):""}set aggregateaddparams(e){this.fieldDetails.aggregateaddparams=e?btoa(e):""}selectField(e){this.currentfield=e,this.fieldDetails=this.ftsconfiguration.getFieldDetails(e)}showAddFields(){this.modal.openModal("AdministrationFTSManagerFieldsAdd",!0,this.injector)}closeAddFields(e){this.displayAddFieldModal=!1}static#e=this.ɵfac=function(e){return new(e||AdministrationFTSManagerFields)(c.rXU(p.yu),c.rXU(h.B),c.rXU(P.y),c.rXU(c.zZn),c.rXU(Nt))};static#t=this.ɵcmp=c.VBU({type:AdministrationFTSManagerFields,selectors:[["administration-ftsmanager-fields"]],decls:10,vars:2,consts:[[1,"slds-grid"],["system-to-bottom","",1,"slds-size--1-of-2","slds-grid","slds-grid--vertical"],[1,"slds-grow","slds-scrollable--y",2,"height","100%"],[2,"display","block","height","100%",3,"selectedField","selectListField"],[1,"slds-p-around--small","slds-text-align--center"],[1,"slds-button","slds-button--neutral",3,"click"],["label","LBL_ADD_FIELD"],["system-to-bottom","",1,"slds-size--1-of-2","slds-border--left","slds-p-left--x-small"],[1,"slds-text-heading--small","slds-p-vertical--x-small"],["label","LBL_FIELD_DETAILS"],[1,"slds-form-element","slds-form-element_compound","slds-p-vertical--x-small"],[1,"slds-form-element__legend","slds-form-element__label"],["label","LBL_INDEX_PARAMETERS"],[1,"slds-form-element__control"],[1,"slds-form-element"],[1,"slds-form-element__label"],["label","LBL_INDEX_FIELD_NAME"],["type","text",1,"slds-input",3,"ngModel","ngModelChange"],["label","LBL_NAME"],[3,"ngModel","ngModelChange"],["label","LBL_TYPE"],[3,"helpText"],[1,"slds-select_container"],[1,"slds-select",3,"ngModel","ngModelChange"],[3,"ngValue"],["value","text"],["value","keyword"],["value","date"],["value","double"],[1,"slds-grid","slds-grid_vertical-align-center","slds-m-top--x-small"],[1,"slds-form-element","slds-size--1-of-2"],["label","LBL_BOOST"],["label","LBL_SORTABLE"],["label","LBL_SEARCH"],[1,"slds-form-element","slds-size--1-of-1"],["label","LBL_FUNCTION"],[1,"slds-form-element","slds-form-element_compound","slds-p-vertical--x-small","slds-p-right--x-small"],["label","LBL_AGGREGATE"],["value","term"],["value","range"],["value","datew"],["value","datem"],["value","dateq"],["value","datey"],["class","slds-form-element slds-form-element_compound slds-p-vertical--x-small"],["label","LBL_ANALYZER"],["value",""],[3,"value",4,"ngFor","ngForOf"],["label","LBL_SEARCH_ANALYZER"],["label","LBL_DUPLICATECHECK_SETTINGS"],["label","LBL_DUPLICATE_CHECK"],[1,"slds-grid","slds-grid_vertical-align-center"],[1,"slds-col","slds-size--1-of-2","slds-form-element"],["label","LBL_QUERY"],[1,"slds-select",3,"disabled","ngModel","ngModelChange"],["value","match_and"],["label","LBL_FUZZINESS"],["type","text",1,"slds-input",3,"disabled","ngModel","ngModelChange"],["label","LBL_EMAIL_PHONE_SETTINGS"],[1,"slds-form-element__control","slds-size--1-of-2"],["label","LBL_EMAIL_SEARCH"],["label","LBL_PHONE_SEARCH"],["label","LBL_FTS_ACTIVITY_PARAMS"],["value","activityparentid"],["value","activitydate"],["value","activityenddate"],["value","activityparticipant"],["value","activitystatus"],[1,"slds-form-element","slds-p-vertical--x-small","slds-grid"],[1,"slds-form-element__control","slds-size--1-of-3"],[3,"disabled","ngModel","ngModelChange"],["label","LBL_COLLAPSED"],["label","LBL_AGGREGATEEMPTYVALUES"],["label","LBL_SYSTEMAGGREGATE"],["class","slds-form-element",4,"ngIf"],["label","LBL_AGGREGATE_SIZE"],["label","LBL_AGGREGATE_PRIORITY"],["label","LBL_AGGREGATE_SORTBY"],["value","_count"],["value","_key"],["label","LBL_AGGREGATE_SORT"],["value","asc"],["value","desc"],["label","LBL_PARAMETERS"],[1,"slds-textarea",3,"ngModel","ngModelChange"],["label","LBL_AGGREGATE_METRICS"],[1,"slds-form-element__control","slds-size--1-of-4"],["label","LBL_SUM"],["label","LBL_AVERAGE"],["label","LBL_MAX"],["label","LBL_MIN"],[3,"value"],[1,"slds-p-around--small","slds-align--absolute-center","slds-height_full"]],template:function(e,t){1&e&&(c.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"administration-ftsmanager-fields-list",3),c.bIt("selectListField",(function(e){return t.selectField(e)})),c.k0s()(),c.j41(4,"div",4)(5,"button",5),c.bIt("click",(function(){return t.showAddFields()})),c.nrm(6,"system-label",6),c.k0s()()(),c.j41(7,"div",7),c.DNE(8,ss,170,39,"div")(9,is,2,0),c.k0s()()),2&e&&(c.R7$(3),c.Y8G("selectedField",t.currentfield),c.R7$(5),c.vxM(8,t.currentfield?8:9))},dependencies:[i.Sq,i.bT,n.xH,n.y7,n.me,n.wz,n.BC,n.vS,W.f,se.w,Ht.H,j.W,zt.N,v.b,Wt],encapsulation:2})}return AdministrationFTSManagerFields})();var ls=s(21534);function as(e,t){if(1&e&&(c.j41(0,"option",58),c.EFF(1),c.k0s()),2&e){const e=t.$implicit;c.Y8G("value",e.value),c.R7$(),c.JRh(e.text)}}let os=(()=>{class AdministrationFTSManagerDetails{constructor(e,t,s){this.metadata=e,this.language=t,this.ftsconfiguration=s}static#e=this.ɵfac=function(e){return new(e||AdministrationFTSManagerDetails)(c.rXU(p.yu),c.rXU(h.B),c.rXU(Nt))};static#t=this.ɵcmp=c.VBU({type:AdministrationFTSManagerDetails,selectors:[["administration-ftsmanager-details"]],decls:139,vars:30,consts:[["system-to-bottom","",1,"slds-p-top--x-small","slds-p-horizontal--x-small"],[1,"slds-form-element","slds-form-element_compound","slds-p-vertical--x-small"],[1,"slds-form-element__legend","slds-form-element__label"],["label","LBL_INDEX_PARAMETERS"],[1,"slds-form-element__control"],[1,"slds-form-element"],[1,"slds-form-element__label"],["label","LBL_INDEX_PRIORITY"],["type","text",1,"slds-input",3,"ngModel","ngModelChange"],["label","LBL_FTS_MULTIMATCH_TYPE"],[1,"slds-select_container"],[1,"slds-select",3,"ngModel","ngModelChange"],["value",""],["value","best_fields"],["value","most_fields"],["value","phrase"],["value","phrase_prefix"],["value","cross_fields"],[1,"slds-form-element","slds-p-vertical--x-small"],[3,"ngModel","ngModelChange"],["label","LBL_SYNCRONOUS"],["label","LBL_SEARCH_PARAMETERS"],[1,"slds-grid"],[1,"slds-form-element","slds-size--1-of-2"],["label","LBL_OPERATOR"],["value","and"],["label","LBL_AND"],["value","or"],["label","LBL_OR"],["label","LBL_SEARCH_ANALYZER"],[3,"helpText"],[3,"value",4,"ngFor","ngForOf"],[1,"slds-grid","slds-p-vertical--x-small"],["label","LBL_GLOBAL_SEARCH"],["label","LBL_EMAIL_SEARCH"],["label","LBL_PHONE_SEARCH"],["label","LBL_MENTION_SEARCH"],["label","LBL_FTS_DUPLICATE_PARAMS"],[1,"slds-form-element","slds-grid","slds-grid--vertical-align-center","slds-gutters_direct-small"],[1,"slds-col","slds-size--1-of-1","slds-grid","slds-grid--vertical-align-center"],["label","LBL_FILTER"],[1,"slds-grow",3,"ngModel","ngModelChange"],["label","LBL_FTS_GLOBALFILTER"],["label","LBL_ GLOBALFILTER"],["label","LBL_GEO_SEARCH_PARAMETERS"],["label","LBL_GEO_SEARCH"],[1,"slds-form-element__control","slds-grid"],["label","LBL_LATITUDE"],[3,"disabled","ngModel","module","ngModelChange"],["label","LBL_LONGITUDE"],["label","LBL_FTS_ACTIVITY_PARAMS"],[1,"slds-form-element__control","slds-col","slds-size--1-of-3"],["label","LBL_FTS_IN_ACTIVITIES"],[1,"slds-col","slds-size--2-of-3","slds-grid","slds-grid--vertical-align-center"],["label","LBL_FTS_IN_HISTORY"],["label","LBL_FTS_IN_ASSISTANT"],["label","LBL_FTS_IN_CALENDAR"],["label","LBL_FTS_IN_TIMELINE"],[3,"value"]],template:function(e,t){1&e&&(c.j41(0,"div",0)(1,"fieldset",1)(2,"legend",2),c.nrm(3,"system-label",3),c.k0s(),c.j41(4,"div",4)(5,"div",5)(6,"label",6),c.nrm(7,"system-label",7),c.k0s(),c.j41(8,"div",4)(9,"input",8),c.mxI("ngModelChange",(function(e){return c.DH7(t.ftsconfiguration.moduleFtsSettings.index_priority,e)||(t.ftsconfiguration.moduleFtsSettings.index_priority=e),e})),c.k0s()()(),c.j41(10,"div",5)(11,"label",6),c.nrm(12,"system-label",9),c.k0s(),c.j41(13,"div",4)(14,"div",10)(15,"select",11),c.mxI("ngModelChange",(function(e){return c.DH7(t.ftsconfiguration.moduleFtsSettings.multimatch_type,e)||(t.ftsconfiguration.moduleFtsSettings.multimatch_type=e),e})),c.j41(16,"option",12),c.EFF(17,"default"),c.k0s(),c.j41(18,"option",13),c.EFF(19,"Best Fields"),c.k0s(),c.j41(20,"option",14),c.EFF(21,"Most Fields"),c.k0s(),c.j41(22,"option",15),c.EFF(23,"Phrase"),c.k0s(),c.j41(24,"option",16),c.EFF(25,"Phrase Prefix"),c.k0s(),c.j41(26,"option",17),c.EFF(27,"Cross Fields"),c.k0s()()()()(),c.j41(28,"div",18)(29,"system-checkbox",19),c.mxI("ngModelChange",(function(e){return c.DH7(t.ftsconfiguration.moduleFtsSettings.waitfor,e)||(t.ftsconfiguration.moduleFtsSettings.waitfor=e),e})),c.nrm(30,"system-label",20),c.k0s()()()(),c.j41(31,"fieldset",1)(32,"legend",2),c.nrm(33,"system-label",21),c.k0s(),c.j41(34,"div",4)(35,"div",22)(36,"div",23)(37,"label",6),c.nrm(38,"system-label",24),c.k0s(),c.j41(39,"div",4)(40,"div",10)(41,"select",11),c.mxI("ngModelChange",(function(e){return c.DH7(t.ftsconfiguration.moduleFtsSettings.operator,e)||(t.ftsconfiguration.moduleFtsSettings.operator=e),e})),c.j41(42,"option",25),c.nrm(43,"system-label",26),c.k0s(),c.j41(44,"option",27),c.nrm(45,"system-label",28),c.k0s()()()()(),c.j41(46,"div",23)(47,"label",6),c.nrm(48,"system-label",29),c.k0s(),c.nrm(49,"system-icon-help-text",30),c.j41(50,"div",4)(51,"div",10)(52,"select",11),c.mxI("ngModelChange",(function(e){return c.DH7(t.ftsconfiguration.moduleFtsSettings.search_analyzer,e)||(t.ftsconfiguration.moduleFtsSettings.search_analyzer=e),e})),c.j41(53,"option",12),c.EFF(54,"standard"),c.k0s(),c.DNE(55,as,2,2,"option",31),c.k0s()()()()(),c.j41(56,"div",32)(57,"system-checkbox",19),c.mxI("ngModelChange",(function(e){return c.DH7(t.ftsconfiguration.moduleFtsSettings.globalsearch,e)||(t.ftsconfiguration.moduleFtsSettings.globalsearch=e),e})),c.nrm(58,"system-label",33),c.k0s(),c.j41(59,"system-checkbox",19),c.mxI("ngModelChange",(function(e){return c.DH7(t.ftsconfiguration.moduleFtsSettings.emailsearch,e)||(t.ftsconfiguration.moduleFtsSettings.emailsearch=e),e})),c.nrm(60,"system-label",34),c.k0s(),c.j41(61,"system-checkbox",19),c.mxI("ngModelChange",(function(e){return c.DH7(t.ftsconfiguration.moduleFtsSettings.phonesearch,e)||(t.ftsconfiguration.moduleFtsSettings.phonesearch=e),e})),c.nrm(62,"system-label",35),c.k0s(),c.j41(63,"system-checkbox",19),c.mxI("ngModelChange",(function(e){return c.DH7(t.ftsconfiguration.moduleFtsSettings.mentionsearch,e)||(t.ftsconfiguration.moduleFtsSettings.mentionsearch=e),e})),c.nrm(64,"system-label",36),c.k0s()()()(),c.j41(65,"fieldset",1)(66,"legend",2),c.nrm(67,"system-label",37),c.k0s(),c.j41(68,"div",4)(69,"div",38)(70,"div",39)(71,"label",6),c.nrm(72,"system-label",40),c.k0s(),c.j41(73,"system-input-module-filter",41),c.mxI("ngModelChange",(function(e){return c.DH7(t.ftsconfiguration.moduleFtsSettings.duplicatefilter,e)||(t.ftsconfiguration.moduleFtsSettings.duplicatefilter=e),e})),c.k0s()()()()(),c.j41(74,"fieldset",1)(75,"legend",2),c.nrm(76,"system-label",42),c.k0s(),c.nrm(77,"system-icon-help-text",30),c.j41(78,"div",4)(79,"div",38)(80,"div",39)(81,"label",6),c.nrm(82,"system-label",43),c.k0s(),c.j41(83,"system-input-module-filter",41),c.mxI("ngModelChange",(function(e){return c.DH7(t.ftsconfiguration.moduleFtsSettings.globalfilter,e)||(t.ftsconfiguration.moduleFtsSettings.globalfilter=e),e})),c.k0s()()()()(),c.j41(84,"fieldset",1)(85,"legend",2),c.nrm(86,"system-label",44),c.k0s(),c.j41(87,"div",4)(88,"system-checkbox",19),c.mxI("ngModelChange",(function(e){return c.DH7(t.ftsconfiguration.moduleFtsSettings.geosearch,e)||(t.ftsconfiguration.moduleFtsSettings.geosearch=e),e})),c.nrm(89,"system-label",45),c.k0s()(),c.j41(90,"div",46)(91,"div",23)(92,"label",6),c.nrm(93,"system-label",47),c.k0s(),c.j41(94,"system-input-module-field",48),c.mxI("ngModelChange",(function(e){return c.DH7(t.ftsconfiguration.moduleFtsSettings.geolat,e)||(t.ftsconfiguration.moduleFtsSettings.geolat=e),e})),c.k0s()(),c.j41(95,"div",23)(96,"label",6),c.nrm(97,"system-label",49),c.k0s(),c.j41(98,"system-input-module-field",48),c.mxI("ngModelChange",(function(e){return c.DH7(t.ftsconfiguration.moduleFtsSettings.geolng,e)||(t.ftsconfiguration.moduleFtsSettings.geolng=e),e})),c.k0s()()()(),c.j41(99,"fieldset",1)(100,"legend",2),c.nrm(101,"system-label",50),c.k0s(),c.j41(102,"div",4)(103,"div",38)(104,"div",51)(105,"system-checkbox",19),c.mxI("ngModelChange",(function(e){return c.DH7(t.ftsconfiguration.moduleFtsSettings.activitiessearch,e)||(t.ftsconfiguration.moduleFtsSettings.activitiessearch=e),e})),c.nrm(106,"system-label",52),c.k0s()(),c.j41(107,"div",53)(108,"label",6),c.nrm(109,"system-label",40),c.k0s(),c.j41(110,"system-input-module-filter",41),c.mxI("ngModelChange",(function(e){return c.DH7(t.ftsconfiguration.moduleFtsSettings.activitiesfilter,e)||(t.ftsconfiguration.moduleFtsSettings.activitiesfilter=e),e})),c.k0s()()(),c.j41(111,"div",38)(112,"div",51)(113,"system-checkbox",19),c.mxI("ngModelChange",(function(e){return c.DH7(t.ftsconfiguration.moduleFtsSettings.historysearch,e)||(t.ftsconfiguration.moduleFtsSettings.historysearch=e),e})),c.nrm(114,"system-label",54),c.k0s()(),c.j41(115,"div",53)(116,"label",6),c.nrm(117,"system-label",40),c.k0s(),c.j41(118,"system-input-module-filter",41),c.mxI("ngModelChange",(function(e){return c.DH7(t.ftsconfiguration.moduleFtsSettings.historyfilter,e)||(t.ftsconfiguration.moduleFtsSettings.historyfilter=e),e})),c.k0s()()(),c.j41(119,"div",38)(120,"div",51)(121,"system-checkbox",19),c.mxI("ngModelChange",(function(e){return c.DH7(t.ftsconfiguration.moduleFtsSettings.assistantsearch,e)||(t.ftsconfiguration.moduleFtsSettings.assistantsearch=e),e})),c.nrm(122,"system-label",55),c.k0s()(),c.j41(123,"div",53)(124,"label",6),c.nrm(125,"system-label",40),c.k0s(),c.j41(126,"system-input-module-filter",41),c.mxI("ngModelChange",(function(e){return c.DH7(t.ftsconfiguration.moduleFtsSettings.assistantfilter,e)||(t.ftsconfiguration.moduleFtsSettings.assistantfilter=e),e})),c.k0s()()(),c.j41(127,"div",38)(128,"div",51)(129,"system-checkbox",19),c.mxI("ngModelChange",(function(e){return c.DH7(t.ftsconfiguration.moduleFtsSettings.calendarsearch,e)||(t.ftsconfiguration.moduleFtsSettings.calendarsearch=e),e})),c.nrm(130,"system-label",56),c.k0s()(),c.j41(131,"div",53)(132,"label",6),c.nrm(133,"system-label",40),c.k0s(),c.j41(134,"system-input-module-filter",41),c.mxI("ngModelChange",(function(e){return c.DH7(t.ftsconfiguration.moduleFtsSettings.calendarfilter,e)||(t.ftsconfiguration.moduleFtsSettings.calendarfilter=e),e})),c.k0s()()(),c.j41(135,"div",38)(136,"div",51)(137,"system-checkbox",19),c.mxI("ngModelChange",(function(e){return c.DH7(t.ftsconfiguration.moduleFtsSettings.timelinesearch,e)||(t.ftsconfiguration.moduleFtsSettings.timelinesearch=e),e})),c.nrm(138,"system-label",57),c.k0s()()()()()()),2&e&&(c.R7$(9),c.R50("ngModel",t.ftsconfiguration.moduleFtsSettings.index_priority),c.R7$(6),c.R50("ngModel",t.ftsconfiguration.moduleFtsSettings.multimatch_type),c.R7$(14),c.R50("ngModel",t.ftsconfiguration.moduleFtsSettings.waitfor),c.R7$(12),c.R50("ngModel",t.ftsconfiguration.moduleFtsSettings.operator),c.R7$(8),c.Y8G("helpText",t.language.getLabel("HLP_FTS_SEARCHANALYZER")+"\n"+t.language.getLabel("HLP_FTS_ANALYZER_STANDARD")+"\n"+t.language.getLabel("HLP_FTS_ANALYZER_NGRAM")+"\n"+t.language.getLabel("HLP_FTS_ANALYZER_HTML")+"\n"+t.language.getLabel("HLP_FTS_ANALYZER_EDGENGRAM")+"\n"+t.language.getLabel("HLP_FTS_ANALYZER_EMAIL")),c.R7$(3),c.R50("ngModel",t.ftsconfiguration.moduleFtsSettings.search_analyzer),c.R7$(3),c.Y8G("ngForOf",t.ftsconfiguration.analyzers),c.R7$(2),c.R50("ngModel",t.ftsconfiguration.moduleFtsSettings.globalsearch),c.R7$(2),c.R50("ngModel",t.ftsconfiguration.moduleFtsSettings.emailsearch),c.R7$(2),c.R50("ngModel",t.ftsconfiguration.moduleFtsSettings.phonesearch),c.R7$(2),c.R50("ngModel",t.ftsconfiguration.moduleFtsSettings.mentionsearch),c.R7$(10),c.R50("ngModel",t.ftsconfiguration.moduleFtsSettings.duplicatefilter),c.R7$(4),c.Y8G("helpText",t.language.getLabel("HLP_FTS_GLOBALFILTER")),c.R7$(6),c.R50("ngModel",t.ftsconfiguration.moduleFtsSettings.globalfilter),c.R7$(5),c.R50("ngModel",t.ftsconfiguration.moduleFtsSettings.geosearch),c.R7$(6),c.Y8G("disabled",!t.ftsconfiguration.moduleFtsSettings.geosearch),c.R50("ngModel",t.ftsconfiguration.moduleFtsSettings.geolat),c.Y8G("module",t.ftsconfiguration.module),c.R7$(4),c.Y8G("disabled",!t.ftsconfiguration.moduleFtsSettings.geosearch),c.R50("ngModel",t.ftsconfiguration.moduleFtsSettings.geolng),c.Y8G("module",t.ftsconfiguration.module),c.R7$(7),c.R50("ngModel",t.ftsconfiguration.moduleFtsSettings.activitiessearch),c.R7$(5),c.R50("ngModel",t.ftsconfiguration.moduleFtsSettings.activitiesfilter),c.R7$(3),c.R50("ngModel",t.ftsconfiguration.moduleFtsSettings.historysearch),c.R7$(5),c.R50("ngModel",t.ftsconfiguration.moduleFtsSettings.historyfilter),c.R7$(3),c.R50("ngModel",t.ftsconfiguration.moduleFtsSettings.assistantsearch),c.R7$(5),c.R50("ngModel",t.ftsconfiguration.moduleFtsSettings.assistantfilter),c.R7$(3),c.R50("ngModel",t.ftsconfiguration.moduleFtsSettings.calendarsearch),c.R7$(5),c.R50("ngModel",t.ftsconfiguration.moduleFtsSettings.calendarfilter),c.R7$(3),c.R50("ngModel",t.ftsconfiguration.moduleFtsSettings.timelinesearch))},dependencies:[i.Sq,n.xH,n.y7,n.me,n.wz,n.BC,n.vS,W.f,ls.c,ne.e,j.W,zt.N,v.b],encapsulation:2})}return AdministrationFTSManagerDetails})();const ds=["administration-ftsmanager",""];function rs(e,t){if(1&e&&(c.j41(0,"option",19),c.EFF(1),c.k0s()),2&e){const e=t.$implicit;c.Y8G("value",e),c.R7$(),c.JRh(e)}}function cs(e,t){if(1&e){const e=c.RV6();c.j41(0,"div",9)(1,"button",12),c.bIt("click",(function(){c.eBV(e);const t=c.XpG();return c.Njj(t.save())})),c.nrm(2,"system-label",20),c.k0s(),c.j41(3,"button",12),c.bIt("click",(function(){c.eBV(e);const t=c.XpG();return c.Njj(t.resetModule())})),c.nrm(4,"system-label",21),c.k0s(),c.j41(5,"button",12),c.bIt("click",(function(){c.eBV(e);const t=c.XpG();return c.Njj(t.indexModule())})),c.nrm(6,"system-label",22),c.k0s()()}if(2&e){const e=c.XpG();c.R7$(),c.Y8G("disabled",!e.module),c.R7$(2),c.Y8G("disabled",!e.module),c.R7$(2),c.Y8G("disabled",!e.module)}}function ms(e,t){1&e&&c.nrm(0,"administration-ftsmanager-fields")}function us(e,t){1&e&&c.nrm(0,"administration-ftsmanager-details")}const gs=e=>({"slds-active":e});function hs(e,t){if(1&e){const e=c.RV6();c.j41(0,"div")(1,"ul",23)(2,"li",24),c.bIt("click",(function(){c.eBV(e);const t=c.XpG();return c.Njj(t.setActiveTab("fields"))})),c.j41(3,"a",25),c.nrm(4,"system-label",26),c.k0s()(),c.j41(5,"li",24),c.bIt("click",(function(){c.eBV(e);const t=c.XpG();return c.Njj(t.setActiveTab("details"))})),c.j41(6,"a",25),c.nrm(7,"system-label",27),c.k0s()()(),c.DNE(8,ms,1,0,"administration-ftsmanager-fields",28)(9,us,1,0,"administration-ftsmanager-details",28),c.k0s()}if(2&e){const e=c.XpG();c.R7$(2),c.Y8G("ngClass",c.eq3(4,gs,"fields"===e.activeTab)),c.R7$(3),c.Y8G("ngClass",c.eq3(6,gs,"details"===e.activeTab)),c.R7$(3),c.Y8G("ngIf","fields"===e.activeTab),c.R7$(),c.Y8G("ngIf","details"===e.activeTab)}}function bs(e,t){1&e&&(c.j41(0,"div",29),c.nrm(1,"system-label",30),c.k0s())}let ps=(()=>{class AdministrationFTSManager{constructor(e,t,s,i,n){this.metadata=e,this.language=t,this.modal=s,this.ftsconfiguration=i,this.injector=n,this.activeTab="fields"}get modules(){return this.ftsconfiguration.modules.sort()}get module(){return this.ftsconfiguration.module}set module(e){this.ftsconfiguration.setModule(e)}add(){this.modal.openModal("AdministrationFTSManagerModuleAdd",!0,this.injector).subscribe((e=>{e.instance.module$.subscribe((e=>{e&&(this.module=e)}))}))}delete(){this.modal.confirmDeleteRecord().subscribe((e=>{e&&(this.ftsconfiguration.deleteModule(this.module),this.module="")}))}setActiveTab(e){this.activeTab=e}save(){this.ftsconfiguration.save()}indexModule(){this.modal.openModal("AdministrationFtsManagerIndexModal").subscribe((e=>{e.instance.response.subscribe((e=>{e&&this.ftsconfiguration.executeAction("bulk",e)}))}))}resetModule(){this.ftsconfiguration.executeAction("reset")}static#e=this.ɵfac=function(e){return new(e||AdministrationFTSManager)(c.rXU(p.yu),c.rXU(h.B),c.rXU(P.y),c.rXU(Nt),c.rXU(c.zZn))};static#t=this.ɵcmp=c.VBU({type:AdministrationFTSManager,selectors:[["","administration-ftsmanager",""]],features:[c.Jv_([Nt])],attrs:ds,decls:20,vars:7,consts:[[1,"slds-grid","slds-form--inline","slds-p-around--small","slds-border--bottom"],[1,"slds-form-element"],[1,"slds-form-element__label"],["label","LBL_MODULE"],[1,"slds-form-element__control"],[1,"slds-select_container"],[1,"slds-select",3,"ngModel","disabled","ngModelChange"],["value",""],[3,"value",4,"ngFor","ngForOf"],["role","group",1,"slds-button-group"],["type","button",1,"slds-button","slds-button--neutral",3,"click"],["label","LBL_ADD"],["type","button",1,"slds-button","slds-button--neutral",3,"disabled","click"],["label","LBL_DELETE"],[1,"slds-form-element","slds-col--bump-left"],["class","slds-button-group","role","group",4,"ngIf"],[1,"slds-tabs--default","slds-p-top--xx-small"],[4,"ngIf","ngIfElse"],["selectmodule",""],[3,"value"],["label","LBL_SAVE"],["label","LBL_RESET"],["label","LBL_INDEX"],["role","tablist",1,"slds-tabs--default__nav"],["role","presentation",1,"slds-tabs--default__item","slds-text-title--caps",3,"ngClass","click"],["href","javascript:void(0);","role","tab","aria-selected","false",1,"slds-tabs--default__link"],["label","LBL_FIELDS"],["label","LBL_INDEX_PARAMETERS"],[4,"ngIf"],["system-to-bottom","",1,"slds-p-around--small","slds-align--absolute-center"],["label","LBL_SELECT_A_MODULE"]],template:function(e,t){if(1&e&&(c.j41(0,"div",0)(1,"div",1)(2,"label",2),c.nrm(3,"system-label",3),c.k0s(),c.j41(4,"div",4)(5,"div",5)(6,"select",6),c.mxI("ngModelChange",(function(e){return c.DH7(t.module,e)||(t.module=e),e})),c.nrm(7,"option",7),c.DNE(8,rs,2,2,"option",8),c.k0s()()()(),c.j41(9,"div",9)(10,"button",10),c.bIt("click",(function(){return t.add()})),c.nrm(11,"system-label",11),c.k0s(),c.j41(12,"button",12),c.bIt("click",(function(){return t.delete()})),c.nrm(13,"system-label",13),c.k0s()(),c.j41(14,"div",14),c.DNE(15,cs,7,3,"div",15),c.k0s()(),c.j41(16,"div",16),c.DNE(17,hs,10,8,"div",17)(18,bs,2,0,"ng-template",null,18,c.C5r),c.k0s()),2&e){const e=c.sdS(19);c.R7$(6),c.R50("ngModel",t.module),c.Y8G("disabled",0==t.modules.length),c.R7$(2),c.Y8G("ngForOf",t.modules),c.R7$(4),c.Y8G("disabled",!t.module),c.R7$(3),c.Y8G("ngIf",!t.ftsconfiguration.indexing),c.R7$(2),c.Y8G("ngIf",t.module)("ngIfElse",e)}},dependencies:[i.YU,i.Sq,i.bT,n.xH,n.y7,n.wz,n.BC,n.vS,j.W,v.b,ns,os],encapsulation:2})}return AdministrationFTSManager})();var fs=s(83524);function ys(e,t){if(1&e&&(c.j41(0,"option",13),c.EFF(1),c.k0s()),2&e){const e=t.$implicit,s=c.XpG();c.Y8G("value",e),c.R7$(),c.Lme("",e," (",s.language.getModuleName(e),")")}}let _s=(()=>{class AdministrationFTSManagerModuleAdd{constructor(e,t,s){this.metadata=e,this.language=t,this.ftsconfiguration=s,this.modules=[],this.module="",this.module$=new c.bkB}ngOnInit(){let e=this.ftsconfiguration.modules,t=this.metadata.getModules();for(let s of t)-1==e.indexOf(s)&&this.modules.push(s);this.modules.sort()}add(){this.module$.emit(this.module),this.self.destroy()}close(){this.module$.emit(!1),this.self.destroy()}static#e=this.ɵfac=function(e){return new(e||AdministrationFTSManagerModuleAdd)(c.rXU(p.yu),c.rXU(h.B),c.rXU(Nt))};static#t=this.ɵcmp=c.VBU({type:AdministrationFTSManagerModuleAdd,selectors:[["ng-component"]],decls:16,vars:2,consts:[[3,"close"],["label","LBL_ADD_MODULE"],[1,"slds-form-element"],[1,"slds-form-element__label"],["label","LBL_MODULE"],[1,"slds-form-element__control"],[1,"slds-select_container"],[1,"slds-select",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[1,"slds-button","slds-button--neutral",3,"click"],["label","LBL_CANCEL"],[1,"slds-button","slds-button--brand",3,"click"],["label","LBL_ADD"],[3,"value"]],template:function(e,t){1&e&&(c.j41(0,"system-modal")(1,"system-modal-header",0),c.bIt("close",(function(){return t.close()})),c.nrm(2,"system-label",1),c.k0s(),c.j41(3,"system-modal-content")(4,"div",2)(5,"label",3),c.nrm(6,"system-label",4),c.k0s(),c.j41(7,"div",5)(8,"div",6)(9,"select",7),c.mxI("ngModelChange",(function(e){return c.DH7(t.module,e)||(t.module=e),e})),c.DNE(10,ys,2,3,"option",8),c.k0s()()()()(),c.j41(11,"system-modal-footer")(12,"button",9),c.bIt("click",(function(){return t.close()})),c.nrm(13,"system-label",10),c.k0s(),c.j41(14,"button",11),c.bIt("click",(function(){return t.add()})),c.nrm(15,"system-label",12),c.k0s()()()),2&e&&(c.R7$(9),c.R50("ngModel",t.module),c.R7$(),c.Y8G("ngForOf",t.modules))},dependencies:[i.Sq,n.xH,n.y7,n.wz,n.BC,n.vS,j.W,ot.D,dt.I,rt.Q,fs.C],encapsulation:2})}return AdministrationFTSManagerModuleAdd})();var vs=s(43262);function ks(e,t){if(1&e&&(c.j41(0,"tr",25)(1,"td",26),c.nrm(2,"system-utility-icon",27),c.k0s(),c.j41(3,"td",28)(4,"div",15),c.EFF(5),c.k0s()(),c.j41(6,"td")(7,"div",15),c.nrm(8,"system-label",29),c.k0s()()()),2&e){const e=t.$implicit;c.Y8G("cdkDragData",e),c.R7$(5),c.JRh(e.name),c.R7$(3),c.Y8G("label",e.label)}}const Rs=e=>[e];let Ls=(()=>{class AdministrationFTSManagerFieldsAdd{constructor(e,t,s,i){this.metadata=e,this.language=t,this.ftsconfiguration=s,this.backend=i,this.links=[],this.self={},this.fields=[],this.nodefields=[],this.path=[],this.nodePath=""}get filteredNodeFields(){return this.filterKey?this.nodefields.filter((e=>e.name.toLowerCase().includes(this.filterKey.toLowerCase())||e.label&&e.label.toLowerCase().includes(this.filterKey.toLowerCase()))):this.nodefields}get fieldsDropList(){return this.ftsconfiguration.fieldsDropList||""}close(){this.self.destroy()}itemSelected(e){window.setTimeout((()=>this.nodePath=e.path)),this.getModuleFields(e.module)}getModuleFields(e){this.nodefields=[],this.backend.getRequest("dictionary/browser/"+e+"/fields").subscribe((e=>{this.nodefields=e}))}dropExited(e){let t=document.createElement("tr"),s=document.createElement("td");s.colSpan=10,s.innerHTML="&nbsp;",s.style.background="#fff",t.appendChild(s),this.dragPlaceHolderNode=t;let i=e.container.data.findIndex((t=>t.id==e.item.data.id));i>-1&&e.container.element.nativeElement.insertBefore(t,e.container.element.nativeElement.children[i])}dropEntered(e){this.removePlaceHolderElement(e.container.element.nativeElement)}removePlaceHolderElement(e){this.dragPlaceHolderNode&&(e.removeChild(this.dragPlaceHolderNode),this.dragPlaceHolderNode=void 0)}trackByFn(e,t){return t.id}static#e=this.ɵfac=function(e){return new(e||AdministrationFTSManagerFieldsAdd)(c.rXU(p.yu),c.rXU(h.B),c.rXU(Nt),c.rXU(u.H))};static#t=this.ɵcmp=c.VBU({type:AdministrationFTSManagerFieldsAdd,selectors:[["administration-ftsmanager-fields-add"]],decls:30,vars:13,consts:[["size","large"],[3,"close"],["margin","none",3,"grow"],[1,"slds-grid","administration-fts-manager-field-add-modal",2,"height","100%"],[1,"slds-size--1-of-3","slds-grid--vertical",2,"height","100%"],[1,"slds-scrollable--y","slds-border--bottom",2,"height","50%"],[3,"module","itemSelected"],[1,"slds-scrollable",2,"height","50%"],["role","none",1,"slds-combobox__form-element","slds-input-has-icon","slds-input-has-icon_left"],["icon","search","addclasses","slds-input__icon slds-input__icon--left"],["type","search",1,"slds-input","slds-combobox__input",3,"placeholder","ngModel","ngModelChange"],[1,"slds-table","slds-table_cell-buffer","slds-table_bordered"],[1,"slds-line-height_reset"],[1,"slds-cell-shrink"],["scope","col"],[1,"slds-truncate"],["label","LBL_FIELD"],["label","LBL_NAME"],["cdkDropList","","cdkDropListSortingDisabled","",3,"cdkDropListData","cdkDropListConnectedTo","cdkDropListExited","cdkDropListEntered"],["dragList","cdkDropList"],["cdkDrag","","cdkDragBoundary",".administration-fts-manager-field-add-modal","class","slds-hint-parent slds-drag--preview",3,"cdkDragData",4,"ngFor","ngForOf","ngForTrackBy"],[1,"slds-size--2-of-3",2,"height","100%"],[1,"slds-scrollable--y",2,"display","block","height","100%",3,"dragPlaceHolderNode","nodePath","dragList"],[1,"slds-button","slds-button--brand",3,"click"],["label","LBL_OK"],["cdkDrag","","cdkDragBoundary",".administration-fts-manager-field-add-modal",1,"slds-hint-parent","slds-drag--preview",3,"cdkDragData"],[1,"slds-p-around--none","slds-cell-shrink"],["cdkDragHandle","","icon","drag_and_drop","size","x-small",1,"slds-p-horizontal--x-small",2,"cursor","move"],["data-label","Account Name"],[3,"label"]],template:function(e,t){if(1&e&&(c.j41(0,"system-modal",0)(1,"system-modal-header",1),c.bIt("close",(function(){return t.close()})),c.EFF(2,"Add Field"),c.k0s(),c.j41(3,"system-modal-content",2)(4,"div",3)(5,"div",4)(6,"div",5)(7,"system-module-tree",6),c.bIt("itemSelected",(function(e){return t.itemSelected(e)})),c.k0s()(),c.j41(8,"div",7)(9,"div",8),c.nrm(10,"system-utility-icon",9),c.j41(11,"input",10),c.mxI("ngModelChange",(function(e){return c.DH7(t.filterKey,e)||(t.filterKey=e),e})),c.k0s()(),c.j41(12,"table",11)(13,"thead")(14,"tr",12),c.nrm(15,"th",13),c.j41(16,"th",14)(17,"div",15),c.nrm(18,"system-label",16),c.k0s()(),c.j41(19,"th",14)(20,"div",15),c.nrm(21,"system-label",17),c.k0s()()()(),c.j41(22,"tbody",18,19),c.bIt("cdkDropListExited",(function(e){return t.dropExited(e)}))("cdkDropListEntered",(function(e){return t.dropEntered(e)})),c.DNE(24,ks,9,3,"tr",20),c.k0s()()()(),c.j41(25,"div",21),c.nrm(26,"administration-ftsmanager-fields-list",22),c.k0s()()(),c.j41(27,"system-modal-footer")(28,"button",23),c.bIt("click",(function(){return t.close()})),c.nrm(29,"system-label",24),c.k0s()()()),2&e){const e=c.sdS(23);c.R7$(3),c.Y8G("grow",!0),c.R7$(4),c.Y8G("module",t.ftsconfiguration.module),c.R7$(4),c.Y8G("placeholder",t.language.getLabel("LBL_SEARCH")),c.R50("ngModel",t.filterKey),c.R7$(11),c.Y8G("cdkDropListData",t.nodefields)("cdkDropListConnectedTo",c.eq3(11,Rs,t.fieldsDropList)),c.R7$(2),c.Y8G("ngForOf",t.filteredNodeFields)("ngForTrackBy",t.trackByFn),c.R7$(2),c.Y8G("dragPlaceHolderNode",t.dragPlaceHolderNode)("nodePath",t.nodePath)("dragList",e)}},dependencies:[i.Sq,n.me,n.BC,n.vS,j.W,ot.D,dt.I,rt.Q,fs.C,F.B,vs.I,l.O7,l.T1,l.Fb,Wt],encapsulation:2})}return AdministrationFTSManagerFieldsAdd})();function Es(e,t){if(1&e&&(c.j41(0,"tr")(1,"td")(2,"div",4),c.EFF(3),c.k0s()(),c.j41(4,"td")(5,"div",4),c.EFF(6),c.k0s()(),c.j41(7,"td")(8,"div",4),c.EFF(9),c.k0s()(),c.j41(10,"td")(11,"div",4),c.EFF(12),c.k0s()(),c.j41(13,"td")(14,"div",4),c.EFF(15),c.k0s()()()),2&e){const e=t.$implicit;c.R7$(3),c.JRh(e.name),c.R7$(3),c.JRh(e.size),c.R7$(3),c.JRh(e.documents),c.R7$(3),c.JRh(e.stored),c.R7$(3),c.JRh(e.unindexed)}}let js=(()=>{class AdministrationFTSStats{constructor(e,t,s){this.metadata=e,this.language=t,this.backend=s,this.stats={},this.indices=[],this.backend.getRequest("admin/elastic/stats").subscribe((e=>{this.stats=e;for(let t in e.indices)this.indices.push({name:t,size:e.indices[t].total.store.size_in_bytes,documents:e.indices[t].total.docs.count,stored:e.indexed[t].count,unindexed:e.indexed[t].unindexed});this.indices.sort(((e,t)=>e.name>t.name?1:-1))}))}static#e=this.ɵfac=function(e){return new(e||AdministrationFTSStats)(c.rXU(p.yu),c.rXU(h.B),c.rXU(u.H))};static#t=this.ɵcmp=c.VBU({type:AdministrationFTSStats,selectors:[["ng-component"]],decls:22,vars:1,consts:[[1,"slds-text-heading_medium","slds-p-around--small"],[1,"slds-table","slds-table_bordered","slds-table_cell-buffer"],[1,"slds-text-title_caps"],["scope","col"],[1,"slds-truncate"],[4,"ngFor","ngForOf"]],template:function(e,t){1&e&&(c.j41(0,"h2",0),c.EFF(1,"FTS Stats"),c.k0s(),c.j41(2,"table",1)(3,"thead")(4,"tr",2)(5,"th",3)(6,"div",4),c.EFF(7,"Name"),c.k0s()(),c.j41(8,"th",3)(9,"div",4),c.EFF(10,"Size"),c.k0s()(),c.j41(11,"th",3)(12,"div",4),c.EFF(13,"Documents"),c.k0s()(),c.j41(14,"th",3)(15,"div",4),c.EFF(16,"stored"),c.k0s()(),c.j41(17,"th",3)(18,"div",4),c.EFF(19,"unindexed"),c.k0s()()()(),c.j41(20,"tbody"),c.DNE(21,Es,16,5,"tr",5),c.k0s()()),2&e&&(c.R7$(21),c.Y8G("ngForOf",t.indices))},dependencies:[i.Sq],encapsulation:2})}return AdministrationFTSStats})();var Fs=s(66589);let Ms=(()=>{class AdministrationFtsManagerIndexModal{constructor(e){this.language=e,this.settings={},this.self={},this.responseSubject=new U.B,this.response=this.responseSubject.asObservable(),this.settings.bulkAmount=-1}cancel(){this.responseSubject.next(!1),this.responseSubject.complete(),this.self.destroy()}start(){this.responseSubject.next(this.settings),this.responseSubject.complete(),this.self.destroy()}static#e=this.ɵfac=function(e){return new(e||AdministrationFtsManagerIndexModal)(c.rXU(h.B))};static#t=this.ɵcmp=c.VBU({type:AdministrationFtsManagerIndexModal,selectors:[["ng-component"]],decls:27,vars:5,consts:[[3,"close"],["label","LBL_INDEX"],[1,"slds-p-bottom--xx-small"],["label","LBL_RESET_INDEX_DATE","length","long"],[1,"slds-m-bottom--medium"],[3,"ngModel","ngModelChange"],["label","LBL_RESET_INDEX_DATE"],["label","LBL_BULK_INDEX"],["name","ftsmanagerbulk","value","0",2,"display","block",3,"ngModel","ngModelChange"],["label","LBL_NONE"],["name","ftsmanagerbulk","value","100",2,"display","block",3,"ngModel","ngModelChange"],["label","LBL_RECORDS"],["name","ftsmanagerbulk","value","1000",2,"display","block",3,"ngModel","ngModelChange"],["name","ftsmanagerbulk","value","-1",2,"display","block",3,"ngModel","ngModelChange"],["label","LBL_SYSTEM_DEFAULT"],["type","button",1,"slds-button","slds-button--neutral",3,"click"],["label","LBL_CANCEL"],["type","button",1,"slds-button","slds-button--brand",3,"click"],["label","LBL_START"]],template:function(e,t){1&e&&(c.j41(0,"system-modal")(1,"system-modal-header",0),c.bIt("close",(function(){return t.cancel()})),c.nrm(2,"system-label",1),c.k0s(),c.j41(3,"system-modal-content")(4,"div",2),c.nrm(5,"system-label",3),c.k0s(),c.j41(6,"div",4)(7,"system-checkbox",5),c.mxI("ngModelChange",(function(e){return c.DH7(t.settings.resetIndexDates,e)||(t.settings.resetIndexDates=e),e})),c.nrm(8,"system-label",6),c.k0s()(),c.j41(9,"div",2),c.nrm(10,"system-label",7),c.k0s(),c.j41(11,"div")(12,"system-input-radio",8),c.bIt("ngModelChange",(function(){return t.settings.bulkAmount=0})),c.nrm(13,"system-label",9),c.k0s(),c.j41(14,"system-input-radio",10),c.bIt("ngModelChange",(function(){return t.settings.bulkAmount=100})),c.EFF(15," 100 "),c.nrm(16,"system-label",11),c.k0s(),c.j41(17,"system-input-radio",12),c.bIt("ngModelChange",(function(){return t.settings.bulkAmount=1e3})),c.EFF(18," 1000 "),c.nrm(19,"system-label",11),c.k0s(),c.j41(20,"system-input-radio",13),c.bIt("ngModelChange",(function(){return t.settings.bulkAmount=-1})),c.nrm(21,"system-label",14),c.k0s()()(),c.j41(22,"system-modal-footer")(23,"button",15),c.bIt("click",(function(){return t.cancel()})),c.nrm(24,"system-label",16),c.k0s(),c.j41(25,"button",17),c.bIt("click",(function(){return t.start()})),c.nrm(26,"system-label",18),c.k0s()()()),2&e&&(c.R7$(7),c.R50("ngModel",t.settings.resetIndexDates),c.R7$(5),c.Y8G("ngModel",t.settings.bulkAmount),c.R7$(2),c.Y8G("ngModel",t.settings.bulkAmount),c.R7$(3),c.Y8G("ngModel",t.settings.bulkAmount),c.R7$(3),c.Y8G("ngModel",t.settings.bulkAmount))},dependencies:[n.BC,n.vS,W.f,Fs.J,j.W,ot.D,dt.I,rt.Q,fs.C],encapsulation:2})}return AdministrationFtsManagerIndexModal})();const xs=["administration-card-item",""];let Is=(()=>{class AdministrationHomeScreenCardItem{constructor(e,t,s,i,n){this.router=e,this.metadata=t,this.language=s,this.administration=i,this.navigationtab=n,this.adminNavigationItem={},this.adminNavigationBlock=""}openContent(){let e=this.administration.getItemLabel(this.adminNavigationItem.id);this.navigationtab.setTabInfo({displayname:this.language.getLabel(e||"LBL_ADMINISTRATION"),displayicon:"settings"}),this.administration.navigateto(this.adminNavigationItem.id)}get icon(){return this.adminNavigationItem.icon?this.adminNavigationItem.icon:"empty"}static#e=this.ɵfac=function(e){return new(e||AdministrationHomeScreenCardItem)(c.rXU(w.Ix),c.rXU(p.yu),c.rXU(h.B),c.rXU(b),c.rXU(y._))};static#t=this.ɵcmp=c.VBU({type:AdministrationHomeScreenCardItem,selectors:[["","administration-card-item",""]],inputs:{adminNavigationItem:"adminNavigationItem",adminNavigationBlock:"adminNavigationBlock"},attrs:xs,decls:11,vars:3,consts:[["href","javascript:void(0);",1,"slds-text-link_reset",3,"click"],[1,"slds-tile","slds-media","slds-card__tile","slds-hint-parent"],[1,"slds-media__figure"],["size","large",3,"icon"],[1,"slds-media__body"],[1,"slds-grid","slds-grid_align-spread"],[1,"slds-tile__title","slds-text-heading_small"],[3,"label"],[1,"slds-text-body_small"],["length","long",3,"label"]],template:function(e,t){1&e&&(c.j41(0,"a",0),c.bIt("click",(function(){return t.openContent()})),c.j41(1,"article",1)(2,"div",2),c.nrm(3,"system-icon",3),c.k0s(),c.j41(4,"div",4)(5,"div",5)(6,"h3",6)(7,"p"),c.nrm(8,"system-label",7),c.k0s(),c.j41(9,"p",8),c.nrm(10,"system-label",9),c.k0s()()()()()()),2&e&&(c.R7$(3),c.Y8G("icon",t.icon),c.R7$(5),c.Y8G("label",t.adminNavigationItem.admin_label),c.R7$(2),c.Y8G("label",t.adminNavigationItem.admin_label))},dependencies:[E.J,j.W],encapsulation:2})}return AdministrationHomeScreenCardItem})();function Gs(e,t){if(1&e&&c.nrm(0,"li",13),2&e){const e=t.$implicit;c.Y8G("adminNavigationItem",e)}}let As=(()=>{class AdministrationHomeScreenCard{constructor(e,t,s,i){this.router=e,this.metadata=t,this.language=s,this.administration=i}trackbyfn(e,t){return t.id}static#e=this.ɵfac=function(e){return new(e||AdministrationHomeScreenCard)(c.rXU(w.Ix),c.rXU(p.yu),c.rXU(h.B),c.rXU(b))};static#t=this.ɵcmp=c.VBU({type:AdministrationHomeScreenCard,selectors:[["administration-card"]],inputs:{adminNavigationBlock:"adminNavigationBlock"},decls:13,vars:4,consts:[[1,"slds-p-around--medium"],[1,"slds-card","slds-p-around--small"],[1,"slds-card__header","slds-grid"],[1,"slds-media","slds-media_center","slds-has-flexi-truncate"],[1,"slds-media__body"],[1,"slds-card__header-title","slds-text-heading_medium","slds-grid--vertical"],[1,"slds-card__header-link","slds-truncate"],[3,"label"],[1,"slds-text-body_small","slds-p-top_small"],["length","long",3,"label"],[1,"slds-card__body","slds-card__body_inner"],[1,"slds-grid","slds-wrap","slds-grid_pull-padded"],["class","slds-p-horizontal_small slds-size_1-of-1 slds-medium-size_1-of-3","administration-card-item","",3,"adminNavigationItem",4,"ngFor","ngForOf","ngForTrackBy"],["administration-card-item","",1,"slds-p-horizontal_small","slds-size_1-of-1","slds-medium-size_1-of-3",3,"adminNavigationItem"]],template:function(e,t){1&e&&(c.j41(0,"div",0)(1,"article",1)(2,"div",2)(3,"header",3)(4,"div",4)(5,"h2",5)(6,"p",6),c.nrm(7,"system-label",7),c.k0s(),c.j41(8,"p",8),c.nrm(9,"system-label",9),c.k0s()()()()(),c.j41(10,"div",10)(11,"ul",11),c.DNE(12,Gs,1,1,"li",12),c.k0s()()()()),2&e&&(c.R7$(7),c.Y8G("label",t.adminNavigationBlock.label),c.R7$(2),c.Y8G("label",t.adminNavigationBlock.label),c.R7$(3),c.Y8G("ngForOf",t.adminNavigationBlock.groupcomponents)("ngForTrackBy",t.trackbyfn))},dependencies:[i.Sq,j.W,Is],encapsulation:2})}return AdministrationHomeScreenCard})();function Ss(e,t){if(1&e&&c.nrm(0,"administration-card",1),2&e){const e=t.$implicit;c.Y8G("adminNavigationBlock",e)}}let Cs=(()=>{class AdministrationHomeScreen{constructor(e,t,s,i){this.router=e,this.metadata=t,this.language=s,this.administration=i}trackbyfn(e,t){return t.id}static#e=this.ɵfac=function(e){return new(e||AdministrationHomeScreen)(c.rXU(w.Ix),c.rXU(p.yu),c.rXU(h.B),c.rXU(b))};static#t=this.ɵcmp=c.VBU({type:AdministrationHomeScreen,selectors:[["ng-component"]],decls:1,vars:2,consts:[[3,"adminNavigationBlock",4,"ngFor","ngForOf","ngForTrackBy"],[3,"adminNavigationBlock"]],template:function(e,t){1&e&&c.DNE(0,Ss,1,1,"administration-card",0),2&e&&c.Y8G("ngForOf",t.administration.navigationGroups)("ngForTrackBy",t.trackbyfn)},dependencies:[i.Sq,As],encapsulation:2})}return AdministrationHomeScreen})();var Ds=s(48717);function Bs(e,t){if(1&e&&(c.qex(0),c.nrm(1,"system-display-number",12),c.EFF(2," / "),c.nrm(3,"system-display-number",12),c.bVm()),2&e){const e=c.XpG().$implicit,t=c.XpG(2);c.R7$(),c.Y8G("number",t.ftsDocumentCount(e.name,"primaries")),c.R7$(2),c.Y8G("number",t.ftsDocumentCount(e.name,"total"))}}function $s(e,t){if(1&e&&(c.qex(0),c.EFF(1),c.bVm()),2&e){const e=c.XpG().$implicit,t=c.XpG(2);c.R7$(),c.Lme("",t.ftsIndexSize(e.name,"primaries")," / ",t.ftsIndexSize(e.name,"total"),"")}}function Ns(e,t){if(1&e&&(c.j41(0,"tr")(1,"td")(2,"div",10),c.EFF(3),c.k0s()(),c.j41(4,"td")(5,"div",11),c.nrm(6,"system-display-number",12),c.k0s()(),c.j41(7,"td")(8,"div",10),c.EFF(9),c.k0s()(),c.j41(10,"td")(11,"div",11),c.DNE(12,Bs,4,2,"ng-container",21),c.k0s()(),c.j41(13,"td")(14,"div",10),c.DNE(15,$s,2,2,"ng-container",21),c.k0s()()()),2&e){const e=t.$implicit,s=c.XpG(2);c.R7$(3),c.JRh(e.name),c.R7$(3),c.Y8G("number",e.records),c.R7$(3),c.JRh(s.humanReadableSize(e.size)),c.R7$(3),c.Y8G("ngIf",s.ftsDocumentCount(e.name,"primaries")),c.R7$(3),c.Y8G("ngIf",s.ftsIndexSize(e.name,"primaries"))}}function Ts(e,t){if(1&e){const e=c.RV6();c.qex(0),c.j41(1,"div",2)(2,"h2",3),c.EFF(3,"System and Storage Statistics Summary"),c.k0s(),c.j41(4,"button",4),c.bIt("click",(function(){c.eBV(e);const t=c.XpG();return c.Njj(t.refresh())})),c.nrm(5,"system-button-icon",5),c.k0s()(),c.j41(6,"table",6)(7,"thead")(8,"tr",7)(9,"th",8),c.EFF(10," Object "),c.k0s(),c.j41(11,"th",9),c.EFF(12," Records "),c.k0s(),c.j41(13,"th",8),c.EFF(14," Size "),c.k0s()()(),c.j41(15,"tbody")(16,"tr")(17,"td")(18,"div",10),c.EFF(19,"Database"),c.k0s()(),c.j41(20,"td")(21,"div",11),c.nrm(22,"system-display-number",12),c.k0s()(),c.j41(23,"td")(24,"div",10),c.EFF(25),c.k0s()()(),c.j41(26,"tr")(27,"td")(28,"div",10),c.EFF(29,"Elasticsearch"),c.k0s()(),c.j41(30,"td")(31,"div",11),c.nrm(32,"system-display-number",12),c.EFF(33," / "),c.nrm(34,"system-display-number",12),c.k0s()(),c.j41(35,"td")(36,"div",10),c.EFF(37),c.k0s()()(),c.j41(38,"tr")(39,"td")(40,"div",10),c.EFF(41,"Uploadfiles"),c.k0s()(),c.j41(42,"td")(43,"div",11),c.nrm(44,"system-display-number",12),c.k0s()(),c.j41(45,"td")(46,"div",10),c.EFF(47),c.k0s()()()(),c.j41(48,"tfoot")(49,"tr",13)(50,"th")(51,"div",10),c.EFF(52,"total"),c.k0s()(),c.j41(53,"th"),c.nrm(54,"div",10),c.k0s(),c.j41(55,"th")(56,"div",10),c.EFF(57),c.k0s()()()()(),c.j41(58,"h2",14),c.EFF(59,"System and Storage Statistics Details"),c.k0s(),c.j41(60,"div",15)(61,"table",16)(62,"thead")(63,"tr",7)(64,"th",8)(65,"div",17),c.bIt("click",(function(){c.eBV(e);const t=c.XpG();return c.Njj(t.sortby("name",!1))})),c.EFF(66,"Table"),c.k0s()(),c.j41(67,"th",8)(68,"div",18),c.bIt("click",(function(){c.eBV(e);const t=c.XpG();return c.Njj(t.sortby("records"))})),c.EFF(69,"Records"),c.k0s()(),c.j41(70,"th",8)(71,"div",17),c.bIt("click",(function(){c.eBV(e);const t=c.XpG();return c.Njj(t.sortby("size"))})),c.EFF(72,"Size"),c.k0s()(),c.j41(73,"th",8)(74,"div",19),c.EFF(75,"indexed Records"),c.k0s()(),c.j41(76,"th",8)(77,"div",10),c.EFF(78,"Index Size"),c.k0s()()()(),c.j41(79,"tbody"),c.DNE(80,Ns,16,5,"tr",20),c.k0s()()(),c.bVm()}if(2&e){const e=c.XpG();c.R7$(22),c.Y8G("number",e.totaldbrecords),c.R7$(3),c.JRh(e.humanReadableSize(e.totaldbsize)),c.R7$(7),c.Y8G("number",e.totalelasticrecords("primaries")),c.R7$(2),c.Y8G("number",e.totalelasticrecords("total")),c.R7$(3),c.Lme("",e.humanReadableSize(e.totalelasticsize("primaries"))," / ",e.humanReadableSize(e.totalelasticsize("total")),""),c.R7$(7),c.Y8G("number",e.uploadcount),c.R7$(3),c.JRh(e.humanReadableSize(e.uploadsize)),c.R7$(10),c.JRh(e.humanReadableSize(e.totalsize)),c.R7$(23),c.Y8G("ngForOf",e.stats.database)}}function Xs(e,t){1&e&&(c.j41(0,"div",22),c.nrm(1,"system-spinner"),c.k0s())}let Ys=(()=>{class AdministrationSystemStats{constructor(e,t,s,i){this.metadata=e,this.language=t,this.backend=s,this.helper=i,this.loaded=!1,this.stats={},this.totaldbrecords=0,this.totaldbsize=0,this.loadStats()}loadStats(){this.loaded=!1,this.backend.getRequest("configuration/systemstats").subscribe((e=>{this.stats=e,this.calculateTotalsDB(),this.loaded=!0}))}refresh(){this.loadStats()}totalelasticrecords(e){try{return this.stats.elastic._all[e].docs.count}catch(e){return 0}}totalelasticsize(e){try{return this.stats.elastic._all[e].store.size_in_bytes}catch(e){return 0}}get uploadcount(){try{return this.stats.uploadfiles.count}catch(e){return 0}}get uploadsize(){try{return this.stats.uploadfiles.size}catch(e){return 0}}get totalsize(){return this.totaldbsize+this.totalelasticsize("total")+this.uploadsize}sortby(e,t=!0){this.stats.database.sort(((s,i)=>s[e]>i[e]?t?-1:1:t?1:-1))}calculateTotalsDB(){this.totaldbrecords=0,this.totaldbsize=0;for(let e of this.stats.database)this.totaldbrecords+=parseInt(e.records,10),this.totaldbsize+=parseInt(e.size,10)}humanReadableSize(e){return this.helper.humanFileSize(e)}ftsDocumentCount(e,t){try{return this.stats.elastic.indices[this.stats.elastic._prefix+e][t].docs.count}catch(e){return""}}ftsIndexSize(e,t){try{return this.humanReadableSize(this.stats.elastic.indices[this.stats.elastic._prefix+e][t].store.size_in_bytes)}catch(e){return""}}static#e=this.ɵfac=function(e){return new(e||AdministrationSystemStats)(c.rXU(p.yu),c.rXU(h.B),c.rXU(u.H),c.rXU(q.d))};static#t=this.ɵcmp=c.VBU({type:AdministrationSystemStats,selectors:[["ng-component"]],decls:3,vars:2,consts:[[4,"ngIf","ngIfElse"],["loading",""],[1,"slds-grid","slds-grid_vertical-align-center","slds-grid--align-spread","slds-p-around--small"],[1,"slds-text-heading_medium"],[1,"slds-button","slds-button_icon","slds-button_icon-border-filled",3,"click"],["icon","refresh"],[1,"slds-table","slds-table_bordered","slds-table_cell-buffer","slds-m-bottom--medium"],[1,"slds-text-title_caps"],["scope","col"],["scope","col",1,"slds-text-align--right","slds-p-horizontal--xx-small"],[1,"slds-truncate"],[1,"slds-truncate","slds-text-align--right"],["system-display-number-nodigits","",3,"number"],[1,"slds-theme--shade","slds-text-title_caps"],[1,"slds-p-around--small"],["system-to-bottom","",1,"slds-border--top"],[1,"slds-table","slds-table_bordered","slds-table_cell-buffer","slds-table--header-fixed"],[1,"slds-truncate",3,"click"],[1,"slds-truncate","slds-p-horizontal--xx-small","slds-text-align--right",3,"click"],[1,"slds-truncate","slds-p-horizontal--xx-small","slds-text-align--right"],[4,"ngFor","ngForOf"],[4,"ngIf"],[1,"slds-align--absolute-center","slds-height_full","slds-size--1-of-1"]],template:function(e,t){if(1&e&&c.DNE(0,Ts,81,10,"ng-container",0)(1,Xs,2,0,"ng-template",null,1,c.C5r),2&e){const e=c.sdS(2);c.Y8G("ngIf",t.loaded)("ngIfElse",e)}},dependencies:[i.Sq,i.bT,L.t,Tt.B,Ds.P,v.b],encapsulation:2})}return AdministrationSystemStats})();function ws(e,t){if(1&e){const e=c.RV6();c.j41(0,"tr")(1,"td")(2,"div",13),c.EFF(3),c.k0s()(),c.j41(4,"td")(5,"div",13),c.EFF(6),c.k0s()(),c.j41(7,"td")(8,"div",13),c.EFF(9),c.k0s()(),c.j41(10,"td")(11,"button",17),c.bIt("click",(function(){const t=c.eBV(e).$implicit,s=c.XpG(2);return c.Njj(s.getKey(t.key))})),c.nrm(12,"system-button-icon",18),c.k0s(),c.j41(13,"button",17),c.bIt("click",(function(){const t=c.eBV(e).$implicit,s=c.XpG(2);return c.Njj(s.deleteKey(t.key))})),c.nrm(14,"system-button-icon",19),c.k0s()()()}if(2&e){const e=t.$implicit;c.R7$(3),c.JRh(e.key),c.R7$(3),c.JRh(e.size),c.R7$(3),c.JRh(e.date)}}function Os(e,t){if(1&e){const e=c.RV6();c.qex(0),c.j41(1,"div",2)(2,"h2",3),c.nrm(3,"system-label",4),c.k0s(),c.j41(4,"button",5),c.bIt("click",(function(){c.eBV(e);const t=c.XpG();return c.Njj(t.reset())})),c.nrm(5,"system-label",6),c.k0s(),c.j41(6,"button",7),c.bIt("click",(function(){c.eBV(e);const t=c.XpG();return c.Njj(t.refresh())})),c.nrm(7,"system-button-icon",8),c.k0s()(),c.j41(8,"div",9)(9,"table",10)(10,"thead")(11,"tr",11)(12,"th",12)(13,"div",13),c.EFF(14,"Key"),c.k0s()(),c.j41(15,"th",12)(16,"div",14),c.EFF(17,"size"),c.k0s()(),c.j41(18,"th",12)(19,"div",14),c.EFF(20,"date"),c.k0s()(),c.nrm(21,"th",15),c.k0s()(),c.j41(22,"tbody"),c.DNE(23,ws,15,3,"tr",16),c.k0s()()(),c.bVm()}if(2&e){const e=c.XpG();c.R7$(23),c.Y8G("ngForOf",e.stats)}}function Us(e,t){1&e&&(c.j41(0,"div",20),c.nrm(1,"system-spinner"),c.k0s())}let Vs=(()=>{class AdministrationSystemCacheViewer{constructor(e,t,s,i,n){this.metadata=e,this.language=t,this.backend=s,this.modal=i,this.toast=n,this.loaded=!1,this.stats={},this.totaldbrecords=0,this.totaldbsize=0,this.loadStats()}loadStats(){this.loaded=!1,this.backend.getRequest("admin/spicecache/keys").subscribe((e=>{this.stats=e,this.loaded=!0}))}refresh(){this.loadStats()}reset(){this.modal.confirm("MSG_RESET_CACHE","MSG_RESET_CACHE").subscribe({next:e=>{if(e){let e=this.modal.await("LBL_LOADING");this.backend.deleteRequest("system/cache").subscribe((t=>{e.emit(!0),t?(this.toast.sendToast("LBL_CACHE_RESET","success"),this.stats=[]):this.toast.sendToast("LBL_ERROR","error")}))}}})}getKey(e){let t=this.modal.await("LBL_LOADING");this.backend.getRequest(`admin/spicecache/key/${e}`).subscribe({next:s=>{t.emit(!0),this.modal.openModal("AdministrationSystemCacheViewerDetails").subscribe({next:t=>{t.instance.cachedKey=e,t.instance.cachedData=s.content,t.instance.deleteitem.subscribe({next:t=>{t&&this.deleteKey(e)}})},error:()=>{t.emit(!0)}})}})}deleteKey(e){this.modal.confirm("MSG_DELETE_RECORD","MSG_DELETE_RECORD").subscribe({next:t=>{t&&this.backend.deleteRequest(`admin/spicecache/key/${e}`).subscribe({next:t=>{let s=this.stats.findIndex((t=>t.key==e));s>=0&&this.stats.splice(s,1)}})}})}static#e=this.ɵfac=function(e){return new(e||AdministrationSystemCacheViewer)(c.rXU(p.yu),c.rXU(h.B),c.rXU(u.H),c.rXU(P.y),c.rXU(z.o))};static#t=this.ɵcmp=c.VBU({type:AdministrationSystemCacheViewer,selectors:[["ng-component"]],decls:3,vars:2,consts:[[4,"ngIf","ngIfElse"],["loading",""],[1,"slds-grid","slds-grid_vertical-align-center","slds-grid--align-spread","slds-p-around--small"],[1,"slds-text-heading_medium","slds-col--bump-right"],["label","LBL_CACHE_VIEWER"],[1,"slds-button","slds-button--neutral",3,"click"],["label","LBL_RESET_CACHE"],[1,"slds-button","slds-button_icon","slds-button_icon-border-filled",3,"click"],["icon","refresh"],["system-to-bottom","",1,"slds-border--top"],[1,"slds-table","slds-table_bordered","slds-table_cell-buffer","slds-table--header-fixed"],[1,"slds-text-title_caps"],["scope","col"],[1,"slds-truncate"],[1,"slds-truncate","slds-p-horizontal--xx-small","slds-text-align--right"],["scope","col",2,"width","1rem"],[4,"ngFor","ngForOf"],[1,"slds-button","slds-button--icon",3,"click"],["icon","search"],["icon","delete"],[1,"slds-align--absolute-center","slds-height_full","slds-size--1-of-1"]],template:function(e,t){if(1&e&&c.DNE(0,Os,24,1,"ng-container",0)(1,Us,2,0,"ng-template",null,1,c.C5r),2&e){const e=c.sdS(2);c.Y8G("ngIf",t.loaded)("ngIfElse",e)}},dependencies:[i.Sq,i.bT,L.t,j.W,Ds.P,v.b],encapsulation:2})}return AdministrationSystemCacheViewer})(),Hs=(()=>{class AdministrationSystemCacheViewerDetails{constructor(){this.deleteitem=new c.bkB}get displayData(){return this.cachedData?JSON.stringify(this.cachedData,null,"\t"):""}delete(){this.deleteitem.emit(!0),this.close()}close(){this.self.destroy()}static#e=this.ɵfac=function(e){return new(e||AdministrationSystemCacheViewerDetails)};static#t=this.ɵcmp=c.VBU({type:AdministrationSystemCacheViewerDetails,selectors:[["administration-system-cacheviewer-details"]],outputs:{deleteitem:"deleteitem"},decls:11,vars:3,consts:[["size","large"],[3,"close"],[3,"grow"],[1,"slds-text-font_monospace",2,"overflow-wrap","break-word","white-space","pre-wrap"],[1,"slds-button","slds-button--neutral",3,"click"],["label","LBL_DELETE"],["label","LBL_CLOSE"]],template:function(e,t){1&e&&(c.j41(0,"system-modal",0)(1,"system-modal-header",1),c.bIt("close",(function(){return t.close()})),c.EFF(2),c.k0s(),c.j41(3,"system-modal-content",2)(4,"pre",3),c.EFF(5),c.k0s()(),c.j41(6,"system-modal-footer")(7,"button",4),c.bIt("click",(function(){return t.delete()})),c.nrm(8,"system-label",5),c.k0s(),c.j41(9,"button",4),c.bIt("click",(function(){return t.close()})),c.nrm(10,"system-label",6),c.k0s()()()),2&e&&(c.R7$(2),c.JRh(t.cachedKey),c.R7$(),c.Y8G("grow",!0),c.R7$(2),c.JRh(t.displayData))},dependencies:[j.W,ot.D,dt.I,rt.Q,fs.C],encapsulation:2})}return AdministrationSystemCacheViewerDetails})();var zs=s(21626);function Ps(e,t){if(1&e&&(c.j41(0,"tr")(1,"td")(2,"div",10),c.EFF(3),c.k0s()(),c.j41(4,"td")(5,"div",10),c.EFF(6),c.k0s()(),c.j41(7,"td")(8,"div",10),c.EFF(9),c.k0s()(),c.j41(10,"td")(11,"div",10),c.EFF(12),c.k0s()()()),2&e){const e=t.$implicit;c.R7$(3),c.JRh(e.name),c.R7$(3),c.JRh(e.date),c.R7$(3),c.JRh(e.build),c.R7$(3),c.JRh(e.release)}}function Js(e,t){if(1&e&&(c.j41(0,"tr")(1,"td")(2,"div",10),c.EFF(3),c.k0s()(),c.j41(4,"td")(5,"div",10),c.EFF(6),c.k0s()()()),2&e){const e=t.$implicit;c.R7$(3),c.JRh(e.name),c.R7$(3),c.JRh(e.version)}}function qs(e,t){if(1&e&&(c.j41(0,"div")(1,"div",5)(2,"h3"),c.EFF(3),c.k0s()(),c.j41(4,"table",7)(5,"thead")(6,"tr",8)(7,"th",18)(8,"div",10),c.nrm(9,"system-label",11),c.k0s()(),c.j41(10,"th",15)(11,"div",10),c.nrm(12,"system-label",19),c.k0s()()()(),c.j41(13,"tbody"),c.DNE(14,Js,7,2,"tr",17),c.k0s()()()),2&e){const e=t.$implicit;c.R7$(3),c.JRh(e.vendorpackage),c.R7$(11),c.Y8G("ngForOf",e.files)}}function Ws(e,t){if(1&e&&(c.qex(0),c.j41(1,"div",2)(2,"h2",3),c.EFF(3,"Libraries Versions"),c.k0s()(),c.j41(4,"div",4)(5,"div",5)(6,"h3"),c.nrm(7,"system-label",6),c.k0s()(),c.j41(8,"table",7)(9,"thead")(10,"tr",8)(11,"th",9)(12,"div",10),c.nrm(13,"system-label",11),c.k0s()(),c.j41(14,"th",12)(15,"div",10),c.nrm(16,"system-label",13),c.k0s()(),c.j41(17,"th",12)(18,"div",10),c.nrm(19,"system-label",14),c.k0s()(),c.j41(20,"th",15)(21,"div",10),c.nrm(22,"system-label",16),c.k0s()()()(),c.j41(23,"tbody"),c.DNE(24,Ps,13,4,"tr",17),c.k0s()(),c.DNE(25,qs,15,2,"div",17),c.k0s(),c.bVm()),2&e){const e=c.XpG();c.R7$(24),c.Y8G("ngForOf",e.versions.app),c.R7$(),c.Y8G("ngForOf",e.vendorpackages)}}function Ks(e,t){1&e&&(c.j41(0,"div",20),c.nrm(1,"system-spinner"),c.k0s())}let Qs=(()=>{class AdministrationSystemVersions{constructor(e,t,s){this.http=e,this.language=t,this.backend=s,this.loaded=!1,this.versions={},this.vendorpackages=[],this.loadVersions()}loadVersions(){this.loaded=!1,this.http.get("config/systemdetails/").subscribe((e=>{this.versions=e,this.vendorpackages=[];for(let e in this.versions.vendor)this.vendorpackages.push({vendorpackage:e,files:this.versions.vendor[e]});this.loaded=!0}))}static#e=this.ɵfac=function(e){return new(e||AdministrationSystemVersions)(c.rXU(zs.Qq),c.rXU(h.B),c.rXU(u.H))};static#t=this.ɵcmp=c.VBU({type:AdministrationSystemVersions,selectors:[["ng-component"]],decls:3,vars:2,consts:[[4,"ngIf","ngIfElse"],["loading",""],[1,"slds-grid","slds-grid_vertical-align-center","slds-grid--align-spread","slds-p-around--small"],[1,"slds-text-heading_medium"],["system-to-bottom","",1,"slds-border--top"],[1,"slds-p-around--small","slds-text-heading_small"],["label","LBL_MODULES"],[1,"slds-table","slds-table_bordered","slds-table_cell-buffer"],[1,"slds-text-title_caps"],["scope","col","width","45%"],[1,"slds-truncate"],["label","LBL_NAME"],["scope","col","width","20%"],["label","LBL_DATE"],["label","LBL_BUILD"],["scope","col","width","15%"],["label","LBL_RELEASE"],[4,"ngFor","ngForOf"],["scope","col","width","85%"],["label","LBL_VERSION"],[1,"slds-align--absolute-center","slds-height_full","slds-size--1-of-1"]],template:function(e,t){if(1&e&&c.DNE(0,Ws,26,2,"ng-container",0)(1,Ks,2,0,"ng-template",null,1,c.C5r),2&e){const e=c.sdS(2);c.Y8G("ngIf",t.loaded)("ngIfElse",e)}},dependencies:[i.Sq,i.bT,j.W,Ds.P,v.b],encapsulation:2})}return AdministrationSystemVersions})(),Zs=(()=>{class administrationapiinspectorService{constructor(e,t,s,i){this.backend=e,this.toast=t,this.injector=s,this.modelutilities=i,this.loading=!1,this.apiEndpoints=[],this.finalArray={},this.flattendArray=[],this.apiTree=[],this.apiMethods=[],this._apiSubMethods=!0,this._apiFilterUnauthorized=!1,this._apiFilterAdminOnly=!1,this._apiFilterValidatedOnly=!1,this.loadEndpoints()}get apiFilter(){return this._apiFilter}set apiFilter(e){this._apiFilter=e,this.buildTree()}get apiFilterUnauthorized(){return this._apiFilterUnauthorized}set apiFilterUnauthorized(e){this._apiFilterUnauthorized=e,this._apiFilterUnauthorized&&(this._apiFilterAdminOnly=!1),this.buildTree()}get apiFilterAdminOnly(){return this._apiFilterAdminOnly}set apiFilterAdminOnly(e){this._apiFilterAdminOnly=e,this._apiFilterAdminOnly&&(this._apiFilterUnauthorized=!1),this.buildTree()}get apiFilterValidatedOnly(){return this._apiFilterValidatedOnly}set apiFilterValidatedOnly(e){this._apiFilterValidatedOnly=e,this.buildTree()}loadEndpoints(){this.loading=!0,this.backend.getRequest("admin/routes").subscribe((e=>{this.apiEndpoints=e,this.apiEndpoints.sort(((e,t)=>e.route.replace("{","").localeCompare(t.route.replace("{","")))),this.buildTree(),this.loading=!1}),(e=>{this.toast.sendToast("Error Loading Routes","error"),this.loading=!1}))}buildTree(){this.apiMethods=[],this.apiTree=[],this.loading=!0;for(let e of this.apiEndpoints.filter((e=>(!this._apiFilterUnauthorized||!0===e.options.noAuth)&&((!this._apiFilterAdminOnly||!0===e.options.adminOnly)&&((!this._apiFilterValidatedOnly||!0!==e.options.validate)&&(!this._apiFilter||e.route.toLowerCase().indexOf(this._apiFilter.toLowerCase())>=0))))))e.route&&(this.apiTree.find((t=>t.route==e.route))||this.addRouteToTree(e.route));this.loading=!1}addRouteToTree(e){let t=this.getPartentId(e),s=this.getRouteId(e);return this.apiTree.push({id:s,name:"/"!=e?e.split("/").pop():e,route:e,parent_id:t,parent_sequence:this.apiTree.filter((e=>e.parent_id==t)).length}),s}getPartentId(e){let t=e.substring(1).split("/");if(t.pop(),0==t.length)return;let s="/"+t.join("/"),i=this.apiTree.find((e=>e.route==s));return i?i.id:this.addRouteToTree(s)}getRouteId(e){return this.apiTree.find((t=>t.route==e))?this.apiTree.find((t=>t.route==e)).id:this.modelutilities.generateGuid()}selectAPI(e){this.selectedAPI=this.apiTree.find((t=>t.id==e)),this.filterMethods()}get apiSubMethods(){return this._apiSubMethods}set apiSubMethods(e){this._apiSubMethods=e,this.filterMethods()}filterMethods(){this.apiMethods=this.apiEndpoints.filter((e=>this._apiSubMethods?0==e.route.indexOf(this.selectedAPI.route):e.route==this.selectedAPI.route))}getMethodParameters(e,t,s){let i=[],n=this.apiEndpoints.find((s=>s.route==e&&s.method==t));if(!n.parameters)return[];for(let e in n.parameters){let t={...n.parameters[e]};t.in==s&&(t.name=e,i.push(t))}return i.sort(((e,t)=>e.name.localeCompare(t.name)))}getMethodResponses(e,t){let s=[],i=this.apiEndpoints.find((s=>s.route==e&&s.method==t));if(!i.responses)return[];for(let e in i.responses){let t={...i.responses[e]};t.name=e,s.push(t)}return s.sort(((e,t)=>e.name.localeCompare(t.name)))}getMethodRequests(e,t,s){let i=this.apiEndpoints.find((s=>s.route==e&&s.method==t));if(!i.requestBody)return[];for(let e in i.requestBody){i.requestBody[e]}return[].sort(((e,t)=>e.name.localeCompare(t.name)))}getMethodStyle(e){let t="inherit";switch(e){case"get":t="#05628a";break;case"post":t="#f38303";break;case"put":t="#41b658";break;case"delete":t="#d83a00"}return{width:"100px",color:"#ffffff",background:t}}static#e=this.ɵfac=function(e){return new(e||administrationapiinspectorService)(c.KVO(u.H),c.KVO(z.o),c.KVO(c.zZn),c.KVO(V.g))};static#t=this.ɵprov=c.jDH({token:administrationapiinspectorService,factory:administrationapiinspectorService.ɵfac})}return administrationapiinspectorService})();var ei=s(70923),ti=s(32298),si=s(90154);function ii(e,t){1&e&&(c.j41(0,"th",14)(1,"div",6),c.nrm(2,"system-label",11),c.k0s()())}function ni(e,t){1&e&&(c.j41(0,"abbr",17),c.EFF(1,"* "),c.k0s())}function li(e,t){if(1&e){const e=c.RV6();c.j41(0,"td")(1,"input",18),c.mxI("ngModelChange",(function(t){c.eBV(e);const s=c.XpG().$implicit,i=c.XpG(2);return c.DH7(i.parameterCollector[s.name],t)||(i.parameterCollector[s.name]=t),c.Njj(t)})),c.k0s()()}if(2&e){const e=c.XpG().$implicit,t=c.XpG(2);c.R7$(),c.R50("ngModel",t.parameterCollector[e.name])}}function ai(e,t){if(1&e&&(c.j41(0,"tr",15)(1,"td")(2,"div",6),c.EFF(3),c.DNE(4,ni,2,0,"abbr",16),c.k0s()(),c.j41(5,"td")(6,"div",6),c.EFF(7),c.k0s()(),c.j41(8,"td")(9,"div",6),c.EFF(10),c.k0s()(),c.DNE(11,li,2,1,"td",0),c.k0s()),2&e){const e=t.$implicit,s=c.XpG(2);c.R7$(3),c.JRh(e.name),c.R7$(),c.Y8G("ngIf",e.required),c.R7$(3),c.JRh(e.description),c.R7$(3),c.JRh(e.type),c.R7$(),c.Y8G("ngIf",s.parameterCollector)}}function oi(e,t){if(1&e&&(c.qex(0),c.j41(1,"div",1),c.nrm(2,"system-label",2),c.k0s(),c.j41(3,"table",3)(4,"thead")(5,"tr",4)(6,"th",5)(7,"div",6),c.nrm(8,"system-label",7),c.k0s()(),c.j41(9,"th",8)(10,"div",6),c.nrm(11,"system-label",9),c.k0s()(),c.j41(12,"th",10)(13,"div",6),c.nrm(14,"system-label",11),c.k0s()(),c.DNE(15,ii,3,0,"th",12),c.k0s()(),c.j41(16,"tbody"),c.DNE(17,ai,12,5,"tr",13),c.k0s()(),c.bVm()),2&e){const e=c.XpG();c.R7$(2),c.Y8G("label","LBL_"+e.in.toUpperCase()+"_PARAMETERS"),c.R7$(13),c.Y8G("ngIf",e.parameterCollector),c.R7$(2),c.Y8G("ngForOf",e.parameters)}}let di=(()=>{class AdministrationApiInspectorMethodParameters{constructor(e){this.apiinspector=e}ngOnChanges(){this.parameters=this.apiinspector.getMethodParameters(this.apimethod.route,this.apimethod.method,this.in)}static#e=this.ɵfac=function(e){return new(e||AdministrationApiInspectorMethodParameters)(c.rXU(Zs))};static#t=this.ɵcmp=c.VBU({type:AdministrationApiInspectorMethodParameters,selectors:[["administration-api-inspector-method-parameters"]],inputs:{apimethod:"apimethod",in:"in",parameterCollector:"parameterCollector"},features:[c.OA$],decls:1,vars:1,consts:[[4,"ngIf"],[1,"slds-p-around--small","slds-text-heading--label"],[3,"label"],[1,"slds-table","slds-table--fixed-layout","slds-table_cell-buffer","slds-table_bordered"],[1,"slds-line-height_reset"],["scope","col",2,"width","120px"],[1,"slds-truncate"],["label","LBL_NAME"],["scope","col"],["label","LBL_DESCRIPTION"],["scope","col",2,"width","100px"],["label","LBL_TYPE"],["class","","scope","col",4,"ngIf"],["class","slds-hint-parent",4,"ngFor","ngForOf"],["scope","col",1,""],[1,"slds-hint-parent"],["class","slds-required",4,"ngIf"],[1,"slds-required"],[1,"slds-input",3,"ngModel","ngModelChange"]],template:function(e,t){1&e&&c.DNE(0,oi,18,3,"ng-container",0),2&e&&c.Y8G("ngIf",t.parameters.length>0)},dependencies:[i.Sq,i.bT,n.me,n.BC,n.vS,j.W],encapsulation:2})}return AdministrationApiInspectorMethodParameters})();function ri(e,t){if(1&e&&(c.j41(0,"tr",11)(1,"td")(2,"div",6),c.EFF(3),c.k0s()(),c.j41(4,"td")(5,"div",6),c.EFF(6),c.k0s()()()),2&e){const e=t.$implicit;c.R7$(3),c.JRh(e.name),c.R7$(3),c.JRh(e.description)}}function ci(e,t){if(1&e&&(c.qex(0),c.j41(1,"div",1),c.nrm(2,"system-label",2),c.k0s(),c.j41(3,"table",3)(4,"thead")(5,"tr",4)(6,"th",5)(7,"div",6),c.nrm(8,"system-label",7),c.k0s()(),c.j41(9,"th",8)(10,"div",6),c.nrm(11,"system-label",9),c.k0s()()()(),c.j41(12,"tbody"),c.DNE(13,ri,7,2,"tr",10),c.k0s()(),c.bVm()),2&e){const e=c.XpG();c.R7$(13),c.Y8G("ngForOf",e.response)}}let mi=(()=>{class AdministrationapiinspectorMethodResponses{constructor(e){this.apiinspector=e}ngOnChanges(){this.response=this.apiinspector.getMethodResponses(this.apimethod.route,this.apimethod.method)}static#e=this.ɵfac=function(e){return new(e||AdministrationapiinspectorMethodResponses)(c.rXU(Zs))};static#t=this.ɵcmp=c.VBU({type:AdministrationapiinspectorMethodResponses,selectors:[["administration-api-inspector-method-responses"]],inputs:{apimethod:"apimethod"},features:[c.OA$],decls:1,vars:1,consts:[[4,"ngIf"],[1,"slds-p-around--small","slds-text-heading--label"],["label","LBL_API_RESPONSES"],[1,"slds-table","slds-table--fixed-layout","slds-table_cell-buffer","slds-table_bordered"],[1,"slds-line-height_reset"],["scope","col",2,"width","100px"],[1,"slds-truncate"],["label","LBL_NAME"],["scope","col",1,""],["label","LBL_DESCRIPTION"],["class","slds-hint-parent",4,"ngFor","ngForOf"],[1,"slds-hint-parent"]],template:function(e,t){1&e&&c.DNE(0,ci,14,1,"ng-container",0),2&e&&c.Y8G("ngIf",t.response.length>0)},dependencies:[i.Sq,i.bT,j.W],encapsulation:2})}return AdministrationapiinspectorMethodResponses})();function ui(e,t){if(1&e){const e=c.RV6();c.j41(0,"div",1)(1,"div",2)(2,"div",3)(3,"div",4),c.EFF(4),c.k0s()(),c.j41(5,"div",5),c.EFF(6),c.k0s(),c.nrm(7,"system-utility-icon",6)(8,"system-utility-icon",7)(9,"system-utility-icon",8),c.j41(10,"system-utility-icon",9),c.bIt("click",(function(t){const s=c.eBV(e).$implicit,i=c.XpG();return c.Njj(i.test(s,t))})),c.k0s()(),c.j41(11,"div",10)(12,"div",11),c.nrm(13,"system-label",12),c.k0s(),c.j41(14,"div"),c.EFF(15),c.k0s()(),c.nrm(16,"administration-api-inspector-method-parameters",13)(17,"administration-api-inspector-method-parameters",14)(18,"administration-api-inspector-method-parameters",15)(19,"administration-api-inspector-method-responses",16),c.k0s()}if(2&e){const e=t.$implicit,s=c.XpG();c.R7$(2),c.Y8G("ngStyle",s.apiinspector.getMethodStyle(e.method)),c.R7$(2),c.JRh(e.method),c.R7$(2),c.JRh(e.route),c.R7$(),c.Y8G("colorclass",e.options.validate?"slds-icon-text-success":"slds-icon-text-light"),c.R7$(),c.Y8G("colorclass",e.options.noAuth?"slds-icon-text-error":"slds-icon-text-light"),c.R7$(),c.Y8G("colorclass",e.options.adminOnly?"slds-icon-text-error":"slds-icon-text-light"),c.R7$(6),c.JRh(e.description),c.R7$(),c.Y8G("apimethod",e),c.R7$(),c.Y8G("apimethod",e),c.R7$(),c.Y8G("apimethod",e),c.R7$(),c.Y8G("apimethod",e)}}let gi=(()=>{class AdministrationApiInspectorMethods{constructor(e,t,s){this.modal=e,this.injector=t,this.apiinspector=s}test(e,t){t.preventDefault(),t.stopPropagation(),this.modal.openModal("AdministrationApiInspectorMethodTest",!0,this.injector).subscribe((t=>{t.instance.apiMethod=e}))}static#e=this.ɵfac=function(e){return new(e||AdministrationApiInspectorMethods)(c.rXU(P.y),c.rXU(c.zZn),c.rXU(Zs))};static#t=this.ɵcmp=c.VBU({type:AdministrationApiInspectorMethods,selectors:[["administration-api-inspector-methods"]],decls:1,vars:1,consts:[["class","slds-m-around--x-small slds-p-around--none slds-box",4,"ngFor","ngForOf"],[1,"slds-m-around--x-small","slds-p-around--none","slds-box"],[1,"slds-p-around--small","slds-grid","slds-grid--vertical-align-center","slds-p-bottom--small","slds-border--bottom"],[1,"slds-badge","slds-m-right--x-small",3,"ngStyle"],[1,"slds-size--1-of-1","slds-text-align--center"],[1,"slds-truncate","slds-text-heading--small","slds-grow"],["icon","ribbon","size","x-small",1,"slds-p-left--xx-small",3,"colorclass"],["icon","unlock","size","x-small",1,"slds-p-left--xx-small",3,"colorclass"],["icon","user_role","size","x-small",1,"slds-p-left--xx-small",3,"colorclass"],["icon","play","size","x-small",1,"slds-p-left--xx-small","slds-text-link--reset",3,"click"],[1,"slds-p-around--small"],[1,"slds-p-bottom--small","slds-text-heading--small"],["label","LBL_SUMMARY"],["in","path",3,"apimethod"],["in","query",3,"apimethod"],["in","body",3,"apimethod"],[3,"apimethod"]],template:function(e,t){1&e&&c.DNE(0,ui,20,11,"div",0),2&e&&c.Y8G("ngForOf",t.apiinspector.apiMethods)},dependencies:[i.Sq,i.B3,j.W,F.B,di,mi],encapsulation:2})}return AdministrationApiInspectorMethods})();const hi=["administration-api-inspector",""];function bi(e,t){if(1&e){const e=c.RV6();c.j41(0,"system-tree",22),c.bIt("selectedItemChange",(function(t){c.eBV(e);const s=c.XpG();return c.Njj(s.selectNode(t))})),c.k0s()}if(2&e){const e=c.XpG();c.Y8G("sourceList",e.apiinspector.apiTree)}}function pi(e,t){1&e&&(c.j41(0,"div",23)(1,"div",24),c.nrm(2,"system-spinner")(3,"system-label",25),c.k0s()())}function fi(e,t){1&e&&c.nrm(0,"administration-api-inspector-methods")}function yi(e,t){1&e&&(c.j41(0,"div",23)(1,"system-illustration-no-data"),c.nrm(2,"system-label",26),c.k0s()())}let _i=(()=>{class AdministrationAPIInspector{constructor(e,t,s,i){this.toast=e,this.modal=t,this.injector=s,this.apiinspector=i,this.toggleClassSub=[]}toggleUnauthorized(e){e.preventDefault(),e.stopPropagation(),this.apiinspector.apiFilterUnauthorized=!this.apiinspector.apiFilterUnauthorized}toggleAdminOnly(e){e.preventDefault(),e.stopPropagation(),this.apiinspector.apiFilterAdminOnly=!this.apiinspector.apiFilterAdminOnly}toggleValidatedOnly(e){e.preventDefault(),e.stopPropagation(),this.apiinspector.apiFilterValidatedOnly=!this.apiinspector.apiFilterValidatedOnly}selectNode(e){this.apiinspector.selectAPI(e)}static#e=this.ɵfac=function(e){return new(e||AdministrationAPIInspector)(c.rXU(z.o),c.rXU(P.y),c.rXU(c.zZn),c.rXU(Zs))};static#t=this.ɵcmp=c.VBU({type:AdministrationAPIInspector,selectors:[["","administration-api-inspector",""]],features:[c.Jv_([Zs])],attrs:hi,decls:27,vars:13,consts:[[1,"slds-grid","slds-grid_vertical-align-center","slds-p-around--small","slds-border--bottom"],["icon","apex_plugin"],[1,"slds-text-heading_medium"],["label","LBL_API_INSPECTOR"],[1,"slds-theme--default","slds-grid",3,"system-overlay-loading-spinner"],[1,"slds-size--1-of-3","slds-border--right"],[1,"slds-p-around--x-small","slds-border--bottom"],[1,"slds-grid","slds-grid--vertical-align-center"],["system-placeholder","LBL_FILTER",1,"slds-input",3,"ngModel","ngModelChange"],["icon","unlock","size","x-small",1,"slds-p-left--xx-small",3,"colorclass","click"],["icon","user_role","size","x-small",1,"slds-p-left--xx-small",3,"colorclass","click"],["icon","ribbon","size","x-small",1,"slds-p-left--xx-small",3,"colorclass","click"],["system-to-bottom",""],[3,"sourceList","selectedItemChange",4,"ngIf","ngIfElse"],["treeLoadingSpinner",""],[1,"slds-size--2-of-3"],[1,"slds-p-around--x-small","slds-border--bottom","slds-grid","slds-grid--align-spread","slds-grid--vertical-align-center",2,"min-height","49px"],[1,"slds-text-heading--medium"],[3,"ngModel","ngModelChange"],["label","LBL_INCLUDE_SUBROUTES"],[4,"ngIf","ngIfElse"],["noMethodsAvailable",""],[3,"sourceList","selectedItemChange"],[1,"slds-height_full","slds-align--absolute-center"],[1,"slds-grid","slds-grid--vertical"],["label","LBL_LOADING_ENDPOINTS",1,"slds-p-vertical--small"],["label","LBL_NO_METHODS_FOR_ENDPOINT"]],template:function(e,t){if(1&e&&(c.j41(0,"div",0),c.nrm(1,"system-icon",1),c.j41(2,"h2",2),c.nrm(3,"system-label",3),c.EFF(4),c.k0s()(),c.j41(5,"div",4)(6,"div",5)(7,"div",6)(8,"div",7)(9,"input",8),c.mxI("ngModelChange",(function(e){return c.DH7(t.apiinspector.apiFilter,e)||(t.apiinspector.apiFilter=e),e})),c.k0s(),c.j41(10,"system-utility-icon",9),c.bIt("click",(function(e){return t.toggleUnauthorized(e)})),c.k0s(),c.j41(11,"system-utility-icon",10),c.bIt("click",(function(e){return t.toggleAdminOnly(e)})),c.k0s(),c.j41(12,"system-utility-icon",11),c.bIt("click",(function(e){return t.toggleValidatedOnly(e)})),c.k0s()()(),c.j41(13,"div",12),c.DNE(14,bi,1,1,"system-tree",13)(15,pi,4,0,"ng-template",null,14,c.C5r),c.k0s()(),c.j41(17,"div",15)(18,"div",16)(19,"span",17),c.EFF(20),c.k0s(),c.j41(21,"system-checkbox",18),c.mxI("ngModelChange",(function(e){return c.DH7(t.apiinspector.apiSubMethods,e)||(t.apiinspector.apiSubMethods=e),e})),c.nrm(22,"system-label",19),c.k0s()(),c.j41(23,"div",12),c.DNE(24,fi,1,0,"administration-api-inspector-methods",20)(25,yi,3,0,"ng-template",null,21,c.C5r),c.k0s()()()),2&e){const e=c.sdS(16),s=c.sdS(26);c.R7$(4),c.SpI(" (",t.apiinspector.apiEndpoints.length,")"),c.R7$(),c.Y8G("system-overlay-loading-spinner",t.apiinspector.loading),c.R7$(4),c.R50("ngModel",t.apiinspector.apiFilter),c.R7$(),c.Y8G("colorclass",t.apiinspector.apiFilterUnauthorized?"slds-icon-text-warning":"slds-icon-text-light"),c.R7$(),c.Y8G("colorclass",t.apiinspector.apiFilterAdminOnly?"slds-icon-text-warning":"slds-icon-text-light"),c.R7$(),c.Y8G("colorclass",t.apiinspector.apiFilterValidatedOnly?"slds-icon-text-warning":"slds-icon-text-light"),c.R7$(2),c.Y8G("ngIf",!t.apiinspector.loading)("ngIfElse",e),c.R7$(6),c.Lme("",null==t.apiinspector.selectedAPI?null:t.apiinspector.selectedAPI.route," (",t.apiinspector.apiMethods.length,")"),c.R7$(),c.R50("ngModel",t.apiinspector.apiSubMethods),c.R7$(3),c.Y8G("ngIf",t.apiinspector.apiMethods.length>0)("ngIfElse",s)}},dependencies:[i.bT,n.me,n.BC,n.vS,W.f,E.J,ei.L,j.W,Ds.P,ti.S,F.B,v.b,R.M,si.m,gi],encapsulation:2})}return AdministrationAPIInspector})(),vi=(()=>{class AdministrationAPIInspectorDetails{constructor(){this.endpoint={}}close(){this.self.destroy()}static#e=this.ɵfac=function(e){return new(e||AdministrationAPIInspectorDetails)};static#t=this.ɵcmp=c.VBU({type:AdministrationAPIInspectorDetails,selectors:[["administration-api-inspector-details"]],features:[c.Jv_([Zs])],decls:8,vars:2,consts:[[3,"close"],["label","LBL_API_ENDPOINT"],[3,"grow"],[1,"slds-button","slds-button--neutral",3,"click"],["label","LBL_CLOSE"]],template:function(e,t){1&e&&(c.j41(0,"system-modal")(1,"system-modal-header",0),c.bIt("close",(function(){return t.close()})),c.nrm(2,"system-label",1),c.k0s(),c.j41(3,"system-modal-content",2),c.EFF(4),c.k0s(),c.j41(5,"system-modal-footer")(6,"button",3),c.bIt("click",(function(){return t.close()})),c.nrm(7,"system-label",4),c.k0s()()()),2&e&&(c.R7$(3),c.Y8G("grow",!0),c.R7$(),c.SpI(" ",t.endpoint.method," "))},dependencies:[j.W,ot.D,dt.I,rt.Q,fs.C],encapsulation:2})}return AdministrationAPIInspectorDetails})();var ki=s(82802),Ri=s(88980);const Li=["modalcontent"],Ei=["tabcontent"],ji=e=>({"slds-is-active":e}),Fi=e=>({"slds-hide":e});let Mi=(()=>{class AdministrationApiInspectorMethodTest{constructor(e,t,s){this.backend=e,this.libloader=t,this.apiInspector=s,this.activetab="parameters",this.executing=!1,this.parameterCollector={},this.libloader.loadLib("jsonbeautify")}ngAfterViewInit(){let e=this.modalcontent.element.nativeElement.getBoundingClientRect(),t=this.tabcontent.element.nativeElement.getBoundingClientRect();this.tabHeigth=e.height-t.top+e.top}get tabStyle(){return{height:this.tabHeigth+"px"}}test(){switch(this.executing=!0,this.response=void 0,this.activetab="response",this.apiMethod.method){case"get":this.backend.getRequest(this.buildRoute(),this.buildParams()).subscribe((e=>{this.response=js_beautify(JSON.stringify(e)),this.executing=!1}),(e=>{this.response=js_beautify(JSON.stringify(e))}));break;case"post":this.backend.postRequest(this.buildRoute(),this.buildParams(),this.buildBody()).subscribe((e=>{this.response=js_beautify(JSON.stringify(e)),this.executing=!1}),(e=>{this.response=js_beautify(JSON.stringify(e))}))}}checkParameters(){return!0}buildRoute(){let e=this.apiMethod.route.substring(1),t=this.apiInspector.getMethodParameters(this.apiMethod.route,this.apiMethod.method,"path");for(let s of t)e=e.replace(`{${s.name}}`,this.parameterCollector[s.name]);return e}buildParams(){let e={},t=this.apiInspector.getMethodParameters(this.apiMethod.route,this.apiMethod.method,"query");for(let s of t)e[s.name]=this.parameterCollector[s.name];return e}buildBody(){let e={},t=this.apiInspector.getMethodParameters(this.apiMethod.route,this.apiMethod.method,"body");for(let s of t)e[s.name]=this.parameterCollector[s.name];return e}close(){this.self.destroy()}static#e=this.ɵfac=function(e){return new(e||AdministrationApiInspectorMethodTest)(c.rXU(u.H),c.rXU(ki.b),c.rXU(Zs))};static#t=this.ɵcmp=c.VBU({type:AdministrationApiInspectorMethodTest,selectors:[["administration-api-inspector-method-test"]],viewQuery:function(e,t){if(1&e&&(c.GBs(Li,7,c.c1b),c.GBs(Ei,7,c.c1b)),2&e){let e;c.mGM(e=c.lsd())&&(t.modalcontent=e.first),c.mGM(e=c.lsd())&&(t.tabcontent=e.first)}},decls:31,vars:24,consts:[[3,"close"],[1,"slds-badge",3,"ngStyle"],[1,"slds-size--1-of-1","slds-text-align--center"],["margin","none",3,"grow"],["modalcontent",""],[1,"slds-tabs_default"],["role","tablist",1,"slds-tabs_default__nav"],["role","presentation",1,"slds-tabs_default__item",3,"ngClass"],["role","tab",1,"slds-tabs_default__link",3,"click"],["label","LBL_PARAMETERS"],["title","Item Three","role","presentation",1,"slds-tabs_default__item",3,"ngClass"],["label","LBL_RESPONSE"],[1,"slds-scrollable",3,"ngStyle"],["tabcontent",""],["role","tabpanel",1,"slds-tabs_default__content",3,"ngClass"],["in","path",3,"apimethod","parameterCollector"],["in","query",3,"apimethod","parameterCollector"],["in","body",3,"apimethod","parameterCollector"],[1,"slds-p-horizontal--x-small",2,"white-space","pre-wrap"],[1,"slds-button","slds-button--neutral",3,"click"],["label","LBL_CLOSE"],[1,"slds-button","slds-button--brand",3,"click"],["label","LBL_TEST"]],template:function(e,t){1&e&&(c.j41(0,"system-modal")(1,"system-modal-header",0),c.bIt("close",(function(){return t.close()})),c.EFF(2),c.j41(3,"system-modal-header-right")(4,"div",1)(5,"div",2),c.EFF(6),c.k0s()()()(),c.j41(7,"system-modal-content",3,4)(9,"div",5)(10,"ul",6)(11,"li",7)(12,"a",8),c.bIt("click",(function(){return t.activetab="parameters"})),c.nrm(13,"system-label",9),c.k0s()(),c.j41(14,"li",10)(15,"a",8),c.bIt("click",(function(){return t.activetab="response"})),c.nrm(16,"system-label",11),c.k0s()()(),c.j41(17,"div",12,13)(19,"div",14),c.nrm(20,"administration-api-inspector-method-parameters",15)(21,"administration-api-inspector-method-parameters",16)(22,"administration-api-inspector-method-parameters",17),c.k0s(),c.j41(23,"div",14)(24,"pre",18),c.EFF(25),c.k0s()()()()(),c.j41(26,"system-modal-footer")(27,"button",19),c.bIt("click",(function(){return t.close()})),c.nrm(28,"system-label",20),c.k0s(),c.j41(29,"button",21),c.bIt("click",(function(){return t.test()})),c.nrm(30,"system-label",22),c.k0s()()()),2&e&&(c.R7$(2),c.SpI(" ",t.apiMethod.route," "),c.R7$(2),c.Y8G("ngStyle",t.apiInspector.getMethodStyle(t.apiMethod.method)),c.R7$(2),c.JRh(t.apiMethod.method),c.R7$(),c.Y8G("grow",!0),c.R7$(4),c.Y8G("ngClass",c.eq3(16,ji,"parameters"==t.activetab)),c.R7$(3),c.Y8G("ngClass",c.eq3(18,ji,"response"==t.activetab)),c.R7$(3),c.Y8G("ngStyle",t.tabStyle),c.R7$(2),c.Y8G("ngClass",c.eq3(20,Fi,"parameters"!=t.activetab)),c.R7$(),c.Y8G("apimethod",t.apiMethod)("parameterCollector",t.parameterCollector),c.R7$(),c.Y8G("apimethod",t.apiMethod)("parameterCollector",t.parameterCollector),c.R7$(),c.Y8G("apimethod",t.apiMethod)("parameterCollector",t.parameterCollector),c.R7$(),c.Y8G("ngClass",c.eq3(22,Fi,"response"!=t.activetab)),c.R7$(2),c.JRh(t.response))},dependencies:[i.YU,i.B3,j.W,ot.D,dt.I,rt.Q,fs.C,Ri.s,di],encapsulation:2})}return AdministrationApiInspectorMethodTest})();var xi=s(48849),Ii=s(4921),Gi=s(27601),Ai=s(13957),Si=s(44985),Ci=s(81086);function Di(e,t){if(1&e&&(c.j41(0,"option",44),c.nrm(1,"system-label-modulename",45),c.k0s()),2&e){const e=t.$implicit;c.Y8G("value",e),c.R7$(),c.Y8G("module",e)}}function Bi(e,t){if(1&e){const e=c.RV6();c.j41(0,"tr")(1,"td",46),c.nrm(2,"system-icon",47),c.k0s(),c.j41(3,"td",48)(4,"div",49),c.EFF(5),c.k0s()(),c.j41(6,"td")(7,"div",49),c.EFF(8),c.k0s()(),c.j41(9,"td")(10,"div",49),c.EFF(11),c.k0s()(),c.j41(12,"td")(13,"div",49),c.EFF(14),c.k0s()(),c.j41(15,"td",50)(16,"button",51),c.bIt("click",(function(){const t=c.eBV(e).$implicit,s=c.XpG();return c.Njj(s.recoverRecord(t))})),c.nrm(17,"system-button-icon",52),c.k0s()()()}if(2&e){const e=t.$implicit;c.R7$(2),c.Y8G("module",e.recordmodule),c.R7$(3),c.JRh(e.recordmodule),c.R7$(3),c.JRh(e.recordname),c.R7$(3),c.JRh(e.date_deleted),c.R7$(3),c.JRh(e.user_name),c.R7$(3),c.Y8G("icon","undelete")}}function $i(e,t){1&e&&(c.j41(0,"div",53),c.nrm(1,"system-spinner"),c.k0s())}function Ni(e,t){1&e&&(c.j41(0,"div",53)(1,"h2",54),c.nrm(2,"system-label",55),c.k0s()())}let Ti=(()=>{class AdministrationSysTrashcanManager{constructor(e,t,s,i,n,l){this.metadata=e,this.modal=t,this.backend=s,this.language=i,this.userpreferences=n,this.footer=l,this.totalCount=0,this.records=[],this.loading=!1}set searchTerm(e){this._searchTerm=e,window.clearTimeout(this.searchTimeout),this.searchTimeout=window.setTimeout((()=>this.reload()),600)}get searchTerm(){return this._searchTerm}set searchModule(e){this._searchModule=e,this.reload()}get searchModule(){return this._searchModule}set filterUser(e){const t=e?.split("::");this.user=t?{id:t[0],name:t[1]}:void 0,this.reload()}get filterUser(){return this.user?this.user.id+"::"+this.user.name:void 0}ngOnInit(){this.getEntries(),this.modules=this.metadata.getModules().sort(((e,t)=>this.language.getModuleName(e).localeCompare(this.language.getModuleName(t))))}getEntries(){this.loading=!0;const e={limit:50,offset:this.records.length,module:this.searchModule,searchTerm:this.searchTerm,user:this.user?.id};this.backend.getRequest("admin/systrashcan",e).subscribe((e=>{e&&(e.records.forEach((e=>e.date_deleted=this.userpreferences.formatDateTime(moment(e.date_deleted)))),this.totalCount=e.count,this.records=this.records.concat(e.records),this.loadDate=this.userpreferences.formatDateTime(moment()),this.loading=!1)}))}reload(){this.records=[],this.getEntries()}recoverRecord(e){const t=this.modal.await(this.language.getLabel("LBL_LOADING"));this.backend.getRequest("admin/systrashcan/related/"+e.transactionid+"/"+e.recordid).subscribe((s=>{t.next(!0),t.complete(),this.modal.openModal("AdministrationSysTrashcanRecover").subscribe((t=>{t.instance.record=e,t.instance.relatedRecords=s,t.instance.hasRelated=s.length>0,t.instance.recovered.subscribe((t=>{t&&(this.records=this.records.filter((t=>t.id!=e.id)))}))}))}))}loadMore(){this.loading||this.records.length>=this.totalCount||this.getEntries()}clearSearchTerm(){this.searchTerm=void 0,this.reload()}static#e=this.ɵfac=function(e){return new(e||AdministrationSysTrashcanManager)(c.rXU(p.yu),c.rXU(P.y),c.rXU(u.H),c.rXU(h.B),c.rXU(xi.S),c.rXU(Ii.q))};static#t=this.ɵcmp=c.VBU({type:AdministrationSysTrashcanManager,selectors:[["administration-systrashcan-manager"]],decls:57,vars:11,consts:[[1,"slds-grid","slds-grid--vertical-align-end","slds-page-header"],[1,"slds-media","slds-m-right--medium"],[1,"slds-p-horizontal--x-small"],["icon","recall"],[1,"slds-media__body"],[1,"slds-page-header__title","slds-truncate","slds-align-middle"],["label","LBL_TRASHCAN_MANAGER"],[1,"slds-text-body_small","slds-line-height_reset","slds-p-vertical--xx-small"],[1,"slds-m-right--xx-small"],["label","LBL_FROM"],[1,"slds-form-element","slds-p-right--x-small","slds-grow"],[1,"slds-form-element__control","slds-input-has-icon","slds-input-has-icon--left-right"],["icon","search","size","x-small","addclasses","slds-icon slds-input__icon slds-input__icon_left"],["system-autofocus","","type","search","system-placeholder","LBL_SEARCH",1,"slds-input","slds-lookup__search-input","slds-size--1-of-1",3,"ngModel","ngModelChange","keyup.enter"],[1,"slds-button","slds-button_icon","slds-input__icon","slds-input__icon_right",3,"disabled","click"],["icon","clear"],[1,"slds-form-element","slds-m-right--x-small"],["for","moduleselect",1,"slds-form-element__label"],["label","LBL_MODULE"],[1,"slds-form-element__control","slds-col"],[1,"slds-select_container"],["id","moduleselect",1,"slds-select",3,"ngModel","ngModelChange"],["value","","selected",""],["label","LBL_SELECT"],[3,"value",4,"ngFor","ngForOf"],[1,"slds-m-right--small","slds-size--1-of-8"],[1,"slds-form-element__label"],["label","LBL_USER"],["module","Users","nameField","user_name",3,"ngModel","ngModelChange"],[1,"slds-button","slds-button--neutral",3,"click"],["label","LBL_REFRESH"],[3,"system-to-bottom"],[1,"slds-table","slds-table_bordered","slds-table--header-fixed","slds-table--fixed-layout"],[1,"slds-text-title_caps"],[1,"slds-cell-shrink"],["scope","col"],[1,"slds-truncate","slds-p-vertical--x-small"],["label","LBL_OBJECT"],["label","LBL_NAME"],["label","LBL_DATE_DELETED"],["label","LBL_DELETED_BY"],["scope","col",1,"slds-cell-shrink"],[4,"ngFor","ngForOf"],["class","slds-p-around--medium slds-align--absolute-center",4,"ngIf"],[3,"value"],[3,"module"],["role","gridcell",1,"slds-cell-shrink"],["size","small",3,"module"],["scope","row"],[1,"slds-truncate"],["role","gridcell"],["system-title","LBL_RESTORE",1,"slds-button","slds-button_icon","slds-button_icon-border-filled","slds-button_icon-x-small",3,"click"],[3,"icon"],[1,"slds-p-around--medium","slds-align--absolute-center"],[1,"slds-text-heading--small"],["label","LBL_NO_RECORDS_FOUND"]],template:function(e,t){1&e&&(c.j41(0,"div",0)(1,"div",1)(2,"div",2),c.nrm(3,"system-action-icon",3),c.k0s(),c.j41(4,"div",4)(5,"h1",5),c.nrm(6,"system-label",6),c.k0s(),c.j41(7,"div",7)(8,"span",8),c.EFF(9),c.nrm(10,"system-label",9),c.EFF(11),c.k0s(),c.EFF(12),c.k0s()()(),c.j41(13,"div",10)(14,"div",11),c.nrm(15,"system-utility-icon",12),c.j41(16,"input",13),c.mxI("ngModelChange",(function(e){return c.DH7(t.searchTerm,e)||(t.searchTerm=e),e})),c.bIt("keyup.enter",(function(){return t.reload()})),c.k0s(),c.j41(17,"button",14),c.bIt("click",(function(){return t.clearSearchTerm()})),c.nrm(18,"system-button-icon",15),c.k0s()()(),c.j41(19,"div",16)(20,"label",17),c.nrm(21,"system-label",18),c.k0s(),c.j41(22,"div",19)(23,"div",20)(24,"select",21),c.mxI("ngModelChange",(function(e){return c.DH7(t.searchModule,e)||(t.searchModule=e),e})),c.j41(25,"option",22),c.nrm(26,"system-label",23),c.k0s(),c.DNE(27,Di,2,2,"option",24),c.k0s()()()(),c.j41(28,"div",25)(29,"label",26),c.nrm(30,"system-label",27),c.k0s(),c.j41(31,"system-input-relate",28),c.mxI("ngModelChange",(function(e){return c.DH7(t.filterUser,e)||(t.filterUser=e),e})),c.k0s()(),c.j41(32,"div")(33,"button",29),c.bIt("click",(function(){return t.reload()})),c.nrm(34,"system-label",30),c.k0s()()(),c.j41(35,"div",31),c.bIt("system-to-bottom",(function(){return t.loadMore()})),c.j41(36,"table",32)(37,"thead")(38,"tr",33),c.nrm(39,"th",34),c.j41(40,"th",35)(41,"div",36),c.nrm(42,"system-label",37),c.k0s()(),c.j41(43,"th",35)(44,"div",36),c.nrm(45,"system-label",38),c.k0s()(),c.j41(46,"th",35)(47,"div",36),c.nrm(48,"system-label",39),c.k0s()(),c.j41(49,"th",35)(50,"div",36),c.nrm(51,"system-label",40),c.k0s()(),c.nrm(52,"th",41),c.k0s()(),c.j41(53,"tbody"),c.DNE(54,Bi,18,6,"tr",42),c.k0s()(),c.DNE(55,$i,2,0,"div",43)(56,Ni,3,0,"div",43),c.k0s()),2&e&&(c.R7$(9),c.SpI("",t.records.length," "),c.R7$(2),c.SpI(" ",t.totalCount,""),c.R7$(),c.SpI(" ",t.loadDate," "),c.R7$(4),c.R50("ngModel",t.searchTerm),c.R7$(),c.Y8G("disabled",!t.searchTerm),c.R7$(7),c.R50("ngModel",t.searchModule),c.R7$(3),c.Y8G("ngForOf",t.modules),c.R7$(4),c.R50("ngModel",t.filterUser),c.R7$(23),c.Y8G("ngForOf",t.records),c.R7$(),c.Y8G("ngIf",t.loading),c.R7$(),c.Y8G("ngIf",!t.loading&&0==t.records.length))},dependencies:[i.Sq,i.bT,n.xH,n.y7,n.me,n.wz,n.BC,n.vS,Gi.J,L.t,E.J,Ai.$,j.W,Si.r,Ds.P,F.B,Ci.a,v.b,si.m,M.L],encapsulation:2})}return AdministrationSysTrashcanManager})();function Xi(e,t){if(1&e&&(c.j41(0,"tr")(1,"td",19),c.nrm(2,"system-icon",20),c.k0s(),c.j41(3,"td",21)(4,"div",16),c.EFF(5),c.k0s()(),c.j41(6,"td")(7,"div",16),c.EFF(8),c.k0s()(),c.j41(9,"td")(10,"div",16),c.EFF(11),c.k0s()()()),2&e){const e=t.$implicit,s=c.XpG(2);c.R7$(2),c.Y8G("module",s.getModule(e.linkmodule)),c.R7$(3),c.JRh(e.linkmodule),c.R7$(3),c.JRh(e.recordname),c.R7$(3),c.JRh(e.linkname)}}function Yi(e,t){if(1&e&&(c.j41(0,"table",13)(1,"thead")(2,"tr",14)(3,"th",15)(4,"div",16),c.EFF(5,"Object"),c.k0s()(),c.j41(6,"th",17)(7,"div",16),c.EFF(8,"Name"),c.k0s()(),c.j41(9,"th",17)(10,"div",16),c.EFF(11,"link"),c.k0s()()()(),c.j41(12,"tbody"),c.DNE(13,Xi,12,4,"tr",18),c.k0s()()),2&e){const e=c.XpG();c.R7$(13),c.Y8G("ngForOf",e.relatedRecords)}}function wi(e,t){1&e&&(c.j41(0,"div",22)(1,"h2",23),c.EFF(2,"no related records found"),c.k0s()())}const Oi=e=>({"slds-hide":e});let Ui=(()=>{class AdministrationSysTrashcanRecover{constructor(e,t,s,i){this.metadata=e,this.backend=t,this.language=s,this.toast=i,this.record={},this.self={},this.relatedRecords=[],this.loading=!0,this.recoverrelated=!1,this.recovering=!1,this.recovered=new c.bkB}ngOnInit(){this.backend.getRequest("admin/systrashcan/related/"+this.record.transactionid+"/"+this.record.recordid).subscribe((e=>{this.relatedRecords=e,this.relatedRecords.length>0&&(this.recoverrelated=!0),this.loading=!1}),(e=>{this.loading=!1}))}close(){this.recovered.emit(!1),this.self.destroy()}getModule(e){return this.metadata.getModuleFromSingular(e)}get recorverDisabled(){return 0==this.relatedRecords.length}doRecover(){this.recovering=!0,this.backend.postRequest("admin/systrashcan/recover/"+this.record.id,{recoverrelated:this.recoverrelated}).subscribe((e=>{this.toast.sendToast("record "+this.record.recordname+" recovered"),this.recovered.emit(!0),this.self.destroy()}))}static#e=this.ɵfac=function(e){return new(e||AdministrationSysTrashcanRecover)(c.rXU(p.yu),c.rXU(u.H),c.rXU(h.B),c.rXU(z.o))};static#t=this.ɵcmp=c.VBU({type:AdministrationSysTrashcanRecover,selectors:[["ng-component"]],inputs:{record:"record"},decls:22,vars:9,consts:[[3,"close"],["margin","none"],["class","slds-table slds-table_bordered slds-table_cell-buffer",4,"ngIf","ngIfElse"],["norelatedrecords",""],[1,"slds-grid","slds-grid--vertical-align-center","slds-grid--align-spread"],[1,"slds-form-element__control",3,"ngClass"],[1,"slds-checkbox"],["type","checkbox","id","recoverrelated",3,"ngModel","ngModelChange"],["for","recoverrelated",1,"slds-checkbox__label"],[1,"slds-checkbox_faux"],[1,"slds-form-element__label"],[1,"slds-button","slds-button--neutral",3,"click"],[1,"slds-button","slds-button--brand",3,"disabled","click"],[1,"slds-table","slds-table_bordered","slds-table_cell-buffer"],[1,"slds-text-title_caps"],["scope","col","colspan","2"],[1,"slds-truncate"],["scope","col"],[4,"ngFor","ngForOf"],["role","gridcell",1,"slds-cell-shrink"],["size","small",3,"module"],["scope","row"],[1,"slds-p-around--medium","slds-align--absolute-center",2,"height","100%"],[1,"slds-text-heading--small"]],template:function(e,t){if(1&e&&(c.j41(0,"system-modal")(1,"system-modal-header",0),c.bIt("close",(function(){return t.close()})),c.EFF(2),c.k0s(),c.j41(3,"system-modal-content",1),c.DNE(4,Yi,14,1,"table",2)(5,wi,3,0,"ng-template",null,3,c.C5r),c.k0s(),c.j41(7,"system-modal-footer")(8,"div",4)(9,"div")(10,"div",5)(11,"span",6)(12,"input",7),c.mxI("ngModelChange",(function(e){return c.DH7(t.recoverrelated,e)||(t.recoverrelated=e),e})),c.k0s(),c.j41(13,"label",8),c.nrm(14,"span",9),c.j41(15,"span",10),c.EFF(16,"recover Related"),c.k0s()()()()(),c.j41(17,"div")(18,"button",11),c.bIt("click",(function(){return t.close()})),c.EFF(19,"Cancel"),c.k0s(),c.j41(20,"button",12),c.bIt("click",(function(){return t.doRecover()})),c.EFF(21,"Recover "),c.k0s()()()()()),2&e){const e=c.sdS(6);c.R7$(2),c.Lme("Recover ",t.record.recordmodule," ",t.record.recordname,""),c.R7$(2),c.Y8G("ngIf",t.relatedRecords.length>0)("ngIfElse",e),c.R7$(6),c.Y8G("ngClass",c.eq3(7,Oi,t.recorverDisabled)),c.R7$(2),c.R50("ngModel",t.recoverrelated),c.R7$(8),c.Y8G("disabled",t.loading)}},dependencies:[i.YU,i.Sq,i.bT,n.Zm,n.BC,n.vS,E.J,ot.D,dt.I,rt.Q,fs.C],encapsulation:2})}return AdministrationSysTrashcanRecover})(),Vi=(()=>{class AdministrationDictRepair{constructor(e,t,s,i){this.backend=e,this.toast=t,this.modal=s,this.injector=i}static#e=this.ɵfac=function(e){return new(e||AdministrationDictRepair)(c.rXU(u.H),c.rXU(z.o),c.rXU(P.y),c.rXU(c.zZn))};static#t=this.ɵcmp=c.VBU({type:AdministrationDictRepair,selectors:[["administration-dict-repair"]],decls:97,vars:0,consts:[[1,"slds-p-around--medium","slds-theme--shade"],[1,"slds-page-header__row"],[1,"slds-page-header__col-title"],[1,"slds-media"],["icon","custom94","sprite","custom"],[1,"slds-media__body"],[1,"slds-page-header__name"],[1,"slds-page-header__name-title"],[1,"slds-page-header__title","slds-truncate"],["label","LBL_REPAIR_DATABASE_DEPRECATED"],[1,"slds-grid--vertical"],["addclasses","slds-icon slds-icon-text-warning","divClass","","icon","warning","sprite","utility","size","large"],["label","LBL_REPAIR_DATABASE_DEPRECATED","length","long"],[1,"slds-table","slds-table_cell-buffer","slds-table_bordered","slds-table_striped","slds-size--1-of-1"],["label","LBL_DEPRECATED"],["label","LBL_NEW"],["label","LBL_REPAIR_DATABASE"],["label","LBL_DICTIONARY_MANAGER"],["label","LBL_REPAIR_CACHE"],["label","LBL_REPAIR_CUSTOM_CACHE"],["label","LBL_DOMAIN_MANAGER"],["label","LBL_RESET_CACHE"],["label","LBL_CACHE_VIEWER"],["label","LBL_CONVERT_DB_CHARSET"],["label","LBL_CLEAN_DB_COLUMNS"]],template:function(e,t){1&e&&(c.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),c.nrm(4,"system-icon",4),c.j41(5,"div",5)(6,"div",6)(7,"div",7)(8,"h1")(9,"span",8),c.nrm(10,"system-label",9),c.k0s()()()()()()()()(),c.j41(11,"div",10)(12,"div"),c.nrm(13,"system-icon",11),c.j41(14,"div")(15,"span",8),c.nrm(16,"system-label",12),c.k0s()()(),c.nrm(17,"div"),c.k0s(),c.j41(18,"div",10),c.nrm(19,"div"),c.j41(20,"div")(21,"table",13)(22,"thead")(23,"tr")(24,"th"),c.nrm(25,"system-label",14),c.k0s(),c.j41(26,"th"),c.nrm(27,"system-label",15),c.k0s(),c.nrm(28,"th")(29,"th"),c.k0s()(),c.j41(30,"tbody")(31,"tr")(32,"td"),c.nrm(33,"system-label",16),c.k0s(),c.j41(34,"td"),c.nrm(35,"system-label",17),c.k0s(),c.j41(36,"td"),c.EFF(37,">"),c.k0s(),c.j41(38,"td"),c.EFF(39,'"'),c.nrm(40,"system-label",16),c.EFF(41,'"'),c.k0s()(),c.j41(42,"tr")(43,"td"),c.nrm(44,"system-label",18),c.k0s(),c.j41(45,"td"),c.nrm(46,"system-label",17),c.k0s(),c.j41(47,"td"),c.EFF(48,">"),c.k0s(),c.j41(49,"td"),c.EFF(50,'"'),c.nrm(51,"system-label",18),c.EFF(52,'"'),c.k0s()(),c.j41(53,"tr")(54,"td"),c.nrm(55,"system-label",19),c.k0s(),c.j41(56,"td"),c.nrm(57,"system-label",20),c.k0s(),c.j41(58,"td"),c.EFF(59,">"),c.k0s(),c.j41(60,"td"),c.EFF(61,'"'),c.nrm(62,"system-label",19),c.EFF(63,'"'),c.k0s()(),c.j41(64,"tr")(65,"td"),c.nrm(66,"system-label",21),c.k0s(),c.j41(67,"td"),c.nrm(68,"system-label",22),c.k0s(),c.j41(69,"td"),c.EFF(70,">"),c.k0s(),c.j41(71,"td"),c.EFF(72,'"'),c.nrm(73,"system-label",21),c.EFF(74,'"'),c.k0s()(),c.j41(75,"tr")(76,"td"),c.nrm(77,"system-label",23),c.k0s(),c.j41(78,"td"),c.nrm(79,"system-label",17),c.k0s(),c.j41(80,"td"),c.EFF(81,">"),c.k0s(),c.j41(82,"td"),c.EFF(83,'"'),c.nrm(84,"system-label",23),c.EFF(85,'"'),c.k0s()(),c.j41(86,"tr")(87,"td"),c.nrm(88,"system-label",24),c.k0s(),c.j41(89,"td"),c.nrm(90,"system-label",17),c.k0s(),c.j41(91,"td"),c.EFF(92,">"),c.k0s(),c.j41(93,"td"),c.EFF(94,'"'),c.nrm(95,"system-label",24),c.EFF(96,'"'),c.k0s()()()()()())},dependencies:[E.J,j.W],encapsulation:2})}return AdministrationDictRepair})(),Hi=(()=>{class AdministrationDictRepairItem{constructor(e,t,s,i,n){this.backend=e,this.toast=t,this.language=s,this.modal=i,this.injector=n,this.execute=new c.bkB}static#e=this.ɵfac=function(e){return new(e||AdministrationDictRepairItem)(c.rXU(u.H),c.rXU(z.o),c.rXU(h.B),c.rXU(P.y),c.rXU(c.zZn))};static#t=this.ɵcmp=c.VBU({type:AdministrationDictRepairItem,selectors:[["administration-dict-repair-item"]],inputs:{itemlabel:"itemlabel"},outputs:{execute:"execute"},decls:8,vars:2,consts:[[1,"slds-box","slds-box_xx-small","slds-m-bottom--xx-small"],[1,"slds-grid","slds-grid--vertical-align-center","slds-grid--align-spread"],[1,"slds-text-heading--small"],[1,"slds-p-horizontal--x-small",3,"label"],[1,"slds-button","slds-button--icon","slds-button--icon-border",3,"click"],["icon","custom_apps"],[1,"slds-p-around--x-small"],["length","long",1,"slds-grow",3,"label"]],template:function(e,t){1&e&&(c.j41(0,"div",0)(1,"div",1)(2,"div",2),c.nrm(3,"system-label",3),c.k0s(),c.j41(4,"button",4),c.bIt("click",(function(){return t.execute.emit(!0)})),c.nrm(5,"system-button-icon",5),c.k0s()(),c.j41(6,"div",6),c.nrm(7,"system-label",7),c.k0s()()),2&e&&(c.R7$(3),c.Y8G("label",t.itemlabel),c.R7$(4),c.Y8G("label",t.itemlabel))},dependencies:[L.t,j.W],encapsulation:2})}return AdministrationDictRepairItem})();var zi=s(62335);function Pi(e,t){if(1&e){const e=c.RV6();c.j41(0,"tr")(1,"td",12)(2,"div",13)(3,"system-checkbox",14),c.mxI("ngModelChange",(function(t){const s=c.eBV(e).$implicit;return c.DH7(s.selected,t)||(s.selected=t),c.Njj(t)})),c.k0s(),c.j41(4,"div")(5,"p"),c.EFF(6),c.k0s(),c.j41(7,"p"),c.EFF(8),c.k0s()()()()()}if(2&e){const e=t.$implicit;c.R7$(3),c.R50("ngModel",e.selected),c.R7$(3),c.JRh(e.comment),c.R7$(2),c.JRh(e.statement)}}function Ji(e,t){if(1&e&&c.nrm(0,"textarea",19),2&e){const e=t.$implicit;c.Y8G("value",e)}}function qi(e,t){if(1&e&&(c.j41(0,"div",15),c.nrm(1,"system-label",16),c.j41(2,"div",17),c.DNE(3,Ji,1,1,"textarea",18),c.k0s()()),2&e){const e=c.XpG();c.R7$(3),c.Y8G("ngForOf",e.dbErrors)}}function Wi(e,t){1&e&&(c.j41(0,"div",17),c.nrm(1,"system-label",20),c.k0s())}function Ki(e,t){if(1&e){const e=c.RV6();c.j41(0,"button",7),c.bIt("click",(function(){c.eBV(e);const t=c.XpG();return c.Njj(t.copy2clipboard())})),c.nrm(1,"system-label",21),c.k0s()}if(2&e){const e=c.XpG();c.Y8G("disabled",e.wholeSQL.length<=0)}}let Qi=(()=>{class AdministrationDictRepairModal{constructor(e,t,s,i){this.backend=e,this.toast=t,this.language=s,this.modal=i,this.synced=!1,this.sql=[],this.dbErrors=[],this.self={}}close(){this.self.destroy()}get hidden(){return null==typeof navigator.clipboard}doRepair(){this.modal.openModal("SystemLoadingModal").subscribe((e=>{const t=this.sql.filter((e=>e.selected));this.backend.postRequest("admin/repair/database",{},{selectedqueries:t}).subscribe((t=>{t.response?t.synced?(this.toast.sendToast(this.language.getLabel("LBL_REPAIR_DATABASE_ALREADY_SYNCED"),"success"),this.close()):(this.toast.sendToast(this.language.getLabel("LBL_REPAIR_DATABASE_SYNCED"),"success"),this.close()):this.dbErrors=t.errors,e.instance.self.destroy()}),(t=>{if(500===t.status)this.toast.sendAlert(t.message,"error"),this.close(),e.instance.self.destroy()}))}))}copy2clipboard(){const e=this.sql.filter((e=>e.selected)).map((e=>e.statement)).toString().replace(/;,/g,";\n");navigator.clipboard.writeText(e).then((e=>{this.toast.sendToast(this.language.getLabel("LBL_COPIED_TO_CLIPBOARD"),"info")}))}selectAll(){this.sql.forEach((e=>{e.selected=!0}))}static#e=this.ɵfac=function(e){return new(e||AdministrationDictRepairModal)(c.rXU(u.H),c.rXU(z.o),c.rXU(h.B),c.rXU(P.y))};static#t=this.ɵcmp=c.VBU({type:AdministrationDictRepairModal,selectors:[["administration-dict-repair-modal"]],decls:15,vars:7,consts:[[3,"close"],["label","LBL_REPAIR_DICTIONARY"],[3,"margin"],["system-multi-select-checkboxes","",1,"slds-table","slds-table_bordered","slds-table_cell-buffer"],[4,"ngFor","ngForOf"],["class","slds-form-element",4,"ngIf"],["class","slds-form-element__control",4,"ngIf"],[1,"slds-button","slds-button--neutral",3,"disabled","click"],["label","LBL_SELECT_ALL"],["class","slds-button slds-button--neutral",3,"disabled","click",4,"ngIf"],[1,"slds-button","slds-button--brand",3,"disabled","click"],["label","LBL_EXECUTE"],[2,"white-space","normal"],[1,"slds-grid","slds-grid--vertical-align-center","slds-p-around--xx-small"],[3,"ngModel","ngModelChange"],[1,"slds-form-element"],["label","LBL_LAST_DB_ERROR"],[1,"slds-form-element__control"],["disabled","","class","slds-textarea","style","min-height: 400px;",3,"value",4,"ngFor","ngForOf"],["disabled","",1,"slds-textarea",2,"min-height","400px",3,"value"],["label","LBL_REPAIR_DATABASE_ALREADY_SYNCED"],["label","LBL_COPY_TO_CLIPBOARD"]],template:function(e,t){1&e&&(c.j41(0,"system-modal")(1,"system-modal-header",0),c.bIt("close",(function(){return t.close()})),c.nrm(2,"system-label",1),c.k0s(),c.j41(3,"system-modal-content",2)(4,"table",3)(5,"tbody"),c.DNE(6,Pi,9,3,"tr",4),c.k0s()(),c.DNE(7,qi,4,1,"div",5)(8,Wi,2,0,"div",6),c.k0s(),c.j41(9,"system-modal-footer")(10,"button",7),c.bIt("click",(function(){return t.selectAll()})),c.nrm(11,"system-label",8),c.k0s(),c.DNE(12,Ki,2,1,"button",9),c.j41(13,"button",10),c.bIt("click",(function(){return t.doRepair()})),c.nrm(14,"system-label",11),c.k0s()()()),2&e&&(c.R7$(3),c.Y8G("margin","none"),c.R7$(3),c.Y8G("ngForOf",t.sql),c.R7$(),c.Y8G("ngIf",t.dbErrors.length>0),c.R7$(),c.Y8G("ngIf",""==t.sql),c.R7$(2),c.Y8G("disabled",t.sql.length<=0),c.R7$(2),c.Y8G("ngIf",!t.hidden),c.R7$(),c.Y8G("disabled",t.sql.length<=0))},dependencies:[i.Sq,i.bT,n.BC,n.vS,W.f,j.W,ot.D,dt.I,rt.Q,fs.C,zi.p],encapsulation:2})}return AdministrationDictRepairModal})(),Zi=(()=>{class AdministrationDictRepairACLRoles{constructor(e,t,s,i){this.backend=e,this.toast=t,this.language=s,this.modal=i}executeRepairRoles(){let e=this.modal.await(this.language.getLabel("LBL_LOADING"));this.backend.getRequest("admin/repair/aclroles").subscribe((t=>{e.emit(!0),t?this.toast.sendToast(this.language.getLabel("LBL_ROLES_REPAIRED"),"success"):this.toast.sendToast(this.language.getLabel("LBL_ERROR"),"error")}))}static#e=this.ɵfac=function(e){return new(e||AdministrationDictRepairACLRoles)(c.rXU(u.H),c.rXU(z.o),c.rXU(h.B),c.rXU(P.y))};static#t=this.ɵcmp=c.VBU({type:AdministrationDictRepairACLRoles,selectors:[["administration-dict-repair-acl-roles"]],decls:6,vars:0,consts:[[1,"slds-grid","slds-grid--vertical-align-center","slds-grid--align-spread","slds-p-vertical--xx-small","slds-border--bottom"],["icon","custom_apps","size","x-small"],["label","LBL_REPAIR_ACL_ROLES",1,"slds-p-horizontal--x-small"],["label","LBL_REPAIR_ACL_ROLES","length","long",1,"slds-grow"],[1,"slds-button","slds-button--neutral","slds-button--small",3,"click"],["label","LBL_EXECUTE"]],template:function(e,t){1&e&&(c.j41(0,"div",0),c.nrm(1,"system-utility-icon",1)(2,"system-label",2)(3,"system-label",3),c.j41(4,"button",4),c.bIt("click",(function(){return t.executeRepairRoles()})),c.nrm(5,"system-label",5),c.k0s()())},dependencies:[j.W,F.B],encapsulation:2})}return AdministrationDictRepairACLRoles})();function en(e,t){if(1&e&&(c.j41(0,"option",18),c.EFF(1),c.k0s()),2&e){const e=t.$implicit;c.Y8G("value",e),c.R7$(),c.JRh(e)}}function tn(e,t){if(1&e&&(c.j41(0,"div"),c.EFF(1),c.k0s()),2&e){const e=c.XpG().$implicit;c.R7$(),c.SpI(" ",e.value.name," ")}}function sn(e,t){1&e&&(c.j41(0,"div"),c.nrm(1,"system-icon",25),c.k0s())}function nn(e,t){if(1&e&&(c.j41(0,"div"),c.EFF(1),c.k0s()),2&e){const e=c.XpG().$implicit;c.R7$(),c.SpI(" ",e.value.name," ")}}function ln(e,t){1&e&&(c.j41(0,"div"),c.nrm(1,"system-icon",25),c.k0s())}function an(e,t){if(1&e){const e=c.RV6();c.j41(0,"div")(1,"system-checkbox",26),c.mxI("ngModelChange",(function(t){c.eBV(e);const s=c.XpG().$implicit;return c.DH7(s.value.todelete,t)||(s.value.todelete=t),c.Njj(t)})),c.k0s()()}if(2&e){const e=c.XpG().$implicit;c.R7$(),c.R50("ngModel",e.value.todelete),c.Y8G("disabled",!e.value.db_available)}}const on=()=>({"background-color":"#C7D6A9"}),dn=()=>({"background-color":"#EDD0AB"});function rn(e,t){if(1&e&&(c.j41(0,"tr",23)(1,"td"),c.DNE(2,tn,2,1,"div",13)(3,sn,2,0,"div",13),c.k0s(),c.j41(4,"td",24),c.DNE(5,nn,2,1,"div",13)(6,ln,2,0,"div",13),c.k0s(),c.j41(7,"td"),c.DNE(8,an,2,2,"div",13),c.k0s()()),2&e){const e=t.$implicit;c.Y8G("ngStyle",e.value.vardef_available&&e.value.db_available?c.lJ4(6,on):c.lJ4(7,dn)),c.R7$(2),c.Y8G("ngIf",e.value.vardef_available),c.R7$(),c.Y8G("ngIf",!e.value.vardef_available),c.R7$(2),c.Y8G("ngIf",e.value.db_available),c.R7$(),c.Y8G("ngIf",!e.value.db_available),c.R7$(2),c.Y8G("ngIf",e.value.db_available&&!e.value.vardef_available)}}function cn(e,t){if(1&e&&(c.j41(0,"div")(1,"table",19)(2,"thead")(3,"tr",20)(4,"th",21),c.EFF(5,"Vardef"),c.k0s(),c.j41(6,"th",21),c.EFF(7,"Database column"),c.k0s(),c.nrm(8,"th",21),c.k0s()(),c.j41(9,"tbody"),c.DNE(10,rn,9,8,"tr",22),c.nI1(11,"keyvalue"),c.k0s()()()),2&e){const e=c.XpG();c.R7$(10),c.Y8G("ngForOf",c.bMT(11,1,e.allFields))}}let mn=(()=>{class AdministrationDictRepairDbColumnsModal{constructor(e,t,s,i,n,l){this.backend=e,this.toast=t,this.language=s,this.modal=i,this.metadata=n,this.helper=l,this.self={},this._module="",this.allFields=[],this.modules=this.metadata.getModules(),this.modules.sort()}get module(){return this._module}set module(e){e!=this._module&&(this._module=e,this.mergeColumns())}mergeColumns(){this.allFields=[],this.backend.getRequest("dictionary/browser/"+this.module+"/dbcolumns").subscribe((e=>{const t=this.metadata.getModuleFields(this.module);for(let e in t)"non-db"!=t[e].source&&this.allFields.unshift({name:t[e].name,vardef_available:!0});for(let t in e){let s=e[t].name,i=!1;for(let e in this.allFields)this.allFields[e].name==s&&(this.allFields[e].db_available=!0,this.allFields.push(this.allFields[e]),this.allFields.splice(e,1),i=!0);i||this.allFields.unshift({name:s,db_available:!0})}}))}selectAll(){for(let e of this.allFields.filter((e=>e.db_available&&!e.vardef_available)))e.todelete=!0}get canSelectAll(){return this.allFields&&this.allFields.filter((e=>e.db_available&&!e.vardef_available&&!e.todelete)).length>0}get canDelete(){return this.allFields&&this.allFields.filter((e=>e.todelete)).length>0}close(){this.self.destroy()}doRepair(){let e="";for(let t of this.allFields.filter((e=>e.todelete)))e+="- "+t.name+"\r\n";this.helper.confirm(this.language.getLabel("LBL_CLEAN_DB_COLUMNS"),this.language.getLabel("MSG_DELETE_COLUMNS","long")+"\r\n\r\n"+e).subscribe((e=>{e&&this.delete()}))}delete(){this.modal.openModal("SystemLoadingModal").subscribe((e=>{let t={dbcolumns:this.allFields.filter((e=>e.todelete)),module:this.module};this.backend.postRequest("admin/repair/dbcolumns",{},t).subscribe((t=>{t?(this.toast.sendToast(this.language.getLabel("MSG_SUCCESSFULLY_EXECUTED"),"success"),this.mergeColumns()):(this.toast.sendToast(this.language.getLabel("LBL_ERROR"),"error"),this.mergeColumns()),e.instance.self.destroy()}))}))}static#e=this.ɵfac=function(e){return new(e||AdministrationDictRepairDbColumnsModal)(c.rXU(u.H),c.rXU(z.o),c.rXU(h.B),c.rXU(P.y),c.rXU(p.yu),c.rXU(q.d))};static#t=this.ɵcmp=c.VBU({type:AdministrationDictRepairDbColumnsModal,selectors:[["administration-dict-repair-db-columns-modal"]],decls:20,vars:6,consts:[[3,"close"],["label","LBL_CLEAN_DB_COLUMNS"],["margin","none",3,"grow"],[1,"slds-p-around--x-small","slds-border--bottom"],[1,"slds-form-element","slds-grid","slds-grid--vertical-align-center"],["for","moduleselect",1,"slds-form-element__label"],["label","LBL_MODULE"],[1,"slds-form-element__control","slds-col"],[1,"slds-select_container"],["id","moduleselect",1,"slds-select",3,"ngModel","ngModelChange"],["value",""],["label","LBL_SELECT"],[3,"value",4,"ngFor","ngForOf"],[4,"ngIf"],[1,"slds-button","slds-button--neutral",3,"disabled","click"],["label","LBL_SELECT_ALL"],[1,"slds-button","slds-button--brand",3,"disabled","click"],["label","LBL_DELETE_IRREVOCABLY"],[3,"value"],[1,"slds-table","slds-table--bordered","slds-table--cell-buffer"],[1,"slds-text-title--caps"],["scope","col"],[3,"ngStyle",4,"ngFor","ngForOf"],[3,"ngStyle"],[1,"slds-truncate"],["icon","first_non_empty","size","x-small"],[3,"ngModel","disabled","ngModelChange"]],template:function(e,t){1&e&&(c.j41(0,"system-modal")(1,"system-modal-header",0),c.bIt("close",(function(){return t.close()})),c.nrm(2,"system-label",1),c.k0s(),c.j41(3,"system-modal-content",2)(4,"div",3)(5,"div",4)(6,"label",5),c.nrm(7,"system-label",6),c.k0s(),c.j41(8,"div",7)(9,"div",8)(10,"select",9),c.mxI("ngModelChange",(function(e){return c.DH7(t.module,e)||(t.module=e),e})),c.j41(11,"option",10),c.nrm(12,"system-label",11),c.k0s(),c.DNE(13,en,2,2,"option",12),c.k0s()()()()(),c.DNE(14,cn,12,3,"div",13),c.k0s(),c.j41(15,"system-modal-footer")(16,"button",14),c.bIt("click",(function(){return t.selectAll()})),c.nrm(17,"system-label",15),c.k0s(),c.j41(18,"button",16),c.bIt("click",(function(){return t.doRepair()})),c.nrm(19,"system-label",17),c.k0s()()()),2&e&&(c.R7$(3),c.Y8G("grow",!0),c.R7$(7),c.R50("ngModel",t.module),c.R7$(3),c.Y8G("ngForOf",t.modules),c.R7$(),c.Y8G("ngIf",t.module),c.R7$(2),c.Y8G("disabled",!t.canSelectAll),c.R7$(2),c.Y8G("disabled",!t.canDelete))},dependencies:[i.Sq,i.bT,i.B3,n.xH,n.y7,n.wz,n.BC,n.vS,W.f,E.J,j.W,ot.D,dt.I,rt.Q,fs.C,i.lG],encapsulation:2})}return AdministrationDictRepairDbColumnsModal})();var un=s(43308);function gn(e,t){if(1&e){const e=c.RV6();c.j41(0,"tr",40)(1,"td",41)(2,"system-checkbox",42),c.mxI("ngModelChange",(function(t){const s=c.eBV(e).$implicit;return c.DH7(s.selected,t)||(s.selected=t),c.Njj(t)})),c.bIt("ngModelChange",(function(t){const s=c.eBV(e).$implicit,i=c.XpG();return c.Njj(i.selectTable(t,s.table_name))})),c.k0s()(),c.j41(3,"td")(4,"div",30),c.EFF(5),c.k0s()(),c.j41(6,"td")(7,"div",30),c.EFF(8),c.k0s()(),c.j41(9,"td")(10,"div",30),c.EFF(11),c.k0s()()()}if(2&e){const e=t.$implicit;c.R7$(2),c.R50("ngModel",e.selected),c.R7$(3),c.SpI(" ",e.table_name," "),c.R7$(3),c.SpI(" ",e.character_set_name," "),c.R7$(3),c.SpI(" ",e.collation_name," ")}}function hn(e,t){1&e&&(c.j41(0,"tbody")(1,"tr",40)(2,"td"),c.nrm(3,"system-stencil"),c.k0s(),c.j41(4,"td"),c.nrm(5,"system-stencil"),c.k0s(),c.j41(6,"td"),c.nrm(7,"system-stencil"),c.k0s(),c.j41(8,"td"),c.nrm(9,"system-stencil"),c.k0s()(),c.j41(10,"tr",40)(11,"td"),c.nrm(12,"system-stencil"),c.k0s(),c.j41(13,"td"),c.nrm(14,"system-stencil"),c.k0s(),c.j41(15,"td"),c.nrm(16,"system-stencil"),c.k0s(),c.j41(17,"td"),c.nrm(18,"system-stencil"),c.k0s()(),c.j41(19,"tr",40)(20,"td"),c.nrm(21,"system-stencil"),c.k0s(),c.j41(22,"td"),c.nrm(23,"system-stencil"),c.k0s(),c.j41(24,"td"),c.nrm(25,"system-stencil"),c.k0s(),c.j41(26,"td"),c.nrm(27,"system-stencil"),c.k0s()()())}let bn=(()=>{class AdministrationDictRepairConvertDBCharsetModal{constructor(e,t,s){this.backend=e,this.toast=t,this.language=s,this.tables=[],this.filteredTables=[],this.selectedTables=[]}get listFilterTerm(){return this._listFilterTerm}set listFilterTerm(e){this._listFilterTerm=e,this.filteredTables=this.tables.filter((t=>t.table_name.indexOf(e)>-1))}ngOnInit(){this.loadDBTables()}close(){this.self.destroy()}convertTables(){this.close();const e={tables:this.filteredTables.filter((e=>!!e.selected)).map((e=>e.table_name)),charset:this.convertToCharset};this.backend.postRequest("admin/convert/tables",{},e).subscribe((e=>{e?this.toast.sendToast(this.language.getLabel("MSG_SUCCESSFULLY_EXECUTED"),"success"):this.toast.sendToast(this.language.getLabel("ERR_FAILED_TO_EXECUTE"),"error")}))}convertDatabase(){this.close();const e={charset:this.convertToCharset};this.backend.postRequest("admin/convert/database",{},e).subscribe((e=>{e?this.toast.sendToast(this.language.getLabel("MSG_SUCCESSFULLY_EXECUTED"),"success"):this.toast.sendToast(this.language.getLabel("ERR_FAILED_TO_EXECUTE"),"error")}))}toggleSelectAll(e){this.selectedTables=e?this.filteredTables.map((e=>e.table_name)):[],this.filteredTables.forEach((t=>t.selected=e))}selectTable(e,t){e&&!this.selectedTables.some((e=>e==t))?this.selectedTables.push(t):e||(this.selectedTables=this.selectedTables.filter((e=>e!=t)))}loadDBTables(){this.backend.getRequest("admin/charset/database").subscribe((e=>{this.tables=e.tables,this.filteredTables=this.tables,this.databaseData=e.database}))}static#e=this.ɵfac=function(e){return new(e||AdministrationDictRepairConvertDBCharsetModal)(c.rXU(u.H),c.rXU(z.o),c.rXU(h.B))};static#t=this.ɵcmp=c.VBU({type:AdministrationDictRepairConvertDBCharsetModal,selectors:[["administration-dict-repair-convert-db-charset-modal"]],decls:58,vars:12,consts:[[3,"close"],["label","LBL_CONVERT_DATABASE_CHARSET"],["margin","none",3,"grow"],[1,"slds-grid","slds-grid--vertical","slds-height_full"],[1,"slds-grid","slds-p-around--x-small"],[1,"slds-grow"],[1,"slds-grid","slds-grid--vertical-align-center"],["label","LBL_DATABASE",1,"slds-m-right--x-small","slds-text-title--caps"],["label","LBL_CHARSET",1,"slds-m-right--x-small","slds-text-title--caps"],["label","LBL_COLLATION",1,"slds-m-right--x-small","slds-text-title--caps"],[1,"slds-grid","slds-grid--vertical-align-end"],[1,"slds-form-element","slds-m-right--x-small"],[1,"slds-form-element__label"],["label","LBL_CONVERT_TO_CHARSET"],[1,"slds-form-element__control"],[1,"slds-select_container"],[1,"slds-select",3,"ngModel","ngModelChange"],["value","utf8mb4"],["value","utf8"],[1,"slds-button","slds-button--brand",2,"margin-bottom","1px",3,"disabled","click"],["label","LBL_CONVERT_DATABASE"],[1,"slds-grid","slds-grid--vertical-align-center","slds-border--bottom","slds-p-around--x-small"],["type","text","system-placeholder","LBL_SEARCH",1,"slds-input","slds-m-right--x-small",3,"ngModel","ngModelChange"],["icon","filterList","size","x-small"],[1,"slds-scrollable--y","slds-grow",2,"min-height","0"],["role","grid",1,"slds-table","slds-table_bordered","slds-table_fixed-layout","slds-table--header-fixed"],[1,"slds-line-height_reset"],[1,"slds-cell-shrink"],[3,"indeterminate","ngModel","ngModelChange"],["scope","col"],[1,"slds-truncate"],["label","LBL_NAME"],["label","LBL_CHARSET"],["label","LBL_COLLATION"],["class","slds-hint-parent",4,"ngFor","ngForOf"],[4,"ngIf"],[1,"slds-button","slds-button--neutral",3,"click"],["label","LBL_CANCEL"],[1,"slds-button","slds-button--brand",3,"disabled","click"],["label","LBL_CONVERT_TABLES"],[1,"slds-hint-parent"],["role","gridcell",1,"slds-text-align_right"],[3,"ngModel","ngModelChange"]],template:function(e,t){1&e&&(c.j41(0,"system-modal")(1,"system-modal-header",0),c.bIt("close",(function(){return t.close()})),c.nrm(2,"system-label",1),c.k0s(),c.j41(3,"system-modal-content",2)(4,"div",3)(5,"div",4)(6,"div",5)(7,"div",6),c.nrm(8,"system-label",7),c.j41(9,"span"),c.EFF(10),c.k0s()(),c.j41(11,"div",6),c.nrm(12,"system-label",8),c.j41(13,"span"),c.EFF(14),c.k0s()(),c.j41(15,"div",6),c.nrm(16,"system-label",9),c.j41(17,"span"),c.EFF(18),c.k0s()()(),c.j41(19,"div",10)(20,"div",11)(21,"label",12),c.nrm(22,"system-label",13),c.k0s(),c.j41(23,"div",14)(24,"div",15)(25,"select",16),c.mxI("ngModelChange",(function(e){return c.DH7(t.convertToCharset,e)||(t.convertToCharset=e),e})),c.j41(26,"option",17),c.EFF(27," UTF8 Multibyte 4 "),c.k0s(),c.j41(28,"option",18),c.EFF(29," utf8 "),c.k0s()()()()(),c.j41(30,"button",19),c.bIt("click",(function(){return t.convertDatabase()})),c.nrm(31,"system-label",20),c.k0s()()(),c.j41(32,"div",21)(33,"input",22),c.mxI("ngModelChange",(function(e){return c.DH7(t.listFilterTerm,e)||(t.listFilterTerm=e),e})),c.k0s(),c.nrm(34,"system-utility-icon",23),c.k0s(),c.j41(35,"div",24)(36,"table",25)(37,"thead")(38,"tr",26)(39,"th",27)(40,"system-checkbox",28),c.bIt("ngModelChange",(function(e){return t.toggleSelectAll(e)})),c.k0s()(),c.j41(41,"th",29)(42,"div",30),c.nrm(43,"system-label",31),c.k0s()(),c.j41(44,"th",29)(45,"div",30),c.nrm(46,"system-label",32),c.k0s()(),c.j41(47,"th",29)(48,"div",30),c.nrm(49,"system-label",33),c.k0s()()()(),c.j41(50,"tbody"),c.DNE(51,gn,12,4,"tr",34),c.k0s(),c.DNE(52,hn,28,0,"tbody",35),c.k0s()()()(),c.j41(53,"system-modal-footer")(54,"button",36),c.bIt("click",(function(){return t.close()})),c.nrm(55,"system-label",37),c.k0s(),c.j41(56,"button",38),c.bIt("click",(function(){return t.convertTables()})),c.nrm(57,"system-label",39),c.k0s()()()),2&e&&(c.R7$(3),c.Y8G("grow",!0),c.R7$(7),c.SpI(" ",null==t.databaseData?null:t.databaseData.database," "),c.R7$(4),c.SpI(" ",null==t.databaseData?null:t.databaseData.charset," "),c.R7$(4),c.SpI(" ",null==t.databaseData?null:t.databaseData.collation," "),c.R7$(7),c.R50("ngModel",t.convertToCharset),c.R7$(5),c.Y8G("disabled",!t.convertToCharset),c.R7$(3),c.R50("ngModel",t.listFilterTerm),c.R7$(7),c.Y8G("indeterminate",t.selectedTables.length>0&&t.selectedTables.length<t.filteredTables.length)("ngModel",t.selectedTables.length==t.filteredTables.length),c.R7$(11),c.Y8G("ngForOf",t.filteredTables),c.R7$(),c.Y8G("ngIf",0===t.tables.length),c.R7$(4),c.Y8G("disabled",0==t.selectedTables.length||!t.convertToCharset))},dependencies:[i.Sq,i.bT,n.xH,n.y7,n.me,n.wz,n.BC,n.vS,W.f,j.W,ot.D,dt.I,rt.Q,fs.C,un.O,F.B,si.m],encapsulation:2})}return AdministrationDictRepairConvertDBCharsetModal})();var pn=s(57302);function fn(e,t){if(1&e&&(c.j41(0,"option",3),c.nrm(1,"system-label",4),c.k0s()),2&e){const e=t.$implicit;c.Y8G("ngValue",e.value),c.R7$(),c.Y8G("label",e.label)}}let yn=(()=>{class AdministrationConfigEditorEnum{set _value(e){this.value=e,this._newValue.emit(e)}get _value(){return"number"==typeof this.value?this.value.toString():this.value}constructor(e,t,s,i,n){this.metadata=e,this.language=t,this.backend=s,this.modal=i,this.toast=n,this.options=[],this._newValue=new c.bkB}static#e=this.ɵfac=function(e){return new(e||AdministrationConfigEditorEnum)(c.rXU(p.yu),c.rXU(h.B),c.rXU(u.H),c.rXU(P.y),c.rXU(z.o))};static#t=this.ɵcmp=c.VBU({type:AdministrationConfigEditorEnum,selectors:[["administration-configeditor-enum"]],inputs:{options:"options",value:"value"},outputs:{_newValue:"newvalue"},decls:3,vars:2,consts:[[1,"slds-select_container"],[1,"slds-select",3,"ngModel","ngModelChange"],[3,"ngValue",4,"ngFor","ngForOf"],[3,"ngValue"],[3,"label"]],template:function(e,t){1&e&&(c.j41(0,"div",0)(1,"select",1),c.mxI("ngModelChange",(function(e){return c.DH7(t._value,e)||(t._value=e),e})),c.DNE(2,fn,2,2,"option",2),c.k0s()()),2&e&&(c.R7$(),c.R50("ngModel",t._value),c.R7$(),c.Y8G("ngForOf",t.options))},dependencies:[i.Sq,n.xH,n.y7,n.wz,n.BC,n.vS,j.W],encapsulation:2})}return AdministrationConfigEditorEnum})();function _n(e,t){if(1&e){const e=c.RV6();c.qex(0),c.j41(1,"button",12),c.bIt("click",(function(){c.eBV(e);const t=c.XpG();return c.Njj(t.copyData())})),c.nrm(2,"system-button-icon",13),c.k0s(),c.j41(3,"button",14),c.bIt("click",(function(){c.eBV(e);const t=c.XpG();return c.Njj(t.pasteData())})),c.nrm(4,"system-button-icon",15),c.k0s(),c.bVm()}if(2&e){const e=c.XpG();c.R7$(),c.Y8G("disabled",e.loading),c.R7$(2),c.Y8G("disabled",e.loading)}}function vn(e,t){if(1&e&&(c.j41(0,"div"),c.nrm(1,"workbench-config-label",21),c.k0s()),2&e){const e=c.XpG().$implicit,t=c.XpG();c.R7$(),c.Y8G("option",e.label)("description",t.language.getLabel("LBL_TECHNICAL_NAME","")+": "+e.name+"\n"+t.language.getLabel(e.label,"","long"))}}function kn(e,t){if(1&e&&(c.j41(0,"div"),c.EFF(1),c.k0s()),2&e){const e=c.XpG().$implicit;c.R7$(),c.JRh(e.name)}}function Rn(e,t){if(1&e){const e=c.RV6();c.j41(0,"system-checkbox",22),c.mxI("ngModelChange",(function(t){c.eBV(e);const s=c.XpG().$implicit,i=c.XpG();return c.DH7(i.configvalues[s.name],t)||(i.configvalues[s.name]=t),c.Njj(t)})),c.k0s()}if(2&e){const e=c.XpG().$implicit,t=c.XpG();c.R50("ngModel",t.configvalues[e.name])}}function Ln(e,t){if(1&e){const e=c.RV6();c.j41(0,"administration-configeditor-enum",23),c.bIt("newvalue",(function(t){c.eBV(e);const s=c.XpG().$implicit,i=c.XpG();return c.Njj(i.configvalues[s.name]=t)})),c.k0s()}if(2&e){const e=c.XpG().$implicit,t=c.XpG();c.Y8G("value",t.configvalues[e.name])("options",e.options)}}function En(e,t){if(1&e){const e=c.RV6();c.j41(0,"div",24)(1,"input",25),c.mxI("ngModelChange",(function(t){c.eBV(e);const s=c.XpG().$implicit,i=c.XpG();return c.DH7(i.configvalues[s.name],t)||(i.configvalues[s.name]=t),c.Njj(t)})),c.k0s()()}if(2&e){const e=c.XpG().$implicit,t=c.XpG();c.R7$(),c.Y8G("disabled",t.loading),c.R50("ngModel",t.configvalues[e.name])}}function jn(e,t){if(1&e&&(c.j41(0,"tr",16)(1,"td"),c.DNE(2,vn,2,2,"div",3)(3,kn,2,1,"div",3),c.k0s(),c.j41(4,"td"),c.qex(5,17),c.DNE(6,Rn,1,1,"system-checkbox",18)(7,Ln,1,2,"administration-configeditor-enum",19)(8,En,2,2,"div",20),c.bVm(),c.k0s()()),2&e){const e=t.$implicit;c.R7$(2),c.Y8G("ngIf",e.label),c.R7$(),c.Y8G("ngIf",!e.label),c.R7$(2),c.Y8G("ngSwitch",e.type),c.R7$(),c.Y8G("ngSwitchCase","bool"),c.R7$(),c.Y8G("ngSwitchCase","enum")}}let Fn=(()=>{class AdministrationConfigEditor{constructor(e,t,s,i,n){this.metadata=e,this.language=t,this.backend=s,this.modal=i,this.toast=n,this.componentconfig={},this.configvalues={},this.loading=!0}ngOnInit(){this.modal.openModal("SystemLoadingModal").subscribe((e=>{this.backend.getRequest("configuration/configurator/editor/"+this.componentconfig.category).subscribe((t=>{this.configvalues=t,this.loading=!1,e.instance.self.destroy()}))}))}get items(){let e=[];for(let t of this.componentconfig.items)!0!==t.hidden&&e.push(t);return e}save(){this.loading=!0,this.modal.openModal("SystemLoadingModal").subscribe((e=>{e.instance.messagelabel="LBL_SAVING_DATA",this.backend.postRequest("configuration/configurator/editor/"+this.componentconfig.category,[],{config:this.configvalues}).subscribe((t=>{this.loading=!1,e.instance.self.destroy()}))}))}get canCopyPaste(){return!!navigator.clipboard?.readText}copyData(){let e={};for(let t of this.componentconfig.items)e[t.name]=this.configvalues.hasOwnProperty(t.name)?this.configvalues[t.name]:null;navigator.clipboard.writeText(JSON.stringify(e)),this.toast.sendToast("Data of all fields copied to clipboard.","success")}pasteData(){navigator.clipboard.readText().then((e=>{let t,s=0,i=0;try{t=JSON.parse(e)}catch(e){return void this.toast.sendToast("No valid configuration data found in clipboard.","error")}for(let e of this.componentconfig.items)t.hasOwnProperty(e.name)?(this.configvalues[e.name]=t[e.name],s++):(this.configvalues[e.name]=null,i++);let n=Object.keys(t).length-s,l="";l+=n?n+" unknown values ignored. ":"",l+=i?i+" fields emptied, because no data definied. ":"",this.toast.sendToast("Data pasted from clipboard successfully. "+l+"Don´t forget to save data.","success",null,25)}))}get label(){return this.componentconfig.label?this.componentconfig.label:"LBL_EDITOR"}static#e=this.ɵfac=function(e){return new(e||AdministrationConfigEditor)(c.rXU(p.yu),c.rXU(h.B),c.rXU(u.H),c.rXU(P.y),c.rXU(z.o))};static#t=this.ɵcmp=c.VBU({type:AdministrationConfigEditor,selectors:[["administration-configeditor"]],decls:15,vars:3,consts:[[1,"slds-grid","slds-grid--align-spread","slds-p-around--medium"],[1,"slds-text-heading--medium"],[3,"label"],[4,"ngIf"],[1,"slds-button","slds-button--neutral",3,"click"],["label","LBL_SAVE"],[1,"slds-table","slds-table--bordered","slds-table--cell-buffer"],[1,"slds-text-title--caps"],["scope","col"],["label","LBL_NAME"],["label","LBL_VALUE"],["style","height: 41px; vertical-align: middle","class","slds-align-middle",4,"ngFor","ngForOf"],[1,"slds-button","slds-button--icon-border","slds-button--neutral","slds-col_bump-left",3,"disabled","click"],["icon","copy","size","medium"],[1,"slds-button","slds-button--icon-border","slds-button--neutral","slds-m-right--medium",3,"disabled","click"],["icon","paste","size","medium"],[1,"slds-align-middle",2,"height","41px","vertical-align","middle"],[3,"ngSwitch"],[3,"ngModel","ngModelChange",4,"ngSwitchCase"],[3,"value","options","newvalue",4,"ngSwitchCase"],["class","slds-form-element__control",4,"ngSwitchDefault"],[3,"option","description"],[3,"ngModel","ngModelChange"],[3,"value","options","newvalue"],[1,"slds-form-element__control"],["type","text",1,"slds-input",3,"disabled","ngModel","ngModelChange"]],template:function(e,t){1&e&&(c.j41(0,"div",0)(1,"h2",1),c.nrm(2,"system-label",2),c.k0s(),c.DNE(3,_n,5,2,"ng-container",3),c.j41(4,"button",4),c.bIt("click",(function(){return t.save()})),c.nrm(5,"system-label",5),c.k0s()(),c.j41(6,"table",6)(7,"thead")(8,"tr",7)(9,"th",8),c.nrm(10,"system-label",9),c.k0s(),c.j41(11,"th",8),c.nrm(12,"system-label",10),c.k0s()()(),c.j41(13,"tbody"),c.DNE(14,jn,9,5,"tr",11),c.k0s()()),2&e&&(c.R7$(2),c.Y8G("label",t.label),c.R7$(),c.Y8G("ngIf",t.canCopyPaste),c.R7$(11),c.Y8G("ngForOf",t.items))},dependencies:[i.Sq,i.bT,i.ux,i.e1,i.fG,n.me,n.BC,n.vS,L.t,W.f,j.W,pn.y,yn],encapsulation:2})}return AdministrationConfigEditor})();var Mn=s(35911),xn=s(41731),In=s(12883);function Gn(e,t){1&e&&c.nrm(0,"system-stencil")}function An(e,t){if(1&e){const e=c.RV6();c.j41(0,"div",5)(1,"div",6),c.nrm(2,"system-label",7),c.k0s(),c.j41(3,"div",8)(4,"div",9),c.EFF(5),c.k0s(),c.j41(6,"button",10),c.bIt("click",(function(){c.eBV(e);const t=c.XpG(2);return c.Njj(t.view.setEditMode())})),c.nrm(7,"system-button-icon",11),c.k0s()()()}if(2&e){const e=c.XpG(2);c.R7$(5),c.SpI(" ",e.model.data.method," "),c.R7$(2),c.Y8G("icon","edit")}}function Sn(e,t){1&e&&c.nrm(0,"system-stencil")}function Cn(e,t){if(1&e){const e=c.RV6();c.j41(0,"div",5)(1,"div",6),c.nrm(2,"system-label",12),c.k0s(),c.j41(3,"div",8)(4,"div",9),c.EFF(5),c.k0s(),c.j41(6,"button",10),c.bIt("click",(function(){c.eBV(e);const t=c.XpG(2);return c.Njj(t.view.setEditMode())})),c.nrm(7,"system-button-icon",11),c.k0s()()()}if(2&e){const e=c.XpG(2);c.R7$(5),c.SpI(" ",e.model.data.method_params," "),c.R7$(2),c.Y8G("icon","edit")}}function Dn(e,t){if(1&e&&(c.j41(0,"div",3)(1,"div"),c.DNE(2,Gn,1,0,"system-stencil",2)(3,An,8,2,"div",4),c.k0s(),c.j41(4,"div"),c.DNE(5,Sn,1,0,"system-stencil",2)(6,Cn,8,2,"div",4),c.k0s()()),2&e){const e=c.XpG();c.R7$(2),c.Y8G("ngIf",e.model.isLoading),c.R7$(),c.Y8G("ngIf",!e.model.isLoading),c.R7$(2),c.Y8G("ngIf",e.model.isLoading),c.R7$(),c.Y8G("ngIf",!e.model.isLoading)}}function Bn(e,t){if(1&e&&c.nrm(0,"system-select-option",25),2&e){const e=t.$implicit;c.Y8G("value",e.id)("display",e.name)}}function $n(e,t){if(1&e&&(c.j41(0,"option",26),c.EFF(1),c.k0s()),2&e){const e=t.$implicit;c.Y8G("value",e),c.R7$(),c.JRh(e)}}function Nn(e,t){if(1&e){const e=c.RV6();c.j41(0,"div")(1,"div",13)(2,"div",14)(3,"label",15)(4,"abbr",16),c.EFF(5,"*"),c.k0s(),c.nrm(6,"system-label",7),c.k0s(),c.j41(7,"div",17)(8,"system-select",18),c.mxI("ngModelChange",(function(t){c.eBV(e);const s=c.XpG();return c.DH7(s.className,t)||(s.className=t),c.Njj(t)})),c.bIt("ngModelChange",(function(t){c.eBV(e);const s=c.XpG();return c.Njj(s.setClassname(t))})),c.DNE(9,Bn,1,2,"system-select-option",19),c.k0s(),c.j41(10,"div",20)(11,"select",21),c.mxI("ngModelChange",(function(t){c.eBV(e);const s=c.XpG();return c.DH7(s.methodName,t)||(s.methodName=t),c.Njj(t)})),c.DNE(12,$n,2,2,"option",22),c.k0s()()()()(),c.j41(13,"div",13)(14,"div",14)(15,"label",15),c.nrm(16,"system-label",12),c.k0s(),c.j41(17,"div",23)(18,"textarea",24),c.mxI("ngModelChange",(function(t){c.eBV(e);const s=c.XpG();return c.DH7(s.model.data.method_params,t)||(s.model.data.method_params=t),c.Njj(t)})),c.k0s()()()()()}if(2&e){const e=c.XpG();c.R7$(8),c.R50("ngModel",e.className),c.R7$(),c.Y8G("ngForOf",e.availableClasses),c.R7$(2),c.Y8G("disabled",!e.classExists||0==e._methods.length),c.R50("ngModel",e.methodName),c.R7$(),c.Y8G("ngForOf",e._methods),c.R7$(6),c.R50("ngModel",e.model.data.method_params)}}let Tn=(()=>{class AdministrationJobMethods{constructor(e,t,s,i){this.model=e,this.view=t,this.cdRef=s,this.backend=i,this._methods=[],this.availableClasses=[],this._class="",this._method="",this.classExists=!1}setClassname(e){this.className=e,this._class=e.name,""!=this._class?this.validateNamespace():(this._method="",this._methods=[],this.classExists=!1),this.joinValue()}get methodName(){return this._method}set methodName(e){this._method=e,this.joinValue()}ngOnInit(){this.loadAvailableClasses(),this.subscribeToFieldChanges(),this.subscribeToView(),this.splitValue()}subscribeToView(){this.view.mode$.subscribe((()=>this.cdRef.detectChanges()))}loadAvailableClasses(){this.backend.getRequest("module/SchedulerJobTasks/classes").subscribe((e=>{this.availableClasses=e.map((e=>({id:e,name:e}))).sort()}))}subscribeToFieldChanges(){this.model.observeFieldChanges("method").subscribe((()=>this.splitValue()))}validateNamespace(){this.backend.getRequest("system/checkclass/"+btoa(this._class)).subscribe((e=>{this.classExists=e.classexists,this._methods=e.methods,this.cdRef.detectChanges()}))}splitValue(){if(this._value||(this._value=this.model.getField("method")),this._value){let e=this._value.split("->");this._class=e[0],this.className={id:this._class,name:this._class},this._method=e[1],this.validateNamespace()}}joinValue(){""!=this._class?this._value=this._class+"->"+this._method:this._value="",this.model.setField("method",this._value)}static#e=this.ɵfac=function(e){return new(e||AdministrationJobMethods)(c.rXU(Mn.g),c.rXU(xn.U),c.rXU(c.gRc),c.rXU(u.H))};static#t=this.ɵcmp=c.VBU({type:AdministrationJobMethods,selectors:[["administration-job-methods"]],decls:3,vars:2,consts:[["titlelabel","LBL_METHOD"],["class","slds-p-around--xx-small",4,"ngIf"],[4,"ngIf"],[1,"slds-p-around--xx-small"],["class","slds-has-divider--bottom slds-p-vertical--x-small",4,"ngIf"],[1,"slds-has-divider--bottom","slds-p-vertical--x-small"],[1,"slds-form-element__label","slds-truncate"],["label","LBL_METHOD"],[1,"slds-grid","slds-grid--vertical-align-center","slds-grid--align-spread"],[1,"slds-truncate","slds-grow"],[1,"slds-button","slds-button--icon","slds-m-left--xx-small",2,"float","right",3,"click"],[3,"icon"],["label","LBL_PARAMS"],[1,"slds-grid","slds-p-around--xx-small"],[1,"slds-form-element","slds-p-horizontal--xx-small","slds-size--1-of-1"],[1,"slds-form-element__label"],[1,"slds-required","ng-star-inserted"],[1,"slds-grid","slds-grid--vertical-align-center","slds-gutters_direct-xx-small"],[1,"slds-grow",3,"ngModel","ngModelChange"],[3,"value","display",4,"ngFor","ngForOf"],[1,"slds-col","slds-size--1-of-3","slds-select_container"],[1,"slds-select",3,"disabled","ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[1,"slds-form-element__control"],[1,"slds-textarea",3,"ngModel","ngModelChange"],[3,"value","display"],[3,"value"]],template:function(e,t){1&e&&(c.j41(0,"system-section",0),c.DNE(1,Dn,7,4,"div",1)(2,Nn,19,6,"div",2),c.k0s()),2&e&&(c.R7$(),c.Y8G("ngIf",!t.view.isEditMode()),c.R7$(),c.Y8G("ngIf",t.view.isEditMode()))},dependencies:[i.Sq,i.bT,n.xH,n.y7,n.me,n.wz,n.BC,n.vS,L.t,j.W,In.v,ae.i,un.O,oe.t],encapsulation:2,changeDetection:0})}return AdministrationJobMethods})();var Xn=s(18359),Yn=s(49969),wn=s(70335),On=s(64029),Un=s(33325),Vn=s(98427);const Hn=e=>({summary_text:e}),zn=(e,t,s)=>({module:e,id:t,data:s}),Pn=e=>({opacity:e});function Jn(e,t){if(1&e){const e=c.RV6();c.j41(0,"tr",34)(1,"td",35)(2,"div",23),c.EFF(3),c.k0s()(),c.j41(4,"td")(5,"div",23),c.EFF(6),c.k0s()(),c.j41(7,"td")(8,"div",36),c.EFF(9),c.k0s()(),c.j41(10,"td")(11,"div",37),c.EFF(12),c.k0s()(),c.j41(13,"td",38)(14,"button",27),c.bIt("click",(function(){const t=c.eBV(e).$implicit,s=c.XpG(2);return c.Njj(s.openMessageInModal(t.message,t.resolution))})),c.nrm(15,"system-button-icon",39),c.k0s()()()}if(2&e){const e=t.$implicit,s=c.XpG(2);c.Y8G("system-model-provider",c.sMw(12,zn,e.rel_module,e.rel_id,c.eq3(10,Hn,e.name)))("ngStyle",c.eq3(16,Pn,s.isLoading?.33:1)),c.R7$(),c.Y8G("system-model-popover",!!e.rel_id)("enablelink",!!e.rel_id),c.R7$(2),c.JRh(e.name),c.R7$(3),c.JRh(e.executed_on),c.R7$(2),c.Y8G("ngClass",e.resolutionClass),c.R7$(),c.JRh(e.resolution),c.R7$(2),c.Y8G("title",e.message),c.R7$(),c.SpI("",e.message," ")}}function qn(e,t){1&e&&(c.j41(0,"div",40),c.nrm(1,"system-label",41),c.k0s())}function Wn(e,t){1&e&&(c.j41(0,"div",40),c.nrm(1,"system-spinner"),c.k0s())}function Kn(e,t){if(1&e){const e=c.RV6();c.j41(0,"div")(1,"div",19)(2,"table",20)(3,"thead")(4,"tr",21)(5,"th",22)(6,"div",23),c.nrm(7,"system-label",24),c.k0s()(),c.j41(8,"th",25)(9,"div",23),c.nrm(10,"system-label",26),c.k0s(),c.j41(11,"button",27),c.bIt("click",(function(){c.eBV(e);const t=c.XpG();return c.Njj(t.toggleSort())})),c.nrm(12,"system-button-icon",28),c.k0s()(),c.j41(13,"th",22)(14,"div",23),c.nrm(15,"system-label",29),c.k0s()(),c.j41(16,"th",22)(17,"div",23),c.nrm(18,"system-label",30),c.k0s()(),c.nrm(19,"th",31),c.k0s()(),c.j41(20,"tbody"),c.DNE(21,Jn,16,18,"tr",32),c.k0s()(),c.DNE(22,qn,2,0,"div",33)(23,Wn,2,0,"div",33),c.k0s()()}if(2&e){const e=c.XpG();c.Y8G("@displaycard",void 0),c.R7$(7),c.Y8G("label","SchedulerJobs"==e.model.module?"LBL_TASK":"LBL_SCHEDULERJOB"),c.R7$(5),c.Y8G("icon","DESC"!=e.sortDirection?"arrowdown":"arrowup"),c.R7$(9),c.Y8G("ngForOf",e.jobLogs)("ngForTrackBy",e.trackByFn),c.R7$(),c.Y8G("ngIf",!e.isLoading&&!e.isReloading&&0==e.jobLogs.length),c.R7$(),c.Y8G("ngIf",e.isLoading||e.isReloading)}}function Qn(e,t){if(1&e){const e=c.RV6();c.j41(0,"button",42),c.bIt("click",(function(){c.eBV(e);const t=c.XpG();return c.Njj(t.getMoreData())})),c.nrm(1,"system-label",43),c.k0s()}if(2&e){const e=c.XpG();c.Y8G("disabled",e.isLoading||e.jobLogs.length==e.totalLines)}}let Zn=(()=>{class AdministrationJobLog{constructor(e,t,s,i,n,l,a,o){this.model=e,this.language=t,this.metadata=s,this.broadcast=i,this.elementRef=n,this.modal=l,this.userpreferences=a,this.backend=o,this.jobLogs=[],this.isLoading=!1,this.isReloading=!1,this.subscription=new Xn.yU,this.totalLimit=10,this.expanded=!0,this.failedOnly=!1,this.sortDirection="DESC"}ngOnInit(){this.getData(),this.subscribeToJobActions()}ngOnDestroy(){this.subscription.unsubscribe()}openMessageInModal(e,t){const s="failed"==t?"error":"success";this.modal.info(e,this.language.getLabel("LBL_MESSAGE"),s)}trackByFn(e,t){return t.id}subscribeToJobActions(){this.subscription=this.broadcast.message$.subscribe((e=>{"job.run"==e.messagetype&&this.reloadData()}))}getData(){let e={offset:0,limit:10,failedOnly:this.failedOnly,sortDirection:this.sortDirection};this.totalLimit=10,this.isLoading=!0,this.backend.getRequest(`module/${this.model.module}/${this.model.id}/log`,e).subscribe((e=>{this.jobLogs=this.mapList(e.list),this.totalLines=e.count,this.isLoading=!1}),(e=>this.isLoading=!1))}getMoreData(){let e={offset:this.jobLogs.length,limit:10,failedOnly:this.failedOnly,sortDirection:this.sortDirection,fromDateTime:this.fromDateTime?moment(this.fromDateTime).utc().format("YYYY-MM-DD HH:mm:ss"):null};this.totalLimit+=10,this.isLoading=!0,this.backend.getRequest(`module/${this.model.module}/${this.model.id}/log`,e).subscribe((e=>{this.jobLogs=[...this.jobLogs,...this.mapList(e.list)],this.totalLines=e.count,this.isLoading=!1}),(e=>this.isLoading=!1))}reloadData(){if(this.isLoading)return;this.jobLogs=[];let e={offset:0,limit:this.totalLimit,failedOnly:this.failedOnly,sortDirection:this.sortDirection,fromDateTime:this.fromDateTime?moment(this.fromDateTime).utc().format("YYYY-MM-DD HH:mm:ss"):null};this.isLoading=this.isReloading=!0,this.backend.getRequest(`module/${this.model.module}/${this.model.id}/log`,e).subscribe((e=>{this.jobLogs=this.mapList(e.list),this.totalLines=e.count,this.isLoading=this.isReloading=!1}),(e=>this.isLoading=this.isReloading=!1))}mapList(e){return e.map((e=>(e.executed_on=moment(moment.utc(e.executed_on)).tz(this.userpreferences.toUse.timezone).format(this.userpreferences.getDateFormat()+" "+this.userpreferences.getTimeFormat()),e.resolutionClass="slds-text-color_"+("failed"==e.resolution?"error":"success"),e)))}toggleExpand(e){e.stopPropagation(),this.expanded=!this.expanded}toggleSort(){this.sortDirection="DESC"==this.sortDirection?"ASC":"DESC",this.reloadData()}static#e=this.ɵfac=function(e){return new(e||AdministrationJobLog)(c.rXU(Mn.g),c.rXU(h.B),c.rXU(p.yu),c.rXU(g.m),c.rXU(c.aKT),c.rXU(P.y),c.rXU(xi.S),c.rXU(u.H))};static#t=this.ɵcmp=c.VBU({type:AdministrationJobLog,selectors:[["administration-job-log"]],decls:23,vars:9,consts:[[1,"slds-card","slds-card_boundary","slds-m-bottom--medium"],[1,"slds-card__header","slds-grid","slds-grid--vertical-align-center"],[1,"slds-media","slds-media--center","slds-has-flexi-truncate"],["icon","recent","size","small"],[1,"slds-media__body","slds-truncate","slds-grid","slds-grid--vertical-align-center"],["href","javascript:void(0);",1,"slds-text-link--reset"],[1,"slds-text-heading--small"],["label","LBL_LOG_ENTRIES"],["label","LBL_OF"],["icon","up","size","x-small",1,"slds-m-horizontal--xx-small",3,"click"],["label","LBL_FROM",1,"slds-m-right--xx-small"],[1,"slds-m-right--xx-small",3,"ngModel","ngModelChange"],["label","LBL_FAILED",1,"slds-m-right--xx-small",3,"ngModel","ngModelChange"],[1,"slds-button","slds-button--icon",3,"disabled","click"],["icon","refresh",1,"slds-p-horizontal--xxx-small"],[4,"ngIf"],[1,"slds-card__footer","slds-p-around--xx-small"],[1,"slds-grid","slds-grid--align-center",2,"min-height","32px"],["class","slds-button",3,"disabled","click",4,"ngIf"],[1,"slds-card__body","slds-size--1-of-1","slds-scrollable--y",2,"max-height","350px"],["role","grid",1,"slds-table","slds-table--bordered","slds-table--cell-buffer","slds-table--fixed-layout"],[1,"slds-line-height_reset"],["scope","col"],[1,"slds-truncate"],[3,"label"],["scope","col",1,"slds-is-sortable","slds-is-sorted","slds-grid"],["label","LBL_EXECUTE_TIME"],[1,"slds-button","slds-button--icon",3,"click"],["addclasses","slds-is-sortable__icon",3,"icon"],["label","LBL_RESOLUTION"],["label","LBL_MESSAGE"],["scope","col",1,"slds-cell-shrink"],["class","slds-hint-parent",3,"system-model-provider","ngStyle",4,"ngFor","ngForOf","ngForTrackBy"],["class","slds-align_absolute-center slds-p-around--medium",4,"ngIf"],[1,"slds-hint-parent",3,"system-model-provider","ngStyle"],[3,"system-model-popover","enablelink"],[1,"slds-truncate",3,"ngClass"],[1,"slds-truncate",3,"title"],[1,"slds-cell-shrink"],["icon","info"],[1,"slds-align_absolute-center","slds-p-around--medium"],["label","LBL_NO_ENTRIES"],[1,"slds-button",3,"disabled","click"],["label","LBL_MORE"]],template:function(e,t){1&e&&(c.j41(0,"div",0)(1,"div",1)(2,"header",2),c.nrm(3,"system-icon",3),c.j41(4,"div",4)(5,"h2")(6,"a",5)(7,"span",6),c.nrm(8,"system-label",7),c.EFF(9),c.nrm(10,"system-label",8),c.EFF(11),c.k0s()()(),c.j41(12,"system-utility-icon",9),c.bIt("click",(function(e){return t.toggleExpand(e)})),c.k0s()()(),c.nrm(13,"system-label",10),c.j41(14,"system-input-date",11),c.mxI("ngModelChange",(function(e){return c.DH7(t.fromDateTime,e)||(t.fromDateTime=e),e})),c.bIt("ngModelChange",(function(){return t.reloadData()})),c.k0s(),c.j41(15,"system-input-time",11),c.mxI("ngModelChange",(function(e){return c.DH7(t.fromDateTime,e)||(t.fromDateTime=e),e})),c.bIt("ngModelChange",(function(){return t.reloadData()})),c.k0s(),c.j41(16,"system-checkbox-toggle",12),c.mxI("ngModelChange",(function(e){return c.DH7(t.failedOnly,e)||(t.failedOnly=e),e})),c.bIt("ngModelChange",(function(){return t.reloadData()})),c.k0s(),c.j41(17,"button",13),c.bIt("click",(function(){return t.reloadData()})),c.nrm(18,"system-button-icon",14),c.k0s()(),c.DNE(19,Kn,24,7,"div",15),c.j41(20,"footer",16)(21,"div",17),c.DNE(22,Qn,2,1,"button",18),c.k0s()()()),2&e&&(c.R7$(9),c.SpI(" (",t.jobLogs.length," "),c.R7$(2),c.SpI(" ",t.totalLines,") "),c.R7$(),c.Y8G("@animateicon",t.expanded?"open":"closed"),c.R7$(2),c.R50("ngModel",t.fromDateTime),c.R7$(),c.R50("ngModel",t.fromDateTime),c.R7$(),c.R50("ngModel",t.failedOnly),c.R7$(),c.Y8G("disabled",!t.expanded),c.R7$(2),c.Y8G("ngIf",t.expanded),c.R7$(3),c.Y8G("ngIf",t.expanded))},dependencies:[i.YU,i.Sq,i.bT,i.B3,n.BC,n.vS,L.t,wn.x,E.J,ee.M,On.T,j.W,Ds.P,F.B,Un.j,Vn.v],encapsulation:2,data:{animation:[(0,Yn.hZ)("animateicon",[(0,Yn.wk)("open",(0,Yn.iF)({transform:"scale(1, 1)"})),(0,Yn.wk)("closed",(0,Yn.iF)({transform:"scale(1, -1)"})),(0,Yn.kY)("open => closed",[(0,Yn.i0)(".5s")]),(0,Yn.kY)("closed => open",[(0,Yn.i0)(".5s")])]),(0,Yn.hZ)("displaycard",[(0,Yn.kY)(":enter",[(0,Yn.iF)({opacity:0,height:"0px",overflow:"hidden"}),(0,Yn.i0)(".5s",(0,Yn.iF)({height:"*",opacity:1})),(0,Yn.iF)({overflow:"unset"})]),(0,Yn.kY)(":leave",[(0,Yn.iF)({overflow:"hidden"}),(0,Yn.i0)(".5s",(0,Yn.iF)({height:"0px",opacity:0}))])])]}})}return AdministrationJobLog})(),el=(()=>{class AdministrationJobRunButton{constructor(e,t,s,i,n,l,a){this.model=e,this.language=t,this.metadata=s,this.broadcast=i,this.toast=n,this.modal=l,this.backend=a}execute(){this.modal.openModal("SystemLoadingModal",!1).subscribe((e=>{this.backend.postRequest("module/SchedulerJobs/"+this.model.id+"/run").subscribe((t=>{e.instance.self.destroy(),this.model.getData(),t?this.toast.sendToast(this.language.getLabel("MSG_SUCCESSFULLY_EXECUTED"),"success"):this.toast.sendToast(this.language.getLabel("ERR_FAILED_TO_EXECUTE"),"error"),this.broadcast.broadcastMessage("job.run")}),(t=>{e.instance.self.destroy(),this.toast.sendToast(this.language.getLabel("ERR_FAILED_TO_EXECUTE"),"error"),this.broadcast.broadcastMessage("job.run")}))}))}static#e=this.ɵfac=function(e){return new(e||AdministrationJobRunButton)(c.rXU(Mn.g),c.rXU(h.B),c.rXU(p.yu),c.rXU(g.m),c.rXU(z.o),c.rXU(P.y),c.rXU(u.H))};static#t=this.ɵcmp=c.VBU({type:AdministrationJobRunButton,selectors:[["administration-job-run-button"]],decls:2,vars:0,consts:[["label","LBL_RUN_NOW"]],template:function(e,t){1&e&&(c.j41(0,"span"),c.nrm(1,"system-label",0),c.k0s())},dependencies:[j.W],encapsulation:2})}return AdministrationJobRunButton})(),tl=(()=>{class AdministrationJobScheduleButton{constructor(e,t,s,i,n,l,a){this.model=e,this.language=t,this.metadata=s,this.broadcast=i,this.toast=n,this.modal=l,this.backend=a}execute(){this.modal.openModal("SystemLoadingModal",!1).subscribe((e=>{this.backend.postRequest("module/SchedulerJobs/"+this.model.id+"/schedule").subscribe((t=>{e.instance.self.destroy(),this.model.getData(),t?this.toast.sendToast(this.language.getLabel("MSG_SUCCESSFULLY_EXECUTED"),"success"):this.toast.sendToast(this.language.getLabel("ERR_FAILED_TO_EXECUTE"),"error"),this.broadcast.broadcastMessage("job.run")}),(t=>{e.instance.self.destroy(),this.toast.sendToast(this.language.getLabel("ERR_FAILED_TO_EXECUTE"),"error"),this.broadcast.broadcastMessage("job.run")}))}))}static#e=this.ɵfac=function(e){return new(e||AdministrationJobScheduleButton)(c.rXU(Mn.g),c.rXU(h.B),c.rXU(p.yu),c.rXU(g.m),c.rXU(z.o),c.rXU(P.y),c.rXU(u.H))};static#t=this.ɵcmp=c.VBU({type:AdministrationJobScheduleButton,selectors:[["administration-job-schedule-button"]],decls:2,vars:0,consts:[["label","LBL_SCHEDULE_NOW"]],template:function(e,t){1&e&&(c.j41(0,"span"),c.nrm(1,"system-label",0),c.k0s())},dependencies:[j.W],encapsulation:2})}return AdministrationJobScheduleButton})(),sl=(()=>{class AdministrationJobKillButton{constructor(e,t,s,i){this.model=e,this.toast=t,this.language=s,this.backend=i}get disabled(){return!this.model.getField("process_id")}execute(){this.backend.postRequest(`module/SchedulerJobs/${this.model.id}/kill`).subscribe((e=>{const t=e?"MSG_SUCCESSFULLY_EXECUTED":"ERR_FAILED_TO_EXECUTE",s=e?"success":"error";this.toast.sendToast(this.language.getLabel(t),s)}))}static#e=this.ɵfac=function(e){return new(e||AdministrationJobKillButton)(c.rXU(Mn.g),c.rXU(z.o),c.rXU(h.B),c.rXU(u.H))};static#t=this.ɵcmp=c.VBU({type:AdministrationJobKillButton,selectors:[["administration-job-kill-button"]],decls:2,vars:0,consts:[["label","LBL_KILL"]],template:function(e,t){1&e&&(c.j41(0,"span"),c.nrm(1,"system-label",0),c.k0s())},dependencies:[j.W],encapsulation:2})}return AdministrationJobKillButton})(),il=(()=>{class AdministrationJobTaskRunButton{constructor(e,t,s,i,n,l,a){this.model=e,this.language=t,this.metadata=s,this.broadcast=i,this.toast=n,this.modal=l,this.backend=a}execute(){this.modal.openModal("SystemLoadingModal",!1).subscribe((e=>{this.backend.postRequest("module/SchedulerJobTasks/"+this.model.id+"/run").subscribe((t=>{e.instance.self.destroy(),t?this.toast.sendToast(this.language.getLabel("MSG_SUCCESSFULLY_EXECUTED"),"success"):this.toast.sendToast(this.language.getLabel("ERR_FAILED_TO_EXECUTE"),"error"),this.broadcast.broadcastMessage("job.run")}),(t=>{e.instance.self.destroy(),this.toast.sendToast(this.language.getLabel("ERR_FAILED_TO_EXECUTE"),"error"),this.broadcast.broadcastMessage("job.run")}))}))}static#e=this.ɵfac=function(e){return new(e||AdministrationJobTaskRunButton)(c.rXU(Mn.g),c.rXU(h.B),c.rXU(p.yu),c.rXU(g.m),c.rXU(z.o),c.rXU(P.y),c.rXU(u.H))};static#t=this.ɵcmp=c.VBU({type:AdministrationJobTaskRunButton,selectors:[["administration-job-task-run-button"]],decls:2,vars:0,consts:[["label","LBL_RUN_NOW"]],template:function(e,t){1&e&&(c.j41(0,"span"),c.nrm(1,"system-label",0),c.k0s())},dependencies:[j.W],encapsulation:2})}return AdministrationJobTaskRunButton})();var nl=s(37263),ll=s(15091);const al=(e,t)=>({module:"SchedulerJobs",id:e,data:t}),ol=()=>({link:!0}),dl=()=>({fieldtype:"croninterval"});function rl(e,t){if(1&e){const e=c.RV6();c.j41(0,"tr",30)(1,"td"),c.nrm(2,"field-container",31),c.k0s(),c.j41(3,"td"),c.nrm(4,"field-container",32),c.k0s(),c.j41(5,"td"),c.nrm(6,"field-container",33),c.k0s(),c.j41(7,"td",34)(8,"button",35),c.bIt("click",(function(){const t=c.eBV(e).$implicit,s=c.XpG(2);return c.Njj(s.killJob(t))})),c.nrm(9,"system-button-icon",36),c.k0s()()()}if(2&e){const e=t.$implicit;c.Y8G("system-model-provider",c.l_i(6,al,e.id,e)),c.R7$(2),c.Y8G("fieldconfig",c.lJ4(9,ol))("fielddisplayclass","slds-truncate slds-p-horizontal--x-small"),c.R7$(2),c.Y8G("fielddisplayclass","slds-truncate slds-p-horizontal--x-small"),c.R7$(2),c.Y8G("fieldconfig",c.lJ4(10,dl))("fielddisplayclass","slds-truncate slds-p-horizontal--x-small")}}const cl=()=>({displayLabels:!1,editable:!1});function ml(e,t){if(1&e&&(c.j41(0,"table",20)(1,"thead")(2,"tr",21)(3,"th",22)(4,"div",23),c.nrm(5,"system-label",24),c.k0s()(),c.j41(6,"th",22)(7,"div",23),c.nrm(8,"system-label",25),c.k0s()(),c.j41(9,"th",22)(10,"div",23),c.nrm(11,"system-label",26),c.k0s()(),c.nrm(12,"th",27),c.k0s()(),c.j41(13,"tbody",28),c.DNE(14,rl,10,11,"tr",29),c.k0s()()),2&e){const e=c.XpG();c.R7$(13),c.Y8G("system-view-provider",c.lJ4(3,cl)),c.R7$(),c.Y8G("ngForOf",e.runningJobs.list)("ngForTrackBy",e.trackByFn)}}function ul(e,t){1&e&&(c.j41(0,"div",37),c.nrm(1,"system-label",38),c.k0s())}function gl(e,t){1&e&&(c.j41(0,"div",37),c.nrm(1,"system-label",39),c.k0s())}function hl(e,t){1&e&&(c.j41(0,"div",40),c.nrm(1,"system-spinner",41),c.k0s())}const bl=()=>({border:0,"box-shadow":"none"});let pl=(()=>{class AdministrationJobRunningList{constructor(e,t,s,i,n){this.metadata=e,this.toast=t,this.modal=s,this.language=i,this.backend=n,this.hasBoxClass=!1,this.runningJobs={list:[],total:0,isLoading:!1}}ngOnInit(){this.reloadList()}reloadList(){this.runningJobs.list=[],this.runningJobs.total=0,this.runningJobs.hasError=!1;const e=this.metadata.getComponentConfig("AdministrationJobRunningList","SchedulerJobs");if(!e.moduleFilter)return this.runningJobs.hasError=!0,console.error("Mssing module filter for component AdministrationJobRunningList");this.runningJobs.isLoading=!0;const t={modulefilter:e.moduleFilter,start:0,limit:20};this.backend.getList("SchedulerJobs",[{sortfield:"last_run_date",sortdirection:"DESC"}],t).subscribe((e=>{this.runningJobs.list=e.list,this.runningJobs.total=e.totalcount,this.runningJobs.isLoading=!1}),(e=>{this.runningJobs.hasError=!0,this.runningJobs.isLoading=!1}))}loadMore(){if(this.runningJobs.isLoading||this.runningJobs.list.length>=this.runningJobs.total)return!1;const e=this.metadata.getComponentConfig("AdministrationJobRunningList","SchedulerJobs");if(!e.moduleFilter)return this.runningJobs.hasError=!0,console.error("Mssing module filter for component AdministrationJobRunningList");this.runningJobs.isLoading=!0;const t={modulefilter:e.moduleFilter,start:this.runningJobs.list.length,limit:20};this.backend.getList("SchedulerJobs",[{sortfield:"last_run_date",sortdirection:"DESC"}],t).subscribe((e=>{this.runningJobs.list=e.list,this.runningJobs.total=e.totalcount,this.runningJobs.isLoading=!1}),(e=>{this.runningJobs.hasError=!0,this.runningJobs.isLoading=!1}))}killJob(e){this.modal.confirm("MSG_CONFIRM_KILL",this.language.getLabel("LBL_KILL")).subscribe((t=>{t&&this.backend.postRequest(`module/SchedulerJobs/${e.id}/kill`).subscribe((e=>{const t=e?"MSG_SUCCESSFULLY_EXECUTED":"ERR_FAILED_TO_EXECUTE",s=e?"success":"error";e&&this.reloadList(),this.toast.sendToast(this.language.getLabel(t),s)}))}))}trackByFn(e,t){return t.id}static#e=this.ɵfac=function(e){return new(e||AdministrationJobRunningList)(c.rXU(p.yu),c.rXU(z.o),c.rXU(P.y),c.rXU(h.B),c.rXU(u.H))};static#t=this.ɵcmp=c.VBU({type:AdministrationJobRunningList,selectors:[["administration-job-running-list"]],inputs:{hasBoxClass:"hasBoxClass"},decls:24,vars:9,consts:[[1,"slds-card","slds-card_boundary","slds-grid","slds-grid--vertical","slds-grow","slds-height_full",2,"min-height","0",3,"ngStyle"],[1,"slds-card__header","slds-grid","slds-grid--vertical-align-center"],[1,"slds-media","slds-media--center","slds-has-flexi-truncate"],["icon","custom6","sprite","custom","divClass"," ",1,"slds-m-right--small",2,"transform","rotate(90deg)"],[1,"slds-media__body","slds-truncate","slds-grid","slds-grid--vertical-align-center"],["href","javascript:void(0);",1,"slds-text-link--reset"],[1,"slds-text-heading--small"],["label","LBL_RUNNING_JOBS"],["label","LBL_OF"],[1,"slds-button","slds-button--icon",3,"click"],["icon","refresh",1,"slds-p-horizontal--xxx-small"],[1,"slds-grow","slds-grid","slds-grid--vertical",2,"min-height","0"],[1,"slds-card__body","slds-size--1-of-1","slds-grid","slds-grid--vertical","slds-grow","slds-scrollable--y",2,"min-height","0","flex","initial"],["class","slds-table slds-table--bordered slds-table--cell-buffer slds-table--fixed-layout slds-table--header-fixed","role","grid",4,"ngIf"],["class","slds-align_absolute-center slds-height_full slds-has-divider--top-space slds-size--1-of-1",4,"ngIf"],["class","slds-align_absolute-center slds-p-bottom--small slds-height_full slds-has-divider--top-space slds-size--1-of-1",4,"ngIf"],[1,"slds-card__footer","slds-p-around--xx-small"],[1,"slds-grid","slds-grid--align-center",2,"min-height","32px"],[1,"slds-button",3,"disabled","click"],["label","LBL_MORE"],["role","grid",1,"slds-table","slds-table--bordered","slds-table--cell-buffer","slds-table--fixed-layout","slds-table--header-fixed"],[1,"slds-line-height_reset"],["scope","col"],[1,"slds-truncate"],["label","LBL_NAME"],["label","LBL_RUNNING_SINCE"],["label","LBL_INTERVAL"],["scope","col",1,"slds-cell-shrink"],[3,"system-view-provider"],["class","slds-hint-parent",3,"system-model-provider",4,"ngFor","ngForOf","ngForTrackBy"],[1,"slds-hint-parent",3,"system-model-provider"],["field","name",3,"fieldconfig","fielddisplayclass"],["field","last_run_date",3,"fielddisplayclass"],["field","job_interval",3,"fieldconfig","fielddisplayclass"],[1,"slds-cell-shrink"],["system-title","LBL_KILL",1,"slds-button","slds-button--icon",3,"click"],["icon","stop"],[1,"slds-align_absolute-center","slds-height_full","slds-has-divider--top-space","slds-size--1-of-1"],["label","MSG_NO_RECORDS_FOUND",1,"slds-p-top--small"],["label","ERR_LOADING_RECORDS",1,"slds-p-top--small"],[1,"slds-align_absolute-center","slds-p-bottom--small","slds-height_full","slds-has-divider--top-space","slds-size--1-of-1"],[1,"slds-p-top--small"]],template:function(e,t){1&e&&(c.j41(0,"div",0)(1,"div",1)(2,"header",2),c.nrm(3,"system-icon",3),c.j41(4,"div",4)(5,"h2")(6,"a",5)(7,"span",6),c.nrm(8,"system-label",7),c.EFF(9),c.nrm(10,"system-label",8),c.EFF(11),c.k0s()()()()(),c.j41(12,"button",9),c.bIt("click",(function(){return t.reloadList()})),c.nrm(13,"system-button-icon",10),c.k0s()(),c.j41(14,"div",11)(15,"div",12),c.DNE(16,ml,15,4,"table",13)(17,ul,2,0,"div",14)(18,gl,2,0,"div",14)(19,hl,2,0,"div",15),c.k0s()(),c.j41(20,"footer",16)(21,"div",17)(22,"button",18),c.bIt("click",(function(){return t.loadMore()})),c.nrm(23,"system-label",19),c.k0s()()()()),2&e&&(c.Y8G("ngStyle",t.hasBoxClass?void 0:c.lJ4(8,bl)),c.R7$(9),c.SpI(" (",t.runningJobs.list.length," "),c.R7$(2),c.SpI(" ",t.runningJobs.total,") "),c.R7$(5),c.Y8G("ngIf",t.runningJobs.list.length>0),c.R7$(),c.Y8G("ngIf",!t.runningJobs.hasError&&!t.runningJobs.isLoading&&0==t.runningJobs.list.length),c.R7$(),c.Y8G("ngIf",!t.runningJobs.isLoading&&t.runningJobs.hasError),c.R7$(),c.Y8G("ngIf",t.runningJobs.isLoading),c.R7$(3),c.Y8G("disabled",t.runningJobs.hasError||t.runningJobs.isLoading||t.runningJobs.list.length==t.runningJobs.total))},dependencies:[i.Sq,i.bT,i.B3,L.t,E.J,j.W,Ds.P,Vn.v,nl.x,M.L,ll.y],encapsulation:2})}return AdministrationJobRunningList})();const fl=(e,t)=>({module:"SchedulerJobs",id:e,data:t}),yl=()=>({link:!0}),_l=()=>({truncate:!0});function vl(e,t){if(1&e){const e=c.RV6();c.j41(0,"tr",30)(1,"td"),c.nrm(2,"field-container",31),c.k0s(),c.j41(3,"td"),c.nrm(4,"field-container",32),c.k0s(),c.j41(5,"td"),c.nrm(6,"field-container",33),c.k0s(),c.j41(7,"td",34)(8,"button",35),c.bIt("click",(function(){const t=c.eBV(e).$implicit,s=c.XpG(2);return c.Njj(s.openMessageInModal(t.last_run_message,t.resolution))})),c.nrm(9,"system-button-icon",36),c.k0s()()()}if(2&e){const e=t.$implicit;c.Y8G("system-model-provider",c.l_i(6,fl,e.id,e)),c.R7$(2),c.Y8G("fieldconfig",c.lJ4(9,yl))("fielddisplayclass","slds-truncate slds-p-horizontal--x-small"),c.R7$(2),c.Y8G("fielddisplayclass","slds-truncate slds-p-horizontal--x-small"),c.R7$(2),c.Y8G("fieldconfig",c.lJ4(10,_l))("fielddisplayclass","slds-truncate slds-p-horizontal--x-small")}}const kl=()=>({displayLabels:!1,editable:!1});function Rl(e,t){if(1&e&&(c.j41(0,"table",20)(1,"thead")(2,"tr",21)(3,"th",22)(4,"div",23),c.nrm(5,"system-label",24),c.k0s()(),c.j41(6,"th",22)(7,"div",23),c.nrm(8,"system-label",25),c.k0s()(),c.j41(9,"th",22)(10,"div",23),c.nrm(11,"system-label",26),c.k0s()(),c.nrm(12,"th",27),c.k0s()(),c.j41(13,"tbody",28),c.DNE(14,vl,10,11,"tr",29),c.k0s()()),2&e){const e=c.XpG();c.R7$(13),c.Y8G("system-view-provider",c.lJ4(3,kl)),c.R7$(),c.Y8G("ngForOf",e.failedJobs.list)("ngForTrackBy",e.trackByFn)}}function Ll(e,t){1&e&&(c.j41(0,"div",37),c.nrm(1,"system-label",38),c.k0s())}function El(e,t){1&e&&(c.j41(0,"div",37),c.nrm(1,"system-label",39),c.k0s())}function jl(e,t){1&e&&(c.j41(0,"div",40),c.nrm(1,"system-spinner",41),c.k0s())}const Fl=()=>({border:0,"box-shadow":"none"});let Ml=(()=>{class AdministrationJobFailedList{constructor(e,t,s,i){this.language=e,this.modal=t,this.metadata=s,this.backend=i,this.hasBoxClass=!1,this.failedJobs={list:[],total:0,isLoading:!1}}ngOnInit(){this.reloadList()}reloadList(){this.failedJobs.list=[],this.failedJobs.total=0,this.failedJobs.hasError=!1;const e=this.metadata.getComponentConfig("AdministrationJobFailedList","SchedulerJobs");if(!e.moduleFilter)return this.failedJobs.hasError=!0,console.error("Mssing module filter for component AdministrationJobFailedList");this.failedJobs.isLoading=!0;const t={modulefilter:e.moduleFilter,start:0,limit:20};this.backend.getList("SchedulerJobs",[{sortfield:"last_run_date",sortdirection:"DESC"}],t).subscribe((e=>{this.failedJobs.list=e.list,this.failedJobs.total=e.totalcount,this.failedJobs.isLoading=!1}),(e=>{this.failedJobs.isLoading=!1,this.failedJobs.hasError=!0}))}loadMore(){if(this.failedJobs.isLoading||this.failedJobs.list.length>=this.failedJobs.total)return!1;const e=this.metadata.getComponentConfig("AdministrationJobFailedList","SchedulerJobs");if(!e.moduleFilter)return this.failedJobs.hasError=!0,console.error("Mssing module filter for component AdministrationJobFailedList");this.failedJobs.isLoading=!0;const t={modulefilter:e.moduleFilter,start:this.failedJobs.list.length,limit:20};this.backend.getList("SchedulerJobs",[{sortfield:"last_run_date",sortdirection:"DESC"}],t).subscribe((e=>{this.failedJobs.list=e.list,this.failedJobs.total=e.totalcount,this.failedJobs.isLoading=!1}),(e=>{this.failedJobs.isLoading=!1,this.failedJobs.hasError=!0}))}openMessageInModal(e,t){const s="failed"==t?"error":"success";this.modal.info(e,this.language.getLabel("LBL_MESSAGE"),s)}trackByFn(e,t){return t.id}static#e=this.ɵfac=function(e){return new(e||AdministrationJobFailedList)(c.rXU(h.B),c.rXU(P.y),c.rXU(p.yu),c.rXU(u.H))};static#t=this.ɵcmp=c.VBU({type:AdministrationJobFailedList,selectors:[["administration-job-failed-list"]],inputs:{hasBoxClass:"hasBoxClass"},decls:24,vars:9,consts:[[1,"slds-card","slds-card_boundary","slds-grid","slds-grid--vertical","slds-grow","slds-height_full",2,"min-height","0",3,"ngStyle"],[1,"slds-card__header","slds-grid","slds-grid--vertical-align-center"],[1,"slds-media","slds-media--center","slds-has-flexi-truncate"],["icon","custom82","sprite","custom"],[1,"slds-media__body","slds-truncate","slds-grid","slds-grid--vertical-align-center"],["href","javascript:void(0);",1,"slds-text-link--reset"],[1,"slds-text-heading--small"],["label","LBL_FAILED_JOBS"],["label","LBL_OF"],[1,"slds-button","slds-button--icon",3,"click"],["icon","refresh",1,"slds-p-horizontal--xxx-small"],[1,"slds-grow","slds-grid","slds-grid--vertical",2,"min-height","0"],[1,"slds-card__body","slds-size--1-of-1","slds-grid","slds-grid--vertical","slds-grow","slds-scrollable--y",2,"min-height","0","flex","initial"],["class","slds-table slds-table--bordered slds-table--cell-buffer slds-table--fixed-layout slds-table--header-fixed","role","grid",4,"ngIf"],["class","slds-align_absolute-center slds-height_full slds-has-divider--top-space slds-size--1-of-1",4,"ngIf"],["class","slds-align_absolute-center slds-p-bottom--small slds-height_full slds-has-divider--top-space slds-size--1-of-1",4,"ngIf"],[1,"slds-card__footer","slds-p-around--xx-small"],[1,"slds-grid","slds-grid--align-center",2,"min-height","32px"],[1,"slds-button",3,"disabled","click"],["label","LBL_MORE"],["role","grid",1,"slds-table","slds-table--bordered","slds-table--cell-buffer","slds-table--fixed-layout","slds-table--header-fixed"],[1,"slds-line-height_reset"],["scope","col"],[1,"slds-truncate"],["label","LBL_NAME"],["label","LBL_LAST_RUN"],["label","LBL_LAST_MESSAGE"],["scope","col",1,"slds-cell-shrink"],[3,"system-view-provider"],["class","slds-hint-parent",3,"system-model-provider",4,"ngFor","ngForOf","ngForTrackBy"],[1,"slds-hint-parent",3,"system-model-provider"],["field","name",3,"fieldconfig","fielddisplayclass"],["field","last_run_date",3,"fielddisplayclass"],["field","last_run_message",3,"fieldconfig","fielddisplayclass"],[1,"slds-cell-shrink"],["system-title","LBL_LAST_MESSAGE",1,"slds-button","slds-button--icon",3,"click"],["icon","info"],[1,"slds-align_absolute-center","slds-height_full","slds-has-divider--top-space","slds-size--1-of-1"],["label","MSG_NO_RECORDS_FOUND",1,"slds-p-top--small"],["label","ERR_LOADING_RECORDS",1,"slds-p-top--small"],[1,"slds-align_absolute-center","slds-p-bottom--small","slds-height_full","slds-has-divider--top-space","slds-size--1-of-1"],[1,"slds-p-top--small"]],template:function(e,t){1&e&&(c.j41(0,"div",0)(1,"div",1)(2,"header",2),c.nrm(3,"system-icon",3),c.j41(4,"div",4)(5,"h2")(6,"a",5)(7,"span",6),c.nrm(8,"system-label",7),c.EFF(9),c.nrm(10,"system-label",8),c.EFF(11),c.k0s()()()()(),c.j41(12,"button",9),c.bIt("click",(function(){return t.reloadList()})),c.nrm(13,"system-button-icon",10),c.k0s()(),c.j41(14,"div",11)(15,"div",12),c.DNE(16,Rl,15,4,"table",13)(17,Ll,2,0,"div",14)(18,El,2,0,"div",14)(19,jl,2,0,"div",15),c.k0s()(),c.j41(20,"footer",16)(21,"div",17)(22,"button",18),c.bIt("click",(function(){return t.loadMore()})),c.nrm(23,"system-label",19),c.k0s()()()()),2&e&&(c.Y8G("ngStyle",t.hasBoxClass?void 0:c.lJ4(8,Fl)),c.R7$(9),c.SpI(" (",t.failedJobs.list.length," "),c.R7$(2),c.SpI(" ",t.failedJobs.total,") "),c.R7$(5),c.Y8G("ngIf",t.failedJobs.list.length>0),c.R7$(),c.Y8G("ngIf",!t.failedJobs.hasError&&!t.failedJobs.isLoading&&0==t.failedJobs.list.length),c.R7$(),c.Y8G("ngIf",!t.failedJobs.isLoading&&t.failedJobs.hasError),c.R7$(),c.Y8G("ngIf",t.failedJobs.isLoading),c.R7$(3),c.Y8G("disabled",t.failedJobs.isLoading||t.failedJobs.list.length==t.failedJobs.total))},dependencies:[i.Sq,i.bT,i.B3,L.t,E.J,j.W,Ds.P,Vn.v,nl.x,M.L,ll.y],encapsulation:2})}return AdministrationJobFailedList})();var xl=s(75103),Il=s(64914),Gl=s(28460);function Al(e,t){if(1&e&&(c.j41(0,"div",12),c.nrm(1,"object-listview-aggregate",13),c.k0s()),2&e){const e=t.$implicit;c.R7$(),c.Y8G("aggregate",e)}}const Sl=e=>({module:e});function Cl(e,t){if(1&e&&(c.j41(0,"div",9)(1,"div",10),c.DNE(2,Al,2,1,"div",11),c.k0s()()),2&e){const e=c.XpG();c.Y8G("@animatepanel",void 0)("system-model-provider",c.eq3(3,Sl,e.modelList.module)),c.R7$(2),c.Y8G("ngForOf",e.modelList.moduleAggregates)}}let Dl=(()=>{class AdministrationJobCockpit{constructor(e,t){this.model=e,this.modelList=t}static#e=this.ɵfac=function(e){return new(e||AdministrationJobCockpit)(c.rXU(Mn.g),c.rXU(xl.K))};static#t=this.ɵcmp=c.VBU({type:AdministrationJobCockpit,selectors:[["administration-job-cockpit"]],decls:10,vars:3,consts:[[1,"slds-grid","slds-height_full"],[1,"slds-height_full","slds-size--1-of-2","slds-border--right","slds-p-around--medium"],[1,"slds-p-bottom--small","slds-grid","slds-grid--vertical",2,"max-height","50%"],[1,"slds-grid","slds-grid--vertical","slds-grow",2,"min-height","0",3,"hasBoxClass"],[1,"slds-p-top--small","slds-grid","slds-grid--vertical",2,"max-height","50%"],[1,"slds-size--1-of-2","slds-height_full","slds-grid","slds-grid--vertical"],[1,"slds-grow","slds-is-relative",2,"display","block","width","100%","min-height","0"],[1,"slds-grow","slds-height_full","slds-size--1-of-1",2,"display","block"],["class","slds-is-absolute slds-panel slds-panel--filters slds-filters__body slds-nowrap  slds-scrollable--y","style","width: 320px; height: 100%; top:0; right: 0;z-index: 99;",3,"system-model-provider",4,"ngIf"],[1,"slds-is-absolute","slds-panel","slds-panel--filters","slds-filters__body","slds-nowrap","slds-scrollable--y",2,"width","320px","height","100%","top","0","right","0","z-index","99",3,"system-model-provider"],[1,"slds-filters__body","slds-grid_vertical"],["class","slds-m-vertical--xx-small",4,"ngFor","ngForOf"],[1,"slds-m-vertical--xx-small"],[3,"aggregate"]],template:function(e,t){1&e&&(c.j41(0,"div",0)(1,"div",1)(2,"div",2),c.nrm(3,"administration-job-running-list",3),c.k0s(),c.j41(4,"div",4),c.nrm(5,"administration-job-failed-list",3),c.k0s()(),c.j41(6,"div",5)(7,"div",6),c.nrm(8,"object-list",7),c.DNE(9,Cl,3,5,"div",8),c.k0s()()()),2&e&&(c.R7$(3),c.Y8G("hasBoxClass",!0),c.R7$(2),c.Y8G("hasBoxClass",!0),c.R7$(4),c.Y8G("ngIf",t.modelList.displayAggregates))},dependencies:[i.Sq,i.bT,Vn.v,Il.Y,Gl.q,pl,Ml],encapsulation:2})}return AdministrationJobCockpit})();var Bl=s(29994);let $l=(()=>{class dictionary{constructor(e,t,s,i){this.http=e,this.configurationService=t,this.session=s,this.metadata=i,this.data=[],this.dictionaryitem="",this.dictionaryfields=[]}load(e){let t=new U.B;return this.dictionaryitem=e,this.http.get(this.configurationService.getBackendUrl()+"/dictionary/list/"+e+"?sessionid="+this.session.authData.sessionId).subscribe((e=>{this.data=e.items,this.dictionaryfields=e.fields,t.next(e),t.complete()})),t.asObservable()}getFields(){let e=[];for(let t of this.dictionaryfields)"id"!==t&&e.push(t);return e}static#e=this.ɵfac=function(e){return new(e||dictionary)(c.KVO(zs.Qq),c.KVO(H.i),c.KVO(Bl.d),c.KVO(p.yu))};static#t=this.ɵprov=c.jDH({token:dictionary,factory:dictionary.ɵfac})}return dictionary})();const Nl=["administration-dictionarymanager-item-field",""];function Tl(e,t){if(1&e){const e=c.RV6();c.j41(0,"p",2)(1,"span"),c.EFF(2),c.k0s(),c.j41(3,"button",3),c.bIt("click",(function(){c.eBV(e);const t=c.XpG();return c.Njj(t.setEditMode())})),c.qSk(),c.j41(4,"svg",4),c.nrm(5,"use",5),c.k0s()()()}if(2&e){const e=c.XpG();c.R7$(2),c.JRh(e.fieldvalue)}}function Xl(e,t){if(1&e){const e=c.RV6();c.j41(0,"div",6)(1,"input",7),c.mxI("ngModelChange",(function(t){c.eBV(e);const s=c.XpG();return c.DH7(s.fieldvalue,t)||(s.fieldvalue=t),c.Njj(t)})),c.k0s()()}if(2&e){const e=c.XpG();c.R7$(),c.R50("ngModel",e.fieldvalue)}}function Yl(e,t){if(1&e&&(c.j41(0,"th",12)(1,"a",13)(2,"span",14),c.EFF(3),c.k0s()()()),2&e){const e=t.$implicit;c.R7$(3),c.JRh(e)}}function wl(e,t){if(1&e&&c.nrm(0,"tr",15),2&e){const e=t.$implicit;c.Y8G("item",e)}}function Ol(e,t){if(1&e){const e=c.RV6();c.j41(0,"footer",16)(1,"ul",17)(2,"li",18)(3,"button",19),c.EFF(4,"Save"),c.k0s()(),c.j41(5,"li",18)(6,"button",20),c.bIt("click",(function(){c.eBV(e);const t=c.XpG();return c.Njj(t.closeEditMode())})),c.EFF(7,"Cancel"),c.k0s()()()()}}const Ul=["administration-dictionarymanager-item",""];function Vl(e,t){if(1&e&&(c.j41(0,"td",1),c.nrm(1,"div",2),c.k0s()),2&e){const e=t.$implicit,s=c.XpG();c.R7$(),c.Y8G("field",e)("id",s.item.id)("inputvalue",s.item[e])}}let Hl=(()=>{class AdministrationDictionaryManagerItemField{constructor(e){this.dictionary=e,this.field="",this.id="",this.inputvalue="",this.editMode=!1}get fieldvalue(){return this.inputvalue}set fieldvalue(e){}isEditMode(){return this.editMode}setEditMode(){this.editMode=!0}closeEdit(){this.editMode=!1}ngAfterViewInit(){}ngOnInit(){}static#e=this.ɵfac=function(e){return new(e||AdministrationDictionaryManagerItemField)(c.rXU($l))};static#t=this.ɵcmp=c.VBU({type:AdministrationDictionaryManagerItemField,selectors:[["","administration-dictionarymanager-item-field",""]],inputs:{field:"field",id:"id",inputvalue:"inputvalue"},attrs:Nl,decls:2,vars:2,consts:[["class","slds-text-body--regular slds-truncate spice-fieldbody",4,"ngIf"],["class","slds-form-element__control",4,"ngIf"],[1,"slds-text-body--regular","slds-truncate","spice-fieldbody"],[1,"slds-button","slds-button--icon",2,"float","right",3,"click"],["aria-hidden","true",1,"slds-button__icon"],[0,"xlink","href","./vendor/sldassets/icons/utility-sprite/svg/symbols.svg#edit"],[1,"slds-form-element__control"],["type","text",1,"slds-input",3,"ngModel","ngModelChange"]],template:function(e,t){1&e&&c.DNE(0,Tl,6,1,"p",0)(1,Xl,2,1,"div",1),2&e&&(c.Y8G("ngIf",!t.isEditMode()),c.R7$(),c.Y8G("ngIf",t.isEditMode()))},dependencies:[i.bT,n.me,n.BC,n.vS],encapsulation:2})}return AdministrationDictionaryManagerItemField})(),zl=(()=>{class AdministrationDictionaryManager{constructor(e){this.dictionary=e,this.dictionaryitem=""}ngAfterViewInit(){this.dictionary.load(this.dictionaryitem).subscribe((e=>{}))}isEditMode(){}closeEditMode(){}static#e=this.ɵfac=function(e){return new(e||AdministrationDictionaryManager)(c.rXU($l))};static#t=this.ɵcmp=c.VBU({type:AdministrationDictionaryManager,selectors:[["administration-dictionarymanager"]],inputs:{dictionaryitem:"dictionaryitem"},features:[c.Jv_([$l])],decls:16,vars:5,consts:[["role","banner",1,"slds-page-header"],[1,"slds-grid"],[1,"slds-col","slds-has-flexi-truncate"],[1,"slds-media","slds-no-space","slds-grow"],[1,"slds-media__body"],[1,"slds-page-header__title","slds-m-right--small","slds-align-middle","slds-truncate"],[1,"slds-text-title--caps","slds-line-height--reset"],["role","grid",1,"slds-table","slds-table--bordered","slds-table--fixed-layout"],[1,"slds-text-title--caps"],["class","slds-is-sortable slds-is-resizable","scope","col",4,"ngFor","ngForOf"],["administration-dictionarymanager-item","","class","slds-hint-parent",3,"item",4,"ngFor","ngForOf"],["class","slds-utility-bar_container","role","footer",4,"ngIf"],["scope","col",1,"slds-is-sortable","slds-is-resizable"],["href","javascript:void(0);",1,"slds-th__action","slds-text-link--reset"],[1,"slds-truncate"],["administration-dictionarymanager-item","",1,"slds-hint-parent",3,"item"],["role","footer",1,"slds-utility-bar_container"],[1,"slds-utility-bar"],[1,"slds-utility-bar__item"],[1,"slds-button","slds-utility-bar__action","slds-button--brand"],[1,"slds-button","slds-utility-bar__action","slds-button--brand",3,"click"]],template:function(e,t){1&e&&(c.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"h1",5),c.EFF(6),c.k0s(),c.j41(7,"p",6),c.EFF(8),c.k0s()()()()()(),c.j41(9,"table",7)(10,"thead")(11,"tr",8),c.DNE(12,Yl,4,1,"th",9),c.k0s()(),c.j41(13,"tbody"),c.DNE(14,wl,1,1,"tr",10),c.k0s()(),c.DNE(15,Ol,8,0,"footer",11)),2&e&&(c.R7$(6),c.SpI("Dictionary ",t.dictionaryitem,""),c.R7$(2),c.SpI("",t.dictionary.data.length," Items"),c.R7$(4),c.Y8G("ngForOf",t.dictionary.getFields()),c.R7$(2),c.Y8G("ngForOf",t.dictionary.data),c.R7$(),c.Y8G("ngIf",t.isEditMode()))},dependencies:()=>[i.Sq,i.bT,Pl],encapsulation:2})}return AdministrationDictionaryManager})(),Pl=(()=>{class AdministrationDictionaryManagerItem{constructor(e){this.dictionary=e,this.item={},this.editMode=!1}isEditMode(){return this.editMode}setEditMode(){this.editMode=!0}closeEdit(){this.editMode=!1}ngAfterViewInit(){}ngOnInit(){}static#e=this.ɵfac=function(e){return new(e||AdministrationDictionaryManagerItem)(c.rXU($l))};static#t=this.ɵcmp=c.VBU({type:AdministrationDictionaryManagerItem,selectors:[["","administration-dictionarymanager-item",""]],inputs:{item:"item"},attrs:Ul,decls:1,vars:1,consts:[["scope","row",4,"ngFor","ngForOf"],["scope","row"],["administration-dictionarymanager-item-field","",1,"slds-truncate",3,"field","id","inputvalue"]],template:function(e,t){1&e&&c.DNE(0,Vl,2,3,"td",0),2&e&&c.Y8G("ngForOf",t.dictionary.getFields())},dependencies:[i.Sq,Hl],encapsulation:2})}return AdministrationDictionaryManagerItem})();var Jl=s(88421),ql=s(55480),Wl=s(79413),Kl=s(74052);function Ql(e,t){if(1&e){const e=c.RV6();c.j41(0,"div",19)(1,"div",48),c.nrm(2,"system-label",106),c.j41(3,"div",31)(4,"div",32)(5,"select",33),c.mxI("ngModelChange",(function(t){c.eBV(e);const s=c.XpG();return c.DH7(s.settings.cache.file_location,t)||(s.settings.cache.file_location=t),c.Njj(t)})),c.j41(6,"option",107),c.EFF(7,"./cache"),c.k0s(),c.j41(8,"option",108),c.EFF(9,"System Temp Dir"),c.k0s()()()()(),c.j41(10,"div",48)(11,"div",57),c.nrm(12,"system-label",109),c.j41(13,"system-checkbox",59),c.mxI("ngModelChange",(function(t){c.eBV(e);const s=c.XpG();return c.DH7(s.settings.cache.file_transparentnames,t)||(s.settings.cache.file_transparentnames=t),c.Njj(t)})),c.nrm(14,"system-label",110),c.k0s()()()()}if(2&e){const e=c.XpG();c.R7$(5),c.R50("ngModel",e.settings.cache.file_location),c.R7$(8),c.R50("ngModel",e.settings.cache.file_transparentnames)}}function Zl(e,t){if(1&e){const e=c.RV6();c.j41(0,"div",19)(1,"div",48),c.nrm(2,"system-label",111),c.j41(3,"system-input-text",22),c.mxI("ngModelChange",(function(t){c.eBV(e);const s=c.XpG();return c.DH7(s.settings.cache.redis_host,t)||(s.settings.cache.redis_host=t),c.Njj(t)})),c.k0s()(),c.j41(4,"div",48),c.nrm(5,"system-label",112),c.j41(6,"system-input-integer",22),c.mxI("ngModelChange",(function(t){c.eBV(e);const s=c.XpG();return c.DH7(s.settings.cache.redis_port,t)||(s.settings.cache.redis_port=t),c.Njj(t)})),c.k0s()()()}if(2&e){const e=c.XpG();c.R7$(3),c.R50("ngModel",e.settings.cache.redis_host),c.R7$(3),c.R50("ngModel",e.settings.cache.redis_port)}}function ea(e,t){if(1&e){const e=c.RV6();c.j41(0,"div",19)(1,"div",48),c.nrm(2,"system-label",113),c.j41(3,"system-input-text",22),c.mxI("ngModelChange",(function(t){c.eBV(e);const s=c.XpG();return c.DH7(s.settings.cache.memcached_host,t)||(s.settings.cache.memcached_host=t),c.Njj(t)})),c.k0s()(),c.j41(4,"div",48),c.nrm(5,"system-label",114),c.j41(6,"system-input-integer",22),c.mxI("ngModelChange",(function(t){c.eBV(e);const s=c.XpG();return c.DH7(s.settings.cache.memcached_port,t)||(s.settings.cache.memcached_port=t),c.Njj(t)})),c.k0s()()()}if(2&e){const e=c.XpG();c.R7$(3),c.R50("ngModel",e.settings.cache.memcached_host),c.R7$(3),c.R50("ngModel",e.settings.cache.memcached_port)}}const ta=["*"];let sa=(()=>{class AdministrationGeneralSettings{constructor(e,t,s,i,n,l){this.metadata=e,this.language=t,this.backend=s,this.modal=i,this.toast=n,this.currency=l,this.settings={system:{name:"",site_url:"",unique_key:"",startup_mode:"normal",edit_mode:"none"},advanced:{stack_trace_errors:0,dump_slow_queries:!1,slow_query_time_msec:0,upload_maxsize:0,international_email_addresses:0},cache:{class:"SpiceCacheFile",external_cache_disabled:!1,redis_host:"localhost",redis_port:6379,memcached_host:"localhost",memcached_port:11211},logger:{level:"",file_name:"spicecrm",file_ext:"",file_maxlogs:10,file_maxsize:"10MB",file_suffix:""}},this.options=[],this.currencies=[],this.loading=!0,this._loglevels=[]}ngOnInit(){this.modal.openModal("SystemLoadingModal").subscribe((e=>{this.backend.getRequest("configuration/settings").subscribe((t=>{switch(this.settings=t,this.settings.advanced.international_email_addresses){case!0:this.settings.advanced.stack_trace_errors="2";break;case!1:this.settings.advanced.stack_trace_errors="0"}this._loglevels=this.settings.logger.level.split(","),this.loading=!1,e.instance.self.destroy()}))}))}save(){this.modal.openModal("SystemLoadingModal").subscribe((e=>{this.backend.postRequest("configuration/settings",{},this.settings).subscribe((e=>{e.status?this.toast.sendToast(this.language.getLabel("LBL_SUCCESS"),"success"):this.toast.sendToast(this.language.getLabel("LBL_ERROR"),"error")})),e.instance.self.destroy()}))}get loglevels(){return this._loglevels}set loglevels(e){this._loglevels=e,this.settings.logger.level=e.join(",")}get loggerMaxSize(){return(this.settings.logger.file_maxsize??"").replace("MB","")}set loggerMaxSize(e){this.settings.logger.file_maxsize=e+"MB"}static#e=this.ɵfac=function(e){return new(e||AdministrationGeneralSettings)(c.rXU(p.yu),c.rXU(h.B),c.rXU(u.H),c.rXU(P.y),c.rXU(z.o),c.rXU(Jl.G))};static#t=this.ɵcmp=c.VBU({type:AdministrationGeneralSettings,selectors:[["administration-general-setting"]],ngContentSelectors:ta,decls:172,vars:22,consts:[[1,"slds-p-around--medium","slds-theme--shade"],[1,"slds-page-header__row"],[1,"slds-page-header__col-title"],[1,"slds-media"],["icon","settings"],[1,"slds-media__body"],[1,"slds-page-header__name"],[1,"slds-page-header__name-title"],[1,"slds-page-header__title","slds-truncate"],["label","LBL_GENERAL_SETTINGS"],[1,"slds-page-header__name-meta"],[1,"slds-button","slds-button--neutral",3,"click"],["label","LBL_SAVE"],[1,"slds-theme--default","slds-p-around--xx-small"],[1,"slds-section","slds-is-open"],[1,"slds-section__title"],["aria-expanded","true",1,"slds-button","slds-section__title-action"],[1,"slds-truncate"],[1,"slds-section__content"],[1,"slds-grid","slds-m-vertical--xx-small","slds-grid--align-spread"],[1,"slds-form-element__control","slds-size--1-of-1","slds-p-around--x-small"],["label","LBL_NAME"],["autocomplete","off",3,"ngModel","ngModelChange"],["label","LBL_SITE_URL"],[1,"slds-form-element__control","slds-size--1-of-2","slds-p-around--x-small"],["label","LBL_UNIQUE_KEY"],["autocomplete","off",3,"disabled","ngModel","ngModelChange"],[1,"slds-p-around--x-small","slds-size--1-of-4"],[1,"slds-form-element"],[1,"slds-form-element__label"],["label","LBL_STARTUP_MODE"],[1,"slds-form-element__control"],[1,"slds-select_container"],[1,"slds-select",3,"ngModel","ngModelChange"],["value","normal"],["label","LBL_NORMAL"],["value","maintenance"],["label","LBL_MAINTENANCE"],["value","recovery"],["label","LBL_RECOVERY"],["label","LBL_EDIT_MODE"],["value","none"],["label","LBL_NONE"],["value","custom"],["label","LBL_CUSTOM"],["value","all"],["label","LBL_ALL"],["label","LBL_ADVANCED_SETTINGS"],[1,"slds-p-around--x-small","slds-size--1-of-2"],["label","LBL_STACKTRACE"],["value","0"],["value","1"],["value","2"],["label","LBL_MAXIMUM_UPLOAD_SIZE"],[3,"ngModel","ngModelChange"],["label","LBL_EXPORT_LINES"],[3,"disabled","ngModel","ngModelChange"],[1,"slds-grid","slds-grid_vertical"],["label","LBL_INTERNATIONAL_EMAIL_ADDRESSES"],[1,"slds-p-vertical--xx-small",3,"ngModel","ngModelChange"],["label","LBL_CACHE"],["label","LBL_CACHE_TYPE"],["value","SpiceCacheFile"],["value","SpiceCacheRedis"],["value","SpiceCacheMemcached"],["value","SpiceCacheMemory"],[1,"slds-form-element__control","slds-size--1-of-2","slds-truncate","slds-p-around--x-small"],["label","LBL_DISABLE_EXTERNAL_CACHE"],[1,"slds-p-vertical--xx-small"],["label","LBL_CACHE_DISABLED"],["class","slds-grid slds-m-vertical--xx-small slds-grid--align-spread",4,"ngIf"],["label","LBL_LOGGER_SETTINGS"],[1,"slds-grid","slds-m-vertical--xx-small"],[1,"slds-size--1-of-2"],["label","LBL_LOGFILE_NAME"],[1,"slds-grid","slds-p-around--x-small"],[1,"slds-form-element__control","slds-size--5-of-6","slds-p-right--x-small"],[1,"slds-form-element__control","slds-size--1-of-6","slds-p-left--x-small"],[1,"slds-grid"],["label","LBL_LOGFILE_MAX_SIZE"],[1,"slds-grid","slds-grid--vertical-align-center"],["autocomplete","off",1,"slds-grow",3,"ngModel","ngModelChange"],[1,"slds-p-left--x-small"],["label","LBL_LOGFILE_MAX_NUMBER"],["label","LBL_SLOW_QUERYTIME_TRESHHOLD"],[1,"slds-size--1-of-2","slds-grid","slds-grid--vertical"],["label","LBL_LOGFILE_LEVEL"],[1,"slds-grid","slds-wrap",3,"ngModel","ngModelChange"],["value","debug",1,"slds-size--1-of-2","slds-p-vertical--xxx-small"],["label","LBL_LOGLEVEL_DEBUG"],["value","info",1,"slds-size--1-of-2","slds-p-vertical--xxx-small"],["label","LBL_LOGLEVEL_INFO"],["value","error",1,"slds-size--1-of-2","slds-p-vertical--xxx-small"],["label","LBL_LOGLEVEL_ERROR"],["value","warn",1,"slds-size--1-of-2","slds-p-vertical--xxx-small"],["label","LBL_LOGLEVEL_WARN"],["value","security",1,"slds-size--1-of-2","slds-p-vertical--xxx-small"],["label","LBL_LOGLEVEL_SECURITY"],["value","fatal",1,"slds-size--1-of-2","slds-p-vertical--xxx-small"],["label","LBL_LOGLEVEL_FATAL"],["value","sql",1,"slds-size--1-of-2","slds-p-vertical--xxx-small"],["label","LBL_LOGLEVEL_SQL"],["value","slowsql",1,"slds-size--1-of-2","slds-p-vertical--xxx-small"],["label","LBL_LOGLEVEL_SLOWSQL"],["value","developer",1,"slds-size--1-of-2","slds-p-vertical--xxx-small"],["label","LBL_LOGLEVEL_DEVELOPER"],["label","LBL_FILE_LOCTATION"],["value","cache"],["value","systemdir"],["label","LBL_FILE_NAME"],["label","LBL_TRANSPARENT_FILENAMES"],["label","LBL_REDIS_HOST"],["label","LBL_REDIS_PORT"],["label","LBL_MEMCACHED_HOST"],["label","LBL_MEMCACHED_PORT"]],template:function(e,t){1&e&&(c.NAR(),c.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),c.nrm(4,"system-icon",4),c.j41(5,"div",5)(6,"div",6)(7,"div",7)(8,"h1")(9,"span",8),c.nrm(10,"system-label",9),c.k0s()()()(),c.j41(11,"p",10),c.SdG(12),c.k0s()()()(),c.j41(13,"button",11),c.bIt("click",(function(){return t.save()})),c.nrm(14,"system-label",12),c.k0s()()(),c.j41(15,"div",13)(16,"div",14)(17,"h3",15)(18,"button",16)(19,"span",17),c.nrm(20,"system-label",9),c.k0s()()(),c.j41(21,"div",18)(22,"div",19)(23,"div",20),c.nrm(24,"system-label",21),c.j41(25,"system-input-text",22),c.mxI("ngModelChange",(function(e){return c.DH7(t.settings.system.name,e)||(t.settings.system.name=e),e})),c.k0s()()(),c.j41(26,"div",19)(27,"div",20),c.nrm(28,"system-label",23),c.j41(29,"system-input-text",22),c.mxI("ngModelChange",(function(e){return c.DH7(t.settings.system.site_url,e)||(t.settings.system.site_url=e),e})),c.k0s()()(),c.j41(30,"div",19)(31,"div",24),c.nrm(32,"system-label",25),c.j41(33,"system-input-text",26),c.mxI("ngModelChange",(function(e){return c.DH7(t.settings.system.unique_key,e)||(t.settings.system.unique_key=e),e})),c.k0s()(),c.j41(34,"div",27)(35,"div",28)(36,"label",29),c.nrm(37,"system-label",30),c.k0s(),c.j41(38,"div",31)(39,"div",32)(40,"select",33),c.mxI("ngModelChange",(function(e){return c.DH7(t.settings.system.startup_mode,e)||(t.settings.system.startup_mode=e),e})),c.j41(41,"option",34),c.nrm(42,"system-label",35),c.k0s(),c.j41(43,"option",36),c.nrm(44,"system-label",37),c.k0s(),c.j41(45,"option",38),c.nrm(46,"system-label",39),c.k0s()()()()()(),c.j41(47,"div",27)(48,"div",28)(49,"label",29),c.nrm(50,"system-label",40),c.k0s(),c.j41(51,"div",31)(52,"div",32)(53,"select",33),c.mxI("ngModelChange",(function(e){return c.DH7(t.settings.system.edit_mode,e)||(t.settings.system.edit_mode=e),e})),c.j41(54,"option",41),c.nrm(55,"system-label",42),c.k0s(),c.j41(56,"option",43),c.nrm(57,"system-label",44),c.k0s(),c.j41(58,"option",45),c.nrm(59,"system-label",46),c.k0s()()()()()()()()(),c.j41(60,"div",14)(61,"h3",15)(62,"button",16)(63,"span",17),c.nrm(64,"system-label",47),c.k0s()()(),c.j41(65,"div",18)(66,"div",19)(67,"div",48)(68,"div",28)(69,"label",29),c.nrm(70,"system-label",49),c.k0s(),c.j41(71,"div",31)(72,"div",32)(73,"select",33),c.mxI("ngModelChange",(function(e){return c.DH7(t.settings.advanced.stack_trace_errors,e)||(t.settings.advanced.stack_trace_errors=e),e})),c.j41(74,"option",50),c.EFF(75,"off"),c.k0s(),c.j41(76,"option",51),c.EFF(77,"on main error information"),c.k0s(),c.j41(78,"option",52),c.EFF(79,"on full stack trace"),c.k0s()()()()()()(),c.j41(80,"div",19)(81,"div",24),c.nrm(82,"system-label",53),c.j41(83,"system-input-integer",54),c.mxI("ngModelChange",(function(e){return c.DH7(t.settings.advanced.upload_maxsize,e)||(t.settings.advanced.upload_maxsize=e),e})),c.k0s()(),c.j41(84,"div",24),c.nrm(85,"system-label",55),c.j41(86,"system-input-integer",56),c.mxI("ngModelChange",(function(e){return c.DH7(t.settings.advanced.maximum_export_lines,e)||(t.settings.advanced.maximum_export_lines=e),e})),c.k0s()()(),c.j41(87,"div",19)(88,"div",48)(89,"div",57),c.nrm(90,"system-label",58),c.j41(91,"system-checkbox",59),c.mxI("ngModelChange",(function(e){return c.DH7(t.settings.advanced.international_email_addresses,e)||(t.settings.advanced.international_email_addresses=e),e})),c.k0s()()()()()(),c.j41(92,"div",14)(93,"h3",15)(94,"button",16)(95,"span",17),c.nrm(96,"system-label",60),c.k0s()()(),c.j41(97,"div",18)(98,"div",19)(99,"div",48)(100,"div",28)(101,"label",29),c.nrm(102,"system-label",61),c.k0s(),c.j41(103,"div",31)(104,"div",32)(105,"select",33),c.mxI("ngModelChange",(function(e){return c.DH7(t.settings.cache.class,e)||(t.settings.cache.class=e),e})),c.j41(106,"option",62),c.EFF(107,"File"),c.k0s(),c.j41(108,"option",63),c.EFF(109,"Redis"),c.k0s(),c.j41(110,"option",64),c.EFF(111,"Memcached"),c.k0s(),c.j41(112,"option",65),c.EFF(113,"Memoryt"),c.k0s()()()()()(),c.j41(114,"div",66),c.nrm(115,"system-label",67),c.j41(116,"div",68)(117,"system-checkbox",54),c.mxI("ngModelChange",(function(e){return c.DH7(t.settings.cache.external_cache_disabled,e)||(t.settings.cache.external_cache_disabled=e),e})),c.nrm(118,"system-label",69),c.k0s()()()(),c.DNE(119,Ql,15,2,"div",70)(120,Zl,7,2,"div",70)(121,ea,7,2,"div",70),c.k0s()(),c.j41(122,"div",14)(123,"h3",15)(124,"button",16)(125,"span",17),c.nrm(126,"system-label",71),c.k0s()()(),c.j41(127,"div",18)(128,"div",72)(129,"div",73)(130,"div"),c.nrm(131,"system-label",74),c.j41(132,"div",75)(133,"div",76)(134,"system-input-text",22),c.mxI("ngModelChange",(function(e){return c.DH7(t.settings.logger.file_name,e)||(t.settings.logger.file_name=e),e})),c.k0s()(),c.j41(135,"div",77)(136,"system-input-text",22),c.mxI("ngModelChange",(function(e){return c.DH7(t.settings.logger.file_ext,e)||(t.settings.logger.file_ext=e),e})),c.k0s()()()(),c.j41(137,"div",78)(138,"div",24),c.nrm(139,"system-label",79),c.j41(140,"div",80)(141,"system-input-integer",81),c.mxI("ngModelChange",(function(e){return c.DH7(t.loggerMaxSize,e)||(t.loggerMaxSize=e),e})),c.k0s(),c.j41(142,"div",82),c.EFF(143,"MB"),c.k0s()()(),c.j41(144,"div",24),c.nrm(145,"system-label",83),c.j41(146,"system-input-integer",22),c.mxI("ngModelChange",(function(e){return c.DH7(t.settings.logger.file_maxlogs,e)||(t.settings.logger.file_maxlogs=e),e})),c.k0s()()(),c.j41(147,"div",20),c.nrm(148,"system-label",84),c.j41(149,"system-input-integer",54),c.mxI("ngModelChange",(function(e){return c.DH7(t.settings.advanced.slow_query_time_msec,e)||(t.settings.advanced.slow_query_time_msec=e),e})),c.k0s()()(),c.j41(150,"div",85)(151,"div",20),c.nrm(152,"system-label",86),c.j41(153,"system-checkbox-group",87),c.mxI("ngModelChange",(function(e){return c.DH7(t.loglevels,e)||(t.loglevels=e),e})),c.j41(154,"system-checkbox-group-checkbox",88),c.nrm(155,"system-label",89),c.k0s(),c.j41(156,"system-checkbox-group-checkbox",90),c.nrm(157,"system-label",91),c.k0s(),c.j41(158,"system-checkbox-group-checkbox",92),c.nrm(159,"system-label",93),c.k0s(),c.j41(160,"system-checkbox-group-checkbox",94),c.nrm(161,"system-label",95),c.k0s(),c.j41(162,"system-checkbox-group-checkbox",96),c.nrm(163,"system-label",97),c.k0s(),c.j41(164,"system-checkbox-group-checkbox",98),c.nrm(165,"system-label",99),c.k0s(),c.j41(166,"system-checkbox-group-checkbox",100),c.nrm(167,"system-label",101),c.k0s(),c.j41(168,"system-checkbox-group-checkbox",102),c.nrm(169,"system-label",103),c.k0s(),c.j41(170,"system-checkbox-group-checkbox",104),c.nrm(171,"system-label",105),c.k0s()()()()()()()()),2&e&&(c.R7$(25),c.R50("ngModel",t.settings.system.name),c.R7$(4),c.R50("ngModel",t.settings.system.site_url),c.R7$(4),c.Y8G("disabled",!0),c.R50("ngModel",t.settings.system.unique_key),c.R7$(7),c.R50("ngModel",t.settings.system.startup_mode),c.R7$(13),c.R50("ngModel",t.settings.system.edit_mode),c.R7$(20),c.R50("ngModel",t.settings.advanced.stack_trace_errors),c.R7$(10),c.R50("ngModel",t.settings.advanced.upload_maxsize),c.R7$(3),c.Y8G("disabled",!0),c.R50("ngModel",t.settings.advanced.maximum_export_lines),c.R7$(5),c.R50("ngModel",t.settings.advanced.international_email_addresses),c.R7$(14),c.R50("ngModel",t.settings.cache.class),c.R7$(12),c.R50("ngModel",t.settings.cache.external_cache_disabled),c.R7$(2),c.Y8G("ngIf","SpiceCacheFile"==t.settings.cache.class),c.R7$(),c.Y8G("ngIf","SpiceCacheRedis"==t.settings.cache.class),c.R7$(),c.Y8G("ngIf","SpiceCacheMemcached"==t.settings.cache.class),c.R7$(13),c.R50("ngModel",t.settings.logger.file_name),c.R7$(2),c.R50("ngModel",t.settings.logger.file_ext),c.R7$(5),c.R50("ngModel",t.loggerMaxSize),c.R7$(5),c.R50("ngModel",t.settings.logger.file_maxlogs),c.R7$(3),c.R50("ngModel",t.settings.advanced.slow_query_time_msec),c.R7$(4),c.R50("ngModel",t.loglevels))},dependencies:[i.bT,n.xH,n.y7,n.wz,n.BC,n.vS,W.f,ql.G,Wl.h,E.J,Q.H,Kl.E,j.W],encapsulation:2})}return AdministrationGeneralSettings})();function ia(e,t){1&e&&c.nrm(0,"system-spinner",15)}function na(e,t){1&e&&c.nrm(0,"div",16)}function la(e,t){if(1&e&&(c.j41(0,"div",4)(1,"div",5)(2,"div",6)(3,"header",7),c.nrm(4,"system-icon",8),c.j41(5,"div",9)(6,"h2",10)(7,"div",11),c.EFF(8),c.k0s()()(),c.j41(9,"div",12),c.DNE(10,ia,1,0,"system-spinner",13)(11,na,1,0,"div",14),c.k0s()()()()()),2&e){const e=t.$implicit,s=c.XpG();c.R7$(7),c.Y8G("title",e.language_name),c.R7$(),c.SpI(" ",e.language_name," "),c.R7$(2),c.Y8G("ngIf",s.loading),c.R7$(),c.Y8G("ngIf",!s.loading)}}let aa=(()=>{class AdministrationLanguages{constructor(e,t,s,i,n){this.metadata=e,this.language=t,this.backend=s,this.modal=i,this.toast=n,this.languages=[],this.loading=!0}ngOnInit(){this.modal.openModal("SystemLoadingModal").subscribe((e=>{this.backend.getRequest("packages").subscribe((t=>{t.versions?this.languages=t.languages:this.toast.sendToast(this.language.getLabel("LBL_ERROR"),"error"),this.loading=!1,e.instance.self.destroy()}))}))}static#e=this.ɵfac=function(e){return new(e||AdministrationLanguages)(c.rXU(p.yu),c.rXU(h.B),c.rXU(u.H),c.rXU(P.y),c.rXU(z.o))};static#t=this.ɵcmp=c.VBU({type:AdministrationLanguages,selectors:[["administration-languages"]],decls:5,vars:1,consts:[[1,"slds-grid","slds-grid--align-spread","slds-p-around--medium"],[1,"slds-text-heading--medium"],[1,"slds-grid","slds-wrap"],["class","slds-size--1-of-2 slds-p-around--xx-small",4,"ngFor","ngForOf"],[1,"slds-size--1-of-2","slds-p-around--xx-small"],[1,"slds-card"],[1,"slds-card__header","slds-grid"],[1,"slds-media","slds-media_center","slds-has-flexi-truncate"],["size","small","icon","custom68","sprite","custom",1,"slds-p-right--xx-small"],[1,"slds-media__body"],[1,"slds-card__header-title"],[1,"slds-card__header-link","slds-truncate",3,"title"],[1,"slds-no-flex"],["size","12",4,"ngIf"],["class","slds-grid slds-grid_vertical-align-center",4,"ngIf"],["size","12"],[1,"slds-grid","slds-grid_vertical-align-center"]],template:function(e,t){1&e&&(c.j41(0,"div",0)(1,"h2",1),c.EFF(2,"Languages"),c.k0s()(),c.j41(3,"div",2),c.DNE(4,la,12,4,"div",3),c.k0s()),2&e&&(c.R7$(4),c.Y8G("ngForOf",t.languages))},dependencies:[i.Sq,i.bT,E.J,Ds.P],encapsulation:2})}return AdministrationLanguages})();var oa=s(2187),da=s(84338),ra=s(14445),ca=s(22667),ma=s(36953);function ua(e,t){if(1&e){const e=c.RV6();c.qex(0),c.j41(1,"button",22),c.bIt("click",(function(){c.eBV(e);const t=c.XpG();return c.Njj(t.view.setViewMode())})),c.nrm(2,"system-label",23),c.k0s(),c.j41(3,"button",24),c.bIt("click",(function(){c.eBV(e);const t=c.XpG();return c.Njj(t.save())})),c.nrm(4,"system-label",25),c.k0s(),c.bVm()}}function ga(e,t){if(1&e){const e=c.RV6();c.j41(0,"button",26),c.bIt("click",(function(){c.eBV(e);const t=c.XpG();return c.Njj(t.view.setEditMode())})),c.nrm(1,"system-label",27),c.k0s()}}let ha=(()=>{class AdministrationDefaultPreferences{constructor(e,t,s,i,n,l){this.backend=e,this.toast=t,this.language=s,this.configuration=i,this.view=n,this.modal=l,this.preferences={}}ngOnInit(){this.loadPreferences()}loadPreferences(){const e=this.modal.await("LBL_LOADING");this.backend.getRequest("configuration/configurator/editor/default_preferences").subscribe((t=>{this.preferences=t,e.emit(),e.complete()}))}save(){const e=this.modal.await("LBL_SAVING_DATA");this.backend.postRequest("configuration/configurator/editor/default_preferences",[],{config:this.preferences}).subscribe((t=>{this.configuration.reloadTaskData("defaultuserpreferences"),this.toast.sendToast(this.language.getLabel("LBL_DATA_SAVED"),"success"),this.view.setViewMode(),e.emit(),e.complete()}))}static#e=this.ɵfac=function(e){return new(e||AdministrationDefaultPreferences)(c.rXU(u.H),c.rXU(z.o),c.rXU(h.B),c.rXU(H.i),c.rXU(xn.U),c.rXU(P.y))};static#t=this.ɵcmp=c.VBU({type:AdministrationDefaultPreferences,selectors:[["administration-default-preferences"]],features:[c.Jv_([xn.U])],decls:30,vars:6,consts:[[1,"slds-page-header"],[1,"slds-page-header__row"],[1,"slds-page-header__col-title"],[1,"slds-grid","slds-grid--vertical-align-center"],["icon","custom67","sprite","custom","addclasses","slds-page-header__icon"],[1,"slds-media__body"],[1,"slds-page-header__name"],[1,"slds-page-header__name-title"],["system-title","LBL_DEFAULT_PREFERENCES",1,"slds-page-header__title","slds-truncate"],["label","LBL_DEFAULT_PREFERENCES"],[1,"slds-grid"],[4,"ngIf","ngIfElse"],["editButtonContainer",""],[1,"spice-display-block","slds-p-around--xx-small",3,"preferences"],["tabtitle","LBL_HOME_PREFERENCES",3,"collapsible"],["itemlabel","LBL_HOME_ASSISTANT",1,"slds-size--1-of-3"],[1,"slds-select_container"],[1,"slds-select",3,"ngModel","ngModelChange"],["value","visible"],["label","LBL_VISIBLE"],["value","hidden"],["label","LBL_HIDDEN"],[1,"slds-button","slds-button--neutral","slds-m-horizontal--xx-small",3,"click"],["label","LBL_CANCEL"],[1,"slds-button","slds-button--brand",3,"click"],["label","LBL_SAVE"],[1,"slds-button","slds-button--neutral",3,"click"],["label","LBL_EDIT"]],template:function(e,t){if(1&e&&(c.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div"),c.nrm(5,"system-icon",4),c.k0s(),c.j41(6,"div",5)(7,"div",6)(8,"div",7)(9,"h1")(10,"span",8),c.nrm(11,"system-label",9),c.k0s()()()()()()(),c.j41(12,"div",10),c.DNE(13,ua,5,0,"ng-container",11)(14,ga,2,0,"ng-template",null,12,c.C5r),c.k0s()()(),c.nrm(16,"system-preferences-panel",13),c.j41(17,"system-collapsable-tab",14)(18,"div",10)(19,"system-preferences-panel-item",15)(20,"system-preferences-panel-item-display"),c.EFF(21),c.k0s(),c.j41(22,"system-preferences-panel-item-edit")(23,"div",16)(24,"select",17),c.mxI("ngModelChange",(function(e){return c.DH7(t.preferences.home_assistant,e)||(t.preferences.home_assistant=e),e})),c.nrm(25,"option"),c.j41(26,"option",18),c.nrm(27,"system-label",19),c.k0s(),c.j41(28,"option",20),c.nrm(29,"system-label",21),c.k0s()()()()()()()),2&e){const e=c.sdS(15);c.R7$(13),c.Y8G("ngIf",t.view.isEditMode())("ngIfElse",e),c.R7$(3),c.Y8G("preferences",t.preferences),c.R7$(),c.Y8G("collapsible",!1),c.R7$(4),c.SpI(" ",t.preferences.home_assistant," "),c.R7$(3),c.R50("ngModel",t.preferences.home_assistant)}},dependencies:[i.bT,n.xH,n.y7,n.wz,n.BC,n.vS,oa.p,E.J,j.W,da.w,ra.x,ca.J,ma.t,M.L],encapsulation:2})}return AdministrationDefaultPreferences})();var ba=s(58461),pa=s(20883);const fa=e=>({"slds-theme--error":e});function ya(e,t){if(1&e&&(c.j41(0,"tr",46)(1,"td"),c.nrm(2,"system-display-datetime",47),c.k0s(),c.j41(3,"td")(4,"div",48),c.EFF(5),c.k0s()(),c.j41(6,"td")(7,"div",48),c.EFF(8),c.k0s()(),c.j41(9,"td",49),c.EFF(10),c.k0s()()),2&e){const e=t.$implicit;c.Y8G("ngClass",c.eq3(5,fa,"loginfail"==e.action)),c.R7$(2),c.Y8G("date",e.date_entered),c.R7$(3),c.JRh(e.login_name),c.R7$(3),c.JRh(e.ipaddress),c.R7$(2),c.JRh(e.action)}}function _a(e,t){1&e&&(c.j41(0,"div",50)(1,"system-illustration-no-records"),c.nrm(2,"system-label",51),c.k0s()())}function va(e,t){if(1&e){const e=c.RV6();c.j41(0,"div",52)(1,"button",12),c.bIt("click",(function(){c.eBV(e);const t=c.XpG();return c.Njj(t.loadMore())})),c.nrm(2,"system-label",53),c.k0s()()}}let ka=(()=>{class AdministrationUserAccessLogViewer{constructor(e,t,s){this.backend=e,this.modal=t,this.toast=s,this.limit="250",this.filter="",this.isLoading=!1,this.failedOnly=!1,this.entries=[]}setNow(){this.dateEnd=new moment}loadData(){if(!this.isLoading){this.isLoading=!0;let e={limit:this.limit};this.filter&&(e.filter=this.filter),this.failedOnly&&(e.failedonly=this.failedOnly),this.dateEnd&&(e.date_end=this.dateEnd.format("YYYY-MM-DD HH:mm:ss")),this.backend.getRequest("admin/useraccesslog",e).subscribe((e=>{this.entries=e,this.isLoading=!1}),(e=>{this.toast.sendToast("Error loading log data!","error"),this.isLoading=!1}))}}loadMore(){if(!this.isLoading){this.isLoading=!0;let e={limit:this.limit,date_end:this.entries[this.entries.length-1].date_entered};this.filter&&(e.filter=this.filter),this.failedOnly&&(e.failedonly=this.failedOnly),this.backend.getRequest("admin/useraccesslog",e).subscribe((e=>{this.entries=this.entries.concat(e),this.isLoading=!1}),(e=>{this.toast.sendToast("Error loading log data!","error"),this.isLoading=!1}))}}buttonLoad(){this.loadData()}static#e=this.ɵfac=function(e){return new(e||AdministrationUserAccessLogViewer)(c.rXU(u.H),c.rXU(P.y),c.rXU(z.o))};static#t=this.ɵcmp=c.VBU({type:AdministrationUserAccessLogViewer,selectors:[["ng-component"]],decls:63,vars:9,consts:[[1,"slds-p-around--medium","slds-theme--shade"],[1,"slds-page-header__row"],[1,"slds-page-header__col-title"],[1,"slds-media"],["icon","lightning_usage"],[1,"slds-media__body"],[1,"slds-page-header__name"],[1,"slds-page-header__name-title"],[1,"slds-page-header__title","slds-truncate"],["label","LBL_USERACCESSLOG"],[1,"slds-page-header__name-meta"],["label","LBL_RECORDS"],[1,"slds-button","slds-button--neutral",3,"click"],["label","LBL_LOAD"],[1,"slds-section","slds-is-open","slds-p-around--xx-small"],[1,"slds-grid","slds-grid--vertical-align-end","slds-gutters_direct-xxx-small"],[1,"slds-col","slds-size--1-of-2"],[1,"slds-form-element__label"],["label","LBL_FILTER"],[1,"slds-grid","slds-grid--vertical-align-center"],[1,"slds-grow","slds-form-element__control","slds-input-has-icon","slds-input-has-icon_right"],["type","text","system-trim-input","",1,"slds-input",3,"ngModel","ngModelChange"],[1,"slds-button","slds-button_icon","slds-input__icon","slds-input__icon_right",3,"click"],["icon","clear","addclasses","slds-icon-text-light"],[3,"ngModel","ngModelChange"],["label","LBL_FAILEDONLY"],[1,"slds-col","slds-size--1-of-4"],["label","LBL_END"],[1,"slds-grow",3,"ngModel","ngModelChange"],[1,"slds-grow","slds-p-horizontal--xx-small",3,"ngModel","ngModelChange"],["system-title","LBL_NOW","icon","clock","size","x-small",3,"click"],["label","LBL_ROWS"],[1,"slds-select_container"],[1,"slds-select",3,"ngModel","ngModelChange"],["system-to-bottom","",1,"slds-border--top"],[1,"slds-table","slds-table--bordered","slds-table--fixed-layout","slds-table--col-bordered","slds-no-row-hover","slds-table_header-fixed"],[2,"width","8rem"],["label","LBL_DATE",1,"slds-th__action"],[1,"slds-resizable"],["label","LBL_USER",1,"slds-th__action"],["label","LBL_IP_ADDRESS",1,"slds-th__action"],["label","LBL_ACTION",1,"slds-th__action"],["tbody",""],[3,"ngClass",4,"ngFor","ngForOf"],["class","slds-height_full slds-align--absolute-center",4,"ngIf"],["class","slds-p-around--small slds-align--absolute-center",4,"ngIf"],[3,"ngClass"],[3,"date"],[1,"slds-truncate"],[1,"slds-text-align--center"],[1,"slds-height_full","slds-align--absolute-center"],["label","LBL_NO_RECORDS_FOUND"],[1,"slds-p-around--small","slds-align--absolute-center"],["label","LBL_LOAD_MORE"]],template:function(e,t){1&e&&(c.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),c.nrm(4,"system-icon",4),c.j41(5,"div",5)(6,"div",6)(7,"div",7)(8,"h1")(9,"span",8),c.nrm(10,"system-label",9),c.k0s()()()(),c.j41(11,"p",10),c.EFF(12),c.nrm(13,"system-label",11),c.k0s()()()(),c.j41(14,"button",12),c.bIt("click",(function(){return t.loadData()})),c.nrm(15,"system-label",13),c.k0s()()(),c.j41(16,"div",14)(17,"div",15)(18,"div",16)(19,"label",17),c.nrm(20,"system-label",18),c.k0s(),c.j41(21,"div",19)(22,"div",20)(23,"input",21),c.mxI("ngModelChange",(function(e){return c.DH7(t.filter,e)||(t.filter=e),e})),c.k0s(),c.j41(24,"button",22),c.bIt("click",(function(){return t.filter=""})),c.nrm(25,"system-button-icon",23),c.k0s()(),c.j41(26,"system-checkbox",24),c.mxI("ngModelChange",(function(e){return c.DH7(t.failedOnly,e)||(t.failedOnly=e),e})),c.nrm(27,"system-label",25),c.k0s()()(),c.j41(28,"div",26)(29,"label",17),c.nrm(30,"system-label",27),c.k0s(),c.j41(31,"div",19)(32,"system-input-date",28),c.mxI("ngModelChange",(function(e){return c.DH7(t.dateEnd,e)||(t.dateEnd=e),e})),c.k0s(),c.j41(33,"system-input-time",29),c.mxI("ngModelChange",(function(e){return c.DH7(t.dateEnd,e)||(t.dateEnd=e),e})),c.k0s(),c.j41(34,"system-utility-icon",30),c.bIt("click",(function(){return t.setNow()})),c.k0s()()(),c.j41(35,"div",26)(36,"label",17),c.nrm(37,"system-label",31),c.k0s(),c.j41(38,"div",32)(39,"select",33),c.mxI("ngModelChange",(function(e){return c.DH7(t.limit,e)||(t.limit=e),e})),c.j41(40,"option"),c.EFF(41,"250"),c.k0s(),c.j41(42,"option"),c.EFF(43,"500"),c.k0s(),c.j41(44,"option"),c.EFF(45,"1000"),c.k0s()()()()()(),c.j41(46,"div",34)(47,"table",35)(48,"thead")(49,"tr")(50,"th",36),c.nrm(51,"system-label",37),c.k0s(),c.j41(52,"th",38),c.nrm(53,"system-label",39),c.k0s(),c.j41(54,"th",36),c.nrm(55,"system-label",40),c.k0s(),c.j41(56,"th",36),c.nrm(57,"system-label",41),c.k0s()()(),c.j41(58,"tbody",null,42),c.DNE(60,ya,11,7,"tr",43),c.k0s()(),c.DNE(61,_a,3,0,"div",44)(62,va,3,0,"div",45),c.k0s()),2&e&&(c.R7$(12),c.SpI("",t.entries.length," "),c.R7$(11),c.R50("ngModel",t.filter),c.R7$(3),c.R50("ngModel",t.failedOnly),c.R7$(6),c.R50("ngModel",t.dateEnd),c.R7$(),c.R50("ngModel",t.dateEnd),c.R7$(6),c.R50("ngModel",t.limit),c.R7$(21),c.Y8G("ngForOf",t.entries),c.R7$(),c.Y8G("ngIf",0==t.entries.length),c.R7$(),c.Y8G("ngIf",t.entries.length>0))},dependencies:[i.YU,i.Sq,i.bT,n.xH,n.y7,n.me,n.wz,n.BC,n.vS,L.t,W.f,K.f,E.J,ba.b,ee.M,On.T,j.W,F.B,v.b,pa.D,M.L],encapsulation:2})}return AdministrationUserAccessLogViewer})();var Ra=s(96697),La=s(2265);const Ea=e=>({"slds-has-error":e});let ja=(()=>{class AdministrationLoginRestriction{constructor(e,t){this.backend=e,this.toast=t,this.isLoading=!0,this.restrictions={user:{enabled:!1,number_attempts:0,monitored_period:0,blocking_duration:0,blocking_type:"permanent"},ip:{enabled:!1,number_attempts:0,monitored_period:0}}}ngOnInit(){this.loadConfig()}isDirty(){return!_.isEqual(this.restrictions,this.restrictionsBackup)}cancelEditing(){this.restrictions=JSON.parse(JSON.stringify(this.restrictionsBackup))}saveConfig(){let e={ip_enabled:this.restrictions.ip.enabled?1:0,ip_number_attempts:this.restrictions.ip.number_attempts,ip_monitored_period:this.restrictions.ip.monitored_period,user_enabled:this.restrictions.user.enabled?1:0,user_number_attempts:this.restrictions.user.number_attempts,user_monitored_period:this.restrictions.user.monitored_period,user_blocking_duration:"time"===this.restrictions.user.blocking_type?this.restrictions.user.blocking_duration:"0"};this.isLoading=!0,this.backend.postRequest("configuration/configurator/editor/login_attempt_restriction",null,{config:e}).pipe((0,Ra.s)(1)).subscribe((e=>{this.restrictionsBackup=JSON.parse(JSON.stringify(this.restrictions)),this.toast.sendToast("Login Restriction Configuration successfully saved.","success"),this.isLoading=!1}))}loadConfig(){this.isLoading=!0,this.backend.getRequest("configuration/configurator/editor/login_attempt_restriction").pipe((0,Ra.s)(1)).subscribe({next:e=>{this.restrictions.ip.enabled="1"===e.ip_enabled||!1,this.restrictions.ip.number_attempts=1*e.ip_number_attempts||0,this.restrictions.ip.monitored_period=1*e.ip_monitored_period||0,this.restrictions.user.enabled="1"===e.user_enabled||!1,this.restrictions.user.number_attempts=1*e.user_number_attempts||0,this.restrictions.user.monitored_period=1*e.user_monitored_period||0,this.restrictions.user.blocking_duration=1*e.user_blocking_duration||0,this.restrictions.user.blocking_type=this.restrictions.user.blocking_duration?"time":"permanent",this.restrictionsBackup=JSON.parse(JSON.stringify(this.restrictions)),this.isLoading=!1},error:e=>{this.toast.sendToast("Error loading Login Restriction Config.","error"),this.isLoading=!1}})}static#e=this.ɵfac=function(e){return new(e||AdministrationLoginRestriction)(c.rXU(u.H),c.rXU(z.o))};static#t=this.ɵcmp=c.VBU({type:AdministrationLoginRestriction,selectors:[["administration-login-restriction"]],decls:72,vars:35,consts:[[1,"slds-grid",3,"system-overlay-loading-spinner"],[1,"slds-p-around--medium",2,"width","100%"],[1,"slds-grid","slds-grid--align-spread"],[1,"slds-text-heading_small"],["label","LBL_USER_RESTRICTION"],["label","LBL_ACTIVE",1,"slds-m-bottom--xx-small","spice-display-block",3,"ngModel","ngModelChange"],[1,"slds-grid"],[1,"slds-form-element"],["for","user-number-attempts",1,"slds-form-element__label"],["title","required",1,"slds-required"],["label","LBL_MAX_LOGIN_ATTEMPTS"],[1,"slds-form-element__control"],["id","user-number-attempts",3,"disabled","ngModel","onlyField","precision","asNumber","ngModelChange"],[1,"slds-form-element","slds-m-left--medium"],["for","user-monitored-period",1,"slds-form-element__label"],["label","LBL_MONITORED_PERIOD"],["label","LBL_MINUTES","length","short",2,"display","inline-block"],["id","user-monitored-period",3,"disabled","ngModel","onlyField","precision","asNumber","ngModelChange"],[1,"slds-form-element__label"],["label","LBL_LOCK_TYPE"],[1,"slds-select_container"],[1,"slds-select",3,"ngModel","disabled","ngModelChange"],["value","time"],["label","LBL_TIME"],["value","permanent"],["label","LBL_PERMANENT"],[1,"slds-form-element","slds-m-left--x-small"],["for","user-blocking-duration",1,"slds-form-element__label"],["label","LBL_BLOCKING_DURATION"],[1,"slds-form-element__control",3,"ngClass"],["id","user-blocking-duration",3,"disabled","ngModel","onlyField","precision","asNumber","ngModelChange"],[1,"slds-border--left","slds-p-around--medium","slds-border--right",2,"width","100%"],["label","LBL_IP_RESTRICTION"],["for","ip-number-attempts",1,"slds-form-element__label"],["id","ip-number-attempts",3,"disabled","ngModel","onlyField","precision","asNumber","ngModelChange"],["for","ip-monitored-period",1,"slds-form-element__label"],["id","ip-monitored-period",3,"disabled","ngModel","onlyField","precision","asNumber","ngModelChange"],[1,"slds-p-around--medium","slds-align-bottom",2,"white-space","nowrap"],[1,"slds-button","slds-button--icon","slds-button_neutral","slds-button--icon-border",3,"disabled","click"],["icon","close"],[1,"slds-button","slds-button--icon","slds-button_brand","slds-button--icon-border","slds-m-left--small",3,"disabled","click"],["icon","check"]],template:function(e,t){1&e&&(c.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),c.nrm(4,"system-label",4),c.k0s(),c.j41(5,"system-checkbox-toggle",5),c.mxI("ngModelChange",(function(e){return c.DH7(t.restrictions.user.enabled,e)||(t.restrictions.user.enabled=e),e})),c.k0s()(),c.j41(6,"div",6)(7,"div",7)(8,"label",8)(9,"abbr",9),c.EFF(10,"* "),c.k0s(),c.nrm(11,"system-label",10),c.k0s(),c.j41(12,"div",11)(13,"system-input-number",12),c.mxI("ngModelChange",(function(e){return c.DH7(t.restrictions.user.number_attempts,e)||(t.restrictions.user.number_attempts=e),e})),c.k0s()()(),c.j41(14,"div",13)(15,"label",14)(16,"abbr",9),c.EFF(17,"* "),c.k0s(),c.nrm(18,"system-label",15),c.EFF(19," ("),c.nrm(20,"system-label",16),c.EFF(21,")"),c.k0s(),c.j41(22,"div",11)(23,"system-input-number",17),c.mxI("ngModelChange",(function(e){return c.DH7(t.restrictions.user.monitored_period,e)||(t.restrictions.user.monitored_period=e),e})),c.k0s()()(),c.j41(24,"div",13)(25,"label",18),c.nrm(26,"system-label",19),c.k0s(),c.j41(27,"div",11)(28,"div",20)(29,"select",21),c.mxI("ngModelChange",(function(e){return c.DH7(t.restrictions.user.blocking_type,e)||(t.restrictions.user.blocking_type=e),e})),c.j41(30,"option",22),c.nrm(31,"system-label",23),c.k0s(),c.j41(32,"option",24),c.nrm(33,"system-label",25),c.k0s()()()()(),c.j41(34,"div",26)(35,"label",27)(36,"abbr",9),c.EFF(37,"* "),c.k0s(),c.nrm(38,"system-label",28),c.EFF(39," ("),c.nrm(40,"system-label",16),c.EFF(41,")"),c.k0s(),c.j41(42,"div",29)(43,"system-input-number",30),c.mxI("ngModelChange",(function(e){return c.DH7(t.restrictions.user.blocking_duration,e)||(t.restrictions.user.blocking_duration=e),e})),c.bIt("ngModelChange",(function(){return t.restrictions.user.blocking_type=0===t.restrictions.user.blocking_duration?"permanent":"time"})),c.k0s()()()()(),c.j41(44,"div",31)(45,"div",2)(46,"div",3),c.nrm(47,"system-label",32),c.k0s(),c.j41(48,"system-checkbox-toggle",5),c.mxI("ngModelChange",(function(e){return c.DH7(t.restrictions.ip.enabled,e)||(t.restrictions.ip.enabled=e),e})),c.k0s()(),c.j41(49,"div",6)(50,"div",7)(51,"label",33)(52,"abbr",9),c.EFF(53,"* "),c.k0s(),c.nrm(54,"system-label",10),c.k0s(),c.j41(55,"div",11)(56,"system-input-number",34),c.mxI("ngModelChange",(function(e){return c.DH7(t.restrictions.ip.number_attempts,e)||(t.restrictions.ip.number_attempts=e),e})),c.k0s()()(),c.j41(57,"div",13)(58,"label",35)(59,"abbr",9),c.EFF(60,"* "),c.k0s(),c.nrm(61,"system-label",15),c.EFF(62," ("),c.nrm(63,"system-label",16),c.EFF(64,")"),c.k0s(),c.j41(65,"div",11)(66,"system-input-number",36),c.mxI("ngModelChange",(function(e){return c.DH7(t.restrictions.ip.monitored_period,e)||(t.restrictions.ip.monitored_period=e),e})),c.k0s()()()()(),c.j41(67,"div",37)(68,"button",38),c.bIt("click",(function(){return t.cancelEditing()})),c.nrm(69,"system-button-icon",39),c.k0s(),c.j41(70,"button",40),c.bIt("click",(function(){return t.saveConfig()})),c.nrm(71,"system-button-icon",41),c.k0s()()()),2&e&&(c.Y8G("system-overlay-loading-spinner",t.isLoading),c.R7$(5),c.R50("ngModel",t.restrictions.user.enabled),c.R7$(8),c.Y8G("disabled",!t.restrictions.user.enabled),c.R50("ngModel",t.restrictions.user.number_attempts),c.Y8G("onlyField",!0)("precision",0)("asNumber",!0),c.R7$(10),c.Y8G("disabled",!t.restrictions.user.enabled),c.R50("ngModel",t.restrictions.user.monitored_period),c.Y8G("onlyField",!0)("precision",0)("asNumber",!0),c.R7$(6),c.R50("ngModel",t.restrictions.user.blocking_type),c.Y8G("disabled",!t.restrictions.user.enabled),c.R7$(13),c.Y8G("ngClass",c.eq3(33,Ea,"time"===t.restrictions.user.blocking_type&&0===t.restrictions.user.blocking_duration)),c.R7$(),c.Y8G("disabled",!t.restrictions.user.enabled||"permanent"===t.restrictions.user.blocking_type),c.R50("ngModel",t.restrictions.user.blocking_duration),c.Y8G("onlyField",!0)("precision",0)("asNumber",!0),c.R7$(5),c.R50("ngModel",t.restrictions.ip.enabled),c.R7$(8),c.Y8G("disabled",!t.restrictions.ip.enabled),c.R50("ngModel",t.restrictions.ip.number_attempts),c.Y8G("onlyField",!0)("precision",0)("asNumber",!0),c.R7$(10),c.Y8G("disabled",!t.restrictions.ip.enabled),c.R50("ngModel",t.restrictions.ip.monitored_period),c.Y8G("onlyField",!0)("precision",0)("asNumber",!0),c.R7$(2),c.Y8G("disabled",t.isLoading),c.R7$(2),c.Y8G("disabled",t.isLoading))},dependencies:[i.YU,n.xH,n.y7,n.wz,n.BC,n.vS,L.t,wn.x,La.N,j.W,R.M],encapsulation:2})}return AdministrationLoginRestriction})();const Fa=["administration-login-restriction-ip-addresses-row",""];function Ma(e,t){if(1&e){const e=c.RV6();c.j41(0,"div",7)(1,"div",8),c.EFF(2),c.k0s(),c.j41(3,"button",9),c.bIt("click",(function(){c.eBV(e);const t=c.XpG();return c.Njj(t.editDescription())})),c.nrm(4,"system-button-icon",10),c.k0s()()}if(2&e){const e=c.XpG();c.R7$(2),c.JRh(e.ipAddress.description),c.R7$(),c.Y8G("disabled",e.otherEditing)}}function xa(e,t){if(1&e){const e=c.RV6();c.j41(0,"div",7)(1,"div",11)(2,"input",12),c.mxI("ngModelChange",(function(t){c.eBV(e);const s=c.XpG();return c.DH7(s.ipAddress.description,t)||(s.ipAddress.description=t),c.Njj(t)})),c.k0s()(),c.j41(3,"button",13),c.bIt("click",(function(){c.eBV(e);const t=c.XpG();return c.Njj(t.cancel())})),c.nrm(4,"system-button-icon",14),c.k0s(),c.j41(5,"button",15),c.bIt("click",(function(){c.eBV(e);const t=c.XpG();return c.Njj(t.save())})),c.nrm(6,"system-button-icon",14),c.k0s()()}if(2&e){const e=c.XpG();c.R7$(2),c.R50("ngModel",e.ipAddress.description),c.Y8G("placeholder",e.language.getLabel("LBL_DESCRIPTION")),c.R7$(2),c.Y8G("icon","close"),c.R7$(2),c.Y8G("icon","check")}}let Ia=(()=>{class AdministrationLoginRestrictionIpAddressesRow{constructor(e,t,s){this.backend=e,this.toast=t,this.language=s,this.editing=new c.bkB,this.isEditing=!1}editDescription(){this.backup=this.ipAddress.description,this.isEditing=!0,this.editing.emit(!0)}save(){this.isEditing=!1,this.backend.putRequest("authentication/ipAddress/"+this.ipAddress.address,null,{description:this.ipAddress.description}).pipe((0,Ra.s)(1)).subscribe((e=>{this.isEditing=!1,this.editing.emit(!1)}),(e=>{this.ipAddress.description=this.backup,this.isEditing=!1,this.editing.emit(!1),this.toast.sendToast("Error saving Description of IP Address.","error")}))}cancel(){this.isEditing=!1,this.editing.emit(!1),this.ipAddress.description=this.backup}static#e=this.ɵfac=function(e){return new(e||AdministrationLoginRestrictionIpAddressesRow)(c.rXU(u.H),c.rXU(z.o),c.rXU(h.B))};static#t=this.ɵcmp=c.VBU({type:AdministrationLoginRestrictionIpAddressesRow,selectors:[["","administration-login-restriction-ip-addresses-row",""]],inputs:{ipAddress:"ipAddress",otherEditing:"otherEditing"},outputs:{editing:"editing"},attrs:Fa,decls:14,vars:7,consts:[[1,"slds-p-right--none"],[3,"ngModel","disabled","ngModelChange"],[1,"slds-p-right--x-small"],[1,"slds-truncate"],["class","slds-grid",4,"ngIf"],[3,"date"],[1,"slds-p-right--x-small",2,"width","100%"],[1,"slds-grid"],[1,"slds-truncate","slds-col--bump-right"],["system-title","LBL_RELOAD",1,"slds-button","slds-button--icon","slds-m-left--xx-small",3,"disabled","click"],["icon","edit"],[2,"width","100%"],[1,"slds-input",3,"ngModel","placeholder","ngModelChange"],[1,"slds-button","slds-button--icon-border","slds-m-left--xx-small",3,"click"],["size","small",3,"icon"],[1,"slds-button","slds-button--icon-border","slds-button--brand",3,"click"]],template:function(e,t){1&e&&(c.j41(0,"td",0)(1,"system-checkbox",1),c.mxI("ngModelChange",(function(e){return c.DH7(t.ipAddress.selected,e)||(t.ipAddress.selected=e),e})),c.k0s()(),c.j41(2,"td",2)(3,"div",3),c.EFF(4),c.k0s()(),c.j41(5,"td",2),c.DNE(6,Ma,5,2,"div",4)(7,xa,7,4,"div",4),c.k0s(),c.j41(8,"td",2)(9,"div",3),c.nrm(10,"system-display-datetime",5),c.k0s()(),c.j41(11,"td",6)(12,"div",3),c.EFF(13),c.k0s()()),2&e&&(c.R7$(),c.R50("ngModel",t.ipAddress.selected),c.Y8G("disabled",t.otherEditing),c.R7$(3),c.JRh(t.ipAddress.address),c.R7$(2),c.Y8G("ngIf",!t.isEditing),c.R7$(),c.Y8G("ngIf",t.isEditing),c.R7$(3),c.Y8G("date",t.ipAddress.date_entered),c.R7$(3),c.JRh(t.ipAddress.created_by_name))},dependencies:[i.bT,n.me,n.BC,n.vS,L.t,W.f,K.f,M.L],encapsulation:2})}return AdministrationLoginRestrictionIpAddressesRow})();const Ga=["table"];function Aa(e,t){1&e&&c.nrm(0,"system-label",23)}function Sa(e,t){1&e&&c.nrm(0,"system-label",24)}function Ca(e,t){if(1&e){const e=c.RV6();c.qex(0),c.j41(1,"button",25),c.bIt("click",(function(){c.eBV(e);const t=c.XpG();return c.Njj(t.moveIpAddresses())})),c.EFF(2),c.k0s(),c.j41(3,"button",26),c.bIt("click",(function(){c.eBV(e);const t=c.XpG();return c.Njj(t.deleteIpAddresses())})),c.nrm(4,"system-button-icon",27),c.k0s(),c.bVm()}if(2&e){const e=c.XpG();c.R7$(),c.Y8G("disabled",e.isEditing),c.R7$(),c.SpI("➔",e.altColor.toUpperCase(),""),c.R7$(),c.Y8G("disabled",e.isEditing)}}const Da=e=>({"slds-has-error":e});function Ba(e,t){if(1&e){const e=c.RV6();c.j41(0,"tr")(1,"td",28)(2,"div",29)(3,"div",30)(4,"input",31),c.mxI("ngModelChange",(function(t){c.eBV(e);const s=c.XpG();return c.DH7(s.newAddress,t)||(s.newAddress=t),c.Njj(t)})),c.bIt("change",(function(){c.eBV(e);const t=c.XpG();return c.Njj(t.checkAddressInput())})),c.k0s()(),c.j41(5,"div",32),c.EFF(6),c.k0s()()(),c.j41(7,"td",33)(8,"input",34),c.mxI("ngModelChange",(function(t){c.eBV(e);const s=c.XpG();return c.DH7(s.newDescription,t)||(s.newDescription=t),c.Njj(t)})),c.k0s()(),c.j41(9,"td",28)(10,"button",35),c.bIt("click",(function(){c.eBV(e);const t=c.XpG();return c.Njj(t.cancelNewAddress())})),c.nrm(11,"system-button-icon",36),c.k0s(),c.j41(12,"button",37),c.bIt("click",(function(){c.eBV(e);const t=c.XpG();return c.Njj(t.saveNewAddress())})),c.nrm(13,"system-button-icon",36),c.k0s()()()}if(2&e){const e=c.XpG();c.R7$(2),c.Y8G("ngClass",c.eq3(10,Da,e.addressError)),c.R7$(2),c.R50("ngModel",e.newAddress),c.Y8G("placeholder",e.language.getLabel("LBL_IPADDRESS")),c.R7$(2),c.JRh(e.addressError),c.R7$(2),c.R50("ngModel",e.newDescription),c.Y8G("placeholder",e.language.getLabel("LBL_DESCRIPTION")),c.R7$(3),c.Y8G("icon","close")("size","small"),c.R7$(2),c.Y8G("icon","check")("size","small")}}function $a(e,t){if(1&e){const e=c.RV6();c.j41(0,"tr",38),c.bIt("editing",(function(t){c.eBV(e);const s=c.XpG();return c.Njj(s.isAltering=t)})),c.k0s()}if(2&e){const e=t.$implicit,s=c.XpG();c.Y8G("ipAddress",e)("otherEditing",s.isEditing)}}function Na(e,t){1&e&&(c.j41(0,"div",39)(1,"system-illustration-no-records"),c.nrm(2,"system-label",40),c.k0s()())}const Ta=e=>({"slds-grow":e}),Xa=e=>({borderBottom:e});let Ya=(()=>{class AdministrationLoginRestrictionIpAddresses{constructor(e,t,s,i,n){this.backend=e,this.modal=t,this.toast=s,this.metadata=i,this.language=n,this.ipAddresses=[],this.isLoading=!1,this.isAltering=!1,this.isAdding=!1,this.newAddress="",this.newDescription="",this.addressError=""}get isEditing(){return this.isAltering||this.isAdding}ngOnInit(){this.altColor="black"===this.color?"white":"black",this.loadIpAddresses()}loadIpAddresses(){this.isLoading=!0,this.backend.getRequest("authentication/ipAddresses/"+this.color).pipe((0,Ra.s)(1)).subscribe({next:e=>{this.ipAddresses=e,this.sortIpAddresses(),this.isLoading=!1},error:e=>{this.toast.sendToast("Error loading "+this.color+" listed IP Addresses.",e.error.error.message,"error")}})}sortIpAddresses(){this.ipAddresses=this.ipAddresses.sort(((e,t)=>this.compareIpAddresses(e,t))),this.ipAddresses=this.ipAddresses.sort(((e,t)=>this.compareIpAddresses(e,t)))}compareIpAddresses(e,t){return Number(e.address.split(".").map((e=>`000${e}`.slice(-3))).join(""))-Number(t.address.split(".").map((e=>`000${e}`.slice(-3))).join(""))}deleteIpAddresses(){let e=[],t=[];this.ipAddresses.forEach(((t,s)=>{t.selected&&e.push(s)})),e.length&&this.modal.confirm("Remove "+e.length+" IP Addresses? This can not be undone.","Remove IP Addresses?",null).pipe((0,Ra.s)(1)).subscribe({next:s=>{if(s){this.isLoading=!0;let s=e.length;e.forEach((e=>{this.backend.deleteRequest("authentication/ipAddress/"+this.ipAddresses[e].address).pipe((0,Ra.s)(1)).subscribe({next:i=>{!0===i.success&&t.push(e),s--,s<=0&&(this._removeFromList(t),this.isLoading=!1)},error:i=>{s--,s<=0&&(this._removeFromList(t),this.isLoading=!1),this.toast.sendToast("Error deleting IP Address "+this.ipAddresses[e].address+".",i.error.error.message,"error")}})}))}else this.isLoading=!1}})}moveIpAddresses(){let e=[],t=[];this.ipAddresses.forEach(((t,s)=>{t.selected&&e.push(s)})),e.length&&this.modal.confirm("Move "+e.length+" IP Addresses to "+this.altColor+" list?","Move IP Addresses?",null).pipe((0,Ra.s)(1)).subscribe((s=>{let i="black"===this.color?"white":"black";this.isLoading=this.siblingComponent.isLoading=!0;let n=e.length;e.forEach((e=>{this.backend.putRequest("authentication/ipAddress/"+this.ipAddresses[e].address+"/move/"+i).pipe((0,Ra.s)(1)).subscribe({next:s=>{!0===s.success&&(this.siblingComponent.ipAddresses.push(this.ipAddresses[e]),this.ipAddresses[e].selected=!1,t.push(e),this.siblingComponent.sortIpAddresses()),n--,n<=0&&(this._removeFromList(t),this.isLoading=this.siblingComponent.isLoading=!1)},error:s=>{n--,n<=0&&(this._removeFromList(t),this.isLoading=this.siblingComponent.isLoading=!1),this.toast.sendToast("Error moving IP Address "+this.ipAddresses[e].address+".",s.error.error.message,"error")}})}))}))}_removeFromList(e){for(let t=(e=e.sort(((e,t)=>e-t))).length-1;t>=0;t--)this.ipAddresses.splice(e[t],1)}get checkboxesUsed(){for(let e of this.ipAddresses)if(e?.selected)return!0;return!1}saveNewAddress(){this.checkAddressInput(),this.addressError||(this.isLoading=!0,this.backend.postRequest("authentication/ipAddress/"+this.newAddress,null,{color:this.color[0],description:this.newDescription}).pipe((0,Ra.s)(1)).subscribe({next:e=>{this.isLoading=!1,this.ipAddresses.push(e.data),this.sortIpAddresses(),this.toast.sendToast("IP Address "+this.newAddress+" added ("+this.color+" listed).","success"),this.newAddress="",this.newDescription="",this.isAdding=!1},error:e=>{this.toast.sendToast("Error saving IP Address.","error",e.error.error.message),this.isLoading=!1,this.isAdding=!1}}))}checkAddressInput(){this.newAddress.length?(this.newAddress=this.sanitizeIpAddress(this.newAddress),this.checkIpAddress(this.newAddress)?this.ipAddressIsListed(this.newAddress)?this.addressError="Already listed.":this.addressError="":this.addressError="Invalid."):this.addressError="Missing."}sanitizeIpAddress(e){let t=(e=e.replace(/\s+/g,"")).split(".");return t.forEach(((e,s)=>{t[s]=e.replace(/^0+(?!$)/,"")})),t.join(".")}checkIpAddress(e){let t=e.split(".");return 4===t.length&&!t.some((e=>!e.match(/\d+/)||parseInt(e,10)>255))}ipAddressIsListed(e){return!0===this.ipAddresses.some((t=>{if(t.address===e)return!0}))||!0===this.siblingComponent.ipAddresses.some((t=>{if(t.address===e)return!0}))}startAdding(){this.isAdding=!0,this.addressError="",this.table.nativeElement.scrollTop=0}cancelNewAddress(){this.isAdding=!1,this.newAddress="",this.newDescription=""}static#e=this.ɵfac=function(e){return new(e||AdministrationLoginRestrictionIpAddresses)(c.rXU(u.H),c.rXU(P.y),c.rXU(z.o),c.rXU(p.yu),c.rXU(h.B))};static#t=this.ɵcmp=c.VBU({type:AdministrationLoginRestrictionIpAddresses,selectors:[["administration-login-restriction-ip-addresses"]],viewQuery:function(e,t){if(1&e&&c.GBs(Ga,7),2&e){let e;c.mGM(e=c.lsd())&&(t.table=e.first)}},inputs:{color:"color",siblingComponent:"siblingComponent"},decls:32,vars:15,consts:[[1,"slds-grid","slds-grid--vertical","slds-p-around--medium",2,"height","100%",3,"system-overlay-loading-spinner"],[1,"slds-grid","slds-grid--align-spread","slds-m-bottom--x-small"],[1,"slds-text-heading_small","slds-col--bump-right"],["label","LBL_WHITE_LISTED_IPADDRESSES",4,"ngIf"],["label","LBL_BLACK_LISTED_IPADDRESSES",4,"ngIf"],[4,"ngIf"],["system-title","LBL_ADD",1,"slds-button","slds-button--icon","slds-m-left--xx-small",3,"disabled","click"],["icon","new"],["system-title","LBL_RELOAD",1,"slds-button","slds-button--icon","slds-m-left--xx-small",3,"disabled","click"],["icon","refresh"],[1,"slds-scrollable--y",3,"ngClass"],[1,"slds-table","slds-table_bordered","slds-table--header-fixed",3,"ngStyle"],["table",""],[1,"slds-text-title--caps"],[1,"slds-truncate","slds-p-horizontal--x-small"],["label","LBL_ADDRESS"],[2,"width","100%"],["label","LBL_DESCRIPTION"],["label","LBL_DATE_ENTERED"],["label","LBL_CREATED_BY"],["system-multi-select-checkboxes",""],["administration-login-restriction-ip-addresses-row","",3,"ipAddress","otherEditing","editing",4,"ngFor","ngForOf"],["class","slds-grow slds-p-around--small slds-align--absolute-center",4,"ngIf"],["label","LBL_WHITE_LISTED_IPADDRESSES"],["label","LBL_BLACK_LISTED_IPADDRESSES"],[1,"slds-button","slds-button--neutral",2,"padding","0.25rem","line-height","0","font-weight","bold",3,"disabled","click"],["system-title","LBL_DELETE",1,"slds-button","slds-button--icon",3,"disabled","click"],["icon","delete"],["colspan","2",2,"vertical-align","top"],[1,"slds-form-element",3,"ngClass"],[1,"slds-form-element__control"],["system-autofocus","","type","text",1,"slds-input",2,"min-width","8.8rem",3,"ngModel","placeholder","ngModelChange","change"],["id","error-message-unique-id",1,"slds-form-element__help"],[2,"vertical-align","top"],[1,"slds-input",3,"ngModel","placeholder","ngModelChange"],[1,"slds-button","slds-button--icon-border",3,"click"],[3,"icon","size"],[1,"slds-button","slds-button--icon-border","slds-button--brand",3,"click"],["administration-login-restriction-ip-addresses-row","",3,"ipAddress","otherEditing","editing"],[1,"slds-grow","slds-p-around--small","slds-align--absolute-center"],["label","MSG_NO_IP_ADDRESSES_LISTED"]],template:function(e,t){1&e&&(c.j41(0,"div",0)(1,"div",1)(2,"div",2),c.DNE(3,Aa,1,0,"system-label",3)(4,Sa,1,0,"system-label",4),c.k0s(),c.DNE(5,Ca,5,3,"ng-container",5),c.j41(6,"button",6),c.bIt("click",(function(){return t.startAdding()})),c.nrm(7,"system-button-icon",7),c.k0s(),c.j41(8,"button",8),c.bIt("click",(function(){return t.loadIpAddresses()})),c.nrm(9,"system-button-icon",9),c.k0s()(),c.j41(10,"div",10)(11,"table",11,12)(13,"thead")(14,"tr",13),c.nrm(15,"th"),c.j41(16,"th")(17,"div",14),c.nrm(18,"system-label",15),c.k0s()(),c.j41(19,"th",16)(20,"div",14),c.nrm(21,"system-label",17),c.k0s()(),c.j41(22,"th")(23,"div",14),c.nrm(24,"system-label",18),c.k0s()(),c.j41(25,"th")(26,"div",14),c.nrm(27,"system-label",19),c.k0s()()()(),c.j41(28,"tbody",20),c.DNE(29,Ba,14,12,"tr",5)(30,$a,1,2,"tr",21),c.k0s()()(),c.DNE(31,Na,3,0,"div",22),c.k0s()),2&e&&(c.Y8G("system-overlay-loading-spinner",t.isLoading),c.R7$(3),c.Y8G("ngIf","white"===t.color),c.R7$(),c.Y8G("ngIf","black"===t.color),c.R7$(),c.Y8G("ngIf",t.checkboxesUsed),c.R7$(),c.Y8G("disabled",t.isEditing),c.R7$(2),c.Y8G("disabled",t.isEditing),c.R7$(2),c.Y8G("ngClass",c.eq3(11,Ta,0!==t.ipAddresses.length)),c.R7$(),c.Y8G("ngStyle",c.eq3(13,Xa,0===t.ipAddresses.length?"none":"auto")),c.R7$(18),c.Y8G("ngIf",t.isAdding),c.R7$(),c.Y8G("ngForOf",t.ipAddresses),c.R7$(),c.Y8G("ngIf",!t.isAdding&&!t.isLoading&&0===t.ipAddresses.length))},dependencies:[i.YU,i.Sq,i.bT,i.B3,n.me,n.BC,n.vS,L.t,ba.b,j.W,Ci.a,R.M,M.L,zi.p,Ia],encapsulation:2})}return AdministrationLoginRestrictionIpAddresses})(),wa=(()=>{class AdministrationPasswordConfig{constructor(e,t,s,i){this.backend=e,this.modal=t,this.toast=s,this.language=i,this.isLoading=!0,this.config={minpwdlength:6,oneupper:!0,onelower:!0,onenumber:!0,onespecial:!0,pwdvaliditydays:0}}configIsDirty(){return!_.isEqual(this.config,this.configBackup)}cancel(){this.config=JSON.parse(JSON.stringify(this.configBackup))}save(){let e={minpwdlength:this.config.minpwdlength,oneupper:this.config.oneupper?"1":"0",onelower:this.config.onelower?"1":"0",onenumber:this.config.onenumber?"1":"0",onespecial:this.config.onespecial?"1":"0",pwdvaliditydays:this.config.pwdvaliditydays};this.isLoading=!0,this.backend.postRequest("configuration/configurator/editor/passwordsetting",null,{config:e}).pipe((0,Ra.s)(1)).subscribe((e=>{this.configBackup=JSON.parse(JSON.stringify(this.config)),this.toast.sendToast("Password Configuration successfully saved.","success"),this.isLoading=!1}))}ngOnInit(){this.loadConfig()}loadConfig(){this.isLoading=!0,this.backend.getRequest("configuration/configurator/editor/passwordsetting").pipe((0,Ra.s)(1)).subscribe((e=>{this.config.oneupper=!0===e.oneupper||1===e.oneupper||"1"===e.oneupper||!1,this.config.onelower=!0===e.onelower||1===e.onelower||"1"===e.onelower||!1,this.config.onenumber=!0===e.onenumber||1===e.onenumber||"1"===e.onenumber||!1,this.config.onespecial=!0===e.onespecial||1===e.onespecial||"1"===e.onespecial||!1,this.config.minpwdlength=parseInt(e.minpwdlength,10)||0,this.config.pwdvaliditydays=parseInt(e.pwdvaliditydays,10)||0,this.configBackup=JSON.parse(JSON.stringify(this.config)),this.isLoading=!1}))}static#e=this.ɵfac=function(e){return new(e||AdministrationPasswordConfig)(c.rXU(u.H),c.rXU(P.y),c.rXU(z.o),c.rXU(h.B))};static#t=this.ɵcmp=c.VBU({type:AdministrationPasswordConfig,selectors:[["administration-password-config"]],decls:38,vars:15,consts:[[1,"slds-p-around--medium",3,"system-overlay-loading-spinner"],[1,"slds-grid","slds-grid--align-spread","slds-grid--vertical-align-center"],[1,"slds-text-heading_small"],["label","LBL_PASSWORD_CONFIGURATION"],[1,"slds-p-bottom--x-small",2,"white-space","nowrap"],[1,"slds-button","slds-button--icon","slds-button_neutral","slds-button--icon-border",3,"disabled","click"],["icon","close"],[1,"slds-button","slds-button--icon","slds-button_brand","slds-button--icon-border","slds-m-left--small",3,"disabled","click"],["icon","check"],[1,"slds-grid","slds-grid--vertical-align-start"],[1,"slds-form-element"],["for","password-config-minpwdlength",1,"slds-form-element__label"],["label","LBL_MIN_LENGTH"],[1,"slds-form-element__control"],["id","password-config-minpwdlength","size","3",3,"ngModel","onlyField","precision","asNumber","ngModelChange"],[1,"slds-form-element","slds-p-left--medium"],["for","password-config-pwdvaliditydays",1,"slds-form-element__label"],["label","LBL_EXPIRATION"],["label","LBL_DAYS",2,"display","inline-block"],["label","LBL_OFF",2,"display","inline-block"],["id","password-config-pwdvaliditydays","size","4",3,"ngModel","onlyField","precision","asNumber","ngModelChange"],["system-multi-select-checkboxes","",1,"slds-p-left--medium"],[3,"ngModel","ngModelChange"],["label","LBL_ONE_UPPERCASE"],["label","LBL_ONE_LOWERCASE"],["label","LBL_ONE_DIGIT"],["label","LBL_ONE_SPECIALCHAR"]],template:function(e,t){1&e&&(c.j41(0,"div",0)(1,"div",1)(2,"div",2),c.nrm(3,"system-label",3),c.k0s(),c.j41(4,"div",4)(5,"button",5),c.bIt("click",(function(){return t.cancel()})),c.nrm(6,"system-button-icon",6),c.k0s(),c.j41(7,"button",7),c.bIt("click",(function(){return t.save()})),c.nrm(8,"system-button-icon",8),c.k0s()()(),c.j41(9,"div",9)(10,"div",10)(11,"label",11),c.nrm(12,"system-label",12),c.k0s(),c.j41(13,"div",13)(14,"system-input-number",14),c.mxI("ngModelChange",(function(e){return c.DH7(t.config.minpwdlength,e)||(t.config.minpwdlength=e),e})),c.k0s()()(),c.j41(15,"div",15)(16,"label",16),c.nrm(17,"system-label",17),c.EFF(18," ("),c.nrm(19,"system-label",18),c.EFF(20,", 0="),c.nrm(21,"system-label",19),c.EFF(22,") "),c.k0s(),c.j41(23,"div",13)(24,"system-input-number",20),c.mxI("ngModelChange",(function(e){return c.DH7(t.config.pwdvaliditydays,e)||(t.config.pwdvaliditydays=e),e})),c.k0s()()(),c.j41(25,"div",21)(26,"div")(27,"system-checkbox",22),c.mxI("ngModelChange",(function(e){return c.DH7(t.config.oneupper,e)||(t.config.oneupper=e),e})),c.nrm(28,"system-label",23),c.k0s()(),c.j41(29,"div")(30,"system-checkbox",22),c.mxI("ngModelChange",(function(e){return c.DH7(t.config.onelower,e)||(t.config.onelower=e),e})),c.nrm(31,"system-label",24),c.k0s()(),c.j41(32,"div")(33,"system-checkbox",22),c.mxI("ngModelChange",(function(e){return c.DH7(t.config.onenumber,e)||(t.config.onenumber=e),e})),c.nrm(34,"system-label",25),c.k0s()(),c.j41(35,"div")(36,"system-checkbox",22),c.mxI("ngModelChange",(function(e){return c.DH7(t.config.onespecial,e)||(t.config.onespecial=e),e})),c.nrm(37,"system-label",26),c.k0s()()()()()),2&e&&(c.Y8G("system-overlay-loading-spinner",t.isLoading),c.R7$(5),c.Y8G("disabled",t.isLoading),c.R7$(2),c.Y8G("disabled",t.isLoading),c.R7$(7),c.R50("ngModel",t.config.minpwdlength),c.Y8G("onlyField",!0)("precision",0)("asNumber",!0),c.R7$(10),c.R50("ngModel",t.config.pwdvaliditydays),c.Y8G("onlyField",!0)("precision",0)("asNumber",!0),c.R7$(3),c.R50("ngModel",t.config.oneupper),c.R7$(3),c.R50("ngModel",t.config.onelower),c.R7$(3),c.R50("ngModel",t.config.onenumber),c.R7$(3),c.R50("ngModel",t.config.onespecial))},dependencies:[n.BC,n.vS,L.t,W.f,La.N,j.W,R.M,zi.p],encapsulation:2})}return AdministrationPasswordConfig})();function Oa(e,t){1&e&&(c.qex(0),c.EFF(1,"permanent"),c.bVm())}function Ua(e,t){if(1&e&&(c.qex(0),c.nrm(1,"system-display-datetime",21),c.bVm()),2&e){const e=c.XpG().$implicit;c.R7$(),c.Y8G("date",e.login_blocked_until)}}function Va(e,t){if(1&e){const e=c.RV6();c.j41(0,"button",22),c.bIt("click",(function(){c.eBV(e);const t=c.XpG().$implicit,s=c.XpG();return c.Njj(s.unBlockUser(t.id,t.user_name))})),c.nrm(1,"system-button-icon",23),c.k0s()}}function Ha(e,t){1&e&&c.nrm(0,"system-button-icon",24)}function za(e,t){if(1&e&&(c.j41(0,"tr")(1,"td",16)(2,"div",17),c.EFF(3),c.k0s()(),c.j41(4,"td",16)(5,"div",17),c.DNE(6,Oa,2,0,"ng-container",18)(7,Ua,2,1,"ng-container",18),c.k0s()(),c.j41(8,"td"),c.DNE(9,Va,2,0,"button",19)(10,Ha,1,0,"system-button-icon",20),c.k0s()()),2&e){const e=t.$implicit,s=c.XpG();c.R7$(3),c.JRh(e.user_name),c.R7$(3),c.Y8G("ngIf",e.login_blocked),c.R7$(),c.Y8G("ngIf",!e.login_blocked&&e.login_blocked_until),c.R7$(2),c.Y8G("ngIf",!s.isUnblocking[e.id]),c.R7$(),c.Y8G("ngIf",s.isUnblocking[e.id])}}function Pa(e,t){1&e&&(c.j41(0,"div",25)(1,"system-illustration-no-records"),c.nrm(2,"system-label",26),c.k0s()())}const Ja=e=>({"slds-border-bottom":e}),qa=e=>({"slds-grow":e}),Wa=e=>({borderBottom:e});let Ka=(()=>{class AdministrationBlockedUsers{constructor(e,t,s,i){this.backend=e,this.modal=t,this.toast=s,this.metadata=i,this.blockedUsers=[],this.isLoading=!1,this.isUnblocking={}}ngOnInit(){this.loadBlockedUsers()}loadBlockedUsers(){this.isLoading=!0;let e=this.metadata.getComponentConfig("LoginRestriction");e&&e.modulefilter&&e.modulefilter;this.backend.getList("Users",[{sortfield:"user_name",sortdirection:"ASC"}],{modulefilter:"7cf2fab0-b845-5a96-6045-2cef7c7f91d9",limit:-99,source:"db",fields:["id","user_name","login_blocked","login_blocked_until"]}).pipe((0,Ra.s)(1)).subscribe((e=>{this.blockedUsers=e.list,this.blockedUsers=this.blockedUsers.sort(((e,t)=>e.user_name.localeCompare(t.user_name))),this.isLoading=!1}))}unBlockUser(e,t){this.isUnblocking[e]=!0,this.backend.postRequest("module/Users/"+e,null,{login_blocked:"0",login_blocked_until:""}).pipe((0,Ra.s)(1)).subscribe((t=>{this.isUnblocking[e]=!1,"0"===t.login_blocked&&""===t.login_blocked_until&&(this.toast.sendToast("User "+t.user_name+" successfully un-blocked.","success",null),this.blockedUsers.some(((t,s)=>{if(t.id===e)return this.blockedUsers.splice(s,1),!0})))}),(s=>{this.isUnblocking[e]=!1,this.toast.sendToast("Error un-blocking User "+t+".","error",s.error.error.message)}))}static#e=this.ɵfac=function(e){return new(e||AdministrationBlockedUsers)(c.rXU(u.H),c.rXU(P.y),c.rXU(z.o),c.rXU(p.yu))};static#t=this.ɵcmp=c.VBU({type:AdministrationBlockedUsers,selectors:[["administration-blocked-users"]],decls:22,vars:12,consts:[[1,"slds-grid","slds-grid--vertical","slds-p-around--medium",2,"height","100%",3,"system-overlay-loading-spinner"],[1,"slds-grid","slds-grid--align-spread",3,"ngClass"],[1,"slds-text-heading_small","slds-m-bottom--x-small"],["label","LBL_BLOCKED_USERS"],["system-title","LBL_RELOAD",1,"slds-button","slds-button--icon","slds-m-left--xx-small",3,"click"],["icon","refresh"],[1,"slds-scrollable--y",3,"ngClass"],[1,"slds-table","slds-table_bordered","slds-table--header-fixed",3,"ngStyle"],[1,"slds-text-title--caps"],[1,"slds-truncate","slds-p-horizontal--x-small"],["label","LBL_USER_NAME"],[2,"width","100%"],["label","LBL_PERMANENT",2,"display","inline-block"],["label","LBL_UNTIL",2,"display","inline-block"],[4,"ngFor","ngForOf"],["class","slds-grow slds-p-around--small slds-align--absolute-center",4,"ngIf"],[1,"slds-p-right--x-small"],[1,"slds-truncate"],[4,"ngIf"],["class","slds-button slds-button--icon","system-title","LBL_DELETE",3,"click",4,"ngIf"],["icon","spinner",4,"ngIf"],[3,"date"],["system-title","LBL_DELETE",1,"slds-button","slds-button--icon",3,"click"],["icon","delete"],["icon","spinner"],[1,"slds-grow","slds-p-around--small","slds-align--absolute-center"],["label","MSG_NO_USERS_BLOCKED"]],template:function(e,t){1&e&&(c.j41(0,"div",0)(1,"div",1)(2,"div",2),c.nrm(3,"system-label",3),c.k0s(),c.j41(4,"button",4),c.bIt("click",(function(){return t.loadBlockedUsers()})),c.nrm(5,"system-button-icon",5),c.k0s()(),c.j41(6,"div",6)(7,"table",7)(8,"thead")(9,"tr",8)(10,"th")(11,"div",9),c.nrm(12,"system-label",10),c.k0s()(),c.j41(13,"th",11)(14,"div",9),c.nrm(15,"system-label",12),c.EFF(16,"/"),c.nrm(17,"system-label",13),c.k0s()(),c.nrm(18,"th"),c.k0s()(),c.j41(19,"tbody"),c.DNE(20,za,11,5,"tr",14),c.k0s()()(),c.DNE(21,Pa,3,0,"div",15),c.k0s()),2&e&&(c.Y8G("system-overlay-loading-spinner",t.isLoading),c.R7$(),c.Y8G("ngClass",c.eq3(6,Ja,0===t.blockedUsers.length)),c.R7$(5),c.Y8G("ngClass",c.eq3(8,qa,0!==t.blockedUsers.length)),c.R7$(),c.Y8G("ngStyle",c.eq3(10,Wa,0===t.blockedUsers.length?"none":"auto")),c.R7$(13),c.Y8G("ngForOf",t.blockedUsers),c.R7$(),c.Y8G("ngIf",!t.isLoading&&0===t.blockedUsers.length))},dependencies:[i.YU,i.Sq,i.bT,i.B3,L.t,K.f,ba.b,j.W,R.M,M.L],encapsulation:2})}return AdministrationBlockedUsers})();function Qa(e,t){if(1&e){const e=c.RV6();c.j41(0,"div",28)(1,"label",11),c.nrm(2,"system-label",30),c.k0s(),c.j41(3,"div",13)(4,"div",14)(5,"select",15),c.mxI("ngModelChange",(function(t){c.eBV(e);const s=c.XpG();return c.DH7(s.config.twoFactorAuthMethod,t)||(s.config.twoFactorAuthMethod=t),c.Njj(t)})),c.j41(6,"option",31),c.nrm(7,"system-label",32),c.k0s(),c.j41(8,"option",33),c.nrm(9,"system-label",25),c.k0s(),c.j41(10,"option",34),c.nrm(11,"system-label",29),c.k0s(),c.j41(12,"option",35),c.nrm(13,"system-label",36),c.k0s()()()()()}if(2&e){const e=c.XpG();c.R7$(5),c.R50("ngModel",e.config.twoFactorAuthMethod)}}function Za(e,t){if(1&e){const e=c.RV6();c.j41(0,"div",28)(1,"label",11),c.nrm(2,"system-label",37),c.k0s(),c.j41(3,"div",13)(4,"input",38),c.mxI("ngModelChange",(function(t){c.eBV(e);const s=c.XpG();return c.DH7(s.config.trustDeviceDays,t)||(s.config.trustDeviceDays=t),c.Njj(t)})),c.k0s()()()}if(2&e){const e=c.XpG();c.R7$(4),c.R50("ngModel",e.config.trustDeviceDays)}}function eo(e,t){if(1&e&&(c.j41(0,"option",39),c.EFF(1),c.k0s()),2&e){const e=t.$implicit;c.Y8G("value",e.id),c.R7$(),c.SpI(" ",e.name," ")}}function to(e,t){if(1&e&&(c.j41(0,"option",39),c.EFF(1),c.k0s()),2&e){const e=t.$implicit;c.Y8G("value",e.id),c.R7$(),c.SpI(" ",e.name," ")}}let so=(()=>{class AdministrationLoginMethods{constructor(e,t){this.backend=e,this.toast=t,this.isLoading=!0,this.mailboxes=[],this.config={twoFactorAuthMethod:"one_time_password",smsMailboxId:void 0,emailMailboxId:void 0,requireOn:"",trustDeviceDays:"90"}}cancel(){this.config=JSON.parse(JSON.stringify(this.configBackup))}save(){if(["sms","email"].indexOf(this.config.twoFactorAuthMethod)>-1&&!this.config[`${this.config.twoFactorAuthMethod}MailboxId`])return void this.toast.sendToast("LBL_MAILBOX_REQUIRED","error");Number(this.config.trustDeviceDays)>365&&(this.config.trustDeviceDays="365"),Number(this.config.trustDeviceDays)<1&&(this.config.trustDeviceDays="1");const e={method:this.config.twoFactorAuthMethod,sms_mailbox_id:this.config.smsMailboxId,email_mailbox_id:this.config.emailMailboxId,trust_device_days:this.config.trustDeviceDays,require_on:this.config.requireOn};this.isLoading=!0,this.backend.postRequest("configuration/configurator/editor/user_login_2fa",null,{config:e}).subscribe((()=>{this.configBackup=JSON.parse(JSON.stringify(this.config)),this.toast.sendToast("Login Method Configuration successfully saved.","success"),this.isLoading=!1}))}ngOnInit(){this.loadConfig(),this.loadMailboxes()}loadConfig(){this.isLoading=!0,this.backend.getRequest("configuration/configurator/editor/user_login_2fa").subscribe((e=>{this.config.twoFactorAuthMethod=e.method,this.config.requireOn=e.require_on??"",this.config.smsMailboxId=e.sms_mailbox_id,this.config.emailMailboxId=e.email_mailbox_id,this.config.trustDeviceDays=e.trust_device_days,this.configBackup=JSON.parse(JSON.stringify(this.config)),this.isLoading=!1}))}loadMailboxes(){this.isLoading=!0,this.backend.getRequest("module/Mailboxes",{limit:-99}).subscribe((e=>{this.mailboxes=e.list.sort(((e,t)=>e.name.localeCompare(t.name))),this.isLoading=!1}))}get smsmailboxes(){return this.mailboxes.filter((e=>"single_sms"==e.outbound_comm))}get emailmailboxes(){return this.mailboxes.filter((e=>"single"==e.outbound_comm))}handleRequireOnChange(){this.config.twoFactorAuthMethod="one_time_password",this.config.trustDeviceDays="90"}static#e=this.ɵfac=function(e){return new(e||AdministrationLoginMethods)(c.rXU(u.H),c.rXU(z.o))};static#t=this.ɵcmp=c.VBU({type:AdministrationLoginMethods,selectors:[["administration-login-methods"]],decls:47,vars:12,consts:[[1,"slds-p-around--medium",3,"system-overlay-loading-spinner"],[1,"slds-grid","slds-grid--align-spread"],[1,"slds-text-heading_small"],["label","LBL_2FA_CONFIGURATION"],[1,"slds-p-bottom--x-small",2,"white-space","nowrap"],[1,"slds-button","slds-button--icon","slds-button_neutral","slds-button--icon-border",3,"disabled","click"],["icon","close"],[1,"slds-button","slds-button--icon","slds-button_brand","slds-button--icon-border","slds-m-left--small",3,"disabled","click"],["icon","check"],[1,"slds-grid","slds-m-bottom--small"],[1,"slds-form-element","slds-size--1-of-3","slds-p-right--xx-small"],[1,"slds-form-element__label"],["label","LBL_REQUIRE_ON"],[1,"slds-form-element__control"],[1,"slds-select_container"],[1,"slds-select",3,"ngModel","ngModelChange"],["value",""],["label","LBL_NEVER"],["value","always"],["label","LBL_ALWAYS"],["value","device_change"],["label","LBL_DEVICE_CHANGE"],["class","slds-form-element slds-size--1-of-3 slds-p-left--xx-small slds-p-right--xx-small",4,"ngIf"],[1,"slds-grid"],["label","LBL_MAILBOX"],["label","LBL_SMS"],[1,"slds-select",3,"ngModel","disabled","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[1,"slds-form-element","slds-size--1-of-3","slds-p-left--xx-small","slds-p-right--xx-small"],["label","LBL_EMAIL"],["label","LBL_METHOD"],["value","one_time_password"],["label","LBL_TOTP_AUTHENTICATION"],["value","sms"],["value","email"],["value","user_defined"],["label","LBL_USER_DEFINED"],["label","LBL_TRUST_DEVICE_DURATION_DAYS"],["type","text","size","3",1,"slds-input","slds-text-align--right",2,"width","auto",3,"ngModel","ngModelChange"],[3,"value"]],template:function(e,t){1&e&&(c.j41(0,"div",0)(1,"div",1)(2,"div",2),c.nrm(3,"system-label",3),c.k0s(),c.j41(4,"div",4)(5,"button",5),c.bIt("click",(function(){return t.cancel()})),c.nrm(6,"system-button-icon",6),c.k0s(),c.j41(7,"button",7),c.bIt("click",(function(){return t.save()})),c.nrm(8,"system-button-icon",8),c.k0s()()(),c.j41(9,"div",9)(10,"div",10)(11,"label",11),c.nrm(12,"system-label",12),c.k0s(),c.j41(13,"div",13)(14,"div",14)(15,"select",15),c.mxI("ngModelChange",(function(e){return c.DH7(t.config.requireOn,e)||(t.config.requireOn=e),e})),c.bIt("ngModelChange",(function(){return t.handleRequireOnChange()})),c.j41(16,"option",16),c.nrm(17,"system-label",17),c.k0s(),c.j41(18,"option",18),c.nrm(19,"system-label",19),c.k0s(),c.j41(20,"option",20),c.nrm(21,"system-label",21),c.k0s()()()()(),c.DNE(22,Qa,14,1,"div",22)(23,Za,5,1,"div",22),c.k0s(),c.j41(24,"div",23)(25,"div",10)(26,"label",11),c.nrm(27,"system-label",24),c.EFF(28," ( "),c.nrm(29,"system-label",25),c.EFF(30," ) "),c.k0s(),c.j41(31,"div",13)(32,"div",14)(33,"select",26),c.mxI("ngModelChange",(function(e){return c.DH7(t.config.smsMailboxId,e)||(t.config.smsMailboxId=e),e})),c.nrm(34,"option",16),c.DNE(35,eo,2,2,"option",27),c.k0s()()()(),c.j41(36,"div",28)(37,"label",11),c.nrm(38,"system-label",24),c.EFF(39," ( "),c.nrm(40,"system-label",29),c.EFF(41," ) "),c.k0s(),c.j41(42,"div",13)(43,"div",14)(44,"select",26),c.mxI("ngModelChange",(function(e){return c.DH7(t.config.emailMailboxId,e)||(t.config.emailMailboxId=e),e})),c.nrm(45,"option",16),c.DNE(46,to,2,2,"option",27),c.k0s()()()()()()),2&e&&(c.Y8G("system-overlay-loading-spinner",t.isLoading),c.R7$(5),c.Y8G("disabled",t.isLoading),c.R7$(2),c.Y8G("disabled",t.isLoading),c.R7$(8),c.R50("ngModel",t.config.requireOn),c.R7$(7),c.Y8G("ngIf",!!t.config.requireOn),c.R7$(),c.Y8G("ngIf","device_change"==t.config.requireOn),c.R7$(10),c.R50("ngModel",t.config.smsMailboxId),c.Y8G("disabled",t.isLoading||0==t.smsmailboxes.length),c.R7$(2),c.Y8G("ngForOf",t.smsmailboxes),c.R7$(9),c.R50("ngModel",t.config.emailMailboxId),c.Y8G("disabled",t.isLoading||0==t.emailmailboxes.length),c.R7$(2),c.Y8G("ngForOf",t.emailmailboxes))},dependencies:[i.Sq,i.bT,n.xH,n.y7,n.me,n.wz,n.BC,n.vS,L.t,j.W,R.M],encapsulation:2})}return AdministrationLoginMethods})();const io=["whiteList"],no=["blackList"];let lo=(()=>{class AdministrationLoginManagement{constructor(e){this.cdref=e}ngOnInit(){this.cdref.detectChanges()}static#e=this.ɵfac=function(e){return new(e||AdministrationLoginManagement)(c.rXU(c.gRc))};static#t=this.ɵcmp=c.VBU({type:AdministrationLoginManagement,selectors:[["ng-component"]],viewQuery:function(e,t){if(1&e&&(c.GBs(io,5),c.GBs(no,5)),2&e){let e;c.mGM(e=c.lsd())&&(t.whiteListComponent=e.first),c.mGM(e=c.lsd())&&(t.blackListComponent=e.first)}},decls:22,vars:2,consts:[[1,"slds-grid","slds-grid_vertical-align-center","slds-p-around--small","slds-border--bottom"],["icon","custom:custom62"],[1,"slds-text-heading_medium"],["label","LBL_LOGIN_MANAGEMENT"],[1,"slds-box","slds-m-horizontal--medium","slds-m-bottom--medium","slds-m-top--medium",2,"padding","0"],["system-to-bottom",""],[1,"slds-p-bottom--medium","slds-p-horizontal--medium",2,"height","50%"],[1,"slds-box","slds-grid",2,"height","100%","padding","0"],[1,"slds-size--1-of-2",2,"height","100%"],["color","white",2,"display","block","height","100%",3,"siblingComponent"],["whiteList",""],[1,"slds-size--1-of-2","slds-border--left",2,"height","100%"],["color","black",2,"display","block","height","100%",3,"siblingComponent"],["blackList",""],[1,"slds-p-bottom--medium",2,"height","50%"],[1,"slds-grid","slds-m-horizontal--medium","slds-grid--vertical-align-start",2,"height","100%"],[1,"slds-size--1-of-2"],[1,"slds-box","slds-m-right--x-small","slds-m-bottom--medium",2,"padding","0","display","block"],[1,"slds-box","slds-m-right--x-small",2,"padding","0","display","block"],[1,"slds-box","slds-m-left--x-small",2,"padding","0","display","block","height","100%"]],template:function(e,t){1&e&&(c.j41(0,"div",0),c.nrm(1,"system-icon",1),c.j41(2,"h2",2),c.nrm(3,"system-label",3),c.k0s()(),c.j41(4,"div",4),c.nrm(5,"administration-login-restriction"),c.k0s(),c.j41(6,"div",5)(7,"div",6)(8,"div",7)(9,"div",8),c.nrm(10,"administration-login-restriction-ip-addresses",9,10),c.k0s(),c.j41(12,"div",11),c.nrm(13,"administration-login-restriction-ip-addresses",12,13),c.k0s()()(),c.j41(15,"div",14)(16,"div",15)(17,"div",16),c.nrm(18,"administration-password-config",17)(19,"administration-login-methods",18),c.k0s(),c.j41(20,"div",8),c.nrm(21,"administration-blocked-users",19),c.k0s()()()()),2&e&&(c.R7$(10),c.Y8G("siblingComponent",t.blackListComponent),c.R7$(3),c.Y8G("siblingComponent",t.whiteListComponent))},dependencies:[E.J,j.W,v.b,ja,Ya,wa,Ka,so],encapsulation:2})}return AdministrationLoginManagement})();var ao=s(42205);const oo=["administration-gdpr-retention-manager",""];function ro(e,t){1&e&&c.nrm(0,"system-utility-icon",19)}function co(e,t){if(1&e&&c.nrm(0,"system-utility-icon",20),2&e){const e=c.XpG().$implicit;c.Y8G("colorclass",e.id?"slds-icon-text-warning":"slds-icon-text-default")}}const mo=e=>({"slds-theme--shade":e});function uo(e,t){if(1&e){const e=c.RV6();c.j41(0,"div",12),c.bIt("click",(function(){const t=c.eBV(e),s=t.index,i=t.$implicit,n=c.XpG();return c.Njj(n.selectPolicyByIndex(s,i))})),c.j41(1,"div",13),c.bIt("dblclick",(function(){const t=c.eBV(e).$implicit,s=c.XpG();return c.Njj(s.toggleStatus(t))})),c.DNE(2,ro,1,0,"system-utility-icon",14)(3,co,1,1,"system-utility-icon",15),c.k0s(),c.j41(4,"div",16),c.EFF(5),c.k0s(),c.j41(6,"button",17),c.bIt("click",(function(){const t=c.eBV(e).index,s=c.XpG();return c.Njj(s.deleteByIndex(t))})),c.nrm(7,"system-button-icon",18),c.k0s()()}if(2&e){const e=t.$implicit,s=t.index,i=c.XpG();c.Y8G("ngClass",c.eq3(6,mo,s==i.selectedPolicyIndex)),c.R7$(),c.Y8G("ngSwitch",e.active),c.R7$(),c.Y8G("ngSwitchCase",!0),c.R7$(),c.Y8G("ngSwitchCase",!1),c.R7$(2),c.JRh(e.name),c.R7$(),c.Y8G("disabled",i.isloading||i.hasChanges)}}function go(e,t){if(1&e){const e=c.RV6();c.j41(0,"button",17),c.bIt("click",(function(){c.eBV(e);const t=c.XpG();return c.Njj(t.addPolicy())})),c.nrm(1,"system-button-icon",21),c.k0s()}if(2&e){const e=c.XpG();c.Y8G("disabled",e.isloading)}}function ho(e,t){if(1&e){const e=c.RV6();c.j41(0,"tr",67)(1,"td",68)(2,"a",69),c.bIt("click",(function(t){const s=c.eBV(e).$implicit,i=c.XpG(4);return c.Njj(i.openRecord(s.id,t))})),c.EFF(3),c.k0s()(),c.j41(4,"td"),c.EFF(5),c.k0s()()}if(2&e){const e=t.$implicit;c.R7$(3),c.JRh(e.id),c.R7$(2),c.JRh(e.name)}}function bo(e,t){if(1&e&&(c.j41(0,"tbody"),c.DNE(1,ho,6,2,"tr",66),c.k0s()),2&e){const e=c.XpG(3);c.R7$(),c.Y8G("ngForOf",e.results.list)}}function po(e,t){1&e&&c.nrm(0,"tbody",70),2&e&&c.Y8G("rows",20)}function fo(e,t){1&e&&(c.j41(0,"div",71)(1,"system-illustration-no-records"),c.nrm(2,"system-label",72),c.k0s()())}function yo(e,t){if(1&e){const e=c.RV6();c.j41(0,"div",58),c.bIt("system-to-bottom",(function(){c.eBV(e);const t=c.XpG(2);return c.Njj(t.loadmore())})),c.j41(1,"table",59)(2,"thead")(3,"tr",60)(4,"th"),c.nrm(5,"system-label",61),c.k0s(),c.j41(6,"th"),c.nrm(7,"system-label",62),c.k0s()()(),c.DNE(8,bo,2,1,"tbody",63)(9,po,1,1,"tbody",64),c.k0s(),c.DNE(10,fo,3,0,"div",65),c.k0s()}if(2&e){const e=c.XpG(2);c.R7$(8),c.Y8G("ngIf",e.results),c.R7$(),c.Y8G("ngIf",e.isloading),c.R7$(),c.Y8G("ngIf",!e.isloading&&0==e.results.total)}}function _o(e,t){if(1&e){const e=c.RV6();c.qex(0),c.j41(1,"div",22)(2,"div",23)(3,"div",24)(4,"label",25),c.nrm(5,"system-label",26),c.k0s(),c.j41(6,"div",27)(7,"system-input-text",28),c.mxI("ngModelChange",(function(t){c.eBV(e);const s=c.XpG();return c.DH7(s.selectedPolicy.name,t)||(s.selectedPolicy.name=t),c.Njj(t)})),c.bIt("ngModelChange",(function(){c.eBV(e);const t=c.XpG();return c.Njj(t.registerPolicyChanges(t.selectedPolicy))})),c.k0s()()(),c.j41(8,"div",29)(9,"label",25),c.nrm(10,"system-label",30),c.k0s(),c.j41(11,"div",27)(12,"div",31)(13,"select",32),c.mxI("ngModelChange",(function(t){c.eBV(e);const s=c.XpG();return c.DH7(s.selectedPolicy.retention_type,t)||(s.selectedPolicy.retention_type=t),c.Njj(t)})),c.bIt("ngModelChange",(function(){c.eBV(e);const t=c.XpG();return c.Njj(t.registerPolicyChanges(t.selectedPolicy))})),c.j41(14,"option",33),c.nrm(15,"system-label",34),c.k0s(),c.j41(16,"option",35),c.nrm(17,"system-label",36),c.k0s(),c.j41(18,"option",37),c.nrm(19,"system-label",38),c.k0s()()()()()(),c.j41(20,"div",23)(21,"div",24)(22,"label",25),c.nrm(23,"system-label",39),c.k0s(),c.j41(24,"div",27)(25,"system-input-module-filter",28),c.mxI("ngModelChange",(function(t){c.eBV(e);const s=c.XpG();return c.DH7(s.selectedPolicy.sysmodulefilter_id,t)||(s.selectedPolicy.sysmodulefilter_id=t),c.Njj(t)})),c.bIt("ngModelChange",(function(){c.eBV(e);const t=c.XpG();return c.Njj(t.registerPolicyChanges(t.selectedPolicy))})),c.k0s()()(),c.j41(26,"div",29)(27,"label",25),c.nrm(28,"system-label",40),c.k0s(),c.j41(29,"div",27)(30,"div",31)(31,"select",32),c.mxI("ngModelChange",(function(t){c.eBV(e);const s=c.XpG();return c.DH7(s.selectedPolicy.include_deleted,t)||(s.selectedPolicy.include_deleted=t),c.Njj(t)})),c.bIt("ngModelChange",(function(){c.eBV(e);const t=c.XpG();return c.Njj(t.registerPolicyChanges(t.selectedPolicy))})),c.j41(32,"option",41),c.nrm(33,"system-label",42),c.k0s(),c.j41(34,"option",41),c.nrm(35,"system-label",43),c.k0s(),c.j41(36,"option",41),c.nrm(37,"system-label",44),c.k0s()()()()()(),c.j41(38,"div",45)(39,"label",25),c.nrm(40,"system-label",46),c.k0s(),c.j41(41,"div",27)(42,"system-input-text",28),c.mxI("ngModelChange",(function(t){c.eBV(e);const s=c.XpG();return c.DH7(s.selectedPolicy.delete_related,t)||(s.selectedPolicy.delete_related=t),c.Njj(t)})),c.bIt("ngModelChange",(function(){c.eBV(e);const t=c.XpG();return c.Njj(t.registerPolicyChanges(t.selectedPolicy))})),c.k0s()()(),c.j41(43,"div",45)(44,"label",25),c.nrm(45,"system-label",47),c.k0s(),c.j41(46,"div",27)(47,"textarea",48),c.mxI("ngModelChange",(function(t){c.eBV(e);const s=c.XpG();return c.DH7(s.selectedPolicy.description,t)||(s.selectedPolicy.description=t),c.Njj(t)})),c.bIt("ngModelChange",(function(){c.eBV(e);const t=c.XpG();return c.Njj(t.registerPolicyChanges(t.selectedPolicy))})),c.k0s()()(),c.j41(48,"div",49)(49,"div"),c.nrm(50,"system-label",50),c.EFF(51),c.k0s(),c.j41(52,"button",51),c.bIt("click",(function(){c.eBV(e);const t=c.XpG();return c.Njj(t.getResults())})),c.nrm(53,"system-label",52),c.k0s(),c.j41(54,"button",53),c.bIt("click",(function(){c.eBV(e);const t=c.XpG();return c.Njj(t.cancel())})),c.nrm(55,"system-label",54),c.k0s(),c.j41(56,"button",55),c.bIt("click",(function(){c.eBV(e);const t=c.XpG();return c.Njj(t.save())})),c.nrm(57,"system-label",56),c.k0s()()(),c.DNE(58,yo,11,3,"div",57),c.bVm()}if(2&e){const e=c.XpG();c.R7$(7),c.R50("ngModel",e.selectedPolicy.name),c.R7$(6),c.R50("ngModel",e.selectedPolicy.retention_type),c.R7$(12),c.R50("ngModel",e.selectedPolicy.sysmodulefilter_id),c.R7$(6),c.R50("ngModel",e.selectedPolicy.include_deleted),c.R7$(),c.Y8G("value",0),c.R7$(2),c.Y8G("value",1),c.R7$(2),c.Y8G("value",null),c.R7$(6),c.R50("ngModel",e.selectedPolicy.delete_related),c.R7$(5),c.R50("ngModel",e.selectedPolicy.description),c.R7$(4),c.SpI(" ",e.results.total,""),c.R7$(),c.Y8G("disabled",!e.selectedPolicy.id||e.hasChanges),c.R7$(2),c.Y8G("disabled",e.isloading||!e.hasChanges),c.R7$(2),c.Y8G("disabled",e.isloading||!e.hasChanges),c.R7$(2),c.Y8G("ngIf",e.selectedPolicy.id)}}function vo(e,t){1&e&&(c.j41(0,"div",73),c.nrm(1,"system-label",74),c.k0s())}let ko=(()=>{class AdministrationGDPRRetentionManager{constructor(e,t,s,i,n,l){this.toast=e,this.modal=t,this.modelutilities=s,this.backend=i,this.router=n,this.injector=l,this.policies=[],this.isloading=!1,this.initialized=!1,this.hasChanges=!1,this.isNew=!1,this.cachedPolicy={},this.initializeResults()}ngOnInit(){this.loadPolicies()}selectPolicyByIndex(e,t){if(1==this.hasChanges)return this.toast.sendToast("MSG_HAS_UNSAVED","error");this.isloading||this.selectedPolicyIndex==e||(this.selectedPolicyIndex=e,this.cachedPolicy={...t},this.initializeResults())}get selectedPolicy(){return this.selectedPolicyIndex>=0?this.policies[this.selectedPolicyIndex]:void 0}initializeResults(){this.results={list:[],module:"",total:0}}loadPolicies(){this.backend.getRequest("admin/gdprmanager/retentionpolicies").subscribe((e=>{this.policies=e,this.initialized=!0}))}toggleStatus(e){e.id&&(e.active=!e.active,this.backend.postRequest(`admin/gdprmanager/retentionpolicies/${e.id}/activate/${e.active?1:0}`))}save(){let e=this.modelutilities.generateGuid(),t=this.modal.await("LBL_SAVING");this.backend.postRequest(`admin/gdprmanager/retentionpolicies/${this.selectedPolicy.id?this.selectedPolicy.id:e}`,{},this.selectedPolicy).subscribe({next:()=>{this.selectedPolicy.id||(this.selectedPolicy.id=e),this.cachedPolicy={...this.selectedPolicy},this.hasChanges=!1,this.isNew=!1,t.emit(!0)},error:()=>{t.emit(!0)}})}cancel(){this.hasChanges=!1,this.policies[this.selectedPolicyIndex]=this.cachedPolicy}getResults(){this.isloading=!0,this.results.list=[],this.backend.getRequest(`admin/gdprmanager/retentionpolicies/${this.selectedPolicy.id}/results`).subscribe({next:e=>{this.results=e,this.isloading=!1},error:()=>{this.isloading=!1}})}loadmore(){!this.isloading&&this.results.total>this.results.list.length&&(this.isloading=!0,this.backend.getRequest(`admin/gdprmanager/retentionpolicies/${this.selectedPolicy.id}/results`,{start:this.results.list.length}).subscribe((e=>{this.results.list=this.results.list.concat(e.list),this.isloading=!1}),(()=>{this.isloading=!1})))}openRecord(e,t){t.preventDefault(),t.stopPropagation(),this.router.navigate([`module/${this.results.module}/${e}`])}deleteByIndex(e){this.modal.confirm("LBL_DELETE_RECORD","LBL_DELETE_RECORD").subscribe((t=>{if(t)if(this.selectedPolicy.id){let t=this.modal.await("LBL_DELETING");this.backend.deleteRequest(`admin/gdprmanager/retentionpolicies/${this.selectedPolicy.id}`).subscribe({next:()=>{this.deletePolicy(e),this.hasChanges=!1,t.emit(!0)},error:()=>{t.emit(!0)}})}else this.deletePolicy(e),this.hasChanges=!1}))}deletePolicy(e){this.selectedPolicyIndex==e&&(this.selectedPolicyIndex=void 0),this.policies.splice(e,1)}addPolicy(){this.modal.input("LBL_POLICY_NAME","LBL_POLICY_NAME").subscribe((e=>{if(e){let t={id:"",name:e,deleted:!1,retention_type:"I",active:!1,description:""};this.policies.push(t),this.cachedPolicy=t,this.selectedPolicyIndex=this.policies.length-1,this.hasChanges=!0,this.isNew=!0}}))}registerPolicyChanges(e){this.cachedPolicy.id!=e.id||this.isNew||(this.hasChanges=JSON.stringify(e)!=JSON.stringify(this.cachedPolicy))}static#e=this.ɵfac=function(e){return new(e||AdministrationGDPRRetentionManager)(c.rXU(z.o),c.rXU(P.y),c.rXU(V.g),c.rXU(u.H),c.rXU(w.Ix),c.rXU(c.zZn))};static#t=this.ɵcmp=c.VBU({type:AdministrationGDPRRetentionManager,selectors:[["","administration-gdpr-retention-manager",""]],attrs:oo,decls:13,vars:5,consts:[[1,"slds-grid","slds-grid_vertical-align-center","slds-p-around--small","slds-border--bottom"],["icon","apex_plugin"],[1,"slds-text-heading_medium"],["label","LBL_GDPR_RETENTION_MANAGER"],[1,"slds-theme--default","slds-grid",3,"system-overlay-loading-spinner"],["system-to-bottom","",1,"slds-size--1-of-3","slds-border--right"],["class","slds-grid slds-grid--align-spread slds-grid_vertical-align-center slds-p-around--small slds-border--bottom",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"slds-p-around--x-small","slds-text-align--center"],["class","slds-button slds-button--icon",3,"disabled","click",4,"ngIf"],[1,"slds-size--2-of-3"],[4,"ngIf","ngIfElse"],["selectpolicy",""],[1,"slds-grid","slds-grid--align-spread","slds-grid_vertical-align-center","slds-p-around--small","slds-border--bottom",3,"ngClass","click"],[3,"ngSwitch","dblclick"],["icon","success","colorclass","slds-icon-text-success","size","x-small",4,"ngSwitchCase"],["icon","clear","size","x-small",3,"colorclass",4,"ngSwitchCase"],[1,"slds-grow","slds-p-left--x-small","slds-truncate","slds-text-link--reset"],[1,"slds-button","slds-button--icon",3,"disabled","click"],["icon","delete"],["icon","success","colorclass","slds-icon-text-success","size","x-small"],["icon","clear","size","x-small",3,"colorclass"],["icon","new"],[1,"slds-grid_vertical","slds-p-around--x-small"],[1,"slds-grid","slds-grid_vertical-align-center","slds-p-right--xx-small"],[1,"slds-size--3-of-4","slds-form-element"],[1,"slds-form-element__label"],["label","LBL_NAME"],[1,"slds-form-element__control"],[3,"ngModel","ngModelChange"],[1,"slds-size--1-of-4","slds-form-element","slds-p-left--xx-small"],["label","LBL_TYPE"],[1,"slds-select_container"],[1,"slds-select",3,"ngModel","ngModelChange"],["value","I"],["label","LBL_SET_INACTIVE"],["value","D"],["label","LBL_MARK_DELETED"],["value","P"],["label","LBL_PURGE"],["label","LBL_MODULE_FILTER"],["label","LBL_INCLUDE"],[3,"value"],["label","LBL_NOT_DELETED_ONLY"],["label","LBL_DELETED_ONLY"],["label","LBL_BOTH"],[1,"slds-form-element"],["label","LBL_DELETE_RELATED"],["label","LBL_DESCRIPTION"],[1,"slds-textarea",3,"ngModel","ngModelChange"],[1,"slds-grid","slds-p-vertical--x-small","slds-grid_vertical-align-center"],["label","LBL_TOTAL"],[1,"slds-col--bump-left","slds-button","slds-button_neutral",3,"disabled","click"],["label","LBL_TEST"],[1,"slds-button","slds-button_neutral",3,"disabled","click"],["label","LBL_CANCEL"],[1,"slds-button","slds-button_brand",3,"disabled","click"],["label","LBL_SAVE"],[3,"system-to-bottom",4,"ngIf"],[3,"system-to-bottom"],["role","grid",1,"slds-table","slds-table--fixed-layout","slds-max-medium-table--stacked-horizontal","slds-table--header-fixed"],[1,"slds-text-title--caps"],["label","LBL_ID",1,"slds-th__action"],["label","LBL_SUMMARY",1,"slds-th__action"],[4,"ngIf"],["system-table-stencils","","columns","2",3,"rows",4,"ngIf"],["class","slds-height_full slds-align--absolute-center",4,"ngIf"],["class","slds-hint-parent",4,"ngFor","ngForOf"],[1,"slds-hint-parent"],[1,"slds-truncate"],["href","#",1,"slds-text-link_reset",3,"click"],["system-table-stencils","","columns","2",3,"rows"],[1,"slds-height_full","slds-align--absolute-center"],["label","LBL_NO_RECORDS"],["system-to-bottom-noscroll","",1,"slds-align--absolute-center"],["label","LBL_SELECT_POLICY"]],template:function(e,t){if(1&e&&(c.j41(0,"div",0),c.nrm(1,"system-icon",1),c.j41(2,"h2",2),c.nrm(3,"system-label",3),c.k0s()(),c.j41(4,"div",4)(5,"div",5),c.DNE(6,uo,8,8,"div",6),c.j41(7,"div",7),c.DNE(8,go,2,1,"button",8),c.k0s()(),c.j41(9,"div",9),c.DNE(10,_o,59,14,"ng-container",10)(11,vo,2,0,"ng-template",null,11,c.C5r),c.k0s()()),2&e){const e=c.sdS(12);c.R7$(4),c.Y8G("system-overlay-loading-spinner",!t.initialized),c.R7$(2),c.Y8G("ngForOf",t.policies),c.R7$(2),c.Y8G("ngIf",t.initialized),c.R7$(2),c.Y8G("ngIf",t.selectedPolicyIndex>=0)("ngIfElse",e)}},dependencies:[i.YU,i.Sq,i.bT,i.ux,i.e1,n.xH,n.y7,n.me,n.wz,n.BC,n.vS,L.t,E.J,ba.b,Q.H,ls.c,j.W,ao.t,F.B,v.b,k.p,R.M],encapsulation:2})}return AdministrationGDPRRetentionManager})();var Ro=s(32641);function Lo(e,t){if(1&e){const e=c.RV6();c.j41(0,"div",22)(1,"button",23),c.bIt("click",(function(){c.eBV(e);const t=c.XpG();return c.Njj(t.addAsset("loginimage"))})),c.nrm(2,"system-button-icon",24),c.k0s()()}}function Eo(e,t){if(1&e){const e=c.RV6();c.j41(0,"div",25),c.nrm(1,"img",26),c.j41(2,"div",27),c.bIt("click",(function(){c.eBV(e);const t=c.XpG();return c.Njj(t.assets.loginimage=void 0)})),c.j41(3,"div",28),c.nrm(4,"system-utility-icon",29),c.k0s()()()}if(2&e){const e=c.XpG();c.R7$(),c.Y8G("src",e.assets.loginimage,c.B4B)}}function jo(e,t){if(1&e){const e=c.RV6();c.j41(0,"div",22)(1,"button",23),c.bIt("click",(function(){c.eBV(e);const t=c.XpG();return c.Njj(t.addAsset("headerimage"))})),c.nrm(2,"system-button-icon",24),c.k0s()()}}function Fo(e,t){if(1&e){const e=c.RV6();c.j41(0,"div",25),c.nrm(1,"img",26),c.j41(2,"div",27),c.bIt("click",(function(){c.eBV(e);const t=c.XpG();return c.Njj(t.assets.headerimage=void 0)})),c.j41(3,"div",28),c.nrm(4,"system-utility-icon",29),c.k0s()()()}if(2&e){const e=c.XpG();c.R7$(),c.Y8G("src",e.assets.headerimage,c.B4B)}}function Mo(e,t){if(1&e){const e=c.RV6();c.j41(0,"system-input-color",32),c.mxI("ngModelChange",(function(t){c.eBV(e);const s=c.XpG().$implicit;return c.DH7(s.value,t)||(s.value=t),c.Njj(t)})),c.k0s()}if(2&e){const e=c.XpG().$implicit;c.Y8G("isedited",e.value!=e.originalvalue),c.R50("ngModel",e.value)}}const xo=e=>({"slds-is-edited":e});function Io(e,t){if(1&e){const e=c.RV6();c.j41(0,"input",33),c.mxI("ngModelChange",(function(t){c.eBV(e);const s=c.XpG().$implicit;return c.DH7(s.value,t)||(s.value=t),c.Njj(t)})),c.k0s()}if(2&e){const e=c.XpG().$implicit;c.Y8G("ngClass",c.eq3(2,xo,e.value!=e.originalvalue)),c.R50("ngModel",e.value)}}function Go(e,t){if(1&e&&(c.j41(0,"div",11)(1,"div",12),c.EFF(2),c.k0s(),c.j41(3,"div",14),c.DNE(4,Mo,1,2,"system-input-color",30)(5,Io,1,4,"input",31),c.k0s()()),2&e){const e=t.$implicit;c.R7$(2),c.SpI(" ",e.name," "),c.R7$(2),c.Y8G("ngIf","color"==e.csstype),c.R7$(),c.Y8G("ngIf","string"==e.csstype)}}let Ao=(()=>{class AdministrationAssetManager{constructor(e,t,s,i,n,l){this.toast=e,this.modal=t,this.backend=s,this.configuration=i,this.modelutilities=n,this.injector=l,this.assets={loginimage:null,headerimage:null},this.cssvars=[{value:"",csstype:"color",name:"color-white"},{value:"",csstype:"color",name:"color-grey-3"},{value:"",csstype:"color",name:"color-grey-9"},{value:"",csstype:"color",name:"color-grey-13"},{value:"",csstype:"color",name:"brand-background-primary"},{value:"",csstype:"color",name:"brand-primary"},{value:"",csstype:"color",name:"brand-primary-active"},{value:"",csstype:"color",name:"brand-accessible"},{value:"",csstype:"color",name:"brand-accessible-active"},{value:"",csstype:"color",name:"brand-header-contrast-cool"},{value:"",csstype:"color",name:"brand-text-link"},{value:"",csstype:"color",name:"color-background-inverse"},{value:"",csstype:"color",name:"color-border-inverse"},{value:"",csstype:"color",name:"color-background-success"},{value:"",csstype:"color",name:"color-background-success-dark"},{value:"",csstype:"color",name:"color-text-link-active"},{value:"",csstype:"color",name:"color-progressbar_item-completed"},{value:"",csstype:"color",name:"brand-primary-transparent"},{value:"",csstype:"color",name:"color-background-alt-inverse"},{value:"",csstype:"color",name:"color-border-brand"},{value:"",csstype:"color",name:"sds-c-button-brand-color-background"},{value:"",csstype:"color",name:"sds-c-button-neutral-color-background-hover"},{value:"",csstype:"color",name:"sds-c-button-brand-color-border-hover"},{value:"",csstype:"color",name:"sds-c-button-brand-color-background-active"},{value:"",csstype:"color",name:"sds-c-button-brand-color-border-active"},{value:"",csstype:"color",name:"sds-c-button-brand-color-background-hover"},{value:"",csstype:"string",name:"sds-c-input-shadow-focus"},{value:"",csstype:"string",name:"sds-c-textarea-shadow-focus"},{value:"",csstype:"string",name:"sds-c-select-shadow-focus"},{value:"",csstype:"color",name:"sds-c-button-text-color-hover"},{value:"",csstype:"color",name:"sds-c-icon-color-foreground"},{value:"",csstype:"color",name:"slds-c-slider-track-color-background"},{value:"",csstype:"color",name:"spice-alert-color-error"},{value:"",csstype:"color",name:"spice-alert-color-info"},{value:"",csstype:"color",name:"spice-alert-color-warning"},{value:"",csstype:"color",name:"spice-alert-color-success"},{value:"",csstype:"color",name:"spice-alert-color-custom"}],this.assetdimensions={loginimage:{cropheight:300,cropwidth:300,croptype:"square",cropresize:!1},headerimage:{cropheight:50,cropwidth:300,croptype:"square",cropresize:!1}}}ngOnInit(){for(let e of this.cssvars)e.value=getComputedStyle(document.documentElement).getPropertyValue("--"+e.name),e.originalvalue=getComputedStyle(document.documentElement).getPropertyValue("--"+e.name);this.loadSystemAssets()}loadSystemAssets(){this.backend.getRequest("system/spiceui/admin/assets").subscribe((e=>{this.loadedassets=e;let t=e.find((e=>"loginimage"==e.assetkey));t&&(this.assets.loginimage=t.assetvalue);let s=e.find((e=>"headerimage"==e.assetkey));s&&(this.assets.headerimage=s.assetvalue);let i=e.find((e=>"colors"==e.assetkey));if(i){let e=JSON.parse(i.assetvalue);for(let t in e){let s=this.cssvars.find((e=>t));s&&(s.loadedvalue=e[t])}}}))}addAsset(e){this.modal.openModal("SystemUploadImage").subscribe((t=>{t.instance.cropheight=this.assetdimensions[e].cropheight,t.instance.cropwidth=this.assetdimensions[e].cropwidth,t.instance.croptype=this.assetdimensions[e].croptype,t.instance.cropresize=this.assetdimensions[e].cropresize,t.instance.imagedata.subscribe((t=>{this.assets[e]=t}))}))}colorLabel(e){return"LBL_TC_"+e.toUpperCase().replace(new RegExp("-","g"),"_")}assetBoxStyle(e){return{width:this.assetdimensions[e].cropwidth,height:this.assetdimensions[e].cropheight}}save(){let e=[],t=this.loadedassets.find((e=>"loginimage"==e.assetkey));e.push({id:t?t.id:this.modelutilities.generateGuid(),assetkey:"loginimage",assetvalue:this.assets.loginimage});let s=this.loadedassets.find((e=>"headerimage"==e.assetkey));e.push({id:s?s.id:this.modelutilities.generateGuid(),assetkey:"headerimage",assetvalue:this.assets.headerimage});let i={};for(let e of this.cssvars)e.value!=e.loadedvalue&&(i[e.name]=e.value,document.documentElement.style.setProperty("--"+e.name,e.value));let n=this.loadedassets.find((e=>"colors"==e.assetkey));e.push({id:n?n.id:this.modelutilities.generateGuid(),assetkey:"colors",assetvalue:JSON.stringify(i)}),this.backend.postRequest("system/spiceui/admin/assets",{},e).subscribe((e=>{this.configuration.setAssets(e,!0)}))}reset(){let e=[];const t=window._.object(this.cssvars.map((e=>e.name)),Array.from({length:this.cssvars.length},(()=>"")));let s=this.loadedassets.find((e=>"colors"==e.assetkey));e.push({id:s?s.id:this.modelutilities.generateGuid(),assetkey:"colors",assetvalue:JSON.stringify(t)}),this.backend.postRequest("system/spiceui/admin/assets",{},e).subscribe((e=>{this.assets=e,this.configuration.setAssets(e,!0)}));for(let e of this.cssvars)e.value=e.originalvalue}static#e=this.ɵfac=function(e){return new(e||AdministrationAssetManager)(c.rXU(z.o),c.rXU(P.y),c.rXU(u.H),c.rXU(H.i),c.rXU(V.g),c.rXU(c.zZn))};static#t=this.ɵcmp=c.VBU({type:AdministrationAssetManager,selectors:[["administration-asset-manager"]],decls:30,vars:7,consts:[[1,"slds-grid","slds-grid_vertical-align-center","slds-p-around--small","slds-border--bottom"],["icon","apex_plugin"],[1,"slds-text-heading_medium"],["label","LBL_CI_MANAGEMENT"],[1,"slds-button","slds-button--neutral","slds-col--bump-left",3,"click"],["label","LBL_RESET"],["label","LBL_SAVE"],["system-to-bottom","",1,"slds-theme--default","slds-p-around--small"],[1,"slds-text-heading--medium","slds-p-vertical--x-small","slds-border--bottom"],["label","LBL_IMAGES"],[1,"slds-grid","slds-grid--vertical"],[1,"slds-grid","slds-p-vertical--small","slds-grid--vertical-align-center"],[1,"slds-size--1-of-3"],["label","LBL_LOGIN_IMAGE"],[1,"slds-grow"],[1,"slds-box--border",3,"ngStyle"],["class","slds-size--1-of-1 slds-height_full slds-align--absolute-center",4,"ngIf"],["class","slds-is-relative",4,"ngIf"],["label","LBL_HEADER_IMAGE"],[1,"slds-text-heading--medium","slds-p-vertical--x-small","slds-border--top","slds-border--bottom"],["label","LBL_COLORS"],["class","slds-grid slds-p-vertical--small slds-grid--vertical-align-center",4,"ngFor","ngForOf"],[1,"slds-size--1-of-1","slds-height_full","slds-align--absolute-center"],[1,"slds-button","slds-button--icon",3,"click"],["icon","new"],[1,"slds-is-relative"],[3,"src"],[1,"slds-is-absolute",2,"height","40px","width","40px","top","calc(50% - 20px)","left","calc(50% - 20px)",3,"click"],[1,"slds-align--absolute-center",2,"background","white","height","40px","width","40px","border-radius","20px"],["icon","delete","size","x-small",2,"z-index","1"],[3,"isedited","ngModel","ngModelChange",4,"ngIf"],["class","slds-input",3,"ngClass","ngModel","ngModelChange",4,"ngIf"],[3,"isedited","ngModel","ngModelChange"],[1,"slds-input",3,"ngClass","ngModel","ngModelChange"]],template:function(e,t){1&e&&(c.j41(0,"div",0),c.nrm(1,"system-icon",1),c.j41(2,"h2",2),c.nrm(3,"system-label",3),c.k0s(),c.j41(4,"button",4),c.bIt("click",(function(){return t.reset()})),c.nrm(5,"system-label",5),c.k0s(),c.j41(6,"button",4),c.bIt("click",(function(){return t.save()})),c.nrm(7,"system-label",6),c.k0s()(),c.j41(8,"div",7)(9,"h2",8),c.nrm(10,"system-label",9),c.k0s(),c.j41(11,"div",10)(12,"div",11)(13,"div",12),c.nrm(14,"system-label",13),c.k0s(),c.j41(15,"div",14)(16,"div",15),c.DNE(17,Lo,3,0,"div",16)(18,Eo,5,1,"div",17),c.k0s()()(),c.j41(19,"div",11)(20,"div",12),c.nrm(21,"system-label",18),c.k0s(),c.j41(22,"div",14)(23,"div",15),c.DNE(24,jo,3,0,"div",16)(25,Fo,5,1,"div",17),c.k0s()()()(),c.j41(26,"h2",19),c.nrm(27,"system-label",20),c.k0s(),c.j41(28,"div",10),c.DNE(29,Go,6,3,"div",21),c.k0s()()),2&e&&(c.R7$(16),c.Y8G("ngStyle",t.assetBoxStyle("loginimage")),c.R7$(),c.Y8G("ngIf",!t.assets.loginimage),c.R7$(),c.Y8G("ngIf",t.assets.loginimage),c.R7$(5),c.Y8G("ngStyle",t.assetBoxStyle("headerimage")),c.R7$(),c.Y8G("ngIf",!t.assets.headerimage),c.R7$(),c.Y8G("ngIf",t.assets.headerimage),c.R7$(4),c.Y8G("ngForOf",t.cssvars))},dependencies:[i.YU,i.Sq,i.bT,i.B3,n.me,n.BC,n.vS,L.t,E.J,j.W,F.B,Ro.b,v.b],encapsulation:2})}return AdministrationAssetManager})(),So=(()=>{class AdministrationMigrateLegacyDoms{constructor(e,t,s,i){this.backend=e,this.toast=t,this.language=s,this.modal=i}executeMigrate(){let e=this.modal.await(this.language.getLabel("LBL_LOADING"));this.backend.postRequest("admin/migrate/legacydoms").subscribe((t=>{e.emit(!0),t?this.toast.sendToast(this.language.getLabel("LBL_MIGRATED"),"success"):this.toast.sendToast(this.language.getLabel("LBL_ERROR"),"error")}))}static#e=this.ɵfac=function(e){return new(e||AdministrationMigrateLegacyDoms)(c.rXU(u.H),c.rXU(z.o),c.rXU(h.B),c.rXU(P.y))};static#t=this.ɵcmp=c.VBU({type:AdministrationMigrateLegacyDoms,selectors:[["administration-migrate-legacy-doms"]],decls:6,vars:0,consts:[[1,"slds-grid","slds-grid--vertical-align-center","slds-grid--align-spread","slds-p-vertical--xx-small","slds-border--bottom","slds-disabled-text"],["icon","custom_apps","size","x-small"],["label","LBL_MIGRATE_LEGACY_DOMS",1,"slds-p-horizontal--x-small"],["label","LBL_MIGRATE_LEGACY_DOMS","length","long",1,"slds-grow"],["disabled","",1,"slds-button","slds-button--neutral","slds-button--small",3,"click"],["label","LBL_EXECUTE"]],template:function(e,t){1&e&&(c.j41(0,"div",0),c.nrm(1,"system-utility-icon",1)(2,"system-label",2)(3,"system-label",3),c.j41(4,"button",4),c.bIt("click",(function(){return t.executeMigrate()})),c.nrm(5,"system-label",5),c.k0s()())},dependencies:[j.W,F.B],encapsulation:2})}return AdministrationMigrateLegacyDoms})();var Co=s(85609);let Do=(()=>{class AdminComponentsModule{static#e=this.ɵfac=function(e){return new(e||AdminComponentsModule)};static#t=this.ɵmod=c.$C({type:AdminComponentsModule});static#s=this.ɵinj=c.G2t({imports:[i.MD,n.YN,o.SystemComponents,a.h,l.ad,d.ObjectComponents,r.ObjectFields,Co.WorkbenchModule]})}return AdminComponentsModule})();("undefined"==typeof ngJitMode||ngJitMode)&&c.Obh(Do,{declarations:[_i,gi,di,vi,mi,Mi,ko,Y,T,O,at,Qe,Gt,ge,$t,At,Vt,ps,_s,ns,Wt,os,Ls,js,zl,Pl,Hl,Ti,Ui,Vi,Hi,Qi,Zi,mn,Fn,yn,Tn,Zn,el,tl,sl,il,pl,Ml,Dl,Ys,Vs,Hs,Qs,Ms,Cs,As,Is,sa,aa,So,ha,ka,bn,ja,Ya,Ia,wa,Ka,lo,Ao,so],imports:[i.MD,n.YN,o.SystemComponents,a.h,l.ad,d.ObjectComponents,r.ObjectFields,Co.WorkbenchModule]})}}]);